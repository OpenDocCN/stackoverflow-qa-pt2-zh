# StackOverflow 问答 16079000-16079999

# c# - DataServiceCollection 到字符串

> ID：16079000
> 
> 赞同：0
> 
> 时间：2013-04-18T09:17:56.423
> 
> 标签：c#, wcf, xaml, wcf-data-services

我有 dataServiceCollection 并想从中提取一些信息并将其放入字符串中。

```
 private DataServiceCollection<P.Groups> groups;
    public DataServiceCollection<P.Groups> Groups()
    {
        if (groups == null)
        {
            Uri pRoot = new Uri("http://localhost:19297/WcfDataService1.svc/");
            P.Entities data = new P.Entities(pRoot);

            var query = (DataServiceQuery<P.Groups>)data.GroupsSet;
            groups = new DataServiceCollection<P.Groups>();
            groups.LoadAsync(query);  
        }
        return groups;
    }

    protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {

        var g = Groups();
        this.DefaultViewModel["Groups"] = g;
    } 
```

我可以毫无问题地将它绑定到我的 xaml 页面，但我想将“g”放到一个字符串中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:37:53.693

可能只是使用 linq，比如

```
g.Items.Aggregate((i, j) => i + delimeter + j) 
```

来自这篇文章：[Concat all strings inside a List<string> using LINQ](https://stackoverflow.com/questions/559415/concat-all-strings-inside-a-liststring-using-linq)

# logging - Umbraco DB 日志错误：找不到 nodeId = 0 的任何页面

> ID：16079002
> 
> 赞同：1
> 
> 时间：2013-04-18T09:17:59.950
> 
> 标签：logging, crash, umbraco, deadlock

我在 Umbraco 中遇到了这个错误，它导致服务器和数据库崩溃。我不确定是什么导致了错误，因为它没有提供太多信息，没有节点 ID，每次在服务器上访问页面时，这些行都会一遍又一遍地写入**UmbracoLog**表中：

```
Couldn't find any page with the nodeId = 0\. 
This is most likely caused by the page isn't published!  Parameter name: nodeId 
```

有谁知道是什么原因造成的？我正在使用 Umbraco v 4.7.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T11:34:09.270

您是否尝试过重新发布您的所有网站？我得到了同样的错误并修复了它。

# jquery - breezejs inlineCount is not working (CORS cross domain http request)

> ID：16079004
> 
> 赞同：0
> 
> 时间：2013-04-18T09:18:02.160
> 
> 标签：jquery, odata, breeze

here's my query:

```
 var query = breeze.EntityQuery
                .from("Mandates").skip(offset).take(pageSize).inlineCount(true);

        return manager.executeQuery(query); 
```

In the response headers, I can see the count is returned by the server:

```
X-InlineCount:63 
```

However, in the succeed handler when I do:

```
 var results = data.results;
 var recordCount = data.inlineCount; 
```

results contains the correct records. However data.inlineCount is null.

How come ?

**EDIT**

getAllResponseHeaders does not return all headers ! I've just noticed most of them are missing, including X-InlineCount.

I believe this is because I'm doing a cross-domain http request (website is in localhost but my webapi (web service) is on a server on the domain). How can this be fixed ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:20:45.013

**我们已经确认了问题。我们计划通过将`inlineCount`标头移出并进入结果有效负载**来修复它，它可能首先应该放在首位。没有确定的日期，但很快。

> 更新：2013 年 4 月 18 日。我们已经在内部实现了这个修复并且它通过了我们的测试。我们将在下一个 NuGet（1.3.0 之后的版本）中进行部署。发生这种情况时，我会再次更新此答案。

[我们通过调整这个 jsFiddle](http://jsfiddle.net/wardbell/r2kcB/)重现了这个问题，任何人都可以这样做。

小提琴向公开 Todos 的 Breeze 服务器发出请求。自然，Breeze 服务器与 jsFiddle 位于不同的域中，因此需要 CORS 来执行查询和保存操作。

我将`getAllTodos`方法更改为以下内容：

```
函数 getAllTodos() {
    var 查询 = 微风.EntityQuery.from("Todos")

    // 为 Cross-Origin inlineCount 标头测试添加
    .orderBy('描述')
    .skip(1).take(3)
    .inlineCount(true);

    log("获取待办事项");
    返回 manager.executeQuery（查询）
    .then(querySucceeded).fail(失败);

    函数查询成功（数据）{
        var count = data.results.length;
        log("检索到" + count);

        // 为 Cross-Origin inlineCount 标头测试添加
        log("内联计数："+ data.inlineCount);
        log("标题：" + data.XHR.getAllResponseHeaders());

        如果（！计数）{
            log("没有待办事项"); 返回;
        }
        viewModel.items(data.results);
    }
}

```

**@jvrdelafuente** - 我很惊讶您推荐的 Web.config 更改确实有效。我原以为对 Web.config 的这种更改只会影响服务器的功能，而不会影响浏览器的功能。

当我检查网络流量时，我可以看到服务器正在发送“X-InlineCount”标头，*无论是否有您建议的更改*。浏览器（至少是 IE10 和 Chrome）似乎隐藏了 jQuery.AJAX 的标头，它负责典型微风应用程序中的 AJAX 通信。

当我将以下内容添加到查询成功回调时，我看到了这种效果：

```
console.log("标题：" + data.XHR.getAllResponseHeaders());

```

日志显示服务器实际返回的标头很少。

也许当你添加

```
<add name="Access-Control-Expose-Headers" value="X-InlineCount" />

```

对于 Web.config，服务器可以告诉浏览器可以将“X-InlineCount”标头公开给 JavaScript 客户端。

我承认我没有调查这种可能性。也许在短期内这是一个可行的解决方法。

但就我们而言，这只是一个创可贴。我们不希望开发人员担心这种事情；CORS 确实令人头疼。因此，我们将`inlineCount`在有效负载中而不是在标头中进行通信……并一起消除这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:43:22.570

我有同样的问题。您必须配置您的服务器以公开 X-InlineCount 标头。如果您使用的是项目 ASP .NET Web API，则必须在 web.config 中添加下一行：

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept" />
        <add name="Access-Control-Allow-Methods" value="GET,POST,OPTIONS" />
        <add name="Access-Control-Expose-Headers" value="X-InlineCount" />
      </customHeaders>
    </httpProtocol> 
```

另外，我遇​​到了firefox的问题，但是在firefox的最新版本中，问题得到了解决。

（你不需要使用所有的行，这只是一个例子）；）

- - -编辑 - - -

我忘记了，因为那是很久以前的事了。当您进行 CORS 调用时，浏览器首先发送一个 Option 调用以检查是否可以进行 CORS 调用以及允许执行哪些操作。所以你必须在你的 WEB API 项目中实现一个消息处理程序来管理这个 OPTION 调用。接下来是实现：

```
public class OptionsHttpMessageHandler : DelegatingHandler
    {
        protected override Task<HttpResponseMessage> SendAsync(
            HttpRequestMessage request, CancellationToken cancellationToken)
        {
            if (request.Method == HttpMethod.Options)
            {
                var apiExplorer = GlobalConfiguration.Configuration.Services.GetApiExplorer();

                var controllerRequested = request.GetRouteData().Values["controller"] as string;
                var supportedMethods =  apiExplorer.ApiDescriptions
                    .Where(d =>
                    {

                        var controller = d.ActionDescriptor.ControllerDescriptor.ControllerName;
                        return string.Equals(
                            controller, controllerRequested, StringComparison.OrdinalIgnoreCase);
                    })
                    .Select(d => d.HttpMethod.Method)
                    .Distinct();

                if (!supportedMethods.Any())
                    return Task.Factory.StartNew(
                        () => request.CreateResponse(HttpStatusCode.NotFound));

                return Task.Factory.StartNew(() =>
                {
                    var resp = new HttpResponseMessage(HttpStatusCode.OK);
                    resp.Headers.Add("Access-Control-Allow-Origin", "*");
                    resp.Headers.Add("Access-Control-Allow-Headers", "X-Requested-With, Content-Type, Accept, Security,Token-Access");
                    resp.Headers.Add("Access-Control-Allow-Methods", "GET,POST,OPTIONS");
                    resp.Headers.Add("Access-Control-Expose-Headers", "X-InlineCount");

                    return resp;
                });
            }

            return base.SendAsync(request, cancellationToken);
        }
    } 
```

如果你把它放在你的 web.config 中，你可以省略下一节。

```
resp.Headers.Add("Access-Control-Allow-Origin", "*");
resp.Headers.Add("Access-Control-Allow-Headers", "X-Requested-With, Content-Type, Accept, Security,Token-Access");
resp.Headers.Add("Access-Control-Allow-Methods", "GET,POST,OPTIONS");
resp.Headers.Add("Access-Control-Expose-Headers", "X-InlineCount"); 
```

我希望这有助于解决您的问题。

PD：对不起，我的英语不是我的母语。

# javascript - 淡入 jquery div 显示

> ID：16079005
> 
> 赞同：8
> 
> 时间：2013-04-18T09:18:03.490
> 
> 标签：javascript, jquery, delay, fadein, fadeout

我试图让下面的脚本淡入淡出，中间有延迟。它正确显示了 div 并按其应有的方式淡出，但它不会淡入？

```
<?php
if(isset($_GET['updated'])) { ?>
<div id='updated'><p>The product was successfully added to your Shopping Cart</p></div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$('#updated').fadeIn(800).delay(3000).fadeOut(800)
</script>
<?php } ?> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:21:39.250

这是因为它已经显示

```
<div id='updated' style="display:none"> 
```

修复它

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T09:19:17.343

```
$('#updated').hide().fadeIn(800).delay(3000).fadeOut(800); 
```

您也可以在 css 中设置它：

```
#updated{
  display: none;
} 
```

问题是 - 它已经可见（默认情况下）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T09:19:49.633

你必须**隐藏** `div`之前`fadeIn()`，你可以用`hide()`方法隐藏`div`。

```
<?php
if(isset($_GET['updated'])) { ?>
<div id='updated'><p>The product was successfully added to your Shopping Cart</p></div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$('#updated').hide().fadeIn(800).delay(3000).fadeOut(800)
</script>
<?php } ?> 
```

# c# - DocumentReady 事件中的文档没有准备好？

> ID：16079009
> 
> 赞同：5
> 
> 时间：2013-04-18T09:18:06.047
> 
> 标签：c#, .net, awesomium

我正在使用[Awesomium 1.7.0.5](http://awesomium.com)来加载页面、填充一些文本框并单击按钮。我正在尝试使用此线程中的示例填充文本框：[http ://answers.awesomium.com/questions/857/webcontrol-type-in​​-webbrowser.html](http://answers.awesomium.com/questions/857/webcontrol-type-in-webbrowser.html)

这是我的代码（我正在使用 WPF 控件）：

```
 private void WbAwsOnDocumentReady(object sender, UrlEventArgs urlEventArgs)
        {
            if (wbAws == null || !wbAws.IsLive)
              return;

            //Thread.Sleep(555);

            dynamic document = (JSObject)wbAws.ExecuteJavascriptWithResult("document");

            if (document == null)
              return;

            using (document)
            {
                dynamic textbox = document.getElementById("email");

                if (textbox == null)
                  return;

                using (textbox)
                {
                    textbox.value = "gaaffa"; 
                }

            }
        } 
```

它有效，但仅适用于 Thread.Sleep 0.1-0.5 秒。否则文档为空（非空）和/或文本框为空。我该怎么办？为什么它在 DocumentReadyEvent 中没有准备好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:43:47.120

这是我解决它的方法：

```
 WbAws.LoadingFrameCompleted += OnLoadingFrameCompleted;
     WbAws.Source = new Uri("http://google.com");

private void OnLoadingFrameCompleted(...)
{ 
   if (webView == null || !webView.IsLive || 
         webView.ParentView != null || !e.IsMainFrame)
     return;

    LoadingFrameCompleted -= OnLoadingFrameCompleted;

    // do something
} 
```

LoadingFrameCompleted 而不是 DocumentReady，因为它不仅在我需要它时触发，而且在应用程序启动时触发，我在导航之前订阅它并在它之后取消订阅。还要检查它是否为 IsMainFrame。

**编辑**：但使用此解决方案有时会引发文档未准备好的异常。所以我也在等待它使用 Thread.Sleep。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-05T11:04:45.293

很老的问题。但对于像我这样面临这个问题的人来说——使用`LoadingFrameCompleted`事件`WebControl.IsNavigating == false`和`e.IsMainFrame == true`条件。如果这些条件在此事件中为真，则页面已完成加载，您已准备好获取 HTML 内容。

# django - Angular: Add to each request a random number in order to disable caching for IE

> ID：16079010
> 
> 赞同：2
> 
> 时间：2013-04-18T09:18:13.900
> 
> 标签：django, caching, angularjs

IE is heavily [caching xhr requests](https://github.com/angular/angular.js/issues/1418). To overcome this problem users suggested to add a random number to the url. For example [here](https://github.com/npina/nestor-shop/issues/5#issuecomment-15384384)

Whereas this will work, I'm looking for a way to add a random number globally / disable IE caching globally, and caching has also be disabled for resource xhr get calls. I'm guessing that I could achieve this goal by using one of the following approaches. But I'm not sure what I exactly have to do..

a) Using `$httpProvider.defaults.transformRequest`

b) by using `request/response promise chaining` which have been added in v [1.1.4](https://github.com/angular/angular.js/commit/4ae4681)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:27:13.330

我通过使用 Django 和自定义中间件在服务器的响应中添加无缓存标头解决了缓存问题。

```
class NeverCacheXhrMiddleware(object):
    """
    sets no-cache headers for all xhr requests
    xhr requests must send the HTTP_X_REQUESTED_WITH header to 
    be identified correctly as a xhr request using .is_ajax()
    see: http://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers
    """
    def process_response(self, request, response):
        if request.is_ajax():
            response['Cache-Control'] = 'no-cache, no-store, must-revalidate'
            response['Pragma'] = 'no-cache'
            response['Expires'] = '0'
        return response 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:35:20.863

这是 IE 的一个老问题。不知道如何使用 Angular 的 $httpProvider （或者我想要的），但这里有一个函数可以向任何 url 添加随机值，无论它是否已经使用查询字符串：

```
function noCacheUrl(url) {
    var urlParser = document.createElement('a');
    urlParser.href = url;
    var q = "nc" + Math.random() + "=1";
    q = urlParser.search ? urlParser.search + "&" + q : "?" + q;
    return urlParser.protocol + "//" + urlParser.host + urlParser.pathname + urlParser.hash + q;
} 
```

请注意，添加的查询参数的***名称***是随机的，而不是值，因此不太可能与任何现有的名称/值对发生冲突。示例：&nc0.8578296909108758=1

[http://jsfiddle.net/LgjLe/](http://jsfiddle.net/LgjLe/)

# c# - Generate a Word Document from StringBuilder

> ID：16079013
> 
> 赞同：0
> 
> 时间：2013-04-18T09:18:21.930
> 
> 标签：c#, ms-word

I have to make some Word Integration as part of an exam project. My problem is that I am rather new to Microsoft Word integration in C#. I have the Assemblies I need, and I got everything set-up ready to write code pretty much. The document will be generated from scratch.

But I am just starring at the blinking cursor, not really knowing how to start.

I have to take a StringBuilder (which should hold stuff like escape characters for new lines, perhaps *italic* **bold**, etc kind of formatting as well.) The StringBuilder will be given from another part of the application written by my friend.

Would you suggest that this is delivered in another form than a StringBuilder Object?

And where should I start with all this? It's a bit overwhelming.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:50:00.807

尝试这个

您需要添加 Microsoft.Office.Interop.Word 参考

```
Word._Application oWord;
Word._Document oDoc;
object oMissing = Type.Missing;
oWord = new Word.Application();
oWord.Visible = true;

//Add Blank sheet to Word App
oDoc = oWord.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing); 

oWord.Selection.TypeText("Write your text here");
//FOrmatting your text
oWord.Selection.Font.Size = 8;
oWord.Selection.Font.Name = "Zurich BT";
oWord.Selection.Font.Italic = 1
oWord.Selection.Font.Bold = 1

oDoc.Content.Application.ActiveWindow.ActivePane.View.SeekView = //Havent tested the  
                                                             //header and footer part
Word.WdSeekView.wdSeekCurrentPageFooter;
oDoc.Content.Application.Selection.TypeText(“Martens”); 
```

我想这可能是你正在寻找的

# android - 如何/在哪里从另一个片段调用 notifyDataSetChanged

> ID：16079015
> 
> 赞同：4
> 
> 时间：2013-04-18T09:18:28.357
> 
> 标签：android, android-contentprovider

我有一个带有列表视图的片段来显示我的列表内容。我通过另一个片段 - 对话框片段（使用内容提供者的删除和更新方法）更新和删除此列表中的项目，除了列表视图的“实时”刷新之外，一切正常。

我知道我应该在某个地方的适配器上调用 notifyDataSetChanged 但不知道在哪里。

由于用户通过不同的片段删除/更新，所以我猜我应该通过这个片段以某种方式调用适配器上的 notifyDataSetChanged。我也调查了一下，我知道我应该在 UI 线程上运行它。

我尝试了几件事都没有成功。请看一下我的代码。 **这是包含 ListView 的片段：**

```
 public class ShiftsFragment extends android.app.Fragment implements
        LoaderCallbacks<Cursor> {

    private Typeface tf, roboto;
    private ContentResolver cr;
    public shiftsAdapter sa = null;
    public static ShiftsDialog sd = null;

    public static ShiftsFragment newInstance(String title) {

        ShiftsFragment pageFragment = new ShiftsFragment();
        return pageFragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        cr = getActivity().getBaseContext().getContentResolver();
        getLoaderManager().initLoader(0, null, this);

    }

    @Override
    public void onResume() {
        super.onResume();
        getLoaderManager().restartLoader(0, null, this);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.shifts, container, false);

        roboto = Typeface.createFromAsset(getActivity().getAssets(),
                "fonts/JuraLight.ttf");
        tf = Typeface.createFromAsset(getActivity().getAssets(),
                "fonts/Advert.ttf");
        ListView ls = (ListView) view.findViewById(android.R.id.list);

        sa = new shiftsAdapter(getActivity().getBaseContext(), null, 0);
        ls.setAdapter(sa);
        ls.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int lineNum, long arg3) {
                sd = new ShiftsDialog();
                sd.newInstnace(arg3);
                sd.show(getFragmentManager(), "shifts_dialog");
                return false;
            }
        });

        return view;

    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        CursorLoader loader = new CursorLoader(getActivity()
                .getApplicationContext(), MyProvider.SHIFTS_URI, null, null,
                null, null);

        return loader;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor cursor) {

        sa.swapCursor(cursor);
        Log.i("Shifts Numbers", "" + cursor.getCount());

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {

    }

} 
```

**这是我根据用户单击的按钮更新/删除的对话框片段：**

```
public class ShiftsDialog extends DialogFragment {
    private Typeface roboto;
    private static long position = 0;
    private ContentResolver cr = null;

    public static ShiftsDialog newInstnace(long i) {
        position = i;
        ShiftsDialog dial = new ShiftsDialog();

        return dial;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        cr = getActivity().getBaseContext().getContentResolver();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0));

        roboto = Typeface.createFromAsset(getActivity().getAssets(),
                "fonts/JuraLight.ttf");

        View view = inflater.inflate(R.layout.dialog, container, false);

        TextView tv = (TextView) view.findViewById(R.id.options);
        tv.setTypeface(roboto);

        Button delete = (Button) view.findViewById(R.id.deleteBtn);
        delete.setTypeface(roboto);

        // OnClick listener for delete function
        delete.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // Complete it in the official way
                String where = String.valueOf(position);

                Uri rowURI = ContentUris.withAppendedId(MyProvider.SHIFTS_URI, position);
                cr.delete(rowURI, null, null);

            }
        });

        Button edit = (Button) view.findViewById(R.id.editBtn);
        edit.setTypeface(roboto);

        // OnClick listener for editing a shift
        edit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                EditDate_Dialog ed = new EditDate_Dialog();
                ed.newInstnace(position);
                ed.show(getFragmentManager(), "edit_dialog");
                dismiss();

            }
        });

        return view;

    }

} 
```

**我的 ContentProiver 的删除和更新方法（为简洁起见省略其余代码）：**

```
 @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
        SQLiteDatabase db = helper.getWritableDatabase();

        Log.d("URI", uri.toString());

        switch (uriMatcher.match(uri)) {
        case SINGLE_ROW:
            String rowID = uri.getPathSegments().get(1);
            selection = KEY_ID
                    + "="
                    + rowID
                    + (!TextUtils.isEmpty(selection) ? " AND (" + selection
                            + ')' : "");
        default:
            break;
        }

        if (selection == null)
            selection = "1";

        // Execute the deletion.
        int deleteCount = db.delete(helper.DATABASE_TABLE, selection,
                selectionArgs);
        Log.d("DeleteCount", "" + deleteCount);

        Log.i("Selection", "" + selection);

        getContext().getContentResolver().notifyChange(uri, null);

        return deleteCount;
    }

@Override
    public int update(Uri uri, ContentValues values, String selection,
            String[] selectionArgs) {
        SQLiteDatabase db = helper.getWritableDatabase();

        switch (uriMatcher.match(uri)) {
        case SINGLE_ROW:
            String rowID = uri.getPathSegments().get(1);
            selection = KEY_ID
                    + "="
                    + rowID
                    + (!TextUtils.isEmpty(selection) ? " AND (" + selection
                            + ')' : "");

        default:
            break;
        }

        int updateCount = db.update(helper.DATABASE_TABLE, values, selection,
                selectionArgs);
        Log.d("Updated", "" + updateCount);
        getContext().getContentResolver().notifyChange(uri, null);

        return updateCount;
    } 
```

# php - Symfony 2 形式：实体数组

> ID：16079016
> 
> 赞同：1
> 
> 时间：2013-04-18T09:18:29.027
> 
> 标签：php, forms, symfony, doctrine-orm, mapping

我正在尝试为多个实体构建一个表单。我先介绍一些示例类：

为清楚起见，我没有显示所有注释或对其进行缩写，也没有显示使用或命名空间命令。

```
/**
 * The Entity class
 * @ORM ... mapping to ORM
 */
class EntityA {
    /**
     * @var ModelArray
     * @ORM\Column(name="...", type="object") 
     */
    private $modelArray;

    // Getters and Setters, default constructor
}

/**
 * An array Wrapper, keeping the array always unique, sorting it by criteria etc.
 * @ORM(...) 
 */
class ModelArray {
    /**
     * @var array<A>
     */
    private $array; 

    // Getter, Adder, Remover, Constructor, other private logic
} 
```

请特别注意 ModelArray 类仅存储给定类型 A 的对象：

```
/**
 * One more Model
 */
class A {
    /**
     * @var boolean
     */
    private $bool;
    /**
     * @var string
     */
    private $string;

    // Getters, Setters
} 
```

我选择了这种数据结构，因为我永远不需要 A 的对象存在于 EntityA 类之外，并且为了将逻辑排除在我的 Entity 之外，我选择在两者之间实现 ModelArray 类。EntityA 类被持久化到数据库中，子对象也随之保存在数据库中。

现在我想创建一个表单，我可以在其中一次编辑 EntityA 数组的所有 A 实例的 $->bool 属性。所以我提供的是`array<EntityA>`.

然后我会进行如下操作：

```
//In a controller action
$data = array(
    'as' => $arrayOfEntityA,    
);
$form = $this->createForm(new GridType(), $data);
// Create view, render 
```

我的表单类型如下所示：

```
class GridType extends AbstractType {

    public function getName() {
        return 'a_grid';
    }

    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('as', 'collection', array(
            'type' => new GridAType(),
        ));
    }
} 
```

并使用此表单类型

```
class GridAType extends AbstractType {

    public function getName() {
        return 'a_grid_a';
    }

    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('modelArray', new ModelArrayType());
    }

    public function getDefaultOptions(array $options) {
        return array(
            'data_class' => 'EntityA',
        );
    }
} 
```

带模型数组类型

```
class ModelArrayType extends AbstractType {

    public function getName() {
        return 'model_array';
    }

    public function buildForm(FormBuilderInterface $builder, array $options) {
        // ???
    }

    public function getDefaultOptions(array $options) {
        return array(
            'data_class' => 'ModelArray',
        );
    }
} 
```

请注意`// ???`：我只想编辑存储在 ModelArray 中的 As 的布尔属性，并且我认为要继续的适当表单类型将是“集合”。但是我真的不知道如何在`$modelArray->array`这里使用数组（）作为集合。我该怎么做？

然后，我不完全确定为了实现一个可用的表单而实现这么多表单类型是否是一种好习惯。有不同的更好的方法吗？

# visual-studio - Visual Studio 2012 加载错误

> ID：16079018
> 
> 赞同：3
> 
> 时间：2013-04-18T09:18:37.263
> 
> 标签：visual-studio, visual-studio-2012, load

加载 Visual Studio 2012 时出现错误：“遇到异常。这可能是由扩展引起的。”

这是来自 xml 文件的消息：

```
System.ComponentModel.Composition.CompositionException: The composition produced a single composition error, with 2 root causes. 
The root causes are provided below. 
Review the CompositionException.Errors property for more detailed information.
) The export Microsoft.VisualStudio.Shell.SVsServiceProvider is not assignable to type System.Boolean.

Resulting in: Cannot set import &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IRegistryManager.IsKnockoutEnabled (ContractName=&quot;Microsoft.VisualStudio.Shell.SVsServiceProvider&quot;)&apos; on part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.RegistryManager&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IRegistryManager.IsKnockoutEnabled (ContractName=&quot;Microsoft.VisualStudio.Shell.SVsServiceProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.RegistryManager

Resulting in: Cannot get export &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.RegistryManager (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IRegistryManager&quot;)&apos; from part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.RegistryManager&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.RegistryManager (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IRegistryManager&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.RegistryManager

Resulting in: Cannot set import &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IBufferFeatureManagerProvider.teBufferFeatureManager (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IRegistryManager&quot;)&apos; on part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.BufferFeatureManagerProvider&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IBufferFeatureManagerProvider.teBufferFeatureManager (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IRegistryManager&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.BufferFeatureManagerProvider

Resulting in: Cannot get export &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.BufferFeatureManagerProvider (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IBufferFeatureManagerProvider&quot;)&apos; from part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.BufferFeatureManagerProvider&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.BufferFeatureManagerProvider (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IBufferFeatureManagerProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.BufferFeatureManagerProvider

Resulting in: Cannot set import &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider.BufferFeatureManagerProvider (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IBufferFeatureManagerProvider&quot;)&apos; on part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider.BufferFeatureManagerProvider (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.IBufferFeatureManagerProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider

Resulting in: Cannot get export &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider (ContractName=&quot;Microsoft.VisualStudio.Text.Tagging.IViewTaggerProvider&quot;)&apos; from part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider (ContractName=&quot;Microsoft.VisualStudio.Text.Tagging.IViewTaggerProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider

2) The export &apos;Microsoft.VisualStudio.Web.Extensions.HTML.TagNameProvider (ContractName=&quot;Microsoft.VisualStudio.Web.Extensions.HTML.ITagNameProvider&quot;)&apos; is not assignable to type &apos;System.Collections.Generic.ISet`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]&apos;.

Resulting in: Cannot set import &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.ISPASupportedTagProvider.SupportedTagNames (ContractName=&quot;Microsoft.VisualStudio.Web.Extensions.HTML.ITagNameProvider&quot;)&apos; on part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.SPASupportedTagSet&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.ISPASupportedTagProvider.SupportedTagNames (ContractName=&quot;Microsoft.VisualStudio.Web.Extensions.HTML.ITagNameProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.SPASupportedTagSet

Resulting in: Cannot get export &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.SPASupportedTagSet (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.ISPASupportedTagProvider&quot;)&apos; from part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.SPASupportedTagSet&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.SPASupportedTagSet (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.ISPASupportedTagProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.SPASupportedTagSet

Resulting in: Cannot set import &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider.TagNameProvider (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.ISPASupportedTagProvider&quot;)&apos; on part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider.TagNameProvider (ContractName=&quot;Microsoft.VisualStudio.JavaScript.Web.Extensions.Shared.ISPASupportedTagProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider

Resulting in: Cannot get export &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider (ContractName=&quot;Microsoft.VisualStudio.Text.Tagging.IViewTaggerProvider&quot;)&apos; from part &apos;Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider&apos;.
Element: Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider (ContractName=&quot;Microsoft.VisualStudio.Text.Tagging.IViewTaggerProvider&quot;) --&gt;  Microsoft.VisualStudio.JavaScript.Web.Extensions.Classification.SPARegionTaggerProvider

   at System.ComponentModel.Composition.Hosting.CompositionServices.GetExportedValueFromComposedPart(ImportEngine engine, ComposablePart part, ExportDefinition definition)
   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.GetExportedValue(CatalogPart part, ExportDefinition export, Boolean isSharedPart)
   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.CatalogExport.GetExportedValueCore()
   at System.ComponentModel.Composition.Primitives.Export.get_Value()
   at System.ComponentModel.Composition.ExportServices.GetCastedExportedValue[T](Export export)
   at System.ComponentModel.Composition.ExportServices.&lt;&gt;c__DisplayClass4`2.&lt;CreateStronglyTypedLazyOfTM&gt;b__1()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at System.Lazy`1.get_Value()
   at Microsoft.VisualStudio.Text.Tagging.Implementation.TagAggregator`1.GatherTaggers(ITextBuffer textBuffer)</description> 
```

有人知道我可以修吗？

问候，

本杰明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:23:58.503

酷，这对我有用，更新 web.config 文件中的程序集标签。在项目加载期间，IDE 无法加载这些程序集。所以这是我的下面...

```
 <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add assembly="System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add assembly="System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Web.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add assembly="System.Data.Services.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Data.Services.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="System.Web.DynamicData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/> 
```

# xml - T-SQL XML - how to divide CDATA in xml node

> ID：16079025
> 
> 赞同：2
> 
> 时间：2013-04-18T09:18:53.590
> 
> 标签：xml, tsql, sql-server-2012, cdata

I am using MS SQL Server 2012 and have the following XML structure:

```
<value name="parameter">
    <![CDATA[__na__]]>
    <![CDATA[1]]>
    <![CDATA[2]]>
    <![CDATA[3]]>
    <![CDATA[12]]>
</value> 
```

and it is saved in the database as string in NVARCHAR(MAX) data type field.

When I cast this value as follows:

```
CAST(ColumnValue AS XML) 
```

I get the following XML structure:

```
<value name="parameter">__na__12312</value> 
```

Is there a way to divide the CDATA with commas for exmaple and get the following structure:

```
<value name="parameter">__na__,1,2,3,12</value> 
```

In my real case the string length can vary and I am using only part of the whole XML, so replacing each ']]>' with ']]>,' does not sound as good solution. Is there an other way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T14:43:13.327

如果你不介意第一个字符带有逗号，你可以试试这个：

```
/*Loading test data*/
declare @xml varchar(8000)
set @xml = '
<value name="parameter">
    <![CDATA[__na__]]>
    <![CDATA[1]]>
    <![CDATA[2]]>
    <![CDATA[3]]>
    <![CDATA[12]]>
</value>'

/*the replace*/
set @xml= REPLACE(@xml,'<![CDATA[','<![CDATA[,' )
select CAST(@xml AS XML) 
```

这将导致：

```
<value name="parameter">,__na__    ,1    ,2    ,3    ,12    </value> 
```

此替换可确保您仅更改 CDATA 而不是其他 xml 参数或值，并且当您恢复值“参数”时，您只需忽略第一个字符

# infopath - 尝试将 Infopath 2013 表单发布到 Sharepoint 2013 文档库时出错

> ID：16079026
> 
> 赞同：0
> 
> 时间：2013-04-18T09:18:54.760
> 
> 标签：infopath, sharepoint-2013, infopath2010

> 我是 Infopath & Sharepoint 的新手。我正在尝试从 Infopath 2013 创建一个表单并将其作为文档库发布到 Sharepoint。我有大约 60 个字段需要计算（添加）到另一个字段中。当尝试使用 Design Checker 时，它会抛出一个错误，如下面的屏幕截图所示。但如果我在“插入公式”文本区域中仅键入 45 个字段，它就会接受。插入公式中输入的字段数量是否有限制？当我在 Infopath 中使用 PREVIEW 时，它工作正常。仅当我尝试将其发布到 Sharepoint 时才会弹出此错误。关于如何解决这个问题的任何想法？- 提前致谢

![错误截图](https://i.stack.imgur.com/7HwHZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:48:12.227

InfoPath 预览使用 IP Filler 呈现。浏览器体验一直不一样，填充器预览并不是对浏览器体验的可靠检查。您可能已经达到了浏览器表单功能的极限。不过，我没有数字或限制。

查看错误消息，您似乎在一个字段中积累了大量的计算。我的直觉是，这是一个非常糟糕的信息架构。表格的目的是什么？你想达到什么目的？为什么有人会在一个表单中有 60 个字段？

看起来好像您正在对大量单元格求和。InfoPath 不是电子表格。

使用重复表来捕获相似的数据。然后，您可以使用标准 IP 函数汇总表条目。

这看起来像是餐厅菜单上所有项目的总和。这是重复表的完美案例。不要在一个包含 60 个字段的列表中使用菜单上的所有 60 个项目。那是矫枉过正而且不方便用户使用。创建一个重复表结构，用户在其中选择 60 个项目之一并输入交易数据。重复表的每一行都可以有 60 个列表中的另一个项目。总和将从条目中计算出来。

如果这不可行，请使用辅助字段按项目类别计算小计，并从所有类别总计创建总计。

# c# - 在 Linq 中使用 TimeSpan.Hours 进行分组

> ID：16079027
> 
> 赞同：0
> 
> 时间：2013-04-18T09:18:55.390
> 
> 标签：c#, winforms, linq, datatable

我有一个包含以下列的数据表

```
CallTime   CallType

15:45:00    Voice
15:30:54    Voice
00:12:14    SMS
01:13:47    Voice
05:48:23    SMS
12:00:47    Voice 
```

现在我想要像这样使用 Linq 结果

```
Hrs   Count
00    1
01    1
02    0
03    0
04    0
05    1
06    0
|
|
|
12    1
13    0
|
15    2
16    0
|
|
23    0 
```

我正在使用以下查询，它为我提供了 count > 0 的值，但我想得到那些也有 count = 0 的值

```
var groupQueryTimeTotal = (from r in Foundrows.AsEnumerable()
                                   let time = TimeSpan.Parse(r.Field<string>("Call Time"))
                                   group r by time.Hours
                                       into g
                                       select new
                                       {
                                           CallTime = g.Key,
                                           CallCount = g.Count(),
                                       }).OrderBy(s => s.CallTime); 
```

这个查询给了我这样的结果

```
Hrs   Count
00    1
01    1
05    1
12    1
15    2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:22:59.247

执行第一个集合和第二个集合的[分组连接](http://msdn.microsoft.com/en-us/library/vstudio/bb397905.aspx)。`Enumerable.Range(0, 24)``Foundrows.AsEnumerable()`

*例子：*

```
var input = new List<TimeSpan>
{
    new TimeSpan(15, 45, 00),
    new TimeSpan(15, 30, 54),
    new TimeSpan(00, 12, 14),
    new TimeSpan(01, 13, 47),
    new TimeSpan(05, 48, 23),
    new TimeSpan(12, 00, 47),
};

var query = from hour in Enumerable.Range(0, 24)
            join item in input on hour equals item.Hours into g
            select new
            {
                CallTime = hour,
                CallCount = g.Count(),
            };

foreach (var x in query)
{
    Console.WriteLine("{0:00} {1}", x.CallTime, x.CallCount);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:38:58.080

像这样的东西应该可以工作：

```
var groupQueryTimeTotal = 
  Enumerable.Range(0, 24).Select(h => new { CallTime = h,
  CallCount = Foundrows.AsEnumerable()
  .Count(r => TimeSpan.Parse(r.Field<string>("Call Time")).Hours == h), }); 
```

当然，这确实是低效的，多次解析相同的字符串。这是一种不同的方法：

```
var groupQueryTimeTotal = new int[24];
foreach (var r in Foundrows)
{
  int hour = TimeSpan.Parse(r.Field<string>("Call Time")).Hours;
  ++groupQueryTimeTotal[hour];
} 
```

# android - 如何在自定义操作栏上获取 onClickListener() 事件

> ID：16079028
> 
> 赞同：15
> 
> 时间：2013-04-18T09:18:55.310
> 
> 标签：android, android-layout, android-actionbar, onclicklistener, android-inflate

我正在开发一个应用程序，我必须`onClick()`在单击操作栏自定义视图时获取事件。到目前为止，我能够实现以下布局。

![自定义操作栏](https://i.stack.imgur.com/hd8g5.png)

这是我实现这一目标的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    getActionBar().setDisplayHomeAsUpEnabled(true);
    getActionBar().setHomeButtonEnabled(true);

    getActionBar().setCustomView(R.layout.custom_image_button);
    getActionBar().setDisplayOptions(
            ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_CUSTOM);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case android.R.id.home:
        Toast.makeText(getApplicationContext(), "Clicked on ActionBar",
                Toast.LENGTH_SHORT).show();

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

这是我的 custom_image_button 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/custom_layout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<FrameLayout
    android:id="@+id/frame_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true" >

    <TextView
        android:id="@+id/points"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginRight="10dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/points_yellow"
        android:gravity="center"
        android:paddingLeft="20dp"
        android:textColor="#887141"
        android:textIsSelectable="false"
        android:textSize="22sp"
        android:textStyle="bold" >
    </TextView>

    <ImageView
        android:id="@+id/badge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top|right"
        android:layout_marginRight="5dp"
        android:layout_marginTop="0dp"
        android:src="@drawable/badge_notification" >
    </ImageView>
</FrameLayout>

</RelativeLayout> 
```

我试图在自定义布局上有一个点击监听器。为此，我尝试了以下代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    getActionBar().setDisplayHomeAsUpEnabled(true);
    getActionBar().setHomeButtonEnabled(true);

    getActionBar().setCustomView(R.layout.custom_image_button);
    getActionBar().setDisplayOptions(
            ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_CUSTOM);

    final LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View v = inflater.inflate(R.layout.custom_image_button, null);

    frameLayout = (FrameLayout) v.findViewById(R.id.frame_layout);

    frameLayout.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Toast.makeText(getApplicationContext(), "Clicked on 1",
                    Toast.LENGTH_SHORT).show();
            return false;
        }
    });
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case android.R.id.home:
        Toast.makeText(getApplicationContext(), "Clicked on ActionBar",
                Toast.LENGTH_SHORT).show();

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

}

但是，我无法`onClick()`在自定义图像上获得事件。我在这里做错了什么，请指导。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-18T09:37:35.300

## 在 Inflater 之后，它就像布局文件中的视图

所以，你必须添加`android:onClick="clickEvent"`自`ActionBar`定义布局文件

![在此处输入图像描述](https://i.stack.imgur.com/996qa.png)

## 这是演示：

我的主要活动：

```
package com.example.testdemo;

import android.annotation.SuppressLint;
import android.app.ActionBar;
import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.Toast;

public class MainActivity extends Activity {

    private View viewList;
    private Dialog dialogMarketList;
    String a[] = { "a", "aa" };
    private View header;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setDisplayUseLogoEnabled(false);
        actionBar.setDisplayHomeAsUpEnabled(false);
        actionBar.setDisplayShowCustomEnabled(true);
        View cView = getLayoutInflater().inflate(R.layout.header, null);
        actionBar.setCustomView(cView);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void clickEvent(View v) {
        if (v.getId() == R.id.button1) {
            Toast.makeText(MainActivity.this, "you click on button1",
                    Toast.LENGTH_SHORT).show();
        }

        if (v.getId() == R.id.button2) {
            Toast.makeText(MainActivity.this, "you click on button2",
                    Toast.LENGTH_SHORT).show();
        }

        if (v.getId() == R.id.textView1) {
            Toast.makeText(MainActivity.this, "you click on textView1",
                    Toast.LENGTH_SHORT).show();
        }
    }
} 
```

我的布局 header.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal"
    android:weightSum="3" >

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickEvent"
        android:text="Button 1" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickEvent"
        android:gravity="center"
        android:textColor="#FFFFFF"
        android:text="My action bar"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickEvent"
        android:text="Button 2" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-20T06:49:15.437

```
 View cView = getLayoutInflater().inflate(R.layout.header, null);
    cView.findViewById(R.id.btn_id).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
                         // Do stuff here.
        }
    });
    actionBar.setCustomView(cView); 
```

# c# - 以编程方式安装 IIS7 的更好方法

> ID：16079030
> 
> 赞同：15
> 
> 时间：2013-04-18T09:19:09.667
> 
> 标签：c#, .net, iis-7

我有一个 webapp 安装程序，它安装了它的所有先决条件，其中也包括 IIS 7。

由于 IIS 不是 Visual Studio 安装项目的先决条件，因此我想出了以下代码来从代码安装 IIS（针对 Windows Vista 和 7）。

```
private string ConfigureIIS7()
{
    string output = string.Empty;
    if (Environment.OSVersion.ToString().Contains("Microsoft Windows NT 5"))  // Its WindowsXP [with or without SP2]
    {
        MessageBox.Show("IIS 6.0 is not installed on this machine. Please install the same and proceed with the installation or contact your administrator","Installer",MessageBoxButtons .OK ,MessageBoxIcon .Warning);
        throw new System.Exception("IIS 6.0 is not installed on this machine.");
    }
    else
    {
        string CmdToExecute;
        CmdToExecute = "cmd /c start /w pkgmgr /l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI";
        Process prRunIIS = new Process();
        prRunIIS.StartInfo = new ProcessStartInfo("cmd.exe", CmdToExecute);
        prRunIIS.StartInfo.UseShellExecute = false;
        prRunIIS.StartInfo.RedirectStandardOutput = true;
        prRunIIS.StartInfo.CreateNoWindow = true;
        prRunIIS.Start();
        prRunIIS.WaitForExit();
        output = prRunIIS.StandardOutput.ReadToEnd();
    }
    return output;
} 
```

到目前为止，此代码运行良好。我唯一担心的是安装部分需要相当长的时间。

现在，我有机会重写一些代码并更改安装程序 UI。我刚刚来到这部分，想知道这是否是从代码安装 IIS 的唯一解决方案，或者是否有更好的方法我还没有找到？

我只是想知道安装 IIS 的其他方法是什么。还感谢针对 Windows 8 的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-30T21:52:41.593

未来的最佳选择是使用[DISM](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371719(v=vs.85).aspx)（部署映像服务和管理）。这适用于`Windows 7`/`Windows server 2008 R2`及以上。所有其他选项均已弃用。

这是一个包含所需最少功能的代码示例（如果您需要不同的功能，您可以轻松添加更多功能）：

```
string SetupIIS()
{
    var featureNames = new [] 
    {
        "IIS-ApplicationDevelopment",
        "IIS-CommonHttpFeatures",
        "IIS-DefaultDocument",
        "IIS-ISAPIExtensions",
        "IIS-ISAPIFilter",
        "IIS-ManagementConsole",
        "IIS-NetFxExtensibility",
        "IIS-RequestFiltering",
        "IIS-Security",
        "IIS-StaticContent",
        "IIS-WebServer",
        "IIS-WebServerRole",
    };

    return ProcessEx.Run(
        "dism",
        string.Format(
            "/NoRestart /Online /Enable-Feature {0}",
            string.Join(
                " ", 
                featureNames.Select(name => string.Format("/FeatureName:{0}",name)))));
} 
```

* * *

```
static string Run(string fileName, string arguments)
{
    using (var process = Process.Start(new ProcessStartInfo
    {
        FileName = fileName,
        Arguments = arguments,
        CreateNoWindow = true,
        WindowStyle = ProcessWindowStyle.Hidden,
        RedirectStandardOutput = true,
        UseShellExecute = false,
    }))
    {
        process.WaitForExit();
        return process.StandardOutput.ReadToEnd();
    }
} 
```

这将导致以下命令：

```
dism.exe /NoRestart /Online /Enable-Feature /FeatureName:IIS-ApplicationDevelopment /FeatureName:IIS-CommonHttpFeatures /FeatureName:IIS-DefaultDocument /FeatureName:IIS-ISAPIExtensions /FeatureName:IIS-ISAPIFilter /FeatureName:IIS-ManagementConsole /FeatureName:IIS-NetFxExtensibility /FeatureName:IIS-RequestFiltering /FeatureName:IIS-Security /FeatureName:IIS-StaticContent /FeatureName:IIS-WebServer /FeatureName:IIS-WebServerRole 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T19:06:16.083

你有几个选择。Pkgmgr 工作。您可以使用 ServerManagerCmd.exe（Windows 服务器）、Dism.exe（较新的操作系统）并利用 MS 站点[http://technet.microsoft.com/en-us/library/cc722041.aspx](http://technet.microsoft.com/en-us/library/cc722041.aspx)中的标志。

我建议线程化这个组件，如果可能的话，用进度通知/栏更新 UI。这样你的用户就会知道事情正在进展。

Dism.exe 应该适用于 Windows 7、8、2008 等。我会在安装了这些操作系统的原始 VM 上运行一些测试，拍摄快照，然后运行安装程序。您可以随意重新应用快照，您将能够测试使软件工作所需的所有标志。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-20T00:18:33.493

我对提议的解决方案有一些疑问，因为我希望安装更多功能。该应用程序将运行，它会完成，但我的应用程序会挂起等待`process.WaitForExit()`调用。

仅供任何其他寻求答案的人参考。如果您的结果输出太大，而不是`process.WaitForExit()`，您应该运行如下内容：

```
string results = "";
while (!process.StandardOutput.EndOfStream)
{
    results += process.StandardOutput.ReadLine();
}

return results; 
```

我在下一步中需要该输出，因此我将其`ReadLine()`写入返回的字符串中。

# c - 如何通过zlib和compress2在C中编写gz文件

> ID：16079033
> 
> 赞同：2
> 
> 时间：2013-04-18T09:19:12.140
> 
> 标签：c, io, compression, zlib

我正在使用 zlib 编写一个在多个线程中压缩数据的程序。所以我不能使用gzwrite。我正在使用 compress2()。

```
*dest_len = compressBound(LOG_BUFF_SZ);
err = compress2((Bytef*)compressed_buff->buff, dest_len, (Bytef*)b->buff, size, GZ_INT_COMPRESSION_LEVEL);
write(fd, compressed_buff->buff, compressed_buff->full); 
```

但是当我尝试通过 gzip -d 解压缩文件时，我看到下一个输出：“不是 gzip 格式”。我究竟做错了什么？谢谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:45:48.933

`compress()`并`compress2()`压缩为[zlib 格式](https://www.rfc-editor.org/rfc/rfc1950)，而不是[gzip 格式](https://www.rfc-editor.org/rfc/rfc1952)。您需要使用较低级别的函数才能选择 gzip 格式。那些`deflateInit2()`是`deflate()`和`deflateEnd()`。阅读[zlib.h](http://www.zlib.net/manual.html)中的文档以了解这些功能。在那之后，您还应该查看[大量记录使用它们的示例](http://www.zlib.net/zlib_how.html)。

# android - 如何更改gridview中项目的字体颜色（android）

> ID：16079037
> 
> 赞同：2
> 
> 时间：2013-04-18T09:19:18.523
> 
> 标签：android, gridview, fonts, textview

我有一个用于单词搜索的字母网格视图，我正在尝试获取它，因此当您单击一个字母时，它会改变颜色（效果很好）。但如果单词不正确，我也希望能够将字体颜色改回来。

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
            {            
                Toast.makeText(TodaysPuzzleClass.this, "" + position, Toast.LENGTH_SHORT).show();        
                ((TextView) v).setTextColor(Color.BLUE);
} 
```

这是代码，所以当我点击一个项目时，它会改变颜色。

使用我吐司的坐标是否可以以这种方式更改项目颜色？

环顾四周，如果该项目随后改变其​​颜色，我需要使用该位置，但我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:33:03.160

试试这个，

```
((TextView) v).setTextColor(Color.parseColor("#000000")); 
```

# c# - 推送通知和 MVVMCross

> ID：16079042
> 
> 赞同：0
> 
> 时间：2013-04-18T09:19:31.060
> 
> 标签：c#, push-notification, xamarin.android, mvvmcross

我们在使用 MVVMCross 在 Android 上处理通知时遇到问题。

我实现了默认设置`void CreateNotification()`，但是当我们在通知中心点击通知时，`onCreate()`失败并出现以下异常：

> System.NullReferenceException：对象引用未设置为对象的实例

我们正在使用的代码：

```
var notificationManager = (NotificationManager)GetSystemService(NotificationService);

//Create an intent to show ui
var uiIntent = new Intent(this, typeof(HomeView));

var notification = new Notification(Android.Resource.Drawable.StarOn, title);
notification.Flags = NotificationFlags.AutoCancel;

notification.SetLatestEventInfo(this, title, desc, PendingIntent.GetActivity(this, 0, uiIntent, PendingIntentFlags.UpdateCurrent));

notificationManager.Notify(1, notification); 
```

此示例中的 HomeView 属于以下类型：

> 公共抽象类 MvxBindingActivityView : Cirrious.MvvmCross.Droid.Views.MvxActivityView 其中 TViewModel : 类 Cirrious.MvvmCross.Interfaces.ViewModels.IMvxViewModel Cirrious.MvvmCross.Binding.Droid.Views 的成员

任何人都可以帮助我们在哪里解决这个问题？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:57:43.230

提供没有任何跟踪或调用堆栈信息的 NullReference 异常是在要求“远射”猜测...如果可以，请尝试提供更多信息 - 例如通过捕获异常并跟踪 CallStack 和/或查看输出窗口或 monitor.bat 跟踪。

话虽如此，我喜欢远射......我怀疑你的问题在于你展示活动的方式 - 要显示 mvxactivity，你需要在 Intent Extras 中提供序列化的 MvxVieWModleRequest - 最简单的方法是使用MvxNavigatingObject 上的 ShowViewModel API（vNext 中的 MvxApplicationObject）。或者，您可以使用实现的对象`https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Interfaces/IMvxAndroidViewModelRequestTranslator.cs`- 您可以使用 IoC 获得它

我希望这个猜测是正确的——如果不是，那么请堆栈跟踪和日志输出 :)

斯图尔特

# iphone - 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因： setValue:forUndefinedKey:]

> ID：16079043
> 
> 赞同：-2
> 
> 时间：2013-04-18T09:19:39.250
> 
> 标签：iphone, ios, map

由于未捕获的异常而终止应用程序`'NSUnknownKeyException', reason: '[<MyMapViewController 0xa9446a0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key destinationAddress.'`

**首先抛出调用堆栈：**

```
(0xa8d012 0x1b57e7e 0xb15fb1 0xd76711 0xcf7ec8 0xcf79b7 0xd22428 0x12c30cc 0x1b6b663 0xa8845a 0x12c1bcf 0x1186e37 0x1187418 0x1187648 0x1187882 0x1193235 0x13923d2 0x11904f3 0x1190777 0xaf2833f 0x11907b7 0x2d8d 0x1b6b705 0x10a9920 0x10a98b8 0x116a671 0x116abcf 0x1169d38 0x10d933f 0x10d9552 0x10b73aa 0x10a8cf8 0x29f5df9 0x29f5ad0 0xa02bf5 0xa02962 0xa33bb6 0xa32f44 0xa32e1b 0x29f47e3 0x29f4668 0x10a665c 0x233d 0x2265) libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:21:30.303

检查您的 .xib 的插座`destinationAddress`并确保它已正确链接

# mysql - 更正查询以从三个不同的表中获取数据

> ID：16079045
> 
> 赞同：0
> 
> 时间：2013-04-18T09:19:48.300
> 
> 标签：mysql

我创建了以下查询。

```
SELECT users.id, users.email, aucs.winner_id, aucs.beginner, accounts.user_id
FROM users, aucs, accounts
WHERE users.id
IN (
aucs.winner_id
)
AND users.id NOT 
IN (
accounts.user_id
)
AND aucs.beginner =  '1' 
```

我想选择仅出现在 aucs 表中的获胜者 ID 列中的用户电子邮件地址，其中 aucs.beginner 也应等于“1”，并且该用户 ID 在帐户表中不可用。我已经写了我放在上面的查询不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:21:45.473

```
SELECT  DISTINCT
        users.id, 
        users.email, 
        aucs.winner_id, 
        aucs.beginner, 
        accounts.user_id
FROM    users
        INNER JOIN aucs 
            ON users.id = aucs.winner_id 
        LEFT JOIN accounts 
            ON aucs.winner_id = accounts.user_id AND 
               aucs.beginner =  '1'
WHERE   accounts.user_id IS NULL 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:30:44.207

这是我的想法，您不需要accounts.user_id，因为您希望获取帐户中不存在user_id 的记录。

```
SELECT users.id as users_id, users.email, aucs.winner_id, aucs.beginner
FROM users
LEFT JOIN aucs
ON aucs.winner_id = users.id
LEFT JOIN accounts
ON accounts.user_id = users.id
WHERE aucs.beginner = '1' AND accounts.id IS NULL
GROUP BY users.id
HAVING COUNT(aucs.winner_id) = 1 
```

# ios - UITableView 在进入编辑模式时取消选择单元格

> ID：16079049
> 
> 赞同：4
> 
> 时间：2013-04-18T09:19:51.967
> 
> 标签：ios, uitableview

我想在用户选择一个单元格时进入编辑模式（如果不是在编辑模式下），并在用户选择一个选定的单元格时退出编辑模式（显然是在编辑模式下）。除了这个小问题，我一切正常：当表格视图未处于编辑模式并且用户选择一个单元格时，单元格会突出显示，但随后立即“取消选择”，即。所选背景闪烁然后消失。我已经确认在调用`setEditing:animated:`tableview 的选定单元格后立即为零。`setEditing:animated:` 我希望它在调用不幸之后保持其选定的单元格，即使调用`selectRow:animated:scrollPosition:`之后`setEditing:animated:`也没有正确选择单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:33:38.307

检查表视图的**编辑**属性。选择单选 编辑期间

![在此处输入图像描述](https://i.stack.imgur.com/RnLIG.png)

# html - 验证码与隐藏字段

> ID：16079054
> 
> 赞同：1
> 
> 时间：2013-04-18T09:20:15.473
> 
> 标签：html, security, captcha

我最近一直想知道一个简单的网站是否可以接受一个体面的验证码的复杂性。我想知道是否仅在 CSS 中使用`input`具有属性的字段`hidden`就足以在 HTML 中进行简单保护？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:24:27.403

隐藏的 CSS 属性是不够的。输入字段的内容仍然可以从页面源中读取。任何将读取您的页面源的机器人或外部程序都可以读取该值，而不管 CSS 中的可见性如何。

一个好的验证码总是需要用户输入，因为如果验证码不需要用户输入，它总是可以被算法“破解”。

# node.js - 当没有完全匹配时，Mongodb Find 用于从列表中检索最接近的较大/最接近的较小值？

> ID：16079060
> 
> 赞同：0
> 
> 时间：2013-04-18T09:20:34.187
> 
> 标签：node.js, mongodb, express, mongoose

我有一个带有字段内存的集合，其值如 (1,7,3.5,5) 等，内存的用户查询参数包含 2，查询结果应该是 (1,3.5) 到最接近的匹配值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:42:25.603

有关更多信息，请查看[https://gist.github.com/anandof86/5433086](https://gist.github.com/anandof86/5433086)

# c# - 在 Visual Studio 2010 上发布 Web 服务

> ID：16079062
> 
> 赞同：0
> 
> 时间：2013-04-18T09:20:37.453
> 
> 标签：c#, visual-studio-2010, .net-3.5

我使用 Visual Studio 2010 (Framework .NET 3.5) 在 C# 中创建了一个 Web 服务。在调试模式下它工作得很好，但现在我必须在互联网上发布它，以便我可以远程使用它（将使用 Web 服务的应用程序是一个 android 应用程序）。

所以问题是：如何在 Internet 上发布我的 Web 服务，以便远程使用它？

提前致谢; 这是获得学位的工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:29:09.293

一个简单的方法：您切换到发布模式，更新您的 web.config 以进行生产，右键单击您的服务项目并从菜单中选择发布。然后将其发布到本地文件夹。这样它只复制需要的文件。然后，您使用 ftp 将文件夹的内容复制到您的远程站点，例如，您的托管服务提供商应该已经为您提供了凭据。

对于某些主机，也可以直接发布，但我不使用它。

# c++ - gtkmm 标头中的冲突声明

> ID：16079065
> 
> 赞同：1
> 
> 时间：2013-04-18T09:20:52.637
> 
> 标签：c++, codeblocks, gtkmm, glibmm

我开始认为我需要废弃所有东西并从头开始重做。我一直在代码块编译器设置中手动添加来自 GTK 和 gtkmm 的库，当我终于看到除了缺少标头之外的其他内容时，我明白了。

```
 ||=== test, Debug ===|
   /usr/include/gdkmm-3.0/gdkmm/applaunchcontext.h|32|error: conflicting declaration ‘typedef struct _GdkAppLaunchContext GdkAppLaunchContext’|
   /usr/include/gtk-2.0/gdk/gdkapplaunchcontext.h|42|error: ‘GdkAppLaunchContext’ has a previous declaration as ‘typedef struct GdkAppLaunchContext GdkAppLaunchContext’|
   /usr/include/gdkmm-3.0/gdkmm/applaunchcontext.h|33|error: conflicting declaration ‘typedef struct _GdkAppLaunchContextClass GdkAppLaunchContextClass’|
   /usr/include/gtk-2.0/gdk/gdkapplaunchcontext.h|43|error: ‘GdkAppLaunchContextClass’ has a previous declaration as ‘typedef struct GdkAppLaunchContextClass GdkAppLaunchContextClass’|
   /usr/include/gdkmm-3.0/gdkmm/rgba.h|251|error: return type ‘Gdk::RGBATraits::CType {aka struct _GdkRGBA}’ is incomplete|
   /usr/include/gdkmm-3.0/gdkmm/rgba.h|252|error: return type ‘Gdk::RGBATraits::CType {aka struct _GdkRGBA}’ is incomplete|
   /usr/include/gtkmm-3.0/gtkmm/widget.h|3890|error: ‘GdkEventTouch’ was not declared in this scope|
   /usr/include/gtkmm-3.0/gtkmm/widget.h|3890|error: template argument 2 is invalid|
   ||=== Build finished: 8 errors, 0 warnings ===| 
```

关于如何解决这个问题的任何想法？另外，关于如何将这些库添加到库的标准路径的任何提示？为每个项目手动执行此操作将是一个巨大的痛苦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:34:23.033

我解决了。而不是在编译器的搜索目录下添加头目录。我添加了以下行：

```
 `pkg-config --libs --cflags gtkmm-3.0` 
```

代码块中编译器和链接器下的其他选项。这解决了所有冲突并最终让我运行我的测试程序。

# vba - 在word中分配偶数奇数页码

> ID：16079070
> 
> 赞同：3
> 
> 时间：2013-04-18T09:21:02.970
> 
> 标签：vba, ms-word, page-numbering

我正在尝试为 word 编写一个 vba 宏，其中文档将具有页码，但奇数页码的对齐方式将与偶数页不同。我目前正在尝试的代码正在更改奇数页和偶数页的对齐方式，这是不需要的

```
 ActiveDocument.Sections(i).PageSetup.OddAndEvenPagesHeaderFooter = False
    ActiveWindow.ActivePane.View.SeekView = wdSeekCurrentPageFooter
    Selection.HeaderFooter.LinkToPrevious = Not Selection.HeaderFooter.LinkToPrevious
    ActiveDocument.Sections(i).Footers(wdHeaderFooterPrimary).LinkToPrevious = False
    With ActiveDocument.Sections(i).Footers(1).PageNumbers
        .NumberStyle = wdPageNumberStyleArabic
        .HeadingLevelForChapter = 0
        .IncludeChapterNumber = False
        .ChapterPageSeparator = wdSeparatorHyphen
        .RestartNumberingAtSection = False
        .StartingNumber = starts
        .Add (0)
    End With
End If
ActiveDocument.Sections(i).PageSetup.OddAndEvenPagesHeaderFooter = True
ActiveWindow.ActivePane.View.SeekView = wdSeekCurrentPageFooter
ActiveDocument.Sections(i).Footers(wdHeaderFooterEvenPages).LinkToPrevious = False
WordBasic.InsertAlignmentTab Alignment:=2, Relative:=0, Leader:=0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:44:52.030

似乎对于奇数页和偶数页，您没有设置页码`left`的`right`位置，但您需要设置它们`outside`的`inside`位置。

所以，试着改变这条小线：

```
.Add (0) 
```

进入可能的“奇偶”位置之一：

```
.Add wdAlignPageNumberOutside
.Add wdAlignPageNumberInside 
```

此外，尝试插入“制表符”的最后一行是不必要的。

# c# - 将扩展方法分配给变量

> ID：16079076
> 
> 赞同：0
> 
> 时间：2013-04-18T09:21:20.570
> 
> 标签：c#, asp.net

我正在尝试将变量分配给扩展方法，但是当我将鼠标悬停在该行上时出现错误。

`cannot assign 'void' to an implicitly-typed local variable`

我正在检查空字段并调用我的扩展方法并想要检查多个字段，如果它们都失败了，我希望它们出现在一个错误框中而不是堆积起来。

```
if (drp_SelectGroup.SelectedValue == "0")
{
  var message =  this.ShowMessage("Select an Ethnic Group", "ERROR", ErrorType.error);
} 
```

编辑*

```
public static void ShowMessage(this Page page, string message, string title, ErrorType err)
    {
        page.ClientScript.RegisterStartupScript(page.GetType(), "toastr",
            String.Format("toastr.{0}('{1}','{2}');", err, message, title), addScriptTags: true);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:22:53.993

从错误看来，它`ShowMessage`有一个`void`返回类型。

这意味着它没有返回任何东西。

您正在尝试将无类型分配给变量。

解决方案：

更改签名`ShowMessage`以返回您需要返回的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:22:58.323

问题不在于它是一个扩展方法——而是扩展方法有一个`void`返回类型。大概该方法*显示*消息，而不仅仅是创建它。如果您尝试调用任何其他 void 方法并将结果分配给变量，您将得到完全相同的错误消息。

您可能需要将扩展​​方法更改为以下内容：

```
public static string GetMessage(this Whatever foo, string message, string type,
                                ErrorType errorType) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:24:59.220

```
this.ShowMessage("Select an Ethnic Group", "ERROR", ErrorType.error); 
```

似乎有一个返回类型`void`。然后您不能分配给局部变量 ( `var message`)

您可以更改返回类型，`Show.Message()`这应该适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:23:02.393

此方法的返回类型为：`void`. 您不能将类型分配给`void`变量。

# html - Twitter bootstrap 修复了布局问题

> ID：16079080
> 
> 赞同：0
> 
> 时间：2013-04-18T09:21:32.210
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我的专栏使用 Twitter 引导程序遇到了一个奇怪的问题。设置一个测试页面，其行为应类似于此处的示例：http: [//twitter.github.io/bootstrap/examples/hero.html](http://twitter.github.io/bootstrap/examples/hero.html)。这是html：

```
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">        
    <link rel="stylesheet" type="text/css" href="/assets/24d7eb4f/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/24d7eb4f/css/bootstrap-yii.css" />
    <link rel="stylesheet" type="text/css" href="/assets/24d7eb4f/css/bootstrap-responsive.min.css" />
    <script type="text/javascript" src="/assets/8b15478e/jquery.js"></script>
    <script type="text/javascript" src="/assets/24d7eb4f/js/bootstrap.js"></script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="span4" style="border: 1px solid red;"></div>
            <div class="span4" style="border: 1px solid red;"></div>
            <div class="span4" style="border: 1px solid red;"></div>
        </div>            
    </div>
</body> 
```

应该产生上面链接中显示的结果，但我`span4`在下一行得到第三个，它首先被推到两个下面。除此之外，容器的行为与预期一样，即居中。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:34:18.913

边框将像素添加到宽度，因此`span4`现在从 300 像素增加到 302 像素（左边框：1 像素 + 右边框：1 像素），因此进入下一行。看[这里](http://jsfiddle.net/anpsmn/BUaEj/1/)

`border: 1px solid red;`

你可以给一个背景而不是边框​​来测试。

检查[小提琴](http://jsfiddle.net/anpsmn/BUaEj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:09:01.170

应用 a`border`通过向 s 添加一些宽度来破坏您的布局`span`。

用于处理“列样式”的本机引导解决方案是`.well`元素。

HTML

```
<div class="row">
    <div class="span4">
        <div class="well well-with-my-style">
        </div>
    </div>
    <div class="span4"></div>
    <div class="span4"></div>
</div> 
```

CSS

```
.well-with-my-style {
    border: 1px solid red;
    background: none;
    /* whatever... */
} 
```

这样，您将尊重本机布局并从`.well`元素中获利，但请记住，您必须`.well`用自己的样式（使用`.well-with-my-style`类）覆盖样式。

# mysql - Doctrine 2.3 - 由于特殊字符，文本字段未保存

> ID：16079081
> 
> 赞同：3
> 
> 时间：2013-04-18T09:21:32.427
> 
> 标签：mysql, character-encoding, doctrine-orm, symfony-2.1

我花了几个小时来调试一个算法，并注意到它来自 Doctrine (v2.3.3)。我正在使用 libpuzzle 来计算图像的哈希并将此哈希存储在数据库中。返回的哈希具有特殊字符，显然 Doctrine 不喜欢它。

这是我拥有的那种字符串（约 550 个字符）：

> 。

我调查并发现有人说要在配置中添加字符集，但我已经有了它：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   "%database_driver%"
        host:     "%database_host%"
        port:     "%database_port%"
        dbname:   "%database_name%"
        user:     "%database_user%"
        password: "%database_password%"
        charset:  UTF8 
```

如果我将列的排序规则从更改`utf8_unicode_ci`为`utf8_general_ci`仍然无法正常工作。我还确保默认架构排序规则是`utf8_general_ci`.

我尝试了另一个带有特殊字符的字符串：

> 测试！§$%&/()=? äöü ÄÖÜ :D

该字符串已正确插入，但散列仍然没有。

有谁知道我可以在哪里解决这个问题？它是一个教义错误吗？

**----------------------------------**

**更新**

就在执行之前，我仍然绑定了正确的数据。所以我猜这是编码或驱动程序问题。我修改了 symfony 配置：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   "%database_driver%"
        host:     "%database_host%"
        port:     "%database_port%"
        dbname:   "%database_name%"
        user:     "%database_user%"
        password: "%database_password%"
        charset:  UTF8
        options:
            1002: "SET NAMES 'UTF8'" 
```

我还尝试在不使用实体的情况下执行查询以确保：

```
$this->db = $this->getContainer()->get('doctrine')->getConnection();

$img = '/var/www/acme/web/upload/tmp/cd1fa593cf6feb2cde83e68f461a2d947.jpg';
$hash = puzzle_fill_cvec_from_file($img);

$sql = "UPDATE image set hash=? WHERE id=?";
$stmt = $this->db->prepare($sql);

$stmt->execute(array($hash, 180)); 
```

数据库中的数据仍然为空。在我使用过的另一个项目中`Zend_Db`，保存这个哈希没有任何问题。我不知道这是否是一个错误`Doctrine`:(

**----------------------------------**

**更新 2**

我已经在 mysql 中记录了所有查询，并且可以在日志中看到内容已正确绑定。但没有被mysql正确保存。

```
INSERT INTO image (guid, type, createTime, updateTime, images, imageSize, imageHash, status) 
VALUES (
'c30df23d6b0b08aff079287e00f21ec8a', 
'image', 
'2013-04-22 03:30:33', 
'2013-04-22 03:30:34',
'path/image.jpg', 
'165458', 
'?\0????\0?????????\0??????\0??????\0??????????????????????\0????\0??\0???\0???????????????????????????\0\0\0??\0?\0??\0??????????????????\0\0\0??\0?\0???????????????\0?????????????????\0?\0????????????\0?\0??????????????????????????\0?\0???????????\0???\0?????????\0??????\0\0?????????????????????\0\0??????\0???????????????\0', 
1) 
```

这是我的创建表：

```
delimiter $$
CREATE TABLE `image` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `guid` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `createTime` datetime NOT NULL,
  `updateTime` datetime DEFAULT NULL,
  `images` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `imageSize` bigint(20) DEFAULT NULL,
  `imageHash` longtext COLLATE utf8_unicode_ci,
  `status` integer(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci$$ 
```

干杯，马克西姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T14:08:47.350

您不应该使用`imageHash longtext COLLATE utf8_unicode_ci,` ，因为 RDBM 会尝试将数据映射到字符集，如果您的哈希数据是 libpuzzle 二进制输出，这显然不匹配。

尝试更改您的架构以使您的`imageHash`列成为`BLOB`.

如此处所述：http: [//dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

**BLOB 值被视为二进制字符串（字节字符串）**。它们**没有字符集**，排序和比较基于列值中字节的数值。

**TEXT 值被视为非二进制字符串（字符串）**。它们**有一个字符集**，并且**根据字符集的排序规则对值进行排序和比较**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:17:13.403

可能是您的 MySQL 服务器未配置为默认接受来自客户端的 UTF8。

在这种情况下，您需要运行以下查询：

```
SET NAMES utf8 
```

在 PHP 脚本的开头运行它，例如通过 Doctrine Connection 对象。

# drupal-7 - Drupal 7 如何将自定义模板应用于我的自定义表单

> ID：16079084
> 
> 赞同：1
> 
> 时间：2013-04-18T09:21:33.563
> 
> 标签：drupal-7, drupal-theming, drupal-fapi, drupal-forms, drupal-templates

我有一个模块，其中包括多步表单。我决定让这些步骤之一像这样工作：每个员工的空闲时间呈现为 html 元素，当单击元素时，Javascript 会将值应用于隐藏的输入字段。

所以我找到了这个教程：[http](http://drupal.org/node/1092122) ://drupal.org/node/1092122但它对我不起作用，也许我犯了一个错误，也许不是。

我的模块名称是预订。我的模板文件名为reservation_select_time_week_page.tpl.php，它位于reservation/theme 文件夹中。

我有这些功能：

```
function reservation_theme() {
  // basic things
  $module_path = drupal_get_path('module', 'reservation');
  $base = array(
      'path' => "$module_path/theme",
  );

  // define themes
  return array(
      'reservation_select_time_form' => $base + array(
          'render element' => 'form',
          'template' => 'reservation_select_time_week_page',
      ),
  );
}

function template_preprocess_reservation_select_time_week_page(&$variables) {
  echo "this works!";
}

function template_preprocess_select_time_form(&$variables) {
  echo "this works!";
} 
```

我不知道哪些预处理函数是正确的（应该根据模板名称还是表单 ID 命名？

无论如何，自定义模板不适用。

我也尝试过使用：

```
$form['start_time'] => array('#theme' => 'reservation_select_time_week_page'); 
```

我得到了它的工作，以便在模板文件中呈现静态 html，但我不知道如何在模板文件中呈现表单元素。使用：

```
drupal_render($form) 
```

我认为导致表单进入无限循环。

Drupal 甚至能够处理复杂的表单和表单布局吗？

# symfony - symfony 2.1 phpunit Swift_Message 类未找到

> ID：16079085
> 
> 赞同：4
> 
> 时间：2013-04-18T09:21:34.770
> 
> 标签：symfony, phpunit, swiftmailer, classnotfound

我对 symfony 和 phpunit 有疑问。我们的项目越来越大。所以我们决定为 phpunit 激活进程隔离，因为服务器无法再承受大量的测试（没有足够的 RAM）。从那时起，所有发送邮件的测试都不再工作了。有人可以帮助我们吗？如果 processIsolation="false" 下面的测试工作得很好，但如果 processIsolation="true" 则失败

版本：

*   symfony 2.1.8-dev

*   phpunit 3.7.9

**错误信息**

Project\AppBundle\Tests\MailTest::testSendMail PHPUnit_Framework_Exception：PHP 致命错误：在 /var/www/project/src/Project/AppBundle/Tests/MailTest.php 中找不到类“Swift_Message”

**测试**

```
public function testSendMail()
{
    $client = static::createClient();

    $message = \Swift_Message::newInstance();
    $message->setFrom('example@example.com')
        ->setTo('example@example.com')
        ->setSubject('Subject')
        ->setBody('Hello World')
        ->setContentType('text/html');

    $client->getContainer()->get('mailer')->send($message);
    $this->assertTrue(true);
} 
```

**phpunit.xml**

```
<phpunit
    backupGlobals="false"
    backupStaticAttributes="false"
    colors="true"
    convertErrorsToExceptions="true"
    convertNoticesToExceptions="true"
    convertWarningsToExceptions="true"
    bootstrap="./autoload.php"
    processIsolation="true"
    stopOnFailure="false"
    syntaxCheck="false" >

    <testsuites>
        <testsuite name="Project Test Suite">
            <directory>../src/Project/AppBundle/Tests/MailTest.php</directory>
        </testsuite>
</testsuites>
</phpunit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T17:13:32.563

这个错误是因为 Switfmailer 在安装它的自动加载器后定义了一个常量 SWIFT_REQUIRED_LOADED。自动加载器检查这个常量，如果它已经定义，则拒绝安装自动加载器。在进程隔离中，PHPUnit 确保在生成运行测试的进程中重新定义所有定义的常量。不幸的是，这意味着 SWIFT_REQUIRED_LOADED 是在测试过程中定义的，所以自动加载器不会加载（参见 swiftmailer 源目录中的“swift_required.php”）。请注意，如果您通过注释关闭测试的包含全局状态，您的测试仍然无法工作，因为引导文件通过 __PHPUNIT_BOOTSTRAP 全局变量传递给测试进程（请参阅 PHPUnit 目录中的 TestCaseMethod.tpl）。没有全局变量，

我发现唯一可行 的解​​决方法是将 PHPUnit 源代码分发中 TestCase.php 的 run 方法中的行`$constants = PHPUnit_Util_GlobalState::getConstantsAsString();` 替换 为。`$constants = '';`如果您的代码依赖于在测试用例运行之前定义的全局常量，那么此修复显然对您不起作用（类常量是另一回事）；除非在运行测试用例的过程中安全地重新定义所述常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T12:49:47.360

这是由与 swiftmailer 自动加载程序相关的问题引起的。

我遇到了同样的问题，并在 swiftmailer 的分叉存储库中修复了它。

在这里您可以找到修复的 PR：[https](https://github.com/swiftmailer/swiftmailer/pull/416) ://github.com/swiftmailer/swiftmailer/pull/416 。

~~如果您不想等到它被合并，您可以通过将它添加到您的`composer.json`.~~

 ~~```
"require": {
    "swiftmailer/swiftmailer": "dev-master as 5.0.x-dev"
},
"repositories": [
    {
        "type": "vcs",
        "url":  "https://github.com/NickStemerdink/swiftmailer.git"
    }
] 
```~~  ~~**更新：**同时 PR 已经合并，所以你可以更新到最新的 swiftmailer 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T08:39:39.660

如果您首先实例化 $message 并随后调用 static::createClient 是否有效？~~

# cefsharp - 使用 CEFSharp 及其所有存储的 cookie 发出 http 请求

> ID：16079087
> 
> 赞同：2
> 
> 时间：2013-04-18T09:21:35.357
> 
> 标签：cefsharp

我想在用户登录后使用 cefsharp 中已经包含的 cookie 向 facebook 或经过身份验证的站点发出网络请求。

我怎样才能做到这一点？我目前正在使用 HttpWebRequest。我可以以某种方式从 CEF 检索 cookie 并将其传递给 HttpWebRequest 吗？尝试查看 CEFRequest 但它无法访问，我也不知道如何使用它

我需要所有这些来预取我需要预缓存的 2000 个站点所需的资源。如果您可以建议另一种方法，请同时推荐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:45:59.353

该方法`Cef.VisitAllCookies()`将为每个 cookie 发出回调。然后，您可以有选择地将部分或全部这些 cookie 包含在您使用`HttpWebRequest`.

[https://github.com/ataranto/CefSharp/blob/master/CefSharp/CefSharp.h#L122](https://github.com/ataranto/CefSharp/blob/master/CefSharp/CefSharp.h#L122)

# android - 如果在安全的 wifi 网络上使用，应用程序会崩溃

> ID：16079088
> 
> 赞同：0
> 
> 时间：2013-04-18T09:21:38.973
> 
> 标签：android, crash, wifi

我已经为 android 4.0 及更高版本创建了一个应用程序。我的应用程序几乎在所有阶段都使用互联网。在每一项活动中，我都完成了所有必要的处理，以在与服务器通信之前检查互联网连接。

**我面临的问题是，如果在 2G 或 3G 网络上使用该应用程序运行良好，但如果在安全 wifi 连接中使用它会崩溃。我尝试在不安全的 wifi 网络中使用该应用程序，它运行良好。**

应用程序的**清单文件**：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ica.bankpoexamination2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission>
    <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.READ_PHONE_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.ica.bankpoexamination2.SplashScreenActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.LoginActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.TakeTestActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.PracticeTestActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.SpeedTestActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.ExamActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.GeneralInstructionsActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.RateUsActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.SpeedTestExamDetailsActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.PracticeTestExamDetailsActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.ChooseTestTypeActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.ExamNamesActivity"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.ReportActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.CurrentUpdateActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.TipsAndTricksActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.bankpoexamination2.LibraryActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportListActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportDetailsActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportScoreCardActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportTimeManagementActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportQuestionReportActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportDifficultyLevelActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.reportinnactivities.ReportAllTestReportActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.ica.userregistration.RegisterActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.userregistration.OtpRegisterActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.ica.currentupdate.CurrentUpdateDetailsActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
    </application>

</manifest> 
```

**我应该怎么做才能解决这个问题？**

PS：其他应用程序在同一个安全 wifi 网络上运行良好。

# android - 播放自定义直播中的视频 (Android)

> ID：16079090
> 
> 赞同：1
> 
> 时间：2013-04-18T09:21:40.510
> 
> 标签：android, video-streaming, android-mediaplayer, rtmp

我的 android 应用程序需要从远程 RTMP 服务器 (Adobe Flash Media Server) 播放实时视频。

由于 android`android.media.MediaPlayer`不支持 rtmp 协议，我找到了一个为我提供流媒体功能的库。即我可以连接和接收部分视频流作为字节数组。

问题是我如何使用这个传入的视频流数据在视图中显示它？

似乎当前的标准 API 不允许我这样做。`MediaPlayer`接受文件或网址。对于音频数据，有一个`AudioTrack`允许实现与我的目标类似的目标，但对于音频。对于视频，我没有看到选项。

任何建议表示赞赏，也许有第三方媒体库可以为 Android 提供功能。

# c# - 从asp.net会话中的列表集合中获取项目+对象引用未设置为对象的实例

> ID：16079092
> 
> 赞同：0
> 
> 时间：2013-04-18T09:21:47.953
> 
> 标签：c#, asp.net, list, session

我创建了一个 SessionManager 类，以便在 asp.net 应用程序中处理我的会话变量。以下是我的一段 SessionManager 类代码：

```
 public int TotalTests
    {
        get
        {
            return (int)HttpContext.Current.Session["totalTests"];
        }
        set
        {
            HttpContext.Current.Session["totalTests"] = value;
        }
    }

    public List<TestCase> TestCases
    {
        get
        {
            return (List<TestCase>)HttpContext.Current.Session["testCases"];
        }
        set
        {
            HttpContext.Current.Session["testCases"] = value;
        }
    } 
```

问题是我能够从我的网络应用程序中的代码隐藏和其他类设置和访问 TotalTests 的值。但是，关于 TestsCases，我可以从代码隐藏中分配 List 类型的集合，并且调试应用程序显示 Session 变量实际上正在被填充，但是当我尝试从存储在 session 中的集合中检索项目时使用 LINQ 我得到一个对象引用未设置为对象错误的实例。我正在使用的代码如下：

```
TestCase test = (from testCase in session.TestCases
                        where testCase.testName == result.Name
                        select testCase).Single(); 
```

并在我使用的会话中填充集合

SessionManager 会话 = 新的 SessionManager(); session.TestCases = 测试用例；

任何想法请可能导致这种情况？

# android - 将使用 Maps API V1 的 Android App 转换为 Maps Android API V2

> ID：16079093
> 
> 赞同：4
> 
> 时间：2013-04-18T09:21:49.290
> 
> 标签：android, google-maps, google-maps-android-api-2

我有一个使用旧 Maps API 的 android 应用程序，现在已弃用！

我应该采取哪些步骤来使我的应用程序与新 API 一起工作。

我也在使用 Distance Matrix API 和 Google Directions API。

我的代码可以使用它吗？！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T09:29:13.903

您可以查看我写的这篇关于如何使用以下方法创建地图应用程序的博文：

[谷歌地图 API V2 指南](https://blog-emildesign.rhcloud.com/?p=435)

基本上你必须做的改变是

**1.**将`MapView`对象替换为`MapFragment`或`SupportMapFragment`对象（取决于`target SDK`您的应用程序）

**2.**此外，您将不得不`MapActivity`用普通`Activity`（如果您使用`MapFragment`对象）或`FragmentActivity`（如果您使用`SupportMapFragment`对象）替换。

**3.**您必须将清单文件中的权限更改为指南中描述的新权限。

# vtk - 在 Windows 中使用 GDCM 编程并使用 VTK 更改像素数据？

> ID：16079095
> 
> 赞同：1
> 
> 时间：2013-04-18T09:21:55.960
> 
> 标签：vtk, dicom, gdcm

我有两个问题。

首先：我没有任何关于如何在 Windows 中使用 GDCM 库的明确文档。是否可以在 Windows 的 Visual Studio 中使用 GDCM 库？如果是这样，您能否提供任何说明如何在 Visual Studio 中安装该库？我想对 GDCM 命令“ `gdcmimg`”的运行方式进行更改或添加一些内容。

第二：我有一些多帧 dicom 图像，我需要修改像素并保持所有标签（私有或非私有）完好无损。我尝试过使用 Matlab、GDCM 和 Dcmtk。但在每种情况下都有一些问题。Matlab 无法更改多帧图像，因为它内存不足。GDCM 无法保持标签完整（我使用“ `gdcmimg`”命令）并且我还不知道如何更改此功能，dcmtk（我为此使用“ `dcmodify`”命令）只能更改单帧 dicom 图像和奇怪的是，当图像由某些供应商提供时，它无法在多帧 dicom 图像的情况下这样做。我的意思是，我尝试使用自己使用matlab制作的多帧dicom图像，我可以使用“`dcmodify`”，但是当我尝试使用供应商提供的多帧 dicom 图像时，它无法更改像素数据。所以，现在我想尝试使用 VTK。您能否告诉我 VTK 是否可以更改像素数据一个多帧 dicom 图像，同时保持所有标签（私有或非私有）完好无损？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T04:00:26.113

您可以在 Visual Studio 中的 Windows 上使用 GDCM。

1.  下载 GDCM 源代码。
2.  下载 CMake
3.  用户 CMake 为 GDCM 生成 Visual Studio 解决方案
4.  构建 Visual Studio 解决方案
5.  在您自己的项目中使用构建的库。

GDCM 的文档很少。

关于私有标签。一般的做法是，当您修改/派生图像时，您不保留私有标签。唯一的私有标签应该是您添加的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T16:05:30.940

当所有其他方法都失败时，请阅读文档：[Configuring and Building With VS .NET 2003](http://gdcm.sourceforge.net/wiki/index.php/Configuring_and_Building_With_VS_.NET_2003)。当然，由于使用了 CMake，这适用于任何较新的 Visual Studio。

# sharepoint-2010 - 使用 WSP 文件与共享点进行 Yammer 集成

> ID：16079097
> 
> 赞同：0
> 
> 时间：2013-04-18T09:22:00.933
> 
> 标签：sharepoint-2010, user-permissions, yammer

我正在尝试使用指南[http://success.yammer.com/integrations/sharepoint/](http://success.yammer.com/integrations/sharepoint/)将 Yammer 与 Sharepoint 集成，并且我正在使用 WSP 文件的在线集成方法。

我在 SP2010 Foundation 中上传了 WSP 文件，但我无法激活解决方案![在此处输入图像描述](https://i.stack.imgur.com/dAz1n.png)

看到我得到了非活动的“激活”按钮......我预测问题在于用户激活沙盒解决方案所需的一些强制性权限......提前感谢您的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:12:28.697

看起来沙盒服务没有运行或配置不正确。我认为您需要检查它是否正在运行。您可以在这里查看如何检查用户代码服务是否已打开。

[http://www.paulgrimley.com/2010/06/starting-sharepoint-2010-sandboxed-code.html](http://www.paulgrimley.com/2010/06/starting-sharepoint-2010-sandboxed-code.html)

# android - 简单的 Android SharedPreferences 实现：方法失败 - 所有值都为 Null

> ID：16079105
> 
> 赞同：0
> 
> 时间：2013-04-18T09:22:14.423
> 
> 标签：android, string, null, sharedpreferences

我正在尝试对我的源代码中的几个值进行空值检查，看来它们都返回空值。由于我的 SharedPreferences 实现，我应该能够在我的新类中使用这些值，但它似乎不起作用。（我似乎忽略了一些简单的事情。）

起点类 SharedPreferences 实现：

```
SharedPreferences prefs=getPreferences(Context.MODE_PRIVATE);
    SharedPreferences.Editor editor=prefs.edit();
    editor.putBoolean("name",true);
    editor.putBoolean("cap",true);
    editor.putBoolean("code",true);
    editor.putBoolean("time",true);
    editor.putBoolean("ssid",true);
    editor.commit(); 
```

端点类 SharedPreferences 实现：

```
SharedPreferences prefs=getPreferences(Context.MODE_PRIVATE);
    SharedPreferences.Editor editor=prefs.edit();
   if (new == null) {
        Log.d(TAG, "Broken Value! Debug! Debug!"); 
    prefs.getBoolean("new", true);
    prefs.getBoolean("user", true);
    prefs.getBoolean("name", true);
    prefs.getBoolean("data", true);
    prefs.getBoolean("login", true);
    editor.commit(); 
```

当我检查它们时，端点中的值显示为 null - 知道为什么吗？我相信由于我实现了 SharedPreferences，它们不应该为 null，但它们仍然返回 null。（我可以发誓我正确地实现了这个——我不知道为什么我不能检索这些值——我相信一切都应该正常运行——但奇怪的是：它不是。）

首次尝试提供的解决方案：

```
SharedPreferences prefs=getPreferences(NDEF_PREF, Context.MODE_PRIVATE);
        SharedPreferences.Editor editor=prefs.edit();
            prefs.getBoolean("name", true);
            prefs.getBoolean("cap", true);
            prefs.getBoolean("code", true);
            prefs.getBoolean("time", true);
            prefs.getBoolean("ssid", true);
            editor.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:51:17.993

你没有得到 SharedPreferences，试试这个：

```
SharedPreferences prefs = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE); 
```

`PREFS_NAME`你给文件起的名字在哪里。

你也不能这样做：

```
SharedPreferences.Editor editor=prefs.edit();
prefs.getBoolean("new", true); 
```

由于 Editor 类没有该方法...相反，您应该使用`prefs`变量来获取值。

看看你在保存和恢复什么……在这两种情况下唯一的值是“名称”，所以其他的都是假的。

**编辑**

例子：

```
String NDEF_PREF = "prefs";
SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE);
prefs.getBoolean("name", true);
prefs.getBoolean("cap", true);
prefs.getBoolean("code", true);
prefs.getBoolean("time", true);
prefs.getBoolean("ssid", true); 
```

# scala - Scala 2.10 反射，如何从案例类中提取字段值，即案例类中的字段列表

> ID：16079113
> 
> 赞同：30
> 
> 时间：2013-04-18T09:22:39.953
> 
> 标签：scala, reflection, scala-2.10, case-class

如何使用 scala 2.10 中的新反射模型从 scala 中的案例类中提取字段值？例如，使用下面不会拉出字段方法

```
 def getMethods[T:TypeTag](t:T) =  typeOf[T].members.collect {
    case m:MethodSymbol => m
  } 
```

我打算把它们泵入

```
 for {field <- fields} {
    currentMirror.reflect(caseClass).reflectField(field).get
  } 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-18T09:55:15.887

[`MethodSymbol`](http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Symbols$MethodSymbol)有一种`isCaseAccessor`方法可以让您精确地做到这一点：

```
def getMethods[T: TypeTag] = typeOf[T].members.collect {
  case m: MethodSymbol if m.isCaseAccessor => m
}.toList 
```

现在您可以编写以下内容：

```
scala> case class Person(name: String, age: Int)
defined class Person

scala> getMethods[Person]
res1: List[reflect.runtime.universe.MethodSymbol] = List(value age, value name) 
```

你只得到你想要的方法符号。

如果您只想要实际的字段名称（而不是`value`前缀）并且希望它们以相同的顺序排列，那么：

```
def getMethods[T: TypeTag]: List[String] =
  typeOf[T].members.sorted.collect {
    case m: MethodSymbol if m.isCaseAccessor => m.name.toString
  } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-19T04:51:19.593

如果你想变得更漂亮，你可以通过检查构造函数符号来按顺序获取它们。即使有问题的案例类类型定义了多个构造函数，此代码仍然有效。

```
 import scala.collection.immutable.ListMap
  import scala.reflect.runtime.universe._

  /**
    * Returns a map from formal parameter names to types, containing one
    * mapping for each constructor argument.  The resulting map (a ListMap)
    * preserves the order of the primary constructor's parameter list.
    */
  def caseClassParamsOf[T: TypeTag]: ListMap[String, Type] = {
    val tpe = typeOf[T]
    val constructorSymbol = tpe.decl(termNames.CONSTRUCTOR)
    val defaultConstructor =
      if (constructorSymbol.isMethod) constructorSymbol.asMethod
      else {
        val ctors = constructorSymbol.asTerm.alternatives
        ctors.map(_.asMethod).find(_.isPrimaryConstructor).get
      }

    ListMap[String, Type]() ++ defaultConstructor.paramLists.reduceLeft(_ ++ _).map {
      sym => sym.name.toString -> tpe.member(sym.name).asMethod.returnType
    }
  } 
```

# c# - 从深度嵌套的 json 对象中获取数据

> ID：16079116
> 
> 赞同：14
> 
> 时间：2013-04-18T09:22:53.777
> 
> 标签：c#, json

我现在真的被这个问题困扰了 2 天，如何从深度嵌套的 json 对象中获取数据。

我找到了一个在线 json 工具[http://www.jsoneditoronline.org/](http://www.jsoneditoronline.org/) [http://jsonformat.com/](http://jsonformat.com/) 当您将 json 粘贴到其中时，它会显示所有对象数组等，因此我可以深入研究数据并得到我想要的信息。

当我调试代码并设置断点时： `foreach (JToken data in rates.ToArray())`我可以看到我所追求的数据，我只是无法将数据取出，取决于我尝试的内容取决于我得到的错误，最后一个错误是。

> 将值“@rateChange”转换为类型“Web.UI.Controllers.HomeController+RateInfo”时出错。
> 
> 无法从 System.String 转换或转换为 Web.UI.Controllers.HomeController+RateInfo。

对此的任何帮助都非常感谢。

我的课

```
public class RateInfo
        {
            public string RateChange { get; set; }
            public string Promo { get; set; }
            public string PriceBreakdown { get; set; }
            public bool NonRefundable { get; set; }
            public string RateType { get; set; }
            public int CurrentAllotment { get; set; }
            public int? PromoId { get; set; }
            public string PromoDescription { get; set; }
            public string PromoType { get; set; }
        } 
```

代码

```
 IList<JToken> rates = root["HotelListResponse"]["HotelList"]["HotelSummary"][0]["RoomRateDetailsList"]["RoomRateDetails"]["RateInfos"]["RateInfo"].Children().ToList();

                        IList<RateInfo> info = new List<RateInfo>();
                        foreach (JToken data in rates.ToArray())
                        {
                            RateInfo rateInfo = JsonConvert.DeserializeObject<RateInfo>(data.ToString());
                            info.Add(rateInfo);
                        } 
```

json

```
{ "HotelListResponse" : { "HotelList" : { "@activePropertyCount" : "168",
          "@size" : "2",
          "HotelSummary" : [ { "@order" : "0",
                "@ubsScore" : "360017",
                "RoomRateDetailsList" : { "RoomRateDetails" : { "RateInfos" : { "@size" : "1",
                            "RateInfo" : { "@priceBreakdown" : "true",
                                "@promo" : "true",
                                "@rateChange" : "true",
                                "ChargeableRateInfo" : { "@averageBaseRate" : "68.62333",
                                    "@averageRate" : "68.62333",
                                    "@commissionableUsdTotal" : "205.87",
                                    "@currencyCode" : "USD",
                                    "@grossProfitOffline" : "14.06",
                                    "@grossProfitOnline" : "27.44",
                                    "@maxNightlyRate" : "77.87",
                                    "@nightlyRateTotal" : "205.87",
                                    "@total" : "205.87",
                                    "NightlyRatesPerRoom" : { "@size" : "3",
                                        "NightlyRate" : [ { "@baseRate" : "77.87",
                                              "@promo" : "false",
                                              "@rate" : "77.87"
                                            },
                                            { "@baseRate" : "64.0",
                                              "@promo" : "false",
                                              "@rate" : "64.0"
                                            },
                                            { "@baseRate" : "64.0",
                                              "@promo" : "false",
                                              "@rate" : "64.0"
                                            }
                                          ]
                                      }
                                  },
                                "RoomGroup" : { "Room" : { "numberOfAdults" : 2,
                                        "numberOfChildren" : 0,
                                        "rateKey" : "f82ab843-49ee-481a-b53a-71647592b183"
                                      } },
                                "currentAllotment" : 0,
                                "nonRefundable" : true,
                                "promoDescription" : "Advance Purchase Special - non-refundable",
                                "promoId" : 200827770,
                                "promoType" : "Standard",
                                "rateType" : "MerchantStandard"
                              }
                          },
                        "ValueAdds" : { "@size" : "1",
                            "ValueAdd" : { "@id" : "2048",
                                "description" : "Free Wireless Internet"
                              }
                          },
                        "expediaPropertyId" : 3084588,
                        "maxRoomOccupancy" : 3,
                        "minGuestAge" : 0,
                        "propertyAvailable" : true,
                        "propertyRestricted" : false,
                        "quotedRoomOccupancy" : 2,
                        "rateCode" : 200371945,
                        "roomDescription" : "Standard Room with King size bed",
                        "roomTypeCode" : 477014
                      } },
                "address1" : "Stone Cellar Road",
                "address2" : "High Usworth Newcastle",
                "airportCode" : " ",
                "amenityMask" : 18063491,
                "city" : "Washington",
                "confidenceRating" : 90,
                "countryCode" : "GB",
                "deepLink" : "http://travel.ian.com/index.jsp?pageName=hotAvail&cid=55505&hotelID=340461&mode=2&numberOfRooms=1&room-0-adult-total=2&room-0-child-total=0&arrivalMonth=11&arrivalDay=12&departureMonth=11&departureDay=15&showInfo=true&locale=en_US&currencyCode=USD",
                "highRate" : 77.870000000000005,
                "hotelId" : 340461,
                "hotelInDestination" : true,
                "hotelRating" : 3,
                "latitude" : 54.922739999999997,
                "locationDescription" : "Near Washington Old Hall",
                "longitude" : -1.5342899999999999,
                "lowRate" : 64,
                "name" : "Mercure Newcastle George Washington Hotel Golf and Spa",
                "postalCode" : "NE37 1PH",
                "propertyCategory" : 1,
                "proximityDistance" : 1.4710813,
                "proximityUnit" : "MI",
                "rateCurrencyCode" : "USD",
                "shortDescription" : "<p><b>Location. </b> <br />Mercure Newcastle George Washington Hotel Golf and Spa is a business-friendly hotel located in Washington, close to Washington Old Hall, Angel of the North, and WWT",
                "supplierType" : "E",
                "thumbNailUrl" : "/hotels/4000000/3090000/3084600/3084588/3084588_84_t.jpg",
                "tripAdvisorRating" : 3.5,
                "tripAdvisorRatingUrl" : "http://www.tripadvisor.com/img/cdsi/img2/ratings/traveler/3.5-12345-4.gif",
                "tripAdvisorReviewCount" : 215
              },
              { "@order" : "1",
                "@ubsScore" : "258461",
                "RoomRateDetailsList" : { "RoomRateDetails" : { "RateInfos" : { "@size" : "1",
                            "RateInfo" : { "@priceBreakdown" : "true",
                                "@promo" : "false",
                                "@rateChange" : "true",
                                "ChargeableRateInfo" : { "@averageBaseRate" : "54.83667",
                                    "@averageRate" : "54.83667",
                                    "@commissionableUsdTotal" : "164.51001",
                                    "@currencyCode" : "USD",
                                    "@grossProfitOffline" : "11.69",
                                    "@grossProfitOnline" : "22.38",
                                    "@maxNightlyRate" : "63.47",
                                    "@nightlyRateTotal" : "164.51001",
                                    "@total" : "164.51",
                                    "NightlyRatesPerRoom" : { "@size" : "3",
                                        "NightlyRate" : [ { "@baseRate" : "50.52",
                                              "@promo" : "false",
                                              "@rate" : "50.52"
                                            },
                                            { "@baseRate" : "50.52",
                                              "@promo" : "false",
                                              "@rate" : "50.52"
                                            },
                                            { "@baseRate" : "63.47",
                                              "@promo" : "false",
                                              "@rate" : "63.47"
                                            }
                                          ]
                                      }
                                  },
                                "RoomGroup" : { "Room" : { "numberOfAdults" : 2,
                                        "numberOfChildren" : 0,
                                        "rateKey" : "f82ab843-49ee-481a-b53a-71647592b183"
                                      } },
                                "currentAllotment" : 0,
                                "nonRefundable" : true,
                                "rateType" : "MerchantStandard"
                              }
                          },
                        "expediaPropertyId" : 901118,
                        "maxRoomOccupancy" : 2,
                        "minGuestAge" : 0,
                        "propertyAvailable" : true,
                        "propertyRestricted" : false,
                        "quotedRoomOccupancy" : 2,
                        "rateCode" : 200369466,
                        "roomDescription" : "Standard room with double bed - Book early & Save",
                        "roomTypeCode" : 162976
                      } },
                "address1" : "Emerson Road",
                "address2" : "District 5",
                "airportCode" : "NCL",
                "amenityMask" : 1507328,
                "city" : "Washington",
                "confidenceRating" : 85,
                "countryCode" : "GB",
                "deepLink" : "http://travel.ian.com/index.jsp?pageName=hotAvail&cid=55505&hotelID=207631&mode=2&numberOfRooms=1&room-0-adult-total=2&room-0-child-total=0&arrivalMonth=11&arrivalDay=12&departureMonth=11&departureDay=15&showInfo=true&locale=en_US&currencyCode=USD",
                "highRate" : 63.469999999999999,
                "hotelId" : 207631,
                "hotelInDestination" : true,
                "hotelRating" : 2,
                "latitude" : 54.895090000000003,
                "locationDescription" : "Near Washington Old Hall",
                "longitude" : -1.55661,
                "lowRate" : 50.520000000000003,
                "name" : "Campanile Washington Newcastle Upon Tyne",
                "postalCode" : "NE37 1LB",
                "propertyCategory" : 1,
                "proximityDistance" : 1.2526573000000001,
                "proximityUnit" : "MI",
                "rateCurrencyCode" : "USD",
                "shortDescription" : "<p><b>Location. </b> <br />Campanile Washington Newcastle Upon Tyne is located in Washington, close to Washington Old Hall, Angel of the North, and WWT Washington Wetland Centre. Additional area",
                "supplierType" : "E",
                "thumbNailUrl" : "/hotels/1000000/910000/901200/901118/901118_20_t.jpg",
                "tripAdvisorRating" : 3.5,
                "tripAdvisorRatingUrl" : "http://www.tripadvisor.com/img/cdsi/img2/ratings/traveler/3.5-12345-4.gif",
                "tripAdvisorReviewCount" : 55
              }
            ]
        },
      "cacheKey" : "4ef59f3e:13e1c495694:-6e28",
      "cacheLocation" : "10.186.168.74:7301",
      "cachedSupplierResponse" : { "@cachedTime" : "0",
          "@candidatePreptime" : "100",
          "@matchedCurrency" : "true",
          "@matchedLocale" : "true",
          "@otherOverheadTime" : "3",
          "@supplierCacheTolerance" : "MED",
          "@supplierRequestNum" : "118",
          "@supplierResponseNum" : "2",
          "@supplierResponseTime" : "468",
          "@tpidUsed" : "5200"
        },
      "customerSessionId" : "0ABAA84A-59F3-E913-E1C2-495694906E33",
      "moreResultsAvailable" : true,
      "numberOfRoomsRequested" : 1
    } } 
```

=============================此代码可以从汇总数组中获取数据============

```
public class Hotelsummary
    {
        public string Name                  { get; set; }
        public string Address1              { get; set; }
        public string Address2              { get; set; }
        public string City                  { get; set; }
        public string PostalCode            { get; set; }
        public string CountryCode           { get; set; }
        public string ThumbNailUrl          { get; set; }
        public string ShortDescription      { get; set; }
        public double HotelRating           { get; set; }
        public double TripAdvisorRating     { get; set; }
        public string RateCurrencyCode      { get; set; }
    }

public IEnumerable<Hotelsummary> GetHotelsForLocationSearch()
        {
            var hotelDetails = GetHotelsFromEan.GetListOfHotels();
            var root = JObject.Parse(hotelDetails.ToString());
            IList<JToken> hotels = root["HotelListResponse"]["HotelList"]["HotelSummary"].Children().ToList();
            IList<Hotelsummary> hotelsummaries = hotels.Select(result => JsonConvert
                                                                             .DeserializeObject<Hotelsummary>(
                                                                                 result.ToString())).ToList();
            return hotelsummaries;
        } 
```

但是一旦我尝试更深入地挖掘数据，我就无法获得我需要的数据

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-18T09:46:48.273

试试这个：

```
IList<JToken> rates = root["HotelListResponse"]["HotelList"]["HotelSummary"][0]["RoomRateDetailsList"]["RoomRateDetails"]["RateInfos"].Children().ToList(); 
```

**编辑：**

```
var rateInfo = json["HotelListResponse"]["HotelList"]["HotelSummary"][0]["RoomRateDetailsList"]["RoomRateDetails"]["RateInfos"]["RateInfo"];

var result =JsonConvert.DeserializeObject<RateInfo>( rateInfo .ToString() ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-29T16:07:56.677

此扩展方法使用递归循环通过深层嵌套的 json 并找到 jProperty 的值。

```
 public static TType JsonValue<TType>(this JObject obj, string key)
    {
        object result = null; //default to null if nothing is found

        foreach (var item in obj)
        {
            var token = item;

            if (token.Key.Equals(key, StringComparison.InvariantCultureIgnoreCase))
            {
                result = token.Value.ToObject<TType>(); //return the value found
                break;
            }

            if (!obj[token.Key].Children().Any())
                continue;

                var jt = obj[token.Key].ToString();

                if (!jt.StartsWith("["))
                {
                  result = JsonValue<TType>(JObject.Parse(jt), key);
                }
                else
                {
                    obj[token.Key].Children().ToList().ForEach(x =>
                    {
                        //only the first match will be returned
                        result = JsonValue<TType>(JObject.Parse(x.ToString()), key);
                    });
                }

            if (result != null)
                break;

        }

       return (TType)result;
    } 
```

如何使用：

```
 var myValue = jsonObject.JsonValue<string>("propName");
    var numbValue = jsonObject.JsonValue<long?>("propName2") ?? 0; 
```

# php - Doctrine Multiple Join Query 给出错误

> ID：16079118
> 
> 赞同：0
> 
> 时间：2013-04-18T09:22:54.353
> 
> 标签：php, doctrine-orm, dql

我在 Doctrine 2.3.3 中编写一个查询，我想从 4 个不同的表中检索数据。现在我编写了一个适用于单连接的查询。但是当我编写多个连接查询时，它会显示一个错误..

我的查询是

```
$query = $parent->entityManager->createQuery('SELECT t,s,q,d FROM TblEmployee t JOIN TblEmployeeShifts s JOIN TblEmployeeQualification q JOIN TblEmployeeDepartment d where t.employeeId = s.employeeId and t.employeeId = d.employeeId and t.employeeId = q.employeeId and t.employeeId ='.$data); 
```

但上面的查询给了我一个错误，如下所示，

```
[Syntax Error] line 0, col 89: Error: Expected =, <, <=, <>, >, >=, !=, got 'q' 
```

请指导我在哪里我错了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:59:47.383

这是我们可以在 Doctrine 中执行多重连接的方法之一

```
$query = $parent->entityManager->createQuery('
    SELECT t,s,d,q 
    FROM TblEmployee t
    JOIN TblEmployeeDepartment s WITH t.employeeId = s.employeeId
    JOIN TblEmployeeShifts d WITH t.employeeId = d.employeeId
    JOIN TblEmployeeQualification q WITH t.employeeId = q.employeeId 
         and t.employeeId = '.$data
); 
```

# chef-infra - 运行 chef-client 抛出 404“找不到对象”（Net::HTTPServerException）

> ID：16079121
> 
> 赞同：7
> 
> 时间：2013-04-18T09:23:01.600
> 
> 标签：chef-infra

我刚开始与 Chef 合作，对 DevOps 领域还很陌生。
我安装了 Chef Server，它运行良好，然后我开始使用 Knife 并添加了两个客户端——我的 MacBook（OS X）和一个我不管理自己的 Ubuntu 10.04 服务器，所以我不得不请一个系统管理员来将 chef-client 安装到这台机器上。我创建了一本测试食谱并将其添加到每个客户端的运行列表中。但是，当我尝试在它们两个上运行 chef-client 时，在我的 Mac OS X 机器上一切正常，而 Ubuntu 10.04 运行抛出错误：

```
$ sudo chef-client

[Wed, 17 Apr 2013 16:32:26 +0200] INFO: Starting Chef Run (Version 0.9.18)  
[Wed, 17 Apr 2013 16:32:27 +0200] ERROR: Running exception handlers  
[Wed, 17 Apr 2013 16:32:27 +0200] ERROR: Exception handlers complete  
/usr/lib/ruby/1.8/net/http.rb:2101:in `error!': 404 "Object Not Found" (Net::HTTPServerException)
from /usr/lib/ruby/1.8/chef/rest.rb:234:in `api_request'
from /usr/lib/ruby/1.8/chef/rest.rb:285:in `retriable_rest_request'
from /usr/lib/ruby/1.8/chef/rest.rb:215:in `api_request'
from /usr/lib/ruby/1.8/chef/rest.rb:226:in `api_request'
from /usr/lib/ruby/1.8/chef/rest.rb:335:in `follow_redirect'
from /usr/lib/ruby/1.8/chef/rest.rb:226:in `api_request'
from /usr/lib/ruby/1.8/chef/rest.rb:285:in `retriable_rest_request'
from /usr/lib/ruby/1.8/chef/rest.rb:215:in `api_request'
from /usr/lib/ruby/1.8/chef/rest.rb:111:in `get_rest'
from /usr/lib/ruby/1.8/chef/client.rb:252:in `sync_cookbooks'
from /usr/lib/ruby/1.8/chef/client.rb:165:in `run'
from /usr/lib/ruby/1.8/chef/application/client.rb:222:in `run_application'
from /usr/lib/ruby/1.8/chef/application/client.rb:212:in `loop'
from /usr/lib/ruby/1.8/chef/application/client.rb:212:in `run_application'
from /usr/lib/ruby/1.8/chef/application.rb:62:in `run'
from /usr/bin/chef-client:26 
```

该错误看起来很普遍，因此找出原因并没有太大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T09:23:01.600

简短的回答：确保您已经安装了最新版本的 Chef Client。

* * *

长答案：

为了获得更多详细信息，首先要做的是在 client.rb 文件中启用更好的日志记录。通常，您可以通过在 /etc/chef/client.rb 中添加以下行来做到这一点：

```
log_level :debug 
```

这已经向我展示了客户端试图访问的资源：

```
[Wed, 17 Apr 2013 16:46:10 +0200] DEBUG: Sending HTTP Request via GET to  
    chef.xxxxxx.xxxxx.com:443/nodes/node-apache1.xxxxxx.com/cookbooks  
[Wed, 17 Apr 2013 16:46:10 +0200] ERROR: Running exception handlers  
[Wed, 17 Apr 2013 16:46:10 +0200] ERROR: Exception handlers complete  
[Wed, 17 Apr 2013 16:46:10 +0200] DEBUG: Re-raising exception:   
Net::HTTPServerException - 404 "Object Not Found" 
```

这是一个不存在的资源，因为系统管理员从 Opscode 的 Ubuntu 存储库安装了客户端，而这不是它的最后一个版本，它与 Chef Server 11 不兼容。我让他**安装最新版本的客户端**来自[Opscode.com 上的 Chef Client 安装页面](http://www.opscode.com/chef/install/)

如您所见，您可以下载所需的软件包或直接运行

```
curl -L https://www.opscode.com/chef/install.sh | sudo bash 
```

对于最新版本。

运行 chef-client 现在一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-16T11:23:18.633

PS：我不确定这对其他人是否有帮助，但我设法通过以下方式解决了同样的问题。

如果你 ssh 进入盒子然后运行这个命令

> sudo chef-client --runlist "your_cookbook_name"

它将提示确切的错误。所以你可以根据错误采取措施。

就我而言，当我检查上述方法时，BDW。我发现我没有`Environment`在[https://manage.chef.io/](https://manage.chef.io/)中创建。

# java - 在 jar 中引用 jar

> ID：16079125
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:23:03.643
> 
> 标签：java, reference, manifest, onejar

我有一个通过清单文件引用其他 6 个 jar 的 jar 文件。

但是，我现在想尝试将 jar 编译到一个 jar 文件中，原因是：我希望将它们缓存起来，这样小程序的加载时间就不会很长，因为需要这些 jar 之一，而不是等待很长时间下载所有必需的文件，然后将其存储在缓存中。

我尝试在构建中包含引用的 Jar 文件，不幸的是，这一切都会导致 java.lang.NoClassDefFoundError 错误，所以我不得不添加一个清单文件。

实现这一目标的最佳/最简单方法是什么？我正在使用 eclipse，而不是用 ant 构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:25:34.063

在导出时使用 eclipse，您可以使用将 *所需库打包到生成 JAR的选项来创建*

通过这样做，eclipse 使用它自己的类加载器并引用打包在一个 jar 中的所有文件。

# asp.net - 如何使用 Linq 检查返回此对象的值

> ID：16079126
> 
> 赞同：1
> 
> 时间：2013-04-18T09:23:05.200
> 
> 标签：asp.net, linq

我有 2 个相关的课程：

```
public class BankHolidayColl
{
     public List<BankHoliday> BankHoliday { get; set; }
}

public class BankHoliday
{
    public string Name { get; set; }
    public DateTime Date { get; set; }
} 
```

我删除了一些属性，但是这个对象是从 xml 文件构建的，如下所示：

```
var bankHoliday = GetBankHolidaysFromXml(); 
```

属性 bankHoliday.BankHoliday 让我可以访问名称和日期列表（这些名称是银行假日的名称）。

通过提供日期，我想检查列表是否包含日期，如果包含则返回名称。一段时间以来，我一直试图获得正确的组合，但没有成功。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:26:26.120

您可以使用**Where**按日期过滤，然后**Select**仅获取您的姓名**FirstOrDefault**，如果没有这样的值，它将返回 null 或假期的名字（如果存在）

```
var result = BankHoliday
.Where(hol => hol.Date == youDate)
.Select(hot => new { hol.Name })
.FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:27:05.140

```
var _result = BankHolidayColl.Where(x => x.Date == youDate)
                            .Select(x => new {Name=x.Name}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:27:37.660

使用[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)，例如：

```
public class BankHolidayColl
{
    public List<BankHoliday> BankHoliday { get; set; }

    public BankHoliday GetBankHoliday(DateTime date)
    {
        if (BankHoliday == null || BankHoliday.Count == 0)
            return null;
        return BankHoliday.FirstOrDefault(h => h.Date.Date == date.Date);
    }
} 
```

然后你得到或具有给定日期`null`的第一个实例：`BankHoliday`

```
BankHoliday bh = myBankHolidayColl.GetBankHoliday(DateTime.Now);
if(bh != null)
{
    string bhName = bh.Name;
} 
```

如果您坚持使用仅返回名称的方法，请添加：

```
public string GetBankHolidayName(DateTime date)
{
    if (BankHoliday == null || BankHoliday.Count == 0)
        return null;
    return BankHoliday.Where(h => h.Date.Date == date.Date)
                      .Select(h => h.Name)
                      .FirstOrDefault();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T09:29:58.870

你可以试试这个

```
BankHoliday.Where(b => b.Date == someDate).Select(b => b.Name) 
```

# javascript - 上传按钮不会以编程方式触发

> ID：16079129
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:23:15.030
> 
> 标签：javascript, jquery, button, click

我有一个按钮，我想使用“upclick”插件上传文件

```
<script type="text/javascript" src="~/Scripts/upclick-min.js"></script>

<input type="button" id="uploader" value="Upload" >

<script type="text/javascript">

   var uploader = document.getElementById('uploader');

   upclick(
     {
      element: uploader,
      action: '/path_to/you_server_script.php', 
      onstart:
        function(filename)
        {
          alert('Start upload: '+filename);
        },
      oncomplete:
        function(response_data) 
        {
          alert(response_data);
        }
     }); 
```

现在按钮本身可以工作并打开“打开文件”对话框，但我似乎无法以编程方式触发“点击”事件。我尝试了所有不同的语法编写方式：

```
if (ui.draggable.hasClass('ui-dragdrop-picElement')) {
                        //$("uploader").trigger("click");
                        //$("uploader").click();
                        //$('uploader').click();
                        //$('#uploader').click();
                        //$("#uploader").click(); 
                        //$("#uploader").trigger("click");  
                        //$('button#uploader').trigger('click');
                        $('#uploader').trigger('click'); 
                        alert("w00t");

                    } 
```

等等-知道为什么它不会触发-我收到警报消息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:25:41.967

```
$("uploader")... 
```

这是无效的。没有`<uploader>`元素。

您的最后一个`.click`使用正确的选择器，但您希望在`.trigger()`事件中使用它：

```
$("#uploader").trigger("click"); 
```

通过阅读官方 jQuery 教程，您可能会受益匪浅：http: [//try.jquery.com](http://try.jquery.com)。

# ruby - 在 RUBY 中实现 amazon Simple nodification 服务

> ID：16079130
> 
> 赞同：1
> 
> 时间：2013-04-18T09:23:15.167
> 
> 标签：ruby, amazon-web-services, amazon-sns

我正在尝试使用 ruby​​ 实现亚马逊 SNS。我想创建一个主题，删除一个主题，订阅一个主题，发布到一个主题。这些都包含在以下代码中。

```
#!/usr/bin/env ruby
require 'rubygems'
require 'aws-sdk'
AWS.config(:access_key_id => 'BT62W53Q', :secret_access_key => '0Edwg')
@sns=AWS::SNS.new

#D requirements
alpha = @sns.topics.create('CSC470Test-Alpha')

@sns.topics.create('CSC470Test-Beta')
temp=gets
@sns.topics.each do |topic|
  puts topic.name
  if(topic.name=='CSC470Test-Beta')
    topic.delete
  end
end
puts
puts 'Beta now deleted.'
puts
@sns.topics.each do |topic|
  puts topic.name
end
puts
temp=gets
puts
#C requirements
@sns.topics.each do |topic|
  if(topic.name=='CSC470Test-Alpha')
    subbed1=false
    subbed2=false
    subbed3=false
    topic.subscriptions.each do |sub|
      if(sub.endpoint=='sn@aine.com')
        subbed1=true;
      end
      if(sub.endpoint=='pran@aine.com')
        subbed2=true;
      end
      if(sub.endpoint=='http://cloud.comtor.org/csc470logger/logger')
        subbed3=true;
      end
    end
    if(!subbed1)
      puts 'Subscribed sika.'
      topic.subscribe('sn@aine.com')
    end
    if(!subbed2)
      puts 'Subscribed prka'
      topic.subscribe('pran@aine.com', :json => true)
    end
    if(!subbed3)
      puts 'Subscribed comtor site.'
      topic.subscribe('http://cloud.comtor.org/csc470logger/logger')
    end
  end
end
temp=gets
puts 'Topics with info:'
@sns.topics.each do |topic|
  puts
  puts 'Arn'
  puts topic.arn
  puts 'Owner'
  puts topic.owner
  puts 'Policy'
  puts topic.policy
  puts 'Name'
  puts topic.display_name
  puts 'Confirmed Subscriptions:'
  puts topic.subscriptions.
    select{ |s| s.arn != 'PendingConfirmation' }.
    map(&:endpoint)
# if(subs.confirmation_authenticated?)
  # puts 'Arn: ' + subs.arn
  # puts 'Endpoint: ' + subs.endpoint
  # puts 'Protocol: ' + subs.protocol
 # end
end
puts
temp=gets
@sns.subscriptions.each do |subs|
  puts "SubscriptionARN: #{ subs.arn} "
  puts "TopicARN: #{subs.topic_arn} "
  puts "Owner: #{subs.owner_id} "
  puts "Delivery Policy: #{ subs.delivery_policy_json} "
  end 
```

在 Rails 控制台中运行此代码时。我收到此错误

```
C:/ProgramData/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/aws-sdk-1.8.5/l
ib/aws/core/client.rb:339:in `return_or_raise': The request signature we calcula
ted does not match the signature you provided. Check your AWS Secret Access Key
and signing method. Consult the service documentation for details. (AWS::SNS::Er
rors::SignatureDoesNotMatch)
        from C:/ProgramData/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/aw
s-sdk-1.8.5/lib/aws/core/client.rb:440:in `client_request'
        from (eval):3:in `create_topic'
        from C:/ProgramData/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/aw
s-sdk-1.8.5/lib/aws/sns/topic_collection.rb:24:in `create' 
```

# java - 使用来自控制台 JAVA 的参数

> ID：16079137
> 
> 赞同：1
> 
> 时间：2013-04-18T09:23:29.103
> 
> 标签：java, console

我想在 ubuntu 中使用来自控制台的参数

> ./myTool -ip 1.2.3.4

我怎样才能在我的代码中使用 1.2.3.4

```
public static void main(String[] argv) throws Exception
{

    for(int i=0;i<argv.length;i++)
    {
        if (argv[i].equals("-ip"))
        {

         ping(80,"The ip that i want(1.2.3.4)")
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:26:10.917

尝试：

```
public static void main(String[] argv) throws Exception
{
    for(int i=0;i<argv.length;i++)
    {
        if (argv[i].equals("-ip") && argv.length > i+1)
        {
            ping(80, argv[i+1]);
        }
    }
} 
```

假设你实施`ping`了，当然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:30:32.510

对于解析 cmdline 参数的更通用方法，我建议使用现有框架之一 - 它们为您完成所有繁重的工作。

看看[JOpt Simple](http://pholser.github.io/jopt-simple/) - 例如，这个是使用的。OpenJDK。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T09:32:04.333

您可以将所需的行为封装到您自己设计的对象中，也可以使用已经存在的对象，例如来自 Apache[的对象。](http://commons.apache.org/proper/commons-cli/)

您必须确保它们成对出现。像这样的东西：

```
public static Map<String, String> getArgsMap(String [] args) { 
    Map<String, String> pairs = new HashMap<String, String>();
    if ((args != null) && (args.length > 1) && (args.length % 2) == 0) {
        for (int i = 0; i < args.length; i += 2) {
            pairs.put(args[i], args[i+1]);
        }
    }
    return pairs;
} 
```

# php - 如何使用 Spring RestTemplate 将 json 数据发送到 PHP 服务器

> ID：16079142
> 
> 赞同：2
> 
> 时间：2013-04-18T09:23:38.540
> 
> 标签：php, spring, resttemplate

我正在开发一个 android 应用程序，我使用 spring RestTemplate 从 PHP 服务器获取数据并将数据发布到 PHP 服务器。我试图将数据发布到 PHP 服务器，但 PHP 服务器一无所获。如何使用 Spring RestTemplate 将 json 数据发布到 PHP 服务器并从 PHP 服务器获取 json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T01:17:11.697

我自己解决了这个问题。我像这样将 FormHttpMessageConverter 添加到 RestTemplate ：

RestTemplate restTemplate = new RestTemplate(); restTemplate.getMessageConverters().add(new FormHttpMessageConverter());

然后我可以将 json 数据发布到 PHP 服务器。我使用以下方法在 PHP 服务器中获取了 json 数据：

$jsonData = $_POST['json'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T12:29:51.023

我修复了

```
MultiValueMap<String, ArrayList<persona>> parts = new LinkedMultiValueMap<>();

parts.add("json", aaper);    

restTemplate.postForLocation(url,parts); 
```

# java - 从互联网上获取 xml 提要并将其放入我的资产中

> ID：16079143
> 
> 赞同：1
> 
> 时间：2013-04-18T09:23:39.423
> 
> 标签：java, android, xml, feed, assets

目前我正在开发一个 android 应用程序，我正在使用从互联网获取的 xml 提要。问题是当我的手机没有互联网连接时，我的应用程序崩溃了。我想获取我的 xml 文件并将其放入资产中。

我的问题是：有可能吗？如果是的话，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:34:51.670

在运行时编写 xml 文件或文件`assets`夹中的任何文件是不可能的。文件夹中的文件夹或资源`res`是**“只读的”**，但您可以在应用程序的内部数据文件夹中写入 XML 文件。

只需使用`Context.openFileInput(String)`and `Context.openFileOutput(String, int)`。[这里](http://developer.android.com/reference/android/content/Context.html#openFileInput%28java.lang.String%29)

**更新 1**：

你可能会想到这个问题。

`"If I write an XML file on my app's data folder, how to parse it?"`

您可以使用`XMLPullParser`类来解析 XML 文件。这是一个例子

```
XMLPullParser parser = Xml.newPullParser();
parser.setInput(new InputStreamReader(openFileInput("my_XML_file.xml"))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:42:36.863

1.  **检查网络连接：**

    ```
     public static boolean isConnectedToInternet(Context context) {
        ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity != null)
        {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null)
                for (int i = 0; i < info.length; i++)
                    if (info[i].getState() == NetworkInfo.State.CONNECTED)
                    {
                        return true;
                    }
        }
        return false;
    } 
    ```

2.  **下载 XML 字符串**

    ```
     public String getXMLString(String url) {

        try
        {
            URL url1 = new URL(url);
            URLConnection tc = url1.openConnection();
            tc.setConnectTimeout(timeout);
            tc.setReadTimeout(timeout);
            BufferedReader br = new BufferedReader((new InputStreamReader(tc.getInputStream())));
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null)
            {
                sb.append(line + "\n");
            }
            br.close();
            return sb.toString();
        } catch (Exception e)
        {
            Log.d("Error", "In XMLdownloading");
        }

        return null;
    } 
    ```

3.  **将字符串保存到 SD 卡中的任意目录：**

    ```
     private void writeStringToTextFile(String s, String f) {

        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File(sdCard.getAbsolutePath());
        dir.mkdirs();

        File file = new File(dir, f);
        try
        {
            FileOutputStream f1 = new FileOutputStream(file, false);
            PrintStream p = new PrintStream(f1);
            p.print(s);
            p.close();
            f1.close();
        } catch (FileNotFoundException e)
        {
        } catch (IOException e)
        {
        }
        }
        } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T09:29:46.770

将此方法添加到您的活动中：

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager
            .getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

并在 onCreate 或在您加载提要检查之前，如下所示：

```
 if (!isNetworkAvailable()) {
            Toast.makeText(
                    Player.this,
                    "No active internet connection found.",
                    Toast.LENGTH_LONG).show();
            finish();
            return;
        } 
```

# compilation - mpif90 -v 不创建带有 openmp 标志的目标文件

> ID：16079145
> 
> 赞同：1
> 
> 时间：2013-04-18T09:23:52.560
> 
> 标签：compilation, mpi, gfortran

我正在用 mpif90 编译一个第三方软件，在我的例子中是 gcc 的 mpi 版本。该软件包带有一个生成文件。编译目标文件后，makefile 使用 ar 创建存档，但由于没有输入目标文件而失败。实际上，我尝试使用手动编译目标文件（.o）

```
mpif90 -lmkl_gf -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -openmp -O3  -DMPI -c a.f90 
```

并且没有创建 ao，而是创建了一个 .mod 文件。我对fortran没有太多经验，我有点困惑，因为-c标志应该创建一个对象，不是吗？

如果我删除标志 openmp，我已经验证 gfortran 确实会创建目标文件

* * *

笔记：

```
mpif90 -v
gcc version 4.4.3 
```

操作系统：Ubuntu 10.04.4 LTS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:41:14.730

我将标志 openmp 更改为 fopenmp

[http://gcc.gnu.org/onlinedocs/gfortran/OpenMP.html](http://gcc.gnu.org/onlinedocs/gfortran/OpenMP.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T05:19:21.497

万一将来有人遇到这个问题...... OP 使用的标志特定于 intel fortran 编译器，而 mpif90 包装器似乎正在使用 gfortran 编译器。将 OpenMP 与 gfortran 一起使用的正确标志是 -fopenmp，而库是 -lgomp。可以将英特尔库与不同供应商的编译器一起使用，但最容易坚持使用一个供应商。

# ruby-on-rails - after_commit 回调中的 Globalize.with_locale 不会改变任何东西

> ID：16079146
> 
> 赞同：1
> 
> 时间：2013-04-18T09:23:53.283
> 
> 标签：ruby-on-rails, callback, globalize3, rails-i18n

在 after_commit 回调中更新缓存属性时，我遇到了 Globalize3 gem 的问题。

```
#In My Model
after_commit :write_localized_caches
private
def write_localized_caches
  I18n.available_locales.each do |locale|
    Globalize.with_locale(locale) do
      self.write_attribute(:name, 'some localized string here')
    end
  end
end 
```

它启动 after_commit callbach 并且该属性的值很好。但毕竟我的模特名字还是空的！

也许我在滥用`with_locale`或有人遇到同样的问题吗？

**更新 1.** 我肯定想使用 after_commit 回调对保存的对象执行复杂的查询。在回调中打印出 self.name 会返回我想要的：'correct_string'。但是 id 没有命中数据库。最后写了一个新的翻译作品。似乎 Globalize 在其地下室使用回调：

```
def write_localized_caches
I18n.available_locales.each do |locale|
  Globalize.with_locale(locale) do
    self.translations.create!(name: 'some localized string here', locale: locale)
  end
end
end 
```

这可行，但我仍然觉得不对劲！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:39:05.240

在数据库完成保存记录后调用提交后。

如果您插入打印语句，例如

```
def write_localized_caches
  puts self.name # the name that you're seeing in the database

  # Globalize Block

  puts self.name # The name that was set above most likely
end 
```

还要记住，从回调中返回 false 或 nil 将中止回调链并反转数据库事务。不过，after_commit 是在事务完成后调用的，所以这里没那么重要。

你可能想要 before_save。 [http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# r - readHTMLTables -- 检索与政府首脑相关的文章的国家名称和网址

> ID：16079147
> 
> 赞同：3
> 
> 时间：2013-04-18T09:23:53.517
> 
> 标签：r, web-scraping

我想制作一张真实世界总统的地图。

为此，我想从维基百科中抓取每位总统的图像。

第一步是从 wiki 页面获取数据： [http ://en.wikipedia.org/wiki/List_of_current_heads_of_state_and_government](http://en.wikipedia.org/wiki/List_of_current_heads_of_state_and_government)

我无法获取国家/地区名称和总统页面网址，因为该表具有行跨度。

目前，我的代码如下所示，但由于行跨越，所以不行。

```
 library(XML)    
    u = "http://en.wikipedia.org/wiki/List_of_current_heads_of_state_and_government"
    doc = htmlParse(u)
    tb = getNodeSet(doc, "//table")[[3]]

    stateNames <- readHTMLTable(tb)$State
    presidentUrls <- xpathSApply(tb, "//table/tr/td[2]/a[2]/@href") 
```

欢迎任何想法！

垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:18:33.767

如果表中存在异质性，我认为我们不能通过一行代码来处理这个问题。在您的情况下，有些`td`有`colspan=2`，而另一些则没有。因此可以使用如下过滤器单独选择和处理它们：

```
 nations1 <- xpathSApply(tb, "//table/tr[td[@colspan='2']]/td[1]/a/text()")
    nations2 <- xpathSApply(tb, "//table/tr[count(td)=3]/td[1]/a/text()") 
```

如果您满足表中的其他类型条件，请记住 XPath 有更多条件。

# excel - Excel VBA If Then 循环条件

> ID：16079153
> 
> 赞同：1
> 
> 时间：2013-04-18T09:24:03.547
> 
> 标签：excel, vba, loops, if-statement

这几天我一直在为此苦苦挣扎。任何帮助将不胜感激！

这很难解释，所以我会尽力而为。

我要做的是计算每个查询的结果数，然后根据该结果数对它们进行分类。

例如，如果 Query_A 有 1 个准确结果，然后 Query_Z 有 1 个准确结果，那么总共有 2 个查询有 1 个结果。

我目前正在尝试将 Loop 与 if then 语句一起使用，但我不知所措。

这是一些示例数据和我希望的输出：[Query_Example_Data_and_Results.xlsx](http://www.seoknow.us/Query_Example_Data_and_Results.xlsx) - 这不是我真正的电子表格，因为它包含数千行数据和非常大的文件大小。

下面的代码确实提取了查询计数（删除查询重复），但没有给出查询结果计数。我会提供我的代码尝试，但我知道我什至没有接近...所以我删除了我的失败的尝试希望我足够清楚以引导正确的方向。

```
Sub Query_Count()

G_40 = 0

Query = ""

Application.StatusBar = " ~~ ~~ QUERY COUNT ~~ RUNNING ~~ ~~ " & x

x = 2

Do Until Sheets(1).Cells(x, 1) = ""

    If Sheets(1).Cells(x, 9) = "Yes" Then
    If Query <> Sheets(1).Cells(x, 1) Then
        G_40 = G_40 + 1
    End If
    End If
    Query = Sheets(1).Cells(x, 1)

x = x + 1

Loop

Application.StatusBar = "DONE RUNNING QUERY COUNT OF " & x & " ROWS!"

G = 40
Sheets(3).Cells(G, 7) = G_40 'query_count:

End Sub 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:11:38.087

根据您的示例，此代码将完成这项工作：

```
Option Explicit

Sub getResults()
    Application.ScreenUpdating = False

    Dim ws1 As Worksheet, ws2 As Worksheet, lr&
        Set ws1 = ThisWorkbook.Sheets("Example_Query_Data")
        Set ws2 = ThisWorkbook.Sheets("Example_Results")
        lr = ws1.Range("A" & Rows.count).End(xlUp).Row

    Dim arr() As String, i&, j&, cnt&
    Dim varr() As String
    cnt = 0

    ReDim arr(lr - 2)
    For i = 2 To lr
        arr(i - 2) = CStr(ws1.Range("A" & i).Value) ' fill array
    Next i
    Call RemoveDuplicate(arr) 'remove duplicate
    ReDim varr(0 To UBound(arr), 0 To 1)
    For i = LBound(arr) To UBound(arr)
        varr(i, 0) = arr(i)
        varr(i, 1) = getCount(arr(i), ws1, j, lr)
    Next i

    Call PrepTable(ws2)
    Call UpdateTable(ws2, ws1, varr, j, lr) ' Update table

    Application.ScreenUpdating = True
End Sub

Function getCount(qName$, ByRef ws1 As Worksheet, ByRef i&, lr&)
    Dim count&
    count = 0
    For i = 2 To lr
        If (StrComp(CStr(ws1.Range("A" & i).Value), qName, vbTextCompare) = 0) And _
              (StrComp(CStr(ws1.Range("C" & i).Value), "Yes", vbTextCompare) = 0) Then count = count + 1
    Next i
    getCount = count ' return count
End Function

Sub UpdateTable(ByRef ws As Worksheet, ByRef ws2, ByRef arr() As String, ByRef i&, lr&)
    Dim tblIter&
    For tblIter = 2 To 12
        For i = LBound(arr) To UBound(arr)
            If arr(i, 1) = tblIter - 1 Then
                ws.Range("B" & tblIter).Value = ws.Range("B" & tblIter).Value + 1
            End If
        Next i
    Next tblIter
    Call ElevenAndMore(ws, ws2, arr, lr, i)
End Sub

Sub PrepTable(ws As Worksheet)
    ws.Range("B2:B12").ClearContents
End Sub

Sub ElevenAndMore(ByRef ws As Worksheet, ByRef ws2, ByRef arr() As String, lr&, ByRef i)
    Dim cnt&, j&
    cnt = 0
    For i = LBound(arr) To UBound(arr)
     For j = 1 To lr
        If StrComp(CStr(ws2.Range("A" & j).Value), arr(i, 0), vbTextCompare) = 0 Then
            cnt = cnt + 1
        End If
     Next j
     If cnt > 10 Then ws.Range("B12").Value = ws.Range("B12").Value + 1
     cnt = 0
    Next i
End Sub

Sub RemoveDuplicate(ByRef StringArray() As String)
    Dim lowBound$, UpBound&, A&, B&, cur&, tempArray() As String
    If (Not StringArray) = True Then Exit Sub ' is empty?
    lowBound = LBound(StringArray)
    UpBound = UBound(StringArray)
    ReDim tempArray(lowBound To UpBound)
    cur = lowBound ' first item
    tempArray(cur) = StringArray(lowBound)
    For A = lowBound + 1 To UpBound
        For B = lowBound To cur
            If LenB(tempArray(B)) = LenB(StringArray(A)) Then
                If InStrB(1, StringArray(A), tempArray(B), vbBinaryCompare) = 1 Then Exit For
            End If
        Next B
        If B > cur Then cur = B: tempArray(cur) = StringArray(A)
    Next A
    ReDim Preserve tempArray(lowBound To cur) ' reSize
    StringArray = tempArray ' copy
End Sub 
```

***评论后编辑：*** 更改这三个：

将 +28 添加到 tblIter

```
Sub UpdateTable(ByRef ws As Worksheet, ByRef ws2, ByRef arr() As String, ByRef i&, lr&)
    Dim tblIter&
    For tblIter = 2 To 12
        For i = LBound(arr) To UBound(arr)
            If arr(i, 1) = tblIter - 1 Then
                ws.Range("B" & tblIter + 28).Value = ws.Range("B" & tblIter + 28).Value + 1
            End If
        Next i
    Next tblIter
    Call ElevenAndMore(ws, ws2, arr, lr, i)
End Sub 
```

只需将位置更改为 B40

```
Sub ElevenAndMore(ByRef ws As Worksheet, ByRef ws2, ByRef arr() As String, lr&, ByRef i)
    Dim cnt&, j&
    cnt = 0
    For i = LBound(arr) To UBound(arr)
     For j = 1 To lr
        If StrComp(CStr(ws2.Range("A" & j).Value), arr(i, 0), vbTextCompare) = 0 Then
            cnt = cnt + 1
        End If
     Next j
     If cnt > 10 Then ws.Range("B40").Value = ws.Range("B40").Value + 1
     cnt = 0
    Next i
End Sub 
```

和准备表变化范围

```
Sub PrepTable(ws As Worksheet)
    ws.Range("B30:B40").ClearContents
End Sub 
```

这应该做！

# java - InputMap/ActionMap 在打开 SubDialog 后不起作用

> ID：16079155
> 
> 赞同：1
> 
> 时间：2013-04-18T09:24:06.187
> 
> 标签：java, dialog, keystroke

我试图在按 ESC 时关闭对话框，并在按 ENTER 时接受。因此，我使用 Input/ActionMap 构建了一个超类“CloseableDialog”，如下所示：

```
 getRootPane().getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "accept");
    getRootPane().getActionMap().put("accept", acceptAction);

    getRootPane().getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), "cancel");
    getRootPane().getActionMap().put("cancel", cancelAction); 
```

现在我构建了几个扩展 CloseableDialog 的对话框。它在第一次时按方面工作（按 ESC 时关闭，按 ENTER 时接受），但是当我打开子对话框（对话框中的对话框）时，只有子对话框可以通过按 ESC 关闭（ESC -> 子对话框关闭，其他对话框可见 -> ESC-> 什么都没有发生）。

有任何想法吗？

我认为，处理后的 SubDialog 仍然可以获得另一个 Dialog 的输入，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:59:07.080

**当组件聚焦时，**快捷方式起作用。我认为焦点不在您之前打开的窗口中。尝试将焦点返回到您需要快捷方式正常工作的窗口。尝试在该窗口上单击并应用快捷方式。也许它会起作用。否则你必须处理[焦点到窗口](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:52:55.770

我懂了！

阅读[http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)告诉我，有三个 InputMap：

*   JComponent.WHEN_FOCUSED
*   JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT
*   JComponent.WHEN_IN_FOCUSED_WINDOW

通过调用 getRootPane.getInputMap() 我得到了“默认” WHEN_FOCUSED Inputmap，但是通过调用 Subdialog，rootPane 似乎失去了焦点，没有任何帮助让焦点恢复。

现在我正在使用 getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(...) 并且它有效。

我有点惊讶，在打开子对话框之前它一直有效。

# excel - 使用excel中的宏偏移/更改所选单元格中公式中的所有行号

> ID：16079156
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:24:17.267
> 
> 标签：excel, row, formula, offset, vba

我有大量的辅助行使用一个简单的`sum`函数从不同的工作表中获取信息：

```
=SUM('HIS-WOT'!J36,'HIS-WOT'!J82,'HIS-WOT'!J128) 
```

是否有一个宏可以让我以相等的数量（即**221**）更改/偏移多个选定单元格中的所有行号以获得公式，例如：

```
=SUM('HIS-WOT'!J257,'HIS-WOT'!J333,'HIS-WOT'!J349) 
```

我需要更改各种行号的数量会有所不同，因此宏需要有一个对话框，允许用户选择用户想要增加或减少行号的程度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:29:07.600

此代码将创建一个虚拟表来复制公式，我喜欢你的问题！

```
Sub test()

    Dim nbr As Long, cel As Range, cels As Range, sh As Worksheet
    Set cels = Selection

    nbr = CLng(InputBox("Enter offset:"))

    Set sh = Worksheets.Add

    For Each cel In cels

        If cel.HasFormula Then

            sh.Cells(cel.Row + nbr, cel.Column).FormulaR1C1 = cel.FormulaR1C1
            cel.Formula = sh.Cells(cel.Row + nbr, cel.Column).Formula

        End If

    Next

    Application.DisplayAlerts = False
        sh.Delete
    Application.DisplayAlerts = True

End Sub 
```

# php - PHP：$object::method 和 $object->method 有什么区别？

> ID：16079159
> 
> 赞同：-2
> 
> 时间：2013-04-18T09:24:24.437
> 
> 标签：php, class, inheritance, methods

我总是写：

```
$object->method 
```

但我经常看到：

```
$object::method 
```

有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:26:12.520

-> 在引用对象的成员时使用。

:: 是范围解析运算符，用于引用类的静态成员。例如

```
class test {
    public static function vehicle() {
        echo "Bus";
    }

    public function automobile() {
        echo "Car";
    }
} 
```

您将调用函数汽车（）为

```
$test = new test();
$test->automobile(); 
```

并且您将车辆功能称为

```
test::vehicle(); 
```

# android - 如何从 KSOAP2 Android 中 SOAP 的 PropertyInfo 中删除 i:type="d:string"

> ID：16079165
> 
> 赞同：2
> 
> 时间：2013-04-18T09:24:32.280
> 
> 标签：android, web-services, soap, ksoap2

我正在使用 ksoap2-android-assembly-3.0.0-jar-with-dependencies.jar

我正在做一个需要以下肥皂请求的项目：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mod="http://www.tmforum.org/xml/tip/model" xmlns:cust="http://www.tmforum.org/xml/tip/customer/cust">
   <soapenv:Header/>
   <soapenv:Body>
      <mod:listProblemsRequest>
         <!--Optional:-->
         <mod:customer>

            <cust:iD >1100000677</cust:iD>
         </mod:customer>

      </mod:listProblemsRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

但使用 KSOAP2 我能够生成以下请求：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header />
   <v:Body>
      <retrieveCustomerProfileRequest xmlns="http://www.tmforum.org/xml/tip/model">
           <n0:customer xmlns:n0="http://www.tmforum.org/xml/tip/model">
               <n1:iD i:type="d:string" xmlns:n1="http://www.tmforum.org/xml/tip/customer      /cust">1100000990</n1:iD> 
   </n0:customer>
   </retrieveCustomerProfileRequest>
  </v:Body>
</v:Envelope> 
```

如何`i:type="d:string"`从 SOAP 请求中删除。

请提出可以在 KSOAP2 的源代码中完成的解决方案或任何解决方法，以便我能够生成适当的请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:10:19.787

我在 ksoap 中找到了解决问题的方法：

```
1\. Download the source code of Ksoap2.jar.
2.open up Transport .java and edit its :

    protected byte[] createRequestData(SoapEnvelope envelope, String encoding)
                throws IOException  

Method.

3.i edited it as follows:

protected byte[] createRequestData(SoapEnvelope envelope, String encoding)
            throws IOException {
        ByteArrayOutputStream bos = new ByteArrayOutputStream(bufferLength);
        byte result[] = null;
        bos.write(xmlVersionTag.getBytes());
        XmlSerializer xw = new KXmlSerializer();
        xw.setOutput(bos, encoding);
        envelope.write(xw);
        xw.flush();
        bos.write('\r');
        bos.write('\n');
        bos.flush();
        result = bos.toByteArray();
        xw = null;
        bos = null;

        String requestObject = new String(result);
        String pattern = "i:type=\"d:string\"";

        String resultString="";

        System.out.println("==earlier String==" + requestObject);
        if (requestObject.contains(pattern)) {

            System.out.println("==is it here ");
            resultString=requestObject.replace(pattern, "");

}

4.compile this class using classpath of ksoap2.jar
5.extract the ksoap2.jar and remove existing transport.class from it.
6.Add newly compiled .class file and make a new jar.
7.import the jar in your project.
Problem solved.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T17:15:23.243

确保您已设置这些`soap`信封属性：

```
 soapEnvelope.implicitTypes = true;
    soapEnvelope.dotNet = true; 
```

在`getPropertyInfo`返回字段的属性信息时，请确保您设置了正确的类型，例如：

```
 info.type = field.getClass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T14:00:08.333

你在哪里创作

```
SoapSerializationEnvelope sEnvelop; 
```

只需分配`sEnvelop.implicitTypes = true;`

它不会创建`"i:type="d:string"" or "i:type="d:long""`内部数据类型标签，并且 Web 服务可以成功执行

# django - Django + Strophe + ejabberd - 附加和群聊的麻烦

> ID：16079166
> 
> 赞同：1
> 
> 时间：2013-04-18T09:24:36.047
> 
> 标签：django, ejabberd, strophe

我尝试使用 strophe + ejabberd 来制作类似网络聊天的东西。

我已经做了什么：

*   当我登录网站时，我还向 ejabberd 进行身份验证（以实现 RID 和 SID），
*   登录完成后，我附加从上下文处理器获得的 RID 和 SID，
*   连接状态似乎是：连接建立，日志：

.

```
POST: <body rid='406266360' xmlns='http://jabber.org/protocol/httpbind' sid='9c66aa19123e96dc2925c24d4f985d458763eb67'><presence xmlns='jabber:client'><priority>-1</priority></presence><presence to='localhost/m' xmlns='jabber:client'><x xmlns='http://jabber.org/protocol/muc'/></presence></body>

RESP: <body xmlns='http://jabber.org/protocol/httpbind'><success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/></body> 
```

之后，连接挂起：

```
POST: <body rid='406266361' xmlns='http://jabber.org/protocol/httpbind' sid='9c66aa19123e96dc2925c24d4f985d458763eb67'/> 
```

当我现在尝试发送消息时（挂起时）：

```
POST: <body rid='406266362' xmlns='http://jabber.org/protocol/httpbind' sid='175e45333109f74c36f9dffbe4e3cc6cffc80df4'><message to='localhost' type='groupchat' xmlns='jabber:client'><body>yrdy</body></message></body> 
```

我越来越：

```
RESP: <body type='terminate' condition='remote-stream-error' xmlns='http://jabber.org/protocol/httpbind' xmlns:stream='http://etherx.jabber.org/streams'><stream:error><xml-not-well-formed xmlns='urn:ietf:params:xml:ns:xmpp-streams'/></stream:error></body> 
```

怎么了？奇怪的是，几秒钟后请求被中止，下一个请求再次挂起。当我尝试发送消息时，没有错误，但响应是：

```
RESP: <body xmlns='http://jabber.org/protocol/httpbind'/> 
```

没有错误（连接仍然连接并经过身份验证，但似乎没有传递消息）。

我用来发送消息的代码：

```
var body = $('#input_text').val();                                                            |        // make sure this presence is for the right room
var msg_body = {                                                                              |        if (room === Groupie.room) {
    to: Chat.room,                                                                       |            var nick = Strophe.getResourceFromJid(from);
    type: 'groupchat'                                                                         |
}                                                                                             |            if ($(presence).attr('type') === 'error' &&
var msg = $msg(msg_body).c('body').t(body);                                                   |                !Groupie.joined) {
                                                                                              |                // error joining room; reset app
Chat.connection.send(msg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:49:55.443

您可以使用 Strophe.js 像这样附加：

```
Chat.connection = new Strophe.Connection(Chat.BOSH_SERVICE_URL);
Chat.connection.attach(jid, sid, rid, onConnectHandler); 
```

*成功连接后，就会调用*onConnectHandler 。*从那时起，您不必再担心 SID 和 RID（直到重新加载页面）。*

 *另外，你知道[MUC strophe 插件](https://github.com/metajack/strophejs-plugins/tree/master/muc)吗？

如果你想使用/学习一些示例代码，我写了一些类似于你正在为[Plone](http://plone.org)做的东西，称为[collective.xmpp.chat](https://github.com/collective/collective.xmpp.chat)

javascript 可单独重用：[converse.js](http://conversejs.org)*

# iphone - 制作 UITableView 的问题

> ID：16079169
> 
> 赞同：-4
> 
> 时间：2013-04-18T09:24:40.437
> 
> 标签：iphone, ios, objective-c, xcode

嗨，我是 Xcode 编程新手，在创建`UITableView`.

我正在阅读很多教程，并且我创建了一个`TableViewController`.

我已经有一个`UIViewController`带有 xib 的文件，`UITableView`里面包含一个。

我已经在`TableViewController`子类中实现了必要的方法，但我不知道如何`TableView`在屏幕上显示。

我尝试将表委托设置为 ，`TableViewController`但表未显示，并且它链接`IBOutlet`到我的`UITableView`.

请有人告诉我我做错了什么。

对不起，我的英语不好

编辑：非常感谢您的帮助

这是我的该方法的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }
    FichaItem * item = [sucursales objectAtIndex:indexPath.section];
    cell.textLabel.text = [item.campos objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [item.datos objectAtIndex:indexPath.row];
    return cell;
} 
```

我真的看不出有什么问题，该代码几乎被复制和修改以显示我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:40:21.487

有多种方法可以实现这一目标。

**方式1** *（我正在这样做）*：

打开 viewController.h 并继承 UITableViewDelegate 和 UITableViewDataSource 协议。这看起来像这样：`@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>`

然后打开 XIB，将一个 UITableView 对象拖到您的视图中并将其连接起来：右键单击并从 tableView 拖动到左侧的文件所有者对象。选择 Delegate 并为 dataSource 重做它。

然后你只需要实现委托方法。你不需要继承 UITableViewController

**方式二**

子类 UITableViewController。将 UITableView 拖到您的视图中，并将“对象”添加到您的 XIB。然后将其类设置为您的 tableViewController 子类并将其与 tableView 挂钩。

可能还有其他几种方法可以做到这一点。但这些都是我熟悉的方式。

***编辑：*** 这是一个委托方法的示例实现。

```
NSArray *dataSource = @[@{@"title": @"myTitle", @"subtitle": @"mySubTitle"}, @{@"title": @"some other title", @"subtitle": @"some explanation"}];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"reusableCell"];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"reusableCell"];
    }

    // dataSource is an NSArray of NSDictionaries
    [[cell textLabel] setText:[[dataSource objectAtIndex:[indexPath row]] objectForKey:@"title"]];
    [[cell detailTextLabel] setText:[[dataSource objectAtIndex:[indexPath row]] objectForKey:@"subtitle"]];

    return cell;
} 
```

# sql - sql server 2008 和 2000 之间的合并复制

> ID：16079171
> 
> 赞同：1
> 
> 时间：2013-04-18T09:24:55.393
> 
> 标签：sql, sql-server-2008, sql-server-2000, replication, merge-replication

大家好，我有一个问题，我正在尝试在 2000 和 2008 两台服务器之间组织合并复制。我尝试了两种变体：

首先：我在 Sql server 2000 上进行了发布，当我尝试在 2008 年进行订阅时，我收到以下消息：“对于合并发布，订阅者的版本不能超过发布者的版本”。

第二个：我在 Sql server 2008 上发布，当我尝试在 2000 年订阅时，我收到以下消息：“要连接此服务器，您必须使用 SQL Server Management Studio 或 SQL Server Management Objects”

那么谁能给我很好的建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:45:45.283

如在[复制拓扑中使用多个版本的 SQL Server 中所述](http://msdn.microsoft.com/en-us/library/ms143241.aspx)：

> 对于合并复制，合并发布的订阅服务器可以是不晚于发布服务器版本的任何版本。

这意味着您必须使 SQL Server 2008 实例成为发布者，而 SQL Server 2000 实例成为订阅者。使用 SQL Server 2008 Management Studio 配置拓扑。

# backbone.js - 如何使用 RequireJS 从模块加载主干视图？

> ID：16079176
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:25:06.770
> 
> 标签：backbone.js, requirejs

```
define(['jquery','frameworkviews/BackbonePrototype','applicationPath/Module1/js/views/AppView1','applicationPath/Module2/js/views/AppView2'],   
function($,BackbonePrototype,AppView1,AppView2){
  function getViews(modules,type){
    var views= new Array();
    for ( var i = 0; i < modules.length; ++i) {
      var cmd = 'views[' + i + '] = new ' + modules[i]+'View.'+modules[i]+type + "View" + '() ;';
      eval(cmd);
      views[i].name = modules[i];
    }
    return views;
  }
}); 
```

* * *

我们正在开发一个带有骨干网和 RequireJS 的项目。我们的项目基于框架和模块架构。模块贡献主干视图（AppView1/AppView2 等），并由框架使用 RequireJS 动态加载，如上所示。我们面临的问题是，如果添加了新模块（例如 Module3），则需要再次使用上述框架代码修改为将 Module3 视图添加到定义块。有什么方法可以避免框架中的此类更改以及如何获取对新添加的模块视图的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:40:01.790

不要使用评估。那是邪恶的（没有双关语的意思）。
我假设这不是您的真实代码，因为您在这里没有返回任何内容。

关于你的问题，我想你会在这里找到你需要的一切：[Variable function names in Require & Backbone](https://stackoverflow.com/questions/15881811/variable-function-names-in-require-backbone)。

任何一种解决方案都适合您。

# sql - 带 Select 的 SQL IN 运算符

> ID：16079178
> 
> 赞同：1
> 
> 时间：2013-04-18T09:25:09.300
> 
> 标签：sql

我想在 SQL 中将 IN 运算符与 select 语句一起使用，但出现以下错误“无法对包含聚合或子查询的表达式执行聚合函数”。

我使用的代码如下所示：

```
select * from Table where ID in (select Units from Table2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:27:05.997

你有使用`WHEN`而不是`WHERE`

```
SELECT * FROM `Table` WHERE `ID` IN (SELECT `Units` FROM `Table2`) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:28:11.827

您应该在查询中使用`where`代替。`when`正确的查询将是：

```
select * from Table where ID in (select Units from Table2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:31:16.953

您应该尝试在第二个查询中选择特定的 ID 列，如下所示：

```
Select*from Table where ID IN (Select ID from Table2) 
```

# command-line - 如何使用批处理文件设置%variable%=%variable%

> ID：16079181
> 
> 赞同：0
> 
> 时间：2013-04-18T09:25:22.300
> 
> 标签：command-line

我有两个批处理文件。

文件一：

```
SET Variablex=0 
```

文件 b：

```
SET Variabley=1
SET %Variablex%=%Variabley%
ECHO %Variablex% 
```

结果是 0 而不是预期的 1。我尝试了各种选项，例如引号、感叹号等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:03:03.020

文件 b：

```
SET "Variabley=1"
SET "Variablex=%Variabley%"
ECHO %Variablex% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:32:55.980

当批处理文件 a 执行完毕后，VariableX 的值会丢失。如果您从文件 a 中调用文件 b，那么它应该可以工作。

# python - 当测试与正则表达式不对应时，我的脚本返回错误：“NoneType”对象没有属性“组”

> ID：16079185
> 
> 赞同：1
> 
> 时间：2013-04-18T09:25:28.147
> 
> 标签：python, regex, exception, python-2.x

我在这里的脚本应该以这种格式返回结果

```
[ {'heure':xxxx,'mid': xxxx,'type message': "e.g SMS.Message ", "Origine":xxx,"Destination":xxxx}] 
```

很好，但是没有 Type 消息，我刚刚添加了这个，所以我认为正则表达式不正确。:/ 当我添加一个没有看起来像正则表达式的数据的数据时，它也不起作用，所以我想我必须做一个`try:`-`except:`但我不知道怎么做。：/

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import re 
################################_Function EXTRACT_############################################### 

def extraire(data):
    ms = re.match(r'(\S+).*mid:(\d+).*(R:NVS:\w+)', data) # heure & mid 
    k = re.findall(r"/\S+", data ) # source & destination extracte 
    return {'Heure':ms.group(1), 'mid':ms.group(2),'Type Message':ms.group(3),"Origine":k[0],"Destination":k[1]}

#################################################################################################

tableau = []  
data3 = "12:07:32.546 mta         Messages       I Doc O:TCARVAL (NVS:SMTP/jack.reacher@example.de) R:NVS:VOICE/+45154245 mid:6500"
data4 = "12:07:41.391 mta         Messages       I Rep O:TCARVAL (NVS:SMTP/brad.alison@yow.en) R:NVS:**SMS.Message**/+39872422 mid:6500"
data5 = "12:07:32.546 mta         Messages       I Doc O:TCARVAL (NVS:VOICE/+69517412carval@ifremer.no) R:NVS:SMS.Message/+34659879 mid:6500"
data6 = "12:07:32.545 mta     Messages   I Doc O:TCARVAL Example@whitout-slash.com        R:NVS:VOICE/01020150405 mid:9797"
data_list = [ data3, data4,data5, data6]
tableau = [extraire(data) for data in data_list]
print tableau 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:31:31.113

将您的额外功能更改为此，因为`ms`即使没有匹配项，您也尝试访问属性。当没有匹配项时，`ms`是 None ：

```
def extraire(data):
    ms = re.match(r'(\S+).*mid:(\d+).*(R:NVS:\w+)', data) # heure & mid                                 
    print(str(ms))
    if(ms is not None):
        k = re.findall(r"/\S+", data ) # source & destination extracte                                  
        return {'Heure':ms.group(1), 'mid':ms.group(2),'Type Message':ms.group(3),"Origine":k[0],"Desti\
nation":k[1]}
    else:
        return {} 
```

顺便说一句，您的正则表达式似乎与您打算匹配的文本不匹配。`k`如果不包含您正在寻找的元素数量，您也可能会得到 List index out of range 错误 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:31:56.227

“mid”在“R:NVS”之后，所以你的模式有错误的顺序

```
12:07:32.546 mta         Messages       I Doc O:TCARVAL (NVS:SMTP/jack.reacher@example.de) R:NVS:VOICE/+45154245 mid:6500
                                                                                           1                     2 
```

因此，您需要将模式中的顺序更改为这样的

```
(\S+).*(R:NVS:\w+).*mid:(\d+) 
```

顺便提一句。你`\S+`期望匹配什么？在这里它将匹配字符串中的第一个非空白字符系列。

# embedded - 两条指令之间的 PC 值（程序计数器）

> ID：16079189
> 
> 赞同：1
> 
> 时间：2013-04-18T09:25:41.363
> 
> 标签：embedded, arm, program-counter

试图了解看门狗的原因。汇编程序片段如下：

```
fe813cf0:       2820            cmp     r0, #32
fe813cf2:       dbf0            blt.n   fe813cd6 <XYZ+0x10>
fe813cf4:       f04f 30ff       mov.w   r0, #4294967295 ; 0xffffffff
fe813cf8:       bd10            pop     {r4, pc} 
```

我从转储中获得的 PC 值是 fe813cf3。这是什么意思？我应该如何解释它？如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:28:24.283

如果是看门狗触发，那似乎表明处理器已挂起。在最坏的情况下，您正在捕获的状态可能已损坏。不知道你是如何得到“转储”的，所以很难说。

通常在 ARM 上，奇数地址表示想要切换到[Thumb](http://en.wikipedia.org/wiki/ARM_architecture#Thumb)指令集的跳转。

例如，请参阅[（分支交换）指令](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0040d/Cabdcdci.html)[的此文档`BX`](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0040d/Cabdcdci.html)：

> BX 指令跳转到指定寄存器中包含的地址。分支地址的第 0 位的值决定了在 ARM 状态还是 Thumb 状态下继续执行。
> 
> 可以以这种方式使用地址的位 0，因为：
> 
> *   所有 ARM 指令都是字对齐的。这意味着任何 ARM 指令地址的位 0 和 1 都将被忽略，因为这些位指的是地址的半字和字节部分。
>     
>     
> *   所有 Thumb 指令都是半字对齐的。这意味着任何 Thumb 指令的地址的位 0 都会被忽略，因为它指的是地址的字节部分。

但是，我很确定以上暗示 PC 从未真正*设置*为奇数地址，位 0 由分支指令清除。

# json - 我的 sed 正则表达式有什么问题

> ID：16079192
> 
> 赞同：0
> 
> 时间：2013-04-18T09:25:47.347
> 
> 标签：json, unix, sed

我有一个 sed 命令来替换格式中的 json 键值对

```
"XXXXX" : "YYYYY" 
```

或者

```
"XXXXX" : YYYYY 
```

这是我的 sed 命令，

```
sed -i  's/\("$\$XXXX\$\$\"\s*:\s*\"\)[^\"]*/\1YYYY/' 
```

现在我想修改上面的正则表达式来更新键值对。

例子：

```
"XXXXX" : "YYYYY" 
```

应该更新为

```
"XXXXX" : "ZZZZZ" 
```

和

```
"XXXXX" : YYYYY 
```

应该更新为

```
"XXXXX" : ZZZZZ 
```

请注意区别，如果 value 带有引号，则 value 应该用引号更新，并且 value 没有引号，它也应该更新它

这是我想出的 sed 命令，但它不起作用。

```
sed -i  's/\("$\$"qc.testset.ids"\$\$\"\s*:\s*"*\)[^\"]*/\1123123"*/' 
```

我在这里错过了什么？如何让我的正则表达式支持这两种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:15:43.693

使用可选的捕获组：

```
$ cat file
"XXXXX" : "YYYYY"
"XXXXX" : YYYYY
"XXXXX" : "YYYYY",  
"XXXXX" : YYYYY,

$ sed -r 's/^("XXXXX" : )(")?[^",]*(")?/\1\2ZZZZZ\3/' file
"XXXXX" : "ZZZZZ"
"XXXXX" : ZZZZZ
"XXXXX" : "ZZZZZ",  
"XXXXX" : ZZZZZ, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:28:45.893

这个 sed 也可以工作：

```
sed '/^"XXXXX"/{s/YYYYY/ZZZZZ/}' file 
```

# jquery - 从wordpress小部件框中检索文本框名称时出现Jquery问题

> ID：16079195
> 
> 赞同：0
> 
> 时间：2013-04-18T09:25:50.293
> 
> 标签：jquery, wordpress

当我尝试使用 jquery 从 wordpress 小部件中检索文本框名称时，它显示的名称不正确。这是小部件表单中的实际文本框

< input type="text" value="" name="widget-nw_widget[3][heading][]" class="widefat" >

而当我使用 jquery 提醒该字段的名称时，它会显示`widget-nw_widget[__i__][heading][]`.

这是用于获取名称属性的 jquery

```
alert( jqry( '.widget-content #ne_container .widefat' ).attr("name") ); 
```

# c# - 类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

> ID：16079201
> 
> 赞同：0
> 
> 时间：2013-04-18T09:26:11.580
> 
> 标签：c#, com

我尝试使用流动代码在 C# 中创建 WMPLib.IWMPFolderMonitorServices 来管理包含音乐的文件夹。

```
public partial class MainWindow : Window
    {
        private WMPLib.IWMPPlayer player;
        private WMPLib.IWMPFolderMonitorServices manageFolder;

        [DllImport("ole32.dll", ExactSpelling = true, PreserveSig = false)]
        [return: MarshalAs(UnmanagedType.Interface)]
        static extern void CoCreateInstance([In, MarshalAs(UnmanagedType.LPStruct)] Guid rclsid,
                                            [MarshalAs(UnmanagedType.IUnknown)] object pUnkOuter,
                                             CLSCTX dwClsContext,
                                            [In, MarshalAs(UnmanagedType.LPStruct)] Guid riid,
                                            [MarshalAs(UnmanagedType.IUnknown)] out object rReturnedComObject);

        public MainWindow()
        {
            InitializeComponent();

            Object instancePlayer = null;
            Guid guid_IWMPPlayer = typeof(WMPLib.IWMPPlayer).GUID;
            Guid guid_IUnknown = new Guid("00000000-0000-0000-C000-000000000046"); 
            try
            {
                CoCreateInstance(guid_IWMPPlayer, null, CLSCTX.CLSCTX_INPROC_SERVER, guid_IUnknown, out instancePlayer);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            }            
            Type type = Type.GetTypeFromCLSID(guid_IWMPPlayer);

            player = instancePlayer as WMPLib.IWMPPlayer;

            Object instanceFolder = null;
            Guid guid_IWMFolder = typeof(WMPLib.IWMPFolderMonitorServices).GUID;
            IntPtr ptr1, ptr2;

            try
            {
                ptr1 = Marshal.GetComInterfaceForObject(instancePlayer, type);
                Marshal.QueryInterface(ptr1, ref guid_IWMFolder, out ptr2);
                Marshal.PtrToStructure(ptr2, instanceFolder);
            }
            catch(Exception e)
            {
                MessageBox.Show(e.Message);
            }
            manageFolder = instanceFolder as WMPLib.IWMPFolderMonitorServices;
        }
    }
} 
```

我得到例外：

> 类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

在 ：

```
CoCreateInstance(guid_IWMPPlayer, null, CLSCTX.CLSCTX_INPROC_SERVER, guid_IUnknown, out instancePlayer); 
```

和例外：

> 值不能为空。参数名称：o

在第二个尝试块中。我在谷歌上搜索这个异常，但我无法修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:47:51.907

COM 中没有“创建接口的实例”之类的东西。充其量，您创建恰好实现接口的类（即对象）的实例。我不是迂腐；这是一个重要的区别。

知道您想要的接口（大概是因为您想调用在该接口中声明的方法）*绝对不会*告诉您如何获取实现它的对象。也许你调用 CoCreateInstance()。或者，也许您在必须首先获得的其他对象上调用一些“GetMonitoringServices()”方法。或者，也许您必须调用一些带有回调函数指针的“Subscribe()”方法，该回调函数指针接收接口指针作为参数。我不知道。您必须阅读类库的文档才能找到答案。

我对 WMP 自动化一无所知，但是从[IWMPFolderMonitorServices 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd563366%28v=vs.85%29.aspx)开始，走这条路并不难：

> 要使用此界面，您必须创建 Windows Media Player 11 控件的远程实例。有关远程处理的详细信息，请参阅[远程处理 Windows Media Player 控件](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564264%28v=vs.85%29.aspx)。

（您可能也应该阅读引用中链接的页面）

和：

> 通过 IWMPPlayer 调用 QueryInterface 检索指向 IWMPFolderMonitorServices 的指针。

好的。查看[IWMPPlayer 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd563514%28v=vs.85%29.aspx)：

> 通过调用 COM CoCreateInstance 方法检索指向 IWMPPlayer 接口的指针

这告诉我代码应该是这样的：

```
var player = new WindowsMediaPlayerClass(); 
var monitoringSvc = (WMPLib.IWMPFolderMonitorServices)player; 
```

我没有测试过代码。一些细节可能会关闭（命名空间等）。但你明白了。

最后，请注意第一个链接：

> IWMPFolderMonitorServices 接口已弃用。

您确实应该研究并了解为什么不推荐使用该界面。可能接口还在，但不能使用；或者它公开的功能在现代版本的 Windows 中被永久禁用；或者它不会被下一个版本的 WMP 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:26:00.653

如果您只需要创建媒体播放器的实例，只需执行以下操作：

```
WindowsMediaPlayerClass wmp = new WindowsMediaPlayerClass(); 
```

导入 WMPLib 时已创建 WindowsMediaPlayerClass。

# html - 将图像的最大高度设置为浏览器窗口高度

> ID：16079210
> 
> 赞同：0
> 
> 时间：2013-04-18T09:26:32.560
> 
> 标签：html, css, twitter-bootstrap

这是一个转贴，因为我在未登录的情况下提出了问题，因此无法评论我之前问题的答案。

我试图防止图像变得比浏览器窗口高，这样查看者就不必向下滚动才能看到图像的其余部分。

但是，我不知道如何将图像的最大高度设置为浏览器窗口的高度。

到目前为止，我有：

```
<!DOCTYPE html>
 <html>
 <head>
         <meta charset="utf-8">
         <title>TEST TITLE</title>
         <link rel="stylesheet" href="http://flip.hr/css/bootstrap.min.css">
 </head>

<body>

<div class="container">
        <img src="dovelow.jpg" alt="Dove">

</div><!-- .container -->

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:39:12.177

嘿，这是一个[jsfiddle](http://jsfiddle.net/PzExs/)

因为它的使用`jquery`应该是跨浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:53:55.370

`Or`向图像添加一个类：[见这个小提琴](http://jsfiddle.net/PzExs/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:19:25.800

更好的方法是，`width`改为低于`100%`like`87%`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T05:04:02.103

有趣的是，我一直在寻找同样的东西。在我的网站上，我曾经用来`max-height: 75%;`防止图像变得太大，但今天，我才注意到，它停止工作了。它可能在数周甚至数月前停止工作。所以这很令人失望。我认为这与最近的 Chrome 更新有关，或者可能与 WordPress 停止做的事情有关。

你知道，我的代码可能从来没有工作过。我只是认为它做到了。

无论如何，我一直在寻找解决方案并且非常气馁......直到我找到了这个小宝石：

[http://stanhub.com/how-to-make-div-element-100-height-of-browser-window-using-css-only/](http://stanhub.com/how-to-make-div-element-100-height-of-browser-window-using-css-only/)

原来，您需要的一些 CSS 涉及使用称为`vh`“视口高度”或`vw`“视口宽度”的单位。所以在我的例子中`max-height: 75vh;`，如果你想让图像不超过浏览器窗口的 75%。

所以无论你在计划什么，这肯定会有所帮助。

# c++ - 程序输出异常

> ID：16079212
> 
> 赞同：0
> 
> 时间：2013-04-18T09:26:44.227
> 
> 标签：c++

我有一个程序应该打印出 2 个像下面这样的列表，基本上相同的列表但向后，但是它第一次工作，但是它打印了一些奇怪的输出，我也会在下面显示。

```
0123456789
9876543210 
```

但是我从程序中得到的实际输出是这样的：

![样本输出](https://i.stack.imgur.com/O6jJ8.png)

谁能告诉我我的代码有什么问题，我不知道为什么我会得到这个输出。

```
void createFile(){
  ofstream myfile;
  myfile.open ("TEST1.txt");
  for(int x = 0; x < 10; x++){
   myfile << x << "\n";
  }
  myfile.close();
}

void popArray(int array1[]){
  ifstream infile("TEST1.txt");

  int x;
  while(infile >> array1[x]){
    cout << array1[x];
  }

}

void reverseList(int array2[]){
  for(int x = 9; x > -1; x--){
    cout << setw(2) << array2[x];
  }
} 

void checkLists(int array1[], int array2[], int sizeOfArray){
  for(int x = array1[1]; x < sizeOfArray; x++){
    for(int y = array2[1]; x < sizeOfArray; x++){
        if(x == y)
            cout << "Palindrome" << endl;
        else{
            cout << "Not" << endl;
        }
    }
  }

} 

int main()
{
  int array1[10];
  int array2[10];

  createFile();
  popArray(array1);

  cout << "\n";

  reverseList(array1);

  cout << "\n";
  checkLists(array1, array2, 10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:35:12.733

这是我认为的问题：

```
void popArray(int array1[]){
 ifstream infile("TEST1.txt");

 int x;
 while(infile >> array1[x]){
 cout << array1[x];
 }

} 
```

你永远不会指定 x 是什么。如果我了解您要做什么，我认为这应该可行：

```
void popArray(int array1[]){
 ifstream infile("TEST1.txt");

 int x;
 for (x=0; x < 10; x++){
  cout << array1[x];
 }

} 
```

多读一点。你在这里也有错误：

```
void checkLists(int array1[], int array2[], int sizeOfArray){
 for(int x = array1[1]; x < sizeOfArray; x++){
 for(int y = array2[1]; x < sizeOfArray; x++){
     if(x == y)
        cout << "Palindrome" << endl;
     else{
        cout << "Not" << endl;
    }
    }
   }

} 
```

我会做类似的事情：

```
bool checkLists(int array1[], int array2[], int sizeOfArray){

bool isPalindrome=true;
for(int x = 0; x < sizeOfArray; x++){

    if(array1[x] != array2[sizeOfArray-(x+1)]){
        isPalindrome = false;
        }
 }

return isPalindrome;
} 
```

然后在最后`main`你可能有：

```
if(checkLists(array1, array2, 10)){
 cout << "Is Palindrome\n";
}
else{
cout << "Is Not Palindrome\n";
} 
```

当我在做的时候，我也可以解决这个问题：

```
void reverseList(int array2[]){
for(int x = 9; x > -1; x--){
 cout << setw(2) << array2[x];
}
} 
```

将其更改为：

```
void reverseList(int array1[], int array2[]){
for(int i = 0; i < 10; i++){
  array2[9-i] = array1[i];
}
} 
```

我认为，如果您将我的答案的所有内容放在一起，您应该或多或少有一些有用的东西。虽然我自己没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:34:25.237

```
void popArray(int array1[]){
ifstream infile("TEST1.txt");

    int x;
    while(infile >> array1[x]){
       cout << array1[x];
    }

} 
```

您的循环没有改变`x`（或根本没有初始化`x`！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:34:12.670

```
for(int x = array1[1]; x < sizeOfArray; x++){
    for(int y = array2[1]; x < sizeOfArray; x++){if(x == y)
        cout << "Palindrome" << endl;
    else{
        cout << "Not" << endl;
    }
} 
```

我这个你应该用这个替换你的代码

```
 for(int x = 0; x < sizeOfArray; x++){
        for(int y = 0; y < sizeOfArray; y++){
if(array1[x]== array2[y])
            cout << "Palindrome" << endl;
        else{
            cout << "Not" << endl;
        }
    } 
```

# c# - 如何使用 Entity Framework 生成和自动递增 Id

> ID：16079217
> 
> 赞同：47
> 
> 时间：2013-04-18T09:27:11.983
> 
> 标签：c#, json, entity-framework, asp.net-web-api

**修改**了整个帖子。

我正在尝试通过 Fiddler 发布以下 JSON POST 请求：

```
{Username:"Bob", FirstName:"Foo", LastName:"Bar", Password:"123", Headline:"Tuna"} 
```

但是我收到了这个错误：

```
Message "Cannot insert the value NULL into column 'Id', table 'xxx_f8dc97e46f8b49c2b825439607e89b59.dbo.User'; column does not allow nulls. INSERT fails.\r\nThe statement has been terminated." string 
```

虽然如果我手动发送一个随机 ID 以及请求，那么一切都很好。像这样：

```
{Id:"1", Username:"Bob", FirstName:"Foo", LastName:"Bar", Password:"123", Headline:"Tuna"} 
```

为什么实体框架不生成并自动增加 ID？我的 POCO 课程如下：

```
public class User
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public string Id { get; set; }
    public string Username { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Password { get; set; }
    public string Headline { get; set; }
    public virtual ICollection<Connection> Connections { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
    public virtual ICollection<Phonenumber> Phonenumbers { get; set; }
    public virtual ICollection<Email> Emails { get; set; }
    public virtual ICollection<Position> Positions { get; set; }
}

public class Connection
{
    public string ConnectionId { get; set; }
    public int UserId { get; set; }
    public virtual User User { get; set; }
}

public class Phonenumber
{
    public string Id { get; set; }
    public string Number { get; set; }
    public int Cycle { get; set; }
    public int UserId { get; set; }
    public User User { get; set; }
} 
```

这是控制器方法。当处于调试模式并且我通过 Fiddler 发送请求时，它会中断`db.SaveChanges();`并给出上面看到的错误。

```
 // POST api/xxx/create
    [ActionName("create")]
    public HttpResponseMessage PostUser(User user)
    {
        if (ModelState.IsValid)
        {
            db.Users.Add(user);
            db.SaveChanges();

            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, user);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = user.Id }));
            return response;
        }
        else
        {
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }
    } 
```

怎么了？

**解决方案**

将字符串 Id 改为 int 并删除 Data 注释。将 Id 重命名为 UserId，仍然遵循约定，并在其他 POCO 中进行必要的更改以与更改相匹配。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-18T12:41:48.907

这是一个猜测:)

是因为ID是一个字符串吗？如果将其更改为 int 会发生什么？

我是说：

```
 public int Id { get; set; } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T12:57:03.823

你有一个糟糕的桌子设计。您不能自动增加字符串，这没有任何意义。你基本上有两个选择：

1.) 将 ID 类型`int`改为字符串
2.) 不推荐！！！- 自己处理自动增量。您首先需要从数据库中获取最新值，将其解析为整数，将其递增并再次将其作为字符串附加到实体。非常糟糕的主意

第一个选项需要更改引用此表的每个表，但这是值得的。

# php - 警告：move_uploaded_file() 无法打开流

> ID：16079220
> 
> 赞同：4
> 
> 时间：2013-04-18T09:27:17.877
> 
> 标签：php, file-upload

我正在尝试在 ftp 上上传文件。

这是我的代码

```
 $jname= "Accounts of Biotechnology Research";
    if (!is_dir('/Trade/upload/ '.$jname)) {

        mkdir('/Trade/upload/ '.$jname);   // line 63
    }
    move_uploaded_file($_FILES["submission_file"]["tmp_name"],    "/Trade/upload/$jname/" . $dup_name );    // line 67 
```

Trade 是 public_html 文件夹中的一个文件夹。

当我上传文件时，它会给我一个警告，例如，

```
Warning: mkdir() [function.mkdir]: No such file or directory in /home/my_username/public_html/Trade/upload.php on line 63

Warning: move_uploaded_file(/Trade/upload/Accounts of Biotechnology Research/76164762-sm.pdf) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/my_username/public_html/Trade/upload.php on line 67

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phphZXp0O' to '/Trade/upload/Accounts of Biotechnology Research/76164762-sm.pdf' in /home/my_username/public_html/Trade/upload.php on line 67 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T09:39:44.860

第一：你在这里有一个空间`mkdir('/Trade/upload/ '.$jname);`。假设你应该有`mkdir('/Trade/upload/'.$jname);`（is_dir 相同）

第二：确保您可以写入`Trade/upload`目录。

第三（我认为这是真正的问题）：

看起来您正在尝试上传到具有完整路径的目录： `/home/my_username/public_html/Trade/upload/`，但您的代码将尝试创建具有完整路径的目录： `/Trade/upload/`。你需要改变

```
 if (!is_dir('/Trade/upload/ '.$jname)) {    
     mkdir('/Trade/upload/ '.$jname);   // line 63
 } 
```

到

```
 if (!is_dir('upload/'.$jname)) {    
     mkdir('upload/'.$jname);   // line 63 (or maybe there should be Trade/upload, but suppose current working dir will be /home/my_username/public_html/Trade, so only upload/)
 } 
```

另一种选择是强制[`mkdir`](http://php.net/manual/en/function.mkdir.php)递归创建目录：

```
 mkdir('/Trade/upload/'.$jname, 0755, true); 
```

但在这种情况下，文件将被上传到`/Trade/upload/...`而不是`/home/my_username/public_html/Trade/upload/...`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T09:36:55.433

根据您收到的错误消息，您应该注意两件事。我猜`/Trade`这不是您机器上的根路径，因为错误中很清楚您的实际路径是`/home/my_username/public_html/Trade/`，所以第一次调整应该是

```
$root_path = "/home/my_username/public_html/Trade/upload/"; 
```

我建议的第二个调整是避免使用带有空格的路径名：

```
$jname= "Accounts of Biotechnology Research"; //could be changed to
$jname= "Accounts_of_Biotechnology_Research"; //$jname = str_replace(" ","-",$jname)    OR
$jname= "Accounts-of-Biotechnology-Research"; //$jname = str_replace(" ","-",$jname) 
```

最后请注意以下几行中的空格字符，它们会影响您的最终结果：

```
if (!is_dir('/Trade/upload/ '.$jname)) {   //AND
    mkdir('/Trade/upload/ '.$jname);
} 
```

`upload/ '.$jname`注意两个字符串之间的 [space] 。

# java - XWT 的文档和教程

> ID：16079221
> 
> 赞同：2
> 
> 时间：2013-04-18T09:27:21.783
> 
> 标签：java, swt, xwt

我目前处于基于 Java 的项目的设计阶段。前端并不过分复杂（由 4 到 5 个单独的组合/窗口组成），这意味着使用普通 SWT 肯定是可行的。

但是，如果可能的话，我想进一步将 GUI 布局与功能代码分开。乍一看，XWT 似乎正好适合这项工作。XWT 的唯一问题是我找不到任何全面的教程，甚至找不到合适的文档。

有谁知道我在哪里可以找到这样的材料？还是我应该简单地放弃并只使用 SWT 来完成整个事情？

PS：[1] 是迄今为止我能找到的唯一有用的资源......

[1] [http://wiki.eclipse.org/E4/XWT](http://wiki.eclipse.org/E4/XWT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T08:11:45.137

项目搬迁；当前页面是

1.  [http://www.eclipse.org/proposals/technology.xwt/](http://www.eclipse.org/proposals/technology.xwt/)
2.  [http://www.eclipse.org/forums/index.php/f/257/](http://www.eclipse.org/forums/index.php/f/257/)

不，我找不到任何当前的教程。

# image - 将图像嵌入视频 - FFMPEG 或 JW 播放器？

> ID：16079224
> 
> 赞同：2
> 
> 时间：2013-04-18T09:27:29.623
> 
> 标签：image, video, ffmpeg, jwplayer, embedding

所以我想在将 m4a 转换为 mp4 时将图像作为视频内容的一部分嵌入。输出文件将图像作为视频内容，它在 VLC 中按预期播放，但是当使用 JW 播放器从我的 CDN 流式传输相同内容时，我看不到图像作为视频内容，它仍然是黑色的并且可以听到音频。不知道嵌入有什么问题。我使用 FFMPEG 将图像嵌入为视频内容。

另一方面，JW 播放器是否可以将图像叠加为视频内容，而后端可以听到音频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:05:32.640

您需要 [循环](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images) 图像

```
ffmpeg -loop 1 -r 1 -i img.png -i audio.m4a -shortest -filter:v \
  'crop=trunc(iw/2)*2:trunc(ih/2)*2' out.mp4 
```

*   一遍又一遍地重复图像
*   每秒一次
*   音频停止时停止视频
*   如有必要，将图像切割成均匀的尺寸

# iphone - iPhone NSDateFormatter 美国地区风格

> ID：16079225
> 
> 赞同：0
> 
> 时间：2013-04-18T09:27:30.803
> 
> 标签：iphone, nsdate, nsdateformatter

我正在编写 iPhone 应用程序。我想按以下格式获取当前日期。

```
Tur, 18 Apr 2013 09:20:47 
```

我尝试使用以下代码。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
[dateFormatter setDateFormat:@"E, dd MMM yyyy HH:mm:ss"];
NSString *formattedDate = [dateFormatter stringFromDate:[NSDate date]];
[dateFormatter release]; 
```

问题是我的 iPhone 地区不是美国，所以我得到了以下字符串。

```
木, 18 4月 2013 09:20:47 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:32:12.493

设置`locale`日期属性以获取美国格式

```
dateFormatter.locale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]
                                                                  autorelease]; 
```

或者

```
 [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:31:25.900

我很长时间没有使用 NSDateFormatter 但我正在证明一些链接 -

为了更好地理解，您可以参考 -

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)和

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

我希望，它可以帮助你。

# c# - 将类型“对象”转换为“System.Data.SqlClient.SqlCommand 错误

> ID：16079234
> 
> 赞同：0
> 
> 时间：2013-04-18T09:27:56.777
> 
> 标签：c#, umbraco

无法将类型“object”隐式转换为“System.Data.SqlClient.SqlCommand”。存在显式转换（您是否缺少演员表？）

创建用户控件时出现此错误

它在这段代码中。

```
 protected void gvDetails_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
int Slno = Convert.ToInt32(gvDetails.DataKeys[e.RowIndex].Value.ToString());
var ProductNum = gvDetails.DataKeys[e.RowIndex].Values["ProductNumber"].ToString();
TextBox txtShortDesc = (TextBox)gvDetails.Rows[e.RowIndex].FindControl("ShortDesc");
SqlCommand cmd= SqlHelper.ExecuteScalar(GlobalSettings.DbDSN, CommandType.Text,"UPDATE sydShortDesc set ShortDesc='"+ txtShortDesc.Text+ " ' WHERE ProductNumber='"+ ProductNum +"'  ");
cmd.ExecuteNonQuery();
lblresult.ForeColor = Color.Green;
lblresult.Text = username + " Details Updated successfully";
gvDetails.EditIndex = -1;
BindEmployeeDetails();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:30:11.667

那么大概你的`SqlHelper.ExecuteScalar`方法被声明为返回`object`，而不是`SqlCommand`。实际上，我不*希望*它返回`SqlCommand`- 我希望它返回执行给定查询的结果。我怀疑你一开始就不想打电话`ExecuteScalar`。

顺便说一句，您当前的代码*很*容易受到[SQL 注入攻击](http://bobby-tables.com)- 您应该使用参数化 SQL 而不是将值直接嵌入到 SQL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:30:54.613

从您的函数名称`SqlHelper.ExecuteScalar`看来，该函数执行命令并返回结果集，**而不是新的**SqlCommand。这就是您收到错误的原因。

其他几件事，您应该**始终使用参数化查询**来避免[Sql Injection](http://en.wikipedia.org/wiki/SQL_injection)

# c++ - 静态变量 cpp 不想改变

> ID：16079235
> 
> 赞同：2
> 
> 时间：2013-04-18T09:27:57.277
> 
> 标签：c++, static-variables

```
FileA.hpp:

static int a; 
void change(int);

FileA.cpp

#include "FileA.hpp"
void change(int x) { a = x; }

main.cpp

#include "FileA.hpp"
#include <cstdlib>
#include <iostream>

int main()
{
    a = 5;
    std::cout<<a<<std::endl;
    change(10);
    std::cout<<a<<std::endl;
    a = 20;
    std::cout<<a<<std::endl;

    system("Pause");

    return 0;
} 
```

我的输出是：

```
5
5
20 
```

有人可以帮我弄这个吗？为什么变量“a”不想改变 FileA.cpp 中的函数。如何解决这个问题。当我在“FileA.hpp”中内联更改（int x）时，它工作正常。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T09:33:02.403

全局变量上的`static`关键字赋予该变量内部链接。这意味着任何具有该定义的翻译单元都将拥有*自己*的对象副本。所以看到的`a`对象`main.cpp`和`FileA.cpp`看到的对象是不同的对象。`change`将修改其中一个，但`main`将输出另一个。

如果您的`static`意思是该对象具有静态存储持续时间，那么全局变量（或通常在命名空间范围内的变量）无论如何都具有静态存储持续时间。你不需要标记它们`static`。但是，如果您删除`static`，您将遇到另一个问题；您将有多个`a`跨翻译单元的定义。

正确的方法是`a`在`extern`文件`FileA.hpp`中声明：

```
extern int a; 
```

然后在单个翻译单元中（可能在 中`FileA.cpp`，定义对象：

```
int a; 
```

这意味着任何包含的对象都`FileA.hpp`将具有`a`（这很好）的声明，并且只有一个翻译单元将具有`a`. 完美的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:31:17.580

您`a`在头文件中声明，包含该文件时会创建它的两个副本，一个 in`main.cpp`和一个 in `FileA.cpp`. 当您`a = 5;`从 main.cpp 分配给副本时，在调用函数时`change`，它会更改 FileA.cpp 中的副本。

# c++ - 存储过程浮点参数被拆分为两个 int 参数

> ID：16079239
> 
> 赞同：0
> 
> 时间：2013-04-18T09:28:09.830
> 
> 标签：c++, sql-server-2008, visual-c++

当我从 C++ 代码调用存储过程时，我的浮点参数以某种方式拆分如下：34.555 => 34,555，并且由于参数数量不匹配而出现错误。

这就是我向 _CommandPtr 添加参数的方式

```
 ... 
    VARIANT VtLon = {0};
    VtLon.vt = VT_NULL;

    if(TargInf.dwFields & TI_FIELD_LON )
    {
        VtLon.vt = VT_R8;
        VtLon.dblVal = TargInf.dLongitude;
    }
    param = pCommand_LogNewEvent->CreateParameter( _bstr_t( L"lon" ), adDouble, adParamInput, sizeof( double ), VtLon );
    pCommand_LogNewEvent->Parameters->Append( param );
    ... 
```

我将sql server默认语言从俄语更改为英语，问题就消失了。但是我需要一种方法来管理它，而不需要这样的全局设置。

# java - Grouplayout 有点乱

> ID：16079241
> 
> 赞同：1
> 
> 时间：2013-04-18T09:28:15.200
> 
> 标签：java, swing, layout, grouplayout

以下代码的Grouplayout存在一些问题，请帮我解决

我也上传了输出文件，我不确定他们的对齐是否有问题。Kingly 看看，帮我弄清楚。

![在此处输入图像描述](https://i.stack.imgur.com/6eVwU.png)

```
 package javaapplication1;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.InetAddress;
import javax.swing.*;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JCheckBox;
import javax.swing.JComponent;
import javax.swing.JFrame;

public class Progress extends JFrame implements ActionListener {

    static JFrame frame;
    public JLabel ClientIP;
    JTextField ip;
    JLabel ClientPassword;
    JTextField pass;
    JLabel Videoname;
    JTextField vname;
    JLabel perccomplete;
    JTextField percent;
    JLabel PacketsSent;
    JTextField pacsent;
    JLabel Connectiontype;
    JTextField conntype;
    JLabel noofvideossent;
    JTextField videosend;
    JButton disconnect;
    JButton refresh;
    JButton ok;

    public Progress() {

        ClientIP = new JLabel("Client's IP:");
        ClientPassword = new JLabel("Clients Password:");
        Videoname = new JLabel("Video being Transfered:");
        perccomplete = new JLabel("% of transfer Complete:");
        PacketsSent = new JLabel("No of Packets sent:");
        Connectiontype = new JLabel("Connection Type:");
        noofvideossent = new JLabel("No of Videos Sent:");

        ip = new JTextField(Ipad);
        ip.setColumns(20);
        pass = new JTextField(Ipass);
        pass.setColumns(20);
        vname = new JTextField(Iselvid);
        vname.setColumns(20);
        percent = new JTextField("10%");
        percent.setColumns(20);
        pacsent = new JTextField(String.valueOf(RTSPSeqNb));
        pacsent.setColumns(20);
        String c;
        if (clientConnected == true) {
            c = "TCP";
        } else {
            c = "not Connected";
        }
        conntype = new JTextField(c);
        conntype.setColumns(20);
        videosend = new JTextField(String.valueOf(videocount));
        videosend.setColumns(20);

        //Tell accessibility tools about label/textfield pairs.
        ClientIP.setLabelFor(ip);
        ClientPassword.setLabelFor(pass);
        Videoname.setLabelFor(vname);
        perccomplete.setLabelFor(percent);
        PacketsSent.setLabelFor(pacsent);
        Connectiontype.setLabelFor(conntype);
        noofvideossent.setLabelFor(videosend);

        //Lay out the labels in a panel.
        GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);

        // Turn on automatically creating gaps between components that touch
        // the edge of the container and the container.
        layout.setAutoCreateContainerGaps(true);

        GroupLayout.SequentialGroup hGroup = layout.createSequentialGroup();
        hGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).
                addComponent(ClientIP).addComponent(ClientPassword).addComponent(Videoname).addComponent(perccomplete).addComponent(PacketsSent).addComponent(Connectiontype).addComponent(noofvideossent));

        hGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).
                addComponent(ip).addComponent(pass).addComponent(vname).addComponent(percent).
                addComponent(pacsent).addComponent(conntype).addComponent(videosend));

        layout.setHorizontalGroup(hGroup);

        GroupLayout.SequentialGroup vGroup = layout.createSequentialGroup();

        vGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(ClientIP)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(ClientPassword)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(Videoname)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(perccomplete)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(PacketsSent)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(Connectiontype)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(noofvideossent));

        vGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(ip)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(pass)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(vname)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(percent)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(pacsent)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(conntype)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(videosend));

        layout.setVerticalGroup(vGroup);

//        JPanel buttonPane = new JPanel(new GridLayout(0,1));
//        disconnect = new JButton("Disconnect Client");
//        disconnect.setActionCommand("Disconnect");
//        disconnect.addActionListener(this);
//        refresh = new JButton("Refresh Details");
//        refresh.setActionCommand("refresh");
//        refresh.addActionListener(this);
//        ok = new JButton("OK");
//        ok.setActionCommand("ok");
//        ok.addActionListener(this);
//        buttonPane.add(refresh);
//        buttonPane.add(disconnect);
//        buttonPane.add(ok);
//        add(buttonPane, BorderLayout.AFTER_LAST_LINE);
        setTitle("Find");
        pack();
    }

    private static void createAndShowGUI() {
        //Create and set up the window.
        //frame = new JFrame("Connected Client's Details");

        //frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        new Progress().setVisible(true);
        //Add contents to the window.
//        frame.add(new Progress());
//        //Display the window.
//        frame.pack();
//        frame.setVisible(true);
    }

    public static void main(String args[]) {
        //Schedule a job for the event dispatch thread:
        //creating and showing this application's GUI.
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                //Turn off metal's use of bold fonts
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }

    public void actionPerformed(ActionEvent e) {
        if ("Disconnect".equalsIgnoreCase(e.getActionCommand())) {
            ClientIPAddr = null;
            JOptionPane.showMessageDialog(frame, "Eggs are not supposed to be green.");
        }
        if ("refresh".equalsIgnoreCase(e.getActionCommand())) {
            String Ipad = null, Ipass, Iselvid;
            if (ClientIPAddr == null || ClientIPAddr.equals("")) {
                Ipad = "Not Connected";
            } else {
                Ipad = ClientIPAddr.toString();
            }
            if (vFilePassword == null || vFilePassword.equals("")) {
                Ipass = "No Password";
            } else {
                Ipass = vFilePassword;
            }
            if (selected_video == null || selected_video.equals("")) {
                Iselvid = "Not Selected";
            } else {
                Iselvid = selected_video;
            }
            ip.setText(Ipad);
            pass.setText(Ipass);
            vname.setText(Iselvid);
            percent.setText("10%");
            pacsent.setText(String.valueOf(RTSPSeqNb));
            String c;
            if (clientConnected == true) {
                c = "TCP";
            } else {
                c = "not Connected";
            }
            conntype.setText(c);
            videosend.setText(String.valueOf(videocount));
        }
        if ("ok".equalsIgnoreCase(e.getActionCommand())) {
            frame.dispose();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:04:34.767

`GroupLayout`是基于约束的布局。基本原则是在 x 和 y 轴上独立地确定组件之间的定位约束。

只有两个约束：组件是按顺序排列的，或者它们是并行的。

在您的情况下，您的布局很简单：

*   在 x 轴上，所有标签平行，所有文本字段平行。
*   在 y 轴上，有 [label and then textfield] 组，全部平行

代码如下：

```
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class Progress extends JPanel {

    private JLabel ClientIP;
    private JTextField ip;
    private JLabel ClientPassword;
    private JTextField pass;
    private JLabel Videoname;
    private JTextField vname;
    private JLabel perccomplete;
    private JTextField percent;
    private JLabel PacketsSent;
    private JTextField pacsent;
    private JLabel Connectiontype;
    private JTextField conntype;
    private JLabel noofvideossent;
    private JTextField videosend;

    public Progress() {

        ClientIP = new JLabel("Client's IP:");
        ClientPassword = new JLabel("Clients Password:");
        Videoname = new JLabel("Video being Transfered:");
        perccomplete = new JLabel("% of transfer Complete:");
        PacketsSent = new JLabel("No of Packets sent:");
        Connectiontype = new JLabel("Connection Type:");
        noofvideossent = new JLabel("No of Videos Sent:");

        ip = new JTextField();
        pass = new JTextField();
        vname = new JTextField();
        percent = new JTextField();
        pacsent = new JTextField();
        conntype = new JTextField();
        videosend = new JTextField();

        ip.setColumns(20);
        pass.setColumns(20);
        vname.setColumns(20);
        percent.setColumns(20);
        pacsent.setColumns(20);
        conntype.setColumns(20);
        videosend.setColumns(20);

        //Tell accessibility tools about label/textfield pairs.
        ClientIP.setLabelFor(ip);
        ClientPassword.setLabelFor(pass);
        Videoname.setLabelFor(vname);
        perccomplete.setLabelFor(percent);
        PacketsSent.setLabelFor(pacsent);
        Connectiontype.setLabelFor(conntype);
        noofvideossent.setLabelFor(videosend);

        GroupLayout layout = new GroupLayout(this);
        setLayout(layout);
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);

        layout.setHorizontalGroup(
                layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(Alignment.LEADING)
                        .addComponent(ClientIP)
                        .addComponent(ClientPassword)
                        .addComponent(Videoname)
                        .addComponent(perccomplete)
                        .addComponent(PacketsSent)
                        .addComponent(Connectiontype)
                        .addComponent(noofvideossent))
                    .addGroup(layout.createParallelGroup(Alignment.LEADING)
                        .addComponent(ip)
                        .addComponent(pass)
                        .addComponent(vname)
                        .addComponent(percent)
                        .addComponent(pacsent)
                        .addComponent(conntype)
                        .addComponent(videosend)));

        layout.setVerticalGroup(
                layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(ClientIP)
                        .addComponent(ip))
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(ClientPassword)
                        .addComponent(pass))
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(Videoname)
                        .addComponent(vname))
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(perccomplete)
                        .addComponent(percent))
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(PacketsSent)
                        .addComponent(pacsent))
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(Connectiontype)
                        .addComponent(conntype))
                    .addGroup(layout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(noofvideossent)
                        .addComponent(videosend)));
    }

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                JFrame f = new JFrame("test frame");
                f.setContentPane(new Progress());
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setTitle("Find");
                f.pack();
                f.setVisible(true);
            }
        });
    }

} 
```

当代码正确缩进时， A`GroupLayout`相对容易理解。我替换了`Alignement.LEADING`by `Alignement.BASELINE`，以便在基线上对齐（标签和文本字段的文本在同一行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:32:53.280

根据我的经验，GroupLayout 最适合与 GUI 构建器一起使用，例如 NetBeans 中的 GUI 构建器，因为它是专门为此目的而构建的。因此，只需使用您的 GUI 构建器修复布局。

如果您想“手动”操作布局，恕我直言，此任务有更简单的布局管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:46:53.017

非常感谢你的帮助。我修改了代码如下，它工作了..对齐很好，但它们在垂直轴上有问题..

```
GroupLayout layout = new GroupLayout(getContentPane());
         getContentPane().setLayout(layout);
         layout.setAutoCreateGaps(true);
         layout.setAutoCreateContainerGaps(true);

         // Turn on automatically creating gaps between components that touch
         // the edge of the container and the container.
         layout.setAutoCreateContainerGaps(true);

         GroupLayout.SequentialGroup hGroup = layout.createSequentialGroup();
         hGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).
                 addComponent(ClientIP).addComponent(ClientPassword).addComponent(Videoname).addComponent(perccomplete).addComponent(PacketsSent).addComponent(Connectiontype).addComponent(noofvideossent));

         hGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).
                 addComponent(ip).addComponent(pass).addComponent(vname).addComponent(percent).
                 addComponent(pacsent).addComponent(conntype).addComponent(videosend).addComponent(disconnect).addComponent(refresh).addComponent(ok));
         layout.setHorizontalGroup(hGroup);

         GroupLayout.SequentialGroup vGroup = layout.createSequentialGroup();

         vGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(ClientIP).addComponent(ip)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(ClientPassword).addComponent(pass)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(Videoname).addComponent(vname)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(perccomplete).addComponent(percent)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(PacketsSent).addComponent(pacsent)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(Connectiontype).addComponent(conntype)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(noofvideossent).addComponent(videosend));

         vGroup.addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(disconnect)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(refresh)).addGroup(layout.createParallelGroup(Alignment.LEADING).addComponent(ok));
         layout.setVerticalGroup(vGroup); 
```

# c# - 长度方法在c#中不起作用

> ID：16079246
> 
> 赞同：-3
> 
> 时间：2013-04-18T09:28:24.313
> 
> 标签：c#

我想使用下面的代码在 mysql 中的一个表和 sql server 中的 1 个表之间进行比较。但是我尝试使用的 Length 方法被标记为错误。我该怎么办，我需要一点帮助。谢谢 ！

```
int lengthClienti = MySqlSetClienti.Tables["clienti"].Length;

int columnClienti = 4;

for (int i = 0; i <= lengthClienti - 1; i++)//row
{
    for (int j = 0; i <= columnClienti; j++)//column
    {
        if (SqlDataSet.Tables["ClientiImporti"].Rows[i][j].ToString() == MySqlSetClienti.Tables["clienti"].Rows[i][j].ToString())
        {
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:35:53.360

你想包括行；

```
 MySqlSetClienti.Tables["clienti"].Rows.Count 
```

# apache-flex - Flex 4 中的 Web 应用程序

> ID：16079248
> 
> 赞同：0
> 
> 时间：2013-04-18T09:28:37.803
> 
> 标签：apache-flex, flex4.5, flexbuilder

我有一个与我在 Flex 4.6 中开发的 Web 应用程序相关的小问题。

我有一个 800 x 600 像素的应用程序，在某些屏幕中，并非所有内容都显示出来，浏览器中也没有出现滚动。

如何设置应用程序以在浏览器中显示 y 滚动？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:38:01.477

我遇到了类似的问题 - Flex 4 web app 700 x 525 px[的纸牌游戏](https://www.facebook.com/appcenter/video-preferans)- 主要由老年人玩，他们经常放大字体/网页（例如通过在浏览器中使用 CTRL 和 + 键） - 这导致 UI偏移量（如 PopUpWindow 不居中）等。

我的解决方案是使用自定义应用皮肤。

这里是我的代码的一些摘录：

**MyApp.mxml：**

```
<s:Application  
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    width="700" height="525" 
    initialize="systemManager.stage.scaleMode=StageScaleMode.SHOW_ALL" 
    skinClass="MySkin">
    ... 
```

**MySkin.mxml：（**甚至可以在全屏模式下工作）

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
        xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Metadata>
    <![CDATA[ 
        [HostComponent("spark.components.Application")]
    ]]>
    </fx:Metadata> 

    <fx:Script fb:purpose="styling">
        <![CDATA[
            ....
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="normalWithControlBar" />
        <s:State name="disabledWithControlBar" />
    </s:states>

    <s:Group id="mainGroup" x="0" y="0" width="700" height="525">
        <s:layout>
            <s:VerticalLayout gap="0" horizontalAlign="justify" />
        </s:layout>

        <s:Group id="contentGroup" width="700" height="100%" minWidth="0" minHeight="0" />

        <s:Group id="topGroup" minWidth="0" minHeight="0"
                    includeIn="normalWithControlBar, disabledWithControlBar" >

            <s:Rect left="1" right="1" top="1" bottom="1" >
               <s:fill>
                    <s:LinearGradient rotation="90">
                        <s:GradientEntry color="#66BBEE" />
                        <s:GradientEntry color="#3399CC" />
                    </s:LinearGradient>
               </s:fill>
            </s:Rect>

            <s:Rect left="2" right="2" bottom="0" height="1" alpha="0.5">
                <s:fill>
                    <s:SolidColor color="#333333" />
                </s:fill>
            </s:Rect>

            <s:Group id="controlBarGroup" left="0" right="0" top="1" bottom="1" minWidth="0" minHeight="0">
                <s:layout>
                    <s:HorizontalLayout paddingLeft="6" paddingRight="6" paddingTop="6" paddingBottom="6" gap="10" />
                </s:layout>
            </s:Group>
        </s:Group>

    </s:Group>
</s:Skin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:55:42.923

您需要将 Scroller 添加到要滚动的组件中，并确保已将 verticalScrollPolicy 设置为“auto”。 [http://help.adobe.com/en_US/flex/using/WSb04c7610c3432839-13869d09121418556f1-7​​ffc.html](http://help.adobe.com/en_US/flex/using/WSb04c7610c3432839-13869d09121418556f1-7ffc.html)

# c# - 如何将此图像源翻译成 Url.Content？

> ID：16079254
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:02.003
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

**我有以这种方式呈现的以下图像。**

```
 <img src="../../../..@Model.FloorPlan.Floor_Plan_Image_Path@Model.FloorPlan.Floor_Plan_Image_Filename" alt=""/> 
```

如果可能的话，我希望它的 src 属性将更改为 Url.Content。

**我尝试过的是这个，但我的问题是将我的模型视为字符串：**

```
<img src="@Url.Content("~/Model.FloorPlan.Floor_Plan_Image_Path@Model.FloorPlan.Floor_Plan_Image_Filename")" alt=""/> 
```

谁能帮我？

**Path 和 Filename 的值如下：**

Model.FloorPlan.Floor_Plan_Image_Path = "/Content/Uploads/FloorPlans/00004601/" Model.FloorPlan.Floor_Plan_Image_Filename = "testfloorplan.png"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T10:36:44.823

我发现自己几乎需要在任何视图上格式化字符串，所以我为此做了一个扩展方法，只是为了摆脱`String.Format`每个视图上的那些。

```
public static class UrlHelpers
{
    public static string Content(this UrlHelper urlHelper,
                                 string formatPath, 
                                 params object[] args)
    {
        return urlHelper.Content(String.Format(formatPath, args));
    }
} 
```

它只是简单地格式化指定的路径，没什么大不了的，但是调用它会更好读一些。

```
@{
    var path = Model.FloorPlan.Floor_Plan_Image_Path;
    var imageName = Model.FloorPlan.Floor_Plan_Image_Filename;
}
<img src="@Url.Content("~{0}{1}", path, imageName)"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T09:48:43.277

我想我明白你的目的。试试这个：

```
<img src="@Url.Content(String.Format("~{0}{1}", Model.FloorPlan.Floor_Plan_Image_Path, Model.FloorPlan.Floor_Plan_Image_Filename))" alt=""/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T09:59:09.917

尝试

```
<img src="@Url.Content("~/" + Model.FloorPlan.Floor_Plan_Image_Path + Model.FloorPlan.Floor_Plan_Image_Filename)" alt="" /> 
```

# asp.net - 无法配置 MVC 4 SqlMembershipProvider

> ID：16079258
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:08.350
> 
> 标签：asp.net, asp.net-mvc-4, forms-authentication, sqlmembershipprovider

我正在设置我的 MVC 4 网站以使用 SqlMembershipProvider 和数据存储作为 SQL Server Express 11.0.21xx

我已经通过 NuGet 安装了通用提供程序
`PM > Install-Package Microsoft.AspNet.Providers`

当我运行应用程序并转到 localhost/Accounts/Register 并提交表单时，我收到此错误
`To call this method, the "Membership.Provider" property must be an instance of "ExtendedMembershipProvider".`

在这条线上
`WebSecurity.CreateUserAndAccount(model.UserName, model.Password);`

帐户控制器具有属性`[InitializeSimpleMembership]`集。但是由于上述错误，未创建表。

由 NuGet 更新的 web.config 部分
`<profile defaultProvider="DefaultProfileProvider">
<providers>
<add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
</providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider">
<providers>
<add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
connectionStringName="DefaultConnection"
enablePasswordRetrieval="false"
enablePasswordReset="true"
requiresQuestionAndAnswer="false"
requiresUniqueEmail="false"
maxInvalidPasswordAttempts="5"
minRequiredPasswordLength="6"
minRequiredNonalphanumericCharacters="0"
passwordAttemptWindow="10"
applicationName="/" />
</providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
<providers>
<add name="DefaultRoleProvider"
type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
</providers>
</roleManager>
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
<providers>
<add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
</providers>
</sessionState>`

连接字符串
`<add name="DefaultConnection" connectionString="server=servername\instance;Database=imdb;User Id=sa; Password=passbird;" providerName="System.Data.SqlClient" />`

问题出在哪里？我应该使用通用提供商吗？我不相信我应该运行新帐户控制器的 aspnet_regsql cos。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:41:48.487

我所要做的就是在 web.config 中将 DefaultMembershipProvider 更改为 SimpleMembershipProvider。**type**属性对于正确处理很重要。

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" 
         type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" 
         connectionStringName="DefaultConnection" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="true" 
         requiresQuestionAndAnswer="false" 
         requiresUniqueEmail="false" 
         maxInvalidPasswordAttempts="5" 
         minRequiredPasswordLength="6" 
         minRequiredNonalphanumericCharacters="0" 
         passwordAttemptWindow="10" 
         applicationName="/" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <add name="DefaultRoleProvider" 
         type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData" 
         connectionStringName="DefaultConnection" 
         applicationName="/" />
  </providers>
</roleManager> 
```

# ios - 在 iOS 中自动打开应用程序

> ID：16079263
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:17.810
> 
> 标签：ios, objective-c, xcode

我目前正在为 iOS 开发一个应用程序，并且我在应用程序中有一个我希望能够打开（和显示）的 PDF 文件列表。

现在我知道你可以用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)来做到这一点，然后它会显示哪些应用程序能够打开特定文件，但我正在寻找一种解决方案，我可以打开应用程序（例如 Adob​​e Reader）而无需先打开UIDocumentInteractionController，点击我想要的应用程序，然后打开它。

这可能吗？如果是这样：如何？

提前致谢！

德克沃尔夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:32:06.300

你可以看看 URL Schemes。但是你要打开的应用需要支持。 [http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

您可以像这样在您的应用程序中打开一个应用程序：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"myapp://"]]; 
```

编辑：您可以在这里找到一些方案：http: [//schemes.zwapp.com](http://schemes.zwapp.com)

# delphi - 在 Delphi & C++ Builder 中安装 VCL 组件

> ID：16079266
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:32.227
> 
> 标签：delphi, components, c++builder, vcl

我在 Delphi XE2 中创建了一个 VCL 组件，并希望将其安装在整个 RAD 工作室（Delphi 和 C++ Builder）中。

问题是，如果我在 Delphi 中安装组件，那么我会在 C++ Builder 中收到类似“*.obj 文件找不到”的链接器错误。我通过手动将组件的 LIB 文件添加到我的项目来解决这个问题，但我想避免这种情况。我找到的唯一解决方案是卸载组件并将其安装在 C++ Builder 本身中。但是，然后我在 Delphi 中使用该组件时遇到问题......

我的组件项目设置已设置为“生成所有 C++ Builder 文件..”。

如何在两个 IDE 中都安装组件并使其按预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:51:24.200

不要忘记您有（或应该有）两个包：运行时和设计时。

# regex - Oracle regexp_instr

> ID：16079268
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:36.840
> 
> 标签：regex, oracle

有人可以帮助我使用正则表达式吗？

我想检查给定字符串中是否存在“，”。

字面量：First_Name+;Last_Name+John, Smith

在这里，我想检查 Last_Name 是否包含“，”

```
select case when regexp_instr('First_Name+;Last_Name+John, Smith;Home_Adress+Michigan',
                                       '^(.*?\;|\+)*Last_Name\+(.*\,).*$', ',') > 1

 then 'ok' else 'nok' end as test1 from dual; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:39:53.773

为什么在这里使用正则表达式？

```
case when 
    regexp_like(
      'First_Name+;Last_Name+John, Smith;Home_Adress+Michigan', 
      '(^|;)Last_Name\+[^;]*,'
    )
  then 'present' 
  else 'not present' 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:34:42.857

regexp_instr() 的第三个参数是一个可选的起始位置 - 只需省略它。

此外，由于您的正则表达式匹配整个字符串，因此检查 regexp_instr() > 1 是没有意义的 - 如果匹配，则 regexp_instr() 将返回 1，否则返回 0。

```
with v_data as (
  select 'First_Name+;Last_Name+John, Smith;Home_Adress+Michigan' as name from dual 
  union all
  select 'First_Name+John;Last_Name+Smith;Home_Adress+Michigan' as name from dual 
)
select 
  name, 
  regexp_instr(name, '^(.*?\;|\+)*Last_Name\+(.*\,).*$') 
from v_data 
```

# php - 登录服务器端应用程序（Facebook PHP SDK）

> ID：16079269
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:38.003
> 
> 标签：php, facebook, sdk, server-side

我目前正在遵循技术指南。（[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)）

我被困在第 6 步和第 7 步之间。有人可以帮我吗？

由于 file_get_contents() 不起作用，我想知道是否可以更改这部分

```
 $response = file_get_contents($token_url);
 $params = null;
 parse_str($response, $params); 
```

至

```
 $response = curl($token_url);
 $params = null;
 parse_str($response, $params); 
```

而我的 cUrl 函数是：

```
 function curl($url) {
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
  curl_setopt($ch, CURLOPT_URL, $url);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:30:07.800

感谢 ceejayoz，我发现了我的错误。

当我打印出我的 $token_url 时，我发现我的变量格式错误，从而导致了错误。我太粗心了。

# mysql - 选择查询非常慢，有时会挂起我的数据库

> ID：16079274
> 
> 赞同：0
> 
> 时间：2013-04-18T09:29:49.927
> 
> 标签：mysql, sql

我需要有关如何更快地进行此类查询的建议的帮助

```
SELECT count(distinct tweet_id) count 
FROM tweets 
WHERE tweet_id NOT IN 
     (
      SELECT distinct in_reply_to_status_id 
      FROM tweets_response 
      WHERE created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)) 
       AND created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR
     ) 
```

我在 tweet_id 和 created_at 上放置了索引，但它仍然很慢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:46:23.950

怀疑问题出在索引上（上面关于解释的评论是 100% 正确的），但没有必要使用子选择。您的查询可以重写为：-

```
SELECT count(distinct tweet_id) `count` 
FROM tweets 
LEFT OUTER JOIN tweets_response 
ON tweets.tweet_id = tweets_response.in_reply_to_status_id AND tweets_response.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)
WHERE tweets_response.in_reply_to_status_id IS NULL
AND tweets.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:50:53.827

这应该更好。子选择往往很慢。

```
SELECT count(distinct tweet_id)
FROM tweets twt
LEFT OUTER JOIN tweets_response tr
    ON twt.tweet_id = tr.in_reply_to_status_id 
WHERE tr.in_reply_to_status_id IS NULL and (tr.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)) 
   AND tr.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR) 
```

# ios - Safari IOS 中的 HTML5 视频尺寸

> ID：16079275
> 
> 赞同：6
> 
> 时间：2013-04-18T09:29:51.643
> 
> 标签：ios, html, ipad, video

我正在为一个主要内容是视频的客户建立一个网站。我正在使用 HTML5 视频元素来显示内容，但在 iOS 上的 Safari 时遇到问题。

iOS 上的 Safari 在用户启动下载之前不会下载视频元数据，因此视频的宽度和高度属性设置为默认大小 300 x 150 像素 - 在视频拉伸的两侧留下很大的黑色区域我的包含元素的宽度。

我正在尝试使网站尽可能地响应，所以这个默认大小对我不起作用。有没有办法解决这个问题，以便 iOS 上的 Safari 尊重视频大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-10T04:30:29.173

我使用了以下对我有用的 CSS。在装有 iOS 7.1 的 iPad mini 上测试

```
video {
 min-height: 100%; 
 min-width: 100%; 
 height: auto !important;
 width: auto !important; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-27T01:29:00.393

iOS 的解决方案可以用纯 CSS 来实现。这适用于`<video>`占用视口的宽度，这在移动设备中很常见。

1.  基于视口单位

> 1vw = 视口宽度的 1%

2.  获取基于纵横比的宽度百分比计算

如果您的视频是 16:9

> 9 除以 16 = 0.5625 = 56.25% = 56.25vw

如果您的视频是 4:3 和 21:9，则分别为 0.75 和 0.4285。

3.  应用这些 CSS 规则

```
 video {
        width: 100% !important;
        height: 100% !important;
        max-height: 56.25vw !important;
    }
```

```
<video>
    <source src="video.mp4" type="video/mp4">
</video>
```

行为不端的 iOS 将被 max-height 强制不高于基于宽度的比率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:39:46.627

通过 CSS，尝试将其宽度设置为 100%，高度设置为 auto。

***编辑*** 在这种情况下，您需要使用 JavaScript 等待视频加载元数据，然后读取并设置宽度和高度，例如：

```
var v = document.getElementById('myVideo');
v.addEventListener('loadedmetadata', function(e) {
   this.width = this.videoWidth;
   this.height = this.videoHeight;
}, false); 
```

我还没有完全测试过这个，但它应该会引导你走上正确的轨道。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-20T23:23:34.843

尝试使用`width:100%`, `height:0`, `padding-bottom:56.25%`（对于 16:9 视频）来设置容器元素的大小

然后获取容器`height/width`来设置`height/width`视频元素：

```
var the_case_study_video_wrapper = $('#tw-case-study-hero-video-wrapper'),
    the_case_study_video = document.getElementById('tw-case-study-hero-video'),
    the_height = $(the_case_study_video_wrapper).css('padding-bottom'),
    the_width = $(the_case_study_video_wrapper).css('width');

$(the_case_study_video).css({
   'height': the_height,
   'width': the_width
}); 
```

然后可能在方向调整大小和/或浏览器调整大小时再次设置 css ...

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-08-25T23:42:15.523

我只是在 css 规则中为视频标签设置了一个固定宽度和高度，Safari 可以正确显示视频。

# joomla - 我可以将文章信息用于自定义 html 模块吗？

> ID：16079280
> 
> 赞同：0
> 
> 时间：2013-04-18T09:30:04.093
> 
> 标签：joomla, joomla2.5

我想创建一个图片 sldier 模块，在滑块页面中显示最新的新闻文章信息，创建动画和文本位置会很容易，但是如何在 joomla 2.5 中获取标题和预览文本？我希望它从最新的 3 篇新闻文章中获取信息。

[http://i.stack.imgur.com/lR3jA.jpg](http://i.stack.imgur.com/lR3jA.jpg)

# java - 为什么我的程序不调用我的方法？

> ID：16079283
> 
> 赞同：0
> 
> 时间：2013-04-18T09:30:16.643
> 
> 标签：java, static-methods

java方法statithing，但我似乎无法让我在第56行的while语句正确调用我的方法。有什么我做错了吗？我对 Java 很陌生，所以任何形式的帮助都将不胜感激！提前致谢！这是我的代码：

```
import java.util.*;
import javax.swing.*;
import java.io.*;

public class GradeCalculator { 
    static String fileInput;
    static double totalGrade;
    static int scoreCount= 0;
    static double classAverage;
    static double score;
    static double testScore;
    static double averageScore;
    static int numberOfStudents = 0;
    static char letterGrade;
    static String fileOutput;
    static String nameOfStudent;
    static int numberCount;
    static int numberCalculatedStudents;
    static double average = 0;

    public static void main (String[] args) throws FileNotFoundException {
    //Welcome   

    JOptionPane.showMessageDialog(null,"Welcome to the Grade Calculator!  This program will\n" +
                                                " calculate the average percentage of 5 test scores that\n"+
                                                " are given in a given file once these scores are\n"+
                                                " averaged it will give the student a letter grade.","Welcome!",JOptionPane.PLAIN_MESSAGE);
    fileInput = JOptionPane.showInputDialog(null, "Please enter the name of the input file you wish to use for this program."
                                            ,"Input File",JOptionPane.PLAIN_MESSAGE);
    fileOutput = JOptionPane.showInputDialog(null, "Please enter the name of the output file you wish to use for this program."
                                            ,"Output File",JOptionPane.PLAIN_MESSAGE);
    //preparing text files
    PrintWriter outFile = new PrintWriter (fileOutput);                                         
    File inFile = new File (fileInput);

    Scanner reader = new Scanner(new FileReader(fileInput));
    outFile.println("Student Name   Test1   Test2   Test3   Test4   Test5   Average Grade");

    while(reader.hasNextLine()) {
        nameOfStudent = reader.next();
        outFile.printf("%n%n%s",nameOfStudent);
        numberOfStudents++;
        score = reader.nextDouble();
        calculateAverage(score);
        calculateGrade(averageScore);
        outFile.printf("                                %.2f   ", averageScore);
        outFile.println("                                                               "+letterGrade);
    }
    classAverage = classAverage/numberCalculatedStudents;       
    outFile.print("\n\n\n\n\n\n\n\n\n\n\n\nClass average for "+ numberCalculatedStudents + "of" + numberOfStudents + "is" + classAverage);
    JOptionPane.showMessageDialog(null,"The report has successfully been completed and written into the file of " + fileOutput +"."
                                                    +" The class average is " + classAverage + ". Please go to the output file for the complete report.");  
    outFile.close();
    }

    public static void calculateAverage(double score) throws FileNotFoundException {
        Scanner reader = new Scanner(new FileReader(fileInput));
        PrintWriter outFile = new PrintWriter (fileOutput);
        while (reader.hasNextDouble() && numberCount <= 5 ) {
            score = reader.nextDouble();
            numberCount++;
        if (score >= 0 & score <= 100) {
                outFile.printf("%10.2f",score);
            scoreCount++;
            average = score + average;
        }
        else
            outFile.printf("                **%.2f",score);
        }
        if (average!=0){
            numberCalculatedStudents++; 
            average = average/scoreCount;
            averageScore = average;
            classAverage = average + classAverage;
            }

            average = 0;
    }

    public static char calculateGrade (double averageScore) {

        if (averageScore >= 90 && averageScore <= 100)
            letterGrade = 'A';
        else if (averageScore < 90 && averageScore >= 80)
            letterGrade = 'B';
        else if (averageScore < 80 && averageScore >= 70)
            letterGrade = 'C';
        else if (averageScore < 70 && averageScore >= 60)
            letterGrade = 'D';
        else if (averageScore < 60 && averageScore >= 0)
            letterGrade = 'F';  
        else 
            letterGrade =' ';

        return letterGrade;
     }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:40:27.107

在不知道问题出在哪一行的情况下，我突然想到了两个问题：

在 while 循环的顶部：

```
 if (score >= 0 & score <= 100)
    { outFile.printf("%10.2f",score);
        scoreCount++;
        average = score + average;
    }
    else
        outFile.printf("                **%.2f",score);} 
```

else 语句后有一个右括号 ( `}`)，但没有左括号。因此，该右括号看起来像是在您想要它之前退出了 while 循环。

其次，看起来您正试图在CalculateGrade 方法中返回一些东西（即一个字符），但是您在其上指定了一个返回类型为void，这意味着即使您有一个return 语句，当您称它为。你没有显示你在哪里调用那个方法，所以我不能确定这会导致问题，但它肯定是可疑的。您似乎想使用：

```
 public static char calculateAverage(double score) throws FileNotFoundException{ 
```

代替`public static void calculateAverage(double score)...`

另外，所有这些方法都是静态的有什么原因吗？你知道制作静态的东西是什么意思吗？

**编辑（根据您的评论）：**

不，创建一个变量`static`使其成为“类变量”，这意味着该类的所有对象只存在其中一个。为了显示：

如果你有这样的课程：

```
class test {
static int id;
} 
```

然后运行以下代码：

```
 test t1 = new test();
    test t2 = new test();

    t1.id = 4;
    t2.id = 8;

    System.out.println(t1.id); 
```

它将打印 8。这是因为，因为 id 是一个`static`变量，在类的任何对象上更改它都会导致它为类的每个其他对象而更改。

这与类的每个对象都存在的“实例变量”相反。要创建`id`实例变量，只需删除`static`关键字。如果这样做并运行相同的代码，它将打印 4，因为更改 t2 的实例变量对 t1 没有影响。

有道理？

# java - 条形图没有按我想要的方式运行

> ID：16079284
> 
> 赞同：0
> 
> 时间：2013-04-18T09:30:20.690
> 
> 标签：java

我希望你能帮助我完成这个编码。我正在尝试创建一个条形图，但它似乎并不适合我。我正在尝试在下面进行输出，但是当我运行它时，我会`[Red, Yellow, Blue](0)`重复。我觉得我快要解决这个问题了。如果有人可以将我推向正确的方向，我将不胜感激。

```
import java.util.HashSet;
import java.util.Arrays;
import java.util.Set;
public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        //These arrays are not to be modified and should only use these 2 arrays.
        short[] points ={1,2,1,1,1,1,1,1,3,4,1,5};
        String[] teams ={"Red","Yellow","Blue","Blue","Blue","Red","Yellow","Red","Yellow","Red","Blue","Blue"};
        Set<String> uniqueTeams = new HashSet<String>(Arrays.asList(teams));
        Barchart(points, teams, uniqueTeams);
    }

    public static void Barchart(short[] points, String[] teams, Set<String> uniqueTeams){
        byte count=0;
        for(int index=0; index < points.length; index++){
            if(teams.equals(uniqueTeams)){
                count++;
            }
        }
        for(int index=0; index < points.length; index++){
            System.out.println(uniqueTeams + "("+ count + ")");
        }

    }
}

//Output should look like this:
//
//Red(7): *******
//
//Yellow(6): ******
//
//Blue(9): ********* 
```

我有一个想法如何以另一种方式做到这一点，但我不知道如何。如果有人可以在下面回答这个问题。如果没有我在团队数组中所做的双倍操作，我如何能够获取或创建一个新数组？所以数组看起来像 String[] uniqueTeams = {"Red, "Yellow", "Blue"}; 但不是初始化或声明它，而是创建一种方法让程序自行创建（如果有意义的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:45:02.843

你`uniqueTeams`直接打印出来。`uniqueTeams`是类型`Set`。你应该做的是循环浏览集合中的每个项目，并打印出它们旁边的星星。

**OOP 方法**

如果是我，我不会将所有内容都放在单独的数据结构中，这会导致代码非常混乱。为什么不创建一个`Bar`包含值和名称的对象。然后你只需要循环一个类型的集合`Bar`并调用`toString()`你将覆盖的方法。

**当我在这里时**

我想我不妨一步一步地向您介绍 OOP 方法。使用面向对象编程，我们希望在对象中包含相似的数据。例如，酒吧的名称和价值是一个很好的对象；所有数据都与班级有关。

```
class Bar
{
private int count;
private String name;
    // Some values here to store the count and the name of the bar.

public Bar(String name, int count)
{
            // Assign those values in the constructor.
    this.name = name;
    this.count = count;
}
// Override the Object toString() method, and replace it with our code:
public String toString()
{
    String stars = "";
    for(int x = 0; x < count; x++)
    {
        stars += "*";
    }
            // Create the stars string, and append it to the name and count.
    return name + ":" + count + " | " + stars;
}
} 
```

现在访问此代码比您的解决方案简单得多。首先，我们创建一个`ArrayList`类似`barChart`存储所有值的东西，并将其参数化为 type `Bar`：

```
 ArrayList<Bar> barChart = new ArrayList<Bar>(); 
```

然后我们可以在中添加一些测试用例：

```
 barChart.add(new Bar("Red", 10));
  barChart.add(new Bar("Blue", 20));
  barChart.add(new Bar("Green", 12)); 
```

现在，因为您已经覆盖了该`toString`方法，您现在可以简单地将对象传递给一个`System.out.println()`函数。就像是：

```
 for(Bar b : barChart) { 
     System.out.println(b);  
  } 
```

*输出*

红色：10 | *********
蓝色：20 | ********************
绿色：12 | ************

# php - 查询以检索变量存储在列名中的数据

> ID：16079287
> 
> 赞同：0
> 
> 时间：2013-04-18T09:30:31.587
> 
> 标签：php, mysql

我有一个看起来像这样的数据库。

```
width | 10 | 20 | 30 | 40
----------------------------
  10  | $2 | $3 | $4 | $5
  20  | $3 | $4 | $5 | $6
  30  | $4 | $5 | $6 | $7
  40  | $5 | $6 | $7 | $8 
```

顶行是列名。如果给我两个数值，我将如何提取货币价值？

或者将这些数据重新组织成新列的最简单方法是什么？

编辑：

列名中的数字是高度，宽度列中的数字是宽度。

如果我要插入数字 10 代表高度和 20 代表宽度，我希望 3 美元是我的结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:14:13.563

尝试这个 ：

```
// assert $height column exists before the query
$sql = "select {$height}
        from table
        where width = :b_width"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:13:35.900

最好的方法是使用标准化设计重构您的数据库。

table_1 ：高度，包含一个包含您拥有的高度的列

table_2 ：宽度，包含具有您拥有的宽度的单列

table_3：h_w_values，包含 3 列：1.height，2.width，3.value 对

这是标准化的，易于扩展为 N 个高度和 M 个宽度。可选：考虑一个 table_4 的可能值（假设您的包裹有固定关税，或其他）并将 table_3 更改为（高度、宽度、关税 ID）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:08:51.313

我想你正在寻找这样的东西：

```
SELECT
  CASE WHEN @height=10 THEN height10
       WHEN @height=20 THEN height20
       WHEN @height=30 THEN height30
       WHEN @height=40 THEN height40
   END value
FROM yourtable
WHERE
  width=@width 
```

请[在此处](http://sqlfiddle.com/#!2/b16b0/1)查看小提琴。

# templates - 在 freemarker 模板中处理 struts2 标签

> ID：16079292
> 
> 赞同：2
> 
> 时间：2013-04-18T09:30:43.640
> 
> 标签：templates, process, struts2, tags, freemarker

我需要在服务器端处理 freemarker ftl 文件并将 HTML 返回给客户端。我想知道是否可以使用 template.process() 处理包含 struts 标签的 freemaker 模板。

**动作类代码：**

```
// Configuration created from struts2 freemarkermanager
FreemarkerManager freeMarkerManager = new FreemarkerManager();
Configuration config = freeMarkerManager.getConfiguration(context);

//Configuration without any specific settings.
Configuration config = new Configuration();
//Tried both nothing works.

Template template = config.getTemplate("TEMPLATE PATH");

Map<String, Object> inputMap = new HashMap<String, Object>();
inputMap.put("document", document);

StringWriter output = new StringWriter();
template.process(inputMap, output); 
```

**Freemarker模板**：

```
<#assign s=JspTaglibs["/struts-tags"]>
    <table>
        <tr>
           <th><@s.text name="Document Name"/></th>
           <th><@s.text name="Description"/></th>
        </tr>
        <@s.iterator value="inspiration" status="status">
    <tr>
    <td class="nowrap"><@s.property value="properties.DOCUMENT_NAME"/></td>
    <td class="nowrap"><@s.property value="properties.DESCRIPTION"/></td>
    </tr>
        </@s.iterator>
    </table> 
```

我还在web-inf 文件夹下添加了**struts-tags.tld 。**

**例外**

freemarker.core.InvalidReferenceException：表达式 JspTaglibs 在第 1 行未定义，

如果我删除**<#assign s=JspTaglibs["/struts-tags"]>**

freemarker.core.InvalidReferenceException：表达式 s 在第 7 行未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-13T19:32:57.903

定义自定义变换方法，如下所示：

```
公共静态无效进程（
ServletContext 上下文，字符串模板，
Map values, Writer writer) 抛出 IOException，
模板异常
 {
 配置cfg =新配置（）；
 cfg.setDirectoryForTemplateLoading（新
 File(context.getRealPath("/templates")));
 cfg.setObjectWrapper(new DefaultObjectWrapper());

 BeansWrapper 包装器 = BeansWrapper.getDefaultInstance();

 TemplateHashModel staticModels = wrapper.getStaticModels();

 模板 temp = cfg.getTemplate(template);

 temp.process（值，作家）；

 writer.flush();
 }

```

**参考**

*   [FMPP 设置：对象包装](http://fmpp.sourceforge.net/settings.html#objectWrapping)

*   [Freemarker 来源：BeansWrapperSingletonsTest.java](https://github.com/freemarker/freemarker-old/blob/master/src/test/java/freemarker/ext/beans/BeansWrapperSingletonsTest.java)

# youtube-api - youtube api - 防止标题覆盖暂停

> ID：16079294
> 
> 赞同：0
> 
> 时间：2013-04-18T09:30:52.093
> 
> 标签：youtube-api, overlay, title

您好，我正在编写高级 html5 多媒体播放器，还使用 ​​YT API 支持 You-Tube。并且存在问题，因为在我的页面上播放器使用非常小的视频区域（它在音乐的情况下显示可视化/在视频的情况下显示视频，因此在较低分辨率的屏幕上出现标题（因为页面根据屏幕指标动态调整大小）覆盖大约 1 /4 的视频，它看起来有点便宜。有什么方法可以关闭它吗？例如，控件可以被 YT 对象构造函数参数禁用，这个出现的顶部覆盖是否有类似的东西？我还没有找到任何关于它在谷歌页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:43:19.937

你需要参数`showinfo=0`

例子：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/pefow5Kp_W4?autoplay=1&showinfo=0" frameborder="0"></iframe> 
```

# matlab - 如何在matlab中指定回归树的深度？

> ID：16079296
> 
> 赞同：1
> 
> 时间：2013-04-18T09:31:05.710
> 
> 标签：matlab, classification, decision-tree

我正在使用回归树（[http://www.mathworks.co.uk/help/stats/classregtree.html](http://www.mathworks.co.uk/help/stats/classregtree.html)）对一些数据进行分类。我的数据有 9 个特征，但是回归树只会根据拆分类的最佳两个特征给我一个决策树。我希望看到分类中使用的更多功能。我已阅读文档但一无所获。你能指点我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:55:42.993

这可能是由于修剪，这是`on`默认的。尝试将其设置为`off`：

```
t = classregtree(X, y, 'prune','off') 
```

# django - 使用 Django 的 CreateView 获取 __init__() 得到了一个意外的关键字参数“实例”

> ID：16079299
> 
> 赞同：46
> 
> 时间：2013-04-18T09:31:10.300
> 
> 标签：django, django-class-based-views

# 一些细节：

```
Request Method: GET
Request URL: http://localhost:8080/user/create
Django Version: 1.5.1
Exception Type: TypeError
Exception Value: ____init____() got an unexpected keyword argument 'instance'
Exception Location: /place/venv/local/lib/python2.7/site-packages/django/views/generic/edit.py in get_form, line 35
Python Executable: /place/venv/bin/python
Python Version: 2.7.3 
```

# 视图.py

```
class UserCreateView(CreateView):
    model = models.User
    form_class = forms.UserForm 
```

# 网址.py

```
url(r'^user/create$', UserCreateView.as_view(), name='user_create'), 
```

# 表格.py

```
class UserForm(forms.Form):
    GROUP_CHOICES = [(-1, '[Choose]')]
    GROUP_CHOICES += [(group.id, group.name.capitalize()) for group in auth.models.Group.objects.all()]

    email = forms.EmailField(
        label='Email',
        widget=forms.TextInput(attrs={'placeholder': 'Email'})
    )
    first_name = forms.CharField(
        label='First Name',
        widget=forms.TextInput(attrs={'placeholder': 'First Name'})
    )
    last_name = forms.CharField(
        label='Last Name',
        widget=forms.TextInput(attrs={'placeholder': 'Last Name'})
    )
    password = forms.CharField(
        label='Password',
        widget=forms.PasswordInput(attrs={'placeholder': 'Password'})
    )
    password_validation = forms.CharField(
        label='Repeat Password',
        widget=forms.PasswordInput(attrs={'placeholder': 'Repeat Password'})
    )
    mobile_number = forms.CharField(
        label='Mobile Number',
        widget=forms.TextInput(attrs={'placeholder': 'Mobile Number'})
    )
    office_number = forms.CharField(
        label='Office Number',
        widget=forms.TextInput(attrs={'placeholder': 'Office Number'})
    )
    group = forms.ChoiceField(
        label='Group',
        choices=GROUP_CHOICES
    )

    def clean_password_validation(self):
        if self.cleaned_data['password'] == self.cleaned_data['password_validation']:
            return self.cleaned_data['password_validation']
        else:
            raise forms.ValidationError('Passwords don\'t match')

    def clean_group(self):
        if self.cleaned_data['group'] != -1:
            return self.cleaned_data['group']
        else:
            raise forms.ValidationError('Please, choose a group') 
```

# 模型.py

```
class User(models.Model):
    user = models.OneToOneField(auth.models.User)
    mobile_number = models.CharField(max_length=64)
    office_number = models.CharField(max_length=64) 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-18T09:42:41.337

我怀疑类`UserForm`应该是模型形式。您可能想要更改字段，但它应该从 `ModelForm.

所以将表单定义更改为

```
class UserForm(forms.ModelForm):
   class Meta:
       model = User
       fields = [...] # list of fields you want from model

   #or define fields that you want.
   .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-04T15:22:58.993

我错误地覆盖了 __init__() 方法，没有初始参数，如下所示

```
class MyForm(forms.ModelForm):
    ...
    def __init__(self):
        super(CaseForm, self).__init__()
        ... 
```

结果得到这个错误

> /case/create 处的类型错误
> 
> __init__() 得到了一个意外的关键字参数“initial”

为了修复它，我将参数设置为 __init__() 并在调用超类 __init__() 时传递它们，请参见下面的结果

```
class MyForm(forms.ModelForm):
    ...
    def __init__(self, *args, **kwargs):
        super(CaseForm, self).__init__(*args, **kwargs)
        ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T12:15:32.550

forms.py 在方括号中定义字段，例如 fields=['field 1', 'field 2',...]

```
class CustomerForm(forms.ModelForm):        
    class Meta:
        model = Customer
        fields = ['fname','lname','email','address','city','state','zip','username','password','age','mobile','phone'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-08T16:35:18.280

我解决了尝试将表单保存到数据库时遇到的类似错误。“Report() 得到了一个意外的关键字参数‘摘要’”

问题是 models.py 和 forms.py 中的字段名称不匹配。

在models.py 的类Report 中，该字段的名称是“summary_input”，但在forms.py 中它被命名为“summary”，所以我更改了forms 中的变量名以匹配models 中的变量名。

```
# models.py
class Report(models.Model):
    summary_input = models.TextField()

# forms.py
class ReportForm(forms.Form):
    summary = forms.CharField(widget=forms.widgets.Textarea)
    # changed to 
    # summary_input = forms.CharField(widget=forms.widgets.Textarea) 
```

# silverlight - 创建可以处理间歇性连接中断的 Web 应用程序

> ID：16079305
> 
> 赞同：1
> 
> 时间：2013-04-18T09:31:24.240
> 
> 标签：silverlight, flash, web-applications, offline-caching, offline-mode

我的任务是设计餐厅将使用的服务。我们将记录一些输入，并将其上传到我们的服务器以供以后分析。我最初的想法是只使用一个典型的 Web 应用程序，这样我们就不必担心软件更新，但这带来了一个问题：

处理互联网中断数小时和/或浏览器在此期间意外关闭的最佳方法是什么？是否可以创建一个在线和离线运行的网络应用程序，重要的是，在离线模式下缓存任何输入，以便稍后上传？

如果 Web 应用程序不是最佳解决方案，您会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:46:14.830

HTML5，离线/客户端存储。从服务器收集所需的一切后，让您的“Web 应用程序”运行，并在它上线时仅提交所需的请求。

# web-services - 仅允许一个移动应用程序请求服务器的安全协议

> ID：16079307
> 
> 赞同：0
> 
> 时间：2013-04-18T09:31:31.577
> 
> 标签：web-services, security

是否有经过充分验证的安全协议可用于确保发送到我的 Web 服务器的请求来自特定的移动应用程序（移动应用程序应该部署在许多手机中）？

如果没有，最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:40:43.040

在您的服务器端使用 HTTPS 并在到达您的 Web 服务器的所有请求中使用访问令牌可能允许您进行限制。

您可以在移动应用程序中配置访问令牌。任何没有有效访问令牌的请求都被认为是恶意的。

# ember.js - 在运行时确定 Ember.TextField 的 valueBinding

> ID：16079309
> 
> 赞同：1
> 
> 时间：2013-04-18T09:31:33.600
> 
> 标签：ember.js

我正在尝试在 Ember.js 应用程序中创建一个通用编辑器页面。

我需要创建一些 TextField 来绑定到模型上的属性，但我只会在运行时知道该模型具有哪些字段。我的控制器有一个名为 metadata 的字段，它描述了这个通用编辑器表单的字段。我想遍历此元数据的内容并直接构建表单。基本上我正在尝试这样做：

```
{{#each row in metadata.rows}}
  {{#each element in row.elements}}
    {{element.fieldName}}: {{view Ember.TextField valueBindinding=model.get(fieldName)  }}<br>
  {{/each}}
{{/each}} 
```

这当然不起作用，因为 TextField 期望引用它可以绑定到的模型属性。

我在这里创建了一个小提琴来说明问题和我解决它的尝试：http: [//jsfiddle.net/ianpetzer/HAecb/](http://jsfiddle.net/ianpetzer/HAecb/)

谢谢你的帮助

# php - PHP Regex 在 WP Caption 中获取 img

> ID：16079310
> 
> 赞同：1
> 
> 时间：2013-04-18T09:31:36.490
> 
> 标签：php, regex, caption

我想在标题标签中获取 img 标签

例子：

```
[caption id="attachment_5433" align="aligncenter" width="413"]
    <a href="abc.jpg"><img class=" wp-image-5433" title="This is a title" src="abc.jpg" alt="This is alt" width="413" height="551"></a>This is a desc
[/caption] 
```

结果：

```
<img class=" wp-image-5433" title="This is a title" src="abc.jpg" alt="This is alt" width="413" height="551"> 
```

如何通过 PHP 正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:36:40.273

```
preg_match_all('/\[caption.*?\].*?(\<img[^>]*?).*?\[\/caption\]/', $stringWhereToSearchImg, $matches); 
```

比赛将有 img 标签。

顺便说一句，你没有结束 img 你应该用 /> 结束它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:49:56.503

```
<?php
    $string = '[caption id="attachment_5433" align="aligncenter" width="413"]
    <a href="abc.jpg"><img class=" wp-image-5433" title="This is a title" src="abc.jpg" alt="This is alt" width="413" height="551"></a>This is a desc
[/caption]';

    $result = preg_match_all("/\[caption.*?].*?(<img.*?\/?>).*?\[\/caption]/s", $string, $matches);

    print_r($matches);
?> 
```

**输出**

```
Array
(
    [0] : Array
        (
            [0] : '[caption id="attachment_5433" align="aligncenter" width="413"]
    <a href="abc.jpg"><img class=" wp-image-5433" title="This is a title" src="abc.jpg" alt="This is alt" width="413" height="551"></a>This is a desc
[/caption]'
        )

    [1] : Array
        (
            [0] : '<img class=" wp-image-5433" title="This is a title" src="abc.jpg" alt="This is alt" width="413" height="551">'
        )

) 
```

**更新，带有替换回调**

```
<?php
    $string = '[caption id="attachment_5433" align="aligncenter" width="413"]
    <a href="abc.jpg"><img class=" wp-image-5433" title="This is a title" src="abc.jpg" alt="This is alt" width="413" height="551"></a>This is a desc
[/caption]';

    echo preg_replace_callback('/\[caption.*?].*?(<img.*?\/?>).*?\[\/caption]/s', function($matches) {
        return $matches[1];
    }, $string);
?> 
```

# php - Uploadify：等待 move_uploaded_file 直到触发“onUploadSuccess”

> ID：16079313
> 
> 赞同：2
> 
> 时间：2013-04-18T09:31:50.647
> 
> 标签：php, uploadify

我正在尝试通过 uploadify 上传大型视频文件，但是一旦文件变大（> 800MB），onUploadSuccess 事件`move_uploaded_file`就会在完成之前触发。有没有办法让 uploadify 等待实际成功，甚至在完成上传和实际成功之间显示某种等待消息（如“完成上传”或其他内容）？
这是我的upload.php的代码：

```
if($video = wire('pages')->get($_POST['id'])) {
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];
    $targetFile = preg_replace('/ /','_',$targetFile);
    // Validate the file type
    $fileTypes = array('mov','mp4','m4v'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        if(move_uploaded_file($tempFile,$targetFile)) {
            $file = preg_split("/\//", $targetFile);
            $video->filename = array_pop($file);
            $video->video_status = 'transcode';
            $video->addStatus('Page::statusUnpublished');
            $video->save();
            echo $video->filename." gespeichert";
        }
    } else {
        echo 'Invalid file type.';
    }
}
} 
```

谢谢，
托马斯

# sql-server - SQL Server IDENTITY 跳过

> ID：16079321
> 
> 赞同：0
> 
> 时间：2013-04-18T09:32:09.840
> 
> 标签：sql-server, identity

我有一个使用 SQL Server 作为后端运行了大约 10 年的 .NET 应用程序。出于某种原因，在过去的 2-3 个月中，它决定跳过大约 990 个（我认为是 997 两次，989 一次）IDENTITY 号码 3 次。我想不出系统执行的任何活动会生成记录然后删除它们或尝试多次插入。这是一个非常间歇性的问题，但它很奇怪，我想深入了解它。有没有人对如何寻找原因有任何想法？

该系统混合了不同的技术——旧的东西是 ADO.NET，而新的东西是 Linq to SQL。我认为记录每个执行的语句或任何内容是不可行的，因为它是一个拥有大量用户的非常活跃的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:36:11.177

这是正常的 - 如果由于违反约束而导致更新尝试失败（例如，因为尝试插入`NULL`不可为空的列或不存在的外键），则标识字段将增加，但行将不插入。

下一个插入的行（假设它不会失败）将增加标识并插入，留下一个“间隙”。

这不是问题。

# java - 如何覆盖 Mockito 中的 settermethod？

> ID：16079326
> 
> 赞同：5
> 
> 时间：2013-04-18T09:32:47.047
> 
> 标签：java, mockito, setter, overwrite

我似乎无法弄清楚如何使用 Mockito 模拟一个简单的 setter 方法。我有以下课程：

```
class MyClass {
    private SomeObject someObject;

    public void setSomeObject(SomeObject someObject) {
        this.someObject = someObject;
    }

    public someObject getSomeObject() {
        return someObject;
    }
} 
```

现在我只想在调用“setSomeObject”时设置一个新的“SomeObject”实例。设置器中的参数也应该被忽略。

我需要这样的东西：

```
MyClass mockedClass = mock(MyClass.class);
when(mockedClass.setSomeObject([ignoreWhatsInHere]))
    .then(mockedClass.setSomeObject(new SomeObject(); 
```

但是，我似乎无法让语法为此工作。我只能使用 getters() 让模拟程序工作，因为这样我就可以返回一些东西。但我不知道如何为 setters() 做同样的事情。

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:59:06.980

You should be able to use the `doThrow()|doAnswer()|doNothing()|doReturn()` family of methods to perform a suitable action when testing methods that return void including setters. So instead of

```
when(mockedObject.someMethod()).thenReturn(something) 
```

you would use `doAnswer()` to return a custom Answer object, although it's not terribly elegant, and you might be better off using a stub:

```
doAnswer(new Answer() { 
    public Object answer(InvocationOnMock invocation) {
          //whatever code you want to run when the method is called
          return null;
  }}).when(mockedObject).someMethod();
} 
```

If you are trying to return different values from the same getter call, you may also want to look at mockito's consecutive stubbing calls, which will allow you to, for example, throw an error for the first call of a method, and then return an object from the second call.

see [http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#12](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#12) for more details on both of these.

# c# - 我在 XAML 中创建了一个带有渐变的简单按钮，它会自动保持“动画”吗？

> ID：16079333
> 
> 赞同：0
> 
> 时间：2013-04-18T09:33:01.483
> 
> 标签：c#, wpf, xaml, visual-studio-2012

我只是将此代码放在下面的 XAML 文件中。只是一个带有渐变的按钮，带有一个简单的 Messagebox.show ("hi"); 代码隐藏。这就是我在整个 WPF 项目中的全部内容。当我运行该项目并单击它时，它会按原样显示一个消息框，但是渐变会继续动画，从绿色到黄色...

**更新：这让我很烦恼，所以我录制了一个 5 秒的短片并上传到 youtube 上，你可以在这里看到它[http://www.youtube.com/watch?v=R4HxDqtC-_Y&feature=youtu.be](http://www.youtube.com/watch?v=R4HxDqtC-_Y&feature=youtu.be)**

XAML：

```
<Window x:Class="WPF1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525">
  <Grid>
    <Button Content="Hello "
            Width="100"
            Height="50"
            Click="Button_Click_1">
      <Button.Background>
        <LinearGradientBrush>
          <GradientStop Color="Yellow"
                        Offset="0" />
          <GradientStop Color="Green"
                        Offset="1" />
        </LinearGradientBrush>
      </Button.Background>
    </Button>
  </Grid>
</Window> 
```

为什么它一直在动画？我正在使用 VIsual Studio 2012 Ultimate。它应该在我退出消息框后停止。然后我添加了另一个没有代码的简单按钮。我可以通过单击第二个普通按钮让第一个渐变按钮停止动画。我觉得这种行为很奇怪。也许是一个临时错误或什么？

# php - 设置 plimus API 以获取身份验证令牌

> ID：16079336
> 
> 赞同：2
> 
> 时间：2013-04-18T09:33:04.643
> 
> 标签：php, xml, curl, libcurl, bluesnap

我需要设置 plimus API 以获取身份验证令牌，然后使用它将客户登录到 Plimus 平台。

我正在使用以下代码：

```
 $URL = "https://sandbox.plimus.com/services/2/tools/auth-token?shopperId=$shopperId&expirationInMinutes=$expiration";

// use base64 to encode the credentials
$authorization = base64_encode($username.':'.$password); 

$ch = curl_init();
// set URL
curl_setopt_array($ch, array(CURLOPT_URL => $URL));
// set headers
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: Basic $authorization", "Content-type: application/xml")); // This line is mandatory for every API call!
// set  HTTP request to GET
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET"); // This service (get token) is implement via RESTful GET, other services might use POST and PUT
// stop output of curl_exec to standard output (don't send output to screen)
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
// make HTTP call and read the response into an XML object

$xml = new SimpleXMLElement(curl_exec($ch));

// -------- PART II - Log the customer into Plimus (according to $target) --------

// construct plimus URL
$plimus = "https://sandbox.plimus.com/jsp/entrance.jsp?contractId=$contractId&target=$target&token={$xml->token}";
// redirect
header("Location: $plimus"); 
```

我收到以下错误，不知道为什么：

```
Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as
XML' in xxx\get_token.php:40 Stack trace: #0 xxx\get_token.php(40): 
SimpleXMLElement->__construct('') #1 {main} thrown in xxx\get_token.php on line 40 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:20:24.680

看起来这是我的代码，取自文章的第二部分：*[如何使用 API 改善客户体验和转换](https://alfasin.com/2013/02/21/improving-customer-experience-and-conversion-with-api/)*
:)

使用`var_dump(curl_exec($ch))`并查看您从服务器获得的确切响应！

# php - PHP 中 SCP 传输期间的警告

> ID：16079337
> 
> 赞同：0
> 
> 时间：2013-04-18T09:33:06.187
> 
> 标签：php, scp

我使用 scp 将文件传输到远程服务器，如下所示：

```
$connection = ssh2_connect('shell.example.com', 22);
ssh2_auth_password($connection, 'username', 'password');
ssh2_scp_send($connection, '/local/filename', '/remote/filename', 0644); 
```

对于大多数服务器，这可以正常工作。然而，一台远程服务器在传输文件时出现问题，该文件已被标记为不完整。

我发现[Files sent with ssh2_scp_send() are complete on remote server](https://stackoverflow.com/questions/7785094/files-sent-with-ssh2-scp-send-are-incomplete-on-remote-server)中的解决方案。

我只需要添加

```
ssh2_exec($connection, 'exit'); 
```

但是，在我进行此更改后，其他一些远程服务器似乎不支持退出命令。这将导致一个 php 警告：

```
PHP Warning:  ssh2_exec(): Unable to request command execution on remote host in FILE.php on line XX 
```

有谁知道这个问题的解决方案？显然，我可以忽略或抑制警告。然而，这在某种程度上感觉是错误的，特别是因为其余代码是免费的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:08:13.553

你能通过 CLI SCP 到服务器给出这个错误消息吗？：

```
PHP Warning:  ssh2_exec(): Unable to request command execution on remote host in FILE.php on line XX 
```

可能是`ssh2_scp_send()`通过 shell`ssh2_exec()`执行此操作，并且通过系统`exec`调用执行此操作（它们是不同的东西）并且您的服务器支持一个但不支持另一个。能够将日志视为[phpseclib 的 SCP 实现](http://phpseclib.sourceforge.net/)提供的日志会有所帮助，但可惜的是，libssh2 不会生成日志。

# java - 如何从 Java 中的哈希映射中获取所有最小值

> ID：16079338
> 
> 赞同：3
> 
> 时间：2013-04-18T09:33:12.140
> 
> 标签：java, hashmap

我有一个哈希映射，其中包含请求类型的键对象和整数类型的值。我使用以下代码遍历地图并获取所有最小值，然后将它们的键添加到列表中。我向所有强调，因为键是唯一的，但值可以重复，因此可能有多个地图元素具有最小值。

然而，这段代码只给了我一个这样的元素，即它通过迭代找到的第一个元素，即使我知道还有更多。例如，假设地图有以下请求 - 即键（我给出请求 ID）： 3 | 5 | 2 及其各自的值是： 8 | 4 | 4\. 因此，在此示例中，我们有两个最小元素，即共享最小值的两个元素 ID 5 和 ID 2，两者的值都为 4。代码将仅将 ID 为 5 的元素添加到我的列表中，即是，他们中的第一个。

我必须注意有一个类似的线程（[Key for maximum value in Hashtable](https://stackoverflow.com/questions/10005053/key-for-maximum-value-in-hashtable)），但提供的解决方案在我的情况下不起作用。

这是代码：

```
 Entry<Request, Integer> min = null;

 List<Request> minKeyList = new ArrayList<Request>();

 for(Entry<Request, Integer> entry : this.map.entrySet()) {

      if (min == null || min.getValue() > map.getValue()) {

           min = entry;
           minKeyList.add(entry.getKey());

      } 
```

任何建议或解释为什么会发生这种情况将不胜感激。

编辑：新方法

好吧，我找到了解决方案。它并不优雅，但它确实有效。这是代码。

```
 // list for finding the min value
    List<Integer> minValList = new ArrayList<Integer>();

    // List for keeping the keys of the elements with the min value
    List<Request> minKeyList = new ArrayList<Request>();

    // scan the map and put the values to the value list
    for(Entry<Request, Integer> entry : this.map.entrySet()) {

        minValList.add(entry.getValue());

    }

    // scan the map   
    for(Entry<Request, Integer> entry: this.map.entrySet()) {

        // find the min value
        if(entry.getValue() == Collections.min(minValList)) {

            // add the keys of the elements with the min value at the keyList
            minKeyList.add(entry.getKey());

       }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:38:58.183

我建议您*分两步进行*：

1.  找到最小值，存储在`min`
2.  查找值等于的所有元素`min`

这是一个代码示例：

```
// find minimum first
int min = Integer.MIN_VALUE;
for(Entry<Request, Integer> entry : this.map.entrySet()) {
    min = Math.min(min, map.getValue())
}

// add all elements that have a value equal to min
List<Request> minKeyList = new ArrayList<Request>();
for(Entry<Request, Integer> entry : this.map.entrySet()) {
    if(min.getValue() == min) {
        minKeyList.add(entry.getKey());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:48:21.367

正如 Matthias Meid 所说，您必须使用 a`>=`而不是 a `>`。

此外，如果认为你应该有这样的东西，或者你的 minKeyList 将包含所有的值`min`。

```
if(min == null || min.getValue() >= map.getValue()) {
    if(min == null || min.getValue() > map.getValue()){
        min = entry;
        minKeyList.clear();
    }
    minKeyList.add(entry.getKey());
} 
```

**编辑：测试代码**

我用一些示例代码测试了这个方法，它似乎工作正常。

这是我用来测试它的代码：

```
public static void main(String[] args) {

    HashMap<Integer, Integer> map = new HashMap<>();
    map.put(7, 12);
    map.put(3, 3);
    map.put(1, 10);
    map.put(4, 12);
    map.put(6, 3);
    map.put(8, 3);
    map.put(9, 13);
    Entry<Integer, Integer> min = null;
    List<Integer> minKeyList = new ArrayList<Integer>();

    for(Entry<Integer, Integer> entry : map.entrySet()) {

        if (min == null || min.getValue() >= entry.getValue()) {
            if(min == null || min.getValue() > entry.getValue()){
                min = entry;
                minKeyList.clear();
            }
            minKeyList.add(entry.getKey());
        }
    }

    for (Integer integer : minKeyList) {
        System.out.println(integer);
    }
} 
```

为了简化我的测试，键和值都是整数，但它不应该改变任何东西。

不，这是我的输出：

```
3
6
8 
```

对我来说似乎是对的。如果这没有帮助，请尝试发布更多代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T14:24:50.617

您可以通过使用 2 个列表/集来避免多个循环，例如

循环开始前

```
 Set setExisting = new HashSet();
    Map keyMap = new HashMap();
    // find minimum first
    int min = Integer.MIN_VALUE;`enter code here`
    for(Entry<Request, Integer> entry : this.map.entrySet()) {
    Set newSet= new HashSet<String>();
        min = Math.min(min, map.getValue());
        newSet.add(map.getValue(min));
        keyMap.put(min,newSet);
        if (min==map.getValue()){
           setExisting = (Set) keyMap.get(newSet);
           setExisting.add(map.getValue(min));
           keyMap.put(min,setExisting);
         }
  }

  // We will NOT need the below loop in that case
  // add all elements that have a value equal to min
  List<Request> minKeyList = new ArrayList<Request>();
  for(Entry<Request, Integer> entry : this.map.entrySet()) {
    if(min.getValue() == min) {
        minKeyList.add(entry.getKey());
    }
} 
```

# c - 无法在 gcc 中禁用 sse

> ID：16079340
> 
> 赞同：2
> 
> 时间：2013-04-18T09:33:21.587
> 
> 标签：c, disassembly

我正在尝试禁用 sse 和 sse2 指令。我在 x64 系统中为 x86 进行交叉编译。我还使用 -static 与 libc 进行静态链接。虽然我使用 -mno-sse 和 -mno-sse2，但当我反汇编二进制文件时，我仍然看到对 strcpy_sse2 的调用，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:37:58.267

对于 64 位使用 -mno-sse gcc 选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:39:07.750

您的库很可能仍然包含 sse 指令。您还必须为您的跨系统构建库，并且在没有 sse 指令的情况下执行此操作。

# solr - 如何在 solr 查询中使用组响应方面的方面？

> ID：16079353
> 
> 赞同：0
> 
> 时间：2013-04-18T09:34:00.403
> 
> 标签：solr, faceted-search

我想在组查询返回的特定字段上使用 facet。我的意思是，组查询返回 100 个文档字段 video_format 并且在这 100 个文档中，一个特定字段说 video_id 值在不同文档中是相同的，所以我想使用字段名称 video_id 进行分面，以便获得特定 video_format 的这些视频 id 的计数。如果您有解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:57:13.717

[group.facet](http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters)应该允许您对组结果进行分面。

# javascript - 奇怪的评估输出

> ID：16079354
> 
> 赞同：-3
> 
> 时间：2013-04-18T09:34:00.833
> 
> 标签：javascript, eval

试试下面的代码片段，它给出了奇怪的结果。谁能解释一下？

```
var s = "10+10";
alert("Evaluation 1: " + eval(s+s+s)); // 2040
alert("Evaluation 2: " + eval(s+2));   // 112 
```

我期望的输出是 30 和 22

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:37:36.060

一点都不奇怪：

```
s + s + s === "10+10" + "10+10" + "10+10" === "10+1010+1010+10" => 2040
s + 2 === "10+10" + "2" === "10+102" => 112 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-18T09:38:24.620

从引号中取出`s`变量：

```
var s = 10 + 10; 
```

**回报**

评价一：60

评价2：22

# objective-c - 确定哪个动作称为方法

> ID：16079356
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:34:09.570
> 
> 标签：objective-c

我有一个链接到两个动作 touchDown 和 touchUpInside 的按钮。这两个动作都调用相同的方法。我需要知道的是哪个动作调用了该方法，所以我可以在同一个方法中按下和释放按钮时执行不同的指令。

我尝试查看按钮状态属性，但它似乎没有改变，或者 touchDown 操作在按钮状态更改之前触发事件，而 touchUpInside 操作在按钮状态变回后触发它，导致状态似乎没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:41:50.863

在 IOS 中无法确定调用该方法的事件。但是，根据您的要求，首先 TouchDown 事件将调用该方法，然后只有 TouchUpInside 事件将调用该方法。基于这个事件触发的顺序，您可以管理方法内的代码是可能的。

# azure - 将使用 Google 应用程序管理的网址设置为重定向到外部网站

> ID：16079358
> 
> 赞同：0
> 
> 时间：2013-04-18T09:34:12.087
> 
> 标签：azure, dns, google-apps, cname, a-records

我有一个使用 Google Apps 管理的域（电子邮件、日历等）。

我希望当用户访问裸域名（即 mydomain.com 或 www.mydomain.com）时，它应该重定向到存储在 Windows Azure 中的网站。

现在这是我尝试通过 Windows Azure 执行此操作时看到的内容：

> 您可以将自定义域名指向您的 Windows Azure 网站。Windows Azure 必须验证您是否有权配置自定义域名以指向您的 Windows Azure 网站。要验证授权，请使用您的 DNS 提供商创建一个 CNAME 资源记录，该记录从 www.yourdomain.com 指向 mydomain.azurewebsites.net，或从 awverify.www.mydomain.com 指向 awverify.mydomain.azurewebsites.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:00:12.890

我一步一步找到了这篇博文，解释了如何做到这一点：

[如何：为多个基于子域的 Azure 网站配置自定义 DNS 名称](http://stefanjohansson.org/2012/12/how-to-configure-custom-dns-names-for-multiple-subdomain-based-azure-web-sites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T14:17:03.890

您将使用控制面板进行域的 dns 设置。这通常由您用于购买域的注册商/网络酒店提供。据我所知，谷歌仍然没有将域名作为实际的注册商来管理，所以你可能会让其他人管理它。

控制面板应该有一个用于 dns 管理的页面，其中已经有大约 20 个 Google 应用程序条目。将 www 和裸域 A 条目更改为指向 Azure 中指定的 IP 地址，并根据 Azure 的要求为 awverify 添加其他 CNAME 条目。

# c++ - 如何计算两个多重集的就地集差异？

> ID：16079362
> 
> 赞同：7
> 
> 时间：2013-04-18T09:34:14.773
> 
> 标签：c++

假设我有两个多重集。我想从第一个多重集中删除第二个多重集中出现的所有元素，*尊重每个元素在每个多重集中出现的次数*。例如，如果 multiset`a`包含`1`5 次， multiset 包含`b`2 次，当我计算 时，应该只删除 的`a -= b`两个实例。`1``a`

这是一些完成此操作的代码：

```
 multiset<int> a;
 multiset<int> b;

 // remove all items that occur in b from a, respecting count ("a -= b")
 for (multiset<int>::iterator i = b.begin(); i != b.end(); i++) {
    if (a.count(*i) < 1) {
       // error 
    }
    // a.erase(*i) would remove ALL elements equal to *i from a, but we 
    // only want to remove one.  a.find(*i) gives an iterator to the first
    // occurrence of *i in a.
    a.erase(a.find(*i));
  } 
```

当然有更好/更惯用的方式吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T09:57:04.647

虽然`std::set_difference`需要您将元素放入一个新集合中，但您当然仍然可以通过将元素从原始集合移动到新集合中并在之后交换两者来优化它（好吧，因为*s*`int`移动不是必需的，但是这样算法保持灵活和通用）。

```
std::multiset<int> c;
std::set_difference(std::make_move_iterator(a.begin()), 
                    std::make_move_iterator(a.end()), 
                    b.begin(), b.end(), 
                    std::inserter(c, c.begin()));
a.swap(c); 
```

不完全就地，但*几乎*并且仍然非常惯用，同时在复杂性上是线性的（因为`std::insert_iterator`总是会提供适当的提示`std::multiset::insert`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:43:32.797

见[std::set_difference](http://www.cplusplus.com/reference/algorithm/set_difference/)

它也适用于多组。

来自最新草案[n3485](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf) 25.4.5.4 [set.difference]

```
Remarks: If [first1,last1) contains m elements that are equivalent to each other and
[first2, last2) contains n elements that are equivalent to them, the last max(m−n,0)
elements from [first1, last1) shall be copied to the output range. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T09:44:59.817

由于容器是有序的，您可以同时遍历这两个容器，跳过仅在一组中的值；就像是：

```
for (auto i = a.begin, j = b.begin(); i != a.end() && j != b.end();) {
    if (*i < *j) {
        ++i;
    } else if (*j < *i) {
        ++j;
    } else {
        i = a.erase(i);
        ++j;
    }
} 
```

`count`这具有线性复杂性，避免了对和的对数时间调用`find`。

或者，如果您不介意将要保留的元素移动到新地图中，则可以使用`std::set_difference`. 不过，这可能不是线性时间，因为每个元素都需要插入到输出映射中。

更新：在进一步调查中，这似乎`std::set_difference`是线性的，因为在给出合适的提示时插入需要是线性的，并且`insert_iterator`会提供正确的提示。因此，如果您不介意构建新的多重集会使用额外的内存，那么这可能被认为更惯用。

# django - Django 如何使用多个关键字进行过滤

> ID：16079363
> 
> 赞同：-4
> 
> 时间：2013-04-18T09:34:15.090
> 
> 标签：django

我正在根据“keyskill”从数据库中过滤数据。例如，我有以下技能

1.  爪哇
2.  Python
3.  django
4.  html
5.  CSS

在我的搜索框中使用关键字“python”进行过滤时，与该关键字相关的数据是从 db 中获取的。但是当我在搜索框中使用关键字“python,Java”进行搜索时，没有获取任何详细信息。

如何使用两个关键字过滤数据库中的数据。

*视图.py*

```
def search_result(request):

    search = request.GET['skills']
    query = Q(key_skills__icontains=search )
    details = jobs.objects.filter(query)
    return render_to_response('registration/searchresult.html', {'details': details}) 
```

*模型.py*

```
class jobs(models.Model):
    title = models.CharField(max_length=30)
    jobsummary = models.TextField()
    jobdetails = models.TextField()
    key_skills = models.CharField(max_length=30)
    min_exp = models.IntegerField(default=0)
    max_exp = models.IntegerField(default=0) 
```

> 例如，在我的工作表中有 5 条记录具有关键技能（1.java 2.Python 3.Html ..etc..）在搜索框中输入为“Java”时，它显示了他们的详细信息，但在搜索框中输入为“java”时Html" 它不显示任何内容，所以我需要在这里显示 java 和 html 详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:00:12.637

文件.html

```
$(document).keypress(function(event){
    var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){
        var keyword = $("#id_search_field").val();
        if ( keyword == 'SEARCH') {
            keyword = '';
        }
        if ((keyword != '')){
            window.location.href = "/search_view/?key=" + keyword
        }
        window.location.href = "/search_view/?keyword=" + keyword

        }
    });

    function keyword(){

        var keyword = $("#id_search_field").val();
        if ( keyword == '{% trans "SEARCH" %}') {
            keyword = '';
        }
        if (keyword != ''){
            window.location.href = "/search_view/?key=" + keyword
        }
        window.location.href = "/search_view/?keyword=" + keyword

    }

    <body>

    <input type="text" name="place" placeholder="SEARCH" id="id_search_field"/></div>
    <div class="searc">
      <a href="#"><img src="/static/img/admin/search.png" alt="searchbox" onClick="keyword();"/></a>
    </div>
    {% for i in list %}
      {{i.keyskill}}
    {% endfor %}   

    </body> 
```

search_view(你的意见.py)

```
def search_view(request): 
    key = request.GET.get('keyword')
    if key is not None: 
        key = key.lstrip()
    if key :
        list = Dbtablename.objects.filter(Q(keyskill__icontains = key)).order_by('-modified_at')
    else:
        list = Dbtablename.objects.filter().order_by('-modified_at') 
```

# asp.net-mvc - 从 View ASP.NET MVC 调用方法

> ID：16079370
> 
> 赞同：0
> 
> 时间：2013-04-18T09:34:29.673
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我刚刚开始使用 ASP.NET MVC。我的控制器类中有以下内容。

```
 public ActionResult Test()
        {
           return View();
        }

        public string MyName()
        {
            return "chamara";
        } 
```

如何在我的测试视图上打印 MyName() 方法的返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:36:36.723

在您的控制器中，`Test()`像这样修改操作：

```
public ActionResult Test()
{
    ViewData["MyName"] = "chamara";

    return View();
} 
```

然后在`Test.aspx`视图中，您可以使用 显示名称`<%= ViewData["MyName"] %>`。

更好的是，正如 Dave A 在他的评论中提到的那样，将创建一个包含您想要显示的信息的模型，并创建一个知道如何显示该信息的强类型视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:45:24.033

对我来说最好的解决方案是`Html.Action`or `Html.RenderAction`helpers

[Phil Haack](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)是一个很好的资源（虽然有点旧）

# jquery - 从 onclick 中获取括号中的值

> ID：16079371
> 
> 赞同：0
> 
> 时间：2013-04-18T09:34:39.923
> 
> 标签：jquery

是否可以从`onClick`函数中获取纬度和经度？

```
<a href="javascript:void(0)" onClick="findLocation('6.443663,3.419248');return false;" id="Lagos">Lagos, Nigeria</a>

<a href="javascript:void(0)" onClick="findLocation('3.15021, 101.707703');return false;" id="Kuala">Kuala Lupar, Malaysia</a>

<a href="javascript:void(0)" onClick="findLocation('24.9952447639, 55.0559356887');return false;" id="Dubai">Dubai, U.A.E.</a> 
```

如果可能的话，我想将`findLocation`函数中的数字放入一个数组中。

**添加注意** 该`findLocation`功能在地图上绘制我的位置并专注于该位置。我需要尝试从每个 onClick 中获取纬度和经度，并以某种方式让这些在页面加载时绘制我的点。

```
function findLocation(address) {
    var address = document.forms[0].q.value = address;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
//          marker.setMap(null);
        } else {
            alert('Geocode was not successful for the following reason: ' + status);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:44:24.467

你在找类似的东西吗

```
var obj = {};
$('a').each(function(){
    var $this = $(this);
    var text = $this.attr('onClick').replace('findLocation(\'', '').replace('\');return false;', '');
    var array = text.split(',')
    obj[this.id]= [parseFloat(array[0]), parseFloat(array[1])];
});
console.log(obj) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Ck3NP/1/)

# iphone - 替换 NSMutablearray 目标 c 索引处的对象？

> ID：16079380
> 
> 赞同：-6
> 
> 时间：2013-04-18T09:35:12.743
> 
> 标签：iphone, ios

主数组：

```
 (
    "Thursday, Apr 18,2013",
    xyz,
        (
        "give ",
        "lv"
    ),
        (
        "wed",
        "mon"
    )

  ) 
```

对于主数组，我需要添加子数组：

```
Sub Array : (
  "hi"
) 
```

当单击某些 x 按钮子数组对象时，示例会增加：

```
Sub Array : (
"hi"
"hello"
) 
```

如何添加到主阵列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:37:31.440

您可以使用 ：

```
[array replaceObjectAtIndex:index withObject:newObject]; 
```

# avisynth - 如何在 AviSynth 中获取当前帧号？

> ID：16079385
> 
> 赞同：0
> 
> 时间：2013-04-18T09:35:39.937
> 
> 标签：avisynth

在 AviSynth 中，有没有返回当前帧号的函数？如果没有，我怎样才能得到当前的帧号？

这是我的问题，但对于质量标准：
目标是在条件语句中使用它，以便在将编码与其源进行比较时清楚地看到什么。类似于以下内容。

```
a=import("source.avs")
b=ffvideosource("encode.mkv")
interleave(a,b)
media = ((currentFrame % 2 > 0) ? "Encode" : "Source")
subtitle(media) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T14:23:44.323

可以在 PotPlayer 或其他支持 AVISynth 并可以逐帧播放的播放器中创建同时显示两个视频的时间和帧数。PotPlayer 使用“F”键前进，使用“D”键后退。这是通过安装 AVISynth 和 AVS 脚本创建的：

```
LoadPlugin("C:\Program Files (x86)\AviSynth 2.5\plugins\ffms2.dll")
V1 = FFVideoSource("Wham!Last Christmas.mp4")
V2 = FFVideoSource("Wham!Last Christmas.mp4")
stackvertical(v1,v2)
ShowFrameNumber(scroll=true, x=20, y=40, font="Arial", size=24, text_color=$ff0000)
ShowTime(x=82, y=64, font="Arial", size=24, text_color=$ff0000)
ShowSMPTE(fps=24, x=78, y=88, font="Arial", size=24, text_color=$ff0000) 
```

添加 FPS=24 以防 fps 不准确。V1 和 V2 在这里是同一个文件，但不一定是，FFMS2.dll 是 ffmpeg 视频加载器，但您可以使用 directshowsource 并消除加载插件 ffms2 为：

```
V1 = DirectShowSource("Wham!Last Christmas.mp4")
V2 = DirectShowSource("Wham!Last Christmas.mp4")
stackvertical(v1,v2)
ShowFrameNumber(scroll=true, x=20, y=40, font="Arial", size=24, text_color=$ff0000)
ShowTime(x=82, y=64, font="Arial", size=24, text_color=$ff0000)
ShowSMPTE(fps=24, x=78, y=88, font="Arial", size=24, text_color=$ff0000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T20:41:42.763

有一个名为 *current_frame* 的运行时变量。但是要以这种方式获得您想要的东西，您应该使用*ConditionalFilter*函数：[http ://avisynth.org/mediawiki/ScriptClip](http://avisynth.org/mediawiki/ScriptClip)

解决此任务的另一种方法，我认为这更简单：

```
a=import("source.avs").subtitle("Source")
b=ffvideosource("encode.mkv").subtitle("Encode")
interleave(a,b) 
```

# php - Strpos 不工作。我正在用它来搜索号码

> ID：16079388
> 
> 赞同：0
> 
> 时间：2013-04-18T09:35:50.953
> 
> 标签：php, strpos

我正在尝试建立一个带有或不带有炸弹的桌子（6x6）。我正在使用以下方法将 36 个块中的 10 个炸弹随机化。但它每次都给我炸弹。

```
 $i = 1;
    $numbers = null;
    $j = 0;
    while ($j < 10)
    {
        $sample = rand (1,36);
        if (strpos($numbers, $sample) === false) 
        {
            $numbers = $numbers."".$sample.",";
            $j++;
        }
    }

    echo $numbers;

    while ($i < 37)
    {
        if (strpos($numbers, $i) !== false)
        {
            echo '<td><button value="safe" onclick="bombcheck(this.id)"
            id="'.$i.'" class="closed"></button></td>';
        }
        else
        {
            echo '<td><button value="bomb" onclick="bombcheck(this.id)"
            id="'.$i.'" class="closed"></button></td>';
        }
        if ($i%6 == 0) 
        {
            echo "</tr><tr>";
        }
        $i++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:39:15.113

您正在以错误的方式处理此问题。由于您要累积 10 个数字，因此请使用数组来保存它们。此外，由于您想从 36 个中选择 10 个（这是一小部分的相当大的一部分），因此最好的方法是：

```
$squares = array_fill_keys(range(1, 36), true);
$bombs = array_rand($squares, 10); 
```

然后，您可以检查 square $x 是否有炸弹

```
$hasBomb = in_array($x, $bombs); 
```

# apache-camel - 在camel dsl中解组xml时内存不足

> ID：16079391
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:35:57.140
> 
> 标签：apache-camel, unmarshalling

我在下面的代码中面临OOM问题

```
from("file://" + getDumpDirLocation() + "?maxMessagesPerPoll=1&bufferSize=8192")
                .unmarshal().string("UTF-8") 
```

转储到目录位置的 xml 文件很大（有时 1G）。

我还尝试通过添加自定义处理器 - 但没有成功，

```
from("file://" + getDumpDirLocation() + "?maxMessagesPerPoll=1&bufferSize=8192")
.process(this.getRemoveInvalidXmlCharacterProcessor()) 
```

有没有办法避免这种内存不足异常？

所以基本上处理器中的 exchange.getIn().getBody(String.class) 会抛出 OOM，因为考虑到转储 XML 文件的大小，对象结构很大。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:23:52.283

将 1GB 的文件读入内存真的不是一个好主意。而是使用流式传输以“块”形式读取文件。

如果您想处理大型 XML 文件，请阅读其中一些文章，您可以在此处找到：http: [//camel.apache.org/articles](http://camel.apache.org/articles)关于拆分大型 xml 文件。只需在该页面上搜索 xml，即可找到链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:47:11.473

这是 Java 内存异常。我认为与骆驼无关。分离到定制处理器不会有任何区别。

您必须*增加 JVM 的运行时内存*。如果您使用的是 Eclipse，请将 -Xmx2048M 设置为您打算运行的特定应用程序的运行配置下的 VM 参数。

如果在任何其他环境中，您可以进行简单搜索以了解如何增加 java heapsize 并且应该可以解决问题。

# android - 与arduino + GSM Module + android app无线通信

> ID：16079394
> 
> 赞同：2
> 
> 时间：2013-04-18T09:36:05.290
> 
> 标签：android, web-services, arduino, gsm

我一直在尝试获取有关 GSM/GPRS 模块如何与通过静态 IP 地址连接到 Internet 的 PC 进行双向通信的一些信息。我已经查看了这个论坛上的可用帖子以及其他一些帖子，并阅读了一些关于这个主题的教程。以下是我迄今为止设法收集的内容，并希望获得其他成员对此主题的专家意见。

1 - PC 无法直接发起与 GSM/GPRS 模块的连接。数据会话始终必须先由 GPRS 模块发起，然后 PC 才能与其通信。

2 - PC 只能通过 GGSN 在网络上分配的动态 IP 地址与 GPRS 模块通信。只有在 GPRS 模块启动数据会话后，PC 才能访问此 IP 地址。如果 GPRS 连接因任何原因（即用户或网络或由于意外的链接故障）而终止，此 IP 地址可能会更改。在这种终止的情况下，GPRS 模块必须重新启动一个新的 PDP 会话，以便 PC 再次与模块通话。否则，PC 将无法向 GPRS 模块发送数据，因为它不知道重新连接到 GSM 网络后分配给模块的更新 IP 地址。

3 - 正如 M2M.com 的各种帖子中所讨论的，PC 与 GPRS 模块发起数据会话的唯一方法是发送一条内容相当于“call home”的 SMS，提示 GPRS 模块开始数据会话从 PC 接收待处理的数据。

4 - 无法在 GPRS 模块上预定义固定 IP 地址表以在数据会话期间使用。IP 地址分配始终由 GPRS 模块注册到的 GSM 网络完成，并且无法预先知道或固定。不能对可以分配给 GPRS 模块的 IP 地址池做出任何假设。

感谢您对本次讨论的所有意见和兴趣。

# python - Blender 通过单击对象打开超链接

> ID：16079398
> 
> 赞同：0
> 
> 时间：2013-04-18T09:36:20.880
> 
> 标签：python, url, hyperlink, blender

是否可以通过单击对象来动态打开网页？如果是这样，如何实现？链接到底层文件系统怎么样？我正在使用自定义属性来保存 URL，但无法调用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:03:38.053

你试过使用`webbrowser`吗？

```
import webbrowser
webbrowser.open('http://thisisaurl.org') 
```

# javascript - bootstrap-wysihtml5 不工作

> ID：16079406
> 
> 赞同：2
> 
> 时间：2013-04-18T09:36:46.550
> 
> 标签：javascript, twitter-bootstrap, textarea, wysiwyg

我想在正在设计的网页中包含一个所见即所得的编辑器。我遇到了[bootstrap-wysihtml5](http://jhollingworth.github.io/bootstrap-wysihtml5/)。从外观上看，这正是我想要的（简单而优雅）。我想看一个例子，但没有多少好的例子可以展示如何设置它。到目前为止，我已经这样做了：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Editor</title>
    <link rel="stylesheet" type="text/css" media="screen" href="bootstrap-wysihtml5.css"/>
    <script src = "bootstrap-wysihtml5.js" type = "text/javascript"></script>
    <script src = "wysihtml5-0.3.0.min.js" type = "text/javascript"></script>
    <script src = "bootstrap.min.js" type = "text/javascript"></script>
</head>
<body>
   <textarea class="textarea" id="ta1" placeholder="Enter text ..." style="width: 810px; height: 200px">
   </textarea>
   <script>$(".textarea").wysihtml5();</script>
<body>
</html> 
```

这些是 chrome 控制台中的错误：

```
Uncaught TypeError: Cannot read property 'fn' of undefined             bootstrap-wysihtml5.js:368
Uncaught TypeError: undefined is not a function                        bootstrap.min.js:6
Uncaught TypeError: Object [object Object] has no method 'wysihtml5'   editor.html:14 
```

我不知道如何解决这些错误，您认为哪里出错了？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T10:46:05.097

您需要包含 jQuery 才能使其工作，作为您案例中的第一个脚本元素。

Bootstrap 高度依赖 jQuery，可能还有“wysihtml5”-插件，所以 jQuery 必须在这些之前包含。

您甚至可以通过错误日志看到这一点：

第一个提示是`fn`：

```
Uncaught TypeError: Cannot read property 'fn' of undefined 
```

`fn`基本上是`prototype`jQuery 的“包装器”，bootstrap 尝试在该行的 jQuery 原型中添加一些东西。

第二个提示：

```
Uncaught TypeError: Object [object Object] has no method 'wysihtml5' 
```

`$`默认情况下绑定到 Chrome 中的选择器函数，因此在这种情况下它返回一个普通的 HTML 元素，而不是一个 jQuery 对象。wysihtml5 很可能会将自己绑定到 jQuery - 原型，因此可以以这种方式在 jQuery 元素上调用它。由于 jQuery 不存在，您尝试调用一个`Object`在这种情况下不存在的普通函数。

# php - 加泰罗尼亚字符 à 和 è 不适用于 php imagestringup - 如何解码它们？

> ID：16079407
> 
> 赞同：3
> 
> 时间：2013-04-18T09:36:51.640
> 
> 标签：php, unicode, utf8-decode, unicode-escapes

当我用 $text 和西班牙语调用下面的代码时，我得到了正确的带有图像的文本，但是当我用加泰罗尼亚语用 $text 调用相同的代码时，我没有在图像中得到正确的文本。我知道西班牙语特殊字符**á 和 é**有效，但加泰罗尼亚语字符**à 和 è**无效。

你能帮我纠正这个问题吗？

```
 <?php
    //$text = "Sándalo Ayurvédicos"; // Text in Spanish 
    $text = "Sàndal Ayurvèdics";  // Text in Catalan
    //$text = utf8_encode($text);
    //$text = utf8_decode($text);
    $img = "sample";
    $im = imagecreatetruecolor(25, 350);
    $black = imagecolorallocate($im, 0, 0, 0);
    imagecolortransparent($im, $black);
    $textcolor = imagecolorallocate($im, 73, 100, 23);
    imagestringup($im, 3, 10, 340, $text,$textcolor);
    imagepng($im, $img.'.png');
    imagedestroy($im);
    $imagename = $img.'.png';
    print '<img src="'.$imagename.'"></img>';
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:22:45.533

该`$string`参数在 PHP 中是极其模糊的，因为 PHP 中的字符串不携带编码，PHP 根本没有统一字符串的编码。换句话说，它们是字节数组，不像字符串通常在高级语言中，所有字符串都具有内部统一的 unicode 编码，并且这样的参数不会有歧义。

我从评论中读到该字符串必须在 ISO-8859-2 中，它只支持`á`但不支持`à`.

您可以使用[`imagettftext`](http://www.php.net/manual/en/function.imagettftext.php)记录在案的字符串以 UTF-8 编码获取字符串，这很好，因为至少可以绘制所有字符。但它需要 TrueType 字体，我在这里使用 Arial Unicode：

```
<?php
header("Content-Type: image/png");

$text = "汉语/漢語"; //My PHP is already saved as UTF-8 in text editor - no conversion necessary

$im = imagecreatetruecolor(25, 350);
$black = imagecolorallocate($im, 0, 0, 0);
imagecolortransparent($im, $black);
$textcolor = imagecolorallocate($im, 73, 100, 23);

            //270 is the angle, from up-to-bottom
imageTtfText( $im, 12, 270, 10, 10, $textcolor, "./arial_unicode.ttf", $text );
        //12 is font size
//Camel-cased because imagettftext just looks horrible and php is case-insensitive

imagepng($im);
imagedestroy($im); 
```

这是上面代码生成的图像：

![http://i.imgur.com/pUxibBf.png](https://i.stack.imgur.com/Qozd7.png)

# javascript - 根据一组规则动态修改链接（Greasekit / Javascript）

> ID：16079410
> 
> 赞同：1
> 
> 时间：2013-04-18T09:36:55.793
> 
> 标签：javascript, greasemonkey, greasekit, fluid-mac-app-engine

我有一个包含大量条目的 HTML 页面，如下所示：

```
<a href="https://www.example.co.uk/gp/wine/product?ie=UTF8&amp;asin=123456789&amp;tab=UK_Default" class="PrmryBtnMed" 
```

我想替换所有这些链接，所以它们是：

```
https://www.example.co.uk/gp/wine/order?ie=UTF8&asin=1233456789 
```

所以，这是一个相当复杂的搜索和替换。这些是人类的指令：

1.  看网址。只记下“asin=”后面的数字。（忘记之前的一切和之后的一切）
2.  然后，使用此 ASIN 形成一个新 URL。它总是这样开始： `https://www.example.co.uk/gp/wine/order?ie=UTF8&asin=`

数字卡在最后形成：

```
https://www.example.co.uk/gp/wine/order?ie=UTF8&asin=123456789 
```

请注意

*   除了修改现有按钮之外，还可以在原始按钮附近添加一个新按钮 [或链接]
*   原始链接和新链接都指向同一个域
*   我在名为 FluidApp 的 SSB 上使用 Greasekit，但我可以在 FireFox 上切换到 Greasemonkey。

我刚刚观看了 40 个 JavaScript 教程视频——这门语言很难！这似乎极其困难。我将非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:14:16.737

像这样的东西可能会起作用：

```
// the new base url
var base = ' https://www.example.co.uk/gp/wine/order?ie=UTF8&asin=';
// all the links with className 'PrmryBtnMed'
var links  = document.getElementsByTagName('a');

for(var i = 0;i < links.length;i++){
    // check each link for the 'asin' value
    var result = /asin=([\d\w]+)/.exec(links[i].getAttribute('href'));
    if(result){
        // make a new url using the 'base' and the 'asin' value
        links[i].setAttribute('href', base+result[1]);
    }
} 
```

演示：http: [//jsfiddle.net/louisbros/L8ePL/](http://jsfiddle.net/louisbros/L8ePL/)

# android - Android LoginButton：发生错误。请稍后再试（无效的应用程序 ID：提供的应用程序 ID 无效。）

> ID：16079416
> 
> 赞同：1
> 
> 时间：2013-04-18T09:37:12.527
> 
> 标签：android, facebook-android-sdk

[我按照教程“使用 Facebook 登录](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)”做了一个演示。

我在 MainFragment 中设置了这段代码：

```
LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
authButton.setFragment(this);
authButton.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
authButton.setReadPermissions(Arrays.asList("user_likes", "user_status")); 
```

使用第二个帐户登录时遇到错误。我的意思是我之前用另一个帐户成功登录过。然后我退出，并尝试使用第二个帐户登录。

它显示一个错误对话框，显示消息“发生错误。请稍后再试”，标题为“错误”，右侧有一个“确定”按钮。

我试图看到错误添加下面的代码。我明白了，但我现在仍然不明白该怎么做。

```
authButton.setOnErrorListener(new OnErrorListener() {
        @Override
        public void onError(FacebookException error) {
            Log.e("test", "error: "+error.getMessage());
        }
    }); 
```

它显示：

```
error: kError 1349040: Invalid Application ID: The provided Application ID is invalid. 
```

但是当我之前尝试使用该帐户登录时，它又成功了。

在这个错误之前，我遇到过这个错误：

```
remote_app_id does not match stored id 
```

我将设置中的密钥哈希更改为推荐的“ [Android 版 Facebook SDK 入门](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)”。添加代码：

```
 // Add code to print out the key hash
    try {
        PackageInfo info = getPackageManager().getPackageInfo(
                "com.facebook.samples.hellofacebook", 
                PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
    } catch (NameNotFoundException e) {

    } catch (NoSuchAlgorithmException e) {

    } 
```

使其登录成功。

另外，我尝试使用发布密钥并签署我的apk。结果是一样的。一个帐户可以，另一个不能。

现在，这几天，我又试了一次。错误消失了。只显示一个白色对话框，左上角只有一个删除按钮。

注意：我使用 Facebook SDK for Android V3.01。

**[问题已解决]**

有两个因素导致了这个问题。

首先，这是我的 Openssl 实用程序错误。然后我从使用 Facebook 登录中推荐的文档下载它

其次，默认情况下选中沙箱。正如Anton Roy在答案中所说，我在仪表板中取消选中了沙箱模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T11:07:32.853

你有没有在你的 Facebook 应用程序上取消选中沙盒模式？

它默认启用，我和你有同样的问题，它已经解决了我的问题。

# c# - 不显示具有特定循环迭代索引的字符串数组

> ID：16079428
> 
> 赞同：0
> 
> 时间：2013-04-18T09:37:41.820
> 
> 标签：c#, arrays

我正在尝试为英语单词程序制作一个简单的数字，我决定使用数组。

它没有在 tens2 数组中显示循环迭代值，因为我在字符串数组中声明了它。如果我想显示具有特定循环迭代索引的字符串数组 tens2，该怎么办。

我需要改变什么来解决这个问题？这是我的代码；

```
static void Main(string[] args)
{

    Console.Write("Enter Number =");
    string n = Console.ReadLine();

    char[] num = new char[] { '1', '2', '3', '4', '5', '6', '7', '8', '9' };
    string[] unit = new string[] { "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine" };
    string[] tens = new string[] { "ten", "eleven", "twelve", "thirteen", "forteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" };
    string[] tens2 = new string[] { "","twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety" };

    if (n.Length == 4)
    {

        for (int a = 0; a < num.Length; a++)
        {
            if (n[0].Equals(num[a]))
            {
                Console.Write("{0}" + " " + "Thousand", unit[a]);
                break;
            }
        }
        for (int a = 0; a < num.Length; a++)
        {
            if (n[1].Equals(num[a]))
            {
                Console.Write(" {0}" + " " + "Hundred", unit[a]);
                break;
            }
        }
        for (int a = 0; a < num.Length; a++)

        {
            if (n[2]=='1' && n[3].Equals(num[a]))
            {
                Console.Write(" {0}",tens[a+1]);
                break;
            }
            else if (n[2].Equals('1') && n[3].Equals('0'))
            {
                Console.Write(" Ten");
                break;
            }
            else if (n[2]!='1' && n[3].Equals(num[a]))
            {
                Console.Write(" {0}"  , tens2[a]);
                break;
            }

        }
            for (int a = 0; a < num.Length; a++)
        {

            if ((n[3].Equals(num[a]) && (n[2]!='1')))
            {
                Console.Write(" {0}" , unit[a]);
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:59:28.480

For four figure numbers only:

```
string n = "5415";

int[] digits = n.Select(i => Int32.Parse(i.ToString())).ToArray();

string[] unit = new string[] { "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" };
string[] tens = new string[] { "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" };
string[] tens2 = new string[] { "", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety" };

StringBuilder sb = new StringBuilder();

sb.Append(unit[digits[0]-1]);
sb.Append(" thousand, ");

if (digits[1] > 0)
{
    sb.Append(unit[digits[1] - 1]);
    sb.Append(" hundred and ");
}

if (digits[2] > 1)
{
    sb.Append(tens2[digits[2] - 1]);
    sb.Append(" ");
    sb.Append(unit[digits[3] - 1]);
}
else if (digits[2] == 1)
{
    sb.Append(tens[digits[3]]);
}
else
{
    sb.Append(unit[digits[3] - 1]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:17:33.047

我修改了@paul 的代码，使其更加健壮：

```
 static void Main(string[] args)
    {
        Console.Write("Enter Number =");
        string n = Console.ReadLine();
        var sb = new StringBuilder();

        if (n.Length == 4)
        {
            if (int.Parse(n) <= 0)
            {
                sb.Append("Supply a positive integer number greater than zero.");
            }
            else
            {
                int[] digits = n.Select(i => Int32.Parse(i.ToString())).ToArray();

                string[] unit = new string[]
                    {"one", "two", "three", "four", "five", "six", "seven", "eight", "nine"};
                string[] tens = new string[]
                    {
                        "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen",
                        "eighteen",
                        "nineteen"
                    };
                string[] tens2 = new string[]
                    {"", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"};

                if (digits[0] > 0)
                {
                    sb.Append(unit[digits[0] - 1]);
                    sb.Append(" thousand, ");
                }

                if (digits[1] > 0)
                {
                    sb.Append(unit[digits[1] - 1]);
                    sb.Append(" hundred and ");
                }

                if (digits[2] > 1)
                {
                    sb.Append(tens2[digits[2] - 1]);
                    sb.Append(" ");
                    sb.Append(unit[digits[3] - 1]);
                }
                else if (digits[2] == 1)
                {
                    sb.Append(tens[digits[3]]);
                }
                else
                {
                    sb.Append(unit[digits[3] - 1]);
                }
            }

            Console.WriteLine(sb.ToString());
        }
        else
        {
            Console.WriteLine("Only four digit number is supported in trial version of this program !!!");
        }

        Console.ReadKey();
    } 
```

现在它优雅地支持任何值。121212、1、0000、0001、0011、0101、1001等

# javascript - javascript：如何使用 javascript 从数据库中填充列表视图？

> ID：16079429
> 
> 赞同：0
> 
> 时间：2013-04-18T09:37:46.980
> 
> 标签：javascript, android, listview, cordova

我应该如何为将从数据库中提取的数据的列表视图编码？

是这样的。。

**脚本**

```
 function querySuccess(tx, results) 
            {
                    var len = results.rows.length;
                    console.log("DEMO table: " + len + " rows found.");
                    for (var i=0; i<len; i++)
                    {
                        console.log("Row = " + i + " name= " + results.rows.item(i).name+ " address=  " + results.rows.item(i).address+ " roll_no= " + results.rows.item(i).roll_no);
                        document.getElementById("list_view").innerhtml  = results.rows.item(i).name;
                    }
            } 
```

**html**

```
 <divid="list_view" style="float:left; width:100%; padding:0px; margin:0px;">
                <ul style="float:left; width:100%; list-style:none; padding:0px; margin:0px;">
                    <div style=" border-bottom-color:#CCCCCC; border-bottom:ridge; "> <li style="font-size:18px"></li></div>
                </ul>
            </div>
    </body>
</html> 
```

**我对么？？** **如何设置从数据库中检索到的数据为div内容？**我在某个地方错了，因为在输出中我什么都没有得到。除了标题。

# java - Rhino 接受什么作为对象属性的有效名称？

> ID：16079433
> 
> 赞同：1
> 
> 时间：2013-04-18T09:37:56.467
> 
> 标签：java, javascript, rhino

我正在尝试处理来自 a 的数据`NativeObject`，但我发现对象属性的命名存在一个小问题。该对象的 JavaScript 代码是：

```
var mainObject = {
    "innerObject" : {
        "234" : {
            "property1" : "1",
            "property2" : "2"
        }
    }
} 
```

我用 Java 处理它的方法如下所示：

```
public void processNative(NativeObject obj) {

    if(NativeObject.hasProperty(obj, "innerObject")) {
        NativeObject no = (NativeObject)NativeObject.getProperty(obj, "innerObject");
        Object[] propIds = NativeObject.getPropertyIds(no);
        for (int i = 0; i < propIds.length; i++) {
            String key = propIds[i].toString(); 
            NativeObject numObj = (NativeObject)NativeObject.getProperty(no, key); 
            //do more processing here
        }
    }
} 
```

此代码将引发此异常：`java.lang.ClassCastException: org.mozilla.javascript.UniqueTag cannot be cast to org.mozilla.javascript.NativeObject`.

如果我转换为 a`UniqueTag`我实际上可以获得正确的值，在这种情况下将是`UniqueTag.NOT_FOUND`.

我发现这有点令人困惑，因为我从对象本身获取属性键，并且它实际上存在于 JavaScript 代码中。

如果我将对象的名称从“234”更改为“car”，代码会按预期工作，所以我假设命名存在问题。从这篇[文章](https://stackoverflow.com/questions/2940424/valid-javascript-object-property-names)中我了解到属性名称可以是任何类型的字符串，因此使用数字组成的字符串应该没有问题。

所以我想一个后续问题是：有没有办法让我解决这个问题而不必重命名？

我需要提到的另一件事是我只能访问 JavaScript 代码和 Java 方法。其他一切都是黑匣子。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T02:24:39.020

我在 Scala 中也遇到过这个问题。NativeObject 支持 2 种获取方法 get(int, Scritable) 和 get(string, Scriptable)。因此，如果属性键是数字字符串，我将其转换为 int 并使用 get(int, yourObject)

[http://www.jarvana.com/jarvana/view/org/mozilla/rhino/1.7R3/rhino-1.7R3-javadoc.jar!/org/mozilla/javascript/ScriptableObject.html#get%28int,%20org。 mozilla.javascript.Scriptable%29](http://www.jarvana.com/jarvana/view/org/mozilla/rhino/1.7R3/rhino-1.7R3-javadoc.jar!/org/mozilla/javascript/ScriptableObject.html#get%28int,%20org.mozilla.javascript.Scriptable%29)

# unix - 在 sed 中传递变量时出错

> ID：16079435
> 
> 赞同：0
> 
> 时间：2013-04-18T09:38:05.707
> 
> 标签：unix, sed

我的脚本：

```
while read start_val
do
end_value = "$start_val+10" | bc

sed -n '"$start_value","$end_value"d'  <file>
done < in_file 
```

实际上，我想通过一些计算使用从输入文件中获取的数据来打印文件的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:40:58.400

这是因为变量没有在单引号 (') 内展开。例如尝试

```
echo '$HOME' 
```

对比

```
echo "$HOME" 
```

您的示例也是如此，在 sed 之后使用单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:40:32.207

sed 是用于在单行上进行简单替换的出色工具，对于任何其他文本操作，只需使用 awk：

```
awk '
NR==FNR { in_file[FNR] = $0; next }
{ for (i=$0; i<=$0+10; i++) print in_file[i] }
' in_file file 
```

并不是说您的原始脚本使用 -n 告诉 sed 不要打印任何行，然后 d 告诉 sed 删除一些行，这样它就不会产生任何输出，所以我不确定您真正想要做什么，awk脚本是一个猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:43:22.623

你可以像这样使用它：

```
sed -n "$start_value,$end_value"'d' $file 
```

顺便说一句，不需要在那里使用 bc ：

```
while read start_val
do
    end_value=$((start_val+10))
    sed "$start_value,$end_value"'d' $file
    # not sure what above sed is doing since you're not storing output anywhere!
done < in_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:48:54.403

```
sed -n $start_value','$end_value'p' file 
```

这将打印从 $start_value 到 $end_value 的所有行。

# java - 寻找有关 HashMap 的一些指导

> ID：16079439
> 
> 赞同：0
> 
> 时间：2013-04-18T09:38:14.407
> 
> 标签：java, static, hashmap, sudoku

我正在用 Java 制作一个 Sudoku Solver 程序，它使用回溯和蛮力来解决算法。我似乎遇到的问题是，当我在一个简单的容器中插入正确的值时，当我尝试从另一个类访问它时会显示错误的值。

当我从插入方法内部打印出 HashMap 时，HashMap 在正确的位置具有正确的值`Sudokucontainer`，（使用 a `for(int i = 0 i < dim; i++) + for(int j = 0; j < dim; j++)`）后跟`Square[][] tmp = solutionsHash.get(count)`and `System.out.println(tmp[i][j].getValue());`。当我在类中的`solutions.insert`语句之后使用相同的 for 循环时，它也是成功的（然后是相同的语句。`Square``fillInnRemainingOfBoard()``Square[][] tmp = solutions.solutionsHash.get(count)``System.out.println`

当我尝试从`Board`类中执行相同操作时会出现问题，正如您在该类中的 test() 方法中看到的那样。然后它只打印出预定义的值（如果板为空，则不打印）。唯一的区别是我再用ie`Square[][] tmp = allSquares[0][0].solutionsHash.get(wantedNumber)`和以前一样。但正如我所提到的，我不明白为什么在-class`solutionsHash`中声明为静态时会有所作为。`Sudokucontainer`

非常感谢任何帮助。谢谢！

**注意：**压痕不知何故搞砸了，对此感到抱歉。我没有包含 GUI 部分，因为我没有写过它，而且我可能没有权限把它放在这里。问题也发生在此之前（可能在`Board`课堂上），因为在那里打印出与`Board`课堂上相同的值。

**编辑：**删除了一些不必要的代码。

```
public class Square {

static Sudokucontainer solutions;
protected char value;
protected int valueInt;
protected static Square allSquares[][];
public int count = 0;
protected boolean predefined = false;
protected boolean lastSquare = false;
protected Square next = null;

public void setNext() {
if(col.getNr() < col.dim) {
    next = allSquares[row.getNr()-1][col.getNr()];
}else if(col.getNr() == col.dim) {
    if(row.getNr() < row.dim) {
    next = allSquares[row.getNr()][0];
    }else {
    next = null;
    lastSquare = true;
    }
}
if(next != null) {
    if(next.col.getNr() == col.dim && next.row.getNr() == col.dim && next.predefined == true)
    lastSquare = true;
}
}
public void fillInnRemainingOfBoard(Square[][] allSquares, int hd, int br) { 

    this.allSquares = allSquares;
int highestNumber = col.dim;
setNext();

if(value == '\u0020') {
    for(int i = 1; i <= highestNumber; i++) {
    if(row.isLegal[i-1] && col.isLegal[i-1] && box.isLegal[i-1]) { 
        String s1 = Integer.toString(i);
        value = s1.charAt(0);
        insert(value);
        insertInt(i);
        box.isLegal[i-1] = false;
        col.isLegal[i-1] = false;
        row.isLegal[i-1] = false;
        if(!lastSquare) {
        next.fillInnRemainingOfBoard(this.allSquares, hd, br);
        }else{   
        System.out.println("Solution found: " + count);
        solutions.insert(allSquares, count, col.dim);
        ++count;
        } // Slutt paa else 
        box.isLegal[valueInt-1] = true;
        col.isLegal[valueInt-1] = true;
        row.isLegal[valueInt-1] = true;
        value = '\u0020';
        } // Slutt paa if(row.isLegal[i-1] && col.isLegal[i-1] && box.isLegal[i-1])     
    } // Slutt paa if (value == '\u0020' || !predefined) 
}else {     
    if(!lastSquare) {
    next.fillInnRemainingOfBoard(this.allSquares, hd, br);
    } else {
    System.out.println("Solution found");
    solutions.insert(allSquares, count, col.dim);
    count++;
    }
} // Slutt paa else if(predefined)      
// Slutt paa for(int i = 1; i <= highestNumber; i++)
}// Her returnerer vi til forrige metode

public void insert(char value) {
if(value != '.') {
    this.value = value;

}else{
    this.value = '\u0020'; // In other words; space(in unicode)
}
}

public void insertInt(int value) {
valueInt = value;
}

public char getValue() {
return value;
}

}

public class Sudokucontainer {  

int dim = 0;
private int count = 0;
static HashMap<Integer, Square[][]> solutionsHash = new HashMap<Integer, Square[][]>();

public void insert(Square[][] allSquares, int count, int dim) {
this.count = count;
this.dim = dim;

if(count <= 499) {
    solutionsHash.put(count,allSquares);
}

}

public Square[][] get(int nr) {
Square[][] tmp = solutionsHash.get(nr);
return tmp;
}

public int getSolutionCount() {
return solutionsHash.size();
}

}

public class Board {

int dim, br, hd;
char[][] charArray;
char[] charArray1;
static Square [][] allSquares; 
Row [] rows;
Column[] columns;
Box[] boxes;

    public Board(int dim, int br, int hd, char[][] charArray) {
this.dim = dim;
this.br = br;
this.hd = hd;
this.charArray = charArray;
charArray1 = new char[dim];
allSquares = new Square[dim][dim];
rows = new Row[dim];
columns = new Column[dim];
boxes = new Box[dim/br * dim/hd];
setRows();
setColumns();
setBoxes();
setSquares();
insertBoxInSquares();
fillInLegalValues();
welcome();
solve();
test();
System.out.println("Found solutions. Please refer to the graphical interface.");
showGui();

}

public void test() { 
    for(int i = 0; i < dim; i++) {
        for(int j = 0; j < dim; j++) {
        //Square[][] tmp = allSquares[0][0].solutions.solutionsHash.get(0);
        //System.out.println(tmp[i][j].getValue());
        }
    }
}

public void solve() {

allSquares[0][0].fillInnRemainingOfBoard(allSquares, hd, br);

}

public void showGui() {
new SudokuGUI(dim, hd, br, allSquares[0][0].solutions.solutions, false, 0, allSquares[0][0].solutions.solutionsHash);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:21:49.390

我可以告诉你问题是什么，虽然不是什么原因造成的。

您要么打印出不同的对象，要么对象的值在一个打印件和另一个打印件之间发生变化。您可以通过打印对象的哈希码或对对象的 toString() 调用来识别对象，从而在不同情况下判断它是否是同一个对象。

如果它们不同，我会检查您是否没有在一种情况下加载具有临时范围的对象，并在下一种情况下打印出具有更大范围的对象。但也有可能你只是指一个不同的对象。我无法从您发布的代码中看出发生了什么，您可能自己感到困惑。

你的帖子的标题是我这么说的原因。“[the] hashmap 中的值不正确”是不可行的。当一个人对编程相当陌生时，有时甚至在几年后，一半的调试人员相信（1）编程语言结构确实像宣传的那样工作，以及（2）你搞砸了某个地方。

# c# - SetForegroundWindow 没有激活我的窗口

> ID：16079440
> 
> 赞同：1
> 
> 时间：2013-04-18T09:38:15.190
> 
> 标签：c#, user32

我不知道为什么它不起作用？

```
static void ActivateApp(string processName)
{
    Process[] p = Process.GetProcessesByName(processName);

    // Activate the first application we find with this name
    if (p.Any()) SetForegroundWindow(p[0].MainWindowHandle);
    else
    {
        Console.WriteLine("Something wrong");
    }
}

    [STAThread]
    static void Main(string[] args)
    {
        ActivateApp("Acrobat.exe");
    } 
```

输出 ：

> 出了点问题

但我确信 Acrobat.exe 存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:42:19.340

`SetForegroundWindow()`关于是否真的有效，有一些奇怪的规则。

以下至少一项必须为真：

*   该进程是前台进程。
*   该进程由前台进程启动。
*   进程收到最后一个输入事件。
*   没有前台进程。
*   正在调试前台进程。
*   前景未锁定。
*   前台锁定超时已过期（请参阅 SystemParametersInfo 中的 SPI_GETFOREGROUNDLOCKTIMEOUT）。
*   没有菜单处于活动状态。

是这样吗？

有关完整详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633539%28v=vs.85%29.aspx)。

# php - 使用 FPDF 在 PHP 中打印到 PDF

> ID：16079447
> 
> 赞同：2
> 
> 时间：2013-04-18T09:38:27.823
> 
> 标签：php, printing, fpdf

我正在尝试在网站上创建一个功能，可以将任何文章制作成 PDF 文件以供下载和/或打印。我正在使用[FPDF](http://www.fpdf.org/)库，但我很难理解我的 PDF 页面接收信息的最佳方式。

到目前为止，我在想的是，我将在文章页面中制作隐藏的表单元素，然后使用它们来发送信息，获取并使用 $_POST 将其插入 PDF。就像是：

```
<form action="pdf_printer.php" method="post">
<input type="hidden" name="title" value="<?php echo $title; ?>"/>
<input type="hidden" name="body_text" value="<?php echo $body_text; ?>"/>
<input type="submit" name="submit" value="Print">
</form> 
```

然后`pdf_printer.php`会是这样的：

```
require('fpdf.php');

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(60,10, $_POST['title'];,0,1,'C');
$pdf->Ln(20);
$pdf->Cell(60,10, $_POST['body_text'],0,1,'C');
$pdf->Output(); 
```

我确信这是一种非常低效的方法，但由于我对 PHP 比较陌生，我不知道它是如何完成的。有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:49:21.447

最好的方法似乎是制作一个 PHP 脚本`generatepdf.php`，在其中获取文章的文本和标题，并使用 FPDF 生成 pdf。然后在文章 12345 中，您只需添加一个链接`generatepdf.php?id=12345`，它将从您的数据库/文件中获取数据并为用户生成 pdf。

# javascript - JQM：弹出窗口不关闭超时？

> ID：16079450
> 
> 赞同：2
> 
> 时间：2013-04-18T09:38:39.277
> 
> 标签：javascript, html, jquery-mobile, setinterval, jquery-mobile-popup

我设法在页面加载时打开一个弹出窗口，但仅在第一次打开该页面时。一旦它打开，我希望它在几秒钟后自行关闭，但我无法做到这一点。

这是我正在使用的代码：

```
<script type="text/javascript" language="JavaScript">
    $(document).on('pageshow', function (event) {
if (sessionStorage.popUpShown != 'true') {

    $('#strelica').popup('open', {positionTo: '#hitnizbor'});

    sessionStorage.popUpShown = 'true';
    setTimeout(function () {
        $("#strelica").popup("close");
    }, 3000);
}

else{
    alert('already shown the popup');
}

});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:53:27.333

您的示例应该有效，但我为您制作了一个更安全的版本：http: [//jsfiddle.net/Gajotres/Uauar/](http://jsfiddle.net/Gajotres/Uauar/)

```
$(document).on('pageshow', '#index', function(){     
    var start = setTimeout(function () {
        $('#strelica').popup('open', {positionTo: '#hitnizbor'});
        clearInterval(start);
    }, 0);    

    var stop = setTimeout(function () {
        $("#strelica").popup("close");
        clearInterval(stop);        
    }, 3000);
}); 
```

此代码可用于每个页面事件，而不仅仅是 pageshow。如果您希望它只执行一次，请使用 pageinit。

ClearInterval 在这里是为了防止不断的打开和关闭。如果您有更多问题，请随时提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:54:11.803

您正在使用 jquery 插件吗？我在 jquery 插件 popupjs 中找到了答案：

```
$('a.popup').popup({
   afterOpen : function(){
     var popup = this;
     setTimeout(function(){
        popup.close();
    }, 2000);
}
}); 
```

您可能会错过官方示例。

# android - 如何更新 viewpager 选项卡中的片段？

> ID：16079451
> 
> 赞同：0
> 
> 时间：2013-04-18T09:38:39.303
> 
> 标签：android, tabs, android-fragments, android-actionbar

我创建了一个带有 Eclipse 的 FragmentActivity，它显示了一个带有选项卡的 ActionBar。在第一个选项卡中，我显示了一个带有列表的片段，在下一个选项卡中显示了一个带有文本的片段。然后我希望，当我选择第一个选项卡的一个项目时，将第二个片段更改为另一个列表片段。这是我的代码：

Eclipse 和我创建的 TabActivity：

```
public class TabActivity extends FragmentActivity implements ActionBar.TabListener {

static final int NUM_TABS = MyTab.values().length;

public enum MyTab{
    Categorias(0), Productos(1);

    private final int index;

    MyTab(int i) {
        this.index = i;
    }
}

SectionsPagerAdapter mSectionsPagerAdapter;

ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pedido);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.pedido, menu);
    return true;
}

@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    mViewPager.setCurrentItem(position);
}

@Override
public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {

}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {

}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    private FragmentManager mFragmentManager;
    private TextoFragment mTextoFragment;

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
        mFragmentManager = fm;
    }

    @Override
    public Fragment getItem(int position) {
        return TabFragment.nuevoFragment(position);
    }

    @Override
    public int getCount() {
        return NUM_TABS;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        switch (MyTab.values()[position]) {
        case Categorias:
            return getString(R.string.title_categorias).toUpperCase(l);
        case Productos:
            return getString(R.string.title_productos).toUpperCase(l);
        }
        return "";
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply
 * displays dummy text.
 */
public static class TabFragment extends Fragment  {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    static Fragment nuevoFragment(int position) {

        Fragment f;
        Bundle args = new Bundle();
        switch (Pestaña.values()[position]) {
        case Categorias:
            f = new ListaFragment();
            args.putInt("tipoObjeto", TipoObjeto.Categoria.ordinal());
            break;
        case Productos:
            if (EstadoHT.categoriaActual == null) {
                f = new TextoFragment();
                args.putString(TextoFragment.ARG_MENSAJE,
                        "Elija primero una categoría");
            } else {
                f = new ListaFragment();
                args.putInt(ListaFragment.ARG_TIPO_OBJETO,
                        TipoObjeto.Producto.ordinal());
            }
            break;
        default:
            f = new TabFragment();
            args = new Bundle();
            args.putInt(TabFragment.ARG_SECTION_NUMBER, position);
        }
        f.setArguments(args);
        return f;
    }

    private View lanzarEstadoPedido(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.tab_estado_pedido,
                container, false); // Muestra el layout

        TextView lblMesa = (TextView) rootView.findViewById(R.id.lblMesa);
        lblMesa.setText("Nada");
        return rootView;
    }

    public TabFragment() {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        int valorPestaña = getArguments().getInt(ARG_SECTION_NUMBER, 0);
        switch (MyTab.values()[valorPestaña]) {

        case Pedido:
            return lanzarEstadoPedido(inflater, container,
                    savedInstanceState);

        default:
            return null;
        }
                  }

    }
} 
```

在 ListaFragment 中：

```
public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            Intent dato = new Intent();
            IObjetoHT o = (IObjetoHT) lvlista.getItemAtPosition(position);
            switch (tipo) {
            case Categoria:
                App.categoriaActual = (Categoria) o;
                TabActivity actPedido = (TabActivity) getActivity();
                ActionBar actionBar = actPedido.getActionBar();
                                              actPedido.mViewPager.setCurrentItem(TabActivity.MyTab.Productos.ordinal());

                break;
            case Producto:

                break;
            default:
                dato.putExtra(ARG_OBJETO_A_DEVOLVER, o);
                act.setResult(act.RESULT_OK, dato);
                act.finish();
            } 
```

然后从 ListaFragment 我想上传第二个标签片段..有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T15:52:24.517

您可以使用片段管理器来跟踪正在添加到 TabPagerAdapter 的片段。

```
public class MainActivity extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabAdapter = new TabPagerAdapter(getSupportFragmentManager(), context);
        Tab = (ViewPager)findViewById(R.id.pager);
        Tab.setOnPageChangeListener(
              new ViewPager.SimpleOnPageChangeListener() {
                   @Override
                   public void onPageSelected(int position) {
                        actionBar = getActionBar();
                        actionBar.setSelectedNavigationItem(position);
                        if(position == 1)
                        {
                            android.support.v4.app.FragmentManager fragmentManager = getSupportFragmentManager();

                            **MYACTIVITY fragment = (MYACTIVITY) fragmentManager.findFragmentByTag("YOUR TAG 1");**
                            fragment.get_recent();
                            Toast.makeText(context, "im visible", Toast.LENGTH_LONG).show();
                         }
                     }
              });

        Tab.setAdapter(TabAdapter);
        actionBar = getActionBar();
        //Enable Tabs on Action Bar
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.addTab(actionBar.newTab().setText("TAB NAME 1").setTabListener(tabListener));
        actionBar.addTab(actionBar.newTab().setText("TAB NAME 2").setTabListener(tabListener));
        actionBar.addTab(actionBar.newTab().setText("TAB NAME 3").setTabListener(tabListener)); 

        android.support.v4.app.FragmentManager fragmentManager = getSupportFragmentManager();
        fragmentManager.beginTransaction().add(TabAdapter.getItem(0), "YOUR TAG 1").commit();
        fragmentManager.beginTransaction().add(TabAdapter.getItem(1), "YOUR TAG 2").commit();
        fragmentManager.beginTransaction().add(TabAdapter.getItem(2), "YOUR TAG 3").commit();
    } 
```

* * *

```
public class TabPagerAdapter extends FragmentStatePagerAdapter {

    private Context context; 

    public TabPagerAdapter(FragmentManager fm, Context context) {
        super(fm);
        this.context = context;
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
        case 0:
            return new YOURACTIVITY1();
        case 1:
            return new YOURACTIVITY2();
        case 2:
             return new YOURACTIVITY3();
        }

        return null;
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 3; //No of Tabs
    }

} 
```

如果您使用的是 ActionBarSherlock，请小心，因为您需要明确声明您使用的是 android.support.v4.app.FragmentManager。

# cocos2d-iphone - cocos2d-javascript iphone mozilla/DebugOnly.h 未找到

> ID：16079452
> 
> 赞同：1
> 
> 时间：2013-04-18T09:38:42.313
> 
> 标签：cocos2d-iphone

我安装 cocos2d-javascript 并运行到 iphone，我得到了这个错误

> 在 HashTable.h 文件中找不到 mozilla/DebugOnly.h

我的 HashTable.h 代码是

```
include "mozilla/Attributes.h
include "mozilla/DebugOnly.h 
```

对我的问题有任何想法吗？我已经更新 cocos2d 并尝试再次安装，但仍然无法正常工作。这是错误信息

![在 HashTable.h 文件中找不到 mozilla/DebugOnly.h](https://i.stack.imgur.com/3a8fB.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:57:09.487

我遇到了同样的错误。似乎也没有在问题列表中...

### 更新：

在问题队列上报告：[https ://code.google.com/p/cocos2d-iphone/issues/detail?id=1487](https://code.google.com/p/cocos2d-iphone/issues/detail?id=1487)

### 编辑：

也在论坛里：http: [//www.cocos2d-iphone.org/forum/topic/31640/page/8](http://www.cocos2d-iphone.org/forum/topic/31640/page/8)

# 手动修复：

所以，在做了一些 git pull 和子模块更新之后，我发现 DebugOnly.h 包含在 cocos2d 中，但不包含在项目中。

### 运行这个：

```
cp ~/Documents/Repos/cocos2d-iphone/external/JavaScript/SpiderMonkey/ios/include/mozilla/DebugOnly.h [PROJECT]/libs/SpiderMonkey/ios/include/mozilla/ 
```

# javascript - Jquery .change 函数无法通过 javascript 工作

> ID：16079455
> 
> 赞同：1
> 
> 时间：2013-04-18T09:38:53.940
> 
> 标签：javascript, json, jquery

当我通过 Javascript 更改值时，jquery 中的 .change 调用不起作用。

例如：

```
 $(document).ready(function () {
     $(function () {
         $("select#product").change(function () {
             if (document.all("fatcaSearchDO.bankId").disabled.value = true) {
                 fnFieldEnableClass(document.all("fatcaSearchDO.bankId"));
             }
             $.ajax({
                 type: 'GET',
                 url: 'ViewHistoryDataAction.do',
                 data: {
                     product: $(this).val()
                 },
                 dataType: 'JSON',
                 cache: false,
                 success: function (j) {
                     var options = '';
                     for (var k = 0; k < j.length; k++) {
                         options += '<option value="' + j[k] + '">' + j[k] + '</option>';
                     }
                     $("select#BankID").html(options);
                 }
             });
         });
     });
 });

<html:select name="ViewHistoryForm" property="fatcaSearchDO.bankId" styleClass="login-textbox" onchange="fnGlobalChange();" onclick="checkRadio('1')" onfocus = "checkRadio('1')" styleId="BankID" style="width=250">

<html:select name="ViewHistoryForm" property="fatcaSearchDO.product" styleClass="login-textbox" onchange="fnGlobalChange();" onclick="checkRadio('1')" onfocus = "checkRadio('1')" styleId="product" style="width=250"> 
```

在这里，当我尝试更改“产品”的下拉菜单时，它的调用操作和相应的银行 ID 值都会被填充。现在，例如，当我尝试通过 javascript 更改“产品”的值时

```
<input type="button" onclick="changeProd()">

function changeProd(){
    document.all("fatcaSearchDO.product").value='CC';

} 
```

更改功能不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:47:57.563

当您通过 javascript 更改输入字段的值时，不会触发 change 事件。

您需要手动触发更改事件

喜欢

```
$("#fatcaSearchDO.product").trigger('change') 
```

前任：

```
function changeProd(){
    $("#fatcaSearchDO.product").val('CC').trigger('change');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:50:29.307

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

相当于调用：

```
$(function() {
     // Handler for .ready() called.
}); 
```

请使用其中一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:03:43.033

为什么不把里面的匿名函数`change`变成一个单独定义的函数，所以你可以这样做：

```
function changeHandler(element) {
  // code code code
  value = element.val();
}

$(something).change(function() {
  changeHandler($(this));
});

// then when changing value with JS
var element = ... // select the element with javascript here
element.value='CC';
changeHandler($(element)); // just call the function everytime the value gets changed 
```

# linux - 使用 maven3 拉取依赖项 cloudstack 4 失败

> ID：16079456
> 
> 赞同：0
> 
> 时间：2013-04-18T09:38:54.510
> 
> 标签：linux, maven-3, apache-cloudstack

```
mvn -P deps                                                    
[INFO] Scanning for projects...
Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project org.apache.cloudstack:cloudstack:4.0.1-incubating-SNAPSHOT (/usr/local/apache-cloudstack-4.0.1-incubating-src/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not transfer artifact org.apache:apache:pom:11 from/to central (http://repo.maven.apache.org/maven2): repo.maven.apache.org and 'parent.relativePath' points at wrong local POM @ line 23, column 11: Unknown host repo.maven.apache.org -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:25:39.667

在 CloudStack 4.0.0-incubating 之后尝试[主要版本的 Maven 说明](http://cloudstack.apache.org/develop/environment.html#maven)：

要编译 Apache CloudStack，请转到 cloudstack 源文件夹并运行：

`mvn -P developer clean install`

要部署 Apache CloudStack，请运行：

`mvn -P developer -pl developer,tools/devcloud -Ddeploydb`

接下来部署数据库：

`mvn -P developer -pl tools/devcloud -Ddeploysvr`

# ruby-on-rails - 应用中出现不需要的 {}，它从 Java 脚本复制文本

> ID：16079457
> 
> 赞同：0
> 
> 时间：2013-04-18T09:38:55.347
> 
> 标签：ruby-on-rails, ruby

我是一个编程的初学者，目前正在学习一个月的 Rails 教程来尝试学习 Ruby Rails 的基础知识。

我似乎在代码中的某个地方犯了一个错误，因为 {} 出现在我的应用中所有页面的标题下方。当您登录时，Java 显示“登录成功”，文本将复制到 {} 中，如 {:notice=>"Signed in successfully."}。

你可以看到这个

[http://cryptic-sands-6348.herokuapp.com/](http://cryptic-sands-6348.herokuapp.com/)

[https://github.com/jackwatson/omrails/tree/master/app/views/layouts](https://github.com/jackwatson/omrails/tree/master/app/views/layouts)

我已经在 app>views>layouts 和 pages 文件夹中检查了我的代码，但似乎找不到出错的地方。

如果有人知道这个问题的答案，我将非常感谢您的帮助:)并对 n00b 问题感到抱歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:20:20.460

问题在第 13 行`app/views/layouts/application.html.erb`。

改变

```
<%= flash.each do |name, msg| %> 
```

到

```
<% flash.each do |name, msg| %> 
```

`<%= ... %>`将 Ruby 代码的结果输出为字符串，`<% ... %>`只执行代码。

您只想执行 Ruby 代码，而不是显示 的输出`each`，如果没有错误，这将是一个空哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:47:48.317

```
<div class="container">{}<div class="hero-unit"> 
```

在您的代码中发现了这一点。如果您不想要“{}”，只需将其删除:)

# c# - SQL 检查值是否存在并返回主键

> ID：16079460
> 
> 赞同：0
> 
> 时间：2013-04-18T09:38:59.747
> 
> 标签：c#, sql, sql-server

我有两个表，客户和应用程序，都有主键（customerID 和 applicationID），应用程序有一个外键 customerID。

当用户启动应用程序时，它会将 customerId 与其他一些信息一起添加到应用程序表中。

我想要做的是编写一个 sql 查询/存储过程，首先检查该 customerId 是否已经在应用程序表中，如果它不再添加它，而是更新信息并返回 applicationId 供我使用。

然后，如果它不在表中，则添加客户 ID 和信息并将应用程序 ID 返回给我。

我要添加到数据库的代码是。

```
INSERT INTO Application (CustomerID, Q5, Q11a)  VALUES (@customerid,@q5, @q11a);" + "Select Scope_Identity()";

int applicationID = Convert.ToInt32(command.ExecuteScalar()); 
```

我将如何把它变成我想要它做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:52:42.170

您应该使用[Merge/Upsert](http://en.wikipedia.org/wiki/Upsert)

维基百科代码：

```
MERGE INTO TABLE_NAME USING table_reference ON (condition)
   WHEN MATCHED THEN
   UPDATE SET column1 = value1 [, column2 = value2 ...]
   WHEN NOT MATCHED THEN
   INSERT (column1 [, column2 ...]) VALUES (value1 [, value2 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:53:30.537

您可以使用该[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)语句来执行插入或更新操作。之后，您可以使用`SELECT`语句来获取`ApplicationId`. 查询将如下所示：

```
MERGE Application AS target
    USING (SELECT @customerid,@q5, @q11a) AS source (CustomerID, Q5, Q11a)
    ON (target.CustomerID = source.CustomerID)
    WHEN MATCHED THEN 
        UPDATE SET Q5 = source.Q5, Q11a = source.Q11a
    WHEN NOT MATCHED THEN   
        INSERT (CustomerID, Q5, Q11a) VALUES (source.CustomerID, source.Q5, source.Q11a
);
SELECT ApplicationID FROM Application WHERE CustomerID = @customerid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:13:31.267

```
CREATE PROCEDURE CustomerProc @CustomerID INT
    ,@AppId INT OUTPUT
AS
BEGIN
    IF EXISTS (
            SELECT *
            FROM customer
            WHERE customerId = @CustomerID
            )
    BEGIN
        UPDATE customer
        SET /* fields to update */
        WHERE customerId = @CustomerID
    END
    ELSE
    BEGIN
        INSERT INTO customer (
            customerId
            ,/* fields to insert*/
            )
        VALUES (@CustomerID /* values to insert*/);

        SELECT @AppId = customerId
        FROM customer
        WHERE customerId = @CustomerID;
    END
END 
```

要从 SSMS 调用 proc，请使用`exec CustomerProc @CustomerID=/*number*/`

如果您使用的是 ADO.Net，请尝试以下操作：

```
using(SqlConnection con = new SqlConnection("your connection string")){
conn.Open();
using(var command = new SqlCommand("ProcedureName", conn)) { 
   command.CommandType = CommandType.StoredProcedure;

   SqlParameter param = new SqlParameter("@CustomerID",SqlDbType.Int);
   param.Value = /* your value */;
   param.Direction = ParameterDirection.Input; 

   SqlParameter param2 = new SqlParameter("@AppId",SqlDbType.Int); 
   param2.Direction  = ParameterDirection.Output;

   command.Parameters.Add(param);
   command.Parameters.Add(param2);

   command.ExecuteNonQuery();

   Console.WriteLine(command.Parameters["@AppId"].Value); 
   }
} 
```

# linux - Samba 导致“mount: / is busy”

> ID：16079462
> 
> 赞同：3
> 
> 时间：2013-04-18T09:39:02.737
> 
> 标签：linux, filesystems, mount, samba, readonly

我正在 Raspberry Pi 上开发一个应用程序。我正在使用 samba 通过网络共享我的 RAMDISK。在下面你可以看到我的 fstab：

```
proc            /proc           proc    defaults          0       0
/dev/mmcblk0p1  /boot           vfat    defaults          0       2
/dev/mmcblk0p2  /               ext4    ro                1       1
devpts               /dev/pts             devpts     mode=0620,gid=5       0  0
tmpfs                /tmp                 tmpfs      nodev,nosuid,noatime,mode=1777              0  0
tmpfs                /var/tmp             tmpfs      nodev,nosuid,defaults,noatime,mode=1777,size=10m   0   0
tmpfs                /var/log             tmpfs      nodev,nosuid,defaults,noatime,mode=0755 0 0
#tmpfs                /var/log/apt         tmpfs      nodev,nosuid,defaults,noatime,size=1m 0 0
tmpfs                /var/run             tmpfs      nodev,nosuid,defaults,noatime,size=1m       0 0
tmpfs                /ram                 tmpfs      nodev,nosuid,noatime,size=100m,mode=0777 0 0 
```

当 smbd 服务器未运行时，我可以通过键入将根文件系统 / 挂载为只读

```
mount -o remount,ro / 
```

但是当 smbd 运行时，它会说： mount: / is busy"

我只通过网络共享 ramdisk。我想我也禁用了 samba 日志，但我不确定。下面你可以看到 testparm 命令的输出：

```
Load smb config files from /etc/samba/smb.conf
rlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)
Processing section "[homes]"
Processing section "[ram]"
Loaded services file OK.
Server role: ROLE_STANDALONE
Press enter to see a dump of your service definitions

[global]
        workgroup = HOME
        server string = %h server
        map to guest = Bad Password
        obey pam restrictions = Yes
        pam password change = Yes
        passwd program = /usr/bin/passwd %u
        passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
        unix password sync = Yes
        syslog = 0
        syslog only = Yes
        max log size = 0
        dns proxy = No
        usershare allow guests = Yes
        idmap config * : backend = tdb

[homes]
        comment = Home Directories
        valid users = %S
        create mask = 0700
        directory mask = 0700
        browseable = No

[ram]
        comment = Public Storage
        path = /ram
        read only = No
        create mask = 0777
        directory mask = 0777
        guest ok = Yes 
```

您可以在下面看到我的 /etc/samba/smb.conf 文件：

```
#======================= Global Settings =======================

[global]

## Browsing/Identification ###

# Change this to the workgroup/NT-domain name your Samba server will part of
   workgroup = HOME

# server string is the equivalent of the NT Description field
   server string = %h server

# Windows Internet Name Serving Support Section:
# WINS Support - Tells the NMBD component of Samba to enable its WINS Server
#   wins support = no

# WINS Server - Tells the NMBD components of Samba to be a WINS Client
# Note: Samba can be either a WINS Server, or a WINS Client, but NOT both
;   wins server = w.x.y.z

# This will prevent nmbd to search for NetBIOS names through DNS.
   dns proxy = no

# What naming service and in what order should we use to resolve host names
# to IP addresses
;   name resolve order = lmhosts host wins bcast

#### Networking ####

# The specific set of interfaces / networks to bind to
# This can be either the interface name or an IP address/netmask;
# interface names are normally preferred
;   interfaces = 127.0.0.0/8 eth0

# Only bind to the named interfaces and/or networks; you must use the
# 'interfaces' option above to use this.
# It is recommended that you enable this feature if your Samba machine is
# not protected by a firewall or is a firewall itself.  However, this
# option cannot handle dynamic or non-broadcast interfaces correctly.
;   bind interfaces only = yes

#### Debugging/Accounting ####

# This tells Samba to use a separate log file for each machine
# that connects
;   log file = /var/log/samba/log.%m

# Cap the size of the individual log files (in KiB).
   max log size = 0

# If you want Samba to only log through syslog then set the following
# parameter to 'yes'.
   syslog only = yes

# We want Samba to log a minimum amount of information to syslog. Everything
# should go to /var/log/samba/log.{smbd,nmbd} instead. If you want to log
# through syslog you should set the following parameter to something higher.
   syslog = 0

# Do something sensible when Samba crashes: mail the admin a backtrace
;   panic action = /usr/share/samba/panic-action %d

####### Authentication #######

# "security = user" is always a good idea. This will require a Unix account
# in this server for every user accessing the server. See
# /usr/share/doc/samba-doc/htmldocs/Samba3-HOWTO/ServerType.html
# in the samba-doc package for details.
   security = user

# You may wish to use password encryption.  See the section on
# 'encrypt passwords' in the smb.conf(5) manpage before enabling.
#   encrypt passwords = true

# If you are using encrypted passwords, Samba will need to know what
# password database type you are using.  
   passdb backend = tdbsam

   obey pam restrictions = yes

# This boolean parameter controls whether Samba attempts to sync the Unix
# password with the SMB password when the encrypted SMB password in the
# passdb is changed.
   unix password sync = yes

# For Unix password sync to work on a Debian GNU/Linux system, the following
# parameters must be set (thanks to Ian Kahan <<kahan@informatik.tu-muenchen.de> for
# sending the correct chat script for the passwd program in Debian Sarge).
   passwd program = /usr/bin/passwd %u
   passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .

# This boolean controls whether PAM will be used for password changes
# when requested by an SMB client instead of the program listed in
# 'passwd program'. The default is 'no'.
   pam password change = yes

# This option controls how unsuccessful authentication attempts are mapped
# to anonymous connections
   map to guest = bad password

########## Domains ###########

# Is this machine able to authenticate users. Both PDC and BDC
# must have this setting enabled. If you are the BDC you must
# change the 'domain master' setting to no
#
;   domain logons = yes
#
# The following setting only takes effect if 'domain logons' is set
# It specifies the location of the user's profile directory
# from the client point of view)
# The following required a [profiles] share to be setup on the
# samba server (see below)
;   logon path = \\%N\profiles\%U
# Another common choice is storing the profile in the user's home directory
# (this is Samba's default)
#   logon path = \\%N\%U\profile

# The following setting only takes effect if 'domain logons' is set
# It specifies the location of a user's home directory (from the client
# point of view)
;   logon drive = H:
#   logon home = \\%N\%U

# The following setting only takes effect if 'domain logons' is set
# It specifies the script to run during logon. The script must be stored
# in the [netlogon] share
# NOTE: Must be store in 'DOS' file format convention
;   logon script = logon.cmd

# This allows Unix users to be created on the domain controller via the SAMR
# RPC pipe.  The example command creates a user account with a disabled Unix
# password; please adapt to your needs
; add user script = /usr/sbin/adduser --quiet --disabled-password --gecos "" %u

# This allows machine accounts to be created on the domain controller via the 
# SAMR RPC pipe.  
# The following assumes a "machines" group exists on the system
; add machine script  = /usr/sbin/useradd -g machines -c "%u machine account" -d /var/lib/samba -s /bin/false %u

# This allows Unix groups to be created on the domain controller via the SAMR
# RPC pipe.  
; add group script = /usr/sbin/addgroup --force-badname %g

########## Printing ##########

# If you want to automatically load your printer list rather
# than setting them up individually then you'll need this
#   load printers = yes

# lpr(ng) printing. You may wish to override the location of the
# printcap file
;   printing = bsd
;   printcap name = /ram/pmc/printcap

# CUPS printing.  See also the cupsaddsmb(8) manpage in the
# cupsys-client package.
;   printing = cups
;   printcap name = cups

############ Misc ############

# Using the following line enables you to customise your configuration
# on a per machine basis. The %m gets replaced with the netbios name
# of the machine that is connecting
;   include = /home/samba/etc/smb.conf.%m

# Most people will find that this option gives better performance.
# See smb.conf(5) and /usr/share/doc/samba-doc/htmldocs/Samba3-HOWTO/speed.html
# for details
# You may want to add the following on a Linux system:
#         SO_RCVBUF=8192 SO_SNDBUF=8192
#   socket options = TCP_NODELAY

# The following parameter is useful only if you have the linpopup package
# installed. The samba maintainer and the linpopup maintainer are
# working to ease installation and configuration of linpopup and samba.
;   message command = /bin/sh -c '/usr/bin/linpopup "%f" "%m" %s; rm %s' &

# Domain Master specifies Samba to be the Domain Master Browser. If this
# machine will be configured as a BDC (a secondary logon server), you
# must set this to 'no'; otherwise, the default behavior is recommended.
#   domain master = auto

# Some defaults for winbind (make sure you're not using the ranges
# for something else.)
;   idmap uid = 10000-20000
;   idmap gid = 10000-20000
;   template shell = /bin/bash

# The following was the default behaviour in sarge,
# but samba upstream reverted the default because it might induce
# performance issues in large organizations.
# See Debian bug #368251 for some of the consequences of *not*
# having this setting and smb.conf(5) for details.
;   winbind enum groups = yes
;   winbind enum users = yes

# Setup usershare options to enable non-root users to share folders
# with the net usershare command.

# Maximum number of usershare. 0 (default) means that usershare is disabled.
;   usershare max shares = 100

# Allow users who've been granted usershare privileges to create
# public shares, not just authenticated ones
   usershare allow guests = yes

#======================= Share Definitions =======================

[homes]
   comment = Home Directories
   browseable = no

# By default, the home directories are exported read-only. Change the
# next parameter to 'no' if you want to be able to write to them.
   read only = yes

# File creation mask is set to 0700 for security reasons. If you want to
# create files with group=rw permissions, set next parameter to 0775.
   create mask = 0700

# Directory creation mask is set to 0700 for security reasons. If you want to
# create dirs. with group=rw permissions, set next parameter to 0775.
   directory mask = 0700

# By default, \\server\username shares can be connected to by anyone
# with access to the samba server.
# The following parameter makes sure that only "username" can connect
# to \\server\username
# This might need tweaking when using external authentication schemes
   valid users = %S

# Un-comment the following and create the netlogon directory for Domain Logons
# (you need to configure Samba to act as a domain controller too.)
;[netlogon]
;   comment = Network Logon Service
;   path = /home/samba/netlogon
;   guest ok = yes
;   read only = yes

# Un-comment the following and create the profiles directory to store
# users profiles (see the "logon path" option above)
# (you need to configure Samba to act as a domain controller too.)
# The path below should be writable by all users so that their
# profile directory may be created the first time they log on
;[profiles]
;   comment = Users profiles
;   path = /home/samba/profiles
;   guest ok = no
;   browseable = no
;   create mask = 0600
;   directory mask = 0700

;[printers]
;   comment = All Printers
;   browseable = no
;   path = /var/spool/samba
;   printable = yes
;   guest ok = no
;   read only = yes
;   create mask = 0700

# Windows clients look for this share name as a source of downloadable
# printer drivers
;[print$]
;   comment = Printer Drivers
;   path = /var/lib/samba/printers
;   browseable = yes
;   read only = yes
;   guest ok = no
# Uncomment to allow remote administration of Windows print drivers.
# You may need to replace 'lpadmin' with the name of the group your
# admin users are members of.
# Please note that you also need to set appropriate Unix permissions
# to the drivers directory for these users to have write rights in it
;   write list = root, @lpadmin

# A sample share for sharing your CD-ROM with others.
;[cdrom]
;   comment = Samba server's CD-ROM
;   read only = yes
;   locking = no
;   path = /cdrom
;   guest ok = yes

# The next two parameters show how to auto-mount a CD-ROM when the
#   cdrom share is accesed. For this to work /etc/fstab must contain
#   an entry like this:
#
#       /dev/scd0   /cdrom  iso9660 defaults,noauto,ro,user   0 0
#
# The CD-ROM gets unmounted automatically after the connection to the
#
# If you don't want to use auto-mounting/unmounting make sure the CD
#   is mounted on /cdrom
#
;   preexec = /bin/mount /cdrom
;   postexec = /bin/umount /cdrom

[ram]
  comment = Public Storage
  browsable=yes
  path = /ram
  public=yes
  writable=yes
  guest ok=yes
  read only=no
  create mask = 0777
  directory mask = 0777 
```

我的问题是，虽然我只是共享 ramdisk，为什么 smbd 使用我的根文件系统？以及如何在使用 smbd 时以只读方式挂载根文件系统？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T00:01:37.743

最有可能的是，Samba (smbd) 正在使用“/var/lib”中的文件，以及“/lib”和“/usr/lib”中的一堆动态库。

您可能需要运行 lsof 来检查：

```
sudo lsof|grep -i smbd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T08:22:42.560

从上面的命令中，您尝试在系统运行时重新挂载根文件系统 mount -o remount,ro /

# macros - 如何控制 rpmbuild buildroot 和安装目录

> ID：16079464
> 
> 赞同：2
> 
> 时间：2013-04-18T09:39:06.300
> 
> 标签：macros, installation, rpmbuild, buildroot

我对 rpmbuild 中的一些目录感到困惑。

1：buildroot：它应该用于存储最终用户安装二进制包时应该安装的文件。

问题：如何控制这个目录？BuildRoot 是什么意思？

```
 $ cat 3.spec
 ..
 BuildRoot: /opt/abc
 ..
 %prep
 echo %{buildroot}
 echo  $RPM_BUILD_ROOT 
```

无论我将 BuildRoot 设置为什么，我都会得到在`/usr/lib/rpm/macros`. 如果我定义`%buildroot`in `~/.rpmmacros`，我会从中得到结果。

2：我们安装rpm包时如何控制目的地？例如：`rpm -ivh xxx.rpm`，文件将安装在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T12:26:10.513

`%install`您自己在其中或任何地方创建子目录。

示例：您想安装所有文件，`/opt/mypkg/`但还需要一个配置文件`/etc/mypkg.conf`。因此，在您的`%install`部分中：

```
mkdir -p %{buildroot}/opt/mypkg
mkdir -p %{buildroot}/etc 
```

因此，您正在重新创建要安装的树，所有这些都与`%{buildroot}`目标的`/`.

# mysql - 获取表中所有电子邮件地址的所有 IP 地址

> ID：16079467
> 
> 赞同：0
> 
> 时间：2013-04-18T09:39:14.903
> 
> 标签：mysql, join, group-by

假设我们有一个名为的表`record`，它有 3 个字段

`id email ip`

**情况**

我们必须找出哪些电子邮件地址使用了超过 2 个 IP 地址以及这些 IP 地址是什么。现在，如果只是关于`COUNT`我们只需使用

```
SELECT email,COUNT(DISTINCT ip) as C FROM record GROUP BY email HAVING(c>2) 
```

但我还需要查看那些 IP 地址。所以预期的输出就像

```
email1@example.com 192.168.0.1
email1@example.com 192.168.0.2
email1@example.com 192.168.0.3
email1@example.com 192.168.0.4
email1@example.com 192.168.0.5

...ETC...

email2@example.com 192.168.1.3
email2@example.com 192.168.1.4
email2@example.com 192.168.1.5

```

有什么建议如何在不杀死 MySQL 的情况下将表加入自身并获得所需的输出以获取 100 万条记录？

**注意：**请注意，ip 存储为 INT 并已编入索引。我不需要帮助将该 ip 转换回它的字符串表示形式，对于这个问题的任何实际答案都可以忽略它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:49:38.287

您的查询将返回电子邮件及其计数，但您还需要列出的 IP 地址

```
SELECT 
   a.email, 
   a.ipAddress,
   b.cnt
FROM
   (SELECT 
       email,
       COUNT(DISTINCT ip) as cnt
   FROM 
       record 
   GROUP BY 
       email 
   HAVING(c>2))b
INNER JOIN
   (SELECT 
       DISTINCT *
   FROM
       record) a
ON
   a.email = b.email; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:10:29.120

根据@Meherzad 的回复，但返回唯一的 IP 地址：-

```
SELECT 
   a.email, 
   a.ipAddress,
   b.cnt
FROM
   (SELECT email, COUNT(DISTINCT ip) as cnt
   FROM record 
   GROUP BY email 
   HAVING(c>2))b
INNER JOIN
   (SELECT DISTINCT email, ip
   FROM record) a
ON
   a.email = b.email; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:52:36.783

如何子集查询（我猜不适用于 MySQL 中的视图）

```
select * from records where email in (
select email 
from records
group by email
having count(email) > 2) 
```

编辑：忘记为 IP 添加 distinct 子句，删除 IN 子句，但随后加入一小部分电子邮件

```
select distinct records.email, ip from records
inner join
(select email 
from records
group by email
having count(email) > 2) as subq
ON subq.email = records.email 
```

# python - 使用 Python 更改 Windows 密码

> ID：16079470
> 
> 赞同：3
> 
> 时间：2013-04-18T09:39:16.893
> 
> 标签：python, passwords

我正在使用 Python 开发一个小的密码管理器工具。它允许中央密码管理器和一次性密码，因此没有人会知道服务器的密码，当员工去其他雇主时，我们不需要更改所有密码。

无论如何，该软件的设计是为了将它用于电话回家（从而消除许多防火墙/网络问题）并作为服务运行。我们现在可以同步系统的用户，验证我们得到的密码是否正确。但是登录后重置密码是我们目前正在努力解决的问题。

win32.net NetUserchangePassword 好像有我们想要的。正如（我认为）它称为“网络用户*”。经过测试，我发现它确实称为 msvc 库的 netUserchangePassword 功能。问题是当我输入旧密码为无时它不起作用。

该过程以完全管理员身份运行。并且应该能够在不知道旧密码的情况下更改用户密码（免责声明：我来自 unix 背景，因此 root（超级管理员）可以做任何事情，如果我对 Windows 操作系统有误，请纠正我）。

那么，作为超级管理员，我如何在不知道旧密码的情况下使用 Python 脚本语言更改本地用户的密码？

谢谢！

更新：

```
def set_password(username, password):
    from win32com import adsi
    ads_obj = adsi.ADsGetObject("WinNT://localhost/%s,user" % username)
    ads_obj.Getinfo()
    ads_obj.Put('Password', password)
    ads_obj.SetInfo()

def verify_success(username, password):
    from win32security import LogonUser
    from win32con import LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT
    try:
        LogonUser(username, None, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT)
    except:
        return False
    return True

u = "test_usr"
p = "TheNewStrongP@S$w0rd!"
set_password(u, p)
if verify_success(u, p):
    print "W00t it workz"
else:
    print "Continue Googling" 
```

你猜怎么着，行不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-14T10:19:47.473

这会很好的

```
import subprocess

subprocess.call("net users "+username+" "+password, shell = True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:12:32.723

在示例中。改变：

```
ads_obj.Put('Password', password)
ads_obj.SetInfo() 
```

和：

```
ads_obj.SetPassword(password) 
```

问题解决了:)

# asp.net - 如何在 tinyMCE 中搜索、替换和突出显示所有出现的文本？

> ID：16079474
> 
> 赞同：1
> 
> 时间：2013-04-18T09:39:25.150
> 
> 标签：asp.net, tinymce

我在我的 asp.net Web 应用程序中集成了 tinyMCE，
我想知道如何在 tinyMCE 编辑器中搜索、替换和突出显示所有出现的单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:31:41.243

看看 tinymce searchreplace 插件。这将让您逐步搜索和替换编辑器内容或替换所有出现的内容。为了突出所有发生的事情，您将实施自己的一些事情。由于您需要选择内容的不同部分，因此此处无法选择。对此的解决方案是将出现的事件包装到每个跨度中并赋予它们一种样式。

# php - 如何从 PHP 调用 JavaScript 函数然后作用于返回值

> ID：16079475
> 
> 赞同：-4
> 
> 时间：2013-04-18T09:39:25.153
> 
> 标签：php, javascript

我正在创建一个简单的论坛，用户可以在其中创建帖子、回复帖子、删除帖子等。我在删除帖子时遇到了一些问题。我可以编写 PHP 来删除帖子，但此时帖子会立即被删除（所以如果有人不小心点击了他们没有机会取消）。我想要做的是调用一个 JavaScript 函数来显示一个来自 PHP 的确认框，然后如果该函数返回 true，则删除该帖子，否则什么也不做。在伪代码中，我想做的是：

```
<?php

function display_javascript_confirm_box()
{
if(call_javascript_function()==true)
{
delete();//call PHP function to delete post
}
else
{
return false;
//do nothing
} 
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:45:16.853

最简单的方法是不这样做：通过js确认，并通过php删除）

```
<a href="/path/to/delete" onclick="return confirm('Do you really want to delete?');">delete</a> 
```

只有当用户在对话框中确认确定时，才会关注链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:41:20.263

你只需要这个

```
<input type="submit" value="Delete" onclick="return confirm('Your Message');" /> 
```

[**演示**](http://jsfiddle.net/BpmYU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:41:30.433

从 PHP 调用 javascript 函数是不可能的。请注意，PHP 在服务器上运行，而 javascript 在客户端 - 浏览器中运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:41:41.890

使用 Javascript 而非 PHP 显示确认框。所以确认后，posted按钮的值会被发送到PHP，然后你可以通过isset()捕获它，然后触发delete()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T09:42:20.433

您应该了解 JavaScript 在客户端（浏览器）上运行而 PHO 在服务器端运行 - 如果您想从 javaScript 运行一些 PHP 代码，您应该建立与服务器的连接。例如使用 AJAX。

# android - 通过单击其侧面的按钮来滚动 Horizo ntalScrollView

> ID：16079486
> 
> 赞同：7
> 
> 时间：2013-04-18T09:40:05.133
> 
> 标签：android, horizontal-scrolling, horizontalscrollview

我在`HorizontalScrollView`a 中使用 a `Fragment`。当我滚动此视图而不是滚动`HorizontalScrollView`整个片段中的项目时，会向左或向右滚动。现在我想到了在布局的两侧使用按钮。但无法获得如何在任一侧滚动我的滚动视图。

在这方面的任何帮助将不胜感激。

**编辑**

以下是我的 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageButton
    android:id="@+id/btn_left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:src="@drawable/left_arrow" />

<ImageButton
    android:id="@+id/btn_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:src="@drawable/right_arrow" />

<HorizontalScrollView
    android:id="@+id/horizontal_scrollview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/btn_right"
    android:layout_toRightOf="@id/btn_left"
    android:fadeScrollbars="false"
    android:padding="5dp"
    android:scrollbarAlwaysDrawHorizontalTrack="true"
    android:scrollbars="horizontal" >

    <LinearLayout
        android:id="@+id/dynamic_generation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
    </LinearLayout>
</HorizontalScrollView> 
```

和我的java文件

```
public class MyGallery extends Activity {

private LinearLayout linearLayout;

private ImageButton leftBtn;
private ImageButton rightBtn;
private HorizontalScrollView hsv;
int currentScrollX = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.horizontalscrolling);

    leftBtn = (ImageButton) findViewById(R.id.btn_left);
    rightBtn = (ImageButton) findViewById(R.id.btn_right);
    hsv = (HorizontalScrollView) findViewById(R.id.horizontal_scrollview);
    linearLayout = (LinearLayout) findViewById(R.id.dynamic_generation);

    leftBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        }
    });

    rightBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        }
    });

    String[] users = new String[20];
    for (int i = 0; i < 20; i++) {
        users[i] = "user " + (i + 1);
    }

    for (int i = 0; i < users.length; i++) {
        final TextView userId = new TextView(MyGallery.this);
        userId.setText(users[i]);
        ImageView imageView = new ImageView(MyGallery.this);
        linearLayout.addView(userId);
        linearLayout.addView(imageView);
        userId.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(MyGallery.this,
                        userId.getText() + " has been clicked!",
                        Toast.LENGTH_LONG).show();
                // hsv.
            }
        });
    }
}

} 
```

**我需要的**

当我按下任何向左或向右按​​钮时，滚动视图必须分别向左或向右滚动。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T10:46:30.770

如果您将以下代码行添加到现有处理程序，您的视图将在每次单击按钮时向右滚动：

```
rightBtn.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        hsv.scrollTo((int)hsv.getScrollX() + 10, (int)hsv.getScrollY());
    }
}); 
```

如果您希望它滚动更顺畅，您可以使用 onTouchListener 代替：

```
rightBtn.setOnTouchListener(new View.OnTouchListener() {

    private Handler mHandler;
    private long mInitialDelay = 300;
    private long mRepeatDelay = 100;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                if (mHandler != null)
                    return true;
                mHandler = new Handler();
                mHandler.postDelayed(mAction, mInitialDelay);
                break;
            case MotionEvent.ACTION_UP:
                if (mHandler == null)
                    return true;
                mHandler.removeCallbacks(mAction);
                mHandler = null;
                break;
        }
        return false;
    }

    Runnable mAction = new Runnable() {
        @Override
        public void run() {
            hsv.scrollTo((int) hsv.getScrollX() + 10, (int) hsv.getScrollY());
            mHandler.postDelayed(mAction, mRepeatDelay);
        }
    };
}); 
```

根据您的喜好改变延迟，以获得您想要的平滑度和响应性。

# xmppframework - XMPPFrameWork TurnSocket 可以用吗？

> ID：16079487
> 
> 赞同：2
> 
> 时间：2013-04-18T09:40:07.493
> 
> 标签：xmppframework, transmitfile

XMPPFrameWork TurnSocket 可以用吗？？我想使用 TurnSocket 传输文件，但失败了，回调数学每次都运行到“- (void)turnSocketDidFail:(TURNSocket *)sender”。但我可以使用 ejabberd 服务器通过 iChat 和 Adium 传输文件。谁可以使用TurnSocket类传输文件，请帮助我，如果可以的话请发邮件给我，我的邮箱是182459312@qq.com。谢谢。有我的代码。

```
 BOOL bCon = [_xmppStream isConnected];
    //bCon is YES.

    NSArray * array = [NSArray arrayWithObjects:@"proxy.eu.jabber.org", nil]; 
//NSArray * array = @[@"conference.mini.local", @"pubsub.mini.local", @"vjud.mini.local"];
//my host server is "mini.local", there array 
//what's i can use to the array? i test everyone... @[@"mini.local"]  or //@[@"conference.mini.local", @"pubsub.mini.local", @"vjud.mini.local"]
// or @[@"proxy.eu.jabber.org"] but failed!
    [TURNSocket setProxyCandidates: array];

    XMPPJID *jid = [XMPPJID jidWithString : @"test2@mini.local" ];//@"test2@mini.local" is 
    //the target user who want get file.
    _objTURNSocket = [[TURNSocket alloc] initWithStream:_xmppStream toJID:  jid ];
    [_objTURNSocket startWithDelegate:self delegateQueue:dispatch_get_main_queue() ]; 
```

但是当我运行时，调用了回调数学`"- (void)turnSocketDidFail:(TURNSocket *)sender"`......

# ruby-on-rails - 发布请求的Rails后台任务，完成时返回json

> ID：16079488
> 
> 赞同：0
> 
> 时间：2013-04-18T09:40:08.167
> 
> 标签：ruby-on-rails, background-process

我确信以前有人解决过这个问题，我很想从你的经验中学习。

架构：服务器 A 是 Web 服务器 服务器 B 是 API 服务器 服务器 C 是数据源

用户在服务器 A 上填写表单 服务器 A 向服务器 B 提交 POST 请求 服务器 B 从服务器 C 获取一些数据，创建图像，将图像上传到服务器 A，返回结果 URL 作为对服务器 A 的响应。

服务器 B 上的工作流非常关键，它需要随时响应，还需要服务许多请求。希望服务器 A 上有成千上万的活跃用户。

我的问题是：如何在不锁定服务器 B 上的 Rails 应用程序的情况下激活最终结果？

我已经在服务器 B 上的动作控制器中对数据获取和图像创建进行了概念验证。我几乎可以肯定这不会很好地执行并提供良好的用户体验。

关于将图像上传到服务器 A，我可以使用 SFTP，但正在考虑在服务器 B 上本地安装服务器 A 的目标文件夹。希望这将减少不必要的登录。

提前感谢您的智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:45:09.857

你可以看看[delay_job](https://github.com/collectiveidea/delayed_job)。并且有许多可用的宝石，例如[resque](https://github.com/defunkt/resque)等。使用`delayed_job`您可以执行以下操作：

```
def get_reponse_from_server2  #create a method in your model which does stuff for you
  #do your stuff
end

handle_asynchronously :get_reponse_from_server2 
```

# php - 如何使用简码在内容中包含 wordpress 帖子的页面标题

> ID：16079490
> 
> 赞同：8
> 
> 时间：2013-04-18T09:40:10.850
> 
> 标签：php, html, wordpress, shortcode

在 wordpress 管理员中，我想在创建页面时执行以下操作：

页面标题：测试

页面内容：

Lorem ipsum dolor **[page_title]** sat amet, consectetur adipiscing elit。Nunc et lectus sat amet ante vulputate ultrices at sat amet **[page_title]**侵权。在 semper 中的 Nam mattis commodo mi。Suspendisse ut eros dolor。Morbi at odio feugiat **[page_title]** nunc vestibulum venenatis 坐在 amet vitae neque。Nam ullamcorper ante ac risus malesuada id iaculis nibh ultrices。

* * *

它说 [page_title] 我希望它打印页面标题（测试）

这需要通过管理系统来实现，而不是在模板中硬编码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T09:50:17.583

参考codex：[Shortcode API](http://codex.wordpress.org/Shortcode_API)

```
function myshortcode_title( ){
   return get_the_title();
}
add_shortcode( 'page_title', 'myshortcode_title' ); 
```

将此添加到主题的 functions.php 文件中。

请注意，根据 S.Visser 和我在他的回答中交换的评论 - 此解决方案仅适用于 The Loop 内部，而他的也适用于 The Loop 外部，因此他的答案更完整。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T09:50:11.660

将此添加到您的主题中，或从中制作插件。

```
/* title to get the post title  */
function getPageTitle() {
  global $wp_query;
  return get_post_title($wp_query->post->ID);
}

/* Add shortcode */
add_shortcode('page_title', 'getPageTitle'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T18:44:28.960

在网上找到了这个解决方案，希望它能帮助其他面临与我相同问题的人。只需将以下代码添加到 functions.php 文件或 page_title 插件 .php 文件。

```
add_filter('get_the_excerpt', 'show_shortcode_in_excerpt');
add_filter('the_excerpt', 'show_shortcode_in_excerpt');
function show_shortcode_in_excerpt($excerpt) {
    return do_shortcode(wp_trim_words(get_the_content(), 55));
} 
```

# node.js - 存储 mapreduce 结果

> ID：16079497
> 
> 赞同：0
> 
> 时间：2013-04-18T09:40:29.960
> 
> 标签：node.js, express, mapreduce, mongoose

我正在用 Node.js、Express 和 Mongo 编写一个应用程序。在每个页面上，我都应该显示我使用 MapReduce 收集的信息。

UPD：更多信息 :) 我不明白，我应该如何处理这些数据 - 将其存储到集合中还是什么？我有很多页面，在每个页面上我都有一个侧边栏，其中包含 map reduce（一种统计信息）的结果。这个结果不会经常变化，所以我不需要在每次页面加载时重新计算。我想为这项任务找到一条真正的道路）

# scheme - 方案的条件表达式和评估顺序

> ID：16079499
> 
> 赞同：1
> 
> 时间：2013-04-18T09:40:34.590
> 
> 标签：scheme, racket

思考如下表达式：

```
(cond (p1 (some_complex_expression1))
      (p2 (some_complex_expression2))
      (p3 (some_complex_expression3))
      ...
      (else (some_complex_expressionN))) 
```

那些`(some_complex_expressionX)`是按需评估的吗？（即 '(some_complex_expressionX)' 仅在其自身之前的谓词为真时才被评估`pX`）或者，它们是否遵循应用顺序（在尝试谓词之前，它们以某种方式尽可能多地被评估）

如果那是依赖于实现的，那么下面的实现呢？

```
mit-scheme
guile
racket
that scheme for sicp
r5rs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:57:08.983

在评估关联的表达式之前，测试必须返回一个真值。这是由计划标准保证的；例如，参见[R5RS 的第 4.2.1 节](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-7.html#%_sec_4.2.1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:05:22.070

有关 Racket 的详细信息，请参阅[参考手册](http://docs.racket-lang.org/reference/)。对于这个问题，您是在询问 ; 的语义[`cond`](http://docs.racket-lang.org/reference/if.html#%28form._%28%28lib._racket/private/letstx-scheme..rkt%29._cond%29%29)。那里的文档详细介绍了在什么条件下评估或不评估的内容。

# java - 使用 Rome 将 SyndFeed 转换为 SyndEntry

> ID：16079503
> 
> 赞同：0
> 
> 时间：2013-04-18T09:40:51.603
> 
> 标签：java, feed, atom-feed, rome

我目前正在研究一个暗示 XML 提要解析（Atom 2005）的项目，我正在使用 Rome 来执行此操作。

我目前有两种要解析的 XML 结构。

第一种：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed
    xmlns="http://www.w3.org/2005/Atom"
    xml:base="..." >

    <id>...</id>

    <title type="text" >...</title>

    <entry xmlns="http://www.w3.org/2005/Atom" >
    <id>...</id>
    </entry>

    <entry xmlns="http://www.w3.org/2005/Atom" >
    <id>...</id>
    </entry>

    ...
</feed> 
```

（一个提要，包含多个条目）

第二种：

```
<?xml version="1.0" encoding="UTF-8"?>

<entry xmlns="http://www.w3.org/2005/Atom" >
    <id>...</id>
</entry> 
```

（一个条目，但它不包含在“提要”中）

我的目标是制作一个解析输入 XML 并获取信息的 bean“MyEntry”。我的理想是拥有一个构造函数（例如，它以 SyndEntry 作为参数）。

我这样做了：

```
public MyEntry( SyndEntry e ) {
    _entry = e;
} 
```

*当我获得第*一种 XML 提要时，我可以获得“SyndEntry”对象：

```
SyndFeedInput feed_input = new SyndFeedInput();
...
SyndFeed feed = feed_input.build(xml_file);

for ( SyndEntry e : feed.getEntries() ) {
    // I can get SyndEntries from here
} 
```

--> 但是对于第二种类型的 XML，没有“提要”容器，我找不到任何直接从 XML 构建 SyndEntry 的方法（比如“SyndEntryInput”？）。我得到的是“SyndFeed”而不是“SyndEntry”，即使所有信息都可以访问。

因此，我正在寻找一种将 SyndFeed 转换为 SyndEntry（或反向）的方法，使用超类（我找不到 SyndEntry 和 SyndFeed 共有的任何超类）或专用转换器。

我目前的解决方案是创建两个构造函数（一个采用“SyndFeed”，另一个采用“SyndEntry”），但它非常难看，因为我有一个方法“getSyndData()”，它理想地返回用于构造的对象，用于检索通用信息（即：getSyndData().getTitle()）

任何帮助或想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:02:23.473

在这里回答自己：[Getting XML String value of SyndEntry with ROME](https://stackoverflow.com/questions/16187928/getting-xml-string-value-of-syndentry-with-rome/16238401#16238401)

也许我没有问正确的问题

# image - VBA excel存在jpg类型的图像格式

> ID：16079507
> 
> 赞同：0
> 
> 时间：2013-04-18T09:41:08.853
> 
> 标签：image, excel, vba, exists

假设我在 excel 中有一个名为 test.xls 的电子表格，其中有一个名为 column1 的列，其值为 image1、image2 等。我有一个名为 images 的文件夹，包含 jpg 类型的图像，命名类似于 image1 列中的值.jpg、image2.jpg 等。我需要一个 Vba 代码来检查基于电子表格列的文件夹中是否存在图像。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:07:50.843

此示例将在另一列中显示搜索结果。编辑变量，不要忘记文件夹路径中的最后一个 \。

```
Sub checkFiles()
  Dim count&, lastRow&
  Dim folderPath, columnRead, columnWrite As String

  folderPath = "C:\EXAMPLE\"
  columnRead = "A"
  columnResults = "B"

  lastRow = ThisWorkbook.Sheets(1).Range(columnRead & Rows.count).End(xlUp).Row
  For count = 1 To lastRow
    Range(columnRead & count).Activate

    If Dir(folderPath & Range(columnRead & ActiveCell.Row).Value) <> "" Then
        Range(columnResults & ActiveCell.Row).Value = "File exists."
    Else
        Range(columnResults & ActiveCell.Row).Value = "File doesn't exist."
    End If

  Next count
End Sub 
```

# iphone - UILabel - 灵活大小和固定空间的问题

> ID：16079510
> 
> 赞同：0
> 
> 时间：2013-04-18T09:41:17.350
> 
> 标签：iphone, ios, xcode, uilabel

我正在尝试查看 3 个不同标签的信息；第一的。标题二。发布日期 三。描述

在标题和发布日期之间有两个空行。有时，当标题超过 3 行时，会在发布日期写入。这是一张图片（粗线是发布日期标签）： ![标题获取 pubDate](https://i.stack.imgur.com/Lgm2S.png)

**有时当描述标签获得大量文本时，就会发生这种情况：** ![在此处输入图像描述](https://i.stack.imgur.com/sFEnH.png)

**这就是它应该的样子：**

![在此处输入图像描述](https://i.stack.imgur.com/DTMSs.png)

所以问题： 1\. 我怎样才能在标题和发布日期之间保存一个固定的空间？（无论标题多少行都会在两者之间保留一个固定的空间） 2.为什么当他得到大量文本时，描述会向下移动？我怎样才能固定他的位置？

我只想在 3 个标签之间保留一个空格，无论每个标签有多少行。

到目前为止，这是我的代码：

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    [_scroller setScrollEnabled:YES];
    [_scroller setContentSize:CGSizeMake(320, 600)];

    self.lblDescription.text = self.description;
    self.lblTitle.text = self.stitle;
    self.lblPubDate.text = self.pubDate;

    self.lblTitle.numberOfLines = 0;
    [self.lblTitle sizeToFit];
    self.lblTitle.textAlignment = UITextAlignmentRight;
    CGRect titleFram = self.lblTitle.frame;
    titleFram = CGRectMake(titleFram.origin.x, titleFram.origin.y, 280, titleFram.size.height);
    self.lblTitle.frame = titleFram;

    self.lblDescription.numberOfLines = 0;
    [self.lblDescription sizeToFit];

    [self resizeHeightToFitForLabel:self.lblTitle];
    [self resizeHeightToFitForLabel:self.lblDescription];

}
-(void)resizeHeightToFitForLabel:(UILabel *)label
{
    CGRect newFrame         = label.frame;
    newFrame.size.height    = [self heightForLabel:label withText:label.text];
    label.frame             = newFrame;
}

-(CGFloat)heightForLabel:(UILabel *)label withText:(NSString *)text
{
    CGSize maximumLabelSize     = CGSizeMake(290, FLT_MAX);

    CGSize expectedLabelSize    = [text sizeWithFont:label.font
                                   constrainedToSize:maximumLabelSize
                                       lineBreakMode:label.lineBreakMode];

    return expectedLabelSize.height;
} 
```

完成这项工作的最佳方法是什么？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:03:30.830

你可以试试这个方法

```
NSString *lbltext1 = lblTitle.text;
    NSString *lbltext2 = lblDate.text;
    NSString *lbltext3 = lblDesc.text;

CGRect rect = self.lblTitle.frame;
rect.size.height = [ViewController calculateHeightForText:lbltext1 font:self.lblTitle.font size:CGSizeMake(rect.size.width, 40000)].height;
self.lblTitle.frame = rect;

rect = self.lblDate.frame;
rect.origin.y = CGRectGetMaxY(self.lblTitle.frame) + 5;
rect.size.height = [ViewController calculateHeightForText:lbltext2 font:self.lblDate.font size:CGSizeMake(rect.size.width, 40000)].height;
self.lblDate.frame = rect;

rect = self.lblDesc.frame;
rect.origin.y = CGRectGetMaxY(self.lblDate.frame) + 5;
rect.size.height = [ViewController calculateHeightForText:lbltext3 font:self.lblDesc.font size:CGSizeMake(rect.size.width, 40000)].height;
self.lblDesc.frame = rect; 
```

计算高度，

```
+ (CGSize)calculateHeightForText:(NSString *)text font:(UIFont *)font size:(CGSize)size {
    CGSize _size = [text sizeWithFont:font constrainedToSize:size lineBreakMode:UILineBreakModeWordWrap];
    return _size;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:34:16.630

试试这个，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [_scroller setScrollEnabled:YES];
    [_scroller setContentSize:CGSizeMake(320, 600)];

    //Use this way
    [self positionLabel:self.lblTitle withText:self.stitle withY:10];
    [self positionLabel:self.lblPubDate withText:self.pubDate withY:CGRectGetMaxY(self.lblTitle.frame)+10 ];
    [self positionLabel:self.lblDescription withText:self.description withY:CGRectGetMaxY(SELF.lblPubDate.frame)+10 ];

}

-(void)positionLabel:(UILabel*)lbl withText:(NSString*)text withY:(CGFloat)Y
{
    lbl.textAlignment = UITextAlignmentRight;
    lbl.text = text;
    lbl.numberOfLines = 0;
    lbl.lineBreakMode = NSLineBreakByWordWrapping;
    CGSize size = [self calculateSize:lbl];
    //FIXED
    [lbl setFrame:CGRectMake(10 , Y , (size.width>310)?size.width:310 , size.height)]; 
}

-(CGSize)calculateSize:(UILabel*)lbl
{
    CGSize size = [lbl.text sizeWithFont:lbl.font
                       constrainedToSize:CGSizeMake(310, MAXFLOAT)
                           lineBreakMode:UILineBreakModeWordWrap];
    return size;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:53:30.417

使用我的波纹管自定义方法计算其内容高度...

```
(float) calculateHeightOfTextFromWidth:(NSString*) text: (UIFont*)withFont: (float)width :(UILineBreakMode)lineBreakMode
{
[text retain];
[withFont retain];
CGSize suggestedSize = [text sizeWithFont:withFont constrainedToSize:CGSizeMake(width, FLT_MAX) lineBreakMode:lineBreakMode];

[text release];
[withFont release];

return suggestedSize.height;
} 
```

并像下面一样使用它..

```
UILabel *lblAddress = [[UILabel alloc]init];
[lblAddress setFrame:CGRectMake(110, 31, 200, 50)];        
lblAddress.text = @"your Text ";
lblAddress.lineBreakMode = UILineBreakModeWordWrap;
lblAddress.numberOfLines = 0;
lblAddress.font = [UIFont fontWithName:@"Helvetica" size:12];

lblAddress.frame = CGRectMake(lblAddress.frame.origin.x, lblAddress.frame.origin.y, 
                         200,[self calculateHeightOfTextFromWidth:lblAddress.text :lblAddress.font :200 :UILineBreakModeWordWrap] ); 

lblAddress.textColor = [UIColor darkGrayColor];

[self.view addSubview:lblAddress]; 
```

见[我的博客](http://parasjoshi3.blogspot.in/2012/11/set-uilabel-with-adjust-content-text.html)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:54:07.117

试试这个

```
 self.lblDescription.text = @"asdfasfadfsa";
    self.lblTitle.text = @"asdafsasf";
    self.lblPubDate.text = @"asdafsas";

    self.lblTitle.numberOfLines = 0;
    [self.lblTitle sizeToFit];
    self.lblTitle.textAlignment = UITextAlignmentRight;
    CGRect titleFram = self.lblTitle.frame;
    titleFram = CGRectMake(titleFram.origin.x, titleFram.origin.y, 280, titleFram.size.height);
    self.lblTitle.frame = titleFram;

    self.lblDescription.numberOfLines = 0;
    [self.lblDescription sizeToFit];

    [self resizeHeightToFitForLabel:self.lblTitle];

    CGRect pubFrame =self.lblPubDate.frame;
    pubFrame.origin.y= self.lblTitle.frame.origin.y+self.lblTitle.frame.size.height+110;

    [self.lblPubDate setFrame:pubFrame];

    CGRect descFrame =self.lblDescription.frame;
    descFrame.origin.y= self.lblPubDate.frame.origin.y+self.lblPubDate.frame.size.height+30;

    [self resizeHeightToFitForLabel:self.lblDescription]; 
```

# c# - Facebook 集成“发生错误，请稍后再试”？

> ID：16079511
> 
> 赞同：1
> 
> 时间：2013-04-18T09:41:17.763
> 
> 标签：c#, asp.net, asp.net-mvc, facebook, facebook-graph-api

我正在尝试将我的应用程序与 facebook 连接起来。我在 facebook 上创建了应用程序，这是我的代码：

```
private void CheckAuthorization()
        {
            string app_id = "appID";
            string app_secret = "appSecret";
            string scope = "publish_stream,manage_pages";

            if (Request["code"] == null)
            {
                Response.Redirect(string.Format(
                    "https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}&scope={2}",
                    app_id, Request.Url.AbsoluteUri, scope));
            }
            else
            {
                Dictionary<string, string> tokens = new Dictionary<string, string>();

                string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}",
                    app_id, Request.Url.AbsoluteUri, scope, Request["code"].ToString(), app_secret);

                HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

                using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
                {
                    StreamReader reader = new StreamReader(response.GetResponseStream());

                    string vals = reader.ReadToEnd();

                    foreach (string token in vals.Split('&'))
                    {
                        //meh.aspx?token1=steve&token2=jake&...
                        tokens.Add(token.Substring(0, token.IndexOf("=")),
                            token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
                    }
                }

                string access_token = tokens["access_token"];

                var client = new FacebookClient(access_token);

                client.Post("/me/feed", new { message = "markhagan.me video tutorial" });
            }
        } 
```

页面加载时会显示登录弹出窗口。当我使用创建 facebook 应用程序的用户的电子邮件登录时，一切都很完美。但是其他所有不同的登录都会导致消息“发生错误，稍后再试”。有人能告诉我我在哪里犯错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:50:54.810

确保应用程序沙盒模式设置为“关闭”

# php - 将会话变量从 php 传递到 perl

> ID：16079514
> 
> 赞同：1
> 
> 时间：2013-04-18T09:41:28.607
> 
> 标签：php, perl, post, cookies, cgi

我需要将 php 会话变量从我的 php 表单传递到 perl 脚本，反之亦然，以便表单字段可以保留它们的值。

表单.php

```
<?php  session_start();
 if (isset($_POST['submit'])){
    $post_arr = $_POST;

    $expire = 8*3600; 
    setcookie("Cookie_Info", serialize($post_arr), time()+$expire); 
   }

if (isset($_COOKIE['Cookie_Info'])) {
    $data = unserialize($_COOKIE['Cookie_Info']);
} else {
    $data = array(
          'from' => '',
              'area_html' => ''
    );

        } 
```

......

```
<form name="sendForm" method="post" action="test.cgi" >
<tr><td> from: </td>
    <td><input type="text" name="from" value="<?php echo $data->from; ?>"/></td>
</tr> 
```

我的问题是我怎么能在 perl 方面做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:25:41.263

答案很简单，在 perl 方面：

```
use CGI qw/:standard/;         
use CGI::Cookie;
%cookies = CGI::Cookie->parse($ENV{COOKIE}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T10:09:42.570

你已经搜索了吗？我不这么认为...

[将变量从 PHP 传递到 PERL](https://stackoverflow.com/questions/10798478/passing-variables-from-php-to-perl)

您需要使用 exec：

```
<?php
$var1='high'; 
exec('C:/xampp/htdocs/WORK/hello.pl'.' '.EscapeShellArg("$var1"),$output);
echo ($output);
?> 
```

其他链接：

[http://forums.devshed.com/php-development-5/passing-arrays-from-php-to-a-perl-script-run-as-35600.html](http://forums.devshed.com/php-development-5/passing-arrays-from-php-to-a-perl-script-run-as-35600.html)

# c# - 格式字符串/数字“NNNNN”

> ID：16079517
> 
> 赞同：3
> 
> 时间：2013-04-18T09:41:32.327
> 
> 标签：c#, string, numbers, format

我必须写一个数字的级数，有（每个）5位数字。我的代码是：

```
int count = 1;
string labelCount = "";
foreach (var directory in folderList)
{
    if (count < 10)
    {
        labelCount = "0000" + count.ToString();
    }
    else if (count < 100)
    {
        labelCount = "000" + count.ToString();
    }
    else if (count < 1000)
    {
        labelCount = "00" + count.ToString();
    }
    else if (count < 10000)
    {
        labelCount = "0" + count.ToString();
    }

    count++;
} 
```

但在我看来，它看起来不太好。有没有办法格式化一个数字（在左边添加 0xN）或者这是唯一的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:42:57.300

只需为方法提供*格式*`ToString`

```
var str = count.ToString("00000"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T09:42:49.113

看看[`String.PadLeft`](http://msdn.microsoft.com/en-gb/library/system.string.padleft.aspx)：

```
string formatted = count.ToString().PadLeft(6, '0'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:47:24.570

试试下面的方法，它会帮助你...

```
labelCount  = string.Format("{0:00000}", count); 
```

有关所有格式，请参见此处：[String.Format](http://www.dotnetperls.com/string-format)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:52:51.933

就这样去怎么样？

```
int count = 1;
string labelCount = "";

foreach (var directory in folderList)
{
   int i = 10000;
   while (count < i)
   {
       labelCount += 0;
       i /= 10;
   }

   labelCount += count.ToString();
   count++;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-18T09:44:48.313

您可以通过执行以下操作来实现此目的：

```
string formatted = count.ToString();
for(int i = 0; i < count - 5; i++)
{
    formatted = "0" + formatted;
}
labelCount.Text = formatted; 
```

编辑：对不起，我的错！应该：

```
//..
for(int i = 0; i < 5 - count.ToString().Length; i++)
//.. 
```

# ios - 唯一地将大写字母映射到小写字母

> ID：16079518
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:41:38.623
> 
> 标签：ios, objective-c, nsstring, uppercase, lowercase

我有 2 个字符串：

```
ahFkZXZ-cHV6emxlZmxvd2RldnIZCxILUHV6emxlSW1hZ2UYgICAgICAgIBcDA
ahFkZXZ-cHV6emxlZmxvd2RldnIZCxILUHV6emxlSW1hZ2UYgICAgICAgIBCDA 
```

您会注意到这两个字符串几乎相同，除了倒数第三个字母“C”在一个中为大写，而在另一个中为小写。我根据这些名称将文件保存到磁盘 - 所以问题就变成了，因为 Mac OS X 是一个不区分大小写的文件系统，第二个具有此名称的文件将覆盖第一个。

我的直接想法是迭代字符串中的字母，并将大写字母“映射”为小写字母。例如，对于每个大写字母，将其替换为 2 个小写字母（“C”将变为“cc”）。

这个实现的唯一性有什么问题吗？在 Objective C 中实现这一目标的最简单方法是什么？对每个字母进行迭代很容易，但我很好奇是否有一些内置的辅助函数可以让这变得不那么痛苦。

此外，我不确定 Mac OSX/iOS 上的文件名长度限制。

*另请注意，这是针对 iOS 应用程序的，但我只想解决这个问题，因为它在模拟器中出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:51:52.873

你这样做是不对的。

可能的解决方案：

1.  将字符串转换为大写/小写
2.  如果两个“密钥”都有效并且您需要两个不同的文件，请不要使用密钥作为文件名。分配一个唯一的（例如递增的）文件名，并有一个单独的文件将密钥映射到文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:56:54.453

为什么不尝试在字符串末尾添加字符串哈希？如果将此哈希添加到字符串中，则每种情况都会有一个唯一的字符串。

函数是：[str hash];

# c# - 检查对象存在抛出对象必需错误

> ID：16079520
> 
> 赞同：1
> 
> 时间：2013-04-18T09:41:43.673
> 
> 标签：c#, jquery, asp.net

我有一个用于数据输入的网络表单。该页面需要通过查询字符串传递一个 ID。在后面的代码中，我检查了 ID 是否已提供。如果它没有隐藏表单（在面板中）并显示错误消息。

在 html 中，我有一个附加事件的 JQuery 脚本块（下载的日期选择器）。

```
 window.onload = function() {
        new JsDatePick({
            useMode: 2,
            target: "txtDateOfIncident",
            dateFormat: "%d %M %Y"
        });
    }; 
```

如果后面的代码隐藏了表单，则 JQuery 会抛出错误`Object Required`

所以在 JQuery 中我试图测试对象的存在[根据这篇文章](https://stackoverflow.com/questions/5293041/jquery-how-to-check-if-an-element-exists "在这里找到")......

```
 window.onload = function() {
        if ($('#txtDateOfIncident').length) {
            new JsDatePick({
                useMode: 2,
                target: "txtDateOfIncident",
                dateFormat: "%d %M %Y"
            });
        }
    }; 
```

现在我得到了代码`Object Required`错误`$('#txtDateOfIncident').length`。

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T08:10:29.807

我认为如果将 txtDateOfIncident 的客户端 ID 模式设置为 ClientIDMode="Static" 会更好。

```
<asp:TextBox ID="txtDateOfIncident"  runat="server" ClientIDMode="Static" /> 
```

# templates - 如何使用 iText 格式化 pdf 模板中的文本

> ID：16079523
> 
> 赞同：1
> 
> 时间：2013-04-18T09:41:54.557
> 
> 标签：templates, pdf, formatting, itext, openoffice-writer

我创建了一个带有“开放式办公室作家”的 pdf 模板，并用 iText 填充了这些字段。在这样的伪代码中：

```
PdfReader reader = new PdfReader("C:/temp/Template.pdf");
FileOutputStream fileOutputStream = new FileOutputStream("C:/temp/TemplateTest.pdf");
PdfStamper stamper = new PdfStamper(reader, fileOutputStream);
stamper.setFormFlattening(true);
stamper.getAcroFields().setField("description", "This is a important description.");

stamper.close(); 
```

现在我只想要“描述”文本中的“重要”一词加粗。我该如何处理？是否可以使用 iText 和子字符串更改 pdf 模板中的给定格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:07:45.763

您已经在 PDF 中定义了一个文本字段以及应该用于该文本字段的字体，例如 Helvetica。在这种情况下，您只能使用该字体。您不能引入其他字体，例如 Helvetica-Bold。

您要查找的不是文本字段，而是富文本字段。在这种情况下，您设置一个富文本值。这个富文本值看起来很像 HTML，但略有不同。您可以查阅 ISO-32000-1 以了解它的不同之处。

您可以使用 iText 填写富文本字段，但...仅当您不展平表单时。因为如果您希望 iText 呈现特殊风格的 HTML，则需要代码来解析该 HTML。实际上：这就是我们在 XFA Worker 中所做的，但这对您没有帮助，因为您没有 XFA 表单，您有一个 AcroForm。

长话短说：阅读我的书的第 8 章，您会找到一个示例，其中我使用字段`ColumnText`和字段位置填写字段。如果您没有这本书，请查看[MovieAds](http://itextpdf.com/examples/iia.php?id=163)示例。

# java - HashSet “无法从元素类型 Object 转换为 Integer”，当期望 Integer 的 HashSet 时

> ID：16079525
> 
> 赞同：1
> 
> 时间：2013-04-18T09:42:04.140
> 
> 标签：java, set, hashset

在下面的代码中，我希望`pn.get(8).get(8)`返回一个数组`Integers`（在此示例中，数组的长度为 1，但在我的程序中它更长）。相反，我得到了一个`Objects`.

有人可以告诉我为什么以及我做错了什么。

```
ArrayList<ArrayList<HashSet<Integer>>> pn =
    new ArrayList<ArrayList<HashSet<Integer>>>();

for (int x = 0; x < 9; x++) 
{
    pn.add(x, new ArrayList<HashSet<Integer>>());

    for (int y = 0; y < 9; y++) {
        pn.get(x).add(y, new HashSet<Integer>());
        pn.get(x).get(y).add(new Integer(x));
    }
}

for (Integer i: pn.get(8).get(8).toArray())
{
    System.out.println(i);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:48:52.670

您需要做的就是删除语句中的`toArray()`调用，该调用返回而不是您可能期望的那样。这是[Java 如何使用类型擦除实现泛型](http://en.wikipedia.org/wiki/Generics_in_Java#Problems_with_type_erasure)的工件。运行时，JVM 不知道您的类型是，因此必须返回一个.`for``Object[]``Integer[]``HashSet``Integer``toArray()``Object[]`

谢天谢地，`HashSet`可以直接迭代，所以`toArray()`调用是不必要的。以下对我有用：

```
ArrayList<ArrayList<HashSet<Integer>>> pn = new ArrayList<ArrayList<HashSet<Integer>>>();

for (int x = 0; x < 9; x++) 
{
    pn.add(x, new ArrayList<HashSet<Integer>>());

    for (int y = 0; y < 9; y++) {
        pn.get(x).add(y, new HashSet<Integer>());
        pn.get(x).get(y).add(new Integer(x));
    }
}

for (Integer i: pn.get(8).get(8))
{
    System.out.println(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:49:21.383

删除`toArray()`，它返回 a `Object[]`，而您的循环变量是 a `Integer`，因此出现错误。

```
for (Integer i: pn.get(8).get(8))
  {
       System.out.println(i);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:49:39.383

`<Collection>.toArray`默认情况下将返回一个无类型 ( `Object`) 数组。要输入它，也就是说要使用哪种类型（`Integer`在您的情况下），请使用：

```
Integer[] integers = pn.get(8).get(8).toArray(new Integer[pn.get(8).get(8).size()]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T09:50:40.023

这是类型擦除的结果[（请参阅此处的 oracle 文档）](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，当您调用 toArray() 时，这会成为一个问题。因为 HashSet 是一个可迭代的集合，所以对 toArray() 的调用无论如何都是不必要的：您可以简单地使用`for (Integer i: pn.get(8).get(8))`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T09:56:06.810

如果你真的想要数组试试这个

```
 HashSet<Integer> temp = pn.get(8).get(8);
    Integer i[] = new Integer[temp.size()] ;

    for (Integer j: temp.toArray(i)) {
        System.out.println(j);
    } 
```

否则

```
 for (Integer j: pn.get(8).get(8)){
        System.out.println(j);
    } 
```

会工作得很好。

# regex - 输入完成后如何基于正则表达式验证dojo TextBox

> ID：16079537
> 
> 赞同：0
> 
> 时间：2013-04-18T09:42:28.357
> 
> 标签：regex, textbox, dojo

我有一个用例，我需要根据正则表达式匹配字符串。输入位于 dojo ValidationTextBox 中，我必须在其中添加 regEx 以匹配特定字符串。要匹配的字符串用于带宽。例如：100 Mbps、1 Gbps、10 Kbps 等。此正则表达式有效：`[1-9][0-9]*[ ][M|K|G|T][b][p][s]`

但是，验证文本框在我开始输入时会引发错误，因为字符串尚未完成。假设我要添加的值为“100 Mbps”，当我输入“1”时，由于正则表达式不匹配而显示错误。

完成输入后如何使文本框验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T05:55:12.647

我们曾经在顶级 Dojo 上使用我们自己的库。我们通过每次用户输入某个字符时检查输入的字符串是否是正则表达式的子字符串（从最左边开始）找到了一个解决方案，一旦焦点被移除，我们就用正则表达式检查整个字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T12:15:57.497

一旦输入了最终的“bps”，您就完成了输入。在运行正则表达式之前，我会首先检查最后 3 个字符（获取子字符串）实际上是否为 'bps'。

# selenium - 使用 selenium 和 phpunit 从 xptha 获取文本

> ID：16079538
> 
> 赞同：0
> 
> 时间：2013-04-18T09:42:29.597
> 
> 标签：selenium, phpunit

```
<table id="RegTable" class="GSTable" cellspacing="0" cellpadding="0" style="margin: 20px auto 0px; width: 580px; padding: 5px; font-size: 12px;">
<tbody>
<tr>
<td id="termstab" height="150" colspan="2">
<div style="width:100%; height:100%; padding-right:5px; overflow-y:auto;">
<p align="justify"></p>
<h2 class="paraHead" align="center">Terms and Conditions</h2> 
```

我如何验证此网页上的“条款和条件”文本。我尝试了 verifyTextPresent 方法和其他可能的方法，但它不起作用。所以我需要找到路径。如何从该位置获取文本“条款和条件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:44:33.937

各种方式...

通过 XPath 将是：

```
//h2[text()='Terms and Conditions'] 
```

或者

```
//h2[@class='paraHead'] 
```

或者

```
//table[@id='RegTable']/descendant::h2[text()='Terms and Conditions'] 
```

或使用 CSS：

```
h2.parahead 
```

# vb.net - jQuery 自动完成功能不适用于来自 ashx 的远程数据

> ID：16079543
> 
> 赞同：1
> 
> 时间：2013-04-18T09:42:46.790
> 
> 标签：vb.net, jquery, jquery-autocomplete, ashx

我使用带有 ASHX 作为源的 jQuery 自动完成。但是每个请求都会抛出一个编号为 200 的错误。

我的 JavaScript：

```
$(function () {
    $('#username input[type = "text"]').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "UserName.ashx?term=" + request.term,
                dataType: "json",
                type: "POST",
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.Value
                        }
                    }))
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                }
            });
        }
    });
}); 
```

的HTML：

```
<div id="username">
    <asp:Label Text="User name" runat="server" />
    <asp:TextBox ID="txtUserName" runat="server" />
</div> 
```

阿什克斯：

```
Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
    context.Response.Clear()
    context.Response.ContentType = "application/json"

    Try
        Dim oList As New List(Of ResultItem)

        For Each File As System.IO.FileInfo In New System.IO.DirectoryInfo(ApplicationInfo.Settings.AbsoluteUserConfigPath).GetFiles(context.Request.QueryString("term") & "*.xml")
            oList.Add(New ResultItem With {.Value = System.Text.RegularExpressions.Regex.Replace(File.Name, File.Extension & "$", String.Empty)})
        Next

        context.Response.Write(New System.Web.Script.Serialization.JavaScriptSerializer().Serialize(oList))
    Catch ex As Exception
        context.Response.Clear()
        context.Response.ContentType = "text/plain"
        context.Response.StatusCode = 500
        context.Response.StatusDescription = ex.Message
    End Try
End Sub 
```

使用静态内容它可以正常工作，但使用此请求我收到以下错误：`SyntaxError: JSON.parse: unexpected character`.

生成的 JSON 看起来像

```
[
    {"Value":"Item 1","Name":"","Description":""},
    {"Value":"Item 2","Name":"","Description":""},
    {"Value":"Item 3","Name":"","Description":""},
    {"Value":"Item 4","Name":"","Description":""}
] 
```

并且应该是有效的。

知道为什么它不起作用吗？出乎意料的性格是什么？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:31:28.120

我更改了源代码和 JSON，然后运行它。

```
$(function () {
    $('#username input[type = "text"]').autocomplete({
        source: "UserName.ashx"
    });
} 
```

```
[
    {"object":"Item 1","label":"","Description":""},
    {"object":"Item 2","label":"","Description":""},
    {"object":"Item 3","label":"","Description":""},
    {"object":"Item 4","label":"","Description":""}
] 
```

# perl - grepping数组中的Perl错误

> ID：16079546
> 
> 赞同：0
> 
> 时间：2013-04-18T09:42:52.087
> 
> 标签：perl

我在 perl 中编写了一个子过程来检查我的字符串数组是否包含特定值。

```
sub check_if_entity_exists() {

    my $entity      = shift;
    my @entityarray = @_;

    print "my entity to be checked $entity  \n";
    print "entity array before change  @entityarray : \n";

    join(" ", map { s/^\s*|\s*$//g; $_ } @entityarray);

    print " array after change @entityarray \n";

    my $status = "FALSE";

    if (grep { $_ eq $entity } @entityarray) {
        $status = "TRUE";
        return $status;
    }
    else {
        return $status;
    }
} 
```

在上面的代码中`@entityarray`= xyz.com `$entity`= xyz.com 由于实体存在于实体数组中，我希望设置为 true，但 flow 将变为 false

输出日志：我的实体在更改 xyz.com 之前要检查 xyz.com 实体数组：更改 xyz.com 后的数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:01:05.393

您的`check_if_entity_exists`子程序有一个空原型。那坚持这个子例程必须没有参数，这是错误的。你*永远不*应该在 Perl 中使用原型——它们的工作方式与其他语言中的原型不同，并且适用于非常具体的事情。

您还在`map`void 上下文中使用，并`join`生成一个立即丢弃的字符串。你应该*总是*有

```
use strict;
use warnings; 
```

在*所有*程序的顶部，它会告诉你

> 在 void 上下文中使用无用的连接

你应该把`map`循环写成

```
for (@entityarray) {
  s/^\s+//;
  s/\s+\z//;
} 
```

除此之外，您的代码为我做了它应该做的事情。如果我这样称呼它

```
my @entityarray = ('    xyz.com    ');
my $entity = 'xyz.com';

print check_if_entity_exists($entity, @entityarray); 
```

**输出**

```
my entity to be checked xyz.com  
entity array before change      xyz.com     : 
 array after change xyz.com 
TRUE 
```

最好使用`first`from 的函数来编写它`List::Util`，就像这样

```
use List::Util 'first';

sub check_if_entity_exists {
  my $entity = shift;
  defined(first { /^\s*\Q$entity\E\s*$/ } @_) ? 'TRUE' : 'FALSE';
} 
```

# java - 石英与弹簧集成，空指针异常

> ID：16079549
> 
> 赞同：1
> 
> 时间：2013-04-18T09:43:08.667
> 
> 标签：java, spring, quartz-scheduler

我正在尝试将quartz与spring集成，文件位置从jsp页面传递给**JobCSVfile**类，但它没有占用该位置并显示空指针异常。**而且我还想从我不知道该怎么做的jsp页面中调整时间，因为我在applicationcontext.xml**
applicationcontext.xml中使用trigurring细节

```
<bean id="jobCSVfile"
    class="com.vxl.appanalytix.dataload.quartz.JobCSVfile">

</bean>
<bean id="JobA" class="org.springframework.scheduling.quartz.JobDetailBean">
<property name="jobClass" value="com.vxl.appanalytix.dataload.quartz.JobCSVfile" />
<property name="jobDataAsMap">
    <map>
        <entry key="timeout" value="5" />
    </map>
</property>
</bean>
<bean id="cronTriggerJobA"     class="org.springframework.scheduling.quartz.CronTriggerBean">
 <property name="jobDetail" ref="JobA" />
<property name="cronExpression" value="0/5 * * * * ?" />
</bean>
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
<property name="jobDetails">
    <list>
        <ref bean="JobA" />
    </list>
</property>
<property name="triggers">
    <list>
        <ref bean="cronTriggerJobA" />

    </list>
</property>
</bean> 
```

**如果没有在applicationcontext.xml**中进行调度，我们可以用其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:01:36.820

我可以告诉你我做了什么，我使用 java 而不是 jsp（我不知道 jsp）

首先我创建了我的工作界面：

```
public interface JobI {
    void execute(Object[] args);
} 
```

我需要为每个作业使用相同的可执行方法

然后创建工作并对其进行beanify

```
public class SimpleJob implements JobI {
    @Override
    public void execute(Object[] args) {
        for (Object o : args) {
            // String[] array = o.toString().split("=");
            System.out.println(o.toString());
        }
    }
} 
```

// 上下文文件

```
<bean id="simpleJob" class="uk.co.utel.tcds.system.schedule.jobs.SimpleJob" /> 
```

现在只需创建将添加新工作的类，即 JobController

```
 public JobController{
    private final StdScheduler scheduler;

    public JobController(StdScheduler scheduler){
        this.scheduler=scheduler;
        }

    public void addJob(String cronExpr){
        CronTrigger trigger = new CronTrigger("name","group");
        trigger.setCronExpression(cronExpr));
        scheduler.scheduleJob(getJobDetails(), trigger);
        }

    public JobDetails getJobDetails(){
        final JobI jobBean = (JobI) applicationContext.getBean("SimpleJob");
        final MethodInvokingJobDetailFactoryBean jobDetail = new MethodInvokingJobDetailFactoryBean();
        jobDetail.setTargetObject(jobBean);
        jobDetail.setTargetMethod("execute");
        jobDetail.setName("name");
        jobDetail.setGroup("group");
        return (JobDetail) jobDetail.getObject();
        }
    } 
```

// 上下文文件

```
 <bean id="jobController" class="JobController">
        <constructor-arg name="scheduler" ref="scheduler" />
    </bean> 
```

您所需要的只是将 id 添加到调度程序

```
<bean id="scheduler"
        class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        .....
</bean> 
```

现在，当您想将它与 jsp 一起使用时，您所需要做的就是将 jobController bean 传递给您的脚本并调用 addJob 方法

`JobDetail`对，我差点忘了，在不同版本的石英中，创建和`Trigger`对象的方式可能不同

# dynamics-crm-2011 - CRM 2011 - 在重复检测规则中启用“BIT”字段（两个选项）

> ID：16079557
> 
> 赞同：0
> 
> 时间：2013-04-18T09:43:35.383
> 
> 标签：dynamics-crm-2011, crm, duplicate-data, bit-fields

我们有一位客户想要在四个字段上创建“重复检测规则”，其中一个是“位”字段（两个选项）。但是当我们创建“重复检测规则”时，我们不能选择任何“位”字段。我想没有办法启用“BIT”字段？

否则我们需要编写一个服务来完成“重复检测规则”的工作。找到匹配后，我们需要发送一封电子邮件，“重复检测”也可以做到这一点。

有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:24:41.127

如果您无法在位字段上创建重复项，则可以：

1.  创建另一个字段（文本）。
2.  每当创建记录或更新字段时，您都会使用插件/工作流将位值复制到文本字段中。
3.  改为在该新文本字段上配置重复检测作业。

# c# - 带有“？”的问题 特点

> ID：16079559
> 
> 赞同：1
> 
> 时间：2013-04-18T09:43:38.243
> 
> 标签：c#, asp.net

我正在使用 WebForms 上的 C# 应用程序开发 ASP.NET。我有一个文本框，我用它使用 API 向手机发送短信。

每当我放一个？在文本框中，它会禁用页面上的所有事件，不会触发任何事件。

无法理解是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:48:07.767

也许，因为它是一个特殊的正则表达式字符？没有任何代码很难回答，但尽量逃避问号

> \?

# java - Java Youtube 凭据？

> ID：16079560
> 
> 赞同：2
> 
> 时间：2013-04-18T09:43:38.760
> 
> 标签：java, youtube-api

我遇到了 youtube java 凭据的问题，通常它运行良好并且我能够上传到 youtube，但今天我收到了这个异常无效的凭据。

```
YouTubeService service = new YouTubeService("id", developer_key);

try {
    service.setUserCredentials(login, "pass);
} catch (AuthenticationException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

堆栈跟踪：

```
>

 com.google.gdata.client.GoogleService$InvalidCredentialsException: Invalid credentials 11:23:07,915 ERROR [STDERR]
 at com.google.gdata.client.GoogleAuthTokenFactory.getAuthException(GoogleAuthTokenF‌​actory.java:660) 11:23:07,915 ERROR [STDERR] 
at com.google.gdata.client.GoogleAuthTokenFactory.getAuthToken(GoogleAuthTokenFacto‌​ry.java:560) 11:23:07,915 ERROR [STDERR] 
at com.google.gdata.client.GoogleAuthTokenFactory.setUserCredentials(GoogleAuthToke‌​nFactory.java:397) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:05:23.000

[http://www.foxnews.com/tech/2013/04/17/google-mail-and-other-services-disrupted/?intcmp=HPBucket](http://www.foxnews.com/tech/2013/04/17/google-mail-and-other-services-disrupted/?intcmp=HPBucket)

可能有关系。我会说再试一次，因为这很可能是一个暂时的故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:05:38.867

请参阅[https://code.google.com/p/gdata-issues/issues/detail?id=4442](https://code.google.com/p/gdata-issues/issues/detail?id=4442)了解更多信息。让我们在那里巩固讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:37:43.020

我建议检查[ClientLogin #FAIL](http://apiblog.youtube.com/2011/03/clientlogin-fail.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T10:59:00.033

我没有使用过`Youtube credentials`，但因为这是java代码所以我只是从我在网上看到的例子中猜测..

尝试

```
service.setUserCredentials(login, pass);    //remove quotes 
```

代替：

```
service.setUserCredentials(login, "pass); 
```

# jquery - JQuery UI datepicker可以绑定到图标吗？

> ID：16079561
> 
> 赞同：0
> 
> 时间：2013-04-18T09:43:39.527
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有一些看起来像的 HTML

```
<select id="day"><option>Day</option></select>
<select id="month"><option>Month</option></select>
<select id="year"><option>Year</option></select>
<img src="img/some-icon.png" id="datepicker" /> 
```

我无法绑定`$("#datepicker").datepicker()`到上面的图标。它只是不会显示日历。

JQuery UI 示例始终将日期选择器绑定到输入字段。我只是想知道是否有其他方法可以实现这一目标？

**编辑：我目前正在使用下面许多建议的隐藏字段。只是想知道是否有办法让我避免使用隐藏字段**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:45:02.940

你错过了打开`"`你的`id`，应该是：

```
<img src="img/some-icon.png" id="datepicker" />
--------------------------------^here----------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:48:10.483

另一种方法是让控件绑定到输入字段。把它隐藏起来。然后`onclick`你的图标，只需调用`onFocus()`输入字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:49:47.343

```
<input type="text" id="datepicker"/>
<img src="img/some-icon.png" id="datepick" /> 
```

使用上面的代码显示日历。如果要隐藏文本框，请使用 type="hidden"。

要单击隐藏的文本框，请使用下面的 JS 代码。

```
$("#datepick").click(function(){
     $("#datepicker").click();
     $("#datepicker").datepicker();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T09:55:42.057

如果有人有兴趣知道我是如何为此创建插件的，请按照下面的代码进行操作。最后我不得不使用隐藏字段，但事实证明这是我能找到成功使用日历的唯一方法。

HTML

```
<select id="day"><option>Day</option></select>
<select id="month"><option>Month</option></select>
<select id="year"><option>Year</option></select>
<input type="hidden" id="date-selector"> 
```

JavaScript

```
$.fn.showCalendar = function(options){
    var defaults ={
        selector : "#date-selector",
        calendarIcon : "./images/icons/calendar.gif",
        numberOfSelectableDays : "+60D",
        dateFormat: "dd/mm/yy",
        numberOfMonths : 3,
        daySelector : "#day",
        monthSelector : "#month",
        yearSelector : "#year"
    }

    var $this = $(this);
    var params = $.extend({},defaults, options);

    var getDateFromDropDowns = function(){
         var dateOnDropDowns =  new Date($(params.daySelector).val(),$(params.monthSelector).val(),$(params.yearSelector).val());
         return  dateOnDropDowns;
    }

    return $this.each(function(){
        $this.datepicker({
            showOn: "button",
            buttonImage: params.calendarIcon,
            minDate: 0,
            maxDate: params.numberOfSelectableDays,
            dateFormat: params.dateFormat,
            buttonImageOnly: true,
            numberOfMonths: params.numberOfMonths,
            setDate : getDateFromDropDowns,
            onClose: function(dateText, inst) {
                $(params.yearSelector).val(dateText.split('/')[2]);
                $(params.daySelector).val(dateText.split('/')[0]);
                $(params.monthSelector).val(dateText.split('/')[1]);
            }
        });
    });
}, 
```

# sql-server - 使用 len() sql server 时使用连接的正确方法

> ID：16079563
> 
> 赞同：0
> 
> 时间：2013-04-18T09:43:41.353
> 
> 标签：sql-server, sql-server-2008, join

我需要**加入**一两张桌子。一张表有工资字段。因此，如果该字段为 null 意味着它返回 0，我也会进行一些计算。所以我使用**len()**。但我无法访问正确的值。**当我在len()**条件之前使用 join 时，我有一个结果。但是结果 id 列像 1,4,46,89 一样**无序，** ......类似的东西。我不知道为什么。

**我的疑问是，**

```
 CAST(SUBSTRING(CAST(o.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', o.Budget))*100000

 + SUBSTRING(CAST(o.Budget AS VARCHAR(50)), PATINDEX('%laks%', o.Budget) + 4, 
    patindex('%Thousands%', o.Budget) - PATINDEX('%laks%', o.Budget) - 4)* 1000 AS   VARCHAR(50))+')'

    FROM requirementsdetailsfororganization o 
    right Join Requirementsregistereddetails AS r ON r.registereddate=r.registereddate
    left join Requirement_Contact_Details as rc ON rc.RequirementID=o.requirementId
    **where len(o.Budget)<>0** 
```

在上面的代码中，我使用了这个条件。但是为什么它显示这种类型的值。

**我的输出：**

插入工作( **1** ,85000)

插入工作（**3** ,205000）

插入作业（**4** ,0（当为空时））

插入工作（**16** ,145000）

插入工作( **18** ,110000)

在前面的结果中，我加粗的值是 Id。当我使用 len() 时，它是无序的，并且在值的范围内遗漏了一些值

有人建议我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:46:25.180

```
 CAST(SUBSTRING(CAST(o.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', o.Budget))*100000

 + SUBSTRING(CAST(o.Budget AS VARCHAR(50)), PATINDEX('%laks%', o.Budget) + 4, 
    patindex('%Thousands%', o.Budget) - PATINDEX('%laks%', o.Budget) - 4)* 1000 AS   VARCHAR(50))+')'

    FROM requirementsdetailsfororganization o 
    right Join Requirementsregistereddetails AS r ON r.registereddate=r.registereddate
    left join Requirement_Contact_Details as rc ON rc.RequirementID=o.requirementId
    where len(isnull(o.Budget, ":D"))<>0 
```

# ajax - bootstrap select2 结果不会在返回时显示

> ID：16079568
> 
> 赞同：1
> 
> 时间：2013-04-18T09:43:53.320
> 
> 标签：ajax, json, twitter-bootstrap, jquery-select2

我正在尝试在我的自定义 joomla 组件中使用 bootstrap select2(ajax)，但我没有在返回时列出我的数据。javascript看起来如下

```
jQuery("#e6").select2({
    placeholder: "PLZ // Bundesland // Ort angeben",
    minimumInputLength: 2,
    ajax: { 
        url: "index.php?option=com_tieraerzte&task=tieraerzt.locator&tmpl=component",
        dataType: 'json',
        data: function(term, page) {
            return {
                q: term, // search term
            };
        },
        results: function(data, page) {               
            return {results: data};
        }
    },
    formatResult: function(data) {
        //shows undefined on return
        alert(data.plz);
        return "<div class='select2-user-result'>" + data.plz + "</div>";
    },
    formatSelection: function(data) {
        return data.plz;
    }
}); 
```

返回的 json 数据片段

```
[[{"plz":"10247","kiez":"Friedrichshain-Kreuzberg","ort":"Berlin","bundesland":"Berlin"}]] 
```

# mongodb - 如何在mongodb的数组中获取匹配的文档？

> ID：16079570
> 
> 赞同：2
> 
> 时间：2013-04-18T09:44:02.963
> 
> 标签：mongodb, mongoose

我的收藏是这样的

```
{
 _id :"",
 name:[
  {
   firstName:"",
   lastName:"",
  }
 ]
} 
```

我需要在文档中找到匹配的名字。如何在查询中实现这一点？我是 mongodb 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:30:49.937

@Sushant Gupta 提供了正确的答案，但是我会说你也可以这样做来增加一点味道：

```
db.collection.find({'name.firstName': 'Raj'}, {'name.$':1}) 
```

至：`matching firstName in the documents`。

这背后的关键是 MongoDB 会将文档中的单个多键出现视为普通的平面字段，允许您像这样向下查询它们。

您看到的第二个参数实际上是一个投影（[http://docs.mongodb.org/manual/reference/projection/elemMatch/](http://docs.mongodb.org/manual/reference/projection/elemMatch/)），它告诉 MongoDB 基本上投影出 FIRST（如果您需要更多，则需要使用聚合框架) 匹配`name`来自主文档的子文档。

值得注意的是，如果您添加两个或多个多键字段，如下所示：

```
db.collection.find({'name.firstName': 'Raj', 'name.lastName': ''}, {'name.$':1}) 
```

然后，您将需要使用`$elemMatch`，但是，对于像这样的小型单字段查询，或者您有意在文档中的所有多键字段中搜索两个值，点表示法（[http://docs.mongodb.org/manual/reference /glossary/#term-dot-notation](http://docs.mongodb.org/manual/reference/glossary/#term-dot-notation)）效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:50:28.733

```
db.collection.find({name: {$elemMatch: {firstName: "Raj"}}}); 
```

有关更多详细信息，请查看[文档](http://docs.mongodb.org/manual/reference/operator/elemMatch/)`$elemMatch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:12:33.880

这就是解决您的问题的方法：

```
db.MyCollection.find(  { name : { $elemMatch: { firstName : "valueGoesHere"} } } ) 
```

# c# - 如何在 Windows 8 的 GIF 中保存墨迹和背景？

> ID：16079571
> 
> 赞同：1
> 
> 时间：2013-04-18T09:44:06.263
> 
> 标签：c#, canvas, windows-8, windows-runtime, windows-store-apps

我有一个透明背景的画布。在它上面画了笔画。使用类`SaveAsync`的方法`InkManager`保存时，只保存笔画，不保存透明背景。有什么方法可以保存背景吗？

否则，如果有一种方法可以让我`InkManager`在 a 上渲染笔画`WritableBitmap`？

这就是我目前保存的方式。

```
StorageFile Ink_File = await m_localfolder.CreateFileAsync(path, CreationCollisionOption.ReplaceExisting);

using (var stream = await Ink_File.OpenAsync(Windows.Storage.FileAccessMode.ReadWrite))
{
    using (var outputStream = stream.GetOutputStreamAt(0))
    {
        uint x = await i.SaveAsync(outputStream);
        await outputStream.FlushAsync();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:39:12.673

***艰难的道路：***

那么在纯 C# 中执行此操作的方法是将渲染的**GIF**和要用作s 的**背景**`WritableBitmap`“加载”到内存中。在您拥有两者的位图表示后，将像素数据从背景位图复制`PixelBuffer`到 a `byte[]`，您将使用它来合成顶部的笔划。现在使用**GIF**`PixelBuffer`图像的逐步丢弃所有透明的像素，并结合任何不属于您的像素，这些像素最初是纯背景图像，请注意此处的尺寸，因为您必须做一些数学运算才能计算出来出什么对应于什么像素上的什么颜色通道。这一切都很严谨，但也不是很困难。**`byte[]``byte`**

 *****简单的方法：***

**对你来说幸运的是，有人不厌其烦地将所有这些`byte[]`操纵的东西包装到一个人们似乎喜欢的漂亮的便携式库中，可以在这里找到：[http ://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)**

基本上，该库将使您能够访问普通绘图和“bitblt-ing”（又名位块传输）功能。所以现在你应该能够将透明图像“blt”在不透明图像的顶部，以便在几行代码中获得合成。没有混乱，没有循环......希望这会有所帮助-ck**

# sharepoint - 在共享点列表视图上创建“喜欢”过滤器

> ID：16079573
> 
> 赞同：0
> 
> 时间：2013-04-18T09:44:16.457
> 
> 标签：sharepoint, sharepoint-2010, filter

我有一个 webpart 显示包含文档库内容的视图的内容。我可以添加另一个 Web 部件（“文本过滤器”）并将其与显示数据的 Web 部件连接起来。如果视图包含三个元素“car、caroussel 和 camageddon”，则当我输入“car”作为搜索值时，过滤器将只显示第一行，但我希望显示所有三个元素。

我需要类似“%searchterm% 之类的地方”之类的东西 是否有另一个 webpart 或我错过的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:02:44.987

我不确定您是否可以在文档库中使用它（我认为您可以）查看此链接：[http://sharethelearning.blogspot.com/2007/03/filtering-list-by-partial-match。 html](http://sharethelearning.blogspot.com/2007/03/filtering-list-by-partial-match.html)

基本上，您需要创建一个数据视图 Web 部件，另一个将是一个过滤器，用于查找您想要的特定列的值。

# python - 如何#define如果在C++中类似于python

> ID：16079575
> 
> 赞同：2
> 
> 时间：2013-04-18T09:44:20.260
> 
> 标签：python, c++, if-statement, c-preprocessor

我知道我可以定义类似的东西

`#define LESS(x, y) if(x < y)`

所以我想知道我可以`if`在 c++ 中定义为类似 python 的模板吗？如

`if x < y: do something`代替`if(x < y) do something`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:31:22.557

简而言之 -**不**。

来自[cplusplus.com](http://www.cplusplus.com/doc/tutorial/preprocessor/)：

> 当预处理器遇到此指令时，它会通过替换替换其余代码中出现的任何标识符。这种替换可以是表达式、语句、块或任何东西。预处理器不理解 C++，它只是通过替换替换任何出现的标识符。

你想要的是这样的

```
#define if(x):(y) if(x){##y##}; 
```

不过，冒号是关键字，不能用作标识符，因此会破坏您的宏定义。没有办法逃脱它。

# java - 将逗号分隔的字符串拆分为多个新字符串

> ID：16079583
> 
> 赞同：0
> 
> 时间：2013-04-18T09:44:32.897
> 
> 标签：java, android, string, parsing

我有一个逗号分隔的字符串，我想拆分它（我知道如何实现 - 有很多资源）但是我想采用新的拆分值并将它们本身用作字符串。

例如

```
Oldstring = "user,game,demo,points,level"

NewString0 = user

NewString1 = game

NewString2 = demo 

NewString3 = points

NewString4 = level 
```

如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:46:50.853

`String[] newStrings = oldstring.split(",")`

现在使用[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)：

```
NewString0 = newStrings[0];

NewString1 = newStrings[1];

NewString2 = newStrings[2];

NewString3 = newStrings[3];

NewString4 = newStrings[4]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:54:21.140

你可以利用`StringTokenizer`.

```
       字符串新字符串[]=新字符串[10]；
       StringTokenizer str=new StringTokenizer(oldString,",");
        for (int i = 0; str.hasMoreTokens(); i++) {
         newString[i]=str.nextToken();
        }

```

希望它会有所帮助。:)

# image - 画布 - 获取像素颜色 - 我错过了什么？

> ID：16079585
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:44:35.170
> 
> 标签：image, html5-canvas

使用此代码作为基础[http://www.script-tutorials.com/demos/158/index.html](http://www.script-tutorials.com/demos/158/index.html)

我编写以下代码：

```
 $canvas = $('<canvas/>');
    ctx = $canvas[0].getContext('2d');
    var image = new Image(); // create an image object in memory
    image.onload = function () {
      // render the image on the canvas
      $canvas.width(this.width).height(this.height); // resize the canvas
      ctx.drawImage(image, 0, 0, this.width, this.height); 
      var nav =  $("#navigation"); // get the navigation container
      // find a pixel about in the middle where the navigation would be
      var pos = {
        left: nav.position().left+(nav.width()/2), 
        top: nav.position().top+(nav.height()/2) 
      }
      var pixel = ctx.getImageData(pos.left,pos.top, 1, 1).data;
      canvas=null; // no longer need this canvas 
      // invert the pixel colour, ignoring the alpha channel
      var invertedPixelColor = "rgba("+(255-pixel[0])+", "+
                                       (255-pixel[1])+", "+
                                       (255-pixel[2])+", "+
                                       1+")"; 
      nav.css("color",invertedPixelColor); // set the nav text to inverted color
    }
    image.src = imageURL; // load the image, triggering the calc 
```

[运行示例](http://plungjan.name/test/detectbackground.html)

我对这个例子有以下问题：

1.  为什么图像不能正确渲染到画布上？（在演示中向下滚动以查看渲染的画布）
2.  为什么我只能从图像数据中得到 0？

我有

```
window.console && 
   console.log("before: rgba("+pixel[0]+", "+pixel[1]+", "+pixel[2]+", "+pixel[3]+")");
window.console && 
   console.log("after: rgba("+(255-pixel[0])+", "+(255-pixel[1])+", "+(255-pixel[2])+", "+1+")"); 
```

它返回

```
before: rgba(0, 0, 0, 0) 
after: rgba(255, 255, 255, 1) 
```

我希望我错过了一些简单的东西

**更新**我是 - 似乎这`$("<canvas/>)[0].getContext('2d');`不是 100% 快乐的背景......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:55:52.013

关于你2个问题。

(1)。调用 ctx.drawImage 时只使用 3 个参数

```
ctx.drawImage(image,0,0); 
```

(2)。您正在创建的 jquery $canvas 对象似乎不是 html 画布元素。

所以你的 jquery 元素创建需要修复或只使用老式的 document.createElement。

```
canvas=document.createElement("canvas"); 
```

这几个调整，你很高兴去。

```
<!DOCTYPE html>
<html>
<head>
<title>Testing setting text colour depending on background</title>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
var ctx;   
$(function(){ // on page load, this should likely be on image transition
    $(".nav").on("click", function(e) {
        e.preventDefault();
        var imageURL = $(this).data("img");
        $("#content").css("background","url("+imageURL+")");
        // creating canvas object in memory. 
        // Since I do not append it anywhere it is not rendered
        canvas = document.createElement("canvas");
        ctx = canvas.getContext('2d');
        var image = new Image(); // create an image object in memory
        image.onload = function () {

          // render the image on the canvas
          canvas.width=this.width;
          canvas.height=this.height; // resize the canvas
          ctx.drawImage(image, 0, 0); 
          var nav =  $("#navigation"); // get the navigation container
          // find a pixel about in the middle where the navigation would be
          var pos = {left: nav.position().left+(nav.width()/2), top: nav.position().top+(nav.height()/2) }
          var pixel = ctx.getImageData(pos.left,pos.top, 1, 1).data;
          canvas=null; // no longer need this canvas 

          var invertedPixelColor = "rgba("+(255-pixel[0])+", "+(255-pixel[1])+", "+(255-pixel[2])+", "+1+")"; // invert it, ignoring the alpha channel
          nav.css("color",invertedPixelColor); // set the nav text to inverted color
          // here you could save the colour and reuse it 
          // if the user navigates to the same image
        }
        image.src = imageURL; // load the image, triggering the calc
    });
});
</script>
<style>
#navigation { text-align:center }
#content { width:640px; height:480px; background: url(city-q-c-640-480-6.jpg) }
</style>
</head>
<body>
<div id="content">
    <div id="navigation">This text should have different color depending on background<br/>
        <a href="#" class="nav" data-img="city-q-c-640-480-5.jpg">City 1</a> | <a href="#" class="nav" data-img="city-q-c-640-480-6.jpg">City 2</a> | <a href="#" class="nav" data-img="city-q-c-640-480-2.jpg">City 3</a>
    </div>
</div>
<div id="test"></div>
</body>
</html> 
```

# android - 设置可绘制文件夹以用于不同的分辨率

> ID：16079588
> 
> 赞同：25
> 
> 时间：2013-04-18T09:44:45.953
> 
> 标签：android, android-manifest, android-drawable, android-screen-support, android-screen

对于我需要在我的应用程序中使用的每个图标，我有 4 种不同的尺寸。问题是 My Nexus 7 (1280 x 800) 和 Galaxy s2 (800 x 480) 似乎使用了 drawable-hdpi 中的资源。如何强制 Nexus 使用 drawable-xhdpi 中的资源，然后使用 10 英寸选项卡使用 drawable-xxhdpi。

我的清单文件中有这个

```
<supports-screens android:resizeable="true"
              android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true"
              android:anyDensity="true" /> 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-18T10:18:35.367

> 如何强制 Nexus 使用 drawable-xhdpi 中的资源，然后使用 10 英寸选项卡使用 drawable-xxhdpi？

你不能。

限定符`hdpi,xhdpi,xxhdpi`描述的是设备的屏幕密度，而不是屏幕的大小。来自[官方文档](http://developer.android.com/guide/practices/screens_support.html#overview)

> **屏幕密度**
> 
> 屏幕物理区域内的像素数量；通常称为 dpi（每英寸点数）。例如，与“正常”或“高”密度屏幕相比，“低”密度屏幕在给定物理区域内的像素较少。为简单起见，Android 将所有实际屏幕密度分为四种广义密度：低、中、高和超高。

如果您还想支持平板电脑，请使用`large, xlarge`限定符。Nexus 7 是一款`large-hdpi`平板电脑（技术上它是`tvdpi`，但从 中获取图像`hdpi`）。因此，如果您想为 Nexus 7 放置图像，请创建一个名为的文件夹并将`drawable-large-hdpi`图像放在那里。

**注意**：这是 Nexus 7 的特殊情况。因为即使 Nexus 7 是 7 英寸平板电脑，它的分辨率也为**1280 * 800**。所以它是一个`hdpi`设备。但普通 7 英寸设备的分辨率较低，为**1024 * 600**。所以它们是`mdpi`设备。所以drawable限定符可以改变。（根据我自己的经验，首先`drawable-large-mdpi`为 7 英寸设备放一个文件夹，然后在 Nexus 7 上检查。如果图像没有问题，则不必放另一个文件夹。因为如果特定文件夹不存在，Android 会检查最近的可能文件夹并针对设备屏幕进行优化）

现在关于 10 英寸平板电脑外壳，它们是`xlarge`设备，它们的密度可以从`mdpi`到`xhdpi`(Nexus 10)。但许多分辨率为**1280 * 800**，它们是`mdpi`设备。

更好的做法是放置以下可绘制对象

```
// for Phones
drawable-ldpi
drawable-mdpi
drawable-hdpi

//for 7 inch tablets
drawable-large-mdpi
drawable-large-hdpi(for Nexus 7)

// for 10 inch tablets
drawable-xlarge-mdpi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:56:17.163

```
The problem is My Nexus 7 (1280 x 800) and galaxy s2 (800 x 480) seem to use the resources in drawable-hdpi 
```

这取决于像`nexus 7`has一样`240dpi`的`hdpi`设备，如果您在其中测试相同的设备，它将像这样从 hdpi 获取可绘制资源，因为它是 mdpi 设备`samsung` `tab 2`，它将从相同的可绘制资源中获取`mdpi`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T10:08:16.430

尝试使用`Configuration qualifiers`您的资源。这是最佳实践。喜欢`res/drawable-normal-hdpi-port/icon.png`。

参考链接：[配置限定符](http://developer.android.com/guide/practices/screens_support.html)

谢谢。

# symfony - symfony2 登录后如何重定向到请求的页面

> ID：16079592
> 
> 赞同：19
> 
> 时间：2013-04-18T09:44:56.183
> 
> 标签：symfony

假设我的路由**/booking/(.*)**受**security.yml**中的防火墙配置保护，并且它需要“ **ROLE_USER** ”，当用户尝试访问以“ **/booking/** ”开头的任何路由时，应用程序会将用户重定向到登录认证页面。

所以我的问题是，在用户提供他的凭据并通过身份验证后，Symfony 2 如何能够将用户重定向回用户请求的页面/路由，或者 Symfony 2 在哪里存储该**路由**是否将其存储在某个会话中或别的地方。

***我们可以访问它吗？如何访问？***

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-10T22:26:27.080

这是可能的，您可以在会话中访问引用链接（如果`use_referer`设置为，则使用该链接）。`true`

例如，如果`success_handler`您（在您的防火墙配置中）上有一项服务，该服务`form_login`根据某些条件（通常是角色）重定向用户，但您希望将用户重定向到引荐来源链接（*如果已设置）*，您可以像这样访问引荐来源链接：

```
$key = '_security.main.target_path'; #where "main" is your firewall name

//check if the referrer session key has been set 
if ($this->container->get('session')->has($key)) {
    //set the url based on the link they were trying to access before being authenticated
    $url = $this->container->get('session')->get($key);

    //remove the session key
    $this->container->get('session')->remove($key);
}
//if the referrer key was never set, redirect to a default route
else{
    $url = $this->router->generate('member_home');
}

return new RedirectResponse($url); 
```

在这种情况下，使用标头获取引荐来源网址（即`$request->headers->get('referer')`）将不起作用，因为它将始终返回登录链接。

感谢 Roman Marintsenko 和 Ryan Weaver 的[博客](http://knplabs.com/en/blog/redirect-after-registration-in-symfony2)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-14T15:08:20.487

Carrie Kendall 的解决方案有效，谢谢！

这是 Symfony 中的完整实现：

服务.yml：

```
login_handler:
    class: Project\BaseBundle\Service\loginHandler
    arguments: ['@router', '@doctrine.orm.entity_manager', '@service_container'] 
```

在 Project\BaseBundle\Service\loginHandler 中：

```
namespace Project\BaseBundle\Service;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;
use Symfony\Component\Routing\RouterInterface;
use Doctrine\ORM\EntityManager;

class loginHandler implements AuthenticationSuccessHandlerInterface {

    private $router;
    private $container;
    private static $key;

    public function __construct(RouterInterface $router, EntityManager $em, $container) {

        self::$key = '_security.secured_area.target_path';

        $this->router = $router;
        $this->em = $em;
        $this->session = $container->get('session');

    }

    public function onAuthenticationSuccess( Request $request, TokenInterface $token ) {

        $user_entity = $token->getUser();

        if( !$user_entity->getChangePassword() ) {

            $route = $this->router->generate('BaseBundle_home_page');

        } else {

            $this->session->getFlashBag()->add('error', 'Your password must be changed now');

            $route = $this->router->generate('BaseBundle_account_page');

        }

        //check if the referer session key has been set
        if ($this->session->has( self::$key )) {

            //set the url based on the link they were trying to access before being authenticated
            $route = $this->session->get( self::$key );

            //remove the session key
            $this->session->remove( self::$key );
            //if the referer key was never set, redirect to a default route

        } else{

            $url = $this->generateUrl('BaseBundle_home_page');

            return new RedirectResponse($route);

        }

        return new RedirectResponse($route);

    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-19T16:53:31.603

我也有这个问题。我使用了 security.yml 并在使用的注册操作中：

```
$redirectUrl = $request->getSession()->get('_security.account.target_path'); 
```

请享用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T10:19:13.523

Symfony 使用[HTTP Referer 标头](http://en.wikipedia.org/wiki/HTTP_referer)将用户重定向回他们来自的页面 .. 即referrer

您可以使用 security.yml`use_referer: true`中的安全配置进行设置，[详情请点击此处](http://symfony.com/doc/current/reference/configuration/security.html#redirecting-after-login)

您可以使用以下命令从控制器访问引用标头：

```
$referer = $request->headers->get('referer'); 
```

**请注意**，标题拼写错误，其引用者（一个 r）

# java - 如果无法找到/放置运行给定的方面文件，如何强制 AspectJ 抛出运行时错误？

> ID：16079596
> 
> 赞同：0
> 
> 时间：2013-04-18T09:45:05.330
> 
> 标签：java, aop, aspectj

我正在尝试运行一个具有复杂类路径和 JVM 选项的复杂应用程序，其中包含一些加载时间方面。目前它似乎没有做任何事情，但我不能确定它是否以某种方式与我的代码中的错误或根本未加载的方面有关。如果没有加载给定的方面（并且可能是手头的问题），是否有任何特殊的开关会提醒我？

我查看了[aj 命令行脚本](http://www.eclipse.org/aspectj/doc/next/devguide/aj-ref.html)，但它看起来并不是特别有用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T14:28:49.777

**更新：**我忘了提到你想要的选项是`-showWeaveInfo`而不是（或除了）`-verbose`。后者显示了一个方面是否已经被注册，而前者显示了它在你的类中的位置。

* * *

在[AspectJ 开发环境指南](http://www.eclipse.org/aspectj/doc/next/devguide/index.html)的第 5 章中，您可以找到有关

*   [使用 aop.xml 文件配置加载时编织，](http://www.eclipse.org/aspectj/doc/next/devguide/ltw-configuration.html#configuring-load-time-weaving-with-aopxml-files)包括编织器选项的示例`verbose`和`dump within`，
*   [织布选项](http://www.eclipse.org/aspectj/doc/next/devguide/ltw-configuration.html#weaver-options)的简短参考。

前者在 上写入有关已处理 LTW 方面的信息`System.err`，后者将指定包中的所有类转储到特定目录，然后您可以在其中检查它们并查看它们是否已按需要编织。

# c++ - 抽象类和对象

> ID：16079599
> 
> 赞同：1
> 
> 时间：2013-04-18T09:45:18.503
> 
> 标签：c++, object, abstract

我上了一堂课：

```
namespace Abstract{

    class AbstractClass{
    public:

        virtual void setName(const std::string & _name) =0;
        virtual void print() =0;
        void DynamicCastTest(){};

    };

} 
```

还有第二个：

```
class ConcreteClass : public Abstract::AbstractClass{

std::string type;

public:
    ConcreteClass();
    ConcreteClass(char* a);
    ~ConcreteClass();

    static ConcreteClass* CreateConcreteClass(char* a);

    virtual void setName(const std::string & _name); 
    virtual void print(); 

}; 
```

但是当我想定义我的函数 CreateConcreteClass(char*) 时：

```
static ConcreteClass* CreateConcreteClass(char* a){

    ConcreteClass a;

} 
```

视觉无法创建对象“a”，因为它告诉我它是一个抽象对象。

为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:54:13.160

我用VC10试过了。它给了我错误 C2082，告诉我重新定义形式参数 a 之类的东西（我有一个德语安装，所以你的错误消息可能不同）。只需重命名您的变量：

```
ConcreteClass* ConcreteClass::CreateConcreteClass(char* a)
{
    return new ConcreteClass(a); 
} 
```

*编辑：*添加静态不返回临时地址

*第二次编辑：*使 CreateConcreteClass 成为静态工厂函数

# java - Hibernate：如何映射Double的集合？

> ID：16079601
> 
> 赞同：0
> 
> 时间：2013-04-18T09:45:25.853
> 
> 标签：java, hibernate, jpa

如何映射 Double 值列表

```
class Person {

    @Id
    private String key;

   @OneToMany
   @Column(name="values")
   private List<Double> values; 
```

我收到这个错误

```
Use of @OneToMany or @ManyToMany targeting an unmapped class: Person.values[java.lang.Double] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:58:13.203

尝试使用如下注释`@CollectionOfElements`：

```
@CollectionOfElements
   @Column(name="values")
   private List<Double> values; 
```

如果您使用的是 3.4，这将起作用。

如果您使用的是 Hibernate Annotations 3.5+，则更喜欢 JPA 2.0 注释使用`@ElementCollection`annotation：

```
@ElementCollection
@Column(name="values")
   private List<Double> values; 
```

# android - 安卓谷歌地图v2 maven

> ID：16079605
> 
> 赞同：0
> 
> 时间：2013-04-18T09:45:39.770
> 
> 标签：android, maven, google-maps-android-api-2

我正在使用谷歌地图和 maven 创建一个 android 应用程序。我在 pom.xml 中放入了两个依赖项

```
 <dependency>
        <groupId>com.google.android.gms</groupId>
        <artifactId>google-play-services</artifactId>
        <version>4</version>
        <type>apklib</type>
    </dependency>

    <dependency>
        <groupId>com.google.android.gms</groupId>
        <artifactId>google-play-services</artifactId>
        <version>4</version>
        <type>jar</type>
    </dependency> 
```

apklib 和 jar 出现在 maven 存储库中。(m2\repository)

main_map.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@+id/mainLay"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <fragment 
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:name="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

我将权限和元数据与 api 密钥一起放在我的 AndroidManifest 中。

```
 <permission
    android:name="com.map.example.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.map.example.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permissionndroid:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyDRDsq0vAYySrs__0a8Yb2yr333W_z1uAo" /> 
```

主要活动

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

private GoogleMap map;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_map.xml);

    map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
            .getMap();
 }
} 
```

我得到了这个例外

```
04-18 10:32:37.939: E/AndroidRuntime(21550): FATAL EXCEPTION: main
04-18 10:32:37.939: E/AndroidRuntime(21550): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
04-18 10:32:37.939: E/AndroidRuntime(21550):    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:269)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.Activity.setContentView(Activity.java:1657)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at com.codespring.androidspeed.ui.newui.MainPager.onCreate(MainPager.java:62)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.os.Looper.loop(Looper.java:123)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at android.app.ActivityThread.main(ActivityThread.java:3729)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at java.lang.reflect.Method.invoke(Method.java:507)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
04-18 10:32:37.939: E/AndroidRuntime(21550):    at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:19:30.663

我在我的项目中设置了一个 Maven 构建。

以下是相关的pom文件：

[http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions/pom.xml](http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions/pom.xml)

[http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions-demo/pom.xml](http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions-demo/pom.xml)

这不是明确的 Google Maps Android API v2，而是一个基于它的库。

你是如何启动应用程序的？你应该这样做`mvn android:deploy android:run`。我发现从 Eclipse 运行 maven 有问题（但也许我做错了什么）。

# c# - 为什么javascript会忽略文本框默认文本的更改？

> ID：16079608
> 
> 赞同：0
> 
> 时间：2013-04-18T09:45:54.460
> 
> 标签：c#, javascript, asp.net, dom

我不明白为什么 javascript 会忽略文本框默认文本的更改？

更多详细信息：文本框的默认文本为“搜索”。当客户端尝试使用默认文本提交搜索表单时，它应该返回 false 并将焦点返回到文本框。

```
<asp:Panel CssClass="search rnd" ID="SearchBox" runat="server" DefaultButton="btnSearch">
    <asp:TextBox ID="txtSearch" runat="server" ValidationGroup="searchForm" MaxLength="100" CssClass="text" Text="Search" onfocus="if ( this.value == 'Search') { this.value = ''; }" onblur="if ( this.value == '' ) { this.value = 'Search'; }"></asp:TextBox>
    <asp:Button ID="btnSearch" runat="server" ValidationGroup="searchForm" CssClass="btn-search" ToolTip="Search the Website" OnClick="btnSearch_Click" OnClientClick="if ( document.getElementById('<%= txtSearch.ClientID %>').value = 'Search') { document.getElementById('<%= txtSearch.ClientID %>').style.background = 'yellow'; document.getElementById('<%= txtSearch.ClientID %>').focus(); return false; } " />
    <asp:RequiredFieldValidator CssClass="hdn rf" ID="RequiredFieldValidator1" ControlToValidate="txtSearch" runat="server" ErrorMessage="*"></asp:RequiredFieldValidator>
</asp:Panel> 
```

请有人帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:04:02.837

您正在分配而不是比较。

改变：`if ( document.getElementById('<%= txtSearch.ClientID %>').value = 'Search')`

到`if ( document.getElementById('<%= txtSearch.ClientID %>').value == 'Search')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:05:33.830

您的代码运行良好，我只是将代码放在一个函数中并调用它`OnClientClick`

你也忘了在你的陈述中使用`==`而不是试试这个：`=``if`

```
 <asp:Panel CssClass="search rnd" ID="SearchBox" runat="server" DefaultButton="btnSearch">
    <asp:TextBox ID="txtSearch" runat="server" ValidationGroup="searchForm" MaxLength="100" CssClass="text" Text="Search"
     onfocus="if ( this.value == 'Search') { this.value = ''; }" onblur="if ( this.value == '' ) { this.value = 'Search'; }"></asp:TextBox>
    <asp:Button ID="btnSearch" runat="server" ValidationGroup="searchForm" CssClass="btn-search" ToolTip="Search the Website" 
    OnClick="btnSearch_Click" OnClientClick=" validateTextbox()" />
    <asp:RequiredFieldValidator CssClass="hdn rf" ID="RequiredFieldValidator1" ControlToValidate="txtSearch" runat="server"
     ErrorMessage="*"></asp:RequiredFieldValidator>
</asp:Panel>

<script>

    function validateTextbox() {

        if (document.getElementById('<%= txtSearch.ClientID %>').value == 'Search') {
            document.getElementById('<%= txtSearch.ClientID %>').style.background = 'yellow';

            document.getElementById('<%= txtSearch.ClientID %>').focus();

            return false;
        }

    }
</script> 
```

# php - 可以在 php mail() 中使用媒体查询

> ID：16079610
> 
> 赞同：0
> 
> 时间：2013-04-18T09:45:55.953
> 
> 标签：php, media-queries, html-email

我一直在阅读，我似乎无法找到一种方法来让我的 html 电子邮件验证电子邮件在媒体查询正常工作的情况下发送出去，我通篇阅读了它只能使用 MailChimp 或 CampaignMonitor 等邮件服务来完成。这是真的？或者我可以使用一个`mail()`函数来发送它并考虑到响应。这是我到目前为止得到的，请记住，这是我购买的模板，只是为了让自己继续前进。

很抱歉弄得一团糟，但我想确保我准确地发布它。这是一个可怕的内容填充示例模板，我提前道歉。

```
 $subject = 'Account Activation';
        $message = '
        <html>
            <head>
            <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
            <title>Responsive Minimalist Email Tempate - Rolas Layout1 Orange</title>
            <style type="text/css">
            html
            {
                width: 100%;
            }

            body {
               background-color: #f8f8f8;
               margin: 0;
               padding: 0;
            }

            .ReadMsgBody
            {
                width: 100%;
                background-color: #f8f8f8;
            }
            .ExternalClass
            {
                width: 100%;
                background-color: #f8f8f8;
            }

            p, div {
                margin: 0;
            }
            table {
                border-collapse: collapse;
            }

            @media screen and (max-width: 640px)  {
                body{width:auto !important;}

                table table{width:100%!important; }

                table[class="table-660"] {width: 460px !important; }

                img[class="img-660"] {width: 460px !important;  line-height: 0 !important;}
                img[class="img-radius"] {width: 460px !important; height: 10px !important; line-height: 0 !important;}

                td[class="one-half-first"] {width: 400px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-half-last"] {width: 400px !important; display: block !important; text-align: center !important; padding-left: 30px !important;}

                td[class="one-half-icon-first"] {width: 400px !important; display: block !important; text-align: left !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-half-icon-last"] {width: 400px !important; display: block !important; text-align: left !important; padding-left: 30px !important;}

                td[class="one-third"] {width: 400px !important;  display: block !important; text-align: center !important; padding-bottom: 10px !important; padding-right: 30px !important;}
                td[class="one-third-middle"] {width: 400px !important; display: block !important; text-align: center !important; padding-bottom: 10px !important; padding-left: 30px !important; padding-right: 30px !important;}
                td[class="one-third-last"] {width: 400px !important; display: block !important; text-align: center; padding-left: 30px !important; }
                img[class="pro-img-180"] {width: 400px !important;}

                td[class="one-fourth-right"] {width: 150px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-left"] {width: 250px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-left-last"] {width: 250px !important; text-align: left !important; padding-bottom: 40px !important;}
                td[class="one-fourth-right-last"] {width: 150px !important;  text-align: left !important; padding-bottom: 40px !important;}
                img[class="img-180"] {width: 150px !important;}

                td[class="one-fourth-left"] {width: 150px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-right"] {width: 250px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-right-last"] {width: 250px !important; text-align: left !important; padding-bottom: 40px !important;}
                td[class="one-fourth-left-last"] {width: 150px !important;  text-align: left !important; padding-bottom: 40px !important;}
                img[class="img-180"] {width: 150px !important;}

                img[class="img-285"] {width: 400px !important; text-align: center !important;}

                table[class="left-content"] {width: 220px !important; text-align: left !important; }
                td[class="left-content"] {width: 220px !important; text-align: left !important; }
                img[class="img-blog"] {width: 220px !important;}
                img[class="divider-350"] {width: 220px !important; height:1px !important}

                table[class="right-sidebar"] {width: 150px !important;  text-align: left !important; }
                td[class="right-sidebar"] {width: 150px !important; text-align: left !important; }
                img[class="img-gallery"] {width: 110px !important;}
                img[class="divider-220"] {width: 150px !important; height:2px !important}

                table[class="right-content"] {width: 220px !important; text-align: left !important; }
                td[class="right-content"] {width: 220px !important; text-align: left !important; }
                img[class="img-blog"] {width: 220px !important;}
                img[class="divider-350"] {width: 220px !important; height:1px !important}

                table[class="left-sidebar"] {width: 150px !important; text-align: left !important; }
                td[class="left-sidebar"] {width: 150px !important; text-align: left !important; }
                img[class="img-gallery"] {width: 110px !important;}
                img[class="divider-220"] {width: 150px !important; height:2px !important}
            }

            @media screen and (max-width: 568px)  {
                body{width:auto !important;}

                table table{width:100%!important; }

                table[class="table-660"] {width: 460px !important; }

                img[class="img-660"] {width: 460px !important;  line-height: 0 !important;}
                img[class="img-radius"] {width: 460px !important; height: 10px !important; line-height: 0 !important;}

                td[class="one-half-first"] {width: 400px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-half-last"] {width: 400px !important; display: block !important; text-align: center !important; padding-left: 30px !important;}

                td[class="one-half-icon-first"] {width: 400px !important; display: block !important; text-align: left !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-half-icon-last"] {width: 400px !important; display: block !important; text-align: left !important; padding-left: 30px !important;}

                td[class="one-third"] {width: 400px !important;  display: block !important; text-align: center !important; padding-bottom: 10px !important; padding-right: 30px !important;}
                td[class="one-third-middle"] {width: 400px !important; display: block !important; text-align: center !important; padding-bottom: 10px !important; padding-left: 30px !important; padding-right: 30px !important;}
                td[class="one-third-last"] {width: 400px !important; display: block !important; text-align: center; padding-left: 30px !important; }
                img[class="pro-img-180"] {width: 400px !important;}

                td[class="one-fourth-right"] {width: 150px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-left"] {width: 250px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-left-last"] {width: 250px !important; text-align: left !important; padding-bottom: 40px !important;}
                td[class="one-fourth-right-last"] {width: 150px !important;  text-align: left !important; padding-bottom: 40px !important;}
                img[class="img-180"] {width: 150px !important;}

                td[class="one-fourth-left"] {width: 150px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-right"] {width: 250px !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-right-last"] {width: 250px !important; text-align: left !important; padding-bottom: 40px !important;}
                td[class="one-fourth-left-last"] {width: 150px !important;  text-align: left !important; padding-bottom: 40px !important;}
                img[class="img-180"] {width: 150px !important;}

                img[class="img-285"] {width: 400px !important; text-align: center !important;}

                table[class="left-content"] {width: 220px !important; text-align: left !important; }
                td[class="left-content"] {width: 220px !important; text-align: left !important; }
                img[class="img-blog"] {width: 220px !important;}
                img[class="divider-350"] {width: 220px !important; height:1px !important}

                table[class="right-sidebar"] {width: 150px !important;  text-align: left !important; }
                td[class="right-sidebar"] {width: 150px !important; text-align: left !important; }
                img[class="img-gallery"] {width: 110px !important;}
                img[class="divider-220"] {width: 150px !important; height:2px !important}

                table[class="right-content"] {width: 220px !important; text-align: left !important; }
                td[class="right-content"] {width: 220px !important; text-align: left !important; }
                img[class="img-blog"] {width: 220px !important;}
                img[class="divider-350"] {width: 220px !important; height:1px !important}

                table[class="left-sidebar"] {width: 150px !important; text-align: left !important; }
                td[class="left-sidebar"] {width: 150px !important; text-align: left !important; }
                img[class="img-gallery"] {width: 110px !important;}
                img[class="divider-220"] {width: 150px !important; height:2px !important}
            }

            @media screen and (max-width: 479px)  {
                body{width:auto !important;}

                table table{width:100%!important; }

                table[class="table-660"] {width: 300px !important; }

                td[class="logo"] {width: 240px !important; display: block !important; padding-bottom: 0px !important;}
                td[class="social"] {width: 240px !important; display: block !important; }

                img[class="img-660"] {width: 300px !important;  line-height: 0 !important;}
                img[class="img-radius"] {width: 300px !important; height: 10px !important; line-height: 0 !important;}

                td[class="one-half-first"] {width: 240px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-half-last"] {width: 240px !important; display: block !important; text-align: center !important; padding-left: 30px !important;}

                td[class="one-half-icon-first"] {width: 240px !important; display: block !important; text-align: left !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-half-icon-last"] {width: 240px !important; display: block !important; text-align: left !important; padding-left: 30px !important;}

                td[class="one-third"] {width: 240px !important; display: block !important; text-align: center; padding-bottom: 10px !important; padding-right: 30px !important;}
                td[class="one-third-middle"] {width: 240px !important; display: block !important; text-align: center; padding-bottom: 10px !important; padding-left: 30px !important; padding-right: 30px !important;}
                td[class="one-third-last"] {width: 240px !important; display: block !important; text-align: center; padding-left: 30px !important;}
                img[class="pro-img-180"] {width: 240px !important;}

                img[class="img-285"] {width: 240px !important; text-align: center !important;}

                td[class="three-fourth-left"] {width: 240px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-fourth-right"] {width: 240px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important; padding-left: 30px !important;}
                td[class="three-fourth-left-last"] {width: 240px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important; padding-right: 30px !important;}
                td[class="one-fourth-right-last"] {width: 240px !important; display: block !important; text-align: center !important; padding-bottom: 40px !important; padding-left: 30px !important;}
                img[class="img-180"] {width: 240px !important; text-align: center !important;}

                td[class="one-fourth-left"] {width: 240px !important; display: block !important; text-align: left !important; padding-bottom: 0px !important;}
                td[class="three-fourth-right"] {width: 240px !important; display: block !important; text-align: left !important; padding-bottom: 0px !important; padding-left: 30px !important;}
                td[class="three-fourth-right-last"] {width: 240px !important; display: block !important; text-align: left !important; padding-bottom: 40px !important; padding-left: 30px !important;}
                td[class="one-fourth-left-last"] {width: 240px !important; display: block !important;  text-align: left !important; padding-bottom: 40px !important;}
                img[class="img-180"] {width: 240px !important;display: block !important; }

                table[class="left-content"] {width: 240px !important; margin: 0;  text-align: left !important; padding-bottom: 40px !important;  display: block !important;}
                td[class="left-content"] {width: 240px !important; margin: 0; text-align: left !important; display: block !important; }
                img[class="img-blog"] {width: 240px !important; display: block !important;}
                img[class="divider-350"] {width: 240px !important; height:1px !important display: block !important;}

                table[class="right-sidebar"] {width: 240px !important; text-align: center !important;  display: block !important; }
                table[class="right-sidebar-last"] {width: 240px !important; text-align: center !important; margin-bottom: 40px !important; display: block !important; }
                td[class="right-sidebar"] {width: 240px !important; text-align: left !important; display: block !important; }
                img[class="img-gallery"] {width: 200px !important; display: block !important;}
                img[class="divider-220"] {width: 240px !important; height:2px !important display: block !important;}

                table[class="right-content"] {width: 240px !important; margin: 0 !important;  text-align: right !important; padding-left: 30px !important; padding-bottom: 40px !important; display: block !important;}
                td[class="right-content"] {width: 240px !important; margin: 0 !important; text-align: left !important; display: block !important; }
                img[class="img-blog"] {width: 240px !important; display: block !important;}
                img[class="divider-350"] {width: 240px !important; height:1px !important display: block !important;}

                table[class="left-sidebar"] {width: 240px !important; text-align: center !important;  display: block !important; }
                table[class="left-sidebar-last"] {width: 240px !important;  text-align: center !important; margin-bottom: 40px !important; display: block !important; }
                td[class="left-sidebar"] {width: 240px !important; text-align: left !important; display: block !important; }
                img[class="img-gallery"] {width: 200px !important; display: block !important;}
                img[class="divider-220"] {width: 240px !important; height:2px !important display: block !important;}

                td[class="footer-left"] {width: 240px !important; display: block !important; text-align: center !important; padding-bottom: 0px !important;}
                td[class="footer-right"] {width: 240px !important; display: block !important; text-align: center !important; }
            }

            </style>
            </head>
            <body bgcolor="#f8f8f8">
            <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#f8f8f8">
                <tr>
                    <td align="center">
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#f8f8f8" style="padding:0; margin: 0; ">
                            <tr>
                                <td bgcolor="#f8f8f8" align="left" style="padding: 30px 0px 10px 0px; font-size:12px ; font-family: Helvetica, Arial, sans-serif; line-height: 22px; font-style: italic;">
                                    <span>
                                        <a class="top-link" href="#">View online</a>
                                        &nbsp;&nbsp;
                                        <a class="top-link" href="#">Forward to friends</a>
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td class="logo" colspan="2" width="330" bgcolor="#ffffff" align="left" valign="top" style="padding: 30px; font-size:12px ; font-family: Helvetica, Arial, sans-serif; line-height: 22px; font-style: italic;">
                                    <span>
                                        <a href="#" style="color:#ffffff;">
                                        <img src="http://www.fruitfore.st/images/logo.jpg" alt="logo" />
                                        </a>
                                    </span>
                                </td>
                                <td class="social" colspan="2" width="330" bgcolor="#ffffff" align="right" valign="middle" style="padding: 30px; font-size:12px ; font-family: Helvetica, Arial, sans-serif; line-height: 22px; font-style: italic;">
                                    <span>
                                        <a href="#" style="color:#ffffff;">
                                            <img src="http://www.fruitfore.st/images/facebook.jpg" alt="facebook" border="0" />
                                        </a>
                                        &nbsp;
                                        <a href="#" style="color:#ffffff;">
                                            <img src="http://www.fruitfore.st/images/twitter.jpg" alt="twitter" border="0" />
                                        </a>
                                        &nbsp;
                                        <a href="#" style="color:#ffffff;">
                                            <img src="http://www.fruitfore.st/images/youtube.jpg" alt="youtube" border="0" />
                                        </a>
                                        &nbsp;
                                        <a href="#" style="color:#ffffff;">
                                            <img src="http://www.fruitfore.st/images/linkedin.jpg" alt="linkedin" border="0" />
                                        </a>
                                        &nbsp;
                                        <a href="#" style="color:#ff8b1d;">
                                            <img src="http://www.fruitfore.st/images/dribbble.jpg" alt="dribbble" border="0" />
                                        </a>
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ff8b1d" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ff8b1d" align="left" valign="top" style="padding: 30px; font-size:32px ; font-family: Helvetica, Arial, sans-serif; line-height: 42px; color:#ffffff;">
                                    <span>
                                        Please click this link to activate your account. http://www.fruitfore.st/activateuser.php?usr=' . $username . '&token=' . $token . '
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ff8b1d" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ff8b1d" align="center" style="padding: 0; font-size:32px ; font-family: Helvetica, Arial, sans-serif; line-height: 0 !important; color:#ffffff; text-transform: uppercase;">
                                    <a href="#" style="color:#ffffff;">
                                        <img class="img-660" src="http://www.fruitfore.st/images/featured-image.jpg" alt="featured-image" border="0" />
                                    </a>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ffffff" align="left" style="padding: 40px 30px ; font-size:16px ; font-family: Helvetica, Arial, sans-serif; line-height: 26px; color:#aaaaaa; ">
                                    <p>
                                        Hello, we are happy to announce our latest services features of <span style="background:#fff7a8; font-style: italic;">Rolas theme</span>.
                                        Ut quas omnes animal his. Ei vis esse consetetur repudiandae, duo ad
            ullum eligendi. Saepe utinam intellegebat mei ad <a href="#">read on</a>
                                    </p>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ffffff" align="center" style="padding: 0px; ">
                                    <span>
                                        <img class="img-660" src="http://www.fruitfore.st/images/divider-660.jpg" alt="divider-660" border="0" />
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td class="one-half-first" colspan="2" width="285" bgcolor="#ffffff" align="left" valign="top" style="padding: 40px 30px 45px 30px; font-size:14px ; font-family: Helvetica, Arial, sans-serif; line-height: 24px;  color:#aaaaaa;">
                                    <p>
                                        <a href="#" style="color:#ffffff;">
                                        <img class="img-285" src="http://www.fruitfore.st/images/img-285-180-1.jpg" alt="img-285-180-1" border="0" />
                                        </a>
                                    </p>
                                </td>
                                <td class="one-half-last" colspan="2" width="285" bgcolor="#ffffff" align="left" valign="top" style="padding:  40px 30px 45px 0px; font-size:14px ; font-family: Helvetica, Arial, sans-serif; line-height: 24px; color:#aaaaaa;">
                                    <p style="font-size: 20px; line-height: 30px; color:#818181; text-transform: uppercase;">
                                        mobile devices friendly
                                    </p>

                                    <p>
                                        Lorem ipsum dolor sit amet, adipiscing elit. Nulla fringilla auctor sem, sit amet tristique odio dictum quis neque diam, ornare ac blandit consequat, ultrices nec justo.
                                    </p>
                                    <br />

                                    <p>
                                        <a href="#" style="color:#ffffff; text-transform: uppercase; background:#ff8b1d; font-style: normal; border-top: 10px solid #ff8b1d; border-right: 15px solid #ff8b1d; border-bottom: 10px solid #ff8b1d; border-left: 15px solid #ff8b1d;">
                                        coded button
                                        </a>
                                    </p>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ffffff" align="center" style="padding: 0px; ">
                                    <span>
                                        <img class="img-660" src="http://www.fruitfore.st/images/divider-660.jpg" alt="divider-660" border="0" />
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>

                                <td class="one-half-first" colspan="2" width="285" bgcolor="#ffffff" align="left" valign="top" style="padding: 40px 30px 45px 30px; font-size:14px ; font-family: Helvetica, Arial, sans-serif; line-height: 24px;  color:#aaaaaa;">
                                    <p style="font-size: 20px; line-height: 30px; color:#818181; text-transform: uppercase;">
                                        repeatable modules
                                    </p>

                                    <p>
                                        Lorem ipsum dolor sit amet, adipiscing elit. Nulla fringilla auctor sem, sit amet tristique odio dictum quis neque diam, ornare ac blandit consequat, ultrices nec justo.
                                    </p>
                                    <br />

                                    <p>
                                        <a href="#" style="color:#ffffff; text-transform: uppercase; background:#ff8b1d; font-style: normal; border-top: 10px solid #ff8b1d; border-right: 15px solid #ff8b1d; border-bottom: 10px solid #ff8b1d; border-left: 15px solid #ff8b1d;">
                                        read more here
                                        </a>
                                    </p>
                                </td>
                                <td class="one-half-last" colspan="2" width="285" bgcolor="#ffffff" align="left" valign="top" style="padding:  40px 30px 45px 0px; font-size:14px ; font-family: Helvetica, Arial, sans-serif; line-height: 24px; color:#aaaaaa;">
                                    <span>
                                        <a href="#" style="color:#ffffff;">
                                        <img class="img-285" src="http://www.fruitfore.st/images/img-285-180-2.jpg" alt="img-285-180-1" border="0" />
                                        </a>
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ffffff" align="center" style="padding: 0px; ">
                                    <span>
                                        <img class="img-660" src="http://www.fruitfore.st/images/divider-660.jpg" alt="divider-660" border="0" />
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td class="one-half-first" colspan="2" width="285" bgcolor="#ffffff" align="left" valign="top" style="padding: 40px 30px 40px 30px; font-size:14px ; font-family: Helvetica, Arial, sans-serif; line-height: 24px;  color:#aaaaaa;">
                                    <span>
                                        <a href="#" style="color:#ffffff;">
                                        <img class="img-285" src="http://www.fruitfore.st/images/img-285-180-3.jpg" alt="img-285-180-1" border="0" />
                                        </a>
                                    </span>
                                </td>
                                <td class="one-half-last" colspan="2" width="285" bgcolor="#ffffff" align="left" valign="top" style="padding: 40px 30px 40px 0px; font-size:14px ; font-family: Helvetica, Arial, sans-serif; line-height: 24px; color:#aaaaaa;">
                                    <p style="font-size: 20px; line-height: 30px; color:#818181; text-transform: uppercase;">
                                        very easy to use
                                    </p>

                                    <p>
                                        Lorem ipsum dolor sit amet, adipiscing elit. Nulla fringilla auctor sem, sit amet tristique odio dictum quis neque diam, ornare ac blandit consequat, ultrices nec justo.
                                    </p>
                                    <br />

                                    <p>
                                        <a href="#" style="color:#ffffff; text-transform: uppercase; background:#ff8b1d; font-style: normal; border-top: 10px solid #ff8b1d; border-right: 15px solid #ff8b1d; border-bottom: 10px solid #ff8b1d; border-left: 15px solid #ff8b1d;">
                                        coded button
                                        </a>
                                    </p>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#ffffff" align="center" style="padding: 0px; ">
                                    <span>
                                        <img class="img-660" src="http://www.fruitfore.st/images/divider-660.jpg" alt="divider-660" border="0" />
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="padding:0; margin: 0; ">
                            <tr>
                                <td colspan="2" width="660" bgcolor="#ffffff" align="center" valign="top" style="padding: 40px 30px 45px 30px ; font-size:20px ; font-family: Helvetica, Arial, sans-serif; line-height: 30px; color:#aaaaaa;">
                                    <p style="font-size: 20px; line-height: 30px; color:#818181; text-transform: uppercase;">
                                        what are you waiting for? hit the button below and get yours soon!
                                    </p>

                                    <br />

                                    <p>
                                        <a href="#" style="color:#ffffff; text-transform: uppercase; background:#ff8b1d; font-style: normal; border-top: 10px solid #ff8b1d; border-right: 15px solid #ff8b1d; border-bottom: 10px solid #ff8b1d; border-left: 15px solid #ff8b1d;">
                                        download now
                                        </a>
                                    </p>
                                </td>
                            </tr>
                        </table>
                        <table class="table-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ececec" style="padding:0; margin: 0; ">
                            <tr>
                                <td class="footer-left" colspan="2" width="430" bgcolor="#ececec" align="left" valign="top" style="padding: 30px 15px 20px 30px; font-size:12px ; font-family: Helvetica, Arial, sans-serif; line-height: 14px; font-style: italic; color:#aaaaaa;">
                                    <p>
                                    You are receiving this email because you subscribed in at <a href="#">yoursite.com</a> to getting some special news, promotions, freebies.
                                    Click here to <a href="#">unsubscribe</a> :(
                                    </p>
                                    <br />
                                    <p>
                                    Our mailing address is: <a href="#">yoursite.com</a>, P.O. Box 264, London, UK 57378
                                    </p>
                                </td>
                                <td class="footer-right" colspan="2" width="200" bgcolor="#ececec" align="left" valign="top" style="padding:  30px 30px 20px 15px;  font-size:12px ; font-family: Helvetica, Arial, sans-serif; line-height: 14px; font-style: italic; color:#aaaaaa;">
                                    <p>
                                        Copyright 2013 <a href="#">yourwebsite.com</a> all right reserved.
                                    </p>
                                </td>
                            </tr>
                        </table>
                        <table class="tablbe-660" width="660" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#f8f8f8" style="padding:0; margin: 0; ">
                            <tr>
                                <td width="660" bgcolor="#f8f8f8" align="center" style="padding-bottom: 30px; line-height: 0 !important;">
                                    <span>
                                        <img class="img-radius" src="http://www.fruitfore.st/images/image-radius.jpg" alt="image radius" border="0" />
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </body>
    </html>'
    ;
        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=UTF-8' . "\r\n";
        // Additional headers
        $headers .= 'From: FruitFore.st <welcome@fruitfore.st>' . "\r\n";
        mail($email, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:00:54.667

是的，媒体查询将通过 php 工作`mail()`。但是，并非所有电子邮件客户端都支持 CSS 媒体查询，请参阅本文了解更多详细信息[http://www.emailonacid.com/blog/details/C13/media_queries_in_html_emails](http://www.emailonacid.com/blog/details/C13/media_queries_in_html_emails)

# azure-blob-storage - 使用 Blob 存储上传时的最大文件名长度

> ID：16079613
> 
> 赞同：0
> 
> 时间：2013-04-18T09:46:00.877
> 
> 标签：azure-blob-storage, blobstorage

我只想知道通过 Blob 存储上传文件时是否有任何最大文件名长度。当我上传文件时，它们正在成功上传，但是当我尝试下载该文件时，它们以不同的格式显示。意味着它们正在下载作为 zip 文件夹，其中包含我从未上传过的此类文件。谁能告诉我可能是什么问题。

# java - 读取制表符分隔的文本文件时出现问题？

> ID：16079615
> 
> 赞同：3
> 
> 时间：2013-04-18T09:46:07.387
> 
> 标签：java

我有一个制表符分隔的文件，我必须从文件中读取数据。

```
Col1    Col2    Col3
data1   data2   data3
data1   data2   data3 
```

如果所有列都存在值，则没有问题。问题是有时少数列可能不包含以下值。

```
Col1    Col2    Col3
data1           data3
data1   data2 
```

在上述数据中，我能够读取第一行数据，因为 col2 的值将是空字符串。但是第二行的 col3 没有数据。在这里我得到数组索引越界异常。为什么我没有得到第二行 col3 的空字符串？

我正在使用如下代码：

```
String dataFileName = "C:\\Documents and Settings\\User1\\some.txt";

         /**
          * Creating a buffered reader to read the file
          */
         BufferedReader bReader = new BufferedReader(
                 new FileReader(dataFileName));

         String line;

         /**
          * Looping the read block until all lines in the file are read.
          */
         while ((line = bReader.readLine()) != null) {

             /**
              * Splitting the content of tabbed separated line
              */
             String datavalue[] = line.split("\t");
             String value1 = datavalue[0];
             String value2 = datavalue[1];
             String value3 = datavalue[2];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:49:54.783

懒惰的方式是这样的：

```
...
String datavalue[] = Arrays.copyOf(line.split("\t"),3);
String value1 = datavalue[0];
String value2 = datavalue[1];
String value3 = datavalue[2];
... 
```

基本上，您正在拆分内容并将其复制到一个新数组中，其中填充的元素为空，如记录所示：

> 复制指定的数组，截断或填充空值（如有必要），使副本具有指定的长度。对于在原始数组和副本中都有效的所有索引，这两个数组将包含相同的值。对于在副本中有效但在原始副本中无效的任何索引，副本将包含 null。当且仅当指定长度大于原始数组的长度时，此类索引才会存在。结果数组与原始数组的类完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:52:56.347

[String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)默认将重复的分隔符合并为一个。您应该使用负的第二个参数：

```
String datavalue[] = (line+"\t\t\t").split("\t",-1); 
```

此外 - 如果原始文件缺少尾随制表符，您可以在该行中添加额外的制表符以阻止这破坏您的代码。

# performance - 开罗+橡皮筋选择：gui 非常非常慢

> ID：16079617
> 
> 赞同：3
> 
> 时间：2013-04-18T09:46:11.210
> 
> 标签：performance, gtk, pygtk, cairo, rubber-band

我正在开发一个用 Cairo + Gtk 编写的应用程序。请注意，由于追溯兼容性问题，我被迫使用 Python 作为编程语言，PyGTK 作为包装器，以及 GTK 库 v.2.24。没有机会使用 C/C++ 和/或 GTK3！

我的应用程序需要（重新）在屏幕上为每次调用暴露方法（显然）绘制大量数据***。***

我只是让用户有机会*手动选择*以前用 Cairo 绘制的一些对象。由于我在 gtk.DrawingAreas 上绘图，看来我必须手动实现橡皮筋选择功能。

这是问题：

**有没有办法在每次鼠标移动时重绘橡皮筋矩形，避免重绘屏幕上的所有其他对象？**

出于性能原因，我只会重绘选择**矩形**。

由于大量的图形对象，我的 GUI 非常慢。不幸的是，尽管多次尝试，我别无选择：重绘全部或重绘任何东西！

我想到的第一件事是：有没有办法在具有大部分数据的绘图区和鼠标光标之间覆盖一个*中间级别？*通过调用 queue_draw_area() 函数没有性能提升。

下面是一个简单的、自包含的代码示例：显然，在这种情况下，我只使用 cairo 来绘制极其简单的图形对象。

```
import gtk
from gtk import gdk

class Canvas(gtk.DrawingArea):

    # the list of points is passed as argument

    def __init__(self, points):
        super(Canvas, self).__init__()
        self.points = points
        self.set_size_request(400, 400)

        # Coordinates of the left-top angle of the selection rect
        self.startPoint = None

        self.endPoint = None

        # Pixmap to drawing rubber band selection
        self.pixmap = None

        self.connect("expose_event", self.expose_handler)
        self.connect("motion_notify_event", self.mouseMove_handler)
        self.set_events(gtk.gdk.EXPOSURE_MASK
                            | gtk.gdk.LEAVE_NOTIFY_MASK
                            | gtk.gdk.BUTTON_PRESS_MASK
                            | gtk.gdk.POINTER_MOTION_MASK
                            | gtk.gdk.POINTER_MOTION_HINT_MASK)

    # Method to paint lines and/or rubberband on screen

    def expose_handler(self, widget, event):

        rect = widget.get_allocation()
        w = rect.width
        h = rect.height
        ctx = widget.window.cairo_create()
        ctx.set_line_width(7)
        ctx.set_source_rgb(255, 0, 0)
        ctx.save()

        for i in range(0, len(self.points)):
            currPoint = self.points[i]
            currX = float(currPoint[0])
            currY = float(currPoint[1])
            nextIndex = i + 1
            if (nextIndex == len(self.points)):
                continue
            nextPoint = self.points[nextIndex]
            nextX = float(nextPoint[0])
            nextY = float(nextPoint[1])
            ctx.move_to(currX, currY)
            ctx.line_to(nextX, nextY)
        ctx.restore()
        ctx.close_path()
        ctx.stroke()

        # rubber band
        if self.pixmap != None:
            width = self.endPoint[0] - self.startPoint[0]
            height = self.endPoint[1] - self.startPoint[1]
            if width < 0 or height < 0:
                tempEndPoint = self.endPoint
                self.endPoint = self.startPoint
                self.startPoint = tempEndPoint

            height = self.endPoint[1] - self.startPoint[1]
            width = self.endPoint[0] - self.startPoint[0]
            widget.window.draw_drawable(widget.get_style().fg_gc[gtk.STATE_NORMAL], self.pixmap, self.startPoint[0], self.startPoint[1], self.startPoint[0], self.startPoint[1], abs(width), abs(height))

    def mouseMove_handler(self, widget, event):
        x, y, state = event.window.get_pointer()
        if (state & gtk.gdk.BUTTON1_MASK):
            if (state & gtk.gdk.CONTROL_MASK):
                if self.startPoint == None:
                    self.startPoint = (x,y)
                    self.endPoint = (x,y)
                else:
                    self.endPoint = (x,y)
                tempPixmap = gtk.gdk.Pixmap(widget.window, 400, 400)

                height = self.endPoint[1] - self.startPoint[1]
                width = self.endPoint[0] - self.startPoint[0]

                gc = self.window.new_gc()
                gc.set_foreground(self.get_colormap().alloc_color("#FF8000"))

                gc.fill = gtk.gdk.STIPPLED
                tempPixmap.draw_rectangle(gc, True, self.startPoint[0], self.startPoint[1], abs(width), abs(height))

                self.pixmap = tempPixmap
                # widget.queue_draw_area()
                widget.queue_draw()
        else:
            if (self.pixmap != None):
                self.pixmap = None

                # ...do something...

                # widget.queue_draw_area(self.startPoint[0], self.startPoint[1], )
                widget.queue_draw()

li1 = [(20,20), (380,20), (380,380), (20,380)]

window = gtk.Window()
canvas = Canvas(li1)
window.add(canvas)
window.connect("destroy", lambda w: gtk.main_quit())
window.show_all()
gtk.main() 
```

谢谢！

它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:49:27.777

使用 Gtk+/Cairo 绘图时的一些一般提示：

*   尽可能多地绘制。这个想法是跟踪已更改的区域，并仅重绘那些区域。Gdk 会自动为您完成这部分工作。当它调用`expose`（在 Gtk3 中`draw`）时，它会应用一个剪贴蒙版，因此只有“无效”像素会被您的绘图更改。
*   你可以告诉 Gdk 哪些区域应该被重绘`GdkWindow.invalidate_rect`。现在您的调用`widget.queue_draw`使整个窗口无效，因此您绘制了太多像素。
*   如果您在非无效区域中有复杂的元素，您仍然会在暴露中绘制/计算它们 - 它们只是不会出现在屏幕上。为此，您可以检查`event.area`(a GdkRectangle)。如果您的元素不与该区域相交，则不必费心绘制它们，因为这些像素无论如何都会被剪裁。
    *   这里有一个权衡。有时，如果您计算一个元素是否可见，它会节省很多。如果节省了大量的几何计算，有时只绘制几个额外的像素会更快。你必须逐案决定。
*   可能会为每个 invalidate_rect 调用一次 Expose，但 Gdk 也可能会在您使几个小/重叠的矩形无效时识别出来，并且只用较大的矩形调用一次。
*   你不应该混合“原始”Gdk 和 cairo 调用。Gdk 调用（在 gc 上操作）在 Gtk3 中消失了。现在您说您只在 Gtk2 中编写此代码，但如果您希望有一天在另一个项目中重用该代码，那么您现在使用 Cairo 编写它会有所帮助。也可能存在一些性能差异。
*   您应该注意抗锯齿。默认情况下，cairo 中的所有内容都是抗锯齿的（我不知道您是否可以将其关闭）。大多数时候这是一件好事，但有时清晰的像素看起来更好 - 而且它们也快得多。如果您想要非抗锯齿矩形，请在整数坐标上绘制填充矩形，在半整数坐标上绘制描边矩形（1px 线）。
*   在您的具体示例中，您的 Pixmap 似乎没有必要。您可以尝试的事情是在像素图或 cairo 表面发生变化时将其渲染，然后`expose`从像素图中复制无效区域，并在顶部绘制橡皮筋。但是，我发现直接进行绘图通常更容易和更快。如果您正在执行此手动缓冲，您可能需要考虑禁用内置双缓冲 ( `GtkWidget.set_double_buffered`) 和自动绘制背景 ( `GtkWidget.set_app_paintable`)。

这是我制作的一个小程序：[rubberband.py](https://gist.github.com/jdmansour/5414200/raw/rubberband.py)。我从我的一个项目中获取了代码，并添加了几个可以选择的圆圈。希望您可以以此为起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T09:15:46.030

我知道旧线程，但一个模型可能会将渲染表面复制到另一个缓冲区，然后重绘无效区域。可以在[此处](https://github.com/timholy/ImageView.jl/blob/448435e4c216b4a3005b4dfc9c55d5ca381b953d/src/rubberband.jl)找到 Julia 语言的该技术示例。在实践中，这似乎取得了非常好的性能。

# c++ - 自定义 ICredentialProvider 和 GetSerialization

> ID：16079618
> 
> 赞同：2
> 
> 时间：2013-04-18T09:46:13.743
> 
> 标签：c++, windows, authentication

我正在尝试实现一个自定义 ICredentialProvider 但我有点卡住了几件事

A）对提供者的调用流程（即）什么顺序，来自MS的样本不提供这个。B）如果您不使用 SSPI（安全服务提供者接口）中内置的系统之一，GetSerialization 如何适合该等式。例如，我不想在系统上存储任何密码，但我不想为后续的身份验证尝试（在线发生）存储值。

任何关于此的有用文章的帮助或方向都会很棒。我已经进行了一大堆搜索，所以可能已经看到了其中的大多数，但没有一个真正有帮助。

缺口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-26T09:41:23.860

您绝对应该首先阅读技术参考并深入了解它。下载链接可以在这个问题中找到。

[在 Windows 中创建自定义凭据提供程序的文档](https://stackoverflow.com/questions/6228499/documentation-for-creating-a-custom-credential-provider-in-windows)

GetSerialization 是将收集到的输入到凭据提供程序凭据定义的字段中的凭据打包成 LSA 所需格式的过程。当您处于 CPUS_LOGON、CPUS_UNLOCK_WORKSTATION 或 CPUS_CREDUI 使用场景中并使用密码作为底层身份验证机制时，您需要执行此操作。我相信在某些情况下，例如 Windows Hello，这仍然作为底层机制发生。

# c++ - Windows 中客户端服务器应用程序中的 CreateProcess()

> ID：16079621
> 
> 赞同：0
> 
> 时间：2013-04-18T09:46:22.110
> 
> 标签：c++, c, sockets, threadpool, createprocess

我正在开发一个 UDP 客户端-服务器应用程序，其中一台服务器应该处理 40 个可以同时登录的客户端。

现在在 UNIX 中，通过使用`fork`基本上创建一个子进程来处理客户端并让服务器接受新连接的功能来解决这些问题。

我在互联网上搜索，发现`fork`在windows中不可用，但`CreateProcess`可以使用。

我之前的研究还向我介绍了线程池。所以现在我有两个问题：

1.  我可以`fork()`通过`CreateProcess()`在 Windows 中使用来实现功能吗？
2.  如果这是可能的，我应该去做什么：线程池或创建多个进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:58:46.093

**1.** Short answer is no, there is nothing like `fork()` in the Win32 API, but it should be possible to implement it since CygWin provide a fully featured fork() on Windows. But you don't seem to actually need `fork()`for your application.

**2.** Actually your options are :

*   Create at least one thread/process for each client/connexion
*   Create only one thread/process for all client/connexion (using an event-driven approach as instance)
*   Mix the two above

The best approach depends on your application but for handling a maximum of only 40 simultaneous client, you can very well have one thread per client.

You could use the [POSIX standard thread library](http://en.wikipedia.org/wiki/POSIX_Threads) `pthread` to create and manipulate threads. This` library is standard in all POSIX-conformant OS (GNU/Linux, Mac OS X, BSD, etc.) and has been ported to [Windows](http://sourceware.org/pthreads-win32/). So this approach would allow you to have a very nice portability.

Although if you want to use the Win32 API, you should take a look at [CreateThread](http://msdn.microsoft.com/en-us/library/ms682516%28VS.85%29.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:10:53.787

在 linux 中，fork 函数用于创建新进程。另外对于每个进程，都有不同的虚拟内存空间。对于线程，只有一个公共虚拟内存。此外，fork API 可以使用原生 API RtlCloneUserProcess 在 Windows（在某种程度上）进行模拟。

# ios6 - 如何强制 UICollectionView 滚动项目较少？

> ID：16079624
> 
> 赞同：14
> 
> 时间：2013-04-18T09:46:30.213
> 
> 标签：ios6, uiscrollview, uicollectionview

我正在使用 UICollectionView，它显示的项目比填满整个屏幕所需的项目少。使用此设置，当我添加 20 个项目时，视图根本不会滚动（移动和反弹）。

**在没有足够的项目填满屏幕的情况下，如何强制集合视图滚动？**

[![](https://i.stack.imgur.com/5syZ4.png)](https://i.stack.imgur.com/5syZ4.png)
[（来源：[bytolution.com](http://bytolution.com/Screenshot%202013.04.17%2021.57.00.png)）]

谢谢你的帮助！

*顺便说一句，我已经尝试设置 contentSize（例如设置为 {320 , 1000}），但它仍然不起作用。*

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-20T13:47:56.223

尝试将`alwaysBounceVertical`属性设置为`YES`：

```
self.collectionView.alwaysBounceVertical = YES; 
```

默认值为`NO`

# java - Java Web Start 无法自动下载和安装请求的版本

> ID：16079626
> 
> 赞同：1
> 
> 时间：2013-04-18T09:46:38.217
> 
> 标签：java, jnlp, java-web-start

我的桌面上安装了 java 1.6 update 30。

jnlp 指定最低 java 版本是 Java 1.7。

但是我收到此错误

> Java Web Start 错误：应用程序请求了当前未在本地安装的 JRE 版本（版本 1.7+）。Java Web Start 无法
> 
> 自动下载并安装请求的版本。此 JRE 必须手动安装。

**更新：**

这个错误是什么意思？如何强制或建议安装 java 7？

如果用户被重定向到[http://java.com/en/download/index.jsp就好了](http://java.com/en/download/index.jsp)

我知道这可以通过`deployJava.js`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T21:50:14.987

1.  将以下行添加到您的 JNLP 文件中

`<java href="http://java.sun.com/products/autodl/j2se" version="1.7+" >`

1.  使用以下代码修改您的目标网页

在标头中添加java脚本

`<script src="http://www.java.com/js/deployJava.js"></script>`

在您的 html 文档正文中

`<p><script> var url="url of your jnlp file "; deployJava.createWebStartLaunchButton(url,'1.7.0');</script></p>`

有关更多信息，请查看[部署富 Internet 应用程序](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)

我希望这能解决你的问题

# vb.net - 从 VB 应用程序更新代理设置，仅在第一次工作

> ID：16079627
> 
> 赞同：1
> 
> 时间：2013-04-18T09:46:46.607
> 
> 标签：vb.net, internet-explorer, proxy

我一直在尝试创建一个简单的程序来更改代理设置，启用/禁用代理。但它只会在第一次更改设置。

我搜索了论坛和互联网，但没有运气。

我已经设法使程序运行一次，但是当第二次调用 ToggleProxy() 函数时，它首先相应地更改注册表，然后当调用 wininet.dll 以刷新 Internet Explorer 中的设置时，旧值为放回注册表。

因此，在更改代理和更新 IE 设置时，一切正常，但在尝试更改第二时间时，它会恢复第一次调用的设置。

我需要关闭或清除某些东西吗？如果关闭应用程序并重新启动它，它会再次运行一次。

wininet.dll/InternetSetOption 是否以某种方式存储了第一个调用？

在下面附加 Dll 声明和 ToggleProxy() 函数：

```
'Refresh Internet Options for Webbrowsers
Public Declare Auto Function InternetSetOption Lib "wininet.dll" (hInternet As IntPtr, dwOption As Integer, lpBuffer As IntPtr, dwBufferLength As Integer) As Boolean
Public Const INTERNET_OPTION_SETTINGS_CHANGED = 39
Public Const INTERNET_OPTION_REFRESH = 37

'Toggle the Proxy On/Off
Public Sub ToggleProxy()
    'Declare temp variable as Integer
    Dim setValue As Integer
    ' If EnableProxy regkey is 1, set setvalue to 0, else set to 1.
    If ProxyRegKey = "1" Then
        setValue = "0"
    Else
        setValue = "1"
    End If

    ' Change value in EnableProxy regkey to the value set in setValue    
    Dim autoshell = My.Computer.Registry.CurrentUser.OpenSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", True)

    'Set Value fo EnableProxy according to setValue
    autoshell.SetValue("ProxyEnable", setValue)
    autoshell.Close()
    MessageBox.Show("Value is:" & setValue)

    'Re-read the proxy regkey.
    ReadProxyRegKey()

    'Refresh Internet Settings
    InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SETTINGS_CHANGED, IntPtr.Zero, 0)
    InternetSetOption(IntPtr.Zero, INTERNET_OPTION_REFRESH, IntPtr.Zero, 0)
End Sub 
```

感谢所有帮助，似乎是一件简单的事情，但让我发疯。问候若阿金

# asp.net - Aps.Net 嵌套 UpdatePanel 的按钮单击事件不会触发

> ID：16079638
> 
> 赞同：0
> 
> 时间：2013-04-18T09:47:18.513
> 
> 标签：asp.net, button, onclick, updatepanel, tabcontainer

我在 TabContainers TabPanel 中有一个动态创建的 UpdatePanel。我还在新创建的 UpdatePanel 中创建了一个按钮。问题是，新按钮的点击事件不会被触发。这是 .aspx 和 .cs 的示例

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="NestedUpdatePanels.aspx.cs"
    Inherits="ArminTestStranica.NestedUpdatePanels" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    Design time created controls
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="False" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Button ID="btn1" runat="server" Text="Des btn1" OnClick="btn1_click" />
                <asp:TextBox ID="txt1" runat="server" Width="300px"></asp:TextBox>
                <asp:TabContainer ID="TabContainer1" runat="server">
                    <asp:TabPanel ID="Tab1" runat="server" HeaderText="Tab 1">
                        <ContentTemplate>
                            <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <asp:Button ID="btn2" runat="server" Text="Des btn2" OnClick="btn2_click" />
                                    <asp:TextBox ID="txt2" runat="server" Width="300px"></asp:TextBox>
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="btn2" EventName="Click" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </ContentTemplate>
                    </asp:TabPanel>
                    <asp:TabPanel ID="TabPanel2" runat="server" HeaderText="Tab 2">
                        <ContentTemplate>
                            <asp:UpdatePanel ID="UpdatePanel3" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <asp:Button ID="btn3" runat="server" Text="Des btn3" OnClick="btn3_click" />
                                    <asp:TextBox ID="txt3" runat="server" Width="300px"></asp:TextBox>
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="btn3" EventName="Click" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </ContentTemplate>
                    </asp:TabPanel>
                </asp:TabContainer>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btn1" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel>
    </div>
    <br />
    <br />
    Runtime designed controls
    <div>
        <asp:UpdatePanel ID="UpdatePanel4" runat="server" ChildrenAsTriggers="False" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Button ID="rbtn1" runat="server" Text="Run btn1" OnClick="rbtn1_click" />
                <asp:TextBox ID="rtxt1" runat="server" Width="300px"></asp:TextBox>
                <asp:TabContainer ID="TabContainer2" runat="server">
                </asp:TabContainer>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="rbtn1" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using AjaxControlToolkit;

namespace ArminTestStranica
{
    public partial class NestedUpdatePanels : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btn1_click(object sender, EventArgs e)
        {
            txt1.Text = "You have clicked at: " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt");

        }
        protected void btn2_click(object sender, EventArgs e)
        {
            txt2.Text = "You have clicked at: " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt");

        }
        protected void btn3_click(object sender, EventArgs e)
        {
            txt3.Text = "You have clicked at: " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt");

        }
        protected void rbtn1_click(object sender, EventArgs e)
        {
            rtxt1.Text = "You have clicked at: " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt");
            TabContainer2.Tabs.Clear();
            TabPanel firstNewTabPanel = new TabPanel();
            firstNewTabPanel.ID = "runFirstTabPanel";
            firstNewTabPanel.HeaderText = "Run Tab 1";
            UpdatePanel firstNewUpdatePanel = new UpdatePanel();
            firstNewUpdatePanel.ID = "runFirstUpdatePanel";
            firstNewUpdatePanel.UpdateMode = UpdatePanelUpdateMode.Conditional;
            Button firstNewButton = new Button();
            firstNewButton.ID = "runFirstButton";
            firstNewButton.ClientIDMode = ClientIDMode.Static;
            firstNewButton.Text = "Run btn 2";
            firstNewButton.Click += new EventHandler(firstNewButton_Click);
            firstNewUpdatePanel.ContentTemplateContainer.Controls.Add(firstNewButton);
            AsyncPostBackTrigger firstNewTrigger = new AsyncPostBackTrigger();
            firstNewTrigger.ControlID = "runFirstButton";
            firstNewTrigger.EventName = "Click";
            firstNewUpdatePanel.Triggers.Add(firstNewTrigger);
            firstNewTabPanel.Controls.Add(firstNewUpdatePanel);
            TabContainer2.Tabs.Add(firstNewTabPanel);
            TabContainer2.ActiveTabIndex = 0;
        }

        void firstNewButton_Click(object sender, EventArgs e)
        {
            rtxt1.Text = "You have clicked at Runtime Button 2: " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T11:35:28.417

我在创建程序时也遇到了同样的问题，我在按钮的单击事件上放置了更改的标签

只需在您的代码中尝试此代码段，并将按钮放在更新面板之外

SET UseSubmitBehavior="False" of button 试试这个并告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:12:32.450

可能会改变`ChildrenAsTriggers="true"` `RenderMode="Block"` 这句话。

请通过以下链接

[这个链接](http://sathishmncl.blogspot.com/2011/01/button-click-event-not-firing-in-update.html)可以帮助你

# json - 谷歌地图不显示标记

> ID：16079639
> 
> 赞同：0
> 
> 时间：2013-04-18T09:47:20.160
> 
> 标签：json, google-maps, google-maps-markers

我正在尝试构建一个使用 Google Map api 来显示来自服务器的数据的 web 应用程序。它工作正常，但我需要刷新页面以使用标记填充地图。

这是我的代码的样子：

```
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
latitude=1;
longitude=1;

var styles = [
    {
      stylers: [
        { hue: "#00ffe6" },
        { saturation: -20 }
      ]
    },{
      featureType: "road",
      elementType: "geometry",
      stylers: [
        { lightness: 100 },
        { visibility: "simplified" }
      ]
    },{
      featureType: "road",
      elementType: "labels",
      stylers: [
        { visibility: "off" }
      ]
    }
  ];

$(document).ready(function() {

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position){
    latitude = position.coords.latitude;
    longitude = position.coords.longitude;
    coords = new google.maps.LatLng(latitude, longitude);
    directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true});

    var mapOptions = {
        zoom: 15,
        center: coords,
        panControl: false,
        zoomControl: false,
        mapTypeControl: false,
        scaleControl: false,
        streetViewControl: false,
        overviewMapControl: false,
        disableDefaultUI: true,
         styles: styles,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        },
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
        directionsDisplay.setMap(map);
        var image = 'mapmarker.png';

        var marker = new google.maps.Marker({
                position: coords,
                map: map,
                icon: image,
                title: "Your current location!"
        });

    });
}else {
    alert("Geolocation API is not supported in your browser.");
}

getLocations();

function getLocations() {
    $.getJSON("fromMyServer", function (json) {

        var location;
        $.each(json.key, function (i, item) {
            addMarker(item.lat,item.lng, item.name, item.address);

            var tiedot = item.Nimi;
        });

    });
}

var markersArray;

function addMarker(lat,lng,name,address) {

  var contentString = '<h3>'+name + '</h3>'+ address;

  var tiedot = contentString + '<br><button onclick="calcRoute('+lat+','+lng+')">get route</button> '

        var Marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat,lng),
            map: map,
            title:"Test"
        });

         google.maps.event.addListener(Marker, 'click', function() {
          $('.tiedot').empty();
          $('.tiedot').append('<p>'+tiedot+'</p>');
          $("#panel").slideDown("slow");
             //infowindow.open(map,this);

    });

}

});
function calcRoute(lat,lng) {

  var start = latitude+','+longitude;

  var end = lat+','+lng;
  var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });
} 
```

控制台显示它从服务器获取数据，但由于某种原因它没有在第一个页面加载时添加任何标记。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:56:30.987

试试这个

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    getLocations();
}); 
```

# nodes - 在jsTree中粘贴多个节点

> ID：16079640
> 
> 赞同：1
> 
> 时间：2013-04-18T09:47:22.460
> 
> 标签：nodes, jstree, paste

用于 jsTree 的 CRRM 插件的文档指出 copy() 方法“*复制节点（准备粘贴）* ”并采用“*可以是 DOM 节点、jQuery 节点或指向树中元素的选择器*”的参数. 这一切都是**奇异**的。

对于 paste() 它说“*粘贴复制或剪切节点内的节点*”。暗示它支持**多个**节点的粘贴。

但是，我一直无法弄清楚如何复制多个节点。可能吗？如果是这样，我需要将什么传递给 copy() 方法？

我应该提到我正在使用复选框插件，并且复制的节点选择是使用它们完成的。目前我调用 get_checked() 方法来获取检查的节点。将此调用的结果传递给 copy() 不起作用。我最终做的是循环get_checked（）的结果，获取每个节点的id，然后为每个节点调用copy（）和paste（）。

问题是，我的“move.jstree”事件（粘贴时触发）的处理程序执行 ajax 调用来进行服务器端更新。如果我粘贴 10 个节点，那么我会得到 10 个 ajax 调用，这很愚蠢。我想做一个处理多个节点粘贴的ajax调用。应该有可能吧？

在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:55:41.817

回答我自己的问题。

我需要做的就是将节点 ID 连接到选择器字符串中并调用...

```
$('jstreediv').jstree('copy', '#node1, #node2, #mode3'); 
```

...复制多个节点，然后只需调用 paste 将它们全部粘贴...

```
$('jstreediv').jstree('paste', '#id-of-target-folder'); 
```

所以这实际上只是一个文档问题。

# xcode - 创建带有子文件夹的自定义 XCode 项目模板

> ID：16079644
> 
> 赞同：1
> 
> 时间：2013-04-18T09:47:36.607
> 
> 标签：xcode, project-template

我一直在使用项目模板来创建自定义模板。我知道如何创建子组，甚至创建一个由组表示的空文件夹。但是当我尝试使用子文件夹创建更复杂的结构时，问题就来了。我得到的最接近的方法是在 TemplateInfo.plist 中使用这些代码行：

```
<key>Definitions</key>
<dict>
    <key>Parent</key>
    <dict>
        <key>Path</key>
        <string>Parent</string>
    </dict>
    <key>Parent/Child</key>
    <dict>
        <key>Group</key>
        <array>
            <string>Parent</string>
        </array>
        <key>Path</key>
        <string>Parent/Child</string>
    </dict>
</dict>
<key>Nodes</key>
<array>
    <string>Parent</string>
    <string>Parent/Child</string>
</array> 
```

但这是添加两个对子项的引用，一个指向正确的子文件夹，另一个指向父文件夹。

PS 在 .xctemplate 中，我也有相同结构的空文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:08:42.447

Well, I answer myself hoping it will be helpful to somebody else.

Just defining the folder will list the rest of the content, so if it has a subfolder it will add it as a group to the project with its related link to the folder.

```
<key>Definitions</key>
<dict>
    <key>Parent</key>
    <dict>
        <key>Path</key>
        <string>Parent</string>
    </dict>
</dict>
<key>Nodes</key>
<array>
    <string>Parent</string>
</array> 
```

But this gives us another problem. In case of having files, it will recognize the last one as a folder producing kind of funny results.

![enter image description here](https://i.stack.imgur.com/WqbtY.png)

I don't know if this is a bug of xcode or that I'm using kind of hack to list the subfolders.

I hope anybody else can find the solution to this problem.

# jquery - 如何更改onhashchange值单击wordpress ajax中的browserback按钮

> ID：16079645
> 
> 赞同：0
> 
> 时间：2013-04-18T09:47:45.447
> 
> 标签：jquery, ajax, wordpress

我正在尝试使用browswerback按钮获取wordpress ajax帖子，这意味着当用户单击浏览器后退按钮时，之前通过单击帖子标题加载的帖子将显示，我想使用浏览器后退按钮显示上一篇文章，为此我已经使用了此代码，当用户单击帖子时它工作正常，但它不适用于浏览器后退按钮，我遇到了这个问题。谁能告诉我这个问题的解决方案。

```
 success: function(response) {
    jQuery("#loading-animation").addClass('loadingstyle');
    jQuery("#loading-animation").text(function(){
    if(location.hash){
    // We got a hash value! Lets take off the hash and smoke it.
    var newhash = window.location.hash.substring(1);
    jQuery("#loading-animation").html(response);
    // uncomment the above code to see if it works.
    }else{
    alert("No hash available.");
    // no hash value
    }
    $(".ajaxclick").click(function(e){
    e.preventDefault();
    window.location.hash = $(this).attr("href");
    });

    // $(window).on('hashchange', function() {

    window.onhashchange = function(){

    // hash changed. Do something cool.
    if(location.hash){

    var hash = window.location.hash.substring(1);
    //    console.log(response);
    jQuery("#loading-animation").html(response);

    }else{
     // load home page
    // jQuery("#loading-animation").html(response);
    alert("No more content to show");
    }
    }       
    });

    return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:54:06.853

您正在使用`e.preventDefault();`哪些原因来停止进一步的事件（点击）。

所以`e.preventDefault();`从下面的代码中删除它

```
$(".ajaxclick").click(function(e){
      e.preventDefault();
     window.location.hash = $(this).attr("href");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:25:57.087

你可以`onchange`用下面的代码替换函数吗？

```
window.onhashchange = function(){
     if(location.hash){
          var hash = $('.ajaxclick').attr('href');
          jQuery("#loading-animation").html(response);

     }else{
         alert("No more content to show");
     }
} 
```

# pentaho - 如何添加列？

> ID：16079649
> 
> 赞同：1
> 
> 时间：2013-04-18T09:47:52.530
> 
> 标签：pentaho, kettle

我想要每列的总数。我的数据中没有可用作“按步骤分组”的组字段的键值。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:51:33.737

您可以在不提供组字段的情况下使用“分组依据”步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T11:20:49.693

您可以在不提供组字段的情况下使用“分组依据”步骤。请按照以下步骤操作：

1.  选择表输入
2.  选择“分组依据”步骤

在 Group by 中，请按照以下步骤操作：

选择所需的分组字段并在循环字段部分中将函数分配为 sum/avg

# android - 使用 Request 在 facebook 墙上发帖

> ID：16079652
> 
> 赞同：1
> 
> 时间：2013-04-18T09:47:55.703
> 
> 标签：android, facebook-graph-api

一整天我都在想如何使用我自己的程序在我自己帐户的 facebook 墙上发帖。我遵循了 facebook 开发者页面上的教程，但这并没有帮助。目前我有这个请求代码：

```
 Bundle params = new Bundle();params.putString("app", "http://samples.ogp.me/##############");

//      List<String> permissions = new ArrayList<String>();
//      permissions.add("publish_actions");
//      Session.getActiveSession().requestNewPublishPermissions(new NewPermissionsRequest(getMainActivity(), permissions));
        Request request = new Request(
            Session.getActiveSession(),
            "me/appnamespace:test",
            params,
            HttpMethod.POST
        );
        Response response = request.executeAndWait();
        Log.print("Response: " + response.toString()); 
```

所有这一切都会产生以下错误：

```
Response: {Response:  responseCode: 200, graphObject: null, error: {HttpStatus: -1, errorCode: -1, errorType: null, errorMessage: null}, isFromCache:false} 
```

这几乎没有给出什么是错误的信息。200 错误代码似乎与权限有关。

我在[这个](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/publish-open-graph-story/)页面上找到了这段文字：

> 错误：
> 
> {“错误”：{“消息”：“（＃200）需要扩展权限：publish_actions”，“类型”：“OAuthException”，“代码”：200 } }
> 
> 原因：
> 
> 您尚未授权该应用发布到您的时间线。单击“获取访问令牌”，然后单击“扩展权限”选项卡。选择 publish_actions 权限并再次运行您的测试。

出于某种原因，我无法将 publish_actions 添加到 Graph API Explorer 中的扩展权限，因为没有选项！只有发布流。所以我补充说。我在那里得到这个错误：

```
{
  "error": {
    "message": "(#10) Application does not have permission for this action",
    "type": "OAuthException",
    "code": 10
  }
} 
```

在我在 facebook 上的应用程序权限页面中，我在**用户和朋友权限**上添加了 publish_actions，在**扩展权限**上添加了 publish_stream（我无法在那里添加 publish_actions）。

最后，无论我做什么，除非我使用 WebDialog，否则我无法在 facebook 时间轴上发布消息，这不是我需要的。

我无法选择可能出现的问题。任何想法，将不胜感激。

# magento - 在刷新 magento 缓存存储时显示错误消息

> ID：16079654
> 
> 赞同：0
> 
> 时间：2013-04-18T09:47:58.983
> 
> 标签：magento, magento-1.7

当我从后端刷新缓存存储时，会显示一些错误。

显示“处理您的请求时出错”

文件错误：“C:\wamp\www\magento\app\code\core\Mage\Catalog\sql\catalog_setup\upgrade-1.6.0.0.9-1.6.0.0.10.php” - SQLSTATE[42S01]：基表或视图已存在：1050 表 'catalog_product_entity_group_price' 已存在

之后我必须从头开始安装magento。

有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:36:30.717

处理您的请求时出错

```
#0 C:\wamp\www\magento-1.7.0.2\magento\app\code\core\Mage\Core\Model\Resource\Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 C:\wamp\www\magento-1.7.0.2\magento\app\code\core\Mage\Core\Model\Resource\Setup.php(437): Mage_Core_Model_Resource_Setup->_modifyResourceDb('upgrade', '1.6.0.0', '1.6.0.3')
#2 C:\wamp\www\magento-1.7.0.2\magento\app\code\core\Mage\Core\Model\Resource\Setup.php(320): Mage_Core_Model_Resource_Setup->_upgradeResourceDb('1.6.0.0', '1.6.0.3')
#3 C:\wamp\www\magento-1.7.0.2\magento\app\code\core\Mage\Core\Model\Resource\Setup.php(235): Mage_Core_Model_Resource_Setup->applyUpdates()
#4 C:\wamp\www\magento-1.7.0.2\magento\app\code\core\Mage\Core\Model\App.php(417): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 C:\wamp\www\magento-1.7.0.2\magento\app\code\core\Mage\Core\Model\App.php(343): Mage_Core_Model_App->_initModules()
#6 C:\wamp\www\magento-1.7.0.2\magento\app\Mage.php(683): Mage_Core_Model_App->run(Array)
#7 C:\wamp\www\magento-1.7.0.2\magento\index.php(87): Mage::run('', 'store')
#8 {main} 
```

按照步骤：- 转到 phpMyAdmin 然后在这个已经有 219 个表中选择你的数据库可用在这个更改周期列值 0000-00-00 中选择 coupon_aggregrated 表很容易解决你的问题。再见chillku ngcca

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:03:29.787

如果该脚本仅添加一个表格`catalog_product_entity_group_price`，那么您可以轻松跳过它。打开您的数据库，选择您的 Magento DB 并在`core_resource`表中搜索`catalog_setup`键。我相信你会有专栏`version`和`data_version`。

只需将这 2 列的值更新为 1.6.0.0.10 并再次清除缓存。

如果该脚本包含的不仅仅是创建表，那么您可以暂时注释掉负责创建表的部分。

# proxy - 与实体的关联（代理错误）

> ID：16079655
> 
> 赞同：1
> 
> 时间：2013-04-18T09:48:01.690
> 
> 标签：proxy, doctrine-orm, associations, zend-framework2, entities

我有以下实体：

*   用户
*   地址
*   国家

我的用户连接到地址和地址到国家。我有一个神奇的 __setter 和 __getter，当我使用 时`$addresses = $user->__get('addresses');`，它会检索我的地址。

倾倒：

```
array(1) {
  [0]=>
  object(stdClass)#463 (13) {
    ["__CLASS__"]=>
    string(19) "User\Entity\Address"
    ["inputFilter"]=>
    NULL
    ["addressid"]=>
    int(21)
    ["street"]=>
    string(9) "Lange heg"
    ["number"]=>
    int(19)
    ["addition"]=>
    string(1) "a"
    ["zipcode"]=>
    string(6) "7039CA"
    ["user"]=>
    string(16) "User\Entity\User"
    ["country"]=>
    string(50) "DoctrineORMModule\Proxy\__CG__\User\Entity\Country"
    ["creator_id"]=>
    int(9)
    ["creation_date"]=>
    string(8) "DateTime"
    ["last_modifier_id"]=>
    NULL
    ["last_modified_date"]=>
    NULL
  }
} 
```

只有我的国家没有得到正确的对象（来自国家实体）。我的联想：

用户实体：

```
/**
 * Id from user
 * 
 * @ORM\OneToMany(targetEntity="User\Entity\Address", mappedBy="user")
 * @var Address
 * @access protected
 */
protected $addresses; 
```

地址实体：

```
/** 
 * @ORM\ManyToOne(targetEntity="User\Entity\User", inversedBy="addresses")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="user_id", nullable=false, onDelete="cascade")
 * @var User[]
 * @access protected
 */
protected $user;

/**
 * @ORM\ManyToOne(targetEntity="User\Entity\Country", inversedBy="id")
 * @ORM\JoinColumn(name="country_id", referencedColumnName="id", nullable=false)
 * @var Country[]
 * @access protected
 */
protected $country; 
```

国家实体：

```
/**
 * Id from a country
 * 
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 * @ORM\OneToMany(targetEntity="User\Entity\Address", mappedBy="country")
 * @var int
 * @access protected
 */
protected $id; 
```

在我的地址实体中，它将 user_id 和 country_id 存储在数据库中。如何从我的用户那里获取我的国家/地区？不返回代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:15:02.540

我真的不确定这一点，但如果你得到国家，代理通常会返回一个国家实体。您是否尝试过实际获取国家/地区并查看您得到什么样的对象？

```
$addresses[0]->__get('country'); 
```

# php - 使用 PHP 的 Facebook 折扣系统

> ID：16079658
> 
> 赞同：1
> 
> 时间：2013-04-18T09:48:14.380
> 
> 标签：php, facebook, facebook-graph-api

在我的应用程序中，我想为在 facebook 上分享我的产品的用户提供折扣。对于这个问题，我没有任何在线解决方案。任何人都可以建议我如何实现这一点。如果您有任何在线资源，请提出建议。

# c++ - 如何在 C++ 中声明 byte*（字节数组）？

> ID：16079660
> 
> 赞同：0
> 
> 时间：2013-04-18T09:48:21.580
> 
> 标签：c++, bytearray

如何在 C++ 中声明 byte*（字节数组）以及如何在函数定义中定义为参数？

当我像下面这样声明时

函数声明：

```
int Analysis(byte* InputImage,int nHeight,int nWidth); 
```

收到错误：“字节”未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:49:58.977

表示一个字节的 C++ 类型是`unsigned char`（或其他符号风格`char`，但如果你想要它作为纯字节，`unsigned`可能就是你所追求的）。

但是，在现代 C++ 中，您不应该使用原始数组。`std::vector<unsigned char>`如果您的数组是运行时大小，则使用，或者如果`std::array<unsigned char, N>`您的数组是静态大小，则使用 (C++11) `N`。您可以通过 (const) 引用将这些传递给函数，如下所示：

```
int Analysis(std::vector<unsigned char> &InputImage, int nHeight, int nWidth); 
```

如果`Analysis`不修改数组或其元素，请改为执行以下操作：

```
int Analysis(const std::vector<unsigned char> &InputImage, int nHeight, int nWidth); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:49:39.280

C++中没有类型`byte`。你应该以前用过`typedef`。就像是

```
typedef std::uint8_t byte; 
```

在 C++11 中，或

```
typedef unsigned char byte; 
```

在 C++03 中。

# c# - 如何选择导出的项目模板出现在哪里？

> ID：16079661
> 
> 赞同：0
> 
> 时间：2013-04-18T09:48:23.613
> 
> 标签：c#, visual-studio-2012

希望是一个非常简单的问题：

我正在使用 Visual Studio 2012 并尝试将 Windows 窗体项目导出为模板。如何选择导出模板的显示位置？创建新项目时，在导出我的模板项目后，模板始终出现在“Visual C#”下。我想要它在“Visual C#->Windows”下。我如何让它出现在那里？

我相信答案很简单，会让我觉得自己像个白痴……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:40:51.773

找到了！刚刚将模板文件夹移动到 (VS2012 installpath)\Common7\IDE\ProjectTemplates\CSharp\Windows\1033\

# sql - 如何从 SQL Server 中的存储过程生成 csv 输出文件

> ID：16079666
> 
> 赞同：20
> 
> 时间：2013-04-18T09:48:41.627
> 
> 标签：sql, sql-server, stored-procedures

是否可以从 SQL Server 中的存储过程生成 csv 文件？我创建了我的存储过程，我想将一些结果存储为 csv，有人知道如何实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-11T15:41:48.577

我认为可以使用 bcp 命令。我也是这个命令的新手，但我关注[了这个链接](https://www.simple-talk.com/sql/database-administration/creating-csv-files-using-bcp-and-stored-procedures/)，它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:37:11.450

此脚本在任何表结构的输出窗口中将指定表中的行导出为 CSV 格式。希望该脚本对您有所帮助-

```
DECLARE 
      @TableName SYSNAME
    , @ObjectID INT

DECLARE [tables] CURSOR READ_ONLY FAST_FORWARD LOCAL FOR 
    SELECT 
          '[' + s.name + '].[' + t.name + ']'
        , t.[object_id]
    FROM (
        SELECT DISTINCT
              t.[schema_id]
            , t.[object_id]
            , t.name
        FROM sys.objects t WITH (NOWAIT)
        JOIN sys.partitions p WITH (NOWAIT) ON p.[object_id] = t.[object_id]
        WHERE p.[rows] > 0
            AND t.[type] = 'U'
    ) t
    JOIN sys.schemas s WITH (NOWAIT) ON t.[schema_id] = s.[schema_id]
    WHERE t.name IN ('<your table name>')

OPEN [tables]

FETCH NEXT FROM [tables] INTO 
      @TableName
    , @ObjectID

DECLARE 
      @SQLInsert NVARCHAR(MAX)
    , @SQLColumns NVARCHAR(MAX)
    , @SQLTinyColumns NVARCHAR(MAX)

WHILE @@FETCH_STATUS = 0 BEGIN

    SELECT 
          @SQLInsert = ''
        , @SQLColumns = ''
        , @SQLTinyColumns = ''

    ;WITH cols AS 
    (
        SELECT 
              c.name
            , datetype = t.name
            , c.column_id
        FROM sys.columns c WITH (NOWAIT)
        JOIN sys.types t WITH (NOWAIT) ON c.system_type_id = t.system_type_id AND c.user_type_id = t.user_type_id
        WHERE c.[object_id] = @ObjectID
            AND c.is_computed = 0
            AND t.name NOT IN ('xml', 'geography', 'geometry', 'hierarchyid')
    )
    SELECT 
          @SQLTinyColumns = STUFF((
            SELECT ', [' + c.name + ']'
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
        , @SQLColumns = STUFF((SELECT CHAR(13) +
            CASE 
                WHEN c.datetype = 'uniqueidentifier' 
                    THEN ' + '';'' + ISNULL('''' + CAST([' + c.name + '] AS VARCHAR(MAX)) + '''', ''NULL'')' 
                WHEN c.datetype IN ('nvarchar', 'varchar', 'nchar', 'char', 'varbinary', 'binary') 
                    THEN ' + '';'' + ISNULL('''' + CAST(REPLACE([' + c.name + '], '''', '''''''') AS NVARCHAR(MAX)) + '''', ''NULL'')' 
                WHEN c.datetype = 'datetime'
                    THEN ' + '';'' + ISNULL('''' + CONVERT(VARCHAR, [' + c.name + '], 120) + '''', ''NULL'')' 
                ELSE 
                ' + '';'' + ISNULL(CAST([' + c.name + '] AS NVARCHAR(MAX)), ''NULL'')'
            END
            FROM cols c
            ORDER BY c.column_id
            FOR XML PATH, TYPE, ROOT).value('.', 'NVARCHAR(MAX)'), 1, 10, 'CHAR(13) + '''' +')

    DECLARE @SQL NVARCHAR(MAX) = '    
    SET NOCOUNT ON;
    DECLARE 
          @SQL NVARCHAR(MAX) = ''''
        , @x INT = 1
        , @count INT = (SELECT COUNT(1) FROM ' + @TableName + ')

    IF EXISTS(
        SELECT 1
        FROM tempdb.dbo.sysobjects
        WHERE ID = OBJECT_ID(''tempdb..#import'')
    )
        DROP TABLE #import;

    SELECT ' + @SQLTinyColumns + ', ''RowNumber'' = ROW_NUMBER() OVER (ORDER BY ' + @SQLTinyColumns + ')
    INTO #import
    FROM ' + @TableName + ' 

    WHILE @x < @count BEGIN

        SELECT @SQL = STUFF((
        SELECT ' + @SQLColumns + ' + ''''' + '
        FROM #import 
        WHERE RowNumber BETWEEN @x AND @x + 9
        FOR XML PATH, TYPE, ROOT).value(''.'', ''NVARCHAR(MAX)''), 1, 1, '''')

        PRINT(@SQL)

        SELECT @x = @x + 10

    END'

    EXEC sys.sp_executesql @SQL

    FETCH NEXT FROM [tables] INTO 
          @TableName
        , @ObjectID

END

CLOSE [tables]
DEALLOCATE [tables] 
```

在输出窗口中，你会得到类似这样的东西（AdventureWorks.Person.Person）：

```
1;EM;0;NULL;Ken;J;Sánchez;NULL;0;92C4279F-1207-48A3-8448-4636514EB7E2;2003-02-08 00:00:00
2;EM;0;NULL;Terri;Lee;Duffy;NULL;1;D8763459-8AA8-47CC-AFF7-C9079AF79033;2002-02-24 00:00:00
3;EM;0;NULL;Roberto;NULL;Tamburello;NULL;0;E1A2555E-0828-434B-A33B-6F38136A37DE;2001-12-05 00:00:00
4;EM;0;NULL;Rob;NULL;Walters;NULL;0;F2D7CE06-38B3-4357-805B-F4B6B71C01FF;2001-12-29 00:00:00
5;EM;0;Ms.;Gail;A;Erickson;NULL;0;F3A3F6B4-AE3B-430C-A754-9F2231BA6FEF;2002-01-30 00:00:00
6;EM;0;Mr.;Jossef;H;Goldberg;NULL;0;0DEA28FD-EFFE-482A-AFD3-B7E8F199D56F;2002-02-17 00:00:00 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-03T02:10:37.177

您可以按照此[答案](https://dba.stackexchange.com/a/57281)中的建议使用 OPENROWSET 执行此操作。重新发布Slogmeister [Extrarodinare](https://dba.stackexchange.com/users/33226/slogmeister-extraordinaire)答案：

使用 T-SQL

```
INSERT INTO OPENROWSET ('Microsoft.ACE.OLEDB.12.0','Text;Database=D:\;HDR=YES;FMT=Delimited','SELECT * FROM [FileName.csv]')
SELECT Field1, Field2, Field3 FROM DatabaseName 
```

但是，有几个警告：

1.  您需要有可用的 Microsoft.ACE.OLEDB.12.0 提供程序。Jet 4.0 提供程序也可以工作，但它很古老，所以我改用了这个。

2.  .CSV 文件必须已经存在。如果您使用标题 (HDR=YES)，请确保 .CSV 文件的第一行是所有字段的分隔列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:34:09.047

找到了一个非常有用的链接。为此使用 SQLCMD 比使用存储过程解决这个问题要容易得多

[http://www.excel-sql-server.com/sql-server-export-to-excel-using-bcp-sqlcmd-csv.htm](http://www.excel-sql-server.com/sql-server-export-to-excel-using-bcp-sqlcmd-csv.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-11T18:48:10.677

我还使用了 bcp 并发现了一些其他有用的帖子，如果找到这个帖子，它们会对其他人有所帮助

不要用作 xp_cmdshell`VARCHAR(MAX)`的`@sql`or`@cmd`变量；你会得到和错误

> 消息 214，级别 16，状态 201，过程 xp_cmdshell，第 1 行过程需要“varchar”类型的参数“command_string”。

[http://www.sqlservercentral.com/Forums/Topic1071530-338-1.aspx](http://www.sqlservercentral.com/Forums/Topic1071530-338-1.aspx)

用于`NULLIF`获取 csv 文件的空白而不是 a `NUL`（可在十六进制编辑器或 notepad++ 中查看）。我在`SELECT`bcp 的语句中使用了它

[如何使 Microsoft BCP 导出空字符串而不是 NUL 字符？](https://stackoverflow.com/questions/12588149/how-to-make-microsoft-bcp-export-empty-string-instead-of-a-nul-char)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-11T04:54:36.097

我已经尝试过了，对我来说效果很好：

```
sqlcmd -S servername -E -s~ -W -k1 -Q  "sql query here" > "\\file_path\file_name.csv" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-13T22:01:46.997

只是为了回答最终奏效的本地方式，所有内容都必须转换为 varchar

```
ALTER PROCEDURE [clickpay].[sp_GetDocuments] 

@Submid bigint

AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
   DECLARE @raw_sql varchar(max)

DECLARE @columnHeader VARCHAR(max)
SELECT @columnHeader = COALESCE(@columnHeader+',' ,'')+ ''''+column_name +'''' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Documents'

DECLARE @ColumnList VARCHAR(max)
SELECT @ColumnList = COALESCE(@ColumnList+',' ,'')+ 'CAST('+column_name +' AS VARCHAR)' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Documents'

SELECT @raw_sql = 'SELECT '+ @columnHeader +' UNION ALL SELECT ' + @ColumnList + ' FROM ' + 'Documents where Submid = ' +  CAST(@Submid AS VARCHAR)

-- Insert statements for procedure here
exec(@raw_sql)
END 
```

# mysql - JSF MySQL 枚举类型

> ID：16079670
> 
> 赞同：1
> 
> 时间：2013-04-18T09:48:45.440
> 
> 标签：mysql, jsf, enums

我有一个带有表的 MySQL 数据库，在该表中我有一个 Enum 列，如下所示：

```
enum('mmol/l','pmol/l','g/l','mmol/mol','cm','kg','st','l','mg/l','mg/mmol',
     'micromol/l','ml/min','poäng','%','mm Hg','JDF enheter','ak-index') 
```

我有一个文本字段，用户写入上述值之一，如果用户正确写入字符串，我可以毫无问题地向该列插入和取出数据。

但是不能保证用户知道您可以在该字段中写入哪些枚举值，所以无论如何要取出您可以写入数据库的枚举值，还是我需要对其进行硬编码？

# d3.js - QtWebView VS D3.js

> ID：16079674
> 
> 赞同：3
> 
> 时间：2013-04-18T09:48:59.940
> 
> 标签：d3.js, qtwebkit

所以，我有一个我正在做的学校项目，我需要一个可视化工具来显示我正在开发的软件正在完成的一些处理的结果。

由于我将 Qt 用于该软件，因此我想在 QtWebView 小部件之上使用[D3.js。](http://d3js.org)我目前正在使用[Qt “Fancy browser” 示例测试](http://harmattan-dev.nokia.com/docs/library/html/qt4/webkit-fancybrowser.html)[D3.js](http://christopheviau.com/d3_tutorial/)的简单示例。我知道当我在 index.html 文件中添加 Javascript 时，它可以在 Fancy 浏览器上运行。出于某种原因，D3 脚本中使用的 Javascript 没有。

问题是，我对 Qt 和 D3.js 都很陌生，因此我不知道我是否遗漏了有关设置的某些内容以使其成为可能，或者它是否只是不正确的代码。

我对这种情况有一些疑问： - QtWebView 甚至支持 HTML 文件中的 SVG 元素吗？- 我注意到必须将 jQuery.js 添加到 Fancy 浏览器项目的资源中，以便应用程序对其进行评估。据我所知，这样做是为了使用 jQuery 对页面内容进行操作。难道是我必须对 D3 做类似的事情吗？如果是这样，怎么做？- 很可能什么都没有出现，因为我给 D3 的指令实际上并没有在 HTML 文件中产生任何东西，我该如何解决这个问题？

我尝试在网上搜索有关我想要实现的目标的信息，但周围没有那么多资源。我在网上找到了一些关于 QtWebkit 和 Javascript 的东西，但不幸的是，它对我没有多大帮助。

最后一点：在我正在使用的机器上，我无法访问网络，因为它没有外部访问权限。此外，我什至无法安装用于 DOM 检查的 Webkit 浏览器（如 Chrome 或其他东西），所以它并没有变得更简单。:S

任何帮助将不胜感激，谢谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:21:42.733

因此，通过调查这个问题，我得到了以下结论：

*   QtWebView*支持*HTML 中的 SVG 元素。我认为这至少从 Qt V4.7 开始是正确的，因为它是我目前正在使用的；
*   仍然不知道为什么 d3.min.js 有效而“常规” d3.js 无效；
*   D3.js 不必添加到 Qt 的资源中，在 HTML 文件中调用就足够了。

希望这可以帮助任何人找到主题。

# iphone - Iphone：将音频创建为文件时找不到音频资产轨道，在应用程序中运行时

> ID：16079675
> 
> 赞同：3
> 
> 时间：2013-04-18T09:49:01.470
> 
> 标签：iphone, ios, avmutablecomposition

当我选择音频作为资产时，我注意到在所选资产中找不到音频资产轨道。即“**音频在运行时创建为文件**”（表示在应用程序中创建并保存在文档目录中）。

我已经使用了下面链接中的代码......当音频被选为项目中的资源但在我的情况下不是它的工作（**我的案例：音频在应用程序中创建为文件并保存在文档目录中。**）

[https://stackoverflow.com/a/12630437/1328096](https://stackoverflow.com/a/12630437/1328096)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T07:38:20.657

您可以使用此语句检查视频的声音

```
if([[songAsset tracksWithMediaType:AVMediaTypeAudio] firstObject]==NULL)
{
    NSLog(@"Sound is not Present");
}
else
{
    NSLog(@"Sound is Present");
    //You will initalise all things
    AVAssetTrack *sourceAudioTrack = [[songAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

} 
```

# c++ - 创建自定义按钮

> ID：16079677
> 
> 赞同：1
> 
> 时间：2013-04-18T09:49:10.787
> 
> 标签：c++, qt, qaction

我想创建一个没有任何样式的自定义按钮，它只显示一个 .png 图像。

我尝试使用 setIcon 方法创建一个 pushButton，但这使用了 pushButton 银色样式，我只想显示图像并将其作为按钮。

另外，我尝试使用 QAction

```
newAct = new QAction(QIcon(":/new/prefix1/images/appbar.close.png"), 
```

但是，如果没有工具栏，这不会显示任何内容。

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:55:04.853

也许这段代码可以帮助你。创建一个 QPushButton，为其设置一个图标并使用以下代码：

```
YourQPushButton->setFlat(true); 
```

**更新 ：**

**MyPushButton.h：**

```
#ifndef MYPUSHBUTTON_H
#define MYPUSHBUTTON_H

#include <QLabel>

class MyPushButton : public QLabel
{
    Q_OBJECT
public:
    explicit MyPushButton(QWidget *parent = 0);

signals:
    void clicked();

protected:
    void mouseReleaseEvent(QMouseEvent *ev);

};

#endif // MYPUSHBUTTON_H 
```

**我的按钮.cpp**

```
void MyPushButton::mouseReleaseEvent(QMouseEvent *ev)
{
    emit clicked();
} 
```

**如何使用 ：**

```
MyPushButton btn;
btn.setPixmap(QPixmap(":/rm.png"));
QObject::connect(&btn, SIGNAL(clicked()), qApp, SLOT(quit()));
btn.show(); 
```

您甚至可以将此功能添加到`MyPushButton`类中以提高工作效率:)

```
void MyPushButton::setIcon(QPixmap px, int w, int h)
{
    setPixmap(px.scaled(w, h));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:14:14.540

有2个解决方案：

1.  子类 QLabel 发出 clicked() 信号并将您的图像加载到该子类
2.  您可以将样式表设置为 QPushButton 类似这样[How to change QPushButton icon using stylesheets in Qt app](https://stackoverflow.com/questions/2675925/how-to-change-qpushbutton-icon-using-stylesheets-in-qt-app)

如果你愿意继承 QLabel - 这里有一个类：

头文件 qspoilerlabel.h：

```
#ifndef QSPOILERLABEL_H
#define QSPOILERLABEL_H

#include <QLabel>
#include <QEvent>

class QSpoilerLabel : public QLabel
{
    Q_OBJECT
public:
QSpoilerLabel( const QString & text, QWidget * parent = 0 );
QSpoilerLabel(){}

signals:
    void clicked();

public slots:
    void slotClicked();

protected:
    void mouseReleaseEvent ( QMouseEvent * event );
};

#endif // QSPOILERLABEL_H 
```

来源 qspoilerlabel.cpp：

```
#include "qspoilerlabel.h"
QSpoilerLabel::QSpoilerLabel( const QString & text, QWidget * parent )
:QLabel(parent)
{
    connect( this, SIGNAL( clicked() ), this, SLOT( slotClicked() ) );    
}

void QSpoilerLabel::slotClicked()
{
//qDebug()<<"Clicked";
}

void QSpoilerLabel::mouseReleaseEvent ( QMouseEvent * event )
{
    emit clicked();
} 
```

您可以使用方法将图像加载到标签`setPixmap`。它看起来像这样：

```
label->setPixmap((QPixmap::fromImage(QImage(":/new/prefix1/images/appbar.close.png")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:06:37.267

在 QtCreator 你可以试试这个：

1.  你用你的 png 图像制作一个标签。
2.  在标签顶部放置一个带有样式表“背景：透明；边框：无；”的 QPushButton

像按钮一样工作，看起来像图像；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T09:39:05.343

首先，添加资源文件，创建前缀并添加您需要的文件。在设计器中，右键单击按钮并更改样式表。

```
 background: url(":\filePath"); 
```

或者，您可以这样做，添加资源（是的，它会显示它是无效的样式表，但不要担心）：然后通过在 url 之前添加关键字背景来编辑代码，使其看起来像这样

```
 background: url(":\filePath"); 
```

其中文件路径是您决定使用添加资源选项时自动检测到的资源文件的路径。

# sql-server-2012 - 在 SSIS 数据源中切换上下文

> ID：16079681
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:49:28.923
> 
> 标签：sql-server-2012, ssis

要求：
我有一个 SSIS 项目，它将在 SQL Server 中的数据上运行，可能使用集成身份验证登录到 SQL Server。该项目包括一个部分，允许最终用户添加选择查询作为一个数据流的源。（该产品允许用户在配置文件中添加数据分类和过滤类型规则）。
我希望用户提供的那些查询在具有只读访问权限的受限上下文中运行。一定不可能有人通过在他们的查询中 添加`DELETE`或来破坏数据库。`DROP`

第一遍解决方案：
在数据库上创建一个只读用户，用于`EXECUTE AS ... WITH NO REVERT`将查询的上下文限制为只读用户。不幸的是，这并不完全有效。SSIS 在数据源组件中使用预准备语句，`WITH NO REVERT`SQL Server 不允许在预准备语句中使用。

问题：
有没有办法强制 SSIS 使用临时查询来代替 OLEDB 数据源组件中的准备好的语句？
或...是否有另一种方法可以强制 SSIS 更改数据源组件的执行上下文？

我还有另一个解决方案：使用脚本组件源。脚本组件可以通过多种方式设置用户上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:03:19.683

stackoverflow 上有一些答案建议将其包装在 BEGIN TRAN / ROLLBACK TRAN 中。这可以在单独的 SQL 任务中，消除通过偷偷注入禁用它们的能力。但是他们仍然可以将 DROP DATABASE 注入您的数据流中。没有办法回滚那个。

您是否检查过 DML 是否甚至在数据流源中运行？

我确实质疑这个架构......在 SSIS 中运行用户定义的查询？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:41:22.000

您可以通过使用选项来使用`ad-hoc`查询。您可以创建一个变量并输入您的 sql 查询并在 OLEDB 源组件中使用它。使用 XML 配置并将变量添加到其中。因此，如果您更改将反映的 XML在 SSIS 期间。但是 SSIS 严重依赖。即使在执行之前，SSIS 也会验证元数据。如果您更改 XML 中的查询（例如更改列名），那么 SSIS 将发现元数据不匹配，并且包将`OLEDB source``SQL Command from Variable``query``runtime``Metadata``fail`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:14:28.940

我为此确定的最终解决方案是拥有一个脚本源组件，该组件将用户提供`SELECT`的`EXECUTE AS user WITH NO REVERT`. 我确信使用权限结构来防止未授权的操作比使用事务更好。

我创建了两个连接管理器。一个（称为 connection_RO）是一个 ADO.NET 连接管理器，它只由执行用户提供的查询的组件使用。另一个 (connection_RW) 用于其他一切，包括转换来自用户提供的查询的数据并将其写回。

有一个脚本源组件执行用户提供的查询。它在查询前加上 EXECUTE AS ... 子句，以将用户锁定在只读上下文中。

下一个要解决的问题是默认情况下所有连接都是池化的，当您选择以前在池中使用过的连接时，框架会发送一个`sp_reset_connection`. 这会引发异常，因为 SQL Server 将其视为提升权限的尝试。因此，connection_RO 连接管理器必须配置为没有池。

最终结果是我可以运行用户提供的查询，确信用户不会恶意或意外造成损害。

# c# - 如何检查 URL 是否有效

> ID：16079685
> 
> 赞同：3
> 
> 时间：2013-04-18T09:49:38.910
> 
> 标签：c#, asp.net

我在该用户中有一个文本框输入 URL，但是如果想在页面呈现时检查该 URL，那么该怎么办？

这是我的代码：

```
protected void btnRender_Click(object sender, EventArgs e)
{
    string strResult = string.Empty;
    WebResponse objResponse;
    WebRequest objRequest = System.Net.HttpWebRequest.Create(urltxt.Text);
    objResponse = objRequest.GetResponse();
    using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
    {
        strResult = sr.ReadToEnd();
        sr.Close();
    }
    strResult = strResult.Replace("<form id='form1' method='post' action=''>", "");
    strResult = strResult.Replace("</form>", "");          
    TextBox1.Text = strResult.Trim();
    div.InnerHtml = strResult.Trim();
} 
```

我有这个代码来检查 URL 是否有效，所以你能告诉我在哪里调用它吗？{如果我还想检查 https 那么我该怎么做这个代码}

```
 protected bool CheckUrlExists(string url)
    {
        // If the url does not contain Http. Add it.
      // if i want to also check for https how can i do.this code is only for http not https
        if (!url.Contains("http://"))
        {
            url = "http://" + url;
        }
        try
        {
            var request = WebRequest.Create(url) as HttpWebRequest;
            request.Method = "HEAD";
            using (var response = (HttpWebResponse)request.GetResponse())
            {
                return response.StatusCode == HttpStatusCode.OK;
            }
         }
         catch
         {
             return false;
         }
     } 
```

文本框名称是 urltxt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:07:03.153

试试下面的方法，它会帮助你....

```
 protected void btnRender_Click(object sender, EventArgs e)
        {
            if(CheckUrlExists(urltxt.Text))
            {
                string strResult = string.Empty;
                WebResponse objResponse;
                WebRequest objRequest = System.Net.HttpWebRequest.Create(urltxt.Text);
                objResponse = objRequest.GetResponse();
                using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
                {
                    strResult = sr.ReadToEnd();
                    sr.Close();
                }
                strResult = strResult.Replace("<form id='form1' method='post' action=''>", "");
                strResult = strResult.Replace("</form>", "");
                TextBox1.Text = strResult.Trim();
                div.InnerHtml = strResult.Trim();
            }
            else
            {
                MessageBox.Show("Not a Valid URL");
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:57:32.257

试试这个 uriName（你想要的 URI）

```
 bool Uriresult = Uri.TryCreate(uriName, UriKind.Absolute, out uriResult) && uriName.Scheme == Uri.UriSchemeHttp; 
```

根据您的代码

```
string uriName = urltxt.Text; bool Uriresult = Uri.TryCreate(uriName, UriKind.Absolute, out uriResult) && uriName.Scheme == Uri.UriSchemeHttp; 
```

# ios - 拆分视图 - iPad

> ID：16079693
> 
> 赞同：0
> 
> 时间：2013-04-18T09:49:54.503
> 
> 标签：ios, objective-c, uisplitviewcontroller, ipad

我正在以编程方式为 iPad 实现拆分视图控制器。这是我在 didFinishLaunching 中使用的代码：

```
self.window = [[UIWindow alloc]initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

MasterViewController *masterViewController = [[MasterViewController alloc] init];
UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

DetailedNewsViewController *detailViewController = [[DetailedNewsViewController alloc] init];
UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

masterViewController.detailViewController = detailViewController;

self.splitViewController = [[UISplitViewController alloc] init];
self.splitViewController.delegate = detailViewController;

self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];

self.window.rootViewController = self.splitViewController;
[self.window makeKeyAndVisible]; 
```

但是当我运行这段代码时。MasterView 显示正确，它是一个 TableViewController。但是 DetailView 没有显示，它只是一个黑屏，我尝试以编程方式编写 DetailView 中使用的变量并将它们添加到视图中并且它有效。

为什么对于 MasterViewController 它直接从情节提要中获取，而对于 DetailViewController 我必须手动编写代码？而且手动编写真的很难我已经在情节提要中完成了所有操作

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:55:42.467

不需要`masterViewController.detailViewController = detailViewController;`，而是使用`self.splitViewController.viewControllers = [NSArray arrayWithObjects: masterNavigationController, detailNavigationController,nil];`

# ruby - 使用另一个表中的值从一个表中选择一列

> ID：16079698
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:00.057
> 
> 标签：ruby, oracle, rubygems, oracle10g, oracle11g

我有如下列的表格：

**员工：**

```
Id number(10),  
Name varchar2(10) 
```

**部门：**

```
Id number(10),
Name varchar2(10),
Emp_ids varchar2(10) 
```

表中的值分别为：

**员工：**

```
1,abc,111
2,def,222
3,xyz,333 
```

**部门：**

```
111,development,'1,2'
222,testing,'2,3' 
```

我的问题是我需要使用`emp_ids`Department 表中的列选择员工姓名。

例子：

```
SELECT names FROM employee 
 WHERE id in (SELECT emp_ids FROM department WHERE name = 'development'); 
```

由于`emp_ids`是 varchar2 数据类型，我无法执行上述命令。

注意：当我使用`Activerecord Base Connection`从 Ruby 连接我的 Oracle DB 时，我也在标签中包含了 ruby​​。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:09:56.040

**您的数据模型设计不当**。您*可以*构建一个可以工作的查询，但它会是：

1.  比需要的更复杂，
2.  随着数据规模的增长，最终效率会降低，
3.  容易出现不一致，因为您无法正确定义引用约束，
4.  最肯定是供应商特定的。

我建议您使用可靠的数据模型。你有一个NN关系，你**需要**三个表：

```
Employee (Id number(10) primary key, Name varchar2(10))
Department (Id number(10) primary key,Name varchar2(10))

Employee_department (
   emp_id number(10) references employee (id),
   dep_id number(10) references department(id),
   constraint pk_emp_dept primary key (emp_id, dep_id)
) 
```

然后，您的查询将完美、高效地工作，并且您不会因为数据不一致而在晚上失眠。

```
SELECT names 
  FROM employee 
 WHERE id in (SELECT ed.emp_id 
                FROM department d
                JOIN employee_department ed ON d.id = ed.dep_id
               WHERE d.name = 'development'); 
```

作为数据库开发人员，您的两个主要目标是：

*   确保数据正确保存到数据库中。没有什么比数据更重要了。如果您不能信任您的数据，那么数据库有什么用？消除不一致是重中之重。
*   制作一个没有错误的应用程序。如果你的模型合适，你的查询会更简单，你会犯更少的错误，你的应用程序会更快，通常更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:11:36.400

我建议你改变你的表结构。

**员工：**

```
 id 
   name
   dept_id 
```

**部门：**

```
 id 
   name 
```

# c# - 使用 mono 开发的 C# 控制台应用程序可以在 Windows 上运行，但不能在 ubuntu 上运行

> ID：16079699
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:00.450
> 
> 标签：c#, linux, mono, xamarin, ubuntu-12.10

我编写了一个 C# 项目，使用 Xamarin Studio 从指纹设备获取出勤记录。

当我从菜单中单击 Run => Run with => Mono 3.0.6 时，代码运行，当我双击项目调试文件夹中的 exe 文件时，它也运行。但是，当我尝试使用以下命令在安装了单声道运行时的 Ubuntu 机器上运行应用程序时

```
mono MyApplication.exe 
```

我得到以下输出

```
System.DllNotFoundException: FKAttend
at (wrapper managed-to-native) FingerPrint.mdlPublic:FK_ConnectNet
(int,string,int,int,int,int,int)
at testCSFB.MainClass.cmdOpenComm () [0x00000] in <filename unknown>:0 
at testCSFB.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.DllNotFoundException: FKAttend
at (wrapper managed-to-native) FingerPrint.mdlPublic:FK_ConnectNet   (int,string,int,int,int,int,int)
at testCSFB.MainClass.cmdOpenComm () [0x00000] in <filename unknown>:0 
at testCSFB.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

`FKAttend`是`.dll`文件的名称，但我认为它嵌入在 . `exe`文件，因为它完美地在 Windows 上运行。

有谁知道为什么会发生这个问题？

# flot - 同一画布上的浮动饼图 + 条形图

> ID：16079701
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:01.580
> 
> 标签：flot, bar-chart, pie-chart

你们中有人知道如何使用 flot 在条形图旁边放置饼图吗？我希望他们使用相同的数据。

我尝试启用在系列选项中显示饼图，但条形图为空白。

```
$.plot("#placeholder", data, {
                series: {
                    bars: {
                        barWidth: 0.2,
                    },
                    stack: null,
                    pie: {
                        show: true
                    }
                },
                yaxis: {
                    min: 0,
                    tickFormatter: plnFormatter
                },
                xaxis: {
                    mode: "categories",
                    tickLength: 0,
                    autoscaleMargin: 0.1
                },
                grid: {
                    borderWidth: 0,
                    hoverable: true,
                    clickable: true
                }                     
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T02:32:43.857

我也有同样的问题，最后我在画布上放了一个 div，注意 css 样式：

```
<div id="error-pie-chart" style="height:120px;width:120px;position: absolute;left:230px;top:50px;z-index:1;"></div> 
```

然后用flot在这个div上画饼图，就可以了！

# php - 有没有办法避免最后出现空的 else { }？

> ID：16079706
> 
> 赞同：2
> 
> 时间：2013-04-18T09:50:14.960
> 
> 标签：php, while-loop, do-while

我正在学习 PHP 并尝试编写一个小骰子循环。我想知道如何用更合适的语法重写它：

```
<?php
    $rollcount = 1;

    do {
        $v = rand(1, 6);
        $w = rand(1, 6);
        $rollcount++;
        echo "<p>$v, $w</p>";
    }
    while ($v != $w);

    if ($v == $w) {
        echo "<p>It took $rollcount turns until double!</p>";
    } else {}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:54:57.870

```
$rollcount = 0;
while(true){
    ++$rollcount;
    $v = rand(1,6);
    $w = rand(1,6);
    echo "<p>".$v.", ".$w."</p>";
    if($v === $w){
        break;
    }
}
echo "<p>It took ".$rollcount." turns until double!</p>"; 
```

## 解释

由于目标是实现双倍，骰子可以继续滚动，直到达到条件。
`while`继续处理直到条件为假，在这种情况下，条件永远不会为假，因为我们将`boolean true`值提供给`while(true)`循环。
PHP（和许多其他语言）提供的一些执行控制结构`break, continue`是最常见的。
`break`允许您跳出循环，并且可以在循环内达到某个条件时执行它
`continue`另一方面不会让您跳出循环，而是跳到循环的下一次迭代，所以这意味着一旦`continue`在循环中遇到，[循环内]之后的所有其他语句都会被跳过，循环移动到下一次迭代。

在这种情况下，一旦我们有了双倍，我们就**退出**循环并打印出达到双倍所需的滚动数。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:51:26.110

只需删除`else{}`

```
if ($v == $w) {
   echo "<p>It took $rollcount turns until double!</p>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:56:10.483

只需删除其他。就是这么简单。

# c# - Crystal 报表中的字段编号无效

> ID：16079708
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:27.293
> 
> 标签：c#, crystal-reports, crystal-reports-2008

使用 C# 加载水晶报告时，出现“加载报告失败”等错误，内部错误为“无效字段编号”。以下代码行出现错误

```
 oReportDocument.Load(Server.MapPath(Convert.ToString(objHashTable["RequestFile"]))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:54:16.600

加载报告失败的解决方法如下

1.  右键单击报告并选择验证数据库以更新您的报告并用此报告替换以前的报告
2.  当您的报告文件名拼写不匹配或文件不存在时。

# java - FOP - 如何避免大量页面序列的高内存消耗？

> ID：16079709
> 
> 赞同：2
> 
> 时间：2013-04-18T09:50:27.607
> 
> 标签：java, pdf, xsl-fo, apache-fop

即使页面不包含前向引用并且 <page-sequence> 块非常小，如何避免 FOP 消耗越来越多的内存？

这是一个测试 java 程序，它使用手工制作的 FO 为 FOP 提供服务，它只是一遍又一遍地重复相同的非常基本的页面序列：

Fo2Pdf.java

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.OutputStream;
import java.io.PipedInputStream;

import javax.xml.transform.Result;
import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.sax.SAXResult;
import javax.xml.transform.stream.StreamSource;

import org.apache.fop.apps.FOUserAgent;
import org.apache.fop.apps.Fop;
import org.apache.fop.apps.FopFactory;
import org.apache.fop.apps.MimeConstants;
import org.xml.sax.helpers.DefaultHandler;

public class Fo2Pdf implements Runnable {

private PipedInputStream in;

public Fo2Pdf(PipedInputStream in)  {
    this.in = in;
}

@Override
public void run() {
    // instantiate Fop factory
    FopFactory fopFactory = FopFactory.newInstance();
    fopFactory.setStrictValidation(false);

    // Setup output
    OutputStream out = null;
    try {
        out = new FileOutputStream("output.pdf");
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    try {
        // Setup user agent
        FOUserAgent userAgent = fopFactory.newFOUserAgent();
        userAgent.setConserveMemoryPolicy(true);

        Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, userAgent, out);

        // Setup JAXP using identity transformer
        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer(); 

        // Setup input stream
        Source src = new StreamSource(in);

        // Resulting SAX events (the generated FO) must be piped through to FOP
        DefaultHandler defaultHandler = (DefaultHandler) fop.getDefaultHandler();
        Result res = new SAXResult(defaultHandler);

        // Start FOP processing
        transformer.transform(src, res);

    } catch (Exception e) {
        e.printStackTrace();
    }
    }
} 
```

FeedFo.java

```
import java.io.IOException;
import java.io.PipedInputStream;
import java.io.PipedOutputStream;

public class FeedFo {

public static void main(String args[]) throws IOException, InterruptedException {

    // instantiate and connect the pipes
    PipedInputStream in = new PipedInputStream();
    PipedOutputStream out = new PipedOutputStream(in);

    // Fo2Pdf - instantiate and start consuming the stream
    Fo2Pdf fo2Pdf = new Fo2Pdf(in);
    Thread fo2PdfThread = new Thread(fo2Pdf, "Fo2Pdf");
    fo2PdfThread.start();

    /*
     <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
        <fo:layout-master-set>
            <fo:simple-page-master master-name="A4" page-width="210mm" page-height="297mm">
                <fo:region-body/>
            </fo:simple-page-master>
        </fo:layout-master-set>

     */
    out.write(("<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"><fo:layout-master-set>" +
            "<fo:simple-page-master master-name=\"A4\" page-width=\"210mm\" page-height=\"297mm\">" +
            "<fo:region-body/></fo:simple-page-master></fo:layout-master-set>").getBytes());

    for(int i=0; i<100000000; i++) {

        // sleep 3 seconds every 50000 page-sequences to make sure the consumer is faster than the producer
        if(i % 50000 == 0) {
            Thread.currentThread().sleep(3000);
        }

        /*
         <fo:page-sequence xmlns:fo="http://www.w3.org/1999/XSL/Format" master-reference="A4">
            <fo:flow flow-name="xsl-region-body">
                <fo:block/>
            </fo:flow>
        </fo:page-sequence>
         */
        out.write(("<fo:page-sequence xmlns:fo=\"http://www.w3.org/1999/XSL/Format\" master-reference=\"A4\"><fo:flow flow-name=\"xsl-region-body\"><fo:block/></fo:flow></fo:page-sequence>").getBytes());
    }

    out.write("</fo:root>".getBytes());
    out.flush();
    out.close();

    fo2PdfThread.join();

    System.out.println("Exit");
}
} 
```

正如您所注意到的，一旦页面序列关闭，FOP 就会将 PDF 写入磁盘。这意味着页面（应该？）不被保存在内存中。但是，内存只是不断增长和增长。对于 256MB 的堆大小，生成停止在大约 150000 个页面序列处。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:24:34.090

我怀疑，尽管有你的`sleep`电话，你的生产者的工作速度比你的消费者快得多，而且你的管道流正在填满你的内存。我能想到两种方法来解决这个问题：

选项 1 是使用[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)而不是管道流。

选项 2 是添加一个`public boolean pipeIsFull()`方法`Fo2Pdf`，如果`in.available()`超过，则返回 true，我不知道，2mb。然后你的主 for 循环将休眠 500 毫秒，或者如果`pipeIsFull()`是真的。

此外，减少内存消耗的一种方法是

```
byte[] bytes = ("<fo:page-sequence xmlns:fo=\"http://www.w3.org/1999/XSL/Format\" master-reference=\"A4\"><fo:flow flow-name=\"xsl-region-body\"><fo:block/></fo:flow></fo:page-sequence>").getBytes();
for(int i=0; i<100000000; i++) {
    ...
    out.write(bytes);
} 
```

我不知道这会产生多大的影响（它会减少几 GB，但与 Fo2Pdf 使用的相比，这可能是花生），但它不会受到伤害。

# json - 使用 validictory 的 json 模式验证

> ID：16079714
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:31.823
> 
> 标签：json, validation, jsonschema

我使用 JSON 模式和 valditory 作为解析器/验证器收到以下模式验证错误。模式已使用 jsonschema.net 自动生成（使用相同的 JSON 数据）

```
validictory.validator.FieldValidationError: Value '{"bp": [{"category": "bp", 
"created": "2013-03-08T09:14:48.148000", "value": 147.0, "day": "2013-03-11T00:00:00", 
 "value2": 43.0, "id": "dc049c0e-d19a-4e3e-93ea-66438a239712", "unit": "mmHg"}]}' 
 for field '_data' is not of type object 
```

代码：

```
import json
import validictory

data = json.dumps({'bp': [{'category': 'bp',
         'created': '2013-03-08T09:14:48.148000',
         'day': '2013-03-11T00:00:00',
         'id': 'dc049c0e-d19a-4e3e-93ea-66438a239712',
         'unit': 'mmHg',
         'value': 147.0,
         'value2': 43.0}]})

schema = {
    "type":"object",
    "properties":{
        "bp": {
            "type":"array",
            "required":False,
            "items":
                {
                    "type":"object",
                    "required":False,
                    "properties":{
                        "category": {
                            "type":"string",
                            "default": "bp",
                            "required":False
                        },
                        "created": {
                            "type":"string",
                            "default": "2013-03-08T09:14:48.148000",
                            "required":False
                        },
                        "day": {
                            "type":"string",
                            "default": "2013-03-11T00:00:00",
                            "required":False
                        },
                        "id": {
                            "type":"string",
                            "default": "dc049c0e-d19a-4e3e-93ea-66438a239712",
                            "required":False
                        },
                        "unit": {
                            "type":"string",
                            "default": "mmHg",
                            "required":False
                        },
                        "value2": {
                            "type":"number",
                            "default":43,
                            "required":False
                        },
                        "value": {
                            "type":"number",
                            "default":147,
                            "required":False
                        }
                    }
                }

        }
    }
}

validictory.validate(data,schema) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:55:05.720

我不熟悉该库，但您似乎正在验证 JSON 文本，而不是数据本身 - 所以验证器正在查看一个字符串，而架构表明数据应该是一个对象。

如果不是`data = json.dumps({...})`，你刚刚拥有`data = {...}`呢？

# c++ - 优化一个简单的 2D Tile 引擎（+潜在的错误修复）

> ID：16079715
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:34.597
> 
> 标签：c++, optimization, graphics, 2d, tile-engine

## 前言

*是的，这里有很多要介绍的内容......但我会尽我所能保持这个组织得井井有条、内容丰富且直截了当！*

使用 C++ 中的[HGE 库](http://hge.relishgames.com/)，我创建了一个简单的平铺引擎。
到目前为止，我已经实现了以下设计：

*   一个`CTile`类，表示 a 中的单个图块`CTileLayer`，包含行/列信息以及一个`HGE::hgeQuad`（存储顶点、颜色和纹理信息，[请参阅此处](http://hge.relishgames.com/doc/index.html?hgedata_quad.html)了解详细信息）。
*   一个`CTileLayer`类，表示二维“平面”瓦片（存储为一维`CTile`对象数组），包含行/列数、X/Y 世界坐标信息、瓦片像素宽度/高度信息，以及图层的整体宽度/高度（以像素为单位）。

A`CTileLayer`负责渲染在虚拟相机“视口”边界内完全或部分可见的任何图块，并避免对超出此可见范围的任何图块执行此操作。在创建时，它会预先计算要存储在每个`CTile`对象中的所有信息，因此引擎的核心有更多的呼吸空间，并且可以严格专注于渲染循环。当然，它还处理每个包含的 tile 的正确释放。

* * *

## 问题

我现在面临的问题基本上归结为以下架构/优化问题：

1.  在我的渲染循环中，即使我没有渲染任何超出可见范围的图块，我仍然会***循环***遍历所有图块，这似乎对较大的图块地图（即超过 100x100 行/ 64x64 平铺尺寸的列仍会将帧速率降低 50% 或更多）。
2.  最终，我打算创建一个花哨的瓷砖地图编辑器来配合这个引擎。
    但是，由于我将所有二维信息存储在一个或多个一维数组中，所以我不知道在没有一些*主要*性能影响的情况下实现某种矩形选择和复制/粘贴功能的可能性有多大—— - 涉及每帧循环遍历每个图块两次。*然而，如果我使用 2D 数组，FPS 下降会稍微少一些但更普遍！*

## 漏洞

如前所述...在我的`CTileLayer`对象渲染代码中，我已经根据它们是否在可视范围内优化了要绘制的图块。这很好用，对于较大的地图，我注意到只有 3-8 FPS 下降（与没有此优化的 100+ FPS 下降相比）。

但我认为我计算的范围不正确，因为在地图滚动到一半后，您可以开始看到没有渲染图块的间隙（在最顶部和最左侧），好像剪裁范围的增加速度比相机可以移动（即使它们都以相同的速度移动）。

沿着 X 轴和 Y 轴，这个间隙的大小会逐渐增加，最终在大地图上占据屏幕顶部和左侧的近一半。

* * *

## 代码

```
//
// [Allocate]
// For pre-calculating tile information
// - Rows/Columns   = Map Dimensions (in tiles)
// - Width/Height   = Tile Dimensions (in pixels)
//
void CTileLayer::Allocate(UINT numColumns, UINT numRows, float tileWidth, float tileHeight)
{
    m_nColumns = numColumns;
    m_nRows = numRows;

    float x, y;
    UINT column = 0, row = 0;
    const ULONG nTiles = m_nColumns * m_nRows;
    hgeQuad quad;

    m_tileWidth = tileWidth;
    m_tileHeight = tileHeight;
    m_layerWidth = m_tileWidth * m_nColumns;
    m_layerHeight = m_tileHeight * m_nRows;

    if(m_tiles != NULL) Free();
    m_tiles = new CTile[nTiles];

    for(ULONG l = 0; l < nTiles; l++)
    {
        m_tiles[l] = CTile();
        m_tiles[l].column = column;
        m_tiles[l].row = row;
        x = (float(column) * m_tileWidth) + m_offsetX;
        y = (float(row) * m_tileHeight) + m_offsetY;

        quad.blend = BLEND_ALPHAADD | BLEND_COLORMUL | BLEND_ZWRITE;
        quad.tex = HTEXTURE(nullptr); //Replaced for the sake of brevity (in the engine's code, I used a globally allocated texture array and did some random tile generation here)

        for(UINT i = 0; i < 4; i++)
        {
            quad.v[i].z = 0.5f;
            quad.v[i].col = 0xFF7F7F7F;
        }
        quad.v[0].x = x;
        quad.v[0].y = y;
        quad.v[0].tx = 0;
        quad.v[0].ty = 0;
        quad.v[1].x = x + m_tileWidth;
        quad.v[1].y = y;
        quad.v[1].tx = 1.0;
        quad.v[1].ty = 0;
        quad.v[2].x = x + m_tileWidth;
        quad.v[2].y = y + m_tileHeight;
        quad.v[2].tx = 1.0;
        quad.v[2].ty = 1.0;
        quad.v[3].x = x;
        quad.v[3].y = y + m_tileHeight;
        quad.v[3].tx = 0;
        quad.v[3].ty = 1.0;
        memcpy(&m_tiles[l].quad, &quad, sizeof(hgeQuad));

        if(++column > m_nColumns - 1) {
            column = 0;
            row++;
        }
    }
}

//
// [Render]
// For drawing the entire tile layer
// - X/Y          = world position
// - Top/Left     = screen 'clipping' position
// - Width/Height = screen 'clipping' dimensions
//
bool CTileLayer::Render(HGE* hge, float cameraX, float cameraY, float cameraTop, float cameraLeft, float cameraWidth, float cameraHeight)
{
    // Calculate the current number of tiles
    const ULONG nTiles = m_nColumns * m_nRows;

    // Calculate min & max X/Y world pixel coordinates
    const float scalarX = cameraX / m_layerWidth;  // This is how far (from 0 to 1, in world coordinates) along the X-axis we are within the layer
    const float scalarY = cameraY / m_layerHeight; // This is how far (from 0 to 1, in world coordinates) along the Y-axis we are within the layer
    const float minX = cameraTop + (scalarX * float(m_nColumns) - m_tileWidth); // Leftmost pixel coordinate within the world
    const float minY = cameraLeft + (scalarY * float(m_nRows) - m_tileHeight);  // Topmost pixel coordinate within the world
    const float maxX = minX + cameraWidth + m_tileWidth;                        // Rightmost pixel coordinate within the world
    const float maxY = minY + cameraHeight + m_tileHeight;                      // Bottommost pixel coordinate within the world

    // Loop through all tiles in the map
    for(ULONG l = 0; l < nTiles; l++)
    {
        CTile tile = m_tiles[l];
        // Calculate this tile's X/Y world pixel coordinates
        float tileX = (float(tile.column) * m_tileWidth) - cameraX;
        float tileY = (float(tile.row) * m_tileHeight) - cameraY;

        // Check if this tile is within the boundaries of the current camera view
        if(tileX > minX && tileY > minY && tileX < maxX && tileY < maxY) {
            // It is, so draw it!
            hge->Gfx_RenderQuad(&tile.quad, -cameraX, -cameraY);
        }
    }

    return false;
}

//
// [Free]
// Gee, I wonder what this does? lol...
//
void CTileLayer::Free()
{
    delete [] m_tiles;
    m_tiles = NULL;
} 
```

* * *

# 问题

1.  在不严重影响任何其他渲染优化的情况下，可以做些什么来解决这些架构/优化问题？
2.  为什么会出现这个错误？如何修复？

* * *

**感谢您的时间！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:26:46.470

优化地图的迭代是相当直接的。

给定世界坐标（左、上、右、下）中的可见矩形，只需除以图块大小即可计算出图块位置相当简单。

一旦有了这些图块坐标（tl、tt、tr、tb），您就可以非常轻松地计算一维数组中的第一个可见图块。（从 2D 坐标计算任何图块索引的方法是 (y*width)+x - 请记住首先确保输入坐标有效。）然后您只需使用双循环来迭代可见图块：

```
int visiblewidth = tr - tl + 1;
int visibleheight = tb - tt + 1;

for( int rowidx = ( tt * layerwidth ) + tl; visibleheight--; rowidx += layerwidth )
{
    for( int tileidx = rowidx, cx = visiblewidth; cx--; tileidx++ )
    {
        // render m_Tiles[ tileidx ]...
    }
} 
```

您可以使用类似的系统来选择一块瓷砖。只需存储选择坐标并以完全相同的方式计算实际图块。

至于你的bug，为什么你的相机有x，y，left，right，width，height？只需存储相机位置 (x,y) 并根据屏幕/视口的尺寸以及您定义的任何缩放因子计算可见矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T17:51:03.663

这是一个伪 codish 示例，几何变量在 2d 向量中。相机对象和瓦片地图都有一个中心位置和一个范围（一半大小）。即使您决定坚持使用纯数字，数学也是一样的。即使您不使用中心坐标和范围，也许您会对数学有所了解。所有这些代码都在渲染函数中，并且相当简化。此外，此示例假设您已经获得了一个类似于 2D 数组的对象来保存图块。

所以，首先是一个完整的例子，我将进一步解释每个部分。

```
// x and y are counters, sx is a placeholder for x start value as x will 
// be in the inner loop and need to be reset each iteration.
// mx and my will be the values x and y will count towards too.
x=0,
y=0, 
sx=0, 
mx=total_number_of_tiles_on_x_axis, 
my=total_number_of_tiles_on_y_axis

// calculate the lowest and highest worldspace values of the cam
min = cam.center - cam.extent
max = cam.center + cam.extent

// subtract with tilemap corners and divide by tilesize to get 
// the anount of tiles that is outside of the cameras scoop
floor = Math.floor( min - ( tilemap.center - tilemap.extent ) / tilesize)
ceil = Math.ceil( max - ( tilemap.center + tilemap.extent ) / tilesize)

if(floor.x > 0)
    sx+=floor.x
if(floor.y > 0)
    y+=floor.y

if(ceil.x < 0)
    mx+=ceil.x
if(ceil.y < 0)
    my+=ceil.y

for(; y<my; y++)
    // x need to be reset each y iteration, start value are stored in sx
    for(x=sx; x<mx; x++)
       // render tile x in tilelayer y 
```

一点一点的解释。渲染函数的第一件事，我们将使用一些变量。

```
// x and y are counters, sx is a placeholder for x start value as x will 
// be in the inner loop and need to be reset each iteration.
// mx and my will be the values x and y will count towards too.
x=0,
y=0, 
sx=0, 
mx=total_number_of_tiles_on_x_axis, 
my=total_number_of_tiles_on_y_axis 
```

为了防止渲染所有图块，您需要提供类似相机的对象或有关可见区域开始和停止位置的信息（如果场景可移动，则在世界空间中）

在这个例子中，我为渲染函数提供了一个相机对象，它有一个中心和一个存储为二维向量的范围。

```
// calculate the lowest and highest worldspace values of the cam
min = cam.center - cam.extent
max = cam.center + cam.extent

// subtract with tilemap corners and divide by tilesize to get 
// the anount of tiles that is outside of the cameras scoop
floor = Math.floor( min - ( tilemap.center - tilemap.extent ) / tilesize)
ceil = Math.ceil( max - ( tilemap.center + tilemap.extent ) / tilesize)
// floor & ceil is 2D vectors 
```

现在，如果在任何轴上 floor 高于 0 或 ceil 低于 0，这意味着在相机勺外有同样多的瓷砖。

```
// check if there is any tiles outside to the left or above of camera
if(floor.x > 0)
    sx+=floor.x// set start number of sx to amount of tiles outside of camera
if(floor.y > 0)
    y+=floor.y // set startnumber of y to amount of tiles outside of camera

 // test if there is any tiles outisde to the right or below the camera
 if(ceil.x < 0)
     mx+=ceil.x // then add the negative value to mx (max x)
 if(ceil.y < 0)
     my+=ceil.y // then add the negative value to my (max y) 
```

平铺贴图的正常渲染将从 0 变为该轴的平铺数量，这使用循环中的循环来考虑两个轴。但是由于上面的代码，x 和 y 将始终粘在相机边界内的空间中。

```
// will loop through only the visible tiles
for(; y<my; y++)
    // x need to be reset each y iteration, start value are stored in sx
    for(x=sx; x<mx; x++)
       // render tile x in tilelayer y 
```

希望这可以帮助！

# ruby-on-rails - 堆栈级别太深：创建子记录

> ID：16079718
> 
> 赞同：1
> 
> 时间：2013-04-18T09:50:45.287
> 
> 标签：ruby-on-rails

我的问题：用户 has_one 个人资料。创建新用户时，APP也会自动创建属于User的Profile。我试图通过控制器，通过回调来做到这一点，总是同样的错误（堆栈级别太深）。我的模型：

```
class User < ActiveRecord::Base
  has_secure_password
  attr_accessible :email, :password, :password_confirmation
  validates_uniqueness_of :email, :case_sensitive => false
  validates :email, :email_format => true
  validates :password, :length=> {:in=> 5...32}
  validates :email, :password, :password_confirmation, :presence =>true
  has_many :authentications
  has_many :tests
  has_many :answers
  has_many :results
  has_one :profile
  #after_create :build_profile
  #tried this way

  def build_profile
    self.build_profile
  end

end 
```

#

```
class Profile < ActiveRecord::Base
      attr_accessible :user_id
      belongs_to :user
    end 
```

#

```
 def create
        @user = User.new(params[:user])
        @user.email=@user.email.downcase
        if @user.save
          session[:user_id] = @user.id
          @profile=@user.build_profile
          redirect_to root_url, notice: "Thank you for signing up!"
        else
         render "new"
        end
      end 
```

总是同样的错误。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:53:15.080

```
def build_profile
  self.build_profile
end 
```

这无休止地循环（我看不出重点，你想做什么？）

您应该简单地删除该`build_profile`方法（不用担心，它是通过关联定义的）。

* * *

```
user = User.new

user.build_profile
  |_ calls self.build_profile, but self is user
    |_ calls user.build_profile
      |_ ... 
```

# imageresizer - 图像调整大小 - 即使图像更小，也可以使用填充固定宽度和高度

> ID：16079719
> 
> 赞同：1
> 
> 时间：2013-04-18T09:50:45.610
> 
> 标签：imageresizer

当我上传 100x100 图像时，我无法将其设置为 120x120，并为那些额外的 20 像素填充空白。

如果我上传 200x150，那么 120x120 图像就可以，填充空白。

这是我的代码。

```
var setting = new ResizeSettings
                       {
                           Width = 120,
                           Height = 120,
                           Format = "jpg"
                       };

 ImageBuilder.Current.Build(image, "desctination", setting, false, false); 
```

不知道为什么，但我想我过去成功地使用了这种方法。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:51:50.100

### 这在[ImageResizer API 介绍页面](http://imageresizing.net/docs/basics)的第 2 段中进行了解释；使用`&scale=canvas`或 Scale = ScaleMode.UpscaleCanvas。

# arduino - 同时使用 GSM 和 GPRS

> ID：16079720
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:46.480
> 
> 标签：arduino, gsm, at-command, gprs

我使用连接到[Arduino Uno的](http://arduino.cc/en/Main/ArduinoBoardUno)[SIM300](http://probots.co.in/index.php?main_page=product_info&products_id=284) [GSM](http://en.wikipedia.org/wiki/GSM) / [GPRS](http://en.wikipedia.org/wiki/General_Packet_Radio_Service)调制解调器将数据连续发送到远程服务器。同时我想检查一下我是否收到了[SIM 卡](http://en.wikipedia.org/wiki/Subscriber_identity_module)上的[短信](http://en.wikipedia.org/wiki/SMS)。

在设置功能中，我已将调制解调器配置为 GPRS 模式并在主循环程序中连续执行 AT+CIPSEND 以发送数据。在我的中断例程中，我想使用 AT+CNMI 命令检查 SMS 通知。那么当调制解调器在 GPRS 模式下运行时是否可以检查 SMS 通知，或者是否存在 SMS 和 GPRS 模式的冲突，因为中断调制解调器与主程序一起异步运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T15:28:45.730

虽然我不能保证这个 SIM300 调制解调器没有任何错误，但在 GPRS 流量进行时检查 SMS 应该没有问题。

该`AT+CNMI`命令只是用于报告到达串行接口的新 SMS 消息的命令，这是本地 TE-TA ¹问题并且独立于网络活动（顺便说一句，即使有正在进行的语音或数据呼叫（电路交换或分组交换））。您必须在与发送数据的串行接口不同的串行接口上​​接收 +CNMI UR 代码。

有关`AT+CNMI`我建议您查看[27.005](http://www.3gpp.org/ftp/Specs/html-info/27005.htm)规范的更多详细信息。

¹ TE：终端设备，例如 PC/微处理器。TA：终端适配器，例如调制解调器。

# jquery - Wordpress 无法识别的表达式：#the-comment-list [class^=delete:the-comment-list]

> ID：16079722
> 
> 赞同：0
> 
> 时间：2013-04-18T09:50:55.163
> 
> 标签：jquery, wordpress

我有这个错误

```
Uncaught Error: Syntax error, unrecognized expression: #the-comment-list [class^=delete:the-comment-list] 
```

在我的 Wordpress 网站上[http://www.michelepierri.it](http://www.michelepierri.it)

此错误不允许 jquery 在管理面板中工作。

你能帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:02:17.100

已解决，垃圾管理器插件发生冲突。我已禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:55:24.153

如[选择器文档](http://api.jquery.com/category/selectors/)中所述，该`:`字符是 jQuery 选择器中的特殊字符，因此需要转义，因此`:`当它出现在 id、类名等中时，它被视为普通字符。有两种方法可以做到那。最通用的是使用两个反斜杠 ( `\`)：

```
$('#the-comment-list [class^=delete\\:the-comment-list]') 
```

但是，由于这是一个属性值，您也可以通过将其括在引号中来获得相同的结果：

```
$('#the-comment-list [class^="delete:the-comment-list"]') 
```

# java - 在Android项目中引用（纯java）项目（找不到类）

> ID：16079726
> 
> 赞同：4
> 
> 时间：2013-04-18T09:51:28.930
> 
> 标签：java, android, eclipse, noclassdeffounderror, buildpath

我试图在我的 Android-Project 中引用一个纯 java-Project -> Java-Project 有一大堆我需要使用的类。哦，正如第一个响应指出的那样：我正在使用 eclipse，是的 :)
唯一的问题是：我总是找不到类 'XXX'，从方法 com.example.helloworld.MainActivity.onCreate 引用。我似乎错过了一些步骤或错误......？
我已经做了什么：

*   项目作为项目添加到 Java 构建路径中（逻辑上必要）
*   它在 Java Build Path 中的“Order and Export”中标记并推到顶部（这解决了其他人在处理 Jar 文件时的问题）
*   Ir 在项目设置的“项目参考”中标记。
*   我在构建路径中添加了相关类位于“库”下的文件夹......我不确定这是否应该是必要的。

我引用的 Java 项目有一大堆 Jar，但如果这是原因，我不应该得到不同的错误消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-22T16:05:42.967

我遇到了同样的问题，经过几个小时的挫折和搜索，我终于在这里找到了答案： [Android，从导入的 jar 文件中找不到类](https://stackoverflow.com/questions/8645442/android-class-not-found-from-imported-jar-file/8646185#8646185)

基本上，问题在于引用的纯 java 项目或生成的 jar 是使用 Java 1.7 构建的，而 Android 项目设置为使用 1.6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T03:17:30.560

有两种方法可以做到这一点。

*   jar 那个 java 项目并将 jar 复制到你的 Android 项目的 libs 文件夹中。
*   将项目作为依赖项目添加到您的 Android 项目中

两者都工作得很好。

但是请注意，这个纯 java 项目必须添加 android.jar 而不是 rt.jar 之类的东西 :)。否则你会得到 Dalvik 异常。

编辑：不要忘记刷新和项目 - 清理你的 android 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:02:58.113

要检查两件事（您提到您正在使用 Eclipse）：

1.  如果您的 android 项目需要使用 pure-java 项目的 JAR，请检查这些 JAR 是否在 pure-java 项目的构建路径选项中导出。这是您尝试包含的纯 java 项目的构建路径，而不是尝试包含它的 android 项目的构建路径。在纯 java 项目的“订购和导出”选项卡下，注意注释“导出的条目被贡献给依赖项目”。在这种情况下，您的 android 项目是依赖项目，您的纯 java 项目需要做贡献。

2.  确保除了你的 android 项目之外，pure-java 项目实际上是在 IDE 中打开的。可能微不足道，但有时会被忽视。

如果答案不够，您可能希望提及丢失的类是否在 .java 源文件中，或者它们是否仅在纯 java 项目的构建路径中的 JAR 中找到

编辑：要进一步追查问题，请确认以下内容以确保我理解您的问题：

1.  pure-java 项目确实在 IDE 中成功构建

2.  'class not found' 错误是您在尝试 -build- android 项目时遇到的错误，而不是在尝试 -run- 它时遇到的错误。

3.  CLASSPATH（又名构建路径）可能很难解开。如果包含项目不起作用（假设它确实构建了），您可以尝试构建纯 Java 项目的 JAR 并将其和所有其他 JAR 复制（并包含）到您的 android 项目中。

4.  android SDK 确实使构建环境复杂化。找出问题是否是（A）您的 android 项目设置）或（B）pure-java 项目的打包方式）的一种方法是创建一个不同的纯 java 项目并尝试包含第一个项目，最好使用 -如果可能的话，完全相同的代码行会在 android 项目中为您提供构建错误。

# arrays - 遍历数组散列中的已知元素

> ID：16079729
> 
> 赞同：0
> 
> 时间：2013-04-18T09:51:31.493
> 
> 标签：arrays, perl, loops, hash, nested

我有一个问题希望有人能提供帮助（为了解释我的问题而进行了简化）。

我有以下数组散列的散列（我认为这就是它的本质？）

### 数据结构

```
{
  Cat => {
    Height => ["Tiny"],
  },
  Dog => {
    Colour => ["Black"],
    Height => ["Tall"],
    Weight => ["Fat", "Huge"],
  },
  Elephant => {
    Colour => ["Grey"],
    Height => ["Really Big"],
    Weight => ["Fat", "Medium", "Thin"],
  },
} 
```

### 我想要做什么

下面的程序将打印整个数据结构。***我想用这种方式来做***

```
my %h;

for my $animal (keys %h) {
   print "$animal\n";
   for my $attribute ( keys %{$h{$animal}} ) {
        print "\t $attribute\n";
        for my $i (0 .. $#{$h{$animal}{$attribute}} ) {
            print "\t\t$h{$animal}{$attribute}[$i]\n";
        }    
   }   
} 
```

### 我遇到的问题

我正在尝试访问数据结构的特定部分。例如，我只想打印出`Height`每个动物的数组，因为我不关心本示例中的其他`Colour`属性`Weight`。

我确信对此有一个简单的答案，并且我知道我需要指定`Height`零件，但是正确的做法是什么？我尝试了多种我认为不会成功的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:27:52.433

在您的代码中，而不是使用循环遍历*所有*属性

```
for my $attribute ( keys %{ $h{$animal} } ) { ... } 
```

只用你感兴趣的。像这样

```
for my $animal (keys %h) {
   print "$animal\n";
   for my $attribute ( 'Height' ) {
        print "\t $attribute\n";
        for my $i (0 .. $#{$h{$animal}{$attribute}} ) {
            print "\t$h{$animal}{$attribute}[$i]\n";
        }    
   }   
} 
```

我会选择循环遍历 heights 数组的*内容*而不是索引，使代码看起来像这样：

```
for my $animal (keys %h) {
    print "$animal\n";
    print "\t\t$_\n" for @{ $h{$animal}{Height} };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:42:43.003

快速查看您的数据结构：它是***数组***哈希的哈希！哇。头脑正式炸开了锅。

这是打印所有数据的快速方法：

```
use feature qw(say);

# Working with a Hash of Hash of Arrays
for my $animal (keys %h) {
    say "Animal: $animal";
    # Dereference: Now I am talking about a hash of arrays
    my %animal_attributes = %{ $h{$animal} };
    for my $attribute (keys %animal_attributes) {
        # Dereference: Now I am talking about just an array
        my @attribute_value_list = @{ $animal_attributes{$attribute} };
        say "\tAttribute: $attribute - " . join ", ", @attribute_value_list;
    }
} 
```

注意我使用取消引用。我不必***进行***取消引用，但它使代码更易于使用。我不必考虑我的各种水平。我知道我的动物是属性的*散列*，而这些属性是属性值的*数组*。通过使用取消引用，它可以让我保持直截了当。

现在，假设您只想打印出*所需属性*的列表。您可以`exists`在尝试打印之前使用该函数查看该属性是否存在。

```
use feature qw(say);
use constant DESIRED_ATTRIBUTES => qw(weight height sex_appeal);

# Working with a Hash of Hash of Arrays
for my $animal (keys %h) {
    say "Animal: $animal";
    # Dereference: Now I am talking about a hash of arrays
    my %animal_attributes = %{ $h{$animal} };
    for my $attribute ( DESIRED_ATTRIBUTES ) {
        if ( exists $animal_attributes{$attribute} ) {
            # Dereference: Now I am talking about just an array
            my @attribute_value_list = @{ $animal_attributes{$attribute} }; 
            say "\tAttribute: $attribute - " . join ", ", @attribute_value_list;
        }
    }
} 
```

相同的代码，我只是添加了一个 if 子句。

当您进入这些复杂的数据结构时，使用面向对象设计可能会更好。Perl 有一个关于 OOP Perl的[优秀教程。](http://perldoc.perl.org/perlobj.html)如果你使用它，你可以定义一类动物并有各种方法来提取你想要的数据。它使维护变得更加容易，并允许您勇敢地创建更复杂的数据结构，而无需担心跟踪您的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:41:09.290

我认为有时直接使用该值会更容易，如果它是对另一个结构的引用。您可以执行以下操作：

```
my $height = "Height";

while (my ($animal, $attr) = each %h) {
    print "$animal\n";
    print "\t$height\n";
    print "\t\t$_\n" for @{ $attr->{$height} };
} 
```

使用主键的值，您可以跳过引用的一步，直接进入`Height`属性。下面的输出是您在原始代码中使用的格式。

**输出：**

```
Elephant
        Height
                Really Big
Cat
        Height
                Tiny
Dog
        Height
                Tall 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T09:57:07.220

假设您的变量名为 %h：

```
foreach my $animal (keys %h) {
   my $heights = $h{$animal}->{Height}; #gets the Height array
   print $animal, "\n";
   foreach my $height( @$heights ) {
      print "  ", $height, "\n";
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T10:28:34.633

我想我已经解决了，发现我做错了什么？

我认为应该是这样的：

```
my %h;

for my $animal (keys %h) {
      print "$animal\n";
      for my $i (0 .. $#{$h{$animal}{Height}} ) {
          print "\t\t$h{$animal}{Height}[$i]\n";
      }    
} 
```

# c++ - C++：联合析构函数

> ID：16079730
> 
> 赞同：4
> 
> 时间：2013-04-18T09:51:36.517
> 
> 标签：c++, destructor, unions

联合是一种用户定义的数据或类类型，在任何给定时间，它只包含其成员列表中的一个对象。假设需要动态分配所有可能的候选成员。例如。

```
// Union Destructor
#include <string>
using namespace std;

union Person
{
private:
    char* szName;
    char* szJobTitle;
public:
    Person() : szName (nullptr), szJobTitle (nullptr) {}
    Person (const string& strName, const string& strJob)
    {
        szName = new char[strName.size()];
        strcpy (szName, strName.c_str());

        szJobTitle = new char [strJob.size()];
        strcpy (szJobTitle, strJob.c_str());    // obvious, both fields points at same location i.e. szJobTitle
    }
    ~Person()   // Visual Studio 2010 shows that both szName and szJobTitle
    {           // points to same location.
        if (szName) {
            delete[] szName;     // Program crashes here.
            szName = nullptr;  // to avoid deleting already deleted location(!)
        }
        if (szJobTitle)
            delete[] szJobTitle;
    }
};

int main()
{
    Person you ("your_name", "your_jobTitle");
    return 0;
} 
```

上面的程序在 ~Person 中的第一个删除语句处崩溃（此时 szName 包含有效的内存位置，为什么？）。

析构函数的正确实现是什么？

同样，如果我的类包含联合成员（[如何为包含联合的类编写析构函数](https://stackoverflow.com/q/16025132/2243384)），如何破坏类对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:20:15.753

您一次只能使用工会的一名成员，因为他们共享相同的内存。然而，在构造函数中，你初始化了两个成员，它们相互覆盖，然后在析构函数中你最终释放了它两次。您正在尝试将其用作结构（基于您需要使用结构的字段的名称）。

然而，如果你需要一个联合，那么你可能需要一个结构作为一种信封，它有一些 id 代表正在使用的成员，以及一个构造函数和一个处理资源的析构函数。

另外 - 你的数组太小了。`size()`返回字符数，但如果您使用`char*`字符串类型，则需要为空字符 ( `\0`) 留出空间来处理终止。

如果您需要联合，请尝试使用 Boost.Variant。它比普通工会更容易使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:54:34.280

你在`delete`应该使用的时候使用`delete []`，因为你使用过`new []`，而不是`new`。

更改这些：

```
delete szName;
delete szJobTitle; 
```

对这些：

```
delete [] szName;
delete [] szJobTitle; 
```

顺便说一句，`if`析构函数中的条件是没有意义的。我的意思是，如果指针是`nullptr`，那么写 是安全的`delete ptr;`，也就是说，

```
A *ptr = nullptr;
delete ptr; //Okay! No need to ensure ptr is non-null 
```

除此之外，您还违反了三个（或五个，在 C++11 中）的规则：

*   [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)
*   [C++11 的三规则变成五规则？](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11)

实施它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:55:58.483

您不尊重新删除配对：`new`与配对`delete`，与`new[]`配对`delete[]`。你在做`new[]`，但在打电话`delete`；这是不相容的。

附带说明一下，构造函数存在内存泄漏：`szName`一旦该指针被分配给`szJobTitle`) 所覆盖，分配给的内存就永远不会释放。

由于这是 C++，您通常应该使用`std::string`而不是`char*`for 字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T10:23:59.090

> 上面的程序在 ~Person 中的第一个删除语句处崩溃（此时 szName 包含有效的内存位置，为什么？）。

我没有编译器（或没有时间编译您的代码），但是（除了[Nawaz 解决的问题](https://stackoverflow.com/a/16079788/186997)）我猜这是因为您将工会成员视为类成员。在您的联合中，szName 和 szJobTitle 应该看起来像两个具有相同地址的变量：

```
Person (const string& strName, const string& strJob)
{
    szName = new char[strName.size()];
    strcpy (szName, strName.c_str());

    szJobTitle = new char [strJob.size()]; // this creates memory leak (1)
    strcpy (szJobTitle, strJob.c_str());
} 
```

由于分配了新内存并将其放置在 szJobTitle 中，因此会发生内存泄漏。&szJobTitle 使用与 &szName 相同的内存位置，因此使用第 (1) 行中的分配，您会丢失在 szName 中分配的地址。如果 szName 和 szJobTitle 属于不同类型（内存占用不匹配），设置 szJobTitle 也会损坏（或仅部分覆盖 szTitle）。

> 析构函数的正确实现是什么？

我认为您没有足够的细节来实现析构函数。[查看C++ 中可区分联合](http://blog.aaronballman.com/2011/07/discriminated-unions/)的概念，了解如何正确实现这一点。通常你的联合成员应该管理他们自己的内存（使用 std::string，而不是 char*），然后你的析构函数只会删除分配的内容（但你必须显式调用它）。

> 同样，如果我的类包含联合成员，如何破坏类对象（如何为包括联合的类编写析构函数）？

再次，看看受歧视的工会。它基本上是联合和枚举的关联，其中枚举映射到联合的成员，并设置为指定联合的哪些成员被设置。

# printing - 由 MPDF 创建的双面打印 PDF

> ID：16079732
> 
> 赞同：0
> 
> 时间：2013-04-18T09:51:48.627
> 
> 标签：printing, mpdf

我用来生成 PDF 库 mPDF。可以设置双面打印吗？我找不到任何文件。

我的 PDF ( [http://fotbal.zylacup.cz/zapis-pdf.php?id=2777&hash=f0dc249a48f349874f7dfa9a8c4b6998](http://fotbal.zylacup.cz/zapis-pdf.php?id=2777&hash=f0dc249a48f349874f7dfa9a8c4b6998) )

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:54:53.573

双面打印将是一个打印选项，您不能在 PDF 文件中定义它。

# snmp - snmp private mib 阻止公共用户读取节点

> ID：16079735
> 
> 赞同：0
> 
> 时间：2013-04-18T09:52:02.187
> 
> 标签：snmp, net-snmp

我正在处理一个私有 mib，其中包括一些带有敏感信息的节点。我希望这些节点只能由拥有私人社区字符串的用户读取。

细节：

```
usersEntry
    usersIndex
    usersName
    usersPassword 
```

我希望这些敏感信息只对具有社区字符串的用户可读，而不是对具有私有社区字符串的用户可读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:43:30.613

Unless you are writing an SNMP agent of your own, the flexibility on security depends on the vendor of that agent. Talk to the vendor and you will know the answer.

Generally speaking, for SNMP v2 you won't get what you want, as role based security model was introduced only in SNMP v3,

[http://www.rfc-editor.org/rfc/rfc3414.txt](http://www.rfc-editor.org/rfc/rfc3414.txt)

If the vendor happens to also back port RFC3414 support for v2, you should be lucky enough to also use it in v2\. If not, you are on your own.

# regex - 如何用星号制作正则表达式研究人员

> ID：16079737
> 
> 赞同：0
> 
> 时间：2013-04-18T09:52:10.063
> 
> 标签：regex

有人知道如何像在 Windows 操作系统中那样制作带有星号字符的正则表达式研究人员吗？

示例：*.pdf -> 查找所有 pdf 文件。

我一直在尝试这个片段，但我不太确定它是否非常强大：

```
 FTP.FTPclient ftp = new FTP.FTPclient("ftp://myservices.com/","username", "pass");
            Regex reg = new Regex(@"Hi");
            string[] filesArray = ftp.ListDirectory("/path/").Where(fileName => reg.IsMatch(fileName)).ToArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:55:02.620

您可以使用此正则表达式查找任何具有扩展名 pdf 的文件名

```
.+\.pdf$ 
```

`.`匹配单个字符

`+`是一个匹配 1 到多个前面字符的量词

* * *

您可以使用[路径](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)`GetExtention`的方法来获取文件的扩展名

```
ftp.ListDirectory("/path/")
   .Where(Path.GetExtension(fileName)==".pdf")
   .ToArray(); 
```

* * *

如果要检查文件内容中的特定单词

```
ftp.ListDirectory("/path/")
   .Where(File.ReadAllText(fileName).Contains(yourWord))
   .ToArray(); 
```

* * *

如果要检查文件名中的特定单词

```
ftp.ListDirectory("/path/")
       .Where(fileName.Contains(youWord))
       .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:12:14.473

而不是使用`*.pdf`，尝试使用`(.*)pdf`。换句话说，替换`*`为`(.*)`并查看它是否有效。

# sql - ORA-29024: 证书验证失败

> ID：16079738
> 
> 赞同：1
> 
> 时间：2013-04-18T09:52:10.677
> 
> 标签：sql, oracle, ssl, https, oracle11g

我遵循了以下教程： [创建钱包](http://www.oracle-base.com/articles/misc/utl_http-and-ssl.php)，[创建 ACL](http://www.oracleflash.com/36/Oracle-11g-Access-Control-List-for-External-Network-Services.html)

而且我仍然遇到`ORA-29024: Certificate validation failure`错误。

我正在尝试这个查询：

```
 UTL_HTTP.set_wallet('file:/home/oracle/wallet', 'password');
  l_http_request  := UTL_HTTP.begin_request('https://somedomain.co.il');
  l_http_response := UTL_HTTP.get_response(l_http_request); 
```

现在我已添加到 ACL：*.somedomain.co.il,somedomain.co.il

而且我已经下载了 DER 编码的证书，因为我在某处读到这是需要的证书，并且在生成钱包的过程中没有出现任何错误。

有什么想法吗？

我正在使用 Oracle 11g

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:35:57.360

最后我的问题是当我导出我选择DER的证书时，在我的情况下我应该使用PCKS＃7，但这在所有情况下都不会起作用，我猜这取决于密钥。

所以我想如果你登陆这里尝试使用你的证书文件（一定要删除并重新添加）并且非常重要，在尝试之间更改会话以了解它是否有效，否则它会一直给你错误虽然它应该工作。

# java - 检索工件项目作为属性

> ID：16079739
> 
> 赞同：1
> 
> 时间：2013-04-18T09:52:11.840
> 
> 标签：java, maven-2

我正在尝试按名称检索 maven-dependecy-plugin 中的工件项作为属性，以将其值写入我的战争清单文件中。我需要类似的东西`${project.artifactItems["name"].value}`来检索我的值，而不必以编程方式将每个 jar 清单文件作为流读取。

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-dependency-plugin</artifactId>
<executions>
  <execution>
    <id>copy-installed</id>
    <phase>test</phase>
    <goals>
      <goal>copy</goal>
    </goals>
    <configuration>
      <artifactItems>
        <artifactItem>
          <groupId>${project.groupId}</groupId>
          <artifactId>prj-applet</artifactId>
          <version>${test.project.version}</version>
          <type>jar</type>
        </artifactItem>
        <artifactItem>
          <groupId>${project.groupId}</groupId>
          <artifactId>prj-pdf-render-applet</artifactId>
          <classifier>jar-with-dependencies</classifier>
          <version>${test.project.version}</version>
          <type>jar</type>
        </artifactItem>
      </artifactItems> 
```

我需要使用 war 插件在我的清单文件中插入每个检索到的值：

```
<artifactId>maven-war-plugin</artifactId>
<configuration>
<warName>test</warName>
  <!-- Java EE 6 doesn't require web.xml, Maven needs to catch up! -->
   <!-- <warName>test</warName> -->
  <failOnMissingWebXml>false</failOnMissingWebXml>
  <archive>
    <manifestEntries>

      <applicationVersion>${pom.version}</applicationVersion>
      <applicationBuildTimestamp>${maven.build.timestamp}</applicationBuildTimestamp>
    </manifestEntries>
  </archive>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:08:28.070

假设你有这个依赖

```
<dependency>
    <groupId>some-groupid</groupId>
    <artifactId>some-artifactid</artifactId>
    <type>jar</type>
</dependency> 
```

你可以通过 ${maven.dependency.some-groupid.some-artifactid.jar.path} 获得你的依赖

# java - Java - 通用静态方法

> ID：16079745
> 
> 赞同：8
> 
> 时间：2013-04-18T09:52:20.907
> 
> 标签：java, generics, static-methods

我一直在尝试了解是否可以创建一个基于返回类推断泛型类型并调用该泛型类型的静态方法的方法。

即下面我创建了两个类，它们都实现了getInstances 和getAllInstances 方法。然后我尝试创建使用来自通用包装器的方法。似乎无论返回类型如何，超类方法总是在运行。

例如，

```
public class ParentClass {

    public ParentClass(){}

    public static <T extends ParentClass> T getInstance(){
        return (T) new ParentClass();
    }

    public static <T extends ParentClass> List<T> getAllInstances(){
        ArrayList<ParentClass> parents = new ArrayList<ParentClass>();

        for(int i=0;i<5;i++){
            parents.add(new ParentClass());
        }

        return (List<T>) parents;
    }

} 
```

子类A

```
public class SubclassA extends ParentClass{

     public SubclassA(){}

    @SuppressWarnings("unchecked")
    public static SubclassA getInstance(){
         return new SubclassA();
    }

    @SuppressWarnings("unchecked")
    public static List<SubclassA> getAllInstances(){
        ArrayList<SubclassA> parents = new ArrayList<SubclassA>();

          for(int i=0;i<5;i++){
             parents.add(new SubclassA());
          }

         return parents;
      }
 } 
```

Wrapper - 显示问题

```
 public class Wrapper {

    public Wrapper(){
        // ... some other stuff
    }

    public <T extends ParentClass> T getInstance(){
        return T.getInstance();
    }

    public <T extends ParentClass> List<T> getAllInstances(){
        return T.getAllInstances();
    }

    public static void main(String... args){
        Wrapper wrapper = new Wrapper();

        SubclassA subclassA = wrapper.getInstance();
        ParentClass parentClass = wrapper.getInstance();

        System.out.println(subclassA.getClass().getName());
        System.out.println(parentClass.getClass().getName());
    }

 } 
```

运行 Wrapper 时出现以下错误：

线程“main”java.lang.ClassCastException 中的异常：ParentClass 无法在 Wrapper.main 中转换为 SubclassA（Wrapper.java:20）

我可以在 Java 中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:56:25.440

静态方法不会被覆盖`static`。此方法将属于`Class`级别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:00:03.700

不，你不能这样。要使其工作，您可以传递 Class 对象：

```
public class ParentClassUtils

    public static <T extends ParentClass> T getInstance(Class<T> clazz) {
        return clazz.newInstance();
    }

    public static <T extends ParentClass> List<T> getAllInstances(Class<T> clazz) {
        List<T> list = new ArrayList<T>();
        for (int i = 0; i < 5; i++) {
            list.add(getInstance(clazz));
        }
        return list;
    }
} 
```

此外，在您的示例中，您在父类和子类中有等效的静态方法。子类方法不会覆盖父类方法，它们只是隐藏它们，这几乎肯定不是你想要的。上面的这个实用程序类方法解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T10:04:24.040

您的方法不正确，Java 中没有静态概念，`Inheritance`因为继承总是在对象级别的上下文中。只有成员方法（非静态）可以被具有适当访问修饰符的子类继承。

更新：进一步补充，在您的场景中，工厂模式似乎比调整泛型以获取/构造特定类对象更合适。

# .net - 在 Lambda 表达式中将字符串解析为日期时间

> ID：16079746
> 
> 赞同：1
> 
> 时间：2013-04-18T09:52:21.453
> 
> 标签：.net, vb.net, datetime, lambda

我有一个服务调用，它从 SAP Web 服务返回日期和时间作为字符串，我试图将这些字符串解析为本地模型中的日期时间对象。

到目前为止，我已经取消了该方法，但我注意到的第一件事是编译器抱怨它无法将日期转换为它不是委托类型。

**错误**

> 错误 1 ​​Lambda 表达式无法转换为“日期”，因为“日期”不是委托类型。C:\Users\phil.murray\Desktop\SAP 订单测试\WindowsApplication1\Form1.vb 43 57 WindowsApplication1

**代码**

```
 _ordersProxy.Z_SPIN_ORDERS(_header, _order, _code)

    Return From h In header.OrderBy(Function(w) w.AUFNR)
                Select New Order With {.Aufnr = h.AUFNR, .BatchType = h.BATCH_TYPE,
                                       .EngineType = h.ENGINE_TYPE, .ProgrammedQuantity = h.PROGRAMMED_QTY,
                                       .StartDate = Function()

                                                        Dim startDate As DateTime
                                                        Dim startTime As DateTime

                                                        Date.TryParse(h.START_DATE, startDate)
                                                        Date.TryParse(h.START_TIME, startTime)

                                                        Return New DateTime(startDate.Year, startDate.Month, startDate.Day,
                                                                            startTime.Hour, startTime.Minute, startTime.Second)

                                                    End Function} 
```

**局部模型**

```
Public Class Order

    Public Property Aufnr As String
    Public Property EngineType As String
    Public Property ProgrammedQuantity As Int16
    Public Property BatchType As String
    Public Property StartDate As DateTime

    Public Property OrderParts As IList(Of Part)
    Public Property OrderProcessCodes As IList(Of ProcessCode)

End Class 
```

用 lambda 表达式解析这个字符串时我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:56:28.903

问题是这`StartDate`可能是类型的属性`DateTime`- 而您的 lambda 表达式可以分配给`Func(Of DateTime)`.

你可以*调用*lambda 表达式来设置`StartDate`，但基本上如果属性是 type `DateTime`，你需要给它一个该类型的*值*，而不仅仅是一个可以执行来获取值的函数。

当然，另一种选择（可能）是更改`StartDate`属性类型。目前尚不清楚您正在尝试做什么，或者您正在设置此属性的对象类型。

# entity-framework-5 - 与 EF5 流畅映射的一对零或一关系

> ID：16079747
> 
> 赞同：0
> 
> 时间：2013-04-18T09:52:21.970
> 
> 标签：entity-framework-5

我有三个实体：

```
public class MainEntity()
{
    public long Id { get; set; }

    public long EntityAId { get; set; }
    public EntityA OptionalEntityA { get; set; }

    public long EntityBId { get; set; }
    public EntityB OptionalEntityB { get; set; }

    public string SProp { get; set; }
}

public class EntityA()
{
    public long Id { get; set; }

    public long MainEntityId { get; set; }
    public MainEntity RequiredEntity { get; set; }
}

public class EntityB()
{
    public long Id { get; set; }

    public long MainEntityId { get; set; }
    public MainEntity RequiredEntity { get; set; }
} 
```

所有三个实体都有自己的由数据库生成的 ID：

```
Property(t => t.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

如何定义 MainEntity 与 EntityA 和 EntityB 之间的关系，以便拥有：

*   MainEntity 可能有零个或一个 EntityA
*   MainEntity 可能有零个或一个 EntityB
*   EntityA 必须有一个 MainEntity
*   EntityB 必须有一个 MainEntity

在我的 MainEntityConfigurationMap 中，我定义了这样的关系：

```
HasOptional(m => m.OptionalEntityA).WithRequired(ea => ea.RequiredEntity);
HasOptional(m => m.OptionalEntityB).WithRequired(eb => eb.RequiredEntity); 
```

查看生成的迁移，我为 EntityA 提供了这个：

```
 CreateTable(
            "dbo.EntityA",
            c => new
                {
                    Id = c.Long(nullable: false, identity: true),
                    MainEntityId = c.Long(nullable: false),
                })
            .PrimaryKey(t => t.Id)
            .ForeignKey("dbo.MainEntity", t => t.Id)
            .Index(t => t.Id); 
```

实体框架在这里定义了一个共享主键，有没有办法避免这种情况并使 MainEntityId 指向 MainEntity.Id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:02:01.610

实体框架仅在共享主键之上支持一对一关系（从属表中的 PK 也是主表的 FK）。原因是依赖表中的 FK 必须唯一才能强制执行一对一关系，但 EF 目前不支持唯一约束（PK 除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:23:15.013

并补充@Ladislav Mrmka所说的......

这是对各种一对一模式的完整研究——特别是如何使用`FK-s`而不是捆绑 PK-s（但不要把希望寄得太高）。

[创建一个独特的约束来加强一对一的关系](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)

它归结为手动执行 SQL（在播种或类似的 Db 初始化期间） - 它添加了一个`UNIQUE CONSTRAINT`...

但是，即使在这种情况下，它也对您不起作用 - 或者没有更改。

如果我没记错的话 - 你必须放弃一个导航属性 - 而且很可能`OptionEntityA/B`- 因为唯一列不能支持 NULL。

# c++ - 向现有的 Objective-C 类添加函数会引发错误

> ID：16079750
> 
> 赞同：0
> 
> 时间：2013-04-18T09:52:30.230
> 
> 标签：c++, objective-c, cocoa

我正在为 NSImage 类编写一个 C++ 包装器，但我在编写的附加函数时遇到了问题。以下是简要总结：

NSImageExtras.h

```
@interface NSImage (MyExtensions)
-(NSString*) myExtraFunction;
@end 
```

NSImageExtras.mm

```
#import "NSImageExtras.h"

@implementation NSImage (MyExtensions)
-(NSString*) myExtraFunction
{
    return @"Hello World";
}
@end 
```

NSImageWrapper.h

```
class NSImageWrapper
{
public:
    // nsImage is of type (NSImage*)
    NSImageWrapper(void* nsImage) {myImage = nsImage;}
    ~NSImageWrapper() {}

    CFStringRef myExtraFunction();

    // Cast this into (NSImage*)
    void* getNSImage() {return myImage;}

private:
    void* myImage;
}; 
```

NSImageWrapper.mm

```
#include "NSImageWrapper.h"
#import "NSImageExtras.h"

CFStringRef NSImageWrapper::myExtraFunction()
{
    return (CFStringRef) [(NSImage*) myImage myExtraFunction]; 
} 
```

这编译。但是当我尝试调用时`myExtraFunction`，由于找不到该函数而引发错误。如果我将其更改`import "NSImageExtra.h"`为`import "NSImageExtra.m"`然后它可以工作，但我宁愿避免在我的导入中添加 .m 文件。

知道为什么会这样吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:08:03.980

您可以尝试在 NSImageWrapper.h 中导入 NSImageExtras.h 而不是 NSImageWrapper.mm。您需要在头文件中包含子类头。

# php - PHP curl 将 Content-Type 更改为 application/x-www-form-urlencoded。不应该那样做

> ID：16079754
> 
> 赞同：9
> 
> 时间：2013-04-18T09:52:40.490
> 
> 标签：php, curl, http-headers

我想从我正在使用 PHP curl 的服务器将视频直接上传到 Youtube。

我需要这种请求格式：

```
POST /feeds/api/users/default/uploads HTTP/1.1
Host: uploads.gdata.youtube.com
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=adf15ee97731bca89da876c...a8dc
Slug: video-test.mp4
Content-Type: multipart/related; boundary="f93dcbA3"
Content-Length: 1941255
Connection: close

--f93dcbA3
Content-Type: application/atom+xml; charset=UTF-8

<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:media="http://search.yahoo.com/mrss/"
  xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <media:group>
    <media:title type="plain">Bad Wedding Toast</media:title>
    <media:description type="plain">
      I gave a bad toast at my friend's wedding.
    </media:description>
    <media:category
      scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People
    </media:category>
    <media:keywords>toast, wedding</media:keywords>
  </media:group>
</entry>
--f93dcbA3
Content-Type: video/mp4
Content-Transfer-Encoding: binary

<Binary File Data>
--f93dcbA3-- 
```

这就是我所拥有的：

```
$content = $this->buildRequestContent();

$ch = curl_init();

$curlConfig = array(
    CURLOPT_URL => 'http://uploads.gdata.youtube.com/feeds/api/users/default/uploads',
    CURLOPT_POST => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_BINARYTRANSFER => true,
    CURLOPT_POSTFIELDS => $content,
    CURLOPT_HTTPHEADER, array(
        "Authorization" => sprintf("GoogleLogin auth=%s", $this->accessToken),
        "GData-Version" => 2,
        "X-GData-Key" => sprintf("key=%s", $this->developerKey),
        "Slug" => sprintf("%s", $this->video->getFilename()),
        "Content-Type" => sprintf("multipart/related; boundary=\"%s\"", $this->boundaryString),
        "Content-Length" => strlen($content),
        "Connection" => "close"
    ),
);

curl_setopt_array($ch, $curlConfig);

$result = curl_exec($ch); 
```

转储结果显示 curl 更改为`Content-Type`youtube`application/x-www-form-urlencoded`当然不支持。

我将我的二进制内容（视频）放入`CURLOPT_POSTFIELDS`，也许这是错误的，但除此之外我不知道如何设置请求正文。

那么如何保留我设置的 Content-Type 呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-13T12:25:26.167

接受的答案对我没有帮助，我在您的代码中发现了另一个问题。根据当前的 PHP[文档](http://www.php.net/curl_setopt)， CURLOPT_HTTPHEADER 必须像这样设置：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-type: text/plain',
    'Content-length: 100'
)); 
```

它必须是字符串列表，而不是像`array('Content-Type' => 'text/plain')`. 希望它可以节省某人的调试时间。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T10:46:01.617

根据[有关选项参数设置的文档部分，](http://php.net/manual/en/function.curl-setopt.php)将 HTTP 方法`POST`默认设置为内容类型设置为`application/x-www-form-urlencoded`. 所以我怀疑一次设置所有选项会导致您`Content-Type`被覆盖。
我的建议是在设置方法后，在单个语句中设置内容类型，即

```
$curlConfig = array(
    CURLOPT_URL => 'http://uploads.gdata.youtube.com/feeds/api/users/default/uploads',
    CURLOPT_POST => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_BINARYTRANSFER => true,
    CURLOPT_POSTFIELDS => $content,
);

curl_setopt_array($ch, $curlConfig);

curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Authorization: ' . sprintf('GoogleLogin auth=%s', $this->accessToken),
    'GData-Version: 2',
    'X-GData-Key: ' . sprintf('key=%s', $this->developerKey),
    'Slug: ' . sprintf('%s', $this->video->getFilename()),
    'Content-Type: ' . sprintf('multipart/related; boundary="%s"',
                                  $this->boundaryString),
    'Content-Length: ' . strlen($content),
    'Connection: close'
)); 
```

# c# - 如何在c#中使用sql server表数据更新mysql表？

> ID：16079759
> 
> 赞同：0
> 
> 时间：2013-04-18T09:52:52.827
> 
> 标签：c#, mysql, sql-server

所以我有 mysql 中的表 clienti 和 sql server 中的 ClientiImporti 表，我想首先将 clienti 行的元素与 ClientiImporti 行的元素进行比较，如果它们相等，那么我必须覆盖行的元素mysql中的表clienti。我正在考虑使用更新，但不知道该怎么做。我真的会帮忙一点点帮助谢谢。我是 C# 的新手。提前致谢

```
int lengthClienti = MySqlSetClienti.Tables["clienti"].Rows.Count;

int columnClienti = 4;

//loop through all rows of Sql Server data table and add into MySql dataset

for (int i = 0; i <= lengthClienti - 1; i++)//row
{
    for (int j = 0; i <= columnClienti; j++)//column
    {
        if (SqlDataSet.Tables["ClientiImporti"].Rows[i][j].ToString() == MySqlSetClienti.Tables["clienti"].Rows[i][j].ToString())
        {

        }
    }
} 
```

# mysql - mysql - 从两个不同的表中计算百分比

> ID：16079768
> 
> 赞同：3
> 
> 时间：2013-04-18T09:53:29.917
> 
> 标签：mysql

我有两个表，我想获取百分比值并将百分比更新到表中。假设我们有两个这样的表，

**表格1**

```
 date     open   high   low   close   stock_id
2013-01-02   10     20     5     15        1
2013-01-02   150    200   100    170       2
2013-01-03   15     30     10    20        1 
```

**表 2**

```
 date     p_high  p_low   percent   stock_id
2013-01-02   25     10       0.00        1
2013-01-02   210    120      0.00        2
2013-01-03   40     20       0.00        1 
```

我想用这个公式计算百分比

```
(p_high - high) / high 
```

`stock_id = 1`in 的百分比`date = 2013-01-02`将是这样的。

```
(25 - 20) / 20 = 25.00 
```

当我得到百分比时，我想将它更新到**表 2**，所以它会是这样的，

```
 date      p_high   p_low   percent   stock_id
2013-01-02    25      10      25.00       1 
```

我怎么能在mysql中做到这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:07:29.543

当然可以，请查看[http://sqlfiddle.com/#!2/61c460/2](http://sqlfiddle.com/#!2/61c460/2)

```
UPDATE Table2 t2
INNER JOIN Table1 t1 ON t2.stock_id = t1.stock_id AND t1.date = t2.date 
SET 
    t2.percent = (t2.p_high - t1.high) / t1.high; 
```

Sqlfiddle 将不允许更新，但如果您获得查询并在 mysql 中运行，它将起作用。

同一股票和日期可以有多个条目吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:18:08.343

**DDL**

```
create table table1(
    created_dt date,
    open decimal(5,2),
    high decimal(5,2),
    low decimal(5,2),
    close decimal(5,2),
    stock_id integer
);

create table table2(
    created_dt date,
    p_high decimal(5,2),
    p_low decimal(5,2),
    percent decimal(5,2),
    stock_id integer
); 
```

**DML**

```
insert into table1 values ('2013-01-02',10,20,5,15,1);
insert into table1 values ('2013-01-02',150,200,100,170,2);
insert into table1 values ('2013-01-03',15,30,10,20,1);

insert into table2 values('2013-01-02',25,10,0.00,1);
insert into table2 values('2013-01-02',210,120,0.00,2);
insert into table2 values('2013-01-02',40,20,0.00,1);

update table2
join table1
on table1.created_dt = table2.created_dt and table1.stock_id = table2.stock_id
set percent = ((p_high - high)/high); 
```

**工作示例** [http://sqlfiddle.com/#!2/21d02/1/0](http://sqlfiddle.com/#!2/21d02/1/0)

# apache-flex - 使用 Flex 的 Image 和 BitmapImage 之间的区别？

> ID：16079772
> 
> 赞同：2
> 
> 时间：2013-04-18T09:53:49.193
> 
> 标签：apache-flex

在`Image`的 asdoc 中，我们可以看到：

> Flex 还包括 BitmapImage 类。此类用于将图像嵌入到皮肤和 FXG 组件中

但我们也可以`Image`在皮肤中使用`@Embed`并与`Image`...一起使用

因此，我应该在何时何地使用`Image`或`BitmapImage`请？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T10:15:09.960

`Image`是一个可换肤的类，它包装了`BitmapImage`. 因此 BitmapImage 更轻量级，但 Image 具有更多功能。所以什么时候用which的问题归结为：
如果BitmapImage的特性够用，就用那个；否则使用图像。尤其是在移动环境中尽量倾向于使用 BitmapImage。

**现在 Image 究竟添加了哪些功能？**

*   Image extends SkinnableComponent：这意味着您可以为您的图像分配带有边框或阴影的皮肤，或者在整个应用程序中始终如一的任何您喜欢的皮肤。
*   它还提供了一个进度指示器，可以在加载图像时显示。
*   另一个功能是可以将[多个图像的加载排队](http://help.adobe.com/en_US/flex/using/WSc5cd04c102ae3e97-33ad5caa12c719dc7c8-8000.html#WSc5cd04c102ae3e97-33ad5caa12c719dc7c8-7ffc)。

# visual-studio-2012 - IntelliSense 在某些情况下不完整

> ID：16079773
> 
> 赞同：4
> 
> 时间：2013-04-18T09:53:52.350
> 
> 标签：visual-studio-2012

可能还有其他情况，但这是我见过的第一个。

`System.Resources.ResourceManager`缺少 IntelliSense 的一部分。例如，`GetString`缺少。键入`GetString(`不会提供 IntelliSense。将鼠标悬停在它上面会显示信息。

![资源管理器成员列表](https://i.stack.imgur.com/3Fjiv.png) ![获取字符串悬停](https://i.stack.imgur.com/t5eVN.png)

我尝试过的事情：

*   重新启动 Visual Studio
*   重置所有环境设置
*   删除内容`%AppData%\Roaming\Microsoft\VisualStudio\11.0\ReflectedSchemas`
*   执行`devenv /resetuserdata`

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:20:25.067

这不是错误，IntelliSense 会显示您请求的内容。

您需要创建 ResourceManager 的实例来获取 GetString 或 GetObject 等方法，因为这些是实例方法。

当前您访问该类`ResourceManager`，因此 IntelliSense 仅列出静态成员。

# jquery - 当单击按钮时容器宽度设置为 100% 时更新 FlexSlider2 宽度

> ID：16079781
> 
> 赞同：0
> 
> 时间：2013-04-18T09:54:09.050
> 
> 标签：jquery, jquery-ui, resize, flexslider

我在一个固定宽度的网站上使用 FlexSlider2，但我试图为“全屏”视图制作一个按钮。基本上，按钮所做的只是将主站点的容器 div 更改为 100% 宽度并隐藏其他站点元素。

这是我的按钮功能代码：

```
 $('.fullscreen-toggle').click(function() {
        $('#container').toggleClass('full-width', 0);
        $('#header').toggleClass('hide', 0);
        $('#menu').toggleClass('hide', 0);
        $('#lower-content').toggleClass('hide', 0);
        $('.fullscreen-toggle span').toggle();
    }); 
```

我遇到的问题是 FlexSlider 仅在调整窗口大小或进入和离开焦点时（通过更改浏览器选项卡）调整其图像/幻灯片宽度。单击按钮时，我无法找到“重新加载” FlexSlider 的方法，因此图像是全宽的。现在，当单击按钮时，一次显示多张幻灯片，如下所示：http: [//img202.imageshack.us/img202/5308/flexsliderresizeissue.jpg](http://img202.imageshack.us/img202/5308/flexsliderresizeissue.jpg)

我尝试过的事情：

*   这个插件： benalman (com) /projects/jquery-resize-plugin/ （删除链接以满足最小链接要求）
*   使用 .load() 尝试刷新脚本（不要认为这是 .load 的预期功能，但我还是尝试了：S）
*   `$('#slider').flexslider();`再次在 .click() 函数中包含调用
*   以上内容的其他变体，也许有些我什至不记得了！我已经有一段时间了

抱歉，我无法直接链接到该网站，但如果您需要更多信息，请告诉我。

**更新** 添加`$('ul.slides li').css("width", $('#container').width() + "px");`到我的 .click 函数可以使图像大小合适，但是，仍然同时显示两张幻灯片。这次他们被完美地分成了两半。

**更新 2** Flexslider CSS：[http ://pastebin.com/zVk82NkK](http://pastebin.com/zVk82NkK)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:22:55.497

在 flexslider.css 文件上你有这一行吗？

```
.flexslider .slides img {width: 100%; display: block;} 
```

我认为保持`width: 100%`每次只有一张图像滑动就足够了。

# sql - 组功能在 SQL Server 上不起作用

> ID：16079787
> 
> 赞同：2
> 
> 时间：2013-04-18T09:54:28.777
> 
> 标签：sql, sql-server, group-by

我使用下面的查询，但它显示了一些重复的项目。所以我使用该`group`功能，但它不起作用。

```
SELECT p.productId, p.productName, p.catId, p.subCatId, p.productType,
       p.modelNo, p.picUrl, p.color, p.theme, p.productPrice, p.discountedPrice,
       p.quantity, p.details, p.mainPageDisplay, p.productPageDisplay,
       s.subCatId AS Expr1,
       s.subCatName, s.catId AS Expr2,
       s.rank, s.subCatName AS Expr3
FROM (products p INNER JOIN
      subCategories s ON p.catId = s.catId)
WHERE (p.color = 'red') group By p.productName 
```

此查询工作正常，但是当我添加时`group by`它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:59:00.417

You don't need a `GROUP BY` for selecting distinct rows, you need `DISTINCT`:

```
SELECT DISTINCT p.productId, p.productName, p.catId, p.subCatId, p.productType,
       p.modelNo, p.picUrl, p.color, p.theme, p.productPrice, p.discountedPrice,
       p.quantity, p.details, p.mainPageDisplay, p.productPageDisplay,
       s.subCatId AS Expr1,
       s.subCatName, s.catId AS Expr2,
       s.rank, s.subCatName AS Expr3
FROM (products p INNER JOIN
      subCategories s ON p.catId = s.catId)
WHERE (p.color = 'red') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:58:37.953

Your `SELECT` statement doesn't contain any [aggregate functions](http://www.w3schools.com/sql/sql_functions.asp), so a `GROUP BY` statement is not appropriate.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:05:07.473

您需要在 GROUP BY 子句中使用 SELECT 子句中的所有列，或者在 SELECT 关键字之后使用 DISTINCT 关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T10:05:24.907

`SQL GROUP BY`将列值聚合（合并和计算）为单个记录值。`GROUP BY`需要在其上运行计算的表列的列表。

这个[链接](https://stackoverflow.com/questions/2421388/using-group-by-on-multiple-columns)有一个例子来帮助你理解这个概念。

# objective-c - 在 main.m 中使用未声明的标识符

> ID：16079793
> 
> 赞同：0
> 
> 时间：2013-04-18T09:54:40.397
> 
> 标签：objective-c, compiler-errors

我从 Objective-C 开始，我有一个问题。

编译器给了我这个错误信息：

```
Semantic Issue: Use of undeclared identifier 
```

这是`main.m`代码：

```
#import <UIKit/UIKit.h>

#import "HMJAppDelegate.h"

int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([HMJAppDelegate class]));
    } 
} 
```

此错误位于 main.m 文件中。

我该如何解决这个问题？

# java - Java中的顶点使用JUNG库

> ID：16079795
> 
> 赞同：1
> 
> 时间：2013-04-18T09:54:55.677
> 
> 标签：java, jung, vertex

我正在尝试使用 JUNG 库来可视化带有顶点和边的基本图。使用网站上的示例代码，我有以下内容：

```
import edu.uci.ics.jung.graph.DirectedSparseGraph;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.graph.UndirectedSparseGraph;
import java.util.*;

public class GraphTest {

    public GraphTest(){        
        Graph g = new DirectedSparseGraph();
        Vertex v1 = (Vertex) g.addVertex(new DirectedSparseVertex());
    Vertex v2 = (Vertex) g.addVertex(new DirectedSparseVertex());
    } 
```

但是，“顶点”带有红色下划线，Netbeans 告诉我它找不到符号。我尝试导入 Netbeans 的建议但无济于事，现在我相信 Vertex 实际上是 Java 原生的。我不知道我要去哪里错了，但我认为这是一个基本的错误，正在逃避我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:24:53.093

检查[DirectedSparseGraph#addVertex](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/DirectedSparseGraph.html#addVertex%28V%29)`addVertex`的 JavaDoc的返回类型 表明该函数返回一个布尔值而不是Jung 1.XX 确实有一个方法返回一个可以向下转换为 a 的方法。我认为您可能试图从版本 1 中获取与版本 2 一起使用的示例，但它不能向后兼容，这会导致构建错误。`Vertex``ArchetypeVertex``Vertex`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:47:05.847

Jung 使用泛型类型，它没有定义 Vertex 类型。

你打算在你的图表中加入什么？

假设您希望顶点为字符串，边缘为整数，您的代码应类似于

```
Graph<String,Integer> g = new DirectedSparseGraph<String,Intger>();
g.addVertex("foo"); // return type is just a boolean indicating if the vertex was already in graph
g.addVertex("bar"); 
```

这将为您提供一个包含两个未连接顶点的图。

# php - 显示 AJAX 文件上传进度不起作用

> ID：16079801
> 
> 赞同：0
> 
> 时间：2013-04-18T09:55:08.197
> 
> 标签：php, javascript, ajax, jquery

我使用了文件上传过程。当我单击浏览按钮时，文件将上传到服务器并显示该文件内容，而无需单击提交按钮。当我上传大文件时，上传会花费更多时间。所以我需要实现进度条。我使用了以下代码：

```
$.ajax({
    url: "upload.php",
    type: "POST",
    data: formdata,
    processData: false,
    contentType: false,
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
        $('register').ajaxForm({}); 
    },
    onProgress: function(event){
        var loaded = event.loaded, total = event.total;
        bar.width(parseInt(loaded / total * 100, 10).limit(0, 100) + '%');
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    complete: function(xhr) {
        bar.width("100%");
        percent.html("100%");
        status.html(xhr.responseText);
    }, 
```

但是进度条没有启动。仅在上传完成 100% 后显示。我需要每一步上传百分比。

问题是以下两个功能。这两个函数没有调用。

```
 onProgress: function(event),
    uploadProgress: function(event, position, total, percentComplete) 
```

我参考了以下有用的链接。

*   [http://jquery.malsup.com/form/#file-upload](http://jquery.malsup.com/form/#file-upload)
*   [http://jquery.malsup.com/form/progress.html](http://jquery.malsup.com/form/progress.html)

# javascript - jQuery将元素的高度设置为组中的最高值

> ID：16079803
> 
> 赞同：3
> 
> 时间：2013-04-18T09:55:15.357
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 从 div 中的前 3 个元素中找到最高元素，然后将所有 3 个元素设置为相同的高度，然后检查下一个 3 个并设置它们.. 等等。如果我的窗口宽度 == X，也如果窗口宽度 < X 然后找到最高的 2 个元素然后设置它们，然后是下一个 2，然后是下一个 2，依此类推。

这是我当前适用于所有元素的代码，我只想通过组（2 和 3）中的元素并根据结果和窗口大小设置该组的高度。

```
// Find highest element and set all the elements to this height.
    $(document).ready(function () {

    // Set options
    var height = 0;
    var element_search = "#cat_product_list #cat_list";
    var element_set = "#cat_product_list  #cat_list";

    // Search through the elements set and see which is the highest.
    $(element_search).each(function () {
        if (height < $(this).height()) height = $(this).height();
        //debug_(height,1);
    });

    // Set the height for the element(s if more than one).
    $(element_set).each(function () {
        $(element_set).css("height", (height+40) + "px");
    });
}); 
```

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T10:19:43.600

尝试将它们全部设置为最大高度：

```
$(document).ready(function() {
  var maxHeight = 0;
  $("#cat_product_list #cat_list").each(function() {
    if ($(this).outerHeight() > maxHeight) {
      maxHeight = $(this).outerHeight();
    }
  }).height(maxHeight);
}); 
```

**22/09/16 更新**：您也可以在没有任何 Javascript 的情况下使用 CSS Flexbox 实现相同的目标。将容器元素设置为 have`display: flex`将自动将元素的高度设置为相同（跟随最高的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:41:51.227

我现在已经整理好了，看看我的小提琴：

[http://jsfiddle.net/rhope/zCdnV/](http://jsfiddle.net/rhope/zCdnV/)

```
// Find highest element and set all the elements to this height.
$(document).ready(function () {

// If you windows width is less than this then do the following
var windowWidth = $(window).width();
if (windowWidth < 2000) {
    var i = 0, 
        quotes = $("div#cat_product_list").children(),
        group;

    while ((group = quotes.slice(i, i += 2)).length) {
        group.wrapAll('<div class="productWrap"></div>');
    }
}

// Find the width of the window
var windowwidth = $(window).width();
//debug_(windowwidth);

// Set options
var height = 0;
var element_wrap = ".productWrap";
var element_search = ".cat_list";

// Search through the elements set and see which is the highest.
$(element_wrap).each(function () {
    $(this).find(element_search).each(function () {
        if (height < $(this).height()) height = $(this).height();
    });

    //alert("Block Height: " +height);

    // Set the height for the element wrap.
    $(this).css("height", (height) + "px");

    // Unset height
    height = 0;
});

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T09:37:17.180

只是添加另一个建议。这是我编写的一个接受一个参数的 jQuery 插件。你可以这样称呼它：

```
$('.elementsToMatch').matchDimensions("height"); 
```

您可以匹配高度、宽度，或者如果没有输入参数，则两个尺寸都可以匹配。

```
$(function() {
  $(".matchMyHeight").matchDimensions("height");
});

(function($) {

  $.fn.matchDimensions = function(dimension) {

    var itemsToMatch = $(this),
        maxHeight = 0,
        maxWidth = 0;

    if (itemsToMatch.length > 0) {

      switch (dimension) {

        case "height":

          itemsToMatch.css("height", "auto").each(function() {
            maxHeight = Math.max(maxHeight, $(this).height());
          }).height(maxHeight);

          break;

        case "width":

          itemsToMatch.css("width", "auto").each(function() {
            maxWidth = Math.max(maxWidth, $(this).width());
          }).width(maxWidth);

          break;

        default:

          itemsToMatch.each(function() {
            var thisItem = $(this);
            maxHeight = Math.max(maxHeight, thisItem.height());
            maxWidth = Math.max(maxWidth, thisItem.width());
          });

          itemsToMatch
            .css({
              "width": "auto",
              "height": "auto"
            })
            .height(maxHeight)
            .width(maxWidth);

          break;
      }
    }
    return itemsToMatch;
  };
})(jQuery);
```

```
.matchMyHeight {background: #eee; float: left; width: 30%;  margin-left: 1%; padding: 1%; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="matchMyHeight">
  Div 1
</div>

<div class="matchMyHeight">
  Div 2
</div>

<div class="matchMyHeight">
  Div 6<br> Div 6<br> Div 6<br> Div 6
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-21T11:45:40.953

```
 var highHeight = "0";
    $(".item").each(function(){
        var thHeight = $(this).height();
        if(highHeight < thHeight ){
            highHeight = thHeight;
        }
    });

console.log(highHeight) 
```

# c# - 如何使用动态对象将变量用作方法名称

> ID：16079813
> 
> 赞同：7
> 
> 时间：2013-04-18T09:55:55.047
> 
> 标签：c#, signalr

在 SignalR 中，在 HubConnectionContext 中定义了公共属性，如下所示：

```
public dynamic All { get; set; } 
```

这使用户可以这样称呼它：`All.someMethodName();` 太棒了。

我现在想在我的函数中使用传入参数来调用它。我怎样才能做到这一点？

如： `All.<my variable as method name>();`

有没有办法做到这一点？

谢谢

**编辑**示例：

```
 public void AcceptSignal(string methodToCall, string msg)
    {
        Clients.All.someMethod(msg);       // THIS WORKS
        Clients.All.<methodToCall>(msg);   // THIS DOES NOT WORK (But I would like it to!)
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T18:40:01.353

虽然我喜欢所有有趣的反射答案，但有一种更简单、更快捷的方法可以使用字符串作为方法名称来调用客户端集线器方法。

`Clients.All`, `Clients.Others`, `Clients.Caller`, `Clients.AllExcept(connectionIds)`, `Clients.Group(groupName)`, `Clients.OthersInGrouop(groupName)`, 和`Clients.Client(connectionId)`都是动态对象，但它们也都实现了[IClientProxy](http://msdn.microsoft.com/en-us/library/jj918974%28v=vs.100%29.aspx)接口。

您可以将这些动态对象中的任何一个转换为`IClientProxy`，然后调用[Invoke(methodName, args...)](http://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.hubs.iclientproxy.invoke%28v=vs.100%29.aspx)：

```
public void AcceptSignal(string methodToCall, string msg)
{

    IClientProxy proxy = Clients.All;
    proxy.Invoke(methodToCall, msg);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:03:38.247

您可以使用反射来实现这一点：

```
Type allType = All.GetType();
// GetType() may return null in relation to dynamics objects
if (allType != null)
{
    MethodInfo methodInfo = allType.GetMethod(methodToCall);
    methodInfo.Invoke(All, null);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T10:59:36.113

```
public void AcceptSignal(String methodToCall, String msg) {
    var count=(
        from target in new[] { Clients.All }
        from memberInfo in ((Type)target.GetType()).GetMember(methodToCall)
        where MemberTypes.Method==memberInfo.MemberType
        let methodInfo=memberInfo as MethodInfo
        let paraInfos=methodInfo.GetParameters()
        where null!=paraInfos.FirstOrDefault(x => msg.GetType()==x.ParameterType)
        select methodInfo.Invoke(target, new object[] { msg })
        ).Count();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T19:58:26.523

您可以使用反射来找到方法。但这仅适用于以通常的非动态方式定义的“真实”非动态方法，仅隐藏在`dynamic`关键字后面。

但是，如果对象`All`是真正动态的，例如`ExpandoObject`从 派生的 an 或其他东西`System.Dynamic.DynamicObject`，则“方法”可能是仅在运行时与类型相关联的东西，在这种情况下`typeof(All).GetMethod`将找不到任何东西。

最初是 Ilya Ivanov 在对[John Willemse 的回答](https://stackoverflow.com/a/16079971/1336654)的评论中指出了这一点。很明显，该对象是一个[`Microsoft.AspNet.SignalR.Hubs.ClientProxy`](http://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.hubs.clientproxy.aspx)实例。

因此，从该类型的文档中，解决方案是：

```
string methodToCall = XXX;
string msg = YYY;
((ClientProxy)(Clients.All)).Invoke(methodToCall, msg); 
```

# android - Android，如何获取/设置布局参数？

> ID：16079818
> 
> 赞同：4
> 
> 时间：2013-04-18T09:56:06.563
> 
> 标签：android, android-layout, layoutparams

在我的应用程序中，我有一个对话室。我所有的消息都应该右对齐，而其余的应该左对齐。

我列表的单行是这样的：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/llContainer" >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:background="@drawable/speech_bubble_orange"
        android:id="@+id/llGroup" >

            <TextView
                android:id="@+id/message_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:shadowColor="@color/message_textShadow"
                android:shadowDx="1"
                android:shadowDy="1"
                android:text="Medium Text"
                android:textColor="@color/message_textColor"
                android:textSize="20sp" />

            <TextView
                android:id="@+id/message_date"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/temp_date"
                android:gravity="right"
                android:layout_marginLeft="4dp"
                android:layout_marginRight="4dp"/>
    </LinearLayout>

</LinearLayout> 
```

我的适配器的 getView() 是这样的：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {
        convertView = myInflater.inflate(R.layout.list_message_row, null);
        holder = new ViewHolder();

        holder.tvMessageBody = (TextView) convertView.findViewById(R.id.message_text);
        holder.tvMessageDate = (TextView) convertView.findViewById(R.id.message_date);
        holder.llContainer = (LinearLayout) convertView.findViewById(R.id.llContainer);
        holder.llGroup = (LinearLayout) convertView.findViewById(R.id.llGroup);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.tvMessageBody.setText(messageList.get(position).getMessageBody());
    String date = messageList.get(position).getSentDate();
    holder.tvMessageDate.setText(formatFanciedDate(date));

    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) holder.llContainer.getLayoutParams();
    try {
        if(messageList.get(position).isMine()) {
            holder.llGroup.setBackgroundResource(R.drawable.speech_bubble_green);
            params.gravity = Gravity.RIGHT;
        }
        //If not mine then it is from sender to show orange background and align to left
        else {
            holder.llGroup.setBackgroundResource(R.drawable.speech_bubble_orange);
            params.gravity = Gravity.LEFT;
        }

        holder.llContainer.setLayoutParams(params);

    } catch (NullPointerException e) {
        e.printStackTrace();
    }

    return convertView;
} 
```

我认为一切都应该没问题，但是当我运行应用程序时发生 NullPointerException 并指向`params.gravity = Gravity.RIGHT;`or `params.gravity = Gravity.LEFT;`（取决于 isMine() 方法）。

你认为呢？我的错误在哪里？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T10:07:17.513

`getLayoutParams()`将返回`null`，直到视图附加到其父级。

尝试使用其构造函数创建布局参数，而不是使用`getLayoutParams()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T10:03:07.920

使用 RelativeLayout 参数并像这样设置重力，它会起作用。

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE); 
```

这在我的应用程序中对我有用。

# linux - 如何处理 shell 脚本中 $PWD 值的变化？

> ID：16079822
> 
> 赞同：0
> 
> 时间：2013-04-18T09:56:14.093
> 
> 标签：linux, shell

我有一个由工具执行的 shell 脚本。当它由这个工具执行时，$PWD 的值由该工具设置。但是，当我手动执行脚本时 $PWD 的值是脚本的当前目录。

现在我使用这个 $PWD 环境变量在脚本中定位不同的文件位置。

但是当我手动执行它时，文件路径会发生变化，并且会产生意想不到的结果。

任何建议如何在手动或通过该工具执行脚本时处理 $PWD 值的这种变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:05:16.140

如果您需要访问脚本本身所在的目录，可以在 bash 中使用

```
script_dir=$(readlink -f ${0%/*}) 
```

它获取脚本的相对路径 ( `$0`)，切断脚本名称并将其转换为完整路径。

# c - 释放在块中间声明的 C 指针（寻求相关文档）

> ID：16079835
> 
> 赞同：1
> 
> 时间：2013-04-18T09:56:48.360
> 
> 标签：c, pointers, malloc, declaration

这种行为记录在哪里（如果有的话）？

当您在 C 中在块的中间声明一个指针时，它可能处于错误状态（指向不可用的内存）并且您不能使用标准`if (a) free(a)`来释放它。

想到的最简单的程序是

```
#include <stdlib.h>
int main(int argc, char *argv[]){
    if(argc > 1) goto END;
    char *a = NULL;
    a = calloc(1,1);
END:
    if(a) free(a);
} 
```

运行不带参数的程序，它工作正常，如果你用至少一个参数运行它，它可能会出现如下错误：（对我来说）令人惊讶的是，如果你用 clang 编译它，它可能会工作（在我的 OS X 上它确实，但在 NetBSD 上却没有）。如果你使用 gcc，它总是返回一个

```
malloc: *** error for object 0x7fff5fc01052: pointer being freed was not allocated
```

请注意，在块头声明的同一程序是正确的。

**编辑**：请注意，问题是关于*文档*的。我意识到做我描述的事情是不安全的，但我发现没有明确显示它的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:59:16.813

The "pattern"

```
if(a) free(a); 
```

is certainly *not* standard, or at least it shouldn't be. It's *safe* to pass `NULL` to `free()`, so the `if` adds *nothing*.

I would expect the value of `a` to be undefined (not likely to be `NULL`) if you jump past the initialization, which makes perfect sense to me. This is really hairy code, don't do this.

It could be argued that the existance of the `goto` and label imply a scope that isn't implemented, and there's no reason at all that the `free(a);` statement is after the label (outside the "invisible" scope where `a` is defined).

# objective-c - 如何使 iOS 显示位置警报始终如一？

> ID：16079836
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:56:51.237
> 
> 标签：objective-c, xcode4.5

> 打开定位服务以允许确定您的位置

当我们尝试访问位置服务时，会弹出此窗口。但是，它不会始终弹出。我想它会出现一次。如何让 iOS 始终如一地显示它？

注意：我知道这里有一个问题：[每次都获取当前位置的警报](https://stackoverflow.com/questions/16075337/get-alert-for-current-location-every-time)。所有答案都讨论了您应该如何更改设置。这就是用户应该做的。我希望**iOS**始终向用户弹出警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:59:57.437

well this option pops up when there location service is disabled.and it is needed only there. so the question for you is

why ? why you want to show it consistently?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:47:29.487

当我们打电话时，警报会自动显示

```
[singleton.locationManager startUpdatingLocation]; 
```

像我这样的菜鸟常犯的错误是首先检查是否启用了位置更新，然后在未启用时不调用该行。所以警报没有出现。

巧合的是，这些正是 IOS 推荐的模式。许多问题几乎是同一件事，但没有一个答案指向这一事实。

# javascript - 分离然后附加 AngularJS 表单更改有效性状态

> ID：16079843
> 
> 赞同：4
> 
> 时间：2013-04-18T09:57:18.647
> 
> 标签：javascript, jquery, angularjs, angularjs-directive

您可以在此 jsFiddle 中对其进行测试：[HERE](http://jsfiddle.net/4dVec/) （最好在新的 jsFiddle 上查看，请参阅本文的**编辑**部分）

我认为 AngularJS 中存在错误，或者至少不是预期的结果。如果我分离一个表单然后重新附加它，它的类`ng-invalid`切换到`ng-valid`重新附加到 DOM。即使数据无效，这也会导致启用表单的提交按钮。当然，我期待有效性状态不会切换。

我认为这是一个角度错误，但可能是一个 jquery 错误。我可以使用 jquery 检查附加表单是否有效，然后强制表单类，但它似乎不能作为有效表单工作，然后获取无效状态。这很奇怪，因为在分离之前不使用某种数据来保存状态表单，我不知道任何其他解决方法。

那么有人已经遇到过这个问题吗？有什么方法（如果可能的话使用 AngularJS 指令）来摆脱这个错误？

PS：我需要在单页 Web 应用程序中分离表单（和任何其他元素）以保持 DOM 尽可能干净。

**编辑**

我已经完成了一个新的 jsFiddle，它更多地说明了我的问题，在内部站点导航上分离内容：http: [//jsfiddle.net/EWVwa/](http://jsfiddle.net/EWVwa/)

**更新**

我来到这个临时解决方案（感谢CaioToOn）

[http://plnkr.co/edit/KIgMz2](http://plnkr.co/edit/KIgMz2)

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';
});

app.directive('customValidation', function() {
  return {
    require: ['ngModel', '^?form'],
    link: function(scope, element, attr, ctrls) {
      console.log(ctrls);
      var ngModelCtrl = ctrls[0],
          formCtrl = ctrls[1];

      ngModelCtrl.$parsers.push(function(viewValue) {
        if (viewValue === 'test') {
          ngModelCtrl.$setValidity('name', true);
          formCtrl.$setValidity('name', true);
          return viewValue;
        } else {
          ngModelCtrl.$setValidity('name', false);
          formCtrl.$setValidity('name', false);
          return undefined;
        }
      });

      // custom event
      element.bind('$append', function() {
        formCtrl && formCtrl.$addControl(ngModelCtrl);
        /*** TEST for to keep form's validation status ***/
        formCtrl.$setValidity('name', ngModelCtrl.$valid);
        //ngModelCtrl.$setValidity('name', ngModelCtrl.$valid);
        console.log(formCtrl.$valid);
      });
      //binding on element, not scope. 
      element.bind('$destroy', function() {
        console.log("gone haven");        
      });
    }
  };
}); 
```

这需要更多关于多输入验证的测试。完成所有测试后，我肯定会更新答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T18:15:42.317

出现问题是因为当从 DOM 中删除元素时，`input`指令会从表单控件[中删除自己。](https://github.com/angular/angular.js/blob/master/src/ng/directive/input.js#L1124-L1126)由于它不再链接您`ngModel`和表单控制器，因此表单不再考虑您的输入。

你基本上有~~两个~~三个选项：

*   更改元素可见性而不是删除它
*   （更喜欢下面的那个）~~公开一个“重新链接”功能，将其重新添加到原始表单中~~
*   在所有控件上触发自定义事件，以便它们可以重新链接自己

**更改元素可见性**意味着您将在 DOMTree 中拥有不必要的 DOM 元素。这还不错，因为您仍然保留对 $compile 元素的引用，因此它将参与`$digest`循环和“DOM”修改。

（*想了一会儿，新的解决方案比这个稍微好一点，所以不要暴露*relink函数）**~~暴露relink函数~~**是很奇怪的（虽然是功能性的），这不是最可靠的解决方案。实现它的一种方法是要求表单控制器（`require: ['ngModel', '^?form']`）并将重新链接函数绑定到元素的数据：

```
element.data('relink', function(){
  formCtrl && formCtrl.$addControl(ngModelCtrl);
}); 
```

当您再次将元素添加到屏幕时，您将不得不调用所有控件的重新链接函数：

```
$('.controls').data('relink')(); 
```

[请参阅此处](http://plnkr.co/edit/6oYblF?p=preview)的示例。

它不太可靠，但可能适用于您的情况。

**触发自定义事件**与之前的几乎相同，但您将在所有应该重新链接自身的元素上调度自定义事件。这样更有条理，但仍然不太可靠，因为表单和其他链接也可能已损坏（再次，应该足以满足您的情况）。基本上听你的指令的自定义事件：

```
element.bind('$append', function(){
  formCtrl && formCtrl.$addControl(ngModelCtrl);
}); 
```

并且更改为表单后，只需在所有控件上触发自定义事件即可：

```
$('.control').triggerHandler('$append'); 
```

这个更好的原因是指令仍然决定何时重新链接组件，并且事件是一种“通用”。[这是一个工作的plunker](http://plnkr.co/edit/ezLqrS?p=preview)。

作为最后的努力，您可以`jQuery.fn.append`递归地覆盖并触发所有子元素上的自定义事件（这是[Angular](https://github.com/angular/angular.js/blob/master/src/jqLite.js#L115-L146)在删除元素时所做的）。这是最有条理的，但它会影响您在所有`append`呼叫中的表现。

# ruby-on-rails - Rails 如何提供 .pde 资产文件

> ID：16079844
> 
> 赞同：0
> 
> 时间：2013-04-18T09:57:19.550
> 
> 标签：ruby-on-rails, asset-pipeline, processing, assets

我的 .html 文件中有：

```
<%= javascript_include_tag "processing-1.4.1.min" %>
<canvas data-processing-sources="/assets/pjs/my.pde"></canvas> 
```

资产就在那里：`app/assets/pjs/my.pde`.

我在服务器中收到此错误：

```
Served asset /pjs/my.pde - 404 Not Found (10ms) 
```

和javascript中的这个错误：

```
Uncaught Processing.js: Unable to load pjs sketch files: /assets/pjs/my.pde ==> Invalid XHR status 404 
```

我的 application.rb 说：

```
config.assets.enabled = true 
```

可能是一个非常愚蠢的错误，但我就是不明白。如果有人能告诉我如何解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:07:02.260

为您的视图文件使用 erb 扩展名，然后使用`asset_path 'my.pde'`. 使用资产管道时，您不能直接链接到路径，因为文件会添加指纹。

# android - 单击imageview android时转移到不同的链接

> ID：16079850
> 
> 赞同：0
> 
> 时间：2013-04-18T09:57:53.033
> 
> 标签：android

我已经使用`ImageView`并添加了一个链接。我已经为它设置了听众。这是代码：

```
case R.id.imgLogo:
    String url = "http://www.xyz.com";
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse(url));
    startActivity(intent);
    break; 
```

但是，在单击 imageview 时，“www.xyz.com”的价值是什么，它会带到一些不同的网页上。

我能知道是什么错误吗？

# asp.net - 使用数据库值验证模板文本框

> ID：16079851
> 
> 赞同：0
> 
> 时间：2013-04-18T09:57:54.503
> 
> 标签：asp.net, validation, gridview, templatefield

我正在开发一个网站，并在 gridview 模板字段中有一个文本框。此文本框收集“订单数量”的输入，该输入必须与“可用数量”（存储在数据库中）进行比较。

我在 gridview 中使用 RowEditing、RowUpdating 和 RowCanceling 事件进行编辑操作。

我尝试使用文本框的“TextChanged”事件来实现上述要求。但问题是，当用户编辑数量并单击“更新”按钮时，文本框事件首先触发，更新按钮事件不会触发。因此，用户被迫再次单击“更新”按钮。

上述场景或用于实现上述要求的任何其他事件是否有任何解决方法？

谢谢，巴拉吉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:56:47.030

我想我会尝试使用 CustomValidator。使用 CustomValidator，您可以在“_ServerValidate”事件处理程序中定义验证代码。

在您的验证代码中，您可以调用数据库以获取当前值，然后将其与提交的值进行比较（如果您指定 ControlToValidate，则可以通过事件处理程序的 ServerValidateEventArgs 参数获得）。

为了在数据库中查找当前值，您需要知道点击了哪条记录。为此，您可以使用行按钮的 CommandArgument 属性或在行中包含一个隐藏字段来存储某种类型的 ID。然后您可以捕获该 ID 并使用它在数据库中查找所需的记录。

**用代码更新**

```
Protected Sub cusCustom_ServerValidate(source As Object, args As System.Web.UI.WebControls.ServerValidateEventArgs)
    Dim cv As CustomValidator = CType(source, CustomValidator)
    Dim HiddenField_ID As HiddenField = CType(cv.Parent.FindControl("HiddenField_ID"), HiddenField)
    *** Use ID to look up value in database ***
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:05:02.577

您可以为此使用 RangeValidator ...

```
 <asp:RangeValidator ID="RangeValidator1" ControlToValidate="YourTexBoxId" 
runat="server" MinimumValue="0" Type="Integer"
MaximumValue='<%# GetQuantity(Eval(TotalQaunt).ToString(),Eval(ItemId).ToString()) %>'
 ErrorMessage="RangeValidator"></asp:RangeValidator> 
```

编写一个函数 lyk this ON CODE BEHIND

```
string GetQuantity(string totalquantity,string itemid)
{
DO OPERATRION TO GET QUANTITY.....
return quantity;
} 
```

# django - Django-从模型中定义的函数提供下载

> ID：16079852
> 
> 赞同：0
> 
> 时间：2013-04-18T09:57:59.710
> 
> 标签：django, function, django-models, download

我正在尝试实现一个视图，其中已上传文件的登录用户可以下载他的文件，但只能下载他的文件，而不是其他用户文件，因此我不会根据文件的 pk 创建 id url。作为视图的结果，我查询了 test_result_file 表，并为特定用户过滤了它。我认为我可以通过在我的模型中编写一个函数来做我想做的事情：

```
class test_result_file(models.Model):
    user=models.ForeignKey(User)
    system=models.ForeignKey(system)
    test_id=models.ForeignKey(Detail)
    path=models.CharField(max_length=300)
    class Meta:
        verbose_name="Test Result file"
        verbose_name_plural="Test Result files"
    def get_self(self):
        path=self.path
        wrapper = FileWrapper(open( path, "r" ))
        response=HttpResponse(wrapper, content_type="text/plain")
        response['Content-Disposition'] ='attachment; filename="results.txt"'
        return response 
```

但是，在模板中，当我调用时：

```
 <ul>
    {% for at in attempts %}
    <li>System Name: <em>"{{ at.system}}"</em>, download file: <a href="{{at.get_self}}">here</a> </li>
     {% endfor %}</ul> 
```

没有提供下载，而是浏览器尝试打开一个包含所有响应参数的 url，但失败了。我失去了什么吗？这个功能可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:40:04.570

第一点：响应不是 url。您在模板中想要的是 url，而不是响应。第二点：生成响应是视图的责任，而不是模型的责任。旁注：您应该尊重 Python 的编码约定（cf pep08）

组织代码的 RightWay(tm) 将是：

```
# myapp/models.py
class TestResultFile(models.Model):
    user=models.ForeignKey(User)
    system=models.ForeignKey(System)
    test_id=models.ForeignKey(Detail)
    path=models.CharField(max_length=300)
    class Meta:
        verbose_name="Test result file"
        verbose_name_plural="Test result files"

# myapp/views.py
def download_file(request, file_id):
    testfile = get_object_or_404(TestResultFile, pk=file_id)
    wrapper = FileWrapper(open(testfile.path, "r" ))
    response=HttpResponse(wrapper, content_type="text/plain")
    response['Content-Disposition'] ='attachment; filename="results.txt"'
    return response 

# myapp/urls.py
urlpatterns = patterns('',
    url(r'^download/(?P<file_id>\d+)/?', 'views.download_file', 'myapp_download_file'),
    # ...
    )

# myapp/templates/myapp/template.html
<ul>
{% for at in attempts %}
  <li>
      System Name: <em>"{{ at.system}}"</em>, 
      download file: <a href="{% url 'download_file' at.pk %}">here</a> 
  </li>
 {% endfor %}
 </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:52:04.147

也许你可以简单地使用这样的东西：

```
class userfile(model.Model):
    user=models.ForeignKey(User)
    file = models.FileField(_('file'), upload_to='userfile/', blank=False)

    def __unicode__(self):
        return "%s file" % user 
```

在你的模板中：

```
 {% if user.userfile_set.count > 0 %}
 <ul>
 {% for file in user.userfile_set.all %}
 <li>File: <a href="{{MEDIA_URL}}{{file.file}}">{{file}} dowload it</a></li>
 {% endfor %}
 </ul>
 {% else %}
 You don't have any file
 {% endif %} 
```

我希望它可以帮助你。

# ruby - 找不到具有管理员角色的用户

> ID：16079853
> 
> 赞同：0
> 
> 时间：2013-04-18T09:58:00.693
> 
> 标签：ruby, ruby-on-rails-3

现在我尝试查找用户是否有权以管理员身份执行某些操作。

这是用户模型代码：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

  has_many :user_roles
  has_many :roles, :through => :user_roles

  def has_role?(role)
     case role
        when :admin then admin?
        when :member then true
        else false
     end
  end

  def admin?
    roles.each do |role|
       return true if role.name == 'admin'
    end

    return false
  end
end 
```

现在有一个角色名称 = admin 的用户，测试代码在这里：

命令：rails c

```
user  = User.find(1)
user.has_role?('admin') 
```

结果是：

=> 假的

为什么不是真的？

还有什么我认为管理员？方法需要一些重构。现在它很漂亮，但我不知道如何重构）：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:24:37.750

这是因为您在方法参数中使用字符串，在 case 语句中使用符号。

重构has_role可能会更好？方法是这样的：

```
def has_role?(role)
  case role.to_s
    when 'admin' then admin?
    when 'member' then true
    else false
  end
end 
```

`.to_s`用于将非字符串（如符号）转换为字符串，因此您可以调用`has_role? :admin`and 并`has_role? 'admin'`获得相同的结果。

另外，您的`admin?`方法看起来很丑陋。

您可以将其重写为：

```
def admin?
  roles.any? { |r| r.name == 'admin' }
end 
```

或者写更通用`has_role?`的：

```
def has_role?(role)
  roles.any? { |r| r.name == role.to_s }
end 
```

# jquery - jquery更改事件未注册动态添加的选择

> ID：16079855
> 
> 赞同：0
> 
> 时间：2013-04-18T09:58:09.117
> 
> 标签：jquery, select, dynamic

希望有人可以提供帮助，当有人更改选择时，我有一些点头 jquery 可以启动，如下所示： -

```
$(function() {
    $("select").change(function() {
        var banana = $(this).attr("id");

        if((banana.indexOf("forms[")>-1)){
            var formID= $(this).val();
            getFormInformation(formID);
        }
    });
}); 
```

这对于首次加载时出现在页面上的所有选择都很好，但是，我还有一些 jQuery 在那里可以动态地将额外的选择添加到带有帖子的页面中，并且它不会为那些选择它，有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:59:42.680

Change:

```
$("select").change(function() { 
```

To:

```
$(document).on("change", "select", (function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:00:38.577

使用“on”代替[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(function() {
  $('body').on('change','select', function() {
        var banana = $(this).attr("id");

        if((banana.indexOf("forms[")>-1)){
            var formID= $(this).val();
            getFormInformation(formID);
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:02:20.733

您需要将事件处理程序附加到动态附加的元素。使用`jQuery`，该`.on()`方法将事件处理程序附加到`jQuery object`. 从 开始`jQuery 1.7`，该`.on()`方法提供了附加事件处理程序所需的所有功能。

这可能会帮助您：

```
$(document).on('click','select',function(){
    alert("click");
}); 
```

另请查看`.on()` [文档](http://api.jquery.com/on)。

# algorithm - ListMap：删除m个最小的元素值最小的

> ID：16079856
> 
> 赞同：0
> 
> 时间：2013-04-18T09:58:09.373
> 
> 标签：algorithm, data-structures, map

我必须做一个函数，输入一个整数 m，并删除地图中具有最小值的 m 元素。我的主要问题是使用 O(nlogn) 复杂性来执行此操作。（n是地图的大小）

这是我的解决方案：

```
if (Map.isEmpty())
    return;
if (Map.size()<m){ //remove all keys
      Iterator<K> it=Map.keys().iterator(); //collection of all keys 
      while (it.hasNext())
          Map.remove(it.next());
}
else{
for (int i=0; i<m; i++){
   key=Map.findKeyMin() //complexity:O(n)
   Map.remove(K);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:09:46.850

您可以在 O(n) 时间内完成。看看[http://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)。本质上，您找到第 m 个元素并删除小于或等于第 m 个元素的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:32:31.517

您的解决方案具有次优的复杂度 O(n*m)。在标题`c++`中有一个函数，称为此函数是线性的，它将集合中的最小元素与其他元素分开。该功能是使用 qsort 算法的修改实现的，我相信这就是您需要的。`<algorithm>``nth_element``n`

# java - How to display currently logged in user's information from oracle database to jsp form

> ID：16079859
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:58:14.593
> 
> 标签：java, javascript, html

I have a login form in JSP. All the login information I'm storing in Oracle database.

For new users they need to register to login. But for the users those who have accounts, as they logs in they will have the option called "Account Setting" where they can edit their basic information.

When user clicks on that link, his account information should be displayed. But I'm not able to retrieve currently logged in user's information from database.

Here is my JSP code to check whether user's account exists or not:

```
 <%  

try 

{

     String user=request.getParameter("username");

     String pass=request.getParameter("password");

     Class.forName("oracle.jdbc.driver.OracleDriver");
     Connection 

  con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","manager");
  Statement st=con.createStatement();

 ResultSet rs=st.executeQuery("select * from student where
 username='"+user+"' and 

 password='"+pass+"'");

  int count=0;
        while(rs.next())
       {
           count++;
       }

           if(count>0)
            {
             out.println("welcome "+user);
            }
           else
             {
               response.sendRedirect("studentlogin.jsp");
             } 

 }
   catch(Exception e) 
{  
 out.println(e); 
} 

 %>

    <a href="settings_std.jsp">Account Setting</a> 
```

If the user is valid then he can see the option "Account setting". i.e.

```
 <%

    String username=request.getParameter("username");

      Connection con=null;

  try 

{

Class.forName("oracle.jdbc.driver.OracleDriver");

con =DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system",
 "manager");    

Statement
st=con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);

ResultSet rs=st.executeQuery("select * from from student where
 username='"+username+"'");

  if(rs.next())

 {

 %>

         <h3>Your Account Information</h3>

        <table>

<tr><td>Name:</td><td><input type="text" name="name" value="          <%=rs.getString("name")%>"></td></tr>

<tr><td>Degree:</td><td><input type="text" name="degree" value="<%=rs.getString("degree")%>"></td></tr>

<tr><td>Semester:</td><td><input type="text" name="semester" value="<%=rs.getString("semester")%>"></td></tr>

<tr><td>Branch</td><td><input type="text" name="branch" value="<%=rs.getString("branch")%>"></td></tr>

<tr><td>Contact No:</td><td><input type="text" name="mobile" value="<%=rs.getString("mobile")%>"></td></tr>

<tr><td>Email:</td><td><input type="text" name="email"
 value="<%=rs.getString("email")%>"></td></tr>

<tr><td>Password:</td><td><input type="text" name="password"  value="<%=rs.getString("password")%>"></td></tr>

</table>

 <%

   }

 con.close();
   }

 %> 
```

Hope somebody knows this. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:20:40.177

我已经解决了我的问题。要从数据库中获取值，我们可以使用 JSP 会话。

IE

```
<%
   String name = request.getParameter( "username" );
   session.setAttribute( "theName", name );
%> 
```

在下一页中检索保存的用户名

```
ResultSet rs=st.executeQuery("select * from student where username='"+session.getAttribute("theName")+"'"); 
```

会话是与访问者关联的对象。可以将数据放入会话中并从中检索。

不管怎样，谢谢你们的尝试。

# latitude-longitude - Trouble converting UTM to lat long for southern hemisphere

> ID：16079860
> 
> 赞同：0
> 
> 时间：2013-04-18T09:58:15.490
> 
> 标签：latitude-longitude, coordinate-transformation, utm

I have ~40 points in UTM zone 19 taken from Peru that I would like to convert to lat/long to project onto Google Earth. I am having some problems with PBSmapping and can't seem to figure out the solution. I have searched through the forums and tried several different methods, including the project command in proj4 but still can't get this to work. Here is the code I have currently written

```
library(PBSmapping)
#just two example UTM coordinates
data<-as.data.frame(matrix(c(214012,197036,8545520,8567292),nrow=2))
attr(data,"projection") <- "UTM"
attr(data, "zone") <- 19
colnames(data)<-c("X","Y")
convUL(data,km=FALSE) 
```

The corresponding lat/longs should be somewhere with lats between -12.9XXXXX and -13.0XXXXX and long between -71.8XXXX to -71.4XXXX. The values given by convUL seem to be way off.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:06:34.673

一旦你得到有效的坐标对，你可以做这样的事情：

```
library(rgdal)
data <- data.frame(id = c(1:2), x = c(214012,197036) , y = c(8545520,8567292))
coordinates(data) = ~x+y 
```

分配投影

```
# Use the appropriate EPSG Code
proj4string(data) = CRS('+init=epsg:24891') # 24891 or 24893 
```

转换为地理坐标 `enter code here`data_wgs84 <- spTransform(data, CRS('+init=epsg:4326'))

获取一些有效的背景数据来绘制它

```
# Country data
package(dismo)
peru <-getData('GADM', country='PER', level=0)
plot(peru, axes = T)
plot(data, add = T) 
```

编写您的 KML 文件

```
# Export kml
tmpd <- 'D:\\'
writeOGR(data_wgs84, paste(tmpd, "peru_data.kml", sep="/"), 'id', driver="KML") 
```

# android - How get webview scale in Android 4

> ID：16079863
> 
> 赞同：8
> 
> 时间：2013-04-18T09:58:23.527
> 
> 标签：android, webview, pinch

WebView.getScale() is deprecated (but still usable)

The recommended way to get scale for webview is to use WebViewClient.onScaleChanged() [http://developer.android.com/reference/android/webkit/WebViewClient.html#onScaleChanged(android.webkit.WebView](http://developer.android.com/reference/android/webkit/WebViewClient.html#onScaleChanged(android.webkit.WebView), float, float)

I've added corresponding handler in my custom webview:

```
public class CustomWebView extends WebView {

public CustomWebView(Context context) {
    super(context);
    setWebViewClient(new WebViewClient() {
        @Override
        public void onScaleChanged(WebView view, float oldScale, float newScale) {
            super.onScaleChanged(view, oldScale, newScale);
            currentScale = newScale
        }
    });
} 
```

And now the problem: the method not invoked (at least on my nexus 7) if I'm zoom in/zoom out using pinch, so it works good only if I use zoom controls button.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T15:24:58.097

我正在为 API 级别 17 进行开发，出于同样的原因，我最终使用了已弃用的方法 getScale()。当我在 WebView 中使用捏缩放更改比例时，根本没有触发 WebViewClient.onScaleChanged()。我的扩展 WebView 中有一个自定义 GestureListener，当视图放大（缩放 1.0+）时，它的行为会有所不同。当我在 onScaleChanged() 中设置类变量时，我无法可靠地获得正确的比例值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T12:21:19.900

尝试 ：

```
public MyWebView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    setWebViewClient(new WebViewClient() {
        @Override
        public void onScaleChanged(WebView view, float oldScale, float newScale) {
            super.onScaleChanged(view, oldScale, newScale);
            currentScale = newScale;
        }
    });
} 
```

# python - Regarding classes in python

> ID：16079864
> 
> 赞同：0
> 
> 时间：2013-04-18T09:58:25.287
> 
> 标签：python, class

I have basic question about python classes. I would like to access
a class member defined in one python file across different files. Here is my code:

I have one python file `class_A.py`:

```
class A:

def Hello(self):
    self.a=12
    print "printing A value from class_1",self.a 
```

Here is the code of class_B.py file

```
import Class_A

def func_B():
   Instance = Class_A.A()
   Instance.Hello()

func_B() 
```

When I execute, it shows:

```
TypeError: Hello() takes no arguments (1 given). 
```

Basically what I'm trying to do is accessing class members defined in `class_A.py`
by creating an instance to that class inside the function `func_B` which is defined
in another python file `Class_B.py`. Is this right?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:03:34.213

我认为您的问题在于`class A`：

```
class A:
    def Hello(self):
        self.a = 12
        print "printing A value from class_1", self.a 
```

旁白：看看[`PEP8`](http://www.python.org/dev/peps/pep-0008/)风格指南。

# algorithm - What data structure will optimzied to represent stock market?

> ID：16079868
> 
> 赞同：5
> 
> 时间：2013-04-18T09:58:38.513
> 
> 标签：algorithm, data-structures

Data for various stocks is coming from various stock exchange continuously. Which data structure is suitable to store these data?

things to consider are :

a) effective retrieval and update of data is required as stock data changes per second or microsecond during trading time.

> I thought of using Heap as the number of stocks would be more or less constant and the most frequent used operations are retrieval and update so heap should perform well for this scenario.

b) need to show stocks which are currently trending (as in volume of shares being sold most active and least active, high profit and loss on a particular day)

I am nt sure about how to got about this.

c) as storing to database using any programming language has some latency considering the amount of stocks that will be traded during a particular time, how can u store all the transactional data persistently??

Ps: This is a interview question from Morgan Stanley.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:03:20.537

堆不支持有效的随机访问（即按索引查找），也不支持在不删除元素的情况下获取前 k 个元素（这是不希望的）。

我的答案是这样的：

数据库将是首选，因为有了适当的表结构和索引，所有必需的操作都可以有效地完成。

所以我想这更像是一个关于理解数据结构的理论问题（与内存存储相关，而不是持久性）。

似乎多个数据结构是要走的路：

> a) 由于股票数据在交易期间每秒或微秒发生变化，因此需要有效地检索和更新数据。

一张地图对这个很有意义。哈希图或树图允许快速查找。

> b) 如何显示当前趋势的股票（如在特定日期最活跃和最不活跃、高盈亏的股票数量）？

几乎任何排序的数据结构在这里似乎都是有意义的（上面的映射具有指向正确节点的指针，或者指向同一个节点）。一种用于活动，一种用于利润。

我可能会使用排序（双）链表。获取第一个或最后 n 个项目需要最少的时间。由于您通过地图有一个指向元素的指针，因此更新所需的时间与地图查找时间加上该项目再次排序所需的移动次数（如果有的话）一样长。如果一个项目经常一次移动多个索引，那么链表将**不是**一个好的选择（在这种情况下，我可能会选择二叉搜索树）。

> c) 如何持久存储所有事务数据？

我将这个问题理解为 - 如果与数据库的连接丢失或数据库在任何时候出现故障，您如何确保没有数据损坏？如果不是这样，我会要求改写。

几乎任何数据库课程都应该涵盖这一点。

据我记得 - 它与创建另一条记录、更新这条记录以及只有在它完全更新后才设置指向这条记录的真实指针有关。在此之前，您可能还必须设置一个指向旧记录的指针，以便您可以检查它是否已被删除，如果在设置指针之后但在删除之前发生了某些事情。

另一种选择是拥有一个活动事务表，您可以在启动事务时添加该事务表，并在事务完成时从该表中删除（它还存储所有必需的详细信息以回滚或恢复事务）。因此，只要一切正常，您就检查该表并回滚或恢复任何尚未完成的事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-20T15:42:40.717

如果我必须选择，我会选择**Hash Table**：

**原因：**它是同步和线程安全的，**BigO(1)**作为平均案例复杂度。

**提供：** 1.良好的哈希函数，避免碰撞。2\. 高性能缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:04:56.913

虽然这是一个与语言无关的问题，但我突然想到了一些要求。例如：

> 由于股票数据在交易期间每秒或微秒发生变化，因此需要有效地检索和更新数据。

java 类`HashMap`使用键值的哈希码来快速访问其集合中的值。它实际上具有`O(1)`运行时复杂性，这是理想的。

> 需要显示当前趋势的股票（如在特定日期出售的最活跃和最不活跃的股票数量，高盈亏）

这是一个基于实现的问题。最好的办法是实现一个快速排序算法，比如`QuickSort`or `Mergesort`。

> 考虑到将在特定时间交易的股票数量，使用任何编程语言存储到数据库都会有一些延迟，您如何持久存储所有交易数据？

数据库本来是我的首选，但这取决于您的资源。

# extjs - How to set blankText width?

> ID：16079870
> 
> 赞同：1
> 
> 时间：2013-04-18T09:58:44.100
> 
> 标签：extjs, extjs4.2

i have form with textfield allowBlank=false, and blankText='Inserire il motivo della richiesta'

In Firefox no problem, I read my text correctly: [firefox](http://imgur.com/cQi6VYU,oZLSD08)

In Chrome I get blankText unreadeable because text is shown with small width : [chrome](http://imgur.com/cQi6VYU,oZLSD08#1)

Anyone can tell me how to set blankText width, so I can read in all browsers?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:05:13.987

用另一个选项解决：设置“msgTarget：'title'”或“msgTarget：'under'”，我的blankText字符串可以正常工作，并且在firefox、chrome等上完全可见。

# extjs - Extjs LabelAlign=top is not working in panel

> ID：16079873
> 
> 赞同：0
> 
> 时间：2013-04-18T09:58:46.757
> 
> 标签：extjs, extjs3

I want to display the label on top of text field, but it is not displaying. Below is the code.(in fact the below code displays the label at the right side of text field).I am using extjs 3.4, note : Using form panel is also not working as expected (have pasted the code below)

Any help is much appreciated.

```
Ext.onReady(function () {
    var contentsPanel = new Ext.Panel({
        labelAlign: 'top',
        renderTo: Ext.getBody(),
        layout: 'form',
        defaultType: 'textfield',

        items: [{
            fieldLabel: 'First Name',
            name: 'first'
        }]
    });
    contentsPanel.show();
});   

Ext.onReady(function () {
    var contentsPanel = new Ext.form.FormPanel({
        renderTo: Ext.getBody(),
        defaultType: 'textfield',
        labelAlign: 'top',
        items: [{
            fieldLabel: 'First Name',
            name: 'first',
            labelAlign: 'top'
        }]
    });
    contentsPanel.show();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:11:28.790

labelAlign 是字段的属性，而不是面板属性。需要配置字段：

```
items:[{
    fieldLabel: 'FirstName',
    labelAlign: 'top',
    name: 'first'
}] 
```

如果要为所有面板字段设置 labelAlign，可以在面板配置中添加：

```
var contentsPanel = new Ext.Panel({
    fieldDefaults: {
        labelAlign: 'top'
    },
    ... 
```

# redmine - Redmine：检查用户是否具有特定权限

> ID：16079874
> 
> 赞同：2
> 
> 时间：2013-04-18T09:58:55.983
> 
> 标签：redmine, redmine-plugins

尝试编写一个插件，我需要检查用户是否具有特定权限。例如，我正在考虑这样的事情

```
if (user.current has "view_private_notes" ) 
do something
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:40:27.153

检查用户模型。您想要的几乎完全一样：

```
 # Return true if the user is allowed to do the specified action on a specific context
  # Action can be:
  # * a parameter-like Hash (eg. :controller => 'projects', :action => 'edit')
  # * a permission Symbol (eg. :edit_project)
  # Context can be:
  # * a project : returns true if user is allowed to do the specified action on this project
  # * an array of projects : returns true if user is allowed on every project
  # * nil with options[:global] set : check if user has at least one role allowed for this action,
  #   or falls back to Non Member / Anonymous permissions depending if the user is logged
  def allowed_to?(action, context, options={}, &block) 
```

您可以通过插件扩展现有模型并添加您喜欢的方法来组合现有的：

//init.rb

```
 ActionDispatch::Callbacks.to_prepare do
  unless User.included_modules.include?(MyPlugin::UserPatch)
    User.send(:include, MyPlugin::UserPatch)
  end
 end 
```

//user_patch.rb 是这样的：

```
 def self.included(base)
   base.class_eval do
     unloadable

   # need to pass context to be able trigger allowed_to method in old way.
   has_right_view_project(project,context)
     self.allowed_to?({:controller => context[:controller], :action => context[:action]}, project, :global => true)
   end
 end 
```

实际上，使用现有方法很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T20:13:29.130

```
if User.current.allowed_to?(:view_private_notes, @project)
  puts "i know what you did!"
end 
```

# javascript - Jquery - parse XML received from URL

> ID：16079875
> 
> 赞同：1
> 
> 时间：2013-04-18T09:58:57.337
> 
> 标签：javascript, jquery, xml, url

I have this URL, that I supposedly should receive an XML from. So far I have this:

```
 function GetLocationList(searchString)
    {

  $.ajax({
    url: "http://konkurrence.rejseplanen.dk/bin/rest.exe/location?input=" + searchString,
    type: "GET",
    dataType: "html",
    success: function(data) {

    //Use received data here.
    alert("test");

    }
}); 
```

Tried to debug with firebug, but it doesn't go into the success method. Though, in DreamWeaver it **is** able to post a simple alert, which is inside the success method. I tried writing **xml** as dataType, but it doesn't work (in DreamWeaver) when I write alert(data). But it shows an alert with the entire XML, when I write **html** as dataType.

How do I get the XML correctly, and how do I parse and for example get the "StopLocation" element?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:39:47.093

尝试添加一个错误函数。

请参阅[在此处输入链接描述](http://api.jquery.com/jQuery.ajax/)

这将为您提供使用 Firefox 调试代码所需的所有信息。

```
$.ajax({
    url: "http://konkurrence.rejseplanen.dk/bin/rest.exe/location?input=" + searchString,
    type: "GET",
    dataType: "html",
    success: function(data) {

    //Use received data here.
    alert("test");

    },
    error: function(jqXHR, textStatus, errorThrown ){
      // debug here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:07:40.383

你需要先解析它，然后你可以搜索属性。像这样。

```
success: function(data) {
        var xml = $.parseXML(data)
        $(xml).find('StopLocation').each(function()
    {
        var name = $(this).attr('name');
        alert(name);
    }       
    ); 
```

这将为您提供每个 StopLocation 的名称。

希望这会有所帮助，您也可以对文档中的所有其他属性使用相同的方法。

# r - Is there any way to break out of a foreach loop?

> ID：16079882
> 
> 赞同：23
> 
> 时间：2013-04-18T09:59:07.817
> 
> 标签：r, foreach, parallel-processing, break

I am using the R package `foreach()` with `%dopar%` to do long (~days) calculations in parallel. I would like the ability to stop the entire set of calculations in the event that one of them produces an error. However, I have not found a way to achieve this, and from the documentation and various forums I have found no indication that this is possible. In particular, `break()` does not work and `stop()` only stops the current calculation, not the whole `foreach` loop.

Note that I cannot use a simple for loop, because ultimately I want to parallelize this using the doRNG package.

Here is a simplified, reproducible version of what I am attempting (shown here in serial with `%do%`, but I have the same problem when using `doRNG` and `%dopar%`). Note that in reality I want to run all of the elements of this loop (here 10) in parallel.

```
library(foreach)
myfunc <- function() {
  x <- foreach(k = 1:10, .combine="cbind", .errorhandling="stop") %do% {
    cat("Element ", k, "\n")
    Sys.sleep(0.5) # just to show that stop does not cause exit from foreach
    if(is.element(k, 2:6)) {
      cat("Should stop\n")
      stop("Has stopped")
    }
    k
  }
  return(x)
}
x <- myfunc()
# stop() halts the processing of k=2:6, but it does not stop the foreach loop itself.
# x is not returned. The execution produces the error message
# Error in { : task 2 failed - "Has stopped" 
```

What I would like to achieve is that the entire foreach loop can be exited immediately upon some condition (here, when the `stop()` is encountered).

I have found no way to achieve this with `foreach`. It seems that I would need a way to send a message to all the other processes to make them stop too.

If not possible with `foreach`, does anyone know of alternatives? I have also tried to achieve this with `parallel::mclapply`, but that does not work either.

```
> sessionInfo()
R version 3.0.0 (2013-04-03)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] C/UTF-8/C/C/C/C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods base

other attached packages:
[1] foreach_1.4.0

loaded via a namespace (and not attached):
[1] codetools_0.2-8 compiler_3.0.0  iterators_1.0.6 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T19:22:35.643

听起来您想要一个*不耐烦*的“停止”错误处理版本。您可以通过编写自定义组合函数来实现它，并安排在`foreach`每个结果返回后立即调用它。为此，您需要：

*   使用支持`combine`即时调用的后端，例如`doMPI`或`doRedis`
*   不启用`.multicombine`
*   设置`.inorder`为`FALSE`
*   设置`.init`为某事（如`NULL`）

这是一个这样做的例子：

```
library(foreach)
parfun <- function(errval, n) {
  abortable <- function(errfun) {
    comb <- function(x, y) {
      if (inherits(y, 'error')) {
        warning('This will leave your parallel backend in an inconsistent state')
        errfun(y)
      }
      c(x, y)
    }
    foreach(i=seq_len(n), .errorhandling='pass', .export='errval',
            .combine='comb', .inorder=FALSE, .init=NULL) %dopar% {
      if (i == errval)
        stop('testing abort')
      Sys.sleep(10)
      i
    }
  }
  callCC(abortable)
} 
```

请注意，我还将错误处理设置为“通过”，因此`foreach`将使用错误对象调用组合函数。该`callCC`函数用于从`foreach`循环返回，而不管内部`foreach`和后端使用的错误处理。在这种情况下，`callCC`将调用该`abortable`函数，并传递给它一个用于强制`callCC`立即返回的函数对象。`foreach`通过从 combine 函数中调用该函数，我们可以在检测到错误对象时退出循环，并`callCC`返回该对象。有关`?callCC`更多信息，请参阅。

您实际上可以在`parfun`没有注册并行后端的情况下使用，并在执行引发错误的任务时验证`foreach`循环是否“中断”，但这可能需要一段时间，因为任务是按顺序执行的。例如，如果没有注册后端，这需要 20 秒才能执行：

```
print(system.time(parfun(3, 4))) 
```

当`parfun`并行执行时，我们需要做的不仅仅是跳出`foreach`循环：我们还需要停止工作人员，否则他们将继续计算分配给他们的任务。使用`doMPI`，可以使用以下方法停止工作人员`mpi.abort`：

```
library(doMPI)
cl <- startMPIcluster()
registerDoMPI(cl)
r <- parfun(getDoParWorkers(), getDoParWorkers())
if (inherits(r, 'error')) {
  cat(sprintf('Caught error: %s\n', conditionMessage(r)))
  mpi.abort(cl$comm)
} 
```

请注意，在循环中止后不能使用集群对象，因为事情没有正确清理，这就是为什么正常的“停止”错误处理不能以这种方式工作的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T11:07:01.410

这不是您问题的直接答案，但是`when()`如果满足条件，使用您可以避免进入循环：

```
x <- foreach(k = 1:10, .combine="cbind", .errorhandling="stop") %:%
  when( !is.element(k, 2:6) ) %do%
  {
    cat("Element ", k, "\n")
    Sys.sleep(0.5)
    k
  } 
```

**编辑：**

我忘记了一些事情：我认为这是设计使然，您不能仅仅停止 foreach 循环。如果您并行运行循环，则每个回合都是独立处理的，这意味着当您停止整个循环时，`k=2`如果进程`k=1`已经终止或仍在运行，则无法预测。因此，使用`when()`条件会给你一个确定的结果。

**编辑 2：**考虑您的评论的另一个解决方案。

```
shouldStop <- FALSE
x <- foreach(k = 1:10, .combine="cbind", .errorhandling="stop") %do%
  {
    if( !shouldStop ){
      # put your time consuming code here
      cat("Element ", k, "\n")
      Sys.sleep(0.5)
      shouldStop <- shouldStop ||  is.element(k, 2:6)
      k
    }
  } 
```

使用此解决方案，在停止条件为真时正在运行的进程仍会计算到结束，但您可以避免所有即将到来的进程的时间消耗。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-11T02:27:31.590

当我到达终端循环时，我没有尝试跳出循环，而是将一个小文件写入磁盘，然后根据该文件的存在简单地跳过所有剩余的迭代。

检查文件是否存在花费我们不到一毫秒的计算时间。

```
# 1.4 seconds to check if a file exists a million times
system.time(lapply(1:1e6, function(x) file.exists("checker.txt")))
   user  system elapsed 
  1.204   0.233   1.437 
```

当您没有固定数量的迭代或您的过程可以在所有迭代完成之前完成（例如收敛）时，这非常有用

```
library(foreach)

alist <- foreach(i = 1:5000) %dopar% { 
  if(file.exists("checker.txt")) {
    return(NULL)
  } else {
    if(i = 20) {
      write("", "checker.txt") # write an empty file
    }
    return(i)
  }
}

file.remove("checker.txt") 
```

这样做的好处是，即使你的列表非常长，如果你只是 unlist() 你也只能得到值。

```
> length(alist)
[1] 5000

> unlist(res)
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 
```

不要费心尝试打破，而是“跳过其余部分”！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T15:37:36.847

我从 REvolution 技术支持得到的答案是：“不——foreach 目前没有办法停止对任何人的错误的所有并行计算”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:21:46.103

我没有太多运气`foreach`去做我想做的事，所以这里有一个使用`parallel`似乎可以做我想做的事情的包的解决方案。我使用`intermediate`选项 in`mcparallel()`将结果从我的函数`do.task()`, 立即传递给函数`check.res()`。如果`do.task()`抛出错误，则用于`check.res()`触发调用`tools::pskill`以显式杀死所有工作人员。这可能不是很优雅，但它的工作原理是它会立即停止所有工作。此外，我可以简单地`do.task()`从当前环境中继承处理所需的所有变量。（实际上`do.task()`是一个更复杂的函数，需要传入许多变量。）

```
library(parallel)

# do.task() and check.res() inherit some variables from enclosing environment

do.task <- function(x) {
  cat("Starting task", x, "\n")
  Sys.sleep(5*x)
  if(x==stopat) { 
    stop("Error in job", x) # thrown to mccollect() which sends it to check.res()
  }
  cat("  Completed task", x, "\n")
  return(10*x)
}

check.res <- function(r) { # r is list of results so far
  cat("Called check.res\n")
  sendKill <- FALSE
  for(j in 1:Njob) { # check whether need to kill
    if(inherits(r[[j]], 'try-error')) {
      sendKill <- TRUE
    }
  }
  if(sendKill) { # then kill all
    for(j in 1:Njob) {
      cat("Killing job", job[[j]]$pid, "\n") 
      tools::pskill(job[[j]]$pid) # mckill not accessible
    }
  }
}

Tstart <- Sys.time()
stopat <- 3
Njob <- 4
job <- vector("list", length=Njob)
for(j in 1:Njob) {
  job[[j]]<- mcparallel(do.task(j))
}
res <- mccollect(job, intermediate=check.res) # res is in order 1:Njob, regardless of how long jobs took
cat("Collected\n")
Tstop <- Sys.time()
print(difftime(Tstop,Tstart))
for(j in 1:Njob) {
  if(inherits(res[[j]], 'try-error')) {
    stop("Parallel part encountered an error")
  }
} 
```

这给出了以下屏幕转储和变量结果`res`

```
> source("exp5.R")
Starting task 1 
Starting task 2 
Starting task 3 
Starting task 4 
  Completed task 1 
Called check.res
Called check.res
  Completed task 2 
Called check.res
Called check.res
Called check.res
Killing job 21423 
Killing job 21424 
Killing job 21425 
Killing job 21426 
Called check.res
Killing job 21423 
Killing job 21424 
Killing job 21425 
Killing job 21426 
Called check.res
Killing job 21423 
Killing job 21424 
Killing job 21425 
Killing job 21426 
Collected
Time difference of 15.03558 secs
Error in eval(expr, envir, enclos) : Parallel part encountered an error
> res
$`21423`
[1] 10

$`21424`
[1] 20

$`21425`
[1] "Error in do.task(j) : Error in job3\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in do.task(j): Error in job3>

$`21426`
NULL 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-23T07:28:22.410

史蒂夫韦斯顿的原始答案基本上回答了这个问题。但这里是他的答案的一个稍微修改过的版本，它还保留了我需要的两个附加功能：（1）随机数生成；(2) 打印运行时诊断。

```
suppressMessages(library(doMPI))

comb <- function(x, y) {
  if(inherits(y, 'error')) {
    stop(y)
  }
  rbind(x, y) # forces the row names to be 'y'
}

myfunc <- function() {
  writeLines(text="foreach log", con="log.txt")
  foreach(i=1:12, .errorhandling='pass', .combine='comb', .inorder=FALSE, .init=NULL) %dopar% {
    set.seed(100)
    sink("log.txt", append=TRUE)
    if(i==6) {
      stop('testing abort')
    }
    Sys.sleep(10)
    cat("Completed task", i, "\n")
    sink(NULL)
    rnorm(5,mean=i)
  }
}

myerr <- function(e) {
  cat(sprintf('Caught error: %s\n', conditionMessage(e)))
  mpi.abort(cl$comm)
}

cl <- startMPIcluster(4)
registerDoMPI(cl)
r <- tryCatch(myfunc(), error=myerr)
closeCluster(cl) 
```

获取此文件时，它会按预期退出并显示错误消息

```
> source("exp2.R")
    4 slaves are spawned successfully. 0 failed.
Caught error: testing abort
[ganges.local:16325] MPI_ABORT invoked on rank 0 in communicator  with errorcode 0 
```

'log.txt' 文件提供了直到错误点的正确诊断，然后提供额外的错误信息。至关重要的是，一旦遇到 foreach 循环中的 stop()，所有任务的执行就会停止：它不会等到整个 foreach 循环完成。因此，我最多只能看到 i=4 的“已完成任务”消息。（请注意，如果 Sys.sleep() 更短，那么稍后的任务可能会在处理 mpi.abort() 之前启动。）

如果我将停止条件更改为“i==100”，则不会触发停止，因此不会触发错误。代码成功存在且没有错误信息，并且 r 是一个维度为 12*5 的二维数组。

顺便说一句，似乎我实际上并不需要 .inorder=FALSE （我认为如果发现错误，这只会让我的速度略有提高）。

# twitter-bootstrap - 引导工具提示不适用于输入字段

> ID：16079884
> 
> 赞同：9
> 
> 时间：2013-04-18T09:59:15.377
> 
> 标签：twitter-bootstrap, tooltip

我在我的 Rails 应用程序中使用工具提示，但它不适用于输入字段，因为我的代码是：

```
 %input#main-search{:name => "query", :placeholder => "search all 
    items", :rel => "tooltip", :title => "Search All Items", :type => "text"}
  :javascript
    $(document).ready(function(){
      $('input[title]').tooltip({placement:'bottom'});
    }); 
```

我也使用：

```
$('#main-search').tooltip({'trigger':'focus'}); 
```

它不适用于输入字段，但对于标签它可以正常工作。如何为输入字段禁用工具提示？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-18T12:37:16.687

这是工具提示的有效 HTML 标记：

```
<input data-toggle="tooltip" title="tooltip on second input!" type="text" placeholder="Focus me!" name="secondname"/> 
```

这是 jQuery，工具提示和触发焦点的位置正确：

```
$('input[type=text][name=secondname]').tooltip({ /*or use any other selector, class, ID*/
    placement: "right",
    trigger: "focus"
}); 
```

[总是看官方文档](http://getbootstrap.com/javascript/#tooltips)。

这是工作演示：http: [//jsfiddle.net/N9vN8/69/](http://jsfiddle.net/N9vN8/69/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T18:47:39.277

只需键入以下脚本，即可更简单地将其激活到要使用工具提示的所有输入或字形图标：

```
<script type="text/javascript">
$(function () {
                $('[data-toggle="tooltip"]').tooltip()
            });
</script> 
```

在输入内部：

```
<input data-toggle="tooltip" data-placement="left" title="Your awesome tip!" type='text' class="form-control" name="name"  placeholder="placeholder" maxlength="10"/> 
```

在字形图标内：

```
<span class="glyphicon glyphicon-calendar" data-toggle="tooltip" data-placement="right" title="Open calendar"></span> 
```

这样，在同一表单的多个输入中使用工具提示时，您无需担心任何 ID。

来源：[文档](http://getbootstrap.com/javascript/#tooltips)。

# java - Change content pane on button press

> ID：16079886
> 
> 赞同：0
> 
> 时间：2013-04-18T09:59:17.773
> 
> 标签：java, swing, jpanel, contentpane

I want a button to change the contentPane in a frame. An admin panel and a user panel in two different JPanel classes that gets called in a MainWindow class with a frame.

My code looks as follows:

The method the button calls:

```
public void ChangeContent() throws Exception{
    MainWindow mw = new MainWindow();
    AdminUI admin = new AdminUI ();
    mw.frame.getContentPane().removeAll();
    mw.frame.setContentPane(admin);
    mw.frame.revalidate();
    mw.frame.repaint();

} 
```

This is the method being called in my "public MainWindow()" method in the MainWindow class (the one with the frame) to show the contentPane in the beginning:

```
public void Admin() throws Exception {
        frame = new JFrame("Admin Panel");
        frame.setResizable(false);
        frame.setBounds(100, 100, 256, 457);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        AdminUI Admin = new AdminUI();
        frame.setContentPane(Admin);
    } 
```

An equal method exists for the userUI.

I have tried just called the userUI() method in the MainWindow when I press a button, but that doesn't refresh the window, and neither does the ChangeConten() method. I need some help. I used the search feature on Stackoverflow to no success.

# asp.net - 使用实体框架同时写入同一张表

> ID：16079891
> 
> 赞同：1
> 
> 时间：2013-04-18T09:59:35.823
> 
> 标签：asp.net, c#-4.0, entity-framework-4

开发网站（使用实体框架）我遇到了以下问题：

1.如果很多人（比如说10,000人）试图通过实体框架同时“写入”到数据库（SQL Server）中的同一个特定表，会发生什么？

2.在我的项目中，我有模块，出于解耦原因，我使用单例类（ModulesManager），它应该从每个模块中采取行动并异步执行，如下所示：

```
 public void InsertNewRecord(Action addNewRecordAction)
    {
        if (addNewRecordAction != null)
        {
            addNewRecordAction.BeginInvoke(recordCallback, null);
        }
    } 
```

使用单例类作为唯一负责写入 DB 的地方是一种好方法吗？

3.Entity Framework能提供与使用SQL查询相同的速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:07:24.257

> 如果很多人（比如说 10,000 人）试图通过实体框架同时“写入”到 DB（SQL Server）中的同一个特定表，会发生什么？

If you mean inserting to the same table those insert will be processed based on transaction isolation level in the database. Usually only single transaction can hold a lock for insertion so inserts are processed in sequence (it has nothing to do with EF). Having 10.000 users concurrently inserting doesn't seem like sustainable architecture - some of them may timeout.

> In my project i have modules and for decoupling reasons i using singleton class (ModulesManager) which should take Action from each module and execute it asynchronous like following:

Your manager asynchronously invokes the action so the answer is mostly dependent on what the action is doing. If it opens its own context, performs some changes and saves them, you should not have any technical problem on EF side.

> Does Entity Framework can provide same speed as using SQL queries ?

不会。EF 会进行额外的处理，因此它总是会变慢。

# javascript - How to activate event by clicking on another element

> ID：16079893
> 
> 赞同：1
> 
> 时间：2013-04-18T09:59:39.710
> 
> 标签：javascript, jquery

 ```
 <div class="imgtumb"><img src="..."></div>
    <a href="toBigImg" class="imgtarget">sometext</a>

    <script>
        $(document).ready(function() {
            $('div.imgtumb img').click(function() {
            $('a.imgtarget').click();
            });
        });
    </script> 
```

The link not work (dont open a big image). What i do wrong?

----Edited---- Thank you guys, but .trigger() is not working too. I resolved this problem something like this:

```
$(document).ready(function() {
            $('div.imgtumb img').click(function() {
            window.location.href = $('a.imgtarget').attr("href");
            });
        }); 
``` 

----Edited 2--- Question which explained why [.click() is not working with a tag](https://stackoverflow.com/questions/1694595/can-i-call-jquery-click-to-follow-an-a-link-if-i-havent-bound-an-event-hand)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:01:28.283

尝试这个：

```
<script>
    $(document).ready(function() {
        $('div.imgtumb img').click(function() {
        $('a.imgtarget').trigger('click');
        });
    });
</script> 
```

事件触发器是对元素进行另一个事件的事件

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:02:06.733

使用[触发器（）](http://api.jquery.com/trigger/)

> . 对 .trigger() 的调用以与用户自然触发事件相同的顺序执行处理程序：

尝试这个

```
$('a.imgtarget').trigger('click'); 
```

代替

```
 $('a.imgtarget').click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:03:44.123

尝试使用它而不是 .click()

```
window.open(
  'toBigImg',
  '_blank'
); 
```

# python - 如何读取可变数量的输出

> ID：16079896
> 
> 赞同：0
> 
> 时间：2013-04-18T09:59:47.740
> 
> 标签：python, python-2.7

我正在运行 python 2.7.3。我有一个我调用每个函数的列表。一些函数返回多个输出。我想将所有函数的所有输出保存在一个列表中。我怎样才能做到这一点？

```
def f1():
    return [1,2], [3,4]
def f2():
    return [5,6]
my_outputs = []
my_funcs = [f1, f2]
for func in my_funcs:
    output_list* = func() # does this work?
    # a,b,c... = func()
    my_outputs.extend(output_list)

print my_outputs
[[1,2], [3,4], [5,6]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:02:07.907

你可以用 来检查返回类型`isinstance`，虽然它不是很pythonic。

```
 my_outputs = []
 my_funcs = [f1, f2, f3]
 for func in my_funcs:
    result = func()
    if isinstance(result, tuple):
        my_outputs.extend(result)
    else:
        my_outputs.append(result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:15:25.860

```
sum((list(f()) for f in [f1, f2]), []) 
```

# matrix - 计算矩阵 SSRS 中的百分比

> ID：16079906
> 
> 赞同：-1
> 
> 时间：2013-04-18T10:00:19.110
> 
> 标签：matrix, ssrs-2008, percentage

我试图在我的矩阵中插入一个计算出的百分比列，在这里搜索后仍然有问题。

数据集中的字段：Cons_ID,Age,Region

**行组：**区域

**列组：**年龄（范围）

**详细信息：** CountDistinct(Fields!Cons_ID.Value)

任何帮助表示赞赏。

谢谢

汤姆

编辑： [ssrs 设置的图像](http://i48.tinypic.com/2ykhlqg.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:37:25.130

听起来您想从每个组的总数中获取详细信息的百分比。如果这不是您要找的，请更具体。下面是一个示例，说明如何参考整个年龄组以获得百分比：

```
=CountDistinct(Fields!Cons_ID.Value, "matrix1_Age")/CountDistinct(Fields!Cons_ID.Value, "matrix1_Region") 
```

# javascript - kindle fire 上 jquery 和 fastclick 的问题

> ID：16079908
> 
> 赞同：1
> 
> 时间：2013-04-18T10:00:20.733
> 
> 标签：javascript, jquery, kindle-fire, fastclick.js

我有一个网页，我在其中打开一个 jquery 计算器。此页面仅适用于桌面的 safari 和 android 设备的 chrome，因为我使用嵌入式数据库。

当有人使用桌面设备导航到该页面时，与计算器的交互非常慢，所以我使用[了 fastclick](https://github.com/ftlabs/fastclick)库，问题就解决了。使用这个库，由于 stopPropagation() 和 preventDefault()，我不得不手动将一些 jquery 类添加到按钮元素，例如 ui-state-hover。

计算器速度很快，悬停颜色在 kindle fire 上效果很好。当我删除 jquery 类或尝试模糊按钮似乎不起作用。我还试图为这个按钮设置一个 CSS 规则，这样当我点击它们时它们就不会聚焦。似乎没有任何效果。我看到这个库不支持这个设备的 Silk 浏览器，但它修复了 300 毫秒的延迟。

有没有办法覆盖kindle fire jquery事件？问题出在丝绸浏览器上？

我的代码是：

```
document.getElementById("inv_calc_button_" + id).addEventListener('touchend', function(event) {
    event.stopPropagation();
    event.preventDefault();
    _function();
    $("#inv_calc .inv_calc_button").removeClass("ui-state-hover");
    $(this).addClass("ui-state-hover");
}, false);

if (!(/\bSilk\b/.test(navigator.userAgent))) {
    document.getElementById("inv_calc_button_" + id).addEventListener('click', function(event) { _function(); }, false);
} 
```

这就是我如何覆盖按钮的css打开计算器并适用于除了kindle fire之外的所有内容：

```
.item_table button.ui-state-hover, .item_table button.ui-state-focus, .item_table button.ui-state-highlight {
border: 1px solid #cccccc !important;
background: #f6f6f6 url(/webfile?name=css/ui-lightness/images/ui-bg_glass_100_f6f6f6_1x400.png) 50% 50% repeat-x !important;
font-weight: bold !important;
color: #1c94c4 !important;
} 
```

# ubuntu - ubuntu中的新贵监控问题和创建pid

> ID：16079911
> 
> 赞同：1
> 
> 时间：2013-04-18T10:00:28.767
> 
> 标签：ubuntu, pid, upstart

我一直在寻找如何创建一个 pid 文件来监视 ubuntu 中的新贵进程。我查看了[Ubuntu、upstart 中接受的答案，并创建了一个用于监控的 pid](https://stackoverflow.com/questions/9972023/ubuntu-upstart-and-creating-a-pid-for-monitoring)，最终得到以下代码：

```
env PROGRAM_NAME=myscript
env BASE_PATH=/bar/

respawn limit 5 30

script
${BASE_PATH}/bin/python ${BASE_PATH}/scripts/${PROGRAM_NAME}.py -e ${BASE_PATH}/foo.ini
end script

post-start script
echo PID=`status myscript | egrep -oi '([0-9]+)$' | head -n1` 
echo $PID > /var/run/${PROGRAM_NAME}.pid
end script

post-stop script
rm -f /var/run/${PROGRAM_NAME}.pid
end script 
```

我遇到了3个问题：

1.  不知何故，这段代码创建了两个进程。父进程（通过 ps -ef | grep python 检查）只是一个 shell，例如：

    ```
    /bin/sh -e -c ${BASE_PATH}/bin/python ${BASE_PATH}/scripts/${PROGRAM_NAME}.py -e ${BASE_PATH}/foo.ini /bin/sh 
    ```

    虽然子进程具有正确的替代品：

    ```
    /bar/bin/python /bar/scripts/myscript.py -e /bar/foo.ini 
    ```

2.  pid 文件包含实际进程的*父进程的 pid。*不是孩子，这是实际的过程。

3.  重生不起作用。我杀死了子进程`kill pid`（它也杀死了父进程，但反之亦然）。

# javascript - 确保所有异步调用都在 jQuery 中完成

> ID：16079912
> 
> 赞同：0
> 
> 时间：2013-04-18T10:00:29.313
> 
> 标签：javascript, jquery

我有一个 webapp，它使用 jQuery:s $.get 和 $.post 方法进行一堆异步 API 调用。在激活按钮（显示：无/阻止）之前，我需要确保所有这些都已成功完成（HTTP 状态代码 200）。

有没有办法确保在 jQuery 中没有等待开箱即用的未完成的异步调用？还是我需要自己跟踪这个？

我正在使用 jQuery v1.8.3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T10:05:03.190

您可以创建一个“Master Deferred”，只有在所有其他 Deferred（AJAX 请求）都成功完成后才会解析；

```
jQuery.when(jQuery.get('/foo'), jQuery.post('/bar'), jQuery.get('/baz')).done(function () {
    $('button').show();
}); 
```

语法是将每个`Deferred`作为参数传递给`jQuery.when()`，它返回 a `Deferred`，当一个失败或所有这些都完成时解析。

如果您事先不知道您有多少个 AJAX 请求，已经将它们放在一个数组中，或者只是不想使用上述内容，您可以`Function.apply`像这样使用；

```
var ajaxRequests = [jQuery.get('/foo'), jQuery.post('/bar'), jQuery.get('/baz')];

jQuery.when.apply(jQuery, ajaxRequests).done(function () {
    $('button').show();
}); 
```

有关详细信息，请参阅[http://api.jquery.com/jQuery.when](http://api.jquery.com/jQuery.when)或[http://www.mattlunn.me.uk/blog/2014/01/tracking-joining-parallel-ajax-requests-with- jquery/](http://www.mattlunn.me.uk/blog/2014/01/tracking-joining-parallel-ajax-requests-with-jquery/) ^(（我的博客）)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:05:32.643

从[这篇文章](https://stackoverflow.com/a/8841412/247893)中，您应该能够使用相同的代码（不过，您不需要该`abortAll`功能，因此已将其删除，并添加了对活动请求的检查）：

```
$.xhrPool = [];
$.ajaxSetup({
    beforeSend: function(jqXHR) {
        $.xhrPool.push(jqXHR);
    },
    complete: function(jqXHR) {
        var index = $.xhrPool.indexOf(jqXHR);
        if (index > -1) {
            $.xhrPool.splice(index, 1);
        }
        if ($.xhrPool.length > 0) {
            //There are still active requests - keep the button hidden
        } else {
            //There's no more active requests - show the button
        }
    }
}); 
```

这将适用于通过 jQuery 请求的所有 ajax 请求，无论是with`$.get`和.`$.post``$.ajax`

# iphone - 如何设置actionSheet imageView的边界？

> ID：16079915
> 
> 赞同：0
> 
> 时间：2013-04-18T10:00:40.230
> 
> 标签：iphone, objective-c, uiimageview, uiactionsheet, cgrectmake

我需要更改 ActionSheet 上 imageView 属性的边界，

```
<!-- language: lang-c -->

        #pragma UIActionSheetDelegate Methods
        - (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
           /*[[[actionSheet valueForKey:@"_buttons"] objectAtIndex:0] imageView].frame = CGRectMake(0, 0, 25.0f, 25.0f);*/

           [[[actionSheet valueForKey:@"_buttons"] objectAtIndex:0] imageView].bounds = CGRectMake(0, 0, 25.0f, 25.0f);

           /*UIImageView *imgView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 25.0f, 25.0f)];
           imgView.image = [UIImage imageNamed:@"symbol-pin.png"];
           [[actionSheet superview] addSubview:imgView];*/ 
    } 
```

编码后什么都没有发生：

```
[[[actionSheet valueForKey:@"_buttons"] objectAtIndex:0] imageView].bounds = CGRectMake(0, 0, 25.0f, 25.0f); 
```

这里是创建 ActionSheet 的代码

```
<!-- language: lang-c -->

    - (IBAction)showModeOptions:(id)sender {
       if (!modeOptions) {
         modeOptions = [[UIActionSheet alloc]initWithTitle:@"" delegate:self cancelButtonTitle:@"Abbrechen" destructiveButtonTitle:nil otherButtonTitles:@"Pin",@"Linie", @"Polygon", nil];

          [[[modeOptions valueForKey:@"_buttons"] objectAtIndex:0] setImage:[UIImage imageNamed:@"symbol-pin.png"] forState:UIControlStateNormal];

          [[[modeOptions valueForKey:@"_buttons"] objectAtIndex:1] setImage:[UIImage imageNamed:@"symbol-line.png"] forState:UIControlStateNormal];

          [[[modeOptions valueForKey:@"_buttons"] objectAtIndex:2] setImage:[UIImage imageNamed:@"symbol-polygon.png"] forState:UIControlStateNormal];

          modeOptions.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
      }
      [modeOptions showFromTabBar:self.tabBarController.tabBar]; 
} 
```

图片为 88 x 88px，previos 代码后的结果为：

```
http://i46.tinypic.com/v4ck20.png 
```

我需要 25 x 25 像素的图像，就像我设置的 imageView 的边界一样。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:29:35.200

使用以下代码..

```
-(void)actionSheetClicked
{

if(!self.modeOptions)
    {
        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Dummy",nil]; //Here I add dummy button for getting cancel button style.
        self.modeOptions = actionSheet;
        [actionSheet release];
    }
    self.modeOptions.actionSheetStyle = UIActionSheetStyleBlackOpaque;

    [self.modeOptions showFromTabBar:self.tabBarController.tabBar];//Here i show from tab bar, you can showfromview also
//    [self.modeOptions setBounds:CGRectMake(0, 0, 320, 300)];
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)//frame size for action sheet in both modes
    {
        [self.modeOptions setBounds:CGRectMake(0, 0, 320, 300)];

    }
    else
    {
        [self.modeOptions setBounds:CGRectMake(0, 0, 480,250)];
    }
    UIButton *buttonDum = (UIButton *)[[self.modeOptions subviews] objectAtIndex:0];

    [buttonDum setHidden:YES];//hide dummy button..

    UIButton *cancelButton = (UIButton *)[[self.modeOptions subviews] objectAtIndex:1];

    if( !self.button1)
    {

        UIButton *Btn = [[UIButton alloc]initWithFrame:CGRectMake(80, 40, 70, 70)];//**Here I use 70 X 70 px image , you can edit it**
        self.button1 = Btn;
        [self.button1 addTarget:self action:@selector(invokeFirstBtn) forControlEvents:UIControlEventTouchUpInside];
        [self.button1 setImage:[UIImage imageNamed:@"btn1Image.png"] forState:UIControlStateNormal];
        [self.modeOptions addSubview:self.button1];
        [Btn release];
    }
    if( !self.button2)
    {
        UIButton *Btn = [[UIButton alloc]initWithFrame:CGRectMake(180, 40, 70, 70)];//**Here I use 70 X 70 px image , you can edit it**
        self.button2 = sharBtn;
        [self.button2 addTarget:self action:@selector(invokeButton2) forControlEvents:UIControlEventTouchUpInside];
        [self.button2 setImage:[UIImage imageNamed:@"btn2Image.png"] forState:UIControlStateNormal];
        [self.modeOptions addSubview:self.button2];
        [Btn release];
    }
    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)//frame size for action sheet in both modes
    {
        cancelButton.frame = CGRectMake(50, 140, 220, 40);
        self.button1.frame = CGRectMake(65, 40, 70, 70);
        self.button2.frame = CGRectMake(175, 40, 70, 70);
    }
    else
    {
        cancelButton.frame = CGRectMake(135, 140, 220, 40);
        self.button1.frame = CGRectMake(155, 40, 70, 70);
        self.button2.frame = CGRectMake(260, 40, 70, 70);
    }
} 
```

这是工作代码..检查一下。您可以根据需要更改框架大小...您可以创建没有虚拟按钮的操作表...

# css - 仅为 css 文件中使用的图像设置过期标头

> ID：16079917
> 
> 赞同：1
> 
> 时间：2013-04-18T10:00:44.613
> 
> 标签：css, caching, web

在我的网页上，我只想在我的布局图像（如背景图像、按钮选项卡）上使用 Expire 标题，而不是在产品图像、滑块等其他图像上使用

# c - int 变量的第四个字符有什么问题？

> ID：16079918
> 
> 赞同：0
> 
> 时间：2013-04-18T10:00:54.540
> 
> 标签：c

我的机器是一台运行 centos 系统的 32 位 PC，我使用 GCC 编译我的 C 代码。而int变量占用4个字节。所以我写了这样的代码......

```
 #include "stdio.h"
    int main(){
           int a=1;
           printf("%c",*(&a+1)+65);
           printf("%c",*(&a+2)+65);
           printf("%c",*(&a+3)+65);
    } 
```

我是这样想的：PC 是 32 位的，所以变量 a 应该像这样存储在内存中：

```
 &a    00000001
   &a+1  00000000
   &a+2  00000000
   &a+3  00000000 
```

所以我认为答案应该是：AAA
但真正得到的是：qA（最后一个没有打印出来。）
我确实对结果感到困惑。更重要的是，如果我消化最后两个 printf.which 是：

```
 #include "stdio.h"
    int main(){
           int a=1;
           printf("%c",*(&a+1)+65);
    } 
```

然后我得到了我想要的：A
我的代码有什么问题或什么；真正的错误是我考虑将变量存储在内存中......请帮我解决这些问题，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:04:51.377

在这里，`&a`是类型`int*`，所以`&a+1`指向下一个 int（之后 4 个字节）。您需要转换`&a`为`char*`before ：`((char *) &a) + 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:04:22.117

当你说“&a+1”并不意味着+1 字节时，它意味着+1 sizeof(int)。

如果您将 &a 转换为 char*，那么您的 +1 将意味着 +1 sizeof(char)。char 的大小为 1 个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:05:39.533

把你的指针`&a`指向`char *`这样的指针

```
printf("%c",*((char*)&a+1)+65); 
```

`&a + 1`表示您已经`a`用`1`* size of增加了地址`a`，a 的大小是 4 byte = 4 * size of char。

将地址`a`转换为`char *`指针将允许将地址增加`a`1 * sizeof char (=1 字节)

# ruby - 需要实现 Watirgrid，

> ID：16079919
> 
> 赞同：0
> 
> 时间：2013-04-18T10:00:55.813
> 
> 标签：ruby, watir, watir-webdriver, watirgrid

我想实现 watirgrid，但我无法做到这一点，每次我遇到与控制器和提供程序启动过程相关的错误时，还有互联网上的所有示例，它们都没有工作。

任何人都可以帮我实现这一点，带有步骤的完整运行示例将是一个很大的帮助。

我正在尝试这段代码：

```
require 'rubygems'
require 'watirgrid'
require 'watir'
require 'watir-webdriver'

# setup a controller on port 12351 for your new grid
controller = Controller.new(:ring_server_port => 12351, :loglevel => Logger::ERROR)
controller.start

# add a provider to your grid
# :browser_type => 'webdriver' if using webdriver or
# :browser_type => 'ie' if using watir...
provider = Provider.new(:controller_uri => 'druby://127.0.0.1:11235',
                        :ring_server_port => 12351,
                        :loglevel => Logger::ERROR, 
                        :browser_type => 'webdriver')
provider.start

# connect to the grid and take all providers from it (this time only one)
grid = Watir::Grid.new(:ring_server_port => 12351, :ring_server_host => '127.0.0.1')
grid.start(:take_all => true)

# for each provider on the grid, launch a new thread to start multiple browsers
threads = []
grid.browsers.each do |browser|
  threads << Thread.new do
    p browser[:hostname]
    p browser[:architecture]
    p browser[:browser_type]
     # in this case we are starting a new IE browser
    b = browser[:object].new_browser(:ie)
    b.goto("http://www.google.com")
    b.text_field(:name, 'q').set("watirgrid")
    b.button(:name, "btnI").click
  end
end
threads.each {|thread| thread.join} 
```

我得到的错误是

```
DRb::DRbConnError: druby://127.0.0.1:11235 - #<Errno::ECONNREFUSED: No connection could  
be made because the target machine actively refused it. - connect(2)>
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:736:in `rescue in block in open'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:730:in `block in open'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:729:in `each'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:729:in `open'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:1191:in `initialize'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:1171:in `new'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:1171:in `open'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:1087:in `block in method_missing'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:1105:in `with_friend'
  from C:/Ruby192/lib/ruby/1.9.1/drb/drb.rb:1086:in `method_missing'
  from C:/Ruby192/lib/ruby/gems/1.9.1/gems/watirgrid-1.1.5/lib/provider.rb:141:in `start'
  from (irb):44
  from C:/Ruby192/bin/irb:12:in `<main>'
irb(main):045:0> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-09T05:27:12.797

我遇到了同样的问题，我通过更改成功启动了提供程序

```
controller_uri 
```

至

```
controller_uri => 'druby://machineIPAddress:11235' 
```

# nsurlconnection - response.expectedContentLength 总是返回 -1

> ID：16079920
> 
> 赞同：1
> 
> 时间：2013-04-18T10:01:04.173
> 
> 标签：nsurlconnection, httpresponse, nsurlrequest, nshttpurlresponse

我有一个使用 NSURLConnection 的连接，我想为这个连接绘制一个进度，但是当我尝试打印当前接收到的数据和总数据长度时，出了点问题，response.expectedContentLength 总是返回-1，我的连接为什么以及发生了什么，我该如何解决

```
 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
    {
        receivedDataBytes += [data length];
        NSLog(@"data: %f",receivedDataBytes);
        [responseData appendData:data];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
    {
        self.HTTPStatusCode = [(NSHTTPURLResponse *)response statusCode];
        totalFileSize = response.expectedContentLength;
        NSLog(@"total: %lf",totalFileSize);
    } 
```

输出：

```
total: -1.000000
data: 1256.000000
total: -1.000000
data: 1034.000000
total: -1.000000
data: 1127.000000 
```

# extjs - 在 ExtJS Grid 中选中复选框时如何专注于可编辑的文本字段？

> ID：16079921
> 
> 赞同：1
> 
> 时间：2013-04-18T10:01:04.787
> 
> 标签：extjs, grid, extjs4

我正在使用 checkcolumn 和 celledit 创建一个网格。我有 3 列 1 用于复选框，其他是可编辑的文本字段，第三列是产品名称，使用 celledit 编辑价格。

当我选中记录上的复选框时，焦点应该在该特定记录的文本字段上。

这是代码示例：

```
Ext.define('MyApp.view.EntryPage',
{
extend : 'Ext.grid.Panel',
alias : 'widget.entryPage',
title : 'Product Price Entry',
store : 'ProductStore',
loadMask: true,

plugins: [Ext.create('Ext.grid.plugin.CellEditing', {clicksToEdit: 1})],

initComponent:function(){

    var me = this;
    this.selModel = {xtype:'cellmodel'},

    this.columns = {
                defaults:{sortable : true,hideable : true,menuDisabled : true,align : 'left',style : 'text-align:left'},
                items:[
                          {

                              xtype: 'checkcolumn',
                              header: 'Check Me',
                              dataIndex : 'active',
                              listeners:{

                              checkchange : function( CheckColumn, rowIndex, checked, eOpts ){
                              // Select the textfield

                              }}
                          },
                          {
                               text : 'Price',
                               flex:0.75,
                               sortable : false,
                               hideable : false,
                               dataIndex : 'unitprice',
                               editor: 'textfield'
                          },
                          {
                               text : 'Product Name',
                               flex:2,
                               dataIndex : 'pname'
                          }
                    ]};

        //this.features = [];
        this.callParent(arguments);

} 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:38:16.587

在监听器的帮助下（使用编辑事件），如果已经被选中，则获取记录的引用并应用focus()方法。

请参阅以下链接以供参考。

[http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.grid.plugin.CellEditing-event-edit](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.grid.plugin.CellEditing-event-edit)

请参阅上面链接中的编辑事件。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:41:30.280

我解决了这个问题：

```
 checkchange : function( CheckColumn, rowIndex, checked, eOpts ){

         //me.getPlugin('cellplugin').startEdit(record,1);     
         me.getPlugin('cellplugin').startEditByPosition({row: rowIndex, column: 1});        

   }} 
```

这有效.... Hariharan 感谢您的回答！

# xml - 如何读取处理指令属性？

> ID：16079923
> 
> 赞同：1
> 
> 时间：2013-04-18T10:01:10.653
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我有 XML 中的处理指令。

当我们**应用**

```
<xsl:template match="Dest" >
    <?abc ?abc:Dest id="e47529cb-4d17-461b-8438-e3b6d9ec1a68"??>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:16:12.840

解决方案是：

**输入：**

```
<abc>
<?abc ?abc:Dest id="e47529cb-4d17-461b-8438-e3b6d9ec1a68"??>
</abc> 
```

**XSLT：**

```
<?xml version='1.0' ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="processing-instruction('abc')">
    <P-I><xsl:value-of select="substring-before(substring-after(.,'id=&quot;'),'&quot;')"/></P-I>
  </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<P-I>e47529cb-4d17-461b-8438-e3b6d9ec1a68</P-I> 
```

# printing - 以原始外观打印网页

> ID：16079924
> 
> 赞同：1
> 
> 时间：2013-04-18T10:01:12.067
> 
> 标签：printing, cross-browser, media-queries, webpage

我想实现打印功能，以便用户可以打印出 Web 表单并将其用作纸质表单以实现相同目的。当然，我不需要打印所有的网页页眉和页脚，只需要打印大部分页面的 div 内容。我确实玩弄了媒体打印 css 和管理打印结果，看起来几乎和原始页面一样。但是我试图在另一个浏览器（Chrome）中打印它，一切都搞砸了。（在我尝试 Mozilla 之前）。

对于 Web 表单，我使用 css 框架 Twitter Bootstrap，我必须为几乎每个元素单独覆盖它的 css（在打印媒体中）才能在打印结果中获得一些正常的外观。

我的问题是是否有某种方式（框架/插件）可以打印您在页面上看到的内容，可能是图像或其他内容？

欢迎任何其他建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:16:06.140

如果您熟悉 PHP，您可以尝试[TCPDF](http://www.tcpdf.org/)或[FPDF](http://www.fpdf.org/)的 PHP 类文件。

或者还有将 HTML 渲染为 PDF 的[dompdf](http://code.google.com/p/dompdf/)，但这将不仅仅包含一个 div 的信息。

有关更多信息[，](https://stackoverflow.com/questions/1648715/best-pdf-generator-in-php-mpdf-or-fpdf)请参阅 Stack 上的帖子，用户正在讨论他们认为最好的帖子。

# java - JSP/XML：XML 解析错误 - XML 无效

> ID：16079928
> 
> 赞同：0
> 
> 时间：2013-04-18T10:01:32.207
> 
> 标签：java, sql, xml, jsp

我正在使用 Apache Tomcat 7.0.39、Eclipse Java EE Juno、Java JRE 7 和 Java JDK 1.7.0_13。

我的 XML 有问题，解析错误：

```
Error: Invalid XML:
<?xml version="1.0" encoding="utf-8"?>
   <data>
       <time>9</time>
       <instances>3</instances>
   </data> 
```

我的目的是从数据库中获取一些信息并将它们放入谷歌图表中。有我的代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ page import="java.sql.*" %>
<%@ page import="java.sql.SQLException" %>
<%@ page import="java.sql.DriverManager" %>
<%
String idData = request.getParameter("idData");
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/testcd","root","");

if(conn != null)
{
    Statement stmt = conn.createStatement();
    stmt.execute("SELECT Id,number FROM numberInstances WHERE ID='"+ idData +"'");
    ResultSet rs = stmt.getResultSet();
    out.println("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>");
    out.setContentType("text/xml");
    out.println("<data>");
    while(rs.next())
    {
        out.println("<time>" + rs.getString(1) + "</time>");
        out.println("<instances>" + rs.getInt(2) + "</instances>");
    }
    out.println("</data>");

    conn.close();
}
%> 
```

有人能帮我吗？从昨天开始我就遇到了这个问题，我从谷歌研究中获得的所有信息都没有帮助

如果您需要更多信息，请询问我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:42:18.153

最后，我将代码更改为使用文本响应而不是 xml 响应。获取数据的 JSP 代码：

```
Statement stmt = conn.createStatement();
stmt.execute("SELECT number FROM numberInstances WHERE ID='"+ idData +"'");
ResultSet rs = stmt.getResultSet();
while(rs.next())
{
    out.println(rs.getInt(1));
}
conn.close(); 
```

以及获取响应的 JSP 代码：

```
$.ajax({
type: "GET",
url: "resources/jsp/getInstances.jsp",
data: {idData:(cptData)},
dataType: "text",
complete: function(text)
{
    instance = text.responseText*(1010);
}
}); 
```

# javascript - jquery-autocomplete 如何通过发送值（请求值）触发“自动完成”事件

> ID：16079930
> 
> 赞同：0
> 
> 时间：2013-04-18T10:01:39.367
> 
> 标签：javascript, jquery, autocomplete, triggers, jquery-autocomplete

我想从源触发“自动完成”事件，并将值发送到文本框中设置。

我希望它就像用户键入值并触发自动完成一样，我尝试了很多但我发现的所有示例都没有发送值，我需要发送值！

这个例子对我没有帮助，因为我需要请求（就像有人输入一样）

```
$("#CompanyList").autocomplete({
  source : yourSource,
  change : yourChangeHandler
});

$("#CompanyList").data("autocomplete")._trigger("change"); 
```

我希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:01:30.140

如果我理解（我不确定）。

你必须去服装：

利用：

```
 $('.input_text_forms').keyup(function(event){ }); 
```

那会触发：

```
 var data = $('#lang_pass_threw').val();
 $.post('auto_fill.php', { data: data }, function(response) {  }); 
```

当请求返回时：

```
 var arr = string.split(""); 
```

现在调用超时函数并将结果设置为值...

这是一个例子：[jsfiddle](http://jsfiddle.net/jjJrj/)

这个例子有点问题，有一个光标位置要设置.. 和一个退格事件来撤消自动完成等，如果它是你需要的，请告诉我，我会稍微调整这个脚本。

# java - Java 列表的 .remove 方法仅适用于每个循环内的倒数第二个对象

> ID：16079931
> 
> 赞同：11
> 
> 时间：2013-04-18T10:01:40.567
> 
> 标签：java, foreach

我看到一个奇怪的行为。

```
 List<String> li = new ArrayList<>();
    li.add("a");
    li.add("b");
    li.add("c");
    li.add("d");
    li.add("e");
    for(String str:li){
        if(str.equalsIgnoreCase("d")){
            li.remove(str);     //removing second last in list works fine
        }
    } 
```

但是，如果我尝试删除列表中倒数第二个以外的任何内容，我会得到 ConcurrentModificationException。我在阅读“Oracle Certified Associate Java SE 7 Programmer Study Guide 2012”时引起了我的注意，该指南错误地假设 .remove() 始终适用于删除列表中倒数第二个的示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T11:35:08.373

在列表中，添加或删除被视为修改。在您的情况下，您进行了 5 次修改（添加）。

'for each' 循环的工作方式如下，

> ```
> 1.It gets the iterator.
> 2.Checks for hasNext(). 
> ```

```
public boolean hasNext() 
{
      return cursor != size(); // cursor is zero initially.
} 
```

> 3.如果为真，则使用 next() 获取下一个元素。

```
public E next() 
{
        checkForComodification();
        try {
        E next = get(cursor);
        lastRet = cursor++;
        return next;
        } catch (IndexOutOfBoundsException e) {
        checkForComodification();
        throw new NoSuchElementException();
        }
}

final void checkForComodification() 
{
    // Initially modCount = expectedModCount (our case 5)
        if (modCount != expectedModCount)
        throw new ConcurrentModificationException();
} 
```

重复步骤 2 和 3 直到 hasNext() 返回 false。

如果我们从 list 中删除一个元素，它的大小会减小并且 modCount 会增加。

如果我们在迭代时移除一个元素，modCount != expectedModCount 会得到满足并抛出 ConcurrentModificationException。

但是删除倒数第二个对象很奇怪。让我们看看它在您的情况下是如何工作的。

最初，

> cursor = 0 size = 5 --> hasNext() succeeds and next() also succeeds without exception.
> cursor = 1 size = 5 --> hasNext() succeeds and next() also succeeds without exception.
> cursor = 2 size = 5 --> hasNext() succeeds and next() also succeeds without exception.
> cursor = 3 size = 5 --> hasNext() succeeds and next() also succeeds without exception.

In your case as you remove ‘d’ , size gets reduced to 4.

> cursor = 4 size = 4 --> hasNext() does not succeed and next() is skipped.

In other cases, ConcurrentModificationException will be thrown as modCount != expectedModCount.

In this case, this check does not take place.

If you try to print your element while iterating, only four entries will be printed. Last element is skipped.

Hope I made clear.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T10:04:16.417

不要在这里使用`List#remove(Object)`，因为您正在 for-each 循环中访问 List 中的元素。

而是使用[Iterator#remove()](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29)从 List 中删除一个项目：

```
for(Iterator<String> it=li.iterator(); it.hasNext();) {
    String str = it.next();
    if(str.equalsIgnoreCase("d")) {
        it.remove();     //removing second last in list works fine
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T10:03:47.317

请使用while 从循环中`Iterator#remove()`删除元素的方法。`List`在内部，`for-each`循环将使用`Iterator`来循环`List`和 ，因为`Iterator`如果在迭代过程中以任何方式修改底层集合，而不是通过调用 Iterator 的 remove() 方法，则 an 的行为是未指定的。你得到了异常。

这个循环：

```
for(String str:li){
    if(str.equalsIgnoreCase("d")){
       li.remove(str);     //removing second last in list works fine
     }
} 
```

基本上是

```
Iterator<String> itr = li.iterator();
  while(itr.hasNext()){
    String str = (String)itr.next();
    if(str.equalsIgnoreCase("d")){
        li.remove(str);     //removing second last in list works fine
    }
} 
```

***为什么删除倒数第二个元素不会引发异常？***

因为通过删除倒数第二个元素，您将大小减少到您迭代过的元素数量。一个基本的`hasNext()`实现是

```
 public boolean hasNext() {
       return cursor != size;
    } 
```

因此，在这种情况下，`cursor=size=4`, so的`hasNext()`计算结果为`false`并且循环在 中执行并发修改检查之前提前中断`next()`。在这种情况下，永远不会访问最后一个元素。您可以通过在`if`

```
 if(str.equalsIgnoreCase("d") || str.equalsIgnoreCase("e")){
        // last element "e" won't be removed as it is not accessed
        li.remove(str);   
    } 
```

但是，如果您删除任何其他元素`next()`，则会引发`ConcurrentModificationException`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T10:05:35.110

由于 ArrayList 的快速失败行为，引发了 ConcurrentException。这意味着除了 Iterator#remove() 之外，您在迭代列表时不能修改列表。

参考[http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T10:08:17.557

如果您真的想遍历`ArrayList`并删除元素，那么您应该这样做：

```
for(int index = yourArrayList.size() - 1; index >= 0; index--) {
    if(yourCondition) {
        yourArrayList.remove(index);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T10:10:13.610

您可以“向后”迭代并删除元素，但不能向前。所以不是从第一个元素迭代到最后一个元素，而是从最后一个元素迭代到第一个元素。

伪代码：

```
for(int i = list.size() -1; i >= 0; i--)
{
   list.remove(i);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-25T06:17:34.047

If you wish to remove all then.**removeAll** should do the trick **rather than iterating through the collection**. I think it is speedier too.

# asp.net-mvc-4 - 范围验证不起作用

> ID：16079940
> 
> 赞同：1
> 
> 时间：2013-04-18T10:02:12.190
> 
> 标签：asp.net-mvc-4

我使用了范围验证，但这不起作用。我正在添加模型、控制器和查看代码。请帮助（我只在此代码中添加了相关字段）。

型号是：

```
public class TicketDetailModel : TicketModelBase
    {
        public WorkOnTicketCreateModel WorkOnTicketCreateModel { get; set; }
    }
public class TicketModelBase
    {
        [Required]
        [Range(1, int.MaxValue, ErrorMessage = "Please enter a value bigger than {0}")]
        public int EstimatedTime { get; set; }
        public virtual List<WorkOnTicket> WorkOnTickets { get; set; }
    }
public class WorkOnTicketCreateModel : WorkOnTicketModelBase
    {
        [Required]
        [Display(Name = "AssignedToUser")]
        public int AssignedToUserId { get; set; }
        public IEnumerable<SelectListItem> AssignedUser { get; set; }

        [Required]
        [Display(Name = "Ticket Status")]
        public int TicketStatusId { get; set; }

        public TicketStatus TicketStatusVal { get; set; }

        public IEnumerable<SelectListItem> TicketStatus { get; set; }

    } 
public class WorkOnTicketModelBase
    {
        public int Id { get; set; }

        [Required]
        public int EstimateHours { get; set; }

        [Required]
        [Range(1, int.MaxValue, ErrorMessage = "Please enter a value bigger than {0}")]
        public int WorkedHours { get; set; }

    }
Contoller:
        [HttpPost]
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Details(TicketDetailModel model, IEnumerable<HttpPostedFileBase> file)
        {
            using (ITransaction transaction = this.nhSession.BeginTransaction())
            {

                var ticketObj = this.nhSession.QueryOver<Ticket>().Where(t => t.Id == model.Id).SingleOrDefault();
                var workOnTicket = new WorkOnTicket();

             workOnTicket.Ticket = ticketObj;
                    workOnTicket.WorkedHours = model.WorkOnTicketCreateModel.WorkedHours;
                    workOnTicket.EstimateHours = model.WorkOnTicketCreateModel.EstimateHours;               
                ticketObj.WorkOnTickets.Add(workOnTicket);
                this.nhSession.Save(ticketObj);
                transaction.Commit();
            }
            return RedirectToAction("Details", new { id = model.Id, milestoneId = model.Milestone.Id, projectId = model.Project.Id });
        } 
```

看法：-

```
@model AnkTech.TicketManagement.Web.Models.Ticket.TicketDetailModel
@using (Html.BeginForm("Details", "Ticket", FormMethod.Post, new { enctype = "multipart/form-data" }))
{   
@Html.ValidationSummary(true)
 @Html.TextBoxFor(model => model.WorkOnTicketCreateModel.EstimateHours, new { @id = "work_remaining", @class = "s-mini", size = "2" })
Worked hours:                                                                            @Html.TextBoxFor(model => model.WorkOnTicketCreateModel.WorkedHours, new { @id = "worked_hours", @class = "s-mini", size = "2" })
<input type="submit" value="Submit" tabindex="2" name="commit" id="submit-comment"
 class="gray-btn">
} 
```

我已经删除了所有剩余的字段。我只添加了我要询问的相关字段，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:06:48.020

您需要使用`ModelState.IsValid`来检查模型是否实际有效。目前您分配验证属性但从不检查它们：

```
[HttpPost]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Details(TicketDetailModel model, IEnumerable file) {
    if (!ModelState.IsValid)
    {
        // Handle error
    }
    else
    {    
        using (ITransaction transaction = this.nhSession.BeginTransaction()) {
            var ticketObj = this.nhSession.QueryOver<Ticket>().Where(t => t.Id == model.Id).SingleOrDefault();
            var workOnTicket = new WorkOnTicket();
            workOnTicket.Ticket = ticketObj;
            workOnTicket.WorkedHours = model.WorkOnTicketCreateModel.WorkedHours;
            workOnTicket.EstimateHours = model.WorkOnTicketCreateModel.EstimateHours;               
            ticketObj.WorkOnTickets.Add(workOnTicket);
            this.nhSession.Save(ticketObj);
            transaction.Commit();
        }            
    }
    return RedirectToAction("Details", new { id = model.Id, milestoneId = model.Milestone.Id, projectId = model.Project.Id });
} 
```

# ios - 如何编辑后退按钮推送样式转换

> ID：16079948
> 
> 赞同：-1
> 
> 时间：2013-04-18T10:02:37.720
> 
> 标签：ios, objective-c, uitableview, uiviewcontroller

我创建了两个具有 tableView 和推送样式转换的页面 VC。

我想要自定义后退按钮推送样式转换，当返回上一页时，此页面再次重新加载并再次接收数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:08:29.763

您可以在导航栏上创建一个自定义按钮，将后退按钮替换为`hidesBackButton`set to `YES`，然后让它执行自定义 segue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:44:07.020

如果您需要自定义转换，您可以从以下内容开始：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationOptionTransitionFlipFromBottom forView:[[self navigationController] view] cache:YES];

[[self navigationController] popViewControllerAnimated:NO];

[UIView commitAnimations]; 
```

# tfs - TFS、Scrum 模板和产品待办列表项

> ID：16079951
> 
> 赞同：2
> 
> 时间：2013-04-18T10:02:47.720
> 
> 标签：tfs, project-management, scrum, tfs-process-template

我正在尝试将故事添加到我的产品积压中。我说得对吗，在 TFS(2012) 的 PBI 中，对于一个听起来像这样的故事：

> 作为用户，我想登录系统，以便访问登录所允许的功能。

这是一个有效的故事吗？然后，在 TFS 中，有一个“名称”和一个“描述”。描述不是我上面写的，名字是“登录”吗？我正在努力找出输入我的产品积压项目的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:58:00.950

当我使用 TFS 时，我试图将“标题”（或“名称”）保留为可以轻松搜索和排序的缩短值。该值在查询和板上显示时使用，因此我发现使用与标准用户故事描述不同的格式很方便。

然后我会推荐你​​在描述中的用户故事文本。像这样的东西：

> **标题：** 身份验证：登录
> 
> **描述：**作为用户，我想登录系统，以便访问登录所允许的功能。

在早期版本的 TFS 中，我无法标记故事（现在可以），因此我们在故事的标题中使用了主题来快速在标题中识别故事属于哪个投资主题（在我的示例中，身份验证）。

您可能要考虑故事可能会分解为多个故事，并且您的标题应该能够用来表示它。例如，您可能有一个关于 SSO 要求、注销要求、登录时加载个人详细信息、“记住我”的故事等的故事。以允许将所有这些分组的方式使用您的标题故事将帮助你走上这条路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:33:01.050

我的 Scrum 流程模板版本没有名称字段，我不确定它来自哪里（它可能是您的 TFS 实例中的自定义）。

你的故事似乎是一个合适的标题。

描述可能会扩展标题添加因为，为什么，价值主张。可能会详细说明或为故事提供背景。

请[注意您添加的故事具有适当的价值](http://www.romanpichler.com/blog/user-stories/writing-good-user-stories/)。作为用户，我不想登录系统，我希望它以最简单和安全的方式识别我。我希望它确保我是唯一可以看到我的个人数据的人。登录屏幕是这些愿望的实现，但它通常只是其中之一，可能不是满足我作为用户需求的最佳选择。

# android - 通过复选框从数据库中检索数据

> ID：16079952
> 
> 赞同：1
> 
> 时间：2013-04-18T10:02:52.337
> 
> 标签：android, database, android-checkbox

我的活动中有很多复选框。我想要做的是，当我单击任何一个复选框时，应在数据库中进行相关搜索，并考虑复选框的值来检索该值。

例如。如果我只检查了第一个复选框

```
if(chk1.ischecked){
      str="yes";
} 
```

所以我的查询将是

```
select * from database where abc="yes"; 
```

但是，如果我检查了 2 个或更多复选框，查询会发生变化。

```
select * from database where abc="yes" and pqr="yes"; 
```

这 10 个复选框可以有许多排列和组合。什么是我可以进行搜索的最简单方法。

![在此处输入图像描述](https://i.stack.imgur.com/YQKmJ.jpg)

# sockets - 关于套接字设置 no_delay 和保持活动的问题

> ID：16079953
> 
> 赞同：0
> 
> 时间：2013-04-18T10:02:53.583
> 
> 标签：sockets, network-programming

我想设置套接字的选项，如 no_delay 并保持活动状态。

我需要在服务器端和客户端都调用函数 setsockopt 还是只在服务器端或客户端调用此函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:21:14.697

这两个选项都适用于发送。如果希望双方在发送时使用 TCP_NODELAY 和 keepalive，则在双方都设置。在keep-alive的情况下，仅将其设置在一端就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:24:37.127

服务器端和客户端都需要套接字..如果它的服务器套接字选项在服务器套接字选项中设置它..客户端也是如此..它就像在两端设置电话选项进行配置一样。

# jquery - 如何在jquery中对变量进行分组并创建多维数组

> ID：16079954
> 
> 赞同：0
> 
> 时间：2013-04-18T10:02:57.050
> 
> 标签：jquery, arrays

我在数组中有一个变量列表，如下所示：

*   **a = 芒果**
*   **b = 马铃薯**
*   **c = 桃子**
*   **d = 葡萄**
*   **a = 芒果、土豆**
*   **a = 马铃薯、香蕉**

如何在 jquery 中创建数组并连接相同的变量并在同一变量中找到重复数据时删除？

预期成绩 ：

**[b=> "土豆", c => "桃子",d=>"葡萄", a=>"芒果、土豆、香蕉" ]**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:30:08.633

这个函数给出这样的 {b=> "potato", c => "peach",d=>"grape", a=>["mango", "potato","banana"]}

> $(function () { $('#btnClick').click( function(){
> 
> ```
>  var array={};
>     var a =[];        
>     a.push("mango")
>     a.push("apple")
>     a.push("mango")
> 
>     a = $.unique(a);
>     var val = "";
>     for (var i = 0; i < a.length; i++) {
>       val += a[i] + ",";
>     }
>     val = val.slice(0, -1) //remove last comma
>     alert(val);       array.a=a;      array.b="potato";       array.c="peach";        array.d="grape";     });
> }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:30:52.900

jQuery/JavaScript 不允许数组的字符串键值，但广泛接受的解决方法是创建一个对象（它仍然允许您使用括号表示法）。因此，
`arr = [b=> "potato", c => "peach",d=>"grape", a=>"mango, potato,banana" ]`
您可以不这样做，因为它是一个对象，您必须为 the和最后
`arr = { 'b': "potato", 'c': "peach", 'd': "grape", 'a': "mango"};` 指定一个属性名称。`potato``banana`

在 JavaScript 中，您将能够同时访问“peach”`arr.c`和`arr['c']`.

这种方法的一个缺点是您丢失了数组的一些原生特性，例如`.length`属性和各种数组函数。

让我知道这是否有帮助，或者如果您有任何问题:)

# c# - NPOI 是否支持 .xlsx 格式？

> ID：16079956
> 
> 赞同：8
> 
> 时间：2013-04-18T10:02:58.567
> 
> 标签：c#, excel, npoi

NPOI DLL 会识别`.xlsx`文件吗？

目前我正在为 Microsoft Excel 97-2003 使用 NPOI 1.2.5 版本的 DLL，但我还需要访问 Excel 扩展表`.xlsx`。

NPOI 会支持上述内容吗？

代码片段：

```
static void Main(string[] args) {
    XSSFWorkbook xssfwb;

    using(FileStream file=new FileStream(
            @"C:\Users\347702\Desktop\Hello.xlsx",
            FileMode.Open, FileAccess.Read)) {
        xssfwb=new XSSFWorkbook(file);
    }

    ISheet sheet=xssfwb.GetSheet("sheet1");
    sheet.GetRow(1048576);
    Console.WriteLine(sheet.GetRow(1048576).GetCell(0).StringCellValue);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-11T17:05:07.913

您可以使用 NPOI 读取 .xls 和 .xlsx 扩展名的 Excel 文件，您只需在 using 部分添加下一个

```
using NPOI.HSSF.UserModel;
using NPOI.HPSF;
using NPOI.POIFS.FileSystem;
using NPOI.XSSF.UserModel;
using NPOI.SS.UserModel; 
```

主要是在您打开文件时，您必须区分扩展名，以便使用适当的组件，并使用 ISheet 接口，以便您可以独立于文件扩展名引用工作表

```
//We get the file extension
fileExt = Path.GetExtension(fileName);

//Declare the sheet interface
ISheet sheet;

//Get the Excel file according to the extension
if (fileExt.ToLower() == ".xls")
{
    //Use the NPOI Excel xls object
    HSSFWorkbook hssfwb;
    using (FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read))
    {
        hssfwb = new HSSFWorkbook(file);
    }

    //Assign the sheet
    sheet = hssfwb.GetSheet(sheetName);
}
else //.xlsx extension
{
    //Use the NPOI Excel xlsx object
    XSSFWorkbook hssfwb;
    using (FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read))
    {
        hssfwb = new XSSFWorkbook(file);
    }

    //Assign the sheet
    sheet = hssfwb.GetSheet(sheetName);
} 
```

一旦你有了 excel 对象，你只需要阅读它（在 NPOI 中，行和列都是从零开始的）

```
//Loop through the rows until we find an empty one
for (int row = 0; row <= sheet.LastRowNum; row++)
{
    //Get the cell value
    string cellValue = sheet.GetRow(row).GetCell(0).ToString().Trim(); //In the method GetCell you specify the column number you want to read, in the method GetRow you spacify the row
    string cellValue2 = sheet.GetRow(row).GetCell(0).StringCellValue.Trim();
} 
```

要读取单元格值，您可以使用 .ToString() 方法或 StringCellValue 属性，但请注意，StringCellValue 仅适用于字符串单元格，数字和日期单元格会引发异常。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-07T14:31:38.023

是的，它确实。NPOI 2.0 测试版有效。这是一个示例代码，可帮助您入门：

```
class Program
{
static XSSFWorkbook hssfworkbook;
static DataSet dataSet1 = new DataSet();

static void Main(string[] args)
{
    InitializeWorkbook(@"E:\Docs\HoursWidget_RTM.xlsx");
    xlsxToDT();

    DisplayData(dataSet1.Tables[0]);

    Console.ReadLine();
}

static void InitializeWorkbook(string path)
{
    using (FileStream file = new FileStream(path, FileMode.Open, FileAccess.Read))
    {
        hssfworkbook = new XSSFWorkbook(file);
    }
}

static void xlsxToDT()
{
    DataTable dt = new DataTable();
    ISheet sheet = hssfworkbook.GetSheetAt(1);
    IRow headerRow = sheet.GetRow(0);
    IEnumerator rows = sheet.GetRowEnumerator();

    int colCount = headerRow.LastCellNum;
    int rowCount = sheet.LastRowNum;

    for (int c = 0; c < colCount; c++)
    {

        dt.Columns.Add(headerRow.GetCell(c).ToString());
    }

    bool skipReadingHeaderRow = rows.MoveNext();
    while (rows.MoveNext())
    {
        IRow row = (XSSFRow)rows.Current;
        DataRow dr = dt.NewRow();

        for (int i = 0; i < colCount; i++)
        {
            ICell cell = row.GetCell(i);

            if (cell != null)
            {
                dr[i] = cell.ToString();
            }
        }
        dt.Rows.Add(dr);
    }

    hssfworkbook = null;
    sheet = null;
    dataSet1.Tables.Add(dt);
}

static void DisplayData(DataTable table)
{
    foreach (DataRow row in table.Rows)
    {
        foreach (DataColumn col in table.Columns)
        {
            Console.WriteLine("{0} = {1}", col.ColumnName, row[col]);
        }
        Console.WriteLine("-------------------------------------------");
    }
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-03T07:18:54.797

可能是在提供原始答案时库没有此功能，但现在您可以使用相同的代码库处理 xls 和 xlsx 而无需检查文件扩展名。

诀窍是使用 WorkbookFactory 类透明地加载这两种类型的文件。只要您不使用特定于任一版本的特殊功能，这将起作用。

```
using (FileStream fileStream = File.OpenRead(fullPathToExcelFile)) //fullPathToExcelFile can hold either a xls or xlsx, we don't care
{
   IWorkbook workbook = WorkbookFactory.Create(fileStream);
   ISheet worksheet = workbook.GetSheet("SampleSheet");

   //Now read from the worksheet anyway you like
   var value = worksheet.GetRow(1).GetCell(1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-06T06:01:40.220

NPOI 2.0 支持 xlsx。您可以从 [https://npoi.codeplex.com/releases/view/112932下载](https://npoi.codeplex.com/releases/view/112932)

# java - 如何解决 Java 中不支持 POST 和 GET 的警告？

> ID：16079967
> 
> 赞同：1
> 
> 时间：2013-04-18T10:03:30.470
> 
> 标签：java, jquery, spring

在我的 Java 应用程序中，当单击超链接时，我正在发送表单。

现在我为超链接点击事件编写了代码。

```
 <form:form action="demo1" modelAttribute="DEMO">
    -----
   <a href="href_form1" id="href1" class="save_details">Save</a>
    -------
  $('#href1').click(function(){
    $("#DEMO").attr("action", $('.save_details').attr("href"));
    $("#DEMO").submit();
     }); 
```

还有我的控制器类

```
@RequestMapping(value = "demo1", method = RequestMethod.POST)
public @ResponseBody String demo1(Demo demo,
        Errors errors, Model model)throws Exception {
-------//some database code
} 
```

但我收到警告。

```
WARNING: Request method 'GET' not supported 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:08:56.110

```
<form:form action="demo1" modelAttribute="DEMO" method="POST"> 
```

您必须在表单中指定您正在使用 POST 方法。如果你不这样做，GET 将被用作默认值。

# android - 在android中使用秒表显示持续时间？

> ID：16079970
> 
> 赞同：0
> 
> 时间：2013-04-18T10:03:37.967
> 
> 标签：android, stopwatch

我需要为秒表的价值干杯

即，开始和停止之间的时间

如果我单击停止按钮，它应该敬酒该持续时间。这个怎么做？

在这里我尝试了一些代码

**chrono_meter.java**

```
public class Chrono_meter extends Activity {

Chronometer chr;
Button btn_stop_travel;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.chronometer_layout);

    chr = (Chronometer)findViewById(R.id.chronometer1);
    chr.start();

    btn_stop_travel = (Button)findViewById(R.id.btn_stop_inspection);
    btn_stop_travel.setOnClickListener(mStopListener);
   }
    View.OnClickListener mStopListener = new OnClickListener() {
    public void onClick(View v) {
        chr.stop();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:10:19.800

尝试这个

```
 View.OnClickListener mStopListener = new OnClickListener() {
            public void onClick(View v) {
                chr.stop();
             Toast.makeText(Chrono_meter.this, chr.getText(), Toast.LENGTH_LONG).show()   ;
                }
            }; 
```

# image - 网站在 Google Chrome 中看起来有问题

> ID：16079972
> 
> 赞同：0
> 
> 时间：2013-04-18T10:03:40.397
> 
> 标签：image, google-chrome, css-transitions

我有这个网站：[hrrubin.dk](http://hrrubin.dk)

在 chrome 中，您会注意到所有在鼠标悬停时具有图像开关的图像都定位错误。这是最近才发生的缺陷。可能是对 chrome 代码进行一些更改的原因。

是制作 chrome hack 的解决方案，所以不要打扰其他浏览器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:43:15.960

我认为有更好的方法来做到这一点。您将所有这些图像放在一个精灵中，并将它们作为背景图像应用到`a`标签中。为每个`a`标签提供不同的 ID。然后使用背景位置来定位它们并在悬停时更改它们。这就是它的一般做法。

# php - 用正则表达式匹配正则和破折号分隔的单词

> ID：16079975
> 
> 赞同：1
> 
> 时间：2013-04-18T10:03:43.217
> 
> 标签：php, regex

我想匹配由破折号分隔的`-`单词和常规单词。目前我正在使用这个正则表达式 `\b(word|someother|xyz|....|word50)\b // upto 50 words` ，但现在问题是我也想要匹配词

```
w-ord
w-o-r-d
some-oth-e-r
x-y-z 
```

`(-)?`所以不要像这样手动放置每个字符

```
\b(w(-)?o(-)?r(-)?d|w(-)?o(-)?r(-)?d|someother|....|word50)\b 
```

有没有更短的方法可以用正则表达式来做到这一点，所以它也可以匹配`-`。由于列表太长，我想要更短的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:13:20.953

您可能可以像这样匹配它：

```
$regex = '#\b(word|someother|xyz|....|word50)\b#';
$ret = preg_match($regex, preg_replace('#(?<=\w)-(?=\w)#', '', $str), $m); 
```

即，如果破折号出现在 2 个单词字符之间，则首先从字符串中删除所有破折号（连字符），然后进行匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:13:44.820

这个怎么样（从你的问题中我可以理解）：

`/[a-zA-z]{1}[a-zA-z\-]{0,48}[a-zA-z]{1}/`

它将匹配所有字母单词（最多 50 个）并在其中包含“-”（但不在开头或结尾）

# r - 复杂的 R - 函数/循环

> ID：16079980
> 
> 赞同：0
> 
> 时间：2013-04-18T10:03:48.523
> 
> 标签：r, function, loops

这是我遇到的一个具有挑战性但安静有趣的冲突......我希望我真的能做到这一点，希望有人能在这里帮助我

这是“R”

这是我正在运行的代码，用于从训练中获取 X1 的 R 平方

```
model=randomForest(X1~.,data=training,importance=TRUE,keep.forest=TRUE)
predicted=predict(model,newdata=testing[,-1])
actual=testing$X1
rsq=1-sum((actual-predicted)^2)/sum((actual-mean(actual))^2)
print(rsq) 
```

这是培训负责人，让您知道它的样子

```
head(training)
        X1        X2        X3         X4        X5         X6
68   -3.556526  4.588409 -2.756521  -2.742035 11.542023 -18.405807
23   -1.915947 -0.179710 -0.240580  -0.278259 -0.284058   0.553627
129 -24.252174 -4.869564  4.800001 -14.608688  5.255074 -20.228981
5    -1.637680 -1.147827 -2.005795  -1.121750  0.101440  -1.608688
147 -68.289856 -0.626083 19.933334  -6.637680 15.379715 -11.515945 
```

其中有多达 X77 个，其中行数为 73。

我的目标是制作一个循环

```
model=randomForest(X1~.,data=training,importance=TRUE,keep.forest=TRUE)
predicted=predict(model,newdata=testing[,-1])
actual=testing$X1
rsq=1-sum((actual-predicted)^2)/sum((actual-mean(actual))^2)
print(rsq) 
```

高达 X77

直到

```
model=randomForest(X77~.,data=training,importance=TRUE,keep.forest=TRUE)
predicted=predict(model,newdata=testing[,-77])
actual=testing$X77
rsq=1-sum((actual-predicted)^2)/sum((actual-mean(actual))^2)
print(rsq) 
```

所以我可以达到 77 的 r 平方

我的最终目标只是取那些 77 r-squared 的平均值

* * *

给 Maxim.K 和其他人

```
rsq=function(i){
model=randomForest(testing[,1]~.,data=training,importance=TRUE,keep.forest=TRUE)
predicted=predict(model,newdata=testing[,-i])
actual=testing[,i]
1-sum((actual-predicted)^2)/sum((actual-mean(actual))^2)
}

rsq=function(i){
model=randomForest(Xi~.,data=training,importance=TRUE,keep.forest=TRUE)
predicted=predict(model,newdata=testing[,-i])
actual=testing[,i]
1-sum((actual-predicted)^2)/sum((actual-mean(actual))^2)
} 
```

我知道第二个在逻辑上没有意义，但这就是我需要的。所以 testing$X1 是 testing[,1]，但它不起作用把 testing[,1] 我必须把它放在“X1”的形式

我该怎么做……？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:21:18.147

我认为 Maxim.K 已经暗示过这一点，但这样的事情会奏效

```
rsq = function(i) {
  n = colnames(testing)[i]
  model=randomForest(as.formula(paste(n,"~.")),data=training,importance=TRUE,keep.forest=TRUE)
  predicted=predict(model,newdata=testing[,-i])
  actual=testing[[n]]
  1-sum((actual-predicted)^2)/sum((actual-mean(actual))^2)
}
sapply(1:77, rsq) 
```

# java - Java 变量不递增，保持为 0

> ID：16079985
> 
> 赞同：0
> 
> 时间：2013-04-18T10:04:05.687
> 
> 标签：java, variables, object, methods

我有一个排序方法，我想计算方法所做的移动，但是应该计算的变量不计算任何东西，当我读到它时我只得到 0。

```
//En variabel för att man ska lagra info i den 
    //Tillfällig lagring. 
    int temp;
    int forflyttningarBubble = 0;
    int jamForElse = 0;

    //Loopar, loopen är inte mer än storleken på arrayen
    for(int i=0;i<allatal.length-1;i++ )
    {
       //En till loop
       for(int j=i+1;j<allatal.length;j++)
        { 
           //Om talet peckaren pekar på större än det andra
           //talet så ska programmet
           jamForElse++;
           if (allatal[i] > allatal[j])
           {
               forflyttningarBubble++;
               forflyttningarBubble++;
               forflyttningarBubble++;
               //Lagrar värdet array "i" i temp 
               temp = allatal[i];
               //Överför "j" till "i"
               allatal[i] = allatal[j];
               //temp värdet överförs till "i"
               allatal[j] = temp;
               forflyttningarBubble++;
            }
         }
    }
    statistik BubbleData = new statistik(jamForElse, forflyttningarBubble, allatal);
    return BubbleData;' 
```

这是我使用的对象

```
public class statistik {
    public int jamForElse;
    public int byten;
    public int[] allatal;

    public statistik(int jamForElse, int byten, int[] allatal) {
        this.byten = byten;
        this.allatal = allatal;
        this.jamForElse = jamForElse;
    }
} 
```

当我尝试将值写入文件时，我得到“0”

```
//Starttid
        long startTime = System.nanoTime();
        //Anropar metoden
        statistik bubble = bubbleSort(allatal);         
        //sluttiden
        long endTime = System.nanoTime();
        //för att få ett svar på tiden
        long duration = endTime - startTime;
        double seconds1 = (double)duration / 1000000000.0;

        //Gör en loop som är lika lång som arrayen
        for(int k=0;k<bubble.allatal.length-1;k++){
            //Lagrar informationen i filen 
            out.println(bubble.allatal[k]);
        }
        //Lagrar tiden också i filen
        out.println("BubbleSort (Nano): " + duration);
        out.println("Antal Sekunder: " + seconds1);
        out.println("Förflyttningar: " + bubble.byten);
        out.println("Jämförelser: " + bubble.jamForElse + "\n\n");
        System.out.print(bubble.byten); // i get "0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:52:47.767

答案就在代码中

```
 bubbleSort(allatal); 
```

其中有许多缺陷。基本上，很少处理落在边缘附近的案例。零元素数组永远不会落入内部循环，也永远不会更新`byten`字段。一个元素的数组也会发生同样的情况。

您是否验证了您的输入以确保您有足够的元素进行排序？小输入（大小为 0 或 1 的数组）将作为“已排序”通过它，它们是；但是，它们不需要任何实际操作。

# jsf - 使用选择一个菜单更新条形图

> ID：16079988
> 
> 赞同：1
> 
> 时间：2013-04-18T10:04:09.870
> 
> 标签：jsf, primefaces, bar-chart

我想根据我选择的项目显示条形图。

```
<h:outputText value="Document: " />
<h:selectOneMenu value="#{chartBean.document}" converter="#{documentConverter}" required="true">
     <f:selectItems value="#{chartBean.listSelectItemDocument}"/>
     <p:ajax event="change" update="barChart" immediate="true"/>
</h:selectOneMenu>  

<p:barChart id="barChart" value="#{chartBean.categoryModel}"  
    title="Interactive Bar Chart" style="height:300px" min="0" >  
 <p:ajax event="itemSelect" listener="#{chartBean.itemSelectBar}" update="growl" />  
</p:barChart> 
```

我使用 primeface 库。

```
public CartesianChartModel getCategoryModel() {
    createCategoryModel();
    return categoryModel;  
}

private void createCategoryModel() {  
    categoryModel = new CartesianChartModel();
    ChartSeries dled = new ChartSeries();
    if(mDocument!=null)
    {
        dled.setLabel("Dled");
        List<Date> listDate = mUserDocumentManger.listDate(mDocument);
        Calendar calendar = new GregorianCalendar();
        for(Date lDate : listDate)
        {
            calendar.setTime(lDate);
            dled.set(date,number);
        }   
        categoryModel.addSeries(dled);
      }
    } 
```

当我选择列表中的另一个项目时，什么都没有发生……感谢您帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:44:11.850

感谢您的帮助

解决方案是在我的类 Document 中创建一个 equal 方法

# android - 在不使用 nameValuePairs 的情况下使用 HttpPost 在 Android 上发送字符串

> ID：16079991
> 
> 赞同：6
> 
> 时间：2013-04-18T10:04:21.267
> 
> 标签：android, string, http-post

我正在寻找有关如何在 android 上使用 HttpPost 方法发送信息的信息，但我总是看到：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(posturl);

List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("Name","Var1"));
params.add(new BasicNameValuePair("Name2","Var2"));

httppost.setEntity(new UrlEncodedFormEntity(params));    
HttpResponse resp = httpclient.execute(httppost);
HttpEntity ent = resp.getEntity(); 
```

问题是我不能这样做，因为我必须连接到接收 XML 格式的字符串的资源。

关于如何在不使用字符串的情况下仅发送字符串的任何想法`List<nameValuePair>`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T10:06:59.067

您是否尝试过使用[StringEntity](http://developer.android.com/reference/org/apache/http/entity/StringEntity.html)？上面的代码可以更新使用`StringEntity`，下面是生成的代码：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(posturl);

httppost.setEntity(new StringEntity("your string"));    
HttpResponse resp = httpclient.execute(httppost);
HttpEntity ent = resp.getEntity(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:10:27.520

您可以使用 JSON 作为发布参数。尝试参考[FlexJson](http://flexjson.sourceforge.net/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-22T09:04:22.450

```
// Sending HTTPs Requet to Server

    try {
        Log.v("GG", "Sending sever 1 - try");
        // start - line is for sever connection/communication
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "10.0.0.1/abc.php");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("qrcode", contents));

        httppost.setEntity(new UrlEncodedFormEntity(
                nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        // end - line is for sever connection/communication
        InputStream is = entity.getContent();

        Toast.makeText(getApplicationContext(),
                "Send to server and inserted into mysql Successfully", Toast.LENGTH_LONG)
                .show();

        // Execute HTTP Post Request
        response= httpclient.execute(httppost);

        entity = response.getEntity();
        String getResult = EntityUtils.toString(entity);
        Log.e("response =", " " + getResult);

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection "
                + e.toString());
    } 
```

# android - FragmenManager 替换使覆盖

> ID：16079992
> 
> 赞同：4
> 
> 时间：2013-04-18T10:04:21.487
> 
> 标签：android, android-fragments

我正在使用 supportlib v4 来达到主从流程。

**问题：“详细信息”片段的新实例覆盖第一个（创建的 xml）而不是替换它。**

我的活动布局是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".TrackListActivity" >

    <fragment
        android:id="@+id/fragmentList"
        android:name="pl.com.digita.BikeComputerUi.TrackList.TrackListFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <fragment
        android:id="@+id/fragmentTrack"
        android:name="pl.com.digita.BikeComputerUi.TrackList.TrackInfoFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

</LinearLayout> 
```

点击后调用的方法：

```
private void showDetails(long trackId){
    View fragmentContainer = getActivity().findViewById(R.id.fragmentTrack);
    TrackInfoFragment trackInfoFragment =  TrackInfoFragment.newInstance(trackId);
    FragmentManager fragmentManager =  getFragmentManager();
    fragmentManager.beginTransaction().replace(fragmentContainer.getId(), trackInfoFragment).commit();

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T06:08:08.243

> **注意：**当您通过在布局 XML 文件中定义片段来将片段添加到活动布局时，您无法在运行时删除该片段。如果您计划在用户交互期间交换片段，则必须在活动首次启动时将片段添加到活动中，如下一课所示。

[这是http://developer.android.com/training/basics/fragments/creating.html](http://developer.android.com/training/basics/fragments/creating.html)上的最后一件事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:29:01.643

检查以下代码它将起作用。

```
View fragmentContainer = ClassName.this.findViewById(R.id.fragmentTrack);
 TrackInfoFragment fragment = new TrackInfoFragment();                  
getSupportFragmentManager().beginTransaction()
.replace(fragmentContainer.getId(), fragment).commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:46:28.647

这是解决方案 - 只需将片段更改为 FrameLayout 而无需在活动创建时加载它：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".TrackListActivity" >

    <fragment
        android:id="@+id/fragmentList"
        android:name="pl.com.digita.BikeComputerUi.TrackList.TrackListFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <FrameLayout
        android:id="@+id/details"
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="2" />

</LinearLayout> 
```

# python - 对象实例与对象值python

> ID：16079995
> 
> 赞同：0
> 
> 时间：2013-04-18T10:04:29.353
> 
> 标签：python, instance

我很难理解列表中对象的实例。如何在不保存实例的情况下将对象的值保存到列表中？这是不可能的不是吗？下面的colde有效，但我想避免使用.value，因为我可能有几个参数..不确定我是否足够清楚..

```
class BougieBuffer:
    def __init__(self):
        self.bougiebuffer=deque(maxlen = 10000)
        self.maximum = Maximum()

    def update(self,bougie):
        self.maximum.value = random.randint(-1,1)
        bougie.maximum.value = self.maximum.value
        self.bougiebuffer.append(bougie)
        print len(self.bougiebuffer)
        for i in range (len(self.bougiebuffer),0,-1):
            print self.bougiebuffer[i-1].prixFermeture,   self.bougiebuffer[i-1].maximum.value 
```

我会自然地写下类似下面的东西，但显然这不起作用，它为所有人返回相同的值

```
bougie.maximum = self.maximum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:28:06.297

您想创建实例的副本*以*`Maximum()`分配给`bougie.maximum`属性；使用[`copy.copy`](http://docs.python.org/2/library/copy.html#copy.copy)或[`copy.deepcopy`](http://docs.python.org/2/library/copy.html#copy.deepcopy)：

```
from copy import deepcopy

bougie.maximum = deepcopy(self.maximum) 
```

`deepcopy`如果有任何属性`Maximum`是可变的，您将需要；a `list`,`dict`或`set`其他自定义类实例都是可变的，但整数和字符串之类的东西不是。

# email - 如何在 mailchimp 中设置日期区域设置？

> ID：16079996
> 
> 赞同：3
> 
> 时间：2013-04-18T10:04:29.667
> 
> 标签：email, date, locale, date-format, mailchimp

我需要更改 mailchimp 语言环境`*|DATE:M y|*`。这给出了 Apr 2013，我想要 Abr 2013（葡萄牙语格式）。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:29:08.597

您是否尝试过用翻译合并标签包装日期？

```
*|TRANSLATE:PT|* *|DATE:M y|* 
```

[http://blog.mailchimp.com/automatically-translate-your-emails-to-over-30-languages/](http://blog.mailchimp.com/automatically-translate-your-emails-to-over-30-languages/)

可以在此处找到语言代码列表：

[http://kb.mailchimp.com/article/is-it-possible-to-translate-content-in-multiple-languages](http://kb.mailchimp.com/article/is-it-possible-to-translate-content-in-multiple-languages)

但是葡萄牙语选项是：

葡萄牙语（巴西）= pt

葡萄牙语（葡萄牙）= pt_PT

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-18T10:10:27.003

给你

```
setlocale(LC_ALL, 'pt_PT');
echo strftime("%b %d %Y"); 
```

这将输出

```
Abr 18 2013 
```

要格式化其他语言的日期，您需要使用[setlocale()](http://php.net/manual/it/function.setlocale.php)和[strftime()](http://php.net/manual/en/function.strftime.php)函数

# php - 在 PHP 中包含来自不同函数的代码

> ID：16079997
> 
> 赞同：0
> 
> 时间：2013-04-18T10:04:30.560
> 
> 标签：php, macros, include

我有一个来自 C 的库，我正在适应 PHP。PHP 中没有宏，但我需要类似的东西。让我给你一个简单的例子：

```
function check($test){
   if($test == false) return;
} 
```

我在另一个内部调用了这样的函数几次：

```
function checks(){
   check(0==1);
   check(1==1);
   ...
} 
```

而且我希望检查功能在第一次测试后停止。请注意，这不是我想要做的，这只是一个例子，所以你可以理解我在找什么。“check”中的return语句应该使函数“checks”返回。

首先十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:25:37.270

没有办法在 PHP 中完全重现这种行为。但是，`try {} catch () {}`阻止可能会有所帮助。

```
<?php
define('SAFE_RETURN', 8795);

function scream($condition){
   if($condition)throw new Exception('', SAFE_RETURN);
}

function checks(){
   try {
      scream(1 == 0);
      echo 1;

      scream(0 == 1);
      echo 2;

      scream(1 == 1);
      echo 3;

   } catch(Exception $e){ if($e->getCode() != SAFE_RETURN)throw $e; };
}

checks();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:10:05.477

我不确定这是否可以在 php 中完成，但您可以执行以下操作：

```
function check($test){
    if($test == false) 
        return false;
    return true;
}

function checks(){
   if check(0==1) return;
   if check(1==1) return;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:49:18.603

这个怎么样..，

```
<?php

    function check($test) {
        if($test == FALSE) {
            //do Something..
            exit();
        }
    }

    function checks() {
        check(1 == 1);
        echo "1 Done..</br>";
        check(2 == 2);
        echo "2 Done..</br>";
        check(0 == 0);
        echo "3 Done..</br>";
        check(1 == 2);
        echo "4 Done..</br>";
        check(1 == 0);
        echo "5 Done..</br>";
        check(2 == 1);  
        echo "6 Done..</br>";
    }

    checks();
?> 
```

# memory-management - Imageview 和/或声音有内存问题（进入后台）

> ID：16079998
> 
> 赞同：0
> 
> 时间：2013-04-18T10:04:34.580
> 
> 标签：memory-management, ios6, uiimageview, core-animation, automatic-ref-counting

我的应用程序在 ARC 中。
在我的应用程序的任何视图中，都有一个背景图像，并且在该图像上，一些动画不断重复这些图像。

**问题是：我的应用程序在一段时间后进入后台。**

我在堆栈、谷歌和苹果文档上看到并尝试了很多东西，但没有得到令人满意的解决方案。
**我有三个问题。**
（1）如何阻止这种情况？
(2) ARC有没有其他方法可以手动释放内存。
(3) 如果我使用 [self.view removeFromSuperview]; 对于 UIView 那么还有一些内存没有在 ARC 中释放？

动画的 MyCode 是

```
 imageview = [[UIImageView alloc] init];
    imageview.image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy08" ofType:@"png"]];
    [self.view addSubview:imgBubbleAnimation];

    imageview.animationImages = [NSArray arrayWithObjects:
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy01" ofType:@"png"]],
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy02" ofType:@"png"]],
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy03" ofType:@"png"]],
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy04" ofType:@"png"]],
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy05" ofType:@"png"]],
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy06" ofType:@"png"]],
                                          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy07" ofType:@"png"]],
                                          nil];
    [imageview setAnimationRepeatCount:0]; // 0 for continuous
    imageview.animationDuration =3.0;
    [imageview startAnimating]; 
```

和声音文件（点击特定按钮时播放）

```
URL = [NSURL fileURLWithPath: [[NSBundle mainBundle]
                                     pathForResource:@"ect1a" ofType:@"mp3"]];
audioSound = [[AVAudioPlayer alloc] initWithContentsOfURL:URL error:nil];
audioSound.delegate = self;
audioSound.volume = 5.0;
audioSound.numberOfLoops = 0;
[audioSound play]; 
```

我有一个视图的 15 个小声音文件和一个视图的 15 个动画。
在每个特定的动画中，至少有 15 张图像。
欢迎任何帮助、建议、链接或教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T04:33:53.663

不使用 imageview.animationImages 是你需要做的第一件事来控制你的内存使用。永远不应该使用该 API，因为它可以让您轻松地在自己的脚下开枪。请参阅[imageview-animation-getting-more-memory](https://stackoverflow.com/questions/16183898/imageview-animation-getting-more-memory/17227721#17227721)或[predictable-crash-due-to-uiview-animations](https://stackoverflow.com/questions/14316303/unpredictable-crash-due-to-uiview-animations/14316400#comment24955525_14316400)或[iphone-app-memory-leak-with-uiimage-animation-problem-testing-on-device](https://stackoverflow.com/questions/2992855/iphone-app-memory-leak-with-uiimage-animation-problem-testing-on-device/17224968#17224968)。