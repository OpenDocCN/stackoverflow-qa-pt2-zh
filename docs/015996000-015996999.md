# StackOverflow 问答 15996000-15996999

# c# - 不可变对象中的长度属性

> ID：15996000
> 
> 赞同：-1
> 
> 时间：2013-04-14T05:03:49.527
> 
> 标签：c#, performance

如果对象是不可变的（我自己实现的对象），我应该使用 Length 属性还是只读变量？如果对象具有 Length 作为属性，它会在 for 循环中失去一些性能。

```
for (int i = 0; i < myObject.Length; i++) // Length is readonly variable
{
    // some code
} 
```

和：

```
int len = myObject.Length; // Length is a property

for (int i = 0; i < len; i++)
{
    // some code
} 
```

你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:14:43.507

在这样的样本中，这并不重要。JIT 不插入简单的可能性`get`非常低。即使`get`没有内联，额外的函数调用也不会成为非常简单的代码之外的性能瓶颈。

为了说明我的意思，我在发布模式下运行了以下命令（如果你让它调试它会以不同的方式工作）。

```
private int Length { get; set; }
private int _length;
void Run()
{
    Length = int.MaxValue;
    _length = int.MaxValue;
    var watch = new Stopwatch();
    watch.Start();
    for (int i = 0; i < Length; i++)
    {
    }
    watch.Stop();
    Console.WriteLine("Elapsed: {0}ms", watch.ElapsedMilliseconds);
    watch.Restart();
    for (int i = 0; i < _length; i++)
    {
    }
    watch.Stop();
    Console.WriteLine("Elapsed: {0}ms", watch.ElapsedMilliseconds);
} 
```

我运行了 10 次，得到以下平均值：Property 为 743 ms，Variable 为 740 ms。这种差异可能只是因为我的机器上发生的尝试次数和其他事情很少。

现在，如果您通过属性关闭内联，您将获得时间差异：属性为 4577 毫秒，变量为 775 毫秒。现在这听起来差别很大（总时间的 6 倍），但请记住我的循环条件：20 亿次迭代。这意味着每次操作的差异大约为 2 ns。换句话说，大约 4 个时钟周期，除了最极端的性能场景外，还不足以担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:07:48.033

除非您在这里有一些非常大的特殊数据集，因此您希望对循环进行大量迭代，否则属性和变量之间的差异可能可以忽略不计。

简单的选择是使用变量。使用属性将为您带来额外的好处，即以后能够在不更改类签名的情况下修改其行为（例如，如果您想以某种新方式计算长度）。

另一个相关的好处可能是能够私下设置属性（如果需要，可以在以后更改），但只能公开阅读。

我想我会因为这些原因去买房。无论如何，我不会仅根据对性能的预期影响做出此选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T05:13:17.827

将临时变量更改为查询是一个非常标准的重构。换句话说，强烈建议如果属性调用非常快，那么您不应该创建临时变量。它被称为“replaceTempWithQuery”。这是一个简介：

[http://www.refactoring.com/catalog/replaceTempWithQuery.html](http://www.refactoring.com/catalog/replaceTempWithQuery.html)

我会向所有从事编程的人强烈推荐《重构》这本书。

添加为编辑：我对此表示反对，但过早的优化确实是要避免的 - 如果它产生非常明显的问题，我只会建议使用临时查询修复。

[Donald Knuth 的一句名言：“我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源”](http://en.wikipedia.org/wiki/Program_optimization)。无论如何，这是一个选择问题，除非您的代码有很多维护者。然后，维护时间通常会对您的优化/设计选择产生重大影响。

# javascript - 按下键时精灵消失javascript

> ID：15996004
> 
> 赞同：0
> 
> 时间：2013-04-14T05:05:42.990
> 
> 标签：javascript, jquery, html

我目前正在努力让我的播放器精灵在我的屏幕上移动，但是当按下一个键时，所有精灵似乎都消失了！我在萤火虫中没有出现任何错误，所以我假设精灵没有被正确重绘或类似的东西。

这是我的播放器代码：

```
function Player()
 {
  var sprite = new Sprite(),
   player,
   x,
   y,
   w = sprite.width,
   h = sprite.height,
   speed = 4;

this.init_Player = function(pos_X, pos_Y){
  player = sprite.load("player");
   x = pos_X;
   y = pos_Y;
};

this.update = function(delta) {

    var calculated_speed = (speed * delta) * (60/1000);

    $(document).keydown(function(e)
    {
        var cancel_default = (e.which === 32 || (e.which > 36 && e.which < 41));
        cancel_default && e.preventDefault();

        if(e.keyCode == 37){
            x -=calculated_speed;
        }
        else if(e.keyCode == 38){
            y -=calculated_speed;
        }
        else if(e.keyCode == 39){
            x +=calculated_speed;
        }
        else if(e.keyCode == 40){
            y +=calculated_speed;
        }
    });

};

this.draw = function() {
    ctx.drawImage(player,x, y, w ,h);
};
 } 
```

播放器是在我的主游戏 javascript 文件中创建的，如下所示：

```
player.init_Player(location_X,location_Y); 
```

然后在我的主游戏循环中，我有现在，增量和最后一次以及对 player.update 和 player.render 的调用，如下所示：

```
 function update(){

    now = Date.now();
    delta = now - last_update;

    ctx.clearRect(0,0,canvas.width,canvas.height);

    gameGUI.update();

    player.update(delta);
    player.draw();

    last_update = now;
    setTimeout(update,1);
 } 
```

就像我在顶部说的那样，我的精灵在按键上所做的所有事情都消失了。您可以在上面看到的代码是我为播放器拥有的所有代码，所以这里的某个地方是错误！

我将如何使用我设置的基于时间的动画来让我的精灵在屏幕上移动？

谢谢

**编辑**

另外让您知道，我的 last_update 等于 Date.now() 在我的更新调用最初发出之前的行，如下所示：

```
function game_init(state) {
    game_settings(state);
    last_update = Date.now();
    update();
} 
```

**编辑 2** 在继续检查时，精灵似乎并没有消失，只是从游戏屏幕上移了很远……所以另一个猜测是我的计算在某个地方是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:27:26.677

所有排序的家伙，我使用这个小教程让我的角色移动！对于那里的初学者来说，真的很容易阅读和理解。 [关联](http://blog.cubicleninja.com/?cat=26&paged=6)

专业人士如何看待本教程？

# javascript - 更改给定数据模型的 HTML 样式

> ID：15996006
> 
> 赞同：0
> 
> 时间：2013-04-14T05:06:01.397
> 
> 标签：javascript, jquery, html, css, mvvm

我通过一些 AJAX“GET”请求获得了一些我正在使用的数据。现在，我只是将数据放在表格行中。这是我的数据的列表视图。但是，如果我还想提供数据的缩略图视图或类似桌面的数据视图，那么实现此目的的最佳方法是什么？

我已经阅读了一些关于 Backbone、Angular、Ember 和 Knockout 等 Javascript 框架的内容，但这是否是正确的方法？如果有助于理解我的问题，我的数据是一堆文件及其元数据。我很想拥有它们的这三个视图，但我不想让我的 Javascript 只是通过 DOM 节点进行大量搜索，我宁愿有一些数据一致性并让 DOM 根据什么视图呈现数据我选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:34:42.120

我同意@Klaster_1，我自己使用 Backbone，它绝对不会通过 DOM 节点进行大量搜索。这是一种简洁的方法，具有一组数据和多个视图和模板。

另一种方法是使用 CSS 和 JQuery 根据您选择的视图动态添加或删除类。但这种方法相当于大量搜索 DOM 节点。

# cocos2d-iphone - 使用 Box2d 实体进行无限滚动

> ID：15996007
> 
> 赞同：0
> 
> 时间：2013-04-14T05:06:23.780
> 
> 标签：cocos2d-iphone, scroll, box2d

我正在使用 cocos2d 和 box2d 制作一个游戏，它基本上由一个滚下无限小山的球组成。我目前的方法包括使用 CCFollow 来创建滚动效果，同时迭代一系列四个背景图像以创建连续性。我想让球从山上反弹，所以我考虑用两个相互交替的 b2Body 对象来制作山。但这需要手动移动身体，这似乎使跟踪相应精灵的位置有些混乱。山丘图​​像甚至应该是精灵吗？有没有更好的方法可以让这更容易？

# animation - 分离动画

> ID：15996020
> 
> 赞同：0
> 
> 时间：2013-04-14T05:09:17.150
> 
> 标签：animation

好的，我正在使用结构来处理我的动画。现在我无法为我的弹丸和我的角色设置动画。一旦我射击我的弹丸，我的角色就​​不会再移动了。

我对角色起始位置和弹丸起始位置使用相同的变量，因为我需要弹丸从角色开始。

我想知道如何使用相同的变量，但将它们分开，所以当弹丸的坐标改变时......字符不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:20:39.147

我建议使用单独的变量来存储角色和弹丸的位置，并最初将它们设置为相同的值。以下应该类似于您现在所拥有的：

```
pos = (0, 0)
def animate():
    pos = add(pos, (1, 1)) 
```

以下是使用单独变量存储位置的示例；它允许角色走与弹丸不同的路径。

```
characterposition = (0, 0)
projectileposition = (0, 0)
def animate():
    characterposition = add(characterposition, (1, 0))
    projectileposition = add(projectileposition, (1, 1)) 
```

如果您绝对必须对它们的两个位置使用相同的变量，则需要将角色和弹丸位置分别合并到该变量中（即 pos = [[0, 0], [0, 0]]）。

# ios - UITableViewCell willDisplayCell 方法难题

> ID：15996028
> 
> 赞同：1
> 
> 时间：2013-04-14T05:10:36.287
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

每当我创建一个新单元格时，就会出现奇怪的魔法。如果我稍后退出视图控制器（数据全部保存），然后再次返回视图控制器（重新加载数据等），一切都很好（但如果我留在视图控制器中，它就会搞砸)

现在让我来描述一下这个奇怪的魔法：

*   我有一个自定义 UITableViewCell
*   当 indexPath 为偶数时，其中存在一个蓝色圆圈
*   当 indexPath 为奇数时，其中存在一个绿色矩形

但是，当创建一个新单元格时，其中既有绿色矩形又有蓝色圆圈，这怎么可能呢？

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(CustomCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (cell.blueCircle)    cell.blueCircle = nil;
    if (cell.greenRect)   cell.greenRect = nil;    
    if (indexPath.row % 2 == 0){
        NSLog(@"Even indexPath: %@", indexPath);
        //some of the code not shown here creates a blue circle
        [cell addSubview:cell.blueCircle];
    }
    else {
        NSLog(@"Odd indexPath: %@", indexPath);
        //some of the code not shown here creates a green rectangle
        [cell addSubview:cell.greenRect];
    } 
} 
```

请注意，我只得到一个 NSLog，要么是奇数要么是偶数，那么为什么我会得到两个形状而不是一个呢？

我有一种感觉，在调用此消息之前，其中一个形状以某种方式（不确定这是如何工作的）从前一个单元格转移到新单元格，但我确实有懒惰的“nilization”来解决这个问题。

您对此有何看法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T05:19:20.047

因为单元格是从重用队列中拉出的，所以它们不会完全重绘，除非您告诉它们使用[-setNeedsDisplayInRect:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCCCHHI)重绘并传入需要重绘的脏矩形。否则，当您绘制 greenSquare 的矩形时，您需要在 blueCircle 的矩形上绘制，反之亦然。

我相信发生的事情是过去绘制的绿色方块，单元格在滚动到屏幕外后被添加到重用队列中，然后从重用队列中拉出单元格以填充新数据，然后发生蓝色圆圈要在当前通道上绘制，但绘制绿色方块的矩形从未失效和重绘。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T05:23:04.327

将 cell.blueCircle 设置为 nil 会将指针设置为 nil，但不会删除 blueCircle。由于蓝色圆圈是单元格的子视图，因此单元格有一个指向它的强指针。您需要将其从其超级视图中删除。

```
[cell.blueCircle removeFromSuperview];
[cell.greenRect removeFromSuperview]; 
```

# android - 尝试创建 AlertDialog 时程序崩溃

> ID：15996029
> 
> 赞同：1
> 
> 时间：2013-04-14T05:10:36.943
> 
> 标签：android, exception, alert

我在制作警报对话框时遇到了困难，它的代码在这里：

```
public void setp2(View v){
        p2 = (TextView)findViewById(R.id.p2);
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(getApplicationContext());
        alertDialogBuilder.setTitle("Please enter player 2 name");
        alertDialogBuilder.setMessage("MESSAGE");
        alertDialogBuilder.setCancelable(false);
        alertDialogBuilder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int id) {
                // TODO Auto-generated method stub
                dialog.cancel();
            }
        });
        AlertDialog alert = alertDialogBuilder.create();
        alert.show();   

} 
```

每当我运行它时，它会崩溃 logcat 看起来像：

```
04-14 06:09:36.282: E/Trace(25945): error opening trace file: No such file or directory (2)
04-14 06:09:37.822: E/AndroidRuntime(25945): FATAL EXCEPTION: main
04-14 06:09:37.822: E/AndroidRuntime(25945): java.lang.IllegalStateException: Could not execute method of the activity
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.View$1.onClick(View.java:3595)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.View.performClick(View.java:4088)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.View$PerformClick.run(View.java:16984)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.os.Handler.handleCallback(Handler.java:615)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.os.Looper.loop(Looper.java:137)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.app.ActivityThread.main(ActivityThread.java:4745)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at java.lang.reflect.Method.invokeNative(Native Method)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at java.lang.reflect.Method.invoke(Method.java:511)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at dalvik.system.NativeStart.main(Native Method)
04-14 06:09:37.822: E/AndroidRuntime(25945): Caused by: java.lang.reflect.InvocationTargetException
04-14 06:09:37.822: E/AndroidRuntime(25945):    at java.lang.reflect.Method.invokeNative(Native Method)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at java.lang.reflect.Method.invoke(Method.java:511)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.View$1.onClick(View.java:3590)
04-14 06:09:37.822: E/AndroidRuntime(25945):    ... 11 more
04-14 06:09:37.822: E/AndroidRuntime(25945): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:589)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:326)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at android.app.Dialog.show(Dialog.java:277)
04-14 06:09:37.822: E/AndroidRuntime(25945):    at uk.co.mikecoombes.oxo.MainActivity.setp2(MainActivity.java:46)
04-14 06:09:37.822: E/AndroidRuntime(25945):    ... 14 more 
```

看了好几遍都没有发现哪里出错了，请问有大神帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T05:21:29.787

```
Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application 
```

看起来上下文很糟糕，有时会`getApplicationContext()`返回奇怪的结果......尝试改变这个：

```
new AlertDialog.Builder(getApplicationContext()); 
```

至：

```
new AlertDialog.Builder(MainActivity.this); 
```

通过链接中的 commonsware 检查答案

[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context)

# file-io - Clojure 读取大文件并在其中转换数据的方法

> ID：15996035
> 
> 赞同：3
> 
> 时间：2013-04-14T05:12:05.720
> 
> 标签：file-io, clojure, functional-programming, iterator

我正在处理一个很大的 Subrip 字幕文件，需要一次处理一个字幕。在 Java 中，要从文件中提取字幕，我会编写一个具有以下签名的方法：

```
Iterator<Subtitle> fromSubrip(final Iterator<String> lines); 
```

的使用`Iterator`给了我两个好处：

1.  该文件永远不会完整地存储在内存中，它的任何转换阶段也不会。
2.  `Subtitle`一种抽象，我可以在没有内存开销的情况下遍历对象集合。

由于迭代器本质上是命令式和可变的，因此它们在 Clojure 中可能不是惯用的。那么处理这种情况的 Clojure 方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:30:13.320

正如弗拉基米尔所说，您需要正确处理懒惰和文件关闭。下面是我的做法，如“ [Read a very large text file into a list in clojure](https://stackoverflow.com/questions/4118123/read-a-very-large-text-file-into-a-list-in-clojure/13312151#13312151) ”中所示：

```
(defn lazy-file-lines 
  "open a (probably large) file and make it a available as a lazy seq of lines"
  [filename]
  (letfn [(helper [rdr]
                  (lazy-seq
                    (if-let [line (.readLine rdr)]
                      (cons line (helper rdr))
                      (do (.close rdr) nil))))]
         (helper (clojure.java.io/reader filename)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T14:43:19.717

从目录中读取所有文件，这是一种懒惰的方式。

使用变黑和通道。

代码：

```
(ns user
  (:require [clojure.core.async :as async :refer :all 
:exclude [map into reduce merge partition partition-by take]]))

(defn read-dir [dir]
  (let [directory (clojure.java.io/file dir)
        files (filter #(.isFile %) (file-seq directory))
        ch (chan)]
    (go
      (doseq [file files]
        (with-open [rdr (clojure.java.io/reader file)]
          (doseq [line (line-seq rdr)]
            (>! ch line))))
      (close! ch))
    ch)) 
```

调用：

```
(def aa "D:\\Users\\input")
(let [ch (read-dir aa)]
  (loop []
    (when-let [line (<!! ch )]
      (println line)
      (recur)))) 
```

# =================

reify Iterable 接口，可以在java中使用。

```
MyFiles.clj:
(ns user
  (:gen-class :methods [#^{:static true} [readDir [String] Iterable]])
  (:require [clojure.core.async :as async :refer :all 
:exclude [map into reduce merge partition partition-by take]]))

(defn -readDir [dir]
  (def i nil)
  (let [ch (read-dir dir)
        it (reify java.util.Iterator
             (hasNext [this] (alter-var-root #'i (fn [_] (<!! ch))) (not (nil? i)))
             (next [this] i))
        itab (reify Iterable
               (iterator [this] it))]
    itab)) 
```

爪哇代码：

```
for (Object line : MyFiles.readDir("/dir")) {
    println(line)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T05:42:33.083

您可以为此使用惰性序列，例如[`line-seq`](http://clojuredocs.org/clojure_core/clojure.core/line-seq).

但是，您必须小心，由`line-seq`（以及基于某些外部资源返回惰性序列的其他函数）返回的序列永远不会泄漏到例如`with-open`范围之外，因为在关闭源之后，进一步读取惰性序列将导致异常。

# java - 扩展 Canvas 时使用 drawLine() 绘制粗线

> ID：15996036
> 
> 赞同：5
> 
> 时间：2013-04-14T05:12:17.183
> 
> 标签：java, awt, java-2d, java-canvas

鉴于以下情况：

```
public class NavigationCanvas extends Canvas implements MouseListener,MouseMotionListener,KeyListener  {

    public void paint(Graphics g)
    {

        // some code 
        // more 
        // ...

        g.setColor(Color.black);

        //  drawing each Line
        for (int i=0; i<length; i++) 
        {
            Line2D currLine  = m_lines.get(i);

            g.drawLine((int)currLine.getX1(),(int)currLine.getY1(),
                (int)currLine.getX2(),(int)currLine.getY2());   
            g.drawLine((int)currLine.getX1()+1,(int)currLine.getY1()+1
                ,(int)currLine.getX2()+1,(int)currLine.getY2()+1);
            g.drawLine((int)currLine.getX1()+2,(int)currLine.getY1()+2
                ,(int)currLine.getX2()+2,(int)currLine.getY2()+2);
        }

    }       
    ...
} 
```

当我画线时，`currLine`我得到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/OBQ5S.gif)

正如你所看到的，我打了 3 次电话`drawline()`，让它更大胆，但它仍然不像我想要的那样。

我怎样才能画出一条粗线？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T05:49:00.813

`Graphics2D#setStroke`控制绘制线条的样式。 [`BasicStroke`](http://docs.oracle.com/javase/7/docs/api/java/awt/BasicStroke.html)是默认实现，`Stroke`有很多参数，你最感兴趣的是宽度。

![在此处输入图像描述](https://i.stack.imgur.com/6xrn7.png)

```
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestStroke {

    public static void main(String[] args) {
        new TestStroke();
    }

    public TestStroke() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            Graphics2D g2d = (Graphics2D) g.create();

            int width = getWidth();
            int height = getHeight();

            int xDif = width / 4;
            int yDif = height / 4;

            g2d.setStroke(new BasicStroke(1, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
            g2d.drawLine(xDif, yDif, width - xDif, yDif);
            g2d.setStroke(new BasicStroke(2, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
            g2d.drawLine(width - xDif, yDif, width - xDif, height - yDif);
            g2d.setStroke(new BasicStroke(3, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
            g2d.drawLine(width - xDif, height - yDif, xDif, height - yDif);
            g2d.setStroke(new BasicStroke(4, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
            g2d.drawLine(xDif, height - yDif, xDif, yDif);

            g2d.dispose();
        }

    }

} 
```

查看[描边和填充图形基元](http://docs.oracle.com/javase/tutorial/2d/geometry/strokeandfill.html)以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:16:20.327

使用库`setStroke()`中的方法：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/awt/Graphics2D.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Graphics2D.html)`Graphics`

```
setStroke(Stroke s)
    Sets the Stroke for the Graphics2D context. 
```

它需要一个`Stroke`对象，[http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Stroke.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Stroke.html)

# android - 钛移动发布apk错误信息

> ID：15996039
> 
> 赞同：2
> 
> 时间：2013-04-14T05:12:50.153
> 
> 标签：android, titanium-mobile

我试图从 Titanium 工作室发布 android apk 文件，但工作室给了我错误。

```
[ERROR] Program launch failed. Unable to locate Java VM. Please set JAVA_HOME environment 
variable.
[ERROR] Unabled to prepare JavaScript for packaging. Error code 4. 
```

但是在模拟器中一切正常。加上 Java 主变量已设置，我还使用 HelloWorld 示例对其进行了测试。

谁能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:59:07.987

我想您已经了解了[如何设置 Titanium Studio 和 SDK](http://docs.appcelerator.com/titanium/latest/#!/guide/Setting_up_Titanium_Studio)。请确保您还设置了[所有环境变量](http://docs.appcelerator.com/titanium/latest/#!/guide/Software_Locations_and_Environment_Variables)，尤其是与 Android SDK 相关的环境变量。最后，您应该检查是否运行了[所有必需部件的正确版本](http://docs.appcelerator.com/titanium/latest/#!/guide/Titanium_Compatibility_Matrix)。例如，您需要在 Windows 上安装 Java 6 32 位。

如果这一切都没有帮助，请提供`build.log`（在您的项目文件夹中）和诊断测试的结果（帮助 -> Titanium Studio -> 运行诊断测试），并提供一般日志文件（与测试相同的菜单）。

# c - 一个人应该掌握哪些编程技术或主题才能在 Google Code Jam 中做得很好？

> ID：15996042
> 
> 赞同：0
> 
> 时间：2013-04-14T05:14:23.333
> 
> 标签：c

在今年的 Google Code Jam 中，我无法解决排位赛的一个问题。[这个](http://ideone.com/Gv2rfH)（底部的完整代码）是我想出的解决[公平和正方形](https://code.google.com/codejam/contest/2270488/dashboard#s=p2)问题的方法。并且，它被判定为不正确，两次。

而且，它令人痛苦地士气低落。我打算在下一次 Google Code Jam 中改变这种情况。我知道一个人必须练习（很多！）才能成为更好的程序员，成为专家需要数年时间。我相信我已经准备好付出那么多努力。但是，一个人很容易被要掌握的东西列表的大小所淹没。所以，我的问题是，是否**可以设计一条学习路径，以便人们能够识别和掌握在 Google Code Jam 或类似项目中表现更好所需的技能在线比赛？如果是，那会是什么？**

这条路径应该允许一个人先掌握更简单的技术，然后再转向更难的技术，好像难度级别逐渐增加一样。

这是我对公平和正方形问题的（错误）解决方案

```
#include<stdio.h>
#include<math.h> 
int sqrRoot(double numberToCheck);
int isPalindrome(int numToCheck);

int main(void)
{
int i=0,j=0,cases=1,steps=0,low=0,high=0,isSquare=0,count=0,bit=0;
scanf("%d", &steps);

while (cases<=steps)
{
    scanf(" %d %d", &low, &high );
    for (j=low;j<=high;j++)
    {
        isSquare = sqrRoot(j);
        if (isSquare == 1)
        {
            bit = isPalindrome(j);
            if (bit==1)
            {
                count ++;
                //printf("\n wowowo# %d", j);
            }
        }
    }

    printf("Case #%d: %d \n", cases,count);
    count = 0;
    bit = 0;
    cases++;
}

return 0;
}

int sqrRoot(double numberToCheck)
{

double result = sqrt(numberToCheck);
int y=0;
y = result;
 if (result == y)
 {

    return 1;
 }

 else
 {
    return 0;
 }
}

int isPalindrome(int numToCheck)
{
  int n=0,rev=0;
  double dig=0.0;
  n = numToCheck;

  while(numToCheck>0)
 {
   dig = numToCheck % 10;
       rev = rev * 10 + dig;
       numToCheck = numToCheck / 10;
 }

  if (n==rev)
 {
   return 1;
 }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T05:24:26.413

看来，鉴于您对要学习的技能清单如此长且令人生畏的描述，最好的方法是仅间接地为这场比赛做准备，并直接尽可能多地专注于学习计算机科学。作为一个中间人（并且不断努力学习更多），我可以说我学到最多的时期是我不寻求获得地位（例如通过获奖）但诚实地试图效仿工艺大师。例如，在计算机科学方面，阅读像 Peter Norvig 这样的人（通过他的书籍和 MOOC 课程）编写的书籍并尝试复制他们的代码，这让我的技能来之不易但显着提高。我想说的是，最重要的是，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:48:20.793

You need to master Algorithms and Data Structures. There is one book that you can read online for free that I highly recommend: [Algorithms by Dasguspta](http://www.cs.berkeley.edu/~vazirani/algorithms.html).

[Coursera.org has some courses](https://www.coursera.org/courses?orderby=upcoming&search=algorithms&cats=cs-theory) on this too. Sedgewick's is really good and [his book](http://algs4.cs.princeton.edu/home/) is a nice addition to any bookshelf.

You can also practice with ACM problems or TopCoder, which also provides some [good tutorials](http://www.topcoder.com/tc?d1=tutorials&d2=alg_index&module=Static)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T12:35:42.037

我不是算法竞赛的专家，但他们要求你做一项与现实世界算法问题解决非常不同的工作。首先，它们通常需要一个精确的解决方案，而在现实生活中，近似值通常可能是一个非常好的选择。它简化了验证：只有一个输出是可能的。此外，如果您可以通过近似来解决许多难题，那么它们就会变得微不足道。第二个区别是组织者必须确保为一个问题获得的分数与问题的难度有关。这个问题不能有一个微不足道的解决方案，并且必须需要一些工作才能解决。这意味着大多数问题都是众所周知的问题的变体，竞争者必须找到如何使通常的算法适应这个问题。通过这种方式，人们可以判断他们适应这些算法的速度和效果。

对您而言，这意味着您必须了解常用的优化算法。幸运的是，有关于它们的书籍。不幸的是，我不认识他们。（我主要在大学学习）如果你想最大化你的机会，你最好使用这些通用算法：

*   寻路（Dept-first、Breath-first、Best-first、Dijkstra、A*）
*   动态规划
*   分支与绑定
*   潜水与征服
*   约束编程
*   图算法
*   也许[Flow network](http://en.wikipedia.org/wiki/Flow_network)，但不确定你是否需要它

这些主题重叠，通常不容易找到哪一个有用。现在，这只是理论。就像我说的那样，困难在于使它们适应您遇到的问题。为此，你只能训练很多。还需要培训，因为它将帮助您了解如何快速有效地实施它们。编写这些算法的方法有很多种，有了经验，您就会了解它们（谷歌会提供帮助）并知道如何选择它们。当然，你不能启动 google code jam，看着一些问题然后说......“嗯......它记得我在书中读到的一些问题”你会浪费太多时间尝试第一次实现它时间。这与现实世界的算法也有很大的不同。

不管怎样，还有很多其他的比赛。如果您满足要求，您应该尝试它们。它通常很有趣和有趣。

您的解决方案是我们能找到的关于公平与平方问题的最简单的解决方案。当然，这还不够：您总是必须找到比第一个解决方案更好的解决方案。我相信你的 isSquare 函数是错误的。浮点运算会增加小的不精确性，这可能会改变非常简单的测试，例如您编写的测试。

您的算法的成本来自您测试的数字数量。这些数字可能很大（顺便说一句，您的代码不适用于这些巨大的数字，因为它们不能存储在 C 的通常的 32 位整数中）并且迭代它们可能需要很长时间。为了改善这一点，您可以直接遍历平方根。如果您`r`从`sqrt(A)`to迭代`sqrt(B)`，那么您确定 是from to`r*r`的所有正方形。因此，您不必测试它们的平方根是否为整数，并且要测试的数字要少得多。`A``B`

这个想法很经典：减小要迭代的空间大小。您可以通过仅迭代回文根来进一步改进算法。公平和平方根也有一些数学性质，但我懒得证明它，所以我没有寻找其他改进。这是关于你的问题的最后一句话：你可能需要基本的数学知识来解决一些问题。通常，算法技能也是证明您使用的算法的能力。

# mysql - where 子句中的 City_id 不明确

> ID：15996043
> 
> 赞同：0
> 
> 时间：2013-04-14T05:14:38.177
> 
> 标签：mysql, codeigniter, codeigniter-2, codeigniter-url

我已经编写了查询，但它在 where 子句中显示的城市 ID 不明确

```
SELECT
  `a`.`name`,
  `a`.`company`,
  `a`.`city`,
  `a`.`country`,
  `a`.`phone`,
  `a`.`type_of_enquiry`,
  `b`.`enquiry_id`,
  `a`.`hearaboutus`,
  `a`.`email`,
  `a`.`comments`,
  `a`.`address`,
  `c`.`id`,
  `c`.`city_id`
FROM (`sobha_enquiry` a)
  LEFT JOIN `sobha_enquiryzone` b
    ON `b`.`enquiry_id` = `a`.`id`
  LEFT JOIN `sobha_admin` c
    ON `c`.`city_id` = `b`.`city_id`
WHERE `city_id` = '2'
GROUP BY `a`.`id`
ORDER BY `id` desc, `a`.`id` DESC 
```

请帮助我 ！！！！！！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T05:16:15.113

```
SELECT
  `a`.`name`,
  `a`.`company`,
  `a`.`city`,
  `a`.`country`,
  `a`.`phone`,
  `a`.`type_of_enquiry`,
  `b`.`enquiry_id`,
  `a`.`hearaboutus`,
  `a`.`email`,
  `a`.`comments`,
  `a`.`address`,
  `c`.`id`,
  `c`.`city_id`
FROM (`sobha_enquiry` a)
  LEFT JOIN `sobha_enquiryzone` b
    ON `b`.`enquiry_id` = `a`.`id`
  LEFT JOIN `sobha_admin` c
    ON `c`.`city_id` = `b`.`city_id`
WHERE `a`.`city_id` = '2'
GROUP BY `a`.`id`
ORDER BY `c`.`id` desc, `a`.`id` DESC 
```

在您的 where 子句中，您应该提供 b 或 c，因为使用别名并且两个表中都存在 city_id 列，这使 mysql 感到困惑

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T05:16:32.510

问题在于`WHERE`子句，您需要指定要搜索的表，因为`city_id`它们都包含相同的列名。它可能来自`sobha_enquiryzone`或来自`sobha_admin`。

```
SELECT  a.NAME,
        a.company,
        a.city,
        a.country,
        a.phone,
        a.type_of_enquiry,
        b.enquiry_id,
        a.hearaboutus,
        a.email,
        a.comments,
        a.address,
        c.id,
        c.city_id
FROM    sobha_enquiry a
        LEFT JOIN sobha_enquiryzone b
                ON b.enquiry_id = a.id
        LEFT JOIN sobha_admin c
                ON c.city_id = b.city_id
WHERE   b.city_id = '2' -- or c.city_id = '2' (both will yield the same result)
GROUP   BY a.id
ORDER   BY id DESC, a.id DESC 
```

# c# - 使用 MOQ 验证表达式参数

> ID：15996047
> 
> 赞同：5
> 
> 时间：2013-04-14T05:15:22.307
> 
> 标签：c#, linq, unit-testing, expression, moq

我正在尝试验证我测试的方法是否已使用特定表达式调用。我花了几个小时没有得到我想要的结果。

这是被测系统

```
public class sut
{
    private IEntityUtil _ew;
    public sut(IEntityUtil ew)
    {
        _ew = ew;
    }

    public void Search()
    {
        Guid id = Guid.Parse("CB594050-3845-4EAF-ABC5-34840063E94F");
        var res = _ew.SelectSingle<Post>(w => w.Id == id, new PersonalSiteEntities());
    }

} 
```

这是依赖

```
public interface IEntityUtil
{
    TEntity SelectSingle<TEntity>(Expression<Func<TEntity, bool>> predicate, System.Data.Objects.ObjectContext ctx)
        where TEntity : EntityObject;
    List<TEntity> SelectList<TEntity>(Expression<Func<TEntity, bool>> predicate, System.Data.Objects.ObjectContext ctx)
        where TEntity : EntityObject;
    bool Insert<TEntity>(TEntity entity, System.Data.Objects.ObjectContext ctx)
        where TEntity : EntityObject;
} 
```

这就是我试图测试它的方式

```
 public class tst
{
    [TestMethod]
    public void tst1()
    {
        var cwMock = new Mock<ConsoleApplication1.IEntityUtil>();

        Guid id = Guid.Parse("CB594050-3845-4EAF-ABC5-34840063E94F");

        //cwMock.Setup(x => x.SelectSingle<ConsoleApplication1.Post>(w => w.Id == id, It.IsAny<System.Data.Objects.ObjectContext>())).Returns(new ConsoleApplication1.Post()).Verifiable();

        //cwMock.Setup(x => x.SelectSingle(It.IsAny<Expression<Func<ConsoleApplication1.Post, bool>>>(), It.IsAny<System.Data.Objects.ObjectContext>())).Returns(new ConsoleApplication1.Post()).Verifiable();

        Expression<Func<ConsoleApplication1.Post, bool>> func = (param) => param.Id == id;

        cwMock.Setup(x => x.SelectSingle<ConsoleApplication1.Post>(func, It.IsAny<System.Data.Objects.ObjectContext>())).Returns(new ConsoleApplication1.Post());

        var sut = new ConsoleApplication1.sut(cwMock.Object);

        sut.Search();

        //cwMock.VerifyAll();

        cwMock.Verify(x => x.SelectSingle(func, It.IsAny<System.Data.Objects.ObjectContext>()));
    }

} 
```

请注意，第二个注释设置将使测试通过，但它不会让我验证是否已传入特定表达式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:04:29.717

有两件事会极大地帮助（我们帮助你）是

1.  给你的测试起一个有意义的名字，这样我们就知道你在追求什么，
2.  将您的测试分为三个区域，并用注释或空格分隔：

    *   安排，
    *   行为，
    *   断言

这使得它更清楚的是动作是什么。

也就是说，在我看来，您试图断言`ew.SelectSingle`在调用时调用了一次`sut.Search()`？

此外，我注意到您在测试中创建了 Guid，但从未对它做任何事情。因此，这里有一个关于您的测试的快速建议（不使用 IDE，因此您可能会发现错误）：

```
 [Fact]
    public void Verify_SelectSingle_IsCalledOnce( ){

        Guid id = Guid.Parse( "CB594050-3845-4EAF-ABC5-34840063E94F" );
        var cwMock = new Mock<ConsoleApplication1.IEntityUtil>( );
        var post = new ConsoleApplication1.Post{ Id = id };
        cwMock
          .Setup( x=> x.SelectSingle<ConsoleApplication1.Post>(It.IsAny<Guid> ))
          .Returns( post );
        var sut = new ConsoleApplication1.sut(cwMock.Object);

        sut.Search();

        cwMock.Verify( 
          x=> x.SelectSingle( It.IsAny<ObjectContect>( o => o.Id == id )), 
          Times.Once);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:39:24.367

如前所述，很难准确说出您要完成的工作，因为您没有明确说明您的测试名称。也就是说，您似乎需要为您的模拟设置提供一个回调，以允许您验证表达式。像这样的东西应该可以帮助你（使用通过的注释掉的设置）：

```
cwMock.Setup(x => x.SelectSingle(It.IsAny<Expression<Func<ConsoleApplication1.Post, bool>>>(), It.IsAny<System.Data.Objects.ObjectContext>())).Callback<Expression<Func<ConsoleApplication1.Post, bool>>>(VerifyExpression).Returns(new ConsoleApplication1.Post()).Verifiable(); 
```

然后创建一个回调方法

```
private static void VerifyExpression(Expression<Func<ConsoleApplication1.Post, bool>> expression)
{
    var func = expression.Compile();
    // call func(params) and verify against it
} 
```

# ios - 更改 UIAlertView 键盘的类型

> ID：15996048
> 
> 赞同：10
> 
> 时间：2013-04-14T05:15:28.387
> 
> 标签：ios, objective-c, ipad, uialertview

如何指定我的`UIAlertView`文本字段键盘是数字键盘？我设置`alertViewStyle`为`UIAlertViewStylePlainTextInput`.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-14T05:25:15.470

我认为您可以执行以下操作：

```
UITextField* tf = [alertView textFieldAtIndex:0];
tf.keyboardType = UIKeyboardTypeNumberPad; 
```

请参阅[UIAlertView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)和[UITextInputTraits](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)文档

# gwt - 在Gwt中，使用ClickHandler for Label时如何让小手弹出

> ID：15996053
> 
> 赞同：2
> 
> 时间：2013-04-14T05:16:49.230
> 
> 标签：gwt, label

比如说，我不喜欢使用 Anchor 或 Hyperlink，但更喜欢使用 Clickable Label。但是在为Label添加ClickHandler之后，当我将鼠标悬停时，没有我们在使用HyperLink或Anchor时经常看到的小手弹出。所以，

使用ClickHandler for Label时如何让小手弹出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T05:41:00.023

您可以通过两种方式实现：

**单独使用 Gwt**

```
 lable.getElement().getStyle().setCursor(Cursor.POINTER); 
```

**并通过将 css 样式添加到`lable`（首选）**

```
lable.addStyleName(mylableStyle);

.mylableStyle {
   cursor: pointer;
} 
```

# javascript - 使用 EaselJS 在 html5 画布中绘制一条线

> ID：15996060
> 
> 赞同：2
> 
> 时间：2013-04-14T05:18:19.453
> 
> 标签：javascript, html, html5-canvas, easeljs

我对 Easel 和 HTML5 本身很陌生。我正在尝试使用 EaselJS 在画布上绘制一条线。X 坐标固定为 100，Y 坐标从数组列表中获取。我编写的代码如下所示。可以请有人让我知道我哪里出错了吗？

```
function myFunction(attachPoint)
{
//Code for canvas creation is written here.[Not shown];
//created a stage.
stage = new createjs.Stage(canvas.domElement());
//3\. create some shapes.MagnitudeLessThanTwo is the array where we get the YAxis Coordinates from
alert("The lenght before function is"+MagnitudeLessThanTwo.length);
myShape = new drawLineGraph(MagnitudeLessThanTwo);
//4\. finally add that shape to the stage
stage.addChild(myShape);
//5\. set up the ticker
if (!createjs.Ticker.hasEventListener("tick")) { 
createjs.Ticker.addEventListener("tick", ourTickFunction);
  };
};

function drawLineGraph(dataList)
{
this.index=0;//To keep the track of the index of the array from which we get the Y Axis.
var graphics = new createjs.Graphics();
graphics.setStrokeStyle(1);
graphics.beginStroke("white");
graphics.moveTo(50,(dataList[this.index].magnitude)*100); 
graphics.lineTo(50,(dataList[(this.index)++].magnitude)*100);
createjs.Shape.call(this,graphics);
this.tick = function() {
graphics.moveTo(100,(dataList[this.index].magnitude)*100); 
graphics.lineTo(100,(dataList[(this.index)++].magnitude)*100);
stage.addChild(graphics);
  };
};
drawLineGraph.prototype = new createjs.Shape(); //set prototype
drawLineGraph.prototype.constructor = drawLineGraph; //fix constructor pointer

I am getting the following Error.
"Object [object Object] has no method 'isVisible'"- This is inside the EaselJS Library. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:47:38.263

这里有几个问题。您看到的错误是因为您将图形添加到舞台，而不是形状。

另一个问题是如何在勾选中修改图形：

```
 this.tick = function() {
    graphics.moveTo(100,(dataList[this.index].magnitude)*100); 
    graphics.lineTo(100,(dataList[(this.index)++].magnitude)*100);
    stage.addChild(graphics);
}; 
```

您只需将您的 Shape 添加到舞台上一次，每次更新舞台时，它都会重新绘制您的图形。您的滴答调用正在每帧添加新的 Graphics 指令，因此它将所有这些调用堆叠起来，最终变得非常慢。

确保在为它绘制新东西之前清除你的图形，除非你试图创建一个附加效果（如果你是，也许研究缓存/更新缓存以使其具有性能）。查看 GitHub 存储库中的“curveTo”和“updateCache”示例以了解使用情况。

将形状而不是图形添加到舞台后，请随时发布一些后续问题，我可以尝试进一步提供帮助。

干杯:)

# html - 如何在 CSS 中使用“all”属性

> ID：15996067
> 
> 赞同：3
> 
> 时间：2013-04-14T05:19:45.157
> 
> 标签：html, css

`all`CSS中的属性是如何使用的？

这个问题与[这个](https://stackoverflow.com/questions/15953876/entire-completely-overwrite-css-styles)有关。

据此：[_](http://www.w3.org/TR/css3-cascade/#all-shorthand)

> 'all' 属性是重置所有 CSS 属性的简写。

```
Name:           all
Value:          initial | inherit | default
Initial:        See individual properties
Applies to:     See individual properties
Inherited:      See individual properties
Percentages:    See individual properties
Media:          See individual properties
Computed value: See individual properties
Animatable:     See individual properties 
```

因此，它必须为选择器重置 CSS 属性。

这意味着，例如，如果我们导入 Twitter Bootstrap 并添加下面的样式，则`.btn`必须重置该类：

```
.btn {
    all: default;
} 
```

这不会发生。看到这个[jsFiddle](http://jsfiddle.net/Dfn7G/2/)。

我对么？这不是在网络浏览器中实现的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T05:24:37.930

您链接到的 W3C 规范说它目前处于“工作草案”阶段。此外，CanIUse.com 上没有提及该`all`属性，所以我认为可以肯定地说它是实验性的。

您可能想尝试`-webkit-all`或`-moz-all`.

你知道，阅读此功能的规范，感觉就像是 hack。如果您适当地设计样式级联，则不需要此属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T17:10:00.753

现在我相信只有 Firefox 支持`all`（[从 27 版开始](http://dev.w3.org/csswg/css-cascade/#all-shorthand)）。您可以使用`all`属性（例如 all: unset;）将值应用于每个属性（方向和 unicode-bidi 除外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T14:08:03.207

在最新的 FireFox 中查看此笔：http: [//codepen.io/tomliv/pen/AejFH](http://codepen.io/tomliv/pen/AejFH)

灰色区域有 3 个输入（真的！）。

这不是我所期望的，但也许设置`all`为`initial`您需要的更多？

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-14T05:35:46.403

每个属性确实没有**默认**值 - 至少一个在所有浏览器中都是一致的。

这就是 CSS 重置的真正意义所在。我建议您查看 Eric Meyer 的 CSS 重置： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)。通常，这些类型的重置用于减少浏览器的不一致。

如果您希望将某些内容应用于所有*元素*（您仍然需要单独列出每个属性），请使用

```
* { /* Universal Selector */ } 
```

使用重置样式表或一些 CSS 框架（如 bootstrap）可能是规范 CSS 和跨浏览器一致性的更好解决方案。

# box2d - Box2D 对象大小/力

> ID：15996071
> 
> 赞同：1
> 
> 时间：2013-04-14T05:21:09.640
> 
> 标签：box2d, processing

似乎当我为我的对象设置更大的半径时，我对它们施加的力就不那么有效了。box2d 会计算物体的大小来计算力吗？

这是我创建 circleShape 时的代码：

```
 this._shape = new CircleShape();
    this._shape.setRadius(this._box2d.scalarPixelsToWorld(radius));
    this._fixture = new FixtureDef();
    this._fixture.shape = this.getShape();
    this._fixture.density = 1;
    this._fixture.friction = 0.3f;
    this._fixture.restitution = 0f;
    this._body.createFixture(this._fixture); 
```

半径越大，物体上的力越小。我可以禁用这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:25:50.703

**是**的。Box2d 根据其夹具尺寸和密度动态计算物体的总质量：较大的夹具形状会增加物体的质量，因此其改变速度的阻力会更大；请记住，如果你想模拟真实的物理，这就是它应该如何工作的。

但是，如果您真的希望所有身体无论尺寸和密度都具有相同的质量，您可以尝试：

*   设置与半径圆成比例的密度（半径越大，密度越小），或
*   覆盖你的身体质量`void SetMassData(const b2MassData* data);`

希望能帮助到你。

# css - 无法在 Drupal 中更改已修改主题的 CSS

> ID：15996074
> 
> 赞同：0
> 
> 时间：2013-04-14T05:21:57.120
> 
> 标签：css, drupal, themes

我是 Drupal 的新手。`div`我在homepage.eg中添加了一个带有 custom 的内容

```
<div id="dest_objectives">
OBJECTIVES
</div>

<div id="dest_news_events">
NEWS AND EVENTS
</div>

<div id="dest_founder">
ABOUT FOUNDER
</div> 
```

我正在使用（启用和默认）一个自定义主题`destination-theme`，它是来自`professional-theme`. 现在我编辑了我`css`的路径`sites/all/destination-theme/style.css`，但是当我刷新 url 时，它并没有根据编辑的 css 改变。我在做什么错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:22:56.467

首先，您必须确认您的主题已启用您在路径中提到的主题

```
sites/all/destination-theme 
```

在页面加载后检查您的头部部分之后，您的 css 文件 style.css 是否已加载，如果已加载，那么它应该看起来像

```
@import url("http://www.domain.com/sites/all/themes/destination-theme/style.css?mla8o3"); 
```

除非其他 css 文件或写入它，否则不可能加载 css 文件并且不影响

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:05:24.117

通常，您的主题属于 sites/all/themes/ 而不是“all”目录的根目录。我不知道您的主题是否可以在那里工作，但这不是“正确”的地方

另外，您是否打算将“目的地主题”作为子主题？创建子主题（以及使用子主题的所有优点）比使用主题目录的副本更多：http: [//drupal.org/node/225125](http://drupal.org/node/225125)

其次，Firebug/Inspector 将向您显示作为网络资源的 css 文件是从哪里加载的，无论如何。怎么说呢？

# postgresql - Postgresql - 如何对行进行分组并将某些行转换为列

> ID：15996076
> 
> 赞同：0
> 
> 时间：2013-04-14T05:22:12.920
> 
> 标签：postgresql, rows

我有一个类似于以下的数据库：

```
+------------+-----------+------------+
| student_id |  subject  | test score |
+------------+-----------+------------+
|          3 | math      |         78 |
|          3 | physics   |         66 |
|          3 | english   |         98 |
|          2 | math      |         76 |
|          2 | physics   |         57 |
|          2 | geology   |         87 |
|          2 | english   |         99 |
|          1 | math      |         86 |
|          1 | physics   |         85 |
|          1 | astronomy |         89 |
|          1 | history   |         77 |
+------------+-----------+------------+ 
```

我想对subject_ids进行分组。第二列中的标签将成为列，新行将成为分数。所以它应该看起来像这样：

```
+------------+------+---------+---------+---------+-----------+
| student_id | math | physics | english | geology | astronomy |
| 1          | 86   | 85      |         |         | 89        |
| 2          | 76   | 57      | 99      | 87      |           |
| 3          | 78   | 66      | 98      |         |           |
+------------+------+---------+---------+---------+-----------+ 
```

# javascript - Opera 中的 jQuery 追加

> ID：15996080
> 
> 赞同：1
> 
> 时间：2013-04-14T05:23:44.553
> 
> 标签：javascript, jquery, html, json

我有一个处理 JSON 提要并生成一些 HTML 代码的 jQuery 代码，这些代码附加到我的 wordpress 网站中的特定 div 中。这在除 Opera 之外的所有浏览器中都可以正常工作，它什么也没提供。这是我的代码[http://fiddle.jshell.net/7amama/NErEG/1/](http://fiddle.jshell.net/7amama/NErEG/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:12:58.050

我只是将我的 jQuery 脚本移到了它们的标签中（我的意思是我把将 html 代码附加到`#videos`div 中的代码放在 div 本身的主体中）。我不知道为什么，但它确实工作得很好；任何线索可能是什么原因？

# c# - 我们如何使用 C# 或 Java Script/Jquery 更改地址栏的属性

> ID：15996085
> 
> 赞同：4
> 
> 时间：2013-04-14T05:24:50.523
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我将加密我自己的网页（而不是仅仅依靠 Godaddy 或我的客户选择使用的任何人）。而且我想知道如何更改用户地址栏的属性。Godaddy 在地址栏上放了一个漂亮的绿色栏。我正在使用 C# 和 Java Script/Jquery。但除了用于标题的 favicon.ico 之外，我似乎没有看到任何东西，而不是它下面的地址栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:17:09.317

绿色条是您的浏览器指示比您的更安全的 https (SSL) 证书。这种加密成本更高。

不同的浏览器可能会显示不同的布局和/或颜色，您无法预测或设置它在访问者计算机上的外观。如果您的网站旨在仅在您控制的计算机上运行（例如信息亭或贸易展览或 Intranet 使用），您可以实现您的目标：

*   [全屏模式](https://stackoverflow.com/questions/3900701/onclick-go-full-screen)
*   浏览器扩展
*   嵌入在您的应用程序中的 Web 视图
*   ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:35:16.927

更改外观的唯一方法是为 chrome 或 mozilla 编写扩展程序。你居然要换皮肤，你不能只用js来操作浏览器，你意识到安全的含义吗！？

[http://www.chromeextensions.org/](http://www.chromeextensions.org/)

# ios - 如果 UIInterfaceOrientation 横向值是相同的常数，我应该如何确定如何在横向中定位视图？

> ID：15996087
> 
> 赞同：2
> 
> 时间：2013-04-14T05:25:10.370
> 
> 标签：ios, objective-c, ipad, uiinterfaceorientation

我想呈现一个响应方向变化的视图，但由于各种原因不能使用 iOS 的内置自动旋转。在`viewDidLoad`我使用当前方向来确定视图的初始布局：

```
_originalOrientation = [UIDevice currentDevice].orientation;

// if we were launched flat or unknown, use the status bar orientation as a guide
if (_originalOrientation == UIDeviceOrientationUnknown ||
    _originalOrientation == UIDeviceOrientationFaceDown ||
    _originalOrientation == UIDeviceOrientationFaceUp) {

        _originalOrientation = UIDeviceOrientationFromInterfaceOrientation([UIApplication sharedApplication].statusBarOrientation);
} 
```

正如您从我的评论中看到的那样，我需要处理`[UIDevice currentDevice].orientation`不是可用方向的情况（即设备是平的或处于未知方向）。在这种情况下，我尝试使用`statusBarOrientation`来推断设备的方向（使用`UIViewController`'s`interfaceOrientation`将是获取相同信息的另一种方法）：

```
UIDeviceOrientation UIDeviceOrientationFromInterfaceOrientation(UIInterfaceOrientation interface) {
    // note: because UIInterfaceOrientationLandscapeLeft and UIInterfaceOrientationLandscapeRight have the same value, this conversion can't distinguish them

    if (interface == UIInterfaceOrientationLandscapeLeft) {
        return UIDeviceOrientationLandscapeLeft;

    } else if (interface == UIInterfaceOrientationLandscapeRight) {
        return UIDeviceOrientationLandscapeRight;

    } else if (interface == UIInterfaceOrientationPortraitUpsideDown) {
        return UIDeviceOrientationPortraitUpsideDown;

    } else {
        return UIDeviceOrientationPortrait;
    }
} 
```

但是我的逻辑无法准确辨别这两种景观情况，因为它们被定义`UIApplication.h`为*相同*的常数值：

```
// Note that UIInterfaceOrientationLandscapeLeft is equal to UIDeviceOrientationLandscapeRight (and vice versa).
// This is because rotating the device to the left requires rotating the content to the right.
typedef NS_ENUM(NSInteger, UIInterfaceOrientation) {
    UIInterfaceOrientationPortrait           = UIDeviceOrientationPortrait,
    UIInterfaceOrientationPortraitUpsideDown = UIDeviceOrientationPortraitUpsideDown,
    UIInterfaceOrientationLandscapeLeft      = UIDeviceOrientationLandscapeRight,
    UIInterfaceOrientationLandscapeRight     = UIDeviceOrientationLandscapeLeft
}; 
```

有没有另一种方法可以区分`UIInterfaceOrientationLandscapeLeft`和`UIInterfaceOrientationLandscapeRight`？除了使用状态栏方向之外，我还有更好的方法来执行我的“后备”逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T05:42:33.057

UIDevice 的方向属性是一个枚举，它可以区分左右横向（它们的值分别为 3 和 4），因此您可以检查该值。

```
typedef enum {
   UIDeviceOrientationUnknown,
   UIDeviceOrientationPortrait,
   UIDeviceOrientationPortraitUpsideDown,
   UIDeviceOrientationLandscapeLeft,
   UIDeviceOrientationLandscapeRight,
   UIDeviceOrientationFaceUp,
   UIDeviceOrientationFaceDown
} UIDeviceOrientation; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T14:56:11.637

你写了：

> 但是我的逻辑无法准确辨别这两种情况，因为它们被定义为 UIApplication.h 是相同的常量值

我很确定他们不是！界面和设备方向的值被**交换**。见`UIApplication.h`：

```
typedef NS_ENUM(NSInteger, UIInterfaceOrientation) {
    UIInterfaceOrientationPortrait           = UIDeviceOrientationPortrait,
    UIInterfaceOrientationPortraitUpsideDown = UIDeviceOrientationPortraitUpsideDown,
    UIInterfaceOrientationLandscapeLeft      = UIDeviceOrientationLandscapeRight,
    UIInterfaceOrientationLandscapeRight     = UIDeviceOrientationLandscapeLeft
}; 
```

*界面方向* `UIInterfaceOrientationLandscapeLeft`等于*设备方向* ，`UIDeviceOrientationLandscapeRight`反之亦然。但：

*   `UIInterfaceOrientationLandscapeLeft != UIInterfaceOrientationLandscapeRight`
*   `UIDeviceOrientationLandscapeLeft != UIDeviceOrientationLandscapeRight`

试试这个代码，我认为这将解决问题：

```
UIDeviceOrientation UIDeviceOrientationFromInterfaceOrientation(UIInterfaceOrientation interface) {
    // interface orientation left is device orientation right
    if (interface == UIInterfaceOrientationLandscapeLeft) {
        return UIDeviceOrientationLandscapeRight;

    // interface orientation right is device orientation left
    } else if (interface == UIInterfaceOrientationLandscapeRight) {
        return UIDeviceOrientationLandscapeLeft;

    } else if (interface == UIInterfaceOrientationPortraitUpsideDown) {
        return UIDeviceOrientationPortraitUpsideDown;

    } else {
        return UIDeviceOrientationPortrait;
    }
} 
```

顺便说一句，您还应该考虑为您的函数使用自己的前缀而不是`UI`，否则可能很容易错误地认为这`UIDeviceOrientationFromInterfaceOrientation`是一个 API 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:38:47.383

如果您要显示相机所看到的内容，我会忽略所有方向并向用户显示设备在纵向中看到的内容的预览。他们看到的永远是“正确的”，绝不会意外地颠倒过来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:01:40.330

`gravity`您始终可以使用类的属性来确定设备方向`CMDeviceMotion`。属性返回指向地球中心的归一化矢量（也称为真实重力矢量）。如果您对角度不感兴趣，您可以只测试符号并为您的目的生成常量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T21:20:22.783

这就是我在通行证中的做法

创建一个名为 previousOr 的全局变量。然后在您的第一个 viewController 中使用以下代码来确定状态栏的位置。我把它放在 viewDidAppear

```
if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft) {
    previousOr = [NSString stringWithFormat:@"L"];
}
else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight) {
    previousOr = [NSString stringWithFormat:@"L"];
}
else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait) {
    previousOr = [NSString stringWithFormat:@"P"];
}
else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown) {
    previousOr = [NSString stringWithFormat:@"P"];
} 
```

然后在您随后的 viewControllers 中，您在 ViewDidLoad 方法中有以下内容，这将检测设备是纵向还是横向，或者设备是否是平的，设备在平放之前是什么：

```
if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation)) {
    NSLog(@"landscape");
    [self switchToLandscape];
}
else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation)) {
    NSLog(@"portrait");
    [self switchToPortrait];
}
else {
    if ([previousOr isEqualToString:@"L"]) {
        [self switchToLandscape];
    }
    else  {
        [self switchToPortrait];
    }
} 
```

然后您还可以执行以下操作来重新绘制视图上的元素

```
- (void)switchToLandscape {
    previousOr = [NSString stringWithFormat:@"L"];
    //do stuff like replot centers
}

- (void)switchToPortrait {
    previousOr = [NSString stringWithFormat:@"P"];
    //do stuff like replot centers
} 
```

然后您还可以通过以下方式检测方向的变化：

```
- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft) {
    [self switchToLandscape];
}
else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight) {
    [self switchToLandscape];
}
else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait) {
    [self switchToPortrait];
}
else if ([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown) {
    [self switchToPortrait];
}
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

-(BOOL) shouldAutorotate {
    return YES;
} 
```

笔记; 我同时放入了 shouldAutorotateToInterfaceOrientation 和 shouldAutoRotate 以实现向后兼容性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-17T10:51:13.407

曾经面临同样的问题。这是答案，总是去 UIIntefaceOrientation 检查当前方向是横向还是纵向。

**目标 C：**

```
if([[UIApplication sharedApplication] statusBarOrientation] == UIDeviceOrientationLandscapeLeft || [[UIApplication sharedApplication] statusBarOrientation] == UIDeviceOrientationLandscapeRight)
 {
         //Go Here for landscape
 }
    else if ([[UIApplication sharedApplication] statusBarOrientation] == UIDeviceOrientationPortrait || [[UIApplication sharedApplication] statusBarOrientation] == UIDeviceOrientationPortraitUpsideDown)
 {
        //Go Here for Portrait

 } 
```

**斯威夫特：**

```
let currentOrient : UIInterfaceOrientation = UIApplication.shared.statusBarOrientation
if currentOrient == UIInterfaceOrientation.landscapeLeft || currentOrient == UIInterfaceOrientation.landscapeRight
 {
            //Go Here for landscape
 }
else if currentOrient == UIInterfaceOrientation.portrait || currentOrient == UIInterfaceOrientation.portraitUpsideDown
 {
            //Go Here for Portrait
 } 
```

# ruby-on-rails-3 - Paperclip::Errors::NotIdentifiedByImageMagickError + Heroku

> ID：15996089
> 
> 赞同：0
> 
> 时间：2013-04-14T05:25:19.297
> 
> 标签：ruby-on-rails-3, heroku, imagemagick, paperclip

我目前有一个使用回形针的应用程序，允许用户上传他们的创意。到目前为止，当涉及到用户上传图像文件时，这已经完美无缺。我们已经测试过上传一个 .mov 文件，我得到这个错误：

```
Creative Paperclip::Errors::NotIdentifiedByImageMagickError 
```

奇怪的是，这个错误只在 Heroku 上产生。我可以在本地主机上上传 .mov 文件。

**我当前的宝石设置：**

```
paperclip (3.4.1, 3.4.0)
paperclip-aws (1.6.7, 1.6.6)
paperclip-ffmpeg (0.10.2)
cocaine (0.5.1, 0.4.2) 
```

**事件.rb**

```
has_attached_file :creative, 
                :processors => [:ffmpeg],
                :styles => { 
                  :thumb => [:geometry => "250x150", :format => 'png'], 
                  :custcreative => [:geometry => "275x75", :format => 'png'], 
                  :creativepreview => ["275x195",:png] 
                           },
                :url => "***", 
                :path => "***",
                :s3_domain_url => "***",
                :storage => :s3,
                :s3_credentials => Rails.root.join("config/s3.yml"),
                :bucket => '***',
                :s3_permissions => :public_read,
                :s3_protocol => "http",
                :convert_options => { :all => "-auto-orient" },
                :encode => 'utf8' 
```

花几个小时试图弄清楚为什么这在本地有效但在 Heroku 上抛出错误。

我什至尝试删除 :style 设置，但仍然无效。

TIA

**编辑**

```
 Command :: identify -format '%wx%h,%[exif:orientation]' '/tmp/MidPen20130413-2-1mzetus.mov[0]' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T16:25:06.697

好吧，如果像我们这样的任何其他新手遇到同样的问题，这就是答案。问题在于用于图像裁剪的几何方法。railscasts 中建议的方式假定文件位于本地系统中并且需要更改。

**旧方法：**

```
def avatar_geometry(style = :original)
@geometry ||= {}
@geometry[style] ||= Paperclip::Geometry.from_file(avatar.path(style))
end 
```

**新方法**

```
def avatar_geometry(style = :original)
@geometry ||= {}
avatar_path = (avatar.options[:storage] == :s3) ? avatar.url(style) : avatar.path(style)
@geometry[style] ||= Paperclip::Geometry.from_file(avatar_path)
end 
```

# android - onHandleIntent() 中的位置为空

> ID：15996092
> 
> 赞同：1
> 
> 时间：2013-04-14T05:25:55.573
> 
> 标签：android

我正在使用`IntentService`并通过使用获取设备的位置`LocationManager`。但是当我获得位置时，我的位置始终为空。为什么 ？这是我的代码

```
package com.example.netlogger.Services;

import java.util.ArrayList;
import java.util.Date;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.app.IntentService;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.preference.PreferenceManager;
import android.util.Log;
import android.widget.Toast;

public class LocationLogService extends IntentService {

    SharedPreferences prefs;
    LocationManager lm;
    Location l;
    LocationListener ls = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            l = location;
        }
    };

    public LocationLogService() {
        super("some name");
    }

    @Override
    protected void onHandleIntent(Intent intent) {

        Log.d("TAGG", "HERE");
        prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        lm = (LocationManager) getBaseContext().getSystemService(
                LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ls);
        l = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (l != null) {
            Log.d("TAGG", "NOT NULL");
        }

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.d("", "done");
        lm.removeUpdates(ls);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:29:39.197

检查是否没有最后一个已知位置后初始化`ls`，然后等待它获取位置，有延迟。`onHandledIntent`

当您获得所需的位置时，您应该从位置管理器中删除位置侦听器。

这是我的实用程序类的[要点。](https://gist.github.com/emil2k/5381596)`Locator`

# html - CSS :active 选择器

> ID：15996093
> 
> 赞同：1
> 
> 时间：2013-04-14T05:26:20.770
> 
> 标签：html, css, internet-explorer, css-selectors

我在一个`<img>`元素中有一个`<div>`元素。每当单击时，我希望整个`div`（包括图像）缩小 10%（使用变换） 。`<div>`我已经让它工作了，但是有一个小问题：如果用户单击 div 内的图像，则没有任何反应，而如果用户单击 div 的背景，则`div`它可以工作。

本质上，当单击 MyDiv 的子项时，如何使`:active`选择器也起作用。`.MyDiv:hover:active { /*scaling logic here*/ }`

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T10:46:15.623

## `:active`伪类和`div`元素

首先，我很确定`div`元素一开始就不应该有激活状态。

如果我们通读[Selectors Level 3 W3C Recommendation](http://www.w3.org/TR/css3-selectors)的[*用户操作伪类`:hover`、`:active`和`:focus`*部分](http://www.w3.org/TR/css3-selectors/#the-user-action-pseudo-classes-hover-act)，我们会发现：

> `:active`伪类在用户**激活元素时**应用。例如，在用户按下鼠标按钮并释放它的时间之间。在具有多个鼠标按钮的系统上，`:active`仅适用于主要或主要激活按钮（通常是“左”鼠标按钮）及其任何别名。

现在，如果我们转到[HTML5 W3C Editor's Draft的](http://www.w3.org/html/wg/drafts/html/CR)[*交互式内容*](http://www.w3.org/html/wg/drafts/html/CR/dom.html#interactive-content-0)部分，我们会发现：

> HTML 中的某些元素具有激活行为，这意味着用户可以激活它们。
> 
> 用户代理应该允许用户手动触发具有激活行为的元素，例如使用键盘或语音输入，或者通过鼠标点击。当用户以非单击方式触发具有已定义激活行为的元素时，交互事件的默认操作必须是在元素上运行合成单击激活步骤。

我提到 HTML5 Editor's Draft 而不是 HTML401 Recommendation，因为 HTML401 文档没有详细介绍激活状态或用户交互。然而，它确实提到了对元素等`a`元素的激活，但在定义元素时没有提到任何关于它的`div`内容。

该[`div`元素](http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-div-element) *没有*HTML5 建议中定义的“激活状态”。它没有*Interactive Content*类别（与[element`a`不同](http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element)）并且没有声明可以对其应用活动状态。

* * *

## 一种解决方法

如上所述，`div`元素不应接受`:active`状态。出于这个原因，我将修改 HTML 以使用一个元素。为此，我使用了以下`a`元素：

```
<a href="javascript: void(0)">
    <img />
</a> 
```

现在，仅此一项并不能解决 IE 问题。如果您看到[这个 JSFiddle 示例](http://jsfiddle.net/JamesD/cpctG/)，当单击`img`元素时，`a`容器不会处于活动状态。那么我们能做些什么来解决这个问题呢？除了使用之外`:hover:active`，我还将使用`:hover:focus`：

```
a:hover:active,
a:hover:focus {
    outline: 0; /* Reset the default anchor tag focus style. */
    background: #f00;
} 
```

这在 IE 和所有其他浏览器上为我们提供了类似的功能，如[**JSFiddle 演示**](http://jsfiddle.net/JamesD/cpctG/2/)中所示。

### 两个（可能不受欢迎的）副作用

1.  这种方法的问题是元素将保持其焦点状态，您现在可以通过使用键盘的`tab`键访问元素来实现此效果。每当您将鼠标悬停在处于焦点状态的元素上时，其样式都会发生变化。但是，这不是由我来决定是否是不良副作用。

2.  您的元素现在是一个链接。`href`为了使元素首先获得焦点，该属性是必需的。

### 额外的造型

由于我们现在使用的是`a`元素而不是`div`元素，因此我们需要重置任何将您的元素区分为链接的浏览器默认样式。为此，我们可以简单地：

```
a {
    color: #000; /* Reset the color to black. */
    cursor: default; /* Reset the cursor to default. */
    text-decoration: none; /* Remove the underline. */
}

a img {
    border: none; /* Remove border from image. */
} 
```

[**最终的 JSFiddle 演示**](http://jsfiddle.net/JamesD/cpctG/3/)。

# c# - C# 列表 [] 到数据表

> ID：15996095
> 
> 赞同：-1
> 
> 时间：2013-04-14T05:27:29.890
> 
> 标签：c#, list, datatable

我需要**`List<string>[]`**在 C# 中将类型的列表数组转换为 Datatable。

我发现了许多与**`List<string[]>`**Datatable 转换相关的主题，但没有关于我需要的转换。

伪代码：

```
//Retrieve data from MySQL server 
db.Select(category, productID);
//populate List<string>[] array 
list[0] = db.ListQuery[0];
list[1] = db.ListQuery[1];

//convert list[] to Datatable
..... 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:43:20.077

如果我理解你的问题是正确的，你的意思是这样的吗？

```
string category = "Category";
string productId = "ProductId";
List<string[]> tempList = db.Select(category, productID); //Not necessarily correct (I'm not familiar with MySQL). Do what you need to do to create the List<string[]>
DataTable table = new DataTable();
DataRow row;
table.Columns.Add(category);
table.Columns.Add(productId);
foreach (string[] s in tempList)
{
   row = table.NewRow();
   row[category] = s[0];
   row[productId] = s[1];
   table.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-03T07:13:59.330

```
DataTable dataTable = new DataTable();
            List<MemberInfo> props = typeof(T).GetFields().Select(objField => (MemberInfo)objField).ToList();
            props.AddRange(typeof(T).GetProperties().Select(objField => (MemberInfo)objField));

            if (props.Count > 0)
            {
                Type t;
                bool tIsField = false;
                for (int iCnt = 0; iCnt < props.Count; iCnt++)
                {
                    var prop = props[iCnt];
                    tIsField = prop.MemberType == MemberTypes.Field;
                    dataTable.Columns.Add(prop.Name, tIsField ? ((FieldInfo)prop).FieldType : ((PropertyInfo)prop).PropertyType);
                }
                foreach (T item in data)
                {
                    DataRow dr = dataTable.NewRow();

                    foreach (var field in props)
                    {
                        tIsField = field.MemberType == MemberTypes.Field;
                        object value = tIsField ? ((FieldInfo)field).GetValue(item) : ((PropertyInfo)field).GetValue(item, null);
                        dr[field.Name] = value;
                    }
                    dataTable.Rows.Add(dr);
                }
            }
            return dataTable; 
```

# c++ - getdepth 函数在 MarchingCube 算法中是如何工作的？

> ID：15996097
> 
> 赞同：0
> 
> 时间：2013-04-14T05:27:36.940
> 
> 标签：c++, algorithm, opengl, marching-cubes, image-science

我试图理解 Marching Cube Algorithm，所以我想我已经理解了三角形是如何形成的以及如何在每个网格中计算法线。我可以看到有一种链表结构将每个网格链接到另一个网格。但是当我遇到 GetDepth(t[m]) 单独通过每个三角形（每个网格的那些三角形） (t[0],..,..) 时，它返回节点的深度。

功能，

```
float GetDepth(TRIANGLE t) {

    float z;
    z = t.p[0].z;
    z = t.p[1].z > z? t.p[1].z: z;
    z = t.p[2].z > z? t.p[2].z: z;
    return z;
} 
```

看起来它试图找到最大 z（是真的吗）。我可以看到它比较“>”然后我把它弄丢了。谁能解释一下这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:33:46.893

会不会觉得你很陌生？作为[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)。您发布的代码等效于以下内容：

```
float GetDepth(TRIANGLE t) {

float z;
z = t.p[0].z;
if (t.p[1].z > z) {z = t.p[1].z;} else {z = z;}
if (t.p[2].z > z) {z = t.p[2].z;} else {z = z;}
return z;
} 
```

是的，这确实找到了 p 数组中的最大值 z。

# akka - Akka 和蛋糕图案

> ID：15996098
> 
> 赞同：12
> 
> 时间：2013-04-14T05:28:10.383
> 
> 标签：akka, cake-pattern

我很困惑如何使用蛋糕模式确保我的演员具有适当的依赖关系。我仍然在处理这个问题，我在任何地方都找不到任何例子。我基本上只是在寻找要遵循的教程/资源。

干杯，克里斯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T16:40:15.500

Actors as dependency:

```
trait DBComponent {
   def db: ActorRef // no compile time guarantees

   type K
   type V

   object DBActor {
      case class Put(key: K, value: V)
      case class Get(key: K)
   }

   class DBActor {
      import DBActor._
      val db = scala.collection.mutable.Map.empty[K, V]
      def receive = {
         case Put(k, v) => db.put(k, v)
         case Get(k) => sender ! db.get(k)
      }
   }
}

trait ServiceComponent {
   this: DBComponent =>

   import DBActor._

   // you could be talking to deadLetters for all you know
   def put(k: K, v: V): Unit = db ! Put(k, v)
   def get(k: K): Option[V] = {
      implicit val timeout = Timeout(5 seconds)
      val future = ask(actor, Get(k)).mapTo[Option[V]]
      Await.result(future, timeout.duration)
   }
} 
```

Actors having dependencies (where there is nothing special to it):

```
trait DBComponent {
   def db: DB

   type K
   type V

   trait DB {
      def put(key: K, value: V): Unit
      def get(key: K): Option[V]
   }
}

trait ServiceComponent {
   this: DBComponent =>

   object ServiceActor {
      case class Put(key: K, value: V)
      case class Get(key: K)
   }

   class ServiceActor {
      import ServiceActor._
      def receive = {
         case Put(k, v) => db.put(k, v) // db is in scope
         case Get(k) => sender ! db.get(k)
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-22T18:15:24.477

正如 Owen 所指出的，另外一个问题是使用创建actor`actorOf(Props[MyClass])`不适用于内部类。即：以下将失败：

```
trait MyComponent {
  class MyActor {
    def receive = ...
  }
}

new MyComponent {
  val myActorRef = system.actorOf( Props[MyActor] )
} 
```

根据[http://doc.akka.io/docs/akka/snapshot/scala/actors.html](http://doc.akka.io/docs/akka/snapshot/scala/actors.html)的文档，

> 如果它们没有在顶级对象中声明，则需要将封闭实例的 this 引用作为第一个参数传递

但是，scaladoc Props 方法签名似乎不支持这一点。我发现解决这个问题的唯一方法是使用 Props(actor: Actor) 构造函数，实例化 actor mysql 并将其传递给 Props。

```
val myActorRef = system.actorOf( Props( new MyActor(arg1, arg2) ) ) 
```

有兴趣知道是否有更好的方法..

# jms - Mdb Glasswish Websphere MQ

> ID：15996099
> 
> 赞同：1
> 
> 时间：2013-04-14T05:28:28.153
> 
> 标签：jms, glassfish-3, ibm-mq

我是 MDB 和 EE 的新手。请告诉我我错了。我的应用程序必须与 Websphere MQ 交互（在队列中等待消息，做某事并回复）。我正在使用 NetBeans 7.3、GlassFish 3.1、Websphere MQ 6.2、资源适配器 wmq.jmsra.rar。交互一定不是jms格式的，只有Web MQ性质的。我正在部署适配器并创建连接池和管理对象。在 domain.xml 中

```
 <connector-connection-pool description="" name="cpMqAdapter" resource-adapter-name="wmq.jmsra" connection-definition-name="javax.jms.QueueConnectionFactory" transaction-support="LocalTransaction">
  <property name="port" value="1414"></property>
  <property name="CCSID" value="866"></property>
  <property name="hostName" value="192.168.0.11"></property>
  <property name="queueManager" value="QM"></property>
  <property name="channel" value="SrvConn"></property>
  <property description="CLIENT - mq on other computer" name="transportType" value="CLIENT"></property>
</connector-connection-pool>

<admin-object-resource enabled="false" res-adapter="wmq.jmsra" res-type="javax.jms.Queue" description="" jndi-name="wmqJmsAOR" class-name="com.ibm.mq.connector.outbound.MQQueueProxy">
  <property name="priority" value="APP"></property>
  <property name="failIfQuiesce" value="true"></property>
  <property name="baseQueueManagerName" value="QM"></property>
  <property name="CCSID" value="1208"></property>
  <property name="persistence" value="APP"></property>
  <property name="encoding" value="NATIVE"></property>
  <property name="baseQueueName" value="TEST"></property>
  <property name="targetClient" value="MQ"></property>
  <property name="expiry" value="APP"></property>
</admin-object-resource> 
```

' 在 netbeans 中，我正在创建 EE 项目和消息驱动 bean。我得到了这个代码'

```
 @MessageDriven(mappedName = "wmqJmsAOR", activationConfig = {
   @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto- 
   acknowledge"),
   @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue")

 })
public class NewMessage implements MessageListener {
public NewMessage() {
    super();
    System.out.println("I created");
}

@Override
public void onMessage(Message message) {

    System.out.println("I'm getting message");

}
` 
```

请告诉我为什么这个 MDB 不监听队列（我将测试消息放在 Websphere MQ 控制台中）。可能是我必须在配置中写一些东西（现在项目作为默认的 netbeans 创建）。

阿列克谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T21:58:47.767

我有一个可行的解决方案。这不是最好的解决方案，但它确实工作得非常好。

我们所做的是创建一个非常简单的***ActivationSpecWrapper***类来扩展 IBM ***com.ibm.mq.connector.inbound.ActivationSpecImpl***类。这个包装类有一个公共的 set/get 属性（*asJNDI*）。该类的目的是通过 JNDI 上下文读取应用服务器中定义的 Properties 类，该类包含要在激活 MDB 时分配的所有属性。

首先，创建新的***ActivationSpecWrapper***类。您可以将其放入您选择的任何包装中。

```
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.Properties;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.naming.InitialContext;
import com.ibm.mq.connector.inbound.ActivationSpecImpl;

public class ActivationSpecWrapper extends ActivationSpecImpl
{

   private static final long   serialVersionUID = -529716553593856979L;

   private static final String sourceClass      = ActivationSpecWrapper.class.getName();
   private static final Logger log              = Logger.getLogger(sourceClass);

   private String              asJNDI           = null;

   public void setAsJNDI(String asJNDI)
   {
      log.config("asJNDI = " + asJNDI);
      this.asJNDI = asJNDI;

      try
      {
         final InitialContext ctx = new InitialContext();
         final Properties properties = (Properties) ctx.lookup(asJNDI);

         for (final Object key : properties.keySet())
         {
            try
            {
               final String value = properties.getProperty((String) key);
               final Object field = getSetter((String) key);
               if (field != null)
               {
                  if (field instanceof Field)
                  {
                     log.fine("Setting " + key + " via Field " + (String) key + " = " + value);
                     ((Field) field).set(this, value);

                  }
                  else
                  {
                     log.fine("Setting " + key + " via Method " + (String) key + " = " + value);
                     ((Method) field).invoke(this, value);
                  }
                  log.config(key + " = " + value);
               }
               else
               {
                  log.warning("Invalid ActivationSpec Field: " + key);
               }
            }
            catch (final NoSuchFieldException e)
            {
               log.throwing(sourceClass, "setAsJNDI", e);
            }

         }

      }
      catch (final Exception e)
      {
         log.log(Level.SEVERE, "Error looking up " + asJNDI, e);
         return;
      }

   }

   public String getAsJNDI()
   {
      return asJNDI;
   }

   private static Object getField(String fieldName) throws NoSuchFieldException
   {
      return ActivationSpecWrapper.class.getField(fieldName);
   }

   private static Object getSetter(String fieldName) throws NoSuchFieldException
   {
      try
      {
         final StringBuilder sb = new StringBuilder(fieldName.length() + 3).append("set").append(fieldName);
         sb.setCharAt(3, Character.toUpperCase(sb.charAt(3)));

         return ActivationSpecWrapper.class.getMethod(sb.toString(), String.class);
      }
      catch (final NoSuchMethodException e)
      {
         return getField(fieldName);
      }
   }
} 
```

要实现该类，您只需修改**wmq.jmsra.rar文件中的****META-INF/ra.xml**文件。将 ActivationSpecImpl 类的一次出现更改为您的类。这将是它使用的新传入连接工厂的***ActivationSpecWrapper***类。因此，现在您的包装类可以查看应用服务器以获取要使用的属性。

 ***我这样做如下：

```
: jar -xvf wmq.jmsra.rar META-INF/ra.xml
: perl -pi -e 's/com\.ibm\.mq\.connector\.inbound\.ActivationSpecImpl/your.new.package.ActivatonSpecWrapper/g' META-INF/ra.xml
: jar -uvf wmq.jmsra.rar META-INF/ra.xml 
```

在修改**META-INF/ra.xml**之前看起来像：

```
<activationspec>
   <activationspec-class>
      com.ibm.mq.connector.inbound.ActivationSpecImpl
   </activationspec-class>
   <required-config-property>
      <config-property-name>destination</config-property-name>
   </required-config-property>
   <required-config-property>
      <config-property-name>destinationType</config-property-name>
   </required-config-property>
</activationspec> 
```

更改后，**META-INF/ra.xml**应如下所示：

```
<activationspec>
   <activationspec-class>
      your.new.package.ActivatonSpecWrapper
   </activationspec-class>
   <required-config-property>
      <config-property-name>destination</config-property-name>
   </required-config-property>
   <required-config-property>
      <config-property-name>destinationType</config-property-name>
   </required-config-property>
</activationspec> 
```

现在您需要将新包添加到 RAR 文件中。它应该在标准目录结构中。像这样：

```
: jar -uvf wmq.jmsra.rar your/new/package/ActivationSpecWrapper.class 
```

问题源于 IBM 将主机/端口/队列管理器/通道（等）放入激活规范而不是管理对象。它属于管理对象，因为它是 MDB 队列的连接工厂。IBM 在那里只允许两个属性。

此外，如果您使用 glassfish，oracle 确实为需要资源适配器的 MDB 类搞砸了，因为 glassfish ***@MessageDriven***注释假定 JMS 的应用程序容器默认资源适配器 ( *OpenMQ* )。这意味着供应商特定的***ActivationSpecImpl***不起作用，因此在通过**glassfish-ejb-jar.xml**切换资源适配器之后，IMB 的主机/端口和其他激活配置属性的自定义参数不通过注释得到支持。

JBoss 允许***@ResourceAdapter***注释更改资源适配器，但 Glassfish 仅允许通过**glassfish-ejb-jar.xml**文件进行此操作。当使用它时，您只需要使用三个激活配置属性（*destinationType*）来注释您的 MDB。您将在 JNDI 发布的属性中放置的所有其他内容。

**glassfish-ejb-jar.xml**应该如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<glassfish-ejb-jar>

    <enterprise-beans >
        <unique-id>1</unique-id>
        <ejb>
            <ejb-name>MyMDB</ejb-name>
            <mdb-resource-adapter>
                <resource-adapter-mid>wmq.jmsra</resource-adapter-mid>
                <activation-config>
                    <activation-config-property>
                        <activation-config-property-name>asJNDI</activation-config-property-name>
                        <activation-config-property-value>mq/InboundMessages</activation-config-property-value>
                    </activation-config-property>
                </activation-config>
            </mdb-resource-adapter>
        </ejb>
    </enterprise-beans> 
</glassfish-ejb-jar> 
```

MDB ***@MessageDriven***注释将如下所示：

```
@MessageDriven(activationConfig =
   {
    @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
    @ActivationConfigProperty(propertyName = "destination", propertyValue = "jms/InboundMessage_queue"),
    @ActivationConfigProperty(propertyName = "useJNDI", propertyValue = "true") })
public class MyMDB implement MessageListener
{
    public void onMessage(Message message)
    {
        // message handler code goes here...
    }
} 
```

完成这项工作的最后一步是将*mq/InboundMessages*属性添加到 JDNI，以定义 MQ 侦听器资源的工厂属性。这就是它在**domain.xml**文件中的定义方式：

```
<custom-resource res-type="java.util.Properties" jndi-name="mq/InboundMessages" factory-class="org.glassfish.resources.custom.factory.PropertiesFactory">
  <property name="hostName" value="mqserver"></property>
  <property name="port" value="1422"></property>
  <property name="queueManager" value="MQMNGR"></property>
  <property name="channel" value="MQMNGR.SM.S1"></property>
  <property name="transportType" value="CLIENT"></property>
</custom-resource> 
```

我希望这有帮助。这不是最简单的解决方案，但它足够简单，而且一旦建立，它就非常便携，并且允许应用服务器管理员管理与 MQ 的连接详细信息，而不是开发人员。***

# android - 如何使 onchildclick 真正可点击进入可扩展的列表视图

> ID：15996100
> 
> 赞同：0
> 
> 时间：2013-04-14T05:28:29.350
> 
> 标签：android, expandablelistview, children, clickable

我有两个类：一个是适配器，第二个是我的活动。在我找到一些用于打开不同类的代码后，如果我单击不同的项目，我的应用程序就会停止并且这些项目甚至不可点击。当我单击一个项目时，它没有突出显示，并且应用程序停止。

所以这是我的适配器

```
@SuppressWarnings("unchecked")
public class NewAdapter extends BaseExpandableListAdapter {

    public ArrayList<String> groupItem, tempChild;
    public ArrayList<Object> Childtem = new ArrayList<Object>();
    public LayoutInflater minflater;
    public Activity activity;

    public NewAdapter(ArrayList<String> grList, ArrayList<Object> childItem) {
        groupItem = grList;
        this.Childtem = childItem;
    }

    public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        tempChild = (ArrayList<String>) Childtem.get(groupPosition);
        TextView text = null;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.childrow, null);
        }
        text = (TextView) convertView.findViewById(R.id.textView1);
        text.setText(tempChild.get(childPosition));
        /*convertView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(activity, tempChild.get(childPosition),
                        Toast.LENGTH_SHORT).show();
            }
        });*/
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return ((ArrayList<String>) Childtem.get(groupPosition)).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return null;
    }

    @Override
    public int getGroupCount() {
        return groupItem.size();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
        super.onGroupCollapsed(groupPosition);
    }

    @Override
    public void onGroupExpanded(int groupPosition) {
        super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.grouprow, null);
        }
        ((CheckedTextView) convertView).setText(groupItem.get(groupPosition));
        //((CheckedTextView) convertView).setChecked(isExpanded);
        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }
} 
```

我的活动 - 我只想让前两个工作，我有更多的父母和孩子，但如果这些工作我会为其余的做同样的事情。

```
public class Mecanica  extends ExpandableListActivity implements OnChildClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ExpandableListView expandbleLis = getExpandableListView();
        expandbleLis.setDividerHeight(2);
        expandbleLis.setGroupIndicator(null);
        expandbleLis.setClickable(true);

        setGroupData();
        setChildGroupData();

        NewAdapter mNewAdapter = new NewAdapter(groupItem, childItem);
        mNewAdapter.setInflater((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE), this);
        getExpandableListView().setAdapter(mNewAdapter);
        expandbleLis.setOnChildClickListener(this);
    }
    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        // Create a switch that switches on the specific child position.
        switch(childPosition) {
        case 0:
            // Go to child #0 specific class.
            Intent child0Intent = new Intent(this, Mecanica1.class);
            startActivity(child0Intent);
            break;
        case 1:
            // Go to child #1 specific class.
            Intent child1Intent = new Intent(this, Mecanica2.class);
            startActivity(child1Intent);
            break;
        case 2:
            // Go to child #1 specific class.
            Intent child2Intent = new Intent(this, Mecanica3.class);
            startActivity(child2Intent);
            break;
        case 3:
            // Go to child #1 specific class.
            Intent child3Intent = new Intent(this, Mecanica4.class);
            startActivity(child3Intent);
            break;
        case 4:
            // Go to child #1 specific class.
            Intent child4Intent = new Intent(this, Mecanica5.class);
            startActivity(child4Intent);
            break;
        case 5:
            // Go to child #1 specific class.
            Intent child5Intent = new Intent(this, Mecanica6.class);
            startActivity(child5Intent);
            break;
        case 6:
            // Go to child #1 specific class.
            Intent child6Intent = new Intent(this, Mecanica7.class);
            startActivity(child6Intent);
            break;
        case 7:
            // Go to child #1 specific class.
            Intent child7Intent = new Intent(this, Mecanica8.class);
            startActivity(child7Intent);
            break;

        }
        return false;   
}

    public void setGroupData() {
        groupItem.add("Directia");
        groupItem.add("Franarea");
       // groupItem.add("Motorul");
        //groupItem.add("Rotile");
        //groupItem.add("Siguranta si control");
        //groupItem.add("Suspensia");
        //groupItem.add("Transmisia");
    }

    ArrayList<String> groupItem = new ArrayList<String>();
    ArrayList<Object> childItem = new ArrayList<Object>();

    public void setChildGroupData() {
        /**
         * Add Data For TecthNology
         */
        ArrayList<String> child = new ArrayList<String>();
        child.add("Java");
        child.add("Drupal");
       child.add(".Net Framework");
        child.add("PHP");
        childItem.add(child);

        /**
         * Add Data For Mobile
         */
     child = new ArrayList<String>();
       child.add("Android");
       child.add("Window Mobile");
       child.add("iPHone");
        child.add("Blackberry");
        childItem.add(child);
//        /**
//         * Add Data For Manufacture
//         */
//        child = new ArrayList<String>();
//        child.add("HTC");
//        child.add("Apple");
//        child.add("Samsung");
//        child.add("Nokia");
//        childItem.add(child);
//        /**
//         * Add Data For Extras
//         */
//        child = new ArrayList<String>();
//        child.add("Contact Us");
//        child.add("About Us");
//        child.add("Location");
//        child.add("Root Cause");
//        childItem.add(child);
    }    
} 
```

和日志猫

```
04-13 19:44:54.753: E/AndroidRuntime(1724): FATAL EXCEPTION: main
04-13 19:44:54.753: E/AndroidRuntime(1724): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
04-13 19:44:54.753: E/AndroidRuntime(1724):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at java.util.ArrayList.get(ArrayList.java:304)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at com.example.vreaucarnet.NewAdapter.getChildrenCount(NewAdapter.java:65)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.widget.ExpandableListConnector.refreshExpGroupMetadataList(ExpandableListConnector.java:563)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.widget.ExpandableListConnector.expandGroup(ExpandableListConnector.java:688)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.widget.ExpandableListView.handleItemClick(ExpandableListView.java:562)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.widget.ExpandableListView.performItemClick(ExpandableListView.java:522)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.os.Handler.handleCallback(Handler.java:725)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.os.Looper.loop(Looper.java:137)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-13 19:44:54.753: E/AndroidRuntime(1724):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:38:35.067

```
 Mecanica.java

    package com.example.expademo;

    import java.util.ArrayList;

    import android.os.Bundle;
    import android.app.Activity;
    import android.app.ExpandableListActivity;
    import android.content.Context;
    import android.content.Intent;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.View;
    import android.widget.ExpandableListView;
    import android.widget.ExpandableListView.OnChildClickListener;
    import android.widget.ListView;

    public class Mecanica extends ExpandableListActivity implements
            OnChildClickListener {
        ArrayList<String> groupItem = new ArrayList<String>();
        ArrayList<Object> childItem = new ArrayList<Object>();

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_main);

            ExpandableListView expandbleLis = getExpandableListView();
            expandbleLis.setDividerHeight(2);
            expandbleLis.setGroupIndicator(null);
            expandbleLis.setClickable(true);

            setGroupData();
            setChildGroupData();

            NewAdapter mNewAdapter = new NewAdapter(groupItem, childItem);
            mNewAdapter
                    .setInflater(
                            (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE),
                            this);
            getExpandableListView().setAdapter(mNewAdapter);
            expandbleLis.setOnChildClickListener(this);
        }

        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            // Create a switch that switches on the specific child position.
            switch (childPosition) {
            case 0:
                // Go to child #0 specific class.
                Intent child0Intent = new Intent(this, MainActivity.class);
                startActivity(child0Intent);
                break;
            case 1:
                // Go to child #1 specific class.
                Intent child1Intent = new Intent(this, MainActivity.class);
                startActivity(child1Intent);
                break;
            case 2:
                // Go to child #1 specific class.
                Intent child2Intent = new Intent(this, MainActivity.class);
                startActivity(child2Intent);
                break;
            case 3:
                // Go to child #1 specific class.
                Intent child3Intent = new Intent(this, MainActivity.class);
                startActivity(child3Intent);
                break;
            case 4:
                // Go to child #1 specific class.
                Intent child4Intent = new Intent(this, MainActivity.class);
                startActivity(child4Intent);
                break;
            case 5:
                // Go to child #1 specific class.
                Intent child5Intent = new Intent(this, MainActivity.class);
                startActivity(child5Intent);
                break;
            case 6:
                // Go to child #1 specific class.
                Intent child6Intent = new Intent(this, MainActivity.class);
                startActivity(child6Intent);
                break;
            case 7:
                // Go to child #1 specific class.
                Intent child7Intent = new Intent(this, MainActivity.class);
                startActivity(child7Intent);
                break;

            }
            return false;
        }

        public void setGroupData() {
            groupItem.add("Directia");
            groupItem.add("Franarea");
            groupItem.add("Motorul");
            groupItem.add("Rotile");
            groupItem.add("Siguranta si control");
            groupItem.add("Suspensia");
            groupItem.add("Transmisia");
        }

        public void setChildGroupData() {
            /**
             * Add Data For TecthNology
             */
            ArrayList<String> child = new ArrayList<String>();
            child.add("Java");
            child.add("Drupal");
            child.add(".Net Framework");
            child.add("PHP");
            childItem.add(child);

            /**
             * Add Data For Mobile
             */
            child = new ArrayList<String>();
            child.add("Android");
            child.add("Window Mobile");
            child.add("iPHone");
            child.add("Blackberry");
            childItem.add(child);
            // /**
            // * Add Data For Manufacture
            // */
            child = new ArrayList<String>();
            child.add("HTC");
            child.add("Apple");
            child.add("Samsung");
            child.add("Nokia");
            childItem.add(child);
            // /**
            // * Add Data For Extras
            // */
            child = new ArrayList<String>();
            child.add("Contact Us");
            child.add("About Us");
            child.add("Location");
            child.add("Root Cause");
            childItem.add(child);

            // /**
            // * Add Data For Extras
            // */
            child = new ArrayList<String>();
            child.add("Contact Us");
            child.add("About Us");
            child.add("Location");
            child.add("Root Cause");
            childItem.add(child);
            // /**
            // * Add Data For Extras
            // */
            child = new ArrayList<String>();
            child.add("Contact Us");
            child.add("About Us");
            child.add("Location");
            child.add("Root Cause");
            childItem.add(child);
            // /**
            // * Add Data For Extras
            // */
            child = new ArrayList<String>();
            child.add("Contact Us");
            child.add("About Us");
            child.add("Location");
            child.add("Root Cause");
            childItem.add(child);
        }
    }

    NewAdapter.java

    package com.example.expademo;

    import java.util.ArrayList;

    import android.app.Activity;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.BaseExpandableListAdapter;
    import android.widget.CheckedTextView;
    import android.widget.TextView;

    @SuppressWarnings("unchecked")
    public class NewAdapter extends BaseExpandableListAdapter {

        public ArrayList<String> groupItem, tempChild;
        public ArrayList<Object> Childtem = new ArrayList<Object>();
        public LayoutInflater minflater;
        public Activity activity;

        public NewAdapter(ArrayList<String> grList, ArrayList<Object> childItem) {
            groupItem = grList;
            this.Childtem = childItem;
        }

        public void setInflater(LayoutInflater mInflater, Activity act) {
            this.minflater = mInflater;
            activity = act;
        }

        @Override
        public Object getChild(int groupPosition, int childPosition) {
            return null;
        }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
            return 0;
        }

        @Override
        public View getChildView(int groupPosition, final int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {
            tempChild = (ArrayList<String>) Childtem.get(groupPosition);
            TextView text = null;
            if (convertView == null) {
                convertView = minflater.inflate(R.layout.childrow, null);
            }
            text = (TextView) convertView.findViewById(R.id.textView1);
            text.setText(tempChild.get(childPosition));
            /*
             * convertView.setOnClickListener(new OnClickListener() {
             * 
             * @Override public void onClick(View v) { Toast.makeText(activity,
             * tempChild.get(childPosition), Toast.LENGTH_SHORT).show(); } });
             */
            return convertView;
        }

        @Override
        public int getChildrenCount(int groupPosition) {
            return ((ArrayList<String>) Childtem.get(groupPosition)).size();
        }

        @Override
        public Object getGroup(int groupPosition) {
            return null;
        }

        @Override
        public int getGroupCount() {
            return groupItem.size();
        }

        @Override
        public void onGroupCollapsed(int groupPosition) {
            super.onGroupCollapsed(groupPosition);
        }

        @Override
        public void onGroupExpanded(int groupPosition) {
            super.onGroupExpanded(groupPosition);
        }

        @Override
        public long getGroupId(int groupPosition) {
            return 0;
        }

        @Override
        public View getGroupView(int groupPosition, boolean isExpanded,
                View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = minflater.inflate(R.layout.grouprow, null);
            }
            TextView text = (TextView) convertView.findViewById(R.id.textView);
            text.setText(groupItem.get(groupPosition));
            // ((CheckedTextView) convertView).setChecked(isExpanded);
            return convertView;
        }

        @Override
        public boolean hasStableIds() {
            return false;
        }

        @Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }
    }

    grouprow.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

activity_main.xml

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ExpandableListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ExpandableListView>

</LinearLayout> 
```

# java - 如何通过 httpUnit 将文本输入到输入中

> ID：15996104
> 
> 赞同：1
> 
> 时间：2013-04-14T05:29:15.737
> 
> 标签：java, jsp, junit, http-unit

我有一个类分配来测试使用 httpUnit 一个涉及将文本输入到文本框中的用例，即使它没有包含在表单标记中。如果没有表格可以查看，我如何发送文本或设置值？GetElementWithId 不允许您执行其中任何一项。除了编写测试之外，我还可以对我想要的代码进行任何更改。

这是用于呈现html的jsp代码：

```
<script type="text/javascript">
 $(function(){

    $("#searchBox").keyup(function(){
        $("#userSearch").attr("src","patientSearch.jsp?forward=<%=StringEscapeUtils.escapeHtml("" + (request.getParameter("forward") ))%>&q="+$("#searchBox").val()+"&allowDeactivated="+$("#allowDeactivated:checked").val())
    });
    $("#oldSearch").hide(); 

 });
</script>
<h2> Select a Patient</h2>
<b>Search by name or MID:</b><br/>
<div style="border: 1px solid Gray; padding:5px;float:left;">
    <input id="searchBox" name="searchBox" style="width: 250px;" type="text" value="<%= StringEscapeUtils.escapeHtml("" + ( firstName )) %>" />
    <br />
    <input id="allowDeactivated" type="checkbox" />
    Show deactivated patients
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:45:57.613

这是我用来让它工作的黑客......

```
WebForm form = curPage.getForms()[0];
form.getScriptableObject().setParameterValue("UID_PATIENTID", "1");
Button btn = form.getButtons()[1];
btn.click();
curPage = wc.getCurrentPage(); 
```

我正在更改的表单是隐藏的，因此不是真正的“用户”会做什么，但它可以让我的测试通过。如果有人知道我如何以更好的方式做到这一点，我真的很想知道。

# sql - VB LINQ to SQL 作为变量

> ID：15996107
> 
> 赞同：0
> 
> 时间：2013-04-14T05:29:51.577
> 
> 标签：sql, vb.net, linq, variables, datacontext

我到处搜索，找不到答案。每个示例要么有一个数据网格视图，要么在 Select 处停止。我需要将 DataContext 结果作为变量存储在 VB 中。在前面的代码中，我使用客户姓名的下拉列表填充 ComobBox。然后，当用户从组合框列表中选择客户名称时，我想：

```
Private Sub ComboBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged

Dim dbmanex As New Manex_LINQDataContext
Dim dbPhone = From c In dbmanex.CUSTOMERs
Where c.CUSTNAME = Me.ComboBox1.Text
Select c.PHONE
Me.PhoneTextBox.Text = dbPhone
End Sub 
```

PhoneTextBox.Text 只是空白。任何见解将不胜感激。

由 Kirill Bestemyanov 解决：

```
Private Sub ComboBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged

Dim dbmanex As New Manex_LINQDataContext
Dim dbPhone = From c In dbmanex.CUSTOMERs
Select c.PHONE
Me.PhoneTextBox.Text = dbPhone.Single()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:49:28.393

您应该具体化您的查询。

```
Me.PhoneTextBox.Text=dbPhone.Single(); 
```

当您调用 Single() 您的查询将调用 db 并从中获取值。

# c# - 具有多个元素的返回列表

> ID：15996111
> 
> 赞同：1
> 
> 时间：2013-04-14T05:30:46.790
> 
> 标签：c#, list, return-value

我正在努力返回一个包含多个元素的列表（PHP 背景 - 我会在 PHP 中为此使用数组）。

我有一个在 WHILE 循环中解析的大字符串。我想返回一个包含成对元素的列表。我试过这样的事情：

```
static public List<string> getdata(string bigfile)
{
var data = new List<string>[] { new List<string>(), new List<string>() };  // create list to hold data pairs

While (some stuff)
{
   // add element pair to List<data>
   data[0].Add(this);  // add element to list - 'this' is declared and assigned (not shown)    
   data[1].Add(that);  // add element to list - 'that' is declared and assigned (not shown)

}

return data???;  // <<-- This is where I'm failing. I can, of course, return just one of the elements, like return data[0];, but I can't seem to get both elements (data[0] and data[1]) together.

}  // end getdata 
```

我已经查看了一些答案，但我遗漏了一些东西。对于返回值，我在语法上尝试了几件事，但没有运气。任何帮助将不胜感激。我讨厌问问题，但我已经花了一些时间在这上面，我只是没有找到我想要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:35:02.913

将方法声明更改为：

```
static public List<string>[] getdata(string bigfile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:35:16.247

尝试

```
static public List<string>[] getdata(string bigfile)
{
   ....
} 
```

或者

但是，如果您需要返回字符串数组列表，则将方法更改为

```
static public List<string[]> getdata(string bigfile)
{
    List<string[]> data= new List<string[]>();

    While (some stuff)
    {
       data.Add(this);    
       data.Add(that); 

    }

    return data;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T05:43:02.193

问题是您正在返回 List 的集合，因此返回类型不匹配。试试这个，

```
 var data = new List<string>();

            while (some stuff)
            {

                data.Add("test0");
                data.Add("test1");
            }
            return data; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T05:44:07.717

> 我想返回一个包含**成对**元素的列表

如果你想要对，使用对：

```
static public List<Tuple<string, string>> getdata(string bigfile)
{
    var data = new List<Tuple<string, string>>(); // create list to hold data pairs

    while (some stuff)
    {
        // add element pair
        data.Add(Tuple.Create(a, b)); // 'a' is declared and assigned (not shown)    
                                      // 'b' is declared and assigned (not shown)
    }

    return data;
} 
```

# qtp - 修改对象存储库中的序号标识符值 - QTP

> ID：15996115
> 
> 赞同：3
> 
> 时间：2013-04-14T05:32:20.563
> 
> 标签：qtp, ordinal

我用 html 创建了一个简单的表单，它有两个对象（编辑框 - 名字），具有相同的属性（如名称、输入和其他），一个在另一个之下。我在其中一个编辑框中记录了一个动作，并将对象添加到本地对象存储库中，索引为“0”（因为它在源代码中的顺序）。

然后我将 Index 的值修改为“1”，这样同一个对象将引用具有相同属性的第二个编辑框，但它不会在 QTP 中发生。

添加序号标识符后，尽管我们在对象存储库中对其进行了修改，但它确实在存储库中得到了更新，我们可以查看相同的内容。但是在修改时它的行为并不像它那样，即在这种情况下，当我们运行脚本时，它应该引用第二个“名字编辑框”，但它并没有发生，为什么？

简要介绍一下我的问题，在对象存储库中修改后的序号标识符并没有真正更新，即使它显示为已更新，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:27:37.837

There is a web specific optimization in QTP which you seem to have run into. In addition to the regular description QTP stores the [`sourceIndex`](http://msdn.microsoft.com/en-us/library/ie/ms534635.aspx) as a hidden property. Then when trying to identify the object it will first check if the HTML object with the stored `sourceIndex` matches the description, if it does it assumes that it's the correct object and doesn't search the whole DOM.

Since the ordinal (index in this case) is a special property that is used for identification only if multiple objects match, the `sourceIndex` optimization circumvents usage of the index.

In later versions of QTP (from 11 I think) QTP also stores a generated XPath to the object which has similar functionality. You can disable these optimizations in **Tools → Options → Web → Advanced**

![screen shot of options](https://i.stack.imgur.com/F5lYV.png)

# c++ - 如何根据内部代码更改返回类型？（字符串到数字的转换）

> ID：15996116
> 
> 赞同：0
> 
> 时间：2013-04-14T05:32:40.277
> 
> 标签：c++, string, int, return

例如，我有这个从字符串转换为数字的代码：

```
#include <sstream>

template <typename T>
T string_to_num( const string &Text, T defValue = T() )
{
    stringstream ss;
    for ( string::const_iterator i=Text.begin(); i!=Text.end(); ++i )
        if ( isdigit(*i) || *i=='e' || *i=='-' || *i=='+' || *i=='.' )
            ss << *i;
    T result;
    return ss >> result ? result : defValue;
} 
```

问题是它需要两个参数，第二个参数为它提供了关于我返回什么类型的数字（int 或 float 等）的线索。

如果字符串包含小数点“。”，我该如何做到这一点？它返回十进制数据类型（例如float），否则返回整个数据类型（例如int）？

除非有人有更好的代码，否则他们可以共享来执行此操作..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:05:14.200

问题是你为什么需要这个。我认为您想要它，只是为了在调用之前摆脱指示类型`string_to_num`：

```
????? number = string_to_num<double>("123.21");
^^^^^
do_something(number); 
```

但是，您已经通过`<double>`. 一个简单的语法糖，`auto`就是你想要的。*（这是编译时间）*

否则，您需要一个*变体*`string_to_num`类型，它与您的定义相去甚远。它有很多开销。

您的代码已经可以了，并且输出基于`T`. 所以，在真正的程序中你没有问题。

# tcp - 为什么我的 TCP 连接似乎在服务器端丢失数据包？

> ID：15996120
> 
> 赞同：0
> 
> 时间：2013-04-14T05:34:22.613
> 
> 标签：tcp, package, socketasynceventargs

我现在正在写一个基于 SocketAsyncEventArgs 的小框架，这个类是基于 IOCP 创建的，比 APM 模式效率高得多。但是在这里，我在运行测试时遇到了一些问题。这是服务器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.Windows.Forms;

namespace SocketServer
{
public class Server
{
    Socket serverSocket;
    SocketAsyncEventArgs socketAsyncEventArgs;
    SocketAsyncEventArgsPool readWritePool;
    HandleMessage handleMessage;
    BufferManager buffeManager;

    const int PrefixSize = 11;

    public void Init(int port,int connections,int receiveBufferSize)
    {
        buffeManager = new BufferManager(receiveBufferSize * connections * 2, receiveBufferSize);

        buffeManager.InitBuffer();

        readWritePool = new SocketAsyncEventArgsPool(connections);

        SocketAsyncEventArgs socketAsyncEventArgsPooling;
        for (int i = 0; i < connections; i++)
        {
            socketAsyncEventArgsPooling = new SocketAsyncEventArgs();
            socketAsyncEventArgsPooling.Completed += readEventArgsIO_Completed;

            buffeManager.SetBuffer(socketAsyncEventArgsPooling);
            readWritePool.Push(socketAsyncEventArgsPooling);
        }

        handleMessage = new HandleMessage();

        IPAddress[] addressList = Dns.GetHostEntry(Environment.MachineName).AddressList;
        IPEndPoint localEndPoint = new IPEndPoint(addressList[addressList.Length - 1], port);

        this.serverSocket = new Socket(localEndPoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

        if (localEndPoint.AddressFamily == AddressFamily.InterNetworkV6)
        {
            this.serverSocket.SetSocketOption(SocketOptionLevel.IPv6, (SocketOptionName)27, false);
            this.serverSocket.Bind(new IPEndPoint(IPAddress.IPv6Any, localEndPoint.Port));
        }
        else
        {
            this.serverSocket.Bind(localEndPoint);
        }

        this.serverSocket.Listen(100);

        StartAccept(null);
    }

    private void StartAccept(SocketAsyncEventArgs acceptSocketAsyncEventArgs)
    {
        if (acceptSocketAsyncEventArgs == null)
        {
            acceptSocketAsyncEventArgs = new SocketAsyncEventArgs();
            acceptSocketAsyncEventArgs.Completed += socketAsyncEventArgs_Completed;
        }
        else
        {
            acceptSocketAsyncEventArgs.AcceptSocket = null;
        }

        Boolean willRaiseEvent = this.serverSocket.AcceptAsync(acceptSocketAsyncEventArgs);
        if (!willRaiseEvent)
        {
            this.ProcessAccept(acceptSocketAsyncEventArgs);
        }
    }

    private void socketAsyncEventArgs_Completed(object sender, SocketAsyncEventArgs e)
    {
        ProcessAccept(e);
    }

    private void readEventArgsIO_Completed(object sender, SocketAsyncEventArgs e)
    {
        switch (e.LastOperation)
        {
            case SocketAsyncOperation.Receive:
                this.ProcessReceive(e);
                break;
            case SocketAsyncOperation.Send:
                //this.ProcessSend(e);
                break;
            default:
                throw new ArgumentException("The last operation completed on the socket was not a receive or send");
        }
    }

    private void ProcessAccept(SocketAsyncEventArgs e)
    {

        SocketAsyncEventArgs readEventArgs = this.readWritePool.Pop();
        //SocketAsyncEventArgs readEventArgs = new SocketAsyncEventArgs();
        readEventArgs.UserToken = e.AcceptSocket;

        Console.WriteLine("---------------------------------------------------");
        Console.WriteLine("Client Connected {0}",e.AcceptSocket.RemoteEndPoint);

        Boolean willRaiseEvent = e.AcceptSocket.ReceiveAsync(readEventArgs);

        if (!willRaiseEvent)
        {
            this.ProcessReceive(readEventArgs);
        }

        this.StartAccept(e);
    }

    private void ProcessReceive(SocketAsyncEventArgs e)
    {
        if (e.BytesTransferred > 0)
        {
            if (e.SocketError == SocketError.Success)
            {
                Console.WriteLine("receiving data, {0} bytes", e.BytesTransferred);
                Socket socket = e.UserToken as Socket;

                int bytesTransferred = e.BytesTransferred;

                string received = Encoding.ASCII.GetString(e.Buffer, e.Offset, bytesTransferred);

                Console.WriteLine("Received:{0}", received);

                string[] msgArray = handleMessage.GetActualString(received);

                foreach (var msg in msgArray)
                {
                    Console.WriteLine("After Split:{0}", msg);
                }

               // Array.Clear(e.Buffer, e.Offset, bytesTransferred);

                Boolean willRaiseEvent = socket.SendAsync(e);
                if (!willRaiseEvent)
                {
                    this.ProcessSend(e);
                }

                readWritePool.Push(e);
            }
        }

    }

    private void ProcessSend(SocketAsyncEventArgs e)
    {

    }
}
} 
```

这是我的客户代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;

namespace SocketClient
{
class Program
{
    static void Main(string[] args)
    {
        Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Parse("192.168.2.129"), 1234);

        SocketAsyncEventArgs connectArgs = new SocketAsyncEventArgs();

        connectArgs.RemoteEndPoint = ipEndPoint;
        connectArgs.Completed += OnConnected;

        socket.ConnectAsync(connectArgs);

        socket.SendBufferSize = Int16.MaxValue;

        //NetworkStream streamToServer = new NetworkStream(socket);
        string text = "[length=12]Hello server";
        byte[] sendBuffer = Encoding.ASCII.GetBytes(text);

        for (int i = 0; i < 5; i++)
        {
            SocketAsyncEventArgs sendArgs = new SocketAsyncEventArgs();

            sendArgs.UserToken = socket;
            sendArgs.SetBuffer(sendBuffer,0,sendBuffer.Length);
            sendArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnSend);

            socket.SendAsync(sendArgs);
        }

        Console.ReadLine();
    }

    private static void OnSend(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("SendOk: {0}", e.UserToken.ToString());
    }

    private static void OnConnected(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("Conectioned");
    }
}
} 
```

但是当我启动几个客户端时，我发现有时服务器可以正确接收消息；但有时，服务器只能收到第一条消息，剩下的消息似乎都“丢失”了，任何人都可以建议吗？谢谢。

听人说，我应该实现自己的数据传输协议，但是谁能告诉我怎么定义？谢谢

下面是服务器端的截图： ![在此处输入图像描述](https://i.stack.imgur.com/9dBKs.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T21:07:19.627

发生描述的问题是因为在服务器代码中，ReceiveAsync 方法仅调用一次，无论是否已收到整个消息。其余部分根本不读。

正如[MSDN 上的 ReceiveAsync 文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receiveasync.aspx)中提到的，“对于字节流样式的套接字，传入的数据被放置到缓冲区中，直到缓冲区被填满、连接关闭或内部缓冲的数据耗尽。”。在您的情况下，如果客户端发送的消息被分成几个块，那么当第一部分数据到达服务器时，系统会将其放置在套接字的内部缓冲区中。如果您有一个等待数据的 ReceiveAsync 方法，它会读取内部缓冲的数据，直到它用尽然后返回，即使这只是第一个块并且仍有数据要来。您将需要另一个 ReceiveAsync 操作来获得它。如果你想检查这是真的，你可以尝试放置一个`Thread.Sleep(200)`在从客户端发送 5 条消息的 for 循环中。在这种情况下，服务器只接收到消息的第一部分的机会会变得非常高，因为 TCP 使用一些算法来有效地发送数据，而这个超时将决定它分别发送 5 条消息。但是，您无法控制消息在客户端和服务器之间的网络上的分段方式。即使仅使用一个 SendAsync 操作发送整个消息，也可能需要多个 ReceiveAsync 操作。

要解决在服务器上读取部分消息的问题，您必须知道您需要多少字节。这可以通过使用恒定的消息长度或使用某种协议来确定长度来完成，例如在从客户端发送的每条消息前面加上将要发送的消息的字节数。服务器将不得不进行多次 ReceiveAsync 调用，直到收到整个长度。为了做到这一点，服务器需要保留剩余接收字节数。您可以[在 CodeProject 上找到 SocketAsyncEventArgs 客户端-服务器应用程序](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)的完整且解释性示例，理解它将帮助您解决问题。

# php - 如何在php中处理后访问字符串的特定部分并替换它

> ID：15996124
> 
> 赞同：-2
> 
> 时间：2013-04-14T05:35:32.587
> 
> 标签：php

我有一串这样的

```
$text_string = 'Every thing must be done in time. So,It is not a good thing to be
                so late. What are the Rules of This Process are prominent in this
                video [VIDEO]http://www.youtube.com/watch?v=yseAuiSl[/VIDEO]. So,
                It will be more sensible if you watch a tutorial here
                [VIDEO]http://www.dailymotion.com/video/xyxmu6_underwater[/VIDEO]
                It is much more explanatory. These are the Rules of Thumb.' 
```

我需要获取每个`[VIDEO] .... [/VIDEO]`，然后将其传递给一个函数（我自己创建了该函数），该函数将其转换为其相应的嵌入代码，例如

```
[VIDEO]http://www.youtube.com/watch?v=yseAuiSl[/VIDEO] 
```

将转换为

```
<iframe width="680" height="450" src="http://www.youtube.com/embed/yseAuiSl" 
frameborder="0" allowfullscreen></iframe> 
```

然后我需要`[VIDEO] .... [/VIDEO]`用它的嵌入代码替换它。那么，我如何遍历整个字符串并逐个获取每个`[VIDEO] ... [/VIDEO]`标签并在处理后将其替换为其嵌入代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:39:28.287

在花了很多时间并在 Stackoverflow 人员的帮助下，我找到了解决方案。

```
$text_string = 'Every thing must be done in time. So,It is not a good thing to be
                so late. What are the Rules of This Process are prominent in this
                video [VIDEO]http://www.youtube.com/watch?v=yseAuiSl[/VIDEO]. So,
                It will be more sensible if you watch a tutorial here
                [VIDEO]http://www.dailymotion.com/video/xyxmu6_underwater[/VIDEO]
                It is much more explanatory. These are the Rules of Thumb.' 
```

这是将我的链接转换为嵌入代码的函数

```
function convert_to_embed($matches) {
  $link = $matches[1];

  // All the Function Process

  return $embed;
} 
```

在这里，我使用`preg_replace_callback`的函数将一个一个地处理每个 VIDEO 标签，并且该函数将转换并用其嵌入代码替换 VIDEO 标签。

```
 $finalized_string  = preg_replace_callback('/\[VIDEO\](.+?)\[\/VIDEO\]/i', "convert_to_embed", $text_string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:10:59.930

```
echo preg_replace('/\[VIDEO\](.+?)\[\/VIDEO\]/i', '<iframe width="680" height="450" src="\\1" frameborder="0" allowfullscreen></iframe>', $text_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:18:49.117

在我的想法中：您将需要遍历单词并找到 VIDEO 的开始和结束位置；一些代码：

```
$text_string = 'Every thing must be done in time. So,It is not a good thing to be
                so late. What are the Rules of This Process are prominent in this
                video [VIDEO]http://www.youtube.com/watch?v=yseAuiSl[/VIDEO]. So,
                It will be more sensible if you watch a tutorial here
                [VIDEO]http://www.dailymotion.com/video/xyxmu6_underwater[/VIDEO]
                It is much more explanatory. These are the Rules of Thumb.'

$start = '[VIDEO]';
$end = '[/VIDEO]';
$words_array  = explode(' ',$text_string);
$words = array_flip($words_array);

//Then you can check for video element with:
$word_pos = 0;
foreach($words as $the_word){
$word_pos++;
if ($the_word == $start){
$start_point = $word_pos;
}

if ($the_word == $end){
$end_point = $word_pos;
}
}
$video_link = echo substr($text_string,$start_point,$end_point); 
```

代码只是为了分享我对此的概念..！

# ruby - ruby 的 mongo 驱动程序：`delete'：无法将 Symbol 转换为 String (TypeError)

> ID：15996126
> 
> 赞同：0
> 
> 时间：2013-04-14T05:36:02.707
> 
> 标签：ruby, mongodb

我收到了这个错误：

```
$ ruby mapreduce.rb
/usr/share/gems/gems/mongo-1.6.4/lib/mongo/collection.rb:618:in `delete': can't convert Symbol into String (TypeError)
    from /usr/share/gems/gems/mongo-1.6.4/lib/mongo/collection.rb:618:in `map_reduce'
    from mapreduce.rb:21:in `<main>' 
```

使用以下代码：

```
require 'rubygems' 
  require 'mongo' 

  map = "function() { " + 
  "var keys = [];" + 
  "for ( item in this['kg'] ) { keys.push(item) }" + 
  "emit(keys.sort().join(';'), {count: 1})" + 
  "}" 
  reduce = "function(key, values) { " + 
  "var sum = 0; " + 
  "values.forEach(function(doc) { " + 
  " sum += doc.count; " + 
  "}); " + 
  "return {count: sum}; " + 
  "};" 
  out = "stats" 

  db = Mongo::Connection.new.db("test") 
  coll = db.collection("snps") 

  result = coll.map_reduce(map, reduce, out) 
  result.find.to_a.each do |r| 
puts ['{', r['_id'], ':', r['value']['count'].to_i, '}'].join(" ") 
  end 
```

使用以下 MongoDB 2.2.3。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:56:56.267

来自[精美手册](http://rubydoc.info/gems/mongo/Mongo/Collection:map_reduce)：

> **-（集合，哈希）map_reduce（map，reduce，opts = {}）**

请注意，第三个参数`map_reduce`应该是一个选项哈希，但您传递的是一个字符串。如果您查看`map_reduce`源代码，您会看到：

```
def map_reduce(map, reduce, opts={})
  #...
  raw    = opts.delete(:raw) 
```

所以它最终会使用 Symbol 参数而不是预期[`String#delete`](https://ruby-doc.org/core/String.html#method-i-delete)的 String调用，并且有你的错误。`String#delete`

您还可以在选项的文档中找到它：

> `:out`( `String`) — 默认值：`nil`— 有效的输出类型。在 v1.7.6 之前的 MongoDB 版本中，此选项采用集合的名称作为输出结果。在 1.7.6 及更高版本中，此选项指定输出类型。有关可用的输出类型，请参阅核心文档。

所以想必你想说：

```
result = coll.map_reduce(map, reduce, :out => out) 
```

* * *

不要这样做：

```
map = "function() { " + 
  "var keys = [];" + 
  "for ( item in this['kg'] ) { keys.push(item) }" + 
  "emit(keys.sort().join(';'), {count: 1})" + 
  "}" 
```

请改用`%Q{...}`or`%q{...}`引号：

```
map = %q{function() {
  var keys = [];
  for ( item in this['kg'] ) { keys.push(item) }
  emit(keys.sort().join(';'), {count: 1})
}} 
```

当您有嵌套引号时，这更容易阅读并且噪音更小且容易出错。

# java - 我似乎不能 .setText 超过两次

> ID：15996128
> 
> 赞同：0
> 
> 时间：2013-04-14T05:36:14.393
> 
> 标签：java, methods, label, actionlistener

我目前正在制作一个问答游戏。我设法将游戏设置如下 -

1.  用户单击开始按钮。

2.  从这里这将打开一个文本文件并检索每个问题并将它们保存到一个字符串中。

3.  然后它将这些字符串添加到 Arraylist。

4.  然后我将数组的第一个元素显示到标签（这是第一个问题）。

5.  从这里我设法制作了一个方法来检查标签文本并将 4 个按钮的文本设置为 4 个不同的按钮。

6.  如果用户选择了正确的答案，它会将 +1 添加到分数整数，然后移动到下一个`question(askQues2();)`。如果用户选择了错误的答案，它就会继续下一个`question(askQues2();)`。

7.  一旦它开始下一个问题`(askQues2();)`，它就会改变我告诉它的所有值。*即*LabelQuestion 和4 个不同的答案按钮。

8.  如果用户选择了正确的答案，它会将 +1 添加到分数整数，然后移动到下一个`question(askQues3();)`。

**这就是问题所在**

当我在第二个问题中选择答案时，它不会运行第三个问题方法。

**代码**

```
 public void askQues1 (){
       String askQues1 = questions.get(0);
       LabelQuestion.setText(askQues1);
       ButAnsA.setText("Gillard");
       ButAnsB.setText("Howard");
       ButAnsC.setText("Rudd");
       ButAnsD.setText("Abbott");

       ButAnsA.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){
           Score += 1;             
           askQues2();
       }   
       });
       ButAnsB.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){           
           askQues2();
       }   
       });
       ButAnsC.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){           
           askQues2();
       }   
       });
       ButAnsD.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){            
           askQues2();
       }   
       });

   }
   public void askQues2(){
       String askQues2 = questions.get(1);
       LabelQuestion.setText(askQues2);
       ButAnsA.setText("1999");
       ButAnsB.setText("2004");
       ButAnsC.setText("2007");
       ButAnsD.setText("2010");  

       ButAnsA.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){              
           askQues3();
       }   
       });
       ButAnsA.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){              
           askQues3();
       }   
       });
       ButAnsA.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){              
           askQues3();
       }   
       });
       ButAnsA.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent a){
           Score += 1;
           askQues3();
       }   
       });
   }
   public void askQues3(){
       String askQues3 = questions.get(2);
       LabelQuestion.setText(askQues3);
       ButAnsA.setText("Broncos");
       ButAnsB.setText("Knights");
       ButAnsC.setText("Storm");
       ButAnsD.setText("Dragons");                                              
   } 
```

**我可以说它没有加载第三种方法，因为问题标签或答案按钮发生了变化。**

我尝试了在互联网上找到的多种选择。他们都没有解决这个问题。

如果您需要更多信息。请告诉我。就像我说的那样，这是我第一次发布问题，所以我不熟悉标准。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:56:16.740

您的 askQues2() 方法将动作侦听器添加到 ButAnsA 4 次，并且没有向其他按钮添加新侦听器。

您似乎在每次通话时都向相同的按钮添加新的侦听器，这通常不是最佳的。既然您说您正在从文件中读取问题和可能的答案，那么您最好在文件中包含正确答案并为所有按钮设置一个侦听器。

伪代码：

```
doAction(ActionEvent e)
  int buttoncode=0
  switch (e.getSource())
    case ButAnsA:buttoncode=1;
    case ButAnsB:buttoncode=2;
    case ButAnsC:buttoncode=3;
    case ButAnsD:buttoncode=4;
  if (questions.get(questnum).rightAnswer == buttoncode)
    score++;
  questnum++
  updateQuestionText()
  updateButtonText() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:27:17.957

您正在添加`actionListener`按钮。从您的问题来看，我认为一个按钮不能检测到超过 2 个动作。

尝试将 an 设置`onClickListener()`为按钮。

代码：

```
ButAnsA.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            askQues3();
        }
      }); 
```

`adding`注意：和`setting`听众之间是有区别的。`setting`每次听者，你只是替换前一个。但是通过`adding`侦听器，您正在增加特定小部件上的侦听器数量。

# javascript - 执行 onclick 事件，而不点击。

> ID：15996129
> 
> 赞同：3
> 
> 时间：2013-04-14T05:36:24.377
> 
> 标签：javascript, onclick, photo, simulate

我正在为 JavaScript 使用一个名为 photobooth 的脚本，用户应该单击相机图标来拍照，但我希望它是执行代码。这是我认为是 photobooth 拍照事件的代码片段。

```
var L = g("blind");
g("trigger").onclick = function () {
    L.className = "blind", L.style.opacity = 1, setTimeout(function () {
        L.className = "blind anim", L.style.opacity = 0
    }, 50);
    var e = {};
    C.isActive() ? e = C.getData() : f ? e = {
        x: (p - T.videoWidth) / 2,
        y: (d - T.videoHeight) / 2,
        width: T.videoWidth,
        height: T.videoHeight
    } : e = {
        x: 0,
        y: 0,
        width: p,
        height: d
    };
    var t = y("canvas");
    t.width = e.width, t.height = e.height;
    if (f) t.getContext("2d").drawImage(T, Math.max(0, e.x - (p - T.videoWidth) / 2), Math.max(e.y - (d - T.videoHeight) / 2), e.width, e.height, 0, 0, e.width, e.height);
    else {
        var n = x.getImageData(e.x, e.y, e.width, e.height);
        t.getContext("2d").putImageData(n, 0, 0)
    }
    h.onImage(t.toDataURL())
}; 
```

我想调用该事件或更改它以便我可以调用它，我对 js 不是很好，所以任何帮助都会很棒！

这是来源：[photobooth js](http://wolframhempel.github.io/photobooth-js)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T05:41:40.173

使用 jquery 是一种选择吗？你可以做这样的事情

```
$("#trigger").click(); 
```

或者如果你真的想要原生 js，你可以做这样的事情

```
document.getElementById("trigger").click(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T05:49:10.993

由于 onclick 引用了一个函数，因此您始终可以通过以下方式调用它

```
document.querySelector(".trigger").onclick() 
```

当然，[document.querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)只是获取具有所需功能的 DOM 对象的问题，它可以被任何其他方式引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T05:58:44.913

当用户点击相机图标时，[Photobooth会调用：](http://wolframhempel.github.io/photobooth-js/#onImage)

```
 $('#example').photobooth().on("image",function(ev){}); 
```

要触发点击相机图标：

```
$("#example image").click(); 
```

# javascript - jQuery UI 不能处理导入的 XML 数据，只能处理原始 HTML

> ID：15996135
> 
> 赞同：0
> 
> 时间：2013-04-14T05:39:08.543
> 
> 标签：javascript, jquery, xml, jquery-ui

我正在创建一个从 XML 文档中获取其数据并显示它的文档。我想对其应用一个简单的 jQuery UI 手风琴，使其导航更整洁，但似乎与外部数据存在一些冲突。当我将源复制并粘贴到单独的文档中时，它可以正常工作。

这是带有 XML 的文档：http: [//brettlewis.me/assets/experiments/xanimals/xmltest.html](http://brettlewis.me/assets/experiments/xanimals/xmltest.html)

这是带有原始 HTML 的文档：http: [//brettlewis.me/assets/experiments/xanimals/test.html](http://brettlewis.me/assets/experiments/xanimals/test.html)

我认为使用 HEAD.JS 在加载 XML 后强制脚本初始化会有所帮助，但这并没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:09:28.170

```
$('#animals').accordion(); 
```

在 DOM 完成填充外部数据之前被调用。

删除这个：

```
head.ready("script", function() {
    $( "#animal" ).accordion();
}); 
```

和

```
, function() { $( "#animal" ).accordion(); 
```

从第一个 head.ready 调用开始。

然后在完成构建 DOM 后将其添加到回调中。

如果您需要随时更新数据，请先销毁当前手风琴，然后再重建它：

```
$('#animal').accordion('destroy');
$('#animal').accordion(); 
```

# java - 在 LuaJ 中需要 Java 类

> ID：15996136
> 
> 赞同：0
> 
> 时间：2013-04-14T05:39:11.690
> 
> 标签：java, c, lua, require, luaj

我正在尝试用Java制作一个使用Lua作为脚本的游戏库。当我尝试需要一个 Java 类（即在 jar 中）时，真正的问题出现了，每当我尝试这样做时，我都会收到一个类似于以下错误的错误：

```
Exception in thread "main" org.luaj.vm2.LuaError: @/C:/xampp/htdocs/LevelDesigner/Projects/Lua Test/bin/levels/Test.lua:2 module
'resources.GameLevel' not found: resources.GameLevel
no field package.preload['resources.GameLevel'] 
```

我如何需要一个 jar 中的 Java 类？现在看来，使用 Lua，我只能需要 .lua 文件，而不需要 .class 文件。这显然是有问题的，因为 Java 文件被编译成类文件......这就是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:27:59.023

这个问题的答案是在所有 Lua 脚本中使用 luajava.bindClass 而不是 require 。

# css - html: div 搞砸了

> ID：15996140
> 
> 赞同：0
> 
> 时间：2013-04-14T05:40:10.173
> 
> 标签：css, html, firebug

html文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Patients Detailed Information Page</title>
<link  href="test.css" rel="stylesheet" />
</head>
<body>
<div id="container">
<div id="detailed_fistpart">
    <div id="detailed_div_image">
    </div>
    <div id="detailed_div_basicinfo">
        <div class="detailed_div_inner">
            <div class="detailed_div_captain"><strong>Basic Info</strong></div>
            <div>
                <table id="detailed_table_basicinfo">
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Name</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Gender</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td><font color="#9c9a9c">Birthday</font></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div id="detailed_div_contactinfo">
        <div class="detailed_div_inner">
            <div class="detailed_div_captain"><strong>Contact Info</strong></div>
            <div>
                <table id="detailed_table_contactinfo">
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Phone</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Email</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td><font color="#9c9a9c">Address</font></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<div id="detailed_div_reminding">
    <textarea id="detailed_reminding"></textarea>
    <input type="button" class="button" value="update"></input>
</div>

</div>

</body>
</html> 
```

这是我的css文件：

```
body{
margin:0;
padding:0;
}

#container{
width:900px;
margin:0 auto;
text-align:left;
position:relative;
filter:alpha(opacity=100);
opacity: 1.0;
}

#detailed_fistpart {
margin-top: 10px;
}

#detailed_image {
width: 200px;
height: 200px;
}

#detailed_div_basicinfo {
margin-left: 10px;
float: left;
background-color: #FFF;
border: 1px solid #c6cfde;
border-radius:7px;
}

.detailed_div_inner {
margin-top: 20px;
margin-left: 20px;
margin-right: 20px;
margin-bottom: 20px;
}

.detailed_div_captain {
font-size: 20px;
height: 40px;
}

#detailed_table_basicinfo {
width: 193px;
height: 118px;
font-family:"Times New Roman", Times, serif;
font-size:14px;
}

.detailed_table_td {
border-bottom: 1px solid #efefef;
}

#detailed_div_contactinfo {
margin-left: 10px;
float: left;
background-color: #FFF;
border: 1px solid #c6cfde;
border-radius:7px;
}

#detailed_table_contactinfo {
width: 400px;
height: 118px;
font-family:"Times New Roman", Times, serif;
font-size:14px;
}

#detailed_div_reminding {
width: 900px;
}

#detailed_reminding {
width: 700px;
height: 70px;
}

.button {
background-color: #004584;
font-size:16px;
color: #FFF;
font-weight: bold;
} 
```

当我使用`firebug`（扩展名）时，我可以看到它是 id=detailed_div_reminding 的 div 包括 id=detailed_div_basicinfo 的 div 和 id=detailed_div_contactinfo 的 div 而不是 id=detailed_fistpart 的 div。

一个问题是，如果你添加`magin-top: 20px`到`#detailed_div_reminding`，它不会产生边距`#detailed_fistpart`

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:56:23.263

您好，您需要添加此行 `<div style="clear:both"></div>`

在这行代码之前`<div id="detailed_div_reminding">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:00:25.417

您的意思是您没有在最后一节中获得边距吗？这是因为您有浮动，并且您需要在后续部分清除它们。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Patients Detailed Information Page</title>
<link  href="test.css" rel="stylesheet" />
<style>
body{
margin:0;
padding:0;
}

#container{
width:900px;
margin:0 auto;
text-align:left;
position:relative;
filter:alpha(opacity=100);
opacity: 1.0;
}

#detailed_fistpart {
margin-top: 10px;
}

#detailed_image {
width: 200px;
height: 200px;
}

#detailed_div_basicinfo {
margin-left: 10px;
float: left;
background-color: #FFF;
border: 1px solid #c6cfde;
border-radius:7px;
}

.detailed_div_inner {
margin-top: 20px;
margin-left: 20px;
margin-right: 20px;
margin-bottom: 20px;
}

.detailed_div_captain {
font-size: 20px;
height: 40px;
}

#detailed_table_basicinfo {
width: 193px;
height: 118px;
font-family:"Times New Roman", Times, serif;
font-size:14px;
}

.detailed_table_td {
border-bottom: 1px solid #efefef;
}

#detailed_div_contactinfo {
margin-left: 10px;
float: left;
background-color: #FFF;
border: 1px solid #c6cfde;
border-radius:7px;
}

#detailed_table_contactinfo {
width: 400px;
height: 118px;
font-family:"Times New Roman", Times, serif;
font-size:14px;
}

#detailed_div_reminding {
width: 900px;
margin-top:20px;
}

#detailed_reminding {
width: 700px;
height: 70px;
}

.button {
background-color: #004584;
font-size:16px;
color: #FFF;
font-weight: bold;
}
</style>
</head>
<body>
<div id="container">
<div id="detailed_fistpart">
    <div id="detailed_div_image">
    </div>
    <div id="detailed_div_basicinfo">
        <div class="detailed_div_inner">
            <div class="detailed_div_captain"><strong>Basic Info</strong></div>
            <div>
                <table id="detailed_table_basicinfo">
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Name</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Gender</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td><font color="#9c9a9c">Birthday</font></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div id="detailed_div_contactinfo">
        <div class="detailed_div_inner">
            <div class="detailed_div_captain"><strong>Contact Info</strong></div>
            <div>
                <table id="detailed_table_contactinfo">
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Phone</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td class="detailed_table_td"><font color="#9c9a9c">Email</font></td>
                        <td class="detailed_table_td"></td>
                    </tr>
                    <tr>
                        <td><font color="#9c9a9c">Address</font></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<div style="clear:both" ></div>

<div id="detailed_div_reminding">
    <textarea id="detailed_reminding"></textarea>
    <input type="button" class="button" value="update"></input>
</div>

</div>

</body>
</html> 
```

# c++ - 无法输入字符并导致无限循环

> ID：15996143
> 
> 赞同：1
> 
> 时间：2013-04-14T05:40:57.627
> 
> 标签：c++, loops

问题是我无法输入“c”的值，它是一个无限循环。我看不出我做错了什么。我对 C++ 很陌生。

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

class manu
{
    private:
        int sqdno;
        string name,speciality,take;
        ofstream fileip;
        ifstream fileop;
    public:
        manu()
        {
            fileip.open("Manchester United.txt");
            fileop.open("Manchester United.txt");
        }    
    public:
        int input()
        {

            while(cin>>sqdno>>name>>speciality)
            {
              fileip<<sqdno<<' '<<name<<' '<<speciality<<endl;
            }
        }
    public:
        int display()
        {

            fileop>>take;
            while(fileop.good())
            {
                cout<<take<<endl;
                fileop>>take;
            }
        }   
};

int main()
{

    int c;
    manu m;
    cout<<"Enter squad details(press 'Ctrl+z' to exit on input):\n";

    do
    {
    cout<<"Select a choice:"<<endl;
    cout<<"1.Input to file"<<endl;
    cout<<"2.Display from file"<<endl;
    cout<<"3.Exit"<<endl;
    cin>>c;
    switch(c)
    {
        case 1:
            cout<<"Input squad_no,name and speciality of players:";
            m.input();
            break;
        case 2:
            m.display();
            break;
        default:
            cout<<"enter a valid choice";
    }
    }while(c<3);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:57:44.903

上面的代码在visual stdio 8编译器下无法编译，因为**显示**和**输入函数**需要一个返回值。

因此，要么将返回类型更改为*void*，要么从函数返回一些 int 类型的值。

我无法输入“c”的值，它是一个无限循环：

如果你想在无限循环中运行，你必须修改你的 switch case。

而且你的函数*输入*也有错误，因为它也是一个无限循环。你可以参考下面的代码并相应地修改你的代码......

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

class manu
{
    private:
        int sqdno;
        string name,speciality,take;
        ofstream fileip;
        ifstream fileop;
    public:
        manu()
        {
            fileip.open("Manchester United.txt");
            fileop.open("Manchester United.txt");
        }    
    public:
        void input()
        {

            cin>>sqdno>>name>>speciality;

            fileip<<sqdno<<' '<<name<<' '<<speciality<<endl;

        }
    public:
        void display()
        {

            fileop>>take;
            while(fileop.good())
            {
                cout<<take<<endl;
                fileop>>take;
            }
        }   
};

int main()
{

    int c;
    manu m;
    cout<<"Enter squad details(press 'Ctrl+z' to exit on input):\n";

    while (1)
    {
        cout<<"Select a choice:"<<endl;
        cout<<"1.Input to file"<<endl;
        cout<<"2.Display from file"<<endl;
        cout<<"3.Exit"<<endl;
        cin>>c;
        switch(c)
        {
            case 1:
                cout<<"Input squad_no,name and speciality of players:";
                m.input();
                break;
            case 2:
                m.display();
                break;
            case 3:
            exit(1);
            default:
                cout<<"enter a valid choice";
                break;
        }
    }
} 
```

# dart - 很难用 eclipse 插件设置一个 dart 项目

> ID：15996155
> 
> 赞同：3
> 
> 时间：2013-04-14T05:43:16.523
> 
> 标签：dart, stagexl

我正在建立一个新项目（java 后端 + dart 前端）。

在客户端，我计划使用 stagexl 作为游戏框架。在服务器端，我将使用 Google App Engine。（加上 Gradle 和 GIT ...）

昨天我跟着[http://blog.dartwatch.com/2013/01/integrating-dart-into-eclipse-and-your.html](http://blog.dartwatch.com/2013/01/integrating-dart-into-eclipse-and-your.html)安装了 dart eclipse 插件，但我一直收到很多错误弹出窗口。

*从插件调用代码时出现问题：“org.eclipse.ui.views.properties.tabbed”。*

```
org.eclipse.core.runtime.AssertionFailedException: null argument:
    at org.eclipse.core.runtime.Assert.isNotNull(Assert.java:85)
    at org.eclipse.core.runtime.Assert.isNotNull(Assert.java:73)
    at org.eclipse.ui.views.properties.ResourcePropertySource.<init>(ResourcePropertySource.java:134)
    at com.google.dart.tools.ui.DartElementAdapterFactory.getProperties(DartElementAdapterFactory.java:204)
    at com.google.dart.tools.ui.DartElementAdapterFactory.getAdapter(DartElementAdapterFactory.java:140)
    at org.eclipse.core.internal.adapter.AdapterFactoryProxy.getAdapter(AdapterFactoryProxy.java:80)
    ... 
```

我的设置：

```
Dart Editor for Eclipse             0.4.5.r21094                 com.google.dart.eclipse.feature.feature.group  dartlang.org
Eclipse EGit                        2.3.1.201302201838-r         org.eclipse.egit.feature.group Eclipse EGit
Eclipse IDE for Java EE Developers  1.5.2.20130211-1820          epp.package.jee    null
Google App Engine Java SDK 1.7.7    1.7.7                        com.google.appengine.eclipse.sdkbundle.feature.feature.group   Google, Inc.
Google Plugin for Eclipse 4.2       3.2.2.v201303261859-rel-r42  com.google.gdt.eclipse.suite.e42.feature.feature.group Google, Inc.
Gradle IDE  3.2.0.201301240803-M2   org.springsource.ide.eclipse.gradle.feature.feature.group   SpringSource, a division of VMware, Inc. 
```

**给帮助我的人一两杯啤酒！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T20:42:41.870

[我建议您从他们的页面](https://www.dartlang.org/)下载 Dart 编辑器，而不是安装 Eclipse 然后安装 Dart 插件

这是一个已经为 dart 使用准备的功能齐全的 Eclipse 实例。

从那里，您可以创建一个新项目，他们会给您一些预定义的模板。

# iphone - UIWebView 不会使用保存在 Mobile Safari 中的密码

> ID：15996157
> 
> 赞同：4
> 
> 时间：2013-04-14T05:44:05.777
> 
> 标签：iphone, ios, objective-c, uiwebview

我在 Xcode 中创建了一个简单的 iOS 浏览器，它不会将浏览器中的密码保存到它打开的网站，但该网站会将密码保存在 safari 中。我可以在 Xcode 中添加哪些设置以将密码保存在浏览器中，使其像在 Safari 中一样保持登录状态？该应用程序旨在隐藏网址，因此没有该应用程序的任何人都无法访问该网站。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T05:52:07.273

输入 Mobile Safari 的信息 100% 与`UIWebView`出于安全原因，如果不是这种情况，您可以轻松地制作一个应用程序，为 Gmail 或 Facebook 加载不可见的网络视图，并使用 javascript 读取任何自动填充的用户名/密码字段。

您最好的选择是实现您自己的保存功能，如[UIWebView 是否可以保存和自动填充先前输入的表单值（例如，用户名和密码）中所述？](https://stackoverflow.com/questions/4772341/is-it-possible-for-a-uiwebview-to-save-and-autofill-previously-entered-form-valu). 正如该答案所述，请绝对确保[将这些保存的值安全地存储在钥匙串中](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)！

# mysql - 错误查询 SELECT SQL_CALC_FOUND_ROWS * from user WHERE gender='$gender' DESC limit 15

> ID：15996160
> 
> 赞同：-2
> 
> 时间：2013-04-14T05:44:51.037
> 
> 标签：mysql, sql

帮我

错误信息：

```
error query: "SELECT SQL_CALC_FOUND_ROWS * 
               FROM user WHERE gender='$gender'
               DESC limit 15"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:46:42.450

问题出在这一行的某个地方：

```
...WHERE gender='$gender' DESC limit 15 
```

如您所见，您没有`ORDER BY`子句，但您使用了`DESC`关键字。尝试通过删除关键字来修复它`DESC`

```
...WHERE gender='$gender' limit 15 
```

或添加`ORDER BY`子句

```
...WHERE gender='$gender' ORDER BY col_name DESC limit 15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T05:55:35.553

原则上，这两个选项中的任何一个都应该起作用：

```
SELECT SQL_CALC_FOUND_ROWS * FROM `user` WHERE `gender`='$gender' LIMIT 15; 
```

或不运行查询`SQL_CALC_FOUND_ROWS`并执行单独的`SELECT COUNT(*)`查询

```
SELECT * FROM `user` WHERE `gender`='$gender' LIMIT 10;
SELECT COUNT(*) FROM `user` WHERE `gender`='$gender'; 
```

PS：反引号是一个好习惯。

# java - 从 freebase 请求大量数据 - Java

> ID：15996162
> 
> 赞同：1
> 
> 时间：2013-04-14T05:45:01.063
> 
> 标签：java, freebase

我试图从 freebase 请求大量数据。但我收到错误消息“HTTP 响应代码：403”。以前有没有人遇到过类似的问题？

这是我的代码

私有静态最终字符串 service_url = " [https://www.googleapis.com/freebase/v1/mqlread](https://www.googleapis.com/freebase/v1/mqlread) ";

```
public static void main(String[] args) 
{
    try
    {
        String cursor = "";
        String urlStr_initial = service_url + "?query=" + URLEncoder.encode(getQuery(), "UTF-8") + "&cursor";
        URL url = new URL(urlStr_initial);
        List<Freebase> list = new ArrayList<Freebase>();
        Freebase f_b;
        do
        {
            HttpURLConnection  url_con = (HttpURLConnection)url.openConnection();
            url_con.addRequestProperty("User-Agent", "Mozilla/4.76");

            StringBuilder str_builder = new StringBuilder();        
            BufferedReader reader = new BufferedReader(new InputStreamReader(url_con.getInputStream()));

            String line;
            while((line = reader.readLine()) != null)
            {
                str_builder.append(line);
            }
            String response = str_builder.toString();
            JSONObject j_object = new JSONObject(response);

            if(j_object.has("result"))
            {
                JSONArray j_array = j_object.getJSONArray("result");
                for(int i = 0; i < j_array.length(); i++)
                {
                    JSONObject j_o = j_array.getJSONObject(i);
                    if(j_o.has("id") == true && j_o.has("name"))
                    {
                        String id = j_o.getString("id");
                        String name = j_o.getString("name");
                        System.out.println("ID: " + id + "   /   Name:" + name);
                        f_b = new Freebase(id, name);
                        if(f_b != null)
                        {
                            list.add(f_b);
                        }
                        else
                        {
                            System.out.println("Null value in Freebase");
                        }
                    }
                }
            }
            else
            {
                System.out.println("There is no \"result\" key in JASON object");
            }

            if(j_object.has("cursor"))
            {
                cursor = j_object.get("cursor").toString();
            }
            else
            {
                cursor = "false";
            }

            String urlStr = urlStr_initial + "=" + cursor;
            url = new URL(urlStr);
        }while( !cursor.equalsIgnoreCase("false"));

        if(list != null)
        {
            TextFile tf = new TextFile();
            tf.writeToFile(list);
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
}

private static String getQuery()
{
    return "[{"
            + "\"name\": null,"
            + "\"id\": null,"
            + "\"type\":\"/people/person\","
            + "\"limit\": 500"
            + "}]";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:59:41.357

你没有说什么是“大”，但 API 不是为批量下载而设计的。您应该为此使用数据转储。

HTTP 响应代码中通常包含更详细的错误消息。例如，如果它显示 403 - Forbidden - API key required，这意味着您没有包含您的 API 密钥（我没有看到您在代码中包含它的位置）。如果显示 403 - Forbidden - quota exceeded，则表示您已超出请求配额（您可以在 API 控制台上查看剩余的配额）。

# java - HashMap 值自增

> ID：15996164
> 
> 赞同：0
> 
> 时间：2013-04-14T05:45:48.743
> 
> 标签：java, hashmap

当我在编码时，我想到了一个问题，**那就是HashMap中的值部分（整数）是否能够在以下情况下自动递增？**

```
Map<String, Integer> dictionary = new HashMap<String, Integer>();    
dictionary.put("a",1);
dictionary.put("b",1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T06:01:01.943

您可以使用Google 开源的[Guava框架中的](https://code.google.com/p/guava-libraries/)[Multiset 。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)

使用 Multiset 可以大大简化您的生活。

```
 Multiset<String> set = HashMultiset.create();
    set.add("abc"):
    set.add("acd");
    set.add("abc");

    // use set.count(Object) to get the counter of the object
    int c = set.count("abc");

    // or iterate through the set to get each object and its count
    for (Multiset.Entry<String> entry : set.entrySet()){
         String str = entry.getElement();
         int count = entry.getCount();
    } 
```

与使用普通 HashMaps 的传统方式相比：

```
 Map<String, Integer> map = new HashMap<String, Integer>();

    public void add(String str){
        Integer oldValue = map.get(str);
        if (oldValue == null){
            map.put(str, 1);
        } else{
            map.put(str, oldValue + 1);
        }
    } 
```

即使使用可变计数器作为 HashMap 的值，代码仍然非常繁琐。

```
 Map<String, AtomicInteger> map = new HashMap<String, AtomicInteger>();

    public void add(String str){
        AtomicInteger counter = map.get(str);
        if (counter == null){
            counter = new AtomicInteger();
            map.put(str, counter);
        }
        counter.incrementAndGet();
     } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T05:51:47.713

考虑使用[`AtomicInteger`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html)：

```
Map<Key, AtomicInteger> dictionary =
  new HashMap<String, AtomicInteger>();

dictionary.get(key).incrementAndGet(); 
```

还可以考虑使用`for`循环来简化代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T05:51:25.793

您可以编写一个`AutoIncrementHashMap`内部使用 a的自定义类`HashMap`，具有一个自动递增变量`count`和一个`put(String)`添加`String`成员并`counter`每次递增的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T09:24:57.333

最简单最快的解决方案是使用[TObjectIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectIntHashMap.html)

```
TObjectIntHashMap<String> map = new TObjectIntHashMap<String>();

public void add(String str){
    map.adjustOrPutValue(str, 1, 1);
} 
```

Trove 支持集合中的原语，使它们更高效，在这种情况下，有一种方法可以满足您的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-01T16:28:50.927

您可以创建一个支持类：

```
public class HashMapInteger<K> extends HashMap<K,Integer> {  
          public void increment(K key) {
            if(super.containsKey(key))
                super.put(key,super.get(key)+1);
            else
                super.put(key,new Integer(1));
          }

          public void increment(K key, int val) {
                if(super.containsKey(key))
                    super.put(key,super.get(key)+val);
                else
                    super.put(key,new Integer(val));
              }
        } 
```

要使用它：

```
HashMapInteger<String> map = new HashMapInteger<String>();
map.increment("abc");
map.increment("abc");
System.out.println(map.get("abc"));//Output is 2 
```

# c# - LINQ 查询按条件从多个列表中过滤项目

> ID：15996168
> 
> 赞同：3
> 
> 时间：2013-04-14T05:47:19.990
> 
> 标签：c#, .net, linq, search

我在概念化使用 LINQ 应该相当简单的东西时遇到了麻烦。我有一个要根据子对象的 id 值缩小或过滤的集合。

我的主要收藏包括一个景点列表。这是一个点的样子：

```
public class Spot
{
    public virtual int? ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual string TheGood { get; set; }
    public virtual string TheBad { get; set; }
    public virtual IEnumerable<Season> Seasons { get; set; }
    public virtual IEnumerable<PhotographyType> PhotographyTypes { get; set; }
} 
```

我正在尝试按 PhotographyType 和 Season 过滤 Spots 列表。我有一个 PhotographyTypes 和 Seasons 的 id 列表，每个都在一个 int[] 数组中。这些列表如下所示：

```
criteria.PhotographyTypeIds //an int[]
criteria.SeasonIds //an int[] 
```

我想构建一个仅包含具有与上述列表中的子对象 (id) 匹配的 Spot 的集合。此功能的目标是按类型和季节过滤一组摄影点，并仅显示匹配的点。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:50:42.673

谢谢大家的建议。我最终解决了这个问题。我确定这不是最好的方法，但它现在正在工作。因为这是一个搜索过滤器，所以有很多条件。

```
private List<Spot> FilterSpots(List<Spot> spots, SearchCriteriaModel criteria)
    {
        if (criteria.PhotographyTypeIds != null || criteria.SeasonIds != null)
        {
            List<Spot> filteredSpots = new List<Spot>();

            if (criteria.PhotographyTypeIds != null)
            {
                foreach (int id in criteria.PhotographyTypeIds)
                {
                    var matchingSpots = spots.Where(x => x.PhotographyTypes.Any(p => p.ID == id));
                    filteredSpots.AddRange(matchingSpots.ToList());
                }
            }

            if (criteria.SeasonIds != null)
            {
                foreach (int id in criteria.SeasonIds)
                {
                    if (filteredSpots.Count() > 0)
                    {
                        filteredSpots = filteredSpots.Where(x => x.Seasons.Any(p => p.ID == id)).ToList();
                    }
                    else
                    {
                        var matchingSpots = spots.Where(x => x.Seasons.Any(p => p.ID == id));
                        filteredSpots.AddRange(matchingSpots.ToList());
                    }
                }
            }
            return filteredSpots;
        }
        else
        {
            return spots;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:26:17.137

You have an array of IDs that has a `Contains` extension method that will return `true` when the ID is in the list. Combined with LINQ `Where` you'll get:

```
List<Spot> spots;   // List of spots
int[] seasonIDs;    // List of season IDs

var seasonSpots = from s in spots
                  where s.ID != null
                  where seasonIDs.Contains((int)s.ID)
                  select s; 
```

You can then convert the returned `IEnumerable<Spot>` into a list if you want:

```
var seasonSpotsList = seasonSpots.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:00:29.650

这可能会帮助您：

```
List<Spot> spots = new List<Spot>();
Spot s1 = new Spot();
s1.Seasons = new List<Season>() 
             { new Season() { ID = 1 }, 
               new Season() { ID = 2 }, 
               new Season() { ID = 3 } 
             };
s1.PhotographyTypes = new List<PhotographyType>() 
             { new PhotographyType() { ID = 1 }, 
               new PhotographyType() { ID = 2 } 
             };

Spot s2 = new Spot();
s2.Seasons = new List<Season>() 
             { new Season() { ID = 3 }, 
               new Season() { ID = 4 }, 
               new Season() { ID = 5 } 
             };
s2.PhotographyTypes = new List<PhotographyType>() 
             { new PhotographyType() { ID = 2 }, 
               new PhotographyType() { ID = 3 } 
             };

List<int> PhotographyTypeIds = new List<int>() { 1, 2};
List<int> SeasonIds = new List<int>() { 1, 2, 3, 4 };

spots.Add(s1);
spots.Add(s2); 
```

然后：

```
var result = spots
             .Where(input => input.Seasons.All
                           (i => SeasonIds.Contains(i.ID)) 
                    && input.PhotographyTypes.All
                           (j =>  PhotographyTypeIds.Contains(j.ID))
                    ).ToList();
// it will return 1 value 
```

假设：

```
public class Season
{
    public int ID { get; set; }
    //some codes
}
public class PhotographyType
{
    public int ID { get; set; }
    //some codes
} 
```

# php - SQL JOIN 返回 3 个名为 'id' 的字段

> ID：15996171
> 
> 赞同：3
> 
> 时间：2013-04-14T05:48:02.387
> 
> 标签：php, mysql, sql, join

我有一个使用 3 个表的连接的 SQL 查询。它实际上工作正常，但是所有三个表都有一个名为“id”的字段，所以稍后当我尝试访问 id 字段时，它只访问最后一个字段中的那个。SQL查询如下：

```
"SELECT * FROM professors AS p 
            JOIN schools_professors AS sp 
            ON p.school_id = sp.id
            JOIN schools AS s ON sp.school_id = s.id  WHERE p.first_name LIKE '%".
                $search."%' OR p.last_name LIKE '%".$search.
                "%' LIMIT 0, 10;" 
```

现在，学校、教授和学校教授，都有 id 列。我如何访问教授的 ID？这是我唯一关心的一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T05:50:07.543

在这种情况下，您不应该使用`*`，而是手动投影列名并在其上添加一个`ALIAS`。例子，

```
SELECT   ....,
         p.ID AS ProfessorID,
         s.ID AS SchoolID,
FROM     ..... 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# delphi - DELPHI XE命令行编译本地化文件

> ID：15996175
> 
> 赞同：2
> 
> 时间：2013-04-14T05:48:48.403
> 
> 标签：delphi, localization

有人知道如何使用命令行编译整个本地化项目（RCN 和 DFN 文件）吗？我使用了 cgrc.exe，但不编译 DFN 表单，只处理 RCN 文件……我通过 processmonitor 看了一下，看到 bds.exe 加载了 DFM/DFN 文件……所以这可能是不可能的。如果有人知道...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:22:34.650

查看 DCC 命令行编译器的文档并编写一个执行所有编译的批处理文件。

这是一个例子：

```
@echo off
cd eng_core
call build.bat 
if errorlevel 1 goto finalerr
rem Errorlevel test needs to come directly after call.
rem If error occurs code at finalerr will back up one dir.
cd ..
cd eng_coreweb
call build.bat FINAL
if errorlevel 1 goto finalerr
cd ..
cd eng_lspconfig
call build.bat FINAL
if errorlevel 1 goto finalerr
cd ..
cd eng_pvcc
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd eng_tasks
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_block
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_login
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_profman
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_uconsole
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_uninst
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_update
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_updcheck
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_vmigrate
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_visereg
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_vssview
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd instreq
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_vtray
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd gui_wizard
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd svc_pvcc
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd svc_vlaunch
call build.bat 
if errorlevel 1 goto finalerr
cd ..
cd svc_vservice
call build.bat 
if errorlevel 1 goto finalerr
cd ..
goto off
:finalerr
cd ..
:off 
```

并在单独的子目录中：

```
@ECHO OFF
echo .
echo ***************************
echo ***Compiling profman.exe***
echo ***************************
if FINAL!==%1! ..\ResetTestFase
if errorlevel 1 goto :err
dcc32 -B -GD profman.dpr
if errorlevel 1 goto :err
copy profman.exe D:\source\output
goto off
:err
if FINAL!==%1! ..\RestoreTestFase
pause
:off
if FINAL!==%1! ..\RestoreTestFase 
```

我不知道这是否/如何明确解决您对 DFN 文件的评论，但如果 IDE 处理这些，我认为 DCC32 也会这样做。

# android - 具有多个按钮的列表视图项

> ID：15996181
> 
> 赞同：0
> 
> 时间：2013-04-14T05:49:51.017
> 
> 标签：android, listview

我的列表视图项目有 3 或 4 个按钮，我正在使用每个按钮调用一个 Web 服务，我正在使用异步任务执行此操作，现在我的问题是我想通过根据结果更改按钮背景来显示单击的按钮网络服务调用。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:25:13.837

您可以在 AsyncTask 的 onPostExecute() 方法中更改按钮的 setBacgroundColor() 方法。

```
@Override
protected void onPostExecute(String result) {
         super.onPostExecute(result);
             //Do what ever you want depending on the result that you 
             //you pass in the return of the doInBackGround....
             button.setBackGroundColor(Color.GREEN);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:34:36.287

试试这个

1.  将您单击的按钮的引用（从其 onClickListener 获取的视图）传递给您将要执行的 asyncTask
2.  启动异步任务
3.  在 Post 执行中，更改视图的背景。

# objective-c - CLLocation 无法关闭

> ID：15996187
> 
> 赞同：1
> 
> 时间：2013-04-14T05:51:42.520
> 
> 标签：objective-c, cllocationmanager

我已经这样做了 `[self.locationManager stopUpdatingLocation];`

没有其他活动的 locationManager。

然而，位置管理器似乎一直处于活动状态，因为箭头符号位于状态栏中。

我也用`MKMapView`.

我想知道`MKMapView`是不是一直在寻找位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:23:42.430

是的，`MKMapView`用于`CLLocationManager`获取用户位置。`showsUserLocation`您可以通过将属性设置为 NO来关闭它。

# mysql - MySQL - 组合多个查询

> ID：15996192
> 
> 赞同：2
> 
> 时间：2013-04-14T05:53:13.970
> 
> 标签：mysql, sql, join, greatest-n-per-group

我目前有以下查询（以及一些周围的 vB 代码）。我希望我可以将其精简为一个 SELECT 语句，而不是在每个页面上运行 10 个以上来获取个人姓名。

```
$results = $db->query_read_slave("
    SELECT user.id AS steam, user.skills AS level
    FROM wcsp.wcgousers AS user
    WHERE race = '_wcs_' 
    ORDER BY ABS(user.skills) DESC LIMIT 10
    ");

$rank = 1;
while ($user = $db->fetch_array($results)) {
    $result = $db->query_first("
        SELECT old.name AS name
        FROM wcsp.warn_oldnames AS old
        WHERE id = '$user[steam]'
        ORDER BY lasttime
        DESC LIMIT 1
    ");

    $listing[] = array("id" => $user['steam'], "level" => $user['level'], "name" => $result['name'], "rank" => $rank);

    $rank += 1;
} 
```

我已经尝试过 LEFT JOIN 但我遇到的问题是我需要在 LEFT JOIN 中使用类似于以下内容的子查询：

```
SELECT user.id AS steam, user.skills AS level, names.name AS name
FROM wcsp.wcgousers AS users
LEFT JOIN 
    (
        SELECT names.name
        FROM wcsp.warn_oldnames AS names
        WHERE id = wcsp.wcgousers.id
        ORDER BY lasttime DESC LIMIT 1
    ) AS names
ON names.id = users.id
WHERE users.race = '_wcs_' 
```

由于子查询中的数据库检查不同，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:29:19.960

如果我对您的理解正确，您希望`Name`为每个用户获取最新信息。

```
SELECT  a.id AS steam, 
        a.skills AS level,
        b.name
FROM    wcgousers a
        INNER JOIN warn_oldnames b
            ON a.ID = b.ID
        INNER JOIN
        (
            SELECT  ID, MAX(lasttime) max_date
            FROM    warn_oldnames
            GROUP   BY ID
        ) c ON  b.ID = c.ID AND
                b.lastTime = c.max_date
WHERE   a.race = '_wcs_'
-- ORDER  BY ABS(a.skills) DESC 
-- LIMIT  10 
```

# user-interface - 哪些因素控制对话框按钮的外观？

> ID：15996193
> 
> 赞同：1
> 
> 时间：2013-04-14T05:53:17.627
> 
> 标签：user-interface, mfc, win32gui

我对影响 Windows 对话框中 UI 元素（如按钮）外观的因素有些困惑。我的困惑来自以下观察：

1-我的系统上安装了 Visual Studio 2010，当我创建 MFC 对话框时，.rc 上的按钮具有精致的外观，略微圆角等。当我构建 MFC 应用程序时，生成的 exe 中出现相同的外观。 ![与win7上的2010项目](https://i.stack.imgur.com/GYvni.png)

2-现在我得到一个在 VC 6 中开发的应用程序，将其转换为新的 vs 2010 项目。当我打开 .rc 文件时，UI 外观与上述相同

![转换后项目的rc文件](https://i.stack.imgur.com/1F4yZ.png)

但是当我构建和运行应用程序时，按钮的 ui 外观是旧的，简单的。 ![查看转换后项目的运行 exe](https://i.stack.imgur.com/ZIoYQ.png)

3-我在旧代码中包含 InitcommonControlEx() ，但这并没有改变。也许它与此无关。

我的问题是什么在控制 ui 元素的这种外观和感觉？它与指示应用程序应使用哪个版本的 Windows 库的清单文件有关吗？

如果是这样，如何更新旧项目的清单文件，以便获得新的 UI 外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:33:30.393

你说的对。您需要嵌入清单文件。

使用 VS2010 将 manifest 嵌入到 MFC 应用程序中的[正确方法是通过 Properties->Linker->Manifest File->Generate Manifest。](http://msdn.microsoft.com/en-us/library/ms235229.aspx)要启用 XP 主题，只需在该`Additional Manifest Dependencies`字段中使用以下内容：

```
type='Win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='X86' publicKeyToken='6595b64144ccf1df' language='*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T04:49:51.517

在 VS2010 中，使用 New Project 向导创建一个 MFC 对话框应用程序（实际上任何 MFC 应用程序都可以）。为所有选项选择默认值并让向导生成代码。

完成后，查看文件`stdafx.h`并将以下块复制/粘贴到您的`stdafx.h`

```
#ifdef _UNICODE
#if defined _M_IX86
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='x86' publicKeyToken='6595b64144ccf1df' language='*'\"")
#elif defined _M_IA64
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='ia64' publicKeyToken='6595b64144ccf1df' language='*'\"")
#elif defined _M_X64
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='amd64' publicKeyToken='6595b64144ccf1df' language='*'\"")
#else
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"")
#endif
#endif 
```

您也可以通过 Project/Properties 执行此操作，但通过在代码中执行此操作，如果您与其他项目共享源代码，它不会中断。

请注意，其中有一个`#ifdef _UNICODE`，因为少量通用控件仅适用于 UNICODE 构建。但是，如果您需要非 UNICODE 构建并且仅使用“标准”Windows 控件（例如，没有列表视图或树视图等），则可以删除`#ifdef`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T00:27:42.993

如果您不想删除 #ifdef _UNICODE 语句，您可以复制该行

```
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='x86' publicKeyToken='6595b64144ccf1df' language='*'\"") 
```

并将其放在 stdafx.h 文件的末尾。这与上面“ **cha** ”推荐的步骤完全相同，但步骤更少。

# sql-server - Simple.Data LIKE 运算符在 Where

> ID：15996195
> 
> 赞同：2
> 
> 时间：2013-04-14T05:54:32.673
> 
> 标签：sql-server, webforms, simple.data

我们如何在 ASP.Net C#中使用`LIKE`操作符`WHERE``Simple.Data``SQL Server`

我需要运行这个 SQL 查询

```
SELECT MAX(regid) FROM reg_course WHERE(regid LIKE '%2013%') 
```

最后，我通过给`max(regid)`列加上别名并以这种方式查询来完成这项任务。

`var cid=db.course_test.All() .Select(db.course_test.regid.Max().As("maxcourseid")) .Where(db.course_test.regid.Like(string.Concat("%",DateTime.Now.Year,"%"))) .FirstOrDefault();`

笔记

`cid=db.course_test.All() .Select(db.course_test.regid.Max().As("maxcourseid")) .Where(db.course_test.regid.Like(string.Concat("%",DateTime.Now.Year,"%")))`

返回类型 Simple.Data.SqlQuery

使用`FirstOrDefault`返回 Top 结果。如果您不希望您可以在不使用 FirstOrDefault 的情况下迭代集合

还有其他更好的方法建议吗？

# python - 如何找到多维列表的长度？

> ID：15996196
> 
> 赞同：6
> 
> 时间：2013-04-14T05:54:40.150
> 
> 标签：python, python-2.7

你如何找到多维列表的长度？

我自己想出了一种方法，但这是在多维列表中查找值数量的唯一方法吗？

```
multilist = [['1', '2', 'Ham', '4'], ['5', 'ABCD', 'Foo'], ['Bar', 'Lu', 'Shou']]
counter = 0
for minilist in multilist:
    for value in minilist:
        counter += 1

print(counter) 
```

我很确定有一种更简单的方法可以找到多维列表的长度，但是 len(list) 不起作用，因为它只给出了内部列表的数量。还有比这更有效的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T05:55:11.707

怎么样：

```
sum(len(x) for x in multilist) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T06:36:00.253

替代@mgilson 的解决方案

```
sum(map(len, multilist)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-04T13:05:33.273

如果您想要任何 n 维列表中的项目数，则需要使用如下递归函数：

```
def List_Amount(List):
    return _List_Amount(List)
def _List_Amount(List):
    counter = 0
    if isinstance(List, list):
        for l in List:
            c = _List_Amount(l)
            counter+=c
        return counter
    else:
        return 1 
```

无论列表的形状或大小如何，这都会返回列表中的项目数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T06:45:01.667

另一种选择（就是这个或观看错过的数学讲座......）

```
def getLength(element):
    if isinstance(element, list):
        return sum([getLength(i) for i in element])
    return 1 
```

这允许不同程度的*“多维”*（如果那是一个词）共存。

例如：

```
>>> getLength([[1,2],3,4])
4 
```

或者，允许不同的集合类型

```
def getLength(element):
    try:
        element.__iter__
        return sum([getLength(i) for i in element])
    except:
        return 1 
```

例如：

```
>>> getLength([ 1, 2, (1,3,4), {4:3} ])
6
>>> getLength(["cat","dog"])
2 
```

（请注意，虽然字符串是可迭代的，但它们没有 __iter__ 方法包装器，因此不会导致任何问题......）

# html - javascript：Firefox中的范围选择问题

> ID：15996205
> 
> 赞同：1
> 
> 时间：2013-04-14T05:56:20.617
> 
> 标签：html, firefox, dom, range, selection

我正面临一个问题 Firefox。

我正在尝试使用以下代码在内容可编辑的 div 中插入“br”标签。

此代码取自[Insert html at caret in a contenteditable div](https://stackoverflow.com/questions/6690752/insert-html-at-cursor-in-a-contenteditable-div)

```
function pasteHtmlAtCaret(html) {
var sel, range;
if (window.getSelection) {
    // IE9 and non-IE
    sel = window.getSelection();
    if (sel.getRangeAt && sel.rangeCount) {
        range = sel.getRangeAt(0);
        range.deleteContents();

        // Range.createContextualFragment() would be useful here but is
        // non-standard and not supported in all browsers (IE9, for one)
        var el = document.createElement("div");
        el.innerHTML = html;
        var frag = document.createDocumentFragment(), node, lastNode;
        while ( (node = el.firstChild) ) {
            lastNode = frag.appendChild(node);
        }
        range.insertNode(frag);

        // Preserve the selection
        if (lastNode) {
            range = range.cloneRange();
            range.setStartAfter(lastNode);
            range.collapse(true);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    }
} else if (document.selection && document.selection.type != "Control") {
    // IE < 9
    document.selection.createRange().pasteHTML(html);
   }
} 
```

该选择在除 Firefox 之外的所有浏览器中都可以正常工作。

在 Firefox 中，插入符号位于当前行的开头而不是下一行。但是当我开始输入时，字符会按预期插入下一行。

这里需要做什么才能将插入符号放在下一行的开头？

为了快速验证，您可以使用这个 jsfiddle [http://jsfiddle.net/jwvha/378/](http://jsfiddle.net/jwvha/378/) 您可以尝试插入“br”标签，您将在 Firefox 中看到我所指的问题。

# javascript - Javascript函数调用。转义字符串中的引号

> ID：15996208
> 
> 赞同：0
> 
> 时间：2013-04-14T05:57:01.360
> 
> 标签：javascript, string, dom-events, literals

好的，我的查询是，如何在 Javascript 中转义引号？我正在尝试使用下面的代码来提醒该消息。我知道它不起作用，因为它在函数调用中包含双**引号中的字符串**`onClick`并且它给出了语法错误。我如何使它工作？我的条件是我不能在函数调用中使用**单引号**作为参数。

```
 <html>
    <head>
    <script type="text/javascript">
    function litString(vals)
    {
    alert(vals);
    }
    </script>
    </head>
    <body>

    <?php echo "Just for a Test<br/>"; ?>

    <a href="#" onClick="litString("test one")"><h2>JS String Literal</h2></a>
    </body>
    </html> 
```

更新：

我的实际意图是使以下 PHP+JS 代码组合工作：

```
 echo '<li><a href="#" title="'.$res_bb['eng'].'" onClick=loadChap('.$res_bb['id'].','.$res_bb['chapters'].',"'.$res_bb['mal'].'")><font size="2">'.$res_bb['mal'].'</font></a></li>'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T05:59:29.527

你用反斜杠转义引号`\`。

```
<a href="#" onClick="litString(\"test one\")"><h2>JS String Literal</h2></a> 
```

或者您可以使用单引号：

```
<a href="#" onClick="litString('test one')"><h2>JS String Literal</h2></a> 
```

或者您可以在属性周围使用单引号，并在内部使用双引号：

```
<a href="#" onClick='litString("test one")'><h2>JS String Literal</h2></a> 
```

如果您正在回显字符串，它会变得有点棘手，因为您还必须处理 PHP 的引用。在这里，我通过转义单引号来生成上面的第二个版本。

```
echo '<li><a href="#" title="'.$res_bb['eng'].'" onClick="loadChap('.$res_bb['id'].','.$res_bb['chapters'].',\''.$res_bb['mal'].'\')"><font size="2">'.$res_bb['mal'].'</font></a></li>'; 
```

我刚刚用输入测试了这个：

```
$res_bb = array('eng'=> "Title", 'id'=> 10, 'chapters'=> 13, 'mal'=> "Foo bar"); 
```

输出是：

```
<li><a href="#" title="Title" onClick="loadChap(10,13,'Foo bar')"><font size="2">Foo bar</font></a></li> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T06:03:21.577

我建议使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)和`data-*`属性[来获得更清洁的方法](http://jsfiddle.net/SK2LQ/1/)：

```
<a href="#" id="someButton" data-litString="test one">...

<script>
  var link = document.getElementById('someButton');

  link.addEventListener('click', function () {
    var vals = this.getAttribute('data-litString');
    alert(vals);
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T05:59:17.423

对 HTML 属性使用单引号：

```
onClick='litString("test one")' 
```

但这并不是真正的解决方案。您需要以某种方式转义那些双引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T06:06:54.797

也许走这条路更好...

```
<li><a href="#" title="<?php echo $res_bb['eng']; ?>" onClick=loadChap("<?php echo $res_bb['id']; ?>", "<?php echo $res_bb['chapters']; ?>"," <?php echo $res_bb['mal']; ?>")><font size="2"><?php echo $res_bb['mal']; ?></font></a></li> 
```

# xml - 验证错误没有属性“XMLNS”

> ID：15996210
> 
> 赞同：2
> 
> 时间：2013-04-14T05:57:22.383
> 
> 标签：xml, xhtml, w3c-validation

我从 w3.org 验证中收到此错误

```
Error Line 2, Column 13: there is no attribute "XMLNS"

<html xmlns="http://www.w3.org/1999/xhtml" version="XHTML+RDFa 1.0"> 
```

您已在文档中使用了上述属性，但您使用的文档类型不支持该元素的该属性。此错误通常是由于对使用框架的文档错误使用“Strict”文档类型（例如，您必须使用“Transitional”文档类型来获取“target”属性）或使用供应商专有扩展（例如`marginheight`（这通常通过使用 CSS 来解决，以实现所需的效果）。

如果您使用的文档类型不支持元素本身，也可能会导致此错误，因为未定义的元素将没有支持的属性；在这种情况下，请参阅 element-undefined 错误消息以获取更多信息。

如何修复：检查元素和属性的拼写和大小写，（记住 XHTML 都是小写的）和/或检查它们在所选文档类型中是否都允许，和/或使用 CSS 代替此属性。如果您在使用该元素将 Flash 媒体合并到网页中时收到此错误，请参阅有关有效 Flash 的常见问题解答项目。

我该如何解决，请查看页面的源代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" version="XHTML+RDFa 1.0">
<head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:05:30.037

试试这个。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

</body>
</html> 
```

阅读[本文](http://www.w3schools.com/tags/tag_html.asp)以了解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:09:49.893

这里发生的是您将**HTML4** `<!doctype>`与**XHTML1** `<html>`混合在一起。

如果您想使用 XHTML1，必须使用以下内容`doctype`（`html`感谢 @1337holiday）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

如果您想要（现已过时的）HTML4，请使用：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html> 
```

如果您想要 HTML5（最新），请使用：

```
<!doctype html>
<html> 
```

# pdf - TCPDF 标头问题

> ID：15996211
> 
> 赞同：1
> 
> 时间：2013-04-14T05:57:30.670
> 
> 标签：pdf, tcpdf

我想用我自己的 html、页眉和页脚创建 pdf。

这是我尝试过的，但它不打印。它只是向我显示相同的 html

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
$my_header = '<div style="background:#2185E7;color:#fff;padding:5px;overflow:hidden;  width:786px;" class="blue_line">
<h3 style="margin-bottom: 0;    margin-top: 0;padding-left: 17px;text-align:  left; white-space: nowrap;float:left;">Royal Home Real Estate. RERA ORN: 2533</h3>
<p style="margin-bottom: 0; margin-top: 0; padding-right: 14px;text-align: right;   white- space: nowrap;float:right;" class="pdf_number">321 32111 4</p>
</div>';
$pdf->setHeaderData('', PDF_HEADER_LOGO_WIDTH, html_entity_decode($my_header, ENT_QUOTES, 'UTF-8'), ''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:47:42.123

您需要编写一个使用自己的 Header 方法扩展 TCPDF 的类，如下所示。（顺便说一句，如果您的内容最终全是白色，请更改`background:#2185E7;`为`background-color:#2185E7;`）您可能想要玩弄边距和定位。

```
class MYPDF extends TCPDF {

    //Page header
    public function Header() {
        // Logo
        $this->SetFont('helvetica', 12);
        $this->WriteHTML('<div style="background-color:orange">This is HTML!</div>');
    }
} 
```

有关更多详细信息，请参阅 TCPDF 网站或您的 TCPDF 示例文件夹中的 TCPDF 示例 3。

# ruby-on-rails - rspec before(:each) 使用 factorygirl 创建模型不起作用

> ID：15996213
> 
> 赞同：0
> 
> 时间：2013-04-14T05:58:11.213
> 
> 标签：ruby-on-rails, rspec

我正在使用 rspec 来测试我的模型方法。一切都很好，但突然间 factorygirl 构建不起作用。这是我的代码：

```
require File.dirname(__FILE__) + '/../spec_helper'

describe User do

  describe 'creation' do

    before(:each) do
      @user = FactoryGirl.build(:user)
    end

    it 'is invalid without an email address'  do
      user = @user
      user.email = nil
      user.should_not be_valid
    end

    it 'is invalid without a password' do
      user = @user
      user.password = nil
      user.should_not be_valid
    end

    it 'is invalid with an invalid email'  do
      user = @user
      user.email = "email@invalid"
      user.should_not be_valid
    end

    it 'is valid with a valid email and password'  do
      user = @user
      user.should be_valid
    end
  end

  describe "method" do

    before(:each) do
      @user = FactoryGirl.build(:user)
    end

    context "first_name" do

      it "should return the user's first name" do
        user = @user
        user.first_name.should == "User"
      end

    end

    context "count_of_invoices_by_year" do

      # @todo not sure how to check these since .count doesn't work
      it "should return the correct count of all invoices in the specified year" do
        # there are two invoices in 2013
        # user = @user
        # user.count_of_invoices_by_year("2013", :total).should == 2
      end

      it "should return the correct count of paid invoices in the specified year" do
        user = @user
        debugger
      end

      it "should return the correct count of sent invoices in the specified year" do

      end

    end

    context "sum_of_invoices_by_year" do

      it "should return the sum of the grand_totals of each of the invoices in the specified year" do
        # user.sum_of_invoices_by_year("2013", :total).should ==
      end

      it "should return the sum of the grand_totals of each of the paid invoices in the specified year" do

      end

      it "should return the sum of the grand_totals of each of the sent invoices in the specified year" do

      end

    end

  end

end 
```

所有其他@user 都已正确设置并且可以正常工作，但是当我来到这里时：

它“应该在指定年份返回正确的已付发票数量” do user = @user debugger end

factorygirl.build 不起作用。我试着把它放在每个人身上，包括直接在特定的测试中......但它不会设置为@user。我错过了什么？这是错误：

```
NameError Exception: undefined local variable or method `user' for #<RSpec::Core::Example:0x007fc9ec7d4890> 
```

当我尝试查看用户时会发生这种情况，因为@user 为零

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:40:42.773

结果发现用户实际上并不存在于测试用例中，除非您实际上尝试用它测试某些东西……这很奇怪。

```
 it "should return the user's first name" do
    user.first_name.should == "User"
  end 
```

这有用户在场，但这个：

```
 it "should return the user's first name" do
    debugger
  end 
```

调试器在此处显示 user = nil 后查看控制台。

# css - 在哪里可以找到开源 CSS 动画

> ID：15996217
> 
> 赞同：1
> 
> 时间：2013-04-14T05:59:01.023
> 
> 标签：css, animation

任何人都知道我在哪里可以找到可以应用于我的网站的开源 CSS 动画。

我用 CSS3 玩过很多次，但动画用的不多，在我尝试自己构建一个开源社区之前，我想看看开源社区提供了什么。因为说实话，我觉得这很可怕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:00:48.170

我喜欢这些，它们非常好：

[http://daneden.me/animate/](http://daneden.me/animate/)

我的建议是一次拿一个关键帧。它只是以进度百分比（关键帧）表示的动画不同部分的样式。

# assembly - MIPS - 从用户输入将整数存储在数组中

> ID：15996219
> 
> 赞同：8
> 
> 时间：2013-04-14T05:59:09.917
> 
> 标签：assembly, mips

我正在尝试将用户输入存储到一个数组中，但是当我使用 sw 时，我收到一个错误“存储地址未与字绑定对齐”。我的目标是从数组中读取 10 个整数，但是在输入第一个数字后，我在 sw 命令处收到错误。我不知道我做错了什么我花了几个小时试图弄清楚。任何帮助将不胜感激并标记为有用。

```
 .data 

mess: .asciiz " Enter 10 numbers to be stored in the array. "
array: .space 40    #10 element integer array
    .globl main
    .text 
main:
    jal read
    b done
read:
    la $t0, 0   #count variable
    b readLoop
    jr $ra

readLoop:
    beq $t0, 40, read   #branch if equal to 40, 10 items
    li $v0, 4       #Print string
    la $a0, mess        #load prompt
    syscall
    li $v0, 5       #read int
    syscall 
    sw $v0, array       #store input in array ERROR HERE
    addi  $t0, $t0, 4   #add by 4 to count
    b readLoop
print:

done: 
```

这对我有用。我不知道为什么它在上面不起作用

```
 .data 
list:  .space 16
.globl main
.text

main:

    li $v0, 5
    syscall
    sw $v0, list

    move $a0, $v0
    li $v0, 1
    syscall 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-28T08:00:09.427

在为数据段中的字符串分配空间之前，尝试为数组分配空间：

```
 array: .space 40    #10 element integer array
  mess: .asciiz " Enter 10 numbers to be stored in the array. " 
```

如果首先分配字符串，则数组可能从不能被 4 整除的地址开始并导致字对齐错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:39:32.290

*   商店应该是

    sw $v0, 数组($t0)

*   替换`la $t0, 0`为`li $t0, 0`

*   设置上面的数组`mess`

此外，当您达到 10 个项目时，您重新开始读取并覆盖以前的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-09T18:11:00.827

**正确的数组输入代码**

```
.data
    myarray:.space 40    
    st:.asciiz "Enter the 10 Elements"

.text    
    li $v0,4
    la $a0,st
    syscall
    jal fun
    li $v0,10
    syscall

fun:        
    li $v0,5
    syscall
    beq $t0,40,exit
    sw $v0,myarray($t0)
    add $t0,$t0,4
    j fun

exit:
    jr $ra 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T06:03:45.173

试试这个：

```
...
.p2align 2
array: .space 40    #10 element integer array
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-22T18:21:55.050

下面的代码将从用户的输入中读取他们输入的数量，如果他们想输入 10 个整数，初始输入必须是 10。然后它会提示用户一次填写一个整数。将打印初始数组之后。

我的一个项目要求我具有排序功能，以便在交换代码的第二部分中实现以实现升序排序。任何澄清与我联系。

```
.data 
    inputLabel: .asciiz "Enter the amount of integers in the array: "
        myArray: .space 100

    arrayToBeSorted: .asciiz "Enter the array to be sorted one at a time: "
    nextLine: .asciiz "\n"
    original: .asciiz "You have entered: "
    result: .asciiz "Here is the sorted list in ascending order: "

.text 

.globl main

main: 
        #print input label
    li $v0, 4
    la $a0, inputLabel
    syscall 

        #read amount of integers to be inputed.
    li $v0, 5
    syscall
    addi $t0, $v0, 0

        #put input into $t0, number of integers in array

    addi $t7, $t0, 0
    li $t4, 4
    #mul $t5, $t0, $t4

        #ask user to input numbers of the arrayToBeSorted
    li $v0, 4
    la $a0, arrayToBeSorted
    syscall

    li $t6, 0 
    #used to index array at insertion

    j loop0

        #read the numbers 
    loop0:         #loop successfully reads in n integers and stores them in a list

            #check if 0 == input;
        beq $t7, 0, next
            #take in user input
        li $v0, 5
        syscall
            #store user input into list
        sw $v0, myArray($t6)
            #add 4 to the index of the list
        addi $t6, $t6, 4
            #sub 1 from the number of items to add to list
        addi $t7, $t7, -1
            #loop
        j loop0

    next: #success print
        move $t0, $t6
        li $v0, 4
        la $a0, original
        syscall
        j while 

    while: #printer success

        #print new line
        li $v0, 4
        la $a0, nextLine
        syscall

        beq $t6, $zero, swap 
            #dif i is 0 then exit
        lw $t1, myArray($t3)
            #load in my array at index i

        #printing int at myArray[i]
        li $v0, 1
        move $a0, $t1
        syscall  

        addi $t3, $t3, 4
        addi $t6, $t6, -4

        j while 

swap:

    la $t4, myArray 
    #loads A[0] myArray to $t4

    la $t1, myArray 
    #loads A[1] array to $t1

    addi $t1,$t1,4 
    #add 4 to $t1, save to $t1

    la $t8,myArray 
    #loads A[n] array to $t8

    add $t8,$t0,$t8 
    #add $t8 to $t0, save to $t8

    la $t9,myArray

    add $t9,$t0,$t9 
    #add $t9 to $t0, save to $t9

    addi $t9,$t9,-4 
    #subtracts 4 from $t9, save to $t9 A[n-1]

loop:

    lw $t2,($t4)
    #load A[0] input into $t2

    lw $t3,($t1) 
    #load A[1] input into $t3

    blt $t2,$t3,loop1 
    # dif $t2 < $t3, A[0]<A[1]go to loops

    sw $t3,($t4) 
    #store $t3 in $t4 A[1] = A[0]

    sw $t2,($t1) 
    #store $t2 in $t1 A[0] = A[1]

loop1:

    addi $t1,$t1,4 
    #add 4 to $t1, save to $t1 A[1] + 4 becomes A[2]
    blt $t1,$t8,loop 
    #dif $t1<$t8, go to loop A[2] < A[n]
    addi $t4,$t4,4 
    #add 4 to $t4, save to $t4
    move $t1,$t4
    addi $t1,$t1,4 
    #add 4 to $t1, save to $t1
    blt $t4,$t9,loop 
    #idf $t4<$t9, to go loop

print:

    la $a1,myArray 
    #loads myArray to $a1
    la $a0, result
    #loads output to $a0
    li $v0, 4 
    #loads 4 into #v0
    syscall
    la $a0, nextLine 
    #loads nextLine into $a0
    li $v0, 4 
    #loads 4 into $v0
    syscall

loop2:

    blez $t0, done 
    #if $t0<=0, go to done
    li $v0, 1 
    #loads 1 into $v0
    lw $a0, 0($a1) 
    #load an inout into $a0
    syscall
    la $a0, nextLine 
    #loads nextLine into $a0
    li $v0, 4 
    #loads 4 into $v0
    syscall
    addi $a1, $a1, 4 
    #add 4 to $a1, save to $a1
    addi $t0, $t0, -4 
    #subtracts 4 from 
    #t0, save to $t0
j loop2

    done:
    li $v0, 10
    syscall
    j done 
```

# python - 这种交换的实现在 Python 中是如何工作的？

> ID：15996220
> 
> 赞同：0
> 
> 时间：2013-04-14T05:59:15.243
> 
> 标签：python, swap

```
def fibonacci(num):
    a=0
    b=1
    for i in range(num):
        a, b=b, a+b
    print a 
```

循环内的线是如何工作的？不知何故 a & b 的价值观发生了变化，似乎可以理解..

编辑：出于某种原因，我感到困惑，认为 b=b 的中间 exp 是新东西......没读好......它真的是 (a,b) = (b, a+b) 这是python中交换的基本形式（：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T06:02:19.403

`b, a+b`创建一个元组

这个元组被解包回`a`并`b`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T06:03:49.473

这一行`a, b = b, a+b`等价于`(a, b) = (b, a+b)`，它是一个元组赋值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T06:04:09.713

有问题的行可以更清楚地写成（通过右侧的元组打包和左侧的序列解包）：

```
(a, b) = (b, a + b) 
```

由于对 a 和 b 的分配是并行执行的，因此这与以下内容完全相同：

```
new_a = b
new_b = a + b
a     = new_a
b     = new_b 
```

# ios - 日志未出现在 Web Inspector 中

> ID：15996224
> 
> 赞同：1
> 
> 时间：2013-04-14T05:59:44.970
> 
> 标签：ios, objective-c, logging, trigger.io, web-inspector

当我测试时，`ForgeLog`s 和s都没有出现在我的 Safari Web Inspector 中。`NSLog`我做错了什么还是故意的？

```
[ForgeLog d:@"Playing file at..."]; 
```

编辑：这是上下文的其余代码。（这次使用`NSLog`.）

```
#import "audio_API.h"

static AVAudioPlayer* player = nil;

@implementation audio_API

+ (void)play:(ForgeTask*)task {

    // parse the file url from the file object
    ForgeFile* file = [[ForgeFile alloc] initWithFile:[task.params objectForKey:@"file"]];
    NSString* fileURL = [file url];

    NSLog(@"Playing file at %@", fileURL);

    NSURL* url = [[NSBundle mainBundle] URLForResource:fileURL withExtension:@"m4a"];

    // TESTING
    //url = [[NSBundle mainBundle] URLForResource:@"seconds" withExtension:@"m4a"];
    // END TESTING

    NSAssert(url, @"URL is invalid.");

    // create the player
    NSError* error = nil;
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    if(!player)
    {
        NSLog(@"Error creating player: %@", error);
    };

    [player play];

    [task success:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:38:31.473

`ForgeLog`并且`NSLog`不要登录到 Web 检查器控制台。开发插件时，可以在 XCode 中看到此日志输出，当使用插件作为应用程序的一部分时，此输出将出现在 Toolkit 或命令行工具输出中。

如果您想通过您的插件在 Web 检查器中显示某些内容，您可能最好通过事件从本机代码与 JavaScript 数据进行通信：http: [//docs.trigger.io/en/v1.4/modules/native /javascript_events.html](http://docs.trigger.io/en/v1.4/modules/native/javascript_events.html)并`console.log`在事件侦听器中使用。

# ruby-on-rails - 从 rails 数组中获取特定值

> ID：15996225
> 
> 赞同：0
> 
> 时间：2013-04-14T06:00:05.763
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, loops

我想我有一个正确的轨道阵列？

```
@lv = {'apple' => ['tags', 'red'], 'name' => ['more tags', 'taggers']} 
```

我想知道如何通过循环显示某些部分。例如，我将如何只显示`apple`and `name`？

```
<% @lv.each do |me| %>
   <%= me %>
<% end %> 
```

这只会显示整个 @lv 消息，而不仅仅是显示`apple`and `name`。然后我希望能够只获取特定值的标记值，所以说如果我需要获取 的标记值`apple`，它应该只显示`tags`以及`red`如何使用 rails 执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:06:53.673

你的`@lv`变量是一个哈希，所以 using`.each`只会给你一个组合的键值对作为块参数（这就是`me`最终的结果）。相反，使用`each_pair`; 这样，您可以获得键和值的分隔变量。像这样：

```
<% @lv.each_pair do |key, value| %>
    <%= key %>
<% end %> 
```

**编辑**

这也是对您在问题中的评论的回应。`key`will 最终只是你的哈希的, `apple`or `name`, 一部分。该`value`参数是键所指向的任何内容，在这种情况下是实际的项目数组（我认为这就是您所说的标签）。例如，您的哈希包含两个键值对，当我们迭代它们时，在第一个循环中`key`=`apple`和`value`= `['tags', 'red']`。要输出该值数组，您可以使用几种不同的方式：

循环遍历标签数组

```
<% @lv.each_pair do |key, value| %>
    <%= key %>
    <%= value.each do |tag| %>
        <%= tag %>
    <%= end %>
<% end %> 
```

作为逗号分隔的字符串：

```
....looping code
    <%= value.join(", ") %> 
```

或者直接以数组表示法将其吐出：

```
....looping code
    <%= value %> 
```

或者，如果您只想要值数组中的特定元素，那么是的，您可以这样做`value[0]`，或者`value[1]`...等。

让我知道这是否不是您要问的。

# mysql - NATURAL JOIN vs WHERE IN 子句

> ID：15996226
> 
> 赞同：11
> 
> 时间：2013-04-14T06:00:16.660
> 
> 标签：mysql, sql

最近，我处理了从 MySQL 数据库中检索包含数千条记录的大量数据。由于是第一次处理这么大的数据集，所以没有考虑SQL语句的效率。问题来了。

以下是数据库的表（它只是一个课程系统的简单数据库模型）：

课程：

```
+-----------+---------------------+------+-----+---------+----------------+
| Field     | Type                | Null | Key | Default | Extra          |
+-----------+---------------------+------+-----+---------+----------------+
| course_id | int(10) unsigned    | NO   | PRI | NULL    | auto_increment |
| name      | varchar(20)         | NO   |     | NULL    |                |
| lecturer  | varchar(20)         | NO   |     | NULL    |                |
| credit    | float               | NO   |     | NULL    |                |
| week_from | tinyint(3) unsigned | NO   |     | NULL    |                |
| week_to   | tinyint(3) unsigned | NO   |     | NULL    |                |
+-----------+---------------------+------+-----+---------+----------------+ 
```

选择：

```
+-----------+------------------+------+-----+---------+----------------+
| Field     | Type             | Null | Key | Default | Extra          |
+-----------+------------------+------+-----+---------+----------------+
| select_id | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| card_no   | int(10) unsigned | NO   |     | NULL    |                |
| course_id | int(10) unsigned | NO   |     | NULL    |                |
| term      | varchar(7)       | NO   |     | NULL    |                |
+-----------+------------------+------+-----+---------+----------------+ 
```

当我想检索一个学生选择的所有课程（带有他的卡号）时，SQL 语句是

```
SELECT course_id, name, lecturer, credit, week_from, week_to
FROM `course` WHERE course_id IN (
    SELECT course_id FROM `select` WHERE card_no=<student's card number>
); 
```

但是，它速度极慢，很长一段时间都没有返回任何东西。所以我把`WHERE IN`子句改成了`NATURAL JOIN`. 这是SQL，

```
SELECT course_id, name, lecturer, credit, week_from, week_to
FROM `select` NATURAL JOIN `course`
WHERE card_no=<student's card number>; 
```

它立即返回并且工作正常！

所以我的问题是：

*   `NATURAL JOIN`和`WHERE IN`子句有什么区别？
*   是什么让他们表现不同？（这可能是因为我没有设置任何东西`INDEX`吗？）
*   我们什么时候使用`NATURAL JOIN`or `WHERE IN`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T06:04:50.820

理论上这两个查询是等价的。我认为这只是 MySQL 查询优化器的糟糕实现导致 JOIN 比 WHERE IN 更有效。所以我总是使用JOIN。

您是否查看过 EXPLAIN 的两个查询的输出？这是我得到的`WHERE IN`：

```
+----+--------------------+-------------------+----------------+-------------------+---------+---------+------------+---------+--------------------------+
|  1 | PRIMARY            | t_users           | ALL            | NULL              | NULL    | NULL    | NULL       | 2458304 | Using where              |
|  2 | DEPENDENT SUBQUERY | t_user_attributes | index_subquery | PRIMARY,attribute | PRIMARY | 13      | func,const |       7 | Using index; Using where |
+----+--------------------+-------------------+----------------+-------------------+---------+---------+------------+---------+--------------------------+ 
```

它显然是在执行子查询，然后遍历主表中的每一行测试它是否在——它不使用索引。对于 JOIN 我得到：

```
+----+-------------+-------------------+--------+---------------------+-----------+---------+---------------------------------------+------+-------------+
| id | select_type | table             | type   | possible_keys       | key       | key_len | ref                                   | rows | Extra       |
+----+-------------+-------------------+--------+---------------------+-----------+---------+---------------------------------------+------+-------------+
|  1 | SIMPLE      | t_user_attributes | ref    | PRIMARY,attribute   | attribute | 1       | const                                 |   15 | Using where |
|  1 | SIMPLE      | t_users           | eq_ref | username,username_2 | username  | 12      | bbodb_test.t_user_attributes.username |    1 |             |
+----+-------------+-------------------+--------+---------------------+-----------+---------+---------------------------------------+------+-------------+ 
```

现在它使用索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T06:24:03.447

尝试这个：

```
SELECT course_id, name, lecturer, credit, week_from, week_to
FROM `course` c
WHERE c.course_id IN (
    SELECT s.course_id 
    FROM `select` s
    WHERE card_no=<student's card number>
    AND   c.course_id = s.course_id
); 
```

注意在子查询中添加了 AND 子句。这被称为关联子查询，因为它关联了两个 course_id，就像 NATURAL JOIN 一样。

我认为 Barmar 的指数解释是正确的。

# java - 与 Class.forName() 松耦合

> ID：15996229
> 
> 赞同：5
> 
> 时间：2013-04-14T06:00:31.473
> 
> 标签：java, reflection, loose-coupling

```
interface Bank {
    void connect();
}

class SBI implements Bank {
    static{
        System.out.println("Hello from SBI static");
    }   
    public void connect() {
        System.out.println("Connected to SBI");
    }
}

class LooseCouplingTest {
    public static void main(String... args)throws Exception {
        String className = args[0];
        Class.forName(className);
    }
} 
```

上述代码的输出似乎是
`Hello from SBI static`

我应该在我的代码和 Y 中添加什么来`also`打印语句
`Connected to SBI`

非常感谢详细的解释

PS菜鸟在这里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T06:07:32.733

您必须创建对象的新实例（使用`Class#newInstance()`），将其转换为您想要的类型（在您的场景中`SBI`），然后调用它。

**工作代码：**

```
public class LooseCouplingTest {
    public static void main(String... args)throws Exception {
        String className = args[0];
        Class<?> clazz = Class.forName(className);
        Object obj = clazz.newInstance();
        SBI mySBI = (SBI) obj;
        mySBI.connect();
    }
} 
```

**解释：**

*   `Class.forName("pkg.SBI")`获取对象中`pkg.SBI`类的引用`clazz`。
*   由于`clazz`持有对 的引用`SBI`，调用`clazz.newInstance();`与调用相同：`new SBI();`。
*   调用`clazz.newInstance();`之后，变量`obj`将收到一个`SBI`实例。
*   当你想调用一个`SBI`方法并且`obj`'s 的类型是`Object`（这是`newInstance()`方法的返回类型）你必须将它转换为`SBI`然后才调用`connect()`.

## 使用 Java 的反射 API：

如果你想走得更远，甚至不做演员表（这种方式`LooseCouplingTest`永远不需要 import `SBI`），你可以使用**[Java 的 Reflection API](http://www.programmerinterview.com/index.php/java-questions/java-reflection-example/)**来调用该`connect()`方法。

**这是它的工作代码：**

```
public class LooseCouplingTest {
    public static void main(String... args) throws Exception {
        String className = args[0];
        Class<?> clazz = Class.forName(className);
        Object obj = clazz.newInstance();
        java.lang.reflect.Method connect = clazz.getMethod("connect");
        connect.invoke(obj);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:08:42.863

`Class.forName()`加载类。加载类的一部分是执行静态初始化块。这就是为什么您会看到打印的“Hello from SBI static”（该`static { ... }`部分是静态初始化程序块）。

要使“已连接到 SBI”出现，您必须创建该类的一个实例并`connect()`在其上调用该方法：

```
Class<? extends Bank> bankClass = (Class<? extends Bank>)Class.forName(className);
Bank bank = bankClass.newInstance();
bank.connect(); 
```

# windows-phone-8 - WindowsPhone 8 （跳转到另一个应用程序）FindPackagesForCurrentPublisher

> ID：15996230
> 
> 赞同：0
> 
> 时间：2013-04-14T06:00:37.740
> 
> 标签：windows-phone-8

```
string ProductId = "{23e1505b-9383-4ed4-9195-da23a3442820}";

IEnumerable<Package> app = Windows.Phone.Management.Deployment.InstallationManager.FindPackagesForCurrentPublisher();
            app.First().Launch(ProductId); 
```

这是另一个应用程序

```
WMAppManifest.xml(App xmlns="" ProductID="{23e1505b-9383-4ed4-9195-da23a3442820}" 
Title="@TitleStrings\AppResLib.dll,-100" RuntimeType="Silverlight" Version="3.5.1.17" 
Genre="apps.normal" Author="Tencent WeChat Limited" Description="Wed Feb 20 17:37:10 2013, 
ChannelID 70" Publisher="Tencent WeChat Limited" IsBeta="false">) 
```

当我触发事件时，它并没有被`Launch (ProductId)`我调试，谁能告诉我。没有运行这一步。如何跳转到使用此方法的另一个应用程序...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:35:44.067

`Launch()`不采用您要启动的应用程序的产品 ID。相反，它需要一个查询字符串，该字符串将传递给您正在启动的应用程序，通常带有页面引用。

可能发生的情况是，第一个应用程序`app`实际上是当前应用程序——正在调用的应用程序。应用程序从应用程序内部启动本身没有任何意义，因此什么也不会发生。

而不是调用`First()`，您应该进行过滤`app`，以便您可以选择具有匹配产品 ID 的那个。查看[Package.ID](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.id.aspx)以获取有关如何执行此操作的详细信息。

# php - Symfony 1.4 表单：包含从关系到表单的数据

> ID：15996236
> 
> 赞同：0
> 
> 时间：2013-04-14T06:01:07.337
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我有以下 2 个模型 OrderDetail 和 Item 的示例模式，多对一关系：

```
OrderDetail:
  columns:
    invoice_id: { type: integer, notnull: true }
    item_id: { type: integer, notnull: true }
    quantity: { type: integer, notnull: true }
    transaction_price: { type: integer }
    currency: { type: string(50), default: peso }
  relations:
    Invoice: { type: one, local: invoice_id, foreign: invoice_id }
    Item: { type: one, local: item_id , foreign: item_id }
  indexes:
    invoice_to_item:
      fields: [item_id, invoice_id]
      type: unique

Item:
  actAs: { Timestampable: ~, SoftDelete: ~ }
  columns:
    item_id: { type: integer, autoincrement: true, primary: true }
    item_name: { type: string(100), notnull: true }
    description: { type: text, notnull: true }
    part_number: { type: string(50) }
    size: { type: string(50) }
    unit: { type: string(10) }
    in_stock: { type: integer, notnull: true }
    in_transit: { type: integer, notnull: true }
    released: { type: integer, notnull: true }
    borrowed: { type: integer, notnull: true }
    borrower_name: { type: string }
    item_type_id: { type: integer, notnull: true }
  relations:
    OrderDetails: { type: many, class: OrderDetail, local: item_id, foreign: item_id }
    Prices: { type: many, class: Price, local: item_id, foreign: item_id } 
```

在我的表单中，我想包含来自 Item 表的信息，例如`item_name`和`in_stock`。我只想显示与我的表单相关的 Item 表中的数据。为了清晰和组织，我想将此信息包含在我的表单对象中。我希望能够以我的形式做这样的事情：

```
echo $form[$number]['Item']['part_number']->getValue()
// where $number is the index of the OrderDetail in the form and key 'Item' contains data for the Item related to this OrderDetail. 
```

我尝试在 OrderDetail 中嵌入 Item 关系，例如：

```
class OrderDetailForm extends BaseOrderDetailForm {

    public function configure() {
        // some config here...

        $this->embedRelation('Item');
    }
} 
```

问题是当我保存表单时，**Item 对象也在被验证和保存**。我只是将这些信息用于显示目的。这是我希望表单如何以及我希望做什么的粗略示例：

```
OrderDetail: 1
Item: Headset
In Stock: 5pcs
Quantity: [input field here that can be changed by the user] 
```

如果有任何不清楚的地方，请告诉我。另外，如果您能提出更好的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:55:23.320

如果 OrderDetailForms 嵌入在 InvoiceForm 中，并且您希望从中访问 Item 对象。然后我建议你在你的模板中使用这样的东西：

```
// apps\myApp\modules\myModule\templates\editSuccess.php
$orderDetailForms = $invoiceForm->getEmbeddedForms();

foreach ($orderDetailForms as $key => $form) {
    $item = $form->getObject()->getItem();

    echo 'Item name: ' . $item->getItemName() . '<br />';
    echo 'In stock: ' . $item->getInStock() . '<br />';
    echo $form;
} 
```

这里要做的是确保在您进行查询时检索您的 Item 对象以及 OrderDetail 对象。因为该行 ($form->getObject()->getItem()) 每次都会有效地执行数据库查询。

# python - 如果可能，如何将 Python dict 转换为 JSON 作为列表

> ID：15996239
> 
> 赞同：5
> 
> 时间：2013-04-14T06:01:51.967
> 
> 标签：python, json

我正在尝试使用 .将我的 Python 对象序列化为 JSON `json.dumps`。如果你序列化一个`dict`using`json.dumps`它显然会被序列化为一个 JSON 字典`{..}`；如果您序列化 a`list`或 a `tuple`，它将是一个 JSON 数组。

如果可能的话，我想知道是否有任何方法可以轻松地将 Python 序列化为`dict`JSON `list`。如果可能的话，我的意思是如果键从 0 开始并按顺序排列，例如：

```
{0:'data',1:'data',2:'data} 
```

上面将被序列化为 JSON 为：`'{"0": "data", "1": "data", "2": "data"}'`，但我希望它被序列化，`['data','data','data']`因为键从 0 开始并按顺序排列。

我的理由是因为我有很多从 PHP 序列化的 JSON 数据，其中 PHP 数组有键，如果键按上述顺序排列，PHP 的`json.encode`使用数组，如果它们以任何其他方式键入，它们被序列化作为 JSON 字典。我希望我的 JSON 序列化匹配我的 PHP 和 Python 代码。不幸的是，就我而言，更改 PHP 代码不是一种选择。

有什么建议么？我找到的唯一解决方案是编写自己的函数来遍历并验证每个 python 字典，看看它是否可以先转换为`list`before `json.dumps`。

**编辑**：我正在序列化的这个对象可以是 a`list`或 a `dict`，它内部也可以有额外的 dicts 和列表，等等（嵌套）。我想知道是否有任何“简单”的方法可以做到这一点，否则我相信我可以自己编写一个递归解决方案。但是使用现有代码来避免更多错误总是更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:09:21.957

您可以将字典转换为元组列表，然后对其进行排序，因为字典项不一定按您希望的顺序出现：

```
items = sorted(d.items(), key=lambda item: item[0])
values = [item[1] for item in items]
json_dict = json.dumps(values) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:32:44.523

我不知道没有递归的解决方案......虽然您可以从`encode`您的 custom 方法内部调用您的转换器`Encoder`，但这只会增加不必要的复杂性。

```
In [1]: import json

In [2]: d = {"0": "data0", "1": "data1", "2": {"0": "data0", "1": "data1", "2": "data2"}}

In [3]: def convert(obj):
   ...:     if isinstance(obj, (list, tuple)):
   ...:         return [convert(i) for i in obj]
   ...:     elif isinstance(obj, dict):
   ...:         _, values = zip(*sorted(obj.items()))  
   ...:         return convert(values)
   ...:     return obj

In [4]: json.dumps(convert(d))
Out[4]: '["data0", "data1", ["data0", "data1", "data2"]]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:18:29.453

通常，您可以`json.JSONEncoder`创建自己的自定义 JSON 序列化程序的子类，但这不允许您覆盖内置对象类型。

如果您创建自己的`dictlist`不扩展的自定义对象（或任何您想调用的对象），`dict`或者`list`您应该能够覆盖该`JSONEncoder.default`方法以创建您自己的自定义 JSON 序列化程序。

无论您是创建自定义 JSON 序列化程序还是`dict`用列表递归替换您的特殊实例，您都需要一个接受 a`dict`并根据需要返回 a`list`或 a的函数`dict`。

这是一个实现：

```
def convert_to_list(obj):
    obj_list = []
    for i in range(len(obj)):
        if i not in obj:
            return obj  # Return original dict if not an ordered list
        obj_list.append(obj[i])
    return obj_list 
```

# error-correction - 单字节纠错

> ID：15996240
> 
> 赞同：3
> 
> 时间：2013-04-14T06:01:59.030
> 
> 标签：error-correction, hamming-code, reed-solomon

200 字节的消息有一个随机字节损坏。

修复损坏字节的最有效方法是什么？

[Hamming(255,247)](http://en.wikipedia.org/wiki/Hamming_code)码有 8 个字节的开销，但实现起来很简单。

[Reed-Solomon 纠错](http://en.wikipedia.org/wiki/Reed%E2%80%93Solomon_error_correction)有 2 个字节的开销，但实现起来很复杂。

有没有我忽略的更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T05:57:52.667

我找到了一篇关于这种情况的完美方法的论文——两个字节的开销，易于实现。这是代码：

```
// Single-byte error correction for messages <255 bytes long
//  using two check bytes. Based on "CA-based byte error-correcting code"
//  by Chowdhury et al.
//
// rmmh 2013

uint8_t lfsr(uint8_t x) {
    return (x >> 1) ^ (-(x&1) & 0x8E);
}

void eccComputeChecks(uint8_t *data, int data_len, uint8_t *out_c0, uint8_t *out_c1) {
    uint8_t c0 = 0; // parity: m_0 ^ m_1 ^ ... ^ m_n-1
    uint8_t c1 = 0; // lfsr: f^n-1(m_0) ^ f^n(m_1) ^ ... ^ f^0(m_n-1)
    for (int i = 0; i < data_len; ++i) {
        c0 ^= data[i];
        c1 = lfsr(c1 ^ data[i]);
    }
    *out_c0 = c0;
    *out_c1 = c1;
}

void eccEncode(uint8_t *data, int data_len, uint8_t check[2]) {;
    eccComputeChecks(data, data_len, &check[0], &check[1]);
}

bool eccDecode(uint8_t *data, int data_len, uint8_t check[2]) {
    uint8_t s0, s1;
    eccComputeChecks(data, data_len, &s0, &s1);
    s0 ^= check[0];
    s1 ^= check[1];
    if (s0 && s1) {
        int error_index = data_len - 255;
        while (s1 != s0) {  // find i st s1 = lfsr^i(s0) 
            s1 = lfsr(s1);
            error_index++;
        }
        if (error_index < 0 || error_index >= data_len) {
            // multi-byte error?
            return false;
        }
        data[error_index] ^= s0;
    } else if (s0 || s1) {
        // parity error
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-21T04:13:21.277

使用 Reed Solomon 来纠正单个字节错误不会那么复杂。使用形式的生成多项式（使用⊕表示异或）

```
g(x) = (x ⊕ 1)(x ⊕ 2) = x^2 + 3x + 2. 
```

像往常一样对消息进行编码。

对于解码，以正常方式生成两个校正子 S(0) 和 S(1)。

```
if(S(0) != 0){
    error value = S(0)
    error location = log2(S(1)/S(0))
} 
```

错误位置从右到左（0 == 最右边的字节）。如果缩短的代码和位置超出范围，则检测到不可纠正的错误。

# ruby-on-rails - 如何在使用omniauth-twitter 注册时设置email_required = false

> ID：15996244
> 
> 赞同：0
> 
> 时间：2013-04-14T06:02:33.580
> 
> 标签：ruby-on-rails, devise, omniauth, twitter-oauth

在 Rails 3.2 应用程序中，我在用户模型上使用 Devise，带有omniauth-twitter。一个用户有许多身份验证。

登录是通过电子邮件 + 密码，或通过 Twitter。

我正在尝试修改 email_required 方法，以便在用户注册 Twitter 时不需要电子邮件（Twitter 不会在其电子邮件回复中提供电子邮件）。然后，用户将被带到一个设置屏幕，他需要在其中设置他的电子邮件。

我无法确定我的情况应该是什么。我在想类似的东西

```
def email_required?
  if user.sign_in_count == 1 && self.authentications.first.provider == "twitter"
    false 
  else
    super
  end
end 
```

但是(1) Authentication 记录是在这个验证通过时建立但没有创建的，所以不可用；(2) 我希望在创建用户后立即需要电子邮件（即，登录数可能仍为 1）

另一种选择可能是检查 Twitter 参数是否在会话中，例如（伪代码）

```
def email_required?
  if session["devise.twitter_data"]   
    false
  else
    super
  end
end 
```

但从模型访问会话似乎不正确。

将不胜感激任何建议或想法，我觉得我忽略了一些明显的东西！

# windows - Windows 7 ping 一般失败

> ID：15996247
> 
> 赞同：0
> 
> 时间：2013-04-14T06:03:01.500
> 
> 标签：windows, networking, ping

我试图了解 ping 命令的行为。尝试在 Windows 7 PC 上进行实验。在命令提示符下，我发出了以下命令：

```
ping <some hostname> -l 4096 
```

我得到的输出是

```
Pinging <some hostname> [xx.xx.xxx.xx] with 4096 bytes of data:
General failure.
General failure.
General failure.
General failure.

Ping statistics for xx.xx.xxx.xx:
    Packets: Sent = 4, Received = 0, Lost = 4 (100% loss), 
```

但是，`ping <same hostname> -l 32`工作得很好。

所以我的问题是为什么服务器对不同的数据包大小有不同的行为？和挫折有关系吗？还是我的本地 ping 程序默认配置为不发送*更大的*数据包？

请注意，-l 标志允许您指定 ping req 的缓冲区大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-13T11:41:53.763

您的 ping 数据包可能大于本地媒体的 MTU，并且它位于不允许分段的网络类型上。以太网 IPv6 就是这样一种配置。

# .net - 将 List(Of HtmlElement) 转换为 HtmlElementCollection 类

> ID：15996248
> 
> 赞同：1
> 
> 时间：2013-04-14T06:03:04.867
> 
> 标签：.net, vb.net, winforms

这是我的代码..

```
Private Function GetElement(ByVal hec As ICollection, ByVal strAttName As String, ByVal strAttVal As String) As List(Of HtmlElement)
    Dim hecFilter As New List(Of HtmlElement)
    Dim str As String
    For Each El As HtmlElement In hec
        str = El.GetAttribute(strAttName)
        If (Not IsNothing(str) AndAlso str.Trim() = strAttVal) Then
            hecFilter.Add(El)
        End If
    Next
    Return hecFilter
End Function 
```

它会回报我`List(Of HtmlElement)`

现在我想把它转换成`HtmlElementCollection` `class`.

试图做到这一点

```
Private Function GetElement(ByVal hec As HtmlElementCollection, ByVal strAttName As String, ByVal strAttVal As String) As HtmlElementCollection
    Dim hecFilter As New List(Of HtmlElement)
    Dim str As String
    For Each El As HtmlElement In hec
        str = El.GetAttribute(strAttName)
        If (Not IsNothing(str) AndAlso str.Trim() = strAttVal) Then
            hecFilter.Add(El)
        End If
    Next
    Return TryCast(hecFilter, HtmlElementCollection)
End Function 
```

它显示一个错误：

> “System.Collections.Generic.List(Of System.Windows.Forms.HtmlElement)”类型的值无法转换为“System.Windows.Forms.HtmlElementCollection”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:49:01.287

`HtmlElementCollection` 没有的[工具](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelementcollection.aspx)`ICollection`，[也](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)[没有](http://msdn.microsoft.com/en-us/library/system.collections.icollection.aspx) ..`Add()``IEnumerable`

我猜构造函数接受元素是`internal`. 因此威胁此集合为只读。

# css - 如何制作一个通过单击选择选项的表单元素？

> ID：15996250
> 
> 赞同：0
> 
> 时间：2013-04-14T06:03:44.570
> 
> 标签：css, forms, html, radio-button

我想要一个表单元素，例如下拉框或类似的东西，它可以一次显示所有项目，类似于单选按钮，但旁边没有圆圈。例如，这是我制作的我想要的快速图片

![在此处输入图像描述](https://i.stack.imgur.com/llCy8.png)

我已经知道如何制作 div 和诸如此类的东西，我只需要知道如何点击它，它就会自动变成黄色并被“选中”。如果它可以是免费的 JS，那将有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:41:15.777

您仍然可以使用单选按钮，但将它们包装到标签中并隐藏输入本身。[这是jsFiddle](http://jsfiddle.net/Klaster_1/xTG6T/1/)的一个示例。

HTML：

```
<label>
    <input type="radio" name="item">
    <img src="http://lorempixel.com/140/140/abstract">
    <div>Some text</div>
</label> 
```

CSS：

```
label {
    display: inline-block;
    text-align: center;
    position: relative;
    overflow: hidden;
}
div {
    background: cyan;
    line-height: 40px;
}
input[type=radio] {
    position: absolute;
    top: -100px;
}
input[type=radio]:checked ~ div {
    background: lime;
} 
```

此外，您可能需要考虑目标浏览器**:checked**支持。例如，IE8 及以下不支持此选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T06:20:15.370

如果不使用 javascript 或其他任何东西，您会受到一些限制，但您可以尝试`:target` 伪类。看看这个 jsfiddle：http: [//jsfiddle.net/rkCSX/](http://jsfiddle.net/rkCSX/)

# java - 从命令行编译 .java 文件 - 外部库、类路径

> ID：15996257
> 
> 赞同：3
> 
> 时间：2013-04-14T06:05:08.950
> 
> 标签：java, command-line, compiler-construction, classpath, libraries

我在 Eclipse 中创建了一个项目，现在正试图确保 .java 文件从命令行编译。我一直在尝试使用`javac *.java`包含所有 .java 文件的文件夹进行编译。但是，由于引用了来自外部库 Joda-time 的类，这会导致错误。我有 Eclipse 为该项目制作的以下 .classpath 文件，但不知道如何处理它。

```
 <?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/>
    <classpathentry kind="lib" path="libs/joda-time-2.2.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

我尝试编译，`javac -classpath *.java`但这只会产生更多错误。我的源文件位于“src”文件夹内的包文件夹中。我应该把我的类路径文件和我的 joda-time-2.2.jar 文件放在哪里，我如何让所有东西都编译？

[编辑] 我使用的是 Windows 7

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T07:03:08.987

从您的`.classpath`文件来看，这可能有效：

```
javac -d bin -cp libs/joda-time-2.2.jar src/your/package/*.java 
```

这假设您在项目目录中运行它。

该`-d`标志告诉`javac`将输出文件放在哪里。`-cp`标志是 的简写`-classpath`。我根据`.classpath`您问题中的文件获得了这些参数。

一般来说，您可以通过阅读和理解`javac`. 我敢打赌你一开始会遇到很多`cannot find symbol`错误，因为“符号”不在你的类路径中，所以`javac`不可能知道如何找到它们。

了解如何构建项目非常重要，它是程序员的基础知识和核心能力。

一旦您了解了如何像这样手动构建，我建议您研究构建工具，最好是 Maven，或者 Ant，它们可以使在命令行上的构建变得更加容易。大多数 Java 项目使用这些工具在命令行和自动构建系统、持续集成等中构建他们的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:15:45.687

Eclipse 基本上编译您的程序并将它们放在`bin`文件夹中。而命令行在同一目录本身编译它们。如果您在 src 文件夹本身中编译文件，您会发现它`.class`现在到处都是文件。Eclipse 中 Java 编译器的默认目录是您的项目。对于命令行，它是您的源文件所在的文件夹。

因此，如果`Project`您`Desktop`的.`Project\src``C:\Users\UserName\Desktop\Project``C:\Users\UserName\Desktop\Project\src`

要以编程方式获取当前默认目录，请使用：

`System.out.println("System.getProperty ("user.dir")");`

现在，如果您需要使用命令行进行编译，我建议您将`.jar`文件放在您的`src`文件夹中。

但是，我认为您不需要该`.classpath`文件。[这](https://stackoverflow.com/questions/7186676/whats-in-an-eclipse-classpath-project-file)就是它的样子。

# c# - 在调试器中显示自定义索引器

> ID：15996260
> 
> 赞同：1
> 
> 时间：2013-04-14T06:05:59.267
> 
> 标签：c#, visual-studio

我有这样的示例索引器：

```
public byte this[long pIndex]
{
    get
    {
        // return something
    }
} 
```

如何告诉 Visual Studio 在调试器中显示此索引器中的所有元素？以及如何判断 pIndex 范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:47:00.253

你可以在你的类中实现`IEnumberable`接口。调试器可以使用它来获取所有项目并以与显示 linq 表达式结果相同的方式显示它们。

如果要查看单个元素，可以添加监视表达式`this[123]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:07:29.107

尝试使用调试器显示属性，如下所述：

*   [http://msdn.microsoft.com/en-us/magazine/cc163974.aspx](http://msdn.microsoft.com/en-us/magazine/cc163974.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerdisplayattribute.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerdisplayattribute.aspx)

尝试做这样的事情：

```
[DebuggerDisplay("{this[0]}")]
public byte this[long pIndex]
{
    get
    {
        // return something
    }
} 
```

# javascript - 文本输入中部分字符串的不同文本颜色

> ID：15996262
> 
> 赞同：1
> 
> 时间：2013-04-14T06:06:38.007
> 
> 标签：javascript, jquery, css

当文本输入的值仍在输入字段中时，如何设置作为文本输入值的字符串的一部分？

我知道可以使用元素中具有 contentedible 属性的元素来做到这一点，但谷歌在输入文本类型时使用他们的即时建议来做到这一点。输入中出现的第一个完成/建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T06:36:41.820

[虽然谷歌使用这样](http://jsbin.com/ozeyiq/2/edit)的东西

不幸的是，您不能*“打开+关闭”*这样的`input`元素：

```
<input> <span>Bold</span> normal </input> 
```

**我的建议是这样**使用`contenteditable`：[Live Demo](http://jsbin.com/upowow/2/edit)。

```
<div id="input" contenteditable="true"><span>This is </span> quite cool!</div> 
```

CSS 示例：

```
#input{
  font-family:Arial, Helvetica, sans-serif;
  border:1px solid #ccc;
  background:#eee;
  height:20px;
  width:200px;
  padding:7px;
  color:#888;
}
#input span{
  color:#444;
  font-weight:bold;
} 
```

然后在 JS 中检索元素“值”，您可以使用：

```
alert( this.textContent ); 
```

[例子](http://jsbin.com/upowow/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:18:39.943

就用户体验而言，我认为最好的用户体验不是完成用户输入的内容，而是在输入下方显示建议/已完成的选项。

# lua - Lua 5.2::为每个脚本创建不同的环境

> ID：15996264
> 
> 赞同：1
> 
> 时间：2013-04-14T06:06:44.427
> 
> 标签：lua

这是我遇到的问题的简化版本：

[bot0.lua]

```
function OnHit(bot)

// Where the bot structure and vec3 
// generated using SWIG and registered to a 
// "global" lua_State that I maintain.
bot.color = vec3( 1.0, 0.0, 0.0)
end; 
```

[bot1.lua]

```
function OnHit(bot)

bot.color = vec3( 0.0, 1.0, 0.0)
end; 
```

在加载时，对于每个脚本，我首先执行以下操作（伪代码）：

```
bot->script->L = lua_newthread( <Global lua_State where vec3 etc... are registered> )

luaL_loadbuffer( bot->script->L, botXXX.lua ...

lua_call( bot->script->L, ... 
```

然后在我的程序运行时，当机器人被击中时，我调用：

```
luaL_dostring( bot->script->L, "OnHit(GetBot(\"<the bot name>\")" ); 
```

（其中GetBot也是注册在全局lua_State中的函数）。

问题是机器人总是变绿，因为 bot1.lua OnHit 在最后一个加载的机器人文件中。我认为通过使用 lua_newthread，我将能够为每个创建的“线程”定义 OnHit，这将为机器人分配正确的颜色，因为我在使用 luaL_dostring 时使用了不同的 lua_State。但实际上最新加载的 OnHit 将覆盖全局 lua_State 环境中的前一个。

我的问题是：如何为每个脚本创建不同的环境，以便为正确的 bot->script->L 调用正确的 OnHit，并且我仍然可以访问所有功能（例如我的 vec3、GetBot等...函数）在我创建的“全局”lua_State 环境中注册？

[编辑]

经过更多的研究，我认为我需要的是能够在 C 中“沙盒”。我对吗？

[编辑]

实际上并不是真正的沙盒，因为我想如果在脚本环境中查找失败，则会对全局环境进行查找。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:46:46.187

bot0.lua

```
local bot = {}

function bot:OnHit()
  self.color = vec3( 1.0, 0.0, 0.0)
end

return bot 
```

* * *

bot1.lua

```
local bot = {}

function bot:OnHit()
  self.color = vec3( 0.0, 1.0, 0.0)
end

return bot 
```

* * *

主程序.lua

```
all_bots = {[0]=require"bot0", require"bot1"}

function GetBot(name)
  if name == "bot #0" then
    return all_bots[0]
  elseif name == "bot #1" then
    return all_bots[1]
  end
end 
```

C程序内部

```
luaL_dostring( bot->script->L, "GetBot('<the bot name>'):OnHit()" ); 
```

# jquery - 使用backbone.js路由器时出错

> ID：15996268
> 
> 赞同：0
> 
> 时间：2013-04-14T06:07:24.507
> 
> 标签：jquery, backbone.js

这是我的代码：-

```
<!doctype html>
<html>
<head>
  <title></title>
</head>
<body>
    Everything related to routers....
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">    </script>
    <script src="../underscore-min.js"></script>
    <script src="../backbone-min.js"></script>
    <script type="text/javascript">

      var Router = Backbone.Router.extend({
        routes: {
            "foo/:bar" : "paramtest",
            "*action" : "func"
        },
        func: function (action) {
            console.log(action);
        },
        paramtest:function (p) {
            console.log(p);
        }
      });

      new Router();
      Backbone.history.start();
   </script>
</body>
</html> 
```

Uncaught TypeError: Object # has no method 'on'bone-min.js:1 h.extend.start bone-min.js:1（匿名函数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:34:12.203

当前的 Backbone 包含[以下内容`Backbone.history.start`](http://backbonejs.org/docs/backbone.html#section-172)：

```
if (this._hasPushState) {
  Backbone.$(window).on('popstate', this.checkUrl);
} else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {
  Backbone.$(window).on('hashchange', this.checkUrl);
} else if (this._wantsHashChange) {
  this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
} 
```

请注意`$(window).on()`调用（`Backbone.$`只是对通常`jQuery`函数的命名空间引用），这就是错误的来源。您使用的是 jQuery 1.4.4，但该[`on`方法](http://api.jquery.com/on/)直到 1.7 版才添加到 jQuery。

你有两个选择：

1.  将您的 jQuery 升级到 1.7 或更高版本，最好是最新的 jQuery。
2.  将您的 Backbone 降级到不使用 jQuery 的`on`.

我不知道您会为选项 (2) 使用哪个版本，但选项 (1) 无论如何都是一个更好的主意。

# c++ - 对使用模板的类的 C++ 未定义引用

> ID：15996272
> 
> 赞同：1
> 
> 时间：2013-04-14T06:08:00.933
> 
> 标签：c++, templates, compiler-errors, undefined-reference

我对模板很陌生，所以如果我的代码非常错误，请不要对我苛刻:) 这是`Key`使用模板的类的头文件：

```
//Key.h
#ifndef KEY_H
#define KEY_H

#include "../Constants.h"

template<class KeyType>

class Key
{
    public:
        Key<KeyType>(KeyType initial);          
        KeyType increment();

    private:
        KeyType current;

};

#endif /* KEY_H */ 
```

这是`Key`类的 .cpp 文件：

```
//Key.cpp
#include "Key.h"

template<class KeyType> Key<KeyType>::Key(KeyType p_initial)
{
    this->current = p_initial;
}

template<class KeyType> KeyType Key<KeyType>::increment()
{
    this->current ++; //KeyType should implement this operator
} 
```

所以有什么问题？我尝试`Key`在我的代码中创建其他地方的实例，如下所示：

> 关键歌曲ID（0）；// 错误：未定义的引用`Key<int>::Key(int)`

然后使用

> songID.increment(); // 错误：未定义的引用`Key<int>::increment()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:13:19.597

两点：

*   `<KeyType>`从`Key<KeyType>(KeyType initial);`你不需要它删除。

*   并且，将类实现从`.cpp`一个文件移动到`.h` 另一个文件。这篇文章很有用：[为什么我不能将模板类的定义与其声明分开并将其放在 .cpp 文件中？](http://www.parashift.com/c++-faq-lite/templates-defn-vs-decl.html)

# html - 如何在不损失性能的情况下添加大量圈子？

> ID：15996275
> 
> 赞同：0
> 
> 时间：2013-04-14T06:08:40.730
> 
> 标签：html, easeljs, createjs

当我使用 createljs 构建我的模拟器时，我需要有数千个小圆圈（直径 3 像素）。我可以在形状图上画一个圆圈，这是推荐的方法吗？还是我应该使用位图？

关于性能方面的最佳方式的任何想法？

另外，是否可以打开或关闭文本抗锯齿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:06:16.623

您可以查看以下文章以阅读有关优化画布的信息。

[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)

在本文中，我们展示了使用画布的不同渲染技术

关于 easeljs adobe 为从 AS3 过渡到 HTML5 的开发人员提供了指南：

[http://blogs.adobe.com/digitalmedia/2011/01/getting-started-with-the-canvas-element-and-easeljs/](http://blogs.adobe.com/digitalmedia/2011/01/getting-started-with-the-canvas-element-and-easeljs/)

在本文中展示了如何从以前的对象定义创建一个新的 Shape 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:54:48.410

如果您正在寻找性能，请考虑使用 缓存您的形状`Shape.cache(x,y,w,h)`，这在大多数浏览器中提供了一些好处。查看 EaselJS Git 存储库中的缓存演示。请注意，Safari 6 在该示例中具有相反的效果（缓存速度较慢），因为 Safari 已经对图形进行了出色的优化，并且在 GPU 上处理大量小对象时效果不佳。

如果您的形状随着时间的推移发生很大变化，那么缓存可能不是一个好的选择。

# matlab - 从 Matlab 脚本文件中读取 GUI 数据

> ID：15996278
> 
> 赞同：0
> 
> 时间：2013-04-14T06:09:13.093
> 
> 标签：matlab, user-interface, user-controls, matlab-guide

我创建了一个名为 SCADA 的 GUI，并添加了一个名为 StatusData 的布尔变量，这是一个在启动 GUI 时设置为 false 的标志

```
handles.StatusData=false;
guidata(handles.output,handles); 
```

我按下一个按钮，然后调用一个连续执行的函数（该函数具有无限循环）。一段时间后，我按下另一个按钮，将 StatusData 设置为 true。

```
handles.StatusData=true;
guidata(handles.output,handles); 
```

现在，我需要`StatusData`从回调函数（我上面提到的同一个函数）访问，为了实现这一点，我在调用该函数时将句柄作为参数发送。现在，当按下更改状态数据的按钮时，实际句柄中的数据会发生变化，但我无法访问更新的状态数据，因为该函数已被调用。

如何在不将其作为参数发送的情况下访问 GUI 的更新句柄。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:34:24.290

您可以只将`hObject`参数传递给您的函数，并在需要时使用`guidata`;检索您的值 IE，

```
function some_callback(hObject, handles, ...)
    myLoopingFunction(hObject, ...);

function myLoopingFunction(hObject, ...)
    for someVar = something
        % Update handles structure
        handles = guidata(hObject);
    end 
```

或者，您可以创建一个句柄对象并将其放入句柄结构中；例如，

```
% In a separate file:
classdef uiState < handle
    % Probably should give this class a less general name...
    properties
        StatusData
    end
end

% In your UI file:
function some_callback(hObject, handles, ...)
    handles.state = uiState();
    handles.state.StatusData = false;
    % Now, when you modify handles.StatusData, the version used by
    % myLoopingFunction will also be updated, because they point to
    % the same object!
    myLoopingFunction(handles.state);

function myLoopingFunction(state, ...)
    for someVar = something
        % Now you just have to check state.StatusData
    end 
```

对于简单的情况，我会使用第一种方法。对于更复杂的情况，必须跟踪几个参数并且它们以复杂的方式相互作用，我会使用第二种。如果您在某个变量中有大量数据并且希望阻止将其复制到对 UI 的每次调用中，则第二种方法也很有用。

就个人而言，对于复杂的 UI，我通常会创建一些应用程序类来跟踪用户界面（并为其提供命令行界面）并确保它始终可用于我的 UI，但这有点像使用在这个简单的案例中，用大锤打开果酱罐。

# java - 在 JAVA 中写入文本文件和控制台之间交替

> ID：15996280
> 
> 赞同：0
> 
> 时间：2013-04-14T06:09:19.830
> 
> 标签：java

我想写入一个文本文件。然后，我想继续打印到控制台。

我能够成功输出到文本文件。但是，在关闭为写入文本文件而创建的 PrintStream 后，我无法打印到控制台。例如，在下面的代码中，文本文件具有名为“permutation”的方法的输出，后跟短语“Test before close”。但是，“关闭后测试”短语既不会打印到文本文件，也不会打印到控制台。感谢您的任何建议！

```
public static void main(String[] args) throws FileNotFoundException {
    PrintStream out2 = new PrintStream(new FileOutputStream("output.txt"));
    System.setOut(out2);
    permutation("1234");
    System.out.println("Test before close");
    out2.close();
    System.out.println("Test after close");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:19:13.950

您不必使用 system.setOut 来写入文件，您所做的是覆盖“System.out”而不是重置它。如果你真的想这样做，你应该添加：

saveOut=System.out

在 setOut 之前，然后在最后一行之前添加：

System.setOut(saveOut)

把原来的 system.out 放回去。

随心所欲地重定向流，只是不要穿过它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:21:08.800

将`System.out`（默认情况下，控制台）存储在您之前某处的变量中`setOut`。

```
oldOut = System.out; 
```

然后，在（或之前）之后`out2.close();`，添加：

```
System.setOut(oldOut); 
```

这将恢复旧的标准输出，允许您再次打印到控制台。

（您的代码实际上所做的是将`System.out`set 设置为`out2`，现在已关闭；因此您的所有输出都将进入黑洞。）

# javascript - 未捕获找不到覆盖：#prompt

> ID：15996286
> 
> 赞同：0
> 
> 时间：2013-04-14T06:10:08.510
> 
> 标签：javascript, jquery

我正在尝试从 javascript 函数调用 jquery 覆盖函数并失败。

我收到错误：未捕获无法找到覆盖：#prompt

```
this.mySaturdayNight = function() {
    var bark_overlay = document.createElement("div");
    bark_overlay.innerHTML="hey guy";
    bark_overlay.setAttribute('class', 'modal');
    bark_overlay.setAttribute('id', 'prompt');

    var sajT = new oblTable(1,3);

    var btn = document.createElement("button");
    btn.innerHTML = "test";
    btn.setAttribute("rel", "#prompt");
    btn.setAttribute("class", "modalInput");

    sajT.addContent(0,2,btn);

    var triggers = $(".modalInput[rel=#prompt]").overlay({
        // some mask tweaks suitable for modal dialogs
        mask: {
            color: '#ebecff',
            loadSpeed: 200,
            opacity: 0.9
        },

        closeOnClick: false
    });
} 
```

有任何想法吗？堆栈溢出是最好的！

谢谢！

# java - 方法覆盖不同的返回类型为 void

> ID：15996287
> 
> 赞同：2
> 
> 时间：2013-04-14T06:10:10.860
> 
> 标签：java, methods, overriding

假设我们有这个方法

```
 public class Animal {
     public void eat() { }
} 
```

在另一个扩展 Animal 的类上有这个方法

```
public String eat(){} 
```

这被认为是方法覆盖吗？因为我听说你可以在方法覆盖中使用不同的返回类型，只要它们具有相同的方法参数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T07:07:36.180

这既不是重载，也不是压倒一切！这是编译错误。

在 Java 中，可以在同一个类中定义两个或多个同名的方法，只要它们的参数声明不同。在这种情况下，方法被称为重载，过程被称为**方法重载。**

以下是 java 中**方法覆盖**的规则，在覆盖任何方法时必须遵循这些规则。**私有、静态和最终方法不能被覆盖。**

1）方法签名必须相同，包括返回类型、方法参数个数、参数类型和参数顺序。

2）重写方法不能抛出比原始方法或重写方法更高的异常。此规则仅适用于 Java 中的已检查异常，被覆盖的方法可以随意抛出任何未检查的异常。

3）重写方法不能减少重写方法的可访问性，这意味着如果原始或重写方法是公共的，而不是重写方法不能使其受到保护。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T06:12:51.627

您只能将返回类型更改为原始返回类型的子类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-28T22:18:12.903

从技术角度来看，所有答案都是正确的，因为 Void 是 Java 中没有其他类可以扩展的类，并且当方法被覆盖时，返回类型必须是原始类型的子类型（parentReturnType.isAsignableFrom(overriddenReturnType) ）。

但从实际的角度来看，这个问题仍然有效，为特殊情况无效找借口是有道理的。Void 类型的变量可以保存的唯一值是 null。此外，没有变量可以具有原始类型 void。最后你不能编译这段代码： Void result = object.notify(); 因此，最终在引入 1.5 时以不同方式指定 Java 并允许用任何其他类型覆盖 void 返回类型是有意义的。

因此，唯一合理的答案是恕我直言，这是不可能的，因为 Java 的设计不允许这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T06:28:59.170

这不正确的代码，因为两个具有相同名称的方法应该返回相同的值，只有参数可以不同 覆盖是在子类中具有相同的方法和相同的参数 重载具有相同的方法名称和不同的参数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T06:58:34.853

方法的返回类型不是该方法签名的一部分。

当您调用`eat()`子类时，java 查看您提供的签名（`eat`不带参数）并开始寻找具有此签名的方法，从您调用它的对象的实例类型的类开始（并搜索其祖先如果找不到它）。

因此，在子类上调用的方法将始终运行被覆盖的方法（首先找到它们）。

OO（特别是多态性）的一个关键“点”是可以在预期超类的地方传递子类。如果一个方法想要调用超类的`eat()`方法并获得一个 void，但您将一个子类传递给该方法，该方法`eat()`返回一个字符串；你可以看到这个方法会调用子类的eat并得到一个意想不到的值。
您可以看到为什么这可能是一个问题。：我

因此，重写方法必须返回相同的类型或父类返回的类型的子类。（类似的原则适用于为什么你可以返回一个子类；我会让你考虑一下 c:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-06T12:48:04.873

它既不是覆盖也不是重载，它会产生编译错误。

具有相同名称，不同参数编号或不同类型参数的两个方法称为重载方法，返回类型可能相同或不同。它可能在同一个班级或父、子班级。

具有相同参数编号、相同类型、相同返回类型但一个在父类中而另一个在子类中的两个方法称为覆盖方法。

# java - 字符串两半的就地交错

> ID：15996288
> 
> 赞同：11
> 
> 时间：2013-04-14T06:10:24.493
> 
> 标签：java, c++, c, algorithm, math

*给定一个大小相等*的字符串，比如说：

```
abcdef123456 
```

我将如何交错两半，使*相同*的字符串变成这样：

```
a1b2c3d4e5f6 
```

我试图尝试开发一种算法，但不能。有人会给我一些关于如何进行的*提示吗？*我需要这样做而不创建额外的字符串变量或数组。一两个变量就可以了。

我只是不想要一个工作代码（或算法），我需要开发一个算法并在数学上证明它的正确性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T08:08:30.920

您可以在 O(N*log(N)) 时间内完成：

```
Want: abcdefgh12345678 -> a1b2c3d4e5f6g7h8

a b c d e f g h
  1 2 3 4 5 6 7 8

  4 1-sized swaps:

a 1 c 3 e 5 g 7
  b 2 d 4 f 6 h 8

a1  c3  e5  g7
    b2  d4  f6  h8

  2 2-sized swaps:

a1  b2  e5  f6
    c3  d4  g7  h8

a1b2  e5f6
      c3d4  g7h8

  1 4-sized swap:

a1b2  c3d4
      e5f6  g7h8

a1b2c3d4
        e5f6g7h8 
```

C中的实现：

```
#include <stdio.h>
#include <string.h>

void swap(void* pa, void* pb, size_t sz)
{
  char *p1 = pa, *p2 = pb;
  while (sz--)
  {
    char tmp = *p1;
    *p1++ = *p2;
    *p2++ = tmp;
  }
}

void interleave(char* s, size_t len)
{
  size_t start, step, i, j;

  if (len <= 2)
    return;

  if (len & (len - 1))
    return; // only power of 2 lengths are supported

  for (start = 1, step = 2;
       step < len;
       start *= 2, step *= 2)
  {
    for (i = start, j = len / 2;
         i < len / 2;
         i += step, j += step)
    {
      swap(s + i,
           s + j,
           step / 2);
    }
  }
}

char testData[][64 + 1] =
{
  { "Aa" },
  { "ABab" },
  { "ABCDabcd" },
  { "ABCDEFGHabcdefgh" },
  { "ABCDEFGHIJKLMNOPabcdefghijklmnop" },
  { "ABCDEFGHIJKLMNOPQRSTUVWXYZ0<({[/abcdefghijklmnopqrstuvwxyz1>)}]\\" },
};

int main(void)
{
  unsigned i;

  for (i = 0; i < sizeof(testData) / sizeof(testData[0]); i++)
  {
    printf("%s -> ", testData[i]);
    interleave(testData[i], strlen(testData[i]));
    printf("%s\n", testData[i]);
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/bYAvRi)）：

```
Aa -> Aa
ABab -> AaBb
ABCDabcd -> AaBbCcDd
ABCDEFGHabcdefgh -> AaBbCcDdEeFfGgHh
ABCDEFGHIJKLMNOPabcdefghijklmnop -> AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPp
ABCDEFGHIJKLMNOPQRSTUVWXYZ0<({[/abcdefghijklmnopqrstuvwxyz1>)}]\ -> AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz01<>(){}[]/\ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T07:10:00.977

一般来说，这个问题是相当困难的 - 它减少到寻找*排列循环*。根据长度的不同，它们的数量和长度变化很大。

![10 和 12 入口阵列的就地交错循环](https://i.stack.imgur.com/C1wiw.gif)

第一个和最后一个循环总是退化的；10 个条目数组有 2 个长度为 6 和 2 的循环，12 个条目数组有一个长度为 10 的循环。

使用一个循环可以：

```
 for (i=j; next=get_next(i) != j; i=next) swap(i,next); 
```

尽管 next 函数可以实现为 N 的一些相对简单的公式，但问题被推迟到对已交换的索引进行账面核算。在左侧 10 个条目的情况下，应该 [快速] 找到循环的起始位置（例如，它们是 1 和 3）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T06:17:48.703

好的，让我们重新开始。这是我们要做的：

```
def interleave(string):
    i = (len(string)/2) - 1
    j = i+1

    while(i > 0):
        k = i
        while(k < j):
            tmp = string[k]
            string[k] = string[k+1]
            string[k+1] = tmp
            k+=2 #increment by 2 since were swapping every OTHER character
        i-=1 #move lower bound by one
        j+=1 #move upper bound by one 
```

这是程序将要执行的操作的示例。我们将使用变量`i`, `j`, `k`。`i`并且`j`将分别是下限和上限，其中`k`将是我们交换的索引。

**例子**

```
`abcd1234`

i = 3 //got this from (length(string)/2) -1

j = 4 //this is really i+1 to begin with

k = 3 //k always starts off reset to whatever i is 

swap d and 1
increment k by 2 (k = 3 + 2 = 5), since k > j we stop swapping

result `abc1d234` after the first swap

i = 3 - 1 //decrement i
j = 4 + 1 //increment j
k= 2 //reset k to i

swap c and 1, increment k (k = 2 + 2 = 4), we can swap again since k < j
swap d and 2, increment k (k = 4 + 2 = 6), k > j so we stop
//notice at EACH SWAP, the swap is occurring at index `k` and `k+1`

result `ab1c2d34`

i = 2 - 1
j = 5 + 1
k = 1

swap b and 1, increment k (k = 1 + 2 = 3), k < j so continue
swap c and 2, increment k (k = 3 + 2 = 5), k < j so continue
swap d and 3, increment k (k = 5 + 2 = 7), k > j so were done

result `a1b2c3d4` 
```

至于证明程序的正确性，请参见此[链接](http://homepages.ius.edu/RWISMAN/C455/html/notes/Chapter2/LoopInvariantProof.htm)。它解释了如何通过循环不变量来证明这是正确的。

粗略的证明如下：

1.  初始化：在循环的第一次迭代之前，我们可以看到它`i`设置为 `(length(string)/2) - 1`. 我们可以在进入循环之前看到 i <= length(string) 。
2.  维护。每次迭代后，`i`递减 ( `i = i-1, i=i-2,...`) 并且必须有一个点`i<length(string)`。
3.  终止：由于`i`是正整数的递减序列，循环不变量`i > 0`最终将等于 false 并且循环将退出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T07:01:04.893

解决方案在这里是 J. Ellis 和 M. Markov。完美shuﬄe的原位、稳定合并。计算机杂志。43（1）：40-53，（2000）。

另请参阅此处的各种讨论：

1.  [https://cs.stackexchange.com/questions/332/in-place-algorithm-for-interleaving-an-array/400#400](https://cs.stackexchange.com/questions/332/in-place-algorithm-for-interleaving-an-array/400#400)
2.  [https://cstheory.stackexchange.com/questions/13943/linear-time-in-place-riffle-shuffle-algorithm](https://cstheory.stackexchange.com/questions/13943/linear-time-in-place-riffle-shuffle-algorithm)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T07:07:36.150

好的，这是一个粗略的草图。你说你不只是想要一个算法，但你正在接受提示，所以考虑这个算法一个提示：

长度为 N。

k = N/2 - 1。

1) 从中间开始，将位置 N/2 k 处的元素移动（通过连续交换相邻的对元素）向左移动（第一次：'1' 移动到位置 1）。

2）--k。k==0吗？退出。

3) 将 N/2 处的元素移动（通过交换）（第一次：'f' 移动到位置 N-1）k 个位置到右侧。

4）--k。

**编辑**：上述算法是正确的，如下面的代码所示。实际上证明它是正确的已经超出了我的能力范围，虽然是一个有趣的小问题。

```
#include <iostream>
#include <algorithm>

int main(void)
{
    std::string s("abcdefghij1234567890");
    int N = s.size();
    int k = N/2 - 1;
    while (true)
    {

        for (int j=0; j<k; ++j)
        {
            int i = N/2 - j;
            std::swap(s[i], s[i-1]);
        }

        --k;

        if (k==0) break;

        for (int j=0; j<k; ++j)
        {
            int i = N/2 + j;
            std::swap(s[i], s[i+1]);
        }

        --k;
    }

   std::cout << s << std::endl;

   return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-09T01:38:06.410

这是一个算法和工作代码。它就位，O(N)，并且在概念上很简单。

1.  穿过阵列的前半部分，将项目交换到位。
    *   从左半部分开始的项目将在我们需要它们之前被交换到右边，所以我们使用一个技巧来确定它们被交换到的位置。
2.  当我们到达中点时，整理被交换到右侧的未放置的左侧项目。
    *   使用相同技巧的变体来找到正确的解扰顺序。
3.  对剩余的半阵列重复此操作。

这会通过阵列进行不超过 N+N/2 次交换，并且不需要临时存储。

诀窍是找到交换项目的索引。左边的项目在放置时被交换到由右边的项目腾出的交换空间中。交换空间按以下顺序增长：

*   将一个项目添加到末尾（进入由右项目腾出的空间）
*   将一个项目与最旧的现有（左）项目交换。

按顺序添加项目 1..N 给出：
`1 2 23 43 435 465 4657 ...`
每一步更改的索引为：
`0 0 1 0 2 1 3 ...`

这个序列正好是[OEIS A025480](https://oeis.org/A025480/list)，并且可以在 O(1) 摊销时间内计算：

```
def next_index(n):
    while n&1: n=n>>1
    return n>>1 
```

一旦我们在交换 N 个项目后到达中点，我们就需要解读。交换空间将包含 N/2 个项目，其中应位于偏移量的项目的实际索引由`i`给出`next_index(N/2+i)`。我们可以通过交换空间前进，将物品放回原处。唯一的复杂之处在于，随着我们的前进，我们最终可能会找到一个位于目标索引左侧的源索引，因此已经在其他地方进行了交换。但是我们可以通过再次查找之前的索引来找出它在哪里。

```
def unscramble(start,i):
        j = next_index(start+i)
        while j<i: j = next_index(start+j)
        return j 
```

请注意，这只是索引计算，而不是数据移动。在实践中，所有 N 的调用总数`next_index`< 3N。

这就是完整实现所需的全部内容：

```
def interleave(a, idx=0):
    if (len(a)<2): return
    midpt = len(a)//2 

    # the following line makes this an out-shuffle.
    # add a `not` to make an in-shuffle
    base = 1 if idx&1==0 else 0

    for i in range(base,midpt):
        j=next_index(i-base)
        swap(a,i,midpt+j)

    for i in range(larger_half(midpt)-1):
        j = unscramble( (midpt-base)//2, i);
        if (i!=j):
            swap(a, midpt+i, midpt+j)

    interleave(a[midpt:], idx+midpt) 
```

最后的尾递归可以很容易地被循环替换。Python 的数组语法就不那么优雅了。另请注意，对于此递归版本，输入必须是 numpy 数组而不是 python 列表，因为标准列表切片会创建不传播备份的索引副本。

这是验证正确性的快速测试。（一副 52 张牌的 8 次完美洗牌将其恢复到原始顺序）。

```
A = numpy.arange(52)
B = A.copy()
C =numpy.empty(52)

for _ in range(8):
    #manual interleave
    C[0::2]=numpy.array(A[:26])
    C[1::2]=numpy.array(A[26:])
    #our interleave
    interleave(A)
    print(A)
    assert(numpy.array_equal(A,C))

assert(numpy.array_equal(A, B)) 
```

# c# - C# Jquery Ajax 发布多个数据参数

> ID：15996290
> 
> 赞同：0
> 
> 时间：2013-04-14T06:10:28.580
> 
> 标签：c#, jquery, ajax, asp.net-mvc-4

在我的 c# mvc4 应用程序中，我希望使用带有 Jquery 的 AJAX 帖子将三个对象传递给 ActionResult。对象是两个字符串和一个表单集合。我只传递表单集合没有问题，但似乎无法获得正确传递所有三个的语法。这是我尝试过的：

```
 $(document).ready(function () {
        $('#ChangeName').click(function (e) {
            var tdata = $('#form1').serialize();
            var origname = $('#NameDiv').find('input[name="myName"]').first().val();
            var newname = $('#NameDiv').find('input[name="updatedName"]').first().val();
            $.ajax({
                type: "POST",
                data: {tdata + origname + newname},
                url: "Home/ChangeName",
                success: function (result) { success(result); }
            });
        }); 
```

我还尝试在`data:`带和不带括号的部分中的每个变量名称后使用逗号。我怎样才能通过所有三个？当它成功时，调试时两个字符串值都已正确填充，但值不会出现在 ActionResult 中，而是显示为 null。我也试过把这个放在下面的数据： `contentType: "application/x-www-form-urlencoded",`

这也是我的 ActionResult 的开始：

```
 public ActionResult ChangeName(string Name, string updatedName, FormCollection mCollection) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:07:55.967

你能试一下吗：

```
$(document).ready(function () {
        $('#ChangeName').click(function (e) {
            var tdata = $('#form1').serialize();
            var origname = $('#NameDiv').find('input[name="myName"]').first().val();
            var newname = $('#NameDiv').find('input[name="updatedName"]').first().val();
            $.ajax({
                type: "POST",
                data: {
                    mCollection: tdata,
                    Name: origname,
                    updatedName: newname
                },
                url: "Home/ChangeName",
                success: function (result) { success(result); }
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:29:40.287

我认为问题在于您如何将 origname 和 newname 放入 ajax 请求中。尝试这个：

```
var origname = $('#NameDiv').find('input[name="myName"]').first().val();
var newname = $('#NameDiv').find('input[name="updatedName"]').first().val();
$.ajax({
     url: 'Home/ChangeName',
     type: "POST",
     data: $("#form1").serialize() + "&origname =" + origname + "&newname =" + newname, 
     success: function (result) { success(result); }
}); 
```

# php - PHP表单重复电子邮件

> ID：15996293
> 
> 赞同：0
> 
> 时间：2013-04-14T06:11:04.053
> 
> 标签：php, forms, duplicates, html-email

我有一个 php 表单，它有时只会重复收到的电子邮件。我已经对代码进行了三次检查，没有任何东西可能会造成循环。我还进行了一个会话，以防止将相同的信息发送并插入数据库..我仍然收到某些电子邮件几次..

我试图重新创建用户可能发送这些电子邮件的方式以及可能导致它的原因。我发现导致这种重复的原因是多次单击提交按钮。我点击提交按钮的次数是我收到的重复电子邮件的数量。

有谁知道为什么会发生这种情况？我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:16:18.517

当您多次单击提交按钮时，它正在向服务器发出 x 请求并且您收到 x 邮件。为避免这种情况，您可以使用以下方法。

*   使用表单令牌，因此一份表单仅在一次有效。
*   首次单击后使用 javascript 禁用提交按钮以避免多次提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:53:34.923

做一些事情来设置带有时间戳的会话变量。如果时间戳小于 30 秒，则死亡。

```
<?php
session_start();
$sTime = time() - 15;
if($sTime > $_SESISON['submit_timestamp']){
    // process form
} else {
    // some sort of error handling if you want it.
}
?> 
```

# c# - 使用 c# 将参数传递给 powershell

> ID：15996295
> 
> 赞同：0
> 
> 时间：2013-04-14T06:12:12.467
> 
> 标签：c#, powershell, pipeline

我正在尝试将字符串从我的 c# 应用程序传递到我的 powershell 脚本。

我一直收到错误消息：“找不到接受参数的位置参数`'$null'`
我该怎么办？

我的 C# 代码：

```
 public void PowerShell()
    {
        RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
        Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
        runspace.Open();
        RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);

        Pipeline pipeline = runspace.CreatePipeline();

        String scriptfile = @"c:\test.ps1";

        Command myCommand = new Command(scriptfile, false);

        CommandParameter testParam = new CommandParameter("username", "serverName");

        myCommand.Parameters.Add(testParam);

        pipeline.Commands.Add(myCommand);
        Collection<PSObject> psObjects;
        psObjects = pipeline.Invoke(); <---error- "A positional parameter cannot be found that accepts argument '$null'" 
        runspace.Close();

    } 
```

我的PowerShell代码：

```
 Out-Host  $username 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:36:40.517

您的 PS 脚本没有参数，它只是使用变量。所以，试试这个：

```
Param($username)
Write-Output $username 
```

请注意，在您的情况下 Out-Host 是不可接受的，因为它会尝试将参数输出到调用范围，而不是简单地向输出流写入内容。

此外，您可以在运行空间中设置变量，因此它可以在没有参数的脚本中使用：

```
runspace.SessionStateProxy.SetVariable("username", "SomeUser"); 
```

（必须在 runspace.Open() 之后和 pipeline.Invoke() 之前完成）

# c# - Modal pop up for check box

> ID：15996297
> 
> 赞同：0
> 
> 时间：2013-04-14T06:12:34.530
> 
> 标签：c#, asp.net, modalpopupextender

I have a modal pop up panel and a check box in that panel. I have set check box `autopostback` property `true`. When I check mark the check box the panel disappears.

I want the panel still to be there when check box clicked because I have code for `oncheckedchanged`. I also have 2 buttons. If any one is clicked, the panel disappears. I tried with `OnClientClick="JavaScript: return false;"` for the button, but the `buton_clicked` event does not work for the button.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:03:53.410

if checking/unchecking the checkbox changes the UI in the popup panel, use ajax postback to only reload the content of the panel or the updated controls instead of the whole page. Therefore your popup panel will stay there. If it simply do some processing on code behind and does not change UI, consider using webmethod and $.ajax() call.

the same concept goes to your buttons.

# canvas - JavaFX多边形使用锚点调整大小保存到背景图像

> ID：15996298
> 
> 赞同：1
> 
> 时间：2013-04-14T06:12:46.703
> 
> 标签：canvas, anchor, javafx, polygon

我在 JavaFx 中使用多边形和锚点创建形状。使用这些我可以修改屏幕上的形状。完成编辑多边形后，我需要右键单击并将创建的多边形集成到背景图像中。我设法创建了一个多边形并转动到我在背景中使用的图像中。在完成编辑新图像后，我不知道如何修改图像以添加另一个多边形。我使用 StackPane 在背景中添加图像并在顶部添加多边形+锚它。抱歉没有发布任何代码，但我现在不在我的电脑前。欢迎提出任何建议。

# c++ - Prim 的动态位置算法

> ID：15996300
> 
> 赞同：0
> 
> 时间：2013-04-14T06:12:54.210
> 
> 标签：c++, algorithm, minimum-spanning-tree

假设您有一个输入文件：

```
<total vertices>
<x-coordinate 1st location><y-coordinate 1st location>
<x-coordinate 2nd location><y-coordinate 2nd location>
<x-coordinate 3rd location><y-coordinate 3rd location>
... 
```

Prim 算法如何用于找到这些位置的 MST？我知道这个问题通常使用邻接矩阵来解决。如果适用，任何参考资料都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:22:57.600

如果您已经了解 prim，这很容易。创建邻接矩阵 adj[i][j] = 位置 i 和位置 j 之间的距离

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:14:09.123

我只是要描述一些 Prim 的实现，希望能帮到你。

首先，您的问题没有指定如何将边缘输入到程序中。您有顶点总数和这些顶点的位置。你怎么知道哪些是连接的？

假设您有边缘（以及这些边缘的权重。就像上面的@doomster 所说，它可能是点之间的平面距离，因为它们是坐标），我们可以开始考虑我们的实现。维基百科描述了三种不同的数据结构，导致三种不同的运行时间：[http](http://en.wikipedia.org/wiki/Prim) ://en.wikipedia.org/wiki/Prim 's_algorithm#Time_complexity

最简单的是邻接矩阵。正如您可能从名称中猜到的那样，矩阵描述了“相邻”的节点。准确地说，有`|v|`行和列（其中`|v|`是顶点数）。at 的值`adjacencyMatrix[i][j]`因用途而异。`i`在我们的例子中，它是节点和之间的边的权重（即距离）`j`（这意味着您需要以某种方式索引顶点。例如，您可以将顶点添加到列表中并使用它们在列表中的位置） .

现在使用这个邻接矩阵，我们的算法如下：

1.  创建一个包含所有顶点并以“距离”为键的字典。最初所有节点的距离是无穷大。
2.  创建另一个字典来跟踪“父母”。我们使用它来生成 MST。跟踪边缘更自然，但通过跟踪“父母”实际上更容易实现。请注意，如果您将一棵树作为根（即指定某个节点作为根），那么每个节点（除了根）都只有一个父节点。因此，通过制作这本父母词典，我们将拥有我们的 MST！
3.  `v`使用从原始列表中 随机选择的节点创建一个新列表。
    1.  从距离字典中删除`v`并将其添加到父字典中，并以 null 作为其父项（即它是“根”）。
    2.  遍历该节点的邻接矩阵中的行。对于任何`w`已连接的节点（对于未连接的节点，您必须将其邻接矩阵值设置为某个特殊值。0、-1、`int`最大值等）将其在字典中的“距离”更新为`adjacencyMatrix[v][w]`. 这个想法是它不再“无限远”了......我们知道我们可以从那里到达`v`。
4.  虽然字典不为空（即当有我们仍然需要连接的节点时）
    1.  查看字典并找到距离最小的顶点`x`
    2.  将其添加到我们的新顶点列表中
    3.  对于它的每个邻居，将它们的距离`min(adjacencyMatrix[x][neighbor], distance[neighbor])`更新为 并将其父节点更新为`x`。基本上，如果有更快的方法可以到达，`neighbor`那么距离字典应该更新以反映这一点；如果我们然后添加`neighbor`到新列表中，我们知道我们实际添加了哪条边（因为父字典说它的父是`x`）。
5.  我们完成了。随心所欲地输出 MST（您需要的一切都包含在父母字典中）

我承认从维基百科页面到上面概述的实际实现有一点飞跃。我认为解决这个差距的最好方法就是暴力破解代码。我的意思是，如果伪代码说“找到最小 [blah] 使得 [foo] 为真”，那么编写执行该操作所需的任何代码，并将其粘贴在单独的方法中。它肯定是低效的，但它会是一个有效的实现。图算法的问题在于有 30 种方法可以实现它们，而且它们的性能都非常不同；维基百科页面只能从概念上描述算法。好消息是，一旦你实施了*一些*方式，您可以快速找到优化（“哦，如果我在这个单独的数据结构中跟踪这个状态，我可以让这个查找方式更快！”）。顺便说一句，this 的运行时间是`O(|V|^2)`. 我懒得详细分析该分析，但大致是因为：

1.  所有初始化都`O(|V|)`更糟
2.  我们执行循环`O(|V|)`时间并花`O(|V|)`时间查看字典以找到最小节点。所以基本上多次找到最小节点的总时间是`O(|V|^2)`。
3.  更新距离字典所需的时间是`O(|E|)`因为我们只处理每条边一次。因为这`|E|`也是`O(|V|^2)``O(|V|^2)`
4.  跟踪父母是`O(|V|)`
5.  输出树是`O(|V| + |E|) = O(|E|)`最坏的
6.  添加所有这些（除了（2）之外，它们都不应该相乘）我们得到`O(|V|^2)`

堆的实现与`O(|E|log(|V|)`上面的非常相似。唯一的区别是更新距离`O(log|V|)`不是`O(1)`（因为它是一个堆），而是查找/删除 min 元素`O(log|V|)`而不是`O(|V|)`（因为它是一个堆）。分析中的时间复杂度非常相似，您最终会得到`O(|V|log|V| + |E|log|V|) = O(|E|log|V|)`所需的结果。

实际上......我有点困惑为什么邻接矩阵实现关心它是一个邻接矩阵。它也可以使用邻接表来实现。我认为关键部分是如何存储距离。我在上面概述的实现中可能会有所偏离，但我很确定它实现 Prim 的算法满足 wikipedia 概述的时间复杂度限制。

# javascript - JavaScript 中的 {} + {} 是什么？

> ID：15996303
> 
> 赞同：16
> 
> 时间：2013-04-14T06:13:06.343
> 
> 标签：javascript

**第一部分：**

因为当您添加两个数组时，一切都按预期工作：

```
 [] + []     //output:'' 
```

添加数组和对象也符合我们的预期：

```
 [] + {}
output:'[object Object]' 
```

`{} + {}`在 JavaScript 中是`NaN`?
这是出乎意料的结果，那么这背后的原因是什么？

**第二部分：**

在不带前缀 0 的字符串比较中，3 大于 12：

```
"3" > "12"
: true 
```

使用填充，一切正常：

```
 "03" > "12"
: false 
```

字符串比较必须使用前缀 0 吗？添加前缀 0 的原因是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T06:17:03.083

1.  `{} + {}``{}`被解释为后跟表达式的空块`+ {}`。`{}`没有数值，所以它产生`NaN`. 如果您强制将其评估为类似 的表达式`({} + {})`，您将得到`[object Object][object Object]`.

2.  它们是字符串，因此将按字典顺序进行比较。如果要将它们作为数字进行比较，请先使用`parseInt`or解析它们`parseFloat`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-14T06:27:58.557

**第一部分**

1-

当您添加两个数组时，您将获取每个数组的原始值，并且数组可以转换为如下所示的字符串，`[1,2,3,4].toString() //=> 1,2,3,4`因此两个 emty 数组生成为空字符串，并且它们之间的连接生成空字符串。

2-当您添加空字符串与对象时，您正在将对象转换为字符串，如图所示，对象的字符串值为`[object Object]`

3-

当您添加两个对象时，您只是通过`+`检查此[问题将对象转换为数字](https://stackoverflow.com/questions/11930644/objects-and-arrays-addition)

**第二部分**

字符串比较是从左到右逐个字母进行的，一旦有偏差，就会确定返回值，忽略字符串长度，如下所示

```
"3" > "12" 
```

ASCII 中的“3”大于“1”，因此返回 TRUE

```
"03" > "12" 
```

ASCII 中的“0”小于“1”，因此返回 False

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:41:06.517

我在最新的 Firefox、Safari 和 Chrome 中尝试了以下操作：a = []; b={};console.log(a+a);console.log(a+b);console.log(b+b);

火狐

```
(an empty string)
[object Object]
[object Object][object Object] 
```

铬合金

```
[object Object]
[object Object][object Object]
undefined 
```

苹果浏览器

```
[object Object]
[object Object][object Object] 
```

按字典顺序，字符串“3”大于字符串“12”。如果您真的希望将字符串作为数字进行比较，您必须告诉 JavaScript 这就是您想要的方式。

```
parseInt("3") > parseInt("12"); 
```

# c# - Gwan mono : 调用 Gwan c# API 转储核心

> ID：15996308
> 
> 赞同：0
> 
> 时间：2013-04-14T06:14:13.407
> 
> 标签：c#, api, mono, g-wan

我正在调查 gwan 并尝试使用 mono 运行 c# 示例，但遇到了一些问题。

一旦 c# Gwan API (wrapped) 被击中，hello.cs 就会转储核心。除非调用 Gwan API，否则单声道样本可以正常工作。如果您使用 loan.cs 示例，它会将输出写入标准输出（服务器上的控制台），并且 Gwan 调用会被注释掉：

*   第 74 行

    //狼疮评论：Gwan.xbufCat(Gwan.getReply(args[0]), reply.ToString());

*   第 237 行

    //Gwan.xbufCat(Gwan.getReply(args[0]), reply.ToString());

我错过了什么吗？配置 c# Gwan API 还有其他事情要做吗？

谢谢

梅尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:55:55.263

您的 Linux 发行版或 Mono 发行版可能会发生这种情况（Linux 发行版使用不同的默认配置选项，并且连续的 Mono 发行版并不总是相互兼容）。

在 Ubuntu 10.10 和 Ubuntu 12.04（均为 64 位）上，以下 Mono 版本运行良好：

`mono -V Mono JIT compiler version 3.0.2 (tarball Wed Dec 26 11:43:57 CET 2012) Copyright (C) 2002-2012 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com TLS: __thread SIGSEGV: altstack Notifications: epoll Architecture: amd64 Disabled: none Misc: softdebug LLVM: supported, not enabled. GC: Included Boehm (with typed GC and Parallel Mark)`

由于您没有透露有关您的操作系统或您正在使用的 Mono 运行时的任何信息，因此告诉我们什么对我们有用是可以做的最大工作。

Lupus（来自 Mono的`loan.cs`团队）添加了评论，他非常友好地重写了代码，让 G-WAN 更好地使用 Mono 运行时。

# c# - htmlagilitypack c# 错误 403 被禁止

> ID：15996309
> 
> 赞同：1
> 
> 时间：2013-04-14T06:14:14.440
> 
> 标签：c#, html-agility-pack

我使用 htmlagilitypack 从[这里](http://ru-patent.info/)获取信息。这是代码

```
int i=2449520; 
```

.....................

```
web.OverrideEncoding = Encoding.UTF8;
web.UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";
doc = web.Load("http://ru-patent.info/24/49/" + i + ".html");
var List = doc.DocumentNode.SelectNodes("//div[@style='padding:10px; border:#999 dotted 1px; background-color:#FFF; background-image:url(/imgs/back.gif);']");
foreach (var t in List)
{
    Regex regex = new Regex(@"\sRU\s\d+");
    Match match = regex.Match(t.InnerText);
    sw.WriteLine(i.ToString());
    while (match.Success)
    {
       sw.WriteLine(match.ToString());
       match = match.NextMatch();
    }
    sw.WriteLine('\n');
}
i++; 
```

我还使用了一个间隔为 10 秒的计时器，我需要从中获取信息的页面超过一千个。但是大约 30 页后，我得到了 403 禁止错误。我怎样才能绕过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:35:34.373

[响应 403](http://en.wikipedia.org/wiki/HTTP_403)表示服务器拒绝接受您的请求。我想这可能是针对 DDoS 的服务器保护。您可以使用不同的服务器（具有不同的 API 地址）或尝试在请求之间休息。此外，询问网站所有者什么是解析其信息的最佳方式总是好的。

# java - 如何在junit中测试方法是否已被覆盖？

> ID：15996311
> 
> 赞同：4
> 
> 时间：2013-04-14T06:14:21.150
> 
> 标签：java, junit, junit4

我有这个问题，是否有一个测试注释或断言可以判断一个方法是否已在 junit 中被覆盖？

我目前正在实现一个测试用例，它应该告诉 class`Foo`的方法`toString()`是否覆盖了它的超类。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T06:33:03.633

你可以这样做：

```
 class.getMethod("toString").getDeclaringClass(); 
```

这是一个示例：

```
 class Test {
         public String toString(){
              return "From test";
         }
  }

  public static void main(String[] args) throws NoSuchMethodException, SecurityException {
    String resut = Test.class.getMethod("toString").getDeclaringClass().getName();
    System.out.println(resut);
} 
```

现在运行它并覆盖 toString firs 然后将其注释掉，您将看到输出和“测试”然后是“对象”

# android - 以矩阵格式显示二维数组

> ID：15996312
> 
> 赞同：1
> 
> 时间：2013-04-14T06:15:27.900
> 
> 标签：android, android-layout

我希望我的**二维数组**显示为**矩阵**格式。对于那个布局是合适的？我可以举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:45:37.173

简单的答案是在里面使用 a`TableLayout`和`TextView`s。

但是如果你想显示一个大数组，你应该让矩阵在两个方向上都可以滚动。`EditText`下面是填充矩阵的代码，该矩阵显示为行内的一系列s，在 a 内`TableLayout`。使用`TableLayout`两个 ScrollView 可以在两个方向上滚动。根据您的需要调整代码。`table`是`TableLayout`带有 id 的`tableLayout1`。

```
private void fillTable(final int n, final double[][] matrix, TableLayout table) {
table.removeAllViews();
for (int i = 0; i < n; i++) {
    TableRow row = new TableRow(MainActivity.this);
    row.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));

    for (int j = 0; j < n; j++) {
        EditText edit = new EditText(OutputActivity.this);
        edit.setInputType(InputType.TYPE_CLASS_NUMBER|InputType.TYPE_NUMBER_FLAG_DECIMAL|InputType.TYPE_NUMBER_FLAG_SIGNED);
        edit.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));

        edit.setText(Double.toString(matrix[i][j]));

        edit.setKeyListener(null);
        row.addView(edit);
    }
    table.addView(row);
}
} 
```

布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_vertical"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:orientation="horizontal" >

                    <TableLayout
                        android:id="@+id/tableLayout1"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent" >
                    </TableLayout>
                </LinearLayout>
            </HorizontalScrollView>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

# java - AlphaComposite Transparency 重绘重叠成黑色

> ID：15996314
> 
> 赞同：3
> 
> 时间：2013-04-14T06:15:36.917
> 
> 标签：java, graphics, alpha, repaint, drawimage

所以我在另一个面板顶部有一个图像，该图像是透明的，因此您可以看到它下方的面板。我想要做的是使用 repaint() 将图像（使用 java.awt.Graphics 中的 drawImage() 方法绘制）淡出，直到它完全透明，这样你就可以清楚地看到它下面的面板。截至目前，图像只是淡入黑色而不是透明纹理。

这是我现在的一些代码：

油漆组件方法：

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    float alpha = 1f-(.01f*(float)opcounter);
    Graphics2D g2d = (Graphics2D)g;
    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha);
    g2d.drawImage(img, 0, 0, null);
} 
```

为计时器调用的 actionPerformed 方法

```
public void actionPerformed(ActionEvent e)
{
    opcouner++;
    panel.repaint();
} 
```

我的代码的更长（未压缩）版本：（包括用于计时器的paintComponent和Mover类）

```
 public void paintComponent(Graphics g)
            {   
                super.paintComponent(g);
                Dimension framesize = frame.getSize();
                this.setBounds(0,0,framesize.width, framesize.height-61);

                if (buff)
                {
                    //this.add(buffer);
                    if (opcounter <= 255)
                    {
                        buffer.setForeground(new Color(250, 250, 250, 0+opcounter));
                    }
                    else 
                    {
                        opcounter = 0;
                        buff = false;
                        hand = true;
                    }
                }
                if (hand)
                {
                    this.add(handson);
                    if (opcounter <= 255)
                    {
                        handson.setForeground(new Color(250, 250, 250, 0+opcounter));
                    }
                    else 
                    {
                        opcounter = 0;
                        hand = false;
                        log = true;
                    }
                }
                if (log)
                {
                    this.add(logic);
                    if (opcounter <= 255)
                    {
                        logic.setForeground(new Color(250, 250, 250, 0+opcounter));
                    }
                    else 
                    {
                        opcounter = 0;
                        log = false;
                        pan = true;
                    }
                }
                if (pan)
                {
                    this.add(panic);
                    if (opcounter <= 255)
                    {
                        panic.setForeground(new Color(250, 250, 250, 0+opcounter));
                    }
                    else 
                    {
                        opcounter = 0;
                        pan = false;
                        first = false;
                        second = true;
                        try
                        {
                            //Thread.sleep(2000);
                        }
                        catch(Exception e)
                        {
                            System.out.println("thread not slept");
                        }
                        System.out.println("opcounter = " + opcounter);
                        black.setVisible(false);
                        handson.setVisible(false);
                        logic.setVisible(false);
                        panic.setVisible(false);
                        tutpic = true;
                    }
                }
                if (tutpic)
                {
                    if (opcounter <= 200)
                    {
                        Graphics2D g2d = (Graphics2D)g.create();
                        float alpha = 1f-(.01f*(float)opcounter);
                                          g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));
                        g2d.drawImage(tut, 0, 0, null);
                        g2d.dispose();
                    }
                    else
                    {
                        opcounter = 0;
                        tutpic = false;
                    }
                }
            }

            class Mover implements ActionListener
            {
                public void actionPerformed(ActionEvent e)
                {
                    if (!tutpic)
                        opcounter+=4;
                    else
                    {
                        opcounter++;
                    }
                    tutorial.repaint();
                }   
            } 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:26:39.673

您需要在方法存在`Graphics`之前恢复上下文的状态。`paintComponent`这很重要，因为`Graphics`上下文是共享资源，所有需要更新的组件都会被赋予相同的`Graphics`，所以现在你绘制组件后的每一件事都会共享一些`AlphaComposite`...

更好的解决方案是创建`Graphics`上下文的临时副本，应用您想要的任何设置并在完成后处理它。这将确保您对`Graphics`上下文所做的任何更改都不会在方法存在后继续进行......

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    float alpha = 1f-(.01f*(float)opcounter);
    // Create your own copy...
    Graphics2D g2d = (Graphics2D)g.create();
    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha);
    g2d.drawImage(img, 0, 0, null);
    // Don't forget to dispose of it
    g2d.dispose();
} 
```

请记住，您创建它，您处理它！

**更新**

尝试`AlphaComposite.SRC_OVER`改用...

![在此处输入图像描述](https://i.stack.imgur.com/0Nse8.png)

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestFadeOut {

    public static void main(String[] args) {
        new TestFadeOut();
    }

    public TestFadeOut() {
        EventQueue.invokeLater(
                        new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private float alpha = 1f;
        private float diff = -0.02f;
        private BufferedImage img;

        public TestPane() {
            try {
                img = ImageIO.read(new File("C:\\Users\\swhitehead\\Documents\\My Dropbox\\Ponies\\url.png"));
                Timer timer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        alpha += diff;
                        if (alpha < 0) {
                            diff *= -1;
                            alpha = diff;
                        } else if (alpha > 1f) {
                            diff *= -1;
                            alpha = 1f + diff;
                        }
                        repaint();
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return img == null ? super.getPreferredSize() : new Dimension(img.getWidth(), img.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (img != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setComposite(AlphaComposite.SrcOver.derive(alpha));
                int x = getWidth() - img.getWidth();
                int y = getHeight() - img.getHeight();
                g2d.drawImage(img, x, y, this);
                g2d.dispose();
            }
        }
    }
} 
```

看看[堆肥图形](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)了解更多细节......

# ms-access - 对 Access 表单上的值进行更改的确认提示

> ID：15996318
> 
> 赞同：1
> 
> 时间：2013-04-14T06:16:00.257
> 
> 标签：ms-access, vba, ms-access-2010

`MsgBox`如果用户在提示下选择“否”，我正在尝试恢复到原始值。然而，这并没有发生。你能看看我哪里出错了吗？

```
Private Sub txtNov2_AfterUpdate()
Dim x As Integer
Dim NewValue As Integer
Dim OrigValue As Integer
NewValue = Me.txtNov2.Value
OrigValue = [Forms]![DataEntry]![txtNov2].OldValue 'Me.txtNov2.OldValue
If NewValue <> OrigValue Then
    x = MsgBox("Value Has Changed Do you Want to Update?", vbQuestion + vbYesNo, "Value Change")
    If x = vbYes Then
        MsgBox ("Please Press Update Button")
        btnUpdateData2.SetFocus
    Else
        txtNov2.SetFocus
        'Me.Undo
        txtNov2.Value = OrigValue
        'Cancel = True
    End If
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:13:18.977

在我看来，您的代码正在运行，就目前而言。我打开表格...

![原来的](https://i.stack.imgur.com/TwjI3.png)

...并将值从更改`123`为`124`...

![改变了](https://i.stack.imgur.com/KlVDn.png)

...然后当我按 [Tab] 键时，控件失去焦点时，我得到`MsgBox`...

![消息框](https://i.stack.imgur.com/CT1y7.png)

...如果我选择“否”，则该值将恢复为`123`

![还原](https://i.stack.imgur.com/nb7AV.png)

该状态和初始状态（当我第一次打开表单时）之间的唯一区别是表单仍然“脏”，如表单左侧记录选择器中的“铅笔”图标所示。如果您想*完全*撤消对表单的所有更改，请尝试替换...

```
Else
    txtNov2.SetFocus
    'Me.Undo
    txtNov2.Value = OrigValue
    'Cancel = True
End If 
```

...和...

```
Else
    DoCmd.RunCommand acCmdUndo
End If 
```

# c++ - B-Tree中是否有批量加载的算法？

> ID：15996319
> 
> 赞同：7
> 
> 时间：2013-04-14T06:16:04.163
> 
> 标签：c++, algorithm, b-tree

我知道 b+tree 中有批量加载。我只是想知道在 B-Tree 中是否有任何用于批量加载的算法。例如，给定一个数据数组，创建 B-Tree 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T07:04:36.860

其实答案是肯定的。

B+-trees 和普通 B-trees 的主要区别在于前者的值实际上存储在叶子中，而在后者中，您将在每个节点中找到值。因此，B+-树让您以几乎连续的方式存储数据，每个叶子包含整个排序数据的连续切片。这对于 B 树来说是不可能的：一个内部节点将包含几个元素，但它们不会是连续的。整个排序的数据集。

此属性对于批量加载至关重要：该过程通过将已排序的数据集切割成将形成 B+-tree 叶子的数组来处理已排序的数据集。因此，对于 B 树来说，它似乎无法工作。

如果我们能够以将内部节点元素组合在一起的方式对数据进行排序，那么问题就解决了。为了做到这一点，必须事先知道元素将如何分组。事实证明这是可能的。

让我们调用`o`（排序）节点中的最小子节点数（这与 B 树顺序的原始定义一致）。我们认为根节点处于树的最高阶段，叶子处于最低阶段（阶段 0）。对于一棵平衡良好的树，所有的叶子确实会处于同一阶段。

树的第 k 级对至少由`o`第 k-1 级中的元素隔开的元素进行分组。在初始排序之后，我们必须从构成阶段 0 的已排序数组中提取元素，并将它们分组到不同的数组中以构建阶段 1，然后再次使用该数组到阶段 2 的新数组中，并重复该过程直到最新数组中的元素少于`o`，这将是根阶段。从那时起，可以直接从舞台集构建树：

*   将每个阶段拆分为 `o`元素数组，
*   构建索引数组以将节点链接到子节点
*   将每个节点构建为一对对应的索引数组 * 值数组

生成的树不一定会很好地平衡。它取决于数据集中的条目数，以及`o`. 不过，应该可以调整用于构建阶段的间隔以拥有更好的分布式树。

总而言之，批量加载 B-tree 所需的工作比 B+-tree 更乏味，但这是可能的。

# symfony - 在控制器中设置 Cookie 变量 - Symfony2

> ID：15996321
> 
> 赞同：3
> 
> 时间：2013-04-14T06:16:50.127
> 
> 标签：symfony, cookies

我试图在渲染树枝文件之前在控制器中设置一个 cookie。在尝试了我在这里看到的一些建议后，我的代码如下所示：

```
public function demandAction() {

    $result = array('message' => '');
    $response = $this->render('MainBundle:Default:demand.html.twig', $result);        
    $response->headers->setCookie(new Cookie('cookie', 'value', time() + 3600 * 24 * 7));

    return $response;
} 
```

但是当我提醒 document.cookie 时，cookie 在我呈现的页面中不可用。我确定我一定错过了什么。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:34:09.553

cookie 对象的 httpOnly 默认设置为 true，[http: //api.symfony.com/2.0/Symfony/Component/HttpFoundation/Cookie.html](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Cookie.html)

这意味着浏览器不应使 cookie 对客户端脚本可见。如果您需要在脚本中查看 cookie，您可以在创建 cookie 时将第 7 个参数作为 false 传递。

```
$response->headers->setCookie(new Cookie('foo', 'bar',time() + 60, '/', null, false, false)); 
```

如果您只需要查看 cookie 以进行调试，您可以使用 Chrome 开发工具。它们位于“资源”选项卡下。

# java - 使用 Tomcat 时无法写入文件

> ID：15996324
> 
> 赞同：5
> 
> 时间：2013-04-14T06:17:08.590
> 
> 标签：java, tomcat

我无法在 Tomcat 中创建然后写入文件。如果我将 java 程序（仅编写代码）作为**Java 应用程序**运行，则会创建该文件，但在 Tomcat 中失败。

没有错误信息。该文件根本没有创建！

如果我在这里遗漏了什么，请提出建议：

```
//code inside the servlet
public void setData(HttpServletRequest request){
    name=request.getParameter("name");
    address=request.getParameter("address");

    BufferedWriter dataOut;
    try {
        System.out.println("Wrinting file...");
        dataOut = new BufferedWriter(new FileWriter("data.txt", true));

        dataOut.write("name:");
        dataOut.flush();

        dataOut.write("address");
        dataOut.flush();

        dataOut.write("\n");
        dataOut.flush();

        dataOut.close();
        System.out.println("File write complete!");
    }
    catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T06:22:38.410

看起来文件确实创建没有问题。

您实际上可能会丢失它的保存**位置。**

更改此行：

```
System.out.println("File write complete!"); 
```

至：

```
System.out.println("File write complete! Saved to: "+new File("data.txt").getAbsolutePath()); 
```

你可能会解决这个谜团。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T06:23:59.960

正在创建文件，但它使用的是相对路径。它将*相*对于执行位置创建，这在 Tomcat 上将不是您习惯的位置。

使用绝对路径或打印其位置。

# r - 如何更改由 R 中的 sm.density.compare() 生成的密度图中线条的颜色？

> ID：15996325
> 
> 赞同：2
> 
> 时间：2013-04-14T06:17:12.037
> 
> 标签：r, plot

我使用 R 中的 sm.density.compare 制作了一个包含 4 个密度图的图形，如下所示：

如何更改线条的颜色？同样有趣的是我如何改变线条的类型？即虚线，实线

![密度图](https://i.stack.imgur.com/XDb91.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:29:20.633

您可以使用与其他基本绘图功能相同的参数 -`col=`颜色和`lty=`线型。

```
library(sm)    
y <- rnorm(100)
g <- rep(1:2, rep(50,2))
sm.density.compare(y, g,col=c("blue","black"),lty=c(4,6)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/tCzSO.png)

# android - 试图从 ListView 获取字符串

> ID：15996326
> 
> 赞同：1
> 
> 时间：2013-04-14T06:17:16.177
> 
> 标签：android, listview, onitemclick

我目前的问题是我有一个 ListView 我用来显示我的联系人现在我想设置 onItemClick 来获取联系人的名称并将其设置为一个名为 p2 的 TextView 我目前拥有的代码是：

```
protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setp2);

        cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI,null,null,null,null);

        String[] from = new String[]{ContactsContract.Contacts._ID,ContactsContract.Contacts.DISPLAY_NAME};
        int[] to = new int[]{R.id.id_text,R.id.name_text};

        final SimpleCursorAdapter adapter = new SimpleCursorAdapter(setp2.this,R.layout.setp2_layout,cursor,from,to);

        ListView list = (ListView)findViewById(R.id.contact_list);
        list.setAdapter(adapter);

        list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {              
            }
        });

} 
```

所以基本上我不确定我需要在 onItemClick 中做什么，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:23:51.993

在您的 onItemClick 中，您将获得与该列表项关联的视图实例。从该视图中，您可以获得与其关联的文本并将其设置为 p2 TextView。如果我对您的要求的理解是正确的，代码将是这样的：

```
 list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) { 
               CharSequence name = ((TextView)view.findViewById(R.id.name_text)).getText();
               //Set this to your textview in P2
               tvP2.setText(name);

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:26:53.957

设置 a[`SimpleCursorAdapter.CursorToStringConverter`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.CursorToStringConverter.html)并将其设置在适配器上，然后用于[`convertToString(Cursor cursor)`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#convertToString%28android.database.Cursor%29)在 item click 上获取文本：

```
(Cursor) simple.getItem(position) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:38:24.780

```
@Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) { 
            cursor.moveToPosition(position);
            String name = cursor.getString(cursor.getColumnIndex(
                            ContactsContract.Contacts.DISPLAY_NAME));
             p2.setText(name);
        }
    }); 
```

# vba - VBA：错误 91 对象变量或未设置块变量

> ID：15996328
> 
> 赞同：1
> 
> 时间：2013-04-14T06:17:25.813
> 
> 标签：vba, excel

我遇到了一个奇怪的 VBA 错误 91 问题。我看到很多其他人都有这个问题，因为他们没有使用关键字“Set”作为对象，而我的情况不是这样。

以下是我的代码：

```
Dim eventWS As Worksheet
Set eventWS = Worksheets("Event Sheet")

Dim eventRange As Range
Set eventRange = eventWS.Columns("A:A").Find(240, , xlValues, xlWhole)

If Not eventRange Is Nothing Then 

      Dim eventFirstAddress As String 
      eventFirstAddress = eventRange.Address 

      Do 
         If eventWS.Range("L" & eventRange.Row).Value = busId Then 
              If commuter = True Then 
                 Count = Count + Affected(eventWS.Range("Q" & eventRange.Row).Value)
              Else
                 Count = Count + 1
              End If 
         End If 
         MsgBox("Before call move next: " & eventRange.Row )
         Set eventRange = eventWS.Columns("A:A").FindNext(eventRange)
         MsgBox("After call move next: " & eventRange.Row )
      Loop While Not eventRange Is Nothing And eventRange.Address <> eventFirstAddress 
End If 
```

Affected() 是一个我可以调用来进行内部处理的函数。如果我删除了这个“Count = Count + Affected(....)”，代码工作正常。如果我添加它，“Loop While”会抛出错误 91。如果我添加一个消息框来打印移动 eventRange 前后的行号，结果是“MsgBox(”After call move next:” & eventRange.Row )" 会抛出错误 91。

因此，我现在很困惑这个问题是由内部函数还是由 eventRange 引起的。希望有人能指出我的错误。非常感谢。

以下是内部函数的代码：

```
Function Affected(markerId As Integer) As Integer

'initialized return value'
AffectedCoummters = 0

'get total financial sheets'
Dim totalFinancial As Integer
totalFinancial = 0
For Each ws In Worksheets
    If InStr(ws.Name, "Financial") > 0 Then
        totalFinancial = totalFinancial + 1
    End If
Next

Dim i As Integer
'run through all financial sheets'
For i = 1 To totalFinancial

    'get current financial sheet'
    Dim financialWS As Worksheet
    Set financialWS = Worksheets("Financial Sheet" & i)

    'get total rows of current operation sheet'
    Dim rowSize As Long
    rowSize = financialWS.Range("A" & financialWS.Rows.Count).End(xlUp).Row

    'if reach the maximum number of rows, the value will be 1'
    'reInitialize rowSize based on version of Excel'
    If rowSize = 1 Then
        If Application.Version = "12.0" Then
            'MsgBox ("You are using Excel 2007")'
            If InStr(ThisWorkbook.Name, ".xlsx") > 0 Then
                rowSize = 1048576
            Else
                'compatible mode'
                rowSize = 65536
            End If
        ElseIf Application.Version = "11.0" Then
            'MsgBox ("You are using Excel 2003")'
            rowSize = 65536
        End If
    End If

    'filter by marker id first inside current financial sheet'
    Dim findMarker As Range
    Set findMarker = financialWS.Columns("K:K").Find(markerId, , xlValues, xlWhole)

    'if found any given marker id'
    If Not findMarker Is Nothing Then

        Dim firstAddress As String
        firstAddress = findMarker.Address

        'check all matched marker id'
        Do

                    AffectedCommuters = AffectedCommuters + financialWS.Range("O" & findMarker.Row).Value

            'move to next'
            Set findMarker = financialWS.Columns("K:K").FindNext(findMarker)

        Loop While Not findMarker Is Nothing And findMarker.Address <> firstAddress

    End If

Next i

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:19:33.820

抱歉，我没有足够的代表发表评论，所以我必须在这里回答:(只是想说虽然这是使用的标准程序

```
 Loop While Not eventRange Is Nothing And eventRange.Address <> eventFirstAddress 
```

在这种类型的过程中，如果 eventRange 实际上是 Nothing，则该行将抛出错误 91，因为 eventRange.address 不存在。这意味着一旦你找到了一些东西，你就不能以这样的方式修改行，这样就不会再使用 .findnext 找到它了。

退出 do...循环后，您可以修改范围以适应... 也许您想使用一个数组来保存 .find...findnext 结果中的所有行，然后在 Do 之后对其进行操作。 ..环形

# winapi - 具有原生 win7 外观的 MFC 彩色按钮

> ID：15996331
> 
> 赞同：2
> 
> 时间：2013-04-14T06:17:54.413
> 
> 标签：winapi, mfc, themes, win32gui, uxtheme

我正在使用 MFC 创建一个对话框项目并尝试为按钮赋予颜色。

我开始知道你能做的唯一方法是让按钮所有者绘制。`OnCtlColor()`不适用于按钮。

我可以为按钮上色`OnDrawItem`，但问题是，在此过程中，3D 酷炫的外观（在 Win7 中获得的略微圆角）丢失了。

有什么方法可以保留原始外观并在其上为按钮着色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:42:25.630

这不是一项微不足道的任务。只要您使用主题控件（您想要的），您就不能做超出主题允许的事情。

您将不得不自己重新实现按钮的绘制，尽可能使用主题 API 来保留主题外观，同时潜入您的颜色。

虽然请注意，当您设置以下内容时，您几乎无法实现比 .NET WinForms 所做的更好的事情`Button.BackColor`：

![在此处输入图像描述](https://i.stack.imgur.com/zaAtI.png)

另请参阅问题[如何设置按钮背景颜色？](https://stackoverflow.com/q/5869489/850848)

反汇编 WinForms`ButtonStandardAdapter.PaintWorker`会给你一些你需要使用的想法和 API。请注意，您需要进行大量编码！

对于 C++/MFC 代码，请查看CodeProject 上[以 Vista 为主题的 Owner-Drawn 和 Full-Custom Push/Menu/Image Buttons](https://www.codeproject.com/Articles/18559/Vista-themed-Owner-Drawn-and-Full-Custom-Push-Menu)。这可能实际上是你想要的（`SetBackgroundColor`方法），所以你可以重用它。

# c++ - C++11 是否允许非匿名联合包含静态数据成员？

> ID：15996333
> 
> 赞同：7
> 
> 时间：2013-04-14T06:18:19.040
> 
> 标签：c++, c++11, static-members, unions

在 C++11 中，我声明了以下联合：

```
union U4 {
    char c;
    int i;
    static int si;
}; 
```

当我使用 g++ 4.7.0 使用 -std=c++11 -pedantic-errors 编译此代码时，我收到以下错误（经过少量编辑）：

> 错误：本地类“联合 U4”不应具有静态数据成员“int U4::si”[-fpermissive]
> 错误：“U4::si”可能不是静态的，因为它是联合的成员

据我所知，FDIS (N3242) 没有明确*允许*命名联合的静态数据成员。但我也没有看到 FDIS 在哪里*不允许*命名联合的静态数据成员 FDIS 确实反复提到可以用“非静态数据成员”[第 9.5 节第 1 段]做什么。相比之下，这表明该标准允许联合的静态数据成员。

我对联合的静态数据成员没有任何用处。如果我需要它，我可能会通过包含匿名联合的类获得足够接近的效果。我只是想了解标准的意图。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T07:48:02.300

是的，这是允许的。标准的第 9 节使用`class`类、结构和联合一词，除非另有明确提及。对静态工会成员的唯一限制是本地工会 (9.4.2/5) 和匿名工会 (9.5/5)。

```
#include <iostream>

union Test
{
    static int s;   
};

int Test::s;

int main()
{
   Test::s = 1;
   std::cout << Test::s;  
} 
```

在[LiveWorkSpace](http://liveworkspace.org/code/nwjRT%246)上输出。请注意，它可以在 Clang 3.2 上编译，但不能在 gcc 4.8.0 或 Intel 13.0.1 上编译。看来这是一个 gcc/Intel 错误。

# sql-server - 此查询如何在执行计划中生成两个连接运算符？

> ID：15996334
> 
> 赞同：5
> 
> 时间：2013-04-14T06:18:26.080
> 
> 标签：sql-server, sql-server-2008, join, sql-execution-plan

empno 上具有聚集唯一索引的表结构。

```
CREATE TABLE [dbo].[EMP](
    [EMPNO] [int] NOT NULL,
    [ENAME] [varchar](10) NULL,
    [JOB] [varchar](9) NULL,
    [MGR] [int] NULL,
    [HIREDATE] [datetime] NULL,
    [SAL] [int] NULL,
    [COMM] [int] NULL,
    [DEPTNO] [int] NULL
) ON [PRIMARY] 
```

询问

```
SELECT sal,sum(sal) over(PARTITION BY empno)
FROM emp 
```

查询计划

![在此处输入图像描述](https://i.stack.imgur.com/SV2xx.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:26:18.820

具有窗口聚合的计划通常使用公共子表达式假脱机。这种类型的计划的一个很好的写在这里是[分区和公共子表达式假脱机](http://sqlblog.com/blogs/paul_white/archive/2010/07/28/partitioning-and-the-common-subexpression-spool.aspx)

假设表有以下行

```
CREATE TABLE [dbo].[EMP](
    [EMPNO] [int] NOT NULL,
    [SAL] [int] NULL) 

INSERT INTO [dbo].[EMP] 
VALUES (1,1),
       (1,2), 
       (1,3),
       (1,4), 
       (2,1),
       (2,2) 
```

它总共有 6 行，有 2 个不同的`EMPNO`值。显示实际发出的行数的实际执行计划如下。

![在此处输入图像描述](https://i.stack.imgur.com/5KnoW.png)

计划顶部的段迭代器向通过它的行添加一个标志，指示它何时是新分区的开始（`empno`即已更改）。

紧靠其左侧的假脱机（主假脱机）一次从段迭代器中获取一行，并将其插入到 tempdb 中的工作表中。一旦它得到表明一个新组已经开始的标志，它就会向嵌套循环运算符的顶部输入返回一行。

这会导致在工作表中的行（计划中的辅助假脱机）上调用流聚合，`SUM([SAL])`然后计算此值与工作表中的行（计划中的第三个假脱机运算符）在工作表被截断，为新组做好准备。

主段线轴发出一个虚拟行以处理最终组，这就是为什么发出的实际行数显示为 3（组数加一）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:00:05.057

带有子句的聚合函数`OVER`可以这样重写： FROM table AS x INNER JOIN (SELECT partition columns , AggregateWithoutOverClause(...) ... FROM ...) AS y ON x.PartitionColumns = y.PartitionColumns (如果分区列是强制性的- 非空）。

例子：

```
SET STATISTICS IO ON;
SET NOCOUNT ON;

-- OP's query
SELECT sal,sum(sal) over(PARTITION BY empno) 
FROM emp;

-- Reqwriten query
SELECT a.sal, b.SumSal
FROM emp a
INNER JOIN (SELECT EMPNO, SUM(sal) AS SumSal FROM emp GROUP BY EMPNO) b ON a.EMPNO = b.EMPNO; 
```

结果：

```
sal         
----------- -----------
1           10
2           10
3           10
4           10
1           3
2           3

Table 'Worktable'. Scan count 3, logical reads 21, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'EMP'. Scan count 1, logical reads 2, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

sal         SumSal
----------- -----------
1           10
2           10
3           10
4           10
1           3
2           3

Table 'Worktable'. Scan count 3, logical reads 21, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'EMP'. Scan count 1, logical reads 2, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0. 
```

执行计划： ![在此处输入图像描述](https://i.stack.imgur.com/oSaLj.png)

这将仅解释*最后一个 join*： ![在此处输入图像描述](https://i.stack.imgur.com/CIHI9.png)

*第一次连接*的解释可以在 Per-group processing / [Partitioning and the Common Subexpression Spool](http://sqlblog.com/blogs/paul_white/archive/2010/07/28/partitioning-and-the-common-subexpression-spool.aspx)部分找到。

# hibernate - 休眠瞬态对象异常

> ID：15996338
> 
> 赞同：0
> 
> 时间：2013-04-14T06:19:01.903
> 
> 标签：hibernate

我正在用java编写休眠查询..

在我的应用程序中，我有用户和他的业务伙伴作为另一个用户。

创建用户时，他可以选择已经存在的合作伙伴作为另一个用户。

尚未创建新用户对象，因此它为空

```
user.setUserId(null)//as hibernate automatically increment the userId value

anotheruser.setPartnerId(user.getUserId())
userSet.getPartners.add(user);

session.save(userSet); 
```

它显示瞬态对象异常..

我认为这是因为在保存之前尚未分配主键，这就是为什么它不能在那里设置partnerid ..任何人都可以建议如何最好地实现这一点..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:42:58.523

`user`在保存之前尝试保存`userSet`。我的猜测是没有为该集合配置级联保存，因此您正在尝试保存指向未保存的瞬态引用（用户）的链接。

您应该将实体类和映射添加到问题中，否则一切都是猜测！

# llvm - 使用我自己的通行证（不是预定义的通行证）的结果进入下一个通行证

> ID：15996339
> 
> 赞同：0
> 
> 时间：2013-04-14T06:19:08.930
> 
> 标签：llvm

我创建了一个路径配置文件的传递，然后将结果存储在不同的数据结构中，例如与路径相对应的块、路径中的边等。我对每个都有不同的变量和数据结构。

有没有办法在我写的另一遍中直接使用这些变量？如果是，如何？（我不确定 getAnalysisUsage 是否适用于此？）需要紧急帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T00:28:52.297

这个答案可能会迟到，但我有同样的问题，遇到了你的帖子，感谢[Oak](https://stackoverflow.com/users/242762/oak)指出了正确的方向。所以我想在这里分享一些代码。

假设您有两个通行证，第一个是 your `PathProfilePass`，第二个是 your `DoSomethingPass`。第一个通道包含您收集并与第二个路径共享的数据；这里不需要做任何特别的事情：

```
/// Path profiling to gather heaps of data.
class PathProfilePass: public llvm::ModulePass {

  public:

    virtual bool runOnModule(llvm::Module &M) {

        // Create goodness for edges and paths.
        ...
    }

    std::set<Edges> edges;   ///< All the edges this pass collects.
    std::set<Paths> paths;   ///< All the paths this pass collects.
}; 
```

有趣的事情发生在第二遍。你需要在这里做两件事：

1.  指定第二遍对第一遍的依赖关系：参见[getAnalysisUsage](http://llvm.org/docs/WritingAnLLVMPass.html#the-getanalysisusage-method)方法。
2.  从第一遍访问数据：请参阅[getAnalysis](http://llvm.org/docs/WritingAnLLVMPass.html#the-getanalysis-and-getanalysisifavailable-methods)方法。

在代码方面，第二遍看起来像这样：

```
/// Doing something with edge and path informations.
class DoSomethingPass: public llvm::ModulePass {

  public:

    /// Specify the dependency of this pass on PathProfilePass.
    virtual void getAnalysisUsage(llvm::AnalysisUsage &AU) const {
        AU.addRequired<PathProfilePass>();
    }

    /// Use the data of the PathProfilePass.
    virtual bool runOnModule(llvm::Module &M) {

        PathProfilePass &PPP = getAnalysis<PathProfilePass>();

        // Get the edges and paths from the first pass.
        std::set<Edges> &edges = PPP.edges;
        std::set<Paths> &paths = PPP.paths;

        // Now you can noodle over that data.
        ...
    }
}; 
```

*免责声明：*我尚未编译此代码，但这是对您对我有用的示例的改编。希望这很有用:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:37:07.387

设置从第 2 遍到第 1 遍的依赖关系（通过覆盖`getAnalysisUsage`和调用`getAnalysis`- 请参阅[程序员指南以编写](http://llvm.org/docs/WritingAnLLVMPass.html#specifying-interactions-between-passes)关于如何执行此操作的遍）。一旦你获得了第一遍的实例，你就可以像使用任何其他 C++ 对象一样使用它。

# c# - 如何测试窗口是否被拖动 C# WPF

> ID：15996344
> 
> 赞同：8
> 
> 时间：2013-04-14T06:19:41.760
> 
> 标签：c#, wpf

我有一个无标题窗口，因为我想创建自己的窗口样式。

标题和最小化、最大化和关闭按钮位于停靠面板中。我添加了以下事件处理程序来最大化、恢复和拖动窗口。

当窗口最大化时，问题就来了。

我发现，每当我单击标题时，就会恢复。当我只希望它被双击或拖动时恢复。我可以看到它为什么会发生，但不确定如何解决这个问题。

```
 public void TITLEBAR_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        DockPanel dp = (DockPanel)sender;
        Window parentWindow = Window.GetWindow(dp);
        bool doubleClick = IsDoubleClick(sender, e);

        if (e.ChangedButton == MouseButton.Left && e.LeftButton == MouseButtonState.Pressed && !doubleClick)
        {

            if (parentWindow.WindowState == WindowState.Maximized)
            {
                double mouseX = e.GetPosition(parentWindow).X;
                double width = parentWindow.RestoreBounds.Width;
                System.Drawing.Rectangle screenBounds = getCurrentScreenBounds(parentWindow);
                double x = screenBounds.Left + (mouseX - ((width / 100.00) * ((100.00 / screenBounds.Width) * mouseX)));

                if (x < 0)
                {
                    x = 0;
                }
                else
                {
                    if (x + width > screenBounds.Left + screenBounds.Width)
                    {
                        x = screenBounds.Left + screenBounds.Width - width;
                    }
                }

                parentWindow.Left = x;
                parentWindow.Top = screenBounds.Top;
                parentWindow.WindowState = System.Windows.WindowState.Normal;
            }

            parentWindow.DragMove();
            //MessageBox.Show("");
        }

        if (doubleClick)
        {
            if (parentWindow.WindowState == System.Windows.WindowState.Maximized)
            {
                parentWindow.WindowState = System.Windows.WindowState.Normal;
            }
            else
            {
                parentWindow.WindowState = System.Windows.WindowState.Maximized;
            }
        }
    } 
```

随着这个类：

```
public static class MouseButtonHelper
{
    private const long k_DoubleClickSpeed = 500;
    private const double k_MaxMoveDistance = 10;

    private static long _LastClickTicks = 0;
    private static System.Windows.Point _LastPosition;
    private static WeakReference _LastSender;

    public static bool IsDoubleClick(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        System.Windows.Point position = e.GetPosition(null);
        long clickTicks = DateTime.Now.Ticks;
        long elapsedTicks = clickTicks - _LastClickTicks;
        long elapsedTime = elapsedTicks / TimeSpan.TicksPerMillisecond;
        bool quickClick = (elapsedTime <= k_DoubleClickSpeed);
        bool senderMatch = (_LastSender != null && sender.Equals(_LastSender.Target));

        if (senderMatch && quickClick && position.Distance(_LastPosition) <= k_MaxMoveDistance)
        {
            // Double click!
            _LastClickTicks = 0;
            _LastSender = null;
            return true;
        }

        // Not a double click
        _LastClickTicks = clickTicks;
        _LastPosition = position;
        if (!quickClick)
            _LastSender = new WeakReference(sender);
        return false;
    }

    private static double Distance(this System.Windows.Point pointA, System.Windows.Point pointB)
    {
        double x = pointA.X - pointB.X;
        double y = pointA.Y - pointB.Y;
        return Math.Sqrt(x * x + y * y);
    }
} 
```

这可以解决当前屏幕的范围。

```
public static class WindowHelper
{
    public static System.Drawing.Rectangle getCurrentScreenBounds(System.Windows.Window pWnd)
    {
        System.Windows.Forms.Screen parentScreen = GetCurrentScreen(pWnd);

        if (parentScreen == null)
        {
            return System.Windows.Forms.Screen.PrimaryScreen.Bounds;
        }

        return parentScreen.Bounds;
    }

    private static System.Windows.Forms.Screen GetCurrentScreen(System.Windows.Window pWnd)
    {
        System.Drawing.Rectangle intersectingRect = new System.Drawing.Rectangle();
        System.Drawing.Rectangle windowRect = new System.Drawing.Rectangle(Convert.ToInt32(pWnd.Left), Convert.ToInt32(pWnd.Top), Convert.ToInt32(pWnd.Width), Convert.ToInt32(pWnd.Height));
        int largestIntersectingArea = 0;
        System.Windows.Forms.Screen curScreen = null;

        foreach (System.Windows.Forms.Screen s in System.Windows.Forms.Screen.AllScreens)
        {
            if (s.Bounds.IntersectsWith(windowRect))
            {
                intersectingRect = System.Drawing.Rectangle.Intersect(s.Bounds, windowRect);
                int intersectingArea = intersectingRect.Width * intersectingRect.Height;
                if (intersectingArea > largestIntersectingArea)
                {
                    largestIntersectingArea = intersectingArea;
                    curScreen = s;
                }
            }
        }

        return curScreen;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T23:24:41.717

有一个名为 的 WPF 元素（控件）`Thumb`，我用它来制作可拖动的部件。它有一个`DragDelta`事件，您可以使用它来检查可`HorizontalOffset`拖动`VerticalOffset`部分。您可以保存以前的值并检查新值是否相同或更改；这意味着它正在被拖动。

（只是一个对我有用的建议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T05:01:36.927

好的，也许有人会觉得这很有帮助。

我改变了一些东西，以便它通过两个事件识别拖动，在 MouseMove 和 MouseLeftButtonDown 事件中。

MouseLeftButtonDown 在 setStartPosition() 中捕获可能的拖动起始位置。

```
 public void TITLEBAR_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        DockPanel dp = (DockPanel)sender;
        Window parentWindow = Window.GetWindow(dp);
        doubleClick = IsDoubleClick(sender, e);

        if (e.ChangedButton == MouseButton.Left && e.LeftButton == MouseButtonState.Pressed && !doubleClick)
        {
            if (parentWindow.WindowState == WindowState.Maximized)
            {
                setStartPosition(sender, e);
            }
        }

        if (doubleClick)
        {
            if (parentWindow.WindowState == System.Windows.WindowState.Maximized)
            {
                parentWindow.WindowState = System.Windows.WindowState.Normal;
            }
            else
            {
                parentWindow.WindowState = System.Windows.WindowState.Maximized;
            }
        }
    }

    private void TITLEBAR_MouseMove(object sender, MouseEventArgs e)
    {
        DockPanel dp = (DockPanel)sender;
        Window parentWindow = Window.GetWindow(dp);

        if (e.LeftButton == MouseButtonState.Pressed)
        {
            if (IsDragging(sender, e) && !doubleClick)
            {
                if (parentWindow.WindowState == WindowState.Maximized)
                {
                    double mouseX = e.GetPosition(parentWindow).X;
                    double width = parentWindow.RestoreBounds.Width;
                    System.Drawing.Rectangle screenBounds = getCurrentScreenBounds(parentWindow);
                    double x = screenBounds.Left + (mouseX - ((width / 100.00) * ((100.00 / screenBounds.Width) * mouseX)));

                    if (x < 0)
                    {
                        x = 0;
                    }
                    else
                    {
                        if (x + width > screenBounds.Left + screenBounds.Width)
                        {
                            x = screenBounds.Left + screenBounds.Width - width;
                        }
                    }

                    parentWindow.Left = x;
                    parentWindow.Top = screenBounds.Top;
                    parentWindow.WindowState = System.Windows.WindowState.Normal;
                }

                parentWindow.DragMove();
            }
        }

    } 
```

这是修改后的类：

```
public static class MouseButtonHelper
{
    private const long k_DoubleClickSpeed = 500;
    private const double k_MaxMoveDistance = 10;

    private static long _LastClickTicks = 0;
    private static System.Windows.Point _LastPosition;
    private static WeakReference _LastSender;

    private static System.Windows.Point _DragStartPosition;

    public static bool IsDoubleClick(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        System.Windows.Point position = e.GetPosition(null);
        long clickTicks = DateTime.Now.Ticks;
        long elapsedTicks = clickTicks - _LastClickTicks;
        long elapsedTime = elapsedTicks / TimeSpan.TicksPerMillisecond;
        bool quickClick = (elapsedTime <= k_DoubleClickSpeed);
        bool senderMatch = (_LastSender != null && sender.Equals(_LastSender.Target));

        if (senderMatch && quickClick && position.Distance(_LastPosition) <= k_MaxMoveDistance)
        {
            // Double click!
            _LastClickTicks = 0;
            _LastSender = null;
            return true;
        }

        // Not a double click
        _LastClickTicks = clickTicks;
        _LastPosition = position;
        if (!quickClick)
            _LastSender = new WeakReference(sender);
        return false;
    }

    public static void setStartPosition(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        _DragStartPosition = e.GetPosition(null);
    }

    public static bool IsDragging(object sender, System.Windows.Input.MouseEventArgs e)
    {
        System.Windows.Point mousePos = e.GetPosition(null);
        System.Windows.Vector diff = _DragStartPosition - mousePos;

        if (Math.Abs(diff.X) > System.Windows.SystemParameters.MinimumHorizontalDragDistance || Math.Abs(diff.Y) > System.Windows.SystemParameters.MinimumVerticalDragDistance)
        {
            return true;
        }
        return false;
    }

    private static double Distance(this System.Windows.Point pointA, System.Windows.Point pointB)
    {
        double x = pointA.X - pointB.X;
        double y = pointA.Y - pointB.Y;
        return Math.Sqrt(x * x + y * y);
    }
} 
```

# java - Java/Arduino - 从串口读取数据

> ID：15996345
> 
> 赞同：14
> 
> 时间：2013-04-14T06:19:50.873
> 
> 标签：java, serial-port, arduino

我有一个 Java 程序，我必须在其中读取 Arduino 发送的信息。我从[这里](http://playground.arduino.cc/Interfacing/Java)获取了 Java 代码。现在，我真的不明白它是如何工作的，但我尝试修改它并得到了这个：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStream;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;
import java.util.Enumeration;

public class Serial implements SerialPortEventListener {
    SerialPort serialPort;

    private static final String PORT_NAMES[] = {
            "/dev/tty.usbserial-A9007UX1", // Mac OS X
            "/dev/ttyUSB0", // Linux
            "COM3", // Windows
    };

    private BufferedReader input;
    private static OutputStream output;
    private static final int TIME_OUT = 2000;
    private static final int DATA_RATE = 115200;

    public void initialize() {
        CommPortIdentifier portId = null;
        Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();

        while (portEnum.hasMoreElements()) {
            CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
            for (String portName : PORT_NAMES) {
                if (currPortId.getName().equals(portName)) {
                    portId = currPortId;
                    break;
                }
            }
        }
        if (portId == null) {
            System.out.println("Could not find COM port.");
            return;
        }

        try {
            serialPort = (SerialPort) portId.open(this.getClass().getName(),TIME_OUT);

            serialPort.setSerialPortParams(DATA_RATE, SerialPort.DATABITS_8, SerialPort.STOPBITS_1,    SerialPort.PARITY_NONE);

            input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));
            output = serialPort.getOutputStream();

            serialPort.addEventListener(this);
            serialPort.notifyOnDataAvailable(true);
        }
        catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    public synchronized void serialEvent(SerialPortEvent oEvent) {
        if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
            try {
                String inputLine=input.readLine();
                System.out.println(inputLine);
            } catch (Exception e) {
                System.err.println(e.toString());
            }
        }
    }

    public synchronized void close() {
        if (serialPort != null) {
            serialPort.removeEventListener();
            serialPort.close();
        }
    }

    public Serial(String ncom){
        if(Integer.parseInt(ncom)>=3 && Integer.parseInt(ncom)<=9)
            PORT_NAMES[2] = "COM" + ncom;
        initialize();
        Thread t=new Thread() {
            public void run() {
                try {Thread.sleep(1000000);} catch (InterruptedException ie) {}
            }
        };
        t.start();
        System.out.println("Serial Comms Started");
    }

    public synchronized void send(int b){
        try{
            output.write(b);
        }
        catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    public synchronized int read(){
        int b = 0;

        try{
            b = (int)input.read();
        }
        catch (Exception e) {
            System.err.println(e.toString());
        }
        return b;
    }
} 
```

我在主程序中使用我需要的 COM 端口创建对象 Serial，然后在[需要](http://en.wikipedia.org/wiki/Serial_port#Hardware_abstraction)时使用它。`Serial.read``Serial.write`

`Serial.write`效果很好，Arduino 获取数据并将其显示在 LCD 显示器中。问题是`Serial.read`。当程序运行时，它会从串口读取数据（大约每 40 毫秒），但这并不意味着 Arduino 发送了一些东西。Arduino 仅在按下按钮时发送一个字节。因此，当 Java 代码运行时，它会在读取某些内容之前抛出“n”异常，这会造成很大的延迟。

我知道我需要类似的东西`Serial.available()`，我试过了`input.available()`，但它不起作用。我不知道如何解决这个问题。

如果你有一个有效的代码，如果你能把它给我，我会非常感激。我只需要两种方法，读和写，我不在乎代码是如何工作的：D

编辑：

我改变了 Serial 类，现在它又像 apremalal 所说的那样有了这个方法

```
public synchronized void serialEvent(SerialPortEvent oEvent) {

        if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
            try {

                String inputLine=null;
                if (input.ready()) {
                    inputLine = input.readLine();
                    panel.read(inputLine);
                }

            } catch (Exception e) {
                System.err.println(e.toString());
            }
        }       
    } 
```

在另一个班级（在这种情况下为面板）我有这个：

```
public void read(String data){
    System.out.println(data);
    System.out.println(data == "255");
    if(data == "255")
        //code here 
} 
```

它正确打印值但`data == "255"`总是错误的，即使我真的得到了 255 ....我试图这样做`Integer.parseInt`但没有任何改变。为什么是鬼？

编辑2：好的解决了：\

```
public void read(String data){

    serialRead = Integer.parseInt(data);

    if(serialRead == 255)
        //code here 
} 
```

现在它的工作..不知道为什么我必须这样做......嗯，无论如何:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T07:08:33.967

您不想专门编写示例代码中已经存在的读取函数。正如 TheMerovingian 指出的那样，您可以在阅读之前检查输入缓冲区。这是我在一个项目中使用的工作代码。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStream;
import gnu.io.CommPortIdentifier; 
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent; 
import gnu.io.SerialPortEventListener; 
import java.util.Enumeration;

public class SerialTest implements SerialPortEventListener {
SerialPort serialPort;
    /** The port we're normally going to use. */
private static final String PORT_NAMES[] = {                  "/dev/tty.usbserial-A9007UX1", // Mac OS X
        "/dev/ttyUSB0", // Linux
        "COM35", // Windows
};
private BufferedReader input;
private OutputStream output;
private static final int TIME_OUT = 2000;
private static final int DATA_RATE = 9600;

public void initialize() {
    CommPortIdentifier portId = null;
    Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();

    //First, Find an instance of serial port as set in PORT_NAMES.
    while (portEnum.hasMoreElements()) {
        CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
        for (String portName : PORT_NAMES) {
            if (currPortId.getName().equals(portName)) {
                portId = currPortId;
                break;
            }
        }
    }
    if (portId == null) {
        System.out.println("Could not find COM port.");
        return;
    }

    try {
        serialPort = (SerialPort) portId.open(this.getClass().getName(),
                TIME_OUT);
        serialPort.setSerialPortParams(DATA_RATE,
                SerialPort.DATABITS_8,
                SerialPort.STOPBITS_1,
                SerialPort.PARITY_NONE);

        // open the streams
        input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));
        output = serialPort.getOutputStream();

        serialPort.addEventListener(this);
        serialPort.notifyOnDataAvailable(true);
    } catch (Exception e) {
        System.err.println(e.toString());
    }
}

public synchronized void close() {
    if (serialPort != null) {
        serialPort.removeEventListener();
        serialPort.close();
    }
}

public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            String inputLine=null;
            if (input.ready()) {
                inputLine = input.readLine();
                            System.out.println(inputLine);
            }

        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }
    // Ignore all the other eventTypes, but you should consider the other ones.
}

public static void main(String[] args) throws Exception {
    SerialTest main = new SerialTest();
    main.initialize();
    Thread t=new Thread() {
        public void run() {
            //the following line will keep this app alive for 1000    seconds,
            //waiting for events to occur and responding to them    (printing incoming messages to console).
            try {Thread.sleep(1000000);} catch (InterruptedException    ie) {}
        }
    };
    t.start();
    System.out.println("Started");
}
} 
```

编辑：serialEvent 函数负责读取缓冲区。

```
public synchronized void serialEvent(SerialPortEvent oEvent) {
 if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
    try {
        String inputLine=null;
        if (input.ready()) {
            inputLine = input.readLine();
            System.out.println(inputLine);
        }

    } catch (Exception e) {
        System.err.println(e.toString());
    }
 }
// Ignore all the other eventTypes, but you should consider the other ones.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:56:23.920

该类`BufferedReader`有一个方法，如果“缓冲区不为空，或者基础字符流已准备好”，则该[`ready()`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#ready%28%29)方法返回。`True`否则`False`。因此，您可以在方法中添加一个检查，`read()`以确保在尝试读取之前有要读取的数据。

```
public synchronized int read(){

    int b = 0;  

    try{
        if (input.ready()) {
            b = (int)input.read();
        }
    }catch (Exception e) {
        System.err.println(e.toString());
    }
    return b;
} 
```

如果这些事情失败了，看起来代码`try-catch`可以处理，这可能是导致你滞后的原因，因为`try-catch`它非常昂贵。所以`input.ready()`检查应该导致更少的异常。

# ios - 来自代码的 Storyboard UI 测试

> ID：15996347
> 
> 赞同：2
> 
> 时间：2013-04-14T06:21:08.087
> 
> 标签：ios, objective-c, storyboard, uistoryboardsegue, ui-testing

我有一个 iOS 应用程序，我想通过代码测试它的 UI（使用单元测试）。我想模仿用户的活动和故事板活动：点击按钮，点击 barbutton，写入文本字段，执行 segue。

我有问题。我在 NavigationController 中有一个 TableViewConrtoller。首先，如何从代码中访问 TableViewController？

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    UINavigationController *nav = [storyboard instantiateInitialViewController];
    GoodHabitsViewController *good = [nav.viewControllers objectAtIndex:0];

    NSLog(@"%@", good.addButton.title);

    [good performSegueWithIdentifier:@"AddGoodHabitSegue" sender:good]; 
```

NSLog 写入正确的值，按钮的标题是“add”，并且“add”出现在日志中。但是在 performSequeWithIdentifier 之后会出现以下警告：

```
Warning: Attempt to present <AddGoodHabitViewController: 0x74c8310> on <UINavigationController: 0x764e120> whose view is not in the window hierarchy! 
```

如何执行序列，如何推送 addButton (UIBarButton) 以及如何引用`AddGoodHabitViewController`（segue 指向的位置）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:08:18.390

有两种测试可以在 OCUnit 平台上运行——所谓的“应用程序”测试和所谓的“逻辑”测试。

*   只有“应用程序”测试允许您练习 UIViewControllers、UIViews 等。如果您在创建项目时指定了“创建测试目标”，它将使用“应用程序”样式。否则，稍后添加测试集目标，默认情况下使用“逻辑”样式。为了隐藏现有的测试目标以使用“应用程序”测试，TwoBit Labs 有一个很好的：[指南](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/)

*   另一种练习代码直至视图控制器和视图的方法是使用[Cedar BDD 测试框架](https://github.com/pivotal/cedar)。Cedar 测试在 iOS 应用程序内部运行，因此除了能够测试 ViewControllers 和 Views 之外，它还可以在设备或模拟器上进行测试。

*   UIAutomation 允许通过驱动 UI 本身（而不是执行 UI 代码）来执行自动化功能测试。UIAutomation 的问题是，据我所知，它不可能从命令行执行它，因此很难包含在自动化测试套件中——一个由持续集成服务器运行的测试套件。. . . 有人可能会使用 Automator.app 或类似的工具来解决这个问题，但到目前为止还没有。

*   [Calabash](https://github.com/calabash/calabash-ios)是另一个很棒的 UI 测试框架，可以从 cmd-line 运行，因此不受我上面描述的限制，wrt UIAutomation。

*   请记住，自动化功能测试和在代码级别测试 UIViewControllers 和 Views 是两个非常不同的事情。后者当然有价值，只需要正确设置捆绑加载器即可。

**更新：**对于最新版本的 Xcode 5+，应用程序样式测试是默认设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T22:17:49.730

正如错误消息指出的那样，问题在于您试图在`UIViewController`其视图不在`UIWindow`层次结构中的视图上呈现。

最简单的修复方法：

```
- (void)testExample {

    //
    // Arrange
    // Storyboard
    //
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    //
    // Arrange
    // View Controller
    //
    UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"ViewController"];
    [UIApplication sharedApplication].keyWindow.rootViewController = viewController;

    //
    // Act
    //
    [viewController performSegueWithIdentifier:@"ModalSegue" sender:nil];

    //
    // Assert
    //
    XCTAssertEqualObjects(viewController.presentedViewController.title, @"Second");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:40:13.753

单元测试（即通过 Xcode 模板向项目添加单元测试时获得的那些）不是用于测试您的 UI。您需要查看[UI 自动化](http://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html)，它允许您使用 JavaScript 编写 UI 操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T16:05:14.350

查看 KIF。这听起来几乎是你需要的：

[https://github.com/kif-framework/KIF](https://github.com/kif-framework/KIF)

它是一个基于 Objective-C 的 UI 测试框架，与内置于应用程序的 Accessibility 框架集成（就像 UI 自动化所做的那样）。

或按照本教程确保它是您想要的：

[http://www.raywenderlich.com/61419/ios-ui-testing-with-kif](http://www.raywenderlich.com/61419/ios-ui-testing-with-kif)

希望你找到你的解决方案！

# python - 任何具有即时搜索功能的 Python api 文档网站，例如 ruby -docs.com 和 jqapi.com？

> ID：15996350
> 
> 赞同：2
> 
> 时间：2013-04-14T06:21:32.367
> 
> 标签：python, documentation

ruby-docs.com 和 jqapi.com 等实时 api 浏览器网站非常有用，有没有类似的 Python 网站？

更新：

实时是指即时搜索。docs.python.org 写得很好，但搜索起来有点困难（与 ruby​​-docs.com 和 jqapi.co 相比）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:11:28.157

不清楚你在这方面的实时 API 是什么意思，一个 Python API？。

[http://docs.python.org](http://docs.python.org)上的文档非常有用且完整，支持多个版本的 Python 语言（从 2.6 开始）并具有搜索功能。

那里的搜索不像 ruby​​-docs.com 上的那样具有交互性。

我经常使用 docs.python.org 并且个人不会错过这种交互性，因为我的 Python IDE 具有比网站提供的更好的交互信息。

# excel - 哪一个更好地结束宏代码？

> ID：15996357
> 
> 赞同：1
> 
> 时间：2013-04-14T06:22:24.160
> 
> 标签：excel, vba

筛选我的代码，我发现我使用两种方法来结束我的代码（在 = 之后）。只是好奇哪种方法更好用？

例子：

1)`ActiveSheet.Columns("A:BG").EntireColumn.ColumnWidth = [AP2]`

2)`ActiveSheet.Columns("A:BG").EntireColumn.ColumnWidth = Range("AP2").Value`

有什么意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:15:17.093

所有这些都会产生相同的结果

```
[AP2]
[AP2].Value
[AP2].Value2
Range("AP2")
Range("AP2").Value
Range("AP2").Value2
Cells(2, 42)
Cells(2, 42).Value
Cells(2, 42).Value2 
```

它们按效率升序排列（即`Cells`最快）

哪个是“最好的”是主观的，由您决定您的情况。

顺便提一句

`EntireColumn`是多余的，因为`Columns("A:BG")`已经指定了整列。

如果你的目标是紧凑，它也可以写成

```
[A:BG].ColumnWidth = [AP2] 
```

# vim - 如何在不自动完成当前文本的情况下显示omnicomplete的自动完成列表

> ID：15996358
> 
> 赞同：4
> 
> 时间：2013-04-14T06:22:31.283
> 
> 标签：vim, autocomplete, text-editor, omnicomplete

我正在用omnicomplete学习vim。我想知道是否可以在不自动完成当前文本的情况下显示全能列表。例如，

如果我输入“str.c”然后调用omnicomplete，它将显示一个列表，其中包含以“c”开头的可能单词，并自动完成当前文本，例如“capitalize”。

![在此处输入图像描述](https://i.stack.imgur.com/wlLBz.png)

例如，如果我要查找的方法是计数，我必须一直向下滚动列表才能找到它，或者删除“apitalize”部分，然后键入 o 等。是否可以只显示列表，这样如果我在 c 之后调用它，它会显示列表而不自动完成大写？例如像下面这样，我仍然可以输入 o 来快速计数

![在此处输入图像描述](https://i.stack.imgur.com/HHvya.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-14T06:44:56.253

感谢@romainl 评论，我查找了completeopt，我找到了答案[Make Vim completion popup menu work like in an IDE](http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE)。它还有很多其他相关的提示。为了做出问题中描述的行为，

```
:set completeopt=longest,menuone 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:36:34.947

您也可以坚持使用基本的 vim 功能，并`C-e`在完成时使用 while 让 vim 删除列表并返回到您启动完成的点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T08:56:27.937

或者，您可以在保持完成菜单打开的同时按`<C-P>`之后`<C-X><C-O>`返回您键入的内容。

查看`:h ins-completion-menu`更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-27T02:06:29.800

我认为最初的问题是缺少`noinsert`选项`completeopt`。

# java - JScrollPane 根据可用空间调整大小，但只能达到最大大小

> ID：15996364
> 
> 赞同：0
> 
> 时间：2013-04-14T06:23:28.803
> 
> 标签：java, swing, jscrollpane

我在 GridBagLayout 中嵌入了一个 JScrollPane。大多数时候 JScrollPane 的内容小于可用空间。在这种情况下，我希望 JScrollPane 与它需要的大小完全相同。

例如，如果我有 10 行文本，总高度为 100 像素，则 JScrollPane 应该是 100 像素，没有任何滚动条。（这不一定是动态的，如果我可以设置最大尺寸就足够了，内容不会改变。）

仅当我调整 JFrame 的大小并且可用空间变得小于 JScrollPane 的内容时，我希望 JScrollPane 缩小并显示滚动条。

我尝试使用 GridBagConstraints.fill 参数。这适用于将大小调整为任何大小，但它也总是填充整个空间（我认为，如果使用填充参数应该做什么）。

如果我只是通过 setPreferedSize() 设置 JScrollPane 的大小而没有填充参数，并且 Frame 变得小于此 preferedSize，则 scrollPane 立即缩小到一个小块（正如我所读到的，我无论如何都不应该使用 setPreferedSize 方法（？）） .

我还尝试了具有首选和最小尺寸的 BoxLayout，但是如果可用空间变得小于首选尺寸，则 JScollPane 会立即使用它的最小尺寸。

总结一下：我需要一个 JScrollPane，它根据可用空间调整大小，但最多只能达到最大大小。

我必须使用哪些布局和设置才能获得所需的结果？

几个小时以来我一直在努力解决这个问题:(

**编辑：**

这里有几张截图：

Radio 1 和 Radio 2 下方左侧的 JScrollPane。

正常大小的框架，JScrollPane 只使用它需要的空间： ![正常尺寸](https://i.stack.imgur.com/SP0Ab.png)

如果我把它变大，JScrollPane 不会改变（工作）： ![大尺寸](https://i.stack.imgur.com/EOI2o.png)

但是，如果我使 Frame 小于 JScrollpane，组件就会变得混乱： ![小尺寸原样](https://i.stack.imgur.com/Gopaf.png)

我希望它看起来像什么： ![小尺寸](https://i.stack.imgur.com/ajU1Q.png)

# c# - 从后面的代码访问 asp.net 自定义控件的属性

> ID：15996365
> 
> 赞同：0
> 
> 时间：2013-04-14T06:23:31.820
> 
> 标签：c#, asp.net, asp.net-customcontrol

我创建了一个 asp.net 自定义控件

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="control.ascx.cs" Inherits="test.control.control" %>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox> 
```

我已将它放在一个 aspx 页面中，我想使用`Text`自定义控件的属性，但自定义控件没有 Text 属性。

```
<uc1:control runat="server" id="control" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:27:12.003

您需要在代码后面添加一个属性，该属性表示文本框的*文本*属性。

所以在**control.ascx.cs**

```
public string Text
{
    get { return TextBox1.Text; }
    set { TextBox1.Text = value; }
} 
```

然后这将工作

```
<uc1:control runat="server" id="control" Text="My Control" /> 
```

只是为了澄清 - 自定义控件不会自然地继承子控件的属性，例如，如果控件有 2 个文本框控件，您会期望发生什么？因此，对于您希望自定义控件公开的每个属性，您需要在后面的代码中添加一个属性。您甚至可以添加与子控件的属性无关的属性，并将值保存在隐藏字段或控件状态甚至视图状态中。

# javascript - Facebook：使用图形 API（javascript sdk）发布多个链接

> ID：15996372
> 
> 赞同：3
> 
> 时间：2013-04-14T06:24:11.423
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我的要求是，当用户单击按钮时，必须从我们的网站将类似于以下内容的内容发布到用户的墙上。

**样本分享内容**

```
I like the following pages in xyz.com

  1\. link 1
  2\. link 2
  3\. link 3
  4\. link 4 
```

这可以通过 facebook graph API [javascript sdk] 实现吗？如果是这样，怎么办？

**编辑**

目前我能够执行上述操作，但我想分享一个带有可点击文本和 url 的链接。例如`http://www.google.com`，我想显示`Google`为 url 文本，而不是显示。

而不是有这个[http://www.google.com](http://www.google.com)，我想做这个[谷歌](http://www.google.com)

可以这样做吗？是否可以通过API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:59:50.113

对的，这是可能的。您首先必须在 Facebook 上注册一个应用程序。然后，您为具有正确权限的用户创建登录名。最后，您调用 Api 将您的内容发布到他们的墙上。

注册应用程序和登录：http: [//developers.facebook.com/docs/howtos/login/getting-started/](http://developers.facebook.com/docs/howtos/login/getting-started/)

API 调用：http: [//developers.facebook.com/docs/reference/javascript/FB.api/](http://developers.facebook.com/docs/reference/javascript/FB.api/)

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:06:56.650

我想你想要像[collections](https://developers.facebook.com/docs/opengraph/guides/collections/)这样的东西。看看[这个示例图像](https://fbcdn-dragon-a.akamaihd.net/cfs-ak-prn1/676434/492/442052735871758-/Screen%20Shot%202013-03-11%20at%203.06.59%20PM.png)。

这不能快速完成。您需要摆弄打开的图表及其操作。起初这可能需要做很多事情，但结果非常好（如不同的屏幕截图/应用程序示例所示）。这些文档在基础知识方面非常好，并且有很多关于如何归档高级内容的资源。但是对于一个简单的链接列表来说，基础应该足够了。请注意，这不仅仅是“常规”墙帖的结果，而是用户个人资料中的链接集合，这些链接也可以出现在他的墙上。

你不能像你想要的那样只使用“vanilla HTML”来发布这些链接集合，因为它既不受支持，也提供了良好的安全性，但不兼容 UX。

# template-engine - 如何管理网页模板的变量？

> ID：15996374
> 
> 赞同：1
> 
> 时间：2013-04-14T06:24:38.200
> 
> 标签：template-engine

由于现有网页模板的复杂性，我正在尝试开发自己的模板引擎，它的语法更简单，功能也更丰富。

在实现“包含另一个模板”的功能时，我开始思考如何管理被包含模板中的变量，以及模板中包含的更深层次的变量。

似乎添加一些前缀来管理命名空间是为了解决问题，但我认为它会使变量名太长。

那么我怎样才能以一种更好、更简单的方式管理它们呢？

# css - 对齐下拉菜单的右边缘

> ID：15996375
> 
> 赞同：1
> 
> 时间：2013-04-14T06:24:48.697
> 
> 标签：css

我有以下代码从[这里](http://nettuts.s3.amazonaws.com/819_megamenu/demo/index.html#)生成一些胖菜单：

```
<ul id="menu">

        <li class="menu_right"><a href="" class="drop">1 column</a>
            <div class="dropdown_1column align_right">

                    <div class="col_1">

                        <ul class="simple">
                            <li><a href="#">FreelanceSwitch</a></li>
                            <li><a href="#">Creattica</a></li>
                            <li><a href="#">WorkAwesome</a></li>                            
                        </ul>   

                    </div>

            </div>
        </li></ul> 
```

风格是：

```
#menu .menu_right {
    float: right;
    margin-right: 0px;
}
#menu li .align_right {
    /* Rounded Corners */
    -moz-border-radius: 5px 0px 5px 5px;
    -webkit-border-radius: 5px 0px 5px 5px;
    border-radius: 5px 0px 5px 5px;
}
#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
#menu li:hover .dropdown_4columns,
#menu li:hover .dropdown_5columns {
    left: -1px;
    top: auto;
}
#menu li {
    float: left;
    display: block;
    position: relative;
    padding: 4px 10px 4px 10px;
    margin-right: 30px;
    margin-top: 7px;
    border: none;
}
#menu li:hover {
    border: 1px solid #777777;
    padding: 4px 9px 4px 9px;
    -moz-border-radius: 5px 5px 0px 0px;
    -webkit-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
}
#menu li a {        
    display: block;
    outline: 0;     
} 
```

如果从`right:-1px;`中删除`#menu li:hover .align_right`，则下拉列表的右边缘不再与父项的右边缘对齐，即菜单栏中的“1 列”（而不是下拉列表的左边缘与父项对齐）。

**权利的消极立场有什么意义**？通常，左/右的负值具有隐藏元素的目的，就像下拉菜单发生的那样，即它们通常由于左负而被隐藏，并且当左不再为负时显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T05:10:49.490

我得到了解决方案，请检查它[ht​​tp://jsfiddle.net/v4Jwu/](http://jsfiddle.net/v4Jwu/)

**HTML**

```
<select>
<option value="1">Client: Zac Brown Band</option>
<option value="2">Saab</option>
<option value="3">Mercedes</option>
<option value="4">Audi</option>
</select> 
```

**CSS**

```
select { direction: rtl; } 
```

# coding-style - 如果我有两种物理上等价但逻辑上不同类型的数据，那么我应该使用多少个哈希值来存储它们？

> ID：15996376
> 
> 赞同：0
> 
> 时间：2013-04-14T06:25:08.483
> 
> 标签：coding-style

假设我有两组项目，除了它们在程序中的逻辑目的之外，它们是相似的。为它们分配两个散列是更好的编程实践，还是我应该只使用一个散列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:01:08.257

如果将它们存储在同一个哈希表中，则会冒着（可能很小或根本不存在）被另一个覆盖的风险。例如，您正在存储名字和姓氏（两个字符串）。可以想象，一个人的名字是“Jones”，另一个人的姓是“Jones”。

如果上述情况不可行，则没有技术原因不能使用单个哈希表。散列到相同值的项目将与映射到同一存储桶的具有不同散列值的其他项目一起存储在同一个存储桶中，但是只要您在散列冲突后检查实际相等，就可以了。

话虽如此，我仍然更愿意将逻辑项分离到它们自己的哈希表中，而没有非常充分的理由将它们组合起来。

*   处理它们的代码可能更容易编写和维护。
*   调试问题会更容易。
*   较小的哈希表每个桶的项目可能会更少，并略微提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:29:41.507

如果项目集相同，则哈希值也应该相同。

这就像说您可以使用扳手拧紧螺栓或打开窗户，因此它应该表现得像 2 个不同的对象，这是不正确的，因为区分的是您的使用方式，而不是对象本身。

# java - 查找和存储组合

> ID：15996379
> 
> 赞同：1
> 
> 时间：2013-04-14T06:25:46.813
> 
> 标签：java, c++, arrays, permutation, combinations

我有一个仅由 1 组成的 n 位数。我想在所有可能的组合中用 0 替换 1，并将这些组合存储在一个数组中。如何找到所有组合？我正在考虑从一个零开始，然后增加将替换 1 的零的数字。例如，如果有 2 个零，那么我将保持一个零的位置固定并移动另一个，直到它到达末尾，然后我会对另一个零做同样的事情。但随后我将不得不根除重复的组合。基本上，这变得越来越复杂。我想知道找到组合的更好方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:31:32.047

您只是想生成`n-digit binary numbers`. 这意味着您可以生成`2^n`不同的数字。所以你去：

*   首先，计算`2^n`。
*   实现一个循环，从 开始到`0`结束`2^n`。
*   对于每个循环变量，将变量作为十进制并将其转换为二进制并附加一些前导零（如果需要）以使其长度为 n。
*   将二进制文件添加到您的排列数组中。

# python - 在菜单中模拟触发（QAction *）

> ID：15996383
> 
> 赞同：1
> 
> 时间：2013-04-14T06:26:33.453
> 
> 标签：python, qt, pyqt

我正在开发一个使用语音来模拟一些动作的应用程序：拖放、选择项目、单击按钮等。现在我有一个需要模拟的菜单被单击或触发。

```
for linktype in globals.linkTypes.keys():
                    menu.addAction(linktype)
                menu.connect(menu, QtCore.SIGNAL("triggered(QAction *)"), self.__setLinkType)
                menu.exec_(QtGui.QCursor.pos()) 
```

当我在菜单中说出一种链接类型的名称时，我需要它生成触发信号。我怎样才能发出它？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:24:34.897

`QMenu::addAction(const QString&)`返回 created `QAction`，只需调用`trigger()`它。

```
action = menu.addAction(linktype)
...
action.trigger(); 
```

# haskell - Yesod静态文件服务器错误？

> ID：15996384
> 
> 赞同：1
> 
> 时间：2013-04-14T06:26:39.690
> 
> 标签：haskell, yesod

我使用 Yesod（版本 1.1.9.2），并且我正在使用`yesod devel`和/或`cabal build && cabal install && MyWebApp Production`在我的本地 Mac OSX（10.8.2）环境中测试我的网络应用程序。

对于保存在子文件夹中的静态文件，有时会出现 404 错误`/static`。在测试我的应用程序时，我不断修改这些文件夹下的静态文件并查看结果，但在某些时候，服务器开始响应静态文件的 404 错误（不仅是我修改的文件，还有这些文件夹中的任何其他文件）。我怀疑这是 Yesod 的一个错误，我正在考虑在他们的 github repo 上报告一个问题，但是有人有关于这类问题的任何信息吗？

我`yesod-static`的是版本。1.1.2.2。

# css - CSS div 大小和重叠问题

> ID：15996388
> 
> 赞同：0
> 
> 时间：2013-04-14T06:26:54.957
> 
> 标签：css, html

我正在尝试通过她的网站[http://designingforgood.tumblr.com/帮助平面设计师](http://designingforgood.tumblr.com/)

她想要 SnapWidget，它是左下角的六张照片网格，所以我把它放在那里。我担心它会在较小的窗口中被切断，这可能意味着在较小的屏幕上它也不会正确显示。

此外，在不同的浏览器中，与照片网格上方蓝色框的距离会发生变化。它在 Firefox 中看起来比在 chrome 中更远。我担心在其他浏览器中它甚至可能最终重叠。

我在 w3schools 上搜索了答案，但没有找到我要找的东西。我还在stackoverflow上搜索了类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:39:09.197

`div`好吧，您在包含您的照片的内容上具有内联样式，并将其设置`position`为`fixed`. 您的侧边栏也设置为`fixed`。确保该部分可滚动的唯一方法是删除这两个值并从那里修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:49:00.963

1.  从侧边栏内的所有 div 中删除固定位置。

2.  将侧边栏和缩略图都包裹在另一个 div 中，并给`sidebar-container`这个 div 一个 id。您应该最终得到侧边栏的主要结构：

    `<div id="sidebar-container">
    <div id="blue-box">...</div>
    <div id="photo-grid">...</div>
    </div>`

3.  修复您遇到的任何 CSS 问题。确保网站在两种情况下看起来都很好，当侧边栏有固定位置时，当它没有时。也许您想让侧边栏在这两种情况下都能正常工作。

4.  使用 jQuery（我看到你无论如何都加载它）来确定 的高度`#sidebar-container`是否小于窗口的高度，然后才添加`position:fixed;`.

jQuery 代码可能是这样的：

```
function checkHeight() {
  var sidebarHeight = jQuery("#sidebar-container").height();
  var windowHeight = jQuery(window).height();

  if( sidebarHeight <= windowHeight ) {
    jQuery("#sidebar-container").css({ 'position' : 'fixed' });
  } else {
    jQuery("#sidebar-container").removeAttr("style");
  }
}

jQuery(document).ready(checkHeight);
jQuery(window).resize(checkHeight); 
```

因此，大屏幕用户将受益于固定侧边栏，而小屏幕用户将能够通过向下滚动查看整个侧边栏。

# python - Unicode解码错误

> ID：15996389
> 
> 赞同：0
> 
> 时间：2013-04-14T06:27:04.723
> 
> 标签：python, django

我收到一个 UnicodeDecodeError，

```
'utf8' codec can't decode byte 0xe5 in position 1923: invalid continuation byte 
```

我在模板中使用了丹麦语字母“å”。我该如何解决这个问题，然后我可以在我的 Django 项目和数据库中使用非英文字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:39:02.327

这样做我会得到一个类似的错误（提到相同的字节值）：

```
>>> 'å'.encode('latin-1')
b'\xe5'
>>> _.decode('utf-8')
Traceback (most recent call last):
  File "<pyshell#18>", line 1, in <module>
    _.decode('utf-8')
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe5 in position 0: unexpected end of data 
```

这意味着您的数据是用 latin-1 而不是 utf-8 编码的。一般来说，有两种解决方案：如果您可以控制输入数据，请将其重新保存为 UTF-8。否则，当您在 Python 中读取数据时，请将编码设置为 latin-1。对于 django 模板，您应该能够使用第一个 - 您使用的编辑器应该在某处有一个“编码”选项，将其更改为 utf-8，重新保存，一切都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T01:09:26.103

这对我有帮助[https://stackoverflow.com/a/23278373/2571607](https://stackoverflow.com/a/23278373/2571607)

基本上，打开 C:\Python27\Lib\mimetypes.py

代替

```
‘default_encoding = sys.getdefaultencoding()’ 
```

和

```
if sys.getdefaultencoding() != 'gbk':  
    reload(sys)  
    sys.setdefaultencoding('gbk')  
default_encoding = sys.getdefaultencoding() 
```

# c# - Winforms - 将树节点耦合到数据结构的设计模式

> ID：15996391
> 
> 赞同：1
> 
> 时间：2013-04-14T06:27:15.600
> 
> 标签：c#, winforms, design-patterns, data-structures, treeview

我目前有一个显示文件系统树的数据结构，它基本上是一个带有类似类型对象的数组列表的对象。我想在树视图中显示它，并且需要在树视图节点展开、折叠、选择等时运行一些代码。

我的问题 - 是否有一种设计模式或数据结构和树视图之间的耦合方法，每次用户选择某些东西时都不需要我在整个 DS 树中搜索所选节点？

目前，每次触发相关的树视图事件时，我正在搜索具有与所选节点相同的 Text 和 Tag 属性的节点的数据结构。我遇到的情况是，如果节点不是叶子，我必须去重新搜索它的父节点，我担心大树的性能

请记住，数据结构已经继承了一个对象，所以我不能简单地扩展 treenode 类。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T13:45:56.657

您仍然可以扩展 TreeNode，但使用组合添加一个额外的属性，该属性映射到该节点所代表的对象。

您还可以将子节点的逻辑移动到此树节点，而不是将其放在外面

```
public class DomainClass { /*...*/ }

public class DomainTreeNode: TreeNode
{
    public DomainClass Element { get; private set; }

    public DomainTreeNode(DomainClass element): base(element.Name)
    {
        Element = element;

        /* iterate on element's children and add them to the node's 
           Childs collection ...*/ 
    }

} 
```

# mongodb - 在 MongoDB 中使用投影进行查询，PHP 语法？

> ID：15996394
> 
> 赞同：5
> 
> 时间：2013-04-14T06:27:28.167
> 
> 标签：mongodb, mongodb-php

将完成以下 mongodb Shell 所做工作的 php 语法是什么？

```
> db.SoManySins.find({},{"_id":0,"FactoryCapacity":1}) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-14T09:17:56.677

MongoDB PHP 驱动程序函数的命名与它们的 shell 对应函数相似，因此在这种情况下，您将使用[MongoCollection::find()](http://www.php.net/manual/en/mongocollection.find.php)。PHP 驱动程序使用关联数组将字段映射到 MongoDB 查询。

由于 PHP`MongoCollection::find()`文档页面目前不包含投影示例，为了完整起见，我在下面添加了一个示例：

```
<?php
    $m = new MongoClient();
    $db = $m->selectDB('test');
    $collection = new MongoCollection($db, 'SoManySins');

    // Search criteria
    $query = array();

    // Projection (fields to include)
    $projection =  array("_id" => false, "FactoryCapacity" => true);

    $cursor = $collection->find($query, $projection);
    foreach ($cursor as $doc) {
        var_dump($doc);
    }
?> 
```

对于投影规范，您可以在`mongo`shell 中使用 1/0（包含/排除），或等效的真/假常量。

[阅读 PHP MongoDB 驱动程序文档中的教程](http://php.net/manual/en/mongo.tutorial.php)以及查看10gen 网站上的一些[存档演示文稿](http://www.10gen.com/presentations?application=All&programming_lang=109&speaker=&event=&language=All)非常值得。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-16T14:21:58.420

如果您将[MongoDB 驱动程序](http://php.net/manual/en/set.mongodb.php)与 [MongoDB PHP 库结合使用](https://github.com/mongodb/mongo-php-library)

```
require 'vendor/autoload.php'; // include Composer's autoloader

$client = new MongoDB\Client("mongodb://localhost:27017");

$result = $client->your_database_name->SoManySins->find(array(),array('projection' =>array('_id'=>FALSE,'FactoryCapacity' => TRUE)));

foreach ($result as $entry){
    echo "<pre>";
    print_r($entry);
    echo "</pre>";
} 
```

# objective-c - 这是正确使用 NSFetchedResultsController 吗？

> ID：15996395
> 
> 赞同：0
> 
> 时间：2013-04-14T06:27:29.090
> 
> 标签：objective-c, cocoa-touch

使用不需要综合属性的最现代的 Object-C 和 LLVM 编译器使用 NSFetchedResultsController 的 getter 方法是否正确？

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (_fetchedResultsController) {
        return _fetchedResultsController;
    }

    if (!self.managedObjectContext) {
        self.managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Session" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate: self.predicate];
    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *aFetchedResultsController= [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
    aFetchedResultsController.delegate = self;

    NSError *error = nil;
    if (![aFetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return aFetchedResultsController;
} 
```

在我的代码的其他部分，我有这个：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (_fetchedResultsController) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Set" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat: @"sets == %@", self.exercise]];
    [fetchRequest setFetchBatchSize:20];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc]initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return self.fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:47:02.323

在您的第一个示例中，您从未为属性或 ivar 分配任何内容，因此每次访问该属性时都会发生延迟加载。这是不对的。

在您的第二个示例中，您分配给属性（从而触发属性设置器的任何副作用）并返回属性的值（这不会导致很多错误让您陷入无限循环）。它现在可能可以工作，但很容易因粗心的更新而中断。

分配给内部 ivar 并返回它会更干净。

因此，在您的第一个示例结束时：

```
_fetchedResultsController = aFetchedResultsController;
 return _fetchedResultsController; 
```

# ruby-on-rails-3 - 在 Rails 中 add_index :sections, [:name, :page_id] 中的 name 参数是什么意思？

> ID：15996396
> 
> 赞同：0
> 
> 时间：2013-04-14T06:27:31.193
> 
> 标签：ruby-on-rails-3

我试图了解在添加索引的上下文中 :name 参数在 rails 中的含义。总是必须这样吗？如果是这样，这似乎非常多余，所以我想我遗漏了一些东西。**导轨 3.2.13**

```
add_index :sections, [:name, :page_id] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:29:20.080

此行将复合索引添加到 table `sections`，由两列`name`和组成`page_id`。

# jquery - 从 url 表单 jquery/javascript 中获取特定值

> ID：15996397
> 
> 赞同：0
> 
> 时间：2013-04-14T06:27:57.123
> 
> 标签：jquery, url-parsing

我有一个网址，例如[http://www.example.com/wall/post/1234568929842184](http://www.example.com/wall/post/1234568929842184)
现在我想从我的 javascript 或 jquery 的网址中获取 post/ 之后的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:30:21.423

看看[这里](https://stackoverflow.com/a/4758173/1846192)。

在你的情况下：

```
var href = window.location.href;
window.alert(href.substr(href.lastIndexOf('/') + 1)); 
```

# python - 如何编写 python 程序从磁盘映像文件（.raw 文件）中读取数据？

> ID：15996401
> 
> 赞同：4
> 
> 时间：2013-04-14T06:28:37.727
> 
> 标签：python, disk

我需要编写一个程序来使用 512KB 块从磁盘中提取信息。磁盘映像文件为原始格式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T06:37:27.450

打开带有`'rb'`标志的文件以读取字节和[`read`](http://docs.python.org/2/library/stdtypes.html#file.read)您的内容，大小参数为 512 * 2^10（或 512000，具体取决于您的大小是[KB 还是 KiB](http://en.wikipedia.org/wiki/IEEE_1541)。

```
with open('filename', 'rb') as f:
    block = f.read(512 * 2**10)
    while block != "":
        # Do stuff with a block
        block = f.read(512 * 2**10) 
```

# node.js - 发送后无法设置标头

> ID：15996402
> 
> 赞同：4
> 
> 时间：2013-04-14T06:28:54.120
> 
> 标签：node.js, express

我正在使用节点版本 0.10.3 和 Express 3.1.1。

我正在尝试返回一个简单的响应，但出现以下错误：

```
http.js:692
    throw new Error('Can\'t set headers after they are sent.');
          ^
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:692:11) 
```

我已经阅读了很多关于它的内容，并尝试了很多解决方案，但我仍然遇到这个错误。我使用了节点检查器，并且在那行之后我收到了错误-

```
res.render('index', { title: 'Express' }); 
```

**应用程序.js：**

```
/**
 * Module dependencies.
 */

var express = require('express')
  , http = require('http')
  , path = require('path')
  , socketio = require('socket.io');

var app = express()
  , server = http.createServer(app)
  , io = socketio.listen(server);

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'hjs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

server.listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

io.configure('production', function(){
  io.enable('browser client etag');
  io.set('log level', 1);
});

io.configure('development', function(){
  io.set('log level', 1);
});

io.sockets.on('connection', function(socket) {
    socket.on('event', function(event) {
        socket.join(event);
    });
});

require('./routes')(app, io); 
```

**路线/index.js：**

```
var utils = require('../utils')
  , config = require('../config')
  , io;

module.exports = function(app, socketio) {
  io = socketio;
  app.get('/', index);
};

var index = function(req, res){
  res.render('index', { title: 'Express' });
}; 
```

**意见/index.hjs：**

```
<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>{{ title }}</h1>
    <p>Welcome to {{ title }}</p>
  </body>
</html> 
```

**包.json：**

```
{
  "name": "blabla",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "app.js"
  },
  "dependencies": {
    "express": "3.0.3",
    "hjs": "0.0.4",
    "cradle": "0.6.4",
    "twiliosig": "0.0.1",
    "socket.io": "0.9.11"
  },
  "subdomain": "blabla",
  "engines": {
    "node": "0.6.x"
  }
} 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T10:42:55.090

您的 socket.io 版本似乎是一个错误。

用这个：

```
"dependencies": {
  "express": "3.0.x",
  "hjs": "0.0.4",
  "cradle": "0.6.4",
  "twiliosig": "0.0.1",
  "socket.io": "0.9.x"
} 
```

使用 socket.io@0.9.16 测试

# r - 为 R 处理大数据的编程语言

> ID：15996408
> 
> 赞同：0
> 
> 时间：2013-04-14T06:29:34.470
> 
> 标签：r, haskell, clojure

最近我有时间学习数据可视化，作为 Excel 图表的一种替代。我的选择是 R（带有 ggplot2）并且已经开始学习它。

在“R in a nutshell”中，约瑟夫·阿德勒说：

> 通常，我使用像 Perl 这样的工具来预处理大文件，然后再在 R 中使用它们。
> 
> 我建议使用 Perl、Python 或 Ruby 之类的脚本语言来预处理大型、复杂的文本文件并将它们转换为可消化的形式。（附带说明一下，我通常在 Excel 中写出字段名称和长度列表，然后使用 Excel 公式创建 R 或 Perl 代码来加载它们。

其背后的理念是 Unix 哲学——让每个工具都做好自己的工作，让它们一起工作。因此，从长远来看，我计划学习：

*   R 用于可视化，以及
*   未来用于数据处理的另一种编程语言。

问题是要学习哪种语言？

我没有计算机科学背景，同时 Perl 对我来说太难了。我在网上做了一些搜索，发现 Haskell 和 Clojure 很有趣。由于这里有很多程序员+统计学家，我想知道，哪一个作为大数据处理目的与 R 相得益彰？

缺口

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T07:11:28.277

我真的不喜欢在工作流程中使用太多工具。如果我能侥幸只使用 R，我更喜欢那样。您最终不得不手动连续运行一些工具，这使得再次运行需要做更多的工作。或者你花时间连接不同的工具，这需要时间并引入了自己的一系列问题。

对于初学者来说，坚持使用 R 语言还有另一个好处：您将所有时间都花在学习一种语言上，即避免成为万事通但一无所获。

我使用了多种编程语言（R、Python、IDL、Fortran），但对于数据处理，如果我能提供帮助，我倾向于坚持使用纯 R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:15:49.547

我在这个领域选择的个人工具是[Incanter](http://incanter.org/)。

它结合了：

*   受 R 启发的统计/可视化功能
*   Clojure 作为通用编程语言的使用
*   在 JVM 上运行并且可以访问所有 J​​ava 库：如果您想与其他系统集成或直接在生产中使用，这是一个很大的好处。

总的来说，从纯粹的统计角度来看，它还没有 R 复杂，但恕我直言，Clojure 是一种更好、更强大的通用语言。因此，如果您想使用数据构建生产应用程序，则整个包会更有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:45:33.740

我会选择 python，主要是因为：

1.  更容易阅读/理解
2.  [R-python 桥](http://rpy.sourceforge.net/rpy.html)使您可以非常轻松地集成两种语言。

# w3c-validation - W3C 验证 - 省略了“元”的结束标记，但指定了 OMITTAG NO

> ID：15996409
> 
> 赞同：3
> 
> 时间：2013-04-14T06:29:37.593
> 
> 标签：w3c-validation

我收到如下所示的错误

```
 Error Line 6, Column 467: end tag for "meta" omitted, but OMITTAG NO was specified

 …ta,Manufacturing_Industrial,Educational_Training,Teacher,Engineering_Projects">

 ✉

 You may have neglected to close an element, or perhaps you meant to "self-close" an     element, that is, ending it with "/>" instead of ">". 
```

我该如何解决这个问题？

请看下面页面的源代码

```
<!doctype html>
<html>
<head>
<title>Jobslamp-free online resume creation and sharing,fresher jobs,experienced   jobs,India jobs,Kerala jobs</title>

    <meta name="keywords" content="Karnataka,Bangalore_Rural,Healthcare,Office_Assistant,Kerala,Ernakulam,IT_Hardware_Networking,Engineer,Sales___Marketing,Executive,Maharashtra,Mumbai_City,Retailing,Manager,Kollam,CRM_CallCentres_BPO_ITES_Med.Trans,Customer_Care,Hotel_Travel_Tourism_Airlines_Hospitality,Front_Office_Staff,Andhra_Pradesh,Hyderabad,IT_Software,Java_Developer,Pathanamthitta,Manufacturing_Industrial,Educational_Training,Teacher,Engineering_Projects">
    <meta name="description" content="The best job oriented resume sharing system. Create and Publish your online resumes for FREE. Search and apply your dream jobs for FREE. Post your jobs for FREE.">

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T06:39:50.177

错误信息指出了解决方法：将结尾替换`>`为`/>`.

```
<meta name="keywords" content="all your keywords" /> 
```

您需要以`meta`相同的方式修复其他标签。

# ruby-on-rails - 在我的项目中使用现有的 github 存储库

> ID：15996412
> 
> 赞同：0
> 
> 时间：2013-04-14T06:29:47.303
> 
> 标签：ruby-on-rails, ruby, combobox

我一直在为 Rails 应用程序寻找一个好的组合框。

我找到了这个： [https](https://github.com/danielfarrell/bootstrap-combobox/tree/1.1.1) ://github.com/danielfarrell/bootstrap-combobox/tree/1.1.1 ，这正是我要找的。我只是不知道如何让它在 Rails 中工作。我有一个具有 :receiver 的微博，因此在提交该帖子时，该帖子的前面会带有该帖子的首字母缩写词。

我已将 bootstrap-combobox.js 和 bootstrap-typeahead.js 添加到 assets/javascripts 中。我已经包含了 .css 文件。我已经插入了代码：

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: @micropost %> 
  <div class="field">
    <div id="post_form">                
      <%= f.text_area :content, placeholder: "Compose..." %>
    </div>
  </div>
  <div class="span3">

      <%= f.select  :receiver,
      [['all', 'all'],
      ['aicc', 'aicc'],
      ['daf', 'daf'],
      ['faf', 'faf'],
      ['gal', 'gal'],
      ['mcg', 'mcg'],
      ['paq', 'paq'],
      ['self', 'self'],
      ['uyt', 'uty']],
      :class =>"combobox"%> 
     </div>

 <script type="text/javascript">
   $(document).ready(function(){
   $('.combobox').combobox();
   });
 </script> 
```

我得到了所描述的组合框，它可以工作，除了当我提交表单时，它总是发送第一个值“全部”，无论我选择哪个值或我在字段中输入什么。我已经做了插件作者推荐的一些更改，但我仍然得到相同的结果。

我还尝试在部分中使用此代码进行设置：

```
 <f.select> 
  <option></option>
  <option value="self">self</option>
  <option value="all">all</option>
  <option value="aicc">aicc</option>
  <option value="daf">daf</option>
  <option value="faf">faf</option>
  <option value="gal">gal</option>
  <option value="kks">kks</option>
  <option value="mcg">mcg</option>
  <option value="paq">paq</option>
  <option value="tan">tan</option>
  <option value="tas">tas</option>
  <option value="uyt">uyt</option>
</select> 
```

但我不知道如何用这种格式检索值。有没有人知道我可以做些什么来完成这项工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:34:10.260

这与 rails 无关，因为它是一个 HTML 组件。要使用它，您必须将它放在演示文稿中并以常规组合框的形式检索该值。

# qt - qt 项目文件

> ID：15996415
> 
> 赞同：0
> 
> 时间：2013-04-14T06:30:16.147
> 
> 标签：qt

我有一堆 .pro 文件。随之而来的是一个名为 bld_Odyssey_read 的文件（我认为这很重要，但我不知道为什么）。在该文件中有以下几行：

```
; batch file to make save file for Odyssey I/O utilities
; @bld_odyssey_read  to execute

.compile OpenOdysseyFile.pro
.compile OpenPatientIndex.pro
.compile OpenClinicalIndex.pro
.compile ody_mul_cnvrt.pro
.compile pickpick.pro 
```

我不知道如何编译这些文件。我知道它们是 qt 项目文件（如果我错了，请纠正我）。我下载了 qt 编辑器，但我不知道如何处理它们。我更习惯于visual studio，但我知道qt插件与vs express不兼容。如果有人能指出我正确的方向，以便我可以将它们变成可执行程序，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:55:45.140

我不知道该批处理文件是如何工作的（什么是`.compile`？），但这是您如何构建所有内容的方法（一个示例 - 对每个 .pro 文件执行相同操作）：

```
qmake OpenOdysseyFile.pro CONFIG+=release
make 
```

# sql - 如何在ado.net的标签中显示生日提醒

> ID：15996419
> 
> 赞同：2
> 
> 时间：2013-04-14T06:31:26.100
> 
> 标签：sql, sql-server, sql-server-2005, ado.net

我想在我的 ado.net 应用程序中的标签中显示生日提醒。

**我怎么能证明这一点？**

我只想显示在我的字段中具有特定生日的姓名，`name`, `id`，`DateOfBirth`并且他的数据类型是`Datetim`e 值存储在该字段中的`mm/dd/yyyy`格式 。

请帮助我，这对我的项目非常重要

我写了一个查询，但它没有用：

```
select PationName,ContactNo
from Physio_cureTable 
where DateOfBirth between getdate()-1 
                      and getdate() 
```

iam 在我的 ado.net 应用程序中写了下面的代码，但它给了我空白数据，我检查输入今天的日期和月份，然后也显示空白数据

```
 string result = "SELECT PationName FROM Physio_cureTable WHERE CAST(DateOfBirth AS DATETIME)=CAST(GETDATE() AS DATETIME)";
            SqlCommand showresult = new SqlCommand(result, con);

            con.Open();
            string actresult  =(string) showresult.ExecuteScalar();
            con.Close();

            if (!string.IsNullOrEmpty(actresult))
                label18.Text ="Happy Birthday"+actresult+"!";
            else
                label18.Text = "There is No Birthday!!"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:36:42.827

您需要比较两个日期值并忽略它们的时间值。为此，您可以将它们投射到`DATE`然后比较它们；

即（MS SQL 2008）

```
SELECT PationName, ContactNo FROM Physio_cureTable 
WHERE CAST(DateOfBirth AS DATE) = CAST(GETDATE() AS DATE) 
```

GETDATE() 返回今天的日期（有时间，所以你也需要转换它）。

即（MS SQL 2005）

```
SELECT PationName, ContactNo FROM Physio_cureTable 
WHERE DateOfBirth >= DATEADD(day, 0, GETDATE())
AND DateOfBirth < DATEADD(day, 1, GETDATE()) 
```

请注意，这会比较日期，如果实际上您想比较没有年份的日期，您将使用不同的方法：

```
SELECT PationName, ContactNo FROM Physio_cureTable
WHERE  datepart(d, DateOfBirth) = datepart(d, getdate()) AND
datepart(m, DateOfBirth) = datepart(m, getdate()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:52:34.600

假设生日 - '20100414 01:01:01'，因此条件'2013-04-14' - '2013-04-15' 的时间段对您来说是必要的

对于 SQLServer2008+

```
SELECT PationName,ContactNo      
FROM Physio_cureTable
WHERE DateOfBirth >= DATEADD(YEAR, DATEDIFF(YEAR, GETDATE(), DateOfBirth), CAST(GETDATE() AS date))
      AND DateOfBirth < DATEADD(YEAR, DATEDIFF(YEAR, GETDATE(), DateOfBirth), CAST(DATEADD(day , 1, GETDATE()) AS date)) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/85ffa/2)上的演示[](http://sqlfiddle.com/#!3/85ffa/2)

 **对于 SQLServer2005

```
SELECT PationName,ContactNo      
FROM Physio_cureTable
WHERE DateOfBirth >= DATEADD(YEAR, DATEDIFF(YEAR, GETDATE(), DateOfBirth), CAST(datediff(d,0,GETDATE()) AS datetime))
      AND DateOfBirth < DATEADD(YEAR, DATEDIFF(YEAR, GETDATE(), DateOfBirth), DATEADD(day , 1, CAST(datediff(d,0,GETDATE()) AS datetime))) 
```**

# android - Phonegap、BackboneJS、UnderscoreJS、RequireJS 模板问题

> ID：15996420
> 
> 赞同：0
> 
> 时间：2013-04-14T06:31:26.730
> 
> 标签：android, cordova, backbone.js, requirejs, underscore.js

我正在用 Phonegap、BackboneJS、UnderscoreJS、RequireJS 编写一个 Android 应用程序。

我有 4 个模型的集合，它们被传递给一个模板，例如：

```
 initialize: function(){
        var self = this;
        this.collection = new RestaurantsCollection();
        this.collection.fetch();
        this.collection.on("add reset", this.render, this);
      },
render:function () {
    this.$el.html(_.template(HomeViewTemplate, {collection: this.collection}));
    return this;
}, 
```

在模板中我有：

```
<%=collection.length%> //outputs 4
<% collection.each(function(model){ %>
<h1>FOO</h1><br /> //doesnt work at all
<% }); %> 
```

在 Chrome 中，我得到了预期的输出（上图），但是当我在 AND 模拟器中运行它时，我得到了

```
<%=collection.length%> //outputs 0 
```

任何建议表示赞赏。我只需要一些关于问题可能是什么的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T17:25:15.540

我实际上找到了我的答案的解决方案，这里是：

**错误的：**

```
<%=collection.length%> //outputs 4
<% collection.each(function(model){ %>
<h1>FOO</h1><br /> //doesnt work at all
<% }); %> 
```

**正确的**

```
<%=collection.length%> //outputs 4
<% _.each(colleciton.models, function(model){ %>
<%console.log(model.get('id'))%>
<% }); %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:04:08.707

愚蠢的是，集合中的 URL 是 /my-url 并将其更改为 my-url 解决了问题。

# c++ - 海量数据分析

> ID：15996422
> 
> 赞同：2
> 
> 时间：2013-04-14T06:31:49.557
> 
> 标签：c++, algorithm, bigdata

假设我们`1e10`每天大约有几行日志文件，每行包含：一个 ID 号（长度小于 15 位的整数）、一个登录时间和一个注销时间。某些 ID 可能会多次登录和注销。

**问题一**：

如何统计已登录的ID总数？（每个ID不要统计两次或更多）

我在这里尝试使用哈希表，但我发现我们应该获得的内存可能很大。

* * *

**问题 2**：

计算在线用户人数最多的时间。

我想我们可以把一天的时间分割成86400秒，然后对于日志文件的每一行，在线间隔的每一秒加1。或者我可以按登录时间对日志文件进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T06:48:25.870

您可以在 *nix shell 中执行此操作。

1.  `cut -f1 logname.log | sort | uniq | wc -l`
2.  `cut -f2 logname.log | sort | uniq -c | sort -r`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:49:42.967

对于问题 1，忘记 C++ 并使用 *nix 工具。假设日志文件是用空格分隔的，那么给定日志中的唯一登录数由以下公式计算：

```
$ awk '{print $1}' foo.log | sort | uniq | wc -l 
```

Gnu sort，会很乐意对大于内存的文件进行排序。以下是每件作品的作用：

*   *awk*正在提取第一个以空格分隔的列（ID 号）。
*   *sort*正在对这些 ID 号进行排序，因为*uniq*需要排序的输入。
*   *uniq*只返回 uniq 数字。
*   *wc*打印行数，这将是 uniq 数字的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T07:00:57.193

要使问题 2 有意义：您可能必须记录两件事：用户登录和用户注销。两个不同的活动以及用户 ID。如果此列表按活动的时间排序（登录或注销完成）。您只需使用名为 currentusers 的计数器进行扫描：每次登录时添加 1，每次注销时添加 -1。数量（当前用户）达到的最大值是您感兴趣的值，您可能还会对跟踪它发生的时间感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T08:30:19.500

1.  使用[分段树](http://en.wikipedia.org/wiki/Segment_tree)来存储连续 id 的间隔。扫描所有登录事件的日志。要插入 id，首先搜索包含该 id 的段：如果存在，则该 id 是重复的。如果它不搜索 id 之后或之前的段。如果它们存在，则删除它们并根据需要合并新的 id，然后插入新的段。如果它们不存在，则将 id 作为 1 个元素的段插入。

    插入所有 id 后，通过对树中所有段的基数求和来计算它们的数量。

2.  假如说：

    *   给定的 id 在任何给定时间只能登录一次，
    *   事件按时间顺序存储（通常是日志）

    扫描日志并保留`c`当前登录用户数的计数器，以及`m` 找到的最大用户数和相关时间`t`。对于每次登录，递增`c`，对于每次注销，递减它。在每一步更新`m`，`t`如果`m`低于`c`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T06:48:57.433

对于 1，您可以尝试一次使用小到足以放入内存的文件片段。即代替

```
countUnique([1, 2, ... 1000000]) 
```

尝试

```
countUnique([1, 2, ... 1000]) + 
countUnique([1001, 1002, ... 2000]) + 
countUnique([2001, 2002, ...]) + ... + countUnique([999000, 999001, ... 1000000]) 
```

2有点棘手。将工作划分为可管理的间隔（如您所建议的那样）是一个好主意。对于每一秒，使用以下检查（伪代码）查找在 taht 秒内登录的人数：

```
def loggedIn(loginTime, logoutTime, currentTimeInterval):
    return user is logged in during currentTimeInterval 
```

将loginIn应用于所有86400秒，然后最大化86400用户计数列表，找到在线用户数量最大的时间。

# c++ - 为什么我的课程无法访问，而我已经包含了头文件

> ID：15996426
> 
> 赞同：0
> 
> 时间：2013-04-14T06:32:59.523
> 
> 标签：c++

你能帮我理解为什么在这两个字符串中我得到错误：1）C2143：语法错误：缺少';' 在“*”之前 2) 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数。

```
MyString* m_pStr; // Link to a dynamically created string.
MyString* pPrev; // Pointer to the next counter. 
```

**我的字符串.h**

```
#pragma once
#include <iostream>
#include "counter.h"

using namespace std;
class MyString
{
    char* m_pStr;   //String which is a member of the class.
    void CreateArray(const char * pStr);
    Counter* m_pMyCounter; // Pointer to its own counter. 

    public:
        MyString(const char* pStr = "");
        MyString(const MyString & other);
        MyString(MyString && other);
        ~MyString();

        const char * GetString();
        void SetNewString(char * str);

        void printAllStrings(); 
        void ChangeCase();
        void printAlphabetically();
}; 
```

**我的字符串.cpp**

```
#include "myString.h"
#include <iostream>
using namespace std;

MyString::MyString(const char* pStr){   
    this->CreateArray(pStr);
    strcpy(m_pStr, pStr);   
};
void MyString:: CreateArray(const char * pStr){
    int size_of_string = strlen(pStr)+1;    
    m_pStr = new char[size_of_string];  
}

MyString::MyString(const MyString & other){
    this->CreateArray(other.m_pStr);
    strcpy(m_pStr, other.m_pStr);
}

MyString::MyString(MyString && other){
    this->m_pStr = other.m_pStr;
    other.m_pStr = nullptr; 
}

MyString::~MyString(){
    delete[] m_pStr;
}

const char * MyString:: GetString(){
    return m_pStr;
}

void MyString:: SetNewString(char * str){
    this->CreateArray(str);
    strcpy(m_pStr, str);
} 
```

**计数器.h**

```
#pragma once
#include "myString.h"
#include <iostream>
using namespace std;

class Counter{
    private:
        MyString* m_pStr; // Link to a dynamically created string.
        int m_nOwners; // Counter of users of this string.
        MyString* pPrev; // Pointer to the next counter.
    public:
        Counter(); 
        //Copy constructor.
        ~Counter();
        void AddUser();
        void RemoveUser();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:24:29.663

供其他人将来参考，这些是我通常会发现此错误的原因：

*   循环包括（是的，这次就是你）。标头 A 依赖 B 依赖 A。这意味着当您首先包含 A 时，B 会包含在其上方。B 尝试将 A 包含在它之上（再次），但“pragma once”或包含保护阻止了这一点。结果是 B 上面没有 A 的定义，但如果没有 => 这个错误，它将无法工作。
*   包含警卫混乱。您创建新的头文件，许多人有复制/粘贴现有​​头文件的习惯。这个新的头文件可能忘记调整它的包含保护。如果发生这种情况，会有一个包含，但包含保护只会让新的或旧的头文件进入，以先到者为准。最终结果是，在某些包含新标头的文件中，它将不起作用，并且该类将未定义。可能会徘徊很长时间，我已经看到存在这种情况多年未被发现的代码库。不符合“pragma once”用户的条件。
*   实际上忘记写使用中的类/错别字或定义/大小写不同。明显的问题，明显的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T07:00:40.060

您在包含文件中有一个循环。编译器不会执行无限递归，因为您添加了该`#pragma once`选项。

下面是编译器的作用：

1.  阅读 CPP 文件。找到`#include "myString.h"`.
2.  阅读`"myString.h"`文件，找到`#include "counter.h"`.
3.  读取`"counter.h"`文件，找到`#include "myString.h"`，但由于`#pragma once`.
4.  继续`"counter.h"`，阅读该`MyString* m_pStr;`行，不知道是什么`MyString`，失败并显示无用的消息。

现在，解决方案是在头文件中添加每个其他类的声明。也就是说，将以下行添加到 的开头`myString.h`，就在 . 之后`includes`。

```
class Counter; 
```

以下行开头`counter.h`：

```
class MyString; 
```

现在，有了作用域中的声明但没有类定义，有些事情可以做，有些事情不能做：基本上你只能声明指针和引用。该类的任何其他用途都必须转到 CPP 文件。

你甚至可以摆脱这两个递归`includes`！

# python - 当 ssh 连接断开时，如何使 Tornado 不停止？

> ID：15996438
> 
> 赞同：2
> 
> 时间：2013-04-14T06:35:00.983
> 
> 标签：python, shell, python-2.7, tornado

我在linode上启动了Tornado示例Hello World（[http://www.tornadoweb.org/en/stable/](http://www.tornadoweb.org/en/stable/)），我从我的comp（命令行）通过linode上的ssh登录并开始

```
python start.py 
```

但问题是当我的本地计算机进入睡眠状态时，我从命令行的 ssh 连接断开并且龙卷风示例停止。如何使该示例永远运行？

start.py 是

```
import tornado.ioloop
import tornado.web

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Hello, world")

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T06:36:52.367

运行它`nohup python start.py &`

这将在后台运行程序，并且不会在 SSH 连接断开时被终止。您也可以通过断开与服务器的连接来测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:10:09.277

您还可以在 linux 中使用[screen实用程序并在那里运行命令。](http://linux.die.net/man/1/screen)当您的 ssh 连接断开时，屏幕将被分离。要稍后连接到屏幕，请使用 -r(-R) 参数。

# mathjax - MathJax 的内存管理是什么样的？

> ID：15996439
> 
> 赞同：1
> 
> 时间：2013-04-14T06:35:32.167
> 
> 标签：mathjax

我正在构建一个单页应用程序，它可以使用 ajax 动态加载内容并使用 MathJax 排版内容。

我注意到当使用 MathJax 动态排版内容时，即使在页面的一个区域刷新相同的内容（没有插入任何其他内容），浏览器的内存也会不断增加。

所以我猜测 MathJax 完成的排版不会被回收，即使页面的排版部分被刷新。

有没有办法强制回收 MathJax 创建的排版对象，以优化它使用的内存？

# java - 数据表第一行第一列在页面加载时采用默认值

> ID：15996443
> 
> 赞同：0
> 
> 时间：2013-04-14T06:36:19.713
> 
> 标签：java, jsf, servlets, icefaces, jsf-1.2

我有一个包含员工详细信息的列表。

我正在使用 List 绑定数据表，如下所示：

```
<ice:dataTable id="dataExportTable"
                       var="employee"
                       value="#{dataExportData.employees}"
                       rows="5"
                       styleClass="dataPaginatorDataTable"
                       cellpadding="7">
                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="column1"
                                            value="ID"/>
                        </f:facet>
                        <ice:outputText id="number"
                                        value="#{employee.id}"/>
                    </ice:column>

                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="column2"
                                            value="First Name"/>
                        </f:facet>
                        <ice:outputText id="firstName"
                                        value="#{employee.firstName}"/>
                    </ice:column>

                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="column3"
                                            value="Last Name"/>
                        </f:facet>
                        <ice:outputText id="lastName"
                                        value="#{employee.lastName}"/>
                    </ice:column>

                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="column4"
                                            value="Phone"/>
                        </f:facet>
                        <ice:outputText id="phoneNo"
                                        value="#{employee.phoneNumber}"/>
                    </ice:column>
                </ice:dataTable> 
```

`int`除了第一行第一列的值为 0（即成员变量的默认值）之外，所有值都在基于员工的数据表中正确显示。我正在使用 IceFaces 1.8.1 (jsf 1.2)

请让我知道错误在哪里:(

# java - 使用 CardLayout 的小程序为空白

> ID：15996454
> 
> 赞同：0
> 
> 时间：2013-04-14T06:37:27.743
> 
> 标签：java, swing, jpanel, cardlayout

我花了很多时间试图研究我的代码的问题，但我似乎找不到它。我没有使用 CardLayout 的经验，但是基于其他实例，我觉得我已经正确地实现了它。我正在使用扩展 JPanel 的自定义面板开发 2d 游戏。我知道我的面板可以工作，因为我已经在其他驱动程序小程序中单独测试过它们。每次我运行我的小程序时，屏幕都是空白的。我很困惑为什么会这样。编译时我没有收到任何错误或警告。

这是我的小程序的代码，任何帮助将不胜感激：

```
 public class DodgeDefender extends JApplet
    {
        private final int WIDTH = 800, HEIGHT = 800;
        private JPanel cardPanel;
        private IntroScreen intro;
        private MainGame main;
        private CardLayout manager;

        public void init()
        {
               setSize(WIDTH, HEIGHT);

               cardPanel = new JPanel();
               manager = new CardLayout();
               cardPanel.setLayout(manager);

               intro = new IntroScreen();
               main = new MainGame();

               cardPanel.add(intro, "IntroScreen");
               cardPanel.add(main, "MainGame");

               manager.show(cardPanel, "IntroScreen");

        }

        public void mainGame()
        {
               manager.show(cardPanel, "MainGame");
        }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:42:45.707

您没有将 cardPanel 添加到小程序中，因此它没有要显示的任何子组件：

```
this.add(cardPanel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T17:11:36.057

问题出在这部分：-

```
cardPanel.add(intro, "IntroScreen");
cardPanel.add(main, "MainGame"); 
```

你应该试试这个： -

```
add(intro,"IntroScreen");
add(main,"MainGame"); 
```

# c++ - 如何在具有返回类型的函数中返回 None？

> ID：15996458
> 
> 赞同：2
> 
> 时间：2013-04-14T06:38:35.417
> 
> 标签：c++

我有以下代码：

```
#include<iostream>
#include <vector>
using namespace std;
template<class T>
class Stack
{
private:
    vector<T> stack;

public:
    T Pop()
    {
        if (stack.size()!=0)
        {
            T temp;
            temp=stack[stack.size()-1];
            stack.erase(stack.begin()+stack.size()-1);
            return temp;
        }
        else
                   //return nothing
                   ^^^^^^^^^^^^^^^^
                   //How i can do above by code    
    } 
```

在弹出功能中：我想要 if `stack.size==0`; 弹出函数不返回任何内容

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T07:13:33.347

这基本上是一个关于如何处理[非全部函数](http://en.wikipedia.org/wiki/Partial_function)的问题——这些函数不一定是为所有可能的输入定义的。有很多方法可以解决它，尽管它们都不是类型安全的：

1.  有两个单独的函数用于检索和擦除堆栈的顶部元素，很像[`std::stack::top()`](http://en.cppreference.com/w/cpp/container/stack/top)和[`std::stack::pop()`](http://en.cppreference.com/w/cpp/container/stack/pop)。

2.  使用引用参数并返回一个`bool`指示是否返回元素：

    ```
    bool pop(T& value) {
      if (stack.empty())
        return false;
      value = stack.back();
      stack.pop_back();
      return true;
    } 
    ```

    调用者可以写：

    ```
    T value;
    if (stack.pop(value)) {
      use(value);
    } 
    ```

3.  返回一个[`boost::optional<T>`](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/boost_optional/examples.html#boost_optional.examples.optional_return_values)。

4.  返回一个默认构造的`T`实例。这要求它`T`是可默认构造的，这已经由一些[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)成员函数强加。

5.  抛出异常，记录违反了先决条件。

6.  未定义弹出空堆栈的行为。

我推荐 #1、#2 或 #3，具体取决于偏好和最适合周围代码的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T07:00:14.037

您可能仍然希望以与 std::stack 相同的方式拆分为`std::stack::top`and `std::stack::pop`。你不想`pop`返回一个值。

这是来自[http://cpptruths.blogspot.com.au/2005/10/why-does-stdstackpop-returns-void.html的解释](http://cpptruths.blogspot.com.au/2005/10/why-does-stdstackpop-returns-void.html)

[http://www.sgi.com/tech/stl/stack.html](http://www.sgi.com/tech/stl/stack.html)解释

> [3] 有人可能想知道为什么 pop() 返回 void 而不是 value_type。也就是说，为什么必须使用 top() 和 pop() 来检查和删除顶部元素，而不是将两者组合在一个成员函数中？事实上，这种设计是有充分理由的。如果 pop() 返回顶部元素，它必须按值而不是按引用返回：按引用返回会创建一个悬空指针。然而，按值返回是低效的：它涉及至少一个冗余的复制构造函数调用。由于 pop() 不可能以既高效又正确的方式返回一个值，所以更明智的是它根本不返回任何值并要求客户端使用 top() 来检查值栈顶。

std::stack < T > 是一个模板。如果 pop() 返回顶部元素，则根据上述说明，它必须按值而不是按引用返回。这意味着，在调用方，它必须被复制到另一个 T 类型的对象中。这涉及复制构造函数或复制赋值运算符调用。如果这种类型 T 足够复杂并且在复制构造或复制分配期间抛出异常怎么办？在这种情况下，右值，即栈顶（按值返回）就简单地丢失了，并且没有其他方法可以从栈中检索它，因为栈的弹出操作已成功完成！

实践方法是一起使用`pop()`, `top()`, `empty()`：

```
T top()
{
   return stack[size()-1];
}

void pop()
{
   stack.erase(stack.begin()+stack.size()-1);
} 
```

用法：

```
if (!stack.empty())
{
    T t = top();
    pop();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T06:48:25.213

有几种选择。一种是返回一个`T`使用标准构造函数构造的实例：

```
return T(); 
```

另一种方法是返回一个特殊的哨兵包装对象，它可以隐式转换为`T`，并有一个比较运算符，以便用户可以检查它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T07:08:24.967

您还可以执行一些操作，例如将 pop 方法声明为 void 甚至更好，bool 以获取操作的状态并通过引用将 T 类型作为参数传递，以便将结果存储在其中：

```
bool Pop (T& item)
{
    if (stack.size() != 0)
       {
           // your code
           item = temp; // you can even use item instead of temp from the begining

           return true;
       }
    return false;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T07:12:16.450

这是执行此操作的一种方法。这个想法是将布尔标志与结果一起打包在一个元组中。该标志指示是否有结果。请注意，当前的实现要求 T 是默认可构造的。

```
template<class T>
class Stack
{
private:
    std::vector<T> stack;

public:
    typedef std::tuple<bool, T> return_t;

    void Push(const T& t)
    {
        stack.push_back(t);
    }

    return_t Pop()
    {
        if (stack.size()!=0)
        {
            T temp;
            temp=stack[stack.size()-1];
            stack.erase(stack.begin()+stack.size()-1);
            return std::make_tuple(true, temp);
        }
        else
            return std::make_tuple(false, T());
    }
};
int main()
{
    Stack<int> my_stack;
    bool has_result;
    int result;

    my_stack.Push(5);
    std::tie(has_result, result) = my_stack.Pop();
    std::cout << "has result = " << has_result << "\n";
    std::cout << "result = " << result << "\n";

    std::tie(has_result, result) = my_stack.Pop();
    std::cout << "has_result = " << has_result << "\n";
} 
```

# php - 如何从 URL 中删除网页扩展？

> ID：15996464
> 
> 赞同：0
> 
> 时间：2013-04-14T06:39:37.893
> 
> 标签：php, .htaccess, url

我想从 URL 中删除网页扩展，有人给了我 .htaccess 的代码。但是当我打开重写模块时它可以在 localhost一些访问 example.com/cool.php 到 example.com/cool.... 以及关于 godaddy 重写模块的帮助 我联系了他们，他们还没有回复我。下面是那个人给我的代码..谢谢

```
RewriteEngine On
RewriteBase /

# remove enter code here.php; use THE_REQUEST to prevent infinite loops
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301]

# remove index
RewriteRule (.*)/index$ $1/ [R=301]

# remove slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /$
RewriteRule (.*)/ $1 [R=301]

# add .php to access file, but don't redirect
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:33:29.547

假设您想显示“漂亮”的 URL ( `example.com/cool`) 但仍从原始请求 ( `example.com/cool.php`) 中获取数据，您可以在根目录的 .htaccess 文件中尝试此操作：

### 更新为使用任何目录中的 php 文件：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

# Get the URI-path directly from THE_REQUEST variable
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\s/(.*)\.php [NC]
# Strip the extension and redirect permanently
RewriteRule  .*   /%2   [R=301,L,NC]

# Now the browser's address bar shows: http://example.com/cool

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.php  [NC]
# Map internally to the original resource
RewriteRule  ^(.*)/?   /$1.php  [L,NC]

# Maps silently to: http://example.com/cool.php 
```

# sql - 从两个创建一个表的 SQL 脚本

> ID：15996465
> 
> 赞同：2
> 
> 时间：2013-04-14T06:39:45.667
> 
> 标签：sql, sql-server, stored-procedures, create-table

有没有一种方法可以创建一个基于其他 2 个表自动创建具有所有结构（列、约束、PK、FK、索引等）的表的过程？

例如：

桌子`a`

```
id
a1 
a2 
```

桌子`b`

```
id 
b1
b2
b3 
```

该过程将接收 3 个表名（`a`和`b`- 输入，`c`- 输出）并将创建`c`包含列的表`id,a1,a2,b1,b2,b3`，包括所有数据 - 约束、PK、FK、索引等。

我有超过 80 对表要创建，所以手动创建它会像永远一样......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:29:45.113

**更新：**

此脚本从多个表中重新创建 DDL（列、FK、PK、非聚集索引）。可能对你有帮助-

```
 DECLARE 
          @table1_name SYSNAME
        , @table2_name SYSNAME
        , @name_for_new_table SYSNAME
        , @schema_for_new_table SYSNAME

    SELECT 
          @table1_name = 'dbo.WorkOut'
        , @table2_name = 'dbo.WorkPlace'
        , @schema_for_new_table = 'dbo' 
        , @name_for_new_table = 'TableMerge'

    DECLARE @SQL NVARCHAR(MAX) = ''

    ;WITH tbl AS 
    (
        SELECT o.[object_id]
        FROM sys.objects o WITH (NOWAIT)
        WHERE SCHEMA_NAME(o.[schema_id]) + '.' + o.name IN (@table1_name, @table2_name)
            AND o.[type] = 'U'
            AND o.is_ms_shipped = 0
    ),
    index_column AS 
    (
        SELECT 
              ic.[object_id]
            , ic.index_id
            , ic.is_descending_key
            , ic.is_included_column
            , c.name
        FROM sys.index_columns ic WITH (NOWAIT)
        JOIN sys.columns c WITH (NOWAIT) ON ic.[object_id] = c.[object_id] AND ic.column_id = c.column_id
        WHERE ic.[object_id] IN (SELECT t.[object_id] FROM tbl t)
    ),
    fk_columns AS 
    (
         SELECT 
              k.constraint_object_id
            , cname = c.name
            , rcname = rc.name
        FROM sys.foreign_key_columns k WITH (NOWAIT)
        JOIN sys.columns rc WITH (NOWAIT) ON rc.[object_id] = k.referenced_object_id AND rc.column_id = k.referenced_column_id 
        JOIN sys.columns c WITH (NOWAIT) ON c.[object_id] = k.parent_object_id AND c.column_id = k.parent_column_id
    )
    SELECT @SQL = 'CREATE TABLE [' + @schema_for_new_table + '].[' + @name_for_new_table + ']' + CHAR(13) + '(' + CHAR(13) + STUFF((
        SELECT DISTINCT CHAR(9) + ', [' + c.name + '] ' + UPPER(t.name) + 
            CASE WHEN t.name IN ('varchar', 'char', 'varbinary', 'binary', 'text')
                   THEN '(' + CASE WHEN c.max_length = -1 THEN N'MAX' ELSE CAST(c.max_length AS NVARCHAR(5)) END + ')'
                 WHEN t.name IN ('nvarchar', 'nchar', 'ntext')
                   THEN '(' + CASE WHEN c.max_length = -1 THEN N'MAX' ELSE CAST(c.max_length / 2 AS NVARCHAR(5)) END + ')'
                 WHEN t.name IN ('datetime2', 'time2', 'datetimeoffset') 
                   THEN '(' + CAST(c.scale AS NVARCHAR(5)) + ')'
                 WHEN t.name = 'decimal' 
                   THEN '(' + CAST(c.[precision] AS NVARCHAR(5)) + ',' + CAST(c.scale AS NVARCHAR(5)) + ')'
                ELSE ''
            END +
            CASE WHEN c.collation_name IS NOT NULL THEN ' COLLATE ' + c.collation_name ELSE '' END +
            CASE WHEN c.is_nullable = 1 THEN ' NULL' ELSE ' NOT NULL' END +
            CASE WHEN c.[definition] IS NOT NULL THEN ' DEFAULT' + c.[definition] ELSE '' END + 
            CASE WHEN c.is_identity = 1 THEN ' IDENTITY(' + CAST(ISNULL(c.seed_value, '0') AS CHAR(1)) + ',' + CAST(ISNULL(c.increment_value, '1') AS CHAR(1)) + ')' ELSE '' END + CHAR(13)
        FROM (
            SELECT 
                  c.name
                , c.user_type_id
                , c.max_length
                , c.[precision]
                , c.scale
                , dc.[definition]
                , ic.seed_value
                , ic.increment_value
                , c.collation_name
                , is_nullable = MIN(CAST(c.is_nullable AS TINYINT))
                , is_identity = MIN(CAST(c.is_identity AS TINYINT))     
            FROM sys.columns c WITH (NOWAIT)
            LEFT JOIN sys.default_constraints dc WITH (NOWAIT) ON c.default_object_id != 0 AND c.[object_id] = dc.parent_object_id AND c.column_id = dc.parent_column_id
            LEFT JOIN sys.identity_columns ic WITH (NOWAIT) ON c.is_identity = 1 AND c.[object_id] = ic.[object_id] AND c.column_id = ic.column_id
            WHERE c.[object_id] IN (SELECT o.[object_id] FROM tbl o)
            GROUP BY 
                  c.name
                , c.user_type_id
                , c.max_length
                , c.[precision]
                , c.scale
                , dc.[definition]
                , ic.seed_value
                , ic.increment_value
                , c.collation_name
        ) c
        JOIN sys.types t WITH (NOWAIT) ON c.user_type_id = t.user_type_id
        FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, CHAR(9) + ' ')
        + ISNULL((SELECT CHAR(9) + ', CONSTRAINT [PK_' + @schema_for_new_table + '_' + @name_for_new_table + '] PRIMARY KEY (' + 
                (SELECT STUFF((
                 SELECT DISTINCT ', [' + c.name + ']' + CASE WHEN ic.is_descending_key = 1 THEN ' DESC' ELSE ' ASC' END
                 FROM sys.key_constraints k WITH (NOWAIT) 
                 JOIN sys.index_columns ic WITH (NOWAIT) ON ic.[object_id] = k.parent_object_id AND ic.index_id = k.unique_index_id
                 JOIN sys.columns c WITH (NOWAIT) ON c.[object_id] = k.parent_object_id AND c.column_id = ic.column_id
                 WHERE k.[type] = 'PK'
                     AND ic.is_included_column = 0
                     AND k.parent_object_id IN (SELECT t.[object_id] FROM tbl t)
                 FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '')) + ')'  + CHAR(13)), '')
        + ')' + CHAR(13)
        + ISNULL((SELECT (
            SELECT CHAR(13) +
                 'ALTER TABLE [' + @schema_for_new_table + '].[' + @name_for_new_table + '] WITH' 
                + CASE WHEN fk.is_not_trusted = 1 
                    THEN ' NOCHECK' 
                    ELSE ' CHECK' 
                  END + 
                  ' ADD CONSTRAINT [FK_' + @schema_for_new_table + '_' + @name_for_new_table + '_' + fk.name  + '] FOREIGN KEY(' 
                  + STUFF((
                    SELECT ', [' + k.cname + ']'
                    FROM fk_columns k
                    WHERE k.constraint_object_id = fk.[object_id]
                    FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '')
                   + ')' +
                  ' REFERENCES [' + SCHEMA_NAME(ro.[schema_id]) + '].[' + ro.name + '] ('
                  + STUFF((
                    SELECT ', [' + k.rcname + ']'
                    FROM fk_columns k
                    WHERE k.constraint_object_id = fk.[object_id]
                    FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '')
                   + ')'
                + CASE 
                    WHEN fk.delete_referential_action = 1 THEN ' ON DELETE CASCADE' 
                    WHEN fk.delete_referential_action = 2 THEN ' ON DELETE SET NULL'
                    WHEN fk.delete_referential_action = 3 THEN ' ON DELETE SET DEFAULT' 
                    ELSE '' 
                  END
                + CASE 
                    WHEN fk.update_referential_action = 1 THEN ' ON UPDATE CASCADE'
                    WHEN fk.update_referential_action = 2 THEN ' ON UPDATE SET NULL'
                    WHEN fk.update_referential_action = 3 THEN ' ON UPDATE SET DEFAULT'  
                    ELSE '' 
                  END 
                + CHAR(13) + 'ALTER TABLE [' + @schema_for_new_table + '].[' + @name_for_new_table + '] CHECK CONSTRAINT [FK_' + @schema_for_new_table + '_' + @name_for_new_table + '_' + fk.name  + ']' + CHAR(13)
            FROM sys.foreign_keys fk WITH (NOWAIT)
            JOIN sys.objects ro WITH (NOWAIT) ON ro.[object_id] = fk.referenced_object_id
            WHERE fk.parent_object_id IN (SELECT t.[object_id] FROM tbl t)
            FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)')), '')
        + ISNULL(((SELECT
             CHAR(13) + 'CREATE' + CASE WHEN i.is_unique = 1 THEN ' UNIQUE' ELSE '' END + ' NONCLUSTERED INDEX [IX_' + @schema_for_new_table + '_' + @name_for_new_table + '_' + i.name + '] ON [' + @schema_for_new_table + '].[' + @name_for_new_table + '] (' +
                    STUFF((
                    SELECT ', [' + c.name + ']' + CASE WHEN c.is_descending_key = 1 THEN ' DESC' ELSE ' ASC' END
                    FROM index_column c
                    WHERE c.is_included_column = 0
                        AND c.index_id = i.index_id
                    FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '') + ')'  
                    + ISNULL(CHAR(13) + 'INCLUDE (' + 
                        STUFF((
                        SELECT ', [' + c.name + ']'
                        FROM index_column c
                        WHERE c.is_included_column = 1
                            AND c.index_id = i.index_id
                        FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '') + ')', '')  + CHAR(13)
            FROM sys.indexes i WITH (NOWAIT)
            WHERE i.[object_id] IN (SELECT t.[object_id] FROM tbl t)
                AND i.is_primary_key = 0
                AND i.[type] = 2
            FOR XML PATH(N''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)')
        ), '')

    PRINT @SQL
    --EXEC sys.sp_executesql @SQL 
```

例如，此查询生成此 DDL：

```
CREATE TABLE dbo.TableMerge
(
      AbsenceCode VARCHAR(25) COLLATE Cyrillic_General_CI_AS NULL
    , CategoryID INT NULL
    , DateOut DATETIME NOT NULL
    , DepartmentUID UNIQUEIDENTIFIER NOT NULL
    , EmployeeID INT NOT NULL
    , IsMainWorkPlace BIT NOT NULL DEFAULT((1))
    , PaymentType CHAR(2) COLLATE Cyrillic_General_CI_AS NOT NULL
    , PositionID INT NOT NULL
    , TariffScaleID INT NULL
    , TeamUID UNIQUEIDENTIFIER NULL
    , TimeSheetDate DATETIME NOT NULL
    , WorkHours REAL NULL
    , WorkOutID BIGINT NOT NULL IDENTITY(1,1)
    , WorkPlaceUID UNIQUEIDENTIFIER NOT NULL
    , WorkShiftCD NVARCHAR(20) COLLATE Cyrillic_General_CI_AS NULL
    , CONSTRAINT [PK_dbo.TableMerge] PRIMARY KEY (WorkOutID ASC, WorkPlaceUID ASC)
) 
```

如果将此表指定为源：

```
CREATE TABLE dbo.[WorkOut](
    [WorkOutID] [bigint] IDENTITY(1,1) NOT NULL,
    [TimeSheetDate] [datetime] NOT NULL,
    [DateOut] [datetime] NOT NULL,
    [EmployeeID] [int] NOT NULL,
    [IsMainWorkPlace] [bit] NOT NULL,
    [DepartmentUID] [uniqueidentifier] NOT NULL,
    [WorkPlaceUID] [uniqueidentifier] NULL,
    [TeamUID] [uniqueidentifier] NULL,
    [WorkShiftCD] [nvarchar](10) NULL,
    [WorkHours] [real] NULL,
    [AbsenceCode] [varchar](25) NULL,
    [PaymentType] [char](2) NULL,
    [CategoryID] [int] NULL,
 CONSTRAINT [PK_WorkOut] PRIMARY KEY CLUSTERED 
(
    [WorkOutID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE dbo.[WorkPlace](
    [WorkPlaceUID] [uniqueidentifier] NOT NULL,
    [PositionID] [int] NOT NULL,
    [DepartmentUID] [uniqueidentifier] NOT NULL,
    [PaymentType] [char](2) NOT NULL,
    [TariffScaleID] [int] NULL,
    [CategoryID] [int] NULL,
 CONSTRAINT [PK_WorkPlace] PRIMARY KEY CLUSTERED 
(
    [WorkPlaceUID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

# xcode4.5 - 什么是代码签名身份？

> ID：15996468
> 
> 赞同：66
> 
> 时间：2013-04-14T06:40:59.417
> 
> 标签：xcode4.5

XCode 中的“代码签名身份”是什么？

他们是证书吗？

他们是私钥吗？

他们是应用程序ID吗？

它们是配置文件吗？

如果我进入目标构建设置，它会要求提供代码签名身份，所以我需要弄清楚这一点。

我以为我们使用我们的私钥签署了代码。但是，我的私钥名称都没有出现。它显示了证书列表（我认为，虽然我什至不确定。）

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-04-17T21:52:58.793

您肯定遇到了一个很快就会变得非常深入的话题，并且在尝试构建 iOS 应用程序的设备时，这是一个常见的头痛来源。首先，让我围绕代码签名过程中涉及的每个术语（对您和以后遇到此问题的任何人）提出一个小结构，然后我们可以转向您的主要问题：

**代码签名术语**

iOS 设备构建的代码签名阶段是我们对应用程序中的特定数据排列进行加密签名和保护的过程，包括应用程序可执行二进制文件本身、任何嵌入式媒体资产（如按钮纹理、自定义图稿、字体等）。 )，以及一组关于我们的应用程序的元数据，代表我们应用程序数据的唯一“指纹”。Apple 和 iOS 使用此指纹来帮助确保我们的应用程序在交付给用户设备或在用户的 iOS 设备上运行时不会被篡改。为了实现这一点，开发人员需要向 Apple 注册、设置应用标识符、申请开发和分发证书、注册一组测试设备，最后为他们的开发工作申请一个配置文件。

*   **App Identifier（或 AppID）** - 一个反向 DNS 样式的字符串，它唯一地标识 AppStore 上的一个 iOS 应用程序。
*   **开发和分发证书**——这些是由 Apple 以加密方式签名的数字文件，用于证明文件所发给的个人的身份。对于那些熟悉公钥基础设施的人来说，证书本身包含一个公钥，可用于稍后在此过程中验证签名的完整性。
*   **测试设备**- iOS 软件唯一经批准的标准分发渠道是通过 AppStore。通过注册测试设备，开发人员可以绕过 AppStore 并将软件直接安装到设备上以进行开发和测试。给定会员年度允许的测试设备总数为 100 个测试设备。
*   **Provisioning Profile** - 包含三个主要组件的文档：1) 一个 App ID，2) 一个或多个 iOS 开发人员证书，以及 3) 零个或多个注册测试设备，可以直接安装指定的 iOS 应用程序。本文档的内容由 Apple 加密签名，以确保其内容不会被篡改。

正是此文件的存在和指纹检查确定开发人员生成的应用程序是否可以安装到设备上，因为它包含“谁”（证书）、“内容”（AppID）和“位置”的概念'（哪些设备）。

**太好了，我明白了……现在这个 Code Sign Identity 怎么样？**

在单个构建目标的构建设置的上下文中，术语**代码签名身份**是指安装在开发人员机器的钥匙串中的那些证书的通用名称。在 Xcode 构建设置中，它显示为一个选项列表，开发人员必须从中选择要用于 CodeSign 的身份 -此菜单的每个部分中都编码**了很多信息：**

![Xcode 代码符号标识](https://i.stack.imgur.com/3zxIH.png)

首先看黑色文本——来自上图中的“iPhone 开发者：Bryan Musial (XXXXXXXXXX)”——这确实是 Xcode 用来查找用于 Code Sign 的公钥和私钥的主要项目。选择此项目时，您将指示 Xcode 进入您的钥匙串并尝试查找其“通用名称”字段与该字符串匹配的证书，然后获取该证书（其中包含公钥）和关联的私钥以用于代码签名操作。

如果您打开 Keychain Access 并双击任何“iPhone 开发：...”或“iPhone 分发：...”证书，那么为了彻底一点，证书会显示 Apple 向其开发人员颁发的证书中编码的所有信息。如果我要选择第一张图片中的条目，Xcode 将进入我的钥匙串并拉回此证书（注意：唯一标识详细信息已被 X'd 或更改）：

![钥匙串证书公用名示例](https://i.stack.imgur.com/MOQS6.png)

如您所见，来自 Xcode 选择的黑色文本与我的证书中的 Common Name 字段完全匹配，因此 Xcode 将撤回此证书及其链接的私钥，以用于对我的应用程序进行代码签名。

再次回顾 Xcode 设置，我们还注意到该菜单选项中还有更多文本——较浅的灰色文本标识将内置到应用程序中的 Provisioning Profile。在我的示例设置中，Xcode 将获取配置文件“MyiOSApp Testing”，其 AppID 设置为“com.myiosapp.*”。Xcode 非常热衷于存储 Provisioning Profiles，幸运的是，Organizer 为您提供了一个查看已安装的 Provisioning Profiles 并了解它们包含的基本数据的好地方。同样对于第一张图片中的 Xcode Code Sign Identity，我的 Organizer 中的相关 Provisioning Profile 将如下所示：

![组织者配置文件](https://i.stack.imgur.com/nLCe6.png)

“名称”列和 App Identifier 列的尾端与我的 Xcode 设置中的浅灰色文本匹配，因此这是在代码签名期间选择使用的配置文件。注意行尾的“状态”列也很重要。在这种情况下，它为绿色并指示“有效配置文件”。这意味着我的钥匙串至少有一个在该配置文件中编码的证书的公钥和私钥。如果此状态不是绿色，则说明您当前的公钥/私钥设置和/或配置文件存在问题——除非您尝试使用的配置文件的状态设置为绿色，否则代码签名无法工作. 其他可能的状态选项包括：

![组织者供应状态选项](https://i.stack.imgur.com/jHUgC.png)

*   **未找到有效的签名身份：**您没有至少一个在此供应配置文件中编码的证书的公钥和私钥。从 Organizer 中删除配置文件，然后返回 developer.apple.com/ios 上的证书、标识符和配置文件工具，并确保您的开发证书包含在配置配置文件中。验证您在 Keychain Access 中的证书没有过期或被吊销，并且有一个链接到公钥证书的私钥。
*   **配置文件已过期：**配置文件的过期日期已过。从 Organizer 中删除此配置文件，然后重新访问 developer.apple.com/ios 上的证书、标识符和配置文件工具并重新发布此配置文件（如果仍然需要它）

**其他可能会绊倒你的物品**

除了确保您安装了公钥和私钥以及配置文件设置正确的所有细微差别之外，还有一些其他事情可能会让开发人员感到困惑。首先，Xcode 收集 Provisioning Profiles 并保留它们，直到您告诉它删除它们。从理论上讲，这并不是什么大不了的事情，除非在您更改配置文件、下载并安装更新版本的情况下。很多时候 Xcode 会获取正确的配置文件，但有时它不会正确处理，您将花费数小时查看证书、标识符和配置文件工具以及您的钥匙串，以尝试了解正在发生的事情。

**建议 1：**在安装更新版本的 Provisioning Profile 时，删除旧版本，这样 Xcode 就不会处于可能需要做出决定的位置。

如果您重新颁发开发或分发证书，可能会发生类似的事情——大多数情况下，Xcode 会在构建期间触发关于不明确证书的警告。

**建议2：**在构建过程中注意歧义警告。这意味着您有一个符合构建标准的旧证书浮动，并且可能会被无意使用，从而可能导致构建问题。

**建议 3：**每当您在钥匙串中处理您的证书时，请查找带有红色“X”的“iPhone 开发人员：...”或“iPhone 分发：...”证书。这是证书已过期或已被吊销的指示符。无论哪种方式，此公钥（以及可能链接的私钥）都不再用于构建目的，并且可以删除。

最后，代码签名身份设置还有一个选项，列为“自动配置文件选择器”。在许多情况下，您将希望使用此选项，因为它会尽力从构建目标的设置中自动查找您的 AppID，查找与该 AppId 匹配并包含您拥有公钥和私钥的证书的配置文件. 在某些自定义构建情况下，可能无法使用此选项，您必须使用其中一个固定的特定选项，例如我在第一张图片中的演示设置。如果您使用固定选项，请注意 - 任何时候更新配置文件时，您还需要更新代码签名身份构建设置以匹配较新的版本。

**关键要点**

*   确保您的 Keychain 和 Xcode Provisioning Profile 列表保持干净和重复数据删除。
*   安装证书和配置文件后，确保组织者将该配置文件的状态报告为绿色（“有效配置文件”）。任何其他状态都表明您的钥匙串和配置文件之间存在问题，在您考虑运行构建之前需要解决该问题。
*   尝试使用“自动配置文件选择器”。如果您的队友和任何自动构建系统也不必考虑代码签名身份设置，他们就会对您更满意。
*   如果您不能使用自动配置文件选择器，请确保您始终保持该设置是最新的，因为您的供应配置文件进行了更新的迭代。

祝您的构建配置好运，如果您有任何其他后续问题，请告诉我！

# ios - 定义 com.revmob.airextension：找不到 Revmob。

> ID：15996473
> 
> 赞同：0
> 
> 时间：2013-04-14T06:41:36.193
> 
> 标签：ios, actionscript-3, flash, flash-cs5, revmob

我正在使用 Flash cs5 制作 iOS 应用程序我在 File->Actionscript settings->Library 路径中引用了 Revmob.ane，然后在我的 Game.as 中导入了revmob扩展名

```
import com.revmob.airextension.Revmob 
```

但仍然 Game.as 找不到 Revmob 扩展我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T17:29:54.477

伙计，我遇到了同样的问题。我联系了 Revmob 技术支持：由于您无法在 PC 上测试 revmob，因此您会收到该错误。因此，只需发布​​您的应用程序并在移动设备上测试它 - 一切都应该正常工作）

# jquery - divslidingUp 问题

> ID：15996474
> 
> 赞同：0
> 
> 时间：2013-04-14T06:42:10.837
> 
> 标签：jquery, html

我有一个 div **.adsearch-panel**，其中包含一些选择框和文本框。我想在 div 外部单击时隐藏它。为此，我正在使用；

```
$(document).on({
    mouseup:
    function(e){
        var container = $('.adsearch-panel');

        if(container.has(e.target).length === 0) {
            container.slideUp(200);
        }
    }
}); 
```

上面的代码运行良好，但即使我单击该 div 内的任何元素（例如选择框），它仍然会向上滑动。如果单击 div 或 div 内的任何内容，我想让它保持可见。

请帮我解决这个问题。

谢谢你和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:44:52.847

你的`on`方法不正确，应该是：

```
$('document').on("mouseup", function (e) {
    var container = $('.adsearch-panel');

    if(container.has(e.target).length === 0) {
        container.slideUp(200);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:48:45.280

我相信`e.target`这里指的是`document`. 您必须`stopPropagation`在 div 上添加一个用于单击的内容：

```
$('.adsearch-panel').on('mouseup', function(e) { e.stopPropagation(); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:54:55.617

`**[LIVE DEMO](http://jsbin.com/ebixar/1/edit)**`

```
$(function(){
    $("body").on('click', function(ev) {
        var myCN = ev.target.className;
        if (myCN !== 'adsearch-panel') {
            $('.adsearch-panel').hide();
        }
    });

    $('.showAdsearch').on('click', function( e ) {
        e.stopPropagation();
        $('.adsearch-panel').show();
    });
}); 
```

# javascript - JavaScript 的对象内特性是如何工作的？

> ID：15996476
> 
> 赞同：2
> 
> 时间：2013-04-14T06:42:47.453
> 
> 标签：javascript

我正在学习 JavaScript，目前我无法理解的是下面的这个例子。用于`in`检查右侧的 Object 中是否存在项目。

此代码会将用户选项合并到默认选项中。

令我困惑的`i`是没有在任何地方定义，那么它怎么知道`i`是什么？如果我在块内
打印出来，它会列出我的每个对象。`i``for``option`

我已经阅读[了 MDN 关于`in`操作符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)的文章，但它没有解释这种对未定义变量的处理。

```
var i;
for(i in options) {
  if(i in this.options) {
    this.options[i] = options[i];
  } else {
    throw new Error("Notice doesn't support option: " + i);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:46:45.553

有两种不同的“入”：

*   [对于...在](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)
*   [in 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)

代码中的第一个`in`不是`in`运算符。它是一个 For ... in 循环，它遍历对象的键，将每个键分配给变量，在这种情况下是`i`.

您的代码中的第二个`in`是您已经阅读过文档的那个。返回 true 或 false 的运算符。

注意：除非您之前在该函数范围内，否则您通过在循环中省略关键字`var i`来声明全局变量。您很可能想要：`i``var`

```
for(var i in options){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T06:47:49.337

这不是`for ... in`运营商的具体结果。

每当您尝试分配给未定义的变量时，它[都会创建该名称的全局变量](https://developer.mozilla.org/en/docs/JavaScript/Guide/Values,_variables,_and_literals#Declaring_variables)。全局变量是`window`对象的属性，因此您可以按如下方式观察此行为：

```
for (i in [0]) {
    alert(window.i); // displays "0"
} 
```

```
i = 0
alert(window.i); // displays "0" 
```

然而，这被认为是该语言中令人遗憾且令人困惑的错误特征；大多数时候你不需要或想要一个全局变量。强烈建议不要依赖这种行为，如果您通过将作为函数脚本的第一行来[启用严格模式，它甚至都不会工作。](https://developer.mozilla.org/en/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)`'use strict'`

你应该总是`var i`在你第一次分配变量之前或之前声明一个变量。

```
for(var i in options) {
  if(i in this.options) {
    this.options[i] = options[i];
  } else {
    throw new Error("Notice doesn't support option: " + i);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T06:46:07.047

> 令我困惑的`i`是没有在任何地方定义，那么它怎么知道`i`是什么？

那么你可以做这样的事情

```
for(var i in options) {
  if(i in this.options) {
    this.options[i] = options[i];
  } else {
    throw new Error("Notice doesn't support option: " + i);
  }
} 
```

现在它正在被定义。

进一步解释

> ```
> for(<variable to hold the value on every loop> in <collection>) 
> ```

JavaScript`for/in statement` **循环遍历**对象的属性

# sql - 需要oracle查询

> ID：15996481
> 
> 赞同：1
> 
> 时间：2013-04-14T06:43:40.600
> 
> 标签：sql, oracle, top-n

我正在练习 Oracle 子查询..（我是 Oracle 的新手。）

**问题：找到每个部门中收入最高的员工？**

我下面的查询有效（但我觉得它不是很好，即使我得到了正确的结果）

```
select e.deptid, e.name, e.salary 
from employee e 
where e.salary = (select max(salary) 
                  from employee b 
                  where b.deptid = e.deptid ) 
```

还有其他简单的方法吗？（使用内部连接或其他方式？）

我也想知道：我们究竟什么时候必须使用内连接而不是使用子查询？我们究竟什么时候必须使用子查询而不是内连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:52:11.590

为什么在这里使用 JOIN？

```
select 
  deptid,
  min(name) keep (dense_rank first order by salary desc),
  max(salary)
from 
  employee 
group by
  deptid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:03:24.760

**我有另一个查询如下：**

```
select dept_id, fname,salary 
from (select dept_id, fname,salary, 
      rank() over (order by salary desc) ranking 
      from department d, employee e 
      where d.dept_id = e.deptid) where ranking=1; 
```

我觉得上面是正确的，**但我对上面的查询有疑问：**我没有在我的查询中使用任何联接但我仍然能够从 2 个表中检索列..（所以不使用联接？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:25:24.113

你很接近 - 你错过了按薪水的订单`rank`

```
select *
from ( 
    select  dept_id , fname , salary , 
            rank() over (partition by dept_id order by salary) as rnk 
    from    department d, employee e 
    where   d.dept_id = e.deptid
where rnk = 1 
```

# php - 将php文件夹暴露给浏览器的安全风险

> ID：15996487
> 
> 赞同：1
> 
> 时间：2013-04-14T06:44:40.853
> 
> 标签：php

像这样将 php 文件放在 web 服务器上的 web 文件夹下是否有任何安全风险？

```
example.com/web/
example.com/web/php/ 
```

有人曾经告诉我，下面是首选方法，但这是否有任何实际收益，无论是安全还是其他方面？

```
example.com/web/
example.com/php/ 
```

这样做的缺点是，您需要在“web”下放置一个几乎为空的 php 文件，该文件仅包含实际代码。避免这种情况会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:47:02.670

好吧，您的系统的安全性不应该依赖于将这些 php 服务器脚本保密，但我仍然不会在没有理由的情况下公开分享它们。你最好把它们放在外面`/web`（假设里面的所有东西`/web`都可以从外部访问）

# ruby-on-rails-3 - rails 3 如何为用户授予特定任务（如票证、消息）的权限？

> ID：15996490
> 
> 赞同：2
> 
> 时间：2013-04-14T06:44:55.963
> 
> 标签：ruby-on-rails-3

我是 Rails 的新手，我想授予用户在不同模块上参与我的项目的特定任务的权限。

我有两个模型“user”和“project”......在“user.rb”has_many：项目和“project.rb”belongs_to：user。我还有一个模型，它结合了这个模型中名为“user_project.rb”的两个模型，其中存储了 proj_id 和 user_id。

我想授予权限，然后还要检查当前用户是否有权根据分配给他们的权限创建消息和任务。

我在哪里可以定义权限以及它在视图中对我的工作方式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:05:52.777

如果您创建 user_project.rb 仅用于存储这些 id - 将其删除。

看起来您需要在控制器中编写 before_filter

```
class ProjectsController << ApplicationController
  before_filter :current_user_required, only: [ :edit, :update ]

  #there def of actions

  private 

  def current_user_required
    unless current_user == @project.user
      flash[:error] = 'error 403'
      redirect_to :back
    end
  end 
```

当您找到 @project 时，对于编辑和更新操作，您可以这样做：

```
@project = current_user.projects.find(params[:project_id]) #need to change :project_id 
```

如果您想创建模型 Message(belongs_to :project 和 Project has_name: messages) 并只为 project.user 授予创建和编辑权限，您可以使用 before_filter 或模型中的验证来完成

```
class Message << ActiveRecord::Base
  validate :author_is_project_user, on: :create

  private

  def author_is_project_user
    errors.add :base, 'author not is project user' unless self.author == self.project.user
  end
end 
```

据此，您可以定义其他事物的权限

如果你想获得另一个用户的许可，你必须创建属于 :user 和 :project 的模型并检查 before_filter 的存在。

这样的：

```
class Permission << ActiveRecord::Base
  belongs_to :user
  belongs_to :project

  scope :about, -> project { where project_id: project }
  scope :of_user, -> user { where project_id: project }
end 
```

并在用户模型中定义方法，如

```
def access_to_project? project
  Permission.about(project).of_user(self).first.present?
end 
```

或者您可以向此模型添加变量并制作更复杂的访问逻辑

# mysql - 在 Rails 中随机获得一个未投票的帖子

> ID：15996499
> 
> 赞同：2
> 
> 时间：2013-04-14T06:46:02.907
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

所以我有一个带有三个基本模型的 Rails 应用程序`Entry`：`User`和`Vote`. 我需要一个辅助方法，它会给我一个随机帖子供用户投票：

```
def next_entry
  Entry.where(:receiving_challenge_id => current_voting_challenge.id).offset(rand(Entry.where(receiving_challenge_id: current_voting_challenge.id).count)).first
end 
```

这行得通，它每次都会抓取一个随机帖子。

投票由用户和条目拥有，它们通过数据库中的 ID 相关联。

**但我不想给用户一个他们投票过的帖子。**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:54:12.010

-获取所有条目的ID

- 获取用户投票的所有条目的 id

- 从第一个减去第二个

- 使用该方法从该数组中获取任何数字，`sample`并从数据库中提取具有该 ID 的条目：

```
Entry.find((Entry.all.collect(&:id) - current_user.votes.collect(&:entry_id)).sample) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:29:27.737

首先，获取他们投票的条目。然后获取所有不同的条目

```
voted_entries = user.votes.includes(:entry).collect(&:entry)
unvoted_entries = Entry.where('id NOT IN (?)', voted_entries.collect(&:id)) 
```

然后你可以打电话`sample`来`unvoted_entries`随机取一个。

# ios - 在文本字段中使用某些字符时的 UIAlertView

> ID：15996500
> 
> 赞同：0
> 
> 时间：2013-04-14T06:46:03.997
> 
> 标签：ios, ipad

我在另一个应用程序中实现了以下代码，但由于某种原因，它在我当前的应用程序中不起作用。即使在文本字段中输入了“禁止”字符，UIAlertView 也不会显示。有谁知道为什么会这样？

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    NSCharacterSet * set1 = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];

    if ([textField1.text rangeOfCharacterFromSet:set1].location != NSNotFound) {

        UIAlertView *errorAlert1 = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Only numbers are allowed in this field."delegate:self cancelButtonTitle:@"OK."otherButtonTitles:nil];
        [errorAlert1 show];

        textField1.text=@"";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:52:49.370

是您对文本字段的对象委托。检查用户结束编辑时是否使用了您的方法。

# ruby - gh-pages - Jekyll 无法构建 - “解析时未找到预期的节点内容”

> ID：15996510
> 
> 赞同：2
> 
> 时间：2013-04-14T06:47:38.273
> 
> 标签：ruby, jekyll, github-pages

我正在尝试`gh-pages`启动并运行一个站点。第一次使用 Jekyll。

我有一个超级基本的布局（`default.html`）`/_layouts`：

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <div class="wrapper">
      <section id="main">
        {{ content }}
      </section>
    </div>
  </body>
</html> 
```

和单个内容页面 (index.html)

```
---
layout: default
---
Hello World 
```

我的`_config.yml`文件很简单

```
pygments: true 
```

运行时`jekyll --no-auto --server`出现以下错误。不生成文件。

```
.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:203:in `parse':
(<unknown>): did not find expected node content while parsing a flow
node at line 3 column 1 (Psych::SyntaxError) 
```

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T23:54:52.877

您应该检查它所解析的内容是否是 YAML。

我通过将一些调试命令直接放入 gem 并重新运行来检查这一点的方式。

更改`psych.rb`which 对我来说是 at `/home/user/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/psych.rb`。寻找`def self.load`并改变它

```
def self.load yaml, filename = nil
  result = parse(yaml, filename)
  result ? result.to_ruby : result
end 
```

至

```
def self.load yaml, filename = nil
  puts "****************#{filename}"
  result = parse(yaml, filename)
  result ? result.to_ruby : result
end 
```

并在重新运行命令时在终端中查找输出。

我目前正在处理使用 capistrano 部署 Rails 应用程序（根本没有 jekyll）。就我而言，输出是空白的，这显然不是文件名。所以现在我正在进一步调查。我希望这能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:14:41.867

由于第 3 行是`<head>`，因此可能缺少一些基本元数据，例如`<title>`.
我看到的所有模板都有一个标题（zinga、[Symplicity](https://github.com/Symplicity/Symplicity-GH-Pages/blob/master/_layouts/default.html) ......无论是固定的还是生成的），最基本的模板也有一个（参见“ [Hello World，我是 Jekyll](http://destroytoday.com/blog/hello-world-im-jekyll/) ”）

```
<html>
  <head>
    <title>Hello world!</title>
  </head>
  <body>
    <h1>Hello world!</h1>
    <p>This is my first Jekyll website.</p>
  </body>
</html> 
```

# ruby-on-rails-3 - rake db:migrate:up 在 Rails 3.2.13 中不再有效？

> ID：15996512
> 
> 赞同：0
> 
> 时间：2013-04-14T06:47:50.753
> 
> 标签：ruby-on-rails-3

命令 rake db:migrate:up 在 Rails 3.2.13 中有效吗？rake db:rollback 的等价物/相反物是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:26:21.953

我想你正在寻找的是 `db:migrate:redo`

查看[http://guides.rubyonrails.org/migrations.html#rolling-back](http://guides.rubyonrails.org/migrations.html#rolling-back)了解更多详情。

# php - require_once 找不到文件

> ID：15996513
> 
> 赞同：0
> 
> 时间：2013-04-14T06:48:15.217
> 
> 标签：php, dreamweaver

您好，我有一个愚蠢的问题，我在 stackflow 中搜索了很多答案，但我找不到解决我的问题的方法，我想在 php 中调用一个文件接收错误实际上代码是正确的，但我收到一个问题错误，即：

```
Warning: require_once(1) [function.require-once]: failed to open stream: 
No such file or  directory in C:\xampp\htdocs\Upload images\upload.php on line 2

Fatal error: require_once() [function.require]: Failed opening required '1'(include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\Upload
images\upload.php on line 2 
```

我正在使用 Dreamweaver。我删除了带有目录的路径并用不同的名称重新创建但没有解决仍然存在的问题。我也在那里谷歌我也没有找到解决方案??????? 任何人请我的头爆炸....??????????????????????????????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:56:47.383

尝试在 require_once(path) 中写入完整路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:02:53.510

对我的系统进行的快速测试显示，`require_once("file") or error_function();`该确切消息失败了；`require_once("file");`才不是。

这可能是因为`require_once`is 一个语句而不是一个函数，并且可能有不同的解析规则，导致您的语句实际上是`require_once('db.php' or mysql_error());`. 带有这些参数的 PHP`or`运算符将返回 TRUE**而不**调用`mysql_error`，从而导致语句为`require_once(1)`( `1 == TRUE`) - 这将生成这些消息。**这只是我的猜测。**

## tl;博士

尝试 `or mysql_error()`从您的代码中删除 。`require_once`无论如何都会产生致命错误。（警告：在我的机器上工作™。）

# java - 安全的？将 Excel 函数转换为 Web 脚本

> ID：15996523
> 
> 赞同：1
> 
> 时间：2013-04-14T06:49:03.623
> 
> 标签：java, php, sql, database, excel

我了解我可以通过 Apache POI（转换为 Java）或 PHPExcel（转换为 PHP）等转换器将 Excel 文件转换为 Web 脚本。但是，我尝试转换的 Excel 文件包含大量商业机密和专有信息。我怎样才能保护它？

例如，如果我有excel函数“11+a=b”，我希望网站用户输入“值A”，按计算，网页返回“答案B”给用户，而不让用户知道公式“11 +a=b。”

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:13:20.443

您误解了这些库的作用。

它们允许您阅读 Excel 文档，以便您可以从您自己的程序中访问例如单元格的原始内容。如果您需要做更多的事情 - 比如重新计算单元格显示的值 - 您需要自己提供额外的代码。

# ruby-on-rails - 未定义的方法“可确认”

> ID：15996525
> 
> 赞同：0
> 
> 时间：2013-04-14T06:49:45.330
> 
> 标签：ruby-on-rails, gem, data-migration, devise-confirmable

运行 rake db:migrate 时出现以下错误：

```
undefined method `confirmable' for #<ActiveRecord::ConnectionAdapters::Table:0x6d448e8>
c:/java/RubyProjects/myproject/db/migrate/20111202225103_make_user_confirmable.rb:4:in `block in change'
c:/java/RubyProjects/myproject/db/migrate/20111202225103_make_user_confirmable.rb:3:in `change'
c:in `migrate'
Tasks: TOP => db:migrate 
```

用户.rb：

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable, 
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable

  ...

end 
```

20111202225103_make_user_confirmable.rb：

```
class MakeUserConfirmable < ActiveRecord::Migration
  def change
    change_table(:users) do |t|
      t.confirmable
    end

    add_index :users, :confirmation_token,   :unique => true
  end
end 
```

不知道还要做什么。。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:01:21.563

**编辑：**
[如何：向用户添加：可确认](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-%3aconfirmable-to-Users)

PS
没有像rails迁移这样的[类型](http://guides.rubyonrails.org/migrations.html#supported-types)`confirmable`，所以迁移失败。
但是，如果您仍想向`confirmable`用户表添加列：

```
class MakeUserConfirmable < ActiveRecord::Migration
  def change
    change_table(:users) do |t|
      t.boolean :confirmable, :default => false
    end
  end
end 
```

# python - 在 Python 中使用 or 的短 if 语句

> ID：15996526
> 
> 赞同：4
> 
> 时间：2013-04-14T06:49:50.487
> 
> 标签：python, python-2.7

我有 if 语句

```
if "1111111" in players or "0000000" in players or "blablabla" in players:
    do something 
```

简而言之怎么写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T06:51:39.790

您可以使用`any()`：

```
things = ["1111111", "0000000", "blablabla"]

if any(thing in players for thing in things): 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T06:52:18.483

```
if any(x in players for x in ("1111111", "0000000", "blablabla")):
    # do something 
```

如果您要进行大量此类成员资格检查，您可以考虑将其制作`players`成`set`不需要潜在地遍历每次检查的整个序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T06:51:52.927

```
if any(a in players for a in list_of_tests):
   #something
   pass 
```

如果您使用`numpy.any()`，则需要先将生成器转换为列表。

```
if np.any([a in players for a in list_of_tests]):
   #something
   pass 
```

# php - PHP中的私人文件夹？

> ID：15996528
> 
> 赞同：1
> 
> 时间：2013-04-14T06:50:02.250
> 
> 标签：php, .htaccess, directory, private

我的网站处理图像。每当用户上传图像时，它都会存储在“imagefiles”文件夹中，但问题是用户可以通过 http 在 Web 上看到该文件夹​​的所有图像。为了防止它，我对要禁止的文件夹的 .htaccess 进行了更改，但是这样做我无法读取图像以自己在网页上显示它。

那么我怎样才能使这个文件夹只有我可以用来阅读它，当用户尝试通过 http 访问它时它应该说禁止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:55:29.540

您可以通过创建一个虚拟`index.html`页面或禁用您的默认索引来禁用该文件夹的索引`.htaccess`：

```
<Directory /path/to/image/folder>
    Options -Indexes
</Directory> 
```

这将阻止人们浏览所有图像的目录列表，但不会阻止他们直接访问图像。

如果您想要更精细的控制，您应该将对该文件夹的所有请求重写为 PHP 脚本，该脚本将检查`$_REQUEST['REQUEST_URI']`以确定他们试图加载的图像，然后如果允许他们通过您选择的任何逻辑查看它，则发送它是图像类型的适当标题，以及`readfile('/path/to/image');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:59:16.840

或者您可以使用 mod_rewrite 禁用对目录列表的访问，如下所示：

```
RewriteEngine On
RewriteBase /

RewriteRule ^imagefiles/?$ - [F,L,NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:05:16.033

做你想做的最灵活的方法可能是让包含图像的文件夹超出网络服务器的范围。然后通过 readfile() 将它们显示在您的页面上（如 Paulpro 所述）。在 php 手册中有一个很好的例子说明如何做到这一点： [http](http://www.php.net/manual/en/function.readfile.php) ://www.php.net/manual/en/function.readfile.php 使用这种方式，您将能够非常轻松地控制用户访问您网站上的图像。

# php - 刷新重新提交表单两次错误

> ID：15996529
> 
> 赞同：0
> 
> 时间：2013-04-14T06:50:41.693
> 
> 标签：php, forms, mysqli

我环顾四周，发现使用：

```
header('Location: index.php'); 
```

将帮助我防止刷新页面后重新提交表单。但是，这不起作用，我在网页顶部收到错误消息警告：无法修改标头信息 - 标头已由...发送。

我读到您不能在任何 html 标记之后放置标头标记等等，我在数据提交到数据库后立即放置了此标头代码。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:08:36.520

尽管这是该站点上最受欢迎的问题，但实际上大部分时间都被错误地回答了。

您真正需要阅读的是**您所拥有的错误信息**。它告诉您输出已开始的**行**和**文件名。**让您知道在哪里寻找额外的输出。

因此，您甚至可以自己解决问题。
您可能需要帮助的唯一问题是必须手动删除的字节顺序标记，如果是问题的原因

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T06:55:24.527

文件开头的单个空空间（或包含的空间）将对您执行此操作。在设置任何标头数据之前清理输出缓冲区。

[http://php.net/manual/de/function.ob-clean.php](http://php.net/manual/de/function.ob-clean.php)

# java - ice:dataExporter 导出到 pdf 问题

> ID：15996530
> 
> 赞同：0
> 
> 时间：2013-04-14T06:50:58.110
> 
> 标签：java, jsf, servlets, icefaces, jsf-1.2

我正在尝试使用 ICEFaces 1.8 组件展示中的组件导出我的数据表中显示的一些数据。

在文档中，他们提到要导入 iText.jar（最好是 v2.1.7）以使其正常工作。因此我导入了 iText.jar (v2.1.7)。但是导出为 pdf 不起作用。

其他两个（即 csv 和 excel）工作正常，只有 pdf 导出不起作用。

不确定除了在构建路径中添加 iText 之外，还需要或不需要其他东西才能使其正常工作:(

请让我知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:51:34.803

根据文档，ice:dataExporter 将仅支持 csv 或 excel 格式。但是， ace:dataExporter 可以提供一个 pdf 文件，至少在我的情况下是这样。
你能提供更多代码来确认吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T03:06:36.393

为了支持以 PDF 格式导出文件，iText 库版本 2.1.7 (itext-2.1.7.jar) 必须位于应用程序的类路径中，通常位于 WEB-INF/lib 文件夹中。出于许可原因，iText 库不包含在 ICEfaces 分发包中。另请注意，如果将 itext jar 复制到 icefaces/lib/ace 目录中，则在使用 ant 构建时，它将包含在展示示例应用程序 (showcase.war) 中。

# php - 实现文件伪缓存系统的 PHP 方法

> ID：15996533
> 
> 赞同：3
> 
> 时间：2013-04-14T06:51:21.023
> 
> 标签：php, wordpress, file, caching

这个问题更多的是关于方法而不是实际的代码行

我想知道如何`pseudo caching`在 php 中为 FILES 实现一个（因为没有更好的名称）。我试图阅读一些文章，但其中大多数是指 PHP 的内部缓存系统，而不是我需要的 FILE 缓存。

我有几种情况需要应用这样的系统：

**方案 1：**

访问帖子并单击链接时，会收集所有帖子附件并将其添加到 zip 文件中以供下载。

**方案 2：**

访问帖子时，脚本将扫描所有内容，提取所有链接，为每个链接下载一些匹配的图像（或动态准备一个），然后将这些图像提供给浏览器。（但不是在检查有效期之后？？）

（这些示例使用`"post"`并且`"attachment"`因为我使用 wordpress 并且它是 wordpress 术语，所以目前两者都适用于我，除了它们一遍又一遍地生成文件。）

我对这两种情况（尤其是第 2 种情况）的怀疑 - 如何防止脚本在每次访问页面时都执行操作？（换句话说，如果文件存在，只需提供它，而无需再次循环整个创建操作）

我的第一直觉是用一些独特的（但不是加载唯一的`uniqueid()`）名称来调用文件，然后检查它是否已经在服务器上，但这会带来一些问题（比如它已经作为命名存在，但是在另一个帖子中...... ) 并且 - 对于具有 20,000 张图像的服务器来说，这应该是非常耗费资源的。

我想到的第二件事是以某种方式为这些文件关联一个元数据，但话说回来，如何实现它？如何知道哪个链接是什么图像？

另外，在我检查服务器上是否存在文件的情况下，我怎么知道文件是否应该更改（并因此重新创建）？

由于我指的是 wordpress，所以我考虑将这些图像作为 base64 从二进制文件直接存储到数据库中，`transien_API`但感觉很笨拙。

总结一下这个问题。如何生成文件，还要知道是否存在，需要时直接调用？？我唯一的选择是将文件名存储在数据库中并以某种方式与帖子相关联吗？这似乎效率很低..

**编辑我**

我决定包含一些示例代码，因为它可以帮助人们理解我的困境。

```
function o99_wbss_prepare_with_callback($content,$width='250'){

 $content = preg_replace_callback( '/(http[s]?:[^\s]*)/i', 'o99_wbss_prepare_cb', $content );

 return $content;
}

function o99_wbss_prepare_cb($match){

    $url = $match[1];

    $url = esc_url_raw( $url );//someone said not need ?? 

    $url_name = parse_url($url);

    $url_name =  $url_name['host'];// get rid of http://..
    $param = '660';
    $url = 'http://somescript/' .  urlencode($url)   . '?w=' . $param ; 
    $uploads = wp_upload_dir();
    //$uniqid = uniqid(); 

    $img = $uploads['basedir'] . '/tmp/' . $url_name  .'.jpg' ; // was with $uniqid...

    if(! @ file_get_contents($url)){
        $url = 'path ' .$url. ' doesn"t exist or unreachable';
        return $url;
        } else {
             $file = file_get_contents( $url );
         }
         // here I will need to make some chck if the file already was generated , and 
        // if so - just serve it ..
         if ( $file) {

            file_put_contents( $img, $file ); 
                // Do some other operations on the file and prepare a new one ...
                // this produces a NEW file in the wp-uploads folder with the same name...
              unlink($img);
         }

    return $url;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:17:54.403

对于场景 1：

Wordpress 将所有帖子附件作为帖子存储在帖子表中。当访问帖子时，在创建的插件或您的主题 functions.php 中运行一个函数。使用[pre_get_posts](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)钩子检查您是否已经使用函数 file_exists() 为您创建的每个 zip 存档使用唯一名称创建了 zip 文件，发布 ID 或永久链接将是一个好主意。尽管您需要确保没有用户特定的内容。您可以使用 filemtime() 检查文件的创建时间以及它是否仍然相关。如果 zip 文件不存在创建它， pre_get_posts 将传递具有帖子 ID 的查询对象，只需使用 get_posts 获取所有帖子附件，并将父 ID 设置为在查询对象中传递的 ID。GUID 字段包含每个附件的 URL，然后按照本[教程](http://davidwalsh.name/create-zip-php)使用 ZipArchive() 生成一个 zip 存档。

对于场景 2：如果您的 wordpress 模板设置为使用 wordpress 函数，则替换附件函数以返回其 url 并将其映射到您拥有缓存内容的新 url。例如 the_post_thumbnail() 将转到 wp_get_attachment_thumb_url() 将文件复制到缓存并使用缓存 url 作为输出。如果您还想缓存页面的 DOM，请使用 ob_start()。现在只需使用 file_exists 和 filetime() 在模板的开头运行检查，如果两者都在缓存的 DOM 中有效读取而不是加载页面。

# path - Neo4j 配置文件

> ID：15996535
> 
> 赞同：0
> 
> 时间：2013-04-14T06:51:29.977
> 
> 标签：path, neo4j

我尝试使用 Neo4j 运行一个简单的示例“Hello World”，但我不知道如何修改配置文件。我不知道该放什么作为参数

```
"GraphDatabaseService graphDB = new GraphDatabaseFactory()
                                           .newEmbeddedDatabase(" ..... ");" 
```

以及我必须进行哪些其他修改。我是否必须从 neo4j-server.properties 中放置 org.neo4j.server.database.location？

但首先，我必须运行服务器吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:56:17.130

您可以将 org.neo4j.server.database.location 的路径放在 neo4j-server.properties 文件中，这将允许您访问运行服务器/webadmin 时引用的同一数据库。或者您可以输入您有权访问的任何目录的路径，您的数据库将在那里创建。您不应该运行服务器，因为上面的代码在嵌入模式下使用 Neo4j。

# go - 在 Go 中具有非标准字段的结构数组上的 MarshalJSON

> ID：15996539
> 
> 赞同：5
> 
> 时间：2013-04-14T06:52:15.763
> 
> 标签：go

我有以下类型：

```
type IPFilePair struct {
    IP net.IP
    FileName string
}

type IPFilePairs []*IPFilePair 
```

我正在尝试编组这个使用的 JSON，`json.Marshal(sample_ipfilepairs)`但因为`IP`它不是字符串，所以它将它变成了一些奇怪的东西。

`IP`将此输出的 JSON作为字符串的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T09:29:35.173

我认为，如果您有权访问 的定义，那么创建您添加`IPFilePair`的本地 typedef是要走的路：`net.IP``MarshanJSON()`

```
package main

import (
    "encoding/json"
    "net"
    "fmt"
)

type netIP net.IP

type IPFilePair struct {
    IP netIP
    FileName string
}

type IPFilePairs []*IPFilePair

func (ip netIP) MarshalJSON() ([]byte, error) {
    return json.Marshal(net.IP(ip).String())
}

func main() {
    pair1 := IPFilePair{netIP{127, 0, 0, 1}, "file1"}
    pair2 := IPFilePair{netIP{127, 0, 0, 2}, "file2"}
    sample_ipfilepairs := IPFilePairs{&pair1, &pair2}

    b, _ := json.Marshal(sample_ipfilepairs)
    fmt.Println(string(b))
} 
```

这输出：

```
[{"IP":"127.0.0.1","FileName":"file1"},{"IP":"127.0.0.2","FileName":"file2"}] 
```

当然，如果您需要将其解组回相同的 Go 数据结构，您将需要`UnmarshalJSON()`在`netIP`using上实现`net.ParseIP`.

如果有人知道更简单的方法来实现这一点，我当然很好奇。

# jquery - jquery .html().show() 在 IE 7-9 中显示空白页

> ID：15996541
> 
> 赞同：1
> 
> 时间：2013-04-14T06:52:28.060
> 
> 标签：jquery

我有下面的代码，它从隐藏的输入、复选框和文本框获取输入，将它们转换为数组，然后将它们发布到 addEntries.php，它应该替换当前页面。

我选择使用下面的方法，因为我无法获得正确提交数组的基本表单。另外，我选择使用数组，因为每次生成表格时，它都会有不同数量的选项，具体取决于运动员的年龄、他们的比赛级别等。

一切正常，条目已添加到表中。

唯一的问题是，在 IE 7-9 中测试时，它返回一个空白页面，虽然当我查看页面的源代码时，我看到的是原始页面源代码，而不是 $.post 函数生成的源代码。

它在 Chrome、Firefox、Safari 和 IE 10 中运行良好。

我怀疑我的问题是 $('html').html(result).show(); 线与 IE 7-9 不兼容，我希望有人可以为我提供替代方案。

蒂亚！

授予

```
function submitEntries() {

$(function(){
  var athID = $("input[name='athID\\[\\]']")
  .map(function(){return $(this).val();}).get();

  var MeetID = $("input[name='MeetID\\[\\]']")
  .map(function(){return $(this).val();}).get();

  var EventID = $("input[name='EventID\\[\\]']")
  .map(function(){return $(this).val();}).get();

  var athEnter = [];
  $("input[name='athEnter\\[\\]']:checkbox").map(function()
    { 
        this.checked ? athEnter.push('1') : athEnter.push('0'); 
    });

  var athSeed = $("input[name='athSeed\\[\\]']")
  .map(function(){return $(this).val();}).get();

  var session_email = $("input[name='session_email']")
  .map(function(){return $(this).val();}).get();

$.post('addEntries.php',
{ 'athID[]':      athID,
  'MeetID[]':     MeetID,
  'EventID[]':    EventID,
  'athEnter[]':   athEnter,
  'athSeed[]':    athSeed,
  'session_email': session_email },
  function(result) {
    $('html').empty();
$('html').html(result).show();
  });
 });
}; 
```

# javascript - 通过 javascript 和 ajax 填充 HTML 页面时的最佳策略

> ID：15996542
> 
> 赞同：1
> 
> 时间：2013-04-14T06:52:49.093
> 
> 标签：javascript, performance

我有这个 HTML 页面，它通过带有多个 ajax 调用的 javascript 填充。我有这本字典，其中填充了一些通过 ajax 调用抓取的 JSON 文本，如本例所示：（实际代码超过 1k 行）

```
var dict = {}
$.ajax({async: false, type: 'GET', url: '/page/1', success: function(data)
{
    dict = JSON.parse(data);
    // {'name': 'foo', 'image': '42', 'user': 'bar_user'}

    $.ajax({async: false, type: 'GET', url: '/image/'+dict.image,
        success: function(data)
        {
            dict.image = JSON.parse(data);
            // {'low_res': 'l.jpg', 'high_res': 'h.jpg'}
        }

    $.ajax({async: false, type: 'GET', url: '/user/'+dict.user,
        success: function(data)
        {
            dict.user = JSON.parse(data);
            // {'email': 'bar@bar.com', 'image': '69'}

            $.ajax({async: false, type: 'GET', url: '/image/'+dict.user.image,
                success: function(data)
                {
                    dict.user.image = JSON.parse(data);
                    // {'low_res': 'l_2.jpg', 'high_res': 'h_2.jpg'}
                }
        }
} 
```

该字典用于使用以下功能填充页面：

```
function fillImageDiv(img)
{
    $('div#image_container > img').attr('src',img.high_res)
}

function fillUserDiv(user)
{
    $('div#user_container > span').html(user.email);
    $('div#user_container > img').attr('src', user.image.low_res);
}

fillImageDiv(dict.image);
fillUserDiv(dict.user); 
```

考虑到这一点，填充页面的最佳方式是什么？

填充整个字典然后填充 div 会更好，还是在将 JSON 加载到字典后立即填充每个 div？

即使javascript中没有多线程，使ajax调用异步也会使dict填充更快？

调用`fillImageDiv`和`fillUserDiv`异步呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:17:10.360

在性能方面，最好只进行一次 AJAX 调用来填满您的字典，然后`<div>`一次性填写所有元素。那些同步的 AJAX 调用会比其他任何事情都更会损害您网站的响应能力。

如果您不能组合 AJAX 调用，并且您的站点不会因为没有将每个单独的组件（图像和用户）放在一起而影响其界面，那么让它们分别异步更新肯定会更好。

如果您确实需要将两者结合在一起，那么您可以使用诸如[caolan 的 async.js 之](https://github.com/caolan/async)类的异步控制流库来更优雅地管理您的并行 AJAX 调用，然后在结果可用后一次性更新 DOM 元素。

通常，当您谈论 Web 和 JavaScript 性能时，请按顺序执行以下操作：

1.  最小化 HTTP 请求
2.  使您的 AJAX 结果可缓存
3.  最小化对 DOM 的访问

HTTP 请求通常会成为瓶颈，然后是 DOM 操作。

# python - [::-1] 是如何工作的？

> ID：15996545
> 
> 赞同：1
> 
> 时间：2013-04-14T06:53:31.860
> 
> 标签：python

有人可以解释一下是如何`[::-1]`工作的吗？我在某处读到它颠倒了列表，我试过了，它确实有效，但我不知道如何。2个冒号是什么意思？我在 python 文档中找不到类似的东西。

另外，有人知道这个或底层算法的效率吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T06:55:54.227

这是切片符号：

```
[start:stop:step] 
```

*   `start`是您开始的索引。如果它被省略，Python 假定你想从头开始。
*   `stop`是你想停下来的地方。如果你省略它，Python 会假设你想一直走到最后。
*   `step`是`-1`正在利用的东西。`1`是默认值。`2`迭代所有其他元素。`-1`遍历所有元素，但向后。

# android - kivy中的文件处理

> ID：15996547
> 
> 赞同：1
> 
> 时间：2013-04-14T06:53:48.890
> 
> 标签：android, file-io, python-2.7, kivy

我正在将 kivy 用于 android 应用程序。

目前我正在开发一个小游戏......当我想将最高分存储在文件中时出现问题......我正在使用python `open`，`readline`但`writelines`我总是遇到同样的错误

“没有找到这样的文件或目录'score.txt'”

但我在 main.py 所在的同一目录中有一个文件 score.txt。

我只是无法理解我是否做错了什么或在 kivy 中不可能进行文件处理……如果还有其他方法可以做到这一点，请告诉我。谢谢

```
def read():
fr=open("score.txt","r")
line = fr.readline()
fr.close()
h=line.split(':')
high = int(h[1])
if high<disp_score:
    fw=open("score.txt","w")
    seq="highest:" + str(disp_score)
    fw.writelines(seq)
    fw.close() 
```

这是我的文件实现，其中只有在线写成`highest:4000`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:58:48.767

您假设当前工作目录是您的 main.py 文件所在的目录，但情况可能并非如此，具体取决于平台，您可以使用通常的 python 方法来访问 main.py 所在的目录，或者您可以使用 kivy 工具（App.directory），或者如果文件不存在（而不是发送一个），您可以创建文件并停止关心它的位置。

无论如何，如果您想避免文件在升级时被破坏，请务必对应用程序的更新进行一些测试，将其放入应用程序可能不是最好的主意。

# javascript - 如何在同一个 JavaScript 程序中使用 onload 和 onunload？

> ID：15996550
> 
> 赞同：0
> 
> 时间：2013-04-14T06:54:10.210
> 
> 标签：javascript

我的代码是：-

```
<html>
<head>
    <script>
        function welcome()
        {
            alert("Successfully loaded");
        }
        function bye()
        {
            alert("Unload");
        }
    </script>
</head>
<body onload="welcome()" onunload="bye()">

</body> 
```

当我执行这个时，只有“onload（）”的函数被调用。你能告诉我如何触发“onunload()”事件吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:58:19.367

这实际上取决于您测试的浏览器

该`onunload`事件在 IE、Firefox 和 Safari 中受支持，但在 Chrome 或 Opera 中不受支持。

请试试`onbeforeunload`

```
<body onload="welcome()" onbeforeunload="bye()">

</body> 
```

[https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

# android - 如何在右侧创建带有图像文本和组指示符的自定义可扩展列表？

> ID：15996553
> 
> 赞同：0
> 
> 时间：2013-04-14T06:54:51.740
> 
> 标签：android, expandablelistview

我正在 android 中创建一个可扩展列表视图。我有一个疑问，我如何设置可扩展列表视图的布局，其中左侧文本位于中心，组指示器位于右侧。![如何使组指示器以适当的方式出现？](https://i.stack.imgur.com/nKpNw.png)

如果您看到图像，组指示器被压扁，我希望它以正常方式出现。我该怎么做？

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
    <RelativeLayout 
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:background="#67B1E2">
    <ImageButton 
        android:layout_width="30dp"
        android:layout_height="30dp" 
        android:layout_alignParentLeft="true"
        android:background="@drawable/homescreen_left_btn"
        android:layout_centerInParent="true"
        android:layout_marginLeft="10dp"
        android:clickable="true"/>
    <ImageView 
        android:layout_width="150dp"
        android:layout_height="wrap_content" 
        android:id="@+id/firstedittext"
        android:layout_centerInParent="true"
         android:src="@drawable/logo"/>
    <ImageButton 
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentRight="true"
        android:background="@drawable/user_btn"
         android:layout_centerInParent="true"
         android:layout_marginRight="10dp"
         android:clickable="true"/>
 </RelativeLayout>

     <View 
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="#556268"/>  

     <LinearLayout
         android:id="@+id/home_screen_linear_join_event"
         android:layout_width="250dp"
         android:layout_height="40dp"
         android:orientation="horizontal"
         android:gravity="center"
         android:layout_gravity="center"
         android:background="@drawable/join_event_btn"
         android:layout_marginTop="10dp"
         android:clickable="true">

       <ImageView 
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:src="@drawable/join_event_icn"
           android:layout_gravity="left|center"/>

     <Button
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:background="@android:color/transparent"
         android:text="Join an Event"
         android:textColor="#4F4F4F"
         android:textStyle="bold"
         android:gravity="center"
         android:layout_marginLeft="10dp"/>
     </LinearLayout>

      <View 
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="#76B8E5"
        android:layout_marginTop="30dp"/>

     <ExpandableListView
       android:id="@+id/expandablelistview01"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:layout_alignParentLeft="true"
       android:layout_alignParentTop="true"
       android:cacheColorHint="#ffffff"
       android:childDivider="#94bdd8"
       android:divider="#94bdd8"
       android:dividerHeight="1dp"
       android:footerDividersEnabled="true"
       android:groupIndicator="@drawable/group_indicator"
       android:headerDividersEnabled="true"
       android:listSelector="@android:color/white"
       android:transcriptMode="alwaysScroll" >
   </ExpandableListView> 

</LinearLayout> 
```

# jquery - 如何从 PHP 获取数组值到 JQuery？

> ID：15996558
> 
> 赞同：-1
> 
> 时间：2013-04-14T06:55:28.450
> 
> 标签：jquery

如何从 PHP 获取数组值到 JQuery？然后在 jquery 中提醒任何人从 PHP 获取数组值.. 任何简单而完整的示例..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:23:36.510

**PHP**

使用 json_encode 以 JSON 格式对数组进行编码

```
echo '{"Data":'. json_encode($clients) .'}'; 
```

**jQuery**

您可以使用 getJSON 方法获取数据并使用 $.each 循环遍历它

```
$.getJSON(serviceURL+'/getPerkDetail.php?doc_id='+doc_id, function (data) {
    var ClientsAll = JSON.parse(data);

    $.each(ClientsAll.Data, function() {

        var client_id = this.client_id;
        echo client_id;

    });
}); 
```

# ruby-on-rails - 回滚导轨版本

> ID：15996561
> 
> 赞同：1
> 
> 时间：2013-04-14T06:55:35.677
> 
> 标签：ruby-on-rails, rvm

我目前已经安装了 Rails 3.2.13（gem install rails -v 3.2.13）。但由于某些原因，我需要回滚到版本 3.2.13。我该怎么做？现在：

```
> rails -v    
You have requested:

  rails = 3.2.13

The bundle currently has rails locked at 3.2.12.
Try running `bundle update rails`
Run `bundle install` to install missing gems. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:23:24.253

在您的 Gemfile 中，查找该`gem 'rails'`行并将其更改为

```
gem 'rails', '3.2.12' 
```

然后运行`bundle install`

# android - Android 上的 OpneGL ES 程序没有模拟并给出这些错误

> ID：15996564
> 
> 赞同：0
> 
> 时间：2013-04-14T06:55:55.480
> 
> 标签：android, opengl-es, android-emulator

[2013-04-14 12:05:12 - Cube3D] ------------------------------

[2013-04-14 12:05:12 - Cube3D] Android 发布！

[2013-04-14 12:05:12 - Cube3D] adb 运行正常。

[2013-04-14 12:05:12 - Cube3D] 执行 com.example.myfirst3dcube.Cube3D 活动启动

[2013-04-14 12:05:12 - Cube3D] 自动目标模式：启动具有兼容 AVD 'AVD_for_3_7_FWVGA_slider' 的新模拟器

[2013-04-14 12:05:12 - Cube3D] 使用虚拟设备“AVD_for_3_7_FWVGA_slider”启动新模拟器

[2013-04-14 12:06:53 - Cube3D] 发现新模拟器：emulator-5554 [2013-04-14 12:06:53 - Cube3D] 等待 HOME ('android.process.acore') 启动...

[2013-04-14 12:07:22 - 模拟器] 无法创建上下文 0x3005

[2013-04-14 12:07:22 - Emulator] 模拟器：警告：无法使用软件渲染器初始化 OpenglES 模拟。

[2013-04-14 12:07:22 - Emulator] 警告：数据分区已在使用中。变化不会持续！

[2013-04-14 12:07:22 - Emulator] 警告：缓存分区已在使用中。变化不会持续！

[2013-04-14 12:07:22 - Emulator] 模拟器：模拟器窗口不在视野范围内，并已重新定位

[2013-04-14 12:07:22 - 模拟器] [2013-04-14 12:08:34 - Cube3D] 模拟器 5554 已断开连接！取消“com.example.myfirst3dcube.Cube3D 活动启动”！

请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:01:27.337

您需要为模拟器设置参数，请查看此链接：

[http://www.learnopengles.com/android-emulator-now-supports-native-opengl-es2-0/](http://www.learnopengles.com/android-emulator-now-supports-native-opengl-es2-0/)

或这个

[http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)

即使它在旧版本上运行也是软件渲染的并且它会很慢，如果它可以运行的话，但是新版本从未尝试过，但因为硬件加速可能会快得多（第一个链接）。

# sql - 在 SQL Server 中编写 VIEW 时需要帮助

> ID：15996565
> 
> 赞同：3
> 
> 时间：2013-04-14T06:56:15.607
> 
> 标签：sql, sql-server, view

我在 SQL Server 中有 2 个表，一个称为`PO RECEIPT`表，另一个是`Move Order`表。

我需要编写一个查询以将数据插入`Receipt`工作正常的表中。收据编号在表中将是唯一的，`Receipt`因为它是主键和自动增量，例如，对于`Receipt`数字 1，我收到了 2000 个数量（它是一列）。

如果我想将 500 移动到移动，下次再移动 500 以获得相同的收据编号。`Move Order`现在我想编写一个视图，它将在按分组的表中加起来移动数量，`Receipt Number`并从表中收到的数量列中减去这个数量`Receipt`。

目前我编写了这个视图，它在相同的情况下工作正常，`Receipt Number`但是当我们`Receipt Number`在`Move Order`表中有不同时，它会产生错误。观点是

```
select distinct 
    [5_PO_RECEIPT_TABLE_DATABASE].[Part Number],
    [5_PO_RECEIPT_TABLE_DATABASE].[Receipt Number],
    (select sum([Move_Order].[Move Quantity]) 
     from [Move_Order] 
     group by [Move_Order].[Receipt Number]),
    [5_PO_RECEIPT_TABLE_DATABASE].[Quantity Received] + [Move_Order].[Move Quantity] as TotalQuantity 
from 
    [5_PO_RECEIPT_TABLE_DATABASE]
inner join 
    [Move_Order] on [5_PO_RECEIPT_TABLE_DATABASE].[Receipt Number] = [Move_Order].[Receipt Number] 
```

以上视图产生的错误是

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:27:38.120

好吧，错误很明显：您的子查询（`(select sum(..) from [Move_order]....`返回多个值 - 如果您在`SELECT`列列表中使用子查询，则不能让子查询返回多个值......

最有可能的是，您只想`SUM([Move_Order].[Move Quantity])`查看当前正在查看的那个`Move_Order`- 因此您需要更改子查询以考虑到这一点：

```
SELECT DISTINCT
    rcpt.[Part Number],
    rcpt.[Receipt Number],
    (SELECT SUM(m.[Move Quantity]) 
     FROM [Move_Order] m
     WHERE m.[Receipt Number] = rcpt.[Receipt Number]),
    rcpt.[Quantity Received] + mo.[Move Quantity] AS TotalQuantity 
FROM
    [5_PO_RECEIPT_TABLE_DATABASE] rcpt
INNER JOIN 
    [Move_Order] mo ON rcpt.[Receipt Number] = mo.[Receipt Number] 
```

我还使用有意义/不言自明的**表别名**来使查询更具可读性......

所以现在，您的子查询将汇总表中当前正在处理的那个值的所有`[Move Quantity]`值。`[Move Order]``[Receipt Number]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:26:07.777

同样在 SQLServer2005+ 中，您可以使用带有[OVER()](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句的选项

```
SELECT DISTINCT
       rcpt.[Part Number],
       rcpt.[Receipt Number], 
       SUM(mo.[Move Quantity]) OVER(PARTITION BY rcpt.[Receipt Number]),
       rcpt.[Quantity Received] + mo.[Move Quantity] AS TotalQuantity
FROM [5_PO_RECEIPT_TABLE_DATABASE] rcpt
  INNER JOIN [Move_Order] mo ON rcpt.[Receipt Number] = mo.[Receipt Number] 
```

顺便说一句，我认为在这种情况下 DISTINCT 关键字过多，因为您在 TotalQuantity 列中的值不同

# javascript - 在 onmouseover 上将元素移入和移出可查看的 div 区域（javascript 数组有问题）

> ID：15996566
> 
> 赞同：0
> 
> 时间：2013-04-14T06:56:16.220
> 
> 标签：javascript, html, css

我有一个`<div>`有更多图像然后可以放入视图中，所以我使用`overflow: hidden;`css 属性来隐藏其余部分。现在我有一个按钮，我想“滚动”到下一组图像，当鼠标悬停在箭头图像上时这些图像当前隐藏。但是我不确定我该怎么做！我正在寻找 css 或 javascript 解决方案，而不是 jquery 插件。这是我目前的页面，看起来像这样[http://ec2-23-22-226-163.compute-1.amazonaws.com/](http://ec2-23-22-226-163.compute-1.amazonaws.com/)我想让它像这样[http://ec2- 23-22-226-163.compute-1.amazonaws.com/home.php](http://ec2-23-22-226-163.compute-1.amazonaws.com/home.php)

有什么我不清楚的地方，我很乐意澄清感谢任何关于如何完成这项工作的建议或提示

我认为可能有一种方法可以使用纯 css（理想）或使用 javascript 进行深度 html dom 操作。

* * *

**更新** 好的，所以我继续尝试如何解决这个问题，但是我再次卡住了我有这个java脚本（如下）我基本上做的是删除第一个元素`div`并将其放入第二个元素，并将其`div`设置为隐藏（我把它放在一秒钟`div`内，所以一旦我弄清楚这一点，我就不能在向左滚动时把它们放回去）但是在移动第二个元素时，`<div>`我得到一个错误`Uncaught Error: NotFoundError: DOM Exception 8`，我可以告诉这是由`genreNum[rownum]++`（实际上不是更新）引起的所以 a`0` 应该变成 a`1`但不）完全确定为什么这不起作用它像 myarray[0]++ 那样工作？任何帮助将不胜感激，您可以在 [http://ec2-23-22-226-163.compute-1.amazonaws.com/上验证这种情况](http://ec2-23-22-226-163.compute-1.amazonaws.com/)我还在代码显示中添加了警报`genreNum[rownum]+"---"rownum`以确保这是问题所在

```
 var timer_on=0;
 var t;
 var genreNum;

function scrollright(genre, id, rownum){
 var seriesID = genre + "_" + genreNum[rownum];
 var moveTo = "invisible" +genre;
 var series = document.getElementById(seriesID);
 var hideTo = document.getElementById(moveTo);
 var row = document.getElementById(rownum);
 series.style.visibility = "hidden";
 hideTo.appendChild(series);
 row.removeChild(series);
 genreNum[rownum]++;
 if (genreNum[rownum] == id){
   num=0;
 }
 t=setTimeout(function() {scrollright(genre,id,rownum)},1000); // move one element evry    1 second
}

function makescroll(genre, id, rownum){
  if(!timer_on){
    timer_on=1;
    scrollright(genre, id, rownum); // move one element evry 1 second
  }
 }

function stopscroll(genre, id){
  clearTimeout(t);
  timer_on=0;
 }
 function arrayStartup(){
  var rows =  document.getElementsByClassName("series_row");
  genreNum = new Array();
  for (i=0; i<rows.length ; i++){
      genreNum[i]=0;
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:16:25.943

这是一种方法：

html:

```
<div style="height:100px;width:250px;overflow:hidden;border:1px solid black;">
    <div id="inner" style="left:0;height:100px;width:500px;position:relative;">
        <div style="width:100px;height:100px;float:left;border:1px solid red">image1</div>
        <div style="width:100px;height:100px;float:left;border:1px solid red">image2</div>
        <div style="width:100px;height:100px;float:left;border:1px solid red">image3</div>
        <div style="width:100px;height:100px;float:left;border:1px solid red">image4</div>
    </div>
</div>
<a href="javascript:;" onclick="doMove(200)">move left</a>
<a href="javascript:;" onclick="doMove(-200)">move right</a> 
```

javascript:

```
function doMove(pix){
    var inner = document.getElementById("inner");
    var currentLeft = parseInt(inner.style.left);
    var newLeft = currentLeft+pix;
    inner.style.left = newLeft+"px";
} 
```

jsfiddle : [jsfiddle](http://jsfiddle.net/novomanish/CqWDg/)

解释：

1.  顶部 div 已隐藏溢出
2.  内部 div 包含具有相对位置的图像
3.  javascript 将改变内部 div 的 style.left 并且它会给人一个水平滚动页面的印象

# jquery - jQuery UI 手风琴的问题（可折叠）

> ID：15996578
> 
> 赞同：0
> 
> 时间：2013-04-14T06:58:57.600
> 
> 标签：jquery, user-interface, accordion

再次遇到 jQuery 问题——这一次，我需要一个可折叠的手风琴来导航。

当我单击“工作”时，我希望打开列表。我目前正在使用[此处](http://jqueryui.com/accordion/#collapsible)示例中使用的相同 jquery 。

现在，我只是想让它工作......但我希望它默认为折叠，以便它可以打开。不知道如何做那部分。

这是一个小提琴：http: [//jsfiddle.net/bG52W/](http://jsfiddle.net/bG52W/)

的HTML

```
<ul class="accordion">
<li><a href="#"><h1>work</h1></a></li>
  <ul class="nav">
    <li><a href="#section1"><p class="nav_p">anatomy of type</p></a></li>
    <li><a href="#section2"><p>clash album redesign</p></a></li>
    <li><a href="#section3"><p>"ghost" book jacket</p></a></li>
    <li><a href="#section4"><p>charlie chaplin</p></a></li>
    <li><a href="#section5"><p>design influence</p></a></li>
    <li><a href="#section6"><p>"thrift thoughts" zine</p></a></li>
    <li><a href="#section7"><p>cigarette card illustration</p></a></li>
    <li><a href="#section8"><p>"frosty" winecooler packaging</p></a></li>
  </ul>

<li><a href="#"><h1>about</h1></a></li>

<li><a href="#"><h1>contact</h1></a></li>
</ul> 
```

jQuery

```
$(function() {
    $( "#accordion" ).accordion({
      collapsible: true
    });
  }); 
```

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:04:06.817

首先，您的选择器 $("#accordion") 是错误的。应该是 $( ".accordion" )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:07:51.280

[http://jsfiddle.net/bG52W/3/](http://jsfiddle.net/bG52W/3/)

即使您的所有代码都是正确的。它永远不会在 jfiddle 中起作用。您没有检查左侧的 jQuery UI。

除此之外，您的结构有点错误：

> 您的手风琴容器的标记需要成对的标题和内容面板：

[http://api.jqueryui.com/accordion](http://api.jqueryui.com/accordion)

```
<div class="accordion">
<h1><a href="#">work</a></h1>
  <div class="nav">
      <ul>
    <li><a href="#section1"><p class="nav_p">anatomy of type</p></a></li>
    <li><a href="#section2"><p>clash album redesign</p></a></li>
    <li><a href="#section3"><p>"ghost" book jacket</p></a></li>
    <li><a href="#section4"><p>charlie chaplin</p></a></li>
    <li><a href="#section5"><p>design influence</p></a></li>
    <li><a href="#section6"><p>"thrift thoughts" zine</p></a></li>
    <li><a href="#section7"><p>cigarette card illustration</p></a></li>
    <li><a href="#section8"><p>"frosty" winecooler packaging</p></a></li>
      </ul>
  </div>
<h1><a href="#">about</a></h1>
  <div><a href="#"><h1>about</h1></a></div>
<h1><a href="#">contact</a></h1>
  <div><a href="#"><h1>contact</h1></a></div>
</div> 
```

就像那个声音说的那样，你的选择器是错误的。

```
$(function () {
    $(".accordion").accordion({
        collapsible: true
    });
}); 
```

# javascript - 处理“Switchlike”复选框的模式名称

> ID：15996579
> 
> 赞同：0
> 
> 时间：2013-04-14T06:58:59.520
> 
> 标签：javascript, jquery, algorithm, design-patterns, imagemapster

我正在尝试处理一个我无法完全命名的问题（因此在谷歌上搜索时遇到了麻烦）。

它处理一组类似“开关”的复选框。

以下是**具体**情况：

*   我正在使用带有类似于该演示的复选框设置的[图像映射器插件。](http://www.outsharked.com/imagemapster/examples/usa.html)
*   复选框是从状态名称生成的，单击它们会调用 mapster 来打开/关闭状态。
*   我正在使用一组额外的复选框，称为“美国东北部”、“美国东南部”等。
*   单击“东北”必须打开该地区的所有州。再次单击应将其关闭。很简单。

**并发症**：

*   区域之间存在重叠状态。
*   单击美国东北部，然后关闭其中一个州，然后单击东南部等，现在使我的简单直接逻辑感到困惑。

**可能的解决方案**：

*   我需要这些第三级复选框充当“开关”，跟踪复选框和映射区域的*状态*。
*   当手动单击其中一个复选框时，Northeast 必须足够智能以关闭自身。
*   点击东南，千万不要因为重叠状态……等而混淆了NE的*数据状态*。

我正在寻找一种以前处理过此类问题的设计模式。如果有人知道一个没有名字的解决方案模式，那么该知识也是最受欢迎的。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:56:13.813

这就是集合论的用武之地。

您可以使用三态复选框来表示零件选择。看这里。 [html中的三态复选框](https://stackoverflow.com/questions/1726096/tri-state-check-box-in-html)

[这里](http://archive.plugins.jquery.com/project/tristate-checkbox)有一个 jQuery 三态复选框插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:47:30.120

我相信你只需要依赖 checkboxen 的 javascript onclick 事件。

有2种情况：

*   该复选框未被选中（即它已打开）。它必须根据它查找所有boxen，如果它们被选中，则调用它们的`click`方法。
*   复选框正在被选中。它必须查找它所依赖的所有boxen，如果它们未被选中，则调用它们的`click`方法。

依赖图可以描述为一个矩阵，列和行索引表示框号，矩阵单元是行框依赖、依赖还是与列框无关。

您可能希望使用单独的数组来保持框名称和索引之间的映射。

当然，您必须确保依赖关系图中没有循环，否则您最终会导致事件触发器递归地调用自己。

* * *

更新：

我尝试了自己的解决方案，看看效果如何。

html文档：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
 <table>
  <thead>
    <colgroup>
    <col width='80'>
    <col width='20'>
    </colgroup>
    <colgroup>
    <col width='80'>
    <col width='20'>
    </colgroup>
    <colgroup>
    <col width='80'>
    <col width='20'>
    </colgroup>
    <tr>
    <th colspan="2">Level 1</th>
    <th colspan="2">Level 2</th>
    <th colspan="2">Level 3</th>
    </tr>
  <tbody>
    <tr>
      <td colspan='4'></td>
      <td rowspan='0'><label for='top' >top</label></td>
      <td rowspan='0'><input type='checkbox' id='top' value=''/></td>
    </tr>
    <tr>
      <td colspan='2'></td>
      <td rowspan='3'><label for='grp1' >grp1</label></td>
      <td rowspan='3'><input type='checkbox' id='grp1' value=''/></td>
    </tr>
    <tr>
      <td><label for='id1' >id1</label></td>
      <td><input type='checkbox' id='id1' value='abc'/></td>
    </tr>
    <tr>
      <td><label for='id2' >id2</label></td>
      <td><input type='checkbox' id='id2' value='def'/></td>
    </tr>
    <tr>
      <td><label for='id3' >id3</label></td>
      <td><input type='checkbox' id='id3' value='ghi'/></td>
    </tr>
    <tr>
      <td colspan='2'></td>
      <td rowspan='3'><label for='grp2' >grp2</label></td>
      <td rowspan='3'><input type='checkbox' id='grp2' value=''/></td>
    </tr>
    <tr>
      <td><label for='id4' >id4</label></td>
      <td><input type='checkbox' id='id4' value='klm'/></td>
    </tr>
    <tr>
      <td><label for='id5' >id5</label></td>
      <td><input type='checkbox' id='id5' value='nop'/></td>
    </tr>
    <tr>
      <td><label for='id6' >id6</label></td>
      <td><input type='checkbox' id='id6' value='qrs'/></td>
    </tr>
  </tbody>
</table>
<hr>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/multicheck.js" type="text/javascript"></script>
</body>
</html> 
```

和 javascript 文件：

```
var data = {
    depends: {
        id1 : ['grp1'],
        id2 : ['grp1'],
        id3 : ['grp1', 'grp2'],
        id4 : ['grp2'],
        id5 : ['grp2', 'grp1'],
        id6 : ['grp2'],
        grp1 : ['top'],
        grp2 : ['top']
    },
    owns : {
        grp1 : ['id1','id2','id3', 'id5'],
        grp2 : ['id4','id5','id6', 'id3'],
        top  : ['grp1','grp2']
    }    
};

function check(elt){
    var target = elt.target;
    if (!target.checked) {
        // unchecking -> uncheck depends
        for (e in data.depends[target.id]) {
            $("input#"+data.depends[target.id][e]).each(
                function(){
                    if (this.checked)
                        this.click();
                });
        }
    }
    else {
        // checking -> check owns
        for (e in data.owns[target.id]) {
            $("input#"+data.owns[target.id][e]).each(
                function (){
                    if (!this.checked)
                        this.click();
                });
        }
    }
    return true;
}

(function(){
     $(document).ready(function(){
         $("input[type='checkbox']").bind('click',check);
     });
})(); 
```

数据对象包含所有依赖信息：`depends`列出所有“直接依赖”关系，并`owns`列出反向关系。

虽然它表示依赖图，但我直接使用 boxen 的 id 作为索引，并将其拆分为两个。

例子：

*   每当`top`s 检查时，所有其他 boxen 也会在级联中进行检查（`grp1`首先检查它拥有的所有 id，然后`grp2`同样检查）。
*   无论何时`id5`未选中`grp1`，`top`和`grp2`在此级联顺序中未选中。

_Remark：我不是 jquery 精通，所以可能有更简洁的方法来获得相同的结果。_

# sql-server-2008 - SQL Server 使用什么样的搜索来获取结果

> ID：15996584
> 
> 赞同：2
> 
> 时间：2013-04-14T06:59:52.580
> 
> 标签：sql-server-2008

我想知道，当我使用：

```
select *
from table_name
where Id = 2013 
```

SQL Server 2008 在内部使用什么样的搜索来获取行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T07:12:47.270

这取决于是否`Id`被索引以及索引是否包含（覆盖）所有列。

通常称为`id`主键的列和（默认情况下）聚集索引键。如果您是这种情况，那么您很可能会获得聚集索引搜索。

SQL Server 索引是[B+ 树](http://msdn.microsoft.com/en-us/library/ms177443%28v=sql.105%29.aspx)。

![B树](https://i.stack.imgur.com/IVm7O.gif)

SQL Server 将从索引根页开始，并沿着它向下找到该行。在这种情况下读取的页数将是索引的深度。

如果不存在合适的索引，则 SQL Server 将需要读取表中的每一页。

最后还有一种可能是`id`被索引了，但是索引并没有覆盖表中的所有列。在这种情况下，您可能会看到一个带有索引查找的计划，然后是书签/键查找以检索您的`SELECT *`.

# android - 在预设的时间后开始意图

> ID：15996585
> 
> 赞同：0
> 
> 时间：2013-04-14T06:59:54.590
> 
> 标签：android, android-intent

`intent`我希望在经过预设的不活动时间后通过 a 开始一个新活动。我使用了下面粘贴的代码，但它仍然无法正常工作并且它停留在同一个屏幕上。我知道这不是 android-y 的方式，但我很确定它应该可以工作（这种方式对我来说更有意义）。附带说明一下，我可以使用它来使文​​本视图、按钮或其他对象之类的东西将其可见性从 更改`invisible`为`visible`吗？我环顾四周，没有找到任何答案。提前致谢。

```
public class Welcome extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.welcome);

    Thread thread = new Thread() {
        @Override
        public void run() {
            try {
                Thread.sleep(10000); 
            } catch (InterruptedException e) {
            }

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    //do stuff
                    Intent myIntent = new Intent(Welcome.this,MainActivity.class);
                    Welcome.this.startActivity(myIntent);
                    overridePendingTransition(R.anim.push_up_in, R.anim.push_up_out);
                }
            });
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:04:58.453

您可以使用处理程序来做到这一点：

```
 new Handler().postDelayed(<your runnable>, delayInMillis); 
```

对于更新小部件，这样做不是一个好主意。如果延迟不是很大，最好使用[AsyncTask 。](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:14:12.363

您可以创建一个线程并使其在该时间间隔内休眠。在那之后，您的新意图将开始。

例如：-

```
Thread splashTread = new Thread() {
                   @Override
                   public void run() {
                       try {
                           int waited = 0;
                           while(_active && (waited < _splashTime)) {
                               sleep(100);
                               if(_active) {
                                   waited += 100;
                               }
                           }
                       } catch(InterruptedException e) {
                           // do nothing
                       } finally {
                           finish();

                          Intent intent = new Intent(First_Intent.this,Second_Intent.class );
                            startActivity(intent);
                       }
                   }
               };
               splashTread.start();

               } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:31:20.993

你可以试试这个...

```
Timer timer = new Timer();
    timer.schedule(new TimerTask() {

        @Override
        public void run() {
             // TODO Auto-generated method stub
             Do your thing......

             Intent intent = new Intent(FirstActivity.this,SecondActivity.class);
            startActivity(intent);
        }
    }, 3000); 
```

# tomcat - 访问新的 apache-bloodhound 安装时出现“请求的资源不可用”错误

> ID：15996586
> 
> 赞同：0
> 
> 时间：2013-04-14T07:00:05.347
> 
> 标签：tomcat, wsgi, apache-bloodhound

我已经使用以下位置的说明在 Ubuntu-12.04 服务器上安装了 apache-bloodhound：

[https://issues.apache.org/bloodhound/wiki/BloodhoundInstall](https://issues.apache.org/bloodhound/wiki/BloodhoundInstall)

我可以使用“测试服务器”标题下的 tracd 功能访问该站点，一切似乎都很好。

我创建了文件 /etc/apache2/sites-available/bloodhound 如下：

```
<VirtualHost *:8080>
   WSGIDaemonProcess bloodhound_tracker user=alex python-path=/usr/share/bloodhound/lib/python2.7/site-packages
   WSGIScriptAlias /bloodhound /usr/share/bloodhound/site/cgi-bin/trac.wsgi
   <Directory /usr/share/bloodhound/site/cgi-bin>
     WSGIProcessGroup bloodhound_tracker
     WSGIApplicationGroup %{GLOBAL}
     Order deny,allow
     Allow from all
   </Directory>
   <LocationMatch "/usr/share/bloodhound/[^/]+/login">
     AuthType Digest
     AuthName "bloodhound"
     AuthDigestDomain /bloodhound
     AuthUserFile /usr/share/bloodhound/environments/main/bloodhound.htdigest
     Require valid-user
   </LocationMatch>
 </VirtualHost> 
```

但是当我尝试访问该站点时，我收到此错误：

```
HTTP Status 404 - /bloodhound
type Status report
message /bloodhound
description The requested resource (/bloodhound) is not available.
Apache Tomcat/6.0.35 
```

我不熟悉 WSGI，但深入研究了文档，并没有发现该文件有任何明显的内容。我确实在更改此文件后重新启动了 apache，并且重新启动了服务器也没有成功。

任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:18:33.367

根据错误，您使用的 URL 实际上被路由到 Java 应用程序，而不是 mod_wsgi。因此可能未启用 VirtualHost，或者您尚未为该端口启用基于名称的虚拟主机，并且正在回退到配置中的第一个 VirtualHost，该配置通过代理到 Java 应用程序。

# jquery - 带有 JQuery Mobile 的粘性页脚

> ID：15996587
> 
> 赞同：2
> 
> 时间：2013-04-14T07:00:06.933
> 
> 标签：jquery, html, css

我使用了一个粘性页脚的教程。它有效，但我随后添加了 JQuery Mobile，但它不再有效。这是一个 jfiddle（不起作用）。取消单击 Jquery 移动扩展的使用，它可以满足我的要求。如何获得使用 Jquery mobile 的功能？

[http://jsfiddle.net/SteveRobertson/CTjZs/15/](http://jsfiddle.net/SteveRobertson/CTjZs/15/)

它使用基本的粘性页脚结构......

```
<div id="wrap">
    <div id="main">
        content
    </div>
</div>

<div id="addfooter">
</div> 
```

感谢您花时间考虑我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:40:32.183

jQuery Mobile 有一个支持固定或“粘性”位置的本机页脚。示例和文档可以在[http://view.jquerymobile.com/1.3.1/dist/demos/widgets/fixed-toolbars/找到](http://view.jquerymobile.com/1.3.1/dist/demos/widgets/fixed-toolbars/)

# c++ - 关于 C++ 类中的强制转换

> ID：15996589
> 
> 赞同：1
> 
> 时间：2013-04-14T07:00:14.893
> 
> 标签：c++, class, c++11, constructor, type-conversion

我已经写 c 好几年了，只是为了一些需要而进入 c++ ！我的书是 C++ Primer 5/e，我已经达到了关于构造函数转换的主题并且遇到了一些问题

在 C++ 中，我们有多种类型的转换。像 static_cast、dynamic_cast 一样，我们也有类似函数的转换，它是一种显式转换。

```
class Sales_data{
public:
    //C++11 feature,ask compiler to create a default constructor for us
    Sales_data() = default;
    Sales_data(const std::string &s, unsigned n, double p):
        bookNo(s), units_sold(n), revenue(p*n);
    explicit Sales_data(const std::string &s): bookNo(s){}
    explicit Sales_data(std::istream&);

    Sales_data combine(const Sales_data &item);
private:
    std::string bookNo;      // implicitly initialized to the empty string
    unsigned units_sold;
    double revenue;
}; 
```

std::string s 是一个 ISBN。第四个从标准输入读取 ISBN

我知道没有明确的，以下陈述是合法的。

```
item.combine(string("ISBN NUMBER"));
item.combine(cin);

//error: need two conversion const char *->temporary string-> temporary Sales_item
item.combine("ISBN NUMBER"); 
```

我只是不明白使最后两个构造函数显式有什么好处？

[http://www.cplusplus.com/reference/vector/vector/vector/](http://www.cplusplus.com/reference/vector/vector/vector/)

我不明白为什么某些向量的构造函数被声明为显式？是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:14:09.520

`explicit`禁止调用构造函数进行自动转换。构造函数仍然可以用作普通构造函数。是的，该语言应该被设计为`explicit`默认具有构造函数并注释（`implicit`？）转换构造函数......但这就是故事的发展方式。

标记为显式的原因，`std::vector<T>::vector(int)`例如是为了禁止以下代码：

```
void do_fancy_stuff(const std::vector<std::string> &data);

do_fancy_stuff(20); 
```

如果向量构造函数不是显式的，它将用于将 20 个空字符串转换`int`为 a `vector`，这没有什么意义。

编写构造函数时的一般想法`TypeA::TypeA(TypeB x)`是想知道：“这个构造函数是*将 转换*为`TypeB`a`TypeA`还是仅用`x`作单个参数？如果是后者，请添加`explicit`.

# jquery - 将 jquery 变量插入 html 输入

> ID：15996591
> 
> 赞同：0
> 
> 时间：2013-04-14T07:00:24.227
> 
> 标签：jquery

目的是从一个输入单元格中获取值并插入到另一个单元格中。

为了获得我使用的价值

```
var name = $('#test').val(); 
```

以上工作。

然后我需要插入。如果我插入简单文本（不是变量），那么它可以工作

```
$("#test3").val("Dolly Duck"); 
```

**但是如何插入变量（var name）而不是 val（“Dolly Duck”）？**

下面是整个代码

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript">

//This works
$("#btn3").click(function(){
$("#test3").val("Dolly Duck");
});

//But his does not work
//at first get value from input form (define variable) and alert to check if it works
var name = $('#test').val();
//alert(name);

//now need to insert
//$("#btn4").click(function(){

//below does not work None of them
//$("#test").name;
//$("#test4").$('#test').val();
//$("#test4").jsvar: $('#test').val();

});
});
</script>
</head>
<body>
<p>Name: <input type="text" id="test" value="Mickey Mouse1"></p>
<p>Name: <input type="text" id="test3" value="Mickey Mouse2"></p>
<p>Name: <input type="text" id="test4" value="Mickey Mouse3"></p>
<button id="btn1">Show Value</button>
<button id="btn3">Set Value</button>
<button id="btn4">Set Value</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:02:41.267

传入变量：

```
$("#test3").val(name); 
```

我还会在您要设置另一个文本框的值之前获取该值，因为该`name`变量不会自行更新：

```
$("#btn3").click(function() {
    var name = $('#test').val();
    $("#test3").val(name);
}); 
```

此外，请确保与 DOM 交互的代码位于`$(document).ready()`回调内部：

```
$(document).ready(function() {
    $("#btn3").click(function() {
        var name = $('#test').val();
        $("#test3").val(name);
    });
}); 
```

# python - python：将字符串的二维列表转换为浮点数

> ID：15996596
> 
> 赞同：3
> 
> 时间：2013-04-14T07:01:09.767
> 
> 标签：python, multidimensional-array

我有一个字符串类型的二维列表，我正在尝试将其转换为 int。到目前为止我尝试过的事情：

```
[[float(i) for i in lst[j] for j in lst] 
```

使用 for 循环：

```
for i in range(len(lst)):
    for j in range(len(lst[i])):
         lst[i][j]=float(lst[i][j]) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T07:02:04.997

```
>>> nums = [['4.58416458379', '3.40522046551', '1.68991195077'], ['3.61503670628', '5.64553650642', '1.39648965337'], ['8.02595866276', '8.42455003038', '7.93340754534']]
>>> [[float(y) for y in x] for x in nums]
[[4.58416458379, 3.40522046551, 1.68991195077], [3.61503670628, 5.64553650642, 1.39648965337], [8.02595866276, 8.42455003038, 7.93340754534]] 
```

我不确定你的意图是什么，但由于你声称`for`循环版本不起作用，也许你想要一个一维结果，在这种情况下：

```
>>> [float(y) for x in nums for y in x]
[4.58416458379, 3.40522046551, 1.68991195077, 3.61503670628, 5.64553650642, 1.39648965337, 8.02595866276, 8.42455003038, 7.93340754534] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T08:51:34.113

您的两个解决方案都接近工作。事实上，第二个应该已经可以工作了，尽管它可能会有所改进。

这是我更新列表理解版本的方法。这个版本的（也许是可疑的）优点是它创建了一个包含浮点数的新嵌套列表，并保持原始嵌套字符串列表不变（因此如果需要，您可以将其用于其他用途）：

```
new_lst = [[float(string) for string in inner] for inner in lst] 
```

以下是我如何更新你的 for 循环代码。与使用列表推导式的版本不同，此代码修改了原始列表列表的内容。虽然您当前的代码应该可以正常工作，但在我看来，下面的版本更“pythonic”，因为它迭代列表的内容，而不是迭代范围和索引列表。索引只需要赋值，我们使用`enumerate`内置函数获取索引和字符串：

```
for inner in lst:
    for index, string in enumerate(inner):
        inner[index] = float(string) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T07:31:14.570

Using `map()`, here's a simplified example

```
nums = [['4.58416458379','1.68991195077'], ['8.02595866276'],
    ['3.61503670628', '5.64553650642', '1.39648965337']]

def myFloat(myList):
    return map(float, myList)

map(myFloat, nums) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-15T15:50:38.957

```
newList = []
listSize = len(oldList)
for i in range(0, listSize):
    newList.append([])
    for j in range(0, 2):
        newList[i].append(float(oldData[i][j])) 
```

这对我有帮助，这创建了一个名为**newList的新列表，并将****oldList**中的所有元素类型转换为**newList**。尽管**newList**被初始化为一维数组，但第 4 行会根据要转换的数组的任何维度添加新维度。

 ***** * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-14T10:23:10.007

将您的第一个解决方案更正为：

```
>>> sss = [['4.584','1.689'],['8.025'],['3.615','5.645','1.396']]
>>> fff = [float(s) for ss in sss for s in ss]      #notice the order of loops
>>> fff
[4.584, 1.689, 8.025, 3.615, 5.645, 1.396] 
```

有用。****

# ios6 - iOS6 向 ABAdressbook 添加一些附加信息

> ID：15996599
> 
> 赞同：0
> 
> 时间：2013-04-14T07:01:36.060
> 
> 标签：ios6, abaddressbook

我需要知道通讯录中当前人员的卡是否从我的应用程序中更改。

我最好的办法是在里面保存一些数据或属性`ABAddressbook`。

如何在 iOS 6 中将一些额外数据保存在个人卡片中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:26:24.690

iOS 不提供在地址簿中存储额外数据的工具。

保留额外联系人相关数据的最直接方法是使用 ABPerson 记录的 RecordID 将其存储在您的应用程序中。但是，请注意，这些标识符可能会消失（如果从地址簿中删除记录）甚至更改（如果使用更改了同步配置，例如 iCloud）。如果您确实需要保持与 ABPerson 记录匹配的额外数据，那么您可以获取 CompositeName 属性的副本（这是从名字、姓氏等构造的派生值），然后如果缓存的 RecordID 查找失败，则寻找具有匹配 CompositeName 的记录。

如果您只想确定 ABPerson 记录是否已更改，那么仅缓存 ModificationDateProperty 的值并将其与新值进行比较就足够了？

# c# - 如何在 ZedGraph 中同步三个 GraphPane？

> ID：15996603
> 
> 赞同：3
> 
> 时间：2013-04-14T07:02:07.327
> 
> 标签：c#, zedgraph

在使用**ZedGraph**在三个 GraphPane 上显示六个图形时，如第一张图片所示，所有图形都是同步的。但是，当我尝试显示第一个窗格的日期时，图表不同步，如第二张图片所示。重要的是所有六个图表保持同步，以便用户理解整个图表。

[我已经按照tmwoods](https://stackoverflow.com/users/1828137/tmwoods) [here](https://stackoverflow.com/questions/15214458/zedgraph-how-to-customize-date-based-x-axis-tics)的建议尝试了 XAxis.Type = AxisType.Date并且能够沿 X 轴显示日期。沿 X 轴的 DateTime 可以以分钟/秒为单位，例如从上午 9:00 到下午 4:00 也可以以天为单位，例如从 28/1/2009 到 25/11/2012

![图片1](https://i.stack.imgur.com/QnhFF.png)

![图二](https://i.stack.imgur.com/QXsxF.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:35:50.787

好的，我想我明白了。尝试将此添加到您的代码中：

```
pane1.Chart.Rect = new RectangleF (pane2.Chart.Rect.X,
            pane2.Chart.Rect.Y,
            pane2.Chart.Rect.Width,
            pane2.Chart.Rect.Height); 
```

我一直在四处寻找并`Zedgraph`支持所谓的东西，`Graph Align`但我无法在任何地方找到它的来源。我找到的最接近的是[这里](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/indexd1a6.html?title=Stack_charts_vertically_and_align_the_X_axes)；查看最底部的示例。它描述了如何垂直对齐多个不同大小的图表。但我还没有测试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-23T20:47:21.367

接受的答案是正确的并且有效，但是，ZedGraph 具有使所有轴保持同步的内置功能：

```
zgc.IsSynchronizeXAxes = true; // This keeps X axes min and max in sync
zgc.IsSynchronizeYAxes = true; // This keeps Y axes min and max in sync
zgc.MasterPane.IsCommonScaleFactor = true // This will ensure a common Scale is applied to all graphPanes axes. 
```

这是[IsCommonScaleFactor](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/indexd1a6.html?title=Stack_charts_vertically_and_align_the_X_axes)和[IsSynchronizeXAxes 或 IsSynchronizeYAxes](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/index81ef.html?title=Synchronize_Scrolling_on_a_MasterPane)示例。

# php - 在 5 秒的调用后过期 http 请求

> ID：15996605
> 
> 赞同：0
> 
> 时间：2013-04-14T07:02:19.297
> 
> 标签：php, android

我希望在 android 中使 http 请求在 5 秒后过期。我正在使用 php-mysql 框架并使用下面的代码来显示图像，艺术家相对于用户。下面的代码运行良好，但不安全。如何保护它？请告诉我如何实现它。

提前致谢。

```
public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "http://example.com/getmsgs/strno=123";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL(URL);

        try {
            JSONObject arr2 = json.getJSONObject("feed");
            JSONArray arr = arr2.getJSONArray("entry");

            for (int i = 0; i < arr.length(); i++) {
                JSONObject e1 = arr.getJSONObject(i);

                JSONArray arr3 = e1.getJSONArray("im:image");

                JSONObject arr8 = e1.getJSONObject("im:name");

                JSONObject arr10 = e1.getJSONObject("im:artist");

                    JSONObject e12 = arr3.getJSONObject(0);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            map.put(KEY_THUMB_URL,  e12.getString("label"));

            map.put(KEY_ARTIST, arr8.getString("label"));
            map.put(KEY_TITLE, arr10.getString("label"));
            // adding HashList to ArrayList
            songsList.add(map);
            }

        } catch (JSONException e) {
            // Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getBaseContext(),
                    "Network communication error!", 5).show();
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @SuppressWarnings("unchecked")
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position);
                Toast.makeText(CustomizedListView.this, "ID '" + o.get("KEY_TITLE") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });     
    }   
} 
```

上述请求的 PHP 代码

```
 <?php

    $strno=$_GET['strno'];

    if (isset($strno))
    {
            $connect=mysql_connect("localhost","test","test") or die ('Connection error!!!');
            mysql_select_db("test") or die ('Database error!!!');

        $query=mysql_query("select sno FROM users  where strno='$strno';");
        while($row = mysql_fetch_assoc($query))

        {
            $jsonoutput='{"json":{
                "image":"'.$row['image'].'",
"artist":"'.$row['artist'].'",
"name":"'.$row['name'].'"
                }}';
        }

    }

    echo trim($jsonoutput);
    mysql_close($connect) or die ('Unable to close connection-error!!!');
    }

    ?> 
```

# php - 如何将 url 链接重写为随机生成的 url

> ID：15996607
> 
> 赞同：-1
> 
> 时间：2013-04-14T07:02:31.280
> 
> 标签：php, .htaccess

我想制作一个页面，例如（[http://casisxa.com/wp-content/upgrade/index.php/](http://casisxa.com/wp-content/upgrade/index.php/)）被视为（[http://casisxa.com/wp-content/id=2376651 /](http://casisxa.com/wp-content/id=2376651/) ) 每当单击它时，将“/upgrade/index.php”目录重写为 id=6637882 或 id=2376651 或以此类结尾的随机生成的链接。有没有 .htaccess 文件可以做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:45:00.020

您可以在 php 中执行此操作，例如：

```
<?php
header("Location: http://casisxa.com/wp-content/id=" . rand(1,9999999));
exit;
?> 
```

或者，您可以使用调用生成随机数的程序的重写映射：

```
RewriteMap rand prg:/path/to/script

RewriteRule ^/?wp-content/upgrade/index.php/?$ /wp-content/id=$(rand:1) [L,QSA] 
```

其中`/path/to/script`是生成随机数的脚本，如下所示：[Random number from a range in a Bash Script](https://stackoverflow.com/questions/2556190/random-number-from-a-range-in-a-bash-script)

该`RewriteMap`指令只能在服务器或虚拟主机配置中使用，不能在 htaccess 文件中使用。但是对于所有这些麻烦，您不妨只使用 php。

# php - jquery 更改甚至无法在 IE 上运行

> ID：15996615
> 
> 赞同：0
> 
> 时间：2013-04-14T07:04:14.693
> 
> 标签：php, jquery

我的数据库中有一个部门表。当我单击某个部门时，使用选择框获取部门 ID 并将其发送到另一个查询以通过 jquery ajax 获取子部门。但是我的更改功能仅在我第一次刷新页面时才起作用

```
<div id="depSearch">
<select name="DeptSearchBox" id="DeptSearchBox">
<?php
$sql = "SELECT `id`, `unitname` FROM `units` ORDER BY unitname ASC";
$result = $database->query($sql) or die('cannot connect to the database');

while($row = mysql_fetch_array($result))
{
echo'<option value= "'.$row['unitname'].'">'.$row['unitname'].'</option>';
}
?>
</select> 
</div> 
```

**jQuery代码**

```
$(document).ready(function () {

    $('#DeptSearchBox').change(function (e) {
        var formdata = $('#DeptSearchBox').val();

        $.ajax({
            url: "../../includes/jqueryRequireFiles/display_phone_table.php",
            type: "post",
            data: {
                formdata: formdata
            },
            success: function (data) {
                $('#tele_table').html('<center><img src="../images/Sit_related/loader.gif" /></center>')
                    .hide()
                    .fadeIn('1500', function () {
                    $('#tele_table').html(data);
                });
            }
        });
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:13:25.067

在 javascript 部分中用 DeptSearchBox 按下 Replce。我编辑它。您也可以删除 e.preventDefault();

# asp.net-mvc - routes.IgnoreRoute 不起作用？

> ID：15996617
> 
> 赞同：2
> 
> 时间：2013-04-14T07:04:49.583
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 MVC3 的新手，刚刚开始学习它，今天是我使用它的第一天，我正在使用默认的 MVC3 模板。我需要忽略对 css 文件的调用。请注意 CSS 文件放置在根目录下的 Content 文件夹中。

我试过什么？

```
 routes.RouteExistingFiles = true;
            routes.IgnoreRoute("{resource}.css/{*pathInfo}");
            routes.IgnoreRoute("{file}.css");
            routes.IgnoreRoute("Content/{*pathInfo}"); 
```

使用第一行代码，我一一尝试了这 3 行代码，但没有成功。请指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T20:24:47.957

默认情况下，MVC 不路由静态文件的请求。它为它们创建一个 url 路径，就像非 mvc asp.net 一样。

除非您明确要求 MVC 交付它们。

您可以通过在 web.config 中添加以下内容来做到这一点：

```
<modules runAllManagedModulesForAllRequests="true"> 
```

这意味着每个请求，包括对静态内容的请求，都会进入管道。

将此设置更改为：

```
<modules runAllManagedModulesForAllRequests="false"> 
```

为了阻止这种情况发生。

# java - @Autowired 不在构造函数中创建成员

> ID：15996623
> 
> 赞同：0
> 
> 时间：2013-04-14T07:06:08.970
> 
> 标签：java, spring

我有一个从上下文创建的 bean，之后创建了一个自动装配的成员：

```
@Service
public class FileDownloadService extends WFWFileDownloadService {
    @Autowired
    ConfigurationManager configurationManager; 
```

当我在代码中使用手动构造函数调用时：

```
FileDownloadService fileDownloadService = new FileDownloadService(); 
```

我看到 configurationManager 为空，所以我必须进行手动接线：

```
 public FileDownloadService() {
        configurationManager = new ConfigurationManagerImpl();
    } 
```

使自动装配与手动创建一起工作我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:10:09.113

当您直接调用构造函数时，您只是在创建一个对象而*不是*一个 bean。注解的支持`@Autowired`是bean的一个特性。

询问 bean 的 Spring 上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:16:47.237

如果您尝试使用`new`运算符获取 bean，您将获得`autowired`该类中的所有 bean 为`null`.

您的服务类使用 注释`@Service`，因此要使用它，您还应该自动装配此服务类。

在其他类中访问服务 bean 的示例代码是：

```
@Controller or @Component
public class OtherClass {

    @Autowired FileDownloadService fileService;

    public void download() {
        fileService.downloadFile();
    }

} 
```

为了这个类能够自动装配其他bean，这个类本身应该用`@Controller`or注释`@Component`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:23:26.827

答案很简单：如果您手动创建对象，则无需布线。Spring 应该如何知道您需要布线？您可以使用应用程序上下文（Bean 工厂）的 getBean() 方法，而不是使用 new。[http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/beans/factory/BeanFactory.html](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/beans/factory/BeanFactory.html) [http://static.springsource.org/spring/docs/current /javadoc-api/index.html?org/springframework/beans/factory/BeanFactory.html](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/beans/factory/BeanFactory.html)

# java - 如何实现对一组简单对象的排序？

> ID：15996624
> 
> 赞同：1
> 
> 时间：2013-04-14T07:06:37.627
> 
> 标签：java, hibernate, persistence

我正在尝试做这样的事情：

```
@ElementCollection(fetch = FetchType.EAGER)
@CollectionTable(name = "UserStrings")
@Column(name = "string")
@OrderBy
private List<String> strings = new LinkedList<>(); 
```

这会产生一个表格：

```
UserStrings
-----------
User_object_id bigint(20) NOT NULL,
string DEFAULT NULL 
```

这很好，但我得到的集合`org.hibernate.collection.internal.PersistentBag`是无序的，每次我迭代它时，我都会得到不同的顺序。我尝试使用`@OrderBy`，但它不适用于字符串集合，我想如果它是实体集合的话。

我绝对确定我希望它保留一个字符串集合，为它们创建一个新实体是没有意义的。

我想让字符串按它们的值排序，所以 OrderColumn 也（我认为）不适合这个，因为它为排序创建了额外的列。

任何人都知道我可以做些什么来将它们放入像 ArrayList 或 LinkedList 这样的有序集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:13:20.423

很抱歉成为坏消息的承担者，但这似乎是一个[已知的休眠问题](https://hibernate.atlassian.net/browse/HHH-6875)，尚未解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:15:24.653

[这](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/collections.html#collections-sorted)可能会有所帮助。

```
@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
@JoinColumn(name="CUST_ID")
@Sort(type = SortType.COMPARATOR, comparator = TicketComparator.class)
public SortedSet<Ticket> getTickets() {
    return tickets;
} 
```

# batch-file - 编写用于在两个文件夹/文件结构之间转换的批处理脚本/文件

> ID：15996627
> 
> 赞同：2
> 
> 时间：2013-04-14T07:07:19.527
> 
> 标签：batch-file, directory-structure

我对批处理文件/脚本非常不满意，尤其是与那些“流利”的人相比:)。我真的很想帮助我创建一个简单（并且易于“调整”）的批处理文件/脚本，它可以帮助我做我需要做的事情（如下所述）。

我正在尝试转换我的照片目录的目录结构。我将这些目录中的大多数以一种/类似的方式排列，我想将其转换为对我来说更方便的不同结构。

***我目前的结构如下 -***

```
PhotosCollection01\
|-> Img003.jpg
|-> Img004.jpg
|-> Img005.jpg
|-> Img007.jpg
|-> Img010.jpg
|-> ...
|-> Chosen\
    |-> Img005.jpg
    |-> Img010.jpg 
```

***批处理文件/脚本应将结构更改为 -***

```
PhotosCollection01\
|-> NewName001.jpg (formerly Img003.jpg)
|-> NewName002.jpg (formerly Img004.jpg)
|-> NewName004.jpg (formerly Img007.jpg)
|-> ...
|-> Chosen\
    |-> NewName003.jpg (formerly Img005.jpg)
    |-> NewName005.jpg (formerly Img010.jpg) 
```

***这就是批处理文件/脚本所做的 -***

```
1) Names are all "NewName???.jpg" (from 001 and up)
2) No duplication of photos under the "Photos" directory and its sub-dirs
3) The "Chosen" directory holds the same amount of photos as before (these were removed from the "Photos" directory)
4) The numbering order of the "NewName" photos is kept in the same order as the "Img" order (although numbering is reset to start from 000)
5) I would love to be able to have "PhotosCollectionXX", "NewNameXXX" and "Chosen" to be able to consist of spaces in their real names 
```

直到（如果）我得到答案，我会尝试自己学习和编写脚本。任何帮助将不胜感激！

提前非常感谢， 埃亚尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:07:25.290

```
@ECHO OFF
SETLOCAL
SET "relroot=u:\photos collection 01"
SET "oldmask=im age"
SET "newmask=new name"
SET "ext=jpg"
SET "skipped="
::
:: step 1 - ensure no 'newname*.ext' exists in the subtree
::
FOR /f %%i IN (
  'DIR /s/b/a-d "%relroot%\%newmask%*.%ext%" 2^>nul^|FIND /c /v "" '
 ) DO IF NOT %%i==0 ECHO Files matching new mask already exist&GOTO :EOF 
::
:: step 2 - list target files
::
:temploop
SET tempfile=%temp%\Photo%random%
IF EXIST "%tempfile%*" GOTO temploop
:: now have random tempfile name
(
FOR /f "delims=" %%i IN (
  'DIR /s/b/a-d "%relroot%\%oldmask%*.%ext%" '
  ) DO (
  ECHO %%~ni*%%~fi
)
)>"%tempfile%1"
::
:: Now do the rename
::
SET count=1000
SET prev=%newmask%
FOR /f %%i IN ('find /c "*" ^<"%tempfile%1"') DO IF %%i gtr 1000 ECHO %%i files - exceeds capacity&GOTO :eof
FOR /f "delims=*" %%i IN ('SORT "%tempfile%1"') DO (CALL :incren "%%i")
IF DEFINED skipped ECHO some files were NOT renamed&DIR /s/b/a-d "%relroot%\%oldmask%*.%ext%"

DEL "%tempfile%1"
GOTO :eof

:incren
:: repeat?
IF "%prev%"==%1 GOTO :EOF
:: no - process next name found
SET "prev=%~1"
FOR %%n IN (firstname secondname) DO (SET %%n=)
:: scan the tempfile, looking for matches to name found
FOR /f "usebackqtokens=1,2delims=*" %%m IN ("%tempfile%1") DO IF /i "%%m"=="%prev%" (
 IF DEFINED firstname SET skipped=Y&IF NOT DEFINED secondname SET secondname=%%n
 IF NOT DEFINED firstname SET firstname=%%n
)
IF DEFINED secondname SET firstname=%secondname%
ECHO REN "%firstname%" "%newmask%%count:~-3%.%ext%"
SET /a count+=1
GOTO :eof 
```

好吧，毕竟不是太难。

不太符合您的规范 - 我避免删除文件，所以我没有重命名任何具有重复名称的目标。

尝试处理 IMO 愚蠢的文件名时给予了太多的关注。如果你`!%^)=`在你的文件名中使用类似的字符——好吧——你很聪明——你会想出来的。

所以，假设合理的文件名字符和空格，工作！

首先设置您的`relative root`（起始子目录）名称、要使用的文件掩码、新旧文件以及扩展名。我使用`set "var=string"`语法来避免应用不可见且可能导致混乱的杂散终端空间。另请注意，在字符串赋值中，'=' 两边的空格很重要。

第一步是记录在案的。如果树中已经有与新名称匹配的文件，不确定该怎么做 - 所以什么也不做。如果一切正常，计算从`dir /s/b/a-d`（目录，带有子目录，基本形式（因此没有标题）和没有目录名称）出现的行数应该大约为 0。

我喜欢使用 showm 方法设置临时文件。如果没有`%temp%`与选择的随机名称匹配的名称，那么使用该名称+您喜欢的任何附录应该是安全的（因此，如果需要，您可以创建许多临时文件。）

下一步是再次以基本形式获取旧名称文件的子目录 - 但这次输出到临时文件。输出的是每个文件的一行，结构为仅 NAME 部分 ( `%%~ni`) 一个星号和完整的文件名 ( `%%~fi`)。星号充当列分隔符并且是安全的，因为`*`不能出现在文件名中。

接下来是重命名阶段。我们从`COUNT`1000 开始，以便我们可以使用最后 3 个字符来创建名称。如果您想从 001 开始，请改用 1001。`PREV`被初始化为一个不能作为要重命名的文件名出现的值。

再次计算要重命名的名称。如果太多，弃船。

下一步是对临时文件进行排序，因此将按原始基本文件名的顺序（每行中的“*”之前）处理结果，然后，如果名称匹配，则按子目录名称的字母顺序（因为 name* parent 将在 name*parent\subdir) 之前排序。然后将遇到的每个 NAME 传递给`:incren`例程 - 引用以适应文件名中的空格要求。

INCREN 例程做的第一件事是检查该名称是否与之前遇到的名称重复。如果是，则忽略该名称（因为它已被处理）。`PREV`然后设置为遇到的下一个名称。`SET "prev=%~1"`从第一个参数中删除引号，然后将结果分配给`prev`和封闭的引号防止杂散空格对接。`firstname`然后`secondname`设置为 [nothing]

然后我们再次扫描临时文件，寻找匹配的名称作为第一个标记并将第二个标记（完整文件名）分配给`%%n`

找到第一个时，未设置名字，因此将其设置为完整文件名。如果找到第二个名称，则`firstname`已经设置，因此设置`SKIPPED`为标记遇到问题。如果尚未设置第二个文件名，则设置*为该*`secondname`完整文件名。如果找到更多匹配项，则由于现在已设置，将不再进行任何操作。*`secondname`*

 *处理完文件后，我们将`firstname`设置为第一个完整文件名（因为第一个遇到的是相对根目录），并且`secondname`只有在找到 2 个或更多匹配名称时才会设置。在这种情况下，设置`firstname`为遇到的第二个名称的值，该名称将位于较低的子目录中。

现在进行重命名。我刚刚`ECHO`编辑了它，但要激活，请`ECHO`从`ECHO REN...`行中删除。我们知道`firstname`包含要重命名的文件的全名，并且我们知道新文件名的结构将是新的掩码+最后3个字符`COUNT`+一个点+选定的扩展名。

并为下一次重命名准备好计数...

这是删除后的测试运行`ECHO`：

```
============= before =========

u:\photos collection 01\im age 612.jpg
u:\photos collection 01\im age 003.jpg
u:\photos collection 01\im age 005.jpg
u:\photos collection 01\im age 610.jpg
u:\photos collection 01\im age 009.jpg
u:\photos collection 01\im age 609.jpg
u:\photos collection 01\im age 505.jpg
u:\photos collection 01\selection 01\im age 001.jpg
u:\photos collection 01\selection 01\im age 004.jpg
u:\photos collection 01\selection 01\im age 005.jpg
u:\photos collection 01\selection 01\im age 006.jpg

=============  run  =========

some files were NOT renamed
u:\photos collection 01\im age 005.jpg

============= after  =========

u:\photos collection 01\new name009.jpg
u:\photos collection 01\new name001.jpg
u:\photos collection 01\im age 005.jpg
u:\photos collection 01\new name008.jpg
u:\photos collection 01\new name005.jpg
u:\photos collection 01\new name007.jpg
u:\photos collection 01\new name006.jpg
u:\photos collection 01\selection 01\new name000.jpg
u:\photos collection 01\selection 01\new name002.jpg
u:\photos collection 01\selection 01\new name003.jpg
u:\photos collection 01\selection 01\new name004.jpg 
```

请注意，这是在 FAT 驱动器上执行的，因此实际文件的顺序在两个列表中是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:07:33.980

试试这个并删除`echo`before `move`，如果输出正常：

```
@echo off&setlocal
set "sourcefolder=PhotosCollection01"

for /r "%sourcefolder%" %%i in (*.jpg) do (
    if defined "$n%%~nxi" set "$d%%~nxi=%%~nxi"
    set "$p%%~nxi=%%~dpi"
    set "$n%%~nxi=%%~nxi"
)
set "$d" >nul 2>&1 && (
    echo(Duplicate filename(s^):
    for /f "tokens=2delims==" %%i in ('set $d') do echo(%%i
    goto:eof
)
set /a counter=1000
for /f "tokens=2delims==" %%i in ('set $n') do (
    set /a counter+=1
    setlocal enabledelayedexpansion
    if exist "!$p%%~i!NewName!counter:~-3!%%~xi" (
    echo(file already exists: "!$p%%~i!NewName!counter:~-3!%%~xi"
    ) else echo move "!$p%%~i!%%~i" "!$p%%~i!NewName!counter:~-3!%%~xi"
    endlocal
) 
```

如果在子文件夹中发现重复的文件名，脚本将终止。如果目标文件已经存在，则不会被覆盖。请注意：%sourcefolder% 中的所有文件夹都使用相同的计数器。如果您有不同的选择，请为每个选择调用此脚本或写评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:20:16.510

如果您在 Windows 下有 Total Commander（从示例中的路径分隔符，我假设您使用 Windows），您可能无需脚本即可实现此目的。如果按 Ctrl+B，它将列出当前目录中的所有文件和一个列表中的所有子目录。然后如果你全选（*）并按Ctrl+M，会出现批量重命名工具，你可以重命名它们，设置用NewName替换Img并在文件名末尾添加一个计数器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:04:10.667

有趣的话题！我这样理解您的要求： 1- 从 PhotosCollection 和 Chosen 创建一个唯一文件名列表，但优先选择 Chosen 的文件（PhotosCollection 的同名文件将被删除）。2- 将列表中的文件重命名为从001开始的连续数字。下面的批处理文件实现了这个过程，但是它处理当前目录中的*所有*目录（从PhotosCollection01到PhotosCollectionNN）并处理每个目录下的*所有*子目录，即，如果 Chosen 子目录有“兄弟”，它们都以相同的方式处理。

```
@echo off
setlocal

rem Set this value as you wish (ie: set NewName=New Name With Spaces)
set NewName=NewName

rem Process all directories at this level
for /D %%a in (*) do (
   rem Enter into this directory (ie: PhotosCollection01)
   cd "%%a"
   rem Insert file names in the initial list as "parent" (ie: Img003.jpg Img004.jpg Img005.jpg)
   setlocal EnableDelayedExpansion
   for %%c in (*.jpg) do (
      set unique[%%c]=.
   )
   rem Process each subdirectory
   for /D %%b in (*) do (
      rem Enter into this subdirectory (ie: Chosen)
      cd "%%b"
      rem Process "nested" file names (ie: Img005.jpg Img010.jpg)
      for %%c in (*.jpg) do (
         if "!unique[%%c]!" equ "." (
            rem Delete duplicated file in parent directory (ie: PhotosCollection01\Img005.jpg)
            del "..\%%c"
         )
         rem Insert file name in the list as "nested"
         set unique[%%c]=%%b
      )
      rem Go back to parent directory (ie: PhotosCollection01)
      cd ..
   )
   rem Rename all names in the list from 001 and up
   set number=1000
   for /F "tokens=2,3 delims=[]=" %%c in ('set unique[') do (
      set /A number+=1
      ren "%%d\%%c" "%NewName%!number:~-3!.jpg"
   )
   rem Delete the list
   endlocal
   rem Go back to original directory (where PhotosColection01...NN exist)
   cd ..
) 
```

将此批处理文件放在包含集合的同一文件夹中并执行它，您必须对测试文件执行几次，直到您对结果满意为止。请注意，可以轻松修改该方法，以便同时删除或重命名所有 Chosen 兄弟文件夹中的重复文件，即如果“Chosen2”文件夹有 Img010.jpg 文件（也位于 Chosen 中），则删除或重命名 Chosen 或 Chosen2 的一个（目前它们被保留，但未重命名）。所有目录和文件名都可以有空格，但是包含感叹号的名称将不会被正确处理；如果需要，这个细节可能会被修复。

```
C:\Users\Antonio\Documents\test
>dir /b
PhotosCollection01
renumber.bat

C:\Users\Antonio\Documents\test
>dir /b PhotosCollection01
Chosen
Img003.jpg
Img004.jpg
Img005.jpg
Img007.jpg
Img010.jpg

C:\Users\Antonio\Documents\test
>dir /b PhotosCollection01\Chosen
Img005.jpg
Img010.jpg

C:\Users\Antonio\Documents\test
>renumber.bat

C:\Users\Antonio\Documents\test
>dir /b PhotosCollection01
Chosen
NewName001.jpg
NewName002.jpg
NewName004.jpg

C:\Users\Antonio\Documents\test
>dir /b PhotosCollection01\Chosen
NewName003.jpg
NewName005.jpg 
```*

# c# - 使用 xml 模板解析文本文件

> ID：15996629
> 
> 赞同：0
> 
> 时间：2013-04-14T07:07:23.323
> 
> 标签：c#, xml, vb.net, parsing

不太清楚如何措辞。寻找有关 VB.net 或 C# 的信息，任何一个都可以。

我正在尝试制作一个通用文件解析器，它将使用 XML 文件来定义文件布局（字段名称、数据类型、分隔符类型、文件类型等）。

这个想法是在具有不同输入文件布局和类型（分隔/平面文件）的程序中使用它，而无需修改和重新编译。希望这样，因为有时当地办事处会更改格式（添加/删除字段）并且它会中断生产，直到重新编译、重新测试代码等。

不幸的是，正如我所说，我什至不知道如何查找。

任何为我指明正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:14:41.293

我会考虑将输入文件更改为 xml（或具有相应的 xml）。

在这种情况下 - 您可以创建您的 xsd 架构，并使用 xsd 对其进行验证。

您甚至可以将此 xsd 发送到您的办公室，以在他们将其发送给您**之前**验证那里的输入。

使用 SSIS 的另一种方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T21:13:18.877

您可以为此使用名为 FinTp 的开源解决方案。

# rest - 一次使用 dojo.xhrGet 进行多个 REST GET 调用

> ID：15996640
> 
> 赞同：1
> 
> 时间：2013-04-14T07:08:06.900
> 
> 标签：rest, dojo

我正在使用 dojo 进行 iWidget 开发，我必须显示来自不同 REST 调用的多个数据集。有没有可能我可以在一个 dojo.xhrGet 调用中调用多个 REST Get 调用并获得一系列响应？或者如果有人可以引导我一次调用多个 REST 服务的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:50:17.177

Xhr = XMLHttpRequest = 一个请求！您可以同时启动多个请求，但浏览器以某种方式限制了多个异步请求的数量：

[流行的浏览器允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

**或者：**

您的服务器可以对您的小部件执行多个请求，并仅在一个请求中为其提供数据，但您必须研究如何同时运行它们（=节省时间）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:05:56.750

您使用的是哪个版本的道场？根据您想要使用 dojo.DeferredList 或[dojo/promise/all](http://livedocs.dojotoolkit.org/dojo/promise/all)的版本。xhrGet 函数已经返回一个 deferred，所以你可以有这样的代码：

```
new dojo.DeferredList([dojo.xhrGet({url:"http://first.rest.url/here}), doo.xhrGet({url:"http://second.rest.url/here"})])
.then(function(results){
    // do something with your results array here
}) 
```

# ios - beginGeneratingDeviceOrientationNotifications 如何工作

> ID：15996646
> 
> 赞同：7
> 
> 时间：2013-04-14T07:08:58.513
> 
> 标签：ios, objective-c

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [notificationCenter addObserver:self selector:@selector(deviceOrientationDidChange) name:UIDeviceOrientationDidChangeNotification object:nil];
    orientation = AVCaptureVideoOrientationPortrait; 
```

我想知道 beginGeneratingDeviceOrientationNotifications 意味着什么以及如何工作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-14T07:41:41.413

当您编写此行时：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

你对设备说：“每次改变方向时请通知应用程序”

通过这样写：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceOrientationDidChange) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

您对应用程序说：“请`deviceOrientationDidChange`在每次通知您方向更改时调用方法”。

现在，`deviceOrientationDidChange`您可以执行以下操作：

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
if (orientation == UIDeviceOrientationPortrait)
     [self doSomething];
else
     [self doSomethingElse]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-06T01:44:10.240

**斯威夫特 4.2**

```
class ViewController: UIViewController {

     override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        UIDevice.current.beginGeneratingDeviceOrientationNotifications()
        NotificationCenter.default.addObserver(self, selector: #selector(deviceOrientationDidChange), name: UIDevice.orientationDidChangeNotification, object: nil)
    }

    deinit {
        NotificationCenter.default.removeObserver(self)
    }

    @objc func deviceOrientationDidChange() {
        print(UIDevice.current.orientation.rawValue)
    }
} 
```

**斯威夫特 3.0**

我希望有人能迅速写下这个。我知道这是一个 Obj-C 帖子，但我没有找到类似的快速帖子，所以你去吧：

```
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        UIDevice.current.beginGeneratingDeviceOrientationNotifications()
        NotificationCenter.default.addObserver(self, selector: #selector(deviceOrientationDidChange), name: NSNotification.Name.UIDeviceOrientationDidChange, object: nil)

    }

    deinit {
         NotificationCenter.default.removeObserver(self)
    }

    func deviceOrientationDidChange() {
        print(UIDevice.current.orientation.rawValue)
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-12T11:42:09.267

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
```

这对于获取通知是可选的。如果有人知道它是如何工作的，请分享。

# java - 在 MySQL 数据库中选择

> ID：15996648
> 
> 赞同：-1
> 
> 时间：2013-04-14T07:09:42.397
> 
> 标签：java, mysql, database, jdbc

仅在从 rs.getString 1 选择结果后，我该怎么做才能在下一行显示 rs.getString2 ？

```
Statement statement = con.createStatement();
     ResultSet rs = statement.executeQuery("select * from state");
     while ( rs.next() ){
       System.out.println(rs.getString(1) + " " +rs.getString(2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:25:25.563

```
Statement statement = con.createStatement();
ResultSet rs = statement.executeQuery("select * from state");
while ( rs.next() ){
    StringBuilder br = new StringBuilder();
    br.append(rs.getString(1)); //print the column 1 in the current row
    br.append(" "); //add space
    rs.next(); //move to the next row
    br.append(rs.getString(2)); //print the column 2 in the next row
    rs.previous(); //go back to the current row of this current iteration
    System.out.println(br.toString()); //print
} 
```

# scala - 有没有办法在 Scaladoc 中包含数学公式？

> ID：15996651
> 
> 赞同：15
> 
> 时间：2013-04-14T07:10:07.380
> 
> 标签：scala, latex, sbt, mathml, scaladoc

我想在数学 Scala 代码的 Scaladoc 文档中输入数学公式。在 Java 中，我发现了一个名为 LatexTaglet 的库，它可以通过在 Latex 中编写公式来为 Javadoc 做到这一点：http: [//latextaglet.sourceforge.net/](http://latextaglet.sourceforge.net/)

它似乎与 Maven 很好地集成（POM 的报告/插件部分）。Scaladoc 是否有等效的库？如果没有，我如何将此库与 SBT 集成？

我也考虑过使用 MathML ( [http://www.w3.org/Math/](http://www.w3.org/Math/) )，但看起来太冗长了。有没有推荐的编辑器？MathML 是否与 Scaladoc 很好地集成？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-20T09:29:27.100

要遵循[@mergeconflict 的答案](https://stackoverflow.com/a/16115460/1206998)，我是这样做的

由于没有合适的解决方案，我所做的是实现一个解析所有生成的 html 文件的爬虫，并通过导入 MathJax 脚本替换任何找到的“导入标记”（参见下面的代码）：

```
lazy val mathFormulaInDoc  = taskKey[Unit]("add MathJax script import in doc html to display nice latex formula")

mathFormulaInDoc := {
  val apiDir = (doc in Compile).value
  val docDir = apiDir    // /"some"/"subfolder"  // in my case, only api/some/solder is parsed
  // will replace this "importTag" by "scriptLine
  val importTag  = "##import MathJax"
  val scriptLine = "<script type=\"text/javascript\" src=\"https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\"> </script>"
  // find all html file and apply patch
  if(docDir.isDirectory)
    listHtmlFile(docDir).foreach { f =>
      val content = Source.fromFile(f).getLines().mkString("\n")
        if(content.contains(importTag)) {
          val writer = new PrintWriter(f)
          writer.write(content.replace(importTag, scriptLine))
          writer.close()
        }
    }
}

// attach this task to doc task
mathFormulaInDoc <<= mathFormulaInDoc triggeredBy (doc in Compile)

// function that find html files recursively
def listHtmlFile(dir: java.io.File): List[java.io.File] = {
  dir.listFiles.toList.flatMap { f =>
    if(f.getName.endsWith(".html")) List(f)
    else if(f.isDirectory)          listHtmlFile(f)
    else                            List[File]()
  }
} 
```

如您所见，此爬虫任务附加到 doc 任务，它由`sbt doc`.

这是一个将使用公式呈现的文档示例

```
/**
 * Compute the energy using formula:
 *
 * ##import MathJax
 *
 * $$e = m\times c^2$$
 */
def energy(m: Double, c: Double) = m*c*c 
```

现在，可以改进此代码。例如：

*   在 html 头部分添加脚本导入
*   避免读取整个文件（也许添加一个规则，即导入标签应该在前几行
*   将脚本添加到 sbt 包，并使用一些合适的任务将其添加到 target/api 文件夹

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-20T01:02:28.800

最简洁的答案是不。JavaDoc [Taglet](http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/taglet/overview.html) API 使 LaTeXTaglet 成为可能。Scaladoc 中没有等价物，因此没有干净的解决方案。

但是，我可以想到一个可能很容易做到的黑客：

有一个名为[MathJax](http://www.mathjax.org/)的库，它在 HTML 页面中查找 LaTeX 风格的数学公式，并在适当的位置动态呈现它。以前用过，挺好看的；您所要做的就是包含脚本。所以你可以做两件事：

1.  编辑并重建[Scaladoc](https://github.com/scala/scala/tree/master/src/scaladoc)源代码以包含 MathJax，或者...
2.  编写一个小后处理器在运行后抓取 Scaladoc 的所有 HTML 输出，并将 MathJax 注入每个文件。

这样，您可以直接在 Scala 注释中编写 LaTeX 公式，它们应该在浏览器中呈现。当然，如果您想要一个*非 hacky 的*解决方案，我建议您为 Scaladoc 创建一个类似 taglet 的 API；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-14T16:23:41.247

即将推出的 scala3 aka Dotty[内置了对降价的支持，](https://github.com/lampepfl/dotty/pull/1874)它允许使用 Latex 的子集渲染简单的数学公式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-13T20:29:02.107

我通过使用与 Spark 相同的方法解决了这个问题。

将此 JavaScript 放在项目中某处的文件中：

```
// From Spark, licensed APL2
// https://github.com/apache/spark/commit/36827ddafeaa7a683362eb8da31065aaff9676d5

function injectMathJax() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.onload = function(){
        MathJax.Hub.Config({
            displayAlign: "left",
            tex2jax: {
                inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ],
                displayMath: [ ["$$","$$"], ["\\[", "\\]"] ],
                processEscapes: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'a']
            }
        });
    };
    script.src = ('https:' == document.location.protocol ? 'https://' : 'http://') +
        'cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML';
    document.getElementsByTagName('head')[0].appendChild(script);
}

document.addEventListener('DOMContentLoaded', injectMathJax) 
```

这一点进入你的`build.sbt`：

```
lazy val injectMathJax = taskKey[Unit]("Injects MathJax Javascript into Scaladoc template.js")

injectMathJax := {
    val docPath = (Compile / doc).value
    val templateJsOutput = docPath / "lib" / "template.js"
    streams.value.log.info(s"Adding MathJax initialization to $templateJsOutput")
    // change this path, obviously
    IO.append(templateJsOutput, IO.readBytes(file("doc/static/js/mathjax_init.js")))
  },
  injectMathJax := (injectMathJax triggeredBy (Compile / doc)).value 
```

我最终会为此构建并公开发布一个插件，因为我可能会使用 Scala 2.x 很长时间。

这种方法的注意事项：

*   公式必须在`$`Scaladoc`$$`注释中。
*   最好用另一个元素将它们进一步包含在注释中。我一直在使用`<blockquote>`。
*   至少对于 Scala 2.11.x 中包含的 Scaladoc，公式只会显示在类、对象和特征顶级符号上。当存在 MathJax-inject 元素时，切换中的某些内容会显示完整的注释中断*。*我还没有弄清楚，但如果我这样做了，我会直接向 Scaladoc 提交一个补丁。

例子：

```
/**
  * A Mean Absolute Scaled Error implementation
  *
  * Non-seasonal MASE formula:
  * <blockquote>
  * $$
  * \mathrm{MASE} = \mathrm{mean}\left( \frac{\left| e_j \right|}{\frac{1}{T-1}\sum_{t=2}^T \left| Y_t-Y_{t-1}\right|} \right) = \frac{\frac{1}{J}\sum_{j}\left| e_j \right|}{\frac{1}{T-1}\sum_{t=2}^T \left| Y_t-Y_{t-1}\right|}
  * $$
  * </blockquote>
 **/
object MeanAbsoluteScaledError { 
```

# javascript - Ajax 调用使精灵运动闪烁 javascript

> ID：15996658
> 
> 赞同：2
> 
> 时间：2013-04-14T07:11:33.743
> 
> 标签：javascript, jquery, ajax, html

我刚刚在我的 JavaScript/HTML5 游戏中为我的主要角色精灵实现了移动，除了加载现有用户保存的数据时，一切都很好。

在我的主 JavaScript 文件中，取决于用户是否单击了新游戏按钮或加载游戏按钮，要么加载新游戏，要么通过 PHP 和 Ajax 从数据库加载用户数据。

如果用户点击新游戏，它会运行下面的代码并且玩家移动正常：

```
 else{
        //set beginning params
        //Change screens
        ui.new_game();

        layer = scene.load("level_"+1);
        layer = $.isArray(layer) ? layer : layer.layers;

        layer.forEach(function(layer){
            if (layer.hasOwnProperty("properties") && layer.properties.hasOwnProperty("collision"))
            {
                scene.collisionLayer(layer);
            }
        });

        gameGUI.set_level(1);
        gameGUI.set_location(20,20);
        gameGUI.init_inv();
        player.init_Player(20,20);
        player.draw();
        last_update = Date.now();

    } 
```

但是如果玩家决定加载他们以前的游戏设置，则运行下面的代码，而不是精灵在画布中流畅地移动，当按下右箭头键时，精灵会消失，然后在右侧某处闪烁然后屏幕再次消失。

```
function game_settings(state){
    if(state == "load"){

        ui.load_game();

        //do ajax call to load user last save
        var dataString = {"user_data": "true"};
        $.ajax({
           type:"POST",
            url:"PHP/class.ajax.php",
            data: dataString,
            dataType: 'JSON',
            async:false,
            success: function(success) {
                player_details_init(success);

            },
            error: function(){
                alert("ERROR in User data");
            }
        });

        layer = scene.load("level_"+level);
        layer = $.isArray(layer) ? layer : layer.layers;

        layer.forEach(function(layer){
            if (layer.hasOwnProperty("properties") && layer.properties.hasOwnProperty("collision"))
            {
                scene.collisionLayer(layer);
            }
        });
        player.init_Player(location_X,location_Y);
        player.draw();
        last_update = Date.now();

    } 
```

我知道 Ajax 是导致问题的原因，因为当我将它注释掉时，Sprite 会像它应该做的那样移动，唯一的问题是我不知道为什么 Ajax 会导致这种奇怪的行为？

我已将当前版本的游戏上传到[HERE](http://upbeatevents.co.uk/dis/)，因此如果您愿意，可以亲眼目睹这种奇怪的行为。

登录使用

*   客人 - 用户名
*   客人 - 密码

谢谢你的时间

**编辑** 好的，我已将问题进一步缩小到变量 location_X、location_Y。当我在 playr.init 调用中输入硬编码数字 20、20 时，移动工作正常，但是当我使用 location_X，location_Y 时，如您在示例中看到的，问题仍然如上所示。

我从 Ajax 返回成功时调用的名为 player_details_init 的函数中检索 location_X 和 location_Y。这是该功能：

```
function player_details_init(success){

    $.each(success, function(key,value){
        if(level == null){
            level = value.level;
        }
        if(location_X == null){
            location_X = value.location_X;
        }
        if(location_Y == null){
            location_Y = value.location_Y;
        }
        //items.push([value.game_item_id, value.quantity]);

        gameGUI.set_level(level);
        gameGUI.set_location(location_X,location_Y);
        gameGUI.init_inv();
    });
} 
```

所以我的猜测是它与此功能有关，尽管当我执行 console.log 时，位置返回正常并且精灵确实出现在它应该没有正确移动的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:50:23.483

从您描述的症状来看，它看起来像`location_X`并且`location_Y`是字符串而不是数字。在这种情况下，计算将无法按预期进行（例如，加法将导致串联）。

我建议您在读取 ​​JSON 有效负载时尝试将[parseInt()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)应用于这些值（可能还有其他值）。

# iphone - 如何从通知中心删除本地通知？

> ID：15996666
> 
> 赞同：1
> 
> 时间：2013-04-14T07:12:52.753
> 
> 标签：iphone, ios

有没有办法从通知中心删除所有本地通知？我试图取消AllLocalNotification，但它取消了尚未通知的整个通知（仍在计划中）。但我只想清除通知中心，我不想取消安排休息通知。

我想我必须保存整个通知，并使用 cancelAllLocalNotification 清除所有通知，然后重新安排休息通知。但我觉得它丑陋的解决方案.. ;-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:26:27.357

最好的解决方案是使用附加的 userInfo 对象（字典）创建通知。每次创建通知时，还要创建一个 UUID（唯一标识符），将其添加到字典并将该字典附加到通知中。当您需要删除时，使用 UUID 字符串作为唯一值来具体删除特定通知。

# c# - 如何查找字符串 xml 文件并替换为其他字符串（值）

> ID：15996671
> 
> 赞同：0
> 
> 时间：2013-04-14T07:13:31.190
> 
> 标签：c#, xml, windows-8

我的 xml 文件有问题

```
<OneGoal>
<Goal>80000$ in year</Goal>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<Step>lack content</Step>
<DateDay>17</DateDay>
<DateMonth>6</DateMonth>
<DateYear>2015</DateYear>
</OneGoal> 
```

我有带有文件步骤的组合框。而且我有复选框，当我单击 SelectItemComboBox（任何人单击，SelectFile = "do sport"，我替换为 "remove"）时，必须从列表和文件中删除步骤。我怎样做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:23:35.930

可能您正在寻找这样的东西：[XPath: How to select elements based on their value?](https://stackoverflow.com/questions/1198253/xpath-how-to-select-elements-based-on-their-value)

```
Element[@attribute1="abc" and @attribute2="xyz" and text()="Data"] 
```

所以，试试吧

```
/OneGoal/Step[text()="remove"] 
```

# c++ - 如何根据一对枚举的值选择一个动作？

> ID：15996673
> 
> 赞同：1
> 
> 时间：2013-04-14T07:13:49.523
> 
> 标签：c++, software-design

我正在用 C++ 实现一个协议模型（特别是缓存一致性协议，但这对于这个问题并不重要）

该协议有两个值： a`previous_state`和 a `message_type`。两者都是枚举。协议应该为两个输入的每个组合选择一个唯一的操作。一些组合无效（应该显示错误），一些组合将被停止。

**用 C++ 对上述场景进行编码的好方法是什么？**我能想到：两个嵌套的 switch 块来选择一个输入组合，并调用一个特定的动作实现为一个函数。

**是否有一些更优雅和灵活的方式来编码上述场景？理想情况下，从协议中添加/删除输入组合应该很容易。**

感谢您的任何建议。（我是设计模式的新手，不知道有什么适合这里的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:25:46.733

假设这两个枚举是 32 位值。我会做这样的事情：

```
void doit(E1 previous_state, E2 message_type) {
# define COMBINE(_x_, _y_) (static_cast<int64_t>(previous_state) << 32 | message_type)
  switch (COMBINE(previous_state, message_type) {
  case COMBINE(e1value1, e2value1):
    // ...
    break;
  case COMBINE(e1value4, e2value3):
    // ...
    break;
  // ... more cases ...
  default:
    // report error
  }
} 
```

不要假设这会生成更快的代码——switch 语句通常被优化到跳转表中，但是像这样的技巧可能会打败它。如果您最感兴趣的是尽可能最佳的性能，则必须进行试验并找出最适合您的系统的方法（注意将 int64_t 更改为较小的类型并最小化我的示例中的变化可能会产生一些影响）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:41:22.283

为什么不使用简单的二维数组？例如

```
enum Previous_state
{
state_1 = 0,
state_2,
...,
state_n,
PreviousLastValue
}

enum Message_type
{
type_1 = 0,
type_2,
...,
type_n,
TypeLastValue
}
...

Action actions[PreviousLastValue][TypeLastValue] = {NULL}; 

void SetAction(Previous_state state, Message_type type, Action action)
{
    actions[state][type] = action;
}

void RemoveAction(Previous_state state, Message_type type)
{
    actions[state][type] = 0;
}

void GetAction(Previous_state state, Message_type type)
{
    if(actions[state][type] == 0)
    {
        //display error
    }

    return actions[state][type];
} 
```

# ruby - MongoDB 池大小与池超时

> ID：15996674
> 
> 赞同：0
> 
> 时间：2013-04-14T07:14:04.243
> 
> 标签：ruby, mongodb, connection-pooling

何时增加池大小或超时或两者兼而有之？只是想了解最佳实践，我开始遇到很多`could not obtain connection within 5.0 seconds. The max pool size is currently 1; consider increasing the pool size or timeout. (Mongo::ConnectionTimeoutError)`错误，并且想知道经验法则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:27:03.703

你好德米特里厄斯迈克尔，

池配置基于您的系统使用情况，并且可以在您的应用程序生命周期中更改，您需要定期练习池调整：

监控 -> 调整 -> 测试 -> 监控...

您可以使用 JMeter 根据您当前/未来的场景来测试您的连接池

你可以在这里看到一些最佳实践：[http ://www.javaranch.com/journal/200601/JDBCConnectionPooling.html](http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html)

问候， 莫西

# php - 计算用户表单输入日期之后的星期六

> ID：15996681
> 
> 赞同：2
> 
> 时间：2013-04-14T07:14:43.540
> 
> 标签：php, date, strtotime

我制作了一个表格，用户可以在其中从日历中选择日期。它将于 2013 年 5 月 14 日回归`d/m/Y`。

我需要的是 2013 年 5 月 14 日之后的星期六，2013 年 5 月 18 日

日期字段称为：`$_POST['field_3']`

我一直在努力，`strtotime`但没有成功

到目前为止我已经做了：

```
<?php

$today = $_POST['field_3'];

$date = strtotime('d/m/Y','next Saturday', $today);

$initialString =  date('m/d/Y', $date);

$end = date('m/d/Y', strtotime( 'next saturday 11:59 pm', $date));

echo $today ."<br>";
echo $initialString . ' - ' . $end;

?> 
```

返回：

> 14/05/2013
> 
> 01/01/1970 - 01/03/1970

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:39:25.743

非常基本，但这可以帮助：

```
<?php

$year               = 2013; // use substr() (or other stuff) to set these variables
$month              = 5;
$day                = 14;

$newDate    = mktime(0, 0, 0, $month, $day, $year); // creates a date with previous variables

$dayOfWeek  = date('w', $newDate);                  // get the weekday number; 0 = sunday, ..., 6 = saturday

$numberOfDaysTillNextSaturday   = (6 == $dayOfWeek) ? 7 : (6 - $dayOfWeek); // how many days until next saturday ? If saturday = 6, otherwise = (Saturday - weekday)

$nextSaturdayDate   = $newDate + (86400 * $numberOfDaysTillNextSaturday);   // creates a new date corresponding to next saturday

$nextSaturdayString = date("d/m/Y", $nextSaturdayDate);                     // formats the new date as (day)/(month)/(year)

echo $nextSaturdayString;                                                   // echoes the string
?> 
```

# algorithm - 计算给定线的交点数

> ID：15996688
> 
> 赞同：2
> 
> 时间：2013-04-14T07:16:25.377
> 
> 标签：algorithm

我正在准备谷歌的电话面试，遇到了这个问题：

给定二维空间中的线列表，如何在小于 O(n^2) 的时间内计算交叉点的数量？

他们说被面试者给出了一个 O(n^2) 的解决方案，然后面试官问他是否可以找到一个更好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:25:55.433

二维中的两条线要么相交一次，要么平行。如果没有平行线，则有 n*(n-1)/2 个交点。O(n log n) 解决方案是按斜率对线进行排序，然后扫描平行度，为找到的每组 m 个平行线减去 m*(m-1)/2。

当然，这忽略了浮点舍入的任何实际问题，但我假设如果需要考虑，问题中会提到这一点。

# scalatra - Scalate/Jade 中的值未设置错误

> ID：15996691
> 
> 赞同：1
> 
> 时间：2013-04-14T07:17:16.680
> 
> 标签：scalatra, scalate

我是 Jade 和 Scalate 的新手。我定义了以下路线：

```
get("/") {
  jade("index",
    "pageTitle" -> "Welcome to Jade",
    "welcomeMessage" -> "Hello my pretties")
} 
```

和模板：

```
-@ val pageTitle: String
-@ val welcomeMessage: String

!!! 5
html(lang="en")
  head
    title= pageTitle
  body
    h1= welcomeMessage 
```

我在页面渲染中遇到的错误是：

```
The value for 'title' was not set
org.fusesource.scalate.NoValueSetException: The value for 'title' was not set
at org.fusesource.scalate.RenderContext$$anonfun$attribute$1.apply(RenderContext.scala:159) 
```

即使我删除该行`title= pageTitle`，我仍然会收到错误消息。错误指的是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:29:05.200

我没有`default.scaml`在布局文件夹中注意到。它是定义，但不是设置，`title`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T09:28:31.177

您还可以使用 SBT 进行干净构建，如下所示。

```
sbt clean clean-files 
```

注意：您需要先退出 SBT。

由于不同的原因，我遇到了类似的 value-not-set 错误，但这个命令帮助我解决了这个问题。

# r - 无法通过 data.table 中的引用将列分配为.Date

> ID：15996692
> 
> 赞同：2
> 
> 时间：2013-04-14T07:17:20.473
> 
> 标签：r, data.table

我在使用时`Date`或`IDate`在使用时分配一个新列`by =`。它正在创建一个整数列，而不是`Date`预期的。

```
require(data.table)
dt <- data.table(date = as.IDate(sample(10000:11000, 10), 
                                 origin = "1970-01-01"))
dt[, group := rep(1:2, 5)]
print(dt)

#           date group
#  1: 1997-06-12     1
#  2: 1998-02-19     2
#  3: 1998-04-25     1
#  4: 1998-01-27     2
#  5: 1997-10-29     1
#  6: 1998-05-08     2
#  7: 1999-05-09     1
#  8: 1999-06-26     2
#  9: 1997-11-01     1
# 10: 1997-07-19     2 
```

这有效：

```
dt[, min.date := min(date)]
print(dt)

#           date group   min.date
#  1: 1997-06-12     1 1997-06-12
#  2: 1998-02-19     2 1997-06-12
#  3: 1998-04-25     1 1997-06-12
#  4: 1998-01-27     2 1997-06-12
#  5: 1997-10-29     1 1997-06-12
#  6: 1998-05-08     2 1997-06-12
#  7: 1999-05-09     1 1997-06-12
#  8: 1999-06-26     2 1997-06-12
#  9: 1997-11-01     1 1997-06-12
# 10: 1997-07-19     2 1997-06-12 
```

但问题是：

```
dt[, min.group.date := as.IDate(min(date)), by = group]
print(dt)

#           date group   min.date min.group.date
#  1: 1997-06-12     1 1997-06-12          10024
#  2: 1998-02-19     2 1997-06-12          10061
#  3: 1998-04-25     1 1997-06-12          10024
#  4: 1998-01-27     2 1997-06-12          10061
#  5: 1997-10-29     1 1997-06-12          10024
#  6: 1998-05-08     2 1997-06-12          10061
#  7: 1999-05-09     1 1997-06-12          10024
#  8: 1999-06-26     2 1997-06-12          10061
#  9: 1997-11-01     1 1997-06-12          10024
# 10: 1997-07-19     2 1997-06-12          10061 
```

`min.group.date`是数字而不是`Date`.

```
dt[, class(min.group.date)]

# [1] "numeric" 
```

如果我将列初始化为`Date`or `IDate`，它将按预期工作：

```
dt <- data.table(date = as.IDate(sample(10000:11000, 10), origin = "1970-01-01"))
dt[, group := rep(1:2, 5)]

dt[, min.group.date := as.IDate(NA)]
dt[, min.group.date := min(date), by = group]

dt[, class(min.group.date)]
# [1] "IDate" "Date" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:34:36.143

保罗，如果你想要的只是按最少日期分组，这行就可以了：

```
dt[,min(date),by=group] 
```

您应该看到（由于示例中的“示例”命令，下面的日期显然与您的日期不同）：

```
 group         V1
1:     1 1997-11-19
2:     2 1997-12-04 
```

如果您想查看每一行，您可以加入表格：

```
setkey(dt,group) #always good practice
dt_min=dt[,min(date),by=group]
setnames(dt_min,"V1","min.group.Date") #you should NOT use colnames (see help('setnames')
dt[dt_min]

    group       date min.group.Date
 1:     1 1999-01-30     1997-11-19
 2:     1 1999-11-27     1997-11-19
 3:     1 1999-11-11     1997-11-19
 4:     1 1997-11-19     1997-11-19
 5:     1 1999-05-06     1997-11-19
 6:     2 1999-07-11     1997-12-04
 7:     2 1997-12-04     1997-12-04
 8:     2 1998-07-28     1997-12-04
 9:     2 1998-10-23     1997-12-04
10:     2 1998-06-01     1997-12-04 
```

# android - Android - 接收推送通知并显示它 - 不太了解

> ID：15996695
> 
> 赞同：3
> 
> 时间：2013-04-14T07:17:24.523
> 
> 标签：android, android-intent, push-notification, google-cloud-messaging

好的，所以我终于设置好为推送通知注册设备。我发现此代码可以接收新通知并显示它。事情是我不确定它会去哪里。我对 Android 编程很陌生，因此感谢您提供任何帮助。我在下面有一个名为 GCMService 的服务类。

```
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMService extends GCMBaseIntentService {

    private static final String TAG = "GCMService";

    public GCMService() {
        super();
    }

    @Override
    protected void onRegistered(Context context, String regId) {
        Log.i(TAG, "Device registered: regId= " + regId);
    }

    @Override
    protected void onUnregistered(Context context, String regId) {
        Log.i(TAG, "Device unregistered");
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
    }

    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Log.i(TAG, "Received recoverable error: " + errorId);
        return super.onRecoverableError(context, errorId);
    }
} 
```

**下面的功能与我上面的班级有关以接收新消息吗？**

```
private static void generateNotification(Context context, String message) {

    int icon = R.drawable.ic_launcher;
    long when = System.currentTimeMillis();

    NotificationManager notificationManager = (NotificationManager) 
            context.getSystemService(Context.NOTIFICATION_SERVICE);

    Notification notification = new Notification(icon, message, when);      

    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, LauncherActivity.class);

      PendingIntent pintent = PendingIntent.getActivity(context, 0, intent,
 Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);

    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.defaults |= Notification.DEFAULT_VIBRATE; 
    notificationManager.notify(1, notification);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:22:39.077

我想到了。我终于找到了一个很好的工作项目，你可以研究它的代码并理解它。我花了几天的时间在谷歌上搜索，找到的东西不仅仅是这里的一块和那里的一块，而是一个完整的项目。我想我会很好地发布它，以防其他人可以使用它。

[https://github.com/Guti/Google-Cloud-Messaging--Titanium-](https://github.com/Guti/Google-Cloud-Messaging--Titanium-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-30T07:28:18.777

使用下面的代码它可以正常工作：

```
@Override
public void onDeletedMessages() {

    sendNotification("Message Deleted On server");
    super.onDeletedMessages();
}

@Override
public void onMessageReceived(String from, Bundle data) {

    sendNotification("Received: " + data.getString("message"));
    super.onMessageReceived(from, data);
}

@Override
public void onMessageSent(String msgId) {

    sendNotification("Message Sent: " + msgId);
    super.onMessageSent(msgId);
}

@Override
public void onSendError(String msgId, String error) {

    sendNotification("Message Sent Error: " + msgId + "Error: " + error);
    super.onSendError(msgId, error);
}

private void sendNotification(String msg) {

    Intent intent = new Intent(this, MessageView.class);
    intent.putExtra("Message", msg);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
            intent, PendingIntent.FLAG_ONE_SHOT);

    Uri defaultSoundUri = RingtoneManager
            .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(
            this).setSmallIcon(R.drawable.logo_y)
            .setContentTitle("CCD Message").setContentText(msg)
            .setAutoCancel(true).setSound(defaultSoundUri)
            .setContentIntent(pendingIntent);

    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    notificationManager.notify(0, notificationBuilder.build());

} 
```

# c++ - 哪些修改将导致 C++ 代码中的二进制大小减小

> ID：15996699
> 
> 赞同：4
> 
> 时间：2013-04-14T07:18:08.790
> 
> 标签：c++, templates

我一直在研究非常大的 C++ 项目代码库。大约有 2k 个文件，包含大约 200k 行代码。代码包含大量模板的使用 代码中有很多内联 目前使用带有 O2 选项的 clang++ 进行编译 最终的可执行文件大小约为 50 MB

出于某种原因，我想进一步减小二进制大小。已经采取的步骤 1> 尽可能用非模板代码替换模板 2> 将 XML 库从 xerces 替换为 expat

欢迎在这方面提出任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:40:36.460

以下方法通常用于减小程序的大小，

1.  使用您的编译器特定技术来减小大小。

2.  编译使用`gcc -S program.c`以获取汇编程序文件。您现在可以执行基于汇编程序的空间优化。

3.  减少 C 中全局变量的数量。

4.  使用简单的算法，而不是在执行时间上给您带来非常小的变化的复杂算法。例如，如果列表中的元素数量不是很大，则使用`bubble sort`代替。`Merge sort`

5.  删除只使用一次或两次的简单功能。

6.  消除死代码。许多大型项目中经常有一些。

7.  请注意程序中包含的库函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:32:09.413

1.  在完成的可执行文件上运行`strip`以删除调试信息（注意，您也可以保留未剥离的文件，以防您以后需要调试信息）。
2.  确保动态链接系统提供的库，而不是静态链接。
3.  将重要函数从头文件移动到 .cpp 文件（例如，如果它们仅在同一个 .cpp 文件中用作实现细节，甚至可以应用于某些模板函数）。
4.  追捕并消除死代码。许多项目都有很多这样的东西。考虑使用代码覆盖率分析器来帮助您找到要删除的候选者。希望您有一些测试可以帮助您。
5.  考虑压缩实际的二进制文件。如果通过 gzip 或 bzip2 运行它有多大？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T09:43:10.487

[UPX](http://upx.sourceforge.net/)是减少可执行文件大小的好工具。它支持许多平台和可执行格式。

可执行文件在启动时解压缩，执行此操作的代码包含在可执行文件本身中。性能损失很小。

# php - 如何将多行插入mysql数据库

> ID：15996702
> 
> 赞同：0
> 
> 时间：2013-04-14T07:18:53.027
> 
> 标签：php, html, mysql, codeigniter-2, codeigniter-form-helper

我有某个学期的上传结果表。我收集了某个学期的所有科目和学生名单。但我的问题是我无法将结果插入数据库。只插入一行，

控制器

```
 $data=array();
    for($i=0;$i<count($_POST['Number']);$i++){
            if($_POST['Number'][$i] != ''){
                $data=array(
                        'Id'=>$_POST['id'][$i],
                        'Dept'=>$_POST['Dept'][$i],
                        'SubjectCode'=>$_POST['sCode'][$i],
                        'SubjectName'=>$_POST['sName'][$i],
                        'Semister'=>$_POST['Semister'][$i],
                        'MidNumber'=>$_POST['Number'][$i]
                        );
                $this->load->model('Upload_Result_model');
                $this->Upload_Result_model->upload_midResult($data);
            }
    } 
```

形式：

```
<table>
<tr>
    <th>Student ID</th>
    <?php foreach($subjects as $s):?>
    <th><?php echo $s->subjectName;   echo "<br>";   echo "(".$s->subjectCode.")"; ?></th>
    <?php foreach($student as $st):?>
    <input type='hidden' id='id[]' name='id[]' value='<?php echo $st->Id;?>'>
    <?php endforeach;?>
    <input type='hidden' name='Dept[]' id='Dept[]' value=<?php echo $Dept;?>>
    <input type='hidden' name='Semister[]' id='Semister[]' value=<?php echo $Semister;?>>
    <input type='hidden' id='sCode[]' name='sCode[]' value='<?php echo $s->subjectCode?>'>
    <input type='hidden' id='sName[]' name='sName[]' value='<?php echo $s->subjectName?>'>
    <?php endforeach;?>
</tr>
<?php foreach($student as $st):?>
<tr>
    <td><?php echo $st->Id?></td>
    <?php for($i=0;$i<count($subjects);$i++):?>
    <td><input type='text' size='7' id='Number[]' name='Number[]'/></td>
    <?php endfor;?>
</tr> 
```

如果有人解决这个问题，对我会有很大帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:08:14.260

我不认为 html 表单元素会以数组形式出现在 php 中。尝试`print_r($_POST);`查看传递的变量及其值。他们可能只是逗号分隔。

我认为你可能需要做类似的事情`$_POST['id']=explode(',',$_POST['id']);`来解决你的问题

该`Numbers`变量还存在您应该研究的其他问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:49:57.157

我认为

```
 foreach($student as $st): 
```

应该在之后。现在您打开多行，但不关闭它们。此外，ID 在 2 for 循环内，因此它们比其他元素更多，我不确定这是否是您尝试做的。

因此，如果可以，您可以尝试：

```
 $Numbers = @$_POST['Number'];
    $ids = @$_POST['id'];

    foreach($Numbers as $a => $b)
    {
      if($Numbers[$a]!='')
      { 
         $data=array(
                    'Id'=>$ids[$a];, ... }
      }
    } 
```

# html - html 5 解析媒体查询与 html 4.0 过渡

> ID：15996704
> 
> 赞同：1
> 
> 时间：2013-04-14T07:19:25.563
> 
> 标签：html, parsing, css, media-queries, doctype

我从一些 Handelbar 模板中编译了一些静态 html 文档。我错误地忘记了`html`使`<!doctype html>`我的文档解释有点不同的地方，我假设 4.0 过渡......这就是 w3c 所说的。

所以我添加了它，现在`@media`我的css中的一些查询没有被读取。我根本没有更改css文件。

如果我`html`从 doctype 中删除它们，它们将再次起作用。我认为这可能与我设置的编码有关`utf-8`，它看起来默认为`utf-8`.

我的媒体查询看起来像

```
@media all and (max-width : 480px){
  /* this is not applied */
} 
```

奇怪的是我安装了 Zurb 基础，它的查询工作正常，例如。

```
@media only screen and (max-width: 767px){
  /*eh this works in zurb*/
} 
```

我也使用 SCSS 来编译我的 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:03:29.743

css 文件是`utf-8`通过 SCSS 以不同的方式编译的，因此编码错误。在我之前没有严格的编码，因为`html`缺少的`doctype`是抛出一个错误，使 html 解析绕过我`meta charset`的设置。

所以我所做的只是在我指定的 SCSS 文件中

`@charset "utf-8";`

现在我符合标准并且我的媒体查询正在工作 yeee

# w3c-validation - 文档类型不允许在此处使用元素“div”；假设缺少“对象”开始标签

> ID：15996706
> 
> 赞同：1
> 
> 时间：2013-04-14T07:19:47.597
> 
> 标签：w3c-validation

错误第 18 行，第 19 列：文档类型在此处不允许元素“div”；假设缺少“对象”开始标签

请看下面的页面来源

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title></title>

    <meta name="keywords" content="Karnataka,Bangalore_Rural,Healthcare,Office_Assistant,Kerala,Ernakulam,IT_Hardware_Networking,Engineer,Sales___Marketing,Executive,Maharashtra,Mumbai_City,Retailing,Manager,Kollam,CRM_CallCentres_BPO_ITES_Med.Trans,Customer_Care,Hotel_Travel_Tourism_Airlines_Hospitality,Front_Office_Staff,Andhra_Pradesh,Hyderabad,IT_Software,Java_Developer,Pathanamthitta,Manufacturing_Industrial,Educational_Training,Teacher,Engineering_Projects"/>
    <meta name="description" content="The best job oriented resume sharing system. Create and Publish your online resumes for FREE. Search and apply your dream jobs for FREE. Post your jobs for FREE."/>

     <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

     <div id="fb-root"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:17:17.300

我相信您需要将 < div > 放在 < body > 部分中。

# html - 我想居中 按钮，但就是做不到

> ID：15996707
> 
> 赞同：0
> 
> 时间：2013-04-14T07:20:22.300
> 
> 标签：html, css, html-lists

我有一个按钮，但我无法在页面上居中。这是CSS。

```
.banners {padding:12px 0 0 0}
.banners li {float:left;font-size:26px;line-height:2.4em;letter-spacing:-1px;margin-left:6px}
.banners li:first-child {margin-left:0}
.banners li a {width:242px;display:block;height:65px;background:url(http://www.mydomain.com/images/banner-bg.gif) no-repeat left top;text-align:center;color:#fff;text-decoration:none} 
```

这是html

```
<ul class="banners wrapper">
    <li><a href="#">UNLIMITED<b> $49</b></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:30:34.127

**This will center only the link**

The html:

```
<div class="buttons">
  <a href="#">UNLIMITED<b> $49</b></a>
</div> 
```

The css:

```
.buttons {
  text-align:center
} 
```

**This will center the link with a background image**

The html:

```
<div class="buttons">
  <a href="#">UNLIMITED<b> $49</b></a>
</div> 
```

The css:

```
.buttons {
  text-align:center
}
.buttons a {
  display: block;
  margin: 0 auto;
  width: 242px;
  height: 65px;
  background-image:url("bg.jpg");
  line-height:60px; /* <-- If you want the text centered, play with this value */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:50:04.850

请注意，浏览器使用 ul,li 处理边距和填充的方式是不同的。首先，我们需要通过应用于`margin-left:0`li 来消除它，并`padding:0px 0px 0px 0px;`在浏览器中创建一致的行为。并将 display:block 应用于您的 a 标签。

只是一些简单的样式，你应该得到你想要的

```
.banners
{
   padding:0px 0px 0px 0px;
   list-style-type:none;
}

.banners li{
   margin-left:0px;
}

.banners li a{
    display:block;
    height:65px;
    background:url(http://www.mydomain.com/images/banner-bg.gif)

    margin-left:auto;
    margin-right:auto;
} 
```

`margin-left:auto;`并将`margin-right:auto;`块元素居中。你应该使用`.banners li a`.

# audio - 较新版本的 JRE 不加载音库，但旧版本可以

> ID：15996711
> 
> 赞同：5
> 
> 时间：2013-04-14T07:20:57.357
> 
> 标签：audio, java, midi, javax.sound.midi

我有以下代码尝试加载音库。我已经使用 JRE 1.6.03 和 1.6.43 在 Windows 7 上测试了代码。旧版本的 JRE (1.6.03) 工作正常，但新版本抛出异常。这是怎么回事？

```
public Main() {
    try {
        Synthesizer synth = MidiSystem.getSynthesizer();
        synth.open();
        BufferedInputStream soundBankStream = new BufferedInputStream(
                getClass().getClassLoader().getResourceAsStream(
                        "soundbank.gm"));
        synth.loadAllInstruments(MidiSystem.getSoundbank(soundBankStream));
    } catch (MidiUnavailableException e) {
        e.printStackTrace();
    } catch (InvalidMidiDataException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

.

```
F:\>java -version
java version "1.6.0_03"
Java(TM) SE Runtime Environment (build 1.6.0_03-b05)
Java HotSpot(TM) 64-Bit Server VM (build 1.6.0_03-b05, mixed mode)

F:\>java -jar Test2.jar

F:\>"C:\Program Files\Java\jre6\bin\java.exe" -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01, mixed mode)

F:\>"C:\Program Files\Java\jre6\bin\java.exe" -jar Test2.jar
javax.sound.midi.InvalidMidiDataException: cannot get soundbank from stream
        at javax.sound.midi.MidiSystem.getSoundbank(Unknown Source)
        at com.gulshansingh.test.Main.<init>(Main.java:24)
        at com.gulshansingh.test.Main.main(Main.java:14) 
```

您可以从这里下载音库：[http ://www.oracle.com/technetwork/java/soundbanks-135798.html](http://www.oracle.com/technetwork/java/soundbanks-135798.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:46:33.897

[从Java Sound API](http://www.oracle.com/technetwork/java/soundbanks-135798.html)复制粘贴：Soundbanks页面

> Java 声音 API
> 
> 此页面提供了不同的音库，您可以下载这些音库并与 Java Sound 一起使用。Soundbanks 是 Java Sound 附带的内部软件合成器的正确操作所必需的。默认情况下，Windows 版本的 J2RE 不附带音库，因此您需要手动安装一个才能使用 Java Sound 的 MIDI 引擎。Java Sound 有一个备用机制，如果没有可用的音库，则使用硬件 MIDI 端口，但它会阻止可靠和一致的 MIDI 播放，因此建议为 Java Sound 安装音库。

如您所见，Java Sound API 需要安装，因此如果您安装了较新的 JDK，则必须[重新安装](http://www.oracle.com/technetwork/java/soundbanks-135798.html#install)。

一个错误似乎在您的问题附近：[4887447](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4887447)，存在一种解决方法，但如果 banksound 在 JAR 中则不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T04:14:30.877

我也遇到了同样的问题，根据我的发现，最新版本的 java (1.7+) 不再支持 GM 音库

[http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#incompatibilities](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#incompatibilities)

> Java Sound 包中的软件合成器实现已替换为开源版本。由于替换，以下功能被删除：GM soundbank 支持、RMF 文件播放支持、Linux 平台上的 OSS（Open Sound System）支持。新的合成器实现支持 DLS 和 SoundFont (SF2) 格式的音库。

正如它所说，它支持 DLS 和 SF2 Soundbank 格式（我尝试过你正在做的事情并且它有效）。在 Internet 上查看这些文件，例如： [http ://www.ronimusic.com/smp_ios_dls_files.htm](http://www.ronimusic.com/smp_ios_dls_files.htm)

# haskell - Haskell 中的副作用和 I/O

> ID：15996712
> 
> 赞同：1
> 
> 时间：2013-04-14T07:21:30.333
> 
> 标签：haskell

好的，所以我是 Haskell IO 的新手。我已经阅读了很多关于 Haskell 函数中的 IO 和副作用的内容，现在我已经开始在 Haskell 中做一些我自己的副作用，我想知道 - 我该如何编写这些东西？

我有以下功能，因此在运行其中一行代码后，我想做一些打印，前几行的注释对此进行了解释。

我很确定我需要更改函数的类型签名，也许我需要使用 Maybe。也许甚至不可能这样做，我必须完全重写它？我真的不知道 - 但我正在寻找指导。我如何着手包含此功能？

```
interpret_statement :: Prog -> Vars -> Stmt -> Vars -- one third of the debug -d functionality goes here 
                                                    -- AFTER every assignment is executed, the interpreter should print a line specifying
                                                    -- the variable being assigned to AND its new value
interpret_statement prog vars@(Vars _ b c d) (Assign A expr) = Vars (interpret_expr prog vars expr) b c d
interpret_statement prog vars@(Vars a _ c d) (Assign B expr) = Vars a (interpret_expr prog vars expr) c d
interpret_statement prog vars@(Vars a b _ d) (Assign C expr) = Vars a b (interpret_expr prog vars expr) d
interpret_statement prog vars@(Vars a b c _) (Assign D expr) = Vars a b c (interpret_expr prog vars expr) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:05:48.207

我将从 Adrian 答案中的代码开始。

```
interpret_statement :: Prog -> Vars -> Stmt -> IO Vars
interpret_statement prog vars@(Vars _ b c d) (Assign A expr) = do
    print "some debug"
    return $ Vars (interpret_expr prog vars expr) b c d
-- etc 
```

就目前而言，这是正确的，但存在一些问题：

*   调试输出是强制性的，但大概你希望它是可选的
*   尽管我们需要结果类型`IO Vars`才能执行 i/o，但这使得测试变得更加困难`interpret_statement`

一个解法：

*   添加一个函数参数来`interpret_statement`执行任何所需的 i/o
*   使该函数具有多态性，以便其结果类型确定`interpret_statement`

例如（请原谅我猜测您的类型：我假设`data VarName = A | B | C | D`和`data Vars = Vars Value Value Value Value`）：

```
interpret_statement :: (VarName -> Value -> Vars -> o) ->
                       Prog -> Vars -> Stmt -> o
interpret_statement debug prog vars@(Vars _ b c d) (Assign A expr)
    = debug A newValue $ Vars (interpret_expr prog vars expr) b c d
-- etc 
```

您可以作为该参数提供的有用功能是：

```
purePassthrough :: VarName -> Value -> Vars -> Vars
purePassthrough _ _ vars = vars 
```

*   当您`interpret_statement`从 QuickCheck 进行测试并希望它是纯的时使用
*   `interpret_statement purePassthrough :: Prog -> Vars -> Stmt -> Vars`，就像你原来的一样`interpret_statement`

```
writeDebuggingInfo :: VarName -> Value -> Vars -> IO Vars
writeDebuggingInfo varName newValue newVars = do
    putStrLn $ show varName ++ " := " ++ show newValue
        -- or whatever debugging output you want
    return newVars 
```

*   当您需要编写调试信息时在您的程序中使用
*   `interpret_statement writeDebuggingInfo :: Prog -> Vars -> Stmt -> IO Vars`，正如阿德里安的回答

```
dontWriteDebuggingInfo :: VarName -> Value -> Vars -> IO Vars
dontWriteDebuggingInfo :: _ _ newVars = return newVars 
```

*   `interpret_statement dontWriteDebuggingInfo :: Prog -> Vars -> Stmt -> IO Vars`, 和前面的情况一样
*   在您可能需要也可能不需要调试输出时使用，例如

    ```
    newVars <- interpret_statement (if wantDebuggingOutput then writeDebuggingInfo
                                                      else dontWriteDebuggingInfo)
                   program vars statement 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T07:31:27.617

You are correct. If you want to do some printing your code must live in some monad. Monad responsible for handling operations on real world - like printing on screen - is IO monad. So to use functions like `putStrLn, print, getLine` you need to change function signature to:

```
interpret_statement :: Prog -> Vars -> Stmt -> IO Vars 
```

And use `do` notation. Result of the function must be then wrapped by `return` funciton, but I am sure you already know this about monads.

For example:

```
interpret_statement prog vars@(Vars _ b c d) (Assign A expr) = do
    print "some debug"
    return $ Vars (interpret_expr prog vars expr) b c d 
```

# r - 将文本附加到 Rscript 中的 Args[]

> ID：15996713
> 
> 赞同：1
> 
> 时间：2013-04-14T07:21:31.237
> 
> 标签：r, args

这可能很天真，但很难解决。这是用于绘制 A 与 B 的示例 R 脚本。

```
Args <- commandArgs(TRUE)
A<-c(1:10)
B<-c(2:11)
png(Args[1])
plot(A,B)
dev.off() 
```

它执行为：`Rscript plot.r pic`

1.我想在 Args[1] 中添加一个 png 文件扩展名。即输出文件应该是pic.png。

2.有没有办法给出将文件写入Args [1]的路径？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:46:26.940

在png部分写：

```
png(paste(Args[1], ".png", sep=""))  # => "pic.png" 
```

同样，您可以在 args 参数之前放置一个路径：

```
PATH = "/example/path" 
```

正如[弗洛德尔](https://stackoverflow.com/users/1201032/flodel)所说，`file.path`确保不必担心忘记结尾`/`：

```
file.path(PATH, paste(Args[1], ".png", sep="")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:34:30.063

作为替代`paste`，我经常使用`sprintf`：

```
sprintf("%s.png", Args[1]) 
```

这里的`%s`被替换为 的内容`Args[1]`。

# visual-studio-2010 - （ASP.net）我在主页上有注销链接，单击该链接我将用户重定向到登录页面

> ID：15996715
> 
> 赞同：0
> 
> 时间：2013-04-14T07:21:46.937
> 
> 标签：visual-studio-2010

（ASP.net）我在主页上有注销链接，单击该链接我将用户重定向到登录页面。当用户在浏览器中单击返回时，即使在注销后也会重定向到主页。如何阻止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:25:48.800

Mark home page controller action with authorize attribute.

# ios - “音频队列服务”的好指南？

> ID：15996716
> 
> 赞同：0
> 
> 时间：2013-04-14T07:21:50.587
> 
> 标签：ios, core-audio, audioqueue

在查看了苹果的示例“SpeakHere”之后，我有点困惑，我正在寻找更多基本练习的指南。我的最终目标是创建 2 秒的音频“块”并将其交给服务器（在录制时）。

如果有人知道一个很好的参考，我想知道。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:34:13.223

有关音频队列 API 的良好发布资源，请查看 Adamson 和 Avila 所著的“Learning Core Audio”一书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:07:36.990

核心音频和音频队列服务可能很难通过。查看“The Amazing Audio Engine”，它是核心音频的 Objective C 包装器，它为您处理了许多低级的东西。

# google-api - 通过 Google HTTP 客户端对 Box API 的多部分请求

> ID：15996719
> 
> 赞同：4
> 
> 时间：2013-04-14T07:22:24.920
> 
> 标签：google-api, box-api, google-http-client

我正在尝试借助 Google HTTP 客户端库 v1.14.1 在 Box API 中调用此特定方法[http://developers.box.com/docs/#files-upload-a-file 。](http://developers.box.com/docs/#files-upload-a-file)目前我认为没有办法做到这一点。

如果我使用[http://hc.apache.org/httpclient-3.x/methods/multipartpost.html](http://hc.apache.org/httpclient-3.x/methods/multipartpost.html)，我将添加 2 项 StringPart 和 1 项 FilePart。

在 Google HTTP 客户端库中，我只看到 MultipartContent 和 Part 类似乎无法处理纯名称/值对，如上面引用的 StringPart。

以下是 Apache HTTP 客户端示例的摘录：

```
HttpPost httppost = new HttpPost("http://localhost:8080" +
                "/servlets-examples/servlet/RequestInfoExample");

FileBody bin = new FileBody(new File(args[0]));
StringBody comment = new StringBody("A binary file of some kind");

MultipartEntity reqEntity = new MultipartEntity();
reqEntity.addPart("bin", bin);
reqEntity.addPart("comment", comment);

httppost.setEntity(reqEntity); 
```

我想完成类似的事情，但使用 Google HTTP Client。欢迎大家提出意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:54:23.130

经过一番调查，我发现我需要 Box API 的 Content-Type: multipart/form-data 并适当地构建请求。我使用的 Google HTTP 客户端版本不可能，所以我自己实现了 MultipartFormDataContent 类，它非常适合库。这是该课程的完整列表。也许它可以包含在库中。

```
/*
 * Copyright (c) 2013 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */
/**
 * This is a modification of com.google.api.client.http.MultipartContent from
 * Google HTTP Client library to support multipart/form-data requests.
 *
 * The original author is Yaniv Inbar.
 */
public class MultipartFormDataContent extends AbstractHttpContent {
    private static final String NEWLINE = "\r\n";
    private static final String TWO_DASHES = "--";
    private ArrayList<Part> parts = new ArrayList<Part>();

    public MultipartFormDataContent() {
        super(new HttpMediaType("multipart/form-data").setParameter("boundary", "__END_OF_PART__"));
    }

    @Override
    public void writeTo(OutputStream out) throws IOException {
        Writer writer = new OutputStreamWriter(out, getCharset());
        String boundary = getBoundary();
        for (Part part : parts) {
            HttpHeaders headers = new HttpHeaders().setAcceptEncoding(null);
            if (part.headers != null) {
                headers.fromHttpHeaders(part.headers);
            }
            headers.setContentEncoding(null)
                   .setUserAgent(null)
                   .setContentType(null)
                   .setContentLength(null);
            // analyze the content
            HttpContent content = part.content;
            StreamingContent streamingContent = null;
            String contentDisposition = String.format("form-data; name=\"%s\"", part.name);
            if (part.filename != null) {
                headers.setContentType(content.getType());
                contentDisposition += String.format("; filename=\"%s\"", part.filename);
            }
            headers.set("Content-Disposition", contentDisposition);
            HttpEncoding encoding = part.encoding;
            if (encoding == null) {
                streamingContent = content;
            } else {
                headers.setContentEncoding(encoding.getName());
                streamingContent = new HttpEncodingStreamingContent(content, encoding);
            }
            // write separator
            writer.write(TWO_DASHES);
            writer.write(boundary);
            writer.write(NEWLINE);
            // write headers
            HttpHeaders.serializeHeadersForMultipartRequests(headers, null, null, writer);
            // write content
            if (streamingContent != null) {
                writer.write(NEWLINE);
                writer.flush();
                streamingContent.writeTo(out);
                writer.write(NEWLINE);
            }
        }
        // write end separator
        writer.write(TWO_DASHES);
        writer.write(boundary);
        writer.write(TWO_DASHES);
        writer.write(NEWLINE);
        writer.flush();
    }

    @Override
    public boolean retrySupported() {
        for (Part part : parts) {
            if (!part.content.retrySupported()) {
                return false;
            }
        }
        return true;
    }

    @Override
    public MultipartFormDataContent setMediaType(HttpMediaType mediaType) {
        super.setMediaType(mediaType);
        return this;
    }

    /**
     * Adds an HTTP multipart part.
     *
     * <p>
     * Overriding is only supported for the purpose of calling the super
     * implementation and changing the return type, but nothing else.
     * </p>
     */
    public MultipartFormDataContent addPart(Part part) {
        parts.add(Preconditions.checkNotNull(part));
        return this;
    }

    /**
     * Sets the boundary string to use.
     *
     * <p>
     * Defaults to {@code "END_OF_PART"}.
     * </p>
     *
     * <p>
     * Overriding is only supported for the purpose of calling the super
     * implementation and changing the return type, but nothing else.
     * </p>
     */
    public MultipartFormDataContent setBoundary(String boundary) {
        getMediaType().setParameter("boundary", Preconditions.checkNotNull(boundary));
        return this;
    }

    /**
     * Single part of a multi-part request.
     *
     * <p>
     * Implementation is not thread-safe.
     * </p>
     */
    public static final class Part {
        private String name;
        private String filename;
        private HttpContent content;
        private HttpHeaders headers;
        private HttpEncoding encoding;

        public Part setContent(HttpContent content) {
            this.content = content;
            return this;
        }

        public Part setHeaders(HttpHeaders headers) {
            this.headers = headers;
            return this;
        }

        public Part setEncoding(HttpEncoding encoding) {
            this.encoding = encoding;
            return this;
        }

        public Part setName(String name) {
            this.name = name;
            return this;
        }

        public Part setFilename(String filename) {
            this.filename = filename;
            return this;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T15:29:43.160

几个月来，我一直在为 google-http-java-client 中的这个小限制而苦苦挣扎，不久前我想出了一个旧的 MultipartRelatedContent 类的丑陋和冗余版本。现在我将 Google 库更新到最新的 1.15.0-rc 并且我发现将 MultipartContent 子类化并制作适合任何类型的*“multipart/form-data”*内容的体面的东西非常容易。

目前你可以在这里找到它： [https ://github.com/marcosalis/kraken/blob/master/kraken_lib/src/main/java/com/google/api/client/http/MultipartFormDataContent.java](https://github.com/marcosalis/kraken/blob/master/kraken_lib/src/main/java/com/google/api/client/http/MultipartFormDataContent.java)

一个简短的使用示例：

```
File file = new File("/path/image.jpg");
FileContent fileContent = new FileContent("application/octet-stream", file);
MultipartFormDataContent multipart = new MultipartFormDataContent();
multipart.addPart(new Part(fileContent), "image", file.getName());
request.setContent(multipart); // sets the content to the request 
```

“image”将是*“content-disposition”标头中**“name”*键的值，文件名（在本例中为 image.jpg）将是“filename”键的（可选）值。

 *以同样的方式，您可以根据需要添加任意数量的不同部分（也可以嵌套其他“多部分/混合”内容，只需确保使用不同的边界字符串）到第一级多部分内容。*

# c++ - 为什么我们不能定义一个指向 int 指针的低 + 顶级 const 指针？

> ID：15996720
> 
> 赞同：2
> 
> 时间：2013-04-14T07:22:38.763
> 
> 标签：c++

1.  定义 int 和指向 int 的指针：

    `int i = 22, *p = &i;`

2.  定义低级和顶级 const 的指针：

    `const int *const cp = p;`

    (2) 没问题 - 无权更改 (i) 值的 const 点

3.  定义一个指向低 + 顶级 const 的指针的指针：

    `const int **const cp_2_p = &p;`

    (3) 不行，为什么？

    `error C2440: 'initializing' : cannot convert from 'int **' to 'const int **const`

我希望能够定义一个指针，该指针指向`int`我不能改变它指向的地址，也不能改变它指向的地址，指向的地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T07:26:59.913

In general, `const` applies to the item to its left. The exception of `const T` is present for historical reasons, and is the conventional alternative to `T const`.

`cp` is declared as a **constant** pointer to a constant `int`.

`cp_2_p` is declared as a constant pointer to a **non-constant** pointer to a constant int.

You would need to declare `cp_2_p` like this for the types to be compatible:

```
const int *const *const cp_2_p 
```

# c# - 无法以编程方式下载文件 (C#)

> ID：15996721
> 
> 赞同：1
> 
> 时间：2013-04-14T07:22:48.847
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我编写连接到 Azure 存储帐户的 ac# 程序。

给定一个 blob URI，我需要将文件下载到本地文件并执行它。

这是我的一段代码：

```
var blobClientCode = client.CreateCloudBlobClient();
CloudBlockBlob codeBlob = blobClientCode.GetBlockBlobReference(codeUri);
File.Create("C:\\code.exe");
using (var fileStream = File.OpenWrite("C:\\code.exe")) {
     codeBlob.DownloadToStream(fileStream);
}

Process p = new Process();
p.StartInfo.FileName = "C:\\mycode.exe";
p.StartInfo.Arguments = dataUri;
p.StartInfo.CreateNoWindow = true;
p.StartInfo.RedirectStandardOutput = false;
p.StartInfo.UseShellExecute = false;
p.Start();
p.WaitForExit();
string output = p.StandardOutput.ReadToEnd(); 
```

问题是我不断收到 UnauthorizedAccess 异常。

*   当我尝试从浏览器手动下载文件（复制并粘贴 URI）时，我成功了。
*   该容器是一个公共容器。
*   我也尝试使用 WebClient.DownloadFile()，并得到了 WebException。

我错过了什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:37:33.793

在调用 webclient.DownloadFile 之前尝试包含下面提到的代码片段。希望它应该工作..

```
 ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;

    ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(delegate { return true; });

 WebClient webclient = new WebClient();
webclient.DownloadFile(new Uri(URIPath), LocalPath); 
```

注意：如果您使用代理访问互联网，您可能需要设置代理设置

```
WebProxy ProxyObject = ProxySetting;
webclient.Proxy = ProxySetting 
```

;

无论证书是否经过验证，这基本上都会导航页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:40:44.353

好的，感谢大家，我终于找到了解决方案：

我最终所做的是在角色的服务定义中定义一个本地存储，如下所示：

```
<LocalResources>
<LocalStorage name="myLocalStorage" sizeInMB="10" cleanOnRoleRecycle="false" />
</LocalResources> 
```

然后只需使用此本地存储从 blob 下载文件并执行它：

```
LocalResource localResource = RoleEnvironment.GetLocalResource("myLocalStorage");
string PathToFile = Path.Combine(localResource.RootPath, "mycode.exe");
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(delegate { return true; });
WebClient webclient = new WebClient();
webclient.DownloadFile(codeUri, PathToFile);

Process p = new Process(); //... 
```

再次感谢大家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:38:12.710

我看到您正在尝试将文件写入`C:`驱动器。在 Windows Azure 中，这是不允许开箱即用的。有关详细信息，请参阅此博客文章：http: [//blog.codingoutloud.com/2011/06/12/azure-faq-can-i-write-to-the-file-system-on-windows-azure/](http://blog.codingoutloud.com/2011/06/12/azure-faq-can-i-write-to-the-file-system-on-windows-azure/)。如博客文章中所述，一种选择是将 blob 保存到本地存储并从那里执行。

# yii - PayPal 快速结帐期间出现错误 10525

> ID：15996723
> 
> 赞同：2
> 
> 时间：2013-04-14T07:23:02.890
> 
> 标签：yii, paypal-sandbox

我有以下代码（使用 Yii PHP 框架）：

```
error_reporting(E_ALL ^ E_NOTICE);
$libraryPath = Yii::getPathOfAlias('application.libraries.paypal');
spl_autoload_unregister(array('YiiBase','autoload'));
require_once($libraryPath . '/PPBootStrap.php');
spl_autoload_register(array('YiiBase','autoload'));

$PaymentDetails = new PaymentDetailsType();

$address = new AddressType();
$address->CityName = '';
$address->Name = '';
$address->Street1 = '';
$address->StateOrProvince = '';
$address->PostalCode = '';
$address->Country = '';
$address->Phone = '';

$PaymentDetails->ShipToAddress = $address;

$PaymentDetails->ShippingTotal = $PaymentDetails->HandlingTotal
  = $PaymentDetails->InsuranceTotal = $PaymentDetails->TaxTotal
  = new BasicAmountType('USD', 0);
$PaymentDetails->OrderTotal =  $PaymentDetails->ItemTotal
  = new BasicAmountType('USD', $subscription->price);

$PaymentDetails->PaymentAction = "Sale";

$PaymentDetails->OrderDescription = $subscription->description;

$setECReqDetails = new SetExpressCheckoutRequestDetailsType();
$setECReqDetails->PaymentDetails[0] = $PaymentDetails;
$setECReqDetails->CancelURL = $this->createAbsoluteUrl('adListing/listings');
$setECReqDetails->ReturnURL = $this->createAbsoluteUrl('adReturnFromPaypal');

$setECReqDetails->NoShipping = '0';
$setECReqDetails->AddressOverride = '';
$setECReqDetails->ReqConfirmShipping = '0';

$setECReqType = new SetExpressCheckoutRequestType();
$setECReqType->SetExpressCheckoutRequestDetails = $setECReqDetails;

$setECReq = new SetExpressCheckoutReq();
$setECReq->SetExpressCheckoutRequest = $setECReqType;

$paypalService = new PayPalAPIInterfaceServiceService();

$ok = TRUE;
try {
  Yii::trace(__METHOD__ . ': Initiating PayPal API...');
  // wrap API method calls on the service object with a try catch
  $setECResponse = $paypalService->SetExpressCheckout($setECReq);

  if($setECResponse && strtoupper($setECResponse->Ack) =='SUCCESS') {
    Yii::trace(__METHOD__ . ': Got successful response from PayPal. Redirecting to it...');
    $token = $setECResponse->Token;
    // Redirect to paypal.com here
    $this->redirect(
      'https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=' . $token);
  }
}
catch (Exception $ex) {
  Yii::trace(__METHOD__ . ': Exception while interacting with PayPal API, error: '
    . $ex->getMessage());
  $ok = FALSE;
}
if (!$ok) {
  Yii::app()->user->setFlash('listings', array(
    'msg'=>'There was an error while interacting with PayPal. Please try again later.',
    'class'=>'flash-error'));
  $this->redirect(array('adListing/listings'));
} 
```

用户被重定向到 Paypal，但是当他们使用沙盒帐户登录并尝试付款时，我从 Paypal 收到**10525**错误：

> 无法处理此交易。要收取的金额为零。

并且结帐失败。是否有我缺少设置的属性并且该过程失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T13:16:20.530

我发现了问题。我忘了包括交易所需的另一个对象：

```
$itemDetails = new PaymentDetailsItemType();
$itemDetails->Name = $subscription->description;
$itemDetails->Amount = new BasicAmountType('USD', $subscription->price);
$itemDetails->Quantity = 1;
$itemDetails->ItemCategory = 'Digital';

$PaymentDetails->PaymentDetailsItem[0] = $itemDetails; 
```

这条线

```
$PaymentDetails->ShippingTotal = $PaymentDetails->HandlingTotal
  = $PaymentDetails->InsuranceTotal = $PaymentDetails->TaxTotal
  = new BasicAmountType('USD', 0); 
```

也应该改为

```
$PaymentDetails->OrderTotal = $PaymentDetails->ItemTotal =
  new BasicAmountType('USD', $subscription->price); 
```

# javascript - 突出显示特定对象，然后在单击同一类的另一个对象时移除突出显示

> ID：15996729
> 
> 赞同：1
> 
> 时间：2013-04-14T07:23:36.353
> 
> 标签：javascript, click

我目前有一个时间表，如果我点击一个特定的类元素，它会突出显示。如果我单击屏幕上的其他任何位置，它将不再突出显示。它完美地工作。

但是，如果我单击一个类元素，然后单击同一类元素的另一个条目，它们都会突出显示。这是我的代码中的一个问题，但我不知道要修改什么来更改它。

这是JS（删除了不相关的部分）：

```
$(document).click(function() {  
    $('.outter').css("background-color","rgba(52, 73, 94, 0.8)");
});

$(document.body).on('click', '.outter', function(e) {
    $(this).css("background-color","#000");
}); 
```

所以，基本上它会影响“外部”类。html的一个例子：

```
<td id="mon-9">
    <p class="outter" style="background-color: rgba(52, 73, 94, 0.8);">
        Programming
        <br/>
        Lecture
    </p>
</td>
<td id="tue-9">
    <p class="outter" style="background-color: rgba(52, 73, 94, 0.8);">
        BPI
        <br/>
        Lecture
    </p>
</td> 
```

所以在这个特定的场景中，如果我点击其中任何一个，它们会显示为黑色，当我点击它们时，它们会恢复正常。有用。但是，如果我单击一个，然后单击另一个，两者都会变黑。在我单击 .outter 选项卡外部之前，不会恢复正常。我会给他们单独的 ID，但是有很多条目。所以那将是愚蠢的。

有没有更好的方法来实现我所追求的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:44:57.363

如果您只想突出显示一个实例：

```
$(document).click(function() {  
    $('.outter').css("background-color","rgba(52, 73, 94, 0.8)");
});

$(document.body).on('click', '.outter', function(e) {
    $('.outter').css("background-color","rgba(52, 73, 94, 0.8)"); //sets all elements to the initial color
    $(this).css("background-color","#000");
}); 
```

只需在更改单击的元素之前将所有元素设置为初始颜色。这是一种快速简便的方法（即不推荐），而不是一种优越的方法。

# javascript - 在 javascript 中使用数组的简单初学者搜索程序，显示问题

> ID：15996731
> 
> 赞同：0
> 
> 时间：2013-04-14T07:23:37.397
> 
> 标签：javascript, arrays, if-statement, for-loop

我正在创建一个简单的搜索程序来搜索我的姓名文本块。最后我遇到的问题是，当我将字母放在数组中时，它们似乎在每一行出现一个字符，而不是在一个文本块中统一出现。任何人都可以指出差异吗？

```
var text = "hah hah Aaron hah hah Aaron\
hah hah hah hah hoh Aaron hah hah hah hah\
Aaron Aaron Aaron hah";
var myName = "Aaron";
var hits = [];

for (var i =0; i< text.length; i++) {
    if (text[i] === "A") {
       for (var j = i; j <(myName.length + i); j++){
        hits.push(text[j]);
       } 
    }
}
if (hits === 0) {
    console.log ("Your name wasn't found!");
}
else {
    console.log(hits);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:49:04.023

“逐字母”行为的原因是变量*hits*包含来自所有匹配项的单个字母数组。

您要么需要使用从一个名称中找到的字母在数组上调用**join**方法，要么使用更高级的东西而不是循环。例如，`text.match(/Aaron/g)`将返回一个包含所有匹配名称的数组。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-12T11:57:24.607

我认为这个搜索程序更有效：

```
var text = "Blah blah blah blah blah blah Eric \
blah blah blah Eric blah blah Eric blah blah \
blah blah blah blah blah Eri Epic Erics☺n"
var name = "Eric"
var x=0;
var y=0

for (var i = 0; i < text.length; i++) {
  x=0;
  for (var j = i; j < name.length + i; j++) {
    if (text[j] === name[j-i]) {
      x++;
      if(x === name.length) {
        y++
      }
    }
  }
}
console.log("Found "+y+" times") 
```

# windows - 在 Windows 8 上以编程方式启动任务管理器

> ID：15996733
> 
> 赞同：0
> 
> 时间：2013-04-14T07:23:53.917
> 
> 标签：windows, taskmanager

我需要以编程方式从 Windows 8 中启动任务管理器。

在 Windows 8 之前，我只是使用了类似的东西：

```
Dim sPath$
Dim fso As New FileSystemObject
sPath = fso.GetSpecialFolder(1)
sPath = sPath & "\taskmgr.exe"
Shell(sPath) 
```

实际上编程语言并不重要。

事情似乎是在 Windows 8 系统上不再有 taskmgr.exe。

有人知道如何启动任务管理器吗？

我不是说打开选择窗口，我想立即打开任务管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:54:43.767

在 Windows 8 中，任务管理器仍然存在。例如，请参阅[这篇](http://www.pcadvisor.co.uk/how-to/windows/3422276/how-use-windows-8-task-manager/)关于 Windows 8 任务管理器的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:08:58.867

您可能可以分析 Shell() 函数调用的返回码。它可以帮助您找到确切的问题。

# javascript - javascript的3个对象声明有什么区别

> ID：15996735
> 
> 赞同：2
> 
> 时间：2013-04-14T07:24:11.630
> 
> 标签：javascript

总之，我发现有 3 种方法可以在 javascript 中声明对象。

```
var Waffle = {
   tastes:'yummy'
};

var Waffle = function()
{
   this.tastes='yummy';
};

function Waffle() {
   var that = {};
   that.tastes = "yummy";
   return that;
} 
```

第一种方法是`Object literal`它没有`constructor`. 我认为下面是相同的方法`Object literal`。

```
var Waffle = new Object();
Waffle.tastes = 'yummy'; 
```

（如果我的理解是错误的。请纠正我。）

我想知道这三种方式的区别是什么。

哪一个是最好的选择？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T07:28:08.727

The first is an object literal and **is** the same as:

```
var Waffle = new Object();
Waffle.tastes = 'yummy'; 
```

which is the same as:

```
var Waffle = {};
Waffle.tastes = 'yummy'; 
```

but of course, their instantiations take multiple lines.

Your second and third examples are functions. Your second example is an expression, while your third example is a declaration. Here's an explanation of their differences: [What is the difference between a function expression vs declaration in JavaScript?](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

Be careful with your second example (the expression), because in order to modify `this` (correctly), you need to use `var waffle = new Waffle();`. Since this is an expression, alternatively you could've used a declaration like:

```
function Waffle() {
    this.tastes='yummy';
} 
```

(to understand the main difference between that and the original, which I don't think affect many people ever, read the link I provided)

The third example is a basic function that returns a new object literal.

As for the best choice...I don't think there's a concrete, definite answer.

Your first example creates a simple, single object. You can add/change properties and methods on it. But it inherits directly from `Object`. I like to use this when I need one big object for holding many things, and its structure is static. To reuse this, your third example is needed.

Your second example is convenient because you can invoke a `new` instance, giving the effect of classic OOP...and is the one I normally use. Although the caveat is that you **have** to use `new`, otherwise the value of `this` will be `window`, which is bad. At the same time, you can modify this `prototype` and all instances will share it. It also gives you flexibility of having "private" variables, such as:

```
function Waffle() {
    var testing = 0;
    this.name = "A";
    this.myMethod = function () {
        return testing;
    };
} 
```

Your third example is similar to the second, except that you can't tap into a `prototype`, since you're returning an `Object`. It's basically using your first example, but making it reusable. It also allows for "private" variables like above, as well.

So if you're looking for a single object, use your first example. If you're looking for reusability, I'd suggest your second example, while the third is still an example. Hopefully I explained enough about each for you to determine which suits your needs.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T07:28:12.463

The literal notation and `new Object()` creates an object whose prototype is directly the `Object`. Also, properties and methods are attached on the instance.

```
/*

Object
  A 
  | instance.__proto__
  | 
instance

*/

//all 3 yield the same result

var foo1 = {
  bar : 'bam!'
}

var foo2 = {}
foo2.bar = 'bam!';

var foo3 = new Object();
foo3.bar = 'bam!'; 
```

![literal](https://i.stack.imgur.com/ZNCEu.png)

The constructor approach, either the declared function or the assigned function expression approach, has an additional prototype level between the instance and the `Object`, which contains your prototype functions attached to the constructor's prototype. Anything attached to the constructor's prototype are *shared* across all instances.

```
/*

Object 
  A 
  | instance.__proto__.__proto__
  | 
constructor.prototype 
  A
  | instance.__proto__
  |
instance

*/

//these 2 are the same
//bar is attached at the instance

//function expression assigned to variable foo1
var foo1 = function(){
  this.bar = 'bam!'
}

//function declaration named foo2
function foo2(){
  this.bar = 'bam!'
}

//==========================================================================//

//these 2 are the same, but not the same as above
//methods live on the prototype level and are shared across instances

//function expression assigned to variable foo1
var foo1 = function(){}

//function declaration named foo2
function foo2(){}

foo1.prototype.bar = 'bam!'
foo2.prototype.bar = 'bam!' 
```

![constructor](https://i.stack.imgur.com/F62EY.png)

The third approach returns a new literal. You don't get the benefits of the constructor method and prototype sharing. It's as if you just called `Waffle` like an ordinary function, created a literal, attached properties and methods, and returned it.

**Best Choice:** Depends on purpose.

Object literals:

*   Shorter than `new Object` and can attach methods/properties upon definition.
*   Properties/methods live on the instance, no running up the prototype chain which means faster look-up.
*   Unoptimized creation of objects might lead to duplicates, which waste memory. For example, creating functions per instance instead of sharing via the prototype.

Constructor:

*   Classical OOP style
*   Inheritance
*   Shared methods via the prototype means less memory used, as opposed to per instance methods.
*   Forgetting the `new` might have unwanted consequences, like attaching globals (if `window` is the context)

You can check these out in the Chrome Developer tools. Create them in the Console, and watch these expressions in the Sources tab

# android - 如何从 java 类文件中更改布局中 TextView 的值？

> ID：15996738
> 
> 赞同：0
> 
> 时间：2013-04-14T07:24:43.913
> 
> 标签：android, textview

**布局文件-listitem_discuss.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<LinearLayout
    android:id="@+id/wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">"

    <TextView
        android:id="@+id/comment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:layout_marginTop="5dip"
        android:layout_marginBottom="5dip"
        android:background="@drawable/bubble_yellow"
        android:paddingLeft="10dip"
        android:text="Hello bubbles!"
        android:textColor="@android:color/primary_text_light" />

    <TextView 
        android:id="@+id/tstextbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:layout_marginBottom="5dip"
        android:text="TimeStamp"/>
</LinearLayout>

</LinearLayout> 
```

**布局文件-activity_discuss.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/bg" 
    android:scaleType="matrix"
    />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="115dp"
    android:layout_marginBottom="10dp"
    android:layout_above="@+id/form"
    android:layout_alignParentTop="true" >
</ListView>

<RelativeLayout
    android:id="@+id/form"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:ems="10"
        android:hint="Talk to me"
        android:inputType="text" />
</RelativeLayout>

</RelativeLayout> 
```

**Java 类文件** * *Page1.java* *

```
public class Page1 extends Activity {
private com.anr.aifv1.DiscussArrayAdapter adapter;
private ListView lv;
private EditText editText1;
@Override
protected void onCreate(Bundle savedInstanceState) {

//Remove title bar
this.requestWindowFeature(Window.FEATURE_NO_TITLE);

//Remove notification bar
//this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_discuss);
    lv = (ListView) findViewById(R.id.listView1);
adapter = new DiscussArrayAdapter(getApplicationContext(),R.layout.listitem_discuss);
lv.setAdapter(adapter);
editText1 = (EditText) findViewById(R.id.editText1);
editText1.setOnKeyListener(new OnKeyListener() {
public boolean onKey(View v, int keyCode, KeyEvent event) {
// If the event is a key-down event on the "enter" button
if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
// Perform action on key press
adapter.add(new OneComment(false, editText1.getText().toString()));

adapter.add(new OneComment(true, "Thank you"));
    editText1.setText("");
//tstextboxjv.setText("Sample");
return true;
         }
return false;
        }
    });
}
} 
```

**讨论ArrayAdapter.java**

```
package com.anr.aifv1;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
    import android.widget.TextView;

public class DiscussArrayAdapter extends ArrayAdapter<OneComment> {

private TextView countryName;
private List<OneComment> countries = new ArrayList<OneComment>();
private LinearLayout wrapper;

@Override
public void add(OneComment object) {
    countries.add(object);
    super.add(object);
}

public DiscussArrayAdapter(Context context, int textViewResourceId) {
    super(context, textViewResourceId);
}

public int getCount() {
    return this.countries.size();
}

public OneComment getItem(int index) {
    return this.countries.get(index);
}

public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row == null) {
        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.listitem_discuss, parent, false);
    }

    wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

    OneComment coment = getItem(position);

    countryName = (TextView) row.findViewById(R.id.comment);

    countryName.setText(coment.comment);

    countryName.setBackgroundResource(coment.left ? R.drawable.bubble_yellow : R.drawable.bubble_green);
    wrapper.setGravity(coment.left ? Gravity.LEFT : Gravity.RIGHT);

    return row;
}

public Bitmap decodeToBitmap(byte[] decodedByte) {
    return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);
}

} 
```

**OneComment.java**

```
package com.anr.aifv1;

import java.util.Calendar;

import android.widget.TextView;

public class OneComment {
public boolean left;
public String comment;

public OneComment(boolean left, String comment) {
    super();

    this.left = left;
    this.comment = comment;
}

} 
```

**这运行良好。但是当注释语句“tstextboxjv.setText("Sample");” 未注释，该应用程序。崩溃。**

**我的目标是使用 TextView 来显示聊天气泡的时间戳。**

**Logcat 堆栈跟踪**

```
04-14 13:11:48.094: D/AndroidRuntime(940): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-14 13:11:48.094: D/AndroidRuntime(940): CheckJNI is ON
04-14 13:11:48.144: D/dalvikvm(940): Trying to load lib libjavacore.so 0x0
04-14 13:11:48.154: D/dalvikvm(940): Added shared lib libjavacore.so 0x0
04-14 13:11:48.194: D/dalvikvm(940): Trying to load lib libnativehelper.so 0x0
04-14 13:11:48.204: D/dalvikvm(940): Added shared lib libnativehelper.so 0x0
04-14 13:11:48.934: D/AndroidRuntime(940): Calling main entry com.android.commands.pm.Pm
04-14 13:11:48.994: D/AndroidRuntime(940): Shutting down VM
04-14 13:11:49.025: D/dalvikvm(940): GC_CONCURRENT freed 102K, 78% free 466K/2048K, paused 6ms+9ms, total 32ms
04-14 13:11:49.025: D/jdwp(940): Got wake-up signal, bailing out of select
04-14 13:11:49.025: D/dalvikvm(940): Debugger has detached; object registry had 1 entries
04-14 13:11:49.664: D/AndroidRuntime(954): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-14 13:11:49.664: D/AndroidRuntime(954): CheckJNI is ON
04-14 13:11:49.744: D/dalvikvm(954): Trying to load lib libjavacore.so 0x0
04-14 13:11:49.744: D/dalvikvm(954): Added shared lib libjavacore.so 0x0
04-14 13:11:49.785: D/dalvikvm(954): Trying to load lib libnativehelper.so 0x0
04-14 13:11:49.794: D/dalvikvm(954): Added shared lib libnativehelper.so 0x0
04-14 13:11:50.554: D/AndroidRuntime(954): Calling main entry com.android.commands.am.Am
04-14 13:11:50.604: I/ActivityManager(174): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.anr.aifv1/.Page1 u=0} from pid 954
04-14 13:11:50.634: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.634: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.634: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.634: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.634: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.634: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.644: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.644: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.644: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.644: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:11:50.644: W/WindowManager(174): Failure taking screenshot for (266x425) to layer 21005
04-14 13:11:50.665: D/AndroidRuntime(954): Shutting down VM
04-14 13:11:50.734: I/AndroidRuntime(954): NOTE: attach of thread 'Binder_4' failed
04-14 13:11:50.744: D/dalvikvm(966): Not late-enabling CheckJNI (already on)
04-14 13:11:50.764: I/ActivityManager(174): Start proc com.anr.aifv1 for activity com.anr.aifv1/.Page1: pid=966 uid=10043 gids={1028}
04-14 13:11:50.774: D/dalvikvm(954): GC_CONCURRENT freed 102K, 77% free 489K/2048K, paused 30ms+1ms, total 99ms
04-14 13:11:50.774: D/jdwp(954): Got wake-up signal, bailing out of select
04-14 13:11:50.784: D/dalvikvm(954): Debugger has detached; object registry had 1 entries
04-14 13:11:51.294: E/Trace(966): error opening trace file: No such file or directory (2)
04-14 13:11:52.154: D/dalvikvm(966): GC_FOR_ALLOC freed 60K, 5% free 7252K/7555K, paused 52ms, total 54ms
04-14 13:11:52.174: I/dalvikvm-heap(966): Grow heap (frag case) to 9.518MB for 2457616-byte allocation
04-14 13:11:52.424: D/dalvikvm(966): GC_CONCURRENT freed <1K, 4% free 9652K/9991K, paused 74ms+13ms, total 247ms
04-14 13:11:52.618: D/dalvikvm(966): GC_FOR_ALLOC freed 0K, 4% free 9652K/9991K, paused 35ms, total 35ms
04-14 13:11:52.684: I/dalvikvm-heap(966): Grow heap (frag case) to 13.672MB for 4356164-byte allocation
04-14 13:11:52.897: D/dalvikvm(966): GC_CONCURRENT freed 0K, 3% free 13906K/14279K, paused 74ms+16ms, total 216ms
04-14 13:11:53.385: D/gralloc_goldfish(966): Emulator without GPU emulation detected.
04-14 13:11:53.526: I/ActivityManager(174): Displayed com.anr.aifv1/.Page1: +2s816ms
04-14 13:11:54.454: I/Choreographer(333): Skipped 64 frames!  The application may be doing too much work on its main thread.
04-14 13:12:06.664: E/PowerManagerService(174): Excessive delay setting brightness: 126ms, mask=2
04-14 13:12:07.084: E/PowerManagerService(174): Excessive delay setting brightness: 140ms, mask=2
04-14 13:12:10.284: D/AndroidRuntime(966): Shutting down VM
04-14 13:12:10.334: W/dalvikvm(966): threadid=1: thread exiting with uncaught exception (group=0x2bc9a300)
04-14 13:12:10.508: E/AndroidRuntime(966): FATAL EXCEPTION: main
04-14 13:12:10.508: E/AndroidRuntime(966): java.lang.NullPointerException
04-14 13:12:10.508: E/AndroidRuntime(966):  at com.anr.aifv1.Page1$1.onKey(Page1.java:53)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.View.dispatchKeyEvent(View.java:7081)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
04-14 13:12:10.508: E/AndroidRuntime(966):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1892)
04-14 13:12:10.508: E/AndroidRuntime(966):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1369)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.app.Activity.dispatchKeyEvent(Activity.java:2356)
04-14 13:12:10.508: E/AndroidRuntime(966):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1819)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3577)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewRootImpl.deliverKeyEvent(ViewRootImpl.java:3533)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3115)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2932)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.os.Looper.loop(Looper.java:137)
04-14 13:12:10.508: E/AndroidRuntime(966):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-14 13:12:10.508: E/AndroidRuntime(966):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 13:12:10.508: E/AndroidRuntime(966):  at java.lang.reflect.Method.invoke(Method.java:511)
04-14 13:12:10.508: E/AndroidRuntime(966):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-14 13:12:10.508: E/AndroidRuntime(966):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-14 13:12:10.508: E/AndroidRuntime(966):  at dalvik.system.NativeStart.main(Native Method)
04-14 13:12:10.606: W/ActivityManager(174):   Force finishing activity com.anr.aifv1/.Page1
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: E/libEGL(35): called unimplemented OpenGL ES API
04-14 13:12:10.614: W/WindowManager(174): Failure taking screenshot for (266x425) to layer 21015
04-14 13:12:10.634: I/Process(966): Sending signal. PID: 966 SIG: 9
04-14 13:12:10.714: W/InputDispatcher(174): channel '2c56a158 com.anr.aifv1/com.anr.aifv1.Page1 (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
04-14 13:12:10.714: E/InputDispatcher(174): channel '2c56a158 com.anr.aifv1/com.anr.aifv1.Page1 (server)' ~ Channel is unrecoverably broken and will be disposed!
04-14 13:12:10.745: I/WindowState(174): WIN DEATH: Window{2c56a158 com.anr.aifv1/com.anr.aifv1.Page1 paused=true}
04-14 13:12:10.745: I/ActivityManager(174): Process com.anr.aifv1 (pid 966) has died.
04-14 13:12:10.754: W/InputDispatcher(174): Attempted to unregister already unregistered input channel '2c56a158 com.anr.aifv1/com.anr.aifv1.Page1 (server)'
04-14 13:12:10.784: I/WindowManager(174): WINDOW DIED Window{2c56a158 com.anr.aifv1/com.anr.aifv1.Page1 paused=true}
04-14 13:12:10.914: I/Choreographer(333): Skipped 54 frames!  The application may be doing too much work on its main thread.
04-14 13:12:11.037: W/InputMethodManagerService(174): Got RemoteException sending setActive(false) notification to pid 966 uid 10043
04-14 13:12:11.454: I/Choreographer(333): Skipped 50 frames!  The application may be doing too much work on its main thread.
04-14 13:12:11.464: D/dalvikvm(174): GC_CONCURRENT freed 322K, 20% free 9459K/11783K, paused 75ms+39ms, total 774ms
04-14 13:12:12.124: I/Choreographer(333): Skipped 49 frames!  The application may be doing too much work on its main thread. 
```

**编辑**

```
 public class Page1 extends Activity {
private com.anr.aifv1.DiscussArrayAdapter adapter;
private ListView lv;
private EditText editText1;
private TextView tstextboxjv;
@Override
protected void onCreate(Bundle savedInstanceState) {

//Remove title bar
this.requestWindowFeature(Window.FEATURE_NO_TITLE);

//Remove notification bar
//this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_discuss);
    lv = (ListView) findViewById(R.id.listView1);
adapter = new DiscussArrayAdapter(getApplicationContext(),R.layout.listitem_discuss);
lv.setAdapter(adapter);
editText1 = (EditText) findViewById(R.id.editText1);
tstextboxjv = (TextView) findViewById(R.id.tstextbox);
editText1.setOnKeyListener(new OnKeyListener() {
public boolean onKey(View v, int keyCode, KeyEvent event) {
// If the event is a key-down event on the "enter" button
if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
// Perform action on key press
adapter.add(new OneComment(false, editText1.getText().toString()));

adapter.add(new OneComment(true, "Thank you"));
    editText1.setText("");
tstextboxjv.setText("Sample");
return true;
         }
return false;
        }
    });
}
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:27:24.757

You need to find the id of your textview and then set text in textview.

All your resources like string, drawables , your views like textview will have a entry in R.java. So you need to find the id. R.id.tstextbox which is an int value. You add textview to you xml layout and save an entry is automatically made in R.java. R.java is auto generated.

In your R.java you will be having an entry for textview as

```
 public static final int tstextbox=0x7f070001;
      // the value may be different
      // will look something similar to above. 
```

Then you can set the text in textview in your activity class by finding the textview id.

```
 <TextView 
    android:id="@+id/tstextbox" // id of textview
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dip"
    android:layout_marginRight="20dip"
    android:layout_marginBottom="5dip"
    android:text="TimeStamp"/> 
```

In your activtiy onCreate()

```
 TextView tv=(TextView) findViewById(R.id.tstextbox);
      tv.setText("sample"); 
```

Edit:

I tried the below works fine on my device

```
 et.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
    // If the event is a key-down event on the "enter" button
    if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
    // Perform action on key press
     et.setText("");
    _tv.setText("Sample");
    return true;
             }
    return false;
            } 
```

Also if you are adding new data to your listview, you should call notifyDataSetChanged() on your adapter to refresh your listview.

Edit 2 :

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical"
 tools:context=".MainActivity" >

 <TextView
    android:id="@+id/tv"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="Blank text" />

 <EditText
    android:id="@+id/ed"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:layout_marginTop="40dp" />
 </LinearLayout> 
```

Then in my MainActivity

```
 setContentView(R.layout.activity_main);
 _tv = (TextView) findViewById( R.id.tv );
 et = (EditText) findViewById(R.id.ed);
 et.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
    // If the event is a key-down event on the "enter" button
    if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
    // Perform action on key press

     et.setText("");
    _tv.setText("Sample");
    return true;
             }
    return false;
            } 
```

Your TextView and EditText should be in the same layout xml file ie activity_discuss.

Then you can get the ids of the same and do the above.

If you need to set text of textview in another layout, check the link below

[Transfer data between EditText and Text View](https://stackoverflow.com/questions/15997158/transfer-data-between-edittext-and-text-view/15997201#15997201)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:53:01.067

**1.在java文件中定义TextView的布局文件**

```
setContentView(R.layout.activity); 
```

**2.定义一个变量链接到TextView**

```
private TextView variable_name; 
```

**3\. 将变量链接到视图**

```
variable_name = (TextView) findViewById (R.id.TextView_name); 
```

**4.设置文字**

```
variable_name.setText("Sample_Text"); 
```

# sql - 来自 sql server 中连接表的“group by”错误

> ID：15996739
> 
> 赞同：1
> 
> 时间：2013-04-14T07:24:56.133
> 
> 标签：sql, sql-server-2008, inner-join

我有两个表，表 1`City_Code, name, population`和表 2 `City_Code, Type`。我需要按城市类型汇总人口，所以我使用以下代码：

```
SELECT SUM(population) FROM Table1 
JOIN Table2 ON Table2.City_Code = Table1.City_Code
GROUP BY Table2.Type 
```

结果表如下所示

![结果](https://i.stack.imgur.com/FtQon.png)

确实有6个城市“类型”，总和是正确的，但数字不匹配。我用`sumif`excel检查了数据，实际的总和实际上是这样的：

![Excel](https://i.stack.imgur.com/JTs4J.png)

为什么 SQL 结果不在类型的正确群体中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:35:05.833

您的查询没有错误，因为它正在输出结果。只是结果的顺序与您的预期结果不同。尝试这个，

```
SELECT  Table2.Type, SUM(population) TotalPopulation 
FROM    Table1 JOIN Table2 ON Table2.City_Code = Table1.City_Code
GROUP   BY Table2.Type
ORDER   BY Table2.Type 
```

# css - CSS 表格列并形成表格的 x%

> ID：15996740
> 
> 赞同：1
> 
> 时间：2013-04-14T07:24:57.420
> 
> 标签：css

我正在准备 Asp.net 网站。在我的样式表上，我希望我的表具有这些属性：

```
table {
    width:100%;
    height:500px;
} 
```

表格的第一列应**占整个表格的 20%。** 我的第二列应该占表格的 80%。而且我不确定如何在 css 中设计不同的 2 列。但我认为应该是这样的：

```
table td.first {
}
table td.second {
} 
```

致以我的问候...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:34:54.690

通常以这种方式为表列提供 id：

```
<table id="my-table">
  <tr>
    <td id="first-column">... content ...</td>
    <td id="second-column">... content ...</td>
  </tr>
</table> 
```

然后您可以通过这种方式对 css 中的列进行寻址：

```
table#my-table {
  width: 100%;
  height: 500px;
}
table#my-table td#first-column {
  width: 20%;
}
table#my-table td#second-column {
  width: 80%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:34:24.927

如果我理解正确，您只是试图定位表中的特定列。只需给你`<td>`的 id 像：

`<td id="columnOne">`... ETC

您使用此语法在 CSS 中定位它们...

任何一个：

```
table td#columnOne { *styles* } 
```

或者简单地说：

```
#columnOne { *styles* } 
```

这种方法比使用伪类更安全、更兼容，我认为你正在尝试这样做，这将是：

```
table td:first-child { *styles* } 
```

和：

```
table td:nth-child(2) { *styles* } 
```

# java - 如何在 Amazon EC2 上部署 Eclipse Java Web 动态项目？

> ID：15996741
> 
> 赞同：13
> 
> 时间：2013-04-14T07:24:59.517
> 
> 标签：java, tomcat, amazon-ec2, web-deployment

我正在尝试创建一个能够与 Amazon RDS 通信的 Web 项目。我知道如何使用 JDBC 使 localhost 项目连接到 RDS。

但是，问题是我从未尝试过部署我的项目（例如，有人可以键入`somePage.com`，然后转到我的网页）。

我有一个**Amazon EC2 实例**，并且我已经编写了一个简单的 hello world jsp 页面。我能够编译它并使用安装的**Apache Tomcat Server运行****Eclipse Web 动态项目**，然后键入然后我可以看到我的 hello world 弹出。**`localhost:8080/somePage`**

 **但是，如何在这个 EC2 实例上部署我的项目？我使用的是 Windows Server 2012 版。

我的整个想法是，一旦我设置了一个 AMI 图像，我就可以使用自动缩放来使用该 AMI 图像缩放我的网页。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T08:14:24.637

请按照以下步骤操作：

1.  **在您的 Amazon EC2 实例上设置 Apache Tomcat。**
    *   通常你所要做的就是[下载当前版本](http://tomcat.apache.org/download-70.cgi)，解压缩，然后运行`apache-tomcat-folder\bin\startup.bat`​​. （您也可以下载安装程序并将其设置为 Windows 服务。查看[此链接](http://tomcat.apache.org/tomcat-7.0-doc/setup.html)了解更多详细信息）。
    *   确保在继续之前对其进行测试（在浏览器上打开其地址，例如`http://yourinstaceaddress.com:8080/`）。
2.  **导出您的 Web 应用程序`.war`文件**
    *   在 Eclipse 中，右键单击一个 Web 项目并选择 Export。然后在 Export 窗口中选择 WAR 文件，然后选择 Next。选择`.war`要导出的项目、文件名和文件夹。更详细的解释可以在[这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.webtools.doc.user/topics/twcrewar.html)和[这里找到（带图片）](http://www.eclipse.org/webtools/jst/components/j2ee/scenarios/px_testplan/px_export.html)。
3.  **将文件部署`.war`到您的 Tomcat 服务器**
    *   到目前为止，最简单的方法是将您的`.war`（比如说`myapp.war`）文件放在您的`apache-tomcat-folder\webapps\`文件夹中。
    *   还有其他方法，例如通过[Tomcat Manager](http://www.manydesigns.com/en/portofino/portofino3/3_1_x/installation-guide/deploying-on-tomcat#TOC-Using-the-Tomcat-Web-Application-Ma)。但它们可能很棘手，作为新用户，您应该避免使用它们。（不用担心：简单的方法可以用于生产部署）。
4.  **测试您的网络应用**
    *   访问网址：说你`.war`的名字是`myapp.war`。你应该访问`http://yourinstaceaddress.com:8080/myapp`

而已。如果您曾经编辑过应用程序，请重复步骤 2-4（但删除`webapps\myapp\`在执行步骤 3 之前创建的文件夹）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-13T15:22:17.780

[Boxfuse](https://boxfuse.com)完全符合您的要求。

对于您的 Java Web 应用程序，您实际上只需要执行：

```
boxfuse create my-tomcat-app -apptype=load-balanced
boxfuse scale my-tomcat-app -capacity=1-16:t2-micro:cpu25-75
boxfuse run my-tomcat-app-1.0.war -env=prod 
```

这将

1.  配置您的应用程序以使用 ELB
2.  将其设置为根据 CPU 使用率在 1 到 16 个 t2.micro 实例之间自动缩放（在 25% 及以下缩小，在 75% 及以上缩小）
3.  创建包含 Tomcat 的 AMI 和准备启动的应用程序
4.  创建 ELB
5.  创建具有正确端口的安全组
6.  创建自动伸缩组
7.  启动您的实例

任何后续更新都将作为零停机蓝/绿部署完成。

对于您的域，您可以简单地将您的 samepage.com DNS 记录映射到 ELB 的 CNAME。

更多信息：[https ://boxfuse.com/blog/auto-scaling](https://boxfuse.com/blog/auto-scaling)**

# html - intellij jump to html element by selector

> ID：15996750
> 
> 赞同：3
> 
> 时间：2013-04-14T07:26:17.710
> 
> 标签：html, intellij-idea, keyboard-shortcuts

I'm a big fan of IntelliJ. One thing I love about it is being able to jump to a file or method. Sometimes when I'm in an HTML file, though, I wish I had the ability to hit a hotkey and jump to an element in the HTML file by giving a jQuery selector, i.e. `Cmd`+`O` => `#form1` (and have it jump to `<form id=form1>` in the source...

Is this possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:07:59.587

`Ctrl`+`F12`适用于 HTML - 点击热键并开始输入选择器名称。

# web-services - Unable to web service tester page in net beans 7.1 using glassfish server

> ID：15996752
> 
> 赞同：5
> 
> 时间：2013-04-14T07:26:43.860
> 
> 标签：web-services, netbeans-7

Unable to open my web service tester page from net beans, i am getting a error (see the attached image).

But i am able to go to the tester page from the admin console with the same URL.

Is that any problem with creation of WSDL ?![enter image description here](https://i.stack.imgur.com/Lkj0g.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T14:28:57.633

我不完全确定这里发生了什么。我偶尔也会得到这个。取消部署，然后清理和构建项目以及重新部署总是倾向于为我解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T11:47:47.767

**您的问题已在[此](https://stackoverflow.com/questions/24905880/make-sure-the-service-has-been-deployed-successfully-and-the-server-is-runnig/24906228#24906228)地址得到解答。**

**回答 ：**

```
 <jvm-options>-Duser.language=tr-TR</jvm-options>
 <jvm-options>-Xrs</jvm-options>
 <jvm-options>-Dfile.encoding=UTF8</jvm-options>
 <jvm-options>-Dcom.sun.metro.soap.dump=true</jvm-options>
 <jvm-options>-Djavax.xml.accessExternalSchema=all</jvm-options> 
```

将以上代码添加“glassfish-4.0\glassfish\domains\domain1\config\domain.xml”目录。

**前任：**

**1-)**

```
.
.
.
<jvm-options>-Dfelix.fileinstall.bundles.startTransient=true</jvm-options>
<jvm-options>-Dfelix.fileinstall.disableConfigSave=false</jvm-options>
<jvm-options>-XX:NewRatio=2</jvm-options>
<jvm-options>-Duser.language=tr-TR</jvm-options>
<jvm-options>-Xrs</jvm-options>
<jvm-options>-Dfile.encoding=UTF8</jvm-options>
<jvm-options>-Dcom.sun.metro.soap.dump=true</jvm-options>
<jvm-options>-Djavax.xml.accessExternalSchema=all</jvm-options>
.
.
. 
```

**2-)**

```
.
.
.
<jvm-options>-Dfelix.fileinstall.bundles.startTransient=true</jvm-options>
<jvm-options>-Dfelix.fileinstall.disableConfigSave=false</jvm-options>
<jvm-options>-Duser.language=tr-TR</jvm-options>
<jvm-options>-Xrs</jvm-options>
<jvm-options>-Dfile.encoding=UTF8</jvm-options>
<jvm-options>-Dcom.sun.metro.soap.dump=true</jvm-options>
<jvm-options>-Djavax.xml.accessExternalSchema=all</jvm-options>
.
.
. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T06:47:40.230

如果部署和取消部署不起作用>>

去`tools->options`。

选择网络浏览器，代理设置中没有代理，然后单击测试连接。

如果连接是`OK`，则部署 Web 服务并进行测试。测试页面现在应该打开了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-27T11:35:22.963

我有这个问题，我解决了它..

*   清理并构建项目
*   部署项目
*   测试网络服务

打开 Web Service Tester 页面后。

# sprite - Using the same Compass sprite in different stylesheets

> ID：15996753
> 
> 赞同：8
> 
> 时间：2013-04-14T07:26:49.913
> 
> 标签：sprite, compass-sass, css-sprites

I'm using Compass to generate CSS sprites.

I found a way to define a sprite once and use it across different .scss files, but I'm not sure this is the right solution.

The best way I could find until now is:

*   create a `_variables.scss` partial file
*   define the sprite inside the `_variables.scss` partial file
*   import the `_variables.scss` partial in every .scss file

**Example**

_variables.scss file:

```
$siteSprite-spacing: 20px; 
@import "siteSprite/*.png"; 
```

firstPage.scss file:

```
@import "../variables.scss";

.close {
    @include siteSprite-sprite(close, true);
} 
```

secondPage.scss file:

```
@import "../variables.scss";

.viewMore {
    @include siteSprite-sprite(arrow, true);
} 
```

**And this works, but...**

The problem is that every time that Compass compiles the scss files (firstPage.scss, secondPage.scss) it reads the _variables.scss partial and then reads all the images, trying to generate the sprite each time.

The result is that the *compile* process ends up in this:

```
 create generated_images/siteSprite-s526a535d08.png
unchanged generated_images/siteSprite-s526a535d08.png
   create css/firstPage.css 
unchanged generated_images/siteSprite-s526a535d08.png
   create css/secondPage.css
unchanged generated_images/siteSprite-s526a535d08.png
   create css/thirdPage.css
unchanged generated_images/siteSprite-s526a535d08.png 
```

And this is extremely slow, because I have many pages and many files inside the siteSprite image folder.

How can I avoid this problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T13:24:37.920

我将解释我如何使用指南针精灵，希望这对你也有帮助。我通常会创建一个 _base.scss 部分文件，在其中放置所有通用的 @import 和 @include 以及我项目的任何通用 css 代码。在 _base.scss 中，我还添加了以下特定于 sprite 的代码（假设我保存图标的文件夹称为“icon”并且我的图标具有 .png 扩展名）：

```
@import "compass/utilities/sprites";
@import "icon/*.png";
@include all-icon-sprites; 
```

这个 _base.scss 是我在我的项目的任何 *.css.scss 文件（相当于您的“firstPage.scss”和“firstPage.scss”）中导入的第一个文件。

现在，要在 div 中使用这些精灵中的任何一个，我只需这样做：

```
#my_id (or .my_class) {
    @extend .icon-myicon;
} 
```

其中“myicon”是“icon”文件夹中一个 .png 文件的名称。

这个[指南针教程](http://compass-style.org/help/tutorials/spriting/)实际上很有帮助，所以你可能想看看。

如果您担心某些文件可能会被多次导入，您可以尝试使用插件[compass-import-once](https://github.com/chriseppstein/compass/tree/master/import-once)。

# ruby-on-rails - 如何在ember js中使用belongs_to获取用户对象？

> ID：15996757
> 
> 赞同：2
> 
> 时间：2013-04-14T07:27:28.263
> 
> 标签：ruby-on-rails, ember.js

我有两个模型`Recipe`和`User`. 我无法在配方中获取用户对象。我究竟做错了什么？

```
App.Recipe.find(1).get('title') // Returns "recipe01 title". All works fine.

App.Recipe.find(1).get('user') // Returns null 
```

用户.js.coffee

```
App.User = DS.Model.extend
   email: DS.attr('string')
   recipes: DS.hasMany('App.Recipe') 
```

recipe.js.coffee

```
App.Recipe = DS.Model.extend
  user: DS.belongsTo('App.User')
  title: DS.attr('string') 
```

我的 json 数组

```
{
  recipe: {
    id: 1,
    title: "recipe01",
    user: {
      id: 1,
      name: "ejiqpep",
      email: "ejiqpep@gmail.com",
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:56:08.547

默认情况下，Ember Data 期望通过键引用依赖记录。然后，您可以旁加载额外的记录，或者让 Ember 从其 API 端点延迟加载它们。

```
{
  recipe: {
    id: 1,
    title: "recipe01",
    user_id: 1
  },
  user: {
    id: 1,
    name: "ejiqpep",
    email: "ejiqpep@gmail.com"
  }
} 
```

但是，您也可以指示适配器嵌入记录。

有两种类型的嵌入记录加载`embedded: 'always'`，其中 Ember 将接收和发送嵌入对象的任何更改。

```
App.Adapter.map 'App.Recipe',
  user: 
    embedded: 'always' 
```

或者`embedded:'load'`Ember 将从 JSON 加载嵌入对象但会将更改保存回 API 作为单独的对象。

```
App.Adapter.map 'App.Recipe',
  user:
    embedded: 'load' 
```

您想选择三个选项中的哪一个取决于您。嵌入式对象是最近才实现的，并且存在一些问题（请参阅 Github 上的 Ember-Data 问题），但无需对现有服务器进行任何更改即可工作。

# php - how get a link from attachment product in prestashop 1.5.x?

> ID：15996758
> 
> 赞同：1
> 
> 时间：2013-04-14T07:27:31.163
> 
> 标签：php, prestashop

The attachment is a picture and I want to show on the product page.How do I get the src for this picture?

```
<a id="single_image" href="{$img_dir}tabel_marimi/tabel_marimi.jpg"><img style="width:25px;height:20px;" src="{$img_dir}tabel_marimi/table_mini.jpg" alt="" /></a> 
```

src must be link to product attachment, not a general one for all products

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-06T07:20:21.313

我知道这是一个老问题，但如果有人遇到与 Prestashop 1.6.x 相同的问题，这就是它的完成方式：

```
{if $attachments}
    {foreach from=$attachments item=attachment}
        {$attachment.file_name} // This is the picture name
    {/foreach}
{/if} 
```

只需`src`将`img`标签的 指向路线并`$attachment.file_name`在末尾附加 。

`$attachment`您可以通过 make查看 的所有属性`{print_r($attachment)}`。

# python - wxPython TaskBarIcon key binding

> ID：15996761
> 
> 赞同：1
> 
> 时间：2013-04-14T07:27:42.897
> 
> 标签：python, wxpython

Is it possible to have a TaskBarIcon class constantly checking for key presses? So I have an icon in the taskbar, and it's waiting for the user to press say, Alt+S, once they do it triggers a function?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:27:21.753

不，TaskBarIcon 只检测鼠标事件。您必须以某种方式连接到操作系统本身才能捕捉按键。在 Windows 上，您将使用 PyWin32 包之类的东西。另请参阅 StackOverflow 的以下答案：

*   [是否有跨平台的 python 低级 API 来捕获或生成键盘事件？](https://stackoverflow.com/questions/676713/is-there-a-cross-platform-python-low-level-api-to-capture-or-generate-keyboard-e)
*   [在python中检测按下了哪些键](https://stackoverflow.com/questions/694296/detect-in-python-which-keys-are-pressed)

第二个链接提到了可能对您有用的[PyKeyLogger 项目。](http://sourceforge.net/apps/mediawiki/pykeylogger/index.php?title=Main_Page)但是，它只支持 Windows 和 Linux。

# android - 模拟 Android 应用程序内存溢出

> ID：15996768
> 
> 赞同：3
> 
> 时间：2013-04-14T07:28:56.310
> 
> 标签：android, memory-management, emulation

我有一个登录到服务器的 Android 应用程序，获取会话 ID 并在应用程序运行时使用它。会话 ID 存储在`SharedPeferences`.

出于某种原因，在一台设备（旧的三星 Galaxy S）上，有时当应用程序唤醒时，会话 ID 消失了 - 它无法从 SharedPreferences 中检索，而是 - 返回 null。这可能发生在大量使用手机之后，需要 Android 释放内存资源。请注意，应用程序仍然存在，它没有从头开始重新启动 - 我的活动只是被 onResume 调用。

如果我能在模拟器上重现这种行为，我会非常高兴。有没有办法让模拟器做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T07:41:32.360

如果您的活动在这些情况下也没有得到 onCreate，我会感到惊讶。在模拟器上测试这种事情的一种策略是暂停应用程序中的所有活动，然后使用 adb 终止进程。这基本上就是框架在资源不足时所做的事情。当您恢复活动时，它会创建一个新进程并尝试从暂停时保存的状态重新初始化您的活动。

# postgresql - PostgresQL windows 安装程序-空白屏幕-

> ID：15996770
> 
> 赞同：1
> 
> 时间：2013-04-14T07:29:13.480
> 
> 标签：postgresql, windows-installer, windows-vista, postgresql-9.2

一直在尝试在我的桌面（Vista x32）上安装 Postgres 版本 9.2.4-1。下载了安装程序，但在运行 .exe 时会出现一个空白窗口，其中安装程序名称为标题。

这很奇怪，因为安装程序在我的办公室电脑上运行良好，也运行 vista x32。我试过谷歌搜索，但没有很多解决方案。我尝试了以下步骤：-

1.  重新下载了安装程序。没有骰子。
2.  下载了旧版本的安装程序和 x64 版本（同样的问题）
3.  完全更新的远景。
4.  确保管理员权限
5.  尝试从命令行运行。
6.  禁用 UAC 和 windows 防火墙。
7.  事件日志没有显示任何内容，%temp% 文件夹中也没有 install-postgresql.log。
8.  禁用的防病毒软件
9.  遵循常见安装错误的常见问题解答。

我的用户变量路径：

C:\RailsInstaller\Git\cmd;C:\RailsInstaller\Ruby1.9.3\bin;C:\Program Files\Java\jdk1.7.0_15\bin;C:\Program Files\MySQL\MySQL Server 5.6\lib

一直在疯狂地试图解决这个问题！请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:26:44.247

由于在您的情况下安装挂起\不完整，因此安装日志名称应为 bitrock_installer.log 或 bitrock_installer_xxx.log，其中 xxx 是一个数字（安装尝试的进程 ID）。请检查该文件的 %temp% 目录。这将记录有关安装的各种数据，在故障排除时非常有用。如果安装成功完成，该日志将称为 install-postgresql.log。如果不是，安装程序可能无法重命名它，在这种情况下，名称将是 bitrock_installer.log 或 bitrock_installer_xxx.log，其中 xxx 是一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:53:56.070

**解决了！**

> 右键单击.exe
> 以管理员身份运行

显然在管理员帐户上运行安装程序是不够的。这很奇怪，因为我可以在我的办公室电脑上运行安装程序而无需跳过这个额外的环节。不敢相信我只是在这个非问题上花了几个小时！

感谢您的快速回复！

# prolog - 为什么二叉树实现为嵌套项，而不是嵌套列表？

> ID：15996772
> 
> 赞同：1
> 
> 时间：2013-04-14T07:29:14.603
> 
> 标签：prolog

我知道这是一个模糊的问题，但仍然是：使它们比列表更适合嵌套的术语是什么？还是列表（内部）是嵌套术语的微不足道的情况？

（我意识到我可以“使用源代码”，例如 SWI-Prolog，但如果指向正确方向的指针将不胜感激）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:19:29.453

如果您事先不知道元素的数量，则使用列表是有意义的。如果很明显每个实体都有固定数量的元素（就像二叉树中的节点一样），那么使用具有固定数量的术语比列表更节省内存。例如考虑结构：

```
node(Name, Left, Right) 
```

这总共需要 4 个存储单元：一个用于函子，三个用于参数。

使用列表（在这种情况下`[Name, Left, Right]`）总共占用大约两倍的内存：

```
'.'(Name, '.'(Left, '.'(Right, []))). 
```

3 个用于列表函子 ('.') 的单元格，1 个用于 的单元格`[]`，以及三个用于参数的单元格。

也很挑剔：您当然知道，列表也是一个术语。不是列表、数字、对等的术语有时称为“结构”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:00:15.340

如前所述，Prolog 列表只是两个术语之上的语法糖：'.'/2 和'[]'。有关详细信息，请参阅此答案：[Flatten a list in Prolog](https://stackoverflow.com/questions/9059572/flatten-a-list-in-prolog/9069057#9069057)

# javascript - 无法在 ajax 中处理 302 重定向，为什么？

> ID：15996779
> 
> 赞同：54
> 
> 时间：2013-04-14T07:31:25.067
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, http-headers

我有一个使用表单身份验证用 asp.net mvc 编写的后端服务器。当用户未通过身份验证时，服务器会自动发送 302 重定向到登录操作并返回登录页面。

在客户端，我有一个项目列表。此列表仅供经过身份验证的用户访问。在页面上，我有一个使用 Ajax（jQuery 的 $.ajax 函数）刷新列表的按钮。

现在，我的问题是当身份验证票超时并且用户单击刷新按钮时：

*   我的函数发送一个 ajax 请求以获取刷新的列表
*   服务器检测到身份验证票证无效并发出 302 重定向。
*   浏览器**自动**处理该 302 响应并强制我的 ajax 函数向 Login 操作发送另一个 ajax 请求，最终结果是一个状态为 200 的 HTML。我的脚本很困惑，因为该列表也是一个状态为 200 的 HTML。

我想要的是当身份验证票超时并且用户单击刷新按钮时，我应该能够检测到并显示一条消息，要求用户登录。

我尝试通过在登录操作中添加自定义标头 (IS_LOGIN) 并在我的 ajax 响应中检查它来解决此问题。但这不是一个好的解决方案。

所以我的问题是：

*   处理这个问题的最佳方法是什么？
*   为什么浏览器不让我们的脚本处理 302 响应？并且只是自动强制我们的 ajax 创建另一个请求。这是浏览器或jquery库的问题？这有什么原因吗？（安全，...）

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-14T08:03:31.803

当它是 XHR 时，您不应该重定向呼叫，而是用 a 响应`401 Unauthorized`并在您的回调中处理它。我不知道 ASP.NET，但我对 Spring Security 做了类似的事情。

继承人的概念：

*   获取认证状态
*   检查标题`X-Requested-With: XMLHttpRequest`
*   当找到且未通过身份验证时，回复`401 Unauthorized`
*   未找到且未经过身份验证的重定向。

底线是在某些情况下，XHR 调用需要与其他 HTTP 请求不同的处理方式。如果相同的资源位于另一个位置，您应该只重定向 XHR。

### 回答你的问题

您无法使用 XHR 回调处理重定向，因为浏览器会自动处理它们。您只会取回重定向位置的内容。

# arrays - 如何将数组包含在条件 if 中？

> ID：15996785
> 
> 赞同：0
> 
> 时间：2013-04-14T07:33:00.860
> 
> 标签：arrays, conditional

例如，我有以下代码：

```
<?php 

$options = array( 

    array(
        "type" => "section",
        "icon" => "acera-icon-preference",
        "title" => "General Settings",
        "id" => "general",
        "expanded" => "true"
    ),
array(
        "under_section" => "ajax_login",
        "type" => "checkbox",
        "name" => "Who's Online Options",
        "id" => array("tigu_whosonline_list", "tigu_whosonline_avatar"),
        "display_checkbox_id" => "tigu_show_whosonline",
        "img_desc" => "", 
        "options" => array("Who's Online List", "Who's Online Avatars"),
        "desc" => "",
        "default" => array("checked", "checked")

) );

?> 
```

有更多数组，但我缩短了代码以节省空间。问题是：我怎样才能只包含以下代码

```
 array(
            "type" => "section",
            "icon" => "acera-icon-preference",
            "title" => "General Settings",
            "id" => "general",
            "expanded" => "true"
        ), 
```

在有条件的情况下**，如果**有人认为像这样的代码（会出错）：

```
if(function_exists('bp_is_active') ): 

  array(
                "type" => "section",
                "icon" => "acera-icon-preference",
                "title" => "General Settings",
                "id" => "general",
                "expanded" => "true"
            ),

endif; 
```

函数 bp_is_active 它检查是否安装了 BuddyPress 插件。仅当安装了 BuddyPress 插件时，我才需要在我的 wp 管理面板上显示该代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:42:50.913

您可以使用`?:`三元条件运算符：

```
$options = array(
  function_exists('bp_is_active') // condition
    ? array(...stuff...)          // if true
    : array(),                    // if false
  ...more arrays...
); 
```

如果条件为假，那将使用一个空数组。如果你什么都不想要（而不是`array()`），你需要更复杂的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:45:23.693

我认为你只需要分号`(;)`，以下代码是有效的：

```
 if(function_exists('bp_is_active') ): 
     array(
            "type" => "section",
            "icon" => "acera-icon-preference",
            "title" => "General Settings",
            "id" => "general",
            "expanded" => "true"
          ); // <<--here

    endif; 
```

或没有`endif`：

```
 if(function_exists('bp_is_active') ){ 
     array(
            "type" => "section",
            "icon" => "acera-icon-preference",
            "title" => "General Settings",
            "id" => "general",
            "expanded" => "true"
          ); // <<--here
     } 
```

# multithreading - 如何在我的方法上执行我的 RETURN 直到 THREAD 被处理？

> ID：15996789
> 
> 赞同：0
> 
> 时间：2013-04-14T07:33:46.313
> 
> 标签：multithreading, methods, return

我的类中有一个方法返回在线程上处理的 STRING，我需要等待解决线程上的工作，直到执行 RETURN。有什么办法解决吗？？我可以举一个简单的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:43:49.437

如果 java 那么 Callable 接口正是为此完成的：

```
 class CalculateSomeString implements Callable<String>{
     @Override
     public String call() throws Exception {
         //Simulate some work that it takes to calculate the String
         Thread.sleep(1000);
         return "CoolString";
     }
 } 
```

以及运行它的代码

```
public static void main(String[] args) throws InterruptedException, ExecutionException {
    ExecutorService service = Executors.newFixedThreadPool(1);
    Future<String> future = service.submit(new CalculateSomeString());
    //this will block until the String has been computed
    String result = future.get();
    service.shutdown();
    System.out.println(result);
} 
```

# windows - 将文件保存到 App Data 文件夹

> ID：15996792
> 
> 赞同：1
> 
> 时间：2013-04-14T07:34:04.500
> 
> 标签：windows, vb.net, visual-studio-2012, appdata, virtualstore

我在 Visual Studio 2012 Ultimate 中编写了一个 Visual Basic.Net 应用程序。当此应用程序安装到`Program Files`文件夹时，保存文件时，它们位于以下位置：

```
C:\Users\[Username]\AppData\Local\VirtualStore\Program Files\[Company Name]\\[Application Name] 
```

如何指定将文件保存在以下目录中：

```
C:\Users\[Username]\AppData\[Company Name]\\[Application Name] 
```

文件夹（基本上，不是 VirtualStore 文件夹）？

我是否需要在 Windows 中注册此应用程序才能执行此操作？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:52:23.570

首先，您使用的是什么安装软件？

其次，如果您要将应用程序文件保存在 AppData 目录中，那么您应该选择将应用程序保存在 Roaming、Local 或 LowLocal 目录中。在其他目录可用的地方开始创建新目录是不“合适的”，特别是因为漫游、本地和 LowLocal 目录或多或少是为了保存应用程序的数据（这就是调用父目录的原因“应用程序数据”）。

# haskell - Haskell SDL：找不到 mingw32.dll

> ID：15996796
> 
> 赞同：6
> 
> 时间：2013-04-14T07:35:03.237
> 
> 标签：haskell, sdl, cabal, mingw32

我终于在 Windows 上安装了[Haskell SDL 绑定。](http://hackage.haskell.org/package/SDL)使用这个：

```
> $env:Path += ";C:\SDL;C:\SDL\bin;C:\SDL\include;C:\SDL\lib"
> cabal install SDL --extra-include-dirs="C:\SDL\include" --extra-lib-dirs="C:\SDL\lib" 
```

只要为配置脚本安装了 Cygwin，它就可以工作。但是，我写了一个小测试脚本：

```
import Graphics.UI.SDL as SDL
import Control.Monad (void)
import Control.Exception (bracket_)

main = bracket_ (SDL.init [InitEverything]) quit $ do
  screen <- setVideoMode 800 600 0 []
  SDL.flip screen
  void $ waitEvent 
```

现在尝试这个会给我这个错误消息：

```
*Main> :main
Loading package SDL-0.6.4 ... <interactive>: mingw32: Cannot find specified module.
can't load .so/.DLL for: mingw32.dll (addDLL: could not load DLL) 
```

现在我正在寻找它，`mingw32.dll`但我在我的电脑上找不到它，虽然我安装了 MinGW32。有人在这里有过经验吗？

使用`SDL-0.6.4`,`GHC 7.4.2`从`Haskell Platform 2012.4.0.0`. Windows 7 64 位。

**补充**：我现在也按照[A Haskell Adventure In Windows](http://www.animal-machine.com/blog/2010/04/a-haskell-adventure-in-windows/)推荐的方式进行了尝试，结果也一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T15:00:40.393

我使用 MSYS/MinGW 构建，我遇到了完全相同的问题。在摆弄之后，我发现`-lmingw32`正在使用该标志（在文件 sdl-config 中），这似乎暗示了 mingw32.dll。我简单地删除了这个标记，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:03:40.230

这可能是 64 位与 32 位的问题。尝试将该 .dll 复制到：

*   64 位版本的 Windows：复制到 c:\windows\syswow64
*   32位版本的Windows：复制到c:\windows\system32

[这对我的 FTGL 有帮助 - 见这里](http://noamlewis.wordpress.com/2012/12/16/cabal-install-ftgl-on-windows-and-getting-exes-that-use-it-to-work/)

# ios - iOS：如何在表格视图下方添加工具栏或任何页脚？

> ID：15996799
> 
> 赞同：0
> 
> 时间：2013-04-14T07:35:36.617
> 
> 标签：ios, viewcontroller, cs193p

我已经按照目标 C 的 CS193p 介绍课程。我现在有一个分组表视图，我的视图控制器是一个 CoreDataTableViewController（来自 CS193p 类），它基本上只是 UITableViewController 的一个子类，实现了 FetchedResultsControllerDelegate。在我的应用程序中连接了几个屏幕，因此如果您在第一个表中按下一行，您将进入一个新屏幕，其中包含该主类别的所有子类别等。所有屏幕都是此 CoreDataViewController 的子类。

我现在对如何在一个特定的表格视图中的屏幕最底部添加工具栏感到困惑。我想我必须插入一个新视图，其中包含一个表格视图和一个工具栏。我不明白如何连接所有内容以使整个 TableView 真正起作用？在非常“顶级”控制器之前是我的 CoreDataTableViewController（我已经继承并实现了我自己的方法），但现在我不知道如何继续？如何从父视图控制器获取值到这个嵌入式表视图控制器，然后再到他的子视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:43:08.643

如果你有一个基于导航的应用程序，你可以通过调用来设置一个工具栏：

```
[self.navigationController setToolbarHidden:NO]; 
```

# scala - value === 不是类型参数 TKey 的成员（使用 Squeryl）

> ID：15996802
> 
> 赞同：5
> 
> 时间：2013-04-14T07:35:59.807
> 
> 标签：scala, generics, squeryl

我正在尝试使用出色的 squeryl ORM 框架编写一个简单的 BaseDao 类。

但是，我在使用通用类型键时遇到了一个问题。当我尝试在我的通用 BaseDao 类中使用 '===' 运算符时出现编译错误。编译错误是：*value === is not a member of type parameter TKey*

我的 dao 类及其麻烦的方法定义为：

```
import org.squeryl.PrimitiveTypeMode._
import org.squeryl._

abstract class BaseDao[TKey, T <: BaseEntity[TKey]](val table: Table[T]) {

  def delete(entity: T) : Boolean = {
    table.deleteWhere(record => record.id === entity.id) //This is where I get the compile error
  }
} 
```

BaseEntity 定义为：

```
abstract class BaseEntity[TKey] extends KeyedEntity[TKey] 
```

我也在我的 Dao 类中导入 PrimitiveTypeMode ......我的第一个想法是 TKey 需要被限制为 === 运算符被限制的任何内容，但是在查看源代码时，似乎没有任何明确的限制运营商，所以我有点失落。

运算符在此处的 squeryl 源中定义：[https ://github.com/max-l/Squeryl/blob/master/src/main/scala/org/squeryl/dsl/TypedExpression.scala](https://github.com/max-l/Squeryl/blob/master/src/main/scala/org/squeryl/dsl/TypedExpression.scala)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T16:09:48.457

我不认为这可以在 Squeryl 中完成。Squeryl 不支持通用类型的键——它使用 Java 反射来获取它们的类型，该类型在运行时被擦除，因此认为它们是 Object 类型。

# c# - 从 c# 发送一个 asp.net 页面

> ID：15996803
> 
> 赞同：0
> 
> 时间：2013-04-14T07:36:48.607
> 
> 标签：c#, asp.net, email, sendmail

我想从 c# 邮寄一个 asp.net 页面。好吧，它受到了广泛的质疑，我在 stackoverflow 上也看到了很多类似的问题。但我有几个问题我没有得到解决方案

**What Itried**
很多例子。下面是几个

```
using (System.IO.StreamReader reader = System.IO.File.OpenText( Server.MapPath("~/About.aspx"))) // Path to your 
      {                                                         // HTML file
        string fromAddress = "from@yahoo.com";
        string toAddress = "to@yahoo.com";
        System.Net.Mail.MailMessage myMail = new System.Net.Mail.MailMessage(fromAddress, toAddress);
        myMail.Subject = "HTML Message";
        myMail.IsBodyHtml = true;
        myMail.Body = reader.ReadToEnd();  // Load the content from your file...
                //...

        System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.mail.yahoo.com");
        smtp.Credentials = new System.Net.NetworkCredential("from@yahoo.com", "password");
        smtp.Send(myMail);

        } 
```

但这给了我这个输出。 ![在此处输入图像描述](https://i.stack.imgur.com/QKHwd.png)

好吧，您注意到它没有CSS。
我可以邮寄整个 asp.net 页面还是需要用内联 css 用 c# 编写代码？还是我需要创建一个带有模式的控件并发送它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:52:54.123

您正在尝试发送未处理的 aspx 文件。这不可能成功。您需要处理此页面（我不记得使用什么方法），并且不要忘记内联 css。所以基本上你需要一个新的页面。如果你需要一个新页面，你可以用纯html来做，而不是用asp。

# python - 在python中，是否可以在一行上编写一个while循环及其所有内容？

> ID：15996805
> 
> 赞同：0
> 
> 时间：2013-04-14T07:37:06.047
> 
> 标签：python

我问是因为我试图在我的朋友频道中弄乱一个 irc 机器人，并且我一生都无法让它工作

基本上这个机器人是 phenny，它有一个 python 解释器，我试图让它打印出字符串“linux open source linux open source”100次

```
x = 9000; while x >1: x = x - 1; print "linux" 
```

和

```
x=9000; while x>0: print 'linux'; x = x-1 . 
```

到目前为止，我已经尝试过，我不确定如何将这一切集中在一条线上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T07:41:03.937

```
for i in range(0, 100): print "linux open source" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T07:41:27.260

```
for j in range(100): print 'linux'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T07:45:19.443

使用`exec`你可以在一行中做任何你想做的事情，虽然这非常危险并且非常hacky（永远不要在真实代码中这样做！），但它实际上回答了你的问题，即“*在一行上**编写一个**while**循环及其所有内容？”*

```
exec"x=10\nwhile x>0: print x; x-= 1" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T07:45:44.950

如您所知，python 是一种解释器语言。代码应逐行编写。While 循环在条件之后需要 5 个空格。即，循环内的每条指令和代码前面至少应该有 5 个空格。代码应逐行编写。您的代码将无法正常工作，因为您违反了规则。

# matlab - 以其他函数为变量的函数

> ID：15996812
> 
> 赞同：0
> 
> 时间：2013-04-14T07:38:56.757
> 
> 标签：matlab, octave

我必须以八度音阶编写一个函数，形式为 f(fun,x,m)，其中 fun 是另一个函数，但我对此有疑问，我该怎么做？（将函数作为变量）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T07:51:41.123

您可以使用“功能句柄”。

根据[这里](http://www.mathworks.in/help/matlab/ref/function_handle.html)给出的文章，

> handle = @functionname % 返回指定 MATLAB® 函数的句柄。

函数句柄是一个 MATLAB 值，它提供了一种间接调用函数的方法。您可以在调用其他函数（通常称为函数函数）时传递函数句柄。您还可以将函数句柄存储在数据结构中以供以后使用（例如，作为句柄图形回调）。函数句柄是标准 MATLAB 数据类型之一。

下面的示例为内置`humps`函数创建一个函数句柄并将其分配给变量`fhandle`。

```
fhandle = @humps; 
```

现在您可以像传递任何参数一样将句柄传递给另一个函数。此示例将刚刚创建的函数句柄传递给`fminbnd`，然后在区间内最小化`[0.3, 1]`。

```
x = fminbnd(fhandle, 0.3, 1)
x =
    0.6370 
```

# php - PHP登录表单重定向到离线，iPhone Web App

> ID：15996814
> 
> 赞同：1
> 
> 时间：2013-04-14T07:39:01.830
> 
> 标签：php, iphone, html, forms, hybrid

我有一个带有登录表单的离线 html 文档。

它通过 POST 将信息发送到我的服务器（在线）上的“login.php”（检查您的用户名和密码，并启动会话）。

在那个 php 文件中，我使用它来“重定向”到您登录的页面：

```
header('Location: index.php'); 
```

所以现在它重定向到我服务器上的另一个 php 文件 (index.php)，但它需要重定向回一个`<<kind of web app but offline>>`名为 index.html 的离线 HTML 文件（即在该混合应用程序中）。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:52:56.453

你不能，这种方法有几个问题。

首先，您有一个根本的安全设计缺陷，因为每个人都可以直接访问那些静态离线页面，从而绕过您的登录。

其次，您无法从服务器直接访问客户端的本地内容。这将是客户端浏览器中的一个巨大安全漏洞，因为它允许任何服务器在用户不知情的情况下访问本地内容！这显然仅适用于您使用“普通”浏览器的情况。如果您使用自己的逻辑实现自己的 http 客户端/自己的浏览器，情况会有所不同。在这种情况下，您可以自由地做任何您想做的事情。例如，您可以简单地发送一个自定义标头并对其做出反应。但显然实现自定义浏览器并非易事，尽管当您重用现有组件时肯定是可能的。

也就是说，如果这确实不适用于手机上的标准浏览器，您可能想尝试一下。由于您使用 iPhone，我永远不会依赖其中的任何软件来保证安全。请注意，通常您不仅可以像使用相对路径那样使用重定向标头，还可以使用绝对 url。那么如果你只是重定向到一个文件 url 会发生什么呢？

```
header('Location: file://some/folder/file.static'); 
```

# objective-c - 打开 iPhone 相机？

> ID：15996816
> 
> 赞同：1
> 
> 时间：2013-04-14T07:39:08.140
> 
> 标签：objective-c

我们需要打开 iPhone 相机，拍摄将保存到相机胶卷的图像。

我在这里阅读了许多示例，它们都打开了`UIImagePickerView`. 除了我不明白为什么我必须打开选择器视图才能打开相机这一事实之外，我就是不能那样做——我不想要选择器视图，因为我有我们制作的装扮相簿，而且我们只需在其中有一个小按钮，即可打开相机拍摄图像。无需打开它上面的任何其他视图。

是否可以在没有覆盖我场景的pickerview的情况下使用相机？或者我可以将用户引导到相机应用程序，然后将他带回我的应用程序？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:48:45.787

代替高级（即Apple 提供UI 元素）类，您必须转到更基础（较低）级别的API，即[AVCaptureDevice](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureDevice_Class/)和AVCaptureDeviceInput。

[Apple在他们的 AVCam 项目中](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)提供了一些不错的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:49:17.730

如果您想在您的应用程序中显示相机流而`UIImagePickerController`不是您应该使用`AVFoundation`框架。

这里有一些示例和教程：

[与 AVFoundation 合影](http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/)

[定制相机](http://developer.appcelerator.com/question/145399/ios-module-with-custom-camera-view-using-avfoundation)

[显示相机](http://www.musicalgeometry.com/?p=1273)

# javascript - 如何用jquery更改输入值？

> ID：15996826
> 
> 赞同：-1
> 
> 时间：2013-04-14T07:40:14.880
> 
> 标签：javascript, jquery

在 html 表单中，我有一个文本类型的输入，然后选择带有几个选项的菜单！

我想将输入的值更改为该选项值我从选择菜单中选择它我想我可以使用 jQuery 或 js 来完成

例子：

```
<input type="text" name="title" value="some text">
<select onchange="onCategoryChange(this)" name="catlist[]">
<option value="1" style="color: black">text1</option>
<option value="2" style="color: black">text2</option>
<option value="3" style="color: black">text3</option>
<option value="4" style="color: black">text4</option>
</select> 
```

我想你明白输入是标题，选项是类别！
如果有人选择 value=1 的选项，那么输入的值将是“text1”
我希望标题和类别的值相同！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:03:39.163

```
$("select[name='catlist[]']").change(function () {
    $("#inputID").val($(this).find("option:selected").text());
}); 
```

[**在这里演示**](http://jsfiddle.net/chKnK/)

供参考

来自[**:checked Selector API Docs**](http://api.jquery.com/checked-selector/#entry-longdesc)

> 选择`:checked`器适用于复选框和单选按钮。
> 对于选择元素，使用`:selected`选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:42:42.670

```
$("select").change(function(){
    $("input").val($(this).find("option:checked").text());
}); 
```

[http://jsfiddle.net/DerekL/QMXEn/](http://jsfiddle.net/DerekL/QMXEn/)

# c - 逐行分析 i386 汇编函数...

> ID：15996827
> 
> 赞同：0
> 
> 时间：2013-04-14T07:40:20.197
> 
> 标签：c, assembly

嗨，我是汇编和操作系统领域的新手。是的，这是我的作业，我陷入了 i386 手册的黑暗中。请帮助我或给我一些提示..这是我必须逐行分析的代码。该功能是 EOS（教育操作系统）的一部分，用于处理 hal（硬件抽象层）中的中断请求。我做了“objdump -d interrupt.o”并得到了这个汇编代码。当然在 i386 中。

```
00000000 <eos_ack_irq>:
   0:   55                      push   %ebp  ; push %ebp to stack to save stack before
   1:   b8 fe ff ff ff          mov    $0xfffffffe,%eax  ; what is this??
   6:   89 e5                   mov    %esp,%ebp   ; couple with "push %ebp". known as prolog assembly function.   
   8:   8b 4d 08                mov    0x8(%ebp),%ecx ; set %ecx as value of (%ebp+8)...and what is this do??
   b:   5d                      pop    %ebp ; pop the top of stack to %ebp. i know this is for getting back to callee..
   c:   d3 c0                   rol    %cl,%eax  ; ????? what is this for???
   e:   21 05 00 00 00 00       and    %eax,0x0  ; make %eax as 0\. for what??
  14:   c3                      ret    ; return what register??

00000015 <eos_get_irq>:
  15:   8b 15 00 00 00 00       mov    0x0,%edx
  1b:   b8 1f 00 00 00          mov    $0x1f,%eax
  20:   55                      push   %ebp
  21:   89 e5                   mov    %esp,%ebp
  23:   56                      push   %esi
  24:   53                      push   %ebx
  25:   bb 01 00 00 00          mov    $0x1,%ebx
  2a:   89 de                   mov    %ebx,%esi
  2c:   88 c1                   mov    %al,%cl
  2e:   d3 e6                   shl    %cl,%esi
  30:   85 d6                   test   %edx,%esi
  32:   75 06                   jne    3a <eos_get_irq+0x25>
  34:   48                      dec    %eax
  35:   83 f8 ff                cmp    $0xffffffff,%eax
  38:   75 f0                   jne    2a <eos_get_irq+0x15>
  3a:   5b                      pop    %ebx
  3b:   5e                      pop    %esi
  3c:   5d                      pop    %ebp
  3d:   c3                      ret    

0000003e <eos_disable_irq_line>:
  3e:   55                      push   %ebp
  3f:   b8 01 00 00 00          mov    $0x1,%eax
  44:   89 e5                   mov    %esp,%ebp
  46:   8b 4d 08                mov    0x8(%ebp),%ecx
  49:   5d                      pop    %ebp
  4a:   d3 e0                   shl    %cl,%eax
  4c:   09 05 00 00 00 00       or     %eax,0x0
  52:   c3                      ret    

00000053 <eos_enable_irq_line>:
  53:   55                      push   %ebp
  54:   b8 fe ff ff ff          mov    $0xfffffffe,%eax
  59:   89 e5                   mov    %esp,%ebp
  5b:   8b 4d 08                mov    0x8(%ebp),%ecx
  5e:   5d                      pop    %ebp
  5f:   d3 c0                   rol    %cl,%eax
  61:   21 05 00 00 00 00       and    %eax,0x0
  67:   c3                      ret 
```

这是预组装的C代码

```
/* ack the specified irq */
void eos_ack_irq(int32u_t irq) {
    /* clear the corresponding bit in _irq_pending register */
    _irq_pending &= ~(0x1<<irq);
}

/* get the irq number */
int32s_t eos_get_irq() {
    /* get the highest bit position in the _irq_pending register */
    int i = 31;
    for(; i>=0; i--) {
        if (_irq_pending & (0x1<<i)) {
            return i;
        }
    }
    return -1;
}

/* mask an irq */
void eos_disable_irq_line(int32u_t irq) {
    /* turn on the corresponding bit */
    _irq_mask |= (0x1<<irq);
}

/* unmask an irq */
void eos_enable_irq_line(int32u_t irq) {
    /* turn off the corresponding bit */
    _irq_mask &= ~(0x1<<irq);
} 
```

所以这些函数会确认和获取以及屏蔽和取消屏蔽中断请求。我被困在第一个。因此，如果您足够仁慈，请给我一些提示或答案来分析第一个功能吗？我会试着找其他人……我很抱歉又做了一个作业……（我的助教看起来不像电子邮件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:55:49.130

`21 05 00 00 00 00`(that `and`) 实际上是一个 and 带有一个内存操作数 (即`and [0], eax`)，AT&T 语法掩盖了它（但从技术上讲，它确实这么说，注意没有 $ 符号）。这样更有意义（偏移量 0 表明您在反汇编之前没有链接代码）。

`mov $0xfffffffe, %eax`正在做它看起来正在做的事情（请注意， 0xffffffffe 是除了最低位之外的所有内容），这意味着该函数已像这样实现：

```
_irq_pending &= rotate_left(0xFFFFFFFE, irq); 
```

保存`not`操作。它必须在那里进行轮换而不是移位，以便在必要时使低位为 1。

# c# - 在意外情况下关闭会话

> ID：15996833
> 
> 赞同：0
> 
> 时间：2013-04-14T07:40:58.367
> 
> 标签：c#, php, session

我在 PHP 中建立了一个会话机制。当应用程序关闭时，它会向服务器发送关闭会话请求。我的问题是如果应用程序崩溃或互联网连接失败，我如何将会话标记为关闭。服务器如何知道它？我想到了一项从每个应用程序对服务器执行 ping 操作的工作，但即使它每隔一段时间发生一次，它看起来也太重了。我的应用程序在 c# 中。感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:50:57.187

> 我的问题是，如果应用程序崩溃或互联网连接失败，我如何将会话标记为已关闭。服务器怎么知道呢？

服务器不知道崩溃，它也不知道它。它仍在等待关闭请求的到来。

因此，服务器唯一能做的就是，当它等待关闭请求的时间过长以假定会话已关闭时。

为了使这更容易，不仅向服务器发送一个关闭请求，而且每分钟向服务器发送一个活动请求。

如果在三分钟内没有活动请求，那么服务器就知道出了问题。

# php - 在 JavaScript 数组中包含项目

> ID：15996840
> 
> 赞同：0
> 
> 时间：2013-04-14T07:41:38.790
> 
> 标签：php, javascript, jquery, html, mysql

我试图在 JavaScript 数组中包含一些项目，这些项目是 li 元素的 id。有什么建议么。

```
 <html>
  <head>
  <script type="text/javscript">
   var arr=[];
   </script>
  </head>
   <body>
  <ul>
  <li id="index.html"></li>
  <li id="gallery.html" ></li>
  <li id="Contact Us.html"></li>
  </ul>
  </body>

  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:46:56.883

```
$(function() {
    var arr = $('li').map(function() {
        return this.id;
    }).get();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:44:12.910

```
$(function(){
    var arr = [];
    $('li').each(function(){
      arr.push(this.id);
    });
    console.log(arr);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:12:49.297

```
$(document).ready(function() {
    var arr = new Array();
    $('li').each(function() {
        arr.push($(this).attr('id'));
    });
}); 
```

# parsing - 如何解析 Chrome 扩展程序中的 HTTP 标头？

> ID：15996845
> 
> 赞同：0
> 
> 时间：2013-04-14T07:42:33.827
> 
> 标签：parsing, google-chrome, google-chrome-extension, http-headers, webrequest

我正在开发一个 Google Chrome 扩展程序，该扩展程序使用`chrome.webRequest.onHeadersReceived`事件基于 HTTP 响应标头进行一些处理。我能够接收标题，但文档似乎表明标题只是表示为简单的字符串名称-值对。

某些 HTTP 标头的值，特别是`Content-Type`在`Content-Disposition`我的情况下，可以存储多条信息，包括具有特殊机制来转义字符的参数。我希望能够在语义上解释标头值，而不仅仅是将它们视为字符串。

但是，我不想编写自己的 HTTP 标头值解析代码来满足 HTTP 规范并能够应对现实世界的值；我认为这是一个完整的项目，我想专注于开发我的扩展。

我怎样才能做到这一点？

# button - 如何在 Windows Phone 8 中的地图/MapLayer 上显示按钮？

> ID：15996849
> 
> 赞同：1
> 
> 时间：2013-04-14T07:42:51.063
> 
> 标签：button, maps, icons, windows-phone-8, visibility

我是 Windows phone 8 开发的新手，在 MapLayer 上添加按钮时遇到问题。我想在地图上显示一个按钮，所以我只需在地图小部件上绘制它，如下所示：

```
<Grid x:Name="MyMapGrid" Margin="10,-15,15,0"  VerticalAlignment="Top" Height="296" >
            <maps:Map x:Name="MyMapi" Center="31.765537,35.106812" ZoomLevel="7"  Margin="0,0,0,0" VerticalAlignment="Top" Height="296" Width="442" />
                <Button x:Name="myCustomButton" Visibility="Visible" Content="" HorizontalAlignment="Left" Margin="347,0,0,0" VerticalAlignment="Top" Width="84" Height="84" BorderThickness="0">
                    <Button.Background>
                        <ImageBrush ImageSource="/myZoom.png"/>
                    </Button.Background>
                </Button>
            </Grid>

After this action I need to put some icons on the map so I used MapOverlay and MapLayer like this:

Map MyMap = new Map();
MapOverlay overlay = new MapOverlay
            {
                GeoCoordinate = MyMap.Center,
                Content = new Image()
                {
                    Source = new BitmapImage(new Uri("customIcon.png", UriKind.Relative)),
                }
            };
MapLayer layer = new MapLayer();
layer.Add(overlay);
MyMap.Layers.Add(layer);
MyMapGrid.Children.Add(MyMap);

I also need my button (myCustomButton) will stay visible - but it disappear.

how can I still have some button over the map and also view some icons on it?
Thank you all! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:46:34.017

For button 使用文件夹名称将路径更改为确定的 ImageSource="/Assets/Icon/location.png" 并确保 BuildAction 设置为该图像的内容 For icon 也尝试相同。

# java - 用于上传图像的 Java servlet

> ID：15996850
> 
> 赞同：-2
> 
> 时间：2013-04-14T07:42:51.787
> 
> 标签：java, web-applications

我想创建一个[Java Servlet](http://en.wikipedia.org/wiki/Java_Servlet)以允许 Android 设备发布照片。我应该从哪里开始？我应该使用 Apache 通用文件上传库吗？

我知道如何创建一个servlet，基本上是这样的吧：

```
@WebServlet(name = "UploadServlet")
public class UploadServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }
} 
```

（我是 Java 和 Web 开发的新手。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:48:31.730

看来您正在使用 Servlet API 3.0，因此有一个专门的注释用于管理文件上传的标记方法：`javax.servlet.annotation.MultipartConfig`.

一个很好的教程/示例是*[如何使用 Servlet 3.0 API 编写上传文件 servlet](http://www.codejava.net/java-ee/servlet/how-to-write-upload-file-servlet-with-servlet-30-api)*。

# objective-c - 重试 GameCenter 身份验证

> ID：15996851
> 
> 赞同：2
> 
> 时间：2013-04-14T07:43:31.423
> 
> 标签：objective-c, center, gamekit

在我的应用程序中，应用程序会在打开时提示用户登录 GameCenter。如果他们拒绝，我想让他们在手动按下 GameCenter 按钮后能够登录。但是，我在启动时用来对它们进行身份验证的代码在启动后的任何时候都不会打开身份验证视图控制器。有什么建议吗？我在用着：

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
[localPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) { 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T07:39:45.707

[它在文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html#//apple_ref/doc/uid/TP40008304-CH8-SW19)的清单 3-1“设置身份验证处理程序”中进行了解释（虽然有点不清楚）。这是我所做的：

*   如果没有经过身份验证的玩家，我会存储块返回的视图控制器，并在玩家尝试开始“多人”游戏时显示它。这比每次应用程序启动时立即显示视图控制器要好，因为有些人没有或想要游戏中心帐户，并且可能不想创建一个。
*   如果通过了身份验证，我会启用游戏中心功能，然后当玩家尝试开始游戏时，我会直接启动多人游戏（显然这里不需要显示控制器）。
*   如果该过程失败，那么我会禁用游戏中心功能和多人游戏，并像您一样显示一条消息，通过游戏中心应用程序登录，并提供启动游戏中心应用程序的选项。. 该代码几乎与苹果文档上的代码相同：

* * *

```
-(void)authenticateLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    __weak GKLocalPlayer *blockLocalPlayer = localPlayer;

    //Block is called each time GameKit automatically authenticates
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
    {
        [self setLastError:error];
        if (viewController)
        {
            self.authenticationViewController = viewController;
            [self disableGameCenter];
        }
        else if (blockLocalPlayer.isAuthenticated)
        {
            [self authenticatedPlayer:blockLocalPlayer];
        }
        else
        {
            [self disableGameCenter];
        }
    };
} 
```

`self.authenticationViewController`是`strong`，所以我可以稍后显示。

# c++ - 无法解析字段“__jmpbuf”-cpp

> ID：15996852
> 
> 赞同：-1
> 
> 时间：2013-04-14T07:43:36.353
> 
> 标签：c++

尝试编译我的程序时出现此错误：

```
Field '__jmpbuf' could not be resolved 
```

我花了几个小时寻找解决方案，但似乎无法找出罪魁祸首。

该`Thread.h`文件包含类的标题。它有私有成员：

```
sigjmp_buf _env; 
```

实现在 Thread.cpp 中：

```
#include "Thread.h"
#include <setjmp.h>
#include "translateAdd.h"
#include <stdio.h>
#include <signal.h>
#include <unistd.h>
#include <sys/time.h>

#define COUNTER_INIT -1

int Thread::_idCounter = COUNTER_INIT;

Thread::Thread(void (*threadsFunc)(void))
: threadsFunction(threadsFunc), _stack(new char[STACK_SIZE]), _quantums(1)
{
      address_t sp, pc;

      sp = (address_t)_stack + STACK_SIZE - sizeof(address_t);
      pc = (address_t)threadsFunc;
      // set environment for later return
      sigsetjmp(_env, 1);
      (_env->__jmpbuf)[JB_SP] = translate_address(sp);
      (_env->__jmpbuf)[JB_PC] = translate_address(pc);
      sigemptyset(&_env->__saved_mask);

    _id = ++_idCounter;

    _state = READY;

} 
```

**编辑**：在 ubuntu 32bit 下使用 eclipse 作为 IDE

编辑：另一个无法在我的机器上编译的完整示例：

```
#include <stdio.h>
#include <setjmp.h>
#include <signal.h>
#include <unistd.h>
#include <sys/time.h>

#define SECOND 1000000
#define STACK_SIZE 4096

char stack1[STACK_SIZE];
char stack2[STACK_SIZE];

sigjmp_buf env[2];

#ifdef __x86_64__
/* code for 64 bit Intel arch */

typedef unsigned long address_t;
#define JB_SP 6
#define JB_PC 7

/* A translation is required when using an address of a variable.
   Use this as a black box in your code. */
address_t translate_address(address_t addr)
{
    address_t ret;
    asm volatile("xor    %%fs:0x30,%0\n"
        "rol    $0x11,%0\n"
                 : "=g" (ret)
                 : "0" (addr));
    return ret;
}

#else
/* code for 32 bit Intel arch */

typedef unsigned int address_t;
#define JB_SP 4
#define JB_PC 5 

/* A translation is required when using an address of a variable.
   Use this as a black box in your code. */
address_t translate_address(address_t addr)
{
    address_t ret;
    asm volatile("xor    %%gs:0x18,%0\n"
        "rol    $0x9,%0\n"
                 : "=g" (ret)
                 : "0" (addr));
    return ret;
}

#endif

void switchThreads(void)
{
  static int currentThread = 0;

  int ret_val = sigsetjmp(env[currentThread],1);
  printf("SWITCH: ret_val=%d\n", ret_val); 
  if (ret_val == 1) {
      return;
  }
  currentThread = 1 - currentThread;
  siglongjmp(env[currentThread],1);
}

void f(void)
{
  int i = 0;
  while(1){
    ++i;
    printf("in f (%d)\n",i);
    if (i % 3 == 0) {
      printf("f: switching\n");
      switchThreads();
    }
    usleep(SECOND);
  }
}

void g(void)
{
  int i = 0;
  while(1){
    ++i;
    printf("in g (%d)\n",i);
    if (i % 5 == 0) {
      printf("g: switching\n");
      switchThreads();
    }
    usleep(SECOND);
  }
}

void setup(void)
{
  address_t sp, pc;

  sp = (address_t)stack1 + STACK_SIZE - sizeof(address_t);
  pc = (address_t)f;
  sigsetjmp(env[0], 1);
  (env[0]->__jmpbuf)[JB_SP] = translate_address(sp);
  (env[0]->__jmpbuf)[JB_PC] = translate_address(pc);
  sigemptyset(&env[0]->__saved_mask);     

  sp = (address_t)stack2 + STACK_SIZE - sizeof(address_t);
  pc = (address_t)g;
  sigsetjmp(env[1], 1);
  (env[1]->__jmpbuf)[JB_SP] = translate_address(sp);
  (env[1]->__jmpbuf)[JB_PC] = translate_address(pc);
  sigemptyset(&env[1]->__saved_mask);         
}

int main(void)
{
  setup();      
  siglongjmp(env[0], 1);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:26:36.497

如果您确实需要使用内部字段（仅对系统上的编译器有效），您需要检查类型：

```
typedef struct __jmp_buf_tag sigjmp_buf[1]; 
```

这意味着它`sigjmp_buf`不是一个指针，而是一个包含单个结构的数组。因此，您可以像使用普通的结构数组一样使用它：

```
sigjmp_buf _env;

_env[0].__jmpbuf[x] = y; 
```

我真的建议不要使用这个结构的内部字段。Linux具有其他功能来简化协作线程（您似乎正在实现）。

# wso2 - wso2：访问包？

> ID：15996854
> 
> 赞同：0
> 
> 时间：2013-04-14T07:44:04.397
> 
> 标签：wso2, jmx, mbeans

**我如何访问包？**

我需要在我的班级中使用这个包来使用 Mbean。

```
org.wso2.carbon.server.admin.service 
```

我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:48:32.587

它位于碳内核模块中。您可以在任何 wso2 产品中找到这些库。

例如：wso2AS。

检查 home\repository\components\plugins 文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:03:38.553

[您可以从http://dist.wso2.org/maven2/org/wso2/carbon/org.wso2.carbon.server.admin/](http://dist.wso2.org/maven2/org/wso2/carbon/org.wso2.carbon.server.admin/)下载 org.wso2.carbon.server.admin.service 依赖 jars

请根据需要的依赖版本下载jar

# unix - 如何在 unix 中使用 grep、uniq 和 awk 获取集合中重复字符串的计数？

> ID：15996859
> 
> 赞同：-1
> 
> 时间：2013-04-14T07:45:19.183
> 
> 标签：unix, awk, grep, uniq

我有一组非常大的字符串，文件的每一行都有一个。许多字符串在文件中的不同位置多次出现。

我想要使​​用 awk、grep、uniq 等 unix 命令对字符串进行频率计数。我尝试了几种组合，但没有奏效。

获取频率计数的确切命令是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T11:49:34.200

要计算文件中行的出现次数，最简单的方法是：

```
$ sort file | uniq -c 
```

# javascript - 查找映射/字典的值

> ID：15996875
> 
> 赞同：1
> 
> 时间：2013-04-14T07:47:28.250
> 
> 标签：javascript

我在 Javascript 中有地图/字典：

```
var m = {
   dog: "Pluto",
   duck: "Donald"
}; 
```

我知道如何获取键`Object.keys(m)`，但是如何获取对象的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:56:05.360

您只需遍历键并检索每个值：

```
var values = [];
for (var key in m) {
    values.push(m[key]);
}
// values == ["Pluto", "Donald"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:48:20.337

没有类似的功能，但您可以使用：

```
var v = Object.keys(m).map(function(key){
    return m[key];
}); 
```

# html - 仅在 Firefox 中的透明选择下拉菜单

> ID：15996876
> 
> 赞同：1
> 
> 时间：2013-04-14T07:47:32.337
> 
> 标签：html, css, firefox

我有一个带有自定义样式的 SELECT 元素。我使用包含“下拉箭头”的背景图像。[你可以在这个 liveweave http://liveweave.com/xcfh0Z](http://liveweave.com/xcfh0Z)中找到我在做什么的例子

当您在 Chrome、Safari、IE 或 Opera 中使用选择框时，一切都按预期工作：选择显示在给定的图像中，如果我单击选择框，我可以看到一个带有白色背景的下拉列表。

但是，Firefox 的行为有所不同。当我单击 Firefox 中的选择框时，它会打开一个带有透明背景的下拉列表。我发现解决此问题的唯一方法是使用

```
background-color: white 
```

...这会导致我的选择周围出现“不太酷的白色边框”。

有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:04:07.270

为了使您的背景图像正常工作，您的背景图像必须`background-color`是`<select>`透明的。相反，您应该将`<option>`背景设置为白色，如下所示：

```
option {
    background-color: white;
} 
```

见[演示](http://liveweave.com/BMtlXc)。

# python - TD 截距方程

> ID：15996880
> 
> 赞同：-2
> 
> 时间：2013-04-14T07:48:20.870
> 
> 标签：python, math, intercept

我正在写这个基于保卫地球的太空塔防游戏。这些火炮有 260 度的射程，它们也绕着地球运行。小兵可以来自各个方向（围绕地球 360 度）。我希望枪能巧妙地瞄准小兵，瞄准子弹击中小兵的位置，而不是小兵所在的位置。

我想知道如何计算子弹会在哪里拦截外星人。

提前致谢

注意：这不是作业，我也不是要你写代码。我只是不明白解决这个问题的数学。

这些是我知道的：Creep 的速度、creep 的位置、creep 的目的地、子弹速度、子弹的原始位置。我不知道任何角度。我会给你看一张照片，但显然我没有足够的声望点

目前我已经实现了子弹随着爬行位置的更新，因此子弹随着爬行而弯曲。它的效率非常低，根本不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:01:50.160

基本上，您会得到一个由两个方程组成的系统： 两点之间的距离在![在此处输入图像描述](https://i.stack.imgur.com/OBPGD.png) 哪里。`|XY|`您必须能够解决该系统并找出`Xp,Yp`交点的坐标。欲了解更多信息：

[http://en.wikipedia.org/wiki/Linear_equation](http://en.wikipedia.org/wiki/Linear_equation)

[http://en.wikipedia.org/wiki/Euclidean_distance](http://en.wikipedia.org/wiki/Euclidean_distance)

# java - 哪些变体字符串反转更好？

> ID：15996885
> 
> 赞同：5
> 
> 时间：2013-04-14T07:48:52.203
> 
> 标签：java, string

我想知道哪个程序变体更好的运行时？
这两种变体看起来都很容易实现。但是什么更好用，在哪些情况下更好用？

**字符串反转：**

```
public static String reverse(String s)
{
    String rev = "";
    for (int i = s.length() - 1; i >= 0; i--)
        rev += s.charAt(i);
    return rev;
} 
```

**StringBuilder 反向：**

```
public static String reverse(String s)
{
    StringBuilder rev = new StringBuilder();
    for (int i = s.length() - 1; i >= 0; i--)
        rev.append(s.charAt(i));
    return rev.toString();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T08:17:54.250

在你的两种情况下：我更喜欢第二种

因为[编译器会将第一个转换为](http://kaioa.com/node/59) ：

`rev += s.charAt(i);`

至 ：

`(new StringBuilder()).append(rev).append(s.charAt(i)).toString();`

但是，[看看最坏的情况](https://stackoverflow.com/a/1532547/1743852)：

```
public class Main
{
    public static void main(String[] args)
    {
        long now = System.currentTimeMillis();
        slow();
        System.out.println("slow elapsed " + (System.currentTimeMillis() - now) + " ms");

        now = System.currentTimeMillis();
        fast();
        System.out.println("fast elapsed " + (System.currentTimeMillis() - now) + " ms");
    }

    private static void fast()
    {
        StringBuilder s = new StringBuilder();
        for(int i=0;i<100000;i++)
            s.append("*");      
    }

    private static void slow()
    {
        String s = "";
        for(int i=0;i<100000;i++)
            s+="*";
    }
} 
```

输出将是：

```
slow elapsed 173 ms
fast elapsed 1 ms 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T07:52:23.873

考虑到您可以这样做，两者都不是很好：

```
new StringBuilder(str).reverse().toString(); 
```

如果您*必须*使用上述其中一个，那么选择 StringBuilder 反向 - 使用第一个，您可以通过屋顶发送 GC，创建和处置尽可能多的字符串对象，就像您拥有的字符一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:10:05.307

`String`java中的class是不可变的，一生都无法改变，两个字符串的连接create new`String`和return，但是`StringBuilder`是一个可变的字符序列，可以改变内存中字符串的字符，使用`StringBuilder`应该更好。
作为另一种解决方案，您可以将字符串转换为 char 数组和反向数组，最后转换为 String

```
char[] arr = s.toCharArray();
char tmp;
int maxIndex = arr.length-1;
for( int i = arr.length>>2; i>=0;i--) {
  tmp = arr[i];
  arr[i] = arr[maxIndex-i];
  arr[maxIndex-i] = tmp;
}
return new String(arr); 
```

有关更多信息，请参阅 javadoc： [StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)、[String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)
和查看`StringBuilder`类源代码以了解想要真正发生在附加字符上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:18:20.643

一些有趣的细节。
我们可以编写一个递归函数来反转字符串并且不使用任何循环。使用字符串方法`substring()`：

```
public static String reverse(String s) {
   int N = s.length();
   if (N <= 1) return s;
   String a = s.substring(0, N/2);
   String b = s.substring(N/2, N);
   return reverse(b) + reverse(a);
} 
```

这种方法效率如何？
该方法具有**线性运行时间**。

# java - 数组计数

> ID：15996886
> 
> 赞同：0
> 
> 时间：2013-04-14T07:49:02.267
> 
> 标签：java, arrays, loops, counting

如果我的程序向用户提供了一个球队的冠军历史，例如，如果用户进入切尔西，我的程序会说，“他们在 2012,2010,2007,2008 年赢得了冠军”（使用已经提供的并行数组列表并且必须使用）。我将如何从该结果中显示他们获胜的次数。因此，如果该信息是正确的，我希望我的程序说，“切尔西已经赢得了 4 次”。

这是我到目前为止所拥有的：

```
public static void showWinner(short years[], String winners[]){
    Scanner kd = new Scanner (System.in);
    String name;
    System.out.println("Which teams result would you like to see?: " );
    name = kd.next();

    for (int i = 0; i < winners.length; i++) {
        if (winners[i].equals(name)){
             System.out.println(years[i]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:57:43.350

试试这个：我假设获胜者数组和年份数组具有哪个团队在哪一年获胜的映射。我建议您为此目的使用地图。它将更易于理解和有效。

```
int count = 0;
for (int i = 0; i < winners.length; i++){
    if (winners[i].equals(name)){
        count ++;
        System.out.println(years[i]);
    }
}
System.out.println(name + " has won it" + count + "times"); 
```

# php - PHP和MySQL比较数据

> ID：15996888
> 
> 赞同：1
> 
> 时间：2013-04-14T07:49:16.027
> 
> 标签：php, mysql, sql, if-statement, while-loop

我有一个数据库，在那个数据库中我有一个`ipbans`表，然后我还有一个用户表。users 表有一个名为的列`lastip`，该`ipbans`表有一个名为 ip 的表。

我需要将 lastip 与 ip 列进行比较，如果它们都匹配以显示数据，我已经在 mysql 中完成了它，但我不知道如何将它添加到我现有的 while 循环中，以查找用户是否被禁止或不是。

```
SELECT  
IF((SELECT INET_NTOA(b.ip) FROM ipbans AS b WHERE INET_NTOA(b.ip) = p.LastIP) IS NULL, concat('<font color=blue>', p.LastIP, '</font>'), concat('<font color=red>', p.LastIP, '</font>')) AS IPv4 
FROM players AS p WHERE p.Banned = 1 
```

这样做会使 IP 如果匹配则变为蓝色，如果不匹配则使 IP 变为红色，但我想用用户名回显此数据。

编辑：

```
$sql = mysql_query("SELECT * FROM  `players` WHERE  `Banned` = 1");
while($row = mysql_fetch_array($sql)) {
    $username = $row['Username'];
    $lastip = $row['LastIP'];
    $level = $row['Level'];
    echo "<tr>";
    echo "<td>$username</td>";
    if ($lastip > 2){
        echo "<td>$lastip</td>";
    } else {
        echo '<td>IP not found in IPBans!</td>';
    }
        echo "<td>$level</td>";
        echo "<td>Location</td>";
        echo "</tr>";
} 
```

我目前有以上作为我的查询，它进入玩家表并列出被禁止的玩家，从那里我想获取他们登录的最后一个 IP（已经使用 LastIP 列登录）并且我想将其与 ipbans 表进行比较，仅显示 IP 与 ipbans 表和 LastIP 匹配的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:04:55.200

您可以将两个查询合并为一个，例如：

```
SELECT
    p.Username, p.Level,
    IF((SELECT INET_NTOA(b.ip) FROM ipbans AS b WHERE INET_NTOA(b.ip) = p.LastIP) IS NULL,
        concat('<font color=blue>', p.LastIP, '</font>'),
        concat('<font color=red>', p.LastIP, '</font>')) AS LastIP
FROM players AS p
WHERE p.Banned = 1 
```

虽然我个人更喜欢在 PHP 中生成 HTML 代码，而不是在 SQL 中。

# macos - 终端的轻量级事件包装器

> ID：15996891
> 
> 赞同：2
> 
> 时间：2013-04-14T07:49:27.080
> 
> 标签：macos, shell, unix, terminal, mouseevent

我相信这是`ncurses`图书馆的领域。不过，我正在努力避免不得不沮丧和肮脏。

我正在寻找一个可以配置为在执行*终端鼠标报告*转换为按键时运行命令的程序。

这适用于像 less 这样的寻呼机。

例如，Terminal.app 的 MouseTerm SIMBL 插件就是这样做的。

但 iTerm2 没有。我想要它。

我认为答案可能就像直接重新映射代码一样简单。

看起来有转义码可以将终端切换到和退出鼠标侦听模式，而鼠标单击转义码实际上似乎包括字符坐标。我可以在 Vim 中使用 Ctrl+V 来查看它们，因为我已经告诉 vim 打开鼠标。

它看起来像这样：

```
Note ^[ denotes escape (you can type escape by typing ctrl+[)

left click: ^[[M !!
right click: ^[[M"!!
middle click: ^[[M!!!
scroll up: ^[[M`!!
scroll down: ^[[Ma!! 
```

[因此，根据文档（我喜欢这个页面](http://rtfm.etla.org/xterm/ctlseq.html#mtrack)），这确实与鼠标滚轮按钮代码比鼠标按钮代码多 64 个相匹配。

现在我已经掌握了我需要将哪些代码映射到我只需要找出如何获得一个让我过滤输入的层的知识。

这显然让我顿悟了。我只需要一个简单的非行缓冲程序来监听鼠标转义码并用键码替换它​​们。Perl 肯定`Term::ReadKey`会让我设置原始模式并完成这项几乎微不足道的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T16:34:05.803

这东西很难。我一直在通过配置 Tmux 来处理事情。

# php - Codeigniter-从我的模型类中只返回一行

> ID：15996896
> 
> 赞同：1
> 
> 时间：2013-04-14T07:50:19.937
> 
> 标签：php, mysql, codeigniter

我编写了一个模型代码，我将在其中加入两个表，并返回我的结果。

我的表中有 26 个结果，但我提到的下面的代码只返回一行！可能是什么原因？为什么它只返回一行？

请帮我解决这个问题

**更新**

表结构

```
question
-----------
question_id PK Auto_Incr  
question    varchar... 
votes       int

answer
------------
answer_id    PK  Auto_icre
question_id  FK refrences question  
content      longtext 
```

`answer`从下表结构中，我的模型代码仅显示 2 个问题计数，跳过最后一个问题，经过少量研究，我发现它不计算我的第三个问题的原因是因为它在我的表中没有任何答案。

我想，如果没有答案，那么它应该为特定问题显示 count=0，如何解决这个问题？

* * *

表数据结构数据：

```
 question
-----------
 question_id    question          votes
    1           what's name?       0
    2           where you?         3
    3           blah blah          9 

answer 
----------
 answer_id      question_id        content
    4              2                 India
    5              2                 Nepal
    6              2                 Pakistan
    7              1                 Mr Osama Binladan 
```

* * *

模型

```
 public function fetch_allquestions($limit, $start) 
{
    $this->load->database(); 
    $this->db->limit($limit, $start);   
     $this->db->from('question');
    $select =array(
                    'question.*',
                    'userdetails.*',
                    'COUNT(answer.answer_id) AS `Answers`'
            );

    $this->db->select($select);

    $this->db->join('answer','answer.question_id = question.question_id'); 
    $this->db->join('userdetails','userdetails.user_id = question.user_id'); 
     $query = $this->db->get();

    print_r("Number of rows=".$query->num_rows());//showing only One, out of 26 rows

    if ($query->num_rows() > 0)
    {
        foreach ($query->result() as $row)
            {
                $data[] = $row;
            }
            return $data;
    }else{
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:37:31.360

您`COUNT()`在选择中有一个 sql 聚合。由于您没有任何`GROUP BY`，因此数据库会将整个结果集用作一个隐式组，从而在将结果集全部计数时将结果集减少到一行。这就是sql应该如何工作。

`print $this->db->last_query()`您可以在该行之后检查生成的 sql 查询`$this->db->get();`，并在您的 sql 控制台中运行它以查看发生了什么。

您可能想添加一个`$this->db->group_by('question.question_id');`或类似的东西。

# delphi - 在 Delphi 中创建或强制错误

> ID：15996898
> 
> 赞同：2
> 
> 时间：2013-04-14T07:50:37.437
> 
> 标签：delphi

对于我的一些程序和函数，我已经对参数进行了各种检查，以便在参数以某种方式超出范围时强制停止执行。我发现最好在我自己的代码中检查这一点，而不是由于内存写入错误而导致异常崩溃。

考虑简单的代码：

```
PROCEDURE Test(OneDigitNumbers:BYTE);
BEGIN
  IF OneDigitNumbers>9 THEN ProduceErrorMessage;
END;

begin
  Test( 1);
  Test( 2);
  Test( 9);
  Test(12);
end. 
```

实际上产生错误消息我没有问题，我唯一的“问题”是Delphi中的调试器总是指向创建异常的过程。是否有创建此异常或错误消息的方法，以便调试器指向参数超出范围的行？在我的示例中，它应该指向：

```
Test(12); 
```

并且可能会说“参数超出范围。有效范围是 0-9。传递的参数是：12”

甚至说这是不可能的答案也会很有用（如果您确定这是不可能的），因为那样我就会忘记这一点并制定一种替代的调试方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T08:18:12.340

要回答所问的问题，您可以使测试函数内联：

```
procedure Test(OneDigitNumbers: byte); inline; 
```

然后编译器会将 Test 的代码写入每个调用函数。虽然你可以这样做，但我的建议是你不这样做。这只是一个技巧，但我认为它对你没有帮助。

如果要在返回地址引发异常，可以这样做：

```
raise Exception.CreateFmt(
  'Exception blah blah at %p.',
  [ReturnAddress]
) at ReturnAddress; 
```

如果您想在堆栈中更进一步，那么您将不得不使用类似[`CaptureStackBackTrace`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb204633.aspx). 将回溯跟踪与 raise at 结合起来，您可以在调用堆栈中的任何位置引发异常，如果您真的认为这是个好主意。正如我在下面解释的那样，我认为这不是一个好主意。

如果您使用良好的调试工具，例如 madExcept，那么 madExcept 错误报告中的调用堆栈将告诉您发生错误时需要知道的所有信息。

* * *

通过注释中的额外说明，您似乎真正想要发生的是异常包含来自调用堆栈更高层的信息。在我看来，要求被调用者报告有关其调用者的信息是违反封装的。所以如果你想包含来自调用者的信息，让调用者捕获异常，添加信息，然后重新引发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:00:26.573

您正在寻找[子范围类型](http://docwiki.embarcadero.com/RADStudio/XE3/en/Simple_Types#Subrange_Types)。

```
type
  TOneDigitNumber = 0..9;

procedure Test(OneDigitNumbers: TOneDigitNumber);
begin
  // Do something
end;

begin
  Test( 1);
  Test( 2);
  Test( 9);
  Test(12);   // compiler error '[DCC Error] MyStuffTest.pas(33): E1012 Constant expression violates subrange bounds
end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T09:17:59.473

对我对您的问题的评论进行一些详细说明

```
type
  EMyOwnRangeError = class(ERangeError)
    // You can also add your own member variables for easier inspection
  public
    constructor CreateFrom(const aRangeError: ERangeError);
  end;

constructor EMyOwnRangeError.CreateFrom(const aRangeError: ERangeError);
begin
  // Do whatever you need to inspect the call stack in aRangeError 
  // and modify the message and/or set any extra member variable that you
  // you define on EMyOwnRangeError.
  // No help from me on this, quite simply because I don't have Delphi 
  // installed on the machine I am currently working at.
end;

procedure MySpecialTest(const aWhatever: Byte);
begin
  try
    if (aWhatever < 0) or (aWhatever > SOMEUPPERRANGE) then
      raise ERangeError.Create;

    // Normal code for MySpecialTest

  except
    on E: ERangeError do raise EMyOwnRangeError.CreateFrom(E);
    else
      raise; // Make sure other exceptions are propagated.
  end;
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:02:05.177

我现在基本上测试了我从 David Heffernan 那里得到的想法中的方法。我只是在我的一个可重用单元中添加了这个简单的代码：

```
PROCEDURE TestError(Par:BYTE);
  BEGIN
    TRY
    FINALLY
      IF Par>9 THEN Raise Exception.CreateFmt('Error Blah blah blah at ',[Par]) AT @Par;
    END;
  END; 
```

当使用高于 9 的参数调用此过程时，它会强制异常。Delphi 询问“Break or Continue”，然后我单击“Break”。

结果几乎是我想要的，但它是如此接近以至于我可以忍受。调试器在调用过程之后的行上弹出一条漂亮的红线。

我也尝试了没有 TRY-Finally-End 的情况，然后这是完全错误的，实际上从调用堆栈中显示了另一个级别的红线..

反正。我觉得这个结果比我以前的结果要好得多。现在我的调试将是一种快乐而不是痛苦。谢谢 ：）

# listbox - 从 As Variant 到 As Long 的列表框代码

> ID：15996901
> 
> 赞同：0
> 
> 时间：2013-04-14T07:51:03.737
> 
> 标签：listbox, excel-2010

我了解到，在提高微距速度方面，As Long 比 As Variant 好得多。

```
Dim data1() As Variant
data1 = Array("a", "b", "c", "d", "e")
Sheet1.ListBox1.List = data1 
```

当我用 As Long 替换时，我的代码不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:54:32.917

您的数组不包含`Long`s，它包含`String`s。试试`Dim data1() As String`。（别担心 - 它可能仍然比`As Variant`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:22:51.383

虽然使用显式类型*通常*（几乎总是）更好。这种情况是一个例外，因为 的`List`属性无论如何`ListBox`都是 a `Variant array`，因此将 a`String`或`Long`数组分配给它会导致隐式类型转换，因此不会更快（甚至可能更慢）。

可能会有所不同的是，在将数据分配给`ListBox`. 如果使用显式类型*数组*更有效，那就使用它。

顺便提一句

```
Dim data1() as long
data1 = Array(1, 2, 3, 4, 5) 
```

不起作用，因为`Array(...)`返回`Varaint array`不能分配给显式类型数组的 a。

# c++ - 哪种类型的指针用于字节解析？

> ID：15996902
> 
> 赞同：0
> 
> 时间：2013-04-14T07:51:10.380
> 
> 标签：c++, pointers, casting, type-conversion

我正在为 nodejs 开发一个 C++-Addon，它采用 nodejs Buffer 对象并对其进行一些二进制操作。我目前的问题是关于指针背后的数据：

JavaScript 环境：

```
var buf = new Buffer([0x00, 0x7e, 0xff, 0xff]); 
```

C++ 后端代码

```
int length = node::Buffer::Length(chunk);
char* head = node::Buffer::Data(chunk);

/* for debugging */
for (int i = 0; i < length; i++) {
    std::cout << hex << (int) head[i] << "\n";
}

/* outputs: 0x00 0x7e 0xffffffff 0xffffffff */ 
```

为什么指针将最后两个字节解释为 0xffffffff 而不是 0xff？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:53:25.177

`char`是有符号类型，表示a`0xff`为-1，转换为-1为`int`，表示为`0xffffffff`。

你可以像这样修复它：

```
std::cout << hex << (unsigned) (unsigned char) head[i] << "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:54:52.127

问题是`char`默认情况下在您的平台上签名`(char)0xFF`，`-1`.

写吧：

```
std::cout << hex << (int)(unsigned char)head[i] << "\n"; 
```

有时这样写很有用：

```
typedef unsigned char byte; 
```

接着：

```
std::cout << hex << (int)(byte)head[i] << "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T07:57:46.797

这是因为这种类型转换：`(int) head[i]`. 它将您的结果转换为带符号的 int。0xff 是 -1（作为有符号字符），作为有符号整数是 0xfffffff。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T07:58:03.353

仅仅因为该值在算术上从 1 个字节扩展到 4 个字节，0xff 表示 -1（一个字节），而 0xffffffff 仍然表示 -1（4 个字节），为此您必须使用“unsigned char”作为您的“head “ 大批。

# sql - 满足条件的行数（在具有特定条件的行处重置）

> ID：15996904
> 
> 赞同：2
> 
> 时间：2013-04-14T07:51:48.947
> 
> 标签：sql, sql-server, count

我有一个关于在 sql 中编写查询的问题（在我之前的问题的继续中：[减去两行的值并将其插入新列（不是后续行）](https://stackoverflow.com/questions/15895676/subtract-values-of-two-rows-and-inserting-it-into-a-new-column-not-subsequent-r)）：

我想写一个查询来计算用户在当前时间之前赢得比赛的次数，获胜的条件是 place=1 ；我希望将结果放在一个新列（win-frequency）中，并且当新的获胜发生时，[win-frequency] 的值会发生变化。在下图中，我手动计算了获胜频率。

[http://www.8pic.ir/images/54691148512772358477.jpg](http://www.8pic.ir/images/54691148512772358477.jpg)

我编写了以下查询，但出现错误：

```
SELECT [user-name], 
   submissions,
   [date],
   place,
   recency,
   [win-recency],
   COUNT( SELECT [date] FROM [top-design1]] td1
          WHERE td1.[user-name] = [top-design1].[user-name]
          AND  place=1
          AND [date]< [top-design1].[date]
          ORDER BY [date] DESC) as win-frequency
        )
FROM [top-design1] 
```

这是 sql 小提琴： [http ://sqlfiddle.com/#!3/0ec5f](http://sqlfiddle.com/#!3/0ec5f)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:57:16.030

您必须修复括号`)`和`[`，`ORDER BY`从相关子查询中删除 ，并转义列 name `[win-frequency]`。应该是这样的：

```
SELECT [user-name], 
   submissions,
   [date],
   place,
   recency,
   [win-recency],
   (SELECT COUNT([date])
    FROM [top-design1] td1
    WHERE td1.[user-name] = [top-design1].[user-name]
      AND  place = 1
      AND [date] < [top-design1].[date]
    ) as [win-frequency]
FROM [top-design1]; 
```

*   [**更新了 SQL Fiddle 演示。**](http://sqlfiddle.com/#!3/0ec5f/10)

# visual-studio-2010 - 重新关联 Visual Studio 2012 的文件类型

> ID：15996907
> 
> 赞同：22
> 
> 时间：2013-04-14T07:52:19.140
> 
> 标签：visual-studio-2010, file, associations

我已经安装了 2012 有一段时间了，但我还必须安装 VS 2010。正如预期的那样，我所有的文件关联现在都指向 VS2010，并且图标不是那么直观。如果不通过资源管理器菜单手动执行每个文件，如何快速将关联恢复/更改回 VS2012？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-17T17:24:49.230

打开 VisualStudio - `Tools > Options`.

然后转到环境的常规页面并单击`Manage File Associations`按钮。

将打开控制面板中的一个窗口（控制面板\程序\默认程序\设置默认程序\设置程序关联）

.选择要关联到 VisualStudio2012 的扩展并单击`Save`按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-10T12:10:17.077

接受的答案仅将文件扩展名分配给整个 Visual Studio。要告诉 VS 如何处理文件扩展名（如语法突出显示），请转到工具 > 选项 > 文本编辑器 > 文件扩展名，然后将扩展名添加到列表中。

# java - Wicket：避免 302 重定向到主页

> ID：15996913
> 
> 赞同：0
> 
> 时间：2013-04-14T07:52:58.580
> 
> 标签：java, wicket, servlet-filters

我们基于检票口的网站已将主页安装为`/index.html`. 目前，当用户`www.ourdomain.com`在浏览器中输入时，wicket 会自动发送 302 重定向到`www.ourdomain.com/index.html`. 由于某些原因，我想避免这种重定向。

我已经尝试了一个`ServletFilter`实现

```
...
request.getRequestDispatcher("/index.html").forward(request, response);
... 
```

但这仅导致 404 响应。我也尝试过修改`StringBuffer`返回的 by `request.getRequestURL()`，`chain.doFilter(request, response);`但也没有成功。

我还能尝试让 wicket 返回无路径 URL 的主页（不安装在不同的路径）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:42:30.507

把它放在你`init()`的应用程序类的方法中

```
 @Override
public void init() {
    super.init();
    getRequestCycleSettings().setRenderStrategy(IRequestCycleSettings.RenderStrategy.ONE_PASS_RENDER);
} 
```

看看我的默认 init() 方法

```
 @Override
public void init() {
    super.init();
    getResourceSettings().setResourcePollFrequency(isTest() ? ONE_SECOND : null);
    getResourceSettings().setDefaultCacheDuration(isTest() ? MAXIMUM : null);
    getMarkupSettings().setCompressWhitespace(true);
    getMarkupSettings().setStripComments(true);
    getMarkupSettings().setStripWicketTags(true);
    getRequestCycleSettings().setRenderStrategy(IRequestCycleSettings.RenderStrategy.ONE_PASS_RENDER);
} 
```

在检票口 6 中使用：

```
getRequestCycleSettings().setRenderStrategy(RenderStrategy.ONE_PASS_RENDER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:15:28.553

您可以创建挂载到 index.html 的类的后代类并在 Application#getHomePage 中使用它

这是一个例子：

```
 public class MyApplication extends WebApplication {

        @Override
        protected void init() {
            super.init();
            ...
            mountPage("index.html", IndexPage.class);
            ...
        }

        @Override
        public Class<? extends Page> getHomePage() {
           return HomePage.class;
        }

        public static class HomePage extends IndexPage{}

    } 
```

# iphone - “_OBJC_CLASS_$_MDAudioPlayerTableViewCell”和链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：15996914
> 
> 赞同：1
> 
> 时间：2013-04-14T07:53:18.407
> 
> 标签：iphone, ios

我已经从[https://github.com/mattdonnelly/MDAudioPlayerController](https://github.com/mattdonnelly/MDAudioPlayerController)下载了一个示例源代码，但是当我在 Xcode 4.52 版中打开时，我收到错误“Undefined symbols for architecture i386:”_OBJC_CLASS_$_MDAudioPlayerTableViewCell”，引用自：MDAudioPlayerController.o ld 中的 objc-class-ref：未找到体系结构 i386 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）”

```
Ld /Users/fastpwr/Library/Developer/Xcode/DerivedData/MDAudioPlayerSample-cyywpdxygeoqowdjhtaosupvdbns/Build/Products/Debug-iphonesimulator/MDAudioPlayerSample.app/MDAudioPlayerSample normal i386
cd "/Users/fastpwr/Downloads/MDAudioPlayerController-master-1/Sample App"
setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
setenv PATH "/Users/fastpwr/Desktop/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Users/fastpwr/Desktop/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Users/fastpwr/Desktop/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Users/fastpwr/Desktop/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/fastpwr/Library/Developer/Xcode/DerivedData/MDAudioPlayerSample-cyywpdxygeoqowdjhtaosupvdbns/Build/Products/Debug-iphonesimulator -F/Users/fastpwr/Library/Developer/Xcode/DerivedData/MDAudioPlayerSample-cyywpdxygeoqowdjhtaosupvdbns/Build/Products/Debug-iphonesimulator -filelist /Users/fastpwr/Library/Developer/Xcode/DerivedData/MDAudioPlayerSample-cyywpdxygeoqowdjhtaosupvdbns/Build/Intermediates/MDAudioPlayerSample.build/Debug-iphonesimulator/MDAudioPlayerSample.build/Objects-normal/i386/MDAudioPlayerSample.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework CoreMIDI -framework AudioToolbox -framework CoreData -framework Foundation -framework UIKit -framework AVFoundation -framework QuartzCore -framework CoreGraphics -o /Users/fastpwr/Library/Developer/Xcode/DerivedData/MDAudioPlayerSample-cyywpdxygeoqowdjhtaosupvdbns/Build/Products/Debug-iphonesimulator/MDAudioPlayerSample.app/MDAudioPlayerSample![enter image description here][1] 
```

# php - 如何在php中使用正则表达式忽略字符串中的空格

> ID：15996922
> 
> 赞同：0
> 
> 时间：2013-04-14T07:55:08.693
> 
> 标签：php, regex

```
I have a string = "[VIDEO]http://www.youtube.com/watch?v=etye3skwu9w[/Video]" 
```

我正在使用以下正则表达式来匹配 VIDEO 标签

```
'/\[VIDEO\](.+?)\[\/VIDEO\]/i' 
```

`[VIDEO]`如果标签中没有空格，它可以正常工作。但是，如果有任何空间`[ VIDEO ],`，它将无法正常工作。

我怎样才能忽略空格。我的意思是如果标签是这样的`[ VIDEO ]`，我的 REGEX 应该可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:56:55.893

`\s*`在要允许空格的位置添加 a 。`\s`是空格，`*`是任意数量的重复（包括零）：

```
'/\[\s*VIDEO\s*\](.+?)\[\s*\/VIDEO\s*\]/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:58:46.050

`\s`匹配任何空格。你可以使用这个：

```
'/\[\s*VIDEO\s*\](.+?)\[\s*\/\s*VIDEO\s*\]/i' 
```

这允许像`[ VIDEO ]`or之类的空格`[/ VIDEO]`。或者，只允许空格

```
'/\[ *VIDEO *\](.+?)\[ *\/ *VIDEO *\]/i' 
```

或*一个*空格

```
'/\[ ?VIDEO ?\](.+?)\[ ?\/ ?VIDEO ?\]/i' 
```

# mysql - 如何将多个数据库（ hsqldb、mysql ）与单独文件中的 DB 设置连接起来

> ID：15996923
> 
> 赞同：3
> 
> 时间：2013-04-14T07:55:12.277
> 
> 标签：mysql, spring, hibernate, maven-3, hsqldb

基本上我想决定使用 2 个数据库项目中的哪一个来运行。

我有以下 **hibernateContext.xml**

```
 <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:database.properties</value>
        </list>
    </property>
 </bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.user}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="com.blog.przem.entity" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>

    </property>
</bean> 
```

和**database.properties**文件

```
jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/pbdb
jdbc.user=root
jdbc.password= 
```

我想要实现的是将 HSQLDB 添加到我的项目中（用于开发、测试），但对于生产我想要 MySQL DB。我已经看到了一些解决方案：

*   在弹簧配置文件中[我可以使用 HSQLDB 进行 junit 测试克隆 mySQL 数据库吗](https://stackoverflow.com/questions/14607665/can-i-use-hsqldb-for-junit-testing-cloning-a-mysql-database)
*   在 Maven 中[http://www.manydesigns.com/en/portofino/portofino3/tutorials/using-maven-profiles-and-resource-filtering](http://www.manydesigns.com/en/portofino/portofino3/tutorials/using-maven-profiles-and-resource-filtering)

我想知道什么是最好的方法，但我想将数据库设置保存在单独的文件中。

1.  我应该创建**database.properties2**文件（带有 HSQL 属性）并添加**propertyConfigurer2**吗？以及如何让dataSource bean知道要使用哪个**propertyConfigurer**（我感觉我错过了什么）？
2.  也许它应该由maven完成？
3.  解决此类问题的专业方法是什么（假设项目最终将使用 MySQL）- 应用程序应始终使用 MySQL，而 HSQLDB 应仅用于运行测试类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:22:35.763

@Ralph 的回答很好用，有人告诉我这对于大型项目来说是一个很好的解决方案，并且我已经获得了另一种解决方案，如何解决我的问题，因此可以为项目和测试文件设置许多数据库，而无需创建额外的 applicationContext-db.xml （但是我不知道是否有单独的配置 xml 用于测试是否比下面介绍的方法更好）

那个代码稍微改变了我的**hibernateContext.xml**

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.user}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="com.blog.przem.entity" />

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.cache.use_second_level_cache">false</prop>
            <prop key="hibernate.cache.use_query_cache">false</prop>
            <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.connection.autocommit">false</prop>
            <prop key="hibernate.transaction.flush_before_completion">true</prop>
        </props>

    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

1.  PropertyPlaceholderConfigurer 被提取（删除了 id="propertyConfigurer"）到新文件**proprtiesContext.xml** （当然被添加到**hibernateContext.xml**）

    ```
    <beans profile="default">
        <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="locations">
                <list>
                    <value>classpath:msql_database.properties</value>
                </list>
            </property>
        </bean>
    </beans>

    <beans profile="testing">
        <bean  class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="locations">
                <list>
                    <value>classpath:hsql_database.properties</value>
                </list>
            </property>
        </bean>
    </beans> 
    ```

2.  然后我修改并添加了两个数据库的配置文件：

**msql_database.propertie**

```
jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/pbdb
jdbc.user=root
jdbc.password=
jdbc.hibernate.dialect=org.hibernate.dialect.MySQLDialect 
```

**hsql_database.propertie**

```
jdbc.driver=org.hsqldb.jdbcDriver
jdbc.url=jdbc:hsqldb:mem;shutdown=true
jdbc.user=sa
jdbc.password=
jdbc.hibernate.dialect=org.hibernate.dialect.HSQLDialect 
```

现在，如果我使用**“默认”**运行（在我的情况下为 Tomcat）服务器- 没什么特别的 - 使用 MYSQL 数据库但是如果我使用参数运行服务器

```
-Dspring.profiles.active="testing" 
```

它使用给定的配置文件，所以我的项目使用 HSQLDB HOORAY

此外，当我在测试类中添加特定配置文件时（就在类名声明之前）：

```
 @ActiveProfiles("default")
public class UserServiceTest { 
```

指定的数据库用于测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T06:14:05.460

所以我建议服务器通过 JNDI 提供数据库连接。

此外，您需要定义数据库方言。因此，我建议使用服务器参数。

对于测试用例，我会使用另一个数据库配置文件，它不使用 jndi，而是像您在测试中需要的那样配置数据库。

* * *

例如在 Tomcat 中：Context.xml（全局或更好的应用程序特定的 context.xml）

```
<Resource name="jdbc/yourApp" type="javax.sql.DataSource"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/pbdb?useUnicode=true&amp;characterEncoding=utf8"

    auth="Container"
    username="" password="geheim"

    maxIdle="3" maxActive="15" maxWait="10000" logAbandoned="true" removeAbandoned="true"

    removeAbandonedTimeout="60" validationQuery="select 1" />

<Parameter name="yourApp.database.dialect" value="mysql" override="false" /> 
```

春天：`applicationContext-db.xml`在`src\main\resources`

```
<jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/yourApp"/>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="com.blog.przem.entity" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${yourApp.database.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>

    </property>
</bean> 
```

现在您可以使用不同的数据库在每个应用程序服务器上配置应用程序。

对于基于 Spring 的数据库“集成”测试，我会在`applicationContext-db.xml`没有 jndi 和方言属性占位符的情况下放置一个特定的测试`src\test\resources`（它“覆盖”了测试的正常测试）。

@See this answer以获取更多信息[Spring Configuration](https://stackoverflow.com/questions/6283653/spring-configuration/6902999#6902999) - 它描述了如何`applicationContext-db.xml`为测试命名的另一种方式。

# drupal-6 - 如何禁用产品描述中的“阅读更多”链接？（ubercart，drupal6）

> ID：15996924
> 
> 赞同：0
> 
> 时间：2013-04-14T07:55:14.070
> 
> 标签：drupal-6, ubercart

我想让产品页面上的所有产品描述可见，我根本不需要“阅读更多”链接。我该如何配置呢？admin/content/node-settings 中的“修剪帖子的长度”是无限的。

# android - 如何停止 editText 更改我的文本？

> ID：15996925
> 
> 赞同：0
> 
> 时间：2013-04-14T07:55:43.590
> 
> 标签：android, android-edittext

我编写了一个程序来获取输入到 editText 的文本并通过 USB/串行链接将其传递到另一个系统。我需要能够输入完全任意的文本并使其“按原样”传输而无需修改。但是，当我输入一个字符串时，例如`4 2 .`或`SWAP OVER . .`最后一个字符和第一个字符之间的空格`.`被删除 - 在这些情况下返回的是`4 2.`和`SWAP OVER. .`

可以理解的是，目标设备无法识别这些并拒绝结果。

我将文本输入到 textView cmdLine 并使用

```
cmdString = (SpannableStringBuilder) cmdLine.getText(); 
```

是否有`getText()`尝试清理文本条目的“功能”，如果有，我该如何禁用它？

# javascript - nodejs上的heredoc

> ID：15996931
> 
> 赞同：3
> 
> 时间：2013-04-14T07:56:36.167
> 
> 标签：javascript, node.js

尝试使用`Heredoc Method`此处描述的内容：http: [//www.developfortheweb.com/2009/03/multi-line-strings-in-javascript/](http://www.developfortheweb.com/2009/03/multi-line-strings-in-javascript/)

```
var string = (<r><![CDATA[

   The text string goes here.  Since this is a XML CDATA section,
   stuff like <> work fine too, even if definitely invalid XML. 

]]></r>).toString(); 
```

我无法让它在 node.js 上运行。我在客户端对其进行了测试——它适用于 Firefox，但适用于 Chrome。

我应该如何在 node.js 上使用**这个方法？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:59:45.813

尽管这篇博文告诉你一些别的东西，**JavaScript 没有heredoc 字符串。**

所以你根本不应该使用它 - 这是一个肮脏的黑客。它在某些浏览器中工作的原因是它们允许内联 XML。NodeJS 可能不会，因为它又丑又脏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-18T11:26:17.870

[现在有了 ES6，使用模板字符串](http://developers.google.com/web/updates/2015/01/ES6-Template-Strings?hl=en)很容易做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T12:50:39.653

我正在寻找它的原因是需要将多行 html 文本（保持良好的 html 缩进并且不将其拆分为 js 字符串）作为模板引擎的参数。

最后，对于我的问题，我刚刚创建了一个带有 heredoc 块的模板引擎 - 所以如果你有人正在寻找 heredoc 只是为了更方便地编写他的模板 -可以使用[https://github.com/AlexLibs/hot](https://github.com/AlexLibs/hot) （模块在 npm 上注册）。

# python - tkinter.TclError：未知选项

> ID：15996935
> 
> 赞同：3
> 
> 时间：2013-04-14T07:57:30.280
> 
> 标签：python, user-interface, tkinter, tk

**更新：** 这只是创建 btComputePayment 时的一个错字。

解决了

* * *

我正在使用“Python 编程简介（Pearson 2013）”一书学习 Python。

目前我正在做一个练习，我必须在 Tkinter 中编写一个贷款计算器。

我似乎无法让以下代码工作：

```
from tkinter import *

class LoanCalculator:
    def __init__(self):
        window = Tk()
        window.title("Loan Calculator")

        # Create labels
        Label(window, text = "Annual Interest Rate").grid(row = 1, column = 1, sticky = W)
        Label(window, text = "Number of Years").grid(row = 2, column = 1, sticky = W)
        Label(window, text = "Loan Amount").grid(row = 3, column = 1, sticky = W)
        Label(window, text = "Monthly Payment").grid(row = 4, column = 1, sticky = W)
        Label(window, text = "Total Payment").grid(row = 5, column = 1, sticky = W)

        # Create entries
        self.annualInterestRateVar = StringVar()
        Entry(window, textvariable = self.annualInterestRateVar, justify = RIGHT).grid(row = 1, column = 2)

        self.numberOfYearsVar = StringVar()
        Entry(window, textvariable = self.numberOfYearsVar, justify = RIGHT).grid(row = 2, column = 2)

        self.loanAmountVar = StringVar()
        Entry(window, textvariable = self.loanAmountVar, justify = RIGHT).grid(row = 3, column = 2)

        self.monthlyPaymentVar = StringVar()
        lblMonthlyPayment = Label(window, textvariable = self.monthlyPaymentVar, justify = RIGHT).grid(\
            row = 4, column = 2)

        self.totalPaymentVar = StringVar()
        lblTotalPayment = Label(window, textvariable = self.totalPaymentVar, justify = RIGHT).grid(\
            row = 4, column = 2)

        btComputePayment = Label(window, text = "Compute Payment", command = self.computePayment).grid(\
            row = 6, column = 2, sticky = E)

        window.mainloop()

    def computePayment(self):
        monthlyPayment = self.getMonthlyPayment(
            float(self.loanAmountVar.get()),
            float(self.annualInterestRateVar.get()) / 1200,
            int(self.numberOfYearsVar.get()))

        # Set monthly payment
        self.monthlyPaymentVar.set(format(monthlyPayment, "10.2f"))
        totalPayment = float(self.monthlyPaymentVar.get()) * 12 \
        * int(self.numberOfYearsVar.get())

        # Set total payment
        self.totalPaymentVar.set(format(totalPayment, "10.2f"))

    def getMonthlyPayment(self, loanAmount, monthlyInterest, numberOfYears):
        monthlyPayment = loanAmount * monthlyInterest / (1 - 1 / (1 + monthlyInterest) ** (numberOfYears * 12))
        return monthlyPayment

LoanCalculator() 
```

这是完整的追溯：

```
/Library/Frameworks/Python.framework/Versions/3.3/bin/python3 "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 9.py"
Traceback (most recent call last):
  File "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 9.py", line 421, in <module>
    LoanCalculator()
  File "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 9.py", line 398, in __init__
    btComputePayment = Label(window, text = "Compute Payment", command = self.computePayment).grid(\
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/__init__.py", line 2596, in __init__
    Widget.__init__(self, master, 'label', cnf, kw)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/__init__.py", line 2075, in __init__
    (widgetName, self._w) + extra + self._options(cnf))
_tkinter.TclError: unknown option "-command"

Process finished with exit code 1 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T12:28:27.013

您在第 33 行使用标签而不是按钮。标签不接受构造函数中的参数“命令”。当您单击按钮时，按钮使用“命令”参数来回调它们所做的事情。

# javascript - 谷歌浏览器对我的脚本有很高的 CPU 使用率

> ID：15996941
> 
> 赞同：1
> 
> 时间：2013-04-14T07:58:12.567
> 
> 标签：javascript, html, google-chrome, web-applications

我创建了一个简单的网页，它基于两个脚本具有一些效果。第一个是旋转 360 全景图，另一个是滚动到顶部 div。这两个脚本都使用 SetInterval 并以 50 毫秒的间隔运行。该页面在 IE 和 Firefox 中似乎可以高效运行，但在 Chrome 中会出现问题，即在 chrome 中 CPU 使用率很高，接近 48%！！！！

请帮忙。

编码：

全景图.js

```
var pant=setInterval(function(){panorama()},70);
function panorama()
{
var panx=document.getElementById("uno").style.left;
panx=parseInt(panx);panx-=1;
if(panx==-1100)
{
panx=0;
}
panx=panx.toString();panx=panx+"px";
document.getElementById("uno").style.left=panx;
document.getElementById("dos").style.left=panx;
} 
```

^ 它适用于 2 张图像。

scroller.js

```
window.onscroll = scrdisp;
function scrdisp()
{
var x=window.pageYOffset;
if(x>=350)
{
document.getElementById("scrolltop").style.display="block";
}
else
{
document.getElementById("scrolltop").style.display="none";
}
}
var t;
function scroll()
{
t=setInterval(function(){scr()},50);
}
function scr()
{
var h=window.pageYOffset;
if(h<=0)
{
clearInterval(t);
}
window.scrollTo(0,h-100);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:27:23.343

检查显示**滚动顶部**元素 1000 毫秒就足够了。

```
function scroll() {
    t=setInterval(function(){scr()},1000);
} 
```

你可以像这样提高性能：

```
var pant=setInterval(panorama,70);
var unoStyle = document.getElementById("uno").style;
var dosStyle = document.getElementById("dos").style;
function panorama() {
    var panx= unoStyle.left;
    panx=parseInt(panx);
    panx-=1;
    if(panx==-1100) {
        panx=0;
    }
    panx=panx+"px";
    unoStyle.left=panx;
    dosStyle.left=panx;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:15:46.310

唯一可能导致不稳定的因素是：

*   在全局范围内命名函数
*   尤其是`scroll`用作可以在其他地方调用的函数名，但期望`window.scroll`

# opera - Opera 扩展错误“未捕获的异常：ReferenceError：安全违规”

> ID：15996942
> 
> 赞同：-1
> 
> 时间：2013-04-14T07:58:29.160
> 
> 标签：opera, opera-extension

我正在研究歌剧扩展。该扩展程序有一个弹出窗口，将在其中打开一个网站。我在 popup.html 文件中的“xhr.send()”处收到以下错误，我无法将其删除。

> “[4/14/2013 12:51:19 PM] JavaScript - 小部件：//wuid-9ec76e79-06d9-2749-8b7e-b42743de3375/popup.html 内联脚本线程未捕获的异常：ReferenceError：在第 30 行抛出安全违规错误, widget://wuid-9ec76e79-06d9-2749-8b7e-b42743de3375/popup.html 中 fetchGames() 中的第 16 列：xhr.send(); 从第 32 行调用，第 12 列在 widget://wuid-9ec76e79- 06d9-2749-8b7e-b42743de3375/popup.html: fetchGames(); "

我的配置文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" id="http://www.example.org/helloworld">
    <name>Hello Extensions!</name>
    <description>A simple hello world example</description>
    <author href="http://www.twitter.com/dstorey/" email="dstorey@opera.com">David Storey, Opera Software</author>
    <icon src="icons/icon-64.png"/>
</widget> 
```

我的 index.html 文件是：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Hello World!</title>
    <meta charset="UTF-8">
    <script>
        window.addEventListener( 'load', function(){
            var theButton;
            var ToolbarUIItemProperties = {
                    disabled: false,
                    title: 'Hello World',
                    icon: 'icons/icon-18.png',
                    popup: {
                        href: 'popup.html',
                        width: 500,
                        height: 500
                    }
                }
            theButton = opera.contexts.toolbar.createItem(ToolbarUIItemProperties);
            opera.contexts.toolbar.addItem(theButton);
        }, false );
    </script>
</head>
<body>

</body>
</html> 
```

我的 popup.html 文件是：

```
<!DOCTYPE HTML>
<html lang="en">
   <head>
        <title></title>
        <link href="style.css" rel="stylesheet" type="text/css" />
        <style type="text/css">
        body {
    background-color: #efefef;
}
        </style>
        <script>
            function fetchGames() {
            alert('hello');
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function(data) {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            var data = (xhr.responseText);
                            document.getElementById('list_games').innerHTML = data;
                            //callback(data);
                        }
                        else {
                            alert('No Games Found');
                            window.close();
                        }
                    }
                }
                var url = 'http://www.anatomic.us/generate-xml';
                xhr.open('GET', url, true);
                xhr.send();
            };
            fetchGames();
            function submitForm(obj)
            {
                var searchKey = document.getElementById('sp').value;
                if(searchKey!=null && searchKey!='')
                {
                    obj.setAttribute('action', 'http://www.3d-game.co/'+searchKey);
                    return true;
//                    chrome.tabs.create({url: 'http://www.3d-game.co/'+searchKey});
                }
                else
                    {
                        alert('Please Enter your search item');
                         return false;
                    }

            }
        </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
<!--        <div class="header">
            <a  href="http://www.3d-game.co/"><img src="icon.png"></a>
        </div>
        <br />-->
        <div id=content>
            <div style='padding-left:10px;'>
                <form id=sf method=post action="http://www.3d-game.co/search/" onSubmit="return submitForm(this);" target="_blank">
                </form>
            </div>
            <div id=cat_content>
                <div id="list_games" class=list_games>
                <img src="loader.gif" border="none" />
                    <div class="ajax-loader">
                        <img src="loader.gif" border="none" />
                    </div>
                </div>
            </div>
    </body>
</html> 
```

请帮我删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T15:09:42.807

在要从中获取数据的文件的标题中添加以下内容：

```
Access-Control-Allow-Origin: * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:10:00.827

在 config.xml 文件中添加这一行：在选项卡之前允许任何域 httprequest，这解决了问题，如果问题仍然存在，请在 Opera 浏览器选项卡中打开“opera:config”并选择“用户首选项”并选中“允许文件 XMLHttpRequest”和重新开始。如果有问题我可以给你我的歌剧扩展工作正常...

# php - 手动启动脚本而不加载它

> ID：15996945
> 
> 赞同：0
> 
> 时间：2013-04-14T07:59:02.223
> 
> 标签：php, cron, load, jobs

我需要通过手动启动脚本但不加载它来减少必须加载一千个文件以进行排名的页面的加载时间（如手动启动的 cron 作业）。

有没有办法使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:05:43.043

假设您想在用户想要在后台启动脚本执行，您可以使用 php exec(); 例子：

```
<?php
$cmd = "php /path/to/php/script/ &> /dev/null &";
exec('/bin/bash -c "' . addslashes($cmd) . '"'); 
```

（$cmd 的语法不是 100% 肯定的，它可能是 /usr/bin/php 或类似的东西，也可能是 php5，具体取决于您的系统。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:00:56.140

你能详细说明一下吗？如果你有一个 apache 服务器，你总是可以为你的 php 脚本运行一个 cron 作业

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:03:59.923

您可以使用“php filename.php”从 shell 运行 php，并且可以使用 cron 作业来执行此操作。但我不确定这是否是您想要的，也许可以看看 opt cache 以使您的网站更快。

# magento-1.7 - Magento外部主题安装麻烦

> ID：15996947
> 
> 赞同：1
> 
> 时间：2013-04-14T07:59:21.493
> 
> 标签：magento-1.7

我正在尝试安装 Magento 主题。我正在尝试通过将主题的应用程序、皮肤和 js 文件夹复制到 magento 的应用程序、js 和皮肤文件夹中来安装它。除了主页之外，主题工作正常。

在主页的内容部分，我添加了这个：

```
<div>
    {{block type="catalog/product_list" template="catalog/product/my_template.phtml"}}
</div> 
```

它加载主题的模板并设置其设计，但在我的情况下它不应用模板，我在这里缺少什么？其他页面，例如关于我们，联系我们是根据主题而不是主页工作的。在其他工作的页面中，内容部分中写入的内容直接是数据，而在主页中它是对名为“my_template”的模板的引用。 phtml"..帮帮我！

# python - AIML 智能应答引擎

> ID：15996951
> 
> 赞同：6
> 
> 时间：2013-04-14T08:00:22.213
> 
> 标签：python, xml, web, artificial-intelligence, aiml

我听说过一种叫做**AIML**的编程语言，它可以用来编写智能机器人。我是一名网络开发人员，拥有一个使用 Python 2.7 构建的网络爬虫，并已将维基百科编入索引...

所以我想用python构建一个回答引擎，它将使用一个字符串变量（它是一个包含整个维基百科的巨大变量）作为信息来源，并使用人工智能来回答......

最后，我想把它放在我的学校网站上......

那么我可以在**AIML**中做到这一点吗？

稍后我还想修改它，以便为我的实时分数提供以下问题的答案：

`"What is the age of ~someperson~?"`等等。为此，我将发送我的网络爬虫来索引一些分数页面等。

**我可以在AIML**中编写这种应答代理程序吗？

如果是，请提供指向教程的链接，告诉我如何做到这一点？（使用字符串变量作为信息源来解析查询并像人类一样回答）

此外，**AIML**使用如下语法：

```
<category>
    <pattern>WHAT ARE YOU</pattern>
    <template>
        <think><set name="topic">Me</set></think> 
        I am the latest result in artificial intelligence,
        which can reproduce the capabilities of the human brain
        with greater speed and accuracy.
    </template>
</category> 
```

模式是查询，模板是答案，这是否意味着我必须坐下来为所有可能的查询编写这些标签？

或者我可以让它用它的大脑来弄清楚人们想要什么，并使用字符串变量作为它的信息源给他们答案。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T10:39:03.860

### 人工智能

看起来[AIML](https://en.wikipedia.org/wiki/AIML)是一种模式匹配。此外，看起来这主要用于[基于对话的代理](https://en.wikipedia.org/wiki/Dialog_system)。因此，要使用 AIML，您可能需要手动生成每个问题和正确的答案（答案）。

### 问答

看起来你真正追求的是我们所说的[问答](https://en.wikipedia.org/wiki/Question_answering)系统。简而言之，QA 系统通常具有以下组件：

*   问题分析。
    *   提取关键字。
    *   （有时）确定预期的答案类型（位置、人员、颜色、数字等）。
*   [候选文档选择——使用信息检索](https://en.wikipedia.org/wiki/Information_retrieval)系统在您的知识库中进行搜索。
*   候选文件分析。
*   答案提取---选择文档的某些部分（句子、段落）。
*   响应生成。
    *   对每个答案进行评分和排名。
    *   显示最有把握的答案。

### 研究

如果你真的想深入研究这个领域，我建议使用[谷歌学术](http://scholar.google.com/)并搜索我提到的一些术语，这将为你提供一些关于这些主题的详细研究论文。一些可以帮助您入门的论文：

*   [自然语言问答：从这里看](http://www.loria.fr/~gardent/applicationsTAL/papers/jnle-qa.pdf)
*   [使用 LCC 的问答服务器回答复杂、列表和上下文问题](http://trec.nist.gov/pubs/trec10/papers/lcc-trec10.pdf)
*   [开放域问答系统的结构和性能](http://acl.ldc.upenn.edu/P/P00/P00-1071.pdf)
*   [学习问答系统的表面文本模式](http://acl.ldc.upenn.edu/P/P02/P02-1006.pdf)
*   [学习问题分类器](http://acl.ldc.upenn.edu/coling2002/proceedings/data/area-11/co-384.pdf)
*   [为什么-QA 的词袋里没有什么？](http://sverberne.ruhosting.nl/papers/Verberne_What%20is%20not%20in%20the%20Bag%20of%20Words%20for%20Why-QA.pdf)

### 无耻的插头

我最近参加了[自然语言处理](https://en.wikipedia.org/wiki/Natural_language_processing)课程，并开发了一个基本的 QA 系统，它使用 Wikipedia 作为知识库。（实际上，我使用了[Simple English Wikipedia](https://simple.wikipedia.org/wiki/Main_Page)，因为它更易于使用；尽管该系统在完整版本上的运行速度要慢得多。）

如果您有兴趣查看一些 Python 代码作为参考，您可以在项目的 GitHub 页面上这样做：[bwbaugh/causeofwhy](https://github.com/bwbaugh/causeofwhy)。此外，还有一些更详细的文档，介绍了[系统组件](https://raw.github.com/bwbaugh/causeofwhy/560d5d2b40c7bd20d537ab06983f01464c86cdde/docs/system-components.md)的每个步骤中发生的情况。

还有一个非常基本的 QA 系统[运行演示](http://causeofwhy.bwbaugh.com/)（当前）可用，但请记住，该系统是一个概念验证系统，可能需要 30 秒以上的时间来回答问题（取决于问题）。

# asp.net - 线程，[WebSocket & nodejs] vs [asp.net & signalR] 澄清？

> ID：15996959
> 
> 赞同：0
> 
> 时间：2013-04-14T08:01:13.213
> 
> 标签：asp.net, node.js, websocket, scalability, signalr

在一种情况下——

*   客户端连接到 asp.net（*它使用 signalR FW*）并将连接升级为 webSocket 连接（tcp）

或者

*   客户端连接到`Node.js`服务器（并升级连接）

问题 ：

如果服务器现在想要启动消息发送，它是否*专门使用一个新线程*来完成它？因为如果是这样，我看不到如何`signalR`|| `Node.js`是可扩展的，因为向 100K 用户发送消息可能会使系统崩溃。

还是我错过了什么:-)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:32:24.427

对于 SignalR，线程数与向客户端打开的套接字数无关。

所以答案是**否定**的。

# windows-phone-8 - 如何在 WP8 中将 dx3d cpp 应用程序添加到游戏中心

> ID：15996960
> 
> 赞同：1
> 
> 时间：2013-04-14T08:01:27.307
> 
> 标签：windows-phone-8

首先使用 c++ 创建一个新的示例 direct3d 项目，PhoneDirect3DApp。第二次将“WMAppManifest.xml”文件的“流派”从“Apps.normal”更改为“Apps.games”。第三次调用 VS Debug 并退出应用程序。

然后，它既不会出现在 GameHub 中，也不会出现在应用列表中。所以我什至无法再次启动该应用程序。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:25:20.663

看起来您没有做错任何事情 - 这似乎是您所描述的本机（即不是 .NET/XAML）非 XBOX 实时标题的平台设计或错误。

有关此主题，请参阅[Microsoft 社交论坛上的此线程](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/03a69208-14e5-44fc-aed0-7860b5cb6321) 。

请注意，除此之外已知这会导致商店认证失败。

然而，商店讨论与 Stack Overflow 无关，因此我不会详细说明您可能会解决什么问题、何时以及如何解决问题，只是将您推荐给 Microsoft 论坛（目前可能是也可能不是最新的）。

# javascript - 动态创建具有特殊形状的自定义 div 元素

> ID：15996961
> 
> 赞同：5
> 
> 时间：2013-04-14T08:01:39.463
> 
> 标签：javascript, jquery, html, css

我想创建一些这样的形状：

![在此处输入图像描述](https://i.stack.imgur.com/uBj6t.png)

这些是 3 个形状。然后我想在这个形状上放一些元素。我尝试使用border-radius 属性，但它无法生成此形状。我也尝试使用`<img>`，但我在上面放置元素时遇到问题。你对此有什么想法？`<map>``<area>`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T08:48:04.173

你只需要有创意：

HTML：

```
<div id="circle">
    <div id="cover"></div>        
    <div id="innerCircle">     
        <div id="rect1"></div>
        <div id="rect2"></div>
    </div>
</div> 
```

CSS：

```
 #circle { 
       width: 140px;
       height: 140px;
       background: red; 
       -moz-border-radius: 70px; 
       -webkit-border-radius: 70px; 
       border-radius: 70px;
        margin: 0 auto;
        position: relative;
        top: -50px;
    }

    #innerCircle { 
       width: 90px;
       height: 90px;
       background: white; 
       -moz-border-radius: 70px; 
       -webkit-border-radius: 70px; 
       border-radius: 70px;
        position: absolute;
        top: 25px;
        right: 25px;
    }

    #rect1 {
        width: 20px; 
       height: 90px; 
       background: white;
    transform: rotate(30deg);
    -ms-transform: rotate(30deg); /* IE 9 */
    -webkit-transform: rotate(30deg); /* Safari and Chrome */
        position: absolute;
        top: 50%;
        left: 5px;
    }

    #rect2 {
       width: 20px; 
       height: 90px; 
       background: white;
    transform: rotate(-30deg);
    -ms-transform: rotate(-30deg); /* IE 9 */
    -webkit-transform: rotate(-30deg); /* Safari and Chrome */
        position: absolute;
        top: 50%;
        right: 5px;
    }

    #cover {
       width: 150px; 
       height: 80px; 
       background: white;
        position: absolute;
        top: 0px;
        left: 0px;
    } 
```

[http://jsfiddle.net/bnSe7/](http://jsfiddle.net/bnSe7/)

或者你可以做这样的事情，弯曲侧面并使用 CSS3 旋转功能来获得三个形状：

[http://jsfiddle.net/RqWtC/1/](http://jsfiddle.net/RqWtC/1/)

您可能必须使用 HTML5 画布来实现您要求的确切复杂形状：

[http://www.html5canvastutorials.com/tutorials/html5-canvas-custom-shapes/](http://www.html5canvastutorials.com/tutorials/html5-canvas-custom-shapes/)

# python - Python：使用 .search 方法提取两个单词之间出现多次的所有内容

> ID：15996962
> 
> 赞同：-1
> 
> 时间：2013-04-14T08:01:59.767
> 
> 标签：python, regex, extract, attributeerror

我有一个 VHDL 文件，其中包含我要提取的一些段落。一般来说，它看起来像这样：

```
Declaration 1.
Some codes.
(Following are paragraphs I want to extract)
case (state) is
    case body 1
end case;

Declaration 2.
Some codes.
(Following are paragraphs I want to extract)
case (state) is
    case body 2
end case; 
```

所以“case body 1”和“case body 2”就是我想要的。“案例（状态）是”和“结束案例”；能配不配，都无所谓。我尝试了一些方法，例如：

```
f1=open('/home/liuduo/Desktop/f2.vhd')
data=f1.read()
pattern=re.compile('case (state) is[\s\S]*?end case;')
reg=pattern.search(data).group() 
```

或者

```
pattern=re.compile('(?<=\bcase\b).*?(?=\bend\b)')
reg=pattern.search(data).group() 
```

或者

```
pattern=re.compile('.*?case(.*?)end.*?')
reg=pattern.search(data).group() 
```

以及借助 Stackflow 中的许多示例的许多其他方法（谢谢！）。但似乎没有任何效果。

我得到的错误是“AttributeError：'NoneType'对象没有属性'group'”，这表明没有任何匹配。我对 Python 很陌生（3 天......）并且在 JAVA 方面的背景很弱，所以 REexp 真的让我很困惑。我想知道是否有人可以帮助我解决这个问题？

太感谢了！

PS如果之前有人问过这个问题，我真的很抱歉，这是在寻找答案数小时后关于 Stackflow 的第一个问题。PLZ帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:32:16.780

尝试

```
pattern=re.compile(r'case \S+ is\s*(.*?)\s*end case', re.DOTALL)
matches=pattern.findall(data)

print(matches)
# ['case body 1', 'case body 2'] 
```

您的第一个正则表达式失败，因为正则表达式`()`中的特殊字符需要转义以匹配它们。

您的第二个和第三个正则表达式失败，因为`.`默认情况下 a 不匹配换行符。

该`search`方法只返回第一个匹配项，所以我用来`findall`获取所有匹配项的列表。

应要求提供进一步解释。

# ruby-on-rails - Carrierwave 和 has_many

> ID：15996966
> 
> 赞同：3
> 
> 时间：2013-04-14T08:03:17.617
> 
> 标签：ruby-on-rails, many-to-many, carrierwave

我有这样的产品模型：

```
class Product < ActiveRecord::Base
 has_many :images, :class_name => 'ProductImage', :order => 'position DESC', :dependent => :destroy

def image_thumb
    images.first.image.thumb.url
  end

  def image
    images.first.image.url
  end
end 
```

产品图片型号：

```
class ProductImage < ActiveRecord::Base
  attr_accessible :image, :position, :product_id, :title

  belongs_to :product

  default_scope order('position ASC')

  mount_uploader :image, ProductImageUploader
end 
```

上传器型号：

```
class ProductImageUploader < CarrierWave::Uploader::Base
...
 def default_url
  asset_path([version_name, "default.jpg"].compact.join('_'))
 end
end 
```

但是，如果我不为产品上传任何图片，我将在 image_thumb 和 image 方法中得到“nil”。如果没有上传一张图片并且 Product 和 ProductImage 模型之间的关系是一对多的，如何获取 default_url？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T14:33:37.303

如果您无权访问上传者，上传者将无法帮助您，因此您必须手动完成。您已经在使用演示者（或多或少），所以这非常简单：

```
def image_thumb
  if images.any?
    images.first.image.thumb.url
  else
    asset_path("default.jpg")
  end
end

def image
  if images.any?
    images.first.image.url
  else
    asset_path("thumb_default.jpg")
  end
end 
```

类似的代码适用于 belongs_to 关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:33:46.097

您为 default_url 获得的价值是多少？

也许路径没有正确评估。

尝试这样的事情（当然更正下面的路径应该是什么）：

```
class ProductImageUploader < CarrierWave::Uploader::Base
   ...

   def default_url
      "/assets/" + [version_name, "default.jpg"].compact.join('_')
   end
end 
```

# ruby-on-rails - Capybara-Webkit：page.should have_content() 没有实现？

> ID：15996969
> 
> 赞同：0
> 
> 时间：2013-04-14T08:03:34.210
> 
> 标签：ruby-on-rails, cucumber, capybara, capybara-webkit

我最近尝试使用：

```
Then(/^I should see "(.*?)"$/) do |arg1|
  page.should have_content(arg1)
end 
```

查询页面并查看页面上是否存在文本。

这适用于默认的 Capybara 驱动程序，但在将 javascript 驱动程序设置为[capybara-webkit](https://github.com/thoughtbot/capybara-webkit)并再次运行测试后，我得到：

```
 undefined method `find_xpath' for #<Capybara::Webkit::Driver:0x007fa3f00152e8> (NoMethodError)
  ./features/step_definitions/customer_steps.rb:12:in `/^I should see "(.*?)"$/'
  features/manage_customers.feature:10:in `Then I should see "ABC XYZ"' 
```

我正在使用 javascript 驱动程序，因为我也在使用 AngularJS 来填充我的数据。

**我的问题：**

1.  have_content() 和 page.has_content?() 没有在[capybara-webkit](https://github.com/thoughtbot/capybara-webkit)中实现吗？
2.  问题的根源可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:52:31.230

看起来可能有问题`capybara-webkit`：[https ://github.com/thoughtbot/capybara-webkit/issues/499](https://github.com/thoughtbot/capybara-webkit/issues/499)

我现在添加`gem 'capybara', '2.0.3'`到我的 gemfile 中，这似乎解决了这个问题。

# vb.net - 设计器中的控件未显示在表单上

> ID：15996971
> 
> 赞同：1
> 
> 时间：2013-04-14T08:03:40.110
> 
> 标签：vb.net, controls, designer

我有一个包含许多控件的面板，设计器文件有它的代码，我在表单上找不到它们，我在文档大纲窗口中看不到它们，尽管在尝试添加同名的新面板时我收到一条错误消息“名称 wowPanel 已被另一个组件使用。我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:56:56.880

我用旧版本替换了我的设计器文件，然后一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:01:52.060

在表单代码中查找具有名称/文本 wowPanel 的所有实例

REM 暂时退出这些行

如果您有 wowpanel 的事件子例程，则 REM 退出任何子例程

接下来添加新的 wowPanel 并将其命名为“wowPanel”

现在 UN-REM（取消注释）您之前 REM 删除的所有代码语句。

那应该这样做。

# php - 如何在 PHP 中保护发布请求和响应

> ID：15996972
> 
> 赞同：0
> 
> 时间：2013-04-14T08:03:56.150
> 
> 标签：php, security, curl

我正在使用 curl post 在我的三个站点之间交换数据。我需要通过确认是否从我的三个站点中的任何一个发送的 POST 请求来保护数据交换。

现在我已经实现了请求标头检查，但也可以操纵请求标头。有没有一种万无一失的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:32:34.527

我正在开发一个 RESTful 服务，并考虑如何确保服务和授权客户端之间的通信。经过长时间的研究，我决定采用以下解决方案。

每个客户端（应用程序）都有一个公共 ID 和一个私钥。公众号可以up。私钥，只有客户端和服务知道。

对于每个请求，客户端必须使用 HTTP 基本身份验证对其进行身份验证。用户名是公共 ID。密码是 SHA1 令牌。令牌由公共 ID、传输参数和私钥组合生成。

当服务收到请求时，他通过用户名知道是哪个客户端发出了这个请求。它使用相同的方法生成一个令牌并将其与密码进行比较。如果两个令牌相同，则客户端有权发出请求。此外，确保不操纵参数。

# html - 在 iframe 上堆叠 div

> ID：15996977
> 
> 赞同：0
> 
> 时间：2013-04-14T08:04:22.093
> 
> 标签：html, css, iframe

我已经尝试了很多次，但我无法得到它，我试图在 iframe 内容之上放置一个 div

```
<div align="middle">
    <div style="position: relative;">
        <iframe 
        src="http://www.theprintblog.com/wp-content/uploads/2013/03/green.jpg"
        width="1000" height="670" scrolling="no">
    </div>
    <div style="position: absolute; left: 50px;">
        <p>hi</p>
    </div> 
```

绿色图片只是一个例子。我只有一个文件托管在一个显示幻灯片的服务器上，我希望能够在它上面放置几个链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:16:08.783

尝试将 iframe 和 div 放置在 top 位置`absolute`，并且都放在相对定位的容器中。快速编辑您的代码：

```
<div style="position: relative;">
    <iframe style="position: absolute;" src="http://www.theprintblog.com/wp-content/uploads/2013/03/green.jpg" width="1000" height="670" scrolling="no"></iframe>
    <div style="position: absolute; left: 50px;">
        <p>hi</p>
    </div>
</div> 
```

以及关于 jsfiddle 的演示：http: [//jsfiddle.net/Zk3Hq/](http://jsfiddle.net/Zk3Hq/)

# php - 获取用户IP并将其插入数据库而不会延迟

> ID：15996978
> 
> 赞同：0
> 
> 时间：2013-04-14T08:04:22.343
> 
> 标签：php, mysql

我在我的索引页面上记录 IP，这是大多数人会访问的页面。我想记录 IP 以进行统计。所有信息都进入 MySQL 数据库。我的问题是滞后。

为我生成页面大约需要一秒钟。我希望它尽可能快，并且服务器连接到数据库并插入日志。现在（我相信）用户进入索引页面，在整个页面加载之前执行我的脚本，该脚本连接到数据库并插入数据。所以用户必须等待一秒钟才能插入数据。我希望用户访问该页面，然后将数据插入数据库。

这是我的代码。

索引.php

```
$ip = $_SERVER['REMOTE_ADDR'];
if(substr($ip,0,4) != "192."){ //Don't log my local IP
    $page = $_SERVER['PHP_SELF']; 
    include("ext/functions.php"); 
    logger($page,$ip);
} 
```

函数.php

```
<?php 
function logger($page, $ip){ 
    $logr = mysqli_query(mysqli_connect($host, $user, $pass,$statDB),
    "INSERT INTO logs (page, DATE, ip) VALUES ('$page', NOW(), '$ip')"); 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:50:58.627

您可以刷新输出缓冲区，以便用户可以看到实际页面，然后执行插入。您是否真的能够做到这一点取决于您的实际实现，但如果它很简单，您可以将代码放在脚本的最后，并且在它执行之前：

```
ob_flush();
flush();
session_write_close();  //optional; it will allow your users to navigate away before the slow operation is complete (if you are using sessions)
//your logging code goes here 
```

*   您可能需要`ob_start();`在脚本的开头调用。
*   这只会让你的页面显示得更快，它不会让它加载得更快（加载图标仍然会显示）

在另一个注释中，正如其他人所提到的，一个简单的操作需要一秒钟，因为这太多了。你必须试着看看为什么它会这么长。首先，检查是连接还是查询本身的问题。在后一种情况下，如果日志表太大，则必须考虑：

*   删除表上的任何（或所有）索引。索引有利于读取，但会减慢写入速度，因此如果您将此表主要用于写入，则应重新考虑其结构。
*   重新考虑您正在使用的[表引擎。](http://dev.mysql.com/doc/refman/5.1/en/storage-engines.html)不同的表类型有不同的性能特点；例如，检查[存档](http://dev.mysql.com/doc/refman/5.0/en/archive-storage-engine.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:25:58.390

您可以在页面完全加载后使用 jquery 来执行此操作：

创建一个 php 页面并将您的 php/mysql 代码存储到其中，如“storeip.php”

然后只需下载 jquery 库并将其插入到您的索引页面中，例如：

```
<script src="scripts/jquery.min.js" type="text/javascript"></script> 
```

并使用以下代码：

```
<script type="text/javascript">
$(document).ready(function(){
var ip = "<? echo $_SERVER['REMOTE_ADDR']; ?>";
var page = "<? echo $_SERVER['PHP_SELF']; ?>";

$.post("storeip.php","ip="+ip+"&page="+page);
});
</script> 
```

这样您就可以在“storeip.php”文件中管理发布的“ip”和“page”变量

# eclipse - 为什么eclipse不支持新的hadoop版本

> ID：15996979
> 
> 赞同：2
> 
> 时间：2013-04-14T08:04:28.363
> 
> 标签：eclipse, hadoop

我想将hadoop与eclipse集成。虽然似乎 eclipse 插件只支持旧版本的 eclipse 和 hadoop，但新版本会导致 EOFException 的错误，[这里](https://stackoverflow.com/questions/9136859/eclipse-hadoop-plugin-says-java-io-eofexception-while-trying-to-connect)有详细信息）我用 Eclipse3.3 和 hadoop0.20.0 完成了我的配置，它运行良好。我想知道如果我想使用新版本的eclipse和hadoop，或者其他方式开发hadoop程序，我应该怎么做。有人可以帮我吗？非常感谢~~

# haskell - Haskell 数据类型函数参数

> ID：15996980
> 
> 赞同：4
> 
> 时间：2013-04-14T08:04:42.850
> 
> 标签：haskell, types

Haskell中函数定义中的括号对于参数的数据类型有什么意义。

例如：

```
doStuff Name -> Age -> String
doStuff (NameConstr a) (AgeConstr b) = "Nom: " ++ a ++ ", age: " ++ b 
```

事先在某处定义以下内容：

```
data Name = NameConstr String
data Age = AgeConstr Integer 
```

函数参数 a 和 b 是否可以以不需要括号的方式捕获？

仅供参考，我正在努力：

*   [http://yannesposito.com/Scratch/en/blog/Haskell-the-Hard-Way/#type-construction](http://yannesposito.com/Scratch/en/blog/Haskell-the-Hard-Way/#type-construction)
*   [http://learnyouahaskell.com/types-and-typeclasses](http://learnyouahaskell.com/types-and-typeclasses) ,

而且我似乎还无法掌握这个更精细的细节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T08:33:12.997

如果没有括号，该函数将被视为具有四个参数。不过，我想不出省略括号会导致歧义的反例。

如果需要，可以按如下方式重新定义类型：

```
data Name = NameConstr { getName :: String  }
data Age  = AgeConstr  { getAge  :: Integer } 
```

这样你的功能就可以变成：

```
doStuff n a = "Nom: " ++ getName n ++ ", age: " ++ show (getAge a) 
```

（固定最后一部分；`a`是一个`Integer`并且不能连接到一个字符串）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T10:41:28.813

实际上，完全可以在没有括号的情况下为（甚至嵌套的）模式解析简单的语法。假设这样一个：

```
<PAT>  ::= <WILDCARD> | <VAR> | <CON0> | <CON1> <PAT> | <CON2> <PAT> <PAT> ...
<VAR>  ::= <LNAME>
<CON*> ::= <UNAME>
<WILD> ::= "_" 
```

其中 LNAME 是以小写字母开头的名称，而 UNAME 是以大写字母开头的名称。在解析时，我们应该查找构造函数名称，以便找出它的数量。然后我们可以使用arity信息解析构造函数字段。但是这种查找可能会使解析本身变得非常复杂并减慢速度。Haskell 有更复杂的模式（视图模式、“as”模式、记录、具有任意固定性的中缀构造函数等），省略括号会导致歧义。

尽管还有另一个理由不这样做。考虑以下代码：

```
data Bar = Bar Int
data Foo = Foo Int

libFunction Foo a Bar b = a + b
someUse bar foo = libFunction foo bar 
```

接下来想象我们稍微改变一下数据类型：

```
data Bar = Bar
data Foo = Foo Int Bar Int 
```

修改后的代码可能仍会进行类型检查，但函数不会像我们预期的那样。这不是一个真实世界的例子，但尽管如此。由于 Haskell 有类型类，因此很难找出我们哪里出错了。

换句话说：我们可以降低错误消息的质量，parens 可以保护我们免受更改后的意外行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T16:22:13.350

这有点傻，但在这种情况下，实际上有一种方法可以避免使用括号：

```
doStuff :: Name -> Age -> String
NameConstr a `doStuff` AgeConstr b = "Nom: " ++ a ++ ", age: " ++ b 
```

这与定义中缀运算符的方式完全相同，并且在定义非运算符标识符时使用反引号对非运算符标识符进行中缀化的效果与在应用它时一样好。

不过，我不建议您实际使用您不希望在反引号中缀样式中使用的函数来执行此操作。

# java - 无法从 ArrayList 中删除

> ID：15996981
> 
> 赞同：-1
> 
> 时间：2013-04-14T08:04:45.407
> 
> 标签：java

```
 import java.util;  
 class Driver{

 public static void main(String[] args) {
      ArrayList<String> lstStr = new ArrayList<String>();
      lsstStr.add("A");
      lsstStr.add("B");
      lsstStr.add("C");
      for(Iterator<String> it = lstStr.Iterator(); it.hasNext();)
      {
          str = it.next();
          if(str.equals("B")){lstStr.remove(str);}
      }
      for(Iterator<String> it = lstStr.Iterator(); it.hasNext();)
      {
        System.out.println(it.next());
      }
 }
 } 
```

这不是从列表中删除“B”。为什么循环第二次运行时Str不等于“B”。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T08:09:25.897

你不能从你正在迭代的集合中删除一个项目，*除了*使用[`Iterator.remove`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)- 你会得到一个`ConcurrentModificationException`. 所以你的循环会是这样的：

```
for (Iterator<String> iterator = list.iterator(); iterator.hasNext();) {
    String value = iterator.next();
    if (value.equals("B")) {
        iterator.remove();
    }
} 
```

当然，您应该使用`removeAll`仅*删除*具有特定值的所有项目 - 但如果您需要基于简单相等以外的某些条件（例如“删除所有长度大于 5 "。另一种选择是收集所有要删除的值到一个新集合中，然后再调用`removeAll`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T08:07:37.330

试试这个：它将从您的列表中删除所有出现的“B”，而不会出现任何循环。

```
lstStr.removeAll(Collections.singleton("B")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:09:33.620

使用迭代器的`remove`方法。它将从集合中删除元素。

# python - 为什么 id 函数的行为与整数和浮点数不同？

> ID：15996984
> 
> 赞同：5
> 
> 时间：2013-04-14T08:05:08.037
> 
> 标签：python, python-2.7

我尝试了以下代码，它给了我不同的输出。

```
>>> foo1 = 4
>>> foo2 = 2+2
>>> id(foo1)
37740064L
>>> id(foo2)
37740064L

>>> foo1 = 4.3
>>> foo2 = 1.3+3.0
>>> id(foo1)
37801304L
>>> id(foo2)
37801232L
>>> 
```

我正在使用 python 2.7.2。为什么 id 函数在浮点数的情况下返回不同的值但在整数的情况下返回相同的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T08:10:52.967

那是因为`id`in 数字常量的结果是实现定义的。

在您的情况下，Python 2.7.2，IIRC，问题在于编译器构建了一些有用的整数常量作为单例（从 -1 到 100 左右）。基本原理是这些数字被频繁使用，以至于每次需要它们时动态分配它们是没有意义的，它们只是被重复使用。

但是那个恒定的单例优化对`float`值没有用，除了可能 0.0 之外，它们太多了！因此，每次`float`需要一个新值时都会分配它，并获得不同的 id。

如需更深入的了解，请阅读源代码！[这个文件](https://github.com/python/cpython/blob/91698d8caa4b5bb6e8dbb64b156e8afe9e32cac1/Include/internal/pycore_interp.h)来自 Python3，但想法是一样的：查找`small_ints`数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:13:52.620

`id`从来都不是真正可预测的，即使是整数也不行。使用低整数*2*和*4*，您恰好碰到了小整数缓存。尝试这个：

```
>>> a = 12345
>>> b = 12345
>>> id(a)
33525888
>>> id(b)
33525852
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-09T06:49:03.563

对于预计会经常使用的小整数和字符串，Python 使用内部内存优化。由于 Python 中的任何变量都是对内存对象的引用，因此 Python 只会将如此小的值放入内存中一次。然后，每当将相同的值分配给任何其他变量时，它都会使该变量指向已保存在内存中的对象。这适用于字符串和整数，因为它们是不可变的，如果变量值发生变化，实际上是该变量使用的引用发生了变化，内存中具有原始值的对象本身不会受到影响。

这就是为什么变量 foo1 和 foo2 在第一种情况下保持对内存中值为 4 的相同整数对象的引用，因此 id 是相同的。

首先，浮点数不是“小”，其次，根据计算，内存中的相同 4.3 可能会保留为 4.3123456789 和 4.31239874654（仅用于解释的示例数字）。所以这两个值是两个不同的对象，但是在计算和显示有意义的部分时看起来是一样的，即 4.3（事实上，对于相同的有意义的浮点数，内存中显然有更多可能的值）。所以在内存中重用同一个浮点数对象是有问题的，毕竟不值得。

这就是为什么在第二种情况下 foo1 和 foo2 在内存中引用不同的浮点对象，因此具有不同的 id。

查看有关浮点数如何保存在内存中的更多详细信息：

[http://floating-point-gui.de/](http://floating-point-gui.de/)

[http://docs.python.org/2/tutorial/floatingpoint.html](http://docs.python.org/2/tutorial/floatingpoint.html)

此外，Oracle 文档中有一篇关于浮点数的大文章。

@josliber，我按照您的建议在重新发布之前编辑了答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T09:17:21.380

对于浮点数，1.0+3.3 == 4.3 并不总是**TRUE**（在 Python 或其他语言中）。具有相同值的可变对象也可以具有不同的 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T08:16:14.380

除了提到的（并且非常真实的）原因之外，您是否`foo1 == foo2`首先验证了？当您处理浮点值时，很容易出现差异......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-05T18:38:40.833

在这种情况下，包含变量的浮点值可能包含相同的数据，但背后的原因是数学规则。唯一的两个值是在点之后考虑的，剩余的值被忽略。所以我们得到了包含变量的相同数据的两个不同地址。为了解决这个错误，我们可以使用 round() 方法。

```
y=3.1254
x = 3.1254
print(round(x,2))
print(round(y,2))
print(id(x)==id(y)) 
```

这可以显示两者具有相同的地址，因为在 print(round(x,2)) 方法和 print(round(y,2)) 方法中，点后只有两位数。

# opengl - 为什么当我使用 glReadPixels() 读取 z-buffer 时 z-buffer 的值总是 0？

> ID：15996986
> 
> 赞同：-1
> 
> 时间：2013-04-14T08:05:36.767
> 
> 标签：opengl, zbuffer

为什么当我使用 glReadPixels() 读取 z-buffer 时 z-buffer 的值总是 0？

```
int main()
{
    glReadPixels(0.0,0.0,width,height,GL_DEPTH_COMPONENT,GL_FLOAT,depth_data);
    for(int i=0;i<10;i++)
        for (int j=0;j<10;j++)
            cout<<depth_data[i][j]<<endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:06:45.353

我猜您只是没有根据您的需要正确设置上下文。需要做的是需要启用写入深度缓冲区 (glDepthMask(GL_TRUE);)。无论如何，最初都是这种情况。此外，OpenGL 要求为要写入深度缓冲区的任何内容启用深度测试。如果您不希望执行深度测试，请添加对 glDepthFunc 的调用以始终写入深度值。

```
glEnable(GL_DEPTH_TEST);
glDepthMask(GL_TRUE);
glDepthFunc(GL_ALWAYS); // Change this to whatever kind of depth testing you want
glDepthRange(0.0f, 1.0f); 
```

您可能还想在读取像素数据后检查任何 OpenGL 错误。也许您甚至没有深度缓冲区？

我希望这有帮助。

# xaml - Windows Store Grid 应用程序中的 XAML 导航

> ID：15996992
> 
> 赞同：1
> 
> 时间：2013-04-14T08:06:48.773
> 
> 标签：xaml, c#-4.0, windows-8, grid, windows-store-apps

我试图在网格应用程序中的 XAML 页面之间导航。为此，我在 XAML 中添加了一个新的 XAML 和一个按钮，按钮事件的 cs 代码是

```
 private void OnClick(object sender, RoutedEventArgs e)
   {
     Frame.Navigate(typeof (GroupedItemsPage));
   } 
```

单击此按钮时，我的应用程序应导航到 GroupedItemsPage，但它会引发空异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:25:02.510

尝试这个 ：

```
 private void OnClick(object sender, RoutedEventArgs e)
 {
     this.Frame.Navigate(typeof (GroupedItemsPage));
 } 
```

[也请在那里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)看看。

# json - 解组异构结构的 JSON 数组

> ID：15996997
> 
> 赞同：7
> 
> 时间：2013-04-14T08:07:32.083
> 
> 标签：json, go

我想反序列化一个包含某个接口数组的对象`Entity`：

```
type Result struct {
    Foo int;
    Bar []Entity;
}; 
```

`Entity`是由许多结构类型实现的接口。JSON 数据使用每个实体中的“类型”字段来标识结构类型。例如

```
{"type":"t1","field1":1}
{"type":"t2","field2":2,"field3":3} 
```

我将如何以`Result`正确填充数组的方式反序列化类型。据我所知，我必须：

1.  `UnmarshalJSON`上实施`Result`。
2.  解析`Bar`为`[]*json.RawMessage`.
3.  将每个原始消息解析为`map[string]interface{}`.
4.  检查原始消息中的“类型”字段。
5.  创建适当类型的结构。
6.  *再次*解析原始消息，这次解析到刚刚创建的结构中。

这一切听起来非常乏味和无聊。有一个更好的方法吗？或者我是在倒退，并且有一种更规范的方法来处理异构对象数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T12:37:38.947

我认为您的过程可能比它必须的要复杂一些，请参阅[http://play.golang.org/p/0gahcMpuQc](http://play.golang.org/p/0gahcMpuQc)。一个 map[string]interface{} 将为您处理很多。

或者，您可以制作类似的类型

```
struct EntityUnion {
    Type string
    // Fields from t1
    // Fields from t2
    // ...
} 
```

解组到那个；它将设置类型字符串并填写它可以从 JSON 数据中获取的所有字段。然后你只需要一个小函数将字段复制到特定类型。