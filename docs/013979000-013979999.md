# StackOverflow 问答 13979000-13979999

# ruby-on-rails - Mongoid - save 和 update_attribute 不持久

> ID：13979001
> 
> 赞同：5
> 
> 时间：2012-12-20T19:18:58.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid3

我正在尝试从我的 Mongo 集合中的记录更新属性，但新值没有被保存。

```
a = GraphEngine::UserPlace.where(place_id:5000000701039).first
a.place_id = 5000000257690
a.save!
=> true 
```

如果我检查`a`，则`place_id`反映新值，`5000000257690`但是当我再次加载记录时，新的 place_id 不会持续存在。

**知道为什么会这样吗？**我已检查以确保没有重复记录。

我也尝试过`a.update_attribute(:place_id,5000000257690)`，但也没有运气。它返回`=> true`，但该值不会持续存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T22:41:23.777

检查 place_id 是否可访问。如果没有在模型中添加这样的东西：

```
attr_accessible :place_id 
```

# jquery - jQueryUI Draggable 如何动态更改插入到可排序的对象

> ID：13979002
> 
> 赞同：1
> 
> 时间：2012-12-20T19:19:04.607
> 
> 标签：jquery, jquery-ui, dynamic, draggable, jquery-ui-sortable

我正在努力寻找将对象 jQuery UI droppable 插入到目标 div 中的正确方法。

我一直在玩停止，但我不知道如何更改项目的 html。

这是我正在拖动的一段复杂的 html，我需要获取它的 ID 并将其发送到工厂函数并使用接收到的对象进行实际插入，而不是使用拖放的对象。

我正在使用可拖动的可排序并将其连接到可排序的连接。

我正在使用 jQuery 1.8.3 和 jQuery UI 1.9.2。

谢谢！！

这是我的代码的样子：

```
$(".class").on("dragstop", function (event, ui) {
    var id= ui.helper[0].id;

    var o = $(snippetFactory(id));
   //  I Want "o" to be inserted instead of the object dragged.

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:46:28.827

您可以使用

```
var id= ui.helper[0].id;
var o = $(snippetFactory(id));
ui.item.replaceWith(o); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T00:00:45.610

sortable 中的事件`receive`是你的朋友（[http://api.jqueryui.com/sortable/#event-receive](http://api.jqueryui.com/sortable/#event-receive)）

*   ui.item 指的是可拖动的源对象。
*   ui.helper 为您提供放置的对象

所以你可以做

```
$(".selector").sortable({
  receive: function(event, ui) {
    var id= ui.helper[0].id;
    var o = $(snippetFactory(id));
    $(ui.helper[0]).replaceWith(o);
  }
}); 
```

# jquery - 在 jquery 选择菜单上设置宽度

> ID：13979003
> 
> 赞同：5
> 
> 时间：2012-12-20T19:19:09.093
> 
> 标签：jquery, jquery-ui, styles

我正在做一个小项目，很难让 selectmenu 及其项目拉伸以填充容器。正在设置宽度，我真的不知道在哪里。我是这个插件的新手，并不是一个网络开发者。

看起来样式是在样式表中定义的：

```
#PDropdown .ui-widget, .ui-selectmenu-menu .ui-widget{ 
font-family:'Lucida Sans';
font-size:.85em;
width: 97%; /* gets overridden....*/ 
```

}

然而，当页面被渲染时，会应用一个宽度：

```
<a class="ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown" id="PDropDownList-button" role="button" href="#nogo" tabindex="0" aria-haspopup="true" aria-owns="PDropDownList-menu" style="width: 135px;" aria-disabled="false"><span class="ui-selectmenu-status">Item</span><span class="ui-selectmenu-icon ui-icon ui-icon-triangle-1-s"></span></a> 
```

如何将其设置为 100% 宽度？对不起，如果这很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:38:51.270

通常这不是一个很好的做法，但为了简单起见，您可以添加`!important`到 CSS 规则中，它会保护它不被覆盖。像这样：

```
width: 97% !important; 
```

此外，您可能需要添加此规则；

```
.ui-selectmenu-open {width: 97.3% !important;} 
```

在此页面上工作[http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html](http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html)

再说一次，请记住，这是一个非常糟糕的 hack，我建议它只是因为你说你不是 web 开发人员，它是最简单的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-06T14:53:47.863

我试图以百分比声明选择菜单的宽度，但 jQuery 每次将其减少 2%。我不知道为什么。

此示例创建宽度为 98% 的选择菜单。此选择菜单是响应式的。

```
$("select").selecmenu(
    {
        width: "100%"
    }
); 
```

我使用“calc”函数避免了这种行为。

```
$("select").selecmenu(
    {
        width: "calc(100% - 1px)"
    }
); 
```

减少 1px 是因为选择菜单的宽度被 jQuery 加宽以避免换行。我将此解决方案用于 jQuery UI 版本 1.11.4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T23:39:23.247

这就是我动态执行的方式（响应式和百分比）：

在 CSS 中声明百分比：

```
 select{
    width: 100%;
 } 
```

在你的 JavaScript 中：

```
jQuery("select").selectmenu(
        {
            width:  jQuery(this).attr("width"),
        }   
); 
```

# parsing - 是否有任何 OpenType 字体文件旨在测试解析代码路径？

> ID：13979004
> 
> 赞同：1
> 
> 时间：2012-12-20T19:19:09.143
> 
> 标签：parsing, fonts, opentype

我一直在构建一个通用的 OpenType ".otf"/".ttf" 文件解析库，它必须至少解析一些更复杂的表，例如 GPOS 和 GSUB 表。我一直在对解析器使用各种现有的 OpenType 字体文件来刷新错误。到目前为止一切都很好，尽管要完整地支持规范是一项非常重要的工作。主要是因为很多 OpenType 字体文件的表、子表，甚至更低级别的数据结构都有多种格式。

但是任何给定的字体文件都只使用了这些无数格式的一个子集。我发现规范经常令人困惑，因此很难正确解析代码。测试是必不可少的。

那么......是否有一个字体文件或字体文件集合，可用（免费或出售）被明确设计为不是工作字体，而是尽可能多地使用 OpenType 解析代码路径？

我浏览了网络，查看了 Adob​​e 的 FDK 等，但都一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:40:31.473

我很想知道你为什么需要重新实现这些:-)。欢迎离线联系我。

我建议尝试以下字体：

*   伊朗Nastaliq 和其他Nastaliq 字体，

*   印度字体，例如 Lohit 系列，

*   您可能会找到的任何脚本字体。

googlefontdirectory 是一个很好的大规模测试集合：

[https://code.google.com/p/googlefontdirectory/](https://code.google.com/p/googlefontdirectory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:22:59.080

我不知道有什么专门为此目的设计的，但是在[sourceforge](http://sourceforge.net/directory/os%3amac/license%3aopenfontlicense11/freshness%3arecently-updated/)有一堆 OpenType 字体可能对此有用，包括您可能已经知道的 Adob​​e 的 Source Sans Pro 和 Source Code Pro 系列以及一些可能的阿拉伯语也很有趣。[您可以在Adob​​e 的 github](https://github.com/adobe/)中找到字体源文件。

# coffeescript - Coffeescript for 循环

> ID：13979007
> 
> 赞同：20
> 
> 时间：2012-12-20T19:19:13.933
> 
> 标签：coffeescript

我正在尝试将一些苹果图表示例从 javascript 转换为 coffeescript。很难弄清楚如何在咖啡脚本中编写这个 for 循环。感谢您提前提供任何帮助

```
for (scale = maxVal; scale >= 0; scale -= stepSize) {...} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T20:07:48.760

此循环将递增 stepSize 的负数。

```
maxVal = 10
stepSize = 1
for scale in [maxVal..0] by -stepSize
  console.log scale 
```

但是，如果 stepSize 实际上是 1，那么

```
maxVal = 10
for scale in [maxVal..0]
  console.log scale 
```

会产生相同的结果

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T19:21:31.863

```
scale = maxVal
while scale >= 0
  ...
  scale -= stepSize 
```

有一个很好的将 JS 转换为 Coffeescript 的工具：http: [//js2.coffee/](http://js2.coffee/)

# javascript - 仅检测视口 jQuery 中的元素

> ID：13979008
> 
> 赞同：1
> 
> 时间：2012-12-20T19:19:15.133
> 
> 标签：javascript, jquery, iphone, ipad, viewport

我有以下内容：

```
 <div id="btnL">Left</div>
    <div id="btnR">Right</div>

    <table id="tab1">
            <thead>
                    <tr>
                            <td>Item</td>
                            <td>Price</td>
                            <td>Descript</td>
                    </tr>
            </thead>
            <tbody>
                    <tr>
                            <td>Entry</td>
                            <td>Entry</td>
                            <td>Entry</td>
                    </tr>
                    <tr>
                            <td>Entry</td>
                            <td>Entry</td>
                            <td>Entry</td>
                    </tr>
                    .
                    .
                    .
                    <tr>
                            <td>Entry</td>
                            <td>Entry</td>
                            <td>Entry</td>
                    </tr>

            </tbody>
    </table>

    <script>
            $("#btnR").click(function(e) {
                    $("#tab1 thead tr td:nth-child(n+2).css("display","table-cell");
                    $("#tab1 thead tr td:nth-child(-n+1).css("display","none");
            });
            $("#btnL").click(function(e) {
                    $("#tab1 thead tr td:nth-child(n+2).css("display","none");
                    $("#tab1 thead tr td:nth-child(-n+1).css("display","table-cell");
            });
    </script> 
```

代码按预期工作，隐藏和显示最后一个元素。问题是表中有 20,000 行，渲染速度非常慢。我只想影响视口中的元素（+- 一些），并且随着用户向下滚动更改其他元素，而不是一次更改它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:04:44.837

假设您要隐藏特定列。在创建表期间，将一个类附加到该列的每个 td （假设类被称为`specialTD`）。

像这样在你的css中输入：

> table.hideCol .specialTD { 显示：无；}

现在，每当您需要隐藏/显示该列时，只需在表格中添加/删除该类即可。

* * *

附带说明一下，您的子选择器对我来说似乎不正确。

> -n + 1 仅表示第一个 td。
> n + 2 表示从秒开始的每个 td。

参考[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

# android - 为什么我的应用没有显示在 Google Play 的平板电脑上？

> ID：13979012
> 
> 赞同：3
> 
> 时间：2012-12-20T19:19:34.960
> 
> 标签：android, android-manifest, google-play

我制作了一个应用程序，在 AVDM 中的手机和平板电脑上运行良好，将应用程序上传到 Google Play，但这并没有在平板电脑中显示，仅在手机中。我拿了一些其他问题的代码，但仍然没有。我想我需要删除或添加一行，我的 Android Manifest 是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.pack"
    android:installLocation="preferExternal"
    android:versionCode="3"
    android:versionName="3.1"
    android:windowSoftInputMode="adjustPan" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:requiresSmallestWidthDp="100" />

    <uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature>

    <compatible-screens>

    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

    <!-- Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />

    </compatible-screens>

    <application
        android:icon="@drawable/ic_launcher1"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".Main"
            android:label="@string/main"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:21:10.017

有几件事，

您有电话使用功能，但不请求电话权限。如果您不使用电话，请删除此线路。

```
<uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature> 
```

`android:windowSoftInputMode="adjustPan"`应该在你的`<activity>`块内。

下一个，

```
android:requiresSmallestWidthDp="100" 
```

从

> 如果您的应用程序为较小的屏幕尺寸（缩小到小尺寸或最小宽度 320dp）正确调整大小，则不需要使用此属性。
> 
> 注意：Android 系统不关注该属性，因此它不会影响您的应用程序在运行时的行为方式。相反，它用于为您的应用程序在 Google Play 等服务上启用过滤。但是，Google Play 目前不支持此属性进行过滤（在 Android 3.2 上），因此如果您的应用程序不支持小屏幕，您应该继续使用其他尺寸属性。

或者，来自同一来源——

```
android:resizeable="true" 
```

> 指示应用程序是否可针对不同的屏幕尺寸调整大小。默认情况下，此属性为 true。如果设置为 false，系统将在大屏幕上以屏幕兼容模式运行您的应用程序。
> 
> 此属性已弃用。它的引入是为了帮助应用程序从 Android 1.5 过渡到 1.6，当时首次引入了对多屏幕的支持。你不应该使用它。

# android - 代码在模拟器上工作但在真实设备上不工作

> ID：13979015
> 
> 赞同：0
> 
> 时间：2012-12-20T19:19:43.107
> 
> 标签：android

```
public class MySmthng extends Activity {
/** Called when the activity is first created. */

MediaPlayer mediaPlayer = new MediaPlayer();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String url = "http://108.166.161.206:8826/;stream.mp3";
    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    try {
        mediaPlayer.setDataSource(url);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        mediaPlayer.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } // might take long! (for buffering, etc)
    mediaPlayer.start();

}
} 
```

大家好，这是一个流音频的小代码。这段代码在模拟器上运行得很好，但是当我在我的设备上安装 apk 时，除了启动应用程序之外什么都没有发生。谁能帮我解决这种问题。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:20:21.530

您是否已在清单文件中设置了所需的所有权限？最重要的是：

> 使用权限 android:name="android.permission.INTERNET" />

看看这个网站，看看你需要什么其他权限：[这里](http://developer.android.com/guide/topics/media/mediaplayer.html)

我希望这有帮助。但是，由于它在模拟器上工作，权限可能不是问题，无论如何检查一下都是好的。

# c# - Bings 地图中的路线

> ID：13979017
> 
> 赞同：1
> 
> 时间：2012-12-20T19:19:54.260
> 
> 标签：c#, windows-phone-7

我使用了文档并遵循了所有步骤，但是当我尝试实现代码时，我什么也看不到。

```
BingMapsDirectionsTask bingMapsDirectionsTask = new BingMapsDirectionsTask();

// You can specify a label and a geocoordinate for the end point.
GeoCoordinate spaceNeedleLocation = new GeoCoordinate(-33.3935,-070.6215);
LabeledMapLocation spaceNeedleLML = new LabeledMapLocation("camino las rosas,santiago,chile", spaceNeedleLocation);

// If you set the geocoordinate parameter to null, the label parameter is used as a search term.
// LabeledMapLocation spaceNeedleLML = new LabeledMapLocation("Space Needle", null);

bingMapsDirectionsTask.End = spaceNeedleLML;

// If bingMapsDirectionsTask.Start is not set, the user's current location is used as the start point.

bingMapsDirectionsTask.Show(); 
```

# c# - Windows Phone 应用程序中的引用错误

> ID：13979019
> 
> 赞同：0
> 
> 时间：2012-12-20T19:20:26.437
> 
> 标签：c#, database, wcf, windows-phone

我试图将我的 Windows Phone 应用程序连接到 WCF。我有一个连接，但是当我尝试使用 WCF 中的方法时，我在应用程序参考中收到错误。

行：base.EndInvoke("setString", _args, result);

错误信息：

```
An exception of type 'System.ServiceModel.CommunicationException' occurred in System.ServiceModel.ni.dll but was not handled in user code 
```

# oracle - Listagg 函数与 PLSQL 集合

> ID：13979024
> 
> 赞同：4
> 
> 时间：2012-12-20T19:20:48.323
> 
> 标签：oracle, collections, plsql, oracle11g, aggregate-functions

我有以下类型的 PL/SQL 集合

```
type p_typ_str_tab is table of varchar2(4000) index by pls_integer; 
```

我想用一个简单的内联函数将这些值聚合到一个字符串中，比如`LISTAGG`不编写任何自定义函数或 for 循环。所有的例子`LISTAGG`都没有展示如何使用 PL/SQL 集合。我正在使用 Oracle 11g R2。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T19:35:24.037

为了能够对集合使用`LISTAGG`函数，集合必须声明为嵌套表而不是关联数组，并且必须创建为 sql 类型（模式对象），因为在 select 语句中无法使用 pl/sql 类型。为此，您可以执行以下操作：

```
--- create a nested table type
SQL> create or replace type t_tb_type is table of number;
  2  /

Type created

--- and use it as follows
SQL> select listagg(column_value, ',') within group(order by column_value) res
  2    from table(t_tb_type(1,2,3)) -- or call the function that returns data of 
  3  /                              -- t_tb_type type

RES
-------
1,2,3 
```

否则，这`loop`是您唯一的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T19:29:49.510

`LISTAGG`是一个分析 SQL 函数，它们不针对 PL/SQL 集合操作，而是针对游标/行集。

所以，简而言之，不，这是不可能的。

也就是说，遍历 PL/SQL 表以构建连接字符串是微不足道的：

```
l_new_string := null;
for i in str_tab.first .. str_tab.last
loop
  if str_tab(i) is not null then
    l_new_string := str_tab(i) || ', ';
  end if;
end loop;
-- trim off the trailing comma and space
l_new_string := substr(l_new_string, 1, length(l_new_string) - 2); 
```

# entity-framework - 通过实体框架的 Html.DisplayNameFor() 关系

> ID：13979026
> 
> 赞同：1
> 
> 时间：2012-12-20T19:21:07.510
> 
> 标签：entity-framework, razor, asp.net-mvc-4

我正在遍历模型中的每个项目，并显示几个属性的名称和数据。这工作正常。

```
@foreach (var item in Model)
{
   <div class="Ticket">
    <h3>
    @item.Title
    </h3>

    @Html.DisplayNameFor(model => model.DateCreated)
    @Html.DisplayFor(modelItem => item.DateCreated) 
```

由于模型有一个关联的 DataAnnotation 提供格式化线索，这最终会输出类似“Created 1/1/1”的东西。目前很好。

我还想做的是显示通过实体框架与模型关联的项目的 [格式化] 名称。我可以使用代码显示数据参数...

```
 @Html.DisplayFor(modelItem => item.LinkedEntity.Data) 
```

但我无法弄清楚显示相关标签的语法。有任何想法吗？

# sql-server - 添加和填充列或添加持久计算列？

> ID：13979027
> 
> 赞同：4
> 
> 时间：2012-12-20T19:21:14.813
> 
> 标签：sql-server, sql-server-2008, etl

我有一个包含 1000 万行、5GB 数据、没有主键但有一个聚集索引的数据库表。每天都会添加 100 条数千条记录。我希望添加一个新列：

```
 ALTER TABLE dbo.CMS_hsplit ADD
     split_locIDacd  AS CONVERT(varchar(8), split) + '-' + 
     CONVERT(varchar(8), CASE WHEN loc_id = 105 THEN acd ELSE loc_id END) PERSISTED 
```

分配给它的 DBA 更愿意更改加载表的 ETL 过程。我知道持久化的计算字段需要一些时间来回填数据。使用计算字段真的有很大的开销吗？

**更新**

计算字段预计不会改变多年

如果定义确实发生了变化，则必须具有追溯力

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T19:46:16.717

我认为添加或填充列的开销并不是重点。一个更重要的问题是，在数据库的生命周期内，您的计算列定义是否始终对表中的每一行有效？如果您需要更改定义，或者如果在某个日期之后添加的新行应该具有不同的定义，但旧行应该保留当前定义，那么计算列将不切实际或完全不可能。

我的偏好是添加一个普通列并将用于填充它的业务规则添加到您的 ETL 流程中。这也确保您的所有业务规则都在一个地方（您的 ETL 代码），而不是在代码和模式之间拆分。

# django - Django 测试错误

> ID：13979029
> 
> 赞同：0
> 
> 时间：2012-12-20T19:21:23.573
> 
> 标签：django, django-testing

运行时`python manage.py test myapp2`，我收到此错误：

```
Creating test database for alias 'default'...
Problem installing fixture '... project folder .../mymainapp/fixtures/initial_data.yaml': Traceback (most recent call last):
  File "... project folder .../venv/lib/python2.7/site-packages/django/core/management/commands/loaddata.py", line 196, in handle
    obj.save(using=using)
  File "... project folder .../venv/lib/python2.7/site-packages/django/core/serializers/base.py", line 165, in save
    models.Model.save_base(self.object, using=using, raw=True)
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/base.py", line 524, in save_base
    manager.using(using).filter(pk=pk_val).exists())):
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/query.py", line 565, in exists
    return self.query.has_results(using=self.db)
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/sql/query.py", line 441, in has_results
    return bool(compiler.execute_sql(SINGLE))
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 818, in execute_sql
    cursor.execute(sql, params)
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
DatabaseError: Could not load myapp2.table2(pk=1): relation "myapp2_table2" does not exist
LINE 1: SELECT (1) AS "a" FROM "myapp2_table2" WHERE "myapp2...
                               ^ 
```

但是，所有实际测试都运行良好，因此看来该夹具确实已成功安装。在运行南迁移时，我也可以成功安装这些装置。

即使它似乎没有任何影响，我能做些什么来修复这个错误？这似乎是在我手工制作南迁移之后才发生的。

# objective-c - Function calls with pointers in Objective C

> ID：13979031
> 
> 赞同：1
> 
> 时间：2012-12-20T19:21:25.963
> 
> 标签：objective-c, pointers, nsstring

I'm a newbie in Objective C, used to write C. Anyway, I have a class called DataProcessing:

```
DataProcessing.m
...
- (BOOL)MyStringTweaker:(NSString *)strIn : (NSString *)strOut {
    if(some_thing) {
        strOut = [NSString stringWithFormat:@"I_am_tweaked_%@", strIn];
        return true;
    }
    else
        return false;
}
... 
```

From the AppDelegate (OSX Application)

```
AppDelegate.m
...
NSString *tweaked;
DataProcessing *data_proc = [[DataProcessing alloc] init];
if([data_proc MyStringTweaker:@"tweak_me":tweaked])
    NSLog([NSString stringWithFormat:@"Tweaked: %@", tweaked]);
else
    NSLog(@"Tweaking failed...");
... 
```

This doesn't work, *tweaked is NIL after the call to MyStringTweaker...

What am I missing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:28:11.090

Objective-C, like C, is pass-by-value only. You need to change your method signature to be:

```
- (BOOL)MyStringTweaker:(NSString *)strIn : (NSString **)strOut 
```

and use:

```
*strOut = [NSString stringWithFormat:@"I_am_tweaked_%@", strIn]; 
```

to do the assignment.

Then, where you call it, you need to pass the address of the pointer you want to fill in:

```
[data_proc MyStringTweaker:@"tweak_me" :&tweaked] 
```

A good explanation is in the [comp.lang.c FAQ](http://c-faq.com/ptrs/passptrinit.html).

Editorial aside: Why not label the second argument? It looks weird to have it naked like that.

# objective-c - 如何将数据从一个阵列移动到另一个阵列？使用 UITableView

> ID：13979042
> 
> 赞同：1
> 
> 时间：2012-12-20T19:21:45.753
> 
> 标签：objective-c, cocoa-touch, uitableview, ios6, nsmutablearray

继上一个问题之后，我有一个表格视图，其中填充了 2 个 NSMutableArrays、2 个部分和 2 个部分标题，所有这些都可以正常工作。

```
incompleteItems = [NSMutableArray arrayWithObjects: @"Item 1", @"Item 2", @"Item 3"... , nil];

completeItems = [NSMutableArray arrayWithObjects: nil]; 
```

我进行了设置，以便当用户向右滑动时，单元附件从显示变为复选标记，向左滑动时从复选标记变为显示。手势是使用 handleSwipeLeft/Right 方法实现的。

我想做的是当用户向右滑动时，将不完整项数组中的项目移动到完成项数组中，从而将项目从“不完整”部分移动到“完成”部分。

实现这一目标的最佳方法是什么？我的经验有限，所以这有点超出我的知识范围。

一如既往地感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:56:11.560

您可以简单地将对象从一个数组添加到另一个数组，然后立即将其删除。

```
-(void)incompleteToCompleteAtIndex:(NSUInteger)index
{
    [complete addObject:[incompleteItems objectAtIndex:index]];
    [incompleteItems removeObjectAtIndex:index];
}

-(void)completeToIncompleteAtIndex:(NSUInteger)index
{
    [incompleteItems addObject:[complete objectAtIndex:index]];
    [complete removeObjectAtIndex:index];
} 
```

由于这只会作为 UI 操作的结果发生，我假设这将发生在主线程上，并且没有理由锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:03:07.237

你需要好看的动画吗？签出：`deleteRowsAtIndexPaths:withRowAnimation:`和`insertRowsAtIndexPaths:withRowAnimation:`。确保使用`beginUpdates`和包装这些调用`endUpdates`。

我不知道将单元格从一个 tableView 移动到另一个的简单方法。我可以想象一种方法需要您手动执行 3 步动画，移除单元格（并将其添加到浮动在整个视图层次结构前面的新视图中），将新视图移动到目标位置（您可以需要自己做数学来确定目的地的屏幕坐标），最后是一个附加动画。您可以使用一个完全透明的虚拟单元格，并在动画的第一个和最后一个片段中将其换入/换出，以便为 tableview 提供一些东西来保存您传输的单元格的位置。

# c# - 是否可以重新加载 XDocument 并保留对它的所有现有引用？

> ID：13979043
> 
> 赞同：2
> 
> 时间：2012-12-20T19:21:50.777
> 
> 标签：c#, linq-to-xml

我通过 XDocument 的静态 Load 方法（采用 XmlReader）创建了一个 XDocument，如下所示：

```
XDocument doc;

doc = XDocument.Load(reader); 
```

现在，有必要在某个时候重新加载文档（在进行更改后恢复到原始版本）。这样做的明显方法似乎是`doc = XDocument.Load(reader);`。但是，这将创建一个新的 XDocument，并且任何现有的对 XDocument 的引用`doc`仍将指向旧的（更改的）版本，尽管我们已经（重新）加载了原始版本。

有没有办法将 XmlReader（甚至 XML 的字符串或字节 [] 表示）加载到现有的 XDocument 中，覆盖内容？还是我必须手动进行所有更改（删除其元素并添加新元素）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:27:32.960

您可以替换`XDocument`.

```
var oldDoc = new XDocument();
oldDoc.Add(new XElement("OldRoot"));
var newDoc = new XDocument();
newDoc.Add(new XElement("NewRoot"));
oldDoc.Root.ReplaceWith(newDoc.Root); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T19:28:33.927

你应该能够做到

```
 doc.Root.ReplaceWith( XElement.Load(fileName)); 
```

如果您想保留处理指令，您可能需要先加载到临时 XDocument。

# c# - 带有 Mono 的 Mac 上的 mkbundle：找不到“mono/metadata/mono-config.h”文件

> ID：13979044
> 
> 赞同：18
> 
> 时间：2012-12-20T19:21:52.430
> 
> 标签：c#, macos, mono, mkbundle

我正在尝试使用 Mono 创建一个 Mac 捆绑包。当我执行时：

```
 mkbundle file.exe --deps -o FILE 
```

我在编译期间得到这个：

```
 fatal error: "mono/metadata/mono-config.h" file not found 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-22T07:52:00.277

关键是前面的错误（`sh: pkg-config: command not found`），注意pkg-config存放在'/Library/Frameworks/Mono.framework/Commands'。

解决方案（参见[此处](https://www.mail-archive.com/devel@lists.monobjc.net/msg00018.html)和[此处](https://bugzilla.novell.com/show_bug.cgi?id=513662)）：

将“/Library/Frameworks/Mono.framework/Commands”文件夹添加到您的 PATH 变量中：

```
export PATH=/Library/Frameworks/Mono.framework/Commands:$PATH 
```

此外（如 aiapatag 以及此处提出的[objective-c 运行时和CoreFoundation 框架解决方案所提出的](https://stackoverflow.com/questions/23089844/mono-3-4-0-mkbundle-under-mac-os-x-failed)）。

```
export AS="as -arch i386"
export CC="cc -arch i386 -framework CoreFoundation -lobjc -liconv" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-08T04:16:45.607

我在我的 Mac 上遇到了同样的问题。我通过设置 pkg-config 解决了它。

```
export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/lib/pkgconfig:/Library/Frameworks/Mono.framework/Versions/3.0.12/lib/pkgconfig 
```

请注意，对于 Mac，您必须...

```
export AS="as -arch i386"
export CC="cc -arch i386" 
```

...如此处所述[在 Mac OS X 雪豹](https://stackoverflow.com/questions/6442223/an-issue-when-running-mono-2-10-2-mkbundle-on-mac-os-x-snow-leopard)上但在 Mountain Lion 上运行单声道 2.10.2 mkbundle 时出现问题，我不得不这样做，以便应用程序可以在 Lion 上运行。

```
export AS="as -arch i386"
export CC="clang -arch i386 -mmacosx-version-min=10.6" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-07T05:10:59.233

尝试重新安装 Mono Development Kit (MDK)。不要在 MDK 之上安装 Mono Runtime Environment (MRE)。MDK就足够了。

然后，如果您使用的是 Windows（但我猜您使用的是 OSX - 但只是提一下）：您将需要一个类似 Unix 的工具链才能使 mkbundle 工作。

*摘录：来自[他们的网站](http://linux.die.net/man/1/mkbundle)*

> 在 Windows 系统上，必须安装类 Unix 工具链才能使 mkbundle 工作。您可以使用 cygwin 并安装 gcc、gcc-mingw 和软件包。（原文如此）

# javascript - VBA Internet Explorer 下载

> ID：13979045
> 
> 赞同：1
> 
> 时间：2012-12-20T19:22:16.560
> 
> 标签：javascript, internet-explorer, vba, excel, httprequest

首先，我想说的是 stackoverflow 帮助我很好地处理了我当前的项目，所以谢谢！但是我已经到了一个点，我无法再通过浏览以前的问题来找到帮助。首先，简要概述一下我在做什么。

在我的工作中，我们经常执行这个极其繁琐的过程，我真的很想自动化它。这个过程非常基本，我们去一个网站，登录，导航到相应的页面，将 6 个值从 excel 复制并粘贴到网站上的表格中，提交表格并下载特定的输出报告。我们重复该过程 60 次，因此这似乎是 Excel-Internet Explorer 自动化的主要候选者。

我构建了一个非常基本的 Excel 宏，它可以使用适当的 URL 打开一个新窗口、登录、导航到正确的页面、填写表格并提交表格，但我不知道如何下载报告。这增加了一些复杂性，而且我对 Javascript、PHP 等还不够熟悉。弄清楚发生了什么。

问题：当我选择要生成的正​​确报告时，会弹出一个带有生成报告的新窗口。当我单击“查看源文档”时，此页面基本上是空的。标题中有一个指向 Javascript 页面的链接，页面中直接有一点 CSS，就像两个小 HTML 片段一样。此页面上有一个下载按钮，但它看起来不像是在 HTML 中创建的。

问题 1：这是一个 Javascript 应用程序吗？有没有办法让我模拟按下下载按钮？

据我了解，如果我必须在两个 IE 窗口之间导航，我的宏的复杂性会大大增加（更不用说没有 HTML 链接可供我点击下载电子表格）所以我开始尝试计算采取不同的方式来做到这一点。我用生成的报告查看了新窗口的 URL，并尝试分析 Firefox 的开发工具（特别是 Web 控制台）发生了什么。这就是我更加迷失的地方......

有一系列的“POSTS”。这些 POSTS 在网站内创建输出时显示：

```
POST https://www.website.com/somethingdb/quickframe/prod/#####/single_frame_results/correct_output.asp?THIS_KEY=370120c59da884dbdc375b1582a2142c1363533393a313335363032353737363a3646314a313937334a32353030303&bEmbedded=1

POST https://www.website.com/somethingdb/javascriptsource/prod/#####/website/forms/datagrid/DataGrid.html

POST https://www.website.com/qc?function=QuickFrameRmi 
```

然后，当我单击下载按钮时，会显示一个 POST 和一个 GET：

```
POST https://www.website.com/qc?function=CorrectReport.generateExportFile 
```

得到

```
GET https://www.website.com/somethingdb/quickframe/prod/#####/dlf/x6::370120c59da884dbdc375b1582a2142c1363533393a313335363032353737363a3646314a313937334a323530303031356026339.xls/sfn/RIGHTPAGE_scen_1_deal_cf.xls 
```

GET 的引用者如下所示：

```
https://www.website.com/somethingdb/quickframe/prod/#####/single_frame_results/correct_output.asp?THIS_KEY=370120c59da884dbdc375b1582a2142c1363533393a313335363032353737363a3646314a313937334a32353030303&sPagename=RIGHTPAGE&nScenarios=1&bShowExtendedFields=1&bShowAllCollats=0&ShowUnderlyingPage=0&sUnderlyingPage=&WebsitewrapDb=websitewrap&iSettleId=&bScrollbars=true&time=1356025839577 
```

就像我说的，我对这些事情的了解非常有限，但我知道一旦我点击下载按钮，上面的 GET 就是存储在网站服务器上的实际文件名。我可以进入 Excel，单击“打开”并将该文件路径放入其中，它将完全下载我需要的内容。

所以这就是我的想法。如果我可以告诉网站模拟下载过程，并记录那个 GET 是什么，那么我可以把它存储起来，当宏完成生成我需要的所有报告时，它可以导航回 Excel 并设置一个简单的循环下载所有这些？？我已经确定了 GET 中发生变化的部分：

```
x6::370120c59da884dbdc375b1582a2142c

63032353737363a3646314

6026339 
```

这是我的第一篇文章，所以如果我的背景故事过于冗长，我深表歉意。只是想从一开始就尽可能清楚。我想知道网站内部真正发生了什么？我的建议有意义吗？可能吗？有没有更好的办法。提前感谢您的帮助。

# php - 正则表达式允许 2 个特定的子域

> ID：13979046
> 
> 赞同：-1
> 
> 时间：2012-12-20T19:22:19.530
> 
> 标签：php, regex

目前，我允许有或没有 www。我需要添加允许一个额外的子域：

```
#http://site.com,
#http://www.site.com,
#http://embed.site.com 
```

这是我目前拥有的：

```
#https?://(www\.)?site\.com/video/.*#i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:24:46.980

使用这个正则表达式：

```
#https?://((?:www|embed)\.)?site\.com/video/.*#i 
```

# php - MySQL查询忽略大小写

> ID：13979048
> 
> 赞同：2
> 
> 时间：2012-12-20T19:22:28.430
> 
> 标签：php, mysql

我正在做密码和用户名登录查询，它看起来像这样

```
$query = "SELECT id FROM users WHERE username = ? AND password = ?"; 
```

我传入我的用户名和密码。问题是说我有一个用户名“用户”和他们的密码“密码”。当我在字段中输入“用户”和“密码”时，它仍然返回结果。所以这使得资本毫无用处。难道我做错了什么？有没有更好的方法来解决这个问题？用户名的大写问题是相同的。当我想要一个精确的字符串匹配时，它就像是在做一个模式匹配。我也尝试过二进制，希望它可能会改变它，但结果相同。

```
$stmt = $this->db->prepare($query);
$stmt->bind_param("ss", $user, $pass);
$stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T19:29:35.173

从[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)：

> 简单的比较操作（>=、>、=、<、<=、排序和分组）基于每个字符的“排序值”。具有相同排序值的字符被视为相同字符。例如，如果“e”和“é”在给定的排序规则中具有相同的排序值，则它们比较相等。
> 
> 默认字符集和排序规则是 latin1 和 latin1_swedish_ci，因此默认情况下非二进制字符串比较不区分大小写。这意味着如果您使用 col_name LIKE 'a%' 进行搜索，您将获得所有以 A 或 a 开头的列值。要使此搜索区分大小写，请确保其中一个操作数具有区分大小写或二进制排序规则。例如，如果要比较都具有 latin1 字符集的列和字符串，则可以使用 COLLATE 运算符使任一操作数具有 latin1_general_cs 或 latin1_bin 排序规则：

您应该将表或列的排序规则更改为区分大小写的内容或使用二进制排序规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T19:30:24.863

这是一个典型的整理问题。默认排序规则比较不区分大小写。您应该使用二进制排序规则进行比较。

默认 utf8 排序规则

```
mysql> SELECT 'password' COLLATE utf8_unicode_ci = 'PASSWORD' COLLATE utf8_unicode_ci;
+-------------------------------------------------------------------------+
| 'password' COLLATE utf8_unicode_ci = 'PASSWORD' COLLATE utf8_unicode_ci |
+-------------------------------------------------------------------------+
|                                                                       1 |
+-------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

utf8 二进制排序规则

```
mysql> SELECT 'password' COLLATE utf8_bin = 'PASSWORD' COLLATE utf8_bin;
+-----------------------------------------------------------+
| 'password' COLLATE utf8_bin = 'PASSWORD' COLLATE utf8_bin |
+-----------------------------------------------------------+
|                                                         0 |
+-----------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT 'password' COLLATE utf8_unicode_ci = 'password' COLLATE utf8_unicode_ci;
+-------------------------------------------------------------------------+
| 'password' COLLATE utf8_unicode_ci = 'password' COLLATE utf8_unicode_ci |
+-------------------------------------------------------------------------+
|                                                                       1 |
+-------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

将您的查询更改为

```
$query = "SELECT id FROM users WHERE username = ? AND password COLLATE utf8_bin = ?"; 
```

在此处阅读有关排序规则的更多信息：

[https://dev.mysql.com/doc/refman/5.5/en/charset-general.html](https://dev.mysql.com/doc/refman/5.5/en/charset-general.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T19:31:03.767

你使用什么排序规则？[有关 MySQL 中区分大小写的信息，请参见此处](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)

无论哪种方式，您都应该对用户名和密码列使用二进制排序规则。

尤其：

> 要使此搜索区分大小写，请确保其中一个操作数具有区分大小写或二进制排序规则。

还

> 如果您希望始终以区分大小写的方式处理列，请使用区分大小写或二进制排序规则声明它。请参见第 13.1.10 节，“CREATE TABLE 语法”。

此外，理想情况下，您应该至少对密码进行加盐和散列处理。然后，在进行比较时，您可以在登录时对用户提供的密码进行加盐和哈希处理。存储明文密码是不好的做法，应该避免。

# android - 编译时编辑 AndroidManifest 以删除 API-key

> ID：13979049
> 
> 赞同：24
> 
> 时间：2012-12-20T19:22:28.603
> 
> 标签：android, eclipse, git, github

我目前正在做一个 Android 项目，并学习如何使用 git。由于 git 的问题，我被阻止了：我在我的 android-manifest 文件中声明了我的 Google Maps api 密钥：

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="HEREISMYKEY"/> 
```

现在，我想在 github 中推送我的代码，但我无法推送我的 AndroidManifest，因为它包含我的 api 密钥（应该保密）。

我想知道是否有办法在每次推送之前修改它，或者每次编译我的应用程序时修改它？

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-21T14:46:53.860

在你的 res/values 中创建一个新的 *.xml 文件（调用它`api-keys.xml`或类似的东西）。

更改清单以指向此字符串：

```
 <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="@string/GoogleMapsKey"/> 
```

当您第一次向公众推送您的更改时，请输入一个虚拟密钥。

然后使用您的真实 API 密钥编辑该文件。

然后将该文件添加到您的 .gitignore 文件中，这样它就不会再次被推送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-28T19:09:47.570

我建议使用 Gradle 为不同的构建类型动态加载 API 密钥，如果没有找到则加载一个虚拟密钥。这样做的好处是 CI 也可以在不需要真正的 API 密钥的情况下构建您的应用程序，但是您团队中的每个新开发人员都必须设置 API 密钥。

1.  `google-maps-api.properties`在根文件夹中创建一个属性文件`gradle`。**通过将此行添加`gradle/google-maps-api.properties`到您的 .gitignore**并输入以下 2 个属性来忽略该文件：

```
googleMapsApiKeyDebug=[YOUR_DEBUG_GOOGLE_MAPS_API_KEY_HERE]
googleMapsApiKeyRelease=[YOUR_RELEASE_GOOGLE_MAPS_API_KEY_HERE] 
```

2.  `google-maps-api-config.gradle`接下来在您的根文件夹中创建以下文件`gradle`。此 Gradle 文件将加载您在步骤 1 中创建的属性文件。

```
ext {
    googleMapsApiConfig = new GoogleMapsApiConfigLogic(project)
}

/*
Before you run your application, you need a Google Maps API key.

Using these values:

Package name:
at.ict4d.covid19map

SHA-1 certificate fingerprint:
DE:4A:F0:B1:F5:F4:00:88:B6:E0:03:3E:31:1F:11:88:3F:43:0D:8B

Follow the directions here:
https://developers.google.com/maps/documentation/android/start#get-key

Once you have your key (it starts with "AIza") create a file with the name "google-maps-api.properties" in the gradle folder:
gradle/google-maps-api.properties

Put in 2 properties:
googleMapsApiKeyDebug:[THE KEY YOU JUST CREATED]
googleMapsApiKeyRelease:[YOUR RELEASE GOOGLE MAPS KEY] (if you are just developing and not planning to publish then fill in "YOUR_RELEASE_KEY_HERE")

"gradle/google-maps-api.properties" example:
googleMapsApiKeyDebug=AIzaFJKLJKsdLFDDsjlkdfDFJKLdjkf
googleMapsApiKeyRelease=YOUR_RELEASE_KEY_HERE

Sync your project and build.
*/

class GoogleMapsApiConfigLogic {

    public final keyGoogleMapsApiKeyDebug = "googleMapsApiKeyDebug"
    public final keyGoogleMapsApiKeyRelease = "googleMapsApiKeyRelease"
    private final configGoogleMapsApiPropsFileName = "gradle/google-maps-api.properties"

    public final props

    private final project

    GoogleMapsApiConfigLogic(project) {
        this.project = project
        this.props = loadGoogleMapsApiProperties()
    }

    def loadGoogleMapsApiProperties() {

        Properties propertiesObj

        if ((propertiesObj = loadFromProperties("$project.rootDir/$configGoogleMapsApiPropsFileName")) != null) {
            project.logger.quiet("google-maps-api-config: use local properties file for Google Maps API")
            return propertiesObj
        } else {
            propertiesObj = new Properties()
            propertiesObj.put(keyGoogleMapsApiKeyDebug, "YOUR_KEY_HERE")
            propertiesObj.put(keyGoogleMapsApiKeyRelease, "YOUR_KEY_HERE")
        }

        project.logger.quiet("google-maps-api-config: no API key found for Google Maps")
        return propertiesObj
    }

    def loadFromProperties(fileName) {
        Properties props = new Properties()
        File propFile = new File(fileName)

        if (propFile.exists()) {
            props.load(new FileInputStream(propFile))
            if (props.get(keyGoogleMapsApiKeyDebug) != null &&
                    props.get(keyGoogleMapsApiKeyRelease) != null) {
                project.logger.quiet("google-maps-api-config: use $fileName for Google Maps API")
                return props
            }
        } else {
            project.logger.quiet("google-maps-api-config: $propFile does not exist for Google Maps API")
        }
        return null
    }
} 
```

3.  将以下内容添加到您的`app/build.gradle`文件中：

```
plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'kotlin-android-extensions'
    // ...
}

apply from: "$rootDir/gradle/google-maps-api-config.gradle" // handles Google Maps API key

android {

   // ...

   buildTypes {
        release {

            // other config

            resValue "string", "google_maps_key", "\"${googleMapsApiConfig.props.getProperty(googleMapsApiConfig.keyGoogleMapsApiKeyRelease)}\""
        }

        debug {
            // other config

            resValue "string", "google_maps_key", "\"${googleMapsApiConfig.props.getProperty(googleMapsApiConfig.keyGoogleMapsApiKeyDebug)}\""
        }
    } 
```

`google_maps_key`这将使用您的 API 密钥的密钥和值创建一个字符串资源。您可以删除任何其他 API 密钥引用，例如 Android Studio 生成以下文件：`app/src/debug/res/values/google_maps_api.xml`并且`app/src/release/res/values/google_maps_api.xml`- 您可以删除它们。

4.  将 Google Maps API 密钥添加到您的清单中：

```
<application>

        <meta-data
            android:name="com.google.android.geo.API_KEY"
            android:value="@string/google_maps_key" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:03:42.907

好吧，你可以做的是把你的 AndroidManifest.XML 文件放在你的 .gitignore 文件中，这样它就不会被你的其余代码推上去。然后只需推上一个自述文件或具有通用 AndroidManifest 的东西.xml 源代码，任何人都必须将其复制并粘贴到 AndroidManifest.xml 文件中才能构建您的应用程序。这样，您可以在您的应用程序中进行更改，根据需要构建它，然后不必在每次构建时都对其进行泛化处理并推送到源代码控制中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:09:07.643

我过去处理类似问题的方法是使用我的 git 存储库中的特定分支进行公共推送。

假设您在清单中有一个本地主分支，其中包含您的密钥。当您准备好推送到 github（或其他任何地方）时，您可以创建一个没有历史记录的新“发布”分支。您可以在这里看到更多相关信息：[如何在没有历史的情况下推送新分支](https://stackoverflow.com/questions/12543055/how-to-push-new-branch-without-history) `git branch --orphan release`。删除所有私人信息后，提交所有文件并仅将该分支推送到 github `git push origin release`。

这个问题是你不会有提交历史，也许其他人可以想出更好的东西。

# javascript - Ember.js - 在控制器中绑定事件

> ID：13979052
> 
> 赞同：1
> 
> 时间：2012-12-20T19:22:40.183
> 
> 标签：javascript, ember.js, controller, dom-events

我刚刚开始使用 Ember.js，但我仍然不明白为什么事件会绑定在视图中，如下所示：

```
App.ClickableView = Ember.View.extend({
  click: function(evt) {
     alert("ClickableView was clicked!");
  }
}); 
```

在 JavaScriptMVC 和 Sencha Touch 中，像这样的事情是在控制器中处理的。例如，多个控制器如何绑定到同一个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T01:49:45.343

在最新版本的 ember 中，事件的默认上下文已从视图更改为路由器（控制器）。该事件将由当前路由器（状态）处理，如下所示：

```
root : Ember.Route.extend({
    index : Ember.Route.extend({
        route : '/',
        connectOutlets : function(router) {
            var ac = router.get('applicationController');
            ac.connectOutlet({
                name : 'topnav',
                outletName : 'topnav'
            });
        },
        click: function(event, context) {
           alert("ClickableView was clicked!");
        }
}) 
```

如果您在其他州有其他点击事件，应用程序不会感到困惑，因为它知道它处于哪个状态/路由。

您可以在视图或控制器中处理您的事件，但建议在路由器中处理它们。

# c++ - MFC CListCtrl Max 列数限制？

> ID：13979060
> 
> 赞同：0
> 
> 时间：2012-12-20T19:23:18.927
> 
> 标签：c++, mfc, clistctrl

我已经对此进行了谷歌搜索，但似乎无法找到 MFC 的 CListCtrl 是否存在最大列限制，即列表的列数。想知道是否有一个，因为我在显示超过 X 数量的列时遇到问题，当我尝试显示它时它只是崩溃了。顺便说一句，我正在使用虚拟列表。

谢谢。

# xml - XSLT 到 RDF 中的正确格式/缩进问题

> ID：13979065
> 
> 赞同：2
> 
> 时间：2012-12-20T19:23:26.040
> 
> 标签：xml, xslt, rdf

我遇到了一些不正确的 XSLT 转换问题。我的任务是使用 XSLT 将 XML 文件转换为 RDF 文件。因此，我必须创建一个`<rdf:RDF>`具有相关名称空间的节点，作为 XML 文档的根。输出有两个问题：

1.  排除结果前缀不起作用。
2.  格式太吓人了 例如，`<rdf:RDF>`节点紧跟在 XML 声明之后，并且没有正确间隔。

不过，它*确实*验证为 RDF。所以至少我在那方面的语法是正确的。

### XSLT：

这就是我的 XSLT 文件的样子（其他模板被剪掉了，但如果需要我可以提供完整的代码）。我能想到的唯一可能相关的是，在随后我使用的模板中，`<xsl:element>`而`<xsl:attribute>`不是直接输入节点的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    exclude-result-prefixes="fD"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData/"
    xml:base="http://www.alunos.dcc.fc.up.pt/~up090316041/footData/">
    <rdfs:Class rdf:ID="Equipa"/>
    <rdfs:Class rdf:ID="Treinador"/>
    <rdfs:Class rdf:ID="Jogador"/>
    <xsl:apply-templates/>
</rdf:RDF>
</xsl:template>
</xsl:stylesheet> 
```

### 生成的 RDF

```
<?xml version="1.0" encoding="UTF-8"?><rdf:RDF xml:base="http://www.alunos.dcc.fc.up.pt/~up090316041/footData/" xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">
<rdfs:Class rdf:ID="Equipa"/>
<rdfs:Class rdf:ID="Treinador"/>
<rdfs:Class rdf:ID="Jogador"/>
  <rdf:Description rdf:about="ENG_M_UTD">
<rdf:type>Equipa</rdf:type>
<fD:nome xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Manchester United</fD:nome>
<fD:estadio xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Old Trafford</fD:estadio>
<fD:pais xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Inglaterra</fD:pais>
</rdf:Description>
<rdf:Description rdf:about="POR_NANI">
<rdf:type>Jogador</rdf:type>
<fD:nome xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Nani</fD:nome>
<fD:pais xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Portugal</fD:pais>
<fD:equipa xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData" resource="ENG_M_UTD"/>
</rdf:Description>
<rdf:Description rdf:about="SPA_DE_GEA">
<rdf:type>Jogador</rdf:type>
<fD:nome xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">David de Gea</fD:nome>
<fD:pais xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Espanha</fD:pais>
<fD:equipa xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData" resource="ENG_M_UTD"/>
</rdf:Description>

<rdf:Description rdf:about="POR_PORTO">
<rdf:type>Equipa</rdf:type>
<fD:nome xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">FC Porto</fD:nome>
<fD:estadio xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Estádio do Dragão</fD:estadio>
<fD:pais xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Portugal</fD:pais>
</rdf:Description>
<rdf:Description rdf:about="COL_JAMES">
<rdf:type>Jogador</rdf:type>
<fD:nome xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">James Rodríguez</fD:nome>
<fD:pais xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData">Colombia</fD:pais>
<fD:equipa xmlns:fD="http://www.alunos.dcc.fc.up.pt/~up090316041/footData" resource="POR_PORTO"/>
</rdf:Description>

</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:51:02.040

必须更改 Eclipse 的运行设置中的内容才能正确缩进。

# ios - 截取当前不在 iOS 屏幕上的视图

> ID：13979067
> 
> 赞同：4
> 
> 时间：2012-12-20T19:23:29.930
> 
> 标签：ios, uiviewcontroller, uiimage

我正在尝试在两个 ViewController 之间进行转换。我的 Transition 类有一个用于目标视图控制器的属性。当我尝试获取目的地视图的屏幕截图时，我使用以下方法：

```
+ (UIImage *)renderImageFromView:(UIView *)view withRect:(CGRect)frame {
    // Create a new context the size of the frame
    UIGraphicsBeginImageContextWithOptions(frame.size, YES, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Render the view 
    [view.layer renderInContext:context];

    // Get the image from the context
    UIImage *renderedImage = UIGraphicsGetImageFromCurrentImageContext();

    // Cleanup the context you created
    UIGraphicsEndImageContext();

    return renderedImage;
} 
```

所以当我想要图像时，我会这样做：

```
UIImage *image = [UIImage renderImageFromView:destinationController.view withRect:destinationController.view.bounds]; 
```

我在带有橙色背景颜色和标签的空白 UIViewController 上进行了尝试。我得到橙色背景颜色，但没有得到在 IB 中创建的标签。有没有办法获得我计划显示的新视图的正确屏幕截图？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:33:22.780

您需要确保首先绘制视图的图层。在 a 上调​​用 renderInContext`CALayer`只会递归调用额外`CALayer`的 child 。您需要您的孩子`UIView`自己绘制，而不仅仅是使用`CALayer`.

试着打电话

```
[view drawrect:frame]; 
```

代替

```
[view.layer renderInContext:context]; 
```

只要你有一个开放的图形上下文（你当时做的），就`drawrect`应该直接画进去。

# java - Box2D 静态物体碰撞性能问题

> ID：13979069
> 
> 赞同：4
> 
> 时间：2012-12-20T19:23:35.050
> 
> 标签：java, performance, box2d, physics, jbox2d

我正在使用 JBox2d 在我正在处理的游戏项目中执行碰撞检测。我用静态物体代表世界上的障碍。每当动态物体（即游戏角色）与其中一个障碍物发生碰撞时，性能就会出现非常明显的下降。Fps 将从 ~120 下降到 ~5。当静态物体的角碰撞时，这种情况似乎更频繁地发生。

当我将世界障碍物的身体类型设置为动态而不是静态时，密度非常高（以防止身体在碰撞时移动），这个问题就消失了......但是这个解决方案并不适合我的情况……

关于什么可能导致这种巨大的 fps 下降的任何想法？

这是我用来创建静态主体的代码：

```
BodyDef def = new BodyDef();
        def.type = BodyType.STATIC; // If this line is commented and the other     
                               //commented lines are uncommented, the issue goes away.
        //def.type = BodyType.DYNAMIC;
        def.position.set(worldBounds.getCenterX(), worldBounds.getCenterY());
        Body staticBody = b2World.createBody(def);

        PolygonShape box = new PolygonShape();
        box.setAsBox(worldBounds.getWidth() * 0.5f, worldBounds.getHeight() * 0.5f);

        FixtureDef fixture = new FixtureDef();
        fixture.shape = box;
        fixture.friction = 0.3f;
        //fixture.density = 1000000000;
        staticBody.createFixture(fixture);
        //staticBody.setSleepingAllowed(true);
        //staticBody.setFixedRotation(true); 
```

我尝试使用 CircleShape 而不是 PolygonShape，但这无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:03:44.307

这是我目前正在开发的游戏的代码，效果很好。希望如果您复制和粘贴，更改一些变量名称和内容，它可能会解决您的问题。我是 box2d 的新手，所以不能准确地告诉你问题出在哪里。希望能帮助到你。

```
 //bodydef
    BodyDef bodyDef = new BodyDef();
    bodyDef.type = BodyType.StaticBody;
    bodyDef.position.set(position);
    body = world.createBody(bodyDef);

    //shape
    PolygonShape shape = new PolygonShape();
    shape.setAsBox(dimension.x / 2, dimension.y / 2);

    //fixture
    FixtureDef fixture = new FixtureDef();
    fixture.friction = 0.3f;
    fixture.shape = shape;

    body.createFixture(fixture);
    shape.dispose(); 
```

# wix - 强制用户使用刻录重启机器

> ID：13979073
> 
> 赞同：2
> 
> 时间：2012-12-20T19:23:55.177
> 
> 标签：wix, wix3.6, burn

我有一个使用 WiX 3.6/ [Burn](http://en.wikipedia.org/wiki/WiX#Burn)创建的引导加载程序，我想知道是否有类似的命令`<ExitCode Behavior="forceReboot"/>`只会在`<chain>`标签中执行所有内容后在卸载时执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:49:00.443

您可以将 ScheduleReboot 操作放在您的一个 MSI 中，并将该操作设置为在 unistall 上运行。Burn 将尊重重启请求，并在最后通知用户需要重启。

# ravendb - RavenDB 以编程方式清空数据库

> ID：13979076
> 
> 赞同：0
> 
> 时间：2012-12-20T19:24:07.130
> 
> 标签：ravendb

RavenDB 中是否有清空商店中所有内容的命令？像 Store.Empty 这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:04:33.107

不，也不会有。这将*确保*意外的数据丢失。

您可能想在内存中运行以进行测试，对吧？我们对此有明确的支持。

# go - 如何从 http.ResponseWriter 获取当前响应长度

> ID：13979078
> 
> 赞同：7
> 
> 时间：2012-12-20T19:24:19.753
> 
> 标签：go

给定一个`http.ResponseWriter`已经完成了一些`.Write()`s的，可以直接获得响应的当前累积长度吗？

我很确定这可以通过`Hijack`转换来完成，但我想知道是否可以直接完成。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T20:58:20.537

即使你知道你得到了什么，在`http.ResponseWriter`界面的底层，有一些可用的东西的可能性很低。如果您[仔细查看](http://golang.org/src/pkg/net/http/server.go#L110)使用 http 包的标准获得的结构`ServeHTTP`，您会发现没有办法获得缓冲区的长度，而是劫持它。

您可以做的替代方法是跟踪作者：

```
type ResponseWriterWithLength struct {
    http.ResponseWriter
    length int
}

func (w *ResponseWriterWithLength) Write(b []byte) (n int, err error) {
    n, err = w.ResponseWriter.Write(b)

    w.length += n

    return
}

func (w *ResponseWriterWithLength) Length() int {
    return w.length
}

func MyServant(w http.ResponseWriter, r *http.Request) {
    lengthWriter := &ResponseWriterWithLength{w, 0}
} 
```

您甚至可能想编写自己的版本`http.Server`，`ResponseWriterWithLength`默认情况下提供。

# java - while 循环时遇到问题

> ID：13979080
> 
> 赞同：0
> 
> 时间：2012-12-20T19:24:23.463
> 
> 标签：java, android, while-loop

```
 cameraOn();
    while (counter == 1){
        if(counter == 0){
             cameraOn();
             counter += 1;
         }else{
            cameraOff();
            counter -= 1;
          }
    } 
```

方法是：

```
private void cameraOff() {
            // TODO Auto-generated method stub
             parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
             camera.setParameters(parameters);
             camera.release();
             camera = null;
        }

        private void cameraOn() {
            // TODO Auto-generated method stub
            camera = Camera.open();
             parameters = camera.getParameters();
             parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
             camera.setParameters(parameters);
        } 
```

我有一个按钮必须打破循环并完成活动：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (camera == null){
        finish();
    }else{
         parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
         camera.setParameters(parameters);
         camera.release();
         camera = null;
         finish();
    } 
```

我是一个初学者，我不明白循环是如何工作的，我用计数器坚持我可以做到，但它没有用。我正在尝试让相机闪光灯在循环中每秒闪烁一次，直到我按下按钮。请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:28:35.420

if (counter == 0) 永远不会为真，因为在这种情况下您的循环将退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:36:42.747

您的代码的以下部分将永远不会执行，因为您只有在 counter == 1 时才进入 while 块。

```
 if(counter == 0){
            cameraOn();
            counter += 1; 
```

因此，如果您曾经输入过 while 块`while (counter == 1)`，您将始终调用 cameraOff() 方法。换句话说，您的 if 语句永远不会为真，而 else 语句将始终被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:55:41.610

正如其他人所说，仅当counter == 0时才进入循环意味着它永远不会进入需要counter == 1的内部循环，并且永远不会进入cameraOn（）。

试试这个：

清除您的 onClick 方法并将其替换为：

```
@Override public void onClick(View v) {
    cameraOff();
    /* or 'toggle();' if you prefer, see below */
} 
```

（因为它似乎做完全相同的事情。）

注释掉/删除整个嵌套循环，并确保在某处调用 cameraOn() 或 toggle() 以开始工作。

要设置切换，您可以添加一个`static Boolean isFlashActive;`（或以其他方式检测 flash 状态，我还没有使用该 api）

..并添加一个功能：

```
private toggle(){
    if ( isFlashActive ) {
        cameraOff();
    } else {
        cameraOn();
    }
    /* delay? */
} 
```

对于切换延迟，您有几个选择：

`Runnable`首先，您可以通过一个或一个android选项从另一个线程调用toggle()，例如`AsyncTask`将wait()添加到toggle函数中以提供延迟；

Second is my personal favorite, which is to setup an intent receiver then use `setRepeating()` with a `PendingIntent`.

# facebook - 白标应用

> ID：13979083
> 
> 赞同：2
> 
> 时间：2012-12-20T19:24:26.193
> 
> 标签：facebook, web

我们的白标合作伙伴是否需要拥有自己的应用 ID？

或者我们可以将他们从我们的域重定向到他们的域。

例子：

用户访问 label.test.com。这让他们在 test.com 上登录和导入信息。然后将它们重定向回 l​​abel.test.com

# ruby-on-rails - 设置 Rails 应用程序以避免使用 CORS

> ID：13979087
> 
> 赞同：0
> 
> 时间：2012-12-20T19:24:52.947
> 
> 标签：ruby-on-rails, ajax, mamp, cors, kentico

我在本地运行具有默认设置（端口 8888）的 MAMP 服务器，并且我有一个在其默认端口（3000）上运行的 Rails 应用程序。

在生产中，我将运行需要运行的 Kentico 服务器`GET`，`POST`并`PUT`通过 ajax 向 Rails 应用程序请求。

不过现在，我只是想以某种方式设置它，以便我可以在本地开发它，而无需实现任何形式的 CORS。由于`POST`和`PUT`requests 是混合的一部分，我无法使用`JSONP`.

有没有办法做到这一点，如果是这样，它是否会转化为在生产中使用相同的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:43:39.547

CORS 将是进行跨域通信的最符合标准的方式。但其他选项包括：

*   设置代理服务器以将服务器端的请求代理到 Rails 应用程序
*   使用基于 iframe 的解决方案。这涉及在您的服务器上设置一个页面，该页面发出同域 XHR 请求。然后，您将使用 iframe 将此页面包含在客户端，并通过帧间通信机制（如 postMessage）与其通信。

以下是后一种技术的概述：http: [//softwareas.com/cross-domain-communication-with-iframes](http://softwareas.com/cross-domain-communication-with-iframes)

# javascript - 如何将 jquery 函数重新附加到呈现的模板？

> ID：13979088
> 
> 赞同：1
> 
> 时间：2012-12-20T19:24:56.927
> 
> 标签：javascript, backbone.js

我有一个正在呈现我的模板的视图 - 该模板由许多元素组成，我正在使用 jquery 插件进行可编辑的内联。相应地，通过对每个 div 的 .editable() 调用使元素可编辑。

我有一个包含以下元素的模板：

```
<div id="pricing">some value</div>
<div id="terms">some other value</div> 
```

每次重新渲染视图时，我的元素都会失去 .editable() 能力。该插件应用它自己的类名等。

在我的视图中，我可以通过以下方式完成这项工作：

```
var MyView = new Backbone.View.extend({ 

    render: function() { 
        var html = this.template(this.model.toJSON());
        this.$el.html(html);
        this.$el.find('#pricing').editable();
        this.$el.find('#terms').editable();    
}); 
```

有没有更好的方法来做到这一点，而无需在视图的渲染方法中明确声明 .editable() 到我需要的每个 div ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:45:58.270

我不认为有很多方法可以解决它。`editable()`必须在 dom 元素准备好使用插件操作之后进行调用。由于您要替换 HTML，因此您必须等到重新渲染视图。我建议给你需要编辑的 div 他们自己的类，比如`editable`. 然后你可以使用类选择器而不是单独为每个 div 做它。

```
<div id="pricing" class="editable">some value</div>
<div id="terms"  class="editable">some other value</div> 
```

然后你可以这样做：

```
this.$(".editable").editable(); //or this.$el.find('.editable').editable();
//instead of 
this.$el.find('#pricing').editable();
this.$el.find('#terms').editable();  
//etc. 
```

这将使您不必为每个 div 编写一个新调用，并且您不必在从视图中添加/删除 div 时不断更新它。

# haskell - 使用 Haskell 比较和计算字符串相关性

> ID：13979089
> 
> 赞同：0
> 
> 时间：2012-12-20T19:24:58.260
> 
> 标签：haskell, comparison, classification, string-comparison

我正在研究一个非常复杂（至少对我来说很复杂）的函数，我想用它来计算列表中的单词与数据库中的单词对应的次数。

使用随机词的示例：

```
let input = [("InputName", ["dog", "cat", "cat"...]), ...]
let database = ["dog", "cat", "badger"...] 
```

经过几个小时的心理体操，我想出了这个几乎可以工作的可怕功能。我已经对其进行了简化，因此它在本示例的上下文中是有意义的：

```
findMatches input database = [ (snd x, wordCount (snd x)) | x <- input ]
    where
        wordCount ys = sum[ if y `elem` database then 1 else 0 | y <- ys ] 
```

我的目标，我的希望，我的愿望是输出如下：

```
[("dog", 1), ("cat", 2), ("badger", 0)] 
```

任何朝着正确方向提出的建议或推动将不胜感激。

**编辑**

我终于做了一个有效的功能。catWordCount 计算数据库条目在输入中出现的次数。我正在使用 fold 进行更好的实现。

```
let input = words "5 4 10 0 1 9 1"
let database = [("C1", words "1 2 3 4 5"), ("C2", words "6 7 8 9 10")]

catwordCount input database

catWordCount fs zs = [ (fst f, inputSearch (snd f)) | f <- fs ]
    where
        inputSearch gs = [ (g, wordCount [g]) | g <- gs ]
        wordCount hs = sum[ if h == z then 1 else 0 | h <- hs, z <- zs ] 
```

和输出：

```
(["C1", [("1",2),("2",0),("3",0),("4",1),("5",1)])
(["C2", [("6",0),("7",0),("8",0),("9",1),("10",1)]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:19:25.847

您可以保留`Map`为每个项目更新的计数。由于您不想包含输入列表中不在数据库中的项目，如果我理解正确，

```
alter :: Ord k => (Maybe a -> Maybe a) -> k -> Map k a -> Map k a 
```

是一个很好的方法。`k`查找提供的键，如果存在，更新函数的参数将为 we `Just value`，否则为`Nothing`。如果更新函数的结果是`Nothing`，则该键将从 中删除`Map`（或不添加，如果它不存在），如果结果是`Just something`，则该键将与`something`更改的`Map`.

因此，您从`Map`将每个项目映射到 0 开始，

```
m0 :: Map String Int
m0 = fromList $ zip database (repeat 0) 
```

要更新，如果项目在 中，您希望增加计数`database`，否则不更改任何内容，

```
incr :: Maybe Int -> Maybe Int
incr (Just n) = Just (n+1)
incr Nothing  = Nothing 
```

或者，更短的，`incr = fmap (+1)`使用.`Functor``Maybe`

然后得到的地图很简单

```
finalMap :: Map String Int
finalMap = foldl (flip $ alter incr) m0 $ snd input 
```

如果你想要一个列表而不是一个`Map`，只需调用`assocs`or `toList`on `finalMap`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:24:35.853

它可能不是您正在寻找的，但试试这个：

```
import Data.List

countMatches :: [(String, [String])] -> [(String, Int)]
countMatches = map (\l -> (head l, length l)) . group . sort . concat . map snd 
```

希望函数组合不会太混乱。我会一步一步来的。假设您使用输入运行此函数

```
[("", ["a", "b"]), ("", ["b", "c", "x", "a"]), ("", ["y", "b", "z"])] 
```

`map snd`是之后

```
[["a", "b"], ["b", "c", "x", "a"], ["y", "b", "z"]] 
```

之后`concat`，

```
["a", "b", "b", "c", "x", "a", "y", "b", "z"] 
```

之后`sort`，

```
["a", "a", "b", "b", "b", "c", "x", "y", "z"] 
```

之后`group`，

```
[["a", "a"], ["b", "b", "b"], ["c"], ["x"], ["y"], ["z"]] 
```

最后`map (\l -> (head l, length l))`产生

```
[("a", 2), ("b", 3), ("c", 1), ("x", 1), ("y", 1), ("z", 1)] 
```

# python - i 是此函数的无效关键字

> ID：13979090
> 
> 赞同：-5
> 
> 时间：2012-12-20T19:25:06.080
> 
> 标签：python, python-3.x

所以，对于学校来说，我们必须做一个让用户猜数字的程序。我有以下代码：

```
import random

my_number=random.randrange(100)
player_number=605
i=int(0)
while player_number!=my_number :
    player_number=int(input("Guess what number I am thinking of :"))
    if player_number<my_number:
        print("Too low")
    else:
        print("Too high")
    print("... Attemp", i=i+1) 
print("Right") 
```

我收到一条错误消息说`'i' is an invalid function`。谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:26:55.237

你的问题在这里：

```
print("... Attemp", i=i+1) 
```

该`print`函数采用任意数量的位置参数和一小组形式的关键字参数`x = ...`。

`i`不在该组允许的关键字参数中。

也许你的意思是：

```
print("... Attempt",i)
i += 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T19:27:15.343

不确定您要尝试做什么，但赋值是 Python 中的*语句*，而不是表达式，因此您不能在`print`. 我猜你想做

```
print("Attempt", i)
i = i+1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T19:27:53.627

此错误来自以下行：

```
print("... Attemp", i=i+1) 
```

据我所知，您正在尝试在其他语言中做类似的事情`i++`，在这些语言中，您既可以递增`i`也可以从递增之前返回值。

在 Python 中，你不能这样做，把它放在单独的行上：

```
print("... Attemp", i)
i += 1 
```

错误是因为`name=value`函数调用内部是指定关键字参数的语法，因此例如您可以使用以下函数调用`foo(baz=2, bar=1)`它，它等效于调用`foo(1, 2)`：

```
def foo(bar, baz):
    print('bar:', bar)
    print('baz:', baz) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T19:27:09.917

Python 有一个特性“命名参数”：当您可以通过参数名称传递参数时，以及

```
print("... Attemp", i=i+1) 
```

正是这样做的：`i`这里的第一个成为要传递给的参数的名称`print`，但`print`不理解这样的命名参数。

# c# - 如何从拖放到应用程序的文件夹中获取子目录名称和文件

> ID：13979096
> 
> 赞同：1
> 
> 时间：2012-12-20T19:26:00.050
> 
> 标签：c#, winforms

我有以下代码，当用户将其放到我的 C# Winforms 应用程序窗口上的按钮上时，它将处理该文件夹中的文件夹和文件。此代码工作正常：

```
List<string> filepaths = new List<string>();

foreach (var s in (string[])e.Data.GetData(DataFormats.FileDrop, false))
   {
       if (Directory.Exists(s))
       {
           //Add files from folder
           filepaths.AddRange(Directory.GetFiles(s));
       }
       else
       {
           //Add filepath
           filepaths.Add(s);
       }
   } 
```

但是，如果主文件夹（子文件夹）内有另一个文件夹，它不会检测到该子文件夹并列出子文件夹内的文件。

有人可以告诉我如何检测子文件夹的名称以及子文件夹中的文件吗？

编辑：这样的东西有用吗？

```
string[] fileList = Directory.GetFiles(@s, "*.*", SearchOption.AllDirectories); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:35:31.573

您需要使用 Directory.GetDirectories() 来拉回子目录，然后像您已经在做的那样循环遍历它们。

```
 // Process all files in the directory passed in, recurse on any directories  
    // that are found, and process the files they contain. 
    public static void ProcessDirectory(string targetDirectory) 
    {
        // Process the list of files found in the directory. 
        string [] fileEntries = Directory.GetFiles(targetDirectory);
        foreach(string fileName in fileEntries)
            ProcessFile(fileName);

        // Recurse into subdirectories of this directory. 
        string [] subdirectoryEntries = Directory.GetDirectories(targetDirectory);
        foreach(string subdirectory in subdirectoryEntries)
            ProcessDirectory(subdirectory);
    } 
```

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:18:31.667

与 Frazell 类似，但我喜欢使用文件和目录信息类型，例如：

编辑：添加了 ProcessFile() 方法

```
public void ProcessFolder(DirectoryInfo dirInfo)
{
    //Check for sub Directories
    foreach (DirectoryInfo di in dirInfo.GetDirectories())
    {
        //Call itself to process any sub directories
        ProcessFolder(di);
    }

    //Process Files in Directory
    foreach (FileInfo fi in dirInfo.GetFiles())
    {
        //Do something with the file here
        //or create a method like:
        ProcessFile(fi)
    }
} 

public void ProcessFile(FileInfo fi)
{
    //Do something with your file
    Debug.Print(fi.FullName);
    //...
} 
```

# facebook - Facebook 应用程序：更改贴在墙上的隐私

> ID：13979097
> 
> 赞同：0
> 
> 时间：2012-12-20T19:26:02.347
> 
> 标签：facebook, facebook-graph-api, facebook-apps, privacy

我正在使用此功能在自己的墙上发帖，我想将帖子的隐私设置为 FRIENDS。但它不起作用。始终保持默认应用隐私 (PUBLIC)。我怎样才能改变这个？

谢谢

```
function postToWall(message, header) {
    FB.ui(
            {
                method: 'feed',
                caption: header,
                link: 'http://www.iflikeu.com',
                picture: 'http://myapp.herokuapp.com/common/images/icon.png',
                description: message,
                privacy: {'value': 'ALL_FRIENDS'}
            },
            function(response) {
                /*if (response && response.post_id) {
                    alert('Post was published.');
                } else {
                    alert('Post was not published.');
                }*/
            }
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:16:22.593

您的示例是`FB.ui()`触发提要对话框的调用 - 用户逐个帖子选择此类帖子的隐私

如果您是通过 API 直接发布，您将在`FB.api()`其中直接设置每个帖子的隐私；使用对话框，用户始终可以选择帖子可见性，并且选择器中的值默认为您的应用程序的默认隐私设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T16:13:12.483

您可以尝试编辑应用程序设置：配置权限。并将默认活动隐私：设置为公开。

# sql - 每月值的总和除以每月的天数

> ID：13979101
> 
> 赞同：3
> 
> 时间：2012-12-20T19:26:22.660
> 
> 标签：sql, sql-server, sql-server-2005

我有一个销售表：

```
id_item, quantity, date_time 
```

我需要的是总结一个月内售出的物品，然后将它们除以选定月份中的月份天数。

示例 - 用户选择 10 月 1 日至 12 月 31 日的日期。我需要显示 items_sold/days_of_month：

```
Month  Items sold  Days of month  Items/Day
Sep        25           30           0.83333
Oct        36           31           1.16
Dec        15           31           0.4838 
```

我必须按种类指定。该种类是从另一个名为 Items 的表中获得的。我使用日期格式`dd/mm/yy`。

```
select
   month(date_time),
   sum(quantity) / (select(datepart(dd,getdate())))
from
   sales v
   join items a on v.id_item=a.id_item
where
   a.kind='Kind of Item'
   and cast(Convert(varchar(10), date_time, 112) as datetime)
      between '01/10/2012' and '31/12/2012'
group by
   month(date_time) 
```

我的问题是选择月份的天数，如何选择 x 个月数并将每个月的总和（数量）除以每个月的天数？

我知道这部分代码只选择当月的日期：

```
(select(datepart(dd,getdate()))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T19:54:18.930

试穿这个尺寸：

```
DECLARE
   @FromDate datetime,
   @ToDate date; -- inclusive

SET @FromDate = DateAdd(month, DateDiff(month, 0, '20121118'), 0);
SET @ToDate = DateAdd(month, DateDiff(month, 0, '20121220') + 1, 0);

SELECT
    Year = Year(S.date_time),
    Month = Month(S.date_time),
    QtyPerDay =
       Sum(s.quantity) * 1.0
       / DateDiff(day, M.MonthStart, DateAdd(month, 1, M.MonthStart))
FROM
    dbo.Sales S
    INNER JOIN dbo.Items I
       ON S.id_item = I.id_item
    CROSS APPLY (
       SELECT MonthStart = DateAdd(month, DateDiff(month, 0, S.date_time), 0)
    ) M
WHERE
    I.kind = 'Kind of Item'
    AND S.date_time >= @FromDate
    AND S.date_time < @ToDate
GROUP BY
    Year(S.date_time),
    Month(S.date_time),
    M.MonthStart 
```

它将选择由`FromDate`and部分包围的任何完整月份`ToDate`。如果列是整数，则该`* 1.0`部分是必需的，否则您将得到整数结果而不是小数结果。`quantity`

一些风格注释：

*   不要在列上使用字符串日期转换来确保您得到一整天。这将完全阻止使用任何索引，需要更多 CPU，而且还不清楚（样式 112 又做了什么！？！？）。要包含完整的日期期间，请使用我在查询中显示的内容`DateCol >= StartDate`和`DateCol < OneMoreThanEndDate`。搜索“sargable”以了解这里的一个非常关键的概念。一个非常安全和有价值的一般规则是，*如果可以重写条件来避免它，则永远不要将列放在表达式中*。

*   为表设置别名很好，但是您应该在整个查询中为每一列使用这些别名，就像我在查询中所做的那样。我认识到别名 V 和 A 来自另一种语言，因此它们在那里是有意义的——通常尝试使用与表名匹配的别名。

*   请在您的对象中包含架构名称。不这样做并不是一个巨大的禁忌，但有一定的好处，这是最佳实践。

*   当您提出问题时，解释所有逻辑会很有帮助，这样人们就不必猜测或询问您——如果您知道（例如）用户可以输入月中日期但您需要整月，那么请指出在您的问题中并说明需要做什么。

*   提供 SQL Server 的版本有助于我们将所需的语法归零，因为以前的版本表达力较差。通过告诉我们版本，我们可以为您提供最好的查询。

注意：将日期计算数学放在查询本身没有错（而不是使用 SET 来做）。但我想你会在存储过程中对此进行编码，如果是这样，使用 SET 就可以了。

# javascript - ajaxForm IE 9 错误

> ID：13979103
> 
> 赞同：-1
> 
> 时间：2012-12-20T19:26:28.900
> 
> 标签：javascript, jquery, ajaxform

```
var $ajaxForm = $('#form');
$ajaxForm.ajaxForm(function(response) {
     //code
}); 
```

这在 chrome/firefox/opera/safari 中运行良好，但 IE 9 无法识别提交事件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:34:16.987

看起来这已经被[问](https://stackoverflow.com/questions/10563748/jquery-and-ie-submit-ajaxform-not-working) [过](https://stackoverflow.com/questions/12163558/ajax-form-does-not-work-with-internet-explorer-8-9)了。如果这是一个跨域请求，您可能还想查看[此讨论](http://forum.jquery.com/topic/ajax-form-not-working-with-ie-and-opera)。从那个讨论：

```
$.ajaxTransport("+*", function( options, originalOptions, jqXHR ) {

    if(jQuery.browser.msie && window.XDomainRequest) {
        var xdr;
        return {
            send: function( headers, completeCallback ) {
                // Use Microsoft XDR
                xdr = new XDomainRequest();
                xdr.open("get", options.url);
                xdr.onload = function() {

                    if(this.contentType.match(/\/xml/)){
                        var dom = new ActiveXObject("Microsoft.XMLDOM");
                        dom.async = false;
                        dom.loadXML(this.responseText);
                        completeCallback(200, "success", [dom]);
                    }else{
                        completeCallback(200, "success", [this.responseText]);
                    }
                };

                xdr.ontimeout = function(){
                    completeCallback(408, "error", ["The request timed out."]);
                };

                xdr.onerror = function(){
                    completeCallback(404, "error", ["The requested resource could not be found."]);
                };

                xdr.send();
          },
          abort: function() {
              if(xdr)xdr.abort();
          }
        };
      }
    }); 
```

# android - 构建失败，“找不到 taskdef 类 com.android.ant.SetupTask”

> ID：13979104
> 
> 赞同：2
> 
> 时间：2012-12-20T19:26:28.603
> 
> 标签：android, cordova, build-process

我正在按照此处的说明进行操作：http: [//ofps.oreilly.com/titles/9781449383268/ch07_id35817064.html](http://ofps.oreilly.com/titles/9781449383268/ch07_id35817064.html)，以便在我的 Mac 上使用 Phonegap 和 Mountain Lion 从 HTML 项目构建原生 android 应用程序。

构建失败并显示以下错误消息：

```
Building phonegap.jar

BUILD FAILED
/Applications/phonegap-android-master/src/build.xml:49: taskdef class com.android.ant.SetupTask cannot be found 
```

经过一些互联网调查后，我尝试设置 sdk.dir 也不起作用：

```
MacintoshEwald-3:bin private$ /Applications/adt-bundle-mac/sdk
-bash: /Applications/adt-bundle-mac/sdk: is a directory
MacintoshEwald-3:bin private$ sdk.dir=/Applications/adt-bundle-mac/sdk
-bash: sdk.dir=/Applications/adt-bundle-mac/sdk: No such file or directory 
```

我可以在互联网上找到许多具有相同问题的帖子，但没有答案。有人可以帮我解决我的问题吗？

谢谢

埃瓦尔德

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-29T10:37:50.940

我在 Windows 上遇到了类似的问题。经过调查，我发现 android-sdk/tools/lib 中的 anttasks.jar 文件没有 com.android.ant.SetupTask 类。我不知道这个文件是坏了还是什么。我有安卓平台 8 和 17。

# c# - 当我比较三个数字时，为什么我的 If 语句不起作用？

> ID：13979106
> 
> 赞同：-5
> 
> 时间：2012-12-20T19:26:34.920
> 
> 标签：c#, c#-4.0

*我有这个代码，但它不工作：*

```
double N1 = int.Parse(TB_S1.Text);
double N2 = int.Parse(TB_S2.Text);
double N3 = int.Parse(TB_S3.Text);
double N4 = int.Parse(TB_P1Y.Text);
double N5 = int.Parse(TB_P2X.Text);

double N11 = N1 + N2;
double N6 = N2 + N3;
double N7 = N3 + N4;

double R;

if ((N11 = N6 = N7))
{
    messageBox.Show("Corect");
} 
```

编辑：解决方案：问题是使用单个 = 而不是 ==

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:28:07.780

问题很可能是这条线

```
if ((N11 = N6 = N7)) 
```

`=`在 C# 中是赋值；你最有可能在寻找平等，这是`==`

将上述内容更改为此应该可以为您解决问题。

```
if (N11 == N6 && N11 == N7) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T19:29:04.750

要处理您的比较，您需要：

```
if ((N11 == N6) && (N11 == N7)) 
```

或者，简化：

```
if (N11 == N6 && N11 == N7) 
```

注意`==`（比较）而不是`=`（分配）。此外，您需要进行两次单独比较以检查三个值是否相等。

此外，现在您正在使用`int.Parse`，但分配给`double`. 您可能应该`double.Parse`改用：

```
double N1 = double.Parse(TB_S1.Text); 
```

您可能还需要考虑使用`double.TryParse`，因为这将更好地处理用户输入中的错误：

```
double N1;
if(!double.TryParse(TB_S1.Text, out N1))
{
    MessageBox.Show("Please enter a valid value in TB_S1");
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:29:35.847

尝试这个：-

```
 if ((N11 == N6) && (N11 == N7)) 
```

代替

```
 if ((N11 = N6 = N7)) 
```

# php - ZF1：为什么 Zend_Element_File 在没有文件发布时返回错误，即使它不是必需的？

> ID：13979110
> 
> 赞同：0
> 
> 时间：2012-12-20T19:26:54.090
> 
> 标签：php, zend-framework

当我进行单元测试时，它只会在 CLI 中发生。我知道这与 FILES 超级全局没有被填充有关，因为我实际上并没有提交表单，但是为什么表单被标记为错误并且没有错误消息？

# windows-phone-7 - 如何从服务器将数据发送到 Windows Phone 中的另一部手机？

> ID：13979116
> 
> 赞同：0
> 
> 时间：2012-12-20T19:27:12.210
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone-7.1.1

我正在 windows phone 中开发一个应用程序，我在其中输入比赛的分数，并且具有相同应用程序的其他 windows phone 用户应该将该分数作为 toast 通知（如果有其他更好的方法建议我）。

我还想从 rss 提要将数据推送给这个应用程序用户。此提要每 1 或 2 分钟刷新一次数据。

这可以在 windows phone 中实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:41:32.763

如果您只想将匹配分数的通知发送给某些用户，那么您可以使用[Push Notifications](http://msdn.microsoft.com/en-us/library/hh221549.aspx)。

如果每个人都需要收到通知，那么您只需使用[BackgroundAgent](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)。后台代理将大约每 30 分钟运行一次（如果您需要它更准确，那么您将返回推送通知）。当代理运行时，您可以检查自代理上次运行以来是否有任何新的匹配分数，如果有，则弹出 toast。

您还应该使用后台代理来检查您的 RSS 提要。

# .net - .NET 认为屏幕的顺序不同于 Windows 控制面板 | 显示 | 屏幕分辨率可以

> ID：13979118
> 
> 赞同：3
> 
> 时间：2012-12-20T19:27:16.650
> 
> 标签：.net, windows, multiple-monitors

昨晚我在运行 Windows 7 Embedded Standard 64 位并连接了 2 个显示器的 PC 上看到了奇怪的事情。显示分辨率对话框将显示器显示为显示器 1 和显示器 2（从左到右）。当我运行我编写的同时使用两个屏幕的程序时，我期望在显示器 1 上的输出显示在最右边的显示器上，而我期望在显示器 2 上的输出显示在最左边的显示器上。

在这里和谷歌上花了一些时间，最后使用我发现的一些代码来创建一个显示 System.Windows.Forms.Screen.AllScreens 内容的控制台应用程序：

```
// For each screen, add the screen properties to a list box.
foreach (var screen in System.Windows.Forms.Screen.AllScreens)
{
    Console.WriteLine("Device Name: " + screen.DeviceName);
    Console.WriteLine("Bounds: " +
        screen.Bounds.ToString());
    Console.WriteLine("Type: " +
        screen.GetType().ToString());
    Console.WriteLine("Working Area: " +
        screen.WorkingArea.ToString());
    Console.WriteLine("Primary Screen: " +
        screen.Primary.ToString());
} 
```

在一台测试机器上运行它并得到了我的预期——AllScreens 顺序与 DISplay Resolution 对话框顺序相匹配。

但是在有问题的机器上，上面代码的输出是相反的。DISPLAY1 位于第二个屏幕（最右侧）的位置，而 DISPLAY2 位于最左侧的屏幕。

这真的很奇怪。由于这没有使用我的程序，它是 .NET 内部的东西。相同的代码可以在其他类似的机器上运行，所以我不认为这是一个普遍的问题，而是与这台机器隔离的问题。我尝试了更多类似问题的搜索，但结果为空，可能是由于搜索词（监视器、屏幕、.NET 都匹配很多与此问题无关的项目）。

任何人以前都见过这个，理想情况下，知道如何解决它？重新安装 .NET 4 包没有帮助。在“显示分辨率”对话框中更改位置，然后再将它们改回来没有帮助，即使在两者之间重新启动也是如此。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:25:23.520

该`AllScreens`属性是通过[`EnumDisplayMonitors`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162610%28v=vs.85%29.aspx)函数填充的。

的文档`EnumDisplayMonitors`没有说明它返回监视器的顺序，因此可以推断它是一个实现细节，可以从操作系统版本更改为操作系统版本。

# html - 垂直对齐：中间不工作

> ID：13979119
> 
> 赞同：3
> 
> 时间：2012-12-20T19:27:20.383
> 
> 标签：html, css, vertical-alignment

我有一个节标题，左右两边都有边框。理想情况下，我希望这些垂直对齐。但是，`vertical-align: middle;`不起作用，我不太清楚为什么。想法？

CSS

```
#save-the-date {
    margin: 0 auto;
    width: 960px;
}

#save-the-date #title {
    vertical-align: middle;
}

#save-the-date #title h2 {
    font-size: 165%;
    margin: 0 auto;
    width: 150px;
}

#save-the-date #title .left-border {
    float: left;
    background:url('img/border.png') repeat-x -10px 0;
    width:340px;
    height:3px;
}

#save-the-date #title .right-border {
    float: right;
    background:url('img/border.png') repeat-x -10px 0;
    width:340px;
    height:3px;
} 
```

HTML

```
<div id="save-the-date">
    <div id="title">
        <div class="left-border"></div><!-- end border -->
        <h2>Save The Date</h2>
        <div class="right-border"></div><!-- end border -->
    </div><!-- end title -->
</div><!-- end save-the-date --> 
```

![在此处输入图像描述](../Images/286de8b4d776281cbf2e93cf243d17ea.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:30:32.283

设置`display: table-cell`在容器上以及`vertical-align: middle`. 这将导致 CSS 将容器视为允许指定垂直对齐的表格单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:33:17.067

由于这只是一行，您可以简单地将 line-height 设置为元素的高度。[在 JSFiddle 上查看](http://jsfiddle.net/KvBVV/)

## HTML

```
​&lt;p>hello</p>​ 
```

## CSS

```
p {
  line-height: 50px;
  height: 50px;
  background-color: #eee;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:34:27.267

因为您使用 div div 的显示是块，您可以将其更改为`<span>` 或更改显示，例如：

```
div
{display: inline-block} 
```

或者

> div {显示：表格单元格；}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T09:57:15.283

我不知道为什么它在我的情况下工作......但我可以通过执行以下操作看到它工作：

```
div {padding-top: 0%;} 
```

# javascript - 第一行后动态添加的行和计算函数错误

> ID：13979122
> 
> 赞同：0
> 
> 时间：2012-12-20T19:27:44.347
> 
> 标签：javascript, jquery, function

我正在做一个项目，它几乎完成了，但我遇到了一个问题来完成它。我尝试了很多东西并在网上搜索，但不幸的是我无法成功。

问题在于表中动态添加的行。自动计算脚本只在表格的第一行工作，在表格的第 2、3、... 行它不起作用。

[jsFiddle](http://jsfiddle.net/3W48W/)下面的代码：

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$("#AddLine").click(function () {
        //var row = "<tr><td><input type=text /></td><td><input type=text /></td><td><input type=text /></td><td><button>X</button></td></tr>";
        var row = "<tr><td><input type=\"text\" style=\"width:100%;\" name=\"stokkodu[]\"></td><td><input type=\"text\" style=\"width:100%;\" name=\"stokadi[]\"></td><td><input type=\"text\" style=\"width:100%;\" id=\"miktar\" class=\"miktar\" name=\"miktar[]\"></td><td><input type=\"text\" style=\"width:100%;\" name=\"birim[]\"></td><td><input type=\"text\" style=\"width:100%;\" id=\"birimfiyat\" class=\"birimfiyat\" name=\"birimfiyat[]\"></td><td><input type=\"text\" style=\"width:100%;\" readonly id=\"tutar\" class=\"tutar\" name=\"tutar[]\"></td><td><input type=\"text\" style=\"width:100%;\" class=\"indirim\" name=\"indirim[]\"></td><td><input type=\"text\" style=\"width:100%;\" readonly class=\"indirimtutar\" name=\"indirimtutari[]\"></td><td><input type=\"text\" style=\"width:100%;\" class=\"kdv\" name=\"kdv[]\"></td><td><input type=\"text\" style=\"width:100%;\" readonly class=\"satirtoplami\" name=\"satirtoplami[]\"></td><td><button>X</button></td></tr>";
        $("#table").append(row);
    });

$("#table").on("click", "button", function() {
   $(this).closest("tr").remove(); 
});
});

$(document).ready(function() {
   $('input[id=miktar],input[id=birimfiyat],input[id=indirim],input[id=kdv], input[id=satirtoplami]').change(function(e)  {
        var total_mnozi = 0;
        //var $row = $(this).parent();
        var $row = $(this).closest("tr"); //this is the closest common root of the input elements
        var miktar = parseFloat( $row.find('input[id=miktar]').val() );
        var birimfiyat = parseFloat( $row.find('input[id=birimfiyat]').val() );
        var indirim = parseFloat( $row.find('input[id=indirim]').val() );
        var kdv = parseFloat( $row.find('input[id=kdv]').val() );

         //total_mnozi = ((dep + minpre + adjpre) * procombase * profcomper) || 0; //calculate traditionally; display zero until result is meaningful
          tutar = (miktar * birimfiyat) || 0;  // tutar hesaplama. miktar x birim fiyat = tutar 
          indirimtutar= (tutar * indirim / 100) || 0;  // indirim tutarı hesaplama input'a girilen %'ye göre hesaplar.
          satirtoplami= ((tutar - indirimtutar) * ((kdv / 100) + 1 )) || 0;
          $row.find('input[id=tutar]').val(tutar.toFixed(2));  // tutar'ın id="tutar"'a virgülden sonra 2 hane alacak şekilde yazdrılması.
          $row.find('input[id=indirimtutar]').val(indirimtutar.toFixed(2));
          $row.find('input[id=satirtoplami]').val(satirtoplami.toFixed(2));

    });
});

//]]>  

</script>
<input type="button" id="AddLine" value="add"/>
<table id="table">
    <tr>
    </tr>
        <tr>
            <td scope="col">Stok Kodu</th>
            <td scope="col">Stok Adı</th>
            <td scope="col">Miktar</th>
            <td scope="col">Birim</th>
            <td scope="col">Birim Fiyat</th>
            <td scope="col">Tutar</th>
            <td scope="col">İndirim (%)</th>
            <td scope="col">İndirim Tutarı</th>
            <td scope="col">KDV (%)</th>
            <td scope="col">Satır Toplamı</th>
            <td scope="col"></th>
        </tr>
        <tr>
            <td><input type="text" style="width:100%;" name="stokkodu[]"></td>
            <td><input type="text" style="width:100%;" name="stokadi[]"></td>
            <td><input type="text" style="width:100%;" id="miktar" class="miktar" name="miktar[]"></td>
            <td><input type="text" style="width:100%;" name="birim[]"></td>
            <td><input type="text" style="width:100%;" id="birimfiyat" class="birimfiyat" name="birimfiyat[]"></td>
            <td><input type="text" style="width:100%;" readonly id="tutar" class="tutar" name="tutar[]"></td>
            <td><input type="text" style="width:100%;" id="indirim" class="indirim" name="indirim[]"></td>
            <td><input type="text" style="width:100%;" readonly id="indirimtutar" class="indirimtutar" name="indirimtutari[]"></td>
            <td><input type="text" style="width:100%;" id="kdv" class="kdv" name="kdv[]"></td>
            <td><input type="text" style="width:100%;" readonly id="satirtoplami" class="satirtoplami" name="satirtoplami[]"></td>
            <td><button>X</button></td>
        </tr>
</table>​ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:03:08.793

你的问题是重复的ID。

您不应添加两个或多个具有相同`Id`. 所以，为了解决这个问题，你动态添加的元素不应该有`id`属性，然后你使用`class`属性来定位每一行中的元素。

工作示例： http: [//jsfiddle.net/3W48W/2/](http://jsfiddle.net/3W48W/2/)（结合@Barmar 的答案）

HTM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:06:48.553

您的代码有两个问题：

首先，您在动态添加的每一行中使用相同的 ID。ID 必须是唯一的。

其次，`.change()`绑定仅适用于页面加载时 DOM 中的元素。要处理动态添加的元素，您需要使用`.on()`绑定到永久元素并委托给动态元素，或者在将事件处理程序附加到 DOM 后将其绑定到新行的元素。

# nhibernate - 地图集合为可查询

> ID：13979131
> 
> 赞同：1
> 
> 时间：2012-12-20T19:28:21.793
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我已经习惯使用 SQLAlchemy (Python) 来映射关系/集合`lazy="dynamic"`，将属性映射为 Query 对象而不是填充的列表/集合（或延迟加载属性的代理）。然后，此映射属性允许您在执行此操作之前进一步细化用于获取集合的查询（应用顺序、限制、过滤器等）。

例如，在 SQLAlchemy 中，我可以像这样映射关系：

```
class Post(Base):
    ...

class User(Base):
    ...
    posts = relationship(Post, lazy="dynamic") 
```

然后当我检索用户时，我可以对帖子应用订单，或者只检索最后 5 个，等等。

```
user = session.query(User).get(1)

# Fetch the last 5 posts by user 1
posts = user.posts.order_by(Post.create_date.desc()).limit(5).all() 
```

[http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html](http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html)

* * *

我很想找到一种使用 Fluent NHibernate 执行此操作的方法，将集合映射为 QueryOver 或 IQueryable (LINQ)，例如：

```
public virtual QueryOver<Post> Posts {get; set;}
or
public virtual IQueryable<Post> Posts { get; set; } 
```

并在映射中执行以下操作：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        ...
        HasMany(u => u.Posts).Fetch.Dynamic
    }
} 
```

目前这是否可以使用 Fluent NHibernate（或仅 NHibernate）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:39:00.147

**使用 NHibernate 是可能的，但它并不是开箱即用的。**

您需要编写自己的实现 IQueryable 的集合包装器，将其注入您自己的 CollectionFactory 并将查询生成委托给加载包含对象的会话。

# asp.net - 处理大量后置变量 ASP.Net

> ID：13979134
> 
> 赞同：5
> 
> 时间：2012-12-20T19:28:29.073
> 
> 标签：asp.net

我遇到了一个问题，我有多个表单，上面有很多控件（20-40）。问题是，当我处理回发时，我需要将它们的值放入变量中，如果它们不是 asp.net 服务器控件（即选择、输入等），我有时需要确保它们甚至存在。因此，如果我有一个未选中的纯 html 复选框，它将不会被发布到服务器，您需要检查它的存在，然后才能获得它的值。之后，我需要将它们传递给一个方法以保存到数据库中。该方法处理我所有的 crud 和业务验证。设置它充其量是乏味的并且非常耗时。人们在做什么来处理这个问题？我正在使用 ASP.Net 4.0 Web 表单和 VB.Net。一种想法是将 http 上下文传递到方法中，并让方法中的代码查找值。不过，这似乎不是一个很好的解决方案。任何建议都将不胜感激，因为我知道我不是唯一遇到这个问题的人。提前致谢。

韦德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:09:19.730

对于大型表格，您可以：

1.  在客户端创建 javascript 对象，将其转换为 JSON 字符串，将 JSON 字符串放入 ASP .NET 控件隐藏或不可见的文本区域；
2.  提交表单并将 JSON 反序列化为服务器上的对象。

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.validation.net.webforms.min.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:HiddenField runat="server" ID="Hidden1" />
    <input type="checkbox" id="CheckBox1" checked />
    <input type="checkbox" id="CheckBox2" />
    <input type="text" id="text1" name="text1" value=""/>
    <asp:Button runat="server" Text="Button" ID="Button1" OnClientClick="createJSON()" OnClick="Button1_Click" />
    <script type="text/javascript">

        function createJSON() {
            $('#Hidden1').val(JSON.stringify({
                field1: $('#CheckBox1').is(':checked'),
                field2: $('#CheckBox2').is(':checked'),
                field3: $('#text1').val()
            }));
        }

        $(document).ready(function () {
            $("#form1").validate({
                onsubmit: false,
                rules: {
                    text1: {
                        required: true,
                        digits: true
                    }
                }
            });

            $("#Button1").click(function (evt) {
                var isValid = $("#form1").valid();
                if (!isValid) evt.preventDefault();
            });
        });
    </script>
    </form>
</body>
</html> 
```

**默认.aspx.cs**

```
using System;
using System.Web.Script.Serialization;

public class myClass
{
    public bool field1;
    public bool field2;
    public string field3;
}

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        var result = (myClass)(new JavaScriptSerializer()).Deserialize(Hidden1.Value, typeof(myClass));
    }
} 
```

![在此处输入图像描述](../Images/bb7ec97b8aa04ba6fe53a78de888b6f0.png)

![在此处输入图像描述](../Images/892223daf96d22e6e5c12321030ceb41.png)

安装验证：

PM> 安装包 JQuery.Validation

PM> 安装包 JQuery.Validation.WebForms

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:22:49.620

从某些控件不回发任何值的那一刻起，如果未选中复选框，则您有两个选项。

1.  在回发之前和之后了解您的所有控件/或
2.  使用 javascript 创建控件的所有名称并将它们发布回隐藏字段中。

现在，在回帖中`HttpContext.Current.Request.Form`，您可以在其中阅读所有已发布的值。

在客户端，您可以使用简单的 javascript 或 jQuery 创建所有输入控件的列表并将它们发送到隐藏的输入。这是一个例子：

```
var inputs, index, cNames = ""; 
inputs = document.getElementsByTagName('input');
for (index = 0; index < inputs.length; ++index) {
    cNames += "&" + inputs[index].name;
}   

document.getElementById("AllControls").value = cNames; 
```

或与 jQuery 相同

```
 var cAllNames = "";
    $('input').each(function() {
        cAllNames += "&" + $(this).attr("name");
    });
    jQuery('#AllControls').val(cAllNames); 
```

在您的页面上，您有一个隐藏的控件，例如

```
<input type="hidden" name="AllControls" id="AllControls" /> 
```

在帖子上，您的控件的所有名称都在一行中，例如：

```
AllControls=&__VIEWSTATE&__EVENTVALIDATION&cbBoxTest&AllControls&Button1 
```

在那里您可以拆分该字符串，每个名称都用 分隔，`&`您可以在那里看到使用的内容，未使用的内容。您可以传递有关该控件的其他信息 - 就像我发送每个控件的名称一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T13:40:56.463

为每个 Web 表单创建一个模型类，该模型类具有公共属性以及表单上可能存在的所有字段。创建名称、验证和默认值属性并将它们应用于属性。在回发期间，找出模型类需要什么，创建一个实例，迭代其公共属性并应用：如果 post 具有属性名称的字段 - 验证值并应用于该字段，如果没有 - 应用默认值。类似的东西（我会使用c#，但我想它还是很清楚的）

```
MyCrudModelForSomeForm {
    [MyWebFormField(Default = 42, Type = typeof(int), Name = "txtAmount")]
    public int SomeInt { get; set; }
    [MyWebFormField(Default = "Hello", Type = typeof(string), Name = "txtMessage", Validate = "$[A-Z]{6}^")]
    public string SomeString { get; set; }
    [MyWebFormField(Default = "Zimbabwe", Type = typeof(string), Name = "txtCountryChoice")]
    public string SomeOtherString { get; set; }
} 
```

这基本上是 MVC 概念中 M(odel) 的自定义实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T07:17:43.297

**ASP.NET Webforms 架构不支持多个表单**

*如果您创建了一个包含多个表单的页面，那么我建议使用 jQuery 并将单个表单发布到受尊重的处理程序来处理请求*

**这将是简单而优雅的**

# mysql - 如何在表格级别计算不同的数字并将它们分组

> ID：13979140
> 
> 赞同：0
> 
> 时间：2012-12-20T19:28:44.243
> 
> 标签：mysql

我有下表：

```
name | number
--------------
aaa  | 111
aaa  | 555
bbb  | 222
ccc  | 111
ddd  | 333
eee  | 444 
```

以及以下内容：

```
name | country
---------------
aaa  | US
bbb  | UK
ccc  | UK
ddd  | DE
eee  | UK 
```

我需要选择不同数字的数量（在整个表级别上不同），并根据他们的国家对这些不同的值进行分组。

我使用了以下查询：

```
SELECT count(distinct t1.number), t2.country
FROM db.t1
JOIN db.t2
ON t1.name=t2.name
GROUP BY t2.country; 
```

我得到的结果是：

```
3 | UK
2 | US
1 | DE 
```

如第一个表所示，我只有 5 个不同的数字。但是在查询之后，我得到了 6 个不同的数字。这是因为名称: `bbb`, `ccc`,`eee`都属于英国，但`ccc`在表级别中没有不同的数字（与`number`关联的重复`name` `aaa`，但`aaa`在另一个国家/地区）。

问题是：如何`numbers`在表级别查询不同的值（当前查询计算不同的值，但在组级别）根据他们的国家分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:56:07.610

```
SELECT count(distinct t1.number), t2.country
FROM (SELECT number, name
      FROM db.t1
      GROUP BY number) t1
JOIN db.t2
ON t1.name=t2.name
GROUP BY t2.country; 
```

这会任意选择具有重复数字的国家之一。

[小提琴](http://www.sqlfiddle.com/#!2/cf684/1)

# mongoid - 当包含 Tyre::Callbacks 时，mongoid has_many children 不通过nested_attributes 保存

> ID：13979145
> 
> 赞同：1
> 
> 时间：2012-12-20T19:29:06.370
> 
> 标签：mongoid, nested-attributes, tire

所以这里是问题：

语境：

*   mongoid (2.2.6)
*   轮胎 (0.5.1)

类：

```
class Account
  include Mongoid::Document
  has_many :comments, auto_save: true
  accepts_nested_attributes_for :comments
end
class Comment
  include Mongoid::Document
  include Tire::Callbacks
  include Tire::Search
  belongs_to :account
end 
```

操作：

```
account = Account.first
account.comments_attributes = [{content: 'super'}]
account.comments => [#<Comment content: 'super'>] 
```

问题：

```
Comment.count => 0
Comment.search().count => 1
account.comments.build {content: 'super'}
account.save => true
Comment.count => 1 
```

似乎与自动保存与 mongoid 上的nested_attributes 更改和轮胎的回调存在冲突......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:21:01.780

问题与这个有关=> [https://stackoverflow.com/questions/14860594/issue-with-sti-nested-attributes-mongoid-3-0-22](https://stackoverflow.com/questions/14860594/issue-with-sti-nested-attributes-mongoid-3-0-22)

现在似乎解决了。

# jquery-ui - 是否可以在调用 $('#myid').datepicker() 之后设置 jQuery UI 的 datepciker onselect 回调

> ID：13979148
> 
> 赞同：1
> 
> 时间：2012-12-20T19:29:13.490
> 
> 标签：jquery-ui

我是一名承包商，并没有真正的权力来处理某些事情，不幸的是，有一个页面调用他们构建的 html 助手，只要有 DateTime 传递给它，它就会喷出带有“日期”类的输入，然后在主模板中他们有这个

```
function hijaxInputs(elementId) {
    $('#' + elementId + ' input.date').datepicker({ changeYear: true, showOn: 'button', buttonImage: '/Content/css/images/Calendar.gif', buttonImageOnly: true });
    $('#' + elementId + ' input[mask]').each(function(i) {
        $(this).mask($(this).attr('mask'));
    });
} 
```

这是蹩脚的，因为我无法控制输入的呈现方式，然后我无法控制 datepicker 对元素的应用。事后我试图这样做，但这似乎失败了。我试过这个。

```
$('#consentDocumentsTbl [id$=SubmissionDate]').onSelect = function (dateText, inst) { console.log("Err..."); }; 
```

但那是不行的——我只是犯了一个简单的语法错误，还是我想做的不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:43:43.230

您应该能够`onSelect`在初始化后使用小部件的`option`函数设置函数，如下所示：

```
$('#consentDocumentsTbl [id$=SubmissionDate]').datepicker('option', 'onSelect', 
    function (dateText, inst) { console.log("Err..."); }); 
```

# c - 为什么 sin_addr 在 in_addr 结构中？

> ID：13979150
> 
> 赞同：59
> 
> 时间：2012-12-20T19:29:17.593
> 
> 标签：c, sockets, unix

我的疑问与 UNIX 中的以下套接字结构有关：

```
struct sockaddr_in {
    short            sin_family;   // e.g. AF_INET, AF_INET6
    unsigned short   sin_port;     // e.g. htons(3490)
    struct in_addr   sin_addr;     // see struct in_addr, below
    char             sin_zero[8];  // zero this if you want to
}; 
```

这里的成员`sin_addr`是 type `struct in_addr`。

但我不明白为什么有人愿意这样做，因为所有人`struct inaddr`都是：

```
struct in_addr {
    unsigned long s_addr;          // load with inet_pton()
}; 
```

一切`in_addr`都只是一个成员`s_addr`。为什么我们不能有这样的东西：

```
struct sockaddr_in {
    short            sin_family;   // e.g. AF_INET, AF_INET6
    unsigned short   sin_port;     // e.g. htons(3490)
    unsigned long    s_addr ; 
    char             sin_zero[8];  // zero this if you want to
}; 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-20T19:31:15.610

`struct in_addr`有时与此有很大不同，具体取决于您使用的系统。例如在[Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738571%28v=vs.85%29.aspx)上：

```
typedef struct in_addr {
  union {
    struct {
      u_char s_b1,s_b2,s_b3,s_b4;
    } S_un_b;
    struct {
      u_short s_w1,s_w2;
    } S_un_w;
    u_long S_addr;
  } S_un;
} IN_ADDR, *PIN_ADDR, FAR *LPIN_ADDR; 
```

唯一的*要求*是它包含一个 member `s_addr`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T19:31:04.140

因为该`in_addr`结构可能包含多个成员。

[http://pubs.opengroup.org/onlinepubs/009604599/basedefs/netinet/in.h.html](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/netinet/in.h.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-25T12:02:46.860

`struct in_addr`is a more than just an integer 是因为它可能有超过`in_addr_t`. 在很多系统中，它都有一个`union`，这样实现的原因是为了[A/B/C 类地址](https://en.wikipedia.org/wiki/Classful_network)，现在不用了。

*Unix网络编程第1卷*详细解释了历史原因：

> `sin_addr`成员是一个结构而不仅仅是一个,的原因`in_addr_t`是历史性的。较早的版本 (4.2BSD) 将该`in_addr`结构 定义`union`为各种结构中的一个，以允许访问 4 个字节中的每一个以及包含在 32 位 IPv4 地址中的两个 16 位值。这与 A、B 和 C 类地址一起用于获取地址的适当字节。但是随着子网划分的出现，以及各种无类别寻址的地址类别的消失，对联合的需求就消失了。今天的大多数系统已经取消了`union`并且只是定义`in_addr`为具有单个`in_addr_t`成员的结构。

# java - 访问者模式如何不违反开放/封闭原则？

> ID：13979160
> 
> 赞同：30
> 
> 时间：2012-12-20T19:29:41.383
> 
> 标签：java, design-patterns, visitor-pattern, open-closed-principle

> ## 来自维基百科：
> 
> 这个想法是一旦完成，一个类的实现只能被修改以纠正错误；新的或更改的功能将需要创建不同的类。该类可以通过继承重用原始类的编码

据我了解，访问者模式是一种强大的技术，可以通过使用双重调度来遍历实现相同接口的相似但不同的对象。在我的一个 Java 示例中，我创建了一组构成树结构的复合对象，这些对象的每个特定实现都实现了可访问接口。访问者接口对每个可访问对象都有一个方法，具体的访问者实现了对每种情况执行的操作。

我想弄清楚的事实是，如果我要向也实现可访问的复合结构添加一个新实现，那么我需要重新打开访问者界面并将该案例添加到其中，这也迫使我修改访问者的每个实现。

虽然这很好，因为无论如何我都需要这样做（如果访问者无法理解它们，添加到您的可访问对象有什么好处？）但是在学术层面上，这不会违反开放封闭原则吗？这难道不是设计模式的核心原因之一吗？试图展示切换到这种模式的正当理由，而不是维护一个 switch 语句来结束所有 switch 语句，但每个人都认为代码无论如何都是一样的，每个案例都有一个方法而不是 switch 块，只是分解了并且更难阅读。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T19:38:05.180

模式适用于某些情况。来自[GoF 书](http://en.wikipedia.org/wiki/Design_Patterns)（第 333 页）：

> 在以下情况下使用访问者模式
> 
> *   [...]
>     
>     
> *   定义对象结构的类很少更改，但您经常希望在该结构上定义新操作。更改对象结构类需要重新定义所有访问者的接口，这可能是昂贵的。如果对象结构类经常更改，那么最好在这些类中定义操作。

如果您经常更改构成结构的对象的类，则访问者类层次结构可能难以维护。在这种情况下，在构成结构的类上定义操作可能会更容易。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-20T19:44:22.940

GoF 成员之一的 John Vlissides 在他的[*Patterns Hatching*](https://rads.stackoverflow.com/amzn/click/com/0201432935)书中写了一篇关于这个主题的精彩章节。他讨论了扩展层次结构与保持访问者完整不相容的问题。他的解决方案是访问者和`enum`基于 - （或基于类型）方法的混合，其中向访问者提供了一种`visitOther`方法，该方法由访问者开箱即用地理解的“基本”层次结构之外的所有类调用。此方法为您提供了一种逃避方式来处理在访问者完成后添加到层次结构中的类。

```
abstract class Visitable {
    void accept(Visitor v);
}
class VisitableSubclassA extends Visitable  {
    void accept(Visitor v) {
        v.visitA(this);
    }
}
class VisitableSubclassB extends Visitable {
    void accept(Visitor v) {
        v.visitB(this);
    }
}
interface Visitor {
    // The "boilerplate" visitor
    void visitB(VisitableSubclassA a);
    void visitB(VisitableSubclassB b);
    // The "escape clause" for all other types
    void visitOther(Visitable other);
} 
```

当您添加此修改时，您的访问者不再违反*开闭原则*，因为它是对扩展开放的，无需修改其源代码。

我在几个项目中尝试了这种混合方法，效果还不错。我的主类层次结构是在一个单独编译的库中定义的，不需要更改。当我添加 的新实现时`Visitable`，我会修改我的实现以在它们的方法`Visitor`中期望这些新类。`visitOther`由于访问者和扩展类都位于同一个库中，因此这种方法非常有效。

PS 还有一篇名为《[*Visitor Revisited》*](http://www.inspirel.com/articles/Visitor_Revisited.html)的文章正是在讨论这个问题。作者得出的结论是，可以回到`enum`基于 - 的双重调度，因为原始的*访问者模式*与 - 基于 - 的调度相比并没有显着改进`enum`。我不同意作者的观点，因为如果您的继承层次结构的大部分是可靠的，并且希望用户在这里和那里提供一些实现，那么混合方法会在可读性方面提供显着的好处；扔掉所有东西是没有意义的，因为我们可以相对容易地适应层次结构的几个类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-02T00:49:13.703

前两个答案很棒。为了扩展观察，“ *A 模式适用于某些情况*”，从两个维度考虑 OCP。

1.  当我们可以向现有层次结构添加新类型时，面向对象的代码可以扩展。我们不能向现有类型添加新功能。
2.  当我们可以向现有数据结构添加新逻辑时，功能代码可以扩展。我们不能通过现有函数传递新的数据结构。

这种二分法称为[表达问题](https://stackoverflow.com/q/3596366/1371329)。访问者模式允许我们交换 OO 可扩展的通常维度，作为回报，我们获得 FP 可扩展的维度。

为了协调访问者与 OCP，我们可以说该模式只是为可扩展性打开了一个不同的维度。可扩展性维度的权衡适用于某些情况。

# android - 在 android 2.2 中完成的编码是否可以在 4.1 Jellybean Phones 中使用？

> ID：13979162
> 
> 赞同：0
> 
> 时间：2012-12-20T19:29:53.287
> 
> 标签：android, compatibility, android-2.2-froyo

我在 Eclipse 中使用 android 2.2 编写了一个应用程序。

我的应用在三星 Galaxy mini android 2.2 上运行良好。但是，它不适用于三星 Galaxy s3 android 4.1。

我的应用只占三星 Galaxy s3 屏幕的一半。

1.  为什么我的应用无法在更高分辨率的设备上运行？
2.  如何使该应用程序与运行不同版本 android 的其他设备兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:33:10.843

确保您的应用程序可以在其他设备上运行的最佳方法是在发布之前访问其他设备并在这些设备上测试您的应用程序。

另一种方法是确保您的目标是正确的 SDK，并`AndroidSupportLibrary`在需要向后兼容时使用。

为了帮助我们解决您的具体问题，我们需要更多关于到底发生了什么的详细信息，但请确保您使用的包和库与您尝试定位的 android 版本兼容。

并善用`AndroidSupportLibrary`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:33:23.697

你检查分辨率兼容性了吗？这似乎更像是一个 Android Manifest 问题，而不是一个 Android 版本问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:50:06.423

听起来您很可能只是在布局 XML 的顶部有一个 LinearLayout，它在 S3 上占用的空间更少。

我建议看看下面的两个链接；如果你想要一个特定的起点，你可以将你的布局调整为 match_parent 并使用 l/m/h/xhdpi 文件夹来放置不同大小的图形。另外值得检查你是使用 dp 还是 dip （密度独立像素）

[http://developer.android.com/training/multiscreen/index.html](http://developer.android.com/training/multiscreen/index.html)

[http://android-developers.blogspot.co.uk/2012/11/designing-for-tablets-were-here-to-help.html](http://android-developers.blogspot.co.uk/2012/11/designing-for-tablets-were-here-to-help.html)

# ruby-on-rails - 不正确的 Time.now - 不遵守时区设置

> ID：13979164
> 
> 赞同：1
> 
> 时间：2012-12-20T19:30:11.477
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, alias

注意到 Time.now 返回的时间不正确（比 EST 早 5 小时），即使配置似乎设置为 EST。

我能够获得正确 EST 的唯一方法是这样的：

```
 #Ruby 1.8.7/Rails 2.2.2
  t = Time.now - (3660 * 5)
  est = t.strftime("%Y-%m-%d %H:%M:%S")

  ### environment.rb
  config.time_zone = 'Eastern Time (US & Canada)'
  config.active_record.default_timezone = 'Eastern Time (US & Canada)'

  #### login_controller.rb
    @new_login_attempt.last_login_date = Time.now.strftime("%Y-%m-%d %H:%M:%S")

    @new_login_attempt.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:38:06.927

使用`Time.zone.now`代替`Time.now`

# ios - 如何在导航栏的标题中包含图像？

> ID：13979165
> 
> 赞同：0
> 
> 时间：2012-12-20T19:30:17.260
> 
> 标签：ios, image, navigation, storyboard

> **可能重复：**
> [如何将图像作为导航栏标题](https://stackoverflow.com/questions/865176/how-to-put-an-image-as-the-navigation-bar-title)

我对使用 xcode 进行编程相当陌生，并且正在使用情节提要。我的导航控制器工作正常，每个视图控制器都有一个单词标题。我的问题是如何在不作为导航栏本身的单独图标的情况下向该标题添加图像？当我将图像拖到导航栏上时，它想在导航栏的右侧或左侧创建自己的独立无功能按钮。有没有办法用文本字符串将它添加到标题本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:52:46.087

这个问题已经在这里回答了：

[https://stackoverflow.com/a/865506/736384](https://stackoverflow.com/a/865506/736384)

只需创建一个 UIImageView 并将其分配给 navigationItem 的 titleView。

# mysql - 如何删除 MySQL 中 varchar 字段开头和结尾的制表符？

> ID：13979169
> 
> 赞同：16
> 
> 时间：2012-12-20T19:30:41.160
> 
> 标签：mysql

我在 mysql 数据库中有一个字段，它是 varchar(255)。我查看了 trim() 以删除前导和尾随空格，但它似乎只处理空格，而不是制表符：

```
 UPDATE mytable SET textfield = TRIM(textfield); 
```

有谁知道如何从字段的开头和结尾剥离标签？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-20T19:37:51.257

您仍然可以使用该[`TRIM`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)函数，并指定要修剪的字符：

```
UPDATE mytable SET email = TRIM(CHAR(9) FROM TRIM(email)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T19:33:35.643

你试过这个吗？

```
UPDATE mytable SET email = REPLACE(TRIM(email), CHAR(9), '') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T19:33:42.183

您可以使用 \t 或 CHAR(9) 替换：

```
UPDATE mytable SET email = REPLACE(TRIM(email), '\t', ''); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-12T17:49:10.163

**TRIM**功能为您的问题提供了很好的解决方案。只需使用上面这样的一些：

```
UPDATE yourtable SET your_field = TRIM(CHAR(9) FROM TRIM(your_field)); 
```

# java - 如何检查类名是否有效？

> ID：13979172
> 
> 赞同：13
> 
> 时间：2012-12-20T19:30:48.180
> 
> 标签：java, class, methods

Java中是否有一种方法可以检查字符串是否可以用作类名？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-11-07T16:40:44.550

[`SourceVersion.isName`](http://docs.oracle.com/javase/8/docs/api/javax/lang/model/SourceVersion.html#isName-java.lang.CharSequence-)可用于检查完全限定名称。

如果不允许`.`s，则可以通过以下方式进行检查：

```
boolean isValidName (String className) {
    return SourceVersion.isIdentifier(className) && !SourceVersion.isKeyword(className);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T19:32:48.637

很简单，使用`Class.forName(String name)`方法，可以用来测试如下：

```
public static boolean classExists(String className)
{
    try
    {
        Class.forName(className);
        return true;
    }
    catch(ClassNotFoundException ex)
    {
        return false;
    }
} 
```

编辑：如果，正如 dashrb 所说，您正在寻求一种方法来确定 String 是否可以用作类名（而不是如果已经有一个使用该名称的类），那么您需要的是组合我在上面发布的方法（翻转布尔值，因为您不能重用类名），并结合检查字符串是否为 Java 保留关键字。我最近遇到了类似的问题，并为它制作了一个实用程序类，您可以在[此处](http://pastebin.com/mnSKG12g)找到。我不会为你写，但你基本上只需要在检查中添加`!JavaKeywords.isKeyword(className)`.

编辑 2：当然，如果您还想强制执行普遍接受的编码标准，您可以确保类名以大写字母开头：

```
return Character.isUpperCase(className.charAt(0)); 
```

**编辑 3**：正如 Ted Hopp 指出的那样，即使包含 java 关键字也会使类名无效，并且由于 JavaKeywords 在我的一个生产应用程序中使用，我已经制作了一个[更新版本](http://pastebin.com/E1bih2Aw)，其中包括`containsKeyword(String toCheck)`也将检查这种可能性的方法。方法如下（请注意，您也需要类中的关键字列表）：

```
public static boolean containsKeyword(String toCheck)
{
    toCheck = toCheck.toLowerCase();
    for(String keyword : keywords)
    {
        if(toCheck.equals(keyword) || toCheck.endsWith("." + keyword) ||
           toCheck.startsWith(keyword + ".") || toCheck.contains("." + keyword + "."))
        {
            return true;
        }//End if
    }//End for
    return false;
}//End containsKeyword() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T19:52:22.607

我使用了 MrLore 提供的 java 关键字列表。

```
private static final Set<String> javaKeywords = new HashSet<String>(Arrays.asList(
    "abstract",     "assert",        "boolean",      "break",           "byte",
    "case",         "catch",         "char",         "class",           "const",
    "continue",     "default",       "do",           "double",          "else",
    "enum",         "extends",       "false",        "final",           "finally",
    "float",        "for",           "goto",         "if",              "implements",
    "import",       "instanceof",    "int",          "interface",       "long",
    "native",       "new",           "null",         "package",         "private",
    "protected",    "public",        "return",       "short",           "static",
    "strictfp",     "super",         "switch",       "synchronized",    "this",
    "throw",        "throws",        "transient",    "true",            "try",
    "void",         "volatile",      "while"
));

private static final Pattern JAVA_CLASS_NAME_PART_PATTERN =
    Pattern.compile("[A-Za-z_$]+[a-zA-Z0-9_$]*");

public static boolean isJavaClassName(String text) {
    for (String part : text.split("\\.")) {
        if (javaKeywords.contains(part) ||
                !JAVA_CLASS_NAME_PART_PATTERN.matcher(part).matches()) {
            return false;
        }           
    }
    return text.length() > 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T19:32:18.580

呸——

```
Class.forName(String className); 
```

它返回与具有给定字符串名称的类或接口关联的 Class 对象。并抛出`Exceptions`

```
LinkageError - if the linkage fails
ExceptionInInitializerError - if the initialization provoked by this method fails
ClassNotFoundException - if the class cannot be located 
```

# android - 通过 android.hardware.usb 获得的 USB 权限不适用于 NDK

> ID：13979183
> 
> 赞同：7
> 
> 时间：2012-12-20T19:31:59.073
> 
> 标签：android, permissions, android-ndk, usb, libusb

我能够通过 Android 的 USB Host API 获得与设备通信的权限。

```
private static final String ACTION_USB_PERMISSION = "com.android.example.USB_PERMISSION";

protected void execute(Context ctxt) {
    UsbManager manager = (UsbManager) viewer.getSystemService(Context.USB_SERVICE);
    HashMap<String, UsbDevice> deviceList = manager.getDeviceList();

    UsbDevice d = null;
    for (String s : deviceList.keySet()) {
        d = deviceList.get(s);
    }

    PendingIntent mPermissionIntent = PendingIntent.getBroadcast(ctxt, 0, new Intent(ACTION_USB_PERMISSION), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    viewer.registerReceiver(mUsbReceiver, filter);

    manager.requestPermission(d, mPermissionIntent);
}

private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {

    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION_USB_PERMISSION.equals(action)) {
            synchronized (this) {
                UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);

                if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                    if(device != null){
                      Log.d(TAG, "Permission granted!");
                   }
                } 
                else {
                    Log.d(TAG, "permission denied for device " + device);
                }
            }
        }
    }
}; 
```

不幸的是，这并没有授予我的 NDK 代码直接与该设备通信的权限（这是 libusb 所必需的）。有没有办法在没有root的情况下将权限从Java“转移”到NDK？

PS 我最终使用 UNIX 套接字将原始文件描述符从 Java 传输到 Android 本机可执行文件（我在[https://github.com/martinmarinov/rtl_tcp_andro-](https://github.com/martinmarinov/rtl_tcp_andro-)上对项目进行了 GNU 编辑）。对于某些人来说，这会更容易，因为他们可能正在使用 NDK 直接连接设备（而不是第三方应用程序），因此他们在 Java 中使用的指针可能仍然可以被 NDK 访问，而不必弄乱 UNIX插座。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:18:10.337

不可能“转移”权限，因为 Android 安全模型要求每个应用程序静态声明其所需权限，并且用户在安装时批准权限集。不支持动态权限。每个应用程序都映射到一个 UID，其在清单中静态声明的权限。Java 不是权限边界，Dalvik VM 也不是通过 NDK 运行本机代码的障碍。清单中必须列出所有权限，并且 apk 可能根本不包含 Java (dex) 代码。

[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

[http://osdir.com/ml/android-ndk/2012-09/msg00094.html](http://osdir.com/ml/android-ndk/2012-09/msg00094.html)

# c# - 在 WebMatrix 中由 C# 生成的选择查询之后，在带有空格的列上使用 row.ColumnName

> ID：13979184
> 
> 赞同：2
> 
> 时间：2012-12-20T19:32:16.763
> 
> 标签：c#, sql-server, database, webmatrix

我编译了一个查询数据库的字符串，如下所示：

```
stringCompiler = "SELECT * FROM SomeTable"; 
```

问题是某些列的名称中有空格（即“城市标签号”）。

使用 db.Query 语句后如何调用它。例子：

```
foreach(var row in db.Query(stringCompiler))
{
    var someVariable = row.Column With Spaces;
} 
```

显然上面的代码会产生错误。

我可以遍历每一列而不是使用“*”，同时为所有带有空格的列名分配别名。例子：

```
stringCompiler = "SELECT \"City Tag Number\" AS CityTagNumber, ..."; 
```

但是这个表中有很多列名，我假设有更好的方法，我就是找不到它（我保证，我已经看过了）。

任何帮助深表感谢。

- - - - - - - - 编辑 - - - - - - - - - - - -

我应该指定我使用的是 SqlServer。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:39:53.773

在传递给数据库引擎的 sql 文本中，通常（但它取决于实际的数据库）您使用方括号（SqlServer、Access）或反引号（mysql）

```
 stringCompiler = "SELECT [City Tag Number] AS CityTagNumber, ...";

 stringCompiler = "SELECT `City Tag Number` AS CityTagNumber, ..."; 
```

在代码中（假设行是 DataRow），您使用列的名称作为字符串

```
foreach(var row in db.Query(stringCompiler))
{
    var someVariable = row["City Tag Number"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T21:34:23.617

尽管@Steve 的回答是一个很好的答案，但这里有一个建议可能会让你的生活更轻松一些。进入 SQL Server 并在感兴趣的表中定义一个视图：

```
SELECT [City Tag Number] AS CityTagNumber, [Second Field Name] AS SecondFieldName...
FROM  YourTable 
```

然后在您的代码中，使用视图而不是直接引用表。这样，您只需执行一次，这将使您的代码更具可读性和更短，因为在代码中您不需要所有的 AS 别名。该视图的工作方式与您直接前往餐桌完全一样。我使用这种技术，如果表名是 YourTable，我将视图称为 vYourTable。

# c++ - 我如何在 Qt 中的框架上绘图？

> ID：13979186
> 
> 赞同：1
> 
> 时间：2012-12-20T19:32:19.370
> 
> 标签：c++, qt, drawing, draw, qpainter

好的，所以我已经使用 Qt 的拖放部分创建了我的 UI，并且在 Ui 中，我在另一个“Tab Widget”中创建了一个“Tab Widget”。现在，在第二个选项卡小部件中，我创建了一个框架

我的问题是，我如何在 Qt 的这个框​​架上绘制？

我试过了，但一点运气都没有。我尝试了不同的方法来解决这个问题，程序运行良好，但是当我去查看框架是否被绘制时，我什么也看不到......请帮助我解决这个问题，提供代码示例和所有内容。提前致谢。

```
void 2ndMainWindow::paintEvent(QPaintEvent *e)
{
    QPainter paint(ui->rightTriangle_frame);
    paint.drawEllipse(10,10,100,100);
    paint.setPen(Qt::red);

    paint.end();
} 
```

# 我最终为那些想知道的其他人做的方式

我的头文件包含在私有插槽下

```
 Ui::GeometryMainWindow *ui;

    QGraphicsScene *scene;
    QGraphicsEllipseItem *ellipse;
    QGraphicsRectItem *rectangle; 
```

# 在我的 .cpp 文件中，我这样做了

```
 ui->setupUi(this);

    scene = new QGraphicsScene(this);
    ui->graphicsView->setScene(scene);

    QBrush redBrush(Qt::red);
    QBrush blueBrush(Qt::blue);
    QPen blackpen(Qt::black);
    blackpen.setWidth(6);

    ellipse = scene->addEllipse(10,10,100,100,blackpen,redBrush); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:11:32.937

如果您要在 QFrame 上绘制一些自定义形状，我建议您使用 QGraphicsView 而不是 QFrame。实现小部件的paintEvent 可能会产生性能问题。如果您使用 QGraphicsView，您可以创建一个 QGraphicsScene 并将您的项目添加到该场景中，这是执行此类操作的普遍且公认的方式。

或者，实现一个事件过滤器，如下所示，

```
bool 2ndMainWindow::eventFilter(QObject *o, QEvent *e)
{
    if (e->type() == QEvent::Paint) {
    paintEvent((QPaintEvent *)e);
}
    return QMainWindow::eventFilter(o, e);
} 
```

在主窗口的构造函数中添加，

```
installEventFilter(this); 
```

顺便说一句，您应该在paintEvent 函数中绘制椭圆之前设置您的笔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:48:47.983

似乎您正在覆盖**主窗口**`paintEvent()`的方法，并从那里尝试在框架小部件上进行绘制。查看您的控制台输出 - 您应该收到类似的消息

 **```
QPainter::begin: Widget painting can only begin as a result of a paintEvent
QPainter::setPen: Painter not active
QPainter::end: Painter not active, aborted 
```

相反，将您的`QFrame`小部件子类化（在 Qt 设计器中，选择“提升到...”以定义用户定义的子类）并在此子类中，`paintEvent`像这样覆盖：

```
void MyFrame::paintEvent(QPaintEvent *e) {
    QPainter paint(this);
    paint.setPen(Qt::red);
    paint.drawEllipse(10,10,100,100);

    paint.end();
    QFrame::paintEvent(e);
} 
```

请注意，为了绘制红色椭圆，您当然需要在绘制椭圆之前设置笔颜色。您还应该调用`paintEvent()`父类的方法来绘制框架边框。

有关 SSCCE，请参阅[https://github.com/afester/StackOverflow/tree/master/QtRepaint](https://github.com/afester/StackOverflow/tree/master/QtRepaint)。**

# java - 有没有一种方法可以检查 Oracle AQ 队列中的对象数量？

> ID：13979187
> 
> 赞同：0
> 
> 时间：2012-12-20T19:32:20.010
> 
> 标签：java, oracle, oracle-aq

我知道调用 connection.dequeue(queueNam, arg, arg) 会监听一个队列。有没有办法检查队列是否为空，或者查看队列中的对象数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:02:56.353

根据 Oracle 的此[文档](http://docs.oracle.com/cd/E14072_01/appdev.112/e13995/oracle/jdbc/aq/package-tree.html)，此处的类无法检查它们是否为空或查看队列中的对象数量。

如果您指的是这些类之一，那么就没有您所要求的方法。

我从[这个页面](http://docs.oracle.com/cd/B28359_01/java.111/b31224/streamsaq.htm)的第一个链接中找到了这些课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:40:43.397

如果它是一个持久队列，您也许可以查询基础`AQ$Queue_Table_Name`表。如果不是，那么除了在您回滚的单个事务中使每个对象出列之外，我不知道有什么方法可以做到这一点，计算成功出列对象的数量。

# javascript - 数据库是我们唯一需要的后端吗？

> ID：13979189
> 
> 赞同：2
> 
> 时间：2012-12-20T19:32:25.080
> 
> 标签：javascript, backbone.js, backend, frontend

我是一名前端开发人员，对后端的了解非常少。我想知道当今的 javascript 库（例如backbone.js）和云服务数据库（例如 stackmob、mongolab 等）。

我们现在可以构建所有“前端”并从这些数据库之一中获取数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:39:20.540

是的，这是越来越可行的事情，尽管仍然需要克服挑战 - 身份验证是一个大问题（您不能像在服务器端那样简单地存储数据存储凭据客户端，因为任何人都可以找到它们并且滥用它们），尽管正在努力解决这个问题。

看看[Firebase](https://www.firebase.com/)作为这类事情的一个例子。他们的[示例页面](https://www.firebase.com/examples.html)显示了无需您自己的后端即可构建的应用程序示例。他们本周刚刚宣布了他们的[安全 API ，作为解决身份验证方面的一种手段。](http://blog.firebase.com/post/38234264120/the-new-firebase-security-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:56:09.877

您必须在客户端有代理才能将数据发送到某些云服务并允许跨域，但您必须在云上为您的域设置原始域（这可能是一个问题）。

对于代理，您可以使用 Java 小程序、flash 对象、html5 套接字或 XMLHttpRequests。

这并不容易，其中一些不适用于所有现代浏览器。

# vba - 如何使用 OLE for Excel 为日期添加 WHERE 过滤器？

> ID：13979190
> 
> 赞同：0
> 
> 时间：2012-12-20T19:32:35.567
> 
> 标签：vba, date, excel, oledb

我正在尝试创建一个具有使用日期的 WHERE 子句的 SQL 查询。我正在使用 OLE 查询 Excel 工作表。使用 CAST 或 CONVERT 等函数不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:32:35.567

执行此操作的正确方法是将日期括在 # 中。为避免区域问题，最好的方法是为日期传递 ISO 格式。只需考虑一些“想要的数据库”（我无法调用 Access a db）只是在查询中接受美国日期文字。例如（使用 ISO 日期格式）

```
Function WriteQuery(d as Date) as String

  WriteQuery = "SELECT * FROM Sometable WHERE DateColumnName < " & "#" & Format(d,"YYYY-MM-DD") & "#"

End Function 
```

# excel - 如果列为空，则 Excel SumProduct

> ID：13979194
> 
> 赞同：2
> 
> 时间：2012-12-20T19:32:44.790
> 
> 标签：excel

我正在尝试计算`SUMPRODUCT`3 列

![在此处输入图像描述](../Images/e31702b0fad1c14d4bd20d20210a1ea7.png)

我的单元格公式是

```
=SUMPRODUCT(((E5:E14)-(I5:I14))*F5:F14) 
```

我需要删除“I”中单元格值为 Empty 或 Null 的列，目前的公式正在考虑将 0 作为空值。我如何用公式完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:39:30.057

您可以尝试的一件事是使用以下公式：

```
=SUMPRODUCT(--(I5:I14<>""),E5:E14-I5:I14,F5:F14) 
```

这将检查列`I`中的单元格是否为空，如果是，则返回 0；否则，它返回 1。然后运行您的计算，但`I`只要遇到空值，您的乘积就会乘以 0 并有效地从总和中删除。在这里，我们用逗号分隔数组 - 这些是在计算产品时相乘的。`--`强制计算结果返回`I5:I14<>""`1 或 0，然后将其与其余值相乘。

# css - 另一个图像上的流体宽度徽标

> ID：13979198
> 
> 赞同：0
> 
> 时间：2012-12-20T19:32:52.637
> 
> 标签：css

我将[在页眉当前所在的](http://www.inside-guides.co.uk/brentwood/pages/advertise.html)位置放置一个图像，并希望徽标仍然绝对定位在它现在在左侧的位置，但要减少 height:auto 在流体宽度..

最好的方法是如何做到这一点？我需要给图像容器一个 % 宽度吗？中间横幅是流畅的，但由于某种原因，我无法让徽标流畅地减少..

如果有人可以检查检查员？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:44:59.477

`width:100%`与`max-width: [width of img]`（和`height:auto`）一起使用

[示例 jsfiddle](http://jsfiddle.net/wJMPG/)

# php - 在 SSH 上使用 javascript/html5 加载页面

> ID：13979200
> 
> 赞同：0
> 
> 时间：2012-12-20T19:33:04.580
> 
> 标签：php, javascript, python, html, ssh

以前，我在 Python 中使用 Spynner 模块为我浏览特定网页进行宏处理，直到我遇到 Spynner 无法在网站上正确运行 javascript 的页面。我无法在浏览器中找到另一个支持 Javascript 的 Python 模块，因此我继续尝试新方法。

我可以访问我的 Hostgator SSH 以及其中一个“免费”ssh 服务器。是否有通过 SSH 执行的命令可以在 SSH 服务器上完全加载网页 javascript 和 HTML5 编码？（能够查看它不是必需的）。我在想也许运行一个PHP命令？或者其他东西会更好吗？

任何帮助都是apprcieated，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:46:18.083

尝试使用硒。Selenium 支持 javascript [http://pypi.python.org/pypi/selenium](http://pypi.python.org/pypi/selenium)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:50:52.977

尝试[PhantomJS](http://phantomjs.org/)。它有一个很棒的脚本引擎来与下载的页面进行交互。这假设您实际上希望 HTML 和 javascript 像加载在浏览器中一样呈现，而不仅仅是下载代码本身。

# java - 8号码头；配置文件 - 启用 REST Web 服务

> ID：13979202
> 
> 赞同：1
> 
> 时间：2012-12-20T19:33:07.800
> 
> 标签：java, rest, jetty-8

我有一个带有一些其他 Web 服务的 jetty 6 实例。

它被配置为从特定包部署 pojo 服务。

```
<Call name="addHandler">
    <Arg>
        <New class="org.mortbay.jetty.servlet.Context">
            <Arg type="int">1</Arg>
            <Set name="contextPath">/</Set>
            <Call name="addServlet">
                <Arg>
                    <New class="org.mortbay.jetty.servlet.ServletHolder">
                        <Set name="servlet">
                            <New class="com.sun.jersey.spi.container.servlet.ServletContainer"/>
                        </Set>
                        <Call name="setInitParameter">
                            <Arg>com.sun.jersey.config.property.resourceConfigClass</Arg>
                            <Arg>com.sun.jersey.api.core.PackagesResourceConfig</Arg>
                        </Call>
                        <Call name="setInitParameter">
                            <Arg>com.sun.jersey.config.property.packages</Arg>
                            <Arg>
                                 com.example.package1,
                                 com.example.package2
                            </Arg>
                        </Call>
                        <Call name="setInitParameter">
                            <Arg>com.sun.jersey.api.json.POJOMappingFeature</Arg>
                            <Arg>true</Arg>
                        </Call>
                    </New>
                </Arg>
                <Arg>/*</Arg>
            </Call>
        </New>
    </Arg>
</Call> 
```

但是现在我需要升级到 Jetty 8，并且找不到如何配置它。谁能帮我这个？

提前致谢！

# mysql - MySQL：使 HAVING 也选择“null”

> ID：13979204
> 
> 赞同：5
> 
> 时间：2012-12-20T19:33:12.600
> 
> 标签：mysql, select, group-by, having

我有两张桌子：`dilemme`和`like`。第一个包含文章，第二个包含投票。脚本随机选择一篇文章来显示，用户可以投票（喜欢和不喜欢）。

我想做一个查询，只显示投票数超过 - 5 的文章，没有投票的文章等于 0。

所以我尝试了这个：

```
SELECT d.ph1, d.ph2, d.id, SUM(l.vote) AS score
FROM dilemme d
LEFT JOIN like l
ON d.id = l.id_dilemma
WHERE d.valid = 'yup'
GROUP BY d.id HAVING SUM(l.vote) > 0 
```

它正确地向我显示了至少有一票并且票数总和大于 0 的行。这很好但是，如何选择没有投票的文章？

我尝试了很多事情并做了一些研究，但无法解决我的问题。我认为 INSERT INTO 就像投了 0 票，但我认为这不是一个好主意，因为它不会是一个非常优化的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T19:52:19.523

这应该包括有正面投票的文章，或者包括没有投票的文章，使用`COUNT(l.id_delemma) = 0`

```
SELECT d.ph1, d.ph2, d.id, SUM(l.vote) AS score
FROM dilemme d
LEFT JOIN like l
ON d.id = l.id_dilemma
WHERE d.valid = 'yup'
GROUP BY d.id 
HAVING 
    SUM(l.vote) > 0
    OR COUNT(l.id_delemma) = 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T19:45:37.700

`select`在and`having`子句中使用 ifnull 函数：

```
...having(ifnull(l.vote,0)) > 0... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T19:45:47.043

```
SELECT d.ph1, d.ph2, d.id, SUM(IFNULL(l.vote, 0)) AS score
FROM dilemme d
LEFT JOIN like l
ON d.id = l.id_dilemma
WHERE d.valid = 'yup'
GROUP BY d.id
HAVING score > 0 
```

但我不确定你期望它如何工作。如果一个项目没有投票，它的分数怎么会大于0？

# windows - 环境变量错误 - 不被识别为内部或外部命令

> ID：13979209
> 
> 赞同：2
> 
> 时间：2012-12-20T19:33:32.480
> 
> 标签：windows, ant

这是一个重写，以巩固我在寻找解决问题的答案时所收集的内容。我已经安装了蚂蚁。当我在命令行中使用“ant”时，我收到消息**“ant 不是内部或外部命令、可运行程序或批处理文件”。**我很快确定**这是我的环境变量的问题。**

我假设您已经获得了有关更改环境变量的说明。下面的要点涵盖了那些写作说明没有告诉你的挑剔的部分，假设的知识。我建议在尝试解决此问题时逐步浏览它们。

知道我正在运行 Windows7 很重要。这些观点对于 Windows 来说可能相当普遍，但我将其留给读者来确定。

如果您的问题仍未解决，请创建一个新问题，或许可以参考这个问题。不要就这个问题寻求帮助，因为它已经解决了。找到的其他解决方案可以在这里添加（或发布&我会添加它们）。

一旦您可以从命令行获取版本号（例如：“ant -version”或“java -version”），您就解决了环境变量问题。在那之后，你有一个不同的问题。我花了额外的 2 个小时尝试“修复”“Buildfile：build.xml 不存在！构建失败”命令行错误，没有意识到这意味着这个问题已经解决，我已经转移到另一个问题上。

最后一条建议。在玩游戏时，将整个 PATH 变量复制并粘贴到安全的地方。如果您不小心点击了“删除”，您将没有机会恢复，这可能会导致很多痛苦。

*逐步完成这些；*

*   关闭所有打开的命令行控制台（Windows 控制台）并重新启动它。这将重置变量，每次更改环境变量时都需要这样做。
*   确保您在环境变量中没有留下任何空格。末尾没有空格，变量之间没有空格。
*   检查您的拼写是否一致并检查您的位置是否正确。
*   将新文本添加到 PATH 变量的开头，而不是结尾。如果您多次添加它，这可以避免与其他东西的冲突和任何问题。它在第一次成功时停止阅读。
*   确保 PATH 变量在新添加的文本和现有文本之间插入了一个分号 (";")（没有空格）。

如果命令行 "echo %JAVA_HOME%" 返回 "%JAVA_HOME%"，那么您可能有权限问题（使用您的 %variable% 而不是我的 %JAVA_HOME%）；

*   将新变量（例如“JAVA_HOME”或“ANT_HOME”）及其路径放入系统变量中。从用户变量中删除它。

使用用户变量是我必须解决的最后一个问题。奇怪的是“echo %JAVA_HOME%”很好，但是“echo %ANT_HOME%”返回了“%ANT_HOME%”。

最后，如果一切都失败了；

*   重启你的电脑
*   获取软件的新副本，安装并重新启动。

感谢那些帮助过的人以及以前的 Stack Overflow 作者，我阅读了他们试图找到解决方案的帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:53:18.687

需要重新启动 Windows 控制台才能应用在环境变量中所做的更改

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T19:36:27.483

该输出意味着未设置环境变量。您可以在控制台中执行此操作：

```
set variable=value 
```

或者最好转到您的系统设置并永久设置它们。另请参阅[此站点](http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/)如何设置它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T19:38:11.630

`JAVA_HOME`是java使用的环境变量。你知道当你输入`java -version`并得到你期望的东西时你做对了（1.7.x）。该`PATH`变量只允许您输入二进制名称（`PATH`在

# php - mysqli_select_db() 期望参数 1 为 mysqli，给定字符串

> ID：13979210
> 
> 赞同：17
> 
> 时间：2012-12-20T19:33:32.833
> 
> 标签：php, mysqli

我是 Mysqli_* 的新手，我收到以下错误：

> 警告：mysqli_select_db() 期望参数 1 为 mysqli，字符串在第 11 行的 D:\Hosting\9864230\html\includes\connection.php 中给出
> 
> 警告：mysqli_error() 需要 1 个参数，0 在第 13 行的 D:\Hosting\9864230\html\includes\connection.php 中给出

数据库选择失败：

```
<?php
require("constants.php");

// 1\. Create a database connection
$connection = mysqli_connect(DB_SERVER,DB_USER,DB_PASS);
if (!$connection) {
    die("Database connection failed: " . mysqli_error());
}

// 2\. Select a database to use 
$db_select = mysqli_select_db(DB_NAME,$connection);
if (!$db_select) {
    die("Database selection failed: " . mysqli_error());
}
?> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-20T19:35:42.980

你的论点顺序错误。根据[文档，连接首先出现](http://php.net/manual/en/mysqli.select-db.php)

```
<?php
require("constants.php");

// 1\. Create a database connection
$connection = mysqli_connect(DB_SERVER,DB_USER,DB_PASS);

if (!$connection) {
    error_log("Failed to connect to MySQL: " . mysqli_error($connection));
    die('Internal server error');
}

// 2\. Select a database to use 
$db_select = mysqli_select_db($connection, DB_NAME);
if (!$db_select) {
    error_log("Database selection failed: " . mysqli_error($connection));
    die('Internal server error');
}

?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T19:35:29.453

```
// 2\. Select a database to use 
$db_select = mysqli_select_db($connection, DB_NAME);
if (!$db_select) {
    die("Database selection failed: " . mysqli_error($connection));
} 
```

你得到了倒数的参数`mysqli_select_db()`顺序。并`mysqli_error()`要求您提供连接参数。mysqli_XXX 不像 mysql_XXX，这些参数不再是可选的。

另请注意，使用 mysqli 您可以在以下位置指定数据库`mysqli_connect()`：

```
$connection = mysqli_connect(DB_SERVER, DB_USER, DB_PASS, DB_NAME);
if (!$connection) {
  die("Database connection failed: " . mysqli_connect_error();
} 
```

您**必须**使用`mysqli_connect_error()`, not`mysqli_error()`来获取错误`mysqli_connect()`，因为后者要求您提供有效的连接。

# excel - Excel Web 查询 404 未找到存在的网站

> ID：13979215
> 
> 赞同：2
> 
> 时间：2012-12-20T19:33:48.127
> 
> 标签：excel, vba, http-status-code-404, excel-web-query

我正在尝试使用 Excel 2010 通过 Get External Data > From Web 获取 Web 数据

Excel 能够从中下载数据（只需选中左上角的框即可获取整个页面）

[http://accuscore.com/fantasy-sports/nfl-fantasy-sports/](http://accuscore.com/fantasy-sports/nfl-fantasy-sports/)

但是当您选择 RB 将 url 更新为

[http://accuscore.com/fantasy-sports/nfl-fantasy-sports/Rest-of-Season-RB](http://accuscore.com/fantasy-sports/nfl-fantasy-sports/Rest-of-Season-RB)

Excel 网络查询说

> '互联网站点报告说找不到您请求的项目。(HTTP/1.0 404)'

是否有解决方法，因为该网站确实存在！

# php - 我需要将四个 jQuery 函数组合成一个函数，该函数将应用于循环内的输入文本区域

> ID：13979219
> 
> 赞同：-3
> 
> 时间：2012-12-20T19:34:05.833
> 
> 标签：php, javascript, jquery, mysql

我在循环中有一个注释文本框，我需要应用一些[jQuery](http://en.wikipedia.org/wiki/JQuery)函数。

1.  我需要根据输入的文本调整文本框的大小。
2.  我需要检查文本的长度。我不希望用户输入超过 100 个字符。
3.  我需要用户能够按 Enter 并提交评论。
4.  我还需要在不离开页面的情况下提交表单。

我知道如何单独完成所有功能。我想将所有功能合二为一。这是我所拥有的：

```
<?php
    $i = 0; //For the id of the textarea

    while (/* Retrieve information from the database */)
    {
        $th_id = $row['th_id']; //id for the original comment/post.

        echo "<form method='post'>
        <input type='hidden' name='cb_id' value='".$th_id."' >
        <textarea onkeyup='addcom()'
                  onkeydown='addcom()'
                  placeholder='Press enter to comment'>
        </form>;
    }
?> 
```

这里是 JavaScript 代码：

```
<script type="text/javascript">
    <!--
        function addcom()
        {
            var ch,l;
            ch = $('.addcom').val();
            l = ch.length;

            if (l == 30)
            {
                $('.addcom').css({'height':'40px'});
            }
            //More code until maximum number of characters is reached
            else if(l >= 100)
            {
                ch = ch.substring(0, 100);
                $('.addcom').val(ch);
            }
        }
    -->
</script> 
```

如何检索文本字段和隐藏输入字段的信息？另外，如果按下键码 13 则如何触发表单被提交的事件？

（上面的 JavaScript 代码按照我的预期改变了循环中的所有文本区域。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:42:27.007

我会为文本框创建一个 jQuery 插件：

```
(function($) {
    $.fn.myPlugin = function() {
        var txt = $(this);
        txt.on("keypress", function(event){
            // resize the text box according to the current value
            // if it is more than 100 characters get a substring of the first 100 characters
            // if the key press in the event is enter then submit the form using ajax
        });
    };
})( jQuery ); 
```

然后在您的原始循环中，您可以将此插件附加到您的文本框中：

```
var arrTextBoxes = [...];
for (var i = 0; i < arrTextBoxes.length; i++) 
{
    arrTextBoxes[i].myPlugin();
} 
```

我这里没有测试任何代码，但前提是合理的。如果你经常做这种事情，还有另一个名为 jQuery UI 的 jQuery 插件，它有一个小部件工厂，非常适合使用它们的框架创建可重用的小部件（或可扩展插件）。

**编辑**

我已经创建了插件的[JSFiddle Demo](http://jsfiddle.net/AZdhw/1/)。

我首先修改了您的 HTML 并删除了 onkeyup 和 onkeydown 事件。

旧 HTML：

```
<textarea onkeyup="addcom(e)" onkeydown="addcom(e)" class="com" placeholder="Press enter to submit"></textarea> 
```

新的 HTML：

```
<textarea class="com" placeholder="Press enter to submit"></textarea> 
```

然后我创建了以下 jquery 代码：

```
(function($) {
    $.fn.myPlugin = function() {
        var txt = $(this);
        txt.on("keypress", function(event){

            // resize the text box according to the current value
            var l = txt.val().length;
            if(l < 30)
                txt.css("height", "20px");
            else if(l == 30)
                txt.css("height", "40px");
            else if(l == 60)
                txt.css("height", "60px");
            else if(l == 90)
                txt.css("height", "80px");

            // if it is more than 100 characters get a substring of the first 100 characters
            if(l >= 100)
                txt.val(txt.val().substring(0, 100));

            // if the key press in the event is enter then submit the form using ajax
            if(event.which == 13) {
                // Use $.get() or $.post() or $.ajax() to submit the form
            }
        });
    };
})( jQuery );

$("textarea.com").each(function(){
    $(this).myPlugin()
});
​ 
```

第一部分将创建插件。我建议重命名它，使其不使用 name `myPlugin`。该插件将按键事件绑定到文本区域并执行您的各种操作。

第二部分定位所有 textarea 元素并为每个 textarea 初始化插件。

*注意：* 我没有为您编写所有代码来提交表单。如果您需要这方面的帮助，我建议您在此处创建另一个帖子，专门寻求帮助。

# php - 如何使用 PHP 在 Excel 文件中插入一行？

> ID：13979226
> 
> 赞同：-1
> 
> 时间：2012-12-20T19:34:29.280
> 
> 标签：php, excel, insert, excel-2007, xlsx

我是 php 新手，也许这很愚蠢。我有 5 个参数要添加到 Excel 2007 文件 (*.xlsx) 名称、电话、电子邮件和地址中。

```
$name = $_POST['name'];
$email = $_POST['email'];
$phone  = $_POST['phone'];
$adress = $_POST['adress']; 
```

每次代码运行时如何添加 1 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:42:48.040

假设您使用的是[PHPExcel](http://phpexcel.codeplex.com/)，您将这样做以编写一行：

```
$objPHPExcel = new PHPExcel();
$objPHPExcel->setActiveSheetIndex(0);
$row = 1;
$objPHPExcel->getActiveSheet()->SetCellValue('A'.$row, $_POST['name']);
$objPHPExcel->getActiveSheet()->SetCellValue('B'.$row, $_POST['email']);
$objPHPExcel->getActiveSheet()->SetCellValue('C'.$row, $_POST['phone']);
$objPHPExcel->getActiveSheet()->SetCellValue('D'.$row, $_POST['adress']);
$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
$objWriter->save('myfile.xlsx'); 
```

读取文件涉及从这里开始并继续工作：

```
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$data = $objReader->load('myfile.xlsx');
$objWorksheet = $data->getActiveSheet(); 
```

显然，您需要对文档进行更多挖掘，以了解如何打开现有文件并附加到它们，但希望这能让您朝着正确的方向前进。

# android - 用于编辑视图的自定义键盘

> ID：13979227
> 
> 赞同：0
> 
> 时间：2012-12-20T19:34:46.067
> 
> 标签：android

我想为编辑视图控件制作自定义键盘。当用户选择编辑视图控件时，只允许数字、冒号和点字符键盘。我们如何开发或任何代码

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:37:30.050

在 EditText 上设置[inputType](http://developer.android.com/reference/android/R.styleable.html#Searchable%5FinputType)

```
<EditText android:inputType="numberDecimal"  /> 
```

正则表达式应该是这样的：

```
if(myString.matches('0[1-9]:[0-5][0-9]')){
   //String is valid
} 
```

# spring - Bean 名称“userDomain”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：13979228
> 
> 赞同：1
> 
> 时间：2012-12-20T19:34:58.857
> 
> 标签：spring, spring-mvc

我正在尝试学习 Spring MVC，但我面临一个在我看来很常见的问题。我的 hello.jsp 是：

```
 <form:form commandName="userDomain" method="post" action="hello.jsp">
  <table>
   <tr>
    <td><form:label path="userDomain.emailId">First Name</form:label></td>
    <td><form:input path="userDomain.emailId" /></td> 
  </tr>

 </form:form> 
```

控制器是：

```
 @Controller
public class HelloWorldController {

 @RequestMapping(value = "/hello", method = RequestMethod.GET)
 public String hi(@ModelAttribute("userDomain") UserDomain userDomain, BindingResult      result) {

return "hello";
 }

} 
```

用户域是：

```
 public class UserDomain {

private long userId;
private String name;
private String emailId;
private int numberOfFeedsUsed;
private String password;
private String rePassword;

    setters and getters..

  } 
```

代码很简单，但我面临的错误是：

*严重：servlet [jsp] 在路径 [/ChatBooster] 的上下文中的 Servlet.service() 引发异常 [java.lang.IllegalStateException：Bean 名称“userDomain”的 BindingResult 和普通目标对象都不能用作请求属性]，根本原因是 java .lang.IllegalStateException：在 org.springframework.web.servlet 的 org.springframework.web.servlet.support.BindStatus.(BindStatus.java:141) 中，Bean 名称“userDomain”的 BindingResult 和普通目标对象都不能用作请求属性。 tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174) at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194)*

我在互联网上搜索过，但我无法解决它。有谁可以帮我离开这里吗？

**编辑1：即使这个也不起作用。**

你好.jsp：

```
 <form:form modelAttribute="userDomain" method="post" action="hello">
    <table>
        <tr>
            <td><form:label path="emailId">First Name</form:label></td>
            <td><form:input path="emailId" /></td>
        </tr>
        <tr>
            <td><form:label path="name">Last Name</form:label></td>
            <td><form:input path="name" /></td>
        </tr>

        <tr>
            <td colspan="2"><input type="submit" value="Go" /></td>
        </tr>
    </table>
</form:form> 
```

你好世界控制器：

```
 @Controller
  public class HelloWorldController {

  @RequestMapping("/")
  public String hello() {
   return "hello";
  }

 @RequestMapping(value = "/hello", method = RequestMethod.POST)
  public ModelAndView hi() {
  // String message = "Hi " + name + "!";

  ModelAndView mav = new ModelAndView("hello");
    mav.addObject("userDomain",new UserDomain());
    return mav;
  }

  @ModelAttribute("userDomain")
  public UserDomain getUserDomain(){
  return new UserDomain();
    }

 } 
```

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
     <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring Hello World</display-name>
<welcome-file-list>
    <welcome-file>hello.jsp</welcome-file>
</welcome-file-list>

<listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

<servlet>
    <servlet-name>chatbooster</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>

    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>chatbooster</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/chatbooster-servlet.xml</param-value>
   </context-param>
   </web-app> 
```

chatbooster-servlet.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans x lns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans

      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

       http://www.springframework.org/schema/context

        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.controller" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WebContent/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:51:44.887

如果您已经在标签中命名`userDomain`，则不应在`form:input`and标签中命名。（而不是）`form:label``form:form``form:input path="emailId" />``form:input path="userDomain.emailId" />`

```
<form:form commandName="userDomain" method="post" action="hello.jsp">
  <table>
    <tr>
        <td><form:label path="emailId">First Name</form:label></td>
        <td><form:input path="emailId" /></td> 
    </tr>
  </table>  <!-- BTW: your closing table tag was missing -->
</form:form> 
```

试试这个控制器

```
@Controller
public class HelloWorldController {

     @RequestMapping(value = "/hello", method = RequestMethod.GET)
     public ModelAndView show() {
          return new ModelAndView("hello.jsp", "userDomain" new UserDomain());
     }

     @RequestMapping(value = "/hello", method = RequestMethod.POST)
     public ModelAndView create(@Valid UserDomain userDomain, BindingResult bindingResult) {
          if(bindingResult.hasErrors()) {
              return new ModelAndView("hello", "userDomain" userDomain);
          } else {
              process(userDomain);
              return new ModelAndView(new RedirectView("show"));
          }
     }
 } 
```

并确保您的表单“调用”控制器，而不是直接调用 jsp。（只需`.jsp`从操作中删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:16:13.473

控制器应如下所示。它可能无法正常工作，因为请求方法是一个帖子。

```
@RequestMapping(value = "/hello",method = RequestMethod.GET)
public ModelAndView  hi() {
    ModelAndView mav = new ModelAndView("hello");
mav.addObject(new UserDomain());
   return mav; 
```

}

JSP 应该是@Ralph 下面发布的内容

```
<form:form commandName="userDomain" method="post" action="hello.jsp">
  <table>
    <tr>
        <td><form:label path="name">First Name</form:label></td>
        <td><form:input path="name" /></td> 
    </tr>
  </table>  <!-- BTW: your closing table tag was missing -->
</form:form> 
```

祝你好运。

# php - Wordpress 不会在所有页面上显示导航菜单

> ID：13979229
> 
> 赞同：0
> 
> 时间：2012-12-20T19:35:13.637
> 
> 标签：php, css, wordpress, html

我正在做一个项目，我有一个很好的开始，但我需要一件重要的事情才能向人们展示/进行演示。

我的项目：[在此处输入链接描述](http://mci-america.com/)

在主页 (index.php) 上，它看起来不错，现在应该如何查找。当您单击其他页面（关于、FAQ、Epayments 等...）时，它不会显示带有左侧链接的菜单栏。

我认为这样的事情会很有效：

```
/* Single post single.php CSS file */
#content {
background:#b4d2f7;
float:right;
position:relative;
width:55%;
height:25%;
right:25%;
}

#content li {

}

#content ul {

}

#content .menu {
background:#123456;
position:relative;
float:left;
width:50%;
} 
```

但它根本不起作用，没有移动或改变任何东西（是的，我确定我正确调用了 div）

这是在所有页面上显示当前文本的内容：

```
<article id="content">
     <?php get_template_part( 'nav', 'above-single' ); ?>
     <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
     <?php get_template_part( 'entry' ); ?>
     <?php comments_template('', true); ?>
     <?php endwhile; endif; ?>
     <?php get_template_part( 'nav', 'below-single' ); ?>
 </article> 
```

我真的不太了解 PHP，这对我来说是一个巨大的学习过程，所以如果你可以请发布任何有帮助的链接。如果您发布代码，即使它们含糊不清，我也想要一些评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:54:50.200

我假设您正在使用特定页面的模板。如果您创建一个新的 PHP 文件并放置一些效果...

```
<?php
   /*
   Template Name: Main Page
   */
?>
<?php get_header(); ?>
<div id="content" class="widecolumn">
    <div style="width:100%;">
    </div>
</div>
<?php get_footer(); ?> 
```

这应该创建一个具有标题的新模板，如果它没有进入您的主题代码并查看它并查看 2 个模板之间的不同之处。最常见的模板很容易识别，我可能是 homepage-template.php 或类似的东西。该`get_header()`函数本质上是告诉 wordpress 获取 header 中的所有内容，这应该是 header.php 中所有页面共有的内容。出于某种原因，我有一种感觉，它没有按照应有的方式拉动导航。我一直在研究自己的主题，上面的代码可以很好地拉动导航。你也可以进入`appearance > menus`在 wp-admin 上。在这里您可以找到主题允许的不同导航。如果这不起作用，请告诉我，我很乐意再试一次，或者如果您有任何问题。

# tfs - 升级后 MSBuild 构建层次结构不正确

> ID：13979232
> 
> 赞同：2
> 
> 时间：2012-12-20T19:35:21.263
> 
> 标签：tfs, msbuild

我正在做一个将 TFS 2008 迁移到 TFS 2012 的概念证明。建立 TFS 2012 并不是很困难，但我在建立一个新的构建服务器时遇到了一些麻烦。在把我的头从墙上敲下来之后，似乎 MSBuild 正在无序地构建我的项目，这完全破坏了构建。现在我阅读了微软的文章，说这在 NETFX4.5 中得到了纠正，但我的两台服务器都安装了 4.5，这个问题仍然存在。在 MSBuild 3.5 中，此问题不存在。我得到的具体错误是：CS0006：找不到元数据文件[程序集]。

如果我直接在 VS2008 中的构建服务器上构建解决方案，则有问题的项目构建良好。当我进行与文件名过长相关的构建时，我确实遇到了一些例外情况，但这是在我实际构建冒犯 MSBuild 的项目之后很久。此外，我可以干净地构建有问题的项目。

我确实有几个自定义任务，但它们影响不大。

是否有针对 MSBuild 3.5 而不是 MSBuild 4 运行构建？或者有没有一种简单的方法来纠正这个问题，以便我可以使用 MSBuild 4？我在 TFS2012 中使用 UpgradeTemplate。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:03:57.010

我会检查两件事

1.  验证列为缺失的程序集是否实际构建并存在
2.  如果这是真的，请验证列为缺失的 dll 是否标记为当前抛出 CS006 错误的项目的依赖项（确保将首先编译它）

# php - php gettimestamp 停止执行

> ID：13979236
> 
> 赞同：0
> 
> 时间：2012-12-20T19:35:36.003
> 
> 标签：php, codeigniter, timestamp

嘿家伙希望你能帮助我。

我正在做一个项目，遇到了一个奇怪的问题，

我最初有这个代码

```
 public function create_visit($host_id,$type){
    $ip=$this->ci->input->ip_address();

    $visit=$this->ci->host_model->get_visit($host_id,$this->ci->input->ip_address());

    if($visit->num_rows()>0){//already created
        $date_week=new DateTime();
        $date_week->modify('-1 weeks');

        $visit_time=strtotime($visit->row()->create_date);
        if($date_week->getTimestamp()<$visit_time){
        $this->ci->input->set_cookie(COOKIE_PREFIX.'visit_id', $visit->row()->id, COOKIE_TIMEOUT);
        return;
        }

    } 
```

问题就在这条线之后`if($date_week->getTimestamp()<$visit_time){`没有执行。它在 xamp 上运行良好，但在我的客户端服务器上却不行。我做了一堆回声，最终找到了罪魁祸首，所以我把代码改成了这个

```
public function create_visit($host_id,$type){
$ip=$this->ci->input->ip_address();

$visit=$this->ci->host_model->get_visit($host_id,$this->ci->input->ip_address());

if($visit->num_rows()>0){//already created
$date_week=time()-604800;

$visit_time=strtotime($visit->row()->create_date);
if($date_week<$visit_time){
$this->ci->input->set_cookie(COOKIE_PREFIX.'visit_id', $visit->row()->id, COOKIE_TIMEOUT);
return;
} 
```

}

它现在可以工作了（只有提到的改变了），但我真的很想弄清楚问题是什么。如果有帮助的话，我正在使用带有 hmvc 插件的 codeigniter ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:39:15.983

最可能的问题是服务器上的 php 版本。`getTimestamp`从 php 5.3 开始可用。

# android - 从 Lockscreen-Widget 启动 Activity

> ID：13979237
> 
> 赞同：0
> 
> 时间：2012-12-20T19:35:38.593
> 
> 标签：android, android-intent, android-widget

有没有办法从 Lockscreen-Widget 启动活动，以便用户不需要登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:45:15.580

看看[http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED)并小心你暴露的内容

# html - 基于 colgroup 的表格单元格的宽度不起作用

> ID：13979239
> 
> 赞同：20
> 
> 时间：2012-12-20T19:35:43.650
> 
> 标签：html, css, html-table

使用 colgroup 设置表格单元格的宽度在 IE9 中不起作用

```
<table id="Grid1_Table" class="Table">
    <colgroup>
        <col style="width:20px">
        <col style="width:20px">
        <col style="width:180px">
        <col style="width:200px">
    </colgroup>
    <tbody>
        <tr>
            <td class="RowHeader"><div>&nbsp;</div></td>
            <td class="RecordPlusCollapse"><div>&nbsp;</div></td>
            <td colspan="2" class="GroupCaption">Order ID: 0 - 1 Items</td>
        </tr>
    </tbody>
</table> 
```

```
.RowHeader
{
    background-color : black;
}
.GroupCaption
{ 
    background-color : #868981;
}
.RecordPlusCollapse
{
    background-color : red;
}
.Table{
    width: 100%;
} 
```

前 2 个`<td>`宽度与`colgroup`IE9 不同。不知道为什么宽度不同。

[http://jsfiddle.net/KgfsM/3/](http://jsfiddle.net/KgfsM/3/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-11T20:32:25.440

您给表格*100% 宽度*，然后选择*固定宽度 cols*。浏览器应该从哪里获取缺少的宽度？它只是拉伸表格单元格。

看看这个例子，它适用于所有主流浏览器，从 IE 5(!) 开始 :) [http://jsfiddle.net/Volker_E/ppRgV/1/](http://jsfiddle.net/Volker_E/ppRgV/1/)

更改`width: 100%;`从表中剥离并添加[`table-layout: fixed;`](https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout)

```
.Table {
   table-layout: fixed;
} 
```

# php - 如何使用 PHP 更改菜单以匹配图像颜色

> ID：13979241
> 
> 赞同：1
> 
> 时间：2012-12-20T19:35:47.533
> 
> 标签：php

假设我有五个图像：

红色、绿色、蓝色、紫色和橙色.jpg

如何在刷新时随机更改这些更改并根据图像更改导航菜单颜色？

我确实尝试过，但我写的代码太可笑了，我从来没有把它放给任何人看。

编辑：请记住，这是取自另一个论坛，并针对我尝试做的事情进行了编辑。这是为测试而制作的。此外，在我获取文件的维护文件夹中，有一个名为 storage 的 .jpg 图像。这就是您在代码中看到它的原因。

```
 <?php 
//path to the image directory 
$directory = "maintenance/"; 

//get all image files with a .jpg extension. 
$images = glob("" . $directory . "*.jpg"); 

// get random image index 
$rand_img = array_rand($images, 1); 

// display the image 
echo '<img src="'.$images[$rand_img].'" alt="" />';
 ?>

<div style="<?php 
if ($rand_img == "storage.jpg")
echo "background: red;"; ?>height: 100%;width:100%;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:40:11.997

获取颜色：

```
$color = array_rand('red', 'green', 'blue', 'purple', 'orange'); 
```

用作 DOM 元素的背景：

```
<div style="background-color: <?php echo $color; ?>;">
   <!-- more html here -->
</div> 
```

是的，完全不需要图像，只需使用颜色名称即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:39:22.950

使用该功能`rand()`，您可以执行以下操作：

```
$cols = array('red', 'green', 'blue', 'purple', 'orange');

// rand returns a random number between
$index = rand(0, count($cols));

$backgroundImage = $cols[$index] . '.jpg'; 
```

然后你必须`$backgroundImage`在你的 HTML 模板中使用。

# java - 我收到请求处理失败的消息

> ID：13979244
> 
> 赞同：0
> 
> 时间：2012-12-20T19:36:02.837
> 
> 标签：java, spring-mvc

我正在做一个简单的表单`spring`，稍后将与 ejb 连接。

所以我的jsp是（我的jsp中有spring库）：

```
<form:form commandName="TestDTO" method="POST">
    <form:input path="test" maxlength="20"
            id="test" />
    <input type="button"
        onClick="javascript:validarCamposConsulta('consultaTest.htm')"
        value="Consultar" class="boton" />
</form:form> 
```

我的控制器是这样的（我在包声明后导入了spring）：

```
@Controller
public class TestController {
    protected final Log logger = LogFactory.getLog(getClass());
private final String testDTO = "TestDTO";

@RequestMapping("/consulta.htm")
public ModelAndView preload(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    String forward = "/consulta/CONSULTA"; 

    /*try {
        configuradorIDA.setupIsbanDataAccess();
    } catch (Exception e) {

        System.out.println("Error al inicializar IDA: " + e.getMessage());
    }*/
    return new ModelAndView(forward);
}

@RequestMapping("/consultaTest.htm")
public final String consultaTest(
        @ModelAttribute(testDTO)
        final TestDTO testdto,
        final BindingResult result,
        final ModelMap model,
        final HttpServletRequest request,
        final HttpServletResponse response) {
    String forward = "/consulta/CONSULTA";
    testdto.getTest();
    model.addAttribute(testDTO, testdto);
    return forward;
}

} 
```

我在 websphere 7 上运行它，所以当我运行它时，我得到下一个错误：

```
 Error 500: org.springframework.web.util.NestedServletException: 
Request processing failed; nested exception is 
java.lang.IllegalStateException: 
Neither BindingResult nor plain target object 
for bean name 'TestDTO' available as request attribute 
```

有谁知道发生了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:49:36.570

好的，看来我的方法预加载公司应该是

```
@RequestMapping("/consulta.htm")
    public ModelAndView preload(@ModelAttribute(testDTO)
    final TestDTO testdto, HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException { 
```

这解决了它。

# assembly - x86 视频模式 清屏

> ID：13979246
> 
> 赞同：2
> 
> 时间：2012-12-20T19:36:17.007
> 
> 标签：assembly, x86, nasm, dos, bios

您好，我正在尝试使用此代码在 DOS 视频模式下清除屏幕。

但是当我运行它时，点仍然存在！

```
 org 100h

    mov     ah, 0       ; set display mode function.
    mov     al, 13h     ; mode 13h = 640x480 pixels, 256 colors.
    int     10h         ; set it!

    mov     cx, 10      ; column
    mov     dx, 10      ; row
    mov     al, 15      ; white
    mov     ah, 0ch     ; put pixel
    int     10h         ; draw pixel

    ; -------  clear the screen ----------     
    ; -------  doesn't work! dot is still there

    mov ax,0B800h
    mov es,ax
    xor di,di
    xor ax,ax
    mov cx,2000d
    cld
    rep stosw

    ; -------------------------------------

    ;wait for keypress
    mov ah,00
    int 16h

    mov ax, 4c00h ; exit to operating system.
    int 21h

    ;====================================================== 
```

我尝试使用 INT 10 重置视频模式，但这让我闪烁，这在我的循环中是不需要的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T19:48:53.310

您的代码存在一些问题。

首先，BIOS 模式 13h 不是 8 位/像素的 640x480，而是 8 位/像素的 320x200。

B800h 是 BIOS 文本模式的地址。BIOS 图形模式使用 A000h。

所以应该是：

```
mov ax,0A000h
mov es,ax 
```

8 位 320x200 消耗 320*200 = 64 000 字节的视频内存。所以 的值`cx`是不正确的。它应该是：

```
mov cx,32000d
cld
rep stosw 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T23:18:19.303

对于文本模式，您可以使用这个简单的过程

```
clrscr proc
    mov ax,0003h
    int 10h 
    ret
endp 
```

并在你的程序中调用它

```
call clrscr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T19:58:55.510

下一个代码适用于 msdos 5.0。它适用于 vga 模式（640x480 像素和 16 种颜色的调色板）。

```
BORRARPANTALLAVGA:
;Erases the screen in graphic mode
;Input:
;CH: Background color.
    PUSH    AX
    PUSH    CX
    PUSH    DX
    PUSH    DI
    PUSH    ES
    MOV     DX,     3C4H
    MOV     AX,     0F02H
    OUT     DX,     AX
    MOV     DX,     3CEH
    MOV     AH,     CH
    XOR     AL,     AL
    OUT     DX,     AX
    MOV     AX,     0F01H
    OUT     DX,     AX
    MOV     CX,     19200
    XOR     DI,     DI
    MOV     AX,     0A000H
    MOV     ES,     AX
    CLD
    REP     STOSW
    MOV     DX,     3CEH
    MOV     AX,     1
    OUT     DX,     AX
    POP     ES
    POP     DI
    POP     DX
    POP     CX
    POP     AX
    RET 
```

我希望这会有所帮助。

请原谅我可能的错误。

代码已被重新​​编辑，以包含来自 Michael Petch 的更正。谢谢迈克尔。

如果您需要阅读一些文档，可以在此处阅读：

[关于 vga 编程的在线电子书](http://www.osdever.net/FreeVGA/vga/vgareg.htm)

# android - 如何在 Android 上设置 Google Play Services 错误样式

> ID：13979253
> 
> 赞同：13
> 
> 时间：2012-12-20T19:36:47.443
> 
> 标签：android, google-play-services

在 Android 上使用新的 Google Maps V2 API 时，如果用户的设备未安装 Google Play（服务）应用程序，用户将看到一条错误消息。我想知道是否有可能以某种方式覆盖此错误消息的样式以使其不那么刺耳并更适合应用程序样式。

这是错误的样子：

![除非您更新 Google Play 服务，否则此应用将无法运行。](../Images/3278ea8bb3fbb63495b9ab38b1a12a02.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T22:02:16.347

在进行了一些调查后，我确定最好的解决方案是手动检查 Google Play 服务库是否存在并显示自定义错误对话框或错误布局。有一些实用方法[`GooglePlayServicesUtil`](http://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html)可以使这变得相当简单。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    int statusCode =
            GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    if (statusCode == ConnectionResult.SUCCESS) {
        // Continue with your regular activity/fragment configuration.
    } else {
        // Hide the map fragment so the default error message is not
        // visible.    
        findViewById(R.id.map).setVisibility(View.GONE);

        // Show a custom error message
        showErrorMessage(statusCode);
    }
}

private void showErrorMessage(final int statusCode) {
    // I've outlined two solutions below. Pick which one works best for
    // you and remove the if-block.
    boolean showDialog = false;

    if (showDialog) {
        // This is the easiest method and simply displays a pre-configured
        // error dialog
        GooglePlayServicesUtil.getErrorDialog(statusCode, this, 0).show();
    } else {
        // Show a completely custom layout
        findViewById(R.id.error).setVisibility(View.VISIBLE);

        // Wire up the button to install the missing library
        Button errorButton = (Button) findViewById(R.id.error_button);
        errorButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                try {
                    // Perform the correct action for the given status
                    // code!
                    GooglePlayServicesUtil.getErrorPendingIntent(
                            statusCode, getActivity(), 0).send();
                } catch (CanceledException e1) {
                    // Pass
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-05T15:45:53.647

特瓦丁顿的回答很棒。但是，当我尝试使用它时，该方法已被弃用。因此，经过大量研究，我创建了一个名为的函数`isPlayServicesAvailable()`，您可以在使用任何使用 Play 服务的功能之前检查它。它会根据错误自动创建对话框，如果问题可以解决，还会链接到 Play 商店。

```
public boolean isGooglePlayServicesAvailable(Activity activity) {
        GoogleApiAvailability googleApiAvailability = GoogleApiAvailability.getInstance();
        int status = googleApiAvailability.isGooglePlayServicesAvailable(activity);
        if(status != ConnectionResult.SUCCESS) {
            if(googleApiAvailability.isUserResolvableError(status)) {
                googleApiAvailability.getErrorDialog(this, status, 0, new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel(DialogInterface dialogInterface) {
                        finish();
                    }
                }).show();
            }
            else {Toast.makeText(this, "This app can not run on this device", Toast.LENGTH_LONG).show();
            }
            return false;
        }
        return true;
    } 
```

我希望它会节省你很多宝贵的时间。PS-我刚刚开始在 StackOverflow 上回答，请让我知道您对此答案的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-25T01:26:56.410

*   `GooglePlayServiceUtil`已弃用。查看[`GoogleApiAvailability`](https://developers.google.com/android/reference/com/google/android/gms/common/GoogleApiAvailability)最新的接口。
*   更喜欢直接使用提供的`DialogFragment`而不是错误`AlertDialog`，以便它可以由活动正确管理。

    ```
    public static boolean checkPlayServices(FragmentActivity activity) {
        GoogleApiAvailability googleApiAvailability = GoogleApiAvailability.getInstance();
        int resultCode = googleApiAvailability.isGooglePlayServicesAvailable(activity);

        if (resultCode != ConnectionResult.SUCCESS) {
            if (googleApiAvailability.isUserResolvableError(resultCode)) {
                // "user resolvable" means Google Play is available to download the last version of Play Services APK
                // This will open Google dialog fragment displaying the proper message depending on "resultCode"
                googleApiAvailability.showErrorDialogFragment(activity, resultCode, PLAY_SERVICES_RESOLUTION_REQUEST);
            } else {
                // Should not happen. This device does not support Play Services.
                // Let's show an ultimate warning.
                MyCustomPlayServicesErrorDialogFragment playServicesErrorDialog = new MyCustomPlayServicesErrorDialogFragment();
                playServicesErrorDialog.show(activity.getFragmentManager(), TAG);
            }
            return false;
        }
        return true;
    } 
    ```

# c++ - 解决 operator[] 的模棱两可的重载

> ID：13979254
> 
> 赞同：7
> 
> 时间：2012-12-20T19:36:53.927
> 
> 标签：c++, operators, operator-overloading

我有这堂课：

```
class MyClass {

    public:

        int operator[](const std::string&);
        const std::string& operator[](const int&) const;

    ...
}; 
```

但是，如果我用 const 文字 0 调用第二个运算符，它的效果很好：

```
MyClass myclass;
std::cout << myclass[0] << std::endl; 
```

我收到了这个错误：

```
In function 'int main()':
ambiguous overload for 'operator[]' in 'myclass[0]'
note: candidates are:
note: const int MyClass::operator[](const string&)|
note: const string& MyClass::operator[](const int&) const 
```

我想我明白是什么情况（0 可以是字符串或整数？），但我的问题是：有没有办法解决这个问题并保持运算符重载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T19:54:40.580

调用`MyClass::operator[](const std::string&)`涉及转换：

`myclass`从`MyClass&`到`MyClass&`: 完美匹配

`0`from `int`to `const char*`to `std::string`: 用户自定义转换

调用`MyClass::operator[](const int&) const`涉及转换：

`myclass`from `MyClass&`to `const MyClass&`: 常量限定

`0`从`int`到`int`: 完美匹配

在这种情况下，当一个重载对参数 X “更好”，但另一个重载对参数 Y “更好”时，这两个重载都不能被认为是最好的重载，编译器必须抱怨（假设没有第三个重载胜过两者） .

是否可以将两个重载更改为 both`const`或 both `non-const`？如果没有，您可以添加第三个重载来处理这种情况：

```
const std::string& operator[](int n) {
    return static_cast<const MyClass&>(*this)[n];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T19:55:44.963

`0`不能是 a `string`，但它可以是指针，这意味着它可以*隐式转换*为 a `string`。请注意，这不适用于其他常量积分，例如`1`或`42`- 只是`0`具体而言。

**4.10 指针转换**

> 1/空指针常量是整数类型的整数常量表达式 (5.19) 右值，其计算结果为零。空指针常量可以转换为指针类型；结果是该类型的空指针值，并且可以与指向对象的指针或指向函数类型的指针的所有其他值区分开来。相同类型的两个空指针值应比较相等。将空指针常量转换为指向 cv 限定类型的指针是一次转换，而不是指针转换后跟限定转换 (4.4) 的顺序。

因此，在 的情况下`myclass[0]`，`0`可以是`int`或 ` 空指针常量。

标准还规定有一个带指针`std::string`的非`explicit`构造函数：`char`

```
size_type find_last_not_of (const charT* s, size_type pos = npos) const; 
```

现在，由于您的`operator&`方法都采用`const`引用类型的参数，因此可以将它们传递给临时对象。这就是编译器感到困惑的原因——它不知道你想要哪一个——一个接受一个`int`，或者一个接受一个临时`string`构造的 via `string(const char*)`。

至于如何解决这个问题，我会退后一步。在我看来，你的两个`operator[]`函数做了截然不同的事情。或者也许他们会做同样的事情，给定不同的输入。如果他们做不同的事情，那么我将提供具有不同（适当）名称的成员函数，并跳过尝试使用`operator[]`语法。也许其中一种方法会返回真正被索引的东西——在这种情况下，我会使用那个`operator[]`语法，但只使用那个。

如果他们确实做同样的事情，并且那个事情是*按索引*返回一个项目，那么我将为此只提供一种方法，并让它`size_t`按值取值。然后，您还可以提供某种转换函数（最好以自由的非成员函数的形式），例如将 a 转换`string`为 a `size_t`。这样做，您可以在索引时编写这样的代码`string`：

```
myPos[str_to_index(str)]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T19:47:16.470

字面意思`0`很特别。除了作为八进制常量外，它还可以转换为任何指针类型的空指针。这使得. 的-constructor`0`可行。`char const *``std::string`

两个重载都不是更好的原因是因为运算符的 int 重载具有`const`实例 CV 限定符。这样，两个重载都需要转换并且同样糟糕。

明显的解决方法是明确要求 const 重载：

```
static_cast<MyClass const &>(myclass)[0] 
```

# regex - 如何使用正则表达式来跟踪这些 URL？

> ID：13979256
> 
> 赞同：1
> 
> 时间：2012-12-20T19:36:57.800
> 
> 标签：regex, google-analytics

我想在 Google Analytics 中使用正则表达式跟踪这些 URL。我该怎么做呢？

1.  /productA/*变量*
2.  /productA/*变量*/更多信息
3.  /productA/*变量*/moreinfo/buy

URL 3 是最终目标，这（与 nr. 2 一起）我可以弄清楚。但我似乎无法构建一个会命中 nr 的正则表达式逻辑。1，但没有击中nr。2和nr。3.

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:57:54.583

这只会选择选项 1

```
/productA/[^/]*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:01:47.980

对每种 URL 类型使用这 3 个不同的正则表达式：

没有#1：

```
^/productA/[^/]+$ 
```

没有#2：

```
^/productA/[^/]+/[^/]+$ 
```

没有#3：

```
^/productA/[^/]+/[^/]+/[^/]+$ 
```

# ruby-on-rails-3 - 如何正确连接字符串和标记结果？

> ID：13979257
> 
> 赞同：0
> 
> 时间：2012-12-20T19:37:05.210
> 
> 标签：ruby-on-rails-3, helpers

我正在制作一个用于创建带有文本和徽标图像的登录按钮的 rails 助手。如果我仅将 text 或 image_tag 结果作为内容，则效果很好。

```
def test_helper
  anchor = content_tag :a, "enter by", :href => '#'
  concat content_tag :div, anchor, :class => 'login'
end

# result:
# <div class="login"><a href="#">enter by</a></div>

def test_helper
  anchor = content_tag :a, image_tag("logo.png"), :href => '#'
  concat content_tag :div, anchor, :class => 'login'
end

# result:
# <div class="login"><a href="#"><img src="assets/logo.png" /></a></div> 
```

但是当我尝试传递连接结果时，它会在 html 源代码中返回一个带有转义符号的 img 标签：

```
def test_helper
  anchor = content_tag :a, "enter by" + image_tag("logo.png"), :href => '#'
  concat content_tag :div, anchor, :class => 'login'
end

<div class="login"><a href="#">enter by&lt;img src=&quot;/assets/logo.png&quot; /&gt;</a></div> 
```

如何正确连接字符串和 content_tag 的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T19:41:00.403

问题是因为在构建anchor_tag 时进行了连接。您需要调用`html_safe`字符串文字以避免转义：

```
anchor = content_tag :a, "enter by".html_safe + image_tag("logo.png"), :href => '#' 
```

# powershell - 在 powershell 中显示 csv

> ID：13979258
> 
> 赞同：7
> 
> 时间：2012-12-20T19:37:29.767
> 
> 标签：powershell, csv

我有一个我创建的 CSV，我正在尝试在其上运行 Import-CSV 命令。从我看到的示例中，数据以漂亮的表格格式显示。但是，我无法让我的数据看起来那样。如果我在 Excel 中打开它，一切都是它自己的单元格块。以下是我的一些数据，它的显示方式以及我的期望：

数据：

```
Directory,Name,Length,CreationTime,LastWriteTime
\\foo\foofoo\nightly.188\share\name,name.pst,271360,6/4/2009 2:42:21 PM,6/9/2011 8:58:50 AM
\\foo\foofoo\nightly.188\share\name,name2.pst,71123968,10/5/2010 2:41:56 PM,8/1/2011 4:08:32 PM 
```

数据输出：

```
Directory     : \\foo\foofoo\nightly.188\share\name
Name          : name.pst
Length        : 271360
CreationTime  : 6/4/2009 2:42:21 PM
LastWriteTime : 6/9/2011 8:58:50 AM

Directory     : \\foo\foofoo\nightly.188\share\name
Name          : name2.pst
Length        : 71123968
CreationTime  : 10/5/2010 2:41:56 PM
LastWriteTime : 8/1/2011 4:08:32 PM 
```

我所期待的：

```
Directory                            Name        Length      CreationTime             LastWriteTime
\\foo\foofoo\nightly.188\share\name  name.pst    271360      6/4/2009 2:42:21 PM     8/1/2011 4:08:32 PM
\\foo\foofoo\nightly.188\share\name  name2.pst   71123968    10/5/2010 2:41:56 PM    8/1/2011 4:08:32 PM 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T23:09:03.940

input.csv 中的列数控制默认输出是 Format-List 还是 Format-Table

```
 Import-Csv D:\temp\input.csv | Format-List 
 Import-Csv D:\temp\input.csv | Format-Table 
 Import-Csv D:\temp\input.csv 
```

[此链接表明](http://www.computerperformance.co.uk/powershell/powershell_format_list.htm) `Because the output contains more than 5 properties the default layout is courtesy of Format-List`，尽管使用 Import-Csv 它似乎在您有超过 4 列时发生。

我玩弄了文件中的窗口宽度和数据，发现 4 列是神奇的数字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T19:46:42.833

您可以将输出重定向`Import-Csv`到[`Format-Table`](http://technet.microsoft.com/en-us/library/hh849892.aspx)：

```
Import-Csv D:\temp\input.csv | Format-Table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:20:35.043

文件是 Unicode 编码的吗？如果是这样，请在记事本中打开 csv 文件并将其保存为 UTF-8，它应该可以解决您的问题。

# vb.net - CheckBoxFor VB.Net 中的可空布尔值

> ID：13979270
> 
> 赞同：2
> 
> 时间：2012-12-20T19:38:26.840
> 
> 标签：vb.net, razor, asp.net-mvc-4

我在 VB.Net 中使用 ASP.Net MVC 4，我已经看到了其他一些关于如何在 c# 中为可空布尔值制作复选框的其他答案。通常转换为 VB.Net 非常简单。这个我想不通。

其他答案说要这样做..

> 在我的 EditorTemplates 文件夹中创建一个 Boolean.cshtml 并粘贴

```
@model bool?    
@Html.CheckBox("", Model.GetValueOrDefault()) 
```

所以，我尝试了 VB 等价物，在 EditorTemplates 文件夹中我制作了 Boolean.vbhtml 并把它

```
@model System.Nullable(of Boolean)
@Html.CheckBox("", Model.GetValueOrDefault) 
```

那么在我看来我有

```
@Html.EditorFor(Function(x) x.myNullableBool) 
```

该代码引发此异常：

> 未设置对象变量或 With 块变量。

我在几个不同的地方发现了与此处发布的内容非常相似的 c# 示例。有谁知道如何让它在 VB.Net 中工作？

**编辑**

这就是我正在尝试做的事情（如果它有效，那就更好了）

```
@model System.Nullable(of Boolean)
@Html.CheckBox("", If(Model is Nothing, False, Model)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:58:36.553

An[`HTML checkbox`](http://www.w3.org/TR/html401/interact/forms.html#checkbox)有 2 个状态：

*   检查
*   未经检查

翻译成 .NET[`boolean`](http://msdn.microsoft.com/en-us/library/system.boolean.aspx)类型术语意味着：

*   真的
*   错误的

因此，尝试将视图模型上的 Nullable 布尔属性绑定到复选框几乎没有任何逻辑意义。一个可为空的布尔值在 .NET 中有 3 种状态：

*   无（C# 中为空）
*   真的
*   错误的

因此，您可以看到复选框的 HTML 语义根本不适合您的视图模型类型。顺便说一下，为什么 Html.CheckBoxFor 帮助器需要一个布尔属性，而不是可为空的布尔值，这并不奇怪。

因此，如果要将其绑定到复选框，我建议您将视图模型属性的类型修改为不可为空的布尔值。

否则，您总是可以拥有一个`~/Views/Shared/EditorTemplates/Boolean.vbhtml`包含以下内容的自定义编辑器模板：

```
@ModelType Nullable(Of Boolean)
@Html.CheckBox("", If(Model.HasValue, Model.Value, False)) 
```

但是，如果您正确设计视图模型（即匹配视图的要求），则不需要这些技巧。

# c - 获取 Makefile.msc 中的父目录

> ID：13979273
> 
> 赞同：0
> 
> 时间：2012-12-20T19:38:35.123
> 
> 标签：c, nmake

我有第三方 Makefile.msc (zlib)，它位于源 (zlib\win32) 的子目录中。您似乎打算直接从源目录运行 win32/Makefile.msc 。但是，我需要制作多个不同的版本，并且想把结果分开出来。我还想从源目录以外的目录调用 nmake。

我试过 SRCDIR = ./.. 但似乎 .. 不受支持。如何进入父目录？

# php - 如何从我的 URL 中获取最后一个变量名并在 switch 语句中使用它？

> ID：13979274
> 
> 赞同：1
> 
> 时间：2012-12-20T19:38:34.050
> 
> 标签：php, url, query-string

我正在尝试获取我的 url 中显示的最后一个变量名称，并使用它来确定我的页面上显示的内容。例如，这是我的网址：

`http://mysite.php/catalog/?department=123&category=456&sub_category=789`

如果 URL 显示的是，`sub_category`那么我想显示所有被视为子类别的内容。但是，如果 url 只显示：

`http://mysite.php/catalog/?department=123&category=456`

然后我想显示仅与类别有关的内容。

一旦获得最后一个变量名称，我将使用 switch 语句来显示内容。我一直在使用这段代码，但它只得到第一个变量名而不是最后一个？

```
switch(key($_GET))
{
    case 'department':
        print('show department');
        break;
    case 'category':
        print('show category');
        break;
    case 'sub_category':
        print('show sub_category');
        break;
} 
```

也许这不是最好的方法，如果你有比使用 switch 语句更好的方法，请告诉我；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:42:48.493

不要依赖查询字符串参数的顺序。更好的方法是按特定顺序检查参数是否存在：

```
if (isset($_GET["sub_category"]))
{
    print('show sub_category');
}
elseif (isset($_GET["category"]))
{
    print('show category');
}
elseif (isset($_GET["department"]))
{
    print('show department');
}
else
{
    print('show error');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T19:42:40.527

在您的类别案例中添加一个条件，如下所示：

```
case 'category':
  if (isset($_GET['sub_category'])) {
    print('show sub_category');
  }  else {
    print('show category');
  }
  break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:46:08.760

如果您的`$_SERVER`配置正确，我会说最好的方法是：

```
<?php

$qs = $_SERVER['QUERY_STRING'];
parse_str($qs, $data);
$keys = array_keys($data);
$last = count($keys)-1;

echo $keys[$last]; 
```

# xml - 使用正则表达式匹配 XML 标记

> ID：13979277
> 
> 赞同：2
> 
> 时间：2012-12-20T19:38:45.683
> 
> 标签：xml, regex

我想使用正则表达式匹配这个 XML 标记

```
"<a href="xxx">ZBL ddd</a>" 
```

我只想在标签值以 ZBL 开头时获取 XXX 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:43:18.873

您可以使用此正则表达式。

```
"<a href=([^>]*)>ZBL.*?</a>" 
```

`group(1)`当在字符串中找到此模式时，只需获取。

**爪哇**：-

```
String str = "<a href=\"xxx\">ZBL ddd</a>........<a href=\"abc\">ddd</a>";

Matcher matcher = Pattern.compile("<a href=([^>]*)>ZBL.*?</a>").matcher(str);
while (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

**输出： -**

```
"xxx" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:45:34.010

使用 PHP，您可以执行以下操作：

```
<?php

$string = '<a href="xxx">ZBL ddd</a>';
$pattern = '/"(.*)"/';
preg_match($pattern, $string, $matches);
var_dump($matches); 
```

# jquery - .live() jQuery - 如何更改我的事件

> ID：13979278
> 
> 赞同：2
> 
> 时间：2012-12-20T19:38:47.570
> 
> 标签：jquery, jquery-on

如何将这些事件更改为 .live() 事件处理程序？

我以为我可以将 $(document).ready(function() ...to.... $(document).live(function() 以及 .keydown 和 .data 更改为 .live 但我不能似乎让它工作......请帮助。

```
$(document).ready(function(){
                $('#number').bind('keyup change focus', function(){
                        var field = this;
                        timer = setTimeout(function(){runSearch(field);}, 444);});                      
                $('#number').keydown(function(){clearTimeout(timer);});                 
                //url selection by specifics                
            $('#phone_book tr').data('bgcolor', '#aaf').hover(function(){
                 var $this = $(this);
                 var newBgc = $(this).data('bgcolor');
            $(this).data('bgcolor', $(this).css('background-color')).css('background-color', newBgc);
                 });  
                //url selection by specifics  
                $("#phone_book tr").click(function(){
                        var id = $(this).children().first().html();
                        var type = $(this).parents('table').siblings('div.module_header').html().toLowerCase(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:40:20.927

改变

```
.bind(... 
```

至

```
.on(... 
```

.live() 实际上已被弃用。

对于 .keyup()、.keydown() 之类的，将它们更改为 .on('keydown'... 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:19:04.650

这是带有 .on 函数的代码示例。

```
$(document).ready(function(){
      $('#number').on('keyup change focus', function(){
             var field = this;
             timer = setTimeout(function(){runSearch(field);}, 444);});                      
            $('#number').keydown(function(){clearTimeout(timer);});                 
                //url selection by specifics

            $('#phone_book tr').data('bgcolor', '#aaf').hover(function(){
                    var newBgc = $(this).data('bgcolor');
                    $(this).data('bgcolor', $(this).css('background-color')).css('background-color', newBgc);});  
                //url selection by specifics  
            $("#phone_book tr").on('click', function(){
                     var id = $(this).children().first().html();
                     var type = $(this).parents('table').siblings('div.module_header').html().toLowerCase(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:42:42.420

将 .bind() 更改为 .live()

请记住，在较新版本的 jQuery 中不推荐使用 live()，您应该改用 on()。您的某些事件可能还需要较旧的 delegate() 方法。

```
$('#number').live('keyup change focus', function(){
    var field = this;
    timer = setTimeout(function(){runSearch(field);}, 444);});                      
    $('body').delegate('#number', 'keydown', function(){clearTimeout(timer);});                 
        //url selection by specifics                
        $('body').data('bgcolor', '#aaf').delegate('#phone_book tr', 'hover, function(){
            var $this = $(this);
            var newBgc = $(this).data('bgcolor');
            $(this).data('bgcolor', $(this).css('background-color')).css('background-color', newBgc);
    }); 
```

# c# - 对列表进行分组

> ID：13979289
> 
> 赞同：5
> 
> 时间：2012-12-20T19:39:35.777
> 
> 标签：c#, linq, lambda

[我有一个与昨天的问题](https://stackoverflow.com/questions/13962393/group-and-sum-a-listobject)类似的问题。
我有这个 List<object[]>

```
List<object[]> olst = new List<object[]>();

olst.Add(new object[] { "AA1", "X", 1, 3.50 });
olst.Add(new object[] { "AA2", "Y", 2, 5.20 });
olst.Add(new object[] { "AA2", "Y", 1, 3.50 });
olst.Add(new object[] { "AA1", "X", 1, 3.20 });
olst.Add(new object[] { "AA1", "Y", 2, 5.30 }); 
```

我需要生成 List<object[]> 来保存它：

```
"AA1", "X", 2, 6.70
"AA2", "Y", 3, 8.70
"AA1", "Y", 2, 5.30 
```

换句话说，我需要按每个 object[]的**第一个**和**第二个元素对 olst 进行分组，并对****3rd**和**4th**求和。
我可以使用 for 循环，但我希望有人可以帮助我使用 lambda 表达式和/或 linq 来完成此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:43:54.903

```
List<object[]> olst = new List<object[]>();

            olst.Add(new object[] { "AA1", "X" });
            olst.Add(new object[] { "AA2", "Y" });
            olst.Add(new object[] { "AA2", "Y" });
            olst.Add(new object[] { "AA1", "X" });
            olst.Add(new object[] { "AA1", "Y" });

            var result = from ol in olst
                         group ol by new {p1 = ol[0], p2 = ol[1]}
                         into g
                         select g.First(); 
```

像这样的东西？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T19:57:15.557

您需要按匿名类型分组，然后将第三列和第四列相加：

```
List<object[]> grouped = olst
    .GroupBy(o => new { Prop1 = o[0].ToString(), Prop2 = o[1].ToString() })
    .Select(o => new object[] 
    {
        o.Key.Prop1,
        o.Key.Prop2,
        o.Sum(x => (int)x[2]),
        o.Sum(x => (double)x[3])
    })
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:52:40.033

正如评论中所建议的那样，我会选择`Tuple`并可能使用 HashSet ，因为它只会在 item 不存在时追加（而且它很快）。如果您将项目添加到 hashset，则无需选择 distinct，只要您的类型提供必要的 Equals 和 GetHashCode 方法。
像这样的东西：

```
var olst = new HashSet<Tuple<string,string>>();
            olst.Add(Tuple.Create("AA1", "X"));
            olst.Add(Tuple.Create("AA1", "X"));
            olst.Add(Tuple.Create("AA2", "Y"));
            olst.Add(Tuple.Create("AA2", "Y")); 
```

如果需要，可以将其转换为列表。这是一个例子：

```
olst.ToList().ForEach(x=> Console.WriteLine(x.Item1 + " " + x.Item2)); 
```

会打印出来

```
AA1 X
AA2 Y 
```

# registry - 使用注册表检查 office 是否安装在 64 位 Win OS 中

> ID：13979296
> 
> 赞同：3
> 
> 时间：2012-12-20T19:40:34.770
> 
> 标签：registry, ms-office

我试图检查是否使用注册表安装了办公室。我可以使用以下 regkey 验证 32 位操作系统

"..HKLM\SOFTWARE\Microsoft\Office\14.0\Common\InstallRoot" + "路径"

但是我如何检查使用 64 位操作系统时？对于 32 位或 64 位 Office，64 位操作系统上不存在此密钥。（在 Win7 和 Win 8 上均已检查）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:50:55.663

我终于找到了我正在寻找的答案。[这个论坛帖子](http://social.technet.microsoft.com/Forums/en-us/officeitpro/thread/efe946bd-25d0-4a30-9f8d-04ef2624d040)有一个答案，建议尝试一些注册表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T10:42:15.120

正如[这里](http://www.techsupportalert.com/content/how-windows7-vista64-support-32bit-applications.htm)所说，注册表项需要在**WOW6432Node**中检查。所以你的路径会是这样的：

> HKLM\SOFTWARE\Wow6432Node\Microsoft\Office\14.0\Common\InstallRoot

# android - 9 片段中的补丁图像奇怪行为

> ID：13979298
> 
> 赞同：2
> 
> 时间：2012-12-20T19:40:41.997
> 
> 标签：android, android-fragments, actionbarsherlock, android-support-library

正如我的[一个问题中所建议的那样，](https://stackoverflow.com/questions/13780178/listview-items-background-with-gradient-in-fragment)我必须使用带有渐变的 9-patch 图像作为列表视图项背景。

但是当我使用 9-patch 图像时，渐变仍然存在问题：

![在此处输入图像描述](../Images/52cdb70c69a9983d5d7899510fc369b2.png)

9 补丁，test.9.png：

![在此处输入图像描述](../Images/d1c98df3e751b609346921fcc02fa773.png)

但是当我在渐变和底部 9-patch 线之间留下透明线 1 px 高度时，它会响应水平内容放置，一切都很好，而且我有好看的渐变。

9 补丁图像：

![在此处输入图像描述](../Images/089cdce6d0356cbb42042424a81b3c3f.png)

更接近看到透明线：

![在此处输入图像描述](../Images/5e6a28d843b9378179f2cacfa7bc8858.png)

这是一个结果：

![在此处输入图像描述](../Images/369505c453c0350d4f6915fb55d9cb68.png)

**我有好看的渐变，但有透明线，我不需要。由于这条线，在图像上您可以看到列表后面的黑色背景。如何绘制 9-patch 图像以获得良好的渐变并且在背景中没有“洞”？**

我正在为片段使用 actionbarsherlock。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:49:56.897

Draw9patch 图像不适用于渐变，您会发现在几个 Android 操作系统中显示它的一些差异，所以不要使用它。

使用[GradientDrawable](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)

[在运行时更改 Android 上的渐变背景颜色](https://stackoverflow.com/questions/4941606/changing-gradient-background-colors-on-android-at-runtime)

[使用渐变创建九 (9) 个补丁 png 文件](https://stackoverflow.com/questions/5140749/creating-nine-9-patch-png-files-with-gradients)

# asp.net-mvc-4 - 在 Automapper 自定义解析器中访问请求

> ID：13979301
> 
> 赞同：1
> 
> 时间：2012-12-20T19:40:43.873
> 
> 标签：asp.net-mvc-4, asp.net-web-api, automapper

我正在开发一个 ASP.NET Web API 项目。

我使用 Auto-mapper 从我的域对象映射到 DTO

如何将请求参数传递给 Custom ValueResolver ？

**两年前**，我在 stackoverflow 上看到了一些类似的问题，其中提到无法做到这一点。现在是同样的情况还是已经解决了？

链接到两年前提出的类似问题：[如何在 Automapper 中将值传递给自定义解析器？](https://stackoverflow.com/questions/4925044/how-to-pass-values-to-a-custom-resolver-in-automapper)

有一个[ConstructedBy](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)方法可用于注入您自己的 Resolver 对象，但我不知道如何访问请求中的传递

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:04:30.377

我`AfterMap()`暂时使用了这个功能。我希望有人有更好的解决方案。

为简单起见，如果我将源类和目标类减少到

```
public class Source {

       public string Value {get;set;}

}

public class Destination{

       public string Value {get;set;}            

       private bool _reset;

       public Destination(bool reset = false){
           _reset = reset;
       } 

       public void TryReset(){
           if(!_reset) return;

            Value = string.Empty;

       }

} 
```

我`AfterMap()`在 Mapping 配置中添加了一个来调用 reset 方法。

```
Mapper.CreateMap<Source, Destination>()
      .AfterMap( (source, dest) => dest.TryReset()); 
```

在控制器中，我将请求中的重置标志直接传递为

```
var destination = Mapper.Map(new Source { Value ="Hello" },
                             new Destination(flag)); 
```

# java - 用java语言从org.rda导入类

> ID：13979306
> 
> 赞同：2
> 
> 时间：2012-12-20T19:40:58.757
> 
> 标签：java, random, import, package

我的问题非常基本。我想在我的 java 代码中使用 randomX。

[jgap.sourceforge.net/javadoc/3.01/org/jgap/util/randomLEcuyer.html](http://jgap.sourceforge.net/javadoc/3.01/org/jgap/util/randomLEcuyer.html)

示例代码来自这里：

[https://code.google.com/p/fractalproject/source/browse/FractalProject/src/org/dla/model/DlaModel.java?spec=svn40&r=40](https://code.google.com/p/fractalproject/source/browse/FractalProject/src/org/dla/model/DlaModel.java?spec=svn40&r=40)

我已经在使用另一个包，比如说 MyProj，以及我当前代码的其他文件。我使用了以下几行，

```
package MyProj;
import org.jgap.util.randomLEcuyer 
```

但是eclipse不识别randomLEcuyer。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:54:04.213

首先，您的代码中有两个包声明：

```
package MyProj;
package org.dla.model; 
```

这是无效的。其次，您要使用的类，正如您链接到的 javadoc 所指示的那样，is`org.jgap.util.randomLEcuyer`和 not `org.rda.dice.randomx.randomLEcuyer`。

最后，我会小心使用一个甚至不遵守基本 Java 命名约定的类：类应该以大写字母开头。

# python - 合并 MIDI 和 Wav 文件

> ID：13979312
> 
> 赞同：1
> 
> 时间：2012-12-20T19:41:36.490
> 
> 标签：python, c, audio, wav, midi

我希望能够合并多个 midi 文件和 wav 文件并在 Python 或 C 中生成单个 wav 或 mp3 文件。是否有这样做的库？我必须先将 MIDI 转换为 wav，然后将 wav 文件合并在一起吗？我知道有 Python 的库可以做到这一点，但我不知道是否有办法使用 MIDI 和 wav 来做到这一点。

另外，这个手术有多贵？我宁愿在 Python 中执行此操作，但如果在 C 中执行此操作更好，我知道 C，因此我也会对此持开放态度。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T19:44:40.870

你在这里混合音频苹果和橙子。:)

WAV 文件是采样音频，而 MIDI 只是告诉 MIDI 播放器播放什么以及使用哪些乐器的指令。

您不能直接混合 WAV 和 MIDI，但如果您将 MIDI 序列渲染为 WAV，那么您可以随意混合。

TiMidity++ 是一个播放器/渲染器，您可能可以与之交互： http: [//timidity.sourceforge.net/](http://timidity.sourceforge.net/)

# java - Maven继承和聚合

> ID：13979316
> 
> 赞同：1
> 
> 时间：2012-12-20T19:41:55.300
> 
> 标签：java, maven, inheritance, aggregation

我只是好奇，如果在同一个 Maven 应用程序中同时使用继承和聚合会发生什么？这是应用程序结构：

> 我的项目应用程序

*   我的项目罐子
*   我的项目战争

现在，在应用程序的 pom.xml 中，我将 jar 和 war 项目声明为模块，同时来自两个模块的 pom 将应用程序 pom 声明为其父级。它在这里创造了某种冗余，不是吗？

这种情况的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:15:56.313

这不是多余的。他们都做不同的事情。

如果你使用聚合（定义`<modules>`），你只是说必须构建哪些项目，它的包类型是`pom`.

如果您继承（定义`<parent>`），您将继承父 pom 的首选项。

看：

> 继承和聚合创建了一个很好的动态来通过单个高级 POM 控制构建。您经常会看到既是父项目又是聚合者的项目。例如，整个 maven 核心通过单个基础 POM org.apache.maven:maven 运行，因此构建 Maven 项目可以通过单个命令执行：mvn compile。但是，尽管 POM 项目、聚合器项目和父项目都不是同一个项目，但不应混淆。POM 项目可以继承自——但不一定具有——它聚合的任何模块。相反，POM 项目可能会聚合不继承自它的项目。

更多信息[在这里](http://maven.apache.org/pom.html#Inheritance%22here%22)。

# java - 如何计算文本中单词的出现次数

> ID：13979317
> 
> 赞同：3
> 
> 时间：2012-12-20T19:42:00.393
> 
> 标签：java

我正在编写一个程序来查找文本中最常用的 10 个单词，但我被卡住了，不知道下一步该怎么做。有人能帮助我吗？

我只走了这么远：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Scanner;
import java.util.regex.Pattern;

public class Lab4 {
    public static void main(String[] args) throws FileNotFoundException {
        Scanner file = new Scanner(new File("text.txt")).useDelimiter("[^a-zA-Z]+");
        List<String> words = new ArrayList<String>();
        while (file.hasNext()){
            String tx = file.next();
            // String x = file.next().toLowerCase();
            words.add(tx);
        }
        Collections.sort(words);
        // System.out.println(words);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T19:52:04.177

您可以使用 Guava Multiset，这是一个字数统计示例：[http ://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)

这里是如何在 Multiset 中找到计数最高的单词：[按元素频率顺序遍历 Multiset 的最简单方法？](https://stackoverflow.com/questions/4345633/simplest-way-to-iterate-through-a-multiset-in-the-order-of-element-frequency)

**更新**我在 2012 年写了这个答案。从那时起我们有了 Java 8，现在可以在没有外部库的情况下在几行中找到 10 个最常用的单词：

```
List<String> words = ...

// map the words to their count
Map<String, Integer> frequencyMap = words.stream()
         .collect(toMap(
                s -> s, // key is the word
                s -> 1, // value is 1
                Integer::sum)); // merge function counts the identical words

// find the top 10
List<String> top10 = words.stream()
        .sorted(comparing(frequencyMap::get).reversed()) // sort by descending frequency
        .distinct() // take only unique values
        .limit(10)   // take only the first 10
        .collect(toList()); // put it in a returned list

System.out.println("top10 = " + top10); 
```

静态导入是：

```
import static java.util.Comparator.comparing;
import static java.util.stream.Collectors.toList;
import static java.util.stream.Collectors.toMap; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T21:23:24.843

创建一个地图来跟踪这样的事件：

```
 Scanner file = new Scanner(new File("text.txt")).useDelimiter("[^a-zA-Z]+");
   HashMap<String, Integer> map = new HashMap<>();

   while (file.hasNext()){
        String word = file.next().toLowerCase();
        if (map.containsKey(word)) {
            map.put(word, map.get(word) + 1);
        } else {
            map.put(word, 0);
        }
    }

    ArrayList<Map.Entry<String, Integer>> entries = new ArrayList<>(map.entrySet());
    Collections.sort(entries, new Comparator<Map.Entry<String, Integer>>() {

        @Override
        public int compare(Map.Entry<String, Integer> a, Map.Entry<String, Integer> b) {
            return a.getValue().compareTo(b.getValue());
        }
    });

    for(int i = 0; i < 10; i++){
        System.out.println(entries.get(entries.size() - i - 1).getKey());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-26T23:46:08.073

这是一个比来自 lbalazscs 的版本更短的版本，它也使用 Java 8 的流 API；

```
Arrays.stream(new String(Files.readAllBytes(PATH_TO_FILE), StandardCharsets.UTF_8).split("\\W+"))
            .collect(Collectors.groupingBy(Function.<String>identity(), HashMap::new, counting()))
            .entrySet()
            .stream()
            .sorted(((o1, o2) -> o2.getValue().compareTo(o1.getValue())))
            .limit(10)
            .forEach(System.out::println); 
```

这将一次性完成所有操作：加载文件，按非单词字符拆分，按单词对所有内容进行分组并为每个组分配字数，然后为前十个单词打印带有计数的单词。

有关非常相似的设置的一些深入讨论，另请参见：[https ://stackoverflow.com/a/33946927/327301](https://stackoverflow.com/a/33946927/327301)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T18:21:34.743

```
package src;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;
import java.util.Map.Entry;

public class ScannerTest
{
    public static void main(String[] args) throws FileNotFoundException
        {
        Scanner scanner = new Scanner(new File("G:/Script_nt.txt")).useDelimiter("[^a-zA-Z]+");
        Map<String, Integer> map = new HashMap<String, Integer>();
        while (scanner.hasNext())
            {
            String word = scanner.next();
            if (map.containsKey(word))
                {
                map.put(word, map.get(word)+1);
                }
            else
                {
                map.put(word, 1);
                }
            }

        List<Map.Entry<String, Integer>> entries = new ArrayList<Entry<String,Integer>>( map.entrySet());

        Collections.sort(entries, new Comparator<Map.Entry<String, Integer>>() {

            @Override
            public int compare(Map.Entry<String, Integer> a, Map.Entry<String, Integer> b) {
                return a.getValue().compareTo(b.getValue());
            }
        });

        for(int i = 0; i < map.size(); i++){
            System.out.println(entries.get(entries.size() - i - 1).getKey()+" "+entries.get(entries.size() - i - 1).getValue());
        }
        }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-21T05:33:58.663

从文件或命令行将输入作为字符串创建并将其传递给下面的方法，它将返回一个映射，其中包含单词作为键和值作为它们在该句子或段落中的出现或计数。

```
public Map<String,Integer> getWordsWithCount(String sentances)
{
    Map<String,Integer> wordsWithCount = new HashMap<String, Integer>();

    String[] words = sentances.split(" ");
    for (String word : words)
    {
        if(wordsWithCount.containsKey(word))
        {
            wordsWithCount.put(word, wordsWithCount.get(word)+1);
        }
        else
        {
            wordsWithCount.put(word, 1);
        }

    }

    return wordsWithCount;

} 
```

# java - Java：如何强制子类重载给定的受保护方法？

> ID：13979318
> 
> 赞同：10
> 
> 时间：2012-12-20T19:42:06.070
> 
> 标签：java, overloading, parent-child

父类不是也不能抽象。重载方法受到保护，因此接口不能在那里使用。

考虑到这两个限制是否可以做到？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T19:45:41.957

您不能强制重写该方法-这就是抽象方法的用途（您已声明这不是一种选择）。

一种可能性是让基类中的方法抛出一个`UnsupportedOperationException`. 然后，子类必须重写它以防止抛出错误。这样，您至少可以检测该方法是否已被覆盖。

例如：

```
public class Father {
    public void method ( ) {
        throw new UnsupportedOperationException( );
    }
}

public class Child1 extends Father {

}
public class Child2 extends Father {
    public void method ( ) {
        // Do something useful here...
    }
} 
```

调用`Child1.method()`会抛出`UnsupportedOperationException`，表明它没有被覆盖`Father`。`method()`调用`Child2.method()`不会抛出异常，这意味着它*已*被覆盖`method()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T19:45:21.243

您可以从父级抛出 UnsupportedOperationException。这在编译时无济于事，但在运行时会有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T19:46:14.010

由于 abstract 不是一个选项，您可以让该方法抛出一个`NotImplementedException`. 这是一个更明确的例外`UnsuppotedOperationException`。
**注意：**这不会阻止代码编译，只会在运行时抛出异常。

```
Public Clazz {
    public void methodToOverride(){
        Throw new NotImplementedException();
    }
} 
```

一些示例实现：
[Apache](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/NotImplementedException.html)
[Sun](http://srcrr.com/java/oracle/openjdk/6/reference/sun/reflect/generics/reflectiveObjects/NotImplementedException.html)
[Sharkysoft.com](http://sharkysoft.com/software/java/lava3/core/javadocs/com/sharkysoft/util/NotImplementedException.html)

# jquery - 如何测试选择器在jQuery中是否有效

> ID：13979323
> 
> 赞同：4
> 
> 时间：2012-12-20T19:42:28.630
> 
> 标签：jquery, jquery-selectors, anythingslider

我正在使用 AnySlider jQuery 插件，它动态读取 URL 中的哈希并通过 jQuery 选择页面上的项目。问题是最终用户可以在访问[http://mydomain.com/#!demos/slider](http://mydomain.com/#!demos/slider)时破坏插件。

有没有办法测试选择器是否有效而不是让 jQuery 崩溃（内置函数或正则表达式）？请参阅此尝试执行 $('#!demos/slider') 的 jsFiddle 示例并崩溃：http: [//jsfiddle.net/PvY2b/](http://jsfiddle.net/PvY2b/)

```
$('#!demos/slider') <= Uncaught Error: Syntax error, unrecognized expression: #!demo/slider 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:47:35.160

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

来自：[基本 HTML 数据类型](http://www.w3.org/TR/html4/types.html#h-6.2)

因此，这样的事情可能会起作用：

```
if (/^[A-Za-z][A-Za-z0-9\-_:\.]*$/.test(selector)) {
    // $('#' + selector)...
} 
```

或者干脆逃避它：

```
selector = selector.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, '\\$1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:50:08.727

将这个块包装到 try-catch 中可能更容易，如下所示：

```
try { 
  $('#!demo/pages') 
} catch(e) { 
  alert('Your selector is invalid'); 
} 
```

这不是一种懒惰的技巧：在处理一些您无法直接控制的外部组件时，这是一种非常常见的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:51:22.387

如上一个答案所示：[如何扩展 jQuery 的选择器引擎以在找不到选择器时向我发出警告？](https://stackoverflow.com/questions/5744997/how-do-i-extend-jquerys-selector-engine-to-warn-me-when-a-selector-is-not-found)

您必须扩展 jQuery init：

```
var oldInit = $.fn.init; // cache it

$.fn.init = function(selector, context, rootjQuery) {

    var result = new oldInit(selector, context, rootjQuery);

    if (result.length === 0)
        console.info("jQuery call has no elements!", arguments);
    return result;
}; 
```

它仍然会为语法错误的选择器抛出错误，但是假设您有一个正确的选择器`$('#test')`，如果不存在 #test ，它至少会警告您。有利于开发，有助于拼写错误等

我已经用它`.on()`和其他东西做了这个，它非常强大。

# javascript - 无法访问 AngularJS 中的 Javascript 函数返回的对象中的元素

> ID：13979324
> 
> 赞同：2
> 
> 时间：2012-12-20T19:42:38.380
> 
> 标签：javascript, arrays, function, object, angularjs

感谢@asgoth，我可以使用 AngularJS $http 服务从 Yahoo 检索股票价格，如下所述： [Cannot read response from AngularJS $resource JSONP get from Yahoo Finance](https://stackoverflow.com/questions/13963192/cannot-read-response-from-angularjs-resource-jsonp-get-from-yahoo-finance)

在“getHistoricalPrice”函数中，它将价格放入一个数组中，该数组位于一个对象中。从该函数内部，我可以访问价格并将其写入控制台。

该函数将对象返回到调用它的位置。从那里，我可以成功地将整个对象写入控制台。但是，我无法访问该对象的元素。我尝试了许多不同的方法，但仍然无法访问对象中的数据。您可以在[http://jsfiddle.net/curt00/LTazR/2/](http://jsfiddle.net/curt00/LTazR/2/)或以下查看代码：

```
angular.module('app', ['ngResource']);

function AppCtrl($scope, $http, $resource) {

var historical_price = getHistoricalPrice("AAPL", 'start date is hard coded', 'end date is hard coded');
console.log("after calling historical price: ", historical_price);  // historical_price is an object and all of the correct data is outputted to console here, but I cannot access its elements directly from Javascript.

for(var key in historical_price) {
    console.log("key =",key);  // this outputs "key = list"
}

console.log("after calling getHistoricalPrice: ", historical_price.list[0][1]);  // Cannot access this as browser console gives error: TypeError: Cannot read property '1' of undefined
console.log("after calling getHistoricalPrice: ", historical_price['list'][0][1]);  // Cannot access this as browser console gives error: TypeError: Cannot read property '1' of undefined
console.log("after calling getHistoricalPrice: ", historical_price[0][1]);  // Cannot access this as browser console gives error: TypeError: Cannot read property '1' of undefined

function getHistoricalPrice(symbol, start, end) {

    var query = 'select * from csv where url=\'http://ichart.yahoo.com/table.csv?s=' + symbol + '&a=' + '11' + '&b=' + '19' + '&c=' + '2012' + '&d=' + '11' + '&e=' + '19' + '&f=' + '2012' + '&g=d&ignore=.csv\'';

    var url = 'http://query.yahooapis.com/v1/public/yql?q=' + fixedEncodeURIComponent(query) + '&format=json&callback=JSON_CALLBACK';

    var histData = {};

    $http.jsonp(url, {timeout: 30000}).success(function(json) {
        var list = [];

        var result = json.query.results.row;

        result.shift(); // remove the header (columns) row
        angular.forEach(result, function(row) {
            list.push([(new Date(row.col0)).getTime()/1000, parseFloat(row.col4)]);

        });
        list.sort(function(val1, val2) {
            return val1[0] - val2[0];
        });
        histData.list = list;
        console.log('Loaded historical data',histData.list[0][1],', for ' + symbol);  // This works and gives the price
    });

    return histData;
}

var fixedEncodeURIComponent = function(str) {
    return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\*/g, "%2A");
};

} 
```

​<br> 非常感谢任何解决此问题的帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:57:17.163

[在https://stackoverflow.com/a/13967709/1916258](https://stackoverflow.com/a/13967709/1916258)上查看我的答案

调试 Yahoo api 的一个好方法是使用 YQL 控制台：http: [//developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/)

有关不同可能性的信息（哪些股票信息）可以在[http://www.gummy-stuff.org/Yahoo-data.htm上找到](http://www.gummy-stuff.org/Yahoo-data.htm)

编辑：函数 fixedEncodeURIComponent 仍然存在问题。它也应该对引号 (") 进行编码：

```
var fixedEncodeURIComponent = function(str) {
    return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\*/g, "%2A").replace(/\"/g, "%22");
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:44:43.040

BobS 是对的，你没有正确计时。在调用它之后，您还声明了 fixedEncodeURIComponent。这导致我在加载 jsfiddle 时立即出现错误。

当您正确地将回调传递给您的函数时，您实际上并没有调用它。我删除了 json 的所有后处理，因为您还有一些涉及查询的其他错误，并且刚刚实现了回调，以便您可以看到它正在工作。

请求完成后，您仍处于成功功能中，您需要添加

```
if(typeof(callback) === "function"){
    callback();
} 
```

这会调用您传入的函数并运行它。这是一个有效的 jsFiddle：http: [//jsfiddle.net/LTazR/22/](http://jsfiddle.net/LTazR/22/)

我还更新了我创建的调用输出的新变量，以便您可以看到它的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:52:49.343

这是时间问题。

在第 12-14 行中，您尝试在填充 histData.list 之前访问它。这是因为此代码在 $http.jsonp 函数的成功回调执行之前运行。

任何依赖于该回调完成的代码都必须在回调中或在回调中调用的函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:46:33.333

Thanks to everybody for providing suggestions.

I solved the problem by using AngularJS' $scope variable, such as $scope.symbol[user].price. I created this variable before calling the getHistoricalPrice function and then in that function, after the result is returned from $http.jsonp, I put the value into the $scope variable, as such:

```
$scope.symbol[user].price = row.col4; 
```

# java - 从侦听器中修改 JFrame

> ID：13979327
> 
> 赞同：5
> 
> 时间：2012-12-20T19:42:43.387
> 
> 标签：java, swing, focus, jframe, awt

> **可能重复：**
> [如何在框架可见后调用 setUndecorated()？](https://stackoverflow.com/questions/875132/how-to-call-setundecorated-after-a-frame-is-made-visible)

我应该如何让 JFrame 在未聚焦时不修饰，在聚焦时如何修饰？

这是我的代码：

```
import java.awt.event.*;
import javax.swing.*;

public class Test extends JFrame
{
    public Test()
    {
        setSize(100, 50);
        addWindowFocusListener(new WindowAdapter()
        {
            public void windowGainedFocus(WindowEvent e)
            {
                setUndecorated(false);
                System.out.println("Hi!");
            }
            public void windowLostFocus(WindowEvent e)
            {
                setUndecorated(true);
                System.out.println("Bye!");
            }
        });
    }

    public static void main(String[] args) 
    {
        new Test().setVisible(true);
    }
} 
```

这是运行时以及专注/不专注时的问题：

```
Exception in thread "AWT-EventQueue-0" java.awt.IllegalComponentStateException: The frame is displayable.
    at java.awt.Frame.setUndecorated(Frame.java:825)
    at Test$1.windowGainedFocus(Test.java:13)
    at java.awt.Window.processWindowFocusEvent(Window.java:1952)
    at java.awt.Window.processEvent(Window.java:1867)
    at java.awt.Component.dispatchEventImpl(Component.java:4750)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Window.dispatchEventImpl(Window.java:2518)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1895)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:965)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:412)
    at java.awt.Component.dispatchEventImpl(Component.java:4620)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Window.dispatchEventImpl(Window.java:2518)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:672)
    at java.awt.EventQueue.access$400(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.awt.EventQueue$2.run(EventQueue.java:629)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.awt.EventQueue$3.run(EventQueue.java:643)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
    at java.awt.SequencedEvent.dispatch(SequencedEvent.java:113)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:670)
    at java.awt.EventQueue.access$400(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.awt.EventQueue$2.run(EventQueue.java:629)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.awt.EventQueue$3.run(EventQueue.java:643)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138)
Exception in thread "AWT-EventQueue-0" java.awt.IllegalComponentStateException: The frame is displayable.
    at java.awt.Frame.setUndecorated(Frame.java:825)
    at Test$1.windowLostFocus(Test.java:18)
    at java.awt.Window.processWindowFocusEvent(Window.java:1955)
    at java.awt.Window.processEvent(Window.java:1867)
    at java.awt.Component.dispatchEventImpl(Component.java:4750)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Window.dispatchEventImpl(Window.java:2518)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1895)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:965)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:712)
    at java.awt.Component.dispatchEventImpl(Component.java:4620)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Window.dispatchEventImpl(Window.java:2518)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:672)
    at java.awt.EventQueue.access$400(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.awt.EventQueue$2.run(EventQueue.java:629)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.awt.EventQueue$3.run(EventQueue.java:643)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
    at java.awt.SequencedEvent.dispatch(SequencedEvent.java:113)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:670)
    at java.awt.EventQueue.access$400(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.awt.EventQueue$2.run(EventQueue.java:629)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.awt.EventQueue$3.run(EventQueue.java:643)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

原谅一个新手，我敢肯定这里缺少一些基本概念，而我最想知道这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T22:18:54.013

+1 给@AaronKurtzhals 和@trashgods 对给出以下想法的链接的评论

这是我为帮助您而制作的一个简短示例。

**解决方案：**

1）调用实例`dispose()`释放`JFrame`资源

2）根据需要编辑框架实例，即`setUndecorated(..)`

3) 呼叫`pack()`并`setVisible(true)`开启`JFrame`。

当聚焦/鼠标悬停时（当`setUndecorated(true)`被调用时，我们无法监听焦点事件）：

![在此处输入图像描述](../Images/5304dfbac6eef0333949e1d16fbaf3ef.png)

不专注时：

![在此处输入图像描述](../Images/43fcb4367c273357f2e22fb749e7ff29.png)

```
import java.awt.Dimension;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class Test {

    private boolean firstTime2 = true;
    private boolean firstTime = true;
    private JFrame frame;
    private JLabel focusLabel=new JLabel("");

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        initFrame();
        frame.addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseMoved(MouseEvent me) {
                super.mouseMoved(me);
                firstTime2 = false;
                firstTime = false;
                if (frame.isUndecorated()) {
                    focusLabel.setText("Focused");
                    firstTime = true;
                    firstTime2 = true;
                    frame.dispose();
                    frame.setUndecorated(false);
                    showFrame();
                }
            }
        });

        frame.addWindowFocusListener(new WindowAdapter() {
            @Override
            public void windowGainedFocus(WindowEvent e) {
                if (firstTime) {
                    focusLabel.setText("Focused");
                    firstTime = false;
                    frame.dispose();
                    frame.setUndecorated(false);
                    showFrame();
                }
            }

            @Override
            public void windowLostFocus(WindowEvent e) {
                if (!firstTime2) {
                    focusLabel.setText("Not focused");
                    frame.dispose();
                    frame.setUndecorated(true);
                    showFrame();
                }
                firstTime2 = false;
            }
        });

        showFrame();
    }

    private void initFrame() {
        frame = new JFrame() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(focusLabel);
    }

    private void showFrame() {
        frame.pack();
        frame.setVisible(true);
    }
} 
```

您可能已经注意到的一些提示：

*   `JFrame`不要不必要地扩展
*   用于[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)创建和操作 Swing 组件

# xml - 将多个属性值更改为新值

> ID：13979339
> 
> 赞同：1
> 
> 时间：2012-12-20T19:43:26.773
> 
> 标签：xml, xslt

[这个问题是从使用XSLT](https://stackoverflow.com/questions/6787551/xslt-change-certain-attribute-values)的答案演变而来的：更改某些属性值以解决我的情况，但发现它不起作用。

这是我的xml：

```
<root>
<Element1 id="VEH1">
    <Element2 />
</Element1>
<Element1 id="VEH2">
    <Element2 />
</Element1>
</root> 
```

这是我的 xsl 转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>
<xsl:template match="@id">
  <xsl:attribute name="id">
    <xsl:choose>
      <xsl:when test=". = VEH1">
        <xsl:text>VEH01</xsl:text>
      </xsl:when>
      <xsl:when test=". = VEH2">
        <xsl:text>VEH02</xsl:text>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="." />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:attribute>
</xsl:template>
</xsl:stylesheet> 
```

我希望输出看起来像：

```
<?xml version="1.0" encoding="UTF-8"?><root>
<Element1 id="VEH01">
    <Element2/>
</Element1>
<Element1 id="VEH02">
    <Element2/>
</Element1>
</root> 
```

但属性值保持不变，至少在[http://xslttest.appspot.com/](http://xslttest.appspot.com/)我不知道为什么。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:22:18.130

```
 <xsl:when test=". = VEH1">
    <xsl:text>VEH01</xsl:text>
  </xsl:when>
  <xsl:when test=". = VEH2">
    <xsl:text>VEH02</xsl:text>
  </xsl:when> 
```

您缺少文字周围的单引号`'VEH1'`和`'VEH2'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T04:20:31.187

**这个简单、简短和完整的转换不使用任何显式 XSLT 条件指令：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Element1[starts-with(@id,'VEH')]">
     <Element1 id="VEH0{substring-after(@id,'VEH')}">
      <xsl:apply-templates select="@*[not(name()='id')]|node()"/>
     </Element1>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <Element1 id="VEH1">
        <Element2 />
    </Element1>
    <Element1 id="VEH2">
        <Element2 />
    </Element1>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <Element1 id="VEH01">
      <Element2/>
   </Element1>
   <Element1 id="VEH02">
      <Element2/>
   </Element1>
</root> 
```

**说明**：

1.  **[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制已选择执行的每个节点。

2.  有一个覆盖模板匹配任何`Element1`具有`id`属性的命名元素，其字符串值以字符串“VEH”开头。

3.  该元素被重新创建为具有相同名称和`id`属性的文字结果元素，该属性具有新的所需字符串值。**[AVT](http://www.w3.org/TR/xslt#attribute-value-templates)**（属性值模板）用于使代码更短、更易读。

4.  在这个如此创建的元素的主体中，模板应用于所有非`id`属性和所有子节点——这些由身份模板匹配并“按原样”复制。

**更新**：

@wst 建议只有当这个数字是单个数字时，才应该用零填充结束数字。

这是在这种情况下工作的稍微修改的解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match=
    "Element1[starts-with(@id,'VEH')
            and string-length(@id)=4
            and floor(substring(@id,4)) = floor(substring(@id,4))
             ]">
     <Element1 id="VEH0{substring-after(@id,'VEH')}">
      <xsl:apply-templates select="@*[not(name()='id')]|node()"/>
     </Element1>
    </xsl:template>
</xsl:stylesheet> 
```

将此转换应用于此 XML 文档时：

```
<root>
    <Element1 id="VEH1">
        <Element2 />
    </Element1>
    <Element1 id="VEH2">
        <Element2 />
    </Element1>
    <Element1 id="VEH12">
        <Element3 />
    </Element1>
</root> 
```

产生了想要的，正确的（关于新添加的要求）结果：

```
<root>
   <Element1 id="VEH01">
      <Element2/>
   </Element1>
   <Element1 id="VEH02">
      <Element2/>
   </Element1>
   <Element1 id="VEH12">
      <Element3/>
   </Element1>
</root> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T21:58:50.960

有一种相当简单的方法 - 只需使用此模板：

```
<xsl:template match="@id[starts-with(.,'VEH')]">
  <xsl:attribute name="id">
    <xsl:value-of select="concat('VEH',format-number(substring(.,4),'00'))" />
  </xsl:attribute>
</xsl:template> 
```

如果需要，您可以进一步限制匹配的谓词 -`and (floor(substring(.,4)) = substring(.,4))`如果有可能在其后添加`VEH`除数字以外的任何内容，请添加。

# android - 是否有超时的 Android InputStream 类？

> ID：13979348
> 
> 赞同：1
> 
> 时间：2012-12-20T19:44:08.803
> 
> 标签：android, timeout, inputstream

我目前`InputStream`在我的应用程序中使用 ( `import java.io.InputStream`) 并且遇到了有关超时的问题。似乎工作的方式`InputStream`是它等待一定数量的位然后继续。对于我的应用程序，这在很多时候都有效，但在某些情况下，我预计读取会因超时而失败。有谁知道这样做的方法？

我发现了许多创建线程以与`read()`函数一起运行并取消它的示例，但我想知道是否有一个现有的类可以让我使用`InputStream`超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:49:40.073

我会用`AsyncTask<>`这个。您可以尝试开始异步读取流，然后在您选择的时间取消任务，而不是阻止您的 UI。文档**[在这里](http://developer.android.com/reference/android/os/AsyncTask.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:54:53.280

这在很大程度上取决于您从哪里阅读。如果它来自文件（或本地）套接字，则没有超时。如果是来自远程套接字，则可以在创建套接字时指定超时。如果超时，您应该得到一个例外。使用threads/`AsyncTask`是可行的方法，但通常不能中断阻塞的读取，除非您使用Java NIO。

不，这并不荒谬，您如何建议它“自行超时”？必须有人发出超时信号，并且有人要么是某种监视器线程，要么是操作系统引发错误。

# javascript - 将焦点放在生成的文本字段上

> ID：13979350
> 
> 赞同：0
> 
> 时间：2012-12-20T19:44:20.910
> 
> 标签：javascript, jquery, html

我有以下脚本，它在我的页面上的表单中添加了一个附加字段。我需要在生成新字段时将焦点设置为新字段，但我不确定该怎么做。

HTML：

```
<input type="button" onclick="javascript:;" id="addRow" value="Add Field" style="margin-bottom: 10px;"> 
```

Javascript：

```
var $j = jQuery.noConflict();
$j(document).ready(function(){
$j(function(){
    var rows = 1;
    $j('#addRow').click(function(){
        $j('#nameRows').append('<div class="nameRow"><input type="text" name="names['+rows+'][name]" value="" /><a href="javascript:;" class="removeRow">Remove</a>');
        rows++;
    });
    $j(document).on('click', '.removeRow', function(){
        $j(this).closest('.nameRow').remove();
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:47:17.090

```
$j('#addRow').click(function(){
    $j('#nameRows').append('<div class="nameRow"><input type="text" name="names['+rows+'][name]" value="" /><a href="javascript:;" class="removeRow">Remove</a>');
    $j("#nameRows input:last").focus();
    rows++;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T19:48:31.703

由于您正在使用`append()`这意味着附加的元素将是最后一个。所以你可以使用：

```
$j('#nameRows :input:text:enabled:visible:last').focus(); 
```

完整的点击事件绑定如下所示：

```
$j('#addRow').click(function(){
    $j('#nameRows').append('<div class="nameRow"><input type="text" name="names['+rows+'][name]" value="" /><a href="javascript:;" class="removeRow">Remove</a>');
    $j('#nameRows :input:text:enabled:visible:last').focus();
    rows++;
}); 
```

请注意，我添加了额外的选择器来排除隐藏、禁用和非文本输入元素。也`:input`比`input`作为选择器恕我直言更好。高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:48:39.957

您可以一次性追加元素并将焦点设置到新添加的元素：

```
$j('#addRow').click(function(){
    $j('#nameRows').append('<div class="nameRow"><input type="text" name="names['+rows+'][name]" value="" /><a href="javascript:;" class="removeRow">Remove</a>');
    $('#nameRows input:last').focus();
    rows++;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T19:50:12.353

只需引用新元素，并应用 focus 方法：

```
$j(document).ready(function()
{
//$j(function(){ no need for a second ready callback inside the first...
    var rows = 1;
    $j('#addRow').click(function()
    {
        $j('#nameRows').append('<div class="nameRow"><input type="text" name="names['+rows+'][name]" value="" /><a href="javascript:;" class="removeRow">Remove</a>');
        $k('#nameRows').find('input:last-child').focus();//<-----
        rows++;
    });
    $j(document).on('click', '.removeRow', function()
    {
        $j(this).closest('.nameRow').remove();
    });
}); 
```

就这样。您也可以使用`document.createElement`, 并将其分配给某处的变量，因此您也可以参考新创建的元素

# windows-store-apps - 为什么没有在 Windows 应用商店应用程序中打开 Documents 文件夹？

> ID：13979359
> 
> 赞同：0
> 
> 时间：2012-12-20T19:44:47.363
> 
> 标签：windows-store-apps, fileopenpicker

在文档文件夹下面的代码中未显示选择文件。功能已正确设置（我认为），否则将引发异常。如果我设置了一个断点，我会看到代码到达了 await 语句，但是它就坐在那里，什么也没有发生。

```
Private Async Function Button_Click_1(sender As Object, e As RoutedEventArgs) As Task
        If ApplicationView.TryUnsnap = False Then
            StatusMessage = "Cannot unsnap."
            Exit Function
        End If
        Dim filePicker As New FileOpenPicker
        filePicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary
        filePicker.ViewMode = PickerViewMode.Thumbnail
        filePicker.FileTypeFilter.Add(".pbn")
        Dim pbnFile = Await filePicker.PickSingleFileAsync
        If pbnFile IsNot Nothing Then
            StatusMessage = pbnFile.Path
        End If
 End Function 
```

编辑：上述方法中的第一行必须是：

```
If ApplicationView.Value = ApplicationViewState.Snapped AndAlso ApplicationView.TryUnsnap = False Then 
```

并且问题解决了...

XAML：

```
<Page
    x:Class="HandEditor.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:HandEditor"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Button Click="Button_Click_1">Choose .pbn file</Button>
        <TextBlock Grid.Row="1" Text="{Binding StatusMessage}"/>
    </Grid>
</Page> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:06:03.040

这是因为您[对 unsnap 的调用失败](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.ui.viewmanagement.applicationview.tryunsnap?cs-save-lang=1&cs-lang=vb#code-snippet-1)。

尝试捕捉您的应用程序，然后它将按预期工作。删除退出功能部分，它按预期工作。

# xml - 如何重命名包含特定文本字符串的文件？

> ID：13979361
> 
> 赞同：1
> 
> 时间：2012-12-20T19:44:57.540
> 
> 标签：xml, windows, vb.net, foreach, rename

我是一名新手程序员，在 VS2010 中用 VB 编写我的第一个应用程序。我正在处理一个包含多个 XML 文件的目录。我已经编写了一些将文件扩展名从 .xml 转换为 .txt 的代码，这是我的应用程序的意图，但是，我不确定如何指定执行此代码的条件。我真正想要实现的是让我的应用程序循环遍历整个目录，并仅更改那些包含特定文本字符串的 xml 文件的文件扩展名，例如其中一个 xml 节点中的“TEST FILE”。XML 模式都是相同的，文件都相对较小（每个在 2 到 5kb 之间），但在我的目标目录中有数千个。关于如何实现这一点的任何提示/建议？这是我到目前为止的代码。谢谢！

```
 Dim [option] As SearchOption = SearchOption.AllDirectories
    [option] = SearchOption.AllDirectories
    Dim files As String()
    files = Directory.GetFiles("U:\Primitive_XMLs", "*.xml", [option])
    Dim filepath_new As String
    For Each filepath As String In files

        filepath_new = filepath.Replace(".xml", ".txt")
        System.IO.File.Move(filepath, filepath_new)
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:09:22.043

如果文件确实很小，并且您不需要指定某个节点（例如，文件中任何位置存在的字符串足以保证移动它），您可以尝试以下操作

```
 Dim mustContain As String = "TEST FILE"
    Dim files As String() = IO.Directory.GetFiles("U:\Primitive_XMLs", "*.xml", IO.SearchOption.AllDirectories)
    For Each filepath As String In files
        If IO.File.ReadAllText(filepath).Contains(mustContain) Then
            IO.File.Move(filepath, filepath.Replace(".xml", ".txt"))
        End If
    Next 
```

如果您确实需要指定可以找到此字符串的位置（例如，仅在第 3 个节点包含它时才移动文件），那么您将需要使用 xmlreader 类之类的东西来解析文件

# ruby-on-rails-3 - Rails 3路由中一组相关路径的301重定向

> ID：13979363
> 
> 赞同：6
> 
> 时间：2012-12-20T19:45:00.533
> 
> 标签：ruby-on-rails-3, url-routing

我想设置以开头的每个路径的永久重定向到以开头`/articles`的类似路径`/blog`。

我知道如何在路由中单独重定向路径，例如

`match "/articles/" => redirect("/blog/")`

但是，如果我还想重定向诸如等等之类的路径，我也需要对这些路径`/articles/:id`进行`/articles/category/:id`显式重定向。

我希望有一种方法可以一举重定向所有这些路径，无论是现在还是未来。

我意识到我可以在控制器中使用 a 相对容易地做到这一点`before_filter`，但我相信这种行为属于路线，我希望将其保留在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:34:36.583

```
match '/articles(/*path)' => redirect { |params, req| "/blog/#{params[:path]}" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:05:01.520

**编辑**

*问题是用参数捕获路由，现在应该解决了*

按照rails guides，这样做的方法应该是：

```
match "/articles(/:action(/:id(.:format)))" => redirect {|p, req| "/blog/#{req.subdomain}" } 
```

[从重定向](http://guides.rubyonrails.org/routing.html#redirection)中提取

我希望这可以帮助你！

# objective-c - 如何在 CCSprite 或 CCNode、Cocos2d 中更新 gamehud

> ID：13979364
> 
> 赞同：1
> 
> 时间：2012-12-20T19:45:06.450
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone, ccsprite

我有一个`Gamehud`我想显示对象名称的地方。主场景中有很多对象/精灵我想做的是在`Gamehud`.

问题是如果我`Gamehud`在`CCsprite`类中分配它会创建新实例并且不会更新 current `Gamehud`。如果我使用什么`GameHUD *gamehud= (GameHUD *)[self.parent getChildByTag:99];`都没有发生的事情，我无法将对象发送到 GameHud 类。

那么在`ccsprite or ccnode`课堂上更新游戏界面的正确方法是什么？

主要场景；

```
-(id) init
{
    if ((self = [super init]))
    {            
        gameHud = [GameHUD gamehud];
        [self addChild:gameHud z:2 tag:99];
    }
} 
```

我的游戏界面

```
+(id) gamehud
{
    return [[self alloc] init];
}

-(id) init
{
    if ((self = [super init]))
    {
        //bunch of labels
    }
}

-(void)showName: :(Object *)obj
{
    NSLog(@"Object name is %@", obj.name);
    [_labelSpeed setString:obj.name];
} 
```

在对象类中：CCSprite

```
-(void) onTouch
{
    //obj is the object with name property that I want to use
    GameHUD *gamehud=  (GameHUD *)[self.parent getChildByTag:99]; // does not send the obj to gamehud and showName is not called
    //GameHud *gamehud= [GameHud alloc] init]; // this displays nslog but doesnt update _label
    [gamehud showName:obj];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:47:44.950

首先使用单例，否则每次调用都会创建一个新的 GameHub `+(id) gamehud`。我认为这可能是您的问题：您将一个 GameHUD 添加到场景中并调用另一个 GameHUD 对象的 showName:。另一个问题是你的`-(id)init`- 你不回来`self`！所以你永远不会得到你的 GameHUD

```
static GameHUD *sharedInstance = nil;
+(id) gamehud {
    if( !sharedInstance ) {
        sharedInstance = [[GameHUD alloc] init]
    }
    return sharedInstance;
}

-(id) init {
    self = [super init];
    if ( self ) {
       //bunch of labels

       sharedInstance = self; 
    }
    return self; //i dont see this in your code!
} 
```

从现在开始，您可以从您想要的每个点访问您的 hud，而无需处理标签。小心，这不是创建单例的最佳方式（问谷歌）。不要调用 ..alloc] init] 仅使用`[GameHUD gamehud];`

```
-(void) onTouch {
    [[GameHUD gamehud] showName:obj];
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:49:44.663

您可能需要创建一个单例或类似半单例的东西。只需将新的 nsobject 类名称“SingletonGameHud”添加到您的应用程序

SingletonGameHud.h

```
#import <Foundation/Foundation.h>
#import "GameHUD.h"

//create singleton class to use gamehud in movingobject class
@interface SingletonGameHud : NSObject
{
    GameHUD *gamingHud;

}

@property(nonatomic,strong) GameHUD *gamingHud;

+(SingletonGameHud *)sharedInstance;

@end 
```

SingletonGameHud.m

```
#import "SingletonGameHud.h"
#import "GameHUD.h"

@implementation SingletonGameHud

@synthesize gamingHud=_gamingHud;

+ (SingletonGameHud *)sharedInstance
{
    static SingletonGameHud *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[SingletonGameHud alloc] init];
        // Do any other initialisation stuff here
    });
    return sharedInstance;
}

- (id)init {
    if (self = [super init]) {
        _gamingHud = [GameHUD hud];

    }
    return self;
}

@end 
```

在你的游戏场景调用中

```
SingletonGameHud *sharedInstance= [SingletonGameHud sharedInstance];
hud = sharedInstance.gamingHud;
[self addChild:hud z:2 tag:99]; 
```

在您的触摸方法调用中

```
-(void) onTouch
{
    SingletonGameHud *sharedInstance= [SingletonGameHud sharedInstance];
    [sharedInstance.gamingHud showName:obj];

} 
```

# java - 使用 Apache-POI 读取一定数量的列

> ID：13979365
> 
> 赞同：2
> 
> 时间：2012-12-20T19:45:12.167
> 
> 标签：java, apache-poi

这是我正在做的事情的要点。

我正在创建一个 ExcelProcessor 对象，然后该对象将获取我在构造函数中指定的文件。在此之后，我检索书籍、行，然后是行中的单元格。第一行具有每列保存数据的名称。不幸的是，如果任何单元格连续为空白，它就会立即停止处理。有没有办法说在每行中读取 X 列？

谢谢！

```
public class ExcelProcessor
{
    private static File xslFile;

    ExcelProcessor( String file )
    {
        xslFile = new File(file);
    }

    /**
     * creates an {@link HSSFWorkbook} the specified OS filename.
     */

    /**
     * Returns an XSSF Workbook object that can be queried. 
     * 
     * This method either returns a Workbook with the specified
     * file location or it will throw an IO Error.
     *
     * @return      the Excel Workbook 
     * @see         XSSFWB
     */

    private XSSFWorkbook readFile() throws IOException
    {
        return new XSSFWorkbook(new FileInputStream(xslFile));
    }

    /**
     * Returns all rows of the XSSF Workbook that is read in via the file system.
     * 
     * This method returns a XSSFRow array for processing
     *
     * @param   wb  the Excel workbook located on the file system
     * @return      Rows contained within the Excel Workbook
     * @see         XSSFRows
     */

    private XSSFRow[] retrieveRows(XSSFWorkbook wb)
    {
        XSSFSheet xslSheet = wb.getSheetAt(0);
        XSSFRow[] sheetRows = new XSSFRow[xslSheet.getLastRowNum()];

        for (int i = 0; i < xslSheet.getLastRowNum(); i++)
        {
            sheetRows[i] = xslSheet.getRow(i);
        }

        return sheetRows;
    }

    private XSSFWorkbook modifyRows(XSSFWorkbook wb)
    {
        return wb;
    }

    /**
     * Processes all rows of the XSSF Workbook that is read in via the file system.
     * Each Cell is pulled from the rows to create a structure needed for WQS 
     * Web Services.
     * 
     * This method returns a String array for all Cells pulled from the Rows
     *
     * @param   xslRow  Current row pulled from the XSL Workbook
     * @return      String Array of all Row Cell Values
     * @see         String[]
     */

    public String[] processRow(XSSFRow xslRow)
    {
        int totalCells = xslRow.getPhysicalNumberOfCells();
        System.out.println("Total Cells: " + totalCells);
        String[] cellValues = new String[totalCells];

        for (int i = 0; i < totalCells; i++)
        {
            XSSFCell currentCell = xslRow.getCell(i);
            String cellVal;
            try
            {
                cellVal = currentCell.getStringCellValue();
            }
            catch (Exception e)
            {
                System.out.println("Empty Cell");
                cellVal = "";
            }
            cellValues[i] = cellVal;
            System.out.println(cellVal);
        }

        return cellValues;
    }

    /**
     * Main method which creates an ExcelProcessor before handling the Excel
     * Spreadsheet given to the user.
     * 
     * @param args
     * @throws ParserConfigurationException
     * @throws SAXException
     */

    public static void main(String args[]) throws ParserConfigurationException, SAXException
    {
        ExcelProcessor driver = new ExcelProcessor("D:\\TestBook.xlsx");

        try
        {
            XSSFWorkbook xslWB = driver.readFile();
            XSSFRow[] xslRows = driver.retrieveRows(xslWB);
            ArrayList<String[]> rowCellVals = new ArrayList<String[]>();

            for (int r = 0; r < xslRows.length; r++)
            {
                rowCellVals.add(driver.processRow(xslRows[r]));
            }

            String sessionKey = WQSServices.sessionToken();
            System.out.println("Have the Session Key: " + sessionKey);
            WQSServices.uploadAttachment(sessionKey, rowCellVals);

        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:10:33.963

改用[getLastCellNum](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRow.html#getLastCellNum%28%29)，`getPhysicalNumberOfCells`返回单元格数（不计算空单元格）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:44:34.543

首先，您不应该只是盲目地尝试将字符串读取为单元格并捕获异常。相反，您应该检查它是否在文件中定义（它是否为空？），并检查它的类型。您的工作表很可能包含数字，并且它们不会存储为字符串，因此您当前的代码将跳过它们！

作为初学者，我建议您通读 POI 快速指南的[迭代行和单元格](http://poi.apache.org/spreadsheet/quick-guide.html#Iterator)和[读取单元格内容](http://poi.apache.org/spreadsheet/quick-guide.html#CellContents)部分。然后，将您的代码更改为更像：

```
// Decide which rows to process
int rowStart = Math.min(15, sheet.getFirstRowNum());
int rowEnd = Math.max(1400, sheet.getLastRowNum());

for (int rowNum = rowStart; rowNum < rowEnd; rowNum++) {
   Row r = sheet.getRow(rowNum);

   int lastColumn = Math.max(r.getLastCellNum(), MY_MINIMUM_COLUMN_COUNT);

   for (int cn = 0; cn < lastColumn; cn++) {
      Cell c = r.getCell(cn, Row.RETURN_BLANK_AS_NULL);
      if (c == null) {
         // The spreadsheet is empty in this cell
      } else {
         // Do something useful with the cell's contents
         switch (cell.getCellType()) {
            case Cell.CELL_TYPE_STRING:
                System.out.println(cell.getRichStringCellValue().getString());
                break;
            case Cell.CELL_TYPE_NUMERIC:
                if (DateUtil.isCellDateFormatted(cell)) {
                    System.out.println(cell.getDateCellValue());
                } else {
                    System.out.println(cell.getNumericCellValue());
                }
                break;
            case Cell.CELL_TYPE_BOOLEAN:
                System.out.println(cell.getBooleanCellValue());
                break;
            case Cell.CELL_TYPE_FORMULA:
                System.out.println(cell.getCellFormula());
                break;
         }     
      }
   }
} 
```

# c - 为什么我在链表中 收到关于 char 数组的错误？

> ID：13979368
> 
> 赞同：1
> 
> 时间：2012-12-20T19:45:17.920
> 
> 标签：c, struct, linked-list

只是想把我的头绕在链表上。我收到一个错误“分配给类型 char[50] 时的类型不兼容”以及“字符串常量太长”最后一个结构中的类型参数“->”无效。我需要解决什么问题？

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>
struct trainset {
    char name[50];
    int price;
    struct trainset *next;
};

void show_list(struct trainset *list);

int main (void){

    struct trainset *root;
    root = (struct trainset *)malloc(sizeof(struct trainset));      
    strncpy(root ->name, " ", 50);
    root ->price = 0;
    root ->next = 0;

    struct trainset *first_train;
    first_train = (struct trainset *) malloc(sizeof(struct trainset)); 
    root ->next = first_train;
    strncpy(first_train->name, "Fantasy Train Set", 50);
    first_train->price = 129;
    first_train->next = NULL;

    struct trainset *second_train;
    second_train = (struct trainset *)malloc(sizeof(struct trainset));
    first_train->next = second_train;
    strncpy(first_train->name, "Uncle Bobs train set", 50);
    second_train ->price = 69;
    second_train ->next = NULL;

    struct trainset *third_train;
    third_train = (struct trainset *)malloc(sizeof(struct trainset));
    second_train->next = third_train;
    strncpy(third_train ->name, "Budha Bread Train", 50);
    third_train ->price = 169;
    third_train ->next = NULL;

    show_list(first_train);
    return 0;
}

void show_list(struct trainset *list)
{
    while(list->next!=NULL)
    {
        printf("train set name: %s, Train price: %d\n", list->name, list->price);
        list = list->next;
    }
    printf("train set name: %s, train price: %d", list->name, list->price);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:47:04.277

你不能只*分配*给一个数组，你必须复制它们的元素。此外，c-strings 用双引号指定`"`。

您将需要这样的东西：

```
strcpy( first_train->name, "Fantasy Train Set" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:20:39.253

这里有很多问题...

1）您的价格变量`int price;`是“int”类型。表示数字整数（无小数点）。然而，当你分配给它时，你会这样做：

```
first_train->price = 129.99; // <-- wrong, the .99 isn't going to work there 
```

和这个：

```
second_train ->price = '69.99'; // <-- wrong... just.. wrong. 
```

如果您希望它们是带有小数部分的数值，则需要使用双精度或浮点数，或者如果您不对它们进行数学运算，则必须使用字符串

2）第二个问题是你试图对字符串使用单引号。`'`用于单个字符，如`'a'`，双引号`"`用于字符串，如`"an apple"`

因此，如果您希望价格是一个字符串，您需要“69.99”，并且您的名字应该是相同的“Uncle Bobs train set”

3）这不是你分配字符串的方式：

```
third_train ->name = 'Budha Bread Train'; 
```

您需要使用`strcpy()`or`memcpy()`或函数将数据复制到字符串中。

4）您的列表没有“链接”。您需要将“下一个”指向列表中的下一项，现在您只有四个独立的结构。如果您将内存中的结构想象为“块”，则如下所示：

![在此处输入图像描述](../Images/36db90f6ed8b99a5126f53afa80e1af0.png)

因此，您可以使用您拥有的代码生成它。`first_train->price`您有三个独立的结构，例如，您可以访问它们。但他们就是这样。三个未链接的结构。“链接”部分与那些下一个指针一起出现。您需要将每个 next 指针“指向”下一个节点，如下所示：

```
root->next = first_train;
first_train->next = second_train; 
```

通过这样做，你正在“连接”结构，你可以这样想：

![在此处输入图像描述](../Images/aad6587048e1f758b70c8515b63222e6.png)

如果它们像这样链接，如果我只有一个节点（根），我可以访问任何人的数据：

```
root->next->price; //that's first_train's price 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:47:08.467

字符串文字用`"`C 中的字符而不是字符括起来`'`。您不能分配字符串，但可以复制字符串。使用`strcpy`或`strncpy`从`string.h`复制字符串。

# c++ - Win32 API ListView 创建 (C++)

> ID：13979371
> 
> 赞同：2
> 
> 时间：2012-12-20T19:45:21.563
> 
> 标签：c++, winapi, mingw, win32gui

我想在 C++ 中创建一个 ListView。到目前为止我的代码：

```
InitCommonControls(); // Force the common controls DLL to be loaded.
HWND list;

// window is a handle to my window that is already created.
list = CreateWindowEx(0, (LPCSTR) WC_LISTVIEWW, NULL, WS_VISIBLE | WS_CHILD | WS_BORDER | LVS_SHOWSELALWAYS | LVS_REPORT, 0, 0, 250, 400, window, NULL, NULL, NULL);

LVCOLUMN lvc; 
lvc.mask = LVCF_FMT | LVCF_WIDTH | LVCF_TEXT | LVCF_SUBITEM;
lvc.iSubItem = 0;
lvc.pszText = "Title";
lvc.cx = 50;
lvc.fmt = LVCFMT_LEFT;
ListView_InsertColumn(list, 0, &lvc); 
```

但是如果我编译并执行代码，只会显示一个空白窗口。编译器：Windows 7 (x86) 上的 MinGW。

任何人都可以帮我正确显示列表视图吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T20:18:02.407

[这是使用 Windows API 和 C 编写的ListView 控件](http://csdata.iblogger.org/programming/CodeSamples/)的原始 MSDN 示例代码的链接。它在 VC++ 2010 中编译。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T21:00:50.650

`WC_LISTVIEWW`（注意最后的额外 W ）是 a `wchar_t*`，但您将其类型转换为 a `char*`。`UNICODE`只有在未定义时才会编译，使通用`CreateWindowEx()`映射为`CreateWindowExA()`. 这意味着您正在尝试使用 Ansi 版本的`CreateWindowEx()`. 那不管用。

您需要：

1.  使用泛型`WC_LISTVIEW`，使其匹配泛型`CreateWindowEx`()，并摆脱类型转换：

    ```
    list = CreateWindowEx(..., WC_LISTVIEW, ...); 
    ```

2.  继续使用`WC_LISTVIEWW`，但`CreateWindowExW()`改为调用：

    ```
    list = CreateWindowExW(..., WC_LISTVIEWW, ...); 
    ```

# java - 如何从 PersistentSet 中获取可能为空的元素类型

> ID：13979372
> 
> 赞同：1
> 
> 时间：2012-12-20T19:45:27.267
> 
> 标签：java, grails, groovy

好吧，这个问题自己解释了，这就是我尝试做的方式。我认为问题可能在于 Set 为空，并且这些方法至少需要一个元素才能返回该类。

意见/产品/_form.gsp

```
<% cl = UnidadProductiva.get(params.unidadProductiva?.id).producto %>
<p>${cl}</p> 
```

返回 []

如果我在 producto 之后添加此方法/属性：

**.getCandidateClass() ：**没有方法签名：
org.hibernate.collection.PersistentSet.getCandidateClass() 适用于参数类型：() 值：[]

**.class :**
类 org.hibernate.collection.PersistentSet

**.getElementType() ：**没有方法签名：
org.hibernate.collection.PersistentSet.getElementType() 适用于参数类型：() 值：[] 可能的解决方案：getElement(java.lang.Object)

**。特性 ：**

```
{
    clearQueueEnabled=true,
    session=SessionImpl(PersistenceContext[
        entityKeys=[
            EntityKey[
                planificador.UnidadProductiva#1
            ]
        ],
        collectionKeys=[
            CollectionKey[
                unidadesProductivas.Cocimiento.producto#1
            ],
            CollectionKey[
                planificador.UnidadProductiva.grupoRecursos#1
            ],
            CollectionKey[
                planificador.UnidadProductiva.lineaProduccion#1
            ]
        ]
    ];ActionQueue[
        insertions=[

        ]updates=[

        ]deletions=[

        ]collectionCreations=[

        ]collectionRemovals=[

        ]collectionUpdates=[

        ]
    ]),
    unreferenced=false,
    role=unidadesProductivas.Cocimiento.producto,
    directlyAccessible=false,
    empty=true,
    storedSnapshot={

    },
    operationQueueEnabled=false,
    value=[

    ],
    owner=unidadesProductivas.Cocimiento: 1,
    cachedSize=-1,
    class=classorg.hibernate.collection.PersistentSet,
    rowUpdatePossible=false,
    snapshot={

    },
    key=1,
    putQueueEnabled=false,
    dirty=false
} 
```

我期待返回**CaldoMadre的方法或属性**

这是我正在使用的课程

```
class UnidadProductiva {...}

class Cocimiento extends UnidadProductiva {
    static hasMany = [producto:CaldoMadre];
}

class Producto {
    static belongsTo = [unidadProductiva:UnidadProductiva]
}

class CaldoMadre extends Producto {...} 
```

我是一个智利菜鸟，如果我不明白，请耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:52:35.190

我能够让它在 a但`Cocimiento` 不是 a上工作，`UnidadProductiva`因为. 在 gsp 中使用有点尴尬，但也许你可以在控制器中执行它并将其传递出去：`producto``UnidadProductiva`

```
//in controller
import java.lang.reflect.*

//in show action or whichever makes sense
Field field = Cocimiento.class.getDeclaredField("producto");
ParameterizedType pt = (ParameterizedType) field.getGenericType();
Type concreteType = pt.getActualTypeArguments()[0];
println concreteType.getName() 
```

`com.CaldoMadre`将使用我的包设置打印出来。

它不依赖于`Set`

# selenium-webdriver - 无法通过 id 定位元素 - 错误

> ID：13979373
> 
> 赞同：0
> 
> 时间：2012-12-20T19:45:28.420
> 
> 标签：selenium-webdriver

我正在使用 selenium webdriver 单击两个复选框。

我使用 Xpath 和 ID 来单击。但我得到这个错误：`Unable to locate element`

```
table id="checkboxfield-1321" class="x-field x-form-item x-field-default x-anchor-form-item" cellpadding="0" style="table-layout: auto;"

table id="checkboxfield-1322" class="x-field x-form-item x-field-default x-anchor-form-item" cellpadding="0" style="table-layout: auto;" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T10:33:40.750

css=table.x-anchor-form-item:nth-of-type(1) input -- 复选框 1 的 CSS 选择器

css=table.x-anchor-form-item:nth-of-type(2) 输入 -- 复选框 2 的 CSS 选择器

请让我知道上述 CSS 选择器是否正常工作。

# java - 设计具有可变条目到期时间的 Guava LoadingCache

> ID：13979376
> 
> 赞同：31
> 
> 时间：2012-12-20T19:45:41.350
> 
> 标签：java, multithreading, guava

我在我的项目中使用 Guava 的 LoadingCache 来处理线程{安全，友好}缓存加载，它工作得非常好。但是，有一个限制。

当前定义缓存的代码如下所示：

```
cache = CacheBuilder.newBuilder().maximumSize(100L).build(new CacheLoader<K, V>()
{
    // load() method implemented here
} 
```

我没有指定到期时间。

问题是根据键的值，一些关联的值可能会过期，而其他的可能不会。并且`CacheLoader`不考虑这一点，如果您指定到期时间，则它适用于每个条目。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-12-16T01:42:55.713

另一种选择是[ExpiringMap](https://github.com/jhalterman/expiringmap)，它支持变量条目过期：

```
Map<String, String> map = ExpiringMap.builder().variableExpiration().build();
map.put("foo", "bar", ExpirationPolicy.ACCESSED, 5, TimeUnit.MINUTES);
map.put("baz", "pez", ExpirationPolicy.CREATED, 10, TimeUnit.MINUTES); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-20T20:15:59.043

我建议您将过期时间直接包含在您的条目类中，如果它在您从缓存中获取后立即过期，则手动将其从缓存中逐出：

```
MyItem item = cache.getIfPresent(key);
if (item != null && item.isExpired()) {
    cache.invalidate(key);
    item = cache.get(key);
    // or use cache.put if you load it externally
} 
```

作为替代方案，我建议您检查支持每个元素过期策略的 EhCache 库。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-14T01:23:12.930

`LoadingCache`提供了一些常用的过期策略，但当这些策略无法满足您的需求时，您需要自行推出。

只需添加一个[DelayQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/DelayQueue.html)。每当您将某些内容添加到缓存中时，`Delayed`请在该队列中添加一个并具有适当的到期时间。该`Delayed`对象应该有一个（弱？）对键的引用。

最后一个要素是您需要定期轮询此队列，以查看是否有某些内容过期并且必须被驱逐。不一定要添加线程来执行此操作，您可以捎带任何正在访问`LoadingCache`. 就在访问缓存之前，例如：

```
private void drainCache() {
  MyDelayed expired;
  while ((expired = delayedQueue.poll()) != null) {
    K key = expired.getReference();
    if (key != null) { // this only in case if you hold the key in a weak reference
      loadingCache.invalidate(key);
    }
  }
}

..
V lookup(K key) {
  drainCache();
  return loadingCache.getUnchecked(key);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:04:20.733

我想您可以使用显式无效来准确定义应该驱逐哪些条目，但这可能不是您想要的。

不过，您可以为条目赋予不同的权重。它并不完美，但您可以引导缓存驱逐不太重要的条目。参见[Weighter](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html#weigher%28com.google.common.cache.Weigher%29)，权重为 0 的条目不会被基于大小的驱逐驱逐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T21:24:26.283

**如果条目很大并且您需要节省内存**，我认为没有一个很好的解决方案，但请记住这些黑客：

*   使用`PriorityQueue`按到期时间排序的手动删除条目。如果你想确保没有过期的条目被使用，你需要将它与 hoaz 的解决方案结合起来；队列只防止无用的条目占用内存。

*   您写了“一些关联的值可能会过期，而其他的可能不会”，这表明所有过期条目的过期延迟都是相同的。这将允许使用更简单和更快的`Queue`（例如`ArrayDeque`，而不是`PriorityQueue`）。

*   如果过期延迟相当大，您可以让所有条目过期并重新插入那些应该永远存在的`RemovalListener`. 这可能会以两种方式失败： 1\. 在此期间您可能会错过。2\. 删除和重新插入可能会花费大量 CPU 时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-05T08:24:43.610

提到的咖啡因库提供了这个功能。你只需要提供你自己的 Expiry 实现。到期时间可能取决于键、值或您决定的任何内容，例如：

```
 .expireAfter(new Expiry<CacheKey, CacheValue>() {
                        @Override
                        public long expireAfterCreate(@NonNull CacheKey key, @NonNull CacheValue value, long currentTime) {
                            return calculateBasedOnKey(key);
                        }
                        @Override
                        public long expireAfterUpdate(@NonNull CacheKey key, @NonNull CacheValue value, long currentTime, @NonNegative long currentDuration) {
                            return calculateBasedOnValue(value);
                        }    
                        @Override
                        public long expireAfterRead(@NonNull CacheKey key, @NonNull Long CacheValue, long currentTime, @NonNegative long currentDuration) {
                            return currentDuration; //not modifying the expiration time
                        } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-04-09T04:59:30.350

您可以使用受 Guava 启发的咖啡因库。这是来自 github repo 的示例用法

```
LoadingCache<Key, Graph> graphs = Caffeine.newBuilder()
    .expireAfterAccess(5, TimeUnit.MINUTES)

LoadingCache<Key, Graph> graphs = Caffeine.newBuilder()
    .expireAfterCreate(5, TimeUnit.MINUTES) 
```

[https://github.com/ben-manes/caffeine](https://github.com/ben-manes/caffeine)

# spring-mvc - spring mvc RequestMapping和重定向到视图

> ID：13979382
> 
> 赞同：0
> 
> 时间：2012-12-20T19:46:08.280
> 
> 标签：spring-mvc, controller

我在 MyController 中有一个代码

```
 @RequestMapping("/hello.jsp")
    public void handleRequest() {
        System.out.println("hello.jsp");
        logger.info("Returning hello view");
    }

    @RequestMapping("/hello2")
    public ModelAndView hello2() {
        System.out.println("123");
        String message = "Hello World, Spring 3.0!";
        return new ModelAndView("hello2", "message", message);
    } 
```

在 dispatcher-servlet.xml 我有：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">       
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

最后我有：

```
~8080/hello2.htm - OK
~8080/hello.htm  - NOT OK, aloso I tried: hello.jsp, hello; moved hello.jsp to /WEB-INF/jsp/ and to/WEB-INF/ - no effect 

1.hello2() is working well, and redirecting to the hello2.jsp
2.hello() is NOT working, and NOT redirecting 
```

在将“viewResolver”放入 dispatcher-servlet.xml 之前，我有相反的行为 - hello() 正在工作 hello2() 不是。[但后来我的所有 jps 都在 WEB-INF 文件夹中]

是什么原因？

我的 web.xml 包括：

```
 <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:18:43.690

我认为这是因为您正在返回 `void`而不是视图名称。

```
@RequestMapping("/hello")
public String handleRequest() {
    System.out.println("hello.jsp");
    logger.info("Returning hello view");
    return("hello");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:41:06.237

这是因为 '/hello.jsp' - 它试图找到 '/hello.jsp.jsp'，因为我定义了 'viewResolver' 为：后缀“value=".jsp”。

之前：没有'viewResolver'，我猜它的行为是一些默认逻辑。

# android - 如何调试onDestroy（），Android系统在调试器中暂停时杀死应用程序

> ID：13979385
> 
> 赞同：5
> 
> 时间：2012-12-20T19:46:13.613
> 
> 标签：android, debugging

我有一个错误，我试图分析在点击后退按钮后调用 Activity 的 onDestroy() 方法时发生的错误。我在有问题的代码中放置了断点（使用 Eclipse）。调试器会在断点处暂停应用程序，但 Android 系统也会将应用程序移出屏幕并返回到手机的主屏幕。应用程序暂停大约 10 秒后，应用程序的线程似乎被 Android 系统破坏，因为调试器突然断开连接。

关于如何防止Android系统这样做的任何想法？我需要保持应用程序处于活动状态，以便我可以进入调试器、查看变量等。

手机运行的是 Android 2.3.5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T18:25:11.177

我发现的一种解决方法是`startActivity()`调用`onDestroy()`(before `super.onDestroy()`) 来启动 Activity 的虚拟实例，以保持应用程序处于活动状态。Android 系统不会对应用线程进行垃圾回收，因为其中仍有一个 Activity 正在运行（新的虚拟 Activity）。这反过来又允许您调试事物，因为调试器与线程的连接不会丢失。

如果手机弹出一个对话框说应用程序没有响应（强制关闭或等待），不要点击等待，不要理会它。似乎单击 Wait 会导致应用程序线程被杀死，并为虚拟 Activity 创建了一个新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:01:19.160

您可以尝试在 上设置断点`super.onDestroy()`，但我怀疑您也会有同样的运气。:(

Android不会让你逗留`onDestroy`，它会超时，所以试着更快地完成你的关机。`onDestroy()`仅用于释放资源，并不总是在终止前调用；数据应保存在`onPause()`or中`onStop()`。 [https://developer.android.com/training/basics/activity-lifecycle/stopping.html](https://developer.android.com/training/basics/activity-lifecycle/stopping.html)

附录：其他选项包括为某些工作使用后台服务或手动处理后退按钮以给自己更多时间，但这可能会对用户体验产生负面影响。

[http://www.stanford.edu/class/cs193a/03/](http://www.stanford.edu/class/cs193a/03/)

*从我的手机发送，请放松我的拇指。*

# visual-studio - 部署到 EC2 实例时如何自动设置文件夹权限？

> ID：13979388
> 
> 赞同：1
> 
> 时间：2012-12-20T19:46:17.777
> 
> 标签：visual-studio, iis, amazon-web-services

部署时，我目前必须将桌面远程连接到我的 EC2 实例中，并通过 IIS 管理器更改文件夹的权限。

通过使用 AWS 重新发布到堆栈的 Visual Studio 进行部署时，是否可以设置这些权限？

# algorithm - 编辑距离说明

> ID：13979390
> 
> 赞同：4
> 
> 时间：2012-12-20T19:46:26.063
> 
> 标签：algorithm, edit-distance

我看过很多代码来解决这个问题，但我不明白为什么他们使用矩阵来表示两个单词之间的距离。谁能给我解释一下？

这是我找到的示例代码：

```
public static int minDistance(String word1, String word2)
{
    int l1 = word1.length(), l2 = word2.length();

    int[][] d = new int[l1 + 1][l2 + 1];

    // the edit distance between an empty string and the prefixes of
    // word2
    for (int i = 0; i < l2 + 1; i++) {
        d[0][i] = i;
    }

    // the edit distance between an empty string and the prefixes of
    // word1
    for (int j = 0; j < l1 + 1; j++) {
        d[j][0] = j;
    }

    for (int i = 1; i < l1 + 1; i++) {
        for (int j = 1; j < l2 + 1; j++) {
            if (word1.charAt(i - 1) == word2.charAt(j - 1)) {
                d[i][j] = d[i - 1][j - 1];
            } else {
                d[i][j] = min(1 + d[i][j - 1], 1 + d[i - 1][j],
                1 + d[i - 1][j - 1]); // min of insertion,
                // deletion, replacement
            }
        }
    }

    return d[l1][l2];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T21:46:08.657

您的代码正在使用[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)计算[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)。

该数组`d`最终将包含各种子问题的解决方案，其中`d[i][j]`是第`i`一个单词的第一个`j`字母和第二个单词的第一个字母之间的距离。`d[i][j]`和 条目之间存在关系`d[i-1][j]`，`d[i][j-1]`和`d[i-1][j-1]`。该算法以已经计算出所需子问题的方式计算表的条目（这是动态编程部分）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T21:37:12.683

该矩阵包含 [在末尾] 的所有前缀`word1`和 的所有前缀之间的编辑距离`word2`。

```
d[i][j] = edit distance between word1[0..(i-1)] and word2[0..(j-1)] 
```

您对`d[l1][l2]`. 一般来说，要计算`d[i][j]`，您需要查看三个较小的邻居`d[i-1][j]`和。因此，传递性要求所有条目，其中至少一个坐标小于resp （而另一个不大于）。例外情况是两个字符和相等，在这种情况下，您只需要对角线较小的邻居。`d[i-1][j-1]``d[i][j-1]``d[i][j]``i``j``word1[i-1]``word2[j-1]`

如果您首先用 填充矩阵以`-1`指示尚未评估前缀之间的相应编辑距离，然后递归地计算矩阵的区域可能保持不变。如果有很多对相等的字符，则可能是大区域[如果两个单词相等，则仅评估对角线]，如果有少量相等字符对，则只有小区域。`d[l1][l2]``d[i][j]`

在一般情况下，计算 需要大部分矩阵`d[l1][l2]`，因此使用简单算法完全计算矩阵比递归并仅计算实际需要的值要快。

如果您不存储较短前缀的值，因为它们需要传递到 compute ，因此必须为从 到达`d[i][j]`的每种方式重新计算它们。由于可以通过多种方式从 到达，这将导致**大量**重新计算，从而导致算法效率极低。`d[i-a][j-b]``d[i][j]``d[i-a][j-b]``d[i][j]`

 **由于每一行的计算只使用前一行，你可以只使用两个长度数组`min{l1, l2} + 1`来节省一些内存，但除非单词真的很长，否则差别不大，而且代码更简单全阵列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-22T16:24:21.410

代码可能难以理解，但这里有一些提示：

1.  两个字符串中任意一对字符之间的编辑距离至少是之前比较过的所有字符对的编辑距离。例如，在比较两个字符串**abc**和**ade**时，当您到达比较**c**和**e**的阶段时，您确定两个字符串的编辑距离至少是迄今为止找到的最小编辑距离（在这种情况下为 1）

2.  如果比较的两个字符不相等，则编辑距离将增加一，表示替换。所以如果你在比较之前知道字符串的编辑距离，你可以根据字符是否相等给它加1。

有了这两个事实，

position[i, j] 是考虑的编辑距离

如果第 i 行元素不存在，则 position[i-1,j] 将是到目前为止字符串的总编辑距离（表示插入成本）

如果第 j 列元素被删除，位置 [i,j-1] 将是到目前为止字符串的总编辑距离（表示删除成本）

position[ii,j-1] 将是迄今为止为所有先前元素计算的最小编辑距离

position[i,j] 然后通过取所有三种可能性中的最小值并添加当前决策来计算。**

# php - 无法使用 Facybox 图库打开照片

> ID：13979392
> 
> 赞同：-2
> 
> 时间：2012-12-20T19:46:34.520
> 
> 标签：php, mysql, image, fancybox, rel

我下载了一个名为 facybox 的 javascript 库窗口：http: [//bitbonsai.com/facybox/](http://bitbonsai.com/facybox/)

我已经按照教程进行操作，现在我正试图让我的照片在此打开，但图像只是在新窗口中打开。

有人可以纠正我哪里出错了吗？我怀疑我在某处缺少一个指向 facybox 目录的重要组件，但我尝试了几件事，但没有运气。

```
<?php
$get_photos_set = get_photos();
while ($photos = mysql_fetch_array($get_photos_set)) {
    if(!isset($get_photos_set) || $get_photos_set===false)

    echo "No Results";

    else

    if (logged_in()) {

echo
"<li><a href=\"data/photos/{$photos['user_id']}/{$photos['file_name']}\" rel=\"assets/js/photo_box/facybox.js\"><img src=\"data/photos/{$photos['user_id']}/thumb_{$photos['file_name']}\" alt=\"{$profile[2]}'s Photos\"  /></a></li>";
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:03:26.303

根据我从您的示例中收集到的信息，您可能甚至没有有效的 html 页面。我建议打开 facybox 附带的“index.html”文件并检查它是如何工作的，它的工作要求是什么等。或者尝试删除上面的东西，直到你找到 1 个工作示例。

从他们的 wiki 中，您需要将 jquery 作为依赖项之一加载，这将转到您页面的部分。

```
<!-- This gets the latest jQ 1.x from google, minified and gziped -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<link href="facybox.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="facybox_urls.css" media="screen" rel="stylesheet" type="text/css"/>
<script src="facybox.js" type="text/javascript"></script> 
```

同样要使用它，您的链接应该有点类似于这个

```
<a href="http://th..yxmouse.jpg" rel="facybox"><img src="pic.jpg" /></a> 
```

# javascript - 动画同步、光标和高亮

> ID：13979394
> 
> 赞同：7
> 
> 时间：2012-12-20T19:46:41.977
> 
> 标签：javascript, jquery, html, css, animation

所以我几乎可以让我的[代码](http://jsfiddle.net/bplumb/PBFWV/9/)按我想要的方式工作，但不能让我的动画恰到好处地同步在一起。我正在尝试为突出显示文本的光标设置动画，然后单击按钮。问题是光标太慢或太快。我正在尝试使这种**动态化**，以便**无论文本有多长，我仍然可以使动画同步**。我知道这可能只是一个数学问题，但我无法完全理解它。试图用毫秒匹配像素的事情让我头晕目眩。在我拔掉我所有的头发之前请帮忙。谢谢。

这是html

```
<p><span id="container">I need to be highlighted one character at a time</span>
<input id="click" type="button" value="click me"/></p>
<img src="http://dl.dropbox.com/u/59918876/cursor.png" width="16"/> 
```

这是CSS

```
#container{
   font-size: 16px;  
   margin-right: 10px;   
}
.highlight{
    background: yellow;           
}
img{
  position: relative;
  top: -10px;    
} 
```

和 javascript

```
function highlight(){
    var text = $('#container').text(); //get text of container
    $('#click').css('border','none'); //remove the border
    $('img').css('left', '0px'); //reset the cursor left
    $('img').animate({left: $('#container').width() + 40}, text.length*70); //animation of cursor
    $('#container').html('<span class="highlight">'+text.substring(0,1)+'</span><span>'+text.substring(1)+'</span>'); //set the first html
    (function myLoop (i) {//animation loop          
       setTimeout(function () {        
         var highlight = $('.highlight').text();
         var highlightAdd = $('.highlight').next().text().substring(0,1);;
         var plain = $('.highlight').next().text().substring(1);
         $('#container').html('<span class="highlight">'+highlight+highlightAdd+'</span><span>'+plain+'</span>');     
         if (--i) myLoop(i);//  decrement i and call myLoop again if i > 0
        }, 70)
    })(text.length);
    setTimeout(function () {   
        $('#click').css('border','1px solid black');
     }, text.length*85);
}

highlight();
var intervalID = setInterval(highlight, $('#container').text().length*110);
//clearInterval(intervalID); 
```

这是我一直在玩的[小提琴的链接。](http://jsfiddle.net/bplumb/PBFWV/9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:28:08.303

这可能会让我投票失败，但也许你会得到一些更好的主意......
[小提琴在这里](http://jsfiddle.net/gwnz9/)

```
$(document).ready(function() {
$('p').click(function(){

    $('span').animate({'width':'100'},1000);
    $('.cursor').animate({marginLeft: 100},1000);
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:02:52.170

感谢 Dejo，我能够修改我的[代码](http://jsfiddle.net/bplumb/MmZwU/2/)以使其完全按照我的意愿工作。增加一个跨度的宽度比尝试扩大一个跨度同时缩小另一个跨度要容易得多。这也让我可以让光标移动和跨度宽度增加动画同步运行。

的HTML

```
<p><span id="highlight"></span><span id="container">I need to be highlighted one character at a time</span><input id="click" type="button" value="click me"/></p>
<img id="cursor" src="http://dl.dropbox.com/u/59918876/cursor.png" width="16"/> 
```

CSS

```
p{
  position: relative;
  font-size: 16px;   
 }
#highlight{
 position: absolute;
 background-color:yellow;
 height:20px;
 z-index:-50;   
}
#cursor{
 position: relative;
 top: -10px;    
}
#click{
  margin-left; 10px;   
} 
```

和 javascript

```
function highlight(){
    var textLength = $('#container').text().length;
    $('#click').css('border','none'); //remove the border
    $('#cursor').css('left', '0px'); //reset the cursor left
    $('#highlight').width(0);
    $('#highlight').animate({width: $('#container').width()}, textLength * 70);
    $('#cursor').animate({left: '+='+$('#container').width()} , textLength * 70, function(){
        $('#cursor').animate({left: '+=30'} , textLength * 20);
    });
    setTimeout(function () {   
        $('#click').css('border','1px solid black');
     }, textLength*100);
}

highlight();
var intervalID = setInterval(highlight, $('#container').text().length*120);
//clearInterval(intervalID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T03:14:48.597

我意识到这有点晚了，但这里有一些帮助（供将来参考）。默认情况下， JQuery`animate`函数设置一个`easing`of `swing`，这意味着动画的速度将在整个过程中发生变化（请参见[此处](http://api.jquery.com/animate/#easing "jQuery 官方文档")）。

为了（某种程度上）解决问题，我在光标的方法中添加了`linear`选项，并稍微提高了它的速度。`animate`

[您可以在JSFiddle](http://jsfiddle.net/PBFWV/13/)看到这个新版本。

但是，由于`setTimeout`某些原因可能会减慢循环速度，因此动画可能不同步。

# xpages - 数据库中的所有 xpage 有时从不加载

> ID：13979396
> 
> 赞同：0
> 
> 时间：2012-12-20T19:46:49.970
> 
> 标签：xpages

在开发过程中，我有时会在我的代码中出错（是的，我知道必须相信 :)），当页面试图在浏览器中显示时，浏览器只是坐着旋转试图加载页面，但页面从不负载。

发生这种情况后，该数据库中的其他页面都不会做出相同的反应，这对于数据库的所有用户都是如此。在此“锁定”期间，没有其他用户可以使用数据库。

问题数据库中的页面不适用于任何用户。该服务器上其他数据库中的 Xpages 继续正常工作。来自传统形式的 Http 和视图在问题数据库中工作正常。似乎只有 xpages 受到影响。

似乎在一段时间后，问题数据库的页面将再次工作。

什么会导致锁定问题，有什么方法可以立即解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:18:35.880

布鲁斯，你知道你会因为在生产服务器上的生产数据库上开发而在地狱烤:-) 补救步骤：

*   检查所有错误（在设计器的错误窗格中）并修复它们
*   干净地构建您的应用程序
*   重启http服务器
*   可选操作：紧凑 -c

希望有帮助

PS：我们都将加入你那里;-)

# php - 如何使用 SimplePie 图像处理程序

> ID：13979397
> 
> 赞同：3
> 
> 时间：2012-12-20T19:46:53.403
> 
> 标签：php, simplepie

SimplePie 是一个开源的 RSS 解析器。显然，SimplePie 可以缓存它处理的 RSS 提要中的图像。但我不知道如何处理文档。

示例代码如下所示

```
$feed = new SimplePie();
$feed->set_feed_url('http://simplepie.org/blog/feed/');
$feed->set_image_handler('handler_image.php', 'image'); // handler_image.php?image=67d5fa9a87bad230fb03ea68b9f71090
$feed->init();
$feed->handle_content_type();
echo $feed->get_title(); 
```

但是 handler_image 不是 simple 包含的文件。然而，随着时间的推移，在下载了各种 hack 和附加组件之后，我最终得到了一个名为 handler_image.php 的文件。这实际上是文件中包含的所有代码 -->

```
require_once('autoloader.php');
SimplePie_Misc::display_cached_file($_GET['i'], '../cache', 'spi'); 
```

它什么也没做。

我尝试用 timthumb.php （我已经安装在我的服务器上）替换 handler_image.php ，但这也不起作用。

有什么建议么？

[http://simplepie.org/wiki/reference/simplepie/set_image_handler](http://simplepie.org/wiki/reference/simplepie/set_image_handler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T13:45:11.683

你想在你的“handler_image.php”文件中做这样的事情：

$feed = 新的 SimplePie();

$cache = $feed->registry->call('Cache', 'get_handler', array($feed->cache_location, $_GET['image'], 'spi'));

$image = $cache->load();

这将为您提供一个包含图像数据的数组，然后您可以按照自己的喜好为它提供服务。

# php - Doctrine 1.2/Symfony 1.4 没有生成正确的外键关系？

> ID：13979399
> 
> 赞同：0
> 
> 时间：2012-12-20T19:46:56.203
> 
> 标签：php, symfony-1.4, doctrine-1.2

我继承了我必须维护的 Symfony 1.4/Doctrine 1.2 应用程序。我正在尝试对 schema.yml 文件进行一些更改并从中生成新模型和 sql defns，但由于某种原因，我的外键关系没有完全生成。

我认为我可能在 schema.yml 文件中遗漏了一些明显的东西，但它并没有出现在我身上：

我已将 schema.yml 文件编辑为一些基础知识：

```
SCHEMA.YML:
connection: doctrine
options:
  type: innodb
  charset: utf8

MasterIndex:
  tableName: master_index
  columns:
    id:
      type: integer
      primary: true
      autoincrement: true
    last_name:
      type: string(255)
      notnull: true
    first_name:
      type: string(255)
      notnull: true

Poem:
  tableName: poem
  columns:
    id:
      type: integer
      primary: true
      autoincrement: true
    user_id: string(50)
    title: string(250)
    pen_name: string(250)
    contents: string()
    invoice_id: integer
  relations:
    Invoice:
      local: invoice_id
      foreign: id
      foreignAlias: poems
      foreignType: many
      type: one
    MasterIndex:
      local: user_id
      foreign: id
      foreignAlias: poems
      foreignType: one
      type: many

Invoice:
  tableName: invoice
  columns:
    id:
      type: integer
      primary: true
      autoincrement: true
    user_id:
      type: string(50)
      notnull: true
    amount:
      type: float()
      notnull: true 
```

运行 symfony 学说：清洁学说：构建模型和学说：构建 sql 后，我得到以下 schema.sql 生成：

```
CREATE TABLE invoice (id BIGINT AUTO_INCREMENT, user_id VARCHAR(50) NOT NULL, amount FLOAT(18, 2) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = innodb;
CREATE TABLE master_index (id BIGINT AUTO_INCREMENT, last_name VARCHAR(255) NOT NULL, first_name VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = innodb;
CREATE TABLE poem (id BIGINT AUTO_INCREMENT, user_id VARCHAR(50), title VARCHAR(250), pen_name VARCHAR(250), contents TEXT, invoice_id BIGINT, INDEX invoice_id_idx (invoice_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = innodb;
ALTER TABLE poem ADD CONSTRAINT poem_invoice_id_invoice_id FOREIGN KEY (invoice_id) REFERENCES invoice(id); 
```

我期待诗表中有 2 个外键约束 - invoice_id 到 Invoice 表，user_id 到 MasterIndex 表，但只出现一个约束！我在 master_index 表的诗歌表中缺少我的外键约束。

我是否忽略了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:17:42.367

外键必须与引用列的类型匹配：

`user_id: type: string(50)`应该是`user_id: type: integer`。

# java - SQLException: 没有为 jdbc:derby 找到合适的驱动程序

> ID：13979404
> 
> 赞同：0
> 
> 时间：2012-12-20T19:47:11.163
> 
> 标签：java, netbeans, derby

我以前发现过这个问题，但没有一个答案对我有用！运行后出现此错误：

> SQLException: 找不到适合 jdbc:derby://localhost:1527//RIHANNA-PC/Users/javadb 的驱动程序

我已将 derbyclient.jar 添加到库中。但我没有得到任何不同的结果。我也不想创建新数据库。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
    String userid="a", password = "a";

 //   "jdbc:derby://localhost:1527//RIHANNA-PC/Users/javadb"
    String url = "jdbc:derby://localhost:1527//RIHANNA-PC/Users/javadb";
    Statement stmt;
    Connection con;
    String createString="select * from tbl_operator where user_id='" + jTextField1.getText() +  "' and pwd='" + jTextField2.getText() + "'";
    ResultSet rs;
    try {
        con=DriverManager.getConnection(url,userid, password);
        stmt = con.createStatement();
        rs=stmt.executeQuery(createString); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:03:56.273

您是否加载 Derby JDBC 驱动程序？您可以使用以下 java 启动命令来执行此操作：

```
java -Djdbc.drivers=org.apache.derby.jdbc.EmbeddedDriver 
```

有关加载它的另一种方式，请参见文档：[http ://db.apache.org/derby/docs/10.7/devguide/cdevdvlp40653.html](http://db.apache.org/derby/docs/10.7/devguide/cdevdvlp40653.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T05:32:23.927

我遇到了同样的问题。如果你想通过netwrok连接javadb，你应该启动NetworkServer，并在这个状态下创建数据库。

驱动程序是“org.apache.derby.jdbc.ClientDriver”

# r - R 包：在 pkg/R 和 pkg/src 文件夹中使用自定义文件/目录结构

> ID：13979405
> 
> 赞同：6
> 
> 时间：2012-12-20T19:47:11.540
> 
> 标签：r, package, directory

我正在编写一个 R 包，它的大小开始增长，因此非常感谢在文件夹 pkg/R/ 和（尤其是）在 pkg/src/ 中使用自定义结构。

例如，假设我有两个 A 类型的算法家族、B 类型的一些函数和一个主入口点。理想情况下，R/ 或 src/ 文件夹的组织方式如下：

*   A型/
    *   算法1/
        *   algo11.ext
        *   ...
    *   算法2/
        *   algo21.ext
        *   ...
*   B型/
    *   函数1.ext
    *   ...
*   主扩展

在 {R,cpp,c,f,...} 中带有“ext”，并且可能有两个具有相同名称的文件。

是否可以 ？如果是，我该怎么做？

提前致谢 ！

* * *

[2012-12-31] 编辑：一个想法是编写一些脚本 - 可能在另一个 R 包中 - 以（取消）扁平化用于测试或扩散的结构化包。但可能有更好的解决方案，所以我会稍等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:42:30.077

正如此处的“编写 R 扩展”手册[所示](http://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Using-Makevars)，pkg/src 下的 Makevars 文件允许为 C/C++/Fortran 代码嵌套子文件夹。（参见例如[RSiena](http://cran.r-project.org/web/packages/RSiena/index.html)包）。

但是，我没有发现任何关于 pkg/R 中的自定义结构的信息。所以我写了一个小包（可用，虽然需要改进），它完成以下任务：

*   加载/卸载在 pkg/R 下具有（可能）嵌套文件夹的包
*   在其上启动 R 和/或 C 单元测试 [基本框架，将被替换（例如 RUnit 和检查）]
*   将包导出为与 CRAN 兼容（展平 R 代码，生成 Makevars 文件）

如果它达到可发布状态，我将在此处链接它。（目前我可以通过电子邮件发送）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T09:10:34.947

官方包文档[https://cran.r-project.org/doc/manuals/r-devel/R-exts.html](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html)，第 1.1.5 节包含此引用：

> R 和 man 子目录可能包含名为`unix`or的特定于操作系统的子目录`windows`。

我尝试在 R-3.5.1 中创建一个带有子目录的简单测试包，但它不能正常工作。

也`devtools::load_all()`没有`R CMD build`成功地从 R 中的子目录导出代码。

# django - 关于使用列表的基本 Django

> ID：13979410
> 
> 赞同：1
> 
> 时间：2012-12-20T19:47:22.333
> 
> 标签：django

我是 Django 新手，开始学习。我正在尝试访问 for 循环中的列表，但我不能

```
todo_list = ({'count':'one','count':'two','count':'three'})
raw_template="""   {% for todo in todo_list.count  %}
    <p>{{ forloop.counter }}: {{ item }} </p>   {% endfor %}   """
t =  Template(raw_template)
c = Context({'todo_list':todo_list})
t.render(c)
u'\n  \n    <p>1:  </p>\n  \n    <p>2:  </p>\n  \n <p>3:  </p>\n  \n  ' 
```

请让我知道我在哪里犯了错误。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:51:38.350

您需要在上下文中传递一个列表：

```
todo_list = ['one', 'two', 'three'] 
```

然后在模板中：

```
{% for todo in todo_list %}
  <p>{{ forloop.counter }}: {{ todo }}</p>
{% endfor %} 
```

所有代码一起：

```
from django.template import Context, Template

t = Template("""
{% for todo in todo_list %}
<p>{{ forloop.counter }}: {{ todo }}</p>
{% endfor %}
""")
c = Context({
    'todo_list': ['one', 'two', 'three'],
})
t.render(c) 
```

# java - 如何知道html标签字符串的渲染长度

> ID：13979413
> 
> 赞同：4
> 
> 时间：2012-12-20T19:47:29.330
> 
> 标签：java, swing

我正在使用**html 标签在****按钮**上显示参数及其值。有些按钮包含一个参数，有些按钮包含 2 或 3 个参数。**“/”**用于分隔值。名称和值之间有一个空行。但在长值的情况下，我想使用该空行来显示值，如“ **Table H/V** ”按钮。

我正在尝试使用值字符串的长度来确定是否需要空行。它不能正常工作，因为字符编号不反映该字符串的绘图长度。按钮大小是固定的。

我在问**我怎么知道什么时候应该再有一个代表那个空行的“< br>”？**或者**我怎么知道值字符串何时会被换行？**

这是我的代码：

```
 private static String getBtnDisplayStr(String name, String value)
    {
        StringBuilder sBuilder = new StringBuilder();
        sBuilder.append("<html><center><b>");
        sBuilder.append(name);
        if(value.length() <= 12)  //add one empty line for short value string
        {
            sBuilder.append("</center></b><br><br><font size=\"2\">");
        }
        else
        {
            sBuilder.append("</center></b><br><font size=\"2\">");
        }
        sBuilder.append(value);
        sBuilder.append("</font></html>");

        return sBuilder.toString();
    } 
```

这是按钮： ![在此处输入图像描述](../Images/ebc081823dc56fb24e6c33bec2165983.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:29:21.590

*   默认情况下，没有理由`PreferredSize`计算`Html <=3.2`和`Swing JComponents`

*   `LayoutManager`例如 GridLayout 从最大元素计算屏幕尺寸

![在此处输入图像描述](../Images/09f542c2177f7bfc9106992402983434.png)

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class HtmlAndJButton {

    final String buttonText = " Whatever words, <br> but nothing wise";
    final String buttonText1 = " Whatever words, <br> but nothing wise, "
            + "<br> plus 1st. line, ";
    final String buttonText2 = " Whatever words, <br> but nothing wise, "
            + "<br> plus 1st. line, <br> plus 2nd. line,";
    private JButton btn1 = new JButton("Toggle");
    private JButton button = new JButton(buttonText);
    private JButton button1 = new JButton("Toggle");
    private JButton button2 = new JButton("Toggle");

    public HtmlAndJButton() {
        btn1.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                button.setText("<html><font color=" + (button.isEnabled()
                        ? "blue" : "red") + ">" + buttonText + "</font></html>");
                button.setEnabled(!button.isEnabled());
                button1.setText("<html><font color=" + (button1.isEnabled()
                        ? "red" : "green") + ">" + buttonText1 + "</font></html>");
                button1.setEnabled(!button1.isEnabled());
                button2.setText("<html><font color=" + (button2.isEnabled()
                        ? "green" : "yellow") + ">" + buttonText2 + "</font></html>");
                button2.setEnabled(!button2.isEnabled());
            }
        });
        button.setText("<html><font color=red>" + buttonText + "</font></html>");
        button1.setText("<html><font color=green>" + buttonText1 + "</font></html>");
        button2.setText("<html><font color=yellow>" + buttonText2 + "</font></html>");
        JFrame f = new JFrame("ButtonTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLayout(new GridLayout(2, 2));
        f.add(button);
        f.add(button1);
        f.add(button2);
        f.add(btn1);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                HtmlAndJButton t = new HtmlAndJButton();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:03:36.470

设置按钮上的文本，然后检查按钮的“首选宽度”。如果太大，请相应地调整文本。

这是上面两个按钮的示例：

```
private static int BUTTON_WIDTH = 90;  // Adjust this as necessary

public static void main(String[] args) {
    JFrame frame = new JFrame();
    JPanel pnl = new JPanel();

    JButton btn1 = new JButton(getBtnDisplayStr("Table H/V",null,"909.0 / 500.0"));
    if (btn1.getPreferredSize().width > BUTTON_WIDTH) {
        btn1.setText(getBtnDisplayStr("Table H/V", "909.0 /", "500.0"));
    }
    JButton btn2 = new JButton(getBtnDisplayStr("Acq/ISD",null,"1 / 1"));
    if (btn2.getPreferredSize().width > BUTTON_WIDTH) {
        btn2.setText(getBtnDisplayStr("Acq/ISD","1 /","1"));
    }

    pnl.add(btn1,BorderLayout.LINE_START);
    pnl.add(btn2,BorderLayout.LINE_END);

    frame.add(pnl);
    frame.pack();

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}

private static String getBtnDisplayStr(String name, String valueLine1, String valueLine2) {
    StringBuilder sBuilder = new StringBuilder();
    sBuilder.append("<html><center><b>");
    sBuilder.append(name);
    sBuilder.append("</b><br/>");
    if (valueLine1 != null) {
        sBuilder.append("<font size=\"2\">");
        sBuilder.append(valueLine1);
        sBuilder.append("</font>");
    }
    sBuilder.append("<br/>");
    if (valueLine2 != null) {
        sBuilder.append("<font size=\"2\">");
        sBuilder.append(valueLine2);
        sBuilder.append("</font>");
    }
    sBuilder.append("<br/>");

    sBuilder.append("</center></html>");

    return sBuilder.toString();
} 
```

# html - 伪元素上的相对边框大小在 Chrome 中是不稳定的

> ID：13979415
> 
> 赞同：1
> 
> 时间：2012-12-20T19:47:38.870
> 
> 标签：html, css, google-chrome, border, pseudo-element

我正在使用“CSS 三角形”（伪元素上的不同边框大小/颜色）为网页上的元素提供类似箭头的外观。我使用相对单位调整所有内容的大小，以便在用户代理样式表具有非默认字体大小时按比例缩放。

```
.arrow {
    line-height: 1.5em;
    padding: 0 0.5em;
    background-color: rgb(255, 165, 0);
    display: inline-block;
    position: relative;
}

.arrow:after {
    content: " ";
    display: block;
    position: absolute;
    box-sizing: border-box; /* all positioning/size units should line up with the
                               outside of the border */
    top: 0; /* align triangle with top of container */
    left: 100%; /* push triangle to right of container */
    border-style: solid;
    border-color: rgba(255, 66, 0, 0); /* transparent */
    border-width: 0.75em; 
    border-left-color: rgb(255, 66, 0); /* here's where the triangle is created */
} 
```

一切都很好，除了在 Chrome（当前使用版本 23）中，当我放大和缩小时，边框大小似乎计算不正确——边框比其他元素增长/缩小的速度要快得多。

[http://jsfiddle.net/hXN9p/](http://jsfiddle.net/hXN9p/)

如果我使用绝对单位，问题就会消失（但我不想使用绝对单位）：

[http://jsfiddle.net/hXN9p/2/](http://jsfiddle.net/hXN9p/2/)

其他 Webkit 浏览器（即 Safari）没有这种行为，甚至 IE8 也没有问题。

**更新**：我设法简化了案例；它与伪元素无关，与 Chrome 使用相对单位计算边框宽度的方式有关。这是一个例子；当您放大和缩小时，这两个元素不再是相同的高度：

[http://jsfiddle.net/W2SdF/](http://jsfiddle.net/W2SdF/)

# windows - 根据值比较两个 COM 接口实例

> ID：13979417
> 
> 赞同：2
> 
> 时间：2012-12-20T19:47:59.517
> 
> 标签：windows, com

是否有关于如何基于它们的值（又名私有状态）而不是它们的身份（又名指向 IUnknown 的指针）来比较两个 COM 对象的既定模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T21:27:24.730

对象相等是一个重要的实现细节，一个在 COM 中很好地隐藏的细节。COM 是一个基于接口的对象模型，这些接口需要实现的事实被小心地隐藏了。它只出现在几个地方，CoCreateInstance() 是显而易见的。不太明显的是 IUnknown 的规则。当您通过任何已实现的接口进行 QI 时，其正确实现要求您将获得相同的 IUnknown 接口指针。这提供了对象身份，而不是对象相等。

没有通常用于测试对象相等性的标准 COM 接口类型。你只需要自己做。一个带有 IsEqualTo() 方法的简单方法可以完成工作。或者您可以将该方法添加到您的默认界面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:51:39.420

这取决于“私人国家”的定义。COM 对象不必有一个。如果对象实现`IPersist*`了接口系列，尤其是。`IPersistStreamInit`，然后你可以[将](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694439%28v=vs.85%29.aspx)两者保存到持久流或属性包中，然后直接比较存储，例如逐字节比较流。

# c++ - 找到班级中最长的名字

> ID：13979418
> 
> 赞同：-7
> 
> 时间：2012-12-20T19:48:00.540
> 
> 标签：c++

我有 3 个类人类，教师和学生，教师和学生继承人类的属性我的类如下所示

```
class human{
        public:
        string firstname;
        string lastname;

}

class teacher:public human{
        public:
        int card_number;
}

class student:public human{
        public:
        int studen_num;
} 
```

我想写一个函数来比较 和 的姓氏`teachers`，`students`然后它应该在数组的帮助下打印名字最长的那个，我该怎么做？

这是我试过的

```
void st(students1,teachers2){
if (str_length(s1.name) > str_length(s2.name))
   cout<<s1.name;
   else
   cout<<s2.name;

} 
```

我不知道如何使用数组来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:53:32.760

你的问题有歧义：

*   你有两个数组，一个 for`teachers`和一个 for `students`？
*   老师和学生之间有一对一的通信吗？否则，如果您只想找到`human`最长姓氏的任何一个，那么将教师与学生进行比较以找到最长的名字是没有意义的。

假设您只想要`human`最长的`lastname`：

*   将所有的`teachers`和存储`students`在一个`human`数组中（多态性）
*   遍历这个数组一次并检查`lastname`每个元素的长度
*   如果这个长度大于`max`到目前为止看到的，更新相应的`max`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:53:59.527

当您传入一个不会被更改的指针时，请尝试使用 const 。除非您计划在某个时候将参数设置为 NULL，否则不应将其作为指针传递。在这种情况下，我们总是希望向量至少有一个人。如果它是动态的，最好将 std::vector 用于容器而不是数组。这样你就不需要跟踪你有多少人。

```
string max( const std::vector< Human > & _human_vec )
{
   std::vector< Human >::iterator human_vec_it = _human_vec.begin();
   std::string longest_last_name;
   for( human_vec_it; human_vec_it != _human_vec.end(); ++human_vec_it )
   {
      if( *human_vec_it.lastname.size() > longest_last_name )
         longest_last_name = *human_vec_it.lastname;
   }

   return longest_last_name;
} 
```

这是我在 stackoverflow 上的第一个答案，所以我希望我能正确遵守规则。如果我犯了错误，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:06:47.613

我建议按名称长度降序对数组进行排序。
第一个位置的名称将是最长的：

```
bool Order_By_Name_Length(const Human& h1, const Human& h2)
{
    const unsigned int h1_length = h1.firstname.length() + h1.lastname.length();
    const unsigned int h2_length = h2.firstname.length() + h2.lastname.length();
    return h1_length > h2_length;
}

//...
std::sort(&students1[0], &students[LAST_STUDENT_INDEX], Order_By_Name);
std::sort(&teachers1[0], &teachers[LAST_TEACHER_INDEX], Order_By_Name); 
```

`length`通过向人类添加一个方法，这可能会更容易：

```
class Human
{
  public:
    string firstname;
    string lastname;
  unsigned int length(void) const
  {
      return firstname.length() + secondname.length();
  }
};

bool Order_By_Name2(const Human& h1, const Human& h2)
{
    return h1.length() > h2.length();
} 
```

# python - 如何调试将 stdin 与 ipython 一起使用的脚本？

> ID：13979422
> 
> 赞同：8
> 
> 时间：2012-12-20T19:48:35.877
> 
> 标签：python, ipython

我有一个在标准输入上输入的 python 脚本。我想进入 IPython.embed()，像这样：

```
for filepath in sys.stdin:
    dir = os.path.basename(filepath)
    ...
    IPython.embed() 
```

然后我像这样调用脚本：

```
find . -type f | thescript.py 
```

问题是 IPython 使用标准输入作为交互式控制台，所以它首先看到的是剩余的管道数据。然后，管道关闭，终端退出。

有没有办法调试使用标准输入和 ipython 的脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:59:47.983

您可以先将 stdin 输入读入列表，然后重置 stdin：

```
stdin_list = list(sys.stdin)
sys.stdin = open('/dev/tty')
for filepath in stdin_list:
    dir = os.path.basename(filepath)
    ...
    IPython.embed() 
```

# ios - 在 iOS 中使用背景图片时需要去除 UITableView 中单元格之间的边框

> ID：13979427
> 
> 赞同：2
> 
> 时间：2012-12-20T19:48:52.960
> 
> 标签：ios, uitableview

我无法删除出现在`UITableView`. 我试过使用：

```
[myTableView setSeparatorStyle:UITableViewCellSeparatorStyleNone]; 
```

在我的`viewDidLoad`方法中，但不幸的是，这似乎不起作用。我正在使用背景图像来显示我的单元格，并且我希望删除这些图像之间的边界。图像本身就是每个单元格的大小，我在`CustomTableViewCell`班级中设置的每个单元格的大小如下：

```
self.contentView.frame = CGRectMake(0, 0, 320, 80); 
```

我的`cellForRowAtIndexPath`方法如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"mycell";

    MyTableViewCell *cell = (MyTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[MyTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

    }

    cell.ID.text = [[DataModel sharedInstance].ID objectAtIndex:indexPath.row];
    cell.Name.text = [[DataModel sharedInstance].Name objectAtIndex:indexPath.row];
    cell.Date.text = [[DataModel sharedInstance].Date objectAtIndex:indexPath.row];

    [cell setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Cell.png"]]];

    return cell;
} 
```

尽管我已经完成了所有工作，但我在表格中的单元格之间看到了清晰的白色边框。我真的很想删除它。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:24:56.267

在 viewDidLoad 设置 UITableView separatorColor 可能为时过早。尝试 viewWillAppear 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:28:01.907

在 Interface Builder 内部 - 将分隔符更改为 None，然后将分隔符颜色更改为清除颜色：

![在此处输入图像描述](../Images/d27581f2e8668fe3f129b0a7667c07ff.png)

# jquery - 使用自定义 JQuery 验证构建 asp.net CompositeControl

> ID：13979430
> 
> 赞同：0
> 
> 时间：2012-12-20T19:49:13.377
> 
> 标签：jquery, asp.net

设置：我为过去工作过的一家小公司构建了一个 asp.net 复合控件库。我还构建了一个通用的 jquery 验证库（没有使用 jquery 验证插件，因为它对我们正在做的事情来说太过分了）。在控件项标记本身中，开发人员可以添加类似“RequiredField='true'”和/或“DataValidation='Date'”的属性来执行适当的验证。在复合控件的渲染方法中，我将 REQUIRED 和 DATEVALIDATOR 等类添加到文本框的 cssclass 列表中。在 document.ready 方法中，我查找这些特定类并将文本框的 onchange 事件与该控件相关联。

问题：这和现在一样很好用，但我有两个问题：1）我不太习惯将渲染输入标记的类属性用于与 CSS 无关的东西，但我也不确定我还能把它放在哪里，让标记仍然是有效的 HTML。还有另一种方法可以进行此客户端验证吗？

2）这只是#1的补充，但我想将正则表达式验证作为属性选项添加到控件，但我不喜欢使用当前方法将jquery验证逻辑与css类相关联的想法这样做，所以我更喜欢其他方式，我可以标记呈现的输出，以便我的通用 jquery 可以拾取它并知道要对其进行什么验证。

任何建议都会非常有帮助和感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:35:33.513

与类相关联很好，即使它在技术上不是 CSS 类。另外，您是否考虑过数据属性标签？虽然它们是 HTML5，但我已经使用它们来分配元数据并使用数据属性而不是数量可笑的类。例如，您可以向控件添加 data- 属性：“data-required=”和“data-date-validator=”，然后您可以相应地设置值并将空值视为 false。通过这种方式，您可以将一堆这些数据属性附加到一个元素以读取特定信息。

例子：

```
$(function () {
    // isRequired would == true
    var isRequired = $("#container").attr("data-required");
}); 
```

# javascript - jQuery Dialog 文档准备就绪

> ID：13979432
> 
> 赞同：0
> 
> 时间：2012-12-20T19:49:24.207
> 
> 标签：javascript, asp.net-mvc

如果将`$(document).ready()`其放置在作为对话框控件的一部分加载的单独视图中，它将何时运行？是否会按照父页面调用的对话框中视图完全加载后的模式运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:57:34.460

$(document).ready 方法意味着只有在 DOM（文档对象模型/页面的所有元素）成功加载后才运行任何 javascript。

因此，从逻辑上讲，当您将任何 javascript 代码放在 $(document).ready() 下时，它将在页面的所有元素加载后运行。

# html - Chrome 和 Firefox 中的间距不同

> ID：13979437
> 
> 赞同：1
> 
> 时间：2012-12-20T19:49:50.340
> 
> 标签：html, css, google-chrome, firefox

这是给我带来麻烦的页面的链接：

[http://youtube.thegoblin.net/layoutfix/](http://youtube.thegoblin.net/layoutfix/)

如果您在 Firefox 和 chrome 中查看网站，您可以看到间距不同。它在 chrome 中的外观就是我想要的样子。

我已尝试在 YUI 2: Reset CSS as it as itSuggested in another question 中进行链接，但我似乎无法使其正常工作。

这是样式表链接：http: [//youtube.thegoblin.net/layoutfix/styles/style.css](http://youtube.thegoblin.net/layoutfix/styles/style.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:17:39.720

您应该更改某些包含文本的元素的行高。这些是您需要更改的某些（可能是全部）元素的行高：

```
#title: 56px
.yoText: 46px
#buttonTitle: 68px
#buttonText: 34px 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:59:01.180

看起来浏览器对您选择的字体的行高计算方式不同，因此`line-height`可以让它变得更好。

只是简短的例子，不是完整的修复：

```
#dl-button #buttonTitle {
   color: #37590B;
   float: right;
   font-family: "TallDark";
   font-size: 600%;
   line-height: 0.7;
   margin-right: 60px;
   margin-top: 20px;
   text-shadow: 1px 1px #BDF277;
} 
```

使绿色按钮变得更好，因此您可以以同样的方式与其他人一起玩耍。

# html - CSS3 淡化动画

> ID：13979438
> 
> 赞同：0
> 
> 时间：2012-12-20T19:49:55.013
> 
> 标签：html, css, css-animations

我正在尝试结合 2 个淡入淡出的 CSS3 动画。谁能帮我这个？
这是我到目前为止所拥有的 -

[jsFiddle](http://www.jsfiddle.net/548LF/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:54:02.623

好的，你的问题相应地更新了我的答案，你能做的最好和最少的就是这样

[**演示**](http://jsfiddle.net/548LF/10/)

[需要实际标记 + 样式](http://jsfiddle.net/548LF/11/)（除非所有浏览器都完全支持 CSS3 动画，否则不要使用它）

HTML

```
<div class="out"><span>example</span></div> 
```

CSS

```
div {
   animation:demo 7s;
   -moz-animation:demo 7s; /* Firefox */
   -webkit-animation:demo 7s; /* Safari and Chrome */
   -o-animation:demo 7s; /* Opera */
   animation:demo 7s infinite;
}

@keyframes demo {
   0% {opacity:0;}
   50% {opacity:1;}
   100% {opacity:0;}
}

@-moz-keyframes demo { /* Firefox */
   0% {opacity:0;}
   50% {opacity:1;}
   100% {opacity:0;}
}

@-webkit-keyframes demo { /* Safari and Chrome */
   0% {opacity:0;}
   50% {opacity:1;}
   100% {opacity:0;}
}

@-o-keyframes demo { /* Opera */
   0% {opacity:0;}
   50% {opacity:1;}
   100% {opacity:0;}
} 
```

# jquery - 如果屏幕分辨率小于 x 附加 css

> ID：13979443
> 
> 赞同：18
> 
> 时间：2012-12-20T19:50:12.163
> 
> 标签：jquery, css

如果屏幕分辨率小于 960 像素，则尝试修改元素的 css

我的代码不起作用，在萤火虫中没有看到任何错误。

```
<script type="text/javascript">
jQuery(window).resize(function() {
  if (jQuery(window).width() < 960) {
    jQuery(".snow").css('display', 'none');
  }
});
</script> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-20T19:52:12.540

`@media`您可以使用命令完全使用 CSS 完成此操作。

```
@media (max-width:960px) { css... } //nothing with screen size bigger than 960px

@media (min-width:960px) { css... } //nothing with screen size smaller than 960px 
```

看[这里](http://www.w3.org/TR/css3-mediaqueries/)

Jason Whitted 提出了一个很好的观点，这只是 CSS 3，因此它不适用于旧版浏览器（但它应该适用于所有现代浏览器）。有关兼容性，请参见[此处](http://caniuse.com/css-mediaqueries)。您的主要问题将是 IE 8 及以下版本。

**编辑 - 设备选择**

```
@media screen { .nomobile { display: block; } } //desktops/laptops

@media handheld { .nomobile { display: none; } } //mobile devices 
```

或者您可以假设移动设备的宽度会更小，然后继续。

# java - 我应该如何配置 Netty 来处理高请求量？

> ID：13979450
> 
> 赞同：4
> 
> 时间：2012-12-20T19:50:56.133
> 
> 标签：java, netty

在我们的应用程序中，我们需要构建一个 HTTP 服务器，在启动时，大约 1,600 个持久的 HTTP 连接被各种远程服务器打开，并且数千个 HTTP POST 请求流在每个连接上快速连续发送大约 30秒 - 我们只需要几毫秒来响应每一个。30 秒后连接关闭并打开另一个连接。

我们之所以选择 Netty，是因为大多数人认为它非常适合构建高效的 HTTP 服务器。

在实现我们的 HTTP 服务器时，我们遵循了[Snoop](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/http/snoop/package-summary.html)示例。

不幸的是，我们遇到了可能由 Netty 过载来解释的问题，因此我们正在重新考虑它是否配置正确，特别是在处理线程的方式方面。我们配置服务器如下：

```
ServerBootstrap bootstrap = new ServerBootstrap(
   new NioServerSocketChannelFactory(
            Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool())); 
```

当我们收到请求时，我们在 SimpleChannelUpstreamHandler 中调用 messageReceived() 的同一线程中处理它。

这种方法应该在我们的应用程序中工作吗？

*编辑：*发生故障时盒子上的平均负载为 0.05，非常低。我已经为 Java 进程分配了 4GB，但它几乎没有使用它。所以，基本上，盒子完全负载不足。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:01:58.323

您是否通过在 ServerBootstrap 中设置“child.nodelay”禁用了 Nagle？

（见[http://static.netty.io/3.5/api/org/jboss/netty/bootstrap/ServerBootstrap.html](http://static.netty.io/3.5/api/org/jboss/netty/bootstrap/ServerBootstrap.html)）

# javascript - 检查值是否为空格

> ID：13979451
> 
> 赞同：0
> 
> 时间：2012-12-20T19:51:04.133
> 
> 标签：javascript

我正在尝试编写类似于图像字体生成器的东西，但我无法检查表单值是否为空格，或者给空白图像提供 URL。

这是我的代码：

```
<html><head><title>untitled</title>
<script type="text/javascript">
<!--
function fontgen(text) { 
    var url = './fonts/';
  var letters = text.split('');
  var imgStr = "";
  for (var i in letters) {
    imgStr += '<img src="' +url+letters[i]+ '.gif">';
  }
  document.getElementById('name').innerHTML = imgStr;
  return false;   
}
//-->
</script>
</head>

<body>
<form name="myform" action="">
<input type="text" name="myinput" size="20"><br>
<input type="button" value="Make Font" onclick="return fontgen(document.myform.myinput.value)">
</form>
<div id="name"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:54:17.553

```
function fontgen(text) { 
    var url = './fonts/',
        letters = text.split(''),
        imgStr = "";

    // First, you need a valid for loop:
    for (var i = 0; i < letters.length; i++) {
        if (letters[i] !== ' ') { // then, check to see if it is a space
            imgStr += '<img src="' +url+letters[i]+ '.gif">';
        }
    }
    document.getElementById('name').innerHTML = imgStr;
    return false;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:58:37.697

从我从你的问题中可以看出，你正在寻找这样的东西：

```
for (var i=0;i<text.length;i++)
{
    if (text.charAt(i) !== ' ')
    {//using charAt, you're supporting all browsers, without having to split the string
        console.log(text.charAt(i) + ' is not space');
    }
} 
```

但是，一种更简单的方法是：无需逐个循环遍历所有字符：

```
if (text.indexOf(' ') === -1)
{
    console.log('No spaces in ' + text + ' found');
} 
```

或者，如果您愿意，可以一次性替换或删除所有空格：

```
text = text.replace(/\s/g,'_');//replaces spaces with underscores
text = text.replace(/\s/g, '');//removes spaces 
```

正则表达式狂热的方式。假设您有一组特定的字符作为 gif，您可以轻松地使用单个正则表达式一举将所有这些字符替换为相应的图像：

```
var imgString = text.replace(/([a-z0-9\s])/gi, function(char)
{
    if (char === ' ')
    {
        char = 'space';//name of space img
    }
    return '<img src="'url + char + '.gif"/>';
}); 
```

相同的逻辑适用于像`!`or之类的字符`.`，因为它们并不完全适合文件名，请使用对象、数组或开关将它们替换为相应的文件名。
无论如何，输入 like `foo bar`，上面代码的输出应该是这样的：

```
<img src="./fonts/f.gif"/><img src="./fonts/o.gif"/><img src="./fonts/o.gif"/><img src="./fonts/space.gif"/><img src="./fonts/b.gif"/><img src="./fonts/a.gif"/><img src="./fonts/r.gif"/> 
```

不知道为什么你的路径是`./foo/[].gif`，我怀疑`foo/[].gif`也会这样做，但这不是这里的问题。
如果您有兴趣：[这里有一些关于使用正则表达式和回调替换的更多信息](https://stackoverflow.com/questions/832257/javascript-multiple-replace/9514142#9514142)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:59:37.027

尝试将字母[i]替换为：

```
(letters[i] == " ") ? "spacefilename" : letters[i] 
```

这是一个三元运算符。基本上是一个简写的 if 语句，可以直接用来代替字母 [i]

从某种意义上说，这就像将 letters[i] 替换为 myfilename(letters[i]) ，其中 myfilename 函数是

```
function myfilename(char)
{
  if (char == " ") {
    return "space";
  } else {
    return char;
  }
} 
```

所以你的代码看起来像这样：

```
<html><head><title>untitled</title>
<script type="text/javascript">
<!--
function fontgen(text) { 
    var url = './fonts/';
  var letters = text.split('');
  var imgStr = "";
  for (var i = 0; i < letters.length; i++) {
    imgStr += '<img src="' +url+(letters[i] == " ") ? "spacefilename" : letters[i]+ '.gif">';
  }
  document.getElementById('name').innerHTML = imgStr;
  return false;   
}
//-->
</script>
</head>

<body>
<form name="myform" action="">
<input type="text" name="myinput" size="20"><br>
<input type="button" value="Make Font" onclick="return fontgen(document.myform.myinput.value)">
</form>
<div id="name"></div>
</body>
</html> 
```

/e 也正如其他人提到的，for 循环是错误的。我刚才更正了。一个“for...in”循环可以在那里工作......虽然不想进入所有这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:32:41.957

尝试将字符更改为字符代码，并为您要支持的每个代码提供相应的图像文件；您还可以通过 if 语句进行范围检查，以确保代码在您接受的范围内。

```
function fontgen(text)
{ 
  var imgStr = "";
  for (var i = 0; i < text.length; i++)
    imgStr += '<img src="./fonts/' + text[i].charCodeAt(0) + '.gif">';

  document.getElementById('name').innerHTML = imgStr;

  return false;   
} 
```

如果你提供这个函数“这是一个测试”这句话，它将导致：

```
<div id="name">
    <img src="./fonts/116.gif">
    <img src="./fonts/104.gif">
    <img src="./fonts/105.gif">
    <img src="./fonts/115.gif">
    <img src="./fonts/32.gif">
    <img src="./fonts/105.gif">
    <img src="./fonts/115.gif">
    <img src="./fonts/32.gif">
    <img src="./fonts/97.gif">
    <img src="./fonts/32.gif">
    <img src="./fonts/116.gif">
    <img src="./fonts/101.gif">
    <img src="./fonts/115.gif">
    <img src="./fonts/116.gif">
</div> 
```

`<img src="./fonts/32.gif">`将是空间图像。

# mysql - 在搜索中梳理 mysql 外连接

> ID：13979452
> 
> 赞同：3
> 
> 时间：2012-12-20T19:51:06.070
> 
> 标签：mysql, join

我的数据库中有 3 个表

```
PROJECTS
- id
- name
- date_created
- user_created
- status (or for disabled, 1 for enabled)

PROJECTS_MANAGERS (a project may have 0 or more managers)
- id
- project_id
- manager_username

PROJECTS_MEMBERS (a project may have 0 or more members)
- id
- project_id
- member_username 
```

我正在尝试创建一个 mysql 连接查询来列出特定用户参与其中状态等于 1 的所有项目。具体来说，一个查询将列出用户名“bob”在“use_created”中的所有项目，“manager_username”或“member_username”字段，projects.status 字段为 1。但诀窍是可能有多个经理或成员具有相同的 project_id（当然，不同的 id 和 member_usernames）。

我试过这段代码，但它似乎不起作用（在 where 子句中给我错误 '1054 unknown column 'projects.status'）。我试过做一个“完全加入”，但我开始学习 mysql 不支持这个：

```
SELECT *
FROM
    `projects` as theProjects

LEFT OUTER JOIN
    projects_managers
            AS theManagers
                    ON theProjects.id = theManagers.project_id
WHERE
    projects.status = 1
UNION ALL

SELECT *
FROM
    `projects` as theProjects
RIGHT OUTER JOIN
    projects_members
            AS theMembers
                    ON theProjects.id = theMembers.project_id
        WHERE
    projects.status = 1 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:11:17.210

怎么样：

```
SELECT projects.*
FROM projects
LEFT JOIN projects_managers managers ON managers.project_id=projects.id
LEFT JOIN projects_members members ON members.project_id=projects.id
WHERE status=1 AND
      (user_created="bob" OR managers.username="bob" OR members.username="bob")
GROUP BY projects.id 
```

# c# - 将 XML 属性读入列表

> ID：13979454
> 
> 赞同：3
> 
> 时间：2012-12-20T19:51:16.970
> 
> 标签：c#, xml, list, httpwebrequest

我是 XML 新手，无法从 HttpWebResponse 读取我的 XML 响应。

这是回复：

```
<RESPONSE version="1.2">
 <RESULTS>
  <AN an_type="C" 
  an_id="783hdryfdg56a2" 
   an_num="1" 
    an_status="100" />
  <RESULTS>
</RESPONSE> 
```

我正在寻找提取 an_id 值并将其保存到列表中。开始这样做，但似乎将 for xmlnodelist 作为一个 int 但它认为 nodes["an_id"] 是一个字符串

```
List<int> IDs = new List<int>();
XmlDocument doc = new XmlDocument();
doc.LoadXml(returnValue);
XmlNodeList nodes = doc.SelectNodes("SEARCH_RESULTS/LOAN");
LoanIDs.Add(Convert.ToInt32(nodes["an_id"].InnerText)); 
```

一旦将 an_id 添加到列表中，它们也是一种方法。列表中的 foreach 项目将其用作新 xml 的参数，如下所示：

```
<INPUT>
        <LOGIN API_ID=""cat"" API_PASSWORD=""dog"" />
    <REQUEST>
         <AN an_id=""@anID"" />  
         <AN an_id=""@anID"" />
        ....foreach one in list it adds a new node with the value
    </REQUEST>
</INPUT> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T19:56:41.810

使用`xml`XML 代码作为您的字符串：

```
var ids = XDocument.Parse(xml).
    Descendants("AN").
    Select(e => (string)e.Attribute("an_id")).
    ToList(); 
```

但是，从您的示例来看，该属性似乎并不总是一个整数。~~你确定你的转换吗？~~鉴于您的最新评论，我将属性的演员表更改为 (string)。

当您想重用列表时，`current`作为包含您要添加的列表的父元素：

```
current.Add(ids.Select(i => new XElement("AN", new XAttribute("an_id", i)))); 
```

# sql-server - 确定不能在事务中执行的 T-SQL/DDL

> ID：13979456
> 
> 赞同：4
> 
> 时间：2012-12-20T19:51:25.263
> 
> 标签：sql-server, tsql

有各种语句和系统过程无法在事务中执行，并带有“不允许...”（例如，`create database`）或“无法执行...”（例如，`exec sp_addrole`）的错误消息。

是否有一条或一组规则可以指示交易中是否不允许给定程序/语句？有没有它的清单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:17:55.740

不是微软官方资源，[而是迄今为止我找到的最全面的列表](http://sqlserverpedia.com/wiki/Recommended_Best_Practices_for_Transactions)......

*   `ALTER DATABASE`
*   `BACKUP LOG`
*   `BACKUP DATABASE`
*   `RESTORE LOG`
*   `RESTORE DATABASE`
*   `RECONFIGURE`
*   `UPDATE STATISTICS`
*   `LOAD DATABASE`
*   `LOAD TRANSACTION`
*   `CREATE DATABASE`
*   `DISK INIT`
*   `DROP DATABASE`
*   `MASTER`改变数据库的系统存储过程

最后一项是一个相当广泛的类别......但您可以合理地预测哪些类型的系统存储过程将改变`MASTER`数据库......基本上是在服务器级别而不是数据库级别运行的任何东西。

# spring - 哪个框架、工具或插件要求硬编码的“database.xsd”文件名？

> ID：13979460
> 
> 赞同：9
> 
> 时间：2012-12-20T19:52:03.773
> 
> 标签：spring, hibernate, xsd, cxf, xmlbeans

我继承了一个基于 CXF/Hibernate/JBoss 的项目，其中包含一个名为`database.xsd`. 我梳理了项目以找出系统中使用的子系统/组件，`database.xsd`但在 maven-war-plugin 用于创建 WAR 文件 ( [webapp-cache.xml](https://stackoverflow.com/a/4218027/1864054) ) 的文件中只产生了一个引用。

对我来说，这表明这`database.xsd`是某些框架或插件所期望的一些标准文件名。但它是什么？休眠？CXF？其他？

是否有文档实际描述了`database.xsd`依赖它的包中的角色？

**更新：**临时删除`database.xsd`并尝试重建，导致许多编译错误，导致使用DTO 文件`XML2SQL.java`引用的包的原则文件。`*.hbm.xml`这告诉我，罪魁祸首是……**休眠**！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:16:15.600

它是**Hibernate**，因为临时删除 database.xsd 并尝试重建，导致许多编译错误，导致原理`XML2SQL.java`文件使用*仅*`*.hbm.xml`由DTO 文件引用的包。（见上面的更新）

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T13:31:01.053

我会用“老式方式”来处理这个，良好的日志记录+二进制搜索方法。

首先在测试环境中：

1) 确保您的代码设置为使用 log4j 并具有最广泛的日志记录级别。

2) 删除 database.xsd 后，大致确定故障的“中途点”。例如，假设系统设置正确，它会产生 1000 行日志记录。删除 database.xsd 后，它无法加载并停止，只有 500 行日志记录。查看日志记录，确定正在调用哪些类/方法。（另一种处理这个而不是删除 database.xsd 的方法是在您的测试环境中引入一个带有语法错误的副本。）

3) 随着您在第 2 步中的学习，添加更多日志记录并尝试/捕获以捕获更多信息。如果这不允许您缩小目标范围。重复，关注“250 测井线”点。每次继续将问题空间减半，直到找到目标类。

我看到的许多 Java 程序只是“快乐路径”的代码，并依赖顶级异常处理来捕获和记录错误，但这可能会导致非常厚（大量行）和难以阅读的日志文件。*

# wordpress - 如何在wordpress中更改链接颜色

> ID：13979465
> 
> 赞同：1
> 
> 时间：2012-12-20T19:52:18.000
> 
> 标签：wordpress, colors, hyperlink

我在网上使用免费的 Wordpress。我想更改链接的颜色。[当我在http://www.w3schools.com](http://www.w3schools.com)测试这段代码时，它运行良好：

```
<!DOCTYPE html>
<html>
<body>
<table style="background-color:white;width:100%;">
<tbody>
<tr valign="TOP">
<td> <img border="0" src="http://www.kuffelcreek.com/favori14.jpg" width="430" height="480" /></td>
<td>
<p><div style="color: #FF0000"><a  href="google" style="text-decoration:none;" onmouseover="this.style.color='#FF0000'" onmouseout="this.style.color='#000000'">google link</a></div></p>
description
</td>
</tr>
</tbody>
</table>
</body>
</html> 
```

但是，当我将这段代码粘贴到 Wordpress 中然后更新它时，它会自动删除`onmouseover="this.style.color='#FF0000'" onmouseout="this.style.color='#000000'"`，代码变成了这样：

```
<table style="background-color:white;width:100%;">
<tbody>
<tr valign="TOP">
<td> <img border="0" src="http://www.kuffelcreek.com/favori14.jpg" width="430" height="480" /></td>
<td>
<p><div style="color:#FF0000;"><a href="google" style="text-decoration:none;">google link</a></div></p>
description
</td>
</tr>
</tbody>
</table> 
```

如何避免 Wordpress 删除我的代码？如何更改 Wordpress 中链接的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:24:08.817

要使用 CSS 更改所有链接的颜色，您可以将其保存到外观 → 自定义设计 → CSS 编辑器：

一个：链接，一个：访问{颜色：#f00；}

# git - 设置 TeamCity 以使用命名位置提取多个 git 存储库

> ID：13979467
> 
> 赞同：7
> 
> 时间：2012-12-20T19:52:22.123
> 
> 标签：git, teamcity

我在创建依赖于两个 git 存储库的 TeamCity 项目构建时遇到问题。特别是，主数据库中有依赖于共享存储库的内容。这并不理想，需要进行更改（也就是将所有共享组件推入 nuget），但首先要做的是。

构建机器需要两个同级结帐文件夹：“项目”和“共享”。然后，从“项目”文件夹中，我想启动一个 rake 任务。

Teamcity 似乎提取了第一个“项目”存储库，签出到 /work 文件夹，然后将其删除并用“共享”存储库中的签出替换它。

关于如何正确拉动的任何想法？

谢谢你，-史蒂夫

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T22:39:31.017

我发现我可以通过使用以下规则条目在存储库定义上设置 VCS 根“签出规则”来移动整个树：

```
+:.=>./Shared 
```

该规则有效地表明“对于此存储库的根文件夹及其下的所有内容，将其全部移动到名为‘Shared’的文件夹下。

然后我对“项目”存储库执行相同的操作，将其移动到“项目”文件夹，我现在在构建时在工作区下设置了两个离散的同级文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:20:39.017

我没有从你的问题中得到太多。我的理解是你在 2 个 repos 中有代码，你想把它们拉到一个文件夹中。在这种情况下，我会使用 git submodules 或 git subtree merge。

参考[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

子模块：第 6.6 章

子树合并：第 6.7 章

# php - 使用 PHP 生成的 UUID 更新表列中的每条记录

> ID：13979469
> 
> 赞同：4
> 
> 时间：2012-12-20T19:52:27.703
> 
> 标签：php, mysql

我有一个名为“合作伙伴”的表格，其中包含大量联系信息。在彻底清理了我收到它的数据之后，我添加了一个 UUID 列，理想情况下我希望通过 PHP $generateobjectid=(uniqid('AGF')); 填充 UUID。

有没有我可以编写的简单脚本，它会遍历数据库并为每一行输入一个 uniqid？

我更愿意保留通过 PHP 生成的 uniqid，以便我可以管理各个条目之间的前缀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:03:18.347

为什么不使用 mysql 函数 UUID()

```
UPDATE XXX set FIELD=CONCAT('AGF',UUID()) 
```

# javascript - Modernizr 会加载脚本一次吗？

> ID：13979477
> 
> 赞同：1
> 
> 时间：2012-12-20T19:53:24.030
> 
> 标签：javascript, firebug, modernizr, yepnope

我正在使用 Modernizr 的加载器（集成的 yepnope.js）有条件地加载 javascript 代码。这是我的代码：

```
Modernizr.load({
test: Modernizr.geolocation,
yep: ['js/get-native-geo-data.js','https://www.google.com/jsapi'],
nope: ['js/get-geo-data-by-ip.js','https://www.google.com/jsapi'],
complete : function () {
    google.load("maps", "3", 
                {other_params: "sensor=false", 'callback':init});
}); 
```

它可以工作，但 FireBug 和 Google Developers 工具中的 Network 选项卡显示它加载了两次 get-native-geo-data.js。我在 native-geo-data.js 中添加了一个 console.log()，并且只打印了一次消息。那么是什么让 FireBug 和 Dev Tools 报告两个网络调用都返回 200，大小为 3K？

这是 Firebug 报告每个 GET 的响应标头的方式（它们是相同的）：

```
HTTP/1.1 200 OK
Date: Thu, 20 Dec 2012 19:39:52 GMT
Server: HttpComponents/4.1.3
Content-Length: 3054
Content-Type: application/x-javascript
Connection: keep-alive 
```

通过 Charles 监控工具运行它后，我看到了相同的结果 - 该函数被调用了两次。那么错误在哪里——在 Modernizr 中，在 yepnope 中，还是在我的脑海中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:28:34.347

不确定您是否在 yepnope 文档中看到过它：

> 我在我的开发工具中看到两个请求，为什么它会加载两次？根据您的浏览器和服务器，这可能意味着一些不同的事情。由于 yepnope 工作方式的性质，每个文件都有两个请求。第一个请求是将资源加载到缓存中，第二个请求是执行它（但由于它在缓存中，它应该立即执行）。只要第二个请求被缓存，看到两个请求是很正常的。如果您注意到第二个请求没有被缓存（并且您的脚本加载时间加倍），那么请确保您发送正确的缓存标头以允许缓存您的脚本。这对 yepnope 至关重要。如果没有启用适当的缓存，它将无法工作。我们实际上进行了测试，以确保在我们的测试套件中不会加载两次，

# jsp - web.xml + jsp 文件，如 servlet

> ID：13979481
> 
> 赞同：0
> 
> 时间：2012-12-20T19:53:46.373
> 
> 标签：jsp, servlets, web.xml, servlet-3.0

我正在尝试将我的 jsp 文件定义为 web.xml 中的 servlet：

```
 <servlet>
      <servlet-name>help.jsp</servlet-name>
      <jsp-file>/Help.jsp</jsp-file>
</servlet>
<servlet-mapping>
      <servlet-name>help.jsp</servlet-name>
      <url-pattern>/Help</url-pattern>
</servlet-mapping> 
```

但是Java给了我一个例外：

```
SEVERE: Servlet.service() for servlet [help.jsp] in context with path [/TestsJS] threw exception [java.lang.NullPointerException] with root cause
java.lang.NullPointerException
    at org.apache.jsp.Help_jsp._jspService(Help_jsp.java:320)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

дек 20, 2012 9:46:08 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [help.jsp] in context with path [/TestsJS] threw exception [java.lang.NullPointerException] with root cause
java.lang.NullPointerException
    at org.apache.jsp.Help_jsp._jspService(Help_jsp.java:320)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我的 Help.jsp 位于项目根文件夹（“Projec/Help.jsp”）中。也许我应该把它放在别的地方？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:03:37.130

JSP 位于正确的位置，并且 web.xml 是正确的。但是，您的 JSP 本身存在错误。

# c# - 下拉菜单中有两列的 WPF 样式组合框

> ID：13979483
> 
> 赞同：7
> 
> 时间：2012-12-20T19:53:58.390
> 
> 标签：c#, wpf, combobox, styles, multiple-columns

我环顾四周，发现了一些东西，现在卡在下拉区域中显示两列的组合框上。我有一个可用的 xaml 主题，并且组合框“样式”已定义并且在整个过程中都按预期运行良好，所以这部分没问题。

现在，我有一个组合框，我需要显示两个值，将其视为下拉列表的状态缩写和状态名称，来自项目的 DataTable.DefaultView 绑定源。

如果我有

```
<my:cboStates TextSearch.TextPath="StateAbbrev">
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal" TextSearch.Text="{Binding Path=StateAbbrev}">
        <TextBlock Text="{Binding Path=StateAbbrev}"/>
        <TextBlock Text="{Binding Path=FullStateName}" Margin="10 0"/>
      </StackPanel>
    </DataTemplate>
  </ComboBox.ItemTemplate>
</my:cboStates> 
```

这行得通。现在，我如何/在哪里卡住了......现在，我希望在 5 个不同的表单上使用相同的功能，并且所有表单都显示相同的内容，并且如果曾经更改（不是这个，而是其他多列组合框），我不想一直把它直接放在表单的 XAML 文件中。

我希望将其放入主题的资源字典文件中，然后一遍又一遍地重复使用该“样式”。说得通。但是，当我这样做并且绑定到数据表时，我在尝试作为样式时得到的唯一结果是下拉菜单显示的值

```
System.Data.DataRowView
System.Data.DataRowView
System.Data.DataRowView
System.Data.DataRowView 
```

而不是实际的 2 列。这是我在“主题”资源字典中的内容。

```
<DataTemplate x:Key="myStateComboTemplate" >
  <StackPanel Orientation="Horizontal"  >
    <TextBlock Text="{Binding Path=StateAbbrev}"/>
    <TextBlock Text="{Binding Path=FullStateName}"/>
  </StackPanel>
</DataTemplate>

<Style x:Key="StyleMyStatesCombobox" TargetType="{x:Type ComboBox}" 
  BasedOn="{StaticResource MyOtherWorkingComboBoxStyle}" >
  <Setter Property="TextSearch.TextPath" Value="{Binding Path=StateAbbrev}" />
  <Setter Property="ItemTemplate" Value="{StaticResource myStateComboTemplate}" />
</Style> 
```

因此，如果我在表单上创建了我的“cboStates”类的两个实例，并将一个设置为第一个列出的显式样式，第二个基于“样式”设置，则第二个仅显示重复的 System.Data 失败.DataRowView 条目，而不是实际的数据内容。

我错过了什么。

所以，澄清我在寻找什么......国家......前数据

```
AL Alabama
AK Alaska
AZ Arizona
AR Arkansas
CA California
CO Colorado
CT Connecticut
DE Delaware 
```

我希望组合框显示缩写的 AL、AK、A​​Z 等和更窄的组合框。这也将是返回时的“SelectedValue”。

实际的下拉菜单将显示上面列出的数据，显示缩写和状态的详细描述。

所需组合框的样本

![在此处输入图像描述](../Images/56890fc0f03c065690983e95f6fc205a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:39:27.137

终于让它工作了......对于那些尝试类似的人。由于我试图拥有一个可以在整个过程中使用的标准“类”实例，但不想在每个页面中显式地硬引用 XAML，因此必须在实际的代码内类实例期间处理部分样式。

由于我不完全知道 .net 框架如何/何时在何处构建其所有控件、样式分配等，因此我感到沮丧的是，如果直接从 xaml 中它会起作用，但在代码中会失败。所以，我最终在代码中强制使用了项目模板和 TextSearch.TextPath 值。这是该课程的简短片段

```
public class myStatesCombo : ComboBox
{
   public myStatesCombo()
   {
      Loaded += myAfterLoaded;
   }

   protected static DataTable myTableOfStates;

   public void myAfterLoaded()
   {
      if( myTableOfStates == null )
        myTableOfStates = new DataTable();

      CallProcedureToPopulateStates( myTableOfStates );

      ItemsSource = myTableOfStates.DefaultView;

      // AFTER the object is created, and all default styles attempted to be set,
      // FORCE looking for the resource of the "DataTemplate" in the themes.xaml file
      object tryFindObj = TryFindResource("myStateComboTemplate" );
      if( tryFindObj is DataTemplate )
         ItemTemplate = (DataTemplate)tryFindObj;

      // NOW, the CRITICAL component missed in the source code
      TextSearch.SetTextPath( this, "StateAbbrev" );
   }
} 
```

现在，特别说明。在我用来填充 DataTable 的例程中，我预先检查了表是否存在。第一次，我创建了表。如果我需要重新填充它，如果我每次都继续做一个“新的 DataTable”，它会吹走数据/项目模板绑定。为了防止这种情况，我会这样做

```
if( myTableOfStates.Rows.Count > 0 )
  myTableOfStates.Rows.Clear(); 
```

然后，我打电话给我的

Sqlexecute 调用从数据库 (DataAdapter) 和 Fill() 数据表中查询。

因此，现在所有内容似乎都已正确填充，显示和文本搜索的绑定已完成并准备就绪。

# php - 从不同的脚本创建月度记录表 2

> ID：13979492
> 
> 赞同：0
> 
> 时间：2012-12-20T19:54:29.630
> 
> 标签：php, mysql

我想请教一些想法支持如何在 PHP 中实现从 5 个不同的 MYSQL 脚本创建表。他们每个人的结果是按月计算的数据组的总和。我不想在脚本上花费太多时间，因为单独激活时它们都可以。

我将提出理论查询，以免我的信息太长。

**重要提示**：所有查询都是独立的并且有自己的连接表。他们没有任何共同之处。但它们都是可以按月份分组的数字。

```
<?php
$qry = "SUM(CASH) group by MONTH DESC";
$result=mysql_query($qry) or die(mysql_error());

$qry2 = "SUM(DEBT) group by MONTH DESC";
$result=mysql_query($qry2) or die(mysql_error());

$qry3 = "SUM(DEBTPAID) group by MONTH DESC";
$result=mysql_query($qry3) or die(mysql_error());

$qry4 = "SUM(INVOICE) group by MONTH DESC";
$result=mysql_query($qry4) or die(mysql_error());

$qry5 = "SUM(NVOICEPAYOFF) group by MONTH DESC";
$result=mysql_query($qry5) or die(mysql_error());
?> 
```

我想实现这样的表：

```
<table>
<tr>
  <td>CASH</td>
  <td>DEBT</td>
  <td>DEBTPAID</td>
  <td>INVOICE</td>
  <td>INVOICEPAYOFF</td>
</tr>
<?
echo '<tr>';

echo '<td><label>'. $row['CASH'] .'</label></td>';
echo '<td><label>'. $row2['DEBT'] .'</label></td>';
echo '<td><label>'. $row3['DEBTPAID'] .'</label></td>';
echo '<td><label>'. $row4['INVOICE'] .'</label></td>';
echo '<td><label>'. $row5['INVOICEPAYOFF'] .'</label></td>';
echo '</tr>';

?>
</table> 
```

我会欣赏您的每一个想法、解决方案或建议。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:23:11.670

如果我理解正确，则无法组合查询（尽管我们可能需要查看完整的查询）。在这种情况下，您可以简单地执行以下操作：

```
$row = array();
$qry = "SUM(CASH) group by MONTH DESC";
$result=mysql_query($qry) or die(mysql_error());
$row['cash'] = mysql_fetch_field($result);

$qry2 = "SUM(DEBT) group by MONTH DESC";
$result=mysql_query($qry2) or die(mysql_error());
$row['debt'] = mysql_fetch_field($result);

$qry3 = "SUM(DEBTPAID) group by MONTH DESC";
$result=mysql_query($qry3) or die(mysql_error());
$row['debtpaid'] = mysql_fetch_field($result);

$qry4 = "SUM(INVOICE) group by MONTH DESC";
$result=mysql_query($qry4) or die(mysql_error());
$row['invoice'] = mysql_fetch_field($result);

$qry5 = "SUM(INVOICEPAYOFF) group by MONTH DESC";
$result=mysql_query($qry5) or die(mysql_error());
$row['invoicepayoff'] = mysql_fetch_field($result);
//Add HTML Table here.
foreach($row as $val){
    echo '<td><label>'. $row['CASH'] .'</label></td>';
} 
```

您应该考虑替换 mysql_ 函数。这些现在已被弃用。

# python - Python 导入 matplotlib.pyplot 不起作用

> ID：13979496
> 
> 赞同：1
> 
> 时间：2012-12-20T19:54:42.063
> 
> 标签：python, macos, matplotlib, easy-install

我已经尝试过 easy_install matplotlib 并具有以下内容：

matplotlib-1.2.0-py2.7-macosx-10.7-intel.egg

安装在我的 Library/Python/2.7/site-packages 中。

当我移动到另一个文件夹以使用该文件夹中的内容并尝试

“import matplotlib.pyplot”它说：ImportError: No module named matplotlib.pyplot

这让我认为 easy_install 的操作不正确。这个问题非常基本，但我正在使用 mac osx，除了了解到在 osx 上安装这个模块非常困难之外，我从大多数来源中学到的东西很少，所以我想知道 SO 上的任何人是否可以帮助我问题。我是 python 新手，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:26:39.217

作为一般规则，您应该始终使用`pip`而不是`easy_install`，除了少数库（所有这些库都记录了这一事实，而您可能关心的唯一一个是`readline`，当然还有`pip`它自己）。

如果你在 OS X 10.7 或 10.8 上，使用 Apple 安装的 Python，你有`easy_install`内置的，但没有`pip`. 要解决这个问题：

```
sudo easy_install pip 
```

现在，您可以这样做：

```
sudo pip install matplotlib 
```

通常，这实际上并不能解决您遇到的问题。使用的原因`pip`是它`easy_install`没有卸载功能，它处理升级很糟糕，它最终可能会在失败时留下部分安装的东西，它不能与 virtualenv 一起工作，等等。

但听起来你很幸运，这个改变神奇地解决了你的问题。我们可以尝试诊断原始问题。（你为什么用`-m`with `easy_install`？有用`pip install --egg`吗？等等。）但我猜你对结果很满意，只是想留下足够的东西。

对于未来的读者来说，`sudo easy_install -m matplotlib`Apple 10.7 Python 2.7 的股票似乎不起作用，但`sudo pip install matplotlib`确实如此，这对他们来说也可能足够好。

# wpf - 我怎样才能得到一个视觉相对于另一个视觉坐标系的边界？

> ID：13979500
> 
> 赞同：0
> 
> 时间：2012-12-20T19:54:55.520
> 
> 标签：wpf, interface, coordinate-transformation

在实施`IScrollInfo`'s `MakeVisible`member 时，我遇到了一个问题。我需要获取`Visual`相对于正在滚动的面板的边界坐标。

现在，如果这是 a `UIElement`，这将很容易，因为我只需调用它的 'TranslatePoint' 方法，但`UIElement`它是 的子类`Visual`，而不是相反，所以我不一定能指望它。

如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:02:38.233

Visual 提供了[TransformToVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.transformtovisual.aspx)方法，该方法返回可用于变换点或矩形的[GeneralTransform ：](http://msdn.microsoft.com/en-us/library/system.windows.media.generaltransform.aspx)

```
var transform = visual1.TransformToVisual(visual2);
var point = transform.Transform(new Point(...)); 
```

如果`visual1`是一个 ContainerVisual，你可以这样做：

```
var bounds = transform.TransformBounds(visual1.ContentBounds); 
```

或者

```
var bounds = transform.TransformBounds(visual1.DescendantBounds); 
```

# c++ - 将一组表插入到一个表中 SQLite C/C++

> ID：13979502
> 
> 赞同：3
> 
> 时间：2012-12-20T19:54:56.773
> 
> 标签：c++, sql, c, arrays, sqlite

我制作了自己的数据库格式，遗憾的是它需要太多的内存，而且它的大小变得非常可怕，而且维护起来也很糟糕。

因此，我正在寻找一种将对象中的结构数组存储到表中的方法。

我猜我需要使用 blob，但欢迎所有其他选项。实现 blob 的简单方法也会有所帮助。

我附上了我的保存代码和相关结构（从我之前可怕的帖子更新）

```
#include "stdafx.h"
#include <string>
#include <stdio.h>
#include <vector>
#include "sqlite3.h"
using namespace std;
struct PriceEntry{

    float cardPrice;
    string PriceDate;
    int Edition;
    int Rarity;
};
struct cardEntry{
    string cardName;
    long pesize;
    long gsize;
    vector<PriceEntry> cardPrices;
    float vThreshold;
    int fav;
};

vector<cardEntry> Cards;

void FillCards(){
  int i=0;
  int j=0;
  char z[32]={0};
  for(j=0;j<3;j++){
     cardEntry tmpStruct;
     sprintf(z, "Card Name: %d" , i);
     tmpStruct.cardName=z;
     tmpStruct.vThreshold=1.00;
     tmpStruct.gsize=0;
     tmpStruct.fav=1;
            for(i=0;i<3;i++){
                PriceEntry ss;
                ss.cardPrice=i+1;
                ss.Edition=i;
                ss.Rarity=i-1;

                sprintf(z,"This is struct %d", i);

                ss.PriceDate=z;
                tmpStruct.cardPrices.push_back(ss);
            }

            tmpStruct.pesize=tmpStruct.cardPrices.size();
            Cards.push_back(tmpStruct);
  }
}
int SaveCards(){
      // Create an int variable for storing the return code for each call
    int retval;
    int CardCounter=0;
    int PriceEntries=0;
    char tmpQuery[256]={0};

    int q_cnt = 5,q_size = 256;

    sqlite3_stmt *stmt;

    sqlite3 *handle;

    retval = sqlite3_open("sampledb.sqlite3",&handle);

    if(retval)
    {
        printf("Database connection failed\n");
        return -1;
    }
    printf("Connection successful\n");

    //char create_table[100] = "CREATE TABLE IF NOT EXISTS users (uname TEXT PRIMARY KEY,pass TEXT NOT NULL,activated INTEGER)";
    char create_table[] = "CREATE TABLE IF NOT EXISTS Cards (CardName TEXT, PriceNum NUMERIC, Threshold NUMERIC, Fav NUMERIC);";

    retval = sqlite3_exec(handle,create_table,0,0,0);
    printf( "could not prepare statemnt: %s\n", sqlite3_errmsg(handle) );
    for(CardCounter=0;CardCounter<Cards.size();CardCounter++){
        char Query[512]={0};

        for(PriceEntries=0;PriceEntries<Cards[CardCounter].cardPrices.size();PriceEntries++){

              //Here is where I need to find out the process of storing the vector of PriceEntry for Cards then I can modify this loop to process the data

       }

            sprintf(Query,"INSERT INTO Cards VALUES('%s',  %d, %f, %d)",            
            Cards[CardCounter].cardName.c_str(),
            Cards[CardCounter].pesize,
            Cards[CardCounter].vThreshold,
            Cards[CardCounter].fav); //My insert command  

        retval = sqlite3_exec(handle,Query,0,0,0);
        if(retval){

            printf( "Could not prepare statement: %s\n", sqlite3_errmsg(handle) );

        }
    }
    // Insert first row and second row

    sqlite3_close(handle);
    return 0;
} 
```

我尝试谷歌搜索，但我的结果还不够。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T02:15:19.473

这里有两种类型：卡片和价格条目。对于每张卡，可以有许多 PriceEntries。

您可以将卡片存储在一张表中，每行一张卡片。但是您对如何存储 PriceEntries 感到困惑，对吧？

您通常在这里做的是为 PriceEntries 设置第二个表，以 Cards 表的唯一列（或列）为键。我猜 CardName 对于每张卡都是唯一的？让我们一起去吧。因此，您的 PriceEntry 表将有一个 CardName 列，然后是 PriceEntry 信息列。每个 PriceEntry 都有一行，即使 CardName 列中有重复项。

PriceEntry 表可能如下所示：

```
CardName  | Some PE value  | Some other PE value
Ace       | 1 | 1
Ace       | 1 | 5
2         | 2 | 3 
```

等等。所以当你想找到一张卡片的 PriceEntries 数组时，你会这样做

```
select * from PriceEntry where CardName = 'Ace' 
```

从上面的示例数据中，您将返回 2 行，您可以将其放入一个数组中（如果您愿意的话）。

不需要 BLOB！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T02:55:43.453

这是一个简单的序列化和反序列化系统。PriceEntry 类已通过序列化支持进行了扩展（非常简单）。现在您所要做的就是将 PriceEntry（或其中的一组）序列化为二进制数据并将其存储在 blob 列中。稍后，您将获得 blob 数据并从中反序列化具有相同值的新 PriceEntry。底部给出了如何使用它的示例。享受。

```
#include <iostream>
#include <vector>
#include <string>
#include <cstring> // for memcpy

using std::vector;
using std::string;

// deserialization archive
struct iarchive
{
    explicit iarchive(vector<unsigned char> data)
    : _data(data)
    , _cursor(0)
    {}

    void read(float& v)          { read_var(v); }
    void read(int& v)            { read_var(v); }
    void read(size_t& v)         { read_var(v); }
    void read(string& v)         { read_string(v); }

    vector<unsigned char> data() { return _data; }

private:

    template <typename T>
    void read_var(T& v)
    {
      // todo: check that the cursor will not be past-the-end after the operation

      // read the binary data
      std::memcpy(reinterpret_cast<void*>(&v), reinterpret_cast<const void*>(&_data[_cursor]), sizeof(T));

      // advance the cursor
      _cursor += sizeof(T);
    }

    inline

    void
    read_string(string& v)
    {  
      // get the array size
      size_t sz;
      read_var(sz);

      // get alignment padding
      size_t padding = sz % 4;
      if (padding == 1) padding = 3;
      else if (padding == 3) padding = 1;

      // todo: check that the cursor will not be past-the-end after the operation

      // resize the string
      v.resize(sz);

      // read the binary data
      std::memcpy(reinterpret_cast<void*>(&v[0]), reinterpret_cast<const void*>(&_data[_cursor]), sz);

      // advance the cursor
      _cursor += sz + padding;
    }

    vector<unsigned char> _data;    // archive data
    size_t _cursor;                 // current position in the data
};

// serialization archive
struct oarchive
{
    void write(float v)          { write_var(v); }
    void write(int v)            { write_var(v); }
    void write(size_t v)         { write_var(v); }
    void write(const string& v)  { write_string(v); }

    vector<unsigned char> data() { return _data; }

private:

    template <typename T>
    void write_var(const T& v)
    {
      // record the current data size
      size_t s(_data.size());

      // enlarge the data
      _data.resize(s + sizeof(T));

      // store the binary data
      std::memcpy(reinterpret_cast<void*>(&_data[s]), reinterpret_cast<const void*>(&v), sizeof(T));
    }

    void write_string(const string& v)
    {
      // write the string size
      write(v.size());

      // get alignment padding
      size_t padding = v.size() % 4;
      if (padding == 1) padding = 3;
      else if (padding == 3) padding = 1;

      // record the data size
      size_t s(_data.size());

      // enlarge the data
      _data.resize(s + v.size() + padding);

      // store the binary data
      std::memcpy(reinterpret_cast<void*>(&_data[s]), reinterpret_cast<const void*>(&v[0]), v.size());
    }

    vector<unsigned char> _data;     /// archive data
};

struct PriceEntry
{
    PriceEntry()
    {}

    PriceEntry(iarchive& in) // <<< deserialization support
    {
        in.read(cardPrice);
        in.read(PriceDate);
        in.read(Edition);
        in.read(Rarity);
    }

    void save(oarchive& out) const // <<< serialization support
    {
        out.write(cardPrice);
        out.write(PriceDate);
        out.write(Edition);
        out.write(Rarity);
    }

    float cardPrice;
    string PriceDate;
    int Edition;
    int Rarity;
};

int main()
{    
    // create a PriceEntry
    PriceEntry x;
    x.cardPrice = 1;
    x.PriceDate = "hi";
    x.Edition = 3;
    x.Rarity = 0;

    // serialize it
    oarchive out;   
    x.save(out);

    // create a deserializer archive, from serialized data
    iarchive in(out.data());

    // deserialize a PriceEntry
    PriceEntry y(in);

    std::cout << y.cardPrice << std::endl;
    std::cout << y.PriceDate << std::endl;
    std::cout << y.Edition << std::endl;
    std::cout << y.Rarity << std::endl;
} 
```

# java - 读取和写入文件时出错 (Java)

> ID：13979505
> 
> 赞同：-3
> 
> 时间：2012-12-20T19:55:18.177
> 
> 标签：java, file, object, load, save

大家好，我刚刚在我的程序中实现了目标文件，并且我不断收到错误（读​​取文件错误和写入文件问题）这些是我的 try catch 块中的 2 个错误，当我尝试读取文件时它没有加载，保存也不行。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;

public class Stores implements Serializable
{
    public static ArrayList<Student> stud1 = new ArrayList<Student>();
    public static ArrayList<SubjectTeacher> sTeach1 = new ArrayList<SubjectTeacher>();
    private static int iT = 0;
    private static int iS = 0;

    public static void savet (ArrayList<SubjectTeacher> teachIn, int count)
        {
            iT = count;
            sTeach1 = teachIn;
            saveTeachToFile();
        }

    public static void saves (ArrayList<Student> studIn, int count)
        {
            iS = count;
            stud1 = studIn;
            saveStudToFile();
        }

    public static ArrayList<Student> getStud ()
        {
            return stud1;
        }

    public static ArrayList<SubjectTeacher> getTeach ()
        {
            return sTeach1;
        }

    public static int getStudSize()
        {
            return stud1.size();
        }

    public static int getTeachSize()
        {
            return sTeach1.size();
        }

    private static void saveStudToFile()
    {
        try
        {
            // create a FileOutputStream object which will handles the writing of the sudent list of objects to the file.
            FileOutputStream studentFile = new FileOutputStream("Students.obf");
            // the OutputObjectStream object will allow us to write whole objects to and from files
            ObjectOutputStream studentStream = new ObjectOutputStream(studentFile);

            for(Student item: stud1)    // enhanced for loop
            // Loop through the list of studentsListIn and for each of these objects, wite them to the file
            {
                studentStream.writeObject(item);
            }
            //close the file so that it is no longer accessible to the program
            studentStream.close();
        }

        catch(IOException e)
        {
            System.out.println("There was a problem writing the File");
        }
    }

    private static void saveTeachToFile()
    {
        try
        {
            FileOutputStream teacherFile = new FileOutputStream("Teacher.obf");
            ObjectOutputStream teacherStream = new ObjectOutputStream(teacherFile);

            for(SubjectTeacher item1: sTeach1)  // enhanced for loop
            {
               teacherStream.writeObject(item1);
            }
            //close the file so that it is no longer accessible to the program
            teacherStream.close();
        }

        catch(IOException e)
        {
            System.out.println("There was a problem writing the File");
        }
    }

    public static void loadStudentList()
    {
        boolean endOfFile = false;
        Student tempStudent;

        try
        {
            // create a FileInputStream object, studentFile
            FileInputStream studentFile = new FileInputStream("Students.obf");
            // create am ObjectImnputStream object to wrap around studentStream
            ObjectInputStream studentStream = new ObjectInputStream(studentFile) ;

            // read the first (whole) object with the readObject method
            tempStudent = (Student) studentStream.readObject();

            while (endOfFile != true)
            {
                try
                {
                    stud1.add(tempStudent);
                    // read the next (whole) object
                    tempStudent = (Student) studentStream.readObject();
                }

                //use the fact that the readObject throws an EOFException to check whether the end of eth file has been reached
                catch(EOFException e)
                {
                    endOfFile = true;
                }

                studentStream.close();
            }
        }
        catch(FileNotFoundException e)
        {
            System.out.println("File not found");
        }

        catch(ClassNotFoundException e)   // thrown by readObject
        /* which indicates that the object just read does not correspond to any class
        known to the program */
        {
            System.out.println("Trying to read an object of an unkonown class");
        }

        catch(StreamCorruptedException e)   //thrown by constructor
        // which indicates that the input stream given to it was not produced by an ObjectOutputStream object         {
        {
           System.out.println("Unreadable File Format");
        }

        catch(IOException e)
        {
            System.out.println("There was a problem reading the file");
        }
    }

    public static void loadTeacherList()
    {
        boolean endOfFile = false;
        SubjectTeacher tempTeacher;

        try
        {

            FileInputStream teacherFile = new FileInputStream("Teacher.obf");

            ObjectInputStream teacherStream = new ObjectInputStream(teacherFile) ;

            tempTeacher = (SubjectTeacher) teacherStream.readObject();

            while (endOfFile != true)
            {
                try
                {
                    sTeach1.add(tempTeacher);
                    // read the next (whole) object
                    tempTeacher = (SubjectTeacher) teacherStream.readObject();
                }

                //use the fact that the readObject throws an EOFException to check whether the end of eth file has been reached
                catch(EOFException e)
                {
                    endOfFile = true;
                }

                teacherStream.close();
            }
        }
        catch(FileNotFoundException e)
        {
            System.out.println("File not found");
        }

        catch(ClassNotFoundException e)   // thrown by readObject
        /* which indicates that the object just read does not correspond to any class
        known to the program */
        {
            System.out.println("Trying to read an object of an unkonown class");
        }

        catch(StreamCorruptedException e)   //thrown by constructor
        // which indicates that the input stream given to it was not produced by an ObjectOutputStream object         {
        {
           System.out.println("Unreadable File Format");
        }

        catch(IOException e)
        {
            System.out.println("There was a problem reading the file");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:22:18.113

~~好吧，一方面，您应该使用正确的代码编辑问题，这样它就不会被关闭。其次，~~可能会发生一些事情。

1.  您写入文件的类不可序列化
2.  这些文件以某种方式被只读或写保护

根据您更新的问题中的代码，您可能会混淆哪些类需要实现`Serializable`。需要实现的类是您实际写入文件的类（即`SubjectTeacher`，等）。

检查这两个，让我知道你发现了什么。

另外，我建议单步执行代码并查看运行时异常的样子。你会更好地了解正在发生的事情。

# php - 将值插入数据库的问题

> ID：13979506
> 
> 赞同：1
> 
> 时间：2012-12-20T19:55:20.847
> 
> 标签：php, mysql, pdo

这段代码有什么问题，我正在使用表单将一些值插入数据库，我有一个这样的控制器设置。当我提交表单时，该值未发布在数据库中，但如果我删除所有其他字段并在表单中只留下 2 个字段并发布它，它可以工作，所以我想念一些东西，一直试图解决超过6小时。请帮忙：

```
//database insertion

 if (isset($_POST['VideoTITLE']))
 if (isset($_POST['ByArtist']))
 if (isset($_POST['GroupName']))
 if (isset($_POST['URL'])) 
 if (isset($_POST['VideoDate']))
 {

  try
 {
 $sql = 'INSERT INTO videoclip SET
        VideoTITLE = :VideoTITLE,
        ByArtist   = :ByArtist,
        GroupName  = :GroupName,
        URL        = :URL,
        VideoDate  = CURDATE()
        ';

    $s = $pdo -> prepare($sql);
    $s -> bindValue(':VideoTITLE',$_POST['VideoTITLE']);
    $s -> bindValue(':ByArtist',$_POST['ByArtist']);
    $s -> bindValue(':GroupName',$_POST['GroupName']);
    $s -> bindValue(':URL',$_POST['URL']);
    $s -> execute();
}
  catch(PDOException $e)
  {
    $error = 'error adding submitted data' . $e-> getMessage();
    include 'error.html.php';
    exit();
  }
    header('Location:.');
    exit();
} 
```

这是我的 html 表单设置：

```
<form action="?" method="post" class="form-horizontal">
   <legend>Song Info</legend>

<fieldset>
<label>Song Title </label>
<input type="text" id="VideoTITLE" name="VideoTITLE" placeholder="song name…">

<label>Artist </label>
<input type="text" id="ByArtist" name="ByArtist" placeholder="artist name…">

<label>Musical Group</label>
<input type="text" id="GroupName" name="GroupName" placeholder="Type something…">

<label>Poster link</label>
<input type="text" id="URL" name="URL" placeholder="Type something…">

</fieldset><br>
<input  type="submit" class="btn  btn-success" value="Post video">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:02:22.590

它有几个问题，也许更多：

1.  您`isset($_POST['VideoDate'])`的 if 条件始终为假，因为`VideoDate`不在您的形式中。你应该把它拿出来，因为你似乎想`CURDATE()`在你的插入脚本中设置它。
2.  您的插入语句不正确。mysql插入通常看起来像`INSERT INTO TABLE_NAME (COL1, COL2) values('VALUE1', 'VALUE2');`所以你应该改变你的插入代码看起来像

    `$sql = 'INSERT INTO videoclip (VideoTITLE, ByArtist, GroupName, URL, VideoDate) values (:VideoTITLE, :ByArtist, :GroupName, :URL, CURDATE())';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:03:19.607

您的语法对于`INSERT`. 它应该是这样的：

```
$sql = 'INSERT INTO videoclip (VideoTITLE, ByArtist, GroupName, URL, VideoDate) 
    VALUES (:VideoTITLE, :ByArtist, :GroupName, :URL, CURDATE())'; 
```

此外，`$_POST['VideoDate']`由于您的表单中没有它，因此无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:46:22.850

你做错了`if`陈述。

```
if (isset($_POST['VideoTITLE']) && isset($_POST['ByArtist']) && isset($_POST['GroupName'])
    && isset($_POST['URL']) && isset($_POST['VideoDate'])) {
....
} 
```

这是基本的编程内容，因此您可能想要一本很好的编程或 PHP 入门书。

# database - 将 MyISAM 转换为 InnoDB - 如何处理全文列

> ID：13979507
> 
> 赞同：0
> 
> 时间：2012-12-20T19:55:28.333
> 
> 标签：database, innodb, myisam, full-text-search

我正在将所有数据库表切换到 InnoDB，以便我可以使用事务。我在某些表格中制作了某些列全文，以便在以后构建一些搜索功能。

我知道有一些服务器端解决方案更适合搜索，所以我很乐意在时机成熟时研究这些，但是我应该暂时将列转换为什么，大多数用于存储带有标记的文本，但是长度的条目变化很大（最多 1000 个字符）。

我只是将它们设置为 varchar (1200) 吗？这适合搜索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:07:55.250

MySQL 5.6 确实支持[InnoDB 的全文索引](http://www.drdobbs.com/database/full-text-search-with-innodb/231902587)。

或者使用外部全文索引，如 Sphinx 或 Lucene

# python - igraph：有属性时如何使用add_edges？

> ID：13979508
> 
> 赞同：8
> 
> 时间：2012-12-20T19:55:28.187
> 
> 标签：python, igraph

如果我需要在其中创建一个图`igraph`并添加一堆边，但这些边有关联的属性怎么办？看起来`.add_edges`只能获取没有属性的边缘列表，所以我一直在将它们一一添加`.add_edge`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-04T14:03:06.420

```
graph.add_edge('A','B',weight = 20) 
```

这里 A 和 B 是节点的名称

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T20:37:59.013

您可以稍后分配属性；例如：

```
graph.es["weight"] = range(g.ecount()) 
```

这将一次为所有边分配权重。如果您只想将属性分配给边的子集，请索引或切片边序列 ( `g.es`)，但您需要：

```
graph.es[10:20]["weight"] = range(10) 
```

# c - pthreads：如何断言代码在单线程上下文中运行

> ID：13979510
> 
> 赞同：7
> 
> 时间：2012-12-20T19:55:41.363
> 
> 标签：c, multithreading, pthreads, posix, fork

我正在编写一个在初始化期间需要 fork() 的 C 库。因此，我想 assert() 应用程序代码（不在我的控制范围内）从单线程上下文调用我的库初始化代码（以避免众所周知的“[线程和分叉不混合](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them)”问题）。一旦我的库被初始化，它就是线程安全的（并且期望应用程序级代码可以创建线程）。我只关心支持 pthreads。

使用 pthreads 计算当前进程空间中的线程数似乎是不可能的。事实上，即使是 googletest 也只在 Mac OS 和 QNX 上实现[GetThreadCount() 。](http://code.google.com/p/googletest/source/browse/trunk/src/gtest-port.cc#128)

鉴于我无法计算线程数，是否有可能我可以断言一个单线程上下文？

澄清：如果可能，我想避免使用“/proc”（不可移植）、附加的库依赖项（如 libproc）和 LD_PRELOAD 样式的 pthread_create 包装器。

澄清 #2：在我的情况下，使用多个进程是必要的，因为我的库中的工作人员相对较重（使用 webkit）并且可能会崩溃。但是，我希望原始进程能够在工人崩溃中幸存下来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:34:21.610

您可以将库初始化函数标记为在应用程序之前运行`main()`。例如，使用 GCC，

```
static void my_lib_init(void) __attribute__((constructor));

static void my_lib_init(void)
{
    /* ... */
} 
```

另一种选择是用于[`posix_spawn()`](http://linux.die.net/man/3/posix_spawn)将工作进程作为单独的从属二进制文件进行分叉和执行。

编辑添加：

在我看来，如果您希望确定进程是否已经创建（实际的、基于内核的）线程，您将不得不依赖特定于操作系统的代码。

在 Linux 的情况下，确定很简单，并且在其他操作系统上运行也很安全。如果无法确定当前进程使用的线程数，该函数将返回-1：

```
#include <unistd.h>
#include <sys/types.h>
#include <dirent.h>
#include <errno.h>

int count_threads_linux(void)
{
    DIR           *dir;
    struct dirent *ent;
    int            count = 0;

    dir = opendir("/proc/self/task/");
    if (!dir)
        return -1;

    while (1) {

        errno = 0;
        ent = readdir(dir);
        if (!ent)
            break;

        if (ent->d_name[0] != '.')
            count++;
    }

    if (errno) {
        const int saved_errno = errno;
        closedir(dir);
        errno = saved_errno;
        return -1;
    }

    if (closedir(dir))
        return -1;

    return count;
} 
```

在某些情况下（例如 chroot without `/proc/`）即使在 Linux 中该检查也会失败，因此`-1`返回值应始终被视为*未知*而不是*错误*（尽管`errno`会指示失败的实际原因）。

查看 FreeBSD 手册页，我想知道是否有相应的信息可用。

最后：

与其尝试检测有问题的情况，我强烈建议您`fork()`和`exec()`（或）从属进程，在子进程（在 之前）中`posix_spawn()`仅使用异步信号安全函数（参见） ，从而避免 fork()-thread 并发症。您仍然可以在 forking() 之前创建任何共享内存段、套接字对等。我能看到的唯一缺点是您必须为奴隶工人使用单独的二进制文件。鉴于您对它们的描述，这对我来说听起来不是一个缺点。[`man 7 signal`](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)`exec()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T02:13:30.197

If you send a SIGINFO signal to the process' controlling tty, the process should describe the status of threads. From the description it should be possible to deduce whether any threads have been created.

You may have to develop a small utility that is invoked via popen to read the output back into your library.

Added sample code Fri Dec 21 14:45

Run a simple program that creates five threads. Threads basically sleep. Before the program exits, send a SIGINFO signal to get the status of the threads.

```
openbsd> cat a.c
#include <unistd.h>
#include <pthread.h> 

#define THREADS 5

void foo(void);

int
main()
{    
    pthread_t thr[THREADS];
    int j;

    for (j = 0; j < THREADS; j++) {
        pthread_create(&thr[j], NULL, (void *)foo, NULL);
    }   

    sleep(200);                             

    return(0);
}             

void
foo()
{   
    sleep(100);
}             
openbsd> gcc a.c -pthread
openbsd> a.out &
[1] 1234
openbsd> kill -SIGINFO 1234
 0x8bb0e000 sleep_wait  15 -c---W---f 0000          
 0x8bb0e800 sleep_wait  15 -c---W---f 0000          
 0x8bb0e400 sleep_wait  15 -c---W---f 0000          
 0x7cd3d800 sleep_wait  15 -c---W---f 0000          
 0x7cd3d400 sleep_wait  15 -c---W---f 0000          
 0x7cd3d000 sleep_wait  15 -c---W---f 0000 main 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T17:10:26.597

您可以使用 use[`pthread_once()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_once.html "pthread_once")来确保没有其他线程在做同样的事情：这样您就不必关心多个线程正在调用您的初始化函数，只有一个线程会真正执行。

让您的公共初始化函数通过`pthread_once()`.

```
static pthread_once_t my_initialisation_once = PTHREAD_ONCE_INIT;

static void my_initialisation(void)
{
    /* do something */
}

int lib_initialisation(void)
{
    pthread_once(&my_initialisation_conce, my_initialisation);

    return 0;
} 
```

另一个例子可以在[这里](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fusers_27.htm)找到。

**链接**

*   [如何保护基于 C 的库的 init 函数？](https://stackoverflow.com/questions/3555815/how-to-protect-init-function-of-a-c-based-library)
*   [POSIX 线程 - 只做一次](https://stackoverflow.com/questions/11580509/posix-threads-do-something-only-once)

# c - 在 C 中从服务器和客户端以 UDP 发送和接收

> ID：13979511
> 
> 赞同：2
> 
> 时间：2012-12-20T19:55:41.933
> 
> 标签：c, sockets, datagram

我正在尝试实现一个服务器和一个客户端，它们都发送和接收（以不同的顺序）数据报。我正在尝试以下方式，但未发送/接收来自客户端的数据报。

这里的客户：

```
#include <sys/socket.h>
#include<netdb.h>
#include <netinet/in.h>
#include <stdio.h>

#define DATA "Este es el mensaje ...."

int main(int argc, char *argv[])
{
 int sock, lon2;
 struct sockaddr_in name, name2;
 struct hostent *hp;
 char buf[1024];

 sock=socket(PF_INET,SOCK_DGRAM,0);

 if (sock<0)
    {
     perror("Abriendo socket de datagramas");
     exit(1);
    }

 /*devuelve una estructura hostent para el host especificado en argv[1]*/
 /*para obtener la direccion IP a partir del nombre de la maquina*/
 hp=gethostbyname(argv[1]);

 if (hp == 0)
    {
     fprintf(stderr,"%s: host desconocido",argv[1]);
     exit(2);
    }

 /*Copiamos en la estructura name la direccion del ordenador al que */
 /*vamos a conectarnos.*/
 memcpy((char *)&name.sin_addr, (char *)hp->h_addr, hp->h_length);

 name.sin_family = AF_INET;
 name.sin_port   = htons(atoi(argv[2]));

 if (sendto(sock,DATA,strlen(DATA)+1,0,(struct sockaddr *)&name,sizeof(name))<0)
    perror("Enviando un datagrama");

 if (read(sock,buf,1024)<0)
    perror("Recibiendo el datagrama");   

 printf("-->%s\n",buf);   
 close(sock);
 exit(0);       
} 
```

这里是服务器：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <stdio.h>
#define DATA "Este es el mensaje ....bvbvbvbv"
int main()
{
 int sock, length, lon2;
 struct sockaddr_in name;
 char buf[1024];

 sock=socket(PF_INET,SOCK_DGRAM,0);

 if (sock<0)
    {
     perror("Abriendo socket de datagramas");
     exit(1);
    }

 /*Formato de la direccion*/
 name.sin_family=AF_INET;   

 /*Direccion IP, INADDR_ANY -> que cuando se use bind para asociar una*/
 /*direccion a un socket, la direccion IP es la de la maquina donde esta*/
 /*ejecutandose el programa.*/                        
 name.sin_addr.s_addr=htonl(INADDR_ANY);

 /*0-> cuando se utilice bind(), el puerto que se va a asociar al socket es */
 /*uno libre asignado por el SO.*/
 name.sin_port=htons(0);

 if (bind(sock,(struct sockaddr *)&name, sizeof(name))<0)
    {
     perror("Asociando nombre al socket");
     exit(1);
    } 

 /*Hasta despues del bind no sabremos la direccion del socket asignada.*/
 /*=> usar getsockname()*/    

 length=sizeof(name);

 /*sock   = socket del que queremos saber la direccion*/
 /*name   = estructura en la que se va a dejar la direccion*/
 /*length = tamano ocupado por la estructura.*/ 
 if (getsockname(sock,(struct sockaddr *)&name,&length)<0)
    {
     perror("Averiguando el nombre del socket");
     exit(1);
    }   

/*Imprimimos el puerto para que el emisor mande a ese puerto.*/    
 printf("puerto del socket -->%d\n", ntohs(name.sin_port));

 if (recvfrom(sock,buf,1024,0,(struct sockaddr *)NULL,&lon2)<0)
    perror("Recibiendo el datagrama"); 

 printf("-->%s\n",buf);

 if (sendto(sock,DATA,strlen(DATA)+1,0,(struct sockaddr *)&name,sizeof(name))<0)
    perror("Enviando un datagrama");

 close(sock);
 exit(0);       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:26:34.073

您的客户端代码很好，但您确实应该“绑定”客户端套接字。（指定 sin_port=0 可以让操作系统选择一个随机端口号）。我认为如果套接字没有被“绑定”到端口并且没有实际监听端口，那么某些操作系统将为每个 sendto 选择一个随机端口。我可能会将其与其他内容混淆，但无论如何，为客户端套接字调用 bind 是一件好事。绑定到端口 0 至少会使套接字监听它发送数据的同一个端口。

```
sockaddr_in localAddr = {}; // zero's out sin_port and sets sin_addr to INADDR_ANY (0)
int result;

localAddr.sin_family = PF_INET;
sock=socket(PF_INET,SOCK_DGRAM,0);
if (sock < 0) {perror("socket error"); exit(1);}

result = bind(sock, (sockaddr*)&localAddr, sizeof(localAddr));
if (result < 0) {perror("bind error"); exit(1);} 
```

但这不是你唯一的问题。在您的服务器代码中：

```
if (recvfrom(sock,buf,1024,0,(struct sockaddr *)NULL,&lon2)<0)
    perror("Recibiendo el datagrama"); 

 printf("-->%s\n",buf);

if (sendto(sock,DATA,strlen(DATA)+1,0,(struct sockaddr *)&name,sizeof(name))<0)
    perror("Enviando un datagrama"); 
```

您实际上并没有将数据发送回接收数据的远程 IP/端口。这更有可能起作用：

```
sockaddr_in remoteClient = {};
socklen_t remoteClientSize = sizeof(remoteClient);

if (recvfrom(sock,buf,1024,0,(struct sockaddr *)&remoteClient,&remoteClientSize)<0)
    perror("Recibiendo el datagrama"); 

 printf("-->%s\n",buf);

if (sendto(sock,DATA,strlen(DATA)+1,0,(struct sockaddr *)&remoteClient,remoteClientSize)<0)
    perror("Enviando un datagrama"); 
```

# jsp - 在 Java 和 JSP 中使用映射

> ID：13979515
> 
> 赞同：0
> 
> 时间：2012-12-20T19:55:55.087
> 
> 标签：jsp, hashmap, jstl

我发现很难从 Hashmap 访问 JSP 中的值，其键包含特殊字符，如“：”。我需要它，因为我必须访问来自后端调用的 jcr:title。我可以从地图中获取值并使用不同的键将其放回，但是有没有办法在 JSP 中访问这些键？

当深度增加时会出现更多问题，例如当我们获取地图列表等时。

我也尝试使用 map["key"].. 但是当我们使用标签将它设置为参数时失败

提前致谢

这是我的代码的样子

```
<c:forEach var="test" items=${someList(someMap)}>
    ${test.jcr:title} // not working
<c:forEach>

<c:set var="someValue" value="${someMap["someKey"]}"> //this fails 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:53:15.233

该`":"`字符在 EL 表达式中无效（除非您使用*内联 if*运算符`? :`），这就是您的第一次尝试“*不起作用*”的原因。

在第二个中，您应该在 EL 表达式中使用单引号，即：

```
<c:set var="someValue" value="${someMap['someKey']}"> 
```

# c# - 在内存中不支持 SQLite Nhibernate 关键字：'fulluri' 错误

> ID：13979520
> 
> 赞同：1
> 
> 时间：2012-12-20T19:56:14.027
> 
> 标签：c#, .net

我正在尝试在我的 Nhibernate 基类中创建一个“内存中”SQLite db 以用于测试目的。当我在我的测试工厂运行单元测试时，我得到：

`Unable to create instance of class NhibernateTests.Tests. Error: System.ArgumentException: Keyword not supported: 'fulluri'..`

我使用的是 SQLite 版本 1.0.82.0，所以我知道我使用的是支持 FullUri 的版本（[请参阅此处](http://system.data.sqlite.org/index.html/doc/trunk/www/news.wiki)）

这是我的连接字符串：

`ConnectionString = "FullUri=file:memorydb.db?mode=memory&cache=shared";`

我也试过：

`ConnectionString = "FullUri=file::memory:?cache=shared";`

结果相同。关于什么会导致这种情况的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:08:44.903

`Data Source=:memory:;`是连接字符串所需的全部内容

# c# - 如何处理来自 Excel 文件的日期格式并使用 C# 将其转换为 MM/DD/YYYY？

> ID：13979524
> 
> 赞同：3
> 
> 时间：2012-12-20T19:56:40.407
> 
> 标签：c#, asp.net, c#-4.0, datetime

我有 Excel 文件中的日期。到目前为止的要求是，它可以采用 YYYY-MM-DD 格式。

于是我写了下面的代码把它转换成MM/dd/yyyy：

```
DateTime excelDate = DateTime.ParseExact(value, 
                                         "yyyy-MM-dd", 
                                         CultureInfo.InvariantCulture, 
                                         DateTimeStyles.None);

value = value != "" ? excelDate.ToString("MM/dd/yyyy") : value; 
```

但现在的要求是：它可以采用 **YYYY-MM-DD**或**MM/DD/YYYY**或**YYYYMMDD**或**MM-DD-YY**等任何格式。想知道如何快速处理这些并将其转换为 MM/DD/YYYY 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T20:01:11.373

需要和格式字符串*数组*有一个[重载。](http://msdn.microsoft.com/en-us/library/332de853.aspx)[`ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)

 *```
var formats = new string[] {"yyyy-MM-dd", "MM/dd/yyyy", "yyyyMMdd", "MM-dd-yy"};
DateTime excelDate = DateTime.ParseExact(value, 
                                         formats, 
                                         CultureInfo.InvariantCulture, 
                                         DateTimeStyles.None); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:13:33.043

如果您事先不确切知道可能传入的格式，`DateTime.Parse()`将尝试为您检测传入的格式：

```
DateTime excelDate = DateTime.Parse(value
                                    CultureInfo.InvariantCulture); 
```

请注意，您也可以传递`DateTimeStyles`参数，但可能不需要或不需要，具体取决于您想要的行为。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx](http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx)。*

# javascript - 在字符串中执行 javascript 函数

> ID：13979532
> 
> 赞同：1
> 
> 时间：2012-12-20T19:57:19.997
> 
> 标签：javascript, html

除了下面指定的代码之外，还有更好的方法将动态文本注入到 html 字符串中吗？

var 代码 = 'siteCode1';

html 代码作为字符串：

```
existing: '<p>Log in with your'+ eval("siteVarObj('+code+').siteName") +'account</p>',

function siteVarObj(siteCode){
            if(siteCode === 'siteCode1'){
                this.siteName = 'google.com';
                this.siteContactUsURL = '';
            }else if(siteCode === 'siteCode2'){
                this.siteName = 'stackoverflow.com';
                this.siteContactUsURL = '';
            }
            return this;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:59:42.107

这应该可以正常工作：

```
var code = 'siteCode1';
var myHTMLString = '<p>Log in with your '+ siteVarObj(code).siteName + ' account</p>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:04:05.913

我通常建议避免在 eval 中执行任何输入，因为 eval 在使用不当时会打开您的代码进行注入攻击。

# c++ - 如何基于平台排除Qt中的某些文件

> ID：13979536
> 
> 赞同：2
> 
> 时间：2012-12-20T19:57:26.383
> 
> 标签：c++, qt, cross-platform, qmake

我有一个想在 Linux 上运行的 Qt 应用程序，但它使用的 API 仅在 Windows 上可用。可能有 2 或 3 个使用 API 的类，我试图不将它们与程序的其余部分紧密耦合。我显然可以在所有地方使用很多，`#ifdef win32`但我相信在 .pro 文件中应该有更多的 Qt 方式来做这件事。

理想情况下，我希望 qmake 检测系统并查找 API（如果它是 win32）。然后，如果它找不到它或者它位于不同的平台上，请排除该库和所有包含 API 标头的类。

这是我的意思的一个例子：

我现在拥有的 In.pro 文件

```
SOURCES += main.cpp  \
           mainwindow.cpp \
           win32apiwrapperclass.cpp \
           ...

LIBS += "a/path/to/win32/only/lib -lwin32only

INCLUDEPATH += "a/path/to/win32/only/includes"
DEPENDPATH += "a/path/to/win32/only/includes" 
```

同样在 MainWindow.h 我有类似的东西：

```
private:
    Win32OnlyWrapperClass* win32owc; 
```

然后在cpp文件中使用了几次win32owc。所以我也希望在其他平台上排除所有这些。希望这是有道理的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:56:47.943

**在 .pro 文件中，您可以这样做：**

```
win32:LIBS += "a/path/to/win32/only/lib -lwin32only

win32:INCLUDEPATH += "a/path/to/win32/only/includes"
win32:DEPENDPATH += "a/path/to/win32/only/includes" 
```

或者

```
win32 {    
    LIBS += "a/path/to/win32/only/lib -lwin32only

    INCLUDEPATH += "a/path/to/win32/only/includes"
    DEPENDPATH += "a/path/to/win32/only/includes"    
} 
```

[https://doc.qt.io/archives/qt-4.8/qmake-advanced-usage.html#scopes-and-conditions](https://doc.qt.io/archives/qt-4.8/qmake-advanced-usage.html#scopes-and-conditions)

# android - 如何在qt中启用两个独立的接触点

> ID：13979540
> 
> 赞同：2
> 
> 时间：2012-12-20T19:57:44.433
> 
> 标签：android, c++, qt

android：2.3.7 智能手机：HTC DESIRE 框架：qt necessitas C++

我已经使用 Qt（necessitas port to Android）在 android 上创建了空间入侵者的克隆。对于左右移动，我使用来自 QTouchEvent 的接触点。问题是 :: 当按下屏幕左侧时，船向左（主要触摸点），手指停留在屏幕上并触摸右侧（第二点），船向右，然后释放左手指并且船舶停止，因为主要接触点被分离并用自己的洞线拉出游戏（在这种情况下是第二点）。所以即使在那一刻也不存在第二次触摸，右手手指在屏幕上。这就是 Qt 中接触点组织的方式。第二点不接收事件。我尝试使用 QGestures，但由于相同的原因在某些步骤上失败了。任何帮助将不胜感激。

我只想要智能手机桌面上的一些键盘功能。例如。按下左箭头 - > 向左发送，释放左箭头时按下右箭头 -> 向右发送，向左释放 -> 向右发送，因为右侧处于活动状态并接收事件。

# regex - 使用 awk 替换包含模式“fin(fname)”的行

> ID：13979545
> 
> 赞同：1
> 
> 时间：2012-12-20T19:58:25.053
> 
> 标签：regex, awk

我如何使用 awk 替换包含的行

```
 ifstream fin(fname); 
```

到

```
 ifstream fin(fname.c_str()); 
```

我尝试了以下 awk，但它没有用。

```
 /fin?fname?/ {
       sub(/fname/, "fname.c_str()", $0)
    }
    {
      print
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:07:03.763

将其更改为以下（已测试）：

```
awk '/fin\(fname\)/ {sub("fname", "fname.c_str()", $0)} {print}' input_filename 
```

在 awk 的正则表达式匹配中，括号`(`和`)`必须用`\`

此外，我认为您可能会混淆: 这意味着[正则表达式与通配符](http://jazimmer.com/tclbook/select/Html/7.3.html)`?`之间的不同含义

*   在正则表达式中，`?`表示“前面的字符是可选的”。例如`abc?`同时匹配`ab`和`abc`
*   在通配符中，`?`意思是“任何一个字符”。它的正则表达式等价物是`.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:13:52.133

使用 sed 代替：

```
sed 's/fin(fname)/fin(fname.c_str())/' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T05:35:56.713

```
> echo "ifstream fin(fname);" | awk '/ifstream fin\(fname\)/{gsub(/fname/,"fname.c_str()")}1'
ifstream fin(fname.c_str()); 
```

# ruby-on-rails - 无法运行任何 rake 命令：“错误：'rake/rdoctask' 已过时且不再受支持”

> ID：13979550
> 
> 赞同：14
> 
> 时间：2012-12-20T19:58:46.733
> 
> 标签：ruby-on-rails, ruby, rake

我正在尝试运行 rake migrate:db 命令，但收到以下错误消息：

```
ERROR: 'rake/rdoctask' is obsolete and no longer supported. Use 'rdoc/task' (available in RDoc 2.4.2+) instead. 
```

我尝试执行其他 rake 命令，但我得到了同样的错误。我怎样才能解决这个问题？

# asp.net-mvc-3 - 将 DevExpress XtraReport 模板渲染为 HTML

> ID：13979551
> 
> 赞同：2
> 
> 时间：2012-12-20T19:58:48.870
> 
> 标签：asp.net-mvc-3, devexpress, xtrareport

我们正在使用 DevExpress DX.10.2。我们的客户要求能够在我们为其维护的 MVC 3 应用程序中查看 XtraReport 模板（不是报告本身，只是模板）。

我的第一个想法是我必须伪造数据以看起来像“模板”并显示实际报告。但是，我在 Visual Studio 中注意到 XtraReport 设计器有一个“HTML 视图”选项，可以在 HTML 中呈现模板。

我认为如果 DevExpress 能够在设计器中将模板呈现为 HTML，那么很可能有一种方法可以提取该 HTML 以在视图上呈现。有没有办法从 XtraReport 模板中提取 HTML？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:37:54.697

偶然发现了解决方案。必须添加对 DevExpress.XtraReports.Web 的引用，然后以下行将报告 HTML 写入响应流：

```
XtraReport1 report = new XtraReport1();
DevExpress.XtraReports.Web.ReportViewer.WriteHtmlTo(System.Web.HttpContext.Current.Response, report); 
```

# ruby - 在 Ruby 中使用多个参数

> ID：13979552
> 
> 赞同：0
> 
> 时间：2012-12-20T19:58:49.050
> 
> 标签：ruby

我试图找出在`Ruby`. 问题是我使用了两种类型的参数：`Event`和`User`. 有时该方法需要一个`User`：

```
postAccept.replaceVariables(sally) 
```

有时它需要两个`Users`：

```
deleteGuest.replaceVariables(sally, tom) 
```

有时它需要一个`Event`和两个`Users`：

```
addUserToEvent.replaceVariables(mEvent, tom, sally) 
```

最后，有时它需要一个`Event`和一个`User`：

```
addnonbookable.replaceVariables(event1, carl) 
```

以下是我目前正在做的关于该方法的事情：

```
def replaceVariables(*event)

    if event.size <=2

        if event[0].include?('entryId')
            event1 = event[0]
            my = event[1]
        else
            my = event[0]
            their = event[1]
        end
    else
        event1 = event[0]
        my = event[1]   
        their = event[2]
    end
            ... 
```

问题是，我无法找出区分 the`user`和`event`. 在上面的示例中，我尝试确定对象是否具有特定的键或值，但我得到`NoMethodError`.

有人可以告诉我我做错了什么，或者告诉我一种让事情保持动态和灵活的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:04:03.647

```
def replace_variables(*args)
  events = args.select{|a| a.is_a? Event}
  users = args.select{|a| a.is_a? User}
  #now you have 2 arrays and can manipulate them
  #...
end 
```

Tin Man 建议在 1 行中执行：

```
def replace_variables(*args)
  events, users = args.group_by{ |p| p.class }.values_at(Event, User)
  #now you have 2 arrays and can manipulate them
  #...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:06:16.343

检查第一个参数是否是事件。如果是，那么它是唯一的事件，其余都是用户，您可以将事件移出。否则，他们都是用户。

```
def replaceVariables(*users)
  event = nil
  if users.first.is_a? Event
    event = users.shift
  end
  # ...
end 
```

# sql-server - 获取具有 MIN/MAX 值的行的其他字段值

> ID：13979553
> 
> 赞同：6
> 
> 时间：2012-12-20T19:58:51.573
> 
> 标签：sql-server, tsql, max, aggregate, min

这是我的数据示例以及我希望看到的内容：

```
JOB    OPSEQ    OPCOMPLETE   OPCODE

100     1        yes          pull  
100     2        yes          weld  
100     3        no           grind    
100     4        no           machine  
100     5        no           asmbl 
```

所以我想选择 opcomplete=no 的 min(opseq) 和 opcomplete=yes 的 max(opseq)，以及 min 和 max opseq 的操作码。在这个例子中，这将是：
min(opseq):3
opcode of min op:grind
max(opseq):2 opcode of max op:weld

我正在寻找这个的原因是为了获得不完整的最小 opseq 的操作码。
我让最小和最大 opseqs 工作得很好。这就是我所拥有的：

```
(SELECT   company, jobnum, MAX(oprseq) AS maxclosed, opcomplete
 FROM     joboper AS joboper_2
 WHERE    (company = 'lot') AND (opcomplete = '1')
 GROUP BY company, jobnum, opcomplete) AS t_joboper1 ON joboper.company = t_joboper1.company AND joboper.jobnum = t_joboper1.jobnum INNER JOIN
(SELECT   company, jobnum, MIN(oprseq) AS minopen, opcomplete
 FROM     joboper AS joboper_1
 WHERE    (company = 'lot') AND (opcomplete = '0')
 GROUP BY company, jobnum, opcomplete) AS t_joboper2 ON joboper.company = t_joboper2.company AND joboper.jobnum = t_joboper2.jobnum 
```

因此，当我尝试添加我的操作码时，它不起作用，我开始获取各种重复值。这是我写的：

```
(SELECT   company, jobnum, MAX(oprseq) AS maxclosed, opcomplete, opcode as maxopcode
 FROM     joboper AS joboper_2
 WHERE    (company = 'lot') AND (opcomplete = '1')
 GROUP BY company, jobnum, opcomplete, opcode) AS t_joboper1 ON joboper.company = t_joboper1.company AND joboper.jobnum = t_joboper1.jobnum INNER JOIN
(SELECT   company, jobnum, MIN(oprseq) AS minopen, opcomplete, opcode as minopcode
 FROM     joboper AS joboper_1
 WHERE    (company = 'lot') AND (opcomplete = '0')
 GROUP BY company, jobnum, opcomplete, opcode) AS t_joboper2 ON joboper.company = t_joboper2.company AND joboper.jobnum = t_joboper2.jobnum 
```

这是我目前的整个代码（操作码提取所有重复值：

```
SELECT     jobhead.company, jobhead.jobnum, jobhead.partnum, 
           jobhead.partdescription, jobhead.startdate, 
           jobhead.reqduedate, jobhead.prodqty, jobhead.qtycompleted,
           joboper.oprseq, joboper.opcode, joboper.opcomplete, 
           joboper.qtycompleted AS joboperqtycomplete, 
           resourcegroup.description AS rgroupdescription,
           dmrhead.dmrnum, poheader.ponum, vendor.name AS vendorname,
           t_joboper2.minopen AS minopen, t_joboper2.minopcode AS minopcode,
           t_joboper1.maxclosed AS maxclosed, t_joboper1.maxopcode AS maxopcode
FROM       jobhead LEFT OUTER JOIN
           joboper INNER JOIN
           (SELECT   company, jobnum, MAX(oprseq) AS maxclosed, 
                     opcomplete, opcode as maxopcode
            FROM     joboper AS joboper_2
            WHERE    (company = 'lot') AND (opcomplete = '1')
            GROUP BY company, jobnum, opcomplete, opcode) AS t_joboper1 
              ON     joboper.company = t_joboper1.company 
            AND      joboper.jobnum = t_joboper1.jobnum INNER JOIN
           (SELECT   company, jobnum, MIN(oprseq) AS minopen, opcomplete, 
                     opcode as minopcode
            FROM     joboper AS joboper_1
            WHERE    (company = 'lot') AND (opcomplete = '0')
            GROUP BY company, jobnum, opcomplete, opcode) AS t_joboper2 
              ON     joboper.company = t_joboper2.company
            AND      joboper.jobnum = t_joboper2.jobnum 
              ON     jobhead.company = joboper.company
            AND      jobhead.jobnum = joboper.jobnum LEFT OUTER JOIN
                     resourcegroup ON joboper.company = resourcegroup.company
            AND      joboper.opcode = resourcegroup.opcode LEFT OUTER JOIN
                     dmrhead ON joboper.company = dmrhead.company
            AND      joboper.jobnum = dmrhead.jobnum
            AND      joboper.assemblyseq = dmrhead.assemblyseq 
            AND      joboper.oprseq = dmrhead.oprseq LEFT OUTER JOIN
                     porel ON joboper.company = porel.company
            AND      joboper.jobnum = porel.jobnum
            AND      joboper.assemblyseq = porel.assemblyseq
            AND      joboper.oprseq = porel.jobseq LEFT OUTER JOIN
                     podetail ON porel.company = podetail.company
            AND      porel.ponum = podetail.ponum 
            AND      porel.poline = podetail.poline LEFT OUTER JOIN
                     poheader ON podetail.company = poheader.company 
            AND      podetail.ponum = poheader.ponum LEFT OUTER JOIN
                     vendor ON poheader.company = vendor.company
            AND      poheader.vendornum = vendor.vendornum  
WHERE     (jobhead.jobreleased = 1)
 AND      (jobhead.jobcomplete = 0) 
 AND      (jobhead.company = 'lot') 
 AND      (jobhead.plant = '001') 
```

我希望这一切都对我在这里尝试做的事情有意义。如果不是很明显，这是我第一次在这里提问。提前感谢所有帮助！

新 - 2012 年 12 月 21 日

谢谢你们的帮助！我尝试了您的两个建议，但都无法获得我想要的确切结果。但是每个答案都帮助我最终得到了我需要的东西。由于这是我的第一个问题，所以我不知道应该怎么做才能将哪个答案标记为解决方案？就像我说的，这两个答案都帮了我很多，我认为我无法从他们那里得到我想要的结果的原因完全是我的错。在进行了更多工作之后，我意识到即使我非常努力地想清楚我的问题，但当我回过头来时，我发现我可以用更好的措辞来表达问题。再次，我非常感谢所有的帮助，我期待在未来提出更好的问题！
顺便说一句，这是最终起作用的代码。

```
 SELECT     jobhead.company, jobhead.jobnum, jobhead.partnum, jobhead.partdescription, jobhead.startdate, jobhead.reqduedate, jobhead.prodqty, jobhead.qtycompleted, 
                  joboper.oprseq, joboper.opcode, joboper.opcomplete, joboper.qtycompleted AS joboperqtycomplete, resourcegroup.description AS rgroupdescription, 
                  dmrhead.dmrnum, poheader.ponum, vendor.name AS vendorname, t_joboper2.minopen, t_joboper1.maxclosed, t_joboper3.opcode AS minopcode
FROM         jobhead LEFT OUTER JOIN
                  joboper INNER JOIN
                      (SELECT     company, jobnum, MAX(oprseq) AS maxclosed, opcomplete
                        FROM          joboper AS joboper_1
                        WHERE      (company = 'lot') AND (opcomplete = '1')
                        GROUP BY company, jobnum, opcomplete) AS t_joboper1 ON joboper.company = t_joboper1.company AND joboper.jobnum = t_joboper1.jobnum INNER JOIN
                      (SELECT     company, jobnum, MIN(oprseq) AS minopen, opcomplete
                        FROM          joboper AS joboper_2
                        WHERE      (company = 'lot') AND (opcomplete = '0')
                        GROUP BY company, jobnum, opcomplete) AS t_joboper2 ON joboper.company = t_joboper2.company AND 
                  joboper.jobnum = t_joboper2.jobnum INNER JOIN
                      (SELECT     company, jobnum, oprseq, opcomplete, opcode
                        FROM          joboper AS joboper_3
                        WHERE      (company = 'lot') AND (opcomplete = '0'))
                         AS t_joboper3 ON t_joboper2.company = t_joboper3.company AND t_joboper2.jobnum = t_joboper3.jobnum AND 
                  t_joboper2.minopen = t_joboper3.oprseq ON jobhead.company = joboper.company AND jobhead.jobnum = joboper.jobnum LEFT OUTER JOIN
                  resourcegroup ON joboper.company = resourcegroup.company AND joboper.opcode = resourcegroup.opcode LEFT OUTER JOIN
                  dmrhead ON joboper.company = dmrhead.company AND joboper.jobnum = dmrhead.jobnum AND joboper.assemblyseq = dmrhead.assemblyseq AND 
                  joboper.oprseq = dmrhead.oprseq LEFT OUTER JOIN
                  porel ON joboper.company = porel.company AND joboper.jobnum = porel.jobnum AND joboper.assemblyseq = porel.assemblyseq AND 
                  joboper.oprseq = porel.jobseq LEFT OUTER JOIN
                  podetail ON porel.company = podetail.company AND porel.ponum = podetail.ponum AND porel.poline = podetail.poline LEFT OUTER JOIN
                  poheader ON podetail.company = poheader.company AND podetail.ponum = poheader.ponum LEFT OUTER JOIN
                  vendor ON poheader.company = vendor.company AND poheader.vendornum = vendor.vendornum
WHERE     (jobhead.jobreleased = 1) AND (jobhead.jobcomplete = 0) AND (jobhead.company = 'lot') AND (jobhead.plant = '001') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T20:35:37.670

这是一种方法：

```
select JOB,
       min(case when OPCOMPLETE = 'no' then OPSEQ end) as MIN_NO_OPSEQ,
       min(case when OPCOMPLETE = 'no' then OPCODE end) as MIN_NO_OPCODE,
       min(case when OPCOMPLETE = 'yes' then OPSEQ end) as MAX_YES_OPSEQ,
       min(case when OPCOMPLETE = 'yes' then OPCODE end) as MAX_YES_OPCODE
  from ( select JOB,
                OPSEQ,
                OPCOMPLETE,
                OPCODE,
                rank() over (partition by JOB, OPCOMPLETE order by OPSEQ asc) as R_NO,
                rank() over (partition by JOB, OPCOMPLETE order by OPSEQ desc) as R_YES
           from TABLE_NAME
       )
 where OPCOMPLETE = 'no' and R_NO = 1    -- row with min(OPSEQ) where OPCOMPLETE = 'no'
    or OPCOMPLETE = 'yes' and R_YES = 1  -- row with max(OPSEQ) where OPCOMPLETE = 'yes'
 group
    by JOB
; 
```

笔记：

*   未测试。
*   在第 2-5 行中，每个`min`都可以更改为`max`无效，因为只有一行满足所有必要的标准。(`min`或`max`) 仅是必需的，因为`group by`：我们通过选择非空值将两行合并为一。
*   有关信息`rank()`，请参阅[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/ms176102.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:58:36.200

我认为这比你做的要容易得多，只要 OPSEQ 是一个独特的值：

```
select
    opseq, opcode
from
    joboper
where
    opseq in (select min(opseq) from joboper where opcomplete = 'no')
    or
    opseq in (select max(opseq) from joboper where opcomplete = 'yes') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T20:23:46.710

假设您使用的是 SQL Server 2005 或更高版本，您还可以考虑使用[`CROSS APPLY`](http://msdn.microsoft.com/en-us/library/ms175156.aspx "使用应用")，如下所示：

```
SELECT
  j.JOB,
  y.OPSEQ  AS LastCompleteOPSEQ,
  y.OPCODE AS LastCompleteOPCODE,
  n.OPSEQ  AS FirstIncompleteOPSEQ,
  n.OPCODE AS FirstIncompleteOPCODE
FROM (SELECT DISTINCT JOB FROM joboper) j
CROSS APPLY (
  SELECT TOP 1 OPSEQ, OPCODE
  FROM joboper
  WHERE JOB = j.JOB AND OPCOMPLETE = 'yes'
  ORDER BY OPSEQ DESC
) y
CROSS APPLY (
  SELECT TOP 1 OPSEQ, OPCODE
  FROM joboper
  WHERE JOB = j.JOB AND OPCOMPLETE = 'no'
  ORDER BY OPSEQ ASC
) n
; 
```

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!3/8ed69/1)查询它。

# sharepoint - SharePoint 2010 受信任的身份提供程序，从 HTTP 切换到 HTTPS 会导致循环

> ID：13979555
> 
> 赞同：2
> 
> 时间：2012-12-20T19:58:57.100
> 
> 标签：sharepoint, sharepoint-2010, single-sign-on

我有一个 SharePoint 2010 网站，它针对我的安全令牌服务使用受信任的身份提供者和自定义声明提供者。当我一直使用 HTTP 时，这很棒。当我一直使用 HTTPS 时，这很棒。但是当我从 HTTP 切换到 HTTPS 时，我被重定向到 STS，并且在 STS 和 mysite/_trust 之间开始了一个循环。

看起来从 HTTP 使用的 FedAuth cookie 与 HTTPS 所需的 FedAuth cookie 不匹配，但 STS 看到您已登录并且不会颁发新证书。

如何使领域 http:mysite.site.com 和[https://mysite.site.com](https://mysite.site.com)正常工作的任何想法。

更新：经过大量调试和代码更改后，这似乎是 cookie 的客户端问题。如果我登录 HTTP 并切换到 HTTPS，它可以正常传输。但是如果我从 HTTPS 转到 HTTP，它就会进入循环。我相信这是因为 cookie 设置为“安全”。我认为 HTTP 站点无法读取 cookie。我的答案可能是找出如何使 cookie 不“安全”，以便双方都可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:12:56.127

对此的另一个答案是将 HTTP 和 HTTPS 放在备用访问映射中的同一区域中。然后，您需要覆盖 cookiehandler 以允许在 HTTP 和 HTTPS 中使用相同的 cookie。

[http://www.msngn.com/blog/Lists/Posts/Post.aspx?ID=5](http://www.msngn.com/blog/Lists/Posts/Post.aspx?ID=5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:29:44.627

有两种方法可以解决这个问题。问题是 FedAuth cookie 被标记为安全和 HTTPOnly。因此，当您从 HTTPS 切换到 HTTP 时，SharePoint /_trust/ 无法读取 cookie

我采用的方法是修改 _login 目录中的 default.aspx。它可以在这里找到 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\template\identitymodel\login\

我用这个 default.aspx 页面替换了现有的 default.aspx

```
<%@ Assembly Name="Microsoft.SharePoint.IdentityModel, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="SharepointIdentity" Namespace="Microsoft.SharePoint.IdentityModel" Assembly="Microsoft.SharePoint.IdentityModel, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Assembly Name="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c"%> 
<%@ Import Namespace="Microsoft.SharePoint.WebControls" %> 
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Import Namespace="Microsoft.SharePoint" %> <%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Page Language="C#"  MasterPageFile="~/_layouts/simple.master"  %>

<asp:Content ID="PageHead" ContentPlaceHolderID="PlaceHolderAdditionalPageHead" runat="server">

</asp:Content>

<asp:Content ID="Main" ContentPlaceHolderID="PlaceHolderMain" runat="server">

<script language="C#" runat="server">

        protected void Page_Load(object sender, EventArgs e)
        {
            string killed = "no";

            if (Request.Cookies["FedAuth"] != null)
            {
                killed = "yes";

        HttpCookie expiredCookie = new HttpCookie("FedAuth");
                expiredCookie.Expires = DateTime.UtcNow.AddDays(-1);
                Response.Cookies.Add(expiredCookie);                
            }

            string returnURL = Request["ReturnUrl"].ToString();

            Response.Redirect("/_trust/default.aspx?trust=SSO%20Trusted%20Provider&ReturnUrl=" + returnURL + "&cooke=" + killed);
        }

 </script>

</asp:Content> 
```

它背后没有代码。

另一种方法是使用新的 cookie 处理程序修改 cookie。你可以在这里看到。[http://www.msngn.com/blog/Lists/Posts/Post.aspx?ID=5](http://www.msngn.com/blog/Lists/Posts/Post.aspx?ID=5)

# node.js - 使用 node.js 保存存储在 s3 上的图像？

> ID：13979558
> 
> 赞同：10
> 
> 时间：2012-12-20T19:59:12.223
> 
> 标签：node.js, amazon-s3, fs

我正在尝试编写一个使用 node.js 将图像存储在 s3 上的图像服务器。上传图像工作正常，我可以使用 s3 浏览器客户端正确下载和查看它（我使用的是 Dragondisk，具体来说，但我也已经成功下载了它与其他的），但是当我使用节点下载它并尝试要将其写入磁盘，我无法打开文件（它说它可能已损坏或使用预览无法识别的文件格式）。我正在使用 amazon sdk for node 和 fs 来编写文件。我知道您可以将可选编码传递给 fs.writeFile，但我已经尝试了所有方法，但它不起作用。我还尝试在 putObject 上设置 ContentType，在 getObject 上设置 ResponseContentType，以及 ContentEncoding 和 ResponseContentEncoding（以及所有这些东西的各种组合）。结果相同。这里'

```
var AWS = require('aws-sdk')
  , gm = require('../lib/gm')
  , uuid = require('node-uui')
  , fs = require('fs');

AWS.config.loadFromPath('./amazonConfig.json');
var s3 = new AWS.S3();

var bucket = 'myBucketName'; // There's other logic here to set the bucket name.

exports.upload = function(req, res) {
    var id = uuid.v4();
    gm.format("/path/to/some/image.jpg", function(format){
        var key = req.params.dir + "/" + id + "/default." + format;
        fs.readFile('/path/to/some/image.jpg', function(err, data){
            if (err) { console.warn(err); }
            else {
                s3.client.putObject({
                    Bucket: bucket,
                    Key: key,
                    Body: data,
                    ContentType: 'image/jpeg'
                    // I've also tried adding ContentEncoding (in various formats) here.
                 }).done(function(response){
                    res.status(200).end(JSON.stringify({ok:1, id: id}));
                }).fail(function(response){
                    res.status(response.httpResponse.statusCode).end(JSON.stringify(({err: response})));
                });
            }
        });
    });
};

exports.get = function(req, res) {
    var key = req.params.dir + "/" + req.params.id + "/default.JPEG";
    s3.client.getObject({
        Bucket: bucket, 
        Key:  key,
        ResponseContentType: 'image/jpeg'
        // Tried ResponseContentEncoding here in base64, binary, and utf8
    }).done(function(response){
        res.status(200).end(JSON.stringify({ok:1, response: response}));
        var filename = '/path/to/new/image/default.JPEG';
        fs.writeFile(filename, response.data.Body, function(err){
            if (err) console.warn(err);
            // This DOES write the file, just not as an image that can be opened.
            // I've tried pretty much every encoding as the optional third parameter
            // and I've matched the encodings to the ResponseContentEncoding and
            // ContentEncoding above (in case it needs to be the same)
        });
    }).fail(function(response){
        res.status(response.httpResponse.statusCode).end(JSON.stringify({err: response}));
    });
}; 
```

顺便说一句，我使用 express 进行路由，所以这就是 req.params 的来源。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-30T02:02:02.780

对于仍在为这个问题苦苦挣扎的人。这是我在原生 aws-sdk 中使用的方法。

```
var AWS = require('aws-sdk');
AWS.config.loadFromPath('./s3_config.json');
var s3Bucket = new AWS.S3( { params: {Bucket: 'myBucket'} } ); 
```

在您的路由器方法中：- ContentType 应设置为图像文件的内容类型

```
 buf = new Buffer(req.body.imageBinary.replace(/^data:image\/\w+;base64,/, ""),'base64')
  var data = {
    Key: req.body.userId, 
    Body: buf,
    ContentEncoding: 'base64',
    ContentType: 'image/jpeg'
  };
  s3Bucket.putObject(data, function(err, data){
      if (err) { 
        console.log(err);
        console.log('Error uploading data: ', data); 
      } else {
        console.log('succesfully uploaded the image!');
      }
  }); 
```

s3_config.json 文件是：-

```
{
  "accessKeyId":"xxxxxxxxxxxxxxxx",
  "secretAccessKey":"xxxxxxxxxxxxxx",
  "region":"us-east-1"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T20:08:39.510

好的，经过大量的试验和错误，我已经想出了如何做到这一点。我最终切换到了 knox，但据推测，您可以对 aws-sdk 使用类似的策略。这种解决方案让我说，“必须有比这更好的方法”，但在这一点上，我对任何可行的方法都很满意。

```
var imgData = "";
client.getFile(key, function(err, fileRes){
    fileRes.on('data', function(chunk){
        imgData += chunk.toString('binary');
    }).on('end', function(){
        res.set('Content-Type', pic.mime);
        res.set('Content-Length', fileRes.headers['content-length']);
        res.send(new Buffer(imgData, 'binary'));
    });
}); 
```

`getFile()`返回数据块作为缓冲区。有人会认为您可以将结果直接传送到前端，但无论出于何种原因，这是我可以让服务正确返回图像的唯一方法。将缓冲区写入二进制字符串感觉是多余的，只是将其写回缓冲区，但是嘿，如果它有效，它就有效。如果有人找到更有效的解决方案，我很想听听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-25T21:59:25.107

```
uploadfile(file, filename, folder) {

  const bucket = new S3(
  {
    accessKeyId: 'enter your access key id here',
    secretAccessKey: 'enter your secret key here.',
    region: 'us-east-2'

  });

  const params = {
    Bucket: 'enter your bucket here.',
    Key: folder + '/' + filename + ".jpg",      
    ACL: 'public-read', 
    ContentEncoding : 'base64,',
    Body: new Buffer(file.replace(/^data:image\/\w+;base64,/, ""),'base64'),
    ContentType: 'image/jpeg'

  };

  bucket.upload(params, function (err, data) {
    if (err) {
      console.log('There was an error uploading your file: ', err);
      return false;
    }

    console.log('Successfully uploaded file.', data);
    return true;
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-07T02:10:20.427

作为另一种解决方案。我改用 Body: fs.createReadStream 来修复我的，它就像一个魅力。

```
 const uploadFile = () => {
fs.readFile(filename, (err, data) => {
  if (err) throw err;
  const params = {
    Bucket: `${process.env.S3_Bucket}/ProfilePics`, // pass your bucket name
    Key: `${decoded.id}-pic.${filetypeabbrv}`, // file will be saved as testBucket/contacts.csv
    Body: fs.createReadStream(req.file.path),
    ContentType: filetype,
  };

  s3.upload(params, function (s3Err, data) {
    if (s3Err) throw s3Err;
    console.log(`File uploaded successfully at ${data.Location}`);
  });
}); 
```

};

# javascript - 通过单击按钮在 Javascript 中填充文本框

> ID：13979569
> 
> 赞同：6
> 
> 时间：2012-12-20T20:00:36.010
> 
> 标签：javascript, html

我正在尝试通过单击表单按钮来填充表单上的文本框。以下是我到目前为止的代码 - 从选择框示例中修改了此代码 -

```
<!DOCTYPE html>
<html>

<head>
    <script>
        function moveNumbers(){
            var no=document.getElementById("no");
            var txt=document.getElementById("result").value;
            txt=txt + option;
            document.getElementById("result").value=txt;
        }
    </script>
</head>

<body>
    <form>
        Select numbers:<br>
        <input type="button" value="1" name="no" onclick="moveNumbers()"> 
        <input type="button" value="2" name="no" onclick="moveNumbers()"> 
        <input type="button" value="3" name="no" onclick="moveNumbers()"> 

        <input type="text" id="result" size="20">
    </form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T20:06:22.500

这里有一些缺陷。它似乎没有`option`定义。而且您无法检索实际单击的按钮。

您可以做的是传递`this.value`给您的 onclick 事件处理程序。这会传递您按下的按钮的值，并使用它附加到您的文本框值。

```
<script> function moveNumbers(num) {
    var txt=document.getElementById("result").value;
    txt=txt + num;
    document.getElementById("result").value=txt;
    }
</script>
Select numbers: <br> <input type="button" value="1" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="2" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="3" name="no" onclick="moveNumbers(this.value)">  
<input type="text" id="result" size="20"> 
```

[http://jsfiddle.net/cMN44/](http://jsfiddle.net/cMN44/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:08:49.697

假设您希望将按钮的值插入到文本框中：

```
<!DOCTYPE html>
<html>

<head>
    <script>
        function moveNumbers(number){
            document.getElementById("result").value=number;
        }
    </script>
</head>

<body>
    <form>
        Select numbers:<br>
        <input type="button" value="1" name="no" onclick="moveNumbers(this.value)"> 
        <input type="button" value="2" name="no" onclick="moveNumbers(this.value)"> 
        <input type="button" value="3" name="no" onclick="moveNumbers(this.value)"> 

        <input type="text" id="result" size="20">
    </form>
</body>

</html> 
```

# java - Updating a file's timestamp on Windows from Java

> ID：13979573
> 
> 赞同：2
> 
> 时间：2012-12-20T20:01:10.430
> 
> 标签：java, windows, file-io, timestamp, java-io

I am dealing with a file in Java that is used to hold serialized objects. In order to determine if the process that is writing to this file has timed out, I check the lastModified() method on the file and expect it to be updated each time an object is written. On Linux and Mac this works fine, but on Windows, the timestamp is not updated until the FileOutputStream is closed. I've also tried directly updating the timestamp using setLastModified() to no avail. From what I've gleaned from Google, it seems that this is known behavior with files on Windows.

My question is how can I achieve what I want on Windows? I just need to be able to determine when something was serialized. The rub is that the serialization and the monitoring are in different JVMs.

I'd prefer to find a way to keep using the timestamp approach as it works great on all other platforms, but workarounds would also be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:05:32.363

If you're using Java 7, you can use [`java.nio.file.Files`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html) and its [`SetLastModifiedTime(Path, FileTime)`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setLastModifiedTime%28java.nio.file.Path,%20java.nio.file.attribute.FileTime%29) static method.

I'm not sure if that works any differently than File's setLastModified, though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:20:15.460

If you have control of the source code for the writing process why no just write/touch another file too instead?

```
new File(otherFile.getParent(), "touch_file").setLastModified(Sytem.currentTimeMillis()); 
```

Not sure if that work or if you need to open it and close it instead:

```
new FileOutputStream(new File(otherFile.getParent(), "touch_file"))).close(); 
```

By the way depending on filesystem etc on Linux the lastModifiedTime on files might only have a 1 second resolution and precision.

# c# - 递归迭代器块方法的提前终止

> ID：13979580
> 
> 赞同：4
> 
> 时间：2012-12-20T20:01:46.273
> 
> 标签：c#, recursion, nunit, yield-return

我有一个使用递归函数输出数组所有排列的方法：

```
 /// <summary>
    /// Yields a sequence of all permutations in lexical order
    /// </summary>
    /// <typeparam name="T">Type of item in the input sequence</typeparam>
    /// <param name="input">The initial sequence</param>
    /// <returns>A sequence of all permutations in lexical order</returns>
    public IEnumerable<IEnumerable<T>> Permute<T>(IEnumerable<T> input) 
    {
        var list = input.ToList();
        list.Sort(); // into lexical order

        if (list.Count > 2)
        {
            foreach (var item in list)
            {
                var itemArray = new[] {item};
                T[] otherItems = list.Except(itemArray).ToArray();
                foreach (var permutation in Permute(otherItems))
                    yield return itemArray.Concat(permutation).ToArray();
            }
        }
        else 
        {
            yield return new[] {list[0], list[1]};
            yield return new[] {list[1], list[0]};
        }
    } 
```

但是，当我在 NUnit 测试中运行此函数时，它终止的时间比我认为的要早得多：

```
 [Test]
    public void Can_print_all_permutations()
    {
        foreach (var p in Permute("123456789"))
        {
            Console.WriteLine(new string(p.ToArray()));
        }
    } 
```

这是测试打印的最后几行（出于发布目的，我用逗号分隔它们）：

> 349527816、349527861、349528167、349528176、349528617、3

突然终止让我认为控制台的缓冲和刷新是问题的一个组成部分，但应该打印的最后一行是 987654321，所以我觉得循环提前终止了。

如果我在循环中包含一个计算，它会更早终止（在 24... 范围内）。

我的实现中有什么东西可以解释这种行为吗？我在推动堆栈的极限吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T20:16:12.040

您使用的最有可能的测试基础设施有某种“测试运行的最长时间”限制。枚举所有排列确实需要大量时间。

# php - PHP、SimpleXML、解码 CDATA 中的实体

> ID：13979582
> 
> 赞同：7
> 
> 时间：2012-12-20T20:01:54.060
> 
> 标签：php, xml, simplexml, cdata, libxml2

我遇到以下行为：

```
$xml_string1 = "<person><name><![CDATA[ Someone&#039;s Name ]]></name></person>";
$xml_string2 = "<person><name> Someone&#039;s Name </name></person>";

$person = new SimpleXMLElement($xml_string1);
print (string) $person->name; # Someone&#039;s Name

$person = new SimpleXMLElement($xml_string2);
print (string) $person->name; # Someone's Name

$person = new SimpleXMLElement($xml_string1, LIBXML_NOCDATA);
print (string) $person->name; # Someone&#039;s Name 
```

php 文档说 NOCDATA “将 [s] CDATA 合并为文本节点”。对我来说，这意味着 CDATA 将被视为与文本节点相同 - 或者第三个示例的行为现在将与第二个示例相同。

我无法控制 XML（它是来自外部源的提要），否则我只会删除 CDATA 标记，因为它什么都不做并破坏了我想要的行为。

为什么上面的例子表现得如此呢？有没有办法让 SimpleXML 以与处理文本节点相同的方式处理 CDATA 节点？“将 CDATA 合并为文本节点”实际上做了什么，因为我似乎不理解该选项？

提取数据后，我目前正在解码，但上面的示例对我来说仍然没有意义。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T23:02:16.313

XML 中 CDATA 部分的目的是“按原样”封装文本块，否则需要对特殊字符（特别是`>`,`<`和`&`）进行转义。包含字符的 CDATA 部分`&`与包含`&amp;`.

如果解析器提供忽略这一点，并假装所有 CDATA 节点实际上只是文本节点，那么一旦有人提到“P&O Cruises”，它就会立即中断——这`&`根本不可能单独存在（而不是`&amp;`,或`&somethingElse;`）。

这`LIBXML_NOCDATA`实际上对 SimpleXML 毫无用处，因为它`(string)$foo`巧妙地将任何文本序列和 CDATA 节点组合成一个普通的 PHP 字符串。（人们经常没有注意到的事情，因为`print_r`没有。）对于更系统的访问方法（例如 DOM）不一定如此，在这些方法中，您可以将文本节点和 CDATA 节点作为自己的对象进行操作。

它有效地做的是遍历文档，无论它遇到 CDATA 部分，它都会获取内容，将其转义，然后将其作为普通文本节点放回，或者将其与任一侧的任何文本节点“合并”。表示的文本是相同的，只是存储在文档中的方式不同；如果您导出回 XML，您可以看到差异，如下例所示：

```
$xml_string = "<person><name>Welcome aboard this <![CDATA[P&O Cruises]]> voyage!</name></person>";

$person = new SimpleXMLElement($xml_string);
echo 'CDATA retained: ', $person->asXML();
// CDATA retained: <?xml version="1.0"?>
// <person><name>Welcome aboard this <![CDATA[P&O Cruises]]> voyage!</name></person>

$person = new SimpleXMLElement($xml_string, LIBXML_NOCDATA);
echo 'CDATA merged: ', $person->asXML();
// CDATA merged: <?xml version="1.0"?>
// <person><name>Welcome aboard this P&amp;O Cruises voyage!</name></person> 
```

如果您正在解析的 XML 文档包含一个实际包含实体的 CDATA 部分，则您需要获取该字符串并完全独立于 XML 将其取消转义。这样做的一个常见原因（除了懒惰对理解程度不高的库之外）是将 HTML 中标记的内容视为 XML 文档中的任何旧字符串，如下所示：

```
<Comment>
<SubmittedBy>IMSoP</SubmittedBy>
<Text><![CDATA[I'm <em>really</em> bad at keeping my answers brief <tt>;)</tt>]]></Text>
</Comment> 
```

# linux - 如何将 DocumentRoot 更改为自定义文件夹

> ID：13979588
> 
> 赞同：1
> 
> 时间：2012-12-20T20:02:23.980
> 
> 标签：linux, apache, centos

我用 CentOS 5.8 获​​得了我的新 VPS 服务器，我还无法转移我的域，但我想通过我的网站访问我的网站`http://my-server-ip`，因为我使用的是 laravel 框架，我需要将默认 DocumentRoot 更改`httpdocs`为`httpdocs/public`我试图将这些行放到 httpd.conf文件：

```
<VirtualHost my-server-ip:80>
DocumentRoot /var/www/vhosts/my.domain.org/httpdocs/public
ServerName  my.domain.org
</VirtualHost> 
```

但是，在重新启动 apache 后，它会像这样警告我：警告：DocumentRoot [/public] 不存在

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:17:38.623

您需要在目录上启用读取（可能还有执行）权限。作为根尝试：

```
# Recursively set the owner of this folder to 'www'
chown -R www /var/www/vhosts/my.domain.org/httpdocs/public

# Recursively give the owner read and execute privileges
chmod -R u+rx /var/www/vhosts/my.domain.org/httpdocs/public 
```

作为某些设置的替代方案，可能会调用用户`nobody`。因此，如果`www`不起作用，请尝试：

```
chown -R nobody /var/www/vhosts/my.domain.org/httpdocs/public 
```

编辑：正如用户[tink](https://stackoverflow.com/users/1394729/tink)在评论中指出的那样 *“......在 Centos 中，运行 apache 的用户被恰当地称为`apache`. 在 debian 及其衍生产品中，它是`www-data`.”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:09:43.620

可能是apache用户无法进入新目录。尝试

`chmod a+r /var/www/vhosts/my.domain.org/httpdocs/public`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T23:11:45.037

我有同样的“403 页面”问题。就在我将 /etc/apache2/conf-available/sitename.conf 中的 Document Root 从 /var/www/html 更改为 /data/www 之后。为了解决这个问题，我做了以下事情：

1）利用 chown 和 chmod 示例，由 Mike 提供（以上 2 个帖子）。非常感谢他；

2) 在 /etc/apparmor.d/abstractions/web-data 的末尾添加 2 行如下：

```
/data/www/ r,
/data/www/** r, 
```

然后运行：

```
sudo service apparmor reload 
```

3) 我还需要在我的 apache.conf 中添加以下代码：

```
<Directory /data/www/>
Options Indexes FollowSymLinks
AllowOverride None
Require all granted
</Directory> 
```

可能有些动作是多余的，但对我来说效果很好（Apache v2.4.7，Ubuntu 14.04.1）

# c# - 在 c# windows 窗体应用程序中获取 Windows 凭据用户名

> ID：13979590
> 
> 赞同：9
> 
> 时间：2012-12-20T20:02:32.473
> 
> 标签：c#, winforms, windows-embedded

如何在 Windows 窗体应用程序中获取当前登录的用户名？该应用程序在 Windows Embedded Standard 7 O/S 上运行。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T20:05:01.343

你可能想要`Environment.UserName`. 有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.environment.username.aspx](http://msdn.microsoft.com/en-us/library/system.environment.username.aspx)。

# mysql - MySQL 按语法排序

> ID：13979591
> 
> 赞同：2
> 
> 时间：2012-12-20T20:02:33.960
> 
> 标签：mysql, sql, syntax

我刚刚看到了以下语法：`select * from table order by column = "b" desc` 我猜值“b”的行将首先出现，但我不确定。在这种情况下，查询是什么意思以及排序是如何工作的。

我在谷歌上搜索过它，但......没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:05:06.153

在 SQL 中，您不受对现有列的值排序的限制：您可以在`order by`子句中指定复杂的表达式。此查询按布尔表达式的值排序：该表达式对于 where 的行`column = 'b'`和`false`所有其他行都为真。结果，column = 'b' 的行将排在最前面，因为该`order by`子句指定了降序，并且在 SQL`true`中表示为 1，而`false`为 0。

# c# - 模拟 .net Web 服务和 SQL 服务器的加载和分析

> ID：13979597
> 
> 赞同：0
> 
> 时间：2012-12-20T20:02:52.110
> 
> 标签：c#, sql, web-services, stress-testing

这是我的场景，我开发了一个 android 应用程序，该应用程序定期调用 Web 服务，该服务反过来对数据库执行查询。在现场将有数百个这样的设备运行，大约每 60 秒进行一次轮询。由于使用量和使用频率，人们对效率存在一些担忧，我被告知要找出任何潜在的性能问题并提出解决这些问题的策略。（我所看到的只是索引碎片严重的问题）

所以我对你的问题是：

*   有哪些方法可以模拟 Web 服务上的负载？
*   使用 SQL - 我熟悉检查执行计划，除此之外还有什么我应该关心的吗？
*   如何衡量 .net Web 服务的“效率”？我应该注意哪些事项？有没有可以用来查看热点和潜在瓶颈的工具？

感谢您提供的任何资源和见解，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:17:43.233

如果您有权访问 MSDN Ultimate 许可证，则可以使用 Visual Studio 中内置的负载测试项目。使用他们的负载测试，您可以运行您设计的任何负载测试，它会记录性能数据，以便您在测试期间看到影响。

[http://www.microsoft.com/visualstudio/eng/products/compare](http://www.microsoft.com/visualstudio/eng/products/compare)

在功能比较 > 测试工具部分，他们有一个涵盖负载测试的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:21:14.630

如果您的 Web 服务在 HTTP 上运行（这很可能），那么大多数 Web 负载测试软件都能够满足您的需求。其中一些甚至可以记录来自本地 Android 设备的流量，然后您可以对其进行自定义以生成所需的负载。

我会推荐我们自己的产品[Load Tester LITE](http://www.webperformance.com/load-testing/free-load-tester-lite.html)，它可以免费完成您需要的一切。录制能力取决于您可用的特定 Android 版本 - 我们的支持人员将很乐意帮助您完成它。

# php - jQuery和php文件上传

> ID：13979599
> 
> 赞同：2
> 
> 时间：2012-12-20T20:03:00.220
> 
> 标签：php, jquery, html

我不明白，谷歌没有给我答案。我想上传一个文件，结果显示在没有页面重载的div中，但我无法得到它！！！！

html:

```
<form method="post" action="process/pic2.php" enctype="multipart/form-data" id="userpic">
<p>Izvēlies bildi: <input type="file" name="img_to_upload" /><input type="submit" name="upload" value="Augšupielādēt" /></p>
</form> 
```

jQuery：

```
jQuery(function(){
        jQuery('#userpic').submit(function(){
            jQuery.ajax({
                type: 'POST',
                enctype: 'multipart/form-data',
                url: jQuery('#userpic').attr('action'),
                data: jQuery('#userpic').serialize(),
                success: function(data){
                    if(data){
                        jQuery('#picinfo').html(data);
                    }else{
                        jQuery('#uerpic').fadeOut(500);
                        jQuery('#picinfo').html('<center><img src="img/loader.gif" /></center>');
                            window.location = 'index.php';
                    }
                }
            });
            return false;
        });
    }); 
```

和我的 php：

```
if(isset($_FILES['img_to_upload']['name']) && !empty($_FILES['img_to_upload']['name'])){
        echo 'Done!';
    }else{
        echo 'Error!';
    } 
```

一直显示“错误”文本..

PS对不起英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:10:27.660

通常，要提交表单并保持在同一页面上，您必须使用 Javascript 阻止默认表单操作，如下所示：

```
$("#userpic").submit(function(event) {
  event.preventDefault();
  ...
}); 
```

但是，通过 Ajax 上传图像非常棘手——请参阅：

[使用 jquery $.ajax 和 php 上传文件](https://stackoverflow.com/questions/10260865/uploading-files-with-jquery-ajax-and-php)

# javascript - 两个相互冲突的javascript

> ID：13979600
> 
> 赞同：1
> 
> 时间：2012-12-20T20:03:04.393
> 
> 标签：javascript

我已经搜索了所有可能的网站，我已经联系了我们的网站开发人员，他们并不是真正的专业设计师或编码人员，我被困住了。我的主页上运行了两个脚本，据她说，只要有两个，“NewsRotator”脚本就会被取消并且功能不正确。从我读过的所有内容来看，这听起来可能是`window.onload`命令的问题，但我对这个 javascript 的东西还是很陌生。

我将在此处发布编程，如果有人可以提供帮助，将不胜感激。首先，News Rotator，发生故障的那个：

```
<div id="NewsBox">
<div id="NewsContainer">
  <div id="NewsRotator">
    <div>
  <img src="images/loading.gif" border="0" alt="Loading..."><br>Loading...
}    
</div>
  </div>
<div style="clear:both;height:1px;overflow:hidden"></div>
</div>
<div id="NewsPreview"></div>
<div id="NewsItems" style="display:none">
[!Ditto? &startID=`[[CurrentPress]]` &summarize=`4` &tpl=`NewsRotatorArticle`      &sortBy=`pub_date` &sortDir=`DESC`!]
</div>
</div>
<script language="javascript">
// Change the value below to modify the delay between news items.
var delaySeconds = 8;
var currentItem = 0;
var timer = null;
var newsItems;
var articles = new Array();

window.onload=initializeItems;

// Intialize Variables
function initializeItems() {
init();

newsItems = document.getElementById('NewsItems');
var divs = newsItems.getElementsByTagName('DIV');
for (var i=0;i<divs.length;i++) {
    if (divs[i].getAttribute("type") == 'article')
        articles[articles.length] = divs[i];
}
displayItem();
}

// Display item
function displayItem() {
if (currentItem > articles.length - 1) currentItem = 0;
if (articles[currentItem]) {
var url = articles[currentItem].getAttribute("url");
var html = articles[currentItem].innerHTML;

document.getElementById("NewsRotator").innerHTML = html;
var newslink = document.getElementById("NewsLink");
var links = newslink.getElementsByTagName("A");
links[0].href = url;
newslink.style.display = "block";

currentItem++;
updatePreview();
timer = window.setTimeout("displayItem()",delaySeconds*1000);
}
}

function updatePreview() {
    var imgs = new Array();
    var html = "";

    // Get main image from each article;
for (var i=0; i<articles.length; i++) {
    var tmp = articles[i].getElementsByTagName("IMG");
    if (tmp && tmp.length > 0)
        imgs[imgs.length] = tmp[0].src;
    else
        imgs[imgs.length] = null;
}

var end = (currentItem > articles.length-1) ? articles.length-1 : currentItem;
var begin = end-3;
if (begin < 0) {
    begin = 0;
    end = (articles.length >= 4) ? 3 : articles.length-1;
}

for (var j=begin; j<=end; j++) {
    //alert('begin: ' + begin + "\n end:" + end);
    if (imgs[j] != null) {
       if(j+1 == currentItem) {
           html += '<li><a href="#" onclick="currentItem=' + j + ';window.clearTimeout(timer);displayItem();return false;" class="current">';
           html += '<img src="/images/news/prev'+(j+1)+'-over.gif" alt="'+(j+1)+'" border="0"></a></li>' + "\n";+'</a></li>' + "\n";
       }
       else {
           html += '<li><a href="#" onclick="currentItem=' + j + ';window.clearTimeout(timer);displayItem();return false;">';
           html += '<img src="/images/news/prev'+(j+1)+'.gif" alt="'+(j+1)+'" border="0"></a></li>' + "\n";+'</a></li>' + "\n";
       }
    }
}

if (html != "") {
    html = '<ul>' + html + '</ul><div style="clear:both"></div>';
    document.getElementById('NewsPreview').innerHTML = html;
}
}
</script> 
```

这是第二个，当它在页面上时效果很好，但它关闭了我的新闻旋转器。

```
//Specify the slider's width (in pixels)
var sliderwidth="300px"
//Specify the slider's height
var sliderheight="150px"
//Specify the slider's slide speed (larger is faster 1-10)
var slidespeed=3
//configure background color:
slidebgcolor="#EAEAEA"

//Specify the slider's images
var leftrightslide=new Array()
var finalslide=''
//Specify the slider's width (in pixels)
var sliderwidth="940px"
//Specify the slider's height
var sliderheight="125px"
//Specify the slider's slide speed (larger is faster 1-10)
var slidespeed=2
//configure background color:
slidebgcolor="#ffffff"

//Specify the slider's images
var leftrightslide=new Array()
var finalslide=''
leftrightslide[0]='<a href="http://deals.sheraton.com/promos/NAD-massachusetts-Springfield-falcons-hockey"><img src="assets/images/new web graphics/Corporate Logos/sheraton.png" border=1></a>'
leftrightslide[1]='<a href="http://www.libboslaw.com"><img src="assets/images/new web graphics/Corporate Logos//libboslaw.png" border=1></a>'
leftrightslide[2]='<a href="http://www.amicaconnections.com"><img src="assets/images/new web graphics/Corporate Logos/amica.png" border=1></a>'
leftrightslide[3]='<a href="http://www.artiolidodge.com"><img src="assets/images/new web graphics/Corporate Logos/artiolidodge.png" border=1></a>'
leftrightslide[4]='<a href="http://www.bigy.com"><img src="assets/images/new web graphics/Corporate Logos/bigy.png" border=1></a>'
leftrightslide[5]='<a href="http://www.bltees.com"><img src="assets/images/new web graphics/Corporate Logos/bltees.png" border=1></a>'
leftrightslide[6]='<a href="http://www.completepayrollsolutions.com"><img src="assets/images/new web graphics/Corporate Logos/cps.png" border=1></a>'
leftrightslide[7]='<a href="http://www.baliseauto.com"><img src="assets/images/new web graphics/Corporate Logos/balise.png" border=1></a>'
leftrightslide[8]='<a href="http://www.facebook.com/70054351104/posts/10151037727871105"><img src="assets/images/new web graphics/Corporate Logos/garyrome.png" border=1></a>'
leftrightslide[9]='<a href="http://www.mylimo5.com"><img src="assets/images/new web graphics/Corporate Logos/exclusivelimo.png" border=1></a>'
leftrightslide[10]='<a href="http://www.businesswest.com"><img src="assets/images/new web graphics/Corporate Logos/businesswest.png" border=1></a>'
leftrightslide[11]='<a href="http://www.springfieldmagnet.com/website"><img src="assets/images/new web graphics/Corporate Logos/magnetschools.png" border=1></a>'
leftrightslide[12]='<a href="http://www.mymamamiaspizza.com"><img src="assets/images/new web graphics/Corporate Logos/mama mias.png" border=1></a>'
leftrightslide[13]='<a href="http://www.maplegaterehab.com"><img src="assets/images/new web graphics/Corporate Logos/maplegate.png" border=1></a>'
leftrightslide[14]='<a href="http://www.massmutual.com"><img src="assets/images/new web graphics/Corporate Logos/massmutual.png" border=1></a>'
leftrightslide[15]='<a href="http://www.mricenter.com/locations/Massachusetts_Springfield.htm"><img src="assets/images/new web graphics/Corporate Logos/mricenter.png" border=1></a>'
leftrightslide[16]='<a href="http://www.hampdenbank.com"><img src="assets/images/new web graphics/Corporate Logos/hampdenbank.png" border=1></a>'
leftrightslide[17]='<a href="http://www.springfielddowntown.com"><img src="assets/images/new web graphics/Corporate Logos/sbid.png" border=1></a>'
leftrightslide[18]='<a href="http://www.jtssportspub.com"><img src="assets/images/new web graphics/Corporate Logos/jts.png" border=1></a>'
leftrightslide[19]='<a href="http://www.wne.edu"><img src="assets/images/new web graphics/Corporate Logos/wne.png" border=1></a>'
leftrightslide[20]='<a href="http://www.reminderpublications.com"><img src="assets/images/new web graphics/Corporate Logos/reminder.png" border=1></a>'
leftrightslide[21]='<a href="http://www.theobbq.com"><img src="assets/images/new web graphics/Corporate Logos/theodores.png" border=1></a>'
leftrightslide[22]='<a href="http://forms.prideaccounts.com/gas.html"><img src="assets/images/new web graphics/Corporate Logos/pride.png" border=1></a>'
leftrightslide[23]='<a href="http://www.reliabletemps.com"><img src="assets/images/new web graphics/Corporate Logos/reliabletemps.png" border=1></a>'

//Specify gap between each image (use HTML):
var imagegap="<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>"

//Specify pixels gap between each slideshow rotation (use integer):
var slideshowgap=25

//Specify gap between each image (use HTML):
var imagegap=" "

//Specify pixels gap between each slideshow rotation (use integer):
var slideshowgap=5

////NO NEED TO EDIT BELOW THIS LINE////////////

var copyspeed=slidespeed
leftrightslide='<nobr>'+leftrightslide.join(imagegap)+'</nobr>'
var iedom=document.all||document.getElementById
if (iedom)
document.write('<span id="temp" style="visibility:hidden;position:absolute;top:-100px;left:-9000px">'+leftrightslide+'</span>')
var actualwidth=''
var cross_slide, ns_slide

function fillup(){
if (iedom){
cross_slide=document.getElementById? document.getElementById("test2") : document.all.test2
cross_slide2=document.getElementById? document.getElementById("test3") : document.all.test3
cross_slide.innerHTML=cross_slide2.innerHTML=leftrightslide
actualwidth=document.all? cross_slide.offsetWidth : document.getElementById("temp").offsetWidth
cross_slide2.style.left=actualwidth+slideshowgap+"px"
}
else if (document.layers){
ns_slide=document.ns_slidemenu.document.ns_slidemenu2
ns_slide2=document.ns_slidemenu.document.ns_slidemenu3
ns_slide.document.write(leftrightslide)
ns_slide.document.close()
actualwidth=ns_slide.document.width
ns_slide2.left=actualwidth+slideshowgap
ns_slide2.document.write(leftrightslide)
ns_slide2.document.close()
}
lefttime=setInterval("slideleft()",30)
}
window.onload=delay

function slideleft(){
if (iedom){
if (parseInt(cross_slide.style.left)>(actualwidth*(-1)+8))
cross_slide.style.left=parseInt(cross_slide.style.left)-copyspeed+"px"
else
cross_slide.style.left=parseInt(cross_slide2.style.left)+actualwidth+slideshowgap+"px"

if (parseInt(cross_slide2.style.left)>(actualwidth*(-1)+8))
cross_slide2.style.left=parseInt(cross_slide2.style.left)-copyspeed+"px"
else
cross_slide2.style.left=parseInt(cross_slide.style.left)+actualwidth+slideshowgap+"px"

}
else if (document.layers){
if (ns_slide.left>(actualwidth*(-1)+8))
ns_slide.left-=copyspeed
else
ns_slide.left=ns_slide2.left+actualwidth+slideshowgap

if (ns_slide2.left>(actualwidth*(-1)+8))
ns_slide2.left-=copyspeed
else
ns_slide2.left=ns_slide.left+actualwidth+slideshowgap
}
}

if (iedom||document.layers){
with (document){
document.write('<table border="0" cellspacing="0" cellpadding="0"><td>')
if (iedom){
write('<div style="position:relative;width:'+sliderwidth+';height:'+sliderheight+';overflow:hidden">')
write('<div style="position:absolute;width:'+sliderwidth+';height:'+sliderheight+';background-color:'+slidebgcolor+'" onMouseover="copyspeed=0" onMouseout="copyspeed=slidespeed">')
write('<div id="test2" style="position:absolute;left:0px;top:0px"></div>')
write('<div id="test3" style="position:absolute;left:-1000px;top:0px"></div>')
write('</div></div>')
}
else if (document.layers){
write('<ilayer width='+sliderwidth+' height='+sliderheight+' name="ns_slidemenu" bgColor='+slidebgcolor+'>')
write('<layer name="ns_slidemenu2" left=0 top=0 onMouseover="copyspeed=0" onMouseout="copyspeed=slidespeed"></layer>')
write('<layer name="ns_slidemenu3" left=0 top=0 onMouseover="copyspeed=0" onMouseout="copyspeed=slidespeed"></layer>')
write('</ilayer>')
}
document.write('</td></table>')
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:22:03.900

这不是你的答案，所以我不希望它被接受，但这段代码肯定没有帮助，并表明你的冲突脚本可能在做什么。任何时候在全局范围（或​​任何共享范围）中重新声明变量时，它都会覆盖以前的声明。在这里，您将覆盖初始声明下方几行的两个变量，可能是复制/粘贴错误：

```
//Specify gap between each image (use HTML):
var imagegap="<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>"

//Specify pixels gap between each slideshow rotation (use integer):
var slideshowgap=25

//Specify gap between each image (use HTML):
var imagegap=" "

//Specify pixels gap between each slideshow rotation (use integer):
var slideshowgap=5 
```

Javascript 使用函数来控制范围，因此限制冲突的一种方法是将脚本包装在一个自封闭的匿名函数中，如下所示：

```
(function() {
    // your 1st script code here
    var foo = 'foo';
}());

(function() {
    // your 2nd script code here
    var foo = 'bar'; // will not overwrite the 1st script's foo because of the controlled scope
}()); 
```

您要做的另一件事是保持全局范围清洁。全局范围只是指分配给全局对象的属性——对于 DOM 来说`window`。所以这：

```
<script type="text/javascript">
    var foo = 'foo';
</script> 
```

...与此相同：

```
<script type="text/javascript">
    window.foo = 'foo';
</script> 
```

...并且由于在任何给定时间点只能有一个值`window.foo`，因此很容易被意外覆盖。

# cakephp - CakePHP 分页全局配置

> ID：13979605
> 
> 赞同：1
> 
> 时间：2012-12-20T20:03:21.030
> 
> 标签：cakephp, pagination

我正在使用 CakePHP2，但找不到如何更改（重新配置）分页限制，例如从 20 到 30。

有一个“全局默认限制”来设置“分页器”（PaginatorHelper？）的记录数？

“全球”的意思是“所有站点”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:06:19.993

在您的控制器中

```
public $paginate = array('limit' => 25); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:53:39.807

查看 CakePHP 的 Paginator 组件的代码，看起来您可以使用以下语法在控制器中设置全局限制（最好的位置是您的 AppController）：

```
...
public $paginate=array(); 
...
public function beforeFilter() {
    parent::beforeFilter();
    $this->paginate['limit'] = 15;
} 
```

我没有测试过它，但希望它能按预期工作。

# windows-phone-7 - 如何使用 Windows Phone 代码在图像上写文字？

> ID：13979607
> 
> 赞同：1
> 
> 时间：2012-12-20T20:03:28.747
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone-7.1.1

> **可能重复：**
> [在 WP7 中的图像上写入文本](https://stackoverflow.com/questions/9674649/write-text-on-image-in-wp7)

我有一个应用程序，我想添加的功能之一是发送带有一些文本的图片。是否可以在 windows phone 中编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:34:11.167

简单的方法就是用 WriteableBitmap 上的文本渲染一个 TextBlock

```
private void RenderString(WriteableBitmap bitmap, string stringToRender)
{
    TextBlock textBlock = new TextBlock();
    textBlock.Text = stringToRender;

    // set font, size, etc. on textBlock

    bitmap.Render(textBlock, null);
    bitmap.Invalidate();
} 
```

# php - 用我的 PHP 登录脚本实现这个 HTML

> ID：13979608
> 
> 赞同：-3
> 
> 时间：2012-12-20T20:03:34.697
> 
> 标签：php, html, forms, login, implementation

有人可以帮我用我的 PHP 登录页面实现这个 HTML 吗？由于某种原因，该页面无响应。

这是HTML代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <link rel="stylesheet" href="css/screen.css" type="text/css" />
    <!--[if ite - 8]><link rel="stylesheet" href="css/screen_ie.css" type="text/css" /><![endif]-->
    <meta http-equiv="content-type" content="text/html; charset=windows-1251" />
    <title>Index</title>
</head>
<body>
    <div id="block">
        <div class="logo"><img src="img/logo.png" alt="" /></div>
        <div class="form">
            <p class="login-box">Login box</p>
            <div class="warning"><p>Wrong password, please try again.</p><p class="c">&nbsp;</p></div>
            <input type="text" value="Username"/>
            <input type="text" value="*******"/>
            <p class="btn">
                <input type="button" value="Login"/>
            </p>
            <ul class="nav-path">
                <li><a href="#">Forgot your password?</a></li>
                <li><a href="#">Create new account</a></li>
            </ul>
            <i class="ctop">&nbsp;</i>
            <i class="cbottom">&nbsp;</i>
        </div>
    </div>
</body>
</html> 
```

这是带有临时表单的当前 PHP 登录页面：

```
<?php
include("db.php");
session_start();
if($_SERVER["REQUEST_METHOD"] == "POST")
{
// username and password sent from Form
$username=mysql_real_escape_string($_POST['username']); 
$password=mysql_real_escape_string($_POST['password']); 
$password = sha1($password);
$sql="SELECT * FROM client_login WHERE Username='$username' and Password='$password'";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
$row = mysql_fetch_array($result);
$client_ref = $row['Client_ref'];
$user_level = $row['user_level'];
// If result matched $username and $password, table row must be 1 row
if($count==1)
{

$_SESSION['user_level'] = $user_level;
$_SESSION['client_ref'] = $client_ref;
$_SESSION['user'] = $username;

if ($user_level == '1') {
header('Location: admin.php');
} else {

header('Location: myaccount.php');
}
}
else 
{
echo "Error logging in!";
}
}
?>
<form action="login.php" method="post">
<label>UserName :</label>
<input type="text" name="username"/><br />
<label>Password :</label>
<input type="password" name="password"/><br/>
<input type="submit" value=" Login "/><br />
</form> 
```

任何建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:07:56.723

您发布的代码似乎存在多个问题。对于我上面在评论中所述的初学者，我不认识有条件的评论`ite - 8`。确保评论是正确的，并使用[这个](http://www.quirksmode.org/css/condcom.html)网站作为参考。

此外，您正在尝试发送没有表单的输入。带有 a 的 div 与`class="form"`实际表单不同。在里面`<div class="form">`添加以下内容：

```
<form name="loginForm" id="loginForm" action="" method="post"> 
```

填写您要发布到的页面的操作。

在此行之后：`<i class="cbottom">&nbsp;</i>`添加一个结束表单标记，如下所示：

```
</form> 
```

最后，将您的按钮从 更改`type="button"`为`type="submit"`。

所以回顾一下，检查条件注释。但是，这不应阻止您的页面加载。您的主要问题是缺少表格。当您尝试提交要发布的输入时，您需要有一个表单。表单告诉页面：

*   提交请求时使用的方法`GET`或`POST`
*   `action=""`以及标签中要发布到的页面

表单可以提供其他属性，但它们与您的登录表单无关。

最后，为了将表单发布到相应的页面，必须触发提交操作。按钮的类型可以是`button`或`submit`。如果您使用它，则取决于您在属性`type="button"`中单击按钮时连接一个事件以触发。`onclick=""`

出于您的目的，您只需要提交您的页面，让 PHP 完成剩下的工作。因此，为了简单起见`type="submit"`，在它执行页面提交时使用，而无需连接适当的功能。

首先尝试这些事情，如果您仍然遇到问题，请告诉我。快乐编码！

**编辑（附加错误）：**

我看到的另一个错误是您的输入字段没有名称属性。发布表单时，名称属性将通过相应的流（GET 或 POST）发送。如果没有名称附加到输入，它们将不会被添加到流中。

看来您的 PHP 期望`$_POST['username']`输入用户名，因此添加：

```
name="username" 
```

到您的用户名输入字段。您的 PHP 似乎也`$_POST['password']`需要密码字段，因此添加：

```
name="password" 
```

到您的密码输入。还将密码输入的类型从 更改`text`为`password`。如果您想要最基本的安全性并希望任何人加入您的网站，至少在他们键入密码时隐藏他们的密码。

我建议您通过购买有关该主题的书籍或访问诸如[W3Schools](http://www.w3schools.com/)之类的网站来开始研究 HTML 和 PHP，这样您就可以学习和理解网页设计的基础知识，尤其是 HTML，因为这是您将要构建的基础上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:13:13.407

使用表单标签并执行您的 php 文件或使用 javascript 提交您的表单。

```
<form action = "your_php_file.php">
//your sql queries
//don't forget to connect to database mysql_connect
</form> 
```

PS我希望这对你有帮助！

# database - 数据库规范化 - 有一个没有关系的表有多不好？

> ID：13979612
> 
> 赞同：0
> 
> 时间：2012-12-20T20:03:50.187
> 
> 标签：database, datatable, normalization, foreign-key-relationship

我对数据库设计真的很陌生，我现在将演示：

我有一个需要向其中添加表的 MS Sql 数据库。该表包含与另一个表有关的信息。但是，没有候选主键（所有字段都可以重复）。该表的唯一用途是保存某种查询可能需要的记录，并且可以使用我的其他表也包含的字段（但绝不是唯一的）非常容易地检索它们。

具体来说，我的主表有一堆化学记录。每个化学记录都与另一组称为质量控制记录的记录相关联（在我的第二个表中）。它们由一个名为“BatchID”的字段关联。超级简单的部分是我可以说，“使用此 BatchID 获取所有记录”并得到我需要的东西。但是两个表中都可以有任何 BatchID 的多个实例（事实上，通常都有），所以我需要跳过箍来链接它们。在更一般的意义上，理论上，可以让一张桌子漂浮在周围而不连接任何东西吗？

最简单的解决方案是将质量控制放在数据库中，与化学表无关。我需要插入至少一个其他表以将其与其他任何东西相关联，也许更多，而让我的生活如此复杂的唯一原因是我不想违反数据库设计的一些重要原则。

我的问题是，在数据库中有一个自由浮动表是否可以？还是说出来了？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:55:02.880

理论上，没有任何外键约束的表是可以的。但是您描述的表（您描述的两个表）可能应该*有*一个引用批次表的外键。我们希望批处理表将“BatchID”作为其主键。

关系模型要求表至少有一个候选键。拥有一个没有候选键的 SQL 表几乎总是一个坏主意。

# ajax - Django jQuery Ajax。我得到响应，但它没有插入 html

> ID：13979614
> 
> 赞同：0
> 
> 时间：2012-12-20T20:03:57.207
> 
> 标签：ajax, django, jquery

对我来说已经足够了`dajaxice`。现在我正在尝试使用 jQuery 摧毁我的大脑。

早些时候，我在做`$.get`，一切都很好。现在，当我用（get）尝试它时，`$.ajax`这就是我所拥有的：

网址.py

```
from django.conf.urls import patterns, include, url
from BitProject.views import index_page,xhr_test

urlpatterns = patterns('',
    (r'^$', index_page),
    url(r'^ajaxrequest/$', xhr_test, name='ajaxurl'),
) 
```

视图.py

```
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.utils import simplejson

def index_page(request):
    return render_to_response ('template_1.html')

def xhr_test(request):
    if request.is_ajax():
        message = "Hello AJAX"
    else:
        message = "Hello"
    return HttpResponse(simplejson.dumps(message), mimetype="applicaton/json") 
```

模板_1.html

```
<html>
    <head>

    {% load staticfiles %}
    <link rel="stylesheet" href="{% static "css/style_2.css" %}" type="text/css">
    <script src="{% static "js/jquery_v183.js" %}"></script>

    <script>   
        $(document).ready(function(){
            $('#picture_1').click(function(){
                $.ajax({
                    url:"/BitProject/ajaxrequest/",
                    type: 'GET',
                    success: function(data){
                        $('#someEl_2').html(data)
                    },
                    dataType: JSON
                });
            });
        });

    </script>
    </head>

    <body>
        <img src="{% static "images/sunny.png" %}" id="picture_1" magrin='10px'/>
        <div id="someEl_2">First Text</div>
        </div>
    <body>
</html> 
```

我正在使用铬。我在控制台中看到我有响应 - 在响应选项卡中 - `Hello AJAX`。但页面上没有任何反应。我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:02:46.030

你能把`dataType`javascript放在引号之间吗，改变：

```
dataType: JSON 
```

至

```
dataType: 'json' 
```

当您直接访问时，您的浏览器会做什么`/BitProject/ajaxrequest/`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T22:34:05.597

您的代码中也有错字`view's`。代替：

> mimetype="**应用程序**/json"

为了：

> mimetype="**应用程序**/json"

# sql - 使用 DATEDIFF 在嵌套 SELECT 中添加新列

> ID：13979618
> 
> 赞同：1
> 
> 时间：2012-12-20T20:04:06.377
> 
> 标签：sql, select, datediff

这里承认 SQL 新手，但我正在处理一个请求变得更加复杂的查询。很短的一点是我有一张有几列的桌子。其中之一是日期列。

我正在编写一个查询以返回一组列，并根据日期范围（<=90 天、91-180、180+）添加一个新列。这就是我到目前为止所拥有的。它适用于前 90 个，但我很难嵌套其他选择命令来获取其他数据集。

```
Select Key, Name, 'C90' as Code
From LD_List
WHERE DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) <= 90 
```

我很感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:09:52.190

```
SELECT Key, Name,
   CASE WHEN DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) <= 90 THEN 'C90'
        WHEN DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) >= 91 AND DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) <= 180 THEN 'C180'
        WHEN DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) >= 181 THEN 'C181'
   END AS Code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:15:46.630

如果您使用的是 TSQL、SQL Server 或 MYSQL，您可以使用`CASE WHEN`： Key 是一个**resreved 关键字**。所以使用方括号。在我的示例中，我使用了密钥作为 id。

*   [SQLFIDDLE](http://sqlfiddle.com/#!3/2f35d/1)

查询：SQL Server 版本：

```
Select id, Name, 
case when DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) <= 90 
Then 'C90' 
when (DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) >= 91 
and DATEDIFF(DAY,[LAST_PURCHASE_DATE],GETDATE()) <= 180) 
then 'C180' 
else 'C181' 
end AS Code
From LD_List 
```

结果：

```
ID  NAME    CODE
1   john    C181
2   tim     C181
3   jack    C181
4   kate    C181
5   jim     C181
6   ron     C180
7   henry   C180
8   liza    C90 
```

* * *

## 额外的 ：）

现在，如果您需要如下所示的数据透视表：检查此 * [SQLFIDDLE Demonstration](http://sqlfiddle.com/#!3/2f35d/14)

结果：

```
CODE    PURCHASERS
C180    ron,henry
C181    john,tim,jack,kate,jim
C90     liza 
```

# java - 带有 java 服务和 JMS 的 Grails 应用程序

> ID：13979619
> 
> 赞同：0
> 
> 时间：2012-12-20T20:04:08.577
> 
> 标签：java, grails, jms, activemq

我从 Grails 开始，想要构建一个示例应用程序。

下面是我设想的应用程序的流程。我会跟进问题。

应用流程：

*   用户上传文件
*   控制器获取文件并仅发送回复说“已上传”
*   文件被放入 JMS 队列
*   单独运行的 Java 服务从队列中获取文件并处理它（只读取第一个单词）
*   Java 服务将响应放回（它把响应放在哪里？）
*   Grails App 将读取响应并将其呈现给用户

**问题**

*   java服务读取文件后把数据放在哪里？
*   grails 应用程序如何读取 java 服务放置的数据？
*   我的理解中是否缺少某些内容？我打算使用 grails jms 插件和 ActiveMQ
*   这种架构可以改进吗？这是我正在为更大的应用程序组装的原型。

我真的很感激任何关于像上面这样的简单应用程序示例的文章/教程......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:24:21.173

在您的情况下，JMS 以同步方式使用，因此您是否可以这样做取决于您的 JMS 提供者。如果 JMS 提供者能够进行同步通信，则您将文件处理后的答案放入回复队列。

在同步 JMS 方式中，java 服务将等待来自 JMS 提供者的响应，以便可以将来自服务的响应呈现给控制器，然后再呈现给用户......

所以..：

*   用户上传文件
*   控制器获取文件并将其发送到 JMS 队列并等待响应！
*   单独运行的 Java 服务从队列中获取文件并处理它（只读取第一个单词）
*   Java 服务将响应放回回复队列
*   控制器将获取响应读取响应并将其呈现给用户

您的页面可能是一个很好的 ajax 页面，它为用户提供了一个处理微调器。

# java - Java 使用 SSL 进行数据库连接

> ID：13979622
> 
> 赞同：12
> 
> 时间：2012-12-20T20:04:36.663
> 
> 标签：java, mysql, database, ssl, truststore

我目前正在不使用 SSL 连接到我的数据库。我现在想使用 SSL。我设置它的方式是我的数据库源在配置中。

```
DB_SOURCE=jdbc:mysql://myDatabaseInfo:3306/DB_NAME?
DB_USER=dbUser
DB_PW=dbPw 
```

我可以通过使用以下参数调用我的程序来使 SSL 连接正常工作

```
-Djavax.net.ssl.trustStore=path\to\truststore
-Djavax.net.ssl.trustStorePassword=myPassword 
```

我还可以通过更改代码本身中的环境变量来使其工作

```
dbSource += "?useSSL=true";
System.setProperty("javax.net.ssl.trustStore", "path\to\truststore");  
System.setProperty("javax.net.ssl.trustStorePassword", "myPassword");  
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection(dbSource, dbUser, dbPw); 
```

但是，我的目标是在不更改我的代码和更改我使用的 VM 参数的情况下建立 SSL 连接。有没有办法可以设置我的来源以包含此信息？

就像是：

```
jdbc:mysql://myDatabaseInfo:3306/DB_NAME?useSSL=true&trustCertificateKeyStoreUrl=path\to\truststore&trustCertificateKeyStorePassword=myPassword 
```

我完全尝试过，但它不起作用，理想情况下我可以将信息添加到我已经拥有的配置中，这样我就不必在多个地方进行更改。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:55:04.737

**建议1：**将您的信任库而不是java的信任库，或者将您的证书导入java的信任库：`${java.home}/lib/security/cacerts`

**建议 2：**编写自己的驱动程序扩展`com.mysql.jdbc.Driver`. 将 SSL 配置放入新代码中。虽然您需要编码，但不在主应用程序中。不确定它是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T14:24:16.300

根据[MySQLConnector 文档](https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html)的安全部分，`trustCertificateKeyStoreUrl`将 URL 作为输入。

也就是说，您必须为其添加前缀`file:`才能使其适用于本地文件。换句话说，您需要将信任库的路径设置为`file:path\to\truststore`.

`clientCertificateKeyStoreUrl`如果您也使用该参数，则同样适用。

# c# - 从 Source 获取图像 uri

> ID：13979627
> 
> 赞同：2
> 
> 时间：2012-12-20T20:04:56.917
> 
> 标签：c#, wpf, silverlight, windows-phone-7, xaml

如何获取图片网址？我的xml是：

```
<toolkit:HubTile Name="Demo" Title="Demo" Source="demo\0.png"  Margin="15" Tap="Demo_Tap"/> 
```

在c#中我尝试从发件人那里获取url（因为我在同一个水龙头中有很多条目）到目前为止我的c#

```
((Microsoft.Phone.Controls.HubTile)(sender)).Source 
```

我得到错误

我需要的就在里面

```
System.Windows.Media.Imaging.BitmapImage m_string; 
```

但我如何访问它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:08:56.037

如果`Source`是，`BitmapImage`您可以将发件人源转换为`BitmapImage`

```
(((Microsoft.Phone.Controls.HubTile)(sender)).Source as BitmapImage).UriSource.OriginalString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:08:39.503

**资源**

Source 是 ImageSource 类型的依赖属性。它获取或设置 HubTile 控件的图像源。

获取值时是否要转换为 ImageSource？此外，如果您显示错误消息也会有所帮助。

**更新**

根据您的更新，转换为 BitmapImage 并获取 UriSource 可能会得到您想要的：

```
(BitmapImage).UriSource 
```

# wget - 向这个表单提交数据的 wget 命令是什么？

> ID：13979630
> 
> 赞同：1
> 
> 时间：2012-12-20T20:05:02.410
> 
> 标签：wget

我正在尝试将姓名、电子邮件地址和消息发布到此页面：

[http://zenlyzen.com/test1/index.php?main_page=contact_us](http://zenlyzen.com/test1/index.php?main_page=contact_us)

使用 wget。这个命令：

```
wget --post-data     'contactname=test&email=a@a.com&enquiry=testmessage' http://www.zenlyzen.com/test1/index.php?main_page=contact_us\&action=send%20method="post" 
```

保存此页面：

[http://www.zenlyzen.com/wgettest.html](http://www.zenlyzen.com/wgettest.html)

我用 cookie 和会话 cookie 到处乱逛，但无济于事。

提前致谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:57:49.447

使用[卷曲](/questions/tagged/curl "显示标记为“卷曲”的问题")：

```
$ mech-dump --forms 'http://zenlyzen.com/test1/index.php?main_page=contact_us'
(...)

POST http://zenlyzen.com/test1/index.php?main_page=contact_us&action=send&zenid=075b74c66fbc5a701712880eb31f39f3 [contact_us]
  securityToken=b48dfdc80002c49fa5f6b07f7dc9be65 (hidden readonly)
  contactname=                   (text)
  email=                         (text)
  enquiry=                       (textarea)
  should_be_empty=               (text)
  <NONAME>=<UNDEF>               (image)

(...) 
```

`mech-dump``libwww-mechanize-perl`命令在 Debian 及其衍生版本下附带。

最后 ：

```
curl -A "Mozilla/5.0" -L -b cookies.txt -c cookies.txt -s -d "contactname=XXX&mail=XXXX&enquiry=XXXX&should_be_empty=" 
```

（用您的输入替换 XXX）。这应该工作！

您可以使用`LiveHttpHeaders`firefox 模块查看要重现的标题。

请参阅`man curl`以了解所有开关。

# variables - 通过字符串变量访问数据表

> ID：13979633
> 
> 赞同：0
> 
> 时间：2012-12-20T20:05:12.310
> 
> 标签：variables, datatable

这可能是那些简单到我看不到的那些之一。我有一个名为 Market 的字符串变量。该变量是用户选择的，并且与我的数据集中的许多表之一完全相同。基本上我让用户在组合框中选择他们想要的表，然后我想使用该变量来访问表。因此，如果用户选择“Market1”，那么我想打开名为 Market1 的表。

我在这里简化，但需要知道如何打开：

```
For ds.<variable here>.rows.count - 1
    'perform steps
Next 
```

如何正确注入变量？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:16:00.913

Dataset 具有 Tables 属性，该属性接受表名作为参数。因此，在您的情况下，如果字符串变量`Market`包含表名，您可以通过引用来访问该表`ds.Tables(Market)`

# c# - 手动创建 WPF 项目

> ID：13979636
> 
> 赞同：6
> 
> 时间：2012-12-20T20:05:24.137
> 
> 标签：c#, wpf, xaml

我正在尝试在 VS2010 中不使用自动生成文件的情况下创建一个 wpf 项目，我认为这会帮助我更好地理解，所以我希望这听起来不是超级原始的问题。

无论如何，在制作 xaml 文件及其背后的代码后，例如 myWindow.xaml 和 myWindow.xaml.cs，我还创建了 App.xaml 及其背后的代码。

在我运行代码并收到以下消息之前，一切似乎都很好：

> “test1.exe”不包含适合入口点的静态“Main”方法

这是我到目前为止所拥有的：

```
<Application x:Class="test1.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="myWindow.xaml">
    <Application.Resources>

    </Application.Resources>
</Application>

namespace test1
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
        public App()
        {
            InitializeComponent();
        }
    }
} 
```

然后有

```
<Window x:Class="test1.myWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             >
    <Grid>

    </Grid>
</Window>

namespace test1
{
    /// <summary>
    /// Interaction logic for myWindow.xaml
    /// </summary>
    public partial class myWindow : Window
    {
        public myWindow()
        {
            InitializeComponent();
        }
    }
} 
```

可能是因为这里生成了错误的 BAML 文件？因为 Main() 通常在构建过程中放置​​。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T20:10:11.917

App.xaml 的 Build Action 需要设置为“ApplicationDefinition”才能为您生成 Main。它可能设置为“页面”，这是 XAML 文件的默认设置。选择 App.xaml 文件时查看属性。

# jquery - 将 html 表列值复制到指定列输入

> ID：13979639
> 
> 赞同：2
> 
> 时间：2012-12-20T20:05:37.760
> 
> 标签：jquery, html-table

下面的 HTML 表格是在我的 PHP 代码中生成的，可以有任意数量的行，最多大约 500 行或更多。

```
<table>
    <tr>
        <th>Name</th>
        <th>Working</th>    
        <th>Non-Working</th>    
        <th>Top Working Rate</th>
    </tr>
    <tr>
        <td>DX</td>
        <td><input type="text" name="items[4357][1]" value="1.00"></td>
        <td><input type="text" name="items[4357][2]" value="1.00"></td>
        <td>None</td>
    </tr>
    <tr>
        <td>Kindle</td>
        <td><input type="text" name="items[4358][1]" value="1.00"></td>
        <td><input type="text" name="items[4358][2]" value="1.00"></td>
        <td>None</td>
    </tr>
    <tr>
        <td>Kindle 2</td>
        <td><input type="text" name="items[4359][1]" value="1.00"></td>
        <td><input type="text" name="items[4359][2]" value="1.00"></td>
        <td>None</td>
    </tr>
    <tr>
        <td>Kindle 2 3G</td>
        <td><input type="text" name="items[4360][1]" value="1.00"></td>
        <td><input type="text" name="items[4360][2]" value="1.00"></td>
        <td>None</td>
    </tr>
    <tr>
        <td>Kindle 3 3G</td>
        <td><input type="text" name="items[4361][1]" value="1.00"></td>
        <td><input type="text" name="items[4361][2]" value="1.00"></td>
        <td>None</td>
    </tr>
    <tr>
        <td>Kindle Fire</td>
        <td><input type="text" name="items[4362][1]" value="1.00"></td>
        <td><input type="text" name="items[4362][2]" value="1.00"></td>
        <td>60.00</td>
    </tr>
    <tr><td><input type="submit" value="Save Rates"></td></tr>
</table> 
```

通过单击链接或按钮，我想复制第 4 列中的值以在第 2 列中输入值。如果值为“无”，则不应复制该行。最好，该解决方案将使我能够将要从/复制到的列作为参数传递，但我可以在必要时进行调整。

显然，在处理较大的表时，代码可能会变慢，但最终用户预计会出现一些延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:15:28.470

你可以试试这个：

```
$('input[type=submit]').on('click', function(e) {
    e.preventDefault();
    $('tr').each(function() {
        var $this = $(this),
            prc = $this.find('td').eq('3').html();
        if (prc !== 'None') {
            $this.find('td').eq('1').find('input').val(prc);
        }
    });
});​ 
```

[小提琴棒](http://jsfiddle.net/psyon001/tsdaS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:15:21.010

```
$("#mybutton").click(function(e) {
    e.preventDefault();
    $("table").children("tbody").children("tr").each(function(i, row) {
        var cols = $(row).find("td");
        if (cols.length > 0 && $(cols[3]).text() != 'None') { /* skip rows with only <th> */
            $(cols[1]).find("input").val($(cols[3]).text());
        };
    });
}); 
```

[小提琴](http://jsfiddle.net/barmar/P5cDY/)

# javascript - EXTJS ViewPort：允许重叠

> ID：13979640
> 
> 赞同：0
> 
> 时间：2012-12-20T20:05:48.400
> 
> 标签：javascript, extjs4

我正在使用 extjs 4.1 我有一个用于布局我的应用程序的视口。我在北部地区有一个面板，这是我创建应用程序横幅的地方。它是一个使用加载器并加载包含我的横幅代码的 JSP 的面板。在 JSP 页面中，我在面板底部有一个使用 javascript 的链接，当用户将鼠标悬停在它上面时，会打开一个菜单。问题是当菜单打开时，它不会在视口中的北面板底部打开。有没有办法让菜单打开并重叠到视口的中心面板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:24:29.580

我需要`floating : true`在创建按钮时进行设置，这允许在使用 Ext 组件时菜单在北面板之外打开。

# cloud-foundry - cloudfoundry/vcap 几个雪人测试失败

> ID：13979641
> 
> 赞同：0
> 
> 时间：2012-12-20T20:05:49.520
> 
> 标签：cloud-foundry, yeti

我现在几乎每天都在 Ubuntu 10.04.4 上构建 cloudfoundry/vcap 的单一操作系统。上一次成功完成[https://github.com/cloudfoundry/vcap](https://github.com/cloudfoundry/vcap)中列出的所有步骤是在 2012 年 12 月 4 日。从那时起，就出现了一个或另一个问题（vmc 寄存器在 12/17 左右修复）。

当前的问题在于雪人测试（第 5 步）。任何解决错误的建议将不胜感激。

我收到的 40 次失败中有 35 次是：

1) BVT::Spec::ServiceRebinding::RubySinatra 验证 postgresql 的重新绑定失败/错误：service = bind_service(service_manifest, app)

```
 RuntimeError:
   Fail to create service (postgresql 9.0): t2wd4d1-postgresql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:71:in `rebind'
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:115:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 21:54:21 -0800) 
```

2) BVT::Spec::ServiceRebinding::RubySinatra 验证将 postgresql 绑定到两个应用程序失败/错误：res.response_code.should == OK

```
 expected: 200
        got: 500 (using ==)
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:35:in `block in create_db_obj'
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:32:in `each'
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:32:in `create_db_obj'
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:100:in `bind_apps'
 # ./spec/service_rebinding/ruby_sinatra_spec.rb:127:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 21:56:17 -0800) 
```

3) BVT::Spec::AutoStaging::RubyRack rack ruby​​ 1.9 autostaging 失败/错误：bind_service(service_manifest, app)

```
 RuntimeError:
   Fail to create service (redis 2.2): tze2msr-redis
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_rack_spec.rb:22:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 21:57:12 -0800) 
```

4) BVT::Spec::AutoStaging::RubyRack 服务自动登台失败/错误：bind_service(service_manifest, app)

```
 RuntimeError:
   Fail to create service (mongodb 2.0): tpyrgfp-mongodb
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_rack_spec.rb:42:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/ruby_rack_spec.rb:41:in `each'
 # ./spec/autostaging/ruby_rack_spec.rb:41:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 21:59:12 -0800) 
```

5) BVT::Spec::AutoStaging::JavaGrails 启动 grails app 并添加一些记录 Failure/Error: service = bind_service(MYSQL_MANIFEST, app)

```
 RuntimeError:
   Fail to create service (mysql 5.1): tff07-mysql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_grails_spec.rb:56:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:03:08 -0800) 
```

6) BVT::Spec::AutoStaging::JavaSpring Spring Web 应用程序指定云服务和数据源

```
 Failure/Error: bind_service(MONGODB_MANIFEST, app)
 RuntimeError:
   Fail to create service (mongodb 2.0): ty9dvxf-mongodb
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_spring_spec.rb:64:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:04:57 -0800) 
```

7) BVT::Spec::AutoStaging::JavaSpring Spring Web 应用程序指定服务扫描和数据源

```
 Failure/Error: @session.cleanup!
 RuntimeError:
   Fail to delete service (mysql 5.1): teghkb0-mysql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:47:in `rescue in delete'
 # ./lib/harness/service.rb:42:in `delete'
 # ./lib/harness/cfsession.rb:146:in `block in cleanup!'
 # ./lib/harness/cfsession.rb:146:in `each'
 # ./lib/harness/cfsession.rb:146:in `cleanup!'
 # ./spec/autostaging/java_spring_spec.rb:14:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:07:41 -0800) 
```

8) 使用本地 MongoDBFactory 的 BVT::Spec::AutoStaging::JavaSpring Spring Web 应用程序

```
 Failure/Error: bind_service(MONGODB_MANIFEST, app)
 RuntimeError:
   Fail to create service (mongodb 2.0): t1o1xe3d-mongodb
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_spring_spec.rb:90:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:12:17 -0800) 
```

9) 使用本地 RedisConnectionFactory 的 BVT::Spec::AutoStaging::JavaSpring Spring Web 应用程序

```
 Failure/Error: bind_service(REDIS_MANIFEST, app)
 RuntimeError:
   Fail to create service (redis 2.2): t60sql3-redis
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_spring_spec.rb:103:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:13:57 -0800) 
```

10) BVT::Spec::AutoStaging::JavaSpring 使用本地 RabbitConnectionFactory 的 Spring Web 应用程序

```
 Failure/Error: bind_service(RABBITMQ_MANIFEST, app)
 RuntimeError:
   Fail to create service (rabbitmq 2.4): tgecyrt-rabbitmq
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_spring_spec.rb:116:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:15:29 -0800) 
```

11) BVT::Spec::AutoStaging::JavaSpring Spring 3.1 Hibernate 应用程序使用本地数据源

```
 Failure/Error: bind_service(MYSQL_MANIFEST, app)
 RuntimeError:
   Fail to create service (mysql 5.1): txbjvp7-mysql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_spring_spec.rb:129:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:18:41 -0800) 
```

12) BVT::Spec::AutoStaging::JavaSpring 使用 Hibernate 和 mysql 的 Spring Web 应用程序

```
 Failure/Error: app2.bind(service)
 RuntimeError:
   Fail to bind Service: t10g3qwn-mysql to Application: t10g3qwn-hibernate_app
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/app.rb:121:in `rescue in bind'
 # ./lib/harness/app.rb:115:in `bind'
 # ./spec/autostaging/java_spring_spec.rb:185:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:28:39 -0800) 
```

13) BVT::Spec::AutoStaging::JavaSpring Spring Roo 应用程序使用 mysql

```
 Failure/Error: app2.bind(service)
 RuntimeError:
   Fail to bind Service: tupiy7x-mysql to Application: tupiy7x-roo_app
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/app.rb:121:in `rescue in bind'
 # ./lib/harness/app.rb:115:in `bind'
 # ./spec/autostaging/java_spring_spec.rb:203:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:35:47 -0800) 
```

14) BVT::Spec::AutoStaging::JavaSpring 使用 Hibernate 和 postgresql 的 Spring Web 应用程序

```
 Failure/Error: service = bind_service(POSTGRESQL_MANIFEST, app)
 RuntimeError:
   Fail to create service (postgresql 9.0): t1eyhai1-postgresql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/java_spring_spec.rb:213:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:40:33 -0800) 
```

15) BVT::Spec::AutoStaging::RubySinatra 服务自动登台

```
 Failure/Error: bind_service(service_manifest, app)
 RuntimeError:
   Fail to create service (redis 2.2): tqm94mh-redis
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_sinatra_spec.rb:24:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/ruby_sinatra_spec.rb:23:in `each'
 # ./spec/autostaging/ruby_sinatra_spec.rb:23:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:42:17 -0800) 
```

16) BVT::Spec::AutoStaging::RubySinatra Sinatra AMQP 自动登台

```
 Failure/Error: bind_service(service_manifest, app)
 RuntimeError:
   Fail to create service (rabbitmq 2.4): tyrqzgv-rabbitmq
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_sinatra_spec.rb:33:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:43:09 -0800) 
```

17) BVT::Spec::AutoStaging::RubySinatra Autostaging 带有不受支持的客户端版本

```
 Failure/Error: bind_service(item[:service], app)
 RuntimeError:
   Fail to create service (rabbitmq 2.4): t1e3hlxl-rabbitmq
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_sinatra_spec.rb:59:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/ruby_sinatra_spec.rb:58:in `each'
 # ./spec/autostaging/ruby_sinatra_spec.rb:58:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:45:43 -0800) 
```

18) BVT::Spec::AutoStaging::RubySinatra Autostaging 带有不支持的胡萝卜版本

```
 Failure/Error: bind_service(service_manifest, app)
 RuntimeError:
   Fail to create service (rabbitmq 2.4): t1cmmfg6-rabbitmq
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_sinatra_spec.rb:69:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:46:26 -0800) 
```

19) BVT::Spec::AutoStaging::RubySinatra Sinatra 通过 cf-runtime gem 选择退出自动登台

```
 Failure/Error: bind_service(service_manifest, app)
 RuntimeError:
   Fail to create service (redis 2.2): tddh45o-redis
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_sinatra_spec.rb:89:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:47:26 -0800) 
```

20) BVT::Spec::AutoStaging::RubyRails3 Rails 自动暂存

```
 Failure/Error: service_manifests.each { |manifest| services << create_service(manifest) }
 RuntimeError:
   Fail to create service (mongodb 2.0): t1c3957g-mongodb
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./spec/autostaging/ruby_rails3_spec.rb:62:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/ruby_rails3_spec.rb:62:in `each'
 # ./spec/autostaging/ruby_rails3_spec.rb:62:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:51:53 -0800) 
```

21) BVT::Spec::Simple::RailsConsole::RubyRails3 rails 测试控制台选项卡完成

```
 Failure/Error: run_console(app.name)
 VMC::Client::HTTPException:
   HTTP exception: RestClient::RequestTimeout:Request Timeout
 # ./spec/simple/rails_console/rails_console_helper.rb:9:in `block in run_console'
 # ./spec/simple/rails_console/rails_console_helper.rb:7:in `times'
 # ./spec/simple/rails_console/rails_console_helper.rb:7:in `run_console'
 # ./spec/simple/rails_console/ruby_rails_spec.rb:63:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:55:34 -0800) 
```

22) BVT::Spec::AutoStaging::RubyRails3 Rails 通过 cf-runtime gem 选择退出 autokstaging

```
 Failure/Error: app.push(services)
 RuntimeError:
   Fail to bind Service: te6r46e-mysql to Application: te6r46e-rails_autoconfig_disabled_by_gem
   Request Timeout
 # ./lib/harness/app.rb:121:in `rescue in bind'
 # ./lib/harness/app.rb:115:in `bind'
 # ./lib/harness/app.rb:45:in `block in push'
 # ./lib/harness/app.rb:45:in `each'
 # ./lib/harness/app.rb:45:in `push'
 # ./spec/autostaging/ruby_rails3_spec.rb:104:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:57:25 -0800) 
```

23) BVT::Spec::AutoStaging::NodeNode Node.js 版本 0.4 自动登台

```
 Failure/Error: bind_service(service_manifest, app)
 RuntimeError:
   Fail to create service (mongodb 2.0): t1uzed69-mongodb
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/node_node_spec.rb:26:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/node_node_spec.rb:25:in `each'
 # ./spec/autostaging/node_node_spec.rb:25:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 22:59:46 -0800) 
```

24) BVT::Spec::AutoStaging::RubyStandalone 独立 ruby​​18 自动登台失败/错误：bind_service(service_manifest, app)

```
 RuntimeError:
   Fail to create service (mongodb 2.0): t1qynqo3-mongodb
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/autostaging/ruby_standalone_spec.rb:24:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/ruby_standalone_spec.rb:23:in `each'
 # ./spec/autostaging/ruby_standalone_spec.rb:23:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:02:21 -0800) 
```

25) BVT::Spec::Simple::RailsConsole::RubyRails3 rails 使用 ruby​​ 1.9 测试控制台 rake 任务

```
 Failure/Error: app = create_push_app("rails_console_19_test_app")
 RuntimeError:
   Start App: t1ptg2te-rails_console_19_test_app failed.
   Request Timeout
 # ./lib/harness/app.rb:104:in `rescue in start'
 # ./lib/harness/app.rb:100:in `start'
 # ./lib/harness/app.rb:46:in `push'
 # ./lib/harness/scripts_helper.rb:48:in `create_push_app'
 # ./spec/simple/rails_console/ruby_rails_spec.rb:97:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:17:21 -0800) 
```

26) BVT::Spec::Simple::RubyGems::RubySinatra sinatra 使用包含 Windows 版本的 Gemfile.lock 测试部署应用程序

```
 Failure/Error: bind_service(POSTGRESQL_MANIFEST, app)
 RuntimeError:
   Fail to create service (postgresql 9.0): t13yx454-postgresql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 (Failure time: 2012-12-18 23:22:26 -0800) 
```

27) BVT::Spec::Simple::Python2Django 部署 Django 应用程序

```
 Failure/Error: app = create_push_app("simple_django_app")
 RuntimeError:
   Application: t3c135x-simple_django_app cannot be started in 60 seconds
 # ./lib/harness/app.rb:391:in `check_application'
 # ./lib/harness/app.rb:106:in `start'
 # ./lib/harness/app.rb:46:in `push'
 # ./lib/harness/scripts_helper.rb:48:in `create_push_app'
 # ./spec/simple/python2_django_spec.rb:16:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:24:53 -0800) 
```

28) BVT::Spec::Simple::RubyRails3 访问我的应用程序根目录并查看它的运行版本

```
 Failure/Error: @app = create_push_app("app_rails_version")
 RuntimeError:
   Start App: t6erk05-app_rails_version failed.
   Request Timeout
 # ./lib/harness/app.rb:104:in `rescue in start'
 # ./lib/harness/app.rb:100:in `start'
 # ./lib/harness/app.rb:46:in `push'
 # ./lib/harness/scripts_helper.rb:48:in `create_push_app'
 # ./spec/simple/ruby_rails3_spec.rb:16:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:29:25 -0800) 
```

29) BVT::Spec::Simple::JavaStandalone 独立与 java 运行时

```
 Failure/Error: response.should =~ /Java version: #{version}/
   expected: /Java version: 1.6/
        got: "" (using =~)
   Diff:
   @@ -1,2 +1,2 @@
   -/Java version: 1.6/
   +""
 # ./spec/simple/java_standalone_spec.rb:24:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:30:38 -0800) 
```

30) BVT::Spec::Simple::PhpStandalone 独立与 php 运行时

```
 Failure/Error: response.should =~ /Hello from VCAP/
   expected: /Hello from VCAP/
        got: "PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imagick.ini on line 1 in Unknown on line 0\nPHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0\nPHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0\n" (using =~)
   Diff:
   @@ -1,2 +1,4 @@
   -/Hello from VCAP/
   +PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imagick.ini on line 1 in Unknown on line 0
   +PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0
   +PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0
 # ./spec/simple/php_standalone_spec.rb:22:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:33:20 -0800) 
```

31) BVT::Spec::AutoStaging::RubyRails3 Rails 通过配置文件选择退出自动登台

```
 Failure/Error: service_manifests.each { |manifest| services << create_service(manifest) }
 RuntimeError:
   Fail to create service (redis 2.2): til3qet-redis
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./spec/autostaging/ruby_rails3_spec.rb:84:in `block (3 levels) in <top (required)>'
 # ./spec/autostaging/ruby_rails3_spec.rb:84:in `each'
 # ./spec/autostaging/ruby_rails3_spec.rb:84:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:34:55 -0800) 
```

32) BVT::Spec::Simple::RailsConsole::RubyRails3 rails 测试控制台 Postgres 连接

```
 Failure/Error: app = create_push_app("rails_console_19_test_app")
 RuntimeError:
   Start App: t130kttg-rails_console_19_test_app failed.
   Request Timeout
 # ./lib/harness/app.rb:104:in `rescue in start'
 # ./lib/harness/app.rb:100:in `start'
 # ./lib/harness/app.rb:46:in `push'
 # ./lib/harness/scripts_helper.rb:48:in `create_push_app'
 # ./spec/simple/rails_console/ruby_rails_spec.rb:166:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:37:18 -0800) 
```

33) BVT::Spec::Canonical::JavaSpring 春季测试redis服务

```
 Failure/Error: bind_service_and_verify(app, REDIS_MANIFEST)
 RuntimeError:
   Fail to create service (redis 2.2): t18f6yaz-redis
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/canonical/canonical_helper.rb:12:in `bind_service_and_verify'
 # ./spec/canonical/java_spring_spec.rb:38:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:39:33 -0800) 
```

34）BVT::Spec::Canonical::NodeNode节点测试rabbitmq服务

```
 Failure/Error: bind_service_and_verify(@app, RABBITMQ_MANIFEST)
 RuntimeError:
   Fail to create service (rabbitmq 2.4): t16w1p05-rabbitmq
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/canonical/canonical_helper.rb:12:in `bind_service_and_verify'
 # ./spec/canonical/node_node_spec.rb:38:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:40:58 -0800) 
```

35) BVT::Spec::Canonical::RubyRack 机架测试mysql服务

```
 Failure/Error: bind_service_and_verify(@app, MYSQL_MANIFEST)
 RuntimeError:
   Fail to create service (mysql 5.1): t1du436k-mysql
   target failed to handle our request due to an internal error (502)
 # ./lib/harness/service.rb:33:in `rescue in create'
 # ./lib/harness/service.rb:28:in `create'
 # ./lib/harness/scripts_helper.rb:18:in `create_service'
 # ./lib/harness/scripts_helper.rb:23:in `bind_service'
 # ./spec/canonical/canonical_helper.rb:12:in `bind_service_and_verify'
 # ./spec/canonical/ruby_rack_spec.rb:35:in `block (2 levels) in <top (required)>'
 (Failure time: 2012-12-18 23:46:08 -0800) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:55:56.237

你能发布你的雪人回购哈希吗？还有你执行雪人测试的命令？
默认情况下，yeti 使用 10 个线程来运行测试，您可以添加 [n] 来指定线程数。我不确定你的环境是否可以并行支持10个线程，请尝试`bundle exec rake full[4]`（或[2]甚至[1]）
并且对于失败，你也可以运行`bundle exec rake rerun[1]`重新运行失败。

# webkit - Webkit console.log 倒序？

> ID：13979644
> 
> 赞同：2
> 
> 时间：2012-12-20T20:05:55.697
> 
> 标签：webkit, console

有没有办法让通过 web 检查器中的 console.log() 生成的日志以相反的顺序显示？在这种情况下，我正在测试产生大量日志消息的东西，但它们会滚动到底部并且非常不方便。我也愿意接受骇人听闻的解决方案。我刚刚考虑的一个 setInterval 每隔几秒钟在控制台上调用 clear() ，但我想看看是否有另一种方法。

# android - 文件输出流日志

> ID：13979645
> 
> 赞同：1
> 
> 时间：2012-12-20T20:05:59.627
> 
> 标签：android, fileoutputstream

对于我的应用程序，我想创建一个可以将数据记录到文件中的类。在我的应用程序中，如果他们遇到问题，可以给我发送电子邮件，并且此文件中的数据可能会帮助我剖析问题。首先，我是不是走错了路？有没有更好的方法来记录发生的异常？

问题是如果我尝试使用另一个类的 log 方法：

```
Logger.log(0,"","",""); 
```

如果尚未创建文件，则无法找到该文件或确实创建该文件。代码附在下面。

```
package com.example.test;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.os.Build;
import android.os.Bundle;
import android.text.format.Time;
import android.util.Log;

public class Logger extends Activity {

final static String FileName = "Log";
static FileOutputStream fos;
static FileInputStream fis;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("logger", "oncreate");
    try {
        File f = getFileStreamPath(FileName);
        if (!f.exists()) {
            Log.d("logger", "file doesn't exist");
            fos = openFileOutput(FileName, Context.MODE_APPEND);
            fos.write(("Created on " + Build.TIME + "\nDevice name: "
                    + Build.MODEL + " \nAndroid Version" + Build.VERSION.SDK_INT)
                    .getBytes());
            fos.close();
        }
        fos = openFileOutput(FileName, Context.MODE_APPEND);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

public static void log(int type, String TAG, String msg) {
    Log.d("logger", "file being written");
    Log.println(type, TAG, msg);
    Time now = new Time();
    now.setToNow();
    try {
        fos = new FileOutputStream(FileName);
        fos.write(("\n" + now.toString() + " " + type + " " + TAG + " " + msg).getBytes());
        fos.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:12:08.773

您是否有理由不能使用像 log4j 或 slf4j 这样的标准日志库？我认为这些可以满足您的需要，而无需自己编写 Logger 类。看起来 Android 上的 slf4j 仍处于测试阶段，但传闻表明人们已经成功地使用了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:11:40.077

这是我自己的应用程序的代码片段：

```
public static void writeLogToFile(String totalFilePath, String myError) {
    FileWriter fWriter;
try {

    fWriter = new FileWriter(totalFilePath, true);
    fWriter.append("\n");
    fWriter.append("{"
            + android.text.format.DateFormat.format(
                    "yyyy-MM-dd kk:mm:ss", new java.util.Date()) + "} ");
    fWriter.append(myError);
    fWriter.flush();
    fWriter.close();

} catch (IOException e) {
    CreateLog.addToLog(e.toString());
}

public static void checkExists(String totalPath, String fileName) {
    File path = new File(totalPath);
    if (!(path.exists())) {
        // Folder does not exists
            createFolder(totalPath);

    }

    File myFile = new File(totalPath + fileName);
    if (!(myFile.exists())) {
        // File does not exists
        writeToFile(totalPath, fileName, "%TEMP%");
    }       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:38:36.253

文件名不足以写入文件。与使用 openFileOutput 时不同，使用 FileOutputStream 时需要提供目录。因此，如果您更改此行：

```
final static String FileName = "Log"; 
```

到

```
final static String FileName = "data/data/com.example.test/files/Log"; 
```

这将解决问题。最后，在访问类中的方法时不会调用 oncreate。您必须将两者结合起来，如下所示：

```
final static String FileName = "data/data/com.example.test/files/Log";
static FileOutputStream fos;

public static void log(int priority, String tag, String msg) {
    Log.println(priority, tag, msg);
    try {
        Time now = new Time();
        now.setToNow();
        File f = new File(FileName);
        if (!f.exists()) {
            Log.i("Logger", "Creating Log file");
            fos = new FileOutputStream(f, true);
            fos.write(("Created on " + now.toString().subSequence(0, 15)
                    + "\nDevice name: " + Build.MODEL
                    + " \nAndroid Version " + Build.VERSION.SDK_INT)
                    .getBytes());
            fos.close();
        }
        fos = new FileOutputStream(f, true);
        Log.d("file", now.toString());
        fos.write(("\n" + now.toString().substring(4, 15) + " " + priority
                + " " + tag + " " + msg).getBytes());
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# twitter-bootstrap - 如何在 Bootstrap 中选择 960px 宽而不是 1200px 的容器

> ID：13979654
> 
> 赞同：6
> 
> 时间：2012-12-20T20:06:33.187
> 
> 标签：twitter-bootstrap, containers, 960.gs

如何在 Bootstrap 中选择**960px**宽而不是 1200px 的容器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-21T22:31:25.603

Bootstrap 在屏幕宽度超过 1200 像素时将容器宽度设置为 1170 像素。
对于从 992 像素到 1200 像素的屏幕，容器的宽度设置为 970 像素。[您可以在此处](http://getbootstrap.com/css/#grid)阅读有关引导程序网格的更多信息
现在，如果要将容器设置为 760px 以用于大屏幕，则必须找到它并在 bootstrap.css 中进行编辑或将此代码添加到您的自定义 css 中：

```
@media (min-width: 1200px) {
  .container {
    width: 960px;
   }
} 
```

和

```
@media (min-width: 992px) {
  .container {
    width: 960px;
   }
 } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T20:14:28.137

你只想要一个固定宽度的网站吗？如果是这样，那么就不要包括`bootstrap-responsive.css`. 固定宽度容器的默认宽度为 960 像素。

否则，如果您仍然想要响应式功能但没有 1200px 容器，则需要自定义引导安装。要做到这一点：

*   转到[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)
*   在响应部分取消选中“大型桌面（> 1200px）”
*   在页面底部单击“自定义和下载”以获取您的自定义引导程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:24:48.567

这对我有用。

!important 不推荐使用。但你可以试试。

```
.container, .container-流体{
 宽度：960 像素！重要；
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T06:37:49.680

对于 Bootstrap3，您可以自定义它以默认获取 960px ( [http://getbootstrap.com/customize/](http://getbootstrap.com/customize/) )

1.  将@container-lg 从 ((1140px + @grid-gutter-width)) 更改为 ((940px + @grid-gutter-width))。
2.  将@grid-gutter-width 从 30px 更改为 20px。

然后下载您的自定义版本的引导程序并使用它。现在默认应该是 960px。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-15T10:37:37.750

如果您使用的是 sass 和 bootstrap v3.3.1，只需在导入 bootstrap**之前定义这些变量：**

```
$grid-gutter-width: 20px;
$container-large-desktop: 940px + $grid-gutter-width; 
```

有关更多信息，请查看变量源文件： [https ://github.com/twbs/bootstrap-sass/blob/master/assets/stylesheets/bootstrap/_variables.scss](https://github.com/twbs/bootstrap-sass/blob/master/assets/stylesheets/bootstrap/_variables.scss)

# ruby-on-rails - 带有 LDAP 身份验证的 ETIMEDOUT 和 Devise (rails)

> ID：13979658
> 
> 赞同：3
> 
> 时间：2012-12-20T20:06:47.490
> 
> 标签：ruby-on-rails, devise, ldap, warden

Devise::SessionsController#create 中的 Errno::ETIMEDOUT

我正在尝试创建一个使用带有[LDAP Authentication的](https://github.com/cschiewek/devise_ldap_authenticatable)[Devise](https://github.com/plataformatec/devise)的 rails 应用程序。

不幸的是，我认为我的 LDAP 设置不正确，但是除了发生 TIMEOUT 之外，我不知道如何打印出更详细的错误信息。

这是我的 ldap 配置：

```
development:
  host: ad.cloud.domain.com
  #port: 389
  #attribute: cn
  base: DC=cloud,DC=domain,DC=com
  #admin_user: dc=cloud,dc=domain,dc=com
  #admin_password:
  ssl: false
  # <<: *AUTHORIZATIONS 
```

我知道我们没有使用 SSL，因为我已经从一个类似的 PHP 应用程序移植了这个配置，但是那个 PHP 应用程序没有**属性**字段。也许这是我不明白的？

我发现了[一些](https://stackoverflow.com/questions/13226733/how-to-catch-ldap-error-and-redirect-to-specified-page-when-using-devise-and-dev) [问题](https://stackoverflow.com/questions/4793176/when-using-omniauth-in-rails-application-why-i-always-met-errnoetimedout)，这些问题引用了如何更改错误以及它与网络连接的关系，但我找不到我的资源来了解 Net::LDAP 库以及此连接在哪里失败，我错过了什么，以及我不明白的地方。我已经验证了网络连接，还验证了使用 Windows 客户端匿名访问的 LDAP 权限。

这是输出、跟踪和转储：

```
Errno::ETIMEDOUT in Devise::SessionsController#create

Connection timed out - connect(2)
Rails.root: /vagrant/zeus2

Application Trace | Framework Trace | Full Trace
net-ldap (0.2.2) lib/net/ldap.rb:1102:in `initialize'
net-ldap (0.2.2) lib/net/ldap.rb:1102:in `new'
net-ldap (0.2.2) lib/net/ldap.rb:1102:in `initialize'
net-ldap (0.2.2) lib/net/ldap.rb:632:in `new'
net-ldap (0.2.2) lib/net/ldap.rb:632:in `search'
net-ldap (0.2.2) lib/net/ldap.rb:1038:in `search_root_dse'
net-ldap (0.2.2) lib/net/ldap.rb:1089:in `paged_searches_supported?'
net-ldap (0.2.2) lib/net/ldap.rb:618:in `search'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/ldap_adapter.rb:239:in `search_for_login'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/ldap_adapter.rb:117:in `dn'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/ldap_adapter.rb:156:in `authorized?'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/ldap_adapter.rb:14:in `valid_credentials?'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/model.rb:45:in `valid_ldap_authentication?'
activesupport (3.2.9) lib/active_support/core_ext/object/try.rb:36:in `try'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/model.rb:91:in `authenticate_with_ldap'
devise_ldap_authenticatable (0.6.1) lib/devise_ldap_authenticatable/strategy.rb:12:in `authenticate!'
warden (1.2.1) lib/warden/strategies/base.rb:53:in `_run!'
warden (1.2.1) lib/warden/proxy.rb:354:in `block in _run_strategies_for'
warden (1.2.1) lib/warden/proxy.rb:349:in `each'
warden (1.2.1) lib/warden/proxy.rb:349:in `_run_strategies_for'
warden (1.2.1) lib/warden/proxy.rb:319:in `_perform_authentication'
warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
devise (2.1.2) app/controllers/devise/sessions_controller.rb:15:in `create'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.9) lib/active_support/callbacks.rb:458:in `_run__149452621__process_action__873933735__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.9) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:36:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/mapper.rb:42:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:601:in `call'
sass (3.2.3) lib/sass/plugin/rack.rb:54:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__925590754__call__304840360__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.9) lib/rails/engine.rb:479:in `call'
railties (3.2.9) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"secrettoken=",
 "user"=>{"username"=>"user",
 "password"=>"[FILTERED]",
 "remember_me"=>"0"},
 "commit"=>"Sign in"}
Show session dump

_csrf_token: "secrettoken="
session_id: "c1e99ab4696da4ad64f6a56cc784d0eb"
Show env dump

GATEWAY_INTERFACE: "CGI/1.1"
HTTP_ACCEPT: "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
HTTP_ACCEPT_CHARSET: "ISO-8859-1,utf-8;q=0.7,*;q=0.3"
HTTP_ACCEPT_ENCODING: "gzip,deflate,sdch"
HTTP_ACCEPT_LANGUAGE: "en-US,en;q=0.8"
HTTP_CACHE_CONTROL: "max-age=0"
REMOTE_ADDR: "10.0.2.2"
REMOTE_HOST: "10.0.2.2"
SERVER_NAME: "localhost"
SERVER_PROTOCOL: "HTTP/1.1"
Response

Headers:

None 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:38:12.150

我花了一点时间，但它发生了。环境的端口从不默认，因此将其注释掉是个坏主意。我们的 AD 服务器默认使用端口 389，因此取消注释以解决此问题。

之后我遇到的另一个问题是找不到正确的用户，但**基本**变量必须完全正确。我确信还有另一种方法可以跟踪这一点（并为组、OU 等提供更多选项......）但我还没有干预任何更高级的东西。

# ruby-on-rails - 使用设计 1.0.7 覆盖会话控制器

> ID：13979660
> 
> 赞同：1
> 
> 时间：2012-12-20T20:06:54.283
> 
> 标签：ruby-on-rails, devise, overriding, controllers

我正在尝试在我的 sessions#destroy 操作中添加一行代码。我的倾向是用一个从它继承的控制器来覆盖设计控制器。我对 devise_for 语法非常熟悉，但我从 devise 1.0.7 得到这些结果。

```
map.devise_for :users, :controllers => {:sessions => 'facebook_cookie'}

                         new_user_session GET    /users/sign_in                                                        {:controllers=>{:sessions=>"facebook_cookie"}, :action=>"new", :controller=>"sessions"}
                             user_session POST   /users/sign_in                                                        {:controllers=>{:sessions=>"facebook_cookie"}, :action=>"create", :controller=>"sessions"}
                     destroy_user_session GET    /users/sign_out                                                       {:controllers=>{:sessions=>"facebook_cookie"}, :action=>"destroy", :controller=>"sessions"}
                        new_user_password GET    /users/password/new(.:format)                                         {:action=>"new", :controller=>"passwords"}

map.devise_for :users, :controllers => {:sign_out => 'facebook_cookie'}

                         new_user_session GET    /users/sign_in                                                        {:controllers=>{:sign_out=>"facebook_cookie"}, :action=>"new", :controller=>"sessions"}
                             user_session POST   /users/sign_in                                                        {:controllers=>{:sign_out=>"facebook_cookie"}, :action=>"create", :controller=>"sessions"}
                     destroy_user_session GET    /users/sign_out                                                       {:controllers=>{:sign_out=>"facebook_cookie"}, :action=>"destroy", :controller=>"sessions"}
                        new_user_password GET    /users/password/new(.:format)                                         {:action=>"new", :controller=>"passwords"}

map.devise_for :users, :controller => 'facebook_cookie'

                        new_user_session GET    /users/sign_in                                                        {:action=>"new", :controller=>"sessions"}
                             user_session POST   /users/sign_in                                                        {:action=>"create", :controller=>"sessions"}
                     destroy_user_session GET    /users/sign_out                                                       {:action=>"destroy", :controller=>"sessions"}
                        new_user_password GET    /users/password/new(.:format)                                         {:action=>"new", :controller=>"facebook_cookie"}

map.devise_for :users, :controller => {:sessions => 'facebook_cookie'}

                         new_user_session GET    /users/sign_in                                                        {:action=>"new", :controller=>"sessions"}
                             user_session POST   /users/sign_in                                                        {:action=>"create", :controller=>"sessions"}
                     destroy_user_session GET    /users/sign_out                                                       {:action=>"destroy", :controller=>"sessions"}
                        new_user_password GET    /users/password/new(.:format)                                         {:action=>"new", :controller=>"sessionsfacebook_cookie"} 
```

似乎当我指定 :controller 时，它会影响我所有的设计控制器，除了我关心的那个（我从粘贴中省略了其余部分）。另一方面，当我指定 :controllers 时，它只会影响 SessionsController 的路由 - 但它会添加无用的参数而不是覆盖路由。

# python - 使用屏幕缓冲区创建程序来“编辑”控制台中显示的文本

> ID：13979662
> 
> 赞同：2
> 
> 时间：2012-12-20T20:07:04.457
> 
> 标签：python, console, buffer

Nano 等标准 Linux 应用程序在控制台中显示一页文本，然后“编辑”（更改）它以响应用户事件。

使用的标准 python 应用程序`print`只能简单地打印到控制台。

我可以创建一个类似于 Nano 的应用程序，因为它可以在 Python 中“编辑”屏幕上的文本。

谷歌告诉我有关屏幕缓冲区的信息，但是我在 Python 中没有看到任何关于它们的信息。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:23:19.670

我没有检查，但我很确定，像大多数具有命令行用户界面的 UNIX 程序一样，nano 使用**curses/ncurses**库在终端上显示。

这是一个非常有名且易于使用的库，[如果您想了解更多信息，请查看其 wikipedia 页面](http://en.wikipedia.org/wiki/Ncurses)。

正如您从 wiki 中看到的，它可用于 python，并且在 google 上快速搜索会给您一些起点，[例如本教程](http://www.tuxradar.com/content/code-project-build-ncurses-ui-python)（没有阅读它，但它似乎涵盖了基础知识）。

祝你好运

# java - 如何向 JTextField 添加快捷键？

> ID：13979667
> 
> 赞同：5
> 
> 时间：2012-12-20T20:07:23.000
> 
> 标签：java, swing, jtextfield, key-bindings

我被困在一些无法添加快捷键的步骤中，例如：`CTRL`+`SPACE`到我的程序中，我正在搜索一个星期，我可以找到任何答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T20:23:49.020

您将需要查看[Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)以获得对键绑定的一个很好的概述。

这是一个简单的例子：

```
import java.awt.event.*;
import javax.swing.*;

public class KeyBindings extends Box{
    public KeyBindings(){
        super(BoxLayout.Y_AXIS);
        final JTextPane textArea = new JTextPane();
        textArea.insertComponent(new JLabel("Text"));
        add(textArea);

        Action action = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                textArea.setText("New Text");
            }};
         String keyStrokeAndKey = "control SPACE";
         KeyStroke keyStroke = KeyStroke.getKeyStroke(keyStrokeAndKey);
         textArea.getInputMap().put(keyStroke, keyStrokeAndKey);
         textArea.getActionMap().put(keyStrokeAndKey, action);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new KeyBindings());
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# javascript - jquery newb，难以理解选择器和索引

> ID：13979668
> 
> 赞同：2
> 
> 时间：2012-12-20T20:07:29.930
> 
> 标签：javascript, jquery, html

我在理解选择器和索引如何在 JQuery 中工作时遇到了一些麻烦。我希望编写一些基于类属性操作 html 元素的函数，我意识到当我尝试使用 index() 方法或 prevAll().length 来获取元素在一组元素中的位置时，我并不总是得到预期的结果。

下面，我有一段 jquery 代码，它对类 .element_list 的所有内容执行某些操作，然后在其中对类 .element_list_item 的所有操作执行操作。我有两个 .element_list，A 和 B，所有这些都是提醒我 .element_list_items 的索引。对于列表 A，索引按预期返回为 0 和 1。在列表 B 中，我添加了一个没有类属性的 thead 元素，所以在我看来它不应该被我的 jquery 代码抓取，但是两个 .element_list_items 以 1 和 2 的索引返回，而不是预期的 0 和 1 .

这是为什么？我的选择器正在寻找具有 .element_list_item 类和等于包含 .element_list 的 ID 的类的元素，那么为什么添加 thead 会影响 tbodies 的位置？

任何理解这一点的帮助表示赞赏。

```
<script language="javascript" type="text/javascript">
$(document).ready(function ()
{
$('.element_list').each(function()
{
    var list_id = $(this).attr('id');
    var first_item_id = $(this).find('.' + list_id + '.element_list_item:eq(0)').attr('id');

    alert('List and first list item:  ' + list_id + ' - ' + first_item_id);        

    $(this).find('.' + list_id + '.element_list_item').each(function()
    {
        var list_item_id = $(this).attr('id');
        var index = $(this).prevAll().length;

        alert('List item and its index:  ' + list_item_id + ' - ' + index);
    });
});
});
</script>
</head>
<body>
<form id="form1" name="form1" method="post" action="" enableviewstate="true">
<br />
<br />
<table class="table_noborder">
    <thead>
        <tr>
            <td>List A</td>
        </tr>
    </thead>
    <tbody id="list_A" class="element_list">
        <tr>
            <td>
                <table>
                    <tbody id="list_A_item0" class="element_list_item list_A">
                        <tr>
                            <td>First Item</td>
                        </tr>
                    </tbody>
                    <tbody id="list_A_item1" class="element_list_item list_A">
                        <tr>
                            <td>Second Item</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <td>List B</td>
        </tr>
    </thead>
    <tbody id="list_B" class="element_list">
        <tr>
            <td>
                <table>
                    <thead>
                        <tr>
                            <td>Header</td>
                        </tr>
                    </thead>
                    <tbody id="list_B_item0" class="element_list_item list_B">
                        <tr>
                            <td>First Item</td>
                        </tr>
                    </tbody>
                    <tbody id="list_B_item1" class="element_list_item list_B">
                        <tr>
                            <td>Second Item</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:25:43.333

使用不带参数的[.index()](http://api.jquery.com/index/ "jQuery 索引文档")将获得与所有兄弟姐妹相比的索引。您可以将选择器传递给它以与集合进行比较

所以

```
$('#list_B_item0').index() // will return 1 since thead(it's prev sibling) is in index 0 
```

但

```
$('#list_B_item0').index('.element_list_item.list_B') //  returns 0 since it will compare it's index with the collection 
```

也可以通过其他方式完成

```
$('.element_list_item.list_B').index('#list_B_item0') // returns 0 
```

# php - 带有 json 数据的 if 语句

> ID：13979670
> 
> 赞同：0
> 
> 时间：2012-12-20T20:07:42.377
> 
> 标签：php, jquery, json

我试图弄清楚如何使用这个作为返回的 JSON 数据运行 if 语句。当出现错误时，我希望它找出它的用户名或密码输入是否有错误，并附加一个带有错误类别的标签，即实际错误。所以下面的 if 语句需要判断它的数据错误是否是用户名，然后放入错误而不是错误。

```
{"output_status":"Error","output_title":"Form Not Validated","output_message":"The form did not validate successfully!","error_messages":{"username":"This is not have an accepted value!"}}

if (data.output_status == 'Error') 
{

    if (data.?)
    {        
        $('#username').after('<label class="error">error</label>');
    }
} 
```

编辑：

我不确定发生了什么，但现在我收到通知，表格由于某种原因没有提交。

```
$('#login_form :input:visible').each(function() {
var name = $(this).attr('name');
if (data.error_messages.name)
    {
        $(this).after('<label class="error">' + data.error_messages.name + '</label>');
    }
});

public function submit()
{
    $output_status = 'Notice';
    $output_title = 'Not Processed';
    $output_message = 'The request was unprocessed!';

    $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|callback_check_username');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean');
    $this->form_validation->set_rules('remember', 'Remember Me', 'trim|xss_clean|integer');

    if ($this->form_validation->run() == TRUE)
    {

    }
    else
    {
        $output_status = 'Error';
        $output_title = 'Form Not Validated';
        $output_message = 'The form did not validate successfully!';
    }

    echo json_encode(array('output_status' => $output_status, 'output_title' => $output_title, 'output_message' => $output_message, 'error_messages' => $this->form_validation->error_array()));
}

public function check_username($str)
{
    if (preg_match('#[a-z0-9]#', $str)) 
    {
        return TRUE;
    }
    $this->form_validation->set_message('check_username', 'This is not have an accepted value!');
    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:12:10.190

尝试：

```
if (data.error_messages['username'])
{        
    $('#username').after('<label class="error">' + data.error_messages['username'] + '</label>');
} 
```

现在作为奖励，您可以遍历所有输入字段并执行相同操作：

```
$('#form-id :input:visible').each(function() {
    var id = $(this).attr('id');
    if (data.error_messages[id])
    {        
        $(this).after('<label class="error">' + data.error_messages[id] + '</label>');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:12:20.863

您可以通过对象键访问错误消息 - 在本例中为“用户名”：

```
 if(data.error_messages["username"]) // this return undefined if it doesn't exist
 {
   // code
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T20:12:58.287

```
if (data.output_status == 'Error') 
{

    if (data.error_messages.username)
    {        
        $('#username').after('<label class="error">' + data.error_messages.username + '</label>');
    }
} 
```

如果没有用户名错误，`data.error_messages.username`将只返回 undefined。

# javascript - 当用户在文本框中键入时，过滤由 java 代码添加的 HTML 选择元素

> ID：13979675
> 
> 赞同：0
> 
> 时间：2012-12-20T20:08:07.437
> 
> 标签：javascript, jquery, html, jsp, filter

我正在使用带有 HTML 的 JSP。

在 HTML 中，我有一个文本框和一个多选元素。当用户在文本框中键入时，我想过滤选择列表中的选项。

我在这个 stackoveflow 页面上找到了一个有用的 JQuery 代码： [How to dynamic filter options of <select > with jQuery?](https://stackoverflow.com/questions/1447728/how-to-dynamic-filter-options-of-select-with-jquery)

这是代码：

```
<script>
jQuery.fn.filterByText = function(textbox) {
    return this.each(function() {
        var select = this;
        var options = [];
        $(select).find('option').each(function() {
            options.push({value: $(this).val(), text: $(this).text()});
        });
        $(select).data('options', options);

        $(textbox).bind('change keyup', function() {
            var options = $(select).empty().data('options');
            var search = $.trim($(this).val());
            var regex = new RegExp(search,"gi");

            $.each(options, function(i) {
                var option = options[i];
                if(option.text.match(regex) !== null) {
                    $(select).append(
                        $('<option>').text(option.text).val(option.value)
                    );
                }
            });
        });
    });
};

</script> 
```

你可以像这样使用它：

```
<script>
$(function() {
    $('select').filterByText($('input'));
});
</script> 
```

问题是此代码仅在选择元素中的选项被硬编码时才有效。通过硬编码，我的意思是这样的：

```
<option value="something">something</option>
<option value="something">something</option> 
```

但是，就我而言，我有一个包含大约 6000 个值的列表，我使用 java 代码将这些值添加到选择列表中。这是Java代码：

```
<%
 ArrayList<String> allGenes= new ArrayList<String>();
   allGenes.addAll(tree.getAllGenes()); 

     %>

      <%
       for(int i=0; i<allGenes.size(); i++)
       { %>
       var gene=document.createElement('option');
       var str="<%=allGenes.get(i)%>";
       gene.text= str;
       try
        {
            document.getElementById("inputSet1").add(gene,null);
        }
         catch(ex){
                  document.getElementById("inputSet1").add(gene);                             
         }
       <%}%> 
```

过滤选择列表中元素的 JQuery 代码不会过滤我使用 java 代码添加的这些值。相反，它会删除所有这些值，因为这些值不是硬编码的。

这是我的文本框和我的选择元素：

```
 <input type="text" name="text" id="text" style="position: absolute; top: 50px; left: 55px; width: 200px; height: 22px; right: 4px">

<select  id="inputSet1" multiple="multiple" Style="position: absolute; top: 93px; left: 55px; width: 200px; height: 200px; right: 4px; overflow-y: scroll">
    <option value="1">1</option> </select> 
```

谁能帮我让我的代码过滤我添加的值。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:22:37.490

看起来快速修复是在填充选项列表后调用 filterByText 。

```
<%
 ArrayList<String> allGenes= new ArrayList<String>();
   allGenes.addAll(tree.getAllGenes()); 

 %>

  <%
   for(int i=0; i<allGenes.size(); i++)
   { %>
   var gene=document.createElement('option');
   var str="<%=allGenes.get(i)%>";
   gene.text= str;
   try
    {
        document.getElementById("inputSet1").add(gene,null);
    }
     catch(ex){
              document.getElementById("inputSet1").add(gene);                             
     }
   <%}%>  
$('inputSet1').filterByText($('input')); 
```

从长远来看，我建议您研究 ajax。您最好传递数据（以 JSON 等格式）而不是编写生成 javascript 代码的 java 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:21:34.307

```
The JQuery code that filters the elements in the select list doesn't filter these values     that i add using java code. Instead, it deletes all of them because these values are not hard     coded. 
```

我假设“硬编码”是指这些值是由 javascript 动态添加的？我没有对此进行测试，但是如果在填充选择之前激活了 jQuery 插件，它可能无法正常运行。尝试确保在激活插件之前填充选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:22:46.147

不确定您是否希望查看 jQuery UI，但它提供了一个自动完成小部件，其行为与您尝试完成的操作非常相似。

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:25:46.800

在这个小提琴中一切正常：http: [//jsfiddle.net/peFDk/](http://jsfiddle.net/peFDk/)

我认为在 jQuery 工作时不能填充选择。

您发布的 jQuery 必须在

```
 $(document).ready() 
```

# php - 加载数据本地INFILE php mysql

> ID：13979689
> 
> 赞同：5
> 
> 时间：2012-12-20T20:08:56.470
> 
> 标签：php, mysql

我收到错误

```
#7890 - Can't find file 'C:UsersAdminDesktopBL postcodes.csv.zip'. 
```

这是脚本

```
LOAD DATA LOCAL INFILE 'C:\Users\Admin\Desktop\BL postcodes.csv.zip' 
IGNORE INTO TABLE uk_pc 
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n' 
(Postcode, Latitude, Longitude, Easting, Northing, GridRef, County, District, Ward, DistrictCode, WardCode, Country, CountyCode) 
```

我也尝试更改文件夹并更改权限，但同样的错误......（在本地主机服务器上工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:22:57.587

`'C:UsersAdminDesktopBL postcodes.csv.zip'`路径必须是错误的，因为它没有斜杠。尝试：INFILE`'C:\\Users\\Admin\\Desktop\\BL postcodes.csv.zip'`

并尝试解压文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-25T09:44:29.707

使用本地 infile，如下所示：

将数据本地 infile 'C:\Users\Admin\Desktop\' 加载到表用户中

# xml - XQuery：如何尝试列表是否包含给定的字符串？

> ID：13979691
> 
> 赞同：4
> 
> 时间：2012-12-20T20:09:05.730
> 
> 标签：xml, xquery, contains

我有 2 个 XML 文件：

文件1.xml

```
<data>doe90</data>
<data>foo</data>
<data>goo</data>
... 
```

文件2.xml

```
<data2>nan</data2>
<data2>goo</data2>
<data2>test</data2>
... 
```

我将这些数据存储在 2 个变量中：

```
let $data := //data,
$data2 := //data2 
```

并开始这样做：

```
for $d in $data2
return 
if() (: $d is also in $data ? :) 
```

我该怎么办 ？谢谢

编辑：当然我试过包含，但有一个错误：

```
if(contains($d,$data) = 0) 
```

> 查询执行期间发生异常：XPTY0004: cannot convert 'xs:boolean(true)' to xs:integer

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T20:40:59.290

这可能会有所帮助：

```
//data[. = //data2] ► returns elements whose string values are contained in data2 
//data = //data2    ► returns true there are any matches, false otherwise 
```

fn:contains() 在这里没有帮助，因为它是为匹配[子字符串](http://www.xqueryfunctions.com/xq/fn_contains.html)而构建的：

```
contains('abc', 'a') ► true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:17:52.120

包含仅适用于字符串。（尽管在您的示例中，它似乎将节点转换为字符串，但随后失败，因为它返回您无法与 0 比较的布尔值。）

你可以做

```
if (exists(index-of($data, $d))) 
```

和

```
$data2[exists(index-of($data, .))] 
```

可能比 for/if- 更快（但仍然是 n^2）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T16:29:04.917

这对我有用：

```
fn:exists($data[. =($data2/text())]) 
```

# java - 为什么不声明一个数组 final 使其在 Java 中不可变？

> ID：13979696
> 
> 赞同：15
> 
> 时间：2012-12-20T20:09:31.877
> 
> 标签：java, immutability, final

为什么不声明一个数组 final 使其在 Java 中不可变？声明最终的东西不意味着它不能改变吗？

从[与不可变数组相关的问题中，](https://stackoverflow.com/questions/3700971/immutable-array-in-java)很明显声明一个数组 final 并不能使其不可更改。

以下是可能的。

```
final int[] array = new int[] {0, 1, 2, 3};
array[0] = 42; 
```

我的问题是：那么在这里声明 final 的功能是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-20T20:10:44.573

`final`仅与它所标记的**参考**有关；Java中没有不可变数组这样的东西。当你说

```
private final int[] xs = new int[20]; 
```

你不能说

```
xs = new int[10]; 
```

稍后的。这就是**全部**内容`final`。更一般地说，确保一个对象是不可变的通常是一项艰巨的工作，并且充满了一系列微妙之处。语言本身并没有为此提供太多开箱即用的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T20:12:58.753

`final`意味着您不能更改*引用*- 即您不能将另一个数组分配给该字段。

“不可变”意味着您无法更改数组的*内容*`final`-对此没有影响。

*如您的代码所示，您可以为数组的一个元素*分配一个值，这不会更改对数组的*引用*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T20:10:52.200

在这里，您正在创建*对象引用* `final`，而不是原始对象。（数组也是特殊的 Java 对象。）创建一个引用`final`意味着一旦它被初始化就不能让它引用其他东西。当然，您可以更改由 final 变量引用的对象的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T19:09:26.660

> 声明一个数组

在 Java 中，我们声明*变量*，并创建*对象*（例如数组）。这些动作是独立的；我们可以在不创建对象的情况下声明一个变量，也可以在不声明变量的情况下创建一个对象。

不变性是对象的属性，而 final 是变量的属性。一个对象可以被多个变量引用。哪个变量应该控制数组对象的不变性？

```
int[] a = {1,2,3};
final int[] b = a;
a[0] = 10; // should this be legal? 
```

如果我们允许这样做，则假定的不可变值`b[0]`已更改。但是编译器如何防止这种情况发生呢？通过使无法将非最终引用分配给最终引用？那么我将如何初始化数组呢？我不能循环这样做......

并且：数组是不可变的甚至意味着什么？例如，以下是否应该编译？

```
final int[][] a = {{1,2}, {3,4}};
a[1][1] = 5; 
```

C++ 通过允许`const`为每个间接级别指定（或省略）来解决这个问题。在 Java 中，final 可以为每个变量指定（或省略）一次。是的，`final`是一个更简单`const`的，就像 Java 是一个更简单的 C++。让我们保持简单，好吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T20:11:31.200

这意味着不允许对象的新实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T20:15:50.560

就像每个人评论的那样，将其声明为 final 不会让您将另一个数组分配给您的变量。[在这里](http://javarevisited.blogspot.com/2011/12/final-variable-method-class-java.html)阅读更多

数组本身将保留与以前相同的属性。

# java - 添加额外类时找不到Android源

> ID：13979697
> 
> 赞同：0
> 
> 时间：2012-12-20T20:09:42.687
> 
> 标签：java, android, eclipse

我浏览了所有其他有此问题的帖子，但无济于事。

我创建了一个应用程序，当所有代码都包含在 MainActivity 中时，它可以完美运行，但是当我创建一个类来检查 GPS 并清理我的 MainActivity 源文件时，我在调试时收到一个错误，提示“源不是成立”。

就此而言，我是 android 和 java 的新手（我通常使用 c 和 c++），所以我不知道这是否与我的 manifest.xml 等有关，但这让我发疯了！

我在下面包含了我的代码以及我的 manifest.xml 文件。

当逐行浏览我的代码时，给我这个错误的行是`final LocationManager manager = (LocationManager) getSystemService(LOCATION_SERVICE);`

GpsCheck.java

```
package com.omegaapp.openomega;

import android.os.*;
import android.location.*;
import android.location.GpsStatus.Listener;
import android.app.*;
import android.content.*;
import com.omegaapp.*;

public class GpsCheck extends android.app.Activity{

    public GpsCheck(){
        final LocationManager manager =  (LocationManager) getSystemService(LOCATION_SERVICE);
        Listener gpsStatusListener = new Listener(){
            @Override
            public void onGpsStatusChanged(int arg0) {
                gpsEnable();

            }
        };
        manager.addGpsStatusListener(gpsStatusListener);
    }

    public boolean gpsEnable(){
        //checks weather the GPS is enabled. If not, prompts the user to enable it then checks again. Returns false if the user chooses not to enable the application.
        if(!checkGpsEnabled()){
            promptEnableGps();
        }
        return true;
    }

    private boolean checkGpsEnabled(){
        final LocationManager manager =  (LocationManager) getSystemService(LOCATION_SERVICE);
        if ( !manager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
            return false;
        }
        return true;
    }

    private boolean promptNoGpsQuit(){
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
        alertDialogBuilder.setMessage("Without enabling GPS this app can not function, Would you like to quit?");
        alertDialogBuilder.setCancelable(false);
        DialogInterface.OnClickListener onClick = new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                Intent callGPSSettingIntent = new Intent(
                android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(callGPSSettingIntent);
            }
        };
        alertDialogBuilder.setPositiveButton("Goto Settings Page To Enable GPS", onClick);

        DialogInterface.OnClickListener onClickCancel = new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                dialog.cancel();
                finish();
            }
        };
        alertDialogBuilder.setNegativeButton("Quit", onClickCancel);
        AlertDialog alert = alertDialogBuilder.create();
        alert.show();
        return true;
    }

    private boolean promptEnableGps(){
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
        alertDialogBuilder.setMessage("GPS is disabled in your device. Would you like to enable it?");
        alertDialogBuilder.setCancelable(false);
        DialogInterface.OnClickListener onClick = new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                Intent callGPSSettingIntent = new Intent(
                android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(callGPSSettingIntent);
            }
        };
        alertDialogBuilder.setPositiveButton("Goto Settings Page To Enable GPS", onClick);

        DialogInterface.OnClickListener onClickCancel = new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                dialog.cancel();
                promptNoGpsQuit();
            }
        };
        alertDialogBuilder.setNegativeButton("Cancel", onClickCancel);
        AlertDialog alert = alertDialogBuilder.create();
        alert.show();
        return true;
    }

} 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.omegaapp.openomega"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.omegaapp.openomega.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:enabled="true" android:name=".BootUpReceiver"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

        <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>
</application> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:12:41.577

这里

```
public class GpsCheck extends android.app.Activity{

    public GpsCheck(){

  }
      your code  .....
} 
```

这不是创建非 Activity 类来获取 Activity 的正确方法。您需要将活动上下文传递给非活动类以访问系统服务或其他活动或应用程序组件

通过将 Context 传递给 GpsCheck 构造函数，将 GpsCheck 更改为使其工作：

```
public class GpsCheck{
   Context context;
    LocationManager manager;

    public GpsCheck(Context context){
     this.context=context;

     this.manager =  (LocationManager)context.getSystemService(LOCATION_SERVICE);
     //your code here
    }
      your code  .....
} 
```

并从您的活动发送当前活动上下文为：

```
GpsCheck gpscheckobj=new GpsCheck(MainActivity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T12:06:24.003

在活动中：

```
final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );

    if ( !manager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
        buildAlertMessageNoGps();
    } 
```

在片段（非活动类）中：

```
Boolean isGPSEnabled = false;
        final LocationManager manager = (LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE );

        isGPSEnabled = manager.isProviderEnabled( LocationManager.GPS_PROVIDER ); 
```

# javascript - 使用 Kinetic.js 为矩形创建放置区域

> ID：13979699
> 
> 赞同：2
> 
> 时间：2012-12-20T20:09:44.790
> 
> 标签：javascript, html5-canvas, kineticjs

我正在创建一个“文字”游戏，目标是将一个字符（一个矩形）拖到正确的单词空间（另一个矩形）中，如果用户将一个字符放在错误的空间，该字符将返回到原点。

在拖动移动期间，我想检测对象是否在单词空间上以进行对比。如果用户放下它，请将字符插入正确的位置......

我如何检测用户是否将字符放在正确的位置？碰撞检测？是否有任何事件来检测一个对象是否在另一个对象之上？

我只需要引导线来检测它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:23:29.163

也许您想要的是`getIntersections()`方法（[docs](http://kineticjs.com/docs/symbols/Kinetic.Container.php#getIntersections)），它将返回特定点下方的形状。

您可以使用它来构建自己的碰撞检测，即调用`getIntersections()`字符矩形的每个角并查看您击中的形状。

# sql - SQL 2 where 子句

> ID：13979700
> 
> 赞同：2
> 
> 时间：2012-12-20T20:09:46.143
> 
> 标签：sql, where

我试图弄清楚如何完成我的查询。任何帮助将不胜感激！

这就是我目前使用的。

```
SELECT 
   co, queuedTime, startTime, completeTime, 
   DATEDIFF(MINUTE, queuedTime, completeTime) AS elapsedTime 
FROM 
   SJob
WHERE 
   jobClass = 'PayrollFinish' 
   AND DATEDIFF(DAY, queuedTime, GETDATE()) = 0
ORDER BY 
   queuedTime 
```

唯一的问题是我需要`queuedTime`where`job class = submitpayroll`和`completeTime`where`jobclass = payrollfinish`

我是 sql 新手，只是在摸索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:18:20.547

所以你的查询看起来像这样？

```
SELECT 
    co, 
    queuedTime, 
    startTime, 
    completeTime, 
    DATEDIFF(MINUTE, queuedTime, completeTime) AS elapsedTime 
FROM 
    SJob
WHERE 
    jobClass = 'PayrollFinish' AND 
    DATEDIFF(DAY,queuedTime,GETDATE())=0 
    and jobClass = 'submitpayroll' AND jobclass = 'payrollfinish'
ORDER BY 
    queuedTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:33:59.003

如果您只想要其中一个时间，那么这应该可以解决问题。

```
SELECT  co, 
        CASE time
            WHEN jobClass = 'SubmitPayroll' THEN queuedTime
            WHEN jobClass = 'PayrollFinish' AND DATEDIFF(DAY, queuedTime, GETDATE()) = 0 THEN completeTime
            ELSE 'N/A'
        END,
        startTime,
        DATEDIFF(MINUTE, queuedTime, completeTime) AS elapsedTime 
  FROM SJob
 ORDER BY queuedTime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:42:03.080

试一试，因为我假设您想要来自两个不同记录的数据。

```
SELECT 
    js.co, 
    js.queuedTime, 
    js.startTime, 
    je.completeTime, 
    DATEDIFF(MINUTE, js.queuedTime, je.completeTime) AS elapsedTime 
FROM 
    SJob js
    JOIN SJob je ON js.co = je.co -- Assuming this is the joining column
    JOIN (SELECT 
            CAST(CONVERT(VARCHAR(50), GETDATE(), 101) AS DATETIME) StartDate, 
            CAST(CONVERT(VARCHAR(50), GETDATE() + 1, 101) AS DATETIME) EndDate) AS date 
        ON ((js.queuedTime >= date.StartDate AND js.queuedTime < date.endDate) OR
            (je.queuedTime >= date.StartDate AND je.queuedTime < date.endDate))
WHERE 
    js.jobClass = 'SubmitPayroll' AND
    je.jobClass = 'PayrollFinish'
ORDER BY 
    js.queuedTime 
```

首先，由于它们似乎是两条单独的记录，因此您需要两次点击表（一次用于`SubmitPayroll`，另一次用于`PayrollFinish`记录。由于我不知道您的架构是什么样的，所以我试了一下哪个列连接他们起来。

其次，我不确定您是否希望在特定日期内开始或完成任何一项工作，因为`SubmitPayroll`和`PayrollFinish`记录不同。

第三，如果您想返回所有提交记录，无论它们是否具有匹配的 Finish 记录，只需将 转换`JOIN SJob je`为 a`LEFT OUTER JOIN`即可获得所需的内容（`ISNULL`尽管.`DATEDIFF``je.completeTime`

同样，这是在没有关于您的架构/数据的更多信息的情况下在黑暗中拍摄的，但希望这能让您更接近您的需求。

# capistrano - 为什么 Capistrano 在带有双反斜杠的路径上执行“查找”？

> ID：13979701
> 
> 赞同：1
> 
> 时间：2012-12-20T20:09:49.377
> 
> 标签：capistrano

当我`deploy`最近使用 Capistrano 运行时，我在过程中收到此错误：

```
 * executing "find /var/www/<myapp>/releases/20121220195214/public/images\\ /var/www/<myapp>/releases/20121220195214/public/stylesheets\\ /var/www/<myapp>/releases/20121220195214/public/javascripts -exec touch -t -- 201212201952.40 {} ';'; true"
    servers: ["50.56.126.187"]
    [50.56.126.187] executing command
*** [err :: 50.56.126.187] find:
*** [err :: 50.56.126.187] `/var/www/<myapp>/releases/20121220195214/public/images /var/www/<myapp>/releases/20121220195214/public/stylesheets /var/www/<myapp>/releases/20121220195214/public/javascripts'
*** [err :: 50.56.126.187] : No such file or directory
*** [err :: 50.56.126.187]
    command finished in 452ms 
```

为什么它试图找到以双反斜杠结尾的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:19:45.633

看起来它正在尝试将多个路径作为单个参数传递给查找。分隔路径列表的空格用反斜杠转义，并作为一个参数传递给 find。我怀疑每条路径都应该作为要查找的单独参数传入。我对 Capistrano 不熟悉，所以我无法准确指出是什么驱动了这个过程，以及为什么它试图将三个路径作为单个参数而不是三个单独的参数发送。

您看到的双反斜杠是 Ruby 的 String#inspect 方法如何工作的产物，如本[论坛帖子](https://groups.google.com/forum/?fromgroups#!topic/capistrano/D7SsEybO11s)中所述。

# delphi - 如何防止两个对齐底部控件颠倒顺序？

> ID：13979704
> 
> 赞同：5
> 
> 时间：2012-12-20T20:10:02.500
> 
> 标签：delphi, delphi-2007, vcl

我有一个包含三个主要组件的表单：

1.  设置为与客户端对齐的 FlowPanel
2.  第二个 FlowPanel 设置为对齐底部
3.  设置为对齐底部的状态栏。

一切开始看起来都很棒。但是与底部对齐的 FlowPanel 也设置为 AutoSize。它包含一个可以自行折叠的面板。内部面板包含用户可以决定隐藏的摘要信息。这会将 FlowPanel 的大小减小到非常小的大小，但并未完全消失。还有一个按钮，用户可以在其中重新展开摘要面板。

当面板重新展开导致 FlowPanel 增长时，问题就出现了。那时状态栏和 FlowPanel 的顺序是相反的。它们仍然设置为底部对齐，但现在状态栏位于我的 FlowPanel 上方。

我可以在没有折叠面板的测试应用程序中复制它，只需将按钮放在表单上即可查看底部流面板的高度。如果高度增加，顺序会改变。如果它减少，那么一切都保持相同的顺序。我的测试表格中唯一的代码是：

```
FlowPanel2.Height := FlowPanel2.Height * 2; 
```

我还测试了这个底部面板是一个普通的 TPanel，而不是一个具有相同结果的 FlowPanel。

关于为什么会发生这种情况以及如何防止它的任何想法？

![移动状态栏图像](../Images/134fcd3fdb7fafe70f0006f34ead1672.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T20:19:32.123

我有时也有这个。我的解决方案是将位于底部的控件的顶部设置为“足够大”的值-`OtherControl.Top + OtherControl.Height + 1`应该可以工作甚至是`MaxInt`IIRC。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T20:23:21.113

我的解决方案：

1.  在表单上放置一个状态栏并与底部对齐
2.  在表单上放置一个面板（Container_Panel）并与客户端对齐
3.  在 Container_Panel 上放置一个 FlowPanel 并与底部对齐
4.  在 Container_Panel 上放置一个 FlowPanel 并与 Client 对齐

现在你应该没有问题了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:20:31.440

如果你愿意花一些钱，我会推荐使用 DevExpress 的[ExreeLayoutControl](http://www.devexpress.com/Products/VCL/ExLayoutControl/)（或类似的东西）。对于简单和复杂的表格来说，它都是一个出色的工具，除了解决您遇到的问题等麻烦的怪癖之外，它还提供了许多其他好处。

# asp.net - 将对象传递给 Web 服务

> ID：13979710
> 
> 赞同：1
> 
> 时间：2012-12-20T20:10:48.457
> 
> 标签：asp.net

C# ASP.NET

嗨，如果您创建一个具有 8 个属性的对象，然后实例化该对象，您是否必须填充并使用所有属性才能将其传递给 Web 服务。

我有一个程序需要从用户那里收集报告参数，然后将它们存储在数据库表中，以便以后可以从服务中再次调用它们。我有 11 份报告，它们都使用不同的参数。所以我的问题是我是否可以创建一个具有 8 个属性的报表参数对象，并且只填充其中的 5 个，将一个报表的 3 个属性留空，然后说为另一个报表填充 4 个并将 4 个留空，或者我应该为每组创建一个对象吗？报告参数？一旦我有了那个对象，我可以将它传递给一个 Web 服务，该 Web 服务将参数数据保存到属性缺失的数据库中吗？

很高兴回答有关此的问题，因为我很感激它不是那么清楚！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:13:21.373

是的，这样做应该没问题。只要您控制 Web 服务的接口，听起来就像您做的那样。

如果您不控制接口，那么该接口的 WSDL 会告诉您是否可以控制。

只要您的参数相对通用，我会建议您描述的方法。为每种报告类型创建一个对象会变得很麻烦，如果参数是通用的，则没有必要。

# python - 堆排序：如何排序？

> ID：13979714
> 
> 赞同：13
> 
> 时间：2012-12-20T20:11:09.003
> 
> 标签：python, sorting, computer-science, heapsort

我正在尝试在 Python 中实现堆排序，但我似乎无法做到这一点。我试图实现这个[伪代码](http://en.wikipedia.org/wiki/Heapsort)，但我的代码没有排序！它只是筛选到荒谬的效果。我倾向于认为问题出在这一行：

> 将堆的根（最大值）与堆的最后一个元素交换

如何获得最大值？

这就是我所拥有的：

```
def my_heap_sort(sqc):                    
    def heapify(count):                
        start = (count-2)/2            
        while start >= 0:              
            sift_down(start, count-1)  
            start -= 1                 

    def swap(i, j):                    
        sqc[i], sqc[j] = sqc[j], sqc[i]

    def sift_down(start, end):         
        root = start                   

        while (root * 2 + 1) <= end:   
            child = root * 2 + 1       
            temp = root                
            if sqc[temp] < sqc[child]: 
                temp = child+1         
            if temp != root:           
                swap(root, temp)       
                root = temp            
            else:                      
                return                 

    count = len(sqc)                   
    heapify(count)                     

    end = count-1                      

    while end > 0:                     
        swap(end, 0)                   
        end -= 1                       
        sift_down(0, end) 
```

我发现了一个几乎相同问题的例子：

```
def heap_sort_example(a):                                 
    def heapify(a):                                       
        start = (len(a) - 2) / 2                          
        start -= 1                                        

    def sift_down(a, start, end):                         
        root = start                                      
        while root * 2 + 1 <= end:                        
            child = root * 2 + 1                          
            if child + 1 <= end and a[child] < a[child+1]:
                child += 1                                
            if child <= end and a[root] < a[child]:       
                a[root], a[child] = a[child], a[root]     
                root = child                              
            else:                                         
                return                                    

    heapify(a)                                            
    end = len(a) - 1                                      
    while end > 0:                                        
        a[end], a[0] = a[0], a[end]                       
        sift_down(a, 0, end-1)                            
        end -= 1 
```

结果不同，但两者都很荒谬：

```
>>> my_heap_sort(sqc)
[2, 7, 1, -2, 56, 5, 3]

>>> heap_sort_example(sqc)
[-2, 1, 7, 2, 56, 5, 3] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T20:37:40.543

**如何获得最大值？**你不需要“得到”它。根恰好是最大值，这是堆的定义属性。

如果你觉得很难理解堆排序，[本章](http://books.google.com.hk/books?id=NLngYyWFl_YC&pg=PA127&dq=introduction%20to%20algorithm%20heap%20sort&hl=zh-CN&sa=X&ei=HnnTULG2Ga6QiAfhyoEQ&ved=0CDYQ6AEwAA#v=onepage&q=introduction%20to%20algorithm%20heap%20sort&f=false)将非常有帮助。

* * *

我重写了你的代码：

```
def swap(i, j):                    
    sqc[i], sqc[j] = sqc[j], sqc[i] 

def heapify(end,i):   
    l=2 * i + 1  
    r=2 * (i + 1)   
    max=i   
    if l < end and sqc[i] < sqc[l]:   
        max = l   
    if r < end and sqc[max] < sqc[r]:   
        max = r   
    if max != i:   
        swap(i, max)   
        heapify(end, max)   

def heap_sort():     
    end = len(sqc)   
    start = end // 2 - 1 # use // instead of /
    for i in range(start, -1, -1):   
        heapify(end, i)   
    for i in range(end-1, 0, -1):   
        swap(i, 0)   
        heapify(i, 0)   

sqc = [2, 7, 1, -2, 56, 5, 3]
heap_sort()
print(sqc) 
```

它给：

```
[-2, 1, 2, 3, 5, 7, 56] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-05T10:05:58.727

如果您有推送和弹出，或者正在使用内置的 heapq 库，请尝试记录的解决方案：

```
from heapq import heappush, heappop
def heapsort(iterable):
    h = []
    for value in iterable:
        heappush(h, value)
    return [heappop(h) for i in range(len(h))]

heapsort([1, 3, 5, 7, 9, 2, 4, 6, 8, 0])
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T05:36:21.620

我发现heapify的不同实现，堆排序的“心脏”在internetz上并不清楚。这是我通过添加一个简单但清晰的“heapify”示例来帮助社区的谦虚尝试。我使用向量来避免数组操作的额外混乱。

此方法将数组的 1 个单元格堆积起来。要堆积整个数组，您需要一个循环，从数组中间运行它，然后移动到开头。返回的向量必须与我们在下一次迭代中发送的相同，否则会一团糟。例如：

```
for (int i = myvector.size()/2; i >= 0; i--) { in = Heapify(in, i);}

vector_of_int Sort::Heapify(vector_of_int in_vector, int in_index)
{

int min_index = in_index; // Track index of smallest out of parent and two children.
int left_child_index = 0; 
int right_child_index = 0;
int vector_size = in_vector.size(); 

left_child_index = LeftChildIndex(in_index);// index of left child, at position 2*in_index
right_child_index = left_child_index + 1;// index of right child, at position 2*in_index + 1

// If left_child_index is not overflowing, suggest swap...
if ((left_child_index) < vector_size) 
{
    // If parent larger than left child, min_index remembers left child position
    if (in_vector[min_index] > in_vector[left_child_index]) 
    { min_index = left_child_index; }
}

// If right_child_index is is not overflowing, suggest swap...
if (right_child_index < vector_size) 
{
    // If parent larger than right child, min_index remembers right child position
    if (in_vector[min_index] > in_vector[right_child_index]) 
    { min_index = right_child_index; }
}

// Now min_index has the index of the smallest out of parent and it's two children.
// If the smallest is not the parent, swap parent and smallest.
if (min_index != in_index) 
{
    in_vector = swap(in_vector, in_index ,min_index);
    in_vector = Heapify(in_vector, min_index); // RECURSION IS HERE
}

return in_vector;
}
// End heapify 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T13:16:40.197

我找到了它，几乎想通了它是如何工作的：

```
def heapsort(sqc):                                 
    def down_heap(sqc, k, n):                            
        parent = sqc[k]                                  

        while 2*k+1 < n:                                 
            child = 2*k+1                                
            if child+1 < n and sqc[child] < sqc[child+1]:
                child += 1                               
            if parent >= sqc[child]:                     
                break                                    
            sqc[k] = sqc[child]                          
            k = child                                    
        sqc[k] = parent                                  

    size = len(sqc)                                      

    for i in range(size/2-1, -1, -1):                    
        down_heap(sqc, i, size)                          

    for i in range(size-1, 0, -1):                       
        sqc[0], sqc[i] = sqc[i], sqc[0]                  
        down_heap(sqc, 0, i) 
```

# 编辑：

这个实现是根据我自己对算法的理解写的。它更长，但对我来说，这个算法在这个实现中更加清晰。当您需要了解算法时，长命名会有所帮助，因此我保留了所有长名称。

```
def heapsort(sequence):                                                      
    sequence_length = len(sequence)                                          

    def swap_if_greater(parent_index, child_index):                          
        if sequence[parent_index] < sequence[child_index]:                   
            sequence[parent_index], sequence[child_index] =\                 
                    sequence[child_index], sequence[parent_index]            

    def sift(parent_index, unsorted_length):                                 
        index_of_greater = lambda a, b: a if sequence[a] > sequence[b] else b
        while parent_index*2+2 < unsorted_length:                            
            left_child_index = parent_index*2+1                              
            right_child_index = parent_index*2+2                             

            greater_child_index = index_of_greater(left_child_index,         
                    right_child_index)                                       

            swap_if_greater(parent_index, greater_child_index)               

            parent_index = greater_child_index                               

    def heapify():                                                           
        for i in range((sequence_length/2)-1, -1, -1):                       
            sift(i, sequence_length)                                         

    def sort():                                                              
        count = sequence_length                                              
        while count > 0:                                                     
            count -= 1                                                       
        swap_if_greater(count, 0)                                        
        sift(0, count)                                                   

    heapify()                                                                
    sort() 
```

# 编辑：

和优化版本：

```
def opt_heapsort(s):                               
    sl = len(s)                                    

    def swap(pi, ci):                              
        if s[pi] < s[ci]:                          
            s[pi], s[ci] = s[ci], s[pi]            

    def sift(pi, unsorted):                        
        i_gt = lambda a, b: a if s[a] > s[b] else b
        while pi*2+2 < unsorted:                   
            gtci = i_gt(pi*2+1, pi*2+2)            
            swap(pi, gtci)                         
            pi = gtci                              
    # heapify                                      
    for i in range((sl/2)-1, -1, -1):              
        sift(i, sl)                                
    # sort                                         
    for i in range(sl-1, 0, -1):                   
        swap(i, 0)                                 
        sift(0, i) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T20:22:59.270

选择排序是一种相对简单的排序算法：遍历一个数组，提取前 n 个元素的最小值，然后提取接下来的 n-1 个元素的最小值......现在这将是 O(n^2) 算法.

由于您总是提取最小值，因此您应该考虑使用最小堆。它在 O(log n) 时间内提取一分钟。提取 min n 次会导致 O(n*log n) 时间。

所以对于堆排序，只需要构建一个堆（heapify O(n)）并遍历数组并提取 min n 次。

您可以使用 python[堆](http://docs.python.org/2/library/heapq.html)来构建堆或构建自己的堆。

```
def heapsort(l):
    hp = make_heap(l)
    for i in range(len(l)):
       yield hp.extract_min() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-13T22:41:05.267

堆排序示例以及如何最初构建堆的示例

```
def findMin(heapArr,i,firstChildLoc,secondChildLoc):
        a = heapArr[i]
        b = heapArr[firstChildLoc]
        c = heapArr[secondChildLoc]
        return i if ((a < b) and (a < c)) else firstChildLoc if (b < c) else secondChildLoc

def prelocateUp(heapArr):
    l = len(heapArr)
    i = l-1
    while True:
        parentLoc = (i+1)/2 - 1 
        if parentLoc >= 0:
            if heapArr[parentLoc] > heapArr[i]:
                temp = heapArr[parentLoc]
                heapArr[parentLoc] = heapArr[i]
                heapArr[i] = temp  
        else :
            break
        i = parentLoc
    return heapArr

def prelocateDown(heapArr):

    l = len(heapArr)
    i = 0

    while True:
        firstChildLoc = 2*(i+1) - 1
        secondChildLoc = 2*(i+1)
        if (firstChildLoc > l-1):
            break

        elif (secondChildLoc > l-1):
            if heapArr[i] > heapArr[firstChildLoc]:
                temp = heapArr[i]
                heapArr[i] = heapArr[firstChildLoc]
                heapArr[firstChildLoc] = temp
            break

        else :
            minLoc = findMin(heapArr,i,firstChildLoc,secondChildLoc)
            if minLoc !=i:
                temp = heapArr[i]
                heapArr[i] = heapArr[minLoc]
                heapArr[minLoc] = temp
                i = minLoc
            else :
                break
    return heapArr

def heapify(heapArr,op):
    if op==1:
        heapArr = prelocateUp(heapArr)
    else :
        heapArr = prelocateDown(heapArr)
    return heapArr

def insertHeap(heapArr,num):
    heapArr.append(num)
    heapArr = heapify(heapArr,1)
    return heapArr

def getMin(heapArr):
    ele = heapArr[0]
    heapArr[0] = heapArr[-1]
    heapArr.pop(-1)
    heapArr = heapify(heapArr,2)
    return ele,heapArr

a=[5,4,8,2,6]
heapArr = []
for i in xrange(0,len(a)):
    heapArr = insertHeap(heapArr,a[i])

#No 
sortedArr = []
for i in xrange(0,len(a)):
    [ele,heapArr] = getMin(heapArr)
    sortedArr.append(ele)
print sortedArr 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-25T21:03:07.377

```
**Heap Sorting on any given Number,Below Program will first convert it into binary heap tree and then its performing heap sorting**

class HeapSort():
    def __init__(self):
        self.hst_list=[None]
        self.final_list=[]

    def add_element(self,value):
        self.hst_list.append(value)

    def build_hst(self):
        for _ in range((len(self.hst_list)//2)):
            self.convert_into_hst()

    def get_left_child(self,idx):
        for m in range(len(self.hst_list)):
            if m==2*idx:
                return self.hst_list[2*idx]
        return 999

    def get_right_child(self,idx):
        for m in range(len(self.hst_list)):
            if m==2*idx+1:
                return self.hst_list[2*idx+1]
        return 999

    def convert_into_hst(self):
        i=1
        while i<=len(self.hst_list)//2: 
            left_child=self.get_left_child(i)
            right_child=self.get_right_child(i) 
            if self.hst_list[i]>=left_child:
                p_val=self.hst_list[i]
                self.hst_list[i]=left_child
                self.hst_list[2*i]=p_val
                #print(self.hst_list)
            elif self.hst_list[i]>=right_child:
                p_val=self.hst_list[i]
                self.hst_list[i]=right_child
                self.hst_list[2*i+1]=p_val
            i=i+1

    def print_hst(self):
        print(self.hst_list)
        print(self.final_list)

    def perform_sorting(self):
        for i in range(1,len(self.hst_list)):
            self.perform_heap_sorting()

    def perform_heap_sorting(self):
        self.final_list.append(self.hst_list[1])
        self.hst_list.pop(1)
        self.build_hst()
        print(self.final_list)

hst_obj=HeapSort()
hst_obj.add_element(10)
hst_obj.add_element(5)
hst_obj.add_element(5)
hst_obj.add_element(30)
hst_obj.add_element(15)
hst_obj.add_element(50)
hst_obj.add_element(25)
hst_obj.add_element(35)
hst_obj.add_element(1)
hst_obj.add_element(100)
hst_obj.build_hst()
hst_obj.perform_sorting() 
```

# ruby-on-rails - 为什么使用 filepicker_image_tag 时 Firefox 和 Mozilla 的缩略图大小不同

> ID：13979722
> 
> 赞同：0
> 
> 时间：2012-12-20T20:11:52.277
> 
> 标签：ruby-on-rails, filepicker.io

我的视图文件中有以下代码：

```
 <%= filepicker_image_tag tool.img_url, w: 160, h: 160, fit: 'clip'%> 
```

使用 Mozilla Firefox 时，缩略图会正确显示。使用 Safari 时，缩略图显示得非常小。任何想法为什么？

# java - 无法实例化设置片段

> ID：13979723
> 
> 赞同：3
> 
> 时间：2012-12-20T20:11:56.210
> 
> 标签：java, android, instantiation, rom

我正在尝试在 Android 设置应用程序中添加一个片段来自定义我正在处理的 ROM。这是我根据logcat强制关闭时遇到的错误。

```
E/AndroidRuntime(31496): FATAL EXCEPTION: main
E/AndroidRuntime(31496): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.settings/com.android.settings.SubSettings}: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.android.settings.pcf.RomSettings: make sure class name exists, is public, and has an empty constructor that is public
E/AndroidRuntime(31496):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2306)
E/AndroidRuntime(31496):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2356)
E/AndroidRuntime(31496):    at android.app.ActivityThread.access$600(ActivityThread.java:150)
E/AndroidRuntime(31496):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
E/AndroidRuntime(31496):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(31496):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(31496):    at android.app.ActivityThread.main(ActivityThread.java:5193)
E/AndroidRuntime(31496):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(31496):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(31496):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
E/AndroidRuntime(31496):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
E/AndroidRuntime(31496):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(31496): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.android.settings.pcf.RomSettings: make sure class name exists, is public, and has an empty constructor that is public
E/AndroidRuntime(31496):    at android.app.Fragment.instantiate(Fragment.java:592)
E/AndroidRuntime(31496):    at android.preference.PreferenceActivity.switchToHeaderInner(PreferenceActivity.java:1138)
E/AndroidRuntime(31496):    at android.preference.PreferenceActivity.switchToHeader(PreferenceActivity.java:1154)
E/AndroidRuntime(31496):    at android.preference.PreferenceActivity.onCreate(PreferenceActivity.java:539)
E/AndroidRuntime(31496):    at com.android.settings.Settings.onCreate(Settings.java:152)
E/AndroidRuntime(31496):    at android.app.Activity.performCreate(Activity.java:5104)
E/AndroidRuntime(31496):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/AndroidRuntime(31496):    at E/AndroidRuntime(31496):     ... 11 more
E/AndroidRuntime(31496): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.android.settings.pcf.RomSettings" on path: /system/app/Settings.apk
E/AndroidRuntime(31496):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
E/AndroidRuntime(31496):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(31496):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(31496):    at android.app.Fragment.instantiate(Fragment.java:582)
E/AndroidRuntime(31496):    ... 18 more 
```

课程是公开的，一切都是如此。我确定这个名字是对的。这是我的 Github 的链接，其中包含该文件：[https ://github.com/konstantinkeller/android_packages_apps_Settings/blob/jb4.2.1/src/com/android/settings/pcf/RomSettings.java](https://github.com/konstantinkeller/android_packages_apps_Settings/blob/jb4.2.1/src/com/android/settings/pcf/RomSettings.java)

这就是整个包裹。您还可以检查 XML 和所有内容。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:38:00.727

我猜错误消息是正确的，您的课程不在 apk 中。尝试将您的文件/包添加到[proguard.flags](https://github.com/konstantinkeller/android_packages_apps_Settings/blob/jb4.2.1/proguard.flags)文件中。

[如果您的代码中没有引用该文件， Proguard](http://proguard.sourceforge.net/)可能会删除该文件，而只是作为 xml 文件中的文本。

> ProGuard 是一个免费的 Java 类文件收缩器、优化器、混淆器和预验证器。**它检测并删除未使用的类**、字段、方法和属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-19T04:47:21.847

添加到 kapep 的答案中，您应该知道一些前沿的 Android 功能有时会从 XML 文件引用中生成错误的 java 引用，例如 R.java 中的 ID 和 gen/ 中的其他源。

当我使用 xml/headers.xml 来连接我的 PreferenceActivity 和自定义 PreferenceFragments 时，我遇到了这种情况，其中“ **android:fragment** ”引用了后面的那些（整个项目中的唯一引用）。Proguard 只是将它们排除在外，因为没有正确创建 gen/*.java 引用。Android 构建工具基本上使用 Eclipse 构建后保留的文件，这些似乎不包括“android:fragment”引用，因此在运行时检测到自定义类永远不会被操作系统使用，proguard 只是删除它们。**我相信 ADT 错误可能是导致这种不良参考生成的罪魁祸首。**

长话短说——只要你想调试这个问题的根本原因，就在 proguard 配置上使用“-keep packagename.** { *; }”。如果它得到解决，您可以尝试更新 ADT，清理项目以重新触发 gen/ 创建，并在没有 -keep 的情况下打包。如果仍然失败，只需离开 -keep 指令，不要再考虑它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:15:29.480

您需要为您的课程使用不同的路径。com.android.settings 是 android 系统的一部分。使用您拥有的域。

# python - 如何以毫秒为单位计算时间之间的差异

> ID：13979724
> 
> 赞同：-4
> 
> 时间：2012-12-20T20:11:56.270
> 
> 标签：python

我需要做的是：

1.  在第 1 点检查时间

2.  在第二点检查时间

3.  计算时间差是否小于我的超时时间（0.5 秒）

试过这个：

```
>>> from time import time
>>> a=time
>>> b=time
>>> a-b
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for -: 'builtin_function_or_method' and   builtin_function_or_method' 
```

但我得到一个错误。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:13:59.013

这实际上很容易做到：

```
from time import time

time_1 = time()
# do something
time_2 = time()
if time_2 - time_1 < .5:
    #do something 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:14:10.600

使用`time`模块：

```
In [59]: import time

In [56]: s=time.time()

In [57]: t=time.time()

In [58]: t-s
Out[58]: 4.34810996055603 
```

帮助`time()`：

> time() -> 浮点数
> 
> 返回自 Epoch 以来的当前时间（以秒为单位）。如果系统时钟提供它们，则可能存在几分之一秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T20:13:58.127

```
from datetime import datetime
first = datetime.now()
second = datetime.now()
result = first.microsecond-second.microsecond
if result > .5:
     #do whatever 
```

# android - android：如何计算时间跨度

> ID：13979728
> 
> 赞同：2
> 
> 时间：2012-12-20T20:12:09.407
> 
> 标签：android, datetime

我想在 android 中计算两次的差异：例如 Date now 和 1356033600000 ->timestamp from location.getTime() 之间的差异

= 2 分钟前

我只需要几分钟！我该怎么做？

我通过 json 获得客户端时间。客户时间 = 1356033600000

```
String clienttime = e.getString("clienttime");
long mTime = (System.currentTimeMillis() - Long.valueOf(clienttime).longValue()) / (60 * 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:23:44.897

(System.currentTimeMillis() - location.getTime()) / (60 * 1000)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:22:56.163

在 Android / Java 中，时间通常以毫秒为单位计算，您可以使用现有的常量来帮助您执行这个简单的检查：

```
//                                  now            minus           two minutes
if(location.getTime() > System.currentTimeInMillis() - 2 * DateUtils.MINUTE_IN_MILLIS) {
    // The location is less than two minutes old 
} 
else {
    // The location is possibly stale
} 
```

这是您使用时的常见检查`LocationManager#getLastKnownLocation()`，只需确保`location`在调用之前不为空即可`location.getTime()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:14:51.593

这是我在自己的应用程序中使用的代码片段：

```
 String oldDate = xmlResults[3]; //insert old dateTime in the following format: yyyy-MM-dd HH:mm:ss
                    int myValue = 15; //Check if difference is between 15 hours

                    // Date Time Format
                    SimpleDateFormat formatter = new SimpleDateFormat(
                            "yyyy-MM-dd HH:mm:ss");

                    // Convert Date to Calendar
                    Date xmlDate = formatter.parse(oldDate);
                    Calendar cal = Calendar.getInstance();
                    cal.setTime(xmlDate);

                    Calendar today = Calendar.getInstance();

                    // Check difference
                    long diff = today.getTimeInMillis() - cal.getTimeInMillis();

                    long hours = diff / 3600000; // 1000ms * 60sec * 60hours ->
                                                    // total hours

                    if (hours < myValue && hours >= 0) {
                        // Login is successful, return true
                        return true;
                    } else {
                        return false;
                    } 
```

您可以轻松更改代码以比较分钟数。

# ember.js - Ember 视图模板作为计算属性

> ID：13979729
> 
> 赞同：1
> 
> 时间：2012-12-20T20:12:13.327
> 
> 标签：ember.js

当 Ember 视图是计算属性时，我在更新模板属性时遇到问题。

当视图第一次加载并作为属性返回时，Ember 会正确编译模板，但是当以后更改依赖项时，模板计算的属性不会更新。

这是 JSFiddle 的示例：http: [//jsfiddle.net/VkJC3/](http://jsfiddle.net/VkJC3/)

```
App=Em.Application.create();

App.MyView = Em.View.extend({
    toggle: true
    ,template: function(){
        if (this.get('toggle')) {
            return Em.Handlebars.compile('toggle is true')
        } else {
            return Em.Handlebars.compile('toggle is false')
        }
     }.property('toggle')
});

theView= App.MyView.create();
theView.append('body');

Ember.run.later(function() {
    console.log('later');
    theView.set('toggle',false);
}, 2000);
​ 
```

任何其他关于如何实现这一点的建议表示赞赏。也许最好只将 if 助手放入一个车把模板中。

**编辑：**

这是一个更完整的示例，显示将包含上述 Ember.View 的 Ember.CollectionView：http: [//jsfiddle.net/VkJC3/6/](http://jsfiddle.net/VkJC3/6/)

在 Ember.run.later 之后，第一项应该从类型 1 更改为类型 2，并更新计算的模板属性。

```
App=Em.Application.create();

App.MyView = Em.CollectionView.extend({
    content: [
        Em.Object.create({type: 1, data:"Maybe item type 1 is a link"})
        ,Em.Object.create({type: 2, data:"And item type 2 is a header"})]

    ,itemViewClass: Em.View.extend({
        template: function(){
            if (this.get('content.type')==1) {
                return Em.Handlebars.compile('<a href="#">{{view.content.data}}</a>')
            } else if (this.get('content.type')==2) {
                return Em.Handlebars.compile('<h1>{{view.content.data}}</h1>')
            }
         }.property('content.type')
    })
});

theView= App.MyView.create();
theView.append('body');

Ember.run.later(function() {
    console.log('later');
    theView.get('content')[0].set('type',2);
}, 2000);
    ​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:35:01.353

这不是您应该设置模板的方式。模板不应返回已编译的模板，而应充当已编译的模板。在您的代码中，您尝试将模板本身设置为计算属性，并且您正在有条件地编译两个可能的模板。恕我直言，您应该编译一个绑定到计算属性的模板，该属性根据您的切换属性评估文本，如下所示：

```
App = Em.Application.create();

App.MyView = Em.View.extend({
    template: Em.Handlebars.compile('toggle is {{toggleState}}'),
    toggle: true,
    toggleState: function(){
        if (this.get('toggle')) {
            return 'set to \'true\'';
        } else {
            return 'set to \'false\'';
        }
     }.property('toggle')
});

theView = App.MyView.create();
theView.append('body');

Ember.run.later(function() {
    console.log('later');
    theView.set('toggle',false);
}, 2000); 
```

[在这里](http://jsfiddle.net/VkJC3/4/)看小提琴

这只会更改需要更改的内容，因此您不必重新编译模板。

**编辑**：

我对小提琴做了一些修改（你可以[**在这里**](http://jsfiddle.net/VkJC3/23/)看到）。

我在做什么，而不是`template`直接分配属性，而是在创建应用程序之前将模板编译为`Ember.TEMPLATES`集合（我假设您无论如何都会在 prod 中执行类似的操作），并且我正在将您的计算属性更改为根据条件（在您的情况下`content.type`）返回要使用的模板的名称，并且我正在绑定该`templateName`计算属性的属性。模板更改后，您*必须*查看`rerender`自己的视图。代码可以改进，但我将在此处粘贴以演示解决方案：

```
(function() {

    Em.TEMPLATES["one"] = Em.Handlebars.compile('<a href="#">{{view.content.data}}</a>');
    Em.TEMPLATES["two"] = Em.Handlebars.compile('<h1>{{view.content.data}}</h1>');

})();

App = Em.Application.create();

App.MyView = Em.CollectionView.extend({
    content: [
        Em.Object.create({type: 1, data:"Item type 1 is a link"}),
        Em.Object.create({type: 2, data:"Item type 2 is a header"})
    ],
    itemViewClass: Em.View.extend({
        templateNameBinding: 'currentTypeName',
        currentTypeName: function() {
            if (this.get('content.type') == 1) {
                return "one";
            } else if (this.get('content.type') == 2) {
                return "two";
            }
        }.property('content.type'),
        templateNameObserver: function() {
            this.rerender();
        }.observes('templateName')
    })
});
// ... rest of the code... 
```

就像我说的，这段代码可以改进......希望这会有所帮助

# java - Richfaces 3 动态列数据表

> ID：13979731
> 
> 赞同：3
> 
> 时间：2012-12-20T20:12:24.733
> 
> 标签：java, jsf, richfaces, jsf-1.2

我正在尝试创建一个页面，您可以在其中单击一个按钮并使用动态列数填充richfaces数据表（最终这将是一个查找，但现在我只是想获得一个按钮来填充硬编码数据） ;

问题是我第一次单击按钮时，页面按预期刷新并出现数据表，但没有列或数据。如果我再次单击该按钮，一切都会正常显示。

谁能告诉我我做错了什么，我需要点击两次按钮？

```
 <a4j:form id="searchForm" style="height: 100%;" ajaxSubmit="false">
    ...
        <h:commandButton value="Search" action="#{tableBacking.search}" />
    ...
        <rich:scrollableDataTable id="resultsTable" value="#{tableBacking.results}" var="results" 
              rows="500" >
           <rich:column>
                <f:facet name="header">
                    <h:outputText value="Row" />
                </f:facet>

                <h:outputText value="#{row}" />
            </rich:column>

            <rich:columns value="#{tableResultsBacking.columns == null ? '' : tableResultsBacking.columns}" var="columns" index="ind" id="column#{ind}" sortBy="#{columns.header}" >
                <f:facet name="header">
                    <h:outputText value="#{columns.header}" />
                </f:facet>

                <h:outputText value="#{results[ind].data}" />
            </rich:columns>

         </rich:scrollableDataTable>
    </a4j:form> 
```

后备豆

```
public class TableLookupBacking {

    private List<SelectItem> allTables = null;
    private List<List<Column>> results = null;

    public TableLookupBacking() throws Exception {}

    public List<SelectItem> getAllTables() {

        if(allTables == null) {
            allTables = new ArrayList<SelectItem>();
            DataDao dd = new DataDao();
            try {
                allTables = dd.getTableNames();
            } catch (Exception e) {
                // TODO Add error message here
                e.printStackTrace();
            }
        }

        return allTables;
    }

    public void search() {

        DataDao dd = new DataDao();
        try {
            results = dd.getData();
        } catch (Exception e) {
            // TODO Add error message here
            e.printStackTrace();
        }
        columns = new ArrayList<Column>();

        for (List<Column> row : results) {
            for (Column c : row) {
                if(columns.size() < row.size()) {
                    columns.add(new Column(c.getHeader()));
                }
            }
        }

        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("columns", columns);
    }
// getters and setters
} 
```

这是一个请求范围的 bean，以便在构造函数中生成列。

```
public class TableResultsBacking {

    private List<TableData> columns = null;

    public TableResultsBacking() throws IOException {
        if(null != FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("columns")) {
            columns = (List<TableData>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("columns");
        } 
    }

    public List<TableData> getColumns() throws Exception {
        return columns;
    }
    public void setColumns(ArrayList<TableData> columns) {
        this.columns = columns;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:21:42.850

似乎在前 2 次点击后页面实际上并没有正确加载。每次搜索都需要点击 2 次。显然，在前 2 次点击之后，数据将在下一次点击时正确显示，但它只会显示之前搜索的列数。

我最终添加了一个方法，当在下拉列表中选择一个值时，我查询数据库并获取列数并设置列。这样当页面刷新时，列已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:38:11.077

您说这`TableResultsBacking`是**请求**范围的 bean，但您将它放在**session**中，这意味着它是 session 范围的。这就是为什么你第一次看不到任何东西的原因。在第二个请求中，您查看第一个请求的列，因为列保留在会话中。尝试将属性添加`immediate="true"`到命令按钮。

# java - Tomcat 6 的 JDBC 池

> ID：13979732
> 
> 赞同：0
> 
> 时间：2012-12-20T20:12:25.740
> 
> 标签：java, tomcat, jdbc, tomcat6, tomcat7

> **可能重复：**
> [ClassCastException DataSource 无法转换为 javax.sql.ConnectionPoolDataSource](https://stackoverflow.com/questions/13983403/classcastexception-datasource-cannot-be-cast-to-javax-sql-connectionpooldatasour)

**如何使 tomcat-jdbc.jar 与 Tomcat 6 一起工作？**

我们有一个旨在部署在 Tomcat 6 中的应用程序，但是由于我们所做的修复，我们需要放置 JDBC 池代码，我相信它只适用于 Tomcat 7？由于 Tomcat 6 已经在我们的生产服务器中，我可能需要让 JDBC 池与 Tomcat 6 一起工作？

*我正在为我们的应用程序进行本地开发并使用Tomcat7进行调试，我忘记了我们在生产中使用Tomcat6**

更新：

当我在 tomcat 6 中运行时，我得到了这个异常：

```
java.lang.ClassCastException: org.apache.tomcat.jdbc.pool.DataSource cannot be cast to javax.sql.ConnectionPoolDataSource 
```

当它在Tomcat7中没有问题时......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:39:59.213

这相当容易，我在 Tomcat 6 上运行 Tomcat JDBC 一年多了。像配置普通配置一样配置它，`DataSource`但将 JAR 放在 Tomcat 的`lib`目录中，并将[`factory`](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)带有值的属性添加`org.apache.tomcat.jdbc.pool.DataSourceFactory`到您的`Resource`元素中。

题外话：只是一个提示，*始终*使用与生产环境相同的 Tomcat 版本进行测试。

# javascript - 使用 document.getElementById 在外部 JavaScript 文件中进行表单验证

> ID：13979739
> 
> 赞同：0
> 
> 时间：2012-12-20T20:12:46.257
> 
> 标签：javascript, asp.net

我的 document.getElementById 函数在我知道存在的值上返回 null。具体来说，我尝试：

```
//in an external .js file
var UserName = document.getElementById('<%=_username.ClientID%>'); 
```

并使用一些条件对其进行测试，由于元素 id 值为 null，因此这些条件永远不会发生。我在这里在用户控制文件中定义 _username：

```
...
<fieldset class="login"> 
    <legend class="login">Login</legend>
    <label for="<%=_username.ClientID%>">
        User Name:</label>
    <asp:TextBox ID="_username" runat="server" CssClass="login" />
    <label for="<%=_password.ClientID%>">
        Password:</label>
    <asp:TextBox ID="_password" runat="server" CssClass="login" TextMode="Password" />
    <br />
    <span class="response">
        <asp:Literal ID="_response" runat="server" /></span>        
    <asp:Button ID="_login" runat="server" Text="Login"/>
</fieldset> 
```

我通过测试一个不需要使用 getElementById() 的更简单的函数来验证我的页面正在监听 javascript 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:13:53.730

假设您所说的其余部分是正确的，那么问题很可能是

```
var UserName = document.getElementById('<%=_username.ClientID%>'); 
```

在 dom 准备好之前运行。尝试将此脚本移动到您的`body`部分的最后，以确保圆顶在运行之前准备好。

IE

```
 <script type='text/javascript'>
        // rest of script
        var UserName = document.getElementById('<%=_username.ClientID%>');
        // rest of script
    </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:18:54.930

您的标题显示“外部 javascript 文件”。如果这是在外部 javascript 文件中：

```
var UserName = document.getElementById('<%=_username.ClientID%>'); 
```

这不起作用，因为`<%= %>`符号在 JS 文件中不起作用，只有 ASPX 或 ASCX。

# c++ - 将多维数组从 C 返回到 Lua

> ID：13979741
> 
> 赞同：2
> 
> 时间：2012-12-20T20:12:55.247
> 
> 标签：c++, lua

我的问题与此类似： [How to create nested Lua tables using the C API](https://stackoverflow.com/questions/1630169/how-to-create-nested-lua-tables-using-the-c-api)

我以为我理解了这个答案，但我仍然有问题。

我有一组要返回的对象。

```
 const char * pushlist[] = {
              "status", "cmdsequence", "timestamp", "gain",
        };
        int nItems = sizeof(pushlist) / sizeof(char *);
        int iDepth = -(1 + nItems);

        // //
        // What we want to do is essentially push an array of tables.
        // The tables have keys (see pushlist above) and values.
        // The array is indexed by integers from 1 through N.
        //
        lua_newtable( L );
        for( Json::Value::UInt i = 0; i != totFrames; i++ )
        {
            lua_pushnumber( L, i + 1 );  // push the array index
            lua_newtable( L );

            Json::Value frame = params["frameinfo"][i];

            // now push the table which will be at array index (i + 1)
            for( int n = 0; n < nItems; n++ )
            {
                lua_pushstring( L, pushlist[n] );                 // push key
                lua_pushnumber( L, frame[pushlist[n]].asUInt() ); // push value
            }
            lua_settable(L, iDepth);
            lua_settable(L, -3);    // (note 1) error here
        }
        lua_settable(L, iDepth);    // (note 2) not clear on the need for this
        lua_settable(L, -3);
        lua_setglobal( L, "framedata" ); 
```

所以在 Lua 中我想看到：
[0] = {["status"] = 1, ["cmdsequence"] = 2, ["timestamp"] = 3, ["gain"] = 4}
...
[totFrames -1] = {[“状态”] = 5，[“cmdsequence”] = 6，[“时间戳”] = 7，[“增益”] = 8}

我不清楚注释 2 中 2 个 lua_settable 的用途，但我在上面链接到的答案表明它们是必需的。

lua_settable(L, -3)（注 1）出错了。我在 C++ 中执行此操作，因此我将该代码括在 try/catch 中。当它第一次击中那个可设置的位置时，它会跳出并接住我。我在想我已经以某种方式破坏了堆栈，但我没有看到它。

* * *

感谢@Omri Barel 的出色回答。我仍然不清楚内部“for”循环之后要做什么。

我现在有这个： const char * pushlist[] = { "status", "cmdsequence", "timestamp", "gain", }; int nItems = sizeof(pushlist) / sizeof(char *);

```
 // //
        // What we want to do is essentially push an array of tables.
        // The tables have keys (see pushlist above) and values.
        // The array is indexed by integers from 1 through N.
        //
        lua_newtable( L );
        for( Json::Value::UInt i = 0; i != totFrames; i++ )
        {
            lua_pushnumber( L, i + 1 );  // push the array index
            lua_newtable( L );

            Json::Value frame = params["frameinfo"][i];

            // now push the table which will be at array index (i + 1)
            for( int n = 0; n < nItems; n++ )
            {
                lua_pushnumber( L, frame[pushlist[n]].asDouble() ); // push value
                lua_setfield(L, -2, pushlist[n] );
            }
            lua_settable(L, -3);    // (note 1) error here
        }
        //lua_settable(L, -3);       <<-- not certain that this is required
        lua_setglobal( L, "framedata" ); 
```

我不再爆炸，但我的 Lua 失败了（没有错误消息，它只是退出）。我怀疑我没有损坏堆栈，但不知何故我没有正确完成这个表，所以我的返回很困惑。

我将其他几个返回值推入该数组之前的 Lua 堆栈，然后再推入一个。

我的 Lua 调用是这样的：

```
 param1,param2,framedata,Err = CCall.ReadFromC( arg, arg ); 
```

* * *

我终于有这个工作了。它需要进一步测试，但到目前为止似乎是正确的。再次感谢@Omri Barel。这是我最终得到的代码片段。

```
 const char * pushlist[] = {
              "status", "cmdsequence", "timestamp", "gain",
        };
        int nItems = sizeof(pushlist) / sizeof(char *);

        // //
        // What we want to do is essentially push an array of tables.
        // The tables have keys (see pushlist above) and values.
        // The array is indexed by integers from 1 through N.
        //
        lua_newtable( L );
        for( Json::Value::UInt i = 0; i != totFrames; i++ )
        {
            Json::Value frame = params["frameinfo"][i];

            // now push the table which will be at array index (i + 1)
            lua_newtable( L );
            for( int n = 0; n < nItems; n++ )
            {
                const char * itemName = pushlist[n];
                if( frame[itemName].isNull() ) continue;
                lua_pushnumber( L, frame[pushlist[n]].asDouble() ); // push value
                lua_setfield(L, -2, pushlist[n] );
            }
            lua_rawseti(L, -2, i + 1);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:33:37.363

问题是您在将它们添加到表之前推送了太多的键/值对。您应该一次添加一对。

在调试 Lua 时，你能做的最好的事情就是经常转储堆栈的内容，以检查发生了什么。[“ Lua 编程](http://www.lua.org/pil/24.2.3.html)”中有一些“堆栈转储”代码（第一版已经足够了）。

让我们看一下您的代码（在框架循环内）。

1.  您创建一个表。堆栈是：

    ... [桌子]

2.  您推送成对的键/值：

    ... [表] [键] [值] [键] [值] [键] [值] [键] [值]

3.  您调用 settable with `iDepth`，这对我来说看起来不正确。在这种情况下`iDepth = -(1+nItems) = -5`。但是你在推动对子，所以应该是双倍。但即使`iDepth`是正确的，你仍然只调用它一次，所以它只从堆栈中删除一对：

    ... [表] [键] [值] [键] [值] [键] [值]

4.  你用 -3 调用 settable，但 -3 是 [value] 所以你得到一个错误。

您应该在每个键/值对之后调用 settable（带 -3）。

而且我还建议使用`setfield`哪个更清晰。代替：

```
lua_pushstring(L, key);
lua_pushnumber(L, value);
lua_settable(L, -3); 
```

您可以使用：

```
lua_pushnumber(L, value);
lua_setfield(L, -2, "key"); 
```

# php - 如何从一个表中检索信息以排序另一个表的结果

> ID：13979748
> 
> 赞同：1
> 
> 时间：2012-12-20T20:13:27.667
> 
> 标签：php, mysql

我以前从来不需要用 MySQL 执行复杂的查询（只是基本`SELECT`的`UPDATE`、、和`DELETE`s），所以我觉得这有点困难。这与我正在编写的脚本一样难，希望得到一些指导。

接受这个查询：

```
SELECT * FROM submissions ORDER BY program,title ASC 
```

这将按字母顺序排列结果`program`，然后`title`。但是如果`program`是一个整数，它是`id`一个名为的表中的行列`programs`（它也包含一个 column `program_title`）。所以我真正想要的是做这样的事情：

```
SELECT * FROM submissions ORDER BY (SELECT program_title FROM programs WHERE id=<program id stored in submissions>),title ASC 
```

但是`program_title`存储在另一个表中。我该怎么做呢？通常我会把事情放在一边并研究这个主题，但正如我所说，现在事情会变得很困难，我只需要一些快速的指导。

**更新** 刚刚修复了第二个查询中的一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:19:30.200

试试这个：

```
SELECT * 
FROM submissions INNER JOIN program ON submissions.id = programs.id 
ORDER BY program_tittle ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:19:51.120

你可以试试这个

```
SELECT submissions.* FROM submissions INNER JOIN PROGRAMS ON PROGRAMS.ID = SUBMISSIONS.PROGRAM ORDER BY program_title ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T20:32:45.087

本着您的尝试精神：

```
SELECT * FROM submissions ORDER BY (SELECT program_title 
    FROM programs WHERE id=program),title ASC 
```

我只是替换`<program id stored in submissions>`了`program`.

# fonts - .eps 图形标签在使用 LaTeX 时无法正确显示

> ID：13979749
> 
> 赞同：1
> 
> 时间：2012-12-20T20:13:31.173
> 
> 标签：fonts, latex, eps, figures

我正在使用 python 和 Matplotlib 将图像保存到 .eps。

LaTeX 没有正确读取图像标签，因为标签似乎正在丢弃字符。我怀疑它与“数学模式”和标签有关。标签（在 Python 中）是：

```
ylabel(r'$\varepsilon_{x}$ ($\mu$m)') 
```

唯一出现的是处于数学模式的元素（在 $ 符号之间），而不是下标 {x}。因此，我得到的不是一个带有下标和单位的漂亮 epsilon，而是一个 epsilon 和一个 mu，仅此而已。

我不能只将所有内容都包含在 $ 符号中，因为这会破坏 m 和 ( 和 ) 的外观，这并不能解释为什么 {x} 不起作用。

我还可以将内容保存为 png，然后将它们转换为 eps，但这会带来一系列分辨率问题，并且无法编辑 eps 中的标签。任何其他旨在查看 .eps 文件目录的程序都会正确显示它。似乎*只有*LaTeX 给我带来了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:52:15.117

尝试以 PDF 格式而不是 EPS 格式保存图片。现代 LaTeX 真的是 pdfLaTeX，它不支持 EPS 包含。

可能是您的 LaTeX 发行版设置为尝试使用该`\write18`机制即时将 EPS 图片转换为 PDF。但如果它没有找到所有必要的字体，那可能会失败。

# c++ - C++/Qt 应用程序中的 PySide DLL 加载冲突

> ID：13979752
> 
> 赞同：3
> 
> 时间：2012-12-20T20:13:41.037
> 
> 标签：c++, python, qt, dll, pyside

我有一个使用 Qt 4.x 的核心、GUI 和网络模块的 C++ 应用程序。它在用户执行某些操作时调用 python 回调，重点是用户可以通过编写 python 代码来自定义这些回调。

当我尝试在这样的回调中从 PySide 导入 QtNetwork 模块时：

```
from PySide import QtNetwork 
```

我收到以下**错误**：

`dll load failed : the specified procedure could not be found`

请注意，当我导入 QtCore 和 QtGui 模块时，我没有收到错误消息。

我使用**依赖walker**试图找出问题所在。
当应用程序启动时，它会加载，`QtCore4.dll`它们是放置在我的应用程序目录中的**C++ Qt DLL 。** 当我触发从 PySide 导入 QtNetwork 的 python 代码的回调时，它会加载然后给我错误：`QtGui4.dll``QtNetwork4.dll` **`QtNetwork.pyd`**

 **`LoadLibraryExA("C:\Dev\Python27\lib\site-packages\PySide\QtNetwork.pyd", 0x00000000, LOAD_WITH_ALTERED_SEARCH_PATH) returned NULL. Error: the specified procedure could not be found (127).`

`QtNetwork.pyd`我的:依赖树
![QtNetwork.pyd 的依赖树](../Images/de5bc2c206b19cdcdf523506bd7a72f4.png) 似乎表明**它使用已加载的 C++ DLL**而不是 PySide 的。我想那是因为他们的名字是一样的。
有没有办法让它加载正确的 DLL（`c:\dev\python27\lib\site_package\pyside\`目录中的那些）？
另外，为什么这种冲突与 QtCore 和 QtGui 无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:19:37.790

首先，检查您是否`QTNETWORK4.DLL`满足要求：

*   适合您的架构
*   具有与您的 Qt 库相同的版本，使用女巫编译您的程序
*   由同一个编译器编译

最好的方法是将你需要的库从 Qt 的`bin`目录复制到你的构建目录。

因此，我认为这种**冲突仅与此冲突有关，`QTNETWORK4.DLL`**因为该库具有其他版本（不满足上述要求）。

**让它加载正确的 DLL 的**方法是添加到`path`Qt 目录的环境变量路径`bin`，并从程序目录中删除 DLL - 因此，它可以从`path`.

希望能帮助到你！**

# java - Ubuntu 12.04 中未显示 JFrame 图标

> ID：13979754
> 
> 赞同：4
> 
> 时间：2012-12-20T20:13:47.527
> 
> 标签：java, image, swing, jframe

我使用一些图像图标开发了一个 Swing 应用程序。应用程序 jar 文件在 Windows 中按预期工作，但相同的 jar 文件在 Ubuntu 12.04 操作系统上未显示框架的图像图标。

我的示例代码：

```
 ImageIcon ImageIcon = new ImageIcon(getClass().getResource("/images/logo.png"));
 Image Image = ImageIcon.getImage();
 frame.setIconImage(Image); 
```

**注意：**带有按钮的图像按预期显示，问题*仅在于加载帧图像。*

有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:20:54.180

将您的 JFrame 外观设置为装饰，

```
JFrame.setDefaultLookAndFeelDecorated(true); 
```

# ruby-on-rails - Rails：部署第一个应用程序 - 生产模式

> ID：13979760
> 
> 赞同：3
> 
> 时间：2012-12-20T20:14:20.117
> 
> 标签：ruby-on-rails, ruby, deployment, production

我对整个 Rails 部署的事情感到非常困惑。令人困惑的是，在开发整个应用程序时，它一直处于`development`模式，这很好。现在我将部署它，是否需要对文件进行***修改***以在部署之前将rails 应用程序更改为`production`模式，或者自动部署是否这样做？

我想我要问的是如何从一种环境切换到另一种环境？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T20:17:42.740

无需更改任何文件，只需`RAILS_ENV=production`在服务器上设置 shell 变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:47:22.043

`rails server -e production`会让你进入生产模式。

还...

默认情况下，rails 3.1 及更高版本将资产推迟到资产管道。因此，您需要`rake assets:precompile`在`config/environments/production.rb`.

```
# config/environments/production.rb
config.assets.compile = true 
```

您还需要确保您的生产数据库在`config/database.yml`

除此之外，你很高兴:)

如果这确实是一个生产盒，您也可以将环境变量设置为“生产”。正如 Anatoliy Kukul 在另一个答案中所解释的那样。

# c - 查找字符串中最常见的一对字符

> ID：13979761
> 
> 赞同：5
> 
> 时间：2012-12-20T20:14:20.937
> 
> 标签：c, string, algorithm, function

我写了以下功能

```
//O(n^2)
void MostCommonPair(char * cArr , char * ch1 , char * ch2 , int * amount)
{
    int count , max = 0;
    char cCurrent , cCurrent2;
    int i = 0 , j;
    while(*(cArr + i + 1) != '\0')
    {
        cCurrent = *(cArr + i);
        cCurrent2 = *(cArr + i + 1);
        for(j = i , count = 0 ; *(cArr + j + 1) != '\0' ; j++)
        {
            if(cCurrent ==  *(cArr + j) && cCurrent2 ==  *(cArr + j + 1))
            {
                count++;
            }
        }
        if(count > max)
        {
            *ch1 = cCurrent;
            *ch2 = cCurrent2;
            max = *amount = count;
        }
        i++;
    }
} 
```

对于以下输入

“xdshahaalohalobscxbsbsbs”

ch1 = b ch2 = s 数量 = 4

但在我看来，这个函数效率很低，有没有办法只通过一次字符串或将运行大小减少到 O(n)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T20:18:11.360

由于`char`最多可以容纳 256 个值，因此您可以设置一个 [256*256] 计数器的二维表，遍历您的字符串一次，递增对应于字符串中每对字符的计数器。然后，您可以浏览 256x256 数字表，选择最大的计数，并通过查看其在 2D 数组中的位置来了解它属于哪对。由于计数器表的大小固定为与字符串长度无关的常数值，因此该操作是`O(1)`，即使它需要两个嵌套循环。

```
int count[256][256];
memset(count, 0, sizeof(count));
const char *str = "xdshahaalohalobscxbsbsbs";
for (const char *p = str ; *(p+1) ; p++) {
    count[(int)*p][(int)*(p+1)]++;
}
int bestA = 0, bestB = 0;
for (int i = 0 ; i != 256 ; i++) {
    for (int j = 0 ; j != 256 ; j++) {
        if (count[i][j] > count[bestA][bestB]) {
            bestA = i;
            bestB = j;
        }
    }
}
printf("'%c%c' : %d times\n", bestA, bestB, count[bestA][bestB]); 
```

这是[ideone 上演示的链接](http://ideone.com/j9sm4K)。

请记住，虽然这是渐近的最快可能解决方案（即它是`O(N)`，并且你不能让它比 更快`O(N)`），但对于较短的字符串来说，性能并不好。事实上，您的解决方案可以轻松应对少于大约 256 个字符的输入，甚至可能更多。有许多优化可以应用于此代码，但我决定不添加它们以保持代码的主要思想以其最纯粹和最简单的形式清晰可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T20:23:27.243

如果您想要**O(n)**运行时，您可以使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)（例如，Java 的[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)）

*   遍历你的字符串一次，一次 1 个字符**O(n)**
*   对于访问的每个字符，向前看正好 1 个字符（这就是你的字符对 - 只需将它们连接起来）**O(1)**
*   对于找到的每个这样的字符对，首先在哈希表中查找它：**O(1)**
    *   如果它还没有在哈希表中，请将其添加到字符对作为键和`int 1`值（这会计算您在字符串中看到它的次数）。**O(1)**
    *   如果它已经在哈希表中，则增加其值**O(1)**
*   浏览完字符串后，检查哈希表中计数最高的对。**O(m)**（其中`m`是可能配对的数量；`m <= n`必然）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T20:17:10.107

是的，您可以通过保持运行计数在近似线性的时间内完成此操作。

这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:20:28.940

假设大多数“常见对”是指最常见的两个连续字符集

* * *

在您想要的伪代码级别

```
 Read the first character into the "second character" register
 while(there is data)
    store the old second character as the new first character
    read the next character as the second one
    increment the count associated with this pair
 Select the most common pair 
```

因此，您需要一种有效的算法来存储和计数与字符对相关联的字符，并找到最常见的字符对。

# python - Python - 将 sock.recv 转换为字符串

> ID：13979764
> 
> 赞同：14
> 
> 时间：2012-12-20T20:14:30.460
> 
> 标签：python, struct, python-3.x, recv

我正在研究 python 和网络。

```
while True:
   data = sock.recv(10240) 
```

这绝对是在听。但它似乎需要转换为文本字符串。

我见过一些人使用**struct.unpack()**，但我不确定它是如何工作的。转换的方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-20T20:18:47.537

你得到的[`recv`](http://docs.python.org/3/library/socket.html#socket.socket.recv)是一个`bytes`字符串：

> 从套接字接收数据。返回值是一个字节对象，表示接收到的数据。

在 Python 3.x 中，要将[`bytes`](http://docs.python.org/3/library/stdtypes.html#bytes)字符串转换为 Unicode 文本[`str`](http://docs.python.org/3/library/stdtypes.html#str)字符串，您必须知道该字符串是用什么字符集编码的，因此您可以调用[`decode`](http://docs.python.org/3/library/stdtypes.html#bytes.decode). 例如，如果它是 UTF-8：

```
stringdata = data.decode('utf-8') 
```

（在 Python 2.x 中，和`bytes`是一样的`str`，所以你已经*得到了*一个字符串。但是如果你想得到一个 Unicode 文本`unicode`字符串，它和 3.x 中的一样。）

人们经常使用的原因[`struct`](http://docs.python.org/3/library/struct.html)是数据不仅仅是 8 位或 Unicode 文本，而是一些其他格式。例如，您可以将每条消息作为“ [netstring](http://en.wikipedia.org/wiki/Netstring) ”发送：一个长度（作为 ASCII 数字的字符串），后跟一个`:`分隔符，然后`length`是 UTF-8 字节，然后是`,`- 例如`b"3:Abc,"`. （格式有变体，但这是 Bernstein 标准网串。）

人们使用网络字符串或其他类似技术的原因是，当您使用 TCP 时，您需要某种方式来分隔消息。每个都`recv`可以给你一半的对方通过的东西`send`，或者它可以给你的 3`send`和 4 的一部分。因此，您必须积累`recv`数据缓冲区，然后从中提取消息。你需要一些方法来判断一条消息何时结束，下一条消息何时开始。如果您只是发送没有任何换行符的纯文本消息，则可以使用换行符作为分隔符。否则，您将不得不想出其他东西——可能是网络字符串，或者`\0`用作分隔符，或者使用换行符作为分隔符但转义数据中的实际换行符，或者使用一些自分隔的结构化格式，如 JSON。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T20:18:29.113

在 Python 2.7.x 及之前版本中，`data`已经是一个字符串。在 Python 3.x 中，`data`是一个字节对象。要将字节转换为字符串，请使用该`decode()`方法。 `decode()`将需要一个编解码器参数，例如“utf-8”。

# javascript - 如何获取 Shopify 集合中的所有项目

> ID：13979775
> 
> 赞同：0
> 
> 时间：2012-12-20T20:15:27.570
> 
> 标签：javascript, html, shopify, liquid

我正在为客户制作 Shopify 商店的侧边栏。它将显示特定集合中的所有项目。该集合称为精选，我的客户将使用 CMS 指定要在此处显示的项目。它可以显示 1 个项目、100 个项目，或者在精选集合中显示许多项目。

我有一些我认为会这样做的代码，但它什么也没显示。这是代码：

```
{% for product in collections.featureditems.products %}
{% if product.title == '<insert a title-id>' %}
<a href="{{product.url}}" onclick="return Showroom.showProduct('{{product.handle}}');"><img src="{{ product.featured_image | product_img_url: 'medium' }}"/></a>
{% endif %}
{% endfor %}

<script type="text/javascript">
    var featuredProductDisplay = "";
    var productCount = {{ collections.featureditems.products.size }};
    window.onload = function() {
      var product=new Array(productCount)
        {% for product in collections.featureditems.products %}
           product[{{forloop.index0}}]='<div class="featuredItem"><a href="{{product.url}}" onclick="return Showroom.showProduct("{{product.handle}}");\"><img src="{{ product.featured_image | product_img_url: "small" }}" /></a></div>';
       featuredProductDisplay = featuredProductDisplay + product[{{forloop.index0}}];
    {% endfor %}
    document.getElementById('featuredContainer').innerHTML = featuredProductDisplay;
}
</script>
<div class="leftSideBar">
    <h2>Featured</h2>
<div id="featuredContainer">

</div>
</div> 
```

因此，此代码应该显示 Featured 类别中每个项目的图像，并且该图像应该是指向该项目页面的链接。但我很难过。有人知道我做错了什么吗？

所以理论上，它会运行循环，并将 HTML 代码构建到“product[{{forloop.index0}}]”变量中，然后将其附加到 featuresProductDisplay 的末尾。

完成循环后，featuredProductDisplay 的值应放入名为 featuresContainer 的 div 中。

当我现在运行它时，它不会在 div 中放置任何内容。

所以在某个地方，有些东西不起作用，我似乎无法弄清楚缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:43:58.310

让我给你一个提示。停止像你一样使用 Javascript。在您的情况下，您正在渲染一个集合，因此您 100% 处于 Liquid 世界中，并且您无需将 Liquid 混合到您的 Javascript 中。

当您完成渲染 Liquid、HTML 和 DOM 之后……集合就在屏幕上，呈现出来了。因此，连接您的 DOM 加载处理程序以修复任何需要修复的内容，添加您的事件处理程序等……但是您的模式在这里只是一团糟……没有简单的帮助。如果你选择像你一样混合，你最好成为这两个方面的专家......或者你会长期从事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T23:04:25.957

对于任何仍然需要帮助的人。我想出的答案是一个完全流动的答案。但这对我有用。只需将 collectionhandle 替换为您的集合的句柄即可。

```
 {% assign collection = collections.collectionhandle %}
  {% assign products = collections.colectionhandle.products %}
  {% capture new_row %}
   <div class="product_row">
    {% endcapture %}
    {% for product in products limit: limit %}
             <a href="{{ product.url | within: collection }}" title="{{ product.featured_image.alt | escape }}">
       <img {% if settings.align_height %}style="height:{{ settings.collection_height }}px"{% endif %} src="{{ product.featured_image | product_img_url: 'large' }}" alt="{{ product.featured_image.alt | escape }}" />
       </a> 
    {% endfor %} 
```

# vb.net - 使用 SSL Web 服务进行身份验证时出错

> ID：13979777
> 
> 赞同：1
> 
> 时间：2012-12-20T20:15:43.060
> 
> 标签：vb.net, ssl, service, web

当我尝试调用使用 SSL 身份验证的 Web 服务方法时出现以下错误，证书已安装在计算机上，并且我可以在 Google Chrome 中成功打开 Web 服务。这两天我一直卡在里面，不知道还能做什么。

```
Function Deceval(ByVal xmlstr As String, ByVal certname As String, ByRef error_cert As Boolean, ByRef user As String, ByRef password As String, ByRef vectrama As String(), ByRef url As String, ByVal vecrutas As String(), ByVal cert As X509Certificate2)
    Try
        Dim WSCompany As SDLService = New SDLService()
        Dim petitionWS As RequestCreateReceiptServiceDTO = New RequestCreateReceiptServiceDTO()
        Dim answerFromWS As ResponseReceiptServiceDTO
        Dim signatureToken As X509SecurityToken = New X509SecurityToken(cert)
        Dim userNameToke As New UsernameToken(user, password)
        Dim x509str As X509SecurityToken = New X509SecurityToken(signatureToken.Certificate)
        Dim sig As New MessageSignature(x509str)

        WSCompany.RequestSoapContext.Security.Tokens.Add(userNameToke)
        WSCompany.RequestSoapContext.Security.Elements.Add(sig)
        WSCompany.RequestSoapContext.Security.Tokens.Add(x509str)
        WSCompany.RequestSoapContext.Security.Timestamp.TtlInSeconds = 60

        Dim soapHeader As HeaderDTO = New HeaderDTO()
        petitionWS.Header = soapHeader
        'This date was hardcoded because I thought the error was caused
        'by a time zone difference (it is not apparently)
        petitionWS.Header.Date = "2012-12-20T17:21:30Z"
        petitionWS.Header.Hour = "17:21PM"
        petitionWS.Header.User = "oraclell"
        petitionWS.Header.DepositCode = "110011"

        ServicePointManager.ServerCertificateValidationCallback = Function(obj As [Object], certificate As X509Certificate, chain As X509Chain, errors As SslPolicyErrors)
                                                                      Return True
                                                                  End Function

        WSCompany.ClientCertificates.Add(signatureToken.Certificate)
        WSCompany.Url = serviceURL
        'Calling the createReceipt() web service method. The error shows up when stepping in the line below :(
        answerFromWS = WSCompany.createReceipt(petitionWS)

        Return ""
    Catch ex As Exception
        error_cert = True
        register.log("Error consuming web service -- " & ex.ToString, "Log_ConsWS.txt", webFilePaths)
        Return xmlstr
    End Try
End Function 
```

这会导致以下错误：

```
Security token failed to validate. weblogic.xml.crypto.wss.SecurityTokenValidateResult@4c104c10[status: false][msg [ 
```

以下是堆栈跟踪的链接：

[堆栈跟踪 - Pastebin](http://pastebin.com/aHcTRKiu)

任何帮助或线索将不胜感激。

# google-chrome - Chrome 扩展：如何处理来自浏览器的禁用和启用事件

> ID：13979781
> 
> 赞同：9
> 
> 时间：2012-12-20T20:15:56.283
> 
> 标签：google-chrome, google-chrome-extension

从 chrome 浏览器禁用/启用扩展后，有没有办法运行回调。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T04:40:58.377

Chrome 管理 API() 的

*   [chrome.management.onEnabled.addListener(function(ExtensionInfo info) {})](https://developer.chrome.com/extensions/management.html#event-onEnabled)

*   [chrome.management.onDisabled.addListener(function(ExtensionInfo info) {})](https://developer.chrome.com/extensions/management.html#event-onDisabled)

通知扩展启用和禁用的更改。

确保你有

```
"permissions": [
    "management"
  ], 
```

在你的`manifest.json`

### 示例演示

```
chrome.management.onDisabled.addListener(function(ExtensionInfo) {
    console.log(JSON.stringify(ExtensionInfo));
}); 
```

PS：当它被禁用时，它自己的扩展无法监控。你需要第二个扩展来监控它。从扩展程序和用户的角度来看，禁用扩展程序与关闭浏览器的效果完全相同。

有关详细信息，请参阅[文档](https://developer.chrome.com/extensions/management.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T16:44:44.017

似乎[确实](https://stackoverflow.com/a/13984356/1509695)有一个可用的兄弟`chrome.management`api 命名空间`onEnabled`，并且它确实按预期对我触发（在开发人员模式下禁用和启用时，以及不在开发人员模式下时）。

你可以这样做：

```
chrome.management.onEnabled.addListener(start); 
```

但请注意，您的清单将需要额外的权限才能使用此 API，如原始答案中所述。[有关文档中的详细信息，请参见此处](https://developer.chrome.com/docs/extensions/reference/management/#manifest)。

在作为开发人员打开和关闭您的扩展程序时，使用`chrome.management.onEnabled`似乎是一个真正的理智保护措施，当您的用户也这样做时，所有其他相同的听起来都是一个好主意。

因此，到目前为止，对于我的开发工作流程，我目前在我的清单指向的扩展服务工作脚本中的三个事件上触发我的扩展的初始化逻辑，以便重新加载扩展以及禁用和启用它都会触发初始化：

```
chrome.runtime.onInstalled.addListener(start);
chrome.runtime.onStartup.addListener(start);
chrome.management.onEnabled.addListener(start); 
```

其中`start`是一个包含我的初始化逻辑的函数。

这有点不明显（对我来说）为什么在没有扩展需要管理权限的情况下处理它自己的启用事件（基本上是在扩展启动时）将不可用。也许有一个不同的事件可以用于这个，在`chrome.runtime`api 中，或者一个更正确的蓝图，我还没有完全弄清楚。如果您知道更好的方法，很高兴了解它。

# c# - 如何在 Caliburn.Micro 应用程序中访问 ShellViewModel？

> ID：13979786
> 
> 赞同：0
> 
> 时间：2012-12-20T20:16:11.790
> 
> 标签：c#, wpf, caliburn.micro

我有一个带有 Caliburn.Micro 的 WPF 应用程序。主要的 ViewModel 是 ShellViewModel。它包含一个选项卡控件，每个选项卡都包含一个用户控件。我需要从该内部用户控件访问 ShellViewModel 的属性。

var par = ((MyApp.ShellViewModel)((Screen)Parent).MyProperty;

ShellViewModel 虽然未知。你能告诉我如何访问它吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:22:37.253

```
var parent = IoC.Get<ShellViewModel>(); 
```

我目前无法验证该语法，但我认为它是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:08:04.323

好的，从您的评论看来，您在外壳上有一个组合框，需要影响其中一个选项卡上显示的内容。

要在 ViewModel 之间进行通信，您始终可以使用`EventAggregator`CM 的一部分并实现可以利用的订阅者模式

例如

在您的 shell VM 上，您可以创建聚合器的静态实例或创建一个单独的静态类，该类将为应用程序提供聚合器

```
static class AggregatorProvider 
{
    // The event aggregator
    public static EventAggregator Aggregator = new EventAggregator();
}

class ShellViewModel : Conductor<IScreen>
{
    // When the combo box selection changes...
    public void SelectionChanged(object SomeValue) 
    {
        // Publish an event to all subscribers
        AggregatorProvider.Aggregator.Publish(new SelectionChangedMessage(SomeValue));
    }
} 
```

您可以`SelectionChanged`使用标准操作消息或约定来处理组合框（我不确定 CM 默认对组合应用哪些约定，因此我将在示例中显示显式绑定）

```
<ComboBox x:Name="MyCombo" cal:Message.Attach="[Event SelectionChanged] = [Action SelectionChanged(MyCombo)" /> 
```

希望如果应用了正确的约定，您应该将所选项目传递给该方法

您的子虚拟机只需要订阅聚合器并实现 IHandle，其中 T 是它应该处理的消息类型

```
class ChildViewModel : Screen, IHandle<SelectionChangedMessage>
{
    public ChildViewModel() 
    {
        // Subscribe to the aggregator so we receive messages from it
        AggregatorProvider.Aggregator.Subscribe(this);
    }

    // When we receive a SelectionChangedMessage...
    public void Handle(SelectionChangedMessage message) 
    {
        // Do something with the new selection
    }
} 
```

`SelectionChangedMessage`可以是：

```
class SelectionChangedMessage 
{
    public object NewValue { get; private set; }

    public SelectionChangedMessage(object newValue) 
    {
        NewValue = newValue;
    }
} 
```

显然，上面可能是一个泛型类型，因此您可以强烈键入`NewValue`参数 - 然后您发布的消息可以是任何东西，所以这取决于您

值得指出的是，您可以`Unsubscribe`从聚合器中控制它何时接收通知。聚合器无论如何都使用弱引用，因此您无需过多担心取消订阅，但这确实意味着您可以控制对象何时接收消息（即通过订阅`OnActivate`和取消订阅在不活动时停止侦听`OnDeactivate`）。

# ruby-on-rails - 在 Rails 中将日期字段转换为本地时间

> ID：13979792
> 
> 赞同：0
> 
> 时间：2012-12-20T20:16:46.383
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, rails-i18n

通常我的 webapp 中有日期时间字段，这些字段由 Rails 作为 UTC 时间存储在 postgresql 数据库中。当我在网页上显示这些日期和时间时，它们会以当地时间显示，因为我有类似于以下代码的内容：

```
before_filter :set_time_zone

def set_time_zone
  Time.zone = "Pacific Time (US & Canada)"
end 
```

效果很好，除了现在我需要将其中一些`datetime`字段转换`date`为数据库中的字段（这很重要）。例如，我可能有学生开始日期的日志：

```
Log.create(at: began_at, student_id: student_id) 
```

`began_at`是一个`datetime`字段。我是否正确设置了 Time.zone 并不重要，该`at`字段是 a`date`并且它将存储在 postgresql 中，可能会提前或落后当地时间 1 天。当我去显示那个日期时，它不会转换为本地时间，这是有道理的......如果我没有存储时间，Ruby/Rails 怎么知道它是本地的哪一天？

我需要的是存储本地日期。所以我需要先转换`began_at`为当地时间，然后再将其分配给`at`. 在 Rails 的控制器中执行此操作的正确方法是什么？

我正在使用最新的稳定 Rails（现在是 3.2.9）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:03:24.907

尝试将 use_zone 与区域一起使用。

```
Time.use_zone(zone) do
   log.at = DateTime.parse(params[:at])
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:05:40.627

给定 UTC 的时间戳`:began_at`，比如凌晨1 点左右

```
[1] pry(main)> Time.zone.now.utc.midnight + 1.hour
=> 2012-12-20 01:00:00 UTC 
```

这可以转换为当地时间

```
[2] pry(main)> Time.zone.name
=> "Eastern Time (US & Canada)" 
```

使用`Time.parse(str)`

```
[3] pry(main)> x = Time.zone.now.utc.midnight + 1.hour
=> 2012-12-20 01:00:00 UTC
[4] pry(main)> Time.zone.parse(x.to_s)
=> Wed, 19 Dec 2012 20:00:00 EST -05:00 
```

然后，您可以将该本地时间戳转换为日期对象`.to_date`

```
[5] pry(main)> Time.zone.parse(x.to_s).to_date
=> Wed, 19 Dec 201 
```

然后你可以设置`Log`'s `:at`。现在一共

```
Log.create(at: Time.zone.parse(began_at.to_s).to_date, student_id: student_id) 
```

# javascript - 如果网页使用 SSL (https)， 为什么我们不在 CDN 上使用 JavaScript 库？

> ID：13979797
> 
> 赞同：3
> 
> 时间：2012-12-20T20:17:01.197
> 
> 标签：javascript, ssl, cdn, yui3

对于 jQuery 或 YUI3 等 JavaScript 库，Google 或 Yahoo 都将脚本托管在其 CDN 上，[YUI 3 Cookbook 段落](http://books.google.com/books?id=b-h_XNYCskgC&lpg=PA15&dq=yui3%20CDN%20SSL%20secure&pg=PA15#v=onepage&q=yui3%20CDN%20SSL%20secure&f=false)说：

> 也许您的页面使用 SSL，在这种情况下加载远程资源是一个坏主意，因为它会将您的用户的安全信息暴露给远程站点

我只能看到 CDN 站点必须是可信的，否则恶意 JavaScript 可以在 www.mycompany.com 的网页上运行。但是假设 CDN 站点（谷歌和雅虎）是很受信任的，为什么 SSL 网页不想在 CDN 上包含那些 JavaScript 库——它如何“将用户的安全信息暴露给远程站点”，如书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:07:42.030

通过 SSL 将外部 Javascript 库加载到加密网页上可以被视为背叛了用户的信任，因为理论上用户提供给网站的信息不再只是他们和安全网站之间的信息。此外，如果外部图书馆受到损害，传递到网站本身的信息也可能受到损害。

[YUI3 开发人员 Ryan Grove 在这里](http://wonko.com/post/javascript-ssl-cdn)详细阐述了这一点。

简而言之，

> **[...]**你让 FooCo 在你的网站上执行它想要的任何 JavaScript。您正在通过 SSL 安全地加载该 JavaScript，因此浏览器不会显示任何可怕的警告，但现在您的用户不仅仅是与 buygadgets.example.com 通信。现在他们还与 cdn.foolib.com 通信，并且由于 cdn.foolib.com 可以在您的页面上运行 JavaScript，他们还可以看到用户在这些页面上读取或输入的任何信息。

当然，您是否决定通过 SSL 提取外部可执行代码与安全性对您的特定用例的重要性有关，并且对此主题有不同的看法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:23:23.483

这取决于 CDN 是否具有您请求的资源的安全版本。谷歌在这方面似乎比雅虎做得更好！从我所看到的。

您可以使用对 CDN 资源的无协议引用，如下所示：

**从 http 或 https 工作：**

```
<script type="text/javascript"
    src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

**仅适用于 http：**

```
<link rel="stylesheet"
    type="text/css"
    href="//yui.yahooapis.com/3.8.0/build/cssreset/cssreset-min.css" /> 
```

您还可以从 CDN 有条件地加载脚本并回退到本地版本：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js">
</script>
<script>
    !window.jQuery.ui && document.write(            
    unescape('%3Cscript src="/scripts/jquery-ui-1.8.14.min.js"%3E%3C/script%3E'))
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:24:55.083

这意味着您网站上的大陆既来自安全服务器，也来自不安全服务器。此外，可以将数据发送到安全和不安全的服务器（cdn 站点）。这确实是保护您网站的一种手段，如果您要起诉 SSL，那么也有理由使用 SSL 为您的所有资源提供服务。

话虽如此，大多数 CDN 都可以通过 SSL 连接（包括 google）来提供这些资源。

# html - CSS位置固定和绝对不能在chrome中工作

> ID：13979798
> 
> 赞同：1
> 
> 时间：2012-12-20T20:17:05.227
> 
> 标签：html, css, css-position

你好，这真的很奇怪，除非我错过了什么。在我的网站上，我有一个静态标题栏，它设置为固定位置，除了在 1 页上之外，其他地方都可以正常工作，我不知道为什么。这也仅在 chrome 中发生。具有“顶栏定位：固定”类的 div

```
<header>
    <div class="top-bar">
        <div class="top-wrapper">
            <a href="/" style="display:block !important;"><div class="logo"></div></a>
            <a href="/add-event" style="display:block !important;"><div class="add-event button"></div></a>
            <a href="/events" style="display:block !important;"><div class="all-events button"></div></a>
            <div class="search-wrapper">
                <form class="searchform" action="" method="post" onsubmit="window.location.href = '/search/'+$('.searchfield').val()+'/1';return false;">
                    <input class="searchfield" type="text" name="search" placeholder="search...">
                    <input class="searchbutton" type="submit" name="search-submit" value="Go">
                </form>
            </div>
        </div>
    </div>
</header> 
```

这是CSS：

```
-webkit-transform: translate(0) !important;
background: url(../gfx/field_bg.png) repeat-x left top;
height: 40px;
width: 100%;
position: absolute !important;
top: 0px;
left: 0px;
-moz-box-shadow: 0 0 20px #000;
-webkit-box-shadow: 0 0 20px black;
box-shadow: 0 0 20px black;
border-bottom: 1px solid lightgray;
z-index: 998; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:18:41.280

在检查员中，切换`-webkit-transform: translate(0) !important`为`<header>`我解决了这个问题。

# asp.net - 如何在 IIS 重写模块中为我的站点创建自定义规则

> ID：13979802
> 
> 赞同：2
> 
> 时间：2012-12-20T20:17:11.270
> 
> 标签：asp.net, iis, web-config

我在尝试使用根路径内的 Web.Config 文件为 IIS 8.0 上的重定向应用程序路径编写 2 条规则时遇到问题。

1) 我需要将这些 URL 的“www.misite.com”和“missite.com”重定向到“~/main”文件夹。2) 我需要将 URL“subdomain.misite.com”重定向到“~/subdomain”文件夹。

对于我正在使用的第一个：

```
 <rule name="Redirect to Main" stopProcessing="true">
      <match url="(.*)" />
      <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="^www.misite.com(/.*)?$" />
        <add input="{REQUEST_URI}" negate="true" pattern="/main" />
      </conditions>
      <action type="Redirect" url="http://www.misite.com/main/{R:1}" />
    </rule>

    <rule name="Redirect to Main" stopProcessing="true">
      <match url="(.*)" />
      <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="^misite.com(/.*)?$" />
        <add input="{REQUEST_URI}" negate="true" pattern="/main" />
      </conditions>
      <action type="Redirect" url="http://www.misite.com/main/{R:1}" />
    </rule> 
```

对于第二个：

```
 <rule name="Redirect to Subdomain" stopProcessing="true">
      <match url="(.*)" />
      <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="^subdomain.misite.com(/.*)?$" />
        <add input="{REQUEST_URI}" negate="true" pattern="/subdomain" />
      </conditions>
      <action type="Redirect" url="http://www.misite.com/subdomain/{R:1}" />
    </rule> 
```

第一条规则工作正常，但第二条当我尝试浏览“subdomain.misite.com”时，我被重定向到“http://www.misite.com/main/subdomain”。

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:28:52.013

我认为您在这里混淆了重定向和重写-您描述的行为正是我所期望的引用规则。最初，请求被**重定向**到 www.misite.com/subdomain，然后根据您的第一条规则，请求再次被重定向到 www.misite.com/main/subdomain。我认为你想要在这里做的是**重写**请求，为每个子域提供正确的内容。

重定向实际上意味着“如果对 URL 'A' 的请求到达，则将浏览器转发到 URL 'B'”。有效地重写请求意味着“如果收到对 URL 'A' 的请求，则服务*资源*'B'，就好像它*在*URL 'A' 处一样”。

我假设您具有以下结构-

-wwwroot

- 主要的

--子域

大概您想要发生的是，当用户访问 www.domain.com/default.aspx 时，会提供“主”目录中的 default.aspx 文档，同样，当用户访问 subdomain.domain.com 时，也会提供默认值。返回“子域”目录中的 aspx 文档。

我还假设您不希望文件夹本身成为路径的一部分，即不是 subdomain.domain.com/subdomain/default.aspx

```
<rule name="Rewrite to Main directory" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAll">
    <add input="{HTTP_HOST}" pattern="^www.misite.com(/.*)?$" />
    <add input="{PATH_INFO}" negate="true" pattern="/main/" />
  </conditions>
  <action type="Rewrite" url="/main/{R:1}" />
</rule>

<rule name="Redirect to WWW" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAll">
    <add input="{HTTP_HOST}" pattern="^misite.com(/.*)?$" />
  </conditions>
  <action type="Redirect" url="http://www.misite.com/{R:0}" redirectType="Permanent" />
</rule> 
```

我将您的第一个代码块的第二部分保留为重定向，因为通常认为在 SEO 的多个 URL 上提供相同的内容是不好的做法（请参阅[http://support.google.com/webmasters/bin/answer. py?hl=zh-CN&answer=66359](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66359) ) 并且会给您带来分析问题。在这种情况下，我选择将 domain.com/default.aspx 重定向到 www.domain.com/default.aspx，但选择相反的方式同样有效 - 您只需要做出选择并在您的网站中始终如一地应用它。

我已经删除了重定向路径/URL 的 /main/ 部分，因为 /main/ 目录中的内容无论如何都应该由请求提供服务，将其留在路径中将有效地寻找 /main/main/default。 aspx。我还在第一个（重写）规则的路径信息条件上添加了一个否定，这意味着如果确实到达 www.domain.com/main/default.aspx 的请求将不会被重写以提供来自子的内容-directory - /main/default.aspx 将被提供，而不是 /main/main/default.aspx 中的（可能不存在的）文件。

最后子域也改为重写。

```
<rule name="Rewrite for Subdomain" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAll">
    <add input="{HTTP_HOST}" pattern="^subdomain.misite.com(/.*)?$" />
    <add input="{PATH_INFO}" negate="true" pattern="/subdomain/" />
  </conditions>
  <action type="Rewrite" url="/subdomain/{R:1}" />
</rule> 
```

有关此主题的更多信息，请参阅[http://weblogs.asp.net/owscott/archive/2010/01/26/iis-url-rewrite-hosting-multiple-domains-under-one-site.aspx](http://weblogs.asp.net/owscott/archive/2010/01/26/iis-url-rewrite-hosting-multiple-domains-under-one-site.aspx)。

# map - PIG UDF 加载 .gz 文件失败

> ID：13979803
> 
> 赞同：1
> 
> 时间：2012-12-20T20:17:18.733
> 
> 标签：map, hadoop, gzip, user-defined-functions, apache-pig

我写了我的 UDF 来将文件加载到 Pig 中。它适用于加载文本文件，但是，现在我还需要能够读取`.gz`文件。我知道我可以解压缩文件然后处理，但我只想读取`.gz`文件而不解压缩它。

我有我的 UDF 扩展自`LoadFunc`，然后在我的 costom 输入文件`MyInputFile extends TextInputFormat`中。我也实现了`MyRecordReader`。只是想知道扩展`TextInputFormat`是否是问题所在？我试过`FileInputFormat`了，仍然无法读取文件。`.gz`以前有人写过UDF从文件中读取数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:27:21.037

`TextInputFormat`*也*处理 gzip 文件。看看它的 RecordReader 的 ( `LineRecordReader`) initialize() 方法，其中初始化了正确的*CompressionCodec*。另请注意，gzip 文件**不可拆分**（即使它们位于 S3 上），因此您可能需要使用可拆分格式（例如：LZO）或未压缩数据来利用所需的并行处理级别。

[如果您的 gzip 压缩数据存储在本地，您可以按照此处](http://bigdatanoob.blogspot.hu/2011/07/copy-and-uncompress-file-to-hdfs.html)所述的一步将其解压缩并复制到 hdfs 。或者如果它已经在 hdfs 上
`hadoop fs -cat /data/data.gz | gzip -d | hadoop fs -put - /data/data.txt`会更方便。

# windows - 从 Windows shell 命令结果中修剪空格

> ID：13979804
> 
> 赞同：0
> 
> 时间：2012-12-20T20:17:18.837
> 
> 标签：windows, shell

我正在尝试编写一个快速批处理文件。它将获取命令的结果，在其周围添加一些额外的文本和引号，然后将其放入一个新文件中。问题是我正在运行的命令的结果包含一个新行。这是命令：

```
p4 changelists -m 1 -t //depot/...> %FILENAME% 
```

该`p4`命令的输出在其末尾有一个换行符。我要放入的文件需要在该命令的输出周围加上引号，但是命令中包含换行符的事实意味着“结束引号”出现在文件的新行中，这不会为我正在做的事情工作。

我已经尝试将该命令的输出写入文件并将其读回，并尝试`FINDSTR`在包含输出的文件上运行，但我似乎总是取回愚蠢的尾随空格。我什至尝试在文件中插入退格，但这只是将退格字符放入文件中，而不是实际执行退格...

对此有什么可做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:02:25.837

我不是 perl 向导，但以下似乎可行：

`p4 changelists -m 1 -t //depot/...| perl -p -e "s/^/\042/;s/$/\042/"`

查看[Strawberry Perl](http://strawberryperl.com/)，它提供了 Windows 版本的 Perl。

在解决此类问题时，我总是在查看我的 Unix 工具，即使在 Windows 下也是如此。sed 和 gawk 也将带您到那里，请查看[msysgit](http://code.google.com/p/msysgit/)以获得可以在 Windows 上运行的一个很好的 Unix 工具包。

# actionscript-3 - Adobe AIR：工作人员无法加载文件

> ID：13979805
> 
> 赞同：3
> 
> 时间：2012-12-20T20:17:24.380
> 
> 标签：actionscript-3, file, air

我对 AIR 中的 Worker 有疑问：当我尝试在非原始 Worker 中打开文件时，出现安全错误。当我在原始 Worker 中尝试相同的代码时，它运行良好。我在创建第二个 Worker 时加载了另一个 swf 并传递了它的字节。

首先，我尝试使用 URLLoader（第二个工作人员中的代码）：

```
// Loading XML test
var loader:URLLoader = new URLLoader(new URLRequest('app:/config/generator/galaxy.xml'));
loader.addEventListener(Event.COMPLETE, function(evt:Event):void
{
    // Trace
    CEThreadDebugger.log(XML(loader.data).toString());
});
loader.addEventListener(IOErrorEvent.IO_ERROR, function(evt:IOErrorEvent):void
{
    CEThreadDebugger.log(evt.text, CEThreadDebugger.ERROR);
});
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, function(evt:SecurityErrorEvent):void
{
    CEThreadDebugger.log(evt.text, CEThreadDebugger.ERROR);
}); 
```

我收到此错误：

```
[LOG]ERROR->Error #2048: Security sandbox violation: app:/SombresCieux.swf cannot load data from app:/config/generator/galaxy.xml. 
```

然后我尝试使用 File ：

```
var file:File = File.applicationDirectory.resolvePath('config/generator/galaxy.xml');
var stream:FileStream = new FileStream();
stream.open(file, FileMode.READ);
var xml:XML = XML(stream.readUTFBytes(stream.bytesAvailable));
stream.close(); 
```

我收到此错误（我的代码在 _mainToWorker 方法中）：

```
[LOG]INFO->Error #0 : SecurityError -> file
SecurityError: file
    at flash.filesystem::File$/initAppResourceDir()
    at flash.filesystem::File$/get appResourceDirectoryPath()
    at flash.filesystem::File$/get applicationDirectory()
    at generator::Generator/_mainToWorker()
    at engine.generic.system.concurrency::CEThreadMain/Evt_mainToWorker() 
```

我注意到错误仅来自这一行：

```
var file:File = File.applicationDirectory.resolvePath('config/generator/galaxy.xml'); 
```

所以它适用于原始 Worker（主应用程序），但不适用于线程...... Worker 不能访问系统的文件或加载任何文件吗？这是一个相当大的限制......

感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T09:00:28.433

> 公共函数 createWorker(swf:ByteArray, **giveAppPrivileges:Boolean** = false):Worker

giveAppPrivileges:Boolean (default = false) — 指示是否应向工作人员授予 AIR 中的应用程序沙箱权限。Flash Player 中忽略此参数

# javascript - JavaScript 点击事件 - 为什么我需要两个 addEventListener？

> ID：13979808
> 
> 赞同：1
> 
> 时间：2012-12-20T20:17:28.113
> 
> 标签：javascript, click, addeventlistener

我正在尽最大努力学习不显眼的 JavaScript。下面的代码是尝试更改我使用从 HTML 标记中调用的 getArrays 函数的现有练习片段。这是我可以开始工作的唯一版本。虽然它很好用，但我觉得可能有一些不必要的部分，并且不完全理解为什么我需要最后一行代码（addEventListener 的东西有点新）。我正在研究 Mozilla DOM 参考示例，并且已经知道如何在 jQuery 中执行此操作。谢谢！

**JavaScript：**

```
 <script>

        function getArrays() {
            var ddlValArray = new Array();
            var ddlTextArray = new Array();
            var ddl = document.getElementById("ddlFlavors");

            for (i=0; i<ddl.options.length; i++) {
                ddlValArray[i] = ddl.options[i].value;
                ddlTextArray[i] = ddl.options[i].text;
                alert(ddlValArray[i] + ' ' + ddlTextArray[i]);  
            }
        }

        function showArrays() {
            var link = document.getElementById("clickHandler");
            link.addEventListener("click", getArrays, false);   
        }

        document.addEventListener("DOMContentLoaded", showArrays, false);

    </script> 
```

**HTML**

```
Select Flavor: 
<select id='ddlFlavors'>
<option value="1">Vanilla</option>
<option value="2">Chocolate</option>
<option value="3">Strawberry</option>
<option value="4">Neopolitan</option>
</select>

<br/><br/>
<a id="clickHandler" href="#">Show Flavors</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T20:28:35.260

如果您正确构建 HTML / JS，则不会。

将脚本标签移动到正文底部`</body>`标签之前，您不再需要等待 DOMContentLoaded 事件。它上面的 html 将在 JS 执行之前被解析。

这可能会导致其他警告，但对于您的示例，它会起作用。

```
<body>
Select Flavor:
<select id='ddlFlavors'>
    <option value="1">Vanilla</option>
    <option value="2">Chocolate</option>
    <option value="3">Strawberry</option>
    <option value="4">Neopolitan</option>
</select>
<br/><br/>
<a id="clickHandler" href="#">Show Flavors</a>
<script>
        function getArrays() {
            var ddlValArray = new Array();
            var ddlTextArray = new Array();
            var ddl = document.getElementById("ddlFlavors");
            for (i=0; i<ddl.options.length; i++) {
                ddlValArray[i] = ddl.options[i].value;
                ddlTextArray[i] = ddl.options[i].text;
                alert(ddlValArray[i] + ' ' + ddlTextArray[i]);  
            }
        }
        function showArrays() {
            var link = document.getElementById("clickHandler");
            link.addEventListener("click", getArrays, false);   
        }
        showArrays();
    </script>
</body> 
```

将脚本放在底部还有许多其他好处。[在此处阅读有关它们的更多信息](http://developer.yahoo.com/performance/rules.html#js_bottom)。

需要注意的一点：即使 iframe 和图像的标签被解析，图像本身可能还没有完成下载，所以你必须等待。iframe 内容也可能尚未加载。但是 DOMContentLoaded 也不等待这些。我只是觉得很高兴注意到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:21:05.727

这行代码：`document.addEventListener("DOMContentLoaded", showArrays, false);`确保你的函数`showArrays()`在 DOM 准备好之前不会开始执行。换句话说，函数`showArrays()`将在 (X)HTML 文档被加载和解析后开始执行。

我建议您将 JavaScript 代码放在一个单独的文件中，并在该`head`部分中使用以下 HTML 代码：`<script type="text/javascript" src="yourfilepath.js"></script>`. 然后你也可以使用`window.onload`和`onclick`事件来代替`document.addEventListener()`方法。

当你这样做时，你可以将代码放在`showArrays`函数体之外的函数中并删除函数。

例如：

```
window.onload = function()
{
  var link = document.getElementById("clickHandler");
  link.onclick = getArrays;
} 
```

这被认为是一种更好的做法。

**完整示例**

在`script.js`文件中：

```
//This is the beginning of the script...

    function getArrays() {
        var ddlValArray = new Array();
        var ddlTextArray = new Array();
        var ddl = document.getElementById("ddlFlavors");

        for (i=0; i<ddl.options.length; i++) {
            ddlValArray[i] = ddl.options[i].value;
            ddlTextArray[i] = ddl.options[i].text;
            alert(ddlValArray[i] + ' ' + ddlTextArray[i]);  
        }
    }

window.onload = function()
{
  var link = document.getElementById("clickHandler");
  link.onclick = getArrays;
} 
```

在您的 HTML 头中：

```
<script type="text/javascript" src="script.js"></script> 
```

在大多数情况下，最好将 JavaScript 与 HTML 文件分开编写，就像 CSS 一样。这样一来，您的 HTML 代码就会看起来更整洁、更有条理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T20:39:49.300

事件监听器对JS*至关重要。*每次用户与您的页面交互时，您都需要了解该事件并做出响应。
当然，在这个片段中，您的函数假设 DOM 中有一个具有给定 id 的元素，准备好、设置和等待。情况可能并非如此，这就是为什么您必须等到 JS 收到 OK（`DOMReady`事件）。

这只是一个非常简单的示例，说明为什么可以使用`addEventListener`. 但是 IMO，当您开始使用 Ajax 调用向您的页面添加新内容时，事件侦听器真正发挥作用：
假设 DOM 已准备好，但稍后可能会或可能不会请求某些元素（取决于用户输入）。在 jQuery 中，你会使用这样的东西：

```
$('#foo').on('click',functionRef); 
```

这并不要求*foo*元素在此代码运行时可用，但只要将元素添加到 dom 中，就会按您的意愿处理点击事件。
在非 jQ 中，您将使用`addEventListener`它。由于事件模型（有关传播和冒泡的详细信息，请参阅 quirksmode），侦听器不需要直接附加到元素：

```
document.body.addEventListener('click',function(e)
{
    if ((e.target || e.srcElemet).id === 'foo')
    {
        //function that deals with clicks on foo element
    }
},false);//last param is for bubbling/propagating events 
```

这样，您可以为可能异步添加到 dom 的元素绑定所有事件，而无需检查每个 ajax 调用的每个响应...

让我们更进一步：**委托**。如您所见，在上面的代码片段中，我们正在监听*body*内某处发生的*所有*点击事件。这几乎没有区别：*all clicks*，因此您无需为 101 个元素添加 101 个不同的单击侦听器，只需添加一个即可。您唯一需要做的就是编写处理程序，使其相应地处理每个元素：

 **```
document.body.addEventListener('click',function(e)
{
    e = e || window.event;
    var elem = e.target || e.srcElement;
    switch (true)
    {
        case elem.id === 'foo':
            //either code here or:
            return fooCallback.apply(elem,[e]);//use another function as though it were the handler
        case elem.id.className.match(/\bsomeClass\b/):
            return someClassCallback.apply(elem,[e]);//~= jQuery's $('.someClass').on('click',function);
         case elem.type === 'text':
             //and so on
    }
},false); 
```

很强大的东西。当然，它还有很多，也有缺点（主要是 X 浏览器的东西），但主要好处是：

1.  处理动态添加/删除的元素的事件
2.  *处理所有元素的**所有*事件的单个事件侦听器使您的代码*更*高效，有时会大大提高性能。[这是一个很好的例子，说明什么时候委托是有序的](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)，可悲的是，它也显示了 X-browser 开发给聚会带来的痛苦……**

# ruby - 需要为 Proc 实现 Haskell 的翻转

> ID：13979814
> 
> 赞同：6
> 
> 时间：2012-12-20T20:17:43.140
> 
> 标签：ruby, haskell, functional-programming

Haskell 的 Prelude 有一个有用的函数可以交换函数的参数：http: [//zvon.org/other/haskell/Outputprelude/flip_f.html](http://zvon.org/other/haskell/Outputprelude/flip_f.html)

我需要在 Ruby 中做同样的事情。我不只是定义一个自定义方法，而是想对类进行修补，`Proc`以便我可以`flip`与`Proc#curry`. 就像是

```
f = lambda {|x, y| [x, y]}
g = f.flip.curry.(2) 
```

为 提供一个值`y`。

我不知道如何重新开课`Proc`来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:39:35.303

```
class Proc
  def flip
    lambda { |x, y| self.(y, x) }
  end
end

f = lambda { |x, y| [x, y] }
f.flip.(1, 2)
#=> [2, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:39:32.247

```
class Proc
    def flip
        lambda { |*args| self.curry[*args.reverse] }
    end
end 

plus = lambda {|a, b, c| a + b + c }
p plus['A', 'B', 'C'] # => "ABC"
p plus.flip['A', 'B', 'C'] # => "CBA"
p plus.curry['A']['B', 'C'] # => "ABC"
p plus.curry['A'].flip['B', 'C'] # => "ACB" 
```

**更新：**

```
# intermediate transformations
plus.flip.curry['a']
lambda {|a, b, c| a + b + c }
# flip
lambda {|c, b, a| a + b + c }
# curry 'a', still a Proc because of currying
lambda {|b, c| 'a' + b + c } 
```

# java - 为什么不将嵌套类设为静态？

> ID：13979822
> 
> 赞同：4
> 
> 时间：2012-12-20T20:18:01.543
> 
> 标签：java, nested-class

如果我有一个嵌套类的类，你为什么不希望它是静态的？有没有办法让同一个类的两个实例拥有不同的嵌套类？

例如：

```
class MyClass {  
    public static class myInnerClass {

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:22:21.710

> 你为什么不希望它是静态的

因为我希望它访问父对象的实例数据。

> 有没有办法让同一个类的两个实例拥有不同的嵌套类？

你是什​​么意思`have`？宣布？一个类只有一个声明，您可以在其中列出所有嵌套类。所以，在这种情况下，答案是否定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:21:13.510

以一个`Comparator`或`Runnable`（多线程）实现为例。当您需要一个可以访问当前实例的字段和方法但在该类之外无用的额外类时，这是一个经典示例。但是，静态类在封闭类型之外也很有用。

```
public class EnclosingType
{

    private static final class StaticRunnableImplementation implements Runnable
    {
        private final EnclosingType instance;

        public StaticRunnableImplementation(EnclosingType instance)
        {
            this.instance = instance;
        }

        @Override
        public void run()
        {
            instance.getSomething();
            //getSomething() leads to compile error
        }
    }

    public class NonStaticRunnableImplementation implements Runnable
    {
        @Override
        public void run()
        {
            doStuff();
        }

    }

    public int getSomething()
    {
        return 42;
    } 

    public synchronized void doStuff()
    {
        ;
    }

    public void doSomething()
    {
        Thread t1 = new Thread(new StaticRunnableImplementation(this));
        Thread t2 = new Thread(new NonStaticRunnableImplementation());

        t1.start();
        t2.start();
    }
} 
```

如果嵌套类被声明为静态，则无法访问封闭类型的当前实例的非静态方法和字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T20:29:02.153

我不知道我是否正确理解了您的问题，但是静态内部类与非静态之间的区别在于，第二个内部类需要创建父类的引用。

最好创建静态类，因为可以创建“隐藏的 ciclic 引用”。例如，在 GUI 开发中你会做类似的事情是正常的

```
public class View {
    private Table table;        
    ...
    private void addListeners() {
        this.table.addListener(new TableSelectionListener());
    }

    privte class TableSelectionListener implements Table.SelectionListener {
        @Overrides
        public void selected(SelectionEvent evt) { /* do stuff.*/ }
    }
} 
```

很多程序员没有意识到，但是你现在在`View`and之间有一个循环引用`Table`，因为`SelectionListener`是非静态的，保存了对其父级的引用。所以

> 视图 -> 表 -> TableSelectionListener -> 视图

如果您声明`TableSelectionListener` `static`它只需要创建视图中的“命名空间”，但除此之外，`View`除非您将其保存在字段中，否则它不会保存对任何引用。但是，您将回到第一个问题：P

希望有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T20:22:01.717

一个[非静态嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)是关联的并且可以访问封闭类实例的成员：

> 非静态嵌套类（内部类）可以访问封闭类的其他成员，即使它们被声明为私有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T20:22:29.020

例如，如果您实现`Listener`某种类型的 a，您通常希望在收到事件时调用外部类上的方法。在这种情况下，内部类比具有对外部类实例的显式引用的嵌套类更简单。

这通常用于 GUI 组件。例如（使用实际上不存在的 API）：

```
public class CircleView extends View {
     private final Circle circle = new Circle();
     private final Button button = new Button();

     public CircleView() {
         circle.setColor(Color.RED);
         button.addClickListener(new MyClickListener());
     }

     private toggleColor() {
         circle.setColor(circle.getColor() == Color.RED ? Color.BLUE : Color.RED);
     }

     private class MyClickListener implements ClickListener() {
         @Override
         public void onClick() {
             // Only possible because of the implicit reference:
             toggleColor();
         }
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T20:44:59.777

非静态嵌套类以*隐式/神奇*的方式允许以下内容：

```
class MyClass {  
    public static class MyInnerClass {
        final MyClass myClass_this;
        public MyInnerClass(MyClass parent) {
            // Nested class instance has/keeps access to "parent" object.
            // In a nested non-static class the "parent" is -guaranteed- to be
            // non-null as the nested class can only be created with
            // an instance of the containing class.
            myClass_this = parent;
        }
        public Foo bar() {
            // Use myClass_this
            // Would be available as MyClass.this or implicit resolution in a
            // a nested non-static class.
        }
    }
} 
```

范围访问的规则也有点不同，但上面应该显示它何时可能有用/可取。在这两种情况下，内部类 ( )只有一种*类型*`MyClass$MyInnerClass`，尽管可以有很多实例。

拥有这种非静态嵌套类型行为是否是一件“好事”值得商榷，但它*是*在 Java 中提供的。

然而，**这种“非静态”行为在 Java 中非常有用的一种情况是匿名类（例如事件处理程序或回调），它们表现为非静态嵌套类。**而“不同”构造相同的机制允许访问封闭类型中定义的方法。因此，将匿名类移动到非静态嵌套类只能被视为这种常见习语的扩展，它也允许暴露主格类型。

（C# 没有“非静态”嵌套类的概念，但按照上面的方法很容易模拟它——尽管我认为传递更精细的接口通常会更好。此外，闭包等其他构造最小化需要/使用更多。）

# android - 如何在 UI 中快速显示日志消息？

> ID：13979826
> 
> 赞同：0
> 
> 时间：2012-12-20T20:18:11.670
> 
> 标签：android

我有一个函数 void`log(String s)`将消息打印到`TextView`将其添加到现有文本中。在内部它使用一个`Handle`

确实如此，`setText(getText().toString() + s)`但是当文本变大时，整个 UI 线程都会冻结。

有没有办法快速将日志输出（如`Log.d`）放入 UI 线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:07:01.233

可以这样更新吗？

```
handler.post(new Runnable(){
    public void run() {
        setText(...)
    }
}); 
```

或者为您的日志消息使用 StringBuilder。setText(getText()+new log) 真的很慢。

```
protected StringBuilder logs = new StringBuilder();

void newLogMessage(String msg) { 
    logs.append(msg);
    setText(logs.toString()); 
} 
```

# amazon-s3 - S3 使用原始 last_modified 数据复制数据

> ID：13979827
> 
> 赞同：0
> 
> 时间：2012-12-20T20:18:14.040
> 
> 标签：amazon-s3, boto

[这是这个](https://stackoverflow.com/questions/13966104/does-s3-copy-keep-versioning)问题的后续问题。

由于将 s3 中的数据从一个区域复制到另一个区域不会保留版本信息。建议将所有版本复制到密钥的新区域。从而保留该密钥的所有版本信息。现在的问题是，当我复制版本时将`last_modified`日期更改为复制的日期和时间。如果复制了 100 个版本，那么这 100 个版本将在几秒钟内完成，而最初它们是在一个月内完成的。有没有办法更新`last_modified`时间以保持原始日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:13:38.407

S3 不允许您指定或修改该`Last-Modified`值。文档隐含地表明了这一点，只是从[PUT Object request](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectPUT.html)`Last-Modified`支持的请求标头列表中省略了。AWS 论坛上也[有一个](https://forums.aws.amazon.com/thread.jspa?messageID=209241)关于此主题的主题。

如果您需要保存`Last-Modified`（例如某些 S3 文件同步实用程序所做的），您必须忽略 S3 设置的值并使用您自己的自定义标头，例如`x-amz-meta-last-modified`.

# sql - 如何让 Teradata SQL 助手在编写查询时自动完成我的列

> ID：13979830
> 
> 赞同：1
> 
> 时间：2012-12-20T20:18:23.090
> 
> 标签：sql, teradata

刚刚安装了 Teradata SQL Assistant 13.0，我希望它在构建查询时显示我选择的表中的列列表。

例子：

`SELECT * FROM TABLE1 T WHERE T.`（下拉列表出现在这里）

在这个应用程序中这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:38:57.753

SQL Assistant 13.10 不提供自动完成功能。您可能想查看 Teradata Studio Express 客户端（可在[此处](http://downloads.teradata.com/download/tools/teradata-studio-express)下载）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-13T16:47:08.333

Teradata SQL Assistant 确实提供代码完成，包括使用别名。但是，您将需要 13.11 或更高版本。

Teradata Studio Express 还支持表/视图名称的代码完成，但不支持别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-31T14:18:29.443

假设有人回到这个线程并且您正在运行的版本是 13.11 或更高版本。

添加自动填充/完成/建议下拉的东西-

它在工具 > 选项 > 代码编辑器 > 显示建议中

# sql - Oracle SQL——“不在”缺少一些行？

> ID：13979835
> 
> 赞同：1
> 
> 时间：2012-12-20T20:18:40.687
> 
> 标签：sql, oracle, notin

我有一个非常简单的查询来查找一个表中的一些值，而不是另一个表中的一些值。

```
select * from my_table were my_value in
   ('one','two','hello','blue')
and my_value not in
   (select my_value from my_table_2) 
```

这将返回两行——my_table 中带有“one”和“two”的行。

但是，然后我运行了这个：

```
select * from my_table_2 where my_value in ('one','two') 
```

震惊地发现这在 my_table_2 中返回了两行，值为“一”和“二”。

“不在”中得到了 99% 的正确结果，但随机丢失了一些值。这是什么原因？

编辑：对不起，错字。解决它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T20:32:37.053

我敢打赌 my_table2 在 my_value 列中包含 NULL 值。如果您的列包含 NULL 值，NOT IN 将无法正常工作，请参阅[有关 EXISTS / IN 和 NULL 值的 Techrepublic 文章](http://www.techrepublic.com/article/oracle-tip-understand-how-nulls-affect-in-and-exists/5319615)

在这种情况下，我会使用 NOT EXISTS，应该可以按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:36:31.230

此问题的原因是两个表之间的列类型不同。

my_table 使用的是 varchar2(10)，但 my_table_2 使用的是 char(10)。结果，my_table_2 实际上返回了 my_table_1 中的内容，以及一些空格。有趣的是，例如，即使“apple”是“apple”，从 my_table_2 中选择 my_value，其中 my_value = 'apple' 确实会返回该行。

# ruby-on-rails - 组织铁路路线的更好方法？

> ID：13979836
> 
> 赞同：1
> 
> 时间：2012-12-20T20:18:44.290
> 
> 标签：ruby-on-rails

我只是想知道是否有更好的方法来组织这些铁路路线。也许在一个组？我不熟悉这样的最佳实践。

```
TestApp::Application.routes.draw do
  root :to => 'posts#index'
  resources :posts, :except => :destroy
  match '/posts/page/:page' => 'posts#page'
  match '/posts/delete/:id' => 'posts#delete'
  match '/posts/undelete/:id' => 'posts#undelete'
  match '/posts/hide/:id' => 'posts#hide'
  match '/posts/unhide/:id' => 'posts#unhide'
  match '/help' => 'help#index'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:28:50.517

**是**的，您可以将它们分组到`collection`嵌套在块中的块中`resources :posts`，如下所示

```
resources :posts, :except => :destroy do
  collection do
    match 'page/:page'   => 'posts#page'
    match 'delete/:id'   => 'posts#delete'
    match 'undelete/:id' => 'posts#undelete'
    match 'hide/:id'     => 'posts#hide'
    match 'unhide/:id'   => 'posts#unhide'
  end
end 
```

这些路由虽然不是很 RESTful。我可能会建议以下内容

```
resources :posts, :except => :destroy do
  member do
    get    'page/:page' => 'posts#page'
    delete 'delete'     => 'posts#delete'
    put    'undelete'   => 'posts#undelete'
    put    'hide'       => 'posts#hide'
    put    'unhide'     => 'posts#unhide'
  end
end 
```

这会创建更清晰的路线，同时仍指向相同的控制器/动作。您**将**不得不修改您的应用程序以稍微不同地指向正确的路由，以支持这种更可接受的行为。

```
 GET    /posts/:id/page/:page(.:format)   posts#page
  delete_post DELETE /posts/:id/delete(.:format)       posts#delete
undelete_post PUT    /posts/:id/undelete(.:format)     posts#undelete
    hide_post PUT    /posts/:id/hide(.:format)         posts#hide
  unhide_post PUT    /posts/:id/unhide(.:format)       posts#unhide
        posts GET    /posts(.:format)                  posts#index
              POST   /posts(.:format)                  posts#create
     new_post GET    /posts/new(.:format)              posts#new
    edit_post GET    /posts/:id/edit(.:format)         posts#edit
         post GET    /posts/:id(.:format)              posts#show
              PUT    /posts/:id(.:format)              posts#update 
```

# php - 在 CodeIgniter 中加载 CSS、JS

> ID：13979839
> 
> 赞同：4
> 
> 时间：2012-12-20T20:18:49.253
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手。不知何故，我设置了开发环境并准备好了。但是将 CSS、JS 加载到页面中似乎更加混乱。在搬家之前，我用谷歌搜索了很多，但`base_url`解决方案没有帮助。

***部分视图：***

```
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/jquery-ui-1.8.21.custom.css" rel="stylesheet">
<link href='css/fullcalendar.css' rel='stylesheet'>
<link href='css/fullcalendar.print.css' rel='stylesheet'  media='print'>
<link href='css/opa-icons.css' rel='stylesheet'>
<link href='css/uploadify.css' rel='stylesheet'> 
```

**控制器 ：**

```
public function dashboard()
    {
        $this->load->helper('url');
        $this->load->view('templates/css_styles');
        $this->load->view('templates/top_bar');
        $this->load->view('templates/left_menu');
        $this->load->view('pages/dashboard');
        $this->load->view('templates/footer');
        $this->load->view('templates/js_end');
    }
public function index()
    {
        $this->load->helper(array('form'));
        $this->load->view('login');
    } 
```

**路由.php：**

```
$route['default_controller'] = "welcome/dashboard";
$route['404_override'] = '';
$route['dashboard'] = 'welcome/dashboard'; 
```

如果我将仪表板方法作为默认控制器，则页面加载正常。但是当我将其更改为仅欢迎时，这是一个登录表单并重定向到`welcome/dashboard`，该页面不会加载任何 CSS。只是所有的 HTML 文本。仪表板页面只是纯 HTML，还没有编写 PHP 代码。

请帮助我可能导致这种情况的原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T20:29:20.787

base_url() 有什么问题？

```
<link href="<?php echo base_url('css/bootstrap-responsive.css')?>" rel="stylesheet"> 
```

确保加载 URL 帮助程序，我建议自动加载它：转到 application/config/autoload.php 并将其添加到帮助程序数组中：

```
$autoload['helper'] = array('url'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:35:45.973

您可以使用[`link_tag()`](http://ellislab.com/codeigniter/user-guide/helpers/html_helper.html#link_tag)html_helper.php 中的帮助获取正确的路径。

首先加载助手（我通常自动加载它）

```
$this->load->helper('html'); 
```

然后你可以像这样引用css：

```
echo link_tag('css/bootstrap-responsive.css'); 
```

优点是该函数尝试为 css 文件构建正确的绝对 URL，并自动将 rel 属性设置为样式表，将 type 属性设置为 text/css。

此外，您还应该拥有适用于 Firefox 的 Chrome、Safari 或 Firebug，以便您可以检查代码并查看 CSS 文件是否正在加载或是否找不到。这将有助于调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:23:01.797

确保您的 css 文件夹之前有一个前导斜杠：

```
 <link href="/css/bootstrap-responsive.css" rel="stylesheet"> 
```

并确保文件确实位于您的 Web 根目录下的 /css 中，而不是在应用程序文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T00:02:04.823

首先你需要加载帮助程序 url

```
$this->load->helper('url'); 
```

然后在控制器上

```
$this->data =site_url()."your css file"; 
```

那么在你看来

```
<link rel="stylesheet" type="text/css" href="<?php echo $css; ?>"> 
```

它很简单。你可以查看全文[加载css/js](https://comshar.com/main/article/detail/22/104/0/how-to-load-cssjavascript-conditionally)

# entity-framework - EF CF 生成插入语句很慢

> ID：13979841
> 
> 赞同：0
> 
> 时间：2012-12-20T20:18:53.467
> 
> 标签：entity-framework, ef-code-first, bulkinsert, performance

我有一个从服务（返回 xml）中提取数据的项目，该服务反序列化为对象/实体。

我正在使用 EF CF 并且测试工作正常，直到遇到大量数据，不是太大，只有 150K 记录，我使用 SQL 配置文件检查 SQL 语句，它真的很快，但是有一个巨大的慢问题生成插入语句。

简单来说，数据模型很简单，类Client有很多子对象集（5个）和1个多对多关系。

模型的 ID 由服务提供，因此我清理了一个实体的重复实例（相同的 ID）。

```
var clientList = service.GetAllClients(); // return IEnumerable<Client> // return 10K clients
var filteredList = Client.RemoveDuplicateInstancesSameEntity(clientList); // return IEnumerable<Client>

int cur = 0;
in batch = 100;

while (true)
{
logger.Trace("POINT A : get next batch");
var importSegment = filteredList.Skip(cur).Take(batch).OrderBy(x=> x.Id);
if (!importSegment.Any())
   Break;

logger.Trace("POINT B: Saving to DB");
importSegment.ForEach(c => repository.addClient(c));
logger.Trace("POINT C: calling persist");
repository.persist();
cur = cur + batch;
} 
```

逻辑很简单，将其分成批处理以加快过程。每 100 个客户端创建大约 1000 个插入语句（用于子记录和 1 个多对多表）。

使用分析器和日志记录来分析这一点。在它插入之后

日志始终将 POINT B 显示为最后一步。但我在探查器中还没有看到任何插入语句。然后 2 分钟后，我看到所有插入语句，然后是下一批的 POINT B。又是 2 分钟。

我做错了什么，或者有什么设置或我可以做些什么来改进吗？

插入 1k 记录似乎很快。进程开始时数据库被清除，因此那里没有记录。SQL 缓慢似乎不是问题，而是 EF 生成插入语句？

尽管该项目有效，但速度很慢。当涉及到大块数据时，我想加快速度并更多地了解 EF。或者这是正常的吗？

前 100 个很快，然后越来越慢。似乎是 POINT B 的问题。是否存在太多数据 repo/dbcontext 无法及时处理的问题？

repo 是从 dbcoontext 继承的，而 addClient 很简单

```
dbcontext.Client.Add(client) 
```

非常感谢。

# itext - 签名的 PDF 显示消息“文档的有效性未知”，iText

> ID：13979845
> 
> 赞同：2
> 
> 时间：2012-12-20T20:19:10.643
> 
> 标签：itext, digital-signature

我正在使用 iText 在 PDF 中应用数字签名。数字签名的 PDF 显示类似“文档认证的有效性未知。无法验证作者。至少一个签名有问题”的消息。在顶部。

当我将证书添加到用于创建签名 PDF 的信任身份时，生成的签名 PDF 会显示“已签名且所有签名都有效”。

是否可以通过不向受信任身份添加证书来解决此问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:37:46.427

显示消息有两个原因。

首先，是您使用了自签名证书或其他证书，其证书链不以根证书结尾，受验证应用程序信任。

其次是签名参数设置不正确，Reader 不知道它需要在 Windows 证书存储中查找证书。我不知道如何在 iText 中指定我的意思——在我们的 SecureBlackbox 中有一个属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T13:56:45.800

请阅读[https://itextpdf.com/book/digitalsignatures](https://itextpdf.com/book/digitalsignatures)

第 3.4 节命名为“如何获得绿色复选标记”。

简短版本：如果您想要一个显示绿色复选标记的 PDF 而无需手动安装根证书，您至少需要一个存储在物理设备上的私钥，例如硬件安全模块、USB 令牌或智能卡。

你有这样的钥匙吗？您是否向您的 CA 索要 CDS 或 AATL 证书？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T10:39:38.050

回复：是否可以通过不向受信任的身份添加证书来解决此问题？

**答：不**，除非您切换到由 Adob​​e 信任的证书颁发机构授予的数字签名证书。

这是 Adob​​e 一直存在的问题，因为 Adob​​e Reader 不信任操作系统中的 CA。- 相反，Adobe 有[自己的列表](http://helpx.adobe.com/acrobat/kb/approved-trust-list1.html)。

所以要么：

1.  您会从 Adob​​e 列表中的一家公司获得个人证书。
2.  您在自己的网站上发布组织的根证书并向收件人提供有关如何让 Adob​​e 信任您的说明。（如果您愿意，您的组织可以只有一名成员。）有关此内容的更多信息，请参见下文。
3.  您告诉您的收件人如何单击 Adob​​e 签名工具栏来检查签名证书的详细信息（并忽略来自 Adob​​e 的可怕的默认警告）。

**在湿签名世界**中，有些情况下您只是简单地签署了一些东西，而在其他情况下，您需要提供政府签发的身份证件的副本。不幸的是，在当前的数字签名世界中，好像*每个*签名都需要附有您的驾照副本。这根本不是现实。

一个常见且成功的答案是为组织的所有签名者发布组织的根证书。请参阅[Apple](http://www.apple.com/certificateauthority/)和[Wells Fargo](https://www.wellsfargo.com/com/cps)示例。

您可以使用来自受信任 CA 的证书在受 SSL 保护的页面上发布您的根证书。这将使业务合作伙伴能够放心地相信您组织的根证书确实来自您的组织。

# vba - 我是否正确使用了 isumeric 函数？

> ID：13979848
> 
> 赞同：3
> 
> 时间：2012-12-20T20:19:26.197
> 
> 标签：vba, excel, excel-2010

该程序是将一列数据从累积转换为非累积。在我的工作表上，我有 A1、B1 和 C1，分别带有文本 Non-Cumulative、Cumulative 和 Converted。我在 A1 下方有数字 1 到 10，然后它们在 B1 下方累积相加。C1 是我想将 B 列转换回非累积的地方。

IsNumeric 用于使 C 中的第一行数据等于 B 中的第一行数据。它应该检测到标题高于它正在评估的数字，因此知道不必执行任何计算。对于其余的，它会看到它正在评估的数字之上的数字是一个数字，因此必须进行计算。

我的问题是它不起作用。我认为原因是因为 IsNumeric() 不断返回为假。我应该使用其他功能吗？单元格引用在 IsNumeric 中不起作用吗？

这是程序！

```
Option Explicit

Dim i As Variant

Sub Conversion()

Sheets("Test Sheet").Select

For i = 1 To 10
    If IsNumeric("B" & i) = False Then
        Range("C" & i + 1) = Range("B" & i + 1)
    Else: Range("C" & i + 1) = Range("B" & i + 1) - Range("B" & i - 1)
    End If
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:41:27.007

您编写代码的方式是合乎逻辑的，只是您最初需要的少量语法更改。然而，

*   最好先检查范围是否为空...
*   然后检查该值是否为数字。
*   更好的是，如果您将 Range 设置为 Range 对象并使用`offset`

代码：

```
Option Explicit '-- great that you use explicit declaration :)

Sub Conversion()
  Dim i As Integer '-- integer is good enough
  Dim rngRange as Range

  '-- try not to select anything. And for a cleaner code
  Set rngRange = Sheets("Test Sheet").Range("B1") 

    For i = 1 To 10
      If (rangeRange.Offset(i,0).value) <> "" then '-- check for non-empty
        If IsNumeric(rangeRange.Offset(i,0).value) = False Then
           rangeRange.Offset(i+1,1) = rangeRange.Offset(i+1,0)
        Else
           rangeRange.Offset(i+1,1) = rangeRange.Offset(i+1,0) - rangeRange.Offset(i-1,0)
        End If
      End if
    Next i '-- loop
End Sub 
```

* * *

**为了使您的代码更加动态：**

*   另一个建议，您可以简单地将您需要验证`Application.WorkSheetFunction.Transpose()`的全部内容放入一个`B column range``variant array`
*   处理数组并`Transpose`返回到具有 B 和 C 列的范围。
*   通过这样做，您可以手动省略循环大小的设置，但使用数组的绑定来设置它；`Lower`）`Upper`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:24:41.137

您需要检查 B i 的范围是否是数字，而不是字符串“B”& i，而不是选择工作表，只需使用父标识符，例如：

```
sheets("sheet1").range("B" & i) 
```

这将帮助您避免代码中的错误

```
For i = 1 To 10
    If IsNumeric(sheets("test sheet").range("B" & i).value) = False Then
        Range("C" & i + 1) = Range("B" & i + 1)
    Else: Range("C" & i + 1) = Range("B" & i + 1) - Range("B" & i - 1)
    End If
Next 
```

# ruby-on-rails - 查找 Dead Rails 代码

> ID：13979850
> 
> 赞同：12
> 
> 时间：2012-12-20T20:19:29.640
> 
> 标签：ruby-on-rails, dead-code

什么是找到不再被调用的方法的好方法？我正在重构一个大型 Rails 应用程序，你能找到的最糟糕的事情是不再使用的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T20:48:15.440

这是一个棘手的问题，没有一个简单的、永远正确的答案。一些开始的地方包括：

1.  [使用 rcov 将未使用的代码扫入垃圾箱](http://robots.thoughtbot.com/post/2941220520/cleaning-up-with-rcov)
2.  [性能测试 Ruby on Rails 应用程序](https://guides.rubyonrails.org/v2.3/performance_testing.html)
3.  [在 Rails 应用程序中查找未使用的代码](https://stackoverflow.com/questions/9735307/find-unused-code-in-a-rails-app)

最大的问题是未使用的代码和无法访问的代码不是一回事。仅仅因为代码没有在生产中经常使用并不意味着它是应该被删除的死代码。它的存在可能是有原因的——只是不是经常出现的原因。

# jquery - jquery背景色rgb条件错误

> ID：13979853
> 
> 赞同：0
> 
> 时间：2012-12-20T20:19:41.577
> 
> 标签：jquery, css, jquery-animate, background-color

我已经测试了我的其余代码并且没问题，但在这里不起作用。

这是代码中有错误或其他东西的部分。

```
if(bgc.css("background-color") == "rgb(38,64,163)") {
    bgc.animate({backgroundColor:"rgb(134,210,239)"},800, function() {
        $previousAnchor = $anchor,
        $anchor.fadeIn(fadetime);
    });
} else if(bgc.css("background-color") == "rgb(134,210,239)") {
    bgc.animate({backgroundColor:"rgb(38,64,163)"},800, function() {
        $previousAnchor = $anchor,
        $anchor.fadeIn(fadetime);
    });
} 
```

注意 "$previousAnchor" "$anchor" 和 "bgc" 是变量。我已经调查了所有这些代码，并且 Jquery 的“backgroundColor”动画中一定存在问题，但我不知道如何解决它。

**编辑：**

我修复了 if 语句，像这样将空格放在 RGB 代码中

```
if(bgc.css("background-color") == "rgb(38, 64, 163)") 
```

现在它进入了内部，但动画还没有工作。它什么也不做，继续回调函数的其余部分。

编辑解决

对于所有对背景颜色动画 jquery 有问题的人，您需要这个： [github.com](https://github.com/jquery/jquery-color)

**您需要一个名为 jquery.color.js 的插件**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:01:14.240

添加以下JS（jQuery[颜色插件](http://github.com/jquery/jquery-color)），（缩小版从[这里](https://stackoverflow.com/a/2302005/993915)）

```
(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,e){d.fx.step[e]=function(g){if(!g.colorInit){g.start=c(g.elem,e);g.end=b(g.end);g.colorInit=true}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(f){var e;if(f&&f.constructor==Array&&f.length==3){return f}if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}if(e=/rgba\(0, 0, 0, 0\)/.exec(f)){return a.transparent}return a[d.trim(f).toLowerCase()]}function c(g,e){var f;do{f=d.css(g,e);if(f!=""&&f!="transparent"||d.nodeName(g,"body")){break}e="backgroundColor"}while(g=g.parentNode);return b(f)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]}})(jQuery); 
```

测试示例：

```
var element = $("#test");
$('#test').click(function() {
    if (element.css("background-color")==="rgba(0, 0, 0, 1)") {
        element.animate({ backgroundColor: "blue" }, 'fast');
    }else{
        element.animate({ backgroundColor: "red" }, 'fast');
    }
});

​ 
```

这是一个小提琴：http: **[//jsfiddle.net/GMNV9/1/](http://jsfiddle.net/GMNV9/1/)**

# sql - 检查新行日期是否与表中现有日期重叠的过程

> ID：13979854
> 
> 赞同：1
> 
> 时间：2012-12-20T20:19:43.337
> 
> 标签：sql, oracle, plsql, oracle11g

我正在尝试编写一个程序来检查给定的参数（日期）是否位于表中的任何现有日期之间。如果不插入新行。

```
CREATE OR REPLACE PROCEDURE test(date1 IN DATE, date2 IN DATE) AS 
  ddate1 DATE;
  ddate2 DATE;
  quer VARCHAR2(50);
BEGIN 
  SELECT fdate, tdate INTO ddate1, ddate2 FROM dataHolder; 
  IF (ddate1 < date1) AND (ddate2 > date2) THEN
    quer := 'invalid'; 
  ELSE 
    INSERT INTO dataHolder VALUES (date1, date2);
    quer := 'success';
  END IF; 
  DBMS_OUTPUT.PUT_LINE(quer); 
END;
/ 
```

我已经尝试过这样的事情，但是在执行时我得到了这个错误：

```
ORA-01422: exact fetch returns more than requested number of rows 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:51:48.727

您收到该错误是因为您的 select 语句返回多条记录。为了简化过程，您可以使用`merge`语句并重写您的过程，如下所示：

```
CREATE OR REPLACE PROCEDURE test(date1 IN DATE, date2 IN DATE) AS
BEGIN
  merge into Dataholder dh
  using dual
     on ((date1 < dh.fdate) and (date2 < dh.tdate))
  when not matched then
    insert (dh.fdate, dh.tdate)
      values(date1, date2);
  if sql%rowcount > 0
  then
    dbms_output.put_line('success');
  else
    dbms_output.put_line('invalid');
  end if;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:52:05.347

您的 select 语句获取的不仅仅是记录，而您的代码只需要一个，因为您正在获取单值变量。您可以使用 BULK COLLECT 并将所有日期收集到日期集合中，但我认为您可以使用以下代码对其进行改进：

```
CREATE OR REPLACE PROCEDURE test(date1 IN DATE, date2 IN DATE) AS 
  ddate1 DATE;
  ddate2 DATE;
  invalidRecords NUMBER := 0;
  quer VARCHAR2(50);
BEGIN
   SELECT COUNT(1) INTO invalidRecords FROM dataHolder WHERE fdate < date1 AND tdate > date2; 

   IF (invalidRecords > 0) THEN
     quer := 'invalid'; 
   ELSE
     INSERT INTO dataHolder VALUES (date1, date2);
     quer := 'success';
   END IF;

   DBMS_OUTPUT.PUT_LINE(quer); 
END;
/ 
```

由于 COUNT(1) 将始终只返回一条记录，因此它永远不会抛出 ORA-01422 错误。此外，它总是会返回数据，因此您无需担心 NO_DATA_FOUND，因为如果没有无效记录，则会获取值 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:43:36.957

Nuno Guerreiro 回答的一些小优化

```
SELECT COUNT(1) INTO invalidRecords 
FROM dual 
WHERE exists 
  (SELECT 1 FROM dataHolder WHERE fdate < date1 AND tdate > date2); 
```

它将允许不计数。

# data-structures - algorithm - 如何使用来自一个文件的数据作为从不同文件中搜索/删除的标准？

> ID：13979857
> 
> 赞同：0
> 
> 时间：2012-12-20T20:19:44.603
> 
> 标签：data-structures, csv

我有两个不同的管道分隔数据文件。一个比另一个大。我正在尝试根据小文件（文件 B）中包含的数据，有选择地从大文件（我们将其称为文件 A）中删除数据。文件 A 包含所有数据，文件 B 仅包含文件 A 中的一部分数据。

我想要一个函数或现有程序，它从文件 A 中删除文件 B 中包含的所有数据。我想到了一个这样的函数：

```
Pseudo-code:

    while !eof(fileB) {
        criteria = readLine(fileB);
        lineToRemove = searchForLine(criteria, fileA);
        deleteLine(lineToRemove, fileA);
    } 
```

但是，该解决方案对我来说似乎效率很低。文件 A 有 23,000 行，文件 B 有 17,000 行。文件 B 中包含的数据实际上分散在文件 A 中。

如果有一个程序可以做到这一点，我更喜欢它而不是代码。我对代码也不挑剔。C++ 是我的强项，但这个数据文件将在不久的将来转换为 SQL 数据库，所以我也擅长使用 SQL/PHP 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:48:54.520

无论数据库是什么，都将这两个表加载到 SQL 中。进行这种操作是数据库的设计目的。然后就可以执行命令了：

```
delete from A
    where A.criteria = (select B.criteria from B) 
```

但是，我会将数据放入暂存表中，然后在 SQL 中创建和填充我想要的数据。就像是：

```
create table A ( . . . )

insert into A
    select *
    from StagingA
    where A.criteria not in (select B.criteria from StagingB) 
```

（这里我使用了“*”和一个没有列列表的插入。在实践中，你应该有列的列表。）

# node.js - gyp - 如何指定链接库风格

> ID：13979860
> 
> 赞同：13
> 
> 时间：2012-12-20T20:20:13.213
> 
> 标签：node.js, gyp, node-gyp

我正在编写一个本机节点模块，我希望能够在发布和调试版本中构建它。

节点模块链接到另一个库，该库在两个不同的目录中具有调试和发布版本。

现在这是我卡住的地方 - 我如何为正在构建的当前配置指定库目录？

我试过在configurations.debug.link_settings键中设置它，但我得到错误：'在调试配置中不允许link_settings，在目标binding.gyp中找到

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T17:43:49.970

显然，这在跨平台的方式中是不可能的。所以希望这可以节省你几个小时的实验时间。

这是一个为 Mac 和 Windows 构建插件的 gyp 文件。

```
//This example assumes you have an external library 'thelibrary', located in 
//./external/thelibrary
//With the two flavors, debug and release in lib/debug and lib/release
{
    "targets": [
        {
            "target_name": "addon",
            "sources": [
                "src/addon.cpp",
                "src/expose_the_library.cpp"
            ],
            "include_dirs": [
                "external/thelibrary/include"
            ],
            "cflags!": [
                "-fno-exceptions"
            ],
            "cflags_cc!": [
                "-fno-exceptions"
            ],
            "conditions": [
                [
                    "OS=='mac'",
                    {
                        "defines": [
                            "__MACOSX_CORE__"
                        ],
                        "architecture": "i386",
                        "xcode_settings": {
                            "GCC_ENABLE_CPP_EXCEPTIONS": "YES"
                        },
                        "link_settings": {
                            "libraries": [
                                "-lthelibrary",
                                "-framework",   
                                "IOBluetooth" //this is how you use a framework on OSX
                            ],
                            "configurations": {
                                "Debug": {
                                    "xcode_settings": {
                                        "OTHER_LDFLAGS": [
                                            "-Lexternal/thelibrary/lib/debug"
                                        ]
                                    }
                                },
                                "Release": {
                                    "xcode_settings": {
                                        "OTHER_LDFLAGS": [
                                            "-Lexternal/thelibrary/lib/release"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                ],
                [
                    "OS=='win'",
                    {
                        "link_settings": {
                            "libraries": [
                                "-lthelibrary.lib",
                            ]
                        },
                        "configurations": {
                            "Debug": {
                                "msvs_settings": {
                                    "VCCLCompilerTool": {
                                        "ExceptionHandling": "0",
                                        "AdditionalOptions": [
                                            "/MP /EHsc"
                                        ]
                                    },
                                    "VCLibrarianTool": {
                                        "AdditionalOptions": [
                                            "/LTCG"
                                        ]
                                    },
                                    "VCLinkerTool": {
                                        "LinkTimeCodeGeneration": 1,
                                        "LinkIncremental": 1,
                                        "AdditionalLibraryDirectories": [
                                            "../external/thelibrary/lib/debug"
                                        ]
                                    }
                                }
                            },
                            "Release": {
                                "msvs_settings": {
                                    "VCCLCompilerTool": {
                                        "RuntimeLibrary": 0,
                                        "Optimization": 3,
                                        "FavorSizeOrSpeed": 1,
                                        "InlineFunctionExpansion": 2,
                                        "WholeProgramOptimization": "true",
                                        "OmitFramePointers": "true",
                                        "EnableFunctionLevelLinking": "true",
                                        "EnableIntrinsicFunctions": "true",
                                        "RuntimeTypeInfo": "false",
                                        "ExceptionHandling": "0",
                                        "AdditionalOptions": [
                                            "/MP /EHsc"
                                        ]
                                    },
                                    "VCLibrarianTool": {
                                        "AdditionalOptions": [
                                            "/LTCG"
                                        ]
                                    },
                                    "VCLinkerTool": {
                                        "LinkTimeCodeGeneration": 1,
                                        "OptimizeReferences": 2,
                                        "EnableCOMDATFolding": 2,
                                        "LinkIncremental": 1,
                                        "AdditionalLibraryDirectories": [
                                            "../external/thelibrary/lib/release"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                ]
            ]
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T09:49:32.987

I faced this issue as well and it seems that if you pass --format=make-linux (for example) on the command line it will generate for the 'make' format but it will explicitly use the 'linux' flavor.

# algorithm - 从给定的二维点列表中找到所有凸四边形的算法

> ID：13979861
> 
> 赞同：7
> 
> 时间：2012-12-20T20:20:17.630
> 
> 标签：algorithm, geometry, computational-geometry

我必须编写一个程序来从给定的二维点列表中找到所有凸四边形。我已经尝试过使用矢量叉积，但它似乎不是一个正确的解决方案。

也许有一些有效的算法可以解决这个问题，但我找不到。

这是一个带有输入和输出的示例：

**输入**

```
点数：
6

```

```
点坐标（x，y）：
0 0
0 1
1 0
1 1
2 0
2 1

```

**输出**

```
凸四边形的数量：
9

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T22:17:12.670

一个四边形是凸的，如果它的对角线相交。相反，如果两条线段相交，则它们的四个端点构成一个凸四边形。

![左边是凸四边形，右边是非凸四边形](../Images/00642fbe3628ace86b56a894753d3d7e.png)

每对点都给你一条线段，两条线段之间的每个交点对应一个凸四边形。

您可以使用比较所有线段对的朴素算法或[Bentley-Ottmann 算法找到](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)[交点](https://stackoverflow.com/a/565282/68063)。前者取 O( *n* ⁴ )；和后者 O(( *n* ² + *q* ) log *n* ) （其中*q*是凸四边形的数量）。在最坏的情况下*q* = Θ( *n* ⁴ )——考虑一个圆上的*n*个点——所以 Bentley-Ottmann 并不总是更快。

 ***这是 Python 中的原始版本：

```
import numpy as np
from itertools import combinations

def intersection(s1, s2):
    """
    Return the intersection point of line segments `s1` and `s2`, or
    None if they do not intersect.
    """
    p, r = s1[0], s1[1] - s1[0]
    q, s = s2[0], s2[1] - s2[0]
    rxs = float(np.cross(r, s))
    if rxs == 0: return None
    t = np.cross(q - p, s) / rxs
    u = np.cross(q - p, r) / rxs
    if 0 < t < 1 and 0 < u < 1:
        return p + t * r
    return None

def convex_quadrilaterals(points):
    """
    Generate the convex quadrilaterals among `points`.
    """
    segments = combinations(points, 2)
    for s1, s2 in combinations(segments, 2):
        if intersection(s1, s2) != None:
            yield s1, s2 
```

并运行一个示例：

```
>>> points = map(np.array, [(0, 0), (0, 1), (1, 0), (1, 1), (2, 0), (2, 1)])
>>> len(list(convex_quadrilaterals(points)))
9 
```***

# arrays - JSON 编码对象数组

> ID：13979864
> 
> 赞同：0
> 
> 时间：2012-12-20T20:20:25.600
> 
> 标签：arrays, json, object, socket.io

我有一个像这样的对象数组：

```
[{}, {}, {}] 
```

我需要通过 Socket.io 传递这个数组。Socket.io 将数组转换为 JSON，我不断将循环结构转换为 JSON 错误。

这是我当前的代码：

```
for (var i = 0; i < 5; i++) {
    num = randRange(0, cards[type].length);
    playerCards.push(cards[type][num]);
}
socket.emit('updateCards', playerCards); 
```

有谁知道解决这个问题的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:47:17.313

如果您尝试执行以下操作，您将看到相同的错误：

```
for (var i = 0; i < 5; i++) {

    num = randRange(0, cards[type].length);
    playerCards.push(cards[type][num]);
    JSON.stringify(cards[type][num]) 
}

//socket.emit('updateCards', playerCards); 
```

tag 属性可能是罪魁祸首。为了使 JSON 序列化程序工作，您不能在被序列化的对象中有任何循环引用。一种选择是从标签对象中提取所需的信息并创建一个自定义对象。

# java - 命令行 Ant 无法识别

> ID：13979871
> 
> 赞同：2
> 
> 时间：2012-12-20T20:20:54.243
> 
> 标签：java, android, windows, eclipse, ant

** 编辑 ** 我已经在[这篇](https://stackoverflow.com/questions/13979209/environment-variable-errors-not-recognized-as-an-internal-or-external-command)文章中总结了我发现的这个问题的解决方案。

我正在将 Android 安装到 Eclipse 中，我已经在 J​​ava 中使用了 2 年。作为其中的一部分，我安装了 Ant 并升级到 JDK1.7.0

根据[Cordova 入门指南](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)，我现在通过键入 java 来运行命令行测试以查看它是否被识别，然后是 ant。

*   java 被识别（感谢 Nikolay Ivanov 在上一个问题中的帮助）
*   蚂蚁无法识别任何东西

我将 ANT_HOME 设置为“c:\Developer\apache-ant-1.8.4”
我的 PATH 变量包括“%ANT_HOME%\lib”。
我也试过 %ANT_HOME%\bin 和 %ANT_HOME%。
ant.jar 文件位于 c:\Developer\apache-ant-1.8.4\lib

但是命令行上的“ant”仍然无法识别。

FWIW，我现在每次更改环境变量时都会重新启动命令行界面......

** 编辑，我已从构建路径中删除 %ANT_HOME%\bin 并将其替换为“C:\Developer\apache-ant-1.8.4\bin”。

我现在有一个新错误“Buildfile：build.xml 不存在！构建失败”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:22:05.647

路径应包括 %ANT_HOME%\bin 但不包括 %ANT_HOME%\lib。

# javascript - setInterval 不适用于特定功能

> ID：13979873
> 
> 赞同：0
> 
> 时间：2012-12-20T20:20:58.393
> 
> 标签：javascript, timer, setinterval

我有一个脚本，可以在浏览器的右上角创建一个带有当前日期和时间的栏。我试图每三十秒更新一次，以便它保持实时，而不仅仅是页面加载的时间。您会看到我使用 set_time() 函数 onload 创建了时间条，然后创建了一个 setInterval 来调用 timer()，而 timer() 又通过再次调用 set_time() 函数来更新时间。计时器显然正在触发，因为每 4 秒我都会收到一个带有“hi”的警报框（来自 timer() 函数），但是当它应该在此之后调用 set_time() 时它不起作用。每次触发计时器时，我都应该收到带有“设置时间”的警报（位于 set_time() 函数的末尾），但我没有。有人可以帮忙吗？

```
window.onload = function(){
    set_time();
    window.setInterval(timer, 4000);
};

function timer(){
    alert('hi');
    set_time();
}

function set_time(){

    //create date object to manipulate
    var d = new Date();

    //current day of the week
    var d_names= new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");
    curr_day = d.getDay();

    //current date
    var m_names = new Array("January", "February", "March", 
    "April", "May", "June", "July", "August", "September", 
    "October", "November", "December");

    var curr_date = d.getDate();
    var curr_month = d.getMonth();
    var curr_year = d.getFullYear();

    //current Time
    var a_p = "";

    var curr_hour = d.getHours();
    if (curr_hour < 12)
       {
       a_p = "a.m.";
       }
    else
       {
       a_p = "p.m.";
       }
    if (curr_hour == 0)
       {
       curr_hour = 12;
       }
    if (curr_hour > 12)
       {
       curr_hour = curr_hour - 12;
       }

    var curr_min = d.getMinutes();
    curr_min = curr_min + "";

    if (curr_min.length == 1)
       {
       curr_min = "0" + curr_min;
       }

    element = document.getElementById('dateTime');
    if(element){
    //if dateDiv already exists, update contents
    dateDiv.innerHTML = '';
    dateDiv.innerHTML = '<p>' + d_names[curr_day] + ', ' + m_names[curr_month] + ' ' + curr_date + ', ' + curr_year + ' | ' + '<strong>' + curr_hour + ':' + curr_min + ' ' + a_p + '</strong>' + '</p>';
}
else{
    //else create new dateDiv and append it to DOM body
    var dateDiv = document.createElement('div');
    dateDiv.innerHTML = '<p>' + d_names[curr_day] + ', ' + m_names[curr_month] + ' ' + curr_date + ', ' + curr_year + ' | ' + '<strong>' + curr_hour + ':' + curr_min + ' ' + a_p + '</strong>' + '</p>';
        dateDiv.id = 'dateTime';
        document.body.appendChild(dateDiv);
    }

    alert('set time');

    //setTimeout("set_time()", 3000);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:27:26.250

您将`#dateTime`div分配给`element`变量，甚至检查它的存在，但是当您确认`element`存在时，您将使用`dateDiv`变量。`innerHTML`那个是未定义的，并在设置其属性时引发异常；您应该能够在浏览器的错误控制台中看到它。

请改用此代码：

```
var element = document.getElementById('dateTime');
if (!element) {
    element = document.createElement('div');
    document.body.appendChild(element);
}
element.innerHTML = '<p>' + d_names[curr_day] + ', ' + m_names[curr_month] + ' ' + curr_date + ', ' + curr_year + ' | ' + '<strong>' + curr_hour + ':' + curr_min + ' ' + a_p + '</strong>' + '</p>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:37:06.050

如果您查看错误控制台，您会看到 javascript 在此处抛出“dateDiv 未定义”错误（就在 之前`else`）： `dateDiv.innerHTML = '';`

为避免这种情况（并使您的脚本正常工作），请执行以下操作：

1.  将 div 层编码到您的 HTML 中（不要使用 javascript 创建它），如下所示： `<div id="dateTime"></div>`

2.  删除最后的`else`块（由于第 1 步，它现在是多余的）

3.  将此添加到 set_time() 的顶部： `var dateDiv = document.getElementById( 'dateTime' );`

# c++ - 像这样“绘制”的 UI 可以在 MFC 中完成吗

> ID：13979874
> 
> 赞同：1
> 
> 时间：2012-12-20T20:21:02.043
> 
> 标签：c++, user-interface, mfc, wtl

我最近发现了一个轻量级的 IM，称为 WTW。它看起来像这样：

[![屏幕](../Images/0abb8eb72af6b77f4f65f67559aa42c5.png)](https://i.stack.imgur.com/6llLn.png)
[（来源：[download.wtw.im](http://download.wtw.im/images/image1.png)）]

现在，我想知道这种接口是否可以在普通的 MFC 中完成。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:23:13.070

是的，他们可以。MFC 支持[自定义控件](http://msdn.microsoft.com/en-us/library/bk2h3c6w%28v=vs.80%29.aspx)和绘图，因此您可以制作任何您选择的用户界面。

虽然使用其他技术这可能更简单，但在 MFC中绝对*可以。*

# qt - Qt Creator 的编译器配置

> ID：13979885
> 
> 赞同：7
> 
> 时间：2012-12-20T20:21:37.283
> 
> 标签：qt, mingw, qt-creator

我是 Qt 及其 IDE Qt Creator 的新手，所以请原谅我的无知。当我尝试编译我的代码时，我得到了异常

> “Qt Creator 需要设置编译器来构建。在套件选项中配置编译器”。

我已经安装了 MingGW 来编译 C++ 代码。但是，我在为 Qt Creator 配置它时遇到问题。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T21:59:51.937

我怀疑您使用的是新的 5.0 Qt。这对我来说也需要一些刺激。

如果您查看，`Settings > Build & Run > Kits`您应该会看到一个自动检测到的条目，该条目可能前面有一个感叹号并且不可编辑。忽略这个。

*   添加新套件
*   给它一个名字，设置“Qt 版本”并选择一个编译器。（编译器应该已经被自动检测到了。如果你没有看到任何编译器，你必须手动设置至少一个）
*   单击“设为默认值”按钮。（您*可能*也必须修改项目构建设置才能使用新套件）

可能有更好的方法，但我不知道。并且您可能应该使用 4.x，直到 5 退出测试版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-28T08:00:02.267

我也遇到了同样的问题，所以我做的是这样的：

```
sudo apt-get install g++ 
sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev 
```

然后我关闭了 QT Creator，重新启动它，它工作了。

我不知道以上两个中的哪一个使它起作用，但是它起作用了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:39:22.850

您正在使用 Qt Creator 2.6.x，因为它们是唯一有工具包的。

请转到工具>选项>构建和运行>编译器并在那里添加你的mingw编译器。您需要在 mingw 安装中将创建者指向“g++”。

然后转到“工具包”选项卡并单击创建者应该为您创建的桌面工具包。在细节中有一个字段叫做编译器（或者工具链，不记得了）。在那里选择你的 mingw 编译器。检查调试器字段。如果它是空的或使用作为 mingw 一部分的 gdb 调试器：从[http://builds.qt-project.org/](http://builds.qt-project.org/)获取一个调试器，安装它并将创建者指向那个调试器。众所周知，作为 mingw 的一部分提供的调试器不能与创建者很好地配合使用。

不要使用诺基亚 Qt SDK：那里的一切现在都已经过时了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T21:49:02.507

这只是解决您的问题的起点，但 Qt Creator 首选项在“构建和运行”区域中有设置，您可以在其中定义构建工具链的位置：编译器、要构建的 Qt 版本等。对于 mingw 你d 必须将正确的字段指向 g++ 的位置，对于 Qt 版本，指向 qmake 的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-19T12:06:00.403

并不总是最后一个版本更好。如果有人正在学习 Qt 来实现生产解决方案，那么使用 Qt 版本 5 不是一个好主意（请参阅 Qt5 更改日志）。如果你想学习 Qt 编程，我认为诺基亚 SDK 是一个很好的起点，因为你只需将它作为另一个 Windows 软件安装，然后开始编码。

使用 linux 是另一个很好的起点，因为您将拥有所有的开发环境以及一些 apt-get 命令。

当我开始编写 Qt 时，我浪费了很多时间来获得一个使用 QtCreator 的完整环境，而且我知道并不是每个人都有时间去做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-25T15:20:01.700

我正在使用基于 Qt 5.5.1 的 Qt Creator 3.5.1。每次我必须配置开发系统时，错误“套件中没有设置编译器”一直是个问题。对我有用的解决方案是选择工具/选项/编译器并添加编译器。在我的例子中，GCC 编译器的名称为：g++，编译器路径：/usr/bin/g++。诀窍是在尝试添加 Kit 之前添加编译器。如果我在添加编译器之前添加工具包，我将永远无法将编译器添加到工具包中。如果您遇到此问题，请删除 Kit，添加编译器，然后添加 Kit。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-20T21:53:25.243

在您的问题中，您必须向我们提供有关您的问题的更多信息，例如您使用的软件版本。

关于您的问题，我认为，对您（作为初学者）来说非常好的想法是使用全包式 QtSDK（[链接](http://www.developer.nokia.com/Develop/Qt/Tools/)，需要注册）。QtSDK 1.2.1 中有现成的 QtCreator、MinGW 和一点点旧的 Qt Libs。所以，你根本不需要配置它。

希望，它会有所帮助。祝你好运！

# javascript - 无法在javascript中将对象属性复制到另一个

> ID：13979887
> 
> 赞同：2
> 
> 时间：2012-12-20T20:21:45.850
> 
> 标签：javascript, object, properties, copying

这应该很简单，但我无法将一个对象的属性复制到另一个对象。

```
var tableFormatting = {
    table: {
        style: {
            width: "100px",
            height: "100px"
        },
        border: "1px"
    }
    //similar code for tbody, tr, td  
};
var table = document.createElement('table');
for (var p in tableFormatting.table)
table[p] = tableFormatting.table[p];
alert(table.style.width); //shows nothing. can't access it  
alert(typeof(table.style.width)); //shows string, so i know it was copied or has a reference
alert(table.border); //shows 1px. this one is copied and accessible 
```

为什么不显示样式属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:24:25.523

你需要深拷贝它们

```
function copyValues( dst, src ) {
    for( var key in src ) {
        var value = src[key];
        if( typeof value == "object" ) {
            copyValues( dst[key], value );
        }
        else {
            dst[key] = value;
        }
    }
}

copyValues( table, tableFormatting.table ); 
```

见[http://jsfiddle.net/RpJKH/](http://jsfiddle.net/RpJKH/)

否则，发生的情况是手动等效于：

```
 table.style = obj.style 
```

当然，这没有任何作用，因为`.style`它是只读的。

# c# - 网络服务调用有问题

> ID：13979890
> 
> 赞同：-2
> 
> 时间：2012-12-20T20:22:00.890
> 
> 标签：c#, xml, web-services, http, httpwebrequest

我试图让剧院和电影出现在我的 txtResults.Text 框中。

这是我现在的代码...

```
 MovieInformation MI = new MovieInformation();

        int rad = int.Parse(txtRadius.Text);

        txtResults.Text = MI.GetTheatersAndMovies(txtZip.Text, rad); 
```

错误是：错误无法将类型“WebShowTimes.movi​​es.Theater[]”隐式转换为“字符串”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:25:06.623

编译器说您没有传递服务预期的参数。

我怀疑您的服务会在某个邮政编码附近的区域（半径）内搜索剧院。

你有没有尝试过

```
 txtResults.Text = MI.GetTheatersAndMovies(txtZip.Text,txtRadius.Text); 
```

编辑：看到新的错误消息，现在很清楚该方法返回一个数组`WebShowTimes.movies.Theater[]`

当然这不是字符串，不能用作 TextBox.Text 属性的值，因此您需要一个循环来读取每个返回的 Theatre 并获取您需要在字符串中显示的属性

例如：

```
WebShowTimes.movies.Theater[] theathers = MI.GetTheatersAndMovies(txtZip.Text, rad);
foreach(WebShowTimes.movies.Theater t in theaters)
{
    txtResults.Text += t.Name + ", " + t.Address + "\r\n";
} 
```

假设 txtResult 是一个多行文本框，其高度足以显示服务返回的所有剧院。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:25:44.663

如果您需要更详细的帮助，请发布 MovieInformation 的代码，但编译器只是告诉您您的`MovieInformation`服务没有调用的方法，该方法`GetTheatersAndMovies`采用单个字符串参数。

**编辑：**

根据您在评论中发布的 Web 服务 URL，您应该这样调用 Web 服务：

```
 MI.GetTheatersAndMovies(txtZip.Text,txtRadius.Text); 
```

您将收到一个如下`Theater`所示的对象数组：

```
<Theater>
      <Name>string</Name>
      <Address>string</Address>
      <Movies>
        <Movie xsi:nil="true" />
        <Movie xsi:nil="true" />
      </Movies>
</Theater> 
```

**更新 2**你应该这样做：

```
var result = MI.GetTheatersAndMovies(txtZip.Text, rad);
StringBuilder sb  = new StringBuilder();
foreach(var item in result)
{
     sb.Append(string.Format("Theater Name: {0}",item.Name));
     sb.Append(string.Format("Address: {0}",item.Address));
     foreach (var movie in item.Movies)
     {
          sb.Append(string.Format("Movie: {0}",movie.Name));
          sb.Append(string.Format("Rating: {0}",movie.Rating));
     }
}

txtResults.Text = sb.ToString(); 
```

[您可以在此处查看 Web 服务](http://www.ignyte.com/WebServices/Ignyte.WhatsShowing.Webservice/MovieFunctions.asmx?WSDL)的 WSDL ，它将准确地告诉您 Web 服务返回的每个对象的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:24:58.717

显然，您正在调用传递 1 个参数的 web 方法，并且没有采用 1 个参数的重载。您可能需要创建一个接受该参数的新方法，然后正确使用它。或者只是删除它正在传递的参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T21:49:44.250

返回的结果是一个数组，因此以适当的类型获取它，然后将其循环以逐一获取电影，例如：

```
MI.Theaters  th=MI.GetTheatersAndMovies(txtZip.Text, rad);
 foreach(Mi.movie in th)
   {
     string moviname=mi.movie.name;
   } 
```

希望这会给你这个想法。

# c++ - std::enable_if 字符串/字符类型

> ID：13979895
> 
> 赞同：2
> 
> 时间：2012-12-20T20:22:07.143
> 
> 标签：c++, c++11

> **可能重复：**
> [“我的 SFINAE 发生了什么”redux：条件模板类成员？](https://stackoverflow.com/questions/11531989/what-happened-to-my-sfinae-redux-conditional-template-class-members)

为什么我不能将其他参数传递给我的模板类？仅当传递的类型是文字类型时，我才尝试启用特定参数。如果不是，则接受其他类型，但不要启用区分大小写的参数。

为什么下面不编译？

```
#include <iostream>
#include <type_traits>

template<typename T>
struct is_literal
{
   enum{value = false};
};

template<>
struct is_literal<char>
{
   enum{value = true};
};

template<>
struct is_literal<char*>
{
   enum{value = true};
};

template<>
struct is_literal<const char*>
{
   enum{value = true};
};

template<typename Char, typename Traits, typename Alloc>
struct is_literal<std::basic_string<Char, Traits, Alloc>>
{
   enum
   {
      value = true
   };
};

template<typename T>
class Test
{
    public:
        bool Contains(T DataType, typename std::enable_if<is_literal<T>::value, bool>::type  CaseSensitive = true);
};

template<typename T>
bool Test<T>::Contains(T DataType, typename std::enable_if<is_literal<T>::value, bool>::type CaseSensitive)
{
    return true;
}

int main()
{
    Test<int> F;    //This line gives errors.. It gives none if I pass char, char*, const char*, std::string.
    F.Contains(1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:30:54.507

SFINAE 只能在重载解决期间执行替换时发生。这意味着您*必须*有一个函数模板。在这种情况下，您在类模板中有一个非模板函数。那是行不通的。您可以添加默认模板参数来解决此问题。

```
template <typename U = T>
bool Contains(U DataType, typename std::enable_if<is_literal<U>::value, bool>::type  CaseSensitive = true); 
```

# android - 如何在edittext中添加许多字符串并为每个字符串设置背景图像？

> ID：13979898
> 
> 赞同：1
> 
> 时间：2012-12-20T20:22:22.497
> 
> 标签：android, android-edittext

我想在编辑文本中添加许多字符串并设置每个字符串的背景并在操作执行设备键盘删除键时删除每个字符串。

![在此处输入图像描述](../Images/579914d2415a417efa4ca8a974c3f1f4.png) 我正在上传路径应用程序的以下图像屏幕截图，其中字符串显示在 edittext 中。我想使用相同的功能，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:40:44.333

您可以使用该事件：

```
myEditText.setOnKeyListener(new OnKeyListener() {           
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction()==KeyEvent.ACTION_DOWN && keyCode == KeyEvent.KEYCODE_DEL) {
                /* Delete Rows or use listItemAdapter to refresh a list */
                return true;
            }
            /* Write the rows or use a listItemAdapter to customize a list */
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:57:13.137

您可能想要做的是将每个文本项作为 TextView 全部放在具有水平方向的 LinearLayout 中。使用 shape drawable 设置 TextView 的背景可绘制对象。

[这里](https://stackoverflow.com/a/1683195/838023)有一个这样的例子

# jquery - 如果变空，键盘退格键上的 jQuery 移动到上一个输入字段

> ID：13979903
> 
> 赞同：3
> 
> 时间：2012-12-20T20:22:51.917
> 
> 标签：jquery, css, input, focus, backspace

我有这个`jQuery`脚本：

```
$(document).ready(function() {
    //Focus the first field on page load
    $(':input:enabled:visible:first').focus();
    //Clear all fields on page load
    $(':input').each(function() {
        this.value = "";
    });
});
//Clear field on focus
$('input').focus(function() {
    this.value = "";
});
//Allow only alphabetical characters in the fields
$(':input').bind("keypress", function(event) {
    if (event.charCode != 0) {
        var regex = new RegExp("^[a-zA-Z]+$");
        var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
        if (!regex.test(key)) {
            event.preventDefault();
            return false;
        }
        $(this).next('input').focus();
    }
});
//Enumerate submit click on [ENTER]-keypress
$(':input').keypress(function(e) {
    if (e.which == 13) {
        jQuery(this).blur();
        jQuery('#submit').click();
    }
});
//Submit form
$('#submit').click(function() {
    //Show loading image while script is running
    $("#response").html("<img src='../images/loader.gif'>");

    //POST fields as array
    function serealizeInputs(input) {
        var array = [];
        input.each(function() {
            array.push($(this).val())
        });
        return array;
    }

    var letters = serealizeInputs($('.letters'));

    $.post('loadwords.php', {
        letters: letters
    }, function(data) {
        //Show the resonse from loadwords.php
        $("#response").html(data);
    });
}); 
```

见[http://jsfiddle.net/8S2x3/1/](http://jsfiddle.net/8S2x3/1/)

我想优化它一点，但我不知道如何。

大部分代码都是复制粘贴修改，因为我还在学习

我的问题：如何将焦点移到 Backspace 按键上的上一个文本字段？如果您输入错误，我希望能够删除该字符，但是如果您再次按退格键，则将焦点移到上一个输入字段。所以基本上如果输入是`=''`并且按下退格键，移动到上一个字段。如果输入有值，并且按下退格键，则正常操作（擦除字符）

另外我想知道如果字段中有值，如何添加 css 类，如果它是空的，则添加另一个 css 类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:34:22.530

尝试：

```
$(':input').keydown(function(e) {
    if ((e.which == 8 || e.which == 46) && $(this).val() =='') {
        $(this).prev('input').focus();
    }
}); 
```

[小提琴](http://jsfiddle.net/8S2x3/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:35:22.023

试试这个：

```
$(':input').keydown(function(e)
{
    if($(this).val() =='' && e.which ==8)
    {
        alert("Backspace pressed when input empty");
    }        
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-19T20:06:07.353

这是填充一组四个输入的解决方案，每个输入仅包含一个字符，用于竞赛或登录或像我的一样，以确认会议邀请：

1.  单击输入时，将选择所有文本。
2.  输入字符时，光标转到下一个输入。
3.  **删除时，光标移至上一个输入。**

[![带有用于登录或竞赛的代码输入的表单](../Images/c66c0c289554208418dd3e7fa23f0e74.png)](https://i.stack.imgur.com/omqAh.jpg)

HTML：

```
<div class="code">
    <input type="text" name="code1" maxlength="1" />
    <input type="text" name="code2" maxlength="1" />
    <input type="text" name="code3" maxlength="1" />
    <input type="text" name="code4" maxlength="1" />
</div> 
```

jQuery :

```
$(":input").on("focus",function(e){
    $(this).select();
});
$(":input").on("mouseup",function(e){
    $(this).select();
    return false;
});
$(':input').keyup(function(e) {
    if (e.which == 8 || e.which == 46) {
        $(this).prev('input').focus();
    }
    else {
        $(this).next('input').focus();
    }
}); 
```

# android - Google Analytics for Android 的位置准确性

> ID：13979909
> 
> 赞同：5
> 
> 时间：2012-12-20T20:23:12.123
> 
> 标签：android, google-analytics, android-location

在为 Android 项目测试 Google Analytics（版本 2）时，我注意到实时地图显示我的位置距离我的实际位置大约 200 英里。我在物理设备上运行我的项目，这让我相信谷歌分析实际上并没有发送任何位置信息，而是在数据发送到谷歌服务器时从手机 IP 地址获取它。有没有办法改变这种行为并使用 getLastKnownLocation() 提供我自己的位置数据？将其作为实际的标签/操作字符串发送当然可以，但这意味着我不能使用 Google Analytics 精美的地图功能来查看我的用户来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T21:20:28.183

您无法自定义 Google 如何获取位置数据（通过 IP 映射位置），但是您可以存储自定义维度和指标：[https ://developers.google.com/analytics/devguides/collection/android/v3/customdimsmets](https://developers.google.com/analytics/devguides/collection/android/v3/customdimsmets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T00:46:05.833

Google Analytics（分析）并非真正用于精细位置跟踪。[Cintric https://cintric.com/](https://cintric.com/)是一个很好的免费位置跟踪平台，它将跟踪非常精确的位置。

它是像谷歌分析这样的 SDK 的下降。然后，您可以访问包含所有用户位置的仪表板以及一堆分析/可视化。它同时支持安卓和iOS。

# python - pip install matplotlib：“没有 pkg -config”

> ID：13979916
> 
> 赞同：12
> 
> 时间：2012-12-20T20:23:43.043
> 
> 标签：python, macos, matplotlib, virtualenv, pip

当我运行时`pip install matplotlib`（在 virtualenv 中），输出的第一行是：

```
Downloading/unpacking matplotlib
  Running setup.py egg_info for package matplotlib
    basedirlist is: ['/usr/local/', '/usr', '/usr/X11', '/opt/local']
    ============================================================================
    BUILDING MATPLOTLIB
                matplotlib: 1.2.0
                    python: 2.7.3 (default, Dec 14 2012, 13:31:05)  [GCC 4.2.1
                            (Apple Inc. build 5666) (dot 3)]
                  platform: darwin

    REQUIRED DEPENDENCIES
                     numpy: 1.6.2
                 freetype2: found, but unknown version (no pkg-config)

    OPTIONAL BACKEND DEPENDENCIES
                    libpng: found, but unknown version (no pkg-config)
                   Tkinter: Tkinter: 81008, Tk: 8.5, Tcl: 8.5
                      Gtk+: no
                            * Building for Gtk+ requires pygtk; you must be able
                            * to "import gtk" in your build/install environment
           Mac OS X native: yes
                        Qt: no
                       Qt4: no
                    PySide: no
                     Cairo: no
<snip> 
```

**笔记**

1.  “没有 pkg​​-config”，以及
2.  缺少的 Qt 库。

首先，与上面的输出相反，`pkg-config` *实际上*已安装并在`PATH`：

```
% pkg-config --version
0.27.1
% which pkg-config
/usr/local/bin/pkg-config 
```

其次，`qt`可在同一目录中找到`freetype`并`libpng`找到：

```
% ls -l /usr/local/opt/{freetype,libpng,qt} | cut -c43-
/usr/local/opt/freetype -> ../Cellar/freetype/2.4.10/
/usr/local/opt/libpng -> ../Cellar/libpng/1.5.13/
/usr/local/opt/qt -> ../Cellar/qt/4.8.4/ 
```

我的问题分为三个部分：

> 1.  从哪里`pip install matplotlib`得到它`basedirlist`（上面输出的第 3 行）？
> 2.  我必须做些什么不同的事情`pip install matplotlib`才能找到`pkg-config`？
> 3.  我必须做些什么不同的事情`pip install matplotlib`才能找到`qt`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-13T16:17:02.527

```
sudo apt-get build-dep python-matplotlib 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-12-03T06:23:38.843

**在 Mac OS 上：**我`which pkg-config`用来检查安装。如果没有，请使用 brew 安装，它可以工作：

```
brew install pkg-config 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-15T15:23:17.607

只需安装 freetype 字体即可获得 matplotlib。

```
sudo apt-get install freetype* 
```

所有 matplotlib 文件都安装到 /usr/local/lib/python2.7/site-packages/。即使您想使用 pip 安装程序安装，您也需要修复 freetype 字体问题，可以按照上述方法完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T21:47:34.203

我不能问你的具体问题，但前几天我的 pip install matplotlib 看起来很像你的。在将我的头撞到墙上五个小时后，这个解决方案对我有用（来自[实用计算.org](http://practicalcomputing.org/node/69)

我得到了这组命令来设置 simlinks：

```
sudo mkdir -p /usr/local/include
sudo ln -s /usr/X11/include/freetype2/freetype /usr/local/include/freetype
sudo ln -s /usr/X11/include/ft2build.h /usr/local/include/ft2build.h
sudo ln -s /usr/X11/include/png.h /usr/local/include/png.h
sudo ln -s /usr/X11/include/pngconf.h /usr/local/include/pngconf.h
sudo ln -s /usr/X11/include/pnglibconf.h /usr/local/include/pnglibconf.h
sudo mkdir -p /usr/local/lib
sudo ln -s /usr/X11/lib/libfreetype.dylib /usr/local/lib/libfreetype.dylib
sudo ln -s /usr/X11/lib/libpng.dylib /usr/local/lib/libpng.dylib 
```

它并不能完全解决您的所有问题，但它解决了我的 pkg-config 问题（等等）。也许类似的链接会对 QT 有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T10:45:58.473

老问题，但想留下一些可能有用的面包屑。

在尝试手动安装依赖于在 virtualenv 中手动安装的一组 Python 绑定的应用程序之后，我刚刚在 Ubuntu 12.04 上处理了一个类似的问题。Python 绑定清楚地安装在我的 virtualenv 中的适当位置，但安装程序根本无法使用`pkg-config`.

所以回答原来的问题：

1.  pip install matplotlib 在哪里得到那个 basedirlist（上面输出的第 3 行）？
    *   不确定，但我猜这可能是 matplotlib 的 setup.py 在检测到您的操作系统/发行版/版本后硬编码的内容。
2.  我必须做些什么不同的事情才能让 pip install matplotlib 找到 pkg-config？
    *   我相当肯定它的发现`pkg-config`很好。它只是没有检测到`freetype2`and的任何有用信息`libpng`。
3.  我必须做些什么不同的事情才能让 pip install matplotlib 找到 qt？
    *   这一切都基于在 Ubuntu 12.04 上的经验。
    *   全局安装`python-qt4`并创建一个`--system-site-packages`启用的 virtualenv 应该会让 matplotlib 高兴，即使这意味着在你的全局环境中乱扔模块。但是当我尝试在 virtualenv 中安装 PyQt4 或 python-qt 时，我无法让 pip 做任何有用的事情。
    *   `libqt4-dev`在构建任何依赖 Qt4 的东西时，安装还应该缓解任何依赖问题。
    *   如果这不起作用，并且其他人的答案在这里没有帮助，这可能会解释为什么 pip 不开心：
        *   `man pkg-config`

            > 在大多数系统上，pkg-config 在 /usr/lib/pkgconfig、/usr/share/pkgconfig、/usr/local/lib/pkgconfig 和 /usr/local/share/pkgconfig 中查找这些文件。它还将查看由 PKG_CONFIG_PATH 环境变量指定的以冒号分隔（在 Windows 上以分号分隔）的目录列表。

        *   `pkg-config`正在寻找 *.pc 文件；您发现这些依赖项安装在某处的事实并不意味着`pkg-config`会在这些目录中找到任何 *.pc 文件。
        *   如手册页所示，如果您的软件包安装在有趣的地方，则需要进行`PKG_CONFIG_PATH`适当的设置。
        *   如果您已经将软件包安装到您的 virtualenv 中，那么您需要确保您的 virtualenv 的激活/停用命令正确更新 PKG_CONFIG_PATH。我让它工作的唯一方法是修改`bin/activate`我的 virtualenv 中的脚本。
            *   您几乎可以复制在激活时`_OLD_VIRTUAL_PATH`更新之前维护的现有代码，并在停用时`PATH`恢复到`_OLD_VIRTUAL_PATH`
            *   请注意，截至本文发布时，现有代码并不完美，因为如果您`PKG_CONFIG_PATH`一开始是空白的，您需要更多的逻辑来确保它在停用时被清除

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-10T01:58:46.683

我有一个几乎相同的错误。我进一步查看了错误，似乎问题出在 freetype2 上。

我在使用其他使用 freetype 的软件包时也遇到过类似的令人沮丧的问题。对我来说，编译错误来自以下内容：

* * *

/usr/local/include/ **freetype2** /freetype/*.h 是 freetype 文件。

/usr/local/include 是搜索目录。

-Ifreetype/*.h 是传递给编译器的标志。

* * *

问题很微妙，但是我能够通过复制 /usr/local/include/freetype2/freetype -> /usr/local/include/freetype 来编译 matplotlib（老实说，这几乎是我真正关心的）。

希望这将帮助任何偶然发现此问题的人！

# algorithm - 网格上的 dijkstra

> ID：13979925
> 
> 赞同：1
> 
> 时间：2012-12-20T20:24:09.077
> 
> 标签：algorithm, graph, grid, dijkstra

如果我在“网格”上运行 dijskstra 的算法，那么使用优先级队列是没有意义的，对吧？

网格将是这样的地图： 顶点：

```
 ___________________
|A|_|_|_|_|_|_|_|_|_|
|C|B|_|_|_|_|E|_|_|_|
|_|_|_|_|_|_|_|_|_|_|
|_|_|_|_|_|_|_|_|_|_|
|_|_|_|_|_|_|_|_|_|_|
|_|_|_|_|_|_|_|_|_|_|
|_|_|_|_|_|_|_|_|_|_|
|D|_|_|_|_|_|F|_|_|_|
|_|_|_|_|_|_|_|_|_|_| 
```

边缘：

```
A <-> C
C <-> B
C <-> D
D <-> F
B <-> E
E <-> F 
```

换句话说，每条边都连接到与其水平或垂直的顶点但不能对角连接的地图（例如，不允许从 A 到 B 或 A 到 F 的边）。

此外，边缘的权重对于它们在网格中的位置是直观的。例如，A <-> C 的边权重为 1，C <-> B 为 1，C <-> D 为 6，B <-> E 为 5，D <->F 和 E <-> F 为两者都 6。

不久前我为这样的图实现了 dijsktra 的算法，现在我需要对其进行优化，使其尽可能快。我当前的实现（红宝石）：

```
def self.dj_start(g,source, goal)
    t = Time.now
    visited, distances, paths, already_queued = {}, {}, {}, {}

    curr = g.verticies[source]
    queue = [] # 

    queue.push(curr)
    already_queued[curr] = true
    distances[curr] = 0
    paths[curr] = curr
    @count = 0
    while(!queue.empty?)
      run_dijkstra(g, visited, distances, paths, queue, already_queued, goal)
    end
    t = Time.now - t
    print "ran dijkstra in #{t}s count = #{@count}\n"
    return [paths, distances]
end

def self.run_dijkstra(g, visited, distances, paths, queue, already_queued, goal)
curr = g.verticies[queue.delete_at(0)]
visited[curr] = true

curr.edges.each do |e|
    @count+=1
      if !already_queued[e.vertex] && !visited[e.vertex]
        queue.push(e.vertex) 
        already_queued[e.vertex] = true
      end

      nd = e.weight+distances[curr]
      if distances[e.vertex].nil? || nd < distances[e.vertex]
        distances[e.vertex] = nd
        paths[e.vertex] = curr

        if e.vertex.eql?(goal) # minor optimization
          queue = []
          return 1 # Code for exit due to this very minor optimization
        end
      end # end distance check
end 
```

结尾

我打算用优先级队列重写它，但我只是不认为这样做有必要。还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:52:06.750

通常使用广度优先搜索来解决类似的问题，其中每个单元格都是图中的一个顶点。仍然在您解决的问题中，与网格中的单元格数量相比，有效位置的数量非常低，所以也许您的方法可以工作。请注意，边缘权重（即您需要在两个位置之间移动的最小单元数）应该以某种方式提供给您的程序。如果不是这种情况，您将不得不使用 BFS 计算这些，因此 Dijkstra 没有意义。

说了这么多，我来回答你的问题。如果以您在此处显示的方式提供边缘，则有理由使用优先级队列。它将算法的计算复杂度降低一个数量级。对于较大的网格，这将是显而易见的。

顺便说一句，ruby 有一个非常酷的 gem，它实现了斐波那契堆。尽管将斐波那契堆用于您在此处显示的大小的 grpah 可能会有点矫枉过正，但我​​一直认为拥有基于斐波那契堆的 dijkstra 会很酷。

希望这个答案有帮助。

# android - 在 Android 应用程序中使用 OpenGL 的缺点？

> ID：13979926
> 
> 赞同：0
> 
> 时间：2012-12-20T20:24:11.410
> 
> 标签：android, opengl-es

向“严肃”（非游戏）Android 应用程序添加一些 OpenGL 是否有任何权衡？

我想使用 OpenGL 的原因是为一些视图添加一些 3d 行为。

根据这个[http://developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html) OpenGL 1.0 在每个 Android 设备上都可用，并且不需要修改清单文件。所以永远不会有兼容性问题。

我能想到的唯一两件事是 1\. 其他无法使用 OpenGL 的开发人员的可维护性。并且可能 2\. 与其他组件的集成问题/不能很好地重用（虽然，不确定）。

还有其他什么，意想不到的事情，某种开销，并发症等吗？

问因为这似乎不是一个非常流行的做法，人们似乎更喜欢用 2d 来“伪造” 3d 或放弃它。不知道是不是因为不想学OpenGL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:35:09.987

I use OpenGL for some visualization in a released app, and I have an uncaught exception handler in place to catch any exception coming from the GLThread and disable OpenGL the next time the app is run, since I had some crash reports in the internals of GLSurfaceView.java coming in from buggier devices. If the 3D rendering is not crucial to your app, this is one approach you can take so that users with these devices can continue to use the app.

From Android 3.0+ you can also preserve the EGL context by calling GLSurfaceView. setPreserveEGLContextOnPause(true);. You'll only really need to do this if your renderer is very expensive to initialize, and it only works if you're not destroying the GLSurfaceView in between (i.e. the default behavior of an activity when rotating the device). If you're not loading that many resources then initializing OpenGL is usually fast enough.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:45:28.427

从[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)文档（强调我的）：

> 表面是 Z 顺序的，因此它位于持有其 SurfaceView 的窗口后面；**SurfaceView 在其窗口中打了一个孔以**显示其表面。视图层次结构将负责正确地将 SurfaceView 的任何兄弟姐妹与 Surface 合成，这些兄弟通常会出现在它的顶部。这可用于在 Surface 顶部放置按钮等叠加层，但请注意，它可能会对性能产生影响，因为每次 Surface 更改时都会执行完整的 alpha 混合合成。

优点是你的 GL 线程可以独立于 UI 线程更新屏幕（即它不需要渲染到纹理并将纹理渲染到屏幕）；缺点是*某些东西*需要将您的视图与屏幕合成。如果幸运的话，这可以在“硬件作曲家”中完成；否则它是在 GPU 上完成的，可能会有点浪费 GPU 资源（参见*For Butter or Worse: Smoothing Out Performance in Android UIs* at [27:32](http://www.youtube.com/watch?v=Q8m9sHdyXnE#t=1652s) and [40:23](http://www.youtube.com/watch?feature=player_embedded&v=Q8m9sHdyXnE#t=2423s)）。

如果您的视图很小，最好使用[TextureView](http://developer.android.com/reference/android/view/TextureView.html)。这将渲染到纹理并将纹理渲染为正常视图层次结构的一部分，这可能会更好，但会增加延迟。缺点是它仅在 API 级别 14 之后可用。

# java - Project Euler 3 解决方案

> ID：13979928
> 
> 赞同：0
> 
> 时间：2012-12-20T20:24:22.913
> 
> 标签：java, if-statement, return-value

在[https://github.com/nayuki/Project-Euler-solutions/blob/master/p003.java](https://github.com/nayuki/Project-Euler-solutions/blob/master/p003.java)的以下片段中：

```
private static long smallestFactor(long n) {    
  for (long i = 2, end = Library.sqrt(n); i <= end; i++) {    
    if (n % i == 0)    
      return i;   
  }    
  return n; // Prime    
} 
```

我对这部分有点困惑`return n`。是否`n`要`i`在 if 语句中返回 after 的值？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:47:19.093

不，它返回未更改的参数以指示它是素数。

如果它不是素数，则返回表明它不是素数的因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:14:24.593

让我们拿一个数字。

num 可以整除一半（即因子）

实施[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)以查找素数。这是查找素数的有效过程。然后检查返回的素数是否除以“num”...

# gwt - 在 gwt 项目中创建的默认文件夹

> ID：13979932
> 
> 赞同：-2
> 
> 时间：2012-12-20T20:24:37.943
> 
> 标签：gwt

我是 gwt 的新手。在创建项目时，它向我展示了默认文件夹和包，例如 - t1（由客户端创建的包）、t1.CLIENT、t1.SERVER、t1.SHARED 包等。任何人都可以说出其中使用了什么案例及其用处？？也有人可以告诉WAR文件夹是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:31:15.340

从阅读文档开始怎么样？

[https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideDirectoriesPackageConventions](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideDirectoriesPackageConventions)

# ios - 在单元格上设置角半径会破坏 UICollectionView 的性能

> ID：13979935
> 
> 赞同：13
> 
> 时间：2012-12-20T20:24:46.810
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`只有几个单元格（大约 20 个）的单元格。这个集合的性能很好。但是，一旦我尝试绕过`UICollectionViewCells`此视图正在渲染的角落，我的表现就会受到重大影响。在我的单元格的 init 方法中，这是我添加的唯一一行：

```
[self.layer setCornerRadius:15]; 
```

由于这是在 init 方法中并且我正在正确地重用单元格，所以我不明白为什么这会导致我出现问题。

我尝试使用以下多种组合来调整销售的光栅化和不透明度，但仍然没有效果：

```
[self.layer setMasksToBounds:YES];
[self.layer setCornerRadius:15];
[self.layer setRasterizationScale:[[UIScreen mainScreen] scale]];
self.layer.shouldRasterize = YES;
self.layer.opaque = YES; 
```

他们是否有一些设置或技巧来提高`UICollectionView`具有圆角单元格的性能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T22:52:09.907

正如@Till 在评论中指出的那样，预渲染图像应该可以解决您的性能问题。您可以将所有圆角、阴影和任何其他特殊效果放入其中，而不需要 CA 即时渲染它们。

预渲染图像也不会将您锁定在静态内容大小中：查看[`UIImage`可调整大小的图像](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets%3a)内容。（这仍然比 CA 渲染每一帧要快得多。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:51:57.537

我发现这完全是由于对 dequeuereusablecellwithidentifier 的调用引起的。每次调用时，都需要重新渲染圆角单元格。如果在项目滚动离开屏幕时集合视图没有将它们从视图中删除，那么性能不会受到影响（只要它们在集合中的项目不是太多）。似乎是一把双刃剑——两种方式都有其局限性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-12T09:19:25.253

UIView 子类有一个代码，它为您提供一个带有不透明圆形边框和中间透明孔的视图。您应该像往常一样创建所需的视图，然后您可以在视图上添加带有孔的视图。可视化在[这里](http://i.stack.imgur.com/lhKpO.jpg)。

如果您为 UICollectionView 或 UITableView 使用单色背景，它可以工作，您可以为每个单元格添加以下子视图：

```
@interface TPRoundedFrameView : UIView

@property (assign, nonatomic) CGFloat cornerRadius;
@property (strong, nonatomic) UIColor * borderColor;

@end

@implementation TPRoundedFrameView

- (instancetype)init {
    if ((self = [super init])) {
        self.opaque = NO;
        self.backgroundColor = [UIColor clearColor];
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    UIBezierPath * path = [UIBezierPath bezierPathWithRect:rect];
    UIBezierPath * innerPath = [UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:self.cornerRadius];
    [path appendPath:[innerPath bezierPathByReversingPath]];
    [self.borderColor set];
    [path fill];
}

@end 
```

目标单元类示例：

```
- (void)awakeFromNib {
    [super awakeFromNib];
    // creating holed view with rounded corners
    self.myRoundedView.backgroundColor = [UIColor whiteColor];
    TPRoundedFrameView * roundedFrame = [TPRoundedFrameView new];
    roundedFrame.cornerRadius = 5.f;
    roundedFrame.borderColor = [UIColor groupTableViewBackgroundColor];

    // add borders to your view with appropriate constraints
    [self.myRoundedView addSubview:roundedFrame];

    roundedFrame.translatesAutoresizingMaskIntoConstraints = NO;
    NSDictionary * views = NSDictionaryOfVariableBindings(roundedFrame);
    NSArray * horizontal = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[roundedFrame]-0-|" options:0 metrics:nil views:views];
    NSArray * vertical = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[roundedFrame]-0-|" options:0 metrics:nil views:views];
    [self.myRoundedView addConstraints:horizontal];
    [self.myRoundedView addConstraints:vertical];
} 
```

结果： 带有圆形视图的[表格作为单元格](http://i.stack.imgur.com/6ct6P.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T16:28:18.443

我通过在 contentView 而不是单元格本身上应用这个半径来修复我所有的性能边界半径问题。

```
self.contentView.layer.borderWidth = 1.0f;
self.contentView.layer.cornerRadius = 5.0f;
self.contentView.layer.borderColor = [UIColor colorWithRed:202/255\. green:202/255\. blue:202/255\. alpha:1.0].CGColor; 
```

# asp.net - 用户控件中的下拉列表和选择新项目后的自动回发

> ID：13979936
> 
> 赞同：0
> 
> 时间：2012-12-20T20:24:52.087
> 
> 标签：asp.net

我在用户控制中有一个下拉列表

当用户选择另一个项目时，如何在页面中获取用户控件下拉列表的选定值（自动回发为真）？

我试图将 ddl 的选定值存储在 Selected Index Changed 事件处理程序的公共成员中。但是这个处理程序在容器页面的页面加载之后执行。我需要根据用户控件的 ddl 中的选定值在页面中加载数据。

谢谢

用户控制代码

```
protected void ddlPageSize_SelectedIndexChanged(object sender, EventArgs e)

{

        _SelectedPageSize = Convert.ToInt32(ddlPageSize.SelectedValue);

}

int GetSelectedPageSize()

{

       return _SelectedPageSize;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:30:58.100

有多种方法可以完成您正在寻找的内容。第一个是简单地重新排序包含页面中的事件。如果您使用 PreRender 事件而不是 PageLoad 事件，您的下拉选择操作将完成并且信息将很容易获得。

第二种可能更具可扩展性的方法是从您的用户控件中引发一个自定义事件，您的页面将侦听和处理该事件。然后将在信息立即可用的地方直接采取行动。这允许任何包含结构（无论是页面、用户控件还是类似的东西）订阅事件并处理所需的任何内容。

第三种更严格的方法是在包含页面中有一个函数，一旦数据完成，用户控件就会调用该函数。这要求用户控件了解它将包含在其中的特定页面类型（使其可扩展性降低），因此我不推荐它。

*编辑：这是使用自定义事件实现选项 #2 的想法：*

```
public partial class MyUserControl: UserControl
{
    //All of your existing code goes in here somewhere

    //Declare an event that describes what happened. This is a delegate
    public event EventHandler PageSizeSelected;

    //Provide a method that properly raises the event
    protected virtual void OnPageSizeSelected(EventArgs e)
    {
        // Here, you use the "this" so it's your own control. You can also
        // customize the EventArgs to pass something you'd like.

        if (PageSizeSelected!= null)
            PageSizeSelected(this, e);
    }

    private void ddlPageSize_SelectedIndexChanged(object sender, EventArgs e)
    {
        _SelectedPageSize = Convert.ToInt32(ddlPageSize.SelectedValue);
        OnPageSizeSelected(EventArgs.Empty);
    }
} 
```

然后在您的页面代码中，您将监听该事件。在页面加载的某处，您将添加：

```
myUserControlInstance.PageSizeSelected += MyHandinglingMethod; 
```

然后提供处理事件的方法：

```
protected void MyHandlingMethod(object sender, EventArgs e)
{
    // Do what you need to do here
} 
```

# objective-c - 使用 NSIndexPath 将 2D NSArray 映射到 1D

> ID：13979938
> 
> 赞同：5
> 
> 时间：2012-12-20T20:24:55.903
> 
> 标签：objective-c, arrays, multidimensional-array

我正在尝试以这种方式使用像 2D 这样的 1D 数组，但我无法弄清楚。给定一个这样的数组：

```
NSArray *myArray = @[@0,@1,@2,@3,@4,@5]; 
```

是否可以使用这样定义的 NSIndexPath 访问“4”？：

```
NSIndexPath *index = [NSIndexPath indexPathForRow:1 inSection:1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:52:04.920

我想你想做这样的事情：

```
NSArray* array= @[ @[ @1,@2,@3 ] , @[@2, @4, @6] ];
NSIndexPath* path=[[NSIndexPath alloc]initWithIndexes: (const NSUInteger[]){0,0} length:2];
NSLog(@"%@",array [[path indexAtPosition: 1]] [[path indexAtPosition: 0]]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:55:13.403

```
NSArray* myArray= @[ @[ @"Zero.Zero",@"Zero.One",@"Zero.Two" ] , @[ @"One.Zero", @"One.One", @"One.Two" ] ] ;
NSLog(@"%@",  myArray[1][2] ) ;   // logs 'One.Two' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:22:20.913

更一般地，您可以使用维度 A 的索引路径来遍历维度 B 的数组。您还可以制定一条规则，说明当路径或数组中有额外维度时该怎么做。

该规则可能看起来像这样：如果我用完了路径尺寸，则返回我在路径末端找到的任何对象。如果我用完了数组维度（例如您的问题中的情况），则丢弃路径的其余部分并返回我找到的任何非数组。

在代码中：

```
- (id)objectInArray:(id)array atIndexPath:(NSIndexPath *)path {

    // the end of recursion
    if (![array isKindOfClass:[NSArray self]] || !path.length) return array;

    NSUInteger nextIndex = [path indexAtPosition:0];

    // this will (purposely) raise an exception if the nextIndex is out of bounds
    id nextArray = [array objectAtIndex:nextIndex];

    NSUInteger indexes[27]; // maximum number of dimensions per string theory :)
    [path getIndexes:indexes];
    NSIndexPath *nextPath = [NSIndexPath indexPathWithIndexes:indexes+1 length:path.length-1];

    return [self objectInArray:nextArray atIndexPath:nextPath];
} 
```

像这样称呼它...

```
NSArray *array = [NSArray arrayWithObjects:@1, [NSArray arrayWithObjects:@"hi", @"there", nil], @3, nil];

NSIndexPath *indexPath = [NSIndexPath indexPathWithIndex:1];
indexPath = [indexPath indexPathByAddingIndex:1];

NSLog(@"%@", [self objectInArray:array atIndexPath:indexPath]); 
```

对于给定的索引路径，这会产生“那里”的输出。

# jquery - Seaside Smalltalk 和 jQuery UI 手风琴 - 巨大的高度

> ID：13979942
> 
> 赞同：2
> 
> 时间：2012-12-20T20:25:06.593
> 
> 标签：jquery, height, accordion, smalltalk, seaside

我有个问题。我想在 Seaside Smalltalk 中创建一个站点，该站点将在 jQuery UI Accordion 中显示 Collection 的所有子类的方法。我开发了两种方法：

```
renderContentOn: html 
html div script: html jQuery new accordion;

    with: [(self elements: html)
            keysAndValuesDo: [:t2 :t3 | 
                html
                    div: [html anchor: t2].
                html div
                    with: [html paragraph: t3]]]

elements: html 
| dict |
dict := Dictionary new.
Collection withAllSubclasses
    do: [:e | dict
            at: e asString
            put: [html orderedList list: e methodDict]].
^ dict 
```

一切正常，除了一件事：包含 div 的高度非常高：7000px。我不知道是什么原因造成的，我需要帮助。

更新：我正在使用 Seaside 3.0.7。这些样式是内联设置的。我提供的两个文件就是我使用的一切。文本大约占 div 的 1/10，其余的只是空白空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T11:56:29.747

它有点过时了，但仍然没有答案：

将 autoHeight: false 添加到您的手风琴创作中。auto-height: true，这是默认尺寸所有隔间的高度相同。

```
html div script: (html jQuery new accordion
               autoHeight: false ); 
```

# sql - ms-access 内置函数 Month(number)

> ID：13979943
> 
> 赞同：1
> 
> 时间：2012-12-20T20:25:09.907
> 
> 标签：sql, ms-access-2003

我一直在使用访问查询生成器中的 Month... 函数的变体。我无法从表达式构建日期值。我正在寻找创建自己的日期，将在幕后执行一些过滤和其他任务。我的问题是我似乎无法让 Month(number) 函数做我认为应该做的事情。这是我正在寻找的内容的摘要。

```
5/31/2012 
```

通过这样的事情

```
DateSerial(Year(Date()),Month(5),Day(31))
Also
DateSerial(Year(Date()),Month("5"),Day("31")) 
```

当我尝试这些作为一种表达时，回报是

```
1/30/2012 
```

我确定我误解了结构。请教育我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:29:55.463

DateSerial 需要三个整数，年、月、日：

```
 DateSerial(1992,5,2)

 02/05/1992 ''Euro locale 
```

Year(Date()) 返回一个整数，因此您可以替换：

```
 DateSerial(Year(Date()),5,31) 
```

有趣的是，第零天是上个月的最后一天：

```
 DateSerial(2012,12,0)=30/11/2012 
```

-- [http://office.microsoft.com/en-ie/access-help/HV080206953.aspx](http://office.microsoft.com/en-ie/access-help/HV080206953.aspx)

顺便说一句，不要忘记所有日期都是数字。

`Month(5)`将等于 1，但是`Month(41263)=12`!

还

```
?month(100)
 4 
?Year(100)
 1900 
```

# android - Android 和 chrome 浏览器上的 Openlayers - 使用视口元标记时出现白线

> ID：13979945
> 
> 赞同：2
> 
> 时间：2012-12-20T20:25:16.633
> 
> 标签：android, google-chrome, openlayers

渲染 TMS 切片时，有时切片之间会出现一条白线。不是在所有瓷砖之间，只是一些，而且只是有时。平移，它消失并再次出现。

[http://i.stack.imgur.com/lm13J.jpg](http://i.stack.imgur.com/lm13J.jpg)

[http://i.stack.imgur.com/izWy1.jpg](http://i.stack.imgur.com/izWy1.jpg)

这是使用 OpenLayers 2.12（非移动）版本。仅在 Android 上发生（在 4+ Galaxy Tab2 上测试），并且仅在 Chrome 浏览器中发生。原生浏览器很好。我确实指定了这个标签：

非常标准的视口标签。如果未指定标签，则无白线。我确实需要标签以仅在没有可扩展性选项的情况下以 scale=1.0 显示内容。

有没有人有任何想法？

谢谢，

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:48:59.233

我从来没有找到这个问题的答案。看起来，如果您将视口设置为 scale=1.0，Android Chrome 浏览器在某些设备上会将其解释为视口的“缩放”。所以就像 Ctrl+鼠标滚轮在桌面浏览器中放大一样。

有趣的是，如果您在谷歌地图中的 Chrome 中执行此操作 - 您有时还会在图块之间看到白线。

所以 - 运气不好。铬合金。

# jquery-mobile - 如何：标题按钮样式 Foursquare (Jquery Mobile)

> ID：13979948
> 
> 赞同：0
> 
> 时间：2012-12-20T20:25:39.870
> 
> 标签：jquery-mobile, mobile, header

我想向我们的 Jquery Mobile webapp 添加一个按钮。我添加了来自 FourSquare 应用程序的屏幕截图，其中显示了右上角的“签入”按钮和图标，我们希望在我们的 HEADER 中实现..

[http://www.iclarified.com/images/news/26011/99138/99138.png](http://www.iclarified.com/images/news/26011/99138/99138.png)

我们无法弄清楚如何实现这一点。我们现在导航栏能够为我们提供类似于 FSQ 按钮的按钮样式，但我们只会在我们的 Header 中有一个这样的按钮，并向右对齐。

有没有人已经设计了这样的东西并且可以帮助我们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:09:20.050

是的，它可以做到，这是一个简单的例子：

```
 <body>
        <div data-role="page">
            <div data-role="header">
                <h1>Foursquare Like</h1>
                <a href="#" data-icon="arrow-d" class="ui-btn-right">Checkin</a>
            </div>
            <div data-role="content">
                <p>This is a test page</p>
            </div>
        </div>
    </body> 
```

在此处查看更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/toolbars/docs-headers.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/docs-headers.html) jsFiddle 示例：http: [//jsfiddle.net/Twisty/xWzFt/](http://jsfiddle.net/Twisty/xWzFt/)

# android - android Layout 基于网格的元素定位

> ID：13979952
> 
> 赞同：0
> 
> 时间：2012-12-20T20:25:46.140
> 
> 标签：android, android-layout, android-gridlayout

我已经绘制了一个背景（使用 Photoshop），其中一个圆圈形成了一个 4x4 网格。我想在圆圈内准确定位一些元素（如小圆圈图像/按钮）。我怎样才能做到这一点？我应该使用特定的布局吗？这是基于网格的游戏的背景。背景（会更准确）：[http ://uptiki.altervista.org/viewer.php?file=spojjb30484tjasmqbo2.png](http://uptiki.altervista.org/viewer.php?file=spojjb30484tjasmqbo2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:31:23.433

您应该将背景分成两部分。1\. 带有任何精美图像的背景到 gridview。2.gridview中的单个单元格有自己的背景，可以是圆形或正方形或不同颜色的圆圈以显示选定的单元格等。

# c# - 向文本插入随机字符的函数

> ID：13979954
> 
> 赞同：-5
> 
> 时间：2012-12-20T20:25:49.457
> 
> 标签：c#

我需要编写一个函数，该函数将在字符串限制中找到`[insert - l] some text [/insert]`并在每个单词中放入一个限制中指定的字符（例如 char l ）我认为我需要在 [insert - l] [/insert] 之间找到所有拆分它排列并将一个字符放入随机位置的每个单词中，但我的knowlogde不足以编写它。请帮助我=\

例子：

```
Musgrave was [insert - l] selected as a scientist-astronaut [/insert] by NASA in August 1967\. 
```

功能后我必须得到：

```
Musgrave was sellected als a scilentist-astrlonaut by NASA in August 1967. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:36:34.850

只因为我是个贪吃惩罚的人。这是我对你要求的猜测。

```
var random = new Random();
string bigBlockOfText = @"blah blah [insert - l] some text [/insert] blah blah blah [insert - q] different text[/insert].";
var reg = new Regex(@"\[insert \- (?<char>.)\](?<text>.+?)\[/insert\]");
var matches = reg.Matches(bigBlockOfText);
for (int i = matches.Count - 1; i >= 0; i--)
{
    var match = matches[i];
    bigBlockOfText = bigBlockOfText.Remove(match.Index, match.Length);
    var replace = match.Groups["text"].Value;
    var insert = match.Groups["char"].Value;
    replace = replace.Insert(random.Next(replace.Length), insert);
    bigBlockOfText = bigBlockOfText.Insert(match.Index, replace);
} 
```

# java - HashMap 如何处理更新的 ,如果值本身是一个Hashmap？

> ID：13979955
> 
> 赞同：0
> 
> 时间：2012-12-20T20:26:04.720
> 
> 标签：java, memory-leaks, jvm, out-of-memory

当我们将 a`<key,value>`放入 HashMap 时，如果键已经存在于 HashMap 中，则值将被替换。但是，如果一个键的值本身就是一个 HashMap，那么它会被 HashMap 替换吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T20:29:51.043

是的，它会被替换。请记住，地图只存储对其他对象的引用。

你把一个 HashMap 的引用放到一个 map 中，这个 map 保存了一个对这个 HashMap 的引用。

如果您使用相同的键放置对另一个 HashMap 的引用，则对第一个放置的 HashMap 的引用将替换为对新 HashMap 的引用。对象的类型无关紧要。它总是以同样的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:16:13.730

如果我理解您的要求，您想知道您刚才所说的是否会导致内存泄漏（如果这不是您要问的，请更新您的问题）。

如果你这样做：

```
Map<?, ?> m = new HashMap<Object, Object>();
m.put(m, m); 
```

然后`m`将最终只包含对自身的引用。由于 Java 的 GC 是如何通过对象引用图工作的，并且因为它们使用在 GC 扫描期间跟踪访问过的节点的算法，如果没有维护对 的引用`m`，那么`m`将被垃圾收集，尽管包含对自身的引用。循环引用在 Java GC 中得到了完美的处理。

如果`m`放置在一个*字段中*（即，*不是*在方法内声明的局部变量），那么情况就不同了。

*   如果`m`放置在一个`static`字段中，那么总会有一个来自 GC 根的引用，这意味着它不会被回收。注意：从`static`字段中强烈引用的任何内容都不会被垃圾收集。
*   如果`m`放置在成员字段（非`static`）中，则地图不会被垃圾收集，直到包含它的对象被垃圾收集。
*   如果有多个引用 的字段`m`，则`m`不会被垃圾收集，直到*所有*这些引用都是 a) 可以被垃圾收集的对象的一部分或 b) 设置为`null`或某个其他值不再引用`m`。

**TL;DR**垃圾收集器可以很好地处理循环对象引用。

*旁注：*请用信息更新您的*问题*，不要只是将其作为评论添加到您的问题或其他人的答案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:08:35.353

您问题中的措辞有点不透明，但 a`HashMap<HashMap, Object>`完全有效（如果有点奇怪）。在这种情况下，如果：

```
HashMap map = new HashMap<HashMap<String, String>, String>();
HashMap a = new HashMap<String, String>();
HashMap b = new HashMap<String, String>();  //a.equals(b) == true

map.put(a, "foo");  //map.get(a) would now return "foo"
map.put(b, "bar");  //original entry is replaced, map.get(a) would now return "bar" 
```

# javascript - How do you force your Javascript event to run first, regardless of the order in which the events were added?

> ID：13979961
> 
> 赞同：29
> 
> 时间：2012-12-20T20:26:56.500
> 
> 标签：javascript, jquery, dom-events

I have Javascript that people are including in their page. In my Javascript I have a version of jQuery (1.8 for sake of easy reference) that is sectioned off into its own namespace, and referenced via a global variable (but not one of the two default vars of "$" or "jQuery"). This allows users to have jQuery in their page and have it not interfere with the stuff I'm doing internally in my functions.

So we have one page that has jQuery already (1.4), and everything works fine, except that the user and my code are both listening to "click" events on elements, and theirs is going first, so on the few events they do that return false, jQuery stops propagation and my event never gets triggered. I need my event to go first. The user is expecting my `onClick` functionality to still work.

Now I know that jQuery keeps its own order of events internally through the `_data()` object, and through this it is possible to unbind existing events, bind my event, then rebind the existing events, but that only applies to objects bound through that instance of jQuery. I'd rather not just blindly look for the jQuery object in hopes that the conflict was introduced by a user's own version of jQuery. After all what happens when a user binds the event not through jQuery? Trying to manipulate the existing jQuery object in the page isn't a good solution.

I know that, depending on browser, they are using `addEventListener`/`removeEventListener` or `attachEvent`/`detachEvent`. If only I could get a listing of the already added events, I could rebind them in the order I wanted, but I can't find out how. Looking through the DOM via Chrome inspect I don't see `onclick` bound anywhere (not on the object, not on window or document either).

I'm having the darndest time trying to figure out just exactly where jQuery binds its listening. To be able to control the order of its own events, jQuery must blanketly listen somewhere and then fire off its own functions right? If I could figure out where that's done I might get some insight into how to ensure my event is always first. Or maybe there's some Javascript API I haven't been able to find on Google.

Any suggestions?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T20:50:22.833

We solved this by just adding a little jQuery extension that inserts events at the head of the event chain:

```
$.fn.bindFirst = function(name, fn) {
  var elem, handlers, i, _len;
  this.bind(name, fn);
  for (i = 0, _len = this.length; i < _len; i++) {
    elem = this[i];
    handlers = jQuery._data(elem).events[name.split('.')[0]];
    handlers.unshift(handlers.pop());
  }
}; 
```

Then, to bind your event:

```
$(".foo").bindFirst("click", function() { /* Your handler */ }); 
```

Easy peasy!

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-28T15:26:01.590

As Bergi and Chris Heald said in the comments, it turns out there's no way to get at the existing events from the DOM, and no method to insert events "first". They are fired in the order they were inserted by design, and hidden by design. As a few posters mentioned you have access to the ones added through the same instance of jQuery that you're using via jQuery's data, but that's it.

There is one other case where you can run before an event that was bound before your code ran, and that's if they used the "onclick" HTML attribute. In that case you can write a wrapper function, as nothingisnecessary pointed out in a rather over-the-top toned comment below. While this wouldn't help in the instance of the original question I asked, and it's now *very* rare for events to be bound this way (most people and frameworks use addEvent or attachEventListener underneath now), it is one scenario in which you can solve the issue of "running first", and since a lot of people visit this question looking for answers now, I thought I'd make sure the answer is complete.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-18T04:05:25.263

I encounter an opposite situation where I was asked to include a library, which uses `event.stopImmediatePropagation()` on an element, to our website. So some of my event handlers are skipped. Here is what I do (as answered [here](https://stackoverflow.com/a/35472362/1815779)):

```
<span onclick="yourEventHandler(event)">Button</span> 
```

**Warning**: this is **not** the recommended way to bind events, other developers may murder you for this.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-15T08:30:55.887

Its not a proper solution, but ... You can add event handler to parent node in capture phase. Not on target element itself!

```
<div>
    <div id="target"></div>
</div>

target.parentNode.addEventListener('click',()=>{console.log('parent capture phase handler')},true) 
```

Third argument in addEventListener means:

*   true - capture phase
*   false - bubble phase

Helpful links: [https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)

[https://javascript.info/bubbling-and-capturing](https://javascript.info/bubbling-and-capturing)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-16T22:30:29.483

Found it easiest to add `addListener` and `removeListener` methods to `document` (as that's only where I need them - I suppose you can use `Element.prototype` and `this` instead). Only one "real" listener is added per type, and it's just a func to call the actual listeners in order. The `eventListeners` dictionary is added to *document* (so can mess with the handler or order).

[edit] I think the correct answer for most cases is to use the 3rd argument of `addEventListener`: [https://stackoverflow.com/a/29923421](https://stackoverflow.com/a/29923421). The answer below ignores the argument (on purpose).

[edit] Updated code to only add *one* extra property: `document.eventHandlers` + modified naming.

```
// Storage.
document.eventListeners             = {};   // { type: [ handlerFunc, listenerFuncs ] }

// Add event listener - returns index.
document.addListener                = (type, listener, atIndex) => {
    // Get info.
    const listening                 = document.eventListeners[type];
    // Add to existing.
    if (listening) {
        // Clean up.
        atIndex                     = atIndex || 0;
        const listeners             = listening[1];     // Array of funcs.
        // Already has.
        const iExists               = listeners.indexOf(listener);
        if (iExists !== -1) {
            // Nothing to do.
            if (iExists === atIndex)
                return              atIndex;
            // Remove from old position.
            listeners.splice(atIndex, 1);
        }
        // Add (supporting one cycle of negatives).
        const nListeners            = listeners.length;
        if (atIndex > nListeners)
            atIndex                 = nListeners;
        else if (atIndex < 0)
            atIndex                 = Math.max(0, atIndex + nListeners + 1);
        listeners.splice(atIndex, 0, listener);
    }
    // New one.
    else {
        // Handler func.
        const handler               = (...args) => {
            const listening         = document.eventListeners[type];
            if (listening) {
                const listeners     = listening[1];     // Array of funcs.
                for (const listener of listeners)
                    listener(...args);
            }
        };
        // Update dictionary.
        document.eventListeners[type]   = [ handler, [ listener ] ];
        // Add listener.
        document.addEventListener(type, handler);
        // First one.
        atIndex                     = 0;
    }
    // Return index.
    return                          atIndex;
};

// Remove event listener - returns index (-1 if not found).
document.removeListener             = (type, listener) => {
    // Get info.
    const listening                 = document.eventListeners[type];
    if (!listening)
        return                      -1;
    // Check if exists.
    const listeners                 = listening[1];
    const iExists                   = listeners.indexOf(listener);
    if (iExists !== -1) {
        // Remove listener.
        listeners.splice(iExists, 1);
        // If last one.
        if (!listeners.length) {
            // Remove listener.
            const handlerFunc       = listening[0];
            document.removeEventListener(type, handlerFunc);
            // Update dictionary.
            delete                  document.eventListeners[type];
        }
    }
    // Return index.
    return                          iExists;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-05T09:34:49.780

Aliaksei Pavlenkos suggestion about *useCapture* can be used. His allegation that it must be attached to the parent node is wrong: [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)

*Event listeners in the “capturing” phase are called before event listeners in any non-capturing phases*

```
target.addEventListener(type, listener, useCapture); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-06T22:25:20.107

Just so it's said, I think this might be possible if you override the native implementations of these functions. This is BAD practice - very bad practice when developing a library to alter native implementations, because it can easily conflict with other libraries.

However, for completeness, here's one possibility (completely untested, just demonstrating the general concept):

```
// override createElement()
var temp = document.createElement;
document.createElement = function() {
    // create element
    var el = document.createElement.original.apply(document, arguments);

    // override addEventListener()
    el.addEventListenerOriginal = el.addEventListener;
    el._my_stored_events = [];

    // add custom functions
    el.addEventListener = addEventListenerCustom;
    el.addEventListenerFirst = addEventListenerFirst;
    // ...
};
document.createElement.original = temp;

// define main event listeners
function myMainEventListeners(type) {
    if (myMainEventListeners.all[type] === undefined) {
        myMainEventListeners.all[type] = function() {
            for (var i = 0; i < this._my_stored_events.length; i++) {
                var event = this._my_stored_events[i];
                if (event.type == type) {
                    event.listener.apply(this, arguments);
                }
            }
        }
    }
    return myMainEventListeners.all[type];
}
myMainEventListeners.all = {};

// define functions to mess with the event list
function addEventListenerCustom(type, listener, useCapture, wantsUntrusted) {
    // register handler in personal storage list
    this._my_stored_events.push({
        'type' : type,
        'listener' : listener
    });

    // register custom event handler
    if (this.type === undefined) {
        this.type = myMainEventListeners(type);
    }
}

function addEventListenerFirst(type, listener) {
    // register handler in personal storage list
    this._my_stored_events.push({
        'type' : type,
        'listener' : listener
    });

    // register custom event handler
    if (this.type === undefined) {
        this.type = myMainEventListeners(type);
    }
}

// ... 
```

A lot more work would need to be done in this regard to truly lock this down, and again, it's best not to modify native libraries. But it's a useful mental exercise that helps to demonstrate the flexibility JavaScript provides in solving problems like this.

# php - 如何在 gettext .po 文件中指定有序变量？

> ID：13979962
> 
> 赞同：2
> 
> 时间：2012-12-20T20:27:04.353
> 
> 标签：php, localization, translation, gettext, printf

我有一个使用 Zend_Translate PHP 数组来处理翻译的多语言站点。它工作正常，但我正在尝试转换为使用 gettext，因为它提供了额外的功能。

但是，我还没有发现我在 PHP 数组翻译中喜欢的功能的 gettext 等效项：*n$ 位置说明符*（[PHP sprintf 的示例 #4](http://www.php.net/manual/en/function.sprintf.php)）。

我找到了我想要的一个[很好的例子](http://codex.wordpress.org/Translating_WordPress#Examples_4)（注意变量的顺序在英文和中文中是如何不同的）：

```
#: wp-admin/upload.php:96
#, php-format
msgid "File %1$s of type %2$s is not allowed."
msgstr "类型为%2$s的文件%1$s不允许被上传。" 
```

但我还没有让它为我工作。我的**en/messages.po**文件有这个：

```
#, php-format
msgid "Earn X cash"
msgstr "%1$sEarn 1-30%% cash back%2$s, get money-saving coupons, and find the best price on every purchase at %3$s2,500+ stores%4$s." 
```

PHP 是这样的（它适用于翻译的数组样式，我认为它不应该改变）：

```
<?php echo $this->translate('Earn X cash', '<span class="earnCashBack">', '</span>', '<a href="/stores" class="numStores">', '</a>'); ?> 
```

HTML 出现错误，如下所示：

```
$sEarn 1-30% cash back$s, get money-saving coupons, and find the best price on every purchase at $s2,500+ stores$s. 
```

我必须如何编辑 .po 文件才能使其正常工作？还是我不应该使用[php-mo](https://raw.github.com/josscrowcroft/php.mo/master/php-mo.php)将 .po 编译到 .mo 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:58:28.050

在我尝试注释掉这行 php-mo.php 之后，我的 .po 和 .mo 文件可以正常工作（而且我的网页看起来不错）：

`$x = str_replace('$', '\\$', $x);`

我实际上根本不确定为什么那条线存在，但是删除它让我很紧张，因为我可能会引入我尚未发现的错误。但至少它解决了我*能*看到的问题！

# c# - 从字典中获取第一个元素

> ID：13979966
> 
> 赞同：59
> 
> 时间：2012-12-20T20:27:18.677
> 
> 标签：c#, asp.net, .net, .net-3.5

我有以下声明：

```
Dictionary<string, Dictionary<string, string>> like = new Dictionary<string, Dictionary<string, string>>(); 
```

我需要取出第一个元素，但不知道键或值。最好的方法是什么？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-12-20T20:28:35.177

注意`First`这里调用其实是调用了IEnumerable的一个Linq扩展，由`Dictionary<TKey,TValue>`. 但是对于字典来说，“第一”没有明确的含义。根据[这个答案](https://stackoverflow.com/q/436954/1001985)，添加的最后一项最终是“第一个”（换句话说，它的行为类似于*Stack*），但这是特定于实现的，它不是*保证*的行为。换句话说，*假设*您将通过调用*First*来获取任何已定义的项目，那就是自找麻烦——使用它应该被视为类似于从 Dictionary 中获取一个*随机*项目，如下 Bobson 所述。但是，有时这很有用，因为您只需要*任何*字典中的项目。

* * *

只需使用 Linq `First()`：

```
var first = like.First();
string key = first.Key;
Dictionary<string,string> val = first.Value; 
```

请注意，在这种情况下，在`First`字典上使用会为您提供, 。`KeyValuePair``KeyValuePair<string, Dictionary<string,string>>`

* * *

另请注意，您*可以*`First`通过将其与 Linq 结合使用来获得特定含义`OrderBy`：

```
var first = like.OrderBy(kvp => kvp.Key).First(); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-05-14T18:21:43.710

对于任何想要以无 linq 方式从字典中获取元素的**人来说**

```
var d = new Dictionary<string, string>();
d.Add("a", "b");
var e = d.GetEnumerator();
e.MoveNext();
var anElement = e.Current;
// anElement/e.Current is a KeyValuePair<string,string>
// where Key = "a", Value = "b" 
```

我不确定这是否是特定于实现的，但是如果您的 Dictionary 没有任何元素，`Current`则将包含 a`KeyValuePair<string, string>`其中 key 和 value 都是`null`。

（我查看了 linq 提出这个`First`方法背后的逻辑，并通过 进行了测试`LinqPad 4`）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-20T20:30:39.270

虽然您可以使用`First()`，但字典本身没有顺序。请改用[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)。然后你可以做`FirstOrDefault`。这样就有意义了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-20T20:34:52.147

编辑：使用 OrderedDictionary。

最好用于`FirstOrDefault()`检索第一个值。

前任：

```
var firstElement = like.FirstOrDefault();
string firstElementKey = firstElement.Key;
Dictinary<string,string> firstElementValue = firstElement.Value; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T20:29:24.203

```
using System.Linq;

Dictionary<string, Dictionary<string, string>> like = new Dictionary<string, Dictionary<string, string>>();
Dictionary<string, string> first = like.Values.First(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-20T20:30:15.297

字典没有定义项目的顺序。如果您只需要一个项目使用`Keys`或`Values`字典的属性来选择一个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-29T13:53:27.287

找不到在字典中找到第一个元素的简单方法:)

```
 Dictionary<string, Dictionary<string, string>> like = 
 newDictionary<string,Dictionary<string, string>>();

 foreach(KeyValuePair<string, Dictionary<string, string>> _element in like)
 {
   Console.WriteLine(_element.Key); // or do something
   break;
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-14T08:05:12.760

转换为数组

```
var array = like.ToArray();
var first = array[0]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-31T20:42:23.593

在性能、高兼容性（2.0、3.0、3.5、4.0、4.5、4.5.1、4.5.2、4.6、4.6.1、4.6.2、4.7、4.7.1、4.7 .2, 4.8) 并且易于实施。

今天保存！！它不仅仅是一个物品副本，这是一个收藏的物品参考！买吧！！

```
string [] arrayString = new string[like.Count];
like.Values.CopyTo( arrayString,0 );

arrayString[0] //First 
```

参考：

[https://docs.microsoft.com/es-es/dotnet/api/system.collections.generic.icollection-1.copyto?view=net-5.0](https://docs.microsoft.com/es-es/dotnet/api/system.collections.generic.icollection-1.copyto?view=net-5.0)

[https://social.msdn.microsoft.com/Forums/vstudio/en-US/dc5e4242-64d3-45ac-bdea-cf4f3d9abdbb/icollectioncopyto-vs-arraylisttoarray?forum=netfxbcl](https://social.msdn.microsoft.com/Forums/vstudio/en-US/dc5e4242-64d3-45ac-bdea-cf4f3d9abdbb/icollectioncopyto-vs-arraylisttoarray?forum=netfxbcl)

# javascript - 更改所有出现的字符串的样式

> ID：13979967
> 
> 赞同：5
> 
> 时间：2012-12-20T20:27:21.623
> 
> 标签：javascript, jquery, css, stylesheet, markup

出于品牌原因，我希望每次出现在标题中时，我的网站标题都以与其余内容不同的字体显示。为简单起见，假设我的特殊字体是 Courier，而我的公司名为 SparklePony。所以，像这样的一条线，

```
<h1 class="title">SparklePony Board of Directors</h1> 
```

将在我的网站默认字体 Arial 中显示带有“快递和董事会”中 SparklePony 一词的标题。（是的，我知道这会很可怕。）

我尝试过使用 jQuery 字符串替换，但我不想*替换*字符串，我只想在 Courier 中看到它（只为那个词添加一个类，或者类似的东西。）替换`SparklePony`导致`<span class="sparkle-pony">SparklePony</span>`整个带有标签的丑陋字符串以及要在我的网站上显示的所有内容，而不是添加类。

我的字符串替换有问题吗，还是有更好的方法来设置所有出现的字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T20:39:49.900

你可以这样做 - 指定你想要的选择器 - #('h1') 或按类。

```
$('.title').html(function(i,v){    
   return v.replace(/SparklePony/g,'<span class="sparkle">SparklePony</span>');
});
​ 
```

[http://jsfiddle.net/cQjsu/](http://jsfiddle.net/cQjsu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:33:26.940

如果没有看到代码（这在这样的问题中会很重要），最好的猜测是您使用`.text()`的而不是`.html()`正确解析 HTML 的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T20:38:25.740

它可以做一些整理，但这可能是一个很好的起点：http: [//jsfiddle.net/c24w/Fznh4/9/](http://jsfiddle.net/c24w/Fznh4/9/)。

HTML

```
<div id="title">Highlight this blah blah HiGhLiGhT THIS blah</div>
<button id="clickme">Click to highlight text</button> 
```

CSS

```
#title{
  font-family: sans-serif;
  font-size: 20pt;
  margin: 30px 0;
}
span.highlight{
  color: #09f;
  font-weight: bold;
} 
```

JavaScript

```
function highlightText(element, phrase, allOccurrences, caseSensitive){
  var modifiers = (allOccurrences ? 'g' : '') + (caseSensitive ? '' : 'i');
  var text = element.innerHTML;
  element.innerHTML = text.replace(new RegExp(phrase, modifiers), function(match){
    return '<span class="highlight">' + match + '</span>';
  });
}

var button = document.getElementById('clickme');
var el = document.getElementById('title');

button.onclick = function(){
  highlightText(el, 'highlight this', true, false);
  button.onclick = null;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T20:33:08.220

尝试这样的事情：

```
$.each($(".title"),function({
$(this).html($(this).html().replace("SparklePony","<span class='sparkle-pony'>SparklePony</span>"))
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T20:41:55.243

又好又短：

```
var $body = $("body");
$body.html($body.html().replace(/SparklePony/ig, "<span class='cool'>SparklePony</span>"));​ 
```

但请记住，这`$("body")`是一个非常昂贵的选择器。您应该考虑更精确的父目标。

[演示在这里（小提琴）](http://jsfiddle.net/59PrJ/1/)

# php - pushState 和 http_build_query 在查询字符串中生成随机数

> ID：13979973
> 
> 赞同：1
> 
> 时间：2012-12-20T20:27:58.360
> 
> 标签：php, html, pushstate

当我将 pushState 与 http_build_query 一起使用时，它会在查询字符串中生成随机数。

例如：

example.com/? **_=1356033912215** &...

但是，如果我不使用 http_build_query，则不会显示此参数。此外，每个数字都以 13560 开头...

这个参数是什么意思？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:38:45.957

我可能是错的，但我相信这就是所谓的缓存破坏者。`$.ajax`当您将 jQuery与`cache: false`集合一起使用时，我之前在我自己的代码中看到过这一点。

jQuery 在查询字符串的末尾生成一个时间戳，以强制页面重新加载并从服务器拉取数据。这是一种欺骗浏览器重新加载最近在服务器端更新但可能已在客户端缓存的内容的方法。

似乎 http_build_query 正在执行类似的缓存清除功能。

关于前几个数字，我冒昧地猜测时间戳很可能在几秒钟内生成，所以如果你明白我在说什么，前面的数字不会经常翻转。一百万秒是很长的时间，所以你不会在短时间内看到前面数字的差异。

# php - 带有表单警报框的php

> ID：13979976
> 
> 赞同：1
> 
> 时间：2012-12-20T20:28:13.477
> 
> 标签：php, forms, submit

我希望此`php`表单在完成时或出现错误时弹出警告框。我需要添加或更改什么来实现这一点，或者是添加了`javascript`什么？

```
<?php
    $name = $_POST['fullname'];
    $email = $_POST['email'];
    $message = $_POST['comment'];
    $from = 'From: Contact Form'; 
    $to = 'email@domain.com'; 
    $subject = 'Hello';

    $body = "From: $name\n E-Mail: $email\n Message:\n $message";

    if (mail ($to, $subject, $body, $from)) { 
        echo '<p>Your message has been sent!</p>';
    } else { 
        echo '<p>Something went wrong, go back and try again!</p>'; 
    }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:30:11.403

为此，您需要添加更多技术，特别是 Javascript 和 AJAX。

PHP 是一种服务器端语言，这意味着当浏览器呈现页面时，PHP 已经完成运行您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:31:36.443

在将显示错误的页面中，您将添加 javascript 以使用 alert() 函数弹出消息。您可以使用 php 有条件地输出此 javascript。OY合租。

例子：

```
<script language='javascript'>
    <?php if ($error) { ?>
    window.onload = function() {
        alert('<?php echo $error?>');
    }        
    <?php } ?>
</script> 
```

类似的东西。

# android - 如何使用 NFC 从 Windows Phone 8 向 Android 设备发送字符串

> ID：13979984
> 
> 赞同：13
> 
> 时间：2012-12-20T20:28:41.043
> 
> 标签：android, windows, nfc, windows-phone-8, ndef

对此使用谷歌没有任何运气，所以我想我会问。

有没有人有任何经验/知道如何从 Windows Phone 8 设备向 Android 设备发送一个简单的字符串，即“hello”？

到目前为止，我们已经能够做到 android -> android 和 android -> windows phone 8，但我们还没有找到从 windows phone 8 到 android 的方法。

有没有人在网上看过指南或知道如何做这样的事情？

我想第一步是找出如何让windows phone 8上的应用程序实现它靠近android NFC设备..然后是弄清楚如何让android手机上的应用程序接收消息。

提前致谢！

*** 回答 ***

好的，这里有一些答案/提示

我最终将 NFC 消息作为外部类型发送，因为发送 application/my.mimetype 一直在 Windows 手机上给我一个“抱歉你的手机无法识别这种类型的文件”，即使消息正在通过。

```
@Override
public NdefMessage createNdefMessage(NfcEvent event) {

    NdefMessage ndefMessage = new NdefMessage(( 
            new NdefRecord[] {createMimeRecord("packageName:externalType",docId.getBytes())}));

    return ndefMessage;
}

public NdefRecord createMimeRecord(String mimeType, byte[] payload) {
    byte[] mimeBytes = mimeType.getBytes(Charset.forName("US-ASCII"));
    NdefRecord mimeRecord = new NdefRecord(NdefRecord.TNF_EXTERNAL_TYPE, mimeBytes, new byte[0], payload);
    return mimeRecord;
} 
```

您在 android 中所要做的就是遵循 SDK 示例 (android-16/17 - AndroidBeamDemo) 中的 android 示例，这在此处进行了非常彻底的解释 - [http://www.tappednfc.com/wp-content/uploads/TAPPED -NFCDeveloperGuide-Part1.pdf](http://www.tappednfc.com/wp-content/uploads/TAPPED-NFCDeveloperGuide-Part1.pdf)

但不要使用应用程序 mimetype，而是使用上述外部类型，并在您的清单中将以下内容而不是 mimetype 放在意图过滤器中：

```
 <data
                android:host="ext"
                android:pathPrefix="/cco.drugformulary:externalType"
                android:scheme="vnd.android.nfc" /> 
```

关于从 Windows Phone 阅读和发送消息，您可以使用接受的答案家伙所说的内容，它应该可以工作，但对于类型 put cco.drugformulary:externalType 如上所述（当然是您的项目名称）。

如果您遇到任何问题，请随时问我

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T01:45:31.813

使用 WP8 NFC 时，您可以使用两种类型的消息：特定于窗口的消息和 NDEF 消息。Windows 特定消息很容易发现，因为您将它们作为“Windows.*”消息类型发布。然而，NDEF 消息使用“NDEF”消息类型发布。例如，这是一条特定于 Windows 应用程序的消息：

```
 private void WriteAppSpecificStringToTag(object sender, RoutedEventArgs e)
    {
        ProximityDevice device = ProximityDevice.GetDefault();

        if (device != null)
        {
            device.PublishBinaryMessage("Windows:WriteTag.myApp",
                GetBufferFromString("Hello World!"),
                UnregisterOnSend);

            MessageBox.Show("Tap to write 'Hello World' on tag.");
        }
    } 
```

NDEF 是一种广泛使用的跨平台格式，旨在优化 NFC 标签的空间受限环境（通常小于 100 字节）。虽然 WP8 Proximity 框架允许发送和接收 NDEF 消息，但它对 NDEF 格式一无所知。这意味着，WP8 邻近框架发送和接收字节流。解析该字节流并正确格式化它是您作为应用程序开发人员的责任。

为了格式化和解析 NDEF 消息，您需要使用 3rd 方框架或构建自己的框架。在 3rd 方框架方面，[用于 Proximity API 的 NDEF 库](http://ndef.codeplex.com/)做得很好。

例如，以下是如何使用[NDEF 库](http://ndef.codeplex.com/)格式化和编写特定于应用程序的 NDEF 消息：

```
 private void WriteNDEFRecordToTag(object sender, RoutedEventArgs e)
    {
        ProximityDevice device = ProximityDevice.GetDefault();

        if (device != null)
        {
            device.PublishBinaryMessage("NDEF:WriteTag",
                new NdefMessage()
                {
                    new NdefRecord
                    {
                        TypeNameFormat = NdefRecord.TypeNameFormatType.ExternalRtd,
                        Type = "myApp".Select(c => (byte) c).ToArray(),
                        Payload = "Hello World!".Select(c => (byte) c).ToArray()
                    }
                }.ToByteArray().AsBuffer(),
                UnregisterOnSend);

            MessageBox.Show("Tap to write 'Hello World' on tag.");
        }
    } 
```

以下是在您的应用程序中接收和解析 NDEF 消息的方法：

```
 private void ReadNDEFRecordFromTag(object sender, RoutedEventArgs e)
    {
        ProximityDevice device = ProximityDevice.GetDefault();

        if (device != null)
        {
            device.SubscribeForMessage("NDEF", ndefMessageRecieved);

            MessageBox.Show("Registered to NFC tag. Tap with NFC tag.");
        }
    }

    private void ndefMessageRecieved(ProximityDevice sender, ProximityMessage message)
    {
        var ndefMessage = NdefMessage.FromByteArray(message.Data.ToArray());

        StringBuilder sb = new StringBuilder();
        foreach (NdefRecord record in ndefMessage)
        {
            sb.AppendLine(Encoding.UTF8.GetString(record.Payload, 0, record.Payload.Length));
        }
        Dispatcher.BeginInvoke(() => MessageBox.Show(sb.ToString()));
    } 
```

当我们在 WP8 上运行此代码片段并点击之前编写的 NDEF 标签时，我们可以看到以下消息：

![MessageBox 说 Hello World](../Images/2889fe43722766930717287a99714064.png)

如果我们使用相同的 NFC 标签并使用 Android 的[NFC TagInfo](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo&hl=en)应用程序，我们可以看到相同的数据：

![Android 上的 NfcTag 信息数据](../Images/afa73d1f3f5e4aed11345c8a9079bde5.png)

如果您想知道使用 NDEF 时实际传输/传输的内容，这里是我们刚刚使用的标签上的 GoToTags Windows 应用程序：

![GoToTags 显示存储在 NDEF 标记中的二进制数据](../Images/25ce2d94ecfc68909ffa3aae85822468.png)

如果 NDEF 库对您来说有点沉重，您可以随时使用您自己开发的 NDEF 格式化程序和解析器。在这个诺基亚 OSS 项目[@NFC Tag Reader中有一个很好的例子](https://projects.developer.nokia.com/nfctagreader)

关于 NFC 电话到电话与 NFC 电话到标签，上面的代码片段适用于任何一种情况。如果你想写一个标签，simlpy 将 ":WriteTag" 操作保留在消息类型中。如果您想直接与附近的手机通信，只需删除“:WriteTag”操作即可。两者都适用于 WP8<=>Android。

请注意，Android 和 WP8 处理 NDEF 的方式存在差异。WP8 只能读取消息中的第一条 NDEF 记录，而 Android 可以读取所有 NDEF 记录。Android 可以使用非 NDEF 格式的标签并对其进行格式化；WP8 必须使用 NDEF 格式的标签。

# c# - ContextMenuStrip - 防止通过按键选择项目

> ID：13979997
> 
> 赞同：0
> 
> 时间：2012-12-20T20:29:26.827
> 
> 标签：c#, .net, winforms

当 ContextMenuStrip 打开时，例如，选择了一个选项`Copy`- 如果用户按下`C`- `Copy`。

如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:31:39.160

如果设置`KeyPressEventArgs.Handled`字段不起作用，您可能需要捕获`PreviewKeyDown`事件并将事件更改为*不是*输入键 ( `PreviewKeyDownEventArgs.IsInputKey = false`) 以防止它被视为常规 KeyDown/KeyUp/KeyPress。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.control.previewkeydown(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.control.previewkeydown(v=vs.110).aspx)。

注意：您还必须将所有 KeyPress 处理代码移动到 PreviewKeyDown，因为当您将 IsInputKey 设置为 false 时，您将停止获取 KeyPress 事件。

# c - 为什么我得到“赋值使指针从整数而不进行强制转换”？

> ID：13979999
> 
> 赞同：-3
> 
> 时间：2012-12-20T20:29:50.673
> 
> 标签：c, arrays, pointers

> **可能的重复：**
> [赋值从没有强制转换的整数生成](https://stackoverflow.com/questions/2682016/assignment-makes-pointer-from-integer-without-a-cast)
> [指针赋值从没有强制转换的整数生成指针](https://stackoverflow.com/questions/3430909/assignment-makes-pointer-from-integer-without-a-cast)

我目前正在学习 C 并且有点挣扎。我正在制作一个循环一系列问题并填充一系列答案的程序。我不断收到以下警告：

```
/var/Cprograms/quiz.c|24|warning: assignment makes pointer from integer without a cast [enabled by default]| 
```

我仍在尝试掌握指针的用法，我可能完全错误地使用它们，但这就是我来这里学习的原因。所以我需要帮助弄清楚我在第 24 行做错了什么，以便让程序正常工作并最终让它打印出答案。这是到目前为止的代码

```
#include <stdio.h>

/*
Yes or no Question Quiz:
get answers from command prompt
and print answers at end of session
using pointers
*/

/* char *gets(char *s) */

void loopQuiz (void)
 {
     char *questions[] = {"Is true == true?", "Is 0 == 1?", "Does water have atleast 3 phases?", "Is C a programming language?"};
     char *answers[3];

     int i = 0;
     int count = sizeof(questions) / sizeof(int);

     do
      {
          printf("%s \n", questions[i]);
          answers[i] = getchar();
          i++;
      }
     while (i < count);

    /*print function to go here*/
 }

int main (void)
 {
     loopQuiz();
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:33:39.597

```
char *answers[3]; 
```

`answers`是一个由 3 个指向 char 的指针组成的数组。

```
answers[i] = getchar(); 
```

尝试将 int 分配给`answers[i]`. 你的类型是错误的。 `getchar`返回一个`unsigned char`转换为 int 的（除非你点击`EOF`），所以你想要的是......

```
char answers[3]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:33:40.827

（你欠我一笔捐款，直到你的代码中的第 24 行计数......）

问题出在这一行：

```
answers[i] = getchar(); 
```

由于`answers`是 的数组`char *`，但您将一个`int`（的返回值`getchar()`）分配给它的一个成员，因此这是一个无效的分配。我看不出你期望这样做，但这肯定是错误的。您需要分配一个`char *`to `answers[i]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T20:34:53.547

```
answers[i] = getchar(); 
```

`getchar()`返回一个`int`，但是

```
char *answers[3]; 
```

`answers`被声明为指针数组，因此您将整数分配给指针而不进行强制转换，正如错误消息所述。