# StackOverflow 问答 12914000-12914999

# c# - 如何使用 XNA 加载文件夹中的所有文件？

> ID：12914002
> 
> 赞同：6
> 
> 时间：2012-10-16T11:46:01.987
> 
> 标签：c#, xna

我想使用**Content.Load("filename");将文件夹****“Content/textures”**中的所有文件加载到游戏中；

 **但是，我无法以这种方式“找到”位于 Content 内的文件（程序宁愿查看**“bin/debug/../Content/textures”**，但是在尝试在那里加载 jpg/png 文件时出现错误内容加载。

我怎样才能实现我想要做的事情？我想将 Content 内的一个文件夹中的所有文件（哪个内容文件夹是正确的？）加载到游戏中，这样我就不必指定每个纹理。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T12:33:39.463

您可以使用此帮助程序类来执行此操作。它通过获取给定目录并使用该`GetFiles()`方法创建需要加载的所有纹理的列表来工作。然后，它会像往常一样使用您的 加载它们`ContentManager`，并将它们放入字典中，以便您可以使用它们。

```
 public static class TextureContent
    {
        public static Dictionary<string, T> LoadListContent<T>(this ContentManager contentManager, string contentFolder)
        {
            DirectoryInfo dir = new DirectoryInfo(contentManager.RootDirectory + "/" + contentFolder);
            if (!dir.Exists)
                throw new DirectoryNotFoundException();
            Dictionary<String, T> result = new Dictionary<String, T>();

            FileInfo[] files = dir.GetFiles("*.*");
            foreach (FileInfo file in files)
            {
                string key = Path.GetFileNameWithoutExtension(file.Name);

                result[key] = contentManager.Load<T>(contentFolder + "/" + key);
            }
            return result;
        }
    } 
```

创建一个字典来存储纹理，而不是一行一行的`Texture2D`s

```
 public Dictionary<string, Texture2D> spriteContent; 
```

...并在您的方法中调用该`LoadContent`方法

```
 spriteContent = TextureContent.LoadListContent<Texture2D>(content, "textures"); 
```

现在，每当您需要其中的纹理时，只需执行以下操作：

```
Whatever.Image = spriteContent["WhateverTexture"] 
```

确保`TextureName`是纹理的资产名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:21:32.327

XNA 中的内容需要使用内容管道构建。它将您的`.png`文件（等等）转换为`.xnb`文件。这些是经过处理的二进制内容文件，`ContentManager`可以在运行时加载到`Texture2D`实例中。

（请注意，您可以使用`Texture2D.FromStream`- [MSDN](http://msdn.microsoft.com/en-us/library/ff434102(v=xnagamestudio.40).aspx)直接加载图像文件。但是它不会预乘 alpha，这是 XNA 的默认渲染模式使用的。）

所以首先你必须得到你所有的内容文件来构建。XNA 内容管道使用 MSBuild。Visual Studio 中的项目文件***是***一个 MSBuild 文件。因此，您需要做的是手动编辑该项目文件以使用通配符构建一组文件。[这篇博文](http://blogs.msdn.com/b/shawnhar/archive/2007/06/06/wildcard-content-using-msbuild.aspx)中有一些说明，它链接自我很久以前问过的这个[非常相似的问题。](https://stackoverflow.com/questions/3234307/wildcard-for-content-in-an-xna-content-project)

XNA 中构建的内容文件只是存储在文件系统中，相对于游戏的输出目录。所以`Directory.GetFiles`用来枚举`.xnb`目录下的文件。然后构造一个相对于内容目录 ( `ContentManager.RootDirectory`) 的加载路径，使用不带扩展名的文件名（您可以使用 获取`Path.GetFileNameWithoutExtension`）。然后，只需将您构建的路径传递`Content.Load<Texture2D>`给加载每个路径。

（请注意，`.xnb`文件可以包含纹理以外的东西。所以你应该注意你的目录只包含纹理。否则你需要捕获`ContentManager.Load<Texture2D>`将抛出的异常。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:52:43.757

With XNA, you have to specify each and every texture, because you want them to have a unique and easy name. if you want to load a variable amount of textures from a folder, you could use this example: [http://www.csharp-examples.net/get-files-from-directory/](http://www.csharp-examples.net/get-files-from-directory/)**

# ios - UINavigationBar TitleView 带字幕

> ID：12914004
> 
> 赞同：14
> 
> 时间：2012-10-16T11:46:09.923
> 
> 标签：ios, uinavigationbar, titleview

我想在 UINavigationBar 中有一个 titleView，它有两行文本，而不是只有一行

当我有一个“后退”按钮和一个“编辑”按钮时，我当前的实现效果很好，因为它看起来几乎居中。问题是当我只有一个按钮时。它看起来非常奇怪和错误，因为视图以可用空间为中心。

[带有左右按钮的 UINavigationBar](http://twitpic.com/b4nxq7)

[UINavigationBar 只有一个按钮](http://twitpic.com/b4ny7t)

这是我目前的实现：

```
CGRect frame = self.navigationController.navigationBar.frame;

UIView *twoLineTitleView = [[UIView alloc] initWithFrame:CGRectMake(CGRectGetWidth(frame), 0, CGRectGetWidth(frame), CGRectGetHeight(frame))];

UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 8, CGRectGetWidth(frame), 14)];
titleLabel.backgroundColor = [UIColor clearColor];
titleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
titleLabel.textAlignment = UITextAlignmentCenter;
titleLabel.text = self.title;
[twoLineTitleView addSubview:titleLabel];

UILabel *subTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 23, CGRectGetWidth(frame), 14)];
subTitleLabel.backgroundColor = [UIColor clearColor];
subTitleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
subTitleLabel.textAlignment = UITextAlignmentCenter;
subTitleLabel.text = self.subTitle;
[twoLineTitleView addSubview:subTitleLabel];

self.navigationItem.titleView = twoLineTitleView; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-04-21T12:17:56.303

这是我的做法：

*   对两个标签中的每一个使用 sizeToFit。
*   将容器视图的宽度设置为两个标签的最大宽度。
*   在视图上居中两个标签中较小的一个。

此代码应该适合您：

```
 UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    titleLabel.backgroundColor = [UIColor clearColor];
    titleLabel.textColor = [UIColor whiteColor];
    titleLabel.font = [UIFont boldSystemFontOfSize:20];
    titleLabel.text = @"Your Title";
    [titleLabel sizeToFit];

    UILabel *subTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 22, 0, 0)];
    subTitleLabel.backgroundColor = [UIColor clearColor];
    subTitleLabel.textColor = [UIColor whiteColor];
    subTitleLabel.font = [UIFont systemFontOfSize:12];
    subTitleLabel.text = @"Your subtitle";
    [subTitleLabel sizeToFit];

    UIView *twoLineTitleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, MAX(subTitleLabel.frame.size.width, titleLabel.frame.size.width), 30)];
    [twoLineTitleView addSubview:titleLabel];
    [twoLineTitleView addSubview:subTitleLabel];

    float widthDiff = subTitleLabel.frame.size.width - titleLabel.frame.size.width;

    if (widthDiff > 0) {
        CGRect frame = titleLabel.frame;
        frame.origin.x = widthDiff / 2;
        titleLabel.frame = CGRectIntegral(frame);
    }else{
        CGRect frame = subTitleLabel.frame;
        frame.origin.x = abs(widthDiff) / 2;
        subTitleLabel.frame = CGRectIntegral(frame);
    }

    self.navigationItem.titleView = twoLineTitleView; 
```

**Swift 3 变体：**

```
 let titleLabel = UILabel.init(frame: CGRect.zero)
    titleLabel.backgroundColor = UIColor.clear
    titleLabel.textColor = UIColor.schBlack
    titleLabel.font = UIFont.schTextStyle2Font()
    titleLabel.text = titleString;
    titleLabel.sizeToFit()

    let subTitleLabel = UILabel.init(frame: CGRect.init(x: 0, y: 22, width: 0, height: 0))
    subTitleLabel.backgroundColor = UIColor.clear
    subTitleLabel.textColor = UIColor.schBrownishGrey
    subTitleLabel.font = UIFont.schTextStyle3Font()
    subTitleLabel.text = subTitleString;
    subTitleLabel.sizeToFit()

    let twoLineTitleView = UIView.init(frame: CGRect.init(x: 0, y: 0, width: self.view.frame.width-40, height: 30))
    twoLineTitleView.addSubview(titleLabel)
    twoLineTitleView.addSubview(subTitleLabel)

    /*

    float widthDiff = subTitleLabel.frame.size.width - titleLabel.frame.size.width;
    if (widthDiff > 0) {
        CGRect frame = titleLabel.frame;
        frame.origin.x = widthDiff / 2;
        titleLabel.frame = CGRectIntegral(frame);
    }else{
        CGRect frame = subTitleLabel.frame;
        frame.origin.x = abs(widthDiff) / 2;
        subTitleLabel.frame = CGRectIntegral(frame);
    }
    */

    self.navigationItem.titleView = twoLineTitleView; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T12:40:09.253

另一种方法可能是使用[提示](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html#//apple_ref/occ/instp/UINavigationItem/prompt)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-09T05:29:06.580

对 Brian van den hovel 的答案进行了一些补充，以更好地集中标题和副标题。

```
func setTitle(title:String, subtitle:String) -> UIView {
    //Create a label programmatically and give it its property's
    let titleLabel = UILabel(frame: CGRectMake(0, 0, 0, 0)) //x, y, width, height where y is to offset from the view center
    titleLabel.backgroundColor = UIColor.clearColor()
    titleLabel.textColor = UIColor.blackColor()
    titleLabel.font = UIFont.boldSystemFontOfSize(17)
    titleLabel.text = title
    titleLabel.sizeToFit()

    //Create a label for the Subtitle
    let subtitleLabel = UILabel(frame: CGRectMake(0, 18, 0, 0))
    subtitleLabel.backgroundColor = UIColor.clearColor()
    subtitleLabel.textColor = UIColor.lightGrayColor()
    subtitleLabel.font = UIFont.systemFontOfSize(12)
    subtitleLabel.text = subtitle
    subtitleLabel.sizeToFit()

    // Create a view and add titleLabel and subtitleLabel as subviews setting
    let titleView = UIView(frame: CGRectMake(0, 0, max(titleLabel.frame.size.width, subtitleLabel.frame.size.width), 30))

    // Center title or subtitle on screen (depending on which is larger)
    if titleLabel.frame.width >= subtitleLabel.frame.width {
        var adjustment = subtitleLabel.frame
        adjustment.origin.x = titleView.frame.origin.x + (titleView.frame.width/2) - (subtitleLabel.frame.width/2)
        subtitleLabel.frame = adjustment
    } else {
        var adjustment = titleLabel.frame
        adjustment.origin.x = titleView.frame.origin.x + (titleView.frame.width/2) - (titleLabel.frame.width/2)
        titleLabel.frame = adjustment
    }

    titleView.addSubview(titleLabel)
    titleView.addSubview(subtitleLabel)

    return titleView
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-25T15:43:37.640

您还可以使用属性字符串来实现相同的结果：

```
let subtitleAttribute = [NSForegroundColorAttributeName: UIColor.grayColor() , NSFontAttributeName: UIFont.systemFontOfSize(12.0)]
let titleString = NSMutableAttributedString(string: "title" + "\n", attributes: [NSFontAttributeName: UIFont.boldSystemFontOfSize(17.0)])
let subtitleString = NSAttributedString(string: "subtitle", attributes: subtitleAttribute)
titleString.appendAttributedString(subtitleString)

let label = UILabel(frame: CGRectMake(0, 0, titleString.size().width, 44))
label.numberOfLines = 0
label.textAlignment = NSTextAlignment.Center
label.attributedText = titleString
self.navigationItem.titleView = label 
```

**斯威夫特 3**

```
let subtitleAttribute = [NSForegroundColorAttributeName: UIColor.gray , NSFontAttributeName: UIFont.systemFont(ofSize: 12.0)]
let titleString = NSMutableAttributedString(string: "title" + "\n", attributes: [NSFontAttributeName: UIFont.boldSystemFont(ofSize: 17.0)])
let subtitleString = NSAttributedString(string: "subtitle", attributes: subtitleAttribute)
titleString.append(subtitleString)

let label = UILabel(frame: CGRect(x: 0, y: 0, width: titleString.size().width, height: 44))
label.numberOfLines = 0
label.textAlignment = NSTextAlignment.center
label.attributedText = titleString
self.navigationItem.titleView = label 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-24T09:55:42.097

除了[github](https://gist.github.com/nazywamsiepawel/0166e8a71d74e96c7898 "Github 网站 - UINavigationBar 带字幕/Swift")！这里。

我发现当我的字幕小于我的标题时，它不会正确格式化，这是正确的代码。

```
//Usage:
self.navigationItem.titleView = setTitle(varDec.currentDate(), subtitle: varDec.currentDay())

 func setTitle(title:String, subtitle:String) -> UIView {
    //Create a label programmatically and give it its property's
    let titleLabel = UILabel(frame: CGRectMake(0, -5, 0, 0)) //x, y, width, height where y is to offset from the view center
    titleLabel.backgroundColor = UIColor.clearColor()
    titleLabel.textColor = UIColor.blackColor()
    titleLabel.font = UIFont.boldSystemFontOfSize(17)
    titleLabel.text = title
    titleLabel.sizeToFit()

    //Create a label for the Subtitle
    // x, y, width, height where x is set to be half the size of the title (100/4 = 25%) as it starts all the way left.
    let subtitleLabel = UILabel(frame: CGRectMake(titleLabel.frame.size.width / 4, 18, 0, 0)) 
    subtitleLabel.backgroundColor = UIColor.clearColor()
    subtitleLabel.textColor = UIColor.lightGrayColor()
    subtitleLabel.font = UIFont.systemFontOfSize(12)
    subtitleLabel.text = subtitle
    subtitleLabel.sizeToFit()

    /*Create a view and add titleLabel and subtitleLabel as subviews setting 
     * its width to the bigger of both
     * this will crash the program if subtitle is bigger then title
     */
    let titleView = UIView(frame: CGRectMake(0, 0, max(titleLabel.frame.size.width, subtitleLabel.frame.size.width), 30))
    titleView.addSubview(titleLabel)
    titleView.addSubview(subtitleLabel)

    return titleView
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-29T16:58:19.520

[https://www.reddit.com/r/swift/comments/3izq7b/style_guidelines_for_navigation_bar_prompts/](https://www.reddit.com/r/swift/comments/3izq7b/style_guidelines_for_navigation_bar_prompts/)

```
extension UINavigationItem {

    //Make the title 2 lines with a title and a subtitle
    func addTitleAndSubtitleToNavigationBar (title: String, subtitle: String) {
        var label = UILabel(frame: CGRectMake(10.0, 0.0, 50.0, 40.0))
        label.font = UIFont.boldSystemFontOfSize(14.0)
        label.numberOfLines = 2
        label.text = "\(title)\n\(subtitle)"
        label.textColor = UIColor.blackColor()
        label.sizeToFit()
        label.textAlignment = NSTextAlignment.Center
        self.titleView = label
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-12T10:17:13.243

我通过完全替换标题视图来做到这一点。最终结果如下所示：

[![在此处输入图像描述](../Images/e466741c521a4aabc2959d1478f72c6a.png)](https://i.stack.imgur.com/erReQ.png)

可以通过`viewDidLoad`方法中的以下代码来实现。

```
UIView * containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 220, 40)];

UILabel * titleLabel = [[UILabel alloc] init];
titleLabel.text = @"Ttitle";
titleLabel.textAlignment = NSTextAlignmentCenter;
titleLabel.font = [UIFont boldSystemFontOfSize:titleLabel.font.pointSize];

[containerView addSubview:titleLabel];
titleLabel.keepInsets.equal = 0;
titleLabel.keepBottomInset.equal = 10;

UILabel * subtitleLabel = [[UILabel alloc] init];
subtitleLabel.textAlignment = NSTextAlignmentCenter;
subtitleLabel.font = [UIFont italicSystemFontOfSize:12.0];
subtitleLabel.textColor = [UIColor lightGrayColor];

[containerView addSubview:subtitleLabel];

subtitleLabel.keepHeight.equal = 15;
subtitleLabel.keepWidth.equal = 200;
subtitleLabel.keepBottomInset.equal = 0;
subtitleLabel.keepHorizontalCenter.equal = 0.5;

subtitleLabel.text = @"Subtitle";

[self.navigationItem setTitleView:containerView]; 
```

为此，我使用了出色的[KeepLayout](https://github.com/Tricertops/KeepLayout)库。它产生这样的结果：

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-10T08:00:50.267

受@Ben Smiley 的启发，我添加了一个砌体实现。

```
CGFloat width = 200;
CGFloat titleHeight = 25;
CGFloat containerHeight = 40;

UIView * containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, width, containerHeight)];
UILabel * titleLabel = [[UILabel alloc] init];
titleLabel.text = @"Title";
titleLabel.textAlignment = NSTextAlignmentCenter;
titleLabel.font = [UIFont boldSystemFontOfSize:titleLabel.font.pointSize];

[containerView addSubview:titleLabel];
[titleLabel mas_makeConstraints:^(MASConstraintMaker *make) {
    make.top.mas_equalTo(0);
    make.left.mas_equalTo(0);
    make.right.mas_equalTo(0);
    make.width.mas_equalTo(width);
    make.height.mas_equalTo(titleHeight);

}];

UILabel * subtitleLabel = [[UILabel alloc] init];
subtitleLabel.textAlignment = NSTextAlignmentCenter;
subtitleLabel.font = [UIFont systemFontOfSize:12];

[containerView addSubview:subtitleLabel];

[subtitleLabel mas_makeConstraints:^(MASConstraintMaker *make) {
    make.left.mas_equalTo(0);
    make.right.mas_equalTo(0);
    make.top.mas_equalTo(titleLabel.mas_bottom);
    make.width.mas_equalTo(width);
    make.height.mas_equalTo(containerHeight - titleHeight);

}];

subtitleLabel.text = @"Subtitle";

[self.navigationItem setTitleView:containerView]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-02T10:02:29.010

我使用的是 Rodrigo Pedroso's [answer](https://stackoverflow.com/a/34171372/1469018)，但它不会截断长标题这一事实成为一个问题。我制作了一个版本，用于测量栏按钮项之间的标题有多少空间，然后手动截断标题以适应该空间。截断代码改编自[这个答案](https://stackoverflow.com/a/26397013/1469018)，有点乱——也许有人可以帮助找出一种使用 UILabel 内置截断方法（即 .ByTruncatingTail）的方法。不过，我已经在这上面花费了太多时间。

这是我所拥有的：

```
extension UIViewController {

    private var availableWidthForTitle: CGFloat {
        get {
            var total = UIScreen.mainScreen().bounds.width
            if let navigationBar = navigationController?.navigationBar {
                var maxYLeft:  CGFloat = 0
                var minYRight: CGFloat = 0
                for subview in navigationBar.subviews.dropFirst()
                    where !subview.hidden {
                    if subview.frame.origin.x < total / 2 {
                        let rightEdge = subview.frame.origin.x + subview.frame.size.width
                        if rightEdge < total / 2 {
                            maxYLeft = max(maxYLeft, rightEdge)
                        }
                    } else {
                        let leftEdge = subview.frame.origin.x
                        if leftEdge > total / 2 {
                            minYRight = min(minYRight, total - leftEdge)
                        }
                    }
                }
                total = total - maxYLeft - minYRight
            }

            return total
        }
    }

    func setTitle(title:String, subtitle:String?) {
        if (subtitle == nil) {
            self.title = title.uppercaseString
        } else {
            let titleLabel = UILabel(frame: CGRectMake(0, -2, 0, 0))
            titleLabel.backgroundColor = UIColor.clearColor()
            titleLabel.textColor = MaterialColor.white
            titleLabel.font = RobotoFont.boldWithSize(17)
            titleLabel.textAlignment = .Center
            let availableWidth = availableWidthForTitle
            let titleUppercase = NSString(string: title.uppercaseString)
            if titleUppercase.boundingRectWithSize(
                // if title needs to be truncated
                CGSize(width: CGFloat.max, height: CGFloat.max),
                options: NSStringDrawingOptions.UsesLineFragmentOrigin,
                attributes: [NSFontAttributeName : titleLabel.font],
                context: nil).width > availableWidth {
                let truncTitle: NSMutableString = ""
                for nextChar in title.uppercaseString.characters {
                    if truncTitle.boundingRectWithSize(
                        CGSize(width: CGFloat.max, height: CGFloat.max),
                        options: NSStringDrawingOptions.UsesLineFragmentOrigin,
                        attributes: [NSFontAttributeName : titleLabel.font],
                        context: nil).width > availableWidth - 16 { // for ellipsis + some margin
                        truncTitle.appendString("...")
                        break
                    } else {
                        truncTitle.appendString(String(nextChar))
                    }
                }
                titleLabel.text = truncTitle as String
            } else {
                // use title as-is
                titleLabel.text = titleUppercase as String
            }
            titleLabel.sizeToFit()
            let subtitleLabel = UILabel(frame: CGRectMake(0, 18, 0, 0))
            subtitleLabel.backgroundColor = UIColor.clearColor()
            subtitleLabel.textColor = MaterialColor.white
            subtitleLabel.font = MaterialFont.italicSystemFontWithSize(10)
            subtitleLabel.text = subtitle
            subtitleLabel.sizeToFit()

            let titleView = UIView(frame: CGRectMake(0, 0, max(titleLabel.frame.size.width, subtitleLabel.frame.size.width), 30))
            // Center title or subtitle on screen (depending on which is larger)
            if titleLabel.frame.width >= subtitleLabel.frame.width {
                var adjustment = subtitleLabel.frame
                adjustment.origin.x = titleView.frame.origin.x + (titleView.frame.width/2) - (subtitleLabel.frame.width/2)
                subtitleLabel.frame = adjustment
            } else {
                var adjustment = titleLabel.frame
                adjustment.origin.x = titleView.frame.origin.x + (titleView.frame.width/2) - (titleLabel.frame.width/2)
                titleLabel.frame = adjustment
            }

            titleView.addSubview(titleLabel)
            titleView.addSubview(subtitleLabel)
            self.navigationItem.titleView = titleView
        }
    }
} 
```

# mongodb - Mongo Java 驱动程序和映射器性能

> ID：12914006
> 
> 赞同：4
> 
> 时间：2012-10-16T11:46:13.363
> 
> 标签：mongodb, mongomapper, morphia, jongo

Java 中的 Mongo 可以与多种工具一起使用：

*   10gen[官方驱动](http://www.mongodb.org/display/DOCS/Java+Tutorial)
*   一个替代的[异步 Java 驱动程序](http://www.allanbank.com/mongodb-async-driver)
*   映射器 — 建立在驱动程序之上的库 — [Morphia](http://code.google.com/p/morphia)、[Jongo](http://www.jongo.org) ...（*查看[完整列表](http://www.mongodb.org/display/DOCS/Java+Language+Center#JavaLanguageCenter-POJOMappers)*）

是否有一些基准比较映射器与驱动程序的性能以及相互之间的比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:22:33.143

不幸的是，没有我知道的基准。驱动程序主页在[这里](http://www.mongodb.org/display/DOCS/Drivers)（但我猜您可能知道）和[Java 语言中心](http://www.mongodb.org/display/DOCS/Java+Language+Center)，其中包含与 Java for MongoDB 相关的所有信息。

目前，afaik 的 Java 驱动程序正在进行大量工作，但没有基准测试。

# android - 如何在列表视图中将来自 Web 服务的数据显示为动态壁纸

> ID：12914007
> 
> 赞同：1
> 
> 时间：2012-10-16T11:46:20.863
> 
> 标签：android

如何在 listview 中将来自 web 服务的数据显示为动态壁纸，更清晰..我必须将 listview 设为动态壁纸，是否可以请帮助我提出宝贵的建议，提前致谢。

# android - 从相机获取圆形图像

> ID：12914009
> 
> 赞同：2
> 
> 时间：2012-10-16T11:46:24.307
> 
> 标签：android, android-layout, android-camera

我正在使用相机的自定义布局。我应该能够创建圆形“捕获”，并且应该在预览模式下看到圆形捕获。我用 SurfaceView 创建了布局，并将 SurfaceView 的背景颜色设置为“#CC000000”。当我尝试通过相机获取图像时，它给了我一个黑色的背景 - 这很酷。如何设置中心圆，这个圆不应该在“#CC000000”颜色下，然后从相机获取图像？

![在此处输入图像描述](../Images/e54cc3da034100c40f94543bd371cc5d.png)

**UPD**：布局代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <SurfaceView
                android:id="@+id/cameraPreview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_margin="10dip"
                android:background="@drawable/camera" />

            <Button
                android:id="@+id/buttonClick"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:text="Click" />
        </RelativeLayout>
    </FrameLayout>

</LinearLayout> 
```

相机.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#CC000000"/>

</shape> 
```

# java - java密码学KeyGenerator

> ID：12914013
> 
> 赞同：-1
> 
> 时间：2012-10-16T11:46:45.030
> 
> 标签：java, security, cryptography, encryption

我的代码是

```
import java.security.Key;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class apiKeyGenerate {
  public static void main(String[] args) throws Exception {
   // Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

    byte[] input = "input".getBytes();
    byte[] ivBytes = "1234567812345678".getBytes();

    Cipher cipher =  Cipher.getInstance("DES/CBC/PKCS5Padding");
    KeyGenerator generator = KeyGenerator.getInstance("AES", "BC");
    generator.init(128);
    Key encryptionKey = generator.generateKey();
    System.out.println("key : " + new String(encryptionKey.getEncoded()));
   }
} 
```

在上面的代码中，火异常是：- java.security.NoSuchProviderException：即

```
Exception in thread "main" java.security.NoSuchProviderException: no such provider: BC
    at sun.security.jca.GetInstance.getService(Unknown Source)
    at javax.crypto.SunJCE_b.a(DashoA13*..)
    at javax.crypto.KeyGenerator.getInstance(DashoA13*..)
    at apiKeyGenerate.main(apiKeyGenerate.java:17) 
```

我怎样才能做到这一点 ？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:58:08.197

在行

```
KeyGenerator generator = KeyGenerator.getInstance("AES", "BC"); 
```

会`BC`表明BouncyCastle？为什么评论出来了`Security.addProvider( new BouncyCastleProvider() )`？然后，您需要将该提供程序添加到 Java 安全`policy`文件中。

看一下[getInstance JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/KeyGenerator.html#getInstance%28java.lang.String%29) - 在`NoSuchProviderException`未配置提供程序时准确抛出。您是否尝试过`getInstance(...)`没有提供者参数的方法？

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:04:25.590

```
import java.security.Key;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class Test1 {
  public static void main(String[] args) throws Exception {
   // Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

      byte[] input = "input".getBytes();
        byte[] ivBytes = "1234567812345678".getBytes();

        Cipher cipher =  Cipher.getInstance("DES/CBC/PKCS5Padding");
        **KeyGenerator generator = KeyGenerator.getInstance("AES");**
        generator.init(128);
        Key encryptionKey = generator.generateKey();
        System.out.println("key : " + new String(encryptionKey.getEncoded()));
       }

} 
```

代替

```
KeyGenerator generator = KeyGenerator.getInstance("AES", "BC"); 
```

这条线你可以试试这个

```
KeyGenerator generator = KeyGenerator.getInstance("AES"); 
```

我认为这很好用。

# ruby-on-rails - Rails：删除缺少的翻译错误

> ID：12914019
> 
> 赞同：14
> 
> 时间：2012-10-16T11:47:05.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, rails-i18n

我正在使用**英语 (en)**和**法语 (fr)**的国际化，我使用 en.yml 进行有限的使用，并且我使用 fr.yml 编写的大部分翻译。

使用**语言环境作为 fr**一切正常，但使用**en 它向我显示错误**，因为缺少翻译跨度。

例如，如果我有类似的东西

```
<%= text_field_tag( "search", params[:search], :placeholder=>t("Search"), :class=>"search_input") %> 
```

我得到 en 的输出是：

```
<input class="search_input" id="search" name="search" placeholder="<span class=" translation_missing"="" title="translation missing: en.Search"> 
```

我想要的是它应该**关闭英语的翻译错误**，因为英语是我的默认语言，但在某些情况下我使用了 en.yml。

或者，如果这不可能，则应删除整个错误消息。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-17T16:12:14.810

在 Rails 4.1 中更改了 HTML 缺少翻译错误的实现。现在代替 I18n 库，它在视图帮助层上处理。即，在“翻译”辅助方法中（参见 action_view/helpers/translation_helper.rb）。

现在一个干净的方法是重写辅助方法并自己处理异常。

```
# app/helpers/i18n_helper.rb

module I18nHelper
  def translate(key, options={})
    super(key, options.merge(raise: true))
  rescue I18n::MissingTranslationData
    key
  end
  alias :t :translate
end 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-23T10:40:32.047

乍一看，[Rails I18n 指南](http://guides.rubyonrails.org/i18n.html)似乎很不错，并且很好地涵盖了这一点（例如，声明自定义异常处理程序的示例）。

但是根据[这张票](https://github.com/rails/rails/issues/13429)，它在 4.0.2 及更高版本中不能在 rails 中工作（但应该在最新的 rails 4.1 版本中修复）。

显然行为已经改变，异常处理程序现在被忽略了。

可用选项：

*   显式添加 option `raise: true`，这将强制使用异常处理程序。例如`t('.missing', raise: true)`。
*   在最新的 rails 4.1 版本中，您可以将默认行为设置回引发异常：（有关更多信息，`config.action_view.raise_on_missing_translations = true`请参阅[合并票证）](https://github.com/rails/rails/pull/13832)
*   或者，显式添加默认选项：`t('.missing', default: 'use this instead')`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-17T10:12:58.807

I18n 库使用*异常处理程序*来决定如何处理丢失的翻译。默认情况下，它返回“翻译缺失”消息：

```
# i18n/exceptions.rb
class I18n::ExceptionHandler
  include Module.new {
    def call(exception, locale, key, options)
      if exception.is_a?(MissingTranslation)
        # Rails sets :rescue_format to :html in views
        # so that you will get span tag instead of just text message
        options[:rescue_format] == :html ? exception.html_message : exception.message
      elsif exception.is_a?(Exception)
        raise exception
      else
        throw :exception, exception
      end
    end
  }
end 
```

您可以扩展异常处理程序以在缺少翻译时仅返回翻译键：

```
# config/initializers/i18n.rb
module UseKeyForMissing
  def call(exception, locale, key, options)
    if exception.is_a?(I18n::MissingTranslation)
      key
    else
      super
    end
  end
end

I18n.exception_handler.extend UseKeyForMissing 
```

然后假设您只有法语翻译：

```
I18n.t("Search", :locale => :fr) #=> "Rechercher"
I18n.t("Search", :locale => :en) #=> "Search" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T09:18:29.187

如果您不想填写英语翻译，一个可能的解决方案是让您的翻译回退到法语。

您可以通过将以下代码添加到初始化程序（例如`config/initalizers/i18n.rb`）来实现这一点：

```
require "i18n/backend/fallbacks" 
I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks) 
```

如果将法语设置为您的默认语言环境，则应该是“Just Work”。

否则，您可能需要向初始化程序添加自定义后备规则：

```
I18n.fallbacks.map(:en => :fr) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T11:52:27.463

试试这个

```
<%= text_field_tag( "search", params[:search], :placeholder=>t(:search), :class=>"search_input") %> 
```

并在您的 en.yml 文件中写入

```
search: 'Search' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-28T11:39:14.360

下面的代码是为了删除缺少的英语翻译，我们通过将 I18n 的 MissingTranslation 模块放入初始化程序中来修补它。

```
DEFAULT_TEMPLATE_LANG = 'en'        
# Removing missing translation errors for english
module I18n
  class MissingTranslation
    def html_message
      if DEFAULT_TEMPLATE_LANG == keys[0].to_s
        keys[1].to_s
      else
        "missing translation: #{keys.join('.')}"
      end
    end
  end
end 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-23T12:28:44.137

在 Rails 4.1 中，我无法让它与 I18n 异常处理程序一起工作（显然有一些错误，请参阅[nathanvda 的答案](https://stackoverflow.com/a/23241864/660921)。
最终我只是`message`通过将它添加到`config/initializers/i18n.rb`

```
module I18n
  class MissingTranslation
    module Base
      def message
        keys[1..-1].join('.')
      end
    end
  end
end 
```

# parallel-processing - 是什么导致并行代码的 CPU 负载低于 100%？

> ID：12914026
> 
> 赞同：0
> 
> 时间：2012-10-16T11:47:30.827
> 
> 标签：parallel-processing, cpu, mutex, multicore, ram

如果多核 CPU 并行化代码使这个 CPU 加载到 100% 以下，难道仅仅是因为 I/O 和 mutex 的期望？或者可能是因为缓存未命中并等待访问 RAM 或其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:56:25.843

您的进程不会是唯一运行的进程。包括操作系统内核在内的其他进程将消耗大量百分比。上下文切换、等待 I/O 和互斥体只是其中的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:18:21.607

Amdahl 定律和同步开销将是我的第一个怀疑对象。只要您有某种同步或线程管理，就会一直发生。

如果我们假设这接近于零，那么这个线程中提出的所有其他事情都可能是它。IO、缓存、操作系统干扰、HT 等硬件问题（如果在 Intel x86 上）...

测试这一点的一种好方法是移动程序以在不同类型的架构（Intel、AMD、Power、Sparc、HT、非 HT）和操作系统上运行，并查看行为是否发生变化。这往往以非常有效的方式揭示程序的核心行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:11:22.500

我确信有很多可能的原因导致 CPU 使用率无法达到 100%，如果不了解您的环境，我们将无法确定确切的原因。

如果您的 CPU 是超线程 (HT)，则比其他一些 CPU 设计要考虑更多；CPU的某些部分是重复的，这意味着操作系统将您的物理核心视为多个逻辑核心，这些逻辑核心就是任务管理器之类的显示。在某些情况下，CPU 的非重复部分可能会成为瓶颈，这可能意味着重复的组件无法以 100% 的使用率运行。

有趣的是，HT CPU 是 Intel 的状态，与非 HT CPU 相比，即使逻辑内核的数量翻了一番，性能也只有大约 30% 的提升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T20:41:37.143

我不知道我是否理解您问题的要点，所以我假设您在问为什么您的多线程应用程序不使用内核上可用的 100% 的 CPU 功率。

我在编写一个使用 50% 可用容量（两个核心占 50%）的多线程 shell 排序时遇到了类似的情况，即使没有其他事情发生，即我希望它在两个核心上都使用 100%。

我通过使用关联函数将线程绑定到特定内核来纠正这个问题。在双核机器上，只会创建两个线程。该排序现在可以使用任意数量的内核（尽管它不会扩展到超过三个内核）并以 100% 的速度运行所有内核。与排序所做的工作相比，操作系统和相关进程所做的工作是微不足道的。由于线程与内核相关联，因此操作系统在管理它们时几乎没有选择/几乎无事可做。

# php - 如何让 ctype_upper 在大写检查中忽略空格？

> ID：12914029
> 
> 赞同：2
> 
> 时间：2012-10-16T11:47:38.550
> 
> 标签：php, uppercase, spaces

我的部分代码中有以下内容。它检查 $item 是否为大写，如果是，则向 div 元素添加一个“大写”类。

```
`echo "<div class='". $alt . "'><div class='menu-item";

        if (ctype_upper($item)) { 
            echo " uppercase";
        } 
        echo "'>" .$item . "</div>";` 
```

但是，如果字符串 $item 包含任何空格（例如 'THIS STRING'），则不会应用 'uppercase' 的类属性。

有没有人知道如何避免这种情况发生。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:51:49.693

`$item`您可以在测试之前暂时删除空格：

```
if (ctype_upper(str_replace(' ', '', $item)) 
```

但是，在您自己的函数中作为抽象级别执行此操作可能是一个好主意：

```
function isMenuItemUpperCase($item) {
    return ctype_upper(str_replace(' ', '', $item);
} 
```

进而：

```
if (isMenuItemUpperCase($item)) 
```

通过这种方式，调用站点（最后一行）非常清晰易读，并且您有一个中心位置，如果需要，将来可以从该位置更改行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:16:20.553

我认为最好在使用之前删除所有可能的空白和特殊章程`ctype_upper`

例子

```
$alt = "Test Alt";
$item = "THIS STRING \t:\t HI";

printf("<div class='%s'><div class='menu-item %s' > %s </div> </div>", $alt, isUpper($item), $item); 
```

HTML 输出

```
<div class="Test Alt">
   <div class="menu-item uppercase"> THIS STRING    :    HI </div>
</div> 
```

使用的功能

```
function isUpper($item) {
    return ctype_upper(preg_replace('/\W+/', '', $item)) ? "uppercase" : "";
} 
```

# php - php不更新sql数据库

> ID：12914030
> 
> 赞同：0
> 
> 时间：2012-10-16T11:47:43.390
> 
> 标签：php, sql, sql-update

你好我正在运行一个服务器端数据库来处理来自安卓手机的输入。我有两个功能，一个是存储用户信息，一个是更新他们的位置。

第二个存储位置我无法上班。

```
 /**
 * Storing new user
 * returns user details
 */
public function storeUser($name, $email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())");
    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
}

     /**
 * Updating a users
 * location
 */
public function updateLocation($email, $location) {
    $uuid = uniqid('', true);
    $result = mysql_query("UPDATE users SET location='$location' WHERE email='$email' NOW())");

    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE email = $email");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:52:04.687

在查看您的更新查询时，`$result = mysql_query("UPDATE users SET location='$location' WHERE email='$email' NOW())");` 您似乎缺少其中的一部分。您需要告诉它需要将什么设置为 NOW()，也许是 updated_at， `"UPDATE users SET location='$location', updated_at = NOW() WHERE email='$email'"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:50:13.823

似乎你有一个错误：“ `WHERE email='$email' NOW())`”进入“ `created_at='NOW()' WHERE email='$email'`”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:51:01.347

您的 SQL 末尾有一个额外的 NOW()

# facebook - 从带有 facebook 共享标签的页面重定向

> ID：12914032
> 
> 赞同：2
> 
> 时间：2012-10-16T11:47:46.850
> 
> 标签：facebook, redirect, video, share

我的公司销售视频托管服务，我们向 Facebook 分享客户的视频。视频托管在我们的平台上并嵌入到客户的页面上。当最终用户点击“分享”时，我们会向 facebook 发送一个分享视频的请求。Facebook 要求共享页面包含具有“image_src”和“video_src”属性的元标记 (http://support.google.com/webmasters/bin/answer.py?hl=en&answer=162163)，我们这样做了。

从客户的角度来看，问题是他们不想修改他们页面的部分，所以我们为他们托管这个共享页面。例如：客户拥有网站 customer.com 并嵌入我们的视频，因此视频托管在 provider.com 上。当最终用户单击共享时，我们会告诉 facebook，可以在 provider.com 上找到正确的视频元标记，以使共享工作。当 facebook 用户单击链接并最终访问 provider.com 而不是 customer.com 网站时，问题就出现了。

我们正在考虑引入从 provider.com 的登录页面到 customer.com 上相应页面的 js 重定向。从技术上讲，这对我们和我们的客户来说都是一个很好的解决方案，但问题是 Facebook 是否允许这样做？

# jquery - jQuery Tabs，如何防止锚点跳转

> ID：12914034
> 
> 赞同：6
> 
> 时间：2012-10-16T11:47:50.093
> 
> 标签：jquery, hash, tabs

我使用这个脚本：

```
(function() {
    var tabContainers = $('div.tabs > div');
    tabContainers.hide().filter(':first').show();
    $(window).bind('hashchange', function () {
        var hash = window.location.hash || '#first';
        tabContainers.hide();
        tabContainers.filter(hash).show();
        $('div.tabs ul.tabNavigation a').removeClass('selected');
        $('a[href=' + hash +']').addClass('selected');
    });
    $(window).trigger("hashchange");
}); 
```

这部分代码给了我我需要的一切。例如，要从外部页面打开选项卡，我使用“index.php#first”href。它打开带有标签的页面，其中打开了确切的标签，但它跳转到锚点，我需要从它的顶部显示页面。

有谁知道，如何防止此代码的锚点跳转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:52:41.727

Have you tried doing a `return false` inside the hashchange function?.

Otherwise, you can avoid using real IDs on your elements. That way it will not scroll.

Update: As you are using jQuery you can also try with: `e.preventDefault`. The function will need to receive `e` as parameter

# java - 底部的操作栏标签？

> ID：12914035
> 
> 赞同：4
> 
> 时间：2012-10-16T11:47:52.937
> 
> 标签：java, android

我正在尝试将操作栏选项卡放在我的应用程序的底部，但我需要一些帮助（如果可能的话）。

编码：

```
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabA = actionBar.newTab().setText("Games");
        ActionBar.Tab tabB = actionBar.newTab().setText("Apps");
        ActionBar.Tab tabC = actionBar.newTab().setText("Themes");

        tabA.setTabListener(new ActionBarTabListener());
        tabB.setTabListener(new ActionBarTabListener());
        tabC.setTabListener(new ActionBarTabListener());

        actionBar.addTab(tabA);
        actionBar.addTab(tabB);
        actionBar.addTab(tabC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:46:38.653

将选项卡放在底部有点违反 Android 指南，但是[拆分操作栏](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)应该能够完成您想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T02:44:20.497

还有另一种方法，但您必须使用 FrgamentTabHost。

这是代码。布局/activity_main.xml

```
enter <android.support.v4.app.FragmentTabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >      

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
      <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"/>
</LinearLayout> 
```

您必须将 TabWidget 放在 FrameLayout 下方。

布局/fragment_layout.xml

```
enter code here<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_horizontal"
android:orientation="vertical"
android:background="#eaecee">

<TextView
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/hello_world"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

MainActivity.java

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTabHost;

public class MainActivity extends FragmentActivity {
    private FragmentTabHost mTabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        mTabHost = (FragmentTabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup(this, getSupportFragmentManager(), android.R.id.tabcontent);

        mTabHost.addTab(
                mTabHost.newTabSpec("tab1").setIndicator("Tab 1", null),
                FragmentTab.class, null);
        mTabHost.addTab(
                mTabHost.newTabSpec("tab2").setIndicator("Tab 2", null),
                FragmentTab.class, null);
        mTabHost.addTab(
                mTabHost.newTabSpec("tab3").setIndicator("Tab 3", null),
                FragmentTab.class, null);
    }
}
```

片段标签.java

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class FragmentTab extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_layout, container, false);
        TextView tv = (TextView) v.findViewById(R.id.text);
        tv.setText(this.getTag() + " Content");
        return v;
    }
}
```

我希望它会帮助你。

# php - 获取 xml 节点值并添加 1 然后再次将其保存到 xml 文件中

> ID：12914040
> 
> 赞同：1
> 
> 时间：2012-10-16T11:48:05.730
> 
> 标签：php, xml, simplexml

我是使用 xml 的新手。我有一个简单的 xml 文件“rate.xml”包含：

```
<?xml version="1.0"?>
<person>

<rate id="rate_this">
1
</rate>

</person> 
```

我要做的只是一个 php 脚本获取速率标记的值并将其加 1（即 1+1 = 2），然后将速率标记值更新为新结果。我试过这个脚本，但它不工作：

```
<?php
$person = simplexml_load_file('rate.xml');
$rateNode = $person->getElementsByAttribute("id"); 
$xmlType = $rateNode->getElementsByTagName( "rate" );
$valueType = $xmlType->item(0)->nodeValue;  
$newValue = $valueType + 1 ;
$person->rate->nodevalue = $newValue;
?> 
```

实施将非常有帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:59:04.377

尝试这样做：

```
<?php
$domelement = dom_import_simplexml(simplexml_load_file('rate.xml'));
$person = $domelement->ownerDocument;
$xmlNodes = $person->getElementsByTagName( "rate" );
$valueType = $xmlNodes->item(0)->nodeValue;  
$newValue = $valueType + 1 ;
$xmlNodes->item(0)->nodeValue = $newValue;
echo($person->saveXML());
?> 
```

我已经编辑了代码。请注意 getElementsByAttribute 不是一个有效的方法，在这里是不必要的。[这](http://www.phpfiddle.org/main/code/2qx-n8p)是此代码的一个示例。

或者，您可以使用 Xpath 按属性查找元素：

```
<?php
$sxml = simplexml_load_file('rate.xml');
$searcharray = $sxml->xpath("//*[@id='rate_this']");
$rate = $searcharray[0];
$value = $rate[0];
$newValue = intval($value) + 1 ;
$rate[0] = $newValue;
echo($sxml->asXML());
?> 
```

[这](http://www.phpfiddle.org/main/code/tai-ucg)是一个例子。输出是一样的。

这两个例子之间没有区别。它们具有完全相同的结果，并且使用 Xpath 仍然不会自动将您的输出保存到文件中。如果要将输出保存到文件中，请使用以下内容而不是回显输出：

```
$f = fopen("rate.xml", "w");
fwrite($f, $sxml->asXML());
fclose($f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:42:35.507

这是将为您完成这项工作的代码：

```
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadXML(file_get_contents ('file.xml')); // loads your xml
$xpath = new DOMXPath($doc);
$nlist = $xpath->query("//person/rate[@id='rate_this']");
$node = $nlist->item(0);
$newval = trim($node->nodeValue)+1;
$node->nodeValue = $newval;
file_put_contents ('out.xml', $doc->saveXML()); 
```

### 您的文件 out.xml：

```
<?xml version="1.0"?>
<person>

<rate id="rate_this">2</rate>

</person> 
```

# java - 使用PDFBox将图像写入pdf，发现左上角有一些奇怪的像素

> ID：12914059
> 
> 赞同：3
> 
> 时间：2012-10-16T11:49:13.810
> 
> 标签：java, image, pdfbox

我正在使用[PDFBox](http://pdfbox.apache.org/)将图像写入 pdf。图像只是一个纯红色矩形。

图像是：

![在此处输入图像描述](../Images/69e3f26997b1c1532b2c563377801970.png)

我的代码是：

```
PDDocument doc = new PDDocument();
PDRectangle pageSize = new PDRectangle(CARD_WIDTH, CARD_HEIGHT);
PDPage page1 = new PDPage(pageSize);
doc.addPage(page1);

File imageFile = getRedImageFile();
PDXObjectImage pdImage = new PDPixelMap(doc, ImageIO.read(imageFile));

// write front image
PDPageContentStream contentStream = null;
try {
    contentStream = new PDPageContentStream(doc, page1);
    pdImage = parseImage(backImage, doc);
    contentStream.drawXObject(pdImage, 0, 0, CARD_WIDTH / 2, CARD_HEIGHT / 2);
} finally {
    if (contentStream != null) {
        contentStream.close();
    }
} 
```

最终图像是：

![在此处输入图像描述](../Images/9f2e5ef480696dcf8268352a0bc78c8c.png)

不清楚，所以我放大并上传另一个：

![在此处输入图像描述](../Images/8528b8fb471b0a8696f6c1f4568039c6.png)

为什么那里有这么奇怪的像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T17:48:14.890

这是由于内容流错误。您可能可以通过在写入图像后关闭然后再次打开流来绕过它，但这可能会导致更多错误（例如覆盖所有字体）。

我使用的解决方法是在每个页面开始时使用页面右侧 50000 像素的占位符图像。由于此图像已损坏，而不是其他图像，因此一切都很好。

# css - 如何定义最小高度等于父母的高度？

> ID：12914062
> 
> 赞同：0
> 
> 时间：2012-10-16T11:49:23.723
> 
> 标签：css

如何将元素的最小高度定义为等于其直接父级的高度，如果超过此高度，它应该扩展以适应它所包含的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:51:36.073

设置`min-height : 100%`为您的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:53:27.453

我认为，如果您为父级设置了最小高度属性，那么您可以使用

{ 最小高度：继承；身高：继承；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:20:30.830

有一个更简单的解决方案。如果您认为它与表 td 扩展一次相同，并且同级内容变得比其他内容“更大”。所以我们不想使用表格，我们想坚持 div 的....

HTML：您的 div 或在我的示例 p 标签中必须有一个公共类，并且该类是`equal`

CSS：我们通过 css '导入' table > td 属性`.equal {display:table-cell;}`

最后给我们这个[http://jsfiddle.net/simomultimedia/APLWp/](http://jsfiddle.net/simomultimedia/APLWp/)

爱、和平与鸡油！

# arrays - 从java到C的jni结构

> ID：12914065
> 
> 赞同：1
> 
> 时间：2012-10-16T11:49:28.533
> 
> 标签：arrays, struct, java-native-interface

我有一个问题。在java中我有一个类

```
public class s_k {
    public byte[][] s;
    public int r;
} 
```

在 C 中相应地是一个结构，

```
typedef struct {
  unsigned char s[10][10];
  int r;
} s_k; 
```

并有一个函数，java 从中将其作为 s_k 的参数类型传递。如何在 C 代码中获取并更改它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:37:54.170

对 Java 类进行结构反射是没有意义的。它将是您的 Java 类的**副本**，这意味着更改它不会更改您的原始 Java 对象。我想您确实希望更改反映在原始对象中，对吗？

因此，只需将`s_k`实例传递为`jobject`并使用 JNI 的功能直接访问它：

*   **r**和`GetFieldID`然后`SetIntField`
*   **s**再用`GetFieldID`, then `GetObjectField`(array 是 Java 中的一个对象) 然后`GetByteArrayElements`

没有更简单的方法，除非您想深入了解[JNA](https://github.com/twall/jna#readme)。

**更新：**您的问题似乎有重复：

[如何使用 JNI 访问对象内的数组？](https://stackoverflow.com/questions/1086596/how-to-access-arrays-within-an-object-with-jni)

# iphone - 在 Objective-C 中，我应该为 NSException 的异常名称使用什么名称？

> ID：12914070
> 
> 赞同：9
> 
> 时间：2012-10-16T11:49:43.653
> 
> 标签：iphone, objective-c

我想用`+[NSException exceptionWithName:reason:userInfo:]`.

但是我应该使用什么字符串作为参数`Name:`？

异常名称在项目中应该是唯一的吗？
或者我可以使用 @"MyException" 来处理我的所有异常？

而且我不知道使用什么异常名称。
异常名称在哪里使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T12:08:19.010

您可以使用 in 中的名称`@catch (NSException *theErr)`。

```
@catch (NSException *theErr)
{
    tst_name = [theErr name];
    if ([tst_name  isEqualToString:@"name"])
} 
```

> 我应该使用什么字符串作为参数名称：？

任何有意义的事。

> 异常名称在项目中应该是唯一的吗？

不。

> 或者我可以使用 @"MyException" 来处理我的所有异常？

是的，但您应该使用有意义的名称。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    // Insert code here to initialize your application 
    NSNumber *tst_dividend, *tst_divisor, *tst_quotient;
    // prepare the trap
    @try
    {
        // initialize the following locals
        tst_dividend = [NSNumber numberWithLong:8];
        tst_divisor = [NSNumber numberWithLong:0];

        // attempt a division operation
        tst_quotient = [self divideLong:tst_dividend by:tst_divisor];

        // display the results
        NSLog (@"The answer is: %@", tst_quotient);
    }
    @catch (NSException *theErr)
    {
        // an exception has occured
        // display the results
        NSLog (@"The exception is:\n name: %@\nreason: %@"
               , [theErr name], [theErr reason]);
    }
    @finally
    {
        //...
        // the housekeeping domain
        //...
    }
}

- (NSNumber *)divideLong:(NSNumber *)aDividend by:(NSNumber *)aDivisor
{
    NSException *loc_err;
    long     loc_long;

    // validity check
    loc_long = [aDivisor longValue];
    if (loc_long == 0)
    {
        // create and send an exception signal
        loc_err = [NSException 
                   exceptionWithName:NSInvalidArgumentException
                   reason:@"Division by zero attempted" 
                   userInfo:nil];
        [loc_err raise]; //locate nearest exception handler, 
        //If the instance fails to locate a handler, it goes straight to the default exception handler. 
    }
    else
        // perform the division
        loc_long = [aDividend longValue] / loc_long;

    // return the results
    return ([NSNumber numberWithLong:loc_long]);
} 
```

查看[了解 Cocoa 中的异常和处理程序](http://macdevcenter.com/pub/a/mac/2007/07/31/understanding-exceptions-and-handlers-in-cocoa.html?page=3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:08:52.580

最终，以这种方式添加异常的目的是尽快发现问题、报告问题并进行诊断。

因此，您是否选择项目独有的异常名称，或特定于问题的异常名称（即源代码行、方法）取决于哪个将为您提供最佳诊断信息。

异常名称可以在您的应用程序之间共享，因为它们将由应用程序报告以识别异常的来源。

# c++ - 我想接受用户输入并将其输出到我的 shell 环境中

> ID：12914080
> 
> 赞同：2
> 
> 时间：2012-10-16T11:51:06.670
> 
> 标签：c++, input

我想接受用户输入并将其输出到我的屏幕上。我假设让用户键入他们需要什么样的类型，例如**Type O**，但我的输出没有捕获我的**O**，只是我的**Type**，所以有没有办法让它捕获整个行只**打字**？

我的代码的示例输出。

**输入太阳类型：输入 k**

**进入行星：10**

**输入的太阳类型：type**

**行星数量：10**

这只是我整个冗长代码的一部分。

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

class LocationData
{   
    private:
    string sunType;
    int noOfEarthLikePlanets;
    int noOfEarthLikeMoons;
    float aveParticulateDensity;
    float avePlasmaDensity;
    public:

};
int main()
{
    int i;
    string s;
    LocationData test;
    cout<<"Enter Sun Type: ";
    cin>>s;
    test.setSunType(s);
    cin.clear();
    cin.ignore(10000,'\n');
    cout<<"Enter planets: ";
    cin>>i;
    test.setNoOfEarthLikePlanets(i);
    cout<<"Sun type that was entered: "<<test.getSunType();
    out<<"\nNo of Planets: "<<test.getNoOfEarthLikePlanets()<<endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:52:25.950

是的

```
getline(cin, s); 
```

读取整行并将该行放入`s`变量中。正如你所发现的

```
cin >> s; 
```

只读取一个单词，这就是它停在**Type**和**O**之间的空格的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T11:56:32.977

尝试使用`gets() / getline()`功能。`cin`并`cout`默认忽略空格。我不知道如何让他们接受空格。但是使用上述功能，您将获得所需的结果。

参考：[gets()](http://www.cplusplus.com/reference/clibrary/cstdio/gets/)，[getline()](http://www.cplusplus.com/reference/string/getline/)

# actionscript-3 - 如何使用flare3d 2.0框架加载加载maya 3d模型

> ID：12914081
> 
> 赞同：0
> 
> 时间：2012-10-16T11:51:08.747
> 
> 标签：actionscript-3, game-engine, maya, flare3d

我想测试并尝试使用away3d和flare3d来做出选择。

我从flare3d开始，它提到它支持maya obj文件和其他格式。但是，我遇到的教程/文档只提到了 f3d，它是使用 3dmax 插件生成的 3d max 模型的输出。

看起来`Scene3D.addChildFromFile()`只需要一个 f3d 格式的文件，那么如何加载其他格式呢？特别是maya文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:26:55.063

我发现当前的 Flare3D 2.0 不支持直接 .mb 或 .obj 文件，但它支持 .dae 文件

我就是这样做的

```
var tree:Pivot3D;// = new ColladaLoader("aerial_dragon_attack_2.dae");
scene.registerClass(Flare3DLoader1);
//ColladaLoader; // this did not work for me so commented and used above line
tree = scene.addChildFromFile("empresstree_opencollada1.dae",null,ColladaLoader); 
```

有用信息：

第二行是必须的，因为目前场景类默认不导入 ColladaLoader 类，有人说只是写 ColladaLoader；上面的 addChildFromFile 将导入类以避免错误，但这对我不起作用，所以我使用了 registerClass 方法，我试图从错误消息中修复

```
** Error: The Flare3DLoader1 class was not found.
** Please call to scene.registerClass( Flare3DLoader1 ) to enable Flare3D v1 compatible models. 
```

希望这可以帮助那里的人

# ajax - 如何提高 Magento Ajax 性能？

> ID：12914084
> 
> 赞同：2
> 
> 时间：2012-10-16T11:51:18.257
> 
> 标签：ajax, performance, magento

我目前正在为 Magento 开发一个 ajax 插件，想知道如何提高它的性能。让我们从一个例子开始。我想在外部页面上显示购物车中的商品数量。或者一个已经通过整页缓存呈现并且需要通过 JavaScript Ajax 请求更新购物车信息的页面。

*为此，我看到了两种方法。*

**使用精简到最低限度的 Magento 控制器**

```
class AFCustom_CartInfo_AjaxController extends Mage_Core_Controller_Front_Action {

    public function indexAction() {
      header('Cache-Control: no-cache, must-revalidate');
      header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
      header('Content-Type: text/html; charset=utf-8');

      $out = $this->__('My Cart');
      if (Mage::helper('core')->isModuleOutputEnabled('Mage_Checkout')) {
        $count = Mage::getSingleton('checkout/cart')->getSummaryQty() ? Mage::getSingleton('checkout/cart')->getSummaryQty()
            : MAGE::helper('checkout/cart')->getSummaryCount();
        if ($count == 1) {
          $out = $this->__('My Cart (%s item)', $count);
        } elseif ($count > 0) {
          $out = $this->__('My Cart (%s items)', $count);
        } else {
          $out = $this->__('My Cart');
        }
      }
      echo $out;
      exit;
    }
} 
```

如您所见，我退出了控制器中的代码并且不用户渲染布局。但是，请求仍然需要很长时间。我假设是因为它必须加载整个框架。有没有办法只加载 Magento 的最低要求来执行控制器？是否可以禁用不需要的布局引擎？我该怎么做？我可以关闭哪些其他模块？

**观察者更新会话** 第二种解决方案是让观察者监听购物车 (checkout_cart_save_after) 中的变化并更新 PHP 会话变量。可以在一个小的自定义 PHP 脚本中读出。但是，我不确定如何轻松修补到与 Magento 使用的会话机制相同的会话机制中？我认为直接使用 $_SESSION 可能是不可取的，因为 Magento 会话可能会在其他地方处理。

你会怎么做？任何指针表示赞赏？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:14:24.730

您可以缓存您的请求并将数据缓存在观察购物车变化的观察者中，然后您只需要请求块或您在那里缓存的任何内容并回显输出。

要点是您将输出预先填充到缓存中，而不是一遍又一遍地请求它。

# javascript - Jquery：未捕获的 SyntaxError：意外的标识符

> ID：12914085
> 
> 赞同：5
> 
> 时间：2012-10-16T11:51:20.647
> 
> 标签：javascript, jquery

我的网站无法显示不同产品选项的价格，我在 Chrome 检查中发现以下错误消息：

```
Uncaught SyntaxError: Unexpected identifier 
```

它指向下面的行：

```
 var first_variant_price = $('ul li input[type='radio']:checked').attr('data-price'); 
```

这是完整的脚本：

```
<script type='text/javascript' charset='utf-8'>
$(document).ready(function(){ 
  var first_variant_price = $('ul li input[type='radio']:checked').attr('data-price'); 
  $('.current-price').text( first_variant_price );
  $('input[type='radio']').click(function() {
    var variant_price = $(this).attr('data-price');
    $('.current-price').text( variant_price);
  });
});
</script> 
```

我无法意识到此代码有任何不匹配。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:53:47.543

如果您在其他引号中使用引号，请使用不同的类型或转义它们：

```
$("ul li input[type='radio']:checked") // different type of quotes 
```

或者

```
$('ul li input[type=\'radio\']:checked') // escape inner quotes via backslash 
```

但最简单的方法是根本不引用`radio`- 这没有必要。

```
$('ul li input[type=radio]:checked') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T11:52:07.430

你有报价问题。您可以转义`\'`引号`radio`或简单地更改代码，如下所示：

```
// -.---------------------------------.
    v                                 v
  $("ul li input[type='radio']:checked").attr('data-price'); 
```

# java - 使用 SQLiteOpenHelper 进行 JOIN 查询的最佳方法是什么

> ID：12914088
> 
> 赞同：0
> 
> 时间：2012-10-16T11:51:26.427
> 
> 标签：java, android, sqlite

我目前正在这样做。

有没有更好的办法？

```
public Cursor selectRostersForTeam(Activity activity, int teamId) {

    final String MY_QUERY = "SELECT r." + _ROSTER_ID + ", t." + _TEAM_ID + ", t." + TEAM_NAME + ", t." + TEAM_SEASON_WINS + ", t." + TEAM_SEASON_LOSSES + ", t." + TEAM_CHAMPIONSHIP_WINS + ", j." + _TEAMS_ROSTERS_ID + " FROM " + TABLE_TEAM + " AS p" + " JOIN " + TABLE_TEAMS_ROSTERS + " j ON (r." + _ROSTER_ID + " = j." + TEAMS_ROSTER_ROSTER_ID + ") " + " JOIN " + TABLE_TEAM + " ch ON (j." + TEAMS_ROSTER_TEAM_ID + " = t." + _TEAM_ID + ") WHERE j. " + TEAMS_ROSTER_TEAM_ID + " = " + teamId + ";";

    SQLiteDatabase db = getReadableDatabase();

    Cursor cursor = db.rawQuery(MY_QUERY, null);

    activity.startManagingCursor(cursor);

    return cursor;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:13:41.517

的替代方案`rawQuery()`是`query()`，但不是为连接而设计的。

如果您认为您的连接足够重要，您可以[从中创建一个视图](http://www.sqlite.org/lang_createview.html)，然后在表中使用它`query()`。

* * *

注意：建议将值`teamId`作为参数传递，而不是将它们格式化为查询字符串：

```
rawQuery(..._TEAM_ID + " = ?", new String[] { Integer.toString(teamId) }); 
```

# asp.net-mvc-3 - 计算最大和打开的 EF 连接

> ID：12914089
> 
> 赞同：1
> 
> 时间：2012-10-16T11:51:30.030
> 
> 标签：asp.net-mvc-3, performance, debugging, entity-framework-4.1

我有遭受性能瓶颈的 ASP.NET MVC 应用程序。我想分析 EF 连接并找出允许的最大 EF 连接和当前打开的连接。任何建议如何做到这一点？

我的存储库代码

```
 using EntityFramework.Patterns;

     public class ServiceRepository : IServiceRepository
        {
            private readonly IRepository<User> _userRepository;
            private readonly IUnitOfWork _unitOfWork;

            public ServiceRepository(DbContext dbContext)
            {
                var dbContextAdapter = new DbContextAdapter(dbContext);
                _unitOfWork  = new UnitOfWork(dbContextAdapter);            
                _userRepository = new Repository<User>(dbContextAdapter);
            }

            public IQueryable<User> GetUsersByProduct(int productId)
            {
                return _userRepository.AsQueryable().Where(p => p.Orders.Any(o => o.ProductId == productId));
            }
//Skip code

        public void Commit()
        {
            _unitOfWork.Commit();
        }

    } 
```

用 Ninject 注射

```
private static void RegisterServices(IKernel kernel)
{
       var connectionString = ConfigurationManager.ConnectionStrings["Entities"].ConnectionString;
       kernel.Bind(typeof(DbContext)).ToMethod(context => new DbContext(connectionString)).InRequestScope();           
       kernel.Bind<IServiceRepository>().To<ServiceRepository>().InRequestScope();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:31:40.010

EF 连接使用底层连接类型，这可能是您的问题 - 您的 EF 上下文使它们保持打开状态。

你要反对 sql server 吗？如果是这样，那么问题可能是您的 sql 连接。使用 ANTS 分析器找出性能问题所在并从那里进行优化。

您可以使用 MiniProfiler 或 glimpse 查看您的实体框架查询和一些执行统计信息。我还将确保您在*每次*请求后处理您的上下文，从而为每个请求创建一个新的上下文。

# javascript - 新 Google 时区 API 的 getJSON() 调用出错

> ID：12914102
> 
> 赞同：2
> 
> 时间：2012-10-16T11:52:22.103
> 
> 标签：javascript, google-maps, google-geocoding-api

我正在使用新的 [Google Time Zone API](https://developers.google.com/maps/documentation/timezone/)

我用它来知道地图纬度/经度点的确切时间。

首先，我读到谷歌在 6 天前（2012 年 10 月 10 日）推出了这个 api，所以我没有找到关于这个 API 调用的文档。

我有以下问题：

谷歌强迫你使用 https，我得到了跨域错误：

```
XMLHttpRequest cannot load https://maps.googleapis.com/maps/api/timezone/json?location=35.209722,-118.300781&timestamp=1350372338&sensor=false Origin http://my_web is not allowed by Access-Control-Allow-Origin. 
```

这是我获取 JSON 的代码：

```
url = "https://maps.googleapis.com/maps/api/timezone/json?location=35.209722,-118.300781&timestamp=1350372338&sensor=false";  
$.ajax({  
                 url: url,  
                 //data: {},  
                 type: "GET",  
                 crossDomain: true,  
                 dataType: 'json',  
                 //processData: false,  

                 success: function (data) {  
                     console.log('Succes!! Read some data...');  
                 },  
                 error: function (xhr, err) {  
                     console.log("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);  
                     console.log("responseText: " + xhr.responseText);  
                 }  
             }); 
```

在许多帖子中推荐使用 JSONP 而不是 JSON，但问题是 Google 只提供 JSON 和 XML 的响应。

有谁知道我如何在没有跨域问题的情况下对 https 发出 GET 请求？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:52:10.720

> 有谁知道我如何在没有跨域问题的情况下对 https 发出 GET 请求？

这是一个 Web 服务，从您的服务器中检索它（或在您的服务器上使用代理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:07:30.403

您可能可以使用[YQL 控制台](http://developer.yahoo.com/yql/console/)来实现它。您可以将它与 json 调用一起使用以检索 json 数据。

在控制台内，您需要放置类似的东西

```
select * from html where url="https://maps.googleapis.com/maps/api/timezone/json?location=35.209722,-118.300781&timestamp=1350372338&sensor=false" 
```

你可以看到结果。下面是一些示例伪代码。您需要自己找出可用于 xpath 的内容（如果需要）

```
var url = 'https://maps.googleapis.com/maps/api/timezone/json?location=35.209722,-118.300781&timestamp=1350372338&sensor=false';
var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + url + '" AND xpath="....."') + '&format=json&callback=?';  
$.getJSON(yql,function(data){  
    if(data.results){
     ... do your thing here with the data
    }
} 
```

# javascript - Cocoa WebView 中的 HTML5 画布绘图比 Safari 慢

> ID：12914106
> 
> 赞同：5
> 
> 时间：2012-10-16T11:52:26.547
> 
> 标签：javascript, macos, canvas, safari, webview

我正在尝试使用 WebView 为 HTML5 游戏构建一个包装应用程序，该游戏使用画布进行绘图。在 Safari 中，我得到 60fps，但在包装应用程序中的 WebView 中，fps 显着下降（降至 30-45）。

WebView 中的画布比 Safari 慢还是我做错了什么？如果是这样，为什么以及可以做些什么呢？

我在网上搜索了答案，但找不到任何关于速度差异的提及。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:20:37.863

不幸的是，还没有找到我的问题的答案，但已经解决了我的问题。我通过不使用 WebView 来规避 WebViews 画布绘制缓慢的问题。

我宁愿使用 JavaScriptCore 框架为我的游戏构建一个包装器，并将画布调用重定向到 OpenGL 函数。还将音频调用重定向到 OpenAL，并将鼠标输入从视图重定向到 JavaScript。

游戏代码没有任何改变，引擎（小型的、自定义的）有一些功能覆盖。

# ruby-on-rails - 如何“动态”打开一个类以便向它添加一个使用局部变量的范围方法？

> ID：12914109
> 
> 赞同：1
> 
> 时间：2012-10-16T11:52:37.187
> 
> 标签：ruby-on-rails, ruby, class, module, metaprogramming

我正在使用 Ruby on Rails v3.2.2。在一个模块中，我试图“动态”打开一个类，以便向它添加一个使用局部变量的 Ruby on Rails“范围方法”，这样：

```
module MyModule
  extend ActiveSupport::Concern

  included do
    # Note: The `CLASS_NAME` is not the class where `MyModule` is included. That
    # is, for instance, if the including class of `MyModule` is `Article` then
    # the `CLASS_NAME` is `User`.
    CLASS_NAME           = self.get_class_name.constantize # => User
    counter_cache_column = self.get_counter_cache          # => "counter_count"

    class CLASS_NAME
      def self.order_by_counter
        order("#{counter_cache_column} DESC")
      end
    end
  end
end 
```

如果我运行上面的代码，我会收到以下错误：

```
NameError
undefined local variable or method `counter_cache_column' for #<Class:0x0000010775c558> 
```

发生这种情况是因为`counter_cache_column`in 未在模块的上下文中调用。我应该如何正确说明`order_by_counter`范围方法？

* * *

*奖励*：您对上述“如此动态”的实施有何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:08:14.080

提供的`included`块`ActiveSupport::Concern`在包含类的范围内进行评估。换句话说，你已经“重新打开”了这个块中的类。如果包含类继承自`ActiveRecord::Base`，您可以使用任何 AR 类宏，例如`scope`、`has_many`、`attr_accessible`等：

```
module MyModule
  extend ActiveSupport::Concern

  included do
    scope :order_by_counter, order("#{self.get_counter_cache} DESC")
  end

end 
```

这假设“get_counter_cache”已经定义为包含类中的类方法（尽管从您显示的代码中并不清楚）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:42:10.390

`counter_cache_column`是一个局部变量。局部变量在它们定义的范围内是局部的（这就是它们被称为局部变量的原因）。

在这种情况下，范围是传递给的块`included`。

类定义和方法定义创建一个新的空范围。只有块创建嵌套范围，因此，您需要使用块来定义您的方法。值得庆幸的是，有一种方法可以做到这一点：通过将块传递给`define_method`：

```
module MyModule
  extend ActiveSupport::Concern

  included do
    klass                = get_class_name.constantize # => User
    counter_cache_column = get_counter_cache          # => "counter_count"

    klass.define_singleton_method(:order_by_counter) {
      order("#{counter_cache_column} DESC")
    }
  end
end 
```

我做了一些其他的风格改进：

*   `self`是 Ruby 中的隐式接收器，无需指定
*   `CLASS_NAME`具有误导性：它不包含类的名称，它包含类*本身*
*   另外，我不明白为什么它需要是一个常数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:09:47.350

局部变量不会传递给重新打开的类。

```
module MyModule
  extend ActiveSupport::Concern

  included do
    counter_cache_column = self.get_counter_cache # => "counter_count"

    class_eval <<-RUBY, __FILE__, __LINE__+1
      def self.order_by_counter               # def self.order_by_counter
        order("#{counter_cache_column} DESC") #   order("counter_count DESC")
      end                                     # end
    RUBY
  end
end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T12:10:27.490

有许多快速而肮脏的方法可以实现您想要的。例如，如果您希望符号 'counter_cache_column' 表示其范围之外的内容，则可以将其声明为方法而不是局部变量：

```
included do
  CLASS_NAME           = self.get_class_name.constantize # => User
  def counter_cache_column; get_counter_cache end        # => "counter_count"

  class CLASS_NAME
    def self.order_by_counter
      order("#{counter_cache_column} DESC")
    end
  end
end 
```

# scala - 如何在 Scala 中的对列表上调用 .map()

> ID：12914121
> 
> 赞同：27
> 
> 时间：2012-10-16T11:53:20.490
> 
> 标签：scala

我想调用`map()`对列表，但出现类型不匹配错误。

例如，假设我想将 Int 对列表映射到它们的总和列表：

```
scala> val ll=List((1,2),(3,4),(5,6))
ll: List[(Int, Int)] = List((1,2), (3,4), (5,6))

scala> ll.map((x:Int,y:Int)=>x+y)
<console>:9: error: type mismatch;
 found   : (Int, Int) => Int
 required: ((Int, Int)) => ?
              ll.map((x:Int,y:Int)=>x+y)
                                  ^ 
```

顺便说一句，当尝试运行 foreach() 时，我得到了一个非常相似的错误：

```
scala> ll.foreach((x:Int,y:Int)=>println(x,y))
<console>:9: error: type mismatch;
 found   : (Int, Int) => Unit
 required: ((Int, Int)) => ?
              ll.foreach((x:Int,y:Int)=>println(x,y))
                                  ^ 
```

`?`标志代表什么？我在这里想念什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-16T11:56:42.210

您可以使用[模式匹配](http://docs.scala-lang.org/tutorials/tour/pattern-matching.html)来获取该对的元素。

```
ll.map{ case (x:Int,y:Int) => x + y } 
```

您甚至不需要指定类型：

```
ll.map{ case (x, y) => x + y } 
```

当然，同样适用`foreach`。

错误消息告诉您，编译器希望找到任何类型（问号）的*一个参数（一对整数）的函数，而是找到了**两个*参数的函数，都是整数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-16T11:56:33.333

您可以使用：

```
ll.map(x => x._1 + x._2) 
```

where`x`代表元组本身，或

```
ll.map(x:(Int,Int) => x._1 + x._2) 
```

如果要显式声明类型。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-16T15:45:18.850

您可以对一个函数进行*元组*化，这意味着从一个需要 N 个 args 的函数变为一个需要 1 个 arg 的 N 元组。执行此操作的高阶函数在`Function`对象上可用。这会产生很好的语法以及在对 Brian Agnew 的回答的评论中突出显示的额外类型安全性。

```
import Function.tupled

ll map tupled(_ + _) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-21T20:35:59.990

从 开始`Scala 3`，[参数 untupling](https://dotty.epfl.ch/docs/reference/other-new-features/parameter-untupling.html)得到了扩展，允许使用这样的语法：

```
List((1, 2), (3, 4), (5, 6)).map(_ + _)
// List(3, 7, 11) 
```

其中 each`_`指的是关联的元组部分。

# visual-studio - 视觉工作室 clearcase 长结账

> ID：12914123
> 
> 赞同：2
> 
> 时间：2012-10-16T11:53:26.730
> 
> 标签：visual-studio, clearcase

当我尝试在 Visual Studio 中签出/签入文件时，它会运行 CC 命令并等待结果。此操作完全阻止 Visual Studio。

是否可以从 Visual Studio 在后台运行签入/签出命令？我知道当操作失败时这可能会导致不一致。

即更改变量名会导致 Visual Studio 签出一些文件并阻止我编辑甚至阅读非常烦人的代码；/

诸如“后台结帐/签入”或“异步签出/签入”之类的东西存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:13:59.803

我完全禁用了将 ClearCase 集成到 Visual Studio 中（启动 IBM 安装管理器，更改 ClearCase 安装并取消选中 VS 集成）。每当您保存更改的文件时，系统都会询问您是否可以覆盖它（劫持文件），这比在编辑后立即检查每个文件要快得多。

当然，您需要定期检查那些被劫持的文件，但是只要您对视图执行更新（或“查找修改的文件”），它们就会被列出，然后可以一次全部检查出来。如果您看到您再次撤消了更改，您也可以撤消劫持，并且永远不会在您的私有分支上创建一个版本，在我看来这是一个很大的优势；）

但是 VS 中的 ClearCase 菜单会消失，所以如果你想打开一个文件的版本树，你需要先在资源管理器中打开它。如果您不喜欢这样，您可以再次启用集成，因此尝试这种工作方式不会有什么坏处。

哦，还有另一种可能性：您可以在编辑文件*之前*使用 ClearCase 菜单劫持文件（Alt+c，j），这样您就可以保留集成的好处而无需签出。缺点是，您需要记住在编辑之前签出哪些文件；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:47:24.800

这似乎是这个插件的当前工作方式，对于 ClearCase 完整客户端和（甚至更糟）对于 CCRC（远程客户端，[此处描述了一个额外的“焦点”问题](http://www-01.ibm.com/support/docview.wss?uid=swg1PK85767)）

使用[SvensS](https://stackoverflow.com/users/887962/svens) [建议](https://stackoverflow.com/a/12915516/6309)（赞成）的劫持文件，您将需要找到所有这些文件（请参阅“[命令以递归方式查找当前目录中的所有查看私有文件](https://stackoverflow.com/questions/7657084/command-to-find-all-view-private-files-in-the-current-directory-recursively)”）并签出/签入它们。

# android - Android 通知：与 API 的兼容性

> ID：12914126
> 
> 赞同：5
> 
> 时间：2012-10-16T11:53:40.430
> 
> 标签：android, notifications, android-4.2-jelly-bean, android-2.3-gingerbread

我正在尝试在我的应用程序中显示通知以及其中的进度条。

我的应用规范是我的目标是 API 15，最小 SDK 设置为 8。我使用以下代码显示通知：

```
NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this);

mBuilder.setContentTitle("My Application")
        .setContentText("Downloading...")
        .setProgress(0, 0, true)
        .setSmallIcon(R.drawable.ic_launcher);

PendingIntent in = PendingIntent.getActivity(getApplicationContext(), 0, getIntent(), 0);
mBuilder.setContentIntent(in);

mNotificationManager.notify(0, mBuilder.build()); 
```

使用上面的代码，通知出现在通知抽屉中，但没有进度条（在 Android 2.2 和 2.3.3 上）。但进度条在 Android 4.1 上看起来很好。所以很明显它是一个兼容性问题。

如何对我的目标 API 上显示的带有不定进度条的通知进行编码。我尝试使用`Notification.Builder`，但这个类在我当前的规格中不可用。

提前致谢！

——法拉兹·阿扎尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:59:30.837

我鼓励您使用[Notification Compat 2](https://github.com/JakeWharton/NotificationCompat2)。它是为处理此类问题而创建的。
如果您想为通知使用自定义 RemoteViews，请查看[我的 fork](https://github.com/Teovald/NotificationCompat2)。我已经提出了拉取请求，但尚未集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:06:09.337

您是否尝试过使用[http://developer.android.com/reference/android/widget/RemoteViews.html](http://developer.android.com/reference/android/widget/RemoteViews.html)？

# algorithm - 次阶模素数 (!n mod p)

> ID：12914133
> 
> 赞同：10
> 
> 时间：2012-10-16T11:54:07.687
> 
> 标签：algorithm, math

有没有一种简单的方法来实现`!n mod p`（[错乱的数量](http://en.wikipedia.org/wiki/Derangement#Counting_derangements)）`where n ≤ 2∗10^8`并且`p`是素数和`p < 1000`

程序必须快速执行，这样幼稚的方法就行不通了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T12:40:15.977

事实证明，它`!n mod p`是周期性的，周期为`2p`。因此，我们可以计算`!n mod p`为`!(n mod 2p) mod p`，我们使用失调的递归公式来计算`!n = (n-1) (!(n-1) + !(n-2))`。

为了证明：

*   通过紊乱的递归关系观察到`!(p+1) = 0 mod p`。
*   工作模 p，`!(n+p) = !p * !n`（这可以使用前面的观察归纳证明）。
*   观察那个`!p = -1 mod p`。维基百科提供了一个公式：`!n = n! - Sum[(n choose i) * !(n-i), i=1..n]`-- 模 p，右侧唯一的非零项出现在哪里`i=n`。
*   得出结论`!(n+2p) = !p !p !n = !n mod p`。

从证明中，我们看到我们实际上可以计算`!n = ± !(n mod p) mod p`当`n mod 2p`小于时符号为正的位置`p`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:02:20.460

有了递归公式（`!n = (n - 1) (!(n-1) + !(n-2))`），为什么不实现“模乘`p`”和“模加”运算`p`呢？

# c# - 一个可垂直滚动的 GroupBox

> ID：12914141
> 
> 赞同：5
> 
> 时间：2012-10-16T11:54:56.547
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用*Windows Application Forms*创建一个应用程序。我基本上是 C# 和 Visual Studio 的新手（从昨天开始就一直在使用它）。到目前为止，我已经成功地创建了一个简单的表单，如屏幕截图所示。

# 我的表格

![我的表格申请](../Images/e7486280fcf1e1fc1365f678e0cd2b58.png)

# 背景/细节

我正在使用框中提供的 IP 从 MySQL 表中获取数据。此数据正在加载到`DataSet`. 自过去 10 小时以来，我一直在尝试将它们显示在其中的每一个中：

*   数据网格视图
*   表格布局面板

将它们放在窗体窗口的其余部分。但是这两个输出都不是我想要的。我正在获取的列之一是`VARCHAR`最高可达`190 chars`. 这两种情况的最终结果都不太容易阅读，这让我想到了我的问题。

# 问题

所以，现在我正在考虑在 a 中显示文本**`GroupBox`**，并带有一个垂直滚动条。来自的数据`DataSet`可以显示在内部`Label`或`LinkLabel`根据要求。

这种方法可行（时间优化）吗？是否有其他类型的框/视图可以满足我的条件？我将从主表中获取并显示**最多 225 行**，并从另一个表中获取*至少 2 个链接*`foreach`（在循环内）。

请建议我为这项工作提供任何其他最佳解决方案。另外，如何向 a 添加 200 多个标签`GroupBox`并使框垂直滚动。据我在**Visual Studio 2010**中看到的，任何类似`VerticalScroll`属性的东西都不存在于`GroupBox`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:59:13.017

向 Groupbox 添加一个具有 Scrollable 属性的面板，或者您可以通过 RichTextBox 实现它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-23T00:39:40.253

将所有内容放在一个自动调整大小的 groupBox ( `AutoSize = True`) 中，然后将该 groupBox 放入带有自动滚动集 ( `AutoScroll = True`) 的面板中。

# r - differentially expressed genes in R

> ID：12914151
> 
> 赞同：1
> 
> 时间：2012-10-16T11:55:46.027
> 
> 标签：r

```
I have the matrix in the following format :

ID_REF      GSM362180    GSM362181  GSM362188    GSM362189  GSM362192
244901_at   5.094871713 4.626623079 4.554272515 4.748604391 4.759221647
244902_at   5.194528083 4.985930299 4.817426064 5.151654407 4.838741605
244903_at   5.412329253 5.352970877 5.06250609  5.305709079 8.365082403
244904_at   5.529220594 5.28134657  5.467445095 5.62968933  5.458388909
244905_at   5.024052699 4.714631878 4.792865831 4.843975286 4.657188246
244906_at   5.786557533 5.242403911 5.060605782 5.458148567 5.890061836 
```

In the above matrix the first column is the list of genes ( 22810) and the corresponding columns correspond to the different promoters ( totally 4 different types) . How would it be possible to find the differentially expressed genes in such a case ??

I wantto use the t- test to identify the DEG's. I know to find the DEG's using the multtest package in R in case of two conditions ( such as control and treatment). But do not know how to proceed with four different types of promoters and identify the DEG's .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:25:11.657

使用该`limma`软件包进行各种微阵列差异表达。*它有一个很棒的小插图，可在其Bioconductor* [登陆页面](http://bioconductor.org/packages/release/bioc/html/limma.html)上找到（连同安装说明）。如果使用`limma`，请跟进*Bioconductor* [邮件列表](http://bioconductor.org/help/mailing-list/#bioconductor)上的问题（但请阅读小插图并在必要时先咨询具有一些统计知识的人。

# iphone - MPMoviePlayerController is not working while allocating it again

> ID：12914153
> 
> 赞同：0
> 
> 时间：2012-10-16T11:56:00.503
> 
> 标签：iphone, objective-c

I have two View controllers, in the firstViewController i wrote the code for MPMoviePlayerController and in the secondViewController also i wrote the same Code . then, only one MPMoviePlayerController is showing Video, But the other one is showing Black Screen.Even i Created one instance of MPMoviePlayerController for the both ViewController but Still did not work for me.

Here is the sample Code:

```
 myPlayer = [[MPMoviePlayerController alloc] init];
[myPlayer.view setFrame:CGRectMake(0, 0, 320, 393)]; 
myPlayer.shouldAutoplay = NO;
myPlayer.repeatMode = MPMovieRepeatModeNone;
myPlayer.fullscreen = YES;
myPlayer.movieSourceType = MPMovieSourceTypeStreaming;
myPlayer.scalingMode = MPMovieScalingModeAspectFit;
myPlayer.contentURL =theurl;
[self.view addSubview:myPlayer.view]; 
```

Please tell me, How to Play Video in both View Controllers?

Thank in Advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:06:51.113

我的建议是，您应该创建一个视频视图控制器来播放视频，并且可以在需要时调用。

# android - onSizeChange 方法 - getWidth 和 GetHeight

> ID：12914154
> 
> 赞同：0
> 
> 时间：2012-10-16T11:56:01.397
> 
> 标签：android, android-layout

我想显示大小可变的弹出窗口。布局由 EditView 组成，我在显示弹出窗口之前在运行时设置了文本。我想要新布局的高度。我正在使用以下代码。任何人都可以帮助我解决我的错误和错误的方法来解决我的问题。

*   onsizechange 方法总是返回 yOld 和 yNew 零。

    私人无效信息（字符串名称，字符串描述，视图v）{

    ```
     LayoutInflater layoutInflater = (LayoutInflater) getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View popupView = layoutInflater.inflate(R.layout.lo_popup_concerninfo,
                null, false);

        final LinearLayout ll = (LinearLayout) popupView.findViewById(R.id.lo_popup_concern_linearlayout);
        TextView tv_concernName = (TextView) popupView
                .findViewById(R.id.tv_concernName);
        final TextView tv_concernDesc = (TextView) popupView
                .findViewById(R.id.tv_concernDesc);
        Button btn_concernDone = (Button) popupView
                .findViewById(R.id.btn_concernDone);        

        tv_concernName.setText(name);
        tv_concernDesc.setText(Description);

        ll.addView(new MyCustomView(getActivity().getApplicationContext()));

        Display display = getActivity().getWindowManager().getDefaultDisplay();
            //popupView.measure(display.getWidth(), display.getHeight());
       popupView.measure(View.MeasureSpec.UNSPECIFIED,   View.MeasureSpec.UNSPECIFIED); 

          System.out.println("view.getMeasuredWidth() " +
                  popupView.getMeasuredWidth());
                  System.out.println("view.getMeasuredHeight() " +
                  popupView.getMeasuredHeight());

        final PopupWindow popup = new PopupWindow(popupView,
                display.getWidth() - 40, popupView.getMeasuredHeight() + finalHeight);

        System.out.println("view" +
                  popup.getHeight());

        popup.showAtLocation(v, Gravity.CENTER, 0, 10);
        popup.setFocusable(true);
        popup.update();

         class MyCustomView extends View{

         int viewWidth = 0;
         int viewHeight = 0;

         public MyCustomView(Context context) {
                 super(context);
                 System.out.println("ali1");
         }

         @Override
         protected void onSizeChanged(int xNew, int yNew, int xOld, int yOld){
                 super.onSizeChanged(xNew, yNew, xOld, yOld);
                 viewWidth = xNew;
                 viewHeight = yNew;

                 System.out.println("xNew " + xNew);
                 System.out.println("yNew " + yNew);
                 System.out.println("xOld " + xOld);
                 System.out.println("yOld " + yOld);

         }

         @Override
         protected void onDraw(Canvas canvas){
                 super.onDraw(canvas);

                 String msg = "width: " + viewWidth + "height: " + viewHeight;
                 System.out.println(msg);
         }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:14:18.847

在我的情况下，不需要 MyCustomClass 和覆盖 onsizechanged 方法来获得新的布局大小。由于小错误，我花了很多时间。我正在使用以下代码行来限制 TextView 拉伸和换行内容。

```
 final PopupWindow popup = new PopupWindow(popupView,
            display.getWidth() - 40, popupView.getMeasuredHeight() + finalHeight) 
```

现在我正在使用以下行

```
final PopupWindow popup = new PopupWindow(popupView,
                display.getWidth() - 40, ViewGroup.LayoutParams.WRAP_CONTENT); 
```

完整的方法如下。

```
private void info(String name, String Description, View v) {

        LayoutInflater layoutInflater = (LayoutInflater) getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View popupView = layoutInflater.inflate(R.layout.lo_popup_concerninfo,
                null, false);

        LinearLayout ll = (LinearLayout) popupView
                .findViewById(R.id.lo_popup_concern_linearlayout);

        TextView tv_concernName = (TextView) popupView
                .findViewById(R.id.tv_concernName);
        final TextView tv_concernDesc = (TextView) popupView
                .findViewById(R.id.tv_concernDesc);
        Button btn_concernDone = (Button) popupView
                .findViewById(R.id.btn_concernDone);
        tv_concernName.setText(name);
        tv_concernDesc.setText(Description);
        Display display = getActivity().getWindowManager().getDefaultDisplay();
        popupView.measure(display.getWidth(), display.getHeight());

        final PopupWindow popup = new PopupWindow(popupView,
                display.getWidth() - 40, ViewGroup.LayoutParams.WRAP_CONTENT);

        popup.showAtLocation(v, Gravity.CENTER, 0, 10);
        popup.setFocusable(true);
        popup.update();

        btn_concernDone.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                popup.dismiss();

            }
        });

    } 
```

# c# - Save XDocument element by element to avoid memory exceptions

> ID：12914155
> 
> 赞同：0
> 
> 时间：2012-10-16T11:56:02.733
> 
> 标签：c#, xml, linq, xmlwriter

How to modify my class in order to build large `XML` files? I try to use `XmlTextWriter`, but I don't know how to use it with `XDocument`. I'd like to write each `newElement`, then dispose it (in order to free RAM). Is there any possibility to do that? I know that I can use `XmlTextWriter` built-in methods to do this, but I don't want to resign from using `LINQ`...

Here's my class: [http://pastebin.com/p6VfpBFg](http://pastebin.com/p6VfpBFg)

# ios - 如何为 Mac OS X 创建苹果邮件插件

> ID：12914159
> 
> 赞同：5
> 
> 时间：2012-10-16T11:56:06.830
> 
> 标签：ios, xcode, plugins, apple-mail

我想做苹果邮件插件，但我什么都不知道！

1.  从哪里开始？
2.  我想为 Apple 邮件插件选择 Xcode 中的哪个应用程序（在创建新项目中）
3.  我们可以在 Objective-C 中开发这个东西吗？或需要其他事情知道。
4.  这个问题有教程吗？

我也在堆栈上找到了这个问题，但没有得到适当的帮助我还看看 [如何创建 Apple 邮件插件](https://stackoverflow.com/questions/12720536/how-to-create-apple-mail-plugin)

堆栈溢出但对答案不满意。

感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:57:51.603

Mail.app 中没有官方插件支持。苹果对其应用程序非常严格。

无论如何，多年来有一个项目将 PGP 集成到 Mail.app 中，并且仍然得到原始开发人员的支持。

检查[GPGMail](https://github.com/GPGTools/GPGMail)。源代码可通过 GitHub 免费获得，应该为您提供 Mail.app 插件的第一个概述或项目模板。

# java - How to Resizable column in pivot table in ZK

> ID：12914161
> 
> 赞同：0
> 
> 时间：2012-10-16T11:56:09.340
> 
> 标签：java, pivot-table, zk

I have pivot table with large content . Right now I am facing problem of column size.

If there are large content in database at that time some contents are not displayed .

Is there any property to make ZK pivottable column resizable .

Please check below image for more clear idea.

![enter image description here](../Images/4fb3d282162449cff72c451ec7edd1f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:54:25.683

您可以使用以下 Javascript 来调整它的大小。例如，

```
zk.Widget.$(jq('@pivottable')).$n('dataTitle').style.width = '600px'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:54:42.553

参见 ZK pivoty table 现场演示

[http://www.zkoss.org/zkdemo/application/pivottable](http://www.zkoss.org/zkdemo/application/pivottable)

也许你找到了你的解决方案

# windows - 在 Windows server 2008 上安装 javascript 驱动程序 Mongodb-native

> ID：12914167
> 
> 赞同：2
> 
> 时间：2012-10-16T11:56:32.567
> 
> 标签：windows, node.js, mongodb

我有 nodejs 与 mongodb 数据库一起运行，我正在尝试安装 javascript 驱动程序 mongodb-native .. 当我尝试“npm install -g mongodb --mongodb:native”时

我尝试在 Windows 7 机器上安装相同的配置，它工作得很好。知道为什么它不适用于 Windows server 2008 吗？

这是我从 npm install 命令得到的输出：

```
npm http GET https://registry.npmjs.org/mongodb
npm http GET https://registry.npmjs.org/mongodb
npm http GET https://registry.npmjs.org/mongodb
npm http GET https://registry.npmjs.org/bson/0.1.5
npm http GET https://registry.npmjs.org/bson/0.1.5
npm http GET https://registry.npmjs.org/bson/0.1.5

> bson@0.1.5 install C:\Users\xxx\AppData\Roaming\npm\node_modules\mongodb\no
de_modules\bson
> node install.js || (exit 0)

================================================================================

=                                                                              =

=  Attempting to build bson c++ extension                                      =

=   Windows: no build will be attempted as binaries are prepackaged            =

=   Unix: on failure the package will still install without the C++ extension  =

=                                                                              =

================================================================================

mongodb@1.1.11 C:\Users\xxx\AppData\Roaming\npm\node_modules\mongodb
└── bson@0.1.5

C:\Users\xxx>npm ls
C:\Users\xxx
└── (empty) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:59:33.513

我可以确认该驱动程序仅在 Windows 7 上测试过，而不是 W2K8，因此它无法正常工作也就不足为奇了。

如果您可以将调试信息上传到[Node MongoDB Google Group](https://groups.google.com/forum/?fromgroups#!forum/node-mongodb-native)以进行进一步分析和测试，我们将不胜感激。可以在那里更好地跟踪问题。

# c - 相当于 Windows 中的 TIOCOUTQ / SIOCOUTQ

> ID：12914168
> 
> 赞同：6
> 
> 时间：2012-10-16T11:56:34.297
> 
> 标签：c, sockets, networking, tcp, ioctl

到目前为止，我在谷歌上搜索和检查 msdn 表明 Microsoft Windows 不提供任何等效的 TIOCOUTQ / SIOCOUTQ 来查找套接字发送缓冲区中未发送数据的数量。如果一些好的黑客发现了一些其他的东西，那将非常有用，并且可以在这里发布。它将允许我的以下代码成为跨平台

```
int net_get_unsent (const int sockfd, unsigned long &sock_bytes_unsent )
{

/*  Queries how much data sent on sockfd, 
 *  may not have yet been recieved by the reciever
 * 
 *  returns more than 1 if there's unsent data,
 *  and fills in the amount of unsent data in sock_bytes_unsent
 * 
 * returns 0 if all the data has been sent
 * 
 * returns < 0 if there was a socket I/O error 
 * */

    int err = 0;
    int wsaerr = 0;

    if (sockfd <= 0)
        return -1;

#ifdef WINDOWS
    err = ioctlsocket(sockfd, SIOCOUTQ , &sock_bytes_unsent);

#else
    err = ioctl(sockfd, TIOCOUTQ, &sock_bytes_unsent);

#endif
    if (err < 0) {

#ifdef WINDOWS  
        wsaerr = WSAGetLastError();
#else
        wsaerr = errno;
#endif      
        printf("failed to get unsent data error:%d", wsaerr );
        sock_bytes_unsent = 0;
        return -1 * wsaerr;

    } else if (sock_bytes_unsent > 0 ) {
        printf( "unsent data: %lu bytes", sock_bytes_unsent );
        return 1;
    }

    return err;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:43:44.290

据我所知，Windows 中没有这样的调用。（可惜效果很好！）

但是，我发现以下链接非常有用，可以帮助您解决问题。**这些概念适用于任何操作系统，除了“还有什么可以做的？”**中提到的 SIOCOUTQ 部分。部分。

[**终极so_linger页面或者为什么我的tcp不可靠**](http://blog.netherlabs.nl/articles/2009/01/18/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-21T17:37:37.447

添加 Pavel P 评论，我可以确认它是死锁的。修复 depleteSendBuffer 函数（linux 版本）：

```
/*!\fn int depleteSendBuffer ( int fd , long timeout )
 *\brief wait until the socket is empty or timeout, checking each 50 msec
 *\param fd socket descriptor
 *\timeout timeout value in msec 
 *\return TRUE of FALSE 
 */
int depleteSendBuffer ( int fd , long timeout )
{
    int done = FALSE ;
    int lastOutstanding=-1;
    timeout /= 50 ;
    for( int it = 0 ; it < timeout ; it += 50 )
    {
        int outstanding;
        ioctl(fd, SIOCOUTQ, &outstanding);
        if(outstanding != lastOutstanding)
            printf("Outstanding: %d\n", outstanding);
        lastOutstanding = outstanding;
        if(!outstanding)
        {
            done = TRUE ;
            break;
        }
        usleep( 50000 );
    }
    return done ;
} 
```

# java - 当元素没有名称时从 JSONArray 中获取元素

> ID：12914173
> 
> 赞同：1
> 
> 时间：2012-10-16T11:56:50.317
> 
> 标签：java, json, arrays

我整天都在谷歌上搜索，看起来我是唯一一个遇到这个问题的人（奇怪吗？）

好吧，我有这个：

```
"genres": [
"Animation",
"Kids & Family",
"Science Fiction & Fantasy",
"Comedy"
], 
```

用以下方法取出数组没问题：

```
JSONArray jsonArray = res.getJSONArray("genres"); 
```

但现在？我不知道 jsonArray 中的名称。我可以做这个：

```
for (int i = 0; i < jsonArray.length(); i++) {
JSONObject jsonObject = jsonArray.getJSONObject(i);
} 
```

但是如何获取数组中元素的值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:07:53.147

你在使用 Douglas Crockford 的 JSON 库吗？如果是这样，您可以这样做：

```
for (int i = 0; i < jsonArray.length(); i++) {
    String value = jsonArray.getString(i);
    // do something with value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-24T05:17:32.797

`JSONArray`并且`JsonArray`来自不同的库，因此您不能将它们转换为收集，您应该将输出放入文件中并`JsonArray`从中再次创建

# image - PyGame 在图像加载时降低图像质量

> ID：12914178
> 
> 赞同：1
> 
> 时间：2012-10-16T11:57:13.363
> 
> 标签：image, pygame

我在原始分辨率为 1280x720 的显示器上全屏显示一系列图像。需要显示的图像为 1280x720px，以确保它们不需要转换。图像为 jpg 高质量。

当我将图像blit到表面时，它会以正确的大小显示图像，填充屏幕。正如我所期望的那样。

但是，显示的图像似乎被压缩了。压缩看起来像大约 80/100 的 jpeg 压缩。这看起来相当不错，但这会导致问题区域清楚地显示在显示屏上。下面的代码就是我现在所拥有的。PyGame 文档并没有真正显示任何质量设置，所以我希望我不必转向另一种方式来做到这一点，尽管那很好......

```
pygame.display.set_mode((1280, 720))
# move mouse pointer off of the screen
pygame.mouse.set_pos((1280, 720))   
pygame.display.update()

# Get the image from disk (with or without convert() shows same result)
picture = pygame.image.load(image).convert()

# smoothscale suggested on stack overflow, but shows no difference.
picture = pygame.transform.smoothscale(picture, (1280, 720))

# Get the screen surface to display an image on and blit
main_surface = pygame.display.get_surface()
main_surface.blit(picture, (0, 0))
pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:57:50.157

我无法从代码中看出实际的图像文件类型是什么。当我在 Pygame 中得到无法解释的输出时，我会首先尝试以下操作：

1）从命令行而不是shell（F5）运行游戏。shell 从 Tkinter 运行，它有自己的无限循环，可能会在您的程序中导致不必要的后果。

2) 通过双击从目录运行您的程序。

2) 尝试在 Photoshop 中更改图像文件类型。我通常使用 .png 或 jpeg。取决于您使用的是哪个，请尝试另一个。

3) 在 Photoshop 中，使用“另存为网页”手动减小文件大小，看看是否有帮助。

4）使用另一张图片检查它是否发生在所有图片或仅此一张。

我建议上述的原因是我会使用非常相似的代码，因此会寻找替代解决方案。我确信 Pygame 中的功能不应该受到指责，因为现在论坛上的用户会报告它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:19:52.280

我重写了代码以简化：

```
 #pygame code to render an image
 import pygame, os
 image = 'solution.jpg'  #located in same folder as this file:resized in Photoshop 
 pygame.init()  #I assume you did this?
 SCREEN = pygame.display.set_mode((1280, 720))
 pygame.mouse.set_pos((1280, 720))
 picture = pygame.image.load(image)
 SCREEN.blit(picture,(0,0))
 pygame.display.update()enter code here 
```

这很好用：

1) 我只有一个 pygame 更新而不是两个；我不使用 get_surface() 方法；我为表面创建了一个名为 screen 的变量。

2）也许尝试.png而不是.jpeg？

3) 另一个想法：图片是否重新调整为 1280,720 并且在 Photoshop 中看起来是否符合您的预期？

4) 试验文件类型

```
JPG
PNG
GIF (non animated)
BMP
PCX
TGA (uncompressed)
TIF
LBM (and PBM)
PBM (and PGM, PPM)
XPM 
```

以上都支持

我已经用照片测试了上面的代码，在 Photoshop 中调整了它们的大小，并使用了多张图像，没有任何问题。如果一切都失败了，请检查你是否有最新的 Pygame 版本和正确的操作系统版本？

# java - 在 CombinedDomainXYPlot 中创建标记/十字准线

> ID：12914179
> 
> 赞同：1
> 
> 时间：2012-10-16T11:57:15.813
> 
> 标签：java, jfreechart

我想在 CombinedDomainXYPlot 中显示一个标记。这是行不通的。我可以为每个子图添加标记。但我想为 CombinedDomainXYPlot 添加它。任何人都可以告诉我有关此问题的信息。我认为十字准线的行为是相同的。

这是创建 CombinedDomainXYPlot 并尝试添加标记的工作示例。添加的标记在`createCombinedChart()`

```
import java.awt.Font;

import javax.swing.JPanel;

import org.jfree.chart.ChartPanel;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.annotations.XYTextAnnotation;
import org.jfree.chart.axis.AxisLocation;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.IntervalMarker;
import org.jfree.chart.plot.Marker;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StandardXYItemRenderer;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

/**
 * A demonstration application showing how to create a combined chart.
 */
public class MarkerDemo2 extends ApplicationFrame {

/**
 * Constructs a new demonstration application.
 *
 * @param title  the frame title.
 */
public MarkerDemo2(String title) {

    super(title);
    JFreeChart chart = createCombinedChart();
    ChartPanel panel = (ChartPanel) createDemoPanel();
    panel.setPreferredSize(new java.awt.Dimension(500, 270));
    setContentPane(panel);

}

/**
 * Creates a combined chart.
 *
 * @return The combined chart.
 */
private static JFreeChart createCombinedChart() {

    // create subplot 1...
    XYDataset data1 = createDataset1();
    XYItemRenderer renderer1 = new StandardXYItemRenderer();
    NumberAxis rangeAxis1 = new NumberAxis("Range 1");
    XYPlot subplot1 = new XYPlot(data1, null, rangeAxis1, renderer1);
    subplot1.setRangeAxisLocation(AxisLocation.BOTTOM_OR_LEFT);

    // add secondary axis
    subplot1.setDataset(1, createDataset2());
    NumberAxis axis2 = new NumberAxis("Range Axis 2");
    axis2.setAutoRangeIncludesZero(false);
    subplot1.setRangeAxis(1, axis2);
    subplot1.setRangeAxisLocation(1, AxisLocation.BOTTOM_OR_RIGHT);
    subplot1.setRenderer(1, new StandardXYItemRenderer());
    subplot1.mapDatasetToRangeAxis(1, 1);

    XYTextAnnotation annotation = new XYTextAnnotation("Hello!", 50.0, 10000.0);
    annotation.setFont(new Font("SansSerif", Font.PLAIN, 9));
    annotation.setRotationAngle(Math.PI / 4.0);
    subplot1.addAnnotation(annotation);

    // create subplot 2...
    XYDataset data2 = createDataset2();
    XYItemRenderer renderer2 = new StandardXYItemRenderer();
    NumberAxis rangeAxis2 = new NumberAxis("Range 2");
    rangeAxis2.setAutoRangeIncludesZero(false);
    XYPlot subplot2 = new XYPlot(data2, null, rangeAxis2, renderer2);
    subplot2.setRangeAxisLocation(AxisLocation.TOP_OR_LEFT);

    // parent plot...
    CombinedDomainXYPlot plot = new CombinedDomainXYPlot(new NumberAxis("Domain"));
    plot.setGap(10.0);

    // add the subplots...
    plot.add(subplot1, 1);
    plot.add(subplot2, 1);
    plot.setOrientation(PlotOrientation.VERTICAL);

    // Add marker
    Marker marker = new IntervalMarker(30, 40);
    plot.addDomainMarker(marker);
    // Working
    // subplot1.addDomainMarker(marker);

    // return a new chart containing the overlaid plot...
    JFreeChart chart = new JFreeChart("CombinedDomainXYPlot Demo",
            JFreeChart.DEFAULT_TITLE_FONT, plot, true);
    ChartUtilities.applyCurrentTheme(chart);
    return chart;

}

/**
 * Creates a sample dataset.
 *
 * @return Series 1.
 */
private static XYDataset createDataset1() {

    // create dataset 1...
    XYSeries series1 = new XYSeries("Series 1a");
    series1.add(10.0, 12353.3);
    series1.add(20.0, 13734.4);
    series1.add(30.0, 14525.3);
    series1.add(40.0, 13984.3);
    series1.add(50.0, 12999.4);
    series1.add(60.0, 14274.3);
    series1.add(70.0, 15943.5);
    series1.add(80.0, 14845.3);
    series1.add(90.0, 14645.4);
    series1.add(100.0, 16234.6);
    series1.add(110.0, 17232.3);
    series1.add(120.0, 14232.2);
    series1.add(130.0, 13102.2);
    series1.add(140.0, 14230.2);
    series1.add(150.0, 11235.2);

    XYSeries series1b = new XYSeries("Series 1b");
    series1b.add(10.0, 15000.3);
    series1b.add(20.0, 11000.4);
    series1b.add(30.0, 17000.3);
    series1b.add(40.0, 15000.3);
    series1b.add(50.0, 14000.4);
    series1b.add(60.0, 12000.3);
    series1b.add(70.0, 11000.5);
    series1b.add(80.0, 12000.3);
    series1b.add(90.0, 13000.4);
    series1b.add(100.0, 12000.6);
    series1b.add(110.0, 13000.3);
    series1b.add(120.0, 17000.2);
    series1b.add(130.0, 18000.2);
    series1b.add(140.0, 16000.2);
    series1b.add(150.0, 17000.2);

    XYSeriesCollection collection = new XYSeriesCollection();
    collection.addSeries(series1);
    collection.addSeries(series1b);
    return collection;

}

/**
 * Creates a sample dataset.
 *
 * @return A sample dataset.
 */
private static XYDataset createDataset2() {

    // create dataset 2...
    XYSeries series2 = new XYSeries("Series 2");

    series2.add(10.0, 6853.2);
    series2.add(20.0, 9642.3);
    series2.add(30.0, 8253.5);
    series2.add(40.0, 5352.3);
    series2.add(50.0, 3532.0);
    series2.add(60.0, 2635.3);
    series2.add(70.0, 3998.2);
    series2.add(80.0, 1943.2);
    series2.add(90.0, 6943.9);
    series2.add(100.0, 7843.2);
    series2.add(105.0, 6495.3);
    series2.add(110.0, 7943.6);
    series2.add(115.0, 8500.7);
    series2.add(120.0, 9595.9);

    return new XYSeriesCollection(series2);

}

/**
 * Creates a panel for the demo (used by SuperDemo.java).
 *
 * @return A panel.
 */
public static JPanel createDemoPanel() {
    JFreeChart chart = createCombinedChart();
    ChartPanel panel = new ChartPanel(chart);
    panel.setMouseWheelEnabled(true);
    return new ChartPanel(chart);
}

/**
 * Starting point for the demonstration application.
 *
 * @param args  ignored.
 */
public static void main(String[] args) {

    MarkerDemo2 demo = new MarkerDemo2(
            "JFreeChart: CombinedDomainXYPlotDemo4.java");
    demo.pack();
    RefineryUtilities.centerFrameOnScreen(demo);
    demo.setVisible(true);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:58:23.353

`drawAnnotations``XYPlot`不幸的是，在`CombinedDomainXYPlot`子类中实现，`XYPlot`但没有调用`drawAnnotations`其重写的实现`draw`或将注释转发到子图。

您可以通过子类化`addAnnotation`和子类化来提供您的实现。`removeAnnotation``CombinedDomainXYPlot`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:26:42.800

感谢 Graham，我开发了一个对我有用的 CombinedDomainXYPlot 的调整版本。结果看起来像这样。

![带标记的组合DomainXYPlot](../Images/f432d0e1f57ebd8ac6ff3f4b1cf57e1d.png)

我合并了 XYPlot 和 XYLineAndShapeRenderer 的代码来实现这一点。这是源代码。

```
import java.awt.AlphaComposite;
import java.awt.Composite;
import java.awt.Font;
import java.awt.GradientPaint;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.jfree.chart.annotations.XYAnnotation;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.IntervalMarker;
import org.jfree.chart.plot.Marker;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.PlotRenderingInfo;
import org.jfree.chart.plot.PlotState;
import org.jfree.chart.plot.ValueMarker;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.data.Range;
import org.jfree.text.TextUtilities;
import org.jfree.ui.GradientPaintTransformer;
import org.jfree.ui.Layer;
import org.jfree.ui.LengthAdjustmentType;
import org.jfree.ui.RectangleAnchor;
import org.jfree.ui.RectangleInsets;

public class MyCombinedDomainXYPlot extends CombinedDomainXYPlot {

public MyCombinedDomainXYPlot() {
    super();
    // TODO Auto-generated constructor stub
}

public MyCombinedDomainXYPlot(ValueAxis domainAxis) {
    super(domainAxis);
    // TODO Auto-generated constructor stub
}

@Override
public void draw(Graphics2D g2, Rectangle2D area, Point2D anchor,
        PlotState parentState, PlotRenderingInfo info) {
    super.draw(g2, area, anchor, parentState, info);
    drawDomainMarkers(g2, area, 0, Layer.FOREGROUND);
}

/**
 * Draws the domain markers (if any) for an axis and layer.  This method is
 * typically called from within the draw() method.
 *
 * @param g2  the graphics device.
 * @param dataArea  the data area.
 * @param index  the renderer index.
 * @param layer  the layer (foreground or background).
 */
@Override
protected void drawDomainMarkers(Graphics2D g2, Rectangle2D dataArea,
                                 int index, Layer layer) {

    // check that the renderer has a corresponding dataset (it doesn't
    // matter if the dataset is null)
    if (index >= getDatasetCount()) {
        return;
    }
    Collection markers = getDomainMarkers(index, layer);
    ValueAxis axis = getDomainAxisForDataset(index);
    if (markers != null && axis != null) {
        Iterator iterator = markers.iterator();
        while (iterator.hasNext()) {
            Marker marker = (Marker) iterator.next();
            drawDomainMarker(g2, marker, dataArea);
        }
    }

}

/**
 * Draws a vertical line on the chart to represent a 'range marker'.
 * 
 * @param g2
 *            the graphics device.
 * @param plot
 *            the plot.
 * @param domainAxis
 *            the domain axis.
 * @param marker
 *            the marker line.
 * @param dataArea
 *            the axis data area.
 */
public void drawDomainMarker(Graphics2D g2, Marker marker, Rectangle2D dataArea) {

        ValueAxis domainAxis = getDomainAxis();
        if (marker instanceof ValueMarker) {
            ValueMarker vm = (ValueMarker) marker;
            double value = vm.getValue();
            Range range = domainAxis.getRange();
            if (!range.contains(value)) {
                return;
            }

            double v = domainAxis.valueToJava2D(value, dataArea,
                    getDomainAxisEdge());

            PlotOrientation orientation = getOrientation();
            Line2D line = null;
            if (orientation == PlotOrientation.HORIZONTAL) {
                line = new Line2D.Double(dataArea.getMinX(), v,
                        dataArea.getMaxX(), v);
            } else if (orientation == PlotOrientation.VERTICAL) {
                line = new Line2D.Double(v, dataArea.getMinY(), v,
                        dataArea.getMaxY());
            }

            final Composite originalComposite = g2.getComposite();
            g2.setComposite(AlphaComposite.getInstance(
                    AlphaComposite.SRC_OVER, marker.getAlpha()));
            g2.setPaint(marker.getPaint());
            g2.setStroke(marker.getStroke());
            g2.draw(line);

            String label = marker.getLabel();
            RectangleAnchor anchor = marker.getLabelAnchor();
            if (label != null) {
                Font labelFont = marker.getLabelFont();
                g2.setFont(labelFont);
                g2.setPaint(marker.getLabelPaint());
                Point2D coordinates = calculateDomainMarkerTextAnchorPoint(
                        g2, orientation, dataArea, line.getBounds2D(),
                        marker.getLabelOffset(),
                        LengthAdjustmentType.EXPAND, anchor);
                TextUtilities.drawAlignedString(label, g2,
                        (float) coordinates.getX(),
                        (float) coordinates.getY(),
                        marker.getLabelTextAnchor());
            }
            g2.setComposite(originalComposite);
        } else if (marker instanceof IntervalMarker) {
            IntervalMarker im = (IntervalMarker) marker;
            double start = im.getStartValue();
            double end = im.getEndValue();
            Range range = domainAxis.getRange();
            if (!(range.intersects(start, end))) {
                return;
            }

            double start2d = domainAxis.valueToJava2D(start, dataArea,
                    getDomainAxisEdge());
            double end2d = domainAxis.valueToJava2D(end, dataArea,
                    getDomainAxisEdge());
            double low = Math.min(start2d, end2d);
            double high = Math.max(start2d, end2d);

            PlotOrientation orientation = getOrientation();
            Rectangle2D rect = null;
            if (orientation == PlotOrientation.HORIZONTAL) {
                // clip top and bottom bounds to data area
                low = Math.max(low, dataArea.getMinY());
                high = Math.min(high, dataArea.getMaxY());
                rect = new Rectangle2D.Double(dataArea.getMinX(), low,
                        dataArea.getWidth(), high - low);
            } else if (orientation == PlotOrientation.VERTICAL) {
                // clip left and right bounds to data area
                low = Math.max(low, dataArea.getMinX());
                high = Math.min(high, dataArea.getMaxX());
                rect = new Rectangle2D.Double(low, dataArea.getMinY(), high
                        - low, dataArea.getHeight());
            }

            final Composite originalComposite = g2.getComposite();
            g2.setComposite(AlphaComposite.getInstance(
                    AlphaComposite.SRC_OVER, marker.getAlpha()));
            Paint p = marker.getPaint();
            if (p instanceof GradientPaint) {
                GradientPaint gp = (GradientPaint) p;
                GradientPaintTransformer t = im
                        .getGradientPaintTransformer();
                if (t != null) {
                    gp = t.transform(gp, rect);
                }
                g2.setPaint(gp);
            } else {
                g2.setPaint(p);
            }
            g2.fill(rect);

            // now draw the outlines, if visible...
            if (im.getOutlinePaint() != null
                    && im.getOutlineStroke() != null) {
                if (orientation == PlotOrientation.VERTICAL) {
                    Line2D line = new Line2D.Double();
                    double y0 = dataArea.getMinY();
                    double y1 = dataArea.getMaxY();
                    g2.setPaint(im.getOutlinePaint());
                    g2.setStroke(im.getOutlineStroke());
                    if (range.contains(start)) {
                        line.setLine(start2d, y0, start2d, y1);
                        g2.draw(line);
                    }
                    if (range.contains(end)) {
                        line.setLine(end2d, y0, end2d, y1);
                        g2.draw(line);
                    }
                } else { // PlotOrientation.HORIZONTAL
                    Line2D line = new Line2D.Double();
                    double x0 = dataArea.getMinX();
                    double x1 = dataArea.getMaxX();
                    g2.setPaint(im.getOutlinePaint());
                    g2.setStroke(im.getOutlineStroke());
                    if (range.contains(start)) {
                        line.setLine(x0, start2d, x1, start2d);
                        g2.draw(line);
                    }
                    if (range.contains(end)) {
                        line.setLine(x0, end2d, x1, end2d);
                        g2.draw(line);
                    }
                }
            }

            String label = marker.getLabel();
            RectangleAnchor anchor = marker.getLabelAnchor();
            if (label != null) {
                Font labelFont = marker.getLabelFont();
                g2.setFont(labelFont);
                g2.setPaint(marker.getLabelPaint());
                Point2D coordinates = calculateDomainMarkerTextAnchorPoint(
                        g2, orientation, dataArea, rect,
                        marker.getLabelOffset(),
                        marker.getLabelOffsetType(), anchor);
                TextUtilities.drawAlignedString(label, g2,
                        (float) coordinates.getX(),
                        (float) coordinates.getY(),
                        marker.getLabelTextAnchor());
            }
            g2.setComposite(originalComposite);

        }
    }

/**
 * Calculates the (x, y) coordinates for drawing a marker label.
 * 
 * @param g2
 *            the graphics device.
 * @param orientation
 *            the plot orientation.
 * @param dataArea
 *            the data area.
 * @param markerArea
 *            the rectangle surrounding the marker area.
 * @param markerOffset
 *            the marker label offset.
 * @param labelOffsetType
 *            the label offset type.
 * @param anchor
 *            the label anchor.
 * 
 * @return The coordinates for drawing the marker label.
 */
protected Point2D calculateDomainMarkerTextAnchorPoint(Graphics2D g2,
        PlotOrientation orientation, Rectangle2D dataArea,
        Rectangle2D markerArea, RectangleInsets markerOffset,
        LengthAdjustmentType labelOffsetType, RectangleAnchor anchor) {

    Rectangle2D anchorRect = null;
    if (orientation == PlotOrientation.HORIZONTAL) {
        anchorRect = markerOffset.createAdjustedRectangle(markerArea,
                LengthAdjustmentType.CONTRACT, labelOffsetType);
    } else if (orientation == PlotOrientation.VERTICAL) {
        anchorRect = markerOffset.createAdjustedRectangle(markerArea,
                labelOffsetType, LengthAdjustmentType.CONTRACT);
    }
    return RectangleAnchor.coordinates(anchorRect, anchor);

}
} 
```

# ios - iOS 中的 ZXing：Counted.h not found 错误

> ID：12914180
> 
> 赞同：0
> 
> 时间：2012-10-16T11:57:19.887
> 
> 标签：ios, zxing

我和其他用户有同样的问题。

在 FormatReader.h 中：

```
#import <zxing/common/Counted.h> 
```

当我尝试使用扩展了 FormatReader 的 QRCodeReader 时，就会发生这种情况，而问题就发生在这里。

我已经完成了所有集成步骤并仔细检查了它们。

ZXingWidget 项目正在构建中，它使用的是相同的文件。

我注意到，如果我将“<>”符号更改为“”，问题就会消失，但我很好奇如何在不更改库中每个导入的情况下进行构建。

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:05:26.950

对于那些有这个问题的人，我在用户标题搜索路径中添加了标题搜索路径（之前因为另一个问题而这样做），现在当我将始终搜索用户路径更改为是时问题得到了解决。

# windows-8 - 混合桌面/现代 ui 应用程序

> ID：12914182
> 
> 赞同：1
> 
> 时间：2012-10-16T11:57:24.860
> 
> 标签：windows-8

据我了解，微软希望允许“同时拥有桌面和现代 ui GUI”仅可用于 Web 浏览器（我在这里弄错了吗？）。

这是否意味着普通应用程序将被开发两次？例如 Skype 既可以作为纯桌面应用程序也可以作为纯现代 ui 应用程序使用？如果用户同时安装这两个实例，这两个实例将不共享任何数据？

我无法想象他们会转向手势友好的 uis/混合 ui，并留下完整的桌面应用程序（不是玩具/类似手机/游戏应用程序，只能存在于一个空间中）在现代内部没有集成/入口点ui。或者也许他们想参与“杀死成熟的桌面应用程序”运动？

那么是否有一个在任何 GUI 工具包中开发的桌面应用程序模型，它希望与现代 ui 中的小型 HTML/CSS/JS 前端进行一些最小集成，例如提供收藏夹或最近访问的文件、联系人的仪表板， ETC ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:35:31.977

您对“仅在浏览器中”的第一个说法是不正确的。桌面应用程序不会改变它们当前的设计范式。当然，您可以在桌面上安装基于浏览器的应用程序。但是仍然支持完整的客户端，并且仍然可以作为问题的真正解决方案。

> 您从该评论中得出的结论应该是，桌面应用程序并没有像人们断言的那样被弃用。现实情况是，桌面应用程序仍然是许多问题的唯一解决方案。

您关于共享数据的第二个问题不正确。Skype 与其应用伙伴共享大量数据。然而，不是因为共享本地存储；这是因为它共享的服务。我的帐户和联系人在服务器上。所以，他们分享了很多。

> 您从该评论中得出的结论是，Windows 8 应用程序不应高度利用本地存储，而应构建为面向服务的客户端。为此，您的桌面应用程序也应该已经开始利用这种架构。

您的第三个问题（非常神秘）似乎是询问桌面应用程序和配套的 Windows 8 应用程序是否可以相互共享或集成。答案是肯定的。它们不仅可以共享相同的服务，而且文件关联、自定义协议和一些非商店清单功能明确允许这样做。如果你问我，业务线应用程序应该有一个配套应用程序。集成点很多——尽管不是每一个。但是，如果不引入配套应用程序，就没有其他方法可以利用 Windows 8 的新功能——即使该应用程序做的很少。

> 您从该评论中得出的结论应该是，Windows 桌面应用程序和配套的 Windows 应用程序是首选和预期的开发方法。

祝你好运，谢谢你的提问。

# javascript - 将单选按钮选择的值与数组匹配

> ID：12914184
> 
> 赞同：0
> 
> 时间：2012-10-16T11:57:36.323
> 
> 标签：javascript, jquery, radio-button

我有几个单选按钮组，具体取决于在每个组中选择了哪个单选按钮，该特定答案需要返回 1 个或多个预设在数组中的值。

因此，如果在第 1 组中选择 1，则 A 和 B 值都增加 1，如果选择 B，则 C 和 D 增加，依此类推。最后应返回具有最多分数/增量的字母（提交表格时）

我该怎么办？我认为起点是返回选定的单选按钮，将它们与正确的数组索引匹配，然后检查该数组（字母）中增量最多的值并返回它的值？

```
 $(function(){

    var group1 = new Array();
      group1[0] = "A, B";
      group1[1] = "B, C, D";
      group1[2] = "E, B";
      group1[3] = "B";
      group1[4] = "F";

    var group2 = new Array();
      group2[0] = "D, A";
      group2[1] = "D, C";
      group2[2] = "B, F, E";
      group2[3] = "A";
      group2[4] = "B, D";

    $('form').submit(function(){

      var checked = $('input:radio:checked').length;

      //This is as far as I am

    });

    });

    <form>
      <input type="radio" name="group1" value="1" id="q1-1" /> 1
      <input type="radio" name="group1" value="2" id="q1-2" /> 2
      <input type="radio" name="group1" value="3" id="q1-3" /> 3
      <input type="radio" name="group1" value="4" id="q1-4" /> 4
      <input type="radio" name="group1" value="5" id="q1-5" /> 5

      <br /><br />

      <input type="radio" name="group2" value="1" id="q2-1" /> 1
      <input type="radio" name="group2" value="2" id="q2-2" /> 2
      <input type="radio" name="group2" value="3" id="q2-3" /> 3
      <input type="radio" name="group2" value="4" id="q2-4" /> 4
      <input type="radio" name="group2" value="5" id="q2-5" /> 5

      <input type="submit" value="submit" />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:27:30.767

检查它会在您创建数组时为您提供结果，因此我使用 switch 从数组中选择值。

```
var temp=0;
var result = [];
var maxvalue = 0;
var topQualityjob = "";
    $('input:radio:checked').each(function () {
        switch ($(this).attr("name")) {
            case "group1":
                $(group1[parseInt($(this).val()) - 1].split(",")).each(function () {
                    result.push(this);
                    temp = getaccurance(result, this);
                    if (maxvalue < temp) {
                        maxvalue = temp;
                        topQualityjob = this;
                    }
                });
                break;
            case "group2":
                $(group2[parseInt($(this).val()) - 1].split(",")).each(function () {
                    result.push(this);
                    temp = getaccurance(result, this);
                    if (maxvalue < temp) {
                        maxvalue = temp;
                        topQualityjob = this;
                    }
                });
                break;
        }
    });
    alert(topQualityjob); 
```

}

```
function getaccurance(result, val) {
    num = 0;
    for (i = 0; i < result.length; i++) {
        if (result[i] == val)
            num++;
    }
    return num;
} 
```

希望这会给出正确的答案

# html - css 列表不在位置

> ID：12914191
> 
> 赞同：0
> 
> 时间：2012-10-16T11:58:05.027
> 
> 标签：html, css

我的 HTML：

```
 <div id="content">
    <ul>
     <li>first list---ipsum ipsum ipsum<li>list inside list....ipsumipsumipsumipsum</li></li>
     <li class="last">last list content--ipsumipsumipsumipsum</li>
    </ul>
   </div> 
```

我的 CSS：

```
 #content{
 padding:30px 0 25px 0;
}

   #content ul{
display:inline;
margin:0;
padding:0;
list-style:none;
}

    #content li{
display:block;
float:left;
width:500px;
margin:0 45px 0 0;
}
    #content li.last{
width:290px;
float:right;
} 
```

我得到的输出是带有“last”类的列表，与第一个列表中的列表平行。我的目的是让它与第一个列表平行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:06:45.440

[演示](http://jsfiddle.net/NF6dx/)

`margin`对使用负数`.last`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:04:02.143

[http://jsfiddle.net/calder12/eXFYY/](http://jsfiddle.net/calder12/eXFYY/)

像那样？您正在浮动最后一个列表元素，您期望会发生什么？

```
#content li.last{
width:290px;
float:left;
}​ 
```

是的，仔细看看被搞砸的 HTML，你不应该在列表元素中包含列表元素。但是，您可以在列表元素中包含另一个列表，如下所示：

```
<ul>
  <li>Something
    <ul>
       <li>Something else</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:08:18.900

如果您将 CSS 更改为此，它会执行您想要的操作。

```
#content ul{
    display:inline;
    margin:0;
    padding:0;
    list-style:none;
    position relative;   
}

#content li{
    float:left;
    width:500px;
    margin:0 45px 0 0;
}

#content li.last{
    width:290px;
    position:absolute;
    top:0;
    right:0;
    clear:both;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:10:35.017

将这些代码放入#content li.last 样式中

```
position:absolute;
top:30px;
margin-left:300px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T12:21:21.227

您的代码可以正常工作，只需像@ZoltanToth 所说的那样更改 html 并减少 li 宽度

```
<div id="content">
 <ul>
   <li>first list---ipsum ipsum ipsum
       <ul>
           <li>list inside list....ipsumipsumipsumipsum</li>
       </ul>
   </li>
   <li class="last">last list content--ipsumipsumipsumipsum</li>
 </ul>
</div>​ 
```

[http://jsfiddle.net/xBEQc/1/](http://jsfiddle.net/xBEQc/1/)

# java - Eclipse /重命名项目中的参数

> ID：12914193
> 
> 赞同：4
> 
> 时间：2012-10-16T11:58:09.707
> 
> 标签：java, eclipse

我想更改参数的命名约定。到目前为止，我们一直使用“p”前缀，但我认为这不是必需的，我想摆脱前缀并将“p”后面的大写字符更改为小写。这是否有可能在“一次运行”的整个项目中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:33:09.237

要在 Eclipse 中更改整个项目中一个参数的名称，请执行以下操作：

点击参数。

按 [alt] + [shift] + [R]。

输入新名称。

按 Enter 接受新名称，它将改变整个项目。这也适用于类名、方法等。

对不起，但是这样你必须再次对所有参数执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:13:50.627

另一种解决方案是使用文件/搜索。您可以在工作区中的所有文件中进行查找和替换。这也接受正则表达式。

# c# - 使用包含方法的自定义 FaultException 类型

> ID：12914194
> 
> 赞同：1
> 
> 时间：2012-10-16T11:58:12.563
> 
> 标签：c#, .net, wcf, exception-handling

在我的 WCF 服务上，我有几个自定义故障类型。一个称为 BaseFault 的抽象类型和它的两个实现称为 TypeOneFault 和 TypeTwoFault

我像这样在服务端抛出异常

```
public string ThisMethodHasFault(string eType)
{
    if (eType.Contains("One"))
    {
        TypeOneFault one = new TypeOneFault("TypeOneFault thrown");
        throw new FaultException<TypeOneFault>(one, new FaultReason(new FaultReasonText("Fault reason here")));
    }
    else
    {
        TypeTwoFault two = new TypeTwoFault("TypeTwoFault thrown");
        throw new FaultException<TypeTwoFault>(two, new FaultReason(new FaultReasonText("Fault reason here")));
    }

    return "";
} 
```

我的服务界面是这样的

```
[OperationContract]
[FaultContract(typeof(TypeOneFault ))]
[FaultContract(typeof(TypeTwoFault ))]
string ThisMethodHasFault(string eType); 
```

在客户端，我有一个测试 winform 应用程序，我像这样捕获它

```
 MyServiceClient client = new MyServiceClient();

   try
    {
        client.ThisMethodHasFault(""); //get value from user

    }
    catch (FaultException<TypeOneFault>  ox)
    {
         TypeOneFault oneEx = ox.Detail;
         oneEx.{property} ...

    }   
    catch (FaultException<TypeTwoFault>  tx)
    {
         TypeTwoFault twoEx = tx.Detail;
         twoEx.{property} ...
    } 
```

**问题：**

在上面的方法中，我只获得了自定义故障类的属性，而不是我在其中定义的方法。该方法在我在子类 TypeOne 和 TypeTwo 中实现的基本抽象类中定义为抽象。有没有办法获得该方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:02:14.283

方法不序列化。只有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:11:49.287

支持的序列化仅适用于数据。从本质上讲，任何 Web 服务都必须隐藏实现并仅为您提供服务。序列化的是使任何客户端能够有效交互的数据类型。不需要序列化方法。

# php - 多个 spl_autoload_register 问题

> ID：12914195
> 
> 赞同：8
> 
> 时间：2012-10-16T11:58:13.770
> 
> 标签：php, class, spl-autoload-register

我正在开发自定义框架。当我试图让我的班级充满活力时，我遇到了一个问题。

这是我的文件的视觉效果：

![在此处输入图像描述](../Images/c61e916eea2a5b56eedc0a121671cf04.png)

所以我决定为每个文件夹（libs、controllers et modeles）创建一个不同的函数：

```
function autoloadLibs($class) {
    //require the general classes
    require 'libs/' . $class . '.php';
}

function autoloadModels($class) {
    //require the models classes
    require 'models/' . $class . '.php';
}

function autoloadControllers($class) {
    //require the controllers classes
    require 'controllers/' . $class . '.php';
}

spl_autoload_register ('autoloadLibs');
spl_autoload_register ('autoloadControllers');  
spl_autoload_register ('autoloadModels'); 
```

尽管如此，我还是收到了这条消息：**警告：require(libs/admin.php): failed to open stream**，当然这不是好文件夹。但我不知道如何解决这个问题。有没有优化我的课程调用的好方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T17:15:32.283

经过几次测试，我为我的案例找到了这个解决方案：

```
set_include_path(implode(PATH_SEPARATOR, array(get_include_path(), './libs', './controllers', './models')));
spl_autoload_register(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T11:59:38.077

[`is_file()`](http://php.net/manual/en/function.is-file.php)在尝试之前，您需要先检查文件是否存在`require`。

使用 时`spl_autoload_register()`，我发现注册一种方法来包含文件通常会更好。我相信您可以绑定多个功能的事实是使与不同库的互操作性变得容易（因此它们不会破坏`__autoload()`）。它还可以节省您多次编写代码以检查文件是否存在、映射`_`到目录分隔符（如果您这样做的话）等。

因此，假设您更改文件名以适应 的约定`Underscore_Separated_Name`，例如`Controller_Admin_Dashboard`，您可以使用...

```
function autoload($className) {

    $path = SYSPATH .
            str_replace("_", DIRECTORY_SEPARATOR, strtolower($className)) . 
            ".php";

    if (is_file($path)) {
        require $path;
    }

} 
```

第一次实例化`Controller_Admin_Dashboard`时，PHP 可能包含一个文件，例如`/app/controller/admin/dashboard.php`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T12:09:12.117

如果您有多个`spl_autoload_register`调用，则需要确保不使用`require`关键字来包含文件，因为这意味着**“包含文件或如果不能就死”**。

就我个人而言，我不同意其他人关于只有一个自动加载功能的观点，特别是如果您包含来自不同位置的类，例如控制器与某些库目录。我还先检查文件是否存在，*然后*包含它。

**tl;dr 版本：**不允许`spl_autoload_register`呼叫相互阻止。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-26T08:55:30.563

你的答案就在这里。当您注册多个自动加载器时，php 尝试通过这些自动加载器中的任何一个加载一个类，**然后**，php 从第一个注册到最后一个调用这些自动加载器。 **然后**，在这些自动加载器中的任何一个中，您都应该检查 file_exists 是否存在，**否则**，php 会尝试包含它，如果该文件不存在则抛出错误。**然后**，在包含之前，检查文件的存在。 **将您的自动装载机更改为：**

```
function autoloadLibs($class)
{
  #require the general classes
  $file = 'libs/' . $class . '.php';
  if(file_exists($file))
    require $file;
}

function autoloadModels($class)
{
  #require the models classes
  $file = 'models/' . $class . '.php';
  if(file_exists($file))
    require $file;
}

function autoloadControllers($class)
{
  #require the controllers classes
  $file = 'controllers/' . $class . '.php';
  if(file_exists($file))
    require $file;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T12:01:09.147

您应该在需要文件之前检查类名，例如：

```
function autoloadControllers($class) {
    //require the controllers classes
    if( substr( $class, -10) == 'Controller')){
        require 'controllers/' . $class . '.php';
    }
} 
```

如果无法加载类，我发现导致错误是正确的，但是您应该确保`require`仅在正确的路径上调用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-08T11:49:32.633

请注意，它`spl_autoload_register`提供了第三个参数 ( `prepend`)。`true`如果您希望将特定的自动加载函数放在自动加载堆栈的顶部，您可以将其设置为。这意味着这个特定的函数将首先被调用。

例子：

> spl_autoload_register(array('My_Class', 'My_Method'), true, true);

[http://www.php.net/manual/en/function.spl-autoload-register.php](http://www.php.net/manual/en/function.spl-autoload-register.php)

# ios - 未检索某些 NSCoding 变量

> ID：12914198
> 
> 赞同：0
> 
> 时间：2012-10-16T11:58:40.363
> 
> 标签：ios, xcode, nscoding

我正在使用 NSData 来存储对象以供以后使用。它有很多 NSStrings，我需要把它从一个对象中拉出来。
出于某种原因，只有**`some`**NSString 被存储，而其他一些则被清零！我在想这一定是我的代码有问题，我一定忘记初始化一些字符串，但是由于一个非常奇怪的原因，一些字符串丢失了数据！我无法`theImportantString`得到它的相关值，因为它首先似乎变量得到了它的值，但是在从 回来之后`Unarchive`，它等于 @""！

// CMyData.h
///////////////////

```
@interface CMyData : NSObject <NSCoding>
{
    NSString *ID;
    NSString *DIST;
    .  
    .  
}
@property (nonatomic,retain) NSString *ID;
@property (nonatomic,retain) NSString *DIST;

@end 
```

// CMyData.m
////////////////////

```
#import "CMyData.h"
@implementation CMyData

@synthesize ID;
@synthesize DIST;

- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        self.ID = [decoder decodeObjectForKey:@"ID"];
        self.DIST = [decoder decodeObjectForKey:@"DIST"];
    .  
    .  
 }

- (void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:ID forKey:@"ID"];
    [encoder encodeObject:DIST forKey:@"DIST"];
    .  
    .  

}

- (void)dealloc {
    [ID release];
    [DIST release];
    [super dealloc];

}

@end 
```

我的控制器.m

```
-(void) makeObject: (NSDictionary *)dict
{    
    CMyData* myData=[[CMyData alloc] init];
    myData.ID = [[NSString alloc] initWithString:[dict objectForKey:@"NAME"]];
    myData.DIST = [[NSString alloc] initWithString:[dict objectForKey:@"DISTRIBUTOR"]];
    .  
    .  

    myObject = [[[MYObject alloc] init];

    myObject.data = [NSKeyedArchiver archivedDataWithRootObject:myData];
} 
```

然后点击一个按钮：

```
- (void) tapOnIcon: (MyObject*)theObject 
{
    CMyData *data = [NSKeyedUnarchiver unarchiveObjectWithData:theObject.data];
    [delegate showData:data];
} 
```

在委托控制器中（无法再设置值）：

delegateController.m
/////////////////////////////

```
-(void) showData:(CMyData*)theData{
     self.theImportantString = [[NSString alloc] initWithString:theData.DIST];
     .
     .
     .

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:05:41.760

似乎您的类型不匹配：

```
// in - (id)initWithCoder:(NSCoder *)decoder
self.DIST = [decoder decodeIntForKey:@"DIST"]; 
```

但在声明中你有

```
// in CMyData.h
NSString *DIST; 
```

这应该是：

```
// in - (id)initWithCoder:(NSCoder *)decoder
self.DIST = [NSString stringWithFormat:@"%d", [decoder decodeIntForKey:@"DIST"]]; 
```

# sql - Postgres 中的多表计数（）

> ID：12914200
> 
> 赞同：3
> 
> 时间：2012-10-16T11:58:46.767
> 
> 标签：sql, postgresql, count, group-by

我有一个`events`有`id`和`venue`列的表。

该`events.venue`列与列匹配`venues.id`，这是一个相当典型且简单的设置。

一些场所被“损坏”，因为它们缺少关键信息，例如`geo_lat`. 我正在尝试创建损坏场地的优先级列表，其中`venue`托管最多`events`的位于顶部，以便我们知道哪些`venues`是最重要的修复。

到目前为止，我的查询看起来像；

```
select x.venue_id as id, count(x.venue_id) as events 
from (
    select * 
    from events e, venues v 
    where e.venue=v.id and v.geo_lat is null 
    group by e.venue
) as x order by events desc 
```

哪个给出错误： **错误：列“e.id”必须出现在 GROUP BY 子句中或用于聚合函数中**

我试图实现的输出看起来像；

```
venue.id | events
---------|-------
      12 |    219
     214 |    141
      36 |     41
    1834 |     22
     931 |      4 
```

仅包含*破损*的场地。这样，我知道固定场地`12`是重中之重，依此类推。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:02:54.900

```
SELECT
  venue.id,
  COUNT(events.venue)    AS event_count
FROM
  venues
LEFT JOIN
  events
    ON events.venue = venue.id
WHERE
  venue.geo_lat IS NULL
GROUP BY
  venue.id
ORDER BY
  COUNT(events.venue) DESC 
```

允许没有活动的`LEFT JOIN`场地。 *（`INNER JOIN`会将它们过滤掉。）*

# jquery - Chris Richards 的 jQuery 半分评价

> ID：12914202
> 
> 赞同：1
> 
> 时间：2012-10-16T11:58:55.200
> 
> 标签：jquery, rating

我正在尝试使用[Chris Richards jQuery 评级](http://zensoftware.org/archives/483)，我发现它非常有用且易于使用，但我还需要有插件没有的一半评级。是否有任何修改以具有此功能？

我无法使用[它](http://www.fyneworks.com/jquery/star-rating/)，因为文件使用起来非常混乱！

更新：我需要的是从 0.5 到 5 的 10 星评级。这意味着我想要单独的星来获得半分，并且我需要在 click 上显示所选的评级。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:01:31.367

我建议[http://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)它非常好，我使用它，我什至为它开发了一个 Zend 框架表单元素，我会推荐它，你可以随意拆分

它有更多的功能，我不认为你会想要修改它，它有只读的，并且动态设置评级，如果你对评级标准有依赖关系，你可以很容易地计算它并等它

一个非常基本的例子是：

```
 // selects radio with value 3
 $('.myclass').rating('select',3);
 $('.myclass').rating('readOnly',true);
 $('.myclass').rating('disable'); 
```

要拆分星星，您需要执行以下操作

```
<input class="myclass {split:2}" /> 
```

并根据需要拆分，您需要将单选按钮加倍，因为在拆分 2 的情况下，每个单选按钮将从 0.5 开始，例如序列将是 0.5,1,1.5 ...等而不是 1 ,2,3....等

* * *

**更新**：

对于锁定，您可以将其设置为只读，如下所示

```
$('.myclass').rating({
    callback: function(value, link){
    // mark it readonlyHere most probably like this $(this).readOnly(true)
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:47:14.807

可能的解决方案是这样的：我改用 rateit 插件 [http://rateit.codeplex.com/](http://rateit.codeplex.com/)。

```
<div class="rateit" id="rateit5" data-rateit-min="0" data-rateit-max="10" 
data-rateit- step="1"></div>
<div>
<span id="value5"></span>
<span id="hover5"></span>
</div>
<script type="text/javascript">
    $("#rateit5").bind('rated', function (event, value) 
    { $('#value5').text('You\'ve     rated it: ' + value/2); });
    $("#rateit5").bind('reset', function () 
    { $('#value5').text('Rating reset'); });
    $("#rateit5").bind('over', function (event, value) { 
        if (value == null)
        $('#hover5').text();
        else    
        $('#hover5').text(' ' + value/2); });
</script> 
```

# django - 强制在 Django 中填充表单字段

> ID：12914207
> 
> 赞同：-1
> 
> 时间：2012-10-16T11:59:14.843
> 
> 标签：django, django-forms

我将 Django 1.4 与 Python 2.7 和 Ubunutu 12.04 一起使用。

我有一个表格可以更新用户的个人资料。表单中的最后一项是密码。我使用现有用户的数据预先填充表单。密码字段没有预先填充 - 这很好。

问题是，当我“保存”数据时，它会将密码覆盖为空字段或空字段（我不知道是哪个）。坏的。

我能做些什么来防止这种情况发生？

我试图将其设为必填字段（`forms.py`）：

```
password = forms.CharField(widget = forms.PasswordInput(), required = True) 
```

没用。

我尝试`None`在更新密码之前检查密码是否存在（`views.py`）：

```
if (request.POST.get('password') is not None):
    user.set_password(request.POST.get('password')) 
```

没用。

空表单值是否返回为`None`？如果没有，它会以什么形式返回，我如何检查它是否为空？

编辑 1：我更新了我的一个`views`以检查验证 - 也许我做错了？

```
@login_required
def profile(request):
    """
    ..  function:: profile()

        Provide the profile page, where it can be updated

        :param request: Django Request object
    """
    if request.user.is_authenticated():
        user = User.objects.get(username = request.user.username)
        user_dict = createUserProfileDict(user)
        form = ProfileForm(initial = user_dict);
        data = { 'user' : request.user }
        data.update({ 'form' : form })
        data.update(csrf(request))

        if form.is_valid():
            return render_to_response("profile.html", data) 
```

现在我收到以下错误：

```
The view rsb.views.profile didn't return an HttpResponse object. 
```

那么，看来我的表格无效？我怎样才能找出原因？

这是`update_profile view`：

```
@login_required
def update_profile(request):
    """
    ..  function:: profile()

        provide the profile page

        :param request: Django Request object
    """
    if request.user.is_authenticated():
        user = User.objects.get(username = request.user)
        user.first_name = request.POST.get('first_name')
        user.last_name = request.POST.get('last_name')
        user.email = request.POST.get('email')
        if (request.POST.get('password') is not None):
            user.set_password(request.POST.get('password'))
        user.save()

        # Update the additional user information tied to the user
        user_info = UserProfile.objects.get(user_id = user.id)
        user_info.company_name = request.POST.get('company_name')
        user_info.client_type = request.POST.get('client_type')
        user_info.address1 = request.POST.get('address1')
        user_info.address2 = request.POST.get('address2')
        user_info.city = request.POST.get('city')
        user_info.state = request.POST.get('state')
        user_info.country = request.POST.get('country')
        user_info.zip_code = request.POST.get('zip_code')
        user_info.phone_number = request.POST.get('phone_number')
        user_info.save()

    return profile(request) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:10:12.110

首先，请记住控制您的表单是否为“is_valid()”

要检查您的表单是否已使用空值提交，请使用

```
MyForm.has_changed() 
```

太糟糕了，这不是一个记录的功能:(

如果您想要默认密码，我建议您检查该字段是否有效，然后使用类似

```
''.join([choice(string.letters + string.digits) for i in range(7)]) 
```

为用户生成新密码（范围（7）是您想要的长度）。然后使用选择加入方法（请参阅：向用户发送带有临时密码的电子邮件）

根据新上下文进行编辑：

来自 django 文档：

```
If a Field has required=False and you pass clean() an empty value, 
then clean() will return a normalized empty value 
rather than raising ValidationError.     
For CharField, this will be a Unicode empty string. 
For other Field classes, it might be None. (This varies from field to field.) 
```

就是这样，你的密码字段应该有required=False，所以你可以把它当作一个空字符串

那么在您看来，您可以这样做：

```
if input_password != '' and input_password != saved_password:
    saved_password = input_password 
```

这只是伪代码，但它应该给你一个清晰的想法

# java - JFileChooser 远程视图

> ID：12914209
> 
> 赞同：1
> 
> 时间：2012-10-16T11:59:18.303
> 
> 标签：java, swing, file-io, filesystems, jfilechooser

我一直在实现一个`JFileChooser`作为远程文件系统的视图。当`getFiles()`从`FileSystemView`I 使用目录位置数据发送请求到远程系统时调用。

然后我异步接收到包含我正在浏览的目录中所有文件的数据包，之后我设置文件准备更新视图（这样下次`getFiles()`调用它将返回接收到的文件数组）但问题是我没有不知道如何更新`JFileChoosers`视图。

我试过了

```
fileChooser.updateUI(); 
```

但它会引发以下异常：

```
Exception in thread "pool-1-thread-31" java.lang.NullPointerException
    at com.sun.java.swing.plaf.windows.WindowsFileChooserUI.setDirectorySelected(Unknown Source)
    at javax.swing.plaf.basic.BasicFileChooserUI$Handler.valueChanged(Unknown Source)
    at javax.swing.JList.fireSelectionValueChanged(Unknown Source)
    at javax.swing.JList$ListSelectionHandler.valueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.moveLeadSelectionIndex(Unknown Source)
    at sun.swing.FilePane.clearSelection(Unknown Source)
    at sun.swing.FilePane.doFilterChanged(Unknown Source)
    at sun.swing.FilePane.propertyChange(Unknown Source)
    at java.beans.PropertyChangeSupport.fire(Unknown Source)
    at java.beans.PropertyChangeSupport.firePropertyChange(Unknown Source)
    at java.beans.PropertyChangeSupport.firePropertyChange(Unknown Source)
    at java.awt.Component.firePropertyChange(Unknown Source)
    at javax.swing.JFileChooser.setFileFilter(Unknown Source)
    at javax.swing.JFileChooser.addChoosableFileFilter(Unknown Source)
    at javax.swing.JFileChooser.updateUI(Unknown Source)
    at com.ruuhkis.remoteserver.ui.RemoteView.updateFiles(RemoteView.java:252)
    at com.ruuhkis.remoteserver.ui.RemoteApplication.onFileListReceived(RemoteApplication.java:122)
    at com.ruuhkis.remoteserver.packets.impl.FileListPacket.handlePacket(FileListPacket.java:32)
    at com.ruuhkis.remoteserver.packets.PacketHandler$1.run(PacketHandler.java:57)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

当我在目录中并且我知道它已收到新文件列表并按 f5 时，它将显示刚刚加载的新文件，我怎样才能使它不必按 f5？此外，按 f5 会导致系统重新加载目录的预先存在的数据。

当前代码基本上是：

```
 view = new FileSystemView() {

        int c;

        @Override
        public File[] getFiles(File dir, boolean useFileHiding) {

            if(!auto) {
                PacketBuilder builder = new PacketBuilder(OpCodes.FILE_LIST_REQUEST_PACKET.getOpCode());
                root = dir.getAbsolutePath();
                builder.writeString(dir.getAbsolutePath());
                builder.write(RemoteView.this.remote.getChannel());
            }
            auto = false;

            if(dirContent == null)
                return new File[]{new File((c++) + ".txt")};
            else
                return dirContent;
        }

        @Override
        public Boolean isTraversable(File arg0) {
            return true;
        }

        @Override
        public File createNewFolder(File arg0) throws IOException {
            // TODO Auto-generated method stub
            return null;
        }
    }; 
```

c 基本上只是用于测试，所以我可以查看系统是否刷新

当我收到文件列表时，我会这样做：

```
public void updateFiles(String list) {
    String[] parts = list.split("" + ((char)10));
    File[] files = new File[parts.length];

    for(int i = 0 ; i < parts.length; i++) {
        files[i] = new File(root + File.separatorChar + parts[i]);

    }

    dirContent = files;

    fileChooser.setCurrentDirectory(new File(root));

    fileChooser.updateUI();

    auto = true;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:08:22.300

*   不要调用`fileChooser.updateUI();`它是为了应用自定义 UI 或从外观和感觉更改方法

*   我认为最好使用[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)或[JTree](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html) as `FileSystemView`，然后以编程方式创建新[文件、文件夹 ei](http://www.java2s.com/Tutorial/Java/0180__File/Catalog0180__File.htm)

*   [这里的例子](http://www.java2s.com/Tutorial/Java/0240__Swing/Catalog0240__Swing.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:07:48.083

浏览其他 JFileChooser 项目后，我找到了方法

```
fileChooser.rescanCurrentDirectory(); 
```

这似乎更新了文件系统视图..

每次我问一个问题，我都会在不久之后找到答案：/

# actionscript-3 - AS3 - ScrollPane 动态滚动高度问题

> ID：12914210
> 
> 赞同：1
> 
> 时间：2012-10-16T11:59:18.460
> 
> 标签：actionscript-3, flash, dynamic, scroll, scrollpane

我已经搜索了整个网络，但我无法解决问题。

（adobe flash pro cs6）我在舞台上放了一个简单的滚动窗格，并从库（导出为actionscript）中设置了一个movieclip“页面”作为.source。

“页面”电影剪辑有一些关键帧，每个关键帧代表一个页面。好吧，这些页面的高度不同，当我切换页面时，滚动窗格不会注意到嵌套影片剪辑的高度变化，因此它保持在第一个关键帧的滚动条高度上。

我试过 .invalidate() 和 .refreshPane() 但它们都对我有用。

这是我的代码：

主要时间线：

```
viewport.source = pages;
viewport.setSize( 990, 480 );
var pages_mc:MovieClip = viewport.content as MovieClip; 
```

菜单时间线

```
btn_a.buttonMode = true;
btn_a.addEventListener( MouseEvent.CLICK, btnClick );
btn_b.buttonMode = true;
btn_b.addEventListener( MouseEvent.CLICK, btnClick );

function btnClick( e:MouseEvent ):void {
    if( e.target.name == "btn_a" ) {
        MovieClip(root).pages_mc.gotoAndStop("pa");
        MovieClip(root).viewport.invalidate();
} else if( e.target.name == "btn_b" ) {
        MovieClip(root).pages_mc.gotoAndStop("pb");
        MovieClip(root).viewport.invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:03:26.790

试试（假设`viewport`是你的 ScrollPane）`viewport.update()`。

我不知道您在网络上的哪个位置尝试过，但 Adob​​e 文档实际上在这方面做得很好。从条目中`refreshPane()`：

> 此方法不会重绘滚动条。要重置滚动条，请使用 update() 方法。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/ScrollPane.html#update%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/ScrollPane.html#update%28%29)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/ScrollPane.html#refreshPane%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/ScrollPane.html#refreshPane%28%29)

# sublimetext2 - 在 Sublime Text 2 中通过宏查找和替换以从 mysql_ 切换到 mysqli_

> ID：12914216
> 
> 赞同：11
> 
> 时间：2012-10-16T11:59:40.930
> 
> 标签：sublimetext2, sublimetext3

我有一堆代码需要从 PHP 转换`mysql_*`到`mysqli_*`

在 Sublime Text 2 中，我可以轻松地进行查找`mysql_`并将其替换为`mysqli_`

我遇到的问题是：

`mysql_query($query, $link_identifier)`

相对

`mysqli_query($link, $query)`

更糟糕的是，$query 并不总是查询字符串的变量名。我可能有：

```
$q_test = "SELECT `lName` FROM `users` ORDER BY `lName`";
$rstest = mysql_query($q_test, $DB) or die(mysql_error($DB)); 
```

和

```
$q_tester = "SELECT `address` FROM `users_address` ORDER BY `id`";
$rstester = mysql_query($q_tester, $DB) or die(mysql_error($DB)); 
```

在同一页上。

有没有办法让我在 Sublime Text 2 中构造一个宏来将上述两个更改为：

```
$rstest = mysqli_query($DBi, $q_test) or die(mysqli_error($DBi));
$rstester = mysqli_query($DBi, $q_tester) or die(mysqli_error($DBi)); 
```

同时？我想我可以使用正则表达式来完成这个我只是不知道如何以及从哪里开始。

**更新**

所以，经过一番打猎后，我发现我可以搜索：

```
mysql_query\(\$(\w+), \$DB\) 
```

并替换为

```
mysqli_query\(\$DBi\, \$$1) 
```

转换 `$rstest = mysql_query($q_test, $DB) or die(mysql_error($DB));`

到

`$rstest = mysqli_query($DBi, $q_test) or die(mysql_error($DB));`对我来说但是...

原来你不能宏查找和替换。我有什么选择吗？

**更新**

所以看起来我可以使用插件[Reg Replace](https://github.com/facelessuser/RegReplace)来完成我想要的，即使我有更多的设置要做。

使用 Reg Replace，我可以将多个查找和替换操作链接在一起，并将它们绑定到击键，因此我基本上可以执行一系列查找和替换操作来获得我需要的内容：

1.  查找并替换`mysql_`为`mysqli_`
2.  查找并替换`$DB`为`$DBi`
3.  查找并替换`, $DBi) or die(`为`) or die(`
4.  查找并替换`mysqli_query($`为`mysqli_query($DBi, $`

那些基本上得到

`$rstest = mysql_query($q_test, $DB) or die(mysql_error($DB));`

转换成

`$rstest = mysqli_query($DBi, $q_test) or die(mysqli_error($DBi));`

对我来说只需一次按键。这不是最佳的，但它确实有效。不过，我仍在寻找一个简单的、没有插件的解决方案。

更新以上内容适用于使用[更新的 Reg Replace 插件的 Sublime Text 3](https://github.com/facelessuser/RegReplace/tree/ST3)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T11:46:16.693

由于 sublime 目前无法在宏中使用正则表达式记录查找和替换，因此我将使用[Reg Replace](https://github.com/facelessuser/RegReplace)和一系列链接的查找和替换命令来获取我正在寻找的内容。

# android - 资源文件夹选择未按预期工作

> ID：12914219
> 
> 赞同：1
> 
> 时间：2012-10-16T11:59:52.593
> 
> 标签：android, image, layout, resources

我有一个大图像徽标，我目前正在缩放（通常是向下）以填充 50% 的屏幕。起初我把它放在基本的 /res/drawable 文件夹中。它适用于大多数设备，但在一些小屏幕的低端手机上，缩放引入了混叠，看起来很可怕。所以我将图像分发如下：

```
 /res/drawable   
        -Large image, intended to be used on most devices
    /res/drawable-normal
        -Smaller image, intended to target smaller screens 
```

但是，在三星 Galaxy Tab 2 10' 上进行测试时，它会选择普通文件夹中的图像，而不是基本可绘制文件夹中的图像。我知道这款平板电脑适合 drawable-xlarge 类别，因为它正在从那里挑选其他资源。所以我必须想出这个目录结构才能让它工作：

```
 /res/drawable   
        -Large image, intended to be used on most devices
    /res/drawable-normal
        -Smaller image, intended to target smaller screens
    /res/drawable-xlarge
        -Same image as the drawable base folder, only used for the tablet to select the correct image. 
```

现在它可以按我的意愿工作，但我不明白为什么系统会为 xlarge 设备选择普通文件夹。它不应该先在 xlarge 文件夹中查找，然后在基本可绘制文件夹中查找吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:15:06.373

它以可扩展的方式回落。

如果找不到 Xlarge，那么 large 是更接近的匹配，然后 normal 是更接近的匹配，然后是默认文件夹

参考：

[Android 如何找到最匹配的资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

[安卓开发者](http://developer.android.com/guide/topics/resources/providing-resources.html#Compatibility)

![在此处输入图像描述](../Images/75f6198dbe92288f5008e32627033740.png) ![在此处输入图像描述](../Images/114e8780b8943d21f3f4d76c34e776b0.png)

# android - 如何查找外部存储目录

> ID：12914225
> 
> 赞同：2
> 
> 时间：2012-10-16T12:00:10.037
> 
> 标签：android, file-io

```
static final String FILE_LOG = "log.txt";

private void SaveLogToExternalStorage()
{
    String s = tv_log.getText().toString();
    File file;
    FileOutputStream fos = null;

    try
    {
        file = new File(getExternalFilesDir(null), FILE_LOG);
        fos = new FileOutputStream(file);
    }
    catch(FileNotFoundException e)
    {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
        return;
    }

    try
    {
        fos.write(s.getBytes());
        fos.close();
    }
    catch(IOException e)
    {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
        return;
    }

    String savedFile = Environment.getExternalStorageDirectory() + "/" + FILE_LOG;
    Toast.makeText(this, "Log is saved to " + savedFile, Toast.LENGTH_SHORT).show();
} 
```

此功能打印`Log is saved to mnt/sdcard/log.txt`实际上文件已保存到`mnt/sdcard/Android/data/package.name/files/log.txt`如何以编程方式找到此目录以显示正确的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:20:24.817

通过使用解决`file.getAbsolutePath()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:15:15.820

只需更改以下行。

```
String savedFile1 = Environment.getExternalStorageDirectory() + getFileStreamPath(FILE_LOG).toString();
Toast.makeText(this, "Log is saved to " + savedFile1, Toast.LENGTH_LONG).show();
Log.d("File", savedFile1); 
```

这将给出如下输出：`/mnt/sdcard/data/data/com.android.experimentalproject/files/log.txt`

根据亚历克斯法伯..

```
String savedFile = file.getAbsolutePath().toString();
Toast.makeText(this, "Log is saved to " + savedFile, Toast.LENGTH_SHORT).show();
Log.e("PATH", savedFile1); 
```

输出：`/mnt/sdcard/Android/data/com.android.experimentalproject/files/log.txt`

他在现场...

希望这会帮助你。

谢谢..

# java - Google plus java starter 命令行

> ID：12914227
> 
> 赞同：0
> 
> 时间：2012-10-16T12:00:18.443
> 
> 标签：java, oauth-2.0, google-plus

我已经从[这里](https://code.google.com/p/google-plus-java-starter/)下载了 Google plus java starter 项目， 我设置了 maven，创建了我的 client_id 和 client_secret 以及我的 api_key 并将这些密钥放入 config.properties。

现在我开始运行该项目。这

```
setupTransport() 
```

方法似乎有效。

但如果

```
getProfile() 
```

方法被调用，抛出异常。

这是输出：

```
Attempting to open a web browser to start the OAuth2 flow
Once you authorize please enter the code here: [entered my Code here]

============== Get my Google+ profile ==============

Okt 16, 2012 1:25:10 PM Sample getProfile
Schwerwiegend: {
"error": {
"errors": [
{
"domain": "usageLimits",
"reason": "dailyLimitExceededUnreg",
"message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.",
"extendedHelp": "https://code.google.com/apis/console"
}
],
"code": 403,
"message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup."
 }
}

Exception in thread "main" java.io.IOException: Stream closed
at java.util.zip.GZIPInputStream.ensureOpen(Unknown Source)
at java.util.zip.GZIPInputStream.read(Unknown Source)
at java.io.FilterInputStream.read(Unknown Source)
at com.google.api.client.http.HttpResponse.parseAsString(HttpResponse.java:464)
at Sample.main(Sample.java:45) 
```

* * *

编辑：

我不知道发生了什么，但现在可以了。我只是再次复制粘贴了 ID，刷新了我的项目并让 e​​clipse 再次构建它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:25:06.653

Are you using the v5 .zip package from the downloads page? If so, could you try to [checkout the code](https://code.google.com/p/google-plus-java-starter/source/checkout) for the latest version and use that instead?

# svg - d3自定义条形图条使用svg路径而不是rects

> ID：12914228
> 
> 赞同：3
> 
> 时间：2012-10-16T12:00:18.523
> 
> 标签：svg, d3.js, data-visualization, bar-chart

我正在尝试构建一个 d3 条形图，但由于设计师狡猾，我需要在每个条形的左上角和右上角设置圆角。我想我到了某个地方，但我可以使用一些帮助来推动它。

仍然在学习 d3 和 svg 的上坡曲线上，所以我希望我没有错过任何明显的东西。

我已经使用rects（注释掉的部分）成功地完成了这项工作，但是有一个缺陷，可能是我绘制路径的方式。我作为参数传递给 topRoundedRect 函数的匿名函数（例如 function(datum, index) { return x(index); }）在附加到路径的 d 属性之前没有被评估，我没有明白为什么。所以我最终得到这样的错误：

`Error: Problem parsing d="Mfunction (datum, index) { return x(index); }3,function (datum) { return height - y(datum); }h34a3,3 0 0 1 3,3vNaNh-40vNaNa3,3 0 0 1 3,-3z"`

你能提供的任何建议都会很棒。代码如下。

```
var data = [60.45,60.45,89.54,120.34,106.45,127.43];

var barWidth = 40;
var width = (barWidth + 10) * data.length;
var height = 500; 

var x = d3.scale.linear().domain([0, data.length]).range([0, width]);
var y = d3.scale.linear().domain([0, d3.max(data, function(datum) { return datum; })]).
  rangeRound([0, height]);

// add the canvas to the DOM
var barDemo = d3.select("body").
  append("svg").
  attr("width", width).
  attr("height", height);

function topRoundedRect(x, y, width, height, radius) {
    return "M" + (x + radius) + "," + y
       + "h" + (width - (radius * 2))
       + "a" + radius + "," + radius + " 0 0 1 " + radius + "," + radius
       + "v" + (height - radius)
       + "h" + (0-width)
       + "v" + (0-(height-radius))
       + "a" + radius + "," + radius + " 0 0 1 " + radius + "," + -radius
       + "z";
}  

  /*
barDemo.selectAll("rect").
  data(data).
  enter().
  append("svg:rect").
  attr("x", function(datum, index) { return x(index); }).
  attr("y", function(datum) { return height - y(datum); }).
  attr("height", function(datum) { return y(datum); }).
  attr("width", barWidth).
  attr("fill", "url(#barGradient)");   */

  barDemo.selectAll("path").
    data(data).
    enter().append("path").
        attr("d", topRoundedRect(
            function(datum, index) { return x(index); },
            function(datum) { return height - y(datum); },
            barWidth,
            function(datum) { return y(datum); },
            3))
        .style("fill","#ffcc00")
        .style("stroke","none"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:24:07.790

您的属性的参数应该是一个将数据和索引作为参数的函数。尝试：

```
attr("d", function(datum, index) { 
    return topRoundedRect(    x(index), 
                              height - y(datum),
                              barWidth,
                              y(datum),
                              3);
}) 
```

# c++ - 尝试将 uint*& 用作 const unit*& 失败：从 'uint8_t* 类型的表达式中对 'const uint8_t*&' 类型的引用进行无效初始化

> ID：12914229
> 
> 赞同：0
> 
> 时间：2012-10-16T12:00:31.147
> 
> 标签：c++, pointers, gcc, reference, constants

以下代码无法为我编译（gcc 4.6.3，Ubuntu 12.04）：

```
#include <inttypes.h>
#include <stdio.h>

static inline void adjustBuffer(const uint8_t *&buf, size_t &bufSize, size_t len)
{
    buf += len;
    bufSize -= len;
}                

uint16_t packInt(uint8_t *&buf, size_t &bufSize, int value)
{
    size_t valueSize = sizeof(int);
    *reinterpret_cast<int *>(buf) = value;
    adjustBuffer(buf, bufSize, valueSize);
    return valueSize;
}

bool unpackInt(const uint8_t *&buf, size_t &bufSize, int &value)
{
    value = *reinterpret_cast<const int*>(buf);
    adjustBuffer(sizeof(int));
    return true;
}

int main()
{
    static const size_t BufSize = 100;
    size_t bufSize = BufSize;
    uint8_t buf[BufSize];
    uint8_t *buf_ptr = buf;
    packInt(buf_ptr, bufSize, 1);
    bufSize = BufSize;
    int x;
    unpackInt(buf, bufSize, x);
    return 0;
} 
```

我收到以下错误：

```
$ make CXXFLAGS="-Wall -g" ref_to_ptr
g++ -Wall -g    ref_to_ptr.cpp   -o ref_to_ptr
ref_to_ptr.cpp: In function ‘uint16_t packInt(uint8_t*&, size_t&, int)’:
ref_to_ptr.cpp:15:41: error: invalid initialization of reference of type ‘const uint8_t*& {aka const unsigned char*&}’ from expression of type ‘uint8_t* {aka unsigned char*}’
ref_to_ptr.cpp:5:20: error: in passing argument 1 of ‘void adjustBuffer(const uint8_t*&, size_t&, size_t)’
ref_to_ptr.cpp: In function ‘bool unpackInt(const uint8_t*&, size_t&, int&)’:
ref_to_ptr.cpp:22:29: error: invalid initialization of non-const reference of type ‘const uint8_t*& {aka const unsigned char*&}’ from an rvalue of type ‘unsigned int’
ref_to_ptr.cpp:5:20: error: in passing argument 1 of ‘void adjustBuffer(const uint8_t*&, size_t&, size_t)’
ref_to_ptr.cpp: In function ‘int main()’:
ref_to_ptr.cpp:35:30: error: invalid initialization of non-const reference of type ‘const uint8_t*& {aka const unsigned char*&}’ from an rvalue of type ‘uint8_t* {aka unsigned char*}’
ref_to_ptr.cpp:19:6: error: in passing argument 1 of ‘bool unpackInt(const uint8_t*&, size_t&, int&)’
make: *** [ref_to_ptr] Error 1 
```

编译器似乎无法将 uint8_t* (uint8_t *&) 的引用分配给 const uint8_t *& （IIRC 是对 const 指针的引用）。首先，我不明白为什么它试图将指针分配给 uint8_t 而不是对指针的引用。其次，转换不应该工作吗？您可以将 uint8_t * 转换为 const uint8_t *，为什么不能转换对这两种类型的引用？

当然，添加一个接受 const uint8_t *& 的 adjustBuffer() 可以，但我想了解原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:17:05.850

传递 a`uint8_t *`作为`const uint8_t *&`参数将允许函数`unint8_t *`用 a替换`const uint8_t *`。现在有一个`const uint8_t *`在调用者期望修改的地方`uint8_t *`。这不是保存，因为调用者可能会在函数返回后修改指向的数据。

[问题与此 C++ FAQ lite section](http://www.parashift.com/c++-faq/constptrptr-conversion.html)中的问题相同。

# linux - 如何将应用程序配置为默认使用旧版本的库

> ID：12914232
> 
> 赞同：0
> 
> 时间：2012-10-16T12:00:38.180
> 
> 标签：linux, gcc, shared-libraries

默认情况下，当操作系统上安装了该库的两个不同版本时，程序总是使用较新版本的库。如何配置我的系统，以便所有应用程序默认使用旧版本的库？也许我应该使用`ldd`or `ldconfig`，但我不确定如何实现。

下面的一些更多细节：我正在使用 Xubuntu Precise，我遇到了以下难题：

*   Xubuntu Precise 发布`libpoppler v0.18.4`[1] 并且所有 Precise 应用程序（Evince、Inkscape 等）都是针对此版本的库构建的。
*   我想构建和安装 ViewPDF [2]，它需要`libpoppler >= v0.20`.
*   由于上述原因，我`libpoppler v0.20.4`从 Ubuntu Quantal [3] 向后移植。

以下是我系统上当前可用的库：

```
liv@liv-laptop:~$ locate libpoppler. | grep -i /usr/lib/
/usr/lib/x86_64-linux-gnu/libpoppler.a
/usr/lib/x86_64-linux-gnu/libpoppler.so
/usr/lib/x86_64-linux-gnu/libpoppler.so.19
/usr/lib/x86_64-linux-gnu/libpoppler.so.19.0.0
/usr/lib/x86_64-linux-gnu/libpoppler.so.28
/usr/lib/x86_64-linux-gnu/libpoppler.so.28.0.0

liv@liv-laptop:~$ ls -lh /usr/lib/x86_64-linux-gnu/libpoppler.*
-rw-r--r-- 1 root root 3.8M Sep 24 17:15 /usr/lib/x86_64-linux-gnu/libpoppler.a
lrwxrwxrwx 1 root root   20 Sep 24 17:14 /usr/lib/x86_64-linux-gnu/libpoppler.so -> libpoppler.so.28.0.0
lrwxrwxrwx 1 root root   20 Sep  4 12:35 /usr/lib/x86_64-linux-gnu/libpoppler.so.19 -> libpoppler.so.19.0.0
-rw-r--r-- 1 root root 2.0M Mar  1  2012 /usr/lib/x86_64-linux-gnu/libpoppler.so.19.0.0
lrwxrwxrwx 1 root root   20 Sep 24 17:14 /usr/lib/x86_64-linux-gnu/libpoppler.so.28 -> libpoppler.so.28.0.0
-rw-r--r-- 1 root root 2.4M Sep 24 17:15 /usr/lib/x86_64-linux-gnu/libpoppler.so.28.0.0 
```

现在构建和运行 ViewPDF 工作正常。然而，最大的问题是最初构建的一些应用程序（xpdf、inkscape）`0.18.4`被破坏了。

所以这是我的问题：如何配置我的系统，以便所有应用程序默认使用旧版本的 poppler 库（`libpoppler.so.19.0.0`）；并且只有专门针对较新版本 ( `libpoppler.so.28.0.0`) 构建的应用程序才能使用最新版本？也许我应该使用 ldd 或 ldconfig 但我不确定如何实现。

1.  [http://packages.ubuntu.com/precise/libpoppler19](http://packages.ubuntu.com/precise/libpoppler19)
2.  [http://www.qtrac.eu/viewpdf.html](http://www.qtrac.eu/viewpdf.html)
3.  [http://packages.ubuntu.com/quantal/libpoppler28](http://packages.ubuntu.com/quantal/libpoppler28)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:02:08.733

`/usr/local`根据默认前缀，将您从源代码构建的所有内容安装到`configure`.

**更新：**如果您打算进一步分发此软件包，则需要采用不同的方法。我会创建一个名为 say 的目录`/usr/lib/future`并在那里放置一个高级版本`libpoppler.so`。应用程序将链接到它，使用`-rpath=/usr/lib/future`和可能`-rpath-link=/usr/lib/future`。

# .net - .NET 应用程序来编辑 SQLite 数据库/文件

> ID：12914244
> 
> 赞同：0
> 
> 时间：2012-10-16T12:01:32.363
> 
> 标签：.net, sqlite, driver

我正在.NET 中设计一个应用程序，这将使我能够单击一个按钮，然后会自动编辑一个 SQLite 文件/数据库（使用基本查询）。为了做到这一点，我是否需要在我的应用程序中实现 SQLite 驱动程序，这将允许它读取数据库文件？任何帮助表示赞赏，我是一个完整的新手。

到目前为止，我已经研究了使用 ADO.NET 和 dbExpress 的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:06:31.803

您所要做的就是从[该站点](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)
下载 SQLite ADO.Net 提供程序 然后您可以使用 SQLite 的适当类遵循 ADO.NET 的一般准则

有关更具体的问题，请参阅同一站点上的常见问题解答页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:07:31.740

您不需要自己实现驱动程序，已经有大量用于 .NET 的 SQLite 驱动程序。

其中几个

*   [SQLite ADO.NET 提供程序](http://sqlite.phxsoftware.com/)
*   [Praeclarum 的 sqlite-net](https://github.com/praeclarum/sqlite-net)
*   [System.Data.SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

# google-maps - three.js - 谷歌地图样式放大/缩小和围绕管几何的特定轴旋转

> ID：12914246
> 
> 赞同：1
> 
> 时间：2012-10-16T12:01:54.747
> 
> 标签：google-maps, three.js

在一个场景中，`THREE.js`我们可以使用不同的控件，例如`THREE.TrackballControls`, `THREE.RollControls`。我创建了一个 3d 管场景，它由 200 个坐标组成，这些坐标作为 JSON 数据从外部文件加载。如果我使用`THREE.TrackballControls`，我可以旋转/旋转管几何形状，但不能遍历整个管，如果我使用`THREE.RollControls`，我可以遍历整个管，但不能正确旋转/旋转。`THREE.RollControls`Apple iPad 不支持。

我正在为 Apple iPad 开发这个。

有没有办法实现谷歌地图类型的放大/缩小和围绕管几何的特定轴功能旋转？任何提示或建议？

# entity-framework - MigrateDatabaseToLatestVersion 和 dbo.__MigrationHistory

> ID：12914247
> 
> 赞同：4
> 
> 时间：2012-10-16T12:01:55.437
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我正在尝试部署使用 EF5 codefist 和迁移构建的 MVC4 应用程序。

我希望应用程序在将来部署具有新迁移的新版本应用程序时更新数据库，因此在 Global.asax 中我这样做：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<GoDealMvc4Context, Configuration>());
using (var ctx = new GoDealMvc4Context()) {
    ctx.Database.Initialize(false);
} 
```

服务器上的初始数据库是通过附加从我的开发机器复制的 MDF 文件来部署的。此数据库包含 __MigrationsHistory 系统表。所以这个数据库应该不需要执行任何迁移，因为它是最新的最新迁移。

当我尝试在服务器上启动应用程序时，我收到此错误：

```
There is already an object named 'UserProfile' in the database.

[SqlException (0x80131904): There is already an object named 'UserProfile' in the database.]
System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +388
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +688
System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +4403
System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout) +2755286
System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite) +527
System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +290
System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement) +247
System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements) +202
System.Data.Entity.Migrations.DbMigrator.ApplyMigration(DbMigration migration, DbMigration lastMigration) +472
System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) +175
System.Data.Entity.MigrateDatabaseToLatestVersion`2.InitializeDatabase(TContext context) +150
System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) +66
System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() +225
System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) +208
System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) +235
GoDeal.Mvc4.MvcApplication.Application_Start() +342 
```

因此，即使数据库中存在具有以下内容的 __MigrationHistory 表，应用程序显然认为它需要应用迁移：

```
MigrationId                 Model         ProductVersion
201210161046508_initial     0x1F8...      5.0.0.net45 
```

该应用程序包含一个迁移类：

```
201210161046508_initial.cs:

public partial class initial : DbMigration
{
    public override void Up()
    {
        CreateTable(
            "dbo.UserProfile",
            .... 
```

所以我的问题是：1）当 __MigrationsHistory 表的内容如所述时，为什么我的应用程序认为需要应用此迁移。

2）这是推荐的制作应用程序的方法，该应用程序在新版本上重新启动时自动应用新迁移。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T14:13:47.007

对于任何寻找答案的人来说，这里还有另一个 NASTY gotcha。检查内容

```
[dbo].[__MigrationHistory]   table    column ContextKey 
```

此表讲述了 DB 是如何创建的（迁移模式、创建模式等）。以及使用什么迁移配置程序。我因更改 MigrationsConfiguration 类名称而受到伤害。

更改表中的条目有效:-) 或重命名您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:55:19.430

1) 由于您的迁移被称为“initial”而不是“InitialCreate”，这意味着您手动创建了它，并且当您启用代码首次迁移时，数据库还不存在。或者至少上下文没有指向它。[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

我相信 MigrateDatabaseToLatestVersion 将首先尝试为启用迁移之前存在的实体创建实体表。由于您的数据库中不存在 InitialCreate 迁移，因此第一步将与已经存在的表发生冲突。对不起，这有点含糊，但我不完全理解。为了解决这个问题，我将通过删除它们（首先保存任何自定义更改）来删除迁移，然后使用指向现有数据库的上下文再次启用它们。您现在应该有一个“InitialCreate”迁移。您现在应该能够复制数据库并在生产环境中使用 MigrateDatabaseToLatestVersion。

2）我个人让代码首先更新生产数据库让我很担心。我一直在使用 update-database -script -sourcemigration xx 来生成脚本来迁移数据库。这样你就可以在破坏任何东西之前看到会发生什么。它还允许您在事务中运行并在失败后回滚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T06:47:33.357

就我而言，此问题是由于缺少迁移引起的。我对模型进行了一些更改，但我忘了创建新的迁移文件。

我的解决方案是在包管理器控制台中运行：Add-Migration MyMigrationName

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T16:25:41.680

以防其他人在使用自动迁移时更改模型后遇到`SqlException`该消息。`There is already an object named '<TABLE_NAME>' in the database.`在某些情况下，迁移的配置似乎需要明确命名上下文键：

```
internal sealed class Configuration : DbMigrationsConfiguration<MyDatabaseContext>
{
    public Configuration ()
    {
        AutomaticMigrationsEnabled = true;
        ContextKey = "MyNamespace.MyDatabaseContext"; // this line was missed
    }

    protected override void Seed(MyDatabaseContext context)
    {
    }
} 
```

将上面的行添加到 Configuration 的构造函数后，迁移运行没有任何问题。您可以检查数据库`ContextKey`中已使用的值`__MigrationHistory`。

# android - Android 可扩展列表视图更新

> ID：12914254
> 
> 赞同：1
> 
> 时间：2012-10-16T12:02:18.090
> 
> 标签：android, expandablelistview, android-notifications

我正在实现一个聊天应用程序，在那里我提供了一项服务来监听所有存在的变化。在更改状态时，我想更新数据，但无法更新可展开列表视图中显示的数据。请给我建议一种方法来做同样的事情。

```
 public class UserMenuActivity extends ExpandableListActivity {

        private XMPPConnection connection;
        String name,availability,subscriptionStatus;
        TextView tv_Status;

        /** Variable Define here */
        private String[] data = { "View my profile", "New Multiperson Chat",
                "New Broad Cast Message", "New Contact Category", "New Group",
                "Invite to CCM", "Search", "Expand All", "Settings", "Help",
        "Close" };
        private String[] data_Contact = { "Rename Category","Move Contact to Category", "View my profile",
                "New Multiperson Chat", "New Broad Cast Message",
                "New Contact Category", "New Group", "Invite to CCM", "Search",
                "Expand All", "Settings", "Help", "Close" };
        private String[] data_child_contact = { "Open chat", "Delete Contact","View my profile",
                "New Multiperson Chat", "New Broad Cast Message",
                "New Contact Category", "New Group", "Invite to CCM", "Search",
                "Expand All", "Settings", "Help", "Close" };
        private String[] menuItem = { "Chats", "Contacts", "CGM Groups", "Pending","Request" };
        private List<String> menuItemList = Arrays.asList(menuItem);

        private int commonGroupPosition = 0;
        private String etAlertVal;
        private DatabaseHelper dbHelper;
        private int categoryID, listPos;
        /** New Code here.. */
        private ArrayList<String> groupNames;
        private ArrayList<ArrayList<ChildItems>> childs;
        private UserMenuAdapter adapter;
        private Object object;

        private String[] data2 = { "PIN Michelle", "IP Call" };
        private ListView mlist2;
        private ImageButton mimBtnMenu;
        private LinearLayout mllpopmenu;
        private View popupView;
        private PopupWindow popupWindow;
        private AlertDialog.Builder alert;
        private EditText input;
        private TextView mtvUserName, mtvUserTagLine;
        private ExpandableListView mExpandableListView;
        public static List<CategoryDataClass> categoryList;
        private boolean menuType = false;
        private String childValContact="";
        public static Context context;

        @Override
        public void onBackPressed() {
            if (mllpopmenu.getVisibility() == View.VISIBLE) {
                mllpopmenu.setVisibility(View.INVISIBLE);
            } else {
                if (CCMStaticVariable.CommonConnection.isConnected()) {
                    CCMStaticVariable.CommonConnection.disconnect();
                }
                super.onBackPressed();
            }
        }

        @SuppressWarnings("unchecked")
        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_MENU) {
                if (mllpopmenu.getVisibility() == View.VISIBLE) {
                    mllpopmenu.setVisibility(View.INVISIBLE);
                } else {
                    if (commonGroupPosition >= 4 && menuType == true) {
                        if(childValContact == ""){
                            mllpopmenu.setVisibility(View.VISIBLE);

                            mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                                    R.layout.listviewtext, R.id.tvMenuText,
                                    data_Contact));

                        }else{
                            mllpopmenu.setVisibility(View.VISIBLE);
                            mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                                    R.layout.listviewtext, R.id.tvMenuText,
                                    data_child_contact));

                        }

                    } else if (commonGroupPosition == 0) {
                        mllpopmenu.setVisibility(View.VISIBLE);
                        mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                                R.layout.listviewtext, R.id.tvMenuText, data));
                    }
                }
                return true;
            }
            return super.onKeyDown(keyCode, event);
        }

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.usermenulayout);
            dbHelper = new DatabaseHelper(UserMenuActivity.this);

            //this.context = context.getApplicationContext();

            XMPPConn.getContactList();

            connection = CCMStaticVariable.CommonConnection;

            Presence userPresence = new Presence(Presence.Type.available);
            userPresence.setPriority(24);
            userPresence.setMode(Presence.Mode.away);
            connection.sendPacket(userPresence);        

        }

        @Override
        protected void onResume() {
            super.onResume();       
            Presence userPresence = new Presence(Presence.Type.available);
            userPresence.setPriority(24);
            userPresence.setMode(Presence.Mode.away);
            connection.sendPacket(userPresence);
            XMPPConn.getContactList();
            setExpandableListView();
        }

        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {

            if (groupPosition == 1 && childPosition == 0) {
                startActivity(new Intent(UserMenuActivity.this,
                        InvitetoCCMActivity.class));
            } else if (groupPosition == 1 && childPosition != 0) {
                Intent intent = new Intent(UserMenuActivity.this,
                        UserChatActivity.class);
                intent.putExtra("userNameVal",
                        XMPPConn.mfriendList.get(childPosition - 1).friendName);
                startActivity(intent);
            } else if (groupPosition == 2 && childPosition == 0) {
                startActivity(new Intent(UserMenuActivity.this,
                        CreateGroupActivity.class));
            } else if (groupPosition == 2 && childPosition != 0) {
                String GROUP_NAME = childs.get(groupPosition).get(childPosition)
                .getName().toString();
                int end = GROUP_NAME.indexOf("(");
                CCMStaticVariable.groupName = GROUP_NAME.substring(0, end).trim();
                startActivity(new Intent(UserMenuActivity.this,
                        GroupsActivity.class));
            } else if (groupPosition >= 4) {
                childValContact = childs.get(groupPosition).get(childPosition).getName().trim();
                showToast("user==>"+childValContact, 0);
            }
            return false;
        }

        private void setExpandableListView() {
            /***###############GROUP ARRAY ############################*/
            final ArrayList<String> groupNames = new ArrayList<String>();
            groupNames.add("Chats (2)");
            groupNames.add("Contacts (" + XMPPConn.mfriendList.size() + ")");
            groupNames.add("CGM Groups (" + XMPPConn.mGroupList.size() + ")");
            groupNames.add("Pending (1)");

            XMPPConn.getGroup();
            categoryList = dbHelper.getAllCategory();
            /**Group From Sever*/
            if (XMPPConn.mGroupList.size() > 0) {
                for (int g = 0; g < XMPPConn.mGroupList.size(); g++) {
                    XMPPConn.getGroupContact(XMPPConn.mGroupList.get(g).groupName);
                    groupNames.add(XMPPConn.mGroupList.get(g).groupName + "("
                            + XMPPConn.mGroupContactList.size()+ ")");
                }
            } 
            if(categoryList.size() > 0){
                for (int cat = 0; cat < categoryList.size(); cat++) {
                    groupNames.add(categoryList.get(cat).getCategoryName()+ "(0)");
                }
            }
            this.groupNames = groupNames;

            /*** ###########CHILD ARRAY * #################*/
            ArrayList<ArrayList<ChildItems>> childs = new ArrayList<ArrayList<ChildItems>>();

            ArrayList<ChildItems> child = new ArrayList<ChildItems>();
            child.add(new ChildItems("Alisha", "Hi",0));
            child.add(new ChildItems("Michelle", "Good Morning",0));

            childs.add(child);

            child = new ArrayList<ChildItems>();
            child.add(new ChildItems("", "",0));
            if (XMPPConn.mfriendList.size() > 0) {
                for (int n = 0; n < XMPPConn.mfriendList.size(); n++) {
                    child.add(new ChildItems(XMPPConn.mfriendList.get(n).friendNickName,
                            XMPPConn.mfriendList.get(n).friendStatus, 
                            XMPPConn.mfriendList.get(n).friendState));
                }
            }
            childs.add(child);
            /************** CGM Group Child here *********************/
            child = new ArrayList<ChildItems>();
            child.add(new ChildItems("", "",0));

            if (XMPPConn.mGroupList.size() > 0) {
                for (int grop = 0; grop < XMPPConn.mGroupList.size(); grop++) {
                    child.add(new ChildItems(
                            XMPPConn.mGroupList.get(grop).groupName + " ("
                            + XMPPConn.mGroupList.get(grop).groupUserCount
                            + ")", "",0));
                }
            }
            childs.add(child);

            child = new ArrayList<ChildItems>();
            child.add(new ChildItems("Shuchi",
                    "Pending (Waiting for Authorization)",0));
            childs.add(child);
            /************************ Group Contact List *************************/
            if (XMPPConn.mGroupList.size() > 0) {
                for (int g = 0; g < XMPPConn.mGroupList.size(); g++) {
                    /** Contact List */
                    XMPPConn.getGroupContact(XMPPConn.mGroupList.get(g).groupName);
                    child = new ArrayList<ChildItems>();
                    for (int con = 0; con < XMPPConn.mGroupContactList.size(); con++) {
                        child.add(new ChildItems(
                                XMPPConn.mGroupContactList.get(con).friendName,
                                XMPPConn.mGroupContactList.get(con).friendStatus,0));
                    }
                    childs.add(child);
                }
            } 
            if(categoryList.size() > 0){
                for (int cat = 0; cat < categoryList.size(); cat++) {
                    child = new ArrayList<ChildItems>();
                    child.add(new ChildItems("-none-", "",0));
                    childs.add(child);
                }
            }
            this.childs = childs;

            /** Set Adapter here */
            adapter = new UserMenuAdapter(this, groupNames, childs);
            setListAdapter(adapter);
            object = this;

            mlist2 = (ListView) findViewById(R.id.list2);
            mimBtnMenu = (ImageButton) findViewById(R.id.imBtnMenu);
            mllpopmenu = (LinearLayout) findViewById(R.id.llpopmenu);
            mtvUserName = (TextView) findViewById(R.id.tvUserName);
            mtvUserTagLine = (TextView) findViewById(R.id.tvUserTagLine);

            //Set User name..
            System.out.println("CCMStaticVariable.loginUserName==="
                    + CCMStaticVariable.loginUserName);
            if (!CCMStaticVariable.loginUserName.equalsIgnoreCase("")) {
                mtvUserName.setText("" + CCMStaticVariable.loginUserName);
            }
            /** Expandable List set here.. */
            mExpandableListView = (ExpandableListView) this
            .findViewById(android.R.id.list);
            mExpandableListView.setOnGroupClickListener(new OnGroupClickListener() {
                @Override
                public boolean onGroupClick(ExpandableListView parent, View v,
                        int groupPosition, long id) {

                    XMPPConn.getContactList();

                    if (parent.isGroupExpanded(groupPosition)) {
                        commonGroupPosition = 0;
                    }else{
                        commonGroupPosition = groupPosition;
                    }
                    String GROUP_NAME = groupNames.get(groupPosition);
                    int end = groupNames.get(groupPosition).indexOf("(");
                    String GROUP_NAME_VALUE = GROUP_NAME.substring(0, end).trim();
                    if (menuItemList.contains(GROUP_NAME_VALUE)) {
                        menuType = false;
                        CCMStaticVariable.groupCatName = GROUP_NAME_VALUE;
                    } else {
                        menuType = true;
                        CCMStaticVariable.groupCatName = GROUP_NAME_VALUE;
                    }
                    long findCatId = dbHelper.getCategoryID(GROUP_NAME_VALUE);
                    if (findCatId != 0) {
                        categoryID = (int) findCatId;
                    }
                    childValContact="";
                    showToast("Clicked on==" + GROUP_NAME_VALUE, 0);
                    return false;
                }
            });

            /** Click on item */
            mlist2.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1, int pos,long arg3) {
                    if (commonGroupPosition >= 4) {
                        if(childValContact == ""){
                            if (pos == 0) {
                                showAlertEdit(CCMStaticVariable.groupCatName);
                            }                   
                            /** Move contact to catgory */
                            if (pos == 1) {
                                startActivity(new Intent(UserMenuActivity.this,AddContactCategoryActivity.class));
                            }
                        }else{
                            if(pos == 0){
                                Intent intent = new Intent(UserMenuActivity.this,UserChatActivity.class);
                                intent.putExtra("userNameVal",childValContact);
                                startActivity(intent);
                            }
                            if(pos == 1){
                                XMPPConn.removeEntry(childValContact);
                                showToast("Contact deleted sucessfully", 0);
                                Intent intent = new Intent(UserMenuActivity.this,UserMenuActivity.class);
                            }
                        }

                    } else {
                        /** MyProfile */
                        if (pos == 0) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    MyProfileActivity.class));
                        }
                        /** New multiperson chat start */
                        if (pos == 1) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    NewMultipersonChatActivity.class));
                        }
                        /** New Broadcast message */
                        if (pos == 2) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    NewBroadcastMessageActivity.class));
                        }
                        /** Click on add category */
                        if (pos == 3) {
                            showAlertAdd();
                        }
                        if (pos == 4) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    CreateGroupActivity.class));
                        }

                        if (pos == 5) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    InvitetoCCMActivity.class));
                        }
                        if (pos == 6) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    SearchActivity.class));
                        }
                        if (pos == 7) {
                            onGroupExpand(2);
                            for (int i = 0; i < groupNames.size(); i++) {
                                mExpandableListView.expandGroup(i);
                            }
                        }
                        /** Click on settings */
                        if (pos == 8) {
                            startActivity(new Intent(UserMenuActivity.this,
                                    SettingsActivity.class));
                        }
                        if (pos == 10) {
                            System.exit(0);
                        }

                        if (pos == 14) {
                            if (mllpopmenu.getVisibility() == View.VISIBLE) {
                                mllpopmenu.setVisibility(View.INVISIBLE);
                                if (popupWindow.isShowing()) {
                                    popupWindow.dismiss();
                                }
                            } else {
                                mllpopmenu.setVisibility(View.VISIBLE);
                                mlist2.setAdapter(new ArrayAdapter(
                                        UserMenuActivity.this,
                                        R.layout.listviewtext, R.id.tvMenuText,
                                        data));
                            }
                        }
                    }
                }
            });
        }

        /** Toast message display here.. */
        private void showToast(String msg, int time) {
            Toast.makeText(this, msg, time).show();
        }

BroadcastReceiver UpdateList = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            Toast.makeText(UserMenuActivity.this, "CALLED", Toast.LENGTH_SHORT).show();
            adapter.notifyDataSetChanged();

        }
    };

        public String showSubscriptionStatus(String friend){
            return friend;

        }

    } 
```

服务类

```
 public class UpdaterService extends Service {
        private XMPPConnection connection;
        String Friend;
        String user = "";

        @Override
        public IBinder onBind(Intent arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void onCreate() {
            // Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
            super.onCreate();
        }   

        @Override
        public void onDestroy() {
            // TODO Auto-generated method stub
            super.onDestroy();
        }

        @Override
        public void onStart(Intent intent, int startId) {
            // TODO Auto-generated method stub
            showToast("My Service Started", 0);
            connection = getConnection();
            if (connection.isConnected()) {
                final Roster roster = connection.getRoster();
                RosterListener r1 = new RosterListener() {

                    @Override
                    public void presenceChanged(Presence presence) {
                        // TODO Auto-generated method stub
                        XMPPConn.getContactList();

                    }

                    @Override
                    public void entriesUpdated(Collection<String> arg0) {
                        // TODO Auto-generated method stub
                        //notification("entriesUpdated");
                    }

                    @Override
                    public void entriesDeleted(Collection<String> arg0) {
                        // TODO Auto-generated method stub
                        //notification("entriesDeleted");
                    }

                    @Override
                    public void entriesAdded(Collection<String> arg0) {
                        // TODO Auto-generated method stub
                        Iterator<String> it = arg0.iterator();
                        if (it.hasNext()) {
                            user = it.next();
                        }
                        RosterEntry entry = roster.getEntry(user);
                        if(entry.getType().toString().equalsIgnoreCase("to")){
                            int index_of_Alpha = Friend.indexOf("@");
                            String subID = Friend.substring(0, index_of_Alpha);

                            notification("Hi "+subID+" wants to add you");
                        }               
                    }
                };

                if (roster != null) {
                    roster.setSubscriptionMode(Roster.SubscriptionMode.manual);
                    System.out.println("subscription going on");
                    roster.addRosterListener(r1);
                }

            } else {
                showToast("Connection lost-", 0);
            }
        }

        protected void showToast(String msg, int time) {
            Toast.makeText(this, msg, time).show();
        }

        private XMPPConnection getConnection() {
            return CCMStaticVariable.CommonConnection;
        }

        /** Notification manager */
        private void notification(CharSequence message) {

            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
            int icon = R.drawable.ic_launcher;
            CharSequence tickerText = message;
            long when = System.currentTimeMillis();
            Notification notification = new Notification(icon, tickerText, when);
            Context context = getApplicationContext();

            CharSequence contentTitle = "CCM";
            CharSequence contentText = message;
            Intent notificationIntent = new Intent(this, ManageNotification.class);
            notificationIntent.putExtra("Subscriber_ID",user );

            PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                    notificationIntent, 0);
            notification.setLatestEventInfo(context, contentTitle, contentText,
                    contentIntent);
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            final int HELLO_ID = 1;
            mNotificationManager.notify(HELLO_ID, notification);

        }

} 
```

这是我的适配器类

```
public class UserMenuAdapter extends BaseExpandableListAdapter {

    private ArrayList<String> groups;
    private ArrayList<ArrayList<ChildItems>> childs;
    private Context context;
    public LayoutInflater inflater;

    ImageView img_availabiliy;

    private static final int[] EMPTY_STATE_SET = {};
    private static final int[] GROUP_EXPANDED_STATE_SET =
            {android.R.attr.state_expanded};
    private static final int[][] GROUP_STATE_SETS = {
         EMPTY_STATE_SET, // 0
         GROUP_EXPANDED_STATE_SET // 1
    };

    public UserMenuAdapter(Context context, ArrayList<String> groups,
            ArrayList<ArrayList<ChildItems>> childs) {
        this.context = context;
        this.groups = groups;
        this.childs = childs;
        inflater = LayoutInflater.from(context);
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return childs.get(groupPosition).get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return (long) (groupPosition * 1024 + childPosition);
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        View v = null;
        if (convertView != null)
            v = convertView;
        else
            v = inflater.inflate(R.layout.child_layout, parent, false);
        ChildItems ci = (ChildItems) getChild(groupPosition, childPosition);
        TextView tv = (TextView) v.findViewById(R.id.tvChild);
        tv.setText(ci.getName());
        TextView tv2 = (TextView) v.findViewById(R.id.tvChild2);
        tv2.setText(ci.getDailyStatus());
        img_availabiliy = (ImageView)v.findViewById(R.id.img_childlayout_AVAILABILITY);
        ImageView friendPics = (ImageView)v.findViewById(R.id.ivFriendPics);

        if(ci.getStatusState() == 1){
            img_availabiliy.setImageResource(R.drawable.online);
        }
        else if(ci.getStatusState()==0){
            img_availabiliy.setImageResource(R.drawable.offline);           
        }           
        else if (ci.getStatusState()==2) {
            img_availabiliy.setImageResource(R.drawable.away);
        }       
        else if(ci.getStatusState()==3){
            img_availabiliy.setImageResource(R.drawable.busy);
        }
        else{
            img_availabiliy.setImageDrawable(null);
        }       
        if((groupPosition == 1 && childPosition == 0)){
            friendPics.setImageResource(R.drawable.inviteto_ccm);
            img_availabiliy.setVisibility(View.INVISIBLE);
        }
        else if(groupPosition == 2 && childPosition == 0){
            friendPics.setImageResource(R.drawable.new_ccmgroup);
            img_availabiliy.setVisibility(View.VISIBLE);            
        }else{
            if(ci.getPicture()!= null){
                Bitmap bitmap = BitmapFactory.decodeByteArray(ci.getPicture(), 0, ci.getPicture().length);
                bitmap = Bitmap.createScaledBitmap(bitmap, 50, 50, true);
                friendPics.setImageBitmap(bitmap);
            }else{
                friendPics.setImageResource(R.drawable.avatar);
            }

            img_availabiliy.setVisibility(View.VISIBLE);
        }
        return v;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return childs.get(groupPosition).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return groups.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return (long) (groupPosition * 1024); 
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        View v = null;
        if (convertView != null)
            v = convertView;
        else
            v = inflater.inflate(R.layout.group_layout, parent, false);
        String gt = (String) getGroup(groupPosition);
        TextView tv2 = (TextView) v.findViewById(R.id.tvGroup);
        if (gt != null)
            tv2.setText(gt);
        /**Set Image on group layout, Max/min*/
        View ind = v.findViewById( R.id.explist_indicator);
        View groupInd = v.findViewById( R.id.llgroup);
        if( ind != null ) {
            ImageView indicator = (ImageView)ind;           
            if( getChildrenCount( groupPosition ) == 0 ) {
                indicator.setVisibility( View.INVISIBLE );
            } else {
                indicator.setVisibility( View.VISIBLE );
                int stateSetIndex = ( isExpanded ? 1 : 0) ;
                Drawable drawable = indicator.getDrawable();
                drawable.setState(GROUP_STATE_SETS[stateSetIndex]);
            }
        }
        if( groupInd != null ) {
            RelativeLayout indicator2 = (RelativeLayout)groupInd;
            if( getChildrenCount( groupPosition ) == 0 ) {
                indicator2.setVisibility( View.INVISIBLE );             
            } else {
                indicator2.setVisibility( View.VISIBLE );
                int stateSetIndex = ( isExpanded ? 1 : 0) ;
                Drawable drawable2 = indicator2.getBackground();                
                drawable2.setState(GROUP_STATE_SETS[stateSetIndex]);
            }
        }
        return v;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public void onGroupCollapsed(int groupPosition) {
    }

    public void onGroupExpanded(int groupPosition) {
    }

} 
```

我只想在 Service 类的 ON PRESENCE CHANGED 方法中更新我的列表。请建议我做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:49:46.070

Try to use

> listView.notifyDataSetChanged()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:58:18.393

你能做的是，

您可以使用[BroadCastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)、 Interface 或[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)

对于 ResultReceiver，您可以查看我的 github 上的演示[`here`](https://github.com/lalit3686/ResultReceiverDemo)。

创建一个`BroadCastReceiver`并将其注册到您的`Activity`. 然后从你的`presenceChanged()`方法中`Service`你可以触发它`BroadCastReceiver`并`ExpandableListView`在你的活动中更新你已经实现了`BroadCastReceiver`using`expandlistView.notifyDataSetChanged()`

在活动中，

```
public static final String ACTION_UPDATE = "ACTION_UPDATE";

BroadcastReceiver UpdateListsReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            adapter.notifyDataSetChanged();
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ......
        registerReceiver(finishActivitiesReceiver, 
                                            new IntentFilter(ACTION_UPDATE));
    } 
```

在您的服务中，

```
 @Override
     public void presenceChanged(Presence presence) {
           XMPPConn.getContactList();
           sendBroadcast(new Intent(Activity_Name.ACTION_UPDATE));
     } 
```

另外，不要忘记取消注册您的 BroadCastReciever`onDestroy()`或`onPause()`使用

```
unregisterReceiver(UpdateListsReceiver); 
```

# html - 矩形而不是 Chrome 中的空格

> ID：12914256
> 
> 赞同：1
> 
> 时间：2012-10-16T12:02:20.173
> 
> 标签：html, css, google-chrome, typeface

我正在开发的一个网站正在使用一种自定义嵌入字体，Windows 上的新版 Chrome 似乎不喜欢这种字体。出现了奇怪的白色矩形，而不是空白。删除自定义字体可以解决问题，但这几乎不是一个可接受的解决方案。

截屏：![Chrome 弄乱了空格](../Images/1c3bc74a04ae5ed66a2d29dca15dc970.png)

有谁知道 Chrome 如何解释空格以便我可以修复字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:49:05.530

原来字体没有定义 Unicode 空白字符（0020）。除 Chrome 外，所有其他浏览器都将缺少的字符替换为空格。通过编辑字体和添加字符来修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T15:12:03.373

将 CSS 属性更改为`letter-spacing`默认值 ( `normal`) 可能会产生这种行为。

# javascript - 没有 iframe 生成的 Twitter 小部件代码

> ID：12914259
> 
> 赞同：0
> 
> 时间：2012-10-16T12:02:27.467
> 
> 标签：javascript, twitter

如何在没有 iframe 的情况下生成 twitter 小部件代码，以便我可以从我的应用程序 css 覆盖我的 twitter 小部件的 css 属性。现在我的 twitter 小部件有一个 iframe，因此我无法覆盖它的 css 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:22:01.797

您对此无能为力。出于安全原因，它位于 iframe 中，因此您不能弄乱它并在用户不知情的情况下单击它。

# linux - 用于将 Winapi 和 MFC 代码转换为等效 linux 版本的包装器

> ID：12914260
> 
> 赞同：1
> 
> 时间：2012-10-16T12:02:28.677
> 
> 标签：linux, mfc, wxwidgets

我正在开发一个包装器，将具有 MFC 和 windows API 调用的 c++ 代码编译到它们的 linux 版本中。

c++代码具有以下特点：

*   不存在 GUI 组件。
*   最多有大约 10 个 MFC 类，主要用于字符串解析。
*   它使用了许多特定于 Windows 的常量，例如 HINSTANCE、LPCTSTR 等。

我不允许在 linux 中使用 wine 进行编译。直到现在我遇到了 wxwidgets，它看起来相当庞大，我怀疑我是否需要它的所有组件。

请分享您在创建包装器时的想法，是否有任何特定代码已经可用，可以执行此任务或此任务的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:48:56.417

没有自动甚至半自动的方式将 MFC 应用程序转换为 wxWidgets。当然，完全有可能做到这一点，许多项目都经历了这种转变，但你只需要这样做。

有关一些起点，请参阅[wxWiki 的 MFC 页面。](http://wiki.wxwidgets.org/WxWidgets_For_MFC_Programmers)

# c# - DataTable 对结果进行分组

> ID：12914261
> 
> 赞同：1
> 
> 时间：2012-10-16T12:02:43.207
> 
> 标签：c#, linq, datatable, linq-group

我想按名称、姓氏对数据表进行分组，其余的应该在同一行。有人可以帮我吗？

我的数据表：

```
 Name   LastName    1    3    2
 kiki    ha         FF
 lola    mi             AA
 ka      xe                   UU
 kiki    ha                   SS 
```

我想按名称对 DataTable 进行分组：

```
Name   LastName   1    3     2
kiki    ha        FF         SS 
lola    mi             AA 
ka      xe                   UU 
```

我的新代码：

```
var result11 = from t1 in newtable.AsEnumerable()
               group t1 by new { Name = t1.Field<String>("Name"), LastName = t1.Field<String>("LastName") } into grp
               select new
               {
                   Name = grp.Key.Name,
                   LastName = grp.Key.LastName,

                   //Something must be there     
               }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:10:57.663

添加这些行而不是注释 ( `//something must be there`)：

```
C1 = String.Join(",", grp.Select(r=>r.Field<String>("1"))),
C2 = String.Join(",", grp.Select(r=>r.Field<String>("2"))),
C3 = String.Join(",", grp.Select(r=>r.Field<String>("3"))) 
```

在输出中获取三个新列，这些列汇总了列`1`和`3`的值`2`。

如果您在一个组的一列中有多个值，则所有值都将显示并用逗号 ( `,`) 分隔。

如果您确定每组每列最多有一个值，那么您可以简单地执行以下操作：

```
C1 = grp.Max(r => r.Field<String>("1")),
C3 = grp.Max(r => r.Field<String>("3")),
C2 = grp.Max(r => r.Field<String>("2")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:31:29.753

如果你想要一个`DataTable`结果，这会给出你想要的结果：

```
var lastNameGroups = from row in table1.AsEnumerable()
                     group row by new {
                        Name= row.Field<String>("Name"), 
                        LastName = row.Field<String>("LastName")
                     } into LastNameGroups
                     select LastNameGroups;

var table2 = table1.Clone();
foreach (var lng in lastNameGroups)
{
    var row = table2.Rows.Add();
    row.SetField("Name", lng.Key.Name);
    row.SetField("LastName", lng.Key.LastName);
    var ones = lng.Where(r => !string.IsNullOrEmpty(r.Field<String>("1")));
    if(ones.Any())
        row.SetField("1", ones.First().Field<String>("1"));
    var twos = lng.Where(r => !string.IsNullOrEmpty(r.Field<String>("2")));
    if (twos.Any())
        row.SetField("2", twos.First().Field<String>("2"));
    var threes = lng.Where(r => !string.IsNullOrEmpty(r.Field<String>("3")));
    if (threes.Any())
        row.SetField("3", threes.First().Field<String>("3"));
} 
```

# android - 滑动抽屉安卓

> ID：12914263
> 
> 赞同：2
> 
> 时间：2012-10-16T12:02:44.103
> 
> 标签：android, android-layout, slidingdrawer

我使用 android:rotation="180" 使滑动抽屉水平显示在屏幕左侧。它工作正常。但是，由于旋转，内容在其中出现颠倒。我也尝试旋转内容布局，但只有在滑动抽屉完全打开后才会旋转。请检查我随附的代码。

MainActivity.java

```
public class MainActivity extends Activity {

ArrayAdapter<String> myAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView LV = (ListView) findViewById(R.id.listView1);

    String [] List =  {"item 1","item 2","item 3","item 4"};
    myAdapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.textView1, List);
    LV.setAdapter(myAdapter);

    } 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" >

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:content="@+id/listView1"
    android:handle="@+id/handle"
    android:orientation="horizontal"
    android:rotation="180" >

<Button
    android:id="@+id/handle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Handle" />

 <ListView
     android:id="@+id/listView1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:rotation="180"
     tools:listitem="@layout/list_item" >
  </ListView>

</SlidingDrawer> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:padding="10dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T00:14:40.837

I've implemented a complete replacement for the SlidingDrawer component and it works from any side/direction. see [http://www.github.com/kedzie/DraggableDrawers](http://www.github.com/kedzie/DraggableDrawers) for details.

Now available from Maven Central ( [maven-android-plugin](http://code.google.com/p/maven-android-plugin) ):

```
<dependency>
  <groupid>com.github.kedzie.draggabledrawers</groupId>
  <artifactId>library</artifactId>
  <version>1.0.0</version>
  <type>apklib</type>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:09:26.807

Please take a look at [THIS](http://blog.sptechnolab.com/2011/02/10/android/android-sliding-drawer/) tutorial. You don't need to rotate the drawer...

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T12:13:11.490

尝试使用`android:gravity="left"`而不是旋转

# c# - 是否可以查询实际存储在 Varchar 字段中的 Twitter 时间戳？

> ID：12914267
> 
> 赞同：0
> 
> 时间：2012-10-16T12:02:59.713
> 
> 标签：c#, mysql, twitter

我从 twitter 流 api 中提取了推文，并将所有时间戳（推文）存储在 MySQL varchar 字段中。现在，我想提取过去一小时内的所有推文。是否可以查询数据库并相应地获取结果？

我提取了大约 500,000 多条推文，但我不确定是否能够更改字段的类型并仍然保护所有值。

我保存在 varchar 字段中的时间格式：`'Wed Oct 10 16:29:56 +0000 2012'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:13:58.973

您可以在选择行时使用 STR_TO_DATE 函数将日期列转换为可以比较的内容。但是，如果您要长期保留这些数据，则应该将列的类型转换为日期时间，这需要将数据移动到另一个表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:16:47.317

您可以尝试[str_to_date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)作为您的选择标准。

不过，您应该将该字段转换为 DATETIME。即使 str_to_date 有效，性能也会令人恐惧。:)

# mysql - MySQL case-when-then（或其他方式）检查多行的值

> ID：12914269
> 
> 赞同：1
> 
> 时间：2012-10-16T12:03:05.230
> 
> 标签：mysql, sql, switch-statement

在比较具有相同 sid 但不同 cid-data 值的多条记录后，我请求一些有关 MySQL when-then 语句的帮助，以从表中获取所有 sid：

```
flag    sid cid data
----    --- --- ----
1       300 1   john
1       300 2   john_email
1       300 3   77500
1       300 4   ok

1       301 1   jack
1       301 2   john_email
1       301 3   72210
1       301 4   notok 
```

这里对于每个 sid，我需要检查 if (sid=2 has data=john_email) AND (sid=4 has data=ok) 只有当两个条件都满足时，我才返回 sid。即输出将仅为“300”。

我很困惑如何使用 case-when-then 并将 'data' 与 'john_email' 进行比较，并根据 cid 值将数据与 'ok' 进行比较。谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:05:05.403

尝试

```
select sid
from your_table
group by sid
where (cid=2 and data='john_email')
or (cid=4 and data='ok')
having sum(cid=2)=1 and sum(data='john_email')=1
and sum(cid=4)=1 and sum(data='ok')=1 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/2c6a2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:08:57.853

您可以做的是使用子查询并检查该值是否存在。

```
SELECT
    *
FROM
    table outertable
WHERE
    ( cid=2 AND data='john_email' )
    AND
    EXISTS ( SELECT sid FROM table WHERE cid = 4 AND data = 'ok' AND sid = outertable.sid ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:04:58.823

您应该将表连接到自身，然后您可以检查两行中的条件，就好像它是一行一样......

```
SELECT T1.sid
FROM MYTABLE T1
JOIN MYTABLE T2 ON T1.SID=T2.SID AND T1.CID=1 AND T2.CID=4
WHERE T1.DATA='john'
AND T2.DATA='ok' 
```

请注意，我在 join 子句中使用了 CID 值，但如果要在不同的数据行上连接，则必须调整它们...

# c# - 在 C# 中查找 Win7 网络“其他设备”

> ID：12914279
> 
> 赞同：3
> 
> 时间：2012-10-16T12:03:59.790
> 
> 标签：c#, networking, windows-7-x64

> **可能重复：**
> [IP 摄像机，如何在网络上检测到它？](https://stackoverflow.com/questions/9165536/ip-camera-how-to-detect-it-on-the-network)

我有一个连接到我的网络的 IP 摄像机，它显示为 Win7 Explorer 网络中的其他设备。

我正在尝试从 C# 中找到相机及其 IP。

我已经尝试了几个 WMI 查询，但都没有运气。我可以列出所有连接到 LAN 的 PC，但不能列出任何其他设备。

我很感激任何帮助。谢谢你。

# c - 有没有办法在 C 中获得支持的波特率？

> ID：12914282
> 
> 赞同：2
> 
> 时间：2012-10-16T12:04:13.337
> 
> 标签：c, linux, serial-port, baud-rate

我有一个应用程序在 PC 和带有运行 uCLinux 的微控制器的板之间进行通信。当我通过 PC 发送消息时，`/dev/TTYS0`我会在 PC 端收到消息，但消息却是乱码。我很确定我有某种波特率不匹配。

在 PC 端，我使用提供的波特率：

```
Serial<id=0x1efb320, open=True>(port='COM4', baudrate=9600, bytesize=8, parity='
N', stopbits=1, timeout=None, xonxoff=False, rtscts=False, dsrdtr=False) 
```

在 Linux 板方面，我在代码中设置了相同的波特率：

```
tcgetattr(fd, &options);
cfsetispeed(&options, 9600);
cfsetospeed(&options, 9600);
tcsetattr(fd, TCSANOW, &options);
tcgetattr(fd, &options); 
```

当我测试 PC (Win 7)->Linux Box (OpenSuse) 时，这对我有用，所以我知道这个理论是合理的。现在我已经将它移植到我的真正目标（运行 uCLinux 的冷火微控制器板）上，我得到了垃圾。

所以我的第一个选择是以各种波特率“猜测和检查”，看看我是否能找到一个可行的方法，但我不想以编程方式找到一种方法来识别特定目标支持的波特率。

我确定有一些 API，但我还没有找到。想法？

**编辑：** 似乎可以使用[COMMPROP 结构在 Windows 上获得](http://msdn.microsoft.com/en-us/library/aa363189(v=vs.85).aspx)*最大*波特率。Linux上是否存在这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:57:42.667

请阅读[`cfsetospeed()`](http://www.kernel.org/doc/man-pages/online/pages/man3/cfsetospeed.3.html)手册页。`speed`参数必须是常数：, `B50`, `B75`.., `B9600`, `B19200`, `B38400`, `B57600`, `B115200`, 或`B230400`，而不仅仅是数字的速率。

要确定是否支持特定速率，只需设置它`cfset?speed()`+ `tcsetattr()`，然后读回设置（使用`tcgetattr()`+ `cfget?speed()`），并检查速度是否设置为所需值。我相信，驱动程序应该拒绝无效的波特率。

# python - Python匹配字符串中的数字

> ID：12914284
> 
> 赞同：0
> 
> 时间：2012-10-16T12:04:15.383
> 
> 标签：python

我需要检查一个字符串是否匹配`ORA-16252: unable to extend segment by <any value> in tablespace`。这里`<any value>`可以是任何数字。如何匹配python中的字符串？有正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:08:23.443

```
regex = re.compile(r'ORA-16252: unable to extend segment by \d+ in tablespace')
if regex.match(s):
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:07:59.040

`\\d+`用于匹配一个或多个数字是连续性的。因此，您可以将其添加到您的位置`<any value>`以匹配任何数字。

其余的字符串，因为它不像你说的那样变化，所以保持原样。

```
m = re.search(r'ORA-16252: unable to extend segment by \d+ in tablespace', 
               yourString)

if m is not None:
    # set your value 
```

# asp.net - WCF 测试客户端显示 1 个端点，而配置文件公开 3 个端点

> ID：12914285
> 
> 赞同：3
> 
> 时间：2012-10-16T12:04:17.300
> 
> 标签：asp.net, .net, wcf

我有一个暴露 3 个端点的 WCF Web 服务。但是当我将它调试到 WCF 测试客户端时，它只显示一个 basicHttpBinding 端点。

1：**为什么会这样？**

2：这里我有一个操作合同“CallADSWebMethod”，它返回一个DataContract（VINDescription）..只是想知道..**为什么这对我来说非常有用，但它仍然不能被测试客户端测试**..我的意思是测试客户端说“测试客户端不支持此操作”

3：在endpointBehaviors中-我只给了，没有...但是它仍然可以通过jquery ajax调用工作。**那么“enableWebScript”的意义是什么？**

![测试客户端图像](../Images/a52f67817305fa9584c1e1ed6a123a74.png)

配置信息

```
<system.serviceModel>
    <services>
      <service behaviorConfiguration="asmx" name="ADSChromeVINDecoder.Service">
        <endpoint address="basic"
                  binding="basicHttpBinding"
                  name="httpEndPoint"
                  contract="ADSChromeVINDecoder.IService"/>
        <endpoint address="json"
                  binding="webHttpBinding"
                  behaviorConfiguration="webBehavior"
                  name="webEndPoint"
                  contract="ADSChromeVINDecoder.IService"/>
        <endpoint contract="IMetadataExchange"
                  binding="mexHttpBinding"
                  address="mex" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="asmx">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:06:43.487

WCF 测试客户端将只显示**SOAP**端点 - 并且只有其中一个（带有 的那个`basicHttpBinding`）。

*   `json`端点使用`webHttpBinding`（基于**REST** - 无法由 WCF 测试客户端测试）

*   `mex`端点是元数据交换端点——不是*真正的*服务端点。

因此，WCF 测试客户端正确地只显示了一个（SOAP）端点——**只有**一个！

**更新：** WCF 测试客户端相当有限，其中一个限制是它不能将您自己的自定义数据类型作为参数处理。您基本上只能测试具有 type `int`、`string`等参数的方法`datetime`- 简单的数据类型。

如果您需要更高级的 Web 服务测试，您应该查看（免费提供的）[SoapUI 工具](http://www.soapui.org/)来测试您的 SOAP Web 服务 - 包括复杂的参数类型等等。

# sql-server-2008 - 更新或插入

> ID：12914287
> 
> 赞同：0
> 
> 时间：2012-10-16T12:04:20.817
> 
> 标签：sql-server-2008

我正在尝试根据帐号是否已在现有数据中来更新或插入数据。首先，我使用这个将新变量添加到表中已有帐户编号的变量中

```
drop table #test1
select a.*, B.Delq_Sep12, b.Bal_Sep12, b.Queue_Sep12
into #test1
from  pcd1 a
left join #pcd_sep12  b on  (a.ACCOUNT_NUMBER = B.account_number) 
```

然后我将#pcd_sep12中帐号不在test1（上面创建）中的所有记录添加到test1中

```
INSERT #test1
SELECT * FROM #pcd_sep12 WHERE account_number NOT IN(SELECT account_number FROM #test1) 
```

我收到错误列名或提供的值的数量与表定义不匹配。

我意识到这是因为字段数量不同，但有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:12:35.353

为什么不使用[MERGE](http://technet.microsoft.com/en-us/library/bb510625.aspx)（又名“upsert”）语句？

```
MERGE INTO pcd1 M
USING (SELECT * FROM #pcd_sep12) src ON M.account_number = src.account_number
WHEN MATCHED
-- UPDATE stuff
WHEN NOT MATCHED BY TARGET
-- INSERT stuff; 
```

这样你就不需要临时表或任何测试：这些在负载下不会是并发安全的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:09:35.183

if i am not mistaken, your #test1 table has columns from pcd1 table also. but in your second query, you are only selecting from #pcd_sep12.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:07:18.670

您必须像这样指定列

```
INSERT INTO #test1 (column1, column2, column3)
(SELECT column1, column2, column3 FROM #pcd_sep12 WHERE account_number NOT IN(SELECT account_number FROM #test1)) 
```

# jquery - 单击获取列表 p 内容并显示在 div 中

> ID：12914292
> 
> 赞同：0
> 
> 时间：2012-10-16T12:04:26.613
> 
> 标签：jquery, html

jQuery有一点麻烦，请帮忙。

我需要在单击 class="caption 时获取 p class="area-desc 的内容并将其显示在 class="step-area.

html:

```
<ul id="main-areas" class="group">
                <li>
                    <div class="build-area">
                        <span class="caption bg">Planning</span>
                    </div>
                    <p class="area-desc">1Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur a accumsan dolor. Curabitur rutrum augue nec eros blandit egestas. Aliquam lobortis posuere facilisis. Integer rutrum ullamcorper erat ac tempor. Nulla nec sapien nibh, non consequat dui.</p>
                </li>
                <li>
                    <div class="build-area">
                        <span class="caption bg">Arcitecture</span>
                    </div>
                    <p class="area-desc">2Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur a accumsan dolor. Curabitur rutrum augue nec eros blandit egestas. Aliquam lobortis posuere facilisis. Integer rutrum ullamcorper erat ac tempor. Nulla nec sapien nibh, non consequat dui.</p>
                </li>
                <li>
                    <div class="build-area">
                        <span class="caption bg">Interior Design</span>
                    </div>
                    <p class="area-desc">3Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur a accumsan dolor. Curabitur rutrum augue nec eros blandit egestas. Aliquam lobortis posuere facilisis. Integer rutrum ullamcorper erat ac tempor. Nulla nec sapien nibh, non consequat dui.</p>
                </li>
                <li>
                    <div class="build-area">
                        <span class="caption bg">Construction</span>
                    </div>
                    <p class="area-desc">4Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur a accumsan dolor. Curabitur rutrum augue nec eros blandit egestas. Aliquam lobortis posuere facilisis. Integer rutrum ullamcorper erat ac tempor. Nulla nec sapien nibh, non consequat dui.</p>
                </li>
            </ul>
            <div class="step-area bg">

            </div> 
```

jQuery：

```
$('span.caption').click(function() {
        var step = $('p.area-desc').html();
        $('.step-area').html("<p>" + step + "</p>");
    }); 
```

目前，该代码所做的只是获取第一个 p 标签的内容并将其显示在所需的 div 中。

我需要的是一种在每次点击时在 .step-area 中显示每个描述的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:06:37.373

```
$('span.caption').click(function() {
    var step = $(this).parent().next().html();
    $('.step-area').html("<p>" + step + "</p>");
}); 
```

要在页面加载时显示第一个描述：

```
$(document).ready(function() {
    $('.step-area').html("<p>" + $('.area-desc:first').html() + "</p>");
}); 
```

* * *

更新：**无脚本**

**文档**：[https ://developer.mozilla.org/en-US/docs/HTML/Element/noscript](https://developer.mozilla.org/en-US/docs/HTML/Element/noscript)

**例子：**

```
<noscript>
  <style>
    /* override your styles here */
  </style>
</noscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:06:34.427

```
var step = $(this).closest('p.area-desc').html(); 
```

# windows - 在 Window 7 中使用 NSIS 设置环境变量

> ID：12914294
> 
> 赞同：0
> 
> 时间：2012-10-16T12:04:31.163
> 
> 标签：windows, installation, nsis

我想使用 NSIS 安装程序设置环境变量。如果很重要，我将在 Windows 7 上运行脚本。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:22:32.480

[如何创建或更改环境变量](http://nsis.sourceforge.net/How_can_I_create_or_change_an_environment_variable)

注意：更改`%path%`这种方式是不安全的，如果条目长于 NSIS 字符串长度，可能会损坏条目！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T22:48:26.893

您可以创建一个 Windows 批处理文件，像其他文件一样将其与安装程序打包，在安装时将其解压缩到插件目录并执行它：

```
File "/oname=$PluginsDir\appendvar.bat" "PathToScriptDir\appendvar.bat"

nsExec::ExecToLog '"$SYSDIR\cmd.exe" /C "$PluginsDir\appendvar.bat" -g -all'
Pop $R0 ; last error

Delete "$PluginsDir\appendvar.bat" 
```

appendvar.bat 脚本（全局和本地附加的某种通用实现）：

```
@echo off

rem Drop last error level
cd .

rem Create local variable's stack
setlocal

set "?~nx0=%~nx0"

rem script flags
rem set variable in global registry for a current user
set __FLAG_SET_GLOBAL_REGISTRY=0
rem Set variable in global registry for all users.
rem Has no meaning if global flag has not used.
set __FLAG_SET_GLOBAL_REGISTRY_ALL_USERS=0
rem If setting global variable, then do include changes for a local cmd.exe process environment (by default, it is excluded)
rem Has no meaning if global flag has not used.
set __FLAG_SET_LOCAL=0
rem Force append even if exist.
set __FLAG_FORCE=0

:FLAGS_LOOP

rem flags always at first
set "__FLAG=%~1"

if not "%__FLAG%" == "" ^
if not "%__FLAG:~0,1%" == "-" set "__FLAG="

if not "%__FLAG%" == "" (
  if "%__FLAG%" == "-g" (
    set __FLAG_SET_GLOBAL_REGISTRY=1
    shift
  ) else if "%__FLAG%" == "-all" (
    if %__FLAG_SET_GLOBAL_REGISTRY% NEQ 0 set __FLAG_SET_GLOBAL_REGISTRY_ALL_USERS=1
    shift
  ) else if "%__FLAG%" == "-l" (
    set __FLAG_SET_LOCAL=1
    shift
  ) else if "%__FLAG%" == "-f" (
    set __FLAG_FORCE=1
    shift
  ) else (
    echo.%?~nx0%: error: invalid flag: %__FLAG%
    exit /b -255
  ) >&2

  rem read until no flags
  goto FLAGS_LOOP
)

if "%~1" == "" (
  echo.%?~nx0%: error: variable name is not set.
  exit /b 1
)

set "__SEPARATOR="
if not "%~3" == "" set "__SEPARATOR=%~3"
if "%__SEPARATOR%" == "" set "__SEPARATOR=;"
set "__SEPARATOR=%__SEPARATOR:~0,1%"

set "__NEW_VALUE=%~2"

rem remove trailing separator character
if not "%__NEW_VALUE%" == "" (
  if "%__SEPARATOR%" == "%__NEW_VALUE:~-1%" (
    set "__NEW_VALUE=%__NEW_VALUE:~0,-1%"
  )
)

rem remove trailing "\" character
if not "%__NEW_VALUE%" == "" (
  if "\" == "%__NEW_VALUE:~-1%" (
    set "__NEW_VALUE=%__NEW_VALUE:~0,-1%"
  )
)

if "%__NEW_VALUE%" == "" (
  if "%~2" == "" exit /b 0
  rem the variable value is a separator character only
  exit /b 2
)

rem set local at least
if %__FLAG_SET_GLOBAL_REGISTRY%%__FLAG_SET_LOCAL% EQU 0 set __FLAG_SET_LOCAL=1
if %__FLAG_SET_GLOBAL_REGISTRY% EQU 0 goto SET_GLOBAL_END

rem global setup
set "__VAR_VALUE="

if %__FLAG_SET_GLOBAL_REGISTRY_ALL_USERS% NEQ 0 (
  set __FLAG_SET_GLOBAL_REGISTRY_WMIC_WHERE_EXP=where "Name='Path' and UserName='<SYSTEM>'"
) else (
  set __FLAG_SET_GLOBAL_REGISTRY_WMIC_WHERE_EXP=where "Name='Path' and UserName!='<SYSTEM>'"
)

for /F "usebackq eol= tokens=1,* delims==" %%i in (`wmic environment %__FLAG_SET_GLOBAL_REGISTRY_WMIC_WHERE_EXP% get VariableValue /VALUE 2^>NUL`) do if "%%i" == "VariableValue" set "__VAR_VALUE=%%j"

if not "%__VAR_VALUE%" == "" (
  if "%__SEPARATOR%" == "%__VAR_VALUE:~-1%" (
    set "__VAR_VALUE=%__VAR_VALUE:~0,-1%"
  )
)

rem check on existance
if %__FLAG_FORCE% NEQ 0 goto SET_GLOBAL_IMPL
if "%__VAR_VALUE%" == "" goto SET_GLOBAL_IMPL

set "__VAR_VALUE_TMP=%__SEPARATOR%%__VAR_VALUE%%__SEPARATOR%"

call set "__VAR_VALUE_TMP_EXCLUDED=%%__VAR_VALUE_TMP:%__SEPARATOR%%__NEW_VALUE%%__SEPARATOR%=%%"

if /i not "%__VAR_VALUE_TMP_EXCLUDED%" == "%__VAR_VALUE_TMP%" goto SET_GLOBAL_END

:SET_GLOBAL_IMPL
if not "%__VAR_VALUE%" == "" (
  wmic environment %__FLAG_SET_GLOBAL_REGISTRY_WMIC_WHERE_EXP% set VariableValue="%__VAR_VALUE%%__SEPARATOR%%__NEW_VALUE%"
) else (
  wmic environment %__FLAG_SET_GLOBAL_REGISTRY_WMIC_WHERE_EXP% set VariableValue="%__NEW_VALUE%"
)

:SET_GLOBAL_END
if %__FLAG_SET_LOCAL% EQU 0 exit /b

rem local setup
call set "__VAR_VALUE=%%%~1%%"

if not "%__VAR_VALUE%" == "" (
  if "%__SEPARATOR%" == "%__VAR_VALUE:~-1%" (
    set "__VAR_VALUE=%__VAR_VALUE:~0,-1%"
  )
)

rem check on existance
if %__FLAG_FORCE% NEQ 0 goto SET_LOCAL_IMPL
if "%__VAR_VALUE%" == "" goto SET_LOCAL_IMPL

set "__VAR_VALUE_TMP=%__SEPARATOR%%__VAR_VALUE%%__SEPARATOR%"

call set "__VAR_VALUE_TMP_EXCLUDED=%%__VAR_VALUE_TMP:%__SEPARATOR%%__NEW_VALUE%%__SEPARATOR%=%%"

if /i not "%__VAR_VALUE_TMP_EXCLUDED%" == "%__VAR_VALUE_TMP%" goto SET_LOCAL_END

:SET_LOCAL_IMPL
if not "%__VAR_VALUE%" == "" (
  endlocal
  set "%~1=%__VAR_VALUE%%__SEPARATOR%%__NEW_VALUE%"
) else (
  endlocal
  set "%~1=%__NEW_VALUE%"
)

:SET_LOCAL_END

exit /b 0 
```

你可以更换

```
%__VAR_VALUE%%__SEPARATOR%%__NEW_VALUE% 
```

到

```
%__NEW_VALUE%%__SEPARATOR%%__VAR_VALUE% 
```

如果想添加一个变量值。

**注意：**脚本存在问题：

*   值与忽略大小写进行比较
*   可以更新超过 1024 个字符（已测试）的变量，但我认为不超过 4096 个字符（未测试）
*   如果使用 -g 和 -all 标志，则 cmd.exe 进程必须在管理员权限下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T16:39:25.757

**更新**：函数的最新版本在`RegAddPathToVar`这里：[https](https://sf.net/p/nsisplus) ://sf.net/p/nsisplus （完整测试示例：[https ://sf.net/p/nsisplus/NsisSetupLib/HEAD/tree/trunk/tests/test_RegAddRemovePathGUI /main.nsi](https://sf.net/p/nsisplus/NsisSetupLib/HEAD/tree/trunk/tests/test_RegAddRemovePathGUI/main.nsi) )

这是 NSIS 3.0 的完整且直接的实现示例。

由 3 个文件组成。

**build.bat** - 构建脚本文件。

```
@echo off

set "MAKENSIS_EXE=makensis.exe"

"%MAKENSIS_EXE%" /V4 "/Obuild.log" "/XOutFile '%~dp0test.exe'" "%~dp0main.nsi"

echo.Return code: %ERRORLEVEL%

pause 
```

*将MAKENSIS_EXE*变量编辑到系统上的 makensis 可执行文件。

**stack.nsi** - 辅助函数文件。

```
!define PushStack11 "!insertmacro PushStack11"
!macro PushStack11 var0 var1 var2 var3 var4 var5 var6 var7 var8 var9 var10
Push `${var0}`
Push `${var1}`
Push `${var2}`
Push `${var3}`
Push `${var4}`
Push `${var5}`
Push `${var6}`
Push `${var7}`
Push `${var8}`
Push `${var9}`
Push `${var10}`
!macroend

!define ExchStack4 "!insertmacro ExchStack4"
!macro ExchStack4 var0 var1 var2 var3
Exch `${var3}`
Exch 1
Exch `${var2}`
Exch 1
Exch 2
Exch `${var1}`
Exch 2
Exch 3
Exch `${var0}`
Exch 3
!macroend

!define PopStack15 "!insertmacro PopStack15"
!macro PopStack15 var0 var1 var2 var3 var4 var5 var6 var7 var8 var9 var10 var11 var12 var13 var14
Pop `${var14}`
Pop `${var13}`
Pop `${var12}`
Pop `${var11}`
Pop `${var10}`
Pop `${var9}`
Pop `${var8}`
Pop `${var7}`
Pop `${var6}`
Pop `${var5}`
Pop `${var4}`
Pop `${var3}`
Pop `${var2}`
Pop `${var1}`
Pop `${var0}`
!macroend 
```

**main.nsi** - 完整的 NSIS 实现示例。

```
!include "nsDialogs.nsh"
!include "WinCore.nsh"
!include "LogicLib.nsh"
!include "stack.nsi"

RequestExecutionLevel admin ; for all users

Page Custom Show Leave

Var /GLOBAL DialogID
Var /GLOBAL EditID
Var /GLOBAL Edit
Var /GLOBAL ButtonAppendID

!define GotoIf "!insertmacro GotoIf"
!macro GotoIf label exp
${If} ${exp}
  Goto `${label}`
${EndIf}
!macroend

!define RegGetKeyMap "!insertmacro RegGetKeyMap"
!macro RegGetKeyMap var value
  ${Switch} ${value}
    ${Case} "HKCR"
      StrCpy ${var} ${HKEY_CLASSES_ROOT}
    ${Break}
    ${Case} "HKCU"
      StrCpy ${var} ${HKEY_CURRENT_USER}
    ${Break}
    ${Case} "HKLM"
      StrCpy ${var} ${HKEY_LOCAL_MACHINE}
    ${Break}
    ${Case} "HKU"
      StrCpy ${var} ${HKEY_USERS}
    ${Break}
    ${Case} "HKPD"
      StrCpy ${var} ${HKEY_PERFORMANCE_DATA}
    ${Break}
    ${Case} "HKDD"
      StrCpy ${var} ${HKEY_DYN_DATA}
    ${Break}
    ${Case} "HKCC"
      StrCpy ${var} ${HKEY_CURRENT_CONFIG}
    ${Break}
    ${Case} "HKEY_CLASSES_ROOT"
      StrCpy ${var} ${HKEY_CLASSES_ROOT}
    ${Break}
    ${Case} "HKEY_CURRENT_USER"
      StrCpy ${var} ${HKEY_CURRENT_USER}
    ${Break}
    ${Case} "HKEY_LOCAL_MACHINE"
      StrCpy ${var} ${HKEY_LOCAL_MACHINE}
    ${Break}
    ${Case} "HKEY_USERS"
      StrCpy ${var} ${HKEY_USERS}
    ${Break}
    ${Case} "HKEY_PERFORMANCE_DATA"
      StrCpy ${var} ${HKEY_PERFORMANCE_DATA}
    ${Break}
    ${Case} "HKEY_DYN_DATA"
      StrCpy ${var} ${HKEY_DYN_DATA}
    ${Break}
    ${Case} "HKEY_CURRENT_CONFIG"
      StrCpy ${var} ${HKEY_CURRENT_CONFIG}
    ${Break}
    ${Default}
      StrCpy ${var} ${HKEY_CURRENT_USER}
    ${Break}
  ${EndSwitch}
!macroend

; Usage:
; All users:
;   ${Push} "<path>"
;   ${Push} "HKLM"
;   ${Push} "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"
;   ${Push} "<env_var>"
;   Call RegAddPathToVar
; Current user only:
;   ${Push} "<path>"
;   ${Push} "HKCU"
;   ${Push} "Environment"
;   ${Push} "<env_var>"
;   Call RegAddPathToVar
!macro Func_RegAddPathToVar un
!ifndef ${un}RegAddPathToVar_INCLUDED
!define ${un}RegAddPathToVar_INCLUDED
Function ${un}RegAddPathToVar
  ${ExchStack4} $R0 $R1 $R2 $R3

  ${PushStack11} $R4 $R5 $R6 $R7 $R8 $R9 $0 $1 $2 $8 $9

  ; WARNING:
  ;   NSIS ReadRegStr returns empty string on string overflow, so native calls are used here:
  ;   1\. To check actual length of <env_var>.
  ;   2\. To process the PATH variable of any length long.

  ; The IDEAL algorithm for any length long PATH variable, where each subpath is not longer than ${NSIS_MAX_STRLEN}-${NSIS_CHAR_SIZE} bytes:
  ;   1\. Init current string list if does not have any before or take as current has created after the previous algorithm run.
  ;   2\. Read string of ${NSIS_MAX_STRLEN}-${NSIS_CHAR_SIZE} bytes length into the array of ${NSIS_MAX_STRLEN} bytes length from the input address, add NSIS_CHAR_SIZE nulls at the end.
  ;   3\. Go to 20 if empty or nothing else except the ; characters in the array.
  ;   4\. Truncate all in the array after the last ; character, where the ; character has found not under " character quoted string (see description in the 6).
  ;   5\. Split strings in the array by the ; character if it has found not under " character quoted string into the list.
  ;   6\. Move the last string from the list into the next repeat cycle list if it begins by the " character but not ends by the same character (not completely fitted into the limited to ${NSIS_MAX_STRLEN} bytes window).
  ;   7\. Unquote all strings in the list and create the second list with flags marked where the quotes has removed.
  ;   8\. Search for "$R0" or "$R0\" in the list, if found then raise a flag and leave the algorithm.
  ;   9\. Move ${NSIS_MAX_STRLEN} byte window by the array current string length long multiple to NSIS_CHAR_SIZE value along the input address.
  ;  10\. Repeat the algorithm.
  ;  20\. Append path to the list.
  ;  21\. Restore quotes for those strings in the first list what been quoted before by the second list.
  ;  22\. Join first list by the separator into one string.

  ; The REAL algorithm for any length long PATH variable, where each subpath is not longer than ${NSIS_MAX_STRLEN}-${NSIS_CHAR_SIZE} bytes:
  ;   1\. Read string from registry into dynamic buffer enough to store more characters: length of being searched string + length of separator + length of string to search + length of null character.
  ;   2\. Copy string from the buffer to the second dynamic buffer enough to store more characters: length of separator + length of being searched string + length of separator + length of null character.
  ;   3\. Prepend and append separator character to second buffer.
  ;   4\. Try to find multiple instances of the string to search in the second buffer through the shlwapi::StrStrI, where search instances are:
  ;      `<Separator><StringToSearch><Separator>'
  ;      `<Separator><StringToSearch>\<Separator>'
  ;   5\. If found any instance then leave the algorithm.
  ;   6\. Append separator character to the first buffer if it does not ending by it.
  ;   7\. Append the string to search to the first buffer.

  ; handles and pointers init
  StrCpy $R7 0
  StrCpy $R9 0
  StrCpy $0 0
  StrCpy $1 0
  StrCpy $2 0

  ; keys map
  ${RegGetKeyMap} $R8 $R1

  System::Call "advapi32::RegOpenKey(i R8, t R2, *i.R6) i.R4"
  ${If} $R4 <> 0
    DetailPrint "RegAddPathToVar: advapi32::RegOpenKey error: code=$R4 hive=$\"$R8$\" key=$\"$R2$\""
    MessageBox MB_OK "RegAddPathToVar: advapi32::RegOpenKey error: code=$R4 hive=$\"$R8$\" key=$\"$R2$\"" /SD IDOK
    Goto done
  ${EndIf}

  System::Call "advapi32::RegQueryValueEx(i R6, t R3, i 0, *i .r9, p 0, *i 0 R7) i.R4"
  ${If} $R4 <> 0
    DetailPrint "RegAddPathToVar: advapi32::RegQueryValueEx (1) is failed, unexpected error code: code=$R4 length=$\"$R7$\""
    MessageBox MB_OK "RegAddPathToVar: advapi32::RegQueryValueEx (1) is failed, unexpected error code: code=$R4 length=$\"$R7$\"" /SD IDOK
    Goto done
  ${EndIf}

  ; remove trailing "\" character from the string to search
  StrCpy $R5 $R0 "" -1
  ${If} $R5 == "\"
    StrCpy $R0 $R0 -1
  ${EndIf}

  StrLen $R8 $R0
  ; first buffer: length of being searched string + length of separator + length of string to search + length of null character
  IntOp $R5 $R8 + 1 ; ";"
  IntOp $R5 $R5 * ${NSIS_CHAR_SIZE}
  IntOp $R5 $R5 + $R7 ; already in bytes including null character

  ; allocate first dynamic buffer
  System::Alloc $R5
  Pop $0
  ${If} $0 = 0
    DetailPrint "RegAddPathToVar: System::Alloc (1) is failed: size=$R5"
    MessageBox MB_OK "RegAddPathToVar: System::Alloc (1) is failed: size=$R5" /SD IDOK
    Goto done
  ${EndIf}

  System::Call "advapi32::RegQueryValueEx(i R6, t R3, i 0, i 0, p r0, *i R5 R7) i.R4"
  ${If} $R4 <> 0
    DetailPrint "RegAddPathToVar: advapi32::RegQueryValueEx (2) is failed, unexpected error: code=$R4 length=$\"$R7$\""
    MessageBox MB_OK "RegAddPathToVar: advapi32::RegQueryValueEx (2) is failed, unexpected error: code=$R4 length=$\"$R7$\"" /SD IDOK
    Goto done
  ${EndIf}

  ; strip separator characters from the first buffer end
  ${If} $R7 > ${NSIS_CHAR_SIZE}
    ; excluding null character
    IntOp $R5 $R7 - ${NSIS_CHAR_SIZE}
    IntOp $R5 $R5 - ${NSIS_CHAR_SIZE}
    IntOp $R9 $0 + $R5
strip_loop1:
    System::Call "*$R9(&t1 .r8)"
    ${If} $8 == ";"
      System::Call "*$R9(&t1 '')" ; null character
      IntOp $R7 $R7 - ${NSIS_CHAR_SIZE}
      ${If} $R9 >= ${NSIS_CHAR_SIZE}
        IntOp $R9 $R9 - ${NSIS_CHAR_SIZE}
        Goto strip_loop1
      ${EndIf}
    ${EndIf}
  ${EndIf}

  ; second buffer: length of separator + length of being searched string + length of separator + length of null character
  IntOp $R5 2 * ${NSIS_CHAR_SIZE} ; 2 x ";"
  IntOp $R5 $R5 + $R7 ; already in bytes including null character

  ; allocate second dynamic buffer
  System::Alloc $R5
  Pop $1
  ${If} $1 = 0
    DetailPrint "RegAddPathToVar: System::Alloc (2) is failed: size=$R5"
    MessageBox MB_OK "RegAddPathToVar: System::Alloc (2) is failed: size=$R5" /SD IDOK
    Goto done
  ${EndIf}

  System::Call "*$1(&t1 ';')"

  IntOp $R9 $1 + ${NSIS_CHAR_SIZE}
  System::Call "kernel32::lstrcpyn(p R9, p r0, i R7) p.R4"
  ${If} $R4 = 0
    DetailPrint "RegAddPathToVar: kernel32::lstrcpyn (1) is failed"
    MessageBox MB_OK "RegAddPathToVar: kernel32::lstrcpyn (1) is failed" /SD IDOK
    Goto done
  ${EndIf}

  IntOp $R9 $R9 + $R7
  IntOp $R9 $R9 - ${NSIS_CHAR_SIZE} ; exclude last null character
  System::Call "*$R9(&t1 ';')"
  IntOp $R9 $R9 + ${NSIS_CHAR_SIZE}
  System::Call "*$R9(&t1 '')" ; null character

  ; buffer for the string to search
  IntOp $R5 0 + 4 ; 2 x ";" + "\" + length of null character
  IntOp $R5 $R5 + $R8 ; excluding null character
  IntOp $R5 $R5 * ${NSIS_CHAR_SIZE}

  System::Alloc $R5
  Pop $2
  ${If} $2 = 0
    DetailPrint "RegAddPathToVar: System::Alloc (3) is failed: size=$R5"
    MessageBox MB_OK "RegAddPathToVar: System::Alloc (3) is failed: size=$R5" /SD IDOK
    Goto done
  ${EndIf}

  ; convert R8 (length of R0) to bytes
  IntOp $R8 $R8 * ${NSIS_CHAR_SIZE}

  ; `<Separator><StringToSearch><Separator>'
  System::Call "*$2(&t1 ';')"

  IntOp $R9 $2 + ${NSIS_CHAR_SIZE}
  System::Call "kernel32::lstrcpy(p R9, t R0) p.R4"
  ${If} $R4 = 0
    DetailPrint "RegAddPathToVar: kernel32::lstrcpy (2) is failed"
    MessageBox MB_OK "RegAddPathToVar: kernel32::lstrcpy (2) is failed" /SD IDOK
    Goto done
  ${EndIf}

  IntOp $R9 $R9 + $R8 ; length does not include the last null character
  System::Call "*$R9(&t1 ';')"
  IntOp $R9 $R9 + ${NSIS_CHAR_SIZE}
  System::Call "*$R9(&t1 '')" ; null character

  System::Call "shlwapi::StrStrI(p r1, p r2) p.R4"
  ${GotoIf} done "$R4 <> 0"

  ; `<Separator><StringToSearch>\<Separator>'
  System::Call "*$2(&t1 ';')"

  IntOp $R9 $2 + ${NSIS_CHAR_SIZE}
  IntOp $R9 $R9 + $R8
  System::Call "*$R9(&t1 '\')"
  IntOp $R9 $R9 + ${NSIS_CHAR_SIZE}
  System::Call "*$R9(&t1 ';')"
  IntOp $R9 $R9 + ${NSIS_CHAR_SIZE}
  System::Call "*$R9(&t1 '')" ; null character

  System::Call "shlwapi::StrStrI(p r1, p r2) p.R4"
  ${GotoIf} done "$R4 <> 0"

  ; append to the first buffer
  IntOp $R9 0 + $0
  ${If} $R7 > ${NSIS_CHAR_SIZE}
    IntOp $R9 $R9 + $R7
    IntOp $R9 $R9 - ${NSIS_CHAR_SIZE} ; exclude last null character
    System::Call "*$R9(&t1 ';')"
    IntOp $R9 $R9 + ${NSIS_CHAR_SIZE}
  ${EndIf}

  System::Call "kernel32::lstrcpy(p R9, t R0) p.R4"
  ${If} $R4 = 0
    DetailPrint "RegAddPathToVar: kernel32::lstrcpy (3) is failed"
    MessageBox MB_OK "RegAddPathToVar: kernel32::lstrcpy (3) is failed" /SD IDOK
    Goto done
  ${EndIf}

  IntOp $R9 $R9 + $R8 ; length does not include the last null character
  System::Call "*$R9(&t1 '')" ; null character

  IntOp $R9 $R9 + ${NSIS_CHAR_SIZE}
  IntOp $R5 $R9 - $0

  System::Call "advapi32::RegSetValueEx(i R6, t R3, i 0, i r9, p r0, i R5) i.R4"
  ${If} $R4 <> 0
    DetailPrint "RegAddPathToVar: advapi32::RegSetValueEx (1) is failed"
    MessageBox MB_OK "RegAddPathToVar: advapi32::RegSetValueEx (1) is failed" /SD IDOK
    Goto done
  ${EndIf}

  ; broadcast global event
  SendMessage ${HWND_BROADCAST} ${WM_WININICHANGE} 0 "STR:Environment" /TIMEOUT=5000

done:
  System::Call "advapi32::RegCloseKey(i $R6)"

  ${If} $0 <> 0
    System::Free $0
  ${EndIf}
  ${If} $1 <> 0
    System::Free $1
  ${EndIf}
  ${If} $2 <> 0
    System::Free $2
  ${EndIf}

  ${PopStack15} $R0 $R1 $R2 $R3 $R4 $R5 $R6 $R7 $R8 $R9 $0 $1 $2 $8 $9
FunctionEnd
!endif
!macroend

!define Call_RegAddPathToVar "!insertmacro Call_RegAddPathToVar"
!macro Call_RegAddPathToVar prefix path hkey hkey_path env_var
Push `${path}`
Push `${hkey}`
Push `${hkey_path}`
Push `${env_var}`
Call ${prefix}RegAddPathToVar
!macroend

!define RegAddPathToVar "!insertmacro RegAddPathToVar"
!macro RegAddPathToVar
!insertmacro Func_RegAddPathToVar ""
!undef RegAddPathToVar
!define RegAddPathToVar "${Call_RegAddPathToVar} ''"
!macroend

!define un.RegAddPathToVar "!insertmacro un.RegAddPathToVar"
!macro un.RegAddPathToVar
!insertmacro Func_RegAddPathToVar "un."
!undef un.RegAddPathToVar
!define un.RegAddPathToVar "${Call_RegAddPathToVar} 'un.'"
!macroend

; include for install only
${RegAddPathToVar}

Function Show
  nsDialogs::Create 1018
  Pop $DialogID

  ${NSD_CreateText} 0 16u 80% 14u "C:\MyPath\bin"
  Pop $EditID

  ${NSD_OnChange} $EditID WndProc

  ${NSD_CreateButton} 80% 16u 20% 14u "Append"
  Pop $ButtonAppendID

  ${NSD_OnClick} $ButtonAppendID WndProc

  StrCpy $R0 -1
  Call Update

  nsDialogs::Show
FunctionEnd

Function Leave
FunctionEnd

Function WndProc
  System::Store SR0
  Call Update
  System::Store L
FunctionEnd

Function Update
  ; read values
  ${If} $R0 = $EditID
  ${OrIf} $R0 = -1
    ${NSD_GetText} $EditID $Edit
  ${EndIf}
  ${If} $R0 = $ButtonAppendID
    ${If} $Edit != ""
      #${RegAddPathToVar} "$Edit" HKCU "Environment" PATH ; for current user
      ${RegAddPathToVar} "$Edit" HKLM "SYSTEM\CurrentControlSet\Control\Session Manager\Environment" PATH ; for all users
    ${EndIf}
  ${EndIf}
FunctionEnd

Section -Hidden
SectionEnd 
```

# windows-phone-7 - Wp7 & ReactiveOauth

> ID：12914296
> 
> 赞同：1
> 
> 时间：2012-10-16T12:04:37.273
> 
> 标签：windows-phone-7, oauth

我在使用用于 wp7 的 ReactiveOauth 的 API 的结果填充列表时遇到问题。当我直接填充列表框时它可以工作。但我不知道如何将对象添加到列表中。这样做时，列表总是空的 .Subscribe(a => lista.Add(new Device ...

任何建议都非常感谢。

```
 var token = TelldusWrapper.Security.GetToken();
        var lista = new List<Device>();

        var client = new OAuthClient(ConsumerKey, ConsumerSecret, token)
        {
            Url = "http://api.telldus.com/xml/devices/list",
            Parameters = { { "supportedMethods", "TELLSTICK_TURNON" } }
        };
        client.GetResponseText().Select(s => XElement.Parse(s))
       .SelectMany(x => x.Descendants("device"))
       .Select(x => new
       {
           Text = x.Attribute("id").Value,
           Name = x.Attribute("name").Value
       })
       .ObserveOnDispatcher()
        .Subscribe(a => listbox.Items.Add(new Device { Id = a.Text, Name = a.Name }), ex => MessageBox.Show(ex.ToString())); 
        //.Subscribe(a => lista.Add(new Device { Id = a.Text, Name = a.Name }), ex => MessageBox.Show(ex.ToString())); 
```

# c# - 如何在 WCF 服务项目中引用的外部 dll 中调用方法

> ID：12914299
> 
> 赞同：0
> 
> 时间：2012-10-16T12:04:54.383
> 
> 标签：c#, asp.net, wcf

是否可以通过添加方法类的 dll 在我们的 WCF 服务中调用外部方法？

我有一个带有方法的现有 Web 应用程序项目`getcabfare(**)`，现在我正在尝试`getcabfare()`通过将现有应用程序的引用添加到我的 WCF 项目来创建一个新的 WCF 服务来访问该方法。

但我得到了错误

> *用户代码未处理 NullReferenceException - 对象引用未设置为对象的实例*

这是我现有的项目“BasicCabApplication”，它在业务逻辑层具有以下方法，运行良好

```
namespace BasicCabApplication
{
 public class BussinessLogic
 {  
    public int getcabfare(string location)
    {
  string conn = System.Configuration.ConfigurationManager.ConnectionStrings["MyConnString"].ConnectionString;
     SqlConnection con = new SqlConnection(conn);
     con.Open();
     SqlCommand cmd = new SqlCommand("Select fare from cablocations where area ='" + location +"'", con);
     int fare = Convert.ToInt16(cmd.ExecuteScalar());
     con.Close();
     return fare;
  }
} 
```

这是我的 wcf 项目，我在其中添加了上述项目的引用。**Service1.svc.cs**中的代码如下

```
using BasicCabApplication;
namespace mywcftest1
{
   public class Service1 : IService1
   {
        public int GetFare(string location)
        {
           BussinessLogic bl = new BussinessLogic();
            int fare = bl.getcabfare(location);
            return fare;
        }
    }
} 
```

我得到了对象 bl 但无法访问引发 nullreference 异常的方法 getcabfare()。

wcf项目（web服务）中不能访问另一个项目的方法吗？或我的代码中的任何错误....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:43:50.833

你的问题在这里：

```
string conn = System.Configuration.ConfigurationManager.ConnectionStrings["MyConnString"].ConnectionString; 
```

您的 wcf 项目在其配置文件中没有此配置，因此它会引发 nullreference 异常。您必须使用连接字符串将字符串添加到 wcf 服务的配置文件中，它将解决您的问题

# nhibernate - Fluent NHibernate 一对多禁用外键约束

> ID：12914300
> 
> 赞同：0
> 
> 时间：2012-10-16T12:04:56.603
> 
> 标签：nhibernate, fluent-nhibernate, foreign-key-relationship, has-many, automapping

我有这个问题，我有一个一对多的关系，我必须能够删除父实体而不删除它的子实体，也不能将它们的外键列设置为 NULL。但是每当我尝试删除父级时，我都会收到外键约束违规异常。

> NHibernate.Exceptions.GenericADOException：无法执行更新查询[SQL：从 [Customer] 删除] ---> System.Data.SqlClient.SqlException：DELETE 语句与 REFERENCE 约束“FK7867CB245055157F”冲突

我有类似的一对一关系，我必须能够在一端删除实体而另一端的外键设置为 NULL，我通过使用 NotFound.Ignore() 成功解决了这个问题. 我找到了几个答案，确切地表明了这个解决方案，但它似乎根本没有效果。我使用我的映射来构建数据库 BTW。

这是我的实体和映射：

```
public class User : Entity
{
    ...
    public virtual Customer Customer { get; set; }
    ...
}
public class Customer : Entity
{
    ...
    public virtual string CustomerNumber { get; set; }
    public virtual User User { get; set; }
    public virtual IList<Vehicle> Vehicles { get; set; }
    ...
}
public class Vehicle : Entity
{
    ...
    public virtual string SerialNumber { get; set; }
    public virtual Customer Customer { get; set; }
    ...
} 
```

我正在使用 AutoMapping 和覆盖：

```
public class UserMappingOverride : IAutoMappingOverride<User>
{
    public void Override(AutoMapping<User> mapping)
    {
        ...
        mapping.References(u => u.Customer).Column("CustomerNumber").NotFound.Ignore();
    }
}
public class CustomerMappingOverride : IAutoMappingOverride<Customer>
{
    public void Override(AutoMapping<Customer> mapping)
    {
        mapping.Id(u => u.Kundenummer).GeneratedBy.Assigned().Not.Nullable();
        mapping.HasOne(u => u.User).PropertyRef(c => c.Customer);
        mapping.HasMany(u => u.Vehicles).KeyColumns.Add("CustomerNumber")
            .Cascade.None()
            .Inverse();
    }
}
public class VehicleMappingOverride : IAutoMappingOverride<Vehicle>
{
    public void Override(AutoMapping<Vehicle> mapping)
    {
        mapping.Id(u => u.SerialNumber).GeneratedBy.Assigned().Not.Nullable();
        mapping.References(u => u.Customer).Column("CustomerNumber").NotFound.Ignore();
    }
} 
```

如前所述，在一对一的关系中，在用户的映射中，我使用 NotFound.Ignore()，它按承诺执行 - 允许我在不触发约束违反异常的情况下删除客户，并且仍然保留“CustomerNumber”的值" 在用户表中完好无损。User 和 Customer 实体之间关系的映射，在从映射构建数据库时，根本不会在数据库中产生外键约束。

但同样的事情不适用于我的一对多关系。尽管映射与我的一对一关系几乎相同，并且我使用 NotFound.Ignore() 在这里的类似问题中建议，但这种关系仍然会产生外键约束，并且在尝试删除时出现约束违规异常一个客户。唯一的解决方法是手动删除数据库中的 FK 或通过将 Enforce Foreign Key Constraint 设置为 False 来修改它。

在构建数据库时，如何让 NHibernate 不创建此外键约束或将 Enfore 外键约束设置为 False？

最好的问候 - 尼古拉

*顺便说一句：我对关于实体和关系的整体设计的评论不感兴趣。它们是基于数据源的约束而设计的，这是唯一可行的解​​决方法。:-) 我在类似的帖子中发现了很多答案，重点是设计评估者，然后是手头的问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:33:27.427

您无法解决数据库中的 FK。我的猜测是从用户到客户没有 FK。如果您从映射创建架构，那么您需要禁用 FK 的创建`mapping.References(u => u.Customer).ForeignKey("none");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:08:47.957

Firo 的回答为我指明了如何摆脱 FK 约束的正确方向。添加`.ForeignKey("none")`到车辆映射并没有做到这一点。但是在 Customer 映射中添加一个类似的属性解决了我的问题。

所以解决方案变成了：

```
mapping.HasMany(u => u.Vehicles).ForeignKeyConstraintName("none") 
```

# java - 使用指定数据更新 DOM 元素

> ID：12914304
> 
> 赞同：0
> 
> 时间：2012-10-16T12:05:10.867
> 
> 标签：java, xml, dom

我正在使用 DOM 创建元素，我的问题是如何创建如下路径

```
FieldType Abstract="false" Name="New Entity0" m:HasStream="false" 
```

我已经创建了标签，`<FieldType>`但我不知道如何继续使用`Abstract="false"`and `Name="New field"`等。

代码是：

```
 Element fld = document.createElement("FieldType"); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:10:40.690

Next, you would simply do:

```
fId.setAttribute("Abstract", "false");
fId.setAttribute("Name", "New Entity0"); 
```

See the [element javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Element.html) for more information.

Make sure you don't forget append the element to the document when you're done!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T12:11:29.880

例子

```
L_div = document.createElement("div");
L_div.id="div_emp_detl";
L_div.className="cls_div_header";
document.body.appendChild(L_div); 
```

对于您的情况

```
fld.name = "New Entity";
fld.Abstract="false" 
```

# performance - Amazon S3 中的对象数量（最有效的方式）

> ID：12914307
> 
> 赞同：1
> 
> 时间：2012-10-16T12:05:18.673
> 
> 标签：performance, amazon-s3

现在我正在从标准服务器迁移到 Amazon S3。在当前服务器中，我必须设置目录结构以保持效率。例如，当前目录结构为：category_id/article_id/year/month/day/article_image.jpg 等。

那么，我是否需要在 Amazon S3 的存储桶中创建这样的结构。它会影响请求的速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:11:52.267

这是来自[常见问题的报价](http://aws.amazon.com/s3/faqs/)

> 问：Amazon S3 数据是如何组织的？Amazon S3 是一个简单的基于密钥的对象存储。当您存储数据时，您分配了一个唯一的对象键，以后可以使用该键来检索数据。键可以是任何字符串，并且可以构造为模仿分层属性。

因此，实际上路径的长度和目录的结构都不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:14:44.610

这在很大程度上取决于您的需求。路径本身对于 S3 并不重要，但您可能更喜欢查找在特定类别、特定日期等使用的所有图像。所以我会从您的管理方面而不是从性能方面来处理这个问题。

也就是说，如果您有很多请求（例如每秒超过 50 个请求），您可能会想到另一种组织文件夹结构的方法。[这是 AWS 博客上的一篇文章](http://aws.typepad.com/aws/2012/03/amazon-s3-performance-tips-tricks-seattle-hiring-event.html)，其中提供了一些示例，以从 S3 中获得最佳性能。

# macos - 在 macbook 中安装 lein 的问题

> ID：12914312
> 
> 赞同：0
> 
> 时间：2012-10-16T12:05:32.597
> 
> 标签：macos, clojure, installation, leiningen

[我正在尝试按照https://github.com/technomancy/leiningen](https://github.com/technomancy/leiningen)上的教程在我的新 macbook（osx 10.8.2）中安装 lein

执行 lein 脚本时，我收到此错误：

/bin/lein：第 1 行：{rtf1ansiansicpg1252cocoartf1187cocoasubrtf340：找不到命令 /bin/lein：第 2 行：意外标记附近的语法错误`}' /bin/lein: line 2:`{\fonttbl\f0\fmodern\fcharset0 Courier;}'

我正在使用的脚本是这个 [https://raw.github.com/technomancy/leiningen/preview/bin/lein](https://raw.github.com/technomancy/leiningen/preview/bin/lein)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:09:19.523

来自`{rtf1 ...`一个 rtf 文档。我想您还没有使用 TextEdit 将脚本从网络复制/粘贴到文档中？该程序默认为 rtf，这可能会导致此问题。

您应该尝试在“体面”的文本编辑器中粘贴。试试你的 IDE、Vim 或 nano 或类似的东西。

# ruby - 尝试安装 Nokogiri 时出错

> ID：12914315
> 
> 赞同：0
> 
> 时间：2012-10-16T12:05:55.510
> 
> 标签：ruby, terminal, installation, nokogiri

我正在尝试安装 Nokogiri 以在 Ruby on Rails 应用程序中使用以读取 XML 文件。我一直在按照 Home Brew 0.9 页面上的说明进行操作。

当我尝试从源代码安装 libivcon 时，如下所示：

```
wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz
tar xvfz libiconv-1.13.1.tar.gz
cd libiconv-1.13.1
./configure --prefix=/usr/local/Cellar/libiconv/1.13.1
make
sudo make install 
```

我收到以下错误：

```
make: *** No rule to make target `install'.  Stop. 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:34:28.783

我相信这与您的 XCode 版本有关。您应该确保安装最新版本的 XCode，网址为[https://developer.apple.com/xcode/](https://developer.apple.com/xcode/)

这是一个相当大的下载，它将通过 App Store 完成。

# mongodb - MongoDb：在已经启用分片的集合上发出命令启用分片是否有害？

> ID：12914317
> 
> 赞同：1
> 
> 时间：2012-10-16T12:06:00.893
> 
> 标签：mongodb, sharding

我们的项目之一是使用 MongoDb，我们的数据库 => 集合是分片的。顺便说一句，我们的集合是动态创建的，因此我们必须在用 PHP 编写的应用程序层中编写代码来通知 MongoDb 对集合进行分片。因此，我正在寻找两种选择：

1.  有什么方法可以确定集合是否通过 PHP 共享？[或者]
2.  告诉 MongoDb 对已分片的集合进行分片有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:57:57.250

`db.printShardingStatus()` 1]您可以通过操作通过检查给出[**的**](https://stackoverflow.com/a/13027269/1424605)字符串输出来识别集合是否分片，以了解如何打印MongoDB的输出

2] 要求 MongoDB 对已经分片的集合进行分片没有问题。如果已经分片，Mongo 永远不会将“ok”设置为 1。 `db.runCommand({ enablesharding : "sharded_db_name" })
{ "ok" : 0, "errmsg" : "already enabled" }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:03:32.733

1.我不完全确定这一点，因为我不使用PHP驱动程序，但是，在shell上运行时`sh.status()`，可以看到分片集合是什么。例如，下面我对“twitter”数据库中的“tweets”集合进行了分片-

```
 databases:
    {  "_id" : "admin",  "partitioned" : false,  "primary" : "config" }
    {  "_id" : "twitter",  "partitioned" : true,  "primary" : "shard0000" }
        twitter.tweets chunks:
                shard0001   11
                shard0002   11
                shard0000   12 
```

[这里](http://docs.mongodb.org/manual/administration/sharding/)有进一步的分片文档。

PHP 驱动程序文档在[这里](http://www.php.net/manual/en/book.mongo.php)。

2.您不能对分片集合进行分片，不确定为什么需要……这没有意义。

# json - CanvasRenderer 中的三角形边缘

> ID：12914319
> 
> 赞同：1
> 
> 时间：2012-10-16T12:06:10.970
> 
> 标签：json, three.js

我是关于three.js 的新手，我对导入的几何体（来自3dsmax 的js 文件，包括所有材质和纹理）和CanvasRenderer 有疑问。CanvasRenderer 显示导入几何体的三角形边缘，WebGLRenderer 运行良好。

画布示例： [http ://der-n.square7.ch/threejs/examples/teapot_canvas.html](http://der-n.square7.ch/threejs/examples/teapot_canvas.html)

WebGL 示例： [http ://der-n.square7.ch/threejs/examples/teapot_webgl.html](http://der-n.square7.ch/threejs/examples/teapot_webgl.html)

在three.js 库中，我找到了用于修复此行为的材质选项“overdraw: true”，但显然材质+纹理是由上述导出的3dsmax js 文件定义的。

对于测试，我使用了“misc_camera_trackball”示例并进行了一些小改动（我添加了一个 JSONLoader，更改了一些相机和轨迹球参数，更改了一些浅色，添加了一个 CanvasRenderer）

任何提示如何解决这个问题？谢谢你的帮助。

最好的问候奥吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:30:01.797

在加载器回调中，您将所有加载的材料放在一个数组`geometry.materials`中。您可以遍历这些材料并将`overdraw`属性设置`true`为每个。

据我所知，`THREE.MeshFaceMaterial`它只是一种直通材质，表示“面有一个索引，该索引指向要从几何体的材质数组中使用的材质实例”，因此设置属性`MeshFaceMaterial`不会有任何效果。

# c# - 比较多个表

> ID：12914320
> 
> 赞同：0
> 
> 时间：2012-10-16T12:06:20.883
> 
> 标签：c#, sqlite, datatable

我的工作场所有一个可怕的遗留工具，它已被更新/修补以将信息输出到 SQLite 数据库。没有人想接触系统的后端，我也没有足够的知识去深入研究它——这不是我的问题。然而，这是我的问题：

我有一个 SQLite 数据库，里面有很多表。每个表代表一天并包含所有的巴士运行，如下所示：

```
| Direction |   Time   | RunNumber | StopIndex |
 ----------------------------------------------
|    In     |   6:30   |     1     |     1     |
|    In     |   6:35   |     1     |     2     |
|    In     |   6:40   |     1     |     3     |
|    In     |   6:45   |     1     |     4     |
|    In     |   7:30   |     2     |     1     |
|    In     |   7:35   |     2     |     2     |
|    In     |   7:40   |     2     |     3     |
|    In     |   7:45   |     2     |     4     |
|    Out    |   6:40   |     1     |     1     |
|    Out    |   6:45   |     1     |     2     |
|    Out    |   6:50   |     1     |     3     |
|    Out    |   6:55   |     1     |     4     | 
```

有些日子可以比其他日子有更多的跑步。所有表格的停靠点数都相同。

相等的定义是方向和时间都相同。每次运行都被视为一组 - 如果停止的时间不同，则需要将整个运行合并到一个表中。

我的问题是：

给定一个表列表，生成另一个表，其中包含所有给定表上不存在的值，最简单的方法是什么？这可以在 SQLite 端完成，也可以通过 C# .NET 4.0 完成。

实际上，我只需要知道不同的运行编号，因此我可以稍后将其提取并放入 Excel 电子表格中，如果这样更容易的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:22:46.310

尝试使用 EXCEPT。例如，以下查询将列出 Table1 中存在但 Table2 中不存在的所有行：

```
SELECT Direction, Time, RunNumber, StopIndex
FROM Table1
EXCEPT
SELECT Direction, Time, RunNumber, StopIndex
FROM Table2 
```

# ios - 如何从文件中恢复 RSA？

> ID：12914321
> 
> 赞同：5
> 
> 时间：2012-10-16T12:06:21.340
> 
> 标签：ios, key, rsa, public

我想从文件中恢复公钥。这是有效的Java代码：

```
PublicKey readPubKeyFromFile(AssetFileDescriptor cle) throws IOException {
    // read RSA public key
    byte[] encodedKey = new byte[(int) cle.getDeclaredLength()];
    cle.createInputStream().read(encodedKey);

    // create public key
    X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(encodedKey);
    PublicKey pk = null;
    try {
        KeyFactory kf = KeyFactory.getInstance("RSA");
        pk = kf.generatePublic(publicKeySpec);
    } catch(Exception e) {
        Logger.getInstance().logError("KeyUtils", e.toString());
    }
    return pk;
} 
```

这是不起作用的iOS代码：

```
-(SecKeyRef)readPublicKeyFromFile:(NSString*)filename andExtension:(NSString*)extension {

NSString*   filePath = [[NSBundle mainBundle] pathForResource:filename ofType:extension];
NSData*     encodedKey = [NSData dataWithContentsOfFile:filePath];

CFDataRef myCertData = (CFDataRef)encodedKey;

SecCertificateRef cert = SecCertificateCreateWithData (kCFAllocatorSystemDefault, myCertData);
CFArrayRef certs = CFArrayCreate(kCFAllocatorDefault, (const void **) &cert, 1, NULL);
SecPolicyRef policy = SecPolicyCreateBasicX509();

SecTrustRef trust;

OSStatus check =  SecTrustCreateWithCertificates(certs, policy, &trust);

if (check != noErr)
{
    NSLog(@"Problem extracting public key from file: %@", filename);
    return nil;
}

SecTrustResultType trustResult;
SecTrustEvaluate(trust, &trustResult);
SecKeyRef pub_key_leaf = SecTrustCopyPublicKey(trust);

return pub_key_leaf;
} 
```

知道我的 iOS 代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T21:03:53.093

我已经测试了你的代码，没有任何问题。该问题似乎与您尝试获取公钥的证书格式有关。

SecCertificateCreateWithData() 函数假定您提供的证书是 DER 格式。您发现的大多数证书都以 base64 编码，如著名的 .pem 格式。我已经使用正确格式的 DER 证书（使用 openssl 将证书表单 developer.apple.com 转换为 DER）测试了您的代码，并且正确提取了公钥。

要将 .pem 证书转换为 DER，只需在终端中使用 openssl：

```
openssl x509 -in developer.apple.com.pem  -outform der -out cert.der 
```

之后，输出证书文件应该可以正常使用您的代码。

但是您可以在应用程序本身上转换证书，您只需要获取 de x509 base64 编码的证书（假设您使用的是 .pem 编码的证书）并将其转换为二进制。

有一个例子可以做到这一点：

此代码将假定证书以以下标准编码：

```
-----BEGIN CERTIFICATE-----
< your base64 encoded certificate goes here >
-----END CERTIFICATE----- 
```

将此证书转换为二进制 DER 的代码是：

```
-(NSData *)getBinaryCertificateFromPemEncodedFile:(NSString *)filename andExtension:(NSString *)extension
{
    NSString* filePath = [[NSBundle mainBundle] pathForResource:filename ofType:extension];
    NSString *pemCert = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    //The header and footer conforms to .pem specificatio
    NSString *header = @"-----BEGIN CERTIFICATE-----";
    NSString *footer = @"-----END CERTIFICATE-----";

    NSString *base64Cert;
    NSScanner *scanner = [NSScanner scannerWithString:pemCert];
    //First we ignore the header part
    [scanner scanString:header intoString:nil];
    //Then we copy the base64 string excluding the footer
    [scanner scanUpToString:footer intoString:&base64Cert];

    //The reason I'm using NSDataBase64DecodingIgnoreUnknownCharacters is to exclude possible line breaks in the encoding
    NSData *binaryCertificate = [[NSData alloc] initWithBase64EncodedString:base64Cert options:NSDataBase64DecodingIgnoreUnknownCharacters];

    return binaryCertificate;
} 
```

然后在你完美的功能代码中做一个小的修改就可以了：

```
-(SecKeyRef)readPublicKeyFromCertificate:(NSData *)binaryCertificate {

    NSData *encodedKey = binaryCertificate;

    CFDataRef myCertData = (CFDataRef)CFBridgingRetain(encodedKey);

    SecCertificateRef cert = SecCertificateCreateWithData(kCFAllocatorSystemDefault, myCertData);
    SecPolicyRef policy = SecPolicyCreateBasicX509();

    SecTrustRef trust;
    //If you only have one certificate you don't need to put it inside an array
    OSStatus check =  SecTrustCreateWithCertificates(cert, policy, &trust);

    if (check != noErr)
    {
        NSLog(@"Problem extracting public key from certificate");
        return nil;
    }

    SecTrustResultType trustResult;
    SecTrustEvaluate(trust, &trustResult);
    SecKeyRef pub_key_leaf = SecTrustCopyPublicKey(trust);

    return pub_key_leaf;
} 
```

然后调用它：

```
NSData *data = [self getBinaryCertificateFromPemEncodedFile:@"developer" andExtension:@"pem"];
SecKeyRef key = [self readPublicKeyFromCertificate:data];
NSLog(@"%@", key); 
```

如果您的证书“有效”，您应该会看到：

```
2014-09-15 21:52:13.275 cert[15813:60b] <SecKeyRef algorithm id: 1,
key type: RSAPublicKey, version: 2, block size: 2048 bits, exponent: {hex: 10001, decimal: 65537},
modulus: BE19E30F47F2D31F27D576CF007B3E615F986D14AFD0D52B825E01E90BA3E1CBB6F3A472E6AECDC28BC13D0B6E58FC497ACF61D80F274E4799602DA4F819E54ADDE2FBFA89FC4EB2172501DDED8DE0FBDDBC5550CC018C73E1FD8152C905DE850862B8D57596025DE1908D8337E95637AF0F52C4A11DA178FF737DCE09471BC0A49DAD7DB39F1BA1B693D3A12F9CA50EF388B50292C73076BF1EEE412A5CFA940E99D4CF07F17FAC87F0D0E2FC8FA3ACDDEEFCCE8AFEC407B94536FCB1E4ACF34773728D189F85EAE4347E0BF868D25C7CE89F8A29B4E6865C68F4F915DFA540549EE9333007145D367FE2852622AAD776F3E5D505A02E5155CC8646A01C1031,
addr: 0x9a48200> 
```

对于测试，我使用了 developer.apple.com 的证书，您可以检查日志中的公钥并进行比较。

# eclipse - Eclipse BPEL Web 服务部署测试

> ID：12914322
> 
> 赞同：0
> 
> 时间：2012-10-16T12:06:26.977
> 
> 标签：eclipse, wsdl, bpel

我使用 BPEL 可视化设计器在 Eclipse 中创建了一个 BPEL 项目。部署后，我可以右键单击 .wsdl 文件并选择 Web 服务 >> 使用 Web 服务资源管理器进行测试。这会在 Eclipse 本身中打开一个窗口。有没有办法在浏览器（chrome等）中做到这一点？另外，我知道这是非常基本的，但是如何使用生成的 wsdl 和 Bpel（例如如何在服务器（在我的本地主机中）部署）。任何有关基础知识的链接都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:49:48.273

我不知道一个好的基于 Web 的 Web 服务测试工具。您可以尝试一下 WSO2 产品的试用功能。在任何情况下，我都推荐使用[SoapUI](http://www.soapui.org)，这对于测试 Web 服务来说非常棒。

# jquery - jQuery 每个总是排序吗？

> ID：12914323
> 
> 赞同：12
> 
> 时间：2012-10-16T12:06:30.897
> 
> 标签：jquery, arrays, each

我在 JS 中有这个对象：

```
var list = {134 : "A",140 : "B",131 : "C"} 
```

我运行它：

```
jQuery.each(list, function(key, value) { 
console.log(key + " - " + value);
}); 
```

输出应该是：

```
134 - A
140 - B
131 - C 
```

**但我不知道为什么，输出是：**

```
131 - C
134 - A
140 - B 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T12:10:34.937

首先：这不是一个列表，它是一个对象。不保证保持对象的顺序 - 每个实现都可以选择不同的顺序。

另一方面，数组**确实**保持顺序：

```
var list = [[134, "A"],[140, "B"],[131, "C"]];

jQuery.each(list, function(i, obj) { 
  console.log(i + " - " + obj[0] + " - " + obj[1]);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-08T15:46:48.393

我碰到你的问题，我花了 10 分钟才明白。

这就是您解决问题的方法：

```
var list = {134 : "A",140 : "B",131 : "C"};

// 1 - property to list
list = Object.keys(list).map(
    function(key) {
         return { num : key , char : list[key]};;
     });

console.debug(list);
// 2 - sorting the list
var sorted = list.sort(function(a, b) {
            if(a.char < b.char) return -1; return 1;
        });

// 3 output
jQuery.each(sorted, function(index, obj) {      
        console.log(obj.num + " - " + obj.char);
}); 
```

JsFiddle：[https ://jsfiddle.net/wx38rz5L/1578/](https://jsfiddle.net/wx38rz5L/1578/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T12:08:13.873

根据规范，对象的属性没有定义的顺序。

> 未指定枚举属性 (...) 的机制和顺序。

[来源](http://es5.github.com/#x12.6.4)。

因此，ECMA 实现不必以任何顺序迭代。实际上，顺序[在不同的浏览器/版本中](http://code.google.com/p/chromium/issues/detail?id=20144)有所不同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-16T12:08:20.800

发生这种情况是因为 JavaScript 对象项没有顺序。

为了修复它，您可以使用两个数组：一个带有键，第二个带有值：

```
var keys = [134, 140, 131],
    values = ["A", "B", "C"];

$.each(keys, function(i, key) {
    console.log(key, values[i]);
}); 
```

# php - HTML 提交按钮分支

> ID：12914324
> 
> 赞同：0
> 
> 时间：2012-10-16T12:06:30.950
> 
> 标签：php, html, submit

在一系列 Web 表单上，用户需要能够前后移动。但是，我想处理表格，而不管他们往哪个方向走。

按钮具有“提交”的名称和“返回”和“下一个”的值。我如何解释该值？这不起作用:-)

```
if(isset($_POST[$submit['back']])) { header('location: ../pages/create_page1.php'); } 
if(isset($_POST[$submit['next']])) { header('location: ../pages/create_page3.php'); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:21:55.167

您无法使用 获取按钮值`$submit`，它应该是`$_POST['submit']`。你可以试试这个脚本。

```
<?php
if(isset($_POST['next'])) {
    $submit = 'Next button was clicked.';
    // header(...);
} elseif(isset($_POST['back'])) {
    $submit = 'Back button was clicked.';
    // header(...);
} else {
    $submit = '';
}
?>

<form action="" method="post">
    <p>Click...</p>
    <input type="submit" name="back" value="Back"/>
    <input type="submit" name="next" value="Next"/>
</form>

<br/><?=$submit;?> 
```

或者在您的评论中使用相同的按钮名称和箭头：

```
<?php
if(isset($_POST['submit']) && $_POST['submit'] == 'next') {
    $submit = 'Next button was clicked.';
    // header(...);
} elseif(isset($_POST['submit']) && $_POST['submit'] == 'back') {
    $submit = 'Back button was clicked.';
    // header(...);
} else {
    $submit = '';
}
?>

<form action="" method="post">
    <p>Click...</p>
    <input type="image" name="submit" src="http://cdn4.iconfinder.com/data/icons/brightmix/128/monotone_arrow_left_small.png" value="back"/>
    <input type="image" name="submit" src="http://cdn4.iconfinder.com/data/icons/brightmix/128/monotone_arrow_right.png" value="next"/>

</form>

<br/><?=$submit;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:25:46.667

尝试使用jquery：

```
$('#some_button').click(funnction(){
    var $Data = $('#some-data-input').val(); 
    if($Data.length > 0){ // or some else
        window.location.href = "../pages/create_page3.php";
    } else {
       // other action
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:27:09.823

字段的名称叫做`submit`，所以需要检查该字段是否已经提交，它的值是什么：

```
 if ( isset($_POST['submit]') && $_POST[submit] == 'back' ) 
```

但是，您没有使用提交按钮，而是使用服务器端图像映射，因此该值可能尚未提交（取决于浏览器）。

相反，您需要为字段指定不同的名称，然后检查是否为这些字段发送了坐标。

```
<input type="image" name="submit_back" src="../images/arrows/back_50.png" width="121" height="50" border="0" alt="Back" />

 if ( isset($_POST['submit_back_x']) ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T12:32:14.827

试试这个javascript函数......

```
<script language=javascript>
function redirect()
{   
 if(document.value=="Next")
    {
            document.form.action="next.php";
    }
    else if(document.value=="Back")
    {
            document.form.action="back.php";
    }
    return true;
} 
</script>

<form method="post" name=form onsubmit='return redirect();'>
    <p>Click...</p>
    <input type="submit" name="back" value="Back"/>
    <input type="submit" name="next" value="Next"/>
</form> 
```

# python - gevent“超时”停止工作

> ID：12914326
> 
> 赞同：1
> 
> 时间：2012-10-16T12:06:32.707
> 
> 标签：python, gevent

我已从 gevent 13.x 升级到 1.0b4。

我有故障转移代码，通过每 5 秒发送一次“HUGZ”来检查连接是否仍然有效。如果 HUGZ 未能到达，则建立到不同位置的替代连接。此故障转移机制停止工作，因为超时行为发生了变化。

我用 a`with Timeout`和 the 做了一些测试代码，它按预期工作，但完全相同的代码在我的应用程序上下文中不再工作。故障转移代码以前可以工作。

我正在使用 gevent-zeromq 来接收块中的消息`with TimeOut`，但是`with TimeOut`块，并且永远不会“超时”并继续执行，因此恢复代码不会被执行。

什么可能导致超时机制不起作用？以前工作的超时代码不再工作。

```
if active_socket:
    print 'waiting for message'

    with Timeout(2, False):
        node_message = NodeMessage.recv(active_socket)

    When no message arrives in time, the code block after this text 
    does not get executed. and it should!! and did before.

    logging.info('ping..')
    logging.info(node_message.name)

    # deal with message from plc_server.
    if node_message:
        handle_node_message(plc_client, plc_server, node_message)
    else:
       # no nodemessage or hugz recieved.
       # plc_server has died a horrible death? reboot? 
```

接收方法：

```
 @classmethod
  def recv(cls, socket):
      """Reads name-value message from socket"""

      while True:
          message = socket.recv()
          if message:
              return cls.from_message(message) 
```

套接字是在一个连接对象中初始化的，我有几个：

```
 from gevent import Timeout
 from gevent_zeromq import zmq

 ..yada yada yada...

    self.subscriber = ctx.socket(zmq.SUB)
    self.subscriber.setsockopt(zmq.SUBSCRIBE, '')
    self.subscriber.connect('%s:%d' % (address, port + 1))
    self.subscriber.linger = 0 
```

蛋黄：

```
gevent-zeromq   - 0.2.5        - active 
gevent          - 1.0b4        - active 
greenlet        - 0.4.0        - active 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:59:00.640

改变：

```
with Timeout(2, False):
    node_message = NodeMessage.recv(active_socket) 
```

到：

```
class MessageContext(object):
    node_message = None

messageContext = MessageContext()  //shared memmory between greenlets

...

def get_next_message(active_socket)
    messageContext.node_message = NodeMessage.recv(active_socket)

with Timeout(2, False):
     ..putting the actual receving of a message in its own greenlet
     ..makes TimeOut failover/Timeout work again..

    gevent.spawn(get_next_message, active_socket).job()

node_message = messageContext.node_message 
```

# git - 尝试使用 java git 库初始化 git 存储库

> ID：12914327
> 
> 赞同：1
> 
> 时间：2012-10-16T12:06:32.953
> 
> 标签：git

我正在尝试创建一个目录并将其初始化为使用 javagit 库的 git 存储库。下面是我正在使用的代码片段：

```
repositoryDirectory = FileUtilities.createTempDirectory("C:/Madhu/ReleaseManagerRepo/Demo_gitRepository");
System.out.println("Git Repository Location : " + repositoryDirectory.getAbsolutePath());
//get the instance of the dotGit Object
dotGit = DotGit.getInstance(repositoryDirectory);
System.out.println("DotGit==========="+dotGit.toString());
//Initialize the repository ,similar to git init
dotGit.init(); 
```

我可以看到目录已创建。执行 dotGit.init() 后，我看不到代码中指定的目录下的 .git （当我从命令行运行命令 git init 时得到的）目录。

我的第二个问题是我正在尝试从我的代码中创建一个文件，并希望将其添加到 git 存储库中。以下是相同的代码片段：

```
File file = FileUtilities.createFile(repositoryDirectory, "README", "First file in the git repository");

//get the current working tree from the git repository
WorkingTree wt = dotGit.getWorkingTree();
GitAddResponse ar = wt.add();
wt.commitAll("First commit to the git repository"); 
```

我收到如下异常：

```
Exception in thread "main" java.io.IOException: 020100: Unable to start sub-process.
    at edu.nyu.cs.javagit.client.cli.ProcessUtilities.startProcess(ProcessUtilities.java:50)
    at edu.nyu.cs.javagit.client.cli.ProcessUtilities.runCommand(ProcessUtilities.java:141)
    at edu.nyu.cs.javagit.client.cli.CliGitAdd.add(CliGitAdd.java:49)
    at edu.nyu.cs.javagit.api.commands.GitAdd.add(GitAdd.java:67)
    at edu.nyu.cs.javagit.api.GitFileSystemObject.add(GitFileSystemObject.java:185)
    at edu.nyu.cs.javagit.api.WorkingTree.add(WorkingTree.java:130)
    at javagit.JavaGitDemo.main(JavaGitDemo.java:41)
Caused by: java.io.IOException: CreateProcess: git add C:\Madhu\ReleaseManagerRepo\Demo_gitRepository\README error=2
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    at java.lang.ProcessBuilder.start(Unknown Source)
    at edu.nyu.cs.javagit.client.cli.ProcessUtilities.startProcess(ProcessUtilities.java:48)
    ... 6 more 
```

我已将 git/bin 添加到我的 Path 环境变量中。但我仍然看到同样的例外。我不确定我是否缺少其他任何东西。

你能建议一下吗？

问候，马杜苏丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T07:56:11.980

死帖，但我刚刚通过向系统环境变量添加 git 路径解决了同样的问题 -[文章](http://blog.countableset.ch/2012/06/07/adding-git-to-windows-7-path/)

# jquery - 如何解析和呈现 JQuery 响应

> ID：12914337
> 
> 赞同：0
> 
> 时间：2012-10-16T12:07:02.877
> 
> 标签：jquery

我在对 WebMethod 的 Ajax 调用之后收到 JSON 响应，并且想要解析它并以以下格式的 div-tags 呈现数据（应该动态创建 div-tags）。我将下面的属性标记为粗体，应将其替换为 JSON 响应的等效属性。每个新闻项（在 JSON 响应中由 { } 封装）对应一个列表元素。以下是数据的呈现方式：

```
<div class="articleList-list"> 
                <ul>
                    <li>
                        <div class="articleList-image">
                            <img src="**ImageSource**" width="150px" height="100px" alt="the article's image" />
                        </div>
                        <div class="articleList-article">
                            <h3><a href="**UrlForNewsitem**">**OverskriftArticleData**</a></h3>
                            <p>**Ingress**</p>
                        </div>                
                    </li>
                    <li>
                        <div class="articleList-image">
                            <img src="#" width="150px" height="100px" alt="the article's image" />
                        </div>
                        <div class="articleList-article">
                            <h3><a href="#">Artikkel nummer 2s tittel</a></h3>
                            <p>Et kort sammendrag av hva artikkelen handler om, eller starten på selve artikkelen. 
                            Dette skal ligge til ventstre i hovedinnholdet, til høyre for artikkelens bilde og oversikten over alle artikkel-kategorier.</p>
                        </div>                
                    </li>
                </ul>
            </div> 
```

这是 JSON 响应：

```
[{"ImageSource":"/ImageVaultFiles/id_1/cf_2/Person.JPG","OverskriftArticleData":"ArtikelOverskrift","UrlForNewsitem":"/Templates/Skien.inter/Pages/Aktuellt.aspx?id=2816&epslanguage=en","ByLineOfArticle":"ForfattareByline","Ingress":"Detta ær ingressen till artikeln"},{"ImageSource":"/ImageVaultFiles/id_10/cf_2/city.JPG","OverskriftArticleData":"Rubrik","UrlForNewsitem":"/Templates/Skien.inter/Pages/Aktuellt.aspx?id=2814&epslanguage=en","ByLineOfArticle":"Anders B","Ingress":"Testar ingress"}] 
```

我如何以简洁有效的方式解析和呈现 JQuery 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:11:27.273

假设您的响应是有效的 JSON，您不需要解析它。您可以直接使用它，因为它是一个有效的 javascript 对象。您的响应似乎是一个包含单个对象的数组，因此您可以像这样使用它：

```
data = [{"ImageSource":"/ImageVaultFiles/id_1/cf_2/Person.JPG","OverskriftArticleData":"ArtikelOverskrift","UrlForNewsitem":"/Templates/Skien.inter/Pages/Aktuellt.aspx?id=2816&epslanguage=en","ByLineOfArticle":"ForfattareByline","Ingress":"Detta ær ingressen till artikeln"},{"ImageSource":"/ImageVaultFiles/id_10/cf_2/city.JPG","OverskriftArticleData":"Rubrik","UrlForNewsitem":"/Templates/Skien.inter/Pages/Aktuellt.aspx?id=2814&epslanguage=en","ByLineOfArticle":"Anders B","Ingress":"Testar ingress"}];
var imgSource = data[0].ImageSource; 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:09:25.517

You can use the jQuery parseJSON function. You can read more about it here [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

```
var obj = jQuery.parseJSON(response_json);
//Now use the various properties of object which contain the values of json response.

$("articleList-article > img")[0].attribute("src", obj.ImageSource);

//And so on 
```

Also you can simply use:

```
data = [{"ImageSource":"/ImageVaultFiles/id_1/cf_2/Person.JPG","OverskriftArticleData":"ArtikelOverskrift","UrlForNewsitem":"/Templates/Skien.inter/Pages/Aktuellt.aspx?id=2816&epslanguage=en","ByLineOfArticle":"ForfattareByline","Ingress":"Detta ær ingressen till artikeln"},{"ImageSource":"/ImageVaultFiles/id_10/cf_2/city.JPG","OverskriftArticleData":"Rubrik","UrlForNewsitem":"/Templates/Skien.inter/Pages/Aktuellt.aspx?id=2814&epslanguage=en","ByLineOfArticle":"Anders B","Ingress":"Testar ingress"}];
$("articleList-article > img")[0].attribute("src", data[0].ImageSource); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:11:59.613

使用模板，谷歌 .tmpl() 或 JsRender

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:13:24.917

假设您使用 jQuery 实际进行 Ajax 调用，您可以传递一个附加`post`参数，让它自动为您解码并将其传递给您的回调函数：

```
$.post('/someUrl/', {some: 'object params'}, function myCallback(data) {
  /* here the data variable is an object */
  alert(data.something);
}, 'json'); 
```

这实际上是`$.getJSON`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T13:35:15.753

在收到 JSON 响应后，这被称为：

```
function ParseAndPresentJquery(stringToParse, hrefNameOfTab) 
    {
        data = JSON.parse(stringToParse);

        var src = "<div class='articleList-list'><ul>";

        for (var j = 0; j < data.length; j++) {
            src += "<li><div class='articleList-article'><h3><a href='" + data[j].UrlForNewsitem + "'>";
            src += data[j].OverskriftArticleData + "</a></h3></div>";
            src += "<p>";
            src+= data[j].Ingress;
            src += "</p>";
            src += "</div></li>";
        }
        src += "</ul></div>";
        $(hrefNameOfTab).html("");
        $(hrefNameOfTab).append(src);
    } 
```

# javascript - 如何避免在 extJs 3.2 中将下面的单元格复制到上面的单元格中

> ID：12914346
> 
> 赞同：1
> 
> 时间：2012-10-16T12:07:45.403
> 
> 标签：javascript, extjs, datagrid, extjs3

我有`EditorGridPanel`数据集。我想禁用一些可编辑的单元格（检查字段记录只读的数据库`YES`）。

我做了那个电话`getSiteEditable`。我禁用了单元格编辑，但是当我单击单元格 A（只读单元格）时，然后单击`cancel`并双击单元格 B，此时单元格 B 的内容复制到单元格 A 中。

数据存储：

```
siteStore = new Ext.data.JsonStore({
    idProperty: 'ROWI',
    root: 'data',
    autoLoad: true,
    mode: 'remote',
    url: WOERP.getURL("portals", "sm", "grid", "grid=portal_sm_configui_site_tab_grid&action=get"),
    keys: ['CONFIG_TYPE'],
    fields: [
        'ROWI',
        'CONFIG_VALUE',
        'CONFIG_DESC',
        'CONFIG_TYPE',
        'SHORT_DESC',
        'IS_READ_ONLY',
        'ROWDATE']
});

this.gridSiteData = Ext.ux.grid.woerp.getWoerpGrid(this.gridSiteData, siteStore);
siteRowEditor = Ext.getCmp('portal_sm_configui_site_tab_grid_roweditor');
siteRowEditor.on('beforeedit', this.getSiteEditable, this); 
```

**setSiteEditable 函数**

```
getSiteEditable: function (roweditor, rowIndex) {
    if (!roweditor.initialized) {
        roweditor.initFields();
    }

    var fields = roweditor.items.items;

    var rec = this.gridSiteData.store.getAt(rowIndex);
    var isReadOnly = rec.data.IS_READ_ONLY;

    if (isReadOnly == 'YES') {
        Ext.each(fields, function (field, i) {
            if (field.name == 'CONFIG_VALUE') field.setDisabled(true);
        });
    } else Ext.each(fields, function (field, i) {
        if (field.name == 'CONFIG_VALUE') field.setDisabled(false);
    });
} 
```

我可以通过调用上述方法禁用可编辑功能，但是当我单击复制数据单元格内容下方的数据单元格并在单击数据单元格顶部显示红色小图标时。

有人知道将数据复制到另一个单元格的原因吗？

**页面加载** ![页面加载视图](../Images/d6f7a4e071f7b4b8eb52ff5929e0d24a.png) **双击单元格 A** ![在此处输入图像描述](../Images/83f9a1a1653e56ed2de1d4b76cbc3230.png) **双击单元格 B 后（将单元格 B 的内容复制到单元格 A）** ![在此处输入图像描述](../Images/2817a00663bdad8f6e3c26bf643c7a8b.png)

![双击单元格后](../Images/2b7a235b854826ceb7b868816c05a9cc.png)

# objective-c - mouseDragged 未在 NSView 框架外调用

> ID：12914350
> 
> 赞同：6
> 
> 时间：2012-10-16T12:07:56.213
> 
> 标签：objective-c, cocoa, nsview

我很难理解为什么当鼠标位于视图之外时，为什么会为我的 NSView 子类之一调用 mouseDragged 而不是另一个子类。

子类 1 以编程方式添加到 NSWindow，然后将其作为子窗口添加到主应用程序窗口。当鼠标在视图内单击并拖动时，即使鼠标移到视图框架之外，mouseDragged 也会继续被调用。这就是我想要发生的事情。

子类 2 在 XIB 文件中分配给应用程序主窗口中的自定义视图对象。在这种情况下，mouseDragged 事件仅在鼠标停留在视图内时触发。

有什么明显的我失踪了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-02T03:01:59.273

我也发生了同样的事情。`mouseDragged()`刚刚停止在视图范围之外被调用。它曾经工作得很好。不知道发生了什么。

无论如何，这是我的解决方法：

```
 override func mouseDown(with event: NSEvent) {

        let dragMonitor = NSEvent.addLocalMonitorForEvents(matching: [.leftMouseDragged, .leftMouseUp]) { event in

            switch event.type {
            case .leftMouseUp: NSEvent.removeMonitor(dragMonitor)
            case.leftMouseDragged: self.coolMouseDragged(with: event)
            default: fatalError()
            }

            return event
        }

        return event
    }

    func coolMouseDragged(with event: NSEvent) {

        /// Do cool stuff
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T08:02:54.670

我经历过类似的事情，但它在每个窗口中都是相同的 NSView 子类。一个（在父窗口中）按预期工作。另一个（在子窗口中）仅在鼠标悬停在视图上时才看到 mouseDragged。

事实证明，原因是 NSImageView 在与有问题的视图相同的视图中，但重叠了。因为 NSImageView 只绘制了部分边界的图像，所以这从来都不是问题，但事实证明这是导致问题视图跟踪问题的原因。

我调整了添加 NSImageView 的方式，将其放置在子视图的底部：

```
[parentView addSubview:myImageView positioned:NSWindowBelow relativeTo:nil]; 
```

有问题的视图也已经在 parentView 中，因此 addSubview: 正在将 myImageView 添加到有问题的视图上方。

这为我解决了这个问题。

# php - 显示使用 php 邮件功能发送的电子邮件数量

> ID：12914353
> 
> 赞同：1
> 
> 时间：2012-10-16T12:08:07.510
> 
> 标签：php, email, count, echo

我正在创建一个显示属性的房地产网站。在每个房产列表上，我想要一个显示“表达兴趣”的按钮，当单击此按钮时，应向我发送一封电子邮件，其中包含表达兴趣的用户详细信息（用户将登录，因此他们的所有详细信息将来自他们的帐户）。

我的电子邮件功能工作正常，但是，我还想显示有“表达兴趣”的人数。有没有办法跟踪使用此按钮发送电子邮件的次数并显示“xx 人已表示对此属性感兴趣”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:09:46.933

Store in the database before sending the mail and just before sending the mail include the number of people or the people who are interested, a simple query would suffice, or if you have a content management system you can include it there, in both cases you would need an intermediate table (connection between user id and real-estate id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:16:27.630

我会在您的数据库中添加另一个表来存储 property_id 和 user_id。如果用户单击表示感兴趣，则使用当前 property_id 和当前 user_id 向该表添加另一行。要获得链接的数量，您只需计算行数

```
SELECT count(user_id) FROM interest_relation WHERE property_id = 'your property id' 
```

通过这种方式，您还可以找出哪个用户对哪个属性感兴趣。

# orbeon - 对中继器控件内控件的操作

> ID：12914364
> 
> 赞同：0
> 
> 时间：2012-10-16T12:08:36.013
> 
> 标签：orbeon

Orbeon 表单构建器中的表单包含一个重复控件（新重复）。假设重复控件（新重复）的每一行（或重复）上有三个文本控件。每行上的前两个文本控件包含数值。我想要在运行时将前两个文本控件的乘积带到第三个文本控件而没有任何事件。运行时将有多个重复次数，即行可能会增加，但对于每个计算，在运行时和每个计算都会反映出来前两个的行产品必须在第三个上查看

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:18:17.830

1.  命名第一列和第二列中的字段（单击字段右侧的齿轮）。假设您选择了名称`quantity`和`price`.
2.  对于第三个字段，在*计算值*中输入以下 XPath 表达式，全部在一行中（在您通过单击红色感叹号获得的*Edit Validation Properties中）：*

    ```
    if ($quantity castable as xs:double and $price castable as xs:double)
    then $quantity * $price
    else 'n/a' 
    ```

您可以按名称引用其他控件，在名称前面加上一个美元符号，在这里我们检查一个值是否确实是一个带有`$gaga castable as xs:double`.

# javascript - 函数中的 Ajax 调用序列

> ID：12914366
> 
> 赞同：0
> 
> 时间：2012-10-16T12:08:48.243
> 
> 标签：javascript

我有一个小问题。说我有一个js函数

```
$(function() {
 $(".button").click(function(){ 
 var id=$(this).attr('id');
 var dataString = 'id='+ id ;
 $.ajax({
   type: "POST",
   url: "download_number.php",
   data: dataString,
   cache: false,
   success: function(html)
   {
     $("#div_"+id).html(html);
   }  });
   window.open('File_download.php?file_id='+id, '_blank' );
  }); 
```

如您所见，`window.open`调用是在 $.ajax 调用之后

是否保证 $.ajax 调用将在每次页面重新加载之前执行，如果没有，则

我们不应该`window.open`在成功函数中声明吗？

在我看来，当服务器响应缓慢时，页面将首先重新加载，并且`$.ajax`调用可能会被`window.open`函数中断

但出于同样的原因，我在 stackoverflow.com/questions/12908138/how-to-get-the-id-or-name-of-related-file/

谢谢你让我的信念更坚定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:17:58.650

在您的示例中，该`window.open`函数将始终（！）在调用的`success`回调函数之前`ajax`调用。Ajax 流量始终是异步的，而`window.open`函数驻留在同步 JS`<script>`标记中。

由于 JavaScript 是单线程的，所有同步语句将始终在任何异步功能（如`ajax setTimeout animate`等）之前执行。

```
$.ajax({
   type: "POST",
   url: "download_number.php",
   data: dataString,
   cache: false,
   success: function(html) { // asynchronous functionality
     $("#div_"+id).html(html);
   }  
}); 
// within synchronous script statements
window.open('File_download.php', '_blank' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:21:02.510

是的，Ajax 是异步的，因此您将在启动 XHR 进程后立即打开该窗口。要下载处理后的数据，请从成功回调中打开新窗口。但是我不确定您所说的“*在页面重新加载之前*”是什么意思 - 没有代码可以做到这一点。

另外我不知道您的服务器的行为如何，这`file_download.php`似乎与您的 ajax 调用无关。你不应该在那里传递`download_number`你通过ajax收到的吗？

# objective-c - 重叠视图的透明度

> ID：12914370
> 
> 赞同：0
> 
> 时间：2012-10-16T12:08:55.807
> 
> 标签：objective-c, ios, uiview, alpha

我有两个视图部分重叠。他们都是同一个superview的孩子，但彼此之间没有父子关系。

初始 viewA.alpha=1 和 viewB.alpa=0 然后我逐渐增加 viewB.alpha 这由于某种原因导致 viewA 变得越来越透明，尽管它的 alpha 仍然是 1。

如何在不影响其他视图的情况下更改其中一个重叠视图的透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:06:17.130

我的问题结果与此完全无关。我从 XIB 文件中两次实例化相同的视图，这由于某种原因导致了问题。

# javascript - Using a template in a backbone view that includes the parent element

> ID：12914373
> 
> 赞同：2
> 
> 时间：2012-10-16T12:08:58.230
> 
> 标签：javascript, backbone.js, backbone-views

I am attempting to refactor my backbone views to have all HTML related markup in external templates. Ideally I would like to have the element that the view is attached to in the external template as well. At the moment I have:

The html template

```
 <h3 class="pull-left">Search</h3>
    <input id="customer-search-input" class="input-large search-query" placeholder="Cust #, Name, Suburb or Owner" />
    <button id="customer-search-show-all" class="btn pull-right">Show All</button>
    <span id="update-time" class ="pull-right"></span>
    <table id="customer-search-results-table" class="tablesorter tablesorter-dropbox">
        <thead>
        <tr>
            <th>Customer Number</th>
            <th>Customer Name</th>
            <th>Suburb</th>
            <th>Owner</th>
            <th>Phone Number</th>
        </tr>
        </thead>
        <tbody id="customer-list-results">
        </tbody>
    </table> 
```

And the backbone view that consumes the template:

```
 define(['jquery','underscore', 'backbone', 'text!templates/customerSearch.html','text!templates/customerRow.html', 'jquery.tablesorter' ],
        function($, _, Backbone, customerSearchTemplate, customerRow) {

        // ... Other sub-views

        var CustomerSearch = Backbone.View.extend({
            id:'customer-search', // would prefer to have these
            className: 'well',    // in the template
            initialize: function(){
                this.$el.html(customerSearchTemplate);
                this.customerSearchInput = this.$("#customer-search-input");
            },
            events: {
                "click #customer-search-show-all": "showAll",
                "keyup #customer-search-input": "search"
            },
            search: function(){
                var filteredCustomers = this.collection.search(this.customerSearchInput.val(), ['id','companyName','suburb','businessContact']);
                this.customerSearchResultsView = new CustomerSearchResultsView({collection: filteredCustomers});
                this.customerSearchResultsView.render();
            },
            showAll: function() {
                this.customerSearchResultsView = new CustomerSearchResultsView({collection: this.collection});
                this.customerSearchResultsView.render();
            }
        });

        return CustomerSearch;
    }); 
```

Everything works but it would be great to be able to have the `id` and `className` as part of a wrapper div in the template. If I add this to the template then it appears correctly when rendered but is wrapped by another div by the backbone view.

I'm trying to decouple everything as much as possible.

Thanks!

* * *

**Update 17 Oct 2012**

Using the `view.setElement` method

```
 var CustomerSearch = Backbone.View.extend({
            template:_.template(customerSearchTemplate),
            initialize: function(){
                  this.setElement(this.template());
            },
            // ...
    }); 
```

with template

```
 <div id="customer-search" class="well">
            <h3 class="pull-left">Search</h3>
            // ...
    </div> 
```

appears to work. Just wondering now if there is performance hit. Will report back.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:24:42.737

您可以将模板元素包装在带有 id 的脚本标记中。

```
<script id="custom-search" type="text/template">
    <h3 class="pull-left">Search</h3>
    <input id="customer-search-input" class="input-large search-query" placeholder="Cust #, Name, Suburb or Owner" />
    <button id="customer-search-show-all" class="btn pull-right">Show All</button>
    <span id="update-time" class ="pull-right"></span>
    <table id="customer-search-results-table" class="tablesorter tablesorter-dropbox">
        <thead>
        <tr>
            <th>Customer Number</th>
            <th>Customer Name</th>
            <th>Suburb</th>
            <th>Owner</th>
            <th>Phone Number</th>
        </tr>
        </thead>
        <tbody id="customer-list-results">
        </tbody>
    </table>
</script> 
```

然后，在您的视图中声明以下选项：

```
template : _.template($('#custom-search').html()) 
```

然后你就可以打电话了：

```
this.$el.html(this.template()); 
```

在您的初始化函数中。这将加载脚本标签的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:21:44.213

为什么不将您的模板“包装”在包含 id / class 的父 div 中（以及您想要使用的任何其他属性）

```
<div id="customer-search" class="well"> ... </div> 
```

然后使用[setElement](http://backbonejs.org/#View-setElement)将 div 设置为 View 的**el**元素。

（注意：我从未使用过文本插件。但我认为你没有理由不能使用这种方法）

另外：[更多关于 setElement](https://stackoverflow.com/questions/9586279/using-setelement-with-views-in-backbone)。

# javascript - javascript 自动跳转到下一个表单域

> ID：12914375
> 
> 赞同：0
> 
> 时间：2012-10-16T12:09:05.230
> 
> 标签：javascript, forms, focus

我有一个 javascript 代码，可以让我自动从一个表单域跳到下一个域。

它使用固定长度的字段工作。

示例：字段 TIME 只能是 4 个数字，因此当用户输入第 4 个数字时，脚本将重点关注下一个字段。

它工作正常，但我想添加一个功能。

我想在可变长度字段中使用它。我的字段由 LASTNAME（空格）FIRSTNAME 的第一个字母组成。

示例：John Doe 将输入为“Doe J”

我能想到的唯一技巧是在按下空格+输入另一个字符时使字段移位。这是唯一允许使用可变长度姓氏的任意组合执行函数的重复模式。

那么，知道如何实现它吗？我是js初学者！这是原始代码：

```
<SCRIPT TYPE="text/javascript">
<!--
var downStrokeField;
function autojump(fieldName,nextFieldName,fakemaxlength)
{
    var myForm=document.forms[document.forms.length - 1];
    var myField=myForm.elements[fieldName];
    myField.nextField=myForm.elements[nextFieldName];

    if (myField.maxlength == null)
       myField.maxlength=fakemaxlength;

    myField.onkeydown=autojump_keyDown;
    myField.onkeyup=autojump_keyUp;
}

function autojump_keyDown()
{
    this.beforeLength=this.value.length;
    downStrokeField=this;
}

function autojump_keyUp()
{
    if (
           (this == downStrokeField) && 
           (this.value.length > this.beforeLength) && 
           (this.value.length >= this.maxlength)
       )
           this.nextField.focus();
           downStrokeField=null;
}
//-->
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:31:59.497

与其先检测一个空格然后再检测一个字母，不如看看[string.match()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)方法。

您可以执行类似`name.match(/^[A-Z][a-z]* [A-Z]$/)`on keypress 的操作，以确定名称是否包含一个大写字母，后跟任意数量的小写字母，后跟一个空格和另一个大写字母。

但是，请注意，您的标准可能会遇到问题，例如某人的头衔如“Jr”，或姓氏中有空格，如“Da Silva”或撇号，如“O'Malley”。在人名中容纳许多特殊情况可能很棘手。

# java - 返回实现接口的java类的类型

> ID：12914378
> 
> 赞同：2
> 
> 时间：2012-10-16T12:09:16.073
> 
> 标签：java, class, generics, types, return

我有一个标志告诉我要使用哪种类类型。应该使用静态方法来检索正确的类。需要类类型作为泛型方法的输入。

```
public class Config{
    public static int flag = 1;
}

public interface A {
    public abstract int getResult();
}

public class A1 implements A{
    public int getResult{
    // ...
    }
}

public class A2 implements A{
    public int getResult{
    // ...
    }
}

public class AType{

    public static Class getType(){
        switch (Config.flag) {
    case 1:
        return A1.class;
    case 2:
        return A2.class;
        default:
            return null;
    }
} 
```

“getType()”的返回类型错误。我已经尝试了一些通用的返回类型，但似乎它不能像检索类类型以供进一步使用一样工作......

任何想法如何根据配置标志返回不同的类类型？

我需要类类型（A1 或 A2）作为通用方法的输入，例如：

```
public static <T extends Message> T[] getArrayFromStream(DataInputStream in, Class<T> returnType)
        throws IOException {
    return getArrayFromStream(in, returnType, new Object[0]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:18:57.740

我的猜测（鉴于缺乏信息）是您正在尝试这样做：

```
Class clazz = getType();
A instance = clazz.newInstance(); 
```

如果是这种情况，你需要这个......

```
public Class<? extends A> getType(){...} 
```

进而

```
Class<? extends A> clazz = getType();
A instance = clazz.newInstance(); 
```

# jquery - AJAX - 如何从我的静态 [webmethod] 中检索返回的值

> ID：12914379
> 
> 赞同：1
> 
> 时间：2012-10-16T12:09:16.933
> 
> 标签：jquery, asp.net, ajax

我的 Default.aspx 页面中有以下 PageMethod：

```
[WebMethod]
public static string Hello()
{
    return "Hello";
} 
```

在这里，我有一个 div 文本，我想将其设置为通过 AJAX 返回的任何内容：

```
<div id="ajaxDiv"></div> 
```

下面是我调用 AJAX 的两种方式。第一个是标准的 AJAX 调用：

```
 function testAjax()
{
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function ()
{
    if (xmlhttp.readyState == 4 && status == 200)
        $('#ajaxDiv').text(xmlhttp.responseText);
}
xmlhttp.open("POST", "Default.aspx/Hello", true);
xmlhttp.send(); 
```

}

第二个是在 JQuery 的帮助下：

```
function testAjaxJQuery()
 {
  $.ajax(
  {
     type: "POST",
     url:"Default.aspx/Hello",
     data: "{}",
     success: function (data)
     {
         $('#ajaxDiv').text(data); 
     }
  }
 ) 
```

}

我将一个按钮 onclick 事件绑定到这些函数，但是通过这两种方法，我得到了我的 Default.aspx 页面的标记，而不是“Hello”这个词。我还需要做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:15:27.397

您应该使用 data.d 来获取响应：

```
 $.ajax({
   type: "POST",
   url: "Default.aspx/Hello",
   data: "{}",
   contentType: "application/json; charset=utf-8",
   dataType: "json",
   success: function (data) {
         $("#ajaxDiv").text(data.d);
   }
}); 
```

# java - 编组/解组字段以使用 JAXB 标记属性

> ID：12914382
> 
> 赞同：1
> 
> 时间：2012-10-16T12:09:29.743
> 
> 标签：java, xml, xpath, jaxb

假设我有课示例：

```
class Example{
  String myField;
} 
```

我想以这种方式解组它：

```
<Example>
  <myField value="someValue" />
</Example> 
```

是否可以使用 JAXB XJC 以这种方式解组对象？（我知道 EclipseLink 中的 XmlPath，但不能使用它）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:30:04.777

你可以利用`XmlAdapter`这个用例。在这种情况下，`XmlAdapter`您将转换`String`为/从具有映射到 XML 属性的一个属性的对象。

**xml适配器**

```
package forum12914382;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class MyFieldAdapter extends XmlAdapter<MyFieldAdapter.AdaptedMyField, String> {

    @Override
    public String unmarshal(AdaptedMyField v) throws Exception {
        return v.value;
    }

    @Override
    public AdaptedMyField marshal(String v) throws Exception {
        AdaptedMyField amf = new AdaptedMyField();
        amf.value = v;
        return amf;
    }

    public static class AdaptedMyField {

        @XmlAttribute
        public String value;

    }

} 
```

**例子**

```
package forum12914382;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement(name="Example")
@XmlAccessorType(XmlAccessType.FIELD)
class Example{

    @XmlJavaTypeAdapter(MyFieldAdapter.class)
    String myField;

} 
```

**演示**

```
package forum12914382;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Example.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12914382/input.xml");
        Example example = (Example) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(example, System.out);
    }

} 
```

**输入.xml/输出**

```
<Example>
  <myField value="someValue" />
</Example> 
```

* * *

**相关示例**

*   [JAXB 元素映射](https://stackoverflow.com/questions/9799081/jaxb-element-mapping/9802552#9802552)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:27:08.197

是的，手动添加[@XmlAttribute](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlAttribute.html) -Annotation 或从 XSD 生成类。

# php - How to run this mysql query with dynamically update the value?

> ID：12914385
> 
> 赞同：-4
> 
> 时间：2012-10-16T12:09:35.377
> 
> 标签：php, mysql

```
update new_calls_display set city_id = '3' where cus_city like '%Madurai%' 
```

above mysql query i want to change the city_id value dynamically and also corresponding cus_city also change dynamically from the current table(new_calls_display) using php coding

```
city_id             cus_city
1                Chennai
2                Ariyalur
2                Ariyalur
3                Madurai
3                Madurai
3                Madurai
1                Chennai
1                Chennai 
```

like above table cus_id 1 to 50 so cus_city also 50 unique values

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:17:14.640

您需要使用一个变量，然后将其连接到 sql 查询字符串：

```
$idcity = 2;

"update new_calls_display set city_id = {$idcity} where cus_city like '%Madurai%'" 
```

不要忘记照顾 sql 注入，以前的代码可以轻松破解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:18:50.240

```
update new_calls_display 
set city_id = (
select  col_name from table_name where cus_city like '%Madurai%'   ) 
```

# ios - Back application page, from uiwebview

> ID：12914390
> 
> 赞同：1
> 
> 时间：2012-10-16T12:09:51.033
> 
> 标签：ios, uiwebview, google-plus

I call this :

```
 NSString *authLink = @"https://plus.google.com/share?url=http://stackoverflow.com";
NSURL *url = [NSURL URLWithString:authLink]; 
```

[vkWebView loadRequest:[NSURLRequest requestWithURL:url]];

after I sent the text, UIWebView loaded my google+ wall. How hide webview and back to my app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:14:47.683

`webView:shouldStartLoadWithRequest:navigationType:`您可以使用委托方法查看UIWebView 尝试加载的url。

有关详细信息，请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)。

当您获得 google+ 墙的 URL 时，只需隐藏/停止 UIWebView

# facebook-graph-api - create mobile uploads album

> ID：12914395
> 
> 赞同：0
> 
> 时间：2012-10-16T12:10:10.413
> 
> 标签：facebook-graph-api, photos

I can't find documentation on how to create the Mobile Uploads photo album using the Graph API. (the one that allows you to do post-by-email) Is this possible? If so how, and what permissions do I need?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:53:39.667

你不能。您面临的问题是一个 FB BUG：developers.facebook.com/bugs/445723968802294

举报！

# c++ - Problems with Eclipse C++ and Boost BGL

> ID：12914399
> 
> 赞同：1
> 
> 时间：2012-10-16T12:10:23.153
> 
> 标签：c++, eclipse, boost

I'm having some problems to configure eclipse with the boost library. Actually my code compile without problems, but eclipse marks me some errors that the compiler does not.

I've added the path of the boost library in the includes of "paths and symbols" settings, and in fact eclipse recognizes the boost namespace, but I got several errors: for example

vector spanning_tree;

it reports as an invalid template arguments. Does anyone had my same problem?

I'm using the last version of eclipse and OS X as operating system.

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:25:09.237

虽然我没有看到这个特殊问题，但我知道总的来说，Eclipse CDT 不如成熟的 C++ 编译器好，因此不能保证 C++ 的每个方面都正确。

确保您正在运行[最新版本的 Eclipse CDT](http://www.eclipse.org/cdt/downloads.php)是个好主意。

如果您运行的是最新版本，那么如果您[将此报告](https://bugs.eclipse.org/bugs/?product=CDT)为错误，Eclipse CDT 开发人员可能会很感激。

作为最后的手段，您可以禁用不正确的警告（在窗口、首选项、C/C++、代码分析下）。

# java - Java 通配符不允许类型转换

> ID：12914401
> 
> 赞同：3
> 
> 时间：2012-10-16T12:10:31.313
> 
> 标签：java, generics, wildcard, upcasting

```
interface Message<T, L> {
}

interface Foo<T> {
    void frob(Message<T, Foo<?>> message);
}

class AuxiliaryFoo implements Foo<Integer> {
    @Override
    public void frob(Message<Integer, Foo<?>> message) { }
}

class MainFoo implements Foo<Object> {
    @Override
    public void frob(Message<Object, Foo<?>> message) {
        new AuxiliaryFoo().frob(new Message<Integer, MainFoo>() {});
    }
} 
```

Java 编译器告诉我`actual argument < anonymous Message< Integer, MainFoo >> cannot be converted to Message< Integer, Foo< ?>> by method invocation conversion`.

为什么？

什么可以转换为 Message< Integer, Foo< ?>> ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T12:14:04.003

你应该使用`<? extends Foo<?>>`

```
interface Foo<T> {     
    void frob(Message<T, ? extends Foo<?>> message); 
} 
```

另外，在处理泛型时值得牢记的是 PECS 规则：[Producer Extends，Consumer Super](https://stackoverflow.com/questions/252055/java-generics-wildcards)虽然它不直接属于这里，但我不能说它根本不属于这里..

# android - ActionBarSherlock spinner item background ignored

> ID：12914409
> 
> 赞同：1
> 
> 时间：2012-10-16T12:10:49.883
> 
> 标签：android, styles, spinner, actionbarsherlock

I have a share action item, and no matter what I do the spinner does not seem to respect the styles I set. I used the style generator here [http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

Here is a snippet of my themes file

```
<style name="Theme.Next" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarItemBackground">@drawable/selectable_background_next</item>
    <item name="popupMenuStyle">@style/next_PopupMenu</item>
    <item name="dropDownListViewStyle">@style/next_DropDownListView</item>
    <item name="actionBarTabStyle">@style/next_ActionBarTabStyle</item>
    <item name="actionDropDownStyle">@style/next_DropDownNav</item>
    <item name="actionBarStyle">@style/next_solid_ActionBar</item>

    <item name="android:actionBarItemBackground">@drawable/selectable_background_next</item>
    <item name="android:popupMenuStyle">@style/next_PopupMenu</item>
    <item name="android:dropDownListViewStyle">@style/next_DropDownListView</item>
    <item name="android:actionBarTabStyle">@style/next_ActionBarTabStyle</item>
    <item name="android:actionDropDownStyle">@style/next_DropDownNav</item>

    <!-- Light.DarkActionBar specific -->
    <item name="actionBarWidgetTheme">@style/Theme.next.widget</item>
    <item name="android:actionBarWidgetTheme">@style/Theme.next.widget</item>

</style>

<style name="next_DropDownNav" parent="@style/Widget.Sherlock.Spinner.DropDown.ActionBar">
        <item name="background">@drawable/spinner_background_ab_next</item>

        <item name="android:background">@drawable/spinner_background_ab_next</item>
        <item name="android:popupBackground">@drawable/menu_dropdown_panel_next</item>
        <item name="android:dropDownSelector">@drawable/selectable_background_next</item>
    </style>

<!-- this style is only referenced in a Light.DarkActionBar based theme -->
    <style name="Theme.next.widget" parent="@style/Theme.Sherlock">
        <item name="popupMenuStyle">@style/next_PopupMenu</item>
        <item name="dropDownListViewStyle">@style/next_DropDownListView</item>

        <item name="android:popupMenuStyle">@style/next_PopupMenu</item>
        <item name="android:dropDownListViewStyle">@style/next_DropDownListView</item>
    </style> 
```

spinner_background_ab_next points to a selector with my proper custom drawables. No matter what I change, the share spinner always uses the default ICS blue. Anyone run into this problem?

# curl - How to get timestamp of http response using curl

> ID：12914410
> 
> 赞同：3
> 
> 时间：2012-10-16T12:10:52.500
> 
> 标签：curl, http-headers

I am using curl to hit a server through an http post request and sending xml as request body, using the following piece of code :

`curl -X POST -d @path to xml file URL`

`Ex: curl -X POST -d @C:\docs\test.xml http://www.example.com`

which successfully returns the json http response as follows :

```
"header": {
    "product": "xxxxxxxxxx",
    "version": "xxxxxxxx"
},
"status": {
    "elapsedTime": 329,
    "httpReturnCode": 200,
    "statusCode": 0,
    "success": true,
    "startTime": 1350387905444,
    "statusDescription": "Successful"
}, 
```

But this json response doesn't show the endTime timestamp, the time at which the webservice call returns.

I know a way from curl to find out the response time of a url, using command :

`curl -o /dev/null -w "Connect: %{time_connect} TTFB: %{time_starttransfer} Total time: %{time_total} n" http://www.google.com`

The above command returns the response time in terms of milliseconds. Is there any way we can get the timestamp of http response using curl ? My requirement is to hit the server using http POST with a request body(XML file) and then get it response time in terms of timestamp. Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-12T08:44:47.887

解决此问题的一种方法是包含环境变量调用 curl 的时间。然后你可以计算你的响应时间的绝对时间。

在 Windows 中，这将是

```
curl.exe -o NUL -w "Time: %TIME% Connect: %{time_connect} TTFB: %{time_starttransfer} Total time: %{time_total}\n" http://www.google.com 
```

# php - How to get data from json array in JavaScript?

> ID：12914413
> 
> 赞同：0
> 
> 时间：2012-10-16T12:11:04.140
> 
> 标签：php, javascript, json

I have php function, that returns array to JavaScript like this:

```
    $data['first'] = 10;
    $data['second'] = 20;
    echo json_enocde($data);

```

In JavaScript the returned value is named response. I need to display the values and tried like this after reading about json:

```
        alert("First: " + response.first + " Second: " + response.second);

```

But this code only shows undefined values in places of response.first and response.second. If I write alert(response), then I get answer:

```
{"first":"10","second":"20"}

```

This means, that JavaScript is getting the information. How can I get the values separately from the json encoded array?

Regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:12:18.100

用于`JSON.parse()`将 JSON 字符串转换为 JavaScript 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:14:23.043

看起来您仍然有 JSON 字符串，并且没有将其解析为 JS 对象。使用[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)：

```
var jsonString = '{"first":"10","second":"20"}'; // from whereever
var obj = JSON.parse(jsonString);
alert("First: " + response.first + " Second: " + response.second);
alert(obj); // should now be "[object Object]" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T12:12:36.370

使用 eval like（不推荐）

```
var res = eval(response); //as you can see people are against it so I am editing the answer 
```

使用 JSON.parse()

或者如果你使用 jquery

```
jQuery.parseJSON(response); 
```

# iphone - about custom UItextField on iphone including delegates

> ID：12914414
> 
> 赞同：0
> 
> 时间：2012-10-16T12:11:09.260
> 
> 标签：iphone, objective-c

actually i want to create custom class for textfield and in that same class handling of all things like delegate,any other properties also.from controller only i need to call just a single method of that class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:33:03.050

您的意思是在您自己的类中使用 textfield 委托，以便可以使用 Textfield 方法？

尝试添加 `< UITextFieldDelegate >` 您的 .h 文件，例如：

```
@interface YourClass : NSObject <UITextFieldDelegate> 
```

希望这就是你要找的。

# iphone - How to bold particular word in multiline uilabel in iphone?

> ID：12914415
> 
> 赞同：0
> 
> 时间：2012-10-16T12:11:09.147
> 
> 标签：iphone, uilabel

> **Possible Duplicate:**
> [UILabel text Issue in iphone](https://stackoverflow.com/questions/9664294/uilabel-text-issue-in-iphone)

I have following text like this, Example: Offers Details: if users checkin from fb will get 20% discount and if share the this offers on twitter will get 30 % discount from businesses.

I above example I want to make 'Offers details' only bold rest of the text I want regular. How I can achieve this, I apply lot efferts to achieve this but not able to get proper solution for this. Please help me to achieve this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:55:25.153

在单标签中，如果您希望您可以执行以下操作以使特定标签变为粗体，则不可能代替此。

```
 UILabel* myBoldlabel= [[UILabel alloc] init];
 myBoldlabel.text=@"Offer Details"; 
 myBoldlabel.font = [UIFont boldSystemFontOfSize:16.0f];
 UILabel* finalLabel=[[UILabel alloc] init];
 finalLabel.text=[NSString stringWithFormat:@"%@:,if users checkin from fb will get 20%  discount and if share the this offers on twitter will get 30 % discount from businesses",myBoldlabel];// You can place %@ anywhere in the sentence...
 finalLabel.numberOfLines=2; 
```

如果你愿意应用任何特定的字体，你也可以这样添加——：

```
myBoldlabel.font = [UIFont fontWithName:@"TrebuchetMS-Bold" size:18]; 
```

希望这对您有所帮助。

# android - ocean wave effect using OpenGL in android

> ID：12914416
> 
> 赞同：2
> 
> 时间：2012-10-16T12:11:13.097
> 
> 标签：android, opengl-es

I am trying to develop a Game in android for that i need to have a ocean wave effect.I am using OpenGL ES 1.0 for the development.When i searched for the implementation examples and logic i have come across lots of mathematical calculation and all.something like calculating sum of sine function with specific amplitude and frequency and all ([http://http.developer.nvidia.com/GPUGems/gpugems_ch01.html](http://http.developer.nvidia.com/GPUGems/gpugems_ch01.html))

Sine Wave equation:\

```
W1=A1*sin(D1.(x,y)*w1+t*q1)

A1=amplitude of 1st wave
D1=direction of 1st wave
w1=frequency of 1st wave
t=time 
q1=phase constant q=speed*2P/Length. 
```

taking the sum of this equation will give the surface,

Surfce equation:

```
H(x,y,t)=W1+W2+W3.... 
```

and there are equations to calculate normal

So guys , how can i use these equations to calculate values for vertex array and normal array to render the ocean surface in my application...i would be most grateful if you people can give a code example or any help...

# xcode - 如何在 iPad 6 和 iPhone6 模拟器中停止正在运行的应用程序？

> ID：12914421
> 
> 赞同：0
> 
> 时间：2012-10-16T12:11:30.143
> 
> 标签：xcode

如何在没有按钮的情况下停止在模拟器 iPhone6 iPad6 上运行的应用程序/项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:22:14.667

您可以按`Shift`+ `Command`+`H`关闭应用程序。

要查看后台应用程序，请按住`Shift`+`Command`按钮，双击`H`。

# python - 如何在python中横向打印行？

> ID：12914423
> 
> 赞同：0
> 
> 时间：2012-10-16T12:11:37.350
> 
> 标签：python, formatting

我试图打印排序的行..

```
print accnt, '{}'.format(*file[line][0])#the year 1 .. Accnt.1 2004
print accnt, '{}'.format(*file[line][1])#the year 2 .. Accnt.1 2009 
```

输出文件是这样的：

```
File 1
Accnt.1 2004
Accnt.1 2009
Accnt.2 2001
Accnt.2 2005 
```

我怎样才能像这样打印它：

```
File 1
Accnt.1 2004 Accnt.1 2009
Accnt.2 2001 Accnt.2 2005 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:17:56.990

在 python 2.x 中使用尾随逗号，在 python 3.x 中使用`print(x,end=' ')`：

```
In [165]: l=[1,2,3,4,5,6]

In [166]: for x in l:
     ...:     print x,
     ...:     
1 2 3 4 5 6

In [167]: for x in l:
     ...:     print x
     ...:     
1
2
3
4
5
6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:15:59.953

如果您只想在一行上打印每个打印语句的每条记录，请在打印语句的末尾添加一个逗号：

```
print accnt, '{}'.format(*file[line][0]),
print accnt, '{}'.format(*file[line][1]) 
```

确保最后一行没有逗号，或者使用空打印语句在每个文件后打印换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:48:46.163

在此处从其他（正确）答案中借用一点：

虽然您可以使用`print foo,`来抑制换行符（在 python2.x 中）和`print(foo, end=' ')`在 python3.x 中，但我建议您直接写入`sys.stdout`. 这具有跨 python 版本的统一接口——

```
sys.stdout.write('accnt {0} accnt {1}\n'.format(file[line][0],file[line][1])) 
```

或者更简单地说：

```
sys.stdout.write('accnt {0} accnt {1}\n'.format(*(file[line])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:32:06.320

如果您不需要进行参数扩展，并且看起来不像您这样做，那么这可能会起作用。

```
print 'accnt {0} accnt {1}'.format(file[line][0],file[line][1]) 
```

# sql - Ruby CSV 从 MySQL 导出的 csv 中读取字符串和数字

> ID：12914426
> 
> 赞同：0
> 
> 时间：2012-10-16T12:11:42.297
> 
> 标签：sql, ruby, csv, fastercsv

我从 SQL 导出表和查询。

读取 csv 的 ruby​​ (1.9+) 方法似乎是：

```
require 'csv'

CSV.foreach("exported_mysql_table.csv", {:headers=>true}) do |row|
    puts row
end 
```

如果您的数据是这样的，这将非常有用：

```
"name","email","potato"
"Bob","bob@bob.bob","omnomnom"
"Charlie","char@char.com","andcheese"
"Doug","diggyd@diglet.com","usemeltattack" 
```

工作正常（第一行是标题，属性）。但是，如果数据是这样的：

```
"id","name","email","potato"
1,"Bob","bob@bob.bob","omnomnom"
2,"Charlie","char@char.com","andcheese"
4,"Doug","diggyd@diglet.com","usemeltattack" 
```

然后我们得到错误：

```
.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/csv.rb:1894:in `block (2 levels) in shift': Missing or stray quote in line 2 (CSV::MalformedCSVError) 
```

我认为这是因为 id 存储为数字，而不是字符串，因此没有引号，并且 csv 解析器希望所有条目都有引号。理想情况下，我想将“Bob”读为字符串，将 1 读为数字（并将其填充到哈希哈希中）

（尝试过“FasterCSV”，自 ruby​​ 1.9 以来，该 gem 变成了“csv”）

编辑：

有人指出该示例运行良好（derp），在错误的地方寻找，多行字段出错，问题移至[Ruby CSV 读取多行字段](https://stackoverflow.com/questions/12915383/ruby-csv-read-multiline-fields)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:26:19.690

使用您提供的输入，我无法重现此内容。

```
1.9.3p194 :001 > require 'csv'
 => true 
1.9.3p194 :002 > CSV.foreach("test.txt", {:headers => true}) { |row| puts row }
1,Bob,bob@bob.bob,omnomnom
2,Charlie,char@char.com,andcheese
4,Doug,diggyd@diglet.com,usemeltattack
 => nil 
```

我在我们的环境之间看到的唯一区别是您使用的是 rbenv，而我使用的是 RVM。我还在另一台装有 ruby​​ 1.9.3-p194 的机器上验证了这一点。您提供的输入是否与您的 csv 中的内容完全匹配？

# jquery - 始终指向相同的 url jquery 背景

> ID：12914430
> 
> 赞同：-1
> 
> 时间：2012-10-16T12:11:48.477
> 
> 标签：jquery, url

我怎样才能始终获得相同的 url，所以图像路径不会改变。如果域是 www.domain.com/cat 没关系，但是 www.domain.com/cat/cat 它指向 cat/images/img.jpg

```
"background-image" : "url(../images/" + photoObject.image + ")", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:12:52.547

当您使用“../”时，它的意思是“查看本文档的父目录”。

如果以“/”开头，则表示“从根目录开始查找”

例如，

```
"background-image" : "url(/images/" + photoObject.image + ")", 
```

如果站点的根目录是 /cat 然后使用

```
"background-image" : "url(/cat/images/" + photoObject.image + ")", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:21:39.433

您可以在 js 中定义一个全局变量，并为站点根目录分配根域。

网站主布局中的 MVC 示例：

```
<script type="text/javascript">siteRoot = '@Url.Content("~/")';</script> 
```

那么你可以像这样使用它：

```
"background-image" : "url("+siteRoot + "images/" + photoObject.image + ")" 
```

并且您的图像可以保持在同一位置，并且始终指向那里

# objective-c - ios 接口 iVar vs 属性

> ID：12914433
> 
> 赞同：11
> 
> 时间：2012-10-16T12:11:53.607
> 
> 标签：objective-c, ios

在 .h 文件中，有什么区别：

```
@interface ViewController : UIViewController
@property (strong, nonatomic) UIView* myView; 
```

和

```
@interface ViewController : UIViewController{
    UIView* myView;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T12:16:21.313

第一个是属性的声明，而第二个只是一个 ivar。属性是 ivar 的 getter 和 setter 的自动声明，但如果没有 ivar（如在您的第一个示例中），该属性也将创建 ivar。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T12:18:29.900

主要区别在于 @property 对其他对象是可见的，并且可以使用您的类的实例被这些对象访问。

你可以在你的实现文件中使用@synthesize 来在你的实现中自动定义de getter setter函数。

**更新**（遵循*@Graham Lee*的建议）

根据您的实例变量 (@protected / @private / @public) 的可见性说明符，ivar 可以在您的实现文件、子类或其他类中使用。隐含值是@protected，因此在您的示例中，您的实现文件和子类可以看到它。

# blackberry - 如何为 BlackBerry 10 准备旧的 Blackberry 应用程序？

> ID：12914435
> 
> 赞同：2
> 
> 时间：2012-10-16T12:12:01.847
> 
> 标签：blackberry

我们有几个 Blackberry 应用程序，现在正在尝试为 BB 10 准备它们。这些应用程序是通过 Eclipse 和/或 RIM IDE 工具用 Java 制作的。但是，当我访问[https://developer.blackberry.com/platforms/bb10](https://developer.blackberry.com/platforms/bb10)时，我发现根本没有提及 Java SDK。看看下面的图片。

![](../Images/269a60bdf76833c9acf16570d0387827.png)

那么我应该如何将黑莓应用程序更新到 BB 10？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T13:08:23.680

您必须决定如何处理您的应用程序。如果您有 Android 版本，一种选择是使用提供的工具集将 APK 重新打包到 BAR，以便它可以在 Android 播放器下运行。有许多优秀的 Android 应用程序可以通过这种方式提供可接受甚至良好的用户体验。另一种选择是将您的 BlackBerry Java 应用程序移植到 Android（如果没有现有的 Android 版本），然后为播放器打包 Android 版本。这也将允许您将应用程序推销给 Android 用户。最后一个选项是将 BlackBerry Java 应用程序移植到 Native SDK、Cascades、HTML5 或 Adob​​e Air。

最好的前进方式取决于您希望与 BB10 系统的紧密集成程度。虽然 BB10 中提供了与 BlackBerry OS 等效的功能，但仍需要进行重大更改才能实现每个人都希望在新平台上看到的改进。如果您将 BB10 视为您未来业务的重要组成部分，那么移植到 Cascades 将非常值得。

# iphone - 将 UIView 作为 SubView 添加到另一个 UIView

> ID：12914437
> 
> 赞同：1
> 
> 时间：2012-10-16T12:12:15.327
> 
> 标签：iphone, objective-c, ios, xcode

我有一个 UIView，我想向它添加另一个 UIView 作为子视图。

这就是我所做的：

```
- (IBAction)showVerification:(id)sender {
    [self.viewM addSubview: self.verificationView];
    [self.labelVerification setText:offerId];
} 
```

这是结果：

![在此处输入图像描述](../Images/2dda312f651e51fb9463e3646e99889b.png)

你能帮助我吗？是否不可能将 UIView 添加到 .xib 文件中的另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:49:50.937

See my images i have done same and nothing is moved in it

Two views

![Image 1](../Images/1bad4d5567813b86829709ec072f36bf.png)

After combining them just drag and drop it in side the view

![Image 2](../Images/f41809f543cc30f13c961947a1eb694e.png)

And in Simulator

![Image 3](../Images/6456e39cdf61dd2c03d890e8fd48988c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:16:53.480

您可以以编程方式进行：

```
UIView* view2 = [[UIView alloc]initWithFrame:CGRectMake(30, 100, 1024-30, 768-110)];
[self.view addSubView:view2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:58:32.863

您可以按照 Wolvorin 的建议进行操作，或者为该左视图设置一个`outlet`，然后将其添加到按钮事件的视图中

# cordova - AppLaud Cloud 有什么替代方案吗？

> ID：12914439
> 
> 赞同：0
> 
> 时间：2012-10-16T12:12:26.620
> 
> 标签：cordova, cloud

我正在使用 AppLaud Cloud 服务，但现在它已关闭，是否有任何替代或类似的服务？我一直在四处寻找没有运气

我喜欢这项服务，因为我能够立即在我的 Android 手机上运行我的 PhoneGap 应用程序，而无需搞乱存储库、提交、编译器和出版物，只需在线更改代码然后保存并完成，它已在我的电话真正他们的应用程序，仅此而已！太棒了！，现在我遇到了和以前一样的问题:(

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:51:11.770

你应该看看[Remy Sharp](http://remysharp.com/)做了什么。这是一个视频：

[https://www.youtube.com/watch?v=vsmJq7tU_2o](https://www.youtube.com/watch?v=vsmJq7tU_2o)

您下载他的[PhoneGapBin](https://build.phonegap.com/apps/185555)应用程序并将其连接到您的[JsBin](http://jsbin.com/welcome/1/edit)帐户，您可以在 JsBin 站点上编辑您的代码。

# ruby-on-rails - 如何将参数从 radio_button_tags 传递给控制器

> ID：12914440
> 
> 赞同：3
> 
> 时间：2012-10-16T12:12:33.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

这是我的表单，其中显示`feedbacks`了管理员尚未审核的所有内容：

我每个旁边有 2 个单选按钮，`feedback`用于选择接受或拒绝值`1`或`2`。

```
<% form_tag moderate_feedbacks_path, :method => :put do %>
  <table>
    <% @all_feedbacks.each do |feedback| %>
    <tr>
      <td><%= radio_button_tag :review_option, '1', false, :name => feedback.id %></td>
      <td><%= radio_button_tag :review_option, '2', false, :name => feedback.id %></td>
      <td><%= feedback.name %></td>
      <td><%= feedback.email %></td>
      <td><%= feedback.message %></td>
    </tr>
    <% end %>
   </table>
<%= submit_tag 'Apply' %>
<% end -%> 
```

我想要做的是当我单击时，使用该值`submit_tag`更新`review_option`每个选定的字段，或者`feedback``radio_button_tag``1``2`

我现在有你看到的表格，效果很好，但我被困在控制器部分：

```
def moderate_feedbacks
  Feedback.update_all(["review_option = ?", ????])
  redirect_to admin_feedbacks_path
end 
```

如何将这些单选按钮中的参数传递给控制器​​。谢谢你。

**ps** html源码：

```
<input id="review_option_1" name="3" type="radio" value="1">
<input id="review_option_2" name="3" type="radio" value="2"> 
```

名字取自`feedback.id`

当我按下 submit_tag 时的日志看起来像这样；

```
Processing Admin::FeedbacksController#moderate_feedbacks (for 127.0.0.1 at 2012-10-16 15:36:20) [PUT]
  Parameters: {"commit"=>"Apply", "3"=>"2", "4"=>"1"} 
```

其中 3 是反馈的 id - 2 是无线电值，4 是反馈的 id - 1 是无线电值

后`raise.params["feedback.is"].inspect`

```
Parameters:

    {"commit"=>"Apply",
     "3"=>"1",
     "4"=>"1",
     "_method"=>"put"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:07:56.877

好的，所以这是答案：

在**feedback.rb**

```
 class Status
     ACCEPTED = 1
     REJECTED = 2
   end 
```

**形式**：_

```
<% form_tag moderate_feedbacks_path, :method => :put do %>
  <table>
    <% @all_feedbacks.each do |feedback| %>
    <tr>
      <td><%= radio_button_tag :review_option, Feedback::Status::ACCEPTED, false, :name => feedback.id %></td>
      <td><%= radio_button_tag :review_option, Feedback::Status::REJECTED, false, :name => feedback.id %></td>
      <td><%= feedback.name %></td>
      <td><%= feedback.email %></td>
      <td><%= feedback.message %></td>
    </tr>
    <% end %>
   </table>
<%= submit_tag 'Apply' %>
<% end -%> 
```

在**feedbacks_controller.rb**

```
 def moderate_feedbacks
    params.each do |key, value|
      if key =~ /^r(\d+)/ && !value.blank?
        feedback_id = $1
        Feedback.update_all(["review_option = ?", value.to_i], ["id = ?", feedback_id])
      end
    end
    redirect_to admin_feedbacks_path
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:34:01.023

当我不确定如何在参数中传递数据时，我喜欢做的是在控制器中引发异常。开发异常处理程序输出有关参数内容的非常好的信息。我什至可以为我的异常添加一个 .inspect 并查看详细信息。

```
def update
  raise "some string"
end 
```

或者

```
def update
  raise params["feedback.id"].inspect
end 
```

另请注意，radio_button_tag 的第一个参数是名称，因此您不必在选项中传递它。

# mysql - 0000-00-00 00:00:00 输入为 MySQL DateTime

> ID：12914446
> 
> 赞同：5
> 
> 时间：2012-10-16T12:12:45.683
> 
> 标签：mysql

下面是用于创建我的表的 CREATE TABLE 语句：

```
CREATE TABLE IF NOT EXISTS `data_received` (
 `id` int(10) unsigned NOT NULL,
 `edit_time` datetime NOT NULL} 
```

如果未提供“edit_time”值，以下是如何将数据保存在表中：

```
id  edit_time
1   0000-00-00 00:00:00 
```

现在，如果我执行以下语句：

```
SELECT TIMESTAMPDIFF( HOUR , edit_time, NOW( ) ) AS diff_in_hours
FROM data_received; 
```

我得到结果：`NULL`

有人可以帮我理解发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:17:58.423

那是因为**`0000-00-00 00:00:00`**不是`DATETIME`函数接受的有效表达式。

请检查[文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:18:13.633

使用此方法在 mysql 中保持编辑时间

```
`edit_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Auto-update time' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T12:24:19.583

Mysql倾向于插入垃圾以试图“提供帮助”。最好通过将 mysql 设置为 STRICT 模式来告诉它不要这样做，这样它的行为就更像一个数据库。

```
SET sql_mode='STRICT_ALL_TABLES' 
```

详情请阅读[手册](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T12:18:15.837

`0000-00-00 00:00:00`可能会被解释为`null`. 并且比较会导致`null`结果。`TIMESTAMPDIFF``null`

MySQL 文档说

> 在 MySQL 中，零日期被定义为 '0000-00-00'，即使这个日期本身被认为是无效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T12:19:10.050

零年没有零的零，因此您无法计算从那时起的时间：

```
SELECT TIMESTAMPDIFF(HOUR, '0000-00-00 00:00:00', NOW()) 
```

> 空值

显然 MySQL 对第 0 年本身没有问题，因为这会返回结果：

```
SELECT TIMESTAMPDIFF(HOUR, '0000-01-01 00:00:00', NOW()) 
```

> 17643758

# php - apc_fetch() 返回 FALSE，尽管密钥在 APC-Cache 中是已知的

> ID：12914447
> 
> 赞同：0
> 
> 时间：2012-10-16T12:12:47.607
> 
> 标签：php, caching, symfony, apc

我在 APC 上遇到了一个小而奇怪的问题。在我们的代码中，我们必须从 json 反序列化数百个大数组，这个操作非常昂贵。现在我尝试反序列化并将数组存储在 APC 中，但 apc_fetch() 在下一次请求时返回 false。

```
$items = $entity->getItems();  // JSON-String

$cacheKey = __FUNCTION__ . '_itemcache_' . $entity->getId() . '_' . md5($items);
$cacheItems = apc_fetch($cacheKey);

if(false === $cacheItems) {
    $cacheItems = json_decode($items, true);
    apc_store($cacheKey, $cacheItems, 3600);
}

// ... 
```

我可以在 apc.php 中看到所有缓存的项目，我还可以从具有相同服务器配置的其他应用程序中获取它们。有什么问题？这个片段取自一个 symfony 项目，但我可以看到没有任何其他 apc 代码在使用中。

有任何想法吗？我已经在这里和谷歌上搜索过，但没有发现任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:05:09.063

您应该检查以下参数：

```
apc.max_file_size = 512M 
```

和其他几个。另请注意，APC 并非用于处理单个大变量。对于大数据，最好的选择是使用数据库。

# java - 我应该在何时何地使用 close() 方法来避免 ObjectInputStream 中的 IOException？

> ID：12914454
> 
> 赞同：0
> 
> 时间：2012-10-16T12:13:12.470
> 
> 标签：java, sockets, networking, tcp, objectinputstream

我正在尝试通过 tcp 从客户端程序中读取对象。正如您在这一行中看到的，我创建了 objectInput：

```
ObjectInputStream objectInput = new ObjectInputStream(incoming.getInputStream()); 
```

然后从另一个程序中读取我的输入。它曾经工作正常，直到我做了一些小改动来清理程序。个人假设我添加了

```
objectInput.clsoe(); 
```

我的问题是，在读取对象后，我应该关闭 objectInputStream 还是保持不关闭？我应该在使用后立即关闭它还是在 if 块结束时或程序结束时关闭它？关闭有什么影响？顺便说一句，我已经阅读了关闭文档。

这是错误：

```
java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2280)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2749)
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:779)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:279)
    at Server.ClientWorker.run(MyCollectionServer.java:116)
    at java.lang.Thread.run(Thread.java:680) 
```

这是我的代码：

```
 public static void main(String[] args) {
        ServerSocket serverSocket = null;
        try 
        {
            serverSocket = new ServerSocket(port);  
        } 
        catch (IOException e) 
                {
            e.printStackTrace();
        }
        while(true)
        {   
            ClientWorker w;
            try
            {   
                w = new ClientWorker(serverSocket.accept());
                Thread t = new Thread(w);
                t.start();
            }
            catch(IOException e)
            {
                e.printStackTrace();
                break;
            }   
        }
    }
}

class ClientWorker implements Runnable
{
.....
    private Socket incoming;
    public ClientWorker(Socket incoming)
    {
        myList = new ArrayList<PureAlbum>();
        loadList();
        this.incoming = incoming;
    }

.....
    public synchronized  void run()
    {

else if(request.compareTo("AddAlbum")==0)
        {
            try
            {
                ObjectInputStream objectInput = new ObjectInputStream(incoming.getInputStream()); //This is the line mentioned in the error
                PureAlbum object = (PureAlbum) objectInput.readObject();

                if(object instanceof CDAlbum)
                {
                    CDAlbum a = (CDAlbum) object;
                    myList.add(a);
                    System.out.println("Artist = " + a.getArtist());
                }
                else if(object instanceof Client.au.edu.uow.Collection.DVDAlbum)
                {
                    myList.add((DVDAlbum) object);              
                }
                else
                {
                    System.err.println("Warning : The object to add to database is unknown! "+ object.getClass() + "*");
                    System.exit(0);
                }

            }
            catch (UnknownHostException e) 
            {
                System.err.println("Can not read the host name");
                e.printStackTrace();
            } 
            catch (IOException e) 
            {
                System.err.println("Can not read the FILE name"); //This exception has been called
                e.printStackTrace(); 
            }
            catch (ClassNotFoundException e) 
            {
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:21:27.567

您的代码片段很长，因此我将尝试给您一个一般性的答案，希望对您有所帮助。

`stream.close()`java 7之前的典型使用模式是：

```
InputStream in = null; 
try {
    InputStream in = .....; // create your input stream;
    // use input stream
} catch (IOException e) {
    // do what you need here
} finally {
    if (in != null) {
        in.close();
    }
} 
```

或者简单地将方法声明为`throws IOException`，然后编写：

```
InputStream in = null; 
try {
    InputStream in = .....; // create your input stream;
    // use input stream
} finally {
    if (in != null) {
        in.close();
    }
} 
```

请注意，此示例不包含`catch`节。

从 java 7 开始，我们可以享受该语言的新功能：

```
try (
    InputStream in = .....; // create your input stream;
) {
    // use input stream
} 
```

你甚至根本不需要打电话`close()`。定义在 try 块头中实现接口的所有资源`Closable`将被自动关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:47:28.413

这行堆栈跟踪显示异常是在初始化时发生的`ObjectInputStream`，而不是在关闭时发生的。

```
at java.io.ObjectInputStream.<init>(ObjectInputStream.java:279) 
```

最可能的原因是远程客户端没有打开`ObjectOutputStream`. 它可能已经写入了一些其他类型的数据，或者它可能已经关闭了它的输出流或只是退出了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:19:17.147

完成阅读或写作后，您应该关闭 Stream。在这种情况下，您应该在完全读取文件并且不再需要从流中读取文件后关闭 InputStream。

简而言之，您应该在 Stream 工作结束时关闭它。它可能在程序结束或 if 循环之后......取决于您的用例。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T23:59:27.550

我这样做（不同的例子）：

```
private void readFile() throws Exception {
    FileInputStream fis = null;
    ObjectInputStream ois = null;
    Object aux = null;

    try {

        fis = new FileInputStream("lib.dat");
        ois = new ObjectInputStream(fis);

        do {
            aux = ois.readObject();
            if (aux instanceof MyObject)
                this.myObjectInstance.add((MyObject) aux);
        } while (true);

    } catch (EOFException e) {
        ois.close();
    }
} 
```

这样，我将在楼上发送任何相关的“错误”异常以进行处理，一旦 EndOfFileException 启动，就会专门捕获该异常以正确关闭流。

该对象必须在 Try 块之外定义，才能从 Catch 块访问。

close() 方法也可以抛出一个 IOException，这不能被我们的 Try 块捕获，这必须由 readFile() 方法的通用“抛出异常”传递。

# matlab - 将 PDE 的解向量转换为分段线性函数 - MATLAB

> ID：12914458
> 
> 赞同：0
> 
> 时间：2012-10-16T12:13:31.517
> 
> 标签：matlab, pde

我知道当我使用 Matlab 中的 PDE 工具箱求解 PDE 时，结果是一个向量，它表示网格每个顶点中函数的值。

> PDE 工具箱中是否有命令可以将向量解转换为定义域上的分段线性函数，以便我们可以像 u(x,y) 一样使用它来直接找到近似值(x,y)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:41:41.063

我不知道这样的功能。但是您的解决方案是在结构化的矩形网格上定义的。如果您只需要在 2D 矩形网格上插入数据，您可以使用`interp2`它。如果您的网格由三角形组成，请使用`TriScatteredInterp`. 如果你想使用不同的插值（例如，FEM），你必须自己实现它。

# visual-studio-2012 - Visual Studio 2012 中缺少程序集（但它就在那里！老实说！）

> ID：12914459
> 
> 赞同：1
> 
> 时间：2012-10-16T12:13:32.407
> 
> 标签：visual-studio-2012, .net-assembly, reactiveui

我有一个使用 Reactive Extensions 和 ReactiveUI 的项目。我升级到预发布版本，我有以下代码行

```
 OAPHCreationHelperMixin.ObservableToProperty(observable,
                                                 Function(x) x.Value 
```

Visual Studio 告诉我 ObservableToPropertyin 方法有一个错误，即缺少以下程序集

```
 Error   9       
    C:\Users\phelan\workspace\WeinMeasEval\WeinMeasEval\Global\ObservableBinding.vb 
    Reference required to assembly 
    'System.Reactive.Interfaces, 
    Version=2.0.20823.0, 
    Culture=neutral, 
    PublicKeyToken=31bf3856ad364e35' 
    containing the type 'System.Reactive.Concurrency.IScheduler'. Add one to your project. 
```

现在我单击链接，该链接表明它将添加参考，然后什么也没有发生。如果我查看我的项目引用，我发现程序集确实在程序集列表中，并且它是正确的版本 2.0.20823.0，如果我查看路径，DLL 确实在那里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:21:39.160

现在已修复，请查看 ReactiveUI 4.0 Preview 5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:26:42.253

事实证明，**目前**还没有为 .NET 4.5 构建响应式 UI，因为开发人员遇到了一些构建问题。

作为一种解决方法，我通过从 Git 中提取存储库并直接从我的 .NET 4.5 项目中引用核心库来自己构建它。

目前这似乎有效。YMMV

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:39:32.503

您是否将目标框架设置为完整的 .net 或客户端配置文件（在项目设置中）？

# html - 在 div 旁边放置文本

> ID：12914462
> 
> 赞同：0
> 
> 时间：2012-10-16T12:13:44.060
> 
> 标签：html, xml, xslt

我正在使用 XSLT 将 XML 转换为 HTML。在下面的代码中，我试图在栏的末端（即右侧）显示栏的宽度。但由于用于创建栏的 div 标签，该值正在移动到下一行，如附图所示。请帮忙把它放在右边。

```
<xsl:for-each select="catalog/cd/price">
Current node:
<xsl:variable name="maxbars" select="."/>
<div style="width: {$maxbars}%; height: 18px; background-color: blue"></div>
<xsl:value-of select="."/>
<br>
</xsl:for-each>

<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
</cd> 
```

![在此处输入图像描述](../Images/61c67c303d25026374d8d821054bafec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:17:44.370

用于`float:left`DIV 并删除`<br>`-

```
<div style="width: {$maxbars}%; height: 18px; background-color: blue; float: left;"></div>
<xsl:value-of select="."/>

</xsl:for-each>

<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
</cd> 
```

# forms - Symfony2整数类型和NotBlank约束同时触发

> ID：12914464
> 
> 赞同：1
> 
> 时间：2012-10-16T12:13:50.707
> 
> 标签：forms, symfony, constraints, assertion

我正在尝试使用 NotBlank 和 Type 约束验证表单中的字段。我的问题是，当我输入与类型不匹配的值时，都会显示两条错误消息。我已经看到其他建议将字段类型更改为文本的答案。
不幸的是，将字段类型更改为文本并将约束保留为整数类型会一直引发验证错误。
有谁知道这个问题的任何解决方案？我正在使用 Symfony 2.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:55:04.403

您在与该字段匹配的实体属性中分配了什么类型？

# arrays - 使用 AC3 绘制 3D 网格？

> ID：12914465
> 
> 赞同：1
> 
> 时间：2012-10-16T12:13:54.730
> 
> 标签：arrays, flash, grid, action

[这就是我想要的样子...检查链接](http://postimage.org/image/3ot3j85l9/)

我正在尝试为我正在开发的游戏创建这样的网格。知道如何使用 AC3 做到这一点吗？

[这就是现在的样子...检查链接](http://postimage.org/image/cqjuu6cdx/)

这就是它现在的样子，基本上我想把它变成一个 3d 网格。这是我所做的编码：

```
function generateField():void

var colors:Array = new Array("0xCCCCCC","0x666666");
fieldArray = new Array();
var fieldSprite:Sprite = new Sprite();
addChild(fieldSprite);
fieldSprite.graphics.lineStyle(0,0x000000);
for (var i:uint=0; i<20; i++)
{
    fieldArray[i] = new Array();
    for (var j:uint=0; j<10; j++)
    {
        fieldArray[i][j] = 0;
        fieldSprite.graphics.beginFill(colors[(j%2+i%2)%2]);
        fieldSprite.graphics.drawRect(TS*j,TS*i,TS,TS);
        fieldSprite.graphics.endFill();
    }
} 
```

非常感谢您的帮助。

# visual-studio-2010 - 在使用 2010 的团队中使用 Vs2012

> ID：12914466
> 
> 赞同：0
> 
> 时间：2012-10-16T12:13:57.537
> 
> 标签：visual-studio-2010, visual-studio-2012

如果我是我团队中唯一使用 vs2012 的人，我是否可以假设只要我针对使用 2010 的其他同事的框架版本 4 就没有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:17:29.617

是的！

我正在构建共享点应用程序，并不断从 vs 2010 和 VS 2012 切换，即使在同一台计算机上也没有问题。

Microsoft 有一个好主意，即以两种方式保持项目和解决方案的兼容性。

您应该仔细考虑，项目类型是兼容的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:20:58.497

是的，它应该可以正常工作。只需确保您的同事安装了 SP1 (VS2010)。

# java - 如何在扩展 Button 的类中使用 SoundPool？

> ID：12914468
> 
> 赞同：0
> 
> 时间：2012-10-16T12:13:59.723
> 
> 标签：java, android, button, soundpool

> **可能重复：**
> [使用 SoundPool 播放声音](https://stackoverflow.com/questions/6396711/play-sound-with-soundpool)

如何设置 SoundPool，我尝试了通常的方式，但没有播放声音。音乐文件没有问题。我希望声音在 Action_Down 上播放并在 Action_up 处停止。Mediaplayer 工作，但按钮响应延迟。

```
package dubpad.brendan;

import android.content.Context;
import android.media.MediaPlayer;
import android.util.AttributeSet;

import android.view.MotionEvent;
import android.widget.Button;

public class TestButton3 extends Button {
MediaPlayer mpButtonClick;

public TestButton3(final Context context, final AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onTouchEvent(final MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {

    }
    if (event.getAction()==MotionEvent.ACTION_UP){

    }
    return super.onTouchEvent(event);
}
} 
```

# cakephp - cakephp 在动态表上找到

> ID：12914472
> 
> 赞同：0
> 
> 时间：2012-10-16T12:14:06.967
> 
> 标签：cakephp, dynamic, find, cakephp-2.1

我有 5 张桌子：

1.  表单->（字段：id，名称）HasMany（表单）

2.  Field -> (fields : id , type , name , form_id) HasMany (Fvarchar,Ftext,Ftinyint) BelongsTo (Form)

3.  Fvarchar -> (fields : id , value , field_id) BelongsTo (Field)

4.  Ftext -> (fields : id , value , field_id) BelongsTo (Field)

5.  Ftinyint -> (fields : id , value , field_id) BelongsTo (Field)

我想查找表单，`Field[name]->Fvarchar,Ftext,Ftinyint[value]`但现在当我尝试查找表单时，我的结果如下：

```
$this->Form->find('all',array('contain' => array('Field'=>array('Fvarchar','Ftext','Ftinyint'))

'Form' => array(
            'id' => '1',
            'name' => 'mobile',
            'Field' => array(
                (int) 0 => array(
                    'name' => 'bluetooth',
                    'type' => 'Ftinyint',
                    'id' => '1',
                    'form_id' => '1',
                    'Ftext' => array(),
                    'Fvarchar' => array(),
                    'Ftinyint' => array(
                        (int) 0 => array(
                            'value' => true,
                            'id' => '2',
                            'field_id' => '1'
                        )
                    )
                ), 
```

但我想用 Field[type] 过滤表（Ftext，Fvarchar，Ftinyint）：

```
'Form' => array(
            'id' => '1',
            'name' => 'mobile',
            'Field' => array(
                (int) 0 => array(
                    'name' => 'bluetooth',
                    'type' => 'Ftinyint',
                    'id' => '1',
                    'form_id' => '1',
                    'Ftinyint' => array(
                        (int) 0 => array(
                            'value' => true,
                            'id' => '2',
                            'field_id' => '1'
                        )
                    )
                ), 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:00:49.820

我很难理解您的问题是什么（抱歉，我可以看到英语不是您的第一语言）但我将其解释为您想要包含 Field 模型的意思，其中类型是您拥有的这三个模型之一指定的？

这有帮助吗？

```
$this->Form->find('all',array(
    'contain' => 'Field',
    'conditions' => array(
        'Field.type' => array(
            'OR' => array('Fvarchar', 'Ftext', 'Ftinyint')
        )
    )
)); 
```

当然，未经测试。但类似的东西。

# c# - 如何在 ASP.NET 中显示 OpenFileDialog 类？

> ID：12914473
> 
> 赞同：1
> 
> 时间：2012-10-16T12:14:06.510
> 
> 标签：c#, asp.net, openfiledialog

我想在我的 ASP .NET Web 应用程序中显示一个 OpenFileDialog 框。我正在用 c# 编写。我想创建一个带有图像的用户帐户，因此我需要从计算机中选择图像并将其保存到数据库中。我该如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T12:18:23.023

您**可以**使用

```
 <input type="file"  id="fileLoader" name="files" title="Load File" ... 
```

通常的技巧是让它*不可见*，并在点击一些*可见*的工件（`styled link`, `image`, `button`... 不管）时*模拟*点击`fileLoader`：

```
 $("#fileLoader").click(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:15:25.610

你不能。`OpenFileDialog`是桌面应用程序的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T12:16:35.777

你不能在 ASP.NET 中使用那个 Windows Forms 类，你应该使用[FileUpload 类/控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)。

或查看其他替代方法：[在 ASP.net 中上传文件而不使用 FileUpload 服务器控件](https://stackoverflow.com/questions/569565/uploading-files-in-asp-net-without-using-the-fileupload-server-control)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T15:40:31.480

与上面的 Tigran 几乎相同，但我发现我需要稍微更改 JavaScript 以使用 getElementById("...") 来识别单击（）的按钮。如果我只是在 HTML/CSS Tigran 的代码中执行此操作，则效果很好，但是当我在 .aspx 文件中使用它时，我需要进行更改。

.aspx

```
<input type="file" id="fileLoader" name="files" title="Load File" />   
<asp:Button ID="LoginButton" runat="server"  Text="ASP click Me" onclientclick="openfileDialog()"  /> 
```

JavaScript

```
function openfileDialog() {
         document.getElementById("fileLoader").click();
     } 
```

css

```
#fileLoader{
display:none;} 
```

# javascript - Javascript：使用带有行的函数

> ID：12914476
> 
> 赞同：1
> 
> 时间：2012-10-16T12:14:24.013
> 
> 标签：javascript, html

我有一张用 JavaScript 生成的数据表。每行的末尾是一张图片，可以点击。单击时，会出现一个弹出窗口，其中包含基于该行的信息。

我在这里使用第二个示例：[http ://www.abidibo.net/projects/js/moopopup/demo](http://www.abidibo.net/projects/js/moopopup/demo)

基本上，我现在的设置方式是这样的：

功能;

```
 function popup() {

    var mp_instance = new moopopup({ 
        overlay: true, 
        title: 'Copy server address', 
        html_node: 'mynode',
    }); 
    mp_instance.display();
} 
```

使用最初隐藏的 div 使弹出窗口出现

```
<div id="mynode" style="display:none">Content.</div> 
```

然后图像使用 onclick 使弹出窗口运行。

```
onclick='popup();' 
```

现在这适用于静态数据，但是每一行都有我想放入弹出窗口的不同内容。所以我很困惑如何让每个弹出窗口单独出现在行中，而不是在最后创建带有 ID 的函数负载，这些函数基本上都做同样的事情。

[http://www2.lethal-zone.eu/servers/tf2-servers](http://www2.lethal-zone.eu/servers/tf2-servers)

每行末尾的图像；单击时会显示一些额外的内容...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:25:35.790

您通常希望将一些信息作为参数传递给一个函数，然后使用这些参数来选择内容。例如，将一些 ID 传递给函数：

```
onclick="popup(1);"

function popup(id) {
    // do something with id to choose the content
    // snip...
} 
```

# nant - 编写能够使用过滤器的自定义 NAnt 任务

> ID：12914477
> 
> 赞同：3
> 
> 时间：2012-10-16T12:14:26.930
> 
> 标签：nant

我正在尝试编写一个自定义 NAnt 任务来执行一些基于文件的操作。其中一件非常有用的事情是能够`<expandproperties>` 在其中一个输入文件上运行过滤器。

为了使任务保持适当的通用性，我只想启用对`<filterchain>`元素的支持（类似于`<copy>`任务的工作方式）。

我一直在使用`<copy>`任务的源代码来指导我，但是在编写任务时我不断地遇到内部方法。我知道我可以使用反射来打破封装，但我不愿意这样做。

有没有人知道任何有用的文章，或者有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:05:15.313

我开始创建一个私有过滤器子类，该子类采用 TextReader（基本上是在 NAnt 源中重新创建 PhysicalTextReader）。但是我意识到，实际上，通过过滤器链读取文件有一种更简单的方法：

```
[TaskName("mytask")]
public class MyTask : Task
{
    /// <summary>
    /// Chain of filters used to alter the input file's content as it is read.
    /// </summary>
    [BuildElement("filterchain")]
    public FilterChain Filters { get; set; }

    /// <summary>
    /// The input file.
    /// </summary>
    [TaskAttribute("input")]
    public FileInfo InputFile { get; set; }

    protected override void ExecuteTask()
    {
        Log(FileUtils.ReadFile(InputFile.FullName, Filters, null));
    }
} 
```

然后您可以完全按照您的预期使用它：

```
<mytask input="foo.txt">
    <filterchain>
        <expandproperties />
    </filterchain>
</mytask> 
```

# ios - PDFKitten 在错误的位置突出显示

> ID：12914479
> 
> 赞同：5
> 
> 时间：2012-10-16T12:14:40.550
> 
> 标签：ios, pdf, cgpdfdocument

我正在使用[PDFKitten](https://github.com/KurtCode/PDFKitten)在 PDF 文档中搜索字符串并突出显示结果。FastPDFKit 或任何其他商业库是没有选择的，所以我坚持使用最接近我的要求的库。

![坐标错误](../Images/74bd6169f54d45f0b9d2596f542ed47d.png)

正如您在屏幕截图中看到的那样，我搜索了字符串“in”，除了最后一个之外，它始终正确突出显示。我得到了一个更复杂的 PDF 文档，其中突出显示的“in”框几乎有 40% 错误。

我阅读了整个语法并检查了问题跟踪器，但除了行高问题之外，我没有发现关于宽度计算的任何信息。目前我没有看到任何计算方式或可能出错的模式，我希望也许其他人有一个与我密切相关的问题。

我目前的期望是在字体类或 RenderingState.m 中某处计算的坐标和字符宽度是错误的。该项目非常复杂，也许你们中的某些人过去曾遇到过与 PDFKitten 类似的问题。

我使用了来自 PDFKitten 的原始示例 PDF 文档作为我的截图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:49:27.730

在计算字符标识符与其 unicode 字符代码不一致的字符宽度时，这可能是 PDFKitten 中的一个错误。

StringDetector 中的 appendPDFString 在处理一些字符串数据时使用两个字符串：

```
// Use CID string for font-related computations.
NSString *cidString = [font stringWithPDFString:string];

// Use Unicode string to compare with user input.
NSString *unicodeString = [[font stringWithPDFString:string] lowercaseString]; 
```

Font 中的 stringWithPDFString 将其参数的字符标识符序列转换为 unicode 字符串。

因此，尽管有变量名，cidString 不是字符标识符序列，而是 unicode 字符。尽管如此，它的条目被用作 didScanCharacter 的参数，在 Scanner 中实现了通过字符宽度转发位置：它使用值作为字体中 widthOfCharacter 的参数来确定字符宽度，以及该方法（根据评论“宽度给定字符 (CID) 的缩放到 fontsize") 期望其参数是字符标识符。

因此，如果 CID 和 unicode 字符代码不重合，则会确定错误的字符宽度，并且无法信任任何后续字符的位置。在本例中，/fi 连字的 CID 为 12，这与其 Unicode 代码 0xfb01 大不相同。

我建议对 PDFKitten 进行增强，以便在 StringDetector 中定义一个 didScanCID 方法，对于转发其 CID 的每个已处理字符，应在 appendPDFString 旁边调用该方法。然后扫描仪应该使用这种新方法来计算向前光标的宽度。

不过，这应该首先进行三重检查。尽管有注释，但可能有一些 widthOfCharacter 实现（对于不同的字体类型有不同的实现）期望参数毕竟是一个 unicode 代码......

（对不起，如果我在这里或那里使用了错误的词汇，我是一个'Java人...... :)）

# asp.net-mvc - 淘汰赛：选择元素选项绑定 + 值绑定 + optionsCaption 绑定 + 后期 ajax 响应 = 怪异

> ID：12914483
> 
> 赞同：1
> 
> 时间：2012-10-16T12:14:50.313
> 
> 标签：asp.net-mvc, asp.net-mvc-3, knockout.js, asp.net-mvc-4, knockout-2.0

`select`考虑元素上的以下 ko 绑定：

```
<select data-bind="value: valueObservable, options: optionsObservableArray, 
    optionsCaption: '[None] - this is an optional field'"> 
```

...给定如下视图模型：

```
function MyViewModel()
{
    var self = this;
    self.valueObservable = ko.observable();
    self.optionsObservableArray = ko.observableArray();

    // ajax call to load options
    ko.computed(function() {
        $.ajax(...)
        .success(function(optionsResponse) {
            self.optionsObservableArray(optionsResponse)
        });
    });

    // ajax call to load data value
    ko.computed(function() {
        $.ajax(...)
        .success(function(valueResponse) {
            self.valueObservable(valueResponse)
        });
    });
} 
```

奇怪的是，第二个（数据）ajax 调用在第一个（选项）ajax 调用之前返回。由于`select`元素具有`optionsCaption`绑定，这就是我认为正在发生的事情：

1.  数据 ajax 调用完成，将 设置`valueObservable`为某个值（如 6、abc 或其他一些非假值）。
2.  因为元素中只有 1 `option`（`select`由于`optionsCaption`），并且因为`valueObservable`绑定到它（通过`value`绑定），所以这会导致`valueObservable`被更改为`undefined`。
3.  最后，`optionsObservableArray`完成并向 中添加新`option`元素`select`，但此时为时已晚：`valueObservable`现在包装的是一个`undefined`值，而不是第一次 ajax 调用返回的真实数据值。

问题：解决此问题的最佳方法是什么？这是我能想到的：

1.  使第一个 ajax 调用使用`async: false`. 这可能会减慢页面呈现速度。
2.  创建一个单独的 observable 以绑定到选择值（例如`value: selectedValueObservable`）。然后订阅`optionsObservableArray`并使用订阅执行类似的操作`self.selectedValueObservable(self.valueObservable())`。这似乎是一个创可贴修复。
3.  通过从服务器发送选项数据（使用 MVC 视图模型），在执行任何 javascript 之前将选择和选项呈现到页面。这使得将选项作为`observableArray`.

**更新**

为了简化示例代码，我从这个问题中省略了另一个问题。实际上，此视图模型用于创建可编辑的数据项列表。所以实际上有超过 1 个下拉列表被渲染到页面。data ajax 调用确实返回了一个数组，它的成功函数确实设置了一个`observableArray`复杂的项。由于下拉列表选项在每个内联表单中都重复使用，因此它被放置在`$parent`视图模型上并且只加载一次。在单个 ajax 调用中传递选择选项也很困难，因为数据项是通过 WebAPI 检索的（它返回一个`IEnumerable`，没有空间发送额外的下拉选项）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:44:16.600

有什么理由不先进行ajax调用并在完成时应用绑定吗？

```
$.when(getOptions(), getData()).done(bind) 

function getOptions() { 
    return $.ajax(...).success(vm.optionsObservableArray)
}

function getData() {
    return $.ajax(...).success(vm.valueObservable)
}

function bind() {
    ko.applyBindings(vm, document.getElementById('elem')) 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:29:11.400

如果可能的话，我建议您进行一次 ajax 调用。使您的控制器返回具有对象数组和选定值的复杂对象：

```
// ajax call to load options and data value
ko.computed(function() {
    $.ajax(...)
    .success(function(response) {
        self.optionsObservableArray(response.options);
        self.valueObservable(response.value);
    });
}); 
```

如果无法合并两个 ajax 调用，您可以将第二个 ajax 调用放到第一个 ajax 的成功回调中：

```
// ajax call to load options
ko.computed(function() {
    $.ajax(...)
    .success(function(optionsResponse) {
        self.optionsObservableArray(optionsResponse)

        // ajax call to load data value
        $.ajax(...)
        .success(function(valueResponse) {
             self.valueObservable(valueResponse)
        });
    });
}); 
```

# java - InputStream 超时

> ID：12914484
> 
> 赞同：0
> 
> 时间：2012-10-16T12:14:53.917
> 
> 标签：java, android, sockets

有没有办法为 InputStream 设置超时？

我当前的代码如下所示：

```
public class DownloadFile implements Runnable {
private EventHandler eh;
private String source;
private String destination;

public void run(){
    try {
        Log.d("Download", "Download... " + source);
        URL url = new URL(source);

        URLConnection connection = url.openConnection();
        connection.connect();

        int fileLength = connection.getContentLength();

        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream(destination + "t"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:21:39.940

我认为对于您的要求，您可以使用

```
HttpURLConnection.setReadTimeout() 
```

Mab be 这些链接将对您有所帮助。

1.  [是否可以从 Java InputStream 中读取超时？](https://stackoverflow.com/questions/804951/is-it-possible-to-read-from-a-java-inputstream-with-a-timeout)
2.  [类 HttpURLConnection](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/HttpURLConnection.html)
3.  [我可以为 InputStream 的 read() 函数设置超时吗？](https://stackoverflow.com/questions/2638283/can-i-set-a-timeout-for-a-inputstreams-read-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:20:27.600

您可以启动一个 AsyncTask 或仅启动一个单独的线程并将其休眠超时时间，然后检查事务是否已准备好。或者更好的是，您可以向 Handler 发布延迟消息，然后检查您的任务是否准备就绪。您也可以使用计时器，但我认为 Handler 解决方案是最优雅的。

看看这个：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# c# - 什么样的设计模式适合 LOAD-CONVERT-WRITE 之类的场景？

> ID：12914493
> 
> 赞同：1
> 
> 时间：2012-10-16T12:15:33.153
> 
> 标签：c#, .net, design-patterns

我不想重新发明轮子。

是否有适合以下工作流程的设计模式或模式。想法是有一个适合所有人的**通用解决方案：加载数据->转换它->写入转换的**

喜欢：

(1) **LOAD DATA** : 从 DataSource 加载数据并产生一个 IEnumerable

(2) **COVNERT LOADED DATA** - 遍历加载的数据，并根据转换逻辑将它们转换为 TConverted 类型

(3) **WRITE CONVERTED DATA** - 遍历 IEnumerable 并将每个项目写入 .txt 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:39:33.167

“模板方法”模式可以帮助您构建一个通用框架，该框架可用于为不同类型的数据实现此过程。会有一个像这样的抽象基类：

```
public abstract class ETLProcess {
    public final runETL() {
        IEnumerable rawData = extract();
        IEnumerable tranformedData = transform(rawData);
        load(transformedData);
    }

    protected abstract IEnumerable extract();
    protected abstract IEnumerable transform(IEnumerable rawData);
    protected abstract load(IEnumerable transformedData);
} 
```

然后你可以通过扩展`ETLProcess`类来实现不同类型数据的处理。这种模式的优点是您可以在抽象类中定义您的流程，而在具体类中定义各个步骤。您可以将通用代码、通用错误处理等放在基类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:19:05.717

我相信[管道模式](http://en.wikipedia.org/wiki/Pipeline_%28software%29)在 MSDN 上具有良好的[C# .NET 4.0 实现。](http://msdn.microsoft.com/en-us/library/ff963548.aspx)

这个想法是提取阶段，并为每个阶段安排一个 TPL 的新实例`Task`，然后通过实例将所有这些实例联系在一起`BlockingCollection<T>`作为中间缓存。

还值得注意的是，在引用的 MSDN 论文[BlockingCollection.GetConsumingEnumerable()](http://msdn.microsoft.com/en-us/library/dd287186.aspx)中提到的会根据需要返回`IEnumerable<T>`。

一般流程示例：

![在此处输入图像描述](../Images/f9b2a4c9c17a248021e6f38b3f7e2ca7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:26:06.440

我相信您正在寻找[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)模式。我经常将转换视为既不偏向客户也不偏向适应者的中间阶层。包装器的想法并不总是“感觉”很抽象。但是，最好还是编写专门设计的类，以使传入的数据适应客户的期望。如果您觉得它违反了您的抽象，请考虑创建基类或接口并针对传入数据的细节实现它们。

# database - ROW_NUMBER() 在 SQL 中没有结束

> ID：12914499
> 
> 赞同：26
> 
> 时间：2012-10-16T12:15:42.327
> 
> 标签：database, sql-server-2005

有什么方法可以`ROW_NUMBER()`在不使用 SQL 的情况下使用`OVER`，因为我想使用排序。

我有一个带有多个可排序列和可配置行的网格。在我的场景中，order by 是可变的，这就是为什么我无法使用 ROWNUM 下订单的原因。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-10-03T14:43:24.250

```
select ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) as number from Task order by RuleId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-17T15:02:35.917

```
select
a.City,
a.len
from
(
select city,length(city) AS len,
row_number()over(order by length(city) desc, city) as hi,
row_number()over(order by length(city), city) as lo
from
STATION) as a where (a.lo=1 or a.hi=1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-12T10:03:38.480

我使用不同的逻辑来解决这个问题。我没有检查每一天并验证它是工作日还是假期，而是创建了一个仅列出工作日的表，然后取第 n 个值。

```
CREATE OR REPLACE FUNCTION add_n_working_days ( 
  start_date DATE, working_days PLS_INTEGER
) RETURN DATE AS
  l_end_date DATE := start_date;
  l_counter  pls_integer := 0;
BEGIN
  SELECT 
    business_day 
    INTO l_end_date
  FROM 
  (
    WITH 
    dates AS
      (SELECT start_date + level - 1  as dt FROM dual CONNECT BY level < 100)
    ,weekdates AS
    (SELECT dt as weekday FROM dates WHERE TO_CHAR(dt,'fmdy') NOT IN ('sat','sun'))
    ,business_days AS
    (
    SELECT weekday as business_day FROM weekdates
    MINUS
    SELECT holiday FROM so_holidays 
    )
    SELECT business_day, ROW_NUMBER() OVER (ORDER BY 1) as rn from business_days
  )
  WHERE rn = working_days + 1;
  RETURN l_end_date;
END add_n_working_days; 
```

如果 working_days 变得太高，那么我建议将该值 100 作为变量。

# php - Magento：将自定义按钮添加到管理表单

> ID：12914501
> 
> 赞同：1
> 
> 时间：2012-10-16T12:15:55.307
> 
> 标签：php, magento

构建自定义 adminhtml 模块。我使用一个简单的表格。它看起来像这样：

```
<?php

class Namespace_Modulename_Block_Adminhtml_Modulename_Edit_Tab_Form extends Mage_Adminhtml_Block_Widget_Form
{
    protected function _prepareForm()
    {
        $form = new Varien_Data_Form();
        $this->setForm($form);
        $fieldset = $form->addFieldset('modulename_form',array('legend'=>Mage::helper('modulename')->__('Module Data')));

    $fieldset->addField('test', 'text', array(
            'label'     => Mage::helper('modulename')->__('Test'),
            'name'      => 'test',
    ));

    // I want to add a custom button here. Say an action called "Add Option".
    //Clicking this action adds input boxes or dropdowns to the form that are to
    //to be included in the post when submitting the form (obviously). 
```

我一直在寻找有关堆栈溢出的解决方案，但未能找到可以提供帮助的东西。然后我尝试在 Mage Core 中寻找类似的东西。

在管理面板中，如果我转到 [Catalog->Attributes->Manage Attributes] 并单击诸如“制造商”之类的标准属性，例如，在名为“管理标签/选项”的第二个选项卡上，我会看到以下屏幕：

![添加选项](../Images/f61f634c8a762296e11a8f952a1cb0c2.png)

有一个按钮和操作允许我向表单添加选项（以文本框的形式）。确定这是我想要复制的东西，我进入核心试图弄清楚该怎么做。如果我打开以下文件（**Magento Enteprise 12.0.2**）：

Mage_Adminhtml_Block_Catalog_Product_Attribute_Edit_Tab_Options

我看到它是空的，但扩展了 Mage_Eav_Block_Adminhtml_Attribute_Edit_Options_Abstract

我已经浏览了这个文件，但对我来说意义不大。我走错路了吗？我怎样才能实现类似的东西，一个按钮和一个将字段添加到管理表单的操作？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T14:28:34.983

1.  您可以为表单设置自定义模板，并通过 html 添加任何标签（如按钮）。
2.  您可以为您的字段添加渲染器

> ```
> $customField = $fieldset->addField('test', 'text', array(
>             'label'     => Mage::helper('modulename')->__('Test'),
>             'name'      => 'test',
>     ));
> 
> $customField->setRenderer($this->getLayout()->createBlock('yuormodule/adminhtml_yourform_edit_renderer_button')); 
> ```

在块级

```
class Yournamespace_Yourmodule_Block_Adminhtml_Yourform_Edit_Renderer_Button extends Mage_Adminhtml_Block_Abstract implements Varien_Data_Form_Element_Renderer_Interface {
  public function render(Varien_Data_Form_Element_Abstract $element) {
    //You can write html for your button here
    $html = '<button></button>';
   return $html;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T16:18:26.567

1-首先，您必须像这样为您的 Grid 创建一个容器

> ```
> public function __construct() {        
>     parent::__construct();
>     $this->setTemplate('markavip/dataflow/edit/form/mapping.phtml');
> } 
> ```

2-在同一个容器中，您将添加您的按钮，例如

> ```
> public function _prepareLayout() {
>     $this->setChild('add_button', $this->getLayout()->createBlock('adminhtml/widget_button')
>                     ->setData(array(
>                         'label' => Mage::helper('markavip_dataflow')->__('Add Option'),
>                         'class' => 'add',
>                         'id' => 'add_new_option_button'
>     )));
>     $this->setChild('delete_button', $this->getLayout()->createBlock('adminhtml/widget_button')
>                     ->setData(array(
>                         'label' => Mage::helper('markavip_dataflow')->__('Delete'),
>                         'class' => 'delete delete-option'
>     )));
>     return parent::_prepareLayout();
> }
> 
> public function getAddNewButtonHtml() {
>     return $this->getChildHtml('add_button');
> }
> 
> public function getDeleteButtonHtml() {
>     return $this->getChildHtml('delete_button');
> } 
> ```

3-在 PHTML 中，您将像这样添加这些按钮：

> ```
>  <?php echo $this->getAddNewButtonHtml() ?> 
> ```

在此之后，您将在 JS 函数中进行添加和隐藏

# jquery - 基于数据表中单元格内容的条件行着色

> ID：12914505
> 
> 赞同：0
> 
> 时间：2012-10-16T12:16:18.677
> 
> 标签：jquery, html, css, datatables

我正在尝试突出显示其内容在编辑时发生更改的行。

单击已初始化表行`+`上的符号时，`datatable()`会展开以显示另一个表，其中包含初始行的编辑历史。以图形方式表示，如下所示：

```
 id  name  age  address
+  1   Amy   25   NY
+  2   Anne  30   TX
-  3   John  28   CA
       Jhn   28   HU
       Jon   28   AB
+  4   Max   24   AD 
```

行`id` `3`已扩展以显示其编辑历史。因此，对于这个特定的记录，`name`和`address`行的颜色应该不同（应该不同于其他历史行的颜色，即：`age`因为年龄在 2 次编辑中保持 28 岁）以突出显示更改。

我不知道如何比较已编辑行的单元格的内容并使用`datatables()`或其他方式突出显示它们。

帮助表示赞赏，谢谢。

# iphone - 如何使用 NSString 绘制功能从文本创建 UIImage 并将此图像与另一个 UIImage 组合

> ID：12914510
> 
> 赞同：-4
> 
> 时间：2012-10-16T12:16:23.470
> 
> 标签：iphone, objective-c, ios

我有 NSString 绘制功能，可以从文本创建 UIImage 并将此图像与另一个 UIImage 以及可移动的 UIImage 组合。现在我想将这两个 UIImage 组合成一个 UIImage。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:09:31.760

查看 UIGraphicsBeginImageContext 和相关函数，它可以让您创建位图图像并进行绘图。您可以绘制文本和任何其他您想要创建新位图的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:17:09.610

```
-(UIImage *)imageFromText:(NSString *)text
{
    // set the font type and size
    UIFont *font = [UIFont systemFontOfSize:20.0];
    CGSize size  = [text sizeWithFont:font];

    // check if UIGraphicsBeginImageContextWithOptions is available (iOS is 4.0+)
    if (UIGraphicsBeginImageContextWithOptions != NULL)
        UIGraphicsBeginImageContextWithOptions(size,NO,0.0);
    else
        // iOS is < 4.0
        UIGraphicsBeginImageContext(size);

    // optional: add a shadow, to avoid clipping the shadow you should make the context size bigger
    //
    // CGContextRef ctx = UIGraphicsGetCurrentContext();
    // CGContextSetShadowWithColor(ctx, CGSizeMake(1.0, 1.0), 5.0, [[UIColor grayColor] CGColor]);

    // draw in context, you can use also drawInRect:withFont:
    [text drawAtPoint:CGPointMake(0.0, 0.0) withFont:font];

    // transfer image
    UIImage *Image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return Image;
} 
```

在这里，我得到了将文本更改为图像的想法。

# java - JAXB 绑定文件：验证错误

> ID：12914511
> 
> 赞同：11
> 
> 时间：2012-10-16T12:16:25.017
> 
> 标签：java, xsd, jaxb

以下 JAXB 绑定文件按预期创建适配器类，但 Eclipse 和 XMLSpy 说它无效：

```
<?xml version="1.0" encoding="UTF-8"?>
<jxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd" version="2.1">

        <jxb:globalBindings>
            <jxb:javaType name="java.util.Calendar" xmlType="xs:date" parseMethod="javax.xml.bind.DatatypeConverter.parseDate"
                printMethod="javax.xml.bind.DatatypeConverter.printDate" />
            <jxb:javaType name="java.util.Calendar" xmlType="xs:dateTime" parseMethod="javax.xml.bind.DatatypeConverter.parseDateTime"
                printMethod="javax.xml.bind.DatatypeConverter.printDateTime" />
            <jxb:javaType name="java.util.Calendar" xmlType="xs:time" parseMethod="javax.xml.bind.DatatypeConverter.parseTime"
                printMethod="javax.xml.bind.DatatypeConverter.printTime" />
        </jxb:globalBindings>

</jxb:bindings> 
```

错误类似于：

```
cvc-complex-type.2.4.b: The content of element 'jxb:globalBindings' is not complete. One of '{"http://java.sun.com/xml/ns/jaxb":javaType, "http://java.sun.com/xml/ns/jaxb":serializable, WC[##other:"http://java.sun.com/xml/ns/jaxb"]}' is expected. 
```

请注意，JAXB 绑定模式文件使用前缀“jaxb”引用顶级元素。

如何创建有效的 JAXB 绑定文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T12:28:55.957

[http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd](http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd)是错误的，但没有人可以做任何事情:(

问题在于`globalBindings`全局元素的定义。它看起来像这样：

```
 <xs:element name="globalBindings">
    <xs:annotation>
      <xs:documentation>Customization values defined in global scope.</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence minOccurs="0">
        <xs:element ref="jaxb:javaType" minOccurs="0" maxOccurs="unbounded" />
        <xs:element ref="jaxb:serializable" minOccurs="0" />
        <xs:any namespace="##other" processContents="lax">
          <xs:annotation>
            <xs:documentation>allows extension binding declarations to be specified.</xs:documentation>
          </xs:annotation>
        </xs:any>
      </xs:sequence>
      ...
    </xs:complexType> 
```

但它应该看起来像这样：

```
 <xs:element name="globalBindings">
    <xs:annotation>
      <xs:documentation>Customization values defined in global scope.</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence minOccurs="0">
        <xs:element ref="jaxb:javaType" minOccurs="0" maxOccurs="unbounded" />
        <xs:element ref="jaxb:serializable" minOccurs="0" />
        <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded">
          <xs:annotation>
            <xs:documentation>allows extension binding declarations to be specified.</xs:documentation>
          </xs:annotation>
        </xs:any>
      </xs:sequence>
      ...
    </xs:complexType> 
```

注意`minOccurs="0" maxOccurs="unbounded"`on`<xs:any />`元素。

所以正式版**强制**你使用其他（除了 JAXB 的）元素 insinde `globalBindings`。你可以看看[ [http://jaxb.java.net/nonav/2.0/binding-customization/http.java.sun.com.xml.1306680588/index.html](http://java.sun.com/ xml/ns/jaxb/xjc](http://jaxb.java.net/nonav/2.0/binding-customization/http.java.sun.com.xml.1306680588/index.html](http://java.sun.com/xml/ns/jaxb/xjc)命名空间），其中包含 Sun 对 JAXB 的扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T09:16:37.307

作为解决方法，只需添加`<xsd:any/>`为的最后一个孩子`<globalBindings>`

这是一个示例：

```
<globalBindings>
    <javaType name="java.util.Calendar" xmlType="xsd:time"
        parseMethod="javax.xml.bind.DatatypeConverter.parseTime"
        printMethod="javax.xml.bind.DatatypeConverter.printTime" />
    <xsd:any/>
</globalBindings> 
```

这在验证期间在 STS 3.7.3 xml 编辑器中对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-12T09:24:01.697

显然，该错误仍未修复。提示`<xsd:annotation><xsd:documentation>Use built in date conversion support</xsd:documentation>`对我不起作用，因为我收到“不支持的绑定命名空间[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ”（已翻译）错误。而是使用以下语法可以正常工作：

```
<jaxb:globalBindings>
  <xjc:javaType
    name="org.joda.time.LocalDate"
    xmlType="xs:date"
    adapter="org.example.XmlDateAdapter" />
</jaxb:globalBindings> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-14T13:04:03.430

我遇到了同样的错误，我通过将**元素****的前缀从(xmlns:jaxb="http://java.sun.com/xml/ns/jaxb") 更改为`<javaType>``jaxb``xjc`**(xmlns:xjc="http:// /java.sun.com/xml/ns/jaxb/xjc”）。

因此，此代码出现了错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
          xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
          xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb
            http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd
            http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema.xsd"
          version="2.1">
    <jaxb:bindings schemaLocation="sci_paper_no_rdfa.xsd">
        <jaxb:globalBindings>
            <jaxb:javaType name="java.util.Date" xmlType="xs:date"
                parseMethod="rs.ac.uns.ftn.jaxb.util.MyDataTypeConverter.parseDate"
                printMethod="rs.ac.uns.ftn.jaxb.util.MyDataTypeConverter.printDate"/>
        </jaxb:globalBindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

固定代码如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
          xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
          xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb
            http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd
            http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema.xsd"
          version="2.1">
    <jaxb:bindings schemaLocation="sci_paper_no_rdfa.xsd">
        <jaxb:globalBindings> <!-- note that javaType now has xjc prefix -->
            <xjc:javaType name="java.util.Date" xmlType="xs:date"
                parseMethod="rs.ac.uns.ftn.jaxb.util.MyDataTypeConverter.parseDate"
                printMethod="rs.ac.uns.ftn.jaxb.util.MyDataTypeConverter.printDate"/>
        </jaxb:globalBindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T15:01:33.737

对我来说，它可以将前缀从 xs 更改为 xsd。我只能想象原因是我的 wsdl 使用 xsd 前缀定义了命名空间。

# android - Play 商店是否仅将手动提交的错误注册为错误或发生的所有错误？

> ID：12914517
> 
> 赞同：1
> 
> 时间：2012-10-16T12:16:51.280
> 
> 标签：android, error-handling, google-play

当某些应用程序崩溃时，我们可以选择报告此错误。

那么，无论用户是否报告了这些错误，Play Store 是否**只注册错误之类的错误，**或者某些应用程序中发生的所有错误都注册为错误？

查看图像以查看我指的是哪些错误。

![](../Images/b01eb00b051b921fbf0ec2c0e90133ee.png)

我在任何地方都找不到有关此的任何文档。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T10:34:27.087

仅当用户手动报告它时。

由于隐私问题，这应该是这样的。

# wpf - 在 WPF 2010 中聚焦或突出显示必要的 Datagrid 行

> ID：12914520
> 
> 赞同：0
> 
> 时间：2012-10-16T12:16:55.087
> 
> 标签：wpf, datagrid, highlight

我在表中添加了一条记录，`SQLServer with WPF-application`并刷新**DataGrid**显示了一条新记录。例如，我添加了拥有的用户，`name "Peter, last name "Pen"`并且这条记录添加**在 DataGrid 的末尾**。如何将焦点转移到该记录上并突出显示？换句话说，`how to move focus and highlight by name or surname?`

ViewModel 有这样的代码：

```
<Window x:Class="Students.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
        Title="MainWindow" Height="996" Width="1191" xmlns:my="clr-namespace:Students" Loaded="Window_Loaded" WindowStartupLocation="CenterScreen">    
    <Window.Resources>        
        <my: StudentDataSet x:Key="StudentDataSet" />
        <CollectionViewSource x:Key="StudentViewSource" Source="{Binding Path=S_DEP, Source={StaticResource StudentDataSet}}" />          
    </Window.Resources>

<Grid>
<DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" Height="615" HorizontalAlignment="Left" ItemsSource="{Binding Source={StaticResource StudentViewSource}}" Margin="21,322,0,0" Name="StudentDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" VerticalAlignment="Top" Width="1046">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="NameColumn" Binding="{Binding Path=Name}" Header="Name" Width="SizeToHeader" MinWidth="110" />
                <DataGridTextColumn x:Name="LastNameColumn" Binding="{Binding Path=LastName}" Header="LastName" Width="SizeToHeader" MinWidth="100"/>                
                <DataGridTextColumn x:Name="PhoneColumn" Binding="{Binding Path=PHONE}" Header="Phone Number" Width="SizeToHeader" MinWidth="105" />               
            </DataGrid.Columns>
        </DataGrid>
</Grid> 
```

模型有这样的代码：

```
UserBoard.StudentDataSet aRCHDOC_1DataSet = ((UserBoard.StudentDataSet)(this.FindResource("StudentDataSet")));            
            // Loading data in the table Student            UserBoard.StudentDataSetTableAdapters.StudentTableAdapter StudentDataSet_StudentTableAdapter = new UserBoard.StudentDataSetTableAdapters.StudentTableAdapter();
            StudentDataSet_StudentTableAdapter.Fill(StudentDataSet.Students);
            System.Windows.Data.CollectionViewSource StudentViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("StudentViewSource")));
            StudentViewSource.View.MoveCurrentToFirst();

            //Highlighting a necessary row
            string position = e.Someth_property;
            for (int i = 0; i < StudentDataGrid.Items.Count; i++)
            {
                //What do I should write here?   
            } 
```

请，作为对我的善意！给出 WPF 2010 的示例，因为 Visual C# 的代码在 WPF 2010 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:32:51.677

如果要设置，请`focus on last added row`尝试以下代码：

```
dataGridView.ClearSelection();
int RwIndex= dataGridView.Rows.Count - 1;

dataGridView.Rows[RwIndex].Selected = true;
dataGridView.Rows[RwIndex].Cells[0].Selected = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:49:36.503

对于 WPF，您必须在其中添加 gridview 控件`Listview`，之后您可以轻松地在 Gridview 中选择和关注特定记录。否则，您必须使用 DataGrid 控件来处理此类内容。

例如`(Listview)`参考这段代码：

```
myListView.SelectedItem = myListView.Items[index];
myListView.ScrollIntoView(myListView.Items[index]);
ListViewItem listViewItem = myListView.ItemContainerGenerator.ContainerFromIndex(index) as ListViewItem;
listViewItem.Focus(); 
```

例如`(DataGrid)`：

```
int index = 11;
myDataGrid.SelectedItem = myDataGrid.Items[index];
myDataGrid.ScrollIntoView(myDataGrid.Items[index]);
DataGridRow dgrow =(DataGridRow)myDataGrid.ItemContainerGenerator.ContainerFromItem(myDataGrid.Items[index]);
dgrow.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); 
```

# android - Android - 在单独的线程中发送短信

> ID：12914521
> 
> 赞同：4
> 
> 时间：2012-10-16T12:16:59.020
> 
> 标签：android, multithreading, sms, google-cloud-messaging

我正在编写一个 android 应用程序（带有服务），当我收到 GCM 通知时我需要发送一条消息。

主要问题：当我同时发送3条短信时，任何其他操作都会长时间停止（10-20秒）并且手机也被阻止。我尝试在线程中发送短信，但没有区别。

**短信发送器.java**

```
public class SmsSender implements Runnable{ 
    private Context context;
    private String phoneNumber;
    private String message;
    private int id; 

public SmsSender(Context paramContext, String phoneNumber, String message, int id) {
        super();
        this.context = paramContext;
        this.phoneNumber = phoneNumber;
        this.message = message;
        this.id = id;
    }

    public void run() {
        try {    

        Intent sentIntent = new Intent("sent");
        Intent deliveredIntent = new Intent("delivered");
        sentIntent.putExtra("id", id);
        deliveredIntent.putExtra("id", id);
        PendingIntent sentPI = PendingIntent.getBroadcast(this.context, id,sentIntent, 0);
        PendingIntent deliveredPI = PendingIntent.getBroadcast(this.context, id, deliveredIntent, 0);           

        SmsManager smsManager = SmsManager.getDefault();                    
        ArrayList<String> parts = smsManager.divideMessage(message);
        ArrayList<PendingIntent> sentList = new ArrayList<PendingIntent>();
        sentList.add(sentPI);
        ArrayList<PendingIntent> deliveredList = new ArrayList<PendingIntent>();
        deliveredList.add(deliveredPI);
        smsManager.sendMultipartTextMessage(phoneNumber, null, parts, sentList, deliveredList);             

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

**运行线程**

> 新线程（新 SmsSender（getApplicationContext（），phoneNumber，消息，id））.start（）；

问题出在哪里？为什么短信是在主线程而不是我的线程中发送的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:23:55.727

根据android文档

*什么是服务？
关于 Service 类的大多数混淆实际上都围绕着它不是什么：Service 不是一个单独的进程。Service 对象本身并不意味着它在自己的进程中运行；除非另有说明，否则它在与其所属的应用程序相同的进程中运行。
服务不是线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。*

# android - 使用 CyanogenMod 的设备树构建 AOSP 是否正确？

> ID：12914528
> 
> 赞同：3
> 
> 时间：2012-10-16T12:17:15.803
> 
> 标签：android, android-source, cyanogenmod

我正在尝试为我的三星 Galaxy Y S5360 构建 AOSP Gingerbread。所以我需要 S5230 的设备树。我在[这里](https://github.com/vivekkalady/device_samsung_totoro)找到了。但它适用于 Cyagenmod。

在纯AOSP中使用它是否正确？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T14:01:50.743

我看不出你不能这样做的任何原因。如果设备树中的驱动程序适用于相同版本的Android，我想你可以下载它们。唯一的事情是你应该小心覆盖文件夹。有一些包和资源值可以覆盖（或添加）可能导致构建错误的不必要的包。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-16T13:35:22.887

您不能只为自己的设备构建 AOSP。您需要为您的设备配备正确的驱动程序和内核。

最好使用 Cyanogenmod 版本，因为它会为您的设备准备好。

# c# - 捕获多个自定义 FaultException 类型

> ID：12914534
> 
> 赞同：2
> 
> 时间：2012-10-16T12:17:44.357
> 
> 标签：c#, .net, wcf, exception

在我的 WCF 服务上，我有几个自定义故障类型。一个称为 BaseFault 的抽象类型和它的两个实现称为 TypeOneFault 和 TypeTwoFault

我像这样在服务端抛出异常

```
public string ThisMethodHasFault(string eType)
{
    if (eType.Contains("One"))
    {
        TypeOneFault one = new TypeOneFault("TypeOneFault thrown");
        throw new FaultException<TypeOneFault>(one, new FaultReason(new FaultReasonText("Fault reason here")));
    }
    else
    {
        TypeTwoFault two = new TypeTwoFault("TypeTwoFault thrown");
        throw new FaultException<TypeTwoFault>(two, new FaultReason(new FaultReasonText("Fault reason here")));
    }

    return "";
} 
```

我的服务界面是这样的

```
[OperationContract]
[FaultContract(typeof(TypeOneFault ))]
[FaultContract(typeof(TypeTwoFault ))]
string ThisMethodHasFault(string eType); 
```

在客户端，我有一个测试 winform 应用程序，我像这样捕获它

```
 MyServiceClient client = new MyServiceClient();

   try
    {
        client.ThisMethodHasFault(""); //get value from user

    }
    catch (FaultException<TypeOneFault>  ox)
    {
         TypeOneFault oneEx = ox.Detail;
         oneEx.{property} ...

    }   
    catch (FaultException<TypeTwoFault>  tx)
    {
         TypeTwoFault twoEx = tx.Detail;
         twoEx.{property} ...
    } 
```

**问题：**

我似乎无法通过这样做来减少捕获块的数量

```
 catch (FaultException<BaseFault> fex)
    {
         BaseFault Ex = fex.Detail;
         twoEx.{property} ...
    } 
```

如果有一个这样的块可以捕获我在服务器上抛出的任何异常并通过抽象我得到正确的类的详细信息，那就太好了。通过执行上述操作，我得到一个错误。`An unhandled exception of type 'System.ServiceModel.FaultException`1' 发生在 mscorlib.dll 中`

*有什么我需要改变才能完成这项工作，还是我只需要满足于多个 catch 块？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:35:49.987

`FaultException<T>`继承自`FaultException`，因此您可以改为捕获基类型：

```
catch(FaultException ex) {
    if(ex is FaultException<TypeOneFault>) {
        var detail = ((FaultException<TypeOneFault>) ex).Detail;
        // process it
    } else if(ex is FaultException<TypeTwoFault>) {
        var detail = ((FaultException<TypeTwoFault>) ex).Detail;
        // process it
    } else {
        // unexpected error
        throw;
    }
} 
```

与两个单独的 catch 块不同，这可以重构：

```
 catch(FaultException ex) {
        if(!ProcessFault(ex)) {
            throw;
        }

bool ProcessFault(FaultException ex) {
    if(ex is FaultException<TypeOneFault>) {
        var detail = ((FaultException<TypeOneFault>) ex).Detail;
        // process it
        return true;
    } else if(ex is FaultException<TypeTwoFault>) {
        var detail = ((FaultException<TypeTwoFault>) ex).Detail;
        // process it
        return true;
    } else {
        // unexpected error
        return false;
    }
} 
```

如果您的两个故障类别不相关，那么您可以做到这一点。但是，如果它们继承自一个共同的基础，那么您可以进一步重构：

```
bool ProcessFault(FaultException ex) {
    if(ex is FaultException<TypeOneFault>) {
        ProcessFault(((FaultException<TypeOneFault>) ex).Detail);
        return true;
    } else if(ex is FaultException<TypeTwoFault>) {
        ProcessFault(((FaultException<TypeTwoFault>) ex).Detail);
        return true;
    } else {
        // unexpected error
        return false;
    }
}

void ProcessFault(BaseFault detail) {
    // process it
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T02:20:04.073

像这样的东西怎么样，为了方便使用[FastMember ，但是你可以使用动态块和一些 try/catch 块获得相同的效果：](https://www.nuget.org/packages/FastMember/)

```
try
{
    client.ThisMethodHasFault("");
}
catch (FaultException e)
{
    var accessor = TypeAccessor.Create(e.GetType());
    var detail = accessor.GetMembers().Any(x => x.Name == "Detail")
                     ? accessor[e, "Detail"] as BaseFault
                     : null;

    if (detail != null)
    {
        // Do processing here
    }
    else
    {
        throw;
    }
} 
```

# windows-8 - 我们可以使用我们自己的服务来代替 WNS 云的推送通知吗？

> ID：12914535
> 
> 赞同：0
> 
> 时间：2012-10-16T12:17:45.193
> 
> 标签：windows-8

我正在开发一个应用程序，我的客户端应用程序需要定期接收特定事件的通知。我发现要实现推送通知，我们必须通过云来实现。是否可以通过我们的本地服务实现推送通知

谢谢和问候，哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:51:00.893

Per the workflow pictured below, the "Cloud Service" merely needs to be accessible from your application as it's deployed on client machines. It does, however, need to have a secure connection to WNS, but you can host the "Cloud Service" on premises if you like, as long as it's available on the public internet for the Windows 8 clients to access. You cannot, however, host the service on the client device itself.

Of course, if you use your host the service on premises, you'll need to handle the infrastructure, scaling, security, of the "Cloud Service" yourself.

**EDIT:** Note that WNS is a constant in this, and is hosted by Microsoft "in the cloud", so as Jerry mentioned in his response, that's not something you can move to a local or on-premises service.

If they are 'regular' notifications, you could perhaps investigate [periodic](http://blogs.msdn.com/b/jimoneil/archive/2012/08/09/windows-8-notifications-periodic-notifications.aspx) or [scheduled notifications](http://blogs.msdn.com/b/jimoneil/archive/2012/08/08/windows-8-notifications-scheduled-notifications.aspx) as well.

![Push notification workflow](../Images/333cce2ff4e4a42981b2f82d39cf38cf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:26:33.130

答案是不。没有机制可以“推送”到不使用 WNS 路由该消息的 Windows 8 设备。您的服务可以做很多事情，但必须利用 WNS。这与安全性、可靠性有关，而且（老实说）就是这样。WNS 是一项要求。

我明白你为什么会问这个问题。

我希望这能为你解答。

# javascript - 防止在输入新段落时复制属性？

> ID：12914536
> 
> 赞同：10
> 
> 时间：2012-10-16T12:17:53.767
> 
> 标签：javascript, ckeditor

在 CKEditor 中创建新段落时，前一段的属性（样式、类）会被复制到新段落中。有没有办法防止这种情况？

例如，如果我在一个居中的段落中写作，然后按 Enter 创建一个新段落，我的用户希望新段落是一个简单的

默认情况下没有“继承”以前的任何东西。

* * *

**编辑**

我设法让它（危险地未经测试）与 Reinmar 的技巧一起工作。这就是我的结论；我希望这对其他人有帮助。如果你们在这里看到明显的错误，请告诉我

```
CKEDITOR.on('instanceCreated', function(e) {
    e.editor.on('key', function(evt) {
        if (evt.data.keyCode === 13) {
            // if we call getStartElement too soon, we get the wrong element
            setTimeout(function () {
                var se = e.editor.getSelection().getStartElement();
                if(se.getName() == "span") {
                    var text = se.getText(); // Store text, we are about to nuke the spans
                    while (se.getName() == "span") { // possible infinite loop danger
                        se = se.getParent();
                    }
                    if (text.length == 0)
                        se.setHtml("&nbsp;"); // It's important that this is not empty
                    else
                        se.setHtml(text);
                }
                debug(se.getHtml());
                se.removeAttribute("class");
                se.removeAttribute("mycustomattr");
                se.removeAttribute("myothercustomattr");
                window.bla = se; // useful for debugging
            }, 10);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T15:20:45.937

即将推出的 CKEditor v4（当前的夜间）也有类似的问题。我从我的自定义图像浏览器中插入一个带有图像和自定义类的段落，CKEditor 不断将这些类复制到图像之后创建的段落。

我不喜欢`key`event 之后 call of的想法`setTimeout`，所以我稍微检查了源代码，结果发现它非常简单。

当您按下回车键时，CKEditor 实际上会发出`enter`命令。您需要做的就是设置一个`afterCommandExec`事件并找到新创建的空元素：

```
editor.on('afterCommandExec', function (e) {
    if (e.data.name == 'enter') {
        var el = e.editor.getSelection().getStartElement();

        // when splitting a paragrah before it's first character,
        // the second one is selected
        if (el.getHtml() != '<br>') {
            if (el.hasPrevious() && el.getPrevious().getHtml() == '<br>') {
                el = el.getPrevious();
            } else {
                // both paragraphs are non-empty, do nothing
                return;
            }
        }

        // modify el according to your needs
    }
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T00:34:24.587

这是一个旧帖子，但我一直有同样的问题，我终于得到了一些工作，所以我想分享我的解决方案。对于那些不知道我们为什么想要这个功能的人，这是我的解释：

默认情况下，CKEDITOR 尝试允许用户在按下回车键插入新行时继续使用相同的样式。换句话说，如果您的文本是粗体且居中的，并且您按下回车键，ckeditor 会复制该样式，以便新行也是粗体和居中的。除非您想插入更复杂的东西，例如具有属性的嵌套元素（例如通过插件），否则这非常有用。当您在具有类的元素中按 Enter 键时，ckeditor 会创建一个具有相同类的新段落元素，如果该类依赖于父元素的存在，则该元素将不起作用（这是一个成为问题的示例：[http： //jsfiddle.net/B4yGJ/158/](http://jsfiddle.net/B4yGJ/158/)）。

我提出的解决方案结合了 Reinmar 和 Nenotlep 的代码和建议：

```
// create object of safe classes
var safe_classes = {};
$.each(ckeditor_styles_full, function(i, style) {
    if(style['attributes']) {
        var style_classes = style['attributes'].class;
        var style_element = style['element'];

        if(typeof safe_classes[style_element] != "object") {
            safe_classes[style_element] = [];
        }

        style_classes = style_classes.split(" ");
        $.each(style_classes, function(i, v) {
            if($.inArray(v, safe_classes[style_element]) <= -1) {
                safe_classes[style_element].push(v);
            }
        });
    }
});

$.each(CKEDITOR.instances, function(i, editor) {
    editor.on('key', function(e) {
        if (e.data.keyCode === 13) {
            setTimeout(function () {
                var se = e.editor.getSelection().getStartElement();
                var parent = se.getParent().getName();
                if(parent == "html" || parent == "body") {
                    var se_classes = se.getAttribute('class');
                    var new_classes = [];
                    se.removeAttribute("class");

                    if(se_classes !== null) {
                        se_classes = se_classes.split(" ");
                        $.each(se_classes, function(i, v) {
                            if(typeof safe_classes[se.getName()] != 'undefined') {
                                if($.inArray(v, safe_classes[se.getName()]) > -1) {
                                    se.addClass(v);
                                }
                            }
                        });
                    }
                }
            }, 10);
        }
    });
}); 
```

下面是它的工作原理：首先，脚本从所选样式列表中抓取类名，并按元素类型将它们编译成一个对象。然后，它遍历将事件绑定到回车键的所有 CKEDITOR 实例。接下来，它检查当您按下回车键时创建的元素是否在 HTML 或 BODY 之外的父元素内（即，它是较大元素树的一部分）。最后，如果它不在容器元素内，它会从该元素中删除所有不在之前创建的“safe_classes”对象中的类。

2 个重要的旁注： 1) 你仍然需要设置 "forceEnterMode: true" 2) 因为 "forceEnterMode" 设置为 true，所以最好只嵌套段落元素。例子：

```
<div class="container"><p class="title">Title Text</p><p class="content">Content Goes Here</p></div> 
```

否则，如果您在嵌套的 div 中按 enter，ckeditor 会将所有该 div 的属性复制到一个段落元素中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T07:09:08.840

这两天我一直在想你的问题，我有了一个想法。我检查了输入插件代码，最好不要动它。相反，您可以收听 enter 键，在执行我们的自定义输入后，您应该从新创建的块中清除样式。

这些方法将很有用：

*   `editor.on( 'key', function( evt ) { evt.data.key... } )`
*   `editor.getSelection().getStartElement()`- 输入选择开始后将被放置在新创建的块中（+ 行内元素，如粗体、下划线等）。
*   `CKEDITOR.dtd.*`- 元素集可以帮助您决定哪些元素是内联样式并且应该被删除。
*   `element.isEmptyInlineRemoveable`- 您应该删除放置光标的空行内元素。
*   `editor.createRange().setStartAt( block, 0 ).select()`- 最后你应该将插入符号放在正确的位置（在块的开头 - `<p>`/ `<div>`/ `<li>`/等）。

不幸的是，正如你所见，这不是一件容易写的事情，祝你好运:)

# c# - 将 GridLayout 绑定到 Android 的问题

> ID：12914544
> 
> 赞同：3
> 
> 时间：2012-10-16T12:18:10.327
> 
> 标签：c#, mono, xamarin.android, mvvmcross

我使用 Mono 技术创建游戏。在写的时候，我有一个问题。我需要用图片创建[一个网格（4 到 5）](http://data1.floomby.com/files/share/16_10_2012/EEe7JipvF02sUyUXAZ30Lw.png)。我想在这里应用 GridLayout 或 GridView。但我不知道如何在 GridLayout 中动态创建图像，这些图像使用 ViewModel （属性列表）进行更新。游戏过程中会改变List中SquareModel对象的属性，即图片的路径。如果您单击图像，它将改变。

我在Windows Phone中做过的类似游戏。没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:09:15.957

现在 BindableGridView 的示例在[https://github.com/slodge/MvvmCross/issues/37](https://github.com/slodge/MvvmCross/issues/37)

当文件名来自视图模型时，这是我们用来在 Buttons 上绑定图像的解决方案：

1) 创建绑定

```
public class MvxButtonIconBinding: MvxBaseAndroidTargetBinding
{
    private readonly View _view;

    public MvxButtonIconBinding(View view)
    {
        _view = view;
    }

    public override void SetValue(object value)
    {
        string path = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
        path = Path.Combine(path, "pictures");
        path = Path.Combine(path, (string)value);
        if (File.Exists(path))
        {
            var dr = Drawable.CreateFromPath(path);
            Button b = _view as Button;
            var drawables = b.GetCompoundDrawables();
            foreach (var d in drawables)
                if (d!=null)
                    d.Dispose(); // To avoid "out of memory" messages
            b.SetCompoundDrawablesWithIntrinsicBounds(null, dr, null, null);
        }
        else
        {
            Console.WriteLine("File {0} does not exists", path);
        } 
    }

    public override MvxBindingMode DefaultMode
    {
        get { return MvxBindingMode.OneWay; }
    }

    public override Type TargetType
    {
        get { return typeof(string); }
    }

    protected override void Dispose(bool isDisposing)
    {
        if (isDisposing)
        {
        }
        base.Dispose(isDisposing);
    }
} 
```

2）设置绑定：

```
 registry.RegisterFactory(new MvxCustomBindingFactory<View>("ButtonIcon", view => new MvxButtonIconBinding(view))); 
```

3）在你的gridview/listview中使用它：

```
 <ShopBazarAndroid.MvvmCross.MvxBindableGridView
        android:layout_width="0dp"
        android:layout_weight="8"
        android:layout_height="fill_parent"
        android:id="@+id/ArticleLayout"
        android:columnWidth="170dp"
        android:numColumns="auto_fit"
        android:verticalSpacing="5dp"
        android:horizontalSpacing="5dp"
        android:stretchMode="columnWidth"
        android:gravity="center"
        local:MvxItemTemplate="@layout/article_buttonlayout"
        local:MvxBind="{&apos;ItemsSource&apos;:{&apos;Path&apos;:&apos;VisualArticles&apos;}}" /> 
```

“article_buttonlayout”：

```
 <Button
    android:id="@+id/ButtonArticle"
    android:layout_width="fill_parent"
    android:layout_height="160dp"
    android:gravity="bottom|center"
    android:paddingBottom="5dp"
    android:paddingTop="5dp"
    local:MvxBind="{'Click':{'Path':'Command1'},'ButtonIcon':{'Path':'Item.PictureFileName'}}"
    android:textSize="14dip"
    android:textColor="@drawable/ToggleButtonSelector" /> 
```

其中“Item”是我的对象，“PictureFileName”是本地文件系统上的文件名。
我是 C# 新手，如果您发现错误，请多多包涵 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:45:14.540

Android 中有一个 GridView - 但我个人从未在 mvvmcross 中使用带有数据绑定的 GridView - 但我听说添加它非常简单 - 请参阅[https://github.com/slodge/MvvmCross/issues/37](https://github.com/slodge/MvvmCross/issues/37)

作为网格视图的替代方案，您可以使用垂直和水平线性布局的某种组合来构建自己的网格。您可以通过使用外部线性布局来做到这一点，例如：

```
<Mvx.MvxBindableLinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    local:MvxItemTemplate="@layout/listitem_row"
    local:MvxBind="{'ItemsSource':{'Path':'Rows'}}"
  /> 
```

行模板包含

```
<Mvx.MvxBindableLinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    local:MvxItemTemplate="@layout/listitem_cell"
    local:MvxBind="{'ItemsSource':{'Path':'Cells'}}"
  /> 
```

和只包含`ImageView`

* * *

无论您使用 GridView 还是 LinearLayouts，您都应该能够为您的各个 ImageView 方块构建一个容器。

一旦准备好，那么更改每个正方形中显示的图像应该非常简单 - 它应该只是将 ImageView 的 AssetImagePath 绑定到代表正方形的 ViewModel 对象上的属性的情况。

IE。如果您的 ViewModel 是：

```
public class MyViewModel : MvxViewModel
{
    public List<GameRow> Rows {get;private set;}
} 
```

其中 GameRow 是：

```
public class GameRow : MvxNotifyProperty
{
    public List<GameSquare> Cells {get;private set;}
} 
```

其中 GameSquare 是：

```
public class GameSquare : MvxNotifyProperty
{
    private string _icon;
    public string Icon 
    {
       get { return _icon; }
       set { _icon = value; RaisePropertyChanged(() => Icon);
    }
} 
```

那么每个 ImageView 显示上的绑定应该是这样的：

```
 {'AssetImagePath':{'Path':'Icon'}} 
```

显然，您可能不想直接在 ViewModel 中使用图标路径——您可能更喜欢使用枚举。如果您这样做，那么您可能希望使用一个`ValueConverter`或自定义绑定来根据当前枚举值显示正确的图像。

[请参阅如何使用 Mvvmcross 将图像 src 绑定到资源可绘制图像](https://stackoverflow.com/questions/12876406/how-to-bind-an-image-src-to-resource-drawable-image-with-mvvmcross)中的问题和答案？了解更多信息。

# scala - 为了使编译速度更快...更少的特征？

> ID：12914549
> 
> 赞同：2
> 
> 时间：2012-10-16T12:18:19.947
> 
> 标签：scala, compilation, sbt, incremental-compiler

**编辑**
使事情复杂化似乎存在一个问题（正在播放 2.1 快照中处理），其中路由文件更改也可能触发冲压羊群效应，也就是说，重新编译控制器和依赖项。一旦解决了这个问题，并且集成了 Scala 2.10 + SBT 0.12.1 性能增强功能，那么我将更加清楚我在使用基于 trait 的 DAO 存储库时有多么自欺欺人......

**ORIGINAL**
我是说英语的人，能说很多很多，别担心，只是把你拉进....到可怕的慢 a$$ 编译区

```
trait DaoProviderContract {
  def team:   TeamContract
  def player: PlayerContract
}
object DaoRepo extends DaoProviderContract {
  import com.company.utils.{Connection, Driver}
  implicit lazy val db = Connection.getHandle(Driver.DEFAULT)

  val team    = new TeamDAO
  val player  = new PlayerDAO
}
trait DaoProvider[Contract <: com.company.dao.DAOContract[_]] {
  val daoRepo = DaoRepo
  val dao: Contract
}
trait TeamData extends DaoProvider[TeamContract] {
  val dao: TeamContract = daoRepo.team
}
trait PlayerData extends DaoProvider[PlayerContract] {
  val dao: PlayerContract = daoRepo.player
} 
```

然后在控制器中，混入一个 DAO 组件：

```
object Player extends Controller with PlayerData {
  ....
} 
```

对上述控制器进行更改似乎会触发依赖 DAO 提供程序的所有源的重新编译，在我的例子中是一堆控制器。最终的影响是，我经常看到近 3/4 的应用程序被重新编译，这很烦人。

现在，SBT 0.12.1 在编译速度方面有所提高，但就它重新编译的内容而言，我的 DAO 存储库实现显然无济于事。

所以，我的问题是，在这种情况下，我是否应该放弃特征并将 DaoRepo 对象直接暴露给控制器？播放器控制器将如下所示：

```
import model.{DaoRepo => repo}
object Player extends Controller { // with PlayerData mixin gone
  def player(id: Int) = repo.player.get(id)
} 
```

我是否正确假设对修改后的 Player 控制器进行更改不会触发重新编译我的应用程序的 3/4？我知道，直接使用 DaoRepo 对象进行测试是不可能的，但是等待也不是很有效率。

感谢您的反馈，如果你有它：帮助 SBT 重新编译必要的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:03:11.303

您可以通过避免使用多个特征/类/对象定义填充单个文件来使 SBT 增量过程更智能。如果您有以下文件：

```
trait A { }
trait B extends Base { } 
```

更改的定义`Base`将触发文件的重新编译，这反过来又会触发*每个*文件的重新编译，其中`A`或被`B`引用...

尝试将 DAO 和`PlayerData`类拆分为几个文件。

# php - 警告：mysql_fetch_assoc() 期望参数 1 是资源，给定字符串

> ID：12914550
> 
> 赞同：0
> 
> 时间：2012-10-16T12:18:21.157
> 
> 标签：php, mysql, arrays

无法在循环中找到错误...请帮助我

```
foreach($cat1 as $category){
    $query="SELECT parent FROM categories where id=".$category;
    $result = mysql_query($query);  
    $line = mysql_fetch_assoc($result);
    array_push($cat1,$line['parent']);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:32:05.237

该错误是由于空结果集或查询中的错误造成的。

请使用以下步骤进行调试：

*   `echo $query`首先（检查所有参数是否存在）
*   `Write mysql_query($query)`或者`die(mysql_error());`

这将向您显示 mysql 错误（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:38:11.420

我还会尝试通过运行来调试查询：

```
SELECT parent FROM categories where id=3 
```

或在后面插入一个有效的值 ID`id=`

此外，选择的字段是：`parent`INT 还是 VARCHAR？（我的猜测是，它是一个字符串，基于您提供的错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:30:23.880

在获取之前，您应该检查`$result` **以确保您使用资源**。另外，检查您是否真的有来自查询的行`mysql_num_rows`。

```
foreach($cat1 as $category){
    $query="SELECT parent FROM categories where id=".$category;
    $result = mysql_query($query);

    // Check result
    // This shows the actual query sent to MySQL, and the error. Useful for debugging.
    if (!$result) {
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        $message .= 'Whole query: ' . $query;
        die($message);
    }

    if(mysql_num_rows($result) > 0) {
        $line = mysql_fetch_assoc($result);
        array_push($cat1,$line['parent']);
    }
    else {
       // do something else
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-07T04:30:36.067

```
if (mysql_fetch_assoc($result) == 1) {

    $score ++;
} 
```

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 24 行的 C:\xampp\htdocs\answer\get_answer.php 中给出

# asp.net - 如何找出哪些页面链接到损坏的 URL？

> ID：12914559
> 
> 赞同：0
> 
> 时间：2012-10-16T12:18:53.493
> 
> 标签：asp.net, web-crawler, broken-links

当用户代理不发送引荐来源网址时，如何找出哪些页面链接到损坏的 URL？

我每天在我的网站上收到 100 多个对这个 URL 的请求：/controls/WebService/WebService.asmx

...但实际的 URL 是：/WebService/WebService.asmx

我可以只是将 URL 重写为另一个，但我宁愿弄清楚“控件”引用的来源。我确实有一个名为该文件夹的文件夹，其中包含一些使用 Web 服务的控件，但如果我查看源代码，从来没有提到“/controls/”文件夹...通常，没有推荐人出现在 Elmah 日志中的 404，但即使它出现了，我也看不到页面上的问题作为 Web 服务的 URL页面是正确的。

我在网站上运行了三个不同的爬虫，他们从来没有发现任何问题，所以我怀疑它是由具有解析（甚至执行）JavaScript 或其他东西的智能的东西引起的。“controls”文件夹确实存在的事实让我认为某处可能存在真正的错误，而不仅仅是爬虫软件中的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:22:37.043

您可能在控制目录中有一个文件试图通过相对路径引用该 Web 服务。使用 ~/Webservice/Webservice.asmx （如果来自 .net 控件）或简单地使用 /Webservice/Webservice.asmx

# node.js - 如何使用 node.js 从 Tab 捕获图像

> ID：12914566
> 
> 赞同：-2
> 
> 时间：2012-10-16T12:19:15.873
> 
> 标签：node.js, websocket, opera, image-capture

我正在使用 Node.js 开发应用程序。我想捕获图像并将其存储在数据库中。如果我使用 OPERA mobile 12.10，如何将它与 Node.js 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:22:34.960

我会考虑使用[PhantomJS](http://phantomjs.org/)。用 phantom 截取网页截图很简单（参见这个例子：[technews.js](https://github.com/ariya/phantomjs/blob/master/examples/technews.js)）

作为一种基本方法：

*   调用服务器函数从浏览器截屏（例如`jQuery.post`）
*   在处理请求的 node.js 中创建服务器代码
*   调用处理程序时将 phantomjs 作为子进程启动并将结果存储在数据库中

# file-io - golang 中的快速文件读取

> ID：12914567
> 
> 赞同：8
> 
> 时间：2012-10-16T12:19:19.690
> 
> 标签：file-io, go

我有一个非常大的文件，我需要处理每一行（文件的每一行都是独立的）。如何使用 goroutines（或者我不应该使用它们？）以最快的方式读取文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T12:46:19.313

只要您的硬盘比您的 CPU 慢几个数量级，这仍然是一种很常见的情况，那么您就不能通过向其投入更多 CPU 周期来神奇地使文件读取（域：从单个 HD）更快。（假设冷文件缓存和/或文件大小比所有可用的文件缓存大得多）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:04:26.150

在几乎所有情况下，磁盘 I/O 是限制因素，而不是 CPU 周期，使用 goroutine 不会在纯读取吞吐量方面获得优势。

相反，您应该在阅读一行之后检查是否可以稍后使用并发。如果你对一行的处理需要一些处理或等待（也许你分析它，或者将它发送到其他地方？）并发可能很有用：将它传递给另一个或几个其他 goroutine，这样就可以继续阅读协程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:37:15.407

此外，您应该尝试读取[内存页面](http://en.wikipedia.org/wiki/Page_%28computer_memory%29)大小的数据块以最大化吞吐量（读取两个半页比读取一整页慢）。页面大小取决于您的操作系统/内核配置。

# xslt - XSLT 如何在 Muenchian 分组变换中增加？

> ID：12914569
> 
> 赞同：1
> 
> 时间：2012-10-16T12:19:22.507
> 
> 标签：xslt, xslt-1.0

我有一个分组变换，我想在其中包含一个计数/增量。如果分配了一个分组，则变换分组值。这些值是转换用来连接在一起的文件位置，因此内容作为一个输出。如果没有分配分组，则转换使用该值来获取文件内容而不将其附加到任何内容。

XSLT：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
       <xsl:output method="xml" indent="yes"/>
       <xsl:key name="modules" match="module[@group]" use="concat(generate-id(..), '|', @group)"/>

       <xsl:template match="root">
           <AllSections>
               <xsl:apply-templates />
           </AllSections>
       </xsl:template>

       <!-- NON GROUPED PART -->
       <xsl:template match="module[not(@group)]">
              <page>
               <content>
                <xsl:variable name="var">
                 <xsl:value-of select="comp"/>
                </xsl:variable>
                <xsl:copy-of select="document(concat('../myfile/', string($var)))"/>
               </content>
             </page>
       </xsl:template>

       <!--GROUPED PART -->
       <xsl:template match="module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]">
           <xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
           <page>
               <content>
                <xsl:for-each select="$modules/comp">
                 <xsl:copy-of select="document(concat('../myfile/', .))"/>
                </xsl:for-each>
               </content>

           </page>
       </xsl:template>

       <xsl:template match="module"/>

       <xsl:template match="@*|node()">
           <xsl:copy>
               <xsl:apply-templates select="@*|node()"/>
           </xsl:copy>
       </xsl:template>
   </xsl:stylesheet> 
```

输入：

```
 <root>
        <section>
            <subsection>
                <module>
                    <comp>aaa.html</comp>
                </module>
                <module group='group01'>
                    <comp>bbb.html</comp>
                </module>
                <module group='group01'>
                    <comp>ccc.html</comp>
                </module>
                <module>
                    <comp>ddd.html</comp>
                </module>
                <module>
                    <comp>eee.html</comp>
                </module>
            </subsection>
        </section>
        <section>
            <subsection>
                <module group ="group02">
                    <comp>fff.html</comp>
                </module>
                <module group ="group02">
                    <comp>ggg.html</comp>
                </module>
                <module>
                    <comp>hhh.html</comp>
                </module>
                <module group ="group03">
                    <comp>iii.html</comp>
                </module>
                <module group ="group03">
                    <comp>jjj.html</comp>
                </module>
            </subsection>
            <subsection>
                <module group ="group04">
                    <comp>kkk.html</comp>
                </module>
                <module group ="group04">
                    <comp>lll.html</comp>
                </module>
                <module group ="group05">
                    <comp>mmm.html</comp>
                </module>
                <module group ="group05">
                    <comp>nnn.html</comp>
                </module>
                <module group ="group06">
                    <comp>ooo.html</comp>
                </module>
                <module group ="group06">
                    <comp>ppp.html/comp>
                </module>
                <module>
                    <comp>qqq.html</comp>
                </module>
            </subsection>
        </section>
    </root> 
```

输出样本：

```
 <?xml version="1.0" encoding="utf-8"?>
    <AllSections>   
        <section>        
            <subsection>            
                <page>
                    <content>
                        CONTENT FROM aaa.html
                    </content>
                </page>            
                <page>
                    <content>
                        CONTENT FROM bbb.html
                        CONTENT FROM ccc.html
                    </content>
                </page>           
                <page>
                    <content>
                        CONTENT FROM ddd.html
                    </content>
                </page>           
                <page>
                    <content>
                        CONTENT FROM eee.html
                    </content>
                </page>            
            </subsection>       
        </section>    
        <section>       
            <subsection>  
                <page>
                    <content>
                        CONTENT FROM fff.html
                        CONTENT FROM ggg.html
                    </content>
                </page>           
                <page>
                    <content>
                        CONTENT FROM hhh.html
                    </content>
                </page>            
                <page>
                    <content>
                        CONTENT FROM iii.html
                        CONTENT FROM jjj.html
                    </content>
                </page>         
            </subsection>        
            <subsection>            
                <page>
                    <content>
                        CONTENT FROM kkk.html
                        CONTENT FROM lll.html
                    </content>
                </page>           
                <page>
                    <content>
                        CONTENT FROM mmm.html
                        CONTENT FROM nnn.html
                    </content>
                </page>           
                <page>
                    <content>
                        CONTENT FROM ooo.html
                        CONTENT FROM ppp.html
                    </content>
                </page>           
                <page>
                    <content>
                        CONTENT FROM qqq.html
                    </content>
                </page>           
            </subsection>       
        </section>    
    </AllSections> 
```

我想要做的是为总页数设置一个计数器，见下文，关于部分和小节并将增量分配给 . 我试过 param 但它需要一个递归模板？如果我只输入 sem 来打破其余的变换。使用模板时是否已经创建了“循环”？

试图获得的输出：

```
 <AllSections>   
        <section>        
            <subsection>            
                <page>
                    <content>
                        CONTENT FROM aaa.html
                    </content>
                    <page_no>1</page_no>
                </page>            
                <page>
                    <content>
                        CONTENT FROM bbb.html
                        CONTENT FROM ccc.html
                    </content>
                    <page_no>2</page_no>
                </page>           
                <page>
                    <content>
                        CONTENT FROM ddd.html
                    </content>
                    <page_no>3</page_no>
                </page>           
                <page>
                    <content>
                        CONTENT FROM eee.html
                    </content>
                    <page_no>4</page_no>
                </page>                   
                <subscection_total_pages>4</subscection_total_pages>
            </subsection>  
            <scection_total_pages>4</scection_total_pages>
        </section>    
        <section>       
            <subsection>  
                <page>
                    <content>
                        CONTENT FROM fff.html
                        CONTENT FROM ggg.html
                    </content>
                    <page_no>1</page_no>
                </page>           
                <page>
                    <content>
                        CONTENT FROM hhh.html
                    </content>
                    <page_no>2</page_no>
                </page>            
                <page>
                    <content>
                        CONTENT FROM iii.html
                        CONTENT FROM jjj.html
                    </content>
                    <page_no>3</page_no>
                </page>
                <subscection_total_pages>3</subscection_total_pages>
            </subsection>        
            <subsection>            
                <page>
                    <content>
                        CONTENT FROM kkk.html
                        CONTENT FROM lll.html
                    </content>
                    <page_no>1</page_no>
                </page>           
                <page>
                    <content>
                        CONTENT FROM mmm.html
                        CONTENT FROM nnn.html
                    </content>
                    <page_no>2</page_no>
                </page>           
                <page>
                    <content>
                        CONTENT FROM ooo.html
                        CONTENT FROM ppp.html
                    </content>
                    <page_no>3</page_no>
                </page>           
                <page>
                    <content>
                        CONTENT FROM qqq.html
                    </content>
                    <page_no>4</page_no>
                </page>
                <subscection_total_pages>4</subscection_total_pages>
            </subsection>
            <scection_total_pages>7</scection_total_pages>
        </section>    
    </AllSections> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:42:00.743

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:strip-space elements="*" />  

<xsl:key name="kModules" match="module[@group]" use="concat(generate-id(..), '|', @group)"/>

<xsl:template match="/*">
  <AllSections>
    <xsl:apply-templates />
  </AllSections>
</xsl:template>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="section">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
    <section_total_pages><xsl:number
       value="count(subsection/module[ not(@group) or 
  (generate-id()=generate-id( key('kModules',concat(generate-id(..),'|',@group))[1]))])"/>
    </section_total_pages> 
  </xsl:copy>
</xsl:template>

<xsl:template match="subsection">
  <xsl:variable name="subsect-id" select="concat(generate-id(),'|')" />
  <xsl:copy>
    <xsl:variable name="page-heads"
    select="module[ not(@group) or 
            (generate-id()=generate-id( key('kModules',concat($subsect-id, @group))[1]))]"/>
    <xsl:apply-templates select="
      @*| node()[not(self::module)] | $page-heads"/>
    <subsection_total_pages><xsl:number value="count($page-heads)"/></subsection_total_pages>
  </xsl:copy>
</xsl:template>  

<xsl:template match="module">
  <xsl:variable name="subsect-id" select="concat(generate-id(..),'|')" />
  <page>
   <content>
     <xsl:apply-templates select="key('kModules',concat($subsect-id, @group))/comp | comp" />
   </content>
   <page_no><xsl:number count="module[not(@group) or 
     (generate-id() =
      generate-id( key('kModules',concat($subsect-id, @group))[1]))]"/></page_no>  
  </page>
</xsl:template>

<xsl:template match="comp">
  <!-- Change this sequence constructor to do your document pulling bit. -->
  <xsl:comment>content from <xsl:value-of select="." /></xsl:comment>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于给定的样本输入时，产生...**

```
<AllSections>
  <section>
    <subsection>
      <page>
        <content>
          <!--content from aaa.html-->
        </content>
        <page_no>1</page_no>
      </page>
      <page>
        <content>
          <!--content from bbb.html-->
          <!--content from ccc.html-->
        </content>
        <page_no>2</page_no>
      </page>
      <page>
        <content>
          <!--content from ddd.html-->
        </content>
        <page_no>3</page_no>
      </page>
      <page>
        <content>
          <!--content from eee.html-->
        </content>
        <page_no>4</page_no>
      </page>
      <subsection_total_pages>4</subsection_total_pages>
    </subsection>
    <section_total_pages>4</section_total_pages>
  </section>
  <section>
    <subsection>
      <page>
        <content>
          <!--content from fff.html-->
          <!--content from ggg.html-->
        </content>
        <page_no>1</page_no>
      </page>
      <page>
        <content>
          <!--content from hhh.html-->
        </content>
        <page_no>2</page_no>
      </page>
      <page>
        <content>
          <!--content from iii.html-->
          <!--content from jjj.html-->
        </content>
        <page_no>3</page_no>
      </page>
      <subsection_total_pages>3</subsection_total_pages>
    </subsection>
    <subsection>
      <page>
        <content>
          <!--content from kkk.html-->
          <!--content from lll.html-->
        </content>
        <page_no>1</page_no>
      </page>
      <page>
        <content>
          <!--content from mmm.html-->
          <!--content from nnn.html-->
        </content>
        <page_no>2</page_no>
      </page>
      <page>
        <content>
          <!--content from ooo.html-->
          <!--content from ppp.html-->
        </content>
        <page_no>3</page_no>
      </page>
      <page>
        <content>
          <!--content from qqq.html-->
        </content>
        <page_no>4</page_no>
      </page>
      <subsection_total_pages>4</subsection_total_pages>
    </subsection>
    <section_total_pages>7</section_total_pages>
  </section>
</AllSections> 
```

## 笔记

1.  模板匹配`comp`是出于测试目的。出于生产目的，根据需要使用 document() 函数进行更改。
2.  我会避免将 Muenchian 测试置于匹配条件下。这将是非常痛苦的，因为经常测试模板匹配测试。
3.  你的问题的核心是通过`xsl:number`一个`count`属性来解决的。这是 xsl:number 存在的主要理由。（祝贺马丁的第一篇文章并正确使用了它。）
4.  您的示例输入中缺少尖括号。
5.  我认为这`subscection_total_pages`应该拼写为 subsection_total_pages，对于`scection_total_pages`.

## 有趣的替代解决方案

与其将处理`module`分为两种情况，不如发明一个对 all 有效的键`modules`，如果该`group`属性不存在，则键值是该属性的唯一值。以下采用这种方法的替代解决方案假定 generate-id() 函数永远不会包含双`@`字符。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:strip-space elements="*" />  

<xsl:key name="kModules" match="module" use="
  concat(generate-id(..),'|',
  substring-before( concat( generate-id(),'@',@group,'@',generate-id()), '@@' ),
  @group)"/>

<xsl:template match="/*">
  <AllSections>
    <xsl:apply-templates />
  </AllSections>
</xsl:template>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="section">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
    <section_total_pages><xsl:number
       value="count(subsection/module[  
  (generate-id()=generate-id( key('kModules',
        concat(generate-id(..),'|',
  substring-before( concat( generate-id(),'@',@group,'@',generate-id()), '@@' ),
  @group))[1]))])"/>
    </section_total_pages> 
  </xsl:copy>
</xsl:template>

<xsl:template match="subsection">
  <xsl:variable name="subsect-id" select="concat(generate-id(),'|')" />
  <xsl:copy>
    <xsl:variable name="page-heads"
    select="module[ 
            (generate-id()=generate-id( key('kModules',concat(generate-id(..),'|',
  substring-before( concat( generate-id(),'@',@group,'@',generate-id()), '@@' ),@group))[1]))]"/>
    <xsl:apply-templates select="@*| node()[not(self::module)] | $page-heads"/>
    <subsection_total_pages><xsl:number value="count($page-heads)"/></subsection_total_pages>
  </xsl:copy>
</xsl:template>  

<xsl:template match="module">
  <xsl:variable name="subsect-id" select="concat(generate-id(..),'|')" />
  <page>
   <content>
     <xsl:apply-templates select="key('kModules',concat(generate-id(..),'|',
  substring-before( concat( generate-id(),'@',@group,'@',generate-id()), '@@' ),
  @group))/comp" />
   </content>
   <page_no><xsl:number count="module[
     (generate-id()=generate-id( key('kModules',concat(generate-id(..),'|',
  substring-before( concat( generate-id(),'@',@group,'@',generate-id()), '@@' ),
  @group))[1]))]"/></page_no>  
  </page>
</xsl:template>

<xsl:template match="comp">
  <!-- Change this sequence constructor to do your document pulling bit. -->
  <xsl:comment>content from <xsl:value-of select="." /></xsl:comment>
</xsl:template>

</xsl:stylesheet> 
```

## 替代解决方案如何工作？

`value`考虑键值中使用的 Xpath 表达式的重要部分

```
concat(
  substring-before(
    concat( generate-id(), '@' ,@group, '@', generate-id()),
    '@@' ),
  @group
  ) 
```

如果@group 不存在或为空，则这相当于...

```
concat(
  substring-before(
    concat( generate-id(), '@@', generate-id()),
    '@@' ),
  @group
  ) 
```

... 或者 ...

```
concat( generate-id(), @group) 
```

... 或者 ...

```
generate-id() 
```

...这对于每个节点都是唯一的，这就是我们想要的。

但是如果@group 不为空，那么这相当于...

```
concat(
  '',
  @group
  ) 
```

... 或者 ...

```
@group 
```

允许将具有 group 属性的模块组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:27:27.147

这是我的建议：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
       <xsl:output method="xml" indent="yes"/>
       <xsl:strip-space elements="*"/>

       <xsl:key name="modules" match="module[@group]" use="concat(generate-id(..), '|', @group)"/>

       <xsl:template match="root">
           <AllSections>
               <xsl:apply-templates />
           </AllSections>
       </xsl:template>

       <xsl:template match="section">
         <xsl:copy>
           <xsl:apply-templates select="subsection"/>
           <section_total_pages>
             <xsl:value-of select="
             count(subsection/module[not(@group)]) + 
             count(subsection/module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])])"/>
           </section_total_pages>
         </xsl:copy>
       </xsl:template>

       <xsl:template match="subsection">
          <xsl:copy>
            <xsl:variable name="groups" select="module[not(@group)] | module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]"/>
            <xsl:apply-templates select="$groups"/>
            <subsection_total_pages>
              <xsl:value-of select="count($groups)"/>
            </subsection_total_pages>
          </xsl:copy>
        </xsl:template>

       <!-- NON GROUPED PART -->
       <xsl:template match="module[not(@group)]">
              <page>
               <content>
                <xsl:copy-of select="document(concat('../myfile/', comp))"/>
               </content>
               <xsl:apply-templates select="." mode="page-no"/>
             </page>
       </xsl:template>

       <!--GROUPED PART -->
       <xsl:template match="module[@group]">
           <xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
           <page>
               <content>
                <xsl:for-each select="$modules/comp">
                  <xsl:copy-of select="document(concat('../myfile/', .))"/>
                </xsl:for-each>
               </content>
               <xsl:apply-templates select="." mode="page-no"/>
           </page>
       </xsl:template>

       <xsl:template match="module" mode="page-no">
               <page_no>
                 <xsl:number count="module[not(@group)] | module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]"/>
               </page_no>
       </xsl:template>

       <xsl:template match="@*|node()">
           <xsl:copy>
               <xsl:apply-templates select="@*|node()"/>
           </xsl:copy>
       </xsl:template>
   </xsl:stylesheet> 
```

当我使用 Saxon 6.5.5 将上述代码应用于输入时

```
<root>
    <section>
        <subsection>
            <module>
                <comp>aaa.html</comp>
            </module>
            <module group='group01'>
                <comp>bbb.html</comp>
            </module>
            <module group='group01'>
                <comp>ccc.html</comp>
            </module>
            <module>
                <comp>ddd.html</comp>
            </module>
            <module>
                <comp>eee.html</comp>
            </module>
        </subsection>
    </section>
    <section>
        <subsection>
            <module group ="group02">
                <comp>fff.html</comp>
            </module>
            <module group ="group02">
                <comp>ggg.html</comp>
            </module>
            <module>
                <comp>hhh.html</comp>
            </module>
            <module group ="group03">
                <comp>iii.html</comp>
            </module>
            <module group ="group03">
                <comp>jjj.html</comp>
            </module>
        </subsection>
        <subsection>
            <module group ="group04">
                <comp>kkk.html</comp>
            </module>
            <module group ="group04">
                <comp>lll.html</comp>
            </module>
            <module group ="group05">
                <comp>mmm.html</comp>
            </module>
            <module group ="group05">
                <comp>nnn.html</comp>
            </module>
            <module group ="group06">
                <comp>ooo.html</comp>
            </module>
            <module group ="group06">
                <comp>ppp.html</comp>
            </module>
            <module>
                <comp>qqq.html</comp>
            </module>
        </subsection>
    </section>
</root> 
```

我得到结果

```
<AllSections>
   <section>
      <subsection>
         <page>
            <content/>
            <page_no>1</page_no>
         </page>
         <page>
            <content/>
            <page_no>2</page_no>
         </page>
         <page>
            <content/>
            <page_no>3</page_no>
         </page>
         <page>
            <content/>
            <page_no>4</page_no>
         </page>
         <subsection_total_pages>4</subsection_total_pages>
      </subsection>
      <section_total_pages>4</section_total_pages>
   </section>
   <section>
      <subsection>
         <page>
            <content/>
            <page_no>1</page_no>
         </page>
         <page>
            <content/>
            <page_no>2</page_no>
         </page>
         <page>
            <content/>
            <page_no>3</page_no>
         </page>
         <subsection_total_pages>3</subsection_total_pages>
      </subsection>
      <subsection>
         <page>
            <content/>
            <page_no>1</page_no>
         </page>
         <page>
            <content/>
            <page_no>2</page_no>
         </page>
         <page>
            <content/>
            <page_no>3</page_no>
         </page>
         <page>
            <content/>
            <page_no>4</page_no>
         </page>
         <subsection_total_pages>4</subsection_total_pages>
      </subsection>
      <section_total_pages>7</section_total_pages>
   </section>
</AllSections> 
```

这似乎有正确的总数。显然我没有要拉入这些文件，所以内容都丢失了。

# css - 创建两列布局 - html/css 语义

> ID：12914570
> 
> 赞同：1
> 
> 时间：2012-10-16T12:19:23.880
> 
> 标签：css, html, semantics

我想创建一个非常简单的带有 2 列的液体布局 - 左侧的一列将具有固定宽度，而右侧的一列将取决于窗口大小。

布局将包含 4 个元素 - 页眉、导航、内容和页脚。

根据此处 HTML5 元素的语义，我有几个问题。

这是代码：

```
<body>
   <div id="container">
       <header>
          <div id="header">
             sadfsdf
          </div>
       </header>
       <nav>
          <div id="nav">
             gdfsgf
          </div>
       </nav>
       <article>
          <div id="article">
             gdffgdg
          </div>
       </article>
       <footer>
          <div id="footer">
             gdfsgf
          </div>   
       </footer>
   </div>
</body> 
```

1) 容器 div 真的有必要吗？我所做的是： HTML 具有字体/线高属性 BODY 有一些边距和背景图像 CONTAINER 包含其余部分

可以将 body 的东西放在 html 中，并使 body 成为容器吗？

2）标题，导航，...中的内部div是否必要？它们在那里是因为我可以在不改变元素宽度的情况下更改填充、边距和边框。我是否应该在每次更改时设置此宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:24:18.417

1）是否需要容器 div 很大程度上取决于您的实际设计，但是从您所展示的内容中我可以看出，这并不是必需的。什么是身体物质？

2）你自己回答了你的问题。如果您想防止由于填充，边距，边框而溢出，请保留它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:31:18.610

在布局中有两个/更多列的最佳方法是：

*   浮动 N-1 列
*   将边距设置为另一个

**HTML**

```
<div id="left">LEFT</div>
<div id="right">RIGHT</div>
​ 
```

**CSS**

```
div#left{
    float:left;
    width:200px;
    min-height: 400px;
    background-color: magenta;
}
div#right{
    margin-left: 210px;
    min-height: 400px;
    background-color: yellow;
}
​ 
```

看看[这里](http://jsfiddle.net/YGQLF/1/)

编辑：

*   body 是高级容器，它包含所有传递给视图的元素。有时我们需要在页面中定位或形成我们的整个元素，而不改变每个元素相互比较的位置。所以作为一个称为容器的元素可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:23:58.297

1.  是的，你可以用你的身体作为你的容器。
2.  只要您`box-sizing: border-box;`在此处使用更多信息，您就可以摆脱您的内部 div-s：http: [//css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:55:47.253

您可以研究的一件事是使用脚手架。

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html) 这是来自流体布局部分。虽然它不使用固定跨度，但您可以使用嵌套容器。

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <!--Sidebar content-->
    </div>
    <div class="span10">
      <!--Body content-->
    </div>
  </div>
</div> 
```

# jquery - PrettyPhoto Jquery 插件，使用 span 代替 anchor 并获得相同的结果

> ID：12914575
> 
> 赞同：0
> 
> 时间：2012-10-16T12:19:34.583
> 
> 标签：jquery, lightbox, prettyphoto

我使用 PrettyPhoto Jquery 插件作为 Lightbox 来在我的网站上显示图像，当用户单击缩略图时，图像会出现在叠加 DIV 中。

默认情况下，PrettyPhoto 使用`<a>`围绕图像的锚链接 ( )。锚点具有指向图像原始大小/更大版本的链接。我不想使用`<a>`标签，因为我更喜欢这些图像不会被索引并且不会使用nofollow。是否可以选择替换`<a>`例如并获得相同的结果？

我自己尝试过，但它没有按预期触发带有原始图像的覆盖 div。也许我可以在代码中做一些事情来使它工作。

再次，不要：

```
 <a href="original-image.jpg"><img src="thumb,jpg /></a> 
```

想要：

```
 <span data-source="original-image.jpg"><img src="thumb.jpg /></span> 
```

原文件非压缩Jquery插件可以[通过这个链接下载](http://www.no-margin-for-errors.com/demos/prettyPhoto-jquery-lightbox-clone/prettyPhoto_uncompressed_3.1.4.zip)

另一个可能不错的选择是保留 anchoe，但使用`href="#"`原始图像 URL 并将其放在另一个属性中，例如“数据源”并从那里读取它。这甚至是一个更好的选择。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:33:36.730

尝试在插件中更改此行

```
pp_images = (isSet) ? jQuery.map(matchedObjects, function(n, i){ if($(n).attr(settings.hook).indexOf(theRel) != -1) return $(n).attr('href'); }) : $.makeArray($(this).attr('href')); 
```

至

```
pp_images = (isSet) ? jQuery.map(matchedObjects, function(n, i){ if($(n).attr(settings.hook).indexOf(theRel) != -1) return $(n).attr('data-source'); }) : $.makeArray($(this).attr('data-source')); 
```

编辑：和

```
set_position = jQuery.inArray($(this).attr('href'), pp_images); // Define where in the array the clicked item is positionned 
```

至

```
set_position = jQuery.inArray($(this).attr('data-source'), pp_images); // Define where in the array the clicked item is positionned 
```

# c# - CRM 2011 自定义工作流程 - 获取当前会计年度

> ID：12914580
> 
> 赞同：0
> 
> 时间：2012-10-16T12:19:56.030
> 
> 标签：c#, dynamics-crm-2011, workflow-activity

我有一个自定义的 CRM 2011 工作流程，需要知道当前财政年度。目前我只是为条件运算符传入一个整数值（2012），见下文：

```
complianceRecordCondition.AttributeName = "new_complianceStartDate";
complianceRecordCondition.Operator = ConditionOperator.InFiscalPeriod;
complianceRecordCondition.Values.Add(2012); 
```

我需要做的是，我需要以某种方式计算/获取当前财政年度并将其放入值中，而不是在值中添加 2012。

谁能解释我是怎么做的？

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:22:23.600

我自己没用过财务部分，所以有点陌生，但是你见过这些其他的条件运算符吗？

```
public enum ConditionOperator
{        
    ...
    ThisFiscalYear = 58,        
    ThisFiscalPeriod = 59,        
    NextFiscalYear = 60,        
    NextFiscalPeriod = 61,        
    LastFiscalYear = 62,        
    LastFiscalPeriod = 63,        
    LastXFiscalYears = 64,        
    LastXFiscalPeriods = 65,        
    NextXFiscalYears = 66,        
    NextXFiscalPeriods = 67,        
    InFiscalYear = 68,        
    InFiscalPeriod = 69,        
    InFiscalPeriodAndYear = 70,        
    InOrBeforeFiscalPeriodAndYear = 71,        
    InOrAfterFiscalPeriodAndYear = 72,
    ...
} 
```

它们看起来更接近您想要实现的目标，尤其是`ThisFiscalYear`.

我希望过滤器看起来更像这样：

```
complianceRecordCondition.AttributeName = "intellic_complianceStartDate";   
complianceRecordCondition.Operator = ConditionOperator.ThisFiscalYear; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T11:05:16.600

要根据 crm 财政年度设置获得财政年度，您必须放弃这些步骤。

1.  从组织实体检索会计年度开始日期。
2.  然后计算当前会计年度。您可以在此链接中获取代码

    [在 crm 中获取当前会计年度](http://crmjavascripts.blogspot.in/2013/06/current-fiscal-year-in-crm-2011.html)

# xml - 如何在 PowerShell 中将位于不同文件夹路径中的多个 XML 文件合并为一个 XML 文件？

> ID：12914586
> 
> 赞同：0
> 
> 时间：2012-10-16T12:20:29.940
> 
> 标签：xml, powershell, merge

我有 3 个位于不同项目文件夹路径中的 XML 文件要合并为一个。
例如：

```
$Xml1 = "C:\XmlFolder1\XmlList1.xml
$Xml2 = "C:\XmlFolder2\XmlList2.xml
$Xml3 = "C:\XmlFolder3\XmlList3.xml 
```

我需要将这 3 个 xml 文件合并为一个，例如 - $MainXml = MainXml.xml（即 $Xml1 + $Xml2 + $Xml3）

所有 Xml 文件都包含相同的属性。
例如：示例 Xml 片段

```
<Projects>
<Project>C:\Foldercommon\project1.vbproj</Project>
<Project>C:\Foldercommon\project2.vbproj</Project>
</Projects> 
```

我的函数中有一个通用的 xml 逻辑，可以使用 $MainXml 来实现。

任何帮助将不胜感激。

谢谢！
阿什什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:41:24.790

我通过使用它来工作：

```
$content1 = Get-Content $xml1 | Sort-Object
$content2 = Get-Content $xml2 | Sort-Object
$content3 = Get-Content $xml3 | Sort-Object

$XmlContent = $content1 +$content2 +$content3 
```

但是作为 Powershell 的新手，渴望学习在 PowerShell 中使用 XML 的新的最佳方法 :)

非常感谢克里斯蒂安到目前为止的帮助:)

# c - 在 C 中将 ISO-8859-1 字符串转换为 GSM 字符串

> ID：12914587
> 
> 赞同：4
> 
> 时间：2012-10-16T12:20:37.727
> 
> 标签：c, sockets, iso-8859-1

我使用 read 函数从 TCP 套接字读取了一些文本（已知在 ISO-8859-1 中），然后我做了一些基本的子字符串替换。最后，我想将字符串转换为 GSM 等效项。

最好（但不一定）我会做这样的事情：

```
size_t i;
for (i=0; i<size; i++) {
  switch (string[i]) {
    case 65:
      //Convert this character
    case 163:
      //Convert this character (the pound symbol £)
  }
} 
```

我更喜欢 switch 的可读性，但也考虑了 if-else 语句。

这适用于普通的 ASCII 字符，但 ISO-8859-1 的顶部给我带来了各种问题。显然，它们被视为多个字符。任何有关如何进行转换的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:03:28.097

在您的情况下`char`似乎已签署。您可以使用 char 文字并使用 ASCII 127 以外的 char 值的符号来规避整个问题：

```
/* ascii: */
case '\000': /* U+0000 - nul */
...    
/* extended ascii: */
case '\200': /* U+0080 - non-printable control character */
...
case '\243': /* U+00A3 - sterling pound */
...
case '\377': /* U+00ff - lower case y with dieresis */ 
```

但是，通过在数组中查找来实现转换可能更有效。

如果您输入的“扩展 ASCII”部分表示为多个字符，则您的输入很可能实际上是用 UTF-8 或类似的东西编码的。

# cordova - Phonegap 无法存档，出现此错误“Command / usr / sbin / chown failed with exit code 1”

> ID：12914593
> 
> 赞同：3
> 
> 时间：2012-10-16T12:21:05.997
> 
> 标签：cordova

我使用 Xcode 4.5.1 并使用最新的安装包 PhoneGap "2.1.0" 我安装了以下内容：

1.  新建一个文件夹名称为PhoneGapApp。
2.  复制两个文件夹：“bin”和“CordovaLib”目录PhoneGapApp 可用。
3.  运行终端：
    *   Chmod-R 777 用于所有文件夹“PhoneGapApp”。
    *   使用 cd 命令移动文件夹“bin”。
    *   运行bin目录下的“Create”创建一个新的应用程序，命名为：newappphonegap
4.  在 Xcode 中打开 New Project -> 选择 Device 并进行存档。运行应用程序后出现以下错误消息：

> SetOwnerAndGroup "NGUYEN:staff" /Users/NGUYEN/Library/Developer/Xcode/DerivedData/phonegap-bbxcrooiwxhhpkbtvbseflkcjksr/Build/Intermediates/ArchiveIntermediates/CordovaLib/IntermediateBuildFilesPath/UninstalledProducts/libCordova.a cd "/Volumes/MacBook Pro Data/phonegapapp/CordovaLib " setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin: /usr/sbin:/sbin" /usr/sbin/chown -RH "NGUYEN:staff" /Users/NGUYEN/Library/Developer/Xcode/DerivedData/phonegap-bbxcrooiwxhhpkbtvbseflkcjksr/Build/Intermediates/ArchiveIntermediates/CordovaLib/IntermediateBuildFilesPath/UninstalledProducts/ libCordova.a
> 
> chown：/Users/NGUYEN/Library/Developer/Xcode/DerivedData/phonegap-bbxcrooiwxhhpkbtvbseflkcjksr/Build/Intermediates/ArchiveIntermediates/CordovaLib/IntermediateBuildFilesPath/UninstalledProducts/libCordova.a：没有这样的文件或目录命令/usr/sbin/chown 退出失败代码 1

我删除了 ARMv6 项目和 Cordova，但仍然出现此错误，我还尝试在 Internet 上找到此错误并按照但几乎没有结果。

谁能帮我。谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T22:00:18.990

我发现并尝试的是以下内容：

*   在项目的 Build Settings 下设置`Build Active Architecture Only`为`YES`.

您可能还想将显示文件列表的项目导航图标下的 CordovaLib.xcodeproj 设置为 YES。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T23:24:14.537

我通过做 grainlarceny 所说的两件事来让它工作

1.  在项目的 Build Settings 下，将**Build Active Architecture Only**设置为 YES。

2.  在 CordovaLib.xcodeproj 项目的 Build Settings 下（必须选择所有选项）将**Build Active Architecture Only**设置为 YES

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T18:07:58.033

实际上，我通过从运行 XCode 的 macbook 上断开设备来消除此错误。一旦没有设备连接，所有编译和链接都没有错误。连接设备后，我总是收到这个愚蠢的 SetOwnerAndGroup 错误......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-31T15:30:53.543

我最近也遇到了这个错误。关闭并重新启动 XCode 为我修复了它。

# apache - 为什么我无法在 Apache 中添加 mod_proxy.c？

> ID：12914594
> 
> 赞同：1
> 
> 时间：2012-10-16T12:21:07.180
> 
> 标签：apache, tomcat

在我的`httpd.conf`文件中，我有以下几行：

```
LoadModule proxy_module  /usr/lib/apache2/modules/mod_proxy.so
AddModule  mod_proxy.c

ProxyPass         /myapp  http://ec2-54-242-101-196.compute-1.amazonaws.com:8080/
ProxyPassReverse  /myapp  http://ec2-54-242-101-196.compute-1.amazonaws.com:8080/ 
```

当我重新启动 apache 时，出现如下错误：

```
Syntax error on line 2 of /etc/apache2/httpd.conf:
Invalid command 'AddModule', perhaps misspelled or defined by a module not included in the server configuration
Action 'configtest' failed.
The Apache error log may have more information.
   ...fail! 
```

[我按照这里](http://tomcat.apache.org/tomcat-4.1-doc/proxy-howto.html)的教程表格。

我在哪里犯错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:43:36.713

该`AddModule`指令在 httpd 2.0 及更高版本中不存在。去掉它。

你真的在使用 Apache httpd 1.3 吗？阅读您引用的整个页面的最后一行。另外，您真的在使用 Tomcat 4.1 吗？尝试使用您实际使用的版本的文档。事实上，忘记 Tomcat 文档。去[httpd 文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)。

# c# - WPF中关于线程的问题

> ID：12914595
> 
> 赞同：0
> 
> 时间：2012-10-16T12:21:07.903
> 
> 标签：c#, .net, wpf

我试图了解 WPF 中的线程，这是代码片段：

```
 public MainWindow()
    {
        InitializeComponent();
        start = delegate()
        {
            statusText.Text = "From Other Thread";
        };
        t = new Thread(start);
        t.Start();
    } 
```

正如书中所说，它会有例外，所以它是。我了解到这是因为调度线程的一些事情。然后我在按钮点击处理函数中放入了一行代码，如下代码：`

```
public partial class MainWindow : Window
{
    ThreadStart start;
    Thread t;
    public MainWindow()
    {
        InitializeComponent();
        start = delegate()
        {
            statusText.Text = "From Other Thread";
        };
        t = new Thread(start);

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        t.Start();
    } 
```

我希望它会像以前一样有例外，但什么也没发生，文本也没有改变。对我来说太奇怪了。为什么会这样？希望有人可以提供一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:42:23.933

为了从另一个线程更新 ui 组件，您必须使用 Dispatcher：

```
public MainWindow() 
{ 
   InitializeComponent(); 
   start = delegate() 
    { 
       Dispatcher.BeginInvoke(((Action)(() => {statusText.Text = "From Other Thread";})));
    }; 
    t = new Thread(start); 

} 
```

# vb.net - 如何删除数据网格中的行

> ID：12914597
> 
> 赞同：0
> 
> 时间：2012-10-16T12:21:14.627
> 
> 标签：vb.net

使用VB.net

数据网格

```
id value

01 Rajan
02 Raman
03 Suresh
..... 
```

文本框1.文本 =`01/02`

所以我想从数据网格中删除 id 01, 02。

尝试代码'用于使用数组从文本框中拆分值

```
Dim zValue As String
Dim splitBySlash As String()
zValue = textbox1.text
splitBySlash = zValue.Split("/") 
```

现在我想传递这个数组值以从数据网格中删除行。

这个怎么做。

需要vb.net代码帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:44:19.120

这将是一些伪代码，所以不要只是复制和过去并期望它工作。还有更多方法可以做到这一点......这也意味着 Datagrid 是一个 Datagridview 并且 Id 是第一列。我不确定，但 datagrid.Rows(i).Cells("id") 也可能有效。

```
For each s as String in splitBySlash
   For i as integer = 0 To datagrid.Rows.Count - 1
       if datagrid.Rows(i).Cells(0).ToString = s Then
           datagrid.Rows.RemoveAt(i)
           Exit for
       end if
   Next
Next 
```

# c# - 资源中的 Process.Start() 文件

> ID：12914598
> 
> 赞同：0
> 
> 时间：2012-10-16T12:21:15.870
> 
> 标签：c#

我想打开一个 Microsoft Word 文件 (.docx)。所以我尝试使用这段代码：

```
System.Diagnostics.Process.Start(@"C:\Users\Max\Documents\Visual Studio 2008\Projects\Verenigingspakket\Verenigingspakket\Resources\Help.docx"); 
```

但是现在我想通过使用我的资源中的 Help.Docx 以这种方式运行它：

```
System.Diagnostics.Process.Start(Properties.Resources.Help); 
```

但是该代码不起作用，因为它不是 .Start(); 的良好重载；

有谁知道如何解决这个问题并给我一点帮助？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:27:29.143

您必须先将其写入文件系统。也许像这样：

```
using (FileStream fileStream = new FileStream(@"C:\Help.docx", FileMode.Create, FileAccess.Write))
{
    using (BinaryWriter binaryWriter = new BinaryWriter(fileStream))
    {
        binaryWriter.Write(Properties.Resources.Help);
    }
} 
```

编辑：对于那些想知道的人，我应该注意：资源中的二进制文件作为字节数组返回..因此为什么你可以将它们直接传递给`BinaryWriter.Write()`

# sql - 基于会计实体的结果集的 SQL 唯一序列 ID

> ID：12914604
> 
> 赞同：1
> 
> 时间：2012-10-16T12:21:35.877
> 
> 标签：sql, sequence

我有一个这种格式的会计结果集：

**发票编号、日期、会计部门、借方金额、贷方金额、顺序**

它包含费用和付款。它由“会计实体”组成。

会计实体是一组记录，其中包含单个发票的所有费用和付款

我需要为 Sequence 字段生成一个顺序编号 - 每个实体一个

可以使用光标来完成，但我想学习一种更优雅的方式

谢谢！

例子

发票编号、日期、会计部门、借方金额、贷方金额、**顺序**

1300,2012-02-01,AA,25,NULL, **1**

1300,2012-02-01,BB,45,NULL, **1**

1300,2012-02-01,NULL,65, **1**

1301,2012-02-01,AA,10,NULL, **2**

1301,2012-02-01,NULL,NULL,10, **2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:44:33.833

```
SELECT
  *,
  DENSE_RANK() OVER (ORDER BY InvoiceNo) AS sequence
FROM
  yourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:28:58.323

如果你有 MSSQL，你可以使用 *ROW_NUMBER* 函数

```
SELECT *, ROW_NUMBER() OVER (ORDER BY InvoiceNo) AS Sequence
FROM [Table] 
```

# sql - 自然加入场景

> ID：12914609
> 
> 赞同：3
> 
> 时间：2012-10-16T12:21:55.547
> 
> 标签：sql, oracle

当我们使用 NATURAL JOIN 连接两个表时，连接操作是在 Common Column Names 的基础上执行的。当我们在两个表中有两个同名的列时，只显示公共记录。

我有一个查询，当我们有同名但数据类型不同的列时，这些列也会被连接。我的意思是假设 table1 中的 column_1 具有数据类型 INTEGER，而 table2 中的 column_1 具有数据类型 VARCHAR，连接是基于这两列执行的。

简而言之，当同名的两列的数据类型不同时，自然连接如何发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T12:25:22.860

`NATURAL JOIN`被普遍接受为一种反模式。

它会导致许多可维护性问题。这只是其中之一。

而是使用显式连接，您可以在其中键入强制转换字段。

```
 table1
INNER JOIN
  table2
    ON table2.fieldX = CAST(table1.fieldX AS INT) 
```

根据经验和个人喜好，显式比隐式更易于维护。并且没有性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:28:26.440

数据类型不必匹配，只要它们可以相互转换。但是，如果数据类型不一致，优化器可能无法使用索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T22:59:46.800

如果您使用不同的数据类型，则在执行匹配之前强制进行数据类型转换。那是额外的工作。另一方面，如果没有对列执行任何数学运算并且该值未用作数字，则应将其存储为字符。

为属性选择数据类型后，您应该在定义该列的所有表中为该属性使用相同的数据类型。否则，您最终可能会进行隐式转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-29T19:54:43.807

在脚本或查询中使用自然连接时请始终牢记。

*   关联表具有一对或多对同名列。
*   如果该列的所有行都可以进行隐式转换，则这些列可以具有不同的数据类型，否则该列将被排除。
*   不要在自然连接中使用 ON 子句。

指定 NATURAL JOIN 时，连接基于具有相同名称和“相同日期类型或不同数据类型：如果隐式转换是可能的”的所有列。指定 JOIN USING 时，仅连接指定的列。

自然连接不是一个好习惯，因为

1.如果在不同数据类型但相同名称的情况下隐式转换失败，它将忽略该列。

2.如果列名将来被重命名。

3.如果其他列被添加到同名的表中

# c++ - 编码风格 - 在 NULL 检查内部 if 条件后调用指针上的方法

> ID：12914610
> 
> 赞同：2
> 
> 时间：2012-10-16T12:21:56.310
> 
> 标签：c++, if-statement, coding-style

假设我们有两个指向可以包含相等属性的对象的指针，我们想要检查它。但首先，我们需要检查指针是否已初始化。通常首选什么选项？它会对性能产生一些微观影响吗？

```
if(p1 && p2 && p1->getA() == p2->getB()){
    execute fancy code
} 
```

或者：

```
if(p1 && p2){
    if(p1->getA() == p2->getB()){
        execute fancy code
    }
} 
```

我想知道通常首选的是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:26:34.603

首先，`if (ptr)`不检查指针是否被初始化，它检查它是否不是 NULL。您可以初始化一个指向 NULL 的指针并且条件不成立。

其次，有两种情况需要处理：

**1）代码逻辑允许指针是`NULL`**

在这种情况下，您肯定希望这两种情况有不同的行为。所以合适的是：

```
if ( ptr )
{  
   ptr->foo();
   //...
}
else
{
   //...
} 
```

第二种语法在语义上没有多大意义`if ( ptr && ptr->foo() )`，意味着您希望`ptr`在调用之前确定 is not NULL ，而不是将绑定到is not`foo()`的情况的逻辑分组到用例中。`foo``false`

**2）指针不允许`NULL`**

如果不允许它们存在`NULL`，那么您应该处理它们存在的情况，而`NULL`不是完全排除它，这就是

```
if ( ptr && ptr->foo() ) 
```

做。但是通过让它燃烧：

```
if ( !ptr )
    throw std::exception("WTF! This shouldn't be NULL"); 
```

`ptr && ptr->foo()`似乎它是为了防止崩溃，但同时隐藏错误。在一个干净的逻辑中，您不需要检查`NULL`. 如果对象没有被创建并且指针没有指向任何有意义的东西，那么无论你是否调用，你都会遇到一个错误`foo`，所以你应该处理它，而不是把它隐藏在检查之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:24:17.243

性能 - 没有区别。编译器几乎肯定会在每种情况下生成相同的代码。

就个人而言，我更喜欢前者，因为它更惯用。你*经常*在 C/C++ 中看到这样的代码：

```
if (ptr && *ptr == x) 
```

你写的只是这个的一个小扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T12:37:10.083

出于易读性和维护目的，我更喜欢第二个：

```
// First thing is to check the pointers
if(p1 && p2){
    // Second thing is call the getters.
    if(p1->getA() == p2->getB()){
        // execute fancy code
    }
} 
```

当我在调试时，被困在一条有太多条件的行中是很麻烦的，因为不清楚哪个条件使整个事情成为`true`或`false`没有一次检查每个子条件。但是当每个相关的条件都放在分开`if`的 s 中时，它会更清晰、更容易理解、更容易调试并且不会很臃肿。

但是，如果我被迫使用第一个（有时你被迫使用一些编码风格），我将使用括号来强调表达式的两个部分：

```
// Look: FIRST check the pointers and...
// and THEN call the getters.
if ( (p1 && p2) && (p1->getA() == p2->getB()) ){
    // execute fancy code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:35:06.607

我更喜欢`if((p1 != NULL) && (p2 != NULL) && (p1->getA() == p2->getB())){ }`. 使用括号使代码直截了当，并消除了“猜测”优先级。显式比隐式是要走的路。任何体面的生产级编译器都会为两个 if() 语句生成相同的代码。

# entity-framework - 如何在 Entity Framework Code First 中自定义模型和数据库表之间的“复杂”映射

> ID：12914611
> 
> 赞同：1
> 
> 时间：2012-10-16T12:21:56.433
> 
> 标签：entity-framework

是否可以添加一个名为“IP”的自定义属性（数据注释），例如：

```
public class User
{
   public int UserId {get; set;}

   [IP]
   public string UserIP {get; set;}
} 
```

在这种情况下，[IP] 包括 [MaxLengt(20)] 和 [Column("IP")]，或更多其他数据注释。

```
public class User
{
   public int UserId {get; set;}

   [MaxLength(20)]
   [Column("IP")]
   public string UserIP {get; set;}
} 
```

我还需要 [IP] 数据注释可以在代码优先自动迁移中工作。

任何帮助将不胜感激。谢谢！

# c# - 通过字符串名称获取抽象类

> ID：12914613
> 
> 赞同：2
> 
> 时间：2012-10-16T12:21:57.463
> 
> 标签：c#, asp.net

我有两节课：

```
 class Car<T>
{
    public string color { get; set; }
    public virtual T features { get; set; }
    public virtual void TestDrive();
}
class Toyota : Car<ToyotaFeatures>
{
    public override ToyotaFeatures features { get; set; }
    public override void TestDrive()
    {
        //Logic here...
    }
} 
```

现在我有一个完整的字符串类名：“MySol.MyProj.Toyota”
我想用我的字符串名实例化一个类，然后运行 ​​TestDrive()。
问题是，当我尝试运行时，`Activator.CreateInstance(null, "MySol.MyProj.Toyota");`
我无法将其转换为基类并运行 testDrive，因为它期望将 ToyotaFeatures 类传递给它。但我只想运行只有一个字符串类名的 TestDrive() 。

而且我不想将其转换为特定类型。仅用于基本类型，因此它可以根据提供的字符串决定运行哪个 TestDrive()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:33:45.533

```
Type type = Type.GetType("MySol.MyProj.Toyota");

var obj = Activator.CreateInstance(type);
type.GetMethod("TestDrive").Invoke(obj, null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:29:25.947

为此，界面非常好。

```
interface ITestDrivable
{
    void TestDrive();
} 
```

您的抽象类实现了接口：

```
class Car<T> : ITestDrivable
{
    public string Color { get; set; }
    public virtual T Features { get; set; }
    public abstract void TestDrive() { }
} 
```

铸造非常容易：

```
ITestDrivable car = (ITestDrivable)Activator.CreateInstance(null, "MySol.MyProj.Toyota");
car.TestDrive(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:47:00.187

您应该在您的类中实现接口[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)，然后使用方法[Convert.ChangeType(..)](http://msdn.microsoft.com/en-us/library/system.convert.changetype.aspx)。代码示例可以是：

```
 // hords the created object
   object createdByActivator = ....;
   Car objectAsCar = Convert.ChangeType(createdByActivator, Type.GetType("MySol.MyProj.Toyota" 
```

)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:34:48.727

这有什么意义吗：

```
abstract class CarFeatures { }

class ToyotaFeatures : CarFeatures { }

abstract class Car
{
    public string color { get; set; }
    public virtual void TestDrive() { }
}

abstract class Car<T> : Car where T : CarFeatures
{
    public virtual T features { get; set; }

    public Car(T _features)
    {
        features = _features;
    }
}

class Toyota : Car<ToyotaFeatures>
{
    public override ToyotaFeatures features { get; set; }

    public Toyota(ToyotaFeatures _features) : base(_features) { }

    public override void TestDrive()
    {
        //Logic here...
    }
} 
```

不止一次，我从一个非泛型类派生出我的泛型类，以放置我所有不依赖泛型的常用方法和字段，让我可以轻松访问它们。

```
ToyotaFeatures features = new ToyotaFeatures();
Car car = (Car)Activator.CreateInstance(typeof(Toyota), new object[] { features });
car.TestDrive(); 
```

但是，如果有人有更好的解决方案，我也会感兴趣。

编辑：如上所述，界面很酷，但我的经验法则是“如果只将界面用于一个类，请不要创建界面”。但它有效。

重新编辑：问题是用一组参数实例化一个通用对象。

# html - Sprite css 菜单 - 无法在菜单上对齐 div 中的大徽标

> ID：12914615
> 
> 赞同：1
> 
> 时间：2012-10-16T12:22:00.057
> 
> 标签：html, css, sprite, css-sprites

我已经和这个问题斗争了好几天了。我有一个精灵菜单，可以按预期与我的所有悬停事件一起使用，但是我想将完整的徽标放在我的“中心”元素的顶部。当我在 Dreamweaver 中时，它会按预期显示，但是当我使用 Safari 或 Chrome 时，“徽标”元素中的徽标错位了。任何帮助将不胜感激。

这是HTML。

```
<div id="logo">
<h1 class="logo">
<a href="#" title="Test">Logo</a>
</h1>
</div>
<ul>
 <li><a class="home" href="#">Home</a></li>
 <li><a class="products" href="#">Products</a></li>
 <li><a class="philosophy" href="#">Philosophy</a></li>
 <li><a class="center" href="#">Center</a></li>
 <li><a class="news" href="#">News</a></li>
 <li><a class="myaccount" href="#">My Account</a></li>
 <li><a class="customercare" href="#">Contact Us</a></li>
</ul>​ 
```

这是菜单元素之一的 CSS 以及中心图像的 CSS。

```
ul {
width: 1000px;
margin-top: 100px;
margin-right: auto;
margin-left: auto;
list-style-type: none; 
}

ul li {
float: left;    
}

ul li a {
height: 50px;
display: block;
text-indent: -9999px;
}

/*home*/
ul li a.home {
background-image: url('sprites.optimized.png');
background-repeat: no-repeat;
background-position: 0px 0px;
width: 100px;
}

ul li a.home:hover {
background-image: url('sprites.optimized.png');
background-repeat: no-repeat;
background-position: 0px -50px;
}
/*Main Logo*/
#logo {
position: absolute;
width: 100%;
}

#logo h1 {
/* [disabled]height: 100px; */
/* [disabled]width: 201px; */
margin: -100px 282px;
/* [disabled]padding: 0; */
}

#logo h1 a {
color: transparent;
background: transparent url('CenterLogo.png') no-repeat;
width: 370px;
height: 201px;
top: 10px;
left: 30px;
margin: 0 0;
z-index: 200;
}

/***** Header Logo *****/
h1.logo a {
background: url('CenterLogo.png') no-repeat center right /* Company Logo */;
display: block;
height: 35px /* Sets overall height of header */;
margin: 0px 0 0 -2000px ;
outline: none /* Removes Link Outline */;
position: relative;
text-decoration: none;
top: 0px;
width: 2195px;
}​ 
```

编辑 1 -------- Per Tim 我做了以下更改

```
ul {
    width: 1000px;
    margin-top: 100px;
    margin-right: auto;
    margin-left: auto;
    list-style-type: none;
    display: block;
}
ul li {
    float: left;
    display: block;
} 
```

我还更改了徽标间距并将其切换为相对，以查看是否可以将其放置在正确的位置。

```
/*Main Logo*/
#logo {
    position: relative;
    width: 100%;
}
#logo h1 {
    /* [disabled]height: 100px; */
    /* [disabled]width: 201px; */
    margin: -100px 282px;
    /* [disabled]padding: 0; */
} 
```

我现在可以让它显示在正确的位置，但是当我缩放窗口时，菜单会远离徽标。

编辑 2 ------ Per Kraz 我做了以下更改。菜单现在按预期运行。

```
ul {
    width: 1000px;
    margin-top: 100px;
    /*margin-right: auto;*/
    /*margin-left: auto;*/
    list-style-type: none;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:46:45.913

> 但是，当我缩放窗口时，菜单会远离徽标。

你的标志是一个相对定位的块元素。你的菜单也是一个相对定位的块元素。

您的标志只是出现在它必须出现的地方。（左上角）

但是，您的菜单作为特定宽度（1000 像素）并且它的左右边距设置为`auto`. 因此**，它根据其容器宽度居中**。而且由于它可能是正文，因此增加页面宽度会将菜单向右移动。

# ruby - 捕获小黄瓜表中的尾随空格

> ID：12914618
> 
> 赞同：3
> 
> 时间：2012-10-16T12:22:02.397
> 
> 标签：ruby, cucumber, bdd, gherkin

假设我有两个这样的场景：

```
Scenario: scenario 1
  Given foo
  When "meh"
  Then the output should be "hello"

Scenario: scenario 2
  Given foo
  When "blah"
  Then the output should be "hello " 
```

我尝试将它们转换为这样的场景大纲

```
Scenario Outline:
  Given foo
  When <bar>
  Then the output should be <output_string>
  Examples:
  | bar | output_string |
  | meh | hello         |
  | blah| hello         | 
```

事情失败了，因为小黄瓜表格单元格在处理之前已经修剪了它们的空白。有什么方法可以捕获第二个示例中“hello”的尾随空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T17:48:51.650

将单元格数据放在单引号（或您喜欢的分隔符）中，并添加一个[`Transform`](https://github.com/cucumber/cucumber/wiki/Step-Argument-Transforms)将去除分隔符的。

在`foo.feature`：

```
Scenario Outline:
Given foo
When <bar>
Then the output should be <output_string>
Examples:
| bar | output_string |
| meh | 'hello'       |
| blah| 'hello '      | 
```

在`features/support/quoted_string_transform.rb`：

```
Transform /^'(.*)'$/ do |quoted_string|
  quoted_string
end 
```

转换将应用于所有匹配的捕获，因此请相应地选择分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:34:44.017

我相信解决方案是将单元格数据放在引号中：

```
Scenario Outline:
Given foo
When <bar>
Then the output should be <output_string>
Examples:
| bar | output_string |
| meh | "hello"       |
| blah| "hello "      | 
```

# android - 哪些用户的数据不能从使用我的应用程序的用户那里获取？

> ID：12914619
> 
> 赞同：0
> 
> 时间：2012-10-16T12:22:03.957
> 
> 标签：android, ios

我的应用程序有一个特殊的报告功能。因此，当用户想通过我的应用程序报告某些内容时，我**不能获取哪些用户和手机的数据并将其发送**到我的网络服务？

我所指的数据范围从联系人到手机的唯一 ID 等。

我也需要这些适用于 Android 和 iOS 的规定。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:40:03.593

根据经验，除非绝对必要，否则您永远不应发送电子邮件 ID、位置、联系人、消息等个人数据。如果你必须这样做，你应该在这样做之前明确地获得用户的许可，通过显示一个对话框或其他东西。简单地`this app may access and store personal data remotely`在描述中添加一行通常是不够的，因为很多人从未完整阅读过描述。

另一方面，像 IMEI 和 MAC 地址这样的电话 ID 是非常标准的识别技术，并且无论如何都被广告网络等使用，因此您通常不需要明确地告诉用户他们的收藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:40:58.440

我认为没有任何“规定”可以使用。乌兹别克斯坦有什么规定？巴布亚新几内亚等

您可以使用可能与任何[http://ec.europa.eu/justice/data-protection/index_en.htm一样先进的欧盟法规](http://ec.europa.eu/justice/data-protection/index_en.htm)

但是，您可以使用一种我无法想象会违反任何现有立法的方法：

*   仅收集支持您的应用/服务所需的信息。
*   告诉用户你在收集什么
*   解释你为什么需要它
*   解释您将如何使用和存储这些数据
*   为用户提供不发送数据的选项

# c++ - ADSi::setinfo() 无法使用 C++ 设置 AD 中的值？

> ID：12914620
> 
> 赞同：0
> 
> 时间：2012-10-16T12:22:07.673
> 
> 标签：c++, windows, com, active-directory

我正在使用 C++ 与 Active Directory 服务器 2003 交互...

```
VARIANT var;
VariantInit(&var);
V_BSTR(&var) = SysAllocString(L"sanju");
V_VT(&var) = VT_BSTR;
hr = pIADsrootDSE->Put(L"myattrib",var );
hr = pIADsrootDSE->SetInfo(); 
```

这种和平的代码工作，虽然它在调试时工作（设置值），在转换为 exe 和 dll 之后......但是这些代码不能工作，当我将转换成包时。我的日志文件告诉直到 Put() 工作正常...我的问题是 setinfo() 无法在我的包中工作...

谁能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:01:15.780

没有管理员权限的用户无法将值设置到 Active Directory 中。

# database - sqlite 插入语句 BAD MOJO

> ID：12914629
> 
> 赞同：0
> 
> 时间：2012-10-16T12:22:36.460
> 
> 标签：database, sqlite

我有一个简单的问题，可能有一个简单的解决方案，但解决方案暗示了我......所以我有一个简单的表格，即有 4 列的电话，我想添加一个新列。由于 SQLite 不修改表，我必须删除并创建。

**旧电话**

_id 整数主键自增，
名称文本不为空，
值文本

**电话**

_id 整数主键自增，
名称文本不为空，
itemState 文本不为空，
值文本

所以我执行以下操作： 1\. 我重命名旧表，2\. 我使用额外字段（在我的情况下是 itemState）创建新表，以及 3\. 我选择并插入为 itemstate 定义默认值的所有内容。

```
1 ALTER TABLE Phone RENAME TO Phone_OLD;

2 CREATE table Phone(
_id integer primary key autoincrement, 
name text not null, 
itemState text not null, 
value text ); 

3) INSERT INTO Phone SELECT * , 'Synced' as itemState from Phone_OLD where Phone_OLD. ; 
```

结果是项目状态（同步）被添加为最后一个字段，而不是在第 3 列中，即 itemState。

所以列名与行值不对应，这意味着 itemstate 添加在末尾（作为行中的最后一列，而不是应该的位置 3）

只需将 itemstate 放在最后就可以解决问题，但是由于生成了我的表创建语句，因此我必须重写一大堆代码才能这样做，而且老实说，这组查询返回废话让我很生气。 .

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:39:51.017

Sqlite 确实支持附加列

```
 ALTER TABLE Phone ADD COLUMN [itemState] text not null default '' 
```

# file-upload - 强制用户上传特定文件类型

> ID：12914630
> 
> 赞同：0
> 
> 时间：2012-10-16T12:22:36.187
> 
> 标签：file-upload

有没有办法通过限制“文件上传”对话框中的文件类型来让用户只上传图像文件，就像这里的 SWF 上传器的“小文件上传站点”一样......

[http://demo.swfupload.org/v220/multiinstancedemo/index.php](http://demo.swfupload.org/v220/multiinstancedemo/index.php)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T12:25:56.100

您可以在 input 元素上设置一个接受属性，如下所示：

```
<input type="file" accept="image/*"> 
```

哪个可以在某些（大多数？）现代浏览器中使用。

# android - Android：定期更改自定义ListView的TextView的Text

> ID：12914632
> 
> 赞同：2
> 
> 时间：2012-10-16T12:22:37.850
> 
> 标签：android, listview, timertask

在自定义列表视图中，我有一个 TextView，其文本必须每 1 分钟定期更改为当前时间和日期。

所以我这样做了：

```
Timer mTimer = new Timer();
mTimer.scheduleAtFixedRate(new TimerTask() {
@Override
public void run() {

currentTime = System.currentTimeMillis();
(holder.myText).setText(new Date(currentTime));
}
}, 0, 60000); 
```

在自定义适配器的 getView 中。

它第一次工作，因为第一次设置适配器时调用 getView 。

下次它给出异常：

**android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸其视图。**

那么我应该在哪里使用此代码？

如果我的练习本身不好，请告诉我如何实现这一点。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:25:48.083

您不能从不是 UI 线程的线程更新 UI 对象。试试这个：

```
this.runOnUiThread(new Runnable(){
   @Override
   public void run(){
       //update your TextView here
   }   
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:31:58.003

您也可以尝试以下链接中的示例。

[http://www.java2s.com/Code/Android/UI/TimingActivity.htm](http://www.java2s.com/Code/Android/UI/TimingActivity.htm)

# asp.net-mvc-3 - 如何使用标签服务获取与 Orchard CMS 中的内容类型相关联的标签？

> ID：12914634
> 
> 赞同：0
> 
> 时间：2012-10-16T12:23:02.753
> 
> 标签：asp.net-mvc-3, orchardcms

我有一个名为 Careers 的页面，其中列出了所有带有标签的职位。单击一个工作并转到他们的描述后，我想显示一个类似工作的列表。为此，我正在尝试使用 Orchard 的标签模块来获取所有标签名称并将其放入搜索构建器中。

```
namespace SimpleJobs.Handlers
  {
    public class SimpleJobsHandler : ContentHandler
    {
        //adding IContentManager and IIndexmanager which performs actual search

        private readonly IContentManager _contentManager;
        private readonly IIndexManager _indexManager;
        private readonly ITagService _tagService;

        public SimpleJobsHandler(IRepository<SimpleJobsPartRecord> simpleJobsPartRepository,
            IContentManager contentManager,
            IIndexManager indexManager,
            ITagService tagService
            )
        {
            _contentManager = contentManager;
            _indexManager = indexManager;
            _tagService = tagService;
            Filters.Add(StorageFilter.For(simpleJobsPartRepository));

        }

        //building display shape
        protected override void BuildDisplayShape(BuildDisplayContext context)
        {
            if (context.ContentItem.ContentType == "Jobs")
            {
                var similarJobs = GetSimilarJobs(context.ContentItem);
                if (similarJobs.Any())
                {
                    context.Shape.SimilarJobs = context.New.SimilarJobs(Jobs: similarJobs);

                }

            }

        }

     //getting similar jobs using tags
        private IEnumerable<ContentItem> GetSimilarJobs(ContentItem displayedJob)
        {
            StringBuilder tagStringBuilder = new StringBuilder();

            var searchBuilder = GetSearchBuilder();

            var simpleJobsTags = _tagService.GetTags();

            foreach (var tag in simpleJobsTags){

                tagStringBuilder.Append(" ");
                tagStringBuilder.Append(tag.TagName);
            }

            var similarItemsIds = searchBuilder
                .WithField("type", "Jobs").Mandatory().ExactMatch()
                .Parse("simplejobs-tags", tagStringBuilder.ToString()).Mandatory()
                .Search()
                .Where(h => h.ContentItemId != displayedJob.Id)
                .Select(h => h.ContentItemId)
                .Take(5).ToList();

            return _contentManager.GetMany<ContentItem>(similarItemsIds, VersionOptions.Published, QueryHints.Empty);

            }

        //to check if the user has lucene type implementer enabled otherwise 
        //return a nullsearchbuilder instead of an error

        private ISearchBuilder GetSearchBuilder()
        {
            return _indexManager.HasIndexProvider()
                ? _indexManager.GetSearchIndexProvider().CreateSearchBuilder("Search")
                : new NullSearchBuilder();
        }
    }
  } 
```

但是，此代码似乎不起作用。请指教。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:37:43.293

您无法获取与*内容类型*关联的标签，因为内容类型只是创建内容项的蓝图；您标记的是内容项，因此您想要获取与*内容项*关联的标记。

要获取具有相同标签的项目，您必须首先获取相关内容项目的标签：

```
contentItem.As<TagsPart>().CurrentTags 
```

然后您可以获取具有特定标签的内容项：

```
tagService.GetTaggedContentItems(tagId) 
```

其中 tagId 是从 CurrentTags 获取的标签的 id（标签具有 Id 属性）。

# jquery - Customvalidator 控件 - SetFocusOnError="True" 不适用于 CheckboxList

> ID：12914639
> 
> 赞同：0
> 
> 时间：2012-10-16T12:23:28.953
> 
> 标签：jquery, asp.net

我正在使用自定义验证器和 jquery 验证复选框列表来检查所需的验证，它的验证很好，但它没有关注错误。

CheckBoxList 和 CustomValidator 的 asp.net 是：

```
<asp:CheckBoxList ID="cblSellerCategories" 
 runat="server" 
 RepeatDirection="Horizontal"> 
</asp:CheckBoxList>

<asp:CustomValidator ID="CustomValidator2" 
 runat="server"
 ClientValidationFunction="CheckSellerCategory"
 CssClass="errorBox" 
 ErrorMessage="Select seller type" 
 SetFocusOnError="True"> 
</asp:CustomValidator> 
```

而jQuery是

```
function CheckSellerCategory(sender, args) {
args.IsValid = false;
$("[id$='cblSellerCategories']").find(":checkbox").each(function () {
    if (jQuery(this).attr("checked")) {
        args.IsValid = true;
        return;
    }
});
} 
```

如何关注错误（如果未选中任何复选框）。我也尝试过验证组，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:35:46.747

如果`SetFocusOnError`不工作，你可以手动设置焦点做这样的事情

```
if (!args.IsValid)
   $("[id$='cblSellerCategories'] :checkbox:first").focus(); 
```

所以你的代码是

```
function CheckSellerCategory(sender, args) {
    args.IsValid = false;
    $("[id$='cblSellerCategories']").find(":checkbox").each(function () {
        if (jQuery(this).attr("checked")) {
            args.IsValid = true;
            return;
        }
    });
    if (!args.IsValid)
       $("[id$='cblSellerCategories'] :checkbox:first").focus();        
} 
```

# jquery - 如何通过悬停和随机延迟显示/隐藏项目

> ID：12914640
> 
> 赞同：0
> 
> 时间：2012-10-16T12:23:34.453
> 
> 标签：jquery, events

我有一个 item1 通过鼠标悬停显示/隐藏 item2：

```
$(function() {
    $("#item1").hover(function() {
        $("#item2").show();
    }, function() {
        $("#item2").hide();
    });
}); 
```

我想让 item2 也通过随机时间延迟在 item1 上悬停/悬停来显示和隐藏。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:39:08.693

jQuery代码：

```
$(document).ready(function() {
    setInterval( function() {
        $("#item2").toggle('slow');
    }, 2000);
    $(function() {
        $("#item1").hover(function() {
            $("#item2").show();
        }, function() {
            $("#item2").hide();
        });
    });
}); 
```

在行动-> [jsFiddle](http://jsfiddle.net/epeS4/) - [epeS4](http://jsfiddle.net/epeS4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:37:47.380

根据您的需要增加和乘以随机数：

```
$(function() {

    var blocked = false;

    function divToggle() {
        if (!blocked) {
            $("#item2").toggle();
        }
        setTimeout(divToggle, Math.random() * 2000);
    };

    divToggle();

    $("#item1").hover(function() {
        blocked = true;
        $("#item2").show();
    }, function() {
        blocked = false;
        $("#item2").hide();
    });

});​ 
```

[演示](http://jsfiddle.net/5ZFew/2)

# iphone - 如何限制用户输入-在uitextfield中输入数字数据后签名？

> ID：12914642
> 
> 赞同：0
> 
> 时间：2012-10-16T12:23:39.613
> 
> 标签：iphone, ios

> **可能重复：**
> [textField:shouldChangeCharactersInRange:replacementString:](https://stackoverflow.com/questions/7531834/textfieldshouldchangecharactersinrangereplacementstring)

我面临允许用户输入的情况 - 输入数值后签名。如何限制/避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:30:26.553

使用 NSCharacterSet...

例如

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
static NSCharacterSet *charSet3 = nil;
if(!charSet3) {
        charSet3 = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789 "] invertedSet];
    } 
    NSRange location = [string rangeOfCharacterFromSet:charSet3];
    return (location.location == NSNotFound);
} 
```

这将只允许用户在文本字段中输入数值，并且不接受其他字符...

希望这可以帮助..... ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:35:04.493

如果您的意思是限制或检查输入的文本是否为数字..试试这个

```
if ([textField.text isKindOfClass:[NSNumber class]]) {

} 
```

# c++ - 覆盖 C++ 中的类和运算符

> ID：12914643
> 
> 赞同：-2
> 
> 时间：2012-10-16T12:23:52.010
> 
> 标签：c++, class, operators, overriding

我正在将此课程扩展到一本有声读物：

```
#include "Book.h"
using namespace std;
Book::Book():year(0), title(NULL), authors(NULL){}
Book::Book(vector<string>* bookauthors,string booktitle, int bookyear ){
    authors = bookauthors;
    title = booktitle;
    year = bookyear;
}
Book::Book(const Book& aBook){
    authors = aBook.authors;
    title = aBook.title;
    year = aBook.year;
}
Book::~Book(){
    //delete authors;
    //delete &title;
    //delete &year;
}
bool Book::operator==(const Book &aBook){
    if(getYear() == aBook.getYear() && getTitle() == aBook.getTitle())
        return true;
    else return false;
}
bool Book::operator != (const Book &aBook){
    if(getYear() != aBook.getYear() && getTitle() != aBook.getTitle())
        return true;
    else return false;
}
Book& Book::operator =(const Book& rhs){
    if(this != &rhs){
        authors = rhs.authors;
        title = rhs.title;
        year = rhs.year;
    }
    return *this;
}
void Book::update(int newyear){
    year = newyear;
}
void Book::update(string newtitle){
    title = newtitle;    
}
void Book::update(vector<string>* newauthors){
    authors = newauthors;
}
/*void Book::getAuthors()const{
    for(int i = 0; i < authors->size(); i++){
        cout<<authors->at(i);
    }
}*/
std::ostream& operator <<(std::ostream& os, const Book& b){
    os<<b.getTitle()<<", "<<b.getYear();
    for(int i = 0; i < b.authors->size();i++){
        os<<",  "<<b.authors->at(i);
    }
    return os;
} 
```

我不断收到这个有声读物课程的错误：

```
#include "AudioBook.h"
AudioBook::AudioBook():Book(),length(0){}
AudioBook::AudioBook(vector<string>* authors1, string title1, int year1, double length1){
    Book(authors1, title1, year1);
    length = length1;
}
AudioBook::AudioBook(const AudioBook& other):Book(other),length(other.length){}

AudioBook& AudioBook::operator =(const AudioBook& rhs){
    Book::operator =(rhs);
    length = rhs.length;
}
AudioBook::~AudioBook(){

}
bool AudioBook::operator !=(const AudioBook& aBook){
    Book::operator !=(aBook);
    if(length == aBook.length)
        return false;
    else
        return true;
}
void AudioBook::update(double newlength){
    length = newlength;
}
/*std::ostream& operator<<(ostream& os, const AudioBook& aBook){
    Book::operator<<(os, aBook);
    os<<"length: "<<aBook.getLength()<<;
}*/ 
```

这就是我得到的：libc++abi.dylib：终止调用抛出异常

我不确定它是否覆盖了运营商或什么？还有我怎么能覆盖操作符<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:30:24.353

`AudioBook& AudioBook::operator =(const AudioBook& rhs)`不见了`return *this;`

不确定这是否是原因。

# ssis - 将存储过程转换为 SSIS 包

> ID：12914645
> 
> 赞同：1
> 
> 时间：2012-10-16T12:23:56.580
> 
> 标签：ssis

我们需要将 SP 列表转换为 SSIS 包。大多数 SP 执行以下步骤：

1.  使用“SELECT INTO”语句创建一个表并将数据插入其中，该语句具有许多连接。
2.  更新表 - 这也有很多连接。
3.  在创建的表上创建索引。

我们应该在这里使用什么方法？由于 SP 中没有 ETL，我们将每组语句转换为一个`Execute SQL`任务。这是正确的方法吗？
我们可以做些什么来提高包的性能？
有些 SP 使用不同的参数多次调用另一个 SP（参数在 SP 中是硬编码的）。哪个 SSIS 任务适合这里？我尝试使用`ExecuteSQL task`true `RetainSameConnection`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:38:31.397

我们将每组语句转换为一个“执行 SQL”任务。这是正确的方法吗？

不，鉴于您声明“长过程不容易管理。此外，希望通过在 SSIS 包的上下文中调用存储过程来提高性能”，您所做的只是为您的调用增加了一层开销.

你如何让它变得更好？这在很大程度上取决于*你*在做什么。您的一般方法可能看起来像

1.  创建源和目标 OLE DB 连接管理器
2.  创建一个变量，字符串类型并使用它来存储正在创建的表的名称
3.  执行 SQL 任务 - 这实际上创建了您的目标表。我认为我已经阅读了显式表声明比使用 INTO 语句创建一个更有效
4.  将数据流任务连接到该执行 SQL 任务。使用 OLE DB 源并将源类型从表更改为查询和调用您的存储过程。这可能需要修改为不创建目标表。将 OLE DB 目标拖放到画布上并将目标从变量快速加载（名称近似）更改为表或视图，然后选择上面创建的变量。
5.  更新可能最好留给现有的逻辑。只需将其放在执行 sql 任务中
6.  这个索引创建也将是一个执行 SQL 任务。

所有这些连接仍然进展缓慢？这可能是一个调整操作。我们需要查看表结构、查询和估计的查询计划。

# bash - 在终端中计算

> ID：12914652
> 
> 赞同：0
> 
> 时间：2012-10-16T12:24:10.060
> 
> 标签：bash, shell, math, awk

我在 bash 终端中使用它来获取一个巨大文件中的平均值：

`awk 'BEGIN{s=0;}{s=s+$2;}END{print s/NR;}' file`

有效。只是出于好奇（即为了将来的知识），我想知道在 shell 中计算的常用方法。R、bash、python……？快速而肮脏，但仍然强大而快速。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:35:12.840

一般来说，你想`expr`用于简单的算术：

```
$ expr 3 + 4
7
$ expr 3 '*' 4
12 
```

您还可以使用`dc`或`bc`：

```
$ dc -e '3 4 + p'
7 
```

我也没有看到您的`awk`脚本方法有什么特别错误的地方。我不够强大，`dc`无法做到这一点，但您可能会使用它来进行计算：

```
$ export DC_COMMANDS="dc script to operate on numbers from file"
$ dc -e "$(cut -d' ' -f2 < file) ${DC_COMMANDS}" 
```

这会将所有数字传递给`dc`，然后运行您的命令，这些命令可用于对数字执行求和和除法指令。

另请参阅[`dc(1)`](http://linux.die.net/man/1/dc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:36:34.233

您必须对其进行基准测试才能确定，但​​根据我的经验，awk（正如您所使用的那样）通常是这类事情的最佳选择。比原生 shell 更快，启动开销也比 perl 等更复杂的东西少。也就是说，我倾向于喜欢在纯 shell 中编码，因为它不会太慢，只是因为。

```
#!/bin/bash
exec <file
declare -i sum=0 count=0
while read a b c; do
  (( count++ ))
  sum+="${b}"
done
echo $(( sum / count )) 
```

当然，仅在您寻找积分结果时才有效，但如果需要，您可以随时尝试获得额外的十进制数字：

```
echo $(( sum / count )).$(( ((sum * 100) / count) % 100 )) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:43:26.877

我认为您的问题不是关于处理文本文件，而是更多“一般来说，在 shell 中进行计算的最佳方法是什么？”。如果我错了，请告诉我，我会删除我的答案。

没有最好的方法，但一个简单灵活的方法是使用 bc，这是一个标准的 shell 命令。命令 bc 支持任意精度算术：您必须使用关键字指明您需要的精度`scale`。例如：

```
echo "scale=10; 1/3" | bc 
```

打印 .3333333333

```
echo "scale=2; 1/3" | bc 
```

打印 0.33

在脚本中，您会以这种方式使用它

```
x=10
result=$(echo "scale=10; $x /5 "|bc)
echo $result 
```

您可以`man bc`在 GNU 页面上找到更多信息： [http ://www.gnu.org/software/bc/](http://www.gnu.org/software/bc/)

# flex4 - 具有增量构建的嵌入式资源在 Flex 4.5 和 4.6 中引发运行时异常

> ID：12914660
> 
> 赞同：1
> 
> 时间：2012-10-16T12:24:25.810
> 
> 标签：flex4, flex4.5, mxmlc, flex4.6

当我使用 ant 和增量构建编译我的应用程序时，嵌入的图像会引发运行时异常。

```
[Embed(source="/assets/logo.png")] 
[Bindable] 
public var logo:Class;

<mx:Image source="{logo}" /> 
```

激起类似的东西

```
ReferenceError: Error #1065: Variable FileName__embed_mxml__assets_logo_png_2016241504 is not defined. 
```

一种解决方法是关闭增量构建，但使用此解决方案，构建过程会花费很多时间（比增量构建长 3 - 4 倍）。

使用 Flex 4.1，此问题不存在，并且在尝试升级到 Flex 4.6 时出现

这是我的蚂蚁脚本的一些部分

```
<macrodef name="flex-compile-debug">
    <attribute name="mxmlfile" />
    <attribute name="swffile" />
    <sequential>
        <echo>Debug Build</echo>
        <mxmlc file="@{mxmlfile}" output="@{swffile}" 
            debug="true" incremental="true" keep-generated-actionscript="true" 
            services="${dir.webcontent}/WEB-INF/flex/services-config.xml" context-root="/fem"
            locale="fr_FR" static-link-runtime-shared-libraries="false">
            <load-config filename="${FLEX_HOME}/frameworks/flex-config.xml" />
            <define name="CONFIG::fembeta" value="${flex.beta}"/>
            <source-path path-element="${FLEX_HOME}/frameworks" />
            <source-path path-element="${dir.flex.src}/locale/fr_FR"/>

            <compiler.library-path dir="${FLEX_HOME}/frameworks" append="true">
                <include name="libs" />
                <include name="locale" />
            </compiler.library-path>
            <compiler.library-path dir="${dir.webcontent}/WEB-INF/flex" append="true">
                <include name="libs" />
                <include name="locale" />
            </compiler.library-path>
        </mxmlc>
    </sequential>
</macrodef> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:01:17.660

几件事要尝试：

1) 检查 .actionScriptProperties 中的 targetPlayerVersion。它应该至少为 11.1

2) 确保闪存编译器和版本正确反映在所有文件中。

3）确保在完成上述操作后从头开始重新编译每个库，然后返回增量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-07T09:02:25.813

解决方案是使用 Java 7，有关此论坛的更多信息： [http ://www.flashdevelop.org/community/viewtopic.php?f=6&t=12900](http://www.flashdevelop.org/community/viewtopic.php?f=6&t=12900)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T08:01:55.443

将您的 JAVA_HOME 设置更改为 JDK 1.6.xx (x32)。它帮助了我。

# c# - 如何在wpf中添加主题

> ID：12914661
> 
> 赞同：3
> 
> 时间：2012-10-16T12:24:28.337
> 
> 标签：c#, wpf

![错误](../Images/2acb4b5c02d55a4f9585711af4873f01.png) 我想在 WPF 上添加 expressiondark 主题。

在 App.xaml 中：

```
<Application x:Class="ThemesSample.App" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    StartupUri="MYWINDOW.xaml"> 
    <Application.Resources> 
        <ResourceDictionary Source="ExpressionDark.xaml"/> 
    </Application.Resources> 
</Application> 
```

在 MainWindow.cs 中：

```
public MainWindow()
{ 
    ResourceDictionary skin = new ResourceDictionary(); 
    skin.Source = new Uri(@"MYPROJECTADDR\ExpressionDark.xaml", UriKind.Absolute); 
    App.Current.Resources.MergedDictionaries.Add(skin); 
} 
```

并在项目中添加了 expressiondark.xaml。但是 xpressiondark.xaml 中的所有 xmlns 行都有错误。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:43:53.863

查看 ExpressionDark.xaml 的屏幕截图，ResourceDictionary 部分包含很多我的 ExpressionDark.xaml 版本没有的 xmlns 标签，我的版本仅包括：

```
<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"> 
```

你从哪里得到你的`ExpressionDark.xaml`文件？

试试这个： [http ://wpf.codeplex.com/downloads/get/62512](http://wpf.codeplex.com/downloads/get/62512)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-13T08:04:24.063

您可以尝试使用 NuGet 安装主题。在 VS 中，转到 Tools>NuGet Package Manager>Package Manager Cnsole 并编写以下命令来安装主题 PM> Install-Package WPF.Themes 这将在您的项目中创建一个名为 Themes 的目录并下载所有主题。它还将 ResourceDirectory 添加到 yourApp.xaml 中，您可以在其中选择所需的主题。现在，您只需在运行应用程序时拖放工具即可看到主题。

# sql-server-2005 - 无法使用 sa 帐户运行链接服务器查询，但可以使用 windows 身份验证用户运行

> ID：12914662
> 
> 赞同：1
> 
> 时间：2012-10-16T12:24:36.123
> 
> 标签：sql-server-2005

我创建了一个链接服务器（用于 excel），当我运行如下查询时

当我使用 Windows 身份验证连接 SQL Server Management Studio 并运行以下查询时，它可以工作。

```
select * from linkserver...sheet1$ 
```

如果我使用 sa 帐户登录，相同的查询会出现以下错误。

```
 The OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "exportlink"
 reported an error. The provider did not give any information about the error.
 Msg 7303, Level 16, State 1, Line 1
 Cannot initialize the data source object of OLE DB provider   
 "Microsoft.ACE.OLEDB.12.0" for     linked server "linkedserver 
```

虽然这似乎是一个安全问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:34:52.723

默认情况下，链接服务器将当前用户凭据传递给链接服务器。

映射由[sp_addlinkedsrvlogin](http://msdn.microsoft.com/en-us/library/ms189811.aspx)创建，此位中提到了默认值

> 本地服务器上的所有登录名和链接服务器上的远程登录名之间的默认映射是通过执行 sp_addlinkedserver 自动创建的。默认映射表明 SQL Server 在代表登录名连接到链接服务器时使用本地登录名的用户凭据。这等效于在链接服务器的 @useself 设置为 true 的情况下执行 sp_addlinkedsrvlogin，而无需指定本地用户名。仅使用 sp_addlinkedsrvlogin 更改默认映射或为特定本地登录添加新映射。

当您使用“sa”时，它（我不确定也无法测试）使用 SQL Server 服务帐户。你应该允许这个。

如果它不使用 SQL Server 服务帐户，则需要为“sa”设置映射：

```
EXEC sp_addlinkedsrvlogin
        'linkserver', 'FALSE', 'sa', 'Domain\SomeUser', 'Somepassword'; 
```

# facebook - facebook开发人员“应用程序域”不保存

> ID：12914663
> 
> 赞同：0
> 
> 时间：2012-10-16T12:24:45.053
> 
> 标签：facebook, facebook-opengraph

我正在尝试为网页设置基本的开放图形视频属性（以便在 facebook 上共享指向该页面的链接将允许视频在时间线中播放），为此需要在 facebook 上创建一个应用程序。

在应用程序的设置中有一个名为“应用程序域：”的字段。当我在此处输入域并单击“保存更改”时，该字段的内容未保存。

这个问题已经在这里解决了：

[Facebook 应用程序域消失](https://stackoverflow.com/questions/7616965/facebook-app-domain-dissapears)

然而，解决方案取决于我认为现在已经改变的界面，即没有“网站部分”，我可以在其中输入网址。

谁能告诉我如何在保存时使“应用程序域”保持不变。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:25:45.787

出于我的目的，即将视频嵌入到 facebook 时间轴中，以下操作有效。facebook 应用程序只需要您在“带有 facebook 登录的网站”字段中指定一个 url。“应用程序域”字段在保存时仍然没有粘贴，但该功能仍然有效。如果这对其他人有帮助，这里是我在一个页面中使用的代码，我想在 facebook 上分享以显示可嵌入的视频播放器：

```
<!DOCTYPE html>
<html>
<head>
<meta property="og:title" content="video title"/>
<meta property="og:video:type" content="application/x-shockwave-flash"/>
<meta property="og:video" content="http://mysitename.com/movie.swf">
<meta property="og:image" content="http://mysitename.com/image.png"/>
<meta property="og:url" content="http://mysitename.com/page.html"/>
<meta property="og:video:height" content="240" />
<meta property="og:video:width" content="320" />
<meta property="og:video:type" content="video/mp4" />
<meta property="og:video" content="http://mysitename.com/movie.mp4">
<meta property="fb:app_id" content="your_app_id"/>
<meta property="og:description" content="your description here"/>
</head>
<body>
</body>
</html> 
```

我不确定这些对 mp4 文件的最后引用是否作为“后备”视频类型工作，但它们在那里以防万一:)。

此过程中使用的有用工具和资源：

*   [http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug) - 向您展示 facebook 如何处理您页面上的开放图形信息并建议修复任何问题。
*   [http://www.mirovideoconverter.com](http://www.mirovideoconverter.com) - 转换音频和视频文件
*   [http://www.freemake.com/free_video_converter](http://www.freemake.com/free_video_converter) - 转换音频和视频文件

# php - 从文本框搜索关键字到mysql

> ID：12914673
> 
> 赞同：0
> 
> 时间：2012-10-16T12:25:15.510
> 
> 标签：php, mysql, string, search, keyword

我将用户的输入分解为数组，然后在数据库中搜索它们，但是如果用户输入空间作为结果，它将显示有空间的表的整行我怎样才能使它正确？

```
if(isset($_POST['submit'])){
$keywords = explode(" ", $_POST["search"]);
for ($i=0; $i<count($keywords); $i++) {

$query = "SELECT * FROM mp3s " .
"WHERE (artist LIKE '%".$keywords[$i]."%' 
OR   genre LIKE '%".$keywords[$i]."%'  
OR  album LIKE '%".$keywords[$i]."%'
OR  filename LIKE '%".$keywords[$i]."%'
) ";
$sql = mysql_query($query) or die(mysql_error());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:35:07.230

用于`trim()`删除空格并用于`mysql_real_escape_string()`防止 sql 注入。

```
 if(isset($_POST['submit'])){
    $keywords = explode(" ", trim($_POST["search"]));
    for ($i=0; $i<count($keywords); $i++) {

    if(!empty($keywords[$i])) {

      $query = "SELECT * FROM mp3s " .
      "WHERE (artist LIKE '%".trim(mysql_real_escape_string($keywords[$i]))."%' 
      OR   genre LIKE '%".trim(mysql_real_escape_string($keywords[$i]))."%'  
      OR  album LIKE '%".trim(mysql_real_escape_string($keywords[$i]))."%'
      OR  filename LIKE '%".trim(mysql_real_escape_string($keywords[$i]))."%'
      ) ";
      $sql = mysql_query($query) or die(mysql_error());

    }

    } 
```

但它`MySQLi`比`mysql_real_escape_string()`功能更好用。
见[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

或带有准备好的语句的 PDO：http:
[//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:42:36.940

几点： 1\. 而不是使用`for`，使用`foreach`- 它对数组很有用（就像你的情况一样）

1.  在执行查询之前检查用户的查询，不要让用户输入超过 2 个字符的关键字（使用'strlen'）。

3.使用`PDO`

4.阅读更多关于`trim`函数的信息

```
if(isset($_POST['submit'])){
$search_string = trim($_POST['search']);
if(strlen($search_string) == 0)
{
//The user is looking for empty string...
//Amm...why is he doing it?
exit();
}

$keywords = explode(" ", $_POST["search"]);
foreach($keywords as $keyword)
{
$keyword = trim($keyword);
$stmt = $dbh->prepare("SELECT * FROM mp3s WHERE (artist LIKE ? 
OR   genre LIKE ? OR  album LIKE ? OR  filename LIKE ?)");

$stmt->execute(array("%$keyword%","%$keyword%","%$keyword%","%$keyword%"));

} 
```

# java - 我们如何更改 iReport 的 Java 平台版本

> ID：12914674
> 
> 赞同：2
> 
> 时间：2012-10-16T12:25:18.517
> 
> 标签：java, ireport

在我的寡妇机器中，我安装了两个*Java*版本（1.5 和 1.6）。

我已经安装了*iReport 4.0.7*，但它默认采用*Java* 1.5 版本，当我运行它时，它会抛出异常。

> 发生了 java.lang.UnsupportedClassVersionError 异常。

谁能告诉我如何告诉*iReport*在*Java 1.6*而不是 1.5 上运行。

我已经从环境变量中删除了*Java 1.5的**Path*和其他条目。

 *![在此处输入图像描述](../Images/b4dced501c6732b2528c7c4886a2e803.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:51:35.350

正如我在评论中所说。如果您使用 jasper api 在容器（例如 tomcat/jboss/...）中运行应用程序，则必须检查容器配置，以确保 java_home 指向正确的 Java 版本。

如果您的问题是关于 ireport。你可以检查你`{YourireportPath}/etc/ireport.conf`那里你可以找到一行：

```
# default location of JDK/JRE, can be overridden by using --jdkhome <dir> switch
#jdkhome="/path/to/jdk" 
```

取消注释并使其正确。它可能会解决您的问题。抱歉，不知道 Windows 安装程序等高级功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T12:52:27.910

17253：与 JasperServer 安装程序捆绑在一起的 iReport 3.7.1 需要特殊处理才能与 Vista 或 Windows 7 一起运行。在这些操作系统平台上，iReport 必须与最新版本的 Java 1.6 或当前版本的Java 1.7 测试版。在这些操作系统平台上，iReport 将要求 JDK 大于或等于：1.6.0_18-b03 或 1.7.0-b74。此外，您需要修改 iReport 加载程序脚本以指向这个更高的 Java 版本。编辑以下文件 f0`ile：\ireport\bin\iReportLoader.bat

更改此行：SET JAVADIR=%CD%\java 到此行：SET JAVADIR=\java 例如：SET JAVADIR=C:\Program Files\Java\jdk1.7。`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T15:47:14.427

这是针对 Ireport-2.0.1

更新您的环境变量后

```
JAVA_HOME=C:\Java\jdk1.5.0_22

Path=C:\Java\jdk1.5.0_22; 
```

（在开头添加）

通过启动`iReport.bat`文件 ( `C:\Program Files (x86)\Jaspersoft\iReport-2.0.1`)关闭并重新启动 iReport*

# vba - 如何插入额外的列

> ID：12914678
> 
> 赞同：0
> 
> 时间：2012-10-16T12:25:32.383
> 
> 标签：vba, excel

以下代码允许我浏览多个不同的 excel 文件并将它们粘贴到彼此下方的单个工作表中。excel 文件具有相同的列名但其中包含不同的数据并且工作正常，我的问题是我需要它时粘贴一个文件，它还必须创建额外的列，并在该列中为它粘贴的每个文件写入该文件的名称。

```
Sub Button5_Click()
 Dim fileStr As Variant
 Dim wbk1 As Workbook, wbk2 As Workbook
 Dim ws1 As Worksheet

 fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
 Set wbk1 = ActiveWorkbook
 Set ws1 = wbk1.Sheets("Sheet3")

 'handling first file seperately
 MsgBox fileStr(1), , GetFileName(CStr(fileStr(1)))
 Set wbk2 = Workbooks.Open(fileStr(1))
 wbk2.Sheets(1).UsedRange.Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)

 wbk2.Close

 For i = 2 To UBound(fileStr)
 MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))

 Set wbk2 = Workbooks.Open(fileStr(i))
 'using offset to skip the header - not the best solution,  but a quick one

 wbk2.Sheets(1).UsedRange.Offset(1, 0).Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)

 wbk2.Close
 Next i
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:42:00.843

使用对象的`Insert`方法`Range`插入一列：

```
'***** Inserts new column to the left of column C
Range("C:C").Insert 
```

在单元格中输入文本：

```
'***** Entering text in A1
ws1.Cells(1, 1).Value = fileStr(i) 
```

# python - 在 Python 中打开多个文件

> ID：12914682
> 
> 赞同：5
> 
> 时间：2012-10-16T12:25:48.053
> 
> 标签：python, python-2.7

如何在 python 编程语言中同时打开多个文件来运行我的程序？

我有大约 15 个文件，刚才我使用了其中一个，如下所示：

```
f=open("Exemplo_1.txt","rU") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T13:49:13.380

你可以使用`glob`和的组合`fileinput`

```
import fileinput
from glob import glob

fnames = glob('Exemplo_*.txt')
for line in fileinput.input(fnames):
    pass # do whatever 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:28:09.717

```
f1=open("Exemplo_1.txt","rU");  
f2=open("Exemplo_2.txt","rU");  
...  
f15=open("Exemplo_15.txt","rU"); 
```

您基本上是在创建 File 对象来访问文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T13:08:30.383

我会做这样的事情：

```
try:
    f = [open("Exemplo_%d.txt" % i, "rU") for i in range(1, 16)]
    # do stuff
finally:
    for fh in f:
        fh.close() 
```

请参阅[try/finally](http://docs.python.org/reference/compound_stmts.html#finally)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T13:17:57.593

如果您需要一次遍历多个文件，请使用 fileinput 模块

```
for x in fileinput.input(['patterns.in', 'logfile.txt']):
    print x 
```

# android - GridView 将继续突出显示所选项目

> ID：12914685
> 
> 赞同：2
> 
> 时间：2012-10-16T12:25:57.853
> 
> 标签：android, gridview

我的布局有一个 GridView。与 Google 的 API 演示类似，每个网格都有一个图像。此外，我自定义了一个“可绘制图像”，用于突出显示当前选定的项目。当触摸网格的图像时，可以显示“可绘制图像”。不幸的是，当我不触摸网格时它会消失。

我希望 GridView 将继续突出显示所选项目。甚至用户也在滚动屏幕。

从这里，我发现了一些类似的帖子。

1)[选择 GridView 中的图像](https://stackoverflow.com/questions/7661019/keep-image-in-gridview-selected?rq=1)

2) [Android gridview 保持选中项](https://stackoverflow.com/questions/11326089/android-gridview-keep-item-selected)

但我无法理解他们的方法，他们没有使用自定义图像。谁能给我一些帮助？请。

以下是我的代码：

```
 gridAdapter  adapter =  new   gridAdapter  (this, images);
    gv = (GridView) findViewById (R.id.gridView1);
    gv.setAdapter(adapter);
    gv.setSelector(R.drawable.circle);
    gv.setDrawSelectorOnTop(true); 
```

以下是我更新的代码：

```
public class GridViewBasic extends Activity {
    Integer[] imageIDs = {
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher    };
    GridView gridView;
    public int lastPos;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
            gridView = (GridView) findViewById(R.id.gridView1);
            gridView.setAdapter(new ImageAdapter(this));
            gridView.setSelected(true);
            gridView.setSelector(R.drawable.circle);
            gridView.setDrawSelectorOnTop(true);
            gridView.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);

            gridView.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent,  View v, int position, long id) {   
                    lastPos = position;
                    gridView.setSelection((int)(gridView.getAdapter()).getItemId(lastPos));
                    System.out.println ("getItemId ="+(gridView.getAdapter()).getItemId(lastPos));

                }
            });        
        }

        public class ImageAdapter extends BaseAdapter 
        {
            private Context context;

            public ImageAdapter(Context c)  {
                context = c;
            }

            //---returns the number of images---
            public int getCount() {
                return imageIDs.length;
            }

            //---returns the ID of an item--- 
            public Object getItem(int position) {
                return position;
            }

            public long getItemId(int position) {
                return position;
            }

            //---returns an ImageView view---
            public View getView(int position, View convertView, ViewGroup parent) {
                ImageView imageView;

                if (convertView == null) {
                    imageView = new ImageView(context);
                    imageView.setLayoutParams(new GridView.LayoutParams(185, 185));
                    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                    imageView.setPadding(5, 5, 5, 5);
                } else {
                    imageView = (ImageView) convertView;
                }
                imageView.setImageResource(imageIDs[position]);

                return imageView;
            }
        }    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:29:39.200

好的，现在它需要一个全新的答案......

事情是这样的：`setSelected()`将调用视图设置为选中，因此随后给予焦点....

打电话

```
 GridView gv; gv.setSelected(true); 
```

将选择 GridView gv，而不是您想要的 gridview 适配器中的视图。

所以你需要打电话`gv.setSelection(pos)`来选择一个特定的孩子。

您正在保存的`pos`可能不是真实位置，而是“可见”偏移的位置。这就是为什么你必须打电话

```
(gridView.getAdapter()).getPosition(viewThatYouWant); 
```

或者

```
(gridView.getAdapter()).getItemAt(lastPos).requestFocus(); 
```

请注意，您应该查看视图如何处理它的焦点 VS 孩子焦点该方法被调用

```
setDescendantFocusability 
```

所以你自然会想要

```
GridView gv; gv.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:45:58.747

```
public class StaffSelectionAdapter extends BaseAdapter {

private Context context;

private final String[] staffMemberList;
private int previousPosition = -1;
private static boolean isFirstTime;
boolean[] isChecked;
private TextView textView = null;
public long staffId;
private LayoutInflater inflater;

public StaffSelectionAdapter(Context context, String[] staffMemberList) {
    this.context = context;
    inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.staffMemberList = staffMemberList;

    isFirstTime = true;
    isChecked = new boolean[staffMemberList.length];
    for (int i = 0; i < staffMemberList.length; i++) {
        isChecked[i] = false;
    }
}

public View getView(final int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.row_for_staff_selection, null);
    }
    textView = (TextView) convertView.findViewById(R.id.row_for_staff_selection_grid_item_label);
    textView.setText(staffMemberList[position]);

    if (isChecked[position]) {
        SpannableString content = new SpannableString(staffMemberList[position]);
        content.setSpan(new UnderlineSpan(), 0, staffMemberList[position].length(), 0);
        textView.setText(content);
    } else {
        textView.setBackgroundColor(context.getResources().getColor(R.drawable.dialog_bg));
    }

    convertView.setTag(position);
    convertView.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if (!isChecked[position]) {
                staffId = 

                isChecked[position] = true;
                if (!isFirstTime) {
                    isChecked[previousPosition] = false;
                } else {
                    isFirstTime = false;
                }
                textView.setBackgroundColor(context.getResources().getColor(R.drawable.dialog_bg));
            }
            previousPosition = (Integer) v.getTag();
            notifyDataSetChanged();
        }
    });
    return convertView;
}

public int getCount() 
    {
    return staffMemberList.length;
}

public Object getItem(int position) 
    {
    return staffMemberList[position];
}

public long getItemId(int position) {
    return 0;
}

public long getStaffId() {
    return staffId;
}

public void setStaffId(long staffId) {
    this.staffId = staffId;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T06:16:06.850

在 gridview 上设置 onItemClickListener 。然后您可以获得视图 onItemClick 的位置。将所选位置传递给适配器并在 getView 方法内的适配器内检查 if(position == selected_position) 。如果真正设置您选择的背景。

```
public ColorGridAdapter(Context context,ArrayList<String> colorArray,int position) {
                super(context, resource,colorArray);            
                this.context = context;
                this.colors = colorArray;
                this.selected_position = position;  // position of your selected item

            }

    public View getView(final int position, View convertView, ViewGroup parent){
                View v = convertView;
                if (v == null) {

    LayoutInflater inflater = (LayoutInflater)  getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        v = inflater.inflate(R.layout.color_pelatte, null);
                        ColorView = (View)v.findViewById(R.id.color_view);          
                    }

                ColorView.setBackgroundColor(Color.parseColor(colors.get(position)));
                if(position == selected_position){
                    v.setBackground(context.getResources().getDrawable(R.drawable.edittext_background));
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-14T20:18:15.157

这就是我实现这一目标的方式

```
 <GridView
    android:id="@+id/gv_calender"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:numColumns="7"
    android:listSelector="@color/colorAccent"
    android:stretchMode="columnWidth"></GridView> 
```

并在适配器中额外添加一行

```
 GridView gvCalender = (GridView)findViewById(R.id.gv_calender);
  CalendarAdapter adapter = new CalendarAdapter(getActivity(), lsCalender);
    gvCalender.setDrawSelectorOnTop(false);
    gvCalender.setAdapter(adapter); 
```

就是这样，你完成了
关键行是

**android:listSelector="@color/colorAccent"**
AND
**gvCalender.setDrawSelectorOnTop(false);**

# php - 再次选择父级时删除子级 div

> ID：12914694
> 
> 赞同：0
> 
> 时间：2012-10-16T12:26:36.540
> 
> 标签：php, javascript, jquery, livequery

我正在使用使用 [99 点网站教程的](http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/)*n 级选择链*，但是当我尝试重新选择父节点时，相应的子 div 不会重置。

我已经搜索过 StackOverflow 和 Google，但到目前为止还没有运气。

以下代码出现错误，我无法更正。

```
 $(this).nextAll('.parent').remove();
    $(this).nextAll('label').remove(); 
```

这是我的代码

***主页***

```
 <script type="text/javascript">
        $('.parent').livequery('change', function() {

                $(this).nextAll('.parent').remove();
            $(this).nextAll('label').remove();

                $.post("/dashboard/details/show_levels/", {
                    parent_id: $(this).val(),
                }, function(response){
                    setTimeout("finishAjax('levels', '"+escape(response)+"')", 400);
                });

                return false;
            });
        })

        function finishAjax(id, response){
        //alert(unescape(response));

          $('#'+id).append(unescape(response));
        } 
    </script>

    <div id=levels>
        <select id="level" class="parent" multiple="multiple" scroabble="1" name="data[level][]">
<option value="Building & Construction Mat">Building & Construction Mat</option>
<option value="Electronic Components">Electronic Components</option>
<option value="Furniture & Mattresses">Furniture & Mattresses</option>
<option value="Labels">Labels</option>
</select>
    </div> 
```

**显示级别**

```
 <select id="sublevel" class="parent" multiple="multiple" scroabble="1" name="data[sublevel][]">
<option value="Labels">Labels</option>
<option value="Preparation Techniques">Preparation Techniques</option>
<option value="Process Parameters">Process Parameters</option>
</select> 
```

## 更新

以下代码解决了我的问题

```
$("#levels").on('click', '.parent', function () {
    $(this).parents().nextUntil().remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:46:13.827

您应该删除对`.livequery()`插件的引用并直接使用`.live()`

[在这个小提琴中，](http://jsfiddle.net/eM3Nn/)我使用`.live()`功能复制了教程，向您展示如何使用它

# c# - 无法从传输连接读取数据：已建立的连接被 C# .Net 主机中的软件中止

> ID：12914696
> 
> 赞同：2
> 
> 时间：2012-10-16T12:26:41.330
> 
> 标签：c#, asp.net

这个问题可能会被问很多次..但我正在处理的场景有点差异，但非常简单..我正在克服错误并且到目前为止没有得到任何解决方案..这是我的客户端代码，我在其中遇到错误“阅读”以粗体突出显示..请提前帮助..thnx。

```
using System;
using System.IO;
using System.Net;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net.Security;
using System.Timers;

namespace ClientRequest
{
class Program
{
    static void Main(string[] args)
    {
        try
        {

            TcpClient tcpclnt = new TcpClient();
            Console.WriteLine("Connecting.....");

            IPAddress[] objLocalAddr = null;
            String strHostName = "";
            int port = 2425;

            strHostName = Dns.GetHostName();
            IPHostEntry ipEntry = Dns.GetHostEntry(strHostName);
            objLocalAddr = ipEntry.AddressList;

            tcpclnt.Connect(objLocalAddr[0], port);

            Console.WriteLine("Connected");
            Console.Write("Enter the string to be transmitted : ");

            String str = Console.ReadLine();
            Stream stm = tcpclnt.GetStream();

            ASCIIEncoding asen = new ASCIIEncoding();
            byte[] ba = asen.GetBytes(str);
            Console.WriteLine("Transmitting.....");

            stm.Write(ba, 0, ba.Length);

            byte[] bb = new byte[100];
            **int k = stm.Read(bb, 0, 100);**                
            for (int i = 0; i < k; i++)
            Console.Write(Convert.ToChar(bb[i]));               

               tcpclnt.Close();
        }
        catch (Exception e)
        {
            Console.WriteLine("Error..... " + e.StackTrace);
         }
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:53:58.423

在执行读取功能之前，请执行以下操作：

```
if( stm.CanRead && stm.DataAvailable )
{
    int k = stm.Read(bb, 0, 100);
    for (int i = 0; i < k; i++)
        Console.Write(Convert.ToChar(bb[i]));               
}

tcpclnt.Close(); 
```

# javascript - div问题的奇偶选择器

> ID：12914697
> 
> 赞同：1
> 
> 时间：2012-10-16T12:26:43.430
> 
> 标签：javascript, css

我有一个 div 填充了一个列表/行的 div 现在我需要为行提供替代颜色。为此，我正在做以下事情

```
$('#PlatformErrorsTableData').html(table1Html);
$('#PlatformErrorsTableData div:nth-child(even)').css("background-color", "aqua"); 
```

table1Html 如下所示：

```
<div>
  <span class="platformTable columnWidth10">Originator1</span>
  <span class="platformTable truncate">Message for Originator# 1</span>
  <span class="platformTable columnWidth15">Server1</span>
  <span class="platformTable columnWidth20">5:50 PM</span>
</div>
<div>
  <span class="platformTable columnWidth10">Originator2</span>
  <span class="platformTable truncate">Message for Originator# 2</span>
  <span class="platformTable columnWidth15">Server2</span>
  <span class="platformTable columnWidth20">5:50 PM</span>
</div> 
<div>
  <span class="platformTable columnWidth10">Originator3</span>
  <span class="platformTable truncate">Message for Originator# 3</span>
  <span class="platformTable columnWidth15">Server3</span>
  <span class="platformTable columnWidth20">5:50 PM</span>
</div>
<div>
  <span class="platformTable columnWidth10">Originator4</span>
  <span class="platformTable truncate">Message for Originator# 4</span>
  <span class="platformTable columnWidth15">Server4</span>
  <span class="platformTable columnWidth20">5:50 PM</span>
</div> 
```

现在的问题是颜色 aqua 没有显示在屏幕上，但是如果我在 firebug 中检查 div，它的背景颜色设置为 aqua。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:19:11.657

您使用 css 代码而不是 jquery

```
#PlatformErrorsTableData div:nth-child(2n){
   background:#a5a5a5;
}

#PlatformErrorsTableData div:nth-child(2n+1){
   background:#eee;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:55:50.623

你的代码在这里工作正常

[现场演示](http://jsfiddle.net/TwVMn/)

我认为您的 css 样式尝试设置有问题

`overflow:hidden`

并提供`min-height`给您的 div

可能对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:41:44.383

尝试在 s 上设置一个明确的高度`div`以开始。如果这可行，那么您很可能遇到了 CSS 问题，并且您可能需要在它们上使用类似`overflow: hidden;`的东西（在移除高度之后）。还要确保`span`s 具有透明背景。

# javascript - 将值设置为 textarea 不起作用

> ID：12914698
> 
> 赞同：0
> 
> 时间：2012-10-16T12:26:46.337
> 
> 标签：javascript, jquery

```
var myText = $('#myTextBox').val() + '<span id="caret_pos_holder"></span>';
$('#myTextBox').val(myText);
console.log($('#myTextBox').val()); 
```

在控制台日志中，没有`< span >`标签。为什么文本框的值没有设置为它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:41:28.503

像这样更改您的选择器`$('textarea#myTextBox').val()`

[你可以在这里](http://jsfiddle.net/uDT8C/1/)看到 jsfiddle 的结果。

# ruby-on-rails - 使用 capistrano 部署后的 URL 应该是什么

> ID：12914706
> 
> 赞同：-1
> 
> 时间：2012-10-16T12:27:15.290
> 
> 标签：ruby-on-rails, ruby, url, capistrano

[我在这个网站](http://www.leemunroe.com/deploy-rails-with-capistrano/)上运行了指令，一切都很顺利。但是，当我输入 URL 时，我收到 404 错误。我的服务器运行 CentOS。我不应该能够通过我在 deploy.rb 文件中定义的 URL 访问我的 Rails 应用程序吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:07:20.093

URL 取决于您如何配置服务器。为了为 Rails 应用程序提供服务，您需要安装一个 Web 服务器（Thin、Mongrel、Passenger、Nginx...）并将其配置为为您的 Rails 应用程序提供服务。

该站点将在您配置 Web 服务器主机的 URL/IP 上可用。

# apache - 使用 Wamp Apache 制作 servlet

> ID：12914707
> 
> 赞同：1
> 
> 时间：2012-10-16T12:27:27.283
> 
> 标签：apache, jakarta-ee

我的问题在标题中，我可以使用 WampApache 而不是 Tomcat 来编写 servlet 代码吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:32:37.827

[WAMP](http://en.wikipedia.org/wiki/WAMP)通常代表 Windows、Apache、MySql、PHP/Python，所以通常这样的堆栈中没有 Java，所以答案是你不能这样做......

# apache-camel - 骆驼应用设计

> ID：12914710
> 
> 赞同：1
> 
> 时间：2012-10-16T12:27:29.980
> 
> 标签：apache-camel

亲爱的骆驼用户！请告诉我

**1）我的设计一般有什么问题？（我确信这不是最佳的）**

**2) 在 Exchange 正文中使用 POJO 的正确方法是什么？**

我的 Grails Web 应用程序需要通过一些中间步骤与远程 Web 服务交互：

1.  创建请求 xml
2.  验证此 xml
3.  使用 dsig 签署 xml
4.  将签名的 xml 发送到网络服务
5.  验证响应签名
6.  验证响应 XML
7.  处理响应

每个步骤都可能引发异常，必须在页面上显示。像这样：“步骤*StepName*发生错误，错误消息：*消息*”。

所以我想我更喜欢的模式是“请求-回复”。

我正在尝试使用一组处理器组装骆驼路线。每个处理器都像这样包裹在 .doTry() 中。

```
from("direct:sendServiceCatalog")
    .doTry()
        .process(new Processor() {

            @Override
            public void process(Exchange arg0) throws Exception {
                System.out.println("PROCESSING");
                throw new RuntimeException("Nice try");

            }
        })
        .to("mock:result")
    .doCatch(Exception.class)
        .process(
            new ExceptionStageDetectorProcessor(
                    SendServiceCatalogStage.FORM_XML))
        .to("mock:catch")
    .end(); 
```

ExceptionStageDetectorProcessor.java 类非常简单：

```
public class ExceptionStageDetectorProcessor implements Processor {

    public ExceptionStageDetectorProcessor(SendServiceCatalogStage stage) {
        this.stage = stage;
    }

    public SendServiceCatalogStage getStage() {
        return stage;
    }

    private SendServiceCatalogStage stage;

    @Override
    public void process(Exchange exchange) throws Exception {
        Throwable caughtException = (Throwable) exchange
                .getProperty(Exchange.EXCEPTION_CAUGHT);

        exchange.getOut().setBody(new ProcessError(stage, caughtException));
    }
} 
```

它几乎奏效了！:)

问题是不能使用新的主体*ProcessError*，当发生异常时返回的对象是错误字符串，而不是 ProcessError 对象。如果我尝试设置一个简单的字符串 .setBody("FOO") 返回对象正是“FOO”。

# iphone - 在 ios 的屏幕上检查当前视图控制器

> ID：12914712
> 
> 赞同：14
> 
> 时间：2012-10-16T12:27:32.450
> 
> 标签：iphone, ios, ipad, uiviewcontroller

我已经使用以下代码在 self 对象上展示了一个包含 UIViewController 的 UINavigationController

```
 drawController = [[DrawImageViewController alloc] initWithNibName:nil bundle:nil];
[drawController setDrawControllerDelegateObject:self];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:drawController];
[self presentModalViewController:nav animated:YES];
[nav release]; 
```

但是在第二次调用上述代码之前，我想知道当前出现在屏幕上的视图控制器是否是drawController。我正在使用以下代码

```
 if (drawController && [drawController isBeingPresented]) 
```

但它不适用于我，它也适用于 iOS 5.0，所以我被困在这里。请帮助我知道我应该如何知道当前出现在屏幕上的 UIViewController 属于哪个类以及 drawContoller 是否仍然出现在屏幕上？抱歉，如果有任何拼写错误。任何帮助将不胜感激。

谢谢内哈梅塔

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T12:34:43.090

使用`navigationController's visibleViewController property`并`isKindOfClass method`了解最新信息`top`：

```
if([self.navigationController.visibleViewController isKindOfClass:[yourcontroller class]])
   //exists
else
   //not exists 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T12:31:41.140

不是最漂亮的代码，但这应该可以工作：

```
if ([self.presentedViewController isKindOfClass:[UINavigationController class]] &&
   ((UINavigationController *)self.presentedViewController).topViewController == drawController) {
   … 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T12:32:15.073

检查`UINavigationController`s`visibleViewController`方法。

有关文档，请参阅[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# vba - vba excel中不包括负数和非数值的中位数

> ID：12914713
> 
> 赞同：0
> 
> 时间：2012-10-16T12:27:36.690
> 
> 标签：vba, excel

我可以执行以下操作来获取一系列值中的中位数，不包括 excel 中的负值和非数字值：

```
=MEDIAN(IF(ISNUMBER(B1:B8),IF(B1:B8>0,ROUND(B1:B8,2)))) 
```

如何在 vba excel 中完成上述操作？

数据可以是数字、“N/A”短语和负值，

示例：12、2、-4、不适用、3、4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:04:19.853

作为一个非常快速的解决方案，您可以直接在 vba 中使用工作表功能。

这将是您的公式作为 vba 的示例

```
Dim myValue As Variant
Dim myRange As Range
Set myRange = Range("B1:B8")
With Application.WorksheetFunction
  myValue = 0
  If .IsNumber(myRange(1, 1).Value) Then
     If myRange(1, 1) > 0 Then
       myValue = .Round(myRange(1, 1), 2)
     End If
  End If
  Debug.Print .Median(myValue)
End With 
```

但是，我不认为这正是您的目标。也许你可以给你的数据一个更好的例子，来测试它。

**编辑：这很好用**

```
Sub jookCalc()
  Dim myValues() As Variant
  Dim myRange() As Variant
  Dim i As Long
  myRange = Range("B1:B8")
  With Application.WorksheetFunction
      ReDim myValues(LBound(myRange, 1) To LBound(myRange, 1))
      For i = LBound(myRange, 1) To UBound(myRange, 1)
        If .IsNumber(myRange(i, 1)) Then
           If myRange(i, 1) > 0 Then
             myValues(UBound(myValues)) = .Round(myRange(i, 1), 2)
             ReDim Preserve myValues(LBound(myRange, 1) To UBound(myValues) + 1)
           End If
        End If
      Next i
      Debug.Print .Median(myValues)
  End With
End Sub 
```

# python - 通过成员函数比较和选择类 - 一种简洁的方法

> ID：12914715
> 
> 赞同：0
> 
> 时间：2012-10-16T12:27:44.073
> 
> 标签：python

**鉴于：**

1.  一组类实例 (CL) 和一个引用实例 (r)
2.  该类有几个getter，例如'getA'，'getB'，...

**Todo：**通过比较'getA'，'getB'，从CL中找到匹配'r'的那些实例......对于好的代码，应该只编写一个选择函数，并且通过提供不同的getter作为比较和选择标准来调用.

我的代码如下所示：

```
def selector(r, cl, cmp_function_name):
  return [i for i in CL if getattr(r, cmp_function_name)() == getattr(i, cmp_function_name)()]
# call it like this:
selector(r, cl, 'getA')
selector(r, cl, 'getB')
... 
```

但我不确定这是整洁的还是 pythonic 的。你怎么看它，你会如何编码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:35:55.057

我认为你`selector`的很好；这里有两个建议可以让它稍微快一点，更pythonic。

1.  不要`getattr(r, cmp_function_name)()`对 `CL`. 计算一次并保存：

    ```
    def selector(r, CL, cmp_function_name):
       refval = getattr(r, cmp_function_name)
       return [i for i in CL if getattr(i, cmp_function_name) == refval] 
    ```

2.  此外，在 Python 中，如果您的 getter 不带参数，请使用 [属性](http://docs.python.org/library/functions.html#property)而不是 getter：

    ```
    class CLClass(object):
        @property
        def A(self): 
    ```

    [代替](https://stackoverflow.com/questions/6618002/python-property-versus-getters-and-setters)

    ```
    class CLClass(ojbect):
        def getA(self): 
    ```

    `obj.A`然后，您可以使用而不是 访问该属性`obj.getA()`。

# heroku - heroku 无法工作（更新错误）

> ID：12914716
> 
> 赞同：4
> 
> 时间：2012-10-16T12:27:47.233
> 
> 标签：heroku

我的heroku突然停止工作。使用任何命令行运行 heroku.bat 时，我一遍又一遍地收到此消息：

> C:/Program Files (x86)/Heroku/lib/heroku/updater.rb:155:in `spawn': No such file or directory - C:/Program Files (x86)/Heroku/bin/heroku update (Errno::ENOENT) from C:/Program Files (x86)/Heroku/lib/heroku/updater.rb:155:in`background_update!' 来自 C:/Program Files (x86)/Heroku/lib/heroku/updater.rb:135:in `inject_libpath'

我尝试重新安装并删除 %userprofile%.heroku 但没有任何效果。我使用的是 Windows 7 64 位。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:51:00.277

我认为版本 2.32.13 被窃听尝试重新安装它无济于事。我已经重新下载并重新安装了 2.32.14...

# arrays - Array.Find 没有按预期工作

> ID：12914723
> 
> 赞同：0
> 
> 时间：2012-10-16T12:28:15.150
> 
> 标签：arrays, vb.net

帮帮我，我一定是做错了，

这里的第一个例子工作正常

```
 DatabaseType = Array.Find(pArgs, Function(s As String) s.ToLower.Contains("/db:")).Replace("/db:", "") 
```

但是如果那是假的并且我的变量结果什么都没有，那么它会抛出对象引用异常，因此我在它周围包裹了一个 IF，但是它永远不会返回 true，而且它也不会填充变量，就像那个以下：

```
 If DatabaseType = Array.Find(pArgs, Function(s As String) s.ToLower.Contains("/db:")).Replace("/db:", "") Then LogAndTrace("Database Type", DatabaseType) 
```

我需要做的是：

基本上我有很多命令行参数，我需要根据它们的前缀来区分它们是什么，并将它们分配给正确的属性，但它们并不总是存在，所以我想先看看它是否存在然后将前缀替换为空，将其分配给属性并将其写入日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:40:50.567

尝试在语句的*条件下*执行赋值是个坏主意`If`。我怀疑你想要这样的东西：

```
Dim databaseType = Array.Find(pArgs, Function(s As String) s.ToLower.Contains("/db:"))
If databaseType IsNot Nothing Then
    databaseType = databaseType.Replace("/db:", "")
    LogAndTrace("Database Type", databaseType)
End If 
```

（那是使用局部变量......如果你想分配一个*属性*，我会`If`在你执行替换时在块内这样做。）

# tridion - Tridion 核心服务：如何检查多行字段是否启用了富文本格式？

> ID：12914726
> 
> 赞同：4
> 
> 时间：2012-10-16T12:28:22.387
> 
> 标签：tridion, tridion-2011

我想检查核心服务是否在多行字段上启用了富文本格式。

如果我在启用富文本格式后分析模式的来源，那么会为此目的插入许多标签：-

```
 <tcm:Size xmlns:tcm="http://www.tridion.com/ContentManager/5.0">2</tcm:Size>
          <tcm:FilterXSLT xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
            <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
              <xsl:output omit-xml-declaration="yes" method="xml" cdata-section-elements="script"></xsl:output>
              <xsl:template name="FormattingFeatures">
                <FormattingFeatures xmlns="http://www.tridion.com/ContentManager/5.2/FormatArea">
                  <Doctype>Transitional</Doctype>
                  <AccessibilityLevel>0</AccessibilityLevel>
                  <DisallowedActions></DisallowedActions>
                  <DisallowedStyles></DisallowedStyles>
                </FormattingFeatures>
              </xsl:template>
              <xsl:template match="/ | node() | @*">
                <xsl:copy>
                  <xsl:apply-templates select="node() | @*"></xsl:apply-templates>
                </xsl:copy>
              </xsl:template>
              <xsl:template match="/body[not(processing-instruction() or comment() or normalize-space(translate(., &apos; &apos;, &apos;&apos;)) != &apos;&apos; or       *[@* or * or comment() or processing-instruction() or not(self::p or self::br)])]">
                <!-- make an empty <body> if all the body has is empty paragraphs, line-breaks and (non-breaking) spaces -->
                <xsl:copy></xsl:copy>
              </xsl:template>
              <xsl:template match="p[not(@* or * or comment() or processing-instruction() or normalize-space(translate(., &apos; &apos;, &apos;&apos;)) != &apos;&apos; or       following-sibling::node()[@* or * or comment() or processing-instruction() or not(self::p or self::text()) or normalize-space(translate(., &apos; &apos;, &apos;&apos;)) != &apos;&apos;])]">
                <!-- ignore all paragraphs at the end that have nothing but (non-breaking) spaces -->
              </xsl:template>
            </xsl:stylesheet>
          </tcm:FilterXSLT> 
```

但是，如果启用富文本，我什至在核心服务 API 文档中也无法弄清楚究竟是哪个属性。

我的核心服务代码如下所示：-

```
SessionAwareCoreService2010Client client = new SessionAwareCoreService2010Client();
client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName"; 
client.ClientCredentials.Windows.ClientCredential.Password = "myPassword";
client.Open();
SchemaFieldsData fields = client.ReadSchemaFields("tcm-x-y-z",
                                                  true, new ReadOptions());

foreach (var field in fields.Fields)
{
    if (field is MultiLineTextFieldDefinitionData)
    {
        return Constants.DataType.STRING;
    }
} 
```

请建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T12:44:55.963

只需更改您的“是”检查以与 XhtmlFieldDefinitionData 进行比较：

```
if (field is XhtmlFieldDefinitionData)
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:41:03.640

您可以使用标准`GetType().Name`：

```
var schemaFields = ClientAdmin.ReadSchemaFields("tcm:2-82-8", false, new ReadOptions());
var field = schemaFields.Fields.First();
Assert.AreEqual("XhtmlFieldDefinitionData", field.GetType().Name); 
```

# c# - 如何手动将 Web 服务部署到 IIS

> ID：12914734
> 
> 赞同：0
> 
> 时间：2012-10-16T12:29:01.493
> 
> 标签：c#, .net, web-services, iis, iis-7

我有一个用 C# 编写的 .NET 4.0 WebService。我的 IIS 安装（在 Windows 七下）是`IIS 7.5.xxx`.

当我编译我的 Web 服务和它使用的库时，我可以`bin`在各个项目的目录中获取程序集。我想了解如何手动将这些程序集放置在我的 Web 服务中，以便 Web 服务可以运行。只是将程序集放在`bin` 设置我的应用程序的 WebService 目录的目录中吗？我也认为，不知何故，`Web.Config`需要一些照顾。

我知道有一个*发布*Web 服务的过程，但我想知道如何在不使用 Visual Studio 及其所有内容的情况下完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:30:37.227

嗯，你试过什么？

是的，将 bin 文件夹转储到 IIS 应用程序中，该应用程序包含一个 web.config，该配置已设置为托管 bin 文件夹中的程序集中存在的服务。

# iphone - zksforce 单次上传

> ID：12914743
> 
> 赞同：1
> 
> 时间：2012-10-16T12:29:37.783
> 
> 标签：iphone, ios, ipad, salesforce

我正在使用 ZKSForce 库将数据上传到 CLOUD 数据库。

在 salesforce 中，可以选择在单个调用中同时上传父表和子表。 [销售人员 - 创建](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_create.htm)

确实，ZkSForce 中允许此功能。如何将子对象引用传递给父表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:22:58.690

是的，在 ZKSforce 中创建的工作方式与底层 SOAP API 完全相同，您传入一个要创建的 ZKSObjects 数组。

```
// pass an array of ZKSObject's to create in salesforce, returns a matching array of ZKSaveResults
- (NSArray *)create:(NSArray *)objects; 
```

正如您链接的文档所提到的，如果您想创建彼此相关的记录，那么父记录将需要为其声明一个外部 Id 字段，而您的子记录将需要使用它来声明父级，例如，如果您想插入一个具有相关联系人的帐户，并在帐户上有一个 accMaster__c 字段，该字段是一个 externalId，您可以这样做。

```
ZKSObject *acc = [[ZKSObject alloc] initWithType:@"Account"];
[acc setFieldValue:@"New Account" field:@"Name"];
[acc setFieldValue:@"ACC_1234" field:@"accMaster__C"];

ZKSObject *contact = [[ZKSObject alloc] initWithType:@"Contact"];
[contact setFieldValue:@"Simon" field:@"FirstName"];
[contact setFieldValue:@"Fell" field:@"LastName"];

// per the externalId docs, create a account structure that just contains the externalId value we want to resolve the account relationship for
ZKSObject *accRel = [[ZKSObject alloc] initWithType:@"Account"];
[accRel setFieldValue:@"ACC_1234" field:@"accMaster__C"];
[contact setFieldValue:accRel field:@"Account"];

NSArray *res = [sforce create:[NSArray arrayWithObjects:acc, contact, nil]];
NSLog(@"results are %@", res); 
```

运行此命令并在浏览器中打开新的联系人记录后，您可以看到它将父帐户关系设置为我们刚刚创建的新帐户记录。

![在此处输入图像描述](../Images/d2bd7bd0e810b98174034b3714149cc1.png)

如果您的父记录上没有自然的 externalId 字段，那么您可以做的一件事是创建一个并使用客户端的 GUID 作为新插入记录的 externalId 值，这将让您将记录关联在一起您无需让某些外部系统维护 externalIds->salesforce 映射即可创建呼叫。

# php - Symfony2：如何使用自定义 PdoSessionStorage 将会话属性保存为数据库上的自定义字段？

> ID：12914744
> 
> 赞同：4
> 
> 时间：2012-10-16T12:29:37.927
> 
> 标签：php, session, symfony, pdo, session-variables

我有一个扩展 PdoSessionStorage 的自定义类，但我不知道如何从会话中捕获属性以将它们保存为数据库中的独立字段。

其他可能性是在我的自定义 PdoSessionStorage 类的 sessionWrite($if, $data) 方法中反序列化会话数据。但我不知道如何反序列化 $data 字符串以仅获取我想要的数据。

我试过这个：

```
 unserialize($data); 
```

这给我带来了以下错误：

> 致命错误：未捕获的异常 'ErrorException' 带有消息 'Notice: unserialize() [function.unserialize]: /myserver/myapp/src/app/myBundle/myCustomPdoSessionStorage.php line 220 中的偏移量 0 的 82 字节的错误在 /myserver /myapp/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php:65 堆栈跟踪：#0 [内部函数]：Symfony\Component\HttpKernel\Debug\ErrorHandler->handle(8, 'unserialize( ) [...', '/Applications/M...', 220, Array) #1 /myserver/myapp/src/app/myBundle/myCustomPdoSessionStorage.php(220): unserialize('_symfony2|a:3: {...') #2 [内部函数]: app/myBundle/myCustomPdoSessionStorage->sessionWrite('72b823b39d316dd...', '_symfony2|a:3:{...') #3 {main} 抛出 / myserver/myapp/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler。第 65 行的 php

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:13:54.530

您在这里使用了错误的功能。`unserialize`适用于序列化值，但不适用于会话。即便是两人近在咫尺，也各有不同。

您可能正在寻找该[`session_decode`](http://php.net/manual/en/function.session-decode.php)功能。注意它反序列化为`$_SESSION`超全局，所以你可能想要包装它：

```
function unserialize_session($data) {
    $hasBuffer = isset($_SESSION);
    $hasBuffer && $buffer = $_SESSION;
    session_decode($data);
    $session = $_SESSION;
    $hasBuffer ? $_SESSION = $buffer : unset($_SESSION);
    return $session;
} 
```

对应的是[`session_encode`](http://www.php.net/manual/en/function.session-encode.php)类似的工作方式。

另请参阅：[如何在自定义处理程序中反序列化会话数据](https://stackoverflow.com/questions/13875961/how-to-unserialize-session-data-in-a-custom-handler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:38:09.577

我找到了！

My `CustomPdoSessionStorage`Class 扩展了`NativeSessionStorage`，它管理`$_SESSION`数组（读取、写入等）。

所以，在我的课堂上，我可以使用`$this->read('userId')`它并将其存储在我的数据库中。

所以非常感谢@hakre

# jquery - CakePHP / jQuery / JsHelper - 在多个表格单元格或 div 中包含元素的 AJAX 表单

> ID：12914747
> 
> 赞同：0
> 
> 时间：2012-10-16T12:29:57.677
> 
> 标签：jquery, cakephp

我正在使用 JsHelper 提交表单。但是，当我尝试在表单封装在表格中时提交表单时，提交继续进行，但提交时没有表单数据。我怀疑它与 JsHelper 在执行 AJAX 提交以收集我认为的数据时使用的 jQuery 函数 .closest('form') 有关。当表单驻留在多个 DOM 元素中时，.closest() 是否会感到困惑？我的问题的一个简单示例如下所示：

```
<table><tr>
  <?php echo $this->Form->create(); ?>
  <td><?php echo $this->Form->input('item'); ?></td>
  <td><?php echo $this->Js->submit('Send', array('update' => '#a-div')); ?></td>
  <?php echo $this->Form->end(); ?>
</tr></table> 
```

以上将进行 AJAX 提交，但不会将 ['Model']['item'] 附加到提交中。有没有办法缓解这个问题，也就是说，仍然将表单封装在几个 div 或表格单元格中，同时仍然正确发送相关数据？我试图让表单看起来不错，所以我想使用多个 DOM 元素来格式化表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:25:40.727

因为没有答案，我现在想说最好的方法是手动提交 AJAX，而不是依赖 JsHelper。据我所知，没有 CakePHP 解决方案。

# java - 安卓应用，连接未知蓝牙设备

> ID：12914751
> 
> 赞同：0
> 
> 时间：2012-10-16T12:30:10.770
> 
> 标签：java, android, macos, networking, bluetooth

我目前（用于测试）使用

```
private static String address = "07:12:05:16:66:69"; 
```

连接到我自己的蓝牙设备，但不知道如何让我的应用程序获取设备的 MAC 地址，以便它可以连接到其他设备。我附上了我的工作 MainActivity。

[http://pastebin.com/KJPvJXG1](http://pastebin.com/KJPvJXG1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:24:42.227

您必须通过设备发现过程才能查看您周围的设备地址。请参阅此处的文档：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html#DiscoveringDevices](http://developer.android.com/guide/topics/connectivity/bluetooth.html#DiscoveringDevices)

# jquery - 重量级 Jquery 幻灯片在台式机上运行缓慢，在 ipad 2、android ics 和 iphone 上崩溃

> ID：12914753
> 
> 赞同：0
> 
> 时间：2012-10-16T12:30:18.987
> 
> 标签：jquery, memory, crash, slideshow, jquery-cycle

我正在建立我的投资组合网站（看看这里...）

[http://www.tripleagent.co.uk/projects.html](http://www.tripleagent.co.uk/projects.html)

我正在使用带有 jquery.cycle.all.js 的 Jquery。我在多年前的作品中添加了大约 200 张幻灯片，并使用 fitvid.js 添加了一些 vimeo 视频（它会调整视频大小以适应响应式设计）。我的问题是工作站计算机（i7 ivy bridge 和 chrome）上的页面速度很慢，并且在 ipad、android 和 iphone 上崩溃。我是 jscript 和 html5 的新手，所以我不确定出了什么问题。

以我有限的经验，我相信它的内存不足或者速度较慢的机器无法同时处理淡入淡出动画。我使用幻灯片的典型设置

```
$("#slideshow").cycle({
    fx:'fade,',
    speed: 1000,
    slideExpr:'.slide',
    slideResize: 0,
    timeout:        7000,
    pause: 1,
    //sync: true,
    autostop: false,
    pager: '#nav',
    next: '#slideshow',
    pagerEvent: 'mouseover',
    fastOnEvent: true ,         
    pagerAnchorBuilder: function(idx, slide) 
    {return '<li><a href="#"><img src="'+slide.src + '"/></a></li>';
    },   
    after:   captionsAlt ,
    }); 
```

我应该怎么办 ？我可以将页面分成两部分，它可能会起作用，但我认为必须有一种方法来优化页面。有什么建议么？首先是否有任何错误、错误或糟糕的设计理念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T22:32:29.270

我问这个问题已经有几个月了。

我升级到最新的 jquery 1.9.1，cycle.all 3.0.4 我只是注意到 Safari、IE9 和 mozilla 不再有太大问题了。这些视频在 android 4.1+ 和 IOS 中播放良好，但仍然有点重，并且在 vimeo 播放器顶部的触摸和滚动方面存在一些问题。但我已经在 vimeo 论坛上问过了。

# android - findViewById 返回 null

> ID：12914754
> 
> 赞同：0
> 
> 时间：2012-10-16T12:30:21.070
> 
> 标签：android, null, findviewbyid

我有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.ui.library.actionbar.ActionBar
        android:id="@+id/actionBar1"
        style="@style/ActionBar"
        android:layout_width="wrap_content"
        android:layout_height="48dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" />

    <com.cidaut.moveo.calendar.ui.calendar.SingleCalendar
        android:id="@+id/singleCalendar1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/view1"
        android:layout_below="@+id/actionBar1" />

    <RelativeLayout
        android:id="@+id/view1"
        android:layout_width="match_parent"
        android:layout_height="48dip"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:background="@color/dark_gray" >

        <Button
            android:id="@+id/buttonFiltros"
            style="@style/MetroButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:padding="8dip"
            android:text="@string/filter" />
    </RelativeLayout>

</RelativeLayout> 
```

一切都按预期工作。但是，当我调用`findViewById`我`Activity`的 find`R.id.singleCalendar1`时，它返回 null。

我已经尝试清洁和更新无济于事。

我想用 膨胀视图`LayoutInflater.from(this).inflate(R.id.calendar_layout, null)`，找到它的孩子，然后找到 singleCalendar1 ID ...

![-1！](../Images/d63e14c5ad423608fe3a53da9b3861f0.png)

我真的不知道该怎么办。任何事后诸葛亮都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:38:20.033

我想我知道这里发生了什么......也许这是与你对话的一部分？

假设像这样

```
 Dialog d = new Dialog(this);
 setContentView(R.layout.my_layout);
 findViewById(R.id.my_view); //doesn't work 
```

尝试这个

```
 Dialog d = new Dialog(this);
 setContentView(R.layout.my_layout);
 View v = (View) d.findViewById(R.id.my_view); //will work 
```

尝试从父母那里引用。或者请在这个布局被拉入/使用的地方发布更多代码。

另外，您是否有适合单个日历对象的构造函数？

你需要这个

```
AndroidObject(Context context, AttribSet attrs); 
```

这将调用 super(context, attrs);

也许可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:39:24.807

对于膨胀使用这段代码

```
LayoutInflater inflaterLayoutInflater=(LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
        View layout=inflaterLayoutInflater.inflate(R.id.calendar_layout,null); 
```

否则，只需检查天气，如果您正常使用它，您是否已在 setCONtentView 中设置了正确的布局。

# java - 边缘网络中的黑莓 httpconnection 问题

> ID：12914759
> 
> 赞同：1
> 
> 时间：2012-10-16T12:30:29.190
> 
> 标签：java, blackberry, inputstream, httpconnection

我在黑莓应用程序中获取数据时遇到问题。下面的代码我用来从 xml 格式的服务器获取数据并解析这些数据并将其显示给用户。它在 wi-fi 中工作正常但是当我运行时它在使用 EDGE 或 GPRS 的真实设备上运行非常缓慢，而且很多时候它使输入流为空。我不明白为什么会在慢速网络中发生这种情况，但在 wi-fi 中却没有。

```
public InputStream getInputStream(String url)
{   
    HttpConnection  httpConnection = null;
    try
    {
        httpConnection = getConnectionForRequest(url);
        final int iResponseCode = httpConnection.getResponseCode();
        if(iResponseCode == HttpConnection.HTTP_OK)
        {
            return httpConnection.openInputStream();

        }
        else
            return null;
    }
    catch (Exception e)
    {
        return null;
    }
            finally
            {
                if(httpConnection!=null)
                {
                      httpConnection.close();
                }
            }

}

public HttpConnection getConnectionForRequest(String url) 
{

    int[] availableTransportTypes = {TransportInfo.TRANSPORT_TCP_WIFI,
                                     TransportInfo.TRANSPORT_BIS_B, 
                                     TransportInfo.TRANSPORT_WAP2,
                                     TransportInfo.TRANSPORT_TCP_CELLULAR, 
                                     TransportInfo.TRANSPORT_MDS, 
                                     TransportInfo.TRANSPORT_WAP};
    final ConnectionFactory connectionFactory = new ConnectionFactory();

    for (int i = 0; i < availableTransportTypes.length; i++) 
    {
        int transport = availableTransportTypes[i];
        if (!TransportInfo.isTransportTypeAvailable(transport) || !TransportInfo.hasSufficientCoverage(transport)) 
        {
            Arrays.removeAt(availableTransportTypes, i);
        }
    }

    connectionFactory.setPreferredTransportTypes(availableTransportTypes);
    connectionFactory.setAttemptsLimit(50);
    connectionFactory.setConnectionTimeout(3000);
    connectionFactory.setTimeLimit(20000);
    final ConnectionDescriptor connectionDescriptor = connectionFactory.getConnection(url);
    HttpConnection connection = null;
    if (connectionDescriptor != null) 
    {
        connection = (HttpConnection) connectionDescriptor.getConnection();
    }

    return connection;
}

public boolean parseData()
{   
    InputStream  is = getInputStream("http://data.****.com/getData.aspx");
    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder;
    Document doc;
    try 
    {
        docBuilder = docBuilderFactory.newDocumentBuilder();
        doc = docBuilder.parse(is);
        is.close();
        doc.getDocumentElement().normalize();
        docBuilder.isValidating();
    } 
    catch(Exception ex) 
    {           
        return false;
    }                                   
    return true;
} 
```

# objective-c - 何时设置音频会话属性

> ID：12914761
> 
> 赞同：1
> 
> 时间：2012-10-16T12:30:31.620
> 
> 标签：objective-c, audio

我应该设置音频会话属性的最佳时间是什么时候？

在应用程序中，我使用的是 PlayAndRecord 类别，我从用户那里获得了一些输入，然后将其回放。

现在我在每个输入和输出之前设置所有音频会话属性。设置这些属性似乎需要半秒时间。您会建议我在哪里执行此操作，以免在每次输入/输出之前出现延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:14:09.727

我在应用程序启动时创建的对象的构造函数中执行此操作。一旦设置了属性，就可以忘记它们，假设它们在应用程序的生命周期中不需要更改。

# ruby-on-rails - net/ldap 返回 Ldaperror 34，在带有 devise 和 devise_ldap 的 Rails 中，dn 语法无效，dn 应该是正确的

> ID：12914762
> 
> 赞同：0
> 
> 时间：2012-10-16T12:30:34.940
> 
> 标签：ruby-on-rails, devise, ldap

我正在尝试使用 net/ldap、devise 和 devise_ldap_authenticatable 为 ruby​​ on rails 应用程序实现身份验证（简单的“他是我们中的一员”）。

当我尝试登录时，弹出下面的错误消息，当我转到控制台并尝试使用相同的用户名/密码组合的 ldap.bind 时，它返回 false，但是 ldap.open 执行 |ldap| ; ldap.search (...) ; end 成功返回搜索。匿名绑定也返回 true，因此问题必须与 DN 有关。但是 DN 应该是正确的。通过打印语句调试，我发现我给出的确切输入（应该是正确的）通过 gems 传递到 ldap 服务器。我的想法不多了，有什么想法吗？

```
LDAP: Authorizing user uid=name,ou=People,dc=test,dc=com
LDAP: LDAP search: uid=name
Completed 500 Internal Server Error in 89ms
Net::LDAP::LdapError (Invalid binding information):
net-ldap (0.3.1) lib/net/ldap.rb:1230:in `bind_simple'
net-ldap (0.3.1) lib/net/ldap.rb:1209:in `bind'
net-ldap (0.3.1) lib/net/ldap.rb:718:in `bind'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable
/ldap_adapter.rb:134:in `admin'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable
/ldap_adapter.rb:107:in `has_required_attribute?'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable
/ldap_adapter.rb:77:in `authorized?'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable
/ldap_adapter.rb:14:in `valid_credentials?'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable/model.rb:38:in `valid_ldap_authentication?'
activesupport (3.2.3) lib/active_support/core_ext/object/try.rb:32:in `try'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable/model.rb:65:in 
authenticate_with_ldap'
devise_ldap_authenticatable (0.4.4) lib/devise_ldap_authenticatable/strategy.rb:16:in
authenticate!'
warden (1.2.1) lib/warden/strategies/base.rb:53:in `_run!'
warden (1.2.1) lib/warden/proxy.rb:354:in `block in _run_strategies_for'
warden (1.2.1) lib/warden/proxy.rb:349:in `each'
warden (1.2.1) lib/warden/proxy.rb:349:in `_run_strategies_for'
warden (1.2.1) lib/warden/proxy.rb:319:in `_perform_authentication'
warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
devise (2.1.2) app/controllers/devise/sessions_controller.rb:15:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:26:43.070

对于任何这些类型的问题，请尝试使用已知的良好工具，例如`ldapsearch`确定可分辨名称、凭据、基础对象等是否正确。

### 也可以看看

*   [LDAP：使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)

# php - 尝试学习 MySQL 和 PHP

> ID：12914766
> 
> 赞同：1
> 
> 时间：2012-10-16T12:30:42.513
> 
> 标签：php, mysql

我正在尝试完成[本教程](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)，并且我已经获得了一个 MySQL 首选项窗格，并且我显然已经启动了一个 MySQL 服务器，但我不确定如何继续。

在教程中它说...

> 以下是创建这些表所需的 MySQL 语句：
> 
> ```
> DROP TABLE IF EXISTS rw_promo_code;
> DROP TABLE IF EXISTS rw_app;
> DROP TABLE IF EXISTS rw_promo_code_redeemed;
> 
> CREATE TABLE rw_promo_code (
>     id mediumint NOT NULL AUTO_INCREMENT PRIMARY KEY, 
>     rw_app_id tinyint NOT NULL, 
>     code varchar(255) NOT NULL,
>     unlock_code varchar(255) NOT NULL,
>     uses_remaining smallint NOT NULL
> );
> 
> CREATE TABLE rw_app (
>     id mediumint NOT NULL AUTO_INCREMENT PRIMARY KEY, 
>     app_id varchar(255) NOT NULL
> );
> 
> CREATE TABLE rw_promo_code_redeemed (
>     id mediumint NOT NULL AUTO_INCREMENT PRIMARY KEY, 
>     rw_promo_code_id mediumint NOT NULL,
>     device_id varchar(255) NOT NULL,
>     redeemed_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
> ); 
> ```

但是，我不知道应该在哪里使用这些语句（我可以从空格和换行符的使用中看出它们不适用于终端）。

我应该在哪里使用这些命令来创建我的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:35:21.223

您应该使用 SQL 控制台应用程序。我推荐[MySQL Workbench](https://www.mysql.com/products/workbench/)

这里还有一个关于如何使用它[的教程。](https://dev.mysql.com/doc/workbench/en/wb-getting-started-tutorial.html)

# couchdb - 使用 Ektorp ExecuteBulk () 和 ExecuteAllOrNothing () API 在 Cloudant CouchDB 中执行批量更新时出错

> ID：12914769
> 
> 赞同：3
> 
> 时间：2012-10-16T12:30:49.503
> 
> 标签：couchdb, bulkinsert, bulk, ektorp, cloudant

我在使用 Ektorp executeBulk 和 ExecuteAllOrNothing 函数对 Cloudant DB (CouchDB) 中的文档列表进行批量更新时遇到问题。

对于`couchDbConnector.executeAllOrNothing(List<?> list)`，我收到如下错误：

```
org.ektorp.DbAccessException: 417:Expectation Failed
URI: /let-ut-app/_bulk_docs
Response Body: 
null
    at org.ektorp.http.StdResponseHandler.createDbAccessException(StdResponseHandler.java:44)
    at org.ektorp.http.StdResponseHandler.error(StdResponseHandler.java:62)
    at org.ektorp.http.RestTemplate.handleResponse(RestTemplate.java:98)
    at org.ektorp.http.RestTemplate.post(RestTemplate.java:61)
    at org.ektorp.impl.StdCouchDbConnector.executeBulk(StdCouchDbConnector.java:536)
    at org.ektorp.impl.StdCouchDbConnector.executeAllOrNothing(StdCouchDbConnector.java:494) 
```

如果我将相同的逻辑更改为使用 executeBulk， `couchDbConnector.executeBulk(List<?> list)`则错误消息如下所示：

```
org.ektorp.DbAccessException: 500:Internal Server Error
URI: /let-ut-app/_bulk_docs
Response Body: 
{
  "error" : "case_clause",
  "reason" : "{12,11}",
  "stack" : [ "fabric_doc_update:handle_message/3", "rexi_utils:process_mailbox/6", "rexi_utils:recv/6", "fabric_doc_update:go/3", "fabric:update_docs/3", "chttpd_db:db_req/2", "chttpd:handle_request/1", "mochiweb_http:headers/5" ]
}
    at org.ektorp.http.StdResponseHandler.createDbAccessException(StdResponseHandler.java:44)
    at org.ektorp.http.StdResponseHandler.error(StdResponseHandler.java:62)
    at org.ektorp.http.RestTemplate.handleResponse(RestTemplate.java:98)
    at org.ektorp.http.RestTemplate.post(RestTemplate.java:61)
    at org.ektorp.impl.StdCouchDbConnector.executeBulk(StdCouchDbConnector.java:536)
    at org.ektorp.impl.StdCouchDbConnector.executeBulk(StdCouchDbConnector.java:498) 
```

请让我知道你们中是否有人遇到过这个问题以及您是如何解决的。

感谢你的帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T06:41:36.093

我看到与 cloudant 服务器类似。我直接使用休息客户端拨打电话：

不幸的是，此代码片段不处理批量保存的 2 个选项（uuid 和全部或无）。您可以查看沙发床代码并自己实现（但我没有这样做）。

```
# this couchrest will throw an exception on some couchdb servers
# db.bulk_save(design_docs, false, true) # no uuids, all or nothing

bulk_docs = {'docs' => design_docs}
responses = CouchRest.post("#{db.root}/_bulk_docs", bulk_docs) 
```

# blackberry - 通过 os5 中的 BlackBerry BrowserField 在 https url 上发布数据

> ID：12914770
> 
> 赞同：1
> 
> 时间：2012-10-16T12:30:54.703
> 
> 标签：blackberry

我正在使用黑莓浏览器字段在服务器上发布数据，因为我正在制作一个 url 并调用 requestContent(url) 方法它工作正常。

但我的问题是，当我通过 requestcontent() 方法调用这个 url 时，我得到的响应是 html 文件，该文件有表单要再次发布，并且这个表单是通过脚本 submit() 方法发布的。这个表单数据正在发送https url 写入此表单的操作属性中，因此响应表单数据无法在该 url 上发布，并且由于**找不到传输描述符而出现错误**

如果有人知道，请回复我。

谢谢

# asp.net-mvc - 如何在jQuery自动完成中获取已删除元素的ID

> ID：12914772
> 
> 赞同：0
> 
> 时间：2012-10-16T12:30:58.437
> 
> 标签：asp.net-mvc, visual-studio-2010, kendo-ui

我正在使用 kendoUI 自动完成。要以带有“x”标记的框格式显示每条记录，我已经实现了

```
$("#roleAuto").kendoAutoComplete({
                       dataSource: roledata,
                       filter: "startswith",
                       placeholder: "Select Role...",
                       select: function (e, ui) {
                           alert("hi");
                           $(".roleSelection:checked").each(function () {
                               var role = $(this).attr("data-name"),
                                     var  span = $("<span>").text(role),
                                        a = $("<a>").addClass("remove").attr({
                                        title: "Remove " + role
                                        }).text("x").appendTo(span);
                               alert(role);
                               span.insertBefore("#roleAuto");
                                $("#Roles").click(function () {
                                 $("#roleAuto").focus();
                                 });
             $(".remove", document.getElementById("Roles")).live("click", function () {
                     $(this).parent().remove();
                     if ($("#Roles span").length === 0) {
                     $("#roleAuto").css("top", 0);
                           }
                       });
                   }); 
```

我能够在带有“x”符号的框中显示每条记录。如果我单击“x”标记，我可以删除记录，我想要删除的项目 ID 值。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:32:30.927

有一种自动完成的方法（以及许多其他数据绑定小部件）：

kendo.ui.widget.dataItem(index);

该事件的一个方法称为：

event.item.index();

自动完成方法的文档：[自动完成文档](http://docs.kendoui.com/api/web/autocomplete#methods)

因此，作为 select 函数的第一行，您可以编写：

```
var dataItem = this.dataItem(e.item.index()); 
```

点击事件的实时方法如下所示：

```
$(".remove", document.getElementById("Roles")).live("click", function () {
    alert(dataItem.Id); //Or in whichever property your Id is stored.
    $(this).parent().remove();
    if ($("#Roles span").length === 0) {
        $("#roleAuto").css("top", 0);
    }
}); 
```

# javascript - 后台页面生命周期和页面操作

> ID：12914779
> 
> 赞同：1
> 
> 时间：2012-10-16T12:31:19.747
> 
> 标签：javascript, google-chrome, google-chrome-extension

我是 JavaScript 和 Google Chrome 插件开发的新手。我正在尝试为它创建我的第一个扩展。我的目标是在维基百科页面上有一个[页面操作](http://developer.chrome.com/extensions/pageAction.html)，每次点击都会显示简单的 JS 警报。我的代码如下：

```
// manifest.json
{
    "name": "My Plugin",
    "version": "0.0.1",
    "manifest_version": 2,

    "description": "My first expirience in plugin development for Google Chrome browser",

    "page_action": {
        "default_icon": "icon.png",
        "default_title": "Action Title"
    },

    "background": { 
        "scripts": ["background.js"] 
    },

    "permissions": [
        "tabs"
    ]
}

// background.js
// Listen for any changes to the URL of any tab.
chrome.tabs.onUpdated.addListener(checkForValidUrl);

// Called when the url of a tab changes.
function checkForValidUrl(tabId, changeInfo, tab) {
  // Show action only for wikipedia pages
  var regex = /wikipedia.org/gi;
  if (tab.url.match(regex)) { 
    chrome.pageAction.show(tabId);
    chrome.pageAction.onClicked.addListener(onClickListener);
  }
};

function onClickListener(tab) {
    alert('Clicked!!!');
} 
```

问题是屏幕上多次显示警报。每次重新加载页面后，它会显示两倍。例如：

*   打开页面
*   点击我的插件图标
*   警报显示 2 次
*   转到下一页
*   点击图标
*   警报显示 4 次

等等...

但我希望每次点击只显示一次警报。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:40:14.243

您最初可以在文档加载时添加您的侦听器。在触发 DOMContentLoaded 事件后，您需要添加侦听器：

```
document.addEventListener('DOMContentLoaded', function() {
    chrome.tabs.onUpdated.addListener(checkForValidUrl);
    //chrome.pageAction.onClicked.addListener(onClickListener); //might need to put this here, it's been a while since I've done a chrome extension, but if you do then just put your conditional for the regex in your onClickListener function
});

    // Called when the url of a tab changes.
function checkForValidUrl(tabId, changeInfo, tab) {
  // Show action only for wikipedia pages
  var regex = /wikipedia.org/gi;
  if (tab.url.match(regex)) { 
    chrome.pageAction.show(tabId);
    chrome.pageAction.onClicked.addListener(onClickListener);
  }
};

function onClickListener(tab) {
    alert('Clicked!!!');
} 
```

# qt - 每个平台的默认文件位置？

> ID：12914784
> 
> 赞同：2
> 
> 时间：2012-10-16T12:31:32.813
> 
> 标签：qt, cross-platform, conventions, application-settings

我正在制作一个存储缓存和设置文件的（qt）跨平台应用程序。经过大量搜索，我仍然没有找到存储它们的方式和位置。*请注意，我只想在我会重新发明轮子或节省大量时间的情况下使用 QT 的东西；我希望绝对控制应用程序的行为，而 qt 有时相当随机或效率低下。*

对于 linux，默认值为 /etc//，但那里没有写访问权限，我的应用程序会将更改写入它的配置文件。对于缓存，这将是 /var//，但默认情况下也没有写访问权限。设置和缓存最好是用户独立的，因为它是服务器软件。

我已经想到了几种解决方案，但它们似乎不是很优雅：

*   让安装程序创建具有正确权限的目录（这意味着我将需要一个安装程序...... bleh）
*   将其全部存储在用户的主目录中，失去用户独立性
*   让QT处理（我真的不喜欢这个）

有任何想法吗？什么是最佳做法？这些东西在 windows 和 mac 上去哪里了？

**一些澄清：** 它是一个服务器应用程序，应该独立于单个用户运行，因此根本不希望在 /home 中存储任何内容。它也没有使用 QT 的任何 gui 功能，服务器将由设置文件或通过 IP 与服务器通信的单独 GUI 管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:58:42.103

如果您真的想使用这些文件夹，您的应用程序应该以 root 权限部分或完全执行。

您可以做的另一件事是：

*   为您的应用程序设置一个工作目录`myDir`，所有内容都存储在此工作目录中（如果您想要一个示例，qtcreator 会这样做）。
*   将您的目录保存在非用户特定的位置。我认为`/opt` [是一个不错的人选](http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html)。
*   为`myDir`用户组设置了所需的访问\修改\执行文件所需的权限。
*   `myDir`本身需要root才能删除，而不是里面的文件。
*   使用[QSettings为您的 Qt 应用程序进行设置](http://doc.qt.digia.com/qt/qsettings.html)

没有安装程序*，您将成为安装程序*：四处执行脚本和命令，并最终编写安装文档（我们现在在启动时这样做，这很痛苦，我们正在更改为完整安装程序模式）

注意：不是专家，但是使用两种类型的机器作为服务器似乎你们真的在找麻烦。或者您的应用程序可能针对所有类型的服务器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:32:31.223

我不认为有一个现成的 Qt 类可以做到这一点，它遵循与每个平台相同的行为。

但是我认为您可以尝试将其统一为您自己在不同平台上的应用程序，例如，在 $HOME/.yourapp 目录或类似的目录中。对于这种方式， QDesktopServices::storageLocation() 可以帮助你一点。

[http://doc.qt.digia.com/4.7/qdesktopservices.html#storageLocation](http://doc.qt.digia.com/4.7/qdesktopservices.html#storageLocation)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:14:51.723

为什么不将其与可执行文件存储在同一文件夹中：

```
QString fileName;

fileName = qApp->applicationDirPath();

fileName += "...what you want...";

QFile* file = new QFile(fileName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T14:10:23.863

用户应用程序不会在 /etc 或 /var 中存储用户可写数据，例如配置文件或缓存，它们通常使用并且应该使用 $HOME/.appname，或者现在经常使用的 $HOME/.config/appname (config ) 和 $HOME/.local/ (用于数据)。如果您使用 QSettings 并设置应用程序名称等，Qt 应该在这里做好配置数据的工作。 /etc 用于守护程序、系统配置等，而不是用于用户应用程序。/usr/share 等中可能存在只读默认配置，但用户永远无法写入。当系统上的多个用户同时运行应用程序时，共享用户可写数据也会给您带来很多同步/锁定问题。

在 OS X 上的 Windows 上，用户可写配置/数据也进入用户目录中的文件夹，在 Mac 上为 $HOME/Library/Application\ Support，注册表加上 C:\users\$Username\Application Data在 Windows 上（确切路径取决于 Windows 版本。环境变量 %APPDATA% 指向该位置））。

要偏离这些标准，对于用户/UI 应用程序（与系统范围的守护程序/服务相反，使用 /etc、/var 是常见做法）您应该有*非常*充分的理由，因为它们会与预期的相矛盾系统，尤其是在 Linux 和 OS X 上，您需要在 OS X 上安装一个安装程序，这对于那里的用户应用程序来说非常罕见。用户，尤其是管理员会讨厌你。

# forms - Chrome HTML5 表单验证问题

> ID：12914787
> 
> 赞同：2
> 
> 时间：2012-10-16T12:31:39.773
> 
> 标签：forms, html, google-chrome, validation

例如，当您键入`3.14`并按 Enter 键时 - 会出现验证弹出窗口。应该是固定数字（默认 step=1）。但是当您键入一些字符串时，例如`"hello"`并按回车键 - 表单提交。为什么？

见：http: [//jsfiddle.net/keeD2/](http://jsfiddle.net/keeD2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:15:52.950

尝试添加`required`到该字段：

```
<form action="#">
<input type="number" required/>
<input type="submit"/>
</form>​ 
```

见：http: [//jsfiddle.net/keeD2/2/](http://jsfiddle.net/keeD2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:29:14.790

根据 w3schools 的说法，这不是错误。查看数字的输入类型。我也很好奇为什么它不能正常工作。您是否尝试在浏览器上运行它？

[http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

# uilabel - UILineBreakModeWordWrap 已弃用

> ID：12914788
> 
> 赞同：83
> 
> 时间：2012-10-16T12:31:40.730
> 
> 标签：uilabel, deprecated

这是我的代码：

```
CGSize s = [string sizeWithFont:[UIFont systemFontOfSize:20]
               constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, CGFLOAT_MAX) // - 40 For cell padding
                   lineBreakMode:UILineBreakModeWordWrap]; 
```

我收到一条警告说 UILinebBreakModeWordWrap 在 iOS 6 中已弃用。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-10-17T09:55:16.640

您需要`NSLineBreakByWordWrapping`在 iOS 6中使用

对于您的代码，请尝试以下操作：

```
NSString *string = @"bla";

CGSize s = [string sizeWithFont:[UIFont systemFontOfSize:20]
              constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, CGFLOAT_MAX) // - 40 For cell padding
                  lineBreakMode:NSLineBreakByWordWrapping]; 
```

标签上的一个例子是：

```
[label setLineBreakMode:NSLineBreakByWordWrapping]; 
```

代替

```
label.lineBreakMode = UILineBreakModeWordWrap; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-29T17:54:33.803

为了保持向后兼容性，您可以创建如下宏：

```
#ifdef __IPHONE_6_0
# define LINE_BREAK_WORD_WRAP NSLineBreakByWordWrapping
#else
# define LINE_BREAK_WORD_WRAP UILineBreakModeWordWrap
#endif 
```

# android - 在为不同 API 级别定义的同一主题之间共享属性

> ID：12914797
> 
> 赞同：1
> 
> 时间：2012-10-16T12:32:01.587
> 
> 标签：android, android-theme

我在 values and values-v14 中定义了一个主题。

大多数属性是相同的（与 values-v14 相比的值），但有些只出现在一个中，而另一些只出现在另一个中。

如何避免属性重复？

例如，是否可以导入/包含属性？

如何设置一个包含所有公共属性的中间主题（在值中定义）。那么实际的主题会扩展...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:38:40.220

您可以创建一个父主题并使其他两个主题从中派生，例如：

```
<style name="Theme.ParentTheme">
    <item name="android:windowNoTitle">true</item>
</style>

<style name="Theme.FirstTheme" parent="Theme.ParentTheme">
    <item name="android:windowAnimationStyle">@android:style/Animation.InputMethod</item>
</style>
<style name="Theme.SecondTheme" parent="Theme.ParentTheme">
    <item name="android:windowAnimationStyle">@android:style/Animation.OutputMethod</item>
</style> 
```

# android - 将总数显示为多个引脚的文本，其中一个引脚位于 android 地图中的同一位置

> ID：12914801
> 
> 赞同：6
> 
> 时间：2012-10-16T12:32:11.997
> 
> 标签：android, google-maps, text, google-maps-api-3, pins

在android的地图中将多个引脚的总数显示为文本

我有 5 个图像要显示在相同的纬度和经度上。所以我想用一个图像将总数作为文本给出。当我点击该图像时，比在网格视图中显示所有 5 个图像...所以如何显示总数数字作为多个引脚的文本，其中一个引脚位于同一位置？

![一只忙碌的猫](../Images/b7c982cfa5dfaa918e7b23718f7ae940.png) ![两个布偶][1]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:23:44.553

这是我的问答，您可以在其中动态编号您的 pin 文本。检查一下，如果您需要任何帮助，请告诉我。

[如何在 MapView 上创建动态编号的引脚指针？](https://stackoverflow.com/questions/6501413/how-to-create-dynamically-numbered-pin-pointers-on-mapview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:20:02.323

您可以在此处使用[BadgeView](https://github.com/jgilfelt/android-viewbadger)并在 ImageView 上添加 Text，并且每次获得更新时都可以更新 Badge 的文本。

伪代码，

```
BadgeView badge = new BadgeView(mContext, your_image_view);
badgeViewCart.setText(updated_data); 
```

# javascript - 如何将图片发送到 images.google.com 并获得答案：“按图片搜索”

> ID：12914805
> 
> 赞同：0
> 
> 时间：2012-10-16T12:32:24.123
> 
> 标签：javascript, android, cordova, google-image-search

我需要使用 Phonegap 创建 android 应用程序。Phonegap 拍照，保存（使用默认相机应用程序），我想将该图像发送到 images.google.com 以获得“按图像搜索”答案（它可以在安装在 android 上的默认浏览器中 - phonegap 可以自行关闭并打开浏览器）。

现在，如果你在浏览器中拖放，你会自动得到这个，但是有人知道如何从 javascript 中得到相同的结果吗？

我放弃了使用任何类型的 api 并尝试使用 POST。这是html代码：

```
<form action="http://images.google.com/searchbyimage/upload" method="post" enctype="multipart/form-data">
<input type="hidden" name="image_url" id="image_url" />
<input type="hidden" name="btnG" id="btnG" value="Search" />
<input type="file" name="encoded_image" id="encoded_image" value="C:\xampp\htdocs\test\bundy.bmp" />
<input type="hidden" name="image_content" id="image_content" />
<input type="hidden" name="filename" id="filename" />
<input type="hidden" name="hl" id="hl" value="en" />
<input type="hidden" name="bih" id="bih" value="507" />
<input type="hidden" name="biw" id="biw" value="biw" />
<input type="submit" name="submit" value="Submit" />
</form> 
```

现在：如果用户自己选择一张图片并点击上传，效果很好，但出于安全原因，只有用户可以这样做。我最初的想法是通过js在表单中设置一个默认值（输入类型=“文件”...），并自动提交它，但我不能从js/html方面触摸这个。

有谁知道如何解决这个问题？

编辑：我有这个想法而不是“文件”，我使用 type="text" 并将图像读取放入使用 fopen （或类似的东西 - 我现在在 localhost 上尝试 php，因为它更容易测试）。至今没有成功。有什么线索吗？

EDIT2：另一个想法是直接转到[https://www.google.com/search](https://www.google.com/search)并在 base64 中发送图像，但我没有谷歌指纹（他们生成的原因之一可能是因为他们不想成为像那样“被黑”：D）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-10-16T12:40:24.157

对 ex alt = "image title" 使用 alt 标签，这将有助于在 google 上对图像进行索引

# java - Java 安全类强制转换异常

> ID：12914814
> 
> 赞同：8
> 
> 时间：2012-10-16T12:32:56.953
> 
> 标签：java, security, rsa, encryption

嗨，我是 Java 安全的初学者，在调用时遇到以下问题：

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding"); 
```

我得到了错误：

`java.lang.ClassCastException: com.sun.crypto.provider.RSACipher cannot be cast to javax.crypto.CipherSpi`

在我的 war 文件中还有 5 个用于支付网关加密的 jars 文件：

*   cryptix-jce-api.jar
*   cryptix-jce-provider.jar
*   cryptix-消息-api.jar
*   cryptix-openpgp-provider.jar
*   cryptix-pki-api.jar

如果没有这 5 个 JAR 文件，那么**Cipher.getInstance()**就可以工作，但这是不可能的，因为我需要 JAR 来加密支付信息。

那里的任何人都可以向我展示我应该如何克服这个问题的路径？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T12:40:41.857

Powermockito 无法增强 javax.crypto 类，因此您可以在类级别添加以下注释：

`@PowerMockIgnore("javax.crypto.*") or @PowerMockIgnore({"javax.crypto" })`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:43:49.573

感谢所有的评论和回答。
最后，我将 5 个 Jars 从 WAR 文件移到服务器 Jars 库目录并解决了这个问题。
中间有一个`java.lang.RuntimeException: NYI`。
使用这里的解决方案解决了这个问题：http: [//javabeanz.wordpress.com/2009/06/11/java-lang-runtimeexception-nyi/](http://javabeanz.wordpress.com/2009/06/11/java-lang-runtimeexception-nyi/)
希望这对任何人都有帮助。
再次感谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-13T07:16:42.993

在类级别添加`@PowerMockIgnore("javax.crypto.*")`或 `@PowerMockIgnore({"javax.crypto" })`
添加后如果显示 Jce 安全异常
您可以下载此文件[Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 8](http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html)并替换此路径中的 local_policy jar 文件和 US_policay jar 文件：

```
C:\Program Files\Java\jdk1.8.0_151\jre\lib\security 
```

# c++ - 对 class::function 的未定义引用

> ID：12914819
> 
> 赞同：0
> 
> 时间：2012-10-16T12:33:31.780
> 
> 标签：c++, class, reference, undefined

我一直在为 uni 进行 C 编程，在业余时间我正在转向 C++，并试图从单独文件中的类开始，但在尝试制作我的项目时遇到了一些问题。我正在使用以下生成文件

```
EXEC = main
OBJS = main.o Bunny.o Name.o Board.o
CC = g++

CFLAGS = -Wall -Wextra -Werror
LIBS = 
LDFLAGS = 

$(EXEC): $(OBJS)
    $(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)

.PHONY: clean

clean: 
    rm -f $(EXEC) $(OBJS) 
run:
    ./$(EXEC) 
```

这只是我的 C 的一个修改版本，所以可能是这样，这里是相关的其他文件

主文件

```
#include <iostream>

#include "Name.hpp"
#include "definitions.hpp"

int main() {

    Name nameContainer;

    nameContainer.initMaleNameValidArray(); 

    std::cout << "Got to just before the return!\n" << std::endl;

    return 0;
} 
```

名称.cpp

```
#include <iostream>
#include <fstream>
#include <string>
#include "definitions.hpp"

class Name{
    public:
        void initFemaleNameArray() {
            std::ifstream myReadFile;
            myReadFile.open("girlsnames.txt");
            char output[100];
            if (myReadFile.is_open()) {
                while (!myReadFile.eof()) {
                    myReadFile >> output;
                    std::cout<<output;
                }
            }
            myReadFile.close();
        }

        void initMaleNameArray() {

        }

        void initFemaleNameValidArray() {
            static int femaleValidArray[GIRLS_NAMES] = {0};
        }

        void initMaleNameValidArray() {
            static int MaleValidArray[GIRLS_NAMES] = {0};
        }

        void freeAFemaleName(std::string name);

        void freeAMaleName(std::string name);

        std::string returnFreeFemaleName();

        std::string returnFreeMaleName();

    private:
        std::string femaleNameArray[GIRLS_NAMES];

        std::string maleNameArray[BOYS_NAMES];

        int femaleValidArray[GIRLS_NAMES];

        int maleValidArray[BOYS_NAMES];
}; 
```

名称.hpp

```
#ifndef NAME_HPP
#define NAME_HPP

#include "definitions.hpp"

class Name{
    public:
        void initFemaleNameArray();

        void initMaleNameArray();

        void initFemaleNameValidArray();

        void initMaleNameValidArray();

        void freeAFemaleName(std::string name);

        void freeAMaleName(std::string name);

        std::string returnFreeFemaleName();

        std::string returnFreeMaleName();

    private:
        std::string femaleNameArray[GIRLS_NAMES];

        std::string maleNameArray[BOYS_NAMES];

        int femaleValidArray[GIRLS_NAMES];

        int maleValidArray[BOYS_NAMES];
};

#endif 
```

运行 make 时出现的错误是：

```
mark@Mark-Linux:~/Documents/Misc/C++/Bunny$ make
g++    -c -o main.o main.cpp
g++    -c -o Bunny.o Bunny.cpp
g++    -c -o Name.o Name.cpp
g++    -c -o Board.o Board.cpp
g++  -o main main.o Bunny.o Name.o Board.o 
main.o: In function `main':
main.cpp:(.text+0x26): undefined reference to `Name::initFemaleNameArray()'
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

目前我只是想看看我是否可以使用来自不同文件中的类的方法，因此代码不完整。

对文字墙感到抱歉，但我真的很困惑，所以如果有人能提供任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:55:00.113

在 name.hpp 中，您正在定义 Name 类，这没关系。但是在 name.cpp 中，您再次定义了该类。这不是你想要的。您应该让 name.cpp 实现这些功能。看起来像这样：

```
#include <iostream>
#include <fstream>
#include <string>
#include "definitions.hpp"

#include "name.hpp"

void Name::initFemaleNameArray() {
    std::ifstream myReadFile;
    myReadFile.open("girlsnames.txt");
    char output[100];
    if (myReadFile.is_open()) {
        while (!myReadFile.eof()) {
            myReadFile >> output;
            std::cout<<output;
        }
    }
    myReadFile.close();
}

void Name::initMaleNameArray() {}

void Name::initFemaleNameValidArray() {
    // This is wrong, too. This creates a new array
    //static int femaleValidArray[GIRLS_NAMES] = {0};
    // You want this:
    memset(femaleValidArray, 0, sizeof(femaleValidArray));
}

void Name::initMaleNameValidArray() {
    //static int MaleValidArray[GIRLS_NAMES] = {0};
    memset(MaleValidArray, 0, sizeof(MaleValidArray));
}

void Name::freeAFemaleName(std::string name) {}
void Name::freeAMaleName(std::string name) {}
std::string Name::returnFreeFemaleName() {}
std::string Name::returnFreeMaleName() {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:52:42.933

您的 Name.cpp 和 Name.hpp 实际上是在声明单独的类，这可能是未定义的行为。相反，您的 Name.cpp 应如下所示：

```
#include <iostream>
#include <fstream>
#include <string>
#include "Name.hpp"

void Name::initFemaleNameArray() {
    std::ifstream myReadFile; 
```

等等

# c# - StructureMap 添加多个实例不起作用

> ID：12914820
> 
> 赞同：3
> 
> 时间：2012-10-16T12:33:32.227
> 
> 标签：c#, .net, structuremap

我正在尝试使用[StructureMap、NHibernate 和多个数据库](https://stackoverflow.com/questions/7930931/structuremap-nhibernate-and-multiple-databases)将一个类型的多个实例添加到结构映射中作为我的设计来源

这是我在注册表中添加它们的方法：

```
foreach (ConnectionStringSettings location in ConfigurationManager.ConnectionStrings)
        {
            For<INHibernateSessionFactory>()
                .Add(x => new NHibernateSessionFactory(location.Name, GetSessionFactory(location.ConnectionString)));
        } 
```

然后在我的 AppSessionFactory 中：

```
 public AppSessionFactory(IEnumerable<NHibernateSessionFactory> factories)
    {
        _factories = new List<INHibernateSessionFactory>(factories);
    } 
```

那个或这个都不起作用：

```
_factories = ObjectFactory.GetAllInstances<INHibernateSessionFactory>().ToList(); 
```

两个调用都返回两个相同的对象、相同的位置和相同的 SessionFactory。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:34:14.263

我不完全确定，但这可能与您访问修改后的闭包的方式有关。

我会尝试像这样创建变量的本地范围副本：

```
foreach (ConnectionStringSettings location in ConfigurationManager.ConnectionStrings)
{
    ConnectionStringSettings localLocation = location;
    For<INHibernateSessionFactory>()
        .Add(x => new NHibernateSessionFactory(localLocation.Name, GetSessionFactory(localLocation.ConnectionString)));
}
```

# css - CSS Float on resize：不需要的元素下推（边距/填充的原因）（响应式设计）

> ID：12914827
> 
> 赞同：0
> 
> 时间：2012-10-16T12:33:59.150
> 
> 标签：css, resize, media-queries, floating

我有以下问题：

我的标题由菜单、一些使用 flexslider 滑动的新闻和一个搜索输入组成：

问题：当我手动调整浏览器的大小，或者以更小的宽度重新加载它时；右元素向下跳（下推，因为没有剩余空间）

这是一个小测试：

[http://jsfiddle.net/FFVzh/](http://jsfiddle.net/FFVzh/)

有人知道解决方案吗？标题应该是响应式的，没有右元素的下推。

希望你能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:36:13.970

这是因为您已经为正确的元素设置了边距（以像素为单位），您需要使用`%`它并且它会起作用，否则使用填充而不是边距`box-sizing:border-box`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:37:28.410

如果您对边距的水平分量使用百分比`#right`，则边距将随窗口宽度缩放。

```
#right {
  background:yellow;
  float:right;
  width:18%;
  margin: 10px 1% 3px 0;
} 
```

# c# - 未能在 textButton 上设置输入限制并使用标签连接值

> ID：12914830
> 
> 赞同：0
> 
> 时间：2012-10-16T12:34:05.173
> 
> 标签：c#, .net, wpf, textbox, label

我正在开发 WPF 应用程序，其中有一个文本框、按钮、标签和一个切换按钮。在我的应用程序中，我应该执行如下两个操作：

1.  仅将文本框的输入设置在 0.0 到 5.0 之间。因此，如果写入的任何值超过 5.0，则必须限制为 5。类似地，写入低于 0.0 的任何值都必须受到限制，并且只能显示 0.0。

2.  如果值为 3.4 V，我的标签应将内容显示为“值”VIe，因为伏特应与其连接。

**Xaml 在这里：**

```
<TextBox Grid.Column="1" Text="{Binding VoltageText}" Name="VoltageBox" />        
<Label Grid.Column="2" Content="{Binding CurrentText}" Name="CurrentLabel" /> 
```

**型号类：**

```
string voltageText = string.Empty;
    public string VoltageText
    {
        get
        {
            return voltageText;
        }

        set
        {
            voltageText = value;
            OnPropertyChanged("VoltageText");
        }
    } 
```

这个文本框必须有我在第一点中提到的输入限制:) 我写的 textchanged 方法只允许 0-9 和 . 在文本框中：

```
// present in xaml.cs
private void VoltageBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        string txt = VoltageBox.Text;
        if (txt != "")
        {
            VoltageBox.Text = Regex.Replace(VoltageBox.Text, "[^0-9] [^.]", "");
            if (txt != VoltageBox.Text)
            {
                VoltageBox.Select(VoltageBox.Text.Length, 0);
            }
        }
    }

    string currentText = "0 V";
    public string CurrentText
    {
        get
        {
            return currentText;
        }

        set
        {
            currentText = value;
            OnPropertyChanged("CurrentText");
        }
    } 
```

您可以在启动时注意到`Currenttext = 0 V`并通过执行这些语句我想更改的值`CurrentText`：

```
double tempval = 120.0;

string CurrentVal = Convert.ToString(tempval / 10);
CurrentText = CurrentVal; // here V as volts must be concatenated and value must be 12.0 V 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:59:02.730

这是关于如何做事的粗略方法。

首先在您的 ViewModel 上，有一个属性是您的电压有效值，还有一个计算属性会添加一个“V”。做这些事情是 ViewModel 的责任，而不是 View 的责任。

```
 private double voltage = 0.0D;
    public double Voltage
    {
        get
        {
            return voltage;
        }

        set
        {
            if (value > 5.0D || value < 0.0D)
                throw new InvalidOperationException();
            voltage = value;
            OnPropertyChanged("Voltage");
        }
    }

    public string VoltageText
    {
        get
        {
            return Voltage + " V";
        }
    } 
```

然后为您的控制，不要使用 TextChanged，更喜欢使用 PreviewTextInput

**在你的 waml 中：**

```
 <TextBox Grid.Column="1" Text="{Binding Voltage}" Name="VoltageBox" PreviewTextInput="TextBox_PreviewTextInput" />
    <Label Grid.Column="2" Content="{Binding VoltageText}" Name="CurrentLabel" /> 
```

**在后面的代码中**

```
 private void TextBox_PreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        var textBox = sender as TextBox;
        if (textBox == null)
            throw new ArgumentException("sender");

        double result;
        var insertedText = e.Text;
        if (!double.TryParse(insertedText, out result) && insertedText != ".")
        {
            e.Handled = true;
        }
        else
        {
            string textboxCurrentValue = textBox.Text;
            int selectionLength = textBox.SelectionLength;
            int selectionStart = textBox.SelectionStart;
            if (selectionLength != 0)
            {
                textboxCurrentValue = textboxCurrentValue.Remove(selectionStart, selectionLength);
            }
            textboxCurrentValue = textboxCurrentValue.Insert(selectionStart, insertedText);

            if (!double.TryParse(textboxCurrentValue, out result) || result > 5.0D || result < 0.0D)
            {
                e.Handled = true;
            }
        }
    } 
```

这应该让你开始！

# java - 在 Eclipse 中将 SASS 用于 Java EE 项目

> ID：12914831
> 
> 赞同：2
> 
> 时间：2012-10-16T12:34:06.857
> 
> 标签：java, css, eclipse, sass

我已经在 SO 上提到[了这个](https://stackoverflow.com/questions/1474096/using-haml-sass-with-eclipse)问题，但这不是我正在寻找的解决方案。

我是一名 Java Web 开发人员，到目前为止，对于所有 CSS 预处理需求，我一直在使用[Less](http://lesscss.org/)，但现在我想迁移[Sass](http://sass-lang.com/)，因为它具有服务器端渲染特性。但由于它需要`gem`包管理器，因此更接近 Ruby 而不是 Java，我如何在我在 Eclipse 中开发的 Java Web 应用程序中采用它？

请注意，我不是在 Eclipse 中寻找`.scss`/`.sass`文件的语法突出显示功能，但我希望当我的应用程序在 Eclipse 中的服务器上运行时，Sass 会自动处理并编译为常规 CSS。（而不是`sass --watch`在 Eclipse 之外为我创建和保存的每个 Sass 文件运行，并将生成的`.css`文件分别包含在我的网页中）

PS 我同时使用 Linux 和 Windows，但我主要在 Linux 中开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-11T08:58:55.363

几年过去了，但现在终于有了一个可行的解决方案：

[https://github.com/eclipse/wildwebdeveloper#-get-it-now](https://github.com/eclipse/wildwebdeveloper#-get-it-now)

Wild Web Developer 与 Eclipse 的集成很容易。一旦更改，它会将您的 SCSS 文件编译为 CSS 文件。除此之外，它还支持许多其他功能，例如代码完成、代码突出显示、验证等等。您需要安装 node.js 才能使用它的所有功能。

# android - 修复后Eclipse错误标记不会消失

> ID：12914832
> 
> 赞同：1
> 
> 时间：2012-10-16T12:34:07.903
> 
> 标签：android, xml, eclipse, eclipse-juno, android-lint

我正在 Eclipse Juno 上开发一个 Android 应用程序，并使用 MAC OS Lion。当我修复 xml 文件中的某些错误时，错误标记不会消失，即使我修复它也不会让我编译代码。我尝试通过 Window-> Show View -> Problems 删除它，但是当我编译代码时，错误又回来了。我想解决它的唯一方法是裁剪文件中的所有内容，保存没有错误的 xml，然后再次将相同的代码粘贴到 xml 文件中，错误就消失了，就好像那里没有任何东西一样。有谁现在为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:46:09.860

Grahaminn 是正确的，因为如果您缺少某些东西，查看代码会很有帮助。但是，由于您说一旦剪切、保存和粘贴它就会消失，我相信您确实解决了这个错误。虽然除了 eclipse 编译器显然存在错误之外，我从未找到相同问题的答案，但我也发生了同样的事情，并且不得不以同样的方式解决问题。无论出于何种原因，编译器仍然会看到错误而不是修复。这非常令人沮丧，但在编译器修复之前，我们一直在做你所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:15:45.127

更新您的 Android 开发工具。该错误（Android Lint 问题即使在更正之后仍然存在）在 ADT 20.0.2 中得到修复。

如果您不能或不想升级，您可以选择

*   清理项目
*   再次手动运行 Android Lint。

但类似的错误会不时再次发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:00:48.523

感谢所有的答案。至少到目前为止，我的 Eclipse 工作正常，唯一仍然让我头疼的是 R.java 文件有时会不断消失，但我猜那是由于 ADT 的问题。我卸载了 ADT 插件并重新安装了它。

# java - 访问具有相同变量名的不同类型的超级成员

> ID：12914833
> 
> 赞同：-2
> 
> 时间：2012-10-16T12:34:10.197
> 
> 标签：java, subclass

考虑下面的超类和子类对，你如何访问超类成员？

```
class Super { 
    Number aNumber; 
} 

class Subbie extends Super { 
    Float aNumber; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:36:15.577

`super.aNumber`如果超级成员是子类的实例，您可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:37:16.697

鉴于该属性没有可见性修饰符，假定它是包私有的。只有在同一个包中`Subbie`才能访问`Super`'s 。`aNumber`

如果是，您可以像这样访问它：`super.aNumber`. 注意`super`这里是一个隐含引用超类的关键字，与被命名的超类没有任何关系`Super`。

```
class Super { 
    Number aNumber; 
} 

class Subbie extends Super { 
    Float aNumber; 
    public Number getNumberFromSuper() { 
        return super.aNumber;
    }
} 
```

我建议在线阅读优秀的 Java 教程，例如：

*   [遗产](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)
*   [控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:05:59.407

您可以使用称为*访问修饰符*的不同关键字定义一个字段（查看末尾的链接以获取有关此主题的详细说明），每个字段都定义了访问/使用的范围。我将把这个解释集中在字段上。

*公开：*所有人都可以访问。此访问修饰符经常用于方法而不是字段。在 Java 中，鼓励使用`get`和`set`方法来访问字段的值并（分别）更改它。您可以通过以下方式访问字段：

```
AClass c = new AClass();
c.publicField = 3; //Setting a value in a field, int in this case
int sum = c.publicField + 4; //Obtaining the value of publicField to use it 
```

*私有：*将字段定义为私有使其仅对类本身可见，这意味着类边界之外的任何人都无法看到该字段。Java 中的通用类通常具有私有字段和访问器（`get`&`set`方法）。

```
public class AClass {

    public int publicField;
    private String privateField = "Can't see me!";

    public String getPrivateField() {
        return privateField;
    }

    public void setPrivateField(String newValue) {
        privateField = newVaule;
    }

} 
```

Getter 和 Setter 允许您控制对私有字段的访问，允许您在更新该字段的值之前执行您想要的任何逻辑，或者在需要时返回其值之前准备特定的字段。

*受保护：*只有一个类的子类和同一个包中的类才能访问用这个关键字定义的字段。在您的情况下`Subbie`，可以访问同一包中的`protected`字段`Super`和任何其他类，`Super`也可以访问这些字段。

*没有访问修饰符：*这是您当前的情况，您的问题的答案很大程度上取决于您的类的结构。如果它们在同一个包中，那么您可以`Super`从`Subbie`. 否则，如果`Subbie`在另一个包中，您将无法访问该字段。该字段被称为*Package-Private*。

您可能想要查看的一些相关文章：

1.  [Java中的继承](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)
2.  [控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

# tridion - 使用 Experience Manager 创建页面时出现 400 错误（错误请求）

> ID：12914834
> 
> 赞同：1
> 
> 时间：2012-10-16T12:34:21.877
> 
> 标签：tridion, tridion-2011

我有一个安装了 Experience Manager 的 SDL Tridion 2011 SP1 HR1 映像。我可以成功浏览我的临时站点，登录到 ExM 并更改内容和页面。但是，当我尝试创建新页面时，我收到 400（错误请求）错误。这是记录的错误：

> 无法使用 OData 服务更新更改。
> 远程服务器返回错误：(400) 错误请求。
> 
> 组件：Tridion.SiteEdit.FastTrackPublishing
> 错误代码：1003
> 用户：NT AUTHORITY\NETWORK SERVICE
> 
> StackTrace 信息详细信息：在 System.Data.Services.Client.DataServiceContext.SaveResult.BatchRequest(Boolean replaceOnUpdate) 在 System.Data.Services.Client.DataServiceContext.SaveChanges(SaveChangesOptions options) 在 Tridion
> 的 System.Net.HttpWebRequest.GetResponse() .SiteEdit.FastTrackPublishing.ServiceImplementation.Preview(IEnumerable 1 publishedItemsInfo, TcmUri publishingTargetId) at SyncInvokePreview(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[ ]& 输出) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
> 
> `1 publishedItemsInfo, TcmUri publishingTargetId)
> at Tridion.SiteEdit.FastTrackPublishing.ServiceImplementation.Preview(IEnumerable`
> 
> 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
> 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
> 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

我刚刚检查了 CD 日志文件，可以看到这个错误：

> 012-10-16 12:29:05,782 错误 JPADAOFactory - 无法加载名称为：TrackedRequest 和类：com.tridion.storage.TrackedRequestDAO 的 JPA DAO，因为 DAO 构造中的异常 org.springframework.beans.factory.BeanCreationException：创建时出错在 URL [jar:file:/C:/ASP.NET/Preview/httpupload/bin/lib/tracking_core.jar!/com/tridion/storage/TrackedRequestDAO.class] 中定义名称为 'TrackedRequestDAO' 的 bean：bean 的实例化失败; 嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [com.tridion.storage.TrackedRequestDAO]：构造函数抛出异常；嵌套异常是 com.tridion.configuration.ConfigurationException：遇到意外的方言：。TrackedRequest 项目类型应配置为使用支持的数据库。

当我收到图像时，已为已发布的内容启用了内联编辑，但我需要自己创建内容类型和页面类型。我以通常的方式执行此操作，创建一个页面，将其标记为页面类型，将原型内容添加到其中，并配置命名和存储设置（针对创建的内容）。我还重新启动了 IIS，关闭了 COM+ 包并重新启动了 Tridion Service Host 和 Publisher 服务。

谁能解释我为什么会收到这个错误，以及如何解决它？

**编辑**

所以错误表明这是存储配置中的一个问题。以下是相关部分：

```
 <Storage Id="trackingDB" Class="com.tridion.storage.persistence.JPADAOFactory" Type="persistence" dialect="MSSQL">
    <Pool CheckoutTimeout="120" IdleTimeout="120" MonitorInterval="60" Size="5" Type="jdbc"/>
    <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
      <Property Name="serverName" Value="SDLPE.pe.local"/>
      <Property Name="portNumber" Value="1433"/>
      <Property Name="databaseName" Value="tridion_tracking"/>
      <Property Name="user" Value="encrypted:u9aIOj9uX2IcL1rI6U5ndA=="/>
      <Property Name="password" Value="encrypted:vprUfrnluvIQAVRNSMTx5g=="/>
    </DataSource>
  </Storage> 
```

和：

```
<Item cached="true" typeMapping="TrackedRequest" storageId="trackingDB"/> 
```

**编辑**

我刚刚浏览了日志文件，发现了这个：

> 2012-10-16 14:12:43,148 调试 ConfigurationItemTypeLoader - 加载映射：trackedrequest 到存储：trackingDB
> 2012-10-16 14:12:43,148 调试 ConfigurationItemTypeLoader - 加载映射：trackingbatch 到存储：trackingDB
> 2012-10-16 14:12 :43,148 DEBUG ConfigurationItemTypeLoader - 加载映射：同步记录到存储：trackingDB
> 2012-10-16 14:12:43,148 DEBUG ConfigurationItemTypeLoader - 加载映射：trackingitem 到存储：trackingDB

似乎应该正确选择配置，但仍然无法从相关存储定义中正确读取方言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:49:53.577

最后，问题与为页面类型指定页面元数据有关。我看到记录的错误不会影响网站的性能，所以误导了我。

# ruby-on-rails - 如何使用太阳黑子中的 Solr 空间搜索来参考距离？

> ID：12914839
> 
> 赞同：2
> 
> 时间：2012-10-16T12:34:42.140
> 
> 标签：ruby-on-rails, solr, sunspot, websolr

我使用标准语法通过 Sunspot on Rails 使用 Apache Solr：

```
class Post < ActiveRecord::Base
  searchable do
    # ...
    latlon(:location) { Sunspot::Util::Coordinates.new(lat, lon) }
  end
end 
```

通过搜索：

```
Post.search do
  order_by_geodist(:location, 32, -68)
end 
```

如何获取命中中搜索位置的距离？我已经尝试了一百万种不同的语法选项来返回命中中的 geodist，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:41:19.053

在 Sunspot 2.0.0.pre.120925 中，您必须在[http://wiki.apache.org/solr/SpatialSearch#Returning_the_distance](http://wiki.apache.org/solr/SpatialSearch#Returning_the_distance)中加入 hack 。这会将距离计入分数，如下所示：

```
results = Post.search do
  fulltext "{!func}geodist(location_ll, 32, -68)"
  order_by(:score, :asc)
end

post = results.hits.first.result
distance = results.hits.first.score 
```

# javascript - 获取jstree中子节点的直接父节点

> ID：12914841
> 
> 赞同：3
> 
> 时间：2012-10-16T12:34:44.950
> 
> 标签：javascript, jstree

我想在`child node`不单击`tree`..的情况下检索 的父级

```
data.inst._get_parent(data.rslt.obj).attr("id"); 
```

当我们单击时，上面的命令给了我直接的父级`child nodes`。

有没有办法在`parent node`不点击的情况下获得`child node`.

问候， Praque M

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-25T20:13:25.443

似乎“data.inst”在较新版本中被重命名为“data.instance”。这使得追踪解决方案变得困难

`data.instance.get_parent(data.node)`返回父级的字符串 ID（对我来说非常意外）。为了得到父母，我必须调用`data.instance.get_node()`字符串 ID。

`data.instance.get_parent(data.node)`也可以通过 data.node.parent 访问。

例子：

```
$('#MaterialCollectionTree').on('activate_node.jstree', function(e, data) {
  if(data.instance.is_leaf(data.node)) {
    alert("Leaf: " + data.node.text);
    alert("Parent: " +  data.instance.get_node(data.node.parent).text);
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:32:08.953

那就有点复杂了

```
parent_node = $.jstree._reference('#tree_id')._get_parent(n); 
```

变量 parent_node 是一个 jquery 对象，所以命令

```
parent_node.attr("something"); 
```

是相同的

```
$("#parent_node_id").attr("something"); 
```

# sql - 用空游标调用 oracle 程序？

> ID：12914843
> 
> 赞同：1
> 
> 时间：2012-10-16T12:34:47.667
> 
> 标签：sql, oracle, stored-procedures, plsql

我有一个看起来像这样的程序：

```
 PROCEDURE myprocedure (
      i_area        IN       somenumber%TYPE,
      io_areadata   IN OUT   areacursor
   ); 
```

我想知道是否有任何简单的方法来调用程序？我有第一个参数的数据，但第二个我不知道输入什么。有什么办法可以输入空光标或类似的东西吗？

这是我到目前为止所做的：

```
BEGIN
package.myprocedure (
      12345
   );
END; 
```

这给了我以下错误：

```
Error report:
ORA-06550: row 2, column 1:
PLS-00306: wrong number or types of arguments in call to 'MYPROCEDURE'
ORA-06550: row 2, column 1:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error. 
```

提前感谢您，并对我（也许）糟糕的解释感到抱歉。我在 PL/SQL 方面几乎没有经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:44:29.833

您必须提供该参数。你可以这样做：

```
DECLARE
   dummy package.areacursor;
BEGIN
package.myprocedure (
      12345, dummy
   );
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T05:51:05.447

通过这种方式，您可以通过将特定值传递给特定参数来调用存储过程。试试这个。

```
Begin

package.myprocedure(i_area => '12345);

end; 
```

# oracle - 如何更改连接中的 Oracle 客户端用户

> ID：12914847
> 
> 赞同：2
> 
> 时间：2012-10-16T12:34:56.903
> 
> 标签：oracle, connection, odp.net, tnsnames, tns

我的机器上安装了 oracle 10 和 11 客户端。当我进入命令行并输入 TNSPING 时，输出告诉我这样的事情

```
TNS Ping Utility for 32-bit Windows: Version 10.2.0.1.0 - Production on 16-OUT-2012     09:34:39 
```

所以，我假设这台机器正在使用 10 版本的 oracle 客户端来处理连接。

如何改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:14:14.860

如果您转到命令行并在 Windows 计算机上键入“tnsping”，则 PATH 环境变量中首先列出的 Oracle Home 将是所使用的 Oracle Home。如果您希望 11g Oracle Home 成为默认值，您可以编辑 PATH 环境变量（控制面板 | 系统 | 高级 | 环境变量）并将 11g Oracle Home 路径移动到 10g Oracle Home 路径之前。或者，您应该能够从 11g 安装中打开 Oracle Universal Installer，并使用该实用程序中的 Oracle Home 选择器来更改 PATH 环境变量中的路径顺序。在幕后，该工具只是重新排列 PATH 中的目录。

但是，特定应用程序是否正在使用默认的 Oracle Home 是另一回事。某些应用程序设置为使用恰好是默认值的 Oracle Home。其他应用程序可以使用安装在非默认 Oracle Home 中的组件。由于您标记了这个问题 ODP.Net，我假设您实际关心的应用程序正在使用 ODP.Net。如果是这种情况，您可能需要查看 ODP.Net FAQ，其中讨论了[在具有多个 Oracle Homes 的客户端上使用 ODP.Net](http://www.oracle.com/technetwork/database/windows/faq-093106.html#MOH)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T10:37:49.883

正是出于同样的原因，我制作了以下工具： [http ://oratools.codeplex.com/wikipage?title=Oracle%20Home%20Selector&referringTitle=Home](http://oratools.codeplex.com/wikipage?title=Oracle%20Home%20Selector&referringTitle=Home)

它搜索机器上安装的 oracle 客户端，并允许通过修改注册表、环境变量和注册库来切换当前的 oracle 主目录

# facebook - 如何以编程方式登录 Facebook/Twitter？

> ID：12914854
> 
> 赞同：0
> 
> 时间：2012-10-16T12:35:07.753
> 
> 标签：facebook, ruby-on-rails-3, facebook-graph-api, oauth, cron

我被分配制定一个计划，用户可以通过移动 SMS（离线）访问 facebook/twitter/电子邮件。在这里，离线用户将他的凭据发送给移动网络运营商，后者又使用给定的凭据向我们的应用程序（rails）发出请求，以获取用户请求的文本信息。我的基本疑问是有没有办法以编程方式登录到 facebook/twitter/emails？

一种替代方法是使用类似 Nokogiri 的工具来发送发布请求。但我觉得这不是一个好主意。请问有人可以就此提出建议吗？有任何 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:04:16.083

结帐 ruby​​s Net::Http 库，最基本的方法是 [http://www.ensta-paristech.fr/~diam/ruby/online/ruby-doc-stdlib/libdoc/net/http/rdoc/classes/Net /HTTP.html](http://www.ensta-paristech.fr/~diam/ruby/online/ruby-doc-stdlib/libdoc/net/http/rdoc/classes/Net/HTTP.html)

除此之外，还有大量可用的宝石，例如

1.  **facebooker** gem 用于与 Facbook API [http://rubygems.org/gems/facebooker交互](http://rubygems.org/gems/facebooker)
2.  **推特**宝石[https://github.com/jnunemaker/twitter](https://github.com/jnunemaker/twitter)

# css - SASS 检查类名

> ID：12914855
> 
> 赞同：1
> 
> 时间：2012-10-16T12:35:08.463
> 
> 标签：css, class, variables, sass, mixins

嗨，我对 SASS 还是很陌生，也没有编程大师。

我有十个辅助元素，它们都需要根据它们的类名使用不同的背景颜色。

我查看了 SASS 文档，但无法弄清楚。

我想说如果旁边有一个类名 x 制作背景颜色 x 如果旁边有一个类名 y 制作背景颜色 y 等

有没有一种很好的有效方法？

谢谢大家，对不起，如果它是一个简单的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:38:08.467

如果您使用的颜色没有“标准”名称（或者类的名称根本不是颜色名称，例如产品 = 蓝色，地址 = 红色），则列表列表是你想要的：

```
$colors:
    ( black #000
    , white #FFF
    , red #F00
    , green #0F0
    , blue #00F
    );

@each $i in $colors {
    aside.#{nth($i, 1)} {
        background: nth($i, 2);
    }
} 
```

输出：

```
aside.black {
  background: black; }

aside.white {
  background: white; }

aside.red {
  background: red; }

aside.green {
  background: lime; }

aside.blue {
  background: blue; } 
```

如果您使用标准关键字的颜色，这可能会起作用：

```
$colors2: black, white, red, green, blue;

@each $i in $colors2 {
    aside.#{$i} { background: $i; }
} 
```

输出（虽然这似乎只适用于`--style debug`，使用`--style compress`产生错误..奇怪）：

```
aside.black {
  background: black; }

aside.white {
  background: white; }

aside.red {
  background: red; }

aside.green {
  background: green; }

aside.blue {
  background: blue; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:37:56.577

这只是取决于您想要输入多少打字。您可以制作一个背景混合并将其包含在备用 CSS 规则中，但这真的有必要吗？

如果是的话....

```
@mixin bg($color) {
    background: $color;
}

aside#foo {
    @include bg(#fff);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T13:53:52.573

“如果一边有一个类名 x 使背景颜色 x 如果一边有一个类名 y 使背景颜色 y”转换为以下 CSS：

```
aside.x {background-color: x}
aside.y {background-color: y} 
```

你有理由要使用 SASS 吗？是否让它动态化，以便您将来可以添加任何您想要的类而不更新 CSS？（如果是这样，SASS 就不可能，因为 SASS 代码编译为 CSS 并且之后不会更改）。

要完成这项工作，您必须使用 JS (jQuery)：

```
$('aside').each(function () {
    $(this).css('background-color', $(this).attr('class'));
}); 
```

编辑：您可以在 SASS 中使用循环来生成大量类和相应的背景颜色。

# php - pimcore 路由如何工作？

> ID：12914857
> 
> 赞同：1
> 
> 时间：2012-10-16T12:35:13.593
> 
> 标签：php, zend-framework, pimcore

我正在尝试使用 pimcore，但我被路线困住了。

他们仍然没有关于如何创建和使用它们的路线的详细文档。我也想创建像[http://www.example.com/controller/action](http://www.example.com/controller/action)这样的 URL，但我没有任何办法做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T04:12:13.290

控制器/动作由 Pimcore 中的文档处理。只需将控制器和操作分配给文档，Pimcore 就会生成路由。

它在文档中进行了解释：[文档](http://www.pimcore.org/wiki/display/PIMCORE/Documents)

另一方面，您可以使用魔术参数直接访问控制器/动作：

```
/?controller=myController&action=myAction 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:30:54.157

如果您想为您的控制器操作创建路由，那么您已经打开了您的 pimcore 管理员。

在显示您的主页 url 时，右键单击文档面板“添加页面”中的主页。

打开一个名为 home 的新选项卡，您必须进入设置面板。

在设置面板中，您可以指定您的控制器、操作、路径（您的路线）、键（您的该操作的键名）。

因此 url 将显示为 (home path)/(key name)

# mysql - 将两个 SELECT 语句组合成一个 JOIN

> ID：12914858
> 
> 赞同：1
> 
> 时间：2012-10-16T12:35:19.080
> 
> 标签：mysql, database, join

我有两个表： table_1: `item_id`, `name`... table_2: `image_id`, `item_id`,`url`

以下函数使用传入的“$name”检索项目的“urls”。我首先需要从 table_1 获取“item_id”以在查询中使用。我只需要从 table_2 返回“url”。

它目前工作正常，但我觉得它可以简化为在一个带有 JOIN 的查询中完成，而不是两个单独的查询。我尝试使用不同的 'JOIN' 来使其工作，但我似乎无法做到正确。

这是现在具有两个查询的功能...

```
function get_items( $name ) {

    global $wpdb;

    $sql1 = "SELECT `item_id` FROM `table_1` WHERE `name` = '$name'";
    $results1 = $wpdb->get_var( $sql1 );

    $sql1 = "SELECT `url` FROM `table_2` WHERE `item_id` = '$results1'";
    $results2 = $wpdb->get_results( $sql1, ARRAY_A );

    return $results2;

} 
```

这是我尝试实现的“JOIN”，但没有成功（我也将其切换并执行了“LEFT/RIGHT JOIN”，结果相同）...

```
$sql1 = "SELECT `table_2`.`url` 
         FROM `table_2` 
         INNER JOIN `table_1`
         ON `table_2`.`item_id` = `table_1`.`item_id`
         WHERE `table_1`.`item_id` = '$name'"; 
```

关于组合这两个查询的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:38:31.593

您的查询的问题是这个`WHERE table_1.item_id = '$name'`，它应该`name`不是`item_id`

```
SELECT  b.url
FROM    table1 a
        INNER JOIN table2 b
            ON a.item_id = b.item_id
WHERE   a.name = '$name' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:40:25.043

```
select url from table_2 where item_id IN (select item_id from table_1 where name = $name ) 
```

# vb.net - 印刷标签的最佳设计方法

> ID：12914859
> 
> 赞同：0
> 
> 时间：2012-10-16T12:35:19.703
> 
> 标签：vb.net, winforms, design-patterns, printing

目前，我有一个用户从列表中选择产品的 UI。当他们双击他们选择的产品时，另一个表单会显示带有一些附加信息的产品以及相关的条形码。在第二个表单上有一个打印按钮。（这是我的问题所在）当单击打印按钮时，我想将此信息发送到标签模板并可以查看（可能通过 PrintPage），然后能够从中发送到打印机。

实现这一目标的最佳方法是什么？我可以想到两种不同的方法来实现这一点，但我相信还有更好的方法。1) 我可以在 XAML 中创建模板，然后将数据绑定到表单 2) 我可以在 form.vb 的 _PrintPage 事件中创建模板。（最直接但不是最快的）

*   有没有更简单的方法来创建模板并将信息发送给它，然后打印模板？
*   以这种方式制作另一个 Windows 表单并设计模板会更容易，但是是否可以在运行时将此表单发送到打印对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:52:45.217

通常我必须打印的任何东西，比如标签，我都会使用报告工具。.Net 带有自己的 Microsoft 报告工具[http://msdn.microsoft.com/en-us/library/bb885185.aspx](http://msdn.microsoft.com/en-us/library/bb885185.aspx)，并且有很多第三方报告工具，例如 Crystal 或 Telerik。他们都有用于布局的视觉设计师，并为您处理所有打印预览和打印内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:36:28.953

如果我对您的理解正确，您想在不使用报告工具的情况下在自己的程序中控制流程吗？在这种情况下，我将列出一些关于一种实现的想法 -

您可以使用包含区域和区域类型的（可序列化的）字典来制作简单的模板功能。当您使用绝对区域（标签本身）时，您可以例如这样做：

```
Private Template as Dictionary = New dictionary(Of String, TemplateEntry)

Friend Class TemplateEntry
    Public MeasureType As MeasureType
    Public RegionType As Regiontype
    Public X As Single
    Public Y As Single
    Public Width As Single
    Public Height As Single
    Public Content as Object
End Class

Friend Enum MeasureType
    Centimeters
    Millimeters
    Inches
    Pixels
    '...
End Enum

Friend Enum RegionType
    Text
    [Image]
    BarCode
    '...
End Enum 
```

然后在您的代码中，您根据 DPI 将 x、y、w、h 转换为像素并返回`Rectangle`例如。您可以对字典进行 XML 序列化以创建其他模板等。

该`Content`字段在解析时被初始化。

要添加，您可以执行以下操作：

```
Dim tmpl As TemplateEntry = New TemplateEntry
tmpl.MeasureType = MeasureType.Millimeters
'...

Template.Add("Barcode", tmpl) 
```

然后将模板“渲染”到您的画布中进行打印：

```
For Each tLine in Template
    Dim r as rectangle = CalcMeasuresIntoPixels(tmpl)
    '...
    ' render each element based on type and location
Next 
```

希望这给了一些意见。

# visual-studio - 未选择 Cmake 自定义目标进行配置

> ID：12914864
> 
> 赞同：2
> 
> 时间：2012-10-16T12:35:24.483
> 
> 标签：visual-studio, cmake

我有一个自定义命令和自定义目标，它运行 doxygen 从头文件生成文档。

但是，当从命令行开始构建时，Visual Studio 不会构建此目标。它显示“未选择为此解决方案配置构建项目”。有没有办法确保为 Visual Studio 中的发布（或调试）配置选择此目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:01:15.403

您可能需要[add_dependencies](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aadd_dependencies)命令。

在定义了它们 doxygen 目标和可执行文件或库目标之后，编写类似

```
add_dependencies( my_executable my_custom_doxygen_target ) 
```

这将强制每次执行可执行文件时都构建 doxygen 目标。

也可以通过关闭`EXCLUDE_FROM_ALL`doxygen 目标上的属性来使其工作。我预计会`EXCLUDE_FROM_ALL`在 的描述中看到`add_custom_target`，但没有 - 所以它可能与我记忆中的不同。

# perl - Apache 服务器上使用 Plack::Runner 的 Perl Dancer

> ID：12914865
> 
> 赞同：1
> 
> 时间：2012-10-16T12:35:24.873
> 
> 标签：perl, apache, dancer, plack

我有一个 Perl Dancer 网络应用程序，我想在 apache 服务器上运行（在 centos 6 上）。我在 webapp 的 rootdir 中放置了一个指向使用 Pluck::Runner 模块的 public/dispatch.cgi 脚本的符号链接 (index.html)。

问题是在加载页面时，它找不到需要的文件（例如 sqlite 文件），实际上路由搞砸了，因为它在 $appname/index.pl/blabla... 寻找路由而不是$应用程序名/blabla...

我认为这里需要某种 apache 指令或规则，但我做得不够好。

我希望有人可以帮助我解决这个问题。

先谢谢了。罗伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:09:29.970

如果您提供您的 apache (vhost) 配置，将会有所帮助。

[您应该阅读Dancer 部署](http://search.cpan.org/dist/Dancer/lib/Dancer/Deployment.pod)的“以 cgi 脚本（或 fast-cgi）运行”部分，因为该文档提供了很多不同的方式来部署您的 Dancer 应用程序。

我喜欢在 Apache 后面使用[starman](/questions/tagged/starman "显示标记为“星人”的问题")作为代理。在[Perl Advent Calender 2010](http://advent.perldancer.org/2010/14)中，您可以找到如何执行此操作的说明。

Starman 的动态部分很快，而 apache 则非常适合静态文件和路由。

# php - 用 mysql 同步数据库 sqlite

> ID：12914869
> 
> 赞同：5
> 
> 时间：2012-10-16T12:35:37.713
> 
> 标签：php, android, mysql, sqlite

我在 android 应用程序中有一个数据库，我喜欢将这个 sqlite db 与互联网上的 mysql master 同步。

解决此问题的最佳方法是什么？

-dump 在文件中，使用 Web 服务上传文件 -dump 在文件中，使用 ftp 然后 cron 上传 - 还有其他吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:39:50.117

如果是一次性上传，请使用转储到文件方法。将其发送到服务器并在那里解析。

如果您必须保持同步，请使用 Web 服务 api，并且尽可能少地使用 - 收集大量数据然后同步，或者根据需要进行同步。专注于使用尽可能少的数据和电池。

# java - Java 连接重置

> ID：12914877
> 
> 赞同：1
> 
> 时间：2012-10-16T12:35:51.880
> 
> 标签：java, wcf, soap

我们使用的是 SOAP 1.1，并且我们还创建了一个 WCF Web 服务，当我们尝试通过 Java 中的 SOAP 获取响应时，它在 SOAP UI 中运行良好，连接已建立，但未收到任何数据。

我们得到了这样的回应：

```
HTTP/1.1 200 OK

Content-Type: text/xml; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Tue, 16 Oct 2012 12:05:28 GMT
Content-Length: 148 
```

在此之后没有收到任何 SOAP 响应并引发此错误：

```
ERROR : java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:189)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
at java.io.InputStreamReader.read(InputStreamReader.java:184)
at java.io.BufferedReader.fill(BufferedReader.java:154)
at java.io.BufferedReader.readLine(BufferedReader.java:317)
at java.io.BufferedReader.readLine(BufferedReader.java:382)
at ICNumber.main(ICNumber.java:113) 
```

这是代码片段：

```
String SOAPRequest ="<soapenv:Envelope"+
"xmlns:soapenv"+
"=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\">"+
            "<soapenv:Header>"+
            "</soapenv:Header>"+
            "<soapenv:Body>"+
            "<tem:ICNumberValidation>"+
            "<tem:ICNumber>"+
            strIC+
            "</tem:ICNumber>"+
            "</tem:ICNumberValidation>"+
            "</soapenv:Body>"+
            "</soapenv:Envelope>";

    try {
        //Create socket
        String hostname = "192.168.1.xx";
        int port = 90;
        InetAddress  addr = InetAddress.getByName(hostname); 
        SocketAddress sockaddr = null;
        try
        {
            sockaddr = new InetSocketAddress(addr, (port));
        }
        catch(IllegalArgumentException e)
        {
            System.out.println("ErrorCode-6001");
        }
        Socket sock = new Socket();
        try 
        {
            sock.connect(sockaddr, 10000);
        }
        catch(Exception e)
        {
            System.out.println( "ErrorCode-6001");
        }

        //Send header
        String path = "/Service1.svc";
        BufferedWriter  wr = new BufferedWriter(new OutputStreamWriter(sock.getOutputStream(),"UTF-8"));
        // You can use "UTF8" for compatibility with the Microsoft virtual machine.
        wr.write("POST " + path + " HTTP/1.1\r\n");
        wr.write("Accept-Encoding: gzip,deflate\r\n");
        wr.write("Host: " + hostname + "\r\n");
        wr.write("Content-Length: " + SOAPRequest.length() + "\r\n");
        wr.write("Content-Type: text/xml; charset=\"utf-8\"\r\n");
        wr.write("SOAPAction: \"http://tempuri.org/IService1/ICNumberValidation\"\r\n");
        wr.write("Connection: Keep-Alive\r\n");
        wr.write("User-Agent: Apache-HttpClient/4.1.1 (java 1.5)\r\n");
        wr.write("\r\n");

        //Send data
        wr.write(SOAPRequest);
        wr.flush();

        //response read
        BufferedReader reader = new BufferedReader( new InputStreamReader( sock.getInputStream() ) );
        String line = "";
        String line2 = "";

        while((line = reader.readLine()) != null)
        {
            line2 = line2 + line+"\n";
            System.out.println(line2);
        }
        System.out.println(line2); 
```

# memory - Azure 保证内存

> ID：12914881
> 
> 赞同：0
> 
> 时间：2012-10-16T12:36:01.500
> 
> 标签：memory, azure

我们目前正在为预期的大量负载准备 Azure 角色（标准 Web 角色），我们需要知道当前设置消耗了多少内存。为了实现这一点，我们使用负载测试，同时使用`GC.GetTotalMemory`.

页面[http://technet.microsoft.com/en-us/cloud/gg663909.aspx](http://technet.microsoft.com/en-us/cloud/gg663909.aspx)列出了`Compute Instance Guaranteed Memory`每个实例大小（例如，`0.768 GB`对于 Extra-Small Instance 和`3.5 GB`Medium Instance）。

**的值是否`GC.GetTotalMemory`与这些列表中的值相当？**换句话说，如果`GC.GetTotalMemory`显着低于列出的限制，我们能否确定不会由于内存交换而导致任何突然的性能损失？

如果我们达到限制，我们的假设是否正确，即会有一些内存交换（将内存内容写入虚拟硬盘），**还是会产生更严重的影响，例如重复的 App Pool 回收？**

（最后一个问题出现了，因为如果您达到某些内存限制，大多数共享主机会回收您的应用程序池，但坦率地说，我们不希望 Windows Azure 有这样的事情）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:47:53.143

此方法只会为您提供进程当前分配的字节。0.768 GB 包括操作系统可用的内存，也可以有虚拟内存。

[system.gc.gettotalmemory](http://msdn.microsoft.com/en-us/library/system.gc.gettotalmemory.aspx)

要获得总系统内存，您可以使用：

添加对 System.Management 的引用。

```
private static void DisplayTotalRam()
{
  string Query = "SELECT MaxCapacity FROM Win32_PhysicalMemoryArray";
  ManagementObjectSearcher searcher = new ManagementObjectSearcher(Query);
  foreach (ManagementObject WniPART in searcher.Get())
  {
    UInt32 SizeinKB = Convert.ToUInt32(WniPART.Properties["MaxCapacity"].Value);
    UInt32 SizeinMB = SizeinKB / 1024;
    UInt32 SizeinGB = SizeinMB / 1024;
    Console.WriteLine("Size in KB: {0}, Size in MB: {1}, Size in GB: {2}", SizeinKB, SizeinMB, SizeinGB);
  }
} 
```

[代码来源](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/27ed53ff-f88e-463d-a27d-5c55fb290be9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:10:30.463

要回答您的最后一个问题，Windows Azure 将不碍事，并且分页将像在任何 Windows 服务器上一样发生。

IIS 是否回收您的应用程序池可能取决于您的 IIS 设置，但这些都在您的控制之下。（例如，如果您想更改默认值，您可以在启动任务中运行 appcmd。）

# asp.net - 如何在 VPS 上托管双工 wcf 服务

> ID：12914882
> 
> 赞同：1
> 
> 时间：2012-10-16T12:36:07.607
> 
> 标签：asp.net, wcf, vps

我正在尝试托管具有以下属性的 wcf 服务；

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)] 
```

我正在创建这样的主机类；

```
 var uri = new Uri("net.tcp://localhost:7951");
    var binding = new NetTcpBinding();
    host = new ServiceHost(typeof(ChatService), uri);
    ServiceMetadataBehavior smb = host.Description.Behaviors.Find<ServiceMetadataBehavior>();
    if (smb == null) host.Description.Behaviors.Add(new ServiceMetadataBehavior());
    host.AddServiceEndpoint(typeof(IMetadataExchange), MetadataExchangeBindings.CreateMexTcpBinding(), "mex");
    host.AddServiceEndpoint(typeof(IChat), new NetTcpBinding(), "");
    host.Open(); 
```

因此，在开发人员计算机和专用服务器上，这是可行的。但是，我需要做的是，将其托管在 VPS（虚拟专用服务器）上。

我想制作一个 Web 项目并将此代码块添加到 global.asax 应用程序启动方法中。但这失败了。我怀疑端口可能从防火墙关闭的问题。

我应该遵循什么解决方案？

# javascript - Grails 资源、302s、SSL 和 Chrome

> ID：12914885
> 
> 赞同：1
> 
> 时间：2012-10-16T12:36:14.907
> 
> 标签：javascript, css, grails, jstree

带有资源插件的 Grails 2.1.1。

我正在使用[jstree](http://www.jstree.com/)库，它利用了主题。您在配置中指定主题名称：

```
"themes":{
   "theme":"default",
   "dots":false,
   "icons":true
} 
```

JavaScript 会根据库的路径找到它。这意味着 URL 是构建的并且是相对的，然后被添加到文档中。例如，它可能看起来像：

```
/a/js/jsTree/themes/default/styles.css 
```

我的 ApplicationResources.groovy 中有以下内容：

```
tree {
    resource url: '/js/jsTree/1.0/_lib/jquery.cookie.js'
    resource url: '/js/jsTree/1.0/_lib/jquery.hotkeys.js'
    resource url: '/js/jsTree/1.0/jquery.jstree.js'
} 
```

当我使用 SSL 在我们的服务器上部署它时，在 Firefox 和 Safari 上，我看到该 styles.css 被 302'd 到资源插件所做的静态路径。

```
/a/static/js/jsTree/themes/default/styles.css 
```

然后新路径被引入，我可以看到它正在通过 SSL。但是，在 Chrome 中，我看到了 302，然后新的 URL 试图通过非 SSL 进行流式传输，而 Chrome 正在阻止它（甚至静默），因此树样式根本不会呈现，这显然使其无法使用。

抱歉，我目前无法举一个任何人都可以公开查看的问题示例。我希望其他人之前可能遇到过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:10:17.473

这个问题最终与 jsTree 有关。我更改了配置以包含 URL，而不是让 jsTree 弄清楚：

```
"themes":{
    "theme":"default",
    "dots":false,
    "icons":true,
    "url": contextPath + "/js/jsTree/1.0/themes/default/style.css"
} 
```

# sql-server-2005 - 需要在 sqlserver 2005 中使用 ROW_NUMBER 而不是结束

> ID：12914888
> 
> 赞同：3
> 
> 时间：2012-10-16T12:36:20.610
> 
> 标签：sql-server-2005

> **可能重复：**
> [ROW_NUMBER() 在 SQL 中没有结束](https://stackoverflow.com/questions/12914499/row-number-without-over-in-sql)

我有一个对每一列进行排序的网格，一次只能显示 50 行。

我使用 sql server 2005 作为数据库。

现在 sql server 2005 中有 ROW_NUMBER 函数来过滤具有行号的数据，但`Over(order by [Column])`必须使用。在我的情况下，我必须用不同的列对网格进行排序，所以我不能在 order by 子句中使用静态列名称。限制是，我必须使用静态查询。

你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:40:32.423

每列使用多个 ROW_NUMBER 子句并选择相关的一个：

```
....
    ROW_NUMBER() OVER (ORDER BY [Column1]) as rn1,
    ROW_NUMBER() OVER (ORDER BY [Column2]) as rn2,
    ROW_NUMBER() OVER (ORDER BY [Column3]) as rn3,
    ROW_NUMBER() OVER (ORDER BY [Column4]) as rn4
.... 
```

**或**使用 CASE 表达式。注意：所有数据类型必须兼容

```
ROW_NUMBER() OVER (ORDER BY CASE @sort
                     WHEN 1 THEN [Column1]
                     WHEN 1 THEN [Column2]
                     WHEN 1 THEN [Column3]
                     ...
                   END 
```

**或者**，如果您真的想要任意行号，请执行以下操作：

```
ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as rn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:10:25.123

我找到了一些方法来做到这一点。

```
SELECT
  OrderID, CustomerID, EmployeeID, OrderDate, ShippedDate,
  @Offset, @Limit, @SortColumn, @SortDirection
FROM
  Orders
WHERE
  ROW_NUMBER() OVER 
  (
    ORDER BY
      /* same expression as in the ORDER BY of the whole query */
  ) BETWEEN (@PageNum - 1) * @PageSize + 1 AND @PageNum * @PageSize 
  /* AND more conditions ... */
ORDER BY
  CASE WHEN @SortDirection = 'A' THEN
    CASE @SortColumn 
      WHEN 'OrderID'    THEN OrderID
      WHEN 'CustomerID' THEN CustomerID
      /* more... */
    END
  END,
  CASE WHEN @SortDirection = 'D' THEN
    CASE @SortColumn 
      WHEN 'OrderID'    THEN OrderID
      WHEN 'CustomerID' THEN CustomerID
      /* more... */
    END 
  END DESC 
```

# model - 使用 jena 编辑现有资源的 uri

> ID：12914890
> 
> 赞同：4
> 
> 时间：2012-10-16T12:36:26.927
> 
> 标签：model, resources, uri, jena

我尝试修改本体模型的现有资源的 uri。我想创建一个新模型、新资源（包括新的所需 uri）并复制旧资源的内容。

通过迭代和添加语句不能正常工作。还有另一种解决方法吗？

我正在使用 java 和 RDF/XML 模型中的 jena。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:04:16.797

正如您所发现的，资源是不可变的。您可以使用[`ResourceUtils.renameResource(resource, newName)`.](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/util/ResourceUtils.html#renameResource%28com.hp.hpl.jena.rdf.model.Resource,%20java.lang.String%29) 这将通过您的模型删除提及旧资源的语句并添加新资源的等价物，这与您将要重命名一样接近。

例子：

```
Resource renamed = 
  ResourceUtils.renameResource(originalResource, "http://example.com/new"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:05:29.050

使用[ResourceUtils.renameResource(oldResource, newURI)](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/util/ResourceUtils.html#renameResource%28com.hp.hpl.jena.rdf.model.Resource,%20java.lang.String%29)。它为您完成所有三元组的迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-22T09:46:57.420

如果您在大型数据库上执行此操作，最好将数据库转储到 Turtle 或 N-Triples，运行文本更改脚本，然后重新加载数据库。

# iphone - 如何根据 html 内容设置 UIWebView 的高度？

> ID：12914898
> 
> 赞同：17
> 
> 时间：2012-10-16T12:37:20.927
> 
> 标签：iphone, ios, ipad, uiwebview

我想根据 HTML 内容设置 UIWebview 的高度。我正在获取字符串的大小，但由于段落、粗体、不同的字体大小等原因，我没有得到实际大小。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T12:41:39.470

我通常使用这些方法将`UIWebview`框架设置为内容大小：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
    CGRect frame = webView.frame;
    frame.size.height = 5.0f;
    webView.frame = frame;
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    CGSize mWebViewTextSize = [webView sizeThatFits:CGSizeMake(1.0f, 1.0f)]; // Pass about any size
    CGRect mWebViewFrame = webView.frame;
    mWebViewFrame.size.height = mWebViewTextSize.height;
    webView.frame = mWebViewFrame;

    //Disable bouncing in webview
    for (id subview in webView.subviews) {
        if ([[subview class] isSubclassOfClass: [UIScrollView class]]) {
            [subview setBounces:NO];
        }
    }
} 
```

当完成加载它的内容时，它们会被自动调用（如果您将`webView`' 的委托设置为此类） 。`WebView`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-08T11:33:08.683

好吧，每个 web 视图都有一个内置的 UIScrollView，所以我会尝试等待页面加载，然后点击滚动视图的 contentSize 属性来获取页面的高度。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    CGFloat height = webView.scrollView.contentSize.height;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-16T12:58:49.007

试试这个代码

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{     
    height= [[self.webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight"] floatValue];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T12:42:16.850

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    webview.delegate = self;
    [webview loadHTMLString:@"<div id='foo' style='background: red'>The quick brown fox jumped over the lazy dog.</div>" baseURL:nil];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *output = [webview stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"foo\").offsetHeight;"];
    NSLog(@"height: %@", output);
} 
```

另请参阅[如何在可变高度 UITableView 内根据内容确定 UIWebView 高度？](https://stackoverflow.com/questions/745160/how-to-determine-uiwebview-height-based-on-content-within-a-variable-height-uit)

[根据其内容计算 UIWebView 高度](https://stackoverflow.com/questions/10715524/calculate-uiwebview-height-depending-on-its-content)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T06:05:49.117

如果您在 tableviewcell 中有 webview，则在 heightForRowAtIndexPath 中将单元格的高度设置为 NSAttributedString 大小的高度，如下所示。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    NSAttributedString *attributedText = [NSString  getHTMLAttributedString:@"HTML Content"];
    CGSize size = CGSizeMake(300, CGFLOAT_MAX);
    CGRect paragraphRect =     [attributedText boundingRectWithSize:size
                                 options:(NSStringDrawingUsesLineFragmentOrigin)
                                 context:nil];
    return paragraphRect.size.height;
}

+(NSAttributedString *) getHTMLAttributedString:(NSString *) string{
    NSError *errorFees=nil;
    NSString *sourceFees = [NSString stringWithFormat:
                            @"<span style=\"font-family: 'Roboto-Light';font-size: 14px\">%@</span>",string];
    NSMutableAttributedString* strFees = [[NSMutableAttributedString alloc] initWithData:[sourceFees dataUsingEncoding:NSUTF8StringEncoding]
                                                                                 options:@{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType,
                                                                                           NSCharacterEncodingDocumentAttribute: [NSNumber numberWithInt:NSUTF8StringEncoding]}
                                                                      documentAttributes:nil error:&errorFees];
    return strFees;

} 
```

# java - 如何在属性文件中保存多个用户名和密码

> ID：12914901
> 
> 赞同：0
> 
> 时间：2012-10-16T12:37:41.577
> 
> 标签：java, properties

我有一个属性文件，其中包含我在 java 程序中使用的用户名和密码，但是我无法像在数据库中那样存储多个用户名和密码，只需选择用户名和密码与数据库中的多行匹配的位置. 我想我需要在保存用户名和相应密码的文件中存储一个二维数组，但我无法弄清楚如何去做，谷歌也没有给我一种在文件中保存二维数组的方法然而。这是文件中我的用户名和密码的键/值对

```
 `password=k
     username=k` 
```

这是读取它们并与用户插入的内容进行比较的代码

```
 `String usr = userfield.getText();
    String pwd = new String(pwdfield.getPassword());
    Properties config = new Properties();
    InputStream is;

    try {

        is = new FileInputStream("config.properties");
        config.load(is);

        if (usr.toString().equals(config.getProperty("user").toString()) && pwd.toString().equals(config.getProperty("pass").toString())) {
            new DocMenu();
            lgFrame.dispose();

        } else {
            JOptionPane.showMessageDialog(lgFrame, "Wrong credentials try again", "Oops", JOptionPane.ERROR_MESSAGE);

        }

        is.close();

    } catch (Exception ex) {
        System.out.println(ex);
        ex.printStackTrace();
    }` 
```

有人可以告诉我如何更改属性文件和代码，以便我能够在文件中拥有多个用户名和密码，以授予任何用户访问权限，只要他们的用户名和密码存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:47:09.970

如果您将属性名称存储为某个键与用户名的串联，密码存储为这样的值；

```
#Some bad passwords
username.bob=password
username.scott=tiger
username.admin=admin 
```

..那么你可以这样检查；

```
String password = config.getProperty("username." + usr.toString());
if (password != null && password.equals(pwd.toString())) {
  new DocMenu();
  lgFrame.dispose();
} else {
  JOptionPane.showMessageDialog(lgFrame, "Wrong credentials try again", "Oops", JOptionPane.ERROR_MESSAGE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:52:02.000

在您发布的代码中，您在属性中有“用户名”，并且您正在尝试读取“用户”属性。密码也是如此。

但这只会让你有一对用户/密码。您的属性文件中应该有一个更详细的结构。例如你可以有

```
user1=pwd1
user2=pwd2
... 
```

然后检查类似：

```
if (password != null && password.equals(config.getProperty(usr)){
 // ok ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:48:31.037

如果你必须使用属性，我认为除了做之外别无选择

```
username.1
username.2
username.3 
```

并迭代直到你有一个你找不到属性的索引（在这种情况下，`username.4`）。

对于更复杂的配置，我会研究诸如[Apache Commons Config](http://commons.apache.org/configuration)之类的框架，它可以处理[元素列表](http://commons.apache.org/configuration/userguide/howto_basicfeatures.html#List_handling)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:42:44.103

正如所承诺的，这里是 HashSet 序列化/反序列化代码：

```
import java.util.*;
import java.io.*;

class UserPasswordMap{
   private HashMap<String,String> userMap;
   private String m_filename;
   public UserPasswordMap()
   {
       userMap = null;
       m_filename = null;
       userMap = new HashMap<String,String>();
   }

   public UserPasswordMap(String filename, String credo)
   {
       try{
          m_filename = filename;
          File f = new File(m_filename);
          userMap = new HashMap<String,String>();
          if(f.exists() && (!(f.canRead() && f.canWrite()))){ 
              System.err.println("Oops, Insufficient permissions to read/write for filename: "+m_filename);
          }else{
              f.createNewFile();
          }
       }catch(Exception e){
           System.err.println(e.getMessage());
       }

       if(credo.equals("D")){
           try{
           ReadMap(filename);
           }catch(Exception e){ System.err.println(e.getMessage());}
       }
   }
   public void ReadMap(String filename) throws IOException, ClassNotFoundException
   {
       FileInputStream fis = new FileInputStream(filename);
       ObjectInputStream ois = new ObjectInputStream(fis);
       userMap = (HashMap<String,String>)ois.readObject();
       fis.close();
   }

   public void WriteMap(String filename) throws IOException{
       FileOutputStream fos = new FileOutputStream(filename);
       ObjectOutputStream oos = new ObjectOutputStream(fos);
       oos.writeObject(userMap);
       oos.close();
   }

   public ArrayList<String> getUsers()
   {
       ArrayList<String> users = new ArrayList<String>();
       if(userMap == null){
           return null;/*or return users*/
       }else{
           for(String s:userMap.keySet()){
               users.add(s);
           }
       }
       return users;
   }

   public ArrayList<String> getPasswords()
   {
       ArrayList<String> passwords = new ArrayList<String>();
       if(userMap == null){
           return null;/*or return users*/
       }else{
           for(String s:userMap.values()){
               passwords.add(s);
           }
       }
       return passwords;
   }

   public String getPassword(String username)
   {
       return userMap.get(username);
   }

   public void addUser(String username, String password){
       userMap.put(username, password);
       try{
           WriteMap(m_filename);
       }catch(Exception e){
           System.err.println(e.getMessage());
       }
   }

   public void saveData(){
       if(m_filename == null){
           System.err.println("File-Name is not supplied");
       }else{
           try{
              WriteMap(m_filename);
           }catch(Exception e){
               System.err.println(e.getMessage());
           }
       }
   }
} 
```

和测试代码：

```
public class Main{
    private UserPasswordMap map;
    public static void main(String[] args){
       Main obj = new Main();
       obj.init();
       Scanner scan = new Scanner(System.in);
       System.out.println("0\. Init With Serialisation(CAN THROW ERROR)");
       while(true){
          System.out.println("1\. Add New User");
          System.out.println("2\. Query Permissions");
          System.out.println("3\. Exit");
          int data = scan.nextInt();
          switch(data){
          case 0: obj.initWithSerialisation();
          break;
          case 1: obj.addNewUser();
          break;
          case 2: obj.queryPerms();
          break;
          case 3: System.exit(0);
          }
       }
    }

    public void init()
    {
         map = new UserPasswordMap("try1.ser","");
    }

    public void initWithSerialisation()
    {
        map = new UserPasswordMap("try1.ser","D");
    }
    private Scanner scan;
    public void addNewUser()
    {
        System.out.print("Enter User:");
        scan = new Scanner(System.in);
        String username = scan.nextLine();
        System.out.print("Enter Pass:");
        String password = scan.nextLine();
        map.addUser(username, password);
    }

    public void queryPerms()
    {
        System.out.print("Enter User:");
        if(scan == null){ scan = new Scanner(System.in);}
        String username = scan.nextLine();
        System.out.print("Enter Pass:");
        String pass = scan.nextLine();

        if(map.getUsers().contains(username) && map.getPassword(username).equals(pass)){
            System.out.println("authenticated!");
        }else{
            System.out.println("Oops Wrong credentials!");
        }
    }
} 
```

# java - 在cent os上安装maven 3时出错

> ID：12914903
> 
> 赞同：0
> 
> 时间：2012-10-16T12:37:45.073
> 
> 标签：java, maven-3

我正在尝试在 centos 上安装 maven3。

我从官方[下载页面](http://maven.apache.org/download.html)下载了 maven 。

```
wget http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz 
```

它下载到系统。但是当我运行解压缩代码的命令时。

```
tar -xvf apache-maven-3.0.4-bin.tar.gz 
```

我得到了错误

```
gzip: stdin: not in gzip format
tar: Child returned status 1
tar: Error is not recoverable: exiting now 
```

我在网上检查错误，但对我来说没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:40:42.403

您下载的链接是一个 HTML 页面，其中包含一个可以从中下载实际内容的镜像列表。这就是它无法解压缩的原因。

尝试使用页面上的链接之一，如下所示。

[http://apache.cs.utah.edu/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz](http://apache.cs.utah.edu/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:32:26.210

同一页面也有 md5 校验和，您是否检查了下载的文件？

# php - 密码字段正则表达式

> ID：12914907
> 
> 赞同：2
> 
> 时间：2012-10-16T12:38:01.910
> 
> 标签：php, regex, validation, preg-replace

好的，所以我正在尝试使用正则表达式 preg_match 一个字符串（输入的密码），但是在互联网上阅读/观看正则表达式信息数小时后，我仍然不明白它..

我目前有：
'/^[AZ]^[az]+$/'

密码必须：

介于 8 到 16 个字符之间。
至少包含 1 个大写字母
包含至少 1 个小写字母
包含至少 1 个数字

如果您还可以包含具有上述所有要求但还
包含至少 1 个符号的正则表达式

对于我自己的学习，我将不胜感激。请尝试解释您的正则表达式，以便我可以理解它。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T12:47:03.453

1.  8 到 16 个字符之间：

    ```
    ^.{8,16}$ 
    ```

2.  至少有一个大写字母

    ```
    (?=.*[A-Z]) 
    ```

3.  至少一个小写字母

    ```
    (?=.*[a-z]) 
    ```

4.  至少一个数字

    ```
    (?=.*\d) 
    ```

把它放在一起：

```
^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,16}$ 
```

如果你想要一个支持 Unicode 的变体（我知道 PHP 可能是徒劳的）：

```
^(?=.*\p{Lu})(?=.*\p{Ll})(?=.*\p{Nd}).{8,16}$ 
```

这通过在开头有一些[积极的前瞻断言来工作，每个断言都会检查字符串的一个所需属性。](http://www.regular-expressions.info/lookaround.html)前瞻断言检查括号中的部分是否*可以*在此位置匹配，但不会推进字符串中的*实际*匹配位置。这里的实际匹配只是确保长度符合您的要求。

但请注意，这在计算上应该与检查每个属性的几个正则表达式匹配基本上相同。它只是打包在一个正则表达式中。

哦，至少一个符号可以用同样的`(?=.*[,.!?])`或类似的东西来检查，这取决于你认为什么是符号。

# actionscript-3 - 在 Flex/AIR 中更改 SQLConnection（sqlite 数据库）的锁定超时

> ID：12914911
> 
> 赞同：1
> 
> 时间：2012-10-16T12:38:12.580
> 
> 标签：actionscript-3, apache-flex, sqlite, locking, timeout

我在 Flex 中使用 sqlite`flash.data.SQLConnection`

如何更改锁定超时？标准超时太小，从两台计算机运行插入时出现锁定错误？

我可以在出错后再次运行查询，但如果设置锁定超时（即 2-5 秒）会更好。

# android - 来自android的SOAP restfull请求并以JSON处理响应

> ID：12914914
> 
> 赞同：-1
> 
> 时间：2012-10-16T12:38:20.803
> 
> 标签：android, soap

我需要在我的 android 中实现soap restfull 调用并且需要以 JSON 格式处理响应，请为此提供简单的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:43:03.023

查看[本教程](http://ericosgood.com/prog/rest-webservice-android/)，它很好地解释了该过程。

# batch-file - 控制 ASCII 动画的帧速率

> ID：12914915
> 
> 赞同：0
> 
> 时间：2012-10-16T12:38:26.527
> 
> 标签：batch-file, cmd

我正在创建一个简单的 bat 文件，它播放一些存储在 120 个`.txt`文件中的 ASCII 动画。我的脚本有效，但运行速度太快。我想找到一种方法让它慢一点。我试过 TIMEOUT 1 命令，但它每秒只播放 1 张图片，太慢了。是否有不从 Windows 7 命令行移动的可行解决方案？

到目前为止，这是我的脚本

```
@echo off
MODE CON: COLS=91 LINES=41
cls
:3
setlocal enableextensions enabledelayedexpansion
FOR /R %%i in (*.txt) do (type "%%i"
)
goto :3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:07:02.170

您可以使用 FOR /L 循环来引入延迟。这是一个引入大约 100 毫秒延迟的脚本。顶部附近的一个简单测试计算大约 100 毫秒需要多少次迭代。机器之间的数量会有所不同。根据需要调整 msecDelay 的定义以获得您想要的结果。

```
@echo off
setlocal

:: Compute the number of iterations required to get the desired delay
set msecDelay=100
set ticks=100000
set "start=%time%"
for /l %%N in (1 1 %ticks%) do rem
set "stop=%time%"
for /f "tokens=3,4 delims=:.," %%A in ("%start%") do set /a start=1%%A%%B-10000
for /f "tokens=3,4 delims=:.," %%A in ("%stop%") do set /a stop=1%%A%%B-10000
if %start% gtr %stop% set /a stop+=6000
set /a delay=msecDelay*ticks/(stop-start)/10

MODE CON: COLS=91 LINES=41
cls
:3
FOR /R %%i in (*.txt) do (
  type "%%i"
  for /l %%n in (1 1 %delay%) do rem
)
goto :3 
```

我想知道通过在循环中移动 CLS 是否会获得更好的结果，就在你的 TYPE 语句之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-19T16:44:24.507

这是在帧之间减慢速度的一种非常简单的方法示例：

```
@echo exiting script
ping localhost -n 2 > nul
cls
@echo exiting script .
ping localhost -n 2 > nul
cls
@echo exiting script ..
ping localhost -n 2 > nul
cls
@echo exiting script ...
ping localhost -n 2 > nul
cls
@echo exiting script ....
ping localhost -n 2 > nul
cls
@echo exiting script .....
ping localhost -n 5 > nul
cls 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:40:58.933

不是内置的，但仍然是命令行：`sleep.exe`来自 Windows 资源工具包（可在此处获得：http: [//www.microsoft.com/en-us/download/details.aspx?id=17657](http://www.microsoft.com/en-us/download/details.aspx?id=17657)）

> 用法： sleep time-to-sleep-in-seconds
> sleep [-m] time-to-sleep-in-milliseconds
> sleep [-c] commited-memory ratio (1%-100%)

# c - 使用指针从单链表中删除项目

> ID：12914917
> 
> 赞同：63
> 
> 时间：2012-10-16T12:38:33.653
> 
> 标签：c, pointers, linked-list

在最近的一次[Slashdot 采访](http://meta.slashdot.org/story/12/10/11/0030249/linus-torvalds-answers-your-questions)中，Linus Torvalds 举了一个例子，说明有些人如何使用指针，表明他们并不真正了解如何正确使用它们。

不幸的是，由于我是他所说的人之一，所以我也无法理解他的例子：

> *我见过太多人通过跟踪“上一个”条目来删除单链表条目，然后删除该条目，执行类似的操作*
> 
> ```
> if (prev)
>     prev->next = entry->next;
> else
>     list_head = entry->next; 
> ```
> 
> *每当我看到这样的代码时，我都会说“这个人不懂指针”。可悲的是，这很常见。了解指针的人只需使用“指向入口指针的指针”，并使用 list_head 的地址对其进行初始化。然后当他们遍历列表时，他们可以在不使用任何条件的情况下删除条目，只需执行*
> 
> ```
> *pp = entry->next 
> ```

有人可以提供更多解释为什么这种方法更好，以及它如何在没有条件语句的情况下工作？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-16T12:44:37.597

一开始，你做

```
pp = &list_head; 
```

并且，当你遍历列表时，你推进这个“光标”

```
pp = &(*pp)->next; 
```

这样，您始终可以跟踪“您来自”的点，并可以修改那里的指针。

所以当你发现要删除的条目时，你可以这样做

`*pp = entry->next`

这样，您可以处理*Afaq*在另一个答案中提到的所有 3 个案例，从而有效地消除了`NULL`对`prev`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-02-17T21:49:58.080

如果你喜欢从例子中学习，我准备了一个。假设我们有以下单链表：

[![单链表示例](../Images/f8212beb7886137c8fdfd4b3bf38ae21.png)](https://i.stack.imgur.com/lWsxd.png)

表示如下（点击放大）：

[![单链表表示](../Images/0b1103f428818bb587f2ebb8bd7897e6.png)](https://i.stack.imgur.com/MZz4F.png)

我们要删除带有`value = 8`.

### 代码

这是执行此操作的简单代码：

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>

struct node_t {
    int value;
    node_t *next;
};

node_t* create_list() {
    int test_values[] = { 28, 1, 8, 70, 56 };
    node_t *new_node, *head = NULL;
    int i;

    for (i = 0; i < 5; i++) {
        new_node = malloc(sizeof(struct node_t));
        assert(new_node);
        new_node->value = test_values[i];
        new_node->next = head;
        head = new_node;
    }

    return head;
}

void print_list(const node_t *head) {
    for (; head; head = head->next)
        printf("%d ", head->value);
    printf("\n");
}

void destroy_list(node_t **head) {
    node_t *next;

    while (*head) {
        next = (*head)->next;
        free(*head);
        *head = next;
    }
}

void remove_from_list(int val, node_t **head) {
    node_t *del, **p = head;

    while (*p && (**p).value != val)
        p = &(*p)->next;  // alternatively: p = &(**p).next

    if (p) {  // non-empty list and value was found
        del = *p;
        *p = del->next;
        del->next = NULL;  // not necessary in this case
        free(del);
    }
}

int main(int argc, char **argv) {
    node_t *head;

    head = create_list();
    print_list(head);

    remove_from_list(8, &head);
    print_list(head);

    destroy_list(&head);
    assert (head == NULL);

    return EXIT_SUCCESS;
} 
```

如果您编译并运行此代码，您将获得：

```
56 70 8 1 28 
56 70 1 28 
```

### 代码说明

让我们创建指向指针的`**p`“双”`*head`指针：

[![单链表示例#2](../Images/f1a13542467f1f7efe4f50fd41ab4961.png)](https://i.stack.imgur.com/mJg99.png)

现在让我们分析它是如何`void remove_from_list(int val, node_t **head)`工作的。它遍历`head`只要指向的列表`*p && (**p).value != val`。

[![单链表示例#3](../Images/019a037ad30ad84d42cac1396f6e8825.png)](https://i.stack.imgur.com/Eb03y.png)

[![单链表示例#4](../Images/c6303ab0418171b47414ae58edf1858b.png)](https://i.stack.imgur.com/r9jCE.png)

在此示例中，给定列表包含`value`我们要删除的内容（即`8`）。在循环的第二次迭代后`while (*p && (**p).value != val)`变为`(**p).value`，`8`所以我们停止迭代。

请注意，`*p`指向其中的变量`node_t *next`位于我们要删除的 （即`node_t`）*之前*。这是至关重要的，因为它允许我们更改要删除的 前面的指针，从而有效地将其从列表中删除。`node_t``**p``*next``node_t``node_t`

现在让我们将要删除的元素的地址 ( `del->value == 8`) 分配给`*del`指针。

[![单链表示例#5](../Images/731b6f62947b75e6cbf334b2f680974d.png)](https://i.stack.imgur.com/sKM4b.png)

我们需要修复`*p`指针，使其`**p`指向我们要删除的元素*之后的一个元素：* `*del`

[![单链表示例#6](../Images/26dfb8c2bdf03389397dede04c9fcb01.png)](https://i.stack.imgur.com/XgTMc.png)

在上面的代码中我们调用`free(del)`，因此没有必要设置`del->next`为`NULL`，但是如果我们想返回指向从列表中“分离”的元素的指针，而不是完全删除它，我们将设置`del->next = NULL`：

[![单链表示例#7](../Images/dbc326a09c7843bbc547cb1cbe502355.png)](https://i.stack.imgur.com/wwb2D.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-16T14:16:56.310

一旦要删除节点，重新连接列表会更有趣。让我们考虑至少 3 种情况：

1.从头删除一个节点。

2.从中间移除一个节点。

3.从末端移除一个节点。

**从头删除**

当删除列表开头的节点时，没有要执行的节点重新链接，因为第一个节点没有前面的节点。例如，使用以下命令删除节点：

```
link
 |
 v
---------     ---------     ---------
| a | --+---> | b | --+---> | c | 0 |
---------     ---------     --------- 
```

但是，我们必须将指针固定到列表的开头：

```
link
 |
 +-------------+
               |
               v
---------     ---------     ---------
| a | --+---> | b | --+---> | c | 0 |
---------     ---------     --------- 
```

**从中间移除**

从中间移除一个节点需要前面的节点跳过被移除的节点。例如，使用 b 删除节点：

```
link
 |
 v
---------     ---------     ---------
| a | --+--+  | b | --+---> | c | 0 |
---------  |  ---------     ---------
           |                ^
           +----------------+ 
```

这意味着我们需要某种方式来引用我们要删除的节点之前的节点。

**从末端移除**

从末尾删除一个节点要求前面的节点成为列表的新末尾（即，在它之后没有指向任何内容）。例如，使用 c 删除节点：

```
link
 |
 v
---------     ---------     ---------
| a | --+---> | b | 0 |     | c | 0 |
---------     ---------     --------- 
```

请注意，最后两种情况（中间和结束）可以通过说*“要删除的节点之前的节点必须指向要删除的节点所在的位置”来组合。*

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-20T03:35:43.453

在第一种方法中，您通过从列表中**取消链接来删除节点。**

在第二种方法中，您**将**要删除的节点替换为下一个节点。

显然，第二种方法以一种优雅的方式简化了代码。当然，第二种方法需要更好地理解链表和底层计算模型。

**注意**：这是一个非常相关但略有不同的编码问题。有利于测试一个人的理解： [https ://leetcode.com/problems/delete-node-in-a-linked-list/](https://leetcode.com/problems/delete-node-in-a-linked-list/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-16T13:22:43.287

我更喜欢虚拟节点方法，一个示例布局：

```
|Dummy|->|node1|->|node2|->|node3|->|node4|->|node5|->NULL
                     ^        ^
                     |        |
                    curr   curr->next // << toDel 
```

然后，您遍历要删除的节点（toDel = curr>next）

```
tmp = curr->next;
curr->next = curr->next->next;
free(tmp); 
```

这样，您不需要检查它是否是第一个元素，因为第一个元素始终是 Dummy 并且永远不会被删除。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-28T22:21:18.140

这是一个完整的代码示例，使用函数调用删除匹配的元素：

*   `rem()`删除匹配的元素，使用 prev

*   `rem2()`使用指针到指针删除匹配的元素

```
// code.c

#include <stdio.h>
#include <stdlib.h>

typedef struct list_entry {
    int val;
    struct list_entry *next;
} list_entry;

list_entry *new_node(list_entry *curr, int val)
{
    list_entry *new_n = malloc(sizeof(list_entry));
    if (new_n == NULL) {
        fputs("Error in malloc\n", stderr);
        exit(1);
    }
    new_n->val  = val;
    new_n->next = NULL;

    if (curr) {
        curr->next = new_n;
    }
    return new_n;
}

#define ARR_LEN(arr) (sizeof(arr)/sizeof((arr)[0]))

#define     CREATE_LIST(arr) create_list((arr), ARR_LEN(arr))

list_entry *create_list(const int arr[], size_t len)
{
    if (len == 0) {
        return NULL;
    }

    list_entry *node = NULL;
    list_entry *head = node = new_node(node, arr[0]);
    for (size_t i = 1; i < len; ++i) {
        node = new_node(node, arr[i]);
    }
    return head;
}

void rem(list_entry **head_p, int match_val)
// remove and free all entries with match_val
{
    list_entry *prev = NULL;
    for (list_entry *entry = *head_p; entry; ) {
        if (entry->val == match_val) {
            list_entry *del_entry = entry;
            entry = entry->next;
            if (prev) {
                prev->next = entry;
            } else {
                *head_p    = entry;
            }
            free(del_entry);
        } else {
            prev = entry;
            entry = entry->next;
        }
    }
}

void rem2(list_entry **pp, int match_val)
// remove and free all entries with match_val
{
    list_entry *entry;
    while ((entry = *pp)) { // assignment, not equality
        if (entry->val == match_val) {
            *pp =   entry->next;
            free(entry);
        } else {
            pp  =  &entry->next;
        }
    }
}

void print_and_free_list(list_entry *entry)
{
    list_entry *node;
    // iterate through, printing entries, and then freeing them
    for (;     entry != NULL;      node = entry, /* lag behind to free */
                                   entry = entry->next,
                                   free(node))           {
        printf("%d ", entry->val);
    }
    putchar('\n');
}

#define CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val) createList_removeMatchElems_print((arr), ARR_LEN(arr), (match_val))

void    createList_removeMatchElems_print(const int arr[], size_t len, int match_val)
{
    list_entry *head = create_list(arr, len);
    rem2(&head, match_val);
    print_and_free_list(head);
}

int main()
{
    const int match_val = 2; // the value to remove
    {
        const int arr[] = {0, 1, 2, 3};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }
    {
        const int arr[] = {0, 2, 2, 3};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }
    {
        const int arr[] = {2, 7, 8, 2};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }
    {
        const int arr[] = {2, 2, 3, 3};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }
    {
        const int arr[] = {0, 0, 2, 2};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }
    {
        const int arr[] = {2, 2, 2, 2};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }
    {
        const int arr[] = {};
        CREATELIST_REMOVEMATCHELEMS_PRINT(arr, match_val);
    }

    return 0;
} 
```

在此处查看实际代码：

*   gcc [https://wandbox.org/permlink/LxgMddqCZWyj7lMI](https://wandbox.org/permlink/LxgMddqCZWyj7lMI)
*   铿锵[https://wandbox.org/permlink/5aEkxh24sGfAecwF](https://wandbox.org/permlink/5aEkxh24sGfAecwF)

如果像这样编译和使用 valgrind（内存泄漏检查器）：
`gcc -std=c11 -Wall -Wextra -Werror -o go code.c && valgrind ./go`
我们看到一切都很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-23T02:59:12.863

@glglgl：

我写了以下简单的例子。希望你能看看它为什么有效。
在 function`void delete_node(LinkedList *list, void *data)`中，我使用`*pp = (*pp)->next;`并且它有效。老实说，我不明白它为什么会起作用。我什至画了指针图，但还是不明白。希望你能澄清一下。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct _employee {
    char name[32];
    unsigned char age;
} Employee;

int compare_employee(Employee *e1, Employee *e2)
{
    return strcmp(e1->name, e2->name);
}
typedef int (*COMPARE)(void *, void *);

void display_employee(Employee *e)
{
    printf("%s\t%d\n", e->name, e->age);
}
typedef void (*DISPLAY)(void *);

typedef struct _node {
    void *data;
    struct _node *next;
} NODE;

typedef struct _linkedlist {
    NODE *head;
    NODE *tail;
    NODE *current;
} LinkedList;

void init_list(LinkedList *list)
{
    list->head = NULL;
    list->tail = NULL;
    list->current = NULL;
}

void add_head(LinkedList *list, void *data)
{
    NODE *node = malloc(sizeof(NODE));
    node->data = data;
    if (list->head == NULL) {
        list->tail = node;
        node->next = NULL;
    } else {
        node->next = list->head;
    }
    list->head = node;
}

void add_tail(LinkedList *list, void *data)
{
    NODE *node = malloc(sizeof(NODE));
    node->data = data;
    node->next = NULL;
    if (list->head == NULL) {
        list->head = node;
    } else {
        list->tail->next = node;
    }
    list->tail = node;
}

NODE *get_node(LinkedList *list, COMPARE compare, void *data)
{
    NODE *n = list->head;
    while (n != NULL) {
        if (compare(n->data, data) == 0) {
            return n;
        }
        n = n->next;
    }
    return NULL;
}

void display_list(LinkedList *list, DISPLAY display)
{
    printf("Linked List\n");
    NODE *current = list->head;
    while (current != NULL) {
        display(current->data);
        current = current->next;
    }
}

void delete_node(LinkedList *list, void *data)
{
    /* Linus says who use this block of code doesn't understand pointer.    
    NODE *prev = NULL;
    NODE *walk = list->head;

    while (((Employee *)walk->data)->age != ((Employee *)data)->age) {
        prev = walk;
        walk = walk->next;
    }

    if (!prev)
        list->head = walk->next;
    else
        prev->next = walk->next; */

    NODE **pp = &list->head;

    while (((Employee *)(*pp)->data)->age != ((Employee *)data)->age) {
        pp = &(*pp)->next;
    }

    *pp = (*pp)->next;
}

int main () 
{
    LinkedList list;

    init_list(&list);

    Employee *samuel = malloc(sizeof(Employee));
    strcpy(samuel->name, "Samuel");
    samuel->age = 23;

    Employee *sally = malloc(sizeof(Employee));
    strcpy(sally->name, "Sally");
    sally->age = 19;

    Employee *susan = malloc(sizeof(Employee));
    strcpy(susan->name, "Susan");
    susan->age = 14;

    Employee *jessie = malloc(sizeof(Employee));
    strcpy(jessie->name, "Jessie");
    jessie->age = 18;

    add_head(&list, samuel);
    add_head(&list, sally);
    add_head(&list, susan);

    add_tail(&list, jessie);

    display_list(&list, (DISPLAY) display_employee);

    NODE *n = get_node(&list, (COMPARE) compare_employee, sally);
    printf("name is %s, age is %d.\n",
            ((Employee *)n->data)->name, ((Employee *)n->data)->age);
    printf("\n");

    delete_node(&list, samuel);
    display_list(&list, (DISPLAY) display_employee);

    return 0;
} 
```

输出：

```
Linked List
Susan   14
Sally   19
Samuel  23
Jessie  18
name is Sally, age is 19.

Linked List
Susan   14
Sally   19
Jessie  18 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-28T00:26:47.117

这是我的看法，我发现这种方式更容易理解。

使用指向指针的指针删除链表中的节点的示例。

```
 struct node {
        int value;
        struct node *next;
    };

    void delete_from_list(struct node **list, int n)
    {
        struct node *entry = *list;

        while (entry && entry->value != n) {
            // store the address of current->next value (1)
            list = &entry->next;
            // list now stores the address of previous->next value
            entry = entry->next;
        }
        if (entry) {
            // here we change the previous->next value
            *list = entry->next;
            free(entry);
        }
    } 
```

假设我们创建一个包含这些值的列表：

```
*node   value   next
----------------------------------------
a       1       null
b       2       a
c       3       b
d       4       c
e       5       d 
```

如果我们要删除值为 3 的节点：

```
entry = e

while (entry && entry->value != 3) iterations:

    e->value != 3
        list = &e->next
        entry = d

    d->value != 3
        list = &d->next
        entry = c

    c->value == 3
        STOP

if (entry)
        d->next = b         (what was 'list' is dereferenced)
        free(entry) 
```

之后`if (entry)`我们有：

```
 d->next = b 
```

所以列表变成：

```
*node   value   next
----------------------------------------
a       1       null
b       2       a
c       3       b
d       4       b
e       5       d 
```

最后：

```
 free(entry) 
```

列表变为：

```
*node   value   next
----------------------------------------
a       1       null
b       2       a
d       4       b
e       5       d 
```

如果我们想删除第一个节点，它仍然可以工作，因为最初

```
*list == entry 
```

因此：

```
*list = entry->next; 
```

`*list`将指向第二个元素。

* * *

(1) 注意说：

```
list = &entry->next; 
```

和说的一样：

```
list = &(entry->next); 
```

# android - 退出应用程序并清除 RAM

> ID：12914922
> 
> 赞同：1
> 
> 时间：2012-10-16T12:39:07.677
> 
> 标签：android

朋友们，我正在尝试使用此代码清除应用程序，

```
Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            startActivity(intent); 
```

但有时，我发现应用程序仍在消耗 RAM，这是释放 RAM 的更好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:41:11.827

别管它。让系统自己管理平台资源。只需注意您的应用程序**内部**内存管理（这通常意味着“不要泄漏”和“不要过度分配”），其余的留给 Android。不管你喜不喜欢，但无论如何你都不能做得更好，你也不会从尝试中受益。

# c++ - 重载类型转换运算符：const & non-const

> ID：12914931
> 
> 赞同：3
> 
> 时间：2012-10-16T12:39:35.623
> 
> 标签：c++, operator-overloading, constants

为什么以下两个用例的行为不同？

内置类型的示例：

```
class Test
{
    operator const char*() {
        return "operator const char*() called";
    }

    operator char*() {
        return const_cast<char*> ("operator char*() called");
        // a really ugly hack for demonstration purposes
    }
};

Test test;
const char *c_ch = test;  // -> operator const char*() called
char *ch = test;          // -> operator char*() called 
```

好的，一切正常。不，让我们用用户定义的类型来试试：

```
class ColorWrapper
{
    operator const Color() {
        cout << "operator const Color() called" << endl;
        return Color(10, 20, 30);
    }

    operator Color() {
        cout << "operator Color() called" << endl;
        return Color(11, 22, 33);
    }
};

ColorWrapper cw;
const Color c_col = cw;
Color col = cw; 
```

情况看起来相同；但现在，GCC 开始抱怨：

```
error: conversion from 'ColorWrapper' to 'const Color' is ambiguous
error: conversion from 'ColorWrapper' to 'Color' is ambiguous 
```

我错过了什么吗？我在这里想要实现的是防止用户直接更改颜色。如果他们想改变它，他们必须通过包装类来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:24:14.463

问题是，你的两个例子是不等价的。第一个返回编译器可以轻松选择的两种不同类型，一个*指向可变数据*的指针和一个*指向常量数据*的指针。会有所不同，它是*指针*还是*常量指针*（这意味着您无法更改返回的指针指向的位置，而不是更改指向的数据）：

```
class Test
{
    operator char * const();
    operator char *();
}; 
```

这将等同于您的第二个示例并引入相同的歧义，因为编译器无法决定选择哪一个，因为两者都返回相同的类型，一个是 const 限定的，另一个不是。

这可以通过基于对象的常量重载来解决：

```
class ColorWrapper
{
    operator const Color() const;
    operator Color();
}; 
```

但这在这里不会给您带来任何好处，因为无论如何您都按值返回一个新对象，因此您始终可以返回 const 版本，并且还将根据源对象的 constness 而不是目标对象的 constness 选择适当的版本（因此在这两种情况下都调用非常量版本），这似乎不是你想要的。

因此，您可以根据源对象的常量重载。但是你不能像现在想要的那样，仅仅基于目标对象的常量来重载。

这一切都归结为考虑对象和对象可能不正确地引用的数据之间的差异，这实际上表现为常量指针和指向常量数据的指针之间的差异。

> 我在这里想要实现的是防止用户直接更改颜色

那么绝对不需要任何重载。只需返回 const 版本。用户无法直接更改返回的颜色，只能复制并更改副本。

```
cw.set(red);    //nope, return color is constant
Color col = cw; //copy returned color into col
col.set(green); //fine, since we're not working on the returned color, but on col

const Color c_col = cw; //use this if you don't want c_col to be modified, 
                        //doesn't have anything to do with returned color, though 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:55:25.570

那是因为在您的第二个示例中，您将 const 添加到 object ，而不是指针（在您的第一种情况下）。并且 const 与 object 在重载解析阶段使编译混淆，根据 c++ 标准，这两者彼此一样好（object vs const object）。编译器不会在这里尝试智能并选择另一个。

但是在指针与常量指针（参考也有效）中，编译可以相应地从这两个重载候选中进行选择，这是您的第一种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:48:33.433

如果您将一个运算符修改为`const`，它将起作用：

```
operator const Color() const {
    cout << "operator const Color() const called" << endl;
    return Color(10, 20, 30);
} 
```

或者，您可以删除两个运算符之一。由于您返回`Color`按值，因此两个运算符之间没有真正的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:44:55.360

你观察到这个问题是因为你在这里基本上有两种不同的情况。我认为展示这里发生的事情的最简单方法是修改你的第一个例子：

```
class Test
{
    operator char* const() {
        return "operator char* () called";
    }

    operator char*() {
        return const_cast<char*> ("operator char*() called");
        // a really ugly hack for demonstration purposes
    }
}; 
```

现在您的情况与第二个示例完全相同。您基本上返回一个（指针的）副本和一个 const 副本，这就是它们在重载决议中搞砸的原因。

您最初的第一个示例工作正常，因为这些转换运算符转换为 2 种不同类型（`const char`和`char`）的指针。我希望这有助于理解这里的区别。

顺便说一句，我个人认为从方法返回 const 副本没有多大意义。它不会改变用户的任何东西，只会混淆类接口。

# php - 在 linux Redhat server 64bit 上安装并执行 Wkhtmltopdf（使用 PHP）

> ID：12914932
> 
> 赞同：0
> 
> 时间：2012-10-16T12:39:42.747
> 
> 标签：php, linux, redhat, wkhtmltopdf, shell-exec

我正在使用 Linux Redhat 64 位。我的服务器信息是

`Linux ************* 2.6.18-238.5.1.el5xen #1 SMP Mon Feb 21 06:01:41 EST 2011 x86_64 x86_64 x86_64 GNU/Linux`

要创建 PDF，我使用的是 Wkhtmltopdf。

所以首先我在执行命令时安装了 wkhtmltopdf-0.9.9-static- **amd64 .tar.bz2。它显示****分段错误**错误。

所以我重新安装了 wkhtmltopdf-0.9.9-static- **i386** .tar.bz2，它显示**wkhtmltopdf：符号查找错误：wkhtmltopdf：未定义符号：FcFreeTypeQueryFace**错误。

我该如何解决这个错误？任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:38:43.660

这很可能是关于 fontconfig 的 Qt 起源错误，它（或非常类似的问题）已[在 wkhtmltopdf 问题列表中报告，并且](http://code.google.com/p/wkhtmltopdf/issues/detail?id=352)您可以尝试解决方法/修复。

# ruby - Ruby 中的 Auth 2.0 提供程序实现

> ID：12914935
> 
> 赞同：0
> 
> 时间：2012-10-16T12:39:46.933
> 
> 标签：ruby, oauth-2.0, provider

我有一个 ruby​​ 中的 Web 应用程序，我希望它充当 Auth 2.0 提供程序。ruby 中是否有任何此类提供程序实现？如果是这样，任何人都可以指导我如何在我的项目中实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:02:37.570

[doorkeeper](https://github.com/applicake/doorkeeper)可能是您想要做的，而[oauth2](https://github.com/intridea/oauth2)是 OAuth 2.0 协议的包装器。

如果您搜索[oauth](http://rubygems.org/search?query=oauth) ，可以在 RubyGems 上找到更多解决方案。

# android - SyncAdapter 运行动画——如何知道 SyncAdapter 是否在主动同步

> ID：12914941
> 
> 赞同：11
> 
> 时间：2012-10-16T12:40:10.547
> 
> 标签：android, android-contentresolver, android-syncadapter

我想在我的 SyncAdapter 主动与网络同步内容时，在 ActionBar 中显示一个 ProgressBar。

我尝试将[SyncStatusObserver](http://developer.android.com/reference/android/content/SyncStatusObserver.html)与[ContentProvider.addStatusChangeListener](http://developer.android.com/reference/android/content/ContentResolver.html#addStatusChangeListener%28int,%20android.content.SyncStatusObserver%29)一起使用。但是，我无法检查 SyncAdapter 是否正在运行。我只能检查：

1.  SyncAdapter 正在使用[ContentResolver.isSyncPending挂起](http://developer.android.com/reference/android/content/ContentResolver.html#isSyncPending%28android.accounts.Account,%20java.lang.String%29)
2.  SyncAdapter 正在等待或正在使用[ContentResolver.isSyncActive积极工作](http://developer.android.com/reference/android/content/ContentResolver.html#isSyncActive%28android.accounts.Account,%20java.lang.String%29)

这些标志可以组合在一起：`!isSyncPending && isSyncActive`这样就可以检查 SyncAdapter 是否正在工作并且没有任何待处理的工作。但是，在某些情况下，SyncAdapter 正在积极工作并且有第二个待处理的请求在等待它。

看起来很简单，但我找不到解决这个问题的方法。在 SyncAdapter 未运行时显示 ProgressBar 会给用户一种同步非常慢的印象。让它不显示 ProgressBar 会让用户认为没有发生任何事情。

代码中的上述解决方案如下所示。我们在activity.onResume中注册观察者：

```
 int mask = ContentResolver.SYNC_OBSERVER_TYPE_PENDING | ContentResolver.SYNC_OBSERVER_TYPE_ACTIVE;
 syncHandle = ContentResolver.addStatusChangeListener(mask, syncObserver); 
```

syncObserver 在这里定义为：

```
syncObserver = new SyncStatusObserver()
{
    @Override
    public void onStatusChanged(int which)
    {
        Account account = getSomeAccount();
        boolean syncActive = ContentResolver.isSyncActive(account, CONTENT_AUTHORITY);
        boolean syncPending = ContentResolver.isSyncPending(account, CONTENT_AUTHORITY);
        boolean isSynchronizing = syncActive && !syncPending;
        updateRefreshButtonState();
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T14:38:32.160

我终于找到了解决问题的方法。这个想法是使用 ContentResolver 的[getCurrentSyncs()](http://developer.android.com/reference/android/content/ContentResolver.html#getCurrentSyncs%28%29)或[getCurrentSync()](http://developer.android.com/reference/android/content/ContentResolver.html#getCurrentSync%28%29)方法，无论哪个可用。以下方法将检查同步操作当前是否适用于帐户和权限。它需要 API 级别 8 (Froyo = Android 2.2)。

```
private static boolean isSyncActive(Account account, String authority)
{
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    {
        return isSyncActiveHoneycomb(account, authority);
    } else
    {
        SyncInfo currentSync = ContentResolver.getCurrentSync();
        return currentSync != null && currentSync.account.equals(account) &&
               currentSync.authority.equals(authority);
    }
}

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private static boolean isSyncActiveHoneycomb(Account account, String authority)
{
    for(SyncInfo syncInfo : ContentResolver.getCurrentSyncs())
    {
        if(syncInfo.account.equals(account) &&
           syncInfo.authority.equals(authority))
        {
            return true;
        }
    }
    return false;
} 
```

然后 Activity 在 中注册更新`onResume()`并在 中取消注册`onDestroy()`。此外，必须手动更新状态`onResume()`以赶上当前状态。

这是一个可以做到这一点的实现。子类应该自己定义

*   使用什么帐户（实施`getAccount()`）
*   使用什么权限（字段`CONTENT_AUTHORITY`）
*   如何显示同步状态（实现`updateState(boolean isSynchronizing)`）

我希望它会在未来对某人有所帮助。

```
import android.accounts.Account;
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.ContentResolver;
import android.content.SyncInfo;
import android.content.SyncStatusObserver;
import android.os.Build;
import android.os.Bundle;

public abstract class SyncActivity extends Activity
{
    private static final String CONTENT_AUTHORITY = "com.example.authority";
    private Object syncHandle;
    private SyncStatusObserver observer;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        observer = new SyncStatusObserver()
        {
            @Override
            public void onStatusChanged(int which)
            {
                runOnUiThread(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        Account account = getAccount();
                        boolean isSynchronizing =
                                isSyncActive(account, CONTENT_AUTHORITY);
                        updateState(isSynchronizing);
                    }
                });
            }
        };
    }

    @Override
    protected void onResume()
    {
        super.onResume();

        // Refresh synchronization status
        observer.onStatusChanged(0);

        // Watch for synchronization status changes
        final int mask = ContentResolver.SYNC_OBSERVER_TYPE_PENDING |
                ContentResolver.SYNC_OBSERVER_TYPE_ACTIVE;
        syncHandle = ContentResolver.addStatusChangeListener(mask, observer);
    }

    @Override
    protected void onPause()
    {
        super.onPause();

        // Remove our synchronization listener if registered
        if (syncHandle != null)
        {
            ContentResolver.removeStatusChangeListener(syncHandle);
            syncHandle = null;
        }
    }

    private static boolean isSyncActive(Account account, String authority)
    {
        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
        {
            return isSyncActiveHoneycomb(account, authority);
        } else
        {
            SyncInfo currentSync = ContentResolver.getCurrentSync();
            return currentSync != null && currentSync.account.equals(account) 
                    && currentSync.authority.equals(authority);
        }
    }

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private static boolean isSyncActiveHoneycomb(Account account,
                                                         String authority)
    {
        for(SyncInfo syncInfo : ContentResolver.getCurrentSyncs())
        {
            if(syncInfo.account.equals(account) &&
                    syncInfo.authority.equals(authority))
            {
                return true;
            }
        }
        return false;
    }

    protected abstract Account getAccount();
    protected abstract void updateState(boolean isSynchronizing);
} 
```

# c# - 如何创建文件夹的快捷方式？

> ID：12914947
> 
> 赞同：-2
> 
> 时间：2012-10-16T12:40:23.060
> 
> 标签：c#, .net, shortcut

我需要一些帮助。

我知道如何创建文件的快捷方式，但如何对文件夹做同样的事情？

对不起，英语，兄弟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:43:45.130

您的问题不清楚，但这里有一个关于如何在 C# 中创建快捷方式的示例：http: [//www.codeproject.com/Articles/146757/Add-Remove-Startup-Folder-Shortcut-to-Your-App](http://www.codeproject.com/Articles/146757/Add-Remove-Startup-Folder-Shortcut-to-Your-App)

**注意**：该链接显示了如何向启动文件夹添加快捷方式，但您可以轻松地将其更改为您想要的任何位置。

如果这还不够，请解释（并添加代码）您到底想要完成什么。

# xna - 如何在 XNA 2D 游戏中创建垂直抛物线路径？

> ID：12914949
> 
> 赞同：0
> 
> 时间：2012-10-16T12:40:23.917
> 
> 标签：xna, windows-phone-7.1

我正在为 Windows Phone 7.1 开发基于 XNA 的 2D 游戏。我的要求是轻弹一个对象，根据轻弹的数量和角度，它会以垂直的弹丸运动进行动画处理。例如，你面前有一个湖，你想往里面扔石头。必须用相机作为人眼来复制相同的动作。

有3个级别的距离要覆盖。Y 轴覆盖的距离大于 X 轴覆盖的距离。

我可以看到许多方程给出了水平（X）轴上的弹丸运动，但没有一个方程显示 Y 轴上的弹丸运动。

知道如何根据 X 和 Y 坐标实现这种抛射运动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:12:02.873

如果您使用 a`Vector2`而不是角度，您可以实现一个非常简单且准确的基本物理引擎。

要轻弹的对象将具有 a`Vector2 Velocity`和 a `Vector2 Position`。

然后您可以将鼠标之间的距离作为 a添加`Vector2`到`Velocity`，并将 添加`Velocity`到`Position`每一帧，然后添加重力。

这是一个示例实现：

```
public class FlickObject
{
    public Vector2 Velocity;
    public Vector2 Position;

    public FlickObject () {}

    public void Update(GameTime t)
    {
        Position += Velocity;
    }
} 
```

在游戏类中（当用户轻弹对象时）：

```
flickObject.Velocity += FlickDistance; 
```

`FlickDistance`鼠标（或者你计算它）和对象之间的距离在哪里。

要完成它，请添加重力：

```
flickObject.Velocity += new Vector2(0, GRAVITY); 
```

Where`GRAVITY`设置为某个正值。

# c# - 防止空正则表达式匹配所有内容

> ID：12914952
> 
> 赞同：0
> 
> 时间：2012-10-16T12:40:33.720
> 
> 标签：c#, regex

如果我从空字符串创建正则表达式，如何使它不匹配？

我正在寻找像 RegexOptions.DoNotMatchWithEmpty 或类似的选项。

澄清：

假设我无法控制用于创建 RegEx 的字符串。字符串可以为空，我必须创建 RegEx 对象。我可能可以将 RegEx 设置为 null 并在上游添加大量 null 检查，但我宁愿不这样做。最好的解决方案是 RegexOptions 标志，当 RegEx 使用空字符串构造时，该标志告诉不匹配任何内容。但这不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:43:07.457

做这个怎么样

```
if (string.IsNullOrEmpty(regex))
{
    return false;
}
// standard regex lookup goes here 
```

**更新：**或者只返回[一个不匹配的正则表达式](https://stackoverflow.com/questions/940822/regular-expression-syntax-for-match-nothing)

```
if (string.IsNullOrEmpty(regex))
{
    return new Regex("a^");
}
return new Regex(regex); 
```

它之所以有效，是因为该`^`字符与正在测试的字符串的开头匹配（除非`Multiline`提供了 regex 选项，但事实并非如此），但这显然无法匹配，因为我们已经匹配了另一个字符`a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:42:09.723

尝试以下作为默认值：

```
Regex.IsMatch(inputString, @"^(?!\s*$).+") 
```

这应该适用于任何非空或非空格的字符串。如果您只想检查 RegEx 是否实际上是一个空字符串，只需使用`String.IsNullOrWhitespace`.

# cloud - 为什么我尝试安装 python-glanceclient 时找不到某些包？

> ID：12914954
> 
> 赞同：0
> 
> 时间：2012-10-16T12:40:40.547
> 
> 标签：cloud, openstack

根据下面的输出，有一个错误是**Download error: [Errno 110] Connection timed out -- Some packages may not be found！**， 为什么？

```
byte-compiling build/bdist.linux-x86_64/egg/glanceclient/v1/client.py to client.pyc
byte-compiling build/bdist.linux-x86_64/egg/glanceclient/v1/legacy_shell.py to legacy_shell.pyc
byte-compiling build/bdist.linux-x86_64/egg/glanceclient/v1/image_members.py to image_members.pyc
creating build/bdist.linux-x86_64/egg/EGG-INFO
copying python_glanceclient.egg-info/PKG-INFO -> build/bdist.linux-x86_64/egg/EGG-INFO
copying python_glanceclient.egg-info/SOURCES.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying python_glanceclient.egg-info/dependency_links.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying python_glanceclient.egg-info/entry_points.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying python_glanceclient.egg-info/requires.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying python_glanceclient.egg-info/top_level.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
zip_safe flag not set; analyzing archive contents...
creating dist
creating 'dist/python_glanceclient-0.5.1.13.9004ee4-py2.6.egg' and adding 'build/bdist.linux-x86_64/egg' to it
removing 'build/bdist.linux-x86_64/egg' (and everything under it)
Processing python_glanceclient-0.5.1.13.9004ee4-py2.6.egg
Copying python_glanceclient-0.5.1.13.9004ee4-py2.6.egg to /home/mirror0/os/lib/python2.6/site-packages
Adding python-glanceclient 0.5.1.13.9004ee4 to easy-install.pth file
Installing glance script to /home/mirror0/os/bin

Installed /home/mirror0/os/lib/python2.6/site-packages/python_glanceclient-0.5.1.13.9004ee4-py2.6.egg
Processing dependencies for python-glanceclient==0.5.1.13.9004ee4
Searching for warlock<2
Reading http://pypi.python.org/simple/warlock/
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Couldn't find index page for 'warlock' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/ 
```

**编辑1**：第二次失败:(

```
Installed /home/mirror0/os/lib/python2.6/site-packages/python_glanceclient-0.5.1.13.9004ee4-py2.6.egg
Processing dependencies for python-glanceclient==0.5.1.13.9004ee4
Searching for warlock<2
Reading http://pypi.python.org/simple/warlock/

Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Couldn't find index page for 'warlock' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
No local packages or download links found for warlock<2
Best match: None
Traceback (most recent call last):
  File "setup.py", line 46, in <module>
    entry_points={'console_scripts': ['glance = glanceclient.shell:main']},
  File "/usr/lib/python2.6/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/usr/lib/python2.6/distutils/dist.py", line 975, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.6/distutils/dist.py", line 995, in run_command
    cmd_obj.run()
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/install.py", line 76, in run
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/install.py", line 104, in do_egg_install
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 211, in run
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 427, in easy_install
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 478, in install_item
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 519, in process_distribution
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/pkg_resources.py", line 563, in resolve
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/pkg_resources.py", line 799, in best_match
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/pkg_resources.py", line 811, in obtain
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 434, in easy_install
  File "/home/mirror0/os/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/package_index.py", line 475, in fetch_distribution
AttributeError: 'NoneType' object has no attribute 'clone' 
```

`pip`我可以使用命令找到术士：

```
(os)mirror0@lab:~/tmp/python-glanceclient$
(os)mirror0@lab:~/tmp/python-glanceclient$ pip search warlock
warlock                   - Python object model built on top of JSON schema 
```

术士的相关资料：

1.  [http://pypi.python.org/pypi/warlock/0.3.1](http://pypi.python.org/pypi/warlock/0.3.1)
2.  [http://pypi.python.org/pypi/warlock/0.0.1](http://pypi.python.org/pypi/warlock/0.0.1)
3.  [http://pypi.python.org/pypi/warlock/0.5.0](http://pypi.python.org/pypi/warlock/0.5.0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:51:49.633

[Errno 110] 连接超时

似乎很不言自明。您的构建环境无法查询 pypi，因为当它尝试连接到他们的 Web 服务时，它超时并且没有完成它的查询，而是发出退出错误代码。

# asp.net - 无法批量加载，因为无法打开文件。操作系统错误代码 21（设备未准备好。）

> ID：12914959
> 
> 赞同：2
> 
> 时间：2012-10-16T12:40:48.567
> 
> 标签：asp.net, sql-server-2008, sql-server-2005

无法批量加载，因为无法打开文件。操作系统错误代码 21（设备未准备好。）。

大家好，

我是使用 ASP.NET 在 MS SQL Server 中上传图像的新手。从与服务器相同的机器的查询中上传图像很酷，但是当从远程机器 ASP.NET Web 应用程序到 MS SQL Server 时，我收到上述错误。

我不明白需要做什么，我看过几个线程和论坛，但我无法理解，请你帮我解决一下。我正在寻找一些描述性的步骤来解决这个问题。

```
Session["FileName"] equals some d drive file 
```

**我使用的查询：**

```
command.CommandText = "UPDATE user_info "
                                + "SET User_Image = (SELECT * FROM Openrowset(Bulk '" + Session["FileName"] + "', Single_Blob) AS User_Image) "
                                + "WHERE id =" + "22222"; 
```

*   **我使用 SQL 身份验证**

*   **我已经启用了命名管道 + TCP/IP**

*   如果要使用**EXECUTE AS**，有人可以解释这个查询。是否有任何需要启用的设置。生无可恋 ：（

提前致谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-09T07:52:17.893

我知道这是个老问题，但它可能会帮助其他有疑问的人。要使用批量，文件需要在服务器上。

这意味着您需要在使用批量之前将文件从客户端机器上传到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:50:13.503

1) 获取正在运行的 sql server 帐户的名称 2) 转到 Session["FileName"] 中的文件夹等于某个 d 驱动器文件
3) 将该文件夹的权限授予 sql server 帐户以读写权限

# android - 如何覆盖 onListitemClick

> ID：12914962
> 
> 赞同：0
> 
> 时间：2012-10-16T12:40:56.777
> 
> 标签：android, listview, simplecursoradapter, onclicklistener

我有一个具有 SimpleCursorAdapter 的应用程序。我可以让数据库表的内容显示在列表中，但是当单击列表中的项目时，我想做一些事情。当我在 Eclipse 中找到源代码并尝试覆盖 clickListener 时，没有什么可以覆盖的。我正在寻找一种像 onListitemClick 这样的覆盖方法。我该怎么做？

Eclipse 还抱怨 onListItemClick 方法，说它必须重写或实现超类型方法。如果我删除 @Override 注释，那么该错误就会出现，列表会显示，但不会因触摸列表中的项目而触发任何事件。

```
private class MyAdapter extends SimpleCursorAdapter {

        public MyAdapter(Context context, int layout, Cursor c, String[] from,
                int[] to) {
            super(context, layout, c, from, to);

        }

        @Override
        public
        View getView(int position, View convertView, ViewGroup parent) {
            Log.e(TAG, "inside myadapter getview");
            View v = super.getView(position, convertView, parent);
            if(v == null)
                return null;

            Cursor c = (Cursor)getItem(position);

            String phoneName = c.getString(c.getColumnIndex(LoginValidate.C_PHONE_NAME));
            String phoneNumber = c.getString(c.getColumnIndex(LoginValidate.C_PHONE_NUMBER));

            ((TextView)v.findViewById(R.id.phonename)).setText(phoneName );
            ((TextView)v.findViewById(R.id.phonenumber)).setText(phoneNumber);
            ((TextView)v.findViewById(R.id.phonename)).setTextColor(Color.BLACK);
            ((TextView)v.findViewById(R.id.phonenumber)).setTextColor(Color.BLACK);

            return v;
        }

    }// end of adapter

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        Log.e(TAG, "clicked an item in list");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:45:35.273

默认情况下，适配器没有 onListItemClick() 方法，这就是注释困扰它的原因。

您必须将 onListItemClick() 绑定到 listView...尝试使用它

```
ListView list;
list.setOnListItemClick(listAdapter); //if your adapter implements OnListItemListener 
```

或者就像这样

```
list.setOnListItemClickListener(new OnListItemClickListener()
{
      @override
      public void onClick(args)
      {
           listAdapter.onListItemClick(args); //you will want this to be the first or the last call here
           //maybe some other stuff if you want here
      }
 } 
```

那应该这样做。

总结一下：

1）要么在你的适配器中实现正确的接口，它需要覆盖注释

2) 保留在适配器中公开的方法，并从附加到列表视图的私有 onListItemClickListener 调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:54:58.460

是的龟仔，

您可以通过覆盖放置列表视图的 Activity 中的方法来做到这一点。

```
listView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> adapter, View arg1, int position, long arg3) {
        //do what you want to do            
}
}); 
```

# architecture - 是否有有助于提前做出实施决策的问卷调查？

> ID：12914969
> 
> 赞同：6
> 
> 时间：2012-10-16T12:41:11.827
> 
> 标签：architecture, implementation

我想知道在根据“需求文档”做出实施决定之前，是否有一个众所周知的调查问卷可供您浏览？

基本上是一个需要是/否答案的问题列表，以便您或多或少地预见您的实施路线图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:47:06.047

不久前偶然发现了这样的事情。

[http://gorban.org/post/32873465932/software-architecture-cheat-sheet](http://gorban.org/post/32873465932/software-architecture-cheat-sheet)

我认为要点是正确的，在做一些架构决策时，我有时会忘记问自己。

这是你想要的？

# c++ - ifstream 构造函数采用 char* 但不是 std::string

> ID：12914971
> 
> 赞同：1
> 
> 时间：2012-10-16T12:41:21.373
> 
> 标签：c++, stream

除了历史之外，是否有任何理由来证明 std::ifstream/std::ofstream 类采用 char* 而不是构造 std::string 的事实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:47:07.050

不，构造函数 from`std::string`是[在 C++11 中添加的](http://en.cppreference.com/w/cpp/io/basic_ifstream/basic_ifstream)。

# javascript - 如何将事件侦听器附加到 ElementsByClassName()

> ID：12914973
> 
> 赞同：1
> 
> 时间：2012-10-16T12:41:25.823
> 
> 标签：javascript, snackjs

我正在使用 SnackJS API。我需要为每个输入元素（文本框）附加一个事件，类名为“qty”。我无法为此使用 id 属性，因为它是动态生成的并且是唯一的，并且正在被其他东西使用：

```
<script type="text/javascript">
    snack.ready(function () {
        // Do your work.
        // Attach an event to QTY Textbox elements.
        var listener = snack.listener({
            node: document.getElementsByClassName("qty"),
            event: 'blur'
        }, function () {
            alert("hello, element.");
        });

        listener.detach();
        listener.attach();
    });
</script> 
```

我该如何使用`getElementByClassName`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:43:29.640

`getElementByClassName`返回一个类似数组的结构。您应该遍历它们并以这种方式绑定事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:45:02.670

您可以遍历返回的 NodeList （每次循环时`getElementsByClassName`调用），或者[根据 API 文档](http://snackjs.com/#snack.listener)委托事件处理程序：`snack.listener`

```
var params = {
  node: document.body,
  event: 'click',
  delegate: function (node){
    return node.getElementsByClassName('qty')
  }
}
snack.listener(params, someFunction); 
```

# jquery - Jquery UI 可排序孪生列表

> ID：12914975
> 
> 赞同：0
> 
> 时间：2012-10-16T12:41:29.283
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有两个相同的列表，当我更改一个列表的顺序时，我希望另一个列表也重新排序。

这是一种管理方式，我选择编辑订单，并且我有一个包含管理内容的内联弹出窗口。（因此只有一个列表具有可排序活动，另一个列表必须只反映更改。）

谢谢。

Jsffidle 从这里开始：http: [//jsfiddle.net/jZRKD/](http://jsfiddle.net/jZRKD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:37:51.537

简单示例：[jsFiddle](http://jsfiddle.net/jZRKD/2/)

对于更复杂的情况，您应该查看 jQuery.fn.sort() 和 .detach() 以将事件保留在对象上。

# android - 在 Eclipse 上使用 android xml 配置进行多环境配置

> ID：12914984
> 
> 赞同：4
> 
> 时间：2012-10-16T12:41:45.183
> 
> 标签：android, eclipse, configuration-files

我的 android 应用程序可以在多个环境中运行 - dev/test/live。我在环境之间几乎没有不同的配置值（并且很多值对于所有环境都是相同的）。

有没有一种简单的方法可以在 Eclipse 中保留一个状态很少的配置 xml 文件，当它们之间进行更改时，一些键和值会被更改？（如 .net 中的 DEBUG/RELEASE）

# ios - 在 iOS 上使用 AVFoundation 为 AirPlay 视频添加字幕？

> ID：12914987
> 
> 赞同：2
> 
> 时间：2012-10-16T12:41:57.580
> 
> 标签：ios, avfoundation, avplayer

有什么方法可以在 iOS 上使用`AVPlayer`带有 av 的AirPlay 显示字幕`AVPlayerItem`？我目前通过向视图层次结构添加标签来实现字幕，这在应用程序中运行良好，但这显然不适用于 AirPlay。

那么，有没有办法使用 AirPlay 显示字幕`AVFoundation`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:54:11.163

您提到您已经通过为 CC 创建视图并将其添加到视频顶部来实现自己的 CC。使用 AirPlay 镜像会更容易。您可以通过检测外部屏幕然后在其上放置内容来做到这一点。

```
// detecting an external screen
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myExternalScreenDetected:) name:UIScreenDidConnectNotification object:nil];

//
// Grab external screen then add the content
- (void)myExternalScreenDetected:(UIScreen *)externalScreen {
    UIWindow *window = [[UIWindow alloc] initWithFrame:externalScreen.bounds];

    // ...add content to the window...

    window.screen = externalScreen;
    window.hidden = NO;
} 
```

另一种选择是使用本机隐藏式字幕。这可以通过将语言文件（WebVTT 格式）添加到 m3u8 播放列表中来完成。我没试过这个。似乎更复杂。您可以在这里观看 Apple 的视频：[https ://developer.apple.com/videos/wwdc/2012/?id=512](https://developer.apple.com/videos/wwdc/2012/?id=512)

镜像功能似乎比原生方式更容易实现 CC。然而，原生视频播放具有更好的性能，因为 AppleTV 会加载播放列表文件 (m3u8) 并直接播放内容。镜像 AirPlay 必须重新压缩输出并发送到 AppleTV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T16:15:26.973

您可能已经知道这一点，但是当您在 Apple TV 上播放时隐藏式字幕未显示的原因可能是您的 AppleTV 已关闭隐藏式字幕。

# c# - GetCustomAttributes 性能问题（表达式树是解决方案？？）

> ID：12914990
> 
> 赞同：2
> 
> 时间：2012-10-16T12:42:01.083
> 
> 标签：c#, performance, reflection, expression-trees

我遇到了性能问题，因为我使用反射和 GetCustomAttributes 进行数据访问。性能分析器检测到它。我有一个这样的扩展方法：

```
public static class DataRowExtensions
{
    /// <summary>
    /// Maps DataRow objecto to entity T depending on the defined attributes. 
    /// </summary>
    /// <typeparam name="T">Entity to map.</typeparam>
    /// <param name="rowInstance">DataRow instance.</param>
    /// <returns>Instance to created entity.</returns>
    public static T MapRow<T>(this DataRow rowInstance) where T : class, new()
    {
        //Create T item
        T instance = new T();

        IEnumerable<PropertyInfo> properties = typeof(T).GetProperties();
        MappingAttribute map;
        DataColumn column;

        foreach (PropertyInfo item in properties)
        {
            //check if custom attribute exist in this property
            object[] definedAttributes = item.GetCustomAttributes(typeof(MappingAttribute), false);

            // Tiene atributos
            if (definedAttributes != null && definedAttributes.Length == 1)
            {
                //recover first attribute
                map = definedAttributes.First() as MappingAttribute;

                column = rowInstance.Table.Columns.OfType<DataColumn>()
                                          .Where(c => c.ColumnName == map.ColumnName)
                                          .SingleOrDefault();

                if (column != null)
                {
                    object dbValue = rowInstance[column.ColumnName];
                    object valueToSet = null;

                    if (dbValue == DBNull.Value)//if value is null
                        valueToSet = map.DefaultValue;
                    else
                        valueToSet = dbValue;

                    //Set value in property 
                    setValue<T>(instance, item, valueToSet);
                }
            }
        }

        return instance;
    }

    /// <summary>
    /// Set "item" property.
    /// </summary>
    /// <typeparam name="T">Return entity type</typeparam>
    /// <param name="instance">T type instance</param>
    /// <param name="item">Property name to return value</param>
    /// <param name="valueToSet">Value to set to the property</param>
    private static void setValue<T>(T instance, PropertyInfo item, object valueToSet) where T : class, new()
    {
        if (valueToSet == null)
        {
            CultureInfo ci = CultureInfo.InvariantCulture;

            if (item.PropertyType.IsSubclassOf(typeof(System.ValueType)))
            {
                //if is a value type and is nullable
                if (item.PropertyType.FullName.Contains("System.Nullable"))
                {
                    item.SetValue(instance, null, BindingFlags.Public, null, null, ci);
                }
                else
                {
                    item.SetValue(instance, Activator.CreateInstance(item.PropertyType, null), BindingFlags.Public, null, null, ci);
                }
            }
            else //property type is reference type
            {
                item.SetValue(instance, null, BindingFlags.Public, null, null, ci);
            }
        }
        else // set not null value
        {
            //if is a value type and is nullable
            if (item.PropertyType.FullName.Contains("System.Nullable"))
            {
                item.SetValue(instance, Convert.ChangeType(valueToSet, Nullable.GetUnderlyingType(item.PropertyType)), null);
            }
            else
            {
                item.SetValue(instance, Convert.ChangeType(valueToSet, item.PropertyType), null);
            }
        }
    }
} 
```

本质上，我在这里所做的是将域实体与数据库字段映射，并且数据助手会自动攻击表。这些实体之一的示例是：

```
public class ComboBox
    {
    /// <summary>
    /// Represents a ComboBox item.
    /// </summary>
    [Mapping("CODE", DefaultValue = 0, DBType = DbParametersTypes.Varchar2, IsKey = true, IdentifierFK = "")]
    public string Code { get; set; }

    /// <summary>
    /// Represents Text.
    /// </summary>
    [Mapping("DESCRIPTION", DefaultValue = "", DBType = DbParametersTypes.Varchar2, IsKey = false, IdentifierFK = "")]
    public string Description { get; set; }

    } 
```

我使用的属性类：

```
public sealed class MappingAttribute : Attribute
    {
        public string ColumnName { get; set; }

        public object DefaultValue { get; set; }

        public DbParametersTypes DBType { get; set; }

        public bool IsKey { get; set; }

        public string IdentifierFK { get; set; }

        public bool IsParameter { get; set; } 

        public MappingAttribute(string columnName)
        {
            if (String.IsNullOrEmpty(columnName))
                throw new ArgumentNullException("columnName");

            ColumnName = columnName;
        }               
    } 
```

[我在这里](http://blogs.microsoft.co.il/blogs/alon_nativ/archive/2011/01/15/using-expression-trees-to-optimize-your-code.aspx)读到，可能的改进可能是表达式树，但是，首先，我不是表达式树专家，其次，我必须用 .NET 3.5 解决这个问题......（在示例 .NET 4 或 4.5用来...）

¿ 建议？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:30:55.143

```
public static class DataRowExtensions
{
    /// <summary>
    /// Maps DataRow objecto to entity T depending on the defined attributes. 
    /// </summary>
    /// <typeparam name="T">Entity to map.</typeparam>
    /// <param name="rowInstance">DataRow instance.</param>
    /// <returns>Instance to created entity.</returns>
    public static T MapRow<T>( this DataRow rowInstance ) where T : class, new()
    {
        //Create T item
        var instance = new T();
        Mapper<T>.MapRow( instance, rowInstance );
        return instance;
    }

    #region Nested type: Mapper

    private static class Mapper<T>
        where T : class
    {
        private static readonly ItemMapper[] __mappers;

        static Mapper()
        {
            __mappers = typeof (T)
                .GetProperties()
                .Where( p => p.IsDefined( typeof (MappingAttribute), false ) )
                .Select( p => new
                {
                    Property = p,
                    Attribute = p
                                  .GetCustomAttributes( typeof (MappingAttribute), false )
                                  .Cast<MappingAttribute>()
                                  .FirstOrDefault()
                } )
                .Select( m => new ItemMapper( m.Property, m.Attribute ) )
                .ToArray();
        }

        public static void MapRow( T instance, DataRow row )
        {
            foreach ( var mapper in __mappers )
            {
                mapper.MapRow( instance, row );
            }
        }

        #region Nested type: ItemMapper

        private sealed class ItemMapper
        {
            private readonly MappingAttribute _attribute;
            private readonly PropertyInfo _property;

            public ItemMapper( PropertyInfo property, MappingAttribute attribute )
            {
                _property = property;
                _attribute = attribute;
            }

            public void MapRow( T instance, DataRow rowInstance )
            {
                //TODO: Implement this with the code already provided
            }
        }

        #endregion
    }

    #endregion
} 
```

第一次为给定的 调用扩展方法时`<T>`，静态构造函数将运行并`Mapper`为每个`MappingAttribute`附加的属性缓存一个实例。然后，对于之后的每个调用，它将使用缓存的映射器来进行实际的复制。

您还可以进行`Mapper`抽象，并为您的每个分支使用不同的子类`setValue<T>()`。这样你的大部分反思只发生一次。

# r - 从 matlab 到 r 的 polyfit 函数转换

> ID：12914991
> 
> 赞同：0
> 
> 时间：2012-10-16T12:42:07.930
> 
> 标签：r, matlab, polynomial-math

所以matlab帮助有如下描述：

```
[P, S, MU] = POLYFIT[X,Y,N] 
```

我知道输入变量的含义，但我无法计算`MU`“手动”。我`MU`需要计算峰面积。

我需要将源代码从 MATLAB 转换为 R，但不知道最好做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:18:08.277

MU 以 [mu1,mu2] 的形式给出，用于对数据进行居中和缩放，以便问题具有良好的数值特性。mu1 是 x 的平均值，mu2 是 x 的标准差。

[在这里](http://www.mathworks.com/help/matlab/ref/polyfit.html)查看信息。

# android - 在 Android 中自定义 ActionBar TabBar？

> ID：12914994
> 
> 赞同：2
> 
> 时间：2012-10-16T12:42:09.897
> 
> 标签：android, android-actionbar

我在我的应用程序中使用 ActionBar（ActionBarSherlock（4.2 版）用于预 HoneyComb 设备），我有四个选项卡，每个选项卡上只有一个图像。

现在我的问题是我希望第 4 个选项卡比其他选项卡小，其他三个必须填充可用空间并在第 4 个选项卡开始之前留下几个像素。

例如，假设**前 3 个选项卡覆盖 75% 的屏幕宽度（每个 25%），然后有 5% 宽度的空间（屏幕空间），最后一个选项卡仅占屏幕宽度的 20%。**

我怎样才能做到这一点？

我已经在 Stack Overflow 上阅读了一些与此相关的主题，但找不到我的问题的任何答案。指向解决方案的简单指针将有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:11:19.270

你为什么不试试下面的。制作 5 个标签而不是 4 个。根据您的需要为它们提供所有尺寸。前三个选项卡具有相同的大小，而第四个选项卡只是空间。第五个选项卡将是您原来的第四个选项卡。