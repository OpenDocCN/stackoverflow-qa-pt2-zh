# StackOverflow 问答 15197000-15197999

# php - 从扫描的 PDF 中提取 PHP 文本

> ID：15197004
> 
> 赞同：1
> 
> 时间：2013-03-04T07:59:37.680
> 
> 标签：php, pdf, text

我需要从扫描的 PDF 中提取文本的帮助

是否可以使用 PHP 从扫描的图像或 pdf 中提取或读取文本。如果是这样，它是如何做到的......我可以从普通的 pdf 中读取文本，但是当涉及到扫描的 pdf 时，代码不起作用。

# windows-phone-8 - 如何在 Windows Phone 8 应用程序中读取 Nfc-V ISO 15693 标签？

> ID：15197011
> 
> 赞同：1
> 
> 时间：2013-03-04T07:59:59.683
> 
> 标签：windows-phone-8, nfc, iso-15693

有没有办法在 Windows Phone 8 应用程序中读取非 NDEF 格式的 NfcV (ISO 15693) 标签？

**编辑：**标签已格式化。它不是 NDEF 格式的。

**为未来的读者 **编辑：从**[UserVoice](http://wpdev.uservoice.com/forums/110705-dev-platform/suggestions/3531845-add-low-level-rfid-functionality)我现在得到了以下信息。**

 **> 我们很高兴地报告，Windows Phone 8.1 启用了访问非 NDEF 格式的标签功能，并且仅支持使用新的 PN547 芯片组推出的新设备。此功能目前不适用于从以前版本升级到 Windows Phone 8.1 的设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:52:09.737

由于 Windows Phone 8**仅支持 NDEF 格式的标签**，您需要先对其进行格式化，**然后**才能在 Windows Phone 8 应用程序中读取它们。**

# java - java和msaccess插入sql不起作用

> ID：15197013
> 
> 赞同：0
> 
> 时间：2013-03-04T08:00:04.330
> 
> 标签：java, ms-access

我有2个问题。

1.  下面的 INSERT 查询不会在 msAccess 数据库中插入记录。有人可以解释为什么会发生这种情况以及我该如何解决？我用双引号替换了单引号，但这也无济于事。

2.  在下面的这段代码中，只执行了 1 个查询，第一个，其余的都被跳过。我每次都必须注释以前的​​查询并重新编译以执行下一个查询。还有另一种方法吗？

    ```
    try {
       Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
       Connection conn=null;
       conn= DriverManager.getConnection("jdbc:odbc:SS");
       Statement s;
       s=conn.createStatement();
       ResultSet rs;
       rs=s.executeQuery("drop table users");
       rs=s.executeQuery("CREATE TABLE users ( id AUTOINCREMENT, username varchar(255) , pass varchar(255), PRIMARY KEY(id) ) ");
       rs=s.executeQuery(" insert into users (username, pass) values( 'name1', 'pass1') ");
       rs=s.executeQuery(" insert into users (username, pass) values( 'name2', 'pass2') ");
    } catch (SQLException ex) { 
       ex.printStackTrace(); 
    } catch(Exception ee) {
       ee.printStackTrace();
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:30:07.877

不涉及 ResultSet，因为您不进行任何查询，您应该只执行更新。如果您像这样更改代码，您的程序应该可以工作：

```
Connection conn=null;
Statement s=null;
try {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    conn = DriverManager.getConnection("jdbc:odbc:SS");
    s = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
    s.executeUpdate("drop table users");
    s.executeUpdate("CREATE TABLE users ( id AUTOINCREMENT, username varchar(255) , pass varchar(255), PRIMARY KEY(id) ) ");
    s.executeUpdate("insert into users (username, pass) values( 'name1', 'pass1') ");
    s.executeUpdate("insert into users (username, pass) values( 'name2', 'pass2') ");
} catch (SQLException ex) {
    ex.printStackTrace();
} catch (Exception ee) {
    ee.printStackTrace();
} finally {
    try {
        conn.close();
        s.close();
    } catch (SQLException ex) {
        ex.printStackTrace();
    }
} 
```

请注意，为了插入数据库表，您应该创建传递适当参数的语句。

另一个重要的一点是，您应该始终在完成后关闭 Connection、Statement 和 ResultSet。当您关闭连接时，第二个插入将被刷新到数据库表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:12:48.980

对于第一个问题，您应该使用`executeUpdate`更改数据库的语句，以及`executeQuery`从数据库中检索数据的时间。

对于第二个，您应该创建多个语句，并且不要为您尝试执行的每个查询使用相同的语句。您还应该正确关闭每个语句/连接。

# gwt - 列排序处理程序的 Gwt 简单寻呼机问题

> ID：15197014
> 
> 赞同：1
> 
> 时间：2013-03-04T08:00:05.373
> 
> 标签：gwt, sorting, gwt-celltable, simplepager

我为 CellTable 设置了一个 AsyncDataProvider 并将其添加到 SimplePager。我已经连接了一个 ListHandler 来处理基于列的排序。当我单击该列的标题时，数据不会更改，但在转到寻呼机中的下一页/上一页时，数据会被排序。同样，在单击该列之前，该列上没有可视指示符表明该列是可排序的。

单击列标题时如何获取要更新的数据？

这是我的代码片段

```
service.getHosts(environment, new AsyncCallback<Set<String>>() {    
        @Override
        public void onSuccess(final Set<String> hosts) {
            final List<String> hostList = new ArrayList<String>(hosts);
            //Populate the table
            CellTable<String> hostTable = new CellTable<String>();
            TextColumn<String> hostNameColumn = new TextColumn<String>(){
                @Override
                public String getValue(String string){
                    return string;
                }
            };

            NumberCell numberCell = new NumberCell();
            Column<String, Number> lengthColumn = new Column<String, Number>(numberCell){

                @Override
                public Number getValue(String string) {
                    return new Integer(string.length());
                }

            };

            AsyncDataProvider<String> dataProvider = new AsyncDataProvider<String>() {
                @Override
                protected void onRangeChanged(HasData<String> data) {
                    int start = data.getVisibleRange().getStart();
                    int end = start + data.getVisibleRange().getLength();
                    List<String> subList = hostList.subList(start, end);
                    updateRowData(start, subList);
                }

            };
            // Hooking up sorting
            ListHandler<String> columnSortHandler = new ListHandler<String>(hostList);
            columnSortHandler.setComparator(lengthColumn, new Comparator<String>(){

                @Override
                public int compare(String arg0, String arg1) {
                    return new Integer(arg0.length()).compareTo(arg1.length());
                }

            });
            hostTable.setPageSize(10);
            hostTable.addColumnSortHandler(columnSortHandler);
            hostTable.addColumn(hostNameColumn,"Host Name");
            lengthColumn.setSortable(true);
            hostTable.addColumn(lengthColumn, "Length");

            VerticalPanel verticalPanel = new VerticalPanel();
            SimplePager pager = new SimplePager();
            pager.setDisplay(hostTable);
            dataProvider.addDataDisplay(hostTable);
            dataProvider.updateRowCount(hosts.size(), true);
            verticalPanel.add(hostTable);
            verticalPanel.add(pager);
            RootPanel.get().add(verticalPanel);
        }

        @Override
        public void onFailure(Throwable throwable) {
            Window.alert(throwable.getMessage());

        }
    }); 
```

我不确定如何确保该列表由表和寻呼机共享。在添加我正在使用的寻呼机之前

```
 ListDataProvider<String> dataProvider = new ListDataProvider<String>();

    ListHandler<String> columnSortHandler = new ListHandler<String>(dataProvider.getList()); 
```

AsyncDataProvider 没有方法`getList`。

总而言之，我希望在单击列后立即对数据进行排序，而不是在使用寻呼机控件向前/向后移动之后对数据进行排序。

根据建议，我已将 AsyncDataProvider 的代码更改为

```
AsyncDataProvider<String> dataProvider = new AsyncDataProvider<String>() {
                    @Override
                    protected void onRangeChanged(HasData<String> data) {
                        int start = data.getVisibleRange().getStart();
                        int end = start + data.getVisibleRange().getLength();
                        List<String> subList = hostList.subList(start, end);

                                // Hooking up sorting
                                ListHandler<String> columnSortHandler = new ListHandler<String>(hostList);
                                hostTable.addColumnSortHandler(columnSortHandler);
                                columnSortHandler.setComparator(lengthColumn, new Comparator<String>(){

                                    @Override
                                    public int compare(String v0, String v1) {
                                        return new Integer(v0.length).compareTo(v1.length);
                                    }

                                });
                        updateRowData(start, subList);
                    }

                }; 
```

但即使在那之后，行为也没有改变。有人可以解释一下这个过程。GWT 展示应用程序似乎具有此功能，但他们如何做到这一点并不那么清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:17:35.410

使用 AsyncDataProvider 时，分页和排序都意味着在服务器端完成。您将需要一个 AsyncHandler 与您的 AsyncDataProvider 一起使用：

```
 AsyncHandler columnSortHandler = new AsyncHandler(dataGrid) {

        @Override
        public void onColumnSort(ColumnSortEvent event) {

            @SuppressWarnings("unchecked")
            int sortIndex = dataGrid.getColumnIndex((Column<Entry, ?>) event.getColumn());
            boolean isAscending = event.isSortAscending();

            service.getPage(0, sortIndex, isAscending, new AsyncCallback<List<Entry>>() {

                public void onFailure(Throwable caught) {
                }

                public void onSuccess(List<Entry> result) {

                    pager.setPage(0);
                    provider.updateRowData(0, result);
                }
            });
        }
    };
    dataGrid.addColumnSortHandler(columnSortHandler); 
```

单击列标题将触发 columnSortEvent。然后，您必须单击该列。我正在重载我的 servlet 以提供排序和分页，因此当只需要分页时，我将 -1 传递给列索引。

```
 provider = new AsyncDataProvider<Entry>() {

        @Override
        protected void onRangeChanged(HasData<Entry> display) {

            final int start = display.getVisibleRange().getStart();

            service.getPage(start, -1, true, new AsyncCallback<List<Entry>>() {

                @Override
                public void onFailure(Throwable caught) {
                }

                @Override
                public void onSuccess(List<Entry> result) {

                    provider.updateRowData(start, result);
                }
            });
        }
    };

    provider.addDataDisplay(dataGrid);
    provider.updateRowCount(0, true); 
```

然后 getPage 的 servlet 实现执行排序和分页。使用单独的事件处理程序更容易理解整个事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:14:35.680

我认为问题在于 ListHandler 初始化。您将 hostList 作为参数传递给 List Handler，并在 onRangeChange 方法中使用不同的列表（子列表）调用 updateRowData。

`Make sure you use the same list in both the places`.

或者

```
Move your ListHander initialization and cellTable.addColumnSortHandler method call to onRangeChange method after updateRowData call. 
```

# ios - 在 dealloc 方法中检查保留计数

> ID：15197016
> 
> 赞同：1
> 
> 时间：2013-03-04T08:00:10.137
> 
> 标签：ios, dealloc, retaincount

最近我遇到了一个问题，我从屏幕 A 导航到屏幕 B。当我从屏幕 B 回到屏幕 A 时，应用程序中的 Live Bytes 没有返回到初始值。经过进一步调查，我发现我在一些被多次调用的方法中保留了一些全局对象。所以我不得不修复方法的调用机制。

我解决了这个问题，但我正在考虑另一种解决方案。如果我只是在 dealloc 中使用了一个根据保留计数值运行的 for 循环会怎样。我认为不建议使用这种方法，但是如果我确定不能从文件外的任何地方访问对象，那么这种方法的确切问题是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:15:25.997

> 如果我只是在 dealloc 中使用了一个根据保留计数值运行的 for 循环会怎样。

如果 Xcode 检测到这样的代码并用几个安培为 MacBook Pro 的铝制外壳供电，我不会感到惊讶。

> 我认为不建议使用这种方法，但是如果我确定不能从文件外的任何地方访问对象，那么这种方法的确切问题是什么。

你是对的——不可取。至少有两个问题：

1.  它完全打破了 Objective-C 的内存管理范式。您真的不能确定没有其他对象保留了您的对象之一。仅举一个例子：您在方法中不知道`-dealloc`您的 ivars 所引用的任何对象是否已被自动释放。

2.  这是错误的修复。做你建议的事情并不能修复代码中的错误，它只会掩盖它们。您的对象应该正确管理它们使用的对象，而不用担心其他对象可能保留或未保留的内容。如果您遵循这个简单的公式，您就不必担心是否从“文件外部”访问对象——一切正常。

您不仅不应该使用`-retainCount`将保留次数降至 0，而且[根本](https://stackoverflow.com/q/4636146/643383)[不应该查看`-retainCount`](https://stackoverflow.com/q/4636146/643383).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:05:46.383

保留计数不是您可以指望的。有一些内部实现会在您不知道的情况下增加/减少保留计数，因此不建议使用它。

您应该使用 xcode 工具来查找内存泄漏，这将导致您在代码中保留对象而不释放对象的位置。

或者您可以启用 ARC 并让它为您管理内存。

# iphone - 存储多个视图控制器共有的数据

> ID：15197018
> 
> 赞同：1
> 
> 时间：2013-03-04T08:00:13.123
> 
> 标签：iphone, ios, objective-c, core-data

我知道有很多方法可以存储属性列表、归档等数据。但除此之外，还有其他方法可以存储非常少量的数据，这对于不同的视图控制器来说很常见（比如用于存储所有数据的通用类）数据）？。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:15:11.800

我们可以通过创建一个单例类和共享实例来做到这一点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:35:54.983

尝试这个

# NSUserDefaults

```
when you want to save small amounts of data such as High Scores, Login Information, and program state. 
```

# 保存

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// 保存一个 NSString [prefs setObject:@"TextToSave" forKey:@"keyToLookupString"];

// 保存一个 NSInteger [prefs setInteger:42 forKey:@"integerKey"];

// 保存一个 Double [prefs setDouble:3.1415 forKey:@"doubleKey"];

// 保存一个浮点数 [prefs setFloat:1.2345678 forKey:@"floatKey"];

[首选同步]；

# 检索

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// 得到一个 NSString NSString *myString = [prefs stringForKey:@"keyToLookupString"];

// 得到一个 NSInteger NSInteger myInt = [prefs integerForKey:@"integerKey"];

// 得到一个浮点数 float myFloat = [prefs floatForKey:@"floatKey"];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:16:01.110

用于`NSUserDefault`存储值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:59:04.213

是的，您可以以数组的形式定义必填字段。现在确保表单将为您提供一个身份，并且通过会话等进行一些验证。控制器的一个钩子以每次使用特定标志（隐藏）感知表单提交。因此，表名和 CRUD 指令将提供给该函数，并且每个常见的 CRUD 功能都将由该单个函数处理。通过定义必填字段，您可以忽略输入按钮和许多隐藏字段等额外字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:09:27.723

是的，您可以以 NSMutableArray 或 NSMutableDictionary 的形式声明并访问任何 Viewcontroller。您需要创建一个文件作为 NSObject 类并在

。H

```
+(NSMutableDictionary *)ImageCollection; 
```

在 .m 文件中

```
+(NSMutableDictionary *)ImageCollection
{
static NSMutableDictionary *thestring =nil;

@synchronized([Global class]) // in a single threaded app you can omit the sync block
{

    if (thestring ==nil) {
        thestring=[[NSMutableDictionary alloc]init];
    }
}
return thestring;

} 
```

在任何视图控制器中包含该 NSObject 类文件

```
 [[Global ImageCollection]setObject:@"Sample" forKey:@"Dictionary"];  //just example you can save string,image,array anything as you like 
```

希望这可以帮助 .. ！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T10:28:31.930

使用共享内存，在视图之间存储和共享公共数据。

# android - 用于删除行的 SQLite 触发器表达式

> ID：15197019
> 
> 赞同：5
> 
> 时间：2013-03-04T08:00:14.380
> 
> 标签：android, sqlite, triggers

我有 2 个表 A(id, Name), B(id, fid, Name) 其中**A.id = B.fid**，我的要求是每当 A 中的行删除时我想删除 B 中的行

这是我尝试过的查询，但它在 B 附近给了我错误。

```
Create Trigger Delete_B_trigger After Delete on A For each row Begin Delete from B where fid = id; End 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T08:59:52.053

DELETE 命令[需要](http://www.sqlite.org/lang_delete.html)一个 FROM。

要访问触发表中的值，您必须使用[OLD 或 NEW](http://www.sqlite.org/lang_createtrigger.html)别名。

```
CREATE TRIGGER Delete_B_trigger
AFTER DELETE ON A
FOR EACH ROW
BEGIN
    DELETE FROM B WHERE fid = OLD.id;
END 
```

# c - 在被调用函数中调用 sizeof 运算符时，会发生什么？

> ID：15197022
> 
> 赞同：-3
> 
> 时间：2013-03-04T08:00:28.790
> 
> 标签：c, sizeof

```
 void testSizeof(double array[])
    {
        printf ("%i\n", sizeof(array));
    } 
```

调用此函数时，输出的不是数组的长度。

为什么？

那么，关于输出的事实是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:01:07.213

**它返回`double`指针的大小，即`sizeof(double*)`.**

当函数接受类型参数时`double[]`，这与接受类型参数完全相同`double*`。据说该数组*衰减*为一个指针。

如需进一步解释，请参阅[什么是数组衰减？](https://stackoverflow.com/questions/1461432/what-is-array-decaying)和[C 常见问题解答](http://c-faq.com/aryptr/aryptrparam.html)。

如果函数需要知道数组的大小，则必须显式传递它。例如：

```
void testSizeof(double array[10]) {...} 
```

或者

```
void testSizeof(double array[], size_t array_size) {...} 
```

在第一个示例中，数组也[受到指针衰减](http://c-faq.com/aryptr/aryparmsize.html)的影响。但是，由于您已经知道数组的大小，因此您不需要使用`sizeof()`它来计算它。

不用说，第二种方法比第一种方法灵活得多。

# lucene - 为什么我在 Lucene 4.0 的搜索结果中找不到 IndexWriter 最近添加的文档？

> ID：15197028
> 
> 赞同：1
> 
> 时间：2013-03-04T08:00:55.727
> 
> 标签：lucene

如题所说，我遇到了一个不解的问题。我已经为我的测试程序建立了一个索引，然后我使用 IndexWriter 将一个文档添加到索引中。代码是：

```
IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_CURRENT, analyzer);
IndexWriter iwriter = new IndexWriter(directory, config);
Document doc1 = new Document();
doc1.add(new Field("name", "张三", Field.Store.YES, Field.Index.ANALYZED));
doc1.add(new IntField("year", 2013, Field.Store.YES));
doc1.add(new TextField("content", "123456789", Field.Store.YES));
iwriter.addDocument(doc1);
iwriter.commit();
iwriter.close(); 
```

当我尝试在此索引中搜索时，我无法获得此文档。我真的得到了正确的结果计数，比以前多了一个。但是当我尝试打印 doc.get('name') 时，输出是错误的。

搜索部分的代码是：

```
DirectoryReader ireader = DirectoryReader.open(directory);
System.out.println(ireader.numDeletedDocs());
IndexSearcher isearcher = new IndexSearcher(ireader);
// Parse a simple query that searches for "text":
QueryParser parser = new QueryParser(Version.LUCENE_CURRENT, "name", analyzer);
Query query = parser.parse("张");

ScoreDoc[] hits = isearcher.search(query, null, 1000).scoreDocs;
System.out.println(hits.length); 
```

结果，有一个“姓名：李四”。我确信我在索引和搜索期间使用了 StandardAnalyzer。而StandardAnalyzer 会将一个汉字作为一个单一的记号。为什么我搜索“张”会得到“李四”？添加文档时有什么问题吗？还是docid不匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:29:14.070

添加文档后，您是否（重新）打开了索引？Lucene 搜索只返回在打开索引进行搜索时存在的文档。

*[编辑...]*

使用**IndexReader.Open()**或**IndexReader.doOpenIfChanged()**再次打开索引。**doOpenIfChanged()**的优点是，如果您仍然可以使用旧的 IndexReader 实例（因为索引没有更改），它会返回 null。

*（如果我没记错的话，**DirectoryReader.Open()只是打开了索引目录，所以如果你只是调用****DirectoryReader.Open**，更高级别的 Lucene 代码不会意识到索引已经改变。）*

# javascript - 滚动时自动加载 TR

> ID：15197030
> 
> 赞同：0
> 
> 时间：2013-03-04T08:01:02.597
> 
> 标签：javascript, jquery

请我有大约 5000 行实时编辑的数据...
我希望能够显示前 200 行，然后在用户向下滚动页面时显示接下来的 200 行..并且可能隐藏前 200 行。 ..
在stackoverflow上进行了几次搜索之后..我找到[了这段](https://stackoverflow.com/questions/10406845/ajax-limit-the-loading-of-a-list-and-then-load-the-rest-on-scroll)代码，但似乎不太了解

```
 <table id="loadingtable" cellpadding="0" border="1" cellspacing="3" align="center" width="80%">
    <?php
    function createtr($value, $stop)
    {
        while($value <= $stop){
            echo'<tr>';
                echo '<td>';
                    echo "cell {$value}";
                echo '</td>';
            echo '</tr>';
            $value++;
        }
    }

    createtr(1, 5000);
    ?>  
    </table> 
```

这是Jquery

```
 $("#loadingtable tr").slice(100).hide();

        var mincount = 100;
        var maxcount = 100; 

        $(window).scroll(function() 
        {
            if($(window).scrollTop() + $(window).height() >= $(document).height() - 400) {
                    $("#loadingtable tr").slice(mincount,maxcount).fadeIn(800);
            mincount = mincount+100;
            maxcount = maxcount+100

        }
    }); 
```

该代码不适用于..请多多帮助谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:08:36.570

```
$("#loadingtable tr").slice(100).hide();

    var mincount = 0;
    var maxcount = 100; 

    $(window).scroll(function() 
    {
        if($(window).scrollTop() + $(window).height() >= $(document).height() - 400) {
            $("#loadingtable tr").slice(mincount,maxcount).fadeOut(800);
            mincount = mincount+100;
            maxcount = maxcount+100;
            $("#loadingtable tr").slice(mincount,maxcount).fadeIn(800);

    }
if($(window).scrollTop() <= 200) {
        $("#loadingtable tr").slice(mincount,maxcount).fadeOut(800);
        mincount = mincount-100;
        maxcount = maxcount-100;
        $("#loadingtable tr").slice(mincount,maxcount).fadeIn(800);

}
}); 
```

当用户滚动到页面底部时，这将加载接下来的 100 行 - 400 像素。要隐藏上述行，您需要先添加一个类似的功能，以便在他开始向上滚动时取消隐藏，然后使用 FadeOut

您需要添加对边界条件的检查（mincount < 0 和 maxcount > 5000）

# c# - itextsharp中的阿拉伯语编码

> ID：15197040
> 
> 赞同：4
> 
> 时间：2013-03-04T08:01:55.687
> 
> 标签：c#, itextsharp

当我尝试使用此代码使用 C# 创建阿拉伯语 PDF 时，生成的 PDF 文件包含离散字符。有什么帮助让我无法获得连续的字符吗？

```
//Create our document object
Document Doc = new Document(PageSize.LETTER);

//Create our file stream
using (FileStream fs = new FileStream(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf"), FileMode.Create, FileAccess.Write, FileShare.Read))
{
    //Bind PDF writer to document and stream
    PdfWriter writer = PdfWriter.GetInstance(Doc, fs);

    //Open document for writing
    Doc.Open();

    //Add a page
    Doc.NewPage();

    //Full path to the Unicode Arial file
    string ARIALUNI_TFF = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "arabtype.TTF");

    //Create a base font object making sure to specify IDENTITY-H
    BaseFont bf = BaseFont.CreateFont(ARIALUNI_TFF, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);

    //Create a specific font object
    iTextSharp.text.Font f = new iTextSharp.text.Font(bf, 12, iTextSharp.text.Font.NORMAL);

    //Write some text, the last character is 0x0278 - LATIN SMALL LETTER PHI
    Doc.Add(new Phrase("This is a ميسو ɸ", f));

    //Write some more text, the last character is 0x0682 - ARABIC LETTER HAH WITH TWO DOTS VERTICAL ABOVE
    Doc.Add(new Phrase("Hello\u0682", f));

    //Close the PDF
    Doc.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:58:08.053

从右到左书写和阿拉伯语连字仅在`ColumnText`和中受支持`PdfPTable`！

请看以下示例：

*   [http://itextpdf.com/examples/iia.php?id=205](http://itextpdf.com/examples/iia.php?id=205)结果：[say_peace.pdf](http://examples.itextpdf.com/results/part3/chapter11/say_peace.pdf)
*   [http://itextpdf.com/examples/iia.php?id=215](http://itextpdf.com/examples/iia.php?id=215)结果：[peace.pdf](http://examples.itextpdf.com/results/part3/chapter11/peace.pdf)

阅读引用这些示例的书，以了解为什么不是所有单词都在 Peace.pdf 中正确呈现

[在http://tinyurl.com/itextsharpIIA2C11](http://tinyurl.com/itextsharpIIA2C11)中搜索这些示例的相应 C# 版本。

无论如何，您需要一种知道如何显示阿拉伯字形的字体：

```
BaseFont bf = BaseFont.CreateFont(ARIALUNI_TFF, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font f = new Font(bf, 12); 
```

您现在可以添加阿拉伯文本，例如在表格中：

```
PdfPCell cell = new PdfPCell();
cell.AddElement(new Phrase("Hello\u0682", f));
cell.RunDirection = PdfWriter.RUN_DIRECTION_RTL; 
```

# .net - 托管 C++ 中的字符串声明

> ID：15197041
> 
> 赞同：0
> 
> 时间：2013-03-04T08:01:57.617
> 
> 标签：.net, string, declaration, managed-c++

我正在尝试在 c++/CLI 应用程序中声明一个字符串变量。

我的声明如下：

`String^ strRptPath = "C:\Reports\NorthwindCustomers.rpt";`

我有这个错误：

`error C2059: syntax error : '^'`

`error C2238: unexpected token(s) preceding ';'`

我也试过这个方法：

`String^ strRptPath =gcnew String("C:\Reports\NorthwindCustomers.rpt");`

它返回相同的错误。

整个代码是：

```
 #pragma once
namespace CRViewerXI
{
    using namespace System;
    using namespace System::Text;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace CrystalDecisions::Windows::Forms;

public __gc class Form1 : public System::Windows::Forms::Form
{   
public:
    Form1(void)
    {
        InitializeComponent();
    }

protected:
    void Dispose(Boolean disposing)
    {
        if (disposing && components)
        {
            components->Dispose();
        }
        __super::Dispose(disposing);
    }

private:
    CrystalDecisions::Windows::Forms::CrystalReportViewer *CRViewer;
    System::ComponentModel::Container * components;

private : String^ strRptPath =gcnew String("C:\\Reports\\NorthwindCustomers.rpt");
    void LoadReport()
    {

    }

    void InitializeComponent(void)
    {
        CRViewer = new CrystalDecisions::Windows::Forms::CrystalReportViewer();
        CRViewer->ActiveViewIndex = -1;
        CRViewer->ShowGroupTreeButton = true;
        CRViewer->ShowExportButton = true;
        CRViewer->EnableToolTips = true;
        CRViewer->DisplayToolbar = true;
        CRViewer->Dock = System::Windows::Forms::DockStyle::Fill;
        Controls->Add(CRViewer);

        this->AutoScaleBaseSize = System::Drawing::Size(5, 13);
        this->ClientSize = System::Drawing::Size(528, 394);
        this->Name = S"Form1";
        this->Text = S"Form1";
        this->Load += new System::EventHandler(this, Form1_Load);

    }   
private: System::Void Form1_Load(System::Object *  sender, System::EventArgs *  e)
        {   

        }

}; 
```

}

我做错了吗？这是我第一次在托管 C++ 中工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:06:00.263

也许您忘记`using namespace System::Text;`在代码顶部添加。使用时需要这个命名空间`String^`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:45:14.863

看起来您混合了托管 C++ 和 C++/CLI 语法。
如果您使用的是托管 C++（不是 C++/CLI），则托管对象的声明会有所不同：

托管 C++ 语法：

```
 String __gc *RptPath = S"whatever"; 
```

C++/CLI 语法：

```
 String^ RptPath; 
```

请注意，托管 C++ 现在已被弃用，因此如果可能，我建议使用 C++/CLI 代替（它也有更清晰的语法）。

# asp-classic - Manually changing date and time of a file

> ID：15197043
> 
> 赞同：1
> 
> 时间：2013-03-04T08:02:23.343
> 
> 标签：asp-classic

I'd like to manually change the date and time for a specified time by invoking [SetFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724933%28v=vs.85%29.aspx) or something similar but on ASP Classic. As far as I know, [ASP File Object](http://www.w3schools.com/asp/asp_ref_file.asp) provides method for retrieving the creation & modification times for the file but provides no methods for actually setting them.

How can I achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:19:49.150

I found the answer relatively quickly:

```
Sub ModifyLastAccessedDate(emlFilePath, newDate)
    Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
    Set file = objFSO.GetFile(emlFilePath)
    Set app = Server.CreateObject("Shell.Application") 
    Set folder = app.NameSpace(file.ParentFolder & "\") 
    Set fileModify = folder.ParseName(file.Name) 

    fileModify.ModifyDate = NewDate 

    Set objFSO = Nothing
    Set file = Nothing 
    Set folder = Nothing 
    Set app = Nothing 
    Set fileModify = Nothing
End Sub 
```

And then you just call the routine by

`Call ModifyLastAccessedDate("C:\Folder\SomeFile.Txt","2013-03-05")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T08:03:30.573

Here is an example in JScript, and again in VB, taken directly from [Microsoft](https://msdn.microsoft.com/en-us/library/windows/desktop/bb787825(v=vs.85).aspx) just for posterity (and as another example of how the date **and time** string can be set):

```
<script language="JScript">
    function fnModifyDateGetSetJ()
    {
        var objShell = new ActiveXObject("shell.application");
        var objFolder2;
        var ssfWINDOWS = 36;

        objFolder2 = objShell.NameSpace(ssfWINDOWS);
        if (objFolder2 != null)
        {
            var objFolderItem;

            objFolderItem = objFolder2.ParseName("NOTEPAD.EXE");
            if (objFolderItem != null)
            {
                var szReturn;

                szReturn = objFolderItem.ModifyDate;
                objFolderItem.ModifyDate = "01/01/1900 6:05:00 PM";
            }
        }
    }
</script> 
```

VB:

```
Private Sub fnModifyDateGetSetVB()
    Dim objShell   As Shell
    Dim objFolder2 As Folder2
    Dim ssfWINDOWS As Long

    ssfWINDOWS = 36
    Set objShell = New Shell
    Set objFolder2 = objShell.NameSpace(ssfWINDOWS)
        If (Not objFolder2 Is Nothing) Then
            Dim objFolderItem As FolderItem

            Set objFolderItem = objFolder2.ParseName("NOTEPAD.EXE")
                If (Not objFolderItem Is Nothing) Then
                    Dim szReturn As String

                    szReturn = objFolderItem.ModifyDate
                    objFolderItem.ModifyDate = "01/01/1900 6:05:00 PM"
                Else
                    'FolderItem object returned nothing.
                End If
            Set objFolderItem = Nothing
        Else
            'Folder object returned nothing.
        End If
    Set objFolder2 = Nothing
    Set objShell = Nothing
End Sub 
```

# android - 如何正确启动 ListFragment 的多选上下文操作栏（有问题）

> ID：15197044
> 
> 赞同：6
> 
> 时间：2013-03-04T08:02:28.770
> 
> 标签：android, android-listview, android-listfragment, onlongclicklistener, contextual-action-bar

我有一个`ListFragment`与一个简单的`ArrayAdapter`. ListView 包含一个可检查项的列表，其 XML 布局如下：

```
<ListView android:id="@id/android:list"
              android:layout_width="match_parent"
              android:layout_height="0dip"
              android:layout_weight="1"
              android:layout_marginLeft="2mm"
              android:layout_marginRight="2mm"
              android:drawSelectorOnTop="false"
              android:longClickable="true"
              android:choiceMode="multipleChoiceModal"/> 
```

如您所见，我在 XML 布局中设置了`long-clickable`和`choicemode`属性。

`ListFragment`我在的`onViewCreated`回调中设置了适当的侦听器：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    ListView list_view = getListView();
    list_view.setMultiChoiceModeListener(this);
    list_view.setOnItemLongClickListener(this);
} 
```

我作为侦听器参数传入，`this`因为我`ListFragment`还实现了这些侦听器的回调。

这是我遇到问题的回调：

```
@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id
{
    activity.startActionMode(this);
    return true;
} 
```

首先，它`onItemLongClick`永远不会被调用。**但是，当长按列表项时，上下文操作栏 (CAB) 会启动并完美运行！**

事实上，CAB没有这个回调就可以*正常启动！*我的回调使用`activity.startActionMode(this)`，它会显示 CAB，但不利于检查列表中的项目（我在其他地方测试过）。

**如何以编程方式正确处理长单击以启动 CAB 并促进检查列表项？**

我正在使用[Android 开发人员指南](http://developer.android.com/guide/topics/ui/menus.html#CAB)主题中提供的方法（他们使用了 onLongClickListener，我也尝试过但无济于事），但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T12:34:48.870

我猜你想出了这个，但是为了后代，你需要做的是添加上下文菜单只是在你的根活动/片段下的 onContextMenuCreated 中添加上下文菜单项：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
  if (v.getId()==R.id.list) {
    String[] menuItems = getResources().getStringArray(R.array.menu);
    for (int i = 0; i<menuItems.length; i++) {
      menu.add(Menu.NONE, i, i, menuItems[i]);
    }
  }
} 
```

然后，响应下的上下文菜单点击`onContextMenuCreated`。你可以在这里阅读更多：

[http://www.mikeplate.com/2010/01/21/show-a-context-menu-for-long-clicks-in-an-android-listview/](http://www.mikeplate.com/2010/01/21/show-a-context-menu-for-long-clicks-in-an-android-listview/)

# javascript - Javascript 中的照片标记

> ID：15197046
> 
> 赞同：1
> 
> 时间：2013-03-04T08:02:30.267
> 
> 标签：javascript

我想知道的是如何使用 JavaScript 制作拖动选择框。

我的意思是，当您单击鼠标左键并拖动时，应该会出现一个“电线”（我不知道它的术语），就像在您的桌面上一样。

单击并拖动图像，释放时搜索框应出现在拖动区域下方。

我确定这是可能的，但我没有找到任何例子。所以，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:35:22.130

我认为可以这样做

```
function getCursorPosition(e)
{
e = e || window.event;
if (e)
    {
    if (e.pageX || e.pageX == 0) return [e.pageX,e.pageY];
    var dE = document.documentElement || {};
    var dB = document.body || {};
    if ((e.clientX || e.clientX == 0) && ((dB.scrollLeft || dB.scrollLeft == 0) || (dE.clientLeft || dE.clientLeft == 0))) return [e.clientX + (dE.scrollLeft || dB.scrollLeft || 0) - (dE.clientLeft || 0),e.clientY + (dE.scrollTop || dB.scrollTop || 0) - (dE.clientTop || 0)];
    }
return null;
}

function mousedown(e)
{
var mxy = getCursorPosition(e);
var box = document.getElementById("sel_box");
box.orig_x = mxy[0];
box.orig_y = mxy[1];
box.style.left = mxy[0]+"px";
box.style.top = mxy[1]+"px";
box.style.display = "block";
document.onmousemove = mousemove;
document.onmouseup = mouseup;
}

function mousemove(e)
{
var mxy = getCursorPosition(e);
var box = document.getElementById("sel_box");
box.style.width = (mxy[0]-box.orig_x)+"px";
box.style.height = (mxy[1]-box.orig_y)+"px";
}

function mouseup(e)
{
var box = document.getElementById("sel_box");
box.style.display = "none";
box.style.width = "0";
box.style.height = "0";
document.onmousemove = function(){};
document.onmouseup = function(){};
} 
```

document.onmousedown = mousedown;

@普拉文库马尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:01:24.230

网址链接：- [http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

使用 jQuery ui api。

这是最好的拖动选择技术..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:07:19.203

有插件可以做到这一点。您可以尝试使用[jQuery Resize Plugin](https://github.com/adeelejaz/jquery-image-resize)来实现您想要的。

> **aeImageResize**是一个 jQuery 插件，用于动态调整图像大小而不扭曲比例。

**例子**

```
$(function() {
  $( ".resizeme" ).aeImageResize({ height: 250, width: 250 });
}); 
```

扩展这个插件和`complete`功能，你可以把它做成一个textarea。

# hadoop - 服务“zookeeper1”的命令“ZkStartPreservingDatastore”失败

> ID：15197049
> 
> 赞同：1
> 
> 时间：2013-03-04T08:02:42.143
> 
> 标签：hadoop, cloudera, apache-zookeeper

我需要你的帮助。我对 hadoop 集群启动有疑问。错误：错误：命令 'ZkStartPreservingDatastore' failed for service 'zookeeper1'

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:41:47.620

希望这可以帮助。我在我们的生产 CDH4 集群上遇到了同样的问题。我尝试手动重新启动服务，我在日志中注意到以下错误消息：

[NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@193] - 来自 /10.0.2.133 的连接太多 - 最大值为 50

因此，我编辑了**/etc/zookeeper/conf/zoo.cfg**并将 maxClientCnxns 更改为 500。之后我设法重新启动 zookeeper，集群又回来了。

# facebook-graph-api - Facebook AP 访问令牌延长过期获取错误

> ID：15197051
> 
> 赞同：2
> 
> 时间：2013-03-04T08:03:01.813
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

我正在使用以下 API 调用来生成访问令牌 -

```
https://graph.facebook.com/oauth/access_token?client_id=XXXXXX&client_secret=XXXXXXX&grant_type=client_credentials 
```

从上面得到访问令牌如下： - 162345123675615|GmRvEjertyuiNdlaBc9zuxPjhMA

所以，我使用上面的访问令牌和以下 APi 来延长它的到期时间：-

```
https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=xxxxxx&client_secret=xxxxxx&fb_exchange_token=162345123675615|GmRvEjertyuiNdlaBc9zuxPjhMA 
```

从上述 API 调用获得响应：- {"error":{"message":"No user access token specified","type":"OAuthException","code":1}}

谁可以帮我这个事。是否可以扩展从以下 API 生成的上述访问令牌类型： - [https://graph.facebook.com/oauth/access_token?client_id=XXXXXX&client_secret=XXXXXXX&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=XXXXXX&client_secret=XXXXXXX&grant_type=client_credentials)

那么，是否可以扩展上述类型的访问令牌或扩展他们需要其他类型的访问令牌。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T08:31:18.580

您从第一次通话中收到的访问令牌`Application access token`不是`User access token`- 您无法扩展应用程序访问令牌！

# c# - 从串口读取并显示结果

> ID：15197052
> 
> 赞同：4
> 
> 时间：2013-03-04T08:03:07.633
> 
> 标签：c#, asp.net, serial-port, rfid

这是我到目前为止提出的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    try {
    serialPort1.PortName = "COM4";
    serialPort1.BaudRate = 9600;
    serialPort1.Open();
    this.serialPort1.DataReceived += new      
        System.IO.Ports.SerialDataReceivedEventHandler(this.serialPort1_DataReceived);
    Label1.Text = "Connected";
    UpdatePanel1.Update();
    }
    catch (Exception ex) {

    }
}

string x = "";
private void serialPort1_DataReceived(object sender, 
      System.IO.Ports.SerialDataReceivedEventArgs e){

    x = serialPort1.ReadExisting();
    TextBox1.Text = x;
    UpdatePanel1.Update();
} 
```

问题是代码运行后文本框仍然为空...（我使用 AJAX 更新面板刷新文本框文本）问题是当我在调试期间设置断点时，从串口接收的数据在变量中并且是设置为新的文本框文本，但是当代码完成时没有显示任何内容....我很确定更新面板可以工作，因为我已经对其进行了测试。

PS 串口已连接到 rfid 阅读器，我正在尝试读取标签。我已经成功编写了一个 Windows 窗体应用程序来做我想做的事情，但我需要将它迁移到 ASP.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:29:13.640

只有当阅读器连接到服务器（而不是运行浏览器的机器）时，才能在 ASP.NET 应用程序中从串行端口读取数据。它似乎只是因为您在本地测试它才有效。

初始页面渲染完成后，该`serialPort1`对象将被销毁。ASP.NET 页面只存在于页面呈现之前。然后它被摧毁。下一个请求再次重新创建所有对象。因此，每次浏览器访问服务器时，串行端口都会一次又一次地打开。

`UpdatePanel`仅将经典浏览器请求更改为 AJAX - 它不会更改 ASP.NET 服务器处理的工作方式。它仍然是由客户端浏览器触发的请求-响应动作。在您的情况下，`UpdatePanel`必须在计时器上查询服务器。

您最好的选择是`ActiveX`根据您的 Windows 窗体代码创建一个控件并将其嵌入您的网站。

# algorithm - 数组中每个位置左侧不同的较小元素的数量

> ID：15197058
> 
> 赞同：2
> 
> 时间：2013-03-04T08:03:48.330
> 
> 标签：algorithm, data-structures

我偶然发现了找到左侧**不同**元素的数量并且小于数组中每个位置的元素的问题。

**示例**：

对于数组`1 1 2 4 5 3 6`，答案是`0 0 1 2 3 2 5`

在 O(n ² ) 中解决问题很简单，我想知道问题是否可以在 O(n*lg(n)) 中解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T08:10:12.187

是的，您可以将元素插入到平衡（红黑、AVG 等）二叉搜索树中，将子树节点总数存储在每个节点中。更新是 O(log N)，因为您只更新到根的路径，并且检查不同元素的数量也是 O(log N)，因为它需要对从新元素到的路径上的左子树的节点数求和根。

这是插入 [0,1,2,3,5,6] 后的树的样子，括号中的子树节点数。

```
 2(6)
   /  \
  1(2) 5(3)
 /    / \
0(1) 3(1)6(1) 
```

在插入 6（假设它是最后一个）时，您添加：

*   2（左子树的节点数为 2）
*   1（带2的节点，因为你走对路，所以root更小）
*   1（5的左子树）
*   1（5的节点，同理，没有左子树要添加）

总计 5。树有点太小，看不到保留总计的节省，但请注意，您不需要访问 0 节点，它在其父节点 - 1 节点中进行了说明。

# android - 使用 JDK 1.7 在 google play 中发布的应用程序

> ID：15197059
> 
> 赞同：1
> 
> 时间：2013-03-04T08:03:53.853
> 
> 标签：android, google-play

我们使用 JDK 1.7 将我们的 android 应用程序发布到 google play 中。当应用程序发布后，用户可以下载但不能安装。

找到了解决方案。将 jdk 降级到 1.6。我采用了另一个应用程序构建并尝试使用以前的密钥库进行测试，但它引发了错误。

所以我用 jdk 1.6 创建了一个新的密钥库并尝试将其推送到 google play 中，我收到这个新错误“keystore mismatch.App cannot have a new key store”

我还发现我不能使用不同的密钥库。但是我以前的密钥库不允许自己安装。我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:07:52.267

您将不得不发布一个具有不同包名称的新应用程序，因为 Google Play 不允许您使用不同的密钥库更新应用程序，也不允许您发布具有相同包名称的新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:08:03.037

我建议您尝试从 JDK 1.7 密钥库导出密钥并将它们导入 1.6 密钥库。您可以通过这种方式使用旧的签名密钥。

如果没有，那么你就卡住了。就 Google Play 上的应用而言，一旦应用发布，您就无法更改签名密钥。但是，您可以从发布中撤消应用程序并发布具有相同标题的不同应用程序。它需要有一个不同的包名称，Google Play 会认为它是一个完全不同的应用程序。

# javascript - 用 xor 变量计算

> ID：15197065
> 
> 赞同：2
> 
> 时间：2013-03-04T08:04:32.857
> 
> 标签：javascript, algorithm

我这样计算：

```
117^196 
```

我得到：

```
177 
```

现在我想做的是让 117 回来，所以我需要做一个替换

```
(replace)^196 = 117 
```

与 xor 运算符相反的操作是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:05:58.820

xor 的反义词是 xor :)。如果你两次异或某事`(a^b)^b == a`。

这相对容易展示。对于每一位：

```
1 ^ 1 = 0
1 ^ 0 = 1
0 ^ 1 = 1
0 ^ 0 = 0

```

对任何一对数字执行此操作`a`，`b`很容易看出

`a^b`异或异`a`或`b`产生另一个（异或`a`产生`b`，反之亦然）

```
1 2 过滤结果
0^0^0 = 0
0^1^0 = 1
0^1^1 = 0
1^0^0 = 1
1^0^1 = 0
1^1^1 = 1

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:06:38.643

这只是`xor`它自己。

like`+`的对立面是`-`

`xor`的对立面是`xor`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:16:31.953

只需使用您得到的结果：177

```
117 ^ 196        = 177         | () ^ 196
117 ^ 196 ^ 196  = 177 ^ 196   | self-inverse
117 ^ 0          = 177 ^ 196   | neutral element
117              = 177 ^ 196 
```

XOR 具有三个重要的属性。这是

*   联想
*   可交换的
*   自逆

这意味着一个值是它自己的倒数：

```
a^a = 0 
```

由于它也是可交换的和关联的，因此您可以重新排列和异或表达式，其中包含相同操作数的事件数量，如下所示：

```
a^O^b^c^O^d = O^O^a^b^c^d = 0^a^b^c^d = a^b^c^d 
```

您可以说出现偶数时间的操作数“相互抵消”。

# php - 我如何从输入中分离字符和数字并将其存储为单独的变量 php

> ID：15197073
> 
> 赞同：1
> 
> 时间：2013-03-04T08:05:20.130
> 
> 标签：php

我如何从输入中分离字符和数字并将其存储为单独的变量 php 例如我的输入字符串是 as `$str="abc567"`，我需要将其分隔为`$str1="abc"`and `$str2="567"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:07:56.010

您可以使用 preg_split 使用[lookahead 和 lookbehind](http://www.regular-expressions.info/lookaround.html)：

```
print_r(preg_split('#(?<=\d)(?=[a-z])#i', "abc567")); 
```

印刷

```
Array
(
    [0] => abc
    [1] => 567
) 
```

我希望这会有所帮助:) 问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:08:00.130

通过使用[preg_split](http://php.net/manual/en/function.preg-split.php)，您可以传递正则表达式字符串。这将返回与给定正则表达式字符串匹配的所有模式，您可以使用它将各种值存储到它们各自的变量中。

注意这里没有代码；你应该尝试自己解决这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:07:21.143

会`preg_split`帮助你。

**官方文档**： http: [//php.net/manual/en/function.preg-split.php](http://php.net/manual/en/function.preg-split.php)

**例子**

```
echo "<pre>";
print_r(preg_split('#(?<=\d)(?=[a-z])#i', "abc567"));
echo "</pre>"; 
```

以上将输出。

```
Array
(
    [0] => abc
    [1] => 567
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:11:28.723

试试这个

```
$str="abc567";
preg_match_all('/(\d)|(\w)/', $str, $matches);
$numbers = implode($matches[1]);
$characters = implode($matches[2]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T08:11:47.300

如果您想要单独变量中的所有数字和所有字母，您可以使用：

```
$your_var = "abc567";
$str_letters = preg_replace('/[a-z]/', "", $your_var);
$str_numbers = preg_replace('/[0-9]/', "", $your_var); 
```

请注意，如果 $your_var = abc7567d64h num = 756764 个字母 = abcdh

# ios - 在tableview中如何动态改变节y位置ios

> ID：15197075
> 
> 赞同：1
> 
> 时间：2013-03-04T08:05:30.550
> 
> 标签：ios, uitableview, dynamic

![](../Images/89d68f7842f187e193a9cc5ef6641c6e.png) ![](../Images/ee18556ae61517822cd093cf3bc32546.png)

我在此处添加的屏幕截图我的部分中有动态数据。每个部分都有一行，其中包含标签和值。我的问题是当我添加或更改其部分“y”边距变化的值计数时。如果有人知道，请帮助我

这是我的代码

```
- (UIView *)tableView:(UITableView *)tableView1 viewForHeaderInSection:(NSInteger)section{

    UIView *section1 = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView1.bounds.size.width, tableView1.bounds.size.height)] ;
    [section1 setBackgroundColor:[UIColor clearColor]];

    return section1;

}

-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section
{

    if(section !=0){
        return 22;
    }
    return 0.0;
}
-(CGFloat)tableView:(UITableView*)tableView heightForFooterInSection:(NSInteger)section
{

    return 0.0;
}

//dynamic decide no of sections in table
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    if(tagLastbutton == lastRow){

        lastRow = lastRow +1;
        return lastRow;

    }
    return lastRow;

    //[self.arrayObjects count];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return 1;
}

//  Return YES to allow the user to reorder table view rows
//
- (BOOL)tableView:(UITableView *)tableView
canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;
}

// Return a cell containing the text to display at the provided row index.
//changing background according to input
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"MyuSocialNetworkCell";
    CreateNewProfileViewCell * cell = (CreateNewProfileViewCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {

        NSArray *nibObjects= [[NSBundle mainBundle] loadNibNamed:@"CreateNewProfileViewCell" owner:nil options:nil];

        for(id currentObject in nibObjects)
        {
            if([currentObject isKindOfClass:[CreateNewProfileViewCell class]])
            {
                cell = (CreateNewProfileViewCell *) currentObject;
                break;

            }
        }

    }
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    //[indexPath.row color]
   // if([self.subCategoryString length] != 0){
       // cell.addFoodAllergyLabel.text = self.subCategoryString;
   // }
    NSString *str;
    if(indexPath.section < [self.namesFoodSubCategoryLabels count]){
      str = [self.namesFoodSubCategoryLabels objectAtIndex:indexPath.section];
    }
    int len=str.length;

    NSLog(@"Ch ###########################%u",len);
    len=floor(len/29);
    NSLog(@"Ch ##After Row##################%u",len);
    len++;
   // len++;
    /*
    CGRect frameCell = CGRectMake(cell.frame.origin.x, cell.frame.origin.y+newCellPosition, cell.frame.size.width, cell.frame.size.height);
    cell.frame = frameCell;
    */

    CGRect frame = CGRectMake(cell.addFoodAllergyLabel.frame.origin.x, cell.addFoodAllergyLabel.frame.origin.y, cell.addFoodAllergyLabel.frame.size.width, cell.addFoodAllergyLabel.frame.size.height*len);
    cell.addFoodAllergyLabel.numberOfLines = len;
    cell.addFoodAllergyLabel.frame = frame;

    CGRect frameMidBox = CGRectMake(cell.midMainRowBoxImageView.frame.origin.x, cell.midMainRowBoxImageView.frame.origin.y, cell.midMainRowBoxImageView.frame.size.width, cell.midMainRowBoxImageView.frame.size.height*len);

    cell.midMainRowBoxImageView.frame = frameMidBox;

    CGRect frameLowerCornerBox = CGRectMake(cell.lowerRowCornerImageView.frame.origin.x, cell.lowerRowCornerImageView.frame.origin.y+((len*26)-26), cell.lowerRowCornerImageView.frame.size.width, cell.lowerRowCornerImageView.frame.size.height);

    newCellPosition = cell.lowerRowCornerImageView.frame.origin.y+22;

    cell.lowerRowCornerImageView.frame = frameLowerCornerBox;
    CGRect frameButtonImage = CGRectMake(cell.addFoodAllergyButton.frame.origin.x, cell.addFoodAllergyButton.frame.origin.y+((len * 13)-13), cell.addFoodAllergyButton.frame.size.width, cell.addFoodAllergyButton.frame.size.height);

    cell.addFoodAllergyButton.frame = frameButtonImage;
    cell.addFoodCategoryImageView.frame = frameButtonImage;
    NSLog(@"Array&&&&&&&&&&&&&&&&%@",self.namesFoodSubCategoryLabels);
    NSLog(@"indexPath.row %u",indexPath.row);

    if(indexPath.section < [self.namesFoodSubCategoryLabels count]){
        cell.addFoodAllergyLabel.text = [self.namesFoodSubCategoryLabels objectAtIndex:indexPath.section];
        cell.addFoodCategoryImageView.image = [UIImage imageNamed:[self.imagesFoodCategories objectAtIndex:indexPath.section]];

    }
    //CGRect frame = CGRectMake(0, 0, 60, 60);
    //cell.frame=frame;

    cell.addFoodAllergyButton.tag = indexPath.section+1;
    cell.addFoodAllergyLabel.tag  = indexPath.section+1;
    [cell.addFoodAllergyButton addTarget:self action:@selector(addFoodAllergyButtonTapped:) forControlEvents:UIControlEventTouchUpInside];

    return cell;
}

-(CGFloat) tableView:(UITableView *) tableView1 heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    for(int i=0 ; i< [self.namesFoodSubCategoryLabels count] ; i++){

        NSString *str = [self.namesFoodSubCategoryLabels objectAtIndex:i];
        int len=str.length;

        NSLog(@"Ch ######heightForRow#####################%u",len);
        len=floor(len/29);
        len++;
        //len++;
        NSLog(@"Ch ##After heightForRow###################%u",len);
        return ((len*26)+11);

    }

    return 37;
} 
```

我正在动态更改背景、标签和部分高度，但无法动态处理部分 y。所以截图显示我的问题是管理 y 位置的部分边距，这在每两个部分之间变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-22T18:28:06.537

您可以根据某些条件更改 section 的值，例如

```
if(section==0)
    then "section1"
if(section==1)
    then "section2" 
```

因为部分从 0,1,2,3,4,5,6......n 开始

# php - 使用按钮/输入更改 posts_per_page

> ID：15197080
> 
> 赞同：0
> 
> 时间：2013-03-04T08:05:58.593
> 
> 标签：php, jquery, html, wordpress

我知道有一个 wordpress stackexchange，但是是的，没有人帮忙。

我想知道是否可以根据按钮表单更改从自定义循环发出的帖子数量？

到目前为止我收集的内容（测试值）：

```
<form method="post">
    <button class="amt-button" name="amt_per" value="1">1</button>
    <button class="amt-button" name="amt_per" value="3">3</button>
    <button class="amt-button" name="amt_per" value="0">0</button>
    <button class="amt-button" name="amt_per" value="-1">all</button>
</form>

<script>
jQuery(document).ready(function($) {
    // Postsperpage
    $('button.amt-button').click(function(){
        $(this).closest('form').submit();
    });
});
</script> 
```

还有 WP_Query（$args）：

```
$args = array(
    'post_type'=>'product',
    'posts_per_page' => $postperpage,

    'product_cat'=>'product',
    'product_tag'=>'apparel',

    'orderby'=>$orderby,
    'order'=>$order,
    'meta_key'=>$meta_key,
    'paged' => $paged
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:32:30.090

就像是：

```
$postsperpage = isset($_POST['amt_per'])? $_POST['amt_per']: -1; 
```

然后在你的`WP_Query`arg

```
'posts_per_page' => $postsperpage 
```

# c# - webbrowsercontrol 问题，清除缓存不起作用？

> ID：15197082
> 
> 赞同：1
> 
> 时间：2013-03-04T08:05:59.850
> 
> 标签：c#, pdf, webbrowser-control, clear-cache

我正在使用 webbrowsercontrol 来显示本地存储的 .pdf。在按下按钮时，我希望网络浏览器显示一个空页面/什么都没有，并且我想将 .pdf 移动到另一个文件夹。首先，我在移动之前尝试导航到“”，但我的 .pdf 被另一个进程使用。谷歌告诉我，我可能需要清除浏览器的缓存才能移动它。我使用此处找到的代码这样做了：http: [//www.gutgames.com/post/Clearing-the-Cache-of-a-WebBrowser-Control.aspx](http://www.gutgames.com/post/Clearing-the-Cache-of-a-WebBrowser-Control.aspx)，我什至尝试了评论 nr 2 中的替代代码行，但这些都不能让我移动我的.pdf，它仍然被另一个进程使用。

我可以/应该做什么才能移动文件？我忘记了什么吗？

在第二个 File.Move 是我得到错误的地方：

```
webBrowser1.Navigate("");
WebBrowserHelper.ClearCache();
if (calConv != "")
{
    File.Move(forsDir + calConv + ".cal", forsDir + calConv.Replace("ToDo\\", "") + ".cg4");
    File.Move(forsDir + calConv + ".pdf", forsDir + calConv.Replace("ToDo\\", "") + ".pdf");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:22:22.353

这是如何在不使用 web 控件的情况下显示 PDF，而是使用 Adob​​e Reader：

[从http://www.adobe.com/devnet/acrobat/downloads.html](http://www.adobe.com/devnet/acrobat/downloads.html)下载 Acrobat SDK

在您的项目中添加对来自 SDK 的两个 dll 的引用 - AxInterop.AcroPDFLib.dll 和 Interop.AcroPDFLib.dll

在表单的构造函数中添加 Adob​​e 预览器控件：

```
// Check if the user has Adobe Reader installed, if not you could show a link to Adobe Reader installer
if (Type.GetTypeFromProgID("AcroPDF.PDF") == null)
{
    pnlGetAdobe.Visible = pnlGetAdobe.Enabled = true;
}
else
{
    try
    {
        // Initialize the Adobe control
        axAcroPDF1 = new AxAcroPDF();
        axAcroPDF1.Dock = DockStyle.Fill;
        axAcroPDF1.Enabled = true;
        axAcroPDF1.Location = new Point(0, 25);
        axAcroPDF1.Name = "axAcroPDF1";
        axAcroPDF1.OcxState = (AxHost.State)new ComponentResourceManager(typeof(JasperPdfReport)).GetObject("axAcroPDF1.OcxState");
        axAcroPDF1.Size = new Size(634, 393);
        axAcroPDF1.TabIndex = 1;
        pnlCenter.Controls.Add(axAcroPDF1); // Add it to a container or instead directly to your form with this.Controls.Add(axAcroPDF1)
        axAcroPDF1.BringToFront();
    }
    catch (COMException cex)
    {
        axAcroPDF1.Dispose();
        axAcroPDF1 = null;
        MessageBox.Show(cex.ToString());
    }
    catch (Exception ex)
    {
        axAcroPDF1.Dispose();
        axAcroPDF1 = null;
        MessageBox.Show(ex.ToString());
    }
} 
```

最后将您的 PDF 文件加载到控件中：

```
if (axAcroPDF1 != null && File.Exists(pdfFilename))
{
    axAcroPDF1.setShowToolbar(false);
    axAcroPDF1.setView("FitH");
    axAcroPDF1.setLayoutMode("SinglePage");
    // Load the PDF into the control
    axAcroPDF1.LoadFile(pdfFilename);
    axAcroPDF1.src = pdfFilename;

    // Show it
    axAcroPDF1.Show();
    axAcroPDF1.Refresh();
} 
```

# django - 如何使用 Django 渲染基于类的 python 文件？

> ID：15197089
> 
> 赞同：0
> 
> 时间：2013-03-04T08:06:22.777
> 
> 标签：django, python-2.7

我正在努力学习 Django。我有一个包含类的python程序。所有使用python类的例子都继承了Model.model。我的课不需要任何数据库。任何人都可以帮助我如何在 django 中为这种特殊情况设置 urls.py 吗？

到目前为止我所做的是我已经导入了类，以及类中的方法，我必须从中显示我的值。但它总是向我显示一些错误。

这是我在 urls.py 中所做的：

```
 1\. from mysite.to_twitter_streaming import StdOutListener 
 2\. url(r'^temp/$', StdOutListener().text_extract) 
```

这个 StdOutListener 是类，而 text_extract 是具有我想要打印的值的函数。

我用它来打印：

```
 return render_to_response('TwitterApi.html', {'link': key, 'count':self.counter}) 
```

我得到的错误是：

```
 1\. TypeError at /temp/ 
 2\. expected string or buffer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:30:03.020

好的，在你的 urls.py

更改格式

```
 url(r'^temp/$', text_extract), 
```

我假设你有`text_extract` 你的看法

在你的`views.py`

```
def text_extract(request):
    # do your stuff

    return render_to_response('TwitterApi.html', {'link': key, 'count':self.counter}) 
```

# jquery - 使用 jquery 计时事件执行

> ID：15197091
> 
> 赞同：0
> 
> 时间：2013-03-04T08:06:38.273
> 
> 标签：jquery, events, time, execute

如何计时 JQuery 函数或事件的执行？我不是指在超时后执行事件或函数。我想要类似的东西，在 20 秒内（而不是 20 秒后）捕获关键事件。我尝试了几个想法，但没有按照我想要的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:32:21.350

尝试

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
    var timer = 0;

    $(function()
    {

        if(timer > -1 && timer <= 20)
        {
            timer = setTimeout(function()
            {
                timer = timer + 1;
                alert(timer);
            }, 1);
        }

    });

</script> 
```

如果循环失败后，您可以`unbind`事件或任何您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:46:06.333

您可以使用[`setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

鉴于标记

```
<p>Interval: <span id="interval"></span></p>
<p>Counter: <span id="counter"></span></p>
<button id="start">Start</button> 
```

你可以做这样的事情来捕捉`keyup`s 20 秒

```
$(function(){
    var counter = 0;
    $("#start").click(function(){
        counter=0;
        var startTime = new Date().getTime() / 1000;

        $("body").on("keyup", function(){
            counter++;
            $("#counter").text(counter);
        });
        var intId = setInterval(function(){
            currentTime = new Date().getTime() / 1000;
            timeInterval = currentTime - startTime;
            $("#interval").text(timeInterval);
            if (timeInterval >= 20) {
                $("body").off("keyup");
                clearInterval(intId);
            }
        },1000);
    });
}); 
```

这是[jsFiddle](http://jsfiddle.net/mpFBP/2/)

# highcharts - HighCharts：点击图例时线条系列消失

> ID：15197093
> 
> 赞同：2
> 
> 时间：2013-03-04T08:06:40.670
> 
> 标签：highcharts

我已经使用 Column 和 Line 系列创建了图表，我正在使用 chart.addSeries 动态添加系列。

问题：单击线系列图例时，线系列消失。第二次单击它时，只有绘图点可见，而线条不可见。

我收到以下 JS 异常：

行：65 字符：237 代码：0 错误消息：对象不支持属性或方法“加入” URL：[http ://pfmonline.fidelitypfm.com:8098/moneycenter/js/js/rbc/highcharts.js?d =1592588911](http://pfmonline.fidelitypfm.com:8098/moneycenter/js/js/rbc/highcharts.js?d=1592588911)

下面是代码：

```
chart = new Highcharts.Chart({
        chart: {
            renderTo: 'spendingChart',
            width: spendingChart.width*0.8,
            height: spendingChart.height*0.8,
            plotBorderColor:'#000000',
            plotBorderWidth:1
        },
        xAxis: {
            categories: subCategories,
            labels: {
                rotation: 0
            }
        },
        credits: {
            enabled: false
        },
        tooltip: {
            borderColor: '#000',
            backgroundColor: '#FFF',
            borderRadius: 0,
            borderWidth: 1,
            formatter: function() {
                var s;
                s = ''+this.series.name+', '+this.x  +', $'+Highcharts.numberFormat(this.y,2,'.',',');
                return s;
            }
        },
        title: {
            text: ''
        },
        yAxis: {
            lineWidth: 1,
            title: {
                text: ''
            }
        },

        series: []
    });
    for(var i=0;i<data[index].drilldown.length;i++){
        if(data[index].drilldown[i].name == "Actual")
            chtType = "column";
        else
            chtType = "spline";
        subCategories = [];
        versionsData = [];
        var color = "";
        for (var j = 0; j < data[index].drilldown[i].data.length; j++) {
            versionsData.push(data[index].drilldown[i].data[j].y);
            subCategories.push(data[index].drilldown[i].categories[j]);
            color  = (data[index].drilldown[i].data[j].color);
        }
        chart.xAxis[0].setCategories(subCategories, false);
        chart.addSeries({type:chtType, name :data[index].drilldown[i].name, data : versionsData ,color:color},'true');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:19:36.450

我有同样的问题，点击图例时线条消失并找到了解决方案，显然这是一个涉及 2.2.5 版本和 jQuery 1.8 的错误。他们已经修复了它，所以如果您升级到最新的 2.3.5，它将被修复。

参考：[https](https://github.com/highslide-software/highcharts.com/issues/1189) ://github.com/highslide-software/highcharts.com/issues/1189和[https://github.com/highslide-software/highcharts.com/issues/1181](https://github.com/highslide-software/highcharts.com/issues/1181)

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:06:19.297

我希望你使用的是 IE。

由于您使用数组，因此请检查是否有任何尾随**逗号**。

如果您的 IE 版本**< 8**。检查IE模式。如果您处于怪癖模式。

```
var test = [
["element1"],
["element2"],
["element3"],
["element4"],
["element5"],
]; 
```

删除尾随**`,`**.

或者，您可以通过记录或警告**`length`**.

```
console.log(test.length); 
```

或者

```
alert(test.length); 
```

您将观察到的长度将是 6 而不是 5。

# c# - 使用 System.Data.Linq.Table 调用方法 参数抛出错误：推断类型参数

> ID：15197096
> 
> 赞同：0
> 
> 时间：2013-03-04T08:06:45.600
> 
> 标签：c#, entity-framework

这是我的方法：

```
 private bool IsCorrect<T>(System.Data.Linq.Table<T> table) where T : class
    {
        return true;
    }

    private bool CheckIfCorrect()
    {
        return IsCorrect(db.myTable);
    }

    private bool CheckIfOk()
    {
        return IsCorrect(db.myOtherTable);
    } 
```

其中 myTable 是数据库表，而 db 是 ObjectContext（它是实体模型）。

我收到语法错误：`IsCorrect<T>(System.Data.Linq.Table<T>`无法从用法中推断出 method 的类型参数。尝试明确指定类型参数。如何调用这个方法？

# php - 正则表达式将字符串与 3/4 子模式匹配

> ID：15197099
> 
> 赞同：1
> 
> 时间：2013-03-04T08:06:51.283
> 
> 标签：php, regex, preg-match

我有以下正则表达式：

```
#^(?=.{8,20})(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\W).*$# 
```

此正则表达式匹配包含至少一个组 az AZ 0-9 和特殊字符的字符串。

是否可以编写一个正则表达式来匹配 4 个子模式中的至少 3 个（一个 preg_match，而不是多个）？

例如，字符串应匹配 AZ、0-9 和 az**或**AZ、0-9 和特殊字符。但也应该允许 4/4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:14:33.407

当然，你只能有四分之三的条件，只需写一个包含所有可能性的替代：

```
/^(?:(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])|(?=.*[a-z])(?=.*[A-Z])(?=.*\W)|...|...|...).{8,20}$/ 
```

我只写了2个替代方案，太复杂了。您需要自己填写`...`零件。

**我建议您不要使用单个正则表达式来执行此操作。它变得复杂并且容易出错。分别测试条件并计算匹配的数量。**

# iphone - 使用核心数据的应用程序崩溃

> ID：15197100
> 
> 赞同：1
> 
> 时间：2013-03-04T08:06:51.927
> 
> 标签：iphone, ios, core-data, crash, nsnumber

我正在使用核心数据来保存数据。我的应用程序第一次保存数据时没有任何问题，但第二次应用程序在`[self.managedObjectContext save:nil];`崩溃日志中在线崩溃

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber localizedCaseInsensitiveCompare:]: unrecognized selector sent to instance 0x98dda90'
*** First throw call stack:
(0x1e6e012 0x179ee7e 0x1ef94bd 0x1e5dbbc 0x1e5d94e 0xeeae92 0xf645ee 0x15ca8f5 0x15c5785 0x15c8061 0xf53dc9 0x1ec80c5 0x1e22efa 0xe88482 0x14da5f3 0x1573e5f 0x14d5a26 0x14d916e 0x77ca 0x7d4e 0x17b2705 0x3dd920 0x619b24 0x17b2705 0x3dd920 0x3dd8b8 0x49e671 0x49ebcf 0x49dd38 0x40d33f 0x40d552 0x3eb3aa 0x3dccf8 0x1dc9df9 0x1dc9ad0 0x1de3bf5 0x1de3962 0x1e14bb6 0x1e13f44 0x1e13e1b 0x1dc87e3 0x1dc8668 0x3da65c 0x3efd 0x2425)
libc++abi.dylib: terminate called throwing an exception 
```

我正在使用以下代码来保存数据

```
- (IBAction)save:(id)sender {
    Projects *projects = [NSEntityDescription insertNewObjectForEntityForName:@"Projects" inManagedObjectContext:self.managedObjectContext];
    NSLog(@"object id %@", projects.objectID);
    projects.title = projectTitleTxtFld.text;
    projects.descProject = descriptionTxtView.text;
    projects.type = projectType.text;
    projects.recID = [self generateRandom];
    NSLog(@"rec id %@", projects.recID);
    [self.managedObjectContext save:nil]; //here my app crashes
    NSLog(@"title %@", projects.title);
 }

-(NSNumber*)generateRandom
{
    int number = arc4random();
    if (number < 0) {
        number = number * -1;
    }
    NSNumber *newNumber = [NSNumber numberWithInt:number];
    return newNumber;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:12:59.073

你好我刚遇到这个问题。我将问题设置为在左滑动时 0% 兼容，在右滑动时设置为 100%。在核心数据中，我有一个属性 compliantPercentage 的 NSNumber 数据类型。

我使用 [NSNumber numberWithInt:100] 将一个简单的 int 数字包装到 NSNumber 中

我的视图是一个带有核心数据的表视图控制器，因此是获取的结果控制器。代码片段是：

```
CheckSectionQuestion *theQuestion;
theQuestion = [self.fetchedResultsController objectAtIndexPath:indexPath];
theQuestion.compliantPercentage=[NSNumber numberWithInt:100];
theQuestion.completed=[NSNumber numberWithBool:YES]; 
```

现在，虽然这更新了表格视图并且看起来它已经更新了核心数据，但有些事情没有奏效。如果我使用导航控制器返回上一个视图控制器，然后返回此视图控制器以解决任何问题 - 不仅仅是我刚刚更新的那个我得到你提到的错误。

解决方案？

非常简单 - 显式保存更改。

IE

```
CheckSectionQuestion *theQuestion;
theQuestion = [self.fetchedResultsController objectAtIndexPath:indexPath];

theQuestion.compliantPercentage=[NSNumber numberWithInt:100];
theQuestion.completed=[NSNumber numberWithBool:YES];

//***** make sure CD saves the changes
NSError * error;
if ([theQuestion.managedObjectContext  save:&error]) {
      NSLog(@"saved");
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:55:44.447

它实际上是因为您尝试插入核心数据的数据类型错误。从错误日志中，我觉得有一些数字分配给了 coredata 属性，它是一个字符串。请检查您插入的所有数据

```
NSLog(@"class %@",[object class]); 
```

并检查您插入的核心数据字段数据类型和对象数据类型是否相同

# html - Eclipse IDE 中出现意外的 HTML/JSP 警告

> ID：15197102
> 
> 赞同：4
> 
> 时间：2013-03-04T08:06:54.027
> 
> 标签：html, eclipse, jsp

我对 HTML 比较陌生。我最初在一个 .html 文档中工作，该文档在 Eclipse 中没有给我任何异常警告。但是，我将其更改为 JSP，添加了一些功能，现在我似乎收到了某些警告，例如

```
Multiple annotations found at this line:
- Invalid location of tag (td).
- Undefined attribute name 
 (width). 
```

对于诸如

```
<td width="300"><label for="select">Based on:</label>
    <form:select path="basedOn">
        <form:option value="Event_Name" label="Event Name"/>
        <option value="Product_Name">Product Name</option>
    </form:select>
</td> 
```

即使当我在浏览器中尝试它时它似乎工作正常。

我确实看到了类似的 SO 帖子，他们建议这可能是因为我的 eclipse 版本可能已经过时，但这不是这里的问题；日食是最新的。

这是我如何编码 JSP 的问题还是这是一个已知问题？在任何一种情况下，我都可以以任何方式抑制警告吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T08:08:26.270

1.  右键单击您的项目，Properties -> Validation（或者您可以转到 Window -> Preferences -> Validation 全局执行此操作）。
2.  取消选中“构建”以进行 HTML 语法验证，或者单击“设置”下的省略号并添加规则以排除特定文件名/扩展名/你有什么。

这个警告对你没有问题。

# sharepoint-2013 - SharePoint 2013 自定义操作中的当前列表视图

> ID：15197104
> 
> 赞同：0
> 
> 时间：2013-03-04T08:06:55.037
> 
> 标签：sharepoint-2013, sharepoint-clientobject

我正在尝试为 SharePoint (Office 365) 创建自定义列表操作，我需要获取当前列表视图。但是，如果我添加功能区操作，我在查找当前选定的列表视图时会遇到一些问题。我的试验：

a) 最好有一些具有当前视图 ID 的 url 令牌（如 {View}），但它看起来不存在。

b) 我想从源 url 中找到选定的视图，但是如果我将 Source={Source} 参数添加到自定义操作中，我将 Source 解析为：Source= [https://mysite.sharepoint.com/_layouts/ 15/commandui.ashx?ver=%2D1037522208&lcid=1033&qt=commandhandlers](https://mysite.sharepoint.com/_layouts/15/commandui.ashx?ver=%2D1037522208&lcid=1033&qt=commandhandlers) （虽然我希望像[https://mysite.sharepoint.com/_layouts/15/start.aspx#/Lists/My%20List/AllItems.aspx ?InitialTabId=Ribbon%2EList&VisibilityContext=WSSTabPersistence](https://mysite.sharepoint.com/_layouts/15/start.aspx#/Lists/My%20List/AllItems.aspx?InitialTabId=Ribbon%2EList&VisibilityContext=WSSTabPersistence) )

C） .. ？

任何想法如何获取当前选定的列表视图？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T07:55:09.827

看起来有不止一种方法可以为每个列表创建自定义操作。我的方法是删除 RegistrationType 和 RegistrationId：

```
<CustomAction 
      Id="65695319-4784-478e-8dcd-4e541cb1d682.CustomAction"
      Location="CommandUI.Ribbon"
      Sequence="10001"
      Title="Invoke custom action"> 
```

另一种方法是将自定义操作注册到内容类型 0x01：

```
<CustomAction 
       Id="65695319-4784-478e-8dcd-4e541cb1d682.CustomAction" 
       Location="CommandUI.Ribbon"    
       RegistrationType="ContentType"
       RegistrationId="0x01"
       Sequence="10001" 
       Title="Invoke custom action"> 
```

这样我得到了预期的结果

# android - 将动画转换为中心屏幕

> ID：15197107
> 
> 赞同：4
> 
> 时间：2013-03-04T08:07:07.173
> 
> 标签：android, android-animation

我有`RelativeLayout`一个`ImageView`里面有一个。`ImageView`在布局内随机定位。我正在尝试应用翻译动画，它将`ImageView`从当前位置翻译`(x,y)`到屏幕中心`(x,y)`。

我已经尝试过类似下面的代码，但它没有解决问题。

```
<translate 
    android:fromXDelta="0%"
    android:toXDelta="50%"
    android:fromYDelta="0%"
    android:toYDelta="50%"
    android:duration="500"/> 
```

帮助表示赞赏；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T15:22:54.607

我的代码：明白...

点windowSize = new Point();

```
 int totalWidth;

    //obtem o tamanho da tela que estamos trabalhando no momento
    if(Build.VERSION.SDK_INT > 12) {

        windowManager.getDefaultDisplay().getSize(windowSize);
        totalWidth = windowSize.x;
    }
    else
        totalWidth = windowManager.getDefaultDisplay().getWidth();

    //vamos animar ao centro
    final int totalWidthFinal = ((totalWidth / 2)  - (int)getDimension(R.dimen.fab_actions_spacing)) * -1;
    mFloatingActionButton.post(new Runnable() {

        @Override
        public void run() {

            int translationX =  totalWidthFinal;

            ViewPropertyAnimator.animate(mFloatingActionButton).setDuration(300).translationX(translationX);
        }
    }); 
```

# java - 如何创建ear文件，并在其中包含war和jar文件

> ID：15197114
> 
> 赞同：19
> 
> 时间：2013-03-04T08:07:42.043
> 
> 标签：java, jakarta-ee

我正在尝试从命令提示符创建一个 EAR 文件。我用过

```
jar -cvf myServletWAR.ear . 
```

但我的问题是，我怎样才能让这个 EAR 文件在其中包含 WAR 文件和 JAR 文件？

我需要单独创建war文件并包含在ear文件中吗？

我不能为此使用 ANT 文件，因为这个项目的限制很少。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T08:15:22.857

我的 EAR 文件之一具有如下结构：

```
app.ear
  - APP-INF
    - lib
      // libraries (.jar) here
  - META-INF
    - MANIFEST.MF
    - weblogic-application.xml
  - module1.war
  - customlib.jar 
```

此存档正在部署到 WebLogic 10.3 上。

记住 .ear 只是一个 ZIP 文件，因此您可以随时以这种方式创建它，尽管它看起来很乱。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T09:04:27.960

检查 jar cmd 是否正常工作，如果是，则创建类文件和描述符等的 jar。

在那之后`jar -cvf <<earname>> <<files want to be in the ear >>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T08:10:06.360

你能试试这个：

```
jar -xvf myServletWAR.ear 
```

您也可以参考：

[如何将 WAR 文件添加到现有的 EAR 文件中？](https://stackoverflow.com/questions/12355974/how-to-add-a-war-file-into-an-existent-ear-file)以及[如何在一个 .ear 文件中有两个 .war 文件？](https://stackoverflow.com/questions/2220891/how-to-i-have-two-war-files-within-one-ear-file)

您必须在 ear 文件的 application.xml 中添加这些 EAR 文件引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-15T19:00:34.347

如果您同时生成了客户端和 EJB，它们会自动打包到企业归档文件 (.ear) 中，您不需要这样做。否则：

*   将 EJB 的 .jar 文件打包到应用程序的 .ear 中。为此，请使用类似于以下内容的 jar 命令：

> ```
> jar -cvf myApplication .ear myService.jar 
> ```

如果您有一个客户端 .war 文件，您可以以相同的方式将其添加到 .ear 文件中。

*   使用
    应用程序服务器的工具或通过复制和编辑示例来创建部署描述符 application.xml，
    如下所示：

*   找到一个示例 .ear，它位于示例目录中

> ```
> mapdemo/mapdemo/repos/myService.deploy/JMapServ-WL.ear 
> ```

*   使用以下 jar 命令从 .ear 文件中提取描述符 application.xml：

> jar -xvf JMapServ-WL.ear META-INF/application.xml

*   复制 application.xml 描述符并对其进行编辑，将 JMapServ 替换为 .jar 文件的名称。如果您将 .war 文件的名称添加到 .ear 文件中，您还可以添加该名称。

*   将描述符放在包含 .ear 文件的目录的 meta-inf 子目录中。

*   使用类似于以下的 jar 命令将描述符打包到您的 .ear 文件中：

> ```
> jar -uvf myService.ear META-INF/application.xml 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-10T12:49:40.913

`.jar`归档到一个`.ear`

```
jar -cvf myApplication.ear myService.jar 
```

`.war`文件，您可以以相同的方式将其添加到`.ear`文件中。

请参阅[http://supportline.microfocus.com/Documentation/books/sx51/thdpoy10.htm](http://supportline.microfocus.com/Documentation/books/sx51/thdpoy10.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-13T07:09:00.083

如果您想从命令行创建耳朵，您可以尝试以下选项。

选项 1\. 使用 ant 构建并使用 ear 任务。[按照关于蚂蚁耳朵任务使用](https://stackoverflow.com/questions/1267300/how-do-i-create-an-ear-file-with-an-ant-build-including-certain-files)的stackoverflow问题中所述配置此耳朵任务

注意：如今，基于 Maven 的构建比 ant 更受欢迎。

选项 2\. 如果您可以使用 maven，[请配置您的模块并使用 maven ear 插件](http://maven.apache.org/plugins-archives/maven-archetype-plugin-1.0-alpha-7/examples/j2ee-simple.html)生成一个 ear。下面的命令将能够生成耳朵。

```
mvn clean package 
```

[有关配置 war, jars for an ear](https://stackoverflow.com/questions/1134894/maven2-best-practice-for-enterprise-project-ear-file)的更多信息，请参阅有关 Java EE 项目的 maven 问题。

# kinect - 使用 C# 在 Kinect 中访问手腕位置

> ID：15197122
> 
> 赞同：0
> 
> 时间：2013-03-04T08:08:08.153
> 
> 标签：kinect

抱歉，如果这很明显，但是我如何能够在 C# 中访问 Kinect 的腕关节位置？真的会这么简单吗：

```
 SkeletonPoint leftWrist = skeleton.Joints[JointType.WristLeft].Position;
 SkeletonPoint rightWrist = skeleton.Joints[JointType.WristRight].Position; 
```

我会打电话给

```
leftWrist.X.toString 
```

检查价值，对吧？

但是 for 循环会是什么样子继续跟踪每一帧中的关节？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:53:20.990

是的，您可以跟踪现役球员的手腕位置。所有可用于跟踪的关节都存在于[Skeleton.Joints](http://msdn.microsoft.com/en-us/library/microsoft.kinect.skeleton.joints.aspx)属性中（它本身就是一个“JointCollection”）。

![在此处输入图像描述](../Images/6fddefa107fdbbb72903b43e34cb7d6e.png)

微软在这里提供了一个跟踪骨架的教程：http: [//msdn.microsoft.com/en-us/library/jj131025.aspx](http://msdn.microsoft.com/en-us/library/jj131025.aspx)

返回的值属于[Joint](http://msdn.microsoft.com/en-us/library/microsoft.kinect.joint.aspx)类型。

# ruby - Ruby 和 Swig：TypeError：无法将 nil 转换为字符串

> ID：15197131
> 
> 赞同：0
> 
> 时间：2013-03-04T08:08:59.133
> 
> 标签：ruby, swig, libqxt

作为问题的后续：[Ruby with Swig: NameError: uninitialized constant](https://stackoverflow.com/questions/15184563/ruby-with-swig-nameerror-uninitialized-constant)

我正在尝试在 ruby​​ 中使用[Qxt 库](http://dev.libqxt.org/libqxt/wiki/Home)（即[QxtGlobalShortcut](http://libqxt.bitbucket.org/doc/tip/qxtglobalshortcut.html)）。

正如所建议的那样：[我如何从](https://stackoverflow.com/questions/1542520/how-can-i-call-c-functions-from-within-ruby)创建[swig](http://www.swig.org/)包装器的 ruby​​ 中调用 C++ 函数，但是当尝试使用生成的库时，我遇到了错误：

```
irb(main):005:0> shortcut = QxtGlobalShortcut::QxtGlobalShortcut.new ui
TypeError: can't convert nil into String
    from (irb):5:in `initialize'
    from (irb):5:in `new'
    from (irb):5
    from /usr/bin/irb:12:in `<main>' 
```

我的完整 irb 会话输出：

```
$ irb
irb(main):001:0> require 'Qt4'
=> true
irb(main):002:0> require 'QxtGlobalShortcut'
=> true
irb(main):003:0> app = Qt::Application.new ARGV
=> #<Qt::Application:0x00000002e02598 objectName="irb">
irb(main):004:0> ui = Qt::Widget.new
=> #<Qt::Widget:0x00000002f9e2a8 objectName="", x=0, y=0, width=640, height=480>
irb(main):005:0> shortcut = QxtGlobalShortcut::QxtGlobalShortcut.new ui
TypeError: can't convert nil into String
    from (irb):5:in `initialize'
    from (irb):5:in `new'
    from (irb):5
    from /usr/bin/irb:12:in `<main>' 
```

我使用以下内容在 swig 中生成包装器：

由于[Swig](https://gist.github.com/typekpb/5080766)无法解析 qxtglobalshortcut.h 的内容，因此我创建了包含以下内容的简化版本（包含我需要使用的所有 API）：

```
#ifndef QXTGLOBALSHORTCUT_H
#define QXTGLOBALSHORTCUT_H

#include "qxtglobal.h"
#include <QObject>
#include <QKeySequence>

class QxtGlobalShortcut : public QObject
{

public:
    explicit QxtGlobalShortcut(QObject* parent);
    explicit QxtGlobalShortcut(const QKeySequence& shortcut, QObject* parent = 0);
    virtual ~QxtGlobalShortcut();

    QKeySequence shortcut() const;
    bool setShortcut(const QKeySequence& shortcut);

    bool isEnabled() const;

};

#endif // QXTGLOBALSHORTCUT_H 
```

其余的几乎是标准的：

```
$ cat QxtGlobalShortcut.i
%module QxtGlobalShortcut
%{
/* Includes the header in the wrapper code */
#include "/usr/include/QxtGui/QxtGlobalShortcut"
%}

/* Parse the header file to generate wrappers */
%include "qxtglobalshortcut.h"

$ cat extconf.sh
require 'mkmf'
dir_config('QxtCore')
dir_config('QxtGui')
dir_config('QtCore')
dir_config('QtGui')
create_makefile('QxtGlobalShortcut')

$ cat wrapper.sh
swig -c++ -ruby QxtGlobalShortcut.i
ruby extconf.rb --with-QxtCore-include=/usr/include/QxtCore/ --with-QxtGui-include=/usr/include/QxtGui/ --with-QtCore-include=/usr/include/QtCore/ --with-QtGui-include=/usr/include/QtGui/
make 
sudo make install 
```

对于 swig 生成的输出，请参阅：[QxtGlobalShortcut_wrap.cxx](https://gist.github.com/typekpb/5080776)。

知道如何解决吗？谢谢。

**更新：**

基于 @PascalHurni 扩展日志记录差异提供 irb 输出：

```
$ irb
irb(main):001:0> require 'Qt4'
=> true
irb(main):002:0> require 'QxtGlobalShortcut'
=> true
irb(main):003:0> app = Qt::Application.new ARGV                                                                                                                   
=> #<Qt::Application:0x00000001d79d98 objectName="irb">                                                                                                           
irb(main):004:0> ui = Qt::Widget.new                                                                                                                              
=> #<Qt::Widget:0x00000001f16818 objectName="", x=0, y=0, width=640, height=480>                                                                                  
irb(main):005:0> shortcut = QxtGlobalShortcut::QxtGlobalShortcut.new ui                                                                                           
_wrap_new_QxtGlobalShortcut ENTERING with 0 arguments                                                                                                             
TypeError: can't convert nil into String
    from (irb):5:in `initialize'
    from (irb):5:in `new'
    from (irb):5
    from /usr/bin/irb:12:in `<main>' 
```

此外，我看到 argc 似乎有问题，因此发布 make 输出（不确定是否有帮助）：

```
creating Makefile
g++ -I. -I/usr/include/x86_64-linux -I/usr/include/ruby/backward -I/usr/include -I. -I/usr/include/QtGui/ -I/usr/include/QtCore/ -I/usr/include/QxtGui/ -I/usr/include/QxtCore/    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -mtune=generic -fPIC -m64 -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -mtune=generic -o QxtGlobalShortcut_wrap.o -c QxtGlobalShortcut_wrap.cxx
QxtGlobalShortcut_wrap.cxx: In function ‘void SWIG_Ruby_define_class(swig_type_info*)’:
QxtGlobalShortcut_wrap.cxx:1517:9: warning: variable ‘klass’ set but not used [-Wunused-but-set-variable]
QxtGlobalShortcut_wrap.cxx: In function ‘void SWIG_InitializeModule(void*)’:
QxtGlobalShortcut_wrap.cxx:2206:21: warning: statement has no effect [-Wunused-value]
QxtGlobalShortcut_wrap.cxx: In function ‘VALUE _wrap_new_QxtGlobalShortcut(int, VALUE*, VALUE)’:
QxtGlobalShortcut_wrap.cxx:1973:75: warning: ‘argc’ is used uninitialized in this function [-Wuninitialized]
rm -f QxtGlobalShortcut.so
g++ -shared -o QxtGlobalShortcut.so QxtGlobalShortcut_wrap.o -L. -L/usr/lib64 -L. -Wl,-z,relro -rdynamic -Wl,-export-dynamic  -m64  -lruby  -lpthread -lrt -ldl -lcrypt -lm   -lc
/usr/bin/mkdir -p /usr/local/lib64/ruby/site_ruby
/usr/bin/install -c -m 0755 QxtGlobalShortcut.so /usr/local/lib64/ruby/site_ruby 
```

有任何想法吗？

**更新 2：**

基于 @PascalHurni 扩展日志记录差异（版本 2）提供 irb 输出：

```
$ irb
irb(main):001:0> require 'Qt4'
=> true
irb(main):002:0> require 'QxtGlobalShortcut'
=> true
irb(main):003:0> app = Qt::Application.new ARGV 
=> #<Qt::Application:0x000000017b4e30 objectName="irb">
irb(main):004:0> ui = Qt::Widget.new
=> #<Qt::Widget:0x00000001952940 objectName="", x=0, y=0, width=640, height=480>
irb(main):005:0> shortcut = QxtGlobalShortcut::QxtGlobalShortcut.new ui
_wrap_new_QxtGlobalShortcut ENTERING with 1 arguments
_wrap_new_QxtGlobalShortcut before ptr convert for _wrap_new_QxtGlobalShortcut__SWIG_0 TYPE=12
TypeError: can't convert nil into String
    from (irb):5:in `initialize'
    from (irb):5:in `new'
    from (irb):5
    from /usr/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:19:24.303

这个比较棘手。我没有看到对字符串的任何引用，所以 TypeError 真的很奇怪。

[尽管如此，您可以使用此要点https://gist.github.com/phurni/5081001](https://gist.github.com/phurni/5081001)修补生成的 .cxx 文件。如您所见，它只是添加了一堆`printf()`来跟踪对`#initialize`. 你可以按照这个模式来追踪它，也许用一些更多的信息来编辑你的问题，或者更新的 irb 会话（显示跟踪）。

**更新**

简而言之，您生成的 Qxt 库和您使用的 Qt ruby​​ 库似乎不是由同一版本的 SWIG 生成的。这对于分离的库来说不是问题，但是因为您的 Qxt 库将与 Qt 库互操作（您将作为 Qt 包装对象的 ui 参数传递给您自己的 Qxt 包装对象），两者都必须由相同的版本包装（至少是未成年人？） SWIG。

回到技术细节：引发的异常来自`SWIG_ConvertPtr`对 1984 行的调用，该调用又调用`SWIG_Ruby_MangleStr`. 此函数尝试获取代码`@__swigtype__`中传递的参数的实例变量`ui`。这是为了能够对传递的参数进行类型检查（在 C++ 端）。似乎这个变量是`nil`（因为它来自 Qt 包装不同而没有使用这样的变量），并且`SWIG_Ruby_MangleStr`WANTS 中的代码将其转换为字符串。

### 结论：

我不知道一种方法来确定哪个版本的 SWIG 包装了现有的 lib，如果你找到一个，你可能会得到一个包装 Qt lib 的版本并使用该版本来包装你的 Qxt lib。

另一种方法是使用已知版本的 SWIG 生成 Qt 库，并为您的 Qxt 库执行相同的操作。

# r - 获取连续日值的总和

> ID：15197133
> 
> 赞同：4
> 
> 时间：2013-03-04T08:09:05.863
> 
> 标签：r, sum, dataframe

我有如下大数据集：

```
Date       rain code
2009-04-01  0.0 0 
2009-04-02  0.0 0 
2009-04-03  0.0 0 
2009-04-04  0.7 1 
2009-04-05 54.2 1  
2009-04-06  0.0 0 
2009-04-07  0.0 0 
2009-04-08  0.0 0 
2009-04-09  0.0 0 
2009-04-10  0.0 0 
2009-04-11  0.0 0 
2009-04-12  5.3 1  
2009-04-13 10.1 1  
2009-04-14  6.0 1  
2009-04-15  8.7 1  
2009-04-16  0.0 0 
2009-04-17  0.0 0 
2009-04-18  0.0 0 
2009-04-19  0.0 0 
2009-04-20  0.0 0 
2009-04-21  0.0 0 
2009-04-22  0.0 0 
2009-04-23  0.0 0 
2009-04-24  0.0 0 
2009-04-25  4.3 1  
2009-04-26 42.2 1  
2009-04-27 45.6 1  
2009-04-28 12.6 1  
2009-04-29  6.2 1  
2009-04-30  1.0 1 
```

当代码为“1”时，我试图计算雨的连续值的总和，我需要分别计算它们的总和。例如，我想从 to 获取雨值的`2009-04-12`总和`2009-04-15`。所以我试图找到方法来定义代码何时等于 1 并且有连续的雨值我得到它们的总和。

对上述问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:25:10.883

一种直接的解决方案是使用`rle`. 但我怀疑那里可能有更多“优雅”的解决方案。

```
# assuming dd is your data.frame
dd.rle <- rle(dd$code)
# get start pos of each consecutive 1's
start  <- (cumsum(dd.rle$lengths) - dd.rle$lengths + 1)[dd.rle$values == 1]
# how long do each 1's extend?
ival   <- dd.rle$lengths[dd.rle$values == 1]
# using these two, compute the sum
apply(as.matrix(seq_along(start)), 1, function(idx) {
    sum(dd$rain[start[idx]:(start[idx]+ival[idx]-1)])
})

# [1]  54.9  30.1 111.9 
```

**编辑：**`rle`使用and的更简单的方法`tapply`。

```
dd.rle <- rle(dd$code)
# get the length of each consecutive 1's
ival <- dd.rle$lengths[dd.rle$values == 1]
# using lengths, construct a `factor` with levels = length(ival)
levl  <- factor(rep(seq_along(ival), ival))
# use these levels to extract `rain[code == 1]` and compute sum
tapply(dd$rain[dd$code == 1], levl, sum)

#    1     2     3 
# 54.9  30.1 111.9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:09:55.703

以下是获得所需结果的矢量化方式。

```
df <- read.table(textConnection("Date       rain code\n2009-04-01  0.0 0\n2009-04-02  0.0 0\n2009-04-03  0.0 0\n2009-04-04  0.7 1\n2009-04-05 54.2 1\n2009-04-06  0.0 0\n2009-04-07  0.0 0\n2009-04-08  0.0 0\n2009-04-09  0.0 0\n2009-04-10  0.0 0\n2009-04-11  0.0 0\n2009-04-12  5.3 1\n2009-04-13 10.1 1\n2009-04-14  6.0 1\n2009-04-15  8.7 1\n2009-04-16  0.0 0\n2009-04-17  0.0 0\n2009-04-18  0.0 0\n2009-04-19  0.0 0\n2009-04-20  0.0 0\n2009-04-21  0.0 0\n2009-04-22  0.0 0\n2009-04-23  0.0 0\n2009-04-24  0.0 0\n2009-04-25  4.3 1\n2009-04-26 42.2 1\n2009-04-27 45.6 1\n2009-04-28 12.6 1\n2009-04-29  6.2 1\n2009-04-30  1.0 1"), 
    header = TRUE)

df$cumsum <- cumsum(df$rain)
df$diff <- c(diff(df$code), 0)
df$result <- rep(NA, nrow(df))

if (nrow(df[df$diff == -1, ]) == nrow(df[df$diff == 1, ])) {
    result <- df[df$diff == -1, "cumsum"] - df[df$diff == 1, "cumsum"]
    df[df$diff == -1, "result"] <- result
} else {
    result <- c(df[df$diff == -1, "cumsum"], df[nrow(df), "cumsum"]) - df[df$diff == 1, "cumsum"]
    df[df$diff == -1, "result"] <- result[1:length(result) - 1]
    df[nrow(df), "result"] <- result[length(result)]
}

df
##          Date rain code cumsum diff result
## 1  2009-04-01  0.0    0    0.0    0     NA
## 2  2009-04-02  0.0    0    0.0    0     NA
## 3  2009-04-03  0.0    0    0.0    1     NA
## 4  2009-04-04  0.7    1    0.7    0     NA
## 5  2009-04-05 54.2    1   54.9   -1   54.9
## 6  2009-04-06  0.0    0   54.9    0     NA
## 7  2009-04-07  0.0    0   54.9    0     NA
## 8  2009-04-08  0.0    0   54.9    0     NA
## 9  2009-04-09  0.0    0   54.9    0     NA
## 10 2009-04-10  0.0    0   54.9    0     NA
## 11 2009-04-11  0.0    0   54.9    1     NA
## 12 2009-04-12  5.3    1   60.2    0     NA
## 13 2009-04-13 10.1    1   70.3    0     NA
## 14 2009-04-14  6.0    1   76.3    0     NA
## 15 2009-04-15  8.7    1   85.0   -1   30.1
## 16 2009-04-16  0.0    0   85.0    0     NA
## 17 2009-04-17  0.0    0   85.0    0     NA
## 18 2009-04-18  0.0    0   85.0    0     NA
## 19 2009-04-19  0.0    0   85.0    0     NA
## 20 2009-04-20  0.0    0   85.0    0     NA
## 21 2009-04-21  0.0    0   85.0    0     NA
## 22 2009-04-22  0.0    0   85.0    0     NA
## 23 2009-04-23  0.0    0   85.0    0     NA
## 24 2009-04-24  0.0    0   85.0    1     NA
## 25 2009-04-25  4.3    1   89.3    0     NA
## 26 2009-04-26 42.2    1  131.5    0     NA
## 27 2009-04-27 45.6    1  177.1    0     NA
## 28 2009-04-28 12.6    1  189.7    0     NA
## 29 2009-04-29  6.2    1  195.9    0     NA
## 30 2009-04-30  1.0    1  196.9    0  111.9 
```

# c - 连接 2 个矩阵

> ID：15197135
> 
> 赞同：1
> 
> 时间：2013-03-04T08:09:08.897
> 
> 标签：c, dynamic, matrix

我有一个动态分配的矩阵，我想创建另一个矩阵，它是第一个矩阵，但旁边有另一个副本。例如，我有矩阵：

```
11
22

```

我的新矩阵将是：

```
1 1 1 1
2 2 2 2

```

我怎样才能连接它们？这是我在 C 中的代码：

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>

int **create_matrix(int row, int col)
{
    int **matrix = malloc(sizeof (int*)*row);
    int i;
    for (i = 0; i < row; i++)
    {
        matrix[i] = malloc(sizeof (int)*col);
    }
    return matrix;
}

void matrix_input(int **matrix, int row, int col)
{
    int i, j;
    printf("enter the elements of the matrix:\n");
    for (i = 0; i < row; i++)
    {

        for (j = 0; j < col; j++)
        {
            scanf("%d", &matrix[i][j]);
        }
    }
}

int **extend_matrix(int **matrix, int row, int col)
{
    int k, j;
    int i;
    int **extend_matrix = malloc(sizeof (int*)*row);
    for (k = 0; k < row + row; k++)
    {
        extend_matrix[k] = malloc(sizeof (int)*col);
    }
    extend_matrix = matrix;
    extend_matrix = (int**) realloc(extend_matrix, (row + row) * sizeof (int*));
    extend_matrix[j] = matrix[j];
    for (i = 0; i < row; i++)
    {
        extend_matrix[k] = matrix[i];
    }
}

void print_matrix(int **matrix, int row, int col)
{
    int i, j;
    for (i = 0; i < row; i++)
    {
        for (j = 0; j < col; j++)
        {
            printf(" %d ", matrix[i][j]);
        }
        printf("\n");
    }

}

void print_extend_matrix(int **extend_matrix, int row, int col)
{
    int k, j;
    for (k = 0; k < row + row; k++)
    {
        for (j = 0; j < col; j++)
        {
            printf("%d", extend_matrix[k][j]);
        }
        printf("\n");
    }
}

int main(void)
{
    int **matrix;
    int **extend_matrix;
    int row, col;
    printf("enter the number of rows of cols:");
    scanf("%i%i", &row, &col);
    matrix = create_matrix(row, col);
    matrix_input(matrix, row, col);
    print_matrix(matrix, row, col);
    print_extend_matrix(extend_matrix, row, col);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:15:39.500

我认为`extend_matrix()`应该调用`create_matrix()`创建一个两倍宽度的新矩阵，然后使用两个简单的嵌套循环来填充它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:50:11.300

尽管@NPE 向您建议了一种更好的方法。如果要在extend_matrix() 中分配内存

代码中的错误（*阅读评论*）

```
int **extend_matrix = malloc(sizeof (int*)*row);
                                           ^ on row
for (k = 0; k < row + row; k++)            
                    ^ where as loop is for row + row
{
    extend_matrix[k] = malloc(sizeof (int)*col);  // So this cause an error,
                                                  // segment-fault
} 
```

第二，你的概念是错误的复制内存：

```
 extend_matrix = matrix; 
```

在这一行，你分配`matrix`给 `extend_matrix`它是错误的。您需要在此处循环以将每个元素从 复制`matrix[][]`到`extend_matrix[][]`。（*但先纠正你的内存分配代码*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:49:20.740

如果这是您正在寻找的：

```
int concat(void * oldM, int row, int col,void& *newM) {
     newM = malloc(sizeof(int)*row*col*2);

     for(int i = 0;i<2;++i)
      for(int j=0;j<2;++j)
         newM[i][j+col] = newM[i][j] = oldM[i][j]; 

    for(int i = 0;i<2;++i)  {
      for(int j=0;j<4;++j) {
        cout<<"\t"<<newM[i][j];
      }
      cout<<"\n";
   }
} 
```

# java - 如何在 Java 中声明匹配模式？

> ID：15197136
> 
> 赞同：0
> 
> 时间：2013-03-04T08:09:26.330
> 
> 标签：java, regex, pattern-matching

在我的 Java 应用程序中，我尝试读取一个文本文件并将一些字符串组添加到哈希图中。我正在使用匹配模式来查找字符串，但我没有得到正确的字符串。我的文本文件内容是

```
S Fr: tod : 80089789
孩子#00332001897678 cno : 890768
cuon #PKGS 重量
51235

```

```
Pattern pattern = Pattern.compile("(tod:[0-9]{0,}|kid#[0-9]{0,})|Cno:[0-9]{0,}|CUON  [0-9]{0,}");
while ((strLine = br.readLine()) != null) {
  strLine= strLine.trim();
  Matcher m1 = pattern.matcher(strLine);
  while (m1.find()) 
    allv.add(m1.group()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:16:01.783

您的正则表达式的问题在于，正则表达式要求您特别指出是否会有空格。例如

`tod : 80089789`

与正则表达式不匹配

`tod:[0-9]{0,}`

但它与正则表达式匹配

`tod : [0-9]{0,}`

或更一般的

`tod\s*:\s*[0-9]{0,}`

`\s`意思是“一个空白字符”，`*`意思是“做前面的事情 0 次或更多次”。实际上，为了清楚起见，您可以将所有内容替换`{0,}`为`*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:26:57.443

当我在您的文件上执行您的代码时，我收到 1 个匹配项。所以如果这不是你想要的......请澄清你的问题。

见图片：http: [//i.imgur.com/EnTXi4u.png](http://i.imgur.com/EnTXi4u.png)

# jquery - 重定向到另一个页面时终止 ajax 调用

> ID：15197139
> 
> 赞同：1
> 
> 时间：2013-03-04T08:09:32.463
> 
> 标签：jquery, ajax

```
$.ajax({
        beforeSend: function () {
            ...
        },
        complete: function () {
            ...
        }, 
        url: "serviceUrl",
        cache: false,
        type: 'POST',
        data: jsonObj,
        contentType: 'application/json; charset=utf-8',
        statusCode: {
            200 /*Get*/: function (responseData) {
                successCallback(responseData);
            },
            201 /*Created*/: function (responseData) {
                successCallback(responseData);
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            handleException(jqXHR.status, failureCallback);
        }
    }); 
```

我正在使用上面的 ajax 调用。在 IE 中，如果我在 ajax 调用过程之间重定向到其他页面，加载包含另一个 ajax 调用的重定向页面需要很长时间。相同的代码在重定向之前在 Chrome 中显示异常（错误）

如何在重定向到另一个页面时终止 ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:13:29.897

您可以使用 ajax 函数返回的 xhr 对象中止 ajax 调用。像这样：

```
var xhr = $.ajax({
    type: "POST",
    url: "some.php",
    data: "name=John&location=Boston",
    success: function(msg){
       alert( "Data Saved: " + msg );
    }
});

//kill the request
xhr.abort() 
```

# c# - 如何正确测试抽象类

> ID：15197141
> 
> 赞同：5
> 
> 时间：2013-03-04T08:09:36.377
> 
> 标签：c#, unit-testing, visual-studio-2008

我目前正在为一个名为`Component`. VS2008 编译我的程序没有问题，所以我能够在解决方案中创建一个单元测试项目。不过，我注意到的一件事是，在创建测试文件后，有一些我以前从未见过的方法：

```
internal virtual Component CreateComponent()
        {
            // TODO: Instantiate an appropriate concrete class.
            Component target = null;
            return target;
        }

internal virtual Component_Accessor CreateComponent_Accessor()
        {
            // TODO: Instantiate an appropriate concrete class.
            Component_Accessor target = null;
            return target;
        } 
```

我认为这些是为了创建一个具体的`Component`类。

在每个测试方法中，都有这一行：

`Component target = CreateComponent(); // TODO: Initialize to an appropriate value`

如何将其初始化为适当的值？或者，我如何实例化一个适当的具体类，如上面的`CreateComponent`和`CreateComponent_Accessor`方法所述？

这是抽象类的构造函数，以获取更多信息：

`protected Component(eVtCompId inComponentId, eLayer inLayerId, IF_SystemMessageHandler inMessageHandler)`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T08:10:43.533

您不能实例化抽象类。因此，您可以在单元测试项目中编写此抽象类的模拟实现（您应该在其中实现抽象成员），然后调用您尝试测试的方法。你可以有不同的模拟实现来测试你的类的各种方法。

作为编写模拟实现的替代方案，您可以使用模拟框架，例如 Rhino Mocks、Moq、NSubstitute ......这可以简化此任务并允许您定义对类的抽象成员的期望。

* * *

更新：

根据评论部分的要求，这是一个示例。

假设您有以下要进行单元测试的抽象类：

```
public abstract class FooBar
{
    public abstract string Foo { get; }

    public string GetTheFoo()
    {
        return "Here's the foo " + Foo;
    }
} 
```

现在在您的单元测试项目中，您可以通过编写一个派生类来实现它，该派生类使用模拟值实现抽象成员：

```
public class FooBarMock : FooBar
{
    public override string Foo 
    { 
        get { return "bar" } 
    }
} 
```

然后您可以针对该`GetTheFoo`方法编写单元测试：

```
// arrange
var sut = new FooBarMock();

// act
var actual = sut.GetTheFoo();

// assert
Assert.AreEqual("Here's the foo bar", actual); 
```

并且使用模拟框架（在我的示例中为 Moq），您不需要在单元测试中实现这个抽象类，但您可以直接使用模拟框架来定义被测方法所依赖的抽象成员的期望：

```
// arrange
var sut = new Mock<FooBar>();
sut.Setup(x => x.Foo).Returns("bar");

// act
var actual = sut.Object.GetTheFoo();

// assert
Assert.AreEqual("Here's the foo bar", actual); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-21T19:18:46.783

我就是这样做的。在 UnitTest 类上有一个内部嵌套类。

请注意“MyAbstractClass.GetABoolean”方法。指出抽象类如何依赖于子类的实现。

```
namespace MyCompany.MyProject.UnitTests
{
    using System;
    using System.Collections.Generic;
    using System.Text;
    using System.Threading.Tasks;
    using Microsoft.VisualStudio.TestTools.UnitTesting;
    using FluentAssertions;

    [TestClass]
    [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
    public class MyAbstractClassTests
    {
        [TestMethod]
        public void ConstructorILoggerFactoryIsNullTest()
        {
            Action a = () => new MyUnitTestConcreteClass(null);
            a.Should().Throw<ArgumentNullException>().WithMessage(MyAbstractClass<int>.ErrorMessageILoggerFactoryIsNull);

        }

        [TestMethod]
        public void GetABooleanIsTrueTest()
        {
            /* here is more likely what you want to test..an implemented method on the abstract class */
            Mock<ILoggerFactory> iloggerFactoryMock = this.GetDefaultILoggerFactoryMock();
            MyUnitTestConcreteClass testItem = new MyUnitTestConcreteClass(iloggerFactoryMock.Object);
            Assert.IsTrue(testItem.GetABoolean());
        }   

        [TestMethod]
        public void GetSomeIntsIsNotNullTest()
        {
            /* you may not want to test the abstract methods, but you can */
            Mock<ILoggerFactory> iloggerFactoryMock = this.GetDefaultILoggerFactoryMock();
            MyUnitTestConcreteClass testItem = new MyUnitTestConcreteClass(iloggerFactoryMock.Object);
            Assert.IsNotNull(testItem.GetSomeInts());
        }       

        private Mock<ILoggerFactory> GetDefaultILoggerFactoryMock()
        {
            Mock<ILoggerFactory> returnMock = new Mock<ILoggerFactory>(MockBehavior.Strict);
            ////returnMock.Setup(x => x.SomeBooleanMethod()).Returns(true);
            return returnMock;
        }       

        internal class MyUnitTestConcreteClass : MyAbstractClass<int>
        {
            internal MyUnitTestConcreteClass(ILoggerFactory loggerFactory) : base(loggerFactory)
            {
            }

            public override ICollection<int> GetSomeInts()
            {
                return new List<int> { 111, 222, 333 };
            }
        }
    }
} 
```

和下面的“真实”抽象类

```
public abstract class MyAbstractClass<T> : where T : struct
{

    public const string ErrorMessageILoggerFactoryIsNull = "ILoggerFactory is null";

    public WhiteListStepBodyAsyncBase(ILoggerFactory loggerFactory)
    {
        if (null == loggerFactory)
        {
            throw new ArgumentNullException(ErrorMessageILoggerFactoryIsNull, (Exception)null);
        }

    }           

    public bool GetABoolean()
    {
          /* note , this is important factor (sometimes), here this implemented method DEPENDS on an abstract method , and why I have the code "return new List<int> { 111, 222, 333 };" above .. see the connection ?? */
                    return this.GetSomeInts().Count > 0;
    }

    public abstract ICollection<int> GetSomeInts();

} 
```

这个问题比较老，但是原理都是一样的。

这是我的 VS2019，2020 年 .. 包导入。

```
 <ItemGroup>
    <PackageReference Include="coverlet.msbuild" Version="2.8.0">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="FluentAssertions" Version="5.10.0" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="16.2.0" />
    <PackageReference Include="Moq" Version="4.13.1" />
    <PackageReference Include="MSTest.TestAdapter" Version="2.0.0" />
    <PackageReference Include="MSTest.TestFramework" Version="2.0.0" />
    <PackageReference Include="coverlet.collector" Version="1.0.1" />
  </ItemGroup> 
```

# report - APEX 4.2 - 将 LOV 与交互式报表结合使用

> ID：15197142
> 
> 赞同：1
> 
> 时间：2013-03-04T08:09:37.777
> 
> 标签：report, oracle-apex, interactive, lov

现在我正在使用 ApEx 4.2，我想将我的表单从经典报表更新为交互式报表。
我有一个将 ID 转换为人类可读标签的 LOV。但是使用 Interactive Report，我无法使用我的 LOV 配置我的表单。

使用经典报告，我成功地完成了：

```
Column attributes for item IDTAXON_DISPLAY
Column attributes: Display as Text(based on LOV, does not save state)
List of Values: Named LOV - Select named LOV
List of values definition:
select artname as DISPLAY_VALUE, idtaxon as RETURN_VALUE from fischart 
```

使用我尝试的新页面使用交互式报告：

```
Column attributes for item Idtxon
Column Definition
Display Type: Display as Text(based on LOV, escape special characters)
Column Filter Type Use Defined List of Values to Filter Exact Match
Named List of Values - Select named LOV
List of values definition (Enter a SQL query that returns one column):
select artname as DISPLAY_VALUE, idtaxon as RETURN_VALUE from fischart 
```

但我收到以下错误：

```
Named List of Values must be entered for columns with a "Display Type" of
"Based on LOV" or a Column Filter Type which uses a named list of values. 
```

我看不出有什么问题。知道如何管理这个吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:15:52.543

如果您在共享组件中创建值列表，那么它应该可以工作。详情如下。

1.  转到**共享组件→值列表→创建**并创建以下内容：

    *   **创建值列表**：从头开始
    *   **名称**：费沙图
    *   **类型**：动态
    *   **查询**：

        ```
        select artname as DISPLAY_VALUE, idtaxon as RETURN_VALUE from fischart; 
        ```

2.  返回交互式报告并单击**idtaxon** Column Attributes。

3.  更改以下属性：

    *   **显示类型**：显示为文本（基于 LOV，转义特殊字符）
    *   **列过滤器类型：**使用命名值列表过滤精确匹配
    *   **值的命名列表：** FISCHART

# android - DatatypeMismatchError - 插入内容提供者 - SQLite

> ID：15197146
> 
> 赞同：1
> 
> 时间：2013-03-04T08:09:58.893
> 
> 标签：android, sqlite, android-contentprovider

无法插入使用 SQLite 数据库的内容提供程序。

只是试图实现一个简单的键值表，它有两列，键和值，它们都是`TEXT`.

相关代码和堆栈跟踪。

```
// SQL for creating database
private static final String DATABASE_CREATE =
        "CREATE TABLE IF NOT EXISTS " + TABLE_NAME + " (" + KEY +
        " TEXT, " + VALUE + " TEXT);";

// The insert method
@Override
public Uri insert(Uri uri, ContentValues values) {
    SQLiteDatabase mdb = mdbHelper.getWritableDatabase();

    long key = mdb.insert(MessagesDbHelper.TABLE_NAME, null, values);
    mdb.close();

    return Uri.parse(URI + "/" + key);
}

// The insert test
private boolean testInsert() {
    try {
        for (int i = 0; i < TEST_CNT; i++) {
            mContentResolver.insert(mUri, mContentValues[i]);
        }
    } catch (Exception e) {
        return false;
    }

    return true;
}

// initializes content values for insert test
private ContentValues[] initTestValues() {
    ContentValues[] cv = new ContentValues[TEST_CNT];
    for (int i = 0; i < TEST_CNT; i++) {
        cv[i] = new ContentValues();
        cv[i].put(KEY_FIELD, "key" + Integer.toString(i));
        cv[i].put(VALUE_FIELD, "val" + Integer.toString(i));
    }

    return cv;
}

// static variables
private static final String KEY_FIELD = "key";
private static final String VALUE_FIELD = "value"; 
```

追踪开始：

```
03-04 02:09:18.553: E/SQLiteLog(1531): (20) statement aborts at 6: [INSERT INTO messages(value,key) VALUES (?,?)] datatype mismatch
03-04 02:09:18.573: E/SQLiteDatabase(1531): Error inserting value=val49 key=key49
03-04 02:09:18.573: E/SQLiteDatabase(1531): android.database.sqlite.SQLiteDatatypeMismatchException: datatype mismatch (code 20) 
```

# php - 如何在 PHP 中创建一个删除结果的按钮？

> ID：15197147
> 
> 赞同：-1
> 
> 时间：2013-03-04T08:10:01.517
> 
> 标签：php, mysql

我是这方面的新手，我最近才研究代码......我很难理解为什么这不起作用：

我在搜索结果中添加了一个按钮，因此它会删除某些数据字段，但它不会这样做。我在这里错过了什么？

```
<?php //deleting

isset($_GET['action']) ? $action=$_GET['action'] : $action="";

if($action=='delete'){
$id=$_REQUEST['id'];

$query=mysql_query("set names 'utf8'");
$query = mysql_query("DELETE FROM norse5_proov WHERE id='$id'") or die(mysql_error());

if($query){

echo "<div id='dain'><br><br><br><br><br><br><br><br><br><br>Andmed kustutatud.</div>";

}

}
?>

        <?php //searching
        mysql_query ("set character_set_results='utf8'"); 
        if($_SERVER['REQUEST_METHOD'] == "POST"){
            $query = "SELECT * FROM norse5_proov WHERE 1=1 ";

            if(!empty($_POST["osakond"])){
                $query .= " AND osakond LIKE '%".mysql_real_escape_string($_POST["osakond"])."%'";
            }
            if(!empty($_POST["soetusaasta"])){
                $query .= " AND soetusaasta LIKE '%".mysql_real_escape_string($_POST["soetusaasta"])."%'";
            }
            if(!empty($_POST["it_number"])){
                $query .= " AND it_number LIKE '%".mysql_real_escape_string($_POST["it_number"])."%'";
            }
            if(!empty($_POST["tooteruhm"])){
                $query .= " AND tooteruhm LIKE '%".mysql_real_escape_string($_POST["tooteruhm"])."%'";
            }
            if(!empty($_POST["mudeli_nimetus"])){
                $query .= " AND mudeli_nimetus LIKE '%".mysql_real_escape_string($_POST["mudeli_nimetus"])."%'";
            }
            if(!empty($_POST["sn"])){
                $query .= " AND sn LIKE '%".mysql_real_escape_string($_POST["sn"])."%'";
            }
            if(!empty($_POST["riigivara_nr"])){
                $query .= " AND riigivara_nr LIKE '%".mysql_real_escape_string($_POST["riigivara_nr"])."%'";
            }
            if(!empty($_POST["inventaari_nr"])){
                $query .= " AND inventaari_nr LIKE '%".mysql_real_escape_string($_POST["inventaari_nr"])."%'";
            }
            if(!empty($_POST["maja"])){
                $query .= " AND maja LIKE '%".mysql_real_escape_string($_POST["maja"])."%'";
            }
            if(!empty($_POST["ruum"])){
                $query .= " AND ruum LIKE '%".mysql_real_escape_string($_POST["ruum"])."%'";
            }
            if(!empty($_POST["vastutaja"])){
                $query .= " AND vastutaja LIKE '%".mysql_real_escape_string($_POST["vastutaja"])."%'";
            }
            if(!empty($_POST["markus"])){
                $query .= " AND markus LIKE '%".mysql_real_escape_string($_POST["markus"])."%'";
            }
            if(!empty($_POST["id"])){
                $query .= " AND id LIKE '%".mysql_real_escape_string($_POST["id"])."%'";
            }

            ?>
            <table id="tablk">
                <tr>
                    <th width="80">Osakond</th>
                    <th width="80">Soetusaasta</th>
                    <th width="80">IT Number</th>
                    <th width="80">Tooterühm</th>
                    <th width="80">Mudeli nimetus</th>
                    <th width="80">SN</th>
                    <th width="80">Riigivara nr</th>
                    <th width="80">Inventaari nr</th>
                    <th width="80">Maja</th>
                    <th width="80">Ruum</th>
                    <th width="80">Vastutaja</th>
                    <th width="80">Märkus</th>
                    <th width="80">ID</th>
                    <th width="80">Tegevus</th>
                </tr>
                <?php

                $result = mysql_query($query);
                while($row = mysql_fetch_assoc($result)){
                    echo "<tr>";
                    echo    "<td>".$row["osakond"]."</td>";
                    echo    "<td>".$row["soetusaasta"]."</td>";
                    echo    "<td>".$row["it_number"]."</td>";
                    echo    "<td>".$row["tooteruhm"]."</td>";
                    echo    "<td>".$row["mudeli_nimetus"]."</td>";
                    echo    "<td>".$row["sn"]."</td>";
                    echo    "<td>".$row["riigivara_nr"]."</td>";
                    echo    "<td>".$row["inventaari_nr"]."</td>";
                    echo    "<td>".$row["maja"]."</td>";
                    echo    "<td>".$row["ruum"]."</td>";
                    echo    "<td>".$row["vastutaja"]."</td>";
                    echo    "<td>".$row["markus"]."</td>";
                    echo    "<td>".$row["id"]."</td>";
                    echo "<td>";
                    echo "<button onclick='delete_user( {id} )'>Kustuta</button>"; 
                    echo "<form method='post' action='edit.php?id=<?php echo ".$row["id"]."; ?>'><input type='submit' value='Muuda'>";
                    echo "</td>";

                    echo "</tr>";
                }
                mysql_free_result($result);
                ?>
            </table>
            <?php
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:16:36.037

这一行：

```
echo "<button onclick='delete_user( {id} )'>Kustuta</button>"; 
```

创建一个按钮并调用`delete_user`函数，但它不是 PHP 函数而是 Javascript。你可能没有定义这个函数。其次问题可能出在`{id}`，也许你应该写`delete_user(".$row["id"].")`。

我想您必须创建一个按钮来提交要删除的表单。您可能需要两种形式，一种用于编辑（在下一行中有），另一种用于删除。

而不是我引用的行：

```
echo "<form method='post' action='edit.php?action=delete&id=".$row["id"]."'><input type='submit' value='Muuda'>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:18:12.293

尝试

```
echo "<button onclick='delete_user(".$row[id].")'>Kustuta</button>"; 
echo "<form method='post' action='edit.php?action=delete&id=<?php echo ".$row["id"]."; ?>'><input type='submit' value='Muuda'>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:13:18.820

```
echo "<form method='post' action='edit.php?id=<?php echo ".$row["id"]."; ?> 
```

上面的行是在 PHP 字符串中打开一个 PHP 标记。

# php - 从codeigniter中的sql输出获取上个月的索引？

> ID：15197152
> 
> 赞同：-1
> 
> 时间：2013-03-04T08:10:20.147
> 
> 标签：php, mysql, codeigniter

```
$SQL = "SELECT value FROM shpb_control WHERE control_id='bulan'";
$Q = $obj->db->query($SQL);

$month_now=$Q->row()->value; 
```

例如，`$month_now='02'`

PHP中的函数是什么，得到最后一个`month = '01'`？

例子：

`$month_now = '02'`， 和`$month_previous = '01'`

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:13:08.910

您可以使用`MONTH`mysql 中可用的`strtotime`函数和 php 中的函数。

**PHP**

```
echo date('m', strtotime(date('m')." -1 month")); 
```

**MySQL**

```
SELECT * FROM table
WHERE MONTH(date_field) = MONTH(CURRENT_DATE - INTERVAL 1 MONTH) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:03:33.167

您可以使用[`strtotime()`](http://php.net/strtotime)：

```
date('m', strtotime($month_now.' -1 month')); 
```

# android - 在本机应用程序（或全屏）中使用标记打开我的谷歌地图 div

> ID：15197156
> 
> 赞同：1
> 
> 时间：2013-03-04T08:10:48.823
> 
> 标签：android, iphone, google-maps, mobile

我有一个带有移动优化的网站（实际上更像是响应式优化，但无论如何）。

在一页上，我有一个带有许多自定义标记的谷歌地图。由于这张地图的 div 非常小（至少在较小的屏幕上看起来非常小），因此使用起来并不友好。有没有一种简单的方法可以在原生 iPhone/Android 应用程序中打开这个精确的地图（具有相同的位置和我所有的自定义标记）？也许是某种 JS 库，甚至是由 Google 直接开发的东西？如果这不可能，是否有一个技巧可以全屏打开它，至少获得原生感觉？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T04:29:57.777

我还没有尝试过，但也许你应该看看这些链接

[从 android 浏览器启动自定义 android 应用程序 在 Android 浏览器](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser) [中创建一个链接启动我的应用程序？](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app/3472228#3472228)

并尝试在 or 参数中传递 longlat 信息

# asp.net-mvc-3 - 如果计算机长时间闲置后会话结束，部分视图会显示带有全站点的登录页面

> ID：15197159
> 
> 赞同：0
> 
> 时间：2013-03-04T08:11:10.540
> 
> 标签：asp.net-mvc-3

我创建了一个 asp.net mvc razor 应用程序，其中我在一个 div 中加载了一个局部视图，登录后可以访问该视图。

```
<% using (Ajax.BeginForm("Showproducts", "Home", new AjaxOptions {
    UpdateTargetId = "resdiv", OnBegin = "fstart()", OnSuccess = "fend()"
}, new { id = "_myform" }))
{ %>
    .....
<% } %> 
```

当用户离开他们的计算机很长一段时间（这会使会话自动超时）然后单击提交按钮时，resdiv 将充满整个站点和登录面板。我想在 resdiv 中显示带有登录面板的完整站点。有什么办法可以避免这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:14:02.787

> 有什么办法可以避免这种行为？

是的，有办法。我建议您阅读[`following blog post`](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)Phil Haack 在其中说明了一种非常好的技术，该技术允许您覆盖 AJAX 请求的表单身份验证模块并能够发送 401 状态代码而不是重定向到登录页面。

然后在客户端你可以使用一个[`global AJAX handler`](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)你可以测试状态码的地方，如果它是 401 重定向到登录页面。

例如，一旦您安装了`AspNetHaack`NuGet，您就可以将以下全局错误处理程序添加到您的视图中：

```
<script type="text/javascript">
    $(document).ajaxError(function(event, jqXHR, ajaxSettings, thrownError) {
        if (jqXHR.status == 401) {
            // not authenticated => redirect to login page:
            window.location.href = '@FormsAuthentication.LoginUrl';
        }
    });
</script> 
```

# java - 如何使用 Apache CXF 作为客户端？

> ID：15197160
> 
> 赞同：6
> 
> 时间：2013-03-04T08:11:16.153
> 
> 标签：java, web-services, jax-ws, cxf

我知道如何使用 Apache CXF 生成客户端存根。但是，当我尝试运行生成的类时，它使用 JAXWS。另外，我注意到生成的类的导入类来自 javax 包。如何使用设置生成的类来使用 Apache CXF 库而不是 JAXWS 库？

下面是我用来生成客户端存根的代码：

```
wsdl2java -frontend jaxws21 -wsdlLocation "META-INF/wsdl/WSCustom.wsdl" -client -d C:\Workspace\WSClient\META-INF\wsdl\ "C:\Workspace\WSClient\META-INF\wsdl\WSCustom.wsdl" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T08:20:53.020

存根是正确的，其中不应该有任何特定于 CXF 的导入，因为 CXF 需要的所有信息都可以使用 JAX-WS 标准注释来表示。在运行时，如果 CXF 客户端库位于类路径上，则将使用它们；如果 CXF 不可用，则将使用 JDK 中内置的 RI 库。生成的存根将与其中任何一个一起使用。

您在评论中询问如果您只是在运行一个客户端，则需要哪些 CXF JAR——据我所知，这只是`cxf-rt-frontend-jaxws`加上`cxf-rt-transports-http`它们的传递依赖。如果您的项目是使用 maven 构建的，那么只需声明这两个依赖项，其他所有内容都应该自动进入，如果没有，则下载[Apache Ivy 主 JAR](http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar)然后运行

```
java -jar ivy-2.3.0.jar -dependency org.apache.cxf cxf-rt-frontend-jaxws 2.7.3 -retrieve "[artifact]-[revision](-[classifier]).jar"
java -jar ivy-2.3.0.jar -dependency org.apache.cxf cxf-rt-transports-http 2.7.3 -retrieve "[artifact]-[revision](-[classifier]).jar" 
```

这应该解决传递依赖关系并将相关 JAR 从 Maven Central 下载到当前目录。

# html - UIWebview URL 处理

> ID：15197166
> 
> 赞同：0
> 
> 时间：2013-03-04T08:11:54.483
> 
> 标签：html, ios, url, uiwebview

我有一个 UIWebview，我在其中提供不同类型的文本，如链接、简单文本、表情符号。自定义它将一个长链接切成几个块，例如。

```
https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-ash3/s480x480/525188_10200372945753969_1256081282_n.jpg 
```

进入

```
https://fbcdn-sphotos-</BR>
d-a.akamaihd.net/hphot</BR>
os-ak-ash3/s480x480/52</BR>
5188_10200372945753969</BR>
_1256081282_n.jpg 
```

我尝试删除将其切成几块的方法，但这就是我得到的......

```
https://fbcdn-sphotosd-
a.akamaihd.net/hphotos-ak-
ash3/s480x480/525188_10200372945753969_1256081282_n.jpg 
```

该链接已满并且可以正常工作，但是在 UI 上它不能正确显示，只要它会自动创建一个新行而不破坏链接...

所以问题是，因为有一个尾随的 html 元素，所以链接会自动断开，我的问题是......

有没有办法处理这种情况，其中我可以将 HTML 元素标签包含到链接中，但不会破坏链接，或者更好地只是使长链接正确显示？

# jbpm - jbpm5如何使用真实用户表

> ID：15197170
> 
> 赞同：1
> 
> 时间：2013-03-04T08:12:14.110
> 
> 标签：jbpm

这是萨拉男孩的例子：

```
 private void addUsersAndGroups(TaskServiceSession taskSession) {
    User user = new User("salaboy");
    User watman = new User("watman");
    taskSession.addUser(user);
    taskSession.addUser(watman);
    User administrator = new User("Administrator");
    taskSession.addUser(administrator);
    users.put("salaboy", user);
    users.put("watman", watman);
    users.put("administrator", administrator);
    Group myGroup = new Group("group1");
    taskSession.addGroup(myGroup);
    groups.put("group1", myGroup);

} 
```

我想使用真正的*用户表*。我如何映射它？如何使用`UserGroupCallback`接口？用户如何在线自定义流程，他们使用*guvnor*吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:29:31.333

要将您的 User 类映射到表，您需要创建一个 user.hbm.xml 文件（您可以按照[本](http://docs.jboss.org/hibernate/orm/3.6/quickstart/en-US/html/hibernate-gsg-tutorial-basic.html)教程进行操作。该文件将放置在您的 META-INF 文件夹中

# objective-c - 在objective-c中重新加载数据后变量被重置为null

> ID：15197172
> 
> 赞同：0
> 
> 时间：2013-03-04T08:12:27.280
> 
> 标签：objective-c, variables, reloaddata

我在 TableView 上遇到了 reloadData 问题。我终于能够确定我用来告诉 reloadData 要重新加载什么的变量正在重置为 NULL。

我已将变量添加`ClassAppDelegate.h`如下：

```
@property (nonatomic, retain) id globalid; 
```

然后合成`ClassAppDelegate.m`如下：

```
@synthesize globalid; 
```

然后我访问我需要使用它的类和方法的变量（在方法中）：

```
NDSClassAppDelegate *detailControllerAD = [[NDSClassAppDelegate alloc] init]; 
```

然后以这种方式使用它来获取该方法中的变量：

```
NSLog(@"GlobalID at FetchTweets %@", detailControllerAD.globalid); 
```

为什么我的变量会在 reloadData 上重置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:14:47.957

您不应该实例化应用程序委托对象 - 您的应用程序在启动时作为`UIApplicationMain()`函数的一部分被赋予一个，并且它应该存在于您的应用程序的生命周期中。用于`[[UIApplication sharedApplication] delegate]`获取委托，即`NDSClassAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]`. 然后，在您需要设置或读取`globalid`属性的任何地方，将其设置在应用程序委托的此实例上。

实例变量（通常由哪些属性支持）在对象实例之间独立变化，因此您不能在一个对象中存储一个值，然后在另一个对象中出现相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:48:15.673

您可以使用上述方式在整个应用程序中共享数据。在我之前的一个申请中，我也有同样的要求。在两个三个论坛上，我已经阅读了有关通过应用程序共享数据的信息。但根据他们的说法，这不是在应用程序级别存储数据的好习惯，因为使用应用程序委托作为模型对象是非委托相关的东西。所以更简洁的方法是使用单例类。创建一个单例类以保留所有变量状态。这将是更清洁的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:18:35.633

当你使用这个 NDSClassAppDelegate *detailControllerAD = [[NDSClassAppDelegate alloc] init]; 应用委托创建的新实例。

用这个

[[UIApplication sharedApplication] delegate] 获取应用程序委托的现有实例。

# javascript - 使用 jQuery UI 创建多个可排序的网格

> ID：15197174
> 
> 赞同：0
> 
> 时间：2013-03-04T08:12:44.420
> 
> 标签：javascript, jquery, css, jquery-ui

我使用 jQuery 1.9.1 和 jQuery UI 1.9.2。在我的应用程序中，我有超过 1 个列表，可以有超过 1 行。正如您在[官方演示](http://jqueryui.com/sortable/#display-grid)中看到的那样：它适用于一个列表。但我已经用 2 个列表尝试过，它不起作用。第一个列表中的项目不能移动到第二个。我创建了[这个测试页面](http://jsfiddle.net/fjjqM)以获得更好的解释。谢谢。

我的简单 JS：

```
$(function() {
    $('#sort1, #sort2').sortable().disableSelection();
}); 
```

另外，当我添加`connectWith: '.sort'`ui 时，定义放置位置不正确。如果我添加`float: left`到列表中，我无法从一个列表移动到另一个列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:19:58.380

您需要`connectWith`在插件的选项中进行设置。我已经更新了您原来的 JSFiddle：http: [//jsfiddle.net/fjjqM/1/](http://jsfiddle.net/fjjqM/1/)

目前它的移动有点奇怪，因此您可能需要查看有关此的官方文档以获取更多信息：http: [//jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:02:41.660

试试这个帖子，它和你有同样的问题：

[在可排序网格上使用 connectWith 时 JQuery 可排序中断](https://stackoverflow.com/questions/14514359/jquery-sortable-breaks-when-using-connectwith-on-sortable-grids)

[nick_w](https://stackoverflow.com/a/14597797/1081079)建议您`jquery.ui.sortable.js`在第 734 行替换一些代码

```
// move the item into the container if it's not there already
if(this.containers.length === 1) {
    this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
    this.containers[innermostIndex].containerCache.over = 1;
} else { ... 
```

和

```
// move the item into the container if it's not there already
if(this.containers.length === 1) {
    this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
    this.containers[innermostIndex].containerCache.over = 1;
} else if(this.currentContainer != this.containers[innermostIndex]) { ... 
```

*编辑：*我已将您的 jsfiddle 更改为与旧版本的 jQuery UI 一起使用，并且运行良好。这应该可以解决您的问题。

[http://jsfiddle.net/fjjqM/6/](http://jsfiddle.net/fjjqM/6/)

# symfony - symfony+映射错误

> ID：15197183
> 
> 赞同：1
> 
> 时间：2013-03-04T08:13:34.903
> 
> 标签：symfony, symfony-2.1, symfony-2.2

我正在我的 symfony 中实现 FOSUser 模块，我已经创建并配置了所有文件作为教程。这里是我的 config.yml 映射文件。

```
 namespace Acme\UserBundle\Entity;

 use FOS\UserBundle\Entity\User as BaseUser;
 use Doctrine\ORM\Mapping as ORM;

 class User extends BaseUser
 {

protected $id;

public function __construct()
{
    parent::__construct();
    // your own logic
}
} 
```

它显示以下错误..

```
 MappingException: The class 'Acme\UserBundle\Entity\User' 
was not found in the chain configured namespaces FOS\UserBundle\Entity 
```

这是我的 config.yml 文件，我在其中提到了自动加载。仍然无法正常工作。

```
 imports:
- { resource: parameters.yml }
- { resource: security.yml }

  framework:
 #esi:             ~
 #translator:      { fallback: %locale% }
 secret:          %secret%
 router:
    resource: "%kernel.root_dir%/config/routing.yml"
    strict_requirements: %kernel.debug%
form:            ~
csrf_protection: ~
validation:      { enable_annotations: true }
templating:
    engines: ['twig']
    #assets_version: SomeVersionScheme
default_locale:  "%locale%"
trusted_proxies: ~
session:         ~
fragments:       ~

# Twig Configuration
twig:
debug:            %kernel.debug%
strict_variables: %kernel.debug%

 # Assetic Configuration
 assetic:
debug:          %kernel.debug%
use_controller: false
bundles:        [ ]
#java: /usr/bin/java
filters:
    cssrewrite: ~
    #closure:
    #    jar: %kernel.root_dir%/Resources/java/compiler.jar
    #yui_css:
    #    jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar

  # Doctrine Configuration
doctrine:
dbal:
    driver:   %database_driver%
    host:     %database_host%
    port:     %database_port%
    dbname:   %database_name%
    user:     %database_user%
    password: %database_password%
    charset:  UTF8
    # if using pdo_sqlite as your database driver, add the path in parameters.yml
    # e.g. database_path: %kernel.root_dir%/data/data.db3
    # path:     %database_path%

orm:
    auto_generate_proxy_classes: %kernel.debug%
    auto_mapping: true

# Swiftmailer Configuration
swiftmailer:
transport: %mailer_transport%
host:      %mailer_host%
username:  %mailer_user%
password:  %mailer_password%
spool:     { type: memory }
fos_user:
db_driver: orm 
firewall_name: main
user_class: Acme\UserBundle\Entity\User 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T08:24:59.937

好的，这应该很容易。您需要`auto_mapping`在您的`config.yml`或手动指定“AcmeUserBundle：〜”那里启用：

1) 使用自动映射

```
doctrine:
    orm:
        auto_mapping: true 
```

2) 没有自动映射

```
doctrine:
    orm:     
        mappings:
            AcmeUserBundle: ~ 
```

请注意，如果您有多个实体管理器，您将无法使用`auto_mapping`功能。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T13:09:47.213

它也可以帮助：

添加到您的 app/AppKernel.php 中：

```
...
new Acme\UserBundle\AcmeUserBundle(),
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:21:21.493

将以下行添加到`app/AppKernel.php`文件的捆绑数组中：

```
new FOS\UserBundle\FOSUserBundle() 
```

这是为 Symfony 注册该命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T10:51:11.317

对我的解决方案：

../Entity/User.php 中的更改

命名空间 Acme\UserBundle\Entity；带有命名空间 Acme\Bundle\UserBundle\Entity；

并在 app/config.yml 更改

user_class: Acme\UserBundle\Entity\User 与
user_class: Acme\Bundle\UserBundle\Entity\User

问候， 艾米克

# aem - cq5.4 - 恢复系统管理员组

> ID：15197187
> 
> 赞同：0
> 
> 时间：2013-03-04T08:13:45.953
> 
> 标签：aem

由于用户导入失败，系统管理员组被删除。管理员用户仍然存在并且可以充当管理员，但是某些功能（例如激活页面）被禁用为按钮（右键单击页面 -> 激活作品）。

有没有办法恢复系统管理员组？我可以从另一个实例导出它并在损坏的实例上导入它吗？

谢谢帕特里克![在此处输入图像描述](../Images/83985ebc89b86b0589f4125a0f2b6df3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:03:48.057

从 CRX 菜单打开包管理器并重新安装 cq-content 包。将使用正确的 ACL 再次创建所有默认用户。

# java - 如何将日志记录与异常处理链结合起来？

> ID：15197188
> 
> 赞同：5
> 
> 时间：2013-03-04T08:13:47.437
> 
> 标签：java, logging, error-handling, coding-style, conventions

假设我有以下代码：

```
void foo() {
    /* ... */
    try {
        bar(param1);
    } catch (MyException e) {
        /* ??? */
    }
}

void bar(Object param1) throws MyException {
    /* ... */
    try {
       baz(param2);
    } catch (MyException e) {
        /* ??? */
    }
}

void baz(Object param2) throws MyException {
    /* ... */
    if (itsAllATerribleMistakeOhNo) {
        /* ??? */
        throw new MyException("oops, error.");
    }
} 
```

我想知道应该在哪里以及如何记录错误。

*   在下面的 baz() 中发生错误的地方，我确切地知道什么操作出了差错，并且可以记录该事实。
*   在顶部，我有最一般的上下文（例如，在处理过程中我们遇到错误的连接的 IP 是什么。）
*   一路上，我可能有一些在顶部或底部都不知道的上下文。

另一个复杂情况是，当您从顶部查看时，底部的错误可能不会真正被视为错误（例如，在数据库中查找某些内容失败；也许您不确定） - 所以我可能会选择.`logger.WARN()`而不是`logger.ERROR()`.

所以，上面我描述了 3 个位置（底部、顶部和沿途）——但这不仅仅是在哪里记录的问题，还有要扔什么的问题。在中间的每个级别，您都有 2x2 选项：

*   记录/不记录消息
*   抛出原始异常/将异常包装在带有添加消息的新异常中。

关于这些复杂的选择，最佳实践或一些常识是什么？

**注意：**我不是在问一般的错误处理/异常使用，只是关于上面描述的困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:23:34.247

我倾向于遵循的一些建议：

[一些最佳实践的链接](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html)

1）**跟踪发生的异常**。如果类或 API 知道异常发生的上下文，则作为异常发生的点，那么跟踪并提供适当的日志会更好。但是，如果 API 无法处理或评论确切的上下文，则 API 不应记录事件并将其留给调用者。

2）**包装异常**：当有很多异常可以抛出并且所有异常形成一个类似的组（`SQLException`）时，它提供单个异常并让您在需要时提取信息。否则，调用者需要处理的异常将会激增。

3)**重新抛出异常：**如果 API 记录异常并且用户可以对其采取一些操作，则必须重新抛出异常以告诉用户发生了一些错误情况。

4)**正确的异常原因**：异常消息不应该过于技术性让调用者理解，消息本身应该引导用户理解异常的根本原因。

**更新：** [Java 中的异常管理](https://stackoverflow.com/questions/409563/best-practices-for-exception-management-in-java-or-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:27:46.360

在日志记录方面，我更喜欢将所有日志记录保留在应用程序边界的顶部。通常我使用拦截器或过滤器以一般方式处理所有日志记录。通过这个概念，我可以保证所有内容都只记录一次。

在这种情况下，您将登录您的`foo()`方法或应用程序的任何入口点（您提到了 IP 地址，我想我们正在谈论 servlet 容器或应用程序服务器）。

然后，在过滤器/拦截器中捕获您自己的异常并根据您的需要记录它。添加 a`catch throwable`以捕获您未在代码中处理的所有其他异常并将它们记录为错误，因为显然您错过了堆栈跟踪中更下方的某些内容。

这个概念需要提前计划。您可能会使用自己的`ApplicationException`存储错误消息（字符串）以及一些严重级别（可能在枚举中）。当您进行实际日志记录时，您需要它来选择正确的日志级别。

这适用于所有情况，并且具有所有日志记录仅发生一次的优点。但是，有一种情况您仍然需要登录代码：如果您可以完全处理代码中某处的错误（即发生异常并且您可以做一些允许您继续工作而无需（重新）抛出一个例外）。由于您没有引发异常，因此不会记录任何内容。

把它们加起来：

*   以一般方式记录在**最高**位置，最好使用拦截器或过滤器。
*   **将异常包装**在您自己的 ApplicationExceptions 中，并添加严重性以及其他感兴趣的内容以登录您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:22:07.500

当我在代码中抛出异常时，我通常不会记录任何内容。例外是足够的信息。唯一的例外是，当我在我的系统边界时，也就是说，当异常将离开我的系统边界时，我会登录，因为我不确定其他系统会如何处理该错误。

当我处理异常时，我会在主动处理它们时记录它们，这意味着当我处于一个 catch 子句中时，它会做更多的事情，然后只是重新抛出异常。通常这是在顶部，但这取决于情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:22:11.530

在测试阶段抛出异常时，你应该记住：

*   使异常消息尽可能清晰。堆栈跟踪在最好的情况下可能会令人困惑，因此请确保您正在阅读的内容至少对您有意义。

*   确保异常与事件相关。如果用户输入了错误的值并且您抛出了 NullPointerException，那么您的代码是不合逻辑的并且失去了它的价值。

*   确保它包含尽可能多的**关于该事件**的信息。也就是说，保持消息的相关性。如果数据库调用出错，则将连接字符串打印到数据库，然后尝试 SQL 查询。当前使用的每个变量的状态不是必需的。

*   不要胡说八道。输入技术术语以使其看起来像是在侵入矩阵是很诱人的。在压力大的情况下它对你没有帮助，当然也对使用你的代码的其他人没有帮助。简单的英语单词总是更可取。
*   最后，**永远不要忽略一个例外。**始终确保您处理异常，并且按照我上面所述的规则以某种方式输出详细信息。

# qt - 在 Ubuntu 的 Qt 5.01 中使用 setStyleSheet 设置背景图像

> ID：15197193
> 
> 赞同：1
> 
> 时间：2013-03-04T08:14:12.913
> 
> 标签：qt, background-image, ubuntu-12.04

我有一个使用 Qt 库的 C++ 代码。当我在 Windows 中使用 Qt 4.8 库并使用 MSVS2010 运行我的代码时，一切都很好，我看到我正在使用的图像在 UI 中显示为背景图像。但是使用 Qt 5.01 的 Ubuntu 中的相同代码不显示背景图像。我拥有的代码在`main.cpp`：

```
#include <QtWidgets/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.setStyleSheet("background-image: url(myimage.png); background-repeat: none; background-position: center;");
    w.show();

    return a.exec();
} 
```

Qt 5.01 或 Ubuntu 与 Windows 有什么不同吗？我必须提到的一件事是，对于 Qt 5.01，我在文件夹`QApplication`下找到，`QtWidgets`但对于 Qt 4.8，它在`QtGui`文件夹下。这会导致问题吗？

# php - PHP 照片上传 - upload_tmp_dir 权限

> ID：15197194
> 
> 赞同：1
> 
> 时间：2013-03-04T08:14:16.907
> 
> 标签：php, linux, apache, permissions, photos

我正在使用以下目录在 apache - redhat/AWS 上上传 php.ini 照片

```
drwxrwxr-x  2 user2 user2 4096 Mar  4 08:10 datingPhotoUploads 
```

Apache 以用户 'apache' 的身份运行。

如何授予此文件夹权限，以便用户“apache”可以对其进行写入，但要尽可能安全？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:24:26.630

通常upload_tmp_dir 是/tmp。此 /tmp 目录作为一些特殊权限 ( `chmod 1777`)，其中真正的特殊权限是`1`. 这是粘性位。这意味着，对于目录，在该目录中创建的文件只能由文件所有者删除，即使任何其他`rwx`权利似乎适用于文件。

因此，将上传的文件存储在 apache 用户上传的具有**1777**权限的临时文件夹中意味着只有 apache 可以删除这些文件。一个很好的起点。

您可以在您的**datingPhotoUploads**目录中使用此权限。但是您也可以尝试使用目录的组所有权 ( `chmod user2:apache; chmod 2770 datingPhotoUploads;`) 来管理它。这里 chmod 的 770 部分表示 chmod 部分的用户和组所有者的读写和删除。这`2`意味着在此目录上创建的每个文件都将具有与该目录相同的所有权，因此`user2:apache`.

upload_tmp_dir 的主要问题是：

*   **apache 用户是否可以访问此 apache 可写目录？**如果您不使用`/tmp`but `/some/where/datingPhotoUpload`，则 apache 必须能够读取`/some`and的目录内容`/some/where`。因此，对于所有这些前面的路径，必须为其他人（或者如果 apache 是组所有者，则为组）设置 x 右侧部分。
*   **此路径可用于我的所有 php 应用程序还是仅适用于正在运行的应用程序？**这是 的主要问题`/tmp`，该目录可用于您主机上运行的所有 PHP 应用程序。在每个应用程序的基础上更改 upload_tmp_dir 可以限制对其他应用程序的访问，特别是如果您对所有 php 应用程序设置**open_basedir**限制并且只有当前应用程序允许设置`/some/where/datingPhotoUpload`。`open_basedir`
*   **这个目录是否足够大？**小心上传或大量上传。当这个目录被恶意用户填充时会发生什么？
*   **我确定没有办法在这个目录中执行任何代码吗？**在 exim 数据中上传包含 php 代码的图像是代码包含攻击的一个示例，您确定此目录在 Web 服务器目录根目录之外吗？您确定针对此目录的任何特殊路径都不允许执行 php（可能删除此目录上的 php 处理程序）吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:59:57.203

上传图片（创建文件）的文件夹应该有`-wx`权限。只写需要`--x`（与阅读和执行相同）。

要检查正在运行的用户 php，请使用：`<?php echo exec('whoami'); ?>`.

# c# - 如何从 C# 将结构作为指针传递给 C dll

> ID：15197195
> 
> 赞同：2
> 
> 时间：2013-03-04T08:14:20.130
> 
> 标签：c#, c++

我正在开发简单的电话应用程序，我正在更改松下 pbx 扩展的服务等级。为此，我正在使用具有 c++ 方法的“Tapi32.dll”。现在根据我的需要，我必须传递两个整数指针类型的参数。一个参数被正确传递，但我无法传递第二个结构类型的 argumnet。

这是我的代码...

```
[DllImport("Tapi32.dll", CharSet=CharSet.Auto, SetLastError=true)]
unsafe private static extern int lineDevSpecific(int* hLine, int* lpParams);

[StructLayout(LayoutKind.Sequential)]
public struct UserRec {
    [MarshalAs(UnmanagedType.I4)]
    public int dwMode=4;
    public int dwParam1=8;
}

unsafe static void Main(string[] args) {
    int vline=int.Parse("Ext101");
    int* hline = &vline;
    lineDevSpecific(hline, ref UserRec userrec);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:30:11.923

```
[DllImport("Tapi32.dll", SetLastError=true)]
unsafe private static extern int lineDevSpecific(int* hLine, IntPtr lpParams);

unsafe static void Main(string[] args) {
    int vline=int.Parse("Ext101");
    int* hline=&vline;

    var sizeUserRec=Marshal.SizeOf(typeof(UserRec));
    var userRec=Marshal.AllocHGlobal(sizeUserRec);
    lineDevSpecific(hline, userRec);
    var x=(UserRec)Marshal.PtrToStructure(userRec, typeof(UserRec));
    Marshal.FreeHGlobal(userRec);
} 
```

看看这个问题的答案

*   [物理磁盘大小不正确 (IoCtlDiskGetDriveGeometry)](https://stackoverflow.com/questions/15051660/physical-disk-size-not-correct-ioctldiskgetdrivegeometry/15073586#15073586)

您可以找到更多使编组更容易和更可重用的内容。

# android - 如何使ui设备独立

> ID：15197197
> 
> 赞同：1
> 
> 时间：2013-03-04T08:14:22.670
> 
> 标签：android, device

我正在开发一个 android app.for 我正在使用大小为 1024*600 的设备。我想让我的应用程序设备独立。它应该在小型设备以及比当前更大的设备上运行。如何做到这一点？我在清单文件中进行了更改。但不起作用。

```
 <supports-screens android:largeScreens="true"
                  android:smallScreens="true"
                  android:anyDensity="true"
                  android:normalScreens="true"
                  android:resizeable="true"
                  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:20:51.633

你需要好好阅读android文档。要支持您的应用程序到多个屏幕和设备，请参阅[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:21:27.903

[此](http://developer.android.com/guide/practices/screens_support.html)页面解释了与 UI 开发相关的所有内容。有很多事情要做，提供不同的 XML，使用与密度无关的像素等。仔细阅读此页面，您将了解可以做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:49:44.493

嗨 Yuva，您可以为屏幕尺寸创建不同的布局，例如

**大布局，小布局，大布局，**

所以你可以通过创建不同的布局文件夹来管理屏幕尺寸。然后将您的布局 XML 文件复制到不同大小的布局。现在它支持所有类型的屏幕尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:42:12.113

我会建议组合的东西

*   使用**dp**而不是**px**
*   尽可能多地使用相对布局
*   为不同密度和分辨率的设备创建不同的布局，例如 [支持不同的屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html)。这个链接也已经在上面两个答案中提到了
*   必须覆盖最大电话我的设置最小和最大 sdk`<uses-sdk android:minSdkVersion="3" android:targetSdkVersion="4" />`

**最后**为了更好地理解，看看[如何为不同的屏幕尺寸创建不同的布局](http://www.survivingwithandroid.com/2012/07/how-to-support-multiple-screen-in.html)

# django - Django在验证错误时以模型表单formset显示图像

> ID：15197198
> 
> 赞同：1
> 
> 时间：2013-03-04T08:14:26.963
> 
> 标签：django, django-models, django-forms

我正在构建一个用户可以创建项目的应用程序；在每个项目中，他们可以创建可以关联照片的“位置”。Photo 是一种通用的内容模型，可以与许多其他类型的模型相关联。在这种情况下，照片已经上传并与项目相关联。用户可以通过 javascript 模式窗口选择它们与位置相关联，然后向它们添加“注释”。

最初我完全手动构建它并通过 request.POST 访问视图中的照片；但是，我对注释中的文本值遇到了一些麻烦，因此决定正确地执行此操作并构建实际的模型表单集会更容易/更好。

**照片通过访问表单的 .instance 属性显示在模板中**

这工作正常 - 我可以添加照片和注释，如果之前添加了它们，也可以将它们从某个位置删除。然而，问题是 - 如果表单有任何验证错误并且用户返回到模板来处理它们，则不会显示图像本身。这似乎是因为表单没有附加实例属性。通过标签`<img src="{{MEDIA_URL}}{{ photo.instance.photo.small.url }}">`（使用简单的缩略图）在已经保存到该位置的照片上显示照片没有任何问题，但对于刚刚添加/编辑的照片则不显示。

我的问题是 - 在这种情况下如何显示漂亮的图片？

这是我的模型形式：

```
class PhotoDisplayForm(ModelForm):

class Meta:
    model = Photo
    fields = {'id', 'note', }
    widgets = {
        'note': Textarea(attrs={'rows': 3}),
        'photo': HiddenInput(),
        'id': HiddenInput(),
    } 
```

视图.py

```
def location_form(request, project_id, location_id=None):
project = Project.objects.get(id=project_id)
photos_formset = []

if location_id is None:  #creates unbound forms
    locPhotoFS = formset_factory(PhotoDisplayForm, max_num=0, can_delete=True)
    photos_formset = locPhotoFS(prefix='loc_photos')

    use_type = 'create' #this variable is passed to the template to display appropriate text
    location_form = QuadratForm(request.POST or None, project_id=project_id)

else:   ### edit an existing form  ####
    use_type = 'edit'
    location = get_object_or_404(Location, pk=location_id)
    location_form = QuadratForm(request.POST or None, project_id=project_id)

    location_photos = Photo.objects.filter(location = location)
    locPhotoFS = modelformset_factory(Photo, PhotoDisplayForm, max_num=0,  can_delete=True)
    photos_formset = locPhotoFS(queryset = location_photos, prefix='loc_photos')            

if request.method == 'POST': 
    photos_formset = locPhotoFS(request.POST, prefix='loc_photos')

    if location_form.is_valid() and photos_formset.is_valid():
        location_instance = location_form.save(commit=False)
        location_instance.project = get_object_or_404(Project, pk=project_id)
        location_instance.save()

        for form in photos_formset:
            p = form.cleaned_data['id']
            if form.cleaned_data['DELETE']:
                p.content_object = project #reassociate the photo with the project
                p.save()
            else:   
                p.content_object = location_instance
                p.note = form.cleaned_data['note'].strip()
                print p.note
                p.save()

        return HttpResponseRedirect(reverse('core.views.location', args=(project_id, location_instance.id)))
    else:
        print 'there are errors'
context = {'location_type': location_type, 'use_type': use_type,'location_form': location_form,'project_photos': project.photos.all()}
if photos_formset:
    context['photos_formset'] = photos_formset
return render(request, 'location_form.html', context) 
```

模板

```
{% if photos_formset %}
    {% if location_form.non_field_errors %}{{ location_form.non_field_errors }}{% endif %}
    {{ photos_formset.management_form }} 
    {% for photo in photos_formset %}
    {% if photo.non_field_errors %}{{ photo.non_field_errors }}{% endif %}
    <div class="photo-details original" id="{{photo.instance.id}}_photo-details">
        <button type="button" photo="{{photo.instance.id}}" class="close pull-right photo-delete" aria-hidden="true">&times;</button>
        <div class="photo-notes">{{ photo.note.label_tag }}{{ photo.note|attr:"class:photo_notes_input" }}{{ photo.errors }}</div>
    {{ photo.id }}
    {{ photo.DELETE|attr:"class:delete-photo" }}
    <div class="thumbnail-caption">
    <img src="{{MEDIA_URL}}{{ photo.instance.photo.small.url }}">
    <br>{{ photo.instance.title }}
    </div>
    </div>
    {% endfor %}
    {% endif %} 
```

这是照片模型本身，如果有用的话：

```
class Photo(models.Model):

    title = models.CharField(max_length=30)
    photo = ThumbnailerImageField(upload_to=imagePath)
    object_id = models.PositiveIntegerField()
    content_type = models.ForeignKey(ContentType)
    content_object = generic.GenericForeignKey('content_type', 'object_id')
    note = models.TextField(max_length=200, blank=True)

    def __unicode__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:06:44.160

I've figured out a (somewhat hacky) solution. Because I already have a queryset called project_photos which is being passed to the template (this creates the javascript modal list where photos can be selected to add to the location), I simply loop through these in the template and find one where the id matches (the variable photo is the current form within the formset loop):

```
 <div class="thumbnail-caption">
        {% if photo.instance.title %}
        <img src="{{MEDIA_URL}}{{ photo.instance.photo.small.url }}">
        <br>{{ photo.instance.title }}
        {% else %}
            {% with p=photo.id.value %}
                {% for pp in project_photos %}
                    {% ifequal p|stringformat:"s" pp.id|stringformat:"s" %}
                        <img src="{{MEDIA_URL}}{{ pp.photo.small.url }}">
                        <br>{{ pp.title }}
                    {% endifequal %}
                {% endfor %}
            {% endwith %}
        {% endif %}
    </div> 
```

It was necessary to use the stringformat template filter - that got me stuck for a while.

This is not a perfect solution - because those photos are still displaying in the original javascript window (obviously I could work around that) - and also the template has to loop through a potentially large list of objects for each one which could slow things down.

Any suggestions for improvement gratefully accepted.

# ruby-on-rails-3 - 获取多选选择标签值作为rails 3中的数组

> ID：15197200
> 
> 赞同：0
> 
> 时间：2013-03-04T08:14:37.650
> 
> 标签：ruby-on-rails-3

我使用了多选选择标签。

在我使用的创建方法中，

```
category= @admin.category.reject! { |c| c.empty? }.to_s 
```

将我的选择标记（选定）值作为数组保存到数据库中。

但是在更新方法中，同样的事情是无法实现的。我得到的原始格式是，

```
--- - '' - Adventure Tours - Cruises - Exploration 
```

我想把它改成一个数组

```
["Adventure Tours","Cruises","Exploration"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:25:15.277

您可以使用 ActiveRecord 提供的“序列化”方法将值作为数组存储到数据库中。

您存储这些值数组的列的类型应该是文本

例如：（如果您想在类别表中保存类别代码）

```
# In the migration file
add_column :categories, :codes, :text 

# In the model
class Category < ActiveRecord::Base
  serialize :codes
end 
```

它将被保存在数据库中

```
---
- abc 
- xyz
- pqr 
```

在从数据库中获取它之后，比如

```
Category.find(some_id).codes 
```

您将获得该给定类别记录的代码数组。

```
["abc", "xyz", "pqr"] 
```

您可以参考此文档[http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-c-serialize](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-c-serialize)（搜索标题：在文本列中保存数组、哈希和其他不可映射的对象）

# sql - 选择两个日期之间的记录

> ID：15197201
> 
> 赞同：0
> 
> 时间：2013-03-04T08:14:46.070
> 
> 标签：sql, sql-server, sql-server-2008

我有一张像这样的桌子..

```
TeacherName         | Class | Section  | SubjectId |    Date   | ToDate    |Day
--------------------------------------------------------------------------------
       Matt         |   12  | B        | Math      |2013-03-04 |2013-03-14 |Mon
       John         |   12  | A        | Phy       |2013-04-03 |2013-04-12 |Mon 
```

我想要这样的查询（不是实际的 sql 查询）...

```
Select * 
from Table 
where Class='12' and section='B' and Date= '2013-03-07' 
```

这应该给我第一行，`Matt`因为给定的日期`2013-03-07`在该行的日期范围内，从`2013-03-04`到`2013-03-14`。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T08:16:14.673

利用`BETWEEN`

```
SELECT  * 
FROM    TableName
WHERE   Class = '12' AND 
        Section = 'B' AND 
        '2013-03-07' BETWEEN DATE AND TODATE 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/c3472/1)

# tomcat - 从不同的方法加载相同的模板

> ID：15197204
> 
> 赞同：1
> 
> 时间：2013-03-04T08:14:58.310
> 
> 标签：tomcat, spring-mvc

我的案例如下所示：我有一个带有帐户列表的站点，并且每一行都有一个编辑按钮。我有一个模板，用于创建新帐户。控制器：

```
@RequestMapping(value = USERS + LECTURER + ADD, method = GET)
    public String userAdd() {
        return ADMINISTRATION + USERS + LECTURER + ADD;
    } 
```

我想使用相同的模板来编辑用户，但我有方法首先识别用户是否为 ex。讲师或学生：

```
@RequestMapping(value = USERS + "/{userId}" + EDIT, method = GET)
    public String editUser(@PathVariable(value = "userId") final long userId,
            final ModelMap modelMap) 
```

然后我想将所有用户数据（姓名、姓氏等）加载到表单（USERS+LECTURER+ADD）中。关于发布/重定向/获取模式，我该怎么做？我计划这样做：（有人单击编辑按钮）-> 转到方法映射的 USERS/{userId}/EDIT 找到用户访问级别->（如果 LECTURER）转到 USERS/LECTURER/{idUser}/EDIT 并加载所有要形成的数据（模板在 USERS/LECTURER/ADD 中）-> 保存修改后的数据并重定向到 USERS（用户列表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:37:51.807

只要您的请求映射方法返回一个字符串（或模型视图），您就可以返回您喜欢的任何模板引用。spring 将使用返回的字符串来解析模板。查看有关 requestmapping 的 spring 文档。它在那里解释得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:03:38.077

好吧，虽然我不能有两个具有相同 RequestMapping 的方法，但是当这些方法使用不同的 HTTP 方法（POST 或 GET）时，这是可能的。它解决了我的问题，因为我使用 GET 在控制器方法中加载了表单，并使用 POST（+ 重定向）保存了更改。谢谢你的回复，马丁。

# javascript - 将 MIME 类型添加到网站而不是 IIS

> ID：15197212
> 
> 赞同：0
> 
> 时间：2013-03-04T08:15:40.190
> 
> 标签：javascript, html, google-chrome, mime-types, offline-caching

当我调用 swapCache() 时，我得到一个奇怪的 invalidstateerror DOM 异常错误 11：

```
Error: An attempt was made to use an object that is not, or is no longer, usable.
at DOMApplicationCache.<anonymous> 
```

缓存似乎按预期工作（即使有 DOM 错误，我不明白）。这似乎是一个解决方案...

[离线应用缓存 INVALIDSTATEERR 的可能修复](http://jonathanstark.com/blog/possible-fix-for-offline-app-cache-invalid_state_err)

...但我不知道如何设置客户端的 MIME 类型。谷歌搜索对我没有帮助，有人能指出我正确的方向吗？

# regex - URL 中的 htaccess 和 & 符号

> ID：15197213
> 
> 赞同：2
> 
> 时间：2013-03-04T08:15:52.343
> 
> 标签：regex, .htaccess, url, url-rewriting

我有一个表格，其中每一行代表一个页面。该列`title`包含页面名称。加载页面时，原始 url 看起来像这样：`www.mysite.com/?q=france`，然后我进行快速数据库查找`WHERE title = 'france'`，就是这样。我现在使用 htaccess 使 url 更友好。像这样：`RewriteRule ^([a-zA-Z0-9#%@\s\(\)\[\]\-]+)$ page.php?q=$1`，所以我可以使用`www.mysite.com/france`. 我遇到的问题是标题有一个＆符号，比如“一和二”。查找失败。我试过

1.  添加`\&`到 htaccess，和
2.  www.mysite.com/一个 %26 二

这两个都失败了，尽管`www.mysite.com/?q=one %26 two`确实有效。

有什么方法可以让我使用“干净”的网址吗？

蒂亚！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T08:45:12.197

两件事情：

1.  URI 在通过 mod_rewrite 之前被解码，所以你不想匹配反对`%26`，你只想匹配反对`&`。
2.  您现在需要将back*重新编码*为，因为它被放置在查询字符串中，因此您需要使用该标志。所以是这样的：`&``%26``B`

    ```
    # Add a "&"----------------v
    RewriteRule ^([a-zA-Z0-9#%@&\s\(\)\[\]\-]+)$ page.php?q=$1 [L,B]
    #                     Include the "B" flag -------------------^ 
    ```

# c# - 如何在 Vcalendar 中动态设置“TO”字段？

> ID：15197218
> 
> 赞同：1
> 
> 时间：2013-03-04T08:16:22.993
> 
> 标签：c#, asp.net

导出到 Vcalendar 时，我需要在“收件人”字段中设置登录用户的电子邮件地址。

```
public static void ExportToIcalender(HttpContext ctx, DateTime startDate, DateTime endDate, string organizer, string location, string summary, string description)
{
    string DateFormat = "yyyyMMddTHHmmssZ";
    ctx.Response.ClearContent();
    ctx.Response.ContentType = "text/calendar";
    ctx.Response.AddHeader("Content-disposition", "attachment; filename=appointment.ics");

    ctx.Response.Write("BEGIN:VCALENDAR");
    ctx.Response.Write("\nVERSION:2.0");
    ctx.Response.Write("\nMETHOD:PUBLISH");
    ctx.Response.Write("\nBEGIN:VEVENT");
    **ctx.Response.Write("\nORGANIZER:MAILTO:" + organizer);**

    ctx.Response.Write("\nDTSTART:" + startDate.ToUniversalTime().ToString(DateFormat));
    ctx.Response.Write("\nDTEND:" + endDate.ToUniversalTime().ToString(DateFormat));
    ctx.Response.Write("\nLOCATION:" + location);
    ctx.Response.Write("\nUID:" + DateTime.Now.ToUniversalTime().ToString(DateFormat) + "@mysite.com");
    ctx.Response.Write("\nDTSTAMP:" + DateTime.Now.ToUniversalTime().ToString(DateFormat));
    ctx.Response.Write("\nSUMMARY:" + summary);
    description = HtmlRemoval.StripTagsRegexCompiled(description).Replace("\r\n", "\\n");
    ctx.Response.Write("\nDESCRIPTION:" + description);
    ctx.Response.Write("\nPRIORITY:5");
    ctx.Response.Write("\nCLASS:PUBLIC");
    ctx.Response.Write("\nEND:VEVENT");
    ctx.Response.Write("\nEND:VCALENDAR");
    ctx.Response.End();
} 
```

这条线对我没有帮助：

```
ctx.Response.Write("\nORGANIZER:MAILTO:" + organizer) 
```

请提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:25:50.823

您可以通过设置参加者属性来做到这一点

```
ctx.Response.Write("\nATTENDEE;CN=someone@email.com;RSVP=TRUE:mailto:someone@email.com"); 
```

# javascript - 多种语言的Highcharts图表？

> ID：15197222
> 
> 赞同：0
> 
> 时间：2013-03-04T08:16:46.897
> 
> 标签：javascript, html, highcharts, multilingual

我需要以多种语言显示大量图表。现在，发生了什么变化，显然是类别名称、标题、单位等。我想这不是 Highcharts 的问题，而是 Javascript 的问题。我可能应该创建一个多维数组，其中包含“fr”、“en”、....“title”、“units”、...“Emissions de CO2”、“CO2 Emissions”...。然后在 URL 中包含语言参数。对？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:44:06.103

您在这里有几个选择。

1.  按照你的建议去做。编写对所有语言字符串进行编码的 javascript 代码，并使用 URL 参数选择要显示的正确语言。
2.  做这个服务器端。使用 URL 参数在服务器上生成正确的图表语言

选项 2 意味着您向浏览器返回的代码更少。如果没有使用“Accept-Language”标头提供，它还可以查看请求标头以尝试确定使用哪种语言。更多信息在这里：[用于检测浏览器语言偏好的 JavaScript](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)

# ios - 如何在 iPhone 中更改 UItableview 的高度和宽度

> ID：15197223
> 
> 赞同：1
> 
> 时间：2013-03-04T08:16:56.383
> 
> 标签：ios, uitableview

我正在尝试更改表格的高度和宽度。我使用了以下代码：

```
tbl.frame=CGRectMake(0, 10, 50, 200); 
```

在`viewDidLoad`方法上，但它对表格的高度和宽度没有任何影响。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T08:23:28.343

`viewWillAppear`在方法中使用它

```
tableSettings.frame = CGRectMake(17, 35, 288, 385); 
```

希望它会奏效。总是在`viewWillAppear`. 因为在 loadTime 上它不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T08:52:34.993

如果您使用的是 UITableViewController 它不会生效，但如果您使用 UITableView 您可以尝试使用此代码并尝试使用重新加载 tableview

```
tbl.frame=CGRectMake(0, 10, 50, 200); 
[tbl reloadData]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-04T11:44:27.433

你可以使用这个方法

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
        return 50;
} 
```

# python - 将 args 传递给 URL，但不希望它显示在 django 的 URL 中

> ID：15197225
> 
> 赞同：2
> 
> 时间：2013-03-04T08:17:05.137
> 
> 标签：python, django, django-forms, django-views

我想使用反向将额外的选项传递给 django URL，但我不想在 URL 中显示这些参数

我尝试了下面提到的代码，但没有运气，抛出**NoReverseMatch**异常。

网址.py

```
urlpatterns = patterns('',
    url(r'^foo-direct/', 'myapp.views.someview', {'wo_id': 1}, name='foo-direct'),
) 
```

视图.py

```
return HttpResponseRedirect(reverse('foo-direct', kwargs={'wo_id':2})) 
```

如果我做错了什么，请提出建议。

**更新**

如何在浏览器（url）中不显示参数的情况下实现？

我的视图函数接受多个参数，我想传递这些多个参数，因此我不想在 URL 中显示所有参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:52:49.690

只需从反向函数中删除 kwargs 参数 -

```
return HttpResponseRedirect(reverse('foo-direct') 
```

更新

`wo_id`除非您`wo_id`在 URL 中包含 ，否则您将无法将反向与动态一起使用。reverse 函数会查看您的 url conf 中的所有 url。它会查找带有 , 和匹配 , 的`args`url `kwargs`，`name`并且`args`您`kwargs`传递`name`给`reverse`. 当它找到匹配项时，它会返回相应的函数（视图）。

我不知道您为什么不希望 wo_id 在您的 url 中，因此很难提出建议，但是，如果您试图保持 url 的描述性，那么也许您可以考虑使用 slug 字段而不是 id .

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T08:54:27.120

这没有任何意义。如果不通过 URL，就无法将动态参数传递给视图。它将如何到达那里？当用户实际访问该 URL 时，Django 怎么知道要使用什么参数？

# xslt - 检查项目级别

> ID：15197226
> 
> 赞同：-1
> 
> 时间：2013-03-04T08:17:25.623
> 
> 标签：xslt

嗨，我有下面的 xml 代码。

```
 <toc-div>
                <toc-item num="1.">
                    <toc-title>Introduction</toc-title>
                    <toc-pg>2.001</toc-pg>
                </toc-item>
                <toc-item num="(a)">
                    <toc-title>Transitional arrangements</toc-title>
                    <toc-pg>2.003</toc-pg>
                </toc-item>
                <toc-item num="(b)">
                    <toc-title>Classifying by numbers</toc-title>
                    <toc-pg>2.006</toc-pg>
                </toc-item>
                <toc-item num="2.">
                    <toc-title>Incorporation</toc-title>
                    <toc-pg>2.009</toc-pg>
                </toc-item>
</toc-div> 
```

在这里，如果 toc 项目有一个数字，我想要一个 xslt 给我输出 1，否则我希望它是 2。请让我知道该怎么做。我知道我可以使用条件，但我想知道如果节点包含数字，如何形成该语句。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:37:38.133

像这样的东西？

```
<xsl:template match="toc-item">
   <xsl:variable name="num" select="number(translate(@num, '.', ''))" />
   <xsl:variable name="chapter" select="1 + ($num != $num)" />

   ....
</xsl:template> 
```

在此 XSLT 中使用时：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="toc-item">
    <xsl:variable name="num" select="number(translate(@num, '.', ''))" />
    <!-- NaN != NaN evaluates to true(). -->
    <xsl:variable name="chapter" select="1 + ($num != $num)" />

    <xsl:value-of select="concat($chapter, '&#xA;')" />
  </xsl:template>
</xsl:stylesheet> 
```

并在您的示例输入上运行，这将产生：

```
1
2
2
1 
```

# compression - HBase 占用了我的空间？

> ID：15197227
> 
> 赞同：0
> 
> 时间：2013-03-04T08:17:50.193
> 
> 标签：compression, hbase, space

我目前开始使用 HBase 和 HDFS 来存储我的数据。我的第一个实验是将 12GB txt 文件（无压缩）中的数据导入 HBase 'test' 表，该表的复制设置为 3（HDFS 服务器）。

但令我惊讶的是，导入后，NameNode 报告（50070）说“DFS Used: 390.93GB”！我刚刚导入了 12GB 数据，但 HBase 占用了我的 390GB 空间。这对我来说没有任何意义。那么任何人都可以阐明如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:41:09.827

首先想到的是如何将数据存储在列族中。具体来说，如果您从文件中读取一行数据，然后将其存储到长度为 M(i) 的 N 列的列族中，那么至少会产生 SUM(M(i)) 的开销对于每行 1 <= i <= N + ( headers + timestamps / etc )。如果您想节省一些空间，请用小名称命名您的列。

除此之外，还有 WAL 日志、中间拆分和未合并的数据文件（未完全压缩/合并）。例如，如果您多次导入数据（无论出于何种原因，假设您的导入失败，或者您在中间停止它以重新开始，因为您认为有更好/更快的方法来做某事），那么，该数据也存在于 H 文件中，直到压缩运行。

如果您认为列命名不是占用您空间的原因，请尝试在您的列族/表上运行主要压缩。等到所有任务都完成运行并再次检查您的足迹......

希望能提供一些见解？祝你好运！

# javascript - 无法在主干视图中取消字符串化对象

> ID：15197236
> 
> 赞同：0
> 
> 时间：2013-03-04T08:19:08.017
> 
> 标签：javascript, object, backbone.js, stringify

我确实有从 MYSQL 返回的这个字符串化对象

```
"[{"x":278,"y":160},{"x":671,"y":79}]" 
```

当我在视图中从我的主干模型中控制台记录它时，输出是

```
[{"x":278,"y":160},{"x":671,"y":79}] 
```

当我在控制台中执行此操作时

```
obj = [{"x":278,"y":160},{"x":671,"y":79}] 
```

该字符串被完美地解析为一个对象，但是当我在我的代码中做同样的事情时，我无法访问该对象。

我试图 JSON.parse，然后我得到

```
syntaxError: Unexpected token o 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:50:23.800

我已经解决了从视图的初始化块中移动 JSON.parse(this.points) 的问题。这是有道理的，因为试图解析的数据显然还没有准备好。应该早点想到，因为在控制台中逐步模拟代码是有效的，这通常表明了这一点。感谢@TJ Crowder 的努力

# django - 从 Django1.3 迁移到 Django1.4 导致 feincms 拖放问题

> ID：15197238
> 
> 赞同：2
> 
> 时间：2013-03-04T08:19:11.840
> 
> 标签：django, mptt, feincms

在 Django 1.3 中，我非常成功地使用了 feincms 和 mptt。我终于开始更新到 Django 1.4.1 以及最新版本的 feincms 版本 1.6.3 和 mptt 版本 0.5.5 我遇到了一个问题，我在树中有三个项目（菜单树）。当我尝试将节点移动为顶级节点但列表中的第二个时，它最终成为列表中的第一个。例如，如果我将 Page1、Page2、Page3 都作为顶级节点并按照树中的顺序排列，那么我使用 feincms 句柄将 Page3 移动到 Page1 下方，它最终位于 Page1 上方。然后，我可以将 Page1 移到 Page3 上方（即到列表的顶部），然后它就到了那里。有没有其他人遇到过这个？我是否配置错误？我到处找，找不到错误的配置。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:31:32.447

我已经调试了这个问题。问题是由`fein_tree.js`. 在同一树级别内移动节点始终检测其位置，因为`left`存在其他两种情况，即 a `first-child`or`last-child`场景。

这源自 javascript 文件中的第 178 行。似乎 javascript 没有检测到`last-child`定位，因此它似乎根本没有实现`first-child`检测。

我将不得不进行更多测试以找到合适的解决方案，并可能在 github 上发布一张票

# mongodb - 为什么 getDatabaseNames() 返回一个 List 而 getCollectionNames() 在 mongo DB 中返回一个集合

> ID：15197239
> 
> 赞同：1
> 
> 时间：2013-03-04T08:19:18.547
> 
> 标签：mongodb, mongoose, mongo-java

在下面的程序`getDatabaseNames()`中返回一个值列表并`getCollectionNames()`返回一组值。为什么不都返回 a `Set`？

这是否意味着我们可以创建具有相同名称的数据库？

```
package demo;

import java.util.List;
import java.util.Set;

import com.mongodb.DB;
import com.mongodb.MongoClient;

public class Collections2 {

public static void main(String[] args) {
    MongoClient client=null;
    try {
        client=new MongoClient();

        //Lists all the database names 
        System.out.println("List of databases ");
        List<String> DBset=client.getDatabaseNames();
        for(String string:DBset){
                System.out.println(string);
        }

        //list all the collection names in school DB
        DB db=client.getDB("school");
        System.out.println("List of collections in school DB");
        Set<String> set=db.getCollectionNames();
        for (String string:set) {
            System.out.println(string);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:00:09.723

不管这听起来多么奇怪，但是是的！

这不是 Java 特有的。正如[这个相关问题](https://stackoverflow.com/questions/10908911/database-with-same-name-created-in-mongodb)所述，您也可以使用命令行工具复制此行为`mongo`。

引用问题：

> 这是如何发生的：
> 
> 1.  我已经有一个名为“test1”的数据库，它只存储带有文档的集合。
> 2.  然后，我使用它来使用 GridFS 存储文件，因此它包含二进制文件。（实际上，我认为这可能是原因，但我不知道为什么）
> 3.  现在问题发生了。当我尝试使用使用 test1 之类的命令访问“test1”时。将创建一个具有相同名称“test1”的空数据库。
> 
> 就像 show dbs 演示的那样：
> 
> ```
> test1   empty
> test1   0.0625GB 
> ```

至于如何处理，我不确定，因为Java驱动程序只有这种获取数据库的方法（截至当前稳定版，2.10.1）：

*   [MongoClient.getDB(字符串名称)](http://api.mongodb.org/java/2.10.1/com/mongodb/Mongo.html#getDB%28java.lang.String%29)

另一个函数 getUsedDatabases() 将返回 DB 实例，它仅返回此运行中 MongoDB 驱动程序的此实例已使用的 DB 对象。

这意味着，虽然在同一个运行时，您*可以* 利用这个“功能”（？），并处理同名的两个数据库，但是如果出现问题，这将是一个很难清理的情况，并且JVM 在清理混乱之前已关闭......（理论上，因为我现在无法确认这一点......当我靠近我的开发 Mongo 实例时，我会报告我的发现。）

# web-services - 在函数中使用之前验证变量

> ID：15197240
> 
> 赞同：0
> 
> 时间：2013-03-04T08:19:21.330
> 
> 标签：web-services, c#-4.0, int, signature, webmethod

我有这个签名的 ac# 函数：

```
public XmlNode getName(int a, double b){} 
```

问题是 a 变量并不总是有效的 int （用户可以将其保留为 null 或空格。在这些情况下，函数失败（不足为奇）。如何在开始之前验证 int 是否为 int功能？

* * *

编辑：

该函数是 web 服务（asmx 文件）中的 WEBMETHOD，这就是为什么用户可以在 a.xml 中键入任何值的原因。问题是当有人输入字符串而不是 int 时 web 服务崩溃，这就是我想要避免的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:32:38.780

目前，您需要将有效的 int 传递给您的方法。例如，您不能这样称呼它：

```
getName("", 3); 
```

这会给你一个编译错误，因为第一个参数不是 type `int`。

所以你有两个选择：

1.  让调用者将用户输入转换为`int`.
2.  调整您的方法签名以接受`string`,`object`或`Nullable<int>`.

`Nullable<int>`允许您的方法的调用者通过`null`. 您可以使用`a.HasValue`来检查用户是否通过`null`或有效的`int`. （[MSDN 文档](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)）

要在 .NET Framework 中转换值，您还有其他三个选项：

[int.解析](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)

此方法接受一个字符串参数并尝试将其转换为`int`. 如果转换失败或`string`is `null`，则会引发异常。

[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

此方法接受一个`string`和一个输出参数并尝试转换。如果失败，则不会抛出异常。相反，该方法返回下降，您可以决定要做什么。

[转换.ToInt32](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)

此方法采用对象类型的参数。它不会抛出 null，而是返回默认值（对于 int，这是 0）。除此之外，它在内部使用 int.Parse。

在您的情况下，您可以执行以下操作：

```
public XmlNode getName(string a, double b)
{
   if ( string.IsNullOrWhiteSpace(a))
   {
      // Handle null case
   }

   int result;
   if (!int.TryParse(a, out result)
   {
     // handle invalid int case
   }

   // Use result to get your XmlNode
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:35:51.227

用户绝不会将空格或 null 传递给该函数。你是。你给了它一个 int 的签名，如果你试图用可能为 null 或空格的东西来调用它，它就不会编译。

如果你的意思是你传递给它的输入是一个字符串，但它只对 int 有效。你想用这两个输入做什么。也许它返回null。如果不是，别怪我。。

```
public XmlNode getName(String a, double b)
{
   int someval;
   if (int.TryParse(s, out someval))
   {
       // do whatever you were going to in here, but using someval not a
   }
   else
   {
      return null;
   }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:27:36.650

您可以简单地尝试将用户输入解析为`int`. 如果失败，请不要调用该`getName`函数。

```
 var isAInt = "1";
            var isNotAnInt = "f";
            String nothing = null;
            int tmp;
            var res1 = Int32.TryParse(isAInt, out tmp); // true
            var res2 = Int32.TryParse(isNotAnInt, out tmp); // false
            var res3 = Int32.TryParse(nothing, out tmp); // false 
```

# ios - 未检测到 UITableViewCell 内的 TableView

> ID：15197243
> 
> 赞同：1
> 
> 时间：2013-03-04T08:19:26.367
> 
> 标签：ios, uitableview

我有两个 UITableViews：tableviews1 和 tableview2。

tableview2 在 tableview1 的 UITableViewCell 内。当我单击 tableview2 的 uitableviewcell 时，它没有响应，但检测到 tableview1 tableviewcell。

任何人都可以帮助解决这个问题吗？

这是我正在使用的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

 if (tableView == orderFoodDetailTableview) {

    if (cell == nil) {

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

cell.selectionStyle = UITableViewCellSelectionStyleNone;

    }
}
    else {

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

  [self addUItableViewAsSubView :cell];

        }

  cell.selectionStyle = UITableViewCellSelectionStyleGray;
    }

    return cell;
}

- (void)addUITableViewAsSubView:(UITableViewCell *)cell{

    portionSelected_yVal = [sArray count]*25;
    portionTableview = [[UITableView alloc]initWithFrame:CGRectMake(10, height+53, 140, portionSelected_yVal)];
    portionTableview.delegate = self;
    portionTableview.dataSource = self;
    portionTableview.backgroundColor = [UIColor clearColor];
    portionTableview.hidden = YES;
    portionTableview.layer.borderColor=[UIColor blackColor].CGColor;
    portionTableview.layer.borderWidth=1.0f;
    portionTableview.layer.cornerRadius=2.0f;
    [cell addSubview:portionTableview];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:25:54.390

对于您提到的目的（在您的评论中），您可以在用户触摸 tableviewcell 时动态调整`UITableViewCell`的高度。`TableView1`再次触摸该单元格，您可以将其调整回正常大小。

我希望你明白我的意思。

* * *

**编辑**

您必须检查要在`UITableView`的常用 Delegate 方法中执行操作的 tableView。

例如，假设您有两个 tableviews T1 和 T2。

然后在以下方法中，您必须首先检查哪个 tableview（T1 或 T2）正在调用该方法。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (tableView == T1)
        // Return number of sections for T1;
    else if (tableView == T2) 
        // Return number of sections for T2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == T1)
        // Return number of rows for T1;
    else if (tableView == T2) 
        // Return number of rows for T2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView == T1)
        // Create and Return cell for T1;
    else if (tableView == T2) 
        // Create and Return cell for T2;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView == T1)
        // Do stuff for T1 related actions;
    else if (tableView == T2) 
        // Do stuff for T2 related actions;
} 
```

清楚吗 ？

# android - Android 加速度计 - 检测人转身

> ID：15197246
> 
> 赞同：0
> 
> 时间：2013-03-04T08:19:37.037
> 
> 标签：android, accelerometer, gyroscope, motion, degrees

我已经开始尝试与加速度计进行交互，并且有一个有趣的问题。

有没有办法可靠地检测用户是否在现场使用手机打开 - 以及多少（例如度数）？

我尝试查找它并没有找到任何有用的结果（在消除了来自“转”和“旋转”等词的所有误报之后）。

也许我在考虑这项工作的错误技术（GPS 更好？）但我在想电话不必依赖外部输入来工作的东西。

想象一下，用户站着形成一个垂直的“轴”，手机围绕它运行。我想检测拿着手机的用户是否向左转（例如）90度。测量的度数的可靠性和准确性很好，不一定要很高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:35:11.243

使用陀螺仪完成此任务，陀螺仪为您提供围绕手机手机轴的旋转..

[http://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-gyro](http://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-gyro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:26:51.780

一般来说，答案是否定的。用户可以静止不动并转动他的手机。如果电话是固定的，那么可以，只需使用 azymuth。我会说它可能非常准确。

# php - 具有富文本格式的电子邮件

> ID：15197248
> 
> 赞同：-3
> 
> 时间：2013-03-04T08:19:40.310
> 
> 标签：php, email

我需要知道是否有任何方法可以在我的电子邮件消息中增加字体大小并以粗体显示字体。我`text/plain`用作我的内容类型。我不需要使用`text/html`. 目前，我的整个消息都以相同的字体大小显示。

我的信息是这样的：

```
// initialize the $message variable
   $message = '';
    $message  = "You have recieved a new message from your web profile.\r\n\r\n";
    $message .= "Hello, Mr. Jone Doe\r\n\r\n";
    $message .= "As you already know, once you have joined with website and have published your details there.\r\n\r\n";
    $message .= "Your profile page :\r\n";
    $message .= "www.mywebsite.com?code=2500&name=tharaga+nuwan\r\n\r\n";

   etc.................. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T08:21:13.153

纯文本无法指定字体大小、粗体等（因为不是常规的 *.txt 文件）。您需要为此使用 HTML 或 RTF。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T08:21:52.330

你必须使用`text/html`它，否则你不能格式化文本。

然后加`<b> your text</b>`粗体

我推荐你使用`php mailer class`，在那里你可以指定内容类型和其他设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:24:00.627

您必须使用`text/html`然后使用`<b>`或`<strong>`标记

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:30:21.353

```
 $to   = receipent@domain.com;
   $from = sender@domain.com; 

   $headers = "MIME-Version: 1.0" . "\r\n";
   $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
   $headers  .= "From: $from\r\n";

   $message = '';
   $message  = "You have recieved a new message from your web profile.\r\n\r\n";
   $message .= "Hello, <span style='font-size:12px;font-weight:bold'>Mr. Jone   Doe</span>\r\n\r\n"; 
```

在您的 mail() 函数中使用这些标头。使用这些标题，您可以在电子邮件中使用任何类型的 HTML。

快乐编码

# ios - 如何以编程方式添加到 NSMutableArray 并在 tableviewcells 上显示它？

> ID：15197252
> 
> 赞同：1
> 
> 时间：2013-03-04T08:20:13.533
> 
> 标签：ios, objective-c, cocoa-touch, uitableview, nsmutablearray

我有文本字段，按钮和`UItableview`我的程序。用户在文本字段中输入文本，当他单击按钮时，我想在 上显示他的文本`tableviewcell`。他将再次输入一个文本，我将在单元格 0 中显示旧文本，新文本在单元格 1 中。一次又一次......问题看起来很简单。`NSMutableArray`当用户单击发送按钮时，我添加了一个对象，但数组计数始终返回 0。任何人都可以帮助我，谢谢。

这是我的代码：

```
int s=0;

-(IBAction)btn_Click:(id)sender{

[array insertObject:txt.text atIndex:s];

s++;

[tableView reloadData];

}

//mytableview delegates

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

return  [array count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell=[[UITableViewCell alloc]init];

    cell.textLabel.text=[array objectAtIndex:indexPath.row];

    return cell;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:26:03.853

你肯定忘了创建数组

```
-(void)viewDidLoad{
   [super viewDidLoad];
   array = [[NSMutableArray alloc] init];
} 
```

如果您的代码中没有这样的行，`array`则为`nil`. 许多新的 Objective-C 开发人员都在为这样一个事实而苦恼，即向`nil`.

# c# - 另一个页面（会话）之间的列表框中的双值（并列）。我需要页面之间的列表框中的文本 + 值（可变会话）

> ID：15197253
> 
> 赞同：2
> 
> 时间：2013-03-04T08:20:15.317
> 
> 标签：c#, asp.net, session, listbox, listboxitem

# 大家好，

拜托，我有一个小问题。有 2 页。在通过 Button1 的一页中，将文本和值（“123456”、“Jan Novak”）添加到列表框。我需要在另一个页面传输中从 Listbox 中获取这两个值。当我只有 1 个值时，这没问题，但是在列表框中并排“双”之后有 2 个值。

有我的代码。

```
Default.aspx

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections.Specialized;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {
            if (Session["Session"] != null)
            {

                ListItemCollection hodnotyState = (ListItemCollection)Session["Session"];

                foreach (ListItem i in hodnotyState)
                {
                    ListBox1.Items.Add(i.Text + "|" + i.Value);

                }
                Session.Clear();
            }

        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        ListBox1.Items.Add(new ListItem("123456","Jan Novak"));
    }
    protected void Button3_Click(object sender, EventArgs e)
    {
        ListItemCollection kolekce = new ListItemCollection();

            foreach (ListItem i in ListBox1.Items)
            {

                kolekce.Add(i.Text + "|" + i.Value);

                Session["Session"] = kolekce;
            }
            Response.Redirect("page2.aspx");

    }
} 
```

page2.aspx

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections.Specialized;

public partial class page2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {
            if (Session["Session"] != null)
            {

                ListItemCollection hodnotyState = (ListItemCollection)Session["Session"];

                foreach (ListItem i in hodnotyState)
                {
                    ListBox1.Items.Add(i.Text + "|" + i.Value);

                }
                Session.Clear();
            }
        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        ListBox1.Items.Add(new ListItem("987654","John Smith"));
    }
    protected void Button3_Click(object sender, EventArgs e)
    {
        ListItemCollection kolekce = new ListItemCollection();

        Session.Clear();
            foreach (ListItem i in ListBox1.Items)
            {

                kolekce.Add(i.Text + "|" + i.Value);

                Session["Session"] = kolekce;
            }
            Response.Redirect("Default.aspx");

    }
} 
```

否则这些文本+值不在列表框中，而是“并列”。有更好的经验吗？谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:51:22.570

问题是您将 Text 和 Value 粘合到这一行中的单个字符串中：`kolekce.Add(i.Text + i.Value)`.

您有两个选择：
1）使用不同的集合来存储 KeyValuePair，这样您就可以将“键”和“值”分开

2) 将这些值一起添加到一个字符串中（就像您现在所做的那样），但使用分隔符 ( `kolekce.Add(i.Text + "|" + i.Value)`)。当您回读该集合时，在该分隔符上拆分以获取单独的键和值。

在这两种情况下，不要将单个字符串添加到您的 ListBox1，而是添加一个`ListItem`具有单独键和值的新字符串。

例子：

如果您像这样存储列表：

```
StringCollection kolekce = new StringCollection();
foreach (ListItem i in ListBox1.Items)
{
    kolekce.Add(i.Text + "|" + i.Value);
}
Session["Session"] = kolekce; 
```

*（注意：在foreach循环之后*存储在会话中，一次就足够了）
然后你需要这个来读回它：

```
if (Session["Session"] != null)
{
     StringCollection hodnotyState = (StringCollection)Session["Session"];

     foreach (string s in hodnotyState)
     {
         string[] sa = s.Split('|');
         ListBox1.Items.Add(new ListItem(sa[0], sa[1]);
     }
     Session.Remove("Session");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:21:18.450

为什么不以您希望它们显示的方式添加它们，而不是在事后尝试这样做？

Default.aspx 函数：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            if (Session["Session"] != null)
            {
                ListItemCollection hodnotyState = (ListItemCollection)Session["Session"];

                foreach (ListItem i in hodnotyState)
                {
                    ListBox1.Items.Add(i);
                }
                Session.Clear();
            }
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        ListItem newItem = new ListItem("123456", "Jan Novak");
        ListBox1.Items.Add(new ListItem(newItem.Text + newItem.Value, newItem.Value));
    }

    protected void Button3_Click(object sender, EventArgs e)
    {
        ListItemCollection kolekce = new ListItemCollection();

        foreach (ListItem i in ListBox1.Items)
        {
            kolekce.Add(i);
        }
        Session["Session"] = kolekce;

        Response.Redirect("page2.aspx");
    }
} 
```

和 page2.aspx 功能：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            if (Session["Session"] != null)
            {
                ListItemCollection hodnotyState = (ListItemCollection)Session["Session"];

                foreach (ListItem i in hodnotyState)
                {
                    ListBox1.Items.Add(i);
                }
                Session.Clear();
            }
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        ListItem newItem = new ListItem("987654", "John Smith");
        ListBox1.Items.Add(new ListItem(newItem.Text+newItem.Value, newItem.Value));
    }

    protected void Button3_Click(object sender, EventArgs e)
    {
        ListItemCollection kolekce = new ListItemCollection();
        Session.Clear();
        foreach (ListItem i in ListBox1.Items)
        {
            kolekce.Add(i);
        }
        Session["Session"] = kolekce;

        Response.Redirect("Default.aspx");
    }
} 
```

# jquery - 如何在鼠标移出时添加一秒延迟

> ID：15197263
> 
> 赞同：2
> 
> 时间：2013-03-04T08:21:17.050
> 
> 标签：jquery, performance, animation

我以为这很简单，但错了……尝试使用 .delay 和在线找到的其他方法的组合，但无法让它在没有错误的情况下工作。

当您将鼠标从 .hover-area 上移开时，我只想添加一秒钟的延迟...有什么想法吗？

提前致谢！！！

```
$('.forward').css({ opacity:0, right:-20 });
$('.backward').css({ opacity:0, left:-20 });

$('.hover-area').hover(function () {
  var conf_1 = { queue:false, duration:300, easing:'easeOutCubic' };
  var conf_2 = { queue:false, duration:400, easing:'easeOutCubic' };

  $(this).find('.backward, .forward').each(function () {
    $(this).stop()
      .animate($(this).data('animate-on'), conf_1)
      .animate({ opacity:0.7 }, conf_2);
  });
}, function() {
  var conf_1 = { queue:false, duration:550, easing:'easeOutSine' };
  var conf_2 = { queue:false, duration:300, easing:'easeOutSine' };

  $(this).find('.backward, .forward').each(function () {
    $(this).stop()
      .animate($(this).data('animate-off'), conf_1)
      .animate({ opacity:0 }, conf_2);
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:26:09.820

我认为您可以简单地使用`setTimeout`. 将整个代码包装在要执行的函数中`mouseout`，并将其与`setTimeout`.

看看这个样本或试试这个小提琴[http://jsfiddle.net/mvcGN/](http://jsfiddle.net/mvcGN/)

**HTML**

```
<div id="test">
</div> 
```

**CSS**

```
#test{
    width:200px;
    height:200px;
    background-color:#000;
} 
```

**jQuery**

```
jQuery(document).ready(function($){
    $('#test').hover(function(){
        $(this).css("background-color","#456765");
    },function(){

//wrap your code in a function like this
        function do_it_after_delay(){
        $('#test').css('background-color','#567324');
        }

//simply use setTimeout to execute is with a delay
    setTimeout(do_it_after_delay,5000);

    });
}); 
```

此代码将更改`#test`鼠标进入时的颜色，`DIV`并在鼠标离开 5 秒后再次更改颜色`DIV`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:29:22.510

一切似乎都很好，只需`.delay()`尝试一下：`.stop()``your callback function`

```
$(this).find('.backward, .forward').each(function () {
$(this).stop().delay(1000)
  .animate($(this).data('animate-off'), conf_1)
  .animate({ opacity:0 }, conf_2);
}); 
```

我在这里所做的只是`.delay()`在你的`mouseout`回调中添加了一个`function()`。

# c++ - c++ 循环遍历字符串

> ID：15197266
> 
> 赞同：1
> 
> 时间：2013-03-04T08:21:20.657
> 
> 标签：c++, algorithm

最后，我找到了将小写转换为大写并确定字符串是字母还是数字代码的解决方案，如下所示：

```
#include <cctype>
#include <iostream>
using namespace std;
int main()
{
  char ch;
  cout<<"Enter a character: ";
  gets(ch);

  if ( isalpha ( ch ) ) {
    if ( isupper ( ch ) ) {
      ch = tolower ( ch );

      cout<<"The lower case equivalent is "<< ch <<endl;
    }
    else {
      ch = toupper ( ch );
      cout<<"The upper case equivalent is "<< ch <<endl;
    }
  }
  else
    cout<<"The character is not a letter"<<endl;
  cin.get();
} 
```

如何改进上面的代码以获取字符串而不是单个字符？循环多次打印相同的语句。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:25:00.320

Fis 使用输入运算符读入一个字符串：

```
std::string input;
std::cin >> input; 
```

或者，您可以使用[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)来获取多个单词。

然后您可以使用[`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform)将字符串转换为大写或小写。

您还可以使用基于[范围的 for 循环](http://en.cppreference.com/w/cpp/language/range-for)来迭代字符串中的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:27:43.377

**更新：**这是输出一个单词的更清洁的解决方案。

```
#include <cctype>
#include <iostream>
#include <algorithm>
using namespace std;

char switch_case (char ch) {
  if ( isalpha ( ch ) ) {
      if ( isupper ( ch ) ) {
        return tolower ( ch );
     }
     else {
       return toupper ( ch );
     }
   }
  return '-';
}

int main()
{
  string str;
  cout<<"Enter a word: ";
  cin >> str;

  transform(str.begin(), str.end(), str.begin(), switch_case);
  cout << str << "\n";
} 
```

此示例中使用了std [::transform 。](http://www.cplusplus.com/reference/algorithm/transform/)

* * *

只需阅读整个单词并使用[std::string::iterator](http://www.cplusplus.com/reference/string/string/)一次迭代一个字母：

```
#include <cctype>
#include <iostream>
using namespace std;

int main() 
{
  string str;
  cout<<"Enter a word: ";
  cin >> str;

  for ( string::iterator it = str.begin(); it != str.end(); ++it ) {
    char ch = *it;
    if ( isalpha ( ch ) ) {
      if ( isupper ( ch ) ) {
        ch = tolower ( ch );

        cout<<"The lower case equivalent is "<< ch <<endl;
     }
     else {
       ch = toupper ( ch );
       cout<<"The upper case equivalent is "<< ch <<endl;
     }
   }
   else
     cout<<"The character is not a letter"<<endl;
 }
 cin.get();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:28:26.097

C++11：

```
#include <cctype>
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string s;
    cout << "Enter data: ";
    cin >> s;

    for (auto &ch : s)
    {
        if (isalpha(ch))
        {
            if (isupper(ch))
            {
                ch = tolower(ch);
                cout << "The lower case equivalent is " << ch << endl;
            }
            else
            {
                ch = toupper(ch);
                cout << "The upper case equivalent is " << ch << endl;
            }
        }
        else
            cout << "The character is not a letter" << endl;
    };
    cin.get();
} 
```

或者

```
#include <cctype>
#include <iostream>
#include <string>
#include <algorithm>

using namespace std;
int main()
{
    string s;
    cout << "Enter a string: ";
    cin >> s;

    transform(s.begin(), s.end(), s.begin(), [](char ch)
    {
       return isupper(ch)? tolower(ch) : toupper(ch);
    });
} 
```

如果你有`g++`try :`g++ test.cpp -o test -std=c++11`来编译。

# linux - 匹配不同文件中的 2 个字段

> ID：15197270
> 
> 赞同：1
> 
> 时间：2013-03-04T08:21:34.777
> 
> 标签：linux, unix, join, awk

我有2个这样的文件：

档案一：

```
1,x
2,z
3,y 
```

文件 B：

```
7,b
3,c
9,t
1,m 
```

我想遍历`File A` *（第一列）并查看（*`File B` *第一*列）中是否有任何匹配项`awk`。

预期将是：

```
1,m
3,c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:41:09.180

只需使用`awk`：

```
$ awk -F, 'NR==FNR{a[$1];next}($1 in a)' file1 file2
3,c
1,m 
```

`sort`用于有序输出的管道：

```
$ awk -F, 'NR==FNR{a[$1];next}($1 in a)' file1 file2 | sort
1,m
3,c 
```

* * *

或者，这就是（需要`join`对*输入文件进行排序）*：

```
$ join <(sort file1) <(sort file2) -j1 -t, -o"2.1,2.2"
1,m
3,c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:04:56.693

```
join -t, -o 1.1,1.2 <(sort fileA) <(sort fileB) 
```

# php - 文件缓存 VS Couchbase

> ID：15197276
> 
> 赞同：1
> 
> 时间：2013-03-04T08:22:05.460
> 
> 标签：php, caching, couchbase

我有一个渲染预生成 HTML 的场景。最初是使用文件缓存完成的。现在我将它扩展到多个服务器，可能存在在所有服务器上同步缓存 HTML 的问题。因此我选择了沙发底座。

我仅通过用 Couchbase 替换文件缓存在一台服务器上进行了尝试。与 Couchbase（安装在本地）的连接是持久的。但是我很失望地看到，从沙发库中获取 HTML 比从本地文件中获取它要花费将近 20 倍。难道我做错了什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:55:42.500

与本地文件相比，从 Couchbase 获取 20 次是什么意思？我希望单个测试可以通过文件为您提供更好的性能，因为它很可能位于同一台机器上的文件系统缓存中，因此您基本上是在同一台机器上进行内存查找（而另一个将连接到另一台服务器等）。尝试扩展您的测试场景以使用比本地系统更多的预生成文件，并查看当您添加越来越多的文件和越来越多的请求时是否获得相同的可伸缩性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:54:20.980

检查 couchbase gui，了解任何未命中率。它不应该花费 20 秒。在 memcached 上试一试，看看结果。如果它也需要 20 秒，那么它可能是别的东西。

# c++ - Clang++ 生成泄漏内存的可执行文件，关于 std::function 和 lambda

> ID：15197281
> 
> 赞同：11
> 
> 时间：2013-03-04T08:22:11.850
> 
> 标签：c++, memory-leaks, c++11, clang, std-function

ArchLinux (i686) 上的 Clang++ 3.2 用于构建以下 C++11 代码

```
#include <iostream>
#include <functional>

typedef std::function<void ()> Action;
typedef std::function<int ()> Generator;

Action act(Generator const& gen)
{
    return [=]()
    {
        std::cout << gen() << std::endl;
    };
}

int main()
{
    static Generator const gen([]() { return 0; });
    act(gen);
    return 0;
} 
```

`clang++ test.cpp -std=c++0x && valgrind --leak-check=full --log-file=tmp.log.memcheck ./a.out`然后我得到

```
==600== HEAP SUMMARY:
==600==     in use at exit: 1 bytes in 1 blocks
==600==   total heap usage: 3 allocs, 2 frees, 18 bytes allocated
==600== 
==600== 1 bytes in 1 blocks are definitely lost in loss record 1 of 1
==600==    at 0x402B124: operator new(unsigned int) (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==600==    by 0x8048D4F: std::_Function_base::_Base_manager<main::$_1>::_M_clone(std::_Any_data&, std::_Any_data const&, std::integral_constant<bool, false>) (in /home/neuront/a.out)
==600==    by 0x8048C21: std::_Function_base::_Base_manager<main::$_1>::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) (in /home/neuront/a.out)
==600==    by 0x8049455: std::function<int ()>::function(std::function<int ()> const&) (in /home/neuront/a.out)
==600==    by 0x8049283: std::function<int ()>::function(std::function<int ()> const&) (in /home/neuront/a.out)
==600==    by 0x80489B1: act(std::function<int ()> const&) (in /home/neuront/a.out)
==600==    by 0x8048A6C: main (in /home/neuront/a.out)
==600== 
==600== LEAK SUMMARY:
==600==    definitely lost: 1 bytes in 1 blocks
==600==    indirectly lost: 0 bytes in 0 blocks
==600==      possibly lost: 0 bytes in 0 blocks
==600==    still reachable: 0 bytes in 0 blocks
==600==         suppressed: 0 bytes in 0 blocks
==600== 
==600== For counts of detected and suppressed errors, rerun with: -v
==600== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0) 
```

我不确定该代码是否有任何问题（并且只导致一个字节泄漏），但如果使用 g++ 4.7 编译，则不会有内存泄漏。对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T01:26:26.880

分配发生**在这里**：

```
 return [=]() 
```

上面写着“按值捕获不是参数的所有内容”，包括“std::cout”等，这意味着复制它们。

以下代码通过了相同的编译和 valgrind 检查而没有错误，但需要注意的是程序员负责确保 act 的“gen”参数的生命周期长于 lambda 的生命周期。

```
#include <iostream>
#include <functional>

typedef std::function<void ()> Action;
typedef std::function<int ()> Generator;

Action act(Generator const& gen)
{
    return [&gen]()
    {
        std::cout << gen() << std::endl;
    };
}

int main()
{
    static Generator const gen([]() { return 0; });
    act(gen);
    return 0;
} 
```

另请参阅[http://en.cppreference.com/w/cpp/language/lambda](http://en.cppreference.com/w/cpp/language/lambda)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:37:46.663

众所周知，静态变量会在 valgrind 中为复杂对象“导致”这些内存泄漏，这些对象还会在堆上分配一些东西（例如 STL 容器等）。

实际上，没有什么可担心的，但它当然会破坏“*我的程序没有泄漏*”的事实，并使真正的泄漏更难被发现。

我假设 g++ 只是设法将生成器完全保留在 BSS 区域中，而 clang 认为需要在堆上分配一个字节。

# c++ - C++ 中的函数默认参数

> ID：15197282
> 
> 赞同：3
> 
> 时间：2013-03-04T08:22:25.053
> 
> 标签：c++, default-parameters

面试时被问过这个问题，编译后还是没看懂结果。。。

我有以下课程：

```
class Point
{
    public:
    Point(double x = 0, double y = 0) { m_X = x; m_Y = y; }

    double m_X, m_Y;
}; 
```

main.cpp 是：

```
int main()
{
    double a = 1, r = 1, xCoord = 5, yCoord = 7;

    Point p = (a+r*xCoord , a+r*yCoord);

    cout<<"X = "<<p.m_X<<" Y = "<<p.m_Y<<endl;

    return 0;
} 
```

类 p 的数据成员正在获取值：

```
m_X = a+r*yCoord, m_Y = 0 
```

现在，这是为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:25:40.530

因为逗号运算符和非显式构造函数。该表达式`(a + r * xCoord , a + r * yCoord)`是逗号运算符的应用程序并具有值`a + r * yCoord`，现在`Point`构造函数的单参数隐式形式与此值一起使用，并且第二个参数是默认值。

您可以通过创建构造函数来防止此类错误蔓延`explicit`，这通常建议用于任何可以使用一个参数调用的构造函数，除非您真的想要隐式转换。

要获得所需的行为，您需要直接初始化：

```
Point p(a + r * xCoord, a + r * yCoord); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:27:36.797

这是一个技巧问题...表达式

```
(a+r*xCoord , a+r*yCoord) 
```

是一个`comma operator`表达式，所以你的代码实际上是

```
Point p = a+r*yCoord; 
```

构造函数可以用作转换构造函数（因为 is not `explicit`），因此与编写相同：

```
Point p(a+r*yCoord, 0); 
```

要获得“预期结果”，您应该删除等号并写入

```
Point p(a+r*xCoord , a+r*yCoord); 
```

一般来说，最好使用两个不同的构造函数，而不是依赖默认参数，例如：

```
struct P2d {
    double x, y;
    P2d() : x(0), y(0) { }
    P2d(double x, double y) : x(x), y(y) { }
}; 
```

您应该始终特别注意仅采用一个参数的构造函数（或者您只能向其传递一个参数，就像在您的示例中一样），因为除非它们被声明，否则`explicit`C++ 可以隐式使用它们进行转换，有时以令人惊讶的方式。

最后一点是奇怪的是，代码中使用的逗号运算符没有产生警告，因为第一个表达式没有副作用，编译器应该能够检测到这可能是一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:25:28.367

```
Point p = (a+r*xCoord , a+r*yCoord); 
```

(表达式) 使用`comma operator`，它计算*序列*中的所有项，返回最右边的项。

正确的形式是

```
auto p = Point(a+r*xCoord , a+r*yCoord);
Point p(a+r*xCoord , a+r*yCoord); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:28:43.997

这是因为您正在使用转换运算符`double`to `Point`。使用复制初始化（带`=`符号初始化）时，`=`首先将右边的表达式转换为左边的类型，然后使用复制构造函数（至少从概念上来说）。无法使用复制初始化指定多个参数。所以你右边的表达式是`(a + r*xCoord, a + r*yCoord)`。逗号是逗号*运算符*（不是逗号标点符号），它先计算左手参数，然后计算右手参数，并得到右手参数的结果。（并且左手参数的结果被丢弃。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T08:26:20.543

你可能想改变

```
Point p = (a+r*xCoord , a+r*yCoord); 
```

进入

```
Point p (a+r*xCoord , a+r*yCoord); 
```

前者使用逗号运算符为您提供*一个*值（逗号运算符表达式中的最后一个），然后您将其分配给您的对象，这会将您的`x`成员设置为它并将您的成员默认`y`为零。

后者将使用两个参数调用构造函数。

# gwt - 使用 gwt 上传文件而不显示文件选择器，通过从默认位置选择文件来发送文件

> ID：15197284
> 
> 赞同：1
> 
> 时间：2013-03-04T08:22:37.037
> 
> 标签：gwt, file-upload

我是 GWT 的初学者，我有一个任务需要将文件上传到服务器，但这里的限制是，我们不应该显示文件选择器对话框。

使用给定的输入文件名，我们从默认文件位置选择该文件并上传它。我认为您的要求很清楚..请帮助我。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:47:20.377

`FileUpload`是 GWT 中用于上传文件的小部件，但您必须选择一个文件。[按照这个](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FileUpload.html)。

GWT 无法在客户端获取文件。如果您不想从默认位置选择文件，那么只需给出一个文本框并读取文件名，然后将此文件名传递给服务器并在那里进行足够的处理，您不能在客户端获取文件。

# android - 我的 Android 应用程序的性能优化

> ID：15197285
> 
> 赞同：0
> 
> 时间：2013-03-04T08:22:37.047
> 
> 标签：android, performance

现在我正在使用 Web 服务检索存储在服务器中的图像和文本。我正在使用 SOAP 来使用它。但问题是每次我打开应用程序时，它都会一次又一次地开始加载。这是因为在 Activity 的 oncreate 方法中，我调用了 asynctask，它在后台加载数据。

我想按照这样的顺序实现，首先我将从 web 服务中检索数据，然后将它们显示在我的应用程序中。现在，如果我关闭我的应用程序并再次打开它，或者当时没有连接互联网，它应该显示上次会话期间加载的数据。如何实现这个？？？？请分享你的想法

感谢并提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:50:41.343

您可以使用磁盘缓存从远程服务缓存位图，有关如何在 Google 开发人员网站[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html上执行此操作的更多信息](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

这将允许您存储图像并在没有连接时立即显示，或者您想在加载远程图像的同时加载图像。

根据您需要存储的文本，您可以将文本与缓存中的图像相关联，或者使用数据设置一个 ArrayList 并存储到磁盘。这里有一些更多细节[在Android中缓存数据的最佳方式](https://stackoverflow.com/questions/2004040/best-way-to-cache-data-in-android)

最后，还有一些工具可以确保您充分利用网络代码，例如 AT&T ARO 工具，运行该工具将帮助您通过将网络调用减少到最低限度来优化您的应用程序。见[http://developer.att.com/aro](http://developer.att.com/aro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:25:31.473

如果你想实现类似的东西..你应该为你的应用程序创建一个数据库，这样当你关闭你的应用程序时你的数据就不会被删除。

因为如果您的应用程序不是活动应用程序，则使用其他所有选项时，GC 可能会删除您的数据。

那么您应该创建一个服务，该服务将在每个指定的时间运行，并检查互联网连接，如果找到，则检查服务器中是否有新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:21:50.700

Android 实现了*MVC* ( *Model-View-Controller* ) 模式，您只需重用（在大多数情况下）现有的*View*类并实现您的*Controller*和*Model*。您的 Activity 是一个*Controller*。但下载数据等操作应该由*Model*完成。

因此，您必须为能够在 Activity 破坏和创建（特别是在方向改变时发生）中幸存的数据创建一个类。

`AsyncTask`从 an调用 an`Activity`是完全错误的。

此外，请记住，在某些情况下，Android 可能会终止并重新启动应用程序进程，从而导致 RAM 中保存的任何数据丢失。（不过，您肯定会看到`onPause()`通知。）但是您的应用程序必须能够从此类重启中恢复。请参阅`onSaveInstanceState(Bundle)`和 中的 Bundle 参数 `onCreate (Bundle savedInstanceState)`。

另外，请参阅： [AsyncTask 在概念上真的存在缺陷还是我只是遗漏了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:01:42.583

如果您想再次“重用”这些图像，您可以考虑将它们缓存到设备 SD 卡中。例如：

```
FileOutputStream outFile = new FileOutputStream(path);
image.compress(Bitmap.CompressFormat.JPEG, 100, outFile);
outFile.close(); 
```

然后从 sd 卡接收文件并通过某些逻辑（例如，检测设备是否连接到 Internet 等）`BitmapFactory`可能在您的活动方法中对其进行解码：`onResume()`

```
File imageFile = new File(path);
Bitmap bitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath()); 
```

记得添加访问 SD 卡的必要权限 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T08:27:47.977

我认为如果您更改设备的方向，也会发生相同的行为。这是因为在重新创建应用程序时，会调用相同的方法。`onCreate()`您应该在加载图像的函数内设置一个标志，然后在`onResume()`方法中检查是否设置了标志并停止调用该函数。看看是否有帮助。

干杯

# cuda - 如何使用 CUDA 刷新 GPU 内存（物理重置不可用）

> ID：15197286
> 
> 赞同：71
> 
> 时间：2013-03-04T08:22:41.750
> 
> 标签：cuda, gpgpu, remote-access

在内存被刷新之前，我的 CUDA 程序在执行期间崩溃了。结果，设备内存仍然被占用。

我在`nvidia-smi --gpu-reset`不支持的 GTX 580 上运行。

放置`cudaDeviceReset()`在程序的开头只会影响进程创建的当前上下文，不会刷新之前分配的内存。

我正在使用该 GPU 远程访问 Fedora 服务器，因此物理重置非常复杂。

所以，问题是 - 在这种情况下有什么方法可以刷新设备内存？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2017-10-06T02:07:10.920

检查什么正在使用您的 GPU 内存

```
sudo fuser -v /dev/nvidia* 
```

您的输出将如下所示：

```
 USER        PID  ACCESS COMMAND
/dev/nvidia0:        root       1256  F...m  Xorg
                     username   2057  F...m  compiz
                     username   2759  F...m  chrome
                     username   2777  F...m  chrome
                     username   20450 F...m  python
                     username   20699 F...m  python 
```

然后杀死你不再需要的`htop`PID

```
sudo kill -9 PID. 
```

在上面的例子中，Pycharm 吃掉了很多内存，所以我杀死了 20450 和 20699。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2018-12-14T08:24:45.630

第一类

```
nvidia-smi 
```

然后选择要杀死的PID

```
sudo kill -9 PID 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-05-18T12:18:14.923

尽管在特殊情况下没有必要这样做，但在 linux 主机上执行此操作的推荐方法是通过以下方式卸载 nvidia 驱动程序

```
$ rmmod nvidia 
```

具有适当的root权限，然后重新加载它

```
$ modprobe nvidia 
```

如果机器正在运行 X11，则需要事先手动停止，然后重新启动。驱动程序初始化过程应消除设备上的任何先前状态。

*此答案已从评论中收集并发布为社区 wiki，以将此问题从 CUDA 标签的未回答列表中删除*

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-07-19T13:26:21.887

我也有同样的问题，我在quora中看到了一个很好的解决方案，使用

```
sudo kill -9 PID. 
```

请参阅[https://www.quora.com/How-do-I-kill-all-the-computer-processes-shown-in-nvidia-smi](https://www.quora.com/How-do-I-kill-all-the-computer-processes-shown-in-nvidia-smi)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-03-31T09:34:31.487

对于使用 python 的人：

```
import torch, gc
gc.collect()
torch.cuda.empty_cache() 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-04-10T09:57:26.327

也可以使用`nvtop`，它提供了一个与 非常相似的界面`htop`，但显示了您的 GPU 使用情况，并带有漂亮的图表。您也可以直接从这里终止进程。

这是其 Github 的链接：[https ://github.com/Syllo/nvtop](https://github.com/Syllo/nvtop)

![NVTOP 接口](../Images/4a12e85ed4a444402c5e6c3cef8d8d3b.png)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-10-12T21:54:07.323

在**macOS** (/ OS X) 上，如果其他人遇到操作系统明显泄漏内存的问题：

*   [https://github.com/phvu/cuda-smi](https://github.com/phvu/cuda-smi)对于快速检查空闲内存很有用
*   退出应用程序似乎释放了它们使用的内存。退出您不需要的所有内容，或逐个退出应用程序以查看它们使用了多少内存。
*   如果这还不能解决（退出大约 10 个应用程序为我释放了大约 500MB / 15%），那么迄今为止最大的消费者是 WindowServer。您可以强制退出它，这也会杀死您正在运行的所有应用程序并将您注销。但它比重新启动要快一点，让我回到 cuda 设备上 90% 的可用内存。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-12-01T05:01:30.117

对于操作系统：UBUNTU 20.04 在终端类型中

`nvtop`

如果直接杀死消耗活动不起作用，则查找并记下 GPU 使用率最高的活动 PID 的确切数量。

```
sudo kill PID -number 
```

# magento - 从一个称为槽 ajax 的控制器调度事件？

> ID：15197287
> 
> 赞同：1
> 
> 时间：2013-03-04T08:22:52.077
> 
> 标签：magento, events, controllers, observers

我正在从控制器对动作进行 ajax 调用，在所有代码逻辑执行之后，我正在调度一个事件。不幸的是，我似乎无法与观察者一起捕捉到这个事件。

我正在使用来自控制器的标准调度事件，将其添加到我的模块 config.xml 并在我的模块observer.php 中添加功能

有没有其他人成功地尝试过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:58:02.040

问题解决了伙计们...我有一个小错误，这就是它无法正常工作的原因...但是，对于任何感兴趣的人，事件的捕获方式与没有 ajax 调用的方式相同

# mips - Mips 增加数组中的计数

> ID：15197292
> 
> 赞同：1
> 
> 时间：2013-03-04T08:23:07.043
> 
> 标签：mips

我有这段代码，它遍历一个包含 5000 个 ASCII 字符值的数组，然后计算每个字符的数量并按字母顺序将其存储到一个数组中。

```
 .text

    la $s7,results 
```

array1 是 5000 个 ASCII 字符的数组

```
 la $s6,array1

    main:
    addi $s0,$zero, 5000
    addi $s3, $zero,96
    addi $s4, $zero,65
    loop:lw $s2,0($s6)
         addi,$t1,$zero,0
         addi $s6,$s6,4
         addi, $s5,$zero, 0
         addi $s0,$s0, -1
         bge $s2, $s3, convert 
```

$s2, - $s4($s4 is @) 的减法是得到需要存储计数的位置 ex F - @ =​​ 6

```
 sub $s5, $s2, $s4 
```

我想知道这是否适合它到达正确的位置并增加计数？

```
 addi $t1, $t1, 1
        loop2: addi $s7, $s7, 4
                lw $t0,($s7)
                add $t0, $t0, $t1
                sw $t0,($s7)  
                addi, $s5,$s5, -1
                beq $s5, $zero, loop2   
         bne $s0,$zero, loop 
```

这会将字符转换为大写的 ASCII 值。

```
 convert: subi $s2,$s2, 32
        addi $s5, $s5, 0
        sub $s5, $s2, $s4
        j loop2

   .data

   results: .space 128  # Words to be used to store results 
```

# jquery - Ajax 调用中 IE8 中的 Jquery progresbar

> ID：15197296
> 
> 赞同：0
> 
> 时间：2013-03-04T08:23:27.320
> 
> 标签：jquery, jquery-plugins, kendo-ui

我面临与此处描述的完全相同的问题：[jQuery ProgressBar and IE8](https://stackoverflow.com/questions/8180678/jquery-progressbar-and-ie8)

我在 ajax 调用中有一个 jquery 进度条，每次收到服务器的响应时都会更新进度条。这在 FF 上工作得很好，但在 IE8 和 IE9 上却不行。

我也注意到，一旦我添加了一个 alert(); 在为进度条设置新值之前，一切似乎都运行良好。一旦我删除了警报（），什么都没有发生。

我可以通过添加一个间隔以某种方式解决问题，但结果并不符合要求，当然我不能在那里放置等待功能并减慢整个过程。

任何可能有帮助的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:40:57.670

我终于在这里找到了答案： [Javascript仅在使用 AJAX 的 Internet Explorer 中使用 alert() 时更新 UI](https://stackoverflow.com/questions/12215064/javascript-updates-ui-only-when-alert-is-used-in-internet-explorer-with-ajax)

超时的技巧终于完成了这项工作。

# java - Apache POI XSLF 将电影添加到幻灯片

> ID：15197300
> 
> 赞同：0
> 
> 时间：2013-03-04T08:23:39.923
> 
> 标签：java, apache-poi, powerpoint

我正在使用 Apache POI 库使用 Java 创建 powerpoint 幻灯片。我们的客户对嵌入式文本、图像和视频感兴趣。现在不需要图表等花哨的东西。我知道 XSLF 仍在开发中，还不是一个成熟的产品。

我已经使用 Apache POI HSLF 模型实现了我的目标，但唯一缺少的是嵌入的视频没有显示任何播放控件。经过一番研究，我发现是 pptx 和 ppt 文件标准使事情变得不同。所以现在为了解决这个问题，我正在从 HSLF 迁移到 XSLF。但不幸的是，XSLF 库没有任何添加视频文件的方法（与 HSLF addmovie 方法不同）。

大家推荐什么方法？有没有其他方法可以显示 ppt 文件（而不是 pptx）的播放控件？我的意思是附加的 activex 控件/媒体播放器。如果是，应该如何使用 Java 来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T16:35:03.700

[从 Powerpoint 2010 开始，](http://www.pptfaq.com/FAQ00155_Sounds-Movies_don-t_play-_images_disappear_or_links_break_when_I_move_or_email_a_presentation.htm)可以在 PPTX 文件中嵌入视频（...而不是链接它们或使用某种 ActiveX/youtube 组合）。如果您嵌入[MP4 视频，则需要安装 Quicktime 插件。](http://office.microsoft.com/en-us/powerpoint-help/compatible-audio-and-video-file-formats-in-powerpoint-2010-HA010336709.aspx#_Toc261351670)

关于播放控件，当您将鼠标移到视频形状上时，我的 PP 2010 查看器会显示它们。有时，当您直接单击图像而不是等待弹出窗口时，它们再也不会出现。

以下代码...

*   获取 MPEG（也可以是本地文件）
*   在第 5 秒创建帧的快照，用作预览图像。我在这里使用了[Xuggle](http://www.xuggle.com/xuggler)库，但当然任何其他库也可以（...普通[JMF](http://www.oracle.com/technetwork/java/javase/download-142937.html)（没有扩展包）无法处理（这个）MPEG）
*   嵌入图像和视频
*   并添加一些任意的 ;) 东西，PP 需要实际播放视频

该代码位于[XSLF 示例](https://svn.apache.org/viewvc/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xslf/AddVideoToPptx.java.txt?view=markup)中。

*（2016-02-06 更新：将代码移至 POI 示例，因此只有一个地方需要修改以防新功能。此外 POI 3.13 中有一个回归，导致在将电影添加到媒体目录后无法添加图片- 这已在即将发布的 POI 3.14 中修复）*

# android - 在android中更改单行gridview的背景

> ID：15197302
> 
> 赞同：7
> 
> 时间：2013-03-04T08:23:53.613
> 
> 标签：android, android-layout, gridview, android-gridview

我目前正在开发一个 android 应用程序，该应用程序需要显示一个书架，其中每行最多包含 3 个图像。我为此使用了gridview。但是我被困在一个地方，我无法在gridview中更改整行的背景。谁能告诉我该怎么做？

用于gridview的适配器

```
private class SampleGridAdapter extends BaseAdapter{

    private Context context;
    private int[] images = {"R.drawable.img1","R.drawable.img2","R.drawable.img3","R.drawable.img4","R.drawable.img5","R.drawable.img6","R.drawable.img7"};
    public SampleGridAdapter(Context context) {
        super();
        this.context = context;

    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return images.length;
    }
    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        // TODO Auto-generated method stub

        View v = null;
        ImageView coverImageView;

        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            v = inflater.inflate(R.layout.bookgrid, null);
            coverImageView = (ImageView) v.findViewById(R.id.coverImageView);   
            coverImageView.setImageResource(images[position]);

            coverImageView.setScaleType(ImageView.ScaleType.FIT_XY);

        return v;
    }
} 
```

bookgrid.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/shelfimage" >

<ImageView
    android:id="@+id/coverImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:paddingBottom="0dp"
    android:paddingLeft="25dp"
    android:paddingTop="6dp"
    android:src="@drawable/ic_launcher" />
 </RelativeLayout> 
```

我在 gridview 声明中将列数设置为 3。在这里，我将 xml 文件中的背景设置为 android:background="@drawable/shelfimage"。但它是为每个项目单独设置背景......我想为每一行设置一个图像作为背景（有3个项目）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:07:21.893

你可以看看[这个](http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/)例子，它会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:17:46.227

答案是我对你的问题的理解。

如果在这种情况下，您正在为 gridview 使用一些适配器，则在适配器类和 getView 方法中检查位置并将颜色设置为您正在膨胀的布局。在适配器类 getview 方法中，可以针对特定位置更改膨胀视图的 bg。

如果您使用适配器实现了视图，则逻辑可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T11:04:15.187

我认为实现这一点的唯一方法是为 gridview 设置在垂直方向（或两者之一）重复的背景图像，示例代码：

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.bg_image);
BitmapDrawable bitmapDrawable = new BitmapDrawable(bmp);
bitmapDrawable.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT);
gridView.setBackgroundDrawable(bitmapDrawable); 
```

# vb.net - Convert.ToInt16 vb.net

> ID：15197303
> 
> 赞同：1
> 
> 时间：2013-03-04T08:23:55.277
> 
> 标签：vb.net, visual-studio-2010

我正在使用以下代码作为自己的学习进度：

```
Public Class Form1

    Private Sub BtnAntwoord_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnAntwoord.Click

        Dim testNummer As Integer
        Dim uitkomst As Single
        Dim waarde1 As Integer = Convert.ToInt16(txtNummers1)
        Dim waarde2 As Integer = Convert.ToInt16(txtNummers2)

        uitkomst = (waarde1 * waarde2)

        testNummer = Convert.ToString(uitkomst)

        MsgBox(testNummer)
    End Sub
End Class 
```

我想要完成的是一个带有 2 个文本字段和一个按钮的小窗口，当按下该按钮时，会在弹出窗口中显示问题“waarde 1 * waarde2”的答案。

当我执行此代码时，会出现以下错误：

```
 InvalidCastException was unhandled 
```

并且“waarde1 As Integer = Convert.ToInt16(txtNummers1)”这一行被突出显示

我本身并不是在寻找答案，只是了解为什么这不起作用，因为我对 vb.net 非常陌生，并且我正在努力扩展我对语言的了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:26:23.540

如果`txtNummers1`并且`txtNummers2`是文本框那么你应该写

```
 Dim waarde1 As Short = Convert.ToInt16(txtNummers1.Text)
    Dim waarde2 As Short = Convert.ToInt16(txtNummers2.Text) 
```

您不能将`TextBox`类型转换为 Integer 类型。您将 TextBox 的 Text（字符串类型）属性转换为 Integer，假设该属性实际上包含一个数字。
另外，为什么要转换成 16 位数字类型，然后将结果分配给 32 位类型呢？

更好的方法如下

```
 Dim waarde1 As Short 
    Dim testNum as String = txtNummers1.Text
    if Int16.TryParse(testNum, waarde1) Then
         Console.WriteLine("It is a 16 bit number " + waarde1.ToString)
    else
         Console.WriteLine("Not a 16 bit number " + waarde1.ToString) 
```

[这里是 TryParse 上的 MSDN](http://msdn.microsoft.com/en-us/library/system.int16.tryparse.aspx)

# flot - JQuery Flot 不绘制条形图 + 如何在工具提示中显示数据中的值？

> ID：15197308
> 
> 赞同：0
> 
> 时间：2013-03-04T08:24:02.643
> 
> 标签：flot

我对 JQuery Flot 图表有疑问。它根本不显示条形图（data_campaigns），但（data_campaigns2）显示得很好。

我还想知道如何在工具提示中显示两个图表中的数据。现在工具提示只显示随机 X 和 Y 变量，但我希望它显示点击量。

```
//Chart - Campaigns
      $(function () {
var data_campaigns = [
[1359766800,8],[1359853200,4],[1359939600,11],[1360026000,11],
[1360112400,15],[1360198800,12],[1360285200,16],[1360371600,7],
[1360458000,9],[1360544400,6],[1360630800,13],[1360717200,12],
[1360803600,6],[1360890000,13],[1360976400,3],[1361062800,9],
[1361149200,18],[1361235600,18],[1361322000,12],[1361408400,14],
[1361494800,7],[1361581200,5],[1361667600,3],[1361754000,9],
[1361840400,15],[1361926800,14],[1362013200,4],[1362099600,0],
[1362186000,0],[1362272400,0]];

var data_campaigns2 = [
[1359766800,8],[1359853200,4],[1359939600,11],[1360026000,11],
[1360112400,15],[1360198800,12],[1360285200,16],[1360371600,7],
[1360458000,9],[1360544400,6],[1360630800,13],[1360717200,12],
[1360803600,6],[1360890000,13],[1360976400,3],[1361062800,9],
[1361149200,18],[1361235600,18],[1361322000,12],[1361408400,14],
[1361494800,7],[1361581200,5],[1361667600,3],[1361754000,9],
[1361840400,15],[1361926800,14],[1362013200,4],[1362099600,0],
[1362186000,0],[1362272400,0]];

        var plot = $.plot($("#placeholder"),
            [ { data: data_campaigns,color:"rgba(0,0,0,0.2)", shadowSize:0, 
            bars: {
              show: true,
              lineWidth: 0,
              fill: true,
              fillColor: { colors: [ { opacity: 1 }, { opacity: 1 } ] }
          }
      } , 
      { data: data_campaigns2, 

          color:"rgba(255,255,255, 0.4)", 
          shadowSize:0,
          lines: {show:true, fill:false}, points: {show:false},
          bars: {show:false},
      }  
      ],     
      {
        series: {
         bars: {show:true, barWidth: 0.6}
     },
     grid: { show:false, hoverable: true, clickable: false, autoHighlight: true, borderWidth:0   },
      yaxis: {
            min: 0
        },
        xaxis: {
            tickDecimals: 0
        }

 });

        function showTooltip(x, y, contents) {

            console.log(x+","+y);

            var d = new Date(contents *1000);
            var curr_date = d.getDate();
            var curr_month = d.getMonth();
            curr_month++;
            var curr_year = d.getFullYear();

            $('<div id="tooltip"><div class="date">'+curr_date + "." + curr_month + "." + curr_year+'<\/div><div class="title text_color_3">'+x+'%<\/div> <div class="description text_color_3">CTR<\/div><div class="title ">'+y+'<\/div><div class="description">Clicks<\/div><\/div>').css( {
                position: 'absolute',
                display: 'none',
                top: y - 125,
                left: x - 40,
                border: '0px solid #ccc',
                padding: '2px 6px',
                'background-color': '#fff',
                opacity: 10
            }).appendTo("body").fadeIn(200);
        }

        var previousPoint = null;
        $("#placeholder").bind("plothover", function (event, pos, item) {
            $("#x").text(pos.x.toFixed(2));
            $("#y").text(pos.y.toFixed(2));
            if (item) {
                if (previousPoint != item.dataIndex) {
                  previousPoint = item.dataIndex;
                  $("#tooltip").remove();
                  var x = item.datapoint[0].toFixed(2),
                  y = item.datapoint[1].toFixed(2);
                  showTooltip(item.pageX, item.pageY,
                    x);
              }
          }
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T08:53:41.713

1) the **x, y** parameters in function `showTooltip(x, y, contents)` are actually **not x,y values from your chart, bude x, y coordinates where to place the tooltip** at. The tooltip value (text displayed in tooltip) is in parameter **contents**, so instead of:

```
$('<div id="tooltip"><div class="date">'+curr_date + "." + curr_month + "." + curr_year+'<\/div><div class="title text_color_3">'+x+'%<\/div> <div class="description text_color_3">CTR<\/div><div class="title ">'+y+'<\/div><div class="description">Clicks<\/div><\/div>').css( {... 
```

you need something like this:

```
$('<div id="tooltip">' + contents + '<\/div>').css({... 
```

with contents variable filled with whatever you need.

2) you need to set mode option

```
xaxis: {
    mode: 'time',
    ...
} 
```

and play a bit with the options to display bars. in the jsfiddle example below i set the `lineWidth: 10` and changed some colors

3) Blake's advice about the timestamps is right. (not solving the bar visibility, but solving the correct x axis date values), when populating the data array, multiply them by 1000 to be displayed correctly

here is the [jsFiddle](http://jsfiddle.net/9x7aJ/2145/), have a look at it

# android - 从数据库查询文本以在 TextView 中显示，但文本不按顺序排列

> ID：15197311
> 
> 赞同：2
> 
> 时间：2013-03-04T08:24:24.753
> 
> 标签：android, database, textview

我从数据库中查询了文本（标题）并将其显示在 TextView 中，但是当它显示时，它不按顺序显示，但它只显示一个标题，并且该标题位于标题列的最后一个索引中。

我怎样才能全部显示并从头到尾排序？

图像适配器

```
public class ImageAdapter extends BaseAdapter {

    private ArrayList<HashMap<String, String>> MyArr = new ArrayList<HashMap<String,String>>();
    Cursor cursor = dataSource.database.rawQuery("SELECT * FROM "+CafeDbOpenHelper.TABLE_CAFE, null);

    public ImageAdapter(Context c){
        context = c;
    }
    @Override
    public int getCount() {
        return cursor.getCount();           
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View converView, ViewGroup parent) {
        ViewHolder viewHolder = new ViewHolder();
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if(converView == null){
            converView = inflater.inflate(R.layout.grid_item, null);
        }
        viewHolder.imageview = (ImageView) converView.findViewById(R.id.imv_card_cafe);
        viewHolder.txtTitle = (TextView) converView.findViewById(R.id.txt_title);

        while (cursor.moveToNext()) {
            Log.i("db", " return "+cursor.getString(cursor.getColumnIndex(TAG_CAFE_TITLE)));
                viewHolder.txtTitle.setText(cursor.getString(cursor.getColumnIndex(TAG_CAFE_TITLE)));
        }

        String imagePath = Environment.getExternalStorageDirectory().toString()+"/downloadedfile.png";   
        viewHolder.imageview.setImageResource(mThumb[position]);

        return converView;
    }
} 
```

Logcat db 标签是来自数据库的文本

```
03-04 14:44:00.411: D/AbsListView(22842): Get MotionRecognitionManager
03-04 14:44:00.426: I/ACTION(22842): Database is open
03-04 14:44:00.442: I/number(22842): return11 rows
03-04 14:44:00.450: I/ACTION(22842): Database is open
03-04 14:44:00.504: I/db(22842):  return Kiriya Café
03-04 14:44:00.504: I/db(22842):  return Brown Coffee and Bakery
03-04 14:44:00.504: I/db(22842):  return The Blue Pumpkin - Riverside
03-04 14:44:00.504: I/db(22842):  return Black Canyon Coffee
03-04 14:44:00.559: D/libEGL(22842): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
03-04 14:44:00.575: D/libEGL(22842): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
03-04 14:44:00.575: D/libEGL(22842): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
03-04 14:44:00.684: D/OpenGLRenderer(22842): Enabling debug mode 0
03-04 14:45:35.348: I/ACTION(22842): Database is close 
```

图片

![在此处输入图像描述](../Images/3b1653f1790a5ccf0db1abadf0955fb6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:30:59.117

关于标题的顺序，您只需修改您的选择查询，以便检索已排序的行：

```
"SELECT * FROM "+CafeDbOpenHelper.TABLE_CAFE + " ORDER BY YOUR_COLUMN_TITLE", null 
```

现在至于为什么只显示一个文本视图，它与您编写逻辑的方式有关：

```
viewHolder.txtTitle = (TextView) converView.findViewById(R.id.txt_title);

while (cursor.moveToNext()) {
      Log.i("db", " return "+cursor.getString(cursor.getColumnIndex(TAG_CAFE_TITLE)));
      viewHolder.txtTitle.setText(cursor.getString(cursor.getColumnIndex(TAG_CAFE_TITLE)));
} 
```

您基本上在该循环中修改了相同的 textview 四次，因此它自然会设置为您从数据库中检索到的最后一个（恰好是 Black Canyon Coffee）

您需要 1) 动态创建 textview 并将其添加到现有视图或 2) 创建放置在布局中的四个 textview 并在 while 循环中适当地设置它们。

编辑：通常，您会希望使用选项#1，因为当您使用不断变化的数据库时（并且也便于将来修改），它无疑是最明智的方法。但是，如果您在项目规范中绝对确定您的表格中将有固定数量的行（例如，因为您的应用程序中只能有四个咖啡馆，并且您只会交换表格以加载不同的名称） ，那么快速而肮脏的方法是制作四个文本视图并通过迭代它们来适当地设置每个文本视图。

这个答案主要是出于猜测，因为您没有告诉我们您打算如何使用/操作数据库，所以这完全取决于您的判断。

# python - Python Twitter search.tweets 直到

> ID：15197319
> 
> 赞同：3
> 
> 时间：2013-03-04T08:25:03.447
> 
> 标签：python, twitter, python-twitter

我正在使用来自[https://github.com/sixohsix/twitter的 Python Twitter 搜索 api](https://github.com/sixohsix/twitter)

当我尝试使用“直到”参数搜索查询时，搜索不返回任何内容

```
from twitter import *

t = Twitter(auth=OAuth(....))

t.search.tweets(q = 'hello', count=3, until='2012-01-01')
{u'search_metadata': {u'count': 3, u'completed_in': 0.007, u'max_id_str': u'9223372036854775807', u'since_id_str': u'0', u'refresh_url': u'?since_id=9223372036854775807&q=hello%20until%3A2012-01-01&include_entities=1', u'since_id': 0, u'query': u'hello+until%3A2012-01-01', u'max_id': 9223372036854775807L}, u'statuses': []} 
```

而当我没有“直到”搜索时，它会正常找到推文。当我在 twitter.com/search 上手动尝试搜索时

```
https://twitter.com/search?q=hello%20until%3A2012-01-01&src=typd 
```

它还可以正常查找推文。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T10:57:13.843

这都是关于 twitter api 搜索限制的。引用自[文档](https://dev.twitter.com/docs/using-search)：

> 您无法使用搜索 API 查找大约一周前的推文

例如，尝试运行

```
print t.search.tweets(q='hello', count=3, until='2013-03-01') 
```

你会看到结果。

另外，看看这个[答案](https://stackoverflow.com/questions/7655403/twitter-api-tweets-for-time-range)。

# java - “无法从静态上下文引用非静态方法”错误的问题

> ID：15197321
> 
> 赞同：0
> 
> 时间：2013-03-04T08:25:06.723
> 
> 标签：java

我在尝试编写一个列出特定类中所有名称的方法时遇到此错误的问题。（底部错误）我尝试了一些事情，但对于我的生活，无法弄清楚。请帮忙，谢谢。

猫班：

```
public class Cat
{
// instance variables 
private String name;
private int yearOfBirth;
private int weightInKilos;

public Cat() {
   setName("");
   setYearOfBirth(0);
   setWeightInKilos(0);
}

/**
 *  
 */
public Cat(String newName, int newYearOfBirth, int newWieghtInKilos )
{
    setName(newName);
    setYearOfBirth(newYearOfBirth);
    setWeightInKilos(newWieghtInKilos); 
}

public String getName(){
    return name;
}

public int getYearOfBirth(){
    return yearOfBirth;
}

public int getWieghtInKilos(){
    return weightInKilos;
}

public void setName(String newName){
    if (newName != null ){
    name = newName;
    }
    else{
        System.out.println("Invalid Name");
    }

}

public void setYearOfBirth(int newYearOfBirth){
    if (yearOfBirth >= 0){
    yearOfBirth = newYearOfBirth;
    }
    else{
        System.out.println("Year Of Birth must not be negative!");
    }
}

public void setWeightInKilos(int newWeightInKilos){
    if (weightInKilos >= 0){
    weightInKilos = newWeightInKilos;
    }
    else{
        System.out.println("Weight must not be negative!");
    }

}

} 
```

类猫舍：

```
import java.util.ArrayList;

public class Cattery
{
// instance variables - replace the example below with your own
private ArrayList <Cat> cats;
private String businessName;

/**
 * Constructor for objects of class Cattery
 */
public Cattery(String NewBusinessName)
{
    cats = new ArrayList <Cat>();
    NewBusinessName = businessName;
}

public void addCat(Cat newCat){

    cats.add(newCat);
}

public void indexDisplay(int index) {
    if((index >= 0) && (index <= cats.size()-1)) {
        System.out.println(index);
    }
    else{
        System.out.println("Invalid index position!");
    }
}

public void removeCat(int indexremove){
     if((indexremove >= 0) && (indexremove <= cats.size()-1)) {
         cats.remove(indexremove);
        }
    else{
        System.out.println("Invalid index position!");
    }
}

public void displayNames(){
   System.out.println("The current guests in Puss in Boots Cattery:");
   for(Cat catNames : cats ){
       System.out.println(Cat.getName());   //ERROR; non static method cannot be referenced from a                  static context..wtf

}
}
} 
```

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:26:28.750

采用：

```
System.out.println(catNames.getName()); 
```

`getName`是非静态函数，因此您需要在该类的实例上使用它，就像您在`cats`列表中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T08:27:30.283

当你有一个实例方法时，你需要在类*的特定实例上*调用它。

这里：

```
System.out.println(Cat.getName()); 
```

你试图在`Cat` *课堂*上调用它。你要：

```
for (Cat cat : cats ) {
    System.out.println(cat.getName());
} 
```

请注意，我也将迭代变量的名称从`catNames`更改`cat`为 - 因为该值只是对“我们现在正在查看的猫”的引用。这不是猫的*名字*，也不是多只猫（或猫的名字）——它是一只猫。仔细命名变量非常重要——它可以帮助正确的代码*看起来*正确，错误的代码*看起来*不正确。`getName()`调用名为 ... 的变量没有意义`catNames`（名称集合的名称是什么？）但在名为 . 的变量上调用它*绝对*有意义`cat`。

原始代码中的另一个警告是`for`循环体没有使用迭代变量——这几乎总是表明有问题。固定版本当然可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:28:15.783

```
for (Cat cat : cats) {
    System.out.println(Cat.getName());
} 
```

这里你需要使用 cat，而不是 Cat。所以使用

```
for (Cat cat : cats) {
    System.out.println(cat.getName());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:28:43.280

```
Cat.getName() this line means getName() should be static method in Cat class, but's not as such. 
```

所以`getName()`通过 instacne 访问方法。

```
System.out.println(catNames.getName()); 
```

# c# - 在 VisualStudio 解决方案中结合 C# 和 C++

> ID：15197323
> 
> 赞同：0
> 
> 时间：2013-03-04T08:25:10.857
> 
> 标签：c#, c++, qt, boost, stl

我有一个用 C++ 编写的相当复杂的项目，我正在尝试将其转换为 C# 解决方案。我认为将核心留在 C++ 中作为 VC++ 类库是最容易的。

在开始之前，我尝试以这种方式编写简单的 C++ 类并在 C# 项目中使用它。我遇到的第一个问题是 STL（在核心 STL 中，使用了 Boost 和 QT）：我不能将 C# List 作为 std::list 传递给 C++ 方法。

有什么简单的方法可以在 C# 中将 C++ 代码与 STL、Boos 和 QT 一起使用，或者将其转换为 C# 更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:44:12.560

无法将 C++ 转换为 C#。而且也没有理由这样做。您可以做一些事情：

1）用C#重写GUI

2) 用 C++/CLI 包装 C++ 类并从 C# 中使用它们

3）如果您的应用程序主要是 Gui 并且背后的逻辑不是太复杂，您可以使用 C# in `unsafe`block 中的 C++ 代码部分。

您绝对不应该做的是将 c++ 代码逐行传输到 c# 中。

# batch-file - 使用 txt 中的批处理文件搜索并替换值

> ID：15197325
> 
> 赞同：0
> 
> 时间：2013-03-04T08:25:13.423
> 
> 标签：batch-file

我有一个名为 config.txt 的文本文件，这是文件中包含的内容：

> ```
> FacotyReset = No 
> Size = 15    
> Line = 12    
> MarkValue = 22 
> ```

我想在txt中搜索找到对应的值... ex。在这种情况下等于 15 的大小并将其更改为 20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:42:49.990

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
>config.txt.tmp ( <nul set /p "=" )
for /f "delims=" %%A in (config.txt) do (
    set "found=false"
    for /f "tokens=1,2,3,*" %%W in ("%%A") do (
        if "%%W"=="Size" (
            echo %%W %%X 20 %%Z>>config.txt.tmp
            set "found=true"
        )
    )
    if "!found!"=="false" echo %%A>>config.txt.tmp
)
rem del config.txt
rem ren config.txt.tmp config.txt
endlocal 
```

# ios - 更改应用程序语言并更新版本

> ID：15197333
> 
> 赞同：2
> 
> 时间：2013-03-04T08:25:41.937
> 
> 标签：ios, localization, app-store-connect

去年我加入了 Apple Store。我的应用程序语言是 iTunes Connect 中的英语。我用土耳其语创建了应用程序。我没有在我的应用程序中进行任何本地化。我只是将土耳其语文本粘贴到标签、textView 等控件中。

现在我想在 iTunes 连接和应用商店中显示应用语言“土耳其语”。我已经提交了新版本并在 info.plist 中设置了“土耳其语”本地化，但没有任何改变。我能做些什么来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T19:47:42.223

您是否尝试在此面板中添加不同国籍的语言？ ![在此处输入图像描述](../Images/da8c8b9e4dfb916b78d5c33e64adbf8b.png)

# iphone - 停止滚动滚动视图中的最后一个对象

> ID：15197334
> 
> 赞同：1
> 
> 时间：2013-03-04T08:25:45.097
> 
> 标签：iphone, ios, objective-c, xcode

![滚动视图问题](../Images/29460ce6d5b66ecacc30b5150371426d.png)

正如您在附加图像中看到的那样，如果我继续滚动滚动视图中的最后一个对象，我可以继续滚动然后查看背景。有没有办法在 xcode 中限制这一点，所以你不能滚动过去滚动视图中的最后一个对象？

我是 xcode 的新手，虽然我相信我的术语正在影响这个问题，但我确实尝试过研究这个问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:28:46.900

您需要设置`scrollView.contentSize`大小，使其适合滚动视图中的所有对象。如果您有办法确定哪个对象最低，那么您可以使用它的原点 + 高度来确定内容大小的高度。

```
float maxHeight = 0;

for(UIView *v in [scrollView subviews]){
    if(v.frame.origin.x + v.frame.size.height > maxHeight)
        maxHeight = v.frame.origin.x + v.frame.size.height;
}

self.scrollView.contentSize = CGSizeMake(scrollView.frame.size.width, maxHeight+5); 
```

# overflow - MigraDoc PDFSharp 表溢出文本

> ID：15197335
> 
> 赞同：1
> 
> 时间：2013-03-04T08:25:50.130
> 
> 标签：overflow, pdfsharp, migradoc

我正在用 MigraDoc 创建一个大表。

我有两个问题我不知道如何解决：

1.  如果单元格的内容（段落）太长，它会中断，我的单元格中有 2 行。我不想要这种行为。我希望隐藏不适合单元格第一行的文本。

2.  如果一个词太长，我还希望隐藏单元格之外的字符。现在它们显示在下一个单元格中：/并与下一个单元格的内容重叠......

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:38:14.677

此行为是设计使然。

在添加文本之前使用 MeasureString 测量文本并在正确的位置截断（如果需要，可以添加“...”）。

另见：http:
[//forum.pdfsharp.net/viewtopic.php?p=6158#p6158](http://forum.pdfsharp.net/viewtopic.php?p=6158#p6158)

# sql - SQL 中的 NormDist 和平方根计算

> ID：15197338
> 
> 赞同：0
> 
> 时间：2013-03-04T08:26:00.007
> 
> 标签：sql, sqlcommand

请检查以下屏幕截图以进行数据分类。

![在此处输入图像描述](../Images/d551be761ba8dd0a43b79a9c5bb9d6e1.png)

只是想知道是否有任何简单的方法可以使用 SQL 命令计算 NORMDIST、SQRT 和 PRODUCT，就像我在下面计算 AVG 和 VAR 一样。

**请注意我用于其他目的的以下代码不适合屏幕截图值。**

`SELECT state, AVG([v2t] * 1.0) FROM portability WHERE state = 'Queensland' GROUP BY state`

`SELECT state, STDEV([v2t] * 1.0) FROM portability WHERE state = 'Queensland' GROUP BY state`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:33:29.967

假设 Oracle：在 Oracle/PLSQL 中，sqrt 函数：

平方（n）

例如 sqrt(9) 将返回 3

sqrt(37) 将返回 6.08276253029822

sqrt(5.617) 将返回 2.37002109695251

对于 NormDist，请尝试 CUM_DIST。聚合函数记录在 [http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions003.htm#SQLRF20035](http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions003.htm#SQLRF20035)

我不相信 Oracle 具有产品功能。

# c++ - 如何在 VC++ 中重新启动我自己的应用程序

> ID：15197345
> 
> 赞同：5
> 
> 时间：2013-03-04T08:26:25.137
> 
> 标签：c++, visual-c++, application-restart

我正在开发 VC++ 应用程序。

弄清楚如何重新启动我自己的应用程序

有人可以举一些例子吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:34:22.460

编写一个程序，它将：

*   等待您的应用程序终止
*   再次运行它。

调用此程序，然后退出您的应用程序。这种解决方案被广泛使用。

* * *

另外的选择：

使用特定参数（例如 /restarted）调用您的应用程序。在执行任何任务之前，新实例应该等待旧实例终止。然后关闭旧实例。

# scala - “参数化的重载隐式方法作为视图边界不可见”编译器警告是什么意思？

> ID：15197349
> 
> 赞同：4
> 
> 时间：2013-03-04T08:26:37.547
> 
> 标签：scala, compiler-warnings, implicit-conversion

我将两个实用程序方法声明为`implicit`

```
class MyClass { ... }
object MyClass {
   implicit def finish: MyClass[Any,Nothing,Unit] = finish(());
   implicit def finish[R](result: R): MyClass[Any,Nothing,R] = ...
} 
```

我收到编译器警告：

> 参数化的重载隐式方法作为视图边界不可见

这个警告是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:25:31.037

这里的“参数化”实际上应该是“类型参数化”。或者在其他方面，警告说因为您已经定义了一个隐式转换，它既是**重载**的（还有其他同名的方法）又是**泛型**的，那么该方法实际上不能用作隐式视图，尽管它可以使用隐式转换一个单纯的值。我将尝试用一个例子来说明差异：

```
class MyClass
object MyClass {
   implicit def finish: MyClass = null
   implicit def finish[R](result: R): MyClass = null
}

val a: Int = 123
val b: MyClass = a // Compiles fine: implicit conversion properly applied

def foo[R<%MyClass]( r: R ) {}
foo( 123 ) // Error: No implicit view available from Int => Test.MyClass 
```

在上面的代码片段中，`a`(of type `Int`) 被隐式转换为`MyClass`，因此隐式转换按预期工作。

然而，有趣的部分在于`foo`方法。它是用绑定到的视图声明的`MyClass`。换句话说，您应该能够传递给`foo`任何可隐式转换为`MyClass`. 但是在这里它无法编译。这是编译器警告您的这个错误。果然，如果您注释掉`finish`（不带类型参数的那个）的第一个重载，或者重命名一个版本以使其不是重载（例如您将其中一个重命名为`finish2`），那么编译错误就会消失.

如果您想知道第一种情况（直接隐式转换）和第二种情况（调用具有视图绑定的方法）之间有什么不同，这将允许一个编译良好但不能编译另一个，关键是视图绑定需要传递一个隐式函数值。

确实，

```
def foo[R<%MyClass]( r: R ) 
```

是相同的

```
def foo[R]( r: R )( implicit conv: R => MyClass) 
```

所以在调用时`foo`，编译器不仅要找到合适的隐式转换，还要将隐式转换方法（第二次`finish`重载）提升为函数实例，隐式传递给`foo`.

我相信这是编译器（出于某种原因）在类型参数化和重载方法的情况下不知道该怎么做的提升。这纯粹是猜测，但我很确定这只是一个实现限制：这非常可行，但它会引入足够多的实现问题，以至于它被认为不够重要（毕竟你可以通过重命名隐式来解决它转换方法）。

附带说明一下，在 scala 2.10 中（默认情况下）不会发出警告（它被认为太吵了，随着 scala 中类型类使用的激增），但真正的问题仍然存在，并且调用`foo`仍然无法编译。

# php - PHP Dom 兄弟/姐妹节点 - 正确方法

> ID：15197354
> 
> 赞同：1
> 
> 时间：2013-03-04T08:26:47.727
> 
> 标签：php, xml, dom

所以我在 php 中玩 domDocs，我正在经历许多节点的结构。当脚本发现`APP_ID`它正在寻找时，他需要返回他的兄弟值，`APP_USER`. 我在这里没有找到解决方案，只有 XPath 和 jQuery 我发现“*避免*”它的使用方式。

这很简单 在调用foreach 之前，放置一个迭代变量，例如`$i`，它将“调用”兄弟的值。

```
$apps = $root->getElementByTagName( 'APP_ID' );
$i=0
foreach( $apps as $app ) {
    if( $app->item(0)->nodeValue == CONSTANT-ID ) { // just condition
        $user = $root->getElementsByTagName( "APP_USER" );
        echo $user->item($i)->nodeValue;
        // this $i means it returns brother's value
    }
    $i++;
} 
```

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:36:19.503

从 开始`$app`，您可以使用[`parentNode`](http://www.php.net/manual/en/class.domnode.php#domnode.props.parentnode)向上一级然后迭代[`childNodes`](http://www.php.net/manual/en/class.domnode.php#domnode.props.childnodes)以找到兄弟`APP_USER`：

```
if( $app->nodeValue == CONSTANT-ID ) { // just condition
    foreach ($app->parentNode->childNodes as $child) {
        if ($child->localName == 'APP_USER') {
            echo $child->nodeValue;
        }
    }
} 
```

# header - 转发/回复时保持 Outlook mailItem 属性（互联网标头）不被删除

> ID：15197356
> 
> 赞同：1
> 
> 时间：2013-03-04T08:26:56.853
> 
> 标签：header, outlook, outlook-addin, outlook-2010, mailitem

我正在尝试启动由相同 ID 定义的邮件线程（ID 需要是一个特定值，等于我们数据库中的值）。我可以像这样分配一个自定义的互联网标题：

```
sendMail.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/string/{00020386-0000-0000-C000-000000000046}/DCPID", taskId); 
```

sendMail 是一个`olMailItem`并且`taskId`是所需的 id。

当这封邮件被发送和接收时，我可以使用该`GetProperty`方法获取我的 ID，但是当转发或回复时，互联网标题被删除，我无法再访问此属性。

**有没有办法让您的自定义互联网标题不被删除，无论它去哪里？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:39:23.943

不，无法在回复或转发时保留自定义邮件标题。

# objective-c - GCC 编译器可以同时编译 Objective-C 和 C 代码吗？

> ID：15197359
> 
> 赞同：0
> 
> 时间：2013-03-04T08:26:58.630
> 
> 标签：objective-c, xcode, gcc, llvm, llvm-gcc

我有一个用 C 编写的视频解码器的源代码。该代码已在 MAC 终端（使用 GCC 编译器）上成功编译和执行。现在我正在尝试使用相同的源代码在 Xcode 上创建一个应用程序。只有应用程序的 GUI 是用 Objective-C 编写的。

当我尝试在 Xcode（它使用 LLVM 编译器）上执行时，我在 C 代码中遇到了很多错误。Xcode 提供的唯一其他编译器选项是 LLVM GCC 4.2。我使用它进行编译，发现它无法识别用 Objective-C 编写的代码。

有没有可以同时用于 Objective-C 和 C 的编译器？GCC 4.2 编译器可以用于编译 Objective-C 代码吗？

如何告诉 Xcode 使用 GCC 4.2 编译器进行编译？

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:33:30.587

LLVM 和 GCC 都可用于编译 C、C++ 和 Objective-C 代码。

我的猜测是某些编译器标志设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:46:56.773

Objective-C 是 ANSI C 的严格超集，因此任何可以编译 Objective-C 代码的编译器也可以编译 (ANSI) C 代码。如果您的库不使用标准 C，那么您可能会遇到问题。

Objective-C++ 也是如此，它是 C++ 的严格超集。

如果像您的情况一样，您`typedef`的头文件中有冲突，您可以`typedef`在编译 Objective-C 代码时使用条件编译来隐藏：

```
#ifndef __OBJC__
typedef unsigned char BOOL;
#endif 
```

# asp.net - 通过在线考试网站中的会话进行状态管理

> ID：15197363
> 
> 赞同：0
> 
> 时间：2013-03-04T08:27:06.307
> 
> 标签：asp.net, session-state, state-management

我正在开发一个 asp.net 应用程序。“在线考试”。我的应用程序将使用会话的概念来维护正在考试的用户的状态。，因为万一浏览器关闭，系统崩溃我不希望我的用户应该从第一个问题开始。事实上，我希望我的用户应该从他离开的地方开始。现在我无法思考这个问题。如何测试这个。有什么简单的方法可以让我简单地测试我的概念。

案例 1：用户想退出考试。所以他/她可以故意关闭浏览器。案例2：错误的用户关闭了浏览器，所以当他返回时，他/她将从他/她离开的地方开始考试。

他只需要输入网址>输入他的考试ID>继续考试。

请在这方面帮助我。给我一些想法如何应用会话管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:31:44.793

您无法区分 Case1 和 Case2。通常在这些情况下，网页上有一个按钮，例如`Logout`或`Finish`将考试标记为已完成。简单地关闭浏览器就意味着考试仍在进行中。

另请注意，您不能使用标准`Session`状态管理 - 仅在浏览器打开时才会持续。您必须根据用户 ID 将考试进度数据存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:24:18.777

使用应用程序变量，以便我们可以在用户突然关闭浏览器或选项卡时轻松删除它。

# c++ - 为什么不调用复制构造函数？

> ID：15197364
> 
> 赞同：4
> 
> 时间：2013-03-04T08:27:10.427
> 
> 标签：c++, templates, copy-constructor

我有这个用于复制多边形类的代码。我遇到的问题是最终顶点指向原始多边形类位置。由于似乎没有调用复制构造函数。这是为什么 ？

```
Polygon::Polygon(const Polygon &aPolyToCopy)
{
int i;
vertices = new Vertex[aPolyToCopy.count];

for (i=0;i<aPolyToCopy.count;i++)
{
    vertices[i].x = aPolyToCopy.vertices[i].x;
    vertices[i].y = aPolyToCopy.vertices[i].y;
}

count = aPolyToCopy.count;
} 
```

在列表模板中，我这样做

```
template <class T, int i>
bool SortedVector<T, i>::add ( const T& v )
{
myClass[myCurrent] = v; //Copy constructor not called ?
myCurrent++;

return true;
} 
```

模板是

```
 template <class T, int i>
 class SortedVector
 {
 public:
   int maxSize;
   T myClass[i];
   int myCurrent;

   SortedVector();
   ~SortedVector();
   bool add ( const T& v );
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:30:56.310

你正在做一个**assignment**，你**没有**在这里构造一个新对象。如果定义了自定义的拷贝构造函数，**还需要重载 operator=**

参见[http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/](http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/)例如。

如果你会做类似的事情`x = Polygon(y)`，那么你的复制构造函数将被调用（后面是默认的`operator=`）。但不要使用此解决方法，只需提供您的 `operator=`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:38:28.843

我认为您的`Polygon`班级中的一个问题是您有一个`vertices`数据成员，它似乎是指向 a 的原始*指针*`Vertex`，用于存储分配有的*原始数组*`new[]`：

> 顶点 = 新顶点[aPolyToCopy.count];

您可能还需要重载`operator=`（和析构函数），而不仅仅是复制构造函数（请参阅[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）；你还没有展示你`Polygon`班级的所有代码，所以不清楚你是否定义了正确的复制分配和销毁。

请注意，如果您使用健壮的 RAII 容器类（如**`std::vector`**. 只需添加一个 " `std::vector<Vertex> vertices;`" 数据成员而不是 " `Vertex* vertices`" 数据成员，`std::vector`它将负责复制、清理等。您不需要做任何事情：这一切都由`std::vector`.

```
#include <vector>    // for std::vector

class Polygon
{
  std::vector<Vertex> vertices;

public:
  explicit Polygon(size_t vertexCount)
    : vertices(vertexCount) // Build a polygon with specified vertices
  {}

  //  
  // Compiler generated copy constructor, operator= and destructor are fine.
  //
}; 
```

通常，在 C++ 中尝试构建将方便的 RAII 构建块（如`std::vector`和其他直接资源管理器）组装在一起的类。

# php - 如何使用 xpath 提取以下所有属性？

> ID：15197368
> 
> 赞同：0
> 
> 时间：2013-03-04T08:27:22.840
> 
> 标签：php, html, xpath

我有这个代码：

```
<code>
    <div id="accordion" class="ui-accordion ui-widget ui-helper-reset" role="tablist">
        <h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-focus" role="tab"
            aria-expanded="false" tabindex="0">
            <a><img class="img" alt="NOS" src="/images/small-nos.png"><span>10:00</span>NOS</a></h3>

        <div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role="tabpanel"
             style="display: none; ">
            <a href="/news1276" target="_blank">Today's headlines</a>

            <h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-focus" role="tab"
                aria-expanded="false" tabindex="0">
                <a><img class="img" alt="SBS" src="/images/small-sbs.png"><span>11:00</span>SBS</a></h3>

            <div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role="tabpanel"
                 style="display: none; ">
                <a href="/news1278" target="_blank">Nieuws</a>
            </div>
        </div>
</code> 
```

我正在做的是以下内容：

```
 // parse the html into a DOMDocument
    $dom = new DOMDocument();
    @$dom->loadHTML($html);

    $xpath = new DOMXPath($dom);
    $accordions = $xpath->query("//div[@id='accordion']/div");

// Iterate events
for($i = 0; $i < ($accordions->length); $i++) {

    // The node
    $event = $accordions->item($i);

    // The urls of the node
    $urls = $xpath->evaluate('.//a/@href', $event);

    if ($urls->length > 0) 
    {
        $result[$i] .= $urls->item(0)->value;
    }
} 
```

这让我得到了我想要的网址。然而，我也在尝试获取`<h3>`'s 中的所有元素，我想在迭代时检索这些 h3 中的图像和所有跨度，但这让我很头疼，因为我已经尝试了各种各样的东西。任何人都可以阐明一下吗？

谢谢，

铝

# ajax - 如何将 Ajax 转换为移动友好的脚本/Jquery

> ID：15197370
> 
> 赞同：0
> 
> 时间：2013-03-04T08:27:30.060
> 
> 标签：ajax, jquery-mobile, mobile

我的站点使用Ajax显示下拉模型字段在手机浏览器中勾选时，由于大多数手机不支持ajax技术，下拉模型字段不出现，一直停滞不前

有没有办法将脚本更改为移动友好技术，以便当有人通过移动查看页面时，脚本可以使用该移动友好脚本

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:54:50.800

`ajax` not supported in mobile?? It is supported in major Operating systems such as iOS and Android.

I hope you are not programming for some old mobile browsers.

You can simply utilize the `ajax` functions in jQuery Mobile. I'm doing it for many of my projects.

A simple ajax call would look like below

```
$.ajax({            
 type: "POST",
 url: url,
 data: param,
 contentType:"application/json; charset=utf-8",
 dataType: "json",
 success: successFunc,
 error: errorFunc,
 beforeSend:function(){$.mobile.loading( 'show' );},
 complete:function(){$.mobile.loading( 'hide');}
}); 
```

# excel - 通过代码添加模块

> ID：15197375
> 
> 赞同：3
> 
> 时间：2013-03-04T08:27:42.640
> 
> 标签：excel, vba

我有一个包含宏的主工作簿，该宏打开另一个包含需求预测的工作簿。通过宏打开的工作簿是从客户门户下载的，并且每天都是新的，不可能事先对其进行编辑。

然后宏循环遍历信息并创建新的可读且更直观的工作表。但是，在其中一些工作表上，我想添加一些事件驱动的代码，以便在鼠标悬停或选择单元格时提供工具提示。

是否有任何可能性（无需从 vanilla Excel 2010 安装附加组件）将代码添加到在宏期间创建的工作表对象？

处理后的工作簿的布局或多或少是静态的，所以我想知道是否应该创建一个模板文件，然后将输入复制到其中。这将允许我在添加数据之前对事件进行编码。这是最好的可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:17:38.327

正如 Dan 指出的那样，您可以使用 Application.VBE.ActiveVBProject 以编程方式将代码模块添加到工作簿中。但这样做需要更宽松的宏安全设置（默认情况下设置为不受信任），*不建议这样做。*

当我必须做类似的事情时，我使用三个工作簿：

1.  包含工作簿的数据
    *   这本书没有宏功能
2.  包含必要宏的模板工作簿
3.  启用宏的工作簿以促进过渡。

使用工作簿 #3 打开工作簿 #1 并将其数据复制到工作簿 #2。保存工作簿 #2 的副本并关闭它。根据需要重复此过程。

它不是最漂亮的解决方案，但它使您的代码保持模块化。

# database - 在 SQL 数据字段中保存超过 2 GB 的巨大文本文件

> ID：15197378
> 
> 赞同：0
> 
> 时间：2013-03-04T08:27:49.980
> 
> 标签：database, sql-server-2008, large-data

我有巨大的文本文件，我用 UltraEdit 打开它们并尝试使用 SQL Server Management Studio 复制整个文本以将其粘贴到数据库字段中，但是当我复制它时它说无法分配内存，所以我尝试了 Free Hex Editor 并复制了它没有问题，但是当我尝试将它粘贴到数据库字段时它没有做任何事情，但是如果我复制了部分代码，我可以直接粘贴它......

我可以直接使用管理工作室粘贴超过 2 GB 的大数据吗？还是我必须使用书面代码对其进行解析并保存在该字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:37:05.950

您最好编写某种文件上传器或使用标准导入导出实用程序来处理此类操作

# ios - 目标 C：http POST 请求未转义

> ID：15197386
> 
> 赞同：0
> 
> 时间：2013-03-04T08:28:26.843
> 
> 标签：ios, objective-c, http, nsurlconnection, nsurlrequest

我正在使用 NSMutableURLRequest 向 Web 服务发送（同步）POST 请求。请求正文包含 XML 和 JSON 的组合。就像是 ：

```
<element>
 <element 2>
 <![CDATA[
  {"jsondata1":{"datafield1":"data1"},
   "jsondata2":"some data"
  }
 ]]>
 </element 2>
</element> 
```

**JSON 字符串已被转义（`escape()`在 Javascript 中使用）**

当我在另一端收到请求时，我注意到所有转义字符都未转义！

谁能告诉我为什么会这样？我怎样才能防止这种情况发生？

这是我用来发送请求的代码：

```
NSURL *url = [NSURL URLWithString:@"https://my-webservice.com/something.do"];
NSData *xmlResponseDataSave;
NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d",[xmlRequestString length]];
[req addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[req addValue:msgLength forHTTPHeaderField:@"Content-Length"];
[req setHTTPMethod:@"POST"];
NSData *saveData=[xmlRequestString dataUsingEncoding:NSUTF8StringEncoding];
[req setHTTPBody:saveData];

NSError *error=nil;

NSURLResponse *resp=[[NSURLResponse alloc] init];
xmlResponseData=[NSURLConnection sendSynchronousRequest:req returningResponse:&resp error:&error];
NSString *xmlResponseString=[[NSString alloc] initWithData:xmlResponseData encoding:NSUTF8StringEncoding]; 
```

请注意：我无法对 xml 或 Web 服务进行任何更改。我只能更改目标 c 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:15:50.863

经过大量的试验和错误，我能想出的唯一解决方案是在发送之前在请求正文中使用字符串（因为它在发送时会被转义）：

```
xmlRequestString=[xmlRequestString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSData *saveData=[xmlRequestString dataUsingEncoding:NSUTF8StringEncoding]; 
```

虽然这不是真正意义上的修复，但只是一种解决方法。但它对我有用（到目前为止）。

我仍然对问题的根本原因知之甚少，**我仍在寻找更优雅的解决方案。**

# jquery - 将数据从一页发送到另一页

> ID：15197396
> 
> 赞同：0
> 
> 时间：2013-03-04T08:29:05.220
> 
> 标签：jquery, html, jquery-mobile

我正在编写一个代码来添加两个数字并**在另一页上显示结果**。但我没有得到想要的输出。

addbtn=button id add=result page id calc=starting page id....这是我的代码：

```
// Bind to 'page init' event for our data page
$(document).delegate('#calc', 'pageinit', function() {

  // Do some processing when the button with id 'addbtn' is clicked ( or tapped )
  $('#addbtn').click(function() {

   // Read the values
   var num1 = $("#num1").val(), num2 = $("#num2").val();

   var add =  parseInt(num1) + parseInt(num2) ;
   $add = $('#add');

   // Clear the value if value isn't proper
   if (add == '0.000' || add == 'Infinity' || add == 'Na N') {
     add = '';
   }        
   // Get to the DOM node that has the actual text
   while ($add.children().length) {
     $add = $add.children().first();
   }

  // Set it to the calculated value
  $("#add").text(add);
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:40:37.377

而是`.click()`使用`.on()`with `click and tap`：

```
$('#addbtn').on('click tap', function() { 
```

以及另一项更改`.on()`使用`.delegate()`：

```
$(document).on('#calc', 'pageinit', function() { 
```

## 笔记：

`.on()`需要`jQuery version 1.7+`

# sql - MSSQL-server 存储过程仅插入最后一行

> ID：15197398
> 
> 赞同：0
> 
> 时间：2013-03-04T08:29:15.563
> 
> 标签：sql, sql-server, stored-procedures

我创建了一个存储过程来将所有项目从 IDx 移动到 IDz，并且它必须记录它移动的每一行的一些数据。该过程将行从 ID< 移动到 IDz 没有任何问题。但是当它必须记录信息时，它只记录移动的最后一行。我究竟做错了什么？

这是我的代码：

```
USE [TrackIT_Test]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[MoveCustIDAndAlias] 
    -- Add the parameters for the stored procedure here
    @SourceAdrID int,
    @TargetAdrID int,
    @Username varchar(50)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    declare @custID varchar(50)
    set @custID = ''

    declare @alias varchar(50)
    set @alias = ''

    -- Insert statements for procedure here
    Select @custID = (CustID), @alias = (Alias) from dbo.Alias where AdrID = @SourceAdrID;
    Insert into dbo.AliasMoveLog (CustID, Alias, Username) VALUES (@custID, @alias, @Username);
    UPDATE dbo.Alias SET AdrID = @TargetAdrID WHERE  AdrID = @SourceAdrID; 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:35:33.233

是的，我看到了你的问题。

当您使用变量并使用 select 设置变量值时，它将仅存储最后一行中的值。

你可以试试这个来证明：

```
CREATE TABLE tbl
(
    col1 INT
);
INSERT INTO tbl VALUES (1);
INSERT INTO tbl VALUES (2);
INSERT INTO tbl VALUES (3);

DECLARE @x int
SELECT @x = col1 FROM tbl
PRINT @x -- will print 3 
```

对于您的 sp，请尝试更改此行：

```
Select @custID = (CustID), @alias = (Alias) from dbo.Alias where AdrID = @SourceAdrID;
Insert into dbo.AliasMoveLog (CustID, Alias, Username) VALUES (@custID, @alias, @Username); 
```

到：

```
Insert into dbo.AliasMoveLog (CustID, Alias, Username)
Select CustID, Alias, @Username from dbo.Alias where AdrID = @SourceAdrID; 
```

更多细节：[SELECT @local_variable](http://msdn.microsoft.com/en-us/library/aa259186%28v=sql.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:53:56.340

> 好吧，一旦您声明了这样的变量，您就不能批量插入值。简单的方法是这样做：

```
INSERT INTO dbo.AliasMoveLog (CustID, Alias, Username)
SELECT CustID, Alias, @Username FROM dbo.Alias WHERE AdrID = @SourceAdrID; 
```

# ruby - 如何在 Ruby 中立即关闭 MySQL 连接并退出程序？

> ID：15197400
> 
> 赞同：0
> 
> 时间：2013-03-04T08:29:39.317
> 
> 标签：ruby, database-connection

这是我的程序。

```
require "mysql"

db  =   Mysql.new("127.0.0.1", "root", "some password", "test")
db.close
db  =   nil 
```

当我运行这个程序时，它没有完成。我需要发送`Ctrl+C`停止执行。

我怎样才能让这个程序关闭连接并立即优雅地退出？（红宝石 2.0.0）

## 更新

我发现了新的症状。它挂起而不是退出，并且似乎在运行无限循环。因为我的 CPU 监视器告诉我它正在使用 100% 的一个内核。我仍然不确定这是 Ruby 问题或 MySQL 库问题还是我的配置问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:36:22.400

**你的脚本很好。**

在您的特定情况下，它不会退出，因为客户端在连接到给定 IP 10.211.55.10 的服务器时超时。它甚至永远不会到达`db.close`。

我已经在本地复制了这个。我更改了代码以连接到我的本地 MySQL，脚本立即退出。

当我手动连接客户端时，我可以重现相同的挂起：

```
$ mysql -u root -p -h 10.211.55.10
Enter password: [masked]
ERROR 2003 (HY000): Can't connect to MySQL server on '10.211.55.10' (60) 
```

超时后出现错误消息。凭证是否正确？服务器是否接受连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:04:08.690

我终于想出了解决方法。我已经安装了所有 brew、rvm、ruby 几乎 10 次，以确定问题出在哪里。这是因为糟糕的 MySQL 连接器 C 库。

我用 Homebrew 安装了连接器，

```
brew install mysql-connector-c 
```

并使用了 ruby​​ gem 的包装器版本。

```
gem install mysql 
```

无论如何，我尝试了基于纯红宝石的版本，但它没有挂起。效果很好。

```
brew remove mysql-connector-c
gem uninstall mysql
gem cleanup all

gem install ruby-mysql

# Now everything working well without hanging at last. 
```

无论如何，`mysql-connector-c`包和`mysql`gem 在 Ubuntu Linux 上运行良好。（我使用的是 OS X）所以核心问题是 OS X 版本的 C 连接器由`brew`.

这可能会慢一点，但在开发机器上并不重要，因为最终发行版将基于 Linux。

# ios - 如何在 4 个不同的图像视图上设置两个图像？

> ID：15197401
> 
> 赞同：1
> 
> 时间：2013-03-04T08:29:41.217
> 
> 标签：ios, ios4

我有 2 个图像，我有 4 个图像视图我想在 2-2 个图像视图上随机设置 2 个图像。

就像纸牌游戏一样。在该用户选择 1 张卡时，如果图像相同，则用户还有 3 个选项可以打开相同的图像，然后用户在再次单击后赢得游戏。请帮帮我...

```
int r =arc4random()%4;
int z=arc4random()%4;
UIImageView *imageView = (UIImageView *)[self.view viewWithTag:r];
imageView.image=[UIImage imageNamed:@"30-by-30-home"];

if(r!=z)
{
    UIImageView *imageView = (UIImageView *)[self.view viewWithTag:z];
    imageView.image=[UIImage imageNamed:@"30-by-30-home"];

}else{

     if(r==3)
     {
         UIImageView *imageView = (UIImageView *)[self.view viewWithTag:z-2];
         imageView.image=[UIImage imageNamed:@"30-by-30-home"];
     }
    if(r==0)
    {
        UIImageView *imageView = (UIImageView *)[self.view viewWithTag:z+2];
        imageView.image=[UIImage imageNamed:@"30-by-30-home"];

    }if(r==1)
    {
        UIImageView *imageView = (UIImageView *)[self.view viewWithTag:z+2];
        imageView.image=[UIImage imageNamed:@"30-by-30-home"];
    }
    if(r==2)
    {
        UIImageView *imageView = (UIImageView *)[self.view viewWithTag:z-2];
        imageView.image=[UIImage imageNamed:@"30-by-30-home"];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:31:26.483

arc4random() 是生成随机数的函数的名称。

像 arc4random()%3 一样使用它来生成随机数。根据随机数选择图像。

您应该生成两个不同的随机数。

```
int r =arc4random()%4;
int z=arc4random()%4;

 while (r==z)
 {
      z = arc4random()%4;
      if(r != z)
         break;
 }

UIImageView *imageView = (UIImageView *)[self.view viewWithTag:r];
imageView.image=[UIImage imageNamed:@"30-by-30-home"];

UIImageView *imageView = (UIImageView *)[self.view viewWithTag:z];
imageView.image=[UIImage imageNamed:@"30-by-30-home"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:49:15.070

对于两者`r==3`&`r==2`你使用`[self.view viewWithTag:z-2]`.

对于两者`r==0`&`r==1`你使用`[self.view viewWithTag:z+2]`.

这可能是它的原因吗？

# javascript - 使用 jquery 对话框的带有两个单选按钮的表单

> ID：15197403
> 
> 赞同：0
> 
> 时间：2013-03-04T08:29:46.103
> 
> 标签：javascript, jquery

嗨，我需要创建一个带有两个单选按钮是和否的表单，如果用户没有选择任何选项，则应该弹出一个警报说“请选择一个选项”，如果是并提交按钮，一个 jquery 对话框应该弹出两个对话框中的按钮 ok 和 cancel--> 如果用户单击 ok 那么它应该转到不同的页面，如果没有单选按钮和提交按钮，那么还应该弹出一个对话框，带有相同的 ok 和取消按钮，如果确定，那么它应该去另一个页面。我创建了类似的东西，但无法提供选定的单选按钮

```
<form action="" method="get" name="radval">
<table width="100">
<tr>
<td width="41"><input name="xyz" type="radio" id="yes_chk" value="" required>
  Yes</td>
<td width="47"><input name="xyz" type="radio" id="yes_chk" value="" required>
  No</td>

</tr>
<tr>
 <td colspan="4"><input type="submit" value="Submit" id="button"></td>
</tr>
</table></form> 
```

javascript

```
<script src="js/jquery.reveal.js"></script>
<script type="text/javascript">
    $(document).ready(function() {

        $('#button').click(function(e) { // Button which will activate our modal
            $('#modal').reveal({ // The item which will be opened with reveal
                animation: 'fade',                   // fade, fadeAndPop, none
                animationspeed: 600,                       // how fast animtions are
                closeonbackgroundclick: true,              // if you click background will modal close?
                dismissmodalclass: 'close'    // the class of a button or element that will close an open modal
            });
        return false;
        });
    });
</script> 
```

如何根据选择的单选按钮重定向页面。我是jquery的新手，有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:57:36.277

我重新创建了一点，在评论中你可以看到代码解释：

你的 HTML 有点调整

```
<form action="" method="get" name="radval" data-sjaak-module="sjaak.mod.form">
        <input name="yes-no" type="radio" class="yes_chk" value="yes">Yes
        <input name="yes-no" type="radio" class="no_chk" value="no">No
        <input type="submit" value="submit" id="button">
</form> 
```

```
$('#button').click(function(e) { // 按钮将激活我们的模态

e.preventDefault(); // 阻止提交并通过下面的列表
            var x = !$('.yes_chk').is(':checked'), // 如果没有检查，则声明它检查类 yes_chk 的变量
                y = !$('.no_chk').is(':checked')
            if (x && y) { // 如果两个字段都未选中的条件
                alert('做出选择'); // 如果没有选择，弹出警告框
            } else if (x) { // 如果只检查 x
                var no = confirm('你没有检查'); // 把它放在一个变量中以便在以后使用它 if
                if(no == true) { // 如果点击确定，请执行以下操作
                    parent.location='http://www.stackoverflow.com/';
                } else { // 如果点击取消怎么办
                    console.log('false');
                    parent.location='http://stackoverflow.com/questions/15197403/form-with-two-radio-buttons-using-jquery-dialogbox';
                }

            } 别的 {
                var yes = confirm('你检查的是');
                if(yes == true) { // 如果满足条件
                    parent.location='http://www.stackoverflow.com/'; // 去这个网站
                } else { // 如果按下取消，请执行以下操作
                    parent.location='http://stackoverflow.com/questions/15197403/form-with-two-radio-buttons-using-jquery-dialogbox';
                }
            }

// 你的代码就在下面
$('#modal').reveal({ // 用reveal打开的项目
animation: 'fade', // 淡入淡出，fadeAndPop，无
animationspeed: 600, // 动画的速度有多快
closeonbackgroundclick: true, // 如果点击背景会关闭模态框吗？
dismissmodalclass: 'close' // 将关闭打开的模式的按钮或元素的类
            });
        返回假；
        });

```

# java - Eclipse Juno SR2 取不到证书

> ID：15197405
> 
> 赞同：1
> 
> 时间：2013-03-04T08:30:01.500
> 
> 标签：java, eclipse, ssl, tfs, eclipse-juno

我下载了最新的 Eclipse Juno CDT SR2 版本，现在尝试使用 MS TFS 插件运行它，用于在 https 连接上需要 SSL 证书的服务器。在 Indigo 中，它工作得很好。我使用从 indigo/eclipse.ini 复制的相同设置，包括所有 -Djavax.net.ssl.keyStore= 相关内容，但是 TFS 插件在 -Djavax.net 中连接时看不到证书并且失败并出现 403 错误。 debug=all 我在服务器的响应中看到“**该页面需要客户端证书作为身份验证过程的一部分”。**

现在我还看到在 indigo 的 debug.all 输出中有

```
found key for : le-user-51c64ee7-2b5c-4714-a0c7-97c473a36784 
```

在调试日志的最开始，而在juno的日志中它不存在。le-user 密钥是我导入到 java 密钥库中的证书，我通过 eclipse.ini 中的 Djavax.net.ssl.keyStore 传递。

是 java 的问题，Juno 的问题，TFS 的问题，还是我的问题，我对这 3 个人一无所知？好像朱诺没有拿起我的证书，为什么？

更新：好的，我重新安装了我的 pfx 证书，现在根据 ssl 日志可以正常加载。但是 TFS 仍然无法连接相同的错误消息，而旧的 TFS 在新的 Juno SR2 中工作正常，所以这显然是 TFS 的问题。

# postgresql - postgresql：意外删除了pg_filenode.map

> ID：15197406
> 
> 赞同：1
> 
> 时间：2013-03-04T08:30:01.770
> 
> 标签：postgresql

有什么方法可以恢复或重新创建意外删除的 pg_filenode.map 文件？或者有什么解决方案可以在不影响数据库的情况下解决这个问题？非常感谢任何解决此问题的建议！我们拥有的 postgres 版本是在 Redhat Linux 5 中运行的 9.0。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:48:18.173

**立即停止尝试修复任何事情**。你所做的一切都有可能使情况变得更糟。

将此视为严重的数据库损坏。[阅读这篇 wiki 文章并采取行动](http://wiki.postgresql.org/wiki/Corruption)。

只有在您听从了它的建议后，您才应该考虑尝试修复或恢复。

如果您可能希望恢复已删除的文件（如果它尚未被覆盖），您还应该停止整个服务器机器或卸载 PostgreSQL 所在的文件系统并对其进行磁盘映像。

如果此数据对您很重要，我建议您联系专业支持。这将花费您，但可能是在像这样的严重管理员错误之后取回数据的最佳机会。请参阅[PostgreSQL 专业支持](http://www.postgresql.org/support/professional_support/)。（免责声明：我在我的 SO 简介中显示的一家上市公司工作）。

您可以`pg_filenode.map`使用从磁盘表中提取的有关表结构和内容的信息手动重建。不过，这可能是一项艰巨的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-09T12:14:54.620

首先，如果这是紧急且有价值的，我强烈建议您首先联系专业支持。但是，如果您可以在磁盘映像上工作，如果它不是时间紧迫的等等。这里有一些需要注意的重点以及如何继续（我们最近不得不恢复一个坏的 pg_filenode.map。此外，您最好在一个磁盘映像的磁盘映像。

以下是我从由于对包含目录的不完整写入而不得不恢复损坏的文件中学到的东西。 **它是 PostgreSQL 10 的最新版本，但随时可能发生变化**

**在你开始之前**

数据恢复是有风险的业务。在开始之前，请始终注意恢复对您的组织意味着什么、可以容忍的数据丢失、可以容忍的停机时间等。如果可以的话，制作一份副本。如果有任何不正确的地方，请回过头来评估问题所在，并确保在继续之前了解原因。

**这个文件是什么以及它的作用**

PostgreSQL 的标准文件节点映射存储在 pg_class 关系中，该关系由 Pg 目录中的对象 id 引用。不幸的是，您需要一种方法来引导系统表的映射，以便您可以查找此类信息。

在大多数部署中，永远不会写入此文件。它可以从相同版本的 Postgres 上的新 initdb 复制，除了数据目录之外，传递给 initdb 的选项相同。但是，这不能保证。

有几件事可以改变这个映射。如果您对系统目录执行完全真空或类似操作，这可能会更改默认映射，然后从 initdb 复制新文件将无济于事。

**一些可以尝试的事情**

尝试的第一件事（在副本的副本上！）是将文件替换为来自新 initdb 的文件到来自同一服务器的另一个文件系统（这可能是拇指驱动器或其他）。这可能有效。它可能不起作用。

如果失败了，那么也许可以使用 pg_filedump 和自定义脚本/C 编程来创建一个新文件，该文件基于查看数据目录中每个关系文件的数据的努力。正如上面 Craig 所说，这将是一项重要的工作。

**如果你让它工作**

获取数据库的新 pg_dump 并将其还原到新的 initdb 中。这样你就知道一切都是一致和完整的。

# android - Android 按钮 onclick 多点触控

> ID：15197410
> 
> 赞同：0
> 
> 时间：2013-03-04T08:30:11.590
> 
> 标签：android, onclick, multi-touch

**我有 2 个按钮，我需要在现在**按下第一个按钮时从第二个按钮读取 onClick 事件，并且 vv Like 在键盘中。怎么做？

*   编辑

不，不！我不需要检查**是否**单击了第一个按钮。当第一个或第二个按钮处于 ACTION_DOWN 状态时，我需要监听另一个 onClick 事件，因为如果我按下第一个按钮，我不能按第二个，但我有多点触控。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:14:05.760

可能是您可以尝试以下代码：

在类中声明一个布尔变量。

```
private boolean button1IsPressed = false; 
```

为按钮 1 编写以下代码：

```
button1.setOnTouchListener(new OnTouchListener() {
     @Override
     public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
           button1IsPressed=true;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
           button1IsPressed=false;
        }
     }
  }; 
```

对于按钮 2，您可以执行以下操作：

```
button2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(button1IsPressed){
                  //Write your to do code here
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:12:56.500

在 android-16/ApiDemos 项目中有一个示例代码，名为“Views -> Splitting Touches across Views”（SplitTouchView.java）。在该示例中，包含一个允许同时滚动两个列表视图`LinearLayout`的属性。`android:splitMotionEvents="true"`

根据[Android 3.0 API Overview](http://developer.android.com/about/versions/android-3.0.html)这个属性出现在这个 api 版本中：

> 以前，一次只有一个视图可以接受触摸事件。Android 3.0 增加了对跨视图甚至窗口拆分触摸事件的支持，因此不同的视图可以同时接受触摸事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:34:22.083

您可以尝试使用`onTouchListeners`. 在第一个按钮中修改一个关于 down 和 up 事件的布尔值，在第二个按钮中，只在布尔值为 true 时执行一个动作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:36:54.013

如果按钮是切换按钮，我认为是这样的：

```
public void onToggleClicked(View view) {
    // Is the toggle on?
    boolean on = ((ToggleButton) view).isChecked();

    if (on) {
        // Do something
    } else {
        // Disable vibrate
    }
} 
```

这里最主要的是isChecked()函数，在检查哪一个被检查的时候可能会用到它，然后执行一些东西。您可以在两个按钮的 XML 中设置以下内容：

`android:onClick="onToggleClicked"`然后用 isChecked 确定检查哪一个，如下所示：

```
 boolean on1 = ((ToggleButton) view1).isChecked();
 boolean on2 = ((ToggleButton) view2).isChecked();

if (on1)
  //do something with button2
if (on2)
  //do something with button1 
```

干杯

# google-chrome-extension - Chrome 扩展部署

> ID：15197415
> 
> 赞同：1
> 
> 时间：2013-03-04T08:30:23.057
> 
> 标签：google-chrome-extension

我开发了一个 chrome 扩展，我总是使用开发者模式进行调试。现在我想部署它。有没有办法为每个 chrome 配置文件安装扩展程序？我想知道如何获取扩展 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:46:57.857

1：扩展ID可以在chrome://extensions.like这个： ![在此处输入图像描述](../Images/a427ac164a5be052686706a5b6941c33.png)

2：我不知道你说的“根据chrome配置文件安装扩展”。无论如何，如果你想在没有开发者模式的情况下使用你的 chrome 扩展。只需使用 chrome 扩展页面中的“打包扩展”按钮。你会得到一个 crx 文件。要安装它，只需将其拖放到您的 chrome 中。

您也可以将其发布到 chorme 网上商店。[看这里](https://developers.google.com/chrome/web-store/docs/)。然后您和其他任何人都可以轻松地从 chrome 网上商店安装您的扩展程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-01T06:26:57.273

首先，要在网上商店部署您的扩展程序，您必须拥有 5 美元的谷歌开发者帐户。

其次，您在 PC 中开发扩展程序时看到的 chrome 扩展程序 ID 与您在 chrome 商店中部署扩展程序时将获得的不同。

基本上，当您部署扩展程序时，chrome 商店会要求您上传扩展文件夹的 zip，而不是 crx 文件。另请注意，它不会像您在本地打包扩展程序时那样为您提供任何 .pem 文件。Chrome 商店将在每次更新时保持相同的扩展 ID。

请注意，您不能使用相同的版本更新扩展程序。您必须在每次更新时增加版本号，否则 chrome 会在更新时显示错误。

# php - 如何... a "plus" b 转换为 "+" b

> ID：15197416
> 
> 赞同：2
> 
> 时间：2013-03-04T08:30:23.230
> 
> 标签：php, javascript, ajax

正如标题所说...我如何在运算符中转换单词？我在 AJAX 中有一个脚本

```
function calcPrice(elem,id,pret,i){

$.ajax({
   type: "POST",
   url: "data.php",
   data: "action=calcPrice&sign="+elem.className+"&id="+id+"&pret="+pret,
   success: function(msg){
    hcont = get_response_tag('tag1',msg);
    hcont2 = get_response_tag('tag2',msg);
     $(".price_val").html(hcont);  
     $(".nb_analize").html(hcont2);  

    if(elem.className=='plus'){ $("#p_row_"+i).removeClass("row_plus").addClass("row_minus"); elem.className = 'minus'; }
    else{  $("#p_row_"+i).removeClass("row_minus").addClass("row_plus"); elem.className = 'plus'; }
   }
});

} 
```

当我单击加号（或减号）时，它会返回一个值和单词“加号”或“减号”。在 data.php 中，我希望能够根据“加号”或“减号”字进行算术运算，或者在运算符中转换这些字...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:32:23.263

```
if($operator == "plus") {
    return $val1 + $val2;
} elseif($operator == "minus") {
    return $val1 - $val2;
} 
```

是最简单的例子。实际上，您可能应该根据他们单击的操作将请求发送到不同的端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:33:31.753

试试看：

```
if($val=="plus")
   return $a + $b;
else
   return $a - $b; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:34:15.433

在这里使用 preg_replace 是理想的。您可以使用此函数将字符串中的模式替换为其他模式。阅读[文档](http://php.net/manual/en/function.preg-replace.php)

# php - 添加月份后获取日期并离开天数

> ID：15197418
> 
> 赞同：-2
> 
> 时间：2013-03-04T08:30:53.067
> 
> 标签：php, javascript

```
$start_date = "2012-01-05";   
$end_date = "2012-02-10"; 
```

如何获取月份和获取月份日期后应该像上面的例子一样

`$end_date`应为“2012-02-05”；离开5天以上。不要算上一天。

我怎么能在php中做到这一点？

我不想喜欢

```
$month = 1;   
$end_date =   "2012-02-05"; 
```

第二个例子

```
$start_date = "2012-06-19";  
$end_date = "2012-09-25"; 
```

那么应该

```
$month = 3;   
$end_date = "2012-09-19"; 
```

“2012-09-19”到“2012-09-25”之间的休假天数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:54:30.157

您可以使用`strtotime()`在原始日期上添加几个月...

```
$start = '2012-01-23';
$months = 3;
$timeExpr = sprintf('+%d months', $months);
$end = date($start, strtotime($timeExpr));

echo $end; //will output '2012-04-23' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:32:29.690

```
$start = '2012-01-23';
$months = 12;
$date=new DateTime($start);
$date->modify('+'.$months.' month');
echo $date->format('Y-m-d'); 
```

# layout - 如何（如果可能）绘制这个 SAP Smartforms 模板？

> ID：15197422
> 
> 赞同：1
> 
> 时间：2013-03-04T08:31:13.950
> 
> 标签：layout, document, abap, sap-smart-forms

是否可以拆分如下图所示的模板？

![在此处输入图像描述](../Images/790757643aaa92cefeb42d997e5a71f5.png)

如果是的话，我可以得到一些关于如何做的说明吗？我只设法在一个配置中创建了 3 个框架，该配置基本上从这个框架旋转了 90（或 270）度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:31:13.847

不，这是不可能的。[检查在线文档](http://help.sap.com/erp2005_ehp_04/helpdata/en/90/1d493d331311d5b696006094192fe3/frameset.htm)：

> [...] 要创建如下所示的模板，您**不能**使用 Smart Forms 的模板概念： [...] 彩色部分的单元格覆盖多行。[...]

链接的文章还包含有关如何将内容拆分为单独窗口的示例。

# java - 查询 api 与 hql 的不同结果

> ID：15197428
> 
> 赞同：0
> 
> 时间：2013-03-04T08:31:42.903
> 
> 标签：java, hibernate

我在 hbm.xml 文件中有以下实体

```
<class name="Base" table="base">
    <id name="id"/>
    <list name="ips" cascade="all-delete-orphan" lazy="false" fetch="join">
        <cache usage="read-write" include="all" />
        <key column="base_id" />
        <list-index column="ip_order"/>
        <element column="ip" type="string"/>
    </list>
</class> 
```

我在集合中有一个带有两个 ips 字符串的实体 Base。
当我做：

```
session.createCriteria(base.class).list(); 
```

当我制作时，结果是两个 Base 对象：

```
session.createQuery(" from Base").list(); 
```

结果是一个实体 Base。
有人能告诉我为什么我会遇到这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:11:33.863

我敢打赌，表中有 2 条记录`ips`。

由于您已声明`ips`急切获取，因此它也会`ips`在您创建 fetch 条件时加入 fetch `Base.class`，导致“结果集”包含 2 条记录。然而，这两个“记录”实际上是同一个实例。

解决的方法很简单，搜索使用 DISTINCT_ROOT_ENTITY 结果转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:42:47.850

根据您的映射 xml`Base`是一个表，`ips(IP)`是另一个表。

**一个 Base 有两个 List(ips)**意味着`Base`table 将有一个条目`DB(base table)`。 `IP`将有两个条目`DB (ip table)`。

Obvisully 基表将只有一个条目。

检查这个[例子](http://www.tutorialspoint.com/hibernate/hibernate_list_mapping.htm)

# asp.net - 无法加载文件或程序集 Microsoft.Web.Extensions 版本 1.0.61025

> ID：15197430
> 
> 赞同：0
> 
> 时间：2013-03-04T08:31:47.020
> 
> 标签：asp.net

我试图在我的网站上安装 ajax。但我收到以下错误。我正在使用 asp.net 2.0，我遵循的步骤如下。

1.  [从此链接](http://www.microsoft.com/en-us/download/details.aspx?id=883#top)下载并运行 ASPAJAXExtSetup.msi
2.  [修改了此链接](http://www.asp.net/ajax/documentation/live/ConfiguringASPNETAJAX.aspx)提到的 web.config

当我运行应用程序时做了上述事情后，我得到了错误。

我用谷歌搜索了它，我发现我需要将 System.Web.Extension.dll 引用到 bin 目录中。但是我在文件夹**C;/ProgramFiles/Microsoft ASP.NET /ASP.NET 2.0 AJAX Extensions/中找不到 dll v 1.0.61025**。

这是错误的真正原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:24:58.703

您收到此错误是因为您没有导入对项目的引用。执行此操作时将添加生成的 XML。去做这个：

1.  右键单击您的 Web 项目并在“参考”窗口中选择“属性页”
2.  您应该看到 System.Web.Extension 的参考，如果没有，则需要添加它。
3.  单击“添加按钮”并选择 .Net 选项卡。
4.  向下滚动到 System.Web.Extension 组件并选择确定

这应该将引用和 DLL 添加到您的项目中。如果没有，请告诉我。

# ios - iOS 无法为后台模式“配置应用程序的一个套接字以使用 VoIP”

> ID：15197435
> 
> 赞同：1
> 
> 时间：2013-03-04T08:32:20.610
> 
> 标签：ios, objective-c, sockets, voip

我正在尝试将我的应用程序设置为即使在应用程序被挂起时也能监听 tcp-socket。如苹果文档中所述，我在 Info.plist 中设置了 voip-background 模式。现在我被困在哪里说：“配置应用程序的一个套接字以供 VoIP 使用。”。我正在尝试使用 CFReadStreamSetProperty() 方法来做到这一点，但关键是我如何创建套接字。套接字的创建是通过标准 C 库完成的，如下所示：

```
int mySock = socket(AF_INET, SOCK_STREAM, 0); 
```

这是在现有库中的 .cpp 文件中完成的。这是我尝试为 VoIP 使用配置套接字的内容：

```
CFStreamCreatePairWithSocket(kCFAllocatorDefault, sock, &readStream, &writeStream);
if(readStream && writeStream)
{
   CFReadStreamSetProperty(readStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
   CFWriteStreamSetProperty(writeStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
} 
```

当我逐步完成它时，它看起来不错，但不幸的是它不起作用。每当应用程序从前台转到后台/挂起时，连接就会丢失，并且来自服务器的任何输入都会被忽略。我不知道套接字的配置是否可以这样完成并且找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:01:39.433

这是我在这个论坛的第一篇文章。但我发现这是有效的。

1.  在 info.plist 文件中设置 VOIP
2.  `CFReadStreamSetProperty(readStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);`

    `CFWriteStreamSetProperty(writeStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);`

3.  使用 TCP 套接字

它不适用于 UDP 套接字。如果我错了，请编辑这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T14:09:51.603

你用的是 iPhone 5S 还是 5C？

尝试使用 iPhone 5 或 iPad 2 等设备

这些设备（可能是 iPad Air，无法确认...）存在一个与 VOIP 套接字有关的已知问题，已报告错误报告，我们仍在等待 Apple 修复它...

# netty - netty 放置编码器的正确位置

> ID：15197437
> 
> 赞同：0
> 
> 时间：2013-03-04T08:32:22.450
> 
> 标签：netty

Netty javadoc 显示了编码器的典型用法，如下所示。

解码器 --> 编码器 --> (messageReceived) 处理程序（写入）。

现在，我想要对写入的消息进行编码（嗯，我的意思是在处理程序中使用 write 方法处理的消息）。所以，我想找到解码器的正确方法如下..

解码器 --> (messageReceived) 处理程序 (Write) --> Eecoder

由于解码器返回对象，我想知道它可能是一个正确的消息。如果我想在 write 方法之后对消息进行编码，请问我应该怎么做？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:14:26.227

看看这里的javadoc：http: [//netty.io/4.0/api/](http://netty.io/4.0/api/)

在谈到上游和下游的地方，在 Netty4 中，这些被认为是入站和出站。文档偶尔会引用两者。

特别看例子：（我稍微改了一下）

```
 ChannelPipeline p = ...;
 p.addLast("1", new InboundHandlerA());
 p.addLast("2", new InboundHandlerB());
 p.addLast("3", new OutboundHandlerA());
 p.addLast("4", new OutboundHandlerB());
 p.addLast("5", new HandlerX()); 
```

在此示例中，名为 Inbound* 的 ChannelHandler 实现了 ChannelInboundHandler。名为 Outbound 的 ChannelHandler 实现 ChannelOutboundHandler。

HandlerX 实现 ChannelInboundHandler 因为它处理传入消息事件，并通过写入通道生成传出消息事件。

当有 Inbound 事件（如 Netty 读取发送到通道绑定的套接字的数据）时，InboundHandler* 按从上到下的顺序执行。

*InboundHandlerA -> InboundHandlerB -> HandlerX*

当有 Outbound 事件（比如你的 HandlerX 写入通道）时，OutboundHander* 会按从**下到上的顺序执行**

*OutboundHandlerB -> OutboundHandlerA。*

作为扩展，您可以拥有一个同时实现 Inbound 和 Outbound 的 ChannelHandler，并将在管道的执行中被调用两次。

所以在你的情况下，你想要类似的东西

```
 ChannelPipeline p = ...;
 p.addLast("DECODER", new MyMessageDecoder());
 p.addLast("ENCODER", new MyMessageEncoder());
 p.addLast("HANDLER", new MyHandler()); 
```

其中 MyMessageDecoder 和 MyHandler 实现 ChannelInboundHandler，而 MyMessageEncoder 实现 ChannelOutboundHandler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:55:02.820

通常你是这样写的：

Encoder1、Encoder2、Decoder1、Decoder2、其他处理程序

# c# - 自定义正则表达式替换模式

> ID：15197441
> 
> 赞同：0
> 
> 时间：2013-03-04T08:32:30.163
> 
> 标签：c#, regex

在我的应用程序中，我必须解析一个文件并替换一些字符串。

```
1 不关注“一些带有”的字符串！”
2 不关注“一些字符串”；“评论员”
3 not intressting ;"没有要替换的字符串"

```

对于结果，我希望从一行的第一个引号到最后一个引号的整个字符串。分号后面到行尾的整个字符串将被忽略。

结果没有第一个和最后一个 qoutes。

```
1 "一些带有 " " 的字符串！"
2“一些字符串”
3 不匹配

```

我的正则表达式模式适用于引号中的所有字符串，但是如何实现分号选择？

```
(?<=^.*?\")(.*)(?=\".*?$) 
```

* * *

编辑

```
(?<=^[^;]*?\")(.*)(?=\".*?$) 
```

如果前导分号，此正则表达式将查找第一个和最后一个引号之间的所有字符串。但是我是怎么找到分号的呢？

```
not intressting "some text" ;comment "not intressting" 
```

比赛

```
'some text' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:36:36.433

### 假设

匹配被定义为一个序列：

*   从`"`输入字符串中的第一个开始。让我们称之为第一次`"`或开幕`"`。
*   `;`开场前没有`"`
*   `;`序列中允许，如果序列中的最后一个`"`是奇数，则从第一个开始计数`"`。
*   `;`不允许在序列中，如果序列中的最后一个`"`是偶数，则从第一个开始计数`"`。
*   `"`以满足上述条件的最远结束。

### 解决方案

使用此正则表达式（原始形式）查找第*一个匹配项：*

```
^(?>[^;"]*)"((?>(?>"[^";]*(?="[^"]*$)|"[^";]*"|[^" ]*)+))"

```

在 C# 字符串文字中：

```
"^(?>[^;\"]*)\"((?>(?>\"[^\";]*(?=\"[^\"]*$)|\"[^\";]*\"|[^\"]*)+))\"" 
```

结果将在第一个捕获组中。

### 解释

语法解释：

*   `(?>pattern)`是非回溯/占有子表达式。它可以防止引擎回溯。这是一种优化形式。
*   `(?=pattern)`是零宽度正前瞻。`pattern`它在不消耗文本的情况下检查前面的字符串是否符合。
*   `|`是交替。这里我要注意的是，正则表达式引擎会从左到右检查每个规则，如果找到匹配项，则不会考虑其他规则。这意味着顺序在确定匹配时很重要。
*   我假设您熟悉其余部分，因为它们非常基础。

为了解释起见，我将使用原始正则表达式，去掉非回溯优化：

```
^[^;"]*"((?:"[^";]*(?="[^"]*$)|"[^";]*"|[^"]*)+)"

```

由于要求“一行中的第一个和最后一个引号”，每行最多有 1 个匹配项。

通过对需求进行一些分析，我们知道感兴趣部分*之前*的文本不应该包含`;`（需求的一部分）或`"`（否则，引用不会是第一个）。因此，我们可以编写`^[^;"]*`以从字符串的开头锚定匹配并匹配所有内容，直到第一个引号`"`。

这是引用的字符串部分，为了便于解释而分解：

```
"
(
（？：
"[^";]*(?="[^"]*$)
|
"[^";]*"
|
[^"]*
)+
)
"

```

让我们关注这3个片段，我将从下往上开始解释：

```
"[^";]*(?="[^"]*$)
"[^";]*"
[^"]*

```

对于这里的所有情况，我们遇到的最后一个报价总是一个奇怪的报价。

*   `[^"]*`: 最后一个引号保证是奇数引号，所以我们可以有任何东西，包括`;`，但除了`"`.
*   `"[^";]*"`: 最后一个引号是奇引号，后面也是奇引号。这部分处理偶数引用之后的部分，其中`;`不允许。
*   `"[^";]*(?="[^"]*$)`：这是棘手的部分，它处理字符串有奇数个引号（> = 3）的情况。我确保在偶数引号之后，没有字符串中`;`的最后一个引号`"`。*“后跟`"`字符串中的最后一个引号”*是通过前瞻实现的`(?="[^"]*$)`。

片段`"[^";]*(?="[^"]*$)`必须放在前面`"[^";]*"`以避免回溯，这样我们才能应用非回溯优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:50:12.237

试试这个：

```
 string[] lines = File.ReadAllLines(@"Data.txt");
        string[] lines2 = lines
            .Select(line => Regex.Match(line, @"(?<!;)""((.(?!;\s*""))*)""", RegexOptions.None).Groups[1].Value)
            .Select(line => line.Length > 0 ? line : "no match")
            .ToArray(); 
```

此正则表达式可以解释为：*获取以引号开头但前面没有分号且后面没有模式分号-空格-引号并以引号结尾的文本*。

# c# - 使用 Visual Studio 2010 的 Windows 应用程序的 Sql server compact

> ID：15197447
> 
> 赞同：0
> 
> 时间：2013-03-04T08:32:43.430
> 
> 标签：c#, asp.net, sql, windows, sql-server-2008

我正在开发需要使用 sql server compact 的 Windows 应用程序。我尝试了各种文章以在 Visual Studio 2010 中使用它

[SQL Compact 的专用安装](http://www.codeproject.com/Articles/33661/Creating-a-Private-Installation-for-SQL-Compact)

[在 Visual Studio 中使用 SQL Server Compact](http://msdn.microsoft.com/en-us/library/gg606540%28v=vs.100%29.aspx)

但没有得到任何令人满意的答案。请建议我为此提供最佳解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:37:29.163

如果您使用 nuget 包 ( [http://nuget.org/](http://nuget.org/) )，您可以简单地查找并安装它。否则，您只需将 sql server compact dll 复制到您的 exe 目录并包含 System.Data.SqlServerCe.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:41:12.677

与数据库交互有多种不同的方式。作为一个 OO 框架，.net 对数据库访问有各种抽象。主要的是（vanilla）ADO.NET（不推荐）、EntityFramework、nHibernate 和 LinqToSQL（不推荐）。它们都可以很好地与 SQL CE 一起工作。

鉴于您到目前为止所描述的内容，我会推荐 EntityFramework CodeFirst SQL CE。[Scott Gu](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)有一篇关于这项技术旧版本的好博客。[我将从安装SQL CE EF](http://nuget.org/packages/EntityFramework.SqlServerCompact)的预制 nuget 开始。

# kinect - Kinect - 骨架捕获文件的大小

> ID：15197450
> 
> 赞同：-1
> 
> 时间：2013-03-04T08:32:54.797
> 
> 标签：kinect

在没有实际 Kinect 设备的情况下，我必须对骨架捕获文件的大小进行一些计算……所以我得出结论，对于 15 分钟的骨架跟踪，文件大小约为 8Mbytes。这是正确的吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:23:36.627

好吧，我只是回答我自己的问题。

如果只保存骨架视图，则只保存关节坐标及其方向。它不需要太多空间，并且应该与我在问题中提到的文件大小有关。

# javascript - 如何返回 HTML 并在客户端使用 YUI3

> ID：15197452
> 
> 赞同：0
> 
> 时间：2013-03-04T08:33:04.723
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3, yui

我正在使用`ASP.NET MVC3`和`YUI3`。我的视图上有一个按钮。单击它时，它会对我的控制器的操作方法进行 AJAX 调用。此方法返回 HTML，然后我需要获取此 HTML 并将 HTML 控件的内容设置为返回的 HTML。

我在 jQuery 中有以下内容：

```
$(document).ready(function () {
     $('#VerifyButton').click(function () {
          $.ajax(
          {
               type: "POST",
               url: "/Server/GetChangeIncidentDetails",
               data: { changeIncidentNumber: $('#ChangeIncidentNumber').val() },
               dataType: "html",
               success: function (result) {
                    var domElement = $(result); // create element from html
                    $("#changeImDetails").html(domElement); // append to end of list
               }
          });
     });
}); 
```

我如何对 YUI3 做同样的事情？我有以下情况，但我不确定我是否走在正确的轨道上？

```
YUI().use('event', 'node', 'io', function (Y) {
     Y.one('#VerifyButton').on('click', function (e) {
          alert('button clicked');
          e.preventDefault();
          alert(Y.one('#ChangeIncidentNumber').get('value'));
          var data = { changeIncidentNumber: Y.one('#ChangeIncidentNumber').get('value') };
          Y.io('/Server/GetChangeIncidentDetails', {
               method: 'POST',
               data: data,
               on: {
                    success: function (id, result) {
                         //var json = Y.JSON.parse(result.responseText);
                         //Y.one('#Title').set('value', json.Title);
                         alert(result);
                    }
               }
          });
     });
}); 
```

我的操作方法只返回一个局部视图：

```
return PartialView("ChangeInformation", viewModel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:37:13.127

我设法做到了：

```
success: function (id, result) {
     Y.one('#changeImDetails').setHTML(result.responseText);
} 
```

# javascript - 将 div 附加到窗口底部

> ID：15197453
> 
> 赞同：2
> 
> 时间：2013-03-04T08:33:06.437
> 
> 标签：javascript, css, position, affix

我想知道如何在 div 滚动出视图时将其修复到窗口底部。我知道您可以使用 twitter bootstrap 来做到这一点，但我不想使用库。

到目前为止，我有一些我认为可以工作的 jQuery：

```
$(window).scroll(function() {
  if (((($('.show_postQuestion').offset().top + 
            $('.show_postQuestion').height()) - 
            ($(window).scrollTop()+$(window).height())) > 0)) {
    // Post form off-screen
    $('.show_postQuestion').addClass('fixed');
  } else {
    $('.show_postQuestion').removeClass('fixed');
  }
}); 
```

.fixed 类只是`position:fixed; bottom:0;`.

这样做的问题是，如果表单滚动并自行修复，它不再不在视野范围内，并且文本滚动将自行修复，导致它再次自行修复，等等等等并使其闪烁。

我想知道是否有人对如何解决此问题或替代解决方案有建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:47:18.250

如果我正确理解了您的问题，您希望将一个元素固定在窗口底部，如果它通常位于页面下方并且不在视野范围内。当用户向下滚动到它的自然位置时，它会像往常一样随着滚动流动。

我稍微修改了您的函数以记住页面加载时元素的初始位置，并使用它每次将其与 scrollTop 位置进行比较。

[小提琴](http://jsfiddle.net/vwGX5/)

```
$(function() {
  var $postQ = $(".show_postQuestion"),
      $postQPos = $postQ.offset().top + $postQ.height(),
      $win = $(window);

  $win.scroll(function() {
    if ($postQPos > $win.scrollTop() + $win.height()) {
      // Post form off-screen
      $('.show_postQuestion').addClass('fixed');
    } else {
      $('.show_postQuestion').removeClass('fixed');
    }
  }).trigger('scroll'); // trigger the event so it moves into position on page load
}); 
```

# php - 从选择列表中获取选定的值

> ID：15197454
> 
> 赞同：0
> 
> 时间：2013-03-04T08:33:14.797
> 
> 标签：php, javascript, jquery

我在这里有这部分，我用它来打印列表中的一些值：

```
<select id = "paisja" name="paisja" >
<?php
while( $row = odbc_fetch_array($resultpaisja) ) {
?>

 <option value="<?php echo $row['id_paisje']; ?>"><?php echo $row['paisje']; ?></option>
<?php
}
?> 
```

现在，我需要的是，如果我打印此订单的列表，该列表应该会再次出现，但带有选定的值......请帮忙？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:49:01.763

您可以尝试使用 post 方法从所选索引中获取值

例子：

```
 echo '<select name="paisja">';
    while( $row = odbc_fetch_array($resultpaisja))
    {
        echo'<option value="'. $row["id_paisje"] .'">' . $row["paisje"] . '</option>';
    }
   echo '</select><br />';

    echo $_POST['paisja']; //will output the selected value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:27:11.017

只需注意选择选项中添加的 PHP 代码块。[更新]

```
<select id = "paisja" name="paisja" >
<?php while( $row = odbc_fetch_array($resultpaisja) ) {

$default_select_id = 1; //Set a default ID

if(isset($_REQUEST['paisja']) && $_REQUEST['paisja'] == $row['id_paisje']){ 
  $select = ' selected="selected" '; //Set from submitted value
} elseif ($row['id_paisje'] == $default_select_id) {
  $select = ' selected="selected" ';  //Set from default ID if no submitted value
}

?>
 <option value="<?php echo $row['id_paisje']; ?>"  <?php echo $select; //Execute the selection ?> >
<?php echo $row['paisje']; ?>
</option>
<?php
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:35:51.153

尝试这个 ：

```
<option <?php if(isset($_REQUEST['paisja']) && $_REQUEST['paisja'] == $row['id_paisje']){?>selected="selected"<?php } ?> value="<?php echo $row['id_paisje']; ?>"><?php echo $row['paisje']; ?></option> 
```

添加 :`<?php if(isset($_REQUEST['paisja']) && $_REQUEST['paisja'] == $row['id_paisje']){?>selected="selected"<?php } ?>`在选项标签中。

# unix - 如何从Unix脚本中的命令行获取参数

> ID：15197456
> 
> 赞同：0
> 
> 时间：2013-03-04T08:33:27.123
> 
> 标签：unix, command-line-arguments

我必须在 unix 中编写脚本。

当我这样称呼它时：

```
./check -l word1 -c word2, 
```

我需要从脚本内部获取与命令 -l 和 -c 一起使用的单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:06:43.637

使用`getopts`如下脚本所示：

```
#!/bin/bash

while getopts l:c: option
do
    case "$option" in
        l) 
           loption="$OPTARG"
           ;;
        c)
           coption="$OPTARG"
           ;;
    esac
done

echo "L is: $loption"
echo "C is: $coption" 
```

# scala - 表单中的错误未匹配类型

> ID：15197462
> 
> 赞同：3
> 
> 时间：2013-03-04T08:33:48.800
> 
> 标签：scala, playframework-2.0

```
 details.bindFromRequest.fold(
    errors => BadRequest(views.html.adminpages.aboutusimgsForm(errors)), 
```

`[NoSuchElementException: None.get]`

从这个表格

```
@(details: Form[AboutImages])

<input type="hidden" name="id" value="@details.get.id">
<input type="text" name="name" value="@details.get.name"> 
```

我有一个`aboutusimgs/edit/1`从数据库（mysql）添加文本和隐藏表单输入的编辑表单。

但是当我不填写表格并且绑定的错误部分执行时：

`errors => BadRequest(views.html.adminpages.aboutusimgsForm(errors)),`

我得到了`NoSuchElementException`我是否为错误制作了另一个表单为什么我只能使用编辑表单？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:45:51.307

这里的问题是，如果没有设置一个值，它将具有`None`作为值。`None.get`总是抛出 a `NoSuchElementException`，因为它显然没有元素。您可以`Option`通过多种方式处理 s，但如果您有默认设置，则可以简单地使用`getOrElse`. 例如：

```
// first map it to the id, then get the value or default if None
details.map(_.id).getOrElse("") 
```

您还应该查看该类型的[scala 文档](http://www.scala-lang.org/api/current/index.html#scala.Option)`Option`，并阅读有关如何使用选项的几篇文章中的一两篇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:17:29.577

要使用`Option`'s 结果，您永远不应该`get`直接使用方法。

为什么？因为它准确地导致了来自 Java 的潜在**NullPointerException**概念（因为通过 抛出 NoSuchElementException `None`）=> 阻止了您的编码方式的安全性。

要检索结果，特别是根据检索到的值做某事，更喜欢模式匹配或更短的`fold`方法：

```
/** Returns the result of applying $f to this $option's
   *  value if the $option is nonempty.  Otherwise, evaluates
   *  expression `ifEmpty`.
   *
   *  @note This is equivalent to `$option map f getOrElse ifEmpty`.
   *
   *  @param  ifEmpty the expression to evaluate if empty.
   *  @param  f       the function to apply if nonempty.
   */
  @inline final def fold[B](ifEmpty: => B)(f: A => B): B =
    if (isEmpty) ifEmpty else f(this.get) 
```

`getOrElse`或者，如果您只想检索`Option`'s 结果并在处理 a 时提供默认值，则可以选择使用方法`None`：

```
 /** Returns the option's value if the option is nonempty, otherwise
   * return the result of evaluating `default`.
   *
   *  @param default  the default expression.
   */
  @inline final def getOrElse[B >: A](default: => B): B =
    if (isEmpty) default else this.get 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T06:43:23.093

假设你有一个`List[Option[String]]`or `Seq`... 解决方案是使用`flatMap`which removes `None`so

```
List(Some("Message"),None).map{ _.get.split(" ") } //throws error 
```

但是如果你使用平面图

```
List(Some("Message"),None).flatMap{ i => i }.map{ _.split(" ") } //Executes without errors 
```

# extjs - 使用 sencha 未在列表中呈现商店

> ID：15197468
> 
> 赞同：0
> 
> 时间：2013-03-04T08:34:13.497
> 
> 标签：extjs

我创建了一个带有 2 个文本字段和按钮的表单。当用户单击按钮时，我想将文本字段值放在列表视图中。所以我为它创建了一个模型和存储。我的列表视图代码也在主视图中。但我在列表视图中添加记录时遇到问题。它仅在 List 中添加当前记录。它不会将存储中的记录呈现到列表中，我单击刷新按钮但列表显示为空。这意味着数据没有正确存储。你能告诉我我在代码中做错了什么吗？

**模型**

```
 Ext.define("panellist.model.User",{
      extend:'Ext.data.Model',
      config:
        {

         fields:
         [
           {name:'name',type:'string'},
           {name:'add',type:'string'}
         ]

        }

    }); 
```

**店铺**

```
Ext.define("panellist.store.Company",
{
   extend:'Ext.data.Store',
  config:
 {
       model:'panellist.model.User',
       autoload:true,
  proxy:
  {
        type:'localstorage',
        id:'mypanellist'
  } 
}

}); 
```

**主.js**

```
 Ext.define('panellist.view.Main',
   {
        extend: 'Ext.Container',
        xtype: 'main',
        id:'mainview',
    requires: 
    [
       'Ext.TitleBar',
       'Ext.Panel',
       'Ext.List',
       'Ext.data.proxy.LocalStorage'
    ],

    config: 
    {
     items:
    [
       {
         xtype:'titlebar',
         title:'welcome to sencha touch',
         docked:'top',

      },
      {

       xtype:'list',
       width:'100%',
       height:'100%',
       itemTpl:'{name},{add}',  
       store:"Company"

      },
      {
        xtype:'titlebar',
        docked:'bottom',

        items:
        [
        {
           xtype:'textfield',
           lablel:'enter the name',
           value:'enter the name',
           id:'t1',
           name:'txtname'
       },
       {
           xtype:'spacer',
       },
       {
           xtype:'textfield',
           value:'enter the address',
           name:'txtadd',
           id:'t2',
       },
       {
           xtype:'spacer',
       },

       {
           xtype:'button',
           text:'Add',
           action:'btnadd'
       }

       ]
     }
   ]}

}); 
```

**MyController.js**

```
var mdl=Ext.create('panellist.model.User');

Ext.define("panellist.controller.MyController",
{
             extend:'Ext.app.Controller',
config:
{
         refs:
        {
            // pass the id of the view
            nav:'#mainview'
         }

},
init:function()
{
              console.log("init is callled");
this.control({
'button[action=btnadd]':
 {
              tap:'insertrecords'
 }

});
},

launch:function()
{
           console.log("launch is callled");
},
insertrecords:function()
{
// fetch the records from field

var n=Ext.getCmp('t1').getValue();
var a=Ext.getCmp('t2').getValue();
// first store this values in model

mdl.set("name",n);
mdl.set("add",a);
// add model into the store
var store1=Ext.getStore("Company");

store1.add(mdl);
store1.sync();

console.log('records is added');

console.log(n);

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T00:03:08.800

我在您的代码中看到了几个可疑区域。

首先你应该给你的商店一个`storeId`. 这将允许您`Ext.getStore()`在控制器中找到它。

您的**Main.js**应该`require`是您商店的完整路径，因为您在其中一件商品中引用了它。

```
requires: 
    [
       'Ext.TitleBar',
       'Ext.Panel',
       'Ext.List',
       'Ext.data.proxy.LocalStorage',
       'panellist.store.Company'      // <~ added 
    ], 
```

最后，如上所述，在您的控制器中使用新的 storeId 来获取商店。

```
var store1 = Ext.getStore('newStoreId') 
```

试一试，告诉我你想出了什么。

运行代码时，在 处设置断点`var store1 = Ext.getStore('..')`以确保获得存储，并在添加元素时逐步执行。之后，`sync()`您应该能够在商店中看到您的新商品。

# c# - 列出订阅

> ID：15197470
> 
> 赞同：0
> 
> 时间：2013-03-04T08:34:20.680
> 
> 标签：c#, azure

我的问题很简单：是否可以使用 API 列出用户有权访问的所有订阅？

我的目标是创建一个应用程序，用户可以在其中获取他的订阅列表，并且可以选择一个订阅来查看他所有部署的应用程序。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:44:19.487

目前无法这样做，因为没有可用的公共 API。您可以做的是要求您的用户向您提供发布配置文件（如果他们可以这样做）。然后，您可以解析配置文件，获取订阅 ID 和管理证书，并在服务管理 REST API 中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T20:50:52.260

实际上它可用但尚未记录。如果您仔细查看开源 Powershell Cmdlet 和管理库客户端（它们都在 GitHub 上的 Azure 帐户下），您会发现它正在被使用。:-)

我相信它仅适用于 Azure REST API 的 OAuth/AD 身份验证，而不适用于基于证书的身份验证（但我可能错了）。

请求如下所示：

```
GET https://management.core.windows.net/subscriptions 
```

在使用 OAuth 对 Azure 进行身份验证时，请查看我的博客文章：

[https://ahmetalpbalkan.com/blog/azure-rest-api-with-oauth2/](https://ahmetalpbalkan.com/blog/azure-rest-api-with-oauth2/)

# opengl - 如何使用 OpenGL C/C++ 显示实时串口数据

> ID：15197471
> 
> 赞同：1
> 
> 时间：2013-03-04T08:34:21.033
> 
> 标签：opengl, serial-port, video-streaming

我正在编写一个从 COM3 读取串行数据的 C 程序（这些数据实际上是视频帧流的像素强度）；一旦完全接收到一帧，程序会重新组装该帧并使用 OpenGL 显示它；下一帧到来，显示下一帧。（所以最后它看起来像一个视频）

对我来说，似乎我需要一个线程来接收数据和另一个线程来显示？由于程序不能停止接收数据。

我已经完成了数据接收和框架重组部分，但我不知道显示部分是如何工作的。谁能给我任何线索如何做到这一点？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:55:08.280

不，您不必在不同的线程上执行此操作。考虑这个伪代码：

```
while (true) {
    if (data_present())
        read_data();

    display();
} 
```

根据我从您的问题中了解到的情况，您想在屏幕上显示栅格数据。在这种情况下，实例化连续内存缓冲区中的数据，创建它的纹理并将其渲染到覆盖整个屏幕的四边形或两个三角形上。

# openlayers - 在openlayers中绘制行数

> ID：15197476
> 
> 赞同：0
> 
> 时间：2013-03-04T08:34:57.343
> 
> 标签：openlayers

我的数组中共有 6 个点和一个中心点如下所示

```
 var a = new Array();
        a[0] = [13.90,52.90];
        a[1] = [14.90,52.90];
        a[2] = [12.90,52.90];
        a[3] = [13.11,51.90];
        a[4] = [12.67,49.34];
        a[5] = [11.45,50.567];
        var centerpoint = new OpenLayers.Geometry.Point(13.41,52.52); 
```

我想在所有数组点和中心点之间画线（即 a[0] 和中心点之间的线，a[1] 和中心点之间的线等）。

我无法以任何方式做到这一点。

任何人都可以建议一些方法来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:28:05.550

那么，你想画 6 条线吗？您可以使用 OpenLayers.Geometry.LineString 创建线串，它将 OpenLayers.Geometry.Point 的数组作为参数。请记住，您不能直接使用 [13.90,52.90]，您必须像使用 centerpoint 一样创建 Point 对象。

```
for (var i = 0, len = a.length; i < len; i++) {
    var lineGeom = new OpenLayers.Geometry.LineString([
        new OpenLayers.Geometry.Point(a[i][0], a[i][1]),
        centerpoint
    ]);
    var lineFeat = new OpenLayers.Feature.Vector(lineGeom);
    vectorLayer.addFeatures([lineFeat]);
} 
```

# javascript - jQuery比较两个DOM对象？

> ID：15197477
> 
> 赞同：16
> 
> 时间：2013-03-04T08:35:12.743
> 
> 标签：javascript, jquery, dom, object, compare

点击一个元素：

```
$('.my_list').click(function(){
   var selected_object = $(this);

   $('.my_list').each(function(){
      var current_object = $(this);

      if( selected_object == current_object ) alert('FOUND IT !');
   });
}); 
```

我不知道为什么，但我没有收到警报消息“找到它！”。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-04T08:39:18.383

您可以使用以下[`jQuery.is`](http://api.jquery.com/is/)功能：

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

```
if (selected_object.is(current_object)) {
   ...    
} 
```

另一种解决方案是使用[`jQuery.get`](http://api.jquery.com/jQuery.get/)函数来获取原始元素并使用`==`or`===`运算符比较它们：

```
if (selected_object.get(0) == current_object.get(0)) {
   ...
} 
```

[**jsFiddle 演示**](http://jsfiddle.net/salman/y8K22/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-24T23:49:27.970

提供了很好的答案......但重要的是要理解，为什么你不能直接比较 jQuery 中的选择器。

jQuery 选择器返回的**数据结构在引用相等的意义上永远不会相等**。所以解决这个问题的唯一方法是从 jQuery 对象中获取 DOM 引用并比较 DOM 元素。

上面示例的 DOM 引用的最简单比较是：

```
selected_object.[0] == current_object.[0] 
```

# android - 适用于 iOS、Android 和 WP8 的跨平台 UI 标记语言？

> ID：15197480
> 
> 赞同：0
> 
> 时间：2013-03-04T08:35:26.810
> 
> 标签：android, ios, mobile, windows-phone-8, markup

是否有适用于主要移动操作系统的跨平台 UI 标记语言？我主要是在寻找一种描述表单和其他交互元素的语言。

HTML 不会这样做，因为要求是使用每个设备的本机小部件为视图中的所有内容构建 UI。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:22:11.670

也许您可以尝试众多多平台工具包之一，例如：

*   Appcelerator Titanium 移动版[http://www.appcelerator.com/products/titanium-mobile-application-development/](http://www.appcelerator.com/products/titanium-mobile-application-development/)
*   掌声[https://github.com/applause/APPlause](https://github.com/applause/APPlause)
*   Appmobi XDK [http://www.appmobi.com/](http://www.appmobi.com/)
*   卡纳皮 [http://www.canappi.com/](http://www.canappi.com/)
*   柯尼 [http://www.konysolutions.com/konyone](http://www.konysolutions.com/konyone)
*   果酱 [http://www.madewithmarmalade.com/](http://www.madewithmarmalade.com/)
*   Mobl [http://www.mobl-lang.org/](http://www.mobl-lang.org/)
*   Orubase [http://www.orubase.com](http://www.orubase.com)
*   PhoneGap [http://phonegap.com/](http://phonegap.com/)
*   红色铸造厂 [http://www.redfoundry.com/](http://www.redfoundry.com/)
*   StackMob [https://dashboard.stackmob.com/](https://dashboard.stackmob.com/)
*   Steape [http://www.steape.com/](http://www.steape.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T16:06:47.287

看看 MarkupKit：

[https://github.com/gk-brown/MarkupKit](https://github.com/gk-brown/MarkupKit)

这是我编写的一个开源框架，允许您在标记中构建原生 iOS 应用程序。它不是跨平台的，但它提供了与 XAML 和 Android 类似的开发隐喻。例如，您可以像这样创建一个标签实例：

```
<UILabel text="Hello, World" font="System 24" textColor="#ff0000"/> 
```

而不是这个：

```
UILabel *label = [UILabel new];

[label setText:@"Hello, World"];
[label setFont:[UIFont systemFontOfSize:24];
[label setTextColor:[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0]]; 
```

显然，这是一个简单的例子——使用标记的价值在更复杂的视图层次结构中变得更加明显。它还支持动态本地化和类 CSS 样式。

您可以在我的博客上找到文章和示例：

[https://gkbrown.wordpress.com](https://gkbrown.wordpress.com)

希望你觉得它有用。

# jboss - Jboss7.1.1.Final下最大MAX_HEADER_SIZE

> ID：15197484
> 
> 赞同：1
> 
> 时间：2013-03-04T08:35:49.017
> 
> 标签：jboss, server.xml

MAX_HEADER_SIZE最大值是多少，我们可以在Jboss7.1.1.Final下的Standalone.xml中设置？我检查了大小为 5Mb 的数据，它正在接受它。但它有任何最大长度吗？

# javafx-2 - JavaFx TableView 与大数据有关的问题

> ID：15197490
> 
> 赞同：3
> 
> 时间：2013-03-04T08:36:08.863
> 
> 标签：javafx-2, tableview, javafx

我一直在使用 JavaFx 的 tableview 来显示来自数据库的大量数据。该表就像 150 多列和数百万行。我可以通过分块获取数据并实现分页（[链接](https://stackoverflow.com/questions/12068907/javafx-tableview-performance-issue)）来处理行。但是列的数量也是一个值得关注的领域。[当我更改模型（参考](https://stackoverflow.com/questions/11065140/javafx-2-1-tableview-refresh-items/12737209#12737209)）中的值时，绘制数据需要很多时间并且不会更新数据。我没有预定义的数据结构，所以这个方法[没有](https://stackoverflow.com/questions/13873361/javafx-tableview-is-not-updating%20will%20not%20work)用。我继续在 JavaFx 中使用 JTable，但 JFX2.0 已经删除了对 JavaFX 场景中 Swing 组件的支持。所以留下tableview是否有某种方法可以在不过度使用内存的情况下向列和行添加分页？

# vhdl - VHDL 代码不综合

> ID：15197491
> 
> 赞同：1
> 
> 时间：2013-03-04T08:36:18.630
> 
> 标签：vhdl

我在我的 VHDL 代码中编写了 2 个状态机。模拟工作正常，但代码没有合成。任何帮助，将不胜感激。这是我的代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_arith.ALL;
use IEEE.STD_LOGIC_unsigned.ALL;
use IEEE.NUMERIC_STD.ALL;

entity pulse_width is
Port (  clk : in STD_LOGIC;
            timer2:in std_logic;
            input: in STD_LOGIC;
            result: inout STD_LOGIC_VECTOR (15 downto 0);
            SEL_LINE: IN STD_LOGIC_VECTOR(5 DOWNTO 0);
            data_out: out STD_LOGIC_VECTOR (23 downto 0):=x"000000");
end pulse_width;

architecture Behavioral of pulse_width is
    TYPE count_states is (s0,s0_dash,s1,s2,s3,s1_dash);
    SIGNAL current_state, next_state : count_states := s0 ;
    TYPE write_states is (ws0,ws0_dash,ws1,ws2,ws3,ws4);
    SIGNAL current_state1, next_state1 : write_states := ws0 ;
    TYPE index_array is ARRAY(integer range 0 to 65535) of std_logic_vector(15 downto 0);
    SIGNAL mem: index_array;
    SIGNAL count: std_logic_vector(15 downto 0):=x"0000";
    SHARED VARIABLE j: integer:=0;
    SHARED VARIABLE a,i: integer:=1;
    SIGNAL flag,push_data,push_first,push_final,push_pulses,rw_first,rw_end: std_logic:='0';
    SIGNAL y_clk_input ,y_clk_timer2, enable_count: std_logic:='0';
    SIGNAL first,final: std_logic_vector(15 downto 0):= x"0001";

begin
-- Pulse width count

process (clk)
begin
    if rising_edge(clk) then
        current_state<=next_state;
        current_state1<=next_state1;
    end if;
end process;

process(input,SEL_LINE,current_state)
begin

------------------------------------------------------------------------
    case current_state is
    when s0 => 
        if(input='1') then
            next_state<=s1;
        else
            next_state<=s0;
        end if;
    when s1 =>
        flag<='0';
        if input='1' then
            count <= count+ x"0001";
            next_state<=s1_dash;
        else
            next_state<=s2;
        end if;         
    when s1_dash =>
        if input='1' then
            count <= count+ x"0001";
            next_state<=s1;
        else
            next_state<=s2;
        end if;         
    when s2 =>
            result <= count;
            next_state<=s3;
    when s3=>
            count <= x"0000";
            next_state<=s0;
            enable_count<='0';
    when others =>
        next_state<=s0;
    end case;

--------------------------------------------------------------------------
    case current_state1 is
    when ws0 =>
        if  (result>x"0000") then
        next_state1<=ws1;
        else
        next_state1<=ws0_dash;
        end if;
    when ws0_dash =>
        if  (result>x"0000") then
        next_state1<=ws1;
        else
        next_state1<=ws0;
        end if;
    when ws1=>
        if rw_first='1' and rw_end='1' then
        next_state1<=ws0;
        else
            mem(a) <= result;
            a:=a+1;
            final<=final+x"0001";
            next_state1<=ws2;
        end if;
    when ws2 =>
            next_state1<=ws0;
            result<=x"0000";
    when others  =>
        next_state1<=ws0;
    end case;
end process; 
```

我最终需要实现三个状态机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:58:47.263

您尝试在异步状态逻辑中执行的数学运算未注册并且不会很好地综合。您需要重新安排您的状态逻辑，以便声明如下：

```
count <= count+ x"0001";
...
final<=final+x"0001"; 
```

...在异步循环中是同步的而不是“自由运行”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:47:07.363

问题是您在一个组合过程中读取和写入相同的信号。

*   要么将所有内容放在一个时钟（同步）过程中
*   或者：使用显式寄存器：`count_next <= count + x"0001";`

与您的错误无关，但仍然值得关注：

您有大量未使用的信号和共享变量： push_data,push_first,push_final,push_pulses, y_clk_input ,y_clk_timer2, first, i,j 这会让任何试图阅读您的代码的人感到困惑。[1](http://www.sigasi.com/content/dead-code)

包 STD_LOGIC_arith 和 STD_LOGIC_unsigned 已[弃用](http://www.sigasi.com/content/deprecated-ieee-libraries)

# constraints - Teradata 12.0：参照完整性约束

> ID：15197494
> 
> 赞同：1
> 
> 时间：2013-03-04T08:36:26.020
> 
> 标签：constraints, teradata, referential-integrity

是否可以在引用另一个表中的非主键列的列上添加引用完整性约束。

**我基本上有一个带有非唯一**ID 列的表。

我有另一个带有 REFERENCE 列的表，它引用了上表中的 ID 列。

我想对 REFERENCE 列强制执行一个约束，即它只包含 ID 列中存在的值。

这可以通过 Teradata 12.0 中的参考约束来完成吗？

谢谢

# intellij-idea - IntelliJ：将运行/调试特定配置映射到工具栏

> ID：15197495
> 
> 赞同：3
> 
> 时间：2013-03-04T08:36:33.990
> 
> 标签：intellij-idea

谷歌搜索、搜索这个网站和随机实验都没有产生任何结果，所以就这样吧。

我正在开发一个包含不同 Maven 项目的项目，其中几个项目需要运行才能使系统正常工作。（客户端、服务器等）单独启动它们有点不方便，但正如[这个问题](https://stackoverflow.com/questions/10604019/how-to-combine-several-run-configurations-in-intellij-together)所暗示的那样，没有办法将它们组合成一个配置（自那个答案以来情况似乎也没有改变）。

相反，我现在想知道是否可以将运行/调试特定配置映射到工具栏，即有一个“运行项目 1”按钮、一个“调试项目 3-C”按钮等等，而不是必须做打开列表、选择配置和单击每个所需组件的运行/调试的三步过程。

有谁知道实现这一目标的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T08:52:22.607

您不能在工具栏中有多个配置，但我可以建议一个更好的替代方案来一次运行多个配置。

在 IDEA 12 中，可以**在启动前**部分运行另一个配置。**因此，您只需在“启动前**”步骤中添加所有其他要使用当前配置启动的配置，然后运行单个配置并启动所有配置。请注意，您可以从相同的配置运行 Maven 目标：

![在此处输入图像描述](../Images/3418d5e7b7530a535dcd7af683d59388.png)

* * *

正如您所指出的，如果配置继续运行，它将无法工作，因为它将等待命令完成。

恐怕现在没有更简单的方法可以做到这一点，除非可能使用键盘快捷键来[运行弹出菜单](http://blogs.jetbrains.com/idea/2009/10/invoking-rundebug-actions-in-intellij-idea-9/)。

以下是您应该投票支持的问题：

*   [IDEA-94341 一次](http://youtrack.jetbrains.com/issue/IDEA-94341)启动多个“运行/调试配置”
*   [IDEA-69968](http://youtrack.jetbrains.com/issue/IDEA-69968)添加选项以将键盘快捷键分配给运行/调试配置
*   [IDEA-75078](http://youtrack.jetbrains.com/issue/IDEA-75078)可以创建用于运行特定运行配置的工具栏操作

# jquery - JQuery 复选框过滤

> ID：15197500
> 
> 赞同：0
> 
> 时间：2013-03-04T08:36:46.057
> 
> 标签：jquery, filtering

我遇到了制作过滤系统的问题，该系统添加了一个类来抑制与复选框条件不匹配的元素的不透明度。当我尝试通过使用“切换”而不是“单击”或循环测试条件来撤消该过程以删除该类时，我遇到了复选框不起作用的错误（不出现勾号）。

我想要做的是，在复选框被取消选中后，删除“不透明度”类，以便它返回到初始的、预过滤的页面视图。这是我没有导致错误的代码，直到删除 opacity 类：

```
$(".filters :checkbox").click(function(){
   $('.video-placeholder').addClass('opacity');
   $('.filters :checkbox:checked').each(function() {
       $("." + $(this).val()).addClass('opacity-full');
   });
}); 
```

任何帮助都会受到好评！我把它托管在这里看看：http: [//yaocho-digital.com/83london/](http://yaocho-digital.com/83london/) - 谢谢。

J.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:38:10.587

您将在下面找到代码基本表示形式的 jsFiddle，

[http://jsfiddle.net/zcQnj/27/](http://jsfiddle.net/zcQnj/27/)

```
 $('.filters :checkbox:checked').each(function() {
        $("." + $(this).val()).removeClass('opacity').addClass('opacity-full');
    });

    if ( $('.filters :checkbox:checked').length == 0 ) 
        $('.video-placeholder').removeClass('opacity'); 
```

通过在匹配时和未应用过滤器时删除不透明度类，我希望我正确理解了您的问题！

# python - 根据自定义功能的 bin 宽度

> ID：15197510
> 
> 赞同：0
> 
> 时间：2013-03-04T08:37:29.360
> 
> 标签：python, numpy, matplotlib

我想以非统一的方式对我的数据进行分类。

```
import numpy as np
import matplotlib.pyplot as plt

def fun(x):
  return >some function of x< 
```

我现在想要的是使某些东西看起来像：

```
np.linespace(0.,200.,fun(x)) 
```

有没有一种方便的方法来使用可以处理它的 numpy 函数？我刚刚看到`np.arange`并`np.linspace`使用数字并且不能将函数作为参数。

我可以编写一个可以处理它的函数，但是本机解决方案会好得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:40:16.400

创建一系列 x 值，定义您的自定义函数，然后在每个数组元素上调用您的函数。Numpy 使这很容易：

```
fun = lambda x: x**2 # Example function
N = 10 # Number of data points
x = np.linspace(0., 200., N) # Creates an array of N points
bins = fun(x) # Applies fun to all values in array x 
```

# ruby-on-rails - 如何通过用户创建新帖子？

> ID：15197516
> 
> 赞同：1
> 
> 时间：2013-03-04T08:37:38.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下用户和帖子关系：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation

  has_many :posts
end

class Post < ActiveRecord::Base
  attr_accessible :content

  belongs_to :user
end 
```

我正在尝试通过用户创建新帖子，但出现错误。我不确定为什么：

```
1.9.3-p392 :001 > @user = User.where(:id => 1)
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1
 => [#<User id: 1, email: "test@test.com", encrypted_password: "$2a$10$ltpBpN0gMzOGULVtMxqgueQHat1DLkY.Ino3E1QoO2nI...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 6, current_sign_in_at: "2013-03-04 05:33:46", last_sign_in_at: "2013-03-03 22:18:17", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", created_at: "2013-03-02 03:41:48", updated_at: "2013-03-04 05:33:46", avatar_file_name: nil, avatar_content_type: nil, avatar_file_size: nil, avatar_updated_at: nil>] 
1.9.3-p392 :002 > @user.posts.create(:content => "This is the content")
NoMethodError: undefined method `posts' for #<ActiveRecord::Relation:0x000000024ca868> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:05:01.190

`where`ActiveRecord 关系之间存在差异`find`。

查询：

`@user = User.where(:id => 1)`正在给你的数组哈希。

因此，当您`@user.posts`对上述查询执行类似操作时，它会给出错误，`NoMethodError on ActiveRecord::Relation`因为没有与此哈希关联的此类帖子。因此，为了将其转换为 id 为 1 的用户，您可以这样做：

```
@user = User.where(:id => 1).first 
```

或者

```
@user = User.find(:id => 1) 
```

两者都会为您提供 id 为 1 的用户（只有一条记录），然后您可以使用它：

```
@user.posts 
```

以上将给出 id 为 1 的用户的相关帖子。

然后你可以这样做：

```
@user.posts.create(:content => "Post of user 1") 
```

所以你要做的实际上是给你散列（一组用户），但实际上你只希望一个用户创建相关的帖子。

另外，请参阅[find 和 where 之间的区别](https://stackoverflow.com/questions/5213358/difference-between-find-and-where-with-relationships)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:45:17.923

你的代码

```
User.where(:id => 1) 
```

没有给你一个模型实例，而是一个[关系](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)。因此`NoMethodError`在 ActiveRecord:: **Relation**上。

将您的第一行更改为

```
User.find(1) 
```

你很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:51:05.070

用这个

```
@user = User.where(:id => 1).shift
@user.posts.create(:content => "This is the content") 
```

**或者**

```
@user = User.find(1)
@user.posts.create(:content => "This is the content") 
```

# regex - 使用正则表达式和 Memcache 的 Rails 过期操作

> ID：15197521
> 
> 赞同：0
> 
> 时间：2013-03-04T08:37:55.657
> 
> 标签：regex, ruby-on-rails-3, caching, memcached

我正在开发 Rails 应用程序，并使用 Dalli 将缓存与 memcache 集成。我正在使用清扫器处理动作缓存和过期缓存。我的扫地机代码如下所示：

```
class BoardSweeper < ActionController::Caching::Sweeper
  observe Board

  def after_create(board)
    expire_cache(board)
  end

  def expire_cache(board)
   expire_action :controller => :boards, :action => :show, :id => "#{board.id}-#{board.title.parameterize}"
  end

end 
```

但我想使用正则表达式删除缓存，即我想匹配 url 并删除缓存，就像：

*如果我的板显示网址是这样的：*

```
 "boards/1/likes-collection-of-branded-products.text/javascript"
 "boards/1/likes-collection-of-branded-products.text/html" 
```

*然后我想使用以下表达式使缓存过期：*

```
 Rails.cache.delete_matched(/boards\/1.*/) 
```

但根据[memcache api doc](http://api.rubyonrails.org/classes/ActiveSupport/Cache/MemCacheStore.html#method-i-read_multi)，它不支持**delete_matched**方法。

我确信应该有一些基于正则表达式的删除方法。请帮忙。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:11:54.993

afaik memcached 的问题在于没有简单的方法来检索所有密钥。这就是为什么没有像基于正则表达式过期这样的功能。

你可以做什么：

为您的缓存键使用命名约定，并简单地使您知道的所有可能已创建的缓存键过期。

这会通过使尚未创建的密钥过期而产生一些开销。

总的来说，我不建议您使用动作缓存。这些被排除在rails4之外是有充分理由的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T14:24:24.880

您可以尝试将[Gibson](http://gibson-db.in/)缓存服务器作为您的主缓存存储，由于其内部数据结构，它支持在 O(1) 时间内通过前缀使多个键失效，在您的情况下，这只是一个问题：

```
Rails.cache.delete_matched "boards/1/" 
```

ActiveSupport 扩展正在开发中，将在大约一周内发布。

# iphone - 用 UIImage 绘制图案不像图案，但它在 UIView 中填充了 UIImage

> ID：15197523
> 
> 赞同：2
> 
> 时间：2013-03-04T08:38:08.317
> 
> 标签：iphone, cgcontext, cgcontextdrawimage

我的代码行：

```
UIColor *brushPattern=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"Frame-1@2x.png"]];
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(),brushPattern.CGColor);
Image pattern 
```

[网址](http://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-ash3/733867_513688398695514_212660265_n.jpg)

它不像画笔图案那样绘制，而是填充图案`UIView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:52:28.647

我已经使用了以下代码

在 ViewDidLoad 或您要开始分配的地方

```
 patternColor = [UIColor colorWithPatternImage:image] 
```

这将解决您的内存问题，下面的代码将帮助您

```
UIGraphicsBeginImageContextWithOptions(view.frame.size, NO, [[UIScreen mainScreen] scale]);

CGContextRef context = UIGraphicsGetCurrentContext();
[view.image drawInRect:CGRectMake(0, 0, view.frame.size.width, view.frame.size.height)];

CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, 10);

CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), patternColor.CGColor);
CGContextSetBlendMode(context, kCGBlendModeNormal);

CGContextBeginPath(context);
CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(context, currentPoint.x, currentPoint.y);
CGContextStrokePath(context);
UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# javascript - 免费分配者 页面重新加载时的内存

> ID：15197527
> 
> 赞同：8
> 
> 时间：2013-03-04T08:38:37.890
> 
> 标签：javascript, html, memory-leaks

在以下示例中，如何通过 <canvas> 释放分配的内存：

```
<html>
  <head>
  </head>
  <body id="body">
    <canvas id="canvas" width=3000 height=2000/>
    <script>
      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");
      ctx.fillText("hao ar iu?", 20, 20);
    </script>
  </body>
</html> 
```

我尝试将*var canvas*设置为 null（canvas = null），以删除画布（删除画布）或动态创建画布并将其附加到“文档”根，然后以这种方式删除它：

```
<div onclick=reload()>CLICK TO RELOAD PAGE</div>
<script>
  function reload(){
    body.removeChild(canvas);
    location.reload();
  }
</script> 
```

没有任何变化，分配的内存随着每次页面重新加载而变得越来越大，直到我的浏览器占用过多的 CPU RAM 内存。有时浏览器会崩溃。有时垃圾收集器会清除范围之外的一些变量。但它让太多的内存被占用。我使用 Chrome 版本 25。是否有任何方法可以释放 <canvas> 内存或引发早期垃圾收集？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-02T05:32:47.803

您是否尝试过 JavaScript 运算符删除？

```
delete canvas; 
```

否则你可以试试这个对我有用的：

```
canvas.parentNode.removeChild(canvas); 
```

您需要确保删除对画布的所有引用，即使是 DOM 或任何其他对象的引用，以避免内存泄漏。

PS：忘了说你的画布尺寸很大。保持画布尺寸尽可能小，以减少内存使用并提高 fps。

PS2：关闭路径将有助于避免内存泄漏

# actionscript-3 - ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象

> ID：15197528
> 
> 赞同：0
> 
> 时间：2013-03-04T08:38:42.220
> 
> 标签：actionscript-3, flash-cs5.5

我很想按照您的说明更改我的代码，但不起作用：/

```
import flash.ui.Keyboard;
import flash.events.Event;
import flash.sampler.NewObjectSample;
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.media.SoundChannel;

//stage.addEventListener(KeyboardEvent.KEY_DOWN,test);

/*function test(e:KeyboardEvent){
    trace('code='+e.keyCode);
}
*/
//--- Variables: ---
stop();

var timer1: Timer=new Timer (115000,1);
var timerPoint: Timer=new Timer (115000,0);
var points: Number = 0;

pisteWWRY = lvl1WWRY.play(); // Play the music

stage.addChild(map);

var tableau1: Array=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0,0],
                     [1,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],                         
                     [1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
                     [0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
                     [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,1,0,0]];                                    //Arr   ay to create level.

var L:int=0;
var C:int=0;

// création du tableau.

function lvl1 () {
    for (L=0; L<tableau1.length ;L++){                          
        for(C=0; C<tableau1[0].length ;C++){                    
            if (tableau1[L][C]==1){
                var Blockn1: block=new block(); 
                    map.addChild(Blockn1);
                    Blockn1.x=1620+C*60;
                    Blockn1.y=30+L*50;  
                    Blockn1.addEventListener (Event.ENTER_FRAME, collisions);
                    stage.removeEventListener (Event.ENTER_FRAME, lvl1 );
            }
        }
    }
}

//--- Ecouteurs: ---

timer1.addEventListener (TimerEvent.TIMER, stoplvl1);
timer1.start();

timerPoint.addEventListener (TimerEvent.TIMER, pointlvl1);
timerPoint.start();

stage.addEventListener (Event.ENTER_FRAME, moove);

//--- Fonctions: ---

function stoplvl1 (e:TimerEvent) :void{
    gotoAndStop(4);
}

function pointlvl1 (e:TimerEvent) :void{
    points++;
    Scorelvl1.text = points.toString();
}

function collisions (e:Event):void {
    if(e.target.hitTestObject(Perso)){
         if (map && stage.contains(map)) {
            stage.removeChild(map);
        }
        stage.removeEventListener (Event.ENTER_FRAME, moove);
        pisteWWRY = lvl1WWRY.stop();
        gotoAndStop(4);
    }
} 
```

这是我现在的代码。我的错误：

```
TypeError: Error #1006: stop is not a function.
    at projsolo_fla::MainTimeline/collisions()[projsolo_fla.MainTimeline::frame3:78] 
```

我不去第 4 帧，如果我退出：pisteWWRY = lvl1.stop(); 当我发生碰撞时我会崩溃......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:48:11.470

在该`collisions`函数中，您要从舞台上删除，`map`但不会停止`ENTER_FRAME`调用的事件，`collisions`因此第二次调用它`map`不再是 the 的子级，`stage`并且您会收到错误消息。

你可以做这样的事情

```
function collisions (e:Event):void {
    if(e.target.hitTestObject(Perso)){
        if (map && stage.contains(map)) {
            stage.removeChild(map);
        }
        stage.removeEventListener (Event.ENTER_FRAME, moove);
        stage.removeEventListener (Event.ENTER_FRAME, lvl1);
        playWWRY.removeEventListener (MouseEvent.CLICK, jouerWWRY);
        pisteWWRY = lvl1WWRY.stop();
        gotoAndStop(4);
    }
} 
```

这将缓解问题，但我认为您应该重新考虑一些代码逻辑，因为该函数将继续运行，直到您删除`ENTER_FRAME`事件侦听器（您甚至无法再轻松访问它，因为它不再在范围内）。

# c# - 如何使用 CodeDOM 创建私有类？

> ID：15197529
> 
> 赞同：0
> 
> 时间：2013-03-04T08:38:44.683
> 
> 标签：c#, codedom

我正在使用 CodeDOM 编译基于数据表检索形式的 SQL 服务器的 *.cs 文件。因此，编译后的代码应该是特定表的实体类。我设法将该类编译为公共、内部或接口类。

前任。

```
public class SomeThing(){} 
```

或者

```
internal class Something(){} 
```

但问题是没有属性可以使用 CodeDOM 将类设为私有。有什么办法可以完成工作吗？

我将此代码用作我的模板[http://msdn.microsoft.com/en-us/library/ms404245(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms404245(v=vs.100).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:05:13.563

顶级私有类没有多大意义，因为它们对其他类型是不可见的。允许嵌套类是私有的。

以下是 C# 语言规范的摘录：

> 3.5.2 可访问域
> 
> 在程序 P 中声明的顶级未绑定类型 T（第 4.4.3 节）的可访问域定义如下：
> 
> *   如果声明的 T 的可访问性是公共的，则 T 的可访问域是 P 的程序文本和任何引用的程序
> *   P. 如果声明的 T 的可访问性是内部的，则 T 的可访问域是 P 的程序文本。
> 
> **从这些定义可以看出，顶级未绑定类型的可访问域始终至少是声明该类型的程序的程序文本**。构造类型 T 的可访问域是未绑定的泛型类型 T 的可访问域与类型参数 A1、...、AN 的可访问域的交集。
> 
> 在程序 P 中以类型 T 声明的嵌套成员 M 的可访问域定义如下（注意 M 本身可能是一个类型）：
> 
> *   如果 M 声明的可访问性是公共的，则 M 的可访问域是 T 的可访问域。
> *   如果声明的 M 的可访问性是受内部保护的，则令 D 是 P 的程序文本和从 T 派生的任何类型的程序文本的并集，T 是在 P 外部声明的。M 的可访问域是可访问域的交集T 与 D。
> *   如果声明的 M 的可访问性受到保护，则令 D 是 T 的程序文本和从 T 派生的任何类型的程序文本的并集。M 的可访问域是 T 的可访问域与 D 的交集。
> *   如果声明的 M 的可访问性是内部的，则 M 的可访问域是 T 的可访问域与 P 的程序文本的交集。
> *   如果 M 声明的可访问性是私有的，则 M 的可访问域是 T 的程序文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:52:11.453

和 TypeAttributes NotPublic？

# php - 致命错误：未捕获的 CurlException：26：无法打开文件“”抛出

> ID：15197530
> 
> 赞同：0
> 
> 时间：2013-03-04T08:38:45.853
> 
> 标签：php, facebook-graph-api, curl, smarty

```
<?php
ob_start();
include("/home/coversco/public_html/include/config.php");
ini_set('display_errors', 1);
 error_reporting(E_ALL);

 require 'src/facebook.php';

 $facebook = new Facebook(array(
 'appId' => "xxxxxxxxxxxx", //Facebook App ID
 'secret' => "xxxxxxxxxxxx", // Facebook App Secret
 "cookie" => true,
 'fileUpload' => true
 ));

 $user_id = $facebook->getUser();

 if($user_id == 0 || $user_id == "")
 {
 $login_url = $facebook->getLoginUrl(array(
 'redirect_uri' => 'http://18covers.com/upload/index.php?cover='.$_GET['cover'].'', // Replace with your site url
 'scope' => "publish_stream,user_photos"));

 echo "<script type='text/javascript'>top.location.href = '$login_url';</script>";
 exit();
 }

 //get user album
 $albums = $facebook->api("/me/albums");
 $album_id = ""; 
 foreach($albums["data"] as $item){
 if($item["type"] == "cover_photo"){
 $album_id = $item["id"];
 break;
 }
 }

 //set timeline cover atributes 
 $full_image_path = realpath('{$purl}/t/l-{$p.pic}');
 $args = array('message' => 'Get awesome covers at www.18covers.com');
 $args['image'] = '@' . $full_image_path;

 //upload cover photo to Facebook
 $data = $facebook->api("/me/photos", 'post', $args);
 $picture = $facebook->api('/'.$data['id']);

 $fb_image_link = 'http://www.facebook.com/profile.php?preview_cover='.$data['id'].''; //redirect to uploaded facebook 

cover and change it
 echo "<script type='text/javascript'>top.location.href = '$fb_image_link';</script>";
?> 
```

我已经建立了一个封面照片的网站，现在我正在尝试添加该功能，让用户通过单击按钮上传特定照片。但是我遇到了一个问题，问题是我已经为变量指定了图像的路径，图像的路径及其扩展名`$full_image_path`在哪里。`{$purl}/t/l-{$p.pic}`我需要输入目录中的路径还是 URL 路径。我输入的是 URL 路径，它抛出的错误是这个问题的标题。

如果有人告诉我正确的方向，我将不胜感激。

谢谢你。

# javascript - Bootstrap 按钮加载 + Ajax

> ID：15197537
> 
> 赞同：10
> 
> 时间：2013-03-04T08:39:05.827
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap 的按钮加载状态（[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)）。

```
HTML:

<input type="submit" class="btn" value="Register" id="accountRegister" data-loading-text="Loading..."/>

JS:

(function ($, undefined) {
    $("#accountRegister").click(function () {
        $(this).button('loading');
        $.ajax({
            type:"POST",
            url:"/?/register/",
            data:$("#loginForm").serialize(),
            error:function (xhr, ajaxOptions, thrownError) {
                $("#accountRegister").button('reset');
            },
            success:function (data) {
                $("#accountRegister").button('reset');
            }
        });
        return false;
    })
})(jQuery); 
```

但是如果我有很多按钮，我需要编写很多函数（？）。当然我可以做这样的事情：

```
$(".ajax-button").bind("click", function() { 
     $(this).button("loading");}) 
```

我可以使用 jQuery Ajax 事件`ajaxComplete`

```
$(".ajax-button").bind("ajaxComplete", function() { 
     $(this).button("reset");}) 
```

但是这样，当**任何**Ajax 请求完成时，**所有**按钮都将设置为正常状态。

 **如果用户点击*button1*然后点击*button2*（两个按钮都在发送Ajax请求），当第一个Ajax请求完成时，它们将被设置为正常状态。如何确定我需要将哪个按钮设置为正常状态？

先感谢您。

## 更新

我只需要确定哪个按钮触发了某些操作（Ajax 请求），将其状态设置为正在*加载*，以及 Ajax 请求何时完成，将其状态设置为正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T16:50:29.070

我为我的问题找到了解决方案 =) 在阅读了 jQuery 文档后，我为我的系统编写了以下代码：

**核心.js：**

```
(function ($, undefined) {
    $.ajaxSetup({
        beforeSend:function (xhr, settings) {
            if (settings.context != undefined && settings.context.hasClass('btn')) {
                settings.context.button('loading');
            }
        },
        complete:function () {
            this.button('reset');
        }
    });
})(jQuery); 
```

**帐户.js：**

```
(function ($, undefined) {
    $("#accountRegister").click(function () {
        $.ajax({
            context:$(this), // You need to set context to 'this' element
            //some code here
        });
        return false;
    })
})(jQuery); 
```

这完美地工作。希望这对某人有用。**

# angularjs - AngularJs：视图完全呈现后运行指令

> ID：15197538
> 
> 赞同：20
> 
> 时间：2013-03-04T08:39:08.630
> 
> 标签：angularjs, angularjs-directive

我是所有 Angular World 的新手，我在管理指令时遇到了问题。

我正在开发一个使用选项卡的项目，我想扩展它的功能以在窗口大小比我所有选项卡的宽度更窄时处理溢出的选项卡，所以我需要计算元素的一些尺寸来实现这一点。选项卡是从 $scope 中的对象构建的，问题是计算尺寸的指令在视图完全编译之前运行。

**Plnkr 链接：** [http ://plnkr.co/edit/LOT4sZsNxnfmQ8zHymvw?p=preview](http://plnkr.co/edit/LOT4sZsNxnfmQ8zHymvw?p=preview)

**我试过的：**

1.  使用 templateUrl 在指令中加载模板
2.  使用 transclude
3.  在 ng-repeat 中使用 $last
4.  尝试重新排序指令并在每个选项卡中创建一个虚拟指令以触发事件

我认为有一些 AngularJs 事件或属性来处理这种情况。

请大家帮忙:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-10T03:52:17.787

我在你的 plunker 上做了一个分支，我认为这就是你要找的东西

我将您的指令更改为此

```
.directive('onFinishRenderFilters', function ($timeout) {
    return {
        restrict: 'A',
        link: function (scope, element, attr) {
            if (scope.$last === true) {
                $timeout(function () {
                    scope.$emit('ngRepeatFinished');
                });
            }
        }
    }
}); 
```

然后在你的 HTML 上我添加了指令

```
 <li ng-repeat="tab in tabs" on-finish-render-filters> 
```

最后一件事我把我想在重复完成后运行的代码

```
$scope.$on('ngRepeatFinished', function (ngRepeatFinished) {
        $scope.tabs = [{
            index: 1,
            title: "Tab 1",
            link: "/tab1/"
        },{
            index: 2,
            title: "Tab 2",
            link: "/tab2/"
        },{
            index: 3,
            title: "Tab 3",
            link: "/tab3/"
        },{
            index: 4,
            title: "Tab 4",
            link: "/tab4/"
        }];

  }); 
```

[http://plnkr.co/edit/TGduPB8FV47QvjjLnFg2?p=preview](http://plnkr.co/edit/TGduPB8FV47QvjjLnFg2?p=preview)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T10:15:56.697

对于 ng-repeat 中使用的指令，AngularJS 似乎没有可靠的渲染后回调。[1]

也许您可以通过为特定屏幕宽度添加“响应式”溢出控制元素来解决 CSS 级别的问题。

1.  [https://groups.google.com/forum/#!topic/angular/SCc45uVhTt8](https://groups.google.com/forum/#!topic/angular/SCc45uVhTt8)

更新：现在有一种使用嵌套 $timeouts 的方法。见： http: [//lorenzmerdian.blogspot.de/2013/03/how-to-handle-dom-updates-in-angularjs.html](http://lorenzmerdian.blogspot.de/2013/03/how-to-handle-dom-updates-in-angularjs.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-09T15:42:15.530

您可以在实际的 DOM 元素上添加监视，以了解您的 ng-repeat 何时加载到 DOM 中。

给你的 ul 一个 id，比如#tabs

```
$scope.$watch(
    function () { return document.getElementById('tabs').innerHTML },  
    function(newval, oldval){
        //console.log(newval, oldval);
        //do what you like
    }, true); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-14T08:26:53.420

根据您的评论，您已经有了一个可行的解决方案……而且它目前是我所知道的唯一解决方案：$timeout。

问题是，你想达到什么目标？当所有渲染完成时，您需要一个回调。好的，很好，但是 Angular 怎么知道呢？在您显然正在使用 Angular 开发的现代应用程序中，重新渲染可能一直发生！从后端加载数据的地方可能会发生 js 事件，即使在初始化应用程序之后也是如此，这会导致重新渲染。用户的鼠标移动可以触发元素的重新渲染，由于 CSS 规则，这些元素甚至超出了角度范围。任何时候，都可能发生重新渲染。

那么，考虑到这些因素，angularJS 在渲染完成时可以告诉你什么？它只能告诉你，当当前的 $apply 和/或 $digest 链被处理时，浏览器事件队列现在是空的。这正是 angularJS 知道的唯一信息。为此，您使用延迟为 0 的 $timeout。

是的，你是对的，在更大的应用程序中，这可能会很棘手，以至于它不再可靠。但是在这种情况下，您应该考虑如何以另一种方式解决此问题。Fi 如果稍后发生重新渲染，则一定有原因，例如从后端加载的新数据。如果是这样，您知道何时加载数据并因此发生重新渲染，因此您确切知道何时必须更新宽度。

# jquery - Jquery ajax Rest 服务调用：错字错误访问被拒绝

> ID：15197539
> 
> 赞同：3
> 
> 时间：2013-03-04T08:39:10.170
> 
> 标签：jquery, .net, wcf, rest

我正在从 Jquery 调用 WCF Rest Service，如下所示。在我的 WCF 休息服务安全模式是传输。下面的代码返回“访问被拒绝”错误。

```
<script type ="text/javascript" language="javascript">
        function GetRestData() {
            var Guid = $('#txtUserGuid').val();
            var CountryCode = $('#txtCountryCode').val();
            var FromDate = $('#txtFromDate').val();
            var ToDate = $('#txtToDate').val();
            jQuery.support.cors = true;         

            $.ajax({
                url: "https://localhost/OrderList/OrderListService.svc/RestService/GetOrderList?request=" + Guid + ";" + CountryCode + ";" + FromDate + ";" + ToDate,
                type: "GET",
                cache:false,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function(msg) {
                    alert(JSON.stringify(msg));
                    $('#result').html('JSON Greetings: ' + JSON.stringify(msg));
                },
                error: function(jqXHR, textStatus, errorThrown) {
                alert(JSON.stringify(jqXHR) + ' ' + textStatus + '  ' + errorThrown);
                    $('#result').innerHTML = "Unavailable";
                }
            });           
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:02:45.253

你的本地主机有任何安全代码吗？如果是这样，那么您每次尝试访问都会遇到访问错误。尝试在代码中提供安全性，或删除安全代码。

# wcf - 从 jQueryMobile 跨域发布数据到远程 wcf 服务

> ID：15197547
> 
> 赞同：0
> 
> 时间：2013-03-04T08:40:07.987
> 
> 标签：wcf, jquery, jquery-mobile, jsonp

我正在使用 WCF 服务从我的 jQueryMobile 应用程序获取数据并将数据发布到数据库。请注意我的服务在另一台服务器上。我能够从远程服务获取数据。但是我在使用 POST 方法更新数据时遇到问题。以下是我的代码，请帮助我找到解决方案。

```
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-role="content">
            <input name="text-1" id="text1" value="" type="text">
            <input name="text-2" id="text2" value="" type="text">
            <a href="#" data-role="button" id="useJSONP">Update</a>
        </div>
        <script type="text/javascript" charset="utf-8">
            $(document).on('pagebeforeshow', '#index', function () {
                $("#useJSONP").click(function () {
                    var id = $("#text1").val();
                    var name = $("#text2").val();
                    var userData = { "EmployeeID": id, "FirstName": name };
                    $.ajax({
                        url: "http://Mysite:83/FromDBDataService.svc/PostEmployeeData?callback=?",
                        type: "POST",
                        data: userData,
                        crossDomain: true,
                        contentType: "application/json; charset=utf-8",
                        dataType: "jsonp",
                        processdata: true,
                        success: function res(msg) {
                            alert("hello" + msg);
                        },
                        error: function error(response) {
                            alert("error");
                        }
                    });
                });
            });
        </script>
    </div>
</body>
</html> 
```

WCF 服务：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Data.SqlClient;
using System.Web.Configuration;
using System.Data;
using System.Reflection;

namespace ServiceSite
{
    [ServiceContract]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class FromDBDataService 
    {
        [OperationContract]
        [WebInvoke(Method = "POST",
            BodyStyle = WebMessageBodyStyle.Wrapped,
            RequestFormat = WebMessageFormat.Json,
            ResponseFormat = WebMessageFormat.Json)]
        public void PostEmployeeData(int EmployeeID,string FirstName)
        {
            SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["NorthwindConnectionString"].ConnectionString);
            SqlCommand cmd = new SqlCommand("update Employees set FirstName=@FirstName where EmployeeID=@EmployeeID", con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            cmd.Parameters.Add(new SqlParameter("@EmployeeID", EmployeeID));
            cmd.Parameters.Add(new SqlParameter("@FirstName", FirstName));
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();
        }
   }
    public class EmployeeNew
    {
        public int EmployeeID { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }
} 
```

谢谢，巴维亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:27:53.527

您将无法发出跨域 POST 请求。[您可能会对一些技巧](http://ajaxian.com/archives/how-to-make-xmlhttprequest-calls-to-another-server-in-your-domain)感兴趣。这里有另一个[链接](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)

我还建议您了解有关[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的更多信息。

JSONP 请求是通过放置`<script></script>`POST 请求无法执行的脚本来执行的。

# javascript - Sencha Touch 和饼干

> ID：15197550
> 
> 赞同：0
> 
> 时间：2013-03-04T08:40:21.720
> 
> 标签：javascript, sencha-touch, jsonp

我有一个 Sencha Touch 2 应用程序。

目前，我使用 JsonP 将身份验证信息发送到服务器 API (POST)，服务器使用 Json 对象（作为 JsonP 传递）进行响应。服务器也发送一个 Cookie

重新加载应用程序时，不会保留 Cookie。

我需要在 Sencha Touch 应用程序中维护 cookie……知道怎么做吗？

谢谢西蒙妮

```
Ext.data.JsonP.request({
    url: AshtonConfigurations.logOn,
    callbackKey: 'callback',
    method: 'POST',
    //-----------------
    withCredentials: true,
    useDefaultXhrHeader: false,
    //-----------------
    params: {
        UserName: username,
        Password: password,
        RememberMe: 'true',
        DeviceTokenNotification: pushIdToken
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:35:57.700

由于 JsonP 使用 JS 嵌入标签从远程 URL 获取数据，所以它不支持 POST。出于同样的原因，HTTP 标头和 Cookie 将不起作用。

阅读此内容以获取更多信息：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.JsonP](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.JsonP)

如果要交换 cookie，则必须使用 Ajax 代理与启用了 CORS 的服务器通信。

仅供参考，桌面浏览器的安全策略与捆绑应用程序的 webview 不同，因此一旦您构建了应用程序，AJAX 就可以与远程服务器一起使用。如果你想那样做，你必须通过这个讨论如何进行开发的线程

[开发过程中如何使用json代理访问远程服务](https://stackoverflow.com/questions/14118053/how-to-use-json-proxy-to-access-remote-services-during-development)

有些人建议使用 GET 请求进行更新，但我不推荐。

# java - 带有字符串参数的@Bean 方法 - 异常

> ID：15197554
> 
> 赞同：1
> 
> 时间：2013-03-04T08:40:51.377
> 
> 标签：java, spring

这是一个带有@Bean 注解的注解驱动类。当我只有 placeholder() 没有任何 String 参数时 - 它可以工作，但我需要 placeholder(String property) 才能动态更改位置。

```
@Configuration
public class TestPlacehodler {

    @Value("${string}")
    public static String value;

    @Bean
    public static PropertySourcesPlaceholderConfigurer placeholder(String property) {
        PropertySourcesPlaceholderConfigurer placeholder = new PropertySourcesPlaceholderConfigurer();
        placeholder.setIgnoreUnresolvablePlaceholders(true);
        placeholder.setLocation(new ClassPathResource(property));

        return placeholder;
    }

    public static void main(String[] args) {
        AbstractApplicationContext ctx = new AnnotationConfigApplicationContext(TestPlacehodler.class);
        PropertySourcesPlaceholderConfigurer placeholder = placeholder("test.properties");
        placeholder.postProcessBeanFactory(ctx.getBeanFactory());
        System.out.println(value);

    } 
```

我有这样的例外：

```
Exception in thread "main" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'placeholder' defined in class TestPlacehodler: Unsatisfied dependency expressed through constructor argument with index 0 of type [java.lang.String]: : No qualifying bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:730)
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:461)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1029)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:925)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:657)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:461)
    at org.springframework.context.annotation.AnnotationConfigApplicationContext.<init>(AnnotationConfigApplicationContext.java:73)
    at TestPlacehodler.main(TestPlacehodler.java:26)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:36:16.977

您的定义 说 spring为该方法`public static PropertySourcesPlaceholderConfigurer placeholder(String property)` 提供了一些类型的 bean 。`String`您需要删除`String property`参数并从其他位置获取它的值。

此外，调用 是不正确的 `PropertySourcesPlaceholderConfigurer placeholder = placeholder("test.properties");`。方法将由 Spring 容器以自动方式执行（但目前不可能，因为 Spring 不知道从哪里获取参数`property`）。

# jsp - EL（${} 标签）在 Glassfish 中不起作用

> ID：15197557
> 
> 赞同：2
> 
> 时间：2013-03-04T08:41:02.910
> 
> 标签：jsp, glassfish, jstl, el

我正在努力在本地 glassfish 服务器上运行 webapp。此服务器位于“离线”内部网中。我让网站在 glassfish 3.1 和 2.1 上运行，尝试了不同的版本。该网络应用程序很旧，原始的像 7 岁。到目前为止，我唯一无法工作的是`${} EL`-tags。它将它们打印为`${}`，因此根本无法识别 EL。

我尝试了几件事，这里的每个解决方案都指向它：

```
<web-app 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5"> 
```

这不起作用，因为它无法获取 url（离线 Intranet）。我不知道如何使它离线工作。这可能是一个解决方案？

我还试图找出在 Glassfish 上运行的 JSP/JSTL(/EL) 版本，我也找不到。

提前致谢。

附言。如果您需要更多信息，我很乐意提供更多信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:44:39.453

```
<web-app 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5"> 
```

这是正确的答案，即使对于离线应用程序也是如此。

# java - 如何获取查询参数作为 HashMap

> ID：15197559
> 
> 赞同：6
> 
> 时间：2013-03-04T08:41:09.317
> 
> 标签：java, jax-rs, apache-wink

我希望能够将 GET 请求传递给我的服务器，例如：

```
 http://example.com/?a[foo]=1&a[bar]=15&b=3 
```

当我得到查询参数'a'时，它应该被解析为HashMap，如下所示：

```
{'foo':1, 'bar':15} 
```

编辑：好的，要清楚，这是我想要做的，但在 Java 中，而不是 PHP：

[通过 HTTP GET 传递带有键的数组](https://stackoverflow.com/questions/12639015/pass-array-with-keys-via-http-get)

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:29:51.333

您可以通过将 JSON 对象附加到 URL 来将其作为字符串传递。但在此之前，您需要对其进行编码，您可以使用此链接 [http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_encodingUtil.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_encodingUtil.htm)中给出的方法 进行编码，然后将 json 对象附加为任何其他字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:23:58.770

没有标准的方法可以做到这一点。

眨眼支持`javax.ws.rs.core.MultivaluedMap`。因此，如果您发送类似`http://example.com/?a=1&a=15&b=3`您将收到的内容：键值`a`1、15；关键`b`价值 3。

如果您需要解析类似的内容，`?a[1]=1&a[gv]=15&b=3`您需要获取`javax.ws.rs.core.MultivaluedMap.entrySet()`并执行额外的密钥解析。

这是您可以使用的代码示例（未对其进行测试，因此可能包含一些小错误）：

```
String getArrayParameter(String key, String index,  MultivaluedMap<String, String> queryParameters) {
    for (Entry<String, List<String>> entry : queryParameters.entrySet()) {
        String qKey = entry.getKey();
        int a = qKey.indexOf('[');
        if (a < 0) {
            // not an array parameter
            continue;
        }
        int b = qKey.indexOf(']');
        if (b <= a) {
            // not an array parameter
            continue;
        }
        if (qKey.substring(0, a).equals(key)) {
            if (qKey.substring(a + 1, b).equals(index)) {
                return entry.getValue().get(0);
            }
        }
    }
    return null;
} 
```

在您的资源中，您应该这样称呼它：

```
@GET
public void getResource(@Context UriInfo uriInfo) {
    MultivaluedMap<String, String> queryParameters = uriInfo.getQueryParameters();
    getArrayParameter("a", "foo", queryParameters);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:53:44.883

或者，如果您使用的是 HttpServletRequest，那么您可以使用 getParameterMap() 方法，该方法为您提供所有参数及其值作为映射。

例如

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
              throws IOException {

   System.out.println("Parameters : \n"+request.getParameterMap()+"\n End");

} 
```

# java - 如何使用“描述”找出Java Enum的“名称”

> ID：15197560
> 
> 赞同：2
> 
> 时间：2013-03-04T08:41:11.390
> 
> 标签：java, enums

```
public enum Test {
    a("This is a"),
    b("This is b"),
    c("This is c"),
    d("This is d");

    private final String type;

    Test(String type) {
        this.type = type;
    }

    public String getType() {
         return type;
    }
} 
```

以上是我的简单代码。有人可以教我如何通过使用 desc 来获取名称吗？
例如：我有一个字符串“This is c”，我想用这个字符串来获取Test.c

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T08:44:13.580

使用枚举的`values`方法，迭代它，你就可以得到它。

```
public enum Test {
    a("This is a"),
    b("This is b"),
    c("This is c"),
    d("This is d");

    private final String type;

    Test(String type) {
        this.type = type;
    }

    public String getType() {
         return type;
    }

    public static Test getByDesc(String desc){
      for(Test t : Test.values()){
        if(t.getType().equals(desc)){
          return t;
        }
      }
      return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T08:44:51.293

假设您想经常这样做，您需要构建一个从 type （代码中没有任何称为“description”的东西）到`Test`. 例如：

```
// Within Test
private static final Map<String, Test> typeMap = createTypeMap();

private static Map<String, Test> createTypeMap() {
    Map<String, Test> ret = new HashMap<String, Test>();
    for (Test test : Test.values()) {
        ret.put(test.type, test);
    }
    return ret;
}

public static Test fromType(String type) {
    return typeMap.get(type);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:48:06.133

该方法将根据枚举值返回枚举类型

```
public static Test getEnum(String enumValue) {

        for (Test c : Test.values()) {

            if (c.getValue().equalsIgnoreCase(enumValue))

                return c;

        }

        return null;

    } 
```

# ios - iOS推送通知重复#徽章值

> ID：15197561
> 
> 赞同：1
> 
> 时间：2013-03-04T08:41:13.840
> 
> 标签：ios, objective-c, cocoa-touch, push-notification

我真的不知道为什么/从哪里开始调试这个问题。我的一位用户遇到了一个问题，即收到的推送通知的徽章值数量重复。例如，如果他收到一个推送通知和 1 的徽章，它将在应用程序图标上显示 11。2 -> 22, 3 -> 33。

我已经确认这不是服务器端问题（传入的 JSON 具有正确的徽章 #），并且他是唯一遇到此问题的用户。

我想知道这是否是记录在案的问题/边缘案例，如果不是，我该如何开始调试它（鉴于我无法在多个设备上重现它）？

# pdf - PHPExcel 1.7.8 mPDF 中的页边距

> ID：15197563
> 
> 赞同：1
> 
> 时间：2013-03-04T08:41:25.127
> 
> 标签：pdf, phpexcel, margins, mpdf

我正在尝试使用 mPDF 作为渲染器在 PHPExcel 1.7.8 中设置页边距，但我无处可去。我在某处发现了一个线程，Mark Ba​​ker 提到在 1.7.8 版中写过支持 pdf 的页边距，但就如何实际实现它们而言，我一无所知。

据我所知，它与为 Excel 文档设置边距是分开的，因为如果我将输出设置为 xls，则以下内容可以正常工作：

```
$pageMargins = $sheet->getPageMargins();
$pageMargins->setTop('.25');
$pageMargins->setBottom('.25');
$pageMargins->setLeft('.2');
$pageMargins->setRight('.2'); 
```

当我切换回 pdf 输出时，每边的边距似乎接近一英寸。我变得非常沮丧，因为 PHPExcel 中对 pdf 边距的少数引用指的是只有 tcPDF 的旧版本，而当我使用 1.7.6 时，我根本无法工作。

我以为我一开始就可以进行 pdf 渲染，我就快完成了。我刚刚花了 8 个小时来检查代码以输出可以直接发送到 mPDF 的 html 页面，但是 PHPExcel 对于需要非常特定格式的页面来说更容易使用，我宁愿这样做如果可能的话，在 PHPExcel 中。

有没有人使用 mPDF 在 PHPExcel 中处理边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:56:42.390

早在 2012 年 11 月，有人就在 Codeplex 上发布了一个解决方法，而我刚刚添加了单位的修复（PHPExcel 的边距以英寸为单位，mPDF 以毫米为单位）。在这里找到它：[https ://phpexcel.codeplex.com/discussions/398021](https://phpexcel.codeplex.com/discussions/398021)

# multicast - 有什么小程序可以在指定的UDP端口接收多播数据包吗？

> ID：15197569
> 
> 赞同：5
> 
> 时间：2013-03-04T08:42:03.597
> 
> 标签：multicast

我想调试一些多播问题，我希望有一些小程序/实用程序来显示传入的多播数据包。

从发送机器（A），我使用 Richard Stevens 的`sock`程序（随他的 TCP/IP 插图书籍 Vol1 提供）发送多播数据包（源端口=目标端口=7000），如下所示：

```
sock -u -b 7000 224.0.0.7 7000 
```

在接收机器（B）上，我可以使用 Wireshark 捕获发送的数据包，但是，`sock`在 B 上运行的相同命令没有报告接收到任何内容。

然后，我应该在 B 上使用什么程序来查看传入的多播数据包，除了 Wireshark 是矫枉过正的。

Linux 和 Windows 程序都受到欢迎。

![在此处输入图像描述](../Images/5344a0fc2cd5236a591525ad1f8e934b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T12:16:40.380

这是一个将打印传入数据的python脚本；

```
# Multicast client
# Adapted from: http://chaos.weblogs.us/archives/164

import socket

ANY = "0.0.0.0" 
MCAST_ADDR = "224.0.0.7"
MCAST_PORT = 7000

# Create a UDP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)

# Allow multiple sockets to use the same PORT number
sock.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)

# Bind to the port that we know will receive multicast data
sock.bind((ANY,MCAST_PORT))

# Tell the kernel that we want to add ourselves to a multicast group
# The address for the multicast group is the third param
status = sock.setsockopt(socket.IPPROTO_IP,
socket.IP_ADD_MEMBERSHIP,
socket.inet_aton(MCAST_ADDR) + socket.inet_aton(ANY))

# setblocking(0) is equiv to settimeout(0.0) which means we poll the socket.
# But this will raise an error if recv() or send() can't immediately find or send data. 
sock.setblocking(0)

while 1:
    try:
        data, addr = sock.recvfrom(1024)
    except socket.error as e:
        pass
    else:
        print "From: ", addr
        print "Data: ", data 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-27T15:17:43.317

您可以使用 netcat (nc) 来做到这一点：

```
netcat -vv -l -p 1234 -u 
```

这意味着 netcat 正在以 UDP 模式详细侦听 localhost 的端口 1234。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T11:41:02.643

我以前写过一个多播测试应用程序。

你可以在这里查看：[https ://github.com/eranbetzalel/SimpleMulticastAnalyzer](https://github.com/eranbetzalel/SimpleMulticastAnalyzer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-14T07:23:15.397

在 Windows 上，我发现这些实用程序对于调试 udp 非常方便（在两端）

[http://www-personal.umich.edu/~bdr/et/mcast-windows.html#download](http://www-personal.umich.edu/~bdr/et/mcast-windows.html#download)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-05T01:28:33.647

这是我在使用 netcat 搜索捕获多播数据包时的第一次命中，我发现 tcpdump 做得更好。只是为其他点击这篇文章的人做个笔记。

安装：

```
sudo apt install tcpdump 
```

跑步：

```
tcpdump -c 8 -n -i eth0 portrange 1234-1239 
```

看起来可能也有 Windows 端口，但我没有尝试：[https ://www.winpcap.org/windump/](https://www.winpcap.org/windump/)

# java - 需要为条形图编辑摆动 GUI 代码

> ID：15197572
> 
> 赞同：1
> 
> 时间：2013-03-04T08:42:21.450
> 
> 标签：java, swing

我想用 java 和 Swing 制作一个条形图。我查看了以下链接中的代码 - [http://www.java2s.com/Code/Java/2D-Graphics-GUI/Simplebarchart.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Simplebarchart.htm)

我想增加此图表中条形之间的空间。我该怎么做？

编码 -

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class ChartPanel extends JPanel {
private double[] values;

private String[] names;

private String title;

public ChartPanel(double[] v, String[] n, String t) {
names = n;
values = v;
title = t;
}

public void paintComponent(Graphics g) {
super.paintComponent(g);
if (values == null || values.length == 0)
  return;
double minValue = 0;
double maxValue = 0;
for (int i = 0; i < values.length; i++) {
  if (minValue > values[i])
    minValue = values[i];
  if (maxValue < values[i])
    maxValue = values[i];
}

Dimension d = getSize();
int clientWidth = d.width;
int clientHeight = d.height;
int barWidth = clientWidth / values.length;

Font titleFont = new Font("SansSerif", Font.BOLD, 20);
FontMetrics titleFontMetrics = g.getFontMetrics(titleFont);
Font labelFont = new Font("SansSerif", Font.PLAIN, 10);
FontMetrics labelFontMetrics = g.getFontMetrics(labelFont);

int titleWidth = titleFontMetrics.stringWidth(title);
int y = titleFontMetrics.getAscent();
int x = (clientWidth - titleWidth) / 2;
g.setFont(titleFont);
g.drawString(title, x, y);

int top = titleFontMetrics.getHeight();
int bottom = labelFontMetrics.getHeight();
if (maxValue == minValue)
  return;
double scale = (clientHeight - top - bottom) / (maxValue - minValue);
y = clientHeight - labelFontMetrics.getDescent();
g.setFont(labelFont);

for (int i = 0; i < values.length; i++) {
  int valueX = i * barWidth + 1;
  int valueY = top;
  int height = (int) (values[i] * scale);
  if (values[i] >= 0)
    valueY += (int) ((maxValue - values[i]) * scale);
  else {
    valueY += (int) (maxValue * scale);
    height = -height;
  }

  g.setColor(Color.red);
  g.fillRect(valueX, valueY, barWidth - 2, height);
  g.setColor(Color.black);
  g.drawRect(valueX, valueY, barWidth - 2, height);
  int labelWidth = labelFontMetrics.stringWidth(names[i]);
  x = i * barWidth + (barWidth - labelWidth) / 2;
  g.drawString(names[i], x, y);
}
}

public static void main(String[] argv) {
JFrame f = new JFrame();
f.setSize(400, 300);
double[] values = new double[3];
String[] names = new String[3];
values[0] = 1;
names[0] = "Item 1";

values[1] = 2;
names[1] = "Item 2";

values[2] = 4;
names[2] = "Item 3";

f.getContentPane().add(new ChartPanel(values, names, "title"));

WindowListener wndCloser = new WindowAdapter() {
  public void windowClosing(WindowEvent e) {
    System.exit(0);
  }
};
f.addWindowListener(wndCloser);
f.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:47:04.597

这是您为条形设置 X 坐标的代码行：

```
int valueX = i * barWidth + 1; 
```

要进一步移动每个条，您可以将其更改为：

```
int valueX = i * (barWidth+20) + 1; 
```

您可以为此声明一个单独的类级别变量：

```
int barSpace = 20;

...//later in paintComponent.
int valueX = i * (barWidth+space) + 1; 
```

**更新：**这是一行代码，计算`barWidth`：

```
int barWidth = clientWidth / values.length; 
```

为了使您的图表适合客户区域，您可以使用以下代码：

```
barWidth-= barSpace; //or barWidth-=20; 
```

这样，您将从每个条形图上腾出一些空间

# xcode - iPhone 配件，配件协议为空

> ID：15197577
> 
> 赞同：1
> 
> 时间：2013-03-04T08:42:55.587
> 
> 标签：xcode, external-accessory

我正在开发一个具有外部附件的应用程序，手机显示它已通过身份验证，并且设备显示在 General->About 菜单中，但是当我 NSlog 附件协议时，它显示为 Null，我没有如果附件实际经过身份验证，则认为这应该是可能的。

我可以在我的应用程序中做些什么来强制配件重新进行身份验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-30T19:41:00.067

问题是，由于某种原因，当设备第一次配对时，一些信息出现了乱码，我们最终在蓝牙芯片组在配件端配对后延迟了 2 秒，然后开始我们的身份验证。出于某种原因，蓝牙芯片组仍在进行一些自己的处理，还没有准备好开始流式传输数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:57:39.097

你能更好地解释一下吗？

无论如何，您是否记得将协议字符串放在 [YourApp]-info.plist 文件中？不？添加这一行：

```
UISupportedExternalAccessoryProtocols 
```

将一个字符串项添加到该新行并放入标识您的协议的字符串中。

# java - 从 quantal repo 为 ubuntu 10.04 打开 jdk 7

> ID：15197578
> 
> 赞同：1
> 
> 时间：2013-03-04T08:42:58.427
> 
> 标签：java, ubuntu, ubuntu-10.04

我已经使用 ubuntu 12.10 的 repo 在 ubuntu 10.04 上成功安装了 openjdk 7 和 tomcat7，一切似乎都运行良好，但我意识到这不是我应该为旧版本的操作系统获取软件的方式）所以，问题是，是否有人尝试过执行相同的操作（我很确定有人尝试过）以及生产中的影响是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:09:52.970

我不会采用这种方法，因为您手动安装软件包，这并不比单独下载 Oracle 的 JDK 和 Tomcat 并安装它们好`/opt`

我能想到两个更好的选择：

1.  安装 openjdk6 和 tomcat6，它们已经在 10.04 上可用。您很可能不需要两者的最新版本。检查您要部署的任何 Web 应用程序是否确实**需要**Java 7 和 Tomcat 7。

2.  从 PPA 安装 OpenJDK7 和 Tomcat7。我发现[OpenJDK 有一个 PPA，它为 Lucid 打包了 openjdk7](https://launchpad.net/~openjdk/+archive/ppa?field.series_filter=lucid)，所以你很可能会为 Tomcat 找到另一个。这样做的好处是您将获得更新和安全补丁。

另外，考虑升级到 Ubuntu 12.04，它包含上述所有内容，但已经集成。我自己没有升级 Ubuntu 服务器，但我读过它是安全且简单的。

# swagger - 如何使用 swagger 模型部分？

> ID：15197579
> 
> 赞同：19
> 
> 时间：2013-03-04T08:43:00.673
> 
> 标签：swagger, api-doc

在 Swagger API 文档中，在 apis 数组旁边的 json 中有一个模型对象条目，但没有关于它的文档。我怎样才能使用这个“模型”部分？

```
{
   apiVersion: "0.2",
   swaggerVersion: "1.1",
   basePath: "http://petstore.swagger.wordnik.com/api",
   resourcePath: "/pet.{format}"

   ...

   apis: [...]
   models: {...}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T10:03:34.970

模型只不过是 Java 中的 POJO 类，它们具有变量和属性。在模型部分，您可以定义自己的自定义类，并且可以将其称为数据类型。

如果你看到下面

```
 {
        "path": "/pet.{format}",
        "description": "Operations about pets",
        "operations": [
            {
                "httpMethod": "POST",
                "summary": "Add a new pet to the store",
                "responseClass": "void",
                "nickname": "addPet",
                "parameters": [
                    {
                        "description": "Pet object that needs to be added to the store",
                        "paramType": "body",
                        "required": true,
                        "allowMultiple": false,
                        "dataType": "Pet"
                    }
                ],
                "errorResponses": [
                    {
                        "code": 405,
                        "reason": "Invalid input"
                    }
                ]
            } 
```

在参数部分中，它有一个参数，其**数据**类型为**宠物**，宠物在模型中定义如下

```
{
"models": {
    "Pet": {
        "id": "Pet",
        "properties": {
            "id": {
                "type": "long"
            },
            "status": {
                "allowableValues": {
                    "valueType": "LIST",
                    "values": [
                        "available",
                        "pending",
                        "sold"
                    ]
                },
                "description": "pet status in the store",
                "type": "string"
            },
            "name": {
                "type": "string"
            },
            "photoUrls": {
                "items": {
                    "type": "string"
                },
                "type": "Array"
            }
        }
    }
}} 
```

您可以拥有嵌套模型，有关更多信息，请参阅[Swagger PetStore 示例](http://petstore.swagger.wordnik.com/)

所以模型只不过是类。

# jquery - 如何使用 POST 而不是 GET 在 jQuery 中重定向

> ID：15197582
> 
> 赞同：0
> 
> 时间：2013-03-04T08:43:09.940
> 
> 标签：jquery

在我的 jQuery 函数中，我使用 window.location.href 像这样重定向：

```
window.location.href = "${pageContext.request.contextPath}/redirectUser.ajax?login="+response.result.name; 
```

它工作正常，但我在浏览器中看到这个字符串是这样的：

```
http://localhost:8080/task7/redirectUser.ajax?login=user 
```

我的控制器也使用 GET

```
@RequestMapping (value="/redirectUser.ajax",method = RequestMethod.GET)
    public String forwardUserToUsersPage(ModelMap model, HttpServletRequest req){
        User foundedUser = userDao.findByLogin(req.getParameter("login"));
        req.getSession().setAttribute("user", foundedUser);
        return "userPage";//to WEB-INF/jsp/userPage.jsp
    } 
```

如何重写这部分应用程序以便用户 POST 方法重定向并在控制器中处理？

这是从 servler 接收回复的函数（实际上是函数的一部分）

```
function doAjaxPost() {
    // get the form values
    var queryString = $('#loginform').formSerialize();

    $.ajax({
    type: "POST",
    url: "${pageContext. request. contextPath}/loginUser.ajax",
    data: queryString, 
        //"name=" + name + "&pswd=" + pswd,

    success: function(response){    
        // we have the response
        var delay = 1500;
        if (response.status == "OK_USER") {
            $('#error').html('');
            $('#info').html("Login exists, password is correct everything will be fine.<br> Redirect to User's page"); 

            //var delay = 3000;
            setTimeout(function() {
            window.location.href = "${pageContext.request.contextPath}/redirectUser.ajax?login="+response.result.name;
            }, delay);

        } 
.... 
```

那么如何使用 jQuery 或其他使用 POST 方法进行重定向呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:47:37.297

我看到的最快方式：

创建一个`<form>`节点，将其设置`action`为正确的 URL 和`method="post"`，用所需的参数（在`<input>`字段中）填充它，然后调用`.submit()`.

例如：

```
...
setTimeout(function(){
    var $form = $('<form>').attr({
        action: "${pageContext.request.contextPath}/redirectUser.ajax",
        method: "post"
    });

    $form.append('<input name="login" value="'+response.result.name'" />');
    $form.submit();
}, delay);
... 
```

# objective-c - 主应用程序和可加载包之间的通信

> ID：15197586
> 
> 赞同：2
> 
> 时间：2013-03-04T08:43:35.787
> 
> 标签：objective-c, macos, cocoa, nsbundle

好的，这是不言自明的。

假设我们有我们的可可应用程序。让我们都假设您已经有了一些“插件”，它们被打包为独立的可加载包。

这是当前加载包的方式（假设插件的“主类”实际上是一个`NSWindowController`子类：

```
// Load the bundle
NSString* bundlePath = [[NSBundle mainBundle] pathForResource:@"BundlePlugin" 
                                                       ofType:@"bundle"]
NSBundle* b = [NSBundle bundleWithPath:bundlePath];
NSError* err = nil;
[b loadAndReturnError:&err];
if (!err)
{
     // if everything goes fine, initialise the main controller
     Class mainWindowControllerClass = [b principalClass];
     id mainWindowController = [[mainWindowControllerClass alloc] initWithWindowNibName:@"PluginWindow"];
} 
```

**现在，这是问题所在：**

*   如何将我的一些主要应用程序的对象“发布”到插件？
*   如何让我的插件“了解”我的主应用程序的类？
*   是否有可能在它们之间实际建立某种通信，以便插件可以与我的主应用程序交互？如果是这样，怎么办？

* * *

**旁注：**

*   *使用协议*能否消除“未知选择器”错误和大量使用`performSelector:withObject:`?
*   `mainWindowController`显然，只要将它们定义为属性，我就可以设置和获取新创建的值。但这是对可可最友好的方式吗？

# c# - 未捕获 System.Data.SQLite 的 FileNotFoundExceptions

> ID：15197587
> 
> 赞同：4
> 
> 时间：2013-03-04T08:43:44.453
> 
> 标签：c#, sqlite

我在我的项目中使用 System.Data.SQLite。当输出文件夹中没有 System.Data.SQLite dll 时，我无法捕获 FileNotFoundException（其他异常捕获良好）。这是代码示例：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            SQLiteConnection conn = new SQLiteConnection();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

消息框未显示。如果我在单独的函数中提取此代码并将此函数调用包装在 try catch 中，则捕获异常工作正常并且 MessageBox 显示：

```
 private void DeclareConnection()
    {
        SQLiteConnection conn = new SQLiteConnection();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            DeclareConnection();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:48:35.703

您将不得不处理[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件，

订阅 AssemblyResolve 事件

```
AppDomain.CurrentDomain.AssemblyResolve += HandleAssemblyResolve; 
```

这是一些示例代码，用于处理在 c# 中加载 x86 / x64 SQLite 程序集

```
 public static Assembly HandleAssemblyResolve(object sender, ResolveEventArgs args)
    {
        if (args.Name.Contains("System.Data.SQLite"))
        {
            if (_assembliesResolved)
                return null;

            Assembly returnValue;

            string executingAssemblyPath = Assembly.GetExecutingAssembly().Location;
            executingAssemblyPath = Path.GetDirectoryName(executingAssemblyPath);

            if (Environment.Is64BitProcess)
                executingAssemblyPath = Path.Combine(executingAssemblyPath, @"lib-sqlite\x64\", "System.Data.SQLite.dll");
            else //32 bit process
                executingAssemblyPath = Path.Combine(executingAssemblyPath, @"lib-sqlite\x86\", "System.Data.SQLite.dll");

            returnValue = Assembly.LoadFrom(executingAssemblyPath);

            _assembliesResolved = true;

            return returnValue;
        }

        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:46:17.623

您无法捕获因未找到引用程序集而产生的异常。

只有当您使用反射手动加载程序集时，您才能捕获异常。

要检查 sqlite 程序集是否存在，请执行`File.Exists()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:49:56.650

在第一种情况下，您无法捕获异常，因为 jit 在遇到方法时立即抛出异常。在第二种情况下，它会 jit 您的方法，并且在尝试 jit`DeclareConnection`方法时抛出异常。

# java - 在 Tapestry 5 Web 应用程序中编辑复杂的 Java 对象

> ID：15197597
> 
> 赞同：4
> 
> 时间：2013-03-04T08:44:25.443
> 
> 标签：java, web-applications, tapestry, rdfstore

我正在将 Tapestry 5.3.6 用于 Web 应用程序，我希望用户使用 Web 表单（立即建议使用`beaneditform`）编辑 Java 类（“bean”或 POJO）的实例 - 但是 Java 类要编辑的结构相当复杂。我正在 Tapestry 5 中寻找最简单的方法。

首先，让我们定义一些实用程序类，例如

```
public class ModelObject {
  private URI uri;
  private boolean modified;
  // the usual constructors, getters and setters ...
}

public class Literal<T> extends ModelObject {
  private Class<?> valueClass;
  private T value;
  public Literal(Class<?> valueClass) {
    this.valueClass = valueClass;
  }
  public Literal(Class<?> valueClass, T value) {
    this.valueClass = valueClass;
    this.value = value;
  }
  // the usual getters and setters ...
}

public class Link<T extends ModelObject> extends ModelObject {
  private Class<?> targetClass;
  private T target;
  public Link(Class<?> targetClass) {
    this.targetClass = targetClass;
  }
  public Link(Class<?> targetClass, T target) {
    this.targetClass = targetClass;
    this.target = target;
  }
  // the usual getters and setters ...
} 
```

现在您可以创建一些相当复杂的数据结构，例如：

```
public class HumanBeing extends ModelObject {
  private Literal<String> name;
  // ... other stuff
  public HumanBeing() {
    name = new Literal<String>(String.class);
  }
  // the usual getters and setters ...
}

public class Project extends ModelObject {
  private Literal<String> projectName;
  private Literal<Date> startDate;
  private Literal<Date> endDate;
  private Literal<Integer> someCounter;
  private Link<HumanBeing> projectLeader;
  private Link<HumanBeing> projectManager;
  // ... other stuff, including lists of things, that may be Literals or
  // Links ... e.g. (ModelObjectList is an enhanced ArrayList that remembers
  // the type(s) of the objects it contains - to get around type erasure ...
  private ModelObjectList<Link<HumanBeing>> projectMembers;
  private ModelObjectList<Link<Project>> relatedProjects;
  private ModelObjectList<Literal<String>> projectAliases;
  // the usual constructors, getters and setters for all of the above ...
  public Project() {
    projectName = new Literal<String>(String.class);
    startDate = new Literal<Date>(Date.class);
    endDate = new Literal<Date>(Date.class);
    someCounter = new Literal<Integer>(Integer.class);
    projectLeader = new Link<HumanBeing>(HumanBeing.class);
    projectManager = new Link<HumanBeing>(HumanBeing.class);
    projectMembers = new ModelObjectList<Link<HumanBeing>>(Link.class, HumanBeing.class);
    // ... more ...
  }
} 
```

如果您指向`beaneditform`Project.class 的一个实例，在您必须提供大量自定义强制器、翻译器、值编码器等之前，您不会走得太远 - 然后您仍然会遇到无法使用泛型的问题“贡献”表示胁迫者、翻译者、价值编码者等。

然后我开始编写自己的组件来解决这些问题（例如`ModelObjectDisplay`和`ModelObjectEdit`），但这需要我了解更多 Tapestry 的精髓，而不是我有时间学习......感觉我可能能够做些什么我想使用标准组件和自由使用“委托”等。谁能看到我可以采取的简单路径？

感谢您阅读本文。

PS：如果您想知道我为什么要这样做，那是因为模型表示来自 RDF 图数据库（又名三重存储）的链接数据 - 我需要记住每一位数据的 URI 以及它是如何关联的（链接）到其他数据位（也欢迎您提出更好的方法:-)

编辑：

@uklance 建议使用显示和编辑块 - 这是我已经尝试过的：

首先，我在 AppPropertyDisplayBlocks.tml 中有以下内容......

```
 <t:block id="literal">
        <t:delegate to="literalType" t:value="literalValue" />
    </t:block>

    <t:block id="link">
        <t:delegate to="linkType" t:value="linkValue" />
    </t:block> 
```

并在 AppPropertyDisplayBlocks.java ...

```
 public Block getLiteralType() {
        Literal<?> literal = (Literal<?>) context.getPropertyValue();

        Class<?> valueClass = literal.getValueClass();
        if (!AppModule.modelTypes.containsKey(valueClass))
            return null;

        String blockId = AppModule.modelTypes.get(valueClass);
        return resources.getBlock(blockId);
    }

    public Object getLiteralValue() {
        Literal<?> literal = (Literal<?>) context.getPropertyValue();
        return literal.getValue();
    }

    public Block getLinkType() {
        Link<?> link = (Link<?>) context.getPropertyValue();

        Class<?> targetClass = link.getTargetClass();
        if (!AppModule.modelTypes.containsKey(targetClass))
            return null;

        String blockId = AppModule.modelTypes.get(targetClass);
        return resources.getBlock(blockId);
    }

    public Object getLinkValue() {
        Link<?> link = (Link<?>) context.getPropertyValue();
        return link.getTarget();
    } 
```

AppModule.modelTypes 是从 java 类到 Tapestry 使用的字符串的映射，例如 Link.class -> "link" 和 Literal.class -> "literal" ...在 AppModule 中我有以下代码...

```
 public static void contributeDefaultDataTypeAnalyzer(
            MappedConfiguration<Class<?>, String> configuration) {
        for (Class<?> type : modelTypes.keySet()) {
            String name = modelTypes.get(type);
            configuration.add(type, name);
        }
    }

    public static void contributeBeanBlockSource(
            Configuration<BeanBlockContribution> configuration) {

        // using HashSet removes duplicates ...
        for (String name : new HashSet<String>(modelTypes.values())) {
            configuration.add(new DisplayBlockContribution(name,
                    "blocks/AppPropertyDisplayBlocks", name));
            configuration.add(new EditBlockContribution(name,
                    "blocks/AppPropertyEditBlocks", name));
        }
    } 
```

我对编辑块有类似的代码......但是这些似乎都不起作用 - 我认为是因为原始对象被传递给“委托”而不是被取消引用的对象，该对象是存储在文字中的值或链接指向的对象（嗯...应该是上面的 [Ll]inkTarget，而不是 [Ll]inkValue）。我还经常遇到 Tapestry 找不到合适的“翻译器”、“值编码器”或“强制器”的错误……我有一些时间压力，所以很难通过这些曲折的段落来摆脱困境迷宫 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:16:21.530

我建议通过 BeanEditForm 围绕您想要编辑的对象构建一个薄包装器并将它们传递给它。所以像：

```
public class TapestryProject {

   private Project project;

   public TapestryProject(Project proj){
      this.project = proj;
   }

   public String getName(){
      this.project.getProjectName().getValue();
   }

   public void setName(String name){
      this.project.getProjectName().setValue(name);
   }

   etc...
} 
```

这样，tapestry 将处理它所知道的所有类型，让您不必创建自己的强制转换（顺便说一下，这本身很简单）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:37:03.773

您可以贡献块来显示和编辑您的数据类型`"link"`和`"literal"`数据类型。

和由服务支持`beaneditform`。负责为各种数据类型提供显示和编辑块。`beaneditor``beandisplay``BeanBlockSource``BeanBlockSource`

如果您下载 Tapestry 源代码并查看以下文件：

*   Tapestry-core\src\main\java\org\apache\tapestry5\corelib\pages\PropertyEditBlocks.java
*   Tapestry-core\src\main\resources\org\apache\tapestry5\corelib\pages\PropertyEditBlocks.tml
*   Tapestry-core\src\main\java\org\apache\tapestry5\services\TapestryModule.java

您将看到 Tapestry 如何做出贡献`EditBlockContribution`并`DisplayBlockContribution`提供默认块（例如，对于`"date"`数据类型）。

如果您对 做出贡献`BeanBlockSource`，您可以为您的自定义数据类型提供显示和编辑块。这将要求您在页面中按 id 引用块。该页面可以通过使用注释对您的用户隐藏`@WhitelistAccessOnly`。

*   [http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/services/BeanBlockSource.html](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/services/BeanBlockSource.html)
*   [http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/services/DisplayBlockContribution.html](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/services/DisplayBlockContribution.html)
*   [http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/services/EditBlockContribution.html](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/services/EditBlockContribution.html)
*   [http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/annotations/WhitelistAccessOnly.html](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/annotations/WhitelistAccessOnly.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:54:12.547

这是一个使用接口和代理从模型中隐藏实现细节的示例。请注意代理如何负责更新修改后的标志，并能够将 URI 从 Literal 数组映射到 HumanBeing 接口中的属性。

```
package com.github.uklance.triplestore;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

import org.junit.Test;

public class TripleStoreOrmTest {
    public static class Literal<T> {
        public String uri;
        public boolean modified;
        public Class<T> type;
        public T value;

        public Literal(String uri, Class<T> type, T value) {
            super();
            this.uri = uri;
            this.type = type;
            this.value = value;
        }

        @Override
        public String toString() {
            return "Literal [uri=" + uri + ", type=" + type + ", value=" + value + ", modified=" + modified + "]";
        }
    }

    public interface HumanBeing {
        public String getName();
        public void setName(String name);

        public int getAge();
        public void setAge();
    }

    public interface TripleStoreProxy {
        public Map<String, Literal<?>> getLiteralMap();
    }

    @Test
    public void testMockTripleStore() {
        Literal<?>[] literals = {
            new Literal<String>("http://humanBeing/1/Name", String.class, "Henry"),
            new Literal<Integer>("http://humanBeing/1/Age", Integer.class, 21)
        };

        System.out.println("Before " + Arrays.asList(literals));

        HumanBeing humanBeingProxy = createProxy(literals, HumanBeing.class);

        System.out.println("Before Name: " + humanBeingProxy.getName());
        System.out.println("Before Age: " + humanBeingProxy.getAge());

        humanBeingProxy.setName("Adam");

        System.out.println("After Name: " + humanBeingProxy.getName());
        System.out.println("After Age: " + humanBeingProxy.getAge());

        Map<String, Literal<?>> literalMap = ((TripleStoreProxy) humanBeingProxy).getLiteralMap();
        System.out.println("After " + literalMap);
    }

    protected <T> T createProxy(Literal<?>[] literals, Class<T> type) {
        Class<?>[] proxyInterfaces = { type, TripleStoreProxy.class };

        final Map<String, Literal> literalMap = new HashMap<String, Literal>();
        for (Literal<?> literal : literals) {
            String name = literal.uri.substring(literal.uri.lastIndexOf("/") + 1);
            literalMap.put(name,  literal);
        }

        InvocationHandler handler = new InvocationHandler() {
            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                if (method.getDeclaringClass().equals(TripleStoreProxy.class)) {
                    return literalMap;
                }
                if (method.getName().startsWith("get")) {
                    String name = method.getName().substring(3);
                    return literalMap.get(name).value;
                } else if (method.getName().startsWith("set")) {
                    String name = method.getName().substring(3);
                    Literal<Object> literal = literalMap.get(name);
                    literal.value = args[0];
                    literal.modified = true;
                }    
                return null;
            }
        };

        return type.cast(Proxy.newProxyInstance(getClass().getClassLoader(), proxyInterfaces, handler));
    }
} 
```

# smarty - Smarty 缓存问题

> ID：15197598
> 
> 赞同：1
> 
> 时间：2013-03-04T08:44:26.037
> 
> 标签：smarty

我在将模板包含在另一个模板中时遇到问题。我希望 smarty 每次刷新时都加载新的 tpl，而不是从缓存或 templates_c 中显示它。当我仔细检查并检查我在 nocache 下找到的解决方案时，它似乎不起作用就我而言。我确实使用 smarty 版本 2。

{include file=" `$theme`/ `$content`" nocache}

请显示一些光

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:48:20.480

Smarty 3 可以使用您在示例中提供的代码构造（链接到文档：[http](http://www.smarty.net/docs/en/language.function.include.tpl) ://www.smarty.net/docs/en/language.function.include.tpl ）

在 Smarty 2 中您不能使用`nocache`选项，但您可以尝试使用其他选项。例如`$smarty->caching = 1`.

查看 Smarty 2 的文档页面：[http ://www.smarty.net/docsv2/en/caching.tpl](http://www.smarty.net/docsv2/en/caching.tpl)

# c# - 绑定图片并保存到缓存文件夹

> ID：15197600
> 
> 赞同：0
> 
> 时间：2013-03-04T08:44:43.280
> 
> 标签：c#, .net, wpf

我有一个带有 Image 的 ListBox ：

```
<Image Margin="0" Source="{Binding Path=ImgUrl}" HorizontalAlignment="Stretch" Width="80" Height="80" 
                                               Tag="{Binding idStr}" OpacityMask="{x:Null}" Stretch="Fill"/> 
```

我希望当我绑定它时，它将图像保存到我的磁盘以解决缓存问题，下次它会检查图像是否存在并从磁盘中取出。有可能做这样的事情吗？下载图像-> 保存到磁盘-> 将图像作为图像源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:15:27.557

您可以使用专门的[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)将每个图像保存到文件中。

下面的示例代码显示了这种转换器的基本结构。您将不得不添加一些错误处理，当然您需要定义从图像 URI 到本地文件路径的映射。您也可以支持`System.Uri`作为替代源类型。

```
public class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var result = value;
        var imageUrl = value as string;

        if (imageUrl != null)
        {
            var buffer = (new WebClient().DownloadData(imageUrl));

            if (buffer != null)
            {
                // create an appropriate file path here
                File.WriteAllBytes("CachedImage.jpg", buffer);

                var image = new BitmapImage();
                result = image;

                using (var stream = new MemoryStream(buffer))
                {
                    image.BeginInit();
                    image.CacheOption = BitmapCacheOption.OnLoad;
                    image.StreamSource = stream;
                    image.EndInit();
                }
            }
        }

        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

您将在绑定中使用该转换器，如下所示：

```
<Image Source="{Binding Path=ImgUrl,
                Converter={StaticResource ImageConverter}}" ... /> 
```

# git - gitlab 不在 gitolite 中创建项目

> ID：15197601
> 
> 赞同：1
> 
> 时间：2013-03-04T08:44:45.190
> 
> 标签：git, gitolite, gitlab

在 gitlab 中创建项目后，我仍然无法推送它。我注意到在 gitolite 存储库文件夹中没有创建项目，它应该在那里。

`cat /home/gitlab/gitlab/log/githost.log` 如下所示，最后一次是我在 gitlab 中创建项目的时候。

```
March 04, 2013 15:37 -ERROR -Gitolite error -  remote: FATAL:
git config 'core.sharedRepository' not allowed remote: check
GIT_CONFIG_KEYS in the rc file To git@42.62.26.7:gitolite-admin   
1c67fcf..25792ba  master -master

March 04, 2013 15:50 -ERROR -Gitolite error -  remote: FATAL:
git config 'core.sharedRepository' not allowed remote: check
GIT_CONFIG_KEYS in the rc file To git@42.62.26.7:gitolite-admin   
19952c7..f8ccebc  master -master

March 04, 2013 15:57 -ERROR -Gitolite error -  remote: FATAL:
git config 'core.sharedRepository' not allowed remote: check
GIT_CONFIG_KEYS in the rc file To git@42.62.26.7:gitolite-admin   
359de47..3683bc1  master -master

March 04, 2013 16:21 -ERROR -Gitolite error -  remote: FATAL:
git config 'core.sharedRepository' not allowed remote: check
GIT_CONFIG_KEYS in the rc file To git@42.62.26.7:gitolite-admin   
479836c..37a2aa9  master -master

March 04, 2013 16:23 -ERROR -Gitolite error -  remote: FATAL:
git config 'core.sharedRepository' not allowed remote: check
GIT_CONFIG_KEYS in the rc file To git@42.62.26.7:gitolite-admin   
37a2aa9..8771dee  master -master

March 04, 2013 16:32 -ERROR -Gitolite error -  remote: FATAL:
git config 'core.sharedRepository' not allowed remote: check
GIT_CONFIG_KEYS in the rc file To git@42.62.26.7:gitolite-admin   
8771dee..f354a61  master -master 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:56:25.833

查看Gitolite V3的 gitolite 配置，如[Issue 1769中所述：](https://github.com/gitlabhq/gitlabhq/issues/1769)

> 我的`.gitolite.rc`看起来像这样

```
%RC = (
      # if you're using mirroring, you need a hostname.  This is *one* simple
      # word, not a full domain name.  See documentation if in doubt
      # HOSTNAME                  =>  'darkstar',
      UMASK                       =>  0007,
      '.*', 
```

> 将其更改为

```
%RC = (
      # if you're using mirroring, you need a hostname.  This is *one* simple
      # word, not a full domain name.  See documentation if in doubt
      # HOSTNAME                  =>  'darkstar',
      UMASK                       =>  0007,
      GIT_CONFIG_KEYS     =>  '.*', 
```

请注意，下一个 GitLab 版本 (5.0) 将不再使用 Gitolite。

# extjs - Sencha Architect 中的背景图像

> ID：15197602
> 
> 赞同：1
> 
> 时间：2013-03-04T08:44:46.777
> 
> 标签：extjs, sencha-touch-2, sencha-architect

使用 Sencha Architect，如何显示背景图片？我想在设计视图中看到背景图像，所以我可以快照。我尝试了两种方法：

首先使用 CSS 资源和背景 CSS 属性，当应用程序保存并在 chrome 中查看但 SA 设计视图中没有背景时有效。

其次，我尝试放置图像（作为背景），但无法在该图像上添加按钮。

请帮我在 SA 设计视图中查看背景图像。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:37:06.070

看看这个：

[http://docs.sencha.com/architect/2/#!/guide/resources](http://docs.sencha.com/architect/2/#!/guide/resources)

将您的 CSS 文件添加到您的 Architect 项目中，它将在设计视图中应用，如下所示：

![快照](../Images/38e80472d9fb9d8162a36f17e1994d32.png)

# ios - 使用 Applescript 重置 iOS 模拟器

> ID：15197605
> 
> 赞同：0
> 
> 时间：2013-03-04T08:44:53.480
> 
> 标签：ios, applescript

我正在尝试使用 AppleScript 重置 iOS 模拟器。当我只运行一个脚本时，`Reset Content and Settings`它只会重置 iOS 模拟器的当前版本（例如 6.0）。我需要在 iOS 模拟器中重置每个 iOS 版本以删除所有应用程序。我只能使用 Applescript 并且无法使用 bash 从模拟器中删除应用程序（删除应用程序文件夹）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:35:55.403

有请，

# [权威的 iOS 模拟器重置脚本（链接）](https://github.com/stianhoiland/The-Definitive-iOS-Simulator-Reset-Script/)

![在此处输入图像描述](../Images/e9b983ea4e9add43c75e94797f76ba33.png)

> 基于来自[这个 SO question](https://stackoverflow.com/questions/5125243/how-can-i-reset-the-ios-simulator-from-the-command-line)[的 Oded Regev 的代码](https://stackoverflow.com/a/14811280/659310)（基于[Jacob Rus 的精美“menu_click”代码](http://hints.macworld.com/article.php?story=20060921045743404)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:09:42.100

Stian 的脚本尚未针对 iOS 7 进行更新，并且该对话框不一定对构建脚本有用。我从他的代码中大量借鉴，并编写了一个相对于新设备和 iOS 版本而言具有前瞻性的版本。

[https://github.com/michaelpatzer/ResetAllSimulators](https://github.com/michaelpatzer/ResetAllSimulators)

# c# - 如何在C#中将字符串传递给整数指针

> ID：15197607
> 
> 赞同：0
> 
> 时间：2013-03-04T08:44:55.963
> 
> 标签：c#, pointers

我有`IntPtr`作为参数的方法。现在我有一个字符串“EXT101”，我需要将它作为参数传递给函数参数。以下是我的功能以及我尝试过的功能，但它不起作用。

```
unsafe private static extern int lineDevSpecific(IntPtr hLine); 
```

```
string vline="Ext101"; 
int* hline=&vline; 
```

如何`hline`作为参数传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:11:38.253

猜测一下，我会说`EXT101`是一个预处理器定义的常量。没有简单的方法来获得它，因为它在编译后不再作为名称存在。您需要查看要链接的任何库的头文件以查找值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:04:57.747

请注意，IntPtr 不是指向 int 的指针。它是由有符号本机整数表示的指针。也许您想在内存中获取指向该字符串的指针：

```
string vline="Ext101";
IntPtr hline = System.Runtime.InteropServices.Marshal.StringToHGlobalAnsi(vline);
lineDevSpecific(hline); 
```

# r - R中的模糊逻辑函数与Matlab中的一样

> ID：15197613
> 
> 赞同：5
> 
> 时间：2013-03-04T08:45:31.777
> 
> 标签：r, matlab

Matlab 模糊逻辑工具箱，提供[模糊推理系统建模。](http://www.mathworks.fr/fr/help/fuzzy/mamdani-fuzzy-inference-systems.html). 是否有所有工具箱的 R 等效项或某些 R 函数，例如：

1.  [readfis()](http://www.mathworks.fr/fr/help/fuzzy/readfis.html) : 从文件加载模糊推理系统
2.  [evalfis](http://www.mathworks.fr/fr/help/fuzzy/evalfis.html) () : 进行模糊推理计算

读取和评估 R 中的模糊系统？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T10:24:03.900

看看[`sets package`](http://cran.r-project.org/web/packages/sets/) 它可以完成您对模糊逻辑工具箱的所有期望。它允许指定您的模糊隶属函数，设置您的模糊规则，进行模糊推理和去模糊化。?fuzzy_inference 中的示例显示了标准模糊逻辑教科书的餐厅示例。我强烈推荐它。

```
## set universe
sets_options("universe", seq(from = 0, to = 25, by = 0.1))

## set up fuzzy variables
variables <-
set(service = fuzzy_partition(varnames = c(poor = 0, good = 5, excellent = 10), sd = 1.5),
food = fuzzy_variable(rancid = fuzzy_trapezoid(corners = c(-2, 0, 2, 4)),
                      delicious = fuzzy_trapezoid(corners = c(7, 9, 11, 13))),
tip = fuzzy_partition(varnames = c(cheap = 5, average = 12.5, generous = 20),
                      FUN = fuzzy_cone, radius = 5)
)

## set up rules
rules <-
set(
fuzzy_rule(service %is% poor || food %is% rancid, tip %is% cheap),
fuzzy_rule(service %is% good, tip %is% average),
fuzzy_rule(service %is% excellent || food %is% delicious, tip %is% generous)
)

## combine to a system
system <- fuzzy_system(variables, rules)
print(system)
plot(system) ## plots variables

## do inference
fi <- fuzzy_inference(system, list(service = 3, food = 8))

## plot resulting fuzzy set
plot(fi)

## defuzzify
gset_defuzzify(fi, "centroid")

## reset universe
sets_options("universe", NULL) 
```

![在此处输入图像描述](../Images/047680fa624ec35bee1095f57822c38a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T21:46:06.517

您可以使用 FuzzyToolkitUoN 包。我相信它是由诺丁汉大学的 JM Garibaldi 和其他人开发的。

源代码可在他的网站上找到：http: [//ima.ac.uk/garibaldi](http://ima.ac.uk/garibaldi)

并且作品在[这里](http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=6007743&abstractAccess=no&userType=inst)发表。

# c# - 从C#中的一系列数字中获取最小值和最大值而不进行排序

> ID：15197615
> 
> 赞同：1
> 
> 时间：2013-03-04T08:45:51.363
> 
> 标签：c#, loops, if-statement

目标是制作一个程序，当输入一系列数字时，会显示最小值和最大值。-99 将用作哨兵。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication12
{
    class Program
    {
        static void Main(string[] args)
        {
            double number = 0, maxValue = 0, minValue = 0;
            string goOn = "Y";

            Console.WriteLine("Please enter a series of numbers, when you wish to stop entering numbers please enter -99.");
            Console.WriteLine("The smallest and largest values will then be displayed.");
            Console.WriteLine("Remember not to enter -99 unless you want the series to end.");
            do
            {
                while (!double.TryParse(Console.ReadLine(), out number))
                    Console.WriteLine("Please enter whole numbers only");

                while (number != -99)
                {
                    process(ref number, ref minValue, ref maxValue);

                    while (!double.TryParse(Console.ReadLine(), out number))
                        Console.WriteLine("Please enter whole numbers only");
                }
                Console.WriteLine("The smallest value is {0} and the largest value is {1}.", minValue, maxValue);
                Console.WriteLine("Do you want to enter another series of numbers?");
                Console.WriteLine("If so enter y, if you want to end press any other key");
                goOn = Console.ReadLine();
                if (goOn.ToUpper() == "Y")
                {
                    Console.WriteLine("Please enter your set of numbers.");
                    Console.WriteLine("Remember not to enter -99 unless you want the series to end.");
                }

            } while (goOn.ToUpper() == "Y");
        }
        static void process(ref double minValue, ref double maxValue, ref double number)
        {

            if (number > maxValue)
            {
                number = maxValue;
            }
            if (number < minValue)
            {
                number = minValue;
            }

        }
    }
} 
```

我还没有学习数组、气泡或类，但这里有一些问题：

可能是因为获取最小值和最大值的方法，如果我输入 3、22、7、15、1，我将得到 15 而不是 22，因为值 22 已被丢弃并替换为 7。

最小值未显示，而是显示为 0

当输入非数字时，显示错误信息后，再输入更多数字，则 minValue 显示与 maxValue 相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T08:50:15.530

这是一个简单的错误：

```
static void process(ref double minValue, ref double maxValue, ref double number)
    {

        if (number > maxValue)
        {
            maxValue = number;
        }
        if (number < minValue)
        {
            minValue = number;
        }

    } 
```

您必须影响 maxValue 和 minValue，而不是数字。

# codeigniter - 如何使用 ajax 调用加载标记

> ID：15197618
> 
> 赞同：1
> 
> 时间：2013-03-04T08:46:06.620
> 
> 标签：codeigniter, google-maps-api-3

我在此页面上看到了有关如何动态加载标记的示例

```
https://developers.google.com/maps/articles/phpsqlsearch_v3 
```

我看到了另一个来自 BIOSTALL 的代码点火器 Google-maps api。

但是这个（[http://biostall.com/codeigniter-google-maps-v3-api-library](http://biostall.com/codeigniter-google-maps-v3-api-library)）库不会动态加载标记我如何使用它自己的库来实现这一点。

我应该尝试在 map init 上获取标记还是该库提供了一种使用 ajax 加载这些标记的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T08:03:46.443

Trying the pseudocode suggested by Biostall, this is what i have implemented:

```
$.ajax({
          url: '*URL*',
          type: "POST",
          data: ({value : *value*}),
          dataType: "json", //retrieved Markers Lat/lng in Json, thus using this dataType
          success: function(data){
            //Removing already Added Markers//////////
                for(var i=0; i < markers.length; i++){
                    markers[i].setMap(null);
                }
                markers = new Array();
            //////////////////////////////////////////
            // Adding New Markers////////////////////

                for (var i = 0, len = data.length; i < len; ++i) { // Iterating the Json Array
                    var d = data[i];

                    var lat = parseFloat(d.lattitude);
                    var lng = parseFloat(d.longitude);  
                    var myLatlng = new google.maps.LatLng(lat,lng);

                    var marker = {
                        map:map,
                        position:myLatlng // These are the minimal Options, you can add others too
                    };
                    createMarker(marker);
                }
            }
       }
    ); 
```

**Note:** If an array of Markers is being sent to this ajax call, it must be json encoded with the php function json_encode(). And thus you can use the `dataType: "json"` as mentioned in the ajax call parameters.

This worked for me, hope this might help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:36:31.350

首先，感谢您使用我的图书馆。值得注意的是，该库只是简化 Google 地图代码生成的一种方式。它代表您构建 JavaScript 和 HTML，从而可以快速轻松地将地图添加到您的页面。

开发人员可能希望通过一百万零一种方式与 Google Maps API 进行交互，并且该库不可能满足每一个实例的需求。因此，有时在这样的定制情况下，您可能需要添加自己的代码，以便它按您的需要执行。

因此，我是否建议您在 echo $map['js'] 之后简单地添加您需要的自定义 JS。库附带了一个名为 createMarker() 的函数，如果您查看源代码，就会看到该函数。

在伪代码中，这将如下所示：

```
<?php echo $map['js']; ?>
<script type="text/javascript">

    // Get marker(s) with ajax

    // Call createMarker() function to add marker(s) to map

</script> 
```

我希望这会有所帮助。

# php - 本地化在远程服务器上不起作用

> ID：15197622
> 
> 赞同：0
> 
> 时间：2013-03-04T08:46:42.300
> 
> 标签：php, localization

在我的本地机器上，我使用本地化并且它可以工作，但是在远程服务器上，它不会。php 扩展已启用，我没有收到任何错误消息。用户有一个下拉菜单来选择一种语言，一旦他这样做了，就应该翻译字符串（再次在我的本地机器上工作）。

这是我的代码：

```
if(!isset($_COOKIE["locale"]))
{
setcookie("locale", $configSite->  getValue('siteLang', 'language'),time()+60*60*24*30, "/");

        $locale =   $configSite->  getValue('siteLang', 'language');
}else{
         $locale = $_COOKIE["locale"]; 

}

putenv("LC_ALL=$locale");//needed on some systems
putenv("LANGUAGE=$locale");//needed on some systems
setlocale(LC_ALL, $locale);
bindtextdomain("messages", "./locale");
bind_textdomain_codeset("messages", "UTF-8");
textdomain("messages"); 
```

我检查了所有变量，一旦我更改语言，它们就会改变，但字符串没有被翻译。

此致

# ios - 如何在 iOS 中创建可缩放的时间线？

> ID：15197628
> 
> 赞同：2
> 
> 时间：2013-03-04T08:47:15.420
> 
> 标签：ios, iphone, objective-c, timeline, chap-links-library

我想在我的 iOS 应用程序中为一种待办事项列表创建一个可缩放的时间线。放大会显示天数和小时数，缩小会触发折叠天数或缩小到月数。会有滚动功能。

例如，我希望它像这样工作： http: [//almende.github.com/chap-links-library/js/timeline/doc/](http://almende.github.com/chap-links-library/js/timeline/doc/)

什么样的基本视图将是一个合适的起点，记住所需的内存应该尽可能低？UITableView、UIScrollView 或其他东西会为此工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T19:20:44.013

`UICollectionView`/将`UITableView`不起作用，因为单元格几乎总是相同的宽度/高度。最重要的是，单元格在每个单元格之间始终具有相同的间距。正因为如此，它能够很容易地计算出索引范围是什么，并根据索引查询`dataSource`它需要的单元格。

另一方面，时间线视图与这些控件有很大不同。单元格之间的间距不同，单元格有时会相互重叠。如果您有一个按位置排序的数据源，那么控件仍然需要猜测从哪里开始查找范围。因此，找到正确的索引范围会更加昂贵——您只需找到正确的算法即可在更短的时间内确定这一点。

您将不得不通过子类化 a 来构建自己的控件`UIScrollView`。你根本不应该惹麻烦`drawRect`。`UITableView`和使用的一个重要概念`UICollectionView`是出列单元格。Apple 的[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)的 iOS 5 版本通过分页演示了这一概念（iOS 6 版本将自定义分页替换为`UIPageViewController`）。您必须[下载旧文档](https://stackoverflow.com/a/14077350/867760)才能获取旧示例代码。

我目前正在构建一个时间线视图，我将在某个时候将其开源。它有点基于`UITableView`和 在水平或垂直方向上工作。它像`UITableView`. 我不关注标签或缩放，而是单元格之间间距不一致的概念。为了让您抢占先机，以下是我选择的 dataSource 方法：

```
- (NSInteger)numberOfCellsInTimelineView:(TimelineView *)timelineView;
- (CGRect)timelineView:(TimelineView *)timelineView cellFrameForIndex:(NSInteger)index;
- (TimelineViewCell *)timelineView:(TimelineView *)timelineView cellForIndex:(NSInteger)index; 
```

其中两个调用与`UITableView`has 相同，但它有一个名为 的新调用`cellFrameForIndex`。这个调用的重要之处在于 TimelineView 可以*猜测*索引并查找单元格的框架，并查看它在可见边界中的位置。如果它猜测可见边界内的单元格，它可以简单地向前和向后迭代，直到找到边缘。

目前我使用的算法需要`round(count * (CGRectGetMidX(timelineView.bounds) / timelineView.contentSize.width))`（水平方向）。基本上，它的作用是获取 UIScrollView 可见边界的中点并获取已滚动内容的百分比。然后它将它乘以单元格的数量。这工作*得*很好。当以随机间隔测试具有 100,000 条记录的随机数据集时，调用`cellFrameForIndex`范围从 8 到 150。我可以用这个拉 52-60 FPS。我仍在努力，并试图找到更好/更快的方法来确定索引范围。我试图将其降低到可见的单元格计数 + 10（最大）迭代。

如果您有时间等待，我会在完成后更新我的答案以包含指向我的 GitHub 项目的链接。这可能是几天到一周。我可以添加缩放。但是你必须分叉它并添加标签和任何你想要的东西。

**编辑：**

这是我的 Github 项目：[https ://github.com/lukescott/TimelineView](https://github.com/lukescott/TimelineView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:29:48.350

`UITableView`绝对不适合。`UIScrollView`可能会更好，但它不太适合动态或很长的内容。

我相信最简单的方法是自己做所有事情——通过一个`UIView`带有`drawRect`. 当然，您应该以与使用它`UIPanRecognizer`相同的方式`UIScrollView`使用它。

# ruby - 如何在此哈希上使用 `group_by`

> ID：15197629
> 
> 赞同：0
> 
> 时间：2013-03-04T08:47:18.763
> 
> 标签：ruby, arrays, hash, group-by

我有这个哈希：

```
@hash = [
  {0=>"1", 1=>"A1", 2=>"something", 3=>"10"}, 
  {0=>"2", 1=>"A1", 2=>"something", 3=>"8"},
  {0=>"3", 1=>"A2", 2=>"something", 3=>"3"},
  {0=>"4", 1=>"A2", 2=>"something", 3=>"13"}
] 
```

我需要`group_by`第一列（A1，A2）中的值，然后处理数据（例如，为 A1 和 A2 的索引为 3 的项目选择最低值）。

```
@hash.each do |item|
  item.each do |item2|
    item2.group_by{ |i| i[1] }.each do |p|
      puts p
    end
  end
end 
```

但我仍然无法弄清楚如何访问这些数据。我将非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:50:27.870

尝试以下

```
>> grouped = @hash.group_by { |h| h[1] }
>> grouped['A1'] # [{0=>"1", 1=>"A1", 2=>"something", 3=>"10"}, {0=>"2", 1=>"A1", 2=>"something", 3=>"8"}]
>> grouped['A2'] # [{0=>"3", 1=>"A2", 2=>"something", 3=>"3"}, {0=>"4", 1=>"A2", 2=>"something", 3=>"13"}] 
```

要获得最大值或最小值，请尝试

```
>> grouped['A1'].max_by { |h| h[3].to_i }[3] # 10
>> grouped['A1'].min_by { |h| h[3].to_i }[3] # 8 
```

# node.js - 当你的包有依赖关系时在 npm 中使用 bundleDependencies

> ID：15197632
> 
> 赞同：3
> 
> 时间：2013-03-04T08:47:45.323
> 
> 标签：node.js, dependencies, packages, npm

注意：您可以通过运行`npm install hotplate`. 我正在写热板，一个基于插件的简单模块：

[https://github.com/mercmobily/hotplate](https://github.com/mercmobily/hotplate)

它基本上是一个小模块，然后是大量加载的“插件”模块。请注意，由于这个巨大的文件系统，重新洗牌热板目前无法正常工作。

现在......基本上结构是：

```
hotplate
|
 - hotplate.js
 - package.json
 - node_modules
   |
   - hotCoreClientFiles
   - hotCorePage
   - hotCoreSharedCode
   - hotDojoAuth
     ... 
```

Hotplate 然后加载相关的“插件”（取决于用户想要做什么）等。这些插件将与主模块捆绑在一起。现在......我非常痛苦地弄清楚如何自动加载插件的依赖项。这就是 package.json 的样子：

```
{
  "name": "hotplate",
  "description": "Hotplate SaaS development framework",
  "version": "0.0.13",
  "private": false,
  "dependencies": {
    "express": "3.x",
    "async": "*",

    "hotCoreClientFiles": "*",
     [...]
    "hotDojoSubmit": "*",
    "hotDojoWidgetHooks": "*",
    "hotDojoWidgets": "*",
    "hotMongoAuth": "*",
    "hotMongoCometMessages": "*",
    "hotMongoLogger": "*"

  },
  "bundleDependencies": [
    "hotCoreClientFiles",
     [...]
    "hotDojoSubmit",
    "hotDojoWidgetHooks",
    "hotDojoWidgets",
    "hotMongoAuth",
    "hotMongoCometMessages",
    "hotMongoLogger"
  ],
} 
```

基本上，一些子模块也有依赖关系（在他们自己的 package.json 文件中概述）；安装后，结果如下：

```
/home/chiara
└─┬ hotplate@0.0.12
  ├── async@0.2.6
  ├─┬ express@3.1.0
  [...]
  ├── hotCoreClientFiles@0.0.4
  ├── hotCoreCommonValidators@0.0.4
  ├── hotCoreError@0.0.4
  [...]
  ├── hotDojoWidgets@0.0.4
  ├─┬ hotMongoAuth@0.0.4
  │ ├── UNMET DEPENDENCY allhttperrors *
  │ ├── UNMET DEPENDENCY bcrypt *
  │ ├── UNMET DEPENDENCY hat *
  │ ├── UNMET DEPENDENCY mongowrapper *
  │ └── UNMET DEPENDENCY simpleschema-mongo *
  ├─┬ hotMongoCometMessages@0.0.4
  │ ├── UNMET DEPENDENCY allhttperrors *
  │ └── UNMET DEPENDENCY mongowrapper *
  └─┬ hotMongoLogger@0.0.4
    ├── UNMET DEPENDENCY jsonreststores-mongo *
    ├── UNMET DEPENDENCY mongowrapper *
    └── UNMET DEPENDENCY simpledeclare * 
```

情况不妙！如果你然后跑`npm update`......好吧，有点灾难发生了。该模块`mongowrapper`依赖于`mongodb`，它被下载并编译 N 次。

我真的不想将`mongodb`,`mongowrapper`等设置`simpledeclare`为主`hotplate`模块的依赖项，因为......好吧，因为它们不是。Hotplate 只是一个加载器。如果`simpledeclare`更高级别的软件包已经需要它，那么 OK 它不需要再次安装。否则，我希望它保留在子模块的`node_modules`目录中。

现在，我一定做错了什么。我只是无法弄清楚它是什么......

谢谢！

默克。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-04T10:08:53.880

bundleDependencies 字段将在您的插件 package.json 中使用。不是你的主要装载机。

# jquery - jquery动画增加儿童属性

> ID：15197642
> 
> 赞同：-1
> 
> 时间：2013-03-04T08:48:25.697
> 
> 标签：jquery, animation

另一个 div 中的一些 div 元素：

```
<div id="divs1">
     <div class = "type1">1</div>
     <div class = "type1">2</div>
     ...
</div> 
```

通过单击其他元素，每个元素的宽度和高度应增加 10 像素。

```
$divs1 = $('#divs1').children()
$('#increaseThem').click(function(){
    $divs1.animate({
        top: ?????.css('top') + 10 +'px',
    },
    {duration:'normal',
    queue: false,
    })
}) 
```

如何在属性中获得一些动画元素的属性？应该是什么 (?????) ？附言。每个动画元素都有不同的宽度和高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:12:12.007

这是我认为您正在寻找的内容：

```
$('#click').click(function(){
    $('.type1').animate({
        height: '+=10px',
        width: '+=10px'
    }, {
        duration:'normal',
        queue: false,
    });
}); 
```

## [jsFiddle](http://jsfiddle.net/TqauV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:29:15.590

我建议你使用[each](http://api.jquery.com/each/)来循环遍历元素。

**Javascript (jQuery)**

```
$bars = $('#myDiagram .bar');

$('#increase').click(function() {
    $bars.each(function(){
        $this = $(this);

        $this.animate({
            width: $this.width() + 10 + 'px',
        },
        {
            duration:'normal',
            queue: false
        });
    });
}); 
```

**HTML**

```
<div id="myDiagram" class="diagram">
  <div class="bar" style="width: 10px"></div>
  <div class="bar" style="width: 30px"></div>
  <div class="bar" style="width: 20px"></div>
</div>
<button id="increase">Increase bars</button> 
```

查看[演示](http://jsfiddle.net/st3fan/sea3n/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:57:40.853

`$('.type1')`是这个类的集合，`you are animating the elements from its current location.`所以每个带有类名的 div`.type1`都会`move to 10 px from top`。

```
$('.type1').each(function(){
   $this = $(this);
  $('#increaseThem').click(function(){
     $this.animate({
        top: $this.css('top') + 10 +'px',
     },
      {duration:'normal',
       queue: false,
     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:01:19.283

您必须使用 jquery 的`width()`,`height()`功能。您可以使用以下代码更改另一个孩子的宽度。

```
$('.type1').click(function(){
    $(this).siblings().animate({width: ($(this).siblings().width()+10)+'px',height:($(this).siblings().width()+10)+'px',background:"red"},
    {duration:'normal',queue: false}) 
}); 
```

带动画 [http://jsfiddle.net/arjuncc/WzfXp/5/](http://jsfiddle.net/arjuncc/WzfXp/5/)

没有动画 [http://jsfiddle.net/arjuncc/WzfXp/4/](http://jsfiddle.net/arjuncc/WzfXp/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:02:44.837

是的，您也可以尝试使用其他选择器，但您不应错过可用的工具`$(this)`

`top: $(this).css('top') + 10 +'px',`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T15:53:11.380

假设您有一个带有 id:increaseThem 的按钮，您可以首先找出每个子元素的当前高度和宽度，然后遍历它们以将每个子元素的高度和宽度增加 10px：

```
$('#increaseThem').click(function(){
$('#divs1').children().each(function () {
var height=$(this).height()+10;
var width=$(this).width()+10;
$(this).animate(
{"height": height+"px"},
"fast");
$(this).animate(
{"width": width+"px"},
"fast");
});
}); 
```

# php - 需要将所有帖子 ID 添加到 query_posts()

> ID：15197654
> 
> 赞同：0
> 
> 时间：2013-03-04T08:49:29.040
> 
> 标签：php, wordpress, post

我需要在 query_posts() 中获取与特定类别相关的所有帖子 ID。

我目前正在使用以下代码：

```
<?php
query_posts('cat=11&p=-1');
while ((have_posts()) : the_post();
the_title();
the_content();
endwhile;
?> 
```

我希望在 'p=' 中插入 -1 会带来所有帖子，但事实并非如此。有人可以帮忙吗？

提前致谢， 埃亚尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:52:36.837

引用[Wordpress 函数参考](http://codex.wordpress.org/Function_Reference/query_posts)：检索

> 一个类别中的所有帖子。设置 > 阅读中的“博客页面最多显示”参数会影响您的结果。要克服这个问题，请添加“posts_per_page”参数。例如：

```
query_posts( array ( 'category_name' => 'my-category-slug', 'posts_per_page' => -1 ) ); 
```

> 这将返回该类别中的所有帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:49:13.720

我只是希望你的实际代码不包含这个不平衡的括号 @while ((have_posts())) : the_post();

根据：[http](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters) : //codex.wordpress.org/Class_Reference/WP_Query#Parameters $query = new WP_Query('p=7');

这意味着我们需要显示 id=7 的帖子。

现在根据您的代码： query_posts('cat=11&p=-1');

这意味着，显示类别 id = 7 且 id = -1 的那些帖子，这对我来说看起来不是很有用。

在我的情况下：query_posts('cat=11') 和 query_posts('cat=11&posts_per_page=-1') 工作顺利。

现在你想告诉你这个插件是如何依赖“p”的，所以我们可以找到一个替代的解决方案。

# qt - 如何使用 QFileSystemModel 设置 QCompleter 的路径？

> ID：15197660
> 
> 赞同：1
> 
> 时间：2013-03-04T08:50:06.133
> 
> 标签：qt

我正在尝试使用 QFileSystemModel 制作 QCompleter。结果是 QCompleter 尝试从根文件夹开始自动完成。我想让 QCompleter 从我选择的文件夹路径开始。

我有以下代码：

```
modelCompleter = new QCompleter(this);
fModel = new QFileSystemModel();
fModel->setRootPath(QDir::currentPath() + "/" + filepath);
modelCompleter->setModel(fModel);
ui->le_search->setCompleter(modelCompleter); 
```

似乎无论我尝试什么，设置模型的根路径都不会导致任何变化。我应该怎么做才能改变 QCompleter 显示的路径？

# python - Python 2.7 Tkinter 在 if 中重绘小部件

> ID：15197664
> 
> 赞同：1
> 
> 时间：2013-03-04T08:50:13.527
> 
> 标签：python, tkinter

我在 Python 2.7 中的 Tkinter 代码有问题。我有一个带有一个小部件（按钮）的主窗口。单击按钮后，我想重绘窗口（并更改变量的值-> 添加一个小部件）。问题出在哪里？我认为这个问题可能是 mainloop 的每个循环都将变量更改为 0。谢谢！

```
from Tkinter import *

def function():
    global variable
    variable = 0
    main.update()

variable = 0
main = Tk() #New Tk window

if variable == 1:
    Checkbutton(main, text="test").pack()

Button(main, text="Change", command=function).pack()

main.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:05:07.683

您永远不会将变量设置为 1，并且在使用 GUI 时应该使用函数（和类）。

```
from Tkinter import *
main = Tk() #New Tk window
variable = 0

def function():
    global variable
    variable = 1
    newThing()

def newThing(): 
   global variable
   if variable==1:
       Checkbutton(main, text="test").pack()
   variable = 0

Button(main, text="Change", command=function).pack()
main.mainloop() 
```

# axapta - 打印管理/AIF

> ID：15197667
> 
> 赞同：1
> 
> 时间：2013-03-04T08:50:17.207
> 
> 标签：axapta, dynamics-ax-2009, aif

我已经设置了 AIF，以便在创建发票时将其添加到队列中。我知道这在打印到屏幕时不起作用。因此，我已将该客户的打印管理设置调整为“打印到存档”。但是，该文档仍未添加到 AIF 队列中。

经过一番调查，我找到了原因。即使我在过帐框中勾选了“使用打印管理”来过帐发票，但在打印机设置下，我仍然将“发送到”设置为屏幕，当我将其更改为打印存档时，我的文档被添加到 AIF 队列中。

所以我的问题是，为什么会这样？为什么它不接收我在打印管理中为该客户设置的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:42:05.647

您的打印机是否配置为 AOS 打印机？看`Classes\SalesFormLetter\checkAOSPrintersPrintManagement`

这在您的测试环境中是否存在相同的问题？尝试重置您的使用数据。`usePrintManagement`开票过程中包含一个变量。

**如果您可以对此进行调试，那么单步执行并查看打印管理是否真的被使用**应该是相当容易的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:59:47.053

我试图重现您的问题，但正如您所期望的那样，它对我有用。也许您的客户打印管理设置不正确。

要更改我的测试客户的打印管理设置，我在客户主窗体中转到客户，单击设置 -> 打印管理。扩展模块 -> 账户 -> 文件 -> 销售订单发票。右键单击原始并单击覆盖。然后我覆盖了该客户的默认打印机目的地。

如果您还没有按照这些步骤操作，请告诉我是否可行。如果没有，可能还有其他问题。

# python - 使用 python 的 eval() 与 ast.literal_eval()

> ID：15197673
> 
> 赞同：232
> 
> 时间：2013-03-04T08:50:41.620
> 
> 标签：python, eval, abstract-syntax-tree

我有一些代码`eval()`作为可能的解决方案出现的情况。现在我以前从未使用`eval()`过，但是，我遇到了很多关于它可能造成的潜在危险的信息。也就是说，我对使用它非常谨慎。

我的情况是我有用户给出的输入：

```
datamap = input('Provide some data here: ') 
```

哪里`datamap`需要有字典。我四处寻找，发现`eval()`可以解决这个问题。我认为我可以在尝试使用数据之前检查输入的类型，这将是一个可行的安全预防措施。

```
datamap = eval(input('Provide some data here: ')
if not isinstance(datamap, dict):
    return 
```

我通读了文档，但我仍然不清楚这是否安全。eval 是在输入数据后还是在`datamap`调用变量后立即评估数据？

`ast`模块是唯一`.literal_eval()`安全的选择吗？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-03-04T08:52:53.967

`datamap = eval(input('Provide some data here: '))`意味着您在认为代码不安全*之前实际评估了代码。*它会在调用函数后立即评估代码。另请参阅[的危险`eval`](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)。

[`ast.literal_eval`](https://docs.python.org/3/library/ast.html#ast.literal_eval)如果输入不是有效的 Python 数据类型，则引发异常，因此如果不是，则不会执行代码。

`ast.literal_eval`需要时使用[`eval`](https://docs.python.org/3/library/functions.html#eval)。您通常不应该评估文字 Python 语句。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2013-03-04T08:54:35.553

[`ast.literal_eval()`](https://docs.python.org/library/ast.html#ast.literal_eval)仅认为 Python 语法的一小部分是有效的：

> 提供的字符串或节点只能由以下 Python 文字结构组成：字符串、字节、数字、元组、列表、字典、集合、布尔值和`None`.

传入`__import__('os').system('rm -rf /a-path-you-really-care-about')`会`ast.literal_eval()`引发错误，但[`eval()`](https://docs.python.org/library/functions.html#eval)会很高兴地删除您的文件。

因为看起来你只是让用户输入一个普通的字典，所以使用`ast.literal_eval()`. 它安全地做你想做的事，仅此而已。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2016-01-20T15:56:33.030

**eval：** 这是非常强大的，但如果您接受来自不受信任输入的字符串来评估，这也是非常危险的。假设正在评估的字符串是 "os.system('rm -rf /')" ？它会真正开始删除您计算机上的所有文件。

**ast.literal_eval：** 安全地评估表达式节点或包含 Python 文字或容器显示的字符串。提供的字符串或节点只能由以下 Python 文字结构组成：字符串、字节、数字、元组、列表、字典、集合、布尔值、无、字节和集合。

**句法：**

```
eval(expression, globals=None, locals=None)
import ast
ast.literal_eval(node_or_string) 
```

**例子：**

```
# python 2.x - doesn't accept operators in string format
import ast
ast.literal_eval('[1, 2, 3]')  # output: [1, 2, 3]
ast.literal_eval('1+1') # output: ValueError: malformed string

# python 3.0 -3.6
import ast
ast.literal_eval("1+1") # output : 2
ast.literal_eval("{'a': 2, 'b': 3, 3:'xyz'}") # output : {'a': 2, 'b': 3, 3:'xyz'}
# type dictionary
ast.literal_eval("",{}) # output : Syntax Error required only one parameter
ast.literal_eval("__import__('os').system('rm -rf /')") # output : error

eval("__import__('os').system('rm -rf /')") 
# output : start deleting all the files on your computer.
# restricting using global and local variables
eval("__import__('os').system('rm -rf /')",{'__builtins__':{}},{})
# output : Error due to blocked imports by passing  '__builtins__':{} in global

# But still eval is not safe. we can access and break the code as given below
s = """
(lambda fc=(
lambda n: [
    c for c in 
        ().__class__.__bases__[0].__subclasses__() 
        if c.__name__ == n
    ][0]
):
fc("function")(
    fc("code")(
        0,0,0,0,"KABOOM",(),(),(),"","",0,""
    ),{}
)()
)()
"""
eval(s, {'__builtins__':{}}) 
```

在上面的代码中，`().__class__.__bases__[0]`只有对象本身。现在我们实例化了所有的**子类**，这里我们的主要`enter code here`目标是从中找到一个名为**n**的类。

我们需要从实例化的子类中进行`code`对象和对象。`function`这是`CPython`访问对象子类和附加系统的另一种方法。

从 python 3.7 ast.literal_eval() 现在更严格了。不再允许任意数字的加减法。[关联](https://docs.python.org/3/whatsnew/3.7.html?highlight=ast%20literal_eval)

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2013-03-04T08:52:44.353

Python*急于*评估，因此`eval(input(...))`（Python 3）将在用户输入点击 时立即评估用户的输入`eval`，而不管您之后如何处理数据。因此，**这是不安全**的，尤其是当您进行`eval`用户输入时。

使用`ast.literal_eval`.

* * *

例如，在提示符下输入它可能对您非常不利：

```
__import__('os').system('rm -rf /a-path-you-really-care-about') 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-02T16:42:15.263

如果您只需要用户提供的字典，则可能更好的解决方案是`json.loads`. 主要限制是 json dicts 需要字符串键。此外，您只能提供文字数据，但`literal_eval`.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2021-08-10T19:34:17.510

在最近的 Python3 ast.literal_eval() 不再解析简单的字符串，而是应该使用 ast.parse() 方法创建一个 AST 然后解释它。

这是在 Python 3.6+ 中正确使用 ast.parse() 来安全评估简单算术表达式的完整示例。

```
import ast, operator, math
import logging

logger = logging.getLogger(__file__)

def safe_eval(s):

    def checkmath(x, *args):
        if x not in [x for x in dir(math) if not "__" in x]:
            raise SyntaxError(f"Unknown func {x}()")
        fun = getattr(math, x)
        return fun(*args)

    binOps = {
        ast.Add: operator.add,
        ast.Sub: operator.sub,
        ast.Mult: operator.mul,
        ast.Div: operator.truediv,
        ast.Mod: operator.mod,
        ast.Pow: operator.pow,
        ast.Call: checkmath,
        ast.BinOp: ast.BinOp,
    }

    unOps = {
        ast.USub: operator.neg,
        ast.UAdd: operator.pos,
        ast.UnaryOp: ast.UnaryOp,
    }

    ops = tuple(binOps) + tuple(unOps)

    tree = ast.parse(s, mode='eval')

    def _eval(node):
        if isinstance(node, ast.Expression):
            logger.debug("Expr")
            return _eval(node.body)
        elif isinstance(node, ast.Str):
            logger.debug("Str")
            return node.s
        elif isinstance(node, ast.Num):
            logger.debug("Num")
            return node.value
        elif isinstance(node, ast.Constant):
            logger.info("Const")
            return node.value
        elif isinstance(node, ast.BinOp):
            logger.debug("BinOp")
            if isinstance(node.left, ops):
                left = _eval(node.left)
            else:
                left = node.left.value
            if isinstance(node.right, ops):
                right = _eval(node.right)
            else:
                right = node.right.value
            return binOps[type(node.op)](left, right)
        elif isinstance(node, ast.UnaryOp):
            logger.debug("UpOp")
            if isinstance(node.operand, ops):
                operand = _eval(node.operand)
            else:
                operand = node.operand.value
            return unOps[type(node.op)](operand)
        elif isinstance(node, ast.Call):
            args = [_eval(x) for x in node.args]
            r = checkmath(node.func.id, *args)
            return r
        else:
            raise SyntaxError(f"Bad syntax, {type(node)}")

    return _eval(tree)

if __name__ == "__main__":
    logger.setLevel(logging.DEBUG)
    ch = logging.StreamHandler()
    logger.addHandler(ch)
    assert safe_eval("1+1") == 2
    assert safe_eval("1+-5") == -4
    assert safe_eval("-1") == -1
    assert safe_eval("-+1") == -1
    assert safe_eval("(100*10)+6") == 1006
    assert safe_eval("100*(10+6)") == 1600
    assert safe_eval("2**4") == 2**4
    assert safe_eval("sqrt(16)+1") == math.sqrt(16) + 1
    assert safe_eval("1.2345 * 10") == 1.2345 * 10

    print("Tests pass") 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-02T07:34:25.443

我被困住了`ast.literal_eval()`。我在 IntelliJ IDEA 调试器中尝试它，它一直`None`在调试器输出上返回。

但后来当我将它的输出分配给一个变量并用代码打印出来时。它工作得很好。分享代码示例：

```
import ast
sample_string = '[{"id":"XYZ_GTTC_TYR", "name":"Suction"}]'
output_value = ast.literal_eval(sample_string)
print(output_value) 
```

它的python 3.6版。

# java - 嵌套泛型

> ID：15197675
> 
> 赞同：0
> 
> 时间：2013-03-04T08:50:48.413
> 
> 标签：java, generics

我有几门课：

标准班：

**工作流图模型：**

```
public class WorkflowGraphModel<T> implements IWorkflowGraphModel<T>

public WorkflowGraphModel( List<IWorkflowGraphEntry<T>> entries ) 
{
  this.entries = entries;
} 
```

**工作流图入口：**

```
public class WorkflowGraphEntry<T> implements IWorkflowGraphEntry<T> 
```

特殊实现：

**批准StepGraphEntry**

```
public class ApprovalStepGraphEntry extends WorkflowGraphEntry<ApprovalStep> 
```

**批准StepGraphModel**

```
public class ApprovalStepGraphModel extends WorkflowGraphModel<ApprovalStepGraphEntry>

public ApprovalStepGraphModel( List<ApprovalStepGraphEntry> stepEntries )
{
  super( stepEntries );
} 
```

调用时出错

```
super( stepEntries ); 
```

`WorkflowGraphModel` 无法将WorkflowGraphModel (java.util.List>)应用于 (java.util.List)

我不知道为什么编译器不知道`ApprovalStepGraphEntry`implements `IWorkflowGraphEntry`。在我看来，泛型设置得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:54:03.577

类型`List <IWorkflowGraphEntry <ApprovalStep>>`不能从 分配`List <ApprovalStepGraphEntry>`。您可能应该更改`List <IWorkflowGraphEntry <ApprovalStep>>`为`List<? extends IWorkflowGraphEntry <ApprovalStep>>`或类似的东西。

这里解释了为什么上面提到的类型不兼容。让我们考虑一下：

```
interface A {...}
class B extends A {...}
class B1 extends A {...}
interface C <T> {public void set (T t);} 
```

那么以下是不正确的：

```
C <A> ca;
C <B> cb = ...;
ca = cb; // Error here
ca.set (new B1 ()); // Correct! 
```

请注意，一旦`ca`声明为`C <A> ca`，方法`ca.set`接受类型的参数，`A`因此`new B1()`是它的有效值。同时，method`cb.set`接受 type 的参数`B`，因此`new B1()`不是该参数的有效值。如果我们能够分配`cb`给`ca`，那么我们以后就可以调用`ca.set (new B1())`它将无效类型的值传递给 set 方法。为了防止这种情况，编译器将`C <A>`和类型视为不兼容，`C <B>`即使是兼容的也是如此。`A``B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:03:52.593

你`ApprovalStepGraphEntry`没有实现`IWorkflowGraphEntry`，它扩展`WorkflowGraphEntry`了，它又实现了接口。在定义泛型类型时需要明确这种区别：

代替

```
public WorkflowGraphModel( List<IWorkflowGraphEntry<T>> entries ) 
```

你需要

```
public WorkflowGraphModel( List<? extends IWorkflowGraphEntry<T>> entries ) 
```

# unix - 如何在unix中更改cut命令中的字段顺序

> ID：15197676
> 
> 赞同：0
> 
> 时间：2013-03-04T08:51:00.763
> 
> 标签：unix, sed, awk

我想以特定格式打印字段，输入：

```
col1|col2|col3|col4 
```

我使用`cat file | cut -d '|' -f 3,1,4` 了输出：

```
col1|col3|col4 
```

但我的预期输出是：

```
col3|col1|col4 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:56:23.520

来自`man cut`：

> 所选输入的写入顺序与其读取顺序相同，并且只写入一次

你应该做：

```
$ awk -F'|' -vOFS='|' '{print $3,$1,$4}'  <<< "col1|col2|col3|col4"
col3|col1|col4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:09:34.897

即使 awk 很好，这里有一个 perl 解决方案：

```
perl -F"\|" -ane 'print join "|",@F[2,0,3]' 
```

测试：

```
> echo "col1|col2|col3|col4" | perl -F"\|" -ane 'print join "|",@F[2,0,3]'
col3|col1|col4 
```

# ios - 转换为 ARC 时出现 NSMakeCollectable 问题

> ID：15197678
> 
> 赞同：5
> 
> 时间：2013-03-04T08:51:08.147
> 
> 标签：ios, automatic-ref-counting

我正在尝试将我的代码转换为 ARC，但我在 ASIRequest 库中遇到了 NSMakeCollectable 问题。

```
- (NSString*)encodeURL:(NSString *)string
{
    NSString *newString = NSMakeCollectable([(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)string, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding([self stringEncoding])) autorelease]);
    if (newString) {
        return newString;
    }
    return @"";
} 
```

它给了我这个错误：`NSMakeCollectable is unavailable: not available in automatic reference counting`。

我该如何解决这个问题？需要一些指导。谢谢。

编辑：试过这个但不工作：

```
 - (NSString*)encodeURL:(NSString *)string
    {
        NSString *newString = NSMakeCollectable([(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)string, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding([self stringEncoding])) autorelease]);
        if (newString) {
            return (__bridge_transfer NSString*)newString;
        }
        return @"";
    } 
```

也试过这个：

```
- (NSString*)encodeURL:(NSString *)string
        {
            NSString *newString = NSMakeCollectable([(__bridge_transfer NSString*)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)string, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding([self stringEncoding])) autorelease]);
            if (newString) {
                return newString;
            }
            return @"";
        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T09:20:38.877

`NSMakeCollectable`在 ARC 中不再需要。你可以`CFBridgingRelease`在这里使用。

```
- (NSString*)encodeURL:(NSString *)string
{
    NSString *newString = CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)string, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding([self stringEncoding])));
    // or  NSString *newString = (__bridge_transfer NSString*)(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)string, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding([self stringEncoding]));
    if (newString) {
        return newString;
    }
    return @"";
} 
```

# xml - 如何在正则表达式中使用 OR 运算符？

> ID：15197681
> 
> 赞同：0
> 
> 时间：2013-03-04T08:51:27.320
> 
> 标签：xml, regex

我正在使用正则表达式从着陆页的 URL 中捕获广告 id，该参数使用广告 id 之前的特定参数。

我的一位客户在同一天为他的网址使用了不同的参数来投放不同的广告时遇到了问题。

这是与第一个参数相关的表达式：

```
<Read Var="destUrl" Field='DestinationUrl' Regex='(\bp=edgetrackerid_(?{edgetrackerid}\w+)\b)'/> 
```

这是与第二个参数相关的表达式：

```
 <Read Var="destUrl" Field='DestinationUrl' Regex='(\bp=edgetrackerid(?{edgetrackerid}\w+)\b)'/> 
```

但是在下载报告时，它只会与我放在第一位的报告有关。我怎样才能解决这个问题？我想说-如果第一个参数不存在，则使用第二个（不带下划线_）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:55:43.773

你可以把这`_?`意味着零或一个下划线。

所以你的正则表达式将是

```
(\bp=edgetrackerid_?(?{edgetrackerid}\w+)\b) 
```

# testng - TESTNG：如何将可发送电子邮件的报告作为电子邮件发送

> ID：15197682
> 
> 赞同：4
> 
> 时间：2013-03-04T08:51:31.873
> 
> 标签：testng, selenium-webdriver

以电子邮件形式发送测试报告的最佳方式是什么？

我的框架有 WebDriver + TestNG

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-17T06:38:15.163

对于詹金斯..

转到您的`Project > Configure > Post-build Actions > Editable Email Notification`.

然后点击`Advanced Settings....`

有一个名为 Pre-send Script 的框。

```
def reportPath = build.getWorkspace().child("test-output/emailable-report.html") 
msg.setContent(reportPath.readToString(), "text/html"); 
```

复制它并将其粘贴到框中。然后保存它。这将生成彩色页面，您可以通过电子邮件将其作为报告发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:44:59.927

有几种方法，您可以使用 jenkins 来安排您的测试或运行它们。它提供了发送电子邮件作为后期构建选项。另一种方式是，如果您使用 maven 作为构建工具，您可以使用发送电子邮件的插件。mail-maven-plugin 和 maven postman 插件是一些搜索结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T07:26:28.583

1.  首先在您的 Jenkins 上安装“电子邮件扩展插件”。
2.  您需要在新安装的电子邮件扩展插件部分下的 Jenkins 配置中设置电子邮件提供商的 SMTP 服务器、SMTP 端口等，并附上所有相关详细信息，例如电子邮件 ID 和密码。
3.  现在在您的项目配置中，将此插件添加到您的后期构建操作中。
4.  在您的收件人列表中添加相关的电子邮件 ID。

**5.您将看到一个名为“附件”的字段**

**6\. 在该字段中输入：**/emailable-report.html**

7.  它将在您的项目工作区中获取“emailable-report.html”文件，并在构建后将其作为附件发送，具体取决于您的电子邮件触发器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:17:10.880

以下内容对我有帮助：

[http://blog.qatestlab.com/2011/02/24/e-mail-distribution-of-test-results-obtained-from-selenium-testng/](http://blog.qatestlab.com/2011/02/24/e-mail-distribution-of-test-results-obtained-from-selenium-testng/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-18T14:03:02.293

我已经创建了**没有 Jenkins**的解决方案 我曾经[使用 Java 发送邮件附件](https://stackoverflow.com/questions/16117365/sending-mail-attachment-using-java)到使用 Javamail 打磨邮件

在 TensNG 注释 @AfterTest 我创建了发送带有附件的电子邮件的方法

```
EmailUtil.reportByEmail("target/surefire-reports/emailable-report.html"); 
```

在 Windows 中，我创建了批处理文件 launchtests.bat whitch 包含第一步以运行干净的测试，其次是在没有干净的情况下启动一个测试，以发送以前的结果。

```
chdir C:\Users\QA\tests\tests
start /wait cmd /k "mvn clean test && exit"  /secondary /minimized
REM to send email with results in file, whitch was composed after test suite (mvn without: clean)
start /wait cmd /k "mvn test -Dgroups=FakeGroupForSendMail && exit"  /secondary /minimized 
```

然后，当然我已经在 Windows 中创建了 tast 来每天晚上启动这批。

# c# - 如何在 C# 中重新定义标准关键字的名称

> ID：15197683
> 
> 赞同：12
> 
> 时间：2013-03-04T08:51:36.017
> 
> 标签：c#, c-preprocessor

我有一个有趣的想法。我想重新定义 C# 中的关键字，例如将`if`关键字替换为 the`MyIf`或其他内容。有人知道怎么做吗？

因为我认为它必须看起来像这样：

```
namespace
{
   #define MyIf = if;
   #define MyElse = else;
   ...

   public someclass
   {
        public void someMethod()
        {
            MyIf(true)
            {
               ...
            }
            MyElse
            {
               ...
            }
        }
   }
} 
```

**添加：**

也许有办法制作 C++ 或**C**库来重新定义 C# 的标准核心部分？

**注意。我知道这是不好的编程习惯，我要求所有程序员不要在你的企业代码中使用答案。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:54:45.557

这是不可能的——C# 没有像 C 和 C++ 那样的预处理器，因此没有在编译器看到源代码之前转换源代码的机制。当然，编译器只会识别标准`if`，因此也没有其他选项可以在编译器看到之前以某种方式转换源代码。

就算有可能，在恐怖规模上也只比克苏鲁低了一步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T08:57:29.390

在 c# 中，您可以在此处覆盖可重载运算符（**+**、**-**、**==**）更多信息：http: [//msdn.microsoft.com/en-us/library/8edha89s (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8edha89s(v=vs.80).aspx)

但是您**不能**真正覆盖条件运算符。

这些运算符 =、.、?:、->、new、is、sizeof、typeof 也是如此，它们不能被重载。

C# 不支持宏，但是您当然可以编写一个自定义解析器来处理宏，然后最终将您的代码发送到 c# 编译器，请查看**Microsoft Roslyn**。

[http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T09:09:31.703

你可以像这样使用**Monads** ...**`extension methods`**

这是 Monad 也许

```
 public static TInput If<TInput>(this TInput o, Predicate<TInput> evaluator)
        where TInput : class
    {
        if (o == null) return null;
        return evaluator(o) ? o : null;
    }

        public static TResult Return<TInput, TResult>(this TInput o, Func<TInput, TResult> evaluator, TResult failureValue)
            where TInput : class
        {
            if (o == null) return failureValue;

            return evaluator(o);
        } 
```

// 使用

```
var result = ListOfObjects.If(o => o.Id == 1).Return(x => x.Object, null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:56:58.093

你不能重新定义`if`or `else`，因为 C# 没有预处理器可以让你做这样的事情（可能也阻止任何人做这样的事情）。

但是您可以重新定义您的类实例何时评估为`true`/ `false`（这是您可以获得的最接近的值）：

```
public static bool operator true(YourType x)
{
    return x.IsLying ? !x.Whatever : x.Whatever;
}

public static bool operator false(YourType x)
{
    return x.IsLying ? x.Whatever : !x.Whatever;
} 
```

例子：

```
YourType wah = new YourType() { IsLying = true, Whatever = true };
if (wah) {
    // ...
}
else {
    // ...
} 
```

有关详细信息，请参见此处：http:
[//msdn.microsoft.com/en-us/library/6x6y6z4d.aspx](http://msdn.microsoft.com/en-us/library/6x6y6z4d.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T09:00:25.863

## C##[定义](http://msdn.microsoft.com/en-us/library/yt3yck0x%28v=vs.71%29.aspx)

> #define 允许您定义一个符号，这样，通过使用该符号作为传递给#if 指令的表达式，该表达式将计算为真。

C# 没有[预处理器](http://msdn.microsoft.com/en-en/library/ed8yd1ha.aspx)，但它有类似的指令：

> 尽管**编译器没有单独的预处理器**，但本节中描述的指令的处理就像有一个一样。它们用于帮助条件编译。**与 C 和 C++ 指令不同，您不能使用这些指令来创建宏**。

因此，它与 C++ 或 C 中的 #define 不同。C# #define 仅声明存在一个文字，但该文字没有替换或宏。

```
#define STRING int // Valid in C++ but invalid in C# 
```

* * *

## C++ #[定义](http://msdn.microsoft.com/en-us/library/teas0593%28v=vs.80%29.aspx)

> **#define 指令用标记字符串替换源文件中所有后续出现的标识符**。标识符仅在形成令牌时才被替换。（请参阅 C++ 语言参考中的 C++ 标记。）例如，如果标识符出现在注释中、字符串中或作为较长标识符的一部分，则不会被替换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T08:59:22.957

在 C# 中，预处理器指令用于条件编译代码。

[例如：](http://msdn.microsoft.com/en-us/library/yt3yck0x%28v=vs.110%29.aspx)

> `#define` 让您定义一个符号。当您使用符号作为传递给`#if`指令的表达式时，表达式的计算结果为真。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T09:00:25.670

做一些类似于你想要的事情，你可以覆盖隐式 bool 运算符：

```
using System;

class PleaseDontDoThis {
    public static implicit operator bool(PleaseDontDoThis h) {
        return (new Random().Next() % 2 == 0);
    }
}

static class Program {
    static void Main(string[] args) {
        var x = new PleaseDontDoThis();
        if (x) {
            Console.WriteLine("true");
        } else {
            Console.WriteLine("false");
        }
    }
} 
```

# struts2 - 在我的 struts 2 操作中从 struts/dojo datetimepicker 获取空值？

> ID：15197684
> 
> 赞同：2
> 
> 时间：2013-03-04T08:52:04.697
> 
> 标签：struts2, dojo, struts2-json-plugin

我在我的 struts 2 web 应用程序的 jsp 页面中使用了两个 struts/dojo datetimepicker。这些允许选择日期并正确显示，但是当我提交表单并访问与 jsp 表单中 datetimepicker 名称相同的变量（使用 getter 和 setter）中的 datetimepickers 值时，它返回 null 值。

我想如何在 struts 操作中获取 datetimepickers 值，然后将它们存储在 MySQL 数据库中

我的jsp页面-->

```
 <%@taglib prefix="sx" uri="/struts-dojo-tags"%>
 <html>
 <head>
 <sx:head />
 </head>
 <body>
 <form name="cFrom" method="post" action="saveForm"  
 enctype="multipart/form-data">
  state Date: <sx:datetimepicker formatLength="medium" value="%{'today'}"     
  name="sDate"></sx:datetimepicker><br/>
  End Date: <sx:datetimepicker formatLength="medium" name="eDate">    
 </sx:datetimepicker><br/>
 <button type="submit">Save</button>
 </form>
 </body>
 </html> 
```

动作类-->

```
 import java.util.*;
 public class saveFormAction extends ActionSupport{

private static final long serialVersionUID = 1L;
private Date sDate;
    private Date eDate;
    public Date getsDate() {
    return sDate;
}

public void setsDate(Date sDate) {
    this.sDate = sDate;
}

public Date geteDate() {
    return eDate;
}

public void seteDate(Date eDate) {
    this.eDate = eDate;
}
    public String saveForm() throws SQLException{           
    Connection con=DBConnect.makeConnection();
    PreparedStatement pst=con.prepareStatement("INSERT INTO saveForm(Start_ON,  
    Expire_On) values(?,?)");
    pst.setDate(1, sDate);
    pst.setDate(2, eDate);
    int i=0;
    i=pst.executeUpdate();
    if(i>0){
        return SUCCESS; 
    }
    return ERROR;
   }
   } 
```

MySQL 表-->

```
 CREATE TABLE saveform(start_on DATE, Expire_On DATE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:57:09.713

`2013-03-27T00:00:00+11:00`Datetimepicker 以您使用时的 格式为您提供价值，`private String Date`但您正在使用 `private Date sDate`导致类型 mismacth 的问题。要解决此问题，需要从 datetimepicker 进行类型转换，`java.util.Date format`您可以通过这种方式进行

```
String obj = "2013-03-27T00:00:00+11:00";
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy");
        try {
            SimpleDateFormat parseFormatter = new SimpleDateFormat("yyyy-MM-dd");
            //SimpleDateFormat dt = new SimpleDateFormat("yyyyy-mm-dd hh:mm:ss+hh:mm"); 
            Date date = parseFormatter.parse(obj);

            String formattedDate = formatter.format(date);
            System.out.println(formattedDate);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:33:35.403

我更正了我的 getter 和 setter，但在以下几行中出现了另一个错误-->

```
pst.setDate(1, sDate);
pst.setDate(2, eDate); 
```

我用以下代码替换了上面的代码行-->

```
pst.setDate(1, new java.sql.Date(sDate.getTime()));
pst.setDate(2, new java.sql.Date(eDate.getTime())); 
```

# sql - 带有 Datediff 和 DatePart 的案例语句

> ID：15197689
> 
> 赞同：0
> 
> 时间：2013-03-04T08:52:29.423
> 
> 标签：sql, tsql

有人可以帮忙做一个案例陈述吗，我需要的是要显示的查询如下。我知道有一些方法可以更轻松地做到这一点，但我只需要案例陈述方面的帮助。

--如果当前月份“小于”DOB 月，则从总年数中取“1”给我 41。-如果当前月份“大于”DOB 月，则年龄是正确的。--但是，如果当前月份与 DOB 月份“相等”，那么我们需要进入日级别以获得正确的年龄。

```
Set @DOB = '01 November 1971'
Set @Today = GETDATE()

SELECT Datediff(Year,@DOB,@Today) AS Years, 
Datepart(Month,@DOB) As DOB_Month, 
Datepart(Day, @DOB) as DOB_Day,
DatePart(Month, @Today) As Current_Month, 
Datepart(Day,@Today) AS Current_Day 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:21:48.547

试试这个 ：

```
DECLARE @DOB DATE= '01 November 1971'
DECLARE @TODAY DATE = GETDATE()

SELECT CASE 
WHEN DATEPART(MONTH, @TODAY) < DATEPART(MONTH,@DOB) THEN DATEDIFF(YEAR,@DOB,@TODAY) - 1
WHEN DATEPART(MONTH, @TODAY) > DATEPART(MONTH,@DOB) THEN DATEDIFF(YEAR,@DOB,@TODAY)
ELSE
    CASE 
         WHEN DATEPART(DAY, @TODAY) < DATEPART(DAY,@DOB) THEN DATEDIFF(YEAR,@DOB,@TODAY) - 1
         ELSE DATEDIFF(YEAR,@DOB,@TODAY)  
    END       
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:12:54.173

你可以试试这个：

```
case 
    when DatePart(Month, @Today)  > Datepart(Month,@DOB) then Datediff(Year,@DOB,@Today) 
    when DatePart(Month, @Today)  < Datepart(Month,@DOB) then (Datediff(Year,@DOB,@Today) - 1)
    when DatePart(Month, @Today)  = Datepart(Month,@DOB) then 
        case 
            when DatePart(Day, @Today)  >= Datepart(Day,@DOB) then (Datediff(Year,@DOB,@Today) )
            when DatePart(Day, @Today)  < Datepart(Day,@DOB) then (Datediff(Year,@DOB,@Today) - 1 )
        end
end as AgeCompleted, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:51:20.857

```
declare @DOB date = '19680411'
select datediff(year, @DOB, getdate())- case when month(@DOB)*32 + day(@DOB) > 
month(getdate()) * 32 + day(getdate()) then 1 else 0 end 
```

# php - 从命令行拒绝 php 的权限

> ID：15197695
> 
> 赞同：0
> 
> 时间：2013-03-04T08:52:47.877
> 
> 标签：php, phpexcel

我正在尝试使用 crontab 运行脚本，但即使从命令行也无法使其工作。该脚本在浏览器中运行良好，并`reports/`在`apache`. 脚本文件归我所有：`john`.

当我尝试从命令行运行脚本时，我收到以下警告，并且不会创建 excel 文件。我已经尝试过完整的路径，但我得到了相同的结果。

这是我尝试从命令行运行脚本后得到的

```
public_html]$ php include/tests/mailme.php

PHP Warning:  fopen(reports/4-March.xls): failed to open stream: Permission denied in /home/john/public_html/PHPExcel/Shared/OLE/PPS/Root.php on line 90

Warning: fopen(reports/4-March.xls): failed to open stream: Permission denied in /home/john/public_html/PHPExcel/Shared/OLE/PPS/Root.php on line 90
PHP Fatal error:  Uncaught exception 'Exception' with message 'Can't open reports/4-March.xls. It may be in use or protected.' in /home/john/public_html/PHPExcel/Shared/OLE/PPS/Root.php:93
Stack trace:
#0 /home/john/public_html/PHPExcel/Writer/Excel5.php(233):   PHPExcel_Shared_OLE_PPS_Root->save('reports/...')
#1 /home/john/public_html/include/generate_daily_excel.inc(401): PHPExcel_Writer_Excel5->save('reports/...')
#2 /home/john/public_html/include/tests/mailme.php(41): generateDailyExcel('04-02-2013')
#3 {main}
 thrown in /home/john/public_html/PHPExcel/Shared/OLE/PPS/Root.php on line 93

Fatal error: Uncaught exception 'Exception' with message 'Can't open reports/4-March.xls. It may be in use or protected.' in /home/john/public_html/PHPExcel/Shared/OLE/PPS/Root.php:93
Stack trace:
#0 /home/john/public_html/PHPExcel/Writer/Excel5.php(233): PHPExcel_Shared_OLE_PPS_Root->save('reports/...')
#1 /home/john/public_html/include/generate_daily_excel.inc(401): PHPExcel_Writer_Excel5->save('reports/...')
#2 /home/john/public_html/include/tests/mailme.php(41): generateDailyExcel('04-02-2013')
#3 {main}
  thrown in /home/john/public_html/PHPExcel/Shared/OLE/PPS/Root.php on line 93 
```

我假设如果我更改 的所有者`reports`，将不允许保存浏览器版本。我是 linux 和权利的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:59:37.847

当您从命令行运行 php 代码时。该脚本以您的用户权限运行，而不是 www-data 用户权限。

您应该以 root 身份运行脚本（不推荐），或者更改文件权限：

```
 sudo chown yourUser:www-data file
  sudo chmod 664 file 
```

您应该对目录执行几乎相同的操作：

```
 sudo chown yourUser:www-data dir
  sudo chmod 775 dir 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:00:18.807

该错误非常明确地为您列出：“无法打开流：权限被拒绝”。当您从命令行运行它时，您是用户“john”（我假设来自您的主路径）。用户“john”是否有权写入报告目录？

实际报告目录的权限是什么？

```
ls -al /home/john/public_html/reports 
```

# ios - 将 NSArray 从表的 DidSelectRow 传递到另一个 UITableview

> ID：15197700
> 
> 赞同：0
> 
> 时间：2013-03-04T08:52:56.953
> 
> 标签：ios, uitableview

我正在尝试从一个表中传递一个数组，并将其填充到另一个表中。父表放在一个`UINavigationController`说“ **mainNavig** ”上。子表放在另一个`ViewController`名为“ **SongsofAlbum** ”的表中。我`didSelectRowAtIndexPath`的父表如下,

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{   
    albumName = [eliminateDupe objectAtIndex:indexPath.row];   
    temp = [dictforalbum allKeysForObject:albumName ];
    songs = [NSMutableArray arrayWithCapacity:[temp count]];
    for (NSString *filename in temp) {
        [songs addObject:[[filename lastPathComponent] stringByDeletingPathExtension]];
    }
      NSLog(@"songs are %@",songs);    
    songObj = [[SongsofAlbum alloc]initWithNibName:@"SongsofAlbum" bundle:nil];
    [mainNavig pushViewController:songObj animated:YES];
    songObj.albumname = albumName;
    songObj.songArray = songs;
    NSLog(@"the song object array is %@ ",songObj.songArray)    
} 
```

songObj.songArray 的 nslog 返回上述方法中的数据。但我面临的问题是，当我在子视图控制器中调用此 songArray 时，它返回 NULL 。我什至对这些数组进行了属性合成。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:59:58.487

> 但是我面临的问题是，当我在子视图控制器中调用这个 songArray 时，它返回 NULL 。我什至对这些数组进行了属性合成。

在其他 ViewController 中，您正在创建此类的新实例。新实例将为 NULL。

您不需要创建新实例，因为您需要从那里使用同一个对象的值。

您可以通过以下方式执行此操作：[如何在子视图中制作按钮以更新其父视图中的信息？](https://stackoverflow.com/questions/15182175/how-to-make-button-in-child-view-to-update-information-in-its-parent-view/15182200#15182200)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:10:20.713

您可以在 AppDelegate 中获取您的歌曲数组，然后分配 songObj.songArray = song 您可以在 SongsofAlbum 类的 viewDidLoad 中分配它，例如

```
AppDelegate *app;

- (void)viewDidLoad
{

    [super viewDidLoad];

    app=(AppDelegate *)[[UIApplication sharedApplication]delegate];

    songarray= [[NSMutableArray alloc]initWithArray:app.songs];
} 
```

希望这会奏效。

# c# - 筛选操作后选择网格中可见行中的第一行

> ID：15197707
> 
> 赞同：0
> 
> 时间：2013-03-04T08:53:23.190
> 
> 标签：c#, winforms, datagridview

我想在过滤操作后选择网格中可见行中的第一行

我尝试按照以下帖子中的代码进行操作，但它不满足当前单元格的条件...

[DataGridView：当MultiSelect为真时如何选择当前行中的第一个单元格](https://stackoverflow.com/questions/787743/datagridview-how-to-select-first-cell-in-current-row-when-multiselect-is-true)

我尝试了以下代码，但它不起作用

1：

```
if (grdGLSearch.Rows.GetRowCount(DataGridViewElementStates.Visible) > 0)
   grdGLSearch.Rows[0].Cells[0].Selected  = true; 
```

或 2：

```
if (grdGLSearch.Rows.GetRowCount(DataGridViewElementStates.Visible) > 0)
   foreach (DataGridViewCell cell in grdGLSearch.Rows[0].Cells)
   {
      cell.Selected = true;
      return;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-15T16:15:31.833

尝试这个：

```
foreach (DataGridViewRow item in grdGLSearch.Rows)
            {
                if (item.Visible)
                {
                    item.Selected = true;
                    break;
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:19:27.283

尝试这个

if (grdGLSearch.Rows.GetRowCount(DataGridViewElementStates.Visible) > 0)

```
 grdGLSearch.Select(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:21:07.053

您可以使用 Property **SelectionMode**来选择**FullRowSelect**。

使用本准则

```
grdGLSearch.Rows[0].Selected = true; 
```

# java - 无法将 JMenuBar 添加到扩展的 JFrame

> ID：15197716
> 
> 赞同：1
> 
> 时间：2013-03-04T08:53:50.840
> 
> 标签：java, swing, jframe, menubar

我的`Main`课程扩展`JFrame`了，由于某种原因，我无法`MenuBar`正确显示我的和项目。有没有添加菜单栏的特殊方法？

```
public class Main extends JFrame
{
// DRIVER
public static void main(String[] args) 
{
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Main window = new Main();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

}

private JMenuBar menuBar; 

private JMenu menu,
          menuFile;

private JMenuItem menuItemNew,
              menuItemExit;
...

// CONSTRUCTOR
public Main()
{

    initializeWindow();
    initializeMenu();
}

private void initializeWindow()
{
    setTitle(TITLE + " " + VERSION);
    setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    setBackground(Color.DARK_GRAY);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    backgroundColor = new GradientBackground(WINDOW_WIDTH, WINDOW_HEIGHT);
}

private void initializeMenu()
{
    // Menubar
    menuBar = new JMenuBar();
    menuBar.setBounds(0, 0, WINDOW_WIDTH, 72);
    menuBar.setBackground(Color.LIGHT_GRAY);
    menuBar.setVisible(true);
    setJMenuBar(menuBar);

    // Menu title
    menu = new JMenu();
    menu.setForeground(Color.BLACK);
    menuBar.add(menu);

    // File Option
    menuFile = new JMenu("FILE");
    menuFile.setForeground(Color.BLACK);
    menuFile.setBackground(Color.DARK_GRAY);
    menuBar.add(menuFile);

    // New File
    menuItemNew = new JMenuItem("New");
    menuItemNew.setForeground(Color.BLACK);
    menuItemNew.setBackground(Color.DARK_GRAY);
    menuFile.add(menuItemNew);

    // New File
    menuItemExit = new JMenuItem("Exit");
    menuItemExit.setForeground(Color.BLACK);
    menuItemExit.setBackground(Color.DARK_GRAY);
    menuItemExit.setEnabled(true);
    menuFile.add(menuItemExit);

    getContentPane().add(menuBar);
} // END initializeMenu() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:56:58.453

*   我认为您正在寻找[JFrame.setMenuBar](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setMenuBar%28java.awt.MenuBar%29)而不是`add(JMenuBar)`

*   `getContentPane()`Java 5 和更新版本不需要

*   不要扩展`JFrame`，将其创建`Object`为`local variable`

# sql - 带有索引视图的 SQL EAV 结构

> ID：15197725
> 
> 赞同：2
> 
> 时间：2013-03-04T08:54:31.313
> 
> 标签：sql, sql-server, indexing, entity-attribute-value, sql-view

我正在开发一个通用文档工作流系统，每个文档具有不同的属性，但它们共享相同的大纲并经历相同的工作流。

因此，不是为每种新文档类型创建一个表，而是经过一些研究和努力，我决定使用 EAV 结构来处理文档属性，我知道它们的缺点，但我认为我没有其他方便的方法来实现这一点，我是我吗？！！

[无论如何，我使用了 EAV 结构http://eav.codeplex.com/](http://eav.codeplex.com/)的 codeplax 示例，他们为数据库中的每个 EAV“对象”创建一个视图，它可以作为普通表轻松查询。

我决定走得更远，为视图编制索引，这样我就可以获得性能，问题就来了：

*   方案：通过

*   左连接：通过

*   MIN 聚合函数：无法通过！

无论如何我可以索引视图或获取索引结果！？？

最后一个视图查询是：

```
 CREATE VIEW [dbo].[vComputer1]
    WITH SCHEMABINDING 
    AS
    SELECT       
O.ObjectID, MIN(O.Name) AS Name, 
MIN(CASE WHEN V.AttributeID = 4 THEN V.Value ELSE NULL END) AS Make, 
MIN(CASE WHEN V.AttributeID = 5 THEN V.Value ELSE NULL END) AS  Model, 
MIN(CASE WHEN V.AttributeID = 6 THEN V.Value ELSE NULL END) AS Type,  
MIN(CASE WHEN V.AttributeID = 7 THEN V.Value ELSE NULL END) AS CPU, 
MIN(CASE WHEN V.AttributeID = 8 THEN V.Value ELSE NULL END) AS Drive,  
MIN(CASE WHEN V.AttributeID = 9 THEN V.Value ELSE NULL END) AS Video, 
MIN(CONVERT(INT, CASE WHEN V.AttributeID = 10 THEN V.Value ELSE NULL END))  AS RAM,
 MIN(CASE WHEN V.AttributeID = 11 THEN V.Value ELSE NULL END) AS Optical,
 MIN(CASE WHEN V.AttributeID = 12 THEN V.Value ELSE NULL END) AS Battery,
 MIN(CASE WHEN V.AttributeID = 13 THEN V.Value ELSE NULL END) AS Screen, 
 MIN(CASE WHEN V.AttributeID = 14 THEN V.Value ELSE NULL END) AS OS,
 MIN(CASE WHEN V.AttributeID = 15 THEN V.Value ELSE NULL END) AS PurchaseDate
    FROM            dbo.Object AS O INNER JOIN
                             dbo.Value AS V ON ISNULL(V.ObjectID, 1) = O.ObjectID INNER JOIN
                             dbo.Category AS C ON ISNULL(C.CategoryID, 2) = O.CategoryID
    WHERE        (C.Name = 'Computer')
    GROUP BY O.ObjectID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:59:40.373

First thing you need to do is read [Best Practices for Semantic Data Modeling for Performance and Scalability](http://sqlcat.com/sqlcat/b/whitepapers/archive/2008/09/03/best-practices-for-semantic-data-modeling-for-performance-and-scalability.aspx). There are **many** traps in the path you choose.

As for indexed views, the restrictions are documented at [Creating Indexed Views](http://msdn.microsoft.com/en-us/library/ms191432.aspx), where `MIN` and `MAX` are very explicitly forbidden. The reason why is explained in [Why can't indexed views have a MAX() aggregate?](https://stackoverflow.com/a/2134890/105929)

# joomla2.5 - Joomla 核心 SEF 的 Jomsocial 个人资料问题

> ID：15197727
> 
> 赞同：0
> 
> 时间：2013-03-04T08:54:37.503
> 
> 标签：joomla2.5, profile, joomla-sef-urls, jomsocial

*   我对 JOMSOCIAL 和 Joomla 核心 SEF 有一个奇怪的问题。
    *   一旦我启用了对 Jomsocial 个人资料造成麻烦的搜索引擎友好 URL
    *   即使我点击 jomsocial 菜单栏中的照片、视频、群组，它也只会加载 jomsocial 个人资料页面。

如果我禁用搜索引擎友好 URL，此问题将得到解决。但我想使用搜索引擎友好的 URL。

这是该网站的网址：

[http://poolavadi.com/home/ta/account/myaccount.html](http://poolavadi.com/home/ta/account/myaccount.html)

登录信息：

用户名：测试

通过：测试@123

请在登录后使用 url 转到问题页面，因为整个网站都使用我的语言。我只用英语输入了 jomsocial。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T03:37:32.910

The issue above can be fixed by going to the sef404 configuration screen and unchecking optimization. Depending on your own setup you can uncheck other options as well. Also be sure to check your 404 manager within sef404 and make sure there are no duplicate links. If so make sure the id matches the menu id . Assuming you understand what matching your menu id to correct option in 404 manager.

# sql - 创建具有引用另一个表的外键的表

> ID：15197728
> 
> 赞同：0
> 
> 时间：2013-03-04T08:54:40.280
> 
> 标签：sql, pgadmin

我正在使用 PGAdminIII 数据库。

我有一个名为**STOCKREGISTER**的表，其中包含由三个字段组成的复合主键，即**stockregisterId、applicationId 和 date**。

我必须创建另一个表**STOCK**，它有一个引用 STOCKREGISTER 的字段**stockregisterId**的**外键**字段。如果我尝试创建**STOCK**表，则会显示一条错误消息。错误消息是**“引用表没有唯一的约束匹配键STOCKREGISTER”。**下一步我必须采取什么步骤

第一张桌子

```
CREATE TABLE stock_register
(
  stock_register_id bigint NOT NULL,
  application_id bigserial NOT NULL,
  production_date date NOT NULL,
  opening_bal bigint DEFAULT 0,
  quantity_produced bigint,
  total_quantity bigint 
  CONSTRAINT primarykey PRIMARY KEY (stock_register_id, application_id, production_date),
  CONSTRAINT "foreignKey" FOREIGN KEY (application_id)
      REFERENCES application (application_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

下面是第二张表。这里我不能将 stock_register_id**作为**外键

```
 CREATE TABLE Stock
(
  stock_id bigint NOT NULL,
  stock_register_id bigint,
  dimension bigserial NOT NULL,
  CONSTRAINT "stockid" PRIMARY KEY (stock_id)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T10:24:43.680

```
CREATE TABLE Stock
(
stock_id bigint NOT NULL,
stock_register_id bigint,
dimension bigserial NOT NULL,
CONSTRAINT primaryKey PRIMARY KEY (stock_id),
CONSTRAINT foreignKey FOREIGN KEY(stock_register_id)
REFERENCES stock_register (stock_register_id)
) 
```

这应该是你需要的一切。在使用外键时，您还必须确保数据库表引擎、排序规则和字符集匹配。

对于唯一约束问题，您在表中的`stock_register_id`PK似乎没有问题。`stock_register`根据错误消息中的名称 STOCKREGISTER，我怀疑它`stock_register`在您的第二个 Create 语句中没有找到该表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:31:22.827

我想语法应该是：

```
CREATE TABLE Stock
(
  stock_id bigint NOT NULL,
  stock_register_id bigint,
  dimension bigserial NOT NULL,
  CONSTRAINT "stockid"
    FOREIGN KEY (stock_id)
    REFERENCES stock_register (stock_register_id) 
) 
```

# php - 学说属性映射

> ID：15197729
> 
> 赞同：0
> 
> 时间：2013-03-04T08:54:43.150
> 
> 标签：php, symfony, doctrine-orm

我刚开始使用 symfony 和教义。我有一个简单的实体，它有一个属性不与数据库绑定。此属性应包含 xml 文件的内容（我想制作 xml 文件，当学说将行添加到数据库时）。

```
/**
 * Layouts
 *
 * @ORM\Table(name="layouts")
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks()
 */
class Layouts
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="SEQUENCE")
     * @ORM\SequenceGenerator(sequenceName="layouts_id_seq", allocationSize=1, initialValue=1)
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255, nullable=false)
     */
    private $name;

    /**
     * ???????
     */
    private $template_body;
    ...
} 
```

如何描述`$template_body`财产？没有离开属性描述，我遇到了一个问题——当我在表单中编辑这个属性时，学说不会导致 preUpdate 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:01:15.560

你可以这样做，我只需在你的类中标记一个 PreUpdate 方法，然后开始处理你的 $template_body 变量。

请更换

```
* @ORM\HasLifecycleCallbacks() 
```

到

```
* @ORM\HasLifecycleCallbacks 
```

并创建一个这样的功能..

```
/**
 * @PreUpdate
 */
public function myUpdateFunction()
{
   // Do stuff
} 
```

# java - 特定特殊字符的组合导致错误

> ID：15197731
> 
> 赞同：0
> 
> 时间：2013-03-04T08:54:55.187
> 
> 标签：java, android, json

当我将 TextEdit 数据作为 JSON 发送时，数据作为 `";`应用程序的组合每次都会失败。详细来说，如果我输入的用户名不是密码，`";`则生成的 JSON 文件如下所示：-

```
{"UserName":"qa@1.com","Password":"\";"} 
```

我搜索了很多，我能理解的是结果 JSON 数据破坏了导致抛出默认异常的语法。`URLEncoder.encode()`我试图通过使用方法摆脱特殊符号。但现在问题在于解码。任何步骤的任何帮助都将非常感激。

日志猫：

```
I/SW_HttpClient(448): sending post: {"UserName":"qa@1.com","Password":"\";"}
I/SW_HttpClient(448): HTTPResponse received in [2326ms]
I/SW_HttpClient(448): stream returned: <!DOCTYPE html PUBLIC ---- AN HTML PAGE.... A DEFAULT HANDLER> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:09:56.113

您在问题中提供的 JSON 是有效的。

JSON 规范**要求**字符串中的双引号用反斜杠转义。在此处阅读语法图 - [http://www.json.org/](http://www.json.org/)。

如果在解析该 JSON 时出现异常，则说明解析器有问题或异常意味着其他内容。

* * *

> 我搜索了很多，我能理解的是生成的 JSON 数据违反了语法

你的理解是不正确的。

> 我试图通过使用 URLEncoder.encode() 方法摆脱特殊符号。

这是一个错误，只会让事情变得更糟：

1.  反斜杠应该在那里。
2.  服务器或处理 JSON 的任何东西都不会期望从完全不同的标准中随机转义。

> 但现在问题在于解码。

确切地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:26:22.177

以下提供的 JSON 可以通过 GSON 库使用以下代码进行解析

```
private String sampledata = "{\"UserName\":\"qa@1.com\",\"Password\":\"\\\";\"}";

Gson g = new Gson();
g.fromJson(sampledata, sample.class);

public class sample {

    public String UserName;
    public String Password;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:20:39.347

为了解码文本，我得到了解决方案..

```
 URLDecoder.decode(String, String); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T08:59:53.007

嗨试试下面的代码

```
String EMPLOYEE_SERVICE_URI = Utils.authenticate+"?UserName="+uid+"&Email="+eid+"&Password="+URLEncoder.encode(pwd,"UTF-8"); 
```

# c++ - 全局处理程序调用

> ID：15197739
> 
> 赞同：0
> 
> 时间：2013-03-04T08:55:40.097
> 
> 标签：c++, function, memory, allocation

我重载了新函数，但不幸的是，我从来没有能够执行全局处理程序来请求我的编译器上的更多内存访问。如果我们调用全局处理程序来请求更多内存，我也不明白下面的代码片段是如何分配给 P 的。

如果有人能对此有所了解，我将不胜感激

```
void * Pool:: operator new ( size_t size ) throw( const char *)
{
    int n=0;
    while(1)
    {
        void *p = malloc (100000000L);
        if(p==0)
        {
            new_handler ghd= set_new_handler(0);//deinstall curent handler
            set_new_handler(ghd);// install global handler for more memory access
            if(ghd)
                (*ghd)();
            else 
                throw "out of memory exception";
        }
        else
        {
            return p;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:20:06.543

这里有两件事要讨论，第一是使用**new_handler**，第二是重载**operator new**。

# set_new_handler()

当你想使用**new_handler**时，你必须注册它。这通常是进入**main()**后要做的第一件事。处理程序也应由您提供。

```
#include <iostream>
#include <new>

void noMemory() throw()
{
  std::cout << "no memory" << std::endl;
  exit(-1);
}

int main()
{
  set_new_handler(noMemory);
  // this will probably fail and noMemory() will be called
  char *c = new char[100000000L];
  std::cout << "end" << std::endl;
} 
```

当无法分配内存时，将调用您注册的处理程序，并且您有机会释放一些内存。当处理程序返回时，**operator new**将再次尝试分配您请求的内存量。

# 新操作员

默认**运算符 new**的结构与您介绍的类似。从**new_handler**的角度来看，重要的部分是**while(1)**循环，因为它负责在调用**new_handler**之后尝试获取内存。

**这个while(1)**循环有两种方法：

*   得到一个有效的指针
*   抛出异常

当你提供一个**new_handler**时，你必须牢记这一点，因为如果你不能做任何事情来释放内存，你应该卸载处理程序（或终止或抛出异常），否则你可能会陷入无限循环。

我想在你的代码中省略参数大小只是为了测试目的。

另请参阅**Scott Meyers 的 Effective C++ Item 7**了解详情。**由于 operator new 即使参数 size = 0 也必须返回一个有效指针，所以在operator new**中要做的第一件事应该是将 size 覆盖为 1，以防用户想要分配 0 个字节。这个技巧很简单而且相当有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:40:01.740

要产生任何效果，程序的某些其他部分必须以前安装了全局处理程序。该处理程序还必须在调用处理程序时释放某种内存（可能是一些可以丢弃的缓冲区或缓存）。

默认的 new_handler 只是一个空指针，因此您的代码很可能最终会抛出异常。

此外，我会抛出一个`bad_alloc`异常以与其他`operator new`重载保持一致。

# java - 类型组的比较器

> ID：15197740
> 
> 赞同：0
> 
> 时间：2013-03-04T08:55:42.977
> 
> 标签：java, comparator

我想对对象数组进行排序。每个对象都有`getType()`返回字符串对象类型的方法。

我想根据类型对我的数组进行排序，比如优先级。

例子：

```
Input { A, F, Z, G, E, D, C }

If(type == A or B or C or D) top 
If(type == E) second
If(type == F or G) third
If(differet type) last

Output: { A, C, D, E, F, G, Z } 
```

我的比较器应该是什么样子？

如果我的问题说得不够清楚，请写评论，我会尝试更简要地解释不清楚的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:12:26.343

您可以声明一个优先级哈希映射：

```
private static final HashMap<String,Integer> PRIORITIES = new HashMap<String, Integer>();
static{
    PRIORITIES.put("A", 1);
    PRIORITIES.put("B", 1);
    PRIORITIES.put("C", 1);
    PRIORITIES.put("D", 1);
    PRIORITIES.put("E", 2);
    PRIORITIES.put("F", 2);
    PRIORITIES.put("G", 3);
} 
```

然后实现`compare`你的方法`Comparator`：

```
private int getPriority(CustomClass obj) {
    if(obj!=null&&PRIORITIES.containsKey(obj.getType())) {
        priority1 = PRIORITIES.get(obj.getType());
    } else {
        priority1 = Integer.MAX_VALUE;
    }
}

@Override
public int compare(CustomClass o1, CustomClass o2) {
    int priority1,priority2;
    priority1 = getPriority(o1);
    priority2 = getPriority(o2);
    return priority1==priority2 ? 0 : (priority1<priority2 ? -1 : 1);
} 
```

**更新：**更清洁的方法是在您的基类（`getType`声明的位置）中定义哈希图并实现`getPriority`方法：

```
public int getPriority() {
    return PRIORITIES.containsKey(getType()) ? PRIORITIES.get(getType()) : Integer.MAX_VALUE;
} 
```

那么`Comparator`很明显：

```
@Override
public int compare(CustomClass o1, CustomClass o2) {
    int priority1,priority2;
    priority1 = o1==null ? Integer.MAX_VALUE : o1.getPriority();
    priority2 = o2==null ? Integer.MAX_VALUE : o2.getPriority();
    return priority1==priority2 ? 0 : (priority1<priority2 ? -1 : 1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:12:48.570

我可能会做这样的事情：

```
class Comparer implements Comparator<YourType>
{
   @Override
   public int compare(YourType o1, YourType o2)
   {
      return Integer.compare(getRank(o1), getRank(o2));
      // Pre-Java 7
      //Integer v1 = getRank(o1);
      //return v1.compareTo(getRank(o2));
   }

   int getRank(YourType o)
   {
      switch (o.getType())
      {
         case "A": case "B": case "C": case "D":
            return 1;
         case "E":
            return 2;
         case "F": case "G":
            return 3;
         default:
            return 4;
      }
   }
} 
```

然后：

```
YourType[] arr = ...;
Arrays.sort(arr, new Comparer()); 
```

以上仅适用于 Java 7 及更高版本，因为`switch`在`String`Java 7 之前不支持 on。

如果您没有运行 Java 7，则必须使用 if 语句而不是`switch`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:12:27.997

有你的对象`Comparable<ElementType>`接口（因为它们都是同一个类（让我们说`ElementType` 和调用`Arrays.sort(myArray)`。如果你想每次使用不同的不同顺序对对象进行排序，那么你应该创建一个`Comparator`对象

[你可以在这里](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)看到很好的例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:30:09.003

您还可以考虑使用[Guava 的](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html) `Ordering`类为您对输入进行排序。如果您正在处理的对象具有“自然”顺序的概念，那么您可以`Ordering<Input>.natural`在实例化中执行类似或实现自己的比较器的操作：

```
Ordering<Input> getInputOrder = new Ordering<Input>() {
 public int compare(Input A, Input B) {
   return A.comparableMember > B.comparableMember
 }
}; 
```

# php - 使用查询帖子连接表

> ID：15197747
> 
> 赞同：1
> 
> 时间：2013-03-04T08:56:32.780
> 
> 标签：php, mysql, wordpress, join

我有一张桌子：

```
userbookmark
contants fields 
1-id
2- user_id
3- post_id 
```

我有一个书签系统，当用户按下“书签”时，它应该插入以下信息：

```
1-id  ( autoinc..)
2- user_id ( 1 for  example  )
3- post_id ( 1 for example ) 
```

我想要做的是编写一个查询以显示带有上表的书签帖子。我想写一个 JOIN 但我不知道如何用 Wordpress 的语法来做。

这是我尝试过的：

```
<?php
     $args = array(
                   'cat' => '1',
                   'author' => '1',
                   'post_type' => 'post',
                   'posts_per_page' => 6,
                   'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1),
                   );

    query_posts($args);

while (have_posts()) : the_post();
 /* Do whatever you want to do for every page... */
?>
    <a href=""><?php the_title();?></a><br />

      <?php

endwhile;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:24:06.517

你在这里有一些选择

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

您可以尝试过滤 add_filter('posts_join', 'your_function');

[http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_join](http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_join)

# c# - 提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）

> ID：15197749
> 
> 赞同：0
> 
> 时间：2013-03-04T08:56:39.667
> 
> 标签：c#, localhost

我正在 Visual Studio 2012 中开发一个 Web 应用程序。我已经将一个名为 Database1.mdf 的数据库文件添加到 App_Data 文件夹中，并且我给出了以下连接字符串

```
Data Source=(LocalDB)\v11.0;AttachDbFilename="E:\asp.net mvc\storage\storage\App_Data\Database1.mdf";Integrated Security=True 
```

之后我已经编写了插入数据的代码，但是我收到了类似的错误

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

连接字符串有错误吗？请在 htis 中帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:04:37.917

通常，对我来说，这表明 SQL Server 没有正确配置为接收远程调用。有三件事要检查。

1.  您的服务器实例已正确命名并且您有权访问它
2.  您已配置为接收远程连接
3.  该 SQL 服务器在您要使用的协议上打开

要检查第二个，打开 SQL Management Studio 并选择服务器上的属性。然后在“连接”下检查“远程服务器连接”是否已启用。

要检查第三个，打开 SQL Server 配置管理器并确保启用“客户端协议”TCP/IP 以及命名管道（取决于您的网络设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T02:00:22.303

你的连接字符串应该这样写：

```
 connectionString="DataSource=.\SQLEXPRESS; InitialCatalog=Database; AttachDBFilename=|DataDirectory|\Database.mdf; Integrated Security=SSPI;" 
```

# c# - c#.net 到 mysql 数据库连接的连接字符串

> ID：15197753
> 
> 赞同：-3
> 
> 时间：2013-03-04T08:56:54.307
> 
> 标签：c#, mysql

有一个mysql数据库存储在我的服务器IP：50.62.82.45，数据库名称是：detail_admin，用户ID是：welcome，密码是：你好，那么我将使用什么连接字符串访问服务器数据库并触发查询mysql的

我已经尝试过了，但它不起作用

```
server = "50.62.82.45";
            database = "detail_admin";
            uid = "welcome";
            password = "hello";
            string connectionString;
            connectionString = "SERVER=" + server + ";" + "DATABASE=" + database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

            connection = new MySqlConnection(connectionString); 
```

(mysql-connector-net-6.0.7-src.zip) 这个驱动我用于连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:23:04.047

```
string myConnectionString = "SERVER=50.62.82.38;" +
                            "DATABASE=admin_urja;" +
                            "UID=welcome" +
                            "PASSWORD=hello;";
MySqlConnection connection = new MySqlConnection(myConnectionString); 
```

# resources - 为什么 IDEA 复制我的资源这么慢？

> ID：15197757
> 
> 赞同：0
> 
> 时间：2013-03-04T08:57:00.340
> 
> 标签：resources, intellij-idea

我有两个 Maven 项目，一个很小，另一个很大。

在将 jsp 资源（ctrl + shift + f9）保存和打包到目标目录中时，我遇到了一些性能问题。对于小的，通常在 1 秒左右，但对于较大的，大约是 6 秒。

如何查看编译过程的详细信息？我的主要目标是直接将资源复制到目标目录而不进行任何处理。

我已经提出了一个问题，但有些怀疑这是我的错。

# php - PHP正则表达式匹配一个数字

> ID：15197758
> 
> 赞同：0
> 
> 时间：2013-03-04T08:57:14.847
> 
> 标签：php, regex

我正在尝试`1425`从字符串中提取整数`$123 / 123 - 1425ft² - Some random message`。但是我只能提取`5`而不是`1425`使用下面的代码。

由于不擅长正则表达式，我曾经`*`匹配多个数字。

任何建议出了什么问题？谢谢！

**PHP**

```
$text = '$123 / 123 - 1425ft² - Some random message';
$pattern = '/ ([0-9])*ft²/s';
preg_match($pattern, $text, $matches);

echo '<pre>';
print_r($matches); 
```

**输出**

```
Array
(
    [0] =>  1425ft²
    [1] => 5
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:59:35.687

稍微改变你的模式

`$pattern = '/ ([0-9]*)ft²/';`

或者如果必须至少有一个匹配的号码

`$pattern = '/ ([0-9]+)ft²/';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:00:56.007

```
$text = '$123 / 123 - 1425ft² - Some random message';
$pattern = '/([0-9]+)ft²/s';
preg_match($pattern, $text, $matches);

echo '<pre>';
print_r($matches); 
```

使用上面的代码。我已经测试过了。它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:02:10.750

试试这个 ：

```
$text = '$123 / 123 - 1425ft² - Some random message';
$pattern = '/(?P<number>\d+)ft²/';
preg_match($pattern, $text, $matches);

echo $matches['number']; 
```

# r - 如何将文件 2 中的值替换为 NA 对应于文件 1 中的指定值？

> ID：15197759
> 
> 赞同：0
> 
> 时间：2013-03-04T08:57:24.230
> 
> 标签：r, binary, raster

我有两个具有相同尺寸的二进制文件（光栅）。第一个文件被调用`over` ，第二个文件是`corr`. 我想用`over`大于`NA`0.5`corr`的值替换值。

1.  读取第一个文件：

    ```
    conn <- file("C:\\corr.bin", "rb")
    over <- readBin(conn, numeric(), size=4,  n=1440*720, signed=TRUE)
    y <- t(matrix((data=corr), ncol=720, nrow=1440))## binary
    r1 <- raster(t(matrix((data=over), ncol=720, nrow=1440)))## raster 
    ```

2.  读取第二个文件：

    ```
    conne <- file("C:\\cor06.bin", "rb")
    corr <- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE)
    y1 <- t(matrix((data=corr), ncol=720, nrow=1440))## binary
    r <- raster(t(matrix((data=corr), ncol=720, nrow=1440)))##raster 
    ```

3.  写出结果：

    ```
    to.write = file(paste("/orcomplete.bin", sep=""), "wb")
    writeBin(as.double(results), to.write, size = 4) 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:59:30.733

确切地看到你想要什么是很棘手的，但是呢：

```
over[corr > 0.5] = NA 
```

或更复杂的东西：

```
over[corr < 0.2 | corr > 0.4] = NA 
```

# sql - 在sql查询中选择具有条件的多个表

> ID：15197764
> 
> 赞同：2
> 
> 时间：2013-03-04T08:57:45.767
> 
> 标签：sql, select

第一 表--**产品**表

```
P_ID   P_Name    D_Flag
 37    keyboard    N
 38    mouse       N
 39    hardisk     Y
 40    pendrive    Y
 41    printer     Y
 42    CD-DVD      Y
 43    cardreader  Y 
```

和第二个表 **Product_Detail**表

```
P_ID  P_ID  P_Prize  P_Company  D_Flag
 11    37    600       Intex     N      
 12    38    200       Enter     N
 13    39    1000      XYZ       N
 14    40    200       SONY      Y
 15    41    5000      LG        Y 
```

那么输出应该像--------> **ProductList** Table

```
P_Name      P_Prize   P_Company 
hardisk      --        --
pendrive     200       SONY
printer      5000      LG
CD-DVD       --        --
cardreader   --        -- 
```

**注意**- 因此表 ProductList 包含那些 Product Name(P_Name)、Product Prize(P_Prize) 和 Product Company(P_Company)，其中 Product.D_Flag='Y' 并从 Product_Detail 表中选择 Product_Detail.D_Flag='Y' 的那些字段。否则值应该为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:01:26.917

这应该这样做：

```
SELECT p.p_name, pd.p_prize, pd.p_company
FROM product p
LEFT JOIN product_detail pd ON p.p_id = pd.p_id AND pd.d_flag = 'Y'
WHERE p.d_flag = 'Y' 
```

因此，您正在做的是选择每一行，`product`并且 WHERE 子句将其限制`d_flag`为设置为 Y的行。

然后你是左外连接，这意味着你得到左边的所有行（在产品中）和右边的 product_detail 中的任何交叉点。连接条件与行匹配，但仅与明细表中的`d_flag`'Y' 也匹配。当您否定外部连接时，这不会放在 WHERE 子句中（您不会获得没有连接的行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:53:13.217

```
select p_name,decode(b.d_flag,'N',null,p_prize) p_prize,decode(b.d_flag,'N',null,P_Company) P_Company
from product a,product_detail b
where a.p_id=b.p_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:03:32.643

```
SELECT P.p_name, Case When PL.p_prize is Null Then "--" Else PL.p_prize END, 
       Case When PL.p_company is Null Then "--" ELSE  PL.p_company
  FROM Product P
    LEFT JOIN Product_Detail PL ON P.p_id = PL.p_id AND PL.d_flag = 'Y'
 WHERE P.d_flag = 'Y' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:02:51.757

```
SELECT  a.P_NAME,
        COALESCE(b.P_Prize, '--') Prize,
        COALESCE(b.P_Company, '--') CompanyName
FROM    Product a
        LEFT JOIN product_Detail b
            ON a.P_ID = b.P_ID AND
                a.D_FLAG = 'Y' AND
                b.D_FLAG = 'Y'
-- WHERE additional conditions here 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# ios - 我应该向 ios 开发后台发送 Web 服务调用吗

> ID：15197765
> 
> 赞同：2
> 
> 时间：2013-03-04T08:57:51.180
> 
> 标签：ios, ios5, ios6, dispatch-async

在我的应用程序中，我需要调用 Web 服务来获取数据（http get）。我是一个新的 ios 开发人员，我想知道我是否应该将 http get 调用发送到后台，并将 tableview 重新加载数据带到前台，如下面的代码？谢谢一堆！

```
-(void)updateDataInBackground {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^(void) {

        // hard work/updating here

        // when finished ...
        [self reloadTable];
    });
}

-(void)reloadTable {
       dispatch_async(dispatch_get_main_queue(), ^(void) {
            [myTableView reloadData];
        }); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T09:50:33.527

要获得完美和完整的结果，请使用以下代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        @autoreleasepool {
           //your webservice operations here
        }

    }); 
```

# python - Python 循环同步

> ID：15197766
> 
> 赞同：2
> 
> 时间：2013-03-04T08:58:00.133
> 
> 标签：python

我在一个循环中多次调用外部进程。给你一个伪代码：

```
for i in xrange(1, 100):
    call external proc which inserts a row into a table 
```

这里的问题是，每当调用外部进程时，它都会在单独的线程中运行，这可能需要任何时间来运行。因此，python 将继续执行。这会导致插入遇到行锁并阻止插入。

在以下限制条件下，等待该过程完成的理想方式是什么：

1.  我无法修改外部流程的工作方式。
2.  我知道我可以，但我不想使用 hack，比如 thread.sleep
3.  我无法修改任何数据库设置。

调用外部proc的代码是：

```
def run_query(query, username, password):
    try:
        process = subprocess.Popen( "<path to exe> -u " + username + " -p "+ password +" " + query, 
                                     shell = True,
                                     stdout = subprocess.PIPE,
                                     stderr = subprocess.PIPE )
        result, error = process.communicate()
        if error != '':
             _pretty_error('stderr', error)
    except OSError, error:
        _pretty_error('OSError', str(error))
    return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:15:26.197

根据[`subprocess`](http://docs.python.org/2/library/subprocess.html)文档，您有几个选项：

*   `process.wait()`运行后调用`process = subprocess.Popen(...)`
*   使用`subprocess.call`代替`Popen`
*   使用`subprocess.check_call`代替`Popen`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:14:22.483

您可以尝试启动该过程，例如：

```
process = subprocess.call( ["<path to exe>", "-u", "username", "-p",  password, query], 
                                 shell = False) 
```

这样主进程会一直休眠，直到子进程结束，但你不会得到输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:16:04.403

根据结果​​的外观，一种方法是使用 wait()：

```
process = subprocess.Popen( "<path to exe> -u " + username + " -p "+ password +" " + query, 
                             shell = True,
                             stdout = subprocess.PIPE,
                             stderr = subprocess.PIPE )
retcode = process.wait() 
```

# jquery - JQuery Sortable，如何只允许一个项目的一次实例？

> ID：15197767
> 
> 赞同：1
> 
> 时间：2013-03-04T08:58:00.820
> 
> 标签：jquery, list, jquery-ui-sortable

我正在使用一个项目列表，每个项目都有一个“添加”按钮来生成一个 JQuery 可排序列表。我想锁定该功能，以便某些项目在列表中只能有一个实例，而其他项目可以多次添加。我尝试使用 ColdFusion 在列表阶段添加此锁，但我认为编辑 JQuery 会更有效。这是代码；

```
function presentationAddToAgenda(presentationId) {  

var newAgendaLength = $("#sortable li").length;

    if(presentationId === 1)
    {
    var presentatioName = "Biology";
    }
else if(presentationId === 2)
    {
    var presentatioName = "Microbiology";
    }

   var $li = $('<li id="agendaItem_'+newAgendaLength+'">'+presentatioName+' <select                                                                           
   name="agendaItemTime" id="agendaItemTime"><option>05</option>                         
   <option>10</option><option>15</option></select> <div    
  id="agendaSpeaker"></div> <div id="agendaRemoveItem" onClick="removeAgendaItem(this);">        
   </div></li>');
    $("#sortable").append($li);
    $(function() {         
    $('#sortable li').mousedown(function(){ $(this).addClass('grabbed')});
    $('#sortable li').mouseup(function(){ $(this).removeClass('grabbed')});
     });
$("#sortable").sortable( "refresh" );
$("#sortable").sortable( "refreshPositions" );  
     }; 
```

# c# - 哪个锁语句更好？

> ID：15197773
> 
> 赞同：0
> 
> 时间：2013-03-04T08:58:13.083
> 
> 标签：c#, locking

我有一个包含数据列表的类（例如：列表），类中有可用的方法

1.  更新列表
2.  插入新项目以列出和
3.  从列表中删除任何项目

上面的插入、更新和删除方法是从多个线程调用的。所以我必须提供如下的锁 Object locker = new Object();

```
// Insert method
lock(locker)
{
   // Insert to list
}
// Update method
lock(locker)
{
   // Update the list
} 
```

现在我的问题是哪种锁定方法好，是使用上面的锁定对象还是使用锁定列表的“syncroot”方法如下。请指教。

```
// Insert method
lock(((ICollection)myList).SynRoot)
{
   // Insert to list
}
// Update method
lock(((ICollection)myList).SynRoot)
{
   // Update the list
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:00:58.060

我建议做一些重构和

如果它符合您的要求，请尝试查看[Blocking Collection而不是显式使用 lock](http://msdn.microsoft.com/en-us/library/dd997371.aspx)

# python - Python：将 str 转换为整数

> ID：15197774
> 
> 赞同：0
> 
> 时间：2013-03-04T08:58:19.717
> 
> 标签：python, type-conversion

我是 Python 的新手，我有一个读取文件并将其转换为矩阵的 assginment。我的文件是：

```
n 5
0 -- 3
0 -- 4
1 -- 2
1 -- 3
2 -- 4
3 -- 3 
```

首先，我必须制作一个“5X5”矩阵。我读了5这样的：

```
f = open("graph.txt")
    mylist = f.readlines()
    a = mylist[0][2] 
```

当说它`print a`打印 5。为了制作一个矩阵，我需要将此字符串转换为整数。但是，当我使用`int(a)`函数时，它仍然是一个`str`. 如何将其永久更改为整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:00:33.863

`int`创建一个新值但不改变原来的值。因此，要实际更改值，您必须执行类似的操作

```
list[0][2] = int(list[0][2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:03:47.283

使用`int()`构造函数分配给`a`：

```
a = int(list[0][2]) 
```

请注意，如果字符串无法转换为 int，这将引发异常。

# html - 垂直对齐 div

> ID：15197781
> 
> 赞同：1
> 
> 时间：2013-03-04T08:58:49.143
> 
> 标签：html, css

我想在右 div 的中间垂直对齐左 div。我可以通过使用来做到这一点，`display:table-cell;`但我不能使用`float:left`

这是我正在尝试的：

**HTML：**

```
<div class="wrapper">
    <div class="left"><h1><a href="#"><img src ="img.png" /></a></h1></div>
    <div class="right">Right</div>
</div> 
```

**CSS：**

```
.wrapper{
    overflow: hidden;
    border: 1px solid blue;    
    width: 400px;
}

.left{
    border: 1px solid red;   
    max-width: 200px; 
    max-height: 50px;
    float: left;   
    overflow: hidden;
    display:table-cell;
    vertical-align:middle;
}

img{
    display: block;
}

.right{
    width: 200px;
    height: 200px;
    float: right;
    border: 1px solid green;    
} 
```

**演示：http:** [//jsfiddle.net/fmpLt/](http://jsfiddle.net/fmpLt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:14:27.410

尽管我不清楚您的期望，但我尝试了以下代码。检查它是否可以帮助你

添加`display:table`到 .wrapper 然后添加`table-cell`到`.left`

**[演示](http://jsfiddle.net/fmpLt/3/)**

* * *

另一种解决方案`position:absolute`

```
.wrapper{
    overflow: hidden;
    border: 1px solid blue;    
    width: 400px;
   position:relative; background:yellow
}

.left{
    border: 1px solid red;   
    max-width: 200px; 
    max-height: 50px;
    overflow: hidden;   
    position:absolute;
    top:50%; margin-top:-25px
} 
```

**[演示 2](http://jsfiddle.net/fmpLt/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:02:14.187

如果您知道左侧 div 的高度（例如 50 像素），您可以设置一个相对于包装容器和左侧 div 的位置：然后将顶部位置设置为左侧 div 的 50%，margin-top 等于减号高度的 50%。

例如。

```
.wrapper{
    ...
    position:relative;
}

.left{
    ...
    position:relative;
    height:50px;
    top:50%;
    margin-top:-25px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:05:42.933

您可以使用`margin-top`设置为`.right`图像高度的一半小于一半的高度。在这种情况下，那将是`margin-top: 68px`.

# iphone - OCUnit TestCase 的应用程序停止并给出错误消息

> ID：15197787
> 
> 赞同：2
> 
> 时间：2013-03-04T08:59:04.307
> 
> 标签：iphone, ipad

代码来自 ClassMessage 编写：

```
 -(void)showMessage:(Message*) msg
    {
        if( msg == nil )
        {
            return;
        }

    UIAlertView* alertView;
    if(msg.url)
    {
        alertView = [[UIAlertView alloc] initWithTitle:msg.title
                                      message:msg.message
                                      delegate:self
                                      cancelButtonTitle:msg.buttonLabel1
                                      otherButtonTitles:msg.buttonLabel2
                                      , nil];

    }
    else
    {
        alertView = [[UIAlertView alloc] initWithTitle:msg.title
                                         message:msg.message
                                         delegate:self
                                         cancelButtonTitle:msg.buttonLabel1
                                         otherButtonTitles:nil];
    }

    [alertView performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:NO];
} 
```

为上述方法编写单元测试用例！

```
-(void)testShowMessageMessageURL{

    Message *testMessage = [[Message alloc] init];

    testMessage.messageId = 1000 ;
    testMessage.message = @"Error message";
    testMessage.title = @"Error Title";
    testMessage.url = @"http://.……….";
    testMessage.buttonLabel1 = @"OK";
    testMessage.buttonLabel2 = @"Cancel";
    testMessage.buttonLabel2 = nil;

       @try {

ClassMessage *testClass = [[ClassMessage alloc]init];

if(testMessage.url != nil){

STAssertNoThrow([testClass showMessage:testMessage],@"Should Pass ");

}

}
    @catch (NSException *exception) {
        NSLog(@"Exception Name %@, Exception Description %@",[exception name],[exception description]);
        STFail(@"Should not caught Exception");
    }
} 
```

应用程序停止是

```
CoreFoundation`__HALT:
0xa40880:  int3   
0xa40881:  nopw   %cs:(%eax,%eax)

Thread 1: EXC_BreakPoint(code = EXC_i386_BPT,subcode = 0*0) 
```

单击继续程序执行后

我收到错误消息错误消息是：

```
[testClass showMessage:testMessage] raised -[_NSCFType pointSize]: unrecognized selector sent to instance should not throws any exception. 
```

在覆盖我的测试用例时，我确实遇到了这个问题。

有人建议我做错了什么来覆盖我的测试用例吗？@提前致谢

# erlang - 注册内部 ejabberd 模块的正确方法

> ID：15197788
> 
> 赞同：1
> 
> 时间：2013-03-04T08:59:16.850
> 
> 标签：erlang, ejabberd

最近我一直在从事 ejabberd 和内部模块开发。

我想使用 gen_mod + gen_server 行为开发一个内部模块。我的模块有一个基于此的 ejabberd 钩子：http: [//metajack.im/2008/08/28/writing-ejabberd-modules-presence-storms](http://metajack.im/2008/08/28/writing-ejabberd-modules-presence-storms/)

我的 start_link 函数是这样的：

```
start_link(Host, Opts) ->
Proc = gen_mod:get_module_proc(Host, ?PROCNAME),
gen_server:start_link({local, Proc}, ?MODULE, [Host, Opts], []). 
```

哪里 ?PROCNAME 是：

```
-define(PROCNAME, ejabberd_mod_mine) 
```

所以在我的本地主机中它被注册为`ejabberd_mod_mine_localhost`

正如您在我链接的教程中看到的那样，他们使用挂钩来直接解析存在节，但是如果我想将该`From`值与我保存在 gen_server 状态中的值进行比较怎么办？我想过使用 gen_server cast 将数据包传递给它，但问题是函数挂钩在不同的进程中运行，因此我不能使用：

```
gen_server:cast(self(), {filter, Packet}) 
```

我可以使用：

```
gen_server:cast(ejabberd_mod_mine_localhost, {filter, Packet}) 
```

但是我应该硬编码进程的名称吗？如果主机名不同怎么办？我应该只使用模块名称注册我的 gen_server 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:12:25.987

一种常见的模式是使用发送者或接收用户的域（取决于您要执行的操作）。例如 mod_offline（当目标用户离线时将数据包存储在 DB 上）使用目标 JID 来发现它必须在哪个域上运行，例如：

```
gen_mod:get_module_proc(To#jid.lserver, ?PROCNAME) 
```

# android - 在 android 源代码中哪里可以找到 Canvas 的 native_drawBitmap()？

> ID：15197796
> 
> 赞同：2
> 
> 时间：2013-03-04T08:59:41.933
> 
> 标签：android, performance, canvas

`Canvas`我遇到了一个关于`Canvas.drawBitmap()`. 现在我找到了它的java源代码`Canvas`，以及它的成员函数`drawBitmap()`调用`native_drawBitmap`，我想进一步研究`native_drawBitmap`，但是找不到它的源代码。源代码在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:08:00.233

看看[这里](http://searchco.de/codesearch/view/12830122)。搜索`native_drawBitmap`。

干杯

# git - 将 git 升级到 1.8.1.5 失败

> ID：15197797
> 
> 赞同：4
> 
> 时间：2013-03-04T08:59:47.330
> 
> 标签：git, ubuntu, upgrade, libcurl

在 Ubuntu 10.04.4 LTS 上，我已经使用 apt-get install 将 git 升级到 1.8.1.1
现在我下载了 git-1.8.1.5.tar.gz，并且想要构建源来升级 git。
我在 .bashrc 中设置了 $PATH 环境变量

```
export PATH=/usr/local:$PATH 
```

我来源 .bashrc，并且 echo $PATH 显示设置路径 '/usr/local:/'
当我

```
make prefix=/usr/local all doc info 
```

错误来了：

```
In file included from http.c:1:
http.h:6:23: warning: curl/curl.h: no such file or directory
http.h:7:23: warning: curl/easy.h: no such file or directory
In file included from http.c:1:
http.h:46: error: expected specifier-qualifier-list before ‘CURLcode’
http.h:51: error: expected specifier-qualifier-list before ‘CURL’
http.h:97: error: ‘CURL_ERROR_SIZE’ undeclared here (not in a function)
http.h: In function ‘missing__target’:
http.h:102: error: ‘CURLE_FILE_COULDNT_READ_FILE’ undeclared (first use in this function)
http.h:102: error: (Each undeclared identifier is reported only once
http.h:102: error: for each function it appears in.)
http.h:104: error: ‘CURLE_HTTP_NOT_FOUND’ undeclared (first use in this function) 
```

谁能帮我找到答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:24:42.790

要编译`git`，您不仅需要`curl`二进制文件，还需要开发包（我相信它`libcurl-dev`在 Ubuntu 中被称为或类似的东西），以及`zlib` `expat`和`gettext`开发包。要构建文档，您将需要`asccidoc`、`makeinfo`和程序。`docbook2X``dblatex`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T14:30:26.937

冯布兰德是对的（+1），这是对他答案的补充。

在 Red Hat Enterprise Linux Server 6.3 版（圣地亚哥）上，我必须安装一些软件包才能编译`git`1.8.3.3、1.8.3.4 和 1.8.4.rc0 版本：

```
sudo yum install perl-ExtUtils-MakeMaker.x86_64
sudo yum install libcurl-devel.x86_64
sudo yum install expat-devel.x86_64 
```

# php - 使用 PHP 自动备份 MySql 数据库的邮件

> ID：15197798
> 
> 赞同：-1
> 
> 时间：2013-03-04T08:59:51.477
> 
> 标签：php, mysql

我想备份我的数据库并使用 php 将其邮寄到我的电子邮件 ID。我找到了一个脚本，它备份了我的数据库并以 zip 形式将其邮寄给我，但是当我尝试执行该脚本时，它运行良好，但邮件没有进入我的收件箱。这是脚本：

```
<?php
$db_host="localhost";   //mysql host  
$db_user="*******";  //databse user name
$db_pass="*******";  //database password
$db_name="******";  //database name
$tables="*";   // use * for all tables or use , to seperate table names
$email="*******";     //your email id
///////////////////////////////////////////////////////////////////////////////////////////

/////////don't need to change bellow //////

backup($db_host,$db_user,$db_pass,$db_name,$tables,$email);
function backup($db_host,$db_user,$db_pass,$db_name,$tables = '*',$email)
{

  $con= mysql_connect($db_host,$db_user,$db_pass);
  mysql_select_db($db_name,$con);

  //get all of the tables
  if($tables == '*')
  {
    $tables = array();
    $result = mysql_query('SHOW TABLES');
    while($row = mysql_fetch_row($result))
    {
      $tables[] = $row[0];
    }
  }
  else
  {
    $tables = is_array($tables) ? $tables : explode(',',$tables);
  }

  //cycle through
  foreach($tables as $table)
  {
    $result = mysql_query('SELECT * FROM '.$table);
    $num_fields = mysql_num_fields($result);

    $return.= 'DROP TABLE '.$table.';';
    $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
    $return.= "\n\n".$row2[1].";\n\n";

    for ($i = 0; $i < $num_fields; $i++) 
    {
      while($row = mysql_fetch_row($result))
      {
        $return.= 'INSERT INTO '.$table.' VALUES(';
        for($j=0; $j<$num_fields; $j++) 
        {
          $row[$j] = addslashes($row[$j]);
          $row[$j] = ereg_replace("\n","\\n",$row[$j]);
          if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
          if ($j<($num_fields-1)) { $return.= ','; }
        }
        $return.= ");\n";
      }
    }
    $return.="\n\n\n";
  }

  //save file
  $filename='db-backup-'.time().'-'.(md5(implode(',',$tables))).'.sql';
  $handle = fopen($filename,'w+');
  fwrite($handle,$return);
  fclose($handle);
  compress($filename);
  send_mail($filename.".zip",$email);
}

function send_mail($filepath,$email)
{

$from = "Backup <cepheisys.com/mac>";
$subject = "Database backup";
$message="This attachment contains the backup of your database.";
$separator = md5(time());

// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;

// attachment name
$filename = "backup.zip";

//$pdfdoc is PDF generated by FPDF
$attachment = chunk_split(base64_encode(file_get_contents($filepath)));

// main header
$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

// no more headers after this, we start the body! //

$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
$body .= "This is a MIME encoded message.".$eol;

// message
$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$body .= $message.$eol;

// attachment
$body .= "--".$separator.$eol;
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";

// send message
if (mail($email, $subject, $body, $headers)) {
    echo "Your backup sent to your email id";
    header("refresh: 1; main.php");
} else {
    echo "Oops mail can not be send";
}
}
function compress($filepath)

     {

         $zip = new ZipArchive();
  $file=$filepath.".zip";
 if($zip->open($file,1?ZIPARCHIVE::OVERWRITE:ZIPARCHIVE::CREATE)===TRUE)
 {
   // Add the files to the .zip file
   $zip->addFile($filepath);

   // Closing the zip file
   $zip->close();
 }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T18:15:30.360

我这样做是出于一种爱好，因此任何输入都将受到谦虚的赞赏。

1.  `$row[$j] = ereg_replace("\n","\\n",$row[$j]);` 已折旧，应更换为：

    ```
    $pattern = '/\\\n/';
    $replacement = '\\\\\n';
    $row[$j] = preg_replace($pattern, $replacement, $row[$j] ); 
    ```

2.  我无法让您的代码有效地通过电子邮件发送，所以我只是通过电子邮件将链接发送给自己。我必须点击链接并通过 ftp 登录，但它就在那里。LMK 如果您有任何意见。

3.  我在您的代码中返回了路径，然后将文件位置添加到我的数据库中::

    ```
    function Add_BU_to_Database ($filename){
        $conn = db_connect(); //connects to my db
        $BU_Hist_num = General_Get_num('BU_History','BU_Hist_num'); //gets primary field
        $now = time(); 
        $BU_Add_Qry = $conn->query("insert into BU_History 
        (BU_Hist_num,BU_Path,BU_Time_Add,BU_Time_Del,BU_Status)                 
        Values('".$BU_Hist_num."','".$filename."','".$now."','','Active')");
    }//end function` 
    ```

4.  然后我更新了页面顶部的ini，这样它就不会超时::

    ```
    ini_set('memory_limit', '1G'); 
    ini_set('max_execution_time', 300); 
    ```

5.  然后我编写了其余的代码来删除旧文件并在新的 php 文件上更新数据库::

    ```
    <?php
    ini_set('memory_limit', '1G'); 
    ini_set('max_execution_time', 300);

    $conn = db_connect();
    $AweekAgo = time()-1209600;

    $DBDeletionQry = $conn->query("select * from BU_History where BU_Status = 'Active' and BU_Time_Add < '$AweekAgo' ");
    $DBD_rows = mysqli_num_rows($DBDeletionQry);

    echo "Files older than two weeks: ".$DBD_rows."<br>";
    $filesdeleted = 0;

    for($i=0;$i<$DBD_rows;$i++){
        //Finds each file path
        $DBD_row = mysqli_fetch_assoc($DBDeletionQry);
        $BU_Path = "".$DBD_row['BU_Path'];
        $BU_Hist_num = $DBD_row['BU_Hist_num'];
        //Shows Paths
        echo $BU_Path."<br>";

        //Delete's File
        if(unlink($BU_Path)){$filesdeleted = $filesdeleted+1;}

        //Updates the Database
        $now = time();
        $DBDUpdate = $conn->query("update BU_History set BU_Time_Del = '$now',     BU_Status = 'Inactive' where BU_Hist_num = '$BU_Hist_num' ");

    }//end for
    echo "Files deleted: ".$filesdeleted."<br>";
    ?> 
    ```

6.  最后但并非最不重要的一点是，我使用我的 cron 管理器来运行备份和删除备份 .php 文件。

# multithreading - 高速线程同步

> ID：15197803
> 
> 赞同：2
> 
> 时间：2013-03-04T08:59:58.993
> 
> 标签：multithreading, synchronization

我有一个线程问题，我有资格作为一个适度的线程背景。

假设我有以下（过于简单的）设计和行为：

对象 ObjectA - 具有对对象 ObjectB 的引用和方法 MethodA()。对象 ObjectB - 具有对 ObjectA 的引用、元素数组 ArrayB 和方法 MethodB()。

ObjectA 负责实例化 ObjectB。ObjectB.ObjectA 将指向 ObjectB 的实例化器。

现在，只要满足某些条件，就会在 ObjectB.ArrayB 中添加一个新元素，并为此元素启动一个新线程，例如 ThreadB_x，其中 x 从 1 变为 ObjectB.ArrayB.Length。每个这样的线程调用 ObjectB.MethodB() 来传递一些数据，然后调用 ObjectB.ObjectA.MethodA() 进行数据处理。

因此，多个线程调用同一个方法 ObjectB.MethodB()，而且它们很可能同时这样做。MethodB 中有很多创建和初始化新对象的代码，所以我认为那里没有问题。但是后来这个方法调用了 ObjectB.ObjectA.MethodA()，而我对里面发生的事情一无所知。根据我得到的结果，显然没有错，但我想确定这一点。

现在，我将 ObjectB.ObjectA.MethodA() 的调用包含在 ObjectB.MethodB() 内的 lock 语句中，所以我认为这将确保 MethodA() 的调用不会发生冲突，尽管我是不是 100% 肯定的。但是，如果每个 ThreadB_x 多次调用 ObjectB.MethodB() 并且非常非常快，会发生什么？我会有等待 ObjectB.ObjectA.MethodA() 完成的呼叫队列吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:56:39.080

Your question is very difficult to answer because of the lack of information. It depends on the average time spent in `methodA`, how many times this method is called per thread, how many cores are allocated to the process, the OS scheduling policy, to name a few parameters.

All things being equals, when the number of threads grows toward infinity, you can easily imagine that the probability for two threads requesting access to a shared resource simultaneously will tend to one. This probability will grow faster in proportion to the amount of time spent on the shared resource. That intuition is probably the reason of your question.

The main idea of multithreading is to parallelize code which can be effectively computed concurrently, and avoid contention as much as possible. In your setup, if `methodA` is not pure, ie. if it may change the state of the process - or in C++ parlance, if it cannot be made `const`, then it is a source of contention (recall that a function can only be pure if it uses pure functions or constants in its body).

One way of dealing with a shared resource is to protect it with a mutex, as you've done in your code. Another way is to try to turn its use into an async service, with one thread handling it, and others requesting that thread for computation. In effect, you will end up with an explicit queue of requests, but threads doing these requests will be free to work on something else in the mean time. The goal is always to maximize computation time, as opposed to thread management time, which happens each time a thread gets rescheduled.

Of course, it is not always possible to do so, eg. when the result of `methodA` belongs to a strongly ordered chain of computation.

# javascript - 任何滑块：视频播放完成后转到下一个面板

> ID：15197805
> 
> 赞同：0
> 
> 时间：2013-03-04T09:00:08.950
> 
> 标签：javascript, jquery, video, slider, anythingslider

我正在尝试使用 Anythingslider (JQuery)。

当视频面板处于活动状态时，我使用此代码自动播放视频： [LINK](http://jsfiddle.net/Mottie/ycUB6/495/)

我在[这里创建了一个演示站点](http://www.centrumkanalen.se/btv/video.html)

**这是javascript：**

```
var playvid = function(slider) {
var vid = slider.$currentPage.find('video');
if (vid.length) {
    // autoplay
    vid[0].play();
}

};

$('#slider').anythingSlider({
// Autoplay video in initial panel, if one exists
onInitialized: function(e, slider) {
    playvid(slider);
},
// pause video when out of view
onSlideInit: function(e, slider) {
    var vid = slider.$lastPage.find('video');
    if (vid.length && typeof(vid[0].pause) !== 'undefined') {
        vid[0].pause();
    }
},
// play video
onSlideComplete: function(slider) {
    playvid(slider);
},
// pause slideshow if video is playing
isVideoPlaying: function(slider) {
    var vid = slider.$currentPage.find('video');
    return (vid.length && typeof(vid[0].pause) !== 'undefined' && !vid[0].paused && !vid[0].ended);

}
}); 
```

**问题：** 播放视频后，我想移至幻灯片的下一个面板。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:10:37.250

刚刚解决了。我使用了[THIS PAGE中的确切代码](http://jsfiddle.net/Mottie/ycUB6/495/)

像这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>AnythingSlider playground - jsFiddle demo by Mottie</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-git.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css"/>
  <link rel="stylesheet" type="text/css" href="/css/result-light.css"/>
  <link rel="stylesheet" type="text/css" href="http://css-tricks.github.com/AnythingSlider/css/anythingslider.css"/>

  <script type='text/javascript' src="http://css-tricks.github.com/AnythingSlider/js/jquery.anythingslider.js"></script>

  <script type='text/javascript' src="http://css-tricks.github.com/AnythingSlider/js/jquery.easing.1.2.js"></script>

  <script type='text/javascript' src="http://css-tricks.github.com/AnythingSlider/js/swfobject.js"></script>

  <script type='text/javascript' src="http://css-tricks.github.com/AnythingSlider/js/jquery.anythingslider.fx.js"></script>

  <style type='text/css'>
    /*** Set Slider dimensions here! Version 1.7+ ***/
    /* added #slider li to make panels the same size in case "resizeContents" is false */
    ul#slider, ul#slider li {
        width: 300px;
        height: 200px;
        list-style: none;
    }

  </style>

  <script type='text/javascript'>//<![CDATA[ 
    $(function() {
      var playvid = function(slider) {
        var vid = slider.$currentPage.find('video');
        if (vid.length) {
          // autoplay
          vid[0].play();
         }
      };

      $('#slider').anythingSlider({

      // Autoplay video in initial panel, if one exists
      onInitialized: function(e, slider) {
        playvid(slider);
      },
      // pause video when out of view
      onSlideInit: function(e, slider) {
        var vid = slider.$lastPage.find('video');
        if (vid.length && typeof(vid[0].pause) !== 'undefined') {
          vid[0].pause();
        }
      },
      // play video
      onSlideComplete: function(slider) {
        playvid(slider);
      },
      // pause slideshow if video is playing
      isVideoPlaying: function(slider) {
        var vid = slider.$currentPage.find('video');
        return (vid.length && typeof(vid[0].pause) !== 'undefined' && !vid[0].paused && !vid[0].ended);
      }

    });
  });//]]>  
  </script>

</head>
<body>
  <!-- Add additional stylesheets here -->
<link rel="stylesheet" href="http://css-tricks.github.com/AnythingSlider/css/theme-metallic.css">

<ul id="slider">
    <li class="panel5">
        <video width="320" height="240" controls="controls">
            <source src="http://css-tricks.github.com/AnythingSlider/demos/video/movie.ogg" type="video/ogg">
            <source src="http://css-tricks.github.com/AnythingSlider/demos/video/movie.mp4" type="video/mp4">
            <source src="http://css-tricks.github.com/AnythingSlider/demos/video/movie.webm" type="video/webm">
            Your browser does not support the video tag. But you could include an iframe/embeded video here.
        </video>
    </li>
    <li><img src="http://placekitten.com/300/200" alt="" /></li>
    <li><img src="http://placehold.it/300x200" alt="" /></li>
    <li><img src="http://placebear.com/300/200" alt="" /></li>
    <li><img src="http://lorempixel.com/300/200" alt="" /></li>
</ul>

</body>
</html> 
```

# ios - 两个 UITableView 的 numberOfSectionsInTableView

> ID：15197817
> 
> 赞同：1
> 
> 时间：2013-03-04T09:00:39.010
> 
> 标签：ios, uitableview

我有两个`UITableView`根据`UISegmentControl.selectedSegmentIndex`. 第一个表是**分组**样式，第二个是**普通**表。

NSFetchedResultsController 用于第一个 UITableView，NSMutableArray 用于第二个。

在我的**numberOfSectionsInTableView**中：

```
return [_fetchedResultsController.sections count]; 
```

在这种情况下，第二个 UITableView 的数据显示 3 次（因为 FirstTableView 部分计数 = 3）。

我想要第二个 tableView **numberOfSectionsInTableView**

`return 1;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:06:09.423

您应该在返回计数之前检查您正在显示的表格视图。您可以`tableView`为此使用输入参数。

例如：-

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (tableView == self.firstTableView) //or (tableView == firstTableView)
       return [_fetchedResultsController.sections count];
    else 
       return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:06:24.557

您可以使用以下条件...

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    if(tableView == firstTableView)
         return 1;
    else if (tableView == secondTableView)
         return 2;
    //... and so on you can do like this....
} 
```

祝一切顺利 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:08:08.663

我猜您正在为两个表视图设置相同的数据源。如果是这种情况，那么在您的：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
   if(tableView == firstTableView){ //assuming you have a reference to the first table view
         return [_fetchedResultsController.sections count];
   }else{
         return 1;
   }
} 
```

您必须在所有数据源方法中执行此操作。相反，使表格视图的数据源不同会更容易。为此，您可以从对象库中拖动一个对象（蓝色立方体）并将其类设置为`SecondTableDatasource`. 然后将此对象设置为第二个表的数据源，并在该类中实现相应的数据源方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:24:29.107

您可以为每个 tableView 添加标签并检查每个标签`numberOfSectionsInTableView`

# spring - 如何使用 SpringMVC 中的 PathMatchingResourcePatternResolver 读取 /WEB-INF/ 中的文件，而不是类文件夹中的文件？

> ID：15197821
> 
> 赞同：1
> 
> 时间：2013-03-04T09:00:52.257
> 
> 标签：spring

春天：3.2.0.RELEASE

我打算阅读的文件放在`/WEB-INF/resources/test.dat`.

代码如下：

```
 @javax.annotation.Resource(name = "pathMatchingResourcePatternResolver")
 private PathMatchingResourcePatternResolver resolver;
 ...
 ...
 Resource resource2 = resolver.getResource("/WEB-INF/resources/test.dat");
    try {
        File file = resource2.getFile();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

从 PathMatchingResourcePatternResolver 的文档中，它描述了：`and simple unprefixed paths such as "/WEB-INF/context.xml".`

但实际上它会导致一个错误：`java.io.FileNotFoundException: class path resource [resources/test.dat] cannot be resolved to URL because it does not exist`。

有谁知道是什么问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-02T21:56:33.017

我遇到了同样的问题并发现了问题。问题是默认情况下[`PathMatchingResourcePatternResolver`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/core/io/support/PathMatchingResourcePatternResolver.html)用于[`DefaultResourceLoader`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/core/io/DefaultResourceLoader.html)实际加载资源。`DefaultResourceLoader`假设资源来自类路径，它不能处理 web 应用程序。要解决这个问题，您需要设置另一个[`ResourceLoader`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/core/io/ResourceLoader.html)实现（如[`ServletContextResourceLoader`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/web/context/support/ServletContextResourceLoader.html)）。但是，恕我直言，最好使用[`ApplicationContext`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/context/ApplicationContext.html)加载资源（是的，它可以做到！）。只需@Autowire 它或实施[`ApplicationContextAware`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/context/ApplicationContextAware.html).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T09:40:24.873

如果它是一个 Maven 项目。不要将此文件放在 /WEB-INF/resource 文件夹中，而是将其放入 /src/main/resources 文件夹中。此文件夹中的资源被添加到类路径中。所以你可以使用类似的东西：

```
Thread.currentThread().getContextClassLoader().getResourceAsStream("test.dat"); 
```

这将起作用。

# php - php中的会话超时问题

> ID：15197826
> 
> 赞同：4
> 
> 时间：2013-03-04T09:01:08.360
> 
> 标签：php, session-state

我已将会话超时时间设置为 20 分钟，如下所示。有时会话超时发生在两三分钟内。

```
ini_set('session.gc_maxlifetime',   1200);

ini_set('session.cookie_lifetime',  1200);

ini_set('session.gc_probability',   1);

ini_set('session.gc_divisor',   100); 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:09:51.503

用户浏览其他页面时，20 分钟到期不会*重置。*[此评论](http://www.php.net/manual/en/function.session-set-cookie-params.php#100657)中解释了该问题：

> 由于 PHP 的会话控制在使用 session_set_cookie_params() 时无法正确处理会话生命周期，因此我们需要做一些事情来更改每次用户访问我们网站时的会话到期时间。所以，这就是问题所在。
> 
> ```
> $lifetime=600;
> session_set_cookie_params($lifetime);
> session_start(); 
> ```
> 
> 当用户返回我们的站点或刷新页面时，此代码不会更改会话的生命周期。会话将在 $lifetime 秒后过期，无论用户请求页面多少次。所以我们只是覆盖会话cookie如下：
> 
> ```
> $lifetime=600;
> session_start();
> setcookie(session_name(),session_id(),time()+$lifetime); 
> ```
> 
> 现在我们有了相同的会话 cookie，其生命周期设置为正确的值。

更好的是，保留`session.cookie_lifetime`to`0`以便 cookie 在浏览器关闭时过期。否则，假设关闭浏览器将结束会话的用户会在 20 分钟超时之前重新打开浏览器时感到惊讶。

## 关于 gc_xxxx 设置的编辑

### gc_probability = 1，gc_divisor = 1，gc_maxlifetime = 1200

`1/1`意味着 PHP 将检查每次`session_start`调用的会话文件的日期。

### gc_probability = 1，gc_divisor = 100，gc_maxlifetime = 1200

`1/100`表示 PHP 将随机检查会话文件的日期，但大约每 100 次`session_start`调用一次。

日期检查本身包括将会话文件的访问时间与 gc_maxlifetime 进行比较；如果在过去（例如）20 分钟内未访问该文件，它将删除该文件。

话虽如此，如果 cookie 由于超时（或在超时为 0 时关闭浏览器）而过期，则会话将立即过期，因为浏览器停止发送过期的会话 id cookie；在这种情况下，PHP 会发出一个新的会话 id cookie。与过期 cookie 关联的会话 id 文件被废弃，不再被访问；因此如上所述随时收集垃圾。

最后，您的具体问题可以解决 (i) 通过查看会话 id cookie (ii) 的到期日期并记住在访问/刷新页面时不会更新具有超时的 cookie。

# jboss - jboss 5 到 jboss 7 jms

> ID：15197827
> 
> 赞同：1
> 
> 时间：2013-03-04T09:01:13.693
> 
> 标签：jboss, jms, jboss7.x, jboss5.x

我在同一台机器上运行 jboss5 和 jboss 7，所以我更改了端口号（jboss5-4040 和 jboss7-8080）。我需要从 jboss 5 向 jboss 7 发送消息。我读了一篇文章，指出必须使用 JMS 桥接器。

```
https://community.jboss.org/wiki/BridgeJMSMessagesFromAS5ToAS7 
```

我在 jboss 5 中创建了一个队列，并通过独立程序将消息发送到队列。

```
import java.io.Console;
import java.util.Properties;
import javax.jms.*;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

public class sender {
    String url_;
    String name_;
    Connection conn = null;
    Session session = null;
    Queue queue = null;

    public sender(String url, String name) throws JMSException,
            NamingException {

        url_ = url;
        name_ = name;

        this.initializeSender();
    }

    private void initializeSender() throws JMSException, NamingException {

        Properties props = new Properties();
        props.setProperty("java.naming.factory.initial",
                "org.jnp.interfaces.NamingContextFactory");
        props.setProperty("java.naming.factory.url.pkgs", "org.jboss.naming");

        props.setProperty("java.naming.provider.url", "jnp://localhost:1099");

        Context context = new InitialContext(props);

        ConnectionFactory cf = (ConnectionFactory) context
                .lookup("java:/ConnectionFactory");

        conn = cf.createConnection();

        session = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);

        queue = (Queue) context.lookup(name_);

        conn.start();

    }

    public void send(String text) throws JMSException, NamingException {
        // Send a text msg
        MessageProducer producer = session.createProducer(queue);
        TextMessage tm = session.createTextMessage(text);
        producer.send(tm);
        producer.close();
    }

    public void disconnect() throws JMSException {
        if (conn != null) {
            conn.stop();
        }

        if (session != null) {
            session.close();
        }

        if (conn != null) {
            conn.close();
        }
    }

    public String getTopicName() {
        return name_;
    }

    public String getTopicURL() {
        return url_;
    }

    public static void main(String args[]) throws Exception {

        sender sender = new sender("remote://localhost:4447", "BalaQueue");

        sender.send("My Message");
        sender.disconnect();

    }

} 
```

我在 jboss 7 中创建了一个队列，并通过独立程序将消息发送到队列。

```
import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Properties;

import javax.jms.Queue;
import javax.jms.QueueConnection;
import javax.jms.QueueConnectionFactory;
import javax.jms.QueueSender;
import javax.jms.QueueSession;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.naming.Context;
import javax.naming.InitialContext;

public class QSender {
    public static void main(String[] args) {
        new QSender().send();
    }

    public void send() {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                System.in));
        try {
            // Strings for JNDI names
            String factoryName = "jms/RemoteConnectionFactory";
            String queueName = "jms/queue/ram";
            // Create an initial context.
            Properties props = new Properties();
            props.put(Context.INITIAL_CONTEXT_FACTORY,
                    "org.jboss.naming.remote.client.InitialContextFactory");
            props.put(Context.PROVIDER_URL, "remote://localhost:4447");
            props.put(Context.SECURITY_PRINCIPAL, "ramguest");
            props.put(Context.SECURITY_CREDENTIALS, "password");
            InitialContext context = new InitialContext(props);

            QueueConnectionFactory factory = (QueueConnectionFactory) context
                    .lookup(factoryName);
            Queue queue = (Queue) context.lookup(queueName);
            context.close();
            // Create JMS objects
            QueueConnection connection = factory.createQueueConnection(
                    "ramguest", "password");
            QueueSession session = connection.createQueueSession(false,
                    Session.AUTO_ACKNOWLEDGE);
            QueueSender sender = session.createSender(queue);

            System.out.println("Enter message to send or 'quit' to quit.");
            String messageText = null;
            while (true) {
                messageText = reader.readLine();
                if ("quit".equalsIgnoreCase(messageText)) {
                    break;
                }
                TextMessage message = session.createTextMessage(messageText);
                sender.send(message);
            }
            // Exit
            reader.close();
            System.out.println("Exiting...");
            connection.close();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    }
} 
```

和我的桥文件（jboss-service.xml）

```
<server>    
    <loader-repository>com.example:archive=unique-archive-name
        <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
    </loader-repository>    <!-- AS7 JMS Provider -->    
    <mbean code="org.jboss.jms.jndi.JMSProviderLoader" name="jboss.messaging:service=JMSProviderLoader,name=RemoteJBossMQProvider">     <attribute name="ProviderName">RemoteXAConnectionFactory</attribute>       
        <attribute name="ProviderAdapterClass">org.jboss.jms.jndi.JNDIProviderAdapter</attribute>
        <attribute name="FactoryRef">jms/RemoteConnectionFactory</attribute>
        <attribute name="QueueFactoryRef">jms/RemoteConnectionFactory</attribute>
        <attribute name="TopicFactoryRef">jms/RemoteConnectionFactory</attribute>
        <attribute name="Properties">         java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory  

            java.naming.provider.url=remote://localhost:4447
            java.naming.security.principal=ramguest 
            java.naming.security.credentials=password 
        </attribute>
    </mbean>    
    <mbean code="org.jboss.jms.server.bridge.BridgeService" name="jboss.jms:service=Bridge,name=LegayBridgeSend" xmbean-dd="xmdesc/Bridge-xmbean.xml">            
        <depends optional-attribute-name="SourceProviderLoader">jboss.messaging:service=JMSProviderLoader,name=JMSProvider</depends>
        <depends optional-attribute-name="TargetProviderLoader">jboss.messaging:service=JMSProviderLoader,name=RemoteJBossMQProvider</depends>
        <attribute name="SourceDestinationLookup">BalaQueue</attribute>  
        <attribute name="TargetDestinationLookup">java:jboss/exported/jms/queue/ram</attribute>
        <attribute name="QualityOfServiceMode">1</attribute>
        <attribute name="MaxBatchSize">1</attribute>
        <attribute name="MaxBatchTime">-1</attribute>
        <attribute name="FailureRetryInterval">10000</attribute>
        <attribute name="MaxRetries">-1</attribute>
        <attribute name="AddMessageIDInHeader">false</attribute>    
        <attribute name="TargetUsername">ramguest</attribute>
        <attribute name="TargetPassword">password</attribute>   
    </mbean> 
</server> 
```

当我启动 jboss5 时出现异常

```
WARN  [Bridge] jboss.jms:name=LegayBridgeSend,service=Bridge Failed to set up connections
javax.naming.CommunicationException: Receive timed out [Root exception is java.net.SocketTimeoutException: Receive timed out]
        at org.jnp.interfaces.NamingContext.discoverServer(NamingContext.java:1678)
        at org.jnp.interfaces.NamingContext.checkRef(NamingContext.java:1795)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:693)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:686)
        at javax.naming.InitialContext.lookup(InitialContext.java:392)
        at org.jboss.jms.server.bridge.JNDIFactorySupport.createObject(JNDIFactorySupport.java:66)
        at org.jboss.jms.server.bridge.JNDIDestinationFactory.createDestination(JNDIDestinationFactory.java:45)
        at org.jboss.jms.server.bridge.Bridge.setupJMSObjects(Bridge.java:953)
        at org.jboss.jms.server.bridge.Bridge.setupJMSObjectsWithRetry(Bridge.java:1223)
        at org.jboss.jms.server.bridge.Bridge.access$1600(Bridge.java:68)
        at org.jboss.jms.server.bridge.Bridge$FailureHandler.run(Bridge.java:1569)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketTimeoutException: Receive timed out
        at java.net.PlainDatagramSocketImpl.receive0(Native Method)
        at java.net.PlainDatagramSocketImpl.receive(PlainDatagramSocketImpl.java:145)
        at java.net.DatagramSocket.receive(DatagramSocket.java:725)
        at org.jnp.interfaces.NamingContext.discoverServer(NamingContext.java:1647) 
```

有人可以指导我吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T17:44:47.167

JBOSS AS 7 不支持 JNP ，使用 jboss 远程处理

```
<attribute name="Properties">
      java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory  
      java.naming.provider.url=remote://localhost:4447
      java.naming.security.principal=ramguest 
      java.naming.security.credentials=password 
</attribute> 
```

改变

```
org.jnp.interfaces.NamingContextFactory 
```

至

```
org.jboss.naming.remote.client.InitialContextFactory 
```

# c++ - 从 iOS 项目中使用的 C++ 类读取文件

> ID：15197829
> 
> 赞同：0
> 
> 时间：2013-03-04T09:01:19.080
> 
> 标签：c++, ios, objective-c, file-io

我正在使用最新的 SDK 开发一个 iOS 应用程序，并且我也在使用 OpenCV。

我有一些 C++ 类，我必须使用这些 C++ 类读取 XML 的内容。

使用Objective-C，我这样做：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"MyFile" ofType:@"xml"];  
NSData *myData = [NSData dataWithContentsOfFile:filePath];  
if (myData) {  
    // do something useful  
} 
```

但是，**我怎样才能从 C++ 中做到这一点？**

我知道 cpp 需要一个文件路径，但我不知道如何从 C++ 获取该路径。

我所有的 OpenCV 算法都在 C++ 类中，所以我必须在那些 C++ 类中进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:09:37.863

你有两个选择：

1.  使用 C 字符串在 C++ 中打开文件（`[filePath fileSystemRepresentation]`返回`const char*`）
2.  在 Objective C 中打开文件，然后将指针传递给原始字节和大小（`[myData bytes]`和`[myData length`]）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:14:25.467

当然，可以打开 XML 文件并使用纯 C++ 对其进行解析，但我认为您应该使用 Apple 提供的 Objective-C 类来执行此解析。您可以通过使用 Objective-C++（即混合 Objective-C 和 C++）来做到这一点，只需将 C++ 实现文件扩展名从 重命名`.cpp`为`.mm`.

我认为这是个好主意的原因：

1.  它实施起来更快，更不容易出错。
2.  如果对`plist`格式进行了更改，您将免费获得这些更改。

# ruby - 通过发送自行分配

> ID：15197835
> 
> 赞同：1
> 
> 时间：2013-03-04T09:01:27.373
> 
> 标签：ruby

我有两个数组`a`和`b`. 我可以`a = a + b`使用`send`as重写

```
a = a.send(:+, b) 
```

有没有办法`a += b`使用类似的`send`东西重写？

```
a.send(:+=, b) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:03:19.797

`+`是运算符*和*方法。`+=`只是一个操作符，没有对应的方法。它是`a = a + b`. 你不能使用`:+=`with `send`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:16:54.447

你不能`+=`像 Sergio 说的那样做，但你可以用`concat`.

```
a.send(:concat, b) 
```

请注意，这与执行操作并不完全相同，因为`+=`with将引用与以前相同的对象，而 with将是新创建的对象。`concat``a``+=`

# javascript - 如何在 url javascript 中传递“问号”

> ID：15197837
> 
> 赞同：41
> 
> 时间：2013-03-04T09:01:38.073
> 
> 标签：javascript, angularjs

在 Angularjs 应用程序中，我有一个类似
`http://url.com/my_app/#/store/items`.
现在我想附加查询字符串，例如
`http://url.com/my_app/#/store/items?page=2`.

但在 url 中，javascript 对`"?" to "%3F"`我不想要的进行编码。它应该保留“？” 仅在 url 中，因为 angularjs $location.search() 不为“%3F”返回任何内容。

怎么做？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-04T16:23:41.397

您的问题中没有足够的细节，所以我假设您在非 HTML5 模式下使用 AngularJS 路由 - 或至少[$location 服务。](http://docs.angularjs.org/api/ng.$location)如果是这样，`#`从单页应用程序的角度来看，字符后面的部分代表您的 URL（更多关于 AngularJS 的[信息](http://docs.angularjs.org/guide/dev_guide.services.$location)）。

如果上述假设是正确的，则意味着**您不应尝试“手动”添加或操作问号**。相反，您应该更改要操作查询字符串的部分（之后`search`的部分），并且问号将根据需要添加/删除到最终 URL。`$location``?`

在你的情况下，你可以写：

```
$location.path('/store/items').search('page', 2) 
```

这是假设您正在从 JavaScript 操作 URL，如您的问题中所述。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-09T12:52:45.980

如果您使用的是 $location 服务，请`$location.url('/store/items?page=2')`改用。这是至少从 1.0.7 开始的 setter 方法，并且在我的 1.1.5 应用程序中很有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-05T12:11:45.030

您可以创建一个参数对象，例如：

```
var param = {
    page: 2
}
$location.url("/store/items").search(param) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-04T17:30:01.797

如果您使用的是强烈推荐的**ui-router**，您可以`$state.go(to, params, options)`按照[此处](http://angular-ui.github.io/ui-router/site/#/api/ui.router.state.$state)所述使用。

作为先决条件，您需要正确定义您的状态，这意味着必须让 ui-router 知道每个可能的查询参数。请参阅以下示例（`page`和`otherParam`）：

```
$stateProvider.
state('storeItems', {
  url: '/store/items?page&otherParam',
  templateUrl: '/modules/store/views/item.client.view.html'
}); 
```

然后你可以通过调用例如从控制器切换位置

```
$scope.gotoItemsPage = function(page) {
  $state.go('storeItems', {
    page: page,
    otherParam: 'Just a show off'
  });
}; 
```

无需摆弄所需的编码和高度可读性！

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-04T09:06:43.743

您可以使用[decodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)。

例如：

```
decodeURIComponent('http://url.com/my_app/#/store/items%3Fpage=2');
// will give you `http://url.com/my_app/#/store/items?page=2` 
```

# asp.net - 当我通过 @ip='' 时，存储过程在 if 语句中花费了太多时间，并且对 @IP 有一些价值需要 0 秒

> ID：15197839
> 
> 赞同：-5
> 
> 时间：2013-03-04T09:01:43.370
> 
> 标签：asp.net, sql-server, stored-procedures

我低于 SP 并且花费了太多时间，最后停止了

```
EXEC MemberListing 1,20,'','','RegDate','Desc',0 
```

如果将任何值传递给`@IP`参数，它会起作用。不知道为什么。

```
Create PROCEDURE MemberListing
    @PageNum as Int,
    @PerPageResult as Int,
    @Username as nvarchar(50),
    @IP as varchar(50),
    @sortColumn as Varchar(50),
    @sortOrder as Varchar(4),
    @TotalCount as int OUTPUT
AS
BEGIN   
    declare @Temp Table(RowNum int, id bigint, Username nvarchar(50), Email nvarchar(50), RegDate DateTime, Country varchar(25),
                            LastLogin DateTime, IsGoldMember varchar(1))
    declare @sort varchar(50)
    if @IP = ''
        BEGIN
            print 'if'
            SET FMTONLY OFF;
            Insert into @Temp
            Select ROW_NUMBER() over (order by  
            case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'id' then id end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Username' then Username end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Email' then Email end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Country' then Country end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end ASC

        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'id' then id end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Username' then Username end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Email' then Email end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Country' then Country end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end DESC
            ) As RowNum, * From (   
            SELECT 
                m.id,m.login as Username,m.email as Email,m.registrationdate as RegDate,c.name as Country,m.lastlogindate as LastLogin,
                CASE WHEN (r.description='goldmember' or r.description='goldmember_forever') then 1 end As IsGoldMember 
            from member m 
            join country c on m.country_id = c.id
            join user_role ur on m.id=ur.member_id
            join role r on r.id=ur.role_id
            left join lastip l on m.id=l.user_id
            where r.description <> 'administrator' and m.login like @Username+'%'
            ) as aab
            Select * from @Temp Where RowNum> @PageNum-1 and RowNum<@PerPageResult+@PageNum
            order by 
            case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'id' then id end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Username' then Username end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Email' then Email end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Country' then Country end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end ASC

        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'id' then id end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Username' then Username end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Email' then Email end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Country' then Country end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end DESC
        END
    ELSE
        BEGIN
            print 'else'
            SET FMTONLY OFF;
            Insert into @Temp
            Select ROW_NUMBER() over (order by  
            case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'id' then id end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Username' then Username end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Email' then Email end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Country' then Country end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end ASC

        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'id' then id end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Username' then Username end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Email' then Email end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Country' then Country end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end DESC
            ) As RowNum, * From (   
            SELECT 
                m.id,m.login as Username,m.email as Email,m.registrationdate as RegDate,c.name as Country,m.lastlogindate as LastLogin,
                CASE WHEN (r.description='goldmember' or r.description='goldmember_forever') then 1 end As IsGoldMember 
            from member m 
            join country c on m.country_id = c.id
            join user_role ur on m.id=ur.member_id
            join role r on r.id=ur.role_id
            left join lastip l on m.id=l.user_id
            where r.description <> 'administrator' and m.login like @Username+'%' and l.address = @IP
            ) as aa
            Select * from @Temp Where RowNum> @PageNum-1 and RowNum<@PerPageResult+@PageNum
            order by 
            case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'id' then id end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Username' then Username end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Email' then Email end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'Country' then Country end ASC
        ,   case when @sortOrder <> 'ASC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end ASC
        ,   case when @sortOrder <> 'ASC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end ASC

        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'id' then id end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Username' then Username end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Email' then Email end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'RegDate' then RegDate end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'Country' then Country end DESC
        ,   case when @sortOrder <> 'DESC' then cast(null as datetime) when @sortColumn = 'LastLogin' then LastLogin end DESC
        ,   case when @sortOrder <> 'DESC' then 0 when @sortColumn = 'IsGoldMember' then IsGoldMember end DESC
        END 
END 
```

如果我为@IP 参数传递''，我会得到以下错误。

```
if
Msg 8152, Level 16, State 2, Procedure MemberListing, Line 24
String or binary data would be truncated.
The statement has been terminated.

(0 row(s) affected) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:15:13.703

正如我在评论中所写，您的第一个问题的答案是：

如果我很好地理解了您的中华人民共和国，`@IP = ''`那么它应该会返回一组更广泛的成员。我认为成员表中的`Username, Email`or可能比表的定义更长。匹配wit 表成员的列长度。`Country``@Temp``@Temp`

您的问题的第二个答案：

> 如果@IP='some value'，则需要 0 秒，如果@IP=''，则需要 1:50 分钟。这里有什么问题？

我认为你应该把你的 prc 分成两部分。运行两个查询（@IP = '' 和 = 'somevalue'）并检查执行计划。

如果您看到它与 'somevalue' 配合良好并且不需要 an `INDEX`，我认为您的查询是[参数嗅探](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)的受害者，这通常意味着您的执行计划经过优化以检索所有可能性，而不是进行更具选择性的搜索的最佳选择。

`full table scan`正如我链接的文章中描述的那样，它可能已针对 a 进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:29:08.240

根据错误消息更新：

您需要检查选择查询的数据长度并确保您的 @Temp 表列定义正确。例如; 您可以将列长度扩展`Country varchar(25)`到`Country varchar(50)`

另外，我觉得你的`CASE`说法没有道理。你`CASE`有效地做的是：

```
row_number() over (order by 0) 
```

此外，您可以使用列（即; ）声明您的`@Temp`表如下，以获取行号而不使用函数**`identity(1,1)`***`identity(seed,increment)`*`row_number()`

```
declare @Temp Table(RowNum int identity(1,1), id bigint, Username nvarchar(50), 
                    Email nvarchar(50), RegDate DateTime, Country varchar(25),
                    LastLogin DateTime, IsGoldMember varchar(1)) 
```

现在你可以摆脱`row_number()`功能了。并简化插入（用于`if`条件）如下

```
if (@IP = '')
begin
    insert into @Temp
    select m.id,m.login as Username,m.email as Email,m.registrationdate as RegDate,
           c.name as Country,m.lastlogindate as LastLogin,
           CASE when (r.description='goldmember' or r.description='goldmember_forever') 
                 then 1 end As IsGoldMember 
    from member m join country c on m.country_id = c.id
         join user_role ur on m.id=ur.member_id
         join role r on r.id=ur.role_id
         left join lastip l on m.id=l.user_id
    where r.description <> 'administrator' and m.login like @Username+'%'
    order by 
         case when @sortOrder = 'asc' and @sortColumn = 'id' then id  
              when @sortOrder = 'asc' and @sortColumn = 'Username' then Username  
              when @sortOrder = 'asc' and @sortColumn = 'Email' then Email
              ...
              when @sortColumn = 'id' then id desc
              when @sortColumn = 'Username' then Username desc
              when @sortColumn = 'Email' then Email decs
              ...
         end
     --Now your select query to select required row numbers
     --Note the change to your where clase to bring correct results.
     Select * from @Temp 
     Where RowNum > @PerPageResult*(@PageNum-1) and RowNum <= @PerPageResult*@PageNum
end else
begin
    --you could follow the same step here.
end 
```

# jquery - 用于发出跨浏览器请求的 json

> ID：15197842
> 
> 赞同：0
> 
> 时间：2013-03-04T09:02:03.547
> 
> 标签：jquery, ajax, json, http-post

对不起，如果我复制 Qn。但是没有一个答案可以解决我的跨浏览器请求问题。

我需要使用 json 和所需的标头向不同的 URL 发送 GET 请求。我尝试了以下代码，但似乎没有工作。

它需要3个参数..

```
var URL = 'url?firstName=myname&lastName=mylastname&email=myemail';
$.ajax({
    type: 'GET',
    url: URL,
    dataType: 'jsonp',
    success: function(){
    alert("hi");

 },
    error: function() {
        alert( 'Something goes wrong!' );
    }
}); 
```

输出是“出了点问题！”。当我在浏览器区域中复制 url 时，这是有效的。但我希望通过 jquery 和 json 格式的输入来完成同样的工作。我需要传递所需的标题。

如果有人可以让我知道上述代码中缺少什么，我们将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:08:49.290

在服务器为 CORS 设置标头之前，您不能进行跨域请求。 [CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

```
Access-Control-Allow-Origin =* 
```

如果您已经有权在其他 URL 上执行 CORS 请求，那么您需要告诉 contentType。

并向您的网址添加回调函数

```
var URL = 'url?firstName=myname&lastName=mylastname&email=myemail&callback=someotherFunction'; 
```

然后调用 ajax 。

```
$.ajax({
    type: 'GET',
    url: URL,
    Content-Type: 'application/javascript'
    dataType: 'jsonp',
    success: function(){
    alert("hi");

 },
    error: function() {
        alert( 'Something goes wrong!' );
    }
});

function someotherFunction(response)
{
 alert(respone.yourData); //do something with response.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:04:45.297

在响应中设置`json`标题如下，

**对于 JSON：**

```
header('Content-Type: application/json'); 
```

**对于 JSON-P：**

```
header('Content-Type: application/javascript'); 
```

JSONP 是 JSON，带有一个包装 JSON 内容的附加 JavaScript 回调函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:08:41.467

使用 jsonp 作为 dataType 时，需要在服务器端绑定一个回调函数。例如，如果您需要像 {"id":"myId"} 这样的 json 响应，则在服务器端它应该像 " mycallback({"id":"myId"})";

此外，您还需要在客户端编写该函数。

```
function mycallback(json)
{alert(json);} 
```

# c++ - c ++比较数组的总和

> ID：15197843
> 
> 赞同：-3
> 
> 时间：2013-03-04T09:02:07.003
> 
> 标签：c++, algorithm

我有 2 个数组，每个数组有 5 个整数，我如何比较两个数组以使数组 A 大于数组 B，以下是我得到返回 0 的代码：

```
#include <iostream>
using namespace std;

int main()
{
    const int AMAX = 5, BMAX = 6;
    int i;
    bool c1 = true, c2 = false;
    int A[AMAX] = { 1, 2, 3, 4, 5 };
    int B[BMAX] = { 6, 7,8, 9, 1};

    for (i = 0; i < BMAX; i++)
        if (B[i] == A[i])       
            cout << c1 << endl;
        else
            cout << c2 << endl;
    return 0;
} 
```

我在这里想念什么？

更新：

```
#include <iostream>
using namespace std;
int main(){
  int a[] = {6,7,29};
  int b[] = {3,2,11};
  int acc1=0;
  int acc2 = 0;
  for (int i=0;i<3;i++){
    acc1+=a[i];
}
  for(int j=0;j<3;j++){
    acc2+=b[j];
}

if(acc1 < acc2){
  printf("Array B is greater than Array B ");
}

else{
  printf("Array B greater than Array A");
}

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:09:18.613

如果您要比较的是数组中元素的*总和*（即确定 in 所有元素的总和`A`是否大于in 所有元素的总和`B`），正如问题的标题所暗示的那样，这应该做您想要的：

```
#include <iostream>
#include <algorithm>
#include <numeric>
#include <iomanip>

int main()
{
    using namespace std;

    int A[] = { 2, 4, 1, 5, 9 };
    int B[] = { 9, 12, 32, 43, 23};

    int sumA = accumulate(begin(A), end(A), 0);
    int sumB = accumulate(begin(B), end(B), 0);

    cout << boolalpha << (sumA > sumB);

    return 0;
} 
```

如果您不使用 C++11，这里是用 C++03 编写的等效程序：

```
#include <iostream>
#include <numeric>

int main()
{
    using namespace std;

    int A[] = { 2, 4, 1, 5, 9 };
    int B[] = { 9, 12, 32, 43, 23};

    int sumA = accumulate(A, A + sizeof(A) / sizeof(int), 0);
    int sumB = accumulate(B, B + sizeof(B) / sizeof(int), 0);

    cout << ((sumA > sumB) ? "true" : "false");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:05:20.983

您可以使用内置算法`std::equal`来比较两个数组。例子：

```
#include <iostream>
#include <algorithm>
using namespace std;
#define countof(x) sizeof(x)/sizeof(x[0])
int main()
{
    int A[] = { 2, 4, 1, 5, 9 };
    int B[] = { 9, 12, 32, 43, 23};
    int C[] = { 2, 4, 1, 5, 9 };
    cout << equal(A, A + countof(A), B) << endl;
    cout << equal(A, A + countof(A), C) << endl;
} 
```

输出：`0 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:32:00.840

```
#include <iostream>
using namespace std;
int main()
{
int suma;
int sumb;

int A[] = { 2, 4, 1, 5, 9 };
int B[] = { 9, 12, 32, 43, 23};

suma = accumulate(A, A + sizeof(A) / sizeof(int), 0);
sumb = accumulate(B, B + sizeof(B) / sizeof(int), 0);

cout << ((sumA > sumB) ? "true" : "false");

return 0;
} 
```

# debugging - 断点在 DartEditor 中是否无法正常工作？

> ID：15197844
> 
> 赞同：1
> 
> 时间：2013-03-04T09:02:07.073
> 
> 标签：debugging, command-line, dart, dart-editor

我在最新的 Dart 编辑器（版本 0.4.0_r18915）中出现了一些意外行为。

我有这个最小的命令行应用程序，它可以接受或不接受命令行参数并打印 hello -somenoe- 消息。该应用程序运行良好。但是调试程序无法在每个 if 语句主体内设置的断点处停止。（我想看看 options.arguments.isEmpty 是真还是假的应用程序的状态）

```
var person;

main(){
    var options = new Options();
    if(options.arguments.isEmpty){
        person = "someone who forgot to pass a command-line argument";
    } else {
        person = options.arguments[0];
    }
    print("Hello, $person!");

} 
```

调试器将在其他行的断点处停止，但不在：

```
person = "someone who forgot to pass a command-line argument"; 
```

或在：

```
person = options.arguments[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:24:03.410

是的，提交一个错误。我的怀疑是调试器只能在所谓的“安全点”处停止，并且将常量分配给变量不会创建一个。在其上方添加一些行，例如 print("breakpoint"); 如果是这样的话，应该会有所帮助。但我也看到断点没有触发的其他问题。

# c - OpenGL：如何使用鼠标拖动图像并将其移动到线条上

> ID：15197858
> 
> 赞同：0
> 
> 时间：2013-03-04T09:03:01.733
> 
> 标签：c, opengl

我想用鼠标将图像拖到一行，当图像靠近行时，图像会自动移动到行上，就像某些`"floor planner"`程序一样------------你创建将门拖到这面墙上，当门靠近墙壁时，门会自动出现在墙上。

OpenGL能做到吗？

如果可以的话，谁能告诉我怎么做？如果不能，谁能告诉我我该怎么做？
给我一个例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T09:41:23.587

OpenGL 是一个渲染 API，它的目的是根据应用程序提供给它的描述生成光栅化图像。

它对用户输入一无所知，更不知道应用程序的“域对象”，例如门、墙等。它所处理的只是抽象坐标和矩阵，描述了将这些 3D 坐标转换为 2D 以进行光栅化以及表面着色等的变换和投影。

所以，由你来实现它，这样你最终传递给 OpenGL 的坐标最终就是你想要的。

捕捉通常是*测量*到某个引导对象的距离以及随后对输入坐标进行*量化*以对应于引导的组合。

# java - 支持 JPA 的 OSGI bunfle 没有 Persistence provider 错误

> ID：15197859
> 
> 赞同：1
> 
> 时间：2013-03-04T09:03:06.240
> 
> 标签：java, osgi, osgi-bundle

我创建了支持 JPA2.0 的小型 OSGI buldle 项目来持久化 Student(Entity class) 对象。

我将能够成功启动此服务。

我创建了另一个客户端捆绑项目来访问此服务。当我尝试启动客户端 buldle 服务时，出现以下错误

**引起：javax.persistence.PersistenceException：没有名为 StudentJPAService 的 EntityManager 的持久性提供程序**

**请在下面找到完整的堆栈跟踪**

```
!ENTRY StudentJPAClient 4 0 2013-03-04 14:17:21.846
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in student.jpaclient.Activator.start() of bundle StudentJPAClient.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: java.lang.ExceptionInInitializerError
    at com.student.jpaservice.serviceimpl.StudentDAOService.persist(StudentDAOService.java:16)
    at student.jpaclient.Activator.start(Activator.java:30)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 12 more
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named StudentJPAService
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at com.student.jpaservice.util.StudentUtil.<clinit>(StudentUtil.java:11)
    ... 17 more
Root exception:
java.lang.ExceptionInInitializerError
    at com.student.jpaservice.serviceimpl.StudentDAOService.persist(StudentDAOService.java:16)
    at student.jpaclient.Activator.start(Activator.java:30)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named StudentJPAService
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at com.student.jpaservice.util.StudentUtil.<clinit>(StudentUtil.java:11)
    ... 17 more 
```

**清单文件**

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: StudentJPAService
Bundle-SymbolicName: StudentJPAService;singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: com.student.jpaservice.actovator.Activator
Import-Package: javax.persistence;version="1.1.0",
 org.osgi.framework
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Export-Package: com.student.jpaservice.actovator,
 com.student.jpaservice.model,
 com.student.jpaservice.service,
 com.student.jpaservice.serviceimpl,
 com.student.jpaservice.util
Bundle-ActivationPolicy: lazy
Meta-Persistence: META-INF/persistence.xml
Bundle-ClassPath: ../lib/j2ee.jar,
 ../lib/javax.j2ee.persistence.jar,
 ../lib/mysql-connector-java-5.1.7-bin.jar,
 .
JPA-PersistenceUnits: StudentJPAService 
```

我可以在下面的帖子中看到同样的问题，但这并没有帮助我解决我的问题。
[OSGi + JPA(postgresql)](https://stackoverflow.com/questions/7879827/osgi-jpapostgresql)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-16T14:14:12.527

我意识到这无异于线程死灵法，但我自己也为同样的问题苦苦挣扎了一段时间，直到我偶然发现了绕过持久性提供程序查找批发的解决方案。

使用此代码...

```
EntityManagerFactory emf = new org.eclipse.persistence.jpa.PersistenceProvider().createEntityManagerFactory("unit_name_here", properties);
    EntityManager manager = emf.createEntityManager(); 
```

...我直接调用 EclipseLink 并忽略整个服务提供商查找。我意识到这不是超级可移植的，因为你不能在不重新编译模块的情况下更换持久性提供程序，但我也不记得我上次想这样做是什么时候。

希望这对将来的某人有所帮助，并为他们节省一天半的头发拉扯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:16:13.287

我建议将 Aries JPA 与 OpenJPA 或 Eclipselink 一起用作持久性提供程序。我现在推荐 OpenJPA，因为 Eclipselink 支持仍然很新鲜。

有关完整示例，您可以查看我的[Apache Karaf DB 教程](http://www.liquid-reality.de/display/liquid/2012/01/13/Apache+Karaf+Tutorial+Part+6+-+Database+Access)。它包含一个 jpa 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:46:44.567

看来，在您的包中，您还没有定义任何持久性管理器，例如 Hibernate、Eclipse Link 等等……

检查你的依赖树，在你的导入包中你只定义了两个包，osgi核心和JPA，但是JPA只是一个规范（接口），你需要一个实现这些接口的引擎。

# http - Cookie 相对于服务器端存储有什么好处？

> ID：15197860
> 
> 赞同：1
> 
> 时间：2013-03-04T09:03:13.640
> 
> 标签：http, cookies

服务器端存储是指数据库或某种持久缓存系统，而不是会话。通常我们使用cookie在客户端存储一些用户特定的数据，这些数据将在以后的请求中发送到服务器。但是，我们有可能将这些数据存储在服务器端存储中。

首先，它会在使用一些服务器存储时节省大量带宽。通常带宽比内存和硬盘贵得多。

其次，它可能有助于安全。除非明确用于 JavaScript 访问，否则 HttpOnly 应该是默认的。

第三，目前部分移动设备不支持cookies。

我不建议完全避免使用 Cookie。我明白有些 cookie 是必须的，比如会话 cookie。对于非会话 cookie，Cookie 相对于服务器端存储有什么好处？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:16:37.210

正如 Blender 提到的，您可以在客户端访问 javascript 中的 cookie。这是巨大的，因为这意味着您可以完全在客户端进行一些计算，从而节省带宽和服务器负载。

在您的第一点中，您提到了保存带宽：如果您在客户端和服务器端执行任务，这正是 cookie 可以实现的。基本上，如果您可以使用用户的计算能力，那将比您的服务器更智能（而且您可以减少延迟并增加用户体验）。

# java - 无法弄清楚为什么我得到不兼容的类型

> ID：15197861
> 
> 赞同：0
> 
> 时间：2013-03-04T09:03:17.843
> 
> 标签：java

我在尝试根据这些说明编写方法时遇到不兼容类型错误的问题：“一种采用 int 参数并在屏幕上显示存储的 Cat 的详细信息（姓名、出生年份等）的方法索引位置。此方法必须确保参数是有效的索引位置，如果不是，则显示错误消息。（程序中有两个类相互使用）。我已经评论了我在下面收到错误的地方。我将不胜感激。谢谢。

```
import java.util.ArrayList;

public class Cattery
{
// instance variables - replace the example below with your own
private ArrayList <Cat> cats;
private String businessName;

/**
 * Constructor for objects of class Cattery
 */
public Cattery(String NewBusinessName)
{
    cats = new ArrayList <Cat>();
    NewBusinessName = businessName;
}

public void addCat(Cat newCat){

    cats.add(newCat);
}

public void indexDisplay(int index) {
    if((index >= 0) && (index <= cats.size()-1)) {
        index = cats.get(index);                       //incompatible types?
        System.out.println(index);
    }
    else{
        System.out.println("Invalid index position!");
    }
 }

 public void removeCat(int indexremove){
     if((indexremove >= 0) && (indexremove <= cats.size()-1)) {
         cats.remove(indexremove);
        }
    else{
        System.out.println("Invalid index position!");
    }
  }

 public void displayNames(){
   System.out.println("The current guests in Puss in Boots Cattery:");
   for(Cat catNames : cats ){
       System.out.println(catNames.getName());

 }
 }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:05:14.150

因为你已经像这样定义了猫：

```
 cats = new ArrayList <Cat>(); 
```

这将在位置返回一只猫`index`：

```
cats.get(index); 
```

但是您已将 index 定义为 int 并为其分配 cat：

```
 index = cats.get(index); 
```

从列表中获取项目的正确方法是：

```
Cat cat = cats.get(index); 
```

要打印检索到的猫的名称，只需运行：

```
System.out.println(cat.getName()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:05:56.850

此语句中的问题：

```
index = cats.get(index); 
```

cat.get(index) 返回一个 cat 对象。其中 as index 是 int 类型。cat 对象不能分配给 int 类型变量。因此它显示类型不兼容。

一种解决方案是这样做：

```
Cat cat = cats.get(index); 
```

并打印上述语句返回的猫，您可以覆盖Cat 类中的[toString()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)

请执行下列操作 ：

```
public String toString()
{
    return "cat name: " + this.getName();
} 
```

要在 Cattery 类中打印 Cat 的信息，请使用以下语句

```
System.out.println(cat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:05:20.133

`cats.get()`返回`Cat`，并且您尝试将结果分配给`int`：

```
 index = cats.get(index);                       //incompatible types? 
```

目前尚不清楚该函数的目的是什么，但您可以`cats.get()`像这样存储结果：

```
 Cat cat = cats.get(index); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T09:05:59.300

好的，所以在这一行：

```
index = cats.get(index); 
```

你*期望* `cats.get(index)`返回什么？`cats`是类型`ArrayList<Cat>`- 所以你应该找到 的文档[`ArrayList<E>`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，然后导航到该[`get`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#get%28int%29)方法，并看到它是这样声明的：

```
public E get(int index) 
```

所以在一个`ArrayList<Cat>`，`get`方法会返回`Cat`。

所以你要：

```
Cat cat = cats.get(index); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:11:30.073

该声明

```
 index = cats.get(index); 
```

将返回 Cat 项目它不会在这里返回 int 值你将 Cat 项目分配给 int 类型所以为了获得正确的输出你 hava 更改代码为

```
Cat cat=cats.get(index); 
```

# codeigniter - 简单的朋友系统 Codeigniter

> ID：15197864
> 
> 赞同：0
> 
> 时间：2013-03-04T09:03:25.500
> 
> 标签：codeigniter

各位大佬，我只想问一下怎么做一个简单的好友系统？我已经为朋友列表和请求制作了一张表格，我已经可以添加朋友，但我的问题是我只能添加一个帐户。我该如何解决？如果有人知道请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:06:58.303

当然，您只需要一个用户表，然后是一个名为 users_to_friends 之类的连接表，您可以在其中存储他们朋友的 user_id 和 user_id

# objective-c - 目标 C - iPhone/iPad 应用程序 - 故事板未反映应用程序更改的奇怪问题

> ID：15197865
> 
> 赞同：1
> 
> 时间：2013-03-04T09:03:28.247
> 
> 标签：objective-c, storyboard, xcode4.6

我正在开发适用于通用（iPhone 和 iPad）环境的应用程序。避免再次构建 UI。我从我为 iPhone 工作的应用程序中复制了故事板。（我必须进一步增强它）并将其重命名为 MainStoryboard_iPhone.storyboard 和 MainStoryboard_iPad.storyboard。iphone 和 ipad 模拟器上的 UI 都适用于旧 UI。

即使是新的代码更改也可以正常工作，但是 UI 上的更改（例如标签文本、按钮文本和在情节提要上添加/删除新 UI 组件）并未反映在应用程序上。该应用程序在构建后仍显示旧 UI。我尝试了干净的构建等。在文本编辑器中查看情节提要，新添加/更新的组件确实存在，但它们只是没有出现在应用程序上。

任何线索可能出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:07:00.973

除了复制故事板之外，您是否还在 iPad 部署项目目标的“摘要”页面上设置了正确的故事板？

![在此处输入图像描述](../Images/9a49ea37dc2a5b807fc737d984531fde.png)

# android - transport.send(msg) 未执行

> ID：15197867
> 
> 赞同：0
> 
> 时间：2013-03-04T09:03:32.847
> 
> 标签：android, jakarta-mail, transport

我有一个活动，我在下面的类中调用 send 方法..在我的代码中它挂在 transport.sendMessage(msg,msg.getallreceipents())..我尝试过尝试 cath，但它没有任何异常。一件事是当我使用 gmail 主机 smtp.gmail.com 和 gmail 帐户的用户名和密码时，它可以工作。

```
public class Mail extends javax.mail.Authenticator {
private String _user;
private String _pass;

private String[] _to;
private String _from;

private String _port;
private String _sport;

private String _host;

private String _subject;
private String _body;

private boolean _auth;

private boolean _debuggable;

private Multipart _multipart;

public Mail() {
    _host = "mail.namknights.org"; // default smtp server
    _port = "587"; // default smtp port
    _sport = "587"; // default socketfactory port

    _user = ""; // username
    _pass = ""; // password
    _from = ""; // email sent from
    _subject = ""; // email subject
    _body = ""; // email body

    _debuggable = false; // debug mode on or off - default off
    _auth = true; // smtp authentication - default on

    _multipart = new MimeMultipart();

    // There is something wrong with MailCap, javamail can not find a
    // handler for the multipart/mixed part, so this bit needs to be added.
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap
            .getDefaultCommandMap();
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
    CommandMap.setDefaultCommandMap(mc);
}

public Mail(String user, String pass) {
    this();

    _user = user;
    _pass = pass;
}

public boolean send() throws Exception {
    Properties props = _setProperties();

    if (!_user.equals("") && !_pass.equals("") && _to.length > 0
            && !_from.equals("") && !_subject.equals("")
            && !_body.equals("")) {

        Session session = Session.getInstance(props, this);
        session.setDebug(true);
        DataHandler handler = new DataHandler(new ByteArrayDataSource(
                _body.getBytes(), "text/plain"));
        MimeMessage msg = new MimeMessage(session);

        msg.setFrom(new InternetAddress(_from));
        msg.setDataHandler(handler);
        InternetAddress[] addressTo = new InternetAddress[_to.length];
        for (int i = 0; i < _to.length; i++) {
            addressTo[i] = new InternetAddress(_to[i]);
        }
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

        msg.setSubject(_subject);
        msg.setSentDate(new Date());

        // setup message body
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText(_body);
        _multipart.addBodyPart(messageBodyPart);

        // Put parts in message
        msg.setContent(_multipart);
        Log.v("mas", "Email is about to send");
        // send email
        Transport transport = session.getTransport("smtp");
        transport.connect(_host, 587, _user, _pass);
        Transport.send(msg);
        Log.v("mas", "Email was  send");
        return true;
    } else {
        Log.v("mas", "Email was  not send");
        return false;

    }
}

public class ByteArrayDataSource implements DataSource {
    private byte[] data;
    private String type;

    public ByteArrayDataSource(byte[] data, String type) {
        super();
        this.data = data;
        this.type = type;
    }

    public ByteArrayDataSource(byte[] data) {
        super();
        this.data = data;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getContentType() {
        if (type == null)
            return "application/octet-stream";
        else
            return type;
    }

    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(data);
    }

    public String getName() {
        return "ByteArrayDataSource";
    }

    public OutputStream getOutputStream() throws IOException {
        throw new IOException("Not Supported");
    }
}

@Override
public PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(_user, _pass);
}

private Properties _setProperties() {
    Properties props = new Properties();

    props.put("mail.smtp.host", _host);

    if (_debuggable) {
        props.put("mail.debug", "true");
    }

    if (_auth) {
        props.put("mail.smtp.auth", "true");
    }

    props.put("mail.smtp.socketFactory.port", _sport);
    props.put("mail.smtp.socketFactory.class", "javax.net.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "true");
    props.put("mail.smtp.starttls.enable", false);

    return props;
}

// the getters and setters
public String getBody() {
    return _body;
}

public void setBody(String _body) {
    this._body = _body;
}

public void setTo(String[] toArr) {
    // TODO Auto-generated method stub
    this._to = toArr;
}

public void setFrom(String string) {
    // TODO Auto-generated method stub
    this._from = string;
}

public void setSubject(String string) {
    // TODO Auto-generated method stub
    this._subject = string;
}

// more of the getters and setters ….. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:42:52.973

如果它适用于 Gmail，那么您的代码基本上是正确的。如果其他邮件服务器出现故障，则可能是配置问题。使用 session.setDebug(true) 从 JavaMail 获取调试输出，这可能会提供有关问题所在的线索。

请注意，如果您一直在等待永远不会响应的服务器，您可能需要设置一些超时属性。请参阅[com.sun.mail.smtp 包的 javadocs](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)。

最后，[您的代码中不需要所有套接字工厂的东西](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。

# c# - 如何在 TeeChart 中更改轴刻度的颜色

> ID：15197870
> 
> 赞同：1
> 
> 时间：2013-03-04T09:03:45.320
> 
> 标签：c#, winforms, teechart

我正在使用应用程序中的 C# 窗口。我正在使用 .net v3 的 TeeChart 来绘制图表。我可以为每个 Y 轴创建不同颜色的多个 Y 轴，如下图所示。 ![在此处输入图像描述](../Images/9e7105134c13679c38a235d61ef61b0a.png) 现在我可以用不同的颜色显示轴，但我也想为其轴的比例分配相同的轴颜色。请帮助我需要使用什么属性。

另一个问题是，如果我有多个轴，那么在图表上为每个轴创建单独的轴会占用很多空间。我想水平分配轴的比例，而不是像我现在得到的那样。请任何人帮助我请我需要使用哪些属性。我想表示比例和轴，如下图所示。 ![规模](../Images/07c6a41c6851fe502c51828e546e4486.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:22:43.787

我制作了一个简单的代码，在其中为我绘制的每个自定义轴设置了相同的比例，并自动将所有轴放置在正确的位置。我认为您可以使用与 next 类似的代码来尝试实现您想要的效果：

```
public Form1()
        {
            InitializeComponent();
            InitializeChart();
        }

        private DataSet GetData()
        {
            DataSet TeeDataSet = new DataSet();
            DateTime dt = DateTime.Today;
            DataTable TeeDataTable = new DataTable("DataTable1");
            DataColumn xval = new DataColumn("DateTime", typeof(DateTime));
            DataColumn yval = new DataColumn("SystemName", typeof(double));

            TeeDataTable.Columns.Add(xval);
            TeeDataTable.Columns.Add(yval);
            Random rnd = new Random();
            for (int i = 0; i < 10; i++)
            {
                DataRow newRow = TeeDataTable.NewRow();
                newRow[xval] = dt;
                newRow[yval] = rnd.Next(100);
                TeeDataTable.Rows.Add(newRow);
                dt = dt.AddMonths(1);
            }
            TeeDataSet.Tables.Add(TeeDataTable);
            return TeeDataSet;
        }
        private void InitializeChart()
        {
            tChart1.Aspect.View3D = false;
            tChart1.Header.Visible = false;
            tChart1.Legend.Alignment = LegendAlignments.Bottom;
            tChart1.Legend.CheckBoxes = true;
            for (int i = 0; i < 5; i++)
            {
                new Steema.TeeChart.Styles.Line(tChart1.Chart);
                tChart1[i].Title = "SystemName";
                tChart1[i].DataSource = GetData();//Add values using DataSource
                tChart1[i].XValues.DataMember = "DateTime";
                tChart1[i].XValues.DateTime = true;
                tChart1[i].XValues.Order = Steema.TeeChart.Styles.ValueListOrder.Ascending;
                tChart1[i].YValues.DataMember = "SystemName";
                tChart1.Axes.Custom.Add(new Steema.TeeChart.Axis(tChart1.Chart));
                tChart1[i].CustomVertAxis = tChart1.Axes.Custom[i];
                tChart1.Axes.Custom[i].AxisPen.Color = tChart1[i].Color;
                tChart1.Axes.Custom[i].Grid.Visible = false;

                tChart1.Axes.Custom[i].PositionUnits = PositionUnits.Pixels;
            }

            tChart1.Panel.MarginUnits = PanelMarginUnits.Pixels;
            tChart1.Panel.MarginTop = 20;
            tChart1.Draw();
            PlaceAxes(0, 0, 0, 0, 0);
            tChart1.AfterDraw += new PaintChartEventHandler(tChart1_AfterDraw);
            tChart1.ClickLegend += new MouseEventHandler(tChart1_ClickLegend);
            tChart1.Draw();
        }

        void tChart1_ClickLegend(object sender, MouseEventArgs e)
        {
            tChart1.Draw();
        }

        void tChart1_AfterDraw(object sender, Graphics3D g)
        {
            PlaceAxes(0, 0, 0, 0, 0);
        }

        private void PlaceAxes(int nSeries, int NextXLeft, int NextXRight, int MargLeft, int MargRight)
        {
            const int extraPos = 12;
            const int extraMargin = 60;
            //Variable 
            int MaxLabelsWidth;
            int lenghtTicks;
            int extraSpaceBetweenTitleAndLabels;
            foreach (Steema.TeeChart.Styles.Line s in tChart1.Series)
            {
                if (s.Active)
                {
                    s.CustomVertAxis.Visible = true;
                    s.CustomVertAxis.SetMinMax(tChart1[0].YValues.Minimum, tChart1[0].YValues.Maximum);
                    MaxLabelsWidth = s.CustomVertAxis.MaxLabelsWidth();
                    lenghtTicks = s.CustomVertAxis.Ticks.Length;
                    extraSpaceBetweenTitleAndLabels = (s.CustomVertAxis.Title.Width);//- tChart1.Axes.Custom[nSeries].MaxLabelsWidth());
                    if (s.CustomVertAxis.Title.Visible)
                    {
                        s.CustomVertAxis.RelativePosition = NextXLeft;
                        NextXLeft = NextXLeft - (MaxLabelsWidth + lenghtTicks + extraSpaceBetweenTitleAndLabels + extraPos);
                        MargLeft = MargLeft + extraMargin;
                    }

                    else
                    {
                        s.CustomVertAxis.RelativePosition = NextXLeft;
                        NextXLeft = NextXLeft - (MaxLabelsWidth + lenghtTicks + extraPos);
                        MargLeft = MargLeft + extraMargin;
                    }

                    tChart1.Panel.MarginLeft = MargLeft;
                    tChart1.Panel.MarginRight = MargRight;

                }
                else
                {
                    s.CustomVertAxis.Visible = false;
                }
            }
        } 
```

你能告诉我们以前的代码是否适用于你吗？如果您有任何问题，请告诉我。

我希望会有所帮助。

谢谢，

# java - 到真实打印机的打印输出与java中的虚拟打印机不同

> ID：15197872
> 
> 赞同：1
> 
> 时间：2013-03-04T09:03:49.290
> 
> 标签：java

在我的应用程序中，以下代码打印卡片的正面和背面。在虚拟打印机（如 Virtual PDF 打印机、ImagePrinter Pro 和 Microsoft XPS Document Writer）上，输出是正确的。但是当我在真正的打印机上测试它时，它只打印了一半宽度的图像，而且高度是正确的。我用 A4 和 Letter 格式进行了测试，但一切都在风向标。不知道有什么问题。

```
public int print(Graphics g, PageFormat pageFormat, int pageIndex) {
        Graphics2D g2d = (Graphics2D) g;

        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING,
                RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
                RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                RenderingHints.VALUE_INTERPOLATION_BICUBIC);

        int w = 360, h = 240;
        int padding = 2;

        BufferedImage temp = new BufferedImage(w * 2, h, BufferedImage.TYPE_INT_ARGB);
        Graphics2D tempG = temp.createGraphics();

        tempG.drawImage(card.getFrontImage(), 0,  0,
                w, h, null);
        tempG.drawImage(card.getBackImage(),  w, 0,
                w, h, null);
        tempG.dispose();

        g2d.drawImage(temp, (int) 0, 0 + padding,
                (int) pageFormat.getImageableWidth(), (int) pageFormat.getImageableHeight()/5, null);
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:09:33.253

这是一个非常简单的例子......

`PageFormat`可以手动（如示例中）或从打印机选择对话框中建立

```
public class TestPrint implements Printable  {

    private BufferedImage background;
    public static final float DPI = 72;

    public static void main(String[] args) {
        new TestPrint();
    }

    public TestPrint() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                try {
                    background = ImageIO.read(new File("/Users/swhitehead/Dropbox/MegaTokyo/MgkGrl_Yuki_by_fredrin.jpg"));
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

                float width = cmToPixel(21f, DPI);
                float height = cmToPixel(29.7f, DPI);

                Paper paper = new Paper();
                float margin = cmToPixel(1, DPI);
                paper.setImageableArea(margin, margin, width - (margin * 2), height - (margin * 2));
                PageFormat pf = new PageFormat();
                pf.setPaper(paper);

                BufferedImage img = new BufferedImage(Math.round(width), Math.round(height), BufferedImage.TYPE_INT_RGB);
                Graphics2D g2d = img.createGraphics();
                g2d.setColor(Color.WHITE);
                g2d.fill(new Rectangle2D.Float(0, 0, width, height));
                try {
                    g2d.setClip(new Rectangle2D.Double(pf.getImageableX(), pf.getImageableY(), pf.getImageableWidth(), pf.getImageableHeight()));
                    print(g2d, pf, 0);
                } catch (PrinterException ex) {
                    ex.printStackTrace();
                }
                g2d.dispose();

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JLabel(new ImageIcon(img)));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    public float cmToPixel(float cm, float dpi) {

        return (dpi / 2.54f) * cm;

    }

    public int print(Graphics graphics, PageFormat pageFormat, int page) throws PrinterException {

        if (page > 0) {
            return NO_SUCH_PAGE;
        }

        Graphics2D g = (Graphics2D) graphics;

        g.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
        if (background != null) {

            int x = (int)Math.round((pageFormat.getImageableWidth() - background.getWidth()) / 2f);
            int y = (int)Math.round((pageFormat.getImageableHeight() - background.getHeight()) / 2f);

            g.drawImage(background, x, y, null);

        }

        g.setColor(Color.BLACK);
        g.draw(new Rectangle2D.Double(0, 0, pageFormat.getImageableWidth() - 1, pageFormat.getImageableHeight() - 1));

        return PAGE_EXISTS;
    }
} 
```

# magento - 如何通过 Magento 中的 rate_id 获取运输方式代码？

> ID：15197875
> 
> 赞同：0
> 
> 时间：2013-03-04T09:04:10.463
> 
> 标签：magento, shipping

当我有`rate_id`.

我有一个表格`sales_flat_quote_shipping_rate`，其中定义了运输方式代码、代码标题和所有其他内容。我只想获取代码。我`rate_id`的就像`2163`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:32:49.313

很简单。使用下面的代码：

```
 /*Shipping Rate ID*/
    $rate_id = 2163;

    /*Load the Shipping Rate Model by its ID*/
    $salesQuoteRate = Mage::getModel('sales/quote_address_rate')->load($rate_id);

    if($salesQuoteRate){
       echo '<br/>CODE : '.$salesQuoteRate->getCode();
       echo '<br/>METHOD : '.$salesQuoteRate->getMethod();
    } 
```

# jboss - 如何从 JBossMQ 中的 SpyMessage 获取底层对象

> ID：15197876
> 
> 赞同：0
> 
> 时间：2013-03-04T09:04:11.380
> 
> 标签：jboss, jbossmq

我正在尝试编写一个使用 JDBC 从 JBossMQ 的 jms_messages 表中读取的简单 Java 程序。我正在使用 JBoss 4.0.4.GA。

我可以得到尽可能多的 SpyMessage，但我怎样才能得到实际的消息内容（在我正在查看的特定情况下，这是一个对象）。

我有这个语句的结果集“rs”：

```
SELECT messageid, messageblob FROM jms_messages WHERE DESTINATION LIKE 'TOPIC.MyTopic%' limit 3" 
```

然后我这样做（基于 JBoss 代码）：

```
long messageid = rs.getLong(1);
SpyMessage message = null;
byte[] st = rs.getBytes(2);
ByteArrayInputStream baip = new ByteArrayInputStream(st);
ObjectInputStream ois = new ObjectInputStream(baip);

message = SpyMessage.readMessage(ois);
message.header.messageId = messageid;

String jmstype = message.getJMSType();
String jms_message_id = message.getJMSMessageID();
System.out.println("jmstype=" +jmstype);
System.out.println("jms_message_id=" +jms_message_id);

String propertyName;
Enumeration e = message.getPropertyNames();
while (e.hasMoreElements())
{
    propertyName = (String)e.nextElement();
    System.out.println("property name = " +propertyName);
} 
```

但我没有打印任何属性，而且我不知道如何从 SpyMessage（实际上是 SpyObjectMessage）中获取我的实际对象。我会很感激任何指示。

我试过在 JBoss 论坛上问这个问题而没有回复，所以我希望在这里能有更好的运气。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:35:51.800

抱歉 - 答案很明显，我不确定我在发布问题时在想什么 - 简单地说：

```
Object objMessage = ((SpyObjectMessage)message).getObject(); 
```

# node.js - 这个 node.js/socket.io 代码给出“. 运算符后缺少名称”有什么问题？

> ID：15197877
> 
> 赞同：0
> 
> 时间：2013-03-04T09:04:15.450
> 
> 标签：node.js, socket.io

这是造成麻烦的线路。它是后端的 node.js + socket.io，它在 NetBeans 中显示错误。它从服务器发送消息，但句柄出现未定义。

```
io.sockets.in(socket._chatroom).emit('broadcast_message', {message: message, handle: socket._handle}); 
```

有什么建议么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:11:16.813

更改您的代码，使其占用多行代码。您将更容易找出`. operator`netbeans 正在谈论的内容。

# java - Hyper-V 来宾中是否有可靠的单调时间源来进行基准测试？

> ID：15197880
> 
> 赞同：1
> 
> 时间：2013-03-04T09:04:28.730
> 
> 标签：java, linux, benchmarking, hyper-v, sigar

Hyper-V 客人遇到可怕的时钟漂移。如果我的记忆没有让我失望，我会在几分钟的时间内看到很多秒的漂移，如果不是更少的话。而且我不是在谈论系统休眠等情况。

我想在这样的系统中对 Java 应用程序进行基准测试，测量进入和离开系统的单个消息的处理时间。单个消息的处理时间预计在 500 微秒到 3000 微秒之间（涉及一些 io）。

如有必要，我可以使用本机 .so 库。有问题的来宾系统将是可能具有 2.8.x 内核、64 位的 linux 机器。

我[在 Hyper-V 客人的 System.nanoTime 上](http://frankkieviet.blogspot.jp/2009/03/time-running-backwards-in-microsoft.html)发现的一篇文章并不令人鼓舞。

希望这可能`CLOCK_MONOTONIC_RAW`会拯救我，我`CLOCK_MONOTONIC`在[Sigar](http://support.hyperic.com/display/SIGAR/Home)资源中寻找，但没有发现任何东西。

有任何想法吗？或者这是一个没有希望的努力？

# .net - 获取抛出异常的类名

> ID：15197887
> 
> 赞同：1
> 
> 时间：2013-03-04T09:04:47.800
> 
> 标签：.net, c#-4.0, sharepoint, exception

[异常](http://msdn.microsoft.com/en-us/library/system.exception.aspx)类提供了许多属性，这些属性将提供有关引发异常的更多含义的完整详细信息。

*`InnerException-->Gets Exception instance that caused the current exception`*.

*`Message-->Gets a message that describes the current exception.`*

*`Source--> Gets or sets the name of application or object that causes the error.`*

*`StackTrace -->Gets a string representation of immediate frames on the call stack.`*

*`Public property -->TargetSite Gets the method that throws the current exception.`*

但有时它没有任何意义。

```
at Microsoft.SharePoint.SPList.GetItemById(String strId, Int32 id, String strRootFolder, Boolean cacheRowsetAndId, String strViewFields, Boolean bDatesInUtc) 
   at Microsoft.SharePoint.SPList.GetItemById(Int32 id) 
   at JafraWFTest.JafraCustomWFActivity.<Execute>b__0() 
```

在这种情况下，我不知道导致异常的任何内容、行号或类名。

那么**如何找到导致异常的类名。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:57:47.657

Please add some clearance to your question.

1.  Where do you get exception? Is it your custom code, or workflow in SP Designer?

2.  Is `JafraWFTest.JafraCustomWFActivity` your code or some 3rd party?

3.  Where do you get logs, 14 Hive\Logs ?

> so how to find the class name which causing the Exception .

The class which trows exception is `JafraWFTest.JafraCustomWFActivity`. It's a custom workflow action. The exception is throwing when it's being executed. `<Execute>b__0()` this means that `JafraWFTest.JafraCustomWFActivity` implements generic interface for workflow action with `Execute` method.

So if `JafraWFTest.JafraCustomWFActivity` is your code look for `JafraCustomWFActivity` class in `JafraWFTest` namespace and `Execute` method. If it's a 3rd party code. Try to look for JafraWFTest assembly (dll) in application BIN directory or GAC. And the other should be the same as for your code case.

From code semantic I assume that it's a test for custom workflow action. Check if JafraWFTest assembly should be installed to GAC for it and test environment (site, list, list items) is properly configured.

# c# - 事务性 NTFS 包装器

> ID：15197888
> 
> 赞同：0
> 
> 时间：2013-03-04T09:04:48.113
> 
> 标签：c#, io, wrapper, txf

我正在使用 msdn 上提供的事务性 NTFS 包装器[来](http://archive.msdn.microsoft.com/txfmanaged)支持文件系统操作的原子事务，可用示例仅显示如何使用 transactedFiles 但我还需要创建、移动和复制事务目录，我不知道如何使用 TransactedDirectory 类，你能帮忙吗？我试过这段代码，但它似乎不正确：

```
 if (Transaction.Current == null)
        {
            throw new Exception("Must be within a transaction scope");
        }
        using (TransactionScope folderTransaction = new TransactionScope(Transaction.Current))
        {
            TransactedDirectory.StartTxFResource("D:\\New");

           folderTransaction.Complete();
           TransactedDirectory.StopTxFResource("D:\\New");

        } 
```

它给出了一个错误“访问被拒绝，该文件夹正在被另一个进程使用”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:27:36.557

您的进程在哪个用户帐户下运行？检查它是否有权访问该`D:\New`文件夹。

为了快速检查，以管理员身份运行该进程（右键单击 myprocess.exe > 以管理员身份运行），如果它可以正常工作，您应该设置正确的权限，或者将您的代码设置为需要管理员级别的访问权限。

# javascript - iscroll 如何滚动？我无法弄清楚它是如何向上或向下滑动的

> ID：15197894
> 
> 赞同：-1
> 
> 时间：2013-03-04T09:05:06.877
> 
> 标签：javascript, swipe, iscroll

当我尝试在我的 android 手机中向下滑动时，我的 iscroll 对象不会向下滑动到底部，但与底部有一段距离。像这样的 HTML 模板：

```
 /*The HTML template code like this:*/
 <div class="content">
    <div class="scroller">
       <div class="div1">
       </div>
    </div>
 </div>

 /*The javascript code like this:*/
 $.get(url, function(html){
                _this.$('.div1').html(html);
                _this.$('.div1').css('display','inline-block');
                var width=_this.$('.div1').width()||'400px';
                var height=_this.$('.div1').height()||'900px';
                //height+=210;
                if(width<=400)width=400;
                _this.$('.div1').css('width',width);
                _this.$('.div1').css('height',height);
                _this.$('.scroller').css('width',width);
                _this.$('.scroller').css('height',height);
                if(html.indexOf('errorpage')<=0)
                    _this.$('.div1').addClass('padding-all-4px');
                setTimeout(function () {
                    _this.scroll = new iScroll(_this.$('.content')[0],{
                        hScroll: true,
                        vScroll: true,
                        lockDirection: false,
                        zoom: true,
                        zoomMin: 0.5,
                        zoomMax: 4,
                        doubleTapZoom: 2
                    });
                }, 0);
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:12:01.073

有两种使用 iScroll 的方法。您可以使用 iScroll 的 jScroll 包装器，也可以使用纯 iScroll。为了让 iScroll 正常工作到您要附加 iScroll 的容器，它应该满足一些条件

1.  容器应该有相对位置或绝对位置
2.  容器应该有**高度**（如果你想要 vScroll）和**宽度**（如果你想要 hScroll）
3.  容器溢出应该被隐藏（这由插件本身处理）
4.  您不需要为子容器设置任何高度。子容器高度应取决于其内容

尝试这样的事情。

**HTML 模板代码如下：**

```
<div class="content">
    <div id="scroller_content">
       <div class="dynamic-content">
         <!-- you contents should be here -->
       </div>
    </div>
 </div> 
```

**像这样的javascript代码：**

```
var scrollContent = new iScroll('scroller_content', {
    /* other options goes here */
  }
}); 
```

如果您将内容动态加载到子容器，那么您可以在加载内容后简单地刷新 iScroll 对象

```
scrollContent.refresh(); 
```

如果您想在 iScroll 中使用 iScroll，请尝试这样的操作。

会说你启用了两个 iScroll。并且**child_container**元素在您的**parent_container**内。然后，

```
var parentScroller, childScroller, childScrollerTimeout;

parentScroller = new iScroll('parent_container',{
  /* other options goes here */
});

childScroller = new iScroll('child_container',{
  /* other options goes here */
  onBeforeScrollStart : function(e){
    clearTimeout(childScrollerTimeout);
    parentScroller.disable();
  },
  onScrollEnd:function(){
    childScrollerTimeout = setTimeout(function(){
     parentScroller.enable()},500);
    /* it is required to use timeout. If not second time onBeforeScroll will not work as expected */
  }
}); 
```

如果您有任何不明白的地方，请告诉我。我将进一步演示。如果我在这里犯了任何错误，请向我道歉。希望这至少会有所帮助.. :)

# asp.net - 如何在 ASP.NET 中锁定数据库表

> ID：15197897
> 
> 赞同：0
> 
> 时间：2013-03-04T09:05:08.497
> 
> 标签：asp.net, linq, locking

我们的项目在 ASP.NET 上运行，我们使用带有`LINQ`（lambda 语法）的实体框架，我们需要防止同时插入到表中。我尝试使用`ReaderWriterLock`类，但它仅在一个会话中有效（在浏览器中打开更多选项卡时），但在更多不同的浏览器中无效。我还阅读了有关创建带有时间戳的表（不确定它是否可以解决我们的问题）或使用事务的信息，但现在不知道如何在带有`LINQ`.

你能告诉我如何在 ASP.NET 中处理这种独占的写访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:08:41.447

这 `ReaderWriterLockSlim`可能是一个不错的选择，但是如果您希望任何线程/进程都可以共享相同的锁，那么整体`ReaderWriterLockSlim`必须是静态成员。

也就是说，你的类应该是这样的：

```
public class Class1
{
     private readonly static ReaderWriterLockSlim _lock = new ReaderWriterLockSlim();
} 
```

## 重要的提示

使用应用层锁，您将能够锁定您自己的应用程序线程，以限制一个线程一次访问数据库。但是其他应用程序（不是 ASP.NET 应用程序，或者在 IIS 上的另一个应用程序池中的另一个应用程序）可能能够并行访问数据库进行读取和写入。

如果你想要一个 100% 有效的解决方案，你*必须*使用数据库事务。如果 SQL Server 是 RDBMS，则可以进行具有`Serializable`隔离级别的事务：

> 易失性数据可以读取但不能修改，事务过程中不能添加新数据。

[在这里了解更多。](http://msdn.microsoft.com/en-us/library/ms189122%28v=sql.105%29.aspx)

# opengl - 带有阴影矩阵的投影阴影，简单测试失败

> ID：15197903
> 
> 赞同：0
> 
> 时间：2013-03-04T09:05:28.000
> 
> 标签：opengl, matrix, shadow

我写了一个小程序来测试投影阴影是如何工作的。

我想特别检查投影点（可能是三角形的顶点）不位于光源和平面之间而是位于光本身后面的情况，即光位于点和平面之间.

问题是我的小程序甚至在点位于光和平面之间的情况下都不起作用。我检查了数十次计算，所以我猜应该是逻辑错误，但我找不到它..

这里的代码

```
public class test {

    int x = 0;
    int y = 1;
    int z = 2;
    int w = 3;
    float floor[][] = {
        {-100.0f, -100.0f, 0.0f},
        {100.0f, -100.0f, 0.0f},
        {100.0f, 100.0f, 0.0f},
        {-100.0f, 100.0f, 0.0f}};
    private float shadow_floor[] = new float[16];
    float light_position[] = {0.0f, 0.0f, 10.0f, 1.0f};

    public test() {
        //Find floorplane based on thre known points
        float plane_floor[] = calculatePlane(floor[1], floor[2], floor[3]);

        //store shadowMatrix for floor
        shadow_floor = shadowMatrix(plane_floor, light_position);

        float[] point = new float[]{1.0f, 0.0f, 5.0f, 1.0f};

        float[] projectedPoint = pointFmatrixF(point, shadow_floor);

        System.out.println("point: (" + point[x] + ", " + point[y] + ", " + point[z] + ", "
                + point[w] + ")");
        System.out.println("projectedPoint: (" + projectedPoint[x] + ", " + projectedPoint[y]
                + ", " + projectedPoint[z] + ", " + projectedPoint[w] + ")");
    }

    public static void main(String args[]) {
        test test = new test();
    }

    // make shadow matrix
    public float[] shadowMatrix(float plane[], float light_pos[]) {
        float shadow_mat[] = new float[16];
        float dot;

        dot = plane[x] * light_pos[x] + plane[y] * light_pos[y]
                + plane[z] * light_pos[z] + plane[w] * light_pos[w];

        shadow_mat[0] = dot - light_pos[x] * plane[x];
        shadow_mat[4] = -light_pos[x] * plane[y];
        shadow_mat[8] = -light_pos[x] * plane[z];
        shadow_mat[12] = -light_pos[x] * plane[3];

        shadow_mat[1] = -light_pos[y] * plane[x];
        shadow_mat[5] = dot - light_pos[y] * plane[y];
        shadow_mat[9] = -light_pos[y] * plane[z];
        shadow_mat[13] = -light_pos[y] * plane[w];

        shadow_mat[2] = -light_pos[z] * plane[x];
        shadow_mat[6] = -light_pos[z] * plane[y];
        shadow_mat[10] = dot - light_pos[z] * plane[z];
        shadow_mat[14] = -light_pos[z] * plane[w];

        shadow_mat[3] = -light_pos[w] * plane[x];
        shadow_mat[7] = -light_pos[w] * plane[y];
        shadow_mat[11] = -light_pos[w] * plane[z];
        shadow_mat[15] = dot - light_pos[w] * plane[w];

        return shadow_mat;
    }

    public float[] calculatePlane(float p1[], float p2[], float p3[]) {
        //Array for planlikningen
        float plane[] = new float[4];

        //Gitt to vektorer (tre punkter) i planet kan normalen regnes ut
        //Vi vil ha aboluttverdier
        plane[x] = Math.abs(((p2[y] - p1[y]) * (p3[z] - p1[z])) - ((p2[z] - p1[z])
                * (p3[y] - p1[y])));
        plane[y] = Math.abs(((p2[z] - p1[z]) * (p3[x] - p1[x])) - ((p2[x] - p1[x])
                * (p3[z] - p1[z])));
        plane[z] = Math.abs(((p2[x] - p1[x]) * (p3[y] - p1[y])) - ((p2[y] - p1[y]) 
                * (p3[x] - p1[x])));
        plane[w] = -(plane[x] * p1[x] + plane[y] * p1[y] + plane[z] * p1[z]);

        return plane;
    }

    public float[] pointFmatrixF(float[] point, float[] matrix) {
        int x = 0;
        int y = 1;
        int z = 2;
        float[] transformedPoint = new float[4];

        transformedPoint[x] =
                matrix[0] * point[x]
                + matrix[4] * point[y]
                + matrix[8] * point[z]
                + matrix[12];
        transformedPoint[y] =
                matrix[1] * point[x]
                + matrix[5] * point[y]
                + matrix[9] * point[z]
                + matrix[13];
        transformedPoint[z] =
                matrix[2] * point[x]
                + matrix[6] * point[y]
                + matrix[10] * point[z]
                + matrix[14];
        transformedPoint[w] = 1;

        return transformedPoint;
    }
} 
```

如果平面是 xy 平面，灯光在 (0, 0, 10) 并且点在 (1, 0, 5) 上，那么平面上的投影点应该是 (2, 0, 0)，但是程序正在返回 (400000.0, 0.0, 0.0, 1.0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:10:22.250

解决了，我错误地假设投影点的最后一个坐标是 1，但事实并非如此。

[https://math.stackexchange.com/questions/320527/projecting-a-point-on-a-plane-through-a-matrix](https://math.stackexchange.com/questions/320527/projecting-a-point-on-a-plane-through-a-matrix)

# c# - 如何在 C# 中更改 WebBrowser 控件用户代理

> ID：15197904
> 
> 赞同：5
> 
> 时间：2013-03-04T09:05:30.390
> 
> 标签：c#, winforms, webbrowser-control

我是在 C# 中使用 WebBrowser Control 的初学者。我尝试更改用户代理字符串

我的 Windows 窗体中的 WebBrowser 控件。我怎样才能做到这一点 ？

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T09:11:05.877

您可以在 WebBrowser 的 Navigate 方法中设置任何附加标头

```
WebBrowser wc = new WebBrowser();
wc.Navigate("http://google.com", null, null, "User-Agent: User agent"); 
```

# oracle - 用作子查询时的分层查询给出：ORA-00911：无效字符

> ID：15197912
> 
> 赞同：0
> 
> 时间：2013-03-04T09:06:02.000
> 
> 标签：oracle, plsql, oracle10g, plsqldeveloper

我一直在尝试执行以下查询，并引发以下错误：

**ORA-00911: 无效字符**

```
select 
sum(coalesce(decode(FKTD_DR_CR_TYPE,'1',FKTD_NRS_AMOUNT,0),0)) as DEBIT_AMOUNT,
sum(coalesce(decode(FKTD_DR_CR_TYPE,'0',FKTD_NRS_AMOUNT,0),0)) as CREDIT_AMOUNT 
from FMS_KS_TRANS_DTL 
inner join FMS_KS_TRANS_MST 
    ON FMS_KS_TRANS_MST.FKTM_TRANS_MST_ID = FMS_KS_TRANS_DTL.FKTD_TRANS_MST_ID 
inner join FMS_FC_VOUCHER_CONFIG 
    ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_KS_TRANS_MST.FKTM_VOUCHER_ID 
where FFVC_ACCOUNT_TYPE = 5 and FKTM_FISCAL_YEAR='2066/67'
and FKTD_ACC_ID in 
(
    select FFAM_ACC_ID from FMS_FC_ACC_MST
    where ffam_group_flag = 2 and FFAM_FISCAL_YEAR='2066/67'
    start with ffam_acc_id in 
    (
        select distinct FKP_CASH_ACC_ID from FMS_KS_PARAMETER 
        where FKP_FISCAL_YEAR='2066/67'
    )
    connect by ffam_group_flag = 2 
    and prior ffam_acc_id = ffam_upper_acc_id;
    /*
      This sub query executes fine if executed separately 
      and this whole query block executes fine if 
      this hierarchical query is not used.
    */
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:08:49.153

评论查询前的分号？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:16:07.997

子查询不应以`;`

```
select 
sum(coalesce(decode(FKTD_DR_CR_TYPE,'1',FKTD_NRS_AMOUNT,0),0)) as DEBIT_AMOUNT,
sum(coalesce(decode(FKTD_DR_CR_TYPE,'0',FKTD_NRS_AMOUNT,0),0)) as CREDIT_AMOUNT 
from FMS_KS_TRANS_DTL 
inner join FMS_KS_TRANS_MST 
    ON FMS_KS_TRANS_MST.FKTM_TRANS_MST_ID = FMS_KS_TRANS_DTL.FKTD_TRANS_MST_ID 
inner join FMS_FC_VOUCHER_CONFIG 
    ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_KS_TRANS_MST.FKTM_VOUCHER_ID 
where FFVC_ACCOUNT_TYPE = 5 and FKTM_FISCAL_YEAR='2066/67'
and FKTD_ACC_ID in 
(
    select FFAM_ACC_ID from FMS_FC_ACC_MST
    where ffam_group_flag = 2 and FFAM_FISCAL_YEAR='2066/67'
    start with ffam_acc_id in 
    (
        select distinct FKP_CASH_ACC_ID from FMS_KS_PARAMETER 
        where FKP_FISCAL_YEAR='2066/67'
    )
    connect by ffam_group_flag = 2 
    and prior ffam_acc_id = ffam_upper_acc_id
); 
```

我猜应该可以工作（分号移动），除非还有其他错误:-)

# eclipse - 在 Eclipse/CounterClockWise 中使用线程时，输出被发送到控制台而不是 REPL

> ID：15197914
> 
> 赞同：5
> 
> 时间：2013-03-04T09:06:21.260
> 
> 标签：eclipse, clojure, counterclockwise

我尝试了[本](http://java.ociweb.com/mark/clojure/article.html)指南中的这段代码：

```
(defn my-fn [ms]
  (println "entered my-fn")
  (Thread/sleep ms)
  (println "leaving my-fn"))

(let [thread (Thread. #(my-fn 1))]
  (.start thread)
  (println "started thread")
  (while (.isAlive thread)
    (print ".")
    (flush))
  (println "thread stopped")) 
```

当我执行它时，部分输出显示在 REPL 中，另一部分显示在控制台中（因为我通常隐藏它，因为我不使用它，所以它会弹出）。

我想将所有输出发送到 REPL 窗口，我该如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T09:18:48.347

这是因为`*out*`在新线程中没有绑定到 REPL 编写器。您可以手动绑定它：

```
(let [thread (let [out *out*] 
               (Thread. #(binding [*out* out] 
                           (my-fn 1))))]
  (.start thread)
  (println "started thread")
  (while (.isAlive thread)
    (print ".")
    (flush))
  (println "thread stopped")) 
```

# vb.net - 在 Vb.net 中翻转文本

> ID：15197916
> 
> 赞同：0
> 
> 时间：2013-03-04T09:06:26.173
> 
> 标签：vb.net, textbox, system.drawing, flip, drawing2d

我在 VB.NET 中翻转文本时遇到问题 它已翻转但没有线闸

见链接： [http ://www.spider-news.net/Flip_Text_question.JPG](http://www.spider-news.net/Flip_Text_question.JPG)

```
Imports System.Drawing.Drawing2D
Imports System.Drawing

Public Class Form1

  Private Sub Form1_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint

    ' Draw the text and the surrounding rectangle START.
    Dim text1 As String = RichTextBox1.Text
    Dim font1 As New Font("Arial", 10, FontStyle.Bold, GraphicsUnit.Point)
    Try
        Dim rect1 As New Rectangle(10, 10, 1000, 140)

        ' Create a StringFormat object with the each line of text, and the block 
        ' of text centered on the page. 
        Dim stringFormat As New StringFormat()
        stringFormat.Alignment = StringAlignment.Center
        stringFormat.LineAlignment = StringAlignment.Center

        ' Draw the text and the surrounding rectangle.
        e.Graphics.DrawString(text1, font1, Brushes.Blue, rect1, stringFormat)
        e.Graphics.DrawRectangle(Pens.Black, rect1)

    Finally
        font1.Dispose()
    End Try
    ' Draw the text and the surrounding rectangle END.

    '' FLIP TEXT ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    ' Draw Flipped Text the text surrounding rectangle START.

    Using the_font As New Font("Arial", 20, FontStyle.Bold, GraphicsUnit.Point)

        DrawFlippedText(e.Graphics, the_font, Brushes.Black, 10, 10, RichTextBox1.Text, True, False)

        Dim txt_size As SizeF
        txt_size = e.Graphics.MeasureString(RichTextBox1.Text, the_font)
        e.Graphics.DrawRectangle(Pens.Red, 10, 10, txt_size.Width, txt_size.Height)

    End Using

    ' Draw Flipped Text the text surrounding rectangle END.
    '' FLIP TEXT ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
End Sub

Public Sub DrawFlippedText(ByVal gr As Graphics, ByVal the_font As Font, ByVal the_brush As Brush, ByVal x As Integer, ByVal y As Integer, ByVal txt As String, ByVal flip_x As Boolean, ByVal flip_y As Boolean)

    ' Save the current graphics state.
    Dim state As GraphicsState = gr.Save()

    ' Set up the transformation.
    Dim scale_x As Integer = IIf(flip_x, -1, 1)
    Dim scale_y As Integer = IIf(flip_y, -1, 1)
    gr.ResetTransform()
    gr.ScaleTransform(scale_x, scale_y)

    ' Figure out where to draw.
    Dim txt_size As SizeF = gr.MeasureString(txt, the_font)

    If flip_x Then x = -x - RichTextBox1.Size.Width
    If flip_y Then y = -y - RichTextBox1.Size.Height

    Dim rect1 As New Rectangle(10, 10, 1000, 140)
    Dim stringFormat As New StringFormat()
    stringFormat.Alignment = StringAlignment.Center
    stringFormat.LineAlignment = StringAlignment.Center

    ' Draw.
    gr.DrawString(txt, the_font, the_brush, x, y)

    ' Restore the original graphics state.
    gr.Restore(state)

End Sub

End Class 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:29:37.090

我的猜测是，如果不存在换行符，则必须将字符串拆分为单个单词。

然后将单词一一连接并测量长度。如果它超出了您的线宽，请绘制此字符串并继续下一个单词。

下一次绘制应该在 y 坐标 + 你的行高上。

我在 pdf 中执行此操作，我将文本放置到可能超过 1 行的绝对位置：

```
 Dim splitted As String() = text.Split()
        Dim tempchunk As Chunk = New Chunk("", pdfFont)
        Dim count As Integer = 0
        For Each s As String In splitted
            Dim chunk2 As Chunk
            chunk2 = New Chunk(tempchunk.Content, pdfFont)
            chunk2.Append(" " & s)
            If chunk2.GetWidthPoint() > 155 Then
                cb.SaveState()
                cb.BeginText()
                cb.MoveText(x, y - (13 * count))
                cb.SetFontAndSize(bfont, 11)
                cb.ShowText(tempchunk.Content.Trim())
                cb.EndText()
                cb.RestoreState()
                tempchunk = New Chunk(s, pdfFont)
                count += 1
            Else
                tempchunk.Append(" " & s)
            End If
        Next
        If tempchunk.Content <> "" Then
            cb.SaveState()
            cb.BeginText()
            cb.MoveText(x, y - (13 * count))
            cb.SetFontAndSize(bfont, 11)
            cb.ShowText(tempchunk.Content.Trim())
            cb.EndText()
            cb.RestoreState()
        End If 
```

它是pdf的代码，但也许有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:42:52.130

尝试这个。

我创建了一个位图，在那里绘制字符串和矩形，翻转它，然后在窗体上绘制位图（带有翻转的文本）。

```
 Public Class Form1
      Private Sub RichTextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RichTextBox1.TextChanged
        Dim b As New Bitmap(300, 100)
        Dim g As Graphics = Graphics.FromImage(b)
        Dim d As Graphics = Me.CreateGraphics

        Dim r As New Rectangle(0, 0, b.Width - 1, b.Height - 1)
        Dim f As New StringFormat
        f.Alignment = StringAlignment.Center
        f.LineAlignment = StringAlignment.Center

        g.Clear(BackColor)
        g.DrawRectangle(Pens.Red, r)
        g.DrawString(RichTextBox1.Text, RichTextBox1.Font, Brushes.Blue, r, f)
        b.RotateFlip(RotateFlipType.RotateNoneFlipX)
        d.DrawImageUnscaled(b, 10, 10)

        g.Dispose()
        b.Dispose()
        d.Dispose()
    End Sub
End Class 
```

# css - 带样式的 CSS3 圆角文本框

> ID：15197925
> 
> 赞同：2
> 
> 时间：2013-03-04T09:07:14.927
> 
> 标签：css, textbox, rounded-corners, roundedcorners-dropshadow

我是 css3 的新手，虽然外面有很多 css 工具生成器，但我不知道如何编码我提供的这个图像。请帮忙？？..这将有利于我在我的一个主要科目上的作业。非常感谢！

![在此处输入图像描述](../Images/abfe6df63e308d217f1044a9648887e2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:12:30.663

在 CSS 中使用 div 标签上的 'border-radius' CSS 属性来圆化 div 的角并在其中放置图像非常简单。

您的 HTML 将如下所示：

```
<div id=image_box>
<img src='someimagelocation'>
</div> 
```

然后，您需要将潜水的大小设置为图像的确切宽度和高度，并确保将溢出设置为隐藏并且设置了边框半径属性：

```
#image_box {
width:200px;
height:150px;
overflow: hidden;
border-radius:0.5em;
} 
```

这应该会给你想要的结果！

添加：

要添加阴影等，请在同一 div CSS 标记中使用 CSS 属性“box-shadow”。

```
box-shadow:0 1px 2px #aaa; 
```

您将需要谷歌这些语法是如何工作的。但是我已经给了你所有必要的工具来很容易地研究它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:23:55.440

诀窍是`box-shadow`多次使用：

```
box-shadow: 0 4px 6px -5px hsl(0, 0%, 40%), inset 0px 4px 6px -5px black; 
```

![在此处输入图像描述](../Images/2058463112bbf5fe577c9369fd6b37fc.png)

**演示：http: [//jsfiddle.net/wUgXk/1/](http://jsfiddle.net/wUgXk/1/)**

如果您使用的是 Google Chrome，请打开 Inspector，单击其中一个值（`4px`例如 ），然后按您的`Up`和`Down`键。您可以实时调整这些值并快速设置这些效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:13:25.843

试试这个

```
 <html>
        <html>
        <head>
        <style type="text/css"> 
        .tbox
{
border:2px solid #b3b3b3;
background:#dddddd;
width:200px;
border-radius:25px;
-moz-border-radius:25px; 
-moz-box-shadow:    1px 1px 1px #ccc;
-webkit-box-shadow: 1px 1px 1px 1px #ccc;
 box-shadow:         1px 2px 2px 2px #ccc;
}
        </style>
        </head>
        <body>

        <input type="text" class="tbox" />

        </body>
        </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-03T13:10:28.700

```
<input type="text"  placeholder="Your Name" style="text-align:center; color:white; background:black;  border-radius:50px; height:30;" />
<input type="email"  placeholder="Enter your email id" style="text-align:center; color:white;  background:black;  border-radius:50px 5px 50px; height:30;" /> 
```

不同风格的第二个文本框

# performance - 在 MATLAB 中解决循环内的小型线性程序的最快方法是什么？

> ID：15197927
> 
> 赞同：2
> 
> 时间：2013-03-04T09:07:28.267
> 
> 标签：performance, matlab, optimization, mathematical-optimization, linear-programming

我`linprog`在一个大的时间循环中运行以解决小的 ( `m`, `n`<=3) 线性程序，但这是我的代码的瓶颈。我发现`Large scale` `'off'`在选项中使用 Simplex ( ) 而不是内部点可以让它更快一点。有没有更快的方法来做到这一点？矩阵`A`总是小而密 ( `m`, `n`<= 3)。我尝试了 TOMLAB 的 MINOS 和 LPOPT 和 QPOPT，但仍然`linprog`更快。我不知道也许我没有正确使用 TOMLAB，或者它们只是更适合大型问题。

有没有一种简单的方法可以为小问题编写一个更快的 LP 求解器。对于我当前的问题`linprog`，单次迭代需要 ~.0012 秒来解决 2*2 问题。我把它放在一个嵌套循环中，下面是一个伪代码：

```
for t =1:nt 
  for n = 1:N 
      linprog 
  end 
end 
```

所以让它快到说〜0.0005秒/迭代会好得多。我想在尝试使内部循环并行之前执行此操作。由于依赖关系（时间循环），外部循环无法并行。

我将非常感谢任何帮助，因为我的模拟需要比实时更快。

谢谢，

埃亚斯

编辑：线性程序的形式为：

```
max 1'x 
s.t.  Ax <= b
      lb<=x<=ub 
```

`x`和`1`是向量，我们试图最大化 sum(x)，这就是为什么我们在 1 和 的向量之间有一个内积`x`。没有等式约束， 和`m`，`n`都是`A`<=3。`A`，`lb`并`ub`在每次迭代`t`后更改。`n`此外，我对时间循环的加速更感兴趣，因为`nt`>> `N`，因此通过制定更大的问题来移除内部循环不会有太大帮助。

# java - 是否可以在空中接听 Android 的来电？

> ID：15197928
> 
> 赞同：2
> 
> 时间：2013-03-04T09:07:31.157
> 
> 标签：java, android, actionscript-3, air

有谁知道在空气中为 android 获取“来电事件”？有资源还是我应该使用 TelephonyManager 自己制作？停用事件不适合我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:46:09.227

Android 设备上的手机处于以下[三种状态](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#onCallStateChanged%28int,%20java.lang.String%29)之一：

```
CALL_STATE_IDLE (when it is not engaged in any calls), 
CALL_STATE_RINGING (when there is an incoming call and device is ringing), 
CALL_STATE_OFFHOOK (when the user answers the call) 
```

甚至与 ACTION_PHONE_STATE_CHANGED 广播一起使用的 EXTRA_STATE 查找键[TelephonyManager#ACTION_PHONE_STATE_CHANGED 操作](http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED)也对应于这些状态，如下所示：

```
EXTRA_STATE_IDLE  (Value used with EXTRA_STATE corresponding to CALL_STATE_IDLE)
EXTRA_STATE_OFFHOOK (Value used with EXTRA_STATE corresponding to CALL_STATE_OFFHOOK)
EXTRA_STATE_RINGING (Value used with EXTRA_STATE corresponding to CALL_STATE_RINGING) 
```

因此，要回答您的问题，Android 中目前没有“空中来电”事件。

# google-chrome - Ubuntu下的Chrome同步设置

> ID：15197930
> 
> 赞同：-1
> 
> 时间：2013-03-04T09:07:35.880
> 
> 标签：google-chrome, ubuntu

我检查了许多论坛，但没有找到我需要的答案。我想要阻止用户选择登录浏览器并将书签、密码和内容同步到他们的谷歌帐户。

有没有办法在 Ubuntu 下永久隐藏选项中的登录选项或 Chrome 中的选项。

我对如何仅隐藏开始时弹出的登录问题不感兴趣。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:40:14.567

如果我理解正确，您是在尝试隐藏 Chrome 菜单中的“登录 Chrome”选项吗？这是不可能的，因为它已融入 Chrome 源代码并且无法被覆盖。

# node.js - 提供静态文件时 Node + Express 崩溃

> ID：15197932
> 
> 赞同：1
> 
> 时间：2013-03-04T09:07:42.730
> 
> 标签：node.js, express

我有一个节点服务器，用作我的 iPhone 应用程序的 API 服务器。此时，当应用程序拉下一些随机文件（比如图片或视频文件）时，我会随机崩溃。

我是节点新手，我真的不明白为什么会崩溃。关于文件服务的服务器代码并不多。我只是将文件放在我的“上传”目录中。它在大多数情况下都有效，但随后会出现间歇性崩溃。

```
stream.js:81
      throw er; // Unhandled stream error in pipe.
            ^
Error: socket hang up
    at createHangUpError (http.js:1360:15)
    at ServerResponse.OutgoingMessage._writeRaw (http.js:507:26)
    at ServerResponse.OutgoingMessage._send (http.js:476:15)
    at ServerResponse.OutgoingMessage.write (http.js:749:16)
    at ServerResponse.module.exports.res.write (/Users/sigma/Development/Node.js/sigma-app/node_modules/express/node_modules/connect/lib/middleware/compress.js:82:17)
    at ondata (stream.js:38:26)
    at EventEmitter.emit (events.js:96:17) 
    at ReadStream._emitData (fs.js:1368:10) 
    at afterRead (fs.js:1350:10) 
    at Object.wrapper [as oncomplete] (fs.js:362:17) 

Process finished with exit code 1 
```

我在 SO 上发现了一些帖子，似乎说静态行应该放在最后，所以这是我的 app.configure 供参考。

```
app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.use(express.bodyParser({uploadDir:'./tmp'}));
    app.use(express.logger());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({
        secret  : "somesecret"
    }));
    // Initialize Passport!  Also use passport.session() middleware, to support
    // persistent login sessions (recommended).
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(app.router);
    app.use(express.compress());
    app.use(express.static(path.join(__dirname, 'uploads')));
});
    ------------------------------------------------------------------------ 
```

任何帮助，将不胜感激！

# python - 通过http遍历目录

> ID：15197939
> 
> 赞同：2
> 
> 时间：2013-03-04T09:08:13.333
> 
> 标签：python, urllib

假设我有一个 url [http://example.com/result](http://example.com/result)，它将打开一个页面，有一些（目录数可以是一、二、三……任意数量的目录）目录。我想遍历每个目录并找出 new.txt 文件，它可以是目录或子目录中的任何位置......

[http://example.com/result](http://example.com/result)有以下目录：

```
security
major
minor
fails
logs
.. 
```

我需要在每个目录中找到 new.txt 并想要阅读内容。所有目录（安全/主要/...等）也可能有子目录。我需要在目录或子目录中找到 new.txt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:00:51.953

如果你想使用 python，那么你必须使用[urllib](http://docs.python.org/2/library/urllib.html)。

检查每一页的标题。对于目录和文件，会有链接标签。转到该链接标签并检查标题。文件和目录的标题可能会有所不同。

如果其目录则递归调用相同的函数并检查该目录中的每个文件。

# javascript - 关于正则表达式中的单引号和双引号的问题？

> ID：15197941
> 
> 赞同：0
> 
> 时间：2013-03-04T09:08:20.300
> 
> 标签：javascript, asp.net, html, regex, validation

我有这个 javascript 示例，其中包含一个允许单引号的正则表达式，但是由于单引号，存在问题：

```
<script language="javascript">
    function checkname() {
        var name = document.getElementById('Name');
        var filter = ^[a-zA-Z'.\s]{1,50};
        if (!filter.test(name.value)) {
            alert('name is not valid');
            name.focus;
            return false;
        }
        return true;
    }
</script> 
```

### 我做的测试：

*   如果我添加`single`或`double quotes`围绕`"regex"`正则表达式不起作用。

*   如果我在`forward slashes`周围添加，`/regex/`那么正则表达式可以工作但不完全，例如它不允许`100name`但它允许`name100`。

*   如果我同时添加双引号和正斜杠`"/regex/"`，或者`'/regex/'`正则表达式不起作用。

*   如果我添加`name = name.replace(filter, '');`然后脚本不起作用。

### 我的问题：

1 - 如何`single quote`在正则表达式中正确包含 a ？

2 - 如何正确包含`double quotes`？

### - 更新

`asp.net`我在using中测试了相同的正则表达式，`RegularExpressionValidator`它工作正常，因为我可以用双引号将它括起来，我认为：

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="TextBox1" Text="name is not valid" validationgroup="validationgroup1" ValidationExpression="^[a-zA-Z'.\s]{1,50}"></asp:RegularExpressionValidator> 
```

但在`JavaScript`我不能用双引号将正则表达式括起来。所以必须有一些方法来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:13:48.460

我想你需要的是

```
var filter = /^[\w'".\s]{1,50}$/ 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/2LVAh/)

您可以使用`\w`来表示单词字符，例如`a-zA-Z0-9`并`^`标记行的开始和`$`结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:13:57.747

你可以试试这个

```
var filter = /[a-zA-Z\"']{1,50}/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:14:15.303

您可以使用十六进制尝试如下过滤器或使用反斜杠 \ 转义

```
var filter = /[a-zA-Z\x22\x27]{1,50}/; 
```

或者

```
var filter = /[a-zA-Z\"\']{1,50}/; 
```

在十六进制中，`"`is`\x22`和`'`is`\x27`

这应该有效。

# ios - 性能：视频缩略图/截图生成

> ID：15197943
> 
> 赞同：1
> 
> 时间：2013-03-04T09:08:24.627
> 
> 标签：ios, objective-c, mpmovieplayercontroller, avfoundation

我目前正在使用 MpMoviePlayerController thumbnailImageAtTime 来获取我的视频的缩略图。然而，在生成缩略图时似乎有大约 0.5 秒的延迟 - 我对如何优化它有一些想法，但我想知道使用较低级别的框架之一是否会带来任何性能提升？（CoreMedia 或 AV 基金会）

我已经阅读了几个关于 SO 的答案，声称 AV Foundation（通过使用 AVAssetImageGenerator）将比 MpMoviePlayerController 更快地生成缩略图 - 但我也发现了相反的 SO 答案。

我正在寻找一种在指定时间无任何延迟地拍摄视频缩略图的方法。通过使用任何提到的框架是否有可能，或者我是否需要研究其他自定义解决方案？（即：使用 ffmpeg 或类似的？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:14:19.847

我继续使用 AV Foundation 框架和 AVAssetImageGenerator 进行了一些测试。即使我设置`requestedTimeToleranceAfter`了AV 基础框架`requestedTimeToleranceBefore`，`kCMTimeZero`与更高级别的 MpMoviePlayerController 相比，它也提供了非常高的性能增益。就我的应用而言，我能够通过使用 AV Foundation 框架来实现几乎实时的缩略图生成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T09:49:38.680

```
UIImage *Thumbnailimage = [YourmoviePlayer thumbnailImageAtTime:1.0   timeOption:MPMovieTimeOptionNearestKeyFrame]; 
```

# magento - 如何从标题菜单中删除数据并在 Magento 中添加新内容

> ID：15197948
> 
> 赞同：0
> 
> 时间：2013-03-04T09:08:43.173
> 
> 标签：magento, magento-1.7

我正在使用magento。我一直在尝试从标题菜单中删除内容并添加新内容，例如

```
 **HOME    ABOUTUS    SITES    CONTACT** 
```

这是目前的情况， ![在此处输入图像描述](../Images/0dae2f5dcfa57fc6402bb4c8b6d450b8.png)

![在此处输入图像描述](../Images/dd093799a9810e1c5b9be99131739786.png) **更新** 上面是顶部菜单之后的屏幕截图
请指导我实现这一目标.. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:56:45.773

我假设您在图像中显示的上述菜单时间是类别。因此，如果您在顶部菜单中不需要它，请转到后端/管理面板中的每个类别（在目录 -> 管理类别下），然后选择“否”作为选项“**包含在导航菜单中**”的值. 这会将它们从导航顶部菜单中删除。

并带上这些菜单项

首页 关于我们 网站

让我描述一下上面的一项。让我们来了解**一下**

1.  首先为“关于我们”创建相应的**CMS 静态块**

2.  创建一个名为“关于我们”的**类别**

3.  进入关于我们类别的显示设置，选择显示模式为“**仅静态块**”，然后选择静态块“关于我们”

4.  **保存类别并**在前端/网站上重新加载您的页面

您可以在顶部菜单中找到“**关于我们**”类别，打开它将显示静态块中的内容。

对其他菜单项重复相同的操作。

如果这有助于将其标记为答案。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:00:38.713

我认为您不希望顶部菜单中的类别。取而代之的是，您需要自定义链接，例如“主页”、“关于我们”等。

对于这个在模板->页面->html中打开的topmenu.phtml文件。在此评论以下行：-

```
 <?php echo $_menu ?> 
```

取而代之的是一个名为“custom_top_nav”的静态块：-

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('custom_top_nav')->toHtml() ?> 
```

在此块中，您可以制作自定义菜单。

我们你想要自定义链接和类别然后你可以用这个替换代码： -

```
<?php $_menu = $this->getHtml('level-top') ?>
  <?php if($_menu): ?>
    <div class="nav-container">
        <ul id="nav">
           <li class="home"><a href="<?php echo $this->getUrl('home');?>"> HOME </a> </li>
             <?php echo $_menu ?>
         </ul>
       </div>
    <?php endif ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T14:54:45.780

**Magento 在标题菜单中隐藏类别**- 这可以从管理面板下的管理类别中完成 > 如果您不希望您的类别出现在网站的顶部菜单中，这很容易 - 当您添加新类别时选择否> 包括在导航菜单中 * 它在页面底部的元描述下，您在一般信息选项卡中添加类别名称*

# google-chrome - 使用 .crx 和一些附加文件将扩展名上传到应用商店

> ID：15197949
> 
> 赞同：0
> 
> 时间：2013-03-04T09:08:44.810
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

我已经为 Chrome 开发了扩展程序，我想将它上传到 Crome 应用商店，但问题在于我不仅有 .crx 文件，这是必需的，还有一些其他文件和 dll 应该安装到“程序文件”文件夹。那么如何使用 .crx 和一些附加文件将我的扩展程序上传到应用商店？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:35:55.390

虽然我想不出 Chrome 扩展程序需要安装任何 DLL 的任何原因，但根据[Chrome 扩展程序开发人员常见问题解答](http://developer.chrome.com/extensions/faq.html#faq-dev-06)是可能的。您最终将使用[NPAPI 插件](http://developer.chrome.com/extensions/npapi.html)来访问您的 DLL，尽管您需要在发布应用程序之前进行额外的安全审查。

# android - 如何在android中显示excel表中的随机行？

> ID：15197952
> 
> 赞同：-2
> 
> 时间：2013-03-04T09:08:50.297
> 
> 标签：android, textview, readxml

我正在从 excel 表中读取 10 行（每个单元格分别）并将其显示在`ListView`. 但我有一个想法：`ListView`我不想在 a 中显示它，而是在 a 中`textView`随机显示。这是显示在`ListView`我想要它的代码`textView`请帮助我

`import java.io.InputStream;`

`import java.util.ArrayList;`

`import java.util.List;` `import android.os.Bundle;` `import android.app.Activity;`

```
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {
    ListView lv;

    Readme r;
    InputStream ims;
    ArrayList<String> a123 = new ArrayList<String>();
    ArrayAdapter<String> ad;
    List<MyCustomPage> uuu = new ArrayList<MyCustomPage>();
        @Override
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //tv=(TextView)findViewById(R.id.textView1);
        lv = (ListView)findViewById(R.id.listView1);
        r = new Readme();
        ims = getResources().openRawResource(R.raw.tips);
        r.setInputFile(ims);
        try {
            System.out.println("t1");
            uuu = r.read();
            System.out.println("t4");

        } catch (Exception e) {

            e.printStackTrace();
        }

        for (MyCustomPage m : uuu) {
            a123.add(m.getUserquate().trim());
        }
        ad = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, a123);
        lv.setAdapter(ad);
    }

}
` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:13:04.153

你可以这样做。

您可能已经有一个集合。假设： ArrayList a;

你可以

Collection.shuffle(a);

然后像这样获取第一个元素：

字符串行 = ""+a.get(0);

每次你洗牌时 0 元素都会不同

# blackberry - 如何在黑莓中将 VerticalfieldManager 旋转 180 度？

> ID：15197955
> 
> 赞同：0
> 
> 时间：2013-03-04T09:09:20.950
> 
> 标签：blackberry, rotation

```
vf=new VerticalFieldManager()
{
    public void paint(Graphics graphics)
    {
        int theta = Fixed32.toFP(180);
        int cell_11 = Fixed32.cosd(theta);
        int cell_12 = -Fixed32.sind(theta);
        int cell_21 = Fixed32.sind(theta);
        int cell_22 = Fixed32.cosd(theta);

        int[] rotate = new int[] 
                { cell_11, cell_12,
                  0, 0,
                  cell_21, cell_22,
                };

        super.paint(graphics);
        myFont = Font.getDefault().derive(Font.PLAIN, 0, 
                                          DrawStyle.HCENTER, Font.BOLD, 
                                          0, rotate);
        vf.setFont(myFont );            
    }
}; 
```

# jquery - 在 Rails 中以 PDF 格式获取重定向页面的响应

> ID：15197956
> 
> 赞同：0
> 
> 时间：2013-03-04T09:09:22.877
> 
> 标签：jquery, ruby-on-rails, pdf-generation, wicked-pdf

我的应用程序中有一个按钮，通过单击它可以重定向到新窗口。这是它的jQuery代码：

```
jQ("#create_report").click(function() {
        if (jQ('#client_id').val() !== "" && 
            jQ('#report_date').val() !== "") {
            window.open( 
                "/automated_reporting/report?clientId=" + 
                jQ('#client_id').val() + "&clientName=" + 
                jQ('#client_id option:selected').html() + 
                "&selectedDate=" + jQ('#report_date').val(), 
                'Report',
                'height=700,width=750');
            jQ('#modal_report').modal('hide');
        } else {
            jQ('#create_modal_notification').showMessage(
                "error", "Provide Date and Report Type"
            );
        }
    }); 
```

在我的控制器中，我没有编写任何用于重定向或呈现它的内容，因为我已经在 J​​avaScript 中完成了它。页面重定向成功，输出也按要求正确显示。但我想要的是以 PDF 格式打印重定向页面的输出。我尝试`wicked_pdf`通过在控制器的报告操作中输入以下代码来使用 gem：

```
respond_to do |format|
          format.pdf do
              render :pdf => "file_name"
          end
      end
  end 
```

但它只是给出了模板错误report.pdf 不存在并且当我尝试其他东西时出现双重渲染错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:21:54.447

在我的应用程序上使用 pry 是可行的。

```
respond_to do |format|
    format.pdf do                          
          pdf = OrderPdf.new(@order, view_context)
                 send_data pdf.render, filename: "serial_#{@order.id}-#{@order.first_name}.pdf",
                     type: "application/pdf",
                     disposition: "inline"
          end
end 
```

我没有第二个渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:57:34.077

你有`report.pdf.erb`（我认为）文件吗？

我在我的应用程序上使用 wicked_pdf 并且这有效（但我的`my_action.pdf.erb`视图中有文件）：

```
def my_action 
    format.pdf do
        render :pdf => slug, :show_as_html => params[:debug]
    end 
```

# perl - $array 不能打印任何东西

> ID：15197957
> 
> 赞同：0
> 
> 时间：2013-03-04T09:09:24.267
> 
> 标签：perl, multidimensional-array

这是我的程序，我想让用户逐行输入矩阵并打印 while 矩阵，但我看不到矩阵

用户将键入

```
1 2 3
4 5 6
7 8 9 
```

像这样

我想让它显示

```
1 2 3
4 5 6
7 8 9 
```

Perl 程序

* * *

```
$Num = 3;

while($Num > 0 )
{
        $Row = <STDIN>;
        $Row = chomp($Row);
        @Row_array = split(" ",$Row);
        push @P_matrix , @Row_array;
        @Row_array = ();
        $Num = $Num - 1;
}

for($i=0;$i<scalar(@P_matrix);$i++)
{
        for($j=0;$j<scalar(@P_matrix[$i]);$j++)
        {
                printf "$d ",$P_matrix[$i][$j];
        }
        print "\n";
} 
```

我将表达式 => 更改`printf "$d ",$P_matrix[$i][$j];` 为打印`$P_matrix[$i][$j]` ，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:19:46.053

要创建多维数组，您必须使用引用。采用

```
push @P_matrix, [ @Row_array ]; 
```

创建所需的结构。

此外，`chomp`不返回修改后的字符串。只需使用

```
chomp $Row; 
```

从 $Row 中删除换行符。此外，`chomp`如果您`split`在`' '`.

`printf`用作`%`格式化字符，而不是`$`.

您可以使用它`Data::Dumper`来检查复杂的数据结构。使用`strict`和`warnings`来帮助您避免常见问题。这是我编写程序的方式：

```
#!/usr/bin/perl
use warnings;
use strict;

use Data::Dumper;

my @p_matrix;

push @p_matrix , [ split ' ' ] while <>;

warn Dumper \@p_matrix;

for my $i (0 .. $#p_matrix)
  {
      for my $j (0 .. $#{ $p_matrix[$i] })
        {
            printf '%d ', $p_matrix[$i][$j];
        }
      print "\n";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:23:07.327

首先，请使用`use strict; use warnings;`

您的代码中的问题：

1.  您有一个单维数组，但您正试图像二维数组一样访问它。为了使二维数组将 in 的数组引用推`Row_array`入`@P_matrix`as `[@Row_array]`。
2.  在哪里`$d`定义？声明`$d`为`my $d`或`our $d`如果您的意思`$d`是标量变量。 **或者** 为了使用`%d`，使用需要`sprintf`。请阅读[此](http://perldoc.perl.org/functions/sprintf.html)。

# vb.net - 简单的添加和在另一种形式上显示答案 - VB.NET

> ID：15197959
> 
> 赞同：0
> 
> 时间：2013-03-04T09:09:31.200
> 
> 标签：vb.net

我希望简单地将输入到文本框中的数字添加到一个表单上，并在另一个表单上显示答案。即客户提交表格。

这是我到目前为止的代码。

```
 Dim x, y As Integer
    x = CInt(TextBox14.Text)

    y = CInt(TextBox10.Text)

    CustomerSubmit.TextBox1 = x + y 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:11:48.340

CustomerSubmit.TextBox1.text = x + y

# dynamic - 有条件的 jsf 包括

> ID：15197961
> 
> 赞同：4
> 
> 时间：2013-03-04T09:09:32.890
> 
> 标签：dynamic, jsf-2, user-interface, include

如何在运行时有条件地包含 jsf facelets 文件？所需的示例功能是

```
if ( add button click) {

ui:include src="Add.xhtml"
}

if ( update button click) {

ui:include src="Update.xhtml"
} 
```

上面的语法只是指示性的......

**Mojarra 2.1.1 / Apache Tomcat 7.0.22 / PrimeFaces 3.4**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T09:27:16.420

`ui:include`没有`rendered`属性，因此您必须将其封装在其他组件中。此外，您将在单击按钮时在服务器上设置一些属性。

```
<h:form>
  <p:commandButton value="Add" update=":includeContainer">
    <f:setPropertyActionListener value="add" target="#{myBean.action}"/>
  </p:commandButton>
  <p:commandButton value="Update" update=":includeContainer">
    <f:setPropertyActionListener value="update" target="#{myBean.action}"/>
  </p:commandButton>
</h:form>

<h:panelGroup id="includeContainer">
  <h:panelGroup rendered="#{myBean.action == 'add'}">
    <ui:include src="add.xhtml"/>
  </h:panelGroup>
  <h:panelGroup rendered="#{myBean.action == 'update'}">
    <ui:include src="update.xhtml"/>
  </h:panelGroup>
</h:panelGroup> 
```

在支持 bean 中，您将拥有 getter 和 setter：

```
public void setAction(String action) {
  this.action = action;
}

public String getAction() {
  return action;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T21:19:43.540

我重新发布了 partlov 的答案，因为有一些错误，我纠正了这个错误并放入了这个 pos，并祝贺 partlov 得到了很好的答案

我首先补充你的答案，这是一个带有素数面孔的 xhtml 页面，如果你想使用 ap：添加这个框架或其他。

如果您不下载此框架，请在此处[下载 为 JSF 下载主要框架](http://www.primefaces.org/downloads.html)

并以此方式进口

```
xmlns:p="http://primefaces.org/ui" 
```

**选择.XHTML**

```
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
  <h:form>
    <p:commandButton value="Add" update="panel">
      <f:setPropertyActionListener value="add" target="#{myBean.action}"/>
    </p:commandButton>
    <p:commandButton value="Update" update="panel">
      <f:setPropertyActionListener value="update" target="#{myBean.action}"/>
    </p:commandButton>

    <h:panelGroup id="panel">
      <h:panelGroup rendered="#{myBean.action == 'add'}">
        <ui:include src="headerLogin.xhtml"/>
      </h:panelGroup>
      <h:panelGroup rendered="#{myBean.action == 'update'}">
        <ui:include src="Pajax.xhtml"/>
      </h:panelGroup>
    </h:panelGroup>
  </h:form>
</h:body> 
```

下一步是创建一个类 myBean 并使用此字符串来选择要呈现 **myBean.java的 UI**

在 bean 中使用这个导入

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped; 
```

并在课堂上使用这条鳕鱼

```
public class myBean {
String action;
public void setAction(String action) {

    this.action = action;
}

public String getAction() {
  return action;
} 
```

}

但记得把这条线放在一个班级里

```
@ManagedBean
@SessionScoped 
```

# hibernate - 与 Composite-id 的映射关联

> ID：15197962
> 
> 赞同：1
> 
> 时间：2013-03-04T09:09:34.647
> 
> 标签：hibernate, associations, composite-id

我是 Hibernate 的新手，我对如何代表这种情况有疑问：

--> 表消息：-（PK）MsgSender -> 表“用户”的外键 -（PK）MsgDestination -> 表“用户”的外键 -（PK）MsgDateSend - MsgContent - IsReaded

--> 表用户 -(PK) 用户名​​ - ...

这是我的 Message.hbm：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="Message" table="MESSAGE">
        <composite-id name="id" class="MessageId">
            <key-many-to-one name="MsgSender" class="User">
                <column name="msgSender"/>
            </key-many-to-one>
            <key-many-to-one name="MsgDestination" class="User">
                <column name="msgDestination"/>
            </key-many-to-one>
            <key-property name="msgDateSend" type="double" column="MsgDateSend"/>
        </composite-id>
        <property name="msgContent" type="java.lang.String">
            <column name="MsgContent" />
        </property>
        <property name="isReaded" type="boolean" access="field">
            <column name="ISREADED" />
    </property>
    </class>
</hibernate-mapping> 
```

这是我的 POJO：类消息：

```
public class Message implements Serializable {
/**
 * 
 */
private static final long serialVersionUID = -5319468638732762052L;
private MessageId id;
private String msgContent;
private boolean isReaded;

public Message() {
    this.id = new msgContentId();
}

/**
 * @return the id
 */
public MessageId getId() {
    return id;
}

/**
 * @param id the id to set
 */
public void setMessageId(MessageId mId) {
    this.id = mId;
}

/**
 * @return the msgContent
 */
public String getMsgContent() {
    return msgContent;
}

/**
 * @param msgContent
 *            the msgContent to set
 */
public void setMsgContent(String msgContent) {
    this.msgContent = msgContent;
}

/**
 * @return the isReaded
 */
public boolean getIsReaded() {
    return isReaded;
}

/**
 * @param isReaded
 *            the isReaded to set
 */
public void setIsReaded(boolean isReaded) {
    this.isReaded = isReaded;
}
} 
```

类消息 ID：

```
public class MessageId implements Serializable{
/**
 * 
 */
private static final long serialVersionUID = 1L;
User msgSender;
User msgDestination;
double msgSend;

/**
 * @return the msgSender
 */
public User getMsgSender() {
    return msgSender;
}

/**
 * @param msgSender
 *            the msgSender to set
 */
public void setMsgSender(User msgSender) {
    this.msgSender = msgSender;
}

/**
 * @return the msgDestination
 */
public User getMsgDestination() {
    return msgDestination;
}

/**
 * @param msgDestination
 *            the msgDestination to set
 */
public void setMsgDestination(User msgDestination) {
    this.msgDestination = msgDestination;
}

/**
 * @return the msgSend
 */
public double getMsgSend() {
    return msgSend;
}

/**
 * @param msgSend
 *            the msgSend to set
 */
public void setMsgSend(double msgSend) {
    this.msgSend = msgSend;
}
} 
```

使用这种结构，Hibernate 不会进行插入、删除……有没有人可以帮我解决这个问题？

提前致谢。

# c# - 复选框不更新

> ID：15197964
> 
> 赞同：0
> 
> 时间：2013-03-04T09:09:39.333
> 
> 标签：c#, winforms, checkbox

我在子表单中使用 CheckBox 作为切换按钮（checkBox.Appearance = Appearance.Button）。如果用户按下按钮，如果满足某些标准（例如温度范围内），将开始测量循环。CheckBox.Checked 属性在测量完成之前保持为真。

例如，如果温度超出范围，则会出现警告并且按钮将被重置。如果循环正确结束，也会发生同样的情况。最后调用这个不言自明的函数：

```
 /// <summary>
    /// Resets the button states to false
    /// </summary>
    public void ResetButton()
    {
        checkBox_Start.Checked = false;
    } 
```

现在，在调试时，我看到 CheckBox_Start.Checked 属性为假并保持为假。但是 UI 没有显示实际值。它似乎仍然受到检查。我在所有级别上都尝试过 Refresh() 和 Update()。

有人有想法吗？什么可能阻止 UI 显示实际值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:17:59.183

```
this.MyCheckBox.Checked=false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:21:02.560

我发现了一个类似的问题，除了 DataGridView。我找到的解决方法是使控件失效，然后请求重绘，如下：

```
public void ResetButton()
{
    checkBox_Start.Checked = false;
    checkBox_Start.Invalidate();
    checkBox_Start.Update();
} 
```

试试看，看看能不能解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-17T23:32:01.630

确保 InitializeComponent 没有运行两次。这将导致初始海报的控制行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-10T11:37:58.017

我有同样的问题，在 CheckBox 属性和方法上花了一些时间之后，我终于意识到我在初始化这个控件的地方不是一个合适的。我正在使用一个半框架，在某些情况下不会出现在这段代码中。我使用这个简单的属性： `checkBox_Start.Checked = false;`

# javascript - 如何在选中复选框时启用选项卡

> ID：15197965
> 
> 赞同：2
> 
> 时间：2013-03-04T09:09:42.690
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个任务要做 Jquery 选项卡。在此，当我选中一个复选框时，相应的选项卡必须显示在页面上，并且必须禁用其他选项卡。还允许多个复选框。然后必须启用相应的页面。

我的代码是

```
<html !doctype>
<head>
<title>JqueryMenu</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
 <script type="text/javascript">
$(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,2,3]
  });
$( "input[type=checkbox]" ).click(function(){
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
});
});
 </script>
 </head>
 <body>
 <div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nithin</a> </li>
    <li><a href="#tabs-2">Vipin</a></li>
    <li><a href="#tabs-3">Sachin</a></li>
    <li><a href="#tabs-4">Ganguly</a></li>
  </ul>
  <div id="tabs-1">
    <p>Nithin</p>
  </div>
  <div id="tabs-2">
    <p>Vipin</p>
  </div>
   <div id="tabs-3">
    <p>Sachin</p>
  </div>
   <div id="tabs-4">
    <p>Ganguly</p>
  </div>
</div>
<input type="checkbox" name="tabs-1" value="1">tabs-1 
<input type="checkbox" name="tabs-2" value="2">tabs-2 
<input type="checkbox" name="tabs-3" value="3">tabs-3 
<input type="checkbox" name="tabs-4" value="4">tabs-4 
<br>
 </body>
 </html> 
```

我怎样才能做到这一点？您可以看到演示[http://jsfiddle.net/2aQ2g/4/](http://jsfiddle.net/2aQ2g/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:19:26.770

您只需要在下面添加条件

```
if ($(this).is(':checked')) 
```

请[在此处查看小提琴](http://jsfiddle.net/2aQ2g/5/)

# web-services - 使用代理服务的服务中介 -WSO2

> ID：15197966
> 
> 赞同：2
> 
> 时间：2013-03-04T09:09:43.733
> 
> 标签：web-services, wso2, wso2esb, mediator

我是这个领域的新手，我需要通过 ESB 访问我的 Web 服务。正如这里提到的 -[使用代理服务的服务中介](http://docs.wso2.org/wiki/display/ESB460/Quick+Start+Guide)我试图创建它。之后我运行它并得到如下响应：

```
<TryitProxyError xmlns:h="http://wso2.org/ns/TryitProxy"
h:status="SOAP envelope error">org.apache.axis2.AxisFault:
The input stream for an incoming message is null.</TryitProxyError> 
```

但我尝试使用**SOAPUi**运行相同的 Web 方法并获得预期的输出，如下所示：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <getPatientHistoryResponse xmlns="http://tilani.lk/">
         <getPatientHistoryResult>
            <NIC>123</NIC>
            <FullName>ABC DEF</FullName>
            <FirstName>ABC</FirstName>
            <Surname>DEF</Surname>
            <Title>Mr.</Title>
            <Gender>M/Gender>
         </getPatientHistoryResult>
      </getPatientHistoryResponse>
   </soap:Body>
</soap:Envelope> 
```

这是什么原因？我使用 .net 创建了这个

我的**WSDL 地址**-`http://localhost:2935/PatientRegService.asmx?WSDL`

然后在 **将端点定义**为 -`http://localhost:2935/PatientRegService.asmx`

**编辑** 我的代理配置如下：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="PatientManagement" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <outSequence>
         <send/>
      </outSequence>
      <endpoint>
         <address uri="http://localhost:2935/PatientRegService.asmx?WSDL"/>
      </endpoint>
   </target>
   <publishWSDL uri="http://localhost:2935/PatientRegService.asmx?WSDL"/>
   <description></description>
</proxy> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:04:58.540

如果您只想通过 ESB 访问您的 Web 服务，您需要创建一个代理服务并访问代理服务 URI 而不是原始服务 URI。只需按照[Pass Through Proxy 示例](http://docs.wso2.org/wiki/display/ESB460/Pass+Through+Proxy+Template)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:03:12.807

试试下面的代理，看看你得到了什么。通过源视图编辑器添加此代理配置。

```
 <proxy xmlns="http://ws.apache.org/ns/synapse"
           name="testProxy"
           transports="https http"
           startOnLoad="true"
           trace="disable">
       <description/>
       <target>
          <inSequence>

             <log level="full">
                <property name="testprop" value="incoming message"/>

             </log>

             <send>
                <endpoint>
                   <address uri="http://localhost:2935/PatientRegService.asmx"/>
                </endpoint>
             </send>
          </inSequence>
          <outSequence>
             <send/>
          </outSequence>
       </target>
    </proxy> 
```

# algorithm - 在复杂度中找到未排序数组中元素的等级：O（lg n）。还有比这更好的方法吗？

> ID：15197967
> 
> 赞同：-6
> 
> 时间：2013-03-04T09:09:43.680
> 
> 标签：algorithm, rank

以未排序的方式给定数字说 X：{4,2,5,1,8,2,7}

你如何找到数字的排名？

例如：4:4 的排名：5:5 的排名

复杂度必须为 O(lg n)。

借助红黑树和增强数据结构方法（当今令人着迷的东西之一），它可以在 O(lg n) 的复杂性中完成。让我们使用订单统计树[Order Statistic Tree](http://en.wikipedia.org/wiki/Order_statistic_tree)

```
Algorithm:
RANK(T,x)

//T: order-statistic tree, x: node(to find rank of this node)
r = x.left.size + 1
y=x
While y != T.root
    if y==y.p.right
        r= + y.p.left.size + 1
    y=y.p
Return r; 
```

任何帮助表示赞赏。

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:56:16.710

> 以未排序的方式给定数字，比如说`X:{4,2,5,1,8,2,7}`
> 
> 你如何找到数字的排名？
> 
> Rank 是元素在排序时的位置。
> 
> 复杂度必须为 O(lg n)。

这不可能。您必须至少查看每个元素一次。因此，你不能比 更好`O(n)`，而且在 O(n) 中是微不足道的：

*   设置`found`为`false`
*   设置`smaller`为 0
*   对于每个数字`array`
    *   如果数字小于`needle`
        *   增加较小的计数器
    *   如果数字等于`needle`
        *   设置`found`为`true`
*   如果`found`，返回`smaller+1`，否则返回错误

* * *

> 借助红黑树和增强数据结构方法（当今令人着迷的东西之一），它可以在 O(lg n) 的复杂性中完成。让我们利用订单统计树

问题是您*没有*订单统计树，而且您没有时间构建一个。构建顺序统计树需要的不仅仅是`O(lg n)`时间*。

* * *

但是，假设您有时间构建一个订单统计树。由于在二叉搜索树中提取已排序的节点列表需要线性时间，因此构建顺序统计树不能比直接排序数组更快。

所以，让我们直接对数组进行排序。那么，求一个元素的秩就相当于在一个有序数组中求该元素。这是一个众所周知的任务，可以`O(lg n)`通过二分搜索来解决（反复将数组分成两半，直到找到元素）。事实证明，顺序统计树完全没有帮助。实际上，您可以将二分查找想象为在顺序统计树中的查找（除了该树实际上并不存在）。

* * *

如果`x`可以在运行时更改，那么顺序统计树确实会有所帮助。然后，元素删除/添加需要`Th(lg n)`（最坏情况）时间，而`Th(n)`在普通排序数组中需要 *（平均情况），因为您需要移动元素。使用`x`不可变的顺序统计树不会加快普通数组的速度。

* * *

* 从技术上讲，`O(lg n)`是一组渐近增长不超过`lg n`. 当我说“超过`O(lg n)`”时，正确的解释是“超过 . 中的每个函数`O(lg n)`。顺便说一下，这相当于说运行时是`omega(lg n)`（注意欧米茄是小写的）。

`Th(lg n)`是渐近等于 的函数集`lg n`，直到一个常数。在保持技术正确的同时使用 O(lg n) 和英语表达相同的意思会很尴尬。

# antlr4 - 从 Own 类继承而不是从 XMLParserRuleContext

> ID：15197969
> 
> 赞同：2
> 
> 时间：2013-03-04T09:09:53.343
> 
> 标签：antlr4

我正在使用“访问者”模式从我解析的代码中生成 XML。在典型的上下文类看起来像：

```
public static class On_dtmContext extends ParserRuleContext {
    public List<FieldContext> field() {
        return getRuleContexts(FieldContext.class);
    }
    public TerminalNode ON() { return getToken(SRC_REP_SCREENParser.ON, 0); }
    public On_dtm_headerContext on_dtm_header() {
        return getRuleContext(On_dtm_headerContext.class,0);
    }
.....
} 
```

我使用 RuleContext 的“getText”成员函数访问访问者回调函数中的元素。我想编写一个继承自'ParserRuleContext'的类并重载'getText'，以便用它们的xml转义序列替换'<'或'>'之类的字符。有没有一种方法可以生成我的代码并让上下文类继承自我的类，如：

```
public static class On_dtmContext extends XMLParserRuleContext {
    public List<FieldContext> field() {
        return getRuleContexts(FieldContext.class);
    }
    public TerminalNode ON() { return getToken(SRC_REP_SCREENParser.ON, 0); }
    public On_dtm_headerContext on_dtm_header() {
        return getRuleContext(On_dtm_headerContext.class,0);
    }
.....
} 
```

谢谢您的帮助！亲切的问候，狼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T15:52:13.770

您是否有理由尝试扩展类，而不是在语法中创建解析器规则来捕获它们`<`，`>`以便您可以在它们发生时对其进行翻译？

解析器规则如下所示：

```
lessThan
    : '<'
    ;

greaterThan
    : '>'
    ; 
```

那时，您将拥有每个术语的特定访问者，并且可以随意翻译它们。

# sql - 可访问性与可见性 Oracle SQL

> ID：15197973
> 
> 赞同：-2
> 
> 时间：2013-03-04T09:10:08.897
> 
> 标签：sql, oracle

我的老师今天问我 Oracle SQL 中的可访问性和可见性之间有什么区别，以获得额外的分数。我是新手，我搜索了互联网，但没有找到任何东西。有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:26:07.670

我在 Oracle Database Concepts 中进行了搜索，找到了一个匹配项`visibility`：

> 索引具有以下属性：
> 
> ■**可用性**索引可用（默认）或不可用。DML 操作不会维护不可用的索引，并且会被优化器忽略。不可用的索引可以提高批量加载的性能。您可以使索引不可用然后重建它，而不是删除索引然后重新创建它。不可用的索引和索引分区不会占用空间。当您使可用索引不可用时，数据库将删除其索引段。
> 
> ■**可见性**索引可见（默认）或不可见。不可见索引由 DML 操作维护，优化器默认不使用。使索引不可见是使其不可用或删除它的替代方法。不可见索引对于在删除索引之前测试删除索引或临时使用索引而不影响整个应用程序特别有用。

这只是一个赌注。我不知道你的老师想要什么。

# iphone - iOS - 如何使用委托在文本字段中打印值

> ID：15197976
> 
> 赞同：1
> 
> 时间：2013-03-04T09:10:34.000
> 
> 标签：iphone, ios, ipad, ios6, delegates

我是 iOS 新手。我有一些问题你有解决方案吗？我无法在文本字段中打印 json 值这是我的`contactViewController.m`文件：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad]; 
        // Do any additional setup after loading the view, typically from a nib.

        fname.text=@"Hello";
    } 
```

视图加载后**hello**值显示在文本框中，但是当我调用列表按钮获取 json 值时：

```
-(IBAction)list:(id)sender{
    vedant=[[WebserviceViewController alloc]init];

    [vedant listContacts];

} 
```

然后从`webserviceViewController.m`我将 jsonResponse 传递给同一个文件，即`contactViewController.m`解析 json 值并打印它，但它没有显示文本字段中的值

```
-(void)allContacts:(NSString *)JSONResponse{
    NSLog(@"%@",JSONResponse);

    NSData *jsonData = [JSONResponse dataUsingEncoding:NSASCIIStringEncoding];
    //
    NSError *err;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&err];
    int accCount =[json count];

    for(int i=0;i<accCount;i++){

        NSData *jsonData = [JSONResponse dataUsingEncoding:NSASCIIStringEncoding];
        //

        //   NSLog(@"%@",JSONResponse);

        NSError *err;
        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&err];

        NSString *firstName = [NSString stringWithFormat:@"%@", [[json objectAtIndex:i] objectForKey:@"first_name"]];

        NSLog(@"%@",firstName);    //this prints the actual first name in console But

        fname.text=firstName;
        NSLog(@"%@",fname.text);   //it prints "(Null)" in console
    }

} 
```

我需要创建委托来传递价值吗？

是的，那么创建这样的代表一些文章或示例的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:17:53.447

检查是否`fname`不是`nil`。如果您忘记在 Interface Builder 中正确连接它，`fname`将会忽略`nil`所有发送给它的消息（如）。`setText:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:19:42.573

请首先检查您是否已将您的文本字段与您的 fname 变量绑定。如果是，则尝试使用以下方法分配值：

```
fname.text=[NSString stringWithFormat:@"%@",firstName]; 
```

试试这个。我希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:10:31.780

将您的名字（即来自 json 的值）获取到全局值并将该全局值分配给您的 textfield 。就是这么简单。如果您仍然有疑问而不是回复，我将发布示例代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T05:35:30.737

txtName.text=名字；或 txtName.text=[NSString stringWithFormat:@"%@",firstName];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T07:11:26.290

使用代表我解决了这个问题

在我的`contactViewController.m`文件中：

```
-(IBAction)list:(id)sender{
    vedant=[[WebserviceViewController alloc]init];
    vedant.delegate=self;
    [vedant listContacts];

} 
```

在`webserviceViewController.h`我创建了自己的代表

```
@protocol WebservicesDelegate <NSObject>
-(void)allContacts:(NSString *)JSONResponse;
@end 
```

然后在从后端获取 json 响应后的文件中，我使用此代码`webserviceViewController.m`将响应发送回我的文件`contactViewController.m`

```
[self.delegate allContacts:jsonResponse]; 
```

编译器返回 文件中的`allContacts`功能`contactViewController.m`此代码相同我没有更改代码现在它打印值。

```
-(void)allContacts:(NSString *)JSONResponse{
NSLog(@"%@",JSONResponse);

NSData *jsonData = [JSONResponse dataUsingEncoding:NSASCIIStringEncoding];
//
NSError *err;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&err];
int accCount =[json count];

for(int i=0;i<accCount;i++){

    NSData *jsonData = [JSONResponse dataUsingEncoding:NSASCIIStringEncoding];
    //

    //   NSLog(@"%@",JSONResponse);

    NSError *err;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&err];

    NSString *firstName = [NSString stringWithFormat:@"%@", [[json objectAtIndex:i] objectForKey:@"first_name"]];

    NSLog(@"%@",firstName);    //this prints the actual first name in console But

    fname.text=firstName;
    NSLog(@"%@",fname.text);   //it prints "(Null)" in console
}

} 
```

我认为因为我试图从不同的视图获取数据并希望在另一个视图中显示数据是问题所在。但是通过创建委托，问题得到了解决，我可以轻松地将数据从一个视图发送到另一个视图。

# javascript - 通过单击项目名称显示任务列表

> ID：15197978
> 
> 赞同：0
> 
> 时间：2013-03-04T09:10:42.417
> 
> 标签：javascript, jquery, ruby-on-rails

我有两个模型项目和任务。每个项目都有许多任务。

项目索引页面上有一个项目列表。

我想，当用户点击项目名称时，项目任务列表显示在项目列表之外

我尝试类似的东西。

应用程序.js

```
$(document).ready(function(){
  $('#projects').on('click', 'h2', function(){
    $('#tasks').append("<%= escape_javascript render(:file => 'tasks/index.html.erb') %>");
  });
}); 
```

将 application.js 文件扩展名更改为 js.erb 是否正确？

**更新**

我的工作成果 _project.html.erb

```
<%= link_to " #{project.title} tasks list", project_tasks_path(project), :remote => true %> 
```

task_controller.rb

```
 def index
@project = Project.find(params[:project_id])    
@tasks = @project.tasks
respond_with @tasks 
```

结尾

index.js.erb

```
$('#project-tasks').html("<%= j render :file => 'projects/tasks/_tasks', :locals => { :tasks => @tasks }  %>"); 
```

_tasks.html.erb

```
<%= render @tasks %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:17:21.793

我认为最好将其保存为 somethingelse.js.erb 而不要更改 application.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:28:29.913

您不能将应用程序 js 重命名为其他名称。最好制作新的 js.erb 文件并将您的代码放入其中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:45:22.587

您应该使用 rails 方式来执行此操作。使用 ajax 调用并制作 js.erb 文件来更新您的视图。看到这个[http://railscasts.com/episodes/205-unobtrusive-javascript](http://railscasts.com/episodes/205-unobtrusive-javascript)。

# android - 仅限 Android Drawable XHDPI - 避免 lint 警告

> ID：15197981
> 
> 赞同：0
> 
> 时间：2013-03-04T09:10:59.567
> 
> 标签：android, android-drawable, android-lint

在我的项目中，我有仅用于平板电脑的可绘制对象。因此，如果我将图像放在 XHDPI 上，lint 会抱怨图像也应该在其他维度上。在这种情况下，忽略 lint 是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:13:04.663

您可以将图像放置`drawable-nodpi`在文件夹中或`drawable`文件夹中。默认情况下它们不存在，您需要在资源中创建文件夹

# android - 使用 AsyncTask 和 Jsoup 发布 APK 时出错

> ID：15197984
> 
> 赞同：6
> 
> 时间：2013-03-04T09:11:04.443
> 
> 标签：android, exception, android-asynctask, apk, jsoup

我收到此错误：

```
03-04 09:55:55.915: W/dalvikvm(20171): Exception Ljava/lang/NullPointerException; thrown while initializing La/a/b/k;
03-04 09:55:55.915: W/dalvikvm(20171): Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing La/a/b/l;
03-04 09:55:55.925: W/dalvikvm(20171): threadid=13: thread exiting with uncaught exception (group=0x40ab3300)
03-04 09:55:55.945: E/AndroidRuntime(20171): FATAL EXCEPTION: AsyncTask #1
03-04 09:55:55.945: E/AndroidRuntime(20171): java.lang.RuntimeException: An error occured while executing doInBackground()
03-04 09:55:55.945: E/AndroidRuntime(20171):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.lang.Thread.run(Thread.java:856) 03-04 09:55:55.945: E/AndroidRuntime(20171): Caused by: java.lang.ExceptionInInitializerError
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.b.f.<init>(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.b.e.<init>(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.c.dh.b(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.c.dh.a(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.c.b.a(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.c.ad.a(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.a.a(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at com.taco.bezoekerspasparkeren.c.a(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at com.taco.bezoekerspasparkeren.c.doInBackground(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-04 09:55:55.945: E/AndroidRuntime(20171):    ... 5 more
03-04 09:55:55.945: E/AndroidRuntime(20171): Caused by: java.lang.ExceptionInInitializerError
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.b.l.<clinit>(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    ... 16 more
03-04 09:55:55.945: E/AndroidRuntime(20171): Caused by: java.lang.NullPointerException
03-04 09:55:55.945: E/AndroidRuntime(20171):    at java.util.Properties.load(Properties.java:246)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.b.k.d(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    at a.a.b.k.<clinit>(Unknown Source)
03-04 09:55:55.945: E/AndroidRuntime(20171):    ... 17 more
03-04 09:55:55.995: W/ActivityManager(265):   Force finishing activity com.taco.bezoekerspasparkeren/.BezoekerspasActivity 
```

使用这段代码：

```
class Subscribe extends AsyncTask<String, Void, Result> {

        @Override
        protected Result doInBackground(String... s) {
            // ...

            Document test = Jsoup.parse("<html></html>"); // explodes here
        }
} 
```

这仅在发布模式下。我正在使用 Jsoup 1.7.2。怎么了？我怎么能看到错误在“... 17 more”中崩溃了，因为我猜线索就在那里...

[这与仅在运行发布 apk 时使用 AsyncTask](https://stackoverflow.com/questions/12913904/error-using-asynctask-only-when-running-release-apk-please-help)的错误相同的问题...请帮助 :(但未得到答复。

这个让我崩溃了！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T10:42:11.823

这确实是 ProGuard 的一个混淆问题（如果问题仅在发布模式下存在，这是合乎逻辑的），我必须在 proguard 文件中添加以下内容：

```
-keep public class org.jsoup.** {
    public *;
} 
```

# c++ - 在 C++ 项目中调用二进制可执行文件

> ID：15197987
> 
> 赞同：0
> 
> 时间：2013-03-04T09:11:08.757
> 
> 标签：c++

我有一个主要项目来执行一些控制任务，这些任务涉及一些二进制可执行文件 progA.exe、progB.exe、progC.exe 提供的处理。坏处是我没有这些 progX.exe 的源代码，也没有它们的库，除了二进制可执行文件

有什么方法可以编写主项目来准备一些输入数据，唤起输入数据并将其提供给 progX.exe 并进一步处理它们的输出？有这样的编码项目吗？

我不知道这是否可行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:21:02.603

MSDN 中有很多关于创建进程和重定向输入/输出的文档：[Creating a Child Process with Redirected Input and Output](http://msdn.microsoft.com/en-us/library/ms682499%28VS.85%29.aspx)

# ruby-on-rails - 在 Ruby on Rails 网站中使用 jquery-ui-rails datepicker。日期选择器方法未定义

> ID：15197988
> 
> 赞同：1
> 
> 时间：2013-03-04T09:11:10.323
> 
> 标签：ruby-on-rails, jquery-ui-datepicker

我在使用 Ruby on Rails 编写网站时遇到了这个问题。

```
bundle show
* jquery-ui-rails (4.0.1) 
```

在 app/assets/javascripts/application.js

```
//= require jquery.ui.datepicker 
```

在 app/assets/stylesheets/application.css

```
*= require jquery.ui.datepicker 
```

在 app/views/layouts/application.html.erb

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %> 
```

然后在 somepage.html.erb 中，我得到了

```
<script type="text/javascript">
$(function(){
    $("#startdate").datepicker();
    $("#enddate").datepicker();
});
</script> 
```

运行它时，Chrome 会说

```
Uncaught TypeError: Object [object Object] has no method 'datepicker' 
```

我认为资源没有被正确引用是原因，因为可以通过将以下内容添加到 app/views/layouts/application.html.erb 来解决问题

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" /> 
```

这些可以在[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)找到。我看到演示有没有这些代码的工作日期选择器。但我不明白为什么它在我的工作中不起作用。有人有什么建议吗？除了我上面提到的之外，还想添加什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:49:40.620

这可能是由于以下任一原因：

1）您在您的文件中包含多个 javascript 文件，`application.html.erb`这会导致完全破坏。

2）您正在使用其他一些 javascript 文件，这些文件也`$`像 jquery 一样使用。有两个相同的符号是获取`no method 'datepicker'`jquery 的可能原因。

另一种方法是将所有出现的 替换`$`为`jQuery`

或者

只需将您的 jquery 代码包装在一个块中，如下所示：

```
jQuery(function($){
    //all jQuery code which uses $ should be here.
}); 
```

# jquery - Google Chart API 回调函数没有被调用

> ID：15197989
> 
> 赞同：2
> 
> 时间：2013-03-04T09:11:19.240
> 
> 标签：jquery, google-visualization, donut-chart

我正在尝试使用 Google Chart API 呈现数据，但奇怪的是，当我加载可视化 API 时，回调函数没有被调用。我在[http://jsfiddle.net/jagzviruz/ZBMnh/创建了一个小提琴](http://jsfiddle.net/jagzviruz/ZBMnh/)

```
var DonutChart = {
data : [
    ['Sales', 20],
    ['Returns', 12],
    ['Pending', 80],
    ['Processed',990]
],
init : function(){
    $.getScript('https://www.google.com/jsapi', this.loadPackages);
},
loadPackages : function(){
    console.log('Loaded API.. now loading packages');
    var o = this;
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(o.renderData);
},
renderData: function(){
    //console.log('Loaded Packages.. Now showing charts');
    alert('Render Data');
}};

DonutChart.init(); 
```

我从来没有收到警报。其他控制台消息显示正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T00:02:06.797

使用`DonutChar`而不是`this`引用函数指针：

```
$.getScript('https://www.google.com/jsapi', DonutChart.loadPackages); 
```

该`init`函数等价于：

```
function foo()
  {
  $.getScript('https://www.google.com/jsapi', this.loadPackages);
  }

DonutChart.init = foo 
```

结果，`this`等于`foo`而不是`DonutChart`。

# php - 如何修复 SyntaxError：在 javascript 中嵌入 php 时未终止的字符串文字？

> ID：15197990
> 
> 赞同：-3
> 
> 时间：2013-03-04T09:11:24.620
> 
> 标签：php, javascript

当我尝试这个时：</p>

```
var app_app = <?=$app_app?>; 
```

我得到了错误：

```
SyntaxError: unterminated string literal
var app_app = '<br /> 
```

奇怪，谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:12:18.087

```
var app_app = "<?php echo $app_app; ?>"; 
```

**注意**：您必须回显`php`变量以将其定义为`JavaScript`并将其包含在引号内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:13:16.943

添加`"`引号，然后尝试：

```
var app_app = "<?=$app_app?>"; 
```

# sql - 手动全外连接

> ID：15197992
> 
> 赞同：3
> 
> 时间：2013-03-04T09:11:32.813
> 
> 标签：sql, database, join

我试图通过使用这些简单的表来理解完全外连接

```
t1
-----------
 a  | b
===========
 1  | 2
----------- 

t2
------------
  b  |  c
===========
  2  | 3
------------

t3
-------------
  a  |  c
=============
  4  |  5
-------------

To understand select * from t1 natural full outer join (t2 natural full outer join t3); 
```

我先试过`select * from t2 natural full outer join t3` 让我称之为`result`

```
-----------------
  a  |  b  |  c
=================
     | 2   | 3
----------------
  4  |     | 5
------------------ 
```

然后我尝试了

select * from t1 自然全外连接（结果）

```
 t1             result
-----------      -----------------
 a  | b           a    |  b  | c
===========      =================
 1  | 2                | 2   | 3
-----------      ----------------
                    4  |     | 5
                 ------------------ 
```

这不应该是

```
--------------------------
   a    |  b  |  c
===========================
   1    |  2  | 3
-------------------------
  4     |     | 5 
```

我不太明白 sql 查询如何给出

```
 a | b | c 
---+---+---
 4 |   | 5
   | 2 | 3
 1 | 2 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:18:01.530

您可以使用`UNION ALL`（*指定 ALL 以保留重复项*）来执行此操作。

```
SELECT  a, b, NULL as c FROM t1
UNION ALL
SELECT  NULL as a, b, c FROM t2
UNION ALL
SELECT  a, NULL as b, c FROM t3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/530dc/1)

# javascript - 如何对齐标签底部的文本

> ID：15197994
> 
> 赞同：5
> 
> 时间：2013-03-04T09:11:37.373
> 
> 标签：javascript, jquery, html, css

我在将标签中的文本放到标签底部时遇到问题。

我正在为下降的文本设置动画，标签确实“似乎”按照它应该下降的方式下降，但文本保持在顶部，它没有向下跟随标签。请检查这个jsfiddle，按下按钮查看问题。我尝试了许多不同的方法，但没有提出可行的解决方案。

[http://jsfiddle.net/kaze72/jQ6Ua/](http://jsfiddle.net/kaze72/jQ6Ua/)

```
.uppgifter
{
    vertical-align: text-bottom;
} 
```

好像没救了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:23:17.723

你可以试试

```
.uppgifter
{
    display: table-cell;
    vertical-align: bottom;
    background-color: yellow;
} 
```

[jsFiddle](http://jsfiddle.net/LeDBB/1/)

*更新了 jsFiddle，使方法中的`.uppgifter`高度与的高度匹配。`animate``#spelplan`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:21:17.877

```
.uppgifter
{

    padding: 580px 0 1px 230px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:23:50.390

您可以为填充顶部设置动画：

```
$("#the_button").click(function () {
    $(".uppgifter").animate({
        'padding-top':"500px"
    }, 4000, "linear", function() {});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:23:51.460

试试这个：

```
$(document).ready(function() {

    $("#the_button").click(function () {
        $(".uppgifter").animate({ 
            "height":"100px","padding-top":"500px"}, 
            4000, "linear", function() {});
    });
}); 
```

或者只是一个建议，看看这个:)：

```
$(document).ready(function() {

    $("#the_button").click(function () {
        $(".uppgifter").animate({ 
            "top":"500px"}, 4000, "linear", function() {});
    });
}); 
```

结合

```
.uppgifter
    {
        vertical-align: text-bottom;
        position:relative;
        background-color: yellow;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T09:25:15.593

```
 * 
    {
        font-family: cursive;
    }

    .panel
    {
        position:relative;
        border: 1px solid;
    }

    #spelplan
    {
        height: 600px;
    }

    .uppgifter
    {
        position:absolute;
        vertical-align: text-bottom;
bottom:0;

        background-color: yellow;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T09:36:52.180

我只是添加了两个设置为 90% 高度的透明 div，当标签高度发生变化时，它们会强制文本向下。

[http://jsfiddle.net/jQ6Ua/15/](http://jsfiddle.net/jQ6Ua/15/)

```
#div
{
height:90%;
width:200%
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T09:47:15.320

要垂直对齐容器中的文本，可以使用[多种技术。](http://www.vanseodesign.com/css/vertical-centering/)但是，它们中的大多数在运行时都有额外的脚本计算（如果文本容器的高度发生变化），这可能会干扰业务逻辑。

可以在您的特定情况下使用 hack。您可以在文本容器中添加一个带有空 src 的图像容器，其**高度为 100%**，**宽度**由 css 设置。

```
<label id="uppgift" class="uppgifter" style="display:inline-block;"><img scr=""/>Abc</label>
<label id="uppgift2" class="uppgifter" style="display:inline-block;"><img scr=""/>123</label>

//and css
.uppgifter img{
    height:100%;
    width:0;
} 
```

**[例子](http://jsfiddle.net/jQ6Ua/12/)**

这样您就不必为额外的添加层编写逻辑。

# variables - 大小不是 2 的幂的整数有意义吗？

> ID：15197995
> 
> 赞同：1
> 
> 时间：2013-03-04T09:11:40.053
> 
> 标签：variables, avr, 8-bit

这是一个 8 位架构，字长为 16 位。我现在需要使用一个 48 位整数变量。我的理解是 libm 实现了 8、16、32、64 位操作（加法、乘法、有符号和无符号）。

因此，为了进行计算，我必须将值存储在 64 位有符号或无符号整数中。正确的？

如果是这样，有什么可以防止使用一般例程？例如，对于添加：

1.  从两个变量的 LSB 开始
2.  把它们加起来
3.  如果有更多字节可用，则继续，否则准备就绪
4.  将两个变量都向右移动 1 个字节
5.  转到 1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:51:01.750

libm 实现了标准大小的类型的例程，编译器选择正确的用于表达式。

如果你想实现自己的类型，你可以。如果您想使用通常的运算符，那么您必须进入编译过程以让编译器选择您的。

您可以将操作实现为函数，例如`add(int48_t, int48_t)`，但是编译器将无法进行常量折叠等优化。

因此，没有什么能阻止您实现自己的自定义编译器，但它真的有必要吗？你真的需要节省那个空间吗？如果是这样，那就去吧！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:13:35.530

没错，节省几位（几乎在所有情况下）不值得麻烦实现自己的逻辑。