# StackOverflow 问答 12907000-12907999

# ios - 是否可以在 iOS 上下载和运行代码

> ID：12907001
> 
> 赞同：0
> 
> 时间：2012-10-16T03:11:14.240
> 
> 标签：ios, enterprise

我意识到这在 App Store 中是不允许的，但我想为企业应用程序这样做。我正在寻找一些已编译的代码（也许是静态库）并从中运行。

如果有人感兴趣，我正在尝试这样做以解决我无法在 iOS 6 的单一应用程序模式下升级和企业应用程序的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:22:44.023

我猜你已经试过了，但它不符合你的需求：

[苹果企业开发者计划](https://developer.apple.com/programs/ios/enterprise/)

还有其他几种方法可以在 iPhone 上运行自定义代码。从官方开始，朝着灰色方向努力：

1) 如果您购买标准开发者许可证，您可以将编译后的代码加载到您的 iPhone 上

2）如果您的开发人员是合法的，他们可以将您发送到有限使用的测试版（最近 Lift 的人在他们的测试版中这样做了）

3) Javascript 是代码：webapps 计数。

4）当然，越狱是一种选择，但对于您的企业应用程序，这可能不可行。

我猜顶部链接是最好的。

# python - 如何在使用 python 运行进程时更改 Windows 中的文件权限？

> ID：12907004
> 
> 赞同：1
> 
> 时间：2012-10-16T03:11:51.637
> 
> 标签：python, windows

我需要在进程运行时更改文件权限。

我不能使用 cacls 或类似的东西，因为它会在实际运行之前更改文件的文件权限。

我尝试使用[Process Hacker](http://processhacker.sourceforge.net/downloads.php)并在进程运行时更改了文件权限，它运行良好，但我需要类似的东西，我可以通过 python 代码应用。

提前致谢。

# windows - 用于 Windows 的 ipmitool

> ID：12907005
> 
> 赞同：6
> 
> 时间：2012-10-16T03:12:01.277
> 
> 标签：windows, serial-port

ipmitool 用于配置 ipmi 驱动程序，该驱动程序可以通过 LAN 端口进行串行通信。有适用于 Windows 的 ipmitool 吗？我们可以下载 ipmi 源代码并为 Windows 构建它吗？请分享有关如何在 Windows 上构建它的说明。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T17:17:18.443

**为 Windows 构建 IPMI：**

1.  将 Cygwin 安装到您的 Windows 系统上：Cygwin

    安装 Cygwin 时，除了默认包外，还要选择 gcc 和 crypto 包。

2.  [从ipmitool](http://sourceforge.net/projects/ipmitool/files/ipmitool/1.8.12/)下载 ipmitool 源代码
3.  解压、配置和构建 ipmitool。

    cd ipmitool-1.8.12

    ./configure --enable-intf-lanplus

    制作

4.  将 IPMI 二进制文件和相关 dll 打包到一个 zip 文件中。

    mkdir ipmitool

    cp ipmitool-1.8.12/src/.libs/ipmitool.exe ipmitool/

    cp /bin/cygwin1.dll ipmitool/

    cp /bin/ cygcrypto-1.0.0.dll ipmitool/

    cp /bin/cygz.dll ipmitool/

    cp /bin/cyggcc_s-1.dll ipmitool/

    tar -zcvf ipmitool.tar ipmitool

5.  在目标主机中解压缩文件 ipmitool.tar。一些示例命令：

    ipmitool.exe -I lan -U 用户名 -P 密码 -H 主机名传感器

    ipmitool.exe -I lanplus -U 用户名 -P 密码 -H hosname -C 3 sol 激活

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T20:15:41.827

您可以使用 MobaXterm for Windows（替代 Cygwin）并下载 ipmitool 插件。

[http://itsaboutlinux.blogspot.nl/2016/03/ipmitool-for-mobaxterm.html](http://itsaboutlinux.blogspot.nl/2016/03/ipmitool-for-mobaxterm.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-04T01:08:28.380

我将添加一些我遇到的东西。正如 Jason 刚才提到的，ipmitool 移到了 github。在源代码清单的 INSTALL 文件中有一个非常全面的构建和安装文档。

我用谷歌搜索了 Cygwin DLL 依赖项，发现 cygwin 专门为此生成了一个名为“cygcheck”的工具

当我对新建的 ipmitool.exe 运行它时，它产生了：

```
C:\users\user1\documents\ipmitool-master\src\ipmitool.exe - os=4.0 img=0.0 sys=5.2
    C:\cygwin64\bin\cygwin1.dll - os=4.0 img=0.0 sys=5.2
"cygwin1.dll" v0.0 ts=2021-03-29 09:42
    C:\WINDOWS\system32\KERNEL32.dll - os=10.0 img=10.0 sys=10.0
  "KERNEL32.dll" v0.0 ts=2022-01-18 10:29
    C:\WINDOWS\system32\ntdll.dll - os=10.0 img=10.0 sys=10.0
    "ntdll.dll" v0.0
    C:\WINDOWS\system32\KERNELBASE.dll - os=10.0 img=10.0 sys=10.0
    "KERNELBASE.dll" v0.0
    C:\WINDOWS\system32\ntdll.dll (already done)
    C:\WINDOWS\system32\api-ms-win-core-fibers-l2-1-1.dll - os=6.3 img=6.3 sys=6.3
    "api-ms-win-core-fibers-l2-1-1.dll" v0.0 ts=2013-08-22 08:04
    C:\WINDOWS\system32\ntdll.dll (already done)
    C:\WINDOWS\system32\KERNEL32.dll (already done) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-27T18:32:56.567

以防万一其他人最近试图这样做......

[Cygwin 现在使用 OpenSSL 1.1，并且 Ashok 的上述答案](https://stackoverflow.com/a/13610777/3042932)中提到的 ipmitool 1.8.12 源代码和 cygwin 版本假定 OpenSSL 1.0。

这可能会在即将发布的 1.8.19 中得到修复，但从 1.8.18 开始没有，因此您必须从 GitHub 下载最新源： [https](https://github.com/ipmitool/ipmitool) ://github.com/ipmitool/ipmitool （他们从 SourceForge 迁移）

此外，您还需要从 cygwin_setup 安装：

*   汽车制造
*   自动配置
*   库工具

然后你可以运行

```
cd ipmitool-master/ ; ./bootstrap && ./configure && make 
```

（现在配置默认包含 lanplus 插件）

我没有尝试将 cygwin DLL 复制到另一台机器上作为解决方案，但如果你想这样做，你需要 cygcrypto-1.1.dll 而不是上面的 1.0。

# sql-server-2008 - 如何在不聚合的情况下按频率排序？

> ID：12907007
> 
> 赞同：0
> 
> 时间：2012-10-16T03:12:08.083
> 
> 标签：sql-server-2008, ms-access-2007

概述：
比较不同账户的农产品代理的日常交易，以发现代理和公司持股之间的差异，仅显示新产品；当前交易中的代码，但不是以前的交易。

目标：
按频率最高的代码（即苹果）对交易进行排序。

当前代码：

```
SELECT 
    Count(CurrentTrade.Code) AS CountOfCode, 
    CurrentTrade.portfolio_code, 
    CurrentTrade.Type, 
    CurrentTrade.Code, 
    sum(CurrentTrade.Custodian_holding) AS AgentHolding, 
    sum(CurrentTrade.Company_holding) AS CompanyHolding, 
    sum(CurrentTrade.Difference) AS TotalDifference
FROM 
    CurrentTrade 
    LEFT JOIN PrevTrade 
    ON CurrentTrade.Company_holding = PrevTrade.Company_holding
WHERE 
    PrevTrade.Company_holding) Is Null
GROUP BY CurrentTrade.Code, CurrentTrade.portfolio_code, CurrentTrade.Code, CurrentTrade.Type
ORDER BY count(CurrentTrade.Code); 
```

当前结果：

```
 CountOfCode        account_code        Type        Code        AgentHodling        CompanyHolding        TotalDifference
 1                  acc001049        prod        mango        2500                  0        2500
 1                  acc636903        prod        mango        481081.29        481081.285        0.01
 1                  acc179186        prod        mango        453639.61        511285.81        -57646.2
 1                  acc179185        prod        mango        2775               2650        125
 1                  acc170001        prod        grapes       0                     1500        -1500
 1                  acc170000        prod        grapes       2500        0        2500
 1                  acc107104        prod        apple        49797.22        49797.28        -0.06
 1                  acc107103        prod        apple        0        -0.06        0.06
 1                  acc107102        prod        apple        2000        500        1500
 1                  acc107101        prod        apple        0        1500        -1500
 1                  acc001189        prod        apple        0        1090.513        -1090.513 
```

参考：

我收到了一个答案（[按计数排序不正确 - SQL（MS Access 2007）](https://stackoverflow.com/questions/12888829/order-by-count-not-sorting-correctly-sql-ms-access-2007)），所以这是一个跟进。

问题：

是否可以在不汇总所有结果的情况下按频率排序，并且仍然按最高频率（苹果、芒果、葡萄）显示订单，包括关联的帐号？
如果使用 sum 作为 order by，“不能在 ORDER BY 中具有聚合函数”，所以我不确定我是否可以这样做并且仍然保持帐号分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:23:32.087

将子句拉出`ORDER BY`到外层查询，内层查询会计算频率，如下：

```
SELECT * FROM (
SELECT 
    Count(CurrentTrade.Code) AS CountOfCode, 
    CurrentTrade.portfolio_code, 
    CurrentTrade.Type, 
    CurrentTrade.Code, 
    sum(CurrentTrade.Custodian_holding) AS AgentHolding, 
    sum(CurrentTrade.Company_holding) AS CompanyHolding, 
    sum(CurrentTrade.Difference) AS TotalDifference
FROM 
    CurrentTrade 
    LEFT JOIN PrevTrade 
    ON CurrentTrade.Company_holding = PrevTrade.Company_holding
WHERE 
    PrevTrade.Company_holding) Is Null
GROUP BY CurrentTrade.Code, CurrentTrade.portfolio_code, CurrentTrade.Code, CurrentTrade.Type
) ORDER BY CountOfCode ASC 
```

# php - 从另一个网站解析表

> ID：12907010
> 
> 赞同：0
> 
> 时间：2012-10-16T03:12:31.150
> 
> 标签：php, html, web-scraping

> **可能重复：**
> [如何使用 PHP 在另一个站点中显示一个站点的内容？](https://stackoverflow.com/questions/2735534/how-to-display-content-of-one-site-in-another-using-php)

我需要在我正在创建的网站上显示潮汐数据，我无法访问此类数据的 API，所以我想知道是否可以在此页面上获取表格：http: [//www.bom.gov .au/cgi-bin/oceanography/tides/tide_predications.cgi?location=SA_61900&tide_hiddenField=South%20Australia&years=2012&months=Oct&dates=16](http://www.bom.gov.au/cgi-bin/oceanography/tides/tide_predications.cgi?location=SA_61900&tide_hiddenField=South%20Australia&years=2012&months=Oct&dates=16)并将其显示在我自己的页面上，并能够重新格式化它，使其看起来很漂亮。用 PHP 或 Java 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:14:45.533

你可以使用这个 php 库[SimpleHtml Dom](http://simplehtmldom.sourceforge.net/)

按照文档进行操作，这很不言自明

```
$html = file_get_html('http://www.bom.gov.au/cgi-b...');

foreach($html->find('table') as $table) {
   // your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:17:42.900

```
<?php function getHTML($url){ //inisialisation CURL

$data = curl_init();

// setting CURL

curl_setopt($data, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($data, CURLOPT_URL, $url);

// run CURL to read file

$value = curl_exec($data);

curl_close($data);

return $value;

}

?> 
```

我希望它可以帮助你的问题.. :)

# c# - 显示手串二十一点

> ID：12907012
> 
> 赞同：0
> 
> 时间：2012-10-16T03:12:41.963
> 
> 标签：c#, console-application

您好，我目前正在尝试完成一项作业，但我在完成其中一门课程时遇到困难，该课程已被调用`hand.cs`，它看起来如下。

*   [`Hand.cs`](http://pastebin.com/JEySJFLd)
*   [`Twentyone.cs`](http://pastebin.com/RKURYiFH)
*   [`Card.cs`](http://pastebin.com/jipvRf3c)

hand.cs 从中提取的另外两个数据源被称为`card.cs`and `twentyOne.cs`，在人们发表评论之前，我知道这是一个明显的解决方案，对许多读者来说可能看起来很可笑，但是我一直在研究这个 hand.cs 以获得更好的4天的一半没有进展。

任何和所有有关的帮助`"public void DisplayHand(bool shortFormat, bool displaySuit)"`将不胜感激，如果您的答案不是太麻烦，您可以概述代码以完成返回并就其工作方式提供一些反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:17:14.107

在您的`Hand`班级中，您将当前手牌存储在`List<string>`适当命名的`cards`. 在您的`DisplayHand`方法中，您可以使用循环遍历列表`foreach`：

```
foreach (Card card in cards) {
    // process and/or display current card
} 
```

现在，在您的`Card`类中，该`ToString()`方法已被重载以接受两个参数：

```
public string ToString(bool shortFormat, bool displaySuit) 
```

这两个相同的参数可以方便地传递给类`DisplayHand`中的函数`Cards`。由于您想*从*该方法调用该`ToString()`方法，您可以简单地传递您收到的参数，您将返回一个表示卡片的漂亮且格式化的字符串！您应该无需做太多工作，就可以将上面的循环与对卡片的调用结合起来，以获得所需的输出：*`DisplayHand``ToString()`*

 *```
public void DisplayHand(bool shortFormat, bool displaySuit) {
    StringBuilder cardOutput = new StringBuilder();
    foreach (Card card in cards) {
        if (cardOutput.Length > 0) {
            // we already have one or more cards to display for this hand; separate them
            // with a space-delimiter
            cardOutput.Append(" ");
        }
        // add the current card to the display
        cardOutput.Append(card.ToString(shortFormat, displaySuit));
    }
    Console.WriteLine(cardOutput.ToString());
} 
```

我使用一个空格作为卡片之间的分隔符；您可以将其更新为您认为合适的任何内容。此外，如果您不希望每个卡片列表出现在换行符上，只需将`Console.WriteLine()`改为`Console.Write()`。

* 注意：我选择[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)在我的示例中使用而不是基本的字符串连接有两个原因。首先是因为在 C# 中，字符串是不可变的（连接它们的效率远低于使用`StringBuilder`）；第二个是向您展示如何使用`StringBuilder`（我只假设您不使用它，因为您的示例代码都不包含它）。要做到这一点`StringBuilder`（删除评论/等）：

```
string cardOutput = string.Empty;
foreach (Card card in cards) {
    if (!cardOutput.Equals(string.Empty)) cardOutput += " ";
    cardOutput += card.ToString(shortFormat, displaySuit);
}
Console.WriteLine(cardOutput); 
```*

# postgresql - 在 Cygwin 上编译 PostgreSQL 8.3.1 src/tutorial：“未定义对 _SET_VARSIZE 的引用”

> ID：12907015
> 
> 赞同：1
> 
> 时间：2012-10-16T03:13:22.970
> 
> 标签：postgresql

跟进[我之前关于 find 的问题`pg_config`](https://stackoverflow.com/questions/12903619/pg-config-in-postgresql-8-3-1)，我仍然很难`/src/tutorial`编译子目录。

我在 Windows 7 上运行 cygwin。这不是一个理想的环境，但我正在尝试获得一个用这个版本编写的 PostgreSQL 扩展，它使用基于 Windows 的界面来工作。一旦我让它运行，我将迁移到 Linux 和更好的 PostgreSQL。

回到问题：

当我运行 make on 时，我得到了以下信息`/src/tutorial`。我没有更改目录中的任何内容。

```
$ make
dlltool --export-all --output-def complex.def complex.o
dllwrap -o complex.dll --def complex.def complex.o -L/usr/lib -lpostgres -L/usr/                                                                                                              lib -lpostgres
rm -f complex.def
gcc -O2 -pipe  -Wall -Wmissing-prototypes -Wpointer-arith -Winline -Wdeclaration                                                                                                           -after-statement -Wendif-labels -fno-strict-aliasing -fwrapv  -I. -I/usr/include                                                                                                                  /postgresql/server -I/usr/include/postgresql/internal   -c -o funcs.o funcs.c
funcs.c:19:1: warning: ‘Pg_magic_func’ redeclared without dllimport attribute: p                                                                                                                 revious dllimport ignored
funcs.c: In function ‘copytext’:
funcs.c:74:2: warning: implicit declaration of function ‘SET_VARSIZE’
dlltool --export-all --output-def funcs.def funcs.o
dllwrap -o funcs.dll --def funcs.def funcs.o -L/usr/lib -lpostgres -L/usr/lib -l                                                                                                                 postgres
funcs.o:funcs.c:(.text+0xb6): undefined reference to `_SET_VARSIZE'
funcs.o:funcs.c:(.text+0x142): undefined reference to `_SET_VARSIZE'
collect2: ld returned 1 exit status  
dllwrap: gcc exited with status 1 
```

我不知道需要包含在 funcs 中的正确头文件是什么。

此错误发生在未修补的 8.3.1 中。

谢谢

**编辑**

我在安装中发现了上述问题。`/src/tutorial`运行下的 Makefile

```
PG_CONFIG = pg_config
PGXS := $(shell $(PG_CONFIG) --pgxs) 
```

不幸`pg_config`的是，除了我的那个之外，还有另一个`installation-folder/bin`

所以一旦我解决了这个问题，一切`/src/tutorial`正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:35:46.903

正如评论中提到的，这一次是由错误版本的额外 pg_config 引起的。很可能这也不是错误版本的唯一方面。正在使用的旧头文件将是最近的原因，并且 pg_config 将定向到旧头文件。

一般来说，正确的做法是找到两个文件的所有版本，然后确定正在使用哪个版本。这些文件是：

1.  pg_config

2.  postgres.h

完成此操作后，它应该是一个简单的模式来确定要删除或移出脚本可以找到的位置。

# delphi - Delphi：是否有重构工具可以将一个单元中的类及其依赖项提取到一个新单元中？

> ID：12907020
> 
> 赞同：1
> 
> 时间：2012-10-16T03:14:01.220
> 
> 标签：delphi

我有一个包含许多类的大单元，现在我想通过将某些类分成新单元来重构该单元。

我不得不承认我缺乏使用 Delphi 内置 IDE 功能的经验。利用内置功能**“查找|查找要键入的本地引用*"****没有太大帮助，因为类方法使用了许多单元级别的变量、常量和类型。*

 *我正在寻找一种可以帮助我轻松完成此任务的重构工具，最好是开源的，但也欢迎使用共享软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:01:19.533

您始终可以手动执行此操作。否则，您可能会考虑使用 ModelMaker Code Explorer 或 ModelMaker 等支持提取类重构的工具，

[http://www.modelmakertools.com/code-explorer/features.html#explorer-refactorings](http://www.modelmakertools.com/code-explorer/features.html#explorer-refactorings)*

# python - Python：当它包含代理对时获得正确的字符串长度

> ID：12907022
> 
> 赞同：14
> 
> 时间：2012-10-16T03:14:23.433
> 
> 标签：python, surrogate-pairs

考虑以下关于 IPython 的交流：

```
In [1]: s = u'華袞與緼同歸'

In [2]: len(s)
Out[2]: 8 
```

正确的输出应该是`7`，但是因为这七个汉字中的第五个具有高 Unicode 代码点，所以它在 UTF-8 中由“代理对”表示，而不仅仅是一个简单的代码点，因此 Python认为它是两个字符而不是一个字符。

即使我使用`unicodedata`，它将代理对正确地作为单个代码点（`\U00026177`）返回，当传递给`len()`错误的长度时仍然返回：

```
In [3]: import unicodedata

In [4]: unicodedata.normalize('NFC', s)
Out[4]: u'\u83ef\u889e\u8207\u7dfc\U00026177\u540c\u6b78'

In [5]: len(unicodedata.normalize('NFC', s))
Out[5]: 8 
```

如果不采取像为 UTF-32 重新编译 Python 这样的激烈步骤，有没有一种简单的方法可以在这种情况下获得正确的长度？

我在 IPython 0.13、Python 2.7.2、Mac OS 10.8.2 上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T16:10:51.823

我认为这已在 3.3 中修复。看：

[http://docs.python.org/py3k/whatsnew/3.3.html](http://docs.python.org/py3k/whatsnew/3.3.html)
[http://www.python.org/dev/peps/pep-0393/](http://www.python.org/dev/peps/pep-0393/)（搜索`wstr_length`）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-14T17:42:18.887

我在 Python 2 上创建了一个函数来执行此操作：

```
SURROGATE_PAIR = re.compile(u'[\ud800-\udbff][\udc00-\udfff]', re.UNICODE)
def unicodeLen(s):
  return len(SURROGATE_PAIR.sub('.', s)) 
```

通过用单个字符替换代理对，我们“修复”了该`len`函数。在普通字符串上，这应该非常有效：由于模式不匹配，原始字符串将不加修改地返回。它也应该适用于宽（32 位）Python 版本，因为不会使用代理对编码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-08T22:16:42.087

您可以覆盖 Python 中的 len 函数（请参阅：[len 如何工作？](https://stackoverflow.com/questions/2171960/how-does-len-work)）并在其中添加一个 if 语句来检查超长的 unicode。

# python - 正则表达式：在匹配时间 {n} 中使用反向引用？

> ID：12907026
> 
> 赞同：1
> 
> 时间：2012-10-16T03:14:58.263
> 
> 标签：python, regex, backreference

我想使用正则表达式来匹配字符串列表：`1a`, `2aa`, `3aaa`... 其中字符串中的第一个数字表示该数字后面有多少个 a。

我本能地认为反向引用可能会有所帮助，但事实并非如此。

在 Regex 中，我们可以使用反向引用来匹配先前捕获的子模式。例如，`(.+) \1`将匹配`aaa aaa`.

我可以在模式匹配时间使用反向引用`{n}`，`{n,m}`还是`{n,}`？

例如，`\da{\1}`理想情况下会匹配`3aaa`，但是，我用 python 构建模块测试了`re`它，它不起作用。编译器似乎将其理解`\da{\1}`为不同的文字：

```
>>> re.compile('\da{\1}', re.DEBUG)
in
  category category_digit`
literal 97
literal 123
literal 1
literal 125
<_sre.SRE_Pattern object at 0xb7726790>

>>> re.compile('\da{1}', re.DEBUG)`
in
  category category_digit
max_repeat 1 1
  literal 97
<_sre.SRE_Pattern object at 0xb7707820> 
```

这个功能是模块没有实现还是仅仅因为基本的正则表达式算法不能支持这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:30:32.123

有趣的想法，但我认为编译正则表达式时会处理“{n}”。

你可以这样做：

```
>>> import re
>>> text = '3aaa'
>>> m = re.search('(\d+)a', text)
>>> pat = '\d+a{%s}' % m.group(1)
>>> n = re.search(pat, text)
>>> n.group(0)
'3aaa' 
```

如果你想排除像'3aaaaa'这样的模式，你应该在模式的末尾需要一个'\b'（Python让你输入'\b'）：

```
pat = '\d+a{%s}\\b' % m.group(1) 
```

# python - 查找信用卡付款的 Python 代码

> ID：12907027
> 
> 赞同：-1
> 
> 时间：2012-10-16T03:15:16.070
> 
> 标签：python

我是一名 PYTHON 初学者，正在编写一些代码，但它不起作用……你能帮我找出我的错误并纠正它吗？

到目前为止，这是我的代码：

```
balance=int(raw_input("Enter the outstanding balance on your credit card: "))
annualInterestRate=float(raw_input("Enter the annual credit card interest rate as a decimal: "))
monthlyPaymentRate=float(raw_input("Enter the monthly payment rate as a decimal"))

monthInterestRate = annualInterestRate / 12
monthlyPayment = monthlyPaymentRate*balance
newBalance= (balance-monthlyPayment) * (1 + monthInterestRate) #newBalance is updated balance
month=0

while month<12:
    month += 1
    monthlyPayment = (monthlyPaymentRate*balance)
    newBalance=(balance-monthlyPayment)*(1 + monthInterestRate)
    newBalance = balance
    print("Month: " + str(month))
    print("Minimum monthly payment: " + str(monthlyPayment))
    print("Remaining balance: " + str(newBalance)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:19:35.487

猜测一下，问题是`newBalance = balance`，它丢弃了您在前一行进行的计算并用原始余额替换它。但是，当您没有说出您所看到的“错误”时，很难确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T17:59:57.980

```
balance = int(raw_input("Enter the outstanding balance on your credit card: "))
annualInterestRate = float(raw_input("Enter the annual credit card interest rate as a decimal: "))
monthlyPaymentRate = float(raw_input("Enter the monthly payment rate as a decimal: "))
month = 0

while month<12:
    monthlyPayment = (monthlyPaymentRate)*(balance)
    unpaidBalance = (balance)-(monthlyPayment)
    interest = ((annualInterestRate)/(12.0)) *(unpaidBalance)
    updatedBalance = (unpaidBalance)+(interest)
    month +=1
    balance = updatedBalance
    print ('Month: '+ str(month))
    print ('Minimum monthly payment:' + str(round(monthlyPayment,2)))
    print ('Remaining Balance after one year: ' + str(round(updatedBalance,2))) 
```

# c# - 将数据结构作为参数传递

> ID：12907032
> 
> 赞同：0
> 
> 时间：2012-10-16T03:16:15.507
> 
> 标签：c#, asp.net

我有三个数据结构，

```
Tuple<string, string> parentid = null;
var subids = new List<Tuple<int, int>>();
Tuple<string, string> dname = null;

ArrayList al = new ArrayList();
al.add(parentid);
al.add(subids);
al.add(dname); 
```

我调用了一个函数，它返回一个`ArrayList`包含这 3 个数据结构的函数。

例如

```
ArrayList al = category.getTree(); 
```

现在我想将数据结构传递给另一个方法

```
string option = category.printOption(al[0], al[1], al[2], 0); 
```

`printOption`代码：

```
public string printOption(Tuple<string, string> parents, List<Tuple<int, int>> subids, Tuple<string, string> dname, int indent) 
```

但是有一个错误：

> *最好的重载方法.......*

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:21:45.750

`ArrayList`存储对象，因此要使用内容，您需要将要使用的每个对象转换为正确的类型：

```
string option = category.printOption((Tuple<string, string>)al[0],
    (List<Tuple<int, int>>)al[1], (Tuple<string, string>)al[2], 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:23:39.323

```
string option = category.printOption((add your cast here) al[0], ( List< Tuple < int, int>>) al[1], (and here) al[2], 0); 
```

# c++ - 单步执行直到从函数 __svfscanf_l 退出，该函数没有行号信息

> ID：12907033
> 
> 赞同：0
> 
> 时间：2012-10-16T03:16:38.613
> 
> 标签：c++, c

我正在制作一个 C 程序。我有一个功能，一切似乎都很好。但是，如果我向其中添加另一个变量，它突然不起作用，并且出现分段错误。（如果我使用 gdb，我会收到错误：单步执行直到从函数 __svfscanf_l 退出，它没有行号信息。程序接收到的信号：“EXC_BAD_ACCESS”。）

这是我的功能：

```
void condition(char *command) {
printf("CAMMAND: %s\n", command);
char *cond;
char *expression;
char *file;
char *buffer;
buffer = malloc(200 * sizeof(char));

sscanf(command, "%s ( %s %s ) %[^\n]", cond, expression, file, buffer);

printf("COND: %s\n", cond);
printf("EX: %s\n", expression);
printf("File: %s\n", file);
printf("Command: %s\n", buffer);

if (!strcmp(expression, "checke")) {
    printf("CHECK EXISTS\n");
    if (file_exists(file)) {
        printf("EXISTS\n");
    }
} else if (!strcmp(expression, "checkd")) {
    printf("CHECK DIR\n");
} else if (!strcmp(expression, "checkr")) {
    printf("READ\n");
} else if (!strcmp(expression, "checkw")) {
    printf("CHECK WRITE\n");
} else if (!strcmp(expression, "checkx")) {
    printf("CHECK EX\n");
} else {
    printf("NOOOO\n");
}
} 
```

但是，如果我什至将其更改为如下所示的内容，则会出现错误。sscanf 调用似乎失败了。但是当我不添加一些变量时，这很有效。

```
void condition(char *command) {
int flag;
printf("CAMMAND: %s\n", command);
char *cond;
char *expression;
char *file;
char *buffer;
buffer = malloc(200 * sizeof(char));

sscanf(command, "%s ( %s %s ) %[^\n]", cond, expression, file, buffer);

printf("COND: %s\n", cond);
printf("EX: %s\n", expression);
printf("File: %s\n", file);
printf("Command: %s\n", buffer);

if (!strcmp(expression, "checke")) {
    printf("CHECK EXISTS\n");
    if (file_exists(file)) {
        printf("EXISTS\n");
    }
} else if (!strcmp(expression, "checkd")) {
    printf("CHECK DIR\n");
} else if (!strcmp(expression, "checkr")) {
    printf("READ\n");
} else if (!strcmp(expression, "checkw")) {
    printf("CHECK WRITE\n");
} else if (!strcmp(expression, "checkx")) {
    printf("CHECK EX\n");
} else {
    printf("NOOOO\n");
}
} 
```

似乎无法弄清楚这是为什么。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:28:03.483

您正在获得内存损坏，因为您将指向字符的指针而不是指向字符*数组*的指针作为`%s`转换的目标。 `expression`，正如定义的那样，未初始化并指向某个随机内存位置。这是`sscanf`文档的相关部分：

```
s      Matches a  sequence  of  non-white-space  characters;  the  next
       pointer must be a pointer to character array that is long enough
       to hold the input sequence and the  terminating  null  character 
```

您需要为`expression`等分配一些空间。

# ruby-on-rails-3 - 错误——：未初始化的常量 Airbrake (NameError)

> ID：12907034
> 
> 赞同：8
> 
> 时间：2012-10-16T03:16:45.963
> 
> 标签：ruby-on-rails-3, deployment, production-environment, airbrake

我正在开发一个rails 3.2.8项目，我刚刚安装了airbrake gem来跟踪错误，在开发中我做了airbrake安装步骤，然后当我用capistrano进行部署时，我在独角兽中得到了以下错误生产日志：

```
E, [2012-10-16T03:02:51.588084 #3645] ERROR -- : reaped #<Process::Status: pid 3846 exit 1> worker=3
I, [2012-10-16T03:02:51.588434 #3645]  INFO -- : worker=3 spawning...
I, [2012-10-16T03:02:51.708539 #3858]  INFO -- : worker=3 spawned pid=3858
I, [2012-10-16T03:02:51.708986 #3858]  INFO -- : Refreshing Gem list
E, [2012-10-16T03:02:52.793217 #3849] ERROR -- : uninitialized constant Airbrake (NameError)
/home/ubuntu/apps/nimrod/releases/20121011033552/config/initializers/airbrake.rb:1:in `<top (required)>'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `block in <class:Engine>'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/ubuntu/apps/nimrod/releases/20121011033552/config/environment.rb:5:in `<top (required)>'
config.ru:4:in `require'
config.ru:4:in `block in <main>'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
config.ru:1:in `new'
config.ru:1:in `<main>'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `eval'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `block in builder'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `call'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `build_app!'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:569:in `init_worker_process'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:589:in `worker_loop'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:487:in `spawn_missing_workers'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:498:in `maintain_worker_count'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:272:in `join'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/bin/unicorn:121:in `<top (required)>'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/bin/unicorn:19:in `load'
/home/ubuntu/apps/nimrod/shared/bundle/ruby/1.9.1/bin/unicorn:19:in `<main>' 
```

我注意到 airbrake gem 与所有其他 gem 一起安装在 shared/bundle/ruby/1.9.1/gems 中。

在生产中，我正在运行 Ubuntu 12.04 x64，独角兽与 nginx 和 ruby​​ 1.9.3-p194 一起运行，这个 gem

```
Using airbrake (3.1.4) 
Using capistrano (2.12.0)    
Using bundler (1.1.4) 
Using rails (3.2.8) 
Using unicorn (4.3.1) 
```

并且还试图停止nginx，独角兽然后重新启动它们，但它没有奏效

我希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T09:28:56.100

更新我的捆绑包后我遇到了类似的错误。

似乎您必须在 airbrake 初始化程序（config/initializers/airbrake.rb 或 config/initializers/errbit.rb）中要求 rake_handler：

```
require 'airbrake/rake_handler' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T09:21:12.863

类似于上面的knagode。我需要添加 rake 处理程序。

```
require 'airbrake/rake_handler' 
```

我还需要停止并再次启动服务器。

```
cap <env> deploy:stop
cap <env> deploy:start 
```

似乎重新启动功能没有捡起它。

我的堆栈：

*   Nginx
*   独角兽
*   导轨 4
*   西德基克
*   雷迪斯
*   Postgres

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T08:56:16.137

对我来说，以这种方式重新启动服务器有帮助：

```
cap <env> deploy:stop
cap <env> deploy:start 
```

# javascript - 具有可变数量/类型参数的函数的 TypeScript 声明文件

> ID：12907038
> 
> 赞同：39
> 
> 时间：2012-10-16T03:17:00.423
> 
> 标签：javascript, typescript

headjs 对其 API 做了一些非常疯狂的 JavaScript 类型操作。例如，函数需要任意数量的字符串（不是字符串数组）。有时它会结束同一个函数调用，例如，您可以选择用函数结束它。

```
head.js("scripturl1", "scripturl2",...,callback); 
```

您还可以（同样轻松地）执行以下操作

```
head.js({scriptlabel:"scripturl1"},{scriptlabel2:"scripturl2"},...., callback); 
```

我的问题是我们如何在声明文件中描述它？我全神贯注，因为我目前的通行证似乎完全错误。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-16T04:12:12.210

TS 语言规范将可变数量/扩展参数称为“剩余参数”。带有接受其余参数的函数签名的示例接口：

```
interface IExample {
    fn : (...args : any[]) => any;
}

var x : IExample = {
    fn: function(...args : any[]) {
        for (var i = 0, arg; arg = args[i]; i++) {
            console.log(arg);
        }
    }
}

x.fn(1);
x.fn(1, 2);
x.fn("cat", "dog", "mouse"); 
```

不幸的是，有一些限制。“Rest Parameter”必须是函数签名中的最后一个——因此您将无法捕获回调参数的类型，因为它位于重复参数之后。

如果不是，您将能够执行以下操作：

```
var fn = function(cb: Function, ...args : string[]) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-12T16:31:43.893

您可以执行以下操作：

```
type Action<T extends any[]> = (...args: T) => void 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-10-16T03:30:06.100

声明很简单：

```
function foo () { //... 
```

Javascript 中函数声明的函数参数部分只是建议性的。调用函数时，Javascript 允许您使用少于声明数量的参数（默认情况下未传递的参数`undefined`）或多于声明数量的参数进行调用。

调用函数时，会创建一个[参数对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。arguments 对象有点像一个数组（尽管它不是一个正确的 Array 对象），其中包含每个传入的参数。

因此，例如，要处理无限参数，您可以简单地执行以下操作：

```
function foo () {
  for (var n=0; n<arguments.length; n++) {
    alert(arguments[n]);
  }
} 
```

所以现在你可以`foo`这样打电话：

```
foo(1,2,3);
foo(1,2,3,4,5,6,7,8); 
```

除此之外，只需使用[typeof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)、[itstanceof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)等来检测传入的参数类型并相应地处理它们。

# python - Python - 打印函数 2.7 上的语法错误

> ID：12907039
> 
> 赞同：0
> 
> 时间：2012-10-16T03:17:01.097
> 
> 标签：python, syntax, printing

对于某些背景，我已经编程多年，但直到现在才真正接触过 Python，我不确定这里出了什么问题，IDLE 正在标记第 24 行（最后一行）：

```
'''
 Test Cases
'''
balance = 4213
annualInterestRate = 0.2
monthlyPaymentRate = 0.04

'''
 Variables
'''
previousBalance = 0
monthlyInterestRate = 0
minMonthlyPayment = 0
totalPaid = 0

m = 1
while (m != 12):
    monthlyInterestRate = annualInterestRate / 12
    minMonthlyPayment = monthlyPaymentRate * previousBalance
    balance = (previousBalance - minMonthlyPayment) * (1 + monthlyInterestRate)
    totalPaid = totalPaid + minMonthlyPayment
    previousBalance = balance
    m += 1
print('Month: ' + str(m))
print('Minimum monthly payment: ' + str(minMonthlyPayment))
print('Total paid: ' + str(round(totalPaid, 2))
print('Remaining balance: ' + str(round(balance, 2)) #Flagging Here 
```

如果有人对为什么最后一个打印功能会导致任何问题有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:17:55.383

你在第 23 行的末尾省略了一个括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T18:22:59.523

作为提示，下次不要在 2.7 中的 print 函数周围加上括号。它的工作效率不高。它也消除了这样的困惑，我会知道，因为它一直发生在我身上。但是，您应该在 3.x 中执行此操作。

# python - 编写一个程序，计算在 12 个月内还清信用卡余额所需的最低每月固定还款额

> ID：12907040
> 
> 赞同：2
> 
> 时间：2012-10-16T03:17:06.923
> 
> 标签：python, python-2.7

这个问题适用于 python 2.7。问题要求编写一个程序，计算在 12 个月内还清信用卡余额所需的最低每月固定还款额。固定每月还款额是指一个每月不变的数字，而是一个常数每月支付的金额。

在这个问题中，我们不会处理最低每月支付率。

以下变量包含如下所述的值： balance - 信用卡上的未结余额

该程序应打印出一行：将在 1 年内偿还所有债务的最低每月付款。

假设按月末余额（当月还款后）按月复利。每月付款必须是 10 美元的倍数，并且所有月份都相同。请注意，使用此付款方案，余额可能会变为负数，这没关系。所需数学的摘要如下所示：

月利率=（年利率）/12 每月更新余额=（上一次余额-每月最低还款额）x（1+月利率）

我想出了一个问题的代码；但是，我反复遇到无限循环。

```
 b = balance = 3329
    air = annualInterestRate = 0.2
    monthlyInterestRate = (air/12)
    mmp = minimumMonthlyPayment = (balance * monthlyInterestRate)
    month = 0
    while month <= 12:
        b = ((b - mmp) * (1 + (air/12)))
        month = 1 + month
        if b <= 0 and month == 12:
           break
        elif b > 0 and month == 12:
           b = balance
           month = 0
           mmp = minimumMonthlyPayment + 10.00
    print str('Lowest Payment: ' + str(round(mmp, 2))) 
```

有人可以帮我修复此代码吗？对于给定的余额，最低付款是 310 ......我不知道如何得到这个......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-05T12:25:46.093

```
monthlyInterestRate = annualInterestRate/12
monthlyPayment = 0
newbalance = balance
while newbalance > 0:
    monthlyPayment += 10
    newbalance = balance
    month = 1

    while month <= 12 and newbalance > 0:
        newbalance -= monthlyPayment
        interest = monthlyInterestRate * newbalance
        newbalance += interest
        month += 1
    newbalance = round(newbalance,2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T09:27:45.117

```
monthlyPayment = 0
monthlyInterestRate = annualInterestRate /12
newbalance = balance
month = 0

while newbalance > 0:
    monthlyPayment += 10
    newbalance = balance

    for month in range(1,13):
        newbalance -= monthlyPayment
        newbalance += monthlyInterestRate * newbalance
        month += 1
print " Lowest Payment:", monthlyPayment 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T03:38:34.483

First of all you have to fix month <= 12 make it month < 12 secondly you are using a form which is not needed here balance = ((balance - minimumMonthlyPayment) * (1 + monthlyInterestRate)) because simply you don't have to use the minimum payment here Your code is too bad

Try this:

```
 balance = 3329
    annualInterestRate = 0.2

    monthlyPayment = 10
    monthlyInterestRate = interestRate/12
    newbalance = balance - 10

    while newbalance > 0:
        monthlyPayment += 10
        newbalance = balance
        month = 0

        while month < 12 and newbalance > 0:

            month += 1
            interest = monthlyInterestRate * newbalance
            newbalance -= monthlyPayment
            newbalance += interest

    newbalance = round(newbalance,2)

    print " Lowest Payment:", monthlyPayment 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-08T18:33:11.380

这应该在所有情况下为您提供正确的答案：

```
monthlyPayment = 10
monthlyInterestRate = annualInterestRate /12
newbalance = balance - 10

while newbalance > 0:
    monthlyPayment += 10
    newbalance = balance
    month = 0

    while month < 12 and newbalance > 0:
        newbalance -= monthlyPayment
        interest = monthlyInterestRate * newbalance
        newbalance += interest
        month += 1
    newbalance = round(newbalance,2)
print " Lowest Payment:", monthlyPayment 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-21T23:02:58.010

我认为这是一种相当简单的方法：

```
x = 50
o = balance
a = [1,2,3,4,5,6,7,8,9,10,11,12]
monthly = annualInterestRate/12

while balance>0:
    for months in a:
        u = balance - x
        balance = u + (monthly * u)
    if balance > 0:
        x += 10
    else:
        break
print x 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-10T11:55:48.887

```
balance = 3329
annualInterestRate = 0.2
monthlyInterestRate = annualInterestRate/12
monthlyPayment = 0
newbalance = balance
while newbalance > 0:
monthlyPayment += 10
newbalance = balance
month = 1
while month <= 12 and newbalance > 0:
    newbalance -= monthlyPayment
    newbalance += (monthlyInterestRate * newbalance)
    month += 1    
print "Lowest Payment:",monthlyPayment 
```

认为这将是您疑问的最佳解决方案..并满足答案

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-16T03:32:16.427

这段代码有点奇怪，即像这样的行：

```
 mmp = minimumMonthlyPayment = (balance * monthlyInterestRate) 
```

用双等号。

此代码不会卡住：

```
balance = 5000
annualInterestRate = 0.2
monthlyInterestRate = (annualInterestRate/12)
minimumMonthlyPayment = (balance * monthlyInterestRate)
month = 0
while month <= 12:
    balance = ((balance - minimumMonthlyPayment) * (1 + monthlyInterestRate))
     month = 1 + month
    if balance <= 0 and month == 12:
        break
    elif balance > 0 and month == 12:
        month = 0
        minimumMonthlyPayment + 1.00

print str('Lowest Payment: ' + str(round(minimumMonthlyPayment, 2))) 
```

但不会返回您正在寻找的答案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-12T20:02:00.223

这基本上是 randomizertech 答案的略微改进版本，它允许用户输入不同的变量，而不是仅针对初始余额和年利率的固定值进行。最后它会打印出更多对用户有用的变量。

```
InitialBalance = float(raw_input("Enter your current balance: "))
InterestRate = float(raw_input("Enter the yearly interest rate as a decimal: "))

monthlyPayment = 0
monthlyInterestRate = InterestRate/12
balance = InitialBalance

while balance > 0:
    monthlyPayment += 10
    balance = InitialBalance
    numMonths = 0

    while numMonths < 12 and balance > 0:

        numMonths += 1

        interest = monthlyInterestRate * balance

        balance -= monthlyPayment

        balance += interest

    balance = round(balance,2)

print "RESULT"
print "Monthly payment to pay off debt in 1 year: " , monthlyPayment
print "Number of months need to pay the debt: " , numMonths
print "Balance after debt is paid: " , balance 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-31T02:53:53.740

```
for i in range(12):
     balance = balance - (balance * monthlyPaymentRate) + ((balance - (balance * monthlyPaymentRate)) * (annualInterestRate/12))

print("Remaining balance:", round(balance, 2)) 
```

# 正确 10/10

# python - 安装 IDLE 扩展 IdleX-1.11.1 时出错

> ID：12907044
> 
> 赞同：1
> 
> 时间：2012-10-16T03:17:37.267
> 
> 标签：python, python-idle

我正在尝试为 IDLE 安装[IdleX](http://idlex.sourceforge.net)扩展。无论我是从命令行`python idlex.py`还是从 Python Launcher 运行安装程序，我都会收到相同的错误：

```
$ cd '/Volumes/Pig/Users/arrow/Downloads/idlex-1.11.1/' && 
'/usr/local/bin/pythonw' 
'/Volumes/Pig/Users/arrow/Downloads/idlex-1.11.1/idlex.py'  && 
echo Exit status: $? && exit 1

Oct 15 20:00:29 Niflheimr.local Python[45309] <Error>: 
kCGErrorInvalidConnection: CGSGetWindowTags: Invalid connection

Oct 15 20:00:29 Niflheimr.local Python[45309] <Error>: 
kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() 
to catch errors as they are logged. 
```

我在 Mac OS 10.7.5 上运行适用于 Mac 的 Python 2.6 包

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:32:20.240

这看起来像是 Tkinter 的问题。请参阅此站点： http: [//www.python.org/download/mac/tcltk/](http://www.python.org/download/mac/tcltk/)

启动 IDLE 本身是否正常工作？您可以使用以下命令启动它：

```
python -m idlelib.idle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T06:16:53.970

我假设您已经从空闲站点下载了 zip。要安装扩展，您需要解压缩并运行

```
python setup.py install 
```

你会有类似的视觉效果

```
python setup.py install
running install
running build
running build_py
creating build
creating build/lib.linux-x86_64-2.7
creating build/lib.linux-x86_64-2.7/idlexlib
copying idlexlib/__init__.py -> build/lib.linux-x86_64-2.7/idlexlib
copying idlexlib/launch.py -> build/lib.linux-x86_64-2.7/idlexlib
copying idlexlib/extensionManager.py -> build/lib.linux-x86_64-2.7/idlexlib 
```

可能遇到的错误：

```
error: could not create '/usr/local/lib/python2.7/dist-packages/idlexlib': Permission denied 
```

如果出现permission denied错误：在命令中使用root权限

干杯

# python - python字符串插值与另一种方法

> ID：12907048
> 
> 赞同：2
> 
> 时间：2012-10-16T03:18:04.350
> 
> 标签：python, string, loops, interpolation

我最初的python程序使用字符串插值来获取用户在0-9999之间输入的数字，例如2928，并将其各个数字相加（2 + 9 + 2 + 8 = 21），然后拆分数字直到最终变成一个数字数字（在本例中为 3），显示在屏幕上。代码如下所示：

现在我需要找出一种方法来做同样的事情，而不使用字符串插值（将整数转换为字符串，然后拆分字符串，将它们重新转换为整数，然后对它们求和）。我对python相当陌生，因此可以使用非常简单的命令（最复杂的是while循环）有人可以帮我/给我一些想法吗？

*ps，我想关于 yearint-year 是什么存在一些歧义。“年”是我上面没有写的命令，但它的代码让用户输入 0-9999 之间的数字。我将它的变量名更改为“yearint”，因为我是 python 新手，并且想要使事情具有描述性，以便我在回顾时可以记住它们。所以基本上 year/yearint 是用户输入的输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T03:21:08.373

将模数乘以 9，并进行一些调整以考虑 9 的倍数。

```
>>> (123 - 1) % 9 + 1
6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:49:45.003

```
def sumnum(num):
    if num < 10:
        return num
    return sumnum((num % 10) + sumnum(num/10))

sumnum(1234) 
```

因为递归。这就是为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:24:30.727

在 Python 中，您可以循环字符串值并从字符串中获取连续字符。

```
 for ch in "1234":
    print (ch) 
```

因此，这是对字符串的数字值求和的最佳方法：

```
sum(int(ch) for ch in s) 
```

在这里，我们使用“生成器表达式”调用 sum() 函数，该函数一次获取一个字符并将其转换为整数值。请注意，当您这样做时，字符串有多长并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:07:20.580

我在手机上输入这个，所以我将使用“y”而不是“yearString”。

```
if len(y) == 4:
    x = int(y[3]) + int([2]) + int(y[1]) + int([0])
    y = str(x)

if len(y) == 3:
    x = int([2]) + int(y[1]) + int([0])
    y = str(x)

if len(y) == 2:
    x = int(y[1]) + int([0])
    y = str(x) 

answer = int(y) 
```

看看如果总和有多个数字，稍后的 if 语句将如何处理它。现在让我们使用纯数学编写类似的代码：

```
x = int(yearString) 

d3 = x // 1000
x %= 1000

d2 = x // 100
x %= 100

d1 = x // 10
d0 = x % 10

answer = d3 + d2 + d1 + d0 
```

编辑：现在我已经考虑过了，我想我看到了你这样做的最佳方式。我不会为此编写完整的代码。

如果您使用模数运算符 10，您会拉出底部数字。然后，如果您使用整数除以 10，则删除底部数字。在 while 循环中执行此操作并继续执行此操作，直到所有数字都输出为止；在最后一次除以 10 后，该数字将为零。创建一个执行此操作的函数，并从 while 循环中调用它，直到总和小于 10（是单个数字）。

编辑：好的，我想我不妨写完整的代码：

```
y = int(yearString)
x = 0  # we will accumulate the sum in x
while y != 0:
    x += y % 10  # add one digit
    y //= 10  # discard one digit
    if y == 0 and x > 10:
        # We have pulled out all the digits from y, but x has
        # multiple digits.  Start over so we can sum the digits
        # from x.
        y = x
        x = 0

answer = x 
```

# arrays - Redim 没有 Dim？

> ID：12907050
> 
> 赞同：4
> 
> 时间：2012-10-16T03:18:16.317
> 
> 标签：arrays, vba

我在Win7下使用Access 2010。我发现我可以在运行时通过简单地调用`ReDim arrayName(x)`而不首先将数组声明为`Dim arrayName()`.

```
Sub FooBar()
   ReDim myArray(2)
   myArray(0) = "This is the first string in myArray."
   myArray(1) = "This is the second string in myArray."
   myArray(2) = "And this is the last string in myArray."
   MsgBox myArray(0) & vbCrLf & myArray(1) & vbCrLf & myArray(2)
End Sub 
```

有什么理由我不应该使用这个快捷方式吗？

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T04:20:52.180

那很有意思。 [这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/office/gg264224.aspx)确认了您所看到的内容：这是一个引用：

> “您可以使用 ReDim 语句在过程中隐式声明一个数组。注意不要在使用 ReDim 语句时拼错数组的名称。即使模块中包含 Option Explicit 语句，第二个数组也会创建的。”

此页面解释了`Redim`创建一个新数组并将现有数组复制到其中（假设有一个）：

[http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.80%29.aspx)

至于你的问题，如果你这样做，我会说不，因为它令人困惑，并且确实将你的代码打开到 Option Explicit 不会捕获的错误。

足够合理，`Redim Preserve`不会表现出这种行为。

# javascript - 谷歌地图不工作

> ID：12907052
> 
> 赞同：0
> 
> 时间：2012-10-16T03:18:19.637
> 
> 标签：javascript, google-maps-api-3

我有一个简单的应用程序，它将尝试加载谷歌地图。但是当我点击链接查看地图时。我得到了这个错误。

ReferenceError：未定义 GBrowserIsCompatible [中断此错误]

如果（GBrowserIsCompatible（））{

这是我的代码

------------ 脚本 -------------

```
<script type="text/javascript" 
src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBQ8OCC8En5vNHod25Ov3Qs5E1v7NPRSsg&sensor=true">
</script>

<script type="text/javascript">
    var map;
    var geocoder;

    //Show the google map
    function initialize() {
        if (GBrowserIsCompatible()) {
            map = new GMap2(document.getElementById("divMap"));

            map.setUIToDefault();
            geocoder = new GClientGeocoder();
        }
    }

    //Show default address on map
    function showTheMap() {
        document.getElementById('divMap').style.display = "block";
        initialize();
        var address = document.getElementById("spAddress1").innerHTML;
        geocoder.getLatLng(
            address,
            function (point) {
                if (!point) {
                    alert(address + " not found");
                }
                else {
                    map.setCenter(point, 15);
                    var marker = new GMarker(point);
                    map.addOverlay(marker);
                    marker.openInfoWindow(address);
                }
            }
        );
    }
</script> 
```

------------ HTML正文 ----------------

```
 <span id="spAddress1" runat="server" ClientIDMode ="Static"></span>
    <a onclick="showTheMap()" style="cursor: pointer;">
    <span style="text-decoration:underline;">Click here to view map </span>
    </a>

    <div id="divMap" style="display: none; width: 100%; height: 500px;top: -220px">
    </div> 
```

谢谢

鲁伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:28:02.943

`GBrowserIsCompatible()`如果您尚未加载 Google Maps API v2，则无法调用该函数。您需要获取 API 密钥才能执行此操作。

顺便说一句，不推荐使用 Google Maps API v2。使用 v3。v3 的一个优点：不需要 API 密钥。

# entity-framework - 如何首先使用代码在实体框架中使用可更新视图

> ID：12907056
> 
> 赞同：1
> 
> 时间：2012-10-16T03:19:31.747
> 
> 标签：entity-framework

我们首先将实体框架代码用于 DB 表。现在数据库已移至另一台开发服务器，并且 DBA 已创建可更新的视图来使用而不是表。我更改了连接字符串，它开始给出错误“数据库中的创建表权限被拒绝............”看起来因为表不存在数据库，EF 正在尝试创建一个。我按照以下步骤操作

[实体框架代码优先和预生成视图](http://blog.3d-logic.com/2012/05/28/entity-framework-code-first-and-pre-generated-views/)

[如何使用可更新视图](http://blogs.msdn.com/b/alexj/archive/2009/09/01/tip-34-how-to-work-with-updatable-views.aspx)

基本上创建了 edmx 文件并手动删除 DefiningQuery 标记并将 store:views 更改为表并生成视图并添加到项目中。但我仍然遇到同样的错误。

我是 EF 的新手，不清楚我在这里做什么。基本上我需要从这里告诉 EF 病房使用这个数据库，而不是之前使用的表，使用这些可更新的视图。我不确定这里是否需要数据库迁移。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:48:39.997

设法通过创建一个不执行任何操作并告诉 DbContext 使用此 Databaseinitlizer 而不是默认值的 New DatabaseIntializer 来解决它。这是代码：

```
internal class DatabaseInitializer : IDatabaseInitializer<DB>
{

  public void InitializeDatabase(DB context) {}      

}

public class DB : DbContext, IDbContext
{
    public DB() : base("name=ClientMgmtConnection") 
    {            
       System.Data.Entity.Database.SetInitializer(new DatabaseInitializer());
    }
} 
```

# c++ - c++打破模板专业化歧义

> ID：12907068
> 
> 赞同：2
> 
> 时间：2012-10-16T03:21:17.810
> 
> 标签：c++, template-meta-programming, partial-specialization

我一直在阅读*C++ 模板元编程*并做其中包含的练习，但遇到了一个问题。这个小例子可以看出问题的核心：

```
 template <class A, class B>
    struct C;

    template <class A>
    struct C<A,A>
    {
      typedef some_type type;
    };

    template <class A, class B>
    struct C<A*,B>
    {
      typedef some_other_type type;
    };

    int main()
    {
      C<int*,int*> c;
    } 
```

这无法编译，因为 c 的类型不明确。编译器无法判断它应该实例化哪个特化，但是，我知道在这种情况下，我希望调用第一个特化。到目前为止我提出的解决方案是像这样重写它

```
 template <class A, class B>
    struct C;

    template <class A, class B>
    struct C<A*,B>
    {
      typedef typename boost::mpl::if_c<boost::is_same<A*,B>::value,
                                        some_type, some_other_type>::type type;
    }; 
```

这个解决方案的问题是我实际上对每个指针、常量、引用和数组类型都有部分特化，所以我不得不单独将此检查添加到每个特化中。

那么，我的问题是，是否有某种方法可以拥有以前的紧凑型特化并以某种方式对其进行调整，以便编译器实例化特化

```
 template <class A>
     struct C<A,A>
     {
       typedef some_type type;
     }; 
```

如果有歧义，而不是其他任何专业？

对于那些感兴趣的人，我正在研究的问题是第 2 章问题 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:40:40.583

您可以在基本模板中添加另一个参数并使用它来启用/禁用您的专业化。例如，您可能有：

```
template< class A, class B, class Enable = void >
struct C;
template< class A >
struct C<A, A, void> {...};
template< class A, class B >
struct C<A*, B, typename boost::disable_if<boost::is_same<A*, B> >::type> {...}; 
```

现在，如果您想处理 const 指针或其他任何东西，您可以根据类型特征（，，...）扩展您的`is_const`条件`is_pointer`！

# spring - 字符串转换的 Spring 通用转换器问题

> ID：12907073
> 
> 赞同：0
> 
> 时间：2012-10-16T03:21:55.100
> 
> 标签：spring, spring-mvc, spring-security

我在将选择框数据发布到弹簧控制器时遇到问题。

```
<form:select path="ContactInfoVO[0].cityId" multiple="single" id="city" class="validate[required] small">       
    <form:option value="-1" label="-- Select City--"></form:option>                     
    <c:forEach var="city" items="${ManagerVO.ContactInfoVO[0].cityList}" varStatus="item">
    <form:option value="${city.cityId}" label="${city.cityName}"/>
</c:forEach> 
</form:select> 
```

Spring 的通用转换服务是在实际值之前添加“，”。查看日志我看到以下内容 -

```
 23:00:45,511 DEBUG BeanWrapperImpl:579 - Using cached nested BeanWrapper for property 'restaurantContactInfoVO[0]'
23:00:45,512 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String[] to java.lang.String
23:00:45,516 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [[Ljava.lang.String;]
23:00:45,517 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.String]
23:00:45,519 DEBUG GenericConversionService:429 - and indexed by targetType [java.io.Serializable]
23:00:45,520 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Comparable]
23:00:45,521 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.CharSequence]
23:00:45,523 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Object]
23:00:45,524 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [[Ljava.lang.Object;]
23:00:45,527 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.String]
23:00:45,528 DEBUG GenericConversionService:473 - Found matchable converters org.springframework.core.convert.support.ArrayToStringConverter@ba3bff5
23:00:45,530 DEBUG GenericConversionService:560 - Matching org.springframework.core.convert.support.ArrayToStringConverter@ba3bff5
23:00:45,531 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String to java.lang.String
23:00:45,532 DEBUG GenericConversionService:246 - Matched cached converter org.springframework.core.convert.support.ObjectToStringConverter@6f69b66e
23:00:45,534 DEBUG GenericConversionService:147 - Yes, I can convert
23:00:45,535 DEBUG GenericConversionService:564 - Matched converter org.springframework.core.convert.support.ArrayToStringConverter@ba3bff5
23:00:45,536 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String[], targetType = java.lang.String]
23:00:45,537 DEBUG GenericConversionService:147 - Yes, I can convert
23:00:45,539 DEBUG GenericConversionService:159 - Converting value array<String>['', '145009'] of java.lang.String[] to java.lang.String
23:00:45,542 DEBUG GenericConversionService:246 - Matched cached converter org.springframework.core.convert.support.ArrayToStringConverter@ba3bff5
23:00:45,544 DEBUG GenericConversionService:159 - Converting value '' of java.lang.String to java.lang.String
23:00:45,545 DEBUG GenericConversionService:246 - Matched cached converter org.springframework.core.convert.support.ObjectToStringConverter@6f69b66e
23:00:45,546 DEBUG GenericConversionService:186 - Converted to ''
23:00:45,548 DEBUG GenericConversionService:159 - Converting value '145009' of java.lang.String to java.lang.String
23:00:45,551 DEBUG GenericConversionService:246 - Matched cached converter org.springframework.core.convert.support.ObjectToStringConverter@6f69b66e
23:00:45,552 DEBUG GenericConversionService:186 - Converted to '145009'
23:00:45,554 DEBUG GenericConversionService:186 - Converted to ',145009' 
```

我还有一个选择框，两者的代码都是相同的（几乎）。我仍然不知道为什么 spring 将其视为 String [] 而不是 String。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:12:08.200

表单上有另一个具有相同 id 的参数导致此问题。现在修好了。

# ruby - "self.to_a" 有效，但 "self.to_a.join('').gsub(/\W/,"")" 无效

> ID：12907074
> 
> 赞同：2
> 
> 时间：2012-10-16T03:22:30.360
> 
> 标签：ruby

我的代码已经通过了所有的测试条件（例如，数组、字符串、哈希..），除了这个：

```
ValidPalindromeTest.new(81,96).palindrome? 
```

它应该返回 true 但没有。代码是：

```
class String
  def palindrome?     
    self.gsub(/\W/,"").downcase == self.gsub(/\W/,"").downcase.reverse
  end
end

module Enumerable
  def palindrome?
    if self.is_a?(Hash)
      false
    else
      self.to_a.join('').gsub(/\W/,"").downcase == self.to_a.join('').gsub(/\W/,"").downcase.reverse
    end
  end
end 
```

但是当我改为

```
module Enumerable
  def palindrome?
    if self.is_a?(Hash)
      false
    else
      self.to_a == self.to_a.reverse
    end
end 
```

有用。

问题是什么是类型`ValidPalindromeTest.new(81,96)`？它应该是一个`ValidPalindromeTest`类型的实例，对吧？第二种方法怎么能通过`auto_grader`而第一种方法不能呢？因为在我看来，只要`self.to_a`有效，其余的 ( `.join('').gsub(/\W/,"").downcase`) 也应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:04:10.837

我不太明白您要做什么，但是如果您的目标是设置一个知道数组是否为“回文”的方法，我认为第一种方法将评估为真，如果您传递了一个类似的数组`%w( ani ta la va la ti na )`并且second 将使用类似的数组评估 true `[0,2,3,2,0]`，这意味着这些方法评估不同的事物，并且如果您使用相同的对象测试它们，则不会返回 true。第一种方法评估更复杂，并且做不同的事情。但是，如果您尝试在 Enumerable 中混合该方法，为什么要使用`self.to_a`?

# c# - 从另一个用户控件中的控件更新用户控件中的更新面板

> ID：12907075
> 
> 赞同：0
> 
> 时间：2012-10-16T03:22:31.540
> 
> 标签：c#, asp.net, updatepanel, webusercontrol

首先，为这个问题的长度道歉！

我有一个页面，上面有几个 Web 用户控件，其中两个有些相互依赖。在理想的世界中，它们可以是一个控件，但由于各种原因，它们必须是两个控件。

我需要根据另一个控件中下拉列表的操作来更新其中一个控件中的更新面板，如下所述。

为此，我们将调用控件**JobControl**和**CallControl**。JobControl 包含一个下拉列表，它是来自 AJAXControlToolkit 的级联下拉列表的一部分。当此下拉列表具有选定的索引更改时，我想更新 CallControl 中的控制面板。

CallControl 公开它的更新面板，如下所示：

```
 public UpdatePanel UpdatePanel
    {
        get { return updCall; }
    } 
```

JobControl 有一个公共成员`AssociatedCallControl`

```
private ServiceCallControl associatedCallControl;

public ServiceCallControl AssociatedCallControl
{
    get { return associatedCallControl; }
    set { associatedCallControl = value; }
} 
```

然后在包含控件的页面的 OnLoad 事件中将两者关联在一起。

这个 SO 问题：[更新面板错误：在 UpdatePanel 中找不到 ID 为“xxx”的控件](https://stackoverflow.com/questions/2542469/update-panel-error-control-with-the-id-xxx-could-not-be-found-in-the-updatepa)导致我在 JobControl 的 onload 事件中尝试此操作：

```
if (associatedCallControl != null)
{
    AsyncPostBackTrigger trig = new AsyncPostBackTrigger();
    string s = ddCallGroup.ClientID;
    //ddCallGroup is the dropdown I want to trigger the update of the CallControl
    trig.ControlID = ddCallGroup.ClientID; //Also Tried ddCallGroup.ID
    trig.EventName = "CallGroupChanged";
    associatedCallControl.UpdatePanel.Triggers.Add(trig);
} 
```

随着以下也添加到 JobControl

```
public void CallGroupChanged(object sender, EventArgs e)
{
     //Stuff to update the CallControl panel including calling update();
     associatedCallControl.RefreshMehods(int.Parse(ddCallGroup.SelectedValue));        
} 
```

在这一切之后悬停我仍然得到 `A control with ID 'TabContainer1_tabJob_ctrlJob_ddCallGroup' could not be found for the trigger in UpdatePanel 'updCall'.`

我在尝试不可能的事情吗？我是不是走错了路，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:10:57.530

如果可以的话，试试这个， - 在 CallControl 中创建和调用 EventHandler 委托；- 将其指向当前页面中的方法；- 在这个方法中，简单地调用

JobCtrl.UpdatePanel.Update();

希望这有帮助！

编辑：代码示例

呼叫控制.ascx.cs：

```
public partial class JobControl
{
    public void CallGroupChanged(object sender, EventArgs e)
    {
        // do your work

        if (this.MyEventDelegate != null) // check if the event is not null
            this.MyEventDelegate(this, null); // invoke it
    }

    public event EventHandler MyEventDelegate;
} 
```

页面.aspx：

```
<controls:CallControl runat="server" ID="CallControl1" OnMyEventDelegate="RefreshMethod" /> 
```

页面.aspx.cs：

```
public partial class Page_aspx : System.Web.UI.Page
{
    protected void RefreshMethod(object sender, EventArgs e)
    {
        this.CallControl1.UpdatePanel.Update();
    }
} 
```

希望这很清楚..！

# html - 如何将 WP_Query 用于特定分类的自定义帖子类型？

> ID：12907076
> 
> 赞同：0
> 
> 时间：2012-10-16T03:22:35.407
> 
> 标签：html, wordpress, slider, custom-post-type

我有一个幻灯片自定义帖子类型，我需要能够为此自定义帖子类型的选定标签创建查询，以便我可以创建一组这些自定义滑块帖子类型以显示在滑块中。到目前为止，我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:59:30.243

你可以试试这个

```
$query = new WP_Query(array(
    "post_type" => "yourposttype",
    "tag" => "yourtagName"
));
while ($query->have_posts()) : $query->the_post();
    //code goes here
endwhile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:58:34.487

试试这个查询

```
<?php 
    $args = array(
    'post_type'=> 'music',
    'musician'    => 'Adele, Avril Lavigne',
    'order'    => 'ASC'
);
query_posts( $args );
while (have_posts()) : the_post(); ?> 
```

将“music”更改为您的 post_type 名称，将“musician”更改为您的分类名称，将“adele”更改为您的类别名称

# javascript - 为什么 jQuery 在 HTML 中插入 value 属性，而 document.getElementById(...).value 没有？有解决方法吗？

> ID：12907077
> 
> 赞同：2
> 
> 时间：2012-10-16T03:22:37.110
> 
> 标签：javascript, jquery, html, document

如果我在 JavaScript 中使用这一行，

```
$("#formfieldid").attr("value", "foobar"); 
```

它将 value 属性插入到 HTML 中，以便在查看源代码时显示。

如果我在 JavaScript 中使用这一行，

```
document.getElementById("formfieldid").value = "foobar"; 
```

该字段的值将是 foobar，但它不会显示在视图源下。

我想要做的是让属性不在视图源下显示并使用 jQuery。jQuery中是否存在等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:25:54.273

> 我想要做的是让属性不在视图源下显示并使用 jQuery。jQuery中是否存在等价物？

改为使用`val()`。`val()`操纵`value`属性（如`prop()`方法），而通过和`attr()`操纵属性。`getAttribute()``setAttribute()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:26:17.003

用于[`.prop()`](http://api.jquery.com/prop/)设置元素的属性而不是属性

```
$("#formfieldid").prop("value", "foobar"); 
```

如果`.prop()`(v1.6+) 不可用[`.val()`](http://api.jquery.com/val/)，请将其用作 value 属性的快捷方式。

```
 $("#formfieldid").val("foobar"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T03:25:56.837

你没有指定你正在使用什么元素，但​​我认为这就是你正在寻找的。

[jQuery 值 ()](http://api.jquery.com/val/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T03:28:07.167

尝试这个：

```
$("#formfieldid").val("foobar"); 
```

# php - 轻量级 OpenID PHP 库

> ID：12907078
> 
> 赞同：1
> 
> 时间：2012-10-16T03:22:38.793
> 
> 标签：php, openid, security

因此，在对 Janrain 的 PHP OpenID 库感到非常沮丧之后，我决定切换到 LightOpenID 库，因为它更简单，并且[根据这个答案](https://stackoverflow.com/a/10292703/558546)，只要正确实施 OpenID 提供程序，就不会影响安全性（希望情况如此，因为他们无论如何都持有所有用户的信息：P）。

我剩下的一个问题是 LightOpenID 使用`GET`协议返回 OpenID 身份验证请求。我知道，为了方便起见，我总是可以在提取相关信息后重新引导用户使用`header`，但我想知道在传输身份验证信息时需要担心哪些问题，`GET`而不是通过`POST`. 例如，他们提供的用户个人信息（如地址、电子邮件等，无论使用 sreg 请求什么）似乎都比经过加密和传递更容易被中间人拦截和提取`POST`。

这是我如何描绘正在传输的数据：

1.  最终用户输入 OpenID，发送到我的服务器（可以使用任何协议）
2.  我的服务器要求 OpenID 提供者进行身份验证，用于`header`重定向到 OpenID 提供者的页面，并让最终用户在必要时允许我的站点。（可以使用任何协议）
3.  OpenID 提供者使用`GET`. 这包括上面提到的对用户个人信息的关注，这意味着任何中间人只需捕获传递的 URL 即可提取个人信息。据我所知，身份验证信息对他们毫无用处，因为我只能使用它一次来验证登录并生成不同的唯一 ID 以用于跟踪用户的会话。为了增加安全性，我在初次注册时只能询问一次 sreg 信息。
4.  我的服务器处理信息，最终将最终用户重定向到首先需要身份验证的页面（同样可以使用任何协议，另外我可以选择发送什么信息）

我完全错了吗？如果没有，我该如何缓解这些问题？

ps 我对术语不太熟悉，如果我犯了任何错误以及如何修复它们，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:52:11.090

成功使用 OpenID 有两个方面适用于这个特定问题：

1.  身份验证 - 请求是否来自预期的来源并且没有被篡改？

2.  安全性 - 除了用户和您的服务器之外，还有其他人看到传输中的请求吗？

OpenID 断言由服务器使用共享或私钥签名；在后一种情况下，您的服务器必须再次往返服务器以验证请求。

就安全性而言，使用 GET 或 POST 无关紧要，但使用 SSL 确实如此。两种方法都以类似的方式传输数据，因此任何数据包嗅探器在检索敏感数据时都不会遇到问题。但是，当应用 SSL 时，两种方法都受到同等保护。

# python - 开始自动化测试

> ID：12907080
> 
> 赞同：15
> 
> 时间：2012-10-16T03:22:49.650
> 
> 标签：python, testing, flask

我很惭愧地承认这一点，但我从未对我的代码进行过任何自动化测试。通常我会编写一个函数或方法，然后进行一些手动测试并继续。我意识到这是非常糟糕的做法，所以我正在尝试改变我的方式。问题是，我对如何真正开始有点迷茫。我正在使用连接到数据库的 Flask 编写一个小型 Python Web 应用程序，我想借此机会强迫自己进行更好的开发实践。

我猜我需要用一些测试数据填充我的数据库（可能只是编写脚本来生成它），然后继续为我的程序中的每个函数编写测试。

例如：我有一个从系统中提取所有用户评论的功能。我是否必须为特定用户编写测试，然后检查以确保返回的评论 ID 列表与我从手动数据库查询创建的数组匹配？这是单元测试吗？

只是很难理解这一切。甚至将我指向一些对新手友好的文档将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T04:02:23.813

所以，首先，我想提一下自动化测试的目的。目的不是发现错误，而是捕捉回归。有时它确实有捕捉错误的好处，但总的来说，编写和维护自动化测试套件是一项相当多的工作。如果您只是为了寻找错误，那么手动测试要便宜得多。进行自动化测试的优势在于，您可以在进行重大更改时运行您的套件，并且更有信心您没有破坏世界。这种回归测试是为什么值得编写自动化测试的关键。

我将描述测试方法，然后是一般测试策略。我也只是解释一切，如果你已经知道我说的一半，请不要生气。

话虽这么说，有三个广泛的测试级别：

## 单元测试

单元测试是最小规模的测试。它测试单个函数和/或类。有许多库可用于单元测试，适用于各种不同的语言。python 的一个例子是 PyUnit。

您通常通过编写大量的小范围测试来完成单元测试。例如，如果您编写了自己的容器类（不太可能在 python 中，但它是一个简单的示例），您将有用于添加项目、删除项目、查找项目等的单元测试。

## 组件测试

组件测试将您的程序作为单独的组件进行测试。这通常是通过创建其他组件的模拟来完成的。它通常也通过使用单元测试库来完成，只是使用更大的测试。每个类可能有 10 或数百个单元测试（很大程度上取决于类的大小），但系统的每个组件都会有少量组件测试。

例如，您提到了一个数据库。您可以通过编写一个返回预设数据的模拟数据库并使用模拟测试与数据库接口的部分来进行组件测试。这比单元测试更难，因为可测试性开始成为设计中的一个问题。如果数据库被硬编码到您的程序中，您将如何模拟数据库。做起来还是比较容易的，只是需要一些深谋远虑和计划。

## 系统测试

系统测试是最难编写测试的，因为你必须有集成点来驱动你的系统。在个人项目中，您可能会跳过系统测试，特别是如果您已经完成了单元和组件测试的彻底工作。

系统测试涉及遍历整个系统的场景。难度大大增加，尤其是对于 UI 应用程序，因为您必须有一种方法来模拟用户输入。对于基于文本的系统，如编译器，您只需要生成文本，但对于 UI，您必须驱动输入或在输入回调中设置测试挂钩。没有一种适合所有解决方案的解决方案，就像单元测试一样。

## 测试建议

现实世界的测试与我进入该行业之前所认为的测试完全不同。当我在学校的时候，我把很多时间浪费在做一些我认为在“测试”时很有成效的事情上。话虽如此，这是我的建议：

1.  对事物进行分桶，并将您的工作分散到各个桶中。查看各个方面，例如压力、性能、边界情况、常规输入、本地化、UI 以及您可以提出的任何其他方面。然后决定什么值得追求，什么不值得。本地化可能不会成为爱好项目的优先事项。
2.  不要为了测试东西而测试东西。在决定编写测试之前，请确定它是否值得编写。例如，如果您发现如果您输入一个 500,000 个字符串作为输入，您的网站会崩溃，您会解决这个问题吗？我知道我不会，除非这是一个微不足道的修复。所以那个测试用例不值得写。
3.  请务必将被测程序视为一段代码。很多人订阅了黑盒视图，你不应该假设任何关于实现细节的东西，但我认为那是徒劳的。编写对实现有意义的测试，对任何未来的实现也有意义。这又回到了自动化测试的目的，不是为了发现错误，而是为了在以后捕捉回归。
4.  想想边境案件。如果您正在编写像我之前提到的容器类，您应该考虑空容器、最大尺寸的容器（或者如果有最大尺寸）、具有一个元素的容器等。应该对正常情况进行一些测试案件和一些边境案件。不过在这里要务实，请记住第 2 点。

进一步阅读：

*   [PyUnit 教程](http://pyunit.sourceforge.net/pyunit.html "PyUnit 教程")
*   [可能是现存最好的测试书](https://rads.stackoverflow.com/amzn/click/com/0201796198)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:05:58.100

通过简单的谷歌搜索“烧瓶测试”，返回的第一项：http: [//flask.pocoo.org/docs/testing/](http://flask.pocoo.org/docs/testing/)

对于单元测试，我认为您可以使用一些基于文件系统的数据库，例如 SQLite3。

至于如何验证您的功能（如何在测试用例中编写断言），这实际上取决于您的功能在做什么。对于您的特定情况，我认为您至少需要两个测试用例：一个用于存储列表评论的用户，另一个用于未知用户，预计不会返回任何评论。

你可以从一些关于如何编写单元测试的在线指南开始，像[这样](http://blakesmith.me/2009/09/14/getting-started-with-python-unit-testing.html)

# javascript - .js 和无尽的微调器

> ID：12907081
> 
> 赞同：1
> 
> 时间：2012-10-16T03:22:55.720
> 
> 标签：javascript, loading

网站的所有页面上都出现了一个无尽的微调器：www.civicmusicmilwaukee.org。在 Chrome 中解除 javascript 后，无尽的微调器消失了，所以我假设这就是问题所在。该网站在过去 4 个月里看起来还不错，然后突然间无休止的旋转器......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:28:02.503

控制台显示：

> ReferenceError：找不到变量：thickboxL10n

我打赌这个错误会阻止fancybox消失。我会说要解决的简单错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:28:28.443

检查您的开发者工具，您将看到错误“未捕获的 ReferenceError：thickboxL10n 未定义”。正如@le_garry 所说，FancyBox 被冲洗了。

编辑：

我挖得更深一点。看起来fancybox 的样式表是从不同的域加载的。如果您查看代码，您会看到 FancyBox 的 CSS 正在从这里加载：`http://cdn1.editmysite.com/editor/libraries/fancybox/fancybox.css?1349896606` 很可能是因为这个域被称为“EditMySite”，实际上有人编辑了他们的站点以使 fancybox 加载东西现在默认可见。

从 2012 年 10 月 6 日起查看[本网站的 Google 缓存。](http://webcache.googleusercontent.com/search?q=cache:6xHQ_hpECe0J%3awww.civicmusicmilwaukee.org/%20&cd=1&hl=en&ct=clnk&gl=us)

您会发现当前站点和旧站点之间存在一些差异。具体来说，样式表包括：

当前的：

```
<link rel='stylesheet' type='text/css' href='http://cdn1.editmysite.com/editor/libraries/fancybox/fancybox.css?1349896606'></script>
<link rel='stylesheet' href='http://cdn1.editmysite.com/editor/images/common/common-v2.css?buildTime=1349896606' type='text/css' />
<link rel='stylesheet' type='text/css' href='/files/main_style.css?1350355889' title='wsite-theme-css' /> 
```

谷歌缓存：

```
<link rel='stylesheet' href='http://cdn1.editmysite.com/editor/images/common/common-v2.css?buildTime=1345058381' type='text/css' />
<link rel='stylesheet' type='text/css' href='/files/main_style.css?1345140958' title='wsite-theme-css' /> 
```

整个`fancybox.css`样式表在几周前甚至都不存在。所有迹象都表明它是罪魁祸首。查看第 82 行，`fancybox.css` 这是该`#fancybox-loading`元素的样式。如果可以，修改该元素以在其中包含 a `display:none;`，则默认情况下该加载内容将消失。您需要确保这实际上不会影响您网站上的花式框。

正如我和@dda 都说过的，fancybox 的实现也有一些进展，但这应该会让你有一个好的开始。

# ios - iOS 代码：在其他机器上失败，但不是我的 [NSFileManager copyItemAtPath:toPath:error:]: source path is nil'

> ID：12907082
> 
> 赞同：1
> 
> 时间：2012-10-16T03:23:02.290
> 
> 标签：ios, file-io, nsfilemanager

我正在与一个团队一起开发，使用所有图像完全相同的 mac。使用我编写代码的机器，我可以以编程方式创建然后写入 pList 文件。但是当我使用我的家用机器（相同的图像）或当我的队友在他们的机器上测试代码时，我们会因**[NSFileManager copyItemAtPath:toPath:error:]: source path is nil'**错误而崩溃。在调试中，文件路径是有效的。但是，该捆绑包位于：

```
 NSString *bundle = [[NSBundle mainBundle]pathForResource:@"Family" ofType:@"plist"];
    [pListfileMgr copyItemAtPath:bundle toPath: pListpath error:&error]; 
```

是零。我们正在使用 git 对我们的代码进行版本控制。我们一直将 .DS_Store 和 /userdata/ 文件排除在存储库之外，除非我错过了什么。到底是怎么回事？这是代码，几乎从[这里](http://www.leesilver.net/1/post/2011/8/storing-data-locally-on-plists-in-ios.html)逐字复制：

```
NSError *error;
NSArray *pListpaths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,  YES);

NSString *pListdocumentsDirectory = [pListpaths objectAtIndex:0];

NSString *pListpath = [pListdocumentsDirectory stringByAppendingPathComponent:@"Family.plist"];
NSFileManager *pListfileMgr = [NSFileManager defaultManager];

//Create a plist if it doesn't alread exist
if (![pListfileMgr fileExistsAtPath: pListpath])
{
    NSString *bundle = [[NSBundle mainBundle]pathForResource:@"Family" ofType:@"plist"];
    [pListfileMgr copyItemAtPath:bundle toPath: pListpath error:&error];
}

NSMutableDictionary *thePList = [[NSMutableDictionary alloc] initWithContentsOfFile: pListpath];

[thePList setObject:[NSString stringWithFormat:@"%@", numberOfPeopleInFamilyOfOrigin] forKey:@"famSize"];
[thePList writeToFile: pListpath atomically: YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:55:04.330

我相信您误解了上面列出的代码的意图。

以下块正在检查是否存在位于 path 的文件`pListpath`。如果文件不存在`pListpath`，它会将文件从*您*的捆绑包中复制到`pListpath`.

```
//Create a plist if it doesn't alread exist
if (![pListfileMgr fileExistsAtPath: pListpath])
{
    NSString *bundle = [[NSBundle mainBundle]pathForResource:@"Family" ofType:@"plist"];
    [pListfileMgr copyItemAtPath:bundle toPath: pListpath error:&error];
} 
```

也就是说，您必须在您的包中发布一个名为的文件，其目的是如果路径中不存在 plist，则`Family.plist`该文件将充当*默认*`pListpath`plist 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:15:37.950

您的应用程序包中是否`Family.plist`存在？

Xcode 习惯于不将更改（添加）的资源更新到包中。通常的补救措施是从模拟器/设备上删除应用程序并安装新的。

如果您的队友在他们的模拟器上安装了较旧的版本，换句话说，是全新的构建，但第一次安装的时间`Family.plist`早于添加到项目中的时间，那么可能就是这样。

`Family.plist`您的队友可以通过（在 Finder 中）导航到来验证 的存在`~/Library/Application Support/iPhone Simulator`，然后执行 a `Show Package Contents`of `yourAppName.app`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:02:41.337

在这种情况下，我会尝试几件事：

打印出`pListpath`然后检查它是否存在于本地文件系统上或者目录路径是否被错误构造的值。

如果路径构造中不存在问题，我将显式创建`Family.plist`并确保将其包含在`Build Phases > Copy Bundle Resources`.

此外，在共享环境中工作时，经常会堆积和清除我项目的派生数据通常有助于解决一些问题。您可以通过以下方式做到这一点： 1) 打开管理器。2) 导航到项目选项卡。3) 在左侧找到并选择您的项目。4) 删除派生数据。

# python - 锯齿 tkinter 主循环帧持续时间？

> ID：12907086
> 
> 赞同：12
> 
> 时间：2012-10-16T03:23:42.570
> 
> 标签：python, tkinter, python-imaging-library

尝试使用 tkinter 为一系列 PIL 图像设置动画。我的帧持续时间（毫秒）图如下所示： ![锯齿帧持续时间](../Images/80b2a51da149c477853607c533bc7dff.png)

任何人都知道是什么导致了这种尖尖的锯齿图案？

这是一个重现的脚本：

```
from PIL import Image, ImageTk
import Tkinter

import time
import sys

def generate_frames(n):
    """
    keep n under 101 * 101
    """
    out = []
    last_pil = None
    for i in range(n):
        if last_pil:
            pil_image = last_pil.copy()
        else:
            pil_image = Image.new('L', (101, 101), 255)   
        x = i / 101
        y = i % 101
        pil_image.load()[x, y] = 0
        out.append(ImageTk.PhotoImage(pil_image))
        last_pil = pil_image

    return out

def draw():
    FRAME_COUNT =5000

    master = Tkinter.Tk()

    w = Tkinter.Canvas(master, width=302, height=302)
    w.create_rectangle(49, 49, 252, 252)
    w.pack()

    frames = generate_frames(FRAME_COUNT)

    def draw_frame(f, canvas_image):
        print repr(time.time())
        frame = frames[f]
        if canvas_image is None:
            canvas_image = w.create_image((151, 151), image=frame, anchor='center')
        else:
            w.itemconfigure(canvas_image, image=frame)

        w.current_frame = frame  # save a reference
        next_frame = f + 1
        if next_frame < FRAME_COUNT:
            master.after(1, draw_frame, next_frame, canvas_image)
        else:
            sys.exit(0)

    master.after(10, draw_frame, 0, None)
    master.mainloop()

draw() 
```

要查看绘图，请通过管道输出

```
import sys

last = None
for line in sys.stdin:
    value = float(line.strip()) * 1000
    if last is None:
        pass
    else:
        print (value - last)
    last = value 
```

然后通过

```
from matplotlib import pyplot
import sys

X = []
Y = []

for index, line in enumerate(sys.stdin):
    line = line.strip()
    X.append(index)
    Y.append(float(line))

pyplot.plot(X, Y, '-')
pyplot.show() 
```

使其成为多线程并没有帮助：

![在此处输入图像描述](../Images/b1adfe10afa9251f92063090d48a7a35.png)

```
class AnimationThread(threading.Thread):

    FRAME_COUNT = 5000

    def __init__(self, canvas):
        threading.Thread.__init__(self)
        self.canvas = canvas
        self.frames = generate_frames(self.FRAME_COUNT)

    def run(self):
        w = self.canvas
        frames = self.frames
        canvas_image = None
        for i in range(self.FRAME_COUNT):
            print repr(time.time())
            frame = frames[i]
            if canvas_image is None:
                canvas_image = w.create_image((151, 151), image=frame, anchor='center')
            else:
                w.itemconfigure(canvas_image, image=frame)
            w.current_frame = frame
            time.sleep(1 * .001)

def draw_threaded():
    FRAME_COUNT = 5000
    master = Tkinter.Tk()

    w = Tkinter.Canvas(master, width=302, height=302)
    w.create_rectangle(49, 49, 252, 252)
    w.pack()

    animation_thread = AnimationThread(w)
    animation_thread.start()

    master.mainloop()

    animation_thread.join()

draw_threaded() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:17:02.943

当竞争的 60 和 50 Hz 样本混合时，这非常类似于这种干涉模式：

![竞争 60 Hz 和 50 Hz 样本的干扰模式](../Images/9f4d563c0197d9f6d97558537e04a5b1.png)

[（原始 Wolfram|Alpha 图）](http://m.wolframalpha.com/input/?i=sin%28120*pi*x%29sin%28100*pi*x%29)

这可能是由于两件事情的刷新率不同（但接近）造成的。当您尝试拍摄电视屏幕时会发生相同类型的事情，它看起来像一个黑条一直在图像中向下移动，或者当汽车广告中的车轮似乎围绕它们的轴向后旋转时。它本质上是[莫尔效应](http://en.wikipedia.org/wiki/Moir%C3%A9_pattern)的延伸。

我不知道它是否是由视频驱动程序和/或硬件引起的，但几乎可以肯定是由干扰循环模式引起的。看起来很像应该是 GC 周期干扰了您的`for`循环（因此，随着内存被释放并可以分配，锯齿状波的突然下降）

# asp.net-mvc - 分层 MVC 路由策略

> ID：12907099
> 
> 赞同：0
> 
> 时间：2012-10-16T03:25:28.843
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我确信这已经在其他地方得到了回答，但我似乎无法在任何地方找到明确的帖子。

大多数有关分层路由的帖子都讨论了何时需要在 Url 中使用无限数量的令牌。我的问题更多地涉及给定实体在没有与另一个实体的上下文关联的情况下存在没有意义的情况。

例如，我有一个 Contract 实体以及预期的 Contract 控制器。它具有索引、编辑、创建等标准操作。我的网址看起来像

```
/Contracts/                   ' list all contracts
/Contracts/Create/            ' display form to create new contract
/Contracts/Edit/87Y5r3/       ' display form to edit contract 87Y5r3 
```

现在假设 I Order 实体必须与给定的合同相关联。使用（几乎）默认路由，我将拥有的 Urls

```
/Orders/                          ' display all orders across all contracts
/Orders/Index/87Y5r3              ' display all orders for contract 87Y5r3
/Orders/Create/87Y5r3             ' display form to create new order for contract 87Y5r3
/Orders/Edit/87Y5r3/45            ' display form to edit order 45 under contract 87Y5r3 
```

我当然可以保留几乎默认的路由，同时对其进行调整以支持合同号和订单号等附加参数。

或者我可以更改我的路由以显示 Orders 位于层次结构中的 Contracts 之下。在我看来，我有几条路要走：

1) 有一个控制器来处理合同和订单以及用于将操作映射到方法的大量自定义路由。这给了我沿线的网址

```
/Contracts/                        ' maps to Index action in the Contract controller
/Contracts/Create/                 ' maps to Create action in the Contract controller
/Contracts/Orders/                 ' maps to IndexOrders action in the Contract controller
/Contracts/Orders/Index/87Y5r3     ' maps to IndexOrders action in the Contract controller
/Contracts/Orders/Edit/87Y5r3/45   ' maps to EditOrders action in the Contract controller 
```

虽然我无法想象只有一个控制器有什么好的论据，但我猜这个好东西也可以分成一个合同控制器和一个带有适当路由的订单控制器。

需要注意的要点是合同编号即将出现在 URL 的末尾。

2）另一种选择是单独的控制器，但具有以下网址。这对我来说似乎更自然（合乎逻辑）。

```
/Contracts/                              ' maps to Index action in the Contract controller
/Contracts/Create/                       ' maps to Create action in the Contract controller
/Contracts/?????/87Y5r3/Orders/Index/    ' maps to Index action in the Order controller
/Contracts/?????/87Y5r3/Orders/Edit/45   ' maps to Edit action in the Order controller
/Contracts/?????/All/Orders/             ' maps to Index action in the Order controller 
```

在这种情况下，合同编号位于 URL 中的合同标记之后，订单编号接近末尾。我发现了一些问题/疑虑

*   如何处理跨越所有合约的订单数据。如您所见，使用特殊的“All”令牌处理了该问题。

*   我对 URL 的合同部分使用什么操作。默认情况下，Mvc 中的路由是 /{controller}/{action}/{id}。

3）~~我看到的第三个选项（但不了解评估优缺点）是使用 RESTful API。我相信这将（可以？？）解决我的第二个担忧，即在处理订单时对合同使用什么操作。基本思想是该操作被替换为 HTTP 动词，如 DELETE 或 PUT，只需要应用于 URL 末尾的实体。~~

在这种情况下，我最终会得到类似的东西

GET /Contracts/ ' 映射到 Contract 控制器中的 Index 操作 POST /Contracts/Create/ ' 映射到 Contract 控制器中的 Create 操作 GET /Contracts/87Y5r3/Orders/ ' 映射到 Order 控制器中的 Index 操作 PUT /Contracts/87Y5r3 /Orders/45 ' 映射到 Order 控制器中的 Edit 动作 GET /Contracts/All/Orders/ ' 映射到 Order 控制器中的 Index 动作

~~虽然 RESTful 可能是要走的路，但我对它的了解肯定不够，我最初的反应是它增加了复杂性和限制（有多少动词？？？），这可能会限制它的用处。~~

根据我的快速阅读，采用 RESTful 方法（包括下面@Robotsushi 建议的 ASP.NET Web API）并不能真正回答我的问题。如果我的页面通过 AJAX 和 JSON 请求数据，则似乎需要考虑 RESTful。从这个意义上说（仅请求数据），它提供了一种处理 Urls 的方法。但是，我的问题更多地集中在标准 MVC 模型上，其中操作将模型传递给视图。归根结底，我仍然需要向我的用户展示网页......

我总结清楚了吗？我还缺少任何其他策略吗？这必须是一个相当普遍的情况，所以我很惊讶我没有找到大量的文章。

我稍微简化了示例，但在我的情况下，我实际上需要将其提升到第三层——合同/订单/项目。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T03:32:10.060

这纯粹是我的**意见**。

我建议您使用网络服务。如果不能，您仍然可以使用 HTTP POST。发送复杂的数据结构会更容易，而不会用大量非结构化的键/值对使 URL 混乱。

如果您使用此策略，您将能够发送 XML 或 JSON 作为您的数据结构，并获得您可能需要的复杂实体表示。

如果您不熟悉基于 HTTP 的 Web 服务，请查看[ASP.NET Web API](http://wcf.codeplex.com/wikipage?title=WCF%20HTTP)。

祝你好运

**编辑** 您可以 HTTP POST 数据到您的 MVC 控制器。如果您这样做，那么您可以使用复杂的序列化格式（例如 XML 或 JSON）来发送您的数据。这将允许您的实体需要的分层嵌套。

我应该更清楚地了解 Web 服务。您正在执行的操作类型似乎在 Web 服务中可能会更好。但是，无论您是否选择使用 Web 服务，您的 mvc 控制器都可以使用 HTTP POST 操作正确表示数据。

我希望这有帮助。

# jakarta-ee - EJB 的复杂性

> ID：12907100
> 
> 赞同：0
> 
> 时间：2012-10-16T03:25:37.360
> 
> 标签：jakarta-ee, ejb

我有一个动态 Web 项目，它使用相当复杂的消息（通过 Web 服务传递）根据消息类型处理消息数据。该应用程序可以处理十五到二十种不同的消息类型。作为消息处理的一部分，大约有四十种不同的实体类型被持久化。

作为替代方案，我想到在架构上每种消息类型都可以由一个单独的 EJB 处理，一个 EJB 接收消息。我假设 EJB 背后的概念之一是它们针对“单一”功能。它是否正确？或者，EJB 的功能有多“复杂”？我的整个应用程序可以放在一个通用 EJB 中吗？

我想，这些问题实际上只是哲学设计问题，但任何评论/建议都可以帮助我加深对应用程序架构的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:14:20.910

你的问题有点不准确。有些事情是 EJB 不应该做*的*，例如自己创建新线程（它必须使用 Java EE 框架来做到这一点），但本质上 EJB 可以做任何你让它们做的事情，而且它们不一定针对单一功能。复杂性也没有固有的限制。

通常，EJB 旨在为应用程序域中的特定区域执行业务逻辑。您可以使用多种方法创建一个 EJB，每个方法处理一种消息类型，或者为每种消息类型创建一个单独的 EJB，或者为一组消息类型创建单独的 EJB……选项是无穷无尽的。

# algorithm - 最长递增子序列如何成为 DAG 中最长路径的特例？

> ID：12907106
> 
> 赞同：3
> 
> 时间：2012-10-16T03:26:28.970
> 
> 标签：algorithm, graph, directed-acyclic-graphs

我在“Hitchhiker's guide to algorithm”中读到了这个声明。但是，我无法将其可视化，因为在 LIS 问题中我们所拥有的只是一个数字序列。如何将其调制为图形问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T03:46:59.637

想象一下二维网格的问题。你在左下角，你需要到达右上角。你能想象这个方案中的无环 DAG 吗？

现在想象一些正方形是被禁止的。禁止方格可能会导致“锁定”（您可能会发现自己被困），现在选择**要遵循**的路径实际上很重要。在图方面，您可以将禁止正方形视为*删除顶点*，您的目标是*从根到一个特定的节点（汇）*。

现在让我们回到LIS。在求解 LIS 时，您真正需要做的是决定**您将选择哪些数字**，以及您不会选择哪些数字。限制是，*每当您选择一个数字时，您不能选择任何**小于**该*数字的数字（您按顺序选择数字）。

现在我们可以混合这两种东西。想象一下，您将根据您的数字序列构建一个图形：

*   每个数字都是一个节点。
*   编号节点 A 与编号节点 B 有一条边当且仅当
    *   B 在序列中位于 A 之后
    *   B 的值大于 A
*   有一个特殊的节点**端**
*   每个节点都有一条边到**结束**

该图上的每条路径都是有效的*递增子序列*。查找 LIS 的问题现在是查找**此图上最长路径**的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T15:43:08.917

如果我们有一个数字数组，例如 1、5、4、8。我们可以像下面这样构造一个 DAG。

*   将每个数字添加为顶点。
*   对于每个数字顶点，将权重为 1 的出边添加到其后面的所有较大数字中。
*   将具有权重为 0 的出边的节点 S 添加到所有数字顶点。
*   添加一个节点 E，该节点 E 具有来自所有数字顶点的权重为 0 的传入边。

因此，最长递增子序列问题变成了从 S 到 E 的最长路径问题。

![LIC 和 DAG](../Images/b3ee55784ab0193fbc08a5843df20fea.png)

# silverstripe - SilverStripe 3：在孩子的 onAfterWrite() 中获取父数据对象的 ID

> ID：12907109
> 
> 赞同：0
> 
> 时间：2012-10-16T03:27:01.057
> 
> 标签：silverstripe

在 SilverStripe 2.4 中，我能够通过子数据对象“B”的 onAfterWrite() 方法获取父数据对象“A”的 ID

```
$this->AClassID 
```

如何在“B”的 onAfterWrite() 方法中获取“A”的 ID？

注意：“A”有多个“B”，“B”有一个“A”（一对多关系）。

此处的示例代码供您考虑：

[http://www.sspaste.com/paste/show/507d5222878a7](http://www.sspaste.com/paste/show/507d5222878a7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:49:34.133

试试`$this->AClass->ID`。或者，如果您在ie`Parent`中设置了关系`has_one`

```
public static $has_one=array(
    'Parent'=>'AClass'
); 
```

你可以使用`$this->Parent->ID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:34:31.750

在继续之前使用 if 语句确保它不为 0。喜欢

```
if($this->ID){
 //put all your code here
} 
```

或者

```
if($this->RelationName()->ID){
 //put all your code here
} 
```

原因是它被多次调用，你只需要在它非零时执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T16:24:01.453

试试这个：

```
$this->Parent()->ID 
```

# java - 有没有一种更简洁的方法可以用从 XPath 检索到的网页属性填充 JTable？

> ID：12907111
> 
> 赞同：0
> 
> 时间：2012-10-16T03:27:05.513
> 
> 标签：java, swing, xpath, jtable, tablemodel

我正在创建一个网页抓取工具。我试图从页面上的数据中填充一个 JTable，使用 XPath 检索。我希望将单行的数据放入数组中。

```
{"Name","Phone","Address","City","State","Postal Code","Link"} 
```

我将网页检索到要解析的字符串中。没有\n（对不起，我不知道这个词的正确说法。换行？）

![程序截图](../Images/a122d369f5865766e7d8c99f1fc9a3e9.png) 数组表示列中的数据。我想要这样做的方法是让它检索该行的单个数据行，然后将其插入到数组中，然后将其放入 JTable 中。然后将数组设置为null，重复该过程。

**我真的**不想处理的另一个选项是将所有单个单元格放入每列的数组列表中，然后执行一个 while 循环。这样做的问题是条目可能返回空，这意味着索引可能不会完全同步。

我是一个相当“新”的程序员，有大约 6 个月的经验，我自己做大部分事情。我仍在努力建立我的方法论，但是在这里我被困住了。

我想知道在这种情况下最好的解决方案是什么，可能有一个我没有想到的更好的解决方案。

这不是原始代码问题，而是流程问题。

很乱，是的。然而，使用 Google Docs 的 xPath 和 ImportXML 函数对我来说**很**容易抓取。

这是我要放入单元格的内容：

**姓名：**

```
=importxml("http://www.yellowpages.com/[location]/[type]","//a[@class='no-tracks url ']") 
```

**地址：**

```
=importxml("http://www.yellowpages.com/[location]/[type]","//span[@class='street-address']") 
```

**电话：**

```
=importxml("http://www.yellowpages.com/[location]/[type]","//span[@class='business-phone phone']") 
```

我没有做其他的，但我知道这是可能的。

出于隐私原因删除了 HTML 示例，抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:46:00.867

生成一个最能代表数据（数组）的对象。使用数组中的数据构造对象并将对象添加到表模型中...

```
public class Data {
    private String name;
    private String phone;
    private String address;
    private String city;
    private String state;
    private String postalCode;
    private String link;
    public Data(String[] data) { 
        name = data[0];
        phone = data[1];
        address = data[2];
        city = data[3];
        state = data[4];
        postalCode = data[5];
        link= data[6];
    }

    public String getName() {
        return name;
    }

    public String getPhone() {
        return phone;
    }

    public String getAddress() {
        return address;
    }

    public String getCity() {
        return city;
    }

    public String getState() {
        return state;
    }

    public String getPostalCode() {
        return postalCode;
    }

    public String getLink() {
        return link;
    }
} 
```

创建一个能够利用此数据对象的表模型...

```
public class MyDataTableModel extends AbstractTableModel {

    private List<Data> dataList;

    public MyDataTableModel() {
        dataList = new ArrayList<Data>(25);
    }

    @Override
    public int getRowCount() {
        return dataList.size();
    }

    @Override
    public int getColumnCount() {
        return 7;
    }

    @Override
    public String getColumnName(int column) {
        String name = "??";
        switch (column) {
            case 0:
                name = "Name";
                break;
            case 1:
                name = "Phone";
                break;
            case 2:
                name = "Address";
                break;
            case 3:
                name = "City";
                break;
            case 4:
                name = "State";
                break;
            case 5:
                name = "Postal Code";
                break;
            case 6:
                name = "Link";
                break;
        }
        return super.getColumnName(column);
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        Object value = null;
        Data data = dataList.get(rowIndex);
        switch (columnIndex) {
            case 0:
                value = data.getName();
                break;
            // Other case statements per column...
        }
        return value;
    }

    public void add(Data data) {
        dataList.add(data);
        int index = dataList.size() - 1;
        fireTableRowsInserted(index, index);
    }
} 
```

一旦你有了一个新`Data`对象，使用这个模型`add`方法将它添加到模型中。

# c - C 编程语言有运行时吗？

> ID：12907115
> 
> 赞同：19
> 
> 时间：2012-10-16T03:27:38.810
> 
> 标签：c, gcc, compilation, runtime

Objective-C 有一个运行时，可以将其语法转换为可组织和编译的函数。C 有运行时库吗？另外，如果有人可以回答这个问题，GCC 在 C 编译期间采取了哪些步骤？例如 main.c >> main.s >> main.bin

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T03:54:41.900

Yes, the C language features a standard library; that is, a number of standard macros, routines and types one can use in his programs, apart from any in the core language itself.

In popular implementations, there is a separate library file containing the code for the C standard library. For example, in GNU/Linux environments, the GNU C library (`libc`) is almost always present. Microsoft provides the `msvcrt.dll` runtime library for the Windows system, and so on.

Also, the C standard library might not be available in freestanding implementations. Sometimes it is possible to compile a program without linking against the C standard library from your system. As an example, the Windows API is well known for behaving as a freestanding C programming environment (although one might need to link against other system libraries specific to Windows).

Regarding GCC, the following illustrates briefly the compilation pipeline:

1.  The input source is preprocessed with GNU `cpp`, resulting in a translation unit. *(Actually, as Basile pointed out, nowadays no `cpp` process is created; the entire preprocessing work is done within `cc1`. Nevertheless, the resulting behavior is most likely the same as with `cpp`.)*
2.  The translation unit is then interpreted and compiled to assembly source with GCC `cc1`;
3.  The assembly source is then assembled into object code with GNU `as`;
4.  Finally, object files and libraries are linked together to produce a binary image with GNU `ld`.

Naturally, each of these steps may be altered or not executed at all depending on the driver options; the above is just a rough explanation of the overall process.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T04:57:46.630

C 有一个标准库（`libc`在 Linux 上，它提供了标准函数，如诸如`<stdio.h>`和`fprintf`所有系统调用之类的函数），即使您在独立模式下使用（例如编译一个或某些内核）它链接一个提供语言内置功能的小型库（例如 32 位平台上的 64 位加法）。`<stdlib.h>``malloc``gcc``gcc -ffreestanding``libc``libgcc`

要了解`gcc`命令在做什么，请将`-v`标志传递给它。（不要忘记养成始终编译`-Wall`以获取警告和`-g`调试信息的习惯），例如

```
 % gcc -v -g -Wall hello.c -o hello
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Debian 4.7.2-4' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --with-arch-32=i586 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Debian 4.7.2-4) 
COLLECT_GCC_OPTIONS='-v' '-g' '-Wall' '-o' 'hello' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.7/cc1 -quiet -v -imultiarch x86_64-linux-gnu hello.c -quiet -dumpbase hello.c -mtune=generic -march=x86-64 -auxbase hello -g -Wall -version -o /tmp/ccsWt3UC.s
GNU C (Debian 4.7.2-4) version 4.7.2 (x86_64-linux-gnu)
    compiled by GNU C version 4.7.2, GMP version 5.0.5, MPFR version 3.1.0-p10, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "/usr/local/include/x86_64-linux-gnu"
ignoring nonexistent directory "/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../x86_64-linux-gnu/include"
#include "..." search starts here:
#include <...> search starts here:
 /usr/lib/gcc/x86_64-linux-gnu/4.7/include
 /usr/local/include
 /usr/lib/gcc/x86_64-linux-gnu/4.7/include-fixed
 /usr/include/x86_64-linux-gnu
 /usr/include
End of search list.
GNU C (Debian 4.7.2-4) version 4.7.2 (x86_64-linux-gnu)
    compiled by GNU C version 4.7.2, GMP version 5.0.5, MPFR version 3.1.0-p10, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: c5f63dedeacd449634699df94fe3d914
COLLECT_GCC_OPTIONS='-v' '-g' '-Wall' '-o' 'hello' '-mtune=generic' '-march=x86-64'
 as -v --64 -o /tmp/ccO5i3pU.o /tmp/ccsWt3UC.s
GNU assembler version 2.22 (x86_64-linux-gnu) using BFD version (GNU Binutils for Debian) 2.22
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-v' '-g' '-Wall' '-o' 'hello' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.7/collect2 --sysroot=/ --build-id --no-add-needed --eh-frame-hdr -m elf_x86_64 --hash-style=both -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o hello /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.7/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../.. /tmp/ccO5i3pU.o -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/x86_64-linux-gnu/4.7/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crtn.o 
```

请注意，[collect2](http://gcc.gnu.org/onlinedocs/gccint/Collect2.html)是为执行其他操作而包装的链接器，`libc.so`几乎每个 Linux 可执行文件都使用它（因为它包装了[syscalls](http://en.wikipedia.org/wiki/Syscall)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T03:31:18.207

C 有一个标准库（例如`strlen`,`malloc`等）

步骤是：编译使用标准库的代码，然后将代码链接到标准库。`libc`可以包含在静态库或动态库中，具体取决于；通常两者都可用。

# google-apps-script - 带有 Google 文档表单的 HtmlService doPost

> ID：12907122
> 
> 赞同：3
> 
> 时间：2012-10-16T03:28:27.973
> 
> 标签：google-apps-script

我创建了一个谷歌文档表单并制作了一个谷歌脚本小工具，将数据发布到表单的电子表格后端，然后返回一个自定义`html5`确认页面。

我在脚本代码中使用了`HTMLService`,`doPost(e)`和`doGet(e)`，还用我的小工具创建了 2 个 html 文件（表单和确认 html 文件）。

将数据写入正确电子表格的小工具；但是，它没有返回我使用小工具创建的正确确认 html 文件。它返回确认页面，该页面是谷歌文档表单的一部分。`doPost`我的代码部分的片段如下。有谁知道如何让它返回我创建的自定义确认 html 文件而不是 Google 文档？

```
function doPost(e) {
  var template = HtmlService.createTemplateFromFile('confirm.html');
  template.entry_0 = e.entry_0;
  template.entry_1 = e.entry_1;
  template.entry_2 = e.entry_2;
  template.entry_3 = e.entry_3;
  template.screenshot = e.parameter.screenshot;
 return template.evaluate();  
} 
```

我的 form.html 文件中的表单操作代码行如下。

```
<form action="<?= "https://docs.google.com/spreadsheet/formResponse?formkey=$mungedformkey" ?>" method="post"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:44:56.007

当您发布到一个 URL 时，该 URL 将决定接下来会发生什么——您的 doPost 永远不会被调用。作为替代方案，尝试发布到脚本（使用 doPost 或更好地使用 google.script.run post 语法）并使用 UrlFetchApp 将数据传递到表单；然后您将可以控制表单响应。

# java - 发现不兼容的类型：void，怎么了？

> ID：12907124
> 
> 赞同：1
> 
> 时间：2012-10-16T03:28:34.820
> 
> 标签：java, types, vector, void

我正在尝试编写一个类来找到最接近的两个向量并返回一个总和。

我试图如此努力地理解，但我找不到收到此消息的原因，这是我得到的唯一错误：

java:93: 发现不兼容的类型：需要 void：EDU.gatech.cc.is.util.Vec2 结果 = one.add(two); ^

第 93 行在代码的末尾，我放了一些箭头来表示！

```
enter code here

package EDU.gatech.cc.is.clay;

import java.util.*;
import EDU.gatech.cc.is.clay.*;
import java.lang.*;
import EDU.gatech.cc.is.abstractrobot.*;
import EDU.gatech.cc.is.util.Vec2;
import EDU.gatech.cc.is.util.Units;

public class MAX_go_in_between extends NodeVec2
{
  public static final boolean DEBUG = /*true;*/ Node.DEBUG;
  private SocSmall abstract_robot;

  public MAX_go_in_between(SocSmall ar)
  {
    abstract_robot = ar;

  }

  long last_spott = 0;
  Vec2 result = new Vec2();

  public Vec2 Value(long timestamp)
  {

    if (DEBUG) System.out.println("MAX_Avoid_walls: Value()");

    if ((timestamp > last_spott) || (timestamp == -1))
    {
      if (timestamp != -1) last_spott = timestamp;

      Vec2 one;
      Vec2 two;

      //array of Vec2 of all the opponents
      Vec2[] list_opp = abstract_robot.getOpponents(timestamp);
      //empty array of vec2 where will be put the opponents in front of the robot
      ArrayList<Vec2> list_opp_in_front;

      Vec2 temp;

      // find which opponents are in front and put them in the arraylist
      for(int i=0; i<list_opp.length; i++)
      {
        temp = list_opp[i];

        if(temp.x >= 0.0)
        {
          list_opp_in_front.add(temp);
        }
      }

      //get closest opponent and sets it to index 0
      for(int i=1; i<list_opp_in_front.size()-1; i++)
      {
        temp = list_opp_in_front.get(i);

          if(list_opp_in_front.get(0).r<temp.r)
        {
          list_opp_in_front.set(i, list_opp_in_front.get(0));
          list_opp_in_front.set(0, temp);

        }
      }

      //get second closest opponent and sets it to index 1
      for(int i=2; i<list_opp_in_front.size()-1; i++)
      {
        temp = list_opp_in_front.get(i);

          if(list_opp_in_front.get(1).r<temp.r)
        {
          list_opp_in_front.set(i, list_opp_in_front.get(1));
          list_opp_in_front.set(1, temp);
        }

          // sum both vectors
          one = list_opp_in_front.get(0);
          two = list_opp_in_front.get(1);

 =============>>>>
 =============>>>>   result = one.add(two);
          }

      }

      return(result);
    }

  }

Here is the Vec2.add(Vec2) method:

 public void add(Vec2 other)
  {
  x = x + other.x;
  y = y + other.y;
  r = Math.sqrt(x*x + y*y);
  if (r > 0)
   t = Math.atan2(y,x);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T03:42:47.677

```
result = one.add (two);
public void add (Vec2 other)
//     ^^^^ 
```

由此，成员函数`add`不会返回您可以放入的任何内容`result`。像这样的一行：

```
x = x + other.x; 
```

（其中`x`是“当前对象”的成员，并且`other`是您要添加到其中的对象），这是一个绝对确定性，`one.Add (two)`旨在*修改* `one`而不是仅在计算中*使用它。*

所以，而不是：

```
one = list_opp_in_front.get (0);
two = list_opp_in_front.get (1);
result = one.add (two); 
```

你可能需要类似的东西：

```
result = list_opp_in_front.get (0);
two = list_opp_in_front.get (1);
result.add (two); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:48:29.717

根据您的方法声明`public void add(Vec2 other)`，您正在添加`two`到`one`. 因此**`one`它本身就是你的结果，因此不需要返回。**

只需删除 return 语句并将`one`其视为结果对象。

# java - 泛型和静态

> ID：12907125
> 
> 赞同：0
> 
> 时间：2012-10-16T03:28:37.053
> 
> 标签：java, generics, static-methods

在我用来复习的这本书中，泛型方法和 static 关键字之间存在关系。似乎通用方法需要该关键字，但我不明白为什么需要它？

这本书是这样做的：

```
 static <T> void myFunction(T [] myArray) {
     //......
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T03:30:27.050

不要求泛型方法是静态的。有关详细信息（包括指向规范其他相关部分的链接），请参阅[Java 语言规范的第 8.4.4 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.4)同时，泛型方法也没有错`static`（反之亦然）。这一切都取决于设计要求。

# c++ - 使用级联成员函数有什么好处

> ID：12907126
> 
> 赞同：3
> 
> 时间：2012-10-16T03:28:57.587
> 
> 标签：c++, pointers

所以我只是通过返回 *this 指针来处理级联成员函数调用。我知道它是如何机械地工作的，但它看起来像是在实现使用点运算符获得对单行链函数调用的次要能力的函数上的大量时间投资。我确信除了简单地缩短成员函数调用之外，肯定还有其他一些好处，但是关于这个主题的信息确实不多。google 的前几页只提供了关于如何实现级联函数调用的说明，并没有说明为什么、如何或在哪里这种技术可能有用。任何人都有一些有用的链接可能会更深入地涵盖该主题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:08:24.517

当操作链接有意义时，好处是为类的用户提供更好看的代码。例如：

```
 rect.left( 10 ).top( 5 ).right( 50 ).bottom( 40 ); 
```

这可能比以下任何一种都更好读：

```
 // longer code
 rect.left( 10 );
 rect.top( 5 );
 rect.right( 50 );
 rect.bottom( 40 ); 
```

或者：

```
 // reader should remember order of parameters
 rect.move_to( 10, 5, 50, 40 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:28:50.740

*   令人眼花缭乱的代码
*   大量项目的方便分配（[Boost分配库](http://www.boost.org/doc/libs/1_51_0/libs/assign/doc/index.html)）

有时，我猜非常罕见，但我看到了这样的使用（通常在单元测试中）：

*   它为对象的构造增加了一些灵活性（您不必遵循参数的顺序或添加许多重载的构造函数）
*   表示逻辑很方便`OR`（例如用于设置标志）

# cocos2d-iphone - Cocos2d CCLayerColor 和 CCLayerGradient alpha 在 iOS6 下不起作用

> ID：12907128
> 
> 赞同：1
> 
> 时间：2012-10-16T03:29:13.333
> 
> 标签：cocos2d-iphone, ios6

我刚刚升级到 Xcode 4.5 / iOS6，我的 Cocos2d 游戏现在在 CCLayerColor 和 CCLayerGradient 上出现透明度问题。使用这些子类创建的图层看起来是全白且不透明的，而实际上它们应该是透明的白色。

```
ccColor4B topStartColor = ccc4(255, 255, 255, 150);
ccColor4B topEndColor = ccc4(255, 255, 255, 100);
CGPoint topVector = ccp(0, 1);
_topGradient = [CCLayerGradient layerWithColor:topStartColor 
                                      fadingTo:topEndColor 
                                   alongVector:topVector]; 
```

我正在使用 Cocos2d 2.0 Beta2。我确实必须重新设计我的 AppDelegate 来处理由 iOS6 引起的屏幕旋转问题，所以我可能无意中忘记了正确设置某些东西 - 尽管我已经非常仔细地梳理了它。我应该补充一点，带有 alpha 的精灵工作正常 - 它似乎只是 CCLayerColor 和 CCLayerGradient。我在一个股票 Cocos2d 2.0 项目中测试了 CCLayerColor，它似乎在那里正常工作，所以它在我的应用程序中 - 但我无法弄清楚我的项目有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:24:11.670

这实际上是 Cocos2d 2.0 Beta 2 中[的一个错误](http://code.google.com/p/cocos2d-iphone/issues/detail?id=1437)，并已在开发分支中修复。

# xml - 如何使用递归函数计算总和

> ID：12907129
> 
> 赞同：0
> 
> 时间：2012-10-16T03:29:13.867
> 
> 标签：xml, xslt

我使用递归函数来计算每个发票和每个客户的计算列的总数（价格 * 数量）。现在我需要计算每个客户的所有发票和所有客户的所有发票的总数。

xml 看起来像这样：

```
 <cinvoices>
        <client> (with information @ client) </client>
            <invoices>
                <products>
                    <product> (information @ product: name, type ect and..
                        <price>123</price>
                        <quantity>21</quantity>
                    </product>
                    <product> (information @ product: name, type ect and..
                        <price>123</price>
                       <quantity>11</quantity>
                   </product>
                </products>
           <invoices>
               <products>
                    <product> (information @ product: name, type ect and..
                    <price>32</price>
                    <quantity>3</quantity>
               </product>
               <product> (information @ product: name, type ect and..
                    <price>12</price>
                    <quantity>9</quantity>
               </product>
           </products>
       </invoices>
    </client>
    <client>

      <same as above>
    </client>
    </cinvoices> 
```

xslt 中使用的函数是：

```
<xsl:template name="sumProducts"> 
        <xsl:param name="pList"/> 
        <xsl:param name="pRunningTotal" select="0"/>         
        <xsl:choose> 
            <xsl:when test="$pList"> 
                <xsl:variable name="varMapPath" select="$pList[1]"/> 
                <xsl:call-template name="sumProducts"> 
                    <xsl:with-param name="pList" select="$pList[position() > 1]"/> 
                    <xsl:with-param name="pRunningTotal" 
                    select="$pRunningTotal + $varMapPath/price *    $varMapPath/quantity"/>                    
                </xsl:call-template> 
            </xsl:when> 
            <xsl:otherwise> 
                $<xsl:value-of select="format-number($pRunningTotal, '#,##0.00')"/> 

            </xsl:otherwise>  

        </xsl:choose> 
              </xsl:template> 
```

===================== 函数调用如下：

```
 <xsl:call-template name="sumProducts"> 
                             <xsl:with-param name="pList" select="*/*"/> 
                             </xsl:call-template> 
```

知道如何使用此功能计算每个客户的发票总额以及所有客户和所有发票的总额。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:30:02.193

让我先重新表述您的要求。

以下模板：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template name="sumProducts">
        <xsl:param name="pList"/>
        <xsl:param name="pRunningTotal" select="0"/>
        <xsl:choose>
            <xsl:when test="$pList">
                <xsl:variable name="varMapPath" select="$pList[1]"/>
                <xsl:call-template name="sumProducts">
                    <xsl:with-param name="pList" select="$pList[position() > 1]"/>
                    <xsl:with-param name="pRunningTotal" select="$pRunningTotal + $varMapPath/price *    $varMapPath/quantity"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise> 
                $<xsl:value-of select="format-number($pRunningTotal, '#,##0.00')"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <xsl:template match="/cinvoices/client/invoices">
        <xsl:call-template name="sumProducts">
            <xsl:with-param name="pList" select="*/*"/>
        </xsl:call-template>
    </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 文件：

```
<cinvoices>
    <client>
        <invoices>
            <products>
                <product>
                    <price>123</price>
                    <quantity>21</quantity>
                </product>
                <product>
                    <price>123</price>
                    <quantity>11</quantity>
                </product>
            </products>
        </invoices>
        <invoices>
            <products>
                <product>
                    <price>32</price>
                    <quantity>3</quantity>
                </product>
                <product>
                    <price>12</price>
                    <quantity>9</quantity>
                </product>
            </products>
        </invoices>
    </client>
    <client>
        <invoices>
            <products>
                <product>
                    <price>100</price>
                    <quantity>2</quantity>
                </product>
                <product>
                    <price>10</price>
                    <quantity>1</quantity>
                </product>
            </products>
        </invoices> 
    </client>
</cinvoices> 
```

应产生以下输出：

```
<?xml version="1.0" encoding="UTF-8"?> 
            $3,936.00 
            $204.00 
            $210.00 
```

所以这些是每张发票的价值。

您的解决方案使用 XSLT 命名模板。这个问题可以使用不同的技术来解决，但我会坚持你已有的想法。

现在，使用以下代码修改最后一个模板：

```
<xsl:template match="/cinvoices/client">
    <xsl:call-template name="sumProducts">
        <xsl:with-param name="pList" select="*/*/*"/>
    </xsl:call-template>
</xsl:template> 
```

你会得到：

```
<?xml version="1.0" encoding="UTF-8"?> 
                $4,140.00 
                $210.00 
```

这些是每个客户的所有发票的总数。

现在，使用以下代码修改最后一个模板：

```
<xsl:template match="/cinvoices">
    <xsl:call-template name="sumProducts">
        <xsl:with-param name="pList" select="*/*/*/*"/>
    </xsl:call-template>
</xsl:template> 
```

您将获得所有客户的总数：

```
<?xml version="1.0" encoding="UTF-8"?> 
                $4,350.00 
```

# api - Kickstarter 是否有公共 API？

> ID：12907133
> 
> 赞同：32
> 
> 时间：2012-10-16T03:29:49.127
> 
> 标签：api, kickstarter

我正在寻找一个kickstarter API（但没有找到一个）。

我确实在 github 上看到了一个抓取 API，但这并不是我真正想要的。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-29T12:05:03.730

不是真的（目前！），但他们确实有一种私人方式来使用他们的 ajax 搜索功能来获取项目。使用：

`http://www.kickstarter.com/projects/search.json?search=&term=TERM_HERE`

结果（`TERM_HERE = "asd"`）：

```
{
    "projects": [
        {
            "name": "A Seasonal Disguise releases &quot;Waterfowl Of Eastern Canada&quot;",
            "id": 68646,
            "card_html": "<div class=\"project-card-wrap\">\n<div class=\"project-card\">\n<div class=\"project-thumbnail\">\n<a href=\"https://www.kickstarter.com/projects/1560695581/a-seasonal-disguise-releases-waterfowl-of-eastern?ref=live\" target=\"\"><img alt=\"Photo-little\" class=\"projectphoto-little\" height=\"150\" src=\"https://s3.amazonaws.com/ksr/projects/68646/photo-little.jpg?1326348575\" width=\"200\" /></a>\n</div>\n<h2>\n<strong>\n<a href=\"https://www.kickstarter.com/projects/1560695581/a-seasonal-disguise-releases-waterfowl-of-eastern?ref=live\" target=\"\">A Seasonal Disguise releases &quot;Waterfowl Of Eastern Canada&quot;</a>\n</strong>\n<span>\nby\nZ.V. House\n</span>\n</h2>\n<p>After three long years ASD is releasing another full length album and going on tour. They are poor and need your help!</p>\n<ul class=\"project-meta\">\n<li>\n<a href=\"/discover/cities/boise-id?ref=card\" target=\"\"><span class=\"icon-location\"></span>\n<span class=\"location-name\">Boise, ID</span>\n</a></li>\n</ul>\n<div class=\"project-pledged-successful\">\n<strong>Successful!</strong>\n</div>\n<div class=\"project-pledged-wrap\" style=\"display: none;\">\n<div class=\"project-pledged\" style=\"width: 100%\"></div>\n</div>\n<ul class=\"project-stats\">\n<li class=\"first funded\">\n<strong>100%</strong>\nfunded\n</li>\n<li class=\"pledged\">\n<strong>$2,007</strong>\npledged\n</li>\n<li class=\"last successful\">\n<strong>Funded</strong>\n<div class=\"deadline\">\nMar 09, 2012\n</div>\n</li>\n<li class=\"last ksr_page_timer\" data-end_time=\"2012-03-09T09:04:47Z\" style=\"display: none;\">\n<strong>\n<div class=\"num\">&nbsp;</div>\n</strong>\n<div class=\"span text\" data-word=\"left\">&nbsp;</div>\n</li>\n</ul>\n\n</div>\n</div>\n"
        }
    ],
    "categories": [],
    "locations": [],
    "header": "Projects matching \"asd\""
} 
```

假设您确切地知道您想要详细信息的项目，您可以获得基本信息，但仍然需要一些 HTML 解析。

抱歉缺少答案，但这可能对某人有用。

* * *

**小更新**

[benrugg](https://github.com/benrugg)在 github 上的[此评论](https://github.com/markolson/kickscraper/issues/16#issuecomment-31409151)中列出了其他一些端点。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-16T23:05:58.617

Kickstarter 确实有一个 API，但它目前是私有的且未记录。我的猜测是，他们创建它是为了自己的内部使用，因此他们可以将他们的网站和 iPhone 应用程序以统一的方式绑定到数据中。

尽管该 API 尚未公开宣布，但它已经稳定运行了好几个月。使用有效的 Kickstarter 用户帐户，您可以查询他们的 API 以获取项目、类别、评论、奖励等。

您提到的抓取库是 Mark Olson 创建的一个 Ruby gem，我也参与了其中。尽管这显然与 Kickstarter 的公共/记录 API 不同，但它很好地证明了 Kickstarter 当前的私有 API 是可用的。为了文档，这是该库的链接：[https ://github.com/markolson/kickscraper](https://github.com/markolson/kickscraper)

此外，这里是一个 wiki 页面，显示了我们在查询项目时 API 返回的文档：[https ://github.com/markolson/kickscraper/wiki/Project](https://github.com/markolson/kickscraper/wiki/Project)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-11T14:32:21.210

显然他们有一个内部 API 也可以从外部使用。当然没有记录，也不是官方的，所以我想这可能随时停止工作，但我认为你可能会觉得这很有趣：

[http://syntaxi.net/2013/03/24/let-s-explore-kickstarter-s-api/](http://syntaxi.net/2013/03/24/let-s-explore-kickstarter-s-api/)

# internet-explorer - IE 如何处理这个 URL “action.do?v=credit/CC/Query¶=123456”

> ID：12907134
> 
> 赞同：1
> 
> 时间：2012-10-16T03:29:49.357
> 
> 标签：internet-explorer, parameters, hyperlink

我请求这个网址

`BillOutQryForCCPre.do?_viewReferer=creditcard/CC/adv/BillOutQry&para=101600000846`在 IE 中，

而且我无法获取参数值。

当我将鼠标光标移动到超链接时，我看到 URL 更改为`BillOutQryForCCPre.do?_viewReferer=creditcard/CC/BillOutQry¶=101600000846`.

字符`&para`更改为`¶`，我不知道为什么。

Chrome 没有这个问题，Firefox 也没有。

当我将参数名称更改`para`为 时`ssss`，我发现超链接正常。

这个词`para`是IE中的关键字吗？

我知道我可以切换参数顺序来解决这个问题，但我真的很想知道为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:45:15.480

*&para;* is the html entity for the paragraph mark you are seeing there. Apparently, Internet Explorer is trying to be clever and thinks you have left the semi-colon off the end, and so it is converting it anyway.

As mneonneo said in the comment above, you need to HTML-encode the & characters in the url, so that the link you are actually outputting is

```
BillOutQryForCCPre.do?_viewReferer=creditcard/CC/adv/BillOutQry&amp;para=101600000846 
```

# android - SAX RSS 提要解析器

> ID：12907138
> 
> 赞同：3
> 
> 时间：2012-10-16T03:30:12.387
> 
> 标签：android

我正在尝试使用 SAX 解析器解析 RSS 提要

这是我的代码：

```
public class MainActivity extends Activity {
    ArrayList<ArrayList<String>> data = new ArrayList<ArrayList<String>>();
    ListView list;
    ArrayList<String> sinlgeItem = null;
    ProgressDialog pd;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        list=(ListView)findViewById(R.id.list);
        boolean b=parseData();
        Log.v("result", "value"+b);
        for(int i=0;i<data.size();i++){
            Log.e("ITEM",data.get(i).get(0)+"__"+data.get(i).get(1));
        }
    }
    /**
     * method parse the data
     */
    private boolean parseData() {
        try {
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            URL url = new URL("https://itunes.apple.com/WebObjects/MZStore.woa/wpa/MRSS/newreleases/sf=143441/limit=25/rss.xml");
            xr.setContentHandler(new MyHandler());
            xr.parse(new InputSource(url.openStream()));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

    public class MyHandler extends DefaultHandler{
        Boolean ITEM=false;
        @Override
        public void characters(char[] ch, int start, int length) throws SAXException {
            super.characters(ch, start, length);
        }
        @Override
        public void endElement(String uri, String localName, String name) throws SAXException {
            super.endElement(uri, localName, name);
            if (ITEM){
                RootElement root=new RootElement("rss");
                Element chan=root.getChild("channel");
                Element itms=chan.getChild("item");
                Element title=itms.getChild("title");
                Element artist=itms.getChild("http://phobos.apple.com/rss/1.0/modules/itms/", "artist");
                title.setEndTextElementListener(new EndTextElementListener() {
                    public void end(String body) {
                        sinlgeItem.add(body);
                        Log.v("title",body);
                    }
                 });
                 artist.setEndTextElementListener(new EndTextElementListener() {
                     public void end(String body) {
                         sinlgeItem.add(body);
                         Log.v("artist", body);
                     }
                 });
                 ITEM=false;
                 data.add(sinlgeItem);
             }
         }

         @Override
    public void startDocument() throws SAXException {
        super.startDocument();

    }

    @Override
    public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException {
             super.startElement(uri, localName, name, attributes);
             if (localName.equals("item")){
                 sinlgeItem = new ArrayList<String>();
                 ITEM=true;
             }
         }
     }
} 
```

这是 xml 提要的链接 [https://itunes.apple.com/WebObjects/MZStore.woa/wpa/MRSS/newreleases/sf=143441/limit=25/rss.xml](https://itunes.apple.com/WebObjects/MZStore.woa/wpa/MRSS/newreleases/sf=143441/limit=25/rss.xml)

我正在尝试解析项目标签中的标题元素和项目标签中的元素`itms:artist`。
我不知道如何处理带有名称空间的标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:24:40.027

参考下面的例子

[RSSFeed 解析示例](http://code.google.com/p/android-rss/source/browse/#svn%2Ftrunk%2Fsrc%2Forg%2Fdevtcg%2Frssreader)

[简单的 RSSReader 示例](http://android-er.blogspot.in/2010/04/simple-rss-reader-using-androids.html)

[阅读 RSS 源的完整指南](http://ryanhayes.net/blog/reading-rss-feeds-in-android-and-java/)

[通过 RSSFeeds 显示新闻和视频](http://dilipdevelopment.blogspot.in/2012/01/display-news-and-videos-through-rss-and.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:59:09.917

我认为您不应该使用 SAXParser 来解析 RSS。使用 XML Pull Parser 会更容易。我会选择 SAXParser 来解析像 XMPP 协议这样的连续客户端-服务器通信，因为 SAX 最适合解析不完整和连续的 XML。

# mysql - 在 IF/THEN 上触发 MySQL 中的语法错误（错误 1064）

> ID：12907141
> 
> 赞同：2
> 
> 时间：2012-10-16T03:30:59.780
> 
> 标签：mysql, if-statement

执行此查询时出现错误：

```
CREATE TRIGGER insert_Topics
  BEFORE INSERT
  ON Topics
  FOR EACH ROW
  BEGIN
    IF (SELECT COUNT(*) FROM Subjects WHERE ID=new.SubjectID)=0
    THEN
      INSERT error_msg VALUES ('Foreign Key Constraint Violated!');
END IF;
END;
delimiter ; 
```

错误说：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的 '' 附近使用正确的语法

它指向 THEN 这个词

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:35:38.753

两个都

```
CREATE TRIGGER insert_Topics
BEFORE INSERT
ON Topics
FOR EACH ROW
BEGIN
  IF NOT EXISTS(SELECT 1 FROM Subjects WHERE ID=NEW.SubjectID LIMIT 1) THEN
    INSERT INTO error_msg VALUES ('Foreign Key Constraint Violated!');
  END IF;
END; 
```

和

```
CREATE TRIGGER insert_Topics
BEFORE INSERT
ON Topics
FOR EACH ROW
BEGIN
  IF (SELECT 1 FROM Subjects WHERE ID=NEW.SubjectID LIMIT 1) IS NULL THEN
    INSERT INTO error_msg VALUES ('Foreign Key Constraint Violated!');
  END IF;
END; 
```

为我工作，所以你的语法问题可能在别处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T13:59:38.150

我知道这是一个老问题，但我想我会分享我对错误的看法，以防将来有人看到这个问题（如果我犯了任何错误，请随时进行社区编辑！）。

原始问题中出现问题的原因似乎与使用 DELIMITER 以及它的作用有关，如下所述：[DELIMITER // 在触发器中做什么？](https://stackoverflow.com/questions/1346637/what-does-delimiter-do-in-a-trigger)

在给定的代码中：

```
 INSERT error_msg VALUES ('Foreign Key Constraint Violated!');
END IF;
END;
delimiter ; 
```

用“delimiter ;”重置分隔符 表示它之前已更改为另一个分隔符，例如：

```
DELIMITER //
--TRIGGER1
--TRIGGER2
--TRIGGERn
delimiter ; -- Aggravates me that this wasn't capitalised :P 
```

将分隔符设置为“//”（或其他）的原因是允许分隔多个语句，而我在想的是，原作者在该触发器之上还有其他触发器，并且更改了分隔符为“//”之类的内容，但忘记更改：

```
END IF;
END;
delimiter ; 
```

到：

```
END IF;
END//
delimiter ; 
```

因此，评论者无法复制的原因是因为他们设置了正确的分隔符（“;”），并且由于只有一个语句要分隔，所以没有像作者那样发现任何错误。请参阅以下测试代码和结果，包括初始化，作为一些证明：

```
DELIMITER ; -- Just in case
DROP TABLE IF EXISTS Topics, Subjects, error_msg;

CREATE TABLE Subjects ( id INT(5) PRIMARY KEY,
                        subjectname CHAR(20));
CREATE TABLE Topics ( topicname CHAR(20),
                      subjectID INT(5)
                    # FOREIGN KEY (subjectID) REFERENCES Subjects(id) - How this check should be done...
                    );
CREATE TABLE error_msg ( Message VARCHAR(50) );

INSERT INTO Subjects VALUES
    ('5', 'Arts'),
    ('55', 'Maths'),
    ('2342', 'Biology'),
    ('12345', 'Finance');

DELIMITER $$ -- Where the delimiter would be defined, originally 
    CREATE TRIGGER InsertOnTopics
        BEFORE INSERT ON Topics
        FOR EACH ROW
        BEGIN
            IF (SELECT COUNT(*) FROM Subjects WHERE id=NEW.subjectID)=0 THEN
                INSERT error_msg VALUES ('Foreign Key Constraint Violated!');
            END IF;
        END$$
DELIMITER ;

INSERT INTO Topics VALUES
    ('Welfare Benefits', '5'),
    ('Eigenvectors', '55'),
    ('Mitochondria', '2342'),
    ('Bank of Dad', '12345'),
    ('Something else', '555');

SELECT * FROM error_msg; 
```

以“end;”作为原始代码：

```
mysql> SOURCE /Users/benpalmer/test.sql
Query OK, 0 rows affected (0.00 sec)

Query OK, 0 rows affected (0.02 sec)

Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected (0.02 sec)

Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

Query OK, 0 rows affected (0.02 sec)

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Something else', '555')' at line 6
Empty set (0.00 sec)

mysql> 
```

使用“END$$”，在我的代码中：

```
mysql> SOURCE /Users/myUsername/test.sql
Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected (0.02 sec)

Query OK, 0 rows affected (0.02 sec)

Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

Query OK, 0 rows affected (0.02 sec)

Query OK, 5 rows affected (0.01 sec)
Records: 5  Duplicates: 0  Warnings: 0

+----------------------------------+
| Message                          |
+----------------------------------+
| Foreign Key Constraint Violated! |
+----------------------------------+
1 row in set (0.00 sec)

mysql> 
```

除此之外，我不明白为什么这个特定示例没有使用适当的外键约束来完成。作为我的第一个答案......希望这对任何人都有帮助！也被困在这上面一段时间。

# python - 从字典中提取内容

> ID：12907142
> 
> 赞同：0
> 
> 时间：2012-10-16T03:30:59.550
> 
> 标签：python, dictionary

我正在使用此功能在[159251-TreeOfFunFiles中的文件上构建 SHA1 签名](https://github.com/GiovanniMoretti/159251-directoryTreeOfFunFiles)

```
def createFileSignature (filename):
    """CreateFileHash (file): create a signature for the specified file
    Returns a tuple containing three values:
    (the pathname of the file, its last modification time, SHA1 hash)
    """
    f = None
    signature = None
    try:
        filesize = os.path.getsize(filename)
        modTime = int(os.path.getmtime(filename))

        f = open(filename, "rb") # open for reading in binary mode
        hash = hashlib.sha1()
        s = f.read(16384)
        while (s):
            hash.update(s)
            s = f.read(16384)
            hashValue = hash.hexdigest()
            signature = (filename, modTime, hashValue)
    except IOError:
        signature = None
    except OSError:
        signature = None
    finally:
        if f:
            f.close()
            return (signature) 
```

我使用`os.path`python中的模块遍历每个文件。

```
 signatures = {}
        for (dirpath, dirnames, filenames) in os.walk(directory):
            for f in filenames:
                file_path = dirpath + "\\" + f;
                if os.path.exists(file_path):
                    signatures[file_path] = sha.createFileSignature(file_path) #create a signature from the file 
```

这只是创建一个`{}`签名字典。

```
 for key in signatures:
            if signatures[key] is not None:
                print signatures[key] #(doesnt really check against anything yet) 
```

这个输出 `('c:\\treeoffunfiles\\README.md', 1349709960, 'f430dc83251684703072a55eee0b0b6a2417c5e4')`，现在我的问题是如何从这个字典中检索`2nd`or`3rd`元素？我试过`print signatures[key][1]`但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:34:43.280

它应该只是：

```
for key, value in signatures.iteritems():
    if value is not None:
        mod_time, hash = value[1:] 
```

# java - Quartz JobExecutionContext 在兵马俑作业库中运行时不持久

> ID：12907143
> 
> 赞同：1
> 
> 时间：2012-10-16T03:31:08.250
> 
> 标签：java, quartz-scheduler, terracotta

我想跨运行相同作业的触发器保留重试计数数据。

我尝试将它存储到 JobExectionContext.JobDetails.JobDataMap，这是一个 DirtyHashMap。它会被存储，但是当第二次相同的作业由不同的触发器运行时，如果该触发器更新相同键的值，它不会持续存在。因此，当您第三次访问它时，键值仍然与第一个相同。

注意：当我在 Job 类上使用 @PersistJobDataAfterExecution 正常运行而不是在兵马俑中运行时，它确实有效

这是一个伪代码：

Cron 触发器 1：在 CronTrigger.executionComplete() > 如果失败 > 增加 retryCount 并在 jobcontext JobDataMap 中设置它 > 使用新的 SimpleTrigger 重新安排相同的作业（在上下文 0 中重试计数，新值设置为 1）

简单触发器 1：在 SimpleTrigger.executionComplete() 上 > 如果失败 > 增加 retryCount 并在 jobcontext JobDataMap 中设置它 > 使用新的 SimpleTrigger 重新安排相同的作业（上下文 1 中的重试计数，新值集 2）

简单触发器 2：在 SimpleTrigger.executionComplete() > 如果失败 > 增加 retryCount 并在作业上下文 JobDataMap 中设置它 > 使用新的 SimpleTrigger 重新安排相同的作业

**（上下文中的重试次数仍为 1，新值设置为 2）**

这就是问题所在，重试计数在第一次设置后没有增加。同样，只有在 terracotta jobstore 中运行时才会发生这种情况。在单个实例中完美地坚持。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:01:41.203

我找到了可能对有类似问题的人有所帮助的解决方案。问题是我的兵马俑版本是 3.5.2，不支持石英 2 及更高版本。所以@PersistJobDataAfterExecution 不起作用。所以我实现了不推荐使用的 StatefulJob 接口，它就像一个魅力！

# php - PHP 表单停留在表单操作

> ID：12907146
> 
> 赞同：0
> 
> 时间：2012-10-16T03:31:34.017
> 
> 标签：php, forms, redirect

我有一个带有 foo.php 表单操作的 HTML 表单。但是，当我单击提交按钮时，我被重定向到“foo.php”，但我没有被重定向回表单所在的页面。谁能告诉我是否需要某种代码来实现这一点？

这是我的 PHP 文件，如果有帮助的话：

```
<?php

$title = $_POST['title'];
$content = $_POST['content'];
$postid = $_POST['postid'];

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:33:13.493

在处理表单数据后，您可以将标题重定向回表单文件。假设您的表单文件的名称为“ `form.php`”

```
header('location: form.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:01:26.020

两种方式：

```
<?php
header('Location: myform.php');
 ?> 
```

或使用 javascript：

```
<script>
window.location('myform.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:19:09.060

这很简单。首先尝试了解您的任务。完成任务后，无论保存/更新/处理数据，您都需要重定向到另一个页面。

完成工作后，只需在 php 脚本中设置标题即可。

```
<?php

 // your all code will goes here
 header("Location: myform.php");  

?> 
```

# c++ - 检查 CUDA 内核中的 device_vector 不起作用

> ID：12907148
> 
> 赞同：1
> 
> 时间：2012-10-16T03:32:07.570
> 
> 标签：c++, cuda, thrust

我在 Visual Studio 2010 Professional 环境中的 Windows 7 64 位上运行 CUDA 4.2

首先，我运行以下代码：

```
// include the header files
#include <iostream>
#include <stdio.h>
#include <time.h>

#include "cuda.h"
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>

using namespace std; 

//kernel function
__global__ 
void dosomething(int *d_bPtr, int count, int* d_bStopPtr)
{
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    if (tid==0)
       d_bStopPtr[tid]=0;
    else if(tid<count)
    {
       d_bPtr[tid]=tid;
// only if the arrary cell before it is 0, then change it to 0 too
        if (d_bStopPtr[tid-1]==0 )
           d_bStopPtr[tid]=0;

    }
}

int main()
{
    int count=100000;
// define the vectors
    thrust::host_vector <int> h_a(count);
    thrust::device_vector <int> d_b(count,0);
    int* d_bPtr=thrust::raw_pointer_cast(&d_b[0]);
    thrust::device_vector <int> d_bStop(count,1);
    int* d_bStopPtr=thrust::raw_pointer_cast(&d_bStop[0]);
// get the device property
    cudaDeviceProp prop;
    cudaGetDeviceProperties(&prop, 0);

    int threadsPerBlock = prop.maxThreadsDim[0];
    int blocksPerGrid = min(prop.maxGridSize[0], (count + threadsPerBlock - 1) / threadsPerBlock);
//copy device to host
    thrust::copy(d_b.begin(),d_b.end(),h_a.begin());
    cout<<h_a[100]<<"\t"<<h_a[200]<<"\t"<<h_a[300]<<"\t"<<endl;
//run the kernel
    while(d_bStop[count-1])
    {
    dosomething<<<blocksPerGrid, threadsPerBlock>>>(d_bPtr,count,d_bStopPtr);
    }
//copy device back to host again
    thrust::copy(d_b.begin(),d_b.end(),h_a.begin());
    cout<<h_a[100]<<"\t"<<h_a[200]<<"\t"<<h_a[300]<<"\t"<<endl;
//wait to see the console output
    int x;
    cin>>x;
    return 0;
} 
```

但是，每次我都需要检查while条件，但速度很慢。所以我正在考虑检查内核中这个设备向量的条件，并像这样更改代码：

```
// include the header files
#include <iostream>
#include <stdio.h>
#include <time.h>

#include "cuda.h"
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>

using namespace std; 

//kernel function
__global__ 
void dosomething(int *d_bPtr, int count, int* d_bStopPtr)
{
int tid = threadIdx.x + blockIdx.x * blockDim.x;
if (tid==0)
    d_bStopPtr[tid]=0;
else if(tid<count)
    {
// if the last cell of the arrary is still not 0 yet, repeat
        while(d_bStopPtr[count-1])
        {
            d_bPtr[tid]=tid;
// only if the arrary cell before it is 0, then change it to 0 too
            if (d_bStopPtr[tid-1]==0 )
                d_bStopPtr[tid]=0;
        }
    }
}

int main()
{
    int count=100000;
// define the vectors
    thrust::host_vector <int> h_a(count);
    thrust::device_vector <int> d_b(count,0);
    int* d_bPtr=thrust::raw_pointer_cast(&d_b[0]);
    thrust::device_vector <int> d_bStop(count,1);
    int* d_bStopPtr=thrust::raw_pointer_cast(&d_bStop[0]);
// get the device property
    cudaDeviceProp prop;
    cudaGetDeviceProperties(&prop, 0);

    int threadsPerBlock = prop.maxThreadsDim[0];
    int blocksPerGrid = min(prop.maxGridSize[0], (count + threadsPerBlock - 1) / threadsPerBlock);
//copy device to host
    thrust::copy(d_b.begin(),d_b.end(),h_a.begin());
    cout<<h_a[100]<<"\t"<<h_a[200]<<"\t"<<h_a[300]<<"\t"<<endl;
//run the kernel
    dosomething<<<blocksPerGrid, threadsPerBlock>>>(d_bPtr,count,d_bStopPtr);
//copy device back to host again
    thrust::copy(d_b.begin(),d_b.end(),h_a.begin());
    cout<<h_a[100]<<"\t"<<h_a[200]<<"\t"<<h_a[300]<<"\t"<<endl;
//wait to see the console output
    int x;
    cin>>x;
    return 0;
} 
```

但是，第二个版本总是会导致显卡和电脑死机。你能帮我加快第一个版本的速度吗？如何检查内核内部的条件然后跳出并停止内核？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:19:32.813

您基本上是在寻找全局线程同步行为。这是 GPU 编程中的禁忌。理想情况下，每个线程块都是独立的，可以根据自己的数据和处理完成工作。创建依赖于其他线程块的结果来完成其工作的线程块会产生死锁情况的可能性。假设我有一个带有 14 个 SM（线程块执行单元）的 GPU，并假设我创建了 100 个线程块。现在假设线程块 0-13 正在等待线程块 99 释放锁（例如，将零值写入特定位置）。现在假设前 14 个线程块开始在 14 个 SM 上执行，可能是循环，在锁定值上旋转。GPU 中没有任何机制可以保证线程块 99 会首先执行，甚至根本不会执行，

让我们不要讨论“强制驱逐线程块 0-13 的 GMEM 停顿会怎样”的问题，因为这些都不能保证线程块 99 将在任何时候获得优先执行。唯一能保证线程块 99 将执行的是其他线程块的耗尽（即完成）。但是如果其他线程块正在旋转，等待线程块 99 的结果，那可能永远不会发生。

良好的前向兼容、可扩展的 GPU 代码依赖于独立的并行工作。因此，建议您重新设计算法以使您尝试完成的工作独立，至少在线程块间级别。

如果您必须进行全局线程同步，内核启动是唯一真正保证的点，因此您的第一种方法是工作方法。

为了解决这个问题，研究如何在 GPU 上实现缩减算法可能会很有用。各种类型的归约对所有线程都有依赖性，但通过创建中间结果，我们可以将工作分解为独立的部分。然后可以使用多内核方法（或一些其他更高级的方法）聚合独立的部分，以加快相当于串行算法的速度。

您的内核实际上并没有做太多事情。它设置一个数组等于它的索引，即 a[i] = i; 并且它将另一个数组设置为全零（尽管顺序）b [i] = 0;。要显示您的第一个代码“加速”的示例，您可以执行以下操作：

```
 // include the header files
#include <iostream>
#include <stdio.h>
#include <time.h>

#include "cuda.h"
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>

using namespace std;

//kernel function
__global__
void dosomething(int *d_bPtr, int count, int* d_bStopPtr)
{
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    while(tid<count)
    {
      d_bPtr[tid]=tid;
      while(d_bStopPtr[tid]!=0)
// only if the arrary cell before it is 0, then change it to 0 too
        if (tid==0) d_bStopPtr[tid] =0;
        else if (d_bStopPtr[tid-1]==0 )
               d_bStopPtr[tid]=0;
      tid += blockDim.x;
    }
}

int main()
{
    int count=100000;
// define the vectors
    thrust::host_vector <int> h_a(count);
    thrust::device_vector <int> d_b(count,0);
    int* d_bPtr=thrust::raw_pointer_cast(&d_b[0]);
    thrust::device_vector <int> d_bStop(count,1);
    int* d_bStopPtr=thrust::raw_pointer_cast(&d_bStop[0]);
// get the device property
    cudaDeviceProp prop;
    cudaGetDeviceProperties(&prop, 0);

//    int threadsPerBlock = prop.maxThreadsDim[0];
    int threadsPerBlock = 32;
//    int blocksPerGrid = min(prop.maxGridSize[0], (count + threadsPerBlock - 1) / threadsPerBlock);
    int blocksPerGrid = 1;
//copy device to host
    thrust::copy(d_b.begin(),d_b.end(),h_a.begin());
    cout<<h_a[100]<<"\t"<<h_a[200]<<"\t"<<h_a[300]<<"\t"<<endl;
//run the kernel
//    while(d_bStop[count-1])
//    {
    dosomething<<<blocksPerGrid, threadsPerBlock>>>(d_bPtr,count,d_bStopPtr);
//    }
//copy device back to host again
    cudaDeviceSynchronize();
    thrust::copy(d_b.begin(),d_b.end(),h_a.begin());
    cout<<h_a[100]<<"\t"<<h_a[200]<<"\t"<<h_a[300]<<"\t"<<endl;
//wait to see the console output
    int x;
    cin>>x;
    return 0;
} 
```

在我的机器上，这将执行时间从 10 秒加快到几乎是瞬时的（远小于 1 秒）。请注意，这不是 CUDA 编程的一个很好的例子，因为我只启动一个 32 个线程的块。这还不足以有效地利用机器。但是你的内核所做的工作是如此微不足道，以至于我不确定一个好的例子会是什么。我可以创建一个内核，将一个数组设置为其索引 a[i]=i; 另一个数组为零 b[i]=0; 全部并行。那会更快，我们可以这样使用整台机器。

# java - 为什么我的 for 循环会出现此错误？

> ID：12907152
> 
> 赞同：0
> 
> 时间：2012-10-16T03:32:19.717
> 
> 标签：java

```
public boolean isNumber(String t) {
    for (int i = 0, i<= 9, i++) {
        if t.equals(i) {
                return true;
        }
    }
    return false;
} 
```

Copypastad 最初是错误的方法 - *_* - 我在一个编译这个错误的类中有这个：

data_structures/ExpressionEvaluator.java:40: for (int i = 0, i< 10, i++) {

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:34:37.313

使用分号代替逗号。

```
for(int i = 0; i < 10; i++) {
    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:35:50.923

您应该使用分号，并且`if`应该用括号括起来。

```
public boolean isNumber(String t) {
    for (int i = 0; i <= 9; i++) {
        if (t.equals(i)) {
                return true;
        }
    }
    return false;
} 
```

我建议阅读 [语言基础](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:14:54.843

您的方法仅验证您传递的字符串是否是数字，而不是数字（数字可以有多个数字）。您只能使用 char 并调用 , 来验证它`Character.isDigit`

```
char c = '1';
boolean isDigit = Character.isDigit(c); 
```

如果你真的想创建自己的方法，传递一个字符串参数，我建议你这样修改：

```
public boolean isDigit(String t) {
    return t.length() == 1 && Character.isDigit(t.charAt(0));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T03:36:28.313

分号分隔 for 循环的质量。此外，您的 if 块的条件必须用括号括起来。

```
public boolean isNumber(String t) {
    for (int i = 0; i <= 9; i++) {
        if (t.equals(i)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T03:48:40.620

```
public boolean isNumber(String t) {
    for (int i = 0; i<= 9; i++) {
        if( t.equals(i) ){
                return true;
        }
    }
    return false;
} 
```

1\. 利用 ”;” 替换“，”

2.

```
if(boolean) {
        //do stuff
     } 
```

# jquery - 使用 jquery 在模态框中提交表单

> ID：12907155
> 
> 赞同：0
> 
> 时间：2012-10-16T03:32:49.847
> 
> 标签：jquery, forms

使用 jQuery 提交表单

作品

```
 $('#testform').submit(); 
```

不工作

```
 $('#testform').submit(function () {
                 alert('test1');
                return true;
              }); 
```

这只是一个例子，但有时我想在提交表单之前做一些事情。例如使用提交表单`$.POST`

更新：

如果我同时保留两者，则`$.POST`没有任何价值，因为表单仍然以传统方式提交，没有 ajax...

```
 $("#testform").submit(function() {
                            $.post('/myajaxcontroller', function(data) {
                                $('#result').html(data);
                            });
                    });
                    $("#testform").submit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:37:05.707

第一个示例提交表单。第二个示例为您提交表单时设置一个事件处理程序。你需要两者；

如果您需要异步操作，您将被迫`return false`从提交处理程序中进行，因此表单不会被提交，您可以在 AJAX 回调中提交表单。

```
 // Send an AJAX request before submitting the form
 $('#testform').submit(function () {
     var form = this;
     $.post('/myajaxcontroller', function(data) {
         $('#result').html(data);
         // everything is good, submit the form on our own
         if (data.looksGood) {
             form.submit();
         }
     });

     return false;
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:40:19.343

```
$('#testform').submit(); 
```

此行立即**调用**提交（提交正在运行！）

```
$('#testform').submit(function () {

    // Do some stuff

    return true;
}); 
```

此行仅定义在提交表单之前**将调用**哪个回调函数。您应该注意文档，jQuery 函数在有和没有参数的情况下不会做同样的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:58:33.890

使用 prevent default 来阻止默认提交的发生

```
 $("#testform").submit(function(e) {
       e.preventDefault()  //< ---- Add this
       $.post('/myajaxcontroller', function(data) {
       $('#result').html(data);
        });
  });

  $("#testform").submit(); 
```

# svn - SVN 服务器之间的同步

> ID：12907156
> 
> 赞同：2
> 
> 时间：2012-10-16T03:32:58.430
> 
> 标签：svn, repository, visualsvn-server, svnsync

我们当前的 Linux 托管 SVN 服务器正在等待移除。因此，我通过**完全转储和导入/加载**到新安装的 VisualSVN 服务器来备份到本地 Windows PC。让我们说它达到了`revision 101`。

因此，又过了几天并在 Linux SVN 中提交，因为该单元尚未退役。将最新版本（例如`102~110`）与本地 VisualSVN 服务器同步的步骤是什么？

我在 SVN 管理方面还是有点新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:08:36.203

[免责声明：我只在少数样本上检查过此命令，它可能存在破坏数据的极端情况。当您无法测试目标 repo 的完整性时，您应该使用完整转储重新创建目标 repo。]

您可以使用`svnadmin dump --incremental -r102:110`创建仅包含修订 102 到 110 的转储。该`--incremental`开关导致生成转储，可以将其导入到先前修订已经存在的另一个 svn 服务器中。

您还可以使用[svnsync](http://svnbook.red-bean.com/en/1.4/svn.ref.svnsync.html)设置镜像。

# ms-access - 联合查询以组合字段

> ID：12907158
> 
> 赞同：0
> 
> 时间：2012-10-16T03:33:04.297
> 
> 标签：ms-access

我不知道 SQL，所以我希望有人可以为我提供复制和粘贴的 SQL，以便将所有不同的单价字段合并到一个名为“merged_unit_price”的字段中。请注意，许多单价值为空，因此我希望空值不要合并。非常感谢你，纳撒尼尔

```
SELECT  p.ID AS Part_ID, 
    p.UNIT_PRICE, 
    d.UNIT_PRICE_1, 
    d.UNIT_PRICE_2, 
    d.UNIT_PRICE_3
FROM    tbl_local_SYSADM_PART AS p 
LEFT JOIN SYSADM_DISCOUNT_PRICE AS d 
ON p.ID = d.PART_ID; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:52:29.667

首先在您的查询中确保`Null`从您的数据集中排除这些值。不记得 Access SQL 是使用 Null 还是 Nothing，所以尝试一种方法，看看它是否出错。

```
SELECT  p.ID AS Part_ID, p.UNIT_PRICE, d.UNIT_PRICE_1, d.UNIT_PRICE_2, d.UNIT_PRICE_3
FROM    tbl_local_SYSADM_PART AS p 
  LEFT JOIN SYSADM_DISCOUNT_PRICE AS d ON p.ID = d.PART_ID;
WHERE p.UNIT_PRICE <> Nothing OR p.UNIT_PRICE_1 <> NOTHING OR p.UNIT_PRICE_2 <> NOTHING OR p.UNIT_PRICE_3 <> Nothing 
```

同样，我建议您了解更多关于 SQL 语句的一般信息和访问权限，因为您将自己限制为 4`UNIT_PRICE`并且最终将不得不增加您的表字段签名。如果是我，我会把这个表分成 Join Table，这样你就可以有多个`Part_ID`'s 和多个`UNIT_PRICE`'s。目前，您受限于 1 个`Part_ID`，并且形象地说只有 1 个`UNIT_PRICE`（将 4 个价格字段计为 1 个记录）。

# mysql - Wordpress 的 AZ 类别索引

> ID：12907162
> 
> 赞同：1
> 
> 时间：2012-10-16T03:33:35.507
> 
> 标签：mysql, wordpress, plugins, indexing, categories

有没有人见过任何 wordpress 插件，它提供了按字母顺序排列的类别索引，可以将您带到属于特定字母的类别页面。基本上，有一个列表：ABCD ... XYZ，您可以单击它，当您单击 A 时，您会转到一个页面，在那里您会看到所有以字母 A 开头的类别？

我已经搜索了一个多小时，但找不到这个......我开始搞乱 MySQL 这样做，`SELECT term_id as id, name as post_title FROM wp_terms ORDER BY name`但这也包括类别中的标签，我只想抓住类别。

**更新：**

好的，所以看起来我可以通过以下方式从 wp_term_taxonomy 中获取类别：

```
SELECT term_taxonomy_id FROM wp_term_taxonomy WHERE taxonomy =  'category' 
```

然后，我可以获取该数组并在此处运行它：

```
SELECT term_id, name FROM wp_terms WHERE term_id IN (that-array) ORDER BY name 
```

那个怎么样？如何使用我上面的内容创建一个新表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:50:05.500

您可以使用瞬态 api 来缓存您的 sql 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:04:26.407

您可以使用此函数并将字母作为参数传递

```
 function get_category_by_letter($letter){
    $args=array(
    'orderby' => 'name',
    'order' => 'ASC',
    'hide_empty' => 0);

    $categories=get_categories($args);
    foreach($categories as $category) {

    $catname = $category->name;
    $first_letter = substr(strip_tags($catname), 0 , 1); // get the first letter of the category
    if(strcasecmp($first_letter,$letter) != 0) continue; //if not the same letter then loop next NOTE: this is case insensitive comparison
    else{
      $cats[] = $category->term_id; //store category IDs in array
      //$cats[] = $category->name; uncomment this if you want to get category name
      //or you can start your process here and remove the return value  
        }
    }
 return $cats;
} 
```

示例用法

```
 $cats = get_category_by_letter('A');
  var_dump($cats); 
```

# python - 如何传递命令行参数 IronPython

> ID：12907167
> 
> 赞同：2
> 
> 时间：2012-10-16T03:34:26.820
> 
> 标签：python, console, ironpython, argv, sharpdevelop

> **可能重复：**
> [如何在 IronPython 中传递命令行参数？](https://stackoverflow.com/questions/5949735/how-can-i-pass-command-line-arguments-in-ironpython)

我是 Ironpython 和 sharpdevelop 的新手，我正在尝试运行以下代码，

```
from sys import argv

script, first, second, third = argv

print "The script is called:", script
print "Your first variable is:", first
print "Your second variable is:", second
print "Your third variable is:", third 
```

如何将参数传递给命令行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:26:12.950

在[夏普开发](http://www.icsharpcode.net/opensource/sd/)你

*   *右键单击*python*项目*
*   在上下文菜单中选择*属性*
*   选择*调试*选项卡
*   *在命令行参数*字段中附加您的参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:43:43.023

[这篇文章](https://stackoverflow.com/questions/5949735/how-can-i-pass-command-line-arguments-in-ironpython)对你有帮助吗？

> 您需要设置 sys.argv 的值。
> 
> ```
> engine.Sys.argv = List.Make(args); 
> ```

# php - 通过 PHP 插入/更新 MySQL 表，行将更新但不插入。

> ID：12907168
> 
> 赞同：0
> 
> 时间：2012-10-16T03:34:28.363
> 
> 标签：php, mysql

我在 PHP 方面不是很有经验，不胜感激！我正在使用 HTTP Post 向我的服务器发送用户名、经度和纬度。我首先检查用户是否存在于`user_info`表中。如果是这样，那么我尝试`maps_user_location`使用该用户名更新表。我想要发生的是，如果查询失败，由于在表中找不到用户名`maps_user_location`，那么我希望添加它。我试图用下面的代码来做到这一点。

```
$localhost = mysql_connect($hostname_localhost,$username_localhost,$password_localhost)
or
trigger_error(mysql_error(),E_USER_ERROR);

mysql_select_db($database_localhost, $localhost);

$latitude = $_POST['latitude'];
$longitude = $_POST['longitude'];
$username = $_POST['username'];

if ($latitude != 0 && $longitude != 0) {
    $query_userCheck = "SELECT * FROM user_info WHERE login_username = '".$username."';";
    if ( mysql_query($query_userCheck) ) {
        $query_updateLocation =  "UPDATE  `maps_user_location` SET  `lat` =  '".$latitude."',`long` =  '".$longitude."' WHERE  
        `login_username` = '".$username."';";
        if ( !mysql_query($query_updateLocation) ){
            $query_newLocation = "INSERT INTO `maps_user_location` ( `id` ,`login_username` ,`lat` ,`long` ,`track`)
            VALUES ( NULL ,  '".$username."',  '".$latitude."',  '".$longitude."',  '0');";

            mysql_query($query_newLocation);
        }

    }
} 
```

当我执行代码时，它顺利通过。问题是如果用户名不存在，则永远不会插入行，如果用户名存在，则行会更新。此外，当我手动添加一行时，id 列似乎在每次请求后都会增加（序列将变为 1、2、3、4、10、11、12 等 [id 5-9 不存在] ）。我有一种感觉，它与“$query_updateLocation”中的“WHERE”有关。任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T03:38:17.060

您可以简单地在单个查询中执行此操作，使用**[`INSERT...ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)**

```
INSERT INTO  maps_user_location ( login_username , lat, long, track)
VALUES ('".$username."',  '".$latitude."', '".$longitude."',  '0')
        ON DUPLICATE KEY UPDATE
             lat    =  '".$latitude."' ,
            long  =  '".$longitude."' 
```

但在其他任何事情之前，请确保您`UNIQUE CONSTRAINT`在 column 上有一个`login_username`。如果您还没有添加，您可以使用此命令更改您的表

```
ALTER TABLE maps_user_location ADD UNIQUE (login_username); 
```

# php - PHP 可以接收不同的 Content-Types 吗？

> ID：12907169
> 
> 赞同：0
> 
> 时间：2012-10-16T03:34:31.900
> 
> 标签：php, jquery

> **可能重复：**
> [在 PHP 中处理 json 请求](https://stackoverflow.com/questions/3063787/handle-json-request-in-php)

以下：

```
$.ajax({
    type: 'POST',
    url: 'receive-json.php',
    contentType: 'application/json; charset=UTF-8',
    data: '{"phpJSON":' + JSON.stringify(myJSON) + '}',
    success: function(data){},
    dataType: 'json'
}); 
```

将此作为纯 JSON 发送到服务器：

```
{"phpJSON":[{"id":"1","user":"foo","colour":"red"},{"id":"2","user":"bar","colour":"green"},{"id":"3","user":"baz","colour":"blue"}]} 
```

但是 PHP 无法识别它。因此，我从 .ajax() 调用 ( ) 中的数据值周围删除了单引号，`data: {"phpJSON":' + JSON.stringify(myJSON) + '}`以便它成为一个对象（而不是字符串），而是将其发送到服务器：

```
phpJSON%5B0%5D%5Bid%5D=1&data%5B0%5D%5Buser%5D=foo&data%5B0%5D%5Bcolour%5D=red&data%5B1%5D%5Bid%5D=2&data%5B1%5D%5Buser%5D=bar&data%5B1%5D%5Bcolour%5D=green&data%5B2%5D%5Bid%5D=3&data%5B2%5D%5Buser%5D=baz&data%5B2%5D%5Bcolour%5D=blue 
```

这工作得很好，PHP 可以识别它，`$_POST['phpJSON']`但是正如[这里所说](https://stackoverflow.com/a/4073451/1030059)，这是冗长的（特别是如果发送大量数据时），甚至没有必要，因为 POST 应该支持其他内容类型，那么有没有办法解决这个问题？PHP 可以接收其他 Content-Types`application/x-www-form-urlencoded`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:38:35.063

可以使用 读取原始帖子数据`file_get_contents("php://input")`，然后通过`json_decode`. 不必将其包装在具有该`phpJSON`属性的对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:39:44.123

PHP 可以处理任何类型的传入数据。只是内置了 multipart/form-data 和 application/x-www-form-urlencoded 并自动为您处理成 $_POST 和 $_FILES 。

您可以通过 php://input 流手动“接收”您想要的任何内容。但是将其处理成可用的形式将取决于您。

# jquery - JQuery AddMethod验证添加字段访问特殊字符&并修改@特殊字符

> ID：12907172
> 
> 赞同：0
> 
> 时间：2012-10-16T03:34:46.207
> 
> 标签：jquery, jsp

我是**JQuery addmethod 验证**的新手。所以我想在创建页面访问和特殊字符中验证一个字段并修改访问`@`特殊字符。

我的代码喜欢只创建页面需要修改页面：

```
$("validator").addMethod("spchar",function (value,element)
{
    return this.oprional(element)||/^[0-9a-zA-Z_&.,]+$/i.test(value);
}, "not allow"

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:05:04.773

您想在此字段中要求特殊字符吗？如果是这样，这就是我为实现该方法所做的。

```
 jQuery.validator.addMethod(
        'ContainsAtLeastOneSpecialCharacter',
        function (value) {
            return /\W/.test(value);
        },
        'Your [fieldname] must contain at least one special character.'
    ); 
```

其中 fieldname 是一个变量。我将其用于密码字段。希望有帮助。

# facebook - 我如何在单个请求中“不喜欢”内置的喜欢？

> ID：12907174
> 
> 赞同：1
> 
> 时间：2012-10-16T03:35:08.217
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

当您想对打开的图形对象“取消赞”一个内置的赞操作时，您必须发送一个`DELETE`带有赞故事本身 id 的 HTTP。但这需要：

1.  在删除故事之前查询图表的 ID，或
2.  存储在您首先创建类似内容时返回的 ID。

这些都不是令人满意的解决方案。如果能够在一个请求中完成所有这些操作，那就太好了，最好只使用所喜欢对象的 URL。

因为这会修改图形，所以必须使用 Graph API，对吗？AFAIK，FQL 仍然是只读的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:35:08.217

一半的战斗是找出一种方法来使用 Graph API 来查找给定对象的 URL 的类似故事的 ID：

```
GET http://graph.facebook.com/me/og.likes?object=http://url.to/your/object&fields=id 
```

一旦你有了它，你可以在批处理查询中命名它，然后使用 JSONPath 从 DELETE 请求中引用它（详细信息[在](https://developers.facebook.com/docs/reference/api/batch/)“指定请求中的操作之间的依赖关系”下）：

```
POST http://graph.facebook.com/
batch=[
  {"method":"GET", "name":"like_id", "relative_url":"me/og.likes?object=http://url.to/your/object&fields=id"},
  {"method":"DELETE", "relative_url":"?id={result=like_id:$.data[0].id}"}
] 
```

# mongodb - MongoID：分组和计数

> ID：12907176
> 
> 赞同：2
> 
> 时间：2012-10-16T03:35:14.840
> 
> 标签：mongodb, mongoid, ruby-on-rails-3.2

假设我有一个模型`Post`，它只包含字段`desc`。

用户可以使用主题标签，就像`#rails`在任何帖子中一样......

如何列出和统计过去 10 天内使用的主题标签？

我对 mongodb 了解不多，但我发现我可以使用名为 map_reduce 的东西 .. 不知道为什么/如何。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:24:40.153

你是对的......这可以使用 mad/reduce 函数来解决......如果你不想多想，
试试[这个或这个 gem 哈哈](http://mongoid.org/en/mongoid/docs/querying.html#map_reduce)

[https://github.com/jcoene/mongoid-mapreduce](https://github.com/jcoene/mongoid-mapreduce)

# sql - 加入同一 DataResult 上的 Found 和 Not Fund 记录

> ID：12907178
> 
> 赞同：3
> 
> 时间：2012-10-16T03:35:35.893
> 
> 标签：sql, sqlite

我有一个带有 ID 的表，问题是我需要提供 N 个 ID（使用 WHERE id IN (1,5,101)）但我需要返回相同数量的记录（如果我发送 100 个 ID，我需要一个包含 100 行的 DataSet ..)，即使此表上不存在 Id。

我正在使用 SQLite，所以 RIGHT JOIN 不是一个选项。

这是我所拥有但无法使其工作的一些示例：S ..

```
SELECT * FROM (
 SELECT r.report_id, r.batch_name, tr.report_id id, tr.batch_name bn
 FROM reports tr
 LEFT OUTER JOIN (  SELECT report_id, batch_name FROM reports
                    WHERE batch_name IN ("L6964498","AAAAAA")) r on r.report_id = tr.report_id) as v 
 LEFT JOIN reports ON v.id = reports.report_id 
```

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:22:26.817

使用 .组成一个包含批次名称的虚拟表`SELECT .. UNION ALL SELECT ..`。然后把它加入你的`reports`桌子。

```
SELECT tr.batch_name, r.report_id
FROM (SELECT 'L6964498' batch_name UNION ALL
      SELECT 'AAAAAA') tr
LEFT JOIN reports r on r.report_id = tr.report_id 
```

如果你有 100 个项目，你将有 99 `UNION ALL`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:56:47.187

```
 SELECT r.report_id, r.batch_name, tr.report_id id, tr.batch_name bn
 FROM reports tr
 LEFT OUTER JOIN reports r on r.report_id = tr.report_id and                
 LEFT JOIN reports ON r.id = reports.report_id
where  r.batch_name IN ("L6964498","AAAAAA") 
```

# c# - 将鼠标悬停在 ASP.NET 按钮上时显示注释

> ID：12907181
> 
> 赞同：4
> 
> 时间：2012-10-16T03:35:56.663
> 
> 标签：c#, asp.net, css, button, hover

我的页面上有许多按钮，我希望在它旁边出现一些注释，解释当它们悬停在任何特定按钮上时按钮的用途。

我将如何实现这一目标？

（当您将鼠标悬停在此 stackoverflow 页面上的以下标签上时，我正在寻找类似的东西......）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T03:38:26.763

你应该这样做

```
<form runat="server">
<asp:Button id="button1" Text="Submit" runat="server"
ToolTip="This is an example-button"/>
</form> 
```

此处工具提示显示您的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:45:37.250

使用 jQuery 点击该项目的悬停：http: [//api.jquery.com/hover/](http://api.jquery.com/hover/)

附加一个函数来悬停显示和隐藏一个 div。有许多使用 jQuery 显示弹出窗口的示例。一个快速的谷歌搜索把我带到了[这里](http://jqueryui.com/dialog/)。您还必须将弹出窗口放置在正确的位置。您也可以使用 jQuery 获得正确的位置。[http://api.jquery.com/position/](http://api.jquery.com/position/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T04:00:32.567

如果您更喜欢使用 codeBehind，请尝试以下操作：

```
nameOfControlButton.ToolTip = "Here is my tooltip comment"; 
```

# uialertview - 如何避免通知中的 UIAlertView 重复显示

> ID：12907187
> 
> 赞同：0
> 
> 时间：2012-10-16T03:36:37.937
> 
> 标签：uialertview, nsnotificationcenter

我有一个选择器来显示`UIAlertView`询问用户是否要在 NotificationCenter 发布带有观察名称的通知后重试上传图像。

```
[[NSNotificationCenter defaultCenter] postNotificationName:kNOTIFICATION_PHOTOS_UPLOAD_RETRY object:nil]; 
```

但由于收到的通知不止一个，所以会显示收到的通知数量。是否有仅显示一次警报视图的最佳做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:49:55.783

是的，您可以执行以下操作：

```
@interface MyClass
{
    UIAlertView *_myAlertView;
}
@end

@implementation MyClass
...
- (void)myNotificationSelector:(NSNotification *)notification
{
    if (!_myAlertView) {
        _myAlertView = [[UIAlertView alloc] init ...]
        _myAlertView.delegate = self;
        [_myAlertView show];
    }
}
...
@end 
```

在 UIAlertViewDelegate 处理程序中，只需释放并将 _myAlertView 设置为 NO。

# c# - Sitecore item.IsClone 与 item.IsItemClone

> ID：12907188
> 
> 赞同：7
> 
> 时间：2012-10-16T03:36:40.697
> 
> 标签：c#, asp.net, sitecore, sitecore6

`item.IsClone`vs 和有什么不一样`item.IsItemClone`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T06:22:37.673

`item.IsClone`快速检查上下文语言的克隆关系。

`item.IsItemClone`稍微复杂一点；它还会检查当前语言，但如果没有找到克隆关系，它将再次检查所有其他语言版本。此外，此属性的结果缓存在 DataCache 中。

我认为在大多数情况下，您最好使用`IsItemClone`.

# android - 试图在Android中将按钮推到线性布局的底部

> ID：12907190
> 
> 赞同：6
> 
> 时间：2012-10-16T03:37:00.487
> 
> 标签：android, android-layout, android-linearlayout, android-button

我知道这可以通过使用相对布局很容易地完成，但我觉得我所做的是正确的，并且应该使用线性布局本身给我想要的结果。但由于某种原因，当我在运行 Android JB 4.1.2 的 Google Nexus 7 上运行此工具时，我会在列表视图项之后立即看到按钮和文本视图。如果列表视图为空，我会在屏幕顶部看到它们。难道我做错了什么？？这是我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/attachments_list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="1"
android:orientation="vertical">
<ListView
    android:id="@+id/mtg_attachments"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />
<Button
    android:id="@+id/attach_delete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/delete"
    android:textSize="22sp" />
<TextView
    android:text="@string/attach_warning"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="18sp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:32:33.550

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/attachments_list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1" >
<ListView
    android:id="@+id/mtg_attachments"
    android:layout_width="fill_parent"
    android:layout_height="70dp"
    android:layout_weight="0.9" />
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:layout_weight="0.1"
    android:gravity="bottom" >
    <Button
        android:id="@+id/attach_delete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="delete"
        android:textSize="22sp" />
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="attach_warning"
        android:textSize="18sp" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:16:45.910

Sriman 请看一下这个答案，然后告诉我这是否有用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/attachments_list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="bottom"
android:orientation="vertical"
android:weightSum="1" >

<ListView
    android:id="@+id/mtg_attachments"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/attach_delete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="delete"
        android:textSize="22sp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="attach_warning"
        android:textSize="18sp" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T13:52:37.950

我知道这个问题已经有了一个公认的答案，但我还是要回复，因为没有找到解决方案，这是谷歌给我的关于我也遇到的这个问题的第一个结果。

只需在要划分的 2 个元素之间放置一个`LinearLayout (vertical)`with即可。`layout:weight = 1`

在您的代码中，那将是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/attachments_list"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:weightSum="1"
              android:orientation="vertical">
    <ListView
        android:id="@+id/mtg_attachments"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0" />

    <LinearLayout
        <!-- You should add this one and remove android:layout_weigth="1" form the listview -->
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">
    </LinearLayout>

    <Button
        android:id="@+id/attach_delete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/delete"
        android:textSize="22sp" />
    <TextView
        android:text="@string/attach_warning"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="18sp" />

</LinearLayout> 
```

注意，添加的LinearLayout必须是唯一设置了权重属性的，否则我们不得不面对一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:02:05.250

如果您想将一个项目置于屏幕中间，请不要使用 LinearLayout，因为它们用于显示一个接一个堆叠的行中的多个项目。

请改用[相对](http://developer.android.com/reference/android/widget/RelativeLayout.html)布局。

所以替换：

```
android:layout_gravity="center" 
```

对于相关`RelativeLayout`选项：

```
android:layout_centerInParent="true" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T05:55:15.773

修改您的 xml 代码。

使用`android:layout_weight`来调整布局的百分比。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/attachments_list"
    android:layout_width="fill_parent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="1"
    android:orientation="vertical">
<ListView
    android:id="@+id/mtg_attachments"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="0.8" />
<Button
    android:id="@+id/attach_delete"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_gravity="center"
    android:layout_weight="0.1"
    android:text="@string/delete"
    android:textSize="22sp" />
<TextView
    android:text="@string/attach_warning"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="0.1"
    android:textSize="18sp" />
</LinearLayout> 
```

# r - 如何将 R 矩阵对象导出到 .txt 文件

> ID：12907198
> 
> 赞同：17
> 
> 时间：2012-10-16T03:38:13.483
> 
> 标签：r

我有一个 R 对象说：

```
mat <- matrix(1:100,nrow=20) 
```

我想将此矩阵发送到 .txt 文件，以便导出的 .txt 文件包含 20 行和 5 列。有没有简单的方法可以做到这一点？

提前致谢，

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-16T04:41:47.573

无需包裹：

```
write.table(mat, file="mymatrix.txt", row.names=FALSE, col.names=FALSE) 
```

这将使用空格作为分隔符，但`sep = ...`如果您更喜欢制表符或任何其他分隔符，您也可以添加（`...`当然，替换为您想要的分隔符）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T03:42:40.747

文档是一个[很好的资源](http://stat.ethz.ch/R-manual/R-patched/library/MASS/html/write.matrix.html)。:)

```
library(MASS)
mat <- matrix(1:100,nrow=20)
write.matrix(mat,'/path/to/file.txt',sep = "\t") 
```

# html - 使用 webkit-image-set 时，如何为非 WebKit 浏览器呈现替代内容？

> ID：12907203
> 
> 赞同：4
> 
> 时间：2012-10-16T03:38:50.747
> 
> 标签：html, css, internet-explorer, firefox, webkit

我正在使用 webkit-image-set 使我的图像对于使用 Retina 显示器的用户来说看起来都非常漂亮。

由于这个 CSS 选择器不适用于 img 标签，我有一些看起来像这样的 HTML 和 CSS（如 Apple 的 WWDC 2012 会议所示）：

```
<div id="iconImage">
</div>

div#iconImage {
width:152px;
height:152px;
background-image: -webkit-image-set(url(WebsiteIcon.png) 1x, url(WebsiteIcon@2x.png) 2x);
background-size: 152px 152px;
margin-left:auto;
margin-right:auto;
} 
```

在我的 Retina MacBook Pro 上看起来很棒！当然，不是在我使用 Firefox 时：正如我所料，它只是一个空白点。我敢肯定，在 IE 中查看时它也不会显示任何内容。它也不是很容易获得。

那么，我可以在上面的代码中添加什么来制作：

1.  图像（可能是低分辨率版本）显示在
2.  可能是某种文本或替代文本或其他内容，以便残障访问者更容易访问它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T04:30:27.307

你不能为 CSS 背景做 alt 文本（尤其是因为背景不应该用于语义上有意义的图像），但做后备背景很容易：

```
background-image: url(whatever);
background-image: -webkit-image-set(url(WebsiteIcon.png) 1x, url(WebsiteIcon@2x.png) 2x); 
```

非 WebKit UA 将忽略第二个声明，而 WebKit 将忽略第一个，因为第二个会覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:51:32.020

也许您可以创建另一个专门为非 webkit 浏览器制作的类。

```
div#iconImage.nonWebkit {
    background-image: url(WebsiteIconNonWebkit.png);
} 
```

然后使用jQuery检测非Webkit浏览器

```
if (!$.browser.webkit) {
    $('#iconImage').addClass('nonWebkit');
} 
```

# php - 使用 PHP if/else 语句编写 div

> ID：12907206
> 
> 赞同：1
> 
> 时间：2012-10-16T03:39:39.480
> 
> 标签：php, if-statement

这来自我正在处理的 wordpress 网站，但不是 WP 特定的问题。

我有一个 if/else PHP 语句来检查用户是否正在查看我网站的主页。如果他们正在查看主页，我希望代码什么也不做。如果他们不是，我希望它在配置中显示页面标题。

我目前拥有的代码是：

```
<div class="page-header">
  <h1>
    <?php
    if ( is_front_page()){
        echo ' ';
    }
    elseif (is_home()) {
        if (get_option('page_for_posts', true)) {
          echo get_the_title(get_option('page_for_posts', true));
        } else {
          _e('Latest Posts', 'roots');
        }
      } elseif (is_archive()) {
        $term = get_term_by('slug', get_query_var('term'), get_query_var('taxonomy'));
        if ($term) {
          echo $term->name;
        } elseif (is_post_type_archive()) {
          echo get_queried_object()->labels->name;
        } elseif (is_day()) {
          printf(__('Daily Archives: %s', 'roots'), get_the_date());
        } elseif (is_month()) {
          printf(__('Monthly Archives: %s', 'roots'), get_the_date('F Y'));
        } elseif (is_year()) {
          printf(__('Yearly Archives: %s', 'roots'), get_the_date('Y'));
        } elseif (is_author()) {
          global $post;
          $author_id = $post->post_author;
          printf(__('Author Archives: %s', 'roots'), get_the_author_meta('display_name', $author_id));
        } else {
          single_cat_title();
        }
      } elseif (is_search()) {
        printf(__('Search Results for %s', 'roots'), get_search_query());
      } elseif (is_404()) {
        _e('File Not Found', 'roots');
      } else {
        the_title();
      }
    ?>
  </h1>
</div> 
```

我知道这`echo ' ';`可能很遥远，但我是一个绝对的 php 初学者！目前这会创建一个空标签`<div>`，`<h4>`但我宁愿清理它并且在主页上什么也不创建。

我怎样才能最好地修改上面的代码来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:51:10.900

你需要移动你的代码。如果您不希望在`<div><h1>`首页上打印前导，`if`请在此之前移动检查。添加一个`else`然后打印的地方`<div><h1>`，大的 if/else 代码块和关闭`</div>`等。

还阅读了关于[切换进出 PHP 代码和 html 模式的内容](http://php.net/manual/en/language.basic-syntax.phpmode.php)。
尽管如此，最好的解释可能是仅仅显示：

```
<?php
    if ( is_front_page()){
        echo ' ';
    }
    else {
?>
<div class="page-header">
  <h1>
    <?php

    if (is_home()) {
        if (get_option('page_for_posts', true)) {
          echo get_the_title(get_option('page_for_posts', true));

       /*

           ...

       */

      } else {
        the_title();
      }
    ?>
  </h1>
</div>
<?php
     }
?> 
```

这里唯一有趣的是您将 html+code blob 括在`else`s左大括号`{`和右`}`大括号之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:46:15.193

将你的回声放入一个变量而不是打印它们，然后在你的 if 语句之后

回声（$var ==''）？'' : ''.$var.'';

最后 2 组单引号之间的 HTML 标签

# multithreading - 在 STM TVar 中有一个整数是个好主意吗？

> ID：12907212
> 
> 赞同：2
> 
> 时间：2012-10-16T03:39:58.380
> 
> 标签：multithreading, haskell

我有一个`f`返回一个大整数的函数。快结束时，程序必须将所有返回的值相加`f`。这台计算机的物理内存太有限，无法存储 的所有返回值`f`。所以我需要把它放到一个文件缓冲区中。TVars 能够处理整数吗？有没有可以抛出所有返回值的解决方案`f`？此外，单独的线程是否能够同时读取和缓冲它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:26:23.553

你对你想做的事情的描述有点模糊，所以我可能需要更多的信息和更多的问题才能达到你的需要。

你的第一个问题：

> TVars 能够处理整数吗？

有答案“是”。您可以在 a 中存储任何值`TVar`，但不能存储未装箱的值（未装箱的值是 GHC 扩展，它公开了一些实现并在类型中有 # 符号）。

> 有没有一个解决方案可以抛出 f 的所有返回值？

我想“投掷”的意思是“加起来”？如果是这样，那么您可以将运行总计保存在可变变量中，例如`TVar`or`MVar`或（如果单线程或非常小心）an `IOVar`。

请注意，存储“x + y”存储“(+)”应用于“x”和“y”，这是一个惰性重击。在将其存储到可变变量之前，您需要强制添加到弱头正常形式 (WHNF)。

> 此外，单独的线程是否能够同时读取和缓冲它？

这个问题中的“缓冲区”是什么意思？我猜不透。

如果我在多个并发线程访问的可变变量中保持运行总计，那么我将使用`MVar Integer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:07:57.420

你的问题不是很清楚。据我了解，您需要存储函数 f 在程序运行期间返回的所有结果，并且由于有大量此类结果，您希望将这些结果存储在文件中。由于在计算结果后立即实际存储每个结果是低效的，因此您希望实现一种缓冲形式。

如果是这种情况，您可以使用像[Chan](http://www.haskell.org/ghc/docs/7.4.2/html/libraries/base/Control-Concurrent-Chan.html)这样的东西，它是一个无界阻塞 FIFO 队列。为了回答您的一个问题，这个结构是专门为来自多个线程的并发访问而设计的。

所以你可以在你调用 f 的地方运行你的主程序，并且对于每个调用，你也可以将结果插入到 Chan 中。您还将生成另一个线程，该线程将不断地从 Chan 中读取并将结果写入文件中。

现在，如果主线程（调用 f 的线程）的速率远高于另一个线程将结果存储在磁盘上的速率，那么您又回到了原来的问题，即结果堆积在 Chan 和你在某些时候仍然没有记忆。对于这种特殊情况，您可以使用类似[BoundedChan](http://hackage.haskell.org/packages/archive/BoundedChan/latest/doc/html/Control-Concurrent-BoundedChan.html)的东西，它与 Chan 类似，但当通道已满时会在插入时阻塞。在这种情况下，主线程有时可能不得不等待写入线程将结果存储在磁盘上，但您可以保证永远不会用 f 的许多结果填满内存。

我们实际上可以为此构建一个很好的抽象。我们可以想象一个`traceable`给定函数 f 和存储值的方法给我们一个函数，该函数返回与 f 相同的结果，但作为副作用，它还存储结果以供以后分析。

```
traceable :: (a -> b) -> (b -> IO ()) -> (a -> IO b)
traceable f store = \x -> do
    let result = f x
    store result
    return result 
```

在您的情况下，该程序可能如下所示：

```
f :: Int -> Int
f = ... -- implementation of f here

main = do
    ch <- newChan
    traceableF = traceable f (writeChan ch)
    forkIO $ resultWriter ch
    -- the main program which calls traceableF here ...

resultWriter :: Chan Int -> IO ()
resultWriter ch = do
    f <- obtainFileHandler
    forever $ do
        result <- readChan
        writeToFile f result 
```

您可能还需要编写一些逻辑，以便主线程等待`resultWriter`线程完成写入磁盘，但基本上就是这样。

希望这能回答你的问题。

# c++ - 在 C++ 编译时获取子类型

> ID：12907213
> 
> 赞同：2
> 
> 时间：2012-10-16T03:40:16.207
> 
> 标签：c++, objective-c

我有一个引用计数的基类，它将是我的*大多数*对象的父类。它有自己的小引用计数方法。问题是，这些可能是子类。在某种程度上，我正在尝试实现 NSObject，但在 C++ 中。

因此，这意味着有一个“init”方法。

因此，init 方法应该总是返回孩子的类类型。想象一下：

```
class BaseClass{
public:
virtual childclass* init();
} 
```

我知道在 Objective-C 中这很容易，因为它返回 'id' 并且不需要强制转换。但是在 C++ 中没有“id”之类的东西，因此我希望有一个宏或其他东西可以自动将 childclass* 扩展为实际的子类。我对 C++ 很陌生，所以我不确定如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:51:34.000

这可以通过[Curiously Recurring Template Pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)来完成。

```
template <class childclass> class BaseClass
{
  public:
    virtual childclass* init();
};

class ChildClass : BaseClass<ChildClass>
{
  public:
    virtual ChildClass* init();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:49:23.830

您应该使用返回正确类型的 C++ 构造函数。它会像这样工作：

```
class BaseClass {
    public:
        BaseClass();
        virtual ~BaseClass();
};

class childClass : public BaseClass {
    public:
        childClass();
        virtual ~childClass();
}; 
```

然后你可以简单地调用`new childClass`，你会得到一个指向 childClass 的指针。

# powershell - Powershell - 可设置的 NoteProperty

> ID：12907219
> 
> 赞同：1
> 
> 时间：2012-10-16T03:40:49.843
> 
> 标签：powershell, powershell-2.0

在我的 PowerShell 脚本中，我正在使用 NoteProperties 创建一个自定义对象：

```
$foo = New-Object System.Object
$foo | Add-Member -type NoteProperty -name Something -value [int]dataRow["Field"] 
```

但后来在代码中，我需要这样做：

```
$foo.Something = 10 
```

在那一行，我收到错误消息

在此对象上找不到属性“某物”；确保它存在并且是可设置的。在... + CategoryInfo : InvalidOperation: (CoreMajor:String) [], RuntimeException + FullyQualifiedErrorId : PropertyNotFound

所以我猜 NoteProperty 应该是可设置的，因为文档说的是静态值。但是，我该如何编辑/更新属性？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:39:31.380

更改此行

```
$foo | Add-Member -type NoteProperty -name Something -value [int]dataRow["Field"] 
```

有了这个

```
$foo | Add-Member -type NoteProperty -name Something -value ([int]$dataRow["Field"]) 
```

由于语法错误，Something 属性一开始就没有被创建。你应该得到一个错误，除非你`$ErrorActionPreference`设置为 SilentlyContinue （但我猜你也不应该收到第二条错误消息）。

# android - 为什么网关是bogon？

> ID：12907223
> 
> 赞同：0
> 
> 时间：2012-10-16T03:41:37.753
> 
> 标签：android, linux, networking, ip, gateway

我通过 USB 将我的 Android 手机与我的 PC 连接起来。并打开手机上的usb tether选项。

所以，在PC的网络连接中显示了一个新的远程NDIS网络适配器，并且在android上有一个rnndis0 IFface。

我做了以下配置： PC：ip：192.168.42.1 网络掩码：255.255.255.0

电话：ip 192.168.42.2 网络掩码：255.255.255.0

并且互相ping通时，两者都可以正常工作。

但是当我将手机的默认网关配置为PC的地址时，它失败了。

```
busybox route add default gw 192.168.42.1
busybox route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         bogon           0.0.0.0         UG    0      0        0 rndis0
192.168.42.0    *               255.255.255.0   U     0      0        0 rndis0 
```

谁能告诉我原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:10:57.707

我相信它被标记为 bogon，因为它是一个不应出现在路由表中的地址，即 bogon 路由。

这是因为它是一个私有网络地址。但这只是一个警告。

见[http://packetlife.net/blog/2009/jan/21/whats-bogon/](http://packetlife.net/blog/2009/jan/21/whats-bogon/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:15:53.627

```
What is the output of

$ ip route
on Android? 
```

赵银

昨天，我无法重现该问题。现在，它再现了。

```
busybox route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         bogon           0.0.0.0         UG    0      0        0 rndis0
192.168.137.0   *               255.255.255.0   U     0      0        0 rndis0 
```

ip route 的输出是：

```
busybox ip route
default via 192.168.137.1 dev rndis0
192.168.137.0/24 dev rndis0  src 192.168.137.2 
```

实际上，它工作正常，但是出现了“bogon”这个词

# windows-phone-7 - 如何在 Windows Phone 7 中从 Google Drive 上传和下载音频文件

> ID：12907224
> 
> 赞同：1
> 
> 时间：2012-10-16T03:42:24.253
> 
> 标签：windows-phone-7, google-drive-realtime-api

是否有任何 Google Drive API 可用于在 windows phone 7 中上传和下载音频文件。如果没有，有没有办法实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:11:48.287

适用于 .NET的[Google API 客户端库](http://code.google.com/p/google-api-dotnet-client/)[尚不](http://code.google.com/p/google-api-dotnet-client/issues/detail?id=114)支持 Windows Phone 7 ，但您可以从您的应用程序发送原始 HTTP 请求并自行实现协议。

查看 Google Drive SDK 文档以获取[上传](https://developers.google.com/drive/manage-uploads)和[下载](https://developers.google.com/drive/manage-downloads)说明。

# bash - Bash：杀死具有指定名称的所有屏幕

> ID：12907230
> 
> 赞同：2
> 
> 时间：2012-10-16T03:43:07.927
> 
> 标签：bash, gnu-screen

如果我有多个同名的屏幕，我怎么能在不检查所有 PID 的情况下杀死所有屏幕，然后执行`screen -wipe`？

例子：

```
24754.screen1  (Detached)
32236.screen1  (Detached)
7308.screen1   (Detached)
3896.screen1   (Detached)
10155.screen1  (Detached)
10888.screen1  (Detached)
28438.screen1  (Detached)
26008.screen1  (Detached) 
```

我想杀死 screen1 的所有实例，终止在其中运行的所有进程，并且不需要在`screen -wipe`之后运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:39:09.023

不确定是否足够干净。-X 退出操作不需要 -wipe：

```
screen -ls | awk -vFS='\t|[.]' '/screen1/ {system("screen -S "$2" -X quit")}' 
```

您应该能够潜入您的会话开始的每个外壳并在理论上发送退出

# python - 连接点和区间数据

> ID：12907231
> 
> 赞同：2
> 
> 时间：2012-10-16T03:43:24.087
> 
> 标签：python, pandas

我有两个需要加入的时间序列：

第一个是这样的价格时间序列

```
ticker date       price 
SBUX   01/01/2012 55 
```

第二个时间序列是调整因子，表示为

```
ticker start_date end_date    adjustment_factor
SBUX   01/01/1993 01/01/1994  0.015 
```

如何在熊猫中将这些时间序列连接在一起以表达调整后的价格

```
adjusted_price = historical_prices * adjustment_factor 
```

我知道我需要使用 date_range 函数将 adjust_factor 间隔时间序列扩展为每日序列。但问题是调整时间序列的每一行都将有不同的日期范围 - 有没有办法为整个调整因子时间序列从间隔日期类型批量转换，而不是对每一行进行转换。

我已经发现我需要将第一个时间点时间序列转为行情进入列并将日期转换为行，而第二个时间序列将间隔扩展为每日粒度并对其进行转轴（通过 dataframe.pivot 函数。通过结合两个数据框可以编写我需要的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:02:38.973

您可以简单地将 dataFrame 与您的每日柱连接，并使用 fillna(method="ffill") 向前填充先前的值。在您的示例中，您有一个范围的调整因子。

```
#suppose sbux is an ohlc daily bar and adj is your adjustment factors  
adj  = pandas.DataFrame({"adj":pandas.Series(values,index = start_dates)})
sbux_with_adj  = sbux.join(adj)
sbux_with_adj["Adj"] =    sbux_with_adj["Adj"].fillna(method="ffill")
ohlc = sbux_with_adj[["Open","High","Low","Close"]] * sbux_with_adj["adj"] 
```

我会通过以下方式使用更常见的调整因子（例如 0.985 获得 1.5% 的股息）进行调整：

```
sbux_with_adj  = sbux.join(adj)
sbux_with_adj["Adj"] =    sbux_with_adj["Adj"].fillna(1.0)
#now reverse cumulated adjustment.
cumulated_adj = sbux_with_adj["Adj"].cumprod().values[::-1] 
ohlc = sbux_with_adj[["Open","High","Low","Close"]] * cumulated_adj 
```

# java - 在 Servlet 规范 3.0 下传递 servlet 配置参数

> ID：12907232
> 
> 赞同：1
> 
> 时间：2012-10-16T03:43:39.387
> 
> 标签：java, jakarta-ee, tomcat, servlet-filters, servlet-3.0

当使用注释而不是 web.xml 文件时，您如何处理通常可以从[ServletConfig](http://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/ServletConfig.html)对象中读取的 servlet init/config 参数？IE

```
@WebFilter("/sample")
public class MyServlet {

    public void init() throws ServletException {
        String value = getServletConfig().getInitParameter("key");
        // or
        value = getServletContext().getInitParameter("key");
    }
} 
```

或者在过滤器的情况下：

```
public class MyFilter implements Filter {

    public void init (FilterConfig filterConfig) throws ServletException {
        filterConfig.getInitParameter("key");
    }

} 
```

**更新：**我知道您可以在注释中硬编码配置参数，但我不想将配置设置硬编码到代码中。例如，这个 servlet 不能在两个应用程序之间共享：

```
@WebFilter("/sample", initParams = {@InitParam(name = "database_host", value = "blah.com")})
public class MyServlet {

    public void init() throws ServletException {
        String value = getServletConfig().getInitParameter("database_host");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:52:19.280

```
 @WebServlet(name = "TestServlet", urlPatterns = {"/test"},
 initParams = {@WebInitParam(name="key", value="value")})

 public class TestServlet extends HttpServlet {

   protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        
      String key= getInitParameter("key");
   }
 } 
```

**编辑：**

要回答您更新的问题，您有两种选择：

1.  使用使用`web.xml`基于初始化参数的旧模式

2.  只需在另一个项目中创建 servlet 的虚拟扩展（子类）并分配新的 init 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:49:37.877

我想这就是你的意思

```
@Servlet(urlMappings={"/MyApp"}, initParams ={@InitParam(name="lang", value="english")})
public class MyServlet { 
```

可以参考这篇[An Introduction To Servlet 3.0](http://today.java.net/pub/a/today/2008/10/14/introduction-to-servlet-3.html?force=893)

# php - 为什么 CodeIgniter 的 Curl 库比在普通 PHP 中使用 Curl 慢？

> ID：12907234
> 
> 赞同：6
> 
> 时间：2012-10-16T03:43:47.113
> 
> 标签：php, codeigniter, curl, performance

最近，我将使用 Curl 的抓取代码移至 CodeIgniter。我正在使用来自[http://philsturgeon.co.uk/code/codeigniter-curl](http://philsturgeon.co.uk/code/codeigniter-curl)的 Curl CI 库。我将抓取过程放在控制器中，然后我发现抓取的执行时间比我用普通 PHP 构建的要慢。

CodeIgniter 输出结果需要 12 秒，而普通 PHP 只需要 6 秒。两者都包括使用 HTML DOM 解析器的解析过程。

这是我在 CodeIgniter 中的 Curl 代码：

```
function curl($url, $postdata=false)
{
  $agent = "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)";

  $this->curl->create($url);
  $this->curl->ssl(false);
  $options = array(
    'URL'             => $url,
    'HEADER'          => 0,
    'AUTOREFERER'     => true,
    'FOLLOWLOCATION'  => true,
    'TIMEOUT'         => 60,
    'RETURNTRANSFER'  => 1,
    'USERAGENT'       => $agent,
    'COOKIEJAR'       => dirname(__FILE__) . "/cookie.txt",
    'COOKIEFILE'      => dirname(__FILE__) . "/cookie.txt",
  );

  if($postdata)
  {
    $this->curl->post($postdata, $options);
  }
  else
  {
    $this->curl->options($options);
  }

  return $this->curl->execute();
} 
```

非codeigniter（纯php）代码：

函数 curl($url ,$binary=false,$post=false,$cookie =false ){

```
 $ch = curl_init();

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); // Accepts all CAs
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 2); 

    curl_setopt ($ch, CURLOPT_URL, $url );
    curl_setopt ($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_REFERER, $url);
    curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate');
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 60);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

    if($cookie){

        $agent = "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)";
        curl_setopt($ch, CURLOPT_USERAGENT, $agent);
        curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . "/cookie.txt");
        curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__) . "/cookie.txt");

    }

    if($binary)
        curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);

    if($post){

        foreach($post as $key=>$value) 
            { 
        $post_array_string1 .= $key.'='.$value.'&'; 
        }
        $post_array_string1 = rtrim($post_array_string1,'&');

        //set the url, number of POST vars, POST data

        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array_string1);
    }

        return  curl_exec ($ch); 
```

}

有谁知道为什么这个 CodeIgniter Curl 比较慢？或者可能是因为 simple_html_dom 解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:56:54.987

我不确定我是否知道确切的答案，但我对 Curl & CI 有一些观察，因为我广泛使用它。

1.  检查 DNS 缓存/查询的状态。

当代码从我的开发桌面上传到托管登台服务器时，我注意到显着加速。它被追溯到通过重新启动堡垒主机解决的 DNS 问题......您有时可以通过使用 IP 地址而不是主机名来检查这一点。

1.  Phil 的“图书馆”实际上只是一个包装器。

他真正所做的只是将 CI 风格的函数映射到 PHP Curl 库。几乎没有其他事情发生。我花了一些时间四处寻找（我忘记了为什么），这真的很不起眼。也就是说，很可能会有一些一般的 CI 开销——你可能会看到在另一个类似的框架（Fuel、Kohana、Laravel 等）中发生了什么。

1.  检查您的反向查找。

一些 API 会在其安全扫描中进行反向 DNS 检查。有时主机名或其他标头在隐藏配置中设置不当，可能会引起真正的头痛。

1.  使用 Chrome 的 Postman 扩展来调试 REST API。

没有评论，这很棒 - [https://github.com/a85/POSTMan-Chrome-Extension/wiki](https://github.com/a85/POSTMan-Chrome-Extension/wiki)并且您可以对“对话”进行精细控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:18:29.827

我必须更多地了解 CI 库，以及它是否对收集的数据执行任何额外任务，但我会尝试将您的方法命名为库名称以外的名称。我在使用 Facebook 库时遇到问题，在名为 facebook 的方法中调用它会导致问题。如果您在谈论库或方法，$this->curl 可能会模棱两可。

另外，尝试添加调试分析器，看看它会带来什么。在构造或方法中添加它：

```
$this->output->enable_profiler(TRUE); 
```

# powershell - 如何仅在 VS 2012 中的 Web 部署发布任务之前执行 PowerShell 脚本？

> ID：12907236
> 
> 赞同：24
> 
> 时间：2012-10-16T03:43:54.773
> 
> 标签：powershell, visual-studio-2012, publish, msdeploy, post-build-event

目前，我使用 Visual Studio 2012 在我的 Web 项目中配置了一个构建后事件，如下所示：

![在此处输入图像描述](../Images/7cda5c9d28125be8c8091bde062e8c01.png)

这基本上调用了一个[PowerShell 脚本](https://stackoverflow.com/q/12199409/114029)来为每个 .cs 文件添加版权声明。

我想做的是***仅在***将 Web 应用程序发布到远程服务器之前执行这个 powershell 脚本。这样做我不会在每次需要调试项目时遇到延迟。你知道有什么方法可以做到这一点吗？

* * *

根据[赛义德的回答](https://stackoverflow.com/a/12920499/114029)，我定制了一个特定的发布配置文件并添加了这个：

```
<PipelineDependsOn>
  CustomBeforePublish;
  $(PipelineDependsOn);
</PipelineDependsOn>
</PropertyGroup>
<Target Name="CustomBeforePublish">
<Message Text="******* CustomBeforePublish *******" Importance="high" />
<Exec Command="powershell.exe -file &quot;$(ProjectDir)\Copyright.ps1&quot;" />
</Target> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-16T17:45:30.550

这取决于您之前如何定义，但以下是一种技术。

当您使用 VS2012 创建发布配置文件时，它将在 Properties\PublishProfiles 文件夹中为您创建一个 .pubxml 文件（*My Project\PublishProfiles for VB*）。这些是 MSBuild 文件，您可以编辑它们以自定义发布过程。在您的情况下，您可以在发布实际发生之前将目标注入发布过程。您可以通过扩展 PipelineDependsOn 属性来做到这一点，如下所示。

```
<PropertyGroup>
  <PipelineDependsOn>
    CustomBeforePublish;
    $(PipelineDependsOn);
  </PipelineDependsOn>
</PropertyGroup>

<Target Name="CustomBeforePublish">
  <Message Text="********************************** CustomBeforePublish ***********************************" Importance="high"/>
</Target> 
```

仅供参考，关于 .wpp.targets 的自定义，这是我们为 VS2010 提供的唯一技术。我的建议如下；在大多数情况下自定义 .pubxml 文件，如果您想自定义给定项目的每个发布，则仅创建一个 .wpp.targets 文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-27T09:58:59.673

`Sayed`的回答指出了问题。但是，我考虑过提供一个完整的答案（在 Visual Studio 2017 中进行测试）：

```
 <PropertyGroup>
    <PipelineDependsOn>
       PreBuildScript;
       $(PipelineDependsOn);
    </PipelineDependsOn>
  </PropertyGroup>

  <Target Name="PreBuildScript">
     <Message Text="Executing prebuild script" Importance="high"/>
     <Exec Command="powershell.exe -file &quot;$(ProjectDir)\InnerFolder\script.ps1&quot;" />
   </Target> 
```

**注意：**这将对预览和实际发布操作都执行，因此可以在实际发布之前找出发布前的错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T05:54:28.450

`ProjectName.wpp.targets`在 Web 应用程序的根目录中声明以下文件：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <BeforeAddContentPathToSourceManifest>
      $(BeforeAddContentPathToSourceManifest);
      AddCopyright;
    </BeforeAddContentPathToSourceManifest>
  </PropertyGroup>

  <Target Name="AddCopyright">
    <!-- I recommend passing in $(_MSDeployDirPath_FullPath) to your script
         as the base path to search to avoid having to perform a VCS rollback 
         (files are copied there before the deployment)
     -->
    <Exec Command="powershell.exe -file &quot;$(SolutionDir)Copyright.ps1&quot; &quot;$(_MSDeployDirPath_FullPath)&quot;" />
  </Target>
</Project> 
```

# air - 带有 AIR 本机扩展的 Captive Runtime Bundle

> ID：12907237
> 
> 赞同：0
> 
> 时间：2012-10-16T03:44:05.207
> 
> 标签：air, flash-builder, air-native-extension

我正在尝试导出我的应用程序的发布版本，该版本使用 AIR 本机扩展。由于某些要求，需要将应用程序导出为强制运行时捆绑包。

Flash Builder 4.6 拒绝执行此类导出并显示此消息“项目中正在使用本机扩展，但 CAPTIVE_RUNTIME_BUNDLE 包类型不支持。可能会出现运行时问题。”

有谁知道这些运行时问题到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:19:16.187

我在参与的一个项目中遇到了同样的问题。当项目包含 AIR 本机扩展时，Flash Builder 4.6 不支持作为强制运行时包导出。但我在 Flash Builder 4.7 中管理这个没有任何问题（另见[http://forums.adobe.com/message/4930032#4930032](http://forums.adobe.com/message/4930032#4930032)）。

# awk - 在 awk 中获取用户输入

> ID：12907238
> 
> 赞同：10
> 
> 时间：2012-10-16T03:44:06.440
> 
> 标签：awk

有没有办法通过 awk 编程读取用户输入？我尝试编写一个脚本来读取包含学生姓名和 ID 的文件。我必须通过键盘从用户那里获取学生的姓名，并使用 awk 返回所有学生的结果。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T03:53:26.173

`getline`您可以使用该功能收集用户输入。确保在`BEGIN`块中设置它。以下是 的内容`script.awk`：

```
BEGIN {
    printf "Enter the student's name: "
    getline name < "-"
}

$2 == name {
    print
} 
```

这是一个包含 ID、名称和结果的示例文件：

```
1 jonathan good
2 jane bad
3 steve evil
4 mike nice 
```

像这样运行：

```
awk -f ./script.awk file.txt 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T04:02:59.380

假设输入文件的格式为：

```
name<tab>id 
```

对，并且您想打印文件中名称与用户输入匹配的行，请尝试以下操作：

```
awk '
BEGIN { FS=OFS="\t"; printf "Enter name: " }
NR == FNR { name = $0; next }
$1 == name
' - file 
```

或者使用 GNU awk，您可以使用 nextfile，这样您就不必在输入后输入 control-D：

```
awk '
BEGIN { FS=OFS="\t"; printf "Enter name: " }
NR == FNR { name = $0; nextfile }
$1 == name
' - file 
```

如果这不是您想要做的，请发布一些示例输入和预期输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T15:57:23.647

我已经用线测试过

```
"awk 'BEGIN{printf "enter:";getline name<"/dev/tty"} {print $0} END{printf "[%s]", name}' < /etc/passwd" 
```

对我来说是更好的解决方案和更具可读性。

# objective-c - 如何在我的程序中存储数组数据？

> ID：12907241
> 
> 赞同：-1
> 
> 时间：2012-10-16T03:44:10.613
> 
> 标签：objective-c, ios, xcode

我有一个新手问题。我在 Xcode 中有一个项目，它使用故事板。我有一种方法可以从 facebook 中提取一些数据，然后将其存储在一个数组中。我只想在应用程序首次启动时调用该方法一次，然后将该数据存储在一个数组中，该数组不仅可以在应用程序处于活动状态时在视图控制器之间传递，而且即使在应用程序运行时也会保留其数据已关闭并重新打开。我确信有很多方法可以做到这一点，但是对于我作为初学者来说，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:12:38.533

您可以使用 NSUserDefaults 或全局数组。

***使用 NSUserDefaults***

保存在 NSUserDefaults

```
[[NSUserDefaults standardUserDefaults]setObject:yourArray forKey:@"theArray"]; 
```

从 NSUserDefaults 获取

```
[[NSUserDefaults standardUserDefaults]objectForKey:@"theArray"]; 
```

***使用全局数组***

使用第二种方法创建一个包含全局数组的文件，第一次初始化数据，并在整个应用程序中使用这个全局数组。

希望这能解决你的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:24:10.637

很多方法..是的

> *   NSUserDefaults[对于少量数据，很简单]
> *   CoreData[对于大量数据，需要大量工作和基础学习，但实际上非常有用的技术]
> *   Sqlite [是的，可以使用，但我更喜欢 Coredata 而不是 sqlite]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:49:46.000

对于初学者，根据数据结构的复杂程度，您可以 checkout `NSUserDefaults`。接下来是复杂性`sqlite`，一点点 SQL 知识就派上用场了。更健壮和故障安全的方法是 Core Data，它是 iOS 中所有数据库的母亲。网络上的每一个都有数十个教程。熟悉 Core Data 需要时间和耐心，但等待是值得的。

# c# - 如何仅验证 7 位数字？

> ID：12907242
> 
> 赞同：9
> 
> 时间：2012-10-16T03:44:34.170
> 
> 标签：c#, asp.net-mvc, fluentvalidation

我正在使用mvc。所以我想验证用户输入的数字是 7 位数。

所以我写了一个类。

```
 public class StduentValidator : AbstractValidator<graduandModel>
    {
        public StduentValidator(ILocalizationService localizationService)
        {                          
           RuleFor(x => x.student_id).Equal(7)
               .WithMessage(localizationService
                    .GetResource("Hire.graduand.Fields.student_id.Required"));                   
        } 
```

但它不起作用。如何验证 7 位数字？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-16T03:52:40.560

由于您使用的是 FluentValidation，因此您希望使用 .Matches 验证器来执行正则表达式匹配。

```
RuleFor(x => x.student_id).Matches("^\d{7}$").... 
```

另一种选择是做这样的事情（如果 student_id 是一个数字）：

```
RuleFor(x => x.student_id).Must(x => x > 999999 && x < 10000000)... 
```

或者，您可以使用 GreaterThan 和 LessThan 验证器，但以上更容易阅读。另请注意，如果数字类似于 0000001，则上述方法将不起作用，您必须将其转换为 7 位数字的字符串并使用以下技术。

如果 student_id 是一个字符串，那么是这样的：

```
int i = 0;
RuleFor(x => x.student_id).Length(7,7).Must(x => int.TryParse(x, out i))... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:46:37.720

你可以用`Regex`它

```
bool x = Regex.IsMatch(valueToValidate, "^\d{7}$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-16T10:34:41.987

您可以使用**Must**扩展。并将值转换为字符串，以便您可以使用**.Length**

```
RuleFor(x => x.student_id).Must(x => x.ToString().Length == 7) 
```

# c# - 在指定的时间间隔内在 C# 中创建随机 GUID

> ID：12907243
> 
> 赞同：7
> 
> 时间：2012-10-16T03:44:48.747
> 
> 标签：c#, guid

使用 .NET Framework，有没有办法在 C# 中在指定的时间间隔内创建随机 GUID？例如，我需要一个大于 ffffffff-ffff-ffff-ffff-1ffffffffffffff 且小于 ffffffff-ffff-ffff-ffff-2ffffffffffff 的随机 GUID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T03:53:07.703

使用[这个重载](http://msdn.microsoft.com/en-us/library/fx22893a.aspx)：

```
[CLSCompliantAttribute(false)]
public Guid(
    uint a,
    ushort b,
    ushort c,
    byte d,
    byte e,
    byte f,
    byte g,
    byte h,
    byte i,
    byte j,
    byte k
) 
```

`Guid(0xa,0xb,0xc,0,1,2,3,4,5,6,7)`创建一个与以下内容相对应的 Guid：

```
0000000a-000b-000c-0001-020304050607 
```

您可以以任何您喜欢的方式随机化参数。例如，您可以这样做：

```
var r[] = new byte[] { 1,2,3,4 } // chosen by fair dice rolls
                                 // guaranteed to be random

var guid = new GUID(0xFFFFFFFF, 0xFFFF, 0xFFFF, 0xFFFF, r[1], r[2], r[3], r[4]... 
```

反正你懂这个意思。您必须进行一些操作才能使第五个参数正确。

# c# - 在gridview单元格之间画一条连接线？

> ID：12907245
> 
> 赞同：1
> 
> 时间：2012-10-16T03:44:57.730
> 
> 标签：c#, wpf, gridview

有谁知道如何在gridview中的单元格之间绘制一条连接线？我想连接每个月水果的最低价格。我正在使用 WPF 和 C# 来构建它。

这是我希望我的 gridview 显示的情况图片的链接：

![在此处输入图像描述](../Images/8dab0a8db84ad3b251b7af88e2914594.png)

P / s：我使用Paint绘制了图像。抱歉，由于信誉点低，我无法上传图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:07:28.200

将这样的画布添加到您的 xaml 中，以使其满足您的 gridview

```
<Canvas Width="300" Height="300" Background="Beige"  Opacity="0.5" Name="canvas1"/> 
```

然后在您的代码中，您可以使用其中一个`Line`或`Path`类来绘制路径。我的代码使用 Line 类：

```
private void drawGridLines()
{
    Line lastline = new Line();
    lastLine.X2 = 0;
    lastLine.Y2 = 0;

    bool first = true;

    for(int i=0; i<5; i++) // iterate over your gridview rows
    {
        Line newline = new Line();

        newline.X1 = lastline.X2;
        newline.Y1 = lastline.Y2;

        newline.X2 = 50; // calculate X position of your minimum cell
        newline.Y2 = 50; // calculate Y position of your minimum cell 

        if(!first) { // first minimum cell should't be drawn, it is just the start point for next line

           drawLine(newline);
        } else {
           first = false;
        }

        lastline = newline;
    }
}

public void drawLine(Line line)
{
    line.Stroke = System.Windows.Media.Brushes.Red;
    line.StrokeThickness = 1;
    canvas1.Children.Add(line);
} 
```

# java - 在 Windows 上的 Xuggler 库中获取网络摄像头名称

> ID：12907246
> 
> 赞同：2
> 
> 时间：2012-10-16T03:45:19.423
> 
> 标签：java, video, webcam, xuggler

当我在具有多个 Windows 网络摄像头的计算机上使用 Xuggler 库时，我需要使用此网络摄像头的“名称”来选择设备。我的意思是命令“vfwcap 0”只选择第一个网络摄像头，命令“vfwcap 1”或“vfwcap 2”不允许访问其他网络摄像头。如果我使用：

```
$ ffmpeg -list_devices true -f dshow -i dummy 
```

我可以看到这个网络摄像头的“名称”列表。例如：“罗技高清网络摄像头 C270”、“罗技网络摄像头 C210”。如果我在 Xuggler 库中使用这个名称，我会收到错误消息。

因此，我只能使用 Xuggler 访问 Windows 机器上的第一个网络摄像头。

**我可以从 Xuggler 获取 Windows 中所有设备的列表吗？我可以在 Xuggler 中使用这个名称吗（我只想同时使用多个网络摄像头）？**

也许存在替代方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:12:41.147

使用这个简单的 java 程序，您可以获得系统上所有可用网络摄像头的列表。

```
import com.github.sarxos.webcam.Webcam;

public class CameraTest {
    public static void main(String[] args) {
        List<Webcam> list = Webcam.getWebcams();

        for (int i = 0; i < list.size(); i++) {
                try {
                    Webcam cam = list.get(i);
                    System.out.println("Found this Camera : "+cam.getName());
                    BufferedImage image = cam.getImage();
                } catch (Exception e) {
                    System.out.println("Exception in cam : " + i);
                }
        }
    }
} 
```

**样本输出：**

```
Found this Camera : TV CARD WDM VIDEO CAPTURE 0
Found this Camera : ManyCam Video Source 1
Found this Camera : DroidCam 2 
```

您将拥有所有相机的列表，因此您可以随意使用其中的任何一个。

# c - 具有小基数的有效指数

> ID：12907247
> 
> 赞同：1
> 
> 时间：2012-10-16T03:45:35.990
> 
> 标签：c, math

我需要执行 softmax 操作。也就是说，给定一系列`n`从 -inf 到 +inf 的实数值，我通过对每个值取幂并除以指数之和将它们转化为概率：

```
for (i = 0; i < n; i++)
    p_x[i] = exp(x[i]) / sum_exp(x, n) 
```

（不要从字面上理解代码，我不是在总结所有`exp`的每次迭代！）

在某些极端情况下（使用 8 字节双精度），当值超过 700 时，我会遇到溢出问题。我知道我可以使用另一个基础而不是 e，但是，我担心调用`pow`会慢得多`exp`（速度对我来说至关重要）。

解决这个问题的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:12:21.587

将每个数字用作 64 位浮点数中的 52 位尾数。这只是掩蔽然后铸造的问题。

```
#include <stdio.h>

int main(int argc, char *argv[])
{
  long long val = 1234567890;
  long long mval = val & ~0xfff0000000000000ULL;
  float fval = *((float*)&mval);
  printf("%f", fval);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:30:00.217

```
b^x = e^(x * ln b) 
```

因此，使用较小的基数相当于在应用之前`b`将您的值乘以，然后在最后再除。`ln b``exp`

# git - 在将远程更改与 Git 合并的同时修改开源项目

> ID：12907252
> 
> 赞同：1
> 
> 时间：2012-10-16T03:46:21.293
> 
> 标签：git

我有 git 克隆了 MapBox-ios-sdk 项目。我对不适合回馈的代码进行了一些丑陋的修改。但 MapBox-ios-sdk 最近发生了变化。如果我想将他们的最新更改合并到我的项目中，同时仍然保持我的 hack，那么使用 Git 执行此操作的最佳实践是什么？克隆时我应该最初分支吗？或者我应该只在 master 分支中修改，然后从官方来源 git pull 并解决冲突，并将其保留在未来的 sdk 版本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:55:49.027

我将假设您的 hack 已提交给您当地的`master`分支机构。您可以通过执行以下操作将其移动到分支：

```
git branch -m master myhack
git branch myhack^ master 
```

这将为您提供一个`myhack`包含一个提交的分支（`myhack^`如果有多个提交，请进行调整），以及一个`master`与项目中原始 master 匹配的分支。

此时，您可以将新代码拉入本地`master`分支而不会发生冲突。然后，切换到您的`myhack`分支并将新的 master 合并到：

```
git checkout myhack
git merge master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:49:05.217

由于您没有首先分支，因此您最好的做法就是您所描述的：*在 master 分支中修改，然后从官方来源 git pull 并解决冲突*。

# facebook - 询问 Facebook Open Graph 内置动作“games.win”、“games.plays”、“games.passes”和对象“games.match”

> ID：12907253
> 
> 赞同：2
> 
> 时间：2012-10-16T03:46:32.253
> 
> 标签：facebook, facebook-opengraph, facebook-apps

这几天我一直在研究 Facebook 游戏的内置 OpenGraph 动作和对象。我注意到某些事情。

*   当我们使用游戏类别访问我们的应用程序页面时，Facebook 会自动将“您玩过[应用程序名称]”放在您的活动列表中
*   有些游戏可以玩而不是玩。
*   有些游戏可以发布一个“games.win”类型的 OpenGraph 动作，也可以发布一个“games.match”类型的对象
*   在 Graph API Explorer 中，如果您键入`/me/games.plays`, `/me/games.plays`，`/me/games.passes`您会注意到这些内置操作和对象存在

然后在我的研究中，以下是我采取的步骤。

首先我玩了一个游戏“SongPop”，直到应用程序创建了 games.win 动作和 games.match 对象。

然后我获取活动或 opengraph ID，然后尝试使用 Facebook 调试器对其进行调试。我意识到这个动作和对象的存在。

然后我决定创建自己的“games.match”对象，可以使用 Facebook 对象调试器正确调试。（来自 SongPop 比赛的样本，报告是你打败了某人）

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# #######: http://ogp.me/ns/fb/#######">
    <meta property="og:site_name" content="#######">
    <meta property="fb:app_id" content="343622035704062" />
    <meta property="og:url"    content="http://#######/facebook/opengraph/gamematch/match_1.html">
    <meta property="og:title" content="90's Alternative Challenge">
    <meta property="og:image" content="http://ccmq-samples.s3.amazonaws.com/songpop/images/facebook/opengraph/90sAlternative.png">
    <meta property="og:description" content="Who is the best at guessing 90's Alternative songs?">
    <meta property="og:type" content="games.match">
    <meta property="games:players" content="facebook-userid">
    <meta property="games:players" content="facebook-userid">
</head>
<body>
</body>
</html> 
```

我也只是意识到，为了使这个 OpenGraph 对象工作，你必须在 URL 中有“gamematch”关键字。

然后我尝试使用 POST 方法使用 Graph API Explorer 重新创建操作 URL 是`/me/games.win`，参数是`{"match": "url to the open graph object"}`

然后 Graph API Explorer 返回这个结果

```
{
  "error": {
    "message": "(#3) App must be on whitelist", 
    "type": "OAuthException", 
    "code": 3
  }
} 
```

如果我使用 SongPop 用户访问令牌（在 chrome 上的应用程序页面中获取令牌），则操作成功并且将重新创建所述操作。

所以我想问的问题很少。

1.  是否有关于此 games.win 动作、games.match 对象的知识库书面文档。
2.  (#3) 应用程序必须在白名单上错误，有谁知道如何将我们的应用程序列入白名单，还是在 OpenGraph 操作提交和审核后应用程序将被标记在白名单中（尚未进入流程）

我已被分配开发需要此 OpenGraph 操作的此类游戏。我一直在看 Facebook 网站、博客和 stackoverflow.com，但没有任何线索。

请指教。

# ios - 如何让 EventKitUI 使用设备语言？

> ID：12907255
> 
> 赞同：1
> 
> 时间：2012-10-16T03:46:40.663
> 
> 标签：ios, ios5, eventkit, ekevent

我正在使用 an`EKEventEditViewController`从事件存储中创建、编辑和删除事件，但它始终以**English**显示。有没有办法本地化它，所以它会使用设备的默认语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:05:40.613

将**info.plist**中的**Localization 本机开发区域**设置为此视图控制器中所需的语言。

 **另请参阅[此 SO 答案](https://stackoverflow.com/questions/5349066/how-to-localize-my-app-with-xcode-4)。**

# asp.net - 通过可见性动态设置 TabContainer 活动选项卡

> ID：12907256
> 
> 赞同：0
> 
> 时间：2012-10-16T03:46:57.143
> 
> 标签：asp.net, tabs, ajaxcontroltoolkit

我正在使用 AjaxControlToolkit`TabContainer`并动态设置`TabPanel`可见性。当活动选项卡被隐藏（动态）时，整个选项卡控件被隐藏，所以为了避免这种情况，我编写了这样的小方法（将第一个可见选项卡设置为活动选项卡）

```
private void SetActiveTab()
{
    if (tabControl1.Tabs[0].Visible)
    {
        tabControl1.ActiveTabIndex =0;
        return;
    }

    if (tabControl1.Tabs[1].Visible)
    {
        tabControl1.ActiveTabIndex = 1;
        return;
    }

    ...

} 
```

但这对我来说感觉像是低效/丑陋的代码......，有没有更好的方法来做到这一点......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:35:50.820

选择任何

```
for (int tabIndex = 0; tabIndex < TabContainer1.Tabs.Count; tabIndex++)
{
    if(TabContainer1.Tabs[tabIndex].Visible)
    {
        TabContainer1.ActiveTabIndex = tabIndex;
        break;
    }
}

foreach (TabPanel tab in TabContainer1.Tabs)
{
    if (tab.Visible)
    {
        TabContainer1.ActiveTab = tab;
        break;
    }
}

var firstVisibleTab = TabContainer1.Tabs.OfType<TabPanel>().FirstOrDefault(tab => tab.Visible);
if (firstVisibleTab != null)
{
    TabContainer1.ActiveTab = firstVisibleTab;
} 
```

顺便说一句，对于此类问题，最好使用 Code Review 网站：[Code Review](https://codereview.stackexchange.com/?as=1)

# android - 禁用 Android 隐藏键盘软按钮

> ID：12907257
> 
> 赞同：0
> 
> 时间：2012-10-16T03:46:57.717
> 
> 标签：android

在具有一组虚拟硬按钮的设备上，当用户与 EditText 小部件交互时，有没有办法显示虚拟后退按钮而不是显示虚拟关闭键盘按钮？例如，在 Nexus 7 Android 4.1 上：

![带关闭键盘的nexus 7软键截图|  主页 |  应用](../Images/af619591b6b1a5faae138b464b3e4137.png)

对于这个对话框，在编辑文本时，我宁愿看到：

![nexus 7 带背面软键截图 |  主页 |  应用](../Images/39310b6a239b926a3b572cc59d4e9412.png)

我想要一个对话框，只允许键盘操作按钮——在我的情况下是搜索——或按下后退按钮。隐藏键盘没有意义。

编辑：如下所述，当键盘打开时，物理后退按钮与虚拟隐藏键盘按钮相同：它关闭键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:50:53.507

你必须root手机并安装自定义rom才能做到这一点。但即使有另一种方式，我也建议不要这样做，因为后退按钮仍然可以工作，并且会根据需要隐藏键盘，而且因为 nexus 用户希望该按钮以默认方式工作，并且如果某个应用程序覆盖了它行为，它会导致不一致的用户体验，这永远不会是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:42:05.247

这很简单：

```
if (event.getAction() == KeyEvent.ACTION_DOWN && event.getKeyCode() == KeyEvent.KEYCODE_SOFT_LEFT) {
     // make the action you wan't for the back key here
     return false;
} 
```

# mysql - 在 monkeyrunner/jython 中找不到 JDBC 驱动程序错误

> ID：12907260
> 
> 赞同：2
> 
> 时间：2012-10-16T03:47:11.710
> 
> 标签：mysql, jdbc, centos, classpath, jython

我需要在`DB`. 我`JDBC`作为一个使用`connector, jython the script`，`mysql`数据库和脚本正在运行`CentOS`。

我的代码看起来像这样：

> 从`com.android.monkeyrunner import MonkeyRunner, MonkeyDevice, MonkeyImage`
> 
> 从`com.ziclix.python.sql import zxJDBC`
> 
> ```
>  db=zxJDBC.connect("jdbc:mysql://XXX.XXX.XXX.XXX:3306/dbname","USER","PASSWORD","org.gjt.mm.mysql.Driver") 
> ```

`c=db.cursor() c.execute("INSERT INTO tablename values ('X','X','X')")`

在此之前，我从[这里](http://dev.mysql.com/downloads/connector/j/)（在桌面）下载并解压缩了文件

我通过这样做添加了类路径的路径

```
 export PATH=/home/XX/Desktop/mysql-connector-java-5.1.22 
```

当我运行脚本时，它给了我这个错误

> `zxJDBC.DatabaseError.driver [org.gjt.mm.mysql.Driver]`未找到

我做错了什么？驱动程序名称的名称是否正确？因为我只是在我看过的教程之一中复制了它。或者我是否正确安装了驱动程序？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:04:16.457

这就是我设法解决错误的方法：

1.  [在此处](http://dev.mysql.com/downloads/connector/j/)下载 JDBC 驱动程序

2.  将 tar.gz 文件解压缩到您想要的任何位置。

3.  您将在该文件夹中找到 mysql-connector-java-5.1.22-bin.jar。复制并粘贴到（在我的情况下）/%android-sdk%/tools/lib

4.  将 mysql-connector-java-5.1.22-bin.jar 的新位置添加到类路径

5.  做这样的脚本

> 从 com.android.monkeyrunner 导入 MonkeyRunner、MonkeyDevice、MonkeyImage
> 
> 从 com.ziclix.python.sql 导入 zxJDBC
> 
> db=zxJDBC.connect("jdbc:mysql://XXX.XXX.XXX.XXX:3306/dbname","USER","PASSWORD","com.mysql.jdbc.Driver")
> 
> c=db.cursor()
> 
> c.execute("INSERT INTO 表名值 ('X','X','X')")
> 
> db.commit()

希望对以后需要的人有所帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T12:07:44.377

你是如何运行 jython 的？如果您使用的是独立安装，即 java -jar jython.jar，那么从[Java 文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)...

> -罐
> 
> 使用此选项时，**JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。**

...你不能在类路径中添加任何东西。将所需的类重新打包到 jython jar 是一种方法，或者[这个答案](https://stackoverflow.com/a/10312444/1680088)有另一种解决方案 - 基本上也将 jython.jar 添加到类路径中（使用 -cp 或 CLASSPATH）并直接运行 org.python.util.jython 类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-10T12:01:39.487

我在 windows7 中遇到了示例问题，我通过以下方式解决了这个问题：

1.  下载 JDBC 驱动程序
2.  将 mysql-connector-java-ver-bin.jar 添加到环境变量中：例如： CLASSPATH : C:\xxx-path\mysql-connector-java-5.1.41-bin.jar

然后我解决了这个问题

# ios - 为什么我的 UISearchBar 的框架被 UISearchDisplayController 改变了

> ID：12907261
> 
> 赞同：3
> 
> 时间：2012-10-16T03:47:39.233
> 
> 标签：ios, uisearchbar, uisearchdisplaycontroller, uisearchbardelegate, uisearchbardisplaycontrol

我在我的 TopBar.m 中这样写 UISearchBar：

```
_tempSearchBar =[[UISearchBar alloc]initWithFrame:CGRectMake(44, 0, 320 - 44, 43)];
_tempSearchBar.barStyle=UIBarStyleDefault;
_tempSearchBar.placeholder=@"搜索";
[self addSubview:_tempSearchBar]; 
```

结果是这样的，没错。 ![在此处输入图像描述](../Images/39fe8e111903904d6b918ef83a454ea9.png)

然后我在另一个类中编写 UISearchDisplayController ，如下所示：

```
_topBar.tempSearchBar.delegate = self;    
_searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:_topBar.tempSearchBar contentsController:self];
[_searchDisplayController setDelegate:self];
[_searchDisplayController setSearchResultsDataSource:self]; 
```

UISearchBarDelegate 是这样的：

```
#pragma mark -
#pragma mark UISearchBarDelegate
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [_searchDisplayController setActive:YES animated:YES];
} 
```

当我单击 UISearchBar 时，它显示为这样，searchBar 的框架发生了变化。为什么？ ![在此处输入图像描述](../Images/f083ede45bde1ccde53ee1b3dfa49951.png)

当我取消 UISearchDisplayController 它是这样的： ![在此处输入图像描述](../Images/70ae4f5c3d5a27fbee8a774cbe87de6b.png)

为什么改变框架？宽度由 UISearchDisplayController 从 320-44 更改为 320？
谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T19:35:39.227

UISearchDisplayController 将搜索栏扩展到其父视图的宽度。我找到的最简单的解决方案是将搜索栏放在另一个具有我正在寻找的宽度的 UIView 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T10:20:06.203

searchBar 的框架是由 UIKit 改变的，所以我自己把 searchBar 的框架改回来了。

我在下面的委托中更改了 searchBar 的框架。

一个是 UISearchBar 的委托：

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar {
    [searchBar setFrame:CGRectMake(44, 0, 320 - 44, 43)];
} 
```

另一个是 UISearchDisplayController 的委托：

```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller{
    [controller.searchBar setFrame:CGRectMake(44, 0, 320 - 44, 43)];
    [self.searchDisplayController.searchResultsTableView setDelegate:self];
} 
```

它可以工作，我可以获得正确的框架，但是当我单击 searchBar 时，它会有点晃动。

这不是最好的方法，但它可以工作。有没有人有更好的方法？

更新：我已经调试了 UISearchBar 和 UISearchDisplayController 几个小时，但它有一个小错误：当我 endEditing 时 searchBar 的宽度将变为 320px，然后将变为我的宽度。我无法更改 cancelButton 的背景颜色。所以我写了一个自定义的 SearchDisplayController，有一个 UISearchBar 属性和一个 UITableView 属性。这对我来说很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T07:55:58.870

调用委托方法

```
- (void) searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
    [controller.searchBar setFrame:CGRectMake(0,31, 320 , 43)];
    [self.searchDisplayController.searchResultsTableView setDelegate:self];
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T05:56:05.653

**您可以使用- (void)setShowsCancelButton:animated**处理 searchBar 的取消按钮： 如果您不想显示取消按钮（因为取消按钮会更改 searchBar 的框架），只需在委托中编写

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{   

    [searchBar setShowsCancelButton:NO animated:YES];
} 
```

更新：

唯一可能的解决方案似乎是从 SearchBar 视图层次结构中找到取消按钮并将其隐藏。

```
for (UIView *possibleButton in searchBar.subviews)
{
    if ([possibleButton isKindOfClass:[UIButton class]])
    {
        UIButton *cancelButton = (UIButton*)possibleButton;
        cancelButton.hidden = YES;
        break;
    }
} 
```

# java - SambaStream Recurly 库被废弃了吗？

> ID：12907263
> 
> 赞同：0
> 
> 时间：2012-10-16T03:47:58.717
> 
> 标签：java, grails, recurly

### 背景

我接管的应用程序中有一个第三方库，称为`SambaJam-RecurlyLibrary-patched.jar`. 库的命名空间是`com.sambastream.recurly`.

我发现这个产品的唯一证据是一家名为 SambaStream 的初创公司，但[它们是](http://www.crunchbase.com/company/sambastream)一年多前被收购的。收购公司（Alfresco）似乎没有任何面向`recurly`产品的产品。

我还查看了[我发现的唯一其他 grails/recurly 库](http://grails.org/plugin/recurly)，认为它已重命名；但是在查看了命名空间和文件名之后，这似乎*不太可能*。

### 问题

有谁知道`com.sambastream.recurly`图书馆怎么了？

# ruby-on-rails - 优化数据库性能的常用和有用的技术有哪些？

> ID：12907264
> 
> 赞同：0
> 
> 时间：2012-10-16T03:48:16.013
> 
> 标签：ruby-on-rails, database, performance

我想知道我们通常如何优化数据密集型 Web 应用程序的数据库性能。是否有任何共同的要求，例如使用什么查询，如何快速处理关系，是否尽可能避免写入数据库等等。任何相关的工作。

或者更具体地说，有什么技术可以让 Ruby on Rails 数据库更高效？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:37:31.910

从分析你的瓶颈开始，NewRelic 是一个很好的工具来帮助你。为了提高读取性能，添加索引，急切加载和缓存是唾手可得的成果。查看[https://github.com/flyerhzm/bullet](https://github.com/flyerhzm/bullet)以帮助您快速加载和删除 N+1 个查询。

加快写作速度通常比较棘手。移动到队列可以毫无疑问地提供帮助，并且通常可以相当直接地实施。结帐[https://github.com/defunkt/resque](https://github.com/defunkt/resque)和[https://github.com/mperham/sidekiq](https://github.com/mperham/sidekiq)

# algorithm - DAG 与在网格中的 2 个节点之间寻找路径之间的关系

> ID：12907275
> 
> 赞同：0
> 
> 时间：2012-10-16T03:49:10.527
> 
> 标签：algorithm, graph, directed-acyclic-graphs

Hitchhiker 的算法指南讨论了以下几点：

```
1.6 Counting or Optimizing Good Paths
In an n × m grid, we want to go from the left bottom corner to the upper right corner. Each 
time we can only take a step to the right, or a step up. The number of ways we can do this 
is exactly (n+m)!/(n! * m!).  But what if we forbid some points on the grid? For example, if we   
forbid all the points above the line y = x. Some of the problems has answer in closed formula. 
But all of them can be solved quickly by dynamic programming.

Problem 1.6 Given a directed acyclic graph, how many paths are there from u to v? What is the longest one if there are weights on the edges? 
```

我的问题是这两个问题有什么关系？这里的网格和 DAG 之间有什么关系。在stackoverflow本身上，我读到如果我们只在网格中的两个方向上移动，那么我们可以假设它是一个有向无环图。这个问题可能听起来很幼稚，但我是一个初学者，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:55:30.453

网格中的每个点都是一个顶点。你有 m * n 个顶点。从每个顶点到表示其左侧点的顶点以及从每个顶点到表示其顶部点的顶点的边都有一条边。

这样 DAG 就代表了网格。

# sql - 查询第二次运行较慢

> ID：12907276
> 
> 赞同：0
> 
> 时间：2012-10-16T03:49:17.657
> 
> 标签：sql, sql-server, tsql

我有这个庞大的查询，我通常可以在 2 分钟内运行。但是，大约一分钟后，当我第二次运行它时，它会无限运行……所以我终止了该进程和我的 SSMS 会话。我没有在后台运行任何其他作业。

服务器上是否保留了其他内容？我认为就 SQL Server 的工作方式而言，我遗漏了一些东西。

谢谢。

编辑：这是 SQL（必须做一些混淆）

```
SELECT  pl.OrangeLocationID ,
    e.EventID ,
    cr.Title AS [Event Type] ,
    su.LastName + ', ' + su.FirstName AS FMR ,
    CONVERT(VARCHAR(20), pl.Report_Date, 101) AS [Report Entry Date] ,
    l.Name ,
    l.Number ,
    ll.SodaPopLocationID AS [SodaPop Location ID] ,
    l.Zip ,
    c.Channel ,
    pl.DT AS [ReportedDate] ,
    RIGHT(pl.DT_start, 8) AS [ReportedStartTime] ,
    RIGHT(pl.DT_end, 8) AS [ReportedEndTime] ,
    [CMS].dbo.dDateDiff(pl.DT_start, pl.DT_end) AS [ReportedDuration] ,
    pl.scheduled_date AS [ScheduledDate] ,
    RIGHT(pl.scheduled_start, 8) AS [ScheduledStartTime] ,
    RIGHT(pl.scheduled_end, 8) AS [ScheduledEndTime] ,
    [CMS].dbo.dDateDiff(pl.scheduled_start, pl.DT_end) AS [ScheduledDuration] ,
    e.HoursPaid AS [Rep Hours Worked] ,
    ISNULL(PP.[RepCount], 0) AS [RepCount] ,
    CASE WHEN [CMS].dbo.dDateDiff(pl.DT_start, pl.DT_end) = ( e.HoursPaid / ISNULL(PP.[RepCount], 1) )
         THEN [CMS].dbo.oa_HourDateDiff(pl.DT_start, pl.DT_end)
         WHEN [CMS].dbo.dDateDiff(pl.scheduled_start, pl.DT_end) = ( e.HoursPaid / ISNULL(PP.[RepCount], 1) )
         THEN [CMS].dbo.oa_HourDateDiff(pl.scheduled_start, pl.DT_end)
         ELSE ( e.HoursPaid / ISNULL(PP.[RepCount], 1) )
    END AS [FinalDuration] ,
    g.[Description] AS [OA Market] ,
    g.SodaPop_Region AS [SodaPop Region] ,
    g.SodaPop_Area AS [SodaPop Area] ,
    coup4 ,
    coupo ,
    coupo_e ,
    card_num ,
    promo ,
    promo_no ,
    promo_no_o ,
    highlight1 ,
    highlight2 ,
    highlight3 ,
    mgmt_reaction ,
    mgmt_reaction_e ,
    comm_p ,
    comm_n ,
    r.comments ,
    s_fname ,
    s_lname ,
    v_title ,
    ll.KeyAccountCorp AS [Key Account Corp.] ,
    interact_new + interact_rep AS [interact_total] ,
    samp_new + samp_rep AS [samp_total] ,
    purch_new + purch_rep AS [purch_total] ,
    23 / ( NULLIF(( interact_new + interact_rep ), 0) * 1.0 ) AS [Int_Crate] ,
    CASE WHEN sampletype = 11 THEN ( purch_new + purch_rep ) / ( NULLIF(( samp_new + samp_rep ), 0) * 1.0 )
         ELSE NULL
    END AS [Samp_Crate] ,
    coup1 + coup2 AS [coup_total] ,
    CASE WHEN coup1 + coupo > 0 THEN 1
         ELSE 0
    END AS [CoupDist] ,
    DATEPART(month, pl.DT) AS [Visit_Month] ,
    DATEPART(quarter, pl.DT) AS [Quarter] ,
    DATEPART(weekday, pl.DT) AS [Weekday] ,
    CASE DATEPART(weekday, pl.DT)
      WHEN 6 THEN 'Fri'
      WHEN 7 THEN 'Sat'
      WHEN 1 THEN 'Sun'
      ELSE 'Mon-Thurs'
    END AS [Weekday_Grouped] ,
    CASE WHEN dbo.Exception(pl.OrangeLocationID, 12) = 1
              OR dbo.Exception(pl.OrangeLocationID, 13) = 1
              OR dbo.Exception(pl.OrangeLocationID, 14) = 1 THEN 1
         ELSE 0
    END AS [EVolume] ,
    CASE WHEN dbo.DoesHaveException(pl.OrangeLocationID, 18) = 1 THEN 1
         ELSE 0
    END AS [CVolume] ,
    CASE WHEN dbo.eException(pl.OrangeLocationID, 9) = 1
              OR dbo.eException(pl.OrangeLocationID, 22) = 1 THEN 1
         ELSE 0
    END AS [Volumes] ,
    CASE WHEN dbo.eException(pl.OrangeLocationID, 8) = 1
              OR dbo.eException(pl.OrangeLocationID, 21) = 1 THEN 1
         ELSE 0
    END AS [Sales Price] ,
    CASE WHEN dbo.eException(pl.OrangeLocationID, 11) = 1 THEN 1
         ELSE 0
    END AS [Sample Volume] ,
    ISNULL(i.[NormalizedSold], 0) AS [EQBottlesSold] ,
    CASE WHEN ISNULL(purch_new, 0) = 0 THEN 0
         ELSE ISNULL(i.[NormalizedSold], 0) / ( purch_new + purch_rep )
    END AS [EQBottlesSoldPerPurch] ,
    ac.AvgSales ,
    ac.STDEVSales ,
    ( ISNULL(i.[NormalizedSold], 0) - ac.AvgSales ) / ac.STDEVSales AS [sl] ,
    ac.AvgPurchasers ,
    ac.STDEVPurchasers ,
    ( ISNULL(r.purch_new, 0) - ac.AvgPurchasers ) / ac.STrchasers AS [ZScore_Purchasers] ,  

    ac.AvgConversions ,
    ac.STDEVConversions ,
    ( ISNULL(( purch_new + purch_rep ) / ( NULLIF(( interact_new ), 0) ), 0) - ac.AvgConversions )
    / ac.STDEVConversions AS [ZScore_Conversions] ,
    ac.[AvgSalesPerPurchaser] ,
    ac.[STDEVSalesPerPurchaser] ,
    ( ISNULL(( CASE WHEN ISNULL(purch_new, 0) = 0 THEN 0
                    ELSE ISNULL(i.[NormalizedSold], 0) / ( purch_new + purch_rep )
               END ), 0) - ac.[AvgSalesPerPurchaser] ) / ac.[STDEVSalesPerPurchaser] AS [SalesPerPurchaser] ,
    ( ( ( ISNULL(i.[NormalizedSold], 0) - ac.AvgSales ) / ac.STDEVSales )
      + ( (ISNULL(( CASE WHEN ISNULL(purch_new + purch_rep, 0) = 0 THEN 0
                         ELSE ISNULL(i.[NormalizedSold], 0) / ( purch_new + purch_rep )
                    END ), 0) - ac.[AvgSalesPerPurchaser]) ) ) / 4 AS [core] ,
    ( ( (( ISNULL(i.[NormalizedSold], 0) - ac.AvgSales ) / ac.STDEVSales) ) / 4 ) + 3 AS [core] ,
    su.aaUserID ,
    l.LsocationID 
FROM [CMS_SodaPop].dbo.Schedule pl WITH ( NOLOCK )
    INNER JOIN [CMS_SodaPop].dbo.Report r WITH ( NOLOCK ) ON r.OrangeLocationID = pl.OrangeLocationID
    INNER JOIN [CMS].dbo.Users su WITH ( NOLOCK ) ON su.UserID = pl.Rep_FMR
    INNER JOIN [CMS].dbo.Locations l WITH ( NOLOCK ) ON l.LocationID = pl.LocationID
    INNER JOIN [CMS].dbo.OrangeReports cr WITH ( NOLOCK ) ON cr.RedID = pl.RedID                                                                 
    INNER JOIN [CMS_SodaPop].dbo.Events e WITH ( NOLOCK ) ON e.OrangeLocationID = pl.OrangeLocationID
    INNER JOIN [CMS_SodaPop].dbo.MarketList g WITH ( NOLOCK ) ON g.GroupID = pl.GroupID
    INNER JOIN [CMS_SodaPop].dbo.Locations ll WITH ( NOLOCK ) ON ll.LocationID = pl.LocationID
    LEFT JOIN [CMS_SodaPop].dbo.Channels c WITH ( NOLOCK ) ON ll.ChannelID = c.ChannelID
    LEFT JOIN ( SELECT  PLocationID ,
                        COUNT(DISTINCT UserID) AS [RepCount]
                FROM    [CMS_roll].dbo.rollItems WITH ( NOLOCK )
                WHERE   RedID = 154
                GROUP BY OrangeLocationID
              ) PP ON PP.OrangeLocationID = pl.OrangeLocationID
    LEFT JOIN ( SELECT  OrangeLocationID ,
                        SUM(NormalizedSold) AS [NormalizedSold]
                FROM    [Analysis].dbo.[vSodaPop_Retail_Inventory] WITH ( NOLOCK )
                GROUP BY OrangeLocationID
              ) i ON i.OrangeLocationID = pl.OrangeLocationID
    LEFT JOIN [Analysis].dbo.[vSodaPop_Calculations] ac WITH ( NOLOCK ) ON ac.[Quarter] = CASE WHEN DATEPART(MM,
                                                                                                    [DT]) IN ( 10,
                                                                                                    11, 12 ) THEN 4
                                                                                          END
                                                                           AND ac.[Year] = DATEPART(YY, pl.DT)
WHERE   pl.Activity = 1
    AND pl.RedID = 154
    AND pl.GroupID <> 444
    AND pl.[DT] < GETDATE()
    AND DATEPART(YY, [DT]) >= 2010
    AND ISNULL(i.NormalizedSold, 0) >= 0
    AND DATEPART(year, GETDATE()) = DATEPART(year, r.Insert_Date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:56:40.570

但是，必须查看查询才能真正深入了解..

您可以尝试将 OPTION (RECOMPILE) 添加到查询的末尾以强制它创建新的执行计划。

你在使用临时表吗？

游标未解除分配和关闭？

您可以查看[Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)以查看 2 次执行之间是否有任何不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:08:12.467

您确定它第二次没有被另一个进程阻止吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:06:17.877

如果你执行会发生什么

```
CHECKPOINT;
GO;
DBCC DROPCLEANBUFFERS;
GO;
DBCC FREEPROCCACHE;
GO; 
```

查询之间？这不是真正的解决方案，但有助于诊断。

# php - PHP 表单上的多个复选框选项

> ID：12907283
> 
> 赞同：1
> 
> 时间：2012-10-16T03:50:19.637
> 
> 标签：php, html, css, forms

已经用 PHP 构建了一个功能表单，但是我有一个带有 5 个选项的复选框（可以选择超过 1 个），但是电子邮件中只显示了 1 个选项。

**HTML：**

```
<label class="radio"><input type="checkbox" name="service" value="Web Design" />Web Design</label>
<label class="radio"><input type="checkbox" name="service" value="Graphic Design" />Graphic Design</label>
<label class="radio"><input type="checkbox" name="service" value="Brand Identity" />Brand Identity</label>
<label class="radio"><input type="checkbox" name="service" value="Online Marketing" />Online Marketing</label>
<label class="radio"><input type="checkbox" name="service" value="Other" />Other</label> 
```

**PHP: ($服务)**

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$website = $_POST['website'];
$service = $_POST['service'];
$description = $_POST['description'];
$inspiration = $_POST['inspiration'];
$budget = $_POST['budget'];
$deadline = $_POST['deadline'];
$formcontent=" From: $name \n Email: $email \n Phone: $phone \n Website: $website \n\n service: $service \n budget: $budget \n deadline: $deadline \n\n description: $description \n\n inspiration: $inspiration ";
$recipient = "myemail@gmail.com";
$subject = "Contact form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You, your information has been received.";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:58:50.853

如果您有多个具有相同名称的元素，那么您将只能读取其中一个，除非您使用数组语法，`[]`例如`name=service[]`，您将收到 $_POST['service'] 作为包含所有服务的数组。您可以使用[implode](http://www.php.net/manual/en/function.implode.php)将其转换为字符串。

```
$service = implode(' ', $_POST['service']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:26:24.247

在名称中使用数组，您将其命名为服务写入那里，服务 []。然后使用 multiple="multiple" tag.and 在 php 部分使用这个：

```
<?php
$services=implode(',',mysql_real_escape_string($_post['service']));
print_r($services);
?> 
```

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:53:30.667

将`name="service[]"`(Array)`name="service"`放在您的表单中，以获取多个选定的值作为数组。在检索时，您可以使用`implode`以下函数获取值

```
$services = implode(",", $_POST['service']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T03:55:29.727

用户数组名称而不是复选框中的简单名称，如下所示：

```
<label class="radio"><input type="checkbox" name="service[]" value="Web Design" />Web Design</label>
<label class="radio"><input type="checkbox" name="service[]" value="Graphic Design" />Graphic Design</label>
<label class="radio"><input type="checkbox" name="service[]" value="Brand Identity" />Brand Identity</label>
<label class="radio"><input type="checkbox" name="service[]" value="Online Marketing" />Online Marketing</label>
<label class="radio"><input type="checkbox" name="service[]" value="Other" />Other</label>

print_r($_POST['service']);
// output
Array
(
    [0] => Web Design
    [1] => Graphic Design
    [2] => Brand Identity
    [3] => Online Marketing
    [4] => Other
) 
```

# syntax-error - 我的 VHDL 代码出错，但我似乎无法弄清楚原因

> ID：12907284
> 
> 赞同：0
> 
> 时间：2012-10-16T03:50:23.233
> 
> 标签：syntax-error, vhdl, state-diagram

我为显示的状态图编写了一个 VHDL 代码（哎呀，因为我是新用户，所以无法发布图像）。但是，当我编译它时，它说有错误：在第 16 行：process(clk) -- 解析第 21 行时检测到语法错误：else -- 解析第 23 行时检测到语法错误：end if ; -- 解析时检测到语法错误。

这是我的代码：

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_arith.all;
use IEEE.std_logic_unsigned.ALL;
entity memory_controller is
port(clk: in std_logic;
 reset: in std_logic;
 bus_id: in std_logic_vector(7 downto 0);
 read_write, burst: in std_logic;
 oe, we, addr_1, addr_2: out std_logic
 );
end memory_controller;
architecture behavioral of memory_controller is
type statetype is (idle, decision, wr, rd1, rd2, rd3, rd4);
signal present_state, next_state : statetype;
process(clk) [LINE 16]
begin
if (rising_edge(clk)) then
    if (reset ='0') then
        present_state <= next_state;  
    else [LINE 21]
        present_state <= idle;   
    end if; [LINE 23]
end if;
end process;  
process(present_state, read_write, ready, burst)
begin
case present_state is
when idle => 
    oe => '0'; we=> '0'; addr_1=> '0'; addr_2=> '0';
if(bus_id = "11110011") then
    next_state <= decision;
else
    next_state <= idle;
end if;
when decision =>
    if (read_write = '1')
        then next_state <= rd1;
    else next_state <= wr;
end if;
when wr =>
we = '1';
    if (ready = '1')
then next_state <= idle;
else
next_state <= wr;
end if;
when rd1 =>
oe = '1';
addr_1 = addr_1 + '1';
addr_2 = addr_2 + '1';
if(ready = '0') then
next_state <= rd1;
if(burst = '0') then
next_state <= idle;
else next_state <= rd2;
end if;
when rd2 =>
oe = '1';
addr_1 = addr_1 + '1';
 addr_2 = addr_2 + '1';
if(ready = '1') then
next_state => rd3;
else
next_state => rd2;
end if;
when rd3 =>
oe = '1';
addr_1 = addr_1 + '1';
 addr_2 = addr_2 + '1';
if(ready = '1') then 
next_state => rd4;
else
next_state => rd3;
when rd4 =>
oe = '1';
addr_1 = addr_1 + '1';
addr_2 = addr_2 + '1';
if(ready = '1')
 then next_state => idle;
else next_state => rd4;
end if;
end case;
end process;
end behavioral; 
```

语法完全正确，我不明白为什么这是一个错误。有什么问题？

另外，我想在 ready =0、burst =0 和 ready = 0 和 burst = 1 的情况下使用断言语句，但我不太确定如何在主代码中实现它们。

我已经突出显示了第 16、21 和 23 行。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:18:18.670

VHDL 模块的形式通常是：

```
entity MODULENAME is
  <Port description>
end MODULENAME;

architecture behavioral of MODULENAME is
  <signal declarations and similar>
begin
  <synchronous and combinatorial logic statements>
end architecture behavioral; 
```

您缺少的是`begin`信号声明之后。也就是改变

```
architecture behavioral of memory_controller is
  type statetype is (idle, decision, wr, rd1, rd2, rd3, rd4);
  signal present_state, next_state : statetype;

  process(clk) [LINE 16]
  begin
    if (rising_edge(clk)) then 
```

至：

```
architecture behavioral of memory_controller is
  type statetype is (idle, decision, wr, rd1, rd2, rd3, rd4);
  signal present_state, next_state : statetype;

begin

  process(clk) [LINE 16]
  begin
    if (rising_edge(clk)) then 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:38:52.263

正如 Sonicwave 指出的那样，您`begin`在第一条语句之前缺少关键字。

还有几个语法错误。信号分配使用左箭头：

*   不是`oe => '0';`但`oe <= '0';`
*   不是`we = '1';`但`we <= '1';`

如果您使用带有直接编译器反馈的编辑器，您将节省大量时间。 ![在此处输入图像描述](../Images/6a919364a87071d8eb525274bc82aecb.png)

# ios - ios noob：为什么我的视图控制器不显示我在检查器中分配的标题

> ID：12907285
> 
> 赞同：0
> 
> 时间：2012-10-16T03:50:33.347
> 
> 标签：ios, xcode

我正在按照 O'Reilly Headfirst iPhone Development 2e 学习 iOS。

我正在尝试将标题分配给视图控制器，使其看起来像这样： ![在此处输入图像描述](../Images/7c825e9f292d0db3bd84cd32b3201774.png)

但是即使我设置了标题（如下图所示），当应用程序在模拟器中运行时，标题栏仍然是空白的。我确信我遗漏了一些非常明显的东西，但这都是全新的，所以不知道要在 IDE 中检查/设置哪个框来配置。我被困住了。我应该点击什么？

![在此处输入图像描述](../Images/f469a5c42f84ee7dba417f44bb43ab11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:57:08.113

您必须选择导航栏并定义标题。您正在定义 View Controller 标题，这不是一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:57:31.010

你所做的与书中告诉你的完全不同。它告诉您在 nib 中设置视图控制器；您正在使用故事板。它告诉你设置视图控制器导航项的标题；您将其设置在视图控制器本身上。换句话说，您正在做与书中所说的不同的事情，然后您抱怨某些不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:20:52.020

本身不是答案。

我也做了这个教程，发现这本书很有帮助。重新开始并使用笔尖。选择主从模板。但是，如果您想继续使用故事板，请遵循本教程，该教程告诉您如何创建带有向下钻取的表格视图：[http ://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part -1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

它会告诉你如何设置标题。如果您无法单击导航项并查看在属性窗口中设置“标题”的位置，我怀疑您创建的导航栏或表格视图不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:15:22.833

确保您选择了导航栏，据我所知，您现在选择了视图控制器而不是导航栏。您也可以双击导航栏来设置标题，它也会出现在您的属性检查器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T04:06:12.950

除了在界面构建器中设置之​​外，您也可以以这种方式设置。

如果您要为 uinavigation 栏定义标题，请使用 self.navigationItem.title = @"your title"; <-- 在 vi​​ewDidLoad 中

如果是视图控制器标题使用：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        // self.title = @"your title";
    }
    return self;
} 
```

如果您是 ios 新手，我建议您不要使用故事板。

# c++ - 什么时候调用 WM_PAINT？

> ID：12907286
> 
> 赞同：3
> 
> 时间：2012-10-16T03:50:39.713
> 
> 标签：c++, windows, image, winapi, bmp

究竟何时调用 WM_PAINT？我试图创建一个基于对话的老虎机应用程序，但我遇到了几个逻辑问题。我的申请将包括：

*   “旋转”按钮
*   退出按钮
*   三个BMP图像显示旋转的结果（硬币/心脏/士兵）

我将如何使用 BMP 图像显示旋转的最终结果？我是否正确使用 WM_PAINT 尝试显示图像，每次用户按下旋转按钮以显示新图像时我将如何刷新屏幕？我真的很感激帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:57:35.080

对话框通常`DefDlgProc`用作窗口过程。你不能处理`WM_PAINT`你的`DialogProc`（它不是一个窗口过程）。 [您可以将自己的窗口过程与对话框一起使用，](http://blogs.msdn.com/b/oldnewthing/archive/2003/11/13/55662.aspx)但这可能比它的价值更麻烦。

在对话框上显示位图的最简单方法是使用带有`SS_BITMAP`样式的静态控件。

您可以通过将[`STM_SETIMAGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760782%28v=vs.85%29.aspx)消息发送到静态控件来更改显示的位图。控件将负责使用新位图重新绘制自身。

如果您只想显示旋转的结果，这是可以的，但如果您想为卷轴的旋转设置动画，则效果不佳。要处理此问题，您可以创建自己的静态控件（即每个卷轴的窗口），以显示卷轴位图的一部分。

# perl - W3C 验证器显示错误

> ID：12907289
> 
> 赞同：0
> 
> 时间：2012-10-16T03:51:06.300
> 
> 标签：perl, w3c-validation

当我单击检查以验证它显示时输入任何 URL 后。

```
Can't locate SGML/Parser/OpenSP.pm in @INC (@INC contains: C:/xampp/perl/lib C:/xampp/perl/site/lib .) at C:/xampp/htdocs/validator/httpd/cgi-bin/check line 64.
BEGIN failed--compilation aborted at C:/xampp/htdocs/validator/httpd/cgi-bin/check line 64. 
```

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:08:41.317

您尚未安装[OpenSP](http://search.cpan.org/~bjoern/SGML-Parser-OpenSP-0.994/lib/SGML/Parser/OpenSP.pm)。您需要先安装它。我认为您正在使用`WebService::Validator::HTML::W3C`. 如果是这种情况并且您要验证多个文件，那么您应该获得 W3C 验证器的本地副本。[W3C 安装文档](http://validator.w3.org/docs/install.html)中很好地解释了安装本地验证器的过程。

# asp.net-mvc - 如何在 asp.net MVC 4 中创建带有子视图的视图

> ID：12907296
> 
> 赞同：1
> 
> 时间：2012-10-16T03:51:36.457
> 
> 标签：asp.net-mvc

我有一个控制器：

```
 public ActionResult Index()
    {
        return View();
    }
    public ActionResult Button1()
    {
        return View();
    } 
```

MySite/MyController/ 使用 3 个按钮和一个 div 呈现站点。按钮重定向到：MySite/Controller/button1 MySite/Controller/button2 MySite/Controller/button3

我希望当用户单击 button1 时，它会在 div 中使用 public ActionResult Button1() 的内容呈现 MySite/MyController/。

botton 2 和 3 也是如此。如果用户直接转到 MySite/Controller/button2 它应该从一开始就在 div 中呈现带有 ActionResult Button2 的索引。

是否有捷径可寻？我是否需要做 ajax 来替换 div 的内容，或者我应该只是将按钮制作为部分视图并将它们呈现在 4 个页面上。

如果使用 ajax 很容易，我希望页面不需要刷新，只需加载内容即可。但我不确定如果用户直接访问 MySite/Controller/button2，我将如何使其正确呈现页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:02:34.190

我在这里看到了一些有效的选项：

1.  让每个按钮加载一个包含其内容的新页面。
2.  将每个按钮内容作为 PartialView 包含在单个页面中，并使用 javascript 更改 div 内容而不使用 AJAX。
3.  不要包含任何按钮内容，并通过 AJAX 加载它们。
4.  包括第一个可见的按钮内容，并通过 AJAX 加载其他内容（如果这些是静态内容，那么您可以设计脚本来存储值，这样每个按钮只需加载一次。

就个人而言，我会尝试将 1 和 2、3 或 4 结合起来（取决于用例）。这样，网站的基本功能就可以在没有 javascript 的情况下工作，但您仍然可以获得 jQuery/AJAX 的好处。

# php - 使用 LAMP 连接到 MSSQL 服务器

> ID：12907298
> 
> 赞同：2
> 
> 时间：2012-10-16T03:51:49.590
> 
> 标签：php, sql-server, ubuntu, lamp, dts

我有一台 LAMP 服务器（Ubuntu 12.04、Apache/2.2.22、MySQL 5.5.24、PHP 5.3.10）。但是，我还想使用 Apache 和 PHP 连接到其他机器上的其他 MsSQL 服务器，其凭据为：

```
Server name: HENYO-GP-TEST\HENYO_GPTEST
IP: 192.168.1.36
Username: someuser
Password: somepass
Database: somedb 
```

我已经使用'apt-get install freetds-common freetds-bin unixodbc php5-sybase'安装了FreeDTS，然后通过'vim /etc/freetds/freetds.conf'对其进行配置，然后像这样编辑底部

```
# A typical Microsoft server
[192.168.1.36]
host = 192.168.1.36
port = 1433
tds version = 8.0 
```

但是在使用'tsql -S 192.168.1.36 -U someuser -P somepass -D somedb'进行测试时，出现以下错误。

```
locale is "en_PH.UTF-8"
locale charset is "UTF-8"
using default charset is "UTF-8"
Default database being set to FAC
Error 20009 (severity 9):
   Unable to connect: Adaptive Server is unavailable or does not exist
   OS error 111, "Connection refused"
There was a problem connecting to the server 
```

但我知道服务器已打开，因为我可以 ping 它。

是否可以使用 LAMP 连接到 MSSQL 服务器（位于其他机器上）？如果有可能？我在安装和配置上有什么错误？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:14:00.027

您的 SQL Server 在名为`HENYO_GPTEST`(`HENYO-GP-TEST`是服务器名称，并且`HENYO_GPTEST`是实例名称) 的实例上运行，但您没有在任何地方指定此实例名称。

我不熟悉 FreeTDS，所以我不知道*如何*指定，但是您需要指定此实例名称才能连接到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:07:42.157

ping 服务器并不一定意味着某个特定端口是打开的。它可能会响应 ICMP 请求，但不能保证给定端口是打开的。您是否确认远程服务器上的端口 1433 已打开，并且没有任何阻塞流向该端口的流量？

# actionscript-3 - 如何检测儿童尺寸变化动作脚本？

> ID：12907300
> 
> 赞同：0
> 
> 时间：2012-10-16T03:52:02.680
> 
> 标签：actionscript-3

如果我有一个容器，里面有儿童展示对象。容器的大小由孩子的大小决定。当大小改变时，我需要做一些事情来适应新的大小。

因为我没有找到检测它的那种事件，所以我使用 ENTER_FRAME 事件，这很愚蠢。保持最后一帧的大小，并与当前帧进行比较。可能在处理输入帧事件后大小发生了变化，因此在某些情况下，您可能会在下一帧中看到正确的结果。

我认为这不是一个好的组件解决方案。给我你的想法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:27:54.960

好吧，没有标准的解决方案。您可以创建一个自定义类，它会覆盖 width/height/x/y/scaleX/scaleY/scrollRect .. 以及其他一些属性的设置器。孩子们应该扩展这样的课程。

我使用了一个布尔值来防止它被多次分派，一帧后标志将被重置。

```
override public function set width(value:Number):void
{
    if (value !== super.width && !isNaN(Number(value)) this.dispatchResize();
    super.width = value;
}

override public function set height(value:Number):void
{ 
    if (value !== super.height && !isNaN(Number(value)) this.dispatchResize();
    super.height = value;
}

override public function set scaleX(value:Number):void
{ 
    if (value !== super.scaleX && !isNaN(Number(value)) this.dispatchResize();
    super.scaleX = value;
}

override public function set scaleY(value:Number):void
{ 
    if (value !== super.scaleY && !isNaN(Number(value)) this.dispatchResize();
    super.scaleY = value;
}

private var _hasDispatchedResize:Boolean;
protected function dispatchResize():void
{
   // do something
   if (!this._hasDispatchedResize)
   {
      this.dispatchEvent(new Event(Event.RESIZE));
      this._hasDispatchedResize = true;
      this.addEventListener(Event.ENTER_FRAME, handleEnterFrameOnce);
   }
}

private function handleEnterFrameOnce(event:Event):void
{
    this.removeEventListener(Event.ENTER_FRAME, handleEnterFrameOnce);
    this._hasDispatchedResize = false;
} 
```

现在，在容器类中你可以听一个`Event.RESIZE`孩子。您不确定该值是否实际发生了变化（如果电影剪辑上的帧发生变化），但在大多数情况下这会起作用。在调度调整大小之前，我在这个设置器中添加了一个额外的检查。这是否适合您的情况取决于具体情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:46:56.137

我要做的是调整孩子大小的任何函数，将您自己的调度事件添加到它将广播发生大小更改的事件。

```
//Never forget to import your classes.
import flash.events.EventDispatcher;
import flash.events.Event;

//Our custom listener listens for our custom event, then calls the function we
//want called when children are resized.
addEventListener("childResized", honeyIResizedTheChildren);

function resizingLikeFun(){
    datClip.width++;//they be resizin, yo.
    dispatchEvent(new Event("childResized"));//Our custom event
}

function honeyIResizedTheChildren(e:Event){
    trace("Giant Cheerios");
    //Whatever you want to do when the children are resized goes here.
} 
```

我假设该代码有一些事情，所以如果这并不完全适用于您，请告诉我。

# c# - 使用用户控件作为 DataTemplate 和绑定属性

> ID：12907303
> 
> 赞同：1
> 
> 时间：2012-10-16T03:52:20.220
> 
> 标签：c#, xaml, user-controls, windows-8

我设置了一个显示标题、图像、玩家集合和时间的用户控件。在我将其插入 GridView 并尝试将这些属性绑定到元素的值之前，这非常有效。

现在它报告了许多错误，特别是“无法识别或无法访问成员'X'”。这发生在我的绑定中：

```
<GridView.ItemTemplate>
    <DataTemplate>
        <local:GamePane Map="{Binding Map}" Players="{Binding Players}"/>
    </DataTemplate>
</GridView.ItemTemplate> 
```

我正在使用 DependencyProperties 来尝试让一切正常工作，如下所示：

```
 public string Map
    {
        get { return (string)GetValue(MapProperty); }
        set
        {
            SetValue(MapProperty, value);
        }
    }

    public static readonly DependencyProperty MapProperty =
    DependencyProperty.Register(
        "Map",                    
        typeof(string),           
        typeof(GamePane),         
        new PropertyMetadata(     
            "Unknown",            
            ChangeMap)
        ); 
```

但是，这使我的代码得以编译，即使在我通过绑定指定了不同的内容之后，它们现在也只是返回默认值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:29:51.417

我会回答这个问题，因为我发现我做错了。

在用户控件中，我将其数据上下文设置为自身。这导致了我遇到的问题。删除此数据上下文修复了所有问题。

# javascript - 单独通过 id 引用元素，没有 document.getElementById

> ID：12907308
> 
> 赞同：6
> 
> 时间：2012-10-16T03:53:12.973
> 
> 标签：javascript

> **可能重复：**
> [IE/Chrome：这里是 DOM 树元素全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)

我目前正在使用 jquery mobile 开发一个移动网站，我注意到一些有趣的事情（无论如何对我来说，因为我还是 js 的新手）。在函数内部，您可以仅使用 id 引用元素。

这是我使用的测试代码（在 chrome 22.0.x、firefox 16.0.1 和 safari 5.1.7 上）：

```
<!DOCTYPE html>
<html>
  <head></head>
  <body onload="tt()">
    <div id="abc">Test</div>
    <a id="cba">Test2</a>
  </body>
  <Script>
    function tt() {
        console.log(abc);
        abc.style.backgroundColor = "red";
        return cba;
    }
  </Script>
</html> 
```

没有 getElementById，没有 jquery 选择器，只有 id。一直都是这样吗？如果是这样，这是一个好习惯吗？为什么会这样？我在想函数必须有一个上下文，但它在哪里，是页面吗？

任何见解将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T04:00:03.087

你真的在做：

```
window.abc; 
```

这是 IE 开始的东西，实际上是一个糟糕的设计选择。

看到这个[非常相似的问题的好答案](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here#answer-3434388)

它确实是重复的，但标题并没有反映这一点。

在您的控制台中尝试此行以了解我的意思。

```
(function(){ console.log(this); })(); // logs the Window object 
```

# java - Java中的单独链接

> ID：12907311
> 
> 赞同：1
> 
> 时间：2012-10-16T03:53:26.903
> 
> 标签：java, arrays, list, hash

我们班正在学习哈希表，我的一个学习问题涉及我使用带有单独链接的哈希表创建字典。但是，问题是我们不允许使用 Java 提供的方法来创建哈希表。相反，我们的讲义提到，单独的链接涉及数组中的每个单元格，指向一个条目的链接列表。

因此，我的理解是我应该创建一个大小为 n 的数组（其中 n 是素数），并将一个空链表插入到数组中的每个位置。然后，我使用我的哈希函数对字符串进行哈希处理，并将它们插入到相应的链表中的正确数组位置。我创建了我的哈希函数，到目前为止，我的 Dictionary 构造函数接受了一个大小并创建了一个该大小的数组（实际上，大小为 4999，既是质数又是大的，如课堂上所讨论的）。我在正确的轨道上吗？我现在应该在每个位置插入一个新的链表，然后使用插入/删除方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:04:52.133

到目前为止，你所拥有的听起来不错。

请记住，对象引用数组`null`默认具有每个单元格，您可以编写插入和删除函数来处理它。如果您选择创建一个不包含数据的链表对象（有时称为*哨兵节点*），那么创建一个不可变（只读）实例以放入每个空槽中可能是有利的，而不是创建 4,999 个单独的实例`new`（大多数不保存任何数据的地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:08:39.520

听起来你在正确的轨道上。

一些额外的指针：

*   在实际使用之前，不值得在每个存储桶中创建 LinkedList。因此，您可以将存储桶保留为空，直到它们被添加到。只需记住编写访问器函数来考虑这一点。
*   立即创建一个大数组并不总是有效的。最好从一个小数组开始，跟踪使用的容量，并在必要时扩大数组（这涉及将值重新存储到新数组中）
*   让您的类实现整个`Map<K,V>`接口是一个好主意——只是为了获得一些实现其他标准 Java 集合方法的实践。

# objective-c - 显示为框的表情符号

> ID：12907314
> 
> 赞同：1
> 
> 时间：2012-10-16T03:54:09.317
> 
> 标签：objective-c, emoji

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:57.030

我希望这会对你有所帮助......我正在使用它，而**e106**是我的表情符号代码。

仅使用以下行替换**内容**行：

```
content = [NSString stringWithFormat:@"%C", 0xe106]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:14:08.660

`U+F44D`是 "Private Use Area" 中的 Unicode 字符`U+E000..U+F8FF`，因此这可能不是您要显示的字符。

另一方面，`U+1F44D`是“竖起大拇指”，因此可能是您的 Web 服务没有为大于`0xFFFF`.

根据[JSON RFC](http://www.ietf.org/rfc/rfc4627.txt)，不属于“基本多语言平面”的字符可以使用 UTF-16 代理对进行转义。对于`U+1F44D`字符，JSON Unicode 转义序列将是“\ud83d\udc4d”。

以下代码表明它通常可以工作：

```
const char *s = "{ \"content\": \"\\ud83d\\udc4d\", \"id\": 104, \"time\": 1350359055 }";
NSData *jsonData = [NSData dataWithBytes:s length:strlen(s)];
NSError *error;
NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
self.label.text = [jsonDict objectForKey:@"content"]; 
```

这会在标签中正确显示“竖起大拇指”。

但是您不必转义字符，Web 服务也可以只发送 UTF-8 序列。

# java - calling system command from java program fails to execute

> ID：12907315
> 
> 赞同：0
> 
> 时间：2012-10-16T03:54:09.317
> 
> 标签：java, terminal

Hi i tried to execute the following command from java code in linux, ls > out.txt

here is my code

```
try 
            { 
                Process p=Runtime.getRuntime().exec("ls > out.txt"); 
                p.waitFor(); 
                BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream())); 
                String line=reader.readLine(); 
                while(line!=null) 
                { 
                System.out.println(line); 
                line=reader.readLine(); 
                } 

            } 
            catch(IOException e1) {} 
            catch(InterruptedException e2) {} 

            System.out.println("Done"); 
```

I checked output file was not generated. However if I leave the output file part only run ls command it successfully executes without error and I can see the output.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:09:53.600

我认为这是因为管道字符`>`是一个 shell 运算符，而你的 exec 不是用 shell 创建的。

也许您要尝试做的事情更复杂，但是要列出目录，您可以只使用[File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)。然后你可以迭代它们并使用 PrintWriter 将它们保存到文件中。

```
File dir = new File("/some/path");
PrintWriter writer = new PrintWriter("output.txt");
for(File file : dir.listFiles()){
   writer.println(file.getPath());
}
writer.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:30:11.773

我所做的是用特定命令打开了一个新终端，这样我就可以处理输出将是连续事件流的命令，比如`adb logcat`android。我是按照[本](https://superuser.com/questions/174576/opening-a-new-terminal-from-the-command-line-and-running-a-command-on-mac-os-x)教程做的。Linux 用户会发现类似的东西。

# php - Passing variable values from Php to Javascript

> ID：12907319
> 
> 赞同：0
> 
> 时间：2012-10-16T03:54:52.960
> 
> 标签：php, javascript, jquery

```
 <!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript">
$(function () {
    var newanswer = <?php echo"$newanswer"; ?>
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Monthly Progress Reports'
            },
            subtitle: {
                text: 'Source: Sales Department'
            },
            xAxis: {
                categories: [
                    'Jan',
                    'Feb',
                    'Mar',
                    'Apr',
                    'May',
                    'Jun',
                    'Jul',
                    'Aug',
                    'Sep',
                    'Oct',
                    'Nov',
                    'Dec'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Range'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                shadow: true
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' Star';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
                series: [{
                name: '5 Star', //Blue
                data: [newanswer, 20, 30, 40, 50, 60, 70, 80, 90, 95, 10, 20]

            }, {
                name: '4 Star', //Red
                 data: [4, 20, 30, 40, 50, 60, 70, 80, 90, 95, 10, 20]

            }, {
                name: '3 Star', // Green
                data: [3, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]

            }, {
                name: '2 Star', //violet
                data: [2, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]

            }, {
                name: '1 Star', //lightblue
                data: [1, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]

            }]
        });
    });

});
        </script>
    </head>
<body>
<script src="js/highcharts.js"></script>
<script src="js/exporting.js"></script>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

<?php
$newanswer = 50;
?>

</body>
</html> 
```

is this possible to pass a php value to a javascript? i need to do it in order to put the value of the query of mysql into the graph and the graph is coded by java script. thx

the problem is this line

```
<?php $newanswer = 50; ?> 
```

cant pass the value on this line:

```
 var newanswer = <?php echo"$newanswer"; ?> 
```

so that the **50** value dont show in this line:

```
 data: [newanswer, 20, 30, 40, 50, 60, 70, 80, 90, 95, 10, 20] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:58:41.357

PHP没有JS的概念，所以你可以简单地......

```
data: [<?php echo $newanswer ?>, 20, 30, 40, 50, 60, 70, 80, 90, 95, 10, 20] 
```

但是，请注意，直接输出到 JS 代码块意味着您必须格外小心，不要在 JS 代码中引入语法错误。一个错误，整个代码块被 JS 解析器杀死。因此，作为一般规则，您应该始终在 PHP 中使用 json_encode() 来确保生成语法上有效的 JS。

即使它只是你输出的一个整数，这也适用——最好现在就养成 json 编码的习惯。它将为您节省很多痛苦：

```
data: [<?php echo json_encode($newanswer) ?>, 20, 30, 40, 50, 60, 70, 80, 90, 95, 10, 20] 
```

因此，即使 $newanswer 为 null 或未定义，您最终也会使用 valis JS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:58:33.647

这部分代码必须一直向上移动：

```
<?php
$newanswer = 50;
?> 
```

而这部分：

```
var newanswer = <?php echo"$newanswer"; ?> 
```

最好重写为：

```
var newanswer = <?php echo json_encode($newanswer); ?>; 
```

**编辑**

最后一部分可以写得更好，见[Marc B's answer](https://stackoverflow.com/a/12907352/1338292)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:59:15.673

将隐藏的值放入如下形式

```
<input type="hidden" name="newanswer" id="newanswer" value="<?=$newanswer; ?>" > 
```

现在使用`getElementById`你可以获得`$newanswer`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:02:25.657

您在代码末尾使用 PHP 变量**后**定义它。只需在将其传递给 JavaScript**之前定义它。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T13:14:27.567

ehco 隐藏字段的值

然后转到javascript并添加以下代码

```
var xi=(document.getElementById("aa")).value; 
```

# google-apps-script - Session.getActiveUser().getEmail() workaround for distributing grades from a spreadsheet

> ID：12907321
> 
> 赞同：1
> 
> 时间：2012-10-16T03:54:55.797
> 
> 标签：google-apps-script

My students all have a Google account, but use different emails (like john@hotmail.com).I tried to write a webapp that would get from my grade spreadsheet the row with the webapp's user's email address, so that each student would only see his or her grades. That webapp uses: Session.getActiveUser().getEmail()

This only works for users in the same domain as the script, I have to run the script as the webapp user (which is ok -- my students trust me that far!). Here is that restriction:

> Returns a User object describing the current user. In limited-privilege executions (such as in response to onOpen or onEdit), we only return the identity of the active user if both the user and the script owner are part of the same domain. This is to protect the privacy of consumer users, who may not want their email address exposed.

My script works, but I have to put the table of grades directly in the script and update the webapp each time I update my spreadsheet. Yeck!

I can't share my grade spreadsheet because then they would see each other's grades. So now I am brainstorming other workarounds.

Here is one example:

1.  Share a second spreadsheet, copy the grades from my spreadsheet with an update function that encrypts the grades. The webapp sucks up the data from the shared spreadsheet and decrypts. Now a simple update of a spreadsheet is all that is needed -- the webapp doesn't need to be republished. (There are some simple encryption options, like base64encode with maybe a little scrambling...?)

2.  Find a way to automatically update the webapp and republish. (Don't know how to do that.)

3.  ????

Any suggestions?

PS: if 1 seems feasible, some suggestions for simple encryption code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:42:33.037

> There are some simple encryption options, like base64encode with maybe a little scrambling...?

Yes, the GAS has functions to encode/decode using the Base64 algorithm - [Utilities.base64Encode](https://developers.google.com/apps-script/class_utilities#base64Encode), [Utilities.base64Decode](https://developers.google.com/apps-script/class_utilities#base64Decode), but I think, it is not an option even with `a little scrambling`. Students are very clever. My opinion is to use a JavaScript implementation of a encryption algorithm, for instance the [Blowfish](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29). There are a number of its implementations on JavaScript ([here](http://code.google.com/p/javascript-bcrypt/) and [here](http://aam.ugpl.de/aamcrypt.js)). These implementations should work in the GAS environment without any changes or with small modifications. It is should be sufficient to copy and paste the source code to the GAS Editor.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:44:15.643

我不明白您为什么说*“我的脚本有效，但我必须将成绩表直接放在脚本中，并在每次更新电子表格时更新 web 应用程序”*

例如，使用 flextable 创建一个显示电子表格一部分的 web 应用程序非常容易。该应用程序的每个实例都会自动包含与用户相关的内容，您只需更新主电子表格即可获得所需内容。我不知道你为什么要为此编码数据......我认为通过谷歌登录的用户识别应该足够了，不是吗？ [这是此类 web 应用程序的示例](https://script.google.com/macros/s/AKfycbyxFoCafXmjs79LsKwKFKydEtXJXg_wnvCHQIiAntiF-0vj56s/exec)，您看到的数字取自主电子表格中的特定列（对于此公共副本，我将应用程序设置为以“我”身份运行以避免授权过程，但实际上每个用户都被识别并且只看到他的数据）。

电子表格本身和代码[可在此处查看](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dG43N0FHXzN1cVFqZnQyekpSYzRtZ1E)，如果您需要更多信息，请随时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:23:52.847

是否可以将工作表与 scriptDB 同步？然后查询user=loginID所在的数据库

# php - Looping through an array in Wordpress

> ID：12907323
> 
> 赞同：0
> 
> 时间：2012-10-16T03:55:08.890
> 
> 标签：php, wordpress, image-gallery

I have created a custom post type with an image gallery upload. Now I am trying to display the gallery on the front end. This is what I have so far that works to display 1 image, but if multiple images are uploaded all the urls get stuck in the src tag. So I'm guessing I should loop through that array and spit out each one separately? Would that be the route to go and if so how can I accomplish this? Any help is appreciated.

```
<?php if (have_posts()) :  while (have_posts()) : the_post(); ?>

<?php
echo '<img src="'.get_post_meta($post->ID, 'gallery-upload', true).'">';    
?>

<?php endwhile; else: ?>
    <p><?php _e('No posts were found. Sorry!'); ?></p>
<?php endif; ?> 
```

EDIT:

This is what is being returned:

```
<img src="http%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F800x400-volbeat-mock1.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F1574_2_1.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F1576_2_1.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F1576_4_1.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F2244_2_1.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F300789_2349086884438_1168050047_32154880_1451576942_n.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F373795_278881222158106_278880528824842_834930_1454244548_n.jpeg%2Chttp%3A%2F%2Flocalhost%3A8888%2Fandreasmoulis%2Fwp-content%2Fuploads%2F2012%2F10%2F20110909-121141.jpeg"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:02:36.057

查看[函数引用](http://codex.wordpress.org/Function_Reference/get_post_meta)，get_post_meta 通常返回一个数组，除非第三个参数设置为 true。这样的事情应该或多或少起作用。

```
<?php
foreach(get_post_meta($post->ID, 'gallery-upload') as $meta) {
  foreach(explode(',', $meta) as $src) {
    echo '<img src="'.htmlentities($src).'">';
  }
}
?> 
```

编辑：显然画廊上传存储为逗号分隔的值。更新了我上面的代码片段，*希望能*解决这个问题。

# pointers - 从 Fortran 90 中的指针别名释放指针目标

> ID：12907329
> 
> 赞同：3
> 
> 时间：2012-10-16T03:56:01.053
> 
> 标签：pointers, memory-management, fortran

编码

```
program asd

real,pointer        :: a,b,c

allocate(a)
a=2.0
b=>a
c=>a
deallocate(b) !
print *, associated(c,target=a) ! T

end program 
```

使用英特尔编译器返回 T。我得出结论，“b”不是“a”的完整别名，因为我无法释放“a”占用“b”。所以我的问题是：如果我用

```
function ptr
  real,pointer   :: var,ptr
  allocate(var)
  ptr=>var
end function 
```

调用此函数后是否可以释放 var？

非常感谢-

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T04:30:53.407

[该标准](http://j3-fortran.org/doc/2003_Committee_Draft/04-007.pdf)说（第 6.3.3.2 节）：

> ...解除分配指针目标会导致与目标或目标的一部分关联的任何其他指针的指针关联状态变为未定义。

此外，在第 16.4.2.1 节中，它说：

> 指针可能具有关联、解除关联或未定义的指针关联状态。

在注释 16.3 中指出：

> 来自模块程序单元的指针可以通过使用关联在子程序中访问。此类指针的生命周期大于子程序中声明的目标，除非保存此类目标。因此，如果这样的指针与本地目标相关联，则当子程序定义的过程完成执行时，目标可能会不复存在，从而使指针“悬空”。本标准认为此类指针具有未定义的关联状态。它们既没有关联也没有分离。在重新建立其状态之前，不得在计划中再次使用它们。不要求处理器能够检测指针目标何时停止存在。

所有这一切都是说`.TRUE.`您从英特尔获得的结果是特定于编译器的，因为`c`具有未定义的关联状态，编译器可以以他们想要的任何方式报告。如果你试图通过 访问`a`，`c`你会得到一个内存错误（或者即使它有效，它是未定义的并且不是保证）。

同样，您的示例函数同样危险，因为无法保证`var`函数返回时会存在，这意味着`ptr`函数结果再次未定义。同样，如果您尝试`var`通过 的结果进行访问`ptr`，您将再次遇到内存错误。

如果您希望您的功能正常工作，它需要如下所示：

```
function ptr
  real, pointer, save :: var
  real,pointer   :: ptr
  allocate(var)
  ptr=>var
end function 
```

Of course, this begs the ultimate question -- why `ALLOCATE` pointers? It's much safer to use `ALLOCATABLE` for the target and give it the `TARGET` attribute.

# jquery - 如何使用jquery在页面加载后动态加载元素

> ID：12907330
> 
> 赞同：-2
> 
> 时间：2012-10-16T03:56:03.277
> 
> 标签：jquery, html, css

嗨，我在获取使用数据库值动态加载的 DOM 元素时遇到问题，并且在页面加载期间它不可用。因为在页面加载过程中会延迟几分之一秒。因此 JQuery 在页面加载期间无法识别该元素。

加载后如何访问元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T04:00:44.123

使用下面的代码段，并在其中编写您的代码

```
$(document).ready(function() {
//Logic goes here
} 
```

这将在加载事件后运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:03:03.473

如果您谈论的是最初加载到 DOM 中的元素，请将您的代码包装在[ready](http://api.jquery.com/ready/)函数中：

```
$(document).ready(function(){
//Code here
} 
```

这确保了在 DOM 完全加载之前不会执行您的 javascript 代码。

如果您使用其中一个 jQuery [ajax](http://api.jquery.com/jQuery.ajax/)调用动态加载元素，您可以提供几个回调来了解何时完成。

一些动态加载的元素在将 DOM 事件绑定到它们时可能需要[实时](http://api.jquery.com/live/)事件处理程序。例如：

```
$(".myElem").live("click", function(){
//This event binds to elements loaded dynamically, too
} 
```

# post - 无休止的滚动问题 tumblr，页面底部的帖子“堆栈”

> ID：12907331
> 
> 赞同：0
> 
> 时间：2012-10-16T03:56:09.327
> 
> 标签：post, scroll, tumblr, infinite, stacked

这是问题所在：我正在使用的 tumblr 主题是此页面 (http://themes.ville-noire.com/) 上的 NTA 3 列选项，它说我应该有 3 列，无限滚动并且能够使用横幅。但是我博客（http://incandescending.tumblr.com/）页面底部的早期帖子并没有无限滚动，而是有点堆叠，相互阻挡。

您对为什么会发生这种情况以及我可以尝试解决的问题有什么建议吗？我正在尝试学习和理解一点编码的工作原理，但我的知识/研究/尝试到目前为止还没有成功 - 任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:39:37.063

看起来帖子没有设置特定的高度，所以它们“堆叠”并首先相互阻挡的原因是因为每个帖子的高度在它们完成加载之前没有定义。

# java - GCM如何定位用户电话

> ID：12907334
> 
> 赞同：7
> 
> 时间：2012-10-16T03:56:40.540
> 
> 标签：java, android, cloud, google-cloud-messaging

我的问题是 Google Cloud Messaging 如何知道将消息发送到哪里？它是否通过IP地址工作？是否有时间间隔在手机上运行某个功能以将手机的当前位置或 IP 地址发送到 Google 服务器？有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:17:54.567

Google 不需要知道您设备的 IP 地址。相反，您的设备会连接到 Google，使用 Google 用于身份验证的任何协议来识别自己，然后 Google 会使用已建立的连接向您的设备发送通知。

当您的手机从一个 IP 地址更改为另一个 IP 地址时，它只会与 Google 建立新连接，然后 Google 会使用该新连接来发送通知。在您断开连接后，Google 甚至不需要跟踪您的 IP 地址，因为一旦您断开连接（例如在公共 wifi 系统上），其他人可能会开始使用相同的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:15:07.270

这是解释 GCM 工作的链接[http://developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:20:43.103

每个 GCM 客户端都会创建一个唯一的设备令牌，您需要将其发送到 GCM 服务器以将推送通知发送到客户端。

在这里您可以找到解释 GCM 的[链接。](http://www.sherif.mobi/2012/07/gcm-php-push-server.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T10:52:10.790

**GCM 通过运行自己的服务来处理推送通知。**

此服务使用 GCM 创建的应用令牌 ID 向 Google Cloud Server (GCM) 请求您的应用创建的任何待处理通知，并将响应与来自您的令牌 ID 的所有通知一起发送回您的应用，这适用于所有使用 GCM 的应用程序。

因此，基本上如果您有 5 个应用程序实现了 GCM，那么它们的令牌 ID 将由该服务一起发送，GCM 将检查是否有任何通知可用于发送的令牌 ID 并将它们作为响应发送。

**阅读这个帖子，这个人已经解释过了，GCM 对于新的应用程序构建是可靠的！**

[http://eladnava.com/google-cloud-messaging-extremely-unreliable/](http://eladnava.com/google-cloud-messaging-extremely-unreliable/)

# android - 布局在设备上重复，但在相对布局中添加图像时在模拟器上看起来不错

> ID：12907345
> 
> 赞同：3
> 
> 时间：2012-10-16T03:57:46.953
> 
> 标签：android, android-layout, android-imageview, android-image

让我试着用我在这里想要的东西清楚地解释一下。我有一个包含标题图像及其下方内容的 RelativeLayout。

现在，当我在它下面有一个标题图像和一个列表视图时，页面正确地适合设备中的屏幕，布局不会重复。

但是当我将图像放在标题图像下方时，布局会在设备中重复。这意味着我可以在设备中看到 2 个标题图像。某些页面，我可以看到不应该存在的一半标题图像（重复的标题图像）。但是，在模拟器中，所有页面看起来都很好，并且很适合屏幕。

我尝试更改为LinearLayout，LinearLayout内的RelativeLayout，Relative Layout，它给了我相同的结果。我希望有人能告诉我为什么会这样。谢谢。

附上我的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/bg" >

<ImageView
android:id="@+id/header"
android:contentDescription="@string/image"
android:src= "@drawable/header"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:adjustViewBounds="true"
android:scaleType="centerCrop"/>

<RelativeLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerInParent="true"
android:orientation="vertical" >

<ImageView
android:id="@+id/journal"
android:layout_width="150dp"
android:layout_height="150dp"
android:layout_alignTop="@+id/kick"
android:adjustViewBounds="true"
android:contentDescription="@string/image"
android:padding="10dp"
android:src="@drawable/favourite_journal" />

<ImageView
android:id="@+id/kick"
android:layout_width="150dp"
android:layout_height="150dp"
android:layout_toRightOf="@+id/journal"
android:layout_below="@+id/header"
android:adjustViewBounds="true"
android:contentDescription="@string/image"
android:padding="10dp"
android:src="@drawable/favourite_kick" />

<ImageView
android:id="@+id/labour"
android:layout_width="150dp"
android:layout_height="150dp"
android:layout_below="@+id/journal"
android:layout_alignLeft="@+id/journal"
android:adjustViewBounds="true"
android:contentDescription="@string/image"
android:padding="10dp"
android:src="@drawable/favourite_labour" />

<ImageView
android:id="@+id/share"
android:layout_width="150dp"
android:layout_height="150dp"
android:layout_below="@+id/kick"
android:layout_alignLeft="@+id/kick"
android:adjustViewBounds="true"
android:contentDescription="@string/image"
android:padding="10dp"
android:src="@drawable/favourite_share" />
</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:57:58.360

我设法解决了它。我必须将内部RelativeLayout 的layout_width 和layout_height 设置为fill_parent。

```
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_below="@+id/header"    
android:orientation="vertical"> 
```

感谢@Ziteng Chen 提示我这个职位。

```
android:layout_below="@+id/header" 
```

还有@BobbiHoddi 建议您删除adjustViewBounds。它有助于解决我在图像中遇到的其他错误。

```
android:adjustViewBounds="true" 
```

# html - SVG不显示

> ID：12907367
> 
> 赞同：0
> 
> 时间：2012-10-16T04:02:12.583
> 
> 标签：html, image, svg

我有一个没有显示的`<image>`内部。`<svg>`我检查了 SVG 规范和几个 SVG 演示。此代码应该可以工作，但图像没有出现。有任何想法吗？

```
<svg width="415" height="240">
   <g transform="translate(115, 0)">
      <image href="img/test.png" width="143" height="15" x="0" y="0"></image>
   </g>
</svg> 
```

图片href URL是正确的:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:19:49.900

你不见了`xlink`

`<image xlink:href="img/test.png" width="143" height="15" x="0" y="0"></image>`

# javascript - 对多个对象使用“this”

> ID：12907378
> 
> 赞同：1
> 
> 时间：2012-10-16T04:03:48.167
> 
> 标签：javascript, this

我正在使用 facebook api 和 phonegap 构建一个backbone.js 应用程序。

在我的用户模型中，我试图附加一个监听器以查看用户何时登录。

```
Myapp.Models.User = Backbone.Model.extend({
    初始化：函数（）{
           FB.Event.subscribe('auth.login', function(response){
            console.log('登录事件');
            this.get_me();

        });
    },
    获取我：函数（）{
    console.log('使用api获取用户信息');
    }
});

```

当然，当我这样做时，`this`（我相信）附加到 FB，而不是 Myapp。我试过了

```
var this_user = 这个；
 FB.Event.subscribe('auth.login', function(response,this_user){
   this_user.get_user();
}

```

但这仍然失败。

我已经阅读了各种关于如何使用的博客`this`，但在处理多个对象以及如何引用原始对象时似乎无法获得我真正理解的博客。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:06:20.947

你有什么应该工作，但请注意这部分：

```
var this_user = this;
 FB.Event.subscribe('auth.login', function(response,this_user){
   this_user.get_user();
} 
```

`this_user`参数不应在匿名函数声明中。那是因为 Facebook 从来没有在回调中传递第二个参数，所以它最终是`null`; 事实上，你应该已经收到了关于`this_user.get_user()`声明的 JS 错误。

```
var this_user = this;
 FB.Event.subscribe('auth.login', function(response){
   this_user.get_user();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:05:48.840

```
var this_user = this;
 FB.Event.subscribe('auth.login', function(response,this_user){
   this_user.get_user();
} 
```

该`this_user`查找不会解析到其父范围，因为您有一个同名的参数。改变一个或另一个。

# html - 如何使顶部带有文本/按钮的图像可链接

> ID：12907384
> 
> 赞同：0
> 
> 时间：2012-10-16T04:05:08.217
> 
> 标签：html, css

我有一个 div，其中包含一个带有文本的图像和一个覆盖在它上面的按钮。文本是绝对定位的，将覆盖整个图像。在文本的末尾也将是一个按钮。我试图让图像成为一个链接，但我在这样做时遇到了问题。

我目前的解决方案涉及将我的图像和文本都包装在一个`a`标签中。这不起作用，因为当用户尝试单击按钮时，他们会单击链接而不是按钮。我也尝试将我的 img 标签包装在标签内`a`，但由于我的文本位于顶部，因此该链接将永远不会被注册为可点击。

[http://jsfiddle.net/NxtWa/](http://jsfiddle.net/NxtWa/)

HTML：

```
<div class="tile">
    <a href="http://www.google.ca">
        <img src="http://www.placehold.it/480x260">
        <div class="text">
            <p>Long long paragraph</p>
            <button>Button</button>
        </div>
    </a>
</div> 
```

CSS：

```
.tile { position:relative; width:480px; height:260px; }
.tile .text { position:absolute; top:0px; left:0px; width:480px; height:260px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:08:33.957

~~我假设您使用 z-index 属性将文本和按钮定位在图像上。~~您必须使用合适的事件观察器/事件处理程序模式将点击事件向下渗透到图像，以便通过它们处理文本和按钮的适当点击，并传递那些需要进入图像的点击通过图像/按钮的事件处理程序进一步。

与可能的解决方案相关的问题：[JavaScript pass mouseenter event to element that is under another element](https://stackoverflow.com/questions/7898938/javascript-pass-mouseenter-event-to-element-that-is-underneath-another-element)

在更多的研究中，这种技术被称为事件冒泡（对不起，这个词早些时候我忘记了）。有关如何完成此操作的其他帮助@ [https://stackoverflow.com/a/1026101/17716](https://stackoverflow.com/a/1026101/17716)

# properties - 有没有办法在 PowerBuilder 中使用 *.properties 文件

> ID：12907386
> 
> 赞同：1
> 
> 时间：2012-10-16T04:05:29.450
> 
> 标签：properties, powerbuilder

有没有办法像我们在 Java 中那样使用 PowerBuilder 中的任何类型的资源包来读取属性文件？我尝试搜索几个地方，但找不到相同的解决方案。如果有人可以分享您对此的想法，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:40:26.883

在没有“使用”属性文件在 Java 中的含义的情况下，您至少可以使用 FileOpen()、FileRead() 和 FileClose() 函数集来读取数据。

祝你好运，

特里

# ibm-mq - Utility to load files to a MQ Queue

> ID：12907387
> 
> 赞同：4
> 
> 时间：2012-10-16T04:05:34.270
> 
> 标签：ibm-mq

I want to load files in the file system to a WebSphere MQ Queue. There are couple of support pacs - [Q Program](http://www-01.ibm.com/support/docview.wss?uid=swg24000647) and [MO03: WebSphere MQ Queue Load / Unload Utility](http://www-01.ibm.com/support/docview.wss?uid=swg24009368)

that come close but they mandate the files to be in a specific format. I have the messages which are XML files and want a quick way to load them to a queue. The number of files run into a few hundred so looking for an utility to do this job instead of having to write an application to achieve this.

I could not locate some general purpose application to achieve this. So looking for some help here

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T13:11:25.953

Why do you believe that the Q program requires a specific file format? According to the `README.TXT` file, the following options are available:

```
-f<filename>
          Input file.
          Each line of the file will be put to output queue as a different
          message.
          See "Z/OS FILE NAME FORMAT EXAMPLES" for specific z/OS details.

-F[+]<filename>
          Input/output file.
          Entire file will be put to the output queue as a single message.
          If '+' is specified the dataset attributes will be retained if
          the output dataset exists - z/OS only.
          See "Z/OS FILE NAME FORMAT EXAMPLES" for specific z/OS details. 
```

So if you specify `-F` (without the `+`) all lines in the the XML file are loaded into a single message. You can also specify the message options using the `-a` parameter:

```
-a<Opts>  Sets message attributes when put to the output queue

          n   - forces non-persistence
          p   - forces persistence
          q   - uses queue default persistence
          d   - put a datagram message type
          r   - put a reply message type
          R   - put a request message type
          t   - put a report message type
          x   - don't treat lines starting with '#' as special 
```

Although the Q program will interpret files by default, note that the `-ax` option above tells it to ignore lines with `#` which it would ordinarily interpret as commands. This allows you to load XML files or source code with comments or even binary files such as a PDF or JPG.

Was there a specific limitation in Q that you are unable to work with? If so, it would be helpful to know what that is so we might point you to something that would better fit your purpose.

**UPDATE**

Responding to Spyro's comments, Q is *not* limited to 1000 characters. Here's an example where the README file from the Q distribution is written to a single message and read back.

```
D:\WMQ\MA01>q -m JMSDEMO -OSYSTEM.DEFAULT.LOCAL.QUEUE -FREADME
MQSeries Q Program by Paul Clarke [ V6.0.0 Build:May  1 2012 ]
Connecting ...connected to 'JMSDEMO'.

D:\WMQ\MA01>echo dis q(SYSTEM.DEFAULT.LOCAL.QUEUE) curdepth | runmqsc JMSDEMO
5724-H72 (C) Copyright IBM Corp. 1994, 2011\.  ALL RIGHTS RESERVED.
Starting MQSC for queue manager JMSDEMO.

     1 : dis q(SYSTEM.DEFAULT.LOCAL.QUEUE) curdepth
AMQ8409: Display Queue details.
   QUEUE(SYSTEM.DEFAULT.LOCAL.QUEUE)       TYPE(QLOCAL)
   CURDEPTH(1)
One MQSC command read.
No commands have a syntax error.
All valid MQSC commands were processed.

D:\WMQ\MA01>q -m JMSDEMO -dl -iSYSTEM.DEFAULT.LOCAL.QUEUE
MQSeries Q Program by Paul Clarke [ V6.0.0 Build:May  1 2012 ]
Connecting ...connected to 'JMSDEMO'.
MQGET 24309 bytes
============================================================================
Message Descriptor (MQMD)
Report       :00000000
Message Type :8 (Datagram)
Format       :'MQSTR   '
Priority     :0
Persistence  :0 (Not Persistent)
Message Id   :A M Q   J M S D E M O           . . . R   . * .
              414D51204A4D5344454D4F20202020201DDEA052200B2A02
              'AMQ JMSDEMO     ...R .*.'
ReplyToQ     :'                                                '
ReplyToQMgr  :'JMSDEMO                                         '
 ----------------------------------------------------------------------
|                                                                      |
|                                                                      |
|  DESCRIPTIVE NAME WebSphere MQ Q Program                             |
|                                                                      |

------- 8><-------------------------------------------------------------
REMAINDER OF MSG OUTPUT OMITTED FOR BREVITY. PRINT-OUT RESUMES...
------- 8><-------------------------------------------------------------

No more messages.

D:\WMQ\MA01> 
```

Note the header lines where the message was printed. The `-dl` option tells Q to print the message length which, in this case, was 24309 bytes. I downloaded the current version to perform this test so this is accurate as of 7 December 2013.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:30:49.670

If you are looking for loading the file to queue.. Its easy to work with RFHUtil s/w or application.

In RFHUtil you can easily load the file to MQ and clear the Queue, purge ect...

Many more options are provided .

# mvvm - Silverlight 中的 MVVM 和导航

> ID：12907394
> 
> 赞同：0
> 
> 时间：2012-10-16T04:05:59.130
> 
> 标签：mvvm, navigation, silverlight-5.0

假设我正在使用 MVVM 方法（Silverlight）

我正在用命令处理我的所有按钮。

假设我有一个用于导航到某个页面的按钮，假设我们在网格中选择了一个客户并想要导航到客户的详细信息视图。

我可以用 DelegateCommand 处理这个按钮吗？如何？我可以处理来自 ViewModel 的导航吗？我是否被迫从代码隐藏处理导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:04:54.630

开始了：

xml:

```
<Button Command="{Binding GoToCustomerDetailsPage}" Content="Customer Details"/> 
```

视图模型：

```
private INavigationService _navigationService;

public ViewModel(INavigationService navigationService)
{
    _navigationService=navigationService;
}
public ICommand GoToCustomerDetailsPage
{
    get{
        return new DelegateCommand(GoToCustDetailsPage,CanGoToCustDetailsPage);
        }
}

private void GoToCustDetailsPage()
{
    _navigationService.Navigate(new Uri("/CustomerDetails", UriKind.Relative));
}

private bool CanGoToCustDetailspage()
{
   return true;//Or some sensible code that determines if this is sensible.
} 
```

基本上，命令按正常方式绑定到按钮。该命令是视图模型上的一个属性。执行命令时，它只需调用视图模型中的私有方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:25:30.590

这里 INavigationService 不可用。如果我们添加命名空间 System.Windows.Navigation 会出错。

# visual-c++ - 如何绕过 V8::Object 中的 AccessorGetter 拦截器

> ID：12907395
> 
> 赞同：2
> 
> 时间：2012-10-16T04:06:05.797
> 
> 标签：visual-c++, v8

我如何绕过 AccessorGetter 拦截器？

```
Handle<FunctionTemplate> mars_obj_templ = FunctionTemplate::New(createMars);  
Handle<ObjectTemplate> mars_obj_proto = mars_obj_templ->PrototypeTemplate();  
Handle<ObjectTemplate> mars_obj_inst = mars_obj_templ->InstanceTemplate();  
mars_obj_inst->SetInternalFieldCount(1);
mars_obj_inst->SetAccessor(String::New("name"),GetName,SetName);

Handle<Value> GetName(Local<String> property,const AccessorInfo &info){
    Local<Object> self = info.Holder();
    //return what, if self->Get(property) will Recursive call
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:03:26.677

根据我的经验，你不能。但是，如果您使用`SetNamedPropertyHandler`on注册一个通用拦截器，`ObjectTemplate`您可以安全地调用`self->Get`而不会以递归结束。将请求的属性与您感兴趣的属性进行比较，您可以处理它们并转发其他调用。

# doctrine - 在 Doctrine 中使用 group by 和 order by

> ID：12907398
> 
> 赞同：0
> 
> 时间：2012-10-16T04:06:24.473
> 
> 标签：doctrine

我有一个名为 ms_message 的数据库表：有 6 列（id、senderid、receiverid、content、isRead、receivedTime）。我想通过 Doctrine 中的发件人获取最新收到的消息组，但我无法运行子查询或使用 order by 和 group by。

SQL 中的查询如下所示：

```
SELECT * FROM (SELECT * FROM ms_message WHERE receiverId = :receiver ORDER BY receivedTime) GROUP BY senderId; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:29:45.610

我不认为 Doctrine 支持像这样的查询`SELECT * FROM (SELECT ...)`

# c++ - 为什么在堆上迭代一个大数组比在堆栈上迭代相同大小的数组更快？

> ID：12907399
> 
> 赞同：5
> 
> 时间：2012-10-16T04:06:34.680
> 
> 标签：c++, visual-c++

我正在分配 2 个相同大小的数组，一个在堆栈上，一个在堆上，然后通过简单的分配对它们进行迭代。

可执行文件被编译为为主线程堆栈分配 40mb。

此代码仅经过测试，可在带有 /STACK:41943040 链接器标记的 vc++ 中编译。

```
#include "stdafx.h"
#include <string>
#include <iostream>
#include <malloc.h>
#include <windows.h>
#include <ctime>

using namespace std;

size_t stackavail()
{
    static unsigned StackPtr;   // top of stack ptr
    __asm mov [StackPtr],esp    // mov pointer to top of stack
    static MEMORY_BASIC_INFORMATION mbi;            // page range
    VirtualQuery((PVOID)StackPtr,&mbi,sizeof(mbi)); // get range
    return StackPtr-(unsigned)mbi.AllocationBase;   // subtract from top (stack grows downward on win)
}

int _tmain(int argc, _TCHAR* argv[])
{
    string input;

    cout << "Allocating 22mb on stack." << endl;
    unsigned int start = clock();
    char eathalfastack[23068672]; // approx 22mb
    auto length = sizeof(eathalfastack)/sizeof(char);
    cout << "Time taken in ms: " << clock()-start << endl;

    cout << "Setting through array." << endl;
    start = clock();
    for( int i = 0; i < length; i++ ){
        eathalfastack[i] = i;
    }
    cout << "Time taken in ms: " << clock()-start << endl;
    cout << "Free stack space: " << stackavail() << endl;

    cout << "Allocating 22mb on heap." << endl;
    start = clock();
    // auto* heaparr = new int[23068672]; // corrected
    auto* heaparr = new byte[23068672];
    cout << "Time taken in ms: " << clock()-start << endl;

    start = clock();
    cout << "Setting through array." << endl;
    for( int i = 0; i < length; i++ ){
        heaparr[i] = i;
    }
    cout << "Time taken in ms: " << clock()-start << endl;

    delete[] heaparr;
    getline(cin, input);
} 
```

输出是这样的：

```
 Allocating 22mb on stack.
    Time taken in ms: 0
    Setting through array.
    Time taken in ms: 45
    Free stack space: 18872076
    Allocating 22mb on heap.
    Time taken in ms: 20
    Setting through array.
    Time taken in ms: 35 
```

为什么堆栈数组的迭代比堆上的相同事物慢？

编辑： nneonneo 咳出我的错误

现在输出是相同的：

```
 Allocating 22mb on stack.
    Time taken in ms: 0
    Setting through array.
    Time taken in ms: 42
    Free stack space: 18871952
    Allocating 22mb on heap.
    Time taken in ms: 4
    Setting through array.
    Time taken in ms: 41 
```

根据 Öö Tiib 的回答发布版本如下：

```
 Allocating 22mb on stack.
    Time taken in ms: 0
    Setting through array.
    Time taken in ms: 5
    Free stack space: 18873508
    Allocating 22mb on heap.
    Time taken in ms: 0
    Setting through array.
    Time taken in ms: 10 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T04:10:22.103

您的数组大小不同；`sizeof(char[23068672]) != sizeof(int[23068672])`, 元素的类型不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:32:27.150

你的电脑出了点问题，在我的老奔腾 4 上，分配这种基于堆栈的字符数组需要 15 毫秒。您是否尝试过调试版本或其他东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:54:47.137

您的问题有两个部分：

1.  在堆栈与堆上分配空间
2.  访问堆栈上的内存位置与全局可见

**分配空间**

首先，让我们看看在堆栈上分配空间。我们所知道的堆栈在 x86 架构上向下增长。因此，为了在堆栈上分配空间，您所要做的就是减少堆栈指针。只有一条汇编指令（dec sp，#amount）。该汇编指令始终出现在函数的序言中（函数设置代码）。因此，据我所知，在堆栈上分配空间一定不会花费任何时间。在堆栈上分配空间的成本 = (递减 sp 操作)。在现代超标量机器上，该指令的执行将与其他指令重叠。

另一方面，在堆上分配空间需要对 new/malloc 的库调用。库调用首先检查堆上是否有空间。如果是，那么它将只返回一个指向第一个可用地址的指针。如果堆栈上没有可用空间，它将使用 brk 系统调用请求内核修改附加页的页表条目。系统调用是一项昂贵的操作。它会导致管道刷新，TLB污染等。因此，在堆上分配空间的成本=（函数调用+空间计算+（brk系统调用）？）。当然，在堆上分配空间似乎比堆栈慢一个数量级。

**访问元素** x86 ISA 的寻址模式允许使用直接寻址模式 (temp=mem[addr]) 对内存操作数进行寻址以访问全局变量，而堆栈上的变量通常使用索引寻址模式访问。(temp=mem[stack-pointer+offset-on-stack])。我的假设是两个内存操作数应该花费几乎相同的时间，但是，直接寻址模式似乎肯定比索引寻址模式快。关于数组的内存访问，我们有两个操作数可以访问任何元素——数组的基地址和索引变量。当我们访问堆栈上的数组时，我们添加了一个操作数 - 堆栈指针。x86 寻址模式提供了此类地址 - base+scale*index+offset 。所以，好的堆栈数组元素访问：temp=mem[sp+base-address+iterator*element-size] 和堆数组访问：temp=mem[base-address+iterator*element-size]。显然，堆栈访问必须比数组访问更昂贵。

现在，回到迭代的一般情况，如果堆栈的迭代速度较慢，这意味着寻址模式***可能***（我不完全确定）瓶颈，如果分配空间是瓶颈，则系统调用可能是瓶颈。

# objective-c - 独立洗牌两个 NSMutableArray

> ID：12907400
> 
> 赞同：0
> 
> 时间：2012-10-16T04:06:50.637
> 
> 标签：objective-c, ios, cocoa-touch

我在我的创建两个`NSMutableArray`，`viewDidLoad`我将它添加到一个`NSMutableDictionary`。当我尝试用一​​个数组对其进行改组时，没关系。但问题是当我独立地洗牌两个数组时它不起作用，不知何故索引混淆了。

这是我的数组（第一个数组）的代码：

```
self.items1 = [NSMutableArray new];

for(int i = 0; i <= 100; i++) 
{ 

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"[Images%d.png", i]]; 
    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        self.container = [[NSMutableDictionary alloc] init];
        [container setObject:[UIImage imageWithContentsOfFile:savedImagePath] forKey:@"items1"]; 
        [container setObject:[NSNumber numberWithInt:i] forKey:@"index1"];
        [items1 addObject:container];           
    } 
} 

NSLog(@"Count : %d", [items1 count]);  

[items1 enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop) {
    NSLog(@"%@ images at index %d", object, index);
}]; 
```

（第二个阵列）：

```
self.items2 = [NSMutableArray new];  
for(int i = 0; i <= 100; i++) 
{ 

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"secondImages%d.png", i]]; 
    NSLog(@"savedImagePath=%@",savedImagePath);
    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        self.container = [[NSMutableDictionary alloc] init];
        [container setObject:[UIImage imageWithContentsOfFile:savedImagePath] forKey:@"items2"]; 
        [container setObject:[NSNumber numberWithInt:i] forKey:@"index2"];
        [items2 addObject:container];
    } 
} 

NSLog(@"Count : %d", [items2 count]);  

[items2 enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop) {
    NSLog(@"%@ images at index %d", object, index);
}]; 
```

我对`iCarousel`使用我的数组的地方的看法：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

    if (carousel == carousel1)
    {
        NSDictionary *obj = [items1 objectAtIndex:index];
        view = [[UIImageView alloc] initWithImage:[obj objectForKey:@"items1"]];
        view.tag = index;
    }
    else
    {
        NSDictionary *obj = [items2 objectAtIndex:index];
        view = [[UIImageView alloc] initWithImage:[obj objectForKey:@"items2"]];
        view.tag = index;
    }

    return view;
} 
```

然后是我的洗牌代码（我尝试为另一个数组复制，但也不起作用）：

```
 srandom(time(NULL));
    NSUInteger count = [items1 count];
    for (NSUInteger i = 0; i < count; ++i) {
        int nElements = count - i;
        int n = (random() % nElements) + i;
        [items1 exchangeObjectAtIndex:i withObjectAtIndex:n];
    } 
```

我将如何使用上面的代码（或者如果您有其他建议）对两个数组进行洗牌？谢谢

我的另一个问题是，当我尝试为 shuffle 方法子类化该类或使用上面的代码时，它们的索引是混合的。例如：

**对象**：苹果、球、胡萝卜、狗

**索引**：1 2 3 4

但在我看来，洗牌时：

**对象**: 胡萝卜、苹果、狗、芭蕾

**索引**：2 4 1 3

我还有一个方法，当轮播停止时，它会删除视图中的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:36:02.460

最干净的解决方案：使用[Objective-C 类别](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Category.html)

NSMutableArray+RandomUtils.h

```
#import <Foundation/Foundation.h>

@interface NSMutableArray (RandomUtils) 
-(void)shuffle;
@end 
```

NSMutableArray+RandomUtils.m

```
#import "NSMutableArray+RandomUtils.h"

@implementation NSMutableArray (RandomUtils)
-(void)shuffle
{
    NSUInteger count = [self count];
    for (NSUInteger i = 0; i < count; ++i) {
        NSUInteger nElements = count - i;
        NSUInteger n = (arc4random() % nElements) + i;
        [self exchangeObjectAtIndex:i withObjectAtIndex:n];
    }
}

@end 
```

导入它，无论你在哪里洗牌一个 MSMutableArray

```
[array1 shuffle];
[array2 shuffle]; 
```

* * *

我试图重现您的混合索引问题，但我不能

```
NSMutableArray *sarray = [NSMutableArray arrayWithArray: @[@"carrots", @"apple", @"dog", @"balle"]];

NSLog(@"%@", sarray);
[sa enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSLog(@"%@ object at index %lu", obj, idx);
}];

[sarray shuffle];
 NSLog(@"%@", sarray);
[sarray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSLog(@"%@ object at index %lu", obj, idx);
}]; 
```

结果是

```
(
    carrots,
    apple,
    dog,
    balle
)
carrots object at index 0
apple object at index 1
dog object at index 2
balle object at index 3
 (
    balle,
    dog,
    carrots,
    apple
)
balle object at index 0
dog object at index 1
carrots object at index 2
apple object at index 3 
```

* * *

顺便说一句：您的示例也不正确：数组中有四个对象，索引应以 0 开头，最大值为 3。您有 1 和 4。

所以数组被洗牌并且索引没问题。您在代码中一定有其他问题，您没有显示。

你应该放弃你的真实代码。

* * *

我仍然不确定，如果我理解，你想要什么。但是根据您的评论，我假设您想对数组进行洗牌但保留旧索引。这是不可能的，因为索引是数组中对象的位置。但是您总是可以自由地将原始索引保存在某处。
或者你只是复制一个数组，随机播放其中一个。现在 ho 可以请求两个数组中对象的索引。

```
NSArray *originalArray =  @[@"carrots", @"apple", @"dog", @"balle"];

NSLog(@"%@", originalArray);
[originalArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSLog(@"%@ object at index %lu", obj, idx);
}];

NSArray *shuffledArray = [originalArray arrayShuffled];
 NSLog(@"%@", shuffledArray);
[shuffledArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSLog(@"%@ object at index %lu %lu", obj, idx, [originalArray indexOfObject:obj]);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:11:41.047

假设这个想法是以相同的顺序洗牌两个数组，那么你只需要在第一个数组之后交换第二个数组吗？

```
NSUInteger count = [items1 count];
for (NSUInteger i = 0; i < count; ++i) {
    int nElements = count - i;
    int n = (random() % nElements) + i;
    [items1 exchangeObjectAtIndex:i withObjectAtIndex:n];
    [items2 exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:22:36.850

假设您有两个不同的图像数组，您需要对图像进行洗牌。

```
 for(int i = 0; i <= 100; i++) 
    {
      NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];

        NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"[Images%d.png", i]]; 
        if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
//Lazy initialization of dictionary 
            NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
            [dict setObject:[UIImage imageWithContentsOfFile:savedImagePath] forKey:@"items1"]; 
            [dict setObject:[NSNumber numberWithInt:i] forKey:@"index1"];
            [items1 addObject:dict]; 
    [dict release];          
        } 
    } 
```

以相同的方式将对象添加到第二个数组。

```
NSUInteger count = [items1 count];
for(int i = 0 ;i < count; i++)
{
int nElements = count - i;
int n = (random() % nElements) + i;
[items1 exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

第二个数组洗牌

```
 NSUInteger count = [items2 count];
    for(int i = 0 ;i < count; i++)
    {
    int nElements = count - i;
    int n = (random() % nElements) + i;
    [items2 exchangeObjectAtIndex:i withObjectAtIndex:n];
    } 
```

这应该有效。如果您仍然发现问题，请告诉我。

# c# - 如何使用 Microsoft.ACE.OLEDB.12.0 将数据导出到 excel 并保持数据格式。

> ID：12907404
> 
> 赞同：2
> 
> 时间：2012-10-16T04:07:26.297
> 
> 标签：c#, excel

示例代码是

```
INSERT INTO OPENROWSET ('Microsoft.ACE.OLEDB.12.0', 'Excel 8.0;Database=E:\Application\PASpready\Files\NK\NKAll.xlsx;HDR=YES;','SELECT * FROM [All$]') 
select ..... from table 
```

所有数据都以文本和数字小数形式出现。我怎样才能将数据格式保存在excel中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:15:40.423

在导出之前尝试构建该*NKAll.xlsx*文件，作为模板，具有正确格式的虚拟数据行。

这可能有助于 excel 正确推断类型。如果可行，那么您可以首先更新第一行，然后插入所有其余行。

# android - 无法获取当前位置坐标

> ID：12907406
> 
> 赞同：2
> 
> 时间：2012-10-16T04:08:10.400
> 
> 标签：android, gps, android-location

我想获取当前的经度和纬度为*int*

所以我使用这段代码

```
 locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, this);

        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);

        try {
            gps_enabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        } catch (Exception ex) {
        }
        try {
            network_enabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        } catch (Exception ex) {
        }

        // don't start listeners if no provider is enabled
        if (!gps_enabled && !network_enabled) {
               ....Notify
        }

        if (gps_enabled) {
            if (location != null) {
                 longitude =(int) (location.getLongitude()*1e6);
                 latitude = (int) (location.getLatitude()*1e6);
String accuracy = "Accuracy: " + location.getAccuracy();
            } 
        }
        if (network_enabled) {
            if (location != null) {

                 longitude =(int) (location.getLongitude()*1e6);
                 latitude = (int) (location.getLatitude()*1e6);
                String accuracy = "Accuracy: " + location.getAccuracy();
            } 
            }

        locationManager.removeUpdates(this); 
```

不幸的是，经度和纬度始终为空。

我拥有清单中所需的所有权限。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:38:42.317

好吧，这就是我用于位置监听器的东西

```
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class LocationUtils implements LocationListener{

 Context context;
 private String provider;
 private LocationManager locationManager;
 private String latitude="no value";
 private String longitude="no value";
 public LocationUtils(Context context) {
     this.context=context;
     // Get the location manager
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        latitude="no value";
        longitude="no value";
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            /*Toast.makeText(context, "Provider " + provider + " has been selected.",
                    Toast.LENGTH_SHORT).show();*/
         // System.out.println("Provider " + provider + " has been selected.");
          onLocationChanged(location);
        } else {
            /*Toast.makeText(context, "Location not available",
                    Toast.LENGTH_SHORT).show();*/
        }
 }

@Override
public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());
    latitude = lat + "";
    longitude = lng + "";
   /* Toast.makeText(context, " lat: "+lat +"  Long:"+lng,
            Toast.LENGTH_SHORT).show(); */  
}

@Override
public void onProviderDisabled(String provider) {
     //Toast.makeText(context, "Disabled provider " + provider,
        //        Toast.LENGTH_SHORT).show();       
}

@Override
public void onProviderEnabled(String provider) {
    //Toast.makeText(context, "Enabled new provider " + provider,
      //      Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
public String getLatitude() {
    return latitude;
}

public String getLongitude() {
    return longitude;
}

} 
```

现在在你的活动中你可以得到

```
 LocationUtils appLocationManager = new LocationUtils(getContext());
 String latitude = appLocationManager.getLatitude();
 String longitude = appLocationManager.getLongitude(); 
```

还添加

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
in your manifest file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:32:45.873

试试这个代码

```
 double longitude,latitude;
         int lon,lat;

       getcurrentloc.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             if(!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
                Toast.makeText(GpsLocationFinder.this, "Enable Your GPS", Toast.LENGTH_LONG).show();
            }else{
            LocationResult locationResult=new LocationResult() {    
                @Override
                public void gotLocation(Location location) {
                    // TODO Auto-generated method stub

                        longitude=location.getLongitude();
                        latitude=location.getLatitude();
                         lon=(int)longitude;    
                         lat=(int)latitude;
                        Toast.makeText(GpsLocationFinder.this, "Current Longitude"+longitude+" Current Latitude"+latitude,Toast.LENGTH_LONG).show();

                }

            };      
            MyLocation myLocation = new MyLocation();
            myLocation.getLocation(GpsLocationFinder.this, locationResult);         

            }   

        }
    }); 
```

MyLocation 类在下面

```
 public class MyLocation {
Timer timer1;
LocationManager lm;
LocationResult locationResult;
boolean gps_enabled=false;
boolean network_enabled=false;
double longitude,latitude;

public boolean getLocation(Context context, LocationResult result)
{
    //I use LocationResult callback class to pass location value from MyLocation to user code.

        //Log.e("GPS DISTANCE","GPS Enabled");
    locationResult=result;
    if(lm==null)
        lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

    //exceptions will be thrown if provider is not permitted.

    //don't start listeners if no provider is enabled

        //try{

        try{

            gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);

            }catch(Exception ex){

            }
        try{
            network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        }catch(Exception ex){

        }
        if(!gps_enabled && !network_enabled){
            return false;
        }

    if(gps_enabled){

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 100, locationListenerGps);
    }
    if(network_enabled)
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
    timer1=new Timer();
    timer1.schedule(new GetLastLocation(), 30000);          
    return true;

}

LocationListener locationListenerGps = new LocationListener() {
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerNetwork);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

LocationListener locationListenerNetwork = new LocationListener() {
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerGps);
    }
    public void onProviderDisabled(String provider) {

    }
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

class GetLastLocation extends TimerTask {
    @Override
    public void run() {
         lm.removeUpdates(locationListenerGps);
         lm.removeUpdates(locationListenerNetwork);

         Location net_loc=null, gps_loc=null;
         if(gps_enabled)
             gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
         if(network_enabled)
             net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

         //if there are both values use the latest one
         if(gps_loc!=null && net_loc!=null){
             if(gps_loc.getTime()>net_loc.getTime())
                 locationResult.gotLocation(gps_loc);
             else
                 locationResult.gotLocation(net_loc);
             return;
         }

         if(gps_loc!=null){
             locationResult.gotLocation(gps_loc);
             return;
         }
         if(net_loc!=null){
             locationResult.gotLocation(net_loc);
             return;
         }
         locationResult.gotLocation(null);
    }
}

public static abstract class LocationResult{
    public abstract void gotLocation(Location location);
}
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:39:46.700

1.  首先检查设备中启用的 GPS。
2.  检查清单中包含的所有权限
3.  您正在使用 GPS 提供程序获取最后一个已知位置，因此请删除该行并分别为两个提供程序获取位置（您的 GPS 可能当时不可用，因此您没有获得位置并且您正在获取使用 GPS 的最后一个已知位置，因此它可以为空，如果位置为空，则它不会进入`if(network_enabled)`和`if(gps_enabled)`.) 等条件之内。

**简而言之，检查 GPS 的最后已知位置是否为空，然后尝试使用位置提供程序获取位置并使用该位置。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:54:10.723

```
 public class SMS_Service extends Service {

private final String LOGTAG = "SMS_Service";

String latLongString;
String addressString;
double altitude;
int LAC;
int mcc = 0;
int mnc = 0;
String pn_no;
Altitude_Details ld = new Altitude_Details();

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Log.e(LOGTAG, "created");
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.e(LOGTAG, "destroyed");
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    Log.e(LOGTAG, "started");

    SmsManager sms = SmsManager.getDefault();
    // get phone number from shared preference
    SharedPreferences default1 = getSharedPreferences("Device",
            MODE_WORLD_WRITEABLE);
    pn_no = default1.getString("Phone_NO", "");
    Log.e("phone_no in sms service", pn_no);

    String From = intent.getStringExtra("From");
    String Msg = intent.getStringExtra("Msg"); // get message from intent
    Log.e("ON start:", "" + From);
    Log.e("ON start:", "" + Msg);

    String number = From.substring(7, 11);
    Log.e("ON start: SUBSTRING", "" + number);

    // check msg for Location keyword match or not
    if (Msg.equals("LOCATION") && pn_no.equals(number)) {
        Log.e("location:", "Location found");

        TelephonyManager tel = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        String networkOperator = tel.getNetworkOperator();

        // find MNC and MCC
        if (networkOperator != null) {
            mcc = Integer.parseInt(networkOperator.substring(0, 3));
            mnc = Integer.parseInt(networkOperator.substring(3));
            Log.e("MCC", "" + mcc);
            Log.e("MNC", "" + mnc);
        }

        // find LAC for GSM
        if (tel.getPhoneType() == TelephonyManager.PHONE_TYPE_GSM) {
            final GsmCellLocation location = (GsmCellLocation) tel
                    .getCellLocation();
            if (location != null) {
                LAC = location.getLac();
                Log.e("cell location", "LAC: " + location.getLac()
                        + " CID: " + location.getCid());
            }
        }

        LocationManager locationManager;
        String context = Context.LOCATION_SERVICE;
        locationManager = (LocationManager) getSystemService(context);
        String provider = LocationManager.GPS_PROVIDER;
        Location location = locationManager.getLastKnownLocation(provider);

        // update method return latest location
        updateWithNewLocation(location);

        // location change then listner called
        locationManager.requestLocationUpdates(provider, 2000, 10,
                locationListener);

        // send mcc,mnc,latitude,longitude,altitude,address,Link in message
        String Url = "http://itouchmap.com/latlong.html";

        sms.sendTextMessage(pn_no, null, "\nLocation:\n" + "MCC: " + mcc
                + "\nMNC: " + mnc + "\nLAC:" + LAC + latLongString
                + "\nAltitude:" + altitude + "feet"
                + "\nGo to Below site:\n" + Url, null, null);

        sms.sendTextMessage(pn_no, null, "\nAddress:\n" + addressString,
                null, null);

        // stop service automatically
        SMS_Service.this.stopSelf();
    }

    else {
        Log.e("loation:", "Location not found");
        SMS_Service.this.stopSelf();
    }
}

private final LocationListener locationListener = new LocationListener() {

    public void onLocationChanged(Location location) {
        updateWithNewLocation(location);

    }

    public void onProviderDisabled(String provider) {
        updateWithNewLocation(null);

    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
};

private void updateWithNewLocation(Location location) {
    // TODO Auto-generated method stub

    addressString = "\nno address found";
    // check location get or not from provider
    if (location != null) {

        // get latitude and longitude
        double latitude = location.getLatitude();
        double longitude = location.getLongitude();

        latLongString = "\nLat:" + latitude + "\nLong:" + longitude;
        Log.e("location", "" + latLongString);

        // get altitude from method
        altitude = ld.getElevationFromGoogleMaps(latitude, longitude);
        Log.e("Altitude", "" + altitude);

        // find address from latitude and longitude
        Geocoder gc = new Geocoder(this, Locale.getDefault());

        try {
            List<Address> addresses = gc.getFromLocation(latitude,
                    longitude, 1);
            StringBuilder sb = new StringBuilder();
            if (addresses.size() > 0) {
                Address address = addresses.get(0);
                for (int i = 0; i <= address.getMaxAddressLineIndex(); i++)

                    sb.append(address.getAddressLine(i)).append("\n");
            }
            addressString = sb.toString();
            Log.e("Address", "" + addressString);
        } catch (IOException e) {
        }

    } else {
        latLongString = "\n No location found";
        Log.e("location", "" + latLongString);
           }
     }
} 
```

嘿，您可以提供服务并使用此代码获取高度和纬度并使用类对其进行解码

# jquery - 在 div 外部单击关闭 JQuery 图像

> ID：12907410
> 
> 赞同：2
> 
> 时间：2012-10-16T04:09:21.717
> 
> 标签：jquery, html, onclick

我希望能够以 3 种方式关闭隐藏显示的弹出式画廊：点击我已经拥有的图像。当我单击外部框时关闭并在选择另一个菜单链接时关闭，即单击主页并弹出重置关闭。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Website</title>

<link rel="stylesheet" type="text/css" href="../style-projects-jquery.css" /> 

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.lightbox-0.5.js"></script>

<script type="text/javascrip" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="js/jquery.localscroll-min.js" type="text/javascript"></script>
<script src="js/jquery.scrollTo-min.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen" />

        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />

        <script type="text/javascript">
        $(document).ready(function () {
            $.localScroll.defaults.axis = 'x';
            $.localScroll();
        });
        </script>  

     <script type="text/javascript">
    $(function() {
        $("#gallery a").lightBox();
    });
    </script>   

<script type="text/javascript">
$(".gallery").click(function(e){
    e.stopPropagation();
});

 </script>  

<script type="text/javascript">
$(".menu a").click(function(e){
    e.stopPropagation();
});

 </script>  

</head>
<body>

                <a name="home"></a>
    <div id="menu">
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#box1">Box 1</a></li>
            <li><a href="#box2">Box 2</a></li>
            <li><a href="#box3">Box 3</a></li>
            <li><a href="#box4">Box 4</a></li>
            <li><a href="#box5">Box 5</a></li>
            <li><a href="#box6">Box 6</a></li>
            <li><a href="#box7">Box 7</a></li>
            <li><a href="#box8">Box 8</a></li>
        </ul>
    </div>
<div id="box6" class="box">
            <h2><a name="box6">Sixth Box</a></h2>
            <p><div id="gallery">

        <li>
            <a href="photos/image1.jpg" title="Image 1 $('#gallery').lightBox();">
                <img src="photos/thumb_image1.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image2.jpg" title="Image 2 $('#gallery a').lightBox();">
                <img src="photos/thumb_image2.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image3.jpg" title="Image 3 $('#gallery a').lightBox();">
                <img src="photos/thumb_image3.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image4.jpg" title="Image 4 $('#gallery a').lightBox();">
                <img src="photos/thumb_image4.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image5.jpg" title="Image 5 $('#gallery a').lightBox();">
                <img src="photos/thumb_image5.jpg" width="72" height="72" alt="" />
            </a>
        </li>

</div></p>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:53:01.677

```
$(document).click(function(e){
     var elem = $(e.target).attr('class');
     if (elem != 'slidingDiv') {  ////slidingDiv is a class name where do not want to close when click on it...
         ///Your code to close popup.....
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T13:48:19.917

尝试为每个元素创建单独的 id 并将它们标记在隐藏块中，如下所示。

```
$(document).click(function (e) {
    if ((e.target.id != "a_IDName") && (e.target.id != "imgIDName"){ 
         // if click is not in 'mydiv'
         $("#a_IDName").hide("fast");
    }
   //More if's for each Image Condition.
}); 
```

希望这可以帮助 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:26:36.777

问题可能是调用插件的jquery选择器好像不对。Ty 更改`$('a#gallery').lightBox();`并添加一个 id 'gallery' 到您想要公开该行为的链接。我检查了该[站点](http://leandrovieira.com/projects/jquery/lightbox/)，看来您不需要任何其他脚本即可通过单击外部来隐藏图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:30:34.550

那么你需要为此处理文档点击事件

```
$(document).click(function (e) {
        //apply your code here to check which element is clicked by using $(e.target)
}); 
```

`$(e.target)`将为您提供已触发单击事件的对象，之后您可以按类或 id 检查

# c - 在二维数组中搜索特定字符

> ID：12907418
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:10:50.977
> 
> 标签：c, search, multidimensional-array

我想知道您将如何搜索二维数组（用作函数的参数）并找到特定字符，例如感叹号？

假设我有一个二维数组 island[20][40]，我想找到字符 X。我的方法是使用嵌套的 for 循环，遍历每个元素和一个 if 语句。例如

```
for (i = 0; i < 20; i++) {
    for (j = 0; j < 40; j++) {
    //Not sure what goes here (I want a function that identifies the element in the array)
    if ((some variable) == 88)
    printf("The treasure is at: (%d, %d)", i, j); 
```

谢谢你的帮助 ：）

-island[20][40] 工作正常。我只想知道如何通过它搜索特定字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:59:59.517

使用条件

```
 if (island[i][j] == 88); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:37:51.163

如果您的数组没有排序，那么您别无选择，只能按顺序搜索，没有捷径可走。

# javascript - 是否可以使用带有phonegap的多个html页面？

> ID：12907421
> 
> 赞同：1
> 
> 时间：2012-10-16T04:11:32.040
> 
> 标签：javascript, cordova, jquery-mobile

我正在使用 phonegap 开发 android 应用程序。我只使用一个 HTML 页面（index.html）。是否可以在应用程序中使用多个 HTML 页面。如果是的话怎么做？Q2：我的应用程序消耗大量内存空间？如何处理 phonegap 应用程序中的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:16:06.157

是的，您只需链接到其他 html 页面，但您可能需要重新包含 phonegap 或其他 javascript 库。

内存必须与 javascript 相关。你在使用什么 javascript 库？

希望这可以帮助。

# rubygems - [path] 不是 Gem::Specification (NilClass 代替)

> ID：12907427
> 
> 赞同：2
> 
> 时间：2012-10-16T04:12:18.903
> 
> 标签：rubygems, gem, ruby-on-rails-3.2

我创建了一个测试项目，在捆绑安装 gems 时出现错误。然后我对 gem 进行了版本检查，我得到了同样的错误。

```
$ gem -v

[/home/bharath/.rvm/gems/ruby-1.9.3-p194/specifications/treetop-1.4.11.gemspec] isn't a Gem::Specification (NilClass instead).
[/home/bharath/.rvm/gems/ruby-1.9.3-p194/specifications/uglifier-1.3.0.gemspec] isn't a Gem::Specification (NilClass instead). 
```

似乎是什么问题。？这与我使用的 ruby​​ 版本有关吗？

# php - 用于为 ajax 聊天更新 MySQl 数据库的 PHP 表单

> ID：12907429
> 
> 赞同：0
> 
> 时间：2012-10-16T04:12:48.573
> 
> 标签：php, mysql

我正在为一些工作中的用户使用开源 ajax 聊天程序进行群聊。该程序运行良好，但它不是为用户更改密码或让我在不直接从数据库中进行管理用户的方式构建的。所以我把这个PHP脚本放在一起。它能够显示数据库中的数据，但不会更新它。我将 Xampp 用于 MySQl 和 Apache 服务器。一旦我启动并运行它，我计划转移到 IIS。这是我的桌子的布局。

```
 ID Username Password Role Channels EMail 
```

为了节省时间，我只会发布 update 和 update_ac 脚本。当使用 Windows 7 作为我的服务器时，我在提交更新后得到未定义的变量。它仍然说更新成功，但数据库没有更新。在作为服务器的 windows xp 中，我没有收到未定义的变量错误。如果有人可以给我一些关于我做错了什么的建议，或者在这里为我指出另一个解决方案，我将不胜感激。

```
update.php
// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);

$rows=mysql_fetch_array($result);
?>

<table width="400" border="0" cellspacing="10" cellpadding="0">
<tr>
<form name="form1" method="post" action="update_ac.php">
<td>
<table width="100%" border="10" cellspacing="1" cellpadding="10">

<tr>
<td colspan="3"><strong>Update User</strong> </td>
</tr>
<center>
<tr>
<td align="center"><strong>Username</strong></td>
<td align="center"><strong>Password</strong></td>
<td align="center"><strong>Role</strong></td>
<td align="center"><strong>Channels</strong></td>
<td align="center"><strong>EMail</strong></td>
</tr>
</center>
<tr>
<td align="center">
<input name="username" type="text" id="Username" value="<?php echo 
$rows['Username'];   
?>" size="15">
</td>

<td align="center">
<input name="password" type="Password" id="Password" value="<?php echo      
$rows['Password']; ?>" size="15">
</td>

<td>
<input name="role" type="text" id="Role" value="<?php echo $rows['Role']; ?>" size="1">
</td>

<td>
<input name="channels" type="text" id="Channels" value="<?php echo $rows['Channels']; 
?>" size="10">
</td>

<td>
<input name="EMail" type="text" id="EMail" value="<?php echo $rows['EMail']; ?>"  
size="25">
</td>

<tr>
<td>
<input name="id" type="hidden" id="ID" value="<?php echo $rows['ID']; ?>">
</td>
<td align="center">
<input type="submit" name="Submit" value="Submit">
</td>

</tr>
 update_ac.php
// update data in mysql database
$sql = "UPDATE $tbl_name SET Username='$Username', Password='$Password', Role='$Role', 
Channels='$Channels', EMail='$EMail' WHERE id='$id'";
$result = mysql_query($sql);

// if successfully updated.
if($result)
{

echo "Successful";
echo "<BR>";
echo "<a href='index.php'>View result</a>";

}

else
{
echo "ERROR";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:17:34.940

在这里，您没有从 from 获取发布的值，我应该用来`$_POST`获取发布的值。

```
// update data in mysql database
$sql = "UPDATE $tbl_name SET Username='$Username', Password='$Password', Role='$Role', 
Channels='$Channels', EMail='$EMail' WHERE id='$id'"; 
```

所以你必须得到发布的价值如下

```
$Username  = $_POST['Username'];
$Password  = $_POST['Password'];
$Role      = $_POST['Role'];
$Channels  = $_POST['Channels'];
$EMail     = $_POST['EMail'];
$id        = $_POST['id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:31:15.633

我发现将 name="password" 更改为 name ="Password" 修复了我的脚本。我必须对所有字段执行相同的操作，但它现在可以工作了。

# c# - 如何停靠选项卡控件

> ID：12907430
> 
> 赞同：2
> 
> 时间：2012-10-16T04:12:53.707
> 
> 标签：c#

我是 C# 的初学者。我在 Winform 上安排控件时遇到了一些问题。在我的项目中，我拿了一个`tabControl`并给了财产`dock --> fill`。实现所有设计后，我记得我的表单`panelHeader`需要`panelFooter`. 当我添加它们并分别给定属性时`dock -->top`，`dock --> bottom`这些面板位于`tabControl`. 我试图通过删除并重新设置`dock --> fill`来解决这个问题。`tabControl`但没有用。如何解决这个问题呢？（我不想删除`tabControl`和重新设计，因为我花了 4 个小时来设计）。

如果这是一个浪费的问题，那么请只发表评论，以便我以后可以删除这个问题。

请帮助
提前致谢。

编辑：

好吧，我通过使用剪切和粘贴属性来处理它。但是如果有更多的控件需要处理（如果是这样，那么它会使表单变得混乱）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:34:36.130

尝试右键单击控件，然后单击“置于前面”。我记得在我不确定这个答案是否正确之前很久就尝试过这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:56:45.793

暂时为 Tabcontrol 设置 Dock = None .........在表单中添加一个包含 3 行的 TableLayoutPanel。1.在第一行您可以添加“panelHeader”并为其设置 Dock 2.选择 TabControl 并将其移动到 tablelayout 第二行设置 Dock = Fill 3.在最后一行添加您的“panelFooter”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T04:44:45.150

你必须在你的`Designer.cs`页面上写下这段代码

```
this.yuortabcontrol.Dock = System.Windows.Forms.DockStyle.Fill; 
```

而是 .Fill 你按照打击图像写`tabcontrol`

![选项卡控件](../Images/588dac9663f8360344bc0450d593a2cc.png)

# sed - 如何用sed查找和替换

> ID：12907433
> 
> 赞同：-5
> 
> 时间：2012-10-16T04:13:51.540
> 
> 标签：sed

听说过很多关于 SED 的信息，并为我的 Windows XP 下载并安装了 GNU SED。1) 安装程序将其安装在 c:\program 文件中。2) 我在目录 C:\lewisC\bm_pg0001.txt 中有一个文件。该文件有文本，其中 1.pdf。3) 我想将 1.pdf 更改为 bm_pg0001.pdf 4) 在使用路径等调用 SED 之后，我将 sed bin 文件夹中的所有文件复制到 C:\lewisC\ used command here for DOS prompt，最后能够调用 SED。

现在有人可以帮助使用 sed 命令将文件 bm_pg0001.txt 中的 1.pdf 更改为 bm_pg0001.pdf。谢谢 - 我现在明白为什么 Windows 是成功的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:15:23.493

像这样：

`sed "s/1\.pdf/bm_pg0001.pdf/g" < input_file > output_file`

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:18:20.620

是的，对于那些连最基本的研究都不愿意做的人来说，Windows 似乎是一个更好的平台。看看[http://www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)。

# c# - Windows 8 应用程序中的屏幕分辨率检测

> ID：12907435
> 
> 赞同：2
> 
> 时间：2012-10-16T04:14:01.320
> 
> 标签：c#, windows, silverlight, xaml

有没有一种方法可以检测 Windows 8 应用程序中的屏幕分辨率，以便我可以相应地缩放和调整 UI 元素的大小？

如果不是，那么开发独立于分辨率的应用程序的最佳方法是什么？有没有我不知道的标准方法，或者有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:15:25.873

从 FrameworkElement 继承的任何东西都有一个 SizeChanged 事件。此事件返回框架元素的当前大小。

要获得屏幕的整体大小，您可以使用：

```
Windows.UI.Xaml.Window.Current.Bounds.Height
Windows.UI.Xaml.Window.Current.Bounds.Width 
```

请小心，因为这将返回屏幕大小，您需要考虑您的应用是全屏还是快照/填充。

Microsoft 指南说，您应该避免高度/宽度的绝对值，只需将 Horizo​​ntalAlignment 和 VerticalAlignment 设置为 Stretch，以允许 UI 占用渲染所需的尽可能多的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:25:55.837

这两篇文章有什么不解释的吗？

[缩放至屏幕指南（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)

[构建 Windows 8：缩放到不同的屏幕](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T14:12:45.470

```
Windows.Graphics.Display.DisplayProperties.LogicalDpi 
```

# vim - 如何区分vim中的line-address和line-range？

> ID：12907438
> 
> 赞同：6
> 
> 时间：2012-10-16T04:14:18.807
> 
> 标签：vim

这是一个简单的用户定义函数：

```
fun! Foo() range
    echo a:firstline a:lastline
endfun 
```

*   `:5call Foo()`并`:5,5call Foo()`给我同样的结果。
*   但是，`:5j`并`:5,5j`给我不同的结果。

我可以编写一个行为类似的函数`join`吗？
如何`join`区分线路地址和线路范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:04:59.617

通过定义 custom `:command`，`-range`and`-count`属性可以让您更好地控制范围的使用方式。但是，我认为即使这样也不允许您完全复制`:join`. 自定义 Vim 命令的界面不如内置命令的丰富。

作为一种解决方法，您可以使用`histget('cmd', -1)`获取调用命令的命令行，并解析确切的命令调用，包括原始范围（然后可以通过将其传递给另一个命令来重新使用它，但使用它进行行算术是有问题的，因为它是原始范围，而不是实际的行号）。该解决方法仅适用于交互式命令，很脆弱，并且需要一些努力。也许您可以通过定义两个不同的命令来完全避免这个问题。

# jquery - jQuery .val() 获取和设置问题

> ID：12907439
> 
> 赞同：0
> 
> 时间：2012-10-16T04:14:30.303
> 
> 标签：jquery, asp.net

我使用 jQuery 已经有一段时间了，这对我来说毫无意义。谁能解释为什么会这样？我有一个隐藏字段，`<asp:HiddenField ID="hidIsValid" runat="server" />` 我有这个代码为它分配一个值。

这花了我几个小时才决定尝试改变我设置值的方式，现在它可以工作了，但似乎这是错误的方式：

```
 $('#<%= hidIsValid.ClientID %>').val("true");  **This line never worked
  $('#<%= hidIsValid.ClientID %>').val() = "true";  **this line does work 
```

我来自这里，我取出了很多代码，这只是没有显示相关的行。

```
 function fnValidateAttendees() {
       // $('#<%= hidIsValid.ClientID %>').val("true");  **This line never worked
        $('#<%= hidIsValid.ClientID %>').val() = "true";            
        $('.tFirstName, .tLastName').each(function () {
            if (!($(this).val().match(/^[a-z -']+$/))) {                    
                $('#<%= hidIsValid.ClientID %>').val("false"); //**this line works
            }              
        });
        $('.tPhoneNumber').each(function () {
            if (!($(this).val().match(/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/))) {                   
                $('#<%= hidIsValid.ClientID %>').val("false"); //**this line works
            }
        });
        $('.tEmail').each(function () {
            if (!($(this).val().match(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/))) {
                $('#<%= hidIsValid.ClientID %>').val("false"); //this line works
            }
        });
        return true;
    } 
```

有人能理解吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:18:02.957

你怎么能说这不起作用..

使用 .val() 设置值不会立即反映在 DOM 中。

也许这就是你觉得它不起作用的原因..

这也没有任何意义..

```
$('#<%= hidIsValid.ClientID %>').val() = "true"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:29:06.353

您可以使用`attr`jQuery API 来设置值。

```
$('#<%= hidIsValid.ClientID %>').attr('value','true'); 
```

或尝试删除引号。

```
$('#<%= hidIsValid.ClientID %>').val(true); 
```

# variables - 我如何必须以非此即彼的方式使用值？

> ID：12907440
> 
> 赞同：1
> 
> 时间：2012-10-16T04:14:47.003
> 
> 标签：variables, dynamic, int

我正在尝试制作简单的扑克游戏，并指出 A 的“数字”可能是 13 或 0（A 高与 A 低）。当我使用冒泡排序来确定顺子时，我想将 Ace 的编号分配给 1 和 13。我知道 Java 不支持动态变量，但是有没有一种方法可以在这种情况下返回两个值的 int它被解读为非此即彼的一种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:23:37.980

为什么你只是不返回两个元素的向量？另一种方法是在 Java 中创建一个元组，解决方案在这里： [Using Pairs or 2-tuples in Java](https://stackoverflow.com/questions/2670982/using-tuples-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:44:56.437

如果在冒泡排序的每次迭代中，您都进行了具有 2 个可能值的比较，那么根据您的比较方式，您最终会得到不一致的排序，例如：

您希望这些输入的排序结果是什么：K(11)、A(01,13)、Q(12) 在第一步之后，您希望 A 在哪里，位置 1 或位置 3？

最简单的事情可能是对它进行两次排序，每次都有不同的 Ace 值

# windows - 有没有办法改变非客户区的 Windows Aero 颜色？

> ID：12907441
> 
> 赞同：3
> 
> 时间：2012-10-16T04:14:47.323
> 
> 标签：windows, winapi, user-interface, aero

我注意到 Windows 已自动将 Windows 的非客户区作为主题的颜色 - Windows Aero。我认为这是一个好主意，因为它使主题在程序之间保持一致，并且界面通常更好。作为一个狡猾的人，我渴望在这里颠覆微软的意图，并获得一个使用我的程序设置的颜色的 GUI，而不是操作系统的设置。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:13:36.473

是的，这是可能的，但您需要使用未记录的函数。这意味着您的程序可能无法在未来版本的 Windows 上运行，或者即使发布了服务包或其他更新。

如果您愿意冒险，[这篇博文将提供完整的详细信息](http://theroadtodelphi.wordpress.com/2011/05/05/changing-the-glass-composition-color-dwm-using-delphi/)，并对功能以及如何使用它们进行逆向工程。它包括您可以实现的屏幕截图： ![Delphi DWM Aero 玻璃变色截图](../Images/61742dec79dc8eff485b584ba7512097.png)

基本上，您需要两个功能：`DwmGetColorizationParameters`和`DwmSetColorizationParameters`. 您传递给它们的结构和方法原型是（在 Delphi 中，但如果您正在使用，我相信您可以转换为 C++）：

```
tagCOLORIZATIONPARAMS = record
  clrColor        : COLORREF;  //ColorizationColor
  clrAftGlow      : COLORREF;  //ColorizationAfterglow
  nIntensity      : UINT;      //ColorizationColorBalance -> 0-100
  clrAftGlowBal   : UINT;      //ColorizationAfterglowBalance
  clrBlurBal      : UINT;      //ColorizationBlurBalance
  clrGlassReflInt : UINT;      //ColorizationGlassReflectionIntensity
  fOpaque         : BOOL;
end;

COLORIZATIONPARAMS=tagCOLORIZATIONPARAMS;
TColorizationParams=COLORIZATIONPARAMS;
PColorizationParams=^TColorizationParams;

TDwmGetColorizationParameters = procedure(out parameters :TColorizationParams); stdcall;
TDwmSetColorizationParameters = procedure(parameters :PColorizationParams; unknown:BOOL); stdcall; 
```

如果您不习惯该语法，则顶部定义一个结构，底部两行是方法原型。^ 表示指针，因此 Set 方法采用指向结构的指针。 [`out`很棘手](http://rvelthuis.de/articles/articles-convert.html#pointerparams)，意味着该方法也采用了指向结构的指针。`procedure`意味着它返回无效。如果您仍然无法阅读它，请发表评论，我将翻译成 C。

您应该能够从中找出您需要的一切，但是如果您想要更多详细信息或使用它的示例，[请阅读博客文章](http://theroadtodelphi.wordpress.com/2011/05/05/changing-the-glass-composition-color-dwm-using-delphi/)。（这是一个很好的帖子，值得流量。）

# jquery-validate - jQuery Validator 不适用于上层验证

> ID：12907446
> 
> 赞同：0
> 
> 时间：2012-10-16T04:15:28.727
> 
> 标签：jquery-validate

我正在验证网页的两个部分，第一个验证部分验证但第二个验证器不是出于某种原因。

```
$(function(){

/* first validation - works*/
jVal = {
    //validate firstName
    'firstName': function(){

        //appends #firstNameInfo with .info to body
        $('body').append('<div id="firstNameInfo" class="info"></div>');

        //create variables
        var firstNameInfo = $('#firstNameInfo');
        var ele = $('#firstName');

        var patt = /^[a-zA-Z][a-zA-Z]{1,20}$/; 

        if(!patt.test(ele.val())) {
            jVal.errors = true;
            firstNameInfo.removeClass('correct').addClass('error');
            ele.removeClass('normal').addClass('wrong');
        }else{
            firstNameInfo.removeClass('error').addClass('correct');
            ele.removeClass('wrong').addClass('normal');
        }
    },

    //validate lastName
    'lastName': function() {

        $('body').append('<div id="lastNameInfo" class="info"></div>');

        var lastNameInfo = $('#lastNameInfo');
        var ele =$('#lastName');

        var patt = /^[a-zA-Z][a-zA-Z]{1,20}$/;

        if(!patt.test(ele.val())){
            jVal.errors = true;
                lastNameInfo.removeClass('correct').addClass('error');
                ele.removeClass('normal').addClass('wrong');
        }else{
            lastNameInfo.removeClass('error').addClass('correct');
            ele.removeClass('wrong').addClass('normal');
        }
    },
    //validate phone

    'phone' : function(){
        $('body').append('<div id="phoneInfo" class="info"></div>');

        var phoneInfo = $('#phoneInfo');
        var ele = $('#phone');

        var patt = /^((\+?1-)?\d\d\d-)?\d\d\d-\d\d\d\d$/;

        if(!patt.test(ele.val())) {
            jVal.errors = true;
            phoneInfo.removeClass('correct').addClass('error');
            ele.removeClass('normal').addClass('wrong');
        }else{
            phoneInfo.removeClass('error').addClass('correct');
            ele.removeClass('wrong').addClass('normal');
        }
    },

    //validate zipcode 
    'zip' : function() {
        $('body').append('<div id="zipInfo" class="info"></div>');

        var zipInfo = $("#zipInfo");
        var ele = $('#content_form #zip');

        var patt = /^\d\d\d\d\d$/;

        if(!patt.test(ele.val())){
            jVal.errors = true;
                zipInfo.removeClass('correct').addClass('error');
                ele.removeClass('normal').addClass('wrong');
        }else{
            zipInfo.removeClass('error').addClass('correct');
            ele.removeClass('wrong').addClass('normal');
        }
    },
    //submit button code
    'sendForm':function(){
        if(!jVal.errors){
            $('#content_form').submit();
        }
    },
};

$('#content_form #submit').click(function(){
    var obj = $.browser.webkit ? $('body') : $('html');
    jVal.errors = false;
    jVal.firstName();
    jVal.lastName();
    jVal.phone();
    jVal.zip();
    jVal.sendForm();

return false;

$('#firstName').change(jVal.firstName);
$('#lastName').change(jVal.lastName);
$('#email').change(jVal.email);
$('#content_form #zip').change(jVal.zip);

}); 
```

/ ***** *******第二次验证不起作用******* *** ***** /***

 ***```
kVal ={

    'zip' : function() {
        $('body').append('<div id="Infozip" class="info"></div>');

        var Infozip = $("#Infozip");
        var ele = $('#form #zip');

        var patt = /^\d\d\d\d\d$/;

        if(!patt.test(ele.val())){
            kVal.error = true;
                Infozip.removeClass('correct').addClass('error');
                ele.removeClass('normal').addClass('wrong');
        }else{
            Infozip.removeClass('error').addClass('correct');
            ele.removeClass('wrong').addClass('normal');
        }
    },
    //submit button code
    'send':function(){
        if(!kVal.errors){
            $('#form').submit();
        }
    },
};

$('#form button#submit').click(function(){
    var obj = $.browser.webkit ? $('body') : $('html');
    kVal.errors = false;
    kVal.zip();
    kVal.send();

return false;

$('#form #zip').change(kVal.zip);
});

}); /*main function closer*/ 
```

首次验证的 HTML - 工作 -

```
<div id="content_form">
            <p>
                <label class="block">
                    <input type="text" id="firstName" type="firstName" autocomplete="on" value="first name">
                </label>
                <label class="block">
                    <input type="text" id="lastName" type="lastName" autocomplete="on" value="last name">
                </label>
                <label class="block">
                    <input type="text" id="phone" type="phone" autocomplete="on" value="phone">
                </label>
                <label class="block">
                    <input type="text" id="zip" type="zip" autocomplete="on" value="zip code">
                </label> 
                <button type="submit" id="submit" value="Submit" title="submit">submit</button>
            </p>
        </div><!-- end form --> 
```

用于第二次验证的 HTML

```
<div id="form">
            <p>
                <label class="block">
                    <input type="text" id="zip" type="zip" autocomplete="on" value="zip code">
                </label> 
                <button type="submit"  id="submit" value="CHECK NOW" title="check now">check now</button>
            </p>        
        </div><!-- end form --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:34:32.987

您`id`在两个 zip 字段上都有相同的内容，这可能会导致您的问题。[jQuery`#id`选择器](http://api.jquery.com/id-selector/)的文档有这样的说法；

> 每个 id 值只能在文档中使用一次。如果为多个元素分配了相同的 ID，**则使用该 ID 的查询将仅选择 DOM 中第一个匹配的元素**。但是，不应依赖此行为；具有多个使用相同 ID 的元素的文档无效。

也就是说，您在中的选择`$('#form #zip').change(kVal.zip);`不会使用`#form`find下的层次结构`#zip`，它仍然会在整个 DOM 中找到第一个实例。***

# kohana - Kohana 3.2 中验证规则的自定义错误消息

> ID：12907452
> 
> 赞同：0
> 
> 时间：2012-10-16T04:16:53.447
> 
> 标签：kohana

我有一个controller=product.php、一个model=category.php 和一个自定义错误消息文件category.php。当我提交空表单时，我收到规则“not_empty”的错误消息，但我没有收到规则“unique_categoryname”的错误消息

请帮忙！

```
class Controller_Product extends Controller_Application
{
    public function action_addcategory()
    {
        $errors='';
        $cat = new Model_Category();

        $validation=Validation::factory($this->request->post())
        ->rule('cat_name',array($cat,'unique_categoryname'));

        if ($validation->check())
        {

            if (HTTP_Request::POST == $this->request->method())
            {
                try
                {

                    $cat_name=$_POST['cat_name'];
                    $cat_description=$_POST['cat_description'];

                    if (isset($_FILES['cat_image']))
                    {
                        $filename = $cat->upload_photo($_FILES['cat_image']);
                    }
                    $cat->InsertCategory($cat_name,$cat_description,$filename);
                    Request::current()->redirect('product/listcategory');
                }

                catch (ORM_Validation_Exception $ex)
                {
                    $errors = $ex->errors('models');
                }
            }
        }

        $view = new View('product/addcategory');
        $view->set("categories",$cat);
        $view->set('errors',$errors);
        $this->template->content=$view;

    }

}

class Model_Category extends ORM
{
public function rules()
    {
        return array(
                'cat_name' => array(
                        array('not_empty'),
                        array('min_length', array(':value', 4)),
                        array('max_length', array(':value', 32)),

                ),

                'cat_description' => array(
                        array('not_empty'),
                        array('min_length', array(':value', 10)),
                ),
        );
    }

}

//Custom error messages page : messages/models/category.php

return array(
        'cat_name' => array(
                'not_empty' => 'You must provide a category name.',
                'min_length' => 'The category name must be at least :param2 characters long.',
                'max_length' => 'The category name must be less than :param2 characters long.',
                'unique_categoryname'=> 'Category Name already exists, please change',

        ),
        'cat_description' => array(
                'not_empty' => 'You must provide category description .',
                'min_length' => 'The category description must be at least :param2 characters long.',
        ),
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:51:57.567

您需要将您的传递`$validation`给 ORM 保存/更新方法。
假设`InsertCategory`是一个用于保存的包装器，您应该将它传递到那里：

```
$cat->InsertCategory($cat_name, $cat_description, $filename, $validation); 
```

然后在`InsertCategor`y 方法中：

```
public function InsertCategory(....)
{
   // .....
   $this->save($validation);
} 
```

请注意，Kohana 3.2 中有一个错误，外部验证消息转到**_external.php**文件。您可以在此处找到更多信息：http: [//kohanaframework.org/3.2/guide/orm/validation#external-validation](http://kohanaframework.org/3.2/guide/orm/validation#external-validation)

# java - 从本地驱动器识别映射驱动器

> ID：12907453
> 
> 赞同：5
> 
> 时间：2012-10-16T04:17:16.360
> 
> 标签：java, java-io

我使用 Java 中的 File.listRoots() 在我的桌面上列出所有可用的驱动器。我有一些映射驱动器。当我列出根目录时，它会获取我的本地驱动器和映射驱动器。为了排除映射驱动器，我使用了以下代码片段：

```
for (File drive :File.listRoots()){
   String typeDescription = FileSystemView.getFileSystemView().getSystemTypeDescription(drive);
} 
```

根据返回的类型描述，我正在过滤驱动器。但这不是通用标准，其他操作系统也不能接受。仅支持 Windows。还有语言限制（类型描述仅支持英语）。谁能给我任何其他解决方案来全局过滤映射的驱动器。

注意：
必须是JDK1.6特有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:48:07.790

如果您的问题仅在 Windows 中，为什么不使用：

`if (System.getProperty("os.name").contains("Windows"))`?

您可以编写一个 C++ 程序来独立使用（人类）语言来完成它`IVdsDisk::GetProperties`，然后将其作为 Java 中的函数导入（并告诉 VM 仅在您运行 Windows`native`时尝试运行该方法。`native`

[帮助您入门的 MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381752%28v=vs.85%29.aspx)

检查`VDS_DISK_PROP.dwMediaType`是 a`FILE_DEVICE_NETWORK`还是 a `FILE_DEVICE_NETWORK_FILE_SYSTEM`。您可以在此处查看所有支持的类型：[winioctrl.h](http://www.cs.uofs.edu/~beidler/Ada/win32/win32-winioctl.ads)

在 Java 中可能可以访问值，但 Java 通常没有特定于平台的东西，所以我对此表示怀疑。

# c++ - 检查终端中的参数

> ID：12907454
> 
> 赞同：-2
> 
> 时间：2012-10-16T04:17:24.673
> 
> 标签：c++, linux

如何编写程序来检查终端中的参数是否正确？

例如，如果我有一个程序`hello.cpp`并且我想将其称为：

```
./hello yes 10 
```

我希望程序确保第一个参数是或否，第二个参数是 1-10 之间的数字。那么如何将这些参数读入我的程序中进行检查呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:21:59.043

命令行参数作为计数和单独的字符串`argc`传递`argv`给`main()`.

```
int main(int argc, char *argv[])
{
   ...
} 
```

只需检查 in 中的值`argc`和字符串中`argv`的适当值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T04:24:43.080

你的意思是这样执行，./hello yes 10

c 中有一个选项 argc 和 argv，其中 argc 是传递的参数的数量，带有索引的 argv 显示传递的参数本身。

看看下面的代码迭代所有参数。

```
int main(int argc, char *argv[]){
    int i = 0;
    for (i = 0; i < argc; i++) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:42:18.733

正如其他用户所提到的，`main`函数是程序的[入口点](http://en.wikipedia.org/wiki/Main_function)，它从命令行获取数据的方式是通过它的参数。

第一个`int`参数是传递的所有参数的计数，包括程序名，第二个`char **`参数是指向每个传递的参数的指针，包括程序名：

```
int main
(
    int argc,       // <-- how many parameters has been provided? 
    char **argv,    // <-- what values has each parameter?
)
{
    ...
    return 0;
} 
```

因此，知道这一点，您的电话`./hello yes 10`必须是这样的：

```
argc = 3
argv[0] = "./hello"
argv[1] = "yes"
argv[2] = "10" 
```

名称`argc`和`argv`只是一个约定，您可以随意命名它们，但最好保留每个人都使用的名称。

并且这个论点并没有被迫成为他们必须遵循一个非常严格的惯例，从[这个答案](https://stackoverflow.com/a/1621664/499359)`int, char **`中借用：

> 它应该有一个 int 类型的返回类型，否则它的类型是实现定义的。所有实现都应允许以下 main 定义：int main() 和 int main(int argc, char* argv[])

知道了这一点，让我们专注于您的问题：

首先，您必须确保传递了 2 个参数，因此您必须检查`argc`值并确保完全等于`3`。

> 第一个论点是是或否

接下来，您必须将您的`argv[1]`（因为`0`包含程序名称）存储到一个字符串中，并将其与值`"yes"`和进行比较`"no"`：

```
 std::string YesOrNo(argv[1]);
    if (YesOrNo == "yes" || YesOrNo == "no") 
```

最后，您必须将您的值存储`argv[2]`为一个整数并检查它是否等于或小于`10`：

```
 std::stringstream Stream;
    int Value = 0;
    Stream << argv[2];
    Stream >> Value;

    if (Value <= 10) 
```

所以，结果是：

```
int main(int argc, char **argv)
{
    if (argc == 3)
    {
        std::string YesOrNo(argv[1]);

        if (YesOrNo == "yes" || YesOrNo == "no")
        {
            std::stringstream Stream;
            int Value = 0;
            Stream << argv[2];
            Stream >> Value;

            if (Value <= 10)
            {
                // Your stuff..
            }
        }
    }

    return 0;
} 
```

我让你处理所有大写和小写的东西以及带有数字参数的误报，至少我不会做你*所有*的功课；）

# c++ - WIC Direct2D CreateBitmapFromMemory：宽度和高度的限制？

> ID：12907455
> 
> 赞同：2
> 
> 时间：2012-10-16T04:17:24.537
> 
> 标签：c++, direct2d, wic

CreateBitmapFromMemory 在**_nWidth**等于**或小于 644**时执行成功。 如果该值超过此值，则 HRESULT 值为 -2003292276

宽度和高度是否存在限制？

```
#include <d2d1.h>
#include <d2d1helper.h>

#include <wincodecsdk.h> // Use this for WIC Direct2D functions

void test() 
{
    IWICImagingFactory     *m_pIWICFactory;   
    ID2D1Factory           *m_pD2DFactory;
    IWICBitmap             *m_pEmbeddedBitmap;
    ID2D1Bitmap            *m_pD2DBitmap;

    unsigned char *pImageBuffer = new unsigned char[1024*1024];

    HRESULT hr = S_OK;

    int _nHeight = 300;
    int _nWidth =  644; 
```

如果 nWidth 超过 644，则 CreateBitmapFromMemory 返回错误。

```
 //_nWidth =  648;

    if (m_pIWICFactory == 0 )
    {
        hr = CoInitializeEx(NULL, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE);

        // Create WIC factory
        hr = CoCreateInstance(
            CLSID_WICImagingFactory,
            NULL,
            CLSCTX_INPROC_SERVER,
            IID_PPV_ARGS(&m_pIWICFactory)
            );

        if (SUCCEEDED(hr))
        {
            // Create D2D factory
            hr = D2D1CreateFactory( D2D1_FACTORY_TYPE_SINGLE_THREADED, &m_pD2DFactory );
        }
    }

     hr = m_pIWICFactory->CreateBitmapFromMemory(
        _nHeight,   // height
        _nWidth,  // width
        GUID_WICPixelFormat24bppRGB, // pixel format of the NEW bitmap
        _nWidth*3,  // calculated from width and bpp information
        1024*1024, // height x width
        pImageBuffer, // name of the .c array
        &m_pEmbeddedBitmap  // pointer to pointer to whatever an IWICBitmap is.
        ); 

    if (!SUCCEEDED(hr)) {
        char *buffer = "Error in CreateBitmapFromMemory\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:36:32.840

错误代码是[0x88982F8C`WINCODEC_ERR_INSUFFICIENTBUFFER`](http://alax.info/blog/1383)原因现在很明显？

第[一个参数是宽度](http://msdn.microsoft.com/en-us/library/windows/desktop/ee690291%28v=vs.85%29.aspx)，第二个是高度。您的顺序错误。总而言之，您提供的参数不正确会导致缓冲区损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:46:24.290

GPU 上的图像尺寸有上限。

在渲染目标上调用 GetMaximumBitmapSize。 [http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(GetMaximumBitmapSize);k(DevLang-C%2B%2B);k(TargetOS-Windows)&rd=true](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(GetMaximumBitmapSize);k(DevLang-C%2B%2B);k(TargetOS-Windows)&rd=true)

你得到的是垂直或水平的最大像素。对于较大的图像，您必须将它们加载到软件渲染目标（例如位图渲染目标）中，然后从中渲染您想要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:30:50.993

你确定你为函数 CreateBitmapFromMemory 传入了正确的 pixelFormat 吗？您将其硬编码为 GUID_WICPixelFormat24bppRGB，我认为这是根本原因，您应该确保此格式与您从中复制数据的源位图的格式相同。尝试使用 GetPixelFormat 函数来获取正确的格式而不是硬代码。

# php - 在 PHP 中以特殊字符剪切字符串

> ID：12907458
> 
> 赞同：3
> 
> 时间：2012-10-16T04:17:56.903
> 
> 标签：php, string

我正在搜索一个函数来剪切以下字符串并获取之前和之后的所有内容

```
I need this part<!-- more -->and also this part 
```

结果应该是

```
$result[0] = "I need this part"
$result[1] = "and also this part" 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T04:22:30.620

像这样使用`explode()`PHP 中的函数：

```
$string = "I need this part<!-- more -->and the other part.
$result = explode('<!-- more -->`, $string) // 1st = needle -> 2nd = string 
```

然后你调用你的结果：

```
echo $result[0]; // Echoes: I need that part
echo $result[1]; // Echoes: and the other part. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:24:06.253

您可以使用正则表达式轻松完成此操作。可能有人在为使用正则表达式解析 HTML/XML 而哭泣，但是没有太多上下文，我将给你我所拥有的最好的：

```
$data = 'I need this part<!-- more -->and also this part';

$result = array();
preg_match('/^(.+?)<!--.+?-->(.+)$/', $data, $result);

echo $result[1]; // I need this part
echo $result[2]; // and also this part 
```

如果您正在解析 HTML，请考虑阅读有关[在 PHP 中解析 HTML 的](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:27:39.510

使用[preg_split](http://php.net/manual/en/function.preg-split.php)。也许是这样的：

```
<?php
$result = preg_split("/<!--.+?-->/", "I need this part<!-- more -->and also this part");
print_r($result);
?> 
```

输出：

```
Array
(
    [0] => I need this part
    [1] => and also this part
) 
```

# javascript - JavaScript 计时器向前跳

> ID：12907462
> 
> 赞同：0
> 
> 时间：2012-10-16T04:18:22.033
> 
> 标签：javascript, jquery

大家好，请检查这段代码，第一部分来自 innit，第二部分是我的计时器功能。非常感谢！

我设置了一个 15 分钟的计时器。在 cookie 中保存时间并在初始化时读取保存的时间

```
var cc=readCookie("agreement");
var ct=readCookie("secondsleft");

if (ct == null || ct == '') {
    secondsleft = 15*60;
} else {
    secondsleft = parseInt(ct);
}

myInterval = setInterval(bingoTimer,1000); 
```

谁能看到为什么刷新后这段代码会跳转到 0:13？

```
function bingoTimer() {
    secondsleft--;

    if (secondsleft < 0) {

    } else {
        var minLeft = parseInt(secondsleft / 60);
        var secLeft = secondsleft - minLeft * 60;
        var timeLeft = " " + minLeft+":" + secLeft;
        var timeCookie = createCookie("secondsleft", timeLeft);
        $('#timer').html(timeLeft);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:41:08.790

我相信 parseInt 解析它可以在字符串中找到的第一个整数值。在您的示例中，您将时间保存为以下格式：“minLeft:secLeft”。我认为 parseInt 只会解析 minLeft 部分并忽略“：”之后的字符串的其余部分。所以你的 13 分钟和几秒钟被解析为 13 秒 secondsleft = parseInt(ct);

尝试将 createCookie("secondsleft", timeLeft) 更改为 createCookie("secondsleft", secondsleft.toString())。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:12:03.730

这是工作[小提琴](http://jsfiddle.net/C86Su/25/)

你的问题是：

```
var timeCookie = createCookie("secondsleft", timeLeft); 
```

timelLeft 是一个字符串（“14:59”），所以在解析 int 后它被转换为 14，-1 你得到“0:13”。您需要在几秒钟内完成价值：

```
var timeCookie = createCookie("secondsleft", secondsleft); 
```

# c++ - 将静态数组传递给 C++ 中的函数

> ID：12907463
> 
> 赞同：5
> 
> 时间：2012-10-16T04:18:27.193
> 
> 标签：c++, visual-c++

使用定义的函数...

```
void func (int a [3]) { ... } 
```

我希望能够像这样传递一个动态静态数组

```
func (new int [3] {1,2,3}); 
```

代替...

```
int temp [3] = {1,2,3};
func(temp); 
```

这对 C++ 可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T04:25:40.790

如果你有一个 C++11 编译器，`func (new int [3] {1,2,3});`可以正常工作（但是，请记住你负责`delete`内存）。使用 gcc，只需传递`-std=c++11`标志。

但是，请查看，`std::array`因此您不必使用`new`：

**例子**

```
void func (std::array<int, 3> a)
{
}

int main()
{
    func({{1, 2, 3}});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:26:53.050

它适用于我的编译器（带有 CDT 扩展的 Eclipse indigo），但它会发出警告，暗示它可能不适用于所有环境：

扩展初始化列表仅适用于 -std=c++0x 或 -std=gnu++0x [默认启用]

这是我的测试代码：

```
void func (int a[3])
{
cout << a[2];
}

int main()
{
    func(new int[3]{1,3,8});
} 
```

成功将“8”打印到控制台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T04:30:38.257

您的示例`new int [3] {1,2,3}`工作得很好，但是每次调用它时都会在堆上分配一个数组。

您应该能够使用类型转换在堆栈上执行此操作：

```
func((int[]){1,2,3}); 
```

# ios - 活动监视器显示我的 CPU 使用率超过 100% ???(iOS)

> ID：12907464
> 
> 赞同：10
> 
> 时间：2012-10-16T04:18:31.000
> 
> 标签：ios, xcode, memory, cpu-usage, activity-monitor

我的 Messenger 应用程序使用超过 100% 的 CPU 使用率。一个程序如何使用比我更多的 CPU？这个百分比是根据什么计算的？![显示更多 CPU 使用率的活动监视器的屏幕截图](../Images/823df303718bc93f1404984ca71c3f6d.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T04:23:49.200

它是每个 CPU 核心。双核 CPU 可以达到 200%，4 核可以达到 400%，等等。

# ios - 如何在 XCode for iOS 中为不同的目标设置不同的代码？

> ID：12907469
> 
> 赞同：3
> 
> 时间：2012-10-16T04:19:51.430
> 
> 标签：ios, xcode

我有一个定义了几个不同目标的应用程序。我知道我可以使用预处理器指令为不同的目标提供不同的代码部分，但是命名约定是如何工作的呢？例如，如果我有两个名为“Smith”和“Smith Plus”的目标，它们如何翻译？

```
#if (Smith)
#elif (Smith Plus)
#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:28:30.817

你基本上是对的。

在您的项目设置中，当您单击目标时，您将看到“构建设置”选项卡。在那里搜索预处理器宏。对于您的 smith 目标，添加预处理器宏“SMITH=1”。对您的 smith plus 目标执行相同操作 (SMITH_PLUS=1)。

然后，在您的代码中，您只需使用您自己说明的内容：

```
#if SMITH
    // do something
#elif SMITH_PLUS
   // do something else
#endif 
```

# string - 用 perl 分割字符串

> ID：12907471
> 
> 赞同：1
> 
> 时间：2012-10-16T04:20:08.963
> 
> 标签：string, perl, split

我有一大段文字会通过。我想拆分块，使其不超过 50 个字符。我可以做那部分，但我真正需要的是它不会在单词中间分裂，而是在空白处。例如，如果我有这句话：Hello world？我想拆分这个字符串！

例如，在那个字符串上我想拆分它，所以每个段不超过 10 个字符，但我不想拆分一个单词。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:33:27.170

```
use Text::Wrap qw( wrap );

sub my_wrap {
    local $Text::Wrap::columns = 10;
    return wrap('', '', @_);
}

say my_wrap("Hello, World!"); 
```

[文本换行](http://search.cpan.org/perldoc?Text%3a%3aWrap)

# ssl - SSL 使用 .net mq 客户端 SSLV3 连接到 MQ？

> ID：12907472
> 
> 赞同：1
> 
> 时间：2012-10-16T04:20:13.007
> 
> 标签：ssl, ibm-mq

由于以下问题，目前我在连接服务器时遇到问题：

当我尝试连接到服务器时，它返回了一个错误：`MQRC_SSL_INITIALIZATION_ERROR`

**通过WireShark**仔细分析后，我发现客户端正在尝试使用**SSL v2**连接到服务器，而服务器只能接受**SSL V3**，从而拒绝连接。

我检查了文档，但找不到任何有关 .Net 客户端支持的 SSL 版本的信息。

我想检查 SSL 版本是否由 .Net MQ 客户端控制，如果是，我们如何配置以使其通过 SSL v3 连接？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:45:15.393

我不确定我是否同意您的结论，因为 WMQ[至少从 V6.0](http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/topic/com.ibm.mq.csqzas.doc/sy10710_.htm)开始支持 SSL V3.0 和 TLS V1.0 ，可能更早。这更有可能是客户端和服务器之间的配置不匹配。我建议解决 SSL/TLS 问题的过程如下：

我在 WMQ 上调试 SSL 连接的方法是按照以下顺序进行，确保每个步骤在进行下一步之前都有效：

1.  让通道在没有 SSL 的情况下运行。这将验证通道名称是否拼写正确、端点之间存在网络路由、QMgr 的侦听器正在运行以及客户端是否指向正确的端口。您会惊讶于有多少次有人输入错误的端口或通道名称。
2.  让通道在 SVRCONN 定义设置为 的情况下运行`SSLCAUTH(OPTIONAL)`。这将执行与您的浏览器类似的匿名 SSL 连接。QMgr 向客户端提供证书，但客户端没有义务发回证书。这验证了 QMgr 可以找到它的证书，并且客户端可以找到它的信任存储并正确验证 QMgr 的证书。（*注意：QMgr 将始终请求客户端证书，如果存在，客户端将始终发送它。要执行此测试，请使用具有签名者证书但不包含应用程序个人证书的客户端密钥库的副本。复制keystore并从副本中删除个人证书。请勿删除原始！*）
3.  将 SVRCONN 通道设置为`SSLCAUTH(REQUIRED)`。这现在需要客户端找到它的密钥库（在最后一步中它只需要它的信任库）并能够找到它的证书。它还要求 QMgr 能够验证客户端的证书。
4.  设置 SSLPEER 或 CHLAUTH 映射规则以缩小将在通道上接受的已验证证书的数量。

第 2 步和第 3 步之间的区别有助于通过一次仅在一个方向上测试 SSL 凭证交换来隔离问题。这使您可以确定问题是存在于个人证书还是公共证书中，以及在通道的哪一侧。几乎所有的问题都在这两步中得到解决。

**更新**
注释以回答问题。SSL/TLS 使用两种类型的证书。个人证书包含私钥，并且不会被传递。公开证书是包含公钥的证书，可以自由发放。私钥保存在密钥库中。公钥（通常是 CA 的根证书和中间证书）存储在信任库中。在某些情况下，这些是单独的文件。例如，在 Java 和 JMS 中，JSSE 提供程序在环境中查找指向密钥库和信任库的变量。在 Java 和 JMS 中，密钥库和信任库变量可能指向同一个文件。

对于 Java 以外的 WebSphere MQ 服务器和客户端，密钥库和信任库合并到一个位置。通常称为 kdb 文件，它实际上是一个 CMS 密钥数据库，由多个文件组成，其中一个是 KDB。在这种情况下，“密钥库”实际上是组合密钥库和信任库的简写。对于 .Net 客户端，在[MQEnviornment](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzav.doc/un10790_.htm)中设置密钥库位置和其他 SSL 属性。

在 SSL/TLS 握手中，服务器*总是*发送其公共证书以响应连接请求。然后，客户端必须通过首先检查签名和有效日期来验证该证书，然后在其信任库中查找签署该证书的内容。如果签署证书的东西是中间签署者证书（它本身已被某物签署），那么搜索将继续沿着签署者证书链向上直到到达根证书。假设服务器已通过身份验证，则通过让客户端提供证书并由服务器验证它来反向应用相同的过程。

当过程在步骤 #2 中失败时，我们可以使用上述过程的知识进行调试。QMgr 必须首先在其密钥库中找到其证书并将其呈现给客户端。如果 QMgr 找不到它的证书，结果是 AMQERR01.LOG 文件中的错误说明了这一点。当事情在第 2 步中消失时，请始终首先查看 QMgr 方面！

如果 QMgr*确实*找到了它的证书，那么下一步是客户端必须能够找到它的信任库，然后在该信任库中必须找到必要的签名者证书链。如果这失败了，客户端应该有错误来表明这一点。例如，设置客户端环境时的一个常见错误是指定整个文件名，包括 .kdb 扩展名。发生这种情况时，QMgr 会查找`[keystorename].kdb.kdb`不存在的内容。另一个常见错误是个人证书存在于密钥库中但标签错误。非 Java WMQ 客户端通过标签名称查找证书，该标签名称由文字字符串`ibmwebspheremq`后跟小写的用户 ID 构成。例如，如果我的用户 ID 是，`TRob`那么我的证书标签将是`ibmwebspheremqtrob`. 请注意，这是密钥库中的证书标签，而不是证书公用名或专有名称中的其他字段。

根据使用的客户端类型，这些可能位于 Windows 错误日志、本地 MQ 错误日志或其他位置。如果您找不到客户端错误，[WMQ 跟踪](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaf.doc/cs12880_.htm)也是一种选择。

# java - NoClassDefFoundError 使用 Java 中的 Scala 类

> ID：12907475
> 
> 赞同：11
> 
> 时间：2012-10-16T04:20:17.343
> 
> 标签：java, scala, interop, noclassdeffounderror

我没有使用 Scala 的经验，所以这个问题可能是初级的。我正在尝试在 Java 中使用 Scala 类，基于本教程中的“Person”示例：http: [//www.codecommit.com/blog/java/interop-between-java-and-scala](http://www.codecommit.com/blog/java/interop-between-java-and-scala)

我创建了两个源文件，一个 Scala 和一个 Java，如下所示。

Person.scala：

```
class Person {
  def getName() = "Daniel Spiewak"
} 
```

测试.java：

```
public class Test {
  public static void main(String[] args) {
    Person p = new Person();
    p.getName();
  }
} 
```

我可以编译（带有我不理解的警告），但是当我尝试运行该程序时会收到 ClassNotFoundException。

```
$ scalac Person.scala
$ javac 测试.java
./Person.class：警告：在“ScalaSignature”类型中找不到注释方法“bytes()”：找不到 scala.reflect.ScalaSignature 的类文件
1 个警告
$ java 测试
线程“主”java.lang.NoClassDefFoundError 中的异常：scala/ScalaObject
        在 java.lang.ClassLoader.defineClass1（本机方法）
        在 java.lang.ClassLoader.defineClass(ClassLoader.java:787)
        在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        在 java.net.URLClassLoader.defineClass(URLClassLoader.java:447)
        在 java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        在 Test.main(Test.java:3)
引起：java.lang.ClassNotFoundException：scala.ScalaObject
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 13 更多

```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T04:26:06.950

您需要包含 Scala 运行时库才能使用 Scala 类。这是编译器警告和运行时错误的原因。

试试这个

```
 java -cp .:scala-library.jar Test 
```

（jar 文件的名称可能不同，但重点是将其添加到您的类路径中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:28:38.777

你把 scala-library.jar 放在你的类路径中了吗？似乎您忘记了这一点，因此 JVM 无法为 Scala 运行时找到一些内部类。

在您的链接[http://www.codecommit.com/blog/java/interop-between-java-and-scala](http://www.codecommit.com/blog/java/interop-between-java-and-scala)：

> 只需将 scala-library.jar 粘贴到您的类路径中，您的所有 Scala 类都应该在您的 Java 应用程序中随时可用。

# java - 如何减少 JAXB 上下文开销？

> ID：12907478
> 
> 赞同：4
> 
> 时间：2012-10-16T04:20:46.533
> 
> 标签：java, web-services, jaxb, cxf

我有一个使用 CXF 公开多个 Web 服务的服务器。
我使用 JAXB 进行 XML 序列化。
我在 JAXB 上下文中有大约 3000 个类，需要 60 MB 的内存，这对于我的环境来说太多了。
有没有提供 Web 服务/XML 序列化的轻量级替代方案？（其他实现）
我尝试使用标志 com.sun.xml.bind.v2.runtime.JAXBContextImpl.fastBoot 但它并没有显着改变内存使用情况。
* 我已经为整个系统保存了一个上下文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:19:54.857

CXF 支持除 JAXB 之外的数据绑定，例如 XMLBeans、Aegis 等。交换数据绑定非常简单。您可以对每个数据绑定进行试验，看看哪个绑定占用的内存最少。

在我的实验中，记忆从来都不是问题。我更关心吞吐量。在编组和解组请求和响应方面，XMLBeans 比 JAXB 快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:28:50.803

这里有一个线程谈论类似的问题。看来他们对流行的序列化做了一些分析。

[如何快速序列化/反序列化复杂的java对象](https://stackoverflow.com/questions/12435491/how-to-serialize-deserialize-complex-java-object-quickly)

# c - C pthread同步函数

> ID：12907479
> 
> 赞同：13
> 
> 时间：2012-10-16T04:20:47.363
> 
> 标签：c, synchronization, pthreads

pthread 库中是否有同步线程的函数？不是互斥锁，不是信号量，只是一个调用函数。它应该锁定进入该点的线程，直到所有线程都达到这样的功能。例如：

```
function thread_worker(){
    //hard working

    syncThreads();
    printf("all threads are sync\n");
} 
```

所以 printf 仅在所有线程结束辛勤工作时才被调用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T04:29:28.973

正确的方法是使用*屏障*。`pthread`支持使用`pthread_barrier_t`. 您使用需要同步的线程数对其进行初始化，然后您只需使用`pthread_barrier_wait`这些线程即可同步。

例子：

```
pthread_barrier_t barr;

void thread_worker() {
    // do work
    // now make all the threads sync up
    int res = pthread_barrier_wait(&barr);
    if(res == PTHREAD_BARRIER_SERIAL_THREAD) {
        // this is the unique "serial thread"; you can e.g. combine some results here
    } else if(res != 0) {
        // error occurred
    } else {
        // non-serial thread released
    }
}

int main() {
    int nthreads = 5;
    pthread_barrier_init(&barr, NULL, nthreads);

    int i;
    for(i=0; i<nthreads; i++) {
        // create threads
    }
} 
```

# iphone - 将手机照片复制到应用目录

> ID：12907487
> 
> 赞同：0
> 
> 时间：2012-10-16T04:22:33.520
> 
> 标签：iphone, ios

我正在开发一个 iPhone 应用程序，它使用用户的照片来创建一张新的特殊照片。我想将特殊照片存储在我的应用程序中，但让用户能够使用原始照片进行更改。

当用户从手机相册中删除原始照片时会发生什么？

我应该将原始照片的副本保存到我的应用程序中，以防万一吗？或者，还有更好的方法？

我的问题类似于[iOS 在应用程序特定相册中保存照片](https://stackoverflow.com/questions/11972185/ios-save-photo-in-an-app-specific-album)，但我想知道这是否是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:16:35.660

您可以在应用程序的文档目录中保存照片/图像的副本，并在需要时从那里访问它。因此，如果有人将其从原始位置删除，您将获得一份副本。

# android - ListView 中的 ViewPager - 动态测量高度（适配器中的 WRAP_CONTENT 膨胀）

> ID：12907489
> 
> 赞同：3
> 
> 时间：2012-10-16T04:22:40.837
> 
> 标签：android, android-layout, android-viewpager

我正在做的是一个 ListView。该 ListView 使用适配器来扩展仅包含一个 ViewPager 的 RelativeLayout。

在适配器的 getView 中，为 ViewPager 实例化自定义 PagerAdapter，并为 ViewPager 调用 .setAdapter。在调用 setAdapter 之后，我执行返回行或返回视图；这结束了 ListView 中该适配器的 getView 方法。

在我已经实现的 PagerAdapter

```
public Object instantiateItem(View collection, int position) {} 
```

这基本上是为 Pager Adapter 设置子视图（页面）的内容。它会膨胀和设置所有子视图，然后将视图添加到集合中。

我认为问题在于，在行中完成返回后，PagerAdapter 还没有完成对子项的设置，所以 ListView 认为 ViewPager 是空的，并以这种方式将其绘制到屏幕上。我所做的基本上是我认为的黑客行为。

我尝试使用以下方法测量 instanceiteItem 中的第一个子视图：

```
view.measure(MeasureSpec.makeMeasureSpec(widthMeasureSpecSize, MeasureSpec.AT_MOST), MeasureSpec.makeMeasureSpec(heightMeasureSpecSize, MeasureSpec.UNSPECIFIED));
((Pager) collection).requestedHeight = view.getMeasuredHeight(); 
```

值 heightMeasureSpecSize 实际上是在调用 .setAdapter 之前由 listView 适配器设置的公共属性。 ((Pager) 集合).requestedHeight 是我在扩展 ViewPager 本身时创建的另一个属性。在为其设置值之前，它默认为 100。然后我像这样覆盖了 onMeasure 方法：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
    super.onMeasure(widthMeasureSpec, View.MeasureSpec.makeMeasureSpec(requestedHeight, View.MeasureSpec.AT_MOST));
} 
```

使用所有这些代码，当我运行应用程序时，每当在 ViewPager 上调用 onMeasure 时，ListView 似乎都会将 ViewPager 添加到 100 的列表中，然后使用 onMeasure 重新计算并使用第一个孩子的 measureHeight 重绘项目查看寻呼机....

这一切都是因为 wrap_content 在 ViewPager 中被破坏了。有没有比这样做更好的方法？这似乎非常低效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T22:16:28.633

这是我的解决方案：

```
 ViewTreeObserver viewTreeObserver = mViewPager.getViewTreeObserver();
    viewTreeObserver
            .addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

                @Override
                public void onGlobalLayout() {

                    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.WRAP_CONTENT,
                            LinearLayout.LayoutParams.WRAP_CONTENT);

                    int viewPagerWidth = mViewPager.getWidth();
                    float viewPagerHeight = (float) (viewPagerWidth * FEATURED_IMAGE_RATIO);

                    layoutParams.width = viewPagerWidth;
                    layoutParams.height = (int) viewPagerHeight;

                    mViewPager.setLayoutParams(layoutParams);
                    mViewPager.getViewTreeObserver()
                            .removeGlobalOnLayoutListener(this);
                }
            }); 
```

我测量然后调整高度。希望能帮助到你。

# regex - RewriteRule: ^ vs ^(.*)$ vs ^.*$ 有区别吗？

> ID：12907493
> 
> 赞同：2
> 
> 时间：2012-10-16T04:24:01.540
> 
> 标签：regex, mod-rewrite

`^`在 RewriteRule 中使用vs `^(.*)$`vs`^.*$`作为通配符有什么区别？

我的目标是将[http://carnarianism.com/ （任何东西）重定向到](http://carnarianism.com/)[http://carnarian.com/](http://carnarian.com/)的登陆（默认）页面。我找到了以下解决方案，它们似乎都有效，所以我想知道哪个对性能更好？

```
RewriteRule ^ http://carnarian.com/ [R=301,L]
RewriteRule ^.*$ http://carnarian.com/ [R=301,L]
RewriteRule ^(.*)$ http://carnarian.com/ [R=301,L] 
```

所有这些似乎都可以正常工作。这是我在 StackOverflow 上的第一篇文章，大多数时候我可以通过搜索找到答案。

需要明确的是：在我的 .htaccess 中被质疑的 RewriteRule 是一个 RewriteCond 和 WWW 处理程序，如下所示：

```
RewriteEngine On
RewriteBase /

# FROM www. --TO-- NO www.  See no-www.org
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RewriteCond %{HTTP_HOST} carnarianism\.com$ [NC]
########## The Above Questioned RewriteRule ??? ##########
RewriteRule ^ http://carnarian.com/ [R=301,L] 
```

注意：我使用以下内容开始此搜索，但我不想要以下内容，因为路径也通过了，我希望它只进入登录页面。因此，我知道您需要括号才能使用 $1 变量。我不想要 $1 变量。

```
RewriteRule ^(.*)$ http://carnarian.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:35:52.883

*   `^`使原始 URL 不能作为反向引用访问。`$0`是一个空字符串。
*   `^.*$`使整个原始 URL 可作为`$0`反向引用访问（因此您可以这样做`http://example.com/oldurl.php?url=$0`）
*   `^(.*)`使整个原始 URL 可作为后向引用`$0`和后向`$1`引用访问；当您想在替换中实际使用旧 URL 时，通常会使用它，因为它更明确地说明了使用。

它们都匹配相同的东西，但产生不同的反向引用组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T11:37:20.817

性能更好的一个是您自己进行基准测试的那个。

但是由于您使用的是`.htaccess`文件而不是直接在服务器中进行此配置（可能通过 VirtualHost？），它只解析一次，所以这并不重要。在每个请求中解析`.htaccess`文件比执行正则表达式要花费数千倍的时间。

如果你关心性能，你永远不应该使用`.htaccess`文件，甚至禁用它们的解析：`AllowOverride None`. 不禁用它们，并且有这样的请求：`http://example.com/sites/css/theme/main.css`Apache 仍将尝试加载以下所有文件：

*   `.htaccess`
*   `sites/.htaccess`
*   `sites/css/.htaccess`
*   `sites/css/theme/.htaccess`

即使这些文件不存在，它也会生成系统调用。

因此，试图改善您`RewriteRule`的`.htaccess`文件就像在海洋中打喷嚏以希望减少咸味。:)

现在，如果您改进了设置以使用服务器配置并回答您的原始问题：`^.*$`可能比`^(.*)$`需要创建的引用更少更有效。但是，您无法衡量它的可能性很高。

# c# - 如何按升序读取文件夹中的文件？

> ID：12907499
> 
> 赞同：7
> 
> 时间：2012-10-16T04:24:44.863
> 
> 标签：c#

我有一个文件夹，其中包含以数字 1、2、3 命名的图像文件...
我如何从 1 开始按顺序读取图像文件名，直到结束（无论它是什么数字）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T04:29:29.163

您可以在文件数组上使用[OrderBy 。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)

```
DirectoryInfo dir = new DirectoryInfo(@"C:\yourfolder");
FileInfo[] files = dir.GetFiles();
//User Enumerable.OrderBy to sort the files array and get a new array of sorted files
FileInfo[] sortedFiles = files.OrderBy(r => r.Name).ToArray(); 
```

对于**只有数字（int）名称**的文件号，请尝试：

```
FileInfo[] sortedFiles = files
                          .OrderBy(r => int.Parse(Path.GetFileNameWithoutExtension(r.Name)))
                          .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:32:26.263

Habib 的回答是正确的，但请注意，您不会按数字顺序获得结果（即您将在处理 2.png 之前处理 10.png）。要按数字而不是按字母顺序对文件名进行排序：

```
foreach (string fileName in Directory.GetFiles(Environment.CurrentDirectory)
         .OrderBy((f) => Int32.Parse(Path.GetFileNameWithoutExtension(f1))))
{
    // do something with filename
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:28:29.010

将所有文件名读入一个数组。按升序对数组元素进行排序。完毕！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-16T04:35:31.630

使用 Arraylist 收集目录内的所有文件名并对其进行排序（它也适用于字母数字文件名

```
 ArrayList <String> dirFiles=new ArrayList<String>();
        File file = new File("DirectoryPath");

        File createdFile = null;
        String [] str=file.list();
        for(int j=0;j<str.length;j++){
            dirFiles.add(str[j]);               
        }

        CustomComparator comparator = new CustomComparator();
        Collections.sort(dirFiles, comparator);
        for(String fileName: dirFiles){
                 Console.println(fileName);
         } 
```

# iphone - IOS6面临的问题

> ID：12907503
> 
> 赞同：0
> 
> 时间：2012-10-16T04:25:21.550
> 
> 标签：iphone, xcode, osx-lion, ios6

我最近更新了ios6。之后，当我连接我的设备时，Xcode 找不到它，并且说版本不匹配，我使用的是 Mac 10.7.3。我可以使用相同的版本在设备上进行调试吗？任何的想法 ？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:49:56.717

您更新了您的设备但没有更新 Xcode，要使用您的 iOS 6.0 设备进行 Xcode 开发，您需要 Xcode 4.5，您应该检查 Mac App Store 并更新您的 Xcode。

Xcode 4.5 将在 Lion 和 Mountain Lion 上运行。但是，在 Lion 上，您还可以使用 iOS 4.3 模拟器，而在 Mountain Lion 上，您不能……很高兴知道。

# c# - 实体框架不能在没有标识列的表上工作

> ID：12907509
> 
> 赞同：8
> 
> 时间：2012-10-16T04:26:01.473
> 
> 标签：c#, .net, sql, entity-framework

我有下表：

```
create table tbl
(
    id int identity(1,1),
    val varchar(100)
) 
```

现在，当我使用 Entity Framework 将对象映射到该表时，它可以工作，但是当我按如下方式更改表定义时：

```
create table tbl1
(
    id int,
    val varchar(100)
) 
```

实体框架不会将对象映射到此表。任何关于为什么会发生这种情况的线索将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T04:56:11.233

实体框架需要主键才能从数据库生成模型。如果表上没有主键，它将简单地选择不可为空的列作为连接的主键，并且实体将是只读的。

在您的第一个表中，身份定义使您的 id 列不可为空，因此您可以创建一个实体。您应该在添加该表时看到此消息：

> “表/视图 'tbl1' 没有定义主键。键已被推断出来，并且定义被创建为只读表/视图。”

但是，在您的第二个表中，没有不可为空的列，EF 无法为其创建实体。尝试添加时查看消息：

> “表/视图 'tbl1' 没有定义主键，无法推断出有效的主键。此表/视图已被排除。要使用该实体，您需要查看您的架构，添加正确的键，并取消注释。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:58:15.100

实体框架通常需要一种方法来区分表中的两条记录，因此需要一个 ID/Key 鉴别器，它不需要是主键约束或唯一键约束或 DB 层的标识。但是这个鉴别器，一列或一组列，应该有助于实体框架唯一地识别一条记录并将其与其他记录区分开来。因此，您需要在 C# 层的实体类中定义这样的鉴别器。

# iphone - UITableView 未在 iPhone 中显示

> ID：12907516
> 
> 赞同：0
> 
> 时间：2012-10-16T04:26:59.277
> 
> 标签：iphone, uitableview

我正在使用 Xcode 3.2.3。现在我正在做简单的 UITable 视图。为此我参考[了这个链接](http://www.techotopia.com/index.php/Creating_a_Simple_iPhone_Table_View_Application)。

我已经完成了那里提到的所有步骤。但是当我的应用程序启动时，它只显示白屏。没有任何表格视图。请给我解决方案。提前致谢。

MyCode 是 AppDelegate.h

```
#import <UIKit/UIKit.h>

@class TableBasicsViewController;

@interface TableBasicsAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    TableBasicsViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet TableBasicsViewController *viewController;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"
#import "TableBasicsViewController.h"

@implementation TableBasicsAppDelegate

@synthesize window;
@synthesize viewController;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:        (NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Add the view controller's view to the window and display.
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application {

}

- (void)applicationDidEnterBackground:(UIApplication *)application {

}

- (void)applicationWillEnterForeground:(UIApplication *)application {

}

- (void)applicationDidBecomeActive:(UIApplication *)application {

}

- (void)applicationWillTerminate:(UIApplication *)application {

}

#pragma mark -
#pragma mark Memory management

- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {

}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

@end 
```

TableBasicViewController.h

```
#import <UIKit/UIKit.h>

@interface TableBasicsViewController : UIViewController <UITableViewDataSource,     UITableViewDelegate> {

}

@property (nonatomic, retain) NSArray *games;

@end 
```

TableBasicViewController.m

```
#import "TableBasicsViewController.h"

@implementation TableBasicsViewController

@synthesize games;

/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
}
*/

// Implement viewDidLoad to do additional setup after loading the view, typically from     a nib.
- (void)viewDidLoad {
    [super viewDidLoad];
    self.games = [NSArray arrayWithObjects: @"Super Mario Bros.",  
                  @"The Legend of Zelda", @"Blades of Steel", 
              @"Teenage Mutant Ninja Turtles", @"Excitebike",
              @"Dr. Mario", @"Duck Hunt", @"Tetris", @"Ice Climber",
              @"River City Ransom", @"Ninja Gaiden", @"Super Mario     Bros. 3",
              @"Mega Man 2", @"Kid Icarus", @"Metroid", @"Metal Gear",
              @"Super Mario Bros. 2", @"Zelda II: The Adventure of     Link",
              nil]; 
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:  (NSInteger)section {
     return [self.games count]; 
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Default";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                        reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell.
    cell.textLabel.text = [self.games objectAtIndex:indexPath.row];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"Selected: '%@'", [self.games objectAtIndex:indexPath.row]);

}

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

    - (void)dealloc {
        self.games = nil;
        [super dealloc];
    }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:09:18.503

请检查这个

TableBasicViewController.h

```
@interface TableBasicsViewController : UIViewController <UITableViewDataSource,     UITableViewDelegate> {

    IBOutlet UITableView *tableView;

}

@property (nonatomic, retain) NSArray *games;

@end 
```

并将其链接到您的 xib 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:01:38.900

在您的 AppDelegate.m 文件中编写此代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:        (NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Add the view controller's view to the window and display.
    viewController = [[TableBasicsViewController alloc]initWithNibName:@"TableBasicsViewController"];
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

# directory - 从 AppleScript 路径中提取文件扩展名

> ID：12907517
> 
> 赞同：3
> 
> 时间：2012-10-16T04:27:30.447
> 
> 标签：directory, applescript, filenames, filepath, file-extension

我正在编写一个 Apple 脚本，最终将标记从 EyeTV 导出的所有 iTunes 的广告。但是我遇到了 AppleScript 路径的一个简单问题，EyeTV 应用程序将其作为录制位置返回。这是上下文：

```
set recordingID to 370404006
set myid to recordingID as integer
tell application "EyeTV"
    set eyetvr_file to get the location of recording id myid as alias
end tell
return eyetvr_file 
```

> 别名“Macintosh HD2:Documents:EyeTV Archive:South Park.eyetv:000000001613eaa6.eyetvr”

现在我需要提取包含路径和文件前缀 000000001613eaa6（使用[这个问题](https://stackoverflow.com/questions/4278704/applescript-get-filenames-in-folder-without-extension)），这样我就可以在文件 000000001613eaa6.edl 中查找相应的商业标记。这是打嗝：

```
tell application "Finder"
    set eyetv_path to container of eyetvr_file
    set root_name to name of eyetvr_file
    set fext to name extension of eyetvr_file
end tell 
```

结果是，

> eyetv_path：应用程序“Finder”的磁盘“Macintosh HD2”的文件夹“Documents”文件夹“EyeTV Archive”的文档文件“South Park.eyetv”
> 
> 根名称：“000000001613eaa6.eyetvr”
> 
> 下一个：“”

fext 应该是“.eyetvr”，而不是空字符串。如何从 eyetvr_file 或 root_name 中正确提取“.eyetvr”？我已经尝试了一堆黑客喜欢

```
set fext to name extension of (eyetvr_file as document) 
```

但这会产生错误，例如，

> 错误“无法将别名 \"Macintosh HD2:Documents:EyeTV Archive:South Park.eyetv:000000001613eaa6.eyetvr\" 转换为类型文档。” 编号 -1700 从别名“Macintosh HD2:Documents:EyeTV Archive:South Park.eyetv:000000001613eaa6.eyetvr”到文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:26:57.283

Finder 无法识别所有文件扩展名。不过，您可以只使用文本项分隔符来删除最后一部分。

```
do shell script "touch /tmp/some.file.eyetvr"
set text item delimiters to "."
tell application "Finder"
    set n to name of file (POSIX file "/tmp/some.file.eyetvr")
    if n contains "." then set n to (text items 1 thru -2 of n) as text
    n -- some.file
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:35:29.873

迷你评论显然不允许发布代码，所以这是我对 Lauri Ranta 的好解决方案的编辑：

```
do shell script "touch /tmp/some.file.eyetvr"
set delims to AppleScript's text item delimiters
set AppleScript's text item delimiters to "."
tell application "Finder"
    set n to name of file (POSIX file "/tmp/some.file.eyetvr")
    if n contains "." then set n to (text items 1 thru -2 of n) as text
    n -- some.file
end tell
set AppleScript's text item delimiters to delims 
```

当我完成那个项目后，我会发布一个指向 iOS 的 EyeTV-commercial-marking-script-script 的链接。

# c++ - 人咬狗：符号解析*没有*链接库？clock_gettime() -lrt

> ID：12907518
> 
> 赞同：1
> 
> 时间：2012-10-16T04:27:32.833
> 
> 标签：c++, clang, dynamic-linking

我有一个在 Ubuntu 12.04 下使用 clang++ 3.2 开发的 C++ 源代码树，它构建了一些库，然后使用这些库和其他各种系统库的通常集合编译一些应用程序。两个谜题。客户端报告由于未定义对clock_gettime() 的引用而无法构建代码。果然，我没有在构建逻辑（scons）中包含强制性的“-lrt”。

第一个难题：即使我没有在任何地方指定“-lrt”，它也可以正确编译、链接和执行，并且不会对我的系统产生任何*抱怨*！如何正确解析此符号？我怀疑这是因为应用程序链接到一个本身需要 librt 的动态库，但我不明白为什么会发生这种情况背后的逻辑？

第二个难题：假设在没有“-lrt”的情况下如何解决clock_gettime（）的问题得到了令人满意的解释，为什么这会发生在我的系统上而不是客户端非常相似的设置上？

“……一个谜，包裹在一个谜中，一个谜”——温斯顿·丘吉尔

对揭示这里真实情况的工具的建议将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:23:41.097

从 SUSv4（实用程序/c99）：

* * *

**`-l rt`**

该选项应使所有在`<aio.h>`、`<mqueue.h>`、`<sched.h>`、`<semaphore.h>`和中引用的接口`<spawn.h>`、在 中标记为可选的`<sys/mman.h>`接口、在 中标记为 ADV（咨询信息）的接口以及以前缀和in`<fcntl.h>`开头的接口都可用。*如果没有此选项，实现可能会搜索此库。*`clock_``time_``<time.h>`

 ** * *

我认为以上至少足以证明为什么 POSIX 允许这种行为。

在这方面，所涉及的系统很可能是不同的。例如，`clock_gettime()`可能`libc`为您实施，但`librt`为您的客户实施。不要冒险：使用便携式设备`-l rt`并忘记这个问题。

一个更明显的例子是`-l xnet`，它的行为与 POSIX 相似，但是，至少在 Gentoo、Debian 和 Ubuntu Linux 系统上，编译`-l xnet`实际上会产生错误。（`libxnet`据称包含 UNIX 套接字接口的实现。）

如果您想进一步调查该问题，请`ldd`在 GNU/Linux 系统中尝试。`ldd`应该显示二进制文件的动态依赖项。我敢打赌，这`clock_gettime()`只是在`libc.so`.*

# javascript - javascript 在自己的工作表上

> ID：12907529
> 
> 赞同：0
> 
> 时间：2012-10-16T04:29:16.887
> 
> 标签：javascript, html

所以我的问题很简单，但由于我是 html 和 javascript 的新手，我需要帮助。

所以我的 html 代码中有以下 javascript 代码。我想在单独的表格上拥有该功能。如何在我的 html 表单中调用该函数？

```
<script LANGUAGE="Javascript">
    var stampdays = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
    var stampmonths = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
    var thedate = new Date();
    document.write(stampdays[thedate.getDay()] + ", " + stampmonths[thedate.getMonth()] + " " + thedate.getDate() + ", " + thedate.getFullYear());
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:33:10.727

制作一个名为`script.js`

脚本.js：

```
var stampdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
var stampmonths = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
var thedate = new Date();
document.write(stampdays[thedate.getDay()] + ", " + stampmonths[thedate.getMonth()] + " " + thedate.getDate() + ", " + thedate.getFullYear()); 
```

在您的 HTML 中，包含此标记：

```
<script src="/path/to/script.js" type="text/javascript"></script> 
```

您可以在 HTML 中的任何位置包含该标记。最好在结束`</body>`标签之前。

附带说明，无需使用`new Array()`. 只需使用我在上面代码中显示的数组文字即可。

另一方面，您可能不想使用`document.write`. 这就像1997年的风格。您可能希望像这样填充您的 HTML 元素之一：

```
document.getElementById('myElementId').innerHTML = stampdays[...etc...getFullYear(); 
```

如果你想让它成为一个函数，你只需声明一个：

```
function setDate(foo) {
    document.getElementById('myElementId').innerHTML = foo;
} 
```

然后像这样调用它`setDate(stampdays[...etc...getFullYear());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:52:56.887

您可以将脚本标签内的所有内容（不包括标签本身）移动到一个新文件（通常带有扩展名 js）中，并将该文件包含在您的 html 页面中。它是这样完成的

```
<script type="text/javascript" src="path-to\script.js"> </script> 
```

使用`type`属性比使用`language`属性更好

查看您的脚本，我可以看到您在任何函数之外使用 document.write。浏览器通常会在遇到脚本标签时立即执行代码。如果将内容放在函数中，则可以更好地控制脚本的执行时间

脚本.js

```
var stampdays = new Array( "Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
var stampmonths = new Array( "January","February","March","April","May","June","July","August","September","October","November","December");

var writeDate = function () {
            var thedate = new Date();
            document.write(stampdays[ thedate.getDay()] + ", " + stampmonths[ thedate.getMonth()] + " " + thedate.getDate() + ", " + thedate.getFullYear()); 
            } 
```

现在您可以在需要时调用 writeDate 函数。

```
<html> 
<head>
<script type="text/javascript" src="path-to\script.js"> </script>
</head>

<body>
  <script type="text/javascript" >
    writeDate();
  </script>

  <a href="#" onclick="writeDate()">Click me </a>

</body>
</html> 
```

在 script.js 文件中，您只需定义函数 writeDate，您还没有执行它。要在函数中实际运行代码，您只需像在 writeDate() 中那样调用函数，这里我展示了两种方法。

*   在另一个脚本标签（主体内部）中调用该函数，该函数将在浏览器加载 html 时执行。
*   一个更典型的例子是在某些事件上执行它；就像在示例中一样，我定义了单击链接时要运行的内容

# scroll - 允许滚动的颜色框，固定背景中的 div

> ID：12907531
> 
> 赞同：1
> 
> 时间：2012-10-16T04:29:19.510
> 
> 标签：scroll, position, overlay, colorbox, fixed

当用户在颜色框本身内部滚动时，我试图在我的颜色框后面保留一个容器 div。
我用谷歌搜索了一下，发现引用杰克摩尔的*话*：

例子：

```
$().bind('cbox_open', function(){
$('body').css({overflow:'hidden'}); }).bind('cbox_closed', function(){
$('body').css({overflow:'auto'}); });

$(".iframe").colorbox({width:"80%", height:"80%", iframe:true}); 
```

但是以前对我不起作用，滚动锁定在 div 后面但也在颜色框中，所以用户不能滚动任何地方！
我猜这`iframe`与它有关，因为我以这种方式调用颜色框：

```
$(document).on("click", ".some-link", function(e){    
    e.preventDefault();
    var url = $(this).attr('href');
    $.colorbox({
        onComplete: function(){
            some other stuff()
            $.colorbox.resize();
            $('body').css({overflow:'hidden'})
        },
        onCleanup: function(){
            some other stuff()
            $('body').css({overflow:'hidden'})
        },
        href: url,                
    });
}); 
```

有任何想法吗？有没有其他方法可以禁用 div 中的滚动，但允许在另一个中滚动？

我使用带有无限滚动之类的颜色框，因此当用户向下滚动时，会不断显示更多信息（实际上是 div 框）。这些框是触发颜色框的框，“.some-link”是框内的链接。

希望我的英语能调好。问候！奥古斯丁

# java - 用 JAVA 将 JSON 数据格式写入数据库

> ID：12907537
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:29:54.417
> 
> 标签：java, jquery, json

我正在尝试将 JSON 数据写入数据库。如何将每一列发送到数据库中的相应列。我试图将数据放入

```
var data = JSON.parse(data) 
```

那没有用。变量数据仅显示以下格式的信息：

```
[object Object],[object Object],[object Object],[object Object],[object Object] 
```

我的实际数据格式如下。编写以下代码后，我得到以下数据。如何将这些数据保存在数据库中？

// 生成以下输出的代码。

```
 $(document).ready(function () {
 $("#check").click(function(){

 var rows = $('#jqxgrid').jqxGrid('getrows');

 var rowData = JSON.stringify(rows);

$.post("GridValues.jsp", {"rowValues": rowData });

 });
    }); 
```

//如果打印rowData低于则输出

```
[{"empId":"1","fname":"Henry","lname":"Rey","empcat":"Staff","dept":"IT","jTitle":"Software Engg","rAccess":"New Hire","lManager":"Admin","sDate":"2012-10-11","eDate":"2012-10-11","uid":0},{"empId":"2","fname":"Nick","lname":"Murry","empcat":"Staff","dept":"IT","jTitle":"Administrator","rAccess":"New Hire","lManager":"Admin","sDate":"2012-10-11","eDate":"2012-10-11","uid":1},{"empId":"3","fname":"John","lname":"Danilo","empcat":"Staff","dept":"IT","jTitle":"Administrator","rAccess":"New Hire","lManager":"Admin","sDate":"2012-10-11","eDate":"2012-10-11","uid":2},{"empId":"4","fname":"Joene","lname":"Anson","empcat":"Staff","dept":"IT","jTitle":"Software Engg","rAccess":"New Hire","lManager":"Admin","sDate":"2012-10-11","eDate":"2012-10-11","uid":3}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:41:13.970

我不能说我完全理解您的问题，这是一个有用的 SO 答案，可能会对您有所帮助。您可能还想查看[Jackson JSON](http://jackson.codehaus.org/)

# windows-8 - 如何从 Windows 8 中的 MediaCapture API 获取反馈

> ID：12907538
> 
> 赞同：7
> 
> 时间：2012-10-16T04:29:55.717
> 
> 标签：windows-8, windows-runtime

我正在尝试在 Windows 8 应用程序中做面部跟踪应用程序。而且我知道，为了访问相机流，我必须使用`MediaCapture.AddEffectAsync()`它必须与 C++ 合并，如[本示例](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)所示。

现在我可以访问流并跟踪人脸，但我无法将跟踪人脸坐标传递/返回给 C# 以进行进一步处理。

我尝试过的一种方法是在 C++ 中调用 C# 方法来传回跟踪坐标。但无济于事，因为 Visual Studio 不允许项目之间的**循环依赖**。

另一种方法是不断地从 C++ 中提取数据，但这不是我想要的。

也许还有另一种更直接的方式来访问相机缓冲区，我想知道。

所以我的问题是，如何取回跟踪坐标？或者什么是正确的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:54:00.520

为了克服这个问题，我们只需在 C++ DLL 和 C# 代码之间建立 TCP/IP localhost 连接。也就是说，我们让 C# 成为服务器，而 C++ DLL 成为客户端。每当 C++ DLL 想与 C# 对话时，C++ 只是通过 TCP/IP 套接字将数据传递给 C#。目前，Windows 8 没有对同一进程内的 TCP/IP 通信进行限制。

一个很好的参考是[StreamSocket 示例](http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931)

这不是最好的方法，并且由于数据需要通过 TCP/IP 层，因此性能略有下降。但是，到目前为止，这也许是我们所能拥有的最好的，除非**微软**打破了这个障碍。

# java - 用Java编写访问数据库？

> ID：12907541
> 
> 赞同：1
> 
> 时间：2012-10-16T04:30:20.913
> 
> 标签：java, sql, ms-access-2007, ms-access-2010

我正在开发一个数据库项目，该项目涉及向具有字段的学生表添加、编辑和删除注册表：

Last_names、Names、IcNumber、Average、Entry_mode、Career 和 Change

在编辑框架中，我有一个字段，用户输入学生的 icnumber 以编辑其数据，请求新数据并将其保存到“学生”数据结构中，然后使用新数据重新更新注册表：

```
String stmnt = "Insert Into Students (Last_names, Names, IcNumber, Average, " + 
        "Entry_mode, Career, Change) Values ('" + student.getLastNames() + 
        "', '" + student.getNames() + "', '" + student.getIcNumber() + "', " +
        student.getAverage() + ", '" + student.getEntry() + "', '" +
        student.getCareer() + "', '" + student.getChange() + "') " +
        "Where IcNumber = '" + field.getText() + "'";

statement.execute(stmnt); 
```

我收到此错误消息：

[Microsoft][Microsoft Access ODBC Driver]“查询输入必须包含至少一个表或查询。”

我在程序的添加注册表区域中尝试了类似的 SQL 指令，但没有“Where”条件并且效果很好，有人知道那个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:39:15.047

您应该使用子查询，首先是带有 WHERE 的 SELECT 部分，然后是 INSERT 部分，例如：

```
 if (cond){
             (SELECT.....)
                (INSERT INTO...)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:38:52.333

你为什么`where`在`insert`声明中使用？`Where`子句适用于`select`,`update`和`delete`语句但不适用于`insert`. 此外，我认为您的查询中不需要该`where`子句。

只需使用`insert`不带`where`子句的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:39:56.820

使用[INSERT](http://msdn.microsoft.com/en-us/library/office/bb208861%28v=office.12%29.aspx)语句添加新记录。`WHERE`子句不属于`INSERT`语句。

如果您正在编辑现有记录，那么您应该使用[UPDATE](http://msdn.microsoft.com/en-us/library/office/bb221186%28v=office.12%29.aspx)语句，并且`WHERE`子句可以识别要更改的记录。

# css - 为什么要使用 Adob e Edge/Animate？

> ID：12907548
> 
> 赞同：2
> 
> 时间：2012-10-16T04:31:39.693
> 
> 标签：css, jquery-animate, wysiwyg, adobe-edge

我今天尝试了最新版本的 Edge/Animate，但我仍然想知道它的主要用途是什么，它的目标对象是谁

在 Edge 中，如果我将一个正方形从其原始位置移动到右侧 50px 处，则右侧有 200kb 包含其默认库

我可以在不到 1kb 的 CSS3 和 92kb 的 jQuery 中做到这一点

如果人们对 jQuery/CSS3 动画足够精通，他们是否有理由考虑使用这个产品，或者它只适合需要 WYSIWYG 编辑器的人使用？

我找不到 Edge 在哪里更有效地做某事的一个例子

如果我在错误的地方发布了这个，请告诉我

谢谢

# java - 在 Java-NetBeans 中动态创建 dcheckbox

> ID：12907549
> 
> 赞同：1
> 
> 时间：2012-10-16T04:31:53.297
> 
> 标签：java, swing, runtime, layout-manager, jcheckbox

我正在开发一个简单的“待办事项列表”应用程序，该应用程序涉及从数据库中获取特定日期的“待办事项”，并将它们显示为位于框架上的面板上的复选框文本。有一个“完成”按钮可以用于在任务完成后删除勾选的复选框。

我用于动态创建复选框的代码如下所示：

```
//cnt-variable used to store the number of tasks for a day    
//rs1-ResultSet variable into which the task description is read into.    
//DATA-variable with 'to-do' description

 for(int i=0;i<cnt&&rs1.next();i++)
 {
     String s2=rs1.getString("DATA");
     JCheckBox cb = new JCheckBox("New CheckBox");
     cb.setText(s2);
     cb.setVisible(true);

     jPanel1.add(cb);
     jPanel1.validate();
 } 
```

在运行代码时，它只显示一个带有面板的空框架。有人可以帮我弄清楚为什么没有显示复选框吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:42:36.913

试试这个。这允许您创建随机数量的复选框...

![在此处输入图像描述](../Images/88c815af519e4369894171fc79730aa1.png)

```
public class TestCheckboxes {

    public static void main(String[] args) {
        new TestCheckboxes();
    }

    public TestCheckboxes() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new CheckBoxPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class CheckBoxPane extends JPanel {

        private JPanel content;

        public CheckBoxPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weightx = 1;
            gbc.weighty = 1;
            gbc.anchor = GridBagConstraints.CENTER;
            content = new JPanel(new GridBagLayout());
            add(content, gbc);

            JButton more = new JButton("More");
            more.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    GridBagConstraints gbc = new GridBagConstraints();
                    gbc.gridx = 0;
                    gbc.gridy = 0;

                    content.removeAll();
                    int count = 10 + (int) Math.round(Math.random() * 90);
                    System.out.println(count);
                    for (int index = 0; index < count; index++) {
                        gbc.gridx++;
                        if (index % 8 == 0) {
                            gbc.gridx = 0;
                            gbc.gridy++;
                        }
                        content.add(new JCheckBox(Integer.toString(index)), gbc);
                    }

                    content.revalidate();
                    repaint();

                }

            });

            gbc.gridy++;
            gbc.weightx = 0;
            gbc.weighty = 0;

            add(more, gbc);
        }
    }
} 
```

# iphone - 如何在iphone中禁用重新登录

> ID：12907565
> 
> 赞同：0
> 
> 时间：2012-10-16T04:33:43.060
> 
> 标签：iphone, sqlite

我开发了一个与**登录帐户**相关的应用程序，人们也可以在我的应用程序中注册，因为这些用户信息将存储在**SQLite 数据库**中。

问题是，当用户**退出**帐户然后**重新登录时**，应用程序会要求用户再次登录。我不希望这种情况发生，因为它应该记住用户名和密码并且应该**自动登录**。

有谁知道如何完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:51:08.073

在您的`AppDelegate.m`文件中，添加`NSUserDefaults`方法...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    if ([standardUserDefaults valueForKey:@"dbID"]==nil) {          
        [standardUserDefaults setObject:@"1" forKey:@"dbID"];
        [standardUserDefaults synchronize];
    }

} 
```

并且您还保存了用户名和密码`NSUserDefaults`。对于注销功能，请在您希望注销应用程序的位置添加代码注销代码...

```
-(IBAction)Logout :(id)sender {

    [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"dbID"];   
    [NSUserDefaults resetStandardUserDefaults];
} 
```

在登录时检查是否`dbID`为空，然后用户使用用户名和密码登录。如果`dbID`不是`null`登录旧的用户名和密码。

如果您在未注销的情况下退出应用程序，则将 dbID 为“1”存储在 NSUserDefaults 中并重定向视图控制器，并在登录时保存用户名和密码...保存

```
[[NSUserDefaults standardUserDefaults] setValue:@"Your text field value" forKey:@"Username"];
[[NSUserDefaults standardUserDefaults] setValue:@"Your text field value" forKey:@"password"]; 
```

阅读

```
NSString * _UserName = [[NSUserDefaults standardUserDefaults] stringForKey:@"Username"];
NSString * _password = [[NSUserDefaults standardUserDefaults] stringForKey:@"password"]; 
```

用户名和密码保存 NSUserDefaults 表明您已将用户名和密码存储在 NSUserDefaults 中。

如果您通过按钮注销应用程序，则使 NUll 用户名和密码保存 NSUserDefaults .. 像

```
[[NSUserDefaults standardUserDefaults] setValue:@"" forKey:@"Username"];
    [[NSUserDefaults standardUserDefaults] setValue:@"" forKey:@"password"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:42:01.983

使用 NSUserDefaults。这个会很好用

```
NSUserDefaults *rememberDefault = [NSUserDefaults standardUserDefaults];
if ([[rememberDefault valueForKey:@"Autologin"] isEqualToString:@"Autologin_on"]) {
    btnAutoLogin.selected =NO;
}else {        
    btnAutoLogin.selected =YES;
} 
```

在您的按钮操作方法中：

```
-(IBAction)btnOnOffSwitch:(UIButton *)sender{ 

    if (sender.selected) {
        sender.selected = NO;
    }else {        
        sender.selected = YES;
    }    
} 
```

当你想检查使用这个：

```
NSUserDefaults *rememberDefault = [NSUserDefaults standardUserDefaults];

if([[rememberDefault valueForKey:@"Autologin"] isEqualToString:@"Autologin_on"])

{

     write your code here. to push directly to your home screen. this should be checked in your login screen

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:55:37.670

可能这会对你有所帮助。

对于您当时用户第一次成功登录的情况，制作 1 个用于存储用户名、密码和用户 ID 的字典，否则为这 3 种类型制作 3 个不同的 nsuserdefault 对象。

并且当用户再次进入该登录屏幕时，检查 nsuser 默认值是否为空或具有某些值，因此如果该值存在，则它已经登录，并且您可以直接将他重定向到下一页..否则显示登录页面..

在这里我只写了逻辑而不是源代码，所以你可以自己尝试并了解更多:)..

希望这会帮助你。

# performance - 模拟或性能建模论文的图形轴的含义

> ID：12907569
> 
> 赞同：0
> 
> 时间：2012-10-16T04:34:04.300
> 
> 标签：performance, parallel-processing, data-modeling, simulation, hpc

我正在阅读一些关于模拟和性能建模的论文。某些图中的 Y 轴标记为“每个模拟日的秒数”。我不确定它的实际含义。它的范围从 0、20、40 到 120。

另一个标签是“每天模拟年数”。我猜这意味着模拟环境中的客户操作系统认为它已经过去了几年，而实际上它在现实世界中只过了一天？但是我想模拟应该会减慢执行速度，所以我想模拟环境内部经过了几个小时，而实际上它在现实世界中只经过了一天会更合理。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:39:30.273

在没有看到论文的情况下，我假设他们正在尝试比较在模拟中达到某个物理时间所需的 CPU 时间。

因此，“每个模拟日的秒数”很可能是在模拟中获得 24 小时所需的时间。

同样，“每天模拟年数”是模拟/现实生活日的物理时间。

当然，没有看到论文是不可能确定的。他们也可能正在查看 CPU-seconds 或 CPU-days，这将是 nCPUs*walltime。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:55:11.790

模拟通常以离散时间单位运行，称为*时间步长*。如果您想在模拟中模拟跨越特定时间的特定过程，则必须执行一定数量的时间步长。如果时间步的长度是固定的，那么步数就是模拟时间除以时间步的长度。每个时间步的计算都需要一定的时间，模拟的总运行时间等于时间步数乘以执行一个时间步所需的时间：

```
(1) total_time = (simulation_time / timestep_length) * run_time_per_timestep 
```

现在可以通过在左侧放置不同的参数来获得几个基准参数。例如，如果你修复`simulation_time = 1 day`然后`total_time`会给你总的模拟运行时间，即

```
(2) seconds_per_sim_day = (1 day / timestep_length) * run_time_per_timestep 
```

较大的值`seconds_per_sim_day`可能意味着：

*   计算单个时间步需要太多时间，即`run_time_per_timestep`太高 -> 计算算法应针对速度进行优化；
*   时间步太短 -> 寻找可以接受更大时间步并且仍然产生（几乎）相同结果的更好算法。

另一方面，如果您求解`(1)`并`simulation_time`修复`total_time = 1 day`，您将得到每天可以执行的时间步长乘以时间步长，或者每天计算可以达到的总模拟时间：

```
(3) simulation_time_per_day = (1 day / run_time_per_step) * timestep_length 
```

现在可以观察到：

*   更大的时间步长导致更大的值`simulation_time_per_day`，即可以计算更长的模拟；
*   如果计算时间步长需要太多时间，则 的值`simulation_time_per_day`会下降。

通常，在决定购买某个计算中心的 CPU 时间时，可以使用这些数据。例如，您想模拟 100 年，然后将其除以每天的模拟年数，您就可以得到需要支付（或等待）多少计算天数。在这种情况下，较大的值`simulation_time_per_day`肯定会使您受益。另一方面，如果您只有 10 天的计算时间可供您使用，那么您可以计算可以计算多长时间的模拟并做出一些决定，例如更短的模拟但具有许多不同的参数，而不是更少但更长的模拟您预测为最佳参数的一些参数。

在现实生活中，事情要复杂得多。通常计算每个时间步可能会花费不同的时间（尽管在某些情况下每个时间步所花费的时间与所有其他时间步完全相同）并且很大程度上取决于模拟大小、配置等。这就是存在标准化测试的原因通常会报告一些平均值。

总结一下：假设所有测试参数保持相等，

*   更快的计算机将提供更少的“每天模拟秒数”和更多“每天模拟年数”
*   较慢的计算机将提供更多的“每天模拟秒数”和更少的“每天模拟年数”

顺便说一句，这两个数量都是相互的，并且通过这个简单的方程相关：

```
simuation_years_per_day = 236,55 / seconds_per_simulation_day 
```

（即“每天的模拟年数”等于 86400 除以“每个模拟日的秒数”/它为您提供每天的模拟天数/然后除以 365.25 将结果转换为年数）

因此，是否呈现“每天模拟年数”或“每天模拟秒数”并不重要。一个人只需要选择清楚地表明新系统比以前/旧/现有系统好多少的表示:)

# iphone - 提交新版本应用程序是否必须使用 iPhone 5 屏幕截图？

> ID：12907572
> 
> 赞同：1
> 
> 时间：2012-10-16T04:34:35.320
> 
> 标签：iphone, ios, ios5, app-store

我正在为 appstore 上已上传的应用程序上传新的二进制文件，它显示以下错误

**您必须提供所有必需的联系信息。要编辑您的详细联系信息，请单击 App Review 部分中的编辑。**

**您必须上传一个 1024 x 1024 像素的大应用程序图标。要上传图标，请单击下方版本信息部分中的编辑。**

但是，在我的元数据部分，有 iPhone 5 iPod touch（第 5 代）屏幕截图的选项。但在本节中没有显示任何错误。

所以我很困惑我是否需要上传 iPhone 5 的屏幕截图我的应用程序会被拒绝吗？

提前致谢

帕吉123

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T05:37:16.283

以下是在 9 月 iPhone 发布后通过电子邮件发送给开发人员的：

> 如果您正在为 iPhone 5 和 iPod touch（第 5 代）更新您的应用程序，您必须提供额外的屏幕截图以支持 App Store 的新屏幕尺寸。

如果您的应用未针对此屏幕尺寸进行优化，那么显然您不需要提供该尺寸的屏幕截图。

如果您的应用*确实*支持 4 英寸（iPhone 5 和第 5 代 iPod touch）屏幕尺寸，那么可以，您**必须**提供新屏幕尺寸的屏幕截图。在您的应用程序审核之前，可能不会在您的应用程序中检测到 4 英寸屏幕支持，这意味着 iTunes Connect 永远不会向您显示有关此的错误 - 如果您没有提供正确的应用程序，他们将不会批准您的应用程序截图。

关于其他错误，iTunes Connect 最近更新为接受那些上传应用程序的联系信息（以防审查问题）——这是新应用程序和对现有应用程序的任何编辑所必需的。此外，前段时间他们开始要求 1024x1024 图像用于通常称为 iTunesArtwork 的“大型应用程序图标”，因此您也需要提供此图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T23:18:36.797

来自苹果：（[https://developer.apple.com/news/](https://developer.apple.com/news/)）

让您的应用在 Retina 显示屏和 iPhone 5 上看起来很棒

2013 年 3 月 21 日

从 5 月 1 日开始，必须为配备 Retina 显示屏的 iOS 设备构建提交到 App Store 的新应用和应用更新，并且 iPhone 应用还必须支持 iPhone 5 上的 4 英寸显示屏。

因此，看起来我们都将不得不支持 4 英寸显示屏。这是不可避免的。

# java - 找不到 StringTokenizer 迭代器时出错

> ID：12907574
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:34:46.007
> 
> 标签：java, compiler-errors, stringtokenizer

```
data_structures/ExpressionEvaluator.java:14: incompatible types.lang.String)
found   : java.util.StringTokenizer class data_structures.ExpressionEvaluator
required: java.util.Iterator<java.lang.String>ing> st = StringTokenize
        Iterator<String> st = new StringTokenizer(s); 
```

我必须在某处声明 Iterator 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:40:50.320

仔细看：

```
Iterator<String> st = new StringTokenizer(s); 
```

您正在声明一个 Iterator 类型的变量 st，并在其上创建一个 StringTokenizer 类型的新对象。关于官方规范：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

您可以看到一个迭代*标记化*字符串的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:44:24.547

`StringTokenizer`类用于字符串拆分，并且在这些日子里没有被太多使用。您可以在课堂上使用`split`方法。`String`现在遇到您的问题，没有`Iterator`关联，`StringTokenizer`它使用`Enumeration`.It 看起来您期望`Iterator`对象中的`StringTokenizer`对象甚至无法编译。因此，要么将其编码为枚举并使用`String.split`方法将其拆分为数组。你的代码应该像

StringTokenizer tokenizer = new StringTokenizer(inputString);

```
while(tokenizer.hasMoreElements()) {
   String o = (String)tokenizer.nextElement();
   ......
   .......
} 
```

或者

```
String[]  splitted = inputString.split(delimter); 
```

# ipad - Ipad 从自定义相册设备问题中获取图像

> ID：12907577
> 
> 赞同：1
> 
> 时间：2012-10-16T04:35:01.450
> 
> 标签：ipad, device, photo

我的 ipad 设备中有一个自定义文件夹。我正在使用此代码从自定义相册中获取图像：

```
self.assetGroups = [[NSMutableArray alloc] init];
// Group enumerator Block
dispatch_async(dispatch_get_main_queue(), ^
{
   void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop)
   {
       if (group == nil) {
           return;
       }
       if ([[group valueForProperty:ALAssetsGroupPropertyName] isEqualToString:@"Ganesh"]) {
           [self.assetGroups addObject:group];
           [self loadImages];
           return;
       }
       if (stop) {
          return;
       }
   };

   // Group Enumerator Failure Block
   void (^assetGroupEnumberatorFailure)(NSError *) = ^(NSError *error) {
       UIAlertView * alert = [[UIAlertView alloc] 
           initWithTitle:@"ERROR" message:[NSString stringWithFormat:@"No Albums Available"] 
               delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
       [alert show];
       [alert release];
   };

    // Enumerate Albums
    self.library = [[ALAssetsLibrary alloc] init];
    [library enumerateGroupsWithTypes:ALAssetsGroupAll
    usingBlock:assetGroupEnumerator
    failureBlock:assetGroupEnumberatorFailure];
}); 
```

要从我的自定义文件夹中检索所有图像，我正在使用这个：

```
(void)loadImages {
    ALAssetsGroup *assetGroup = [self.assetGroups objectAtIndex:0];

    NSLog(@"asserts group %@",self.assetGroups);
    NSLog(@"ALBUM NAME:;%@",[assetGroup valueForProperty:ALAssetsGroupPropertyName]);

    [assetGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop){
     if(result == nil) {
         return;
     }
     UIImage *img = [UIImage imageWithCGImage:[[result defaultRepresentation] fullScreenImage] 
         scale:1.0 orientation:(UIImageOrientation)[[result valueForProperty:@"ALAssetPropertyOrientation"] intValue]];
     NSLog(@"image name%@",img);
     [arrayOfImage addObject:img];
     NSLog(@"arrayOfImage %@",arrayOfImage);
     // [imageToAnimate setImage:img];
     }];
} 
```

当我使用模拟器但不在设备中运行时，它工作正常：它执行失败块并说没有可用的专辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:56:15.673

它工作正常。我已经关闭了我的定位服务，因为现在它工作正常，无法访问我的媒体。

# python - 如何取消python计划

> ID：12907581
> 
> 赞同：10
> 
> 时间：2012-10-16T04:35:14.500
> 
> 标签：python

我有一个重复的python计划任务如下，它需要在startMonitor（）中每3分钟运行一次getMyStock（）：

```
from stocktrace.util import settings
import time, os, sys, sched
schedule = sched.scheduler(time.time, time.sleep)

def periodic(scheduler, interval, action, actionargs=()):
  scheduler.enter(interval, 1, periodic,
                  (scheduler, interval, action, actionargs))
  action(*actionargs)

def startMonitor():    
    from stocktrace.parse.sinaparser import getMyStock       

    periodic(schedule, settings.POLLING_INTERVAL, getMyStock)
    schedule.run( ) 
```

问题是：

1.当一些用户事件发生时，我如何取消或停止日程安排？

2.有没有其他python模块可以更好的重复调度？就像javaquartz一样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T04:50:17.340

Q1：`scheduler.enter`返回被安排的事件对象，所以保持对它的处理，你可以`cancel`：

```
from stocktrace.util import settings
from stocktrace.parse.sinaparser import getMyStock   
import time, os, sys, sched

class Monitor(object):
    def __init__(self):
        self.schedule = sched.scheduler(time.time, time.sleep)
        self.interval = settings.POLLING_INTERVAL
        self._running = False

    def periodic(self, action, actionargs=()):
        if self._running:
            self.event = self.scheduler.enter(self.interval, 1, self.periodic, (action, actionargs))
            action(*actionargs)

    def start(self):
        self._running = True
        self.periodic(getMyStock)
        self.schedule.run( )

    def stop(self):
        self._running = False
        if self.schedule and self.event:
            self.schedule.cancel(self.event) 
```

我已将您的代码移动到一个类中，以便更方便地引用该事件。

Q2 不在本网站的范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:45:51.660

用于取消计划的操作

`scheduler.cancel(event)`

从队列中移除事件。如果 event 不是当前队列中的事件，此方法将[在此处引发 ValueError Doc](http://docs.python.org/library/sched.html)

`event`是`scheduler.enter`函数的返回值，可用于稍后取消事件

# javascript - Rails中的屏幕javascript倒数计时器

> ID：12907582
> 
> 赞同：0
> 
> 时间：2012-10-16T04:35:16.667
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在尝试创建一个计时器，在有人在我的网站上下订单直到他们支付。如果他们在计时器用完时还没有付款，我所做的 delay_job 将回滚订单。

我不擅长 javascript，而且我尝试的方法根本不起作用。这是我的镜头（这是在 document.ready 函数中）：

```
function countdown() {
    setInterval(function(){myTimer()},1000);
  };

  function myTimer() {
    var parentTr = $(this).parents("tr");
    var status = $(parentTr).find(".js-status").attr('data-status');
    if (status === 0) {
      var timeLeft = 30000;
      document.getElementById(".js-timer").html=timeLeft;
      if (timeLeft === 0) {
         alert("Time Out");
      };
    };
  }; 
```

在我看来，我希望 JS 能够接受和使用这些行。但它不起作用。（并且当我任意说 var status = 0 时不起作用）。

```
 <tr>
       <th class="js-timer"></th>
       <th class="js-status"  data-status=<%= @order.status %> ></th>
    ...
    </tr> 
```

知道我做错了什么或如何做得更好吗？

# java - 类和界面设计。方法未确定

> ID：12907591
> 
> 赞同：0
> 
> 时间：2012-10-16T04:36:54.203
> 
> 标签：java

我创建了一个超类（抽象），因为它及其子类从接口（名为 Profitable）继承数据。在编译期间，如果它无法识别方法 calcuateRevenue()，则会返回错误。该方法在接口中声明，然后在子类中定义（每个类使用不同的方式计算收益）。由于有几个类，我将包括超类、子类的一个示例、接口，当然还有主方法（BradleyLangrehrP5）。我错过了一些基本的东西，还是设计得非常糟糕？

```
public class BradleyLangrehrP5
{
    public static void main(String[] args)
    {
        //Create movieArray list
        Movie[] movieArrayList = new Movie[6];

        //Instantiate movies from each subclass
        movieArrayList[0] = new Animated(.1, 5.0 , "Finding Nemo", 
                "Andrew Stanton", 2003, 90.0);
        movieArrayList[1] = new Animated(.08, 3.0, "Shrek", 
                "Andrew Adamson", 2001, 60.0);
        movieArrayList[2] = new Documentary(4.0, 2.5, 
                "Fidel: The Untold Story", "Estela Bravo", 2001, 72.0);
        movieArrayList[3] = new Documentary(6.0, 3.25, 
                "An Inconvenient Truth", "David Guggenheim", 2006, 1.0);
        movieArrayList[4] = new Drama(25, 4.5, "Red Lights", 
                "Rodrigo Cortes", 2012, 17.0);
        movieArrayList[5] = new Drama(15, 3.75, "The Godfather", 
                "Francis Ford Coppola", 1972, 6.5);
        displayNumberOfMoviesAndRevenue(movieArrayList);
    }

    public static void displayMovieArrayList(Movie[] movieArrayList)

    {

        for(int i = 0; i < movieArrayList.length; i++)

        {

            System.out.println(movieArrayList[i].toString());

        }

    }

    public static void displayNumberOfMoviesAndRevenue(Movie[] movieArrayList)
    {
        for (int i = 0;i < movieArrayList.length; i++)
        {
            System.out.println(movieArrayList[i].totalMovies());
            System.out.println(movieArrayList[i].calculateRevenue());
        }
    }
}

public class Movie
{
    private String title;
    private String director;
    private int year;
    private double productionCost;
    private static int totalMovies = 0;

    //Construct a default movie
    public Movie()
    {
        totalMovies++;
    }

    //Cosntruct movie with specific information
    public Movie(String title, String director, int year, double productionCost)
    {
        this.title = title;
        this.director = director;
        this.year = year;
        this.productionCost = productionCost;
        totalMovies++;
    }

    //Accessors
    public String getTitle()
    {
        return title;
    }

    public String getDirector()
    {
        return director;
    }

    public int getYear()
    {
        return year;
    }

    public double getProductionCost()
    {
        return productionCost;
    }

    public int totalMovies()
    {
        return totalMovies;
    }

    //Mutators
    public void setTitle(String title)
    {
        this.title = title;
    }

    public void setDirector(String director)
    {
        this.director = director;
    }

    public void setYear(int year)
    {
        this.year = year;
    }

    public void setProductionCost(double productionCost)
    {
        this.productionCost = productionCost;
    }

    //Effectors
    public String toString()
    {
        return "Movie: " + getTitle() + "was directed by " + getDirector() + 
                "with a production cost of " + getProductionCost();
    }
}

public final class Animated extends Movie implements Profitable
{
    private double royaltyRate;
    private double incomeRelatedProducts;

    //No arg constructor
    public Animated()
    {
        super();
    }

    //Constructor with arguments
    public Animated(double royaltyRate, double incomeRelatedProducts, String title,
            String director, int year, double productionCost)
    {
        super(title, director, year, productionCost);
        this.royaltyRate = royaltyRate;
        this.incomeRelatedProducts = incomeRelatedProducts;
    }

    //Accessors
    public double getRoyaltyRate()
    {
        return royaltyRate;
    }

    public double getIncomeRelatedProducts()
    {
        return incomeRelatedProducts;
    }

    //Mutators
    public void setRoyaltyRate(double royaltyRate)
    {
        this.royaltyRate = royaltyRate;
    }

    public void setIncomeRelatedProducts(double incomeRelatedProducts)
    {
        this.incomeRelatedProducts = incomeRelatedProducts;
    }

    //Effectors
    public double calculateRevenue()
    {
        return incomeRelatedProducts * royaltyRate;
    }

    public double calculateProfit()
    {
        double profit = calculateRevenue() - getProductionCost();
        return profit;
    }

    public String getCategory()
    {
        return "Animated";
    }

    public String toString()
    {
        return "This is an animated movie, and it is";
    }
}

public interface Profitable
{
    double calculateRevenue();
    double calculateProfit();
    String getCategory();
}//end of Profitable interface 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:42:51.530

```
 System.out.println(movieArrayList[i].calculateRevenue()); 
```

您正在尝试`calculateRevenue`调用`Movie`. 但它是在接口中定义的`Profitable`，与`Movie`. 的实际子类`Movie`可能很好地实现`Profitable`，但编译器不知道这一点。

在调用该方法之前，您需要声明`Movie implements Profitable`或进行类型转换。`Profitable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:56:38.617

您可能希望让您的超类`Movie`实现`Profitable`，因为您可能希望为方法提供任何默认实现`calculateRevenue`。在这里，您在子类中实现接口`Profitable`，这意味着您提供了灵活性，`Profitable`即可以添加它，也可以不依赖于子类实现。如果这是您的意图，请保持原样，并且在您调用时对使用运算符`calculateRevenue`进行适当的类型检查并调用方法。但是，如果您希望您的类应该具有此功能，请务必让您的类实现接口。所以只有不这样做你的代码会抛出编译错误说在类中找不到`Profitable``instanceof``Movie``Movie``Profitable``calculateRevenue``Movie` 这就是你得到的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T04:46:43.907

```
for (int i = 0;i < movieArrayList.length; i++)
            {
                System.out.println(movieArrayList[i].totalMovies());
                System.out.println(movieArrayList[i].calculateRevenue());
            } 
```

这是对 class 的引用`Movie`。尝试添加演员表。

```
for (int i = 0;i < movieArrayList.length; i++)
        {
            if(movieArrayList[i] instanceof Animated){
               System.out.println((Animated)movieArrayList[i].totalMovies());
               System.out.println((Animated)movieArrayList[i].calculateRevenue());
             }
             //...do other IFs

        } 
```

# wpf - WPF：以自定义格式（带图像）显示数据网格的集合

> ID：12907592
> 
> 赞同：0
> 
> 时间：2012-10-16T04:37:04.207
> 
> 标签：wpf, silverlight, data-binding, user-controls, observablecollection

我有 2 个类，一个在另一个类中，还有一个带有子类集合的类的 ObservableCollection 的道具。但我在展示整个事情时遇到了严重的麻烦。

首先是我的数据，这就是我所拥有的：（它可能会澄清我的问题）

```
public class MyItem
{
    public string Id { get; set; }
    public string Front { get; set; }
    public Props.StateSemaphore Semaphore{ get; set; } // this is an enum w/ints
    public string ToolTip { get; set; }
    public string Architect { get; set; }
    public string Status { get; set; }

    public MyItem(){}
    public MyItem(string id, string front, 
            Props.StateSemaphore semaphore, string toolTip, 
            string architect, string status)
    {
        Id = id;
        Front = frente;
        Semaphore = semaphore;
        ToolTip = toolTip;
        Architect = architect;
        Status = status;
    }
}

public class MyTab
{
    public List<MyItem> MyItems { get; set; }
    public string Environment { get; set; }
    public MyTab() { }
    public MyTab(string environment)
    {
        Environment = environment;
        MyItems = new List<MyItem>();
    }
} 
```

以及 PageExample.xaml.cs 上的一个道具

```
 private ObservableCollection<MyTab> myPanel;
  public ObservableCollection<MyTab> MyPanel
  {
      get { return myPanel; }
      set { myPanel = value; }
  } 
```

这个想法是在信号量枚举上为每个*环境*显示一个带有图像（红色、黄色或绿色）的 MyItems 网格

***@Edit：这几乎可以工作了！只有图像不会显示。***

这是我的 XAML，但我是 wpf 的新手，所以很明显我遗漏了一些东西。

```
<Page x:Class="MyBoard.PageMain"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:w="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:MyBoard"
      mc:Ignorable="d" 
      d:DesignHeight="300" d:DesignWidth="300"
      Title="PageMain">
       <Grid x:Name="LayoutRoot" Background="White" HorizontalAlignment="Center">
        <DataGrid Name="EnvironmentDataGrid" IsReadOnly="True" ItemsSource="{Binding}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Id}" Header="Id"/>
                <DataGridTextColumn Binding="{Binding Front}" Header="Front"/>
                <DataGridTemplateColumn Header="Semaphore">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image Source="{Binding Semaphore}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Binding="{Binding ToolTip}" Header="ToolTip"/>
                <DataGridTextColumn Binding="{Binding Architect}" Header="Architect"/>
                <DataGridTextColumn Binding="{Binding Status}" Header="Status"/>
            </DataGrid.Columns>

            <DataGrid.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Path=Environment}" FontWeight="Bold" Padding="3"/>
                            </StackPanel>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Expander>
                                            <Expander.Header>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Path=Name}" />
                                                    <TextBlock Text="{Binding Path=ItemCount}" Margin="8,0,4,0"/>
                                                    <TextBlock Text="Element(s)"/>
                                                </StackPanel>
                                            </Expander.Header>
                                            <ItemsPresenter />
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </DataGrid.GroupStyle>
        </DataGrid>
    </Grid>
</Page> 
```

这些是我的问题：

1.  编写 XAML 的正确方法是什么？@编辑：**完成！**
2.  如何以及在何处将信号量图像绑定到数据网格？

***@Edit：信号量现在是RelativeUri，因为我不明白[这个答案](https://stackoverflow.com/a/5544077/684646 "这个答案")。我的意思是，我明白了，但不是这件事：***

```
<MultiBinding Converter={StaticResource catMultiConverter}>
      <Binding .../>
      <Binding .../>
    </MultiBinding> 
```

使用 RelativeUri 和 all 它仍然不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:43:24.947

1.  请参阅[此处](http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples)以了解如何设置`DataGrid.Columns`以及如何设置`Bind`它们。
2.  [在这里](https://stackoverflow.com/questions/5543878/using-ivalueconverter-to-convert-binded-text-to-an-image)查看如何将信号量枚举转换为图像通过`Converter`和`DataGridTemplateColumn.CellTemplate`.
3.  请参阅[此处](https://stackoverflow.com/questions/10283720/manually-group-datagrid-items)如何使用分组`DataGrid`来对`Environment`属性进行分组，以便将相同`Environment`的项目显示在一个组下。

# html - IE 7/8/9 中的#main div 背景下的下拉菜单

> ID：12907594
> 
> 赞同：1
> 
> 时间：2012-10-16T04:37:40.027
> 
> 标签：html, css, internet-explorer

这是我正在处理的域[http://linenwoods.com的链接。](http://linenwoods.com)我将在标题上放置导航列表项，但是当实现下拉菜单时，我很确定它会像您当前看到的那样位于#main div 下。有什么简单的方法可以解决这个问题吗？我从谷歌搜索中找不到与此相关的任何内容..希望有人能帮助我。下面是相关的 CSS .. 我试着玩 z-index 没有运气，因为我被告知 IE8 渲染它很奇怪。如果您有时间，请点击带有 IE 的链接并留下回复.. 我正在尝试尽可能地跨浏览器兼容，并且已经处于一个非常可悲的开始。任何帮助，将不胜感激 ：）

```
body { 
background-image:url('Background1.jpg');
background-position: center;
height: 100%;
margin: 0;
padding: 0;
opacity: 0.8;
filter: alpha(opacity=80);
}

#main {
width : 1010px;
height: 1315px;
background-color: white;
margin-top: 15px;
filter: alpha(opacity=80);
}

header {
width: 1010px;
height: 230px;
background-color: white;
margin: 0 auto;
margin-top: 15px;
filter: alpha(opacity=80);
}

footer {
width: 1010px;
height: 230px;
background-color: white;
margin: 15px 0 15px 0;
filter: alpha(opacity=80);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:58:58.683

应用此 CSS（仅适用于 IE8 和 9）：

```
ul.nav {
  position: relative;
  z-index: 2; /* 2 or higher */
} 
```

IE7[确实](http://richa.avasthi.name/blogs/tepumpkin/2008/01/11/ie7-lessons-learned/)... `z-index`. 如果你也想以 IE7 为目标，你可以这样做（从[这个页面](http://paulirish.com/demo/css-hacks)获取 CSS hack ）：

```
ul.nav {
  position: relative;
  position: absolute !ie7; /* For IE7 only */
  z-index: 2; /* 2 or higher */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:53:48.633

使用 z-index 仅适用于定位元素。当你测试 zindex 的东西时，你的元素是绝对的还是相对的？

# github - HTML 文件形式的文档可以在 github 上使用吗？

> ID：12907604
> 
> 赞同：1
> 
> 时间：2012-10-16T04:38:55.593
> 
> 标签：github

我的应用程序的文档是一组 HTML 文件。这些 HTML 文件是我的 git repo 的一部分。如果我将这个项目放在 github 上，人们是否能够将 HTML 文档文件视为呈现的 HTML 而不是原始 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:55:47.883

简短的回答是否定的，github 不会呈现 HTML 文档/自述文件。

长答案：Github 使用此[代码](https://github.com/github/markup)来呈现任何 README 文件。从它的文档可以看出，它只支持以下富文本格式：

*   .markdown、.mdown、.md
*   。纺织品
*   .rdoc
*   .org
*   .克里奥尔语
*   .mediawiki
*   .rst
*   .asciidoc
*   。荚

尽管有许多 HTML 到 *MARKUP_LANG* 转换器可以在一定程度上帮助您。

你也可以考虑使用[Github Pages](http://pages.github.com)，它可以让你完全控制页面的 HTML/CSS/Js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:56:16.957

AFAIK，Github 文档在 markdown 中。并且作为 repo 一部分的 HTML 文件显示为原始 HTML。

或者，您可以使用[Github 页面](http://pages.github.com/ "Github 页面")发布您的文档。

GitHub 支持多种格式，

支持以下标记。如果您希望运行该库，列出的依赖项是必需的。

```
.markdown, .mdown, .md -- gem install redcarpet (https://github.com/vmg/redcarpet)
.textile -- gem install RedCloth
.rdoc -- gem install rdoc -v 3.6.1
.org -- gem install org-ruby
.creole -- gem install creole
.mediawiki -- gem install wikicloth
.rst -- easy_install docutils
.asciidoc -- brew install asciidoc
.pod -- Pod::Simple::HTML comes with Perl >= 5.10\. Lower versions should install Pod::Simple from CPAN. 
```

# xcode - Xcode项目文件git合并冲突

> ID：12907605
> 
> 赞同：39
> 
> 时间：2012-10-16T04:38:56.013
> 
> 标签：xcode, git

在 Xcode 中，避免项目文件中的 Git 冲突的最佳方法是什么？（我在手动 git 中，没有为 git 使用 Xcode 接口）

我已经从 Github 克隆了 mapbox-ios-sdk，破解了它，现在远程 master 已经改变了。当我尝试将远程更改拉入本地时，合并后项目文件中会出现合并冲突。（具体来说，我指的是 .xcodeproj 中的 project.pbxproj）

我真的不认为项目文件应该被忽略，因为如果项目文件有任何新文件，.pbxproj 文件似乎被更改。（或者我完全错了，这个文件应该被忽略？但显然它并没有在 mapbox-ios-sdk 开始时被忽略。人们毕竟需要项目文件。）但我也跑了之前在我与另一个合作者的合作项目中陷入了这种冲突，这使我无法完全使用 Git。

我应该弄清楚如何手动解决冲突还是​​有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-05-20T08:21:47.180

许多网站只是建议使用 .gitattributes 文件：

`*.pbxproj merge=union`

在尝试使用脚本之前，我们将尝试这种方法。如果我们发现任何问题，我一定会更新这篇文章。此外，如果其他人对此方法有意见，请包括在内。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-16T05:07:40.623

当您向项目添加新文件时，.pbxproj 将发生变化。如果两个或多个协作者同时添加文件（没有先获取彼此的更改），则会发生冲突。我们在我的项目中通过在添加新文件之前和之后执行以下步骤来避免这种情况：

1.  在添加文件之前，提交您的更改，然后从主服务器拉取，以便您拥有最新的。如果有人添加了文件，您现在拥有最新的 .pbxproj
2.  添加您的文件。
3.  立即提交并将您的更改推送到主服务器（希望在另一个合作者添加另一个文件之前）。

它很懦弱，但我们不喜欢手动解决 .pbxproj 冲突。

另外，请参阅这个 Stack Overflow 问题并获得很好的回答：[如何正确使用 Git 和 XCode？](https://stackoverflow.com/questions/2615378/how-to-use-git-properly-with-xcode)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-04T03:33:11.920

您应该检查我的脚本[xUnique](https://github.com/truebit/xUnique)，它现在是在 Apple 对其采取行动之前合并 Xcode 项目文件的最佳解决方案。

## 它的作用和工作原理

1.  转换`project.pbxproj`为 JSON 格式
2.  在 JSON 中迭代所有`objects`并给每个 UUID 一个绝对路径，并使用路径的 MD5 十六进制摘要创建一个新的 UUID
    *   这个 json 对象中的所有元素实际上都连接成一棵树
    *   我们使用其唯一属性为树的每个节点赋予路径属性；此路径是根节点的绝对路径，
    *   将 MD5 十六进制摘要应用于节点的路径
3.  将所有旧 UUID 替换为 MD5 十六进制摘要，并删除当前节点树中未使用的 UUID 和格式错误的 UUID
4.  对项目文件进行排序，包括`children`、`files`和`PBXFileReference`list`PBXBuildFile`并删除这些列表中的所有重复条目
    *   `sort_pbxproj`如果您想了解实现，请参阅xUnique.py 中的方法；
    *   它是从我的修改[`sort-Xcode-project-file`](https://github.com/truebit/webkit/commits/master/Tools/Scripts/sort-Xcode-project-file)中移植的，在排序`PBXFileReference`和`PBXBuildFile`
5.  通过不同的选项，您可以更灵活地使用*xUnique*

检查[README](https://github.com/truebit/xUnique/blob/master/README.rst#what-it-does--how-it-works)文件以获取更多详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-13T02:44:49.970

在大多数情况下，您可以通过以下代码修复合并，删除 git 添加的行：

```
#!/bin/bash
FILE={PRODUCT_NAME}.xcodeproj/project.pbxproj
sed '/======/d' $FILE | sed '/<<<<</d' | sed '/>>>>>/d' > temp
cat temp > $FILE
rm temp 
```

但是如果您重命名项目的组并导致冲突，您将手动删除原始组的多余行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-12T08:22:32.157

当这是由于添加来自两个或多个协作者/分支的文件引起的（根据我的经验，迄今为止一直如此，可以通过查看差异来检查）我这样做：

1.  通过“使用我们的”或“使用他们的”解决冲突（以添加最多文件的为准）。
2.  提交（这会生成一个包含所有添加的文件但有些不在项目中的存储库）。
3.  在 Xcode 中，使用“将文件添加到...”来添加来自其他合作者/分支的缺失文件（它们很容易找到，因为它们位于项目目录中，Xcode 会为您突出显示它们）。
4.  犯罪。

（我不相信第 2 步真的有必要——但对我来说感觉更整洁）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-01T05:31:54.197

您也可以使用 Mergepbx 手动执行以下操作

1.  使用 brew安装[Mergepbx 。](https://github.com/simonwagner/mergepbx)

    > 冲泡安装mergepbx

2.  每次在项目文件中出现冲突时运行命令以自动解决它们。

    > git mergetool --tool=mergepbx PROJECT.pbxproj

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-30T06:29:06.553

我需要在我的分支中获取主代码所以，我从 master 中提取，并且我在我的 .pbxproj 文件中进行了更改，并且 master 具有不同的配置。所以，它在 .pbxproj 文件中显示冲突。请按照以下步骤解决它

在 Finder 中打开**.pbxproj** -> *右键单击*​​文件选择**Show Package Contents** -> 选择 . **pbxproj 文件**并**使用 TextEdit-** > 打开它，它将显示如下冲突行。

```
<<<<<<< HEAD"
// head changes
===========
// Your changes
>>>>>>>> 
```

您已经从 head Changes 和您的更改中选择了正确的一个，然后删除了其余的。现在提交你的代码

```
git add .
git commit -m"conflict resolved"
git status // Check you files status 
```

如果一切正常，请推送您的代码。

```
git push 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-03T23:11:32.263

当这些事情出错时，我制作了一个应用程序来修复 Xcode 项目文件中的内容。不幸的是，您仍然必须先进行一些手动合并。 [https://itunes.apple.com/us/app/xsaviour/id1449886415?mt=12](https://itunes.apple.com/us/app/xsaviour/id1449886415?mt=12)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-23T04:12:23.923

如果一切都失败了，虽然乏味。您可以在您的 git 客户端中打开您的 pbxproj，然后手动逐个文件执行并确保每个文件都被删除或有 4 行（6 次出现）。

# iphone - 在 iOS 上从横向视图切换到纵向视图

> ID：12907606
> 
> 赞同：1
> 
> 时间：2012-10-16T04:38:56.983
> 
> 标签：iphone, ios, uiview, orientation

我的应用程序中有两个视图。一个（默认情况下）是横向。当用户单击某个菜单时，我需要出现纵向视图。

我有所有的代码，我正在尝试使用它：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

      return (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

但该应用程序仍以横向显示下一个视图。我想不通。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:33:40.597

```
You can not do it using navigation controller but if you are presenting your view then it  is possible to do that and make sure when you are presenting your view animation should be NO.
It works for me very well.

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:45:42.003

您可以在您的`viewWillAppear`方法中使用以下代码来制作您的视图肖像。

```
 [[UIDevice currentDevice] performSelector:NSSelectorFromString(@"setOrientation:") withObject:(id)UIInterfaceOrientationPortrait]; 
```

# mysql - 如何检查数据库中是否已经存在文件？

> ID：12907607
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:38:59.477
> 
> 标签：mysql, database, file

试图检查文件是否已经存在但它不起作用第 6 行

```
if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
{

$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileSize = $_FILES['userfile']['size'];
$fileType = $_FILES['userfile']['type'];
if (file_exists($_FILES['userfile']['name']))
      {
      echo $_FILES['userfile"]["name'] . " already exists. ";
      }else{
$fp= fopen($tmpName, 'r');
$content = fread($fp, filesize($tmpName));
$content = addslashes($content);
fclose($fp);

if(!get_magic_quotes_gpc())
{
    $fileName = addslashes($fileName);
}
//include 'library/config.php';
//include 'library/opendb.php';

$query = "INSERT INTO upload (name, size, type, content )
VALUES ('$fileName', '$fileSize', '$fileType', '$content')";

mysql_query($query) or die('Error, query failed'); 
//include 'library/closedb.php';

echo "<br>File $fileName uploaded<br>";
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:41:35.403

`$_FILES['userfile"]["name']`

确保您的开场报价与结束报价相匹配。例如，有效字符串是`"this"`and `'this'`。

```
echo $_FILES['userfile']['name'] . " already exists. ";
echo $_FILES["userfile"]["name"] . " already exists. ";
// etc. 
```

# jquery - 如何使用jquery从模态框中通过ajax提交表单

> ID：12907610
> 
> 赞同：1
> 
> 时间：2012-10-16T04:39:11.910
> 
> 标签：jquery, jquery-ui, modal-dialog

我很难从模态框中使用 ajax 提交表单。

```
 $( "#modal" ).dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Submit Form": function() {

                    $("#my-form").submit(function(event) {
                        event.preventDefault();
                            $.post('myurl', function(data) {
                                $('.result').html(data);
                            });
                    });

            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    }); 
```

当我尝试通过单击“提交表单”按钮提交表单时，实际上没有任何反应。

我要做的就是使用 modalbox 按钮通过 ajax 提交表单。然后控制器将返回一个简单的文本“表单已处理”，然后`.result`将使用控制器的响应进行更新。

编辑

我的 html 表单如下所示：

```
<form id="my-form" action="myurl" method="post" enctype="multipart/form-data">
    <fieldset>
        <legend>Upload file</legend>
        <p>
                            <label for="fileData">File</label>
            <br />
            <input id="fileData" name="fileData" type="file" value=""/>
        </p>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:16:24.190

您可以使用具有 .ajaxSubmit() 函数[的 jQuery 表单插件。](http://www.malsup.com/jquery/form/#ajaxSubmit)应该是这样的：

```
$("#my-form").ajaxSubmit({
  success: function(response) {
    $('.result').html(response);
  }, error: function(e) {
    $('.result').html(e);
  }
}); 
```

`beforeSubmit`- 预提交回调

`success`- 提交后回调

`error`- 失败响应回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:42:09.087

### 请更改这些行以包含您的`<form>`数据：

```
$.post($(this).parent('form').attr('action'), $(this).parent('form').serialize(), function(data) {
    $('.result').html(data);
}); 
```

***PS：**我不确定在 AJAX 上发送文件是否有效。从逻辑上讲，它应该可以工作。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T06:25:42.267

尝试使用以下标记

```
<form id="my-form" method="post" enctype="multipart/form-data" action='myurl'>
           <fieldset>
    <legend>Upload file</legend>
    <p>
                        <label for="fileData">File</label>
        <br />
        <input id="fileData" name="fileData" type="file"/>
    </p>
</fieldset>
                    </form> 
```

**尝试避免 VALUE="" 文件类型的属性**

然后你的 jquery 将使用[ajaxForm()](http://malsup.com/jquery/form/)

像

```
$(document).ready(function(){ 
$('#fileData').live('change', function(){ 
$("#my-form").ajaxForm({}).submit();
});
}); 
```

# c# - 在wpf中移入和移出动画

> ID：12907613
> 
> 赞同：0
> 
> 时间：2012-10-16T04:39:24.690
> 
> 标签：c#, wpf

请先检查以下示例

[动画示例](http://codecanyon.net/item/multipurpose-bookshelf-slider-jquery-plugin/full_screen_preview/1985655)

我想在我的 wpf Windows 应用程序中执行此操作。请帮帮我

我在 grid.row="0" 中使用 3 个按钮，在 grid.row="1" 中使用三个堆栈面板

当用户单击任何按钮时，相应的堆栈面板应移入，而其他应移出。

我是 WPF 的新手，我在下面尝试过。

```
<Grid>

    <Grid.Triggers>
        <EventTrigger SourceName="btnPNB" RoutedEvent="Button.Click">
            <EventTrigger.Actions>
                <BeginStoryboard x:Name="StoryBoard1">
                    <Storyboard>
                        <DoubleAnimation x:Name="dbMoveOut" Storyboard.TargetName="sPanelPNB" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="0" To="600" AutoReverse="False">
                        </DoubleAnimation>
                        <DoubleAnimation x:Name="dbMoveIn" Storyboard.TargetName="sPanelOtherBank" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="-550" To="0" AutoReverse="False">
                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
        <EventTrigger SourceName="btnOther" RoutedEvent="Button.Click">
            <EventTrigger.Actions>
                <BeginStoryboard x:Name="StoryBoard2">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="sPanelOtherBank" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="-550" To="0" AutoReverse="False">
                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
        <EventTrigger SourceName="btnCAIIB" RoutedEvent="Button.Click">
            <EventTrigger.Actions>
                <BeginStoryboard x:Name="StoryBoard3">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="sPanelCAIIB" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="-550" To="0" AutoReverse="False">
                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Grid.Triggers>

    <Button x:Name="btnPNB" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="20,0,0,0" Content="PNB" Click="moveSP_Click"></Button>
    <Button x:Name="btnOther" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="70,0,0,0" Content="OTher"  Click="moveSP_Click"></Button>
    <Button x:Name="btnCAIIB" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="150,0,0,0" Content="CAIIB" Click="moveSP_Click"></Button>

    <StackPanel x:Name="sPanelPNB" VerticalAlignment="Bottom" Orientation="Horizontal">
        <StackPanel.RenderTransform>
            <TranslateTransform X="-550" Y="0"></TranslateTransform>
        </StackPanel.RenderTransform>
        <Image Source="1_1.jpg" Margin="10,0,0,0" Width="100" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
        <Image Source="1_2.png" Width="100" Margin="50,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
        <Image Source="1_3.png" Width="100" Margin="50,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
    </StackPanel>

    <StackPanel x:Name="sPanelOtherBank" VerticalAlignment="Bottom" Orientation="Horizontal">
        <StackPanel.RenderTransform>
            <TranslateTransform X="-550" Y="0"></TranslateTransform>
        </StackPanel.RenderTransform>
        <Image Source="2_1.png" Margin="10,0,0,0" Width="100" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
        <Image Source="2_2.jpg" Width="100" Margin="50,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
        <Image Source="2_3.png" Width="100" Margin="50,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
    </StackPanel>

    <StackPanel x:Name="sPanelCAIIB" VerticalAlignment="Bottom" Orientation="Horizontal">
        <StackPanel.RenderTransform>
            <TranslateTransform X="-550" Y="0"></TranslateTransform>
        </StackPanel.RenderTransform>
        <Image Source="3_1.png" Margin="10,0,0,0" Width="100" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
        <Image Source="3_2.png" Width="100" Margin="50,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
        <Image Source="3_3.jpg" Width="100" Margin="50,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
        </Image>
    </StackPanel>

</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:24:43.347

这就是你想要的。您每次都更新您的面板。我个人会增加持续时间。但是在这个例子中，如果你调整窗口大小，你会注意到你的面板

```
<Grid>
    <Grid.Triggers>
        <EventTrigger SourceName="btnRed" RoutedEvent="Button.Click">
            <EventTrigger.Actions>
                <BeginStoryboard x:Name="StoryBoard1">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="sPanelRed"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="0"/>
                        <DoubleAnimation Storyboard.TargetName="sPanelBlue"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="-550"/>
                        <DoubleAnimation Storyboard.TargetName="sPanelBlack"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="-550"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
        <EventTrigger SourceName="btnBlue" RoutedEvent="Button.Click">
            <EventTrigger.Actions>
                <BeginStoryboard x:Name="StoryBoard2">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="sPanelRed"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="600" AutoReverse="False"/>
                        <DoubleAnimation Storyboard.TargetName="sPanelBlue"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="0"/>
                        <DoubleAnimation Storyboard.TargetName="sPanelBlack"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="-550"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
        <EventTrigger SourceName="btnBlack" RoutedEvent="Button.Click">
            <EventTrigger.Actions>
                <BeginStoryboard x:Name="StoryBoard3">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="sPanelRed"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="600"/>
                        <DoubleAnimation Storyboard.TargetName="sPanelBlue"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="600"/>
                        <DoubleAnimation Storyboard.TargetName="sPanelBlack"
                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                     To="0"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Grid.Triggers>

    <Button x:Name="btnRed" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="20,0,0,0" Content="show red"></Button>
    <Button x:Name="btnBlue" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,359,0" Content="show blue"></Button>
    <Button x:Name="btnBlack" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,279,0" Content="show black"></Button>
    <StackPanel x:Name="sPanelRed" VerticalAlignment="Bottom" Orientation="Horizontal" Height="10" Background="Red">
        <StackPanel.RenderTransform>
            <TranslateTransform X="-550" Y="0"></TranslateTransform>
        </StackPanel.RenderTransform>
    </StackPanel>

    <StackPanel x:Name="sPanelBlue" VerticalAlignment="Bottom" Orientation="Horizontal" Height="10" Background="Blue">
        <StackPanel.RenderTransform>
            <TranslateTransform X="-550" Y="0"></TranslateTransform>
        </StackPanel.RenderTransform>
    </StackPanel>

    <StackPanel x:Name="sPanelBlack" VerticalAlignment="Bottom" Orientation="Horizontal" Height="10" Background="Black">
        <StackPanel.RenderTransform>
            <TranslateTransform X="-550" Y="0"></TranslateTransform>
        </StackPanel.RenderTransform>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:35:29.960

我确实将您的动画简化为这样的东西，以便您可以处理它：

```
<Grid>

            <Grid.Triggers>
                <EventTrigger SourceName="btnPNB" RoutedEvent="Button.Click">
                    <EventTrigger.Actions>
                        <BeginStoryboard x:Name="StoryBoard1">
                            <Storyboard>
                                <DoubleAnimation x:Name="dbMoveOut" Storyboard.TargetName="sPanelPNB" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="0" To="600" AutoReverse="False">
                                </DoubleAnimation>
                                <DoubleAnimation x:Name="dbMoveIn" Storyboard.TargetName="sPanelOtherBank" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="-550" To="0" AutoReverse="False">
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
                <EventTrigger SourceName="btnOther" RoutedEvent="Button.Click">
                    <EventTrigger.Actions>
                        <BeginStoryboard x:Name="StoryBoard2">
                            <Storyboard>

                                <DoubleAnimation Storyboard.TargetName="sPanelOtherBank" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="-550" To="0" AutoReverse="False">
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
                <EventTrigger SourceName="btnCAIIB" RoutedEvent="Button.Click">
                    <EventTrigger.Actions>
                        <BeginStoryboard x:Name="StoryBoard3">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="sPanelCAIIB" 
                                         Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" 
                                         From="-550" To="0" AutoReverse="False">
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </Grid.Triggers>

            <Button x:Name="btnPNB" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="20,0,0,0" Content="PNB" ></Button>
            <Button x:Name="btnOther" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="70,0,0,0" Content="OTher"  ></Button>
            <Button x:Name="btnCAIIB" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="150,0,0,0" Content="CAIIB" ></Button>

            <Grid x:Name="sPanelPNB" Height="100" VerticalAlignment="Bottom" >
                <Border Background="Aquamarine"></Border>
            </Grid>

            <Grid x:Name="sPanelOtherBank" Height="100" VerticalAlignment="Bottom" >
                <Grid.RenderTransform>
                    <TranslateTransform X="-550" Y="0"></TranslateTransform>
                </Grid.RenderTransform>
                <Border Background="Blue"></Border>
            </Grid>

            <Grid x:Name="sPanelCAIIB" Height="100" VerticalAlignment="Bottom" >
                <Grid.RenderTransform>
                    <TranslateTransform X="-550" Y="0"></TranslateTransform>
                </Grid.RenderTransform>
                <Border Background="Violet"></Border>
            </Grid>

        </Grid> 
```

# javascript - 在 D3.js 中使用数据连接处理删除元素

> ID：12907619
> 
> 赞同：2
> 
> 时间：2012-10-16T04:39:49.383
> 
> 标签：javascript, d3.js

我在图表上有一组圆圈，其中包含以下数据并使用日期作为每个圆圈的键：

```
data = [
 {date: '2012-01-01', amount: 100 },
 {date: '2012-01-02', amount: 200 },
 {date: '2012-01-03', amount: 300 },
 {date: '2012-01-04', amount: 400 },
 {date: '2012-01-05', amount: 500 }
]

var circles = container.selectAll("g.circles")
    .data(data, function(d){ return d.date; });

// ENTER
circles.enter().append("circle")
  .attr("class","live")
  .attr("cy", function(d){return yScale(y(d,i)); })
  .attr("cx", function(d){return xScale(x(d,i)); })
.transition(500)
  .delay(function(d,i){return i*50;})
  .style("display",function(d){ return y(d,i) === null ? 'none' : 'inline'; })
  .attr("r", radius - 3 )
  .attr("fill", "#f7f7f7")
  .attr('clip-path','url(#rpm-clip2)')
  .each("end", events);

// TRANSITION
d3.transition(circles)
  .attr("cy", function(d){return yScale(y(d,i)); })
  .attr("cx", function(d){return xScale(x(d,i)); }); 
```

然后我使用以下数据集重新加载数据：

```
data = [
 {date: '2012-01-01', amount: 200 },
 {date: '2012-01-02', amount: 300 },
 {date: '2012-01-03', amount: 400 },
] 
```

您会注意到，这个数据集更短。我希望删除缺少的日期，但在更新中不会触及它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:52:33.680

您必须明确删除它们。该`.exit()`集合包含所有没有数据的节点：

```
circles.exit().remove(); 
```

[https://github.com/mbostock/d3/wiki/Selections#wiki-exit](https://github.com/mbostock/d3/wiki/Selections#wiki-exit)

# java - 当我得到异常时如何设置消息

> ID：12907623
> 
> 赞同：7
> 
> 时间：2012-10-16T04:40:29.477
> 
> 标签：java, android

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    public String getXmlFromUrl(String url) {
        String responseBody = null;

        getset d1 = new getset();
        String d = d1.getData(); // text
        String y = d1.getYear(); // year
        String c = d1.getCircular();
        String p = d1.getPage();

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("YearID", y));

        nameValuePairs.add(new BasicNameValuePair("CircularNo", c));

        nameValuePairs.add(new BasicNameValuePair("SearchText", d));
        nameValuePairs.add(new BasicNameValuePair("pagenumber", p));
        try {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);

            HttpEntity entity = response.getEntity();

            responseBody = EntityUtils.toString(entity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return responseBody;
    }

    public Document getDomElement(String xml) {
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());

            // i m getting Exception here

            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
    }

    /**
     * Getting node value
     * 
     * @param elem
     *            element
     */
    public final String getElementValue(Node elem) {
        Node child;
        if (elem != null) {
            if (elem.hasChildNodes()) {
                for (child = elem.getFirstChild(); child != null; child = child
                        .getNextSibling()) {
                    if (child.getNodeType() == Node.TEXT_NODE) {
                        return child.getNodeValue();
                    }
                }
            }
        }
        return "";
    }

    /**
     * Getting node value
     * 
     * @param Element
     *            node
     * @param key
     *            string
     * */
    public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }
} 
```

我在这个类中得到异常来解析数据。我想在从 Activity 扩展的另一个类中打印此消息。你能告诉我怎么做吗？我尝试了很多但无法做到..

```
public class AndroidXMLParsingActivity extends Activity {

    public int currentPage = 1;
    public ListView lisView1;
    static final String KEY_ITEM = "docdetails";
    static final String KEY_NAME = "heading";
    public Button btnNext;
    public Button btnPre;
    public static String url = "http://dev.taxmann.com/TaxmannService/TaxmannService.asmx/GetNotificationList";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // listView1
        lisView1 = (ListView) findViewById(R.id.listView1);

        // Next
        btnNext = (Button) findViewById(R.id.btnNext);
        // Perform action on click
        btnNext.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage + 1;
                ShowData();
            }
        });

        // Previous
        btnPre = (Button) findViewById(R.id.btnPre);
        // Perform action on click
        btnPre.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage - 1;
                ShowData();
            }
        });

        ShowData();
    }

    public void ShowData() {
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML

        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        int displayPerPage = 5; // Per Page
        int TotalRows = nl.getLength();
        int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
        int TotalPage = 0;
        if (TotalRows <= displayPerPage) {
            TotalPage = 1;
        } else if ((TotalRows % displayPerPage) == 0) {
            TotalPage = (TotalRows / displayPerPage);
        } else {
            TotalPage = (TotalRows / displayPerPage) + 1; // 7
            TotalPage = (int) TotalPage; // 7
        }
        int indexRowEnd = displayPerPage * currentPage; // 5
        if (indexRowEnd > TotalRows) {
            indexRowEnd = TotalRows;
        }

        // Disabled Button Next
        if (currentPage >= TotalPage) {
            btnNext.setEnabled(false);
        } else {
            btnNext.setEnabled(true);
        }

        // Disabled Button Previos
        if (currentPage <= 1) {
            btnPre.setEnabled(false);
        } else {
            btnPre.setEnabled(true);
        }

        // Load Data from Index
        int RowID = 1;
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        // RowID
        if (currentPage > 1) {
            RowID = (displayPerPage * (currentPage - 1)) + 1;
        }

        for (int i = indexRowStart; i < indexRowEnd; i++) {
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map = new HashMap<String, String>();
            map.put("RowID", String.valueOf(RowID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

            // adding HashList to ArrayList
            menuItems.add(map);

            RowID = RowID + 1;

        }

        SimpleAdapter sAdap;
        sAdap = new SimpleAdapter(AndroidXMLParsingActivity.this, menuItems,
                R.layout.list_item, new String[] { "RowID", KEY_NAME },
                new int[] { R.id.ColRowID, R.id.ColName });
        lisView1.setAdapter(sAdap);
    }

} 
```

这是我要打印该消息的班级

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:49:03.897

你可以简单地用这样的`Try/Catch`块包围你的代码：

```
String xml;
Document doc;
NodeList nl;

try {

    xml = parser.getXmlFromUrl(url); // getting XML
    doc = parser.getDomElement(xml); // getting DOM element
    nl = doc.getElementsByTagName(KEY_ITEM);
} catch (Exception e) {
    Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
} 
```

这样，您不必在`XMLParser`类中进行任何更改，并且您可以轻松处理在主类本身中解析代码时发生的任何异常。此外，对于我来说，显示错误消息`Toast`是最好的选择。

希望这会有所帮助.. 谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:58:19.383

我会说，添加方法并且不要`throws SAXException`在此方法中捕获：`XMLParser.getDomElement()``SAXException`

```
 public Document getDomElement(String xml) throws SAXException { 
```

抓住你正在调用方法`SAXException`的地方并以所需的方式打印消息，例如`AndroidXMLParsingActivity.ShowData()``getDomElement()`

```
 public void ShowData() {
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(url); // getting XML

    Document doc = null;
    try{
          doc  = parser.getDomElement(xml); // getting DOM element
      }catch(SAXException sae){
         //print the desired message here
      }

      .......
      .......
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:48:59.780

为了显示来自非活动类的消息，您需要将当前活动上下文传递为：

```
public class XMLParser {

Context context
    // constructor
    public XMLParser(Context conts) {
    context =conts;
    }
///YOUR CODE
try {

    DocumentBuilder db = dbf.newDocumentBuilder();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xml));
    doc = db.parse(is);

} catch (ParserConfigurationException e) {
    Log.e("Error: ", e.getMessage());
    Toast.makeToast(context, e.toString(), Toast.Long).show();   
    return null;
} catch (SAXException e) {
    Log.e("Error: ", e.getMessage());
    Toast.makeToast(context, e.toString(), Toast.Long).show();  
    // i m getting Exception here
    return null;
} catch (IOException e) {
    Log.e("Error: ", e.getMessage());
    Toast.makeToast(context, e.toString(), Toast.Long).show();  
    return null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T04:43:16.513

只需将构造函数传递给您的`XMLParser`类并将其用作您的构造函数。或者，您可以尝试使用`getApplicationContext()`您可以简单地显示`Toast`当您遇到如下异常时 -

```
try {

    DocumentBuilder db = dbf.newDocumentBuilder();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xml));
    doc = db.parse(is);

} catch (ParserConfigurationException e) {
    Log.e("Error: ", e.getMessage());
    Toast.makeToast(con, e.toString(), Toast.Long).show();   // Will show the message of exception
    return null;
} catch (SAXException e) {
    Log.e("Error: ", e.getMessage());
    Toast.makeToast(con, e.toString(), Toast.Long).show();   // Will show the message of exception
    // i m getting Exception here
    return null;
} catch (IOException e) {
    Log.e("Error: ", e.getMessage());
    Toast.makeToast(con, e.toString(), Toast.Long).show();   // Will show the message of exception
    return null;
} 
```

**更新**

好的，只需按照下面的方式传递构造函数 - 您在调用`XMLparser`该类的位置只需调用如下 -

```
....
XMLParser xml = new XMLParser(AndroidXMLParsingActivity.this);
.... 
```

而且，在`XMLParser`课堂上提到你的构造函数，如下所示 -

```
public class XMLParser {

    Context con;

    public XMLParser(Context context) {

        con = context;

    }
......
} 
```

并且，`con`在你的类中使用它作为你的构造函数`XMLParser`。

# c - 如何确保用户输入一个值？

> ID：12907630
> 
> 赞同：2
> 
> 时间：2012-10-16T04:41:14.970
> 
> 标签：c

我正在尝试获取此代码以验证用户是否输入了值。如果我使用gets() 它可以工作，但是当我将它更改为fgets() 时它会停止工作。我希望它一直循环，直到用户输入至少 1 个字符但小于 25 个字符的字符串，如果它在我的代码中不明显，我是编程新手。谢谢！

```
int main(void)
{
    char input[25], inputNew[25];
    int i;
    int x;
    int y;
    do
    {
        printf("Please enter a string less then 25 characters!\n");
        fgets(input, sizeof(input), stdin);  
        y = strlen(input);  
    }
    while(y>25 || y<=0);

    for (i = 0; i <= strlen(input); i++)
    {
        inputNew[i] = toupper(input[i]);
        for (x = 1; x <= strlen(input); x+=2)
        {
        inputNew[x] = tolower(input[x]);
        }
    }
    printf("The new value is: %s.\n", inputNew);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T04:45:16.723

`fgets`保留结束的换行符，而`gets`将其丢弃。

因此，`y <= 1`如果您使用`fgets`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:50:01.770

首先，避免`gets()`在*任何*严肃的代码中。`gets()`设计不当且不安全。永远不要使用它。

第二。`fgets()`将换行符保留在缓冲区的末尾（同时`gets()`丢弃它）。

第三，`y <= 0`在 的情况下可能是错误的`fgets()`，因为它可能会读取至少一个字符（换行符）。您应该将其替换为`y < 2`.

最后也是*最*重要的：***请缩进您的代码。***:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:46:35.117

nneonneo 击败了我的答案：

> gets() 函数等价于 fgets()，具有无限大小和标准输入流，只是换行符（如果有）不存储在字符串中。

来自[http://www.manpagez.com/man/3/fgets/](http://www.manpagez.com/man/3/fgets/)

我只是添加了参考...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:54:26.083

您已使用静态大小声明变量 input 25 。所以我看不到它有可能为 y = strlen(input); 获得更大的尺寸；

改变你的

```
char input[25]; 
```

到

```
char input[100]; 
```

任何超过 25 的东西。

# html - 如何反序列化具有多个列表的表

> ID：12907632
> 
> 赞同：1
> 
> 时间：2012-10-16T04:41:45.013
> 
> 标签：html, vb.net, xml-serialization

由于有多个列表，我在反序列化此表时遇到了麻烦，我知道我的 trs 重复时需要一个列表，而且我的 tds 也需要一个列表，因为它们也重复，当尝试读取的值时出现问题tds，因为我有它的列表格式。

这是我的xml：

```
<table>
 <tr>
  <td>1</td>
  <td>2</td>
 </tr>
 <tr>
  <td>3</td>
  <td>4</td>
 </tr>
</table> 
```

还有我的课：

```
Public Class table
    Private newtr As List(Of tr)
    <XmlElement()> _
    Public Property tr() As List(Of tr)
        Get
            Return newtr
        End Get
        Set(ByVal value As List(Of tr))
            newtr = value
        End Set
    End Property
End Class

Public Class tr
    Private newtd As List(Of td)
    <XmlElement()> _
    Public Property td() As List(Of td)
        Get
            Return newtd
        End Get
        Set(ByVal value As List(Of td))
            newtd = value
        End Set
    End Property
End Class

Public Class td
    Private newvalue As String
    <XmlElement()> _
    Public Property td() As String
        Get
            Return newvalue
        End Get
        Set(ByVal value As String)
            newvalue = value
        End Set
    End Property
End Class 
```

我的代码：

```
Public Sub test2()
    Dim rr As New table()
    Dim xx As New XmlSerializer(rr.GetType)
    Dim objStreamReader2 As New StreamReader("table.xml")
    Dim rr2 As New table()
    rr2 = xx.Deserialize(objStreamReader2)
    For Each ii As tr In rr2.tr
        MsgBox(ii.td)
    Next
End Sub 
```

那么关于如何获得 tds 中的每一个值的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:22:25.743

您当前已`tr.td`声明为列表，因此您不能将其输出为单个字符串。您需要遍历`td`列表中的每个项目：

```
For Each currTr As tr In rr2.tr
    For Each currTd As td In currTr.td
        MessageBox.Show(currTd.td)
    Next
Next 
```

但是，这不会正确读取示例 XML 中的值。在您的示例中，每个`td`元素都包含一个字符串，而不是另一个同名的子元素。但是您的数据结构假定 XML 的结构如下所示：

```
<table>
 <tr>
  <td>
   <td>1</td>
  </td>
  <td>
   <td>2</td>
  </td>
 </tr>
 <tr>
  <td>
   <td>3</td>
  </td>
  <td>
   <td>4</td>
  </td>
 </tr>
</table> 
```

要解决这个问题，您只需要像这样的两个类：

```
Public Class table
    Private newtr As List(Of tr)
    <XmlElement()> _
    Public Property tr() As List(Of tr)
        Get
            Return newtr
        End Get
        Set(ByVal value As List(Of tr))
            newtr = value
        End Set
    End Property
End Class

Public Class tr
    Private newtd As List(Of String)
    <XmlElement()> _
    Public Property td() As List(Of String)
        Get
            Return newtd
        End Get
        Set(ByVal value As List(Of String))
            newtd = value
        End Set
    End Property
End Class 
```

然后，您可以像这样遍历反序列化的对象：

```
For Each currTr As tr In rr2.tr
    For Each currTd As String In currTr.td
        MessageBox.Show(currTd)
    Next
Next 
```

# php - return_to 与返回 URL 不匹配 - 升级 openid 库后

> ID：12907635
> 
> 赞同：0
> 
> 时间：2012-10-16T04:41:53.373
> 
> 标签：php, drupal-6, openid, google-openid

我`PHP`已从版本**5.2**升级到**5.3**。然后将`OpenId`and 库从**2.1.2**升级到**2.2.2**。并且还更新`Yadis`到最新。在升级之前，`OpenId`登录是有效的。底层**CMS**是**Drupal**。现在我得到一个`Auth_OpenID_FailureResponse`返回的端点。

我的代码如下所示：

```
include 'common.php';
$consumer = getConsumer();
$response = $consumer->complete( BASE_URL . '/google/return' . urlencode($ext_param));

if( $response->status == Auth_OpenID_SUCCESS ){
    echo "Successful status";
} else {
    print_r( $response );
} 
```

跟踪如下所示（删除了原始域名）：

```
Auth_OpenID_FailureResponse Object (
    [status] => failure 
    [endpoint] =>
    [identity_url] =>
    [message] => return_to does not match return URL. Expected http://xxx.xxxxx.com/ \ 
      openid/google/return?from=accounts.google.com&janrain_nonce= \
      2012-10-16T03%3A54%3A37Zudn8eJ, got http://xxx.xxxxx.com/openid/google/return? \
      from=accounts.google.com&janrain_nonce=2012-10-16T03%3A54%3A37Zudn8eJ
    [contact] =>
    [reference] => 
) 
```

这对我来说看起来很奇怪，因为代码没有被修改，但库和 PHP 版本已经升级。我在网上搜索了任何问题并阅读了文档。

我是否错过了任何事情或必须为升级做任何额外的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:04:08.437

我能够自己解决这个问题。根本原因是**Drupal**当前路径变量`$_GET['q']`，因此它已从`$_GET`参数数组中删除，这使得 OpenId 返回端点进程成功。

OpenID 返回端点中的代码：

```
function handle_openid_return () {
    // unset the parameter 'q' from $_GET
    unset($_GET['q']);
    // Include
    include 'common.php';
    // Get the OpenID consumer
    $consumer = getConsumer();

    $response = $consumer->complete( BASE_URL . '/google/return' . urlencode($ext_param));

    // Check the status of the $response object, for successful OpenID call
    if ($response->status == Auth_OpenID_SUCCESS) {
        ...
    } else {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:52:09.427

我在 Drupal 6 中使用最新的 php-openid 遇到了同样的问题。我不得不在调用之前去掉`q=`参数。`$_SERVER['QUERY_STRING']``getConsumer()`

# web - Web 请求代码不会运行

> ID：12907636
> 
> 赞同：1
> 
> 时间：2012-10-16T04:41:55.513
> 
> 标签：web, request

在我的网页中单击按钮时，我运行一个 sql 语句，我还想运行一个 Web 请求。我不想从 Web 请求中加载任何内容，只需运行它。但有趣的是。sql语句的代码运行良好，然后它下面的所有其他东西似乎都没有运行.... 服务器永远不会收到网络请求。

如果我将代码复制到页面并仅运行它可以工作的 Web 请求代码。但在这里它没有。

ASP.NET。感谢大家。我难住了。

```
Imports System
Imports System.Data
Imports System.Web
Imports System.Data.SqlClient

Imports System.IO
Imports System.Net
Imports System.Text

Partial Class _Default
Inherits System.Web.UI.Page

Protected Sub btnAddDeckSize_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnAddDeckSize.Click
    If txtDeckSize.Text > "" And txtNewDeckPrice.Text > "" Then
        Dim WasError As Boolean = False
        Dim SQLstring As String = "Server=server;Database=SecondLifeDatabases;Integrated Security=true"
        Dim SQLconn As SqlConnection
        Dim SQLcmd As New SqlCommand()
        SQLconn = New SqlConnection(SQLstring)
        Try
            SQLconn.Open()
            SQLcmd.Connection = SQLconn
            Try
                SQLcmd.CommandText = ("INSERT INTO [SecondLifeDatabases].[dbo].[YuGiOh-DecksAndPrices]([DeckSize] ,[PriceInLindins])VALUES (" + txtDeckSize.Text + "," + txtNewDeckPrice.Text + ")")
                SQLcmd.ExecuteNonQuery()
            Catch ex As Exception
                Context.Response.Write("error:" + vbCrLf + " " + vbCrLf + "Unable to insert sql data, Type:" + vbCrLf + " " + vbCrLf + ex.Message)
                WasError = True
                SQLconn.Close()
            End Try
        Catch ex As Exception
            Context.Response.Write("error:" + vbCrLf + " " + vbCrLf + "Could not open database:" + vbCrLf + " " + vbCrLf + ex.Message)
            WasError = True
            SQLconn.Close()
        End Try
        SQLconn.Close()
        If WasError = False Then
            Context.Response.Redirect("~/YuGiOh.aspx")
        End If
    Else
        Context.Response.Write("Please check your values, something is Missing")
    End If 
```

'开始代码似乎没有运行'此代码单独运行在另一页上'但在这里，即使上面的代码运行，'我从来没有看到代码 BLOW 的任何结果

```
 ' Create a request using a URL that can receive a post. 
    Dim request As WebRequest = WebRequest.Create("http://sim6103.agni.lindenlab.com:12046/cap/b936c974-cfab-c2ee-a184-4288fe0a10f8")
    ' Set the Method property of the request to POST.
    request.Method = "POST"
    ' Create POST data and convert it to a byte array.
    Dim postData As String = "This is a test that posts this string to a Web server."
    Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
    ' Set the ContentType property of the WebRequest.
    request.ContentType = "application/x-www-form-urlencoded"
    ' Set the ContentLength property of the WebRequest.
    request.ContentLength = byteArray.Length
    ' Get the request stream.
    Dim dataStream As Stream = request.GetRequestStream()
    ' Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length)
    ' Close the Stream object.
    dataStream.Close()
    ' Get the response.
    Dim response As WebResponse = request.GetResponse()
    ' Display the status.
    Console.WriteLine(CType(response, HttpWebResponse).StatusDescription)
    ' Get the stream containing content returned by the server.
    dataStream = response.GetResponseStream()
    ' Open the stream using a StreamReader for easy access.
    Dim reader As New StreamReader(dataStream)
    ' Read the content.
    Dim responseFromServer As String = reader.ReadToEnd()
    ' Display the content.
    Console.WriteLine(responseFromServer)
    ' Clean up the streams.
    reader.Close()
    dataStream.Close()
    response.Close()
End Sub 
```

# c# - 在这种情况下如何使用 backgroundworker？

> ID：12907639
> 
> 赞同：0
> 
> 时间：2012-10-16T04:42:12.670
> 
> 标签：c#, winforms, user-interface, datatable, backgroundworker

我有一个关于后台工作人员如何实际工作的问题。我不太确定它如何使用不同的方法。

因此，例如，我有以下代码（出于说明目的，改编自[http://broadcast.oreilly.com/2010/06/understanding-c-using-backgrou.html ）：](http://broadcast.oreilly.com/2010/06/understanding-c-using-backgrou.html)

```
private void getDateTime()
{
    DateTime startTime = DateTime.Now;
    double value = Math.E;
    while (DateTime.Now < startTime.AddMilliseconds(100)) 
    {
      value /= Math.PI;
      value *= Math.Sqrt(2);
    }
}

private backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    for(int i=0; i <= 100; i++)
    {
        getDateTime();
        backgroundWorker1.ReportProgress(i);
    }
} 
```

这将使用后台工作线程不断计算 DateTime。现在我假设 backgroundworker 的 DoWork 方法中的 for 循环将运行计算，报告进度，然后重复循环（如果我误解了，请纠正我）。

现在假设我有另一种方法，它解析一个（可能很大）DataTable并返回另一个DataTable，在后台使用它意味着我会一遍又一遍地解析DataTable（理论上。再次，如果我错了，请纠正我） ? 如果这是程序的流程，是否有更有效的方法来实现 DataTable 解析而无需重复循环，但仍然能够使用 backgroundworker？

这适用于 Windows 窗体，当我解析 DataTable(s) 时，UI 往往会冻结。我听说 backgroundworker 可以帮助我解决 UI 的冻结问题，但我发现必须一遍又一遍地重新解析整个 DataTable 效率非常低。但是，我不确定是否有任何其他方式可以在没有 for 循环的情况下报告进度。

**编辑：**

我想出了一个临时解决方案。它有效，但我仍然无法报告进度。

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        int rows = (int)e.Argument;
        int count = 0;
        t3 = runComparison();
        for (int i = 0; i <= rows; i++)
        {
            count++;
            int current = count / rows;
            backgroundWorker1.ReportProgress(current * 100);
        }
        e.Result = t3;
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            MessageBox.Show("An unexpected error has occurred. Please try again later.", "ERROR!", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        {
            dataGridView1.DataSource = e.Result;
        }
    } 
```

我知道我的 for 循环没有做任何事情。但是，“runComparison”已经消耗了很多时间。因此，如果它在 for 循环中，则直到整个运行过程才会报告进度。或者，也许我可以使用标签或消息框而不是进度条。不太确定我应该如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:06:11.590

尝试这样做：

```
//make sure background worker report progress
backgroundWorker1.WorkerReportsProgress = True;

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
    progressBar1.Refresh;
    //if your progressbar is on a status strip, you need to refresh the status strip instead
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:03:15.607

我想出了一个相当不雅的解决方案。但它满足用户友好性的要求，所以......无论什么工作：P

感谢所有的反馈，我很感激。

无论如何，这是代码：

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        backgroundWorker1.ReportProgress(1); //to invoke ProgressChanged
        t3 = runComparison(); //run intensive method
        e.Result = t3; //return DataTable
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Visible = true; //display a label
        textBoxProgress.Visible = true; //display the progress bar
        //change the progress bar style
        //the Marquee style is constantly running, so it could show users the process is working
        //not too sure how to explain it, you'll have to try it out. 
        progressBar1.Style = ProgressBarStyle.Marquee; 
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            MessageBox.Show("An unexpected error has occurred. Please try again later.", "ERROR!", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        {
            //reset the display and update the DataGridView
            progressBar1.Visible = false;
            textBoxProgress.Visible = false;
            progressBar1.Style = ProgressBarStyle.Blocks;
            dataGridView1.DataSource = e.Result;
        }
    } 
```

# iphone - 将图片附加到推特帖子

> ID：12907640
> 
> 赞同：4
> 
> 时间：2012-10-16T04:42:36.413
> 
> 标签：iphone, ios, twitter, file-sharing

如何像 iPhone 内置的照片应用程序那样将图片附加到**Twitter帖子？**如果任何机构有一些**示例代码**，那将是一个很大的帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T05:05:33.033

其他答案是建议`TWTweetComposeViewController`，但是如果你可以避免使用这个类，你应该这样做，它现在在 iOS 6 中已被弃用，

请在此处查看：[TWTweetComposeViewController 在 IOS6 中已弃用](https://stackoverflow.com/questions/12681357/twtweetcomposeviewcontroller-deprecated-in-ios6)

并且来自 Apple 自己，[WWDC 2012，第 306 次会议演示文稿 PDF](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_306__integrating_with_facebook_twitter_and_sina_weibo.pdf)：

> 推特框架
> 
> • Twitter 框架已弃用
> 
> • 不要使用 TWTweetComposeViewController

现在要使用 Twitter，你应该使用框架的`SLComposeViewController`类`Social`，它的用法几乎与`TWTweetComposeViewController`.

您可能需要支持 iOS 5，在这种情况下，您别无选择，只能使用`TWTweetComposeViewController`该类，但您应该努力检查`SLComposeViewController`并使用它（如果可用），因为这将在短期内为您节省时间和精力将来，当对 iOS 5 的支持被取消时，`TWTweetComposeViewController`该类真的可能会消失。如果您现在为了简单起见而依赖 Twitter 框架，因为它确实适用于 iOS 5 和 6，那么您是目光短浅的，稍后您**会**遇到问题，只需多几行代码就可以了，这意味着您赢了无需担心未来的 iOS SDK 版本。

您应该导入`Twitter.framework`和`Social.framework`，将它们都标记为**可选**导入（不是必需的）。

示例代码：

```
UIImage *myImage = [...]; // an image

if( NSClassFromString(@"SLComposeViewController") ){
    // We have the Social framework in our iOS system
    // iOS 6 and later will use this

    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]){
        SLComposeViewController *twitterCompose = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        [twitterCompose addImage:myImage]; // Adding your UIImage

        twitterCompose.completionHandler = ^(SLComposeViewControllerResult result){
            // Handle result, dismiss view controller
            [self dismissViewControllerAnimated:YES 
                                     completion:nil];
        };

        [self presentViewController:twitterCompose
                           animated:YES
                         completion:nil];
    }else{
        // the user does not have Twitter set up
    }
}else if( NSClassFromString(@"TWTweetComposeViewController") ){
    // We don't have the Social framework, work with the Twitter framework
    // iOS 5 only will use this

    if( [TWTweetComposeViewController canSendTweet] ){
        TWTweetComposeViewController *twitterCompose = [[TWTweetComposeViewController alloc] init];

        [twitterCompose addImage:myImage];

        twitterCompose.completionHandler = ^(TWTweetComposeViewControllerResult result){
            // Handle result, dismiss view controller
            [self dismissViewControllerAnimated:YES 
                                     completion:nil];
        };
        [self presentViewController:twitterCompose
                           animated:YES
                         completion:nil];
    }else{
        // the user hasn't go Twitter set up on their device.
    }
}else{
    // Wow you're going retro with this app, 
    // you must be on iOS 4 if you ever get here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:52:04.297

这里我如何使用它：

```
 NSLog(@"Ready to Tweet."); 
        TWTweetComposeViewController *tweetComposer = [[TWTweetComposeViewController alloc] init];
        [tweetComposer setInitialText:[NSString stringWithFormat:@"My message"]];
        [tweetComposer addImage:[UIImage imageNamed:@"114x114"]];
        [tweetComposer addURL:[NSURL URLWithString:@"http://myPage"]];
        tweetComposer.completionHandler = ^(TWTweetComposeViewControllerResult result){
        if(result == TWTweetComposeViewControllerResultDone){
            NSLog(@"Tweeted.");

        } else if(result == TWTweetComposeViewControllerResultCancelled) {
            NSLog(@"Cancelled.");
        }

        [self.navigationController dismissViewControllerAnimated:YES completion:nil];
        };
        [self presentModalViewController:tweetComposer animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:55:42.203

如果您使用的是 ios 5.0，那么您可以直接发布图片

添加框架 twitter.framework

导入 Twitter/TWTweetComposeViewController.h

```
-(void)postToTwittert
{
    Class TWTweetComposeViewControllerClass = NSClassFromString(@"TWTweetComposeViewController");

    if (TWTweetComposeViewControllerClass != nil) {
        if([TWTweetComposeViewControllerClass respondsToSelector:@selector(canSendTweet)]) {
            TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

            [twitter setInitialText:@"text"];
            [twitter addImage:[UIImage imageNamed:@"imagename"]];
            [twitter addURL:[NSURL URLWithString:@"http://www.google.com"]];

            [self presentViewController:twitter animated:YES completion:nil];

            twitter.completionHandler = ^(TWTweetComposeViewControllerResult res) {

                if(res == TWTweetComposeViewControllerResultDone)
                {
                    NSLog(@"success for twitter post");

                }
                else if(res == TWTweetComposeViewControllerResultCancelled)
                {

                    UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Canceled" message:@"Your Tweet was not posted" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

                    [alertView show];

                }

                [self dismissModalViewControllerAnimated:YES];

            };
        }
    }
} 
```

在你想要推特帖子的地方调用这个函数

并进行您想要的适当更改..

好运..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:03:44.910

我现在只是用来`UIActivityViewController`在 Twitter 上发帖。

```
UIActivityViewController *controller = [[UIActivityViewController alloc] initWithActivityItems:@[@"Default Text", [UIImage imageNamed:@"imageName"]] applicationActivities:nil];

[self presentViewController:controller animated:YES completion:nil]; 
```

这将呈现一个控制器，用户可以在其中决定做什么（发布到 Twitter、发布到 Facebook 等...）

然后它使用系统推文表等......来做到这一点。

您不必提供默认文本。这无论如何都可以被覆盖。

哦，同样，这不需要任何框架。

# iphone - 核心位置 didEnterRegion 不起作用

> ID：12907642
> 
> 赞同：3
> 
> 时间：2012-10-16T04:42:45.977
> 
> 标签：iphone, ios, core-location

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region 
```

仅当与实现 CLLocationManagerDelegate 的类对应的 UIView 处于活动状态时才有效。

如果我更改了视图，它不会触发 didEnterRegion。任何人都可以帮助我吗？

我的代码看起来像这样

```
- (void)enableRegionMonitoring {
    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    CLLocationCoordinate2D myMonLocation = CLLocationCoordinate2DMake(10.766699790955, 76.650101525879);
    CLRegion *myRegion = [[CLRegion alloc]
                         initCircularRegionWithCenter:myMonLocation
                                               radius:100
                                           identifier:@"MyLoc"];
    //NSLog(@"reg=%@",myRegion); 
    // Start monitoring for our CLRegion using best accuracy
    [locationManager startMonitoringForRegion:myRegion
                              desiredAccuracy:kCLLocationAccuracyBest];
}

- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
    NSLog(@"Entered Region");

    NSDate *nowx=[NSDate date];

    UILocalNotification *localNotification=[[UILocalNotification alloc]init];
    if (!localNotification)
        return;
    NSDictionary *data = [NSDictionary dictionaryWithObject:@"qw" forKey:@"mykey"];
    [localNotification setUserInfo:data];

    [localNotification setFireDate:nowx];
    [localNotification setTimeZone:[NSTimeZone defaultTimeZone]];
    NSMutableString *message=[[NSMutableString alloc]init];
    message = @"Local Not Triggered By didEnterRegion";
    [localNotification setAlertBody:[nowx description]];
    [localNotification setAlertAction:@"Open App"];
    [localNotification setHasAction:YES];
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:57:31.370

通过查看您的代码，我猜您正在使用 ARC，这取决于您的控制器/视图层次结构，当您切换到不同的视图时，您的视图和控制器可能会被释放，当这种情况发生时，locationManager 也会被释放。

只是将整个 CLLocationManager 代码移动到您的 AppDelegate 并让 AppDelegate 成为 CLLocationManager 委托。在您现在调用“enableRegionMonitoring”的地方，您可以在 AppDelegate 上调用它。即使 ViewController 不再可见，它也会保持活动状态。

# iphone - 翻转图像的功能 - 适用于 iOS 5.0，但在 iOS 6.0 上无法访问

> ID：12907645
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:43:17.307
> 
> 标签：iphone, xcode, image, xcode4

```
-(UIImage * ) flipImage: (UIImage * ) imag {
    CGImageRef img1 = imag.CGImage;
    CFDataRef dataref = CopyImagePixels(img1);
    UInt8 * data = (UInt8 * ) CFDataGetBytePtr(dataref);
    int length = CFDataGetLength(dataref);
    size_t width = CGImageGetWidth(img1);
    size_t height = CGImageGetHeight(img1);
    size_t bytesPerRow = CGImageGetBytesPerRow(img1);
    size_t bitsPerComponent = CGImageGetBitsPerComponent(img1);
    size_t bitsPerPixel = CGImageGetBitsPerPixel(img1);
    NSLog(@"size %d x %d pixel:%d   component :%d length:%d", (int) width * 4, (int) height, (int) bitsPerPixel, (int) bitsPerComponent, length);
    int temp;
    for (int i = 0; i < height / 2; i++) {
        for (int j = 0; j < (width * 4); j++) {
            temp = (int) data[i * width * 4 + j];
            NSLog(@"first data :%ld  second data:%ld", i * width * 4 + j, width * 4 * (height - 1 - i) + j);
            data[i * width * 4 + j] = data[(width * 4 * (height - 1 - i)) + j];
            data[(width * 4 * (height - 1 - i)) + j] = (size_t) temp;
        }
    }
    CGColorSpaceRef colorspace = CGImageGetColorSpace(img1);
    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(img1);
    CFDataRef newData = CFDataCreate(NULL, data, length);
    CGDataProviderRef provider = CGDataProviderCreateWithCFData(newData);
    CGImageRef newImg = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorspace, bitmapInfo, provider, NULL, true, kCGRenderingIntentDefault);
    //[imvcomment setImage:[UIImage imageWithCGImage:newImg]];
    return [UIImage imageWithCGImage: newImg];
    CGImageRelease(newImg);
    CGDataProviderRelease(provider);
}

CFDataRef CopyImagePixels(CGImageRef inImage) {
    return CGDataProviderCopyData(CGImageGetDataProvider(inImage));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:07:18.387

[你不能用这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithCGImage%3ascale%3aorientation%3a)`imageWithCGImage:scale:orientation:`描述的一次调用来替换所有这些讨厌的代码吗？

```
UIImage *flipped = [UIImage imageWithCGImage:imag.CGImage scale:1.0 orientation:UIImageOrientationDown]; 
```

您可能需要将方向值更改为不同的值，具体取决于您之后的内容 - “翻转”有点模棱两可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:47:50.600

您的代码没有任何问题，我实现了您的代码并获得了翻转图像。

这是我的代码。

```
UIImage *imgg = [UIImage imageNamed:@"route.png"];

UIImageView *image = [[UIImageView alloc]init];
image.frame=CGRectMake(50, 50, 100, 50);
[self.view addSubview:image];

image.image  =  [self flipImage:imgg]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:15:23.113

你得到每行的字节数，但你没有使用它。图像可能在每行的末尾有额外的填充。（这在具有奇数宽度的图像中很常见。）你可以这样写：

```
for (i = 0; i < height / 2; i++)
{
    for (j = 0; j < width; j++)
    {
        temp = (int)data [ i * bytesPerRow + j ];
        data[i * bytesPerRow + j] = data[(bytesPerRow * (height - 1 - i)) + j];
        data[(bytesPerRow * (height - 1 - i)) + j] = (size_t) temp;
    }
} 
```

此外，您可能想要验证它`bitsPerPixel`是否适合 int。如果图像中有 4 个浮点通道，则可能没有。

# graph-algorithm - 如何修改BFS算法找到最短距离

> ID：12907646
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:43:30.477
> 
> 标签：graph-algorithm

假设在一个图中，所有边的权重=1。解释如何修改 BFS 算法以找到从 A 到 B 的最短距离 SD，即调用 SD (A,B)，其中 A 是起始顶点，B 是结束顶点。考虑 SD 问题的所有可能答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:07:13.343

假设 A 和 B 在同一个连通图上，BFS 可以为您提供 A 和 B 之间的最短距离。

通常，BFS 接收一个起始节点，然后一次发现其邻域，这意味着它会发现距离为 1 的所有节点，然后是距离 2 的所有节点，依此类推。

让我们称将 SD 从 A 返回到 B 的 BFS 的新版本：BFS_D

所以第一个修改是给它两个参数而不是一个。BFS_D 的返回类型将变为布尔值。

现在我们有两种可能性：要么有一条从 A 到 B 的路径，要么没有。

如果有一条路径，在某个时刻，我们将从节点队列中获取 B。我们可以使用第二个队列来存储每个节点的级别，因此我们可以找到 A 到 B 的距离。

如果没有路径，我们将简单地发现所有包含 A 的连通图而不找到 B。基本上，一旦我们没有更多的节点可以访问，我们只返回 false 或 Infinity。

第三种情况可能发生，即 A == B，我们必须确保我们的代码正确处理这种情况。

这是基于[维基百科代码](http://en.wikipedia.org/wiki/Breadth-first_search)修改后的 BFS 的简单实现：

```
procedure BFS_D(G,A,B):
      create a queue Q // This will store the undiscovered nodes
      create a queue D // This will store the level (distance) of each node
      enqueue A onto Q
      enqueue 0 onto D
      mark A
      while Q is not empty:
          t ← Q.dequeue()
          td ← D.dequeue()
          if t is equal to B:
              return td
          for all edges e in G.incidentEdges(t) do
              // G.opposite returns adjacent vertex 
             o ← G.opposite(t,e)
             if o is not marked:
                  mark o
                  enqueue o onto Q
                  enqueue (td + 1) onto D
      return Infinity // We have discovered all the nodes without find B, there is no path 
```

# jquery - 在 jQuery UI 对话框中加载动态链接

> ID：12907652
> 
> 赞同：0
> 
> 时间：2012-10-16T04:44:31.923
> 
> 标签：jquery, jquery-ui, hyperlink

我正在尝试将 RSS 提要中的链接打开到对话框中。我正在尝试从[这里](http://www.ashishblog.com/blog/example-of-jquery-ui-dialog-with-dynamically-loading-an-url-with-an-iframe/)获得的以下代码。该链接未打开对话框。任何建议我做错了什么。谢谢

```
 $(document).ready(function() {
              $('a#URLLoad').live('click', function(e) {
                  e.preventDefault();
                  var page = $(this).attr("href")
                  var pagetitle = $(this).attr("title")
                  var $dialog = $('<div></div>')
                    .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"></iframe>')
                    .dialog({
                        autoOpen: false,
                        modal: true,
                        height: 625,
                        width: 500,
                        title: pagetitle
                    });
                  $dialog.dialog('open');
              });

          });

    <li class="ui-state-default">
<a class="URLLoad" href="http://feeds.arstechnica.com/~r/arstechnica/index/~3/4UlQiQB2n54/">New Xbox interface brings Windows 8 "Metro" style to the console</a></li> 
```

**更新：http:** [//jsfiddle.net/daxnp/](http://jsfiddle.net/daxnp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:46:40.570

你正在使用类而不是 id 像这样更改你的代码

```
$(document).ready(function() {
              $('a.URLLoad').live('click', function(e) {
                  e.preventDefault();
                  var page = $(this).attr("href")
                  var pagetitle = $(this).attr("title")
                  var $dialog = $('<div></div>')
                    .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"></iframe>')
                    .dialog({
                        autoOpen: false,
                        modal: true,
                        height: 625,
                        width: 500,
                        title: pagetitle
                    });
                  $dialog.dialog('open');
              });

          }); 
```

你需要`$('a#URLLoad')`改为`$('a.URLLoad')`

**更新：**

我已经更新了你的小提琴看看这里[演示](http://jsfiddle.net/daxnp/1/)

我认为问题是您没有包含 jquery UI 和 css 的参考

# string - golang 中的 []string 和 ...string 有什么区别？

> ID：12907653
> 
> 赞同：93
> 
> 时间：2012-10-16T04:44:39.533
> 
> 标签：string, go

在 Go 语言中，

`[]string`是一个字符串数组

我们也`...string`用作参数。

有什么区别？

函数定义：

```
func f(args ...string) {} 
```

我可以像下面这样调用这个函数吗？

```
args := []string{"a", "b"}

f(args) 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-16T04:54:04.327

> `[]string`是一个字符串数组

从技术上讲，它是一个引用底层数组的切片

> 我们也`...string`用作参数。
> 
> 有什么区别？

关于结构，真的没什么。两种语法产生的数据类型是相同的。

`...`参数语法生成可变参数。它将接受零个或多个`string`参数，并将它们作为切片引用。

关于调用`f`，您可以使用以下语法将字符串切片传递给可变参数：

```
func f(args ...string) {
    fmt.Println(len(args))
}

args := []string{"a", "b"}

f(args...) 
```

此语法可用于使用文字语法构建的切片或表示可变参数的切片*（因为它们之间实际上没有区别）*。

[http://play.golang.org/p/QWmzgIWpF8](http://play.golang.org/p/QWmzgIWpF8)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-16T04:51:00.167

两者都创建了一个字符串数组，但不同之处在于它的调用方式。

```
func f(args ...string) {

}
// Would be called like this:

f("foo","bar","baz"); 
```

这允许您接受可变数量的参数（所有相同类型）

一个很好的例子是`fmt.Print`和朋友，他们可以根据需要接受尽可能少或尽可能多的参数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-19T20:43:19.177

这是你想要的：

```
var args []string = []string{"A", "B", "C"}

func Sample(args ...string) {
    for _, arg := range args {
        fmt.Println(arg)
    }
}

func main() {
    Sample(args...)
} 
```

播放：[http ://play.golang.org/p/N1ciDUKfG1](http://play.golang.org/p/N1ciDUKfG1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-28T12:36:04.073

它简化了您的函数参数。这是一个示例（[https://play.golang.org/p/euMuy6IvaM](https://play.golang.org/p/euMuy6IvaM)）：方法 SampleEllipsis 接受从零到多个相同类型的参数，但在方法 SampleArray 中，必须声明**args**。

```
package main

import "fmt"

func SampleEllipsis(args ...string) {
    fmt.Printf("Sample ellipsis : %+v\n",args)
}

func SampleArray(args []string) {
    fmt.Println("Sample array ")
    SampleEllipsis(args...)
}

func main() {
    // Method one
    SampleEllipsis([]string{"A", "B", "C"}...)
    // Method two
    SampleEllipsis("A", "B", "C")
    // Method three
    SampleEllipsis()

    // Simple array
    SampleArray([]string{"A", "B", "C"})

    // Simple array
    SampleArray([]string{})

} 
```

返回：

```
Sample ellipsis : [A B C]
Sample ellipsis : [A B C]
Sample ellipsis : []
Sample array 
Sample ellipsis : [A B C]
Sample array 
Sample ellipsis : [] 
```

# python - IndexError：字符串索引超出范围

> ID：12907655
> 
> 赞同：1
> 
> 时间：2012-10-16T04:44:53.260
> 
> 标签：python

此代码的第 6 行产生“IndexError: string index out of range”。我假设当我问“if line[6] != None”时，该行中没有内容，但我不知道为什么。我也尝试过使用！=''，但问题出在此之前。

```
import csv
dict1={} 
list1 = csv.reader(open('014850_D_AA_20070207.txt'), delimiter='\t')
list1.next()    # skips the headers
for line in list1:
    if line[6] != None:
        dict1[line[0]]= (line[6] + ", " + line[11])
    else:
        continue    
print dict1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:49:17.997

1.  Python 索引是从零开始的，因此`line[6]`访问`line`. 在这种情况下，`line`没有七个元素，所以它失败了。

2.  `if line[6] != None`不是检查一行是否没有内容的正确方法。改为使用`if len(line) < 7`。

3.  `csv.DictReader`是一个更好的界面，用于读取带有标题行的 CSV 文件。对其进行迭代可以将行作为字典，并将相应的标题项作为键，这使得代码更易于理解（与使用魔术索引相比）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:20:25.887

为了避免这种情况，将其放在“尝试”块中并使用 string.find() 例如

[-1] 用于获取字符串中的最后一个字符

还有像

```
else:
 continue 
```

不寻常

我差点忘了说： if string[5] != None: 当然会引发 indexerror 因为如果它没有，它将超出范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:05:06.620

感谢所有有用的想法。我能够使用 csv.DictReader 解决我的问题，如下所示：

```
import csv
dictPI = {}
dictGS = {}
fh = open('014850_D_AA_20070207.txt')
for line in csv.DictReader(fh, delimiter='\t'):
    ProbeID = line['ProbeID']
    GeneSymbol = line['GeneSymbol']
    Description = line['Description']
    if GeneSymbol != '':
        dictPI[ProbeID] = GeneSymbol, Description
        dictGS.setdefault(GeneSymbol, []).append(ProbeID) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T06:09:58.470

尝试将第 6 行替换为：

```
if len(line) > 6: 
```

但可能

```
if len(line) > 11: 
```

更好，因为您使用下面的 line[11]。

当您将 line[6] 测试为 == 到 None 时，您已经在尝试访问 line 的第七个元素。如果该行包含少于 7 个字符，这会给您一个索引错误

# wordpress - 创建 WordPress 帖子后添加更多参数

> ID：12907660
> 
> 赞同：1
> 
> 时间：2012-10-16T04:45:16.200
> 
> 标签：wordpress, url

一旦发布了 wordpress 帖子，就会显示提及 Post 已发布的通知。同样，我需要在 URL 中传递自定义参数并根据参数加载自定义消息

这可能吗 ？

默认网址

/wp-admin/post.php?post=16&action=edit&message=6

我想要的是

/wp-admin/post.php?post=16&action=edit&message=6&custom_message=7

# python - sublimetext2 build 显示为空白

> ID：12907662
> 
> 赞同：2
> 
> 时间：2012-10-16T04:45:29.023
> 
> 标签：python, build, sublimetext2

当打开 python 脚本的 ctrl + b 时，我收到“正在构建”消息，然后除了空白之外什么都没有。

这是脚本，它在 IDLE 上完美运行。

```
name = input("What's your name? ")
print("Hello, " + name + "!") 
```

我需要做任何配置才能使其正常工作吗？

我在 Windows 7 上运行 python 3.2 和 Sublime Text 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T22:39:47.730

Sublime 的默认构建命令不以交互方式运行。当我将它与您的脚本一起使用时，我看到“你叫什么名字？”，然后是空白。[您可以查看“在 sublime text 2 中以交互方式运行 python](https://stackoverflow.com/q/14080041/1309332) ”问题的答案。

# jsf - Primefaces 图表值无点

> ID：12907663
> 
> 赞同：1
> 
> 时间：2012-10-16T04:45:35.273
> 
> 标签：jsf, primefaces

我创建了一个简单的条形图，使用`PrimeFaces`. 它工作正常但它以点为单位显示值，例如如果我设置值`min=0`，`max=200`然后它显示图形点，例如
`0 4.44 8.10 12.0 44.6 ...... 200.0`. 有什么办法让我的图表打印出来
`0 2 3 4 5 6 7 ... 200`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:49:42.403

您可以尝试此处发布的解决方案：[primefaces 图表上的数字比例](https://stackoverflow.com/questions/12739615/number-scale-on-primefaces-charts)。

我不确定是否可以从中获取`0 2 3 4 5 6 7 ... 200`，`0 4.44 8.10 12.0 44.6 ...... 200.0`但该点之后的十进制数字将被删除。

# objective-c - 子类化 UIViewController 的子类是一种好习惯吗？

> ID：12907666
> 
> 赞同：0
> 
> 时间：2012-10-16T04:45:47.223
> 
> 标签：objective-c, uilabel, subclassing

假设您有 2 个 tableView 控制器的子类。

它们在页眉底部的顶部都有相同的页眉和页脚视图。他们都实现了拉动刷新。

他们都有一些共同的特点。

唯一不同的是，一个是显示整个商家，另一个是只显示您收藏的商家。

看起来他们都需要有相同的父类，而不同的是在子类上解决。无论如何，差异很小。

我想父母有它自己的XIB，孩子有它自己的XIB。

嗯……那会怎样？除了容器 UIViewController，每个控制器都应该查看内容的完整视图。那么我们应该显示哪个视图呢？孩子还是超类？子视图应该添加它的超类子视图吗？

有人试过吗？

网络上有任何使用这种方法的代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:26.547

听起来，根据您解释的业务逻辑，除了您要呈现的数据列表之外，一切都是共同的。您可以在`UITableViewController`子类上公开一个属性来设置您的 tableview 呈现的业务对象：

```
@interface JTBusinessesTableViewController : UITableViewController

@property (nonatomic, strong) NSArray *businesses;

@end 
```

实例化此类的代码将设置业务对象：

```
JTBusinessesTableViewController *businessListings; //Instantiate from XIB or Storyboard
businessListings.businesses = [self bookmarkedBusinesses];

[self.navigationController pushViewController:businessListings animated:YES] 
```

显示所有业务的代码不会有太大不同：

```
JTBusinessesTableViewController *businessListings; //Instantiate from XIB or Storyboard
businessListings.businesses = [self allBusinesses]; //  Here we assign all of them

[self.navigationController pushViewController:businessListings animated:YES] 
```

您只是有选择地为该视图控制器提供要显示的业务对象。

# c# - .NET BinaryReader 不服从编码

> ID：12907677
> 
> 赞同：3
> 
> 时间：2012-10-16T04:47:19.797
> 
> 标签：c#, .net, unicode, binary, endianness

使用 System.IO.BinaryReader 读取二进制文件时，使用任何多字节读取方法时，字节顺序似乎不受影响。

```
BinaryReader br = new BinaryReader(fs, System.Text.Encoding.BigEndianUnicode); 
```

和

```
BinaryReader br = new BinaryReader(fs, System.Text.Encoding.Unicode); 
```

正在为我产生相同的结果。

这让我很沮丧，因为我在读取数据结构时必须不断地反转字节顺序。

[屏幕截图 - Big Endian Unicode](http://i.imgur.com/kT9e0.png)

[截图 - Little Endian Unicode](http://i.imgur.com/PEAQp.png)

我已经在 .NET 3 到 4.5 上对此进行了测试

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T05:20:51.410

`BinaryReader`仅`Encoding`在处理`string`数据时使用（几乎，只是`ReadString()`）。`ReadBytes`等不涉及`Encoding`- 它只是读取二进制数据。由于您只调用`ReadBytes`，因此 this ( `Encoding`) 永远不会被查看。

如果数据是无序的，那么听起来文件不是用`BinaryWriter`. 如果它不是用 then 创建的，`BinaryWriter`那么`BinaryReader`可能不是那么有用 - 你可以只使用`Stream`.

# javascript - 我正在尝试 Grunt，需要一种简单的方法来连接我的模块

> ID：12907678
> 
> 赞同：15
> 
> 时间：2012-10-16T04:47:30.583
> 
> 标签：javascript, concatenation, gruntjs

这是我第一次使用 Grunt，我想让它结合我所有的 js 模块，每个模块都包装在一个立即执行的函数中，包含一个“use strict”声明，并将它们放入一个文件中，只包含在一个立即执行的函数，只有一个“使用严格”声明。

这通常是如何完成的？

我认为这将是一个常见的用例？也许我做错了事？我是否应该使用其中一种模块加载格式（即 commonjs、amd） 所有这些文件将始终一起加载到浏览器中，所以如果人们通常这样做的话，我实际上不介意删除所有立即执行的函数。重要的部分是最终结果以某种方式包装，通过 lint 和单元测试并包含“use strict”声明。

（我应该澄清一下，我确实让它工作，linting，单元测试，连接和缩小，当我在最终的连接文件中看到一堆不必要的立即执行函数时，感觉就像我做错了什么。）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-29T14:17:21.557

从[pull request 10](https://github.com/gruntjs/grunt-contrib-concat/pull/10)开始，grunt-contrib-concat 现在有了一个`footer`选项。我会使用**横幅**和**页脚**，而不是 intro 和 outro 文件。

**Gruntfile.js**

```
concat: {
  dist: {
    src: ['src/my-lib.js'],
    dest: 'dist/<%= pkg.name %>.js',
    options: {
      banner: ";(function( window, undefined ){ \n 'use strict';",
      footer: "}( window ));"
    }
  }
} 
```

在我看来，这更易于维护，并且允许使用 Gruntfile 中定义的其他属性进行模板化。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-16T04:58:02.153

我通常会像[jQuery 团队那样做](https://github.com/jquery/jquery/tree/master/src)。您创建一个`intro.js`and`outro.js`并将其他所有内容放在两者之间：

**介绍.js**

```
;(function( window, undefined ){
  'use strict'; 
```

**outro.js**

```
}( window )); 
```

**grunt.js**：

```
concat: {
  dist: {
    src: [
      'js/src/intro.js',
      ...
      'js/src/outro.js'
    ],
    dest: 'js/out/app.js'
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T16:02:11.370

只是想添加到@elclanrs 答案，如果您希望能够将模块保存在单独的文件中以便在开发过程中更容易调试，您显然必须用`intro.js`and包装它们`outro.js`。使用内置`concat`任务，您必须编写如下内容：

```
concat: {
  events_debug: { // wrap the 'events' module in IIFE
    src: [
      'js/src/intro.js',
      'js/src/events.js',
      'js/src/outro.js'
    ],
    dest: 'js/out/events.js'
  },
  callbacks_debug: { // wrap the 'callbacks' module in IIFE
    src: [
      'js/src/intro.js',
      'js/src/callbacks.js',
      'js/src/outro.js'
    ],
    dest: 'js/out/callbacks.js'
  }

  // zzZZZ...
} 
```

这是非常乏味和自我重复的。也许您可能想为批量包装文件创建一个自定义任务，例如

```
wrap: {
    html: {
        intro: 'partials/intro.js',
        outro: 'partials/outro.js',
        src: 'js/*.js',
        dest: 'out' // output directory
    }
} 
```

最近有一个关于这个的问题，请看这个帖子：

[使用 grunt concat，我将如何自动将同一文件连接到许多其他文件？](https://stackoverflow.com/questions/12722855/using-grunt-concat-how-would-i-automate-the-concatenation-of-the-same-file-to-m/12749861#12749861)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-28T19:10:16.737

我建议您使用我的 grunt 插件**grunt-concat-deps**，因为它会自动解析独立于您的架构的模块。

另外：您不需要为插件进行任何显式模块配置，因为它依赖于 YUIDoc 样式中的声明性和分散式模块定义。

有关更多信息，请参见此处：[https ://github.com/leoselig/grunt-concat-deps](https://github.com/leoselig/grunt-concat-deps)

# java - 正则表达式查找没有特殊字符的文本

> ID：12907679
> 
> 赞同：1
> 
> 时间：2012-10-16T04:47:35.273
> 
> 标签：java, regex

我有一个段落，其中一些文本被特定的 html 标签包围。我需要找到未被该特定 html 标记包围的文本。例如

```
AVG Antivirus for Smartphones and Tablets detects harmful apps and SMS. 

<font color='black'>AVG</font> Mobilation™ AntiVirus Pro for Android™ is a mobile security 

solution that helps protect your mobile device from viruses, malware, spyware and online 

exploitation in real-time. avg blah blah... 
```

我想找到不被 . 包围的单词 AVG（不区分大小写）`<font color='black'> </font>`。它可以是单词的一部分，也可以是单个的整个单词。在部分文本的情况下，包含单词 AVG 的整个单词不应被该 html 标记包围

我怎么能用Java做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:58:43.690

请参阅[http://www.regular-expressions.info/lookaround.html#limitbehind](http://www.regular-expressions.info/lookaround.html#limitbehind)

如果您还没有，您可以尝试以下操作：-

```
(?<!<font color='black'>)AVG(?!</font>) 
```

# java - 如何让 Selenium 等到执行的进程返回

> ID：12907680
> 
> 赞同：1
> 
> 时间：2012-10-16T04:47:46.857
> 
> 标签：java, selenium

使用 Selenium，我执行了一个 AutoIt 脚本，该脚本打开 Microsoft Word 文档以进行比较。最后保存文件。

Selenium 脚本不会等到 AutoIt 可执行文件完成。我怎样才能让 Selenium 脚本做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:59:51.460

希望这可以帮助你。

```
Process proc=Runtime.getRuntime().exec("Location to your script");
InputStream is = proc.getInputStream();
 int retCode = 0;
    while(retCode != -1)
    {
    retCode = is.read();
    } 
System.Out.println("Now Exiting"); 
```

# html - html 选择禁用

> ID：12907682
> 
> 赞同：0
> 
> 时间：2012-10-16T04:48:03.647
> 
> 标签：html

我无法在这样的选择元素中显示第一个选项：http: [//jsfiddle.net/L6h9Q/](http://jsfiddle.net/L6h9Q/)

我希望第一个选项标记用作占位符，但默认情况下首先显示第二个选项标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:54:16.513

您可以将`selected="selected"`属性添加到第一个选项以将其设置为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:54:32.830

一种解决方法：http: [//jsfiddle.net/L6h9Q/2/](http://jsfiddle.net/L6h9Q/2/)

重要组成部分：

1.  添加`required`到`select`;
2.  用于`select:invalid`使颜色变灰；
3.  用于`option:first-child`使第一个选项变为灰色。

缺点：仅适用于支持 HTML5/CSS3 的浏览器。

* * *

**编辑**：

受@Russell 的启发，这里有一个（有点）更好的解决方案：http: [//jsfiddle.net/L6h9Q/3/](http://jsfiddle.net/L6h9Q/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:55:56.533

无法选择禁用的项目（根据定义）。页面加载时显示的项目确实被选中。

使用纯 JS 和 HTML 解决此问题的规范方法是启用该选项，然后在提交时验证您的表单结果（客户端和服务器端）。如果用户选择了占位符选项（在您的情况下为“城市...”），则让他们知道他们做出了无效的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:51:29.683

是的，因为它只会先显示启用的值，然后再显示禁用的值

# android - Android HttpClient、DefaultHttpClient、HttpPost

> ID：12907683
> 
> 赞同：7
> 
> 时间：2012-10-16T04:48:26.823
> 
> 标签：android, apache-httpclient-4.x

我如何将字符串数据 ( `JSONObject.toString()`) 发送到 url。我想在 util 类中编写一个静态方法来执行此操作。我希望方法签名如下

`public static String postData (String url, String postData) throws SomeCustomException`

字符串url的格式应该是什么

返回字符串是来自服务器的响应，作为 json 数据的字符串表示。

### 编辑

### 当前连接工具

```
package my.package;
import my.package.exceptions.CustomException;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URLDecoder;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;

 public class ConnectionUtil {

 public static String postData(String url, String postData)
        throws CustomException {

    // Create a new HttpClient and Post Header
    InputStream is = null;
    StringBuilder sb = null;
    String result = "";
    HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost();
    httppost.setHeader("host", url);

    Log.v("ConnectionUtil", "Opening POST connection to URI = " + httppost.getURI() + " url = " + URLDecoder.decode(url));

    try {
        httppost.setEntity(new StringEntity(postData));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
        e.printStackTrace();
        throw new CustomException("Could not establish network connection");
    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "utf-8"), 8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line = "0";

        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        is.close();
        result = sb.toString();

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
        throw new CustomException("Error parsing the response");
    }
    Log.v("ConnectionUtil", "Sent: "+postData);
    Log.v("ConnectionUtil", "Got result "+result);
    return result;

}

} 
```

### 日志输出

> 10-16 11:27:27.287：E/log_tag(4935)：http 连接出错 java.lang.NullPointerException 10-16 11:27:27.287：W/System.err(4935)：java.lang.NullPointerException 10- 16 11:27:27.287: W/System.err(4935): 在 org.apache.http.impl.client.AbstractHttpClient.determineTarget(AbstractHttpClient.java:496) 10-16 11:27:27.307: W/System。错误（4935）：在 org.apache.http.impl.client.AbstractHttpClient.execute（AbstractHttpClient.java:487）10-16 11:27:27.327：W/System.err（4935）：在 org.apache.http .impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 10-16 11:27:27.327: W/System.err(4935): 在 in.gharpay.zap.integration.ConnectionUtil.postData(ConnectionUtil.java: 92) 10-16 11:27:27.327: W/System.err(4935): 在 in.gharpay.zap.integration.ZapTransaction$1.doInBackground(ZapTransaction.java:54) 10-16 11:27:27.327: W /System.err（4935）：在 in.gharpay.zap.integration.ZapTransaction$1.doInBackground(ZapTransaction.java:1) 10-16 11:27:27.327: W/System.err(4935): 在 android.os.AsyncTask$2.call(AsyncTask. java:185) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent .ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 10-16 11:27:27.327: W/System.err(4935): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10- 16 11:27:27.327: W/System.err(4935): 在 java.lang.Thread.run(Thread.java:1019) 10-16 11:27:27.327: V/log_tag(4935): 无法建立网络连接ZapTransaction$1.doInBackground(ZapTransaction.java:1) 10-16 11:27:27.327: W/System.err(4935): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 10-16 11: 27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935):在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java: 1088) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/ System.err(4935): at java.lang.Thread.run(Thread.java:1019) 10-16 11:27:27.327: V/log_tag(4935): 无法建立网络连接ZapTransaction$1.doInBackground(ZapTransaction.java:1) 10-16 11:27:27.327: W/System.err(4935): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 10-16 11: 27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935):在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java: 1088) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/ System.err(4935): at java.lang.Thread.run(Thread.java:1019) 10-16 11:27:27.327: V/log_tag(4935): 无法建立网络连接错误（4935）：在 android.os.AsyncTask$2.call（AsyncTask.java:185）10-16 11:27:27.327：W/System.err（4935）：在 java.util.concurrent.FutureTask$Sync。 innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27: 27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 10-16 11:27:27.327: W/System.err(4935): 在 java.util .concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/System.err(4935): at java.lang.Thread.run(Thread.java:1019) 10- 16 11:27:27.327: V/log_tag(4935): 无法建立网络连接错误（4935）：在 android.os.AsyncTask$2.call（AsyncTask.java:185）10-16 11:27:27.327：W/System.err（4935）：在 java.util.concurrent.FutureTask$Sync。 innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27: 27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 10-16 11:27:27.327: W/System.err(4935): 在 java.util .concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/System.err(4935): at java.lang.Thread.run(Thread.java:1019) 10- 16 11:27:27.327: V/log_tag(4935): 无法建立网络连接innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27: 27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 10-16 11:27:27.327: W/System.err(4935): 在 java.util .concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/System.err(4935): at java.lang.Thread.run(Thread.java:1019) 10- 16 11:27:27.327: V/log_tag(4935): 无法建立网络连接innerRun(FutureTask.java:306) 10-16 11:27:27.327: W/System.err(4935): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-16 11:27: 27.327: W/System.err(4935): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 10-16 11:27:27.327: W/System.err(4935): 在 java.util .concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/System.err(4935): at java.lang.Thread.run(Thread.java:1019) 10- 16 11:27:27.327: V/log_tag(4935): 无法建立网络连接concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/System.err(4935): 在 java.lang.Thread.run(Thread.java:1019) 10-16 11:27:27.327: V/log_tag(4935): 无法建立网络连接concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-16 11:27:27.327: W/System.err(4935): 在 java.lang.Thread.run(Thread.java:1019) 10-16 11:27:27.327: V/log_tag(4935): 无法建立网络连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:14:34.237

好吧，这是我对您的问题的看法：-

1.  `POST`首先，您应该通过 using方法简单地将数据发送到服务器。它在 Android 中也很容易且绝对可行。发送`POST`数据的简单代码片段可以是：

    ```
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(
            "http://yourserverIP/postdata.php");
    String serverResponse = null;
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("datakey1", dataValue1));
        nameValuePairs.add(new BasicNameValuePair("datakey2",
                dataValue2));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);

        serverResponse = response.getStatusLine().toString();
        Log.e("response", serverResponse);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
    ```

    上面的代码将数据发送到服务器上的 PHP 脚本`postdata`。

2.  接下来，为了解析`JSON`服务器发送的数据，您可以使用 a `JSONParser`，然后根据您的需要轻松使用它。您可以使用以下代码获取从服务器返回的响应：

    ```
    String jsonData = EntityUtils.toString(serverResponse.getEntity()); 
    ```

希望这可以帮助。谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:43:48.183

我认为在您的代码中，基本问题是由您使用 url 参数的方式引起`StringEntity`的`POST`。检查以下代码是否有助于使用`StringEntity`.

```
 // Build the JSON object to pass parameters
    JSONObject jsonObj = new JSONObject();
    jsonObj.put("username", username);
    jsonObj.put("data", dataValue);

    // Create the POST object and add the parameters
    HttpPost httpPost = new HttpPost(url);
    StringEntity entity = new StringEntity(jsonObj.toString(), HTTP.UTF_8);
    entity.setContentType("application/json");
    httpPost.setEntity(entity);

    HttpClient client = new DefaultHttpClient();
    HttpResponse response = client.execute(httpPost); 
```

希望这有助于解决您的问题。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:58:27.387

尝试使用此方法，其中 strJsonRequest 是您要发布的 json 字符串，而 strUrl 是您要发布 strJsonRequest 的网址

```
 public String urlPost(String strJsonRequest, String strURL) throws Exception 
{
    try
    {
        URL objURL = new URL(strURL);
        connection = (HttpURLConnection)objURL.openConnection();
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setAllowUserInteraction(false);
        connection.setUseCaches(false);
        connection.setConnectTimeout(TIMEOUT_CONNECT_MILLIS);
        connection.setReadTimeout(TIMEOUT_READ_MILLIS);
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Accept-Charset", "utf-8");
        connection.setRequestProperty("Content-Type", "application/json; charset=utf-8");
        connection.setRequestProperty("Content-Length", ""+strJsonRequest.toString().getBytes("UTF8").length);

        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());

        byte [] b = strJsonRequest.getBytes("UTF-8");

        outputStream.write(b);
        outputStream.flush();

        inputstreamObj = (InputStream) connection.getContent();//getInputStream();

        if(inputstreamObj != null)
            strResponse = convertStreamToString(inputstreamObj);

    }
    catch(Exception e)
    {
        throw e;
    }
    return strResponse;
} 
```

并且方法 convertStreamToString() 如下

```
private static String convertStreamToString(InputStream is)
{
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    BufferedReader reader = null;
        try {
            reader = new BufferedReader(new InputStreamReader(is));
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    StringBuilder sb = new StringBuilder();

    String line = null;
    try
    {
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
        }
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    }
    finally 
    {
        try 
        {
            is.close();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T05:00:15.813

根据您的服务器端代码的设置方式，您的服务器有一个 php 页面来处理 API 调用的 url 的示例格式将是：

```
http://yoururl.com/demo.php?jsondata=postData 
```

如果您使用的是后连接，您可以简单地说：

```
http://yoururl.com/demo.php 
```

并将您的帖子参数传递给它，即json字符串

这是关于如何做到这一点的一个很好的教程：http: //yoururl.com/demo.php?jsondata= [postData](http://yoururl.com/demo.php?jsondata=postData)

# c - 使用 m4 将字符串转换为 ASCII 码点

> ID：12907684
> 
> 赞同：2
> 
> 时间：2012-10-16T04:48:26.467
> 
> 标签：c, character-encoding, ascii, m4

这应该是可能的，但是由于我是 m4 的新手，我不确定如何去做，或者如何编写算法来做到这一点（在 m4 中）。

编辑：

刚刚解决了，反正为了以后参考，我有一系列字符，它们需要被翻译成它们等效的ASCII码点，例如

```
ascii(-{COLON}-, -{:}-) => #define TKN_COLON 58 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-04T16:35:01.767

为了其他对纯 m4 实现感兴趣的人的利益，我设法创建了以下转换宏。它必须干预引用字符以支持正常的 m4 引用字符。如果这不重要，它可以简化一点。

```
changequote(<!,!>) # Change quotes so we can handle "`" and "'"

# Change quotes every time this macro is called
define(<!asciiord!>,<!changequote(<!,!>)<!!>_asciiord(<!$1!>)<!!>changequote`'dnl
!>)

# Convert chars one at a time in the string argument
define(<!_asciiord!>,<!ifelse(<!$1!>,,, dnl
  <!_aconv(substr(<!$1!>,0,1))<!!>ifelse(len(<!$1!>),1,,<!,!>) $0(substr(<!$1!>,1))!>)!>)

# Map ASCII chars to their integer index by position
# Control chars are not supported.
# If the comment character is changed you must alter the map accordingly
define(<!_aconv!>,<!ifelse(<!$1!>,<! !>,32,<!$1!>,<!#!>,35,dnl
  <!index(<!                                 !" $%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~ !>,<!$1!>)!>)!>)

changequote # Restore normal quoting chars 
```

用法：

```
asciiord(`hello') --> 104, 101, 108, 108, 111 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:19:28.207

我通过以下代码部分完成了此操作

```
divert(-1)
changequote(-{,}-)
changecom(/*,*/)
define(-{ascii}-,-{#define TKN_-{}-$1 esyscmd(-{python -c "import sys; sys.stdout.write('%d'%ord('$2'))"}-)}-)
divert(0)dnl 
```

如果有人知道这样做的更好方法（例如本机 m4 或更便携的 shell 命令），我将不胜感激。

# java - 将字符串列表从 Java 传递到 C

> ID：12907685
> 
> 赞同：2
> 
> 时间：2012-10-16T04:48:26.410
> 
> 标签：java, c, eclipse, list, java-native-interface

我需要通过 JNI 将字符串列表从 Java 传递到 C。我的 Java 程序传递一个 List 参数，而 C 程序接受一个列表。

下面是我尝试过的代码。

```
JNIEXPORT jobject JNICALL Java_jni_CallJNIfunction(JNIEnv *env,  
                                                         jobjectArray jParameters){

    list<const char*> cParameters;

    jsize stringCount = env->GetArrayLength(jParameters);

    for (int i=0; i<stringCount; i++) {
       jstring arrElement = (jstring) (env->GetObjectArrayElement(jParameters, i));
       const char* nativeElement = env->GetStringUTFChars( arrElement, NULL);

       cParameters.push_back(nativeElement);
       env->ReleaseStringUTFChars(arrElement, nativeElement);
    }

    CallCfunction(cParameters);

} 
```

但是我的 JVM 在 GetStringUTFChars() 行崩溃了。这个程序有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:06:31.273

你做：

```
const char* nativeElement = env->GetStringUTFChars( arrElement, NULL);
cParameters.push_back( nativeElement );
env->ReleaseStringUTFChars(arrElement, nativeElement); 
```

您将存储的字符串释放到列表中，因此您的列表包含很多错误的指针！

您必须将字符串复制到长时间分配的空间中，您可以选择 std::string、char*+malloc 或 use-it-and-forget-it 方法。

第三种解决方案的说明：

```
for( int i = 0; i < stringCount; ++i )
{
   jstring arrElement = (jstring) (env->GetObjectArrayElement(jParameters, i));
   const char* nativeElement = env->GetStringUTFChars( arrElement, NULL);
   CallCfunction( nativeElement ); // modified to process an item not a list<
   env->ReleaseStringUTFChars(arrElement, nativeElement);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:02:18.263

以下代码将采用 a`Set<String>`并将其转换为 a `std::vector<std::string>`，但我不会这样做，您最好使用 上的`toArray`方法将集合转换为数组`Set`，然后您可以使用原始代码。

```
JNIEXPORT jobject JNICALL Java_jni_CallJNIfunction(
  JNIEnv *env,
  jclass,
  jobject setObj) {

    jmethodID iteratorID = env->GetMethodID(env->FindClass("java/util/Set"), "iterator", "()Ljava/util/Iterator;");
    jclass iterator = env->FindClass("java/util/Iterator");
    jmethodID hasNextID = env->GetMethodID(iterator, "hasNext", "()Z");
    jmethodID nextID = env->GetMethodID(iterator, "next", "()Ljava/lang/Object;");

    std::vector<std::string> strSet;

    jobject iteratorObj = env->CallObjectMethod(setObj, iteratorID);
    while (env->CallBooleanMethod(iteratorObj, hasNextID) == JNI_TRUE) {
      jstring current = (jstring)env->CallObjectMethod(iteratorObj, nextID);
      const char* str = env->GetStringUTFChars(current, NULL);

      strSet.push_back(str);

      env->ReleaseStringUTFChars(current, str);
    }
} 
```

但是除非你有大量`Set`的复制到数组会太慢或占用太多内存，否则我会转换为数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T02:59:54.333

简单的 C 函数的第一个答案是：

```
char **GetStringsfromJniStringArray(JNIEnv *env, jobjectArray stringArray) {
    size_t stringCount = (size_t)(*env)->GetArrayLength(env, stringArray);
    char **Strings=calloc(stringCount, sizeof(char*));
    int i = 0;
    for(i = 0; i < (int)stringCount; ++i )
    {
        jstring jniString = (jstring) (*env)->GetObjectArrayElement(env, stringArray, i);
        const char *TempString = (*env)->GetStringUTFChars(env, jniString, NULL);
        Strings[i] = calloc(strlen(TempString)+1, sizeof(char));
        strcpy(Strings[i], TempString);
        (*env)->ReleaseStringUTFChars(env, jniString, TempString);
    }
    return Strings;
} 
```

# java - JSTL Core fmt:message Tag 使用捆绑/属性文件的动态消息

> ID：12907686
> 
> 赞同：19
> 
> 时间：2012-10-16T04:48:31.963
> 
> 标签：java, jsp, jakarta-ee, web-applications, jstl

我了解标准`fmt:message`标签的用法，即我们在 JSP 中定义如下内容：

```
<fmt:setBundle basename="ResourceBundles.ValidationErrorMessages" var="errorMessages" />
<fmt:message key="${error.value}" bundle="${errorMessages}" /> 
```

假设 error.Value = "MQ2009"

我的名为“ValidationErrorMessages”的属性文件有以下条目

```
MQ2009 = MQ time out 
```

现在我的要求是有类似的东西

```
MQ2009 = Mq timeout happened for message {messagename}. 
```

我可以`messagename`动态定义变量吗？即在运行时，`messagename`将在请求范围内可用，并且应该在属性文件中替换它。

我怎样才能做到这一点？我需要自定义标签还是 Java EE 提供了我不知道的这个功能？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-16T04:57:23.877

您可以定义属性，例如

```
MQ2009 = Mq timeout happened for {0} 
```

进而

```
<fmt:message key="MQ2009" var="val" >
   <fmt:param value="${valueComingFromSomeParameter}"/>
</fmt:message> 
```

进而

```
<c:out value="${val}"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T05:02:12.923

在你的属性文件中

```
MQ2009 = Mq timeout happened for message {0} 
```

然后你可以嵌套一个带有`<fmt:param value="${messagename}"/>`标签的`<fmt:message`标签，`messagename`在请求范围内。

# android - 如何在android中创建示例库项目

> ID：12907689
> 
> 赞同：-1
> 
> 时间：2012-10-16T04:48:53.080
> 
> 标签：android, android-ndk, shared-libraries

在android中创建库项目的步骤是什么？

现在我处于起步阶段，不知道要做什么。任何人都可以为我提供任何包含创建示例库项目步骤的示例链接吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T04:51:14.327

这将对您有所帮助。

[http://www.vogella.com/articles/AndroidLibraryProjects/article.html](http://www.vogella.com/articles/AndroidLibraryProjects/article.html)

# ios - 未找到架构 i386 opencv xcode 4.4.1 osx lion 的符号

> ID：12907695
> 
> 赞同：1
> 
> 时间：2012-10-16T04:49:51.887
> 
> 标签：ios, xcode, opencv

对不起...我早期使用的是xcode 4.4.1和macbook pro 2011，它在osx lion 64位上运行...

我在编译时收到以下错误...

```
 Undefined symbols for architecture i386:
  "_gzclose", referenced from:
      _cvReleaseFileStorage in OpenCV(persistence.o)
      _cvOpenFileStorage in OpenCV(persistence.o)
   "_gzeof", referenced from:
  __ZL6icvEofP13CvFileStorage in OpenCV(persistence.o)

"_gzgets", referenced from:
      __ZL7icvGetsP13CvFileStoragePci in OpenCV(persistence.o)
  "_gzopen", referenced from:
      _cvOpenFileStorage in OpenCV(persistence.o)
  "_gzputs", referenced from:
      __ZL7icvPutsP13CvFileStoragePKc in OpenCV(persistence.o)
  "_gzrewind", referenced from:
      _cvOpenFileStorage in OpenCV(persistence.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我声明`cv::mat`..（如果我删除它..它将正确编译..）时发生了这种情况，有人知道如何解决这个问题吗？谢谢..

# sql - 如何计算给定日期（一天、一个月或一年）的 MS Access 表中列的总和

> ID：12907699
> 
> 赞同：1
> 
> 时间：2012-10-16T04:50:16.857
> 
> 标签：sql, ms-access, vb.net-2010

我在 Access 中有一个以自定义格式保存`dd/MM/yyyy hh:mm:ss tt`的表格，在 VB.NET 2010 中也有一个表格，我得到了一个特定的日期、月份和年份，没有问题，但是当我想查询名为 value 的列的总和时，问题就来了取决于特定的月份或日期或年份....

表是这样的：

```
+-----+-----------+-------------------------+
| id  |     value |       date              |
+-----+-----------+-------------------------+
| id1 |      1499 | 01/01/2012 07:30:11 p.m.|
| id2 |      1509 | 11/02/2012 07:30:11 p.m.|
| id3 |      1611 | 21/10/2012 07:30:11 p.m.|
| id1 |      1115 | 11/10/2012 07:30:11 p.m.|
| id1 |      1499 | 17/05/2012 07:30:11 p.m.|
| id2 |      1709 | 11/06/2012 07:30:11 p.m.|
| id3 |      1911 | 30/07/2012 07:30:11 p.m.|
| id1 |      1015 | 01/08/2012 07:30:11 p.m.|
| id1 |      1000 | 11/05/2012 07:30:11 p.m.|
|+-----+-----------+------------------------+ 
```

所以我知道查询

`SELECT SUM(value) FROM mytable WHERE date in='01/05/2012 00:00:00'`...

如何告诉查询我想要五月所以我会得到 1499+1000= 2499

或者如何告诉我想要 2012 年所以我会得到所有表格的总和

这将是正确的语法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:58:08.533

如果您的“日期”字段的数据类型是日期/时间，您的查询可以使用日期文字来指定要评估的行范围。对查询中的日期文字使用 yyyy-mm-dd 格式，并将它们包含在`#`字符中以通知数据库引擎它们是日期/时间值。

2012 年 5 月：

```
SELECT SUM([value])
FROM mytable
WHERE [date] >= #2012-05-01# AND [date] < #2012-06-01#; 
```

2012 年全年：

```
SELECT SUM([value])
FROM mytable
WHERE [date] >= #2012-01-01# AND [date] < #2013-01-01#; 
```

我将两者都括`date`在`value`方括号中，因为它们都是保留字。

注意我假设您的`[date]`字段已编入索引。如果这是正确的，我建议的查询应该允许数据库引擎快速识别哪些行符合您的选择标准。如果没有可用的索引，数据库引擎将不得不执行全表扫描——检查表中的每一行以确定其中哪些符合条件。在性能方面，“全表扫描 == 坏”和“索引检索 == 更好”。而当 db 引擎可以使用索引时，检索速度可以轻松快一个数量级。因此，如果您的字段上还没有索引`[date]`，您应该考虑添加一个。

相关的一点是您应该设计查询，以便数据库引擎可以使用索引。如果您的`WHERE`子句包含函数，例如下面的两个示例，这些函数需要 db 引擎检查表中的每一行，它就无法利用索引......并且您基本上回到了全表扫描。

*   `WHERE Year([Date])=2012 and Month([Date])=5`
*   `WHERE Year([Date])=2012`

如果您的桌子足够小，这不是什么大问题。您可能没有注意到滞后。但是请记住这一点，以了解表的大小何时/如果增长，或者在为其他大表创建类似查询时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:37:26.323

它不是标准 SQL，但如果您使用 Access，这应该始终有效：

```
 SELECT SUM([Value]) FROM Mytable WHERE Year([Date])=2012 and Month([Date])=5 
```

或者这个，如果你只想过滤年份：

```
 SELECT SUM([Value]) FROM Mytable WHERE Year([Date])=2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:54:19.870

您可以使用 between 函数来查询一个月或一年：

```
SELECT SUM(value) FROM mytable WHERE date  between to_date ('01/05/2012', 'yyyy/mm/dd')    AND to_date ('31/05/2012', 'yyyy/mm/dd'); 
```

# arrays - 如何使数组可见，同时使其他数组在单击后隐藏 AS3

> ID：12907700
> 
> 赞同：1
> 
> 时间：2012-10-16T04:50:26.293
> 
> 标签：arrays, actionscript, properties, visible

我在 As3 中将一组影片剪辑设置为数组。一旦在舞台上单击一个按钮，我就可以使代码工作；但是一旦用户点击另一个缩略图，前一个影片剪辑仍然在舞台上。我想要完成的是，一旦用户单击的主数组或剪辑变得可见，我希望其他数组或影片剪辑变得隐藏。我知道我可能需要数组的 if 循环继承我的代码：

```
var soles:Array = [sle1,sle2,sle3,sle4]; 
var Slbtn_arr:Array = [sole,sole2,sole3,sole4];

for (var i= 0; i < Slbtn_arr.length; i++)
{
    trace(i,Slbtn_arr[i]);

    var temp_Slbtn = Slbtn_arr[i];
    temp_Slbtn.addEventListener(MouseEvent.CLICK, btnCl);
    temp_Slbtn.count = i;
    soles[i].visible = false;
    soles[0].visible = true;    
}

function btnCl(e)
{
    var num = e.target.count;
    trace(e.target, e.target.count, soles[e.target.count]);
    //hideAll()
    soles[num].visible = true;
}

function hideAll()
{
    for (var i= 0; i < soles.length; i++)
    {
        soles[i].visible = false;
    }
} 
```

# .net - 使用 NuGet 安装 5.0.0.0 后如何加载 EntityFramework 版本 4.4.0.0 的先前版本

> ID：12907703
> 
> 赞同：0
> 
> 时间：2012-10-16T04:50:47.170
> 
> 标签：.net, entity-framework

我已经在这个 MVC3 项目上工作了几个月，并试图将一些用于在表单下拉列表中列出值的表转换为未映射为表的类。由于某些未知原因，我开始使用 VS2012 Express “无法加载文件或程序集 'EntityFramework，Version=4.4.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089' 或其依赖项之一”时出现此错误。

我尝试删除 EntityFramework 引用，然后使用 NewGet 将其添加回来，但通过 NewGet 提供的版本是 5.0.0.0。

我的问题是，当它只提供 5.0.0.0 版本时，如何通过 NewGet 引用正确的 EntityFramework build 4.4.0.0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:08:03.313

您可以使用 NuGet 安装特定版本的包：

```
Install-Package EntityFramework -Version 4.3.1 
```

但我建议在项目中使用一个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:58:13.840

如果它修复了你，你可以使用最新的 EF 吗？如果是这样，并且如果您有一个多项目解决方案，则升级使用 EF 的项目可能少于所有项目。您可以在解决方案级别管理 nuget 引用。尝试一下，看看哪些项目引用了 EF；更新任何旧版本。

如果您不是这种情况，那么您可以随时尝试手动破解 packages.config 文件（当然，首先创建备份），或将正确版本的 EF dll 复制到您的 bin 目录（它位于 .Net 框架目录中的某个位置）。

# api - 如何将 Affiliate API 集成到网站中

> ID：12907705
> 
> 赞同：1
> 
> 时间：2012-10-16T04:50:49.343
> 
> 标签：api, integration

如何将会员 API 集成到我的网站中，基本上是一个可以上传会员的脚本，相应地创建包含产品名称、规格和更新价格的页面。我可以使用像 magento 这样的 CMS 吗？如果有任何可用的原始脚本，请分享。

# mysql - mysql 部分匹配问题

> ID：12907712
> 
> 赞同：0
> 
> 时间：2012-10-16T04:51:31.523
> 
> 标签：mysql, sql-like

我有这样的`mysql`查询

```
SELECT group_name FROM t_groups WHERE group_name LIKE '%PCB%'; 
```

结果是

```
group_name
------------
PCB
Full size PCB 
```

另一个查询，

```
SELECT group_name FROM t_groups WHERE group_name LIKE '%PCB-123%';

group_name
-----------
PCB-123 
```

如何使用显示所有三个结果的查询？，我的意思是我需要获取所有开始或包含**PCB的结果**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:59:06.247

采用[`RLIKE`](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)

由于您已经更改了问题的上下文，因此以下是我的更新答案

```
SELECT group_name FROM t_groups WHERE group_name RLIKE '[PCB]' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:26:12.280

```
 SELECT group_name FROM test WHERE group_name LIKE '%PCB%' 
```

这在 mysql 中工作正常，检查[小提琴演示](http://sqlfiddle.com/#!2/0c885/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T05:02:21.403

我已执行您的查询

```
SELECT group_name FROM t_groups WHERE group_name LIKE '%PCB%'; 
```

对我来说很好。它返回了 3 条记录

您能解释一下您对 group_name 列使用的数据类型是什么类型吗

# c# - 获取包括所有形状对象的 Excel 范围

> ID：12907713
> 
> 赞同：1
> 
> 时间：2012-10-16T04:51:50.327
> 
> 标签：c#, excel, vsto

在 VSTO (C#) 项目中，我想使用 UsedRange，包括图片和图表等形状对象。

**1.有没有办法用形状对象获取UsedRange？**

由于我找不到这样的方法，我想用这个来计算边缘：

```
foreach (Excel.Shape shape in shapeObjects)
{
     float shapeBottom = shape.Top + shape.Height;
     float shapeRight = shape.Left + shape.Width;
     if (maxBottom < shapeBottom)
     {
         maxBottom = shapeBottom;
     }
     if (maxRight < shapeRight)
     {
         maxRight = shapeRight;
     }
 }

 Excel.Range r = <XXX>(maxBottom, maxRight); 
```

所以现在我遇到了从 maxBottom 和 maxRight 获取 Range 的问题。

**2\. 有没有办法通过给出宽度和高度来获取 Range 对象？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:03:41.077

形状有一个 BottomRightCell 属性，它返回形状右下角覆盖的单元格。如果您遍历每个形状的该属性，您应该能够收集最右边的列和您想要的范围的最后一行。

# haskell - 使用 IO monads 编写大部分代码可以吗

> ID：12907714
> 
> 赞同：8
> 
> 时间：2012-10-16T04:51:52.190
> 
> 标签：haskell, monads

我正在尝试使用 Haskell 开发聊天服务器。

有很多有用的工具，比如`TChan`, `TSkiplist`, `forkIO`...等等，但事实证明，我的大部分代码都是写在 IO monads 和 unsafePerformIO 中，这听起来效率很低。

这样做可以吗，或者 haskell 不是用于此目的的正确工具？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T06:20:01.273

作为一般规则，**首先**尝试将代码编写为纯函数，而不用担心数据来自哪里——只要假设它就在那里。

接下来将纯函数包装在 IO 中，以提供纯函数数据并将结果放在某处。聊天应用程序中有**很多**这样的事情没关系！IO monad 一点也不低效，只是我们更喜欢尽可能多地保留代码，因为这是一个很好的设计——让数据处理与 IO 分开。聊天应用程序不会对其获取的数据进行大量计算，因此可以有大量的 IO 代码。

我认为坚持使用 IO monad 肯定比使用 unsafePerformIO 更好，因为 unsafePerformIO 将其结果呈现为纯数据。我可能*很想*用它从配置文件中获取常量，但我从来没有真正这样做过，而且如果你在 IO monad 中很忙，那也没有意义。它被称为不安全是有原因的！Petr Pudlák 在下面的评论中有很好的建议。

我听说 Haskell 的 monads 被描述为世界上[最好的命令式编程语言](https://stackoverflow.com/questions/6622524/why-is-haskell-sometimes-referred-to-as-best-imperative-language)。我可以在那个描述上分裂头发，但我同意这种观点，是的，坚持使用 Haskell。Haskell 擅长于您使用它的编程。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T05:19:59.473

每当你注意到你有一个长函数驻留在 IO monad 中时，停下来看看发生的计算是值得的。根据我的经验，（几乎）总是发生一些与 IO 无关的事情，这些事情不需要访问输入输出并且可以封装在*纯*函数中。

这有一个很大的优势，它迫使您找到适当的抽象并将（纯）算法与输入/输出处理分开。此外，验证和测试纯函数要容易得多。当然，您仍然可以从某个`IO a`函数（例如`main`）中调用这些纯函数，但这完全没问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T14:46:09.440

> 我的大部分代码都写在 IO monads 中

没关系。

> 和 unsafePerformIO

那很糟！避免`unsafePerformIO`像瘟疫一样使用；它应该只在非常特殊的情况下由经验丰富的 Haskellers 使用。

> 这样做可以吗，或者 haskell 不是用于此目的的正确工具？

在 IO monad 中写代码是可以的，但使用`unsafePerformIO`. 相反，学习如何使用`Monad`接口（`do`符号）组合 IO 操作。了解哪些函数类型签名需要包含该`IO`类型。

# java - 如何连接mysql和jcreator？

> ID：12907717
> 
> 赞同：1
> 
> 时间：2012-10-16T04:52:13.453
> 
> 标签：java, mysql, sql, jcreator

我正在使用 jceator 4.50.010 和 mysql 5.5.28。我的 Windows 版本是 7 64 位。我安装了 mysql-connector-odbc-5.2.2-winx64 以将 jcreator 与 mysql 连接。然后我按照以下过程

```
1\. First went to my control panel then Administrative Tools > Data Sources(ODBC)
2\. The ODBC Data Source Dialog will then appear, select the System DSN tab.
3\. Click on the Add button then another Dialog Box containing the Drivers will appear. Select mysql ODBC Driver then click Finish. 
```

比窗口显示的要下面的东西。

```
1.Data source name
2.User
3.password
4.database 
```

我不知道这些会是什么。密码可能是我在安装 mysql 时给出的密码。当我按下测试按钮时，会出现以下消息

```
"Connection failed:[HY000][mysql][odbc 5.2 w driver] access denied for 'odbc' @ 'localhost' (using password:YES)" 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:08:51.737

为什么不使用 JDBC 驱动程序呢？那是关系数据库
[MySQL/J](http://www.mysql.com/downloads/connector/j/)的标准 java 接口。您在可下载的包本身中有示例。

如果您必须使用 ODBC 驱动程序，您可能也应该获得一个 ODBC-JDBC 桥。

编辑：我相信您正在尝试连接到 java 应用程序中的数据库并使用 jcreator 作为 IDE。您可以在我上面提供的链接中获取 MySQL 的最新 jdbc 驱动程序。jdbc 驱动程序基本上是一个 jar 文件，您需要像任何其他库一样在类路径中拥有它。这是一个快速入门教程 [http://www.vogella.com/articles/MySQLJava/article.html](http://www.vogella.com/articles/MySQLJava/article.html)

这与 jcreator 无关或特定

就 jcreator 而言，我最近自己没有使用它。我查看了功能集，不认为您可以通过它连接到数据库。也许您正在将它与 Visual Studio 进行比较，Visual Studio 是一个多合一的软件包，您可以在其中进行数据库开发（触发 SQL 查询，查看架构......），我认为它不会那样做。如果您正在寻找此类功能，请查看[SQL Workbench/J](http://www.sql-workbench.net/)或[DBeaver](http://dbeaver.jkiss.org/)。这些是单独的应用程序，可让您进行数据库开发（仅限）并具有对 mysql 的内置支持。

# bash - 同时运行三个shell脚本

> ID：12907721
> 
> 赞同：22
> 
> 时间：2012-10-16T04:52:55.547
> 
> 标签：bash, shell

我有三个 shell 脚本，我正在运行如下 -

```
sh -x script1.sh

sh -x script2.sh

sh -x script3.sh 
```

因此，每个脚本在前一个脚本完成执行后一次一个地执行。

**问题陈述：-**

有什么方法可以从一个窗口同时执行以上三个脚本？我只想同时执行script1、script2、script3。如果您想到一些 CRON JOB 调度`script1 at 3 AM, script2 at 3AM, script3 at 3AM`（所有三个脚本同时，同时）。这就是我需要的，我需要同时执行所有三个脚本。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-16T04:54:24.160

你要这个？

```
$ sh -x script1.sh & sh -x script2.sh & sh -x script3.sh & 
```

更新说明：

*   在后台模式下运行每个脚本，以便在不等待当前命令完成的情况下运行下一个命令。
*   `'&'`使脚本在后台运行，因此提示不会等待它完成
*   `'&'`也可用于在一行上链接命令，类似于在命令行上一一运行命令。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-05T11:23:44.853

使用 GNU Parallel，您可以：

```
parallel sh -x ::: script1.sh script2.sh script3.sh 
```

如果脚本是可执行的，那么你甚至可以这样做：

```
parallel ::: script1.sh script2.sh script3.sh 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

10秒安装：

```
$ (wget -O - pi.dk/3 || lynx -source pi.dk/3 || curl pi.dk/3/ || \
   fetch -o - http://pi.dk/3 ) > install.sh
$ sha1sum install.sh | grep 883c667e01eed62f975ad28b6d50e22a
12345678 883c667e 01eed62f 975ad28b 6d50e22a
$ md5sum install.sh | grep cc21b4c943fd03e93ae1ae49e28573c0
cc21b4c9 43fd03e9 3ae1ae49 e28573c0
$ sha512sum install.sh | grep da012ec113b49a54e705f86d51e784ebced224fdf
79945d9d 250b42a4 2067bb00 99da012e c113b49a 54e705f8 6d51e784 ebced224
fdff3f52 ca588d64 e75f6033 61bd543f d631f592 2f87ceb2 ab034149 6df84a35
$ bash install.sh 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-16T05:02:37.983

`&`允许进程在后台运行。

```
sh -x script1.sh &
sh -x script2.sh &
sh -x script3.sh & 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-16T04:56:23.217

不确定您要完成什么，但您可以创建一个调用这 3 个脚本或通过在末尾添加“&”将它们发送到后台。

```
sh -x script1.sh &
sh -x script2.sh &
sh -x script3.sh & 
```

# views - CRM 2011 有没有办法联合查询

> ID：12907727
> 
> 赞同：0
> 
> 时间：2012-10-16T04:53:33.647
> 
> 标签：views, dynamics-crm-2011

我（实际上是我的客户）有兴趣在他们的仪表板上按他们的方向查看活动列表 = 传出。

通用活动没有方向属性，但电子邮件、电话、传真、信件等有。

如何在单个视图中选择方向 = 传出的所有活动？有效地联合多个查询的结果。

如果可以直接在数据库上运行一个 sql 查询，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:10:53.340

我认为您最好创建自定义报告。

在那里，您可以直接在数据库上运行 SQL 查询

[使用 SQL Server Reporting Services 为 Microsoft Dynamics CRM 创建报告](http://msdn.microsoft.com/en-us/library/gg328097.aspx)

# javascript - Jquery - 创建一个通用语言文件来声明任何插件的默认值

> ID：12907730
> 
> 赞同：3
> 
> 时间：2012-10-16T04:53:51.597
> 
> 标签：javascript, jquery, internationalization

像大多数人一样，我在我的网站上使用了一堆 jquery 插件。从 Twitter 引导程序到 jquery ui datepicker 等等。

但是我需要我的网站是多语言的，所以**我创建了一个名为 english.js 的通用语言文件，并且在该文件中我想声明插件的一些默认值以及其他语言变量**。

问题是所有这些插件都有不同的结构来声明默认值。我已经看到了几个问题（[jquery - 设置插件默认值？](https://stackoverflow.com/questions/3357607/jquery-setting-plugin-defaults)，[全局定义 jQuery 插件参数](https://stackoverflow.com/questions/6735890/globally-defining-jquery-plugin-parameters)，[jQuery 插件默认值](https://stackoverflow.com/questions/6881212/jquery-plugin-defaults)，...）。但他们并不清楚。

**结构 1**

```
$.fn.ajaxStatus = function (params)
{
    var settings = $.extend(
            {
                defaultLoadingText :"Loading...",
                defaultSavingText  :"Saving...",
                defaultDoneText    :"Done",
                defaultRedirectText:"Redirecting...",
                defaultErrorText   :"Oops! Our bad, something wrong.";
            },$.fn.ajaxStatus.defaults,
            params),
}); 
```

**结构 2**

```
 jQuery.fn.extend({
        shrinker:function (options) {
            var opts = $.extend({
                "moreText":"Read more", 
                "lessText":"hide",
            }, $.fn.shrinker.defaults, options);
   }); 
```

**问题**

在不修改插件的情况下，是否可以为每次使用插件时将使用的功能分配一些默认值？如何在外部文件中定义语言默认值？

现在，我的语言文件中有这个，但感觉不对，你是这样做的吗？

```
if ($.fn.ajaxStatus !== undefined) {
    $.fn.ajaxStatus.defaults =
    {
        defaultLoadingText :"Loading2...",
        defaultSavingText  :"Saving2...",
        defaultDoneText    :"Done2",
        defaultRedirectText:"Redirecting2...",
        defaultErrorText   :"Oops! Our bad, something wrong"
    };
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:34:47.890

我可以看到在一个对象中执行此操作，如下所示：

```
var en = {
    defaultLoadingText: "Loading...",
    defaultSavingText: "Saving...",
    defaultDoneText: "Done",
    defaultRedirectText: "Redirecting...",
    defaultErrorText: "Oops! Our bad, something wrong.";
    moreText: "Read more", 
    lessText: "hide"
}; 
```

假设插件之间的选项名称没有重叠，您可以使用以下方式开始您的插件：

```
$('').ajaxStatus(en);
$('').shrinker(en); 
```

大多数插件接受一个选项对象并忽略额外的属性。如果您有一些其他选项要传递给特定插件，则只需使用`$.extend()`：

```
$('').ajaxStatus($.extend({}, { success: function () {} }, en)); 
```

如果您真的想将插件选项分开，只需创建另一个级别：

```
var en = {
    ajaxStatus: {
        defaultLoadingText: "Loading...",
        defaultSavingText: "Saving...",
        defaultDoneText: "Done",
        defaultRedirectText: "Redirecting...",
        defaultErrorText: "Oops! Our bad, something wrong.";
    },
    shrinker: {
        moreText: "Read more", 
        lessText: "hide"
    }
}; 
```

然后：

```
$('').ajaxStatus(en.ajaxStatus);
$('').shrinker(en.shrinker); 
```

最后，您可以通过将它们全部存储在一个多层对象中来获得不同的语言并使其更容易获得：

```
var localizedOptions = {
    'en-US': {
        ajaxStatus: {
            defaultLoadingText: "Loading...",
            defaultSavingText: "Saving...",
            defaultDoneText: "Done",
            defaultRedirectText: "Redirecting...",
            defaultErrorText: "Oops! Our bad, something wrong.";
        },
        shrinker: {
            moreText: "Read more", 
            lessText: "hide"
        }
    },
    'es-ES': {
        ajaxStatus: {
            defaultLoadingText: "Cargar...",
            defaultSavingText: "Guardar...",
            defaultDoneText: "Terminado",
            defaultRedirectText: "Redirigir...",
            defaultErrorText: "¡Ay! Nuestra algo malo, malo.";
        },
        shrinker: {
            moreText: "Leer más", 
            lessText: "esconder"
        }
    } // ... etc.
}; 
```

和

```
$('').ajaxStatus(localizedOptions[navigator.language || navigator.userLanguage].ajaxStatus); 
```

我必须承认我自己没有使用过这样的东西，因为我通常以资源文件的形式获取语言文件。在这种情况下，我将通过服务器端逻辑输出一个键/值对集合并手动设置适当的插件属性。

在 ASP.NET MVC 中：

```
<script>
var Resources = {};
@foreach (var kvp in ViewBag.Resources) {
Resources['@kvp.Key'] = "@kvp.Value";
}
</script> 
```

这将输出不同的集合，具体取决于我所在的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T06:09:17.930

我做了类似的事情。但我没有给出完整的实现。

这是如何做到的。

为这样的语言定义插件参数：

```
var options = {
    lang: "np" //your default language
}; 
```

像这样设置你的语言对象

```
var lang = {
    "en": {
        "var1" : "This is variable one"
    },
    "np": {
        "var1": "यो एउटा भेरियबल हो ।"  //Different text based on language initials
    }
}; 
```

然后你可以简单地创建一个函数来读取这样的值

```
function showVar1() {
    alert(lang[options.lang].var1);
} 
```

[[Demo]](http://jsfiddle.net/5faBM/2/)[*它不是基于插件的。*]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:44:16.623

我认为我这样做的方式与**STRUCTURE 1**非常相似。我认为可以像您建议的那样覆盖插件默认值。

我会像这样构建我的插件：

```
(function($){

    $.fn.pluginName = function (options) {
        /**
         * Here I'm extending an empty object to include the options
         * passed to the plugin, with the default options.
         */
        var opts = $.extend({}, $.fn.pluginName.defaults, options);

        // body of plugin here
    });

    // default values for plugin
    $.fn.pluginName.defaults = {
        defaultLoadingText :"Loading...",
        defaultSavingText  :"Saving...",
        defaultDoneText    :"Done",
        defaultRedirectText:"Redirecting...",
        defaultErrorText   :"Oops! Our bad, something wrong."
    };

})(jQuery); 
```

然后`english.js`你可以重新定义`$.fn.plugin.defaults`对象：

```
if ($.fn.pluginName) {
    // override the default values in the specified language
    $.fn.pluginName.defaults = {
        defaultLoadingText :"Loading...",
        defaultSavingText  :"Saving...",
        defaultDoneText    :"Done",
        defaultRedirectText:"Redirecting...",
        defaultErrorText   :"Oops! Our bad, something wrong."
    };
} 
```

这将覆盖插件的默认默认值。如果这是有道理的。

# validation - 音频暂停时允许暂停 Windows 商店应用程序

> ID：12907731
> 
> 赞同：1
> 
> 时间：2012-10-16T04:53:52.627
> 
> 标签：validation, background, windows-runtime, windows-store

Windows 商店应用程序的要求之一是它们支持挂起。我的应用程序被标记为后台音频任务，因此它在单独放置时不会暂停，但它应该在音频暂停时暂停。

我不知道如何“告诉 Windows”什么时候可以挂起或不能挂起。如何让我的后台音频应用程序通过包验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:14:19.297

要启用背景音频，您必须为媒体控制按钮事件注册处理程序。这些在 Windows.Media.MediaControl 类中，特别是 PlayPressed、PausePressed、PlayPausePressed（某些硬件对两者都有一个按钮）和 StopPressed。如果您没有这些处理程序，则背景音频将不起作用。使用处理程序，Windows 将知道音频何时暂停，然后将能够暂停您。幸运的是，凭借您的 Play[Pause]Pressed 处理程序，Windows 也将在重新开始播放时恢复应用程序。

这些事件适用于硬件和屏幕按钮，例如![在此处输入图像描述](../Images/9c838d363287c112073f9e6a6b49d51f.png)

如果您正在播放多个曲目，则为 NextTrackPressed 和 PrevTrackPressed 注册处理程序控制是否在此处启用前进/后退按钮。MediaControl 类中的 AlbumArt、TrackName 和 ArtistName 字段也用于在上面的媒体控件 UI 中设置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:22:21.833

我最近正在开发具有相同背景音频任务支持的 Windows 应用商店应用程序（在线广播应用程序），并且一直未能通过 WACK - 事实证明，您**不能将背景音频的 MediaElement 设置为 AutoPlay = true，否则您将不断通过挂起测试**。

这个（和其他一些技巧）在这个方便但没有公开的技巧列表中：[http ://www.slideshare.net/msdnbelux/windows-store-top-learnings-from-the-first-belgian-windows-8-应用](http://www.slideshare.net/msdnbelux/windows-store-top-learnings-from-the-first-belgian-windows-8-apps)

# jquery - 数据表中的可拖动函数

> ID：12907738
> 
> 赞同：1
> 
> 时间：2012-10-16T04:54:16.417
> 
> 标签：jquery, jquery-ui, datatable, datatables

我正在使用数据表插件制作网格。我正在尝试编辑下面链接中给出的功能...

[http://datatables.net/release-datatables/extras/ColVis/style.html](http://datatables.net/release-datatables/extras/ColVis/style.html)

当我们单击右侧（搜索框下方）给出的按钮以打开添加/删除列对话框时，我无法使其可拖动。我已经用 div 替换了 js 文件中的所有按钮，并且我还在 js 文件中添加了可拖动功能，但它不起作用。

有人可以告诉我为什么它不起作用或者我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:12:36.580

你试过什么？如果我在该页面上打开控制台，请附加 jQuery UI 脚本：

```
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js';
script.id = 'jquery-ui';
$('head')[0].appendChild(script); 
```

其次是：

```
$('.ui-buttonset').draggable(); 
```

然后我可以按预期拖动元素。

# python - SubmitField 是否需要验证器？

> ID：12907748
> 
> 赞同：3
> 
> 时间：2012-10-16T04:55:06.487
> 
> 标签：python, wtforms

我是 WTForms 的新手。我有一个带有提交按钮的用户注册表单：

```
submit = SubmitField('Submit') 
```

我想确保通过按下提交按钮而不是其他方式提交表单。在[文档](http://wtforms.simplecodes.com/docs/0.6.1/fields.html)中它指出

```
class wtforms.fields.SubmitField(default field arguments)
Represents an <input type="submit">. This allows checking if a given submit button has been pressed. 
```

这提出了一个问题：对于我的情况，我是否需要添加“必需”验证器？

例如，是否需要：

```
submit = SubmitField('Submit', [validators.Required()]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T05:32:16.797

我想你会的。查看源代码，没有什么是`SubmitField`必需的。

这`SubmitField`实际上只是一个`BooleanField`：

```
class SubmitField(BooleanField):
    """
    Represents an ``<input type="submit">``.  This allows checking if a given
    submit button has been pressed.
    """
    widget = widgets.SubmitInput() 
```

关联的小部件只是一个具有 type="submit" 的 Input 小部件。它似乎也使用 SubmitField 的标签作为 HTML 中的文本。

```
class SubmitInput(Input):
    """
    Renders a submit button.

    The field's label is used as the text of the submit button instead of the
    data on the field.
    """
    input_type = 'submit'

    def __call__(self, field, **kwargs): 
        kwargs.setdefault('value', field.label.text)
        return super(SubmitInput, self).__call__(field, **kwargs) 
```

它似乎并没有做更多的事情。

# c# - SQL Server 异常：超时已过期。操作完成前超时时间已过或服务器无响应

> ID：12907753
> 
> 赞同：2
> 
> 时间：2012-10-16T04:55:47.123
> 
> 标签：c#, asp.net, sql-server

我在 asp.net 中创建了一个登录页面，并在 asp.net 成员中创建了一个用户和角色，登录后我在我的页面加载方法中有一个查询来检查用户的角色并根据该用户显示页面视图但我收到了这个错误。

> *超时已过。在操作完成之前超时时间已过或服务器没有响应。*

我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Page.User.Identity.IsAuthenticated)
    {

        if (Roles.IsUserInRole("Manager"))
        {

            NavigationMenu.Visible = false;
            NavigateMenu1.Visible = true;

                creategrid();
        }
    }
} 
```

此异常仅在我第一次运行我的应用程序时发生，并且当我刷新页面尝试再次登录时，没有异常。请帮助我，因为我是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:02:08.000

错误消息试图说明，建立连接所花费的时间比默认超时时间长..

虽然你可以增加超时时间，但我建议你不要这样做..

找出它发生的原因..如果它经常发生，那么可能是您的连接池当时可能没有足够的连接..如果是这样，您可以增加最小池大小或最大池大小并具有合理的连接寿命等.,

见[http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T10:03:42.300

添加您的`SqlCommand`. 请添加时间在`second`。

```
// Setting command timeout to 1 second
 cmd.CommandTimeout = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-26T09:55:26.260

在命令对象中设置 commandTmeout 属性。

`cmd.CommandTimeout = 9000;`

# grails - 需要了解 Grails 参数的工作原理

> ID：12907759
> 
> 赞同：0
> 
> 时间：2012-10-16T04:56:08.867
> 
> 标签：grails, params

我真的有两个问题。首先，我想知道当您点击控制器时，标签如何与其中的其他标签交互。具体来说，我有一个标签外部，另一个标签内部。表单标签外部的 textField 位于params 曾经在控制器中，但是表单标签*内*的 textField 不在params 中。这是为什么呢？

我的第二个问题是关于使用标签的。一旦我点击控制器，我就会尝试访问参数中标签中的值，但它们根本不存在。我在 旁边有一个权利，它最终出现在参数中......但不是 .

以下是 .gsp 问题的示例：

```
<div id="includedNodes">
  <g:textField name="happyTextField" value="I. FEEL. HAPPY!" />
  <g:select name="selectto" id="selectTo" multiple="true"
            size="25" from="${['is', 'this', 'working?']}"/>
</div> 
```

这是控制器：

```
def includedNodes = params.selectTo
def otherIncludedNodes = params.selectto
def textfieldData = params.happyTextField
def hello = "asdf"  // <--- I put a breakpoint here 
```

一旦断点被​​命中，我检查参数，并看到happyTextField 在参数中，但selectto 不在。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:47:11.497

查看源代码，或使用 firefox 查看实际创建的 HTML 类型。确保您的标签之外没有嵌套标签或输入。您还可以使用插件 Httpfox 来准确查看浏览器向服务器发送的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:21:50.627

您必须考虑宏之类的标签——它们简化了输出 HTML 的过程，但是一旦页面通过浏览器进行了往返，它们就不会直接影响控制器中发生的事情。因此，您需要查看浏览器中的 HTML 源代码以了解发生了什么。在这一点上（对于浏览器而言）HTML 是手写的、由 Grails、Java 还是 PHP 生成的，这没有区别，它只是 HTML。

在控制器端，它所看到的只是标准的 HTTP 请求。所以你需要查看浏览器发送的请求参数。

因此，对于您的第二个问题，请查看浏览器中的 HTML 源代码，了解它为什么不发送`selectto`参数。也许您在点击提交之前没有选择`<option>`表单中的一个/一些 s，因为只有选项值`selected="selected"`由浏览器发送？

# layout - 跨多个 CCScene 共享通用页眉和页脚 CCLayers 并使其可更新

> ID：12907766
> 
> 赞同：1
> 
> 时间：2012-10-16T04:56:45.887
> 
> 标签：layout, cocos2d-iphone, nsnotifications, cclayer

在我的 cocos2d 游戏中，我需要共享一个通用的页眉和页脚，它将出现在每个游戏层上。

页眉包含现金和精灵之类的东西——而页脚包含用于在不同游戏场景之间移动的 CCMenuItem 按钮。

页眉/页脚出现在比当前场景/图层略高的 Z-index 上，因此它出现在显示的所有内容之上。

例如，标头可能如下所示：

> 现金：5,000 美元

例如，页脚可能看起来像带有精灵按钮的 CCMenu，如下所示：

> 主页 | 市场

这将被视为一个平显系统。

现在，我尝试以类似的方式将 HUD 添加到每个场景中；

```
HudLayer *hud = [HudLayer node]
[self addChild:hud z:1]; 
```

但是，它会导致断言错误。

> *** -[CCMenuItemSprite addChild:z:tag:] 中的断言失败 ...

这是因为在不同的场景中无法再次添加 HUD。这是我对 cocos2d 的真正挫败感。

到目前为止，我能够解决这个问题的唯一方法是`BaseScene`拥有一个`HUD`作为 CCLayer 的，然后我使用 NSNotifications 加载所有后续的 CCLayer。

代码如下；

```
#define HudBase 1
#define kHUDTag 9000

#import "cocos2d.h"

@interface BaseScene : CCScene

@end

@class HeaderHUDLayer;
@interface BaseLayer : CCLayer
{
    CCNode *currentNode;
    CCLayer *thisLayer;
    HeaderHUDLayer *hud;
}

@property (nonatomic, retain) CCNode *currentNode;
@property (nonatomic, retain) CCLayer *thisLayer;
@property (nonatomic, retain) HeaderHUDLayer *hud;

-(void) changeNodeTo:(CCNode *)thisNode;
-(void) changeHUDSceneObserver:(NSNotification *)notification;

@end

@implementation BaseScene

- (id)init
{
    self = [super init];
    if (self) {
        [self addChild:[BaseLayer node] z:0 tag:800];
    }
    return self;
}
@end

@implementation BaseLayer
@synthesize currentNode, thisLayer;
@synthesize hud;

-(id) init
{
    if ((self =[super init]))
    {
        NSLog(@"HUD Scene");

        self.hud = [HeaderHUDLayer node];

        if (self.currentNode == nil)
        {
            self.currentNode = [MyDashboardScene node];
            [self changeNodeTo:self.currentNode];
        }

        [self addChild:self.hud z:TopZLayer];

        [[NSNotificationCenter defaultCenter] addObserver:self selector: @selector(changeHUDSceneObserver:) name: @"changeHUDScene" object: nil];
    } // end if
    return self;
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

-(void) changeNodeTo:(CCNode *)thisNode
{
    NSLog(@"changeNodeTo");
    [self removeChild:self.currentNode cleanup:YES];
    [self addChild:thisNode z:0];
    self.currentNode = thisNode;
}

-(void) changeHUDSceneObserver:(NSNotification *)notification
{
    NSLog(@"changeHUDSceneObserver = %@", notification.name);

    if ([notification.name isEqualToString:@"changeHUDScene"]==YES) {
        if ([notification object]!=nil) {
            [self changeNodeTo:[notification object]];
        }
    }
}

@end 
```

标头本身非常复杂，但简单来说我有一个 CCLabel，如下所示：

```
NSString *txtCash = [NSString stringWithFormat:@"Cash: %d", [player.cash intValue]];
            self.lblCash = [CCLabelBMFont labelWithString:txtCash fntFile:@"font_minipixi_16.fnt"];
            [lblCash setTag:kCashLabelTag];
            [lblCash setAnchorPoint:CGPointMake(1, 0)];
            [lblCash setPosition:CGPointMake(100, 8)];
[self addChild:lblCash]; 
```

这很好用，我可以在游戏的所有不同部分之间移动，并且页眉/页脚在所有场景中都是通用的。

但是，使用 NSNotifications 更改节点让我非常头疼，即我似乎无法更改 HUD 内的标签 (lblCash)，而且我不知道如何解决这个问题。

例如，如果我点击减少我的现金的 CCMenuItem，HUD 标签永远不会更新。

为了解决这个问题，我使用另一个 NSNotification 来解决这个问题。除了有时我需要多个 NSNotifications（更改标题、刷新页面或其他）并且我最终会出现断言错误，因为我无法重新发送内容。

有时我有一个 NSNotification 来更新标头，然后是另一个 NSNotification 直接将节点重定向到我要呈现的另一个节点；这又会导致断言错误。

我觉得整个事情正在变成一团糟的 NSNotifications，这让我对 cosos2d 感到非常沮丧。

我试过了：

> 使基础场景移除 HUD（和她所有的孩子）并重新添加它。这会导致断言错误，并且似乎不可能做到。我可能编码错了

尝试投射 BaseScene/Layer 并使用标签抓取 HUD 并以这种方式更新标签。

IE，

```
 BaseLayer *baseLayer = (BaseLayer *) [self.parent getChildByTag:800];
    [baseLayer.hud updateCashAmount]; 
```

什么都不做。（基础层/场景和 hud 层都有一个标签）。

也不行，

```
 HeaderHUDLayer *hud = (HeaderHUDLayer *)[base getChildByTag:kHUDTag];
    [hud updateCashAmount]; 
```

我认为我不能进行强制转换的原因是因为 NSNotifications 改变了上下文。

这整件事让我对 cosos2d 感到非常沮丧。

我想要的只是很多场景中的通用页眉/页脚，我希望能够更新页眉的标签而不会大惊小怪。

鉴于此，我如何共享一个通用的页眉/页脚 CCLayer 并使页眉/页脚内的元素可更新？

有没有更简单的方法可以做到这一点，而无需到处都有大量的 NSNotifications？

感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:48:59.873

在具有公共菜单层的项目中，我使用此方法将层从一个场景转移到另一个场景（在 Kobold2D 中，此方法已经可用）：

```
-(void) transferToNode:(CCNode*)targetNode
{
    NSAssert(self.parent != nil, @"self hasn't been added as child. Use addChild in this case, transferToNode is only for reassigning child nodes to another node");
    CCNode* selfNode = [self retain];
    [self removeFromParentAndCleanup:NO];
    [targetNode addChild:selfNode z:selfNode.zOrder tag:selfNode.tag];
    [selfNode release];
} 
```

它是这样工作的：

```
CCScene* newScene = [MyNewScene node];
[menuLayer transferToNode:newScene];
[[CCDirector sharedDirector] replaceScene:newScene]; 
```

现在菜单层继续存在于下一个场景中。就是这样。

PS：如果您使用 ARC，请省略保留和释放行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:18:01.673

我相信我已经解决了这个问题。

我解决这个问题的方法是：

1.  使用 NSNotifications 在场景/层之间移动，这样 cocos2d 就不会抱怨已经添加了节点或其他资产。
2.  在 NSNotification 观察者中，我更新标题，或者我需要更新的 HUD 层上的其他项目。
3.  使用在整个游戏中共享的单用户数据（字典），因此我可以通过 NSNotification 将数据传递到/从标题。

这几乎是一个黑客，但我认为它现在似乎工作正常。

例如，在我的 HUD 场景/图层中，我创建了一个 NSNotification

```
[[NSNotificationCenter defaultCenter] addObserver:self selector: @selector(changeHUDObserver:) name:@"hudStatus" object:nil]; 
```

我还创建了一个观察者

```
-(void) changeHUDObserver:(NSNotification *)notification
{
    NSLog(@"changeHUD.status = %@", notification.name); 
```

// 从状态单例中获取数据 // 还有其他方法可以做到这一点，但这只是一个示例 Player *player = [state.userData objectForKey:@"player"];

```
// Update header cash label
    // Cash formatter
    NSLocale *usLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease];
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setLocale:usLocale];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [formatter setMaximumFractionDigits:0];
    NSString *txtCash = [formatter stringFromNumber:player.cash];
    [formatter release];

    // Cash Label
    self.lblCash.string = txtCash;
} // end method 
```

这只是一个示例，但我现在可以发送和更新标题中的内容。

虽然我的答案是一个 hack，但我觉得 @LearnCocos2d 有一个答案，应该将其视为可能的替代方案。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:42:27.057

我想我有另一个解决这个问题的方法。

回顾一下，

我想在多个场景/图层中拥有或共享一个通用的页眉/页脚。

我这样做的方式是使用作为我的 HD 的单个孩子的 BaseScene (CCScene)，然后我使用 NSNotification 观察者来更改底层孩子 (CCLayer)。

这变得非常混乱，HUD之类的东西与任何模式对话框重叠。

我还不能解决模态对话框的问题，但是在共享一个通用的页眉/页脚方面，我想我可能有一个解决方案。

在 Steffen Itterheim 所著的“Learn cocos2d game development with iOS5”一书中第 5 章左右，它谈到了使用“半单例”

以下是引文；

```
static MultiLayerScene* multiLayerSceneInstance;
+(MultiLayerScene*) sharedLayer {
NSAssert(multiLayerSceneInstance != nil, @"MultiLayerScene not available!");
return multiLayerSceneInstance; }

-(void) dealloc {
// MultiLayerScene will be deallocated now, you must set it to nil multiLayerSceneInstance = nil;
// don't forget to call "super dealloc"
[super dealloc]; } 
```

> 简单地说，multiLayerSceneInstance 是一个静态全局变量，它将在其生命周期内保存当前的 MultiLayerScene 对象。static 关键字表示 multiLayerSceneInstance 变量只能在定义它的实现文件中访问。同时，它不是实例变量；它存在于任何类的范围之外。这就是为什么它定义在任何方法之外，并且可以在类方法中访问，例如 sharedLayer。

通过属性获取方法授予对 GameLayer 和 UserInterfaceLayer 的访问权限，以便于使用。

这使得从 MultiLayerScene 的任何节点访问各个层变得容易。

在开源游戏中，作者[CastleHassle](https://github.com/bryceredd/CastleHassle)使用了一种类似的技术，我已经能够查看和“复制”一种我可以从一个场景移动到另一个场景（它们实际上是 CCLayers）并在没有这些的情况下共享相同的公共标题烦人的“......孩子已经添加”错误。

我正在进一步调查它，但 CastleHassle 在这个问题上帮了我很多，如果我尝试使用本书的代码，我可能会有进一步的解决方案。

总之，我这样做的方式是按照 CastleHassle 使用实例概念；但我会看看这本书是如何使用共享实例的概念来完成的。

# c# - 想要在单击 Href 链接时添加标签和文本框

> ID：12907768
> 
> 赞同：0
> 
> 时间：2012-10-16T04:57:07.883
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, asp.net-mvc-3

我正在使用 MVC 我的代码如下，

```
 <div class="form-inline">
    <label class="control-label"><b>Length</b></label>

    <input type="text" name="Refinishing.Room.Length.Feet" id="Refinishing_Room_Length_Feet" style="width: 80px" class="floor-text" />Ft
    <input type="text" name="Refinishing.Room.Length.Inch" id="Refinishing_Room_Length_Inch" class="floor-text" />Inch

    <label><b>Width</b></label>

    <input type="text" name="Refinishing.Room.Width.Feet" id="Refinishing_Room_Width_Feet" class="floor-text" />Ft
    <input type="text" name="Refinishing.Room.Width.Inch" id="Refinishing_Room_Width_Inch" class="floor-text" />Inch<br />

    <a href="#">Add Room</a> / <a href="#">Remove Room</a>
</div> 
```

我想在单击“添加房间”链接时添加“<div>”的内容。如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:01:28.003

尝试使用`.clone()` 和`.append()`

```
 $('body').on('click','a.addroom', function(e) {
     e.preventDefault();

     var $cloned = $('.form-inline:eq(0)').clone();

     $('body').append($cloned);

 }); 

 $('body').on('click', 'a.removeroom' ,function(e) {
     e.preventDefault();
     $(this).closest('div').remove();
}); 
<a href="#" class="addroom">Add Room</a> 
```

这里 div 的内容被克隆并附加到 body..

[工作小提琴](http://jsfiddle.net/sushanth009/hFvvF/2/)

# javascript - 变量之间的随机数问题

> ID：12907777
> 
> 赞同：0
> 
> 时间：2012-10-16T04:58:10.453
> 
> 标签：javascript, random

我已经在这个网站上看到了其他例子，但我就是无法让它工作。

我正在尝试在表单上的 2 个用户输入变量之间生成一个随机数。数字将始终为正数。

```
min = document.getElementById('min').value;
max = document.getElementById('max').value;
waitTimer = Math.floor(Math.random() * (max - min + 1)) + min; 
```

当 min = 5 / max = 10 时，waitTimer 有时会返回 2、4 和 28 等结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:13:57.650

这是这个工作的一个小提琴。确保您正在使用`parseInt()`

[http://jsfiddle.net/zAeR7/2/](http://jsfiddle.net/zAeR7/2/)

您只需在每个输入中输入一个数字并单击输入（或按 Tab），它应该会更新随机数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:04:47.010

您必须将`.value`字符串转换为数字（我只是`+`在我的 jsFiddle 中使用运算符进行转换）。

当您将它们转换为数字时，一切正常，您可以在此处看到：http: [//jsfiddle.net/jfriend00/XF75E/](http://jsfiddle.net/jfriend00/XF75E/)

# linux - 用户空间进程和中断上下文代码之间的同步

> ID：12907784
> 
> 赞同：4
> 
> 时间：2012-10-16T04:58:28.027
> 
> 标签：linux, kernel, spinlock

最近我参加了几次采访。在提出的所有内核问题中，有一个具体问题我找不到令人信服的答案。

在用户空间进程和中断上下文函数之间共享数据时，您将如何使用不同的同步技术？我令人信服的答案是：

在中断上下文代码中：

```
1\. do *spin_lock_irqsave*
2\. access data buffer which is shared between user space app and kernel
3\. do *spin_lock_irqrestore* 
```

那么这不是令人信服的答案。在所有数据访问的情况下，`irqsave`我都必须这样做吗？`irqrestore`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:21:13.197

您不能直接将数据从中断上下文传输到用户空间上下文。在中断进程中没有进程信息，所以你不知道将数据发送到哪里。您需要使用内核空间中的中间进程上下文。

现在，来回答这个问题。在您的设备数据中，您将有一个缓冲区，您将在其中存储来自中断上下文的数据。您需要使用自旋锁保护您的数据，但不使用 irqsave/irqrestore 部分。因为您处于中断上下文中。

然后，您的设备将为用户空间提供一种获取此数据的方法。通过 char 设备或 netlink 套接字或 ioctl 调用或任何其他方法，由您决定。当用户空间需要这些数据时，你会`memcpy`从设备缓冲区到用户空间缓冲区。但是您将使用`spin_lock_irqsave`/ `spin_lock_irqrestore`pair 保护设备缓冲区，因为您不希望中断代码死锁。

当用户空间使用上面介绍的方法之一（char device `read`，netlink socket，`ioctl`call，...）时，内核负责提供锁定机制，但用于用户空间和进程之间的接口。

# xml - IdHTTP XML，正在获取 xml，请帮忙

> ID：12907787
> 
> 赞同：0
> 
> 时间：2012-10-16T04:58:35.180
> 
> 标签：xml, delphi, delphi-2010, msxml, idhttp

我无法从该站点获取 IdHTTP XML 文档。我总是得到答案 403 / HTTP 1.1 和 text/html（需要 text/xml）

当使用 MSXML 并获得 XML 文件时。但我需要一个代理，所以需要 idhtop。使用突触时不会改变。

**使用 msxml：**

```
CoInitialize(nil);
     GetXML:={$IFDEF VER210}CoXMLHTTP{$ELSE}CoXMLHTTPRequest{$ENDIF}.Create;
     GetXML.open('POST', '***************', false, EmptyParam, EmptyParam);
     GetXML.setRequestHeader('Host', '***************');
     GetXML.setRequestHeader('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13');
     GetXML.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
     GamesBody:='***************';
     GetXML.send(GamesBody);
     Form1.Memo2.Lines.Text:=GetXML.responseText;
     ResultPage:=GetXML.responseText;
     if Pos('error code', ResultPage)=0 then
     begin
    CoUninitialize; 
```

如何设置 IdHTTP？所有设置都更改了 100 次 还是连接到代理 MSXML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:12:07.423

MSXML 使用具有代理设置的 MSIE (Windows Internet Epxlorer)。您可以尝试 TWebBrowser 来获取它 - 它也是 MSIE 的一部分，并且可能还有我的 Windows 管理员设置的代理。

使用 synapse 或 idHTTP 你必须手动设置代理。

`HTTP 403`建议您未能为代理指定正确的登录名/密码。或者使用了 NTLM 授权。阅读您收到的 HTTP 403 错误文档 - 它可能包含有用的提示。

总而言之：

1) 向您的 Windows 管理员咨询需要哪些代理设置以及支持哪些身份验证模式。

2）按下`retag`按钮并为您给定的Delphi版本添加适当的标签

3）按编辑链接并添加管理员告诉您的代理设置（您可以用一些随机文本替换登录名和密码），并添加您尝试通过代理连接的 idHTTP 代码。

4) 下载最新的 Indy 资源。Indy 10 被告知在 Microsoft NTLM 代理模式下存在问题，而 Indy 9 可能根本不支持 NTLM。

示例 NTLM 代理代码：[http ://bredcompmaniak.blogspot.com/2010/09/ntlm-indy-10.html](http://bredcompmaniak.blogspot.com/2010/09/ntlm-indy-10.html)

# android - Android Bitmap.createBitmap 返回负 mHeight

> ID：12907793
> 
> 赞同：2
> 
> 时间：2012-10-16T04:59:10.130
> 
> 标签：android, bitmap, width

将 Snake 示例修改为另一个游戏，添加了很多东西。从位图类创建了一个异常。所以我调试了原始的 Snake，它工作正常，但发现在 TileView 中有一个函数 loadTile 也给出了负宽度：

```
Bitmap bitmap = Bitmap.createBitmap(mTileSize, mTileSize, Bitmap.Config.ARGB_8888); 
```

在上述分配之后，位图的 mHeight 和 mWidth 为 -1。那么蛇是如何工作的呢？我只是使用 Eclipse 和虚拟机，而不是真正的安卓手机。

# mongodb - 为什么叫 NoSQL？

> ID：12907794
> 
> 赞同：2
> 
> 时间：2012-10-16T04:59:16.520
> 
> 标签：mongodb, relational-database, schemaless, nosql

我最近使用 MongoDB 并了解了它的无模式设计。但是，我对 NoSQL 一词感到困惑？为什么这么叫？它不使用 SQL 或类似 SQL 的查询吗？

我还从一篇[文章](http://architects.dzone.com/articles/why-nosql-should-be-called-sql)中读到，主要区别在于数据的存储方式。这是真的？对于 MongoDB，它像 JSON 文档一样存储。

另外，我很困惑为什么我总是看到“NoSQL 与关系数据库”。NoSQL 数据库不是关系型的吗？我相信 MongoDB 中的文档仍然通过一些键相关/链接（如果我错了，请纠正我）。那么为什么它被标记为非关系型呢？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:05:13.330

“NoSQL”这个名称实际上是 Carlo Strozzi 在 1998 年首次用作他正在开发的基于文件的数据库的名称。具有讽刺意味的是，它是关系数据库。[维基](http://en.wikipedia.org/wiki/NoSQL)

以下是名人对“nosql”的评价：

Eric Evans（机架空间）：

> “我在 nosqleast 度过了最后几天，这里的热门话题之一是“nosql”这个名字。可以理解的是，有很多人担心这个名字不好，它会发送不恰当或不准确的信息. 虽然我没有对这个想法提出任何要求，但我确实不得不为它现在的名称承担一些责任。怎么样？约翰·奥斯卡森正在组织第一次聚会，并在 IRC 上提出了“什么是好名字？”这个问题；它是我在 45 秒内不假思索地提出的 3 或 4 个建议之一。
> 
> 然而，我的遗憾不是关于名字所说的，而是关于它没有的。当 Johan 最初有第一次见面的想法时，他似乎在考虑大数据和线性可扩展的分布式系统，但这个名字太模糊了，以至于它打开了讨论提交任何存储数据的大门的大门，而不是关系数据库管理系统。”

[马丁·福勒](http://martinfowler.com/)：

> “事实上，名称本身经常有一个转折点：许多 NoSQL 的拥护者说它并不意味着对 SQL 说“不”，而不仅仅是指 SQL。在这一点上，我认为将单个数据库与同类数据库区分开来是很有用的NoSQL 倡导者将其视为未来的生态系统。当我们说“x 是 NoSQL 数据库”时，我认为将 NoSQL 解释为“不仅”是愚蠢的，因为这会使该术语变得毫无意义。（然后您可以合理地争辩说 SQL Server（说）是 NoSQL 数据库。）所以我认为最好说“NoSQL 数据库”是“no-sql”数据库。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T05:04:53.250

> 它不使用 SQL 或类似 SQL 的查询吗？

虽然“非关系数据库”可能是一个更准确的名称，但它们中的大多数实际上并不使用 SQL 或类似的东西。

> NoSQL 数据库不是关系型的吗？我相信 MongoDB 中的文档仍然通过一些键相关/链接（如果我错了，请纠正我）。那么为什么它被标记为非关系型呢？

NoSQL 数据库是非关系型数据库。

它们有多种形式（主要是“文档数据库”、“键值存储”和“图形数据库”），但您通常不会获得以下任何或所有“关系”特性：

*   使用模式定义表（命名的并且通常是类型化的列）

*   能够在单个查询中连接多个表

*   任意范围的长时间运行的隔离事务

*   可能需要很长时间的临时查询，以及许多索引数据以加快速度的方法（而不是必须更改整个数据库布局）

（放弃其中一些方便的特性，您会得到性能、可用​​性和可扩展性的改进）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T05:05:50.160

正如维基百科所说：

> [NoSQL] 是一类广泛的数据库管理系统，它不遵守广泛使用的关系数据库管理系统模型。

这意味着它是一个不遵循关系模型（Codd 的模型）的数据库，因此它不使用 SQL。

# image - 在列表视图中显示来自服务器的图像

> ID：12907795
> 
> 赞同：1
> 
> 时间：2012-10-16T04:59:21.287
> 
> 标签：image, listview, directory

我的图像存储在“相册”文件夹中，这些图像的地址是“/相册/..”。我想在 imageurl 中连接两个字符串，但它不起作用并且 listview 不显示图像：这是我的代码：

```
<asp:ListView runat="server" ID="listView" 
                            OnItemDataBound="ContactsListView_ItemDataBound">
                            <ItemTemplate>

                           <asp:Image ID="img"  ImageUrl= '<%# String.Concat("/", Eval("PictureLink")) %>' runat="server" />

                            </ItemTemplate>
                            </asp:ListView> 
```

有什么帮助吗？

# php - 使用多态性时如何抽象任务？

> ID：12907796
> 
> 赞同：0
> 
> 时间：2012-10-16T04:59:31.090
> 
> 标签：php, polymorphism

[我已经阅读了许多关于多态性的 SO 帖子，以及http://net.tutsplus.com/tutorials/php/understanding-and-applying-polymorphism-in-php/](http://net.tutsplus.com/tutorials/php/understanding-and-applying-polymorphism-in-php/)上的另一篇非常好的帖子好东西！

---编辑--- 在 PDFFormatter 类中，我必须使用 (instanceof) 来确定是否应在返回的数据中包含某些代码，因为我在格式化程序中对各个字段名称进行了硬编码。我怎样才能抽象出这种责任？***我假设这不是最好的方法***

我也试图传递不同类型的配置文件进行格式化。另请注意，可以有许多格式化程序类型。提前非常感谢！请只使用PHP！谢谢！

文件 1\. FormatterInterface.php

```
interface FormatterInterface
{
    public function format(Profile $Profile);
} 
```

文件 2.PDFFormatter.php

```
class PDFFormatter implements FormatterInterface
{
    public function format(Profile $Profile)
    {
        $format = "PDF Format<br /><br />";
        $format .= "This is a profile formatted as a PDF.<br />";
        $format .= 'Name: ' . $Profile->name . '<br />';

        if ($Profile instanceof StudentProfile) {
            $format .= "Graduation Date: " . $Profile->graduationDate . "<br />";
        }

        $format .= "<br />End of PDF file";
        return $format;
    }
} 
```

文件 3\. Profile.php

```
class Profile
{
    public $name;

    public function __construct($name)
    {
        $this->name = $name;
    }

    public function format(FormatterInterface $Formatter)
    {
        return $Formatter->format($this);
    }
} 
```

文件 4\. StudentProfile.php

```
class StudentProfile extends Profile
{
    public $graduationDate;

    public function __construct($name, $graduationDate)
    {
        $this->name = $name;
        $this->graduationDate = $graduationDate;
    }
} 
```

文件 5.index.php

```
//Assuming all files are included......

    $StudentProfile = new StudentProfile('Michael Conner', 55, 'Unknown, FL', 'Graduate', '1975', 'Business Management');

    $Profile = new Profile('Brandy Smith', 44, 'Houston, TX');

    $PDFFormatter = new PDFFormatter();
    echo '<hr />';
    echo $StudentProfile->format($PDFFormatter);
    echo '<hr />';
    echo $Profile->format($PDFFormatter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:21:46.693

我会让 Profile 成为一个抽象类并定义一种机制来从中获取属性，无论它是什么“类型”的配置文件。

Profile 类可能有一个获取属性的方法（已经设置，可能在构造它时），可能使用[魔法方法](http://php.net/manual/en/language.oop5.magic.php)。因此，任何扩展 Profile 的对象都已经有一种机制来根据设置的属性“格式化”自身。

我希望它有所帮助并使自己清楚。

# 更新：

这是我在尝试实现我认为您正在尝试实现的那种行为时提出的代码。

首先，让我们为格式化程序定义一个接口：

```
/**
 * Formatter interface
 *
 * @category  Formatter
 * @package   Formatter
 * @author    Saul Martinez <saul@sharkwebintelligence.com>
 * @copyright 2012 Shark Web Intelligence
 * @license   http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0
 * @version   1.0
 * @link      http://www.sharkwebintelligence.com
 */
interface IFormatter
{
    /**
     * Object formatting.
     *
     * @return string
     */
    public function format();
} 
```

不过没什么特别的。现在让我们定义一种帮助器来保存字段或属性，在这种情况下，配置文件：

```
/**
 * Profile field.
 *
 * @category   Formatter
 * @package    Profile
 * @subpackage Field
 * @author     Saul Martinez <saul@sharkwebintelligence.com>
 * @copyright  2012 Shark Web Intelligence
 * @license    http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0
 * @version    1.0
 * @link       http://www.sharkwebintelligence.com
 */
class ProfileField
{
    /**
     * @var string $name Field name.
     */
    public $name;

    /**
     * @var mixed $value Field value.
     */
    public $value;

    /**
     * Factory method to create a profile field.
     *
     * @param string $name  Field name.
     * @param mixed  $value Field value.
     *
     * @return ProfileField
     */
    public static function factory($name, $value)
    {
        $field = new self();
        $field->name = $name;
        $field->value = $value;
        return $field;
    }

    /**
     * Format the profile field.
     *
     * @return string
     */
    public function __toString()
    {
        return $this->name . ': ' . $this->value . PHP_EOL;
    }
} 
```

下一节课，`Profile`上课，我试着让它变得有点灵活：

```
/**
 * Profile.
 *
 * @category  Formatter
 * @package   Profile
 * @author    Saul Martinez <saul@sharkwebintelligence.com>
 * @copyright 2012 Shark Web Intelligence
 * @license   http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0
 * @version   1.0
 * @link      http://www.sharkwebintelligence.com
 */
abstract class Profile implements IFormatter
{
    /**
     * @var array $fields Profile fields.
     */
    public $fields;

    /**
     * Constructor.
     *
     * - Set options.
     *
     * @param array $options Profile options.
     */
    public function __construct($options)
    {
        if (is_array($options)) {
            $this->setOptions($options);
        }
    }

    /**
     * Format implementation.
     *
     * @return string
     */
    public function format()
    {
        $output = '';
        foreach ($this->getFields() as $field) {
            $output .= $field;
        }
        return $output;
    }

    /**
     * Adds a field to the fields list.
     *
     * @param ProfileField $field Field to add.
     *
     * @return Profile Provides a fluent interface.
     */
    public function addField(ProfileField $field)
    {
        $this->fields[] = $field;
        return $this;
    }

    /**
     * Set profile fields.
     *
     * @param array $fields Profile fields.
     *
     * @return Profile Provides a fluent interface.
     */
    public function setFields(array $fields)
    {
        $this->fields = $fields;
        return $this;
    }

    /**
     * Get profile fields.
     *
     * @return array
     */
    public function getFields()
    {
        return $this->fields;
    }

    /**
     * Set profile options.
     *
     * @param array $options Profile options.
     *
     * @return Profile Provides a fluent interface.
     */
    public function setOptions(array $options)
    {
        $methods = get_class_methods($this);
        foreach ($options as $name => $value) {
            $method = 'set' . ucfirst($name);
            if (in_array($method, $methods)) {
                $this->$method($value);
            }
        }
        return $this;
    }
} 
```

`Profile`最后是学生资料类，如果您想添加特定行为，它可以覆盖任何类方法：

```
/**
 * Student profile.
 *
 * @category   Formatter
 * @package    Profile
 * @subpackage Student
 * @author     Saul Martinez <saul@sharkwebintelligence.com>
 * @copyright  2012 Shark Web Intelligence
 * @license    http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0
 * @version    1.0
 * @link       http://www.sharkwebintelligence.com
 */
class StudentProfile extends Profile
{
} 
```

现在，您只需要实例化`StudentProfile`类并向其添加一些字段：

```
$studentProfile = new StudentProfile(
    array(
        'fields' => array(
            ProfileField::factory('Name', 'Buddy'),
            ProfileField::factory('Birth date', '1983/05/05'),
            ProfileField::factory('Graduation date', '2000/01/01'),
        ),
    )
);
echo $studentProfile->format(); 
```

希望它有所帮助，我让自己清楚。

# 更新：

我只是想补充一点，在用任何语言实现 OOP 时，我认为要牢记的一件非常重要的事情是[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)原则。

在抽象类时添加特性和行为可能感觉很“自然”，但仅仅添加它们并不是一个好主意，因为“你认为”你可能在特性中需要它们。因此，请三思是否需要添加方法或功能以及何时添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:24:12.857

我应该执行以下操作：

使概要文件抽象并定义和抽象方法 formatSpecific()

```
 abstract class Profile {

        abstract protected function formatSpecific();
        ...
    } 
```

在学生课上：

```
 protected function formatSpecific() {
        $format .= "Graduation Date: " . $this->graduationDate . "<br />";
    } 
```

而在 PDFFormatter 类的格式化函数中：

```
public function format(Profile $Profile)
{
    $format = "PDF Format<br /><br />";
    $format .= "This is a profile formatted as a PDF.<br />";
    $format .= 'Name: ' . $Profile->name . '<br />';

    $format .= $Profile->formatSpecific();
    $format .= "<br />End of PDF file";
    return $format;
} 
```

这样，您就摆脱了 instanceOf 条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:12:20.077

最好使用`Late Static binding`

您的格式功能可以更改为静态，

```
public static function format($profileData)
{
    $format = "PDF Format<br /><br />";
    $format .= "This is a profile formatted as a PDF.<br />";
    $format .= 'Name: ' . $profileData['name'] . '<br />';

    $format .= static::getProfileSpecificFormat($profileData['date'] );

    $format .= "<br />End of PDF file";
    return $format;
} 
```

而且profile类一定是这样的，

```
class Profile
{

    public static function format($profileData)
    {
        return PDFFormatter::format($profileData);
    }

    public static function getProfileSpecificFormat($date)
    {
        return "Graduation Date: $date<br />";
    }

} 
```

以后如果你有10种以上的Profiles，你可以很容易的调用PDF格式函数，使用profile list作为补充。

# iphone - 使用情节提要时如何在所有屏幕中以单一参考显示 iAd？

> ID：12907803
> 
> 赞同：1
> 
> 时间：2012-10-16T04:59:59.397
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, iad

如何以仅在 AppDelegate 中实现并且可以在所有屏幕中使用的方式实现 iAd。

我将代码放在 appDelegate 中。我还需要在每个视图控制器中为它编写代码吗？

`AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self addiAd];
    NSLog(@"window subview : %@",self.window.subviews);    //Here it shows no subview
    return YES;
}

-(void)addiAd
{
    self.adView.delegate = self;
    self.adView.requiredContentSizeIdentifiers = [NSSet setWithObjects:ADBannerContentSizeIdentifierLandscape,ADBannerContentSizeIdentifierPortrait, nil];
    self.adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    [self setBannerFrame:orientation];
    self.adView = [[ADBannerView alloc] init];
    self.adView.frame = CGRectMake(0, 938, 768, 66);
    [self.window addSubview:self.adView];

}
-(void)removeiAd
{
    [self.adView removeFromSuperview];
}
-(void)setBannerFrame:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {
        [self.adView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifierLandscape];
        self.adView.frame = CGRectMake(0, 634, 320, 50);
    }
    else {
        [self.adView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifierPortrait];
        self.adView.frame = CGRectMake(0, 890, 480, 32);
    }
} 
```

它的所有委托方法也在 AppDelegate.m 中实现

我的下一步应该是什么？我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:30:48.010

您不需要在应用程序委托中进行任何 iAd 配置，通常您在显示它的视图控制器的类中配置它 - 这意味着*通常*您需要在每个视图控制器中放置一个广告视图想要展示广告。

然而，还有更简单的方法——例如，[这个问题](https://stackoverflow.com/questions/4918726/iad-multiple-uitableviewcontrollers)的答案提供了一个指向似乎可以做你想做的事情的[单例类](https://github.com/larsacus/LARSAdController)的链接——它提供了一个管理你的 iAd 配置的类，然后你可以将其放入每个视图中您希望广告出现在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:26:15.863

是的。无需在每个视图控件中编写代码。这是我的代码

```
- (UIWindow *)viewControllerForPresentingModalView {

    return self;

}
- (void)adWhirlDidReceiveAd:(AdWhirlView *)adWhirlView {
    NSLog(@"Ad received");
    CGSize adSize = [adView actualAdSize];
    NSLog(@"Net work Name %@",[adWhirlView mostRecentNetworkName]);
    CGRect newFrame = adView.frame;
    newFrame.size = adSize;

    newFrame.origin.y=385;
    NSLog(@"frame size %f,%f",newFrame.origin.x,newFrame.origin.y);
    adView.frame = newFrame;

}
-(void)adWhirlDidFailToReceiveAd:(AdWhirlView *)adWhirlView usingBackup:(BOOL)yesOrNo
{
    NSLog(@"Ad not Received");
    NSLog(@"Net work Name %@",[adWhirlView mostRecentNetworkName]);
    CGRect tempFrame = adView.frame;
    tempFrame.origin.y = -adView.frame.size.height;
    adView.frame = tempFrame;

} 
```

在应用程序委托和应用程序的 didFinishedLaunching 方法中编写所有这些方法，只需将 adwhirl 视图添加为窗口的子视图。

```
adView=[AdWhirlView requestAdWhirlViewWithDelegate:self];
    [self.window addSubview:adView]; 
```

它对我来说工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-21T19:02:14.647

Apple 建议在 App Delegate 中创建一次，然后在所有视图中共享。

[https://developer.apple.com/library/ios/technotes/tn2286/_index.html](https://developer.apple.com/library/ios/technotes/tn2286/_index.html)

# jquery - 使用可拖动效果动态上下移动 Div？

> ID：12907804
> 
> 赞同：1
> 
> 时间：2012-10-16T05:00:02.613
> 
> 标签：jquery, asp.net-mvc

我的页面显示了一些动态创建的 div。

我想让所有 div 都可以拖动，这样用户就可以轻松地上下改变他们的位置。我只想要上下位置。

我的代码

```
if (@items.Data == true)
{
    <div class="@items.ShortDesc test1" id="@items.ShortDesc" >
   <input  type="text" class="txtbox" >

    </div>
} 
```

我正在使用 jquery Sort 进行排序，但现在我无法在 div 中的文本框上写任何东西

所以我想上下改变我的div的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:13:12.090

有很多解决方案

[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

[http://tutorialzine.com/2009/08/explaining-jquery-sortables/](http://tutorialzine.com/2009/08/explaining-jquery-sortables/)

[http://www.enfew.com/10-jquery-ui-sortable-tutorials-plugins-that-will-explain-everything-you-need-to-know/](http://www.enfew.com/10-jquery-ui-sortable-tutorials-plugins-that-will-explain-everything-you-need-to-know/)

[http://www.xmech.net/programming/jquery-ui-sortable-tutorial/](http://www.xmech.net/programming/jquery-ui-sortable-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:03:56.327

尝试这个：

[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

# python - 如何向 urllib2 开启程序添加附加参数

> ID：12907806
> 
> 赞同：0
> 
> 时间：2012-10-16T05:00:18.987
> 
> 标签：python, browser, http-headers, urllib2, bots

我找到了这个网站： [https](https://panopticlick.eff.org/) ://panopticlick.eff.org/ 这基本上为您提供了一些关于您的浏览器的信息。它提出了一个问题。所以我试图创建一个 urllib2 开瓶器，我唯一做的就是改变它的用户代理：所以我的开瓶器看起来像这样：

```
class URLOpener():      
    def opener(self,user_agent):
        cj=cookielib.CookieJar()
        #Process Hadlers
        opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
        opener.addheaders=[
                        ('User-Agent', user_agent),
                        ('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                        ('Accept-Language', 'en-gb,en;q=0.5'),
                        ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'),
                        ('Keep-Alive', '115'),
                        ('Connection', 'keep-alive'),
                        ('Cache-Control', 'max-age=0'),
                    ]
        return opener 
```

我的问题是如何将这样的内容添加到我的 URLOpener：

1.  浏览器插件详情
2.  时区
3.  屏幕尺寸和颜色深度
4.  系统字体
5.  有限的超级cookie

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:10:26.307

你不能。

大多数这些东西都不会通过您的浏览器传递到 Web 服务器。panopticlick 可以显示这些值的原因是它使用 Javascript 来访问它们。

你可以自己看看这个。在 Chrome 或 firefox 中打开开发者控制台中的网络选项卡，查看当您向网站发出请求时发送的实际标头。

# import - 从不同机器 RFT 导入项目时的问题

> ID：12907807
> 
> 赞同：1
> 
> 时间：2012-10-16T05:00:22.823
> 
> 标签：import, rft

我正在尝试从一台机器导出一个 RFT 项目并在不同的机器上运行脚本。大多数测试是 GUI 测试。但是该脚本在一台机器上工作，而在另一台机器上却失败了。

我也看到了其他一些差异，当记录相同的测试用例时，两台机器上记录的脚本都不同。

在第一台机器上：

```
startApp("KKKKK");
browser_htmlBrowser(document_tcsBNCS(),DEFAULT_FLAGS).inputKeys("{CAPSLOCK}username{TAB}");
browser_htmlBrowser(document_tcsBNCS(),DEFAULT_FLAGS).inputKeys("pwd@{Num9}{Num0}{Num9}{Num0}"); 
```

在第二台机器上：

```
startApp("KKKKK");
tcsBNCSMicrosoftInternetExplo().inputKeys("{CAPSLOCK}username{CAPSLOCK}{TAB}");
tcsBNCSMicrosoftInternetExplo().inputKeys("pwd@{Num9}{Num0}{Num9}{Num0}");
_Loginbutton().click(atPoint(16,6)); 
```

两个 RFT 的版本相同。为什么在 diff 机器中生成的代码不同？以及如何解决这些兼容性问题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:31:52.010

在第二台机器上似乎没有启用浏览器。您能否通过运行浏览器启用测试来验证相同的结果？

# c# - 从字符串转换日期和/或时间时转换失败

> ID：12907808
> 
> 赞同：0
> 
> 时间：2012-10-16T05:00:23.640
> 
> 标签：c#, sql-server, visual-studio-2010

我在 SQL Server 2008 中有一个查询。

```
SELECT
    CONVERT(char(80), i.InvDate,3) AS InvDate,
    i.InvoiceNo,
    i.TaxAmount + i.SubTotal AS Amount,
    '' AS Payment,
    pd.GivenName
FROM
dbo.Invoice i
    INNER JOIN dbo.PatientDetails pd ON (pd.MedicalRecordID = i.MedicalRecordID)
    WHERE (InvDate >= CONVERT(datetime, '16/10/2012', 105)) AND 
(InvDate <= CONVERT(datetime, '16/10/2012', 105)) 
```

* * *

输出：

[![在此处输入图像描述](../Images/72fd21497fa9cddb87143ab06320b58e.png)](https://i.stack.imgur.com/IWe0Y.png)

当我尝试将其放入 C# 时，它显示“从字符串转换日期和/或时间时转换失败。”

* * *

信息：16/10/2012 是我试图插入查询以确保它运行的示例日期。这是一个旧程序，这就是它从字符串转换的原因。我很确定它与日期时间格式有关。看看[http://www.sqlusa.com/bestpractices/datetimeconversion/](http://www.sqlusa.com/bestpractices/datetimeconversion/)。但我不能把手指穿过它。

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), i.InvDate,3) 

AS InvDate,

i.InvoiceNo, i.TaxAmount + i.SubTotal AS Amount,'' AS Payment,pd.GivenName 

FROM

dbo.Invoice i INNER JOIN dbo.PatientDetails pd

ON 
(pd.MedicalRecordID = i.MedicalRecordID)

WHERE

(InvDate >= CONVERT(datetime, 'dd/MM/yyyy', 105)) 

AND 

(InvDate <= CONVERT(datetime, 'dd/MM/yyyy', 105))", objConn);

        SqlDataReader objReader;
        objReader = objCmd.ExecuteReader();

        System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Sales-" + 
DateTime.Now.ToString("dd-MM-yyyy") + ".txt", System.IO.FileMode.Create);
        System.IO.StreamWriter sw = new System.IO.StreamWriter(fs,   
System.Text.Encoding.Default); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:01:46.020

你的没有什么问题`SQL code`。如果您有多行字符串，您只需要在命令中的双引号之前添加`@`（*逐字字符串文字）。*

```
SqlCommand objCmd = new SqlCommand(@"SELECT CONVERT(char(80), i.InvDate,3) AS InvDate,
               i.InvoiceNo, 
               i.TaxAmount +  i.SubTotal AS Amount,'' AS Payment,pd.GivenName 
FROM    dbo.Invoice i INNER JOIN dbo.PatientDetails pd
            ON (pd.MedicalRecordID = i.MedicalRecordID)
WHERE   (InvDate >= CONVERT(datetime, 'dd/MM/yyyy', 105)) AND 
        (InvDate <= CONVERT(datetime, 'dd/MM/yyyy', 105))", objConn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:41:25.283

`CONVERT(datetime, 'dd/MM/yyyy', 105)`正在尝试将文字文本`dd/MM/yyyy`转换为`datetime`- 这永远不会起作用。

```
SqlCommand objCmd = new SqlCommand(@"SELECT CONVERT(char(80), i.InvDate,3) 
AS InvDate,
i.InvoiceNo, i.TaxAmount + i.SubTotal AS Amount,'' AS Payment,pd.GivenName 
FROM
dbo.Invoice i INNER JOIN dbo.PatientDetails pd
ON 
(pd.MedicalRecordID = i.MedicalRecordID)
WHERE
(InvDate >= @StartDate) 
AND 
(InvDate <= @EndDate)", objConn);

objCmd.Parameters.AddWithValue("@StartDate",/* some C# expression that gives you the start date, as a DateTime value */);
objCmd.Parameters.AddWithValue("@EndDate",/* some C# expression that gives you the end date, as a DateTime value */); 
```

您必须填写上面最后两行中的注释部分。猜测一下，根据您[之前的问题](https://stackoverflow.com/questions/12832294/output-from-sql-server-and-c-sharp-different)，它们可能是`dtpFrom.Value`and `dtpTo.Value`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:06:05.123

我更愿意将查询移动到存储过程并从您的数据映射器类中调用存储过程。

# c# - 将数据集导出到 Excel 中的特定列、行

> ID：12907812
> 
> 赞同：0
> 
> 时间：2012-10-16T05:00:50.630
> 
> 标签：c#, excel-2007

我正在使用 c# 编程语言将数据集导出到现有的 Excel 工作表。因此，我需要指定要插入数据的确切列和行（列 G，行 3）。请注意，数据集只有 1 列。我已经提到了我使用的编码。但它不会将数据集传递到我需要的位置。请帮忙

```
dt = compareDataTables(Oracle, MIT);
        dataGridView1.DataSource = dt;  

        //inserting to Excel file
        Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
        object misValue = System.Reflection.Missing.Value;
        xlApp = new Excel.Application();
        xlWorkBook = xlApp.Workbooks.Open(textBox1.Text, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

        int i = 0;
        int j = 0;

        for (i = 0; i <= dataGridView1.RowCount - 1; i++)
        {
            for (j = 0; j <= dataGridView1.ColumnCount - 1; j++)
            {
                DataGridViewCell cell = dataGridView1[j, i];
                xlWorkSheet.Cells["3", "G"] = cell.Value;
            }
        }
        xlWorkBook.Save();
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();

        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:45:08.973

为什么 xlWorkSheet.Cells["3", "G"] 是硬编码的？，它每次都重写数据

# java - SortedMap vs CheckedSortedMap vs synchronizedSortedMap

> ID：12907813
> 
> 赞同：3
> 
> 时间：2012-10-16T05:00:59.133
> 
> 标签：java, collections

谁能帮我弄清楚 SortedMap、CheckedSortedMap、synchronizedSortedMap 之间的区别。我真的很难决定何时使用哪一个？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:32:55.587

`SortedMap`是一个接口，它是一个 Map（键值对），并带有一个附加的合约，即在其键上以某种定义的方式进行排序。由于键的排序，SortedMap 有额外的方法`SortedMap<K,V> subMap(K fromKey, K toKey)`，比如`SortedMap<K,V> headMap(K toKey) ...`'普通' Maps 没有。如果你迭代一个 sortedMap 的键集，你会发现一个明确的顺序。

A`Treemap`是该接口的实现。如果您自己创建一个新的 SortedMap 对象，它几乎总是选择`TreeSet`.

对于`checkedSortedMap`或任何其他`Collections.checkedXXX()`方法，以下是关于它们的用途的很好的讨论：[Java 中的 Collections.checkedList() 调用是什么？](https://stackoverflow.com/questions/1161176/what-is-the-collections-checkedlist-call-for-in-java)

Collections 框架中的类默认情况下是不同步的。对于地图，这意味着如果您有一个在两个或多个线程之间共享的地图，并且一个正在执行 a`put(A, value)`并且另一个线程也在地图上同时调用`put(A, othervalue)`，则可能会发生奇怪的事情。`Collections.synchronizedSortedMap(sortedMap)`方法给出了一个同步的映射，它包装了给定的映射并具有适当的锁定机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:10:59.350

`SortedMap`是一个接口，由`ConcurrentSkipListMap, TreeMap`类实现。

用于`Collections.synchronizedSortedMap`获取已排序映射的线程安全（同步）视图。在多线程环境中很有用。

用于`java.util.Collections.checkedSortedMap`获取指定排序映射的动态类型安全视图。

# javascript - 展开道场树中的特定节点

> ID：12907814
> 
> 赞同：0
> 
> 时间：2012-10-16T05:01:05.700
> 
> 标签：javascript, dojo, dijit.tree

我在树中有三个节点，并且想保持第一个节点的扩展，道场树中有没有办法支持这个？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T02:28:40.570

如果您有要扩展的节点的 ID。您可以按如下方式展开该节点 - myTree 将是您的树，expandNodeId 是您要展开的节点的 ID。

```
var nodes = myTree.getNodesByItem(expandNodeId);

if(!nodes[0].isExpanded){
     myTree._expandNode(nodes[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T17:03:08.540

在上述情况下，expandNodeId 是您分配给被单击节点的 ID。因此，在您的 onClick() 函数中，您可以执行以下操作；

```
 var theTree = new Tree({
                model: myModel,
                onClick: function(item, node){

                    // auto-expand the node when clicked
                    var nodes = that.theTree.getNodesByItem(item.id);
                    if(!nodes[0].isExpanded)
                        theTree._expandNode(nodes[0]);

                }
            }); 
```

# jquery - rails 3.2中的jQuery datetimepicker格式

> ID：12907816
> 
> 赞同：1
> 
> 时间：2012-10-16T05:01:19.883
> 
> 标签：jquery, ruby-on-rails, jquery-ui, jquery-ui-datepicker, datetimepicker

我正在使用以下 datetimepicker，据我了解，它是已扩展的 jquery-ui datepicker。

[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

我的问题是我想向用户显示 am 和 pm 时间，但我想对其进行不同的格式化，以便当我将其提交到 mysql 数据库时，时间格式输入标准“YY-mm-dd - hh:mm: ss”格式。

这是它当前输入的格式

![时间格式](../Images/0f4a479e0004b32919326867f563aba3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:26:12.547

jQuery UI date pickers support passing `altField` and `altFormat` options to them for exactly this purpose. The plugin you are using also supports extending that (although in a confusing way). I believe this is the correct level of options that will get you what you need. [Try it out live here](http://jsfiddle.net/japanick/TSRs8/)

Assuming a form with these elements:

```
<input type="text" id="datetime" />
<input type="hidden" id="datetime_to_server" name="formatted_date_time" /> 
```

You can then set up your datetimepicker widget like this:

```
$('#datetime').datetimepicker( 
  { altField  : '#datetime_to_server',  // selector of the hidden input field you want sent to the server
    altFormat : 'yy-m-d',
    altFieldTimeOnly : false,
    altTimeFormat : 'hh:mm:00' } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:00:09.063

对于与上述相同问题的人，我从上述插件的开发人员那里得到了一些很好的建议，即格式化的责任应该属于中间件（ruby、php、python 等）。因此，经过一番搜索，我找到了以下 gem 并添加到了我的 Gemfile 中。

```
gem 'validates_timeliness' 
```

该插件依赖于及时性 gem，并具有许多内置功能，可以开箱即用地接受许多不同的格式。

将此添加到您的模型中，您就完成了：

```
validates_datetime :date_paid_on, :allow_blank => true 
```

您可能会遇到需要自定义解析器的场景。如果是这样，只需将以下内容添加到您的 validates_timeliness.rb 初始化程序中。

```
config.parser.add_formats(:datetime, 'yyyy-mm-dd hh:nn:ss tz') 
```

# grails - IntelliJ 组织导入删除 org.hamcrest.CoreMatchers.is

> ID：12907823
> 
> 赞同：2
> 
> 时间：2012-10-16T05:01:38.517
> 
> 标签：grails, groovy, ide, junit, intellij-idea

我目前正在使用 IntelliJ 编写 Grails 应用程序。从 Eclipse 迁移后，我想启用“组织导入”。如果我理解正确，我必须启用

> 设置 | 编辑 | 自动导入 | 启用动态导入优化

一切都很好，但 IntelliJ 继续删除

```
import static org.hamcrest.CoreMatchers.is 
```

我在单元测试中使用的。它可能会这样做，因为它认为我的意思是 Groovy 的“是”，但这是错误的！关于如何防止它删除我的静态导入的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:28:40.843

这是一个[已知错误](http://youtrack.jetbrains.com/issue/IDEA-89633)，已在[IDEA 12 EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)中修复。

# java - 我可以将 xdisk 部署为 Jetty 中的 JCA 资源吗？

> ID：12907828
> 
> 赞同：0
> 
> 时间：2012-10-16T05:02:04.313
> 
> 标签：java, jetty, jndi, jca

我想要的是将文件事务和数据库事务合并为一个。我们的应用程序正在 Jetty 上运行。但码头不是必须的。我们希望事务可以独立运行，而不是依赖于服务器。取决于服务器是可以接受的。但这不是第一选择。目前，我使用 atomikos 来管理事务。

我目前的理解是：

1.  有没有不使用 enlist 的整数 atomikos 和 XADisk 的例子？我可以使用登记工作。但它在我们的系统中有点难看。在 db 部分，我们不使用 enlist 方法。我们使用hibernate，并通过atomikos 为hibernate 扭曲数据源，如果可能的话，我希望对xdisk 使用相同的解决方案。
2.  我尝试使用 JNDI（不幸的是，我对此也不是很熟悉。）。我尝试将 XADiskConnectionFactoryImpl 绑定到 JNDI，但我发现我需要 ConnectionManager 来实例化 XADiskConnectionFactoryImpl，但我不知道如何获取。我知道它的服务器，但我不知道如何。以下是我在 Jetty 中的配置

    ```
    <New  id="xadisk"  class="org.eclipse.jetty.plus.jndi.Resource">
     <Arg>xadisk</Arg>
     <Arg> 
       <New  class="org.xadisk.connector.outbound.XADiskConnectionFactoryImpl">
       </New>
     </Arg> 
    ```

# qt - 当点击 QTreeWidget 的复选框时，currentItemChanged 信号不会被触发

> ID：12907830
> 
> 赞同：2
> 
> 时间：2012-10-16T05:02:20.157
> 
> 标签：qt, qtreewidget

单击非叶子项目的复选框时，QTreeWidget 未按预期工作。我的 QTreeWidget 有两个级别的子级，可以检查树小部件中的每个项目（每个项目都启用了复选框）。在这个 QTreeWidget 中，叶项是用户可选择的，但非叶项是不可选择的，并且所有项都已启用并且用户可以检查。

```
[]Family node1
  - []Primary node1
    - []child1
  - []Secondary node1
    - []child1
[]Family node2
  - []Primary node2
    - []child2
  - []Secondary node2
    - []child2 
```

**叶项目标志设置**

```
Qt::ItemIsSelectable | Qt::ItemIsUserCheckable | Qt::ItemIsEnabled 
```

**非叶子项目标志设置**

```
Qt::ItemIsUserCheckable | Qt::ItemIsEnabled | Qt::ItemIsTristate 
```

当我们直接点击叶子项目的关联复选框时，Qt 正在生成 currentItemChanged() 信号。但是，当我们直接单击非叶子项目的关联复选框时，不会生成 currentItemChanged() 信号。这给非叶子物品的处理带来了不便。

它在 Qt 4.7.4 中运行良好，但在 Qt 4.8.1 中并不能在所有平台（Windows、Darwin 和 Linux）上运行。

我附上了一个示例程序来重现这个错误。

这是错误还是预期行为？

我在 Qt 4.8 的所有平台（Linux CentOS、Windows 7 和 MacOS）上都注意到了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:57:45.507

也许你正在寻找这样的东西：

```
//widget.h:
#ifndef WIDGET_H
#define WIDGET_H

#include <QWidget>
class QTreeWidgetItem;

namespace Ui {
class Widget;
}

class Widget : public QWidget
{
    Q_OBJECT

public:
    explicit Widget(QWidget *parent = 0);
    ~Widget();
private slots:
    void slotTest(QTreeWidgetItem *ite,int idx);
private:
    Ui::Widget *ui;
};

#endif // WIDGET_H

//widget.cpp:
#include "widget.h"
#include "ui_widget.h"

#include <QtGui>

Widget::~Widget()
{
    delete ui;
}

Widget::Widget(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::Widget)
{
    ui->setupUi(this);
    ui->treeWidget->setColumnCount(1);
    QList<QTreeWidgetItem *> items;
    QTreeWidgetItem * item;
     for (int i = 0; i < 10; ++i)
     {
         item = new QTreeWidgetItem((QTreeWidget*)0, QStringList(QString("item: %1").arg(i)));
         item->setCheckState(0,i%2 == 0 ? Qt::Unchecked : Qt::Checked);
         items.append(item);
     }
     connect(ui->treeWidget,SIGNAL(itemClicked(QTreeWidgetItem*,int)),this,SLOT(slotTest(QTreeWidgetItem*,int)));
     ui->treeWidget->insertTopLevelItems(0, items);
}

void Widget::slotTest(QTreeWidgetItem *ite,int idx)
{
    if(ite)
    {
        qDebug() << ite->text(0);
    }
}

//widget.ui:
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>Widget</class>
 <widget class="QWidget" name="Widget">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>274</width>
    <height>210</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Widget</string>
  </property>
  <layout class="QVBoxLayout" name="verticalLayout">
   <item>
    <widget class="QTreeWidget" name="treeWidget">
     <column>
      <property name="text">
       <string notr="true">1</string>
      </property>
     </column>
    </widget>
   </item>
  </layout>
 </widget>
 <layoutdefault spacing="6" margin="11"/>
 <resources/>
 <connections/>
</ui> 
```

# php - sql server unicode 数据迁移到 mysql 数据库

> ID：12907832
> 
> 赞同：0
> 
> 时间：2012-10-16T05:02:31.290
> 
> 标签：php, mysql, sql-server-2008, phpfox

我正在将使用 sql server 数据库的站点迁移到 php/mysql 脚本。我有一个字段数据类型为 ntext 的表帖子。该字段包含大量 unicode 数据。现在，当我将这些数据迁移到 mysql 表时，它被宠坏了。当 php ui 显示此数据时，它显示为?????。当我在 phpmyadmin 中看到它时，数据看起来还不错。有人可以帮我什么应该是字段类型和排序规则。眼下。字段类型为mediumtext，排序规则为utf8mb4_unicode_ci。

你可以看到一个[http://phpfoxdev.ramtajogi.com/index.php?do=/post/13050/??????%20:%20???%20???%20???? %20????%20????%20?????%20/mod_3/](http://phpfoxdev.ramtajogi.com/index.php?do=/post/13050/??????%20:%20???%20???%20????%20????%20????%20?????%20/mod_3/)

实际的文字是 ਹਰ ਰਾਤ ਤੇਰੀ ਯਾਦ ਸੀਨੇ ਨਾਲ ਸੋਂ ਜਾਂਦੇ ਹਾ, ਰਬ ਦੇ ਵਾਂਗਗਗ...

帮助将不胜感激。

问候帕米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:33:04.177

检查 HTTP 响应编码，如果您输出 UTF-8 但 HTTP 标头说它是 ISO-8859-1，一切似乎都坏了。

检查mysql默认编码[http://dev.mysql.com/doc/refman/5.5/en/charset-configuration.html](http://dev.mysql.com/doc/refman/5.5/en/charset-configuration.html)

或者如果您无法管理服务器或担心您在 PHP [http://www.php.net/manual/en/mysqlinfo.concepts.charset.php中更改连接设置](http://www.php.net/manual/en/mysqlinfo.concepts.charset.php)

# javascript - window.location 仅在 ut 之后使用警报

> ID：12907835
> 
> 赞同：2
> 
> 时间：2012-10-16T05:02:43.397
> 
> 标签：javascript, html, redirect

我正在验证一个表单，验证后，我想用 window.location = xxx 进行重定向，但除非我在它之后发出警报调用，否则它不起作用。

验证通过处理表单的 onsubmit 事件来工作。

```
function isvalid()
    {
        var txt = document.getElementById('txtTitle');
        if (txt.value == '')
        {   alert('Please enter a title'); return false;}
        else 
        {

            var sURL = "get_movies.php?title=" + txt
            window.location.href = sURL;
            //alert('');
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:43:11.173

表单`onsubmit`需要一个真或假的返回值。如果返回 true，则表单将被提交。由于您想`window.location`在表单提交上手动设置，因此返回 true 是没有意义的（然后您将让页面争夺表单提交和 JS 重定向。

放入`return false`你的 else 块，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:08:06.917

尝试

```
document.location = sUrl; 
```

它总是对我有用。

# java - 在我的 android 应用程序中创建自定义微调器

> ID：12907841
> 
> 赞同：1
> 
> 时间：2012-10-16T05:04:04.077
> 
> 标签：java, android, android-layout, spinner, android-spinner

嗨，我想`Spinner`在我的 android 应用程序中创建一个自定义。但我无法开发这个。请帮我。

这是我的 xml 代码：

`main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
 android:background="#ffffffff" >

 <TextView
    android:id="@+id/textView9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="50dp"
    android:layout_y="110dp"
    android:text="Status"
    android:textSize="20dip"
   android:textColor="#1d2328"
   />

  <Spinner android:id="@+id/spinner1" android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="150dp"
    android:layout_y="100dp" android:prompt="@string/status_prompt"
    android:background="@drawable/btn_dropdown"
      />

  <Button
    android:id="@+id/btn_insert1"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:layout_y="170dp"
    android:layout_x="35dp"
    android:background="@drawable/lgnbttn"
   android:textColor="#FFFFFF"
    android:text="Update" />

     <TextView
    android:id="@+id/textView2"
    android:layout_width="280dp"
    android:layout_height="43dp"

    android:layout_x="20dp"
    android:layout_y="255dp"
   android:textColor="#465371"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceMedium" />

  </AbsoluteLayout> 
```

这是我的java代码：

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;
private int i;

static final String KEY_NAME = "orderid";
static final String KEY_STATUS = "status";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.change_status);
    if (customTitleSupported) {
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
    }

    final TextView myTitleText = (TextView) findViewById(R.id.mytitle);
    if (myTitleText != null) {
        myTitleText.setText("Change Order Status");
    }
  /*  Intent in = getIntent();

    // Get XML values from previous intent
    String orderid = in.getStringExtra(KEY_NAME);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.textView1);

    lblName.setText(orderid); */

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent in = getIntent();
             String orderid = in.getStringExtra(KEY_NAME);
             String status = in.getStringExtra(KEY_STATUS);
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("Status");//Define the variable name in the web service method
            unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable

            request.addProperty(unameProp);
            PropertyInfo idProp =new PropertyInfo();
            idProp.setName("Orderid");//Define the variable name in the web service method
            idProp.setValue(orderid);//Define value for fname variable
            idProp.setType(String.class);//Define the type of the variable
            request.addProperty(idProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());
             }
           catch(Exception e){

           }
              }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();
    Intent in = getIntent();

    String status = in.getStringExtra(KEY_STATUS);
 list.add(status);
list.add("Q");
list.add("P");
list.add("F");
list.add("I");
list.add("C");
int position = -1;
    for(i=0;i<list.size();i++){
        if(list.get(i).equals(status)) {
                position = i;
        }
   }
if(position>0)
   list.remove(position);
    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

 }
 public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

       }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

如何在我的应用程序中创建自定义微调器？

# php - 按日期对 MySQL 查询结果进行分组，每个组都有标题和自己的 div

> ID：12907847
> 
> 赞同：3
> 
> 时间：2012-10-16T05:05:09.483
> 
> 标签：php, html, mysql, sql

我觉得我可能过度思考这个解决方案......所以我想我会得到一些额外的建议。我想在我的数据库中查询在单个标题下具有相同日期的“事件”列表和组事件，此外，我希望这个“组”在它自己的容器中。我在浏览其他问题时发现了单个标题问题，但容器让我很伤心！

**例如：**

**这：**

```
<div class='container'>
    <img src='event-image.jpg'>
    <h1>October 15th, 2012</h1>
    <h3>Event Name</h3>
    <p>Details</p>
    <h3>Event Name</h3>
    <p>Details</p>
    <h3>Event Name</h3>
    <p>Details</p>
</div>
<div class='container'>
    <img src='event-image.jpg'>
    <h3>Event Name</h3>
    <p>Details</p>
    <h3>Event Name</h3>
    <p>Details</p>
    <h3>Event Name</h3>
    <p>Details</p>
</div> 
```

**不是这个：**

```
<div class='container'>
    <img src='event-image.jpg'>
    <h1>October 15th, 2012</h1>
    <h3>Event Name</h3>
    <p>Details</p>
</div>
<div class='container'>
    <h3>Event Name</h3>
    <p>Details</p>
</div>
<div class='container'>
    <h3>Event Name</h3>
    <p>Details</p>
</div>
<div class='container'>
    <img src='event-image.jpg'>
    <h3>Event Name</h3>
    <p>Details</p>
</div>
<div class='container'>
    <h3>Event Name</h3>
    <p>Details</p>
</div>
<div class='container'>
    <h3>Event Name</h3>
    <p>Details</p>
</div> 
```

**这：**

```
October 15, 2012
Event 1
Event 2
Event 3 
```

**不是这个：**

```
October 15, 2012
Event 1
October 15, 2012
Event 2
October 15, 2012
Event 3 
```

**MySQL 查询：**

```
$sql = "SELECT title, DATE_FORMAT(date, '%M %D, %Y') AS postdate, time, venue, cost, city,   spotlight, image
        FROM shows WHERE date >= $curDate
        ORDER BY date ASC, spotlight DESC LIMIT $startRow," . SHOWMAX; 
```

**HTML/PHP：**

```
<?php 
    $prevDate = null;
    while ($row = $result->fetch_assoc()) { ?>
        <div class="content">
        <?php 
        if (!empty($row['image'])) { ?>
            <img src="/images/thumbs/<?php echo $row['image'] ?>">
        <?php 
        }

        if ($row['postdate'] != $prevDate) { ?>
            <h1><?php echo $row['postdate']; ?></h1>
            <?php $prevDate = $row['postdate'];
        } ?>
        <h3><?php echo $row['title']; ?></h3>   
        <p><?php echo $row['venue'] . " | " . $row['city'] . " | " . $row['time'] . " | " .  $row['cost']; ?></p>
        </div>
    <div class="horizontal-line"></div>
<?php } ?> 
```

**结果：**

```
<div class="content">
<img src="/images/thumbs/defining-times-news-00.jpg">
    <h1>October 13th, 2012</h1>
    <h3>Relient K w/ Hellogoodby, William Beckett & House of Heroes</h3>    
    <p>Cain's Ballroom | Tulsa, OK | 9:00 | $10</p>
</div>
<div class="horizontal-line"></div>
<div class="content">
    <h3>Rod Steward & Stevie Nicks</h3> 
    <p>BOK Center | Tulsa, OK | 9:00 | $45</p>
</div>
<div class="horizontal-line"></div>
<div class="content">
    <h3>Gary Allan</h3> 
    <p>Hard Rock Hotel & Casino | Tulsa, OK | 9:00 | $30</p>
</div>
<div class="horizontal-line"></div>
<div class="content">
    <img src="/images/thumbs/dead-sea-choir-news-00.jpg">
    <h1>October 14th, 2012</h1>
    <h3>Nalani Proctor and Kierston White</h3>  
    <p>Bluebonnet | Norman, OK | 9:00 | $5</p>
</div>
<div class="horizontal-line"></div>
<div class="content">
    <h3>Bungalouski</h3>    
    <p>Bluebonnet | Norman, OK | 9:00 | FREE</p>
</div>
<div class="horizontal-line"></div>
    <h3>Relient K w/ Hellogoodby, William Beckett & House of Heroes</h3>    
    <p>Cain's Ballroom | Tulsa, OK | 9:00 | $10</p>
</div>
<div class="horizontal-line"></div> 
```

我希望这不会太复杂！任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:39:38.780

试试这个：

```
$prevDate = null;
while ($row = $result->fetch_assoc()) {
    $mark = false;
    if ($row['postdate'] != $prevDate) {
        $mark = true;
        $prevDate = $row['postdate'];
    }
    ?>
    <? if ($mark) { ?>
        <div class="content">
        <? } ?>
        <? if (!empty($row['image'])) { ?>
            <img src="/images/thumbs/<?= $row['image'] ?>">
        <? } ?>

        <? if ($mark) { ?>
            <h1><?= $row['postdate']; ?></h1>
        <? } ?>
        <h3><?= $row['title']; ?></h3>   
        <p><?= $row['venue'] . " | " . $row['city'] . " | " . $row['time'] . " | " . $row['cost']; ?></p>
        <? if ($mark) { ?>
        </div>
        <div class="horizontal-line"></div>
    <? } ?>
<? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:46:48.763

感谢 'khomyakoshka' 引导我朝着正确的方向前进！

...现在我并不是说这是最好的方法，但它确实有效！

```
<?php   
$prevDate = null;
$i = 0;
    while ($row = $result->fetch_assoc()) {
        $mark = false;
        if ($row['postdate'] != $prevDate) {
            $mark = true;
            $prevDate = $row['postdate'];
        }

        if ($mark && $i == 0) {
?>
            <div class="content">
<?php
        } elseif ($mark) {
?>          
            <div class="clear"></div>
            </div>
            <div class="horizontal-line"></div>
            <div class="content">
<?php           
        }

        if (!empty($row['image'])) { 
?>
            <img src="/images/thumbs/<?= $row['image'] ?>">
<?php
        }

        if ($mark) { ?>
            <h1><?php echo $row['postdate']; ?></h1>
<?php
        }
?>
        <h3><?php echo $row['title']; ?></h3>   
        <p><?php echo $row['venue'] . " | " . $row['city'] . " | " . $row['time'] . " | " . $row['cost']; ?></p>
<?php
                $i++;
                }
            ?>
            <div class="clear"></div>
            </div> 
```

# python - Python 代码从解释器执行，而不是从 Windows 命令提示符执行

> ID：12907848
> 
> 赞同：2
> 
> 时间：2012-10-16T05:05:28.603
> 
> 标签：python

我制作了一个程序，存储在`C:/Python27`我保存文件的`python.exe`文件夹中。在这个程序中，我对文件进行了一些 I/O。当我像这样在解释器中运行文件时：

```
myProgram.function("C:/Pyhton27/data") 
```

它工作正常。

当我尝试在命令提示符 ( `cmd.exe`) 中设置路径时，我会执行以下操作：

```
C:/Python27/python C:/Python27/myProgram C:/Python27/data 
```

我没有收到任何错误消息，程序返回打印消息说一切正常。但是当我更改数据时，文件没有新的输出。

有谁知道我做错了什么？

# uiview - 故事板视图未正确调整大小

> ID：12907851
> 
> 赞同：2
> 
> 时间：2012-10-16T05:05:34.140
> 
> 标签：uiview, resize, storyboard

我正在使用使用 Xcode 4.5 的情节提要。我将 UIContainerView 放入（自定义，而不是初始）视图控制器中，然后将三个 UIView 放入容器视图中。我使用动态调整大小来定位三个视图。这三个都水平填充屏幕。一个以固定高度停留在屏幕顶部，一个以固定高度停留在底部，第三个视图（自定义 drawRect 的 UIView 的子类）填充其他两个视图之间的空间。

故事板中的一切看起来都很好，即使我切换到 iPhone 5 尺寸并返回。但是，当我在模拟器中运行应用程序并导航到该视图控制器时，我只看到中间视图填满了屏幕。看不到另外两人。我将中间视图切换回 UIView，出现同样的问题。我检查了进入的segue，它是视图控制器，而不是特定的视图。

需要明确的是，这一切都是使用故事板创建的，而不是以编程方式创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-21T16:48:48.893

1.  默认堆栈视图引脚 0 到 mainView 的所有侧面。
2.  将 3 个子视图添加到堆栈视图
3.  1 个和 3 个孩子 - 身高限制 = 150

[![在此处输入图像描述](../Images/831e92a51404a07732d0597810999004.png)](https://i.stack.imgur.com/VU28Y.png)

# android - 如何在 achartengine 中更改饼图的边距？

> ID：12907856
> 
> 赞同：5
> 
> 时间：2012-10-16T05:06:10.473
> 
> 标签：android, achartengine

我正在使用 achartengine api 绘制饼图。默认情况下，饼图显示在中心，但我想将其移动到布局的左角，我使用了“setMargin()”，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:36:59.153

如果您`PieChart`自己创建实例，则可以设置图表的`centerX`and`centerY`以更改其位置。

```
PieChart chart = new PieChart(dataset, renderer);
chart.setCenterX(someValue);
chart.setCenterY(someValue);
mChartView = new GraphicalView(context, chart); 
```

# ruby-on-rails - 显示 Ruby / Rails 文本

> ID：12907860
> 
> 赞同：0
> 
> 时间：2012-10-16T05:07:02.703
> 
> 标签：ruby-on-rails, puts

我有一个基本问题。我相信你可以通过这个问题看出我对 ruby​​ 和 rails 有点陌生。

我有一个导航，我正在尝试应用“活动”类，以便我可以以不同的方式设置活动页面的样式。我用 before_filter 设置了这样的@cur_page：

```
def cur_page
    @cur_page = params['action']
end 
```

我试图简单地输出文本“活动”，但它不起作用。

```
<li class="button <%= "active" if @cur_page == "contact" %>"><%= link_to "Contact", :public_contact %></li> 
```

我也试过：

```
<li class="button <%= puts "active" if @cur_page == "contact" %>"><%= link_to "Contact", :public_contact %></li> 
```

我检查了实例变量以确保它已设置，并且它像我期望的那样显示“联系人”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:25:31.393

是什么`:public_contact`？我会推荐你​​使用[current_page?](http://apidock.com/rails/ActionView/Helpers/UrlHelper/current_page?) 助手而不是`@cur_page`.

```
<li class="button <%= "active" if current_page?(public_contact_path(@contact) %>"><%= link_to "Contact", public_contact_path(@contact) %></li> 
```

Replace `public_contact_path(@contact)` to valid route helper.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:17:38.673

我认为问题在于双引号。

使用“活动”而不是“活动” 使用“联系”而不是“联系”

```
<li class="button <%= 'active' if @cur_page == 'contact' %>"><%= link_to "Contact", :public_contact %></li> 
```

# javascript - ie8 Date() 兼容性错误

> ID：12907862
> 
> 赞同：8
> 
> 时间：2012-10-16T05:07:14.310
> 
> 标签：javascript, internet-explorer-8

我在 ie8 上收到以下 javascript 错误：

```
<script type="text/javascript">
    //when html doc is all ready
    $(document).ready(function () {
        var socket = io.connect();
        var room = 'public';
        socket.emit('join', room);

        socket.on('message', function (data) {
            var output = '';
            output += '<div class="trace-content">';
            output += ' <div class="mname">' + data.name + '</div>';
            output += ' <div class="mdate">' + data.date + '</div>';
            output += ' <p class="mtext">' + data.message + '</p>';
            output += '</div>';

            $(output).prependTo('#traces');
        });

        $('button').click(function () {
            var date = new Date().toISOString();
           socket.emit('message', {
               name: $('#name').val(),
               message: $('#message').val(),
               date: date.slice(2,10) + ' ' + date.slice(11, 19)
           });
        });
    });
</script> 
```

问题似乎出在这条线上： var date = new Date().toISOString(); 我无法准确指出问题所在。其他一切似乎都运行良好；只需单击该按钮并执行以下代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-16T05:11:14.540

IE8 不支持`.toISOString()`。您可以将此代码用作 shim（来自[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)）：

```
if ( !Date.prototype.toISOString ) {         
    (function() {         
        function pad(number) {
            var r = String(number);
            if ( r.length === 1 ) {
                r = '0' + r;
            }
            return r;
        }      
        Date.prototype.toISOString = function() {
            return this.getUTCFullYear()
                + '-' + pad( this.getUTCMonth() + 1 )
                + '-' + pad( this.getUTCDate() )
                + 'T' + pad( this.getUTCHours() )
                + ':' + pad( this.getUTCMinutes() )
                + ':' + pad( this.getUTCSeconds() )
                + '.' + String( (this.getUTCMilliseconds()/1000).toFixed(3) ).slice( 2, 5 )
                + 'Z';
        };       
    }() );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T05:11:52.447

当然你会得到一个错误[http://kangax.github.com/es5-compat-table](http://kangax.github.com/es5-compat-table)。在 Google 中查找*date.prototype.toISOString() polyfill*。找到这个[https://gist.github.com/1044533](https://gist.github.com/1044533)

从要点：

```
// thanks to @fgnass and @subzey for their awesome golf skills
// annotation by @fgnass

function(a){
  a=this;
  return (
     1e3 // Insert a leading zero as padding for months < 10
     -~a.getUTCMonth() // Months start at 0, so increment it by one
     *10 // Insert a trailing zero as padding for days < 10
     +a.toUTCString() // Can be "1 Jan 1970 00:00:00 GMT" or "Thu, 01 Jan 1970 00:00:00 GMT"
     +1e3+a/1 // Append the millis, add 1000 to handle timestamps <= 999
     // The resulting String for new Date(0) will be:
     // "-1010 Thu, 01 Jan 1970 00:00:00 GMT1000" or
     // "-10101 Jan 1970 00:00:00 GMT1000" (IE)
   ).replace(
      // The two digits after the leading '-1' contain the month
      // The next two digits (at whatever location) contain the day
      // The last three chars are the milliseconds
      /1(..).*?(\d\d)\D+(\d+).(\S+).*(...)/,
     '$3-$1-$2T$4.$5Z')
} 
```

**注意：**这可能不是最易读的代码或 polyfill 的最佳示例，但它似乎可以根据要点中的注释工作，因此它是一种快速复制/粘贴解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T11:32:15.260

你为什么不使用[toJSON 方法](http://msdn.microsoft.com/en-us/library/ie/cc907896.aspx)呢？它受 IE8 支持。

# .net - 使用哪种 2D 技术对超过 1kb 的数据进行编码？

> ID：12907863
> 
> 赞同：1
> 
> 时间：2012-10-16T05:07:16.073
> 
> 标签：.net, visual-studio, image-processing, barcode

我想编码超过 1kb 的数据。但我尝试使用 datamatrix 。但是在 datamatrix 中我们无法编码 1kb 的数据。还有其他 2D 技术可以编码超过 1kb 的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:15:46.097

QR 码最多可以保存 2.9 kb 的二进制数据（或最多只有 ~7 kb 的数字）。欲了解更多信息，[请单击此处](https://en.wikipedia.org/wiki/QR_code)。

> 二维码符号中可以存储的数据量取决于数据类型（模式或输入字符集）、版本（1、...、40，表示符号的整体尺寸）和纠错级别。最大存储容量适用于 40-L 符号（版本 40，纠错级别 L），如下所示（其中字符是指输入模式/数据类型的各个值，如所示）：

```
Numeric only    Max. 7,089 characters (0, 1, 2, 3, 4, 5, 6, 7, 8, 9)
Alphanumeric    Max. 4,296 characters (0–9, A–Z [upper-case only], space, $, %, *, +, -, ., /, :)
Binary/byte     Max. 2,953 characters (8-bit bytes) (23624 bits)
Kanji/Kana      Max. 1,817 characters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:46:30.720

在最大尺寸和最小推荐纠错级别下，PDF417 (ISO 15438) 能够存储 1726 字节的 ASCII 文本、1033 字节的数据或 2528 个十进制数字。

# c - 如何在 C 中将随机大写字母数组填充为函数？

> ID：12907865
> 
> 赞同：0
> 
> 时间：2012-10-16T05:07:43.640
> 
> 标签：c, arrays, random, fill

我正在尝试编写一个函数来用 40 个随机大写字母填充数组。我试图填充数组并打印它，但我没有得到任何输出。

先感谢您。

```
#include <stdio.h>
#include <stdlib.h>

void fillS1(char y[]);

int main(int argc, const char * argv[])
{
char s1[40];
int n;

fillS1(&s1[40]);

for (n = 0; n < 41; n++) {
    printf("%s", s1);
}

return 0;
}

void fillS1(char y[40]){

int x = 1;

while (x < 41) {
    x = rand() % 26;
    x = 2 + 'A';
    x = y[x];
    x++;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:16:32.213

我只想编码

```
void fill_string_40(char str[])
{
   for (int i=0; i<40; i++)
     str[i] = 'A' + random() % 26;
   str[40] = (char)0; // (char)0 is equal to use '\0'
} 
```

并将其用作（例如在您的`main`）

```
{ char s[41];
  fill_string_40(s);
  printf("%s\n", s);
} 
```

请注意，空终止字符需要一个额外的字节。我们假设一些 ASCII 兼容的字符编码。一种更便携的方式可能是

```
str[i] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[random() % 26]; 
```

因为文字字符串是字符的常量数组。

如果您使用 C++ 编写代码，请参阅[标准`<random>`头文件](https://en.cppreference.com/w/cpp/numeric/random)。如果您为 Linux 编写代码，请参阅[random(4)](http://man7.org/linux/man-pages/man4/random.4.html)和[getrandom(2)](http://man7.org/linux/man-pages/man2/getrandom.2.html)，也许将它与[srandom(3)](http://man7.org/linux/man-pages/man3/srandom.3.html)一起使用。另请阅读有关[Mersenne Twister的信息](https://en.wikipedia.org/wiki/Mersenne_Twister)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:22:12.527

试试这个，不要忘记在你的程序开始时调用 srand() ，一次。

```
void fillRand(char ar[], size_t len)
{
    size_t i=0;
    if (0 == len)
        return;

    for (i=0;i<(len-1);++i)
       ar[i] = (rand() % 26) + 'A';
    ar[len-1] = 0;
} 
```

顺便说一句，完全不可移植，因为规范不要求 'A'..'Z' 是连续的或连续的，但它可能会很好地满足您的需要。如果需要绝对的可移植性，那么以下将*始终*有效：

```
void fillRand(char ar[], size_t len)
{
    static const char a[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    size_t i=0;

    if (0 == len)
        return;

    for (i=0;i<(len-1);++i)
       ar[i] = a[ (rand() % (sizeof(a)-1)) ];
    ar[len-1] = 0;
} 
```

将在正常和 EBCDIC 平台上工作。（如果你不知道区别，就用这个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:21:36.380

此外，您应该在调用时传递第一个字符的地址`fillS1()`。替换`fillS1(&s1[40]);`为`fillS1(&s1[0]);`

# django - 翻译字符串的问题

> ID：12907870
> 
> 赞同：2
> 
> 时间：2012-10-16T05:08:27.597
> 
> 标签：django, multilingual, django-multilingual

我在我的项目中使用**多个翻译**

为此，我已将我的**设置文件**更新为

```
 LANGUAGE_CODE = 'en-us'

    gettext = lambda s: s

    LANGUAGES = (

        ('es', gettext('Spanish')),
        ('en', gettext('English')),
    )

    LOCALE_PATHS = (
        '/mnt/aviesta/pythondev/django/locale',
    )

    USE_I18N = True
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.locale.LocaleMiddleware',

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.request",
) 
```

我的**模板文件**为：

```
{% load i18n %}

{% trans "Hello" %}

<p>Already a user <a href="/login/"><b>{% trans "login here" %}</b></a></p> 
```

之后，我创建了一个与我的应用程序平行的语言环境文件夹，而不是在其中创建特定语言文件夹：**django-admin.py makemessages -l es**创建 .po 文件，然后将此 .po 文件更新为：

```
#: customer_reg/customer_register.html:14
msgid "Hello"
msgstr "¡Hola"

#: customer_reg/customer_register.html:17
msgid "login here"
msgstr "ingresa aquí" 
```

最后我*编译*了我的 msg **django-admin.py compilemessages**

但是我的字符串“hello”和“login here”仍然是**英文**，它们没有翻译。我不知道为什么会这样？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:21:57.237

使用您的代码，一切看起来都很棒。我唯一没见过的`LOCALE_PATHS`是`settings.py`

Mabye这个答案，我前段时间做过，可以帮助你：[多种语言的问题](https://stackoverflow.com/questions/12852805/issues-with-multiple-languages/12853503#12853503)

**编辑//回复评论**

```
from django.utils import translation
translation.activate('es') 
```

# ruby-on-rails - Rails 使用非主键进行自引用

> ID：12907874
> 
> 赞同：0
> 
> 时间：2012-10-16T05:08:58.723
> 
> 标签：ruby-on-rails, model, self-reference

请帮忙。

我有一个自引用模型，并希望外键引用范围内的非主键。

在列表表中，我有一个 sequence_id 列，其中包含仅在列表集中唯一的列表的增量 id。这意味着对于另一个列表集的列表可以看到相同的 sequence_id。但是，由于这个 sequence_id 在整个表中不是唯一的，所以我没有将它作为主键。

如何使用此非主键实现自引用关系？

非常感谢。

**模型：**

```
 Class Listset
       has_many :lists, :dependent => :delete_all
       has_many :items, :through => :lists
    end

    Class List
       belongs_to :listset

       belongs_to :parentList, :class_name => "List"
       has_many :childList, :class_name => "List", foreign_key => "parent"

       has_many :items, :dependent => :delete_all
    end

    Class item
        belongs_to :list
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:04:47.393

你能澄清你在问什么`sequence_id`吗？

这应该有助于您的自引用关系：

```
class List < ActiveRecord::Base
  belongs_to :listset
  belongs_to :parent,      :class_name => "List"
  has_many   :child_lists, :class_name => "List", :foreign_key => "parent_id"
  # etc...
end 
```

这假设您`parent_id`在数据库表中有一个列。

Rails 中的约定是强调命名关系，即，`:child_lists`而不是`:childList`.

使用`belongs_to :parent`ActiveRecord 指示`parent_id`在列表表中查找列，该列应该是`has_many`关系中引用的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:12:58.233

如果我理解正确，您已经知道如何使用主键对自引用关系建模。每个都`List`只是有一个`parent_id`引用其他一些`Lists`的`id`（这是一个主键）。我认为您要问的是您是否可以使用非主键`sequence_id`而不是默认的主键来建模自引用关系`id`。

*从概念上讲*，这是可能的，因为模型中的每条记录`List`都将由其`sequence_id` *和*其唯一标识`listset_id`，原因是`sequence_id`在 a 范围内是唯一的`listset_id`。

但是，我认为您不能以这种方式安全地操纵`belongs_to`以找到`List`'s 父母。根据[railsguides](http://guides.rubyonrails.org/association_basics.html#the-types-of-associations)，

> ...通过声明一个模型属于另一个模型，您可以指示 Rails 维护两个模型实例之间的主键-外键信息...

也就是说，`belongs_to`期望使用作为主键的外键来查找记录。虽然您可以尝试`belongs_to`根据`listset_id`范围和`sequence_id`类似的东西来识别父级

```
belongs_to :parent_list, foreign_key: :parent_id, class_name: "List", conditions: proc { {:listset_id => listset_id, :sequence_id => parent_id} } 
```

这可能会导致意外的行为，因为`belongs_to`仍然期望使用主键来识别关联的模型。

虽然，我不完全确定这是否是你想要的。让我们知道。

# c++ - Web 服务将标志作为文本值返回 - 如何转换为枚举

> ID：12907876
> 
> 赞同：0
> 
> 时间：2012-10-16T05:09:22.967
> 
> 标签：c++, web-services, qt

我正在尝试使用在 .NET C# 中开发的 Web 服务返回的标志。标志在 json 对象中以逗号分隔的字符串形式返回： ex: `roomA,roomB,auditorium`。我的 Qt c++ 应用程序正在使用为每个标志设置了位的枚举：

```
enum AccessMask
{
    None = 0,

    roomA                       = 1 << 1,
    roomB                       = 1 << 2,
    ownerOnly                   = 1 << 3,
    workgroup                   = 1 << 4,
    department                  = 1 << 5,
    auditorium                  = 1 << 6
} 
```

除了执行许多“if QString.contains()”语句之外，还有更好的方法来设置访问掩码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:44:07.100

您可以使用以字符串作为键、以枚举值作为数据的字典或映射。然后您可以在逗号处拆分字符串并轻松查找值。

# javascript - 在js中调用函数后未加载日期选择器

> ID：12907878
> 
> 赞同：0
> 
> 时间：2012-10-16T05:09:36.960
> 
> 标签：javascript, jquery, datepicker, cakephp-2.0

我有一个表格，其中有一个文本框可以从日期选择器中获取日期。

然后有一个`add more`链接，它创建一个新的文本框，它也是一个日期选择器文本框。

但它不会加载日期选择器。

这是我的代码：

```
<?php echo $this->Html->script('jquery.min.js');?>
<?php echo $this->Html->script('popup.js');?>
<?php echo $this->Html->css('forms'); ?>
<?php echo $this->html->script(array('scripts')); ?>
<link rel="stylesheet" href="<?php echo HTTP_HOST;?>app/webroot/js/datepick/themes/base/jquery.ui.all.css">
    <script src="<?php echo HTTP_HOST;?>app/webroot/js/datepick/jquery-1.8.0.js"></script>
    <script src="<?php echo HTTP_HOST;?>app/webroot/js/datepick/ui/jquery.ui.core.js"></script>
    <script src="<?php echo HTTP_HOST;?>app/webroot/js/datepick/ui/jquery.ui.widget.js"></script>
    <script src="<?php echo HTTP_HOST;?>app/webroot/js/datepick/ui/jquery.ui.datepicker.js"></script>
    <link rel="stylesheet" href="<?php echo HTTP_HOST;?>app/webroot/js/datepick/themes/demos.css">
    <script>
    $(function() {
        var dsr_counter = $("#dsr_counter").val();
        for(i=1;i<=dsr_counter;i++){
            $("#converterdiv"+dsr_counter).css("display","none");
        }

        $( "#meeting_date1" ).datepicker();
        $( "#format" ).change(function() {
            $( "#meeting_date1" ).datepicker( "option", "dateFormat", $( this ).val() );
        });

        $( "#dsr_date1" ).datepicker();
        $( "#format" ).change(function() {
            $( "#dsr_date1" ).datepicker( "option", "dateFormat", $( this ).val() );
        });

        for(i=1;i<=dsr_counter;i++){

            $("input:radio[name=action_converter"+dsr_counter+"]").click(function() {
                var value = $(this).val();
                if (value=="yes") {
                    $("#converter_yes"+dsr_counter).css("display","block");
                    $("#converter_no"+dsr_counter).css("display","none");
                    $("#converted"+dsr_counter).val("yes");
                } else {
                    $("#converter_yes"+dsr_counter).css("display","none");
                    $("#converter_no"+dsr_counter).css("display","block");
                    $("#converted"+dsr_counter).val("no");
                } 
            });
        }
    });
    function add_dsr(num,width){
        new_num = parseInt(num)+parseInt(1);
        add_more_dsr(num,width);
        $('#meeting_date'+new_num ).datepicker();
        $( "#format" ).change(function() {
            $( "#meeting_date"+new_num ).datepicker( "option", "dateFormat", $( this ).val() );
        });
    }
    </script>

    <div id="popup_mm" style="display:block; margin-left:10px; margin-top:10px; float:left;">

            <?php echo $this->Form->create('TravancoDSR', array('class'=>'form'));?>
            <table border="0" cellpadding="0" cellspacing="0" style="margin-left:150px; width:80%; border:1px solid #CCCCCC;">
              <tr>
                <td><div class="dsr_input_div">
                    <?php
                        echo $this->Form->input('title1',       array(  'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Title',
                                                                    ));
                        echo $this->Form->input('name1',        array(  'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Name',
                                                                    ));
                        echo $this->Form->input('address1',array(   'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Address',
                                                                        'type' => 'textarea',
                                                                            'cols'=>60,
                                                                            'rows' => 5,
                                                                    ));
                        echo $this->Form->input('phone1',       array(  'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Phone',
                                                                    ));
                        ?>
                </div></td>
                <td><div class="dsr_input_div">
                    <?php
                    echo $this->Form->input('business_name1',       array(  'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Name Of Business',
                                                                    ));
                    echo $this->Form->input('business_address1',array(  'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Business Address',
                                                                        'type' => 'textarea',
                                                                            'cols'=>60,
                                                                            'rows' => 5,
                                                                    ));
                    echo $this->Form->input('status1',      array(  'options' => array(     'Suspect' => 'Suspect', 
                                                                                        'Prospect' => 'Prospect', 
                                                                                        'Lead' => 'Lead',
                                                                                        'Converter' => 'Converter'
                                                                                      ), 
                                                                    'empty' => '(choose one)',
                                                                    'div'=>'formfield',
                                                                    'error' => array(   'wrap' => 'div',
                                                                                        'class' => 'formerror'
                                                                                    ),
                                                                    'style'=>'width:13em',
                                                                    'label'=>'Status'
                                                            ));
                    echo $this->Form->input('meeting_date1',        array(  'div'=>'frm_filed_new',
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'Date of Meeting',
                                                                        'id'=>'meeting_date1',
                                                                        'value'=>'',
                                                                    )); 

                    ?>
                </div></td>
              </tr>
              <tr style="background-color:#F4F4F4;">
                <td colspan="2">
                    <div class="converter_div" style="margin-left:58px;"> 
                            <input type="checkbox" name="data[TravancoDSR][chkconverted1]" id="chkconverted1" class="converter_chk" onClick="return show_converter(1);"  />If Converted 
                        </div>
                    <div style="float:left; color:#C2A34F; margin-left:80px;" id="converterdiv1">
                        <input type="radio" name="action_converter1" id="action_converter_yes1" value="yes" style="float:none;" />&nbsp;&nbsp;Yes
                        <input type="radio" name="action_converter1" id="action_converter_no1" value="no" style="float:none; margin-left:30px;" />&nbsp;&nbsp;No
                        <?php                       
                            echo $this->Form->input('converted1',       array(  'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                            ),
                                                                            'label' => 'Date of Conversion',
                                                                            'id'=>'converted1',
                                                                            'type'=>'hidden',
                                                                        )); 

                        ?>

                    </div>
                    <div class="converterdiv" id="converter_yes1" style="display:none;">
                    <table cellpadding="0" cellspacing="0" style="border:0px;">
                    <tr>
                    <td>
                    <div class="dsr_input_div">
                        <?php

                            echo $this->Form->input('dsr_date1',        array(  'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                            ),
                                                                            'label' => 'Date of Conversion',
                                                                            'id'=>'dsr_date1',
                                                                            'value'=>'',
                                                                        )); 

                        ?>

                    </div>
                    </td>
                    <td>
                    <div class="dsr_input_div">
                        <?php
                            echo $this->Form->input('comments1',    array(  'type' => 'textarea',
                                                                            'cols'=>60,
                                                                            'rows' => 5,
                                                                            'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                        ),
                                                                            'label' => 'Comments',
                                                                            'id'=>'comments1'
                                                                    ));
                            ?>
                    </div>
                    </td>
                    </tr>
                    </table>
                    </div>
                    <div class="converterdiv" id="converter_no1" style="display:none;">
                    <table cellpadding="0" cellspacing="0" style="border:0px;">
                    <tr>
                    <td>
                    <div class="dsr_input_div">
                        <?php

                            echo $this->Form->input('reason1',          array(  'type' => 'textarea',
                                                                            'cols'=>60,
                                                                            'rows' => 5,
                                                                            'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                            ),
                                                                            'label' => 'If Not Reason',
                                                                            'id'=>'reason1',
                                                                            'value'=>'',
                                                                        )); 

                            echo $this->Form->input('reference0',   array(  'type' => 'text',
                                                                            'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                        ),
                                                                            'label' => 'Reference',
                                                                            'id'=>'reference0'
                                                                    ));
                            ?>
                            <div id="add_more_div1" style="padding:0em;">
                            </div>
                            <div style="margin-left:150px;">
                                <a  style="cursor:pointer;"onclick="return add_more(1);">Add More</a>
                                <input name="data[TravancoDSR][counter1]" id="counter1" value="1" type="hidden" />
                            </div>
                    </div>
                    </td>
                    <td>
                    <div class="dsr_input_div">
                        <?php
                            echo $this->Form->input('action1',  array(  'type' => 'textarea',
                                                                            'cols'=>60,
                                                                            'rows' => 5,
                                                                            'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                        ),
                                                                            'label' => 'Action Taken',
                                                                    ));
                            ?>
                    </div>
                    </td>
                    </tr>
                    </table>
                    </div>
                </td>
              </tr>
              <tr>
              <td align="center" colspan="2">

              </td>
              </tr>
            </table>

            <div id="add_more_dsr_1" style="display:none;"></div>
            <div style="margin-left:220px;" id="dsr_more_link_1">
            <?php $cnt = 1; ?>
                <a  style="cursor:pointer;"onclick="return add_dsr(<?php echo $cnt?>,150);">Add More</a>
                <input name="data[TravancoDSR][dsr_counter]" id="dsr_counter" value="<?php echo $cnt?>" type="hidden" />
            </div>
            <?php 
                echo $this->Form->input('emp_id',       array(  'div'=>'frm_filed_new',
                                                                        'value'=>$employee_id,
                                                                        'error' => array(   'wrap' => 'div',
                                                                                            'class' => 'formerror'
                                                                                        ),
                                                                        'label' => 'empid',
                                                                        'type'=>'hidden'
                                                                    )); 
                echo $this->Form->input('dsr_created_date',     array(      'div'=>'frm_filed_new',
                                                                            'error' => array(   'wrap' => 'div',
                                                                                                'class' => 'formerror'
                                                                                        ),
                                                                            'label' => false,
                                                                            'type'=>'hidden',
                                                                            'value'=>date ('Y-m-d')
                                                                    ));
                $frmid = "'TravancoDSRMarketingAddDSRForm'";
                echo $this->Form->button('Save DSR', array('type'=>'submit','class'=>'submitclass','onClick'=>'return dsr_adding('.$frmid.')','style'=>'width: 95px; height: 25px; margin-left: 225px; float:left; margin-top:0;')); ?>

            <?php echo $this->Form->end(); ?>

            </div> 
```

这是`add_more_dsr()`文件中`scripts.js`的

```
function add_more_dsr(num,width){
        width = parseInt(width)-6;
        new_num=parseInt(num)+parseInt(1);
        document.getElementById("dsr_counter").value=new_num;

        var fields = "";

        fields+="<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"margin-left:"+width+"px; width:80%; border:1px solid #CCCCCC;\">";
        fields+="<tbody><tr><td><div class=\"dsr_input_div\"><div class=\"frm_filed_new\">";
        fields+="<label for=\"TravancoDSRTitle"+new_num+"\">Title</label>";
        fields+="<input type=\"text\" id=\"TravancoDSRTitle"+new_num+"\" maxlength=\"50\" name=\"data[TravancoDSR][title"+new_num+"]\">";
        fields+="</div><div class=\"frm_filed_new\"><label for=\"TravancoDSRName"+new_num+"\">Name</label>";
        fields+="<input type=\"text\" id=\"TravancoDSRName"+new_num+"\" maxlength=\"50\" name=\"data[TravancoDSR][name"+new_num+"]\">";
        fields+="</div><div class=\"frm_filed_new\"><label for=\"TravancoDSRAddress"+new_num+"\">Address</label>";
        fields+="<textarea id=\"TravancoDSRAddress"+new_num+"\" rows=\"5\" cols=\"60\" name=\"data[TravancoDSR][address"+new_num+"]\"></textarea>";
        fields+="</div><div class=\"frm_filed_new\"><label for=\"TravancoDSRPhone"+new_num+"\">Phone</label>";
        fields+="<input type=\"text\" id=\"TravancoDSRPhone"+new_num+"\" maxlength=\"30\" name=\"data[TravancoDSR][phone"+new_num+"]\">";
        fields+="</div></div></td><td><div class=\"dsr_input_div\"><div class=\"frm_filed_new\">";
        fields+="<label for=\"TravancoDSRBusinessName"+new_num+"\">Name Of Business</label>";
        fields+="<input type=\"text\" id=\"TravancoDSRBusinessName"+new_num+"\" maxlength=\"30\" name=\"data[TravancoDSR][business_name"+new_num+"]\">";
        fields+="</div><div class=\"frm_filed_new\"><label for=\"TravancoDSRBusinessAddress"+new_num+"\">Business Address</label>";
        fields+="<textarea id=\"TravancoDSRBusinessAddress"+new_num+"\" rows=\"5\" cols=\"60\" name=\"data[TravancoDSR][business_address"+new_num+"]\"></textarea>";
        fields+="</div><div class=\"formfield\"><label for=\"TravancoDSRStatus"+new_num+"\">Status</label>";
        fields+="<select id=\"TravancoDSRStatus"+new_num+"\" style=\"width:13em\" name=\"data[TravancoDSR][status"+new_num+"]\">";
        fields+="<option value=\"\">(choose one)</option><option value=\"Suspect\">Suspect</option>";
        fields+="<option value=\"Prospect\">Prospect</option><option value=\"Lead\">Lead</option>";
        fields+="<option value=\"Converter\">Converter</option></select>";
        fields+="</div><div class=\"frm_filed_new\"><label for=\"meeting_date"+new_num+"\">Date of Meeting</label>";
        fields+="<input type=\"text\" value=\"\" id=\"meeting_date"+new_num+"\" name=\"data[TravancoDSR][meeting_date"+new_num+"]\" class=\"hasDatepicker\">";
        fields+="</div>";
        fields+="</div></td></tr><tr style=\"background-color:#F4F4F4;\"><td colspan=\"2\">";
        fields+="<div style=\"margin-left:58px;\" class=\"converter_div\"> ";
        fields+="<input type=\"checkbox\" onclick=\"return show_converter("+new_num+");\" class=\"converter_chk\" id=\"chkconverted"+new_num+"\" name=\"data[TravancoDSR][chkconverted"+new_num+"]\">";
        fields+="If Converted</div>";
        fields+="<div id=\"converterdiv"+new_num+"\" style=\"float: left; color: rgb(194, 163, 79); margin-left: 80px; display: none;\">";
        fields+="<input type=\"radio\" style=\"float:none;\" onclick=\"return show_radio(this.value,"+new_num+")\" value=\"yes\" id=\"action_converter_yes"+new_num+"\" name=\"action_converter"+new_num+"\">&nbsp;&nbsp;Yes";
        fields+="<input type=\"radio\"  onclick=\"return show_radio(this.value,"+new_num+")\"style=\"float:none; margin-left:30px;\" value=\"no\" id=\"action_converter_no"+new_num+"\" name=\"action_converter"+new_num+"\">&nbsp;&nbsp;No";
        fields+="<input type=\"hidden\" id=\"converted"+new_num+"\" name=\"data[TravancoDSR][converted"+new_num+"]\"></div>";
        fields+="<div style=\"display:none;\" id=\"converter_yes"+new_num+"\" class=\"converterdiv\">";
        fields+="<table cellspacing=\"0\" cellpadding=\"0\" style=\"border:0px;\"><tbody><tr><td>";
        fields+="<div class=\"dsr_input_div\"><div class=\"frm_filed_new\"><label for=\"dsr_date"+new_num+"\">Date of Conversion</label>";
        fields+="<input type=\"text\" maxlength=\"30\" value=\"\" id=\"dsr_date"+new_num+"\" name=\"data[TravancoDSR][dsr_date"+new_num+"]\" class=\"hasDatepicker\">";
        fields+="</div></div></td><td><div class=\"dsr_input_div\"><div class=\"frm_filed_new\"><label for=\"comments"+new_num+"\">Comments</label>";
        fields+="<textarea id=\"comments"+new_num+"\" rows=\"5\" cols=\"60\" name=\"data[TravancoDSR][comments"+new_num+"]\"></textarea>";
        fields+="</div></div></td></tr></tbody></table></div>";
        fields+="<div style=\"display:none;\" id=\"converter_no"+new_num+"\" class=\"converterdiv\">";
        fields+="<table cellspacing=\"0\" cellpadding=\"0\" style=\"border:0px;\">";
        fields+="<tbody><tr><td><div class=\"dsr_input_div\"><div class=\"frm_filed_new\"><label for=\"reason"+new_num+"\">If Not Reason</label>";
        fields+="<textarea id=\"reason"+new_num+"\" rows=\"5\" cols=\"60\" name=\"data[TravancoDSR][reason"+new_num+"]\"></textarea>";

        fields+="</div><div class=\"frm_filed_new\"><label for=\"reference0\">Reference</label>";
        fields+="<input type=\"text\" id=\"reference0\" name=\"data[TravancoDSR][reference0]\">";

        fields+="</div><div style=\"padding:0em;\" id=\"add_more_div"+new_num+"\"></div><div style=\"margin-left:150px;\">";
        fields+="<a onclick=\"return add_more("+new_num+");\" style=\"cursor:pointer;\">Add More</a>";
        fields+="<input type=\"hidden\" value=\""+new_num+"\" id=\"counter"+new_num+"\" name=\"data[TravancoDSR][counter"+new_num+"]\"></div></div></td>";
        fields+="<td><div class=\"dsr_input_div\"><div class=\"frm_filed_new\"><label for=\"TravancoDSRAction"+new_num+"\">Action Taken</label>";
        fields+="<textarea id=\"TravancoDSRAction"+new_num+"\" rows=\"5\" cols=\"60\" name=\"data[TravancoDSR][action"+new_num+"]\"></textarea>";
        fields+="</div></div></td></tr></tbody></table></div></td></tr><tr><td align=\"center\" colspan=\"2\">";
        fields+="</td></tr></tbody></table>";
        fields+="<div style=\"margin-left:220px;\" id=\"dsr_more_link_"+new_num+"\">";
        fields+="<a  style=\"cursor:pointer;\" onclick=\"return add_more_dsr("+new_num+","+width+");\">Add More</a></div>";
        fields+="<div id=\"add_more_dsr_"+new_num+"\" style=\"display:none;\"></div>";
        document.getElementById('add_more_dsr_'+num).style.display="block";
        document.getElementById("add_more_dsr_"+num).innerHTML=fields;
        document.getElementById('dsr_more_link_'+num).style.display="none";

    } 
```

我怎样才能做到这一点？单击`add_more`它会创建一个带有新日期文本框的新表格，但我无法从该文本框中获取日期。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:14:35.107

里面的任何东西

```
$(function(){ ... }); 
```

仅在页面加载时执行。

在您的 add_more_dsr 中，您需要将日期选择器应用于新元素

编辑：在 add_more_dsr 的末尾尝试这样（在将文本框添加到 dom 之后）

```
$('#meeting_date'+new_num ).datepicker();
    $( "#format" ).change(function() {
        $( "#dsr_date1" ).datepicker( "option", "dateFormat", $( this ).val() );
    }); 
```

**编辑 2**

问题是当你这样做时：

```
document.getElementById("add_more_dsr_"+num).innerHTML=fields; 
```

它只是不断替换现有内容。

此外，而不是像这样的内联javascript：

```
<a  style="cursor:pointer;"onclick="return add_more_dsr(1);">Add More</a> 
```

尝试使用 jquery 分配一个 onlick 事件处理程序：

```
$('#linkAddMore').on('click', function() {

    add_more_dsr(num);
    num++;
}); 
```

看看[这里的例子](http://jsfiddle.net/4D4T5/3/)。它添加了新的文本框，但 JSFIDDLE 不会加载 UI 库，因此您必须测试日期选择器是否可以在您自己的代码中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:15:08.487

要求可以做到。好像是ID的问题。

**ID**在 HTML 页面上必须是**唯一的。**

因为您在页面上有重复的 id，所以更改的事件处理程序似乎正在覆盖先前声明的事件......

另外，因为您是在单击锚点时创建元素，所以当日期选择器关联时，该元素仍然不存在于您的 DOM 中。

因此，您需要在创建元素后立即添加日期选择器..

# algorithm - 解析字符串输入的最佳算法

> ID：12907879
> 
> 赞同：-2
> 
> 时间：2012-10-16T05:09:49.890
> 
> 标签：algorithm

好的，算法奇才。假设您有以下输入：

天空是蓝色的[开始]天空是蓝色的[结束]沙子是棕色的[开始]沙子是棕色的[结束]天空是蓝色的，沙子是棕色的

您想根据以下规则对其进行解析：

1.  在每个 [start] 和 [end] 标记的开头和结尾处将输入分成几行
2.  如果蓝色在 [start] 和 [end] 标签之间，则将其值更改为灰色
3.  如果棕色在 [start] 和 [end] 标签之间，则将其值更改为棕褐色

预期的输出应该完全如下所示：

1.  天是蓝的
2.  [开始]
3.  天空是灰色的
4.  [结尾]
5.  沙子是棕色的
6.  [开始]
7.  沙子是棕褐色的
8.  [结尾]
9.  天空是蓝色的，沙子是棕色的

什么是最佳算法来做到这一点？

注意：不管你用什么语言来回应，只要思路清晰就行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:53:55.330

您*可以*使用 [start]、[end]、blue、brown 和其他所有内容作为词位创建上下文无关语法，构建解析树，修改它并重建字符串。

不过，似乎有点牵强。相反，请进行搜索和替换，将 [start] 替换为 \n[start]\n，将 [end] 替换为 \n[start]\end。然后越过线条，在开始和结束之间的线条上替换你的颜色。

不过，使用解析器要酷得多。

# mysql - 从开始到当月获取mysql数据

> ID：12907884
> 
> 赞同：0
> 
> 时间：2012-10-16T05:10:14.217
> 
> 标签：mysql, phpmyadmin

我有一个`tbl_track`有很多记录的 mysql 表

```
User_id  |  User_country  |  Datecreated (timestamp)
1        |3               |  2012-09-09 09:37:03
2        |7               |  2012-10-09 16:22:36 
```

现在我想要这样的结果（从开始月份到当前月份）

```
September | September & October
1 record  | 2 records 
```

我试试这个，但结果是相反的，从本月到月初，即（10 月、10 月+9 月、10 月+9 月+8 月）。我也为每个人写了单独的查询

我当前月份的查询是

```
SELECT * FROM tbl_track 
  WHERE YEAR(`date_created`) = YEAR(CURRENT_DATE) 
  AND MONTH(`date_created`) = MONTH(CURRENT_DATE) 
```

我对当前和上个月的查询是

```
SELECT * as count FROM tbl_track 
 WHERE YEAR(`date_created`) = YEAR(CURRENT_DATE - INTERVAL 1 MONTH)
 AND MONTH(`date_created`) = MONTH(CURRENT_DATE - INTERVAL 1 MONTH) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:03:39.080

据我所知，在查询中没有简单的方法可以做到这一点。但是，您可以使用以下内容：

```
SELECT COUNT(1), MONTH(date_created) AS mm, YEAR(date_created) AS yy
FROM tbl_track
GROUP BY mm, yy 
```

这为您提供了每月记录数的列表。根据您的 phpmyadmin 标签，我假设您将在 PHP 脚本中使用结果集，所以也许您可以在该脚本中累积前几个月的金额？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:54:17.050

您对当前和上个月的查询只是提取上个月的记录

```
SELECT * as count FROM tbl_track 
WHERE YEAR(`date_created`) = YEAR(CURRENT_DATE - INTERVAL 1 MONTH)
 AND MONTH(`date_created`) = MONTH(CURRENT_DATE - INTERVAL 1 MONTH) 
```

我认为您应该将其更改为

```
SELECT count(*) as countofrec FROM tbl_track 
 WHERE YEAR(`date_created`) = YEAR(CURRENT_DATE - INTERVAL 1 MONTH)
 AND ( MONTH(`date_created`) = MONTH(CURRENT_DATE - INTERVAL 1 MONTH)
        OR
       MONTH(`date_created`) = MONTH(CURRENT_DATE) ) 
```

# html - 水平菜单栏 UL LI 宽度修复 - 使用黑客/修复宽度 - 哪个更可取？

> ID：12907889
> 
> 赞同：0
> 
> 时间：2012-10-16T05:11:01.560
> 
> 标签：html, html-lists

1) 使用 UL LI 创建水平菜单栏，并使用边距和填充创建/固定每个菜单 (LI) 的宽度。这会在 IE 浏览器中产生兼容性问题（显然）。通过使用 IF 条件语句修复它们，Chrome 和 Safari 与 1px 不同，即兼容性问题增加并且需要使用 hack 来修复它们。

2）为了解决这一切，如果我给每个 LI 指定宽度，我的菜单栏在所有浏览器中都可以工作，没有任何兼容性修复。

虽然，我不太喜欢使用 hack，但有时我会使用它们来进行小修复。大多数情况下，html 开发人员使用第一个选项，我需要知道哪种方法更好。

# php - 从 php date() 输出更改日期名称的颜色

> ID：12907892
> 
> 赞同：0
> 
> 时间：2012-10-16T05:11:24.943
> 
> 标签：php, css

我使用 php 的 date() 函数在现场打印日期。

```
echo date('l, M j, Y H:i'); 
```

它显示这样的输出。

```
Tuesday, Oct 16, 2012 10:13 
```

如何将“星期二”的颜色单独更改为红色。我找不到单独将 CSS 应用于“星期二”的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:19:59.147

在纯 CSS 中无法做到这一点，您需要将“星期二”包装在 HTML 标记中，以便可以在 CSS 中单独设置样式。你需要调整你的 PHP 来做这样的事情，

```
echo "<span class='day'>" . date('l') . "</span>" . date(', M j, Y H:i'); 
```

然后你可以在 CSS 中像平常一样设置 span 的样式，

```
span.day { color: #f00; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:23:29.327

有可能做到这一点。

```
<?php
$var=date('l');
?><font color="#567890"> <?php echo $var; ?></font> 
```

# google-apps-script - 如何在不影响现有公式的情况下向谷歌电子表格添加新行

> ID：12907893
> 
> 赞同：1
> 
> 时间：2012-10-16T05:11:25.150
> 
> 标签：google-apps-script, google-sheets

我在谷歌电子表格中使用这个脚本来添加一个新行：

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[0];
sheet.insertRowAfter(1); 
```

问题是任何引用行的公式都会更新，例如

```
=A$2 
```

变成

```
=A$3 
```

在行插入之后。有没有办法避免这种情况？
（通过更改论坛或脚本。）

我理解这种行为，电子表格希望所有公式都指向旧单元格 - 但它与我的总和相混淆（这些应该总是从 a$2:a$999 总结整个列（a1 是标题）。但那些得到更新然后总结 a$3:a$1000（等等），这样他们就完全错过了新行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:31:16.903

您可以使用`=SUM(INDIRECT("A2"):INDIRECT("A999"))`对这些值求和。电子表格不会触及这些地址，因为它们是字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T05:23:28.130

我最近在 Android 中做到了这一点。

```
service = new SpreadsheetService("Spreadsheet");
service.setProtocolVersion(SpreadsheetService.Versions.V3);
service.setUserCredentials("username", "password");

URL metafeedUrl = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");
feed = service.getFeed(metafeedUrl, SpreadsheetFeed.class);
List<SpreadsheetEntry> spreadsheets = feed.getEntries(); //List of Spreadsheet
worksheetFeed = service.getFeed(spreadsheets.get(0).getWorksheetFeedUrl(), WorksheetFeed.class); //Using the first spreadsheet from list
List<WorksheetEntry> worksheets = worksheetFeed.getEntries();
worksheet = worksheets.get(0);
URL listFeedUrl = worksheet.getListFeedUrl();

// Create a local representation of the new row.
ListEntry row = new ListEntry();
row.getCustomElements().setValueLocal("column_name", "value");
row = service.insert(listFeedUrl, row); 
```

这对我来说很有用。希望它可以帮助你。

# javascript - 将字符串转换为 JSON

> ID：12907909
> 
> 赞同：0
> 
> 时间：2012-10-16T05:12:43.667
> 
> 标签：javascript, json, serialization, redis

我是 javascript 的新手，我正在尝试将 redis-cli INFO 命令输出转换为 JSON。我试图转换为 JSON 的字符串是这样的

```
 "redis_version:2.4.8\r\nredis_git_sha1:b85ba5fb\r\nredis_git_dirty:0\r\narch_bits:64\r\nmultiplexing_api:kqueue\r\ngcc_version:4.2.1\r\nprocess_id:6403\r\nuptime_in_seconds:963411\r\nuptime_in_days:11\r\nlru_clock:815387\r\nused_cpu_sys:67.32\r\nused_cpu_user:91.89\r\nused_cpu_sys_children:42.23\r\nused_cpu_user_children:132.57\r\nconnected_clients:2\r\nconnected_slaves:1\r\nclient_longest_output_list:0\r\nclient_biggest_input_buf:0\r\nblocked_clients:0\r\nused_memory:162549360\r\nused_memory_human:155.02M\r\nused_memory_rss:147972096\r\nused_memory_peak:191943360\r\nused_memory_peak_human:183.05M\r\nmem_fragmentation_ratio:0.91\r\nmem_allocator:libc\r\nloading:0\r\naof_enabled:1\r\nchanges_since_last_save:1\r\nbgsave_in_progress:1\r\nlast_save_time:1350325258\r\nbgrewriteaof_in_progress:0\r\ntotal_connections_received:187\r\ntotal_commands_processed:269264\r\nexpired_keys:180\r\nevicted_keys:0\r\nkeyspace_hits:202518\r\nkeyspace_misses:11675\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:2198\r\nvm_enabled:0\r\nrole:master\r\naof_current_size:159904546\r\naof_base_size:158667118\r\naof_pending_rewrite:0\r\naof_buffer_length:0\r\naof_pending_bio_fsync:0\r\nslave0:127.0.0.1,62716,online\r\ndb0:keys=356937,expires=0\r\n" 
```

非常感谢任何有关如何将其转换为 JSON 对象的指针。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:24:23.667

你可以做这样简单的事情：

```
​var fields = str.split('\r\n'), result = {};
for(var i = 0, len = fields.length; i < len; ++i) {
    var props = fields[i].split(':');
    if(props.length === 2) {           
        result[props[0]] = props[1];
    }
}

console.log(result);​​​​
console.log(JSON.stringify(result)); 
```

[我在http://jsfiddle.net/uHtT3/1/](http://jsfiddle.net/uHtT3/1/)创建了一个 jsfiddle 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:31:47.980

您是否尝试过使用**eval**？

```
eval('[{"'+<yourString>+'"}]'); 
```

**编辑**

```
eval('({"'+<yourString>+'"})'); 
```

where 可以是 json 作为字符串，例如：

```
"a: 21, b:23" 
```

这对我有用

```
var yourString = "redis_version:2.4.8\r\nredis_git_sha1:b85ba5fb\r\nredis_git_dirty:0\r\narch_bits:64\r\nmultiplexing_api:kqueue\r\ngcc_version:4.2.1\r\nprocess_id:6403\r\nuptime_in_seconds:963411\r\nuptime_in_days:11\r\nlru_clock:815387\r\nused_cpu_sys:67.32\r\nused_cpu_user:91.89\r\nused_cpu_sys_children:42.23\r\nused_cpu_user_children:132.57\r\nconnected_clients:2\r\nconnected_slaves:1\r\nclient_longest_output_list:0\r\nclient_biggest_input_buf:0\r\nblocked_clients:0\r\nused_memory:162549360\r\nused_memory_human:155.02M\r\nused_memory_rss:147972096\r\nused_memory_peak:191943360\r\nused_memory_peak_human:183.05M\r\nmem_fragmentation_ratio:0.91\r\nmem_allocator:libc\r\nloading:0\r\naof_enabled:1\r\nchanges_since_last_save:1\r\nbgsave_in_progress:1\r\nlast_save_time:1350325258\r\nbgrewriteaof_in_progress:0\r\ntotal_connections_received:187\r\ntotal_commands_processed:269264\r\nexpired_keys:180\r\nevicted_keys:0\r\nkeyspace_hits:202518\r\nkeyspace_misses:11675\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:2198\r\nvm_enabled:0\r\nrole:master\r\naof_current_size:159904546\r\naof_base_size:158667118\r\naof_pending_rewrite:0\r\naof_buffer_length:0\r\naof_pending_bio_fsync:0\r\nslave0:127.0.0.1".replace(/\r\n/g, ",").replace(/:/g, ": '").replace(/,/g, "' ,")+"'";
eval('({'+yourString+'})'); 
```

或者如果你想避免使用**eval**使用**JSON.parse**

```
JSON.parse(yourString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:19:50.503

为什么不将[webdis 之](http://webd.is/#json)类的东西用于相同的目的？

默认情况下，Webdis 回复是包含单个项目的 JSON 对象，将请求的命令名称映射到 Redis 回复。使用以下 JSON 类型：

```
Redis string → JSON string (GET, LPOP...)
Redis multi-bulk data → JSON list (LRANGE, SMEMBERS...)
Redis integer → JSON integer (INCR...)
Redis status, error → list [bool, string] (PING, SET...) 
```

?jsonp 查询字符串参数添加了一个可选的包装函数，将回复转换为 JSONP 调用。这使得在 Javascript 应用程序中包含 Webdis 成为可能。

# android - 我们可以在android UI和spring、struts、Hibernate集成应用程序之间进行通信吗？

> ID：12907910
> 
> 赞同：0
> 
> 时间：2012-10-16T05:12:46.753
> 
> 标签：android, spring, hibernate, struts

我是android应用程序开发的新手。

我开发了一个登录应用程序。在这个应用程序中，我使用 设计了 ​​UI 屏幕`android sdk`，输入用户名、密码并将这些值发送到 servlet `HttpClient`，使用`HttpPost`类进行身份验证。完成身份验证后，我在 android UI 屏幕上打印身份验证消息。

但现在我的要求是，我想使用 Spring、Hibernate 和 Struts 集成而不是 Servlet 和 jdbc 代码，可以使用吗？

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:22:17.050

是的！这是一个您可以查看的好项目：

[http://www.springsource.org/spring-android](http://www.springsource.org/spring-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:01:51.803

是的你可以。您可以使用`xml`or`json`进行通信。

正如您将使用 Spring 一样，您可以遵循：**基于 REST API 的**服务器应用程序方法，这样即使您想在 iPhone 或任何其他设备上开发相同的 UI 应用程序，您也可以向您的单个 Web 服务发出请求。

# php - 如何隐藏 URL 的其他部分

> ID：12907911
> 
> 赞同：1
> 
> 时间：2012-10-16T05:13:01.403
> 
> 标签：php, .htaccess

我想隐藏像这样的 URL 的某些部分

**http://localhost/hotel/index.php?&do=home**

我希望它只显示

**http://localhost/hotel/home**

谁能给我一个最简单的php代码来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T05:16:43.733

以下是在 URL 中隐藏信息的不同方法：

1.  使用表格并发布信息。这可能需要在源页面中添加额外的代码，但不需要在目标页面中进行逻辑更改（只需将 Request.QueryString 更改为 Request.Form）。虽然 POST 并非不可能，但它肯定不如使用 QueryString 参数吸引人。

2.  使用会话变量在页面之间传递信息。与 (1) 相比，这可能是一个更大的努力，因为您需要考虑会话变量检查（例如，如果您经常检查状态，用户现在可能很难使用他们的后退和前进按钮导航） . 您还需要处理未启用会话 cookie 的情况（此解决方案不适用于这些人）。

3.  在 QueryString 中使用“编码”或无意义的信息代替真实数据。这将需要在所有页面提交的任一端创建编码和解码方案。当然，用户仍然可以对您的方案进行试验和逆向工程，但是他们不太可能快速对现有的 QueryString 做出有意义的更改。

4.  使用框架集。我真的不推荐这种方法，尽管它很常见。如果您试图隐藏信息而不是使其更难修改，用户仍然可以右键单击各个框架并单击属性，以检索通过 QueryString 传递的所有信息。

5.  使用 Server.Transfer 将控制移动到第二个页面，该页面仍然可以访问传递给第一页的 QueryString 参数（其 URL 仅短暂可见）。

    远离 QueryStrings 的一个问题是它们使您的网站更难使用。如果您依赖 (3) 以外的任何方法，则用户不可能按原样为当前页面添加书签......他们只能以类似于如果他们只是键入 URL 会发生的情况为页面添加书签in（这甚至可能不起作用，具体取决于您构建页面的方式）。因此，在决定您的信息的真正敏感程度以及您愿意在可用性与安全性之间取得平衡时，请记住这一点。

# c# - 将泛型类绑定到特定接口

> ID：12907916
> 
> 赞同：2
> 
> 时间：2012-10-16T05:13:29.160
> 
> 标签：c#, generics, interface, icomparable

我正在尝试制作一个通用类。有没有办法进行约束，以便只有实现的对象`IComparable`才能传递到我的泛型中。例如：

```
public class MyClass<T>
{

}

public class MyFooClass
{
}

public class MyComparableFooClass : IComparable
{
    public int Compare(MyComparableFooClass q) 
    { 
        return 0;
    }
}

public class MyMainClass()
{
    private MyClass<int> _myIntClass; // This is okay since int implements IComparable
    private MyClass<MyComparableFooClass> _myComparableFooClass // This should be okay too since int implements IComparable
    private MyClass<MyFooClass> _myFooClass; // This should get a compile error since MyFooClass doesn't implement IComparable
} 
```

希望我的例子很清楚。我只想`MyClass<T>`允许实现`IComparable`. `where`如果我没记错的话，我知道该约束仅适用于类。这是可能的还是有人可以提供解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T05:16:25.120

[Generic constraint](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)也适用于接口。从文档

> 其中 T : class 类型参数必须是引用类型，**包括任何类、接口**、委托或数组类型。

因此，您可以使用关键字`where`with `IComparable`：

```
public class MyClass<T> where T : IComparable
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T05:16:22.537

Generic 也适用于*接口*：

```
public class MyClass<T> where T: IComparable
{
} 
```

# java - EntityManager 通过 joinColumn 查询

> ID：12907921
> 
> 赞同：5
> 
> 时间：2012-10-16T05:14:04.340
> 
> 标签：java, jpa, entitymanager, joincolumn

我有一个`Login`实体和一个`Customer`实体。`Login.username`是客户表中的外键。`Customer`因此 Java POJO中的以下行

```
@OneToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "username", nullable = false)
private Login login; 
```

我的问题是：有没有一种简单的方法来`customer`使用查询表`username`？还是我必须先取`login`然后`username`再`customer`取`login`？

这是 JPA 条件查询。而且，是的，我更喜欢使用标准查询。

```
public Customer getCustomerByUsername(String username) throws EntityNotFoundException {
    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();
    CriteriaQuery<Customer> criteriaQuery = criteriaBuilder.createQuery(Customer.class);
    Root<Customer> root = criteriaQuery.from(Customer.class);
    Path<String> path = root.<String>get("username");
    criteriaQuery.where(criteriaBuilder.equal(path, username));
    return entityManager.createQuery(criteriaQuery).getSingleResult();
} 
```

该行`Path<String> path = root.<String>get("username")`抛出异常说`username ... is not present.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T18:56:32.810

JPQL 的正确解决方案是

```
Query q = entityManager.createQuery("SELECT c FROM Customer c WHERE c.login.username = :username");
    q.setParameter("username", username);
    return (Customer) q.getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:53:51.697

```
Query q = entityManager.createQuery("SELECT c FROM Customer c JOIN Login l ON c.login=l WHERE l.username = :username");
q.setParameter("username",username);
List<Customer> customerList = q.getResultList(); 
```

有一些技巧要记住：这都是关于对象的，而不是底层数据库。所以名称代表类、实例和字段，它们都是区分大小写的......你得到的错误意味着你的 Customer 类没有 userName 字段 - 这是真的，因为 Login 有那个......遗憾的是，我无法测试，但逻辑和意图应该清楚。

# html - HTML & CSS：如何将引号和文本放在同一高度？

> ID：12907924
> 
> 赞同：1
> 
> 时间：2012-10-16T05:14:24.100
> 
> 标签：html, css

有人可以告诉我如何做这样的报价（见图）？

我为引号使用了默认的 html 代码：

```
<div>
<span style="font-size=30px">$#8220;</span>
<span style="font-size=12px">Test Text</span>
</div> 
```

但这会导致引号保持在文本的顶部，但不在文本的相同高度。有人可以帮我吗？

![引号](../Images/6336a43edab467e992962756bbaee00f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:23:14.320

在报价单上：

```
font-size: 30px;
display  : inline-block;
position : relative;
top      : 10px; 
```

更改`top: 10px`为您需要的任何内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T05:24:15.540

您必须将字体更改为您想要的字体，但在这里它正在起作用：http: [//jsfiddle.net/Zm23t/](http://jsfiddle.net/Zm23t/)

这有点像报纸上使用的“Drop Caps”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:25:20.000

.....................

嗨，现在习惯像这样在 css 中`pseudo` **使用 css** `:before`

```
div span{
display:inline-block;
  width:200px;
  border:solid 1px red;
}
div span:before{
content:'"';
  font-size:14px;
  color:red;
  font-weight:bold;
} 
```

**[*现场演示*](http://tinkerbin.com/7cCAuE4l)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T05:31:00.493

你可以试试这个。

```
<div>
  <div style="float:left;">
    <span style="font-size:30px">"</span>
  </div>
  <div style="float:left;">
    <span style="font-size:12px">Test Text</span>
  </div>
</div> 
```

# php - 像 wordpress 一样获取 config.php 文件的字符串

> ID：12907929
> 
> 赞同：0
> 
> 时间：2012-10-16T05:14:37.487
> 
> 标签：php, xml, wordpress

我有两个文件，`test.php`和`db.php`. test.php 文件包含如下形式：

```
<form method="get" action="db.php">

 <form method="get" action="db.php">

    <table>
        <tr>
            <td>
                Dbhost :-
            </td>
            <td>
                <input type="text" name="dbhost" />
            </td>
        </tr>
        <tr>
            <td>
                Dbname :-
            </td>
            <td>
                <input type="text" name="dbname" />
            </td>
        </tr>
        <tr>
            <td>
                Dbusername :-
            </td>
            <td>
                <input type="text" name="dbusername" />
            </td>
        </tr>
        <tr>
            <td>
                Password :-
            </td>
            <td>
                <input type="text" name="pwd" />
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="submit" name="sub" />
            </td>
        </tr>
    </table>

</form> 
```

当我提交表单时，我想在`db.php`文件中获取它的值。我想要 wordpress 在其 config.php 文件中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:20:31.610

根据您的 `method`属性（可以是`GET`或`POST`），提交的值将在您的 PHP 脚本中以超全局数组[`$_GET`](http://www.php.net/manual/en/reserved.variables.get.php)和[`$_POST`](http://www.php.net/manual/en/reserved.variables.post.php).

也就是说，例如，取名为字段的值`dbhost`，您可以编写`db.php`以下内容：

```
echo $_GET['dbhost']; 
```

的（如果你有`<form method="post">`），

```
echo $_POST['dbhost']; 
```

您还可以将接收到的值分配给如下变量：

```
$dbuser = $_GET['dbusername'];
$dbpassword = $_GET['pwd'];
$dbname = $_GET['dbname'];
$dbhost = $_GET['dbhost']; 
```

然后使用`$dbuser`, `$dbpassword`, `$dbname`,`$dbhost`变量连接到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:28:46.720

在 db.php 文件中，使用以下代码片段：

```
<?php
    if(!isset($_GET["sub"])) // check if button was not pressed on the form 
    {
        header("Location: test.php");
    }
    $host     = $_GET["dbhost"];  
    $db       = $_GET["dbname"];  
    $user     = $_GET["dbusername"];
    $password = $_GET["pwd"];

    $connection = mysql_connect($host,$user,$password); 
    if (!$connection)
    {
        die('Could not connect: ' . mysql_error());
    }
    else
    {
          mysql_select_db($db, $connection);
         // Connection established! Do your work here
    }

    mysql_close($connection);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:50:52.950

例如，将您的表单放在名为 form.php 的文件中。然后在块之间添加行 include('db.php'); 然后您可以访问 db.php 中的变量并获取和设置它们的值。我不得不说，你想要达到的目标并没有被清楚地理解。

# ios - ReverseGeocode CLLocation 触摸 MKMapView

> ID：12907932
> 
> 赞同：2
> 
> 时间：2012-10-16T05:15:09.650
> 
> 标签：ios, mkmapview, cllocation

所以我试图基于触摸 MKMapView 来获得 CLLocation。然后，我尝试对位置进行反向地理编码。

```
 if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        // Not sure if this is the right method to get the location or not
        CLLocationCoordinate2D coordinate = [self.mapView convertPoint:[gestureRecognizer locationInView:self.mapView] toCoordinateFromView:self.mapView];

        CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:coordinate.latitude longitude:coordinate.longitude];
        CLGeocoder *geocoder = [[CLGeocoder alloc] init];

        [geocoder reverseGeocodeLocation:pinLocation completionHandler:^(NSArray *placemarks, NSError *error) {
            if (placemarks && placemarks.count > 0) {
                CLPlacemark *topResult = [placemarks objectAtIndex:0];
                AddressAnnotation *anAddress = [[AddressAnnotation alloc] initWithPlacemark:topResult];     

                [self.mapView addAnnotation:anAddress];
                [self.addressesArray addObject:anAddress];
            }
            else {
                AddressAnnotation *anAddress = [[AddressAnnotation alloc] initWithCoordinate:coordinate];
                [self.mapView addAnnotation:anAddress];
                [self.addressesArray addObject:anAddress];
            }
        }]; 
```

使用我的 if/else 语句，我想要做的是触摸地图并获取 CLLocation。如果我可以对位置进行反向地理编码，请删除带有地址的图钉。如果我无法对位置进行反向地理编码，请放下图钉并在地图标注中显示纬度和经度。

它似乎不起作用。似乎即使我在某个位置触摸地图，反向地理编码也会使我的 pin 转到反向地理编码可以找到该位置的其他地方。这不是我想要的行为。无论如何我都想放下别针，如果我不能在标注中显示地址，只需显示纬度/经度。

如果我完全删除 revseGeocodeLocation:pinLocation 代码，并且只使用 else 块中的内容，那么我会得到 lat/long 并且无论如何都会将 pin 丢弃在那里。反向地理编码器阻止我将大头针放到我想要的地方有什么原因吗？

作为旁注，任何人都可以确认我根据 UITapGestureRecognizer 计算 CLLocationCoordinate2D 的方式是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:27:58.183

如果您的反向地理编码工作正常，则引脚应指向正确的位置。检查您是否获得正确的纬度和经度值。如果您当前的实现不起作用，请尝试使用 google 反向地理编码 API。

这是可以帮助您的链接.. [http://www.icodeblog.com/2009/12/22/introduction-to-mapkit-in-iphone-os-3-0-part-2/](http://www.icodeblog.com/2009/12/22/introduction-to-mapkit-in-iphone-os-3-0-part-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:25:35.593

`coordinate`基于分接点的计算看起来是正确的。

问题在于，当`coordinate`进行反向地理编码时，返回的地标可能位于这些坐标*附近*`CLPlacemark`的某个位置，并且对象本身 ( `topResult`) 包含该位置的确切坐标`topResult.location.coordinate`（这是使用 创建注释时使用的坐标`initWithPlacemark`）。

除非用户碰巧恰好点击了可反向地理编码的坐标，否则地标不会准确地出现在他们点击的位置。

由于您希望将引脚准确放置在用户点击的位置，而不考虑最近找到的地标，因此您可以做的是覆盖`AddressAnnotation`使用地标初始化时使用的坐标。

例如，在调用（假设该方法使用地标的位置设置注释的*属性*）之后，您可以随后覆盖它：`initWithPlacemark``coordinate`

```
AddressAnnotation *anAddress = [[AddressAnnotation alloc] initWithPlacemark...
anAddress.coordinate = coordinate; // <-- replace with tapped coordinate 
```

或者，您可以`initWithCoordinate`改用并`title`使用来自`topResult`.

此外，如果找到的地标与点击坐标的距离超过*x*`title` ，请考虑在/前面添加前缀，例如“Near”，`subtitle`以向用户表明该引脚不完全位于点击位置（例如“埃菲尔铁塔附近”）。

# android - 在图像中查找空白区域以填充另一个图像

> ID：12907938
> 
> 赞同：1
> 
> 时间：2012-10-16T05:16:11.997
> 
> 标签：android, image, canvas

我想在图像中找到空白区域（它的 xy 坐标）；从那我需要在那个空白区域填充另一个图像。

![为这张图片找到空白区域](../Images/0df4ec5746c4f0273d289dd1cfc1c8b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:46:29.403

您想在图像中找到 WHITE 点，然后在下面尝试。我希望它会对您有所帮助，但它会返回图像中的所有 WHITE 点，而不仅仅是空白区域。

```
 Bitmap mBitmap = YOUR BITMAP;

            ArrayList<Point> whitePoint = new ArrayList<Point>();
            for (int i = 0; i < mBitmap.getWidth(); i++) {
                for (int j = 0; j < mBitmap.getHeight(); j++) {
                    if(mBitmap.getPixel(i, j) == Color.WHITE)
                    {
                        whitePoint.add(new Point(i, j));
                    }
                }
            } 
```

我建议在空白区域使用 TRANSPARENT 颜色并检查 TRANSPARENT 而不是 WHITE 颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:01:10.970

空白区域是指白色矩形吗？

我要解决的方法是每个像素（x 轴/y 轴）运行一个像素来搜索一个完全白色的像素，一旦我找到这个像素，我就会运行一个方法，从那个像素开始，验证X 轴上的一条直线上的像素和 Y 轴上的另一个像素是我要插入那里的图像的宽度和高度。如果这两条线上全是白色，那么我会在长度为 的对角线上再次运行它`math.sqrt(width*width + height*height)`，如果全是白色，我可以在那里填充图像，如果不是，请从末尾开始继续搜索那条对角线。

虽然不是搜索白色像素，我宁愿搜索完全透明的像素（0 alpha）。我认为这对你的图像有用，但如果你碰巧有另一个图像，它有 3 条线，它们的尾巴和白色的精确长度结合在一起，它会失败。只是不要……那样做。

您实际上可以验证该矩形中的所有像素，而不是仅检查这些行，但这可能会很慢并且不适用于您的图像，因为您恰好在空白区域的底部有该高度。

# java - JPA CascadeType.PERSIST 是如何工作的？

> ID：12907942
> 
> 赞同：20
> 
> 时间：2012-10-16T05:16:25.643
> 
> 标签：java, jpa

在我的示例中，与 with`Employee`有`OneToOne`关系。当我坚持多个时，`Department``CascadeType.PERSIST``Employee`

* * *

为什么要为所有记录`EntityManager`保留一条记录？`Department``Employee`

* * *

我的期望是，如果我们使用`CascadeType.PERSIST`，当 an`Employee`被持久化时，`Department`将为每条记录重新创建一条`Employee`记录。

雇员.java

```
@Entity
public class Employee {
    private String id;
    private String name;
    @OneToOne(cascade = CascadeType.PERSIST)
    @JoinColumn(name = "DEP_ID", referencedColumnName = "ID")
    private Department department;

    -----
} 
```

部门.java

```
@Entity
public class Department implements Serializable {
    private String id;
    private String name;
} 
```

测试.java

```
public void insert() {
    em = emf.createEntityManager();
    em.getTransaction().begin();
    Department department = new Department("Test Department");
    for(int i=1; i <= 10; i++) {
        Employee e = new Employee("EMP" + i, department);
        em.persist(e);
    }
    em.getTransaction().commit();
    em.close();
} 
```

结果 ：

```
Employee Table          Department Table
=================       ==============================
ID  Name  DEP_ID        ID      NAME    
=================       ==============================
1   EMP1    1           1       Test Department
2   EMP2    1
3   EMP3    1
4   EMP4    1
5   EMP5    1
6   EMP6    1
7   EMP7    1
8   EMP8    1
9   EMP9    1
10  EMP10   1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T13:49:24.433

JPA 维护对象身份，不会保留现有对象。

改变你的代码是正确的，

```
for(int i=1; i <= 10; i++) {
    Department department = new Department("Test Department");
    Employee e = new Employee("EMP" + i, department);
    em.persist(e);
} 
```

# jsf-2 - 在 JSF 中，如何在可编辑的数据表中列出而不在 init 块或构造函数中初始化

> ID：12907954
> 
> 赞同：4
> 
> 时间：2012-10-16T05:17:14.670
> 
> 标签：jsf-2, datatable, primefaces

在我的应用程序中，我使用 primefaces 可编辑数据表，这些 List(cmFieldsList) 值需要根据请求参数（blkcode）动态呈现。

如果我在构造函数中初始化列表，我可以编辑和保存数据表对象。对于我的应用程序，每次都需要基于请求参数的动态列表，所以如果没有在构造函数中初始化，我就无法在我的数据表中编辑或保存数据。如果我尝试在不初始化的情况下编辑相同的内容，我会收到如下所示的异常

> 原因：java.lang.IllegalArgumentException: org.primefaces 的 javax.faces.component.UIData.getRowData(UIData.java:433) 的 javax.faces.model.ListDataModel.getRowData(ListDataModel.java:69) 的行不可用.component.datatable.DataTable.queueEvent(DataTable.java:522) at org.primefaces.component.behavior.ajax.AjaxBehaviorRenderer.decode(AjaxBehaviorRenderer.java:42) at javax.faces.component.behavior.ClientBehaviorBase.decode(ClientBehaviorBase .java:64) 在 org.primefaces.renderkit.CoreRenderer.decodeBehaviors(CoreRenderer.java:329) 在 org.primefaces.component.datatable.DataTableRenderer.decode(DataTableRenderer.java:57)

所以如果没有在构造函数中初始化，我怎么能做到这一点。

我的 JSF 托管 Bean 代码是

```
package com.dynamic.mbeans;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;

import org.primefaces.event.RowEditEvent;

import com.dynamic.model.CmFields;
import com.dynamic.services.CmFieldService;

@ManagedBean(name="cmFieldListBean")
@RequestScoped
public class CmFieldController implements Serializable  {

private static final long serialVersionUID = 6250736369064467010L;

private CmFields cmFields;
private List<CmFields> cmFieldsList;
@ManagedProperty(value="#{param.blkCode}")
public String blkCode;

public CmFieldController(){
    cmFields= new CmFields();
    //cmFieldsList= new ArrayList<CmFields>();
    //cmFieldsList.add(cmFields); 
}

@ManagedProperty("#{cmFieldService}")
private CmFieldService cmFieldService;

public String showForms(){
    System.out.println("blkCode =="+blkCode);
    cmFieldsList = cmFieldService.listAllCmField(blkCode);//lists CmFields from DB
    return "dynamic-cmfields-form";
}

public void onEdit(RowEditEvent event) {
    System.out.println("event started");
    System.out.println("event ended");
   // FacesMessage msg = new FacesMessage("CmFields Edited", ((CmFields) event.getObject()).getBlkCode() );  

   //FacesContext.getCurrentInstance().addMessage(null, msg);  
}  

public void onCancel(RowEditEvent event) {  
    FacesMessage msg = new FacesMessage("CmFields Cancelled", ((CmFields) event.getObject()).getBlkCode());  

    FacesContext.getCurrentInstance().addMessage(null, msg);  
}  

public CmFields getCmFields() {
    return cmFields;
}

public void setCmFields(CmFields cmFields) {
    this.cmFields = cmFields;
}

public CmFieldService getCmFieldService() {
    return cmFieldService;
}

public void setCmFieldService(CmFieldService cmFieldService) {
    this.cmFieldService = cmFieldService;
}

public List<CmFields> getCmFieldsList() {
    return cmFieldsList;
}

public void setCmFieldsList(List<CmFields> cmFieldsList) {
    this.cmFieldsList = cmFieldsList;
}

public String getBlkCode() {
    return blkCode;
}

public void setBlkCode(String blkCode) {
    this.blkCode = blkCode;
}

} 
```

我用于向托管 bean 发送请求参数的 JSF 代码是

```
 <h:form>
<h:commandLink action="#{cmFieldListBean.showForms}" value="LIST SALESMAN" >
<f:param name="blkCode" value="SALESMAN" />
 </h:commandLink>
 <br/>
 <br/>
 <h:commandLink action="#{cmFieldListBean.showForms}" value="LIST SALESMAN COMPANY" >
 <f:param name="blkCode" value="SALESMAN_COMP" />
 </h:commandLink>

 </h:form> 
```

我在数据表中列出的 JSF 代码是

```
<h:form id="form">  

<p:growl id="messages" showDetail="true"/>  

<p:dataTable var="cmList" value="#{cmFieldListBean.cmFieldsList}" id="cmFieldsList" editable="true" preserveDataModel="false">  

    <f:facet name="header">  
       Grid Editing
    </f:facet>  

    <p:ajax event="rowEdit" listener="#{cmFieldListBean.onEdit}" update=":form:cmFieldsList" />  
    <p:ajax event="rowEditCancel" listener="#{cmFieldListBean.onCancel}" update=":form:cmFieldsList" />  

    <p:column headerText="Caption" style="width:200px">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cmList.fieldCaption}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cmList.fieldCaption}" style="width:100%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>  

    <p:column headerText="Field Name" style="width:150px">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cmList.fieldName}" /> 
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cmList.fieldName}" style="width:100%"/>    
            </f:facet>  
        </p:cellEditor>  
    </p:column>  
    <p:column headerText="Data Type" style="width:150px">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{cmList.dataType}" /> 
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{cmList.dataType}" style="width:100%"/>    
            </f:facet>  
        </p:cellEditor>  
    </p:column>  

    <p:column headerText="Options" style="width:50px">  
        <p:rowEditor />  
    </p:column>  

</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T12:54:35.057

将您的 bean 范围更改为`@ViewScoped`：视图范围将在很多情况下用于支持数据表，因为您不需要在每次更改排序或过滤时读取数据库中的数据。当然，如果您要显示的记录列表不是太长并且在内存中一次读取它们。

# php - get all values in an ip range

> ID：12907961
> 
> 赞同：3
> 
> 时间：2012-10-16T05:17:55.387
> 
> 标签：php, ip, range

Pls help,

I have a form which contains two fields to enter ip range say

```
 |iprange1| and  |iprange2| 
```

What I want to print all ip between iprange1 and iprange2\. Lets say I want to print ip's between

```
 192.168.1.2 and 192.168.1.10 
```

how to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:52:29.883

demo : [http://codepad.org/3QDQ2OVK](http://codepad.org/3QDQ2OVK).

```
$ip1 = '192.168.1.2';
$ip2 = '192.168.1.10';

for ($ip = ip2long($ip1); $ip<=ip2long($ip2); $ip++)
{
    echo long2ip($ip) . "\n";
} 
```

Thanks to NullUserException.

# codeigniter - CodeIgniter 会话类在 Chrome 中不起作用

> ID：12907962
> 
> 赞同：9
> 
> 时间：2012-10-16T05:18:04.780
> 
> 标签：codeigniter, session, google-chrome, cookies

我在 codeigniter 项目中创建了一个登录系统，该系统在 Firefox 中运行良好，但在 Chrome 中无法正常工作，数据获取和会话设置但是当此代码将控制重定向到管理/仪表板时，我们再次检查会话数据。如果会话数据不存在，那么代码将重定向用户再次登录............我的代码在下面，我不知道codeigniter中的这个会话/cookies有什么问题。？

```
 $data = array(
             'user_id' => $user->id,
             'name' => $user->name,
             'user_type' => $user->type,
             'username' => $user->username,
             'is_logged_in' => true
        );

        $this->session->set_userdata($data);
        //echo "user ".$this->session->userdata("username"); exit;
        redirect("admin/dashboard", "location"); 
```

我已经搜索了很多但没有人在这种情况下工作，比如在配置文件中更改“ **cookie_domain** ”但什么也没发生......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T09:04:52.647

我也遇到过这种情况，并通过将会话到期时间延长至一天来解决此问题。

**更新**

## 为什么它通过延长会话到期来工作？

这个问题是由于用户的时区和网络服务器位置之间的差异而发生的，例如我住在巴基斯坦，比美国时区早 10 小时，而我的服务器在美国。我在巴基斯坦时间 2012 年 10 月 17 日 14:00 请求该页面。美国的时间是 2012 年 10 月 17 日 4:00，因为网络服务器在美国，并且会话到期设置为 2 小时，服务器发送的 cookie 设置为 2012 年 10 月 17 日 6:00 到期。现在浏览器与您的本地电脑时间交互，它的时间是 2012 年 17 月 10 日 14:00，因此它会删除 cookie 或您的 cookie 总是根据您的请求刷新。因此，最好将会话到期设置为 1 天，因为新西兰和美国之间的最大时区差异是 17 小时（我不确定差异可能是我错了）。所以你的 cookie 至少可以存活 7 个小时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T00:41:51.470

只是为了增加我的经验，我使用的是 Codeigniter 2.1.4，

问题：Chrome 上的会话持续时间不超过几分钟，或者在执行 ajax 请求时被注销。我尝试了几种方法：（更改了 sess_cookie_name，更长的 sess_expiration 时间）。

我刚刚发现将 sess_encrypt_cookie 设置为 FALSE 修复了 chrome 注销问题。

`$config['sess_encrypt_cookie'] = FALSE;`

不知道为什么，也许是 chrome 上的 cookie 长度问题（据我所知，加密会增加很多字符串长度）。

我知道加密增加了额外的安全级别，但据我所知，存储在 cookie 中的数据并不敏感。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T04:25:05.360

我在 config.php 中将 sess_match_useragent 参数更改为 false

```
$config['sess_match_useragent'] = FALSE; 
```

谷歌浏览器的问题得到了解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T23:13:46.360

I know this is a late answer but if you're looking for a good solution here it is: use this code as the logging out code:

```
$this->session->sess_destroy(); 
```

This will insure removal of session "ci_session" which is the main reason you can't save a new session, hope it helps

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T07:02:45.330

您是否检查过您是否将会话存储更长时间并且它没有提前销毁。或者可能与接受会话和 cookie 数据的 chrome 设置有关，因为 codeigniter 中没有这样的代码可以在 Firefox 和它上运行无法在 chrome 上运行。另外请确保您正在自动加载“会话”库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-06T18:33:17.817

我遇到了同样的问题，最后通过使用最新版本的 Codeigniter 版本 2.1.4 的 sql 结构更新会话数据库表来解决它。

```
 CREATE TABLE IF NOT EXISTS  `ci_sessions` (
         session_id varchar(40) DEFAULT '0' NOT NULL,
         ip_address varchar(45) DEFAULT '0' NOT NULL,
         user_agent varchar(120) NOT NULL,
         last_activity int(10) unsigned DEFAULT 0 NOT NULL,
         user_data text NOT NULL,
         PRIMARY KEY (session_id),
         KEY `last_activity_idx` (`last_activity`)
    ); 
```

另请注意，如果您在 config/database.php 中配置了多个数据库，则会话表使用默认配置数据库的会话表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T10:42:01.137

[Shayan Husaini](https://stackoverflow.com/users/1232366/shayan-husaini)的完美答案我遇到了同样的问题，我通过更改解决了它

```
$config['sess_expiration'] = 8600; 
```

这是 24 小时内的秒数，是 2 小时内的秒数

```
$config['sess_expiration'] = 7200; 
```

我住在巴基斯坦并使用美国的服务器，所以会出现这个问题。

谢谢Shayan，这是很大的帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-24T17:54:42.300

已解决，如果 cookie 的指定域是 localhost，CodeIgniter 会出现一些问题，我在 hosts 文件中设置了一个具有真实域名结构的假域，并且它可以工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-08T00:37:13.040

我有同样的问题，我可以通过更改`$config['sess_time_to_update'] = 3;`CodeIgniter 框架的 /application/config/config.php 中的值来解决问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-18T05:35:12.883

我也遇到过同样的问题。但是我通过在 $config['cookie_path'] 设置适当的值来修复它。如果您的项目从您域的子文件夹运行。那么请将子文件夹名称设置为 $config['cookie_path'];

**假设您的项目网址：[https](https://example.com/demo1/) : //example.com/demo1/ 然后 $config['cookie_path'] 应该像 $config['cookie_path'] = '/demo1/'**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-15T05:57:04.330

如果它的 7.x 更改为 5.6 它对我有用，请检查您的服务器 php 版本

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-06T08:16:24.653

尝试更新到最新版本。我使用的是 3.1.9 版本，会话没有问题。

[https://codeigniter.com/userguide3/installation/downloads.html](https://codeigniter.com/userguide3/installation/downloads.html)

# java - 如何在 Mockito 测试用例中提供 LocaleInfo？

> ID：12907966
> 
> 赞同：0
> 
> 时间：2012-10-16T05:18:45.637
> 
> 标签：java, gwt, mockito

我有一个使用以下代码行的方法：

```
/* 1 */ DateTimeFormat serverFormat = DateTimeFormat.getFormat("MM/dd/yyyy");
/* 2 */ DateTimeFormat displayFormat = DateTimeFormat.getFormat("MMM dd, yyyy");
/* 3 */ Date thisDate = serverFormat.parse(prices.getCheckInDate()); 
```

当我从我的测试用例（Mockito）中调用此方法时，a`NullPointerException`出现在第**1**行。

我相信这是由于语言环境而发生的。我对语言环境了解不多。我也在粘贴堆栈跟踪。

测试它的正确方法是什么？我可以以某种方式从我的测试用例中提供语言环境信息吗？

```
testSetupMyTable(MyViewTest)java.lang.NullPointerException
    at com.google.gwt.i18n.client.LocaleInfo.ensureDateTimeFormatInfo(LocaleInfo.java:201)
    at com.google.gwt.i18n.client.LocaleInfo.getDateTimeFormatInfo(LocaleInfo.java:159)
    at com.google.gwt.i18n.client.DateTimeFormat.getDefaultDateTimeFormatInfo(DateTimeFormat.java:808)
    at com.google.gwt.i18n.client.DateTimeFormat.getFormat(DateTimeFormat.java:625)

    at MyView.setupMyView(MyView.java:109)
    at MyViewTest.testSetupMyTable(MyViewTest.java:49) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:07:28.347

我将 DateTime 格式化逻辑封装在 Util 类中：

```
class Util {
  formatDate() {}
} 
```

现在我正在嘲笑实用程序类的方法。我想我不必担心 DateTimeFormat API 的测试，因为它已经过测试。

在这种特殊情况下，我的测试不需要精确的日期转换，因此该解决方案可以正常工作，但是如果我希望日期转换准确怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-09T16:31:41.033

您最好使用**GwtMockito**。假设您要测试格式化日期的复合材料：

```
public class MyComposite extends Composite {

    private static final DateTimeFormat FORMATTER = DateTimeFormat.getFormat("dd MMM yy");

    private Label labelName, labelDate;

    @Override
    public void updateHeaderData(String userName, Date dateToShow) {
        labelName.setText(messages.hiUser(userName));
        labelDate.setInnerText(FORMATTER.format(dateToShow));
    }
} 
```

**并且**使用我的模式进行的测试避免了异常：

```
@RunWith(GwtMockitoTestRunner.class)
public class CompositeToTest {

    MyComposite composite;
    @GwtMock
    LocaleInfoImpl infoImpl;

    @Before
    public void setUp() throws Exception {
        com.google.gwt.i18n.client.DateTimeFormatInfo mockDateTimeFormatInfo =
            mock(com.google.gwt.i18n.client.DateTimeFormatInfo.class);
        when(infoImpl.getDateTimeFormatInfo()).thenReturn(mockDateTimeFormatInfo);
        String[] months =
            new String[] {"ene", "feb", "mar", "abr", "may", "jun", "jul", "ago", "sep", "oct", "nov", "dic"};
        when(mockDateTimeFormatInfo.monthsShort()).thenReturn(months);
    }

    @Test
    public void should_whenUpdateHeaderData() throws Exception {
        // Given
        composite = new MyComposite();

        // When
        composite.updateHeaderData("pepito", new Date());

        // Then
        verify(labelDate).setText(anyString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:49:20.483

你甚至不需要模拟静态方法，你可以模拟 DateTimeFormat。

```
DateTimeFormat serverFormat = mock(DateTimeFormat.class);
Date date = new Date();
when(serverFormat().parse(any())).thenReturn(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T17:26:30.117

您可以使用 GwtMockitoTestRunner 来运行您的单元测试。这应该可以解决您的问题。

```
@RunWith( GwtMockitoTestRunner.class )
public class TestClass
{
  ...
} 
```

# vb.net - 远程服务器返回错误：(403) Forbidden。HttpWebRequest 响应错误

> ID：12907967
> 
> 赞同：1
> 
> 时间：2012-10-16T05:18:50.427
> 
> 标签：vb.net, httpwebrequest

因此，在查找了一些东西之后，我想我已经弄清楚为什么我不断收到以下错误：“远程服务器返回错误：(403) Forbidden。”

这是代码：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    ' Set the initial parameters
    Dim UserID As String = TextBox1.Text ' Username
    Dim PWord As String = TextBox2.Text ' Password
    Dim domain As String = "https://pinterest.com/login/?next=%2F"
    Dim encoding As New System.Text.ASCIIEncoding
    Dim CookieC As New Net.CookieContainer

    ' Use the appropriate HTML field names to stuff into the post header
    Dim PostData As String = _
        "email" & UserID & _
        "&password=" & PWord ' Note: where txtUName & txtPWord are the field names
    Dim Data() As Byte = encoding.GetBytes(PostData)

    ' Initialise the request
    Dim LoginReq As Net.HttpWebRequest = Net.WebRequest.Create(domain) ' Login location taken from the form action
    With LoginReq
        .KeepAlive = False
        .Method = "POST"
        ' Note: if the page uses a redirect if will fail
        .AllowAutoRedirect = False
        .ContentType = "application/x-www-form-urlencoded"
        .ContentLength = Data.Length
        ' Set empty container
        .CookieContainer = CookieC
    End With

    ' Add the POST data
    Dim SendReq As IO.Stream = LoginReq.GetRequestStream
    SendReq.Write(Data, 0, Data.Length)
    SendReq.Close()

    ' Obtain the response
    Dim LoginRes As Net.HttpWebResponse = LoginReq.GetResponse()

    ' Retreive the headers from the request (e.g. the location header)
    Dim Redirect As String = LoginRes.Headers("Location")
    ' Add any returned cookies to the cookie collection
    CookieC.Add(LoginRes.Cookies)

    ' Move to the redirected page as a GET request...
    LoginReq = Net.WebRequest.Create(domain & Redirect)
    With LoginReq
        .KeepAlive = False
        .Method = "GET"
        .ContentType = "application/x-www-form-urlencoded"
        .AllowAutoRedirect = True
        .CookieContainer = CookieC
    End With

    ' Perform the navigate and output the HTML
    LoginRes = LoginReq.GetResponse()
    Dim sReader As IO.StreamReader = New IO.StreamReader(LoginRes.GetResponseStream)
    Dim HTML As String = sReader.ReadToEnd
    If HTML.Contains("Following") Then

        MessageBox.Show("yay!")

    Else

        MessageBox.Show("no!")

    End If

End Sub 
```

我在以下行之后添加了以下代码： Dim LoginReq As Net.HttpWebRequest = Net.WebRequest.Create(domain)

上一行之后的代码：

```
LoginReq.Credentials = New System.Net.NetworkCredential(UserID, PWord) 
```

但是，以下行是问题不断发生的地方：

```
Dim LoginRes As Net.HttpWebResponse = LoginReq.GetResponse() 
```

我不知道如何解决这个问题。请帮忙！

# javascript - Three.js - 错误的轴或相机旋转

> ID：12907968
> 
> 赞同：3
> 
> 时间：2012-10-16T05:18:54.913
> 
> 标签：javascript, three.js

我正在尝试使地板水平放置，但它是直立的。我的代码有什么问题？也许相机旋转关闭？我正在使用three.js r52。

```
 camera = new THREE.PerspectiveCamera                                                                                            
        (45, window.innerWidth / window.innerHeight, 1, 10000);                                                                     
    camera.position.x = -500;                                                                                                       
    camera.position.z = 0;                                                                                                          

    scene = new THREE.Scene();

    var floorGeometry = new THREE.PlaneGeometry(1000, 1000, 1, 1);                                                                  
    var floorMaterial = new THREE.MeshBasicMaterial( {color:0x448844} );                                                            
    var floor = new THREE.Mesh(floorGeometry, floorMaterial);                                                                       

    scene.add(floor);

    controls = new THREE.FirstPersonControls(camera);                                                                             
    controls.movementSpeed = 1000;                                                                                                
    controls.lookSpeed = 0.0;                                                                                                     
    controls.lookVertical = true; 
```

![直立平面几何](../Images/e097f2b0cd341df7ac161532074aa8f3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T05:43:09.287

您的代码很好，但您必须添加它才能将其旋转 90 度。看看这个：[http](http://cssdeck.com/labs/threejsrotation/0) ://cssdeck.com/labs/threejsrotation/0 （第 18 行`floor.rotation.x = -Math.PI / 2;`：）

旋转只是一个`THREE.Vector3`类似的位置。

# search - 用于在 jsfiddle 中搜索特定术语/技术的工具？

> ID：12907969
> 
> 赞同：0
> 
> 时间：2012-10-16T05:19:09.580
> 
> 标签：search, jsfiddle

如果我想在 jsfiddle 中搜索特定概念或技术的示例，我看不到这样做的方法。

有人可以指出一个允许搜索小提琴的工具，或者如果没有别的，一个指针页面试图对小提琴中演示的各种技术和/或术语的示例进行分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:28:55.580

*jsfiddle.net*没有搜索发布代码的功能，但可以使用 Google 或其他功能强大的网络搜索引擎从单个网站搜索特定关键字。

对于 Google 示例，请使用以下搜索查询：

```
keyword site:jsfiddle.net 
```

或者对于两个关键字并且两者都必须存在：

```
"keyword1" "keyword2" site:jsfiddle.net 
```

# java - 如何从另一个班级调用 cardlayout.show？

> ID：12907971
> 
> 赞同：2
> 
> 时间：2012-10-16T05:19:17.817
> 
> 标签：java, swing, layout, jpanel, cardlayout

我正在尝试将方法 cardlayout.show 调用到下面的类中。

```
protected void makelabeltxt(final String text, GridBagLayout gridbag, GridBagConstraints c, int width, int height, final String panel) {
    final JLabel label = new JLabel(text);              
    Dimension d = new Dimension(width, height);
    gridbag.setConstraints(label, c);
    label.setFont(new Font("Sans Serif", 0, 11));
    label.setPreferredSize(d);

    label.addMouseListener(new MouseListener() {

        @Override
        public void mouseClicked(MouseEvent e) {                
            System.out.println(panel);
            fp.showPanel(panel);
            System.out.println("mouse clicked "+text);
        }

        @Override
        public void mousePressed(MouseEvent e) {
            label.setText("  " + text);
            System.out.println("mouse pressed "+text);
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            label.setText(" " + text);
            System.out.println("mouse release "+text);
        }

        @Override
        public void mouseEntered(MouseEvent e) {
            label.setText(" " + text);
            System.out.println("mouse entered "+text);
        }

        @Override
        public void mouseExited(MouseEvent e) {
            label.setText(text);

        }
    });
    add(label);
} 
```

在另一个类中，我创建了这样的方法，这是我要调用的方法。我想交换`jpanel`，但在另一个`jpanel`：下面的方法是有效的，但是当 cardlayout 显示脚本时，什么也没发生，println 脚本很好

```
public void showPanel(String panel){
    System.out.println("panel : "+panel);       
    cl.show(mainInPanel, panel);
} 
```

这就是我使用卡片布局将 JPanel 添加到 JPanel 的方式

```
public void initPanelFrm(JPanel panel, String gambar) {             
        GridBagLayout gridbag = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();
        panel.setLayout(gridbag);
        panel.setPreferredSize(new Dimension(810, 280));
        panel.setBackground(Color.white);
        makelabelimg("com/reporting/image/"+gambar+".png", 444, 23, panel);     
        panel.setVisible(false);
        mainInPanel.add(panel, gambar); 
    }

    public void initInPanel(){
        rekappenjualanpsc = new JPanel();
        initPanelFrm(rekappenjualanpsc, "rekappenjualanpsc");
        rekapbastudenganmaskapai = new JPanel();
        initPanelFrm(rekapbastudenganmaskapai, "rekapbastudenganmaskapai");
        rekapitulasisetoranmaskapai = new JPanel();
        initPanelFrm(rekapitulasisetoranmaskapai, "rekapitulasisetoranmaskapai");
        rekappenjualanpscpermaskapai = new JPanel();
        initPanelFrm(rekappenjualanpscpermaskapai, "rekappenjualanpscpermaskapai");
        rekappungutanlangsungpsc = new JPanel();
        initPanelFrm(rekappungutanlangsungpsc, "rekappungutanlangsungpsc");
        laporandetailpetugas = new JPanel();
        initPanelFrm(laporandetailpetugas, "laporandetailpetugas");
        detailpembayaranpenumpang = new JPanel();
        initPanelFrm(detailpembayaranpenumpang, "detailpembayaranpenumpang");

    } 
```

# asp.net - 从移动 asp.net 应用程序上传时将图像存储在数据库中

> ID：12907972
> 
> 赞同：0
> 
> 时间：2012-10-16T05:19:19.243
> 
> 标签：asp.net, mysql

如何实现：图像是从移动应用程序上传的，并且图像应该存储在我们的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:48:18.703

It's possible to convert the image into a byte array and store that. Then, upon retrieval, you'll have to convert the byte array back to an image. However it's more common to implement a solution as @ganesh suggests.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:36:15.990

不是将图像存储到数据库中，而是将图像保存在服务器上的一个特定公共路径中，并为每个图像指定一个唯一名称，可能是“primaryid（假设您的数据库中有图像表）+图像扩展名”并将这个唯一名称保存到另一列那张桌子的。并且每当您想从 db 表中获取图像连接公共路径和图像名称并在您的应用程序中使用它时。

# javascript - 在下划线中，如何在嵌套的 json 对象上使用每个

> ID：12907975
> 
> 赞同：0
> 
> 时间：2012-10-16T05:19:39.770
> 
> 标签：javascript, underscore.js

我有一个 json 对象

```
user = { name: "somename", personal : { age:"19",color:"dark"}}
_.each(user,function(value){ if(isNaN(value){console.log(value)} ) 
```

如何获取嵌套对象值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:32:01.383

像这样的东西会起作用。如果您期望更深的嵌套对象，请创建一个递归函数。`_.isObject(val)`是这里的关键。

```
_.each( {name: "somename", personal : { age:"19",color:"dark"}}, function(val) {
    if (_.isObject(val)) {
       _.each(val, function(v) {
            console.log(v)
       }) 
    }
}) 
```

# c# - 如何使用通用处理程序更新控件

> ID：12907976
> 
> 赞同：1
> 
> 时间：2012-10-16T05:19:42.640
> 
> 标签：c#, asp.net

我有一个母版页，其中包含带有用户控件的子页。我在这些用户控件上显示了一些来自数据库的值。我需要在固定时间间隔后更新页面；以便更改的值将反映在页面上。但是整个页面每次都会刷新。

我是通用处理程序的新手。我编写了代码以将数据放入代码隐藏文件中。有人说我可以使用通用处理程序获取数据并更新 aspx 页面中的控件。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:29:11.417

您不能只刷新`UserControl`必须与页面一起运行的内容。您可以使用`UpdatePanel`适合大多数情况且非常易于使用的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:38:30.403

您还可以使用 JavaScript/jQuery 使用 AJAX 调用为您处理此问题。这样，您不必刷新页面，只需在这些时间间隔内更新控件的值即可。UpdatePanels 可以工作，据我所知，它们非常易于使用，但它们比自己处理回调要慢。使用 UpdatePanel，您仍然会发回比必要更多的数据。使用 .js/jQuery 将允许您只与您想要的部分进行交互，而无需回发。

每个用户控件都以 html 格式呈现到页面，因此您可以在 FireBug 或 Chrome 开发工具中查看您的标记，并在脚本中进行相应的处理。您可以使用 data-* 属性或在控件上设置一个类作为“标记”来查找您要查找的内容。

如果您没有运行现有的 HTTPHandler 或 web 服务并且只使用客户端调用它们，我建议您将回调设置为 webmethods。如果您以前没有使用过它，它比听起来容易得多。

希望这可以帮助。

# jquery - 为什么我的网页在 IE8 中打不开？

> ID：12907979
> 
> 赞同：0
> 
> 时间：2012-10-16T05:19:55.270
> 
> 标签：jquery, internet-explorer-8

> **可能重复：**
> [加载网站时 IE8 崩溃 - res://ieframe.dll/acr_error.htm](https://stackoverflow.com/questions/5004428/ie8-crashes-when-loading-website-res-ieframe-dll-acr-error-htm)

当我尝试在 IE8 中打开我的网页时，它是这样的：

```
res://ieframe.dll/acr_error.htm#egtours.com,http://www.egtours.com/Eastern_Himalayas.php 
```

这是由我的网页代码中的问题还是 jQuery 冲突引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:31:56.320

看来，你的 IE 快崩溃了。更新您的 jquery 版本可能会解决您的问题。

参考：

1)[点击这里 1](https://stackoverflow.com/questions/5004428/ie8-crashes-when-loading-website-res-ieframe-dll-acr-error-htm)

2)[点击这里 2](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_xp/resieframedll-error-in-ie-8/7f657540-474f-4587-b661-c3ffbb1aed06)

# php - 在 CGridView 中显示图像标签

> ID：12907982
> 
> 赞同：0
> 
> 时间：2012-10-16T05:20:03.023
> 
> 标签：php, yii

我有编写代码来显示一个图像列的结果。不知何故，它给了我错误

我写过这样的代码。

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id' => 'photo-grid',
'dataProvider' => $model->search(),
//'filter' => $model,
'columns' => array(
    'id',
    array(
            'name'=>'user_id',
            'value'=>'GxHtml::valueEx($data->user)',
            'filter'=>GxHtml::listDataEx(User::model()->findAllAttributes(null, true)),
            ),
    array(
            'name'=>'regulation_id',
            'value'=>'GxHtml::valueEx($data->regulation)',
            'filter'=>GxHtml::listDataEx(Regulation::model()->findAllAttributes(null, true)),
            ),
    //'photo_img',
    array(
            'name' => 'Photo Img',
            'type' => 'raw',
            'value' => CHtml::image(Yii::app()->controller->createUrl('photo/loadImage', array('id'=>$model->id)),"",array('width'=>50, 'height'=>50)), 
            ),
    array(
        'class' => 'CButtonColumn',
    ),
), 
```

)); ?>

谁能帮助我如何在 CGridView 中显示图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T05:37:16.190

该级别没有 $model->id

您需要将其更改为 $data，并确保它是一个字符串，稍后将在单元格呈现时对其进行评估（如果您保留为非字符串，这意味着在创建网格之前对其进行评估）

```
'value' => 'CHtml::image(Yii::app()->controller->createUrl(\'photo/loadImage\', array(\'id\'=>$data->id)),"",array(\'width\'=>50, \'height\'=>50))', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T11:33:46.970

请试试这个，它的工作原理：

```
array(        
    'name'=>'Image_name_large',
    'value'=>'CHtml::image(Yii::app()->request->baseUrl."/uploads/vehiclesimages/".$data->Image_name_large,
     "",
     array(\'width\'=>100, \'height\'=>100))',
     'type'=>'raw',
), 
```

# matlab - 如何实现...？在给定角度的情况下找到弧范围

> ID：12907984
> 
> 赞同：2
> 
> 时间：2012-10-16T05:20:10.870
> 
> 标签：matlab, if-statement

在 MATLAB 上为我的项目实现这个。

我有一个分成 3 条弧线的圆。所以每条圆弧的角度范围是 [0,120), [120,240), [240,360) 度。

现在我有一个代码，可以在给定任何 theta 的情况下查找角度是否位于弧 A、B、C 中。

```
theta = mod(theta,360);
if theta >= 0 && theta < 120
    Arc = A;
elseif theta >= 120 && theta < 240
   Arc = B;
elseif theta >= 240 && theta < 360
   Arc = C; 
```

这工作得很好。这是我正在努力达到的情况：

圆可以旋转角度 phi。

因此，例如，如果圆顺时针旋转 30 度，我的角度范围将是 [30,150), [150,270), [270,390)

我应该如何编写我的 if 语句来处理这种情况？我的 theta 输入范围可以从 0 到无穷大，所以我尝试进行模除以得到 [30,150)、[150,270)、[270,30)

但现在我被困在如何使其泛化，以便它可以适用于范围为 [0,360) 的任何 theta 和 phi 输入的输入

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:42:49.380

如果您知道圆旋转的角度（如您所说，`phi = 30°`），那么只需使用`theta-phi`而不是`theta`. 其余代码保持不变：

```
theta = mod(theta-phi,360);
if theta >= 0 && theta < 120
   Arc = A;
elseif theta >= 120 && theta < 240
   Arc = B;
elseif theta >= 240 && theta < 360
   Arc = C; 
```

~~或者，您可以*添加*到`phi`所有角度：~~

 ~~```
theta = mod(theta,360);
ranges = mod([0 120; 120 240; 240 360])
if theta >= 0+phi && theta < 120+phi
   Arc = A;
elseif theta >= 120+phi && theta < 240+phi
   Arc = B;
elseif theta >= 240+phi && theta < 360+phi
   Arc = C; 
```~~ 

~~使用您认为最直观的任何内容；六个添加与单个添加的性能影响完全可以忽略不计。~~

**编辑：**忘记第二种方法，它太乱了。

# java - 'originalValue.length > size' 怎么会发生在 String 构造函数中？

> ID：12907986
> 
> 赞同：6
> 
> 时间：2012-10-16T05:20:15.303
> 
> 标签：java, string

下面是*String*类 的构造函数

```
public String(String original) {
int size = original.count;
char[] originalValue = original.value;
char[] v;
if (originalValue.length > size) {
    // The array representing the String is bigger than the new
    // String itself.  Perhaps this constructor is being called
    // in order to trim the baggage, so make a copy of the array.
        int off = original.offset;
        v = Arrays.copyOfRange(originalValue, off, off+size);
} else {
    // The array representing the String is the same
    // size as the String, so no point in making a copy.
    v = originalValue;
}
this.offset = 0;
this.count = size;
this.value = v;
} 
```

但是，我想知道怎么可能

```
if (originalValue.length > size) 
```

发生？评论说**'trim the bag'**，**行李**是指什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T05:22:25.473

看一下子字符串，你就会明白这是怎么发生的。

举个例子`String s1 = "Abcd"; String s2 = s1.substring(3)`。这里`s1.size()`是 1，但是`s1.value.length`是 4。这是因为 s1.value 与 s2.value 相同。这是出于性能原因（子字符串在 O(1) 中运行，因为它不需要复制原始字符串的内容）。

使用子字符串会导致内存泄漏。假设您有一个非常长的字符串，并且您只想保留其中的一小部分。如果只使用子字符串，实际上会将原始字符串内容保留在内存中。这样做`String snippet = new String(reallyLongString.substring(x,y))`可以防止您浪费内存来支持不再需要的大型 char 数组。

另请参阅[Java 中表达式“new String(...)”的目的是什么？](https://stackoverflow.com/questions/390703/what-is-the-purpose-of-the-expression-new-string-in-java)更多解释。

# mysql - 如何从Mysql表中读取数据？

> ID：12907987
> 
> 赞同：-3
> 
> 时间：2012-10-16T05:20:20.440
> 
> 标签：mysql

我有一个同样的问题，从 mysql 读取数据并将其存储在一个数组中。我有这样的桌子

```
id     engineering     science      language
_____________________________________________

1      chemical        bio           english
2      electrical      chemistry     malay 
3      mechanical      astronomy     spanish 
```

例如，如何读取工程中的所有数据并将其存储在数组中？我可以在 PHP 中做任何散列，或者关联数组已经包含这个散列函数。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:28:07.740

使用[MySQLi](http://php.net/manual/en/book.mysqli.php)的准系统示例：

```
// connect to your database
$mysqli = new mysqli("hostname", "username", "password", "database");
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

// setup your query
$query = "SELECT * FROM engineering ";
$results = array();
// execute your query
if ($result = $mysqli->query($query)) {
    // the query was successful; iterate through each result fetching an
    // associative array and add it to the `$results` list
    while ($row = $result->fetch_assoc()) {
        $results[] = $row;
    }
    $result->free();
}
$mysqli->close();

// process all results in `$results` array! (simple output)
foreach ($results as $result) {
    echo $result['id'] . ' ' . $result['engineering'] . '<br />';
} 
```

# javascript - Javascript cookie 未创建

> ID：12907988
> 
> 赞同：1
> 
> 时间：2012-10-16T05:20:25.277
> 
> 标签：javascript, html, cookies

大家好，我正在尝试创建 cookie，但没有成功。这是我的站点代码，我不知道为什么我无法获取我创建的 cookie？

添加了编辑站点的完整代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>yensdesign.com - How to create a stuning and smooth popup in jQuery</title>
    <link rel="stylesheet" href="general.css" type="text/css" media="screen" />
    <script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script>
    <script src="popup.js" type="text/javascript"></script>
    <script type="text/javascript">
        function setCookie(name,value,days)
        {
            var date=new Date();
            var exdays = days*24*60*60*1000;
            date.setDate(date.getDate() + exdays);
            var c_value=escape(value) + ((days==null) ? "" : "; expires="+date.toUTCString());
            document.cookie=name + "=" + c_value;
        }

        function getCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }

        function deleteCookie(name) {
            setCookie(name,"",-1);
        }
    </script>
</head>
<body onload="setCookie('myCookie', 'myValue', 1);">
    <center>
        <a href="http://www.yensdesign.com"><img src="logo.jpg" alt="Go to yensdesign.com"/></a>
        <div id="button"><input type="submit" value="Press me please!" /></div>
        <div id="button"><input type="submit" value="Cookie!" onclick=getCookie('myCookie'); /></div>
    </center>
    <div id="popupContact"></div>
    <div id="backgroundPopup"></div>
</body>
</html> 
```

以及似乎不起作用的cookie创建：

```
<body onload="setCookie('myCookie', 'myValue', 1);"> 
```

那么这里的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:39:16.790

试试这个代码：

```
<!DOCTYPE html>
<html>
<head>
<script>
       function setCookie(name,value,days) {
            if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
            }
            else var expires = "";
            document.cookie = name+"="+value+expires+"; path=/";
        }

        function getCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }

        function deleteCookie(name) {
            setCookie(name,"",-1);
        }

        function clickMe() {
           alert(getCookie('myCookie'));
        }
</script>
</head>

<body onload="setCookie('myCookie', 'myValue', 1);">
<input type="button" onClick="clickMe()" value="test" />
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:53:36.560

这里的问题是**cookie 不能在 Chrome 本地工作**！用 Firefox 试过，效果很好。如果您想查看它的实际效果，您必须将文件上传到服务器或本地主机并查看它在 Chrome 中的工作方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T05:33:03.127

试试这个代码

```
function setCookie(name,value,days)
{
var date=new Date();
var exdays = days*24*60*60*1000;
date.setDate(date.getDate() + exdays);
var c_value=escape(value) + ((days==null) ? "" : "; expires="+date.toUTCString());
document.cookie=name + "=" + c_value;
}    

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(';');
 for (i=0; i < ARRcookies.length;i++)
{
x=ARRcookies[i].substr(0,ARRcookies[i].indexOf('='));
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
x=x.replace(/^\s+|\s+$/g,"");
if (x==c_name)
{
return unescape(y);
}
}
}

function deleteCookie(name) {
        setCookie(name,"",-1);
    }

    function clickMe() {
       alert(getCookie('myCookie'));
    } 
```

[检查小提琴](http://jsfiddle.net/pintu31/cqQtU/1/)

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# php - 从一个页面获取 HTML 数据属性或 ID 值并作为 PHP 变量传递到另一个页面

> ID：12907990
> 
> 赞同：0
> 
> 时间：2012-10-16T05:20:30.317
> 
> 标签：php, html, variables, attributes, anchor

我有一个这样的锚标签：

```
<a href="javascript: void(0);" data-trackid="'.$row['track_id'].'" class="edit_button edit_track" id="'.$row['track_id'].'">Edit</a> 
```

我需要获取 ID 或 DATA 属性值并将其作为 PHP 变量发送到另一个页面，以便我可以将其回显。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:41:29.153

你在thickbox中有一个名为LoadUrl的选项......如果我没有错，你可以使用它......

查询

```
 $('element_to_pop_up').bPopup({
        contentContainer:'.content',
        loadUrl: 'urphppage.php?id='+ $('.edit_track').attr('id') // url to your page with the id value
    }); 
```

PHP(urphppage.php)

```
$id=$_GET['id'];  // get the id value
echo $id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:34:05.623

If you are using `thickbox` you can do something like example 4a on [http://dinbror.dk/bpopup/](http://dinbror.dk/bpopup/)

```
$('element_to_pop_up').bPopup({
        contentContainer:'.content',
        loadUrl: 'somepage.php?id='+$('.edit_track').attr('id') //Uses jQuery.load()
}); 
```

# .net - 为独立游戏创建 Xbox 360 游戏模板时出错？

> ID：12907994
> 
> 赞同：0
> 
> 时间：2012-10-16T05:21:28.970
> 
> 标签：.net, visual-studio-2010, visual-studio, xna, xbox360

我想看看为 Xbox 编写独立游戏有多难。但是，安装 XNA Game Studio 后我什至无法创建模板。

我只是得到

> 创建子项目“ProjectName”时遇到错误
> 
> 对象引用未设置为对象的实例

然后创建的项目只是一个空白项目。这有什么问题？我尝试重新安装游戏工作室并从 Visual Studio 2010 创建它，虽然我也安装了 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:31:00.250

Turns out I had two sets of XNA installed. I had "XNA 4.0" and "XNA 4.0 Refresh". Not sure why they didn't detect each other as installed. To fix it though, I uninstalled both(including redistributables) and did a fresh install with the latest version available from Microsoft. Everything worked fine afterwards

# java - 找到一个数字的最少硬币数量

> ID：12907997
> 
> 赞同：4
> 
> 时间：2012-10-16T05:21:44.243
> 
> 标签：java, permutation

> **可能重复：**
> [最适合给定金额的硬币](https://stackoverflow.com/questions/12667721/most-optimal-coin-fit-for-a-given-sum-of-money)

我正在复习一些练习面试问题，这个问题一直让我感到困惑。这是问题：

> 给定硬币 1c、7c、13c 和 19c 返回一个字符串，其中所需硬币的数量最少 > 以表示 X 的输入。

现在，当它使用 1c、5c、10c 和 25c 等简单面额时，我已经很容易地解决了这个问题。这只是一个简单的贪心算法。为此，我认为这将是某种排列问题，但我不确定如何获得最小值。有任何想法吗？这是我拥有的一些伪代码：

```
String coinDenominations(double amount, String coins)
{
    if(amount > .19) coinDenominations(amount - .19, coins + "19 ");
    if(amount > .13) coinDenominations(amount - .13, coins + "13 ");
    if(amount > .07) coinDenominations(amount - .07, coins + "7 ");
    if(amount > .01) coinDenominations(amount - .01, coins + "1 ");
    if(amount == 0) System.out.println(coins);
} 
```

我对排列很生疏，但我认为这会输出可能的组合。我怎么会找到最小的金额呢？有没有更好的非递归方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:47:24.807

我认为可以这样做。

金额为 x。硬币是 1c、7c、13c 和 19c。

算法如下。

x = x*100；

需要_19 = x/19；

y = x%19;

需要_13 = y/13；

y = y%13;

需要_7 = y/7；

y = y%7;

需要_1 = y;

total_coins = need_19 + need_13 + need_7 + +need_1；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:03:58.077

我想我们可以这样写：

```
String coinDenominations(double amount){
   int[] coinDenom = new int[] {19,13,7,1};
   int amountInCents = amount*100;
   String coinDenomString = "";
   for(int i=0; i< coinDenom.length; i++){
       coinDenomString = coinDenomString + ((int)(amountInCents/coinDenom[i])) 
                         + "of +"  coinDenom[i] + "coins";
       amountInCents = amountInCents % coinDenom[i];
   }
   return coinDenomString;
} 
```

我相信，**上面也可以转换为递归。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:05:11.183

正如[这个答案](https://stackoverflow.com/questions/12667721/most-optimal-coin-fit-for-a-given-sum-of-money/12667766#12667766)中提到的，某些硬币组合可能适合贪婪算法，但不能保证贪婪会给你所有硬币组合的最佳组合。

下面是 Python（一种理想的伪代码语言）中的详尽递归解决方案。

请注意，这为您提供了排列而不是组合，但是，如果您想过滤掉重复项（就组合而言），则在创建列表后进行排序和过滤会很简单。

另请注意，对于较大的金额，这可能会相当可怕。例如，虽然像 27 或 75 这样的输入值不到一秒，但输入 1024 至少需要几分钟才能让我感到无聊并取消它）。

```
import sys

oldcount = 99999999
lst = []

def recurse (str, amt, count):
    global oldcount
    global lst
    if amt < 0: return
    if count > oldcount: return
    if amt == 0:
        if count < oldcount:
            print "====="
            lst = []
            oldcount = count
        if count == oldcount:
            lst.append (str)
        return
    recurse ("%s 19" % str, amt - 19, count + 1)
    recurse ("%s 13" % str, amt - 13, count + 1)
    recurse ("%s  7" % str, amt -  7, count + 1)
    recurse ("%s  1" % str, amt -  1, count + 1)

recurse ("", int (sys.argv[1]), 0)
#for seq in lst: print seq
print "%d permutations" % len (lst) 
```

* * *

请注意，对于面额`{1, 7, 13, 19}`（这种特殊情况），贪心算法*是*最好的，其“证明”如下^((a))：

对于 1 到 6 的任何值，你*必须*使用那么多`1`硬币，这就是贪心算法给你的。

对于 7 到 12 的任何值，您可以使用那么多`1`硬币`7`或少 7 个`1`硬币。贪心算法为您提供后一种情况，这是正确的，因为最好拿走七个`1`硬币并添加一个`7`硬币 - 它会使硬币数量减少六。

对于 13 到 18 的值，您不能使用 a`13`和 a `7`，因为这将是最小值，`20`因此您会陷入`13/1`混合或`7/1`混合（所有`1`硬币都因与上一段中相同的原因而出局 - 交换 13`1`一个硬币的`13`硬币是一个巨大的减少）。显然，13 值的最佳投注是单枚`13`硬币，但 14 可以用一个`7/7`或`13/1`（两个硬币）来实现。然后值 15 到 18 只需`1`添加硬币。

类似地，19 值是单个硬币`19`，而 20 值可以用`19/1`或表示`13/7`。从 21 到 37 的值（就在`19/19`38 的值之前）`19`加上前三段的最小组合。

因此，由于选择的值（`1`并且`7`是不同的，`7/7`== `13/1`，`7/7/7`== `19/1/1`，`13/7`==`19/1`等等），贪心算法工作得很好（我不相信这些值是随机选择的，这太方便了）。

最小硬币计数表如下：

```
Value  Count  Possibilities
    1      1  1
    2      2  1x2
    3      3  1x3
    4      4  1x4
    5      5  1x5
    6      6  1x6
    7      1  7
    8      2  7,1
    9      3  7,1x2
    :
   12      6  7,1x5
   13      1  13
   14      2  13,1 or 7x2
   15      2  13,1x2 or 7x2,1
    :
   18      6  13,1X5 or 7x2,1x4
   19      1  19
   20      2  19,1 or 13,7
   21      3  19,1x2 or 13,7,1 or 7x3
    : 
```

等等。

* * *

^((a))不是*正式*的证明，但我很确定我是对的，我会向第一个向我展示反例的人投票 20 个问题/答案（当然，前提是问题和答案不是完全垃圾- 我必须认为它们很有用，以免破坏投票过程）。

# android - 我必须在哪里调用 Bitmap.recycle()？

> ID：12907999
> 
> 赞同：1
> 
> 时间：2012-10-16T05:21:49.690
> 
> 标签：android, bitmap, out-of-memory, image-gallery

我正在开发一个 Android 3.1 平板电脑应用程序，我有一个`android.support.v4.app.Fragment`带有两个画廊的 Fragment ( )。

我将此代码用作画廊（我对两个画廊使用相同的适配器）：

```
public class ImageGalleryAdapter extends BaseAdapter
{
    private ArrayList<String> mImagesPath;
    private Context mContext;
    private ImageView.ScaleType mScaleType;
    private int mWidth;
    private int mHeight;

    public ArrayList<String> getmImagesPath()
    {
        return mImagesPath;
    }

    public void setmImagesPath(ArrayList<String> mImagesPath)
    {
        this.mImagesPath = mImagesPath;
    }

    public void addImage(String imagePath)
    {
        mImagesPath.add(imagePath);
    }

    public ImageGalleryAdapter(Context context, ImageView.ScaleType scaleType, int width, int height)
    {
        mContext = context;
        mWidth = width;
        mHeight = height;
        mScaleType = scaleType;

        mImagesPath = new ArrayList<String>();
    }

    @Override
    public int getCount()
    {
        return mImagesPath.size();
    }

    @Override
    public Object getItem(int position)
    {
        return position;
    }

    @Override
    public long getItemId(int position)
    {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        // Get a View to display image data                     
        ImageView imageView;
        if (convertView == null) { // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setLayoutParams(new GridView.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        } else {
            imageView = (ImageView) convertView;
        }

        File imageFile = new  File(mImagesPath.get(position));
        if(imageFile.exists())
        {
            BitmapFactory.Options options = new Options();
            options.inSampleSize = 32;
            imageView = new ImageView(this.mContext);
            Bitmap myBitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath(), options);
            imageView.setImageBitmap(myBitmap);

            imageView.setScaleType(mScaleType);

            // Set the Width & Height of the individual images
            imageView.setLayoutParams(new Gallery.LayoutParams(mWidth, mHeight));
        }

        return imageView;
    }
} 
```

有时，在线路上`Bitmap myBitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath());`，我收到 Out Of Memory 错误

一个画廊有一张图片，另一个画廊有三张图片。

当我转到片段时，会发生内存不足，点击后退按钮，然后我再次回到片段。

我想我需要打电话`myBitmap.recycle()`，但在哪里...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:00:44.783

当您的 convertview 不为空时，请在 else 情况下尝试：

```
} else {
    imageView = (ImageView) convertView;
    Bitmap bm = ((BitmapDrawable) imageView.getDrawable()).getBitmap();
    if (bm != null) {
        bm.recycle();
    }
} 
```

我们在谈论多少张图片和多大尺寸？您是否尝试在 onStop() 中将适配器设置为空？这也可以删除所有引用并释放内存。