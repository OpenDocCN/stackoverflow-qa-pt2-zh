# StackOverflow 问答 14497000-14497999

# php - 临时文件从 linux/apache 上的 PHP 脚本遗留下来

> ID：14497001
> 
> 赞同：1
> 
> 时间：2013-01-24T08:37:14.697
> 
> 标签：php, scripting, temp

我刚刚发布了一个客户网站，它的主要目的是分发来自其他来源的内容，因此它会定期从外部提要中提取文本、视频、图像和音频。

它还可以让客户端手动添加要分发的内容。

使用 PHP 所有这一切使得使用 copy() 从另一个服务器复制文件，move_uploaded_file() 复制手动上传的文件，它还使用 SimpleImage 图像处理类来制作多个副本，并裁剪等。

现在来解决问题：在所有这些中，一些临时文件没有被删除，它很快锁定服务器，因为当 tmp 已满时，它会导致 mysql 错误并停止页面加载。

我花了很多时间在谷歌上搜索，这让我想到了一件事：“脚本执行完毕后临时文件被删除”——这显然不是这里的情况。

我可以做些什么来确保删除脚本创建的任何临时文件？

我已经和我的服务器人员谈过，他建议运行一个每 24 小时从其中删除的 cron，我不知道这是否是一个好的解决方案，但它肯定不是解决方案，因为我认为文件应该被删除？什么可能是阻止文件被删除的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:42:35.433

不管您想出什么其他方法，cron 的想法仍然是一个不错的想法，因为您要确保 /tmp 得到清理。您可以让 cron 作业删除超过 24 小时的任何内容，而不是每 24 小时删除一次，假设这会留下足够的空间。

在脚本完成时删除临时文件。`tmpfile ()`据我所知，这仅在最初用于创建临时文件时才会发生。因此，通过其他方式在 /tmp 中创建的其他文件（并且会有许多其他方式）不会因为脚本完成而消失。

# c# - 定期发送自动电子邮件

> ID：14497005
> 
> 赞同：3
> 
> 时间：2013-01-24T08:37:40.673
> 
> 标签：c#, .net, database, postgresql

我有带有 PostgreSQL 数据库的 Windows 服务器。我在数据库中存储了包括合同到期日在内的员工数据。我想在到期日前 30 天为每位员工发送一封自动电子邮件。（每个员工都有一个电子邮件帐户）。最好的方法是什么？我正在考虑执行以下操作，请您告知这是否是最好的方法，如果我需要回答这些问题：

*   构建 WinForm C# 应用程序：
*   每天访问 PostgreSQL（我知道如何处理 Postgresql，但是`how to make it per each new day (schedule task?)`？）

*   将机器日期与数据库中的所有到期日期进行比较

*   如果差值等于或小于 30 天，则会向员工发送自动邮件。( `how to send emails using C#`}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:48:59.027

正如@Middas 建议的那样，编写一个简单的控制台应用程序将负责在应用程序之外进行调度。

一个简单的控制台应用程序就可以了，由 Windows 调度程序或第 3 方调度程序调度就可以了。

对于发送电子邮件，您可以

*   使用 .net 提供[的 SMTPClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)命名空间来发送电子邮件
*   使用第三方服务，如[Amazon SES](http://aws.amazon.com/ses/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:47:43.993

您可以使用[Quartz.NET](http://quartznet.sourceforge.net/)来安排负责发送电子邮件的方法。

Quartz.NET 使用 cron 时间来配置何时执行您的代码。

在网站上有一些例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T08:52:49.653

创建 .Net 控制台应用程序会不会很容易，该应用程序会触发对数据库的查询，该数据库会带来合同在 30 天内到期的所有员工记录。使用 Windows 调度程序将其安排在每天的特定时间运行。

现在要使用 C# 发送电子邮件，请尝试以下代码。

```
MailMessage mailObj = new MailMessage(strFrom, strTo, strSubject, strBody);
SmtpClient SMTPObj = new SmtpClient(IPAddress,port);
try
{
  SMTPObj.Send(mailObj);
}
catch (Exception ex)
{
  //Handle Exception
} 
```

希望对米林有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T08:43:18.420

我会按照您的建议使用 Windows 服务。将服务计时器设置为 30 秒，然后检查时间是否在 00:00:00 和 00:00:00 之间，发送电子邮件。这意味着您不必在需要时尝试`elapsed`触发事件。

# vb.net - 如何在VB中用Excel打开一个xls文件

> ID：14497006
> 
> 赞同：5
> 
> 时间：2013-01-24T08:37:41.480
> 
> 标签：vb.net, excel

那么，我怎样才能告诉系统为我打开文件呢？我试过了

```
Shell(ExcelFilePath) 
```

但是尽管文件路径来自 OpenFileDialog.FileOk，但引发了异常

所以，我正在尝试使用 Excel.Application，是否可以用它打开文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T08:44:55.837

这将使用 Excel 打开文件：

```
Process.Start("EXCEL.EXE", """C:\Folder\file.xls""") 
```

作为第二个字符串，该过程的参数。请参阅[MSDN 文档](https://msdn.microsoft.com/en-us/library/h6ak8zt5(v=vs.110).aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T08:46:37.010

尝试这个

```
System.Diagnostics.Process.Start("FilePath") 
```

它将在与其关联的应用程序中打开文件。

# php - .htaccess 重定向 url.com/file.php?=$terms 到 newurl.com/search.php?=$terms 如果推荐人不是 site.com

> ID：14497007
> 
> 赞同：1
> 
> 时间：2013-01-24T08:37:41.163
> 
> 标签：php, apache, .htaccess, rewrite

我有 2 个视频网站，其中一个是视频主机 ( `url.com`)，另一个是 wordpress 前端 ( `newurl.com`)，我在其中嵌入了来自我的视频主机的视频。

我想要做的是禁用对视频主机内容的任何访问，除了我的主站点仍然能够嵌入文件。

我想通过使用 htaccess 并使用规则来仅在 reffer 是 newurl.com 时才允许访问，否则如果没有referrer 或其他东西。

但问题是视频嵌入会在嵌入的视频播放器中显示相关视频，而用户可以从那里获得指向视频主机的链接。

我想做这样的事情。

当用户点击相关视频时，他会被重定向到如下内容：

```
url.com/player/cbplayer/plugins/related/related_videos.php?vid=%%VID ID%%&title=%%VIDEO TITLE%%&tags=%%VIDEO TAGS%% 
```

我想像这样将他重定向到我的主站点

```
newurl.com/search.php?=%%VIDEOTITLE 
```

或者如果不能使用视频标题，那么至少在`related_videos.php`其自身之后的整个字符串

基本上，我想将我的用户从 videohost url 重定向到我的主站点本身的搜索表单。

此外，在使用推荐人时，我希望确保它不会从我的主站点内容重定向嵌入

嵌入文件称为`embed.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:00:36.393

如果我对您的理解正确，这将匹配所有点击`related_videos.php`（带有标题查询字符串），但仅当推荐人不是`your.domain`并将它们重定向到`thatnewurl.com/search.php?title=oldtitle`

```
RewriteEngine on

RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !your\.domain 
RewriteCond %{QUERY_STRING} (^|&)title=(.*?)(&|$) [NC]
RewriteRule related_videos\.php http://thatnewurl.com/search.php?title=%2 
```

# c - 如果达到最大大小或单击“输入”，如何告诉 scanf 索引字符？

> ID：14497014
> 
> 赞同：0
> 
> 时间：2013-01-24T08:38:16.247
> 
> 标签：c

我想索引一个单词，但如果数组的大小小于大小限制，我希望数组的大小根据输入的单词进行更改。这是我的代码：

```
#include <stdio.h>
#define SIZE 10
int main(void)

{
    int index;
    char wordToPrint[SIZE];
    printf("please enter a random word:\n");
    for (index = 0; index < SIZE; index++)
    {
        scanf("%c", &wordToPrint[index]);
    }
    for (index = 0; index < SIZE; index++)
    {
        printf("%c", wordToPrint[index]);
    }

    return 0;
} 
```

我应该添加什么来定义它？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:41:43.090

```
#include <stdio.h>
#define SIZE 10
int main(void)
{
    int index;

    // declare a pointer variable to point to allocated space
    char *wordToPrint;

    printf("enter the size of string MAX is 10");
    scanf("%d",&index);
    if(index > 10){ 
       printf("out of allowd limit");
    } else {

        // call malloc to allocate that appropriate number of bytes for the array
        wordToPrint= (char *)malloc(sizeof(char)*index);      // allocate

        // use [] notation to access array buckets
        for(i=0; i < index; i++) 
        {
           scanf("%c",&wordToPrint[i]);
        }
        for (i= 0; i< index; i++)
        {
           printf("%c", wordToPrint[i]);
        }
        free(wordToPrint);
    }

    return 0;
 } 
```

动态内存分配只能通过 malloc 或 calloc 函数在 c 中完成，您可以要求用户输入最大大小并检查是否超过允许的限制，否则您将获得具有用户输入值大小的数组，例如如果用户输入 5，您会得到大小为 5 个字符的数组

# javascript - 如何将 removePostDataItem 与新的 jqgrid 一起使用

> ID：14497015
> 
> 赞同：1
> 
> 时间：2013-01-24T08:38:26.233
> 
> 标签：javascript, jquery, jqgrid

所以我在升级到新的 jqGrid 时遇到了问题。在我使用 3.8.2 之前，我使用的是 setPostDataItem 和 removePostDataItem，现在这些功能已被弃用，我想使用新功能。所以我在这里找到了解决方案，而不是 setPostDataItem：[jQuery jqGrid trigger reloadGrid](https://stackoverflow.com/questions/2901587/jquery-jqgrid-trigger-reloadgrid)。

但我找不到 removePostDataItem 的解决方案。我发现[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:upgrade_from_3.8_to_4.0.0](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:upgrade_from_3.8_to_4.0.0)，但我不知道要写什么来实现它。

那么我需要写什么呢？

```
$("#main_grid").removePostDataItem("user","admin"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:55:59.010

所以我找到了一个解决方案：

```
delete $("#main_grid").setGridParam({postData: "user"}); 
```

朱皮！

# java - jni编译cpp和c有什么区别？

> ID：14497017
> 
> 赞同：1
> 
> 时间：2013-01-24T08:38:28.423
> 
> 标签：java, java-native-interface

测试.c

```
#include <string.h>
#include <jni.h>
#include <android/log.h>
#include <stdio.h>
#include <stdlib.h>

jstring Java_com_test_b_hello_hellostr( JNIEnv* env,jobject thiz )
{
    return (*env)->NewStringUTF(env, "Hello from JNI !");
} 
```

这个编译没问题。但是当我更改为 test.cpp 时，编译有错误。

libb/jtest.cpp：在函数 '_jstring* Java_com_test_b_hello_hellostr(JNIEnv*, _jobject*)' 中：jtest.cpp:108：错误：'->' 的基本操作数具有非指针类型 '_JNIEnv' make[1]: *** [out/.../obj/SHARED_LIBRARIES/libdrvb_intermediates/jtest.o] 错误 1

为什么会这样？app和c有区别吗？

我检查系统 jni.h 文件：`alps\dalvik\libnativehelper\include\nativehelper\jni.h` .

```
.
    void        (*ReleaseStringChars)(JNIEnv*, jstring, const jchar*);
    jstring     (*NewStringUTF)(JNIEnv*, const char*);
    jsize       (*GetStringUTFLength)(JNIEnv*, jstring);
...
    jstring NewStringUTF(const char* bytes)
    { return functions->NewStringUTF(this, bytes); }
..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:53:43.427

C++ 的 JNI 与普通 C 的 JNI 略有不同。

在普通的 C 中，使用是正确的：`(*env)->SomeFunction(env, arg, arg, ...)`

请注意，您必须取消引用`env`，并且该函数的第一个参数始终是`env`.

在 C++ 中，情况有所不同。你用： `env->SomeFunction(arg, arg, ...)`

您不需要取消引用`env`，也不会`env`作为第一个参数传递。

对 Java 的实际调用将是相同的。Java 不关心你是使用纯 C 还是 C++ 来做 JNI 的东西。

这是使用 C++ 进行 JNI 的快速介绍。

[http://journals.ecs.soton.ac.uk/java/tutorial/native1.1/implementing/cpp.html](http://journals.ecs.soton.ac.uk/java/tutorial/native1.1/implementing/cpp.html)

# asp.net-web-api - webapi actionfilters，如何在使用从基类型继承的不同参数类型时注入值

> ID：14497021
> 
> 赞同：0
> 
> 时间：2013-01-24T08:38:56.783
> 
> 标签：asp.net-web-api, action-filter, actionfilterattribute

我有一个基本请求类型..

类 RequestBase

```
{
   public string inputId;
   public string derivedid;
} 
```

和继承的类型..

```
class RequestA : RequestBase
{
   public string name;
} 
```

和

```
class RequestB : RequestBase
{
   public string color;
} 
```

我有一个 webapi 服务，有些动作采用 RequestA 的输入参数，有些采用 RequestB

```
[HttpPost]
 [MyFilter]
 [ActionName("Process1")]
  public HttpResponseMessage Process1(RequestA request)
  {  
      //do something with request.derivedId
  }

 [HttpPost]
 [MyFilter]
 [ActionName("Process2")]
  public HttpResponseMessage Process2(RequestB request)
  {  
      //do something with request.derivedId
  } 
```

我有一个 actionfilter 从请求中获取 inputId 并生成一个derivedId

```
 public override void OnActionExecuting(HttpActionContext actionContext)
    {
        RequestBase request = (RequestBase)actionContext.ActionArguments["request"];
        string inputId = request.inputId;

        string derivedId = inputId + "123";
        // ?? somehow inject derivedId back into the actionContext so that my controller methods can access?
    } 
```

正如我上面的评论所述，我想填充 derivedId 字段并让我的控制器方法可以访问它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:06:06.303

此线程中已经描述了这个问题的一些解决方案 - 其中一个应该适合您：

[ASP.NET MVC 将对象从自定义操作筛选器传递到操作](https://stackoverflow.com/questions/1809042/asp-net-mvc-pass-object-from-custom-action-filter-to-action)

# python - 如何在 django admin 中管理权限表

> ID：14497022
> 
> 赞同：5
> 
> 时间：2013-01-24T08:38:58.457
> 
> 标签：python, django, web, django-admin

![在此处输入图像描述](../Images/42f11c9ecae7f2758a9405f2bb8820fc.png)

当我使用时，`django admin`我可以在仪表板上获得管理入口吗？如上图所示，如何获得表管理入口？我正在使用 django 1.4 。谢谢你的时间。`Groups``Users``Permission`

**编辑：**

```
from django.contrib import admin
from django.contrib.auth.models import Permission, ContentType

class PermissionAdmin(admin.ModelAdmin):

    fieldsets = [  
        (None,          {'fields': ['name','codename']}),  

    ]  
    list_display = ('name', 'codename')      

class ContentTypeAdmin(admin.ModelAdmin):

    fieldsets = [  
        (None,          {'fields': ['app_label','model']}),  
        ('More info',   {'fields': ['name','codename'], 'classes': ['collapse']}),  

    ]  
    list_display = ('app_label', 'model')         

admin.site.register(Permission, PermissionAdmin)
admin.site.register(ContentType, ContentTypeAdmin) 
```

编辑后，我得到了。

```
django.core.exceptions.ImproperlyConfigured: 'ContentTypeAdmin.fieldsets[1][2]['fields']' refers to field 'codename' that is missing from the form. 
```

ContentType 可以`onetomany`给 Permission。在admin中如何处理这两个模型？在我添加之前它工作正常：

```
('More info',   {'fields': ['name','codename'], 'classes': ['collapse']}), 
```

**编辑2：** ![在此处输入图像描述](../Images/c11a989b2ad50e49d30293ccc1551118.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:13:03.457

我不确定您如何想象 ui 的行为或外观，但您可以这样做：

```
from django.contrib.auth.models import Permission

class PermissionAdmin(admin.ModelAdmin):
    model = Permission
    fields = ['name']

admin.site.register(Permission, PermissionAdmin) 
```

也许您可以从那里拿起它并根据需要进行调整。

# database - 在 postgresql 中结合 UNIQUE 和 EXCLUSION 约束

> ID：14497023
> 
> 赞同：0
> 
> 时间：2013-01-24T08:39:05.283
> 
> 标签：database, postgresql, constraints

当谈到数据库时，我是真正的初学者，所以任何建议都是适用的。在 PostgreSQL 中必须有一种结合`UNIQUE`约束和约束的方法。`EXCLUSION`. 下面我写的不正确。（在语法上是肯定的，在逻辑上也是可能的）

我正在努力实现以下目标：

*   单个身份验证器在给定时间可以属于 1 个用户 ID。*（所以`UNIQUE`需要一个约束）*
*   但是身份验证器可以在不同的时间属于不同的 useridx *（因此需要某种`EXCLUSION`约束）*
*   不同的时间意味着在validform和validuntil的区间之外。

我试过的：

```
 ALTER TABLE authentication 
  ADD CONSTRAINT lenient_constraint UNIQUE (useridx, authenticator)
  EXCLUDE USING gist(validfrom WITH =, validuntil WITH &&); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:44:01.567

如果您问是否可以在单个 alter table 语句中执行此操作，答案是否定的。如果您问是否可以针对同一张桌子进行操作，答案是肯定的。见下文：

```
mydb# alter table test add unique(test);
NOTICE:  ALTER TABLE / ADD UNIQUE will create implicit index "test_test_key" for table "test"
ALTER TABLE
mydb# alter table test add exclude (test with =);
NOTICE:  ALTER TABLE / ADD EXCLUDE will create implicit index "test_test_excl" for table "test"
ALTER TABLE 
```

# javascript - 以下内容的 javascript 等价物是什么？

> ID：14497028
> 
> 赞同：-9
> 
> 时间：2013-01-24T08:39:15.257
> 
> 标签：javascript, jquery, jquery-ui

如何使用 vanilla javascript 来实现这一点？以下使用 jQuery 语法。

```
$(function(){
    $("ul.dropdown li").hover(
        function(){
            $(this).addClass("hover"); 
            $('ul:first',this).css('visibility', 'visible');
        },
        function(){
            $(this).removeClass("hover");
            $('ul:first',this).css('visibility', 'hidden');
        }
    );
    $("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; "); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:50:52.363

这样的事情是相似的：

```
document.body.addEventListener(
    'load',
    function(){
        var elements = document.querySelectorAll("ul.dropdown li");
        for(var i = 0, l = elements.length; i < l; i++){
            var e = elements[i];
            e.addEventListener('mouseover', function(e){
                e.setAttribute('class', e.getAttribute('class') + ' hover');
                document.querySelector("ul.dropdown li").style.visibility = 'visible';
                e.style.visibility = 'visible';
            })
            e.addEventListener('mouseout',  function(e){
                e.setAttribute('class', e.getAttribute('class').replace(' hover',''));
                document.querySelector("ul.dropdown li").style.visibility = 'hidden';
                e.style.visibility = 'hidden';
            })
        }
        document.querySelector("ul.dropdown li ul li:has(ul)").querySelector("a:first").innerHTML += " &raquo; "; 
    }
) 
```

（但不一样）

# python - python json编码-缺少（和'-urllib2.open（）以HTTP错误400结尾

> ID：14497030
> 
> 赞同：0
> 
> 时间：2013-01-24T08:39:25.467
> 
> 标签：python, json, urllib2

我正在将 40kb 的字典和列表字典编码为 json，然后通过 http 将其推送到 nosql 数据库。我已经使用了 jsonpickle.encode 和 json.dumps 模块来编码我的字典的内容，但是两者都导致了一个 http 错误。我尝试手动卷曲有问题的代码部分，结果是错误“-bash: syntax error near unexpected token `('”

这是一些示例代码：

```
import urllib2 , jsonpickle
url = "http://amazonaws.com/server/%s/_create" % item
data = jsonpickle.encode( some_dict_of_dicts_and_lists ) # also tried json.dumps here.
try:
    req = urllib2.Request ( url , data , { 'Content-Type' : 'application/json' } )
    f = urllib2.urlopen ( req )
except Exception as e:
    print "Error: %s" %e 
```

以上适用于将我的字典的某些部分输入到我的 nosql 数据库中。但是，当我通过字典的其他部分发送时，这会打印“错误：HTTP 错误 400：错误请求”。这对我来说意味着数据变量/字符串中的某些内容没有正确编码。为了获得 CURL 对此问题的响应，我尝试使用 CURL 处理以下代码：

```
item_id = item_dictionary [ 'id' ]
data = jsonpickle.encode( some_dict_of_dicts_and_lists ) # also tried json.dumps here.

command = 'curl -XPOST "http://amazonaws.com/server/%s/_create" -d '"%s"' % ( nsn_id , data )
os.system(command) 
```

这会产生错误“sh: -c: line 0: syntax error near unexpected token `('”

如果我尝试在命令行中手动键入 curl 命令，则会收到以下一组错误：
curl: (6) Could not resolve host: material; 提供节点名或服务名，或未知
curl：（6）无法解析主机：项目；提供节点名或服务名，或未知
curl: (6) 无法解析主机：的；提供节点名或服务名，或未知
curl：(3) [globbing] 位置 146 处不匹配的右大括号/括号
{"error":"MapperParsingException[Failed to parse]; 嵌套：JsonParseException[在 VALUE_STRING\ 中的意外输入结束n 在 [来源：[B@2ff246ab；行：1，列：6519]]；“，”状态“：400}

所以：
1）有没有更好的方法来确保json编码过程捕获使所有括号和单引号在它们前面用'\'格式化？我应该对所有这些进行替换吗？

2) 有没有一种好方法可以使用 urllib2 以更详细的方式找出导致此错误的原因，或者我是否需要从命令行执行 CURL 以获得 bash 类型错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:42:00.620

要回答您的两个问题：

1) `json.dumps`- 假设您传递给它有效的输入 - 将始终创建一个表示有效 JSON 对象的字符串。如果您传递无效输入，它将引发异常。Python 的`json`模块使用非常广泛，如果存在可能导致它吐出格式无效的 JSON 字典的错误，那么现在肯定会知道（并修复）。

2) 您收到 HTTPError 是因为 Web 服务器正在返回一个[HTTP 状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)为 400 的页面以响应您的请求。不过，页面正文中可能还有一些内容，并`urllib2`没有丢弃。您可以调用`.read()`HTTPError 的方法来获取页面上的任何内容，而不是像现在一样只看到状态代码（有时这不足以理解您做错了什么）。

大多数 Web API 会在吐出错误时向您返回某种有用的解释`400 - Bad Request`，例如一条消息，告诉您在请求中遗漏了哪些参数。放入`print e.read()`你的异常块会让你看到这一点，并且可能会让你解决你当前的问题。

# php - 语言构造不能通过变量函数调用是什么意思？

> ID：14497031
> 
> 赞同：3
> 
> 时间：2013-01-24T08:39:25.613
> 
> 标签：php

> **可能重复：**
> [语言结构和 PHP 中的“内置”函数有什么区别？](https://stackoverflow.com/questions/1180184/what-is-the-difference-between-a-language-construct-and-a-built-in-function-in)

我在php编程书上看过`"Language construct such as`echo() `and`isset()`can not be called through variable function"` 是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:46:17.550

`echo()`和`isset()`（只是为其他 PHP 语言结构挑选那些示例）不能在变量函数中调用。

这是一个变量函数的例子。

```
function foo() {
    echo "foo";
}

$func1 = 'foo';
$func1();        // "foo" will be output 
```

现在让我们尝试一下`echo`：

```
$func2 = 'echo';
$func2();        // "Fatal error: Call to undefined function echo() on line 10" 
```

那是因为`echo()`不是函数，而是语言构造。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T08:48:09.487

php中的任何函数，无论是内置函数还是用户函数，都会存储在php内部的一个HashTable中。

当你调用一个函数时，它通过函数名在 HashTable 上找到函数。

但是 echo()、isset() 不是函数，所以在函数 HashTable 中是不存在的。所以“语言构造这样的asecho()andisset()不能通过变量函数调用”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T08:46:53.910

这意味着你不能这样做：

```
$f = 'echo';
$f('hello world'); 
```

因为`echo`不是函数（`sprintf`例如）而是语言符号（`if`例如）

# ajax - 如何将 Low Search 与 Ajax 集成？

> ID：14497034
> 
> 赞同：1
> 
> 时间：2013-01-24T08:39:29.163
> 
> 标签：ajax, search

我不知道如何在低搜索中实现 Ajax。

目前在 Low Search 文档中没有关于如何使用 Low Search 进行 Ajax 的文档。

我已经仔细阅读了表达式引擎 stackexchange 中的一些答案（第二个问题是我的）

[http://expressionengine.stackexchange](http://expressionengine.stackexchange) ... [http://expressionengine.stackexchange](http://expressionengine.stackexchange) ...

但答案非常神秘，不显示任何低搜索表单和结果标签示例，并且对使用 Ajax 实现低搜索的新手没有真正帮助。

有人有关于如何在 Ajax 中使用 Low Search 的分步教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T15:47:43.850

为了完整起见，只需在此处添加此有用的链接。这是 Low 关于如何做到这一点的“要点”； [https://gist.github.com/lodewijk/4632695](https://gist.github.com/lodewijk/4632695)

# java - Java Servlet 类路径不起作用 - Win 7 64 位

> ID：14497035
> 
> 赞同：-1
> 
> 时间：2013-01-24T08:39:29.400
> 
> 标签：java, jsp, servlets, classpath

我是一个新的 JAVA 学习者，我正在使用 CMD 将 java 文件编译成类文件。昨天我开始使用 JAVA Servlet。但是 CMD 给了我错误。

> servlet.java:2：错误：包 javax.servlet 不存在导入 javax.servlet.http.*；

然后我搜索了谷歌，每个主题都说 - 给你 CLASSPATH 。

环境变量 --> 路径 --> 编辑

> C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\servlet-api.jar;C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\jsp-api.jar;

完毕。但是 CMD 再次给了我同样的错误。

代码 -

```
import java.io.*;
import javax.servlet.http.*;
import javax.servlet.*;

public class helloworld extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.print("Hello World from GET method ");

    }

    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.print("Hello World from POST method ");

    }
} 
```

javac servlet.java 再次出现同样的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:17:16.973

使用 java -cp [libraries] [other options] [file(s) to compile] 将这些库设置到编译器类路径中

# javascript - javascript charting - 带有两个 Y 轴的 nvd3 折线图

> ID：14497040
> 
> 赞同：10
> 
> 时间：2013-01-24T08:39:45.407
> 
> 标签：javascript, d3.js, nvd3.js

谁能建议我一种将两个 Y 轴分配给 nvd3 折线图的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:38:37.813

我使用`multiChart`并`nvd3`以最小的努力定制了它来实现这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T11:49:19.660

`linePlusBarChart`从示例中查看`nvd3`示例。

# google-app-engine - 在 Google CDN 上托管我自己的文件

> ID：14497042
> 
> 赞同：0
> 
> 时间：2013-01-24T08:39:47.260
> 
> 标签：google-app-engine, cdn, blobstore

我想通过 CDN 托管图像来提高我网站的性能。我的很多访客都在连接不良的地方，所以我想尽量减少延迟。Google Blobstore 对我很有吸引力，因为它还可以调整图像大小。

google blobstore 是否像 CDN 一样工作，文件由离您很近的服务器提供服务？

例如这个裁剪的图像：[https ://lh3.ggpht.com/vNEsJryv2f0D1uqmusa8EdTDd5-CIiqz8AkTscCb6o5E493aM1pPxS3Zm_iX1c1UuZw2oR2lx6GwKUoUk0FYB6uG5A=s131-c](https://lh3.ggpht.com/vNEsJryv2f0D1uqmusa8EdTDd5-CIiqz8AkTscCb6o5E493aM1pPxS3Zm_iX1c1UuZw2oR2lx6GwKUoUk0FYB6uG5A=s131-c)

如果不是，有什么好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:14:15.793

Appengine 处理的所有请求都[通过 Google CDN](http://davepeck.org/2011/10/25/a-word-on-app-engine-caching/)。

您只需`Cache-Control`在任何响应上设置适当的响应标头，它就会被 Google CDN 缓存。您还可以[在静态文件上设置缓存](https://developers.google.com/appengine/docs/java/config/appconfig#Setting_the_Cache_Expiration)。

**更新：**

据我所知，您通过 AppEngine Image 服务提供图像，该服务在后台使用 Google 高性能图像服务。对您的图像的请求不会影响您的前端实例，它们直接由图像服务服务器提供服务，因此您只需为带宽付费。此外，此响应的缓存时间为 1 天，因此它们甚至会被下游缓存缓存，甚至可以降低您的成本并加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:25:04.330

Currently, Google App Engine servers are only located in North America, and some part in Europe. Refer to [Google Group Discussion](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/67mZ3bXIqWk).

So if you are located in other continent, your request are still routed to North America.

Currently Windows Azure has the capability to choose the region of your server. ![enter image description here](../Images/d8ee3b42db250709da934d51296dcebc.png). From my experience there is even Singapore and some countries in Middle East.

# media-queries - 移动媒体查询（智能手机和平板电脑）

> ID：14497049
> 
> 赞同：0
> 
> 时间：2013-01-24T08:39:57.733
> 
> 标签：media-queries, tablet, mobile-phones, mobile-website

我想制作我的网站的 2 个版本，一个针对台式机（PC 和笔记本电脑），另一个针对移动设备（智能手机和平板电脑）。我用谷歌搜索并阅读了一些关于媒体查询的文章。所以我把这个媒体查询放在我的设计中（主要基于这个[参考](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)）：

```
/* For mobile and smartphones */ 
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
/*style*/
}

/* For tablet */ 
@media only screen and (min-device-width : 768px) {
/*style*/ 
}

/* For iPhones */ 
@media only screen and (-webkit-min-device-pixel-ratio : 1.5), only screen and
 (min-device-pixel-ratio : 1.5) { 
/*style*/ 
} 
```

我已经在几台设备上对其进行了测试。它在移动设备和智能手机上运行良好（我在 xperia、samsung galaxy mini 和 nexus 4 等几款智能手机上进行了尝试），但显然它不适用于平板电脑（我在 nexus 7 和 Galaxy tab 上尝试过）。当我在平板电脑上打开网站时，它一直显示桌面版本而不是移动版本。知道它是如何发生的吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:44:21.937

你有没有：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

在网站的标题部分？此代码将禁用平板电脑上的缩放效果，并且您的媒体查询可能会起作用:)

让我知道！

# c# - ObservableCollection 的 Windows 8 C# 序列化。出现错误：System.InvalidOperationException

> ID：14497050
> 
> 赞同：2
> 
> 时间：2013-01-24T08:39:59.387
> 
> 标签：c#, .net, serialization, windows-8, xml-serialization

我正在尝试序列化 ObservableCollection。但我收到以下错误：让我知道如何解决这个问题？

错误：

> {System.InvalidOperationException：在 f:\TFS\New TFS\PDFReader\Posh.PdfReader.Win8\eText\Common\ApplicationSettings.cs:line 中出现反映类型 'System.Collections.ObjectModel.ObservableCollection 1.MoveNext() 的错误16 --- 从先前引发异常的位置结束堆栈跟踪 --- 在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task) 在 System.Runtime .CompilerServices.TaskAwaiter.GetResult() 在 eText.ViewModel.MainViewModel.d__a.MoveNext() 在 f:\TFS\New TFS\PDFReader\Posh.PdfReader.Win8\eText\ViewModel\MainViewModel.cs:line 268}`1[eText.DataModel.BooksDownloadedData]'. ---> System.InvalidOperationException: There was an error reflecting type 'eText.DataModel.BooksDownloadedData'. ---> System.InvalidOperationException: Cannot serialize member 'eText.DataModel.BooksDownloadedData.DownloadedBookFileDetails' of type 'Windows.Storage.StorageFile', see inner exception for more details. ---> System.InvalidOperationException: Windows.Storage.StorageFile cannot be serialized because it does not have a parameterless constructor. --- End of inner exception stack trace --- at System.Xml.Serialization.StructModel.CheckSupportedMember(TypeDesc typeDesc, MemberInfo member, Type type) at System.Xml.Serialization.StructModel.GetPropertyModel(PropertyInfo propertyInfo) at System.Xml.Serialization.StructModel.GetFieldModel(MemberInfo memberInfo) at System.Xml.Serialization.XmlReflectionImporter.InitializeStructMembers(StructMapping mapping, StructModel model, Boolean openModel, String typeName, RecursionLimiter limiter) at System.Xml.Serialization.XmlReflectionImporter.ImportStructLikeMapping(StructModel model, String ns, Boolean openModel, XmlAttributes a, RecursionLimiter limiter) at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter) --- End of inner exception stack trace --- at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter) at System.Xml.Serialization.XmlReflectionImporter.CreateArrayElementsFromAttributes(ArrayMapping arrayMapping, XmlArrayItemAttributes attributes, Type arrayElementType, String arrayElementNs, RecursionLimiter limiter)
> at System.Xml.Serialization.XmlReflectionImporter.ImportArrayLikeMapping(ArrayModel model, String ns, RecursionLimiter limiter) at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter) --- End of inner exception stack trace --- at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter) at System.Xml.Serialization.XmlReflectionImporter.ImportElement(TypeModel model, XmlRootAttribute root, String defaultNamespace, RecursionLimiter limiter) at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(Type type, XmlRootAttribute root, String defaultNamespace) at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace) at System.Xml.Serialization.XmlSerializer..ctor(Type type) at eText.Common.Xml.Serialize[T](Object obj, Type[] extraTypes) in f:\TFS\New TFS\PDFReader\Posh.PdfReader.Win8\eText\Common\Utility.cs:line 81
> at eText.Common.ApplicationSettings.<SaveDataToFileAsync>d__0`

我用来序列化的代码：

书类：

```
[DataContract] 
public class Book : ViewModelBase
{
    #region Constructor

    /// <summary>
    /// Initializes a new instance of the <see cref="Book" /> class.
    /// </summary>
    public Book(){}

    /// <summary>
    /// Initializes a new instance of the <see cref="Book" /> class.
    /// </summary>
    /// <param name="BookTitle">The book title.</param>
    /// <param name="BookCategory">The book category.</param>
    /// <param name="DownloadURL">The download URL.</param>
    /// <param name="TotalNumberOfPages">The total number of pages.</param>
    /// <param name="BookAuthor">The book author.</param>
    /// <param name="ImageURL">The image URL.</param>
    public Book(string BookTitle,string BookCategory,string DownloadURL, string TotalNumberOfPages, string BookAuthor, string ImageURL)
    {
        this.BookCategory = BookCategory;
        this.BookTitle = BookTitle;
        this.BookAuthor = BookAuthor;
        this.TotalNumberOfPages = TotalNumberOfPages;
        this.DownloadURL = DownloadURL;
        this.ImageURL = ImageURL;
    }

    #endregion    
} 
```

BooksDownloadedData 类

```
 /// <summary>
    /// Class to store downloaded books metaData
    /// </summary>
    [DataContract] 
    public class BooksDownloadedData
    {

        /// <summary>
        /// The downloaded books detail
        /// </summary>
        [DataMember]
        public Book DownloadedBooks { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether this instance is downloaded completed.
        /// </summary>
        /// <value>
        /// <c>true</c> if this instance is downloaded completed; otherwise, <c>false</c>.
        /// </value>
       [DataMember]
        public bool IsDownloadedCompleted { get; set; }
} 
```

为 BooksDownloadedData 创建了一个 ObservableCollection，然后在序列化后将其保存在本地存储中，但在序列化时出现错误：

```
// Create object to get the saved meta data of files
  ObservableCollection<BooksDownloadedData> downLoadedFiles;

 // Save the data to the local storage
                await ApplicationSettings.SaveDataToFileAsync<ObservableCollection<BooksDownloadedData>>(fileName, downLoadedFiles);

 public static async Task SaveDataToFileAsync<T>(string key, T value, bool roaming = false, Type[] extraTypes = null)
        {
            var file = roaming ? await ApplicationData.Current.RoamingFolder.CreateFileAsync(key + ".xml", CreationCollisionOption.ReplaceExisting) :
                await ApplicationData.Current.LocalFolder.CreateFileAsync(key + ".xml", CreationCollisionOption.ReplaceExisting);

            var xml = Xml.Serialize<T>(value, extraTypes);
            await FileIO.WriteTextAsync(file, xml, UnicodeEncoding.Utf8);
        }

 public static string Serialize<T>(object obj, Type[] extraTypes = null)
        {
            using (var sw = new StringWriter())
            {
                var serializer = extraTypes == null ? new XmlSerializer(typeof(T)) : new XmlSerializer(typeof(T), extraTypes);
                serializer.Serialize(sw, obj);
                return sw.ToString();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:00:45.800

从您的堆栈跟踪中，我看到：

`Cannot serialize member 'eText.DataModel.BooksDownloadedData.DownloadedBookFileDetails' of type 'Windows.Storage.StorageFile', see inner exception for more details. ---> System.InvalidOperationException: Windows.Storage.StorageFile cannot be serialized because it does not have a parameterless constructor.`

该类的[限制](https://stackoverflow.com/questions/109318/using-net-what-limitations-if-any-are-there-in-using-the-xmlserializer)之一`XmlSerializer`是被序列化的类必须具有无参数构造函数。

你可以使用`DataContractSerializer`代替吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:06:37.137

问题在于使用`Windows.Storage.StorageFile`，这显然不是为了与序列化很好地配合（或至少：不是`XmlSerializer`）。

您*也许*可以重构您的模型，这样您就不需要使用`StorageFile`. 您*也许*可以用 标记该成员 ( `DownloadedBookFileDetails`) ，并在反序列化后手动`[XmlIgnore]`重新创建。`StorageFile`您*也许*可以使用不同的序列化程序（`DataContractSerializer`、JSON.NET、protobuf-net 等）。

然而！在大多数情况下，我看到（并且我经常处理序列化）人们犯的关键错误是试图与序列化器作斗争，以便他们可以继续使用现有的域模型。实际上，*最简单*的做法通常是：*创建一个 DTO*：一个单独的模型，专门用于将数据表示为序列化的桥梁，然后映射到/从 DTO 模型和您的主域模型。

这不仅*每次都非常容易*工作，而且如果你想的话，它也会让你处于一个非常有利的位置：

*   在不影响序列化数据的情况下修改域模型（您只需调整映射）
*   添加具有不同布局的单独版本/ API（可能是公共 API 与私有 API）
*   使用不同的序列化程序（另外或代替）

# ruby-on-rails - 发送文件 Rails 2 问题

> ID：14497056
> 
> 赞同：0
> 
> 时间：2013-01-24T08:40:09.893
> 
> 标签：ruby-on-rails, ruby, jrubyonrails

在我的 Rails (2.3.10) 中。我发现了一些奇怪的问题。当用户点击下载的 URL 时，我的应用程序需要下载 XML 文件。

例如 ：

[http://www.example.com/test/all.xml](http://www.example.com/test/all.xml)

这里的问题是，如果我使用别名（http://www.example.com/test/all.xml）点击 url。XML 没有被下载。

如果我点击生产直接 URL，例如[http://xx.xx.xx.xx:3000/test/all.xml](http://xx.xx.xx.xx:3000/test/all.xml)。XML 开始下载没有任何问题。

任何人都可以帮助解决这个问题。? 请

这是我在测试控制器中的代码：

```
def index     
  file_path="/tmp/all.xml"    
  send_file file_path, :type => 'text/xml; charset=utf-8'    
end 
```

我已将“all.xml”文件放入我的生产服务器/tmp/all.xml。

我正在使用 Jruby(1.6.5) 并且 WAR 文件正在部署到 Tomcat....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:01:51.933

所以生产在端口 80 上运行，但应用程序服务器在端口 3000 上运行。什么服务器正在执行重定向。我会查看该服务器的配置。

# php - 如何在 PHP 中从 CA 获取注册证书

> ID：14497060
> 
> 赞同：4
> 
> 时间：2013-01-24T08:40:23.513
> 
> 标签：php, certificate

我正在编写一个服务，它应该从移动设备接收以 Base64 编码的 DER 格式 PKCS#10 证书请求，然后返回从 CA 获得的证书。

我正在尝试使用“https://CA-server/certsrv/mscep/mscep.dll?operation=PKIOperation&Message=urlencoded request”

```
 $ca_link_device="https://..../certsrv/mscep/mscep.dll";
     $URL=$ca_link_device."?operation=PKIOperation&Message=".urlencode($BinarySecurityToken)."=";
     $ch3 = curl_init();
     curl_setopt($ch3, CURLOPT_RETURNTRANSFER, true);
     curl_setopt($ch3, CURLOPT_URL, $URL); 
     curl_setopt($ch3, CURLOPT_HEADER, 0);
     $cert = curl_exec($ch3); 
```

但返回的数据包含空信封。我很可能在做一些非常愚蠢的事情，但不幸的是我在证书管理方面的知识接近于零。我一直在尝试 google，但是周围有太多的技术文档，我不知道从哪里开始，什么与我相关，什么不相关。

非常感谢所有帮助。

编辑：根据一份文档，我应该将我的 PKCS10 请求包装到 PKCS7 中。根据 Microsoft PKCS10 应该没问题，PKCS7 仅用于证书更新。相信谁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:26:02.767

最后，我们只是放弃了 mscep.dll 方法，并使用 curl 将带有所需参数的 POST 直接发送到 ...certsrv/certfnsh.asp 页面。然后我们对返回的 HTML 进行解析，得到证书下载的链接。

不是一个好的解决方案，但对我们有用。

# apache-kafka - 卡夫卡示例的问题

> ID：14497064
> 
> 赞同：-2
> 
> 时间：2013-01-24T08:40:37.723
> 
> 标签：apache-kafka

我下载了 Apache Kafka 并成功完成了快速入门。当我尝试运行提供的示例程序时，出现错误：

> 无法加载主类。

我不知道我错过了什么我什至设置了类路径。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T12:35:52.227

如果您在 Amazon EC2 上，请运行以下命令：sudo yum install java-1.6.0-openjdk-devel

javac 必须在那里。为此，您需要 JDK 和 JRE。您可能只安装了 JRE。

# haskell - 我可以在运行时区分类型类实例吗？

> ID：14497069
> 
> 赞同：6
> 
> 时间：2013-01-24T08:41:02.107
> 
> 标签：haskell, type-level-computation

是否可以按如下方式实现类型类：

```
class SomeClass e where
    isEq :: (SomeClass e') => e -> e' -> Bool 
```

当和都是这个类型类的同一个实例时，哪里`isEq x y`会返回true ？`x``y`

上下文：这是进行运行时类型测试的隐蔽尝试。起初我读到 Haskell 具有类型擦除功能，但我也读到了最近对 GHC 的扩展，其中包含一些运行时信息。

编辑：对于那些想知道我的用例的人......我一直在使用类型级编程来确保我的一些 ADT 的某些属性，即涉及资源使用。这些资源由不同的类型表示（资源锁相应地在类型级别实现）。

我正在尝试编写一个需要识别资源写入/读取的优化过程。但是由于我的所有资源都由不同的单例表示，其唯一的共同因素（除了所有值都是底部）是将它们组合在一起的类型类。

简而言之，我想在运行时值级别使用我的类型级别编程的结果。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T10:23:38.290

正如 Karolis Juodelė 所暗示的那样，您可以这样做`Data.Typeable`：

```
Prelude Data.Typeable> :{
Prelude Data.Typeable| let isEq :: (Typeable a , Typeable b) => a -> b -> Bool
Prelude Data.Typeable|     isEq x y = typeOf x == typeOf y
Prelude Data.Typeable| :}
Prelude Data.Typeable> isEq True ()
False
Prelude Data.Typeable> isEq True False
True 
```

问题是：为什么你在运行时不知道类型是什么，然后你为什么要关心它们是否相等——你能详细说明你的用例吗？

# mysql - 将 mysql 表复制到另一台服务器而不写入它

> ID：14497070
> 
> 赞同：0
> 
> 时间：2013-01-24T08:41:20.583
> 
> 标签：mysql, replication

如何配置 MySQL 以将表复制到另一台服务器而不在第一台服务器上写入表？我可以写二进制日志但不将更改提交到本地表吗？

编辑我想自动（不是一次）将插入到表中的所有数据导出到另一台mysql服务器，但是为了提高性能，我不想将数据写入主服务器，我想直接将其发送到另一台服务器.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:02:16.270

这可以通过标准复制来实现。只需使用[`BLACKHOLE`](http://dev.mysql.com/doc/refman/5.5/en/blackhole-storage-engine.html)主服务器上的存储引擎。

# .htaccess - 如何将网站从 domain.com/blog 重定向到 blog.domain.com？

> ID：14497072
> 
> 赞同：0
> 
> 时间：2013-01-24T08:41:27.170
> 
> 标签：.htaccess, web

我有一个带有 wordpress 博客的网站。可以从 domain.com/blog 访问此博客。

现在我想（通过 htacces）从 domain.com/blog 重定向到 blog.domain.com；

我该怎么做？

在互联网上我发现了相反的问题：\

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:49:04.120

进入你的cpanel（网络服务器），在那里找到“重定向域”。打开它并将所需的域添加到您当前的域地址..仅此而已

# java - SXSSFWorkbook 上的 AutosizeColumns

> ID：14497082
> 
> 赞同：19
> 
> 时间：2013-01-24T08:42:24.013
> 
> 标签：java, nullpointerexception, apache-poi

是否可以在流式 SXSSFWorkbook 上使用 autoSizeColumns？我实现了一个导出功能，将对象列表导出到 Excel。起初我使用 XSSFWorkbook（不是流式传输），在创建了所有单元格之后，我自动调整了所有列的大小，从而生成了一个不错的 excel 文件。

对于性能问题，我们想将工作簿更改为流版本，但这导致 org.apache.poi.ss.util.SheetUtil.getCellWidth 处出现 NullPointer。

是否可以为 SXSSFWorkbook 调用 autoSizeColumns？

我使用 poi-ooxml 3.9，但我在 3.8 中遇到了同样的问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T09:05:47.090

您需要确保每个单元格都有一个值。

我们使用以下代码为单元格设置字符串值：

```
Cell c = row.createCell(i);
c.setCellValue(text == null ? "" : text ); 
```

** 单元格不应为空值，否则会引发 NullPointerException。因此设置如上所示的值。

非常感谢，这有帮助！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-18T09:30:14.963

使用**sheet.isColumnTrackedForAutoSizing(0);** 对于第一次和随后用于其他列，每当执行 autoSizeColumn(0) 的代码被执行时，我都会遇到异常。通过使用上面的代码，我已经解决了这个问题，并且根据文本扩展列宽也很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-01T11:46:02.900

**错误：NullPointerException** on`org.apache.poi.ss.util.SheetUtil.getCellWidth(SheetUtil.java:122)`

修复：始终为 Cell 设置 value 如下所示，当 Cell 中存在 null 时会抛出 NullPointerException，因此将 value 设置为：

```
Cell c = row.createCell(i);
c.setCellValue(text == null ? "" : text ); 
```

# ios - 如何在目标 c 中连接测试应用程序

> ID：14497087
> 
> 赞同：0
> 
> 时间：2013-01-24T08:42:38.810
> 
> 标签：ios, objective-c

我是目标c的初学者。我创建了单元测试应用程序。我如何调用测试方法？贝娄给出了我的示例代码。我的项目 ：：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    int a=25;
    int b=25;

    MyUnitTestTests *myValue;
    if ([myValue respondsToSelector:@selector(testExample:testExample:)])
    {
      int c =  [myValue testExample:25 testExample:10];
       NSLog(@"value %i",c);
    }
    [super viewDidLoad];
} 
```

测试方法 ：：

```
- (int)testExample:(int )a testExample:(int )b
{
    int c= a+b;
    return c;    
} 
```

有什么错误吗？？我尝试了很多时间来做这个简单的测试。但输出是（值 0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:33:25.443

Instead of typing int c = [myValue testExample:25 testExample:10];

Just type [self testExample:25 testExample:10];

And print the log statement in your test method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:44:57.480

你的输出不正确

```
NSLog(@"value %d", c); 
```

因此，没有`%i`和有`%d`它应该是正确的。

还有另一个错误：实例`myValue`未初始化。

```
MyUnitTestTests *myValue = [[MyUnitTestTests alloc] init]; 
```

# trinidad-gem - 将 MIME 定义添加到特立尼达

> ID：14497090
> 
> 赞同：2
> 
> 时间：2013-01-24T08:42:46.570
> 
> 标签：trinidad-gem, embedded-tomcat-7

我正在使用 trinidad gem 来托管我的 jruby 应用程序。

`.woff`但是，任何对`.ttf`字体文件的请求都会得到`400 Bad Request`.

当我使用 jar-ing 项目`warbler`并将 jar 文件转储到常规 Tomcat 实例中时，我能够在`web.xml`.

但是，我不知道如何为 trinidad gem 使用的 Tomcat 实例执行此操作，并且文档似乎没有列出它。它确实提到了指定一个`web.xml`文件用作 Web 应用程序的默认文件，但这似乎是放在`WEB-INF`文件夹中的文件，当我为其放入 Tomcat 文件时，服务器没有启动`conf/web.xml`。

我还尝试将以下行添加到`config/initializers/mime_types.rb`：

```
Mime::Type.register "application/x-font-woff", :woff
Mime::Type.register "application/octet-stream", :ttf 
```

但这似乎不会影响`public`文件夹（如果确实如此，我会感到惊讶......）。

我在哪里可以找到如何做到这一点？

# php - 最大调用堆栈大小 jQuery 版本 1.9.0

> ID：14497097
> 
> 赞同：0
> 
> 时间：2013-01-24T08:43:22.690
> 
> 标签：php, javascript, jquery

我的问题涉及糟糕的书面代码，它可以工作，但它很乱，无论如何，它只是出于实验目的，我试图实现一个“类似系统”，用户点击一个按钮，与按钮关联的对象 id 被发送到通过 ajax 编写脚本，并使用用户喜欢的数据更新 mysql 表 - 这将是对象 ID。为此，我必须使用 php 来回显对象，并使用带有 javascript 函数的 like 按钮，如下所示：

```
for($i=0;$i<count($tempest);$i++)

{echo "<div class='posts'>
\"".$row2['screen_name']."\" 
<img src=\"".$row2['avatar']."\" width=50 height=50/><br>
 added a new page to the magic title
  \"".$row3['magic_name']."\"
   <br>
<img src=\"".$row1['p_name']."\">
<div id=\"".$i."\">
<a href='Javascript:penda(\"".$wholei."\",\"".$i."\")'> //this is the javascript function
<img name='mpe' src='images/like_outline.png'> //this is the like button
</a></div>
</div>";
} 
```

我知道回显 html 是错误的，但就像我说的那样，这只是为了好玩，当使用 jquery 版本 1.8.3 执行 ajax 请求时，它是：

```
function penda(item, itid) {
    itid = itid + "";

    $.ajax({
        type: "POST",
        url: "kumbatian.php",
        data: {
            penzi: item
        },
        success: function (ful) {
            if (ful == 'win') document.getElementById('win').innerHTML += "YOU WIN!!";
        }
    });
    document.getElementById(itid).innerHTML = "<a href='unlike()'><img src='images/like.png' /></a>";
} 
```

我会收到以下错误，我正在使用 chrome：未捕获 RangeError：超出最大调用堆栈大小，我认为这意味着回显的“喜欢”的数量很多要附加到函数 penda，大小数组 $tempest 是 6，所以有六个类似的按钮。当我升级到 jquery 1.9.0 版时，没有这样的错误并且一切正常，所以这是我的问题：1.) 需要以上述格式回显多少按钮才能在 1.9 版中发生相同的错误.0? 2.)有什么更好的方法可以将所有类似按钮的按钮附加到函数 penda() 以避免我遇到的错误？

编辑：根据要求，这是 html 输出：

```
<div id="0"><a href="Javasctipt:penda("mna4","0")"> <img name="mpe" src="images/like_outline.png"> </a></div>

  <div id="1"><a href="Javasctipt:penda("mna4","1")"> <img name="mpe" src="images/like_outline.png"> </a></div>

  <div id="2"><a href="Javasctipt:penda("mna4","2")"> <img name="mpe" src="images/like_outline.png"> </a></div>

  <div id="4"><a href="Javasctipt:penda("mna4","4")"> <img name="mpe" src="images/like_outline.png"> </a></div>

  <div id="5"><a href="Javasctipt:penda("mna4","5")"> <img name="mpe" src="images/like_outline.png"> </a></div>

  <div id="6"><a href="Javasctipt:penda("mna4","6")"> <img name="mpe" src="images/like_outline.png"> </a></div> 
```

就是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T02:46:04.447

用 PHP 输出 HTML 没有错。

然而，问题在于你的结果。正如颜色编码清楚地向您显示的那样，您的引号没有正确转义。

试试这个：

```
... href="javascript:penda(&quot;mna4&quot;,0)" ... 
```

通过使用 HTML 实体，您可以避免引号之间的冲突。只要确保字符串值不是任何可能有引号的东西，否则你需要更聪明。

# php - CodeIgniter 发送电子邮件

> ID：14497098
> 
> 赞同：0
> 
> 时间：2013-01-24T08:43:25.993
> 
> 标签：php, codeigniter, email

我有一些问题，这意味着我没有收到来自表单的邮件...

代码如下所示：

```
public function send_email(){
        $this->load->library("form_validation");

        $this->form_validation->set_rules("fullName", "Full Name", "required|alpha|xss_clean");
        $this->form_validation->set_rules("email", "Email Address", "required|valid_email|xss_clean");
        $this->form_validation->set_rules("message", "Message", "required|xss_clean");

            if($this->form_validation->run() == FALSE){
                $data["message"] = "";
                $this->load->view("site_header");
                $this->load->view("site_nav");
                $this->load->view("content_comment", $data);
                $this->load->view("site_footer");
            }else{
                $data["message"] = "The email was successfully been sent!";

                $this->load->library("email");

                $this->email->from(set_value("email"), set_value("fullName"));
                $this->email->to("paulharbuz@gmail.com");
                $this->email->subject("Message from our form");
                $this->email->message(set_value("message"));

                $this->email->send();

                echo $this->email->print_debugger();

                $this->load->view("site_header");
                $this->load->view("site_nav");
                $this->load->view("content_comment", $data);
                $this->load->view("site_footer");
            }
    } 
```

我得到一个看起来像这样的错误：

> 无法使用 PHP mail() 发送电子邮件。您的服务器可能未配置为使用此方法发送邮件。**

这是来自我的 php.ini 文件吗？

我已经在[http://php.net/manual/en/ref.mail.php上设置了我的文件阅读这部分](http://php.net/manual/en/ref.mail.php)

我找到了解决方案：在 config: email.php 中创建一个看起来像这样的文件

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/*
| -------------------------------------------------------------------
| EMAIL CONFING
| -------------------------------------------------------------------
| Configuration of outgoing mail server.
| */

$config['wordwrap'] = FALSE;
$config['mailtype'] = 'html';
$config['crlf'] = '\r\n';
$config['charset']='utf-8';
$config['newline']="\r\n";
$config['priority']=1;
$config['protocol']='smtp';
$config['smtp_host']='ssl://smtp.googlemail.com';
$config['smtp_port']='465';
$config['smtp_timeout']='30';
$config['smtp_user']='gcc.sandbox@gmail.com';
$config['smtp_pass']='qwaszx12';
$config['newline']="\r\n";

/* End of file email.php */
/* Location: ./system/application/config/email.php */ 
```

然后将其加载到您的主控制器中，例如：`$this->email->initialize($this->config->config);`就是这样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:55:12.953

```
$string = 'mail content';
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: z' . "\r\n";
mail(email, 'subject', $string, $headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:16:24.617

只需将此代码添加到您的帮助文件中，并在您要发送邮件时调用该函数，请使用以下方法发送电子邮件...

```
 function send_mail($to,$subject,$message) {
    $config = Array(
        'protocol'  => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'smtp_user' => 'xxx@xxxx',
        'smtp_pass' => 'xxxx',
        'mailtype'  => 'html', 
        'charset'   => 'iso-8859-1'
    );
    $this->load->library('email',$config);
    $this->email->set_newline("\r\n");

    $this->email->from($config['smtp_user'],"Your name");
    $this->email->to($to);
    $this->email->subject($subject);  
    $this->email->message($message);
    $result = $this->email->send();
    return $result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T21:00:49.643

如果您使用 gmail，我想在其中添加更多知识，因此这不能通过您自己的密码来完成，可以通过使用特定的 Google 密码来完成。如果您收到需要应用程序特定密码之类的错误。而不是像我一样在谷歌中搜索并获取一个并在下面的字段中输入。 **$config['smtp_pass']='应用程序专用密码';**

# php - php版本升级导致旧程序出错

> ID：14497103
> 
> 赞同：0
> 
> 时间：2013-01-24T08:43:44.517
> 
> 标签：php, xampp

我刚刚安装了 xampp，以运行一些旧程序（创建于 2 年或更多年前），但我遇到了 3 个我无法弄清楚的错误。

> 1.  严格的标准：只有变量应该在 C:\xampp\htdocs\2010\web\core\route\route.php 的第 117 行通过引用传递

```
 public function loadClass($address,$ext='') {
        $this->extname = preg_replace('/_/','/',$address,3);
line:117>       $this->classname = end(explode('_',$address)).($e= $ext!='' ? '('.$ext.')' :  '');
        include_once(ROOT_ROUTE.'/'.$this->extname.'.php');
        $this->newclass = new $this->classname;
        return $this->newclass;
    } 
```

第117行我看不懂，它没有使用通过引用传递，为什么会出现错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:55:47.430

因为 end() 需要一个通过引用传递的参数，所以不能将它与非变量一起使用，例如另一个函数调用或构造的直接结果。

引用[手册](http://www.php.net/manual/en/function.end.php)中的参数定义：

> 这意味着您必须将一个实变量传递给它，而不是一个返回数组的函数，因为只有实际变量可以通过引用传递。

改变

```
$this->classname = end(explode('_',$address)).($e= $ext!='' ? '('.$ext.')' :  ''); 
```

到

```
$addressTemp = explode('_',$address);
$this->classname = end($addressTemp) . ($e= $ext!='' ? '('.$ext.')' :  ''); 
```

# javascript - 在 for 循环中显示随机数组属性

> ID：14497108
> 
> 赞同：0
> 
> 时间：2013-01-24T08:44:03.103
> 
> 标签：javascript, random

我有来自的字符串`for`循环，我想知道如何才能使用它们，所以它会运行时间并在 JavaScript 中每次以不同的随机顺序显示它们（不复制它们）？`alerts``array``alert``randomly``gamesNames.length`

```
 for (var i = 0; i < gamesNames.length; i++) {
            alert (gamesNames[i].Name + gamesNames[i].year );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:50:53.473

使用包含索引和随机数的项目创建一个数组。通过对随机数进行排序来打乱它们，并使用索引来提醒项目：

```
var idx = [];
for (var i = 0; i < gamesNames.length; i++) {
  idx.push({ idx: i, rnd: Math.floor(Math.random() * 100000) });
}
idx.sort(function(x,y){ return x.rnd - y.rnd; });
for (var i = 0; i < idx.length; i++) {
  var j = idx[i].idx;
  alert (gamesNames[j].Name + gamesNames[j].year);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:51:47.923

这是一个链接[http://www.javascriptkit.com/javatutors/arraysort.shtml](http://www.javascriptkit.com/javatutors/arraysort.shtml)到主要思想，在 Javascript

这是代码

```
...
gamesNames.sort(function() {return 0.5 - Math.random()}) ;
for (var i = 0; i < gamesNames.length; i++) {
      alert (gamesNames[i].Name + gamesNames[i].year );
}
... 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T08:58:03.810

您可以将 a`while-loop`与[array.splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Objects/Array/splice)结合使用：

```
var array = ["1", "2", "3", "4"];
while(array.length > 0)
{
    // Get a random index
    var index = Math.floor(Math.random() * array.length);
    // Append it to the DOM (or do whatever you want with it)
    $("body").append($("<p />").html(array[index]));
    // Remove it from the array
    array.splice(index, 1);
} 
```

[**JSFiddle**](http://jsfiddle.net/spL9M/)

# jquery - 如何使用jquery返回匹配元素ID

> ID：14497109
> 
> 赞同：1
> 
> 时间：2013-01-24T08:44:07.467
> 
> 标签：jquery

我想使用 jquery 过滤器方法返回匹配的元素 ID，但它正在返回“对象对象”[小提琴](http://jsfiddle.net/xTF8f/10/)

//css

```
.none{display:none} 
```

//html

```
<div class="none">
 <span style="display:none">first</span>
 <span style="display:block">second</span>
</div> 
```

//脚本

```
visibles = $('.none').find('span').filter(function(){
if($(this).css('display') == 'block')   
return $(this).attr('id');
});
alert(visibles); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:45:45.230

您给过滤器的回调返回一个用于过滤的值。

如果您只有一场比赛，请使用：

```
visibleId = $('.none').find('span').filter(function(){
    return $(this).css('display') == 'block'
}).attr('id'); 
```

如果要获取匹配 id 的数组，请使用

```
visibles = $('.none').find('span').filter(function(){
    return $(this).css('display') == 'block'
}).map(function(){ return this.id }).get(); 
```

[示范](http://jsfiddle.net/dystroy/EM89W/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:47:08.927

[jQuery.filter](http://api.jquery.com/filter/)返回匹配的元素，所以需要`id`过滤元素后获取值。

```
visibles = $('.none').find('span').filter(function(){
   if($(this).css('display') == 'block')   
       return true;
}).attr('id');
alert(visibles); 
```

[小提琴](http://jsfiddle.net/arunpjohny/xTF8f/12/)

# javascript - 调整固定导航菜单的大小

> ID：14497113
> 
> 赞同：2
> 
> 时间：2013-01-24T08:44:22.667
> 
> 标签：javascript, jquery, html, css

调整浏览器大小时，我对固定菜单有一个大问题，因为 li 重叠并省略了定义它们的部分:(。所以我在考虑可以使用的两个选项：1：整个菜单有一个固定的宽度以像素为单位，而不是以 % 为单位，并且当调整浏览器大小以在左右滚动菜单时。2：li 重新排列在用边框定义的同一部分中。

直到现在我什么也做不了，因为如果我在调整浏览器大小时使用溢出来左右滚动我的菜单是行不通的。如果有人能给我这个闷热问题的解决方案，我将不胜感激:)

这是一个页面测试： http: [//mainpage.ueuo.com/Pagina%20start.htm](http://mainpage.ueuo.com/Pagina%20start.htm)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:40:42.473

或者您可以使用脚本来重写您的填充和字体大小属性：

```
function renderMenuCorection(){
                if ($('#containerHeader').exists()) {
                    var resizeObject = {

                        '0-640': '9px,2px,-3px',
                        '640-800': '10px,2px,-5px',
                        '800-1024': '10px,8px,-13px',
                        '1024-1300': '12px,12px,-13px',
                        '1300-2000': '14px,20px,-21px'
                    }

                    var win = $(window);
                    var win_width = win.width();

                    if (win_width > 0 && win_width <= 640) {
                        var value = getValueByKey(resizeObject, '0-640')
                        modifayMenu(value);
                        console.log(win_width + ' : ' + value);
                    }
                    else 
                        if (win_width > 640 && win_width <= 800) {
                            var value = getValueByKey(resizeObject, '640-800')
                            modifayMenu(value);
                            console.log(win_width + ' : ' + value);
                        }
                        else 
                            if (win_width > 800 && win_width <= 1024) {
                                var value = getValueByKey(resizeObject, '800-1024')
                                modifayMenu(value);
                                console.log(win_width + ' : ' + value);
                            }
                            else 
                                if (win_width > 1024 && win_width <= 1300) {
                                    var value = getValueByKey(resizeObject, '1024-1300')
                                    modifayMenu(value);
                                    console.log(win_width + ' : ' + value);
                                }

                                else 
                                    if (win_width > 1300 ) {
                                        var value = getValueByKey(resizeObject, '1300-2000')
                                        modifayMenu(value);
                                        console.log(win_width + ' : ' + value);
                                    }
                }
            }
          function modifayMenu(value){
            var vals = value.split(',')
                $('#containerHeader').find('.roundMenuLi').each(function(index, item){
                    $(item).find('a').css('font-size', vals[0]);
                    $(item).css('padding-right', vals[1]);
                    $(item).css('padding-left', vals[1]);
                    $(item).find('ul').css('margin-left', vals[2]);
              });

            }
          function getValueByKey(obj, myKey){

                $.each(obj, function(key, value){

                    if (key == myKey) {
                        returnValue = value;
                    }
                });
                return returnValue;
            } 
```

-首先声明您的分辨率 0-600 ... 1300-2000 并在 modifayMenu 函数中设置您的 css 属性：0position-font,1position-padding left&right,2position margin left for secon ul level。

调用脚本：

```
<body onresize="renderMenuCorection();" onload="renderMenuCorection();"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:29:58.360

添加`min-width: 1000px`（或更多......你的菜单*真的*太长了恕我直言）

到你的固定`#header`和`body`元素。

这将`overflow-x`起作用（无需指定）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:04:10.970

```
#firstUl > li {
    display:inline-block; 
    vertical-align:top; 
    display:inline; /* display:inline & zoom:1 for ie7 */ 
    zoom:1;
} 
```

从 ul 和 ul 容器中删除高度，从 containerHeader 中删除高度使用填充顶部和底部来保持菜单和容器之间的间隙

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T14:51:13.847

放

```
overflow:hidden; 
```

在 dividio 的内联样式中

# java - 提高 JPA 初始化性能

> ID：14497114
> 
> 赞同：1
> 
> 时间：2013-01-24T08:44:32.603
> 
> 标签：java, jpa, eclipselink, derby

我将 JPA 与 Eclipselink 和 Derby DB 一起使用。我想知道在启动进程时是否有一个选项可以提高性能，因为调用了以下代码。

```
factory = Persistence.createEntityManagerFactory(persistenceUnitName); 
```

有延迟，进程被调用并在控制台中写入状态。

有没有办法省略这个过程并提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:13:01.170

创建 EntityManagerFactory 需要部署持久性单元。这是您在应用程序或服务器的生命周期内只应该做一次的事情。

由于它只执行一次，因此性能应该不是主要问题，除非您的应用程序架构不佳并且多次调用它。

提高性能的方法包括：

*   使用静态编织，这会将编织处理移至您的构建代码，并将其从启动时间中删除。
*   在您的 persistence.xml 中列出您的类并使用`<exclude-unlisted-classes>true</exclude-unlisted-classes>`，这样可以避免搜索整个 jar 类路径。
*   确保您没有验证 orm.xml 模式，这可能会很昂贵。

# php - 如何从 mysql_ 函数转换为 PDO

> ID：14497135
> 
> 赞同：0
> 
> 时间：2013-01-24T08:45:36.533
> 
> 标签：php, mysql

> **可能重复：**
> [如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？](https://stackoverflow.com/questions/10919277/how-to-successfully-rewrite-old-mysql-php-code-with-deprecated-mysql-functions)

我一直在这个网站上发布一些问题，每当我可以发布时，至少会有一个人出来要求我停止使用 mysql_ 功能，因为它不再受支持，我不知道我被告知要使用 PDO：我一直试图弄清楚它是如何工作的，以便我将所有代码都转换为它，但现在将它应用到代码中，尽管连接部分确实有效，但它似乎无法正常工作。这是我尝试过的，它适用于 mysql_ 函数，但不适用于 PDO：任何帮助将不胜感激。

```
<?php 
#database connection 
$con = new PDO('mysql:host=localhost;dbname=adnan;charset=UTF-8','root','');

$sql = $con->query("SELECT * FROM 
m1debtors INNER JOIN 
m1dtrans 
ON m1debtors.name = m1dtrans.user");

while ($row=$sql->fetchAll(PDO::FETCH_ASSOC)){
    $ name =  $row[' name '];
    $ user = $row[' user ']; 
}

// The JSON standard MIME header.
header('Content-type: application/json');
$array = array('name'=>$name, 'user'=>$user);
echo  json_encode($array);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:51:16.470

将您的代码转换为 PDO 是一项非常简单的任务。
您真正需要的只是阅读手册页上的示例（并理解它们）。

由于您只需要关联数组形式的一行，`fetch()`因此已经可以做到这一点。

```
$row=$sql->fetch(PDO::FETCH_ASSOC);
// The JSON standard MIME header.
header('Content-type: application/json');
echo  json_encode($row); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-24T09:01:35.327

我建议编写一个类，这将使使用 PDO 更容易。

然后你可以做这样的事情......

```
$database->query('SELECT id FROM users WHERE name = :name');

$database->bind(':name', 'Jenny');

$row = $database->single(); 
```

查看本教程以编写您自己的课程。

[http://culttt.com/2012/10/01/roll-your-own-pdo-php-class/](http://culttt.com/2012/10/01/roll-your-own-pdo-php-class/)

# iphone - 当新视图显示在主视图中时如何相关地移动其他 uiobjects

> ID：14497136
> 
> 赞同：0
> 
> 时间：2013-01-24T08:45:43.507
> 
> 标签：iphone, ios, uiview

我正在开发一个 iPhone 应用程序，其中包含一个由三个`UISwitch`. 当`UISwitch`处于`On`状态时，应用程序会在开关下方显示一个小视图。这适用于所有三个开关。但问题是如果我一次打开两个开关，显示的小视图会重叠。有没有办法在显示这些视图时关联所有其他视图.. 提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:49:50.947

这类问题正是自动布局所擅长的。当您添加一个新对象时，删除并重新生成您的约束（您可能只需要更改几个，具体取决于它当前的位置），然后调用`layoutIfNeeded`超级视图。如果您在动画块内执行此操作，它甚至会为您制作新布局的动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T11:45:20.077

它有点晚了，但这可能是你要找的。

[折叠点击](https://github.com/bennyguitar/CollapseClick)

# android - 通过意图调用显示特定片段

> ID：14497140
> 
> 赞同：3
> 
> 时间：2013-01-24T08:45:52.043
> 
> 标签：android, android-intent

我知道我们可以通过意图调用在活动之间移动。但是有没有办法从一个活动转移到活动托管的特定片段？例如，如果我有一个包含 2 个片段 f1 和 f2 的活动 A，有没有办法通过意图调用直接从另一个活动 B 移动到片段 f2？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:55:49.633

嗯，直接通过意图调用是不可能的，您必须启动活动 A 并通过意图中的额外/捆绑，您可以指定活动 A 以打开片段 f2，这意味着您必须自己编写逻辑......不可能直接.. 干杯 在活动 B 中尝试此操作，它将打开 ActivityA 并发送一个字符串，您可以在该活动中检查该字符串，基于该字符串您将添加片段：

```
 Intent i = new Intent(this, ActivityA.class);
 i.putExtra("toOpen", "fragment 1");
 startActivity(i); 
```

并在 ActivityA oncreate

```
 Bundle extras = getIntent().getExtras();
 String toOpen = extras.getString("toOpen"); 
```

检查 toOpen 字符串并打开适当的片段。您是否也在问如何显示/添加片段，因为那是一个全新的球类游戏 :) 但这将是管理片段[http://developer.android.com/的一个不错的开始指南/组件/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-18T06:14:36.507

当您从按钮上的活动中打开片段时，单击编写此代码

```
Fragment myfragment;
myfragment = new Your_Fragment_Name();
FragmentManager fm = getFragmentManager();
FragmentTransaction fragmentTransaction = fm.beginTransaction();
fragmentTransaction.add(R.id.container, myfragment);
fragmentTransaction.commit(); 
```

在我的代码中，使用了一个 id `container`：。这是打开 Fragment 的布局的 id。

如果你还从活动中向片段发送一个值，那么

```
Bundle bundle = new Bundle();
bundle.putInt("value",value ); 
```

和

```
myfragment.setArguments(bundle); 
```

此行是在创建 FragmentManager 对象后添加的

这段代码很有帮助

# windows-runtime - CoreWindow::GetCurrentForThread() 始终为 NULL

> ID：14497147
> 
> 赞同：4
> 
> 时间：2013-01-24T08:46:25.387
> 
> 标签：windows-runtime, windows-phone-8, c++-cx

我正在尝试`CoreDispatcher`在 Windows Phone 8 上使用 C++，以便我可以将工作项提交给 UI 线程 Dispatcher，以便我可以更新 UI 线程上的 UI 元素。但是，当我打电话时`CoreWindow::GetCurrentForThread()`，我会`NULL`回来。在[文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.getforcurrentthread)中，它声明这在 WP8 上受支持。只要我正在获取`NULL`当前窗口，我就无法从中获取当前`Dispatcher`；有人知道如何在 WP8 上获取当前的 Dispatcher 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:04:17.043

`CoreWindow::GetForCurrentThread()`记录为返回：

> 当前`CoreWindow`活动线程的 。

如果您从没有 a 的线程`CoreWindow`（如任何非 UI 线程）调用此函数，则此函数将返回`nullptr`.

假设应用程序已经完成初始化并且有一个视图，您可以通过应用程序的主视图使用调度程序[`CoreApplication::MainView`](http://msdn.microsoft.com/en-us/windows/apps/windows.applicationmodel.core.coreapplication.mainview)。或者，您可以将 UI 线程的 传递`Dispatcher^`给在非 UI 线程上执行的代码，以便在需要调用回 UI 线程时可以访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-05T14:09:23.677

我用过

```
await CoreApplication.Views.First().Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
                {
                    //your code here
                }); 
```

# emacs - 使用 &rest 一次增加几个变量？

> ID：14497155
> 
> 赞同：1
> 
> 时间：2013-01-24T08:46:51.847
> 
> 标签：emacs, elisp

我想创建一个允许：

`(incf vara varb varc vard)`

代替

`(incf vara) (incf varb) (incf varc) (incf vard)`

我不明白的是如何能够发送更多参数，如何在函数中定义它？

(defun inc (&rest arg) (交互式) (mapcar 'incf arg) )

这增加了参数，但当然不会将它们保存回变量中。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T12:53:23.370

如果您希望能够在`(my-incf a b c)`不引用变量名`a`、`b`和的情况下编写此表单，请将其设为`c`宏而不是函数：

```
(defmacro incf+ (&rest vars)
  `(progn
     ,@(mapcar (lambda (var) `(incf ,var)) vars))) 
```

使用以下命令检查它是否扩展为正确的代码`macroexpand`：

```
(macroexpand '(incf+ var1 var2 var3))
;; => (progn (incf var1) (incf var2) (incf var3)) 
```

因为 Emacs Lisp 中的变量默认具有动态作用域，所以您*可以*使用带引号的变量名称作为参数的函数来完成几乎相同的事情。但是宏版本的优势在于，由于它在调用时扩展为代码，因此它也可以与词法绑定变量一起使用。 `symbol-value`仅适用于动态绑定的变量。

您可以通过将以下内容放入文件并加载它来测试它（在 Emacs 24 或更高版本中）：

```
;; -*- lexical-binding: t -*-

(defun incf+fun (&rest vars) 
  (mapc #'(lambda (var) (incf (symbol-value var))) vars))

(defun incf-macro-test ()
  (let ((a 5) (b 7) (c 11))
    (incf+ a b c)
    (list a b c)))

(defun incf-function-test ()
  (let ((a 5) (b 7) (c 11))
    (incf+fun 'a 'b 'c)
    (list a b c))) 
```

评估`(incf-macro-test)`将返回`(6 8 12)`，但`(incf-function-test)`会进入调试器并出现`(void-variable a)`错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:31:53.157

它应该工作：

```
(require 'cl)

(setq a 1)
(setq b 2)

(defun inc (&rest arg)
  (interactive)
  (mapc (lambda (x) (incf (symbol-value x))) arg))

(inc 'a 'b)

(message "%s %s" a b) => (2 3) 
```

您必须在执行之前引用每个参数，否则`(inc a b)`会变成。`(inc 1 2)``inc`

# python - Python 错误：视图 form.formapp.views.contact 未返回 HttpResponse 对象。解决

> ID：14497158
> 
> 赞同：3
> 
> 时间：2013-01-24T08:46:54.727
> 
> 标签：python, django

我是 python 的新手，我正在使用视图、urls 来处理表单......我的项目名称是*projec1*，我的应用程序名称是*usersapp*

这是我的 **usersapp/views.py **

```
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.template import RequestContext
from users.form import ContactForm

def contact(request):
    if request.method == "POST":
        contact_form = ContactForm(request.POST)
        if contact_form.is_valid():
            success = True
            username = contact_form.cleaned_data['username']
            password = contact_form.cleaned_data['password']
    else:
        contact_form = ContactForm()
        return render_to_response('contact.html', {'contact_form': contact_form}) 
```

这是我的**usersapp/contact.html**

```
{%block title%}
Contact
{%endblock%}
{%block content%}
<h2>Contact</h2>
    <form action ='.' method = 'POST'>
        {{contact_form.as_p}}
        <input type ="Submit" name = "submit" value = "send">  
    </form>
{%endblock%} 
```

这是我的**用户app/form.py**

```
from django import forms

class ContactForm(forms.Form):
    username = forms.CharField()
    password = forms.CharField() 
```

这是我的**projec1/urls.py**

```
 from django.conf.urls import patterns, include, url
 from django.conf.urls.defaults import *
 from users.views import login
 from users.views import contact

 urlpatterns = patterns('',
                   ('^contact/$', contact),
                     ) 
```

我面临这个错误

```
 TypeError at /
  Error when calling the metaclass bases
  module.__init__() takes at most 2 arguments (3 given)
  Request Method:   GET
  Request URL:  http://127.0.0.1:8000/
  Django Version:   1.4.3
  Exception Type:   TypeError
  Exception Value:  
  Error when calling the metaclass bases
  module.__init__() takes at most 2 arguments (3 given) 
```

我的错误是：

```
 NameError at /contact
  name 'forms' is not defined
  Request Method:   GET
  Request URL:  http://127.0.0.1:8000/contact
  Django Version:   1.4.3
  Exception Type:   NameError
  Exception Value:  
  name 'forms' is not defined
  Exception Location: C:\Users\Documents\MyProjects\projec1\users\form.py    
  in<module>,line 2
  Python Executable:    C:\Python27\python.exe 
```

请指导某人，提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:37:03.897

表单类定义错误，可能导致该错误：

```
from django import forms

# Inherit from `forms.Form`, not from `forms`:
class ContactForm(forms.Form):
    username = forms.CharField()
    password = forms.CharField() 
```

视图函数也存在一些问题：

```
def contact(request):
    if request.method == "POST":
        contact_form = ContactForm(request.POST)

        # Not `contact_form is valid()`:
        if contact_form.is_valid():
            success = True

            # `cleaned_data` is all lowercase:
            username = contact_form.cleaned_data['username']
            password = contact_form.cleaned_data['password']
    else:
        contact_form = ContactForm()

    # You always want to return a response. Putting the return statement
    # here will fix the error mentioned in the question's title. The 
    # second argument makes `contact_form` available from the template:
    return render_to_response('contact.html', {
        'contact_form': contact_form
    }) 
```

# javascript - 有没有工具可以查看IE浏览器内存的数据，比如javascript数据？

> ID：14497162
> 
> 赞同：0
> 
> 时间：2013-01-24T08:47:14.680
> 
> 标签：javascript, memory-leaks, internet-explorer-7

最近写了一些JavaScript代码，但是在IE7中出现了内存泄漏。有没有工具可以查看IE7在内存中的JavaScript数据？很感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:48:39.690

我使用 John Resig 配置文件跟踪器，它做得很好[http://ejohn.org/blog/deep-tracing-of-internet-explorer/](http://ejohn.org/blog/deep-tracing-of-internet-explorer/)

# visual-studio-2010 - 在 Visual Studio 中监视线程 Windows Phone 模拟器

> ID：14497164
> 
> 赞同：0
> 
> 时间：2013-01-24T08:47:20.030
> 
> 标签：visual-studio-2010, windows-phone-7, asynchronous, monitoring

在 Windows Phone 中，大多数方法`asynchronously`都是单独运行的`thread`，当线程很多时，很难调试应用程序。如何在 Windows Phone 中监控线程？任何可以提供有关异步操作的任何信息的工具。

我使用 Visual Studio 2010 Ultimate 和 Emulator Windows Phone。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:38:09.297

> 大多数方法在单独的线程中异步运行

他们没有。

“大多数方法”由只有少数线程的 CLR 线程池异步运行。

除非您自己创建了很多线程，否则这是非常糟糕的主意 - 线程很昂贵，而 CLR 线程池效果很好。

> 如何在 Windows Phone 中监控线程？

调试时暂停时，VS2010 有“线程”窗口。

# android - Android 如何在特定条件下更改列表视图中的图像

> ID：14497172
> 
> 赞同：0
> 
> 时间：2013-01-24T08:48:01.023
> 
> 标签：android, listview

我有一个`listview`. 我使用包含 a`textView`和`imageview`. `Textview`因为那是从 a 填充的`arraylist`。我使用了一个`array-adapter`，因为它直接给了我，而我`getFilter()`又用它来过滤列表。

我正在运行一个数据库查询，它返回一个项目列表。我将所有项目存储在一个`Cursor`. 现在我正在遍历游标并检查数据库中的项目是否包含在数组列表中。

如果有匹配项，我想切换图像。我该怎么做。

```
Cursor crs = actSl.execSQL(sqlQuery);
 if (crs != null && crs.getCount() > 0) {
  crs.moveToFirst();
  if (crs.getCount() > 0) {
     do {
         for(String favItem:favouritesList){
               if (favItem.contains(crs.getString(0))) {                        

                            }
                        }
                    } while (crs.moveToNext());
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:52:24.007

如果您不想更改数据结构，一种方法是创建一个新的布尔数组（或数组列表），该数组的大小与您的 favouritesList 大小相同，它将保存您的图像状态。然后修改这些值并调用 yourListAdapter.notifyItemsChanged()

哦，是的，在适配器的 getView 中，您必须（当然）读取布尔值。

请注意，您不能访问适配器外部列表的单独视图，并且强烈建议不要保留对它们的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:05:04.927

请按照以下步骤操作：

1.  最初从 arrayList 设置 imageViews（将 arrayList 传递给 customAdapter）

2.  当必须更改 imageView 时，只需更改 arrayList() 即更新它。

3.  现在通知适配器使用

    customListAdapter.notifyItemsChanged();

这将解决问题。请随时提出任何进一步的疑问

# android - Google Maps Android API v2：加载地图失败。无法联系 Google 服务器

> ID：14497179
> 
> 赞同：7
> 
> 时间：2013-01-24T08:48:23.387
> 
> 标签：android, android-maps-v2

我正在尝试使用 Google Maps Android API v2，并且我已经从我的发布证书创建了 SHA1 密钥。

我已经阅读了[这里](https://stackoverflow.com/questions/13727992/google-maps-api-v2-failed-to-load-map-could-not-contact-google-servers)`READ_GSERVICES`的评论，并做了一切正确的事情，包括在谷歌的说明中没有说明[的](https://developers.google.com/maps/documentation/android/start)权限。

但是我仍然有错误

> E/Google Maps Android API(12334)：加载地图失败。无法联系 Google 服务器。

如果我还有什么遗漏的话，无论如何可以启发我吗？

我也包括了这个：

```
<permission
      android:name="com.example.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.permission.MAPS_RECEIVE"/> 
```

和

```
<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="my_api_key"/> 
```

在我的应用程序标签中。

**更新**：刚刚设法消除了那个错误，意识到我输入了我的 READ_GSERVICES 错误。

但是，现在我遇到了这个问题：

> 01-24 16:58:08.628：E/Google Maps Android API(28025)：授权失败。

是什么导致了这个问题？我的 SHA1 是从我的发布证书中获得的，这是错的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T14:34:38.963

你解决问题了吗？可能是这个问题->

启用了错误的服务。确保启用“Google Maps Android API v2”而不是“Google Maps API v2”并重新生成 API 密钥。（[https://stackoverflow.com/a/13805807/1300982](https://stackoverflow.com/a/13805807/1300982)）

如果这是问题所在，请不要忘记重新生成 API 密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:57:04.737

还有一点需要注意：我用两个不同的 API 项目注册了相同的 SHA1 哈希。（是的，我知道这很愚蠢，但我正在尝试不同的方法来解决问题。）

我在这里提到这一点，因为您可能已经正确配置了所有内容，但是您在 Google 的 API 控制台上为您的项目拥有多个密钥。（希望这个愚蠢的错误不会发生在你身上。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T11:07:10.600

因为这次你正在使用

```
<permission
  android:name="com.example.permission.MAPS_RECEIVE"
  android:protectionLevel="signature"/>
<uses-permission android:name="com.example.permission.MAPS_RECEIVE"/> 
```

你确定你的包名是`com.example`，如果不是，那么`com.example`用实际的包名替换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:32:05.517

我有同样的问题。我使用的是谷歌地图 api v1 密钥。我用 google maps android api v2 密钥交换了它，问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T05:33:17.137

确保为不同的应用程序生成不同的密钥。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-23T13:06:56.193

我遇到了同样的问题，但没有任何效果。然后我在应用程序管理器中找到了 Google Play Services 并清除了数据。突然，新的 API 密钥开始工作了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-24T21:42:30.117

如果您使用 Xamarin，请记住使用存储在以下位置的 debug.keystore 创建 API 密钥：

Windows 用户：C:\Users[USERNAME]\AppData\Local\Xamarin\Mono for Android\debug.keystore

OSX：用户/[用户名]/.local/share/Xamarin/Mono for Android/debug.keystore

# vb.net - 返回一个类方法名称的数组

> ID：14497181
> 
> 赞同：2
> 
> 时间：2013-01-24T08:48:28.497
> 
> 标签：vb.net

我有以下。如何查询类`myExample`并返回类的方法名称数组？

```
Sub Main()
    Dim x As New myExample

    '<<would like to return an array of x's method names i.e. {"hello","world","foo","bar"}

    Console.WriteLine("press [enter] to exit")
    Console.Read()
End Sub

Class myExample

    Public Shared y As Integer

    Public Sub hello()
        y = 1
    End Sub
    Public Sub world()
        y = 2
    End Sub
    Public Sub foo()
        y = 3
    End Sub
    Public Sub bar()
        y = 4
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:57:08.763

所有方法（包括继承）：

```
Dim example As New myExample()
Dim t As Type = example.GetType()
Dim methods = t.GetMethods()
Dim allMethodNames() As String = methods.Select(Function(m) m.Name).ToArray() 
```

[**`Type.GetMethods`**](http://msdn.microsoft.com/en-us/library/4d848zkb.aspx)

# android - 如何在android中以编程方式启用/禁用复选框

> ID：14497194
> 
> 赞同：-5
> 
> 时间：2013-01-24T08:49:04.387
> 
> 标签：android, android-checkbox

我的应用程序中有 2 个复选框，每个复选框还包含我拍摄了两个图像按钮。我希望这两个复选框最初都被禁用。如果选中复选框，则应启用相应的图像按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:54:12.977

//禁用一个按钮

```
submit = (Button) findViewById(R.id.submit);
submit.setEnabled(false); 
```

//启用按钮

```
submit = (Button) findViewById(R.id.submit);
submit.setEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:52:03.503

使用复选框的功能。

```
 setEnabled(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:54:11.150

您可以使用 isChecked() 、 setChecked() 和 setOnCheckedChangeListener() 方法。请参考此[链接](http://developer.android.com/reference/android/widget/CheckBox.html)

```
checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

  @Override
  public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) { 

  }
} 
```

# java - 每当我单击 java 弹出菜单中的任何项目时，如何触发 click() 事件？

> ID：14497195
> 
> 赞同：1
> 
> 时间：2013-01-24T08:49:05.633
> 
> 标签：java, swing, jpopupmenu, jpopup

我想在Java swing中单击右键弹出菜单的菜单项时添加一个窗口（似乎是一个简单的任务......但没有得到）

我让它部分工作

```
adding a custom menuitem in popupmenu
adding a window on right click 
```

但这只是部分有效。现在，当我右键单击任何弹出窗口时，弹出菜单中的选定菜单项不会弹出窗口。如何在单击我的菜单项时获得窗口？或者有没有更简单的方法在java中做到这一点？

我知道还有其他方法可以做到这一点（在代码中），但我更喜欢使用 Java swing

以前有人做过吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:52:50.940

*   请阅读有关[如何使用菜单的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)

*   [如何使用 Swing 动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和/或[如何编写动作监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

*   [关于 JPopup /JPopupMenu](http://www.java2s.com/Tutorial/Java/0240__Swing/0460__JPopupMenu.htm)的几个例子

# ruby-on-rails - 从应用程序中自定义文件夹内的命名空间自动加载

> ID：14497196
> 
> 赞同：6
> 
> 时间：2013-01-24T08:49:13.020
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我们目前正在为 ROR 3.2 开发自定义 cms 引擎。在这个过程中，产生了几个类类型，我们希望成为 Rails 应用程序中的一等公民，这意味着它们应该位于应用程序的 app 文件夹及其插件下。

目前我们有以下类型：

*   数据源
*   数据类型
*   看法

我在 app 文件夹下创建了多个目录来保存这些：

*   应用程序/数据源
*   应用程序/数据类型
*   应用程序/视图

更多类型将随之而来，我有点担心应用程序文件夹会被这么多目录污染。因此，我想将它们移动到包含 cms 定义的所有类型的子目录/模块中。

所有类都应位于**MyCms**命名空间内，目录布局应如下所示：

*   应用程序/my_cms/data_source
*   应用程序/my_cms/data_type
*   应用程序/my_cms/视图

但是现在我在自动加载时遇到了问题，因为rails默认的自动加载会期望路径是这样的：

*   应用程序/data_source/my_cms
*   应用程序/data_type/my_cms
*   应用程序/视图/my_cms

但这样我就不会将所有对象类型分组在一个目录中。

我想要的有点类似于孤立引擎的视图分组。例如，在[Devise](https://github.com/plataformatec/devise)中，所有视图都分组在 views/devise 子目录中。

知道如何在没有太多自定义实现的情况下实现这一目标吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T09:35:53.363

您必须将 app/my_cms 添加到 config/application.rb 中的自动加载路径：

```
config.autoload_paths << "#{config.root}/app/my_cms" 
```

前提是您的类是在没有这样的命名空间的情况下定义的：

```
class DataSource
  ...
end 
```

如果在 app/my_cms/data_source.rb 中像这样命名它们：

```
class MyCms::DataSource
  ...
end 
```

您可以将 app 文件夹添加到加载路径：

```
config.autoload_paths << "#{config.root}/app" 
```

或者，您可以手动执行此操作，但在 Rails 开发中您会丢失这些类的重新加载：

在 app/my_cms.rb 中（并为应用程序自动加载）：

```
module MyCms
  autoload :AnotherDataSource, 'my_cms/data_source/one_data_source'
  autoload :AnotherDataSource, 'my_cms/data_source/another_data_source'

  ...
end 
```

# c++ - 线程安全的三角测量库

> ID：14497197
> 
> 赞同：5
> 
> 时间：2013-01-24T08:49:13.037
> 
> 标签：c++, thread-safety, triangulation

我正在编写一个需要快速[Minkowski 和](https://en.wikipedia.org/wiki/Minkowski_addition)计算的 C++ 软件。一个基于双重的实现就足够了。

我评估了一些几何库，例如

*   [CGAL](http://www.cgal.org/)
*   [发光二极管](http://www.algorithmic-solutions.com/leda/)
*   [boost::geometry](http://www.boost.org/doc/libs/1_47_0/libs/geometry/doc/html/index.html)（没有 Minkowski sum 实现，但是有一个[教程](http://www.boost.org/doc/libs/1_49_0/libs/polygon/doc/gtl_minkowski_tutorial.htm)解释了如何实现它）

但我最终使用了另一个第三方库，它与以前的库相比非常快，并且使用[FIST](http://www.cosy.sbg.ac.at/~held/projects/triang/triang.html)库进行三角测量。

我的代码或多或少以以下方式工作：

*   我读了我的多边形
*   我计算我需要的 Minkowski 和
*   n次
    *   我决定在以下计算中使用哪些多边形
    *   我根据 Minkowski 和做一些事情
    *   我给结果一个值
*   我将具有最佳值的结果作为最终结果

由于循环内的计算是独立于每一轮的，我并行化了循环并且一切正常。

然后我决定在每个并行轮中移动 Minkowski 和计算：

*   我读了我的多边形
*   对于 number_of_threads(=n) 次
    *   我决定在以下计算中使用哪些多边形
    *   我计算了这一轮中我需要的 Minkowski 和
    *   我根据 Minkowski 和做一些事情
    *   我给结果一个值
*   我将具有最佳值的结果作为最终结果

但是第三方库不再起作用。

我收到`number_of_threads - 1`错误消息说

> 断言失败。

导致断言失败的文件从运行到运行，从线程到线程，但它们都是与 FIST 头文件同名的 c 文件（虽然我有第三方库的源代码，但我只有一个 . lib 和 FIST 库的头文件）

如前所述，我尝试在并行化代码之外计算我需要的所有 Minkowski 和，并使用其中的结果。这没关系。所以我几乎可以肯定问题来自 FIST。

我有两个问题：

*   你知道[FIST](http://www.cosy.sbg.ac.at/~held/projects/triang/triang.html)库是否是线程安全的吗？

*   如果没有，您能否建议我一个线程安全的（C 或更好的）C++ 三角测量库来替换 FIST（可能具有相当的性能）？

**编辑：**

实际上，我不知道“线程安全”是否正是我想要的：我只需要一个能够同时计算许多独立三角剖分的三角剖分库。

我认为如果库没有全局变量并且它有一个没有`static`变量的类

```
class triangulation
{
    // no static variables

    void execute_triangulation();
} 
```

这可能就足够了。所以我可以使用该类的不同实例并并行运行它们的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:53:32.397

您可能可以使用[CGAL 的 2D 三角测量包](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_2/Chapter_main.html)来替换 FIST，然后将其用作执行 Minskowski 求和的第三方库的输入。CGAL 三角测量非常快速且可靠。您可以使用受约束的 Delaunay 三角剖分对多边形和复杂形状进行三角剖分。

顺便问一下，您使用哪个 Minkowsky 库？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:47:06.507

一种可能且可立即测试的解决方案是在调用 Minkowski 计算的代码周围放置一个互斥体。如果这听起来很有趣，而您不知道该怎么做，请添加评论，详细说明您正在使用的平台，我或其他人将概述如何做。

至少，这将显示您是否正确识别了问题。如果计算只占总带宽的一小部分，那么它可能是一个很好的解决方案——否则只是前进的一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T09:25:04.697

这在很大程度上取决于您的意思：

> 由于我的代码是可并行化的，因此我引入了多线程

您需要更具体才能获得帮助。“你已经引入了多线程”是什么意思？例如，您提到的所有库都没有内置 Minkowski 和（或其他任何东西）的并行计算 - 您需要自己并行化它。

关于 Minkowski 和，可以使用 map-reduce 方法：将输入数据集拆分为更小的部分，并行计算每个部分的 Minkowski 和（map），并在中间结果来自独立工作者时合并它们（reduce ）。对此的要求是一个基本的线程安全保证（例如 CGAL 给你的）对计算参数的只读访问。

# android - 带布局的撰写按钮

> ID：14497200
> 
> 赞同：0
> 
> 时间：2013-01-24T08:49:26.407
> 
> 标签：android, android-layout, android-button

是否可以创建一个按钮，其背景可绘制是布局？例如，我想创建一个包含一些水平图像和一些文本视图的布局，并且所有生成的视图都应该可以作为一个按钮一次全部点击。有可能吗，怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:03:02.227

```
LinearLayout yourLayout = (LinearLayout) findViewById(R.id.your_nested_layout);
yourLayout.setOnclickListener(...); 
```

# java - 存储过程中的分页策略（查看或？）

> ID：14497202
> 
> 赞同：2
> 
> 时间：2013-01-24T08:49:32.093
> 
> 标签：java, sql, sql-server, jdbc, pagination

我有这个存储过程，它返回大约 100K 到 1M 行，具体取决于参数：

```
CREATE PROCEDURE dbo.sp_doStuff
    @userId bigint = 0,
    @date datetime = null
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 
        ...
    from 
        ...
    order by theDate DESC;

END 
```

这个存储过程由 Java 方法通过 jdbcTemplate 调用，并从那里进行分页。`sp_doStuff`然而，考虑到平均执行时间已经是 60 秒，这非常慢。

也就是说`sp_doStuff`，用户单击的每个下一页按钮都会调用此方法（非常慢）。一次它的 60 秒可以，但对于下一页它不应该。如何在此 SQL 代码中实现视图（或任何解决方案应用程序），以便`jdbcTemplate`调用不必每次都处理这十万行。

**每次单击下一个按钮时调用：**

```
String sql = "MyDB..sp_doStuff '12345', '2013-01-24'"
return jdbcTemplate.query(sql, new ResultSetExtractor<MyModel<Map<String, String>>>() {
        @Override
        public MyModel<Map<String, String>> extractData(ResultSet rs)
                throws SQLException, DataAccessException {
                ....
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:30:54.030

抱歉，但您真的应该在页面上向用户显示所有 100k 行？？？看起来很疯狂，真实的人从不分析现实生活中的 10 万行信息。如果您有 1M 行并计算它们的值的 AVG 或其他东西，那没关系，但是从 SP 向人显示是非常糟糕的做法。从我的角度来看，您应该使用限制行和索引的结果集的方法。例如：`SELECT salary, date FROM USER_SALARY t WHERE t.id = '1748' ORDER BY date DESC LIMIT 29799, 100;` 此请求将显示 USER_SALARY 表中 100 行（起始行位置 - 29800），用于 id 为 1748 的用户，按天字段排序（当然索引已由 ID 字段创建）我想，上述方法允许您使用应该在页面上显示给用户的大数据表。

# iphone - 如果revmob 无法显示，如何显示chartboost 广告？

> ID：14497206
> 
> 赞同：0
> 
> 时间：2013-01-24T08:49:53.713
> 
> 标签：iphone, ios, xcode

我在我的应用程序中运行revmob，但revmob 未能出现在许多国家。如果revmob 未能出现，我想显示chartboost 广告..

如果revmob失败，请帮助我应用chartboost

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:26:11.707

您可以为此使用广告代理，例如，显示全屏：

```
RevMobFullscreen *fs = [[RevMobAds session] fullscreen];
fs.delegate = self;
[fs showAd]; 
```

然后在委托方法中调用 chartboost 广告：

```
- (void)revmobAdDidFailWithError:(NSError *)error {
    NSLog(@"Ad failed: %@", error);
    // Code to show a chartboost ad
} 
```

他们有一个随 SDK 一起提供的工作示例。

# php - 从两个表中选择结果并组合结果

> ID：14497207
> 
> 赞同：0
> 
> 时间：2013-01-24T08:49:57.937
> 
> 标签：php, mysql

给定以下示例表。

```
 CREDITS

 +-------+--------------+--------------+---------------------------+
 |   ID  |   userid     |     value    |  date_activated           |
 +-------+--------------+--------------+---------------------------+
 |   1   |   1722       |     50       |  2012-11-08 22:24:41      |
 +-------+--------------+--------------+---------------------------+
 |   2   |   3242       |     10       |  2012-11-07 22:24:41      |
 +-------+--------------+--------------+---------------------------+
 |   3   |   23232      |     20       |  2012-11-06 22:24:41      |
 +-------+--------------+--------------+---------------------------+
 |   4   |   1722       |     30       |  2012-11-19 22:24:33      |
 +-------+--------------+--------------+---------------------------+

 EXPENSE

 +-------+--------------+--------------+---------------------------+
 |   ID  |   userid     |     value    |  date_spent               |
 +-------+--------------+--------------+---------------------------+
 |   1   |   1722       |     10.20    |  2012-11-18 22:24:41      |
 +-------+--------------+--------------+---------------------------+
 |   2   |   3242       |     2.00     |  2012-11-03 22:24:41      |
 +-------+--------------+--------------+---------------------------+
 |   3   |   23232      |     20.00    |  2012-11-01 22:24:41      |
 +-------+--------------+--------------+---------------------------+
 |   4   |   1722       |     18.00    |  2012-11-20 22:24:33      |
 +-------+--------------+--------------+---------------------------+ 
```

我想达到以下结果。

```
 |   1722       |     50       |  2012-11-08 22:24:41      |
 |   1722       |     10.20    |  2012-11-18 22:24:41      |
 |   1722       |     30       |  2012-11-19 22:24:33      |
 |   1722       |     30       |  2012-11-19 22:24:33      |
 |   1722       |     18.00    |  2012-11-20 22:24:33      |
 |   3242       |     10       |  2012-11-07 22:24:41      |    
 |   3242       |     2.00     |  2012-11-03 22:24:41      |
 |   23232      |     20.00    |  2012-11-01 22:24:41      |
 |   23232      |     20.00    |  2012-11-01 22:24:41      | 
```

我通常会如何做这将是做类似下面的事情

```
 $query = "SELECT * FROM CREDITS ORDER BY user id";
  $result = mysql_query($query);
  while ($row = mysql_fetch_array( $result ))
  {
       $combind_result = $combind_result.$row['userid']."|".$row['value']."|".$row['date_activated']."|"; 
       $user_id = $row['user_id'];
       $query2 = "SELECT * FROM EXPENSE userid = '$user_id' ORDER BY date_spent";
       $result2 = mysql_query($query2);
       while ($row2 = mysql_fetch_array( $result2 ))
           {
           $combind_result.$row2['userid']."|".$row2['value']."|".$row2['spent']."|"; 
           }
   }        

   echo $combind_result; 
```

可能有一些错别字，但我认为它显示了这个概念。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:51:43.070

看看`UNION MYSQL CLAUSE` 。这就对了。

```
(SELECT a FROM t1 ORDER BY a LIMIT 10)
UNION
(SELECT a FROM t2 ORDER BY a LIMIT 10);
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:56:22.493

尝试使用`UNION ALL`.

```
SELECT user_id, value, date_activated FROM CREDITS
UNION ALL
SELECT user_id, value, date_activated FROM EXPENSE 
```

您可能希望第二个选择阅读：

`SELECT user_id, value * -1, date_activated FROM EXPENSE`，这样您就可以正确计算信用与费用之间的关系。您还可以添加代码以进一步帮助区分信用和费用。

```
SELECT user_id, value, date_activated, 'c' as `type` FROM CREDITS
UNION ALL
SELECT user_id, value * - 1, date_activated,'e' as `type` FROM EXPENSE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:59:11.440

试试这个：

```
 SELECT user_id, value,date
    FROM
      ( SELECT id,
               user_id,
               value,
               date_activated AS date
       FROM credits
       UNION ALL SELECT id,
                    user_id,
                    value,
                    date_spend AS date
       FROM expense ) x
    ORDER BY id, date; 
```

# django - 在 django 中序列化非模型类

> ID：14497208
> 
> 赞同：1
> 
> 时间：2013-01-24T08:50:12.760
> 
> 标签：django, json, serialization, jsonserializer

我有一堂课（非模特）

```
from django.utils import simplejson
class myclass:
    def __init(self):
        self.x = "1877"
        self.y = "1410"
        self.z = "400"
        self.w = "67"
        self.a ="0"
        self.b = "1"
        self.c = "319996"
        self.d ="187702"
        self.t = "168000"

def ajaxRes(request):
    mobj = myclass;
    json_str = simplejson.dumps(mobj)
    return HttpResponse(json_str,mimetype ="application/x-javascript") 
```

我得到了以下错误：

`class myapp.views.myclass at 0x7faadc020c18> is not JSON serializable`

我也尝试了 django 的序列化程序，但它似乎只适用于模型类

```
from django.core import serializers
data = serializers.serialize("json", mobj.objects.all()) 
```

抛出`mobj`没有任何属性对象的错误。

如何在`django [json format]`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:03:35.223

您需要准备 simplejson 序列化程序来处理您的课程：

```
from django.utils import simplejson

class HandleMyClass(simplejson.JSONEncoder):
     """ simplejson.JSONEncoder extension: handle MyClass"""
     def default(self, obj):
         if isinstance(obj, MyClass):
             return obj.__dict__
         return simplejson.JSONEncoder.default(self, obj)

data = simplejson.dumps( dictionary, cls=HandleMyClass ) 
```

# grails - Grails GORM：如何通过复合外键链接表？

> ID：14497210
> 
> 赞同：0
> 
> 时间：2013-01-24T08:50:19.720
> 
> 标签：grails, mapping, grails-orm

[我有一个来自审计日志](http://grails.org/plugin/audit-logging)插件的默认审计日志表，如下所示：

**审计日志：** `id | class_name | event_name | ...`

我想为记录的事件提供人类可读的描述。我决定添加另一个带有描述的表：

**审核事件：** `id | class_name | event_name | description`

并将这些描述映射到 和 上的第一个`class_name`表`event_name`。

我有以下域类：

```
class AuditLog {

Integer id;
String actor;
String className;
Date dateCreated;
String eventName;
Date lastUpdated;
String newValue;
String oldValue;
Integer persistedObjectId;
String persistedObjectVersion;
String propertyName;
String uri;
AuditEvent event;

static mapping = {
    table 'audit_log';
    version false;
    cache usage: 'read-only';

    id column: 'id';
    actor column: 'actor';
    className column: 'class_name';
    dateCreated column: 'date_created';
    eventName column: 'event_name';
    lastUpdated column: 'last_updated';
    newValue column: 'new_value';
    oldValue column: 'old_value';
    persistedObjectId column: 'persisted_object_id';
    persistedObjectVersion column: 'persisted_object_version';
    propertyName column: 'property_name';
    uri column: 'uri';

} 
```

但我不知道如何为`AuditEvent event`. 在这里，我想使用现有字段`class_name | event_name`作为复合外键与`audit_event`表链接。将感谢您的帮助。

upd：假设 AuditEvent 具有字段`auditedClass`和`event`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:20:37.690

I'm not sure whether I really understood your question, but from the question `how to write mapping for the AuditEvent event`, I think you can map the `AuditEvent` class separately, just as what you have done to class `AuditLog`:

```
Class AuditEvent {
    String auditedClass
    String event
    String description
    ....

    static mapping = {
        table 'audited_event'
        auditedClass column: 'class_name'
        event column: 'event_name'
    }
} 
```

# java - 我的案例更好的模型？RMI 还是消息系统？

> ID：14497211
> 
> 赞同：-1
> 
> 时间：2013-01-24T08:50:19.713
> 
> 标签：java, jakarta-ee, jms, rmi, message-queue

我需要构建一些流程来形成分布式系统。
我在`RMI`和之间进退两难`JMS`。
问题：
我选择`RMI`它是因为我已经知道它并且它适合分布式系统并且速度很快。但问题是它正在阻塞。
即，如果其他进程之一挂起，则调用进程将“卡”在方法调用上。我认为有一些第三方库，但我不知道它们是否足够稳定。

`JMS`是一个标准并且避免了这个问题，因为它是异步的。但是这样做我有以下问题（我以前也没有使用`JMS`过）：
如果我向其中一个进程发送消息，我有时（取决于上下文/流）需要知道另一个进程实际上做了什么收到我的消息后。但这形成了一个“同步”模型，对吧？
因此，考虑到所有这些，最好的方法是什么，以及在每种情况下如何解决我的问题？例如，我的问题将`JMS`如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:26:24.583

由于您提到的原因，JMS 是一个更好的解决方案。

*   异步
*   非阻塞

为了接收确认，您可以让接收者在某些操作后向您发送消息。

基于消息处理概念的[Actor 模型](http://en.wikipedia.org/wiki/Actor_model)在这里值得一提。

# django - Django 管理员搜索优化

> ID：14497214
> 
> 赞同：5
> 
> 时间：2013-01-24T08:50:34.843
> 
> 标签：django, postgresql, django-admin

我有一个在 Django 1.4 上运行的 CMS，数据库是 Postgresql 9.1。我在 CMS 中有很多内容，而我现在面临的问题是 Django Admin 搜索需要很长时间才能检索到结果。我想知道是否有优化 Django Admin 搜索行为的选项。我知道 Django 在 Postgresql 上使用 LIKE 查询进行查找。我知道 Postgresql 9.1 有 GIN 和 GIST 索引，可以帮助加快 Django 的这种行为。我还可以修改此搜索行为以使其更快，并在搜索结果的质量上有所妥协。我想知道优化 Django 搜索行为的最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T10:07:03.780

您可能想使用[Django Debug 工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)来检查哪些 SQL 查询实际上很慢。

我们发现[Django 管理员隐式使用`UPPER`](http://bbenko.tumblr.com/post/44567916462/optimizing-search-in-django-admin)导致 Postgres 忽略所有现有索引。如果这是问题所在，您可以在数据的大写表示上创建索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:31:18.103

如果您不想更改 Django，请分析搜索查询并添加适当的 GIN 和 GIST 索引。否则，您可能希望考虑集成诸如 Haystack 之类的东西，以加快搜索速度，并且不会占用您的数据库。

有用的网址

[http://www.rossp.org/blog/2009/jan/28/django-postgresql-fulltext/](http://www.rossp.org/blog/2009/jan/28/django-postgresql-fulltext/)

# objective-c - setFrame 裁剪窗口

> ID：14497219
> 
> 赞同：0
> 
> 时间：2013-01-24T08:50:49.790
> 
> 标签：objective-c, nswindow, cut, borderless

我有一个应该具有动态高度的窗口。我已经在 Interface Builder 中绘制了窗口，并且在代码中的计算之后我尝试设置高度。它也应该在桌面上的相同位置。我使用下面的代码来做到这一点。

```
[myWin setFrame:NSMakeRect(myWin.frame.origin.x,
                       myWin.frame.origin.y - (yPos+2*MARGIN_CONST - myWin.frame.size.height),
                       myWin.frame.size.width, 
                       yPos+2*MARGIN_CONST)
 display:YES]; 
```

该窗口是无边界窗口。当我打印之前和之后的框架时，它似乎已经采用了新值，但是窗口是从顶部切割的并且它具有与以前相同的高度（现在我看到了窗口底部的控件，但是那些顶部被切割）。有任何想法吗？

非常感谢。

# java - jLabel中的信息自动连接成一句话

> ID：14497223
> 
> 赞同：1
> 
> 时间：2013-01-24T08:50:53.130
> 
> 标签：java, swing, jlabel

我试图在 java swing 中为我的标签进行一些格式化。如果用户输入：

```
 This
    is
    testing. 
```

我将其存储到数据库中并检索出来。我怎样才能防止自动加入一个句子。例如，我希望它显示在可滚动的标签上：

```
 This
    is
    testing. 
```

而不是Thisistesting。我不知道这叫什么。这是换行方法吗？我添加了这个：jLabel_reply.setLineWrap(true); 进入我的代码，但没有运气。句子仍然自动连接在一起。任何指南？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:07:07.583

`JLabel`默认情况下不显示在多行上。

您在这里有两个选择：

1) 使用不可编辑、不透明的`JTextArea`

2）在您的内部使用 HTML`JLabel`并将所有行分隔符替换为`<br>`

说明我的说法的基本示例：

```
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class TestMultipleLineLabel {

    private static final String TEXT = "This is\na text\non multiple lines";

    protected void initUI() {
        JFrame frame = new JFrame(TestMultipleLineLabel.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridwidth = GridBagConstraints.REMAINDER;

        JLabel label = new JLabel();
        label.setText(getHTMLText(TEXT));
        label.setFont(label.getFont().deriveFont(Font.PLAIN));
        panel.add(label, gbc);
        JTextArea textArea = new JTextArea();
        textArea.setEditable(false);
        textArea.setLineWrap(false);
        textArea.setOpaque(false);
        textArea.setWrapStyleWord(false);
        textArea.setText(TEXT);
        panel.add(textArea, gbc);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    private String getHTMLText(String text) {
        return "<html>" + text.replace("\n", "<br>") + "</html>";
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestMultipleLineLabel().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:58:37.343

您的数据库引擎可能会修剪您的行分隔符。您可能应该使用支持特殊字符（如 \n）的字段类型。

# meteor - 流星允许规则

> ID：14497226
> 
> 赞同：6
> 
> 时间：2013-01-24T08:50:58.387
> 
> 标签：meteor, rules

我对流星的派对示例有疑问。

如果我调用此代码：

```
Parties.allow({
insert: function () {
    return true;
},

remove: function (){
    return true;    
},

update: function() {
    return true;    
}

}); 
```

每个人都可以插入、删除和更新。示例中的代码是

```
Parties.allow({
 insert: function (userId, party) {
    return false; // no cowboy inserts -- use createPage method
 },
 update: function (userId, parties, fields, modifier) {
    return _.all(parties, function (party) {
    if (userId !== party.owner)
       return false; // not the owner

  var allowed = ["title", "description", "x", "y"];
  if (_.difference(fields, allowed).length)
    return false; // tried to write to forbidden field

  // A good improvement would be to validate the type of the new
  // value of the field (and if a string, the length.) In the
  // future Meteor will have a schema system to makes that easier.
     return true;
   });
 },
 remove: function (userId, parties) {
   return ! _.any(parties, function (party) {
     // deny if not the owner, or if other people are going
     return party.owner !== userId || attending(party) > 0;
   });
 }
}); 
```

所以我的问题是变量 useriD 和 party 在这一行例如

```
 insert: function (userId, party) { 
```

被定义？这些是我在方法中调用的变量吗

```
 Meteor.call("createParty", variable1, variable2) 
```

? 但这没有意义，因为客户调用

```
 Meteor.call('createParty', {
    title: title,
    description: description,
    x: coords.x,
    y: coords.y,
    public: public
  } 
```

我希望有人可以向我解释允许功能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:11:48.150

要了解允许/拒绝，您需要了解`userId`和`doc`参数的来源。（就像在任何函数定义中一样，实际的参数名称并不重要。）只看缔约方插入示例：

```
Parties.allow({

  insert: function (userId, party) {
     return false; // no cowboy inserts -- use createPage method
  }

}); 
```

`party`参数是要插入的文档：

```
Parties.insert(doc); 
```

`userId`如果您使用 Meteor Accounts 身份验证系统，则会自动设置该参数。否则，您必须在服务器上自行设置。你是怎样做的？

通常，您通过使用从客户端调用服务器上的代码`Meteor.call()`。由于没有内置 API 来设置 userId（帐户除外），因此您必须编写自己的 API（在您的服务器代码中）：

```
Meteor.methods({

   setUserId: function(userId) {
       this.setUserId(userId);
   }

}); 
```

然后您可以在客户端代码中的任何位置这样调用它：

```
Meteor.call('setUserId', userId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:16:14.213

1）变量useriD和party在哪里定义？无处！目的是没有用户可以调用此函数。

这是为了保护数据库免受可以使用控制台手动插入新方的用户的影响。请记住，Meteor 在客户端和服务器中复制数据库。

任何用户都可以通过控制台手动插入新方。这可以。但是服务器会拒绝插入，因为它是不允许的。

2）这些是我在方法中调用的变量`Meteor.call("createParty", variable1, variable2)`吗？是的，变量可用，但此代码未使用正确的定义，即：

```
 Meteor.methods({
    createParty: function (options) { 
```

然后它被用作

```
 Meteor.call('createParty', 
            { title: title, public: public, ... }, // options array!!
            function (error, party) { ... }  // function executed after the call
 ); 
```

对你有帮助吗？

# sql - 在非空列上插入后触发

> ID：14497233
> 
> 赞同：13
> 
> 时间：2013-01-24T08:51:29.157
> 
> 标签：sql, sql-server, tsql, triggers

我有一个包含两`not null`列`Created`和`Updated`.

我写了相应的触发器

```
ALTER TRIGGER [dbo].[tr_category_inserted] ON [dbo].[Category]
AFTER INSERT
AS
BEGIN
  UPDATE Category
  SET Created = GETDATE(), Updated = GETDATE()
  FROM inserted
  WHERE Category.ID = inserted.ID;
END 
```

和

```
ALTER TRIGGER [dbo].[tr_category_updated] ON [dbo].[Category]
AFTER UPDATE
AS
BEGIN
  UPDATE Category
  SET Updated = GETDATE()
    FROM inserted
        inner join [dbo].[Category] c on c.ID = inserted.ID
END 
```

但是如果我要插入一个新行，我会收到一个错误

> 无法将值 NULL 插入到列“已创建”、表“类别”中；列不允许空值。插入失败。

插入命令：

```
INSERT INTO [Category]([Name], [ShowInMenu], [Deleted])
     VALUES ('category1', 0, 0) 
```

如何在不设置这些列以允许 null 的情况下编写此类触发器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:27:14.660

像这样修改你的表：

```
ALTER TABLE yourTable MODIFY COLUMN updated timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
ALTER TABLE yourTable MODIFY COLUMN created timestamp DEFAULT 0; 
```

将 created to 列的默认值设置为 0。不幸的是，MySQL 不允许`CURRENT_TIMESTAMP`在一个表中有两个带默认值的时间戳列。要克服这个问题，您只需在列中插入一个`NULL`值`created`，您将拥有当前时间戳的两列。

```
INSERT INTO yourTable (col1, created) VALUES ('whatever', NULL); 
```

或者您将默认设置为有效的时间戳，例如

```
ALTER TABLE yourTable MODIFY COLUMN created timestamp DEFAULT '1970-01-01 00:00:00'; 
```

并像这样修改您的触发器：

```
ALTER TRIGGER [dbo].[tr_category_inserted] ON [dbo].[Category]
AFTER INSERT
AS
BEGIN
  UPDATE Category
  SET Created = GETDATE()
/*  FROM inserted */ /*don't know where you got that from, do you port from SQL Server?*/
  WHERE Category.ID = NEW.ID;
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:16:51.607

`Created`发生错误是因为触发器仅在插入后起作用，并且您可能没有在插入`Updated`时插入列值。

因此，为了消除错误，您可以插入/填充列`Created`以及`Updated`插入。或者您可以添加列的默认值属性。请检查链接以获取详细信息

[将具有默认值的列添加到 SQL Server 中的现有表](https://stackoverflow.com/questions/92082/add-column-with-default-value-to-existing-table-in-sql-server)

[指定列的默认值](http://msdn.microsoft.com/en-us/library/ms187872.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T09:54:46.160

可能使用[**INSTEAD OF**](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.105%29.aspx)触发器

```
CREATE TRIGGER [dbo].[tr_category_inserted] ON [dbo].[Category]
INSTEAD OF INSERT
AS
BEGIN
  INSERT Category(Name, ShowInMenu, Deleted, Created, Updated)
  SELECT Name, ShowInMenu, Deleted, GETDATE(), GETDATE()
  FROM inserted i
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T16:44:19.677

我通常允许最后更新的列为空，因为我想知道它是否从未被更改过。如果您必须使两个字段都为空，我会为这些列添加一个默认值，如下所示：

```
ALTER TABLE [dbo].[Category] ADD  DEFAULT (getdate()) FOR [Created]
GO

ALTER TABLE [dbo].[Category] ADD  DEFAULT (getdate()) FOR [LastUpdated]
GO 
```

那么您将不需要插入的触发器。

如果您真的想使用触发器，则必须指定`INSTEAD OF`而不是`AFTER`包含插入语句。

# redis - 如何从另一台机器复制的快照（rdb 文件）中恢复 redis 数据？

> ID：14497234
> 
> 赞同：77
> 
> 时间：2013-01-24T08:51:35.420
> 
> 标签：redis, snapshot

我将我的 redis 快照（`dump.rdb`文件）传输`scp`到远程服务器。我需要在这个远程服务器上运行一个 redis 服务器并从`dump.rdb`文件中恢复数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-24T17:16:25.450

没有什么特别的事情要做。只需在新机器上安装redis服务器，编辑配置文件即可。您只需更改以下参数以指向您刚刚复制的转储文件的位置。

```
# The filename where to dump the DB
dbfilename mydump.rdb

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
# 
# Also the Append Only File will be created inside this directory.
# 
# Note that you must specify a directory here, not a file name.
dir /data/mydirectory/ 
```

最后就可以正常启动redis服务器了。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-04-23T02:52:34.513

对于`appendonly`标志设置为 的数据库`no`，您可以执行以下操作：

1.  停止 redis（因为 redis 退出时会覆盖当前的 rdb 文件）。
2.  将您的备份 rdb 文件复制到 redis 工作目录（这是`dir`您的 redis 配置中的选项）。还要确保您的备份文件名与`dbfilename`配置选项匹配。
3.  启动redis。

另一方面，如果您需要将 rdb 文件恢复到仅附加数据库，则应执行以下操作：

1.  停止 redis（因为 redis 退出时会覆盖当前的 rdb 文件）。
2.  将您的备份 rdb 文件复制到 redis 工作目录（这是`dir`您的 redis 配置中的选项）。还要确保您的备份文件名与`dbfilename`配置选项匹配。
3.  将 redis 配置`appendonly`标志更改为`no`（否则 redis 将在启动时忽略您的 rdb 文件）。
4.  启动redis。
5.  运行`redis-cli BGREWRITEAOF`以创建一个新的 appendonly 文件。
6.  将 redis 配置`appendonly`标志恢复为`yes`.

具体来说，这是 redis 配置文件注释中的相关文档：

```
# Note that you can have both the async dumps and the append only file if you                                                     
# like (you have to comment the "save" statements above to disable the dumps).                                                    
# >> Still if append only mode is enabled Redis will load the data from the                                                          
# >> log file at startup ignoring the dump.rdb file. 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-07-27T10:04:06.487

假设您运行 Redis 2.6 或更高版本，您的 Redis 快照文件名为`dump.rdb`，并且它存在于 directory`/home/user/dbs`中，则以下命令可以解决问题：

```
redis-server --dbfilename dump.rdb --dir /home/user/dbs 
```

官方文档中的相关部分：[通过命令行传递参数](https://redis.io/topics/config#passing-arguments-via-the-command-line)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-12-13T11:06:32.083

或者您可以：

1.  停止你的 redis 服务器/实例，例如， `service redis6379 stop`
2.  将 dump.rdb 文件复制到正确的位置，例如`cp /path/to/dump-6379.rdb /var/lib/redis/dump-6379.rdb`. 给它正确的权限（用户：组应该是redis：redis和模式644）
3.  启动您的 redis 服务器/实例，例如，`service redis6379 start`

在将文件复制到正确位置之前停止 redis 服务器很重要，因为 Redis 在终止之前会保存快照，因此它将替换您的文件。

此外，您可能需要先备份现有的 dump.rdb 文件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-26T05:27:07.470

在第二台服务器上启动*redis ，如下所示：*

```
$ > redis-server /path/to/my/redis/configuration/file/redis.conf 
```

当 redis 启动时，它会找到您的*rdb*文件，因为它会在您启动 redis 服务器时提供的***配置文件***( *redis.conf ) 中查找**名称* 和*文件路径*，如上所述。

 **要提供文件名和路径，只需编辑*redis.conf*文件模板中的*两行*（在 redis 源的根目录中提供。将修改后的版本保存为 redis.conf 在您在启动服务器时提供的目录位置。

 *您将在源顶级目录的***redis.conf****模板中的第127*和*137*行（redis 版本 2.6.9）中找到所需的设置。

```
# The filename where to dump the DB
dbfilename dump.rdb

# The working directory
dir ./ 
```

如您所见，两种设置都提供了默认值

所以只需更改这两行中的第一行 (127) 以识别您的 rdb 文件，并在第二行 (137) 中将默认的“./”替换为快照 rdb 文件的实际文件路径；保存*redis.conf*与您的更改，并启动 redis 传递这个新的 conf 文件。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-01-16T04:57:47.427

我想在这里添加一个没有被提及的小细节，我不会使用配置文件，而是在命令行中指定所有内容。

如果在启动时同时指定了 mydump.rdb 和 appendonly.aof 文件`redis-server`，它将是`appendonly.aof`获胜的文件，以便加载来自 appendonly.aof 的数据。例如：

```
redis-server --dbfilename mydump001.rdb --dir /data --appendonly yes 
```

上面的 start 调用将使用`/dir`位置来查找文件的`mydump001.rdb`存在`appendonly.aof`。在这种情况下，`redis-server`将从中加载内容`appendonly.aof`。如果`appendonly.aof`不存在，则会创建一个空`/data/appendonly.aof`的，redis-server 将为空。

如果要加载特定的转储文件，可以执行以下操作：

```
redis-server --dbfilename mydump001.rdb --dir /data 
```

我添加了这个答案，因为不清楚哪个是哪个。在存在 2 个备份文件的情况下，这通常不会被提及。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-08T01:16:32.337

尝试设置 appendonly 没有。在我的情况下，*.aof 文件为空（0 字节），必须设置 appendonly=no 然后使其加载 dump.rdb

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-18T15:09:47.733

此解决方案适用于 redis-cluster，但也适用于 redis。

安装这个依赖[https://github.com/sripathikrishnan/redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)

```
pip install rdbtools python-lzf 
```

之后执行这个

```
rdb -c protocol /path/to/dump.rdb | redis-cli -h host -p port --pipe 
```

如果这是一个集群，端口应该是主端口。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-24T09:30:49.930

安装[https://github.com/leonchen83/redis-rdb-cli](https://github.com/leonchen83/redis-rdb-cli)

```
rmt -s ./your-dump.rdb -m redis://host:port -r 
```***

# java - 错误，因为 XMLRootElement 中有两个名为“userName”的属性

> ID：14497240
> 
> 赞同：0
> 
> 时间：2013-01-24T08:51:49.600
> 
> 标签：java, web-services, soap

我有一堂课

```
@XmlRootElement(name="Helloworld")
@XmlType(propOrder = { "userName"})
public class UserDetails {
    //User Name
    @XmlElement(name="UserName")
    private String userName;

    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }

} 
```

我得到运行时异常

```
There are two properties named "userName" ... 
```

任何人都可以说出上述课程中的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:58:58.427

这是因为您在该字段上有 getter 和 setter 以及注释。您可以通过将注释从字段属性移动到 getter 方法来修复它。

```
@XmlRootElement(name="Helloworld")
@XmlType(propOrder = { "userName"})
public class UserDetails {
    //User Name
    private String userName;

    @XmlElement(name="UserName")   
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
} 
```

# visual-studio-lightswitch - 在运行时更改 Lightswitch 网格列标题

> ID：14497245
> 
> 赞同：0
> 
> 时间：2013-01-24T08:52:11.773
> 
> 标签：visual-studio-lightswitch

在我的灯开关应用程序中，我有一个数据网格。如何在运行时更改某些列的列标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:59:27.563

[在这里](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/8a5cb410-82f4-472c-8c33-13afd52acb6c)找到答案....感谢 Lightswitch 论坛

# android - android中列表视图的ID

> ID：14497251
> 
> 赞同：-1
> 
> 时间：2013-01-24T08:52:30.520
> 
> 标签：android, listview

```
 <ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="324dp" /> 
```

这是我的应用程序中列表视图的代码。我想在整个项目中更改我的列表视图的 ID。我怎样才能做到这一点！我从网上选择了 listview 上的演示项目。现在我想更改列表视图的 ID。当我更改列表视图的 id 时，它给出了一个错误。我做了所有的研究，但我找不到解决方案。所以帮帮我吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:56:26.103

如下更改您的 ListView 标记以避免错误。

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="324dp" /> 
```

# cxf - 在 Camel-CXF 中将自定义 Soap-Header 设置为 pojo-message

> ID：14497253
> 
> 赞同：4
> 
> 时间：2013-01-24T08:52:33.263
> 
> 标签：cxf, apache-camel, soap-client

我对 cxf 肥皂标题有疑问。我使用 Contract-firs-development 方法建立了一个 cxf 项目。我想用一个 cxf 组件调用一个 web 服务，它看起来像这样。

```
<cxf:cxfEndpoint id="ICCSCustomerService" 
                 address="http://localhost:8080/iccs-xsoap/CustomerService/updateCustomer"
                 serviceClass="de.iccs.xsoap.customer.v1.CustomerServiceImpl" >
</cxf:cxfEndpoint> 
```

我想发送一个 pojo 消息，抛出一个直接组件作为对 ws 的请求。我的路线如下所示：

```
<route id="CustomerServiceUpdateCustomerTest">
        <camel:from uri="direct:iccsUpdateCustomerRequest"/>
        <camel:process ref="addCredentials"/>
        <to uri="cxf:bean:ICCSCustomerService"/>  
        <camel:to uri="stream:out"/>
</route> 
```

我需要实现一个像这样的肥皂头：

```
<ns2:Header>
    <simpleAuth xmlns="http://xsoap.iccs.de/v1" password="abc" username="xxx"/>
</ns2:Header> 
```

为了存档这个，我写了一个这样的处理器（另见[http://camel.apache.org/cxf.html](http://camel.apache.org/cxf.html)的例子）：

```
@Override 
public void process(Exchange exchange) throws Exception { 
   List<SoapHeader> soapHeaders = CastUtils.cast((List<?)exchange.getOut().getHeader(Header.HEADER_LIST)); 
    // Insert a new header 
    String xml = "<?xml version=\"1.0\" encoding=\"utf-8\"?><outofbandHeader " 
        + "xmlns=\"http://cxf.apache.org/outofband/Header\" hdrAttribute=\"testHdrAttribute\" " 
        + "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" soap:mustUnderstand=\"1\">" 
        + "<name>simpleAuth username=\"xxx\" password=\"abc\" xmlns=\"http://xsoap.iccs.de/v1\"</name></outofbandHeader>"; 

    SoapHeader newHeader = new SoapHeader(new QName("http://xsoap.iccs.de/v1", "simpleAuth"), 
                   DOMUtils.readXml(new StringReader(xml)).getDocumentElement()); 
    // make sure direction is OUT since it is a response message. 
    newHeader.setDirection(Direction.DIRECTION_OUT); 
    //newHeader.setMustUnderstand(false); 
    soapHeaders.add(newHeader); 
} 
```

不幸的是，我在这个语句中得到了一个空指针异常： List soapHeaders = CastUtils.cast((List

显然，此消息中没有肥皂标题。它似乎根本不是肥皂信息。像这样编组

```
 <camel:marshal>
            <soapjaxb contextPath="de.iccs.xsoap.customer.v1" />
        </camel:marshal>
        <camel:process ref="addCredentials"/> 
```

不起作用，因为它只产生一个没有肥皂头的肥皂信封。（当然，这在 cxf-endpoint 在 pogo 模式下工作时不起作用）您能否提供一个示例，如何从 pojo 消息中设置一个肥皂消息（带有肥皂头）。

谢谢加布里埃尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:37:25.697

不知道你是否已经解决了你的问题，但我也经历过类似的事情，所以也许有人会受益。

如果您的 NPE 是由于没有现有的标头，那么在需要时创建一个新列表是完全可以接受的。

```
if (message.getHeader(Header.HEADER_LIST) == null) {
    message.setHeader(Header.HEADER_LIST, new ArrayList<SoapHeader>());
} 
```

但是您可能对用于填充 SoapHeader 的手工制作的 XML 有另一个问题。您仍在使用原始 CXF 示例中的 outofbandHeader 元素；这是示例中的特定标头，**而不是**带外标头的通用包装器。此外，您的 simpleAuth 未标记为元素（尽管很难阅读......）。

如果您为 simpleAuth 元素使用 @XMLRootElement 注释类（生成或创建），则可以使用采用 JAXBDataBinding 的 SoapHeader 构造函数。CXF 将为您编组标题。

```
@Override 
public void process(Exchange exchange) throws Exception {

    Message in = exchange.getIn();
    if (in.getHeader(Header.HEADER_LIST) == null) {
        in.setHeader(Header.HEADER_LIST, new ArrayList<SoapHeader>());
    }
    List<SoapHeader> headers = CastUtils.cast((List<?>)in.getHeader(Header.HEADER_LIST));

    SimpleAuth auth = new SimpleAuth();
    auth.setUsername("xxx");
    auth.setPassword("abc");

    try {
        SoapHeader header = new SoapHeader(new QName("http://xsoap.iccs.de/v1", "simpleAuth"),
                auth, new JAXBDataBinding(SimpleAuth.class));
        header.setDirection(Direction.DIRECTION_OUT);
        header.setMustUnderstand(true);
        soapHeaders.add(header);            
    } catch (JAXBException e) {
    e.printStackTrace();
    }
} 
```

# mysql - 查询连接三个表

> ID：14497254
> 
> 赞同：-1
> 
> 时间：2013-01-24T08:52:39.287
> 
> 标签：mysql, join

我有 3 张桌子 -

```
books (bookid,bookname)

member(mid,mname)

transaction(transid,bookid,mid,ttype,issue_dt,due_dt,transremark) 
```

现在我有一个 msql 查询-

```
SELECT (select count(*) FROM transaction where ttype='issue') as rownum,
transid,bookid,mid,ttype,issue_dt,due_dt,transremark 
FROM transaction 
WHERE ttype='issue' 
ORDER BY transid 
LIMIT 1 offset 3; 
```

我想得到上面查询中存在的`bookname`以及`mname`谁`bookid`和`mid`..请提出一个查询，我可以在其中得到上述查询的结果以及 bookname 和 mname..提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:04:50.540

尝试这个 ：：

```
SELECT
count(1) as rownum,
transid,
b.bookid,
m.mid,
ttype,
   issue_dt,
    due_dt,
    transremark, 
    b.bookname,
    m.mname
    from transaction t
    INNER JOIN books b on (b.bookid=t.bookid)
    INNER JOIN member m on (t.mid=m.mid)
    where ttype='issue' ORDER BY transid LIMIT 1 offset 3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:57:58.850

您可以尝试以下查询

```
SELECT bookname, mname, temp.*
FROM books, member,
(SELECT (select count(*) FROM transaction where ttype='issue') as 
rownum,transid,bookid,mid,ttype,issue_dt,due_dt,transremark 
from transaction where 
ttype='issue' 
ORDER BY transid LIMIT 3,1) as temp
WHERE books.bookid = temp.bookid
AND member.mid = temp.mid 
```

如果不起作用，您可以尝试删除**LIMIT**子句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:37:21.073

下面给出了一些可能对您有帮助的查询。我提交了那些没有测试的。如果您遇到任何语法错误，请重写此内容。而且，如果您认为您想要任何其他想法，那么您可以告知....

```
SELECT transaction.*, member.mname, books.bookname
FROM transaction
INNER JOIN member ON transaction.mid = member.mid
INNER JOIN books ON transaction.bookid = books.bookid
WHERE transaction.ttype='issue' ; 
```

通过使用此查询，您将获得每个成员的单独行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:42:00.943

尝试这个：

```
SELECT b.bookname, m.mname 
FROM (transaction AS t 
LEFT JOIN books AS b
ON b.bookid = t.bookid)
LEFT JOIN member AS m 
ON m.mid = t.mid
WHERE t.ttype='issue'; 
```

样本数据：

```
CREATE TABLE books(
  bookid INT AUTO_INCREMENT PRIMARY KEY,
  bookname VARCHAR (50)
);

CREATE TABLE member(
  mid INT AUTO_INCREMENT PRIMARY KEY,
  mname VARCHAR (30)
);

CREATE TABLE transaction(
  transid INT AUTO_INCREMENT PRIMARY KEY,
  bookid INT,
  mid INT,
  ttype VARCHAR (10),
  issue_dt DATETIME,
  due_dt DATETIME,
  transremark varchar(200)
);

INSERT INTO books(bookname)
VALUES ("Harry Potter and the Philosopher's Stone"), ("Harry Potter and the Chamber of Secrets"), ("Harry Potter and the Prisoner of Azkaban");

INSERT INTO member(mname)
VALUES  ('bob'), ('jack'), ('joe');

INSERT INTO transaction(bookid,mid,ttype,issue_dt,due_dt,transremark)
VALUES (1,1,'issue', curdate(),curdate()+ INTERVAL 5 DAY, "UPS"),
(1,2,'issue', curdate(),curdate()+ INTERVAL 5 DAY, "UPS"),
(3,1,'issue', curdate(),curdate()+ INTERVAL 5 DAY, "UPS"),
(2,1,'issue', curdate(),curdate()+ INTERVAL 20 DAY, "UPS"),
(3,3,'no_issue', curdate(),curdate()+ INTERVAL 20 DAY, "FEDEX"); 
```

[http://sqlfiddle.com/#!2/91b0d/5](http://sqlfiddle.com/#!2/91b0d/5)

**编辑：有限制**

```
SELECT b.bookname, m.mname 
FROM (transaction AS t 
LEFT JOIN books AS b
ON b.bookid = t.bookid)
LEFT JOIN member AS m 
ON m.mid = t.mid
WHERE t.ttype='issue'
LIMIT 1 offset 3; 
```

[http://sqlfiddle.com/#!2/91b0d/7](http://sqlfiddle.com/#!2/91b0d/7)

也许我误解了，但您只要求书名和会员名。如果您想了解更多信息，也可以使用此查询。在上面的当前查询中替换 SELECT * FROM。

祝你项目好运。

# ssis - SSIS - DataFlow - Set a value for each row from a procedure stocked result

> ID：14497262
> 
> 赞同：0
> 
> 时间：2013-01-24T08:53:01.160
> 
> 标签：ssis, dataflow

For a SSIS, i have to transfer data from a server to another but on the final destination, i have a column like ID. For determinate the new ID of each row, i have to execute a stored procedure on the final server.

Is-it possible to do that in DataFlow and avoid the Foreach Loop in ControlFlow ?

Regards, Guillaume.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:04:07.727

No, I don't think it is. I suggest following the DataFlow task with an Execute SQL task that will execute your stored procedure.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:20:49.133

You can do this task using `OLEDB command` . If your SP has a `return` statement than try to capture the return value and map it with your input column

```
exec ? = dbo.ReturnID 
```

This statement will create a `@RETURN_VALUE` which you need to map with the input `ID` column .Remember to create an Input `ID column` in the source itself as NULL or any value so that you can map this column in `OLEDB component` with the `@RETURN_VALUE`

```
Update 1 : 
```

Try this :-

```
EXEC dbo.my_sp 'p1', 'p2',@variable_name=? output 
```

`@variable_name` is the output variable name used in your stored procedure

# json - hive 为 json 对象计算错误的总和

> ID：14497264
> 
> 赞同：1
> 
> 时间：2013-01-24T08:53:03.333
> 
> 标签：json, hadoop, mapreduce, hive

我有一个包含一列的外部表 - 数据，其中数据是 json 对象

当我运行以下配置单元查询时

```
hive> select get_json_object(data, "$.ev") from data_table limit 3;     

Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks is set to 0 since there's no reduce operator
Starting Job = job_201212171824_0218, Tracking URL = http://master:50030/jobdetails.jsp?jobid=job_201212171824_0218
Kill Command = /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=master:8021 -kill job_201212171824_0218
 2013-01-24 10:41:37,271 Stage-1 map = 0%,  reduce = 0%
 ....
 2013-01-24 10:41:55,549 Stage-1 map = 100%,  reduce = 100%
 Ended Job = job_201212171824_0218
 OK
 2
 2
 2
 Time taken: 21.449 seconds 
```

但是当我运行 sum 聚合时，结果很奇怪

```
hive> select sum(get_json_object(data, "$.ev")) from data_table limit 3;
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks determined at compile time: 1
In order to change the average load for a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=<number>
In order to limit the maximum number of reducers:
 set hive.exec.reducers.max=<number>
In order to set a constant number of reducers:
 set mapred.reduce.tasks=<number>
Starting Job = job_201212171824_0217, Tracking URL =   http://master:50030/jobdetails.jsp?jobid=job_201212171824_0217
Kill Command = /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=master:8021 -kill  job_201212171824_0217
2013-01-24 10:39:24,485 Stage-1 map = 0%,  reduce = 0%
.....
2013-01-24 10:41:00,760 Stage-1 map = 100%,  reduce = 100%
Ended Job = job_201212171824_0217
OK
9.4031522E7
Time taken: 100.416 seconds 
```

谁能解释我为什么会这样？我应该怎么做才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:26:09.897

Hive 似乎将 JSON 中的值作为`float`s 而不是`int`s，并且看起来您的表非常大，因此 Hive 可能使用“指数”表示法来表示大浮点数，因此`9.4031522E7`可能意味着`94031522`.

如果你想确保你正在做一个`sum`int，你可以将 JSON 的字段转换为 int，并且 sum 应该能够返回一个 int：

```
$ hive -e "select sum(get_json_object(dt, '$.ev')) from json_table"
8.806305E7
$ hive -e "select sum(cast(get_json_object(dt, '$.ev') as int)) from json_table"
88063050 
```

# css - “中间” div 的 CSS 问题不会环绕其内容

> ID：14497267
> 
> 赞同：0
> 
> 时间：2013-01-24T08:53:12.173
> 
> 标签：css, html

[在这里](http://jsfiddle.net/nCe8k/)（和下面）你可以看到一个“中间” div 不会包装其内容的问题。我试图让它自动包装表格的全部内容，所以一直有一个整洁的白色 10 像素填充边框。我已经尝试了我能想到的一切，玩显示模式、浮动、清除、溢出......但似乎没有任何效果。谁能看到我哪里出错了？

```
#outer {
    height : 200px;
    width : 200px;
    background : red;
    overflow : auto;
    padding : 10px;
}
#middle {
    background : white;
    padding : 10px;
}
#inner {
    border : 1px solid purple;
}
td {
    background : cyan;
    padding : 5px;
    border : 1px solid blue;
}
```

```
<div id="outer">
  <div id="middle">
    <table id="inner">
      <tr>
        <td>this is some random text</td>
        <td>this is some random text</td>
        <td>this is some random text</td>
        <td>this is some random text</td>
      </tr>
    </table>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:00:57.973

添加

```
display:inline-block; 
```

到`#middle`定义。

[display: inline 和 display: inline-block 有什么区别？](https://stackoverflow.com/questions/8969381/what-is-the-difference-between-display-inline-and-display-inline-block)`inline-block`提供有关属性值的更多详细信息。

看到这个[更新的小提琴](http://jsfiddle.net/nCe8k/8/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:04:04.363

您可以使用**table-layout:fixed**。像这样写：

```
#inner {
            border : 1px solid purple;
            table-layout: fixed;
            width: 100%;
        } 
```

检查这个[http://jsfiddle.net/nCe8k/10/](http://jsfiddle.net/nCe8k/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:01:41.207

*如果*您希望父容器的大小固定且不溢出，则无法解决此问题。表在这方面并不灵活，并且它们具有最小大小，因此默认情况下它会延伸到父容器的边界之外。您需要使父容器更大。

```
 #outer {
        height : 200px;
        width : 300px;
        background : red;
        overflow : auto;
        padding : 10px;
    } 
```

见这里：http: [//jsfiddle.net/tMaCv/](http://jsfiddle.net/tMaCv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:03:34.030

否则，您需要告诉#inner，它的宽度为#outer 减去填充的值（在您的示例中为20px）。

但是如果你想显示一些东西，你应该考虑让#outer更大，并跟踪's的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:06:30.547

表格的问题在于它们总是试图显示它们的全部内容。4 次相邻的“随机”一词需要超过 200px 的空间。但这不会使父元素调整大小。实际上有4个解决方案：

1.  使用 js 计算表格的实际宽度
2.  使用更宽的桌子（如果可能）:-)
3.  使用溢出：隐藏，这样它至少不会弄乱你的布局
4.  对外部元素使用宽度的 min-width insetad

# c++ - 如何正确设置相同类型的组合成员的值

> ID：14497271
> 
> 赞同：1
> 
> 时间：2013-01-24T08:53:25.700
> 
> 标签：c++, design-patterns, polymorphism

假设我有一个名为 Person 的类，它拥有三种宠物：

```
class Person
{
public:
    accept(Pet a);
private:
    Dog d;  // is a Pet
    Cat c;  // is a Pet
    Fish f; // is a Pet
}

Person::accept(Pet a)
{
    // if pet is Dog, then
    d = a;
    // if pet is Cat, then
    c = a;
    // if pet is Fish, then
    f = a;
}; 
```

我想`typeid`这里可以使用。但是，它对我来说仍然很奇怪。

是否可以应用某种多态性、虚函数或一些 OOP 模式？

- 编辑 -

对不起这里的坏例子。让我试试另一个：

```
// Usually a context contains three different resources:
class Context
{
public:
    setResource(Resource *r);
private:
    Buffer *b_;    // is a Resource
    Kernel *k_;    // is a Resource
    Sampler *s_;   // is a Resource
};
Context::setResource(Resource *r) { // same logic as Person::accept() above }
Context::handlingBuffer() { if (b_) b_->init(); ... }
Context::run() { 
    if (b_ && k_) { 
        k_.setBuffer(b_); 
        k_.run(); 
    }
}
... 
```

在这种情况下，看起来添加一个`Resource *r_[3]`in`Context`会使事情变得更加复杂。

那么，是否可以将 Resource 基类的指针传递给`setResource()`，它可以自动决定设置哪个资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:58:02.913

由于您`Pets`按值持有，因此您可以忘记多态性并重载`accept`成员函数：

```
class Person
{
public:
    accept(const Dog& a)  { d_ = a; }
    accept(const Cat& a)  { c_ = a; }
    accept(const Fish& a) { f_ = a; }
private:
    Dog d_;  // is a Pet
    Cat c_;  // is a Pet
    Fish f_; // is a Pet
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:17:46.533

让代码依赖于运行时类型的常用方法是*双重调度*，也就是访问者模式：

```
class ResourceContext
{
public:
    virtual void setResource(Buffer* r) = 0;
    virtual void setResource(Kernel* r) = 0;
    virtual void setResource(Sampler* r) = 0;
};

class Resource
{
public:
    virtual void AddToContext(ResourceContext* cxt) = 0;

    [... rest of Resource ...]
};

class Buffer : public Resource
{
public:
     void AddToContext(ResourceContext* cxt) { cxt->SetResource(this); }
};

// Likewise for Kernel and Sampler.

class Context : public ResourceContext
{
public:
    void setResource(Resource* r) { r->AddToContext(this); }
    void setResource(Buffer *r)  { b_ = r; }
    void setResource(Kernel *r)  { k_ = r; }
    void setResource(Sampler *r) { s_ = r; }
private:
    Buffer *b_;    // is a Resource
    Kernel *k_;    // is a Resource
    Sampler *s_;   // is a Resource
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:53:12.917

对于您的简单示例代码，我同意 juanchopanza。但是，如果你想`class Person`用指针保持结构，你可以使用`dynamic_cast<>`，例如

```
struct Pet { /* ... */ };
struct Dog : public Pet { /* ... */ };
struct Cat : public Pet { /* ... */ };
struct Fish : public Pet { /* ... */ };
struct Spider : public Pet { /* ... */ };

class Person {
  Dog*dog;
  Cat*cat;
  Fish*fish;
  Spider*yuck;

  template<typename PetType>
  static bool accept_pet(Pet*pet, PetType*&my_pet)
  {
    PetType*p = dynamic_cast<PetType*>(pet);
    if(p) {
      my_pet = p;
      return true;
    }
    return false;
  }
public:
  Person()
  : dog(0), cat(0), fish(0), yuck(0) {}
  void accept(Pet*pet)
  {
    if(accept_pet(pet,dog)) return;
    if(accept_pet(pet,cat)) return;
    if(accept_pet(pet,fish)) return;
    if(accept_pet(pet,yuck)) return;
    throw unknown_pet();
  }
}; 
```

我应该补充一点，`dynamic_cast<>`如果可以的话，应该避免这种情况。通常（但不总是）`dynamic_cast<>`可以改进必要的设计以避免这种情况。这也适用于这里，当简单地重载`accept()`（如 juanchopanza 的答案）是一种替代方法时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:44:12.033

受@molbdnilo 的启发，我找到了一种更简单的方法来实现我的目标：

```
class Resource
{
public:
    virtual void AddToContext(Context* c) = 0;
};

class Buffer : public Resource
{
public:
    void AddToContext(Context* c) { c->SetResource(this); }
};

// Likewise for Kernel and Sampler

class Context
{
public:
    void SetResource(Resource *r) { r->AddToContext(this); }
    void SetResource(Buffer *b) { b_ = b; }
    void SetResource(Kernel *k) { k_ = k; }
    void SetResource(Sampler *s) { s_ = s; }
    ...
private:
    Buffer *b_;
    Kernel *k_;
    Sampler *s_;
}; 
```

在这一点上，它不太像访问者模式，但它相对简洁并且效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:04:13.510

对我来说，这种方法本身看起来是错误的。正如@LihO 在他的评论中所说，多态有助于以相同的方式处理不同类型的对象。因此，从多态性的角度来看，您的设计应如下所示：

```
// Usually a context contains three different resources:
class Context
{
public:
    setResource(Resource *r);
private:
    std::vector<Resource*> resources_;
}; 
```

其余的应该通过`Resource`类的虚函数来解决。

经常使用`dynamic_cast`意味着你的设计并不完美。

# git - 为什么 git format-patch 静默失败？

> ID：14497272
> 
> 赞同：1
> 
> 时间：2013-01-24T08:53:26.220
> 
> 标签：git, format-patch

我发出这些：

```
git format-patch 2f3e744 2f3e744^ 
```

或者

```
git format-patch 2f3e744..3e853 
```

在后者中，3e853 是早于 2f3e744 的提交。

这两个命令都没有导致一些变化（不是我期望的结果）。

我的目标是根据修订版 3e853 的更改制作补丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:11:26.673

你的主题实际上是错误的。你的命令行没有提供，它提供了`^2f3e744 3e853`，它不包括你的提交。正确的写法是`git format-patch 3e853..2f3e744`. 你也可以这样做：

*   `git format-patch -1 3e853`- 这意味着从 3e853 开始进行 1 次提交。
*   `git format-patch 3e853 '^3e853^'`- 这意味着将领先设置为 3e853，并减去它之前的所有内容。注意引号。一些 shell 会尝试解释插入符号 (^)，因此您可能需要它们。

文档是获取此信息的[`git rev-list`](http://www.kernel.org/pub/software/scm/git/docs/git-rev-list.html)好资源。

**更新**：您的标题已更改，现在是第一个示例。它可能不会产生任何东西，因为你的历史很短。我希望第一个命令为 2f3e744 之前的所有内容发出补丁。

# ios - 如何在 Mobile Safari 中弹出“将我的应用程序添加到跳板”通知？

> ID：14497274
> 
> 赞同：1
> 
> 时间：2013-01-24T08:53:29.980
> 
> 标签：ios, mobile-safari

对于某些网站/Web 应用程序，在网站上使用 Mobile Safari 会导致弹出窗口提示用户可以将网站/应用程序添加到他们的主屏幕。我试图复制它，但我无法弄清楚。

是否有一个 JS 库来执行此操作，或者是否有一个元标记可以添加到我的 html 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:55:48.390

他们中的大多数使用从 cubiq[添加到主屏幕](http://cubiq.org/add-to-home-screen)

# python - 如何将文本框中的字符串传递给函数

> ID：14497279
> 
> 赞同：1
> 
> 时间：2013-01-24T08:54:01.243
> 
> 标签：python, python-2.7, gtk, glade

我正在为我的日志解析脚本编写一个基本的 gui。我使用 GTK 2x、Glade 和 Python 2.7.3。

我定义了一些全局变量，需要根据用户在 gui 文本框中的输入来更改这些变量。整个布局是在空地中进行的。任何提示如何将字符串和值从小部件传递到 GUI 类之外的函数？

glade 文件中的示例文本框定义：

```
<child>
      <object class="GtkEntry" id="serverIDtext">
        <property name="visible">True</property>
        <property name="can_focus">True</property>
        <property name="invisible_char">●&lt;/property>
        <property name="text" translatable="yes">Server name.</property>
        <property name="primary_icon_activatable">False</property>
        <property name="secondary_icon_activatable">False</property>
        <property name="primary_icon_sensitive">True</property>
        <property name="secondary_icon_sensitive">True</property>
      </object>
      <packing>
        <property name="top_attach">2</property>
        <property name="bottom_attach">3</property>
      </packing>
    </child> 
```

图形界面类：

```
import pygtk
import gtk
import gtk.glade

from pyParse2 import *

class GUI:
  def __init__(self):    
    builder = gtk.Builder()
    builder.add_from_file("parsergui.glade")
    self.window = builder.get_object("window1")
    builder.connect_signals(self)

  def on_window_destroy(self, widget, data = None):
    gtk.main_quit()

  def parseButton(self, widget, data = None):
    parseLaunch() 
```

根据 MG 进行编辑。建议：我尝试了您的第一个建议并准备了如下内容：

```
import pygtk
import gtk
import gtk.glade

from pyParse2 import *

class GUI:
  def __init__(self):    
    builder = gtk.Builder()
    builder.add_from_file("parsergui.glade")
    self.window = builder.get_object("window1")
    builder.connect_signals(self)
    self.sID = builder.get_object("serverIDtext")

  def on_window_destroy(self, widget, data = None):
    gtk.main_quit()

  def parseButton(self, widget, data = None):
    global serverID
    serverID = self.sID
    print serverID
    parseLaunch() 
```

得到了这个：

```
<gtk.Entry object at 0x2a97a58 (GtkEntry at 0x20e9118)> 
```

据我了解（我很可能是错的），我不能使用 get_text，但必须执行 get_object，它不会返回字符串。有没有办法解决这个问题？

O_O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:37:04.633

你必须命名你的小部件，

```
global foo_widget
foo_widget = application.get_widget('foo') 
```

如果您的小部件在 GUI 构建器中命名为“foo”。

然后，您可以使用检索用户给定的值

```
foo_value = foo_widget.get_text() 
```

文档可以在[这里](http://www.ucs.cam.ac.uk/docs/course-notes/unix-courses/earlier/Glade/files/course.pdf)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:41:27.493

您可以像使用窗口一样通过 Builder 类访问条目。

```
# in __init__
self.entry = builder.get_object('serverIDtext') 
```

有一个替代方案，但一个错误的原因或对它如何工作或它应该如何工作的误解需要一些测试才能使其工作。基本上，您可以通过`User data`参数将文本框的引用传递给处理程序。当您将`parseButton`处理程序与信号相关联时，将 设置`User data`为文本框。现在棘手的部分：我不记得文本框是否作为`widget`参数或`data`参数传递，并且`Swap`复选框控制此行为。

当您引用文本框时，您可以轻松检索调用该`get_text()`方法的字符串。

# c++ - 如何从cpp文件中调用cuda函数

> ID：14497280
> 
> 赞同：1
> 
> 时间：2013-01-24T08:54:08.950
> 
> 标签：c++, cuda

> **可能重复：**
> [我可以在 C++ 中调用 cuda 函数调用吗？](https://stackoverflow.com/questions/3811539/can-i-call-cuda-function-calls-in-c)

我有功能

```
__global__ void Function(int *A, int *B, int N) {
  calculations...
}

void Function_Wrapper(int* a_h, int* b_h) {
  dimGrid, dimBlock;
  Function<<<dimGrid, dimBlock>>>(a_d,b_d,n);
} 
```

在 .cu 文件和函数内部

```
int main() {
  Create data and other crap...

  Function_Wrapper (a_h, b_h);
} 
```

但是当我尝试编译时，我得到的是：

cmain.cpp:39：错误：“Function_Wrapper”未在此范围内声明

我正在像这样编译它：

```
all: program

program: cudacode.o
    g++ -o ctp -L /usr/local/cuda/lib64 -lcuda -lcudart cmain.cpp cudacode.o 

cudacode.o:
    nvcc -c -arch=sm_20 cmain.cu 

clean: rm -rf *.o 
```

我究竟做错了什么？

编辑：我用主文件中的外部函数声明修复了缺少函数的问题，但我仍然遇到一些问题。新的生成文件：

```
all: program

program: cudacode.o
    g++ -o ctp -L /Developer/NVIDIA/CUDA-5.0/lib -lcudart cmain.cpp cudacode.o 

cudacode.o:
    nvcc -c -arch=sm_20 cmain.cu -o cudacode.o 

clean: rm -rf *.o 
```

新的错误信息：

g++ -o ctp -L /Developer/NVIDIA/CUDA-5.0/lib -lcudart cmain.cpp cudacode.o

ld：警告：忽略文件 cudacode.o，文件是为 i386 构建的，它不是被链接的架构（x86_64）：cudacode.o

架构 x86_64 的未定义符号：

“Function_Wrapper(int*, int*)”，引用自：

ccjLlw82.o 中的 _main

ld：未找到架构 x86_64 的符号

collect2: ld 返回 1 个退出状态

make: *** [程序] 错误 1

PS：使用macosx

# php - Symfony2 + 学说的查询构建器 - where != 1

> ID：14497281
> 
> 赞同：0
> 
> 时间：2013-01-24T08:54:09.757
> 
> 标签：php, symfony, doctrine

我有一个函数可以创建对我的数据库的查询，如下所示：

```
public function getList($u, $t, $ls, $lf) {
        return $this->getEntityManager()
            ->createQuery('
                    SELECT
                        o,
                        u,
                        g,
                        r,
                        t,
                        p
                    FROM GameShelfUsersBundle:Own o
                    LEFT JOIN o.user u
                    LEFT JOIN o.game g
                    LEFT JOIN o.rate r
                    LEFT JOIN o.typo t
                    LEFT JOIN o.platforms p
                    WHERE u.id = :user
                    AND o.typo = :type
                    ORDER BY o.updated DESC
                ')
            ->setParameters(array(
            'user' => $u,
            'type' => $t
            ))
            ->setMaxResults($lf)
            ->setFirstResult($ls)
            ->getResult();
    } 
```

我的问题是，如何设置`:type`为`not in`？我的意思是，我想这样使用它：

```
$type = '!= 1'
...
AND o.typo :type
...
'type' => $type 
```

但它根本没有用。使用`$type = -1`也无济于事。除了创建 if/else 语句和复制查询之外，还有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:08:20.873

你为什么不使用[查询生成器](http://docs.doctrine-project.org/en/2.0.x/reference/query-builder.html)？

通过这种方式，您可以根据某些条件轻松自定义查询。

这是一个例子：

```
$q = $this
        ->createQueryBuilder('foo')
        ->select('foo')
        ->leftJoin('foo.bar', 'foobar')
        ->leftJoin('foobar.bar', 'foobarbar')
        ;
if($myVar > 0)
{
 $q->where('foobarbar.var = :myVar');
}
else
{
 $q->where('foobarbar.var = :staticValue');
} 
[...] 
```

`return $q->getResult();`记得最后打电话

# ruby-on-rails - 红宝石自定义路线

> ID：14497282
> 
> 赞同：0
> 
> 时间：2013-01-24T08:54:09.887
> 
> 标签：ruby-on-rails, ruby, routes

我是 ruby​​ on rails 的新手。

这是我的路线.rb

```
RpxNowExample::Application.routes.draw do

  root :to => "users#index"
  resources :users
end 
```

通常我的功能运行良好，但我想进行调整。如果条件为真，我希望它使用同一个控制器调用另一个操作重定向到另一个视图“promptemail”，即

```
if(@provider == "Twitter")

     redirect_to :action => :promptemail

end 
```

它应该把我带到那个`promptemail`观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:58:04.987

您可以将块传递给您的资源定义以在标准之外添加额外的操作：

```
resources :users do
  match :promptemail, :via => [:get], :on => :member
end 
```

该`:via`选项允许您限制 get、post、put 等，该`:on`参数将采用 :member 或 :collection。

`:collection`将对集合进行操作，与索引操作类似，`:member`将对单个记录进行操作。因此，如果您将路线指定为`:on => :member`，则需要在生成路线时提供对象或 id。

可以在此处找到有关向资源添加路由的更多信息：http: [//guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:22:12.703

使用同一个控制器调用另一个动作-

尝试：

**路线.rb：**

```
RpxNowExample::Application.routes.draw do

  root :to => "users#index"
  resources :users do
     collection do
        get 'promptemail'
      end 
```

**你的控制器：**

```
if(@provider == "Twitter")

     redirect_to :promptemail

end 
```

**注意：** - 无需调用`action`，`redirect_to`因为您在同一控制器中调用操作。

# java - 即使我没有更改或设置任何值，为什么全局列表也会受到影响？

> ID：14497283
> 
> 赞同：2
> 
> 时间：2013-01-24T08:54:09.923
> 
> 标签：java, list, arraylist

这是我的示例对象
`object name: OBJ`
`object properties: String name, int age`

现在我有 2 个全局列表

```
List<OBJ> lstobj = new ArrayList<OBJ>;
List<OBJ> anotherlist = new ArrayList<OBJ>; 
```

然后我像这样在两个列表中添加了一些记录

`Name:Ben Age:5`
`Name:Charles Age: 6`
`Name:Dan Age:7`

现在我需要将查尔斯的年龄改为“10”

所以首先我应该在列表中找到 Charles 并从列表中获取 obj

```
OBJ newobj = new OBJ;
for(OBJ obj : lstobj){
  if(obj.getName.equals("Charles"){
    newobj = obj;
   }
} 
```

现在我需要将检索到的 obj 的年龄设置为 10。

`newobj.setAge(10);`

此操作不仅会更改“lstobj”，还会更改“anotherlist”。如何在不影响两个全局列表的情况下设置检索到的 obj？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:03:43.787

列表存储对对象的引用。如果您将相同的引用粘贴到多个列表中，然后更改对象，它会随处更改。

如果您希望 和 的内容`lstobj`彼此`anotherlist`完全独立，则需要在其中插入不同的对象。这可能涉及复制您的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T09:08:55.523

尝试使用复制构造函数

```
public class Person {

    private String name;
    private String age;

    public Person(String name,String age) {
        this.name = name;
        this.age = age;
    }

    public Person(Person person){
        this.name = person.getName();
        this.age= person.getAge();
    }

    public Person(){    
    }

    public String getAge() {
        return age;
    }

    public void setAge(String age) {
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String toString(){
        return "[Name:"+this.name+"][Age:"+this.age+"]";
    }

    public static void main(String[] args) {

        Person person1 = new Person("Charles","20");
        Person person2 = new Person("Rob","30");

        List<Person> persons = new ArrayList<Person>();
        persons.add(person1);
        persons.add(person2);

        List<Person> morePersons = new ArrayList<Person>();
        morePersons.add(new Person(person1));
        morePersons.add(new Person(person2));

        Person newobj = new Person();
        for (Person obj : persons) {
            if (obj.getName().equals("Charles")) {
                newobj = obj;
                newobj.setAge("10");
            }
        }

        System.out.println(persons);
        System.out.println("======");
        System.out.println(morePersons);

    }
} 
```

输出是

```
run:
[[Name:Charles][Age:10], [Name:Rob][Age:30]]
======
[[Name:Charles][Age:20], [Name:Rob][Age:30]]
BUILD SUCCESSFUL (total time: 1 second) 
```

在您的情况下，您只修改一个对象，但反映在两个列表中。这是因为列表存储对象引用，这里两个列表都引用您正在修改的同一对象，因此您所做的更改会反映在两个列表中。

我在这里所做的是我正在复制对象详细信息并创建一个新对象，并且它的引用与原始对象不同。您在旧对象中所做的任何更改都不会更改新对象，因为它们具有不同的引用

# php - 获取foreach php中的最后一项

> ID：14497288
> 
> 赞同：3
> 
> 时间：2013-01-24T08:54:19.613
> 
> 标签：php, magento, collections, foreach, iterator

> **可能重复：**
> [获取 php 数组的最后 5 个元素](https://stackoverflow.com/questions/9704983/getting-last-5-elements-of-a-php-array)

嗨，我在一个数组中有**大约**11000**个项目**，我只想**显示****最后**5 或 10个**项目**

```
$i = 0;
foreach ($collection as $product_all) { 
 if($i==2) break;    
 echo $product_all->getId();        
   $neew = Mage::getModel('catalog/product')->load($product_all->getId());         
echo'<pre>';
    print_r($neew); 
$i++; 
} 
```

有了这个我得到了**前**2 个项目，我怎样才能只得到最后一个项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:13:00.910

这是 Magento，`$collection`不是数组而是迭代器。这意味着像这样的数组函数`array_slice`不起作用，但是您可以像这样以相反的顺序模拟 foreach：

```
end($collection);
while($current = current($collection)) {
    // ... (see below)
    prev($collection);
} 
```

在循环中，您将构建最后 5 个项目的数组并在拥有它们后中断：

```
$lastFive[] = $current;
if (count($lastFive) == 5) break; 
```

编辑：现在我们已经解决了您的直接问题，让我们谈谈性能。从数据库中提取 11000 个项目到内存中，只使用其中的 5 个或 10 个，这是一个非常糟糕的主意。您应该找到`$collection`加载的代码并从那里开始。它很可能是这样的：

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->setOrder('id', 'asc')->load(); 
```

这可以更改为（反向 ORDER，添加 LIMIT）：

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->setOrder('id', 'desc')->setPageSize(5)->load(); 
```

瞧，只有最后 5 个项目被加载。

更好的是，您的代码看起来只需要 id，而不是实际模型，因此整个事情可以优化为：

```
$collection = Mage::getModel('catalog/product')->getCollection();
$ids = $collection->setOrder('id', 'desc')->setPageSize(5)->getAllIds();
foreach ($ids as $id) {
    $product = Mage::getModel('catalog/product')->load($id);
    // do what you want
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:05:21.893

看看[http://php.net/manual/en/function.array-slice.php](http://php.net/manual/en/function.array-slice.php)

```
$items = array_slice($items, -5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:23:22.217

尝试这个

```
<?php
$array  = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

function foreach_last($array, $n, $func) {
    reset($array);
    end($array);
    $i  = 0;
    $n  = min($n, count($array)) - 1;
    while ( $i ++ < $n ) 
        prev($array);
    $func(current($array), key($array));
    while ( $v = next($array) ) {
        $func($v, key($array));
    }
}
function print_e($v, $k) {
    printf("k: %s, v: %s\n", $k, $v);
}

foreach_last($array, 5, 'print_e'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:07:26.917

尝试[array_slice](http://php.net/manual/en/function.array-slice.php) php 函数。

如果要保留密钥，可以传入 true 作为第四个参数：

```
array_slice($a, -5, 5, true);
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:10:24.233

您可以使用[array_slice](http://php.net/manual/en/function.array-slice.php)

```
$last = array_slice($collection, -5); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T09:10:28.877

使用您的代码示例...

```
$i = 0;
$no = count($collection);
foreach ($collection as $product_all) { 
 if($i >= ($no-10)) {
     echo $product_all->getId();        
     $neew = Mage::getModel('catalog/product')->load($product_all->getId());         
     echo'<pre>';
     print_r($neew); 
  }
  $i++; 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T09:19:22.320

如果你想要最后`X`的项目：

```
$i = 0;
$totalCount = count($collection);
$itemsCount = 5; 
$x = $totalCount - $itemsCount;

foreach ($collection as $product_all) {
    if ($i < $x) {
        $i++;
        continue;
    }
    echo $product_all->getId();
    $neew = Mage::getModel('catalog/product')->load($product_all->getId());
    echo'<pre>';
    print_r($neew);
    $i++;
} 
```

如果你只想要最后一个，你可以使用：

```
$lastItem = $collection->getLastItem(); 
```

但最好的解决方案是根据我对您的收藏进行分类和限制。如果您只想使用 5 或 10 个产品，为什么要获取 11000 多个产品（！）？`created_at`如果您在没有任何排序的情况下获得产品，那么我记得它们是按属性排序的。您可以简单地按降序排序并限制为`X`.

# jquery - jQuery - 单击时在函数之间切换

> ID：14497290
> 
> 赞同：1
> 
> 时间：2013-01-24T08:54:43.640
> 
> 标签：jquery, html, animation

**问题**
当使用 jQuery 的 .toggle() 方法单击按钮时，我试图在两个函数之间切换，但是一旦 DOM 准备好，按钮本身就会消失。

**代码**

```
$(document).ready(function() {

    $("#panel").css({"height": "0%", "bottom": "0"});

/*
    var already_clicked = false;
    $("button").on("click", function() {
        if (already_clicked) {
            $("#panel").animate({"height": "0%"}, 500);
            already_clicked = false;
        } else {
            $("#panel").animate({"height": "100%"}, 500);
            already_clicked = true;
        }
    });
*/

    $("button").toggle(function() {
        $("#panel").animate({"height": "100%"}, 500);
    }, function() {
        $("#panel").animate({"height": "0%"}, 500);
    });

}); 
```

**标记**

```
<body>
    <div id="panel"></div>
    <button>Click me</button>
</body> 
```

**注意**：注释块中的解决方案按预期工作，但我不确定为什么 .toggle() 不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:57:58.467

如果这是您想要的，我不使用，但是[`.slideToggle`](http://api.jquery.com/slideToggle/)：

```
$("button").click(function() {
    $("#panel").slideToggle(500);
}); 
```

可能是你要问的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T08:58:17.510

如果您使用的是 jQuery 1.9，那么`.toggle`就不会那样工作 - 将两个函数作为参数的版本在 1.8 中已被弃用并在 1.9 中被删除

见[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

# wpf - WPF：防止组合框吞噬 Keydown 事件

> ID：14497295
> 
> 赞同：1
> 
> 时间：2013-01-24T08:55:01.383
> 
> 标签：wpf, events

所以我有一个处理`KeyDown`事件的窗口。除以下两种情况外，一切都按预期工作：

1.  向上/向下箭头键被按下并
2.  窗口上的组合框有多个项目。

即使我从未点击过组合框，这似乎也无关紧要。组合框上的`SelectionChanged`事件在*Window*甚至触发其`KeyDown`事件之前触发。这对我来说似乎非常违反直觉。

我对 WPF 事件传播知之甚少，甚至不知道从哪里开始寻找解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:16:27.100

您应该订阅`PreviewKeyDown`事件。

# cuda - 如何在 CUDA 中进行零填充以进行协变

> ID：14497297
> 
> 赞同：0
> 
> 时间：2013-01-24T08:55:08.757
> 
> 标签：cuda, padding, zero, convolution

嗨，我必须使用 CUFFT 对两个信号 [pulseMatrixRow[i] 和 pulse[i]] 进行卷积。因为我的代码是 int main(int argc, char **argv)

```
{
FILE *fileWritePtr;
cufftComplex h_signal[NX*BATCH];
cufftComplex h_filter_signal[NX*BATCH];
cufftComplex hf_signal[NX*BATCH];   

// Initalize the memory for the signal
for (unsigned int i = 0; i < SIGNAL_SIZE; ++i)
{
    h_signal[i].x = pulseMatrixRow[i];
    h_signal[i].y = pulseMatrixRow[i];
}

// device memory allocation 
    cudaMalloc((void**)&d_signal, sizeof(cufftComplex)*NX*BATCH);

// transfer to device memory
cudaMemcpy(d_signal, h_signal, sizeof(cufftComplex)*NX*BATCH, cudaMemcpyHostToDevice);

// Initalize the memory for the filter
for (unsigned int i = 0; i < FILTER_signal_SIZE; ++i)

{
    h_filter_signal[i].x = pulse[i];
    h_filter_signal[i].y = pulse[i];
}

// device memory allocation 
    cudaMalloc((void**)&d_filter_signal, sizeof(cufftComplex)*NX*BATCH);

// transfer to device memory
   cudaMemcpy(d_filter_signal, h_filter_signal, sizeof(cufftComplex)*NX*BATCH,         cudaMemcpyHostToDevice);

  // CUFFT plan

  cufftPlan1d(&plan, NX, CUFFT_C2C, BATCH);

  // Transform signal and fsignal

 printf("Transforming signal cufftExecC2C\n");
  cufftExecC2C(plan, (cufftComplex *)d_signal, (cufftComplex *)d_signal,     CUFFT_FORWARD);

printf("Transforming filter_signal cufftExecC2C\n");
cufftExecC2C(plan, (cufftComplex *)d_filter_signal, (cufftComplex     *)d_filter_signal, CUFFT_FORWARD);

// Multiply the coefficients together 
ComplexPointwiseMulAndScale<<<blocksPerGrid, threadsPerBlock>>>(d_signal, d_filter_signal, NX, 1.0f/NX*BATCH);

// Transform signal back
printf("Transforming signal back cufftExecC2C\n");
cufftExecC2C(plan, (cufftComplex *)d_signal, (cufftComplex *)d_signal, CUFFT_INVERSE);

// transfer results from GPU memory 

cudaMemcpy(hf_signal, d_signal, sizeof(cufftComplex)*NX*BATCH,cudaMemcpyDeviceToHost);

fileWritePtr = fopen("OutputData1.txt","w+");

for(i = 0; i < NX ; i++){
    //printf("%f %f\n", i, hf_signal[i].x, hf_signal[i].y);
     fprintf(fileWritePtr,"%d %f %f\n", i, hf_signal[i].x, hf_signal[i].y);
     }
fclose(fileWritePtr);

//Destroy CUFFT context
cufftDestroy(plan);

 // cleanup memory
 cudaFree(d_signal);
 cudaFree(d_filter_signal);

 // free(h_signal);
 // free(h_filter_signal);

return 0;

 } 
```

我的 matlab 生成的 pulseMatrix 代码如下：

```
pulse = [ones(1,50) zeros(1,500-50)];
pulseMatrix = repmat(pulse,10,1);
pulseMatrix = pulseMatrix.';
pulseMatrixRow = pulseMatrix(:); 
```

但我必须一次只处理 1000 个 pulseMatrixRow 样本，然后一个一个地休息为 1000 个。由于我的 fft 是 1024.，请告诉我必须如何以及在哪个阶段在输入信号的末尾填充零，以及我的滤波器信号简单地给出为脉冲 = [ones(1,50) zeros(1,500- 50)];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:03:08.327

您可以`memset()`在将主机内存传输到设备内存之前将其填充为零，或者

`cudaMemset()`在执行 fft 之前和主机到设备内存传输之后，您可以使用将设备内存的填充归零。

使用方法请参考[此链接](http://en.cppreference.com/w/c/string/byte/memset)`memset()`。

使用方法请参考[此链接](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1ge07c97b96efd09abaeb3ca3b5f8da4ee)`cudaMemset()`。

# c# - 使用 STS 令牌连接到 Organization.svc

> ID：14497301
> 
> 赞同：1
> 
> 时间：2013-01-24T08:55:19.760
> 
> 标签：c#, dynamics-crm-2011

我现在尝试 2 天从 ADFS 获取 STS 令牌。我制作了 ASP.Net 应用程序，需要在托管 CRM 上被认证为用户。在 ADFS 上获取当前登录用户（从这台机器）并使用他的凭据以他身份登录到 CRM 2011 的最简单方法是什么。我无法使用网络凭据，因为我正在通过 STS 登录托管服务器。

我尝试使用[此链接](http://technet.microsoft.com/en-us/library/gg509057.aspx)`sdk\samplecode\cs\generalprogramming\authentication\ifdsinglesignon\`运行示例， 但仍然无法获得认证。我必须说我不需要使用用户、域和通行证，因为我无法获得它们。**必须使用令牌**。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:11:07.817

AFAIK，我们可以使用 Visual Studio 2010 添加 sts 参考：

1.  打开 Visual Studio，然后右键单击项目以添加 STS 引用。
2.  浏览您的应用程序配置位置 (web.config)。
3.  对于应用程序 URI，请使用您的自定义 asp.net 网站地址。（例如：[https://customweb.mscrm.com](https://customweb.mscrm.com)）
4.  然后单击下一步转到安全令牌服务页面并选择使用现有 STS 选项。对于 STS WS-Federation 元数据文档位置，请使用：https:///FederationMetadata/2007-06/FederationMetadata.xml
5.  在此步骤之后，选择适合您的选项。

您将拥有经过修改以指向 STS 的 FederationMetadata 和 Web.config。希望这能回答

干杯**

# java - 在arrayList中访问另一个字符串之前和之后的字符串

> ID：14497304
> 
> 赞同：0
> 
> 时间：2013-01-24T08:55:21.643
> 
> 标签：java, for-loop, arraylist, indexoutofboundsexception

如果我在我的 arrayList 中搜索第 5 项，我还想获得第 4 项和第 6 项。最终的 if 语句中提供了此代码，并定义为 (i - 1) 和 (i + 1)。到目前为止，这是我的代码：

```
import java.util.ArrayList;

public class PlanetsList {
public static void main(String args[]) {

    ArrayList<String> planets = new ArrayList<String>();
    String names[] = { "Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranis", "Neptune", "Pluto"};

    for (int i = 0, n = names.length; i < n; i++) {
        planets.add(names[i]);
        String value = (String) planets.get(i);

        if(value.contains("Mars")) {
            String newNum = value.replace(value, "Red planet ");
            planets.set(i,newNum);     
        }
        if(value.contains("Uranis")) {
            String wordBefore = (String) planets.get(i-1);
            String wordAfter = (String) planets.get(i+1);
            String newNum = value.replace(value, "Uranus ");
            planets.set(i,newNum);
            System.out.println("This is the word before " + wordBefore);
            System.out.println("This is the word after " + wordAfter);
            planets.remove(i-1);  
        }
    }
    System.out.println(planets);
}
} 
```

有了这个我得到一个 indexoutofbounds 异常，这显然是由最终 if 语句中的 wordAfter 行引起的，并且因为 for 循环没有遍历整个 arrayList。最后的 if 语句不需要和另一个 if 语句在同一个 for 循环中，但如果它在不同的循环中，replace 方法必须能够将被替换的单词放回正确的位置。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:07:30.403

此行导致问题。

```
 String wordAfter = (String) planets.get(i+1); 
```

因为最大索引是 i。

如果您按照以下方式进行检查会更好。

```
public static void main(String args[]) {

    ArrayList planets = new ArrayList();
    String names[] = { "Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranis", "Neptune", "Pluto"};

    for (int i = 0, n = names.length; i < n; i++) {
        planets.add(names[i]);

    }
    for (int i = 0, n = names.length; i < n; i++) {

        String value = (String) planets.get(i);

        if(value.contains("Mars")) {
            String newNum = value.replace(value, "Red planet ");
            planets.set(i,newNum);     
        }
        if(value.contains("Uranis")) {
            String wordBefore = (String) planets.get(i-1);
            String wordAfter = (String) planets.get(i+1);
            String newNum = value.replace(value, "Uranus ");
            planets.set(i,newNum);
            System.out.println("This is the word before " + wordBefore);
            System.out.println("This is the word after " + wordAfter);   
        }
    }
    System.out.println(planets);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T08:59:58.913

完成将字符串添加到您的列表中，然后再次尝试迭代列表以获取您的逻辑。您正在尝试`get(i+1)`何时`i`将最大值添加到您的列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:12:03.300

You can use Arrays.asList to convert your array into a List and then iterate through the list to do your processing. You should check anyway that the index of wordBefore and wordAfter are within the List limits.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T09:04:55.330

我认为这将解决您的问题

你的代码给出了异常

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 7, Size: 7
at java.util.ArrayList.rangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at PlanetsList.main(PlanetsList.java:20) 
```

**这是一个工作：**

```
import java.util.ArrayList;

public class PlanetsList {
public static void main(String args[]) {

ArrayList planets = new ArrayList();
String names[] = { "Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranis", "Neptune", "Pluto"};

for (int i = 0, n = names.length; i < n; i++) {
planets.add(names[i]);
}
for (int i = 0, n = names.length; i < n; i++) {
String value = (String) planets.get(i);

if(value.contains("Mars")) {
String newNum = value.replace(value, "Red planet");
planets.set(i,newNum);     
}
 if(value.contains("Uranis")) {
String wordBefore = (String) planets.get(i-1);
String wordAfter = (String) planets.get(i+1);
String newNum = value.replace(value, "Uranus");
planets.set(i,newNum);
System.out.println("This is the word before " + wordBefore);
System.out.println("This is the word after " + wordAfter);   
 }
}
System.out.println(planets);
}
} 
```

我对您的代码进行了两项更改：

1.  采取了两个 for 循环
2.  `spaces`从以下两行中删除

    ```
    String newNum = value.replace(value, "Red planet ");
    String newNum = value.replace(value, "Uranus "); 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T09:01:38.467

planets.add(names[i]);...在这一行中，只有你正在向 arraylist 添加一个值。此时，你的 arraylist 的大小是 i。不增加 i 或向 arraylist 添加任何值，你正在尝试在 i+1 处访问元素..所以它肯定会抛出 IOB 异常

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T09:16:15.960

我也觉得这个问题不是不言自明的......但是如果您需要在数组列表中的特定项目之前和之后获取元素，您可以这样做。

我的假设是您已经有一个预先填充了值的列表。

```
String names[] = { "Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranis", "Neptune", "Pluto"};

List<String> planets = java.util.ArrayList.asList(names);

if (planets.contains("Uranis") ) {
   int currentIndex = planets.indexOf("Uranis");       
   String previousItem = planets.get(currentIndex-1);
   // To ensure that we have an element next to the current one. 
   if (currentIndex < (planets.size() - 1 )) {
    String nextItem = planets.get(currentIndex+1); 
   }
} 
```

我希望这能帮到您

~拉吉什

# django - Django：可编辑的 BINARY 字段，在 Admin 中显示为 HEX

> ID：14497306
> 
> 赞同：1
> 
> 时间：2013-01-24T08:55:25.677
> 
> 标签：django, django-models

**更新**我现在认为有*一个*定义的理由`get_prep_value()`，这样做可以提高 Django 对该字段的使用。我也能够摆脱包装类。最后，所有这些都使我能够`__getattribute__ implementation with the data model, which was annoying. So, apart from Django calling`超级频繁地消除 to_python()`，就我所见，我现在很好。**/更新**

一天早上，您醒来发现自己在 Python 2.6.8 上使用 Django 1.4.2 和 DjangoRESTFramework 2.1.2。嘿，事情肯定会更糟。这个 Django 管理魔法为您提供了易于指定的关系数据模型的表单，使维护数据库的编辑部分成为一种乐趣。RESTful URL 背后的业务逻辑会根据需要访问编辑数据和特定的数据库表，甚至这些都显示在 Django 管理员中，部分原因是它很容易完成并且很好用，部分原因是一些自动生成的记录需要一个迷你工作流程.

可是等等。您还没有将**这些二进制字段实现为 BINARY。他们是 VARCHARS**。你已经把它放在你的待办事项列表中以备后用。后来就是现在。

好的，有些表大小很小的一次写入多次读取的情况下，优化不一定会付出代价。但在另一种情况下，由于表中频繁的 INSERT 和 DELETE 会变大，您会浪费存储空间和性能。

那么你想拥有什么？DB 和 Django 之间的**清晰映射，其中 DB 存储 BINARY，而 Django 处理**两倍长度的十六进制字符串。不可能那么难实现，不是吗？

您在 Web 上搜索并找到想要 CHAR 而不是 VARCHAR 的人，还有其他想要 BLOB 的人，而且每个人的做法似乎都有些不同。最后，您将在正式处理 VARCHAR -> CHAR 案例的地方[编写自定义模型字段。](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)因此，您决定使用此信息。

从`__init__()`,`db_type()`和开始`to_python()`，您会注意到它`to_python()`很少被调用，并且`__metaclass__ = models.SubfieldBase`仅添加到 Django 现在调用的数字，`to_python()`即使它之前已经这样做过。页面上的其他建议突然开始对您更有意义，因此您要将数据包装在一个类中，这样您就可以保护它免受重复调用`to_python()`. 你也按照建议去`Put a __str__() or __unicode__() method on the class you're wrapping up as a field`实施`get_prep_value()`。

虽然生成的代码没有达到您的预期，但您注意到的一件事是到目前为止**`get_prep_value()`从未被调用**，因此您现在将其删除。您*所做*的事情是，**Django 似乎始终`str`从 DB 和`unicode`从 admin**获得 a ，这很酷，并最终得到类似的东西（归结为要领，真的）。

```
class MyHexWrappeer(object):
    def __init__(self, hexstr):
        self.hexstr = hexstr
    def __len__(self):
        return len(self.hexstr)
    def __str__(self):
        return self.hexstr

class MyHexField(models.CharField):
    __metaclass__ = models.SubfieldBase
    def __init__(self, max_length, *args, **kwargs):
        assert(max_length % 2 == 0)
        self.max_length = max_length
        super(MyHexField, self).__init__(max_length=max_length, *args, **kwargs)
    def db_type(self, connection):
        return 'binary(%s)' % (self.max_length // 2)
    def to_python(self, data):
        if isinstance(data, MyHexWrapper): # protect object
            return data
        if isinstance(data, str): # binary string from DB side
            return MyHexWrapper(binascii.b2a_hex(data))
        if isinstance(data, unicode): # unicode hex string from admin
            return MyHexWrapper(data) 
```

而且……这行不通。当然，原因是虽然您找到了一种可靠的方法来`MyHexWrapper`从包括 Django 本身在内的所有来源创建对象，但显然缺少向后的路径。从上面的评论中，您认为 Django 调用`str()`或`unicode()`为 admin 并`get_prep_value()`在 DB 的方向。但是，如果您在`get_prep_value()`上面添加，它将永远不会被调用，并且您会被卡住。

那不可能，对吧？所以你不愿意轻易放弃。突然你有了这个讨厌的想法，你正在做一个测试，它起作用了。你不知道该笑还是该哭。

所以现在你试试这个修改，不管你信不信，它确实有效。

```
class MyHexWrapper(object):
    def __init__(self, hexstr):
        self.hexstr = hexstr
    def __len__(self):
        return len(self.hexstr)
    def __str__(self): # called on its way to the DB
        return binascii.a2b_hex(self.hexstr)
    def __unicode__(self): # called on its way to the admin
        return self.hexstr 
```

它只是工作？好吧，如果你在代码中使用这样的字段，比如 RESTful URL，那么你必须确保你有正确的字符串类型；这是纪律问题。

但是，它仍然只在大多数时候有效。因为当您将这样的字段设为主键时，Django 会调用`quote(getattr())`，而我发现一个声称`getattr()`“现在”将使用的消息来源`unicode()`我无法确认。但是，一旦你走到这一步，这并不是一个严重的障碍，是吗？

```
class MyModel((models.Model):
    myhex = MyHexField(max_length=32,primary_key=True,editable=False)
    # other fields
    def __getattribute__(self, name):
        if (name == 'myhex'):
            return unicode(super(MyModel, self).__getattribute__(name))
        return super(MyModel, self).__getattribute__(name) 
```

奇迹般有效。但是，现在您向后倾斜并从整体上查看您的解决方案。而且您不禁想到这是**对您提到的文档的转移**，它使用了您不打算使用的**未记录或内部行为特征，并且****容易出错并且对开发人员显示出较差的可用性**由于您必须实施和遵守的内容的某种分散性质。

那么**如何以更清洁的方式实现目标呢？**在 Django 中是否有另一个级别的钩子和魔法应该位于这个映射的位置？

感谢您的时间。

# android-ndk - 如何使用ndk-r8d在android eclipse中调试jni文件

> ID：14497308
> 
> 赞同：0
> 
> 时间：2013-01-24T08:55:39.957
> 
> 标签：android-ndk

Android 2.3，ndk 8 我在 google 上搜索了很多文章，但没有给出任何结果 请告诉我在 Eclipse 中使用 ndk r8d 调试本机代码 JNI/c++ 应用程序的简单步骤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:58:54.950

ASAIK 有一个缺点，你不能调试 Android 项目的 JNI 部分，是的，你可以做一件事，就是将 Android Debug 放在 JNI 类中你想要响应的地方

```
 __android_log_print(ANDROID_LOG_ERROR, "TRACKERS", "%s", Str); 
```

包含以下内容

```
#include <android/log.h> 
```

# android - 如何访问viewpager中的片段内edittext的值

> ID：14497317
> 
> 赞同：8
> 
> 时间：2013-01-24T08:56:11.307
> 
> 标签：android, android-viewpager, fragment

我有一个 mainActivity，它由视图寻呼机中的 3 个片段活动组成。每个片段由编辑文本组成。水平滑动片段时如何获取编辑文本的值？我正在尝试这样做。下面的代码

```
public class MainActivity extends FragmentActivity  {

int value = 0;
Context context;
String a = "";

SectionsPagerAdapter mSectionsPagerAdapter;

ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    // getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.activity_main);

    // Set up the action bar.
    //final ActionBar actionBar = getActionBar();
//  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    mAddButtonB = (Button) findViewById(R.id.addnewB);

    mAddSearchV = findViewById(R.id.addnewSearch);
    mAddButtonB.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            mAddSearchV.setVisibility(View.GONE);
            mSectionsPagerAdapter = new SectionsPagerAdapter(
                    getSupportFragmentManager());
            mViewPager = (ViewPager) findViewById(R.id.customviewpager);
            mViewPager.setAdapter(mSectionsPagerAdapter);

        }
    });
        }

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    PageZero p0;
    PageOne p1;
    PageTwo p2;

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
        p0 = new PageZero();
        p1 = new PageOne();
        p2 = new PageTwo();
    }

    @Override
    public Fragment getItem(int position) {

        switch (position) {
        case 0:
             return p0;
        case 1:
            return p1;
        case 2:
            return p2;
        }
        return null;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }

}
// PageZero = (Fragment1)getFragmentManager().findFragmentByTag("frag1");
public class PageZero extends Fragment {
 private  EditText name;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.componentname, container,
                false);
        name=(EditText)view.findViewById(R.id.nameTV);

        name.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                a=name.getText().toString().trim();
                Toast.makeText(getApplicationContext(),a,Toast.LENGTH_SHORT).show();

            }
        });/*(new OnKeyListener() {

            public boolean onKey(View v, int keyCode, KeyEvent event) {
                // TODO Auto-generated method stub
                a=name.getText().toString().trim();
                Toast.makeText(getApplicationContext(), a,Toast.LENGTH_SHORT).show();
                return false;
            }
        });*/
        return view;
    }
}

public class PageOne extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.componentaddress, container,
                false);

        return view;
    }
}

public class PageTwo extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.componentmobno, container,
                false);
        return view;
    }
}

} 
```

当我尝试访问 pageZero 类中的 eddittext 时，如下所示

```
 name=(EditText)view.findViewById(R.id.nameTV);
 a=name.getText().toString().trim(); 
```

我得到空值。帮帮我..提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:02:20.913

像这样更改 pagezero 类 oncreateview 代码.....

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view =getActivity().getLayoutInflater().inflate(R.layout.componentname,null);
        name=(EditText)view.findViewById(R.id.nameTV);

        name.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                a=name.getText().toString().trim();
                Toast.makeText(getApplicationContext(),a,Toast.LENGTH_SHORT).show();

            }

 return view;
        }); 
```

返回视图朋友，然后使用默认布局充气器......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T09:50:00.743

在你点击edittext字段的时候，有没有内容？也许您应该在edittext字段的丢失焦点事件中获取文本。因此，您可以先输入一些文本...

**例子：**

```
name.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus == false){
                //get text from edittext field...
            }

        }
    }); 
```

您尝试获取文本的方式对我来说是正确的。至少我是这样做的。

在 PagerAdapter 的 'getItem' 方法中，您应该直接实例化您的片段：

```
@Override
public Fragment getItem(int position) {     
    switch (position) {
        case 0:
            return new PageZero();
        case 1:
            return new PageOne();
        case 2:
            return new PageTwo();
    }
    return null;
} 
```

Viewpager 仅在要创建新项目时才调用 getItem。不幸的是，他们调用了 getItem 方法而不是 createItem 方法，这更明显。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-21T02:43:27.550

**得到你的`EditText`内部`onClick`块...**

这意味着将代码更改为：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.componentname, container,   false);

        name=(EditText)view.findViewById(R.id.nameTV);

        name.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
                  a=name.getText().toString().trim();
                  Toast.makeText(getApplicationContext(),a,Toast.LENGTH_SHORT).show();
             }
        });

    return view;
} 
```

至：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.componentname, container,   false);

        name.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

                  // GET EDIT TEXT HEAR:
                  EditText name=(EditText)view.findViewById(R.id.nameTV);

                  a=name.getText().toString().trim();
                  Toast.makeText(getApplicationContext(),a,Toast.LENGTH_SHORT).show();
             }
        });

    return view;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T09:02:13.550

要使用视图寻呼机创建 3 个不同的片段，您应该：

1）使用视图寻呼机和视图寻呼机适配器创建 FragmentActivity。

```
public class FragmentActivity extends FragmentActivity
{
    private FragmentAdapter adapter;
    private ViewPager pager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fragment);     
        adapter = new FragmentAdapter(getSupportFragmentManager());
        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(adapter);
   } 
```

2）用静态实例创建3个片段

```
public final class Fragment1 extends Fragment
{   
    public static Fragment1 newInstance() {
        return new Fragment1();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        LinearLayout layout = new LinearLayout(getActivity());
// your fragment xml view
        return view;
    }
} 
```

3）用它填充视图寻呼机适配器；

```
public class FragmentAdapter extends FragmentPagerAdapter

{    
    public InstallFragmentAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int position) {     
        switch (position) {
            case 0:
                return Fragment1.newInstance();
            case 1:
                return Fragment2.newInstance();
            case 2:
                return Fragment3.newInstance();
        }
        return null;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:44:14.997

```
public class PageZero extends Fragment {
   public static  EditText name;   //change this to public static

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.componentname, container,
            false);
    name = (EditText)view.findViewById(R.id.nameTV);

    name.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
        }
    });

    return view;
}
} 
```

然后，您可以像这样从另一个片段访问公共静态 EditText 名称（当然，在生成它的视图之后）。

```
public class PageOne extends Fragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.componentaddress, container,
            false);

   EditText page_one_text = PageZero.name;   //you can get that variable in any fragment now, but using the class name of that fragment to access it

    return view;
}
} 
```

干杯。如果对您有帮助，请将其标记为正确答案。你在这里有很多答案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-25T11:22:04.440

我试过下面的代码。为我工作

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View v =  inflater.inflate(R.layout.fragment_main_explore, container, false);
    ed1 = (EditText)v.findViewById(R.id.editTextTemp);
    if( ed1 == null )
    {
        Toast.makeText(getActivity(), "ERROR UNABLE TO GET EDIT", Toast.LENGTH_LONG).show();
    }

    // Inflate the layout for this fragment
    //return inflater.inflate(R.layout.fragment_main_explore, container, false);
    return v;
} 
```

# applescript - 如何区分 AppleScript 中的多个 Java 进程

> ID：14497328
> 
> 赞同：0
> 
> 时间：2013-01-24T08:57:06.540
> 
> 标签：applescript, osascript

编写 osascript 时遇到问题。我需要“告诉”一个 java 进程（GUI）来做某事，但是还有其他 java 进程具有相同的进程名称“java”（也是 GUI），所以我下面的示例代码对我不起作用：

```
 osascript \
    -e "tell application \"System Events\"" \
       -e "tell process \"java\"" \
          -e "click button \"MyButton\" of tab group 1 of window \"MyWindow\"" \
       -e "end tell" \
    -e "end tell" 
```

所以我的问题是如何在这种情况下区分不同的java进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:05:30.867

根据您对我的评论的回复，我将执行以下操作。请注意，我没有对此进行测试，因此您可能需要对其进行调整，但它显示了如何检查这些特定名称。祝你好运。

```
tell application "System Events"
    set javaProcesses to processes whose name is "java"
    repeat with aJavaProcess in javaProcesses
        tell aJavaProcess
            try
                set windowName to name of window 1
                set buttonNames to title of buttons of tab group 1 of window 1
                if windowName is "Java Control Panel" and "Update Now" is in buttonNames then
                    click (first button of tab group 1 of window 1 whose title is "Update Now")
                    exit repeat
                end if
            end try
        end tell
    end repeat
end tell 
```

***编辑***：也许你可以像这样得到正确的过程......

```
tell application "System Events"
    set javaIDs to unix id of processes whose name is "java"
    repeat with i from 1 to count of javaIDs
        set aJavaProcess to (first process whose unix id is (item i of javaIDs))
        tell aJavaProcess
            -- do the stuff in the tell block from the code above
        end tell
    end repeat
end tell 
```

# java - 在Java中获取Unicode值的字符表示

> ID：14497333
> 
> 赞同：1
> 
> 时间：2013-01-24T08:57:21.113
> 
> 标签：java, xml, unicode, unicode-escapes

我想要 Java 中 Unicode 值的字符表示。这可以做到吗？

XML 不支持某些字符（例如 unicode 值为 \u001b 的字符）。所以我通过输入 Unicode 值 '\u001b' 在 XML 中转义它们，并且在解组后，我希望显示 \u001b 的字符表示。这可以用 Java 完成吗？

欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:45:52.147

试试这个

```
 String s = "\\u0031";
    char c = (char)Integer.parseInt(s.substring(2), 16);
    System.out.print(c); 
```

输出

```
1 
```

虽然我建议使用 XML 数字字符引用[http://en.wikipedia.org/wiki/Numeric_character_reference](http://en.wikipedia.org/wiki/Numeric_character_reference)就像`&#x001b;`然后它会被 XML 解析器自动解码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T09:40:19.593

```
 String fileName = "outputFile.txt";
 String str = "String with unicode" ;

try {
    FileOutputStream fos = new FileOutputStream(fileName);
    Writer out = new OutputStreamWriter(fos, "UTF8");
    out.write(str);
    out.close();
} catch (IOException e) {
    e.printStackTrace(System.err);
} 
```

这应该做

# java - Java中以下Strings中创建了多少个对象

> ID：14497335
> 
> 赞同：1
> 
> 时间：2013-01-24T08:57:27.260
> 
> 标签：java, string, object

> **可能重复：**
> [此代码生成了多少个 java 对象？为什么？](https://stackoverflow.com/questions/5192574/how-many-java-objects-generated-by-this-code-and-why)

我对以下内容很困惑

```
String s1 = new String("Java");
String s2 = new String("Java"); 
```

这里创建了多少对象？

```
String s1 = new String("Java");
String s2 = new String("Ruby"); 
```

这里创建了多少对象？

```
String s1 = new String("Java");
String s2 = "Java"; 
```

这里创建了多少对象？

```
String s1 = "Java";
String s2 = "Java"; 
```

这里创建了多少对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:02:29.373

**您的第一部分代码：**

创建了 2 个对象。如果字符串池中不存在“Java”，则会在其中创建并添加一个字符串。

**您的第二部分代码：**

创建了 2 个对象，如果字符串池中既不存在“Java”也不存在“Ruby”，则创建两个字符串并将其添加到其中。

**您的代码的第三部分：**

创建了一个对象。并执行相同的条件以添加到字符串池。

**您的第四部分代码：**

如果字符串池中不存在“Java”，则仅创建一个对象。否则没有创建新对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T09:05:58.533

```
String s1 = new String("Java");
String s2 = new String("Java"); 
```

它将在堆中创建 2 个对象。

```
String s1 = new String("Java");
String s2 = new String("Ruby"); 
```

这将在堆中创建 2 个对象。

```
String s1 = new String("Java");
String s2 = "Java"; 
```

这将在堆中为第一行创建一个对象。对于第二行，它将检查字符串池中是否存在“Java”。如果存在，则不会创建新字符串。它将返回对池中已经存在的字符串的引用

```
String s1 = "Java";
String s2 = "Java"; 
```

第一行将检查字符串池中是否存在“Java”。如果存在，则不会创建新字符串。它将返回对池中已存在字符串的引用。第二行将获得对已创建字符串的引用。因此，如果“Java”存在或最多一个对象，则没有新对象

# html - HTML 页面标题：本地化和空标题

> ID：14497336
> 
> 赞同：0
> 
> 时间：2013-01-24T08:57:37.290
> 
> 标签：html

关于解决问题的更好方法的2个问题：

1) 有没有一种方法可以使 HTML 页面标题在客户端代码的不同语言环境中看起来不同，除了 javascript？即用相应的语言编写在浏览器选项卡中显示的 HTML 页面标题。我知道我可以为此使用 javascript，但可能还有其他方法吗？

2）我用javascript设置了我的HTML页面标题（这是不同的情况）。但是在脚本运行之前有一个延迟。有没有办法在 javascript 评估之前将 HTML 页面标题设置为空行？

如果我删除标签，我会得到页面 URL。如果我使用空标签 - 同样的事情。我必须使用   里面的内容，看起来有点难看。

其他一些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:24:53.307

**To the first:** Except Javascript, the only Way i know would be PHP, but using Javascript is a lot better and easier.

**To the second:** arkascha's Post is the answer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:03:02.213

抱歉，我没有看到任何其他方法，但客户端的 JavaScript 除外。

对于延迟：在加载或执行任何其他脚本之前，但在设置页面标题之后，尝试使用内联 javascript 更改页面顶部的页面标题。这应该将延迟保持在绝对最小值。

# c# - 绑定没有正确更新用户控件属性 MVVM

> ID：14497344
> 
> 赞同：3
> 
> 时间：2013-01-24T08:58:00.753
> 
> 标签：c#, wpf, xaml, binding, silverlight-5.0

编辑：旧代码已删除

我把它放在我的 MainWindow.xaml

```
 <SpinTextBlock:SpinTextBlock Text="{Binding Path=DataContext.WelcomeTitle, ElementName=Window,UpdateSourceTrigger=PropertyChanged}" Height="60" Width="40" x:Name="TextBlock"/> 
```

并将其绑定到 MainViewModel.cs 中的属性

```
 public string WelcomeTitle
    {
        get
        {
            return _welcomeTitle;
        }

        set
        {
            if (_welcomeTitle == value)
            {
                return;
            }

            _welcomeTitle = value;
            RaisePropertyChanged(WelcomeTitle);
            Dispatcher.CurrentDispatcher.BeginInvoke(
new Action<String>(RaisePropertyChanged),
DispatcherPriority.DataBind, "WelcomeTitle");
        }
    } 
```

一切正常，除了我的 UserControl 中的属性 Text 在 ViewModel 中的值更新时没有更新。相反，来自 ViewModel 的更新直接放置在 TextBlock（在 UserControl 中）上，并且根本不调用我的用户控件上的情节提要和所有属性。

有人对此有解决方案吗？

**编辑工作解决方案**

用户控制代码隐藏。必须监听属性更改以启动我的故事板并更新属性。

```
 public partial class SpinTextBlock : INotifyPropertyChanged 
{
    public static readonly DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof(string), typeof(SpinTextBlock), new FrameworkPropertyMetadata(
 string.Empty,
 new PropertyChangedCallback(OnTextPropertyChanged)));

    private static void OnTextPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        SpinTextBlock obj = d as SpinTextBlock;
        obj.OnTextChanged(e.NewValue as string);

    }

    private  void OnTextChanged(string newValue)
    {
        UpdateTextBlocks(newValue);
    }

    public static readonly DependencyProperty TextOldProperty =
      DependencyProperty.Register("TextOld", typeof(string), typeof(SpinTextBlock), new PropertyMetadata(default(string)));

    public string Text
    {
        get
        {
            return (string)GetValue(TextProperty);
        }
        set
        {
            SetValue(TextProperty, value);
        }
    }

    private string TextOld
    {
        get
        {
            return (string)GetValue(TextOldProperty);
        }
        set
        {
            SetValue(TextOldProperty, value);
        }
    }

    public bool AddZeroBeforeTextIfSingleValue { get; set; }

    public SpinTextBlock()
    {
        InitializeComponent();
        AddZeroBeforeTextIfSingleValue = true;
        TextBlockOld.Visibility = Visibility.Collapsed;

    }

    void UpdateTextBlocks(string newValue)
    {
        if (AddZeroBeforeTextIfSingleValue)
        {
            AddZeroToValue(ref newValue);
        }
        TextOld = TextBlockMain.Text;
        StartAnimation();
    }

    void StartAnimation()
    {
        TextBlockOld.Visibility = Visibility.Visible;
        Storyboard sb = this.Resources["StoryboardChangeTexts"] as Storyboard;
        sb.Begin();
    }

    void AddZeroToValue(ref string value)
    {
        if (value != null && value.Length == 1)
        {
            value = "0" + value;
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

UserControl xaml
<UserControl x:Class="Y.Infrastructure.SpinTextBlock.SpinTextBlock"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         x:Name="userControl"
mc:Ignorable="d"
FontSize="36"
Foreground="Black"
d:DesignHeight="60" d:DesignWidth="40">
<UserControl.Resources>
    <Storyboard x:Key="StoryboardChangeTexts">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="TextBlockOld">
            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="TextBlockMain">
            <EasingDoubleKeyFrame KeyTime="0" Value="-35"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="TextBlockOld">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="35"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" Background="Black">
    <TextBlock HorizontalAlignment="Center" x:FieldModifier="private" Foreground="White" FontSize="36" Text="{Binding Text, ElementName=userControl}" x:Name="TextBlockMain" FontWeight="Bold" FontFamily="Segoe UI Semibold">
        <TextBlock.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </TextBlock.RenderTransform>
    </TextBlock>
    <TextBlock HorizontalAlignment="Center" x:FieldModifier="private" Foreground="White" FontSize="36" Text="{Binding TextOld, ElementName=userControl}" x:Name="TextBlockOld" FontWeight="Bold" FontFamily="Segoe UI Semibold">
        <TextBlock.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </TextBlock.RenderTransform>
    </TextBlock>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:09:43.150

`UpdateTextBlocks(value)`你的属性的setter中的调用`Text`不会被调用，因为运行时会`SetValue(TextProperty, value);`直接调用。

# r - 从受限帕累托分布中抽取随机数

> ID：14497349
> 
> 赞同：6
> 
> 时间：2013-01-24T08:58:05.123
> 
> 标签：r, random

我是 R 的新手，需要有关如何从具有参数 s 和 beta 的帕累托分布的有限区域中提取随机数的建议。（系统：Windows 7，R 2.15.2。）

(1) 我在向量 data$t 中有数据；每个数据点我都会调用 data&tx

对于这些数据，帕累托分布的参数 s 和 beta 估计如下[https://stats.stackexchange.com/questions/27426/how-do-i-fit-a-set-of-data-to-a-pareto -分布在-r](https://stats.stackexchange.com/questions/27426/how-do-i-fit-a-set-of-data-to-a-pareto-distribution-in-r)

```
pareto.MLE <- function(X)
{
n <- length(X)
m <- min(X)
a <- n/sum(log(X)-log(m))
return( c(m,a) ) 
} 
```

(2) 现在我需要在这个帕累托分布 (s, beta, 请参见 (1)) 上绘制与观察 (= data points: data$tx) 一样多的随机数 (RndNew) 。对于抽奖，抽取随机数的区域必须限制在 RndNewx >= data$tx; 的区域内。换句话说：RndNewx 绝不能小于相应的 data$tx。

问题：如何告诉 R 限制帕累托分布的区域，从中抽取随机数为 RndNewx >= data$tx？

感谢一百万的任何帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T09:23:56.877

从截断分布中抽样的标准方法包括三个步骤。这是正态分布的示例，因此您可以理解。

```
n <- 1000
lower_bound <- -1
upper_bound <- 1 
```

将 CDF 应用于您的下限和上限，以找到分布边缘的分位数。

```
(quantiles <- pnorm(c(lower_bound, upper_bound)))
# [1] 0.1586553 0.8413447 
```

从这些分位数之间均匀分布的样本。

```
uniform_random_numbers <- runif(n, quantiles[1], quantiles[2]) 
```

应用逆 CDF。

```
truncated_normal_random_numbers <- qnorm(uniform_random_numbers) 
```

![截断的正态随机数](../Images/92d12badaf9436c5b50f3ddc6a8fac1c.png)

* * *

帕累托分布的 CDF 为

```
ppareto <- function(x, scale, shape)
{
  ifelse(x > scale, 1 - (scale / x) ^ shape, 0)
} 
```

反之亦然

```
qpareto <- function(y, scale, shape)
{
  ifelse(
    y >= 0 & y <= 1,
    scale * ((1 - y) ^ (-1 / shape)),
    NaN
  )
} 
```

我们可以修改上面的例子来使用这些帕累托函数。

```
n <- 1000
scale <- 1
shape <- 1
lower_bound <- 2
upper_bound <- 10

(quantiles <- ppareto(c(lower_bound, upper_bound), scale, shape))
uniform_random_numbers <- runif(n, quantiles[1], quantiles[2])    
truncated_pareto_random_numbers <- qpareto(uniform_random_numbers, scale, shape) 
```

![截断帕累托分布](../Images/76746a9da5db102e439aabf619a0945b.png)

* * *

为了更容易重用这段代码，我们可以将它包装到一个函数中。下限和上限具有与分布范围相匹配的默认值，因此如果您不传递值，那么您将获得非截断的帕累托分布。

```
rpareto <- function(n, scale, shape, lower_bound = scale, upper_bound = Inf)
{
  quantiles <- ppareto(c(lower_bound, upper_bound), scale, shape)
  uniform_random_numbers <- runif(n, quantiles[1], quantiles[2])    
  qpareto(uniform_random_numbers, scale, shape)
} 
```

# android - 显示用于存储下载文件的 SD 卡路径

> ID：14497353
> 
> 赞同：0
> 
> 时间：2013-01-24T08:58:14.440
> 
> 标签：android, android-layout

我正在编写一个应用程序，它允许用户输入 URL，然后选择放置下载文件的位置。但我被困在第二步。我想要做的就是显示这样的位置： ![在此处输入图像描述](../Images/1c4fce1acef2332b6f186df43a6b28c4.png)

并返回位置的路径。有人有解决方案吗？提前致谢！PS：显示外部存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:34:20.213

Create activity

```
 public class ... extend activity
    {

    string path  = "/";

    public void onResume()
    {
     ...
     setContentView(..);
     if (getIntent().hasExtra("path"))
     {
       path = getIntent().getStringExtra("path");
     }

     listview = findviewbyid(R.id.listview);

     listview.setAdapter(new adapter(path));

     listview.setOnItemClickListener(this);
    }

    public void onActivityResult(result)
    {
      if (resultOK) ...
    }

    public void onclicklisteneer(view,pos,id)
    {
     if (dir)
     {
      Intent intent = new Intent(this, this.class);
      intent.put("path",path+" "+view.getAdapter().getItem(pos))
      intent.setFlag(FLAG_NEW_TASK)
      startActivityForResult(intent)
     } 
     else if (file)
     {
      setResult(Result_OK);
      finish();
     }

    }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:29:08.353

我就是这样做的，它对我有用：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tree_view);

    File dir = new File("/sdcard");
    ArrayList<String> folders = new ArrayList<String>();
    final File[] fileList = dir.listFiles();

    if (fileList == null){
        Toast msg = Toast.makeText(this, "No files", 3000);
        msg.show();
    }else{
        for (File f:fileList){
            if (f.isDirectory()){
                folders.add(f.getName());
            }
        }
        final ListView lvFolder = (ListView)findViewById(R.id.lvTree);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_selectable_list_item, folders);
        lvFolder.setAdapter(adapter);
        lvFolder.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v,
                    int position, long id) {
                // TODO Auto-generated method stub
                Object o = lvFolder.getItemAtPosition(position);
              String fullObject = (String)o;
              Toast.makeText(getApplicationContext(), "You have chosen: " + " " + fullObject.toString(), Toast.LENGTH_LONG).show();
            }
        });
    }

} 
```

# c++ - C++ 类名::GetSth(TypeName* &pSth)

> ID：14497358
> 
> 赞同：0
> 
> 时间：2013-01-24T08:58:40.163
> 
> 标签：c++, pointers, reference

> **可能重复：**
> [*& 是什么意思](https://stackoverflow.com/questions/11060112/whats-the-meaning-of)

1.  什么`* &pSth`意思？
2.  这是一个`pointer`还是一个`ref`？
3.  为什么/什么时候我们需要它？

- 代码 -

```
ClassName::GetSth(TypeName* &pSth)
{
    //some code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:59:30.150

它的意思是“对指向 Typename 的指针的引用”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:59:32.273

`TypeName* &pSth`是对`TypeName`指针的引用。

C中的等效语法是`TypeName** pSth`

# javascript - 在html中混淆电子邮件

> ID：14497359
> 
> 赞同：0
> 
> 时间：2013-01-24T08:58:43.577
> 
> 标签：javascript, ajax, html, email

> **可能重复：**
> [在网站上混淆电子邮件地址的最佳方法？](https://stackoverflow.com/questions/748780/best-way-to-obfuscate-an-e-mail-address-on-a-website)

我考虑通过在对我的电子邮件进行密钥验证时请求（ajax）服务器并通过javascript模拟html的mailto来混淆我的网站中的电子邮件。app 密钥仅适用于我的域路径。

我真的很讨厌垃圾邮件和机器人:)

您认为这有多安全？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:04:07.560

在我看来，带有验证码的 Contactform 是最好的选择，因为一些机器人已经“解释”了 Javascript。

如果你真的想使用 Javascript。通过 Onload 中的脚本设置 mailto-link。

```
window.onload = function(){
   //do some really cool stuff
   var at = String.fromCharCode(60 + 4);
   document.getElementById("mailLink").href = "mai" + "lto:" + "great" + at +"solution" + ".com";
}

...
<a href="#" id="mailLink" >No Bots</a> 
<!-- a more inconspicuous id would be better;-) -->
... 
```

ORRR 设置邮件 onclick

```
<a id="test" onclick="window.location.href='mailto:c@c.qt'" href="#">Mail</a>
<!--  This Part'mailto:c@c.qt' should be obfuscated like above or better  ;-)  --> 
```

ORRR 也许更好但更慢

```
<a id="test" onclick="MagicFunction()" href="#">Mail</a>
<script>
function Magicfunction()
{
  var ajaxMailResponce = ... some cool AJAX stuff to getmail adress as string
  window.location.href = "mailto:" + ajaxMailResponce; 
  // Maybe the servercan return the mailto part also
}
<script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:30:03.790

在 wordpress 中，它们具有反垃圾邮件功能： [http ://codex.wordpress.org/Function_Reference/antispambot](http://codex.wordpress.org/Function_Reference/antispambot)

这会将电子邮件转换为 html 实体 - 仍然可以使用 mailto，就像 gobblydegook 一样。也许有什么要看的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:02:14.907

您始终可以将电子邮件地址的文本版本转换为图像并显示出来。根据您使用的框架/平台，甚至可能有一个您可以轻松采用的代码库。请参阅[使用 PHP 将电子邮件地址转换为图像以避免收获](http://www.mattsbits.co.uk/item-113.html)。

# c# - 从 SQL CLR 调用 Web 服务时的潜在性能问题

> ID：14497364
> 
> 赞同：0
> 
> 时间：2013-01-24T08:58:59.420
> 
> 标签：c#, .net, sqlclr

我需要在我的应用程序中的某些事件上调用外部 Web 服务。我不想修改我的应用程序并对该外部 Web 服务建立任何依赖关系。所以，我需要想办法用某种外部组件来做到这一点。

一种可能的方法是我制作数据库视图，当我的应用程序中的某些事件发生时，它会被填满。然后我将在该视图上设置触发器，该触发器将调用 CLR 函数。在该 CLR 函数中，我将调用外部 Web 服务。通过这样做，我将获得很好的“实时”集成。但是，这种方法有缺点。主要问题是从 CLR 调用 Web 服务似乎不是一个好主意，因为它会阻塞主 SQL 线程（？！），直到 CLR 收到一些答案。

到目前为止，我只发现设置此属性将有助于解决性能问题：

```
System.Net.ServicePointManager.DefaultConnectionLimit = 9999 
```

有关它的更多信息，您可以在[此处](http://dbaspot.com/sqlserver-programming/464478-performance-slow-when-calling-web-services-sql-clr-print.html)找到。

现在，既然您知道我的需求（即实时或至少接近实时的集成，而无需从我的应用程序到外部 Web 服务的任何调用），是否有更好的方法来做到这一点？

我能想到的另一种方法是让一些服务定期检查我的数据库中需要触发对外部 Web 服务的调用的更改。一旦此服务检测到此类更改，它将调用 Web 服务并传输数据。这当然不是真正的实时集成。我必须承认，除了性能问题之外，我更喜欢触发器和 CLR，因为它保证了实时集成并且对我的应用程序没有任何影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:04:37.683

我不确定我是否同意将 Web 服务调用移动到数据库的设计。但是，我确信您不想更改应用程序是有原因的。

您可以尝试以下几个选项 -

1) 使用消息队列代替数据库和 CLR 进行 Web 服务调用。[NServiceBus](http://nservicebus.com/)是将事件发生作为消息传递的不错选择，可以触发此调用

2）如果您坚持使用 SQL 服务器存储事件，请查看[SQL 服务器服务代理](http://msdn.microsoft.com/en-us/library/bb522893.aspx)

# android - ANDROID CROP：方形作物

> ID：14497365
> 
> 赞同：0
> 
> 时间：2013-01-24T08:58:59.147
> 
> 标签：android, image, save, crop

我正在尝试将画廊和相机中的图片裁剪成正方形。从完美的画廊作品中，画廊打开，我选择图片，然后即使我调整它的大小，裁剪框也始终保持正方形的形状。但是，当我对从相机拍摄的照片执行相同操作时，无论我在代码中进行什么更改，裁剪框都会保持矩形形状。

我读到这可以用`aspectX`and改变，`aspectY`但我仍然得到相同的结果。目前我的代码如下：

```
Intent i = new Intent("android.media.action.IMAGE_CAPTURE");
            File f = new File(Environment.getExternalStorageDirectory(),  "photo.png");
            i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
            i.putExtra("crop", "true");
            i.putExtra("outputX", 320);
            i.putExtra("outputY", 320);
            i.putExtra("aspectX", 320);
            i.putExtra("aspectY", 320);
            i.putExtra("scale", true);      

            mUri = Uri.fromFile(f);
            startActivityForResult(i, CAMERA_PICTURE); 
```

有没有人可以将裁剪框配置为始终保持方形？...提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:21:03.303

你真的想这样做吗？

尝试制作位图和一些可绘制的附加画布到位图绘制到可绘制的画布并保存位图。

如果你有问题，也许可以写给你 // 但从文件创建位图 //

```
BitmapDrawable returnedBitmap = BitmapDrawable(String filepath); // here you create image with size of image
Canvas canvas = new Canvas(returnedBitmap); // here you attach canvas to bitmap
drawable.draw(canvas); // here you tell to you drawable that you want to draw to this canvas drawable know canvas size and it automatically resize it self to fill canvas. Also you can read another image an use it. 
```

也许你调用 resize 函数来确定大小。

**Drawable** :) 这就是我的意思是让外部颜色和内部透明

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <gradient android:startColor="#554C5466" android:centerColor="#55334255" android:endColor="#ff3D5A99" android:angle="270"/>
    <stroke android:width="1px" android:color="#ffffffff" />
    <corners android:radius="10dp"/>    
</shape> 
```

并将位图保存到文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:30:50.663

试试这种方式：

> ```
>  Bitmap m_bitmap = BitmapFactory.decodeFile(m_Path);
>      Intent m_cropIntent = new Intent("com.android.camera.action.CROP");
>     // indicate image type and Uri
>     m_cropIntent.setDataAndType(Uri.fromFile(new File(m_Path)), "image/*");
>     // set crop properties
>     m_cropIntent.putExtra("crop", "true");
>     // indicate aspect of desired crop
>     m_cropIntent.putExtra("aspectX", 1);
>     m_cropIntent.putExtra("aspectY", 1);
>     // indicate output X and Y
>     m_cropIntent.putExtra("outputX", 256);
>     m_cropIntent.putExtra("outputY", 256);
>     // retrieve data on return
>     m_cropIntent.putExtra("return-data", true);
>     // start the activity - we handle returning in onActivityResult
>     startActivityForResult(m_cropIntent, 1); 
> ```

# c# - 如何使用搜索字符串搜索数据表中的行？

> ID：14497367
> 
> 赞同：21
> 
> 时间：2013-01-24T08:59:00.723
> 
> 标签：c#, listview, datatable, datarow

我想在我的`DataTable`.

我试过这个：

```
 protected void imggastsuche_Click(object sender, EventArgs e) 
        {
            string searchstring = txtgastsuche.Text;

            DataTable tb = DataBaseManager.GetDataTable(mysqlconnectionstring);

            DataRow[] foundRows = tb.Select("FIRSTNAME,LASTNAME,NAME,COMPANY,TIMEFROM,TIMETO,CREATOR Like '%" + searchstring + "%'");

            tb = foundRows.CopyToDataTable();

            this.ListView.DataSource = tb;
            this.ListView.DataBind();

        } 
```

但是我的字符串中有错误。

如果我想搜索这些列，我该怎么办？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-24T09:03:32.477

您收到错误是因为参数`Select`是*filterExpression*并且您已经传递了所有列。将filterExpression理解为`WHERE`sql中的子句。您想要所有列，但只想按一列进行过滤。无论如何，您都会获得所有列，因为它们都是`DataTable`/的一部分，`DataView`因此您无需明确列出它们。

您可以使用[`DataTable.Select`](http://msdn.microsoft.com/en-us/library/det4aw50.aspx),[`DatView.RowFilter`](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)方法或[`LINQ-to-DataSet`](http://msdn.microsoft.com/en-us/library/bb386977.aspx)：

LINQ-To-DataSet（我更喜欢）：

```
var filtered = tb.AsEnumerable()
    .Where(r => r.Field<String>("CREATOR").Contains(searchstring)); 
```

ADO.NET（`DataTable.Select`）：

```
DataRow[] filteredRows = tb.Select("CREATOR LIKE '%" + searchstring + "%'"); 
```

ADO.NET（`DataView.RowFilter`）：

```
 tb.DefaultView.RowFilter = "CREATOR LIKE '%" + searchstring + "%'"; 
```

* * *

`string`如果您想在任何列中搜索此内容：

```
DataRow[] filteredRows = tb.Select("FIRSTNAME LIKE '%" + searchstring + "%' OR LASTNAME LIKE '%" + searchstring + "%' OR NAME LIKE '%" + searchstring + "%' OR COMPANY LIKE '%" + searchstring + "%' OR CREATOR LIKE '%" + searchstring + "%'"); 
```

与 Linq 相同：

```
var filtered = tb.AsEnumerable()
    .Where(r => r.Field<String>("FIRSTNAME").Contains(searchstring)
           ||   r.Field<String>("LASTNAME").Contains(searchstring))
           ||   r.Field<String>("NAME").Contains(searchstring)
           ||   r.Field<String>("COMPANY").Contains(searchstring)
           ||   r.Field<String>("CREATOR").Contains(searchstring)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-09-07T22:35:56.483

如果其他人需要专门返回一个 DataTable 你可以使用下面的代码：

```
DataTable dtResult= tb.Select("CREATOR LIKE '%"+searchstring+"%'").CopyToDataTable(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-28T08:53:14.370

为此，我刚刚为 DataTable 类做了一个**扩展方法。**它返回一个只包含你想要的行的新数据表。

```
public static DataTable SearchInAllColums(this DataTable table, string keyword, StringComparison comparison)
{
    if(keyword.Equals(""))
    {
        return table;
    }
    DataRow[] filteredRows = table.Rows
           .Cast<DataRow>()
           .Where(r => r.ItemArray.Any(
           c => c.ToString().IndexOf(keyword, comparison) >= 0))
           .ToArray();

    if (filteredRows.Length == 0)
    {
        DataTable dtTemp = table.Clone();
        dtTemp.Clear();
        return dtTemp ;
    }
    else
    {
        return filteredRows.CopyToDataTable();
    }
} 
```

**用法：**

```
DataTable dataTable = getData();
dataTable.SearchInAllColums(Keyword, StringComparison.OrdinalIgnoreCase); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-14T08:09:19.983

您可以构建要在选择中使用的查询。

```
 if(TextBoxCusName.Text != "")
            {
                query = "CustomerName LIKE '%" + TextBoxCusName.Text.Trim()+"%' AND ";
            }
            if(TextBoxCusContact.Text != "")
            {
                query = query + "CustomerNo LIKE '%" + TextBoxCusContact.Text.Trim() + "%' AND ";
            }
            if(TextBoxVehicleNo.Text != "")
            {
                query = query + "VehicleNo LIKE '%" + TextBoxVehicleNo.Text.Trim()+"%'";
            }
            if(query.EndsWith("AND "))
            {
                query = query.Remove(query.Length - 4);
            }
            DataRow[] result = dataCustomerAndVehicle.Select(query); 
```

这相当于

```
select * from dataCustomerAndVehicle where CustomerName LIKE '%...%' AND ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-06T15:19:03.813

搜索任何列的静态方法

```
public static DataTable SearchInAllColums(DataTable table, string keyword)
{
    StringComparison comparison = StringComparison.OrdinalIgnoreCase;

    if (keyword.Equals(""))
    {
        return table;
    }

    DataRow[] filteredRows = table.Rows
           .Cast<DataRow>()
           .Where(r => r.ItemArray.Any(
           c => c.ToString().IndexOf(keyword, comparison) >= 0))
           .ToArray();

    if (filteredRows.Length == 0)
    {
        DataTable dtTemp = table.Clone();
        dtTemp.Clear();
        return dtTemp;
    }
    else
    {
        return filteredRows.CopyToDataTable();
    }
} 
```

# tomcat - 在 catalina.sh 中设置 jmx 时，tomcat 无法启动

> ID：14497368
> 
> 赞同：1
> 
> 时间：2013-01-24T08:59:08.523
> 
> 标签：tomcat, jmx

我正在使用 CentOS 6.3 64 位机器。我在 catalina.sh export CATALINA_OPTS="-Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=7010 -Dcom.sun.management.jmxremote.ssl=false -Dcom. sun.management.jmxremote.authenticate=false"

当我在添加后重新启动tomcat时，tomcat没有启动。我已禁用防火墙。谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:13:05.513

我已经找到了这个问题的解决方案。基本上每当我添加 CATALINA_OPTS 时，它都找不到主机名。`/etc/init.d/hosts`因此我在文件中添加了主机名：
**127.0.0.1 localhost your_hostname**
这解决了问题。我现在可以在这个端口上运行`jconsole`以及运行。`jvisualvm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:25:08.357

您没有看到任何错误消息的事实使我认为为启动 tomcat 而构建的命令行字符串中存在一些细微的错误，导致 JVM 根本无法启动，或者因为被赋予虚假指令而中止。通常我在这些情况下所做的是编辑启动脚本，找到执行完整命令字符串的位置并添加相同字符串的*回*显。这样，当脚本启动时，我可以看到正在发出的确切命令并在没有脚本的情况下测试自己执行。

我不认为您在这里遇到了重大问题，但是如果您想放弃启动参数驱动的 JMX 选项，您可以随时将快速启动 servlet 添加到您的管理 WAR 中，以创建和启动[JMXConnectorServer](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/JMXConnectorServer.html)。

听起来有点矫枉过正，但它确实为您在侦听器的配置细节方面提供了更多的灵活性。例如，默认情况下，默认命令行选项将导致侦听器仅绑定到本地地址，因此来自远程的传入连接将失败。另一方面，如果您自己在 servlet 中配置连接器服务器，则可以指示侦听器绑定到*0.0.0.0*。

# java - 线程“主”java.lang.NoSuchMethodError 中的 itext 异常

> ID：14497369
> 
> 赞同：1
> 
> 时间：2013-01-24T08:59:08.987
> 
> 标签：java, itext

我正在研究另一个使用 iText 签署 pdf 的代码。库是新的和下载的代码源。我是 java 和 iText 的新手。对不起，代码中的长帖子：

```
package c2_01_signhelloworld;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.security.GeneralSecurityException;
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.Security;
import java.security.cert.Certificate;

import org.bouncycastle.jce.provider.BouncyCastleProvider;

import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfSignatureAppearance;
import com.itextpdf.text.pdf.PdfStamper;
import com.itextpdf.text.pdf.security.BouncyCastleDigest;
import com.itextpdf.text.pdf.security.DigestAlgorithms;
import com.itextpdf.text.pdf.security.ExternalDigest;
import com.itextpdf.text.pdf.security.ExternalSignature;
import com.itextpdf.text.pdf.security.MakeSignature;
import com.itextpdf.text.pdf.security.MakeSignature.CryptoStandard;
import com.itextpdf.text.pdf.security.PrivateKeySignature;

public class C2_01_SignHelloWorld {

    public static final String KEYSTORE = "C:/Users/Documents/itext/2/ks";
    public static final char[] PASSWORD = "password".toCharArray();
    public static final String SRC = "C:/Users/Documents/itext/2/unsigned1.pdf";
    public static final String DEST = "C:/Users/Documents/itext/2/unsigned1_signed.pdf";

    public void sign(String src, String dest,
            Certificate[] chain,
            PrivateKey pk, String digestAlgorithm, String provider,
            CryptoStandard subfilter,
            String reason, String location)
                    throws GeneralSecurityException, IOException, DocumentException {
        // Creating the reader and the stamper
        PdfReader reader = new PdfReader(src);
        FileOutputStream os = new FileOutputStream(dest);
        PdfStamper stamper = PdfStamper.createSignature(reader, os, '\0');
        // Creating the appearance
        PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
        appearance.setReason(reason);
        appearance.setLocation(location);
        appearance.setVisibleSignature(new Rectangle(36, 748, 144, 780), 1, "sig");
        // Creating the signature
        ExternalDigest digest = new BouncyCastleDigest();
        ExternalSignature signature = new PrivateKeySignature(pk, digestAlgorithm, provider);
        MakeSignature.signDetached(appearance, digest, signature, chain, null, null, null, 0, subfilter);
    }

    public static void main(String[] args) throws GeneralSecurityException, IOException, DocumentException {
        BouncyCastleProvider provider = new BouncyCastleProvider();
        Security.addProvider(provider);
        KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
        ks.load(new FileInputStream(KEYSTORE), PASSWORD);
        String alias = (String)ks.aliases().nextElement();
        PrivateKey pk = (PrivateKey) ks.getKey(alias, PASSWORD);
        Certificate[] chain = ks.getCertificateChain(alias);
        C2_01_SignHelloWorld app = new C2_01_SignHelloWorld();
        app.sign(SRC, String.format(DEST, 1), chain, pk, DigestAlgorithms.SHA256, provider.getName(), CryptoStandard.CMS, "Test 1", "Ghent");
        app.sign(SRC, String.format(DEST, 2), chain, pk, DigestAlgorithms.SHA512, provider.getName(), CryptoStandard.CMS, "Test 2", "Ghent");
        app.sign(SRC, String.format(DEST, 3), chain, pk, DigestAlgorithms.SHA256, provider.getName(), CryptoStandard.CADES, "Test 3", "Ghent");
        app.sign(SRC, String.format(DEST, 4), chain, pk, DigestAlgorithms.RIPEMD160, provider.getName(), CryptoStandard.CADES, "Test 4", "Ghent");
    }
} 
```

运行代码后，我收到此错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: com.itextpdf.text.pdf.PdfSignatureAppearance.setCertificate(Ljava/security/cert/Certificate;)V
    at com.itextpdf.text.pdf.security.MakeSignature.signDetached(MakeSignature.java:115)
    at c2_01_signhelloworld.C2_01_SignHelloWorld.sign(C2_01_SignHelloWorld.java:59)
    at c2_01_signhelloworld.C2_01_SignHelloWorld.main(C2_01_SignHelloWorld.java:71)
Java Result: 1 
```

此代码生成这两个文件，但是当我尝试打开 unsigned1_signed.pdf 时出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:05:08.220

这意味着您在项目中使用的库与系统库不同。

所以没有相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:14:35.620

仅使用 iText 5.3.5 即可解决此问题。旧版本的 iText 库不适用于此代码。[您可以在此处](http://api.itextpdf.com/itext/)查看 PdfSignatureAppearance 的 itext 5.4.0 快照

# c++ - &decltype(object)::memfn 是误用吗？

> ID：14497371
> 
> 赞同：4
> 
> 时间：2013-01-24T08:59:11.990
> 
> 标签：c++, c++11, decltype

我有这样的课：

```
class Test {
public:
    bool bar(int &i, char c) // some arguments are passed by ref, some are by value
    {/*...*/}
    bool foo(/*...*/)
    {}
}; 
```

而且我不想重复调用bar1/bar2等然后一次又一次地检查返回值，所以我写了一个宏和可变参数模板来处理那些事情

```
#define help_macro(object, memfn, ...) help_func(#object "." #memfn, \
        object, &decltype(object)::memfn, ##__VA_ARGS__)

template<class T, typename Func, typename... Args>
void help_func(char const * name, T &&object, Func memfn, Args&&... args)
{
    auto ret = (object.*memfn)(forward<Args>(args)...);
    cout<<name<<":\t"
        <<(ret ? "OK" : "Oops")  // maybe I'll throw an exception here  
        <<endl;
} 
```

并像这样使用它

```
int i = 0;
Test t;
help_macro(t, bar, i, 'a'); 
```

它适用于 g++-4.7/Debian，但 ICC13.0/Win 拒绝编译它（一个非常奇怪的错误消息）

> main.cpp(37): error : type name is not allowed
> help_macro(t, bar, i, 'a');
> ^
> main.cpp(37): 错误: 预期一个 ")"
> help_macro(t, bar, i, 'a');
> ^

我为ICC打开了C++11，并确认ICC13支持可变参数模板和decltype是我使用不正确还是ICC的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:19:58.980

**编辑**：实际上已经费心测试我的理论，结果证明我错了，在这种情况下`decltype(t)`，`Test`可以通过`static_assert(std::is_same<decltype(t), Test>::value, "not a reference")`

因此 ICC（或它使用的 EDG 前端）可能只是不正确支持`decltype`在嵌套名称说明符中使用，这已由[DR 743更改](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#743)

使用`std::decay` *确实*使 ICC 接受它，因此是一个有用的解决方法。

**原文，错误，答案**：

我认为ICC就在这里，`decltype(object)`实际上`Test&`是引用类型不能有成员，所以`&decltype(t)::memfn`格式不正确。

代码可以简化为：

```
struct Test {
    void foo() {}
};

int main()
{
  Test t;
  auto p = &decltype(t)::foo;
} 
```

哪个 G++ 和 Clang 接受，但 ICC 拒绝，恕我直言。

您可以使用`std::remove_reference`或修复它`std::decay`

```
#include <type_traits>

// ...

Test t;
auto p = &std::decay<decltype(t)>::type::foo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:36:30.760

I think the reason is there is no 'bar' function in class Test but not sure as I don't have access to this compiler. However the error message you posted shows there is an attempt to use 'bar'.

The following works on both gcc and clang

```
class Test {
public:
    bool bar1(int &i, char c) // some arguments are passed by ref, some are by value
    {return true;}
    bool bar2(int &i, char c)
    {return true;}
};

#define help_macro(object, memfn, ...) help_func(#object "." #memfn, \
        object, &decltype(object)::memfn, ##__VA_ARGS__)

template<class T, typename Func, typename... Args>
void help_func(char const * name, T &&object, Func memfn, Args&&... args)
{
    auto ret = (object.*memfn)(std::forward<Args>(args)...);
    std::cout<<name<<":\t"
        <<(ret ? "OK" : "Oops")  // maybe I'll throw an exception here
        <<std::endl;
}

int main()
{
    int i = 0;
    Test t;
    //help_macro(t, bar, i, 'a');
    help_macro(t, bar2, i, 'a');
} 
```

# vb.net - 这个错误背后的原因是什么？

> ID：14497372
> 
> 赞同：0
> 
> 时间：2013-01-24T08:59:17.567
> 
> 标签：vb.net, ms-access, vb6-migration

将访问 .mdb 文件数据转换为 CSV 时遇到问题。使用 inbuild 函数执行 transferText 时出现此错误**“命令或操作 'TransferText' 现在不可用”**。

代码是这样写的

```
Access_Application_definst.DoCmd.TransferText(Microsoft.Office.Interop.Access.AcTextTransferType.acExportDelim, , "employee", <FileName>, True) 
```

我可以知道这个错误背后的原因吗？TransferText 已经是内置函数了吗？

# android - 如何通过单击相机在列表视图中动态添加图像

> ID：14497373
> 
> 赞同：-4
> 
> 时间：2013-01-24T08:59:26.900
> 
> 标签：android, listview

目前我正在开发一个应用程序，在该应用程序中，我必须通过单击相机将图像动态添加到列表视图中，我已经通过多个示例进行了操作，但我没有得到答案。所以请提供我可以解决我的问题的代码或链接。每一个帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:15:48.550

给出一些想法如何实现这一目标：

*   编写应返回位图的 **相机代码函数（）**

*   创建Bitmap类型列表**ArrayList Camera_Image_List = new ArrayList();**

*   [如果您愿意](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)，可以创建具有图像和其他控件的**自定义列表视图**

*   当用户想要在 函数返回的**Camera_Image_List**中捕捉和添加位图时，调用**Camera Code Function() 。**

***   **任务结束****

# maven - Maven：更改版本 在 pom.xml 中

> ID：14497379
> 
> 赞同：1
> 
> 时间：2013-01-24T09:00:10.937
> 
> 标签：maven, properties, jenkins, pom.xml

不是项目版本的问题！！！！！！

我有一个 Maven pom.xml。使用 Jenkins 构建项目和发布项目部署。在 Jenkins 创建发布之前想要设置 before_version-own=0.0.25 after_version-own=0.0.27-SNAPSHOT

但是在构建“发布版本”之前和之后，我们需要在 teg 属性中设置我的版本，例如：我在 pom.xml

```
<properties>
        <version-own>0.0.21-SNAPSHOT</version-own>
</properties>

<dependencies>
        <dependency>
                <groupId>com.test-release</groupId>
                <artifactId>features-test-release</artifactId>
                <version>${version-own}</version>
        </dependency>
</dependencies> 
```

在发布之前我需要这样设置

```
<properties>
        <version-own>0.0.25</version-own>
</properties>

<dependencies>
        <dependency>
                <groupId>com.test-release</groupId>
                <artifactId>features-test-release</artifactId>
                <version>${version-own}</version>
        </dependency>
</dependencies> 
```

发布后我需要这样设置

```
<properties>
        <version-own>0.0.27-SNAPSHOT</version-own>
</properties>

<dependencies>
        <dependency>
                <groupId>com.test-release</groupId>
                <artifactId>features-test-release</artifactId>
                <version>${version-own}</version>
        </dependency>
</dependencies> 
```

# mysql - Mysql 中的长文本在实时服务器中不起作用...显示禁止错误

> ID：14497380
> 
> 赞同：1
> 
> 时间：2013-01-24T09:00:10.300
> 
> 标签：mysql, longtext

在我的项目中，我有一个用于项目详细信息的文本字段（长文本）。在 localhost 中它工作正常，但是在实时服务器中，当我尝试添加详细信息时，它显示 Forbidden 错误。我尝试了一小行或两行描述，它工作正常......

知道为什么会这样吗？我的主机有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:07:52.870

**禁止的错误。**主要显示您是否无权执行此操作。您的数据类型也可能会遇到问题。您可以将数据类型 longtext 更改为`VARCHAR(255)`. 那么我认为你不会面临这些问题。还要检查你的许可..做那些类型的动作..

# visual-studio-2012 - Visual Studio 2012 中缺少 Visual C++ 的先决条件

> ID：14497382
> 
> 赞同：7
> 
> 时间：2013-01-24T09:00:17.307
> 
> 标签：visual-studio-2012, clickonce, prerequisites, visual-c++-2012

我最近安装`vs2012`并更新了 ClickOnce 应用程序。更准确地说，我第一次打开我的`C++ project`（取决于我的主要 c# 项目）我没有更新它并且一切正常。`VS 2012`仍然能够看到 Visual C++ 2010 先决条件。稍后，我通过将平台工具集更改为`"Visual Studio 2012 (v110)"`以下来更新我的项目`Properties->Configuration Properties->General`。

与此同时，我什至安装了其他的`software`，现在我发现我不再能够将 Visual C++ 先决条件添加到我的项目中以进行 ClickOnce 发布。先决条件用一个黄色三角形标记，`Visual C++ 2010 Runtime Libraries (x64)`它是缺失的。理想情况下，我想更新到`Visual C++ 2012 Runtime Libraries x64 (and x86)`，但即使是这个先决条件也缺失了。

我想这是由于文件夹`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages`中相应的包`(vcredist_x64)`是空的。我还注意到，在我拥有`Microsoft Visual C++ 2010 x64`并`x86`安装的控制面板中的已安装程序列表中，可再发行版本和运行时版本（我认为它们以前是使用 Visual Studio 2010 安装的），而我缺少 Visual C++ 2012文件。因此，我认为 Visual C++ 2012 并没有与 Visual Studio 2012 结合在一起，不是吗？我什至尝试通过下载它们来安装[Visual C++ 2012 Redistributable x64](http://www.microsoft.com/en-us/download/details.aspx?id=30679)包，现在它们列在我安装的程序中 8（只有 Redistributable，而不是运行时版本）。

然而，先决条件仍然缺失。我该如何解决这个问题？我什至考虑过手动复制位于...`\v7.0A\Bootstrapper\Packages`文件夹中的 Visual C++ 2010 的引导程序包，并为 C++ 2012 手动更改它，但我不知道应该`product.xml`在`<MsiProductCheck Property="VCRedistInstalled" Product=?>`. 似乎可以使用 Bootstrapper Manager 获得插入此信息的产品 G​​UID，但是该程序抛出了很多异常，我不知道该怎么做。作为第二种解决方案，简单地从以下位置复制 Visual C++ 2010 的包是否安全`\\v7.0A\Bootstrapper\Packages\Bootstrapper\Packages to \v8.0A\Bootstrapper\Packages`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T08:20:12.290

转到 \v8.0A\Bootstrapper\Packages 并确保您拥有 vcredist_x86 文件夹。

在该文件夹中，您应该有一个“en”文件夹，应该保留在那里，您丢失了

1.  产品.xml
2.  vcredist_x86.exe

[您可以从http://go.microsoft.com/fwlink/?LinkID=266495&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=266495&clcid=0x409)下载所需的 .exe

至于product.xml

```
<?xml version="1.0" encoding="utf-8" ?> 

    <Product
      xmlns="http://schemas.microsoft.com/developer/2004/01/bootstrapper"
      ProductCode="Microsoft.Visual.C++.11.0.x86"
    >

      <!-- Defines list of files to be copied on build -->
      <PackageFiles>
        <PackageFile Name="vcredist_x86.exe" HomeSite="VCRedistExe"/>
      </PackageFiles>
      <InstallChecks>
        <MsiProductCheck Property="VCRedistInstalled" Product="{6C772996-BFF3-3C8C-860B-B3D48FF05D65}"/>
      </InstallChecks>

      <!-- Defines how to invoke the setup for the Visual C++ 11.0 redist -->
      <!-- TODO: Needs EstrimatedTempSpace, LogFile, and an update of EstimatedDiskSpace -->
      <Commands Reboot="Defer">
        <Command PackageFile="vcredist_x86.exe" 
             Arguments=' /q:a ' 
             >

          <!-- These checks determine whether the package is to be installed -->
          <InstallConditions>
            <BypassIf Property="VCRedistInstalled" Compare="ValueGreaterThanOrEqualTo" Value="3"/>
            <!-- Block install if user does not have admin privileges -->
            <FailIf Property="AdminUser" Compare="ValueEqualTo" Value="false" String="AdminRequired"/>

            <!-- Block install on Win95 -->
            <FailIf Property="Version9X" Compare="VersionLessThan" Value="4.10" String="InvalidPlatformWin9x"/>

            <!-- Block install on NT 4 or less -->
            <FailIf Property="VersionNT" Compare="VersionLessThan" Value="5.00" String="InvalidPlatformWinNT"/>

          </InstallConditions>

          <ExitCodes>
            <ExitCode Value="0" Result="Success"/>
            <ExitCode Value="3010" Result="SuccessReboot"/>
            <DefaultExitCode Result="Fail" FormatMessageFromSystem="true" String="GeneralFailure" />
          </ExitCodes>

        </Command>
      </Commands>
    </Product> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T16:56:08.277

对于那些为 2012 x64 vcredist 寻找类似答案的人来说，这是我拼凑起来的一个似乎有效的答案。注意下载链接是 [http://download.microsoft.com/download/1/6/B/16B06F60-3B20-4FF2-B699-5E9B7962F9AE/VSU_4/vcredist_x64.exe](http://download.microsoft.com/download/1/6/B/16B06F60-3B20-4FF2-B699-5E9B7962F9AE/VSU_4/vcredist_x64.exe)

```
<?xml version="1.0" encoding="utf-8" ?> 

<Product
  xmlns="http://schemas.microsoft.com/developer/2004/01/bootstrapper"
  ProductCode="Microsoft.Visual.C++.11.0.x64"
>

  <!-- Defines list of files to be copied on build -->
  <PackageFiles>
    <PackageFile Name="vcredist_x64.exe" HomeSite="VCRedistExe"/>
  </PackageFiles>
  <InstallChecks>
    <MsiProductCheck Property="VCRedistInstalled" Product="{CF2BEA3C-26EA-32F8-AA9B-331F7E34BA97}"/>
  </InstallChecks>

  <!-- Defines how to invoke the setup for the Visual C++ 11.0 redist -->
  <!-- TODO: Needs EstimatedTempSpace, LogFile, and an update of EstimatedDiskSpace -->
  <Commands Reboot="Defer">
    <Command PackageFile="vcredist_x64.exe" 
         Arguments=' /q:a ' 
         >

      <!-- These checks determine whether the package is to be installed -->
      <InstallConditions>
        <BypassIf Property="VCRedistInstalled" Compare="ValueGreaterThanOrEqualTo" Value="3"/>
        <!-- Block install if user does not have admin privileges -->
        <FailIf Property="AdminUser" Compare="ValueEqualTo" Value="false" String="AdminRequired"/>

        <!-- Block install on any platform other than x64 -->
        <FailIf Property="ProcessorArchitecture" Value="AMD64" Compare="ValueNotEqualTo" String="InvalidOS"/>

        <!-- Block install on Vista or below -->
        <FailIf Property="VersionNT" Compare="VersionLessThan" Value="6.00" String="InvalidPlatformWinNT"/>

      </InstallConditions>

      <ExitCodes>
        <ExitCode Value="0" Result="Success"/>
        <ExitCode Value="3010" Result="SuccessReboot"/>
        <DefaultExitCode Result="Fail" FormatMessageFromSystem="true" String="GeneralFailure" />
      </ExitCodes>

    </Command>
  </Commands>
</Product> 
```

# quickbooks - 获取应用程序的所有活动令牌

> ID：14497387
> 
> 赞同：1
> 
> 时间：2013-01-24T09:00:43.317
> 
> 标签：quickbooks, intuit-partner-platform, intuit

有没有一种方法可以让我们将连接领域的所有活动 oauth 令牌获取到应用程序。我需要这个作为故障保险。例如，如果用户对领域进行身份验证并且我们未能为领域保存令牌和机密，则用户已连接到我们的应用程序，我们正在被收费但我们无法获取任何数据，因此我们需要一个能够获取当前活动令牌和机密的服务。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:13:35.583

如果需要，您可以转到 appcenter 中的连接报告并手动断开用户连接。这将使令牌无效，他们将需要重新授权连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:05:55.253

Intuit 不提供执行此操作的任何 API。由于提供这样的 API 将是一个潜在的巨大安全漏洞，我不会让你对它变得可用抱有希望。

您是否研究过为什么您的服务无法保存令牌/秘密/领域？这听起来像是开始的地方......

# c# - 在 ASP.NET 中动态添加 asp:textbox

> ID：14497389
> 
> 赞同：3
> 
> 时间：2013-01-24T09:00:50.577
> 
> 标签：c#, asp.net, webforms

我有一个`aspx`用 ASP.NET Web 窗体制作的页面。我需要创建的是两个`asp:textbox`字段。我希望能够通过按下按钮在其下方动态添加两个新字段。

所以基本上我希望能够添加无限数量的“新”文本字段。但我不确定如何在 ASP.NET 中执行此操作。

有没有办法创建这些文本字段的区域？这样当`form`发布 a 时，我可以轻松地遍历它们？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T09:10:44.647

在您的 aspx 文件中：

```
 <asp:TextBox runat="server" ID="textbox1"/>
 <asp:TextBox runat="server" ID="textbox2"/>

 <asp:Button runat="server" ID="btnAdd" OnClick="btnAdd_Click" />
 <asp:PlaceHolder runat="server" ID="ph" /> 
```

在您的 aspx.cs 文件中：

```
 protected void btnAdd_Click(object sender, EventArgs e)
 {
      TextBox tb1 = new TextBox();
      TextBox tb2 = new TextBox();
      ph.Controls.Add(tb1);
      ph.Controls.Add(tb2);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:06:35.087

您可以添加此字段并使它们隐藏（不可见）。您可以在按钮单击时显示字段（使用 javascript）。动态添加服务器端控件是个问题。

# python - 有没有办法使用 python 编码，以便 xmlrpc 错误消息在客户端显示正确的 CR？

> ID：14497395
> 
> 赞同：0
> 
> 时间：2013-01-24T09:01:04.383
> 
> 标签：python, python-2.7, xml-rpc, xmlrpclib

在 python 中服务器的服务器端，`xmlrpc`我在函数覆盖中有以下代码行`SimpleXMLRPCServer._marshaled_dispatch`：

```
response = xmlrpclib.dumps(
            xmlrpclib.Fault(1, "some error\nnext line\n"),
            encoding=self.encoding, allow_none=self.allow_none) 
```

创建一些自定义错误/故障消息以在客户端显示。但是，此代码将在客户端显示类似以下内容

```
xmlrpclib.Fault: <Fault 1: "some error\nnext line\n"> 
```

而我想要类似的东西

```
xmlrpclib.Fault: <Fault 1: "some error
next line
"> 
```

即换行符实际上是“使用”而不是打印的。

我能做到这一点的任何想法（每个服务器端，即修改上面显示的行，并且不使用第三方包。）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:30:14.753

您正在查看`Fault`对象的表示；字符串消息本身包含在`.faultString`属性中：

```
print fault.faultString 
```

Fault 类的否则使用;`__repr__`表示该值。`repr()`如果不更改`xmlrpclib.Fault`类本身（通过替换它的`__repr__`方法或`__str__`向其添加方法），您将无法解决这个问题。

您可以将其修补到课程中：

```
from xmlrpclib import Fault

def fault_repr(self):
    return "<Fault %s: %s>" % (self.faultCode, self.faultString)

Fault.__repr__ = fault_repr 
```

# c# - 在 ASP.NET MVC 4 中显示日期时间

> ID：14497400
> 
> 赞同：2
> 
> 时间：2013-01-24T09:01:27.430
> 
> 标签：c#, asp.net-mvc

我正在制作一个小应用程序，我需要显示 DateTime，但我不知道如何。

我有一个视图模型：

```
public class ViewModel
{
    public DateTime Time{ get; set; }
} 
```

我有一个名为 TimeController 的控制器：

```
public ActionResult Index()
{
    ViewModel v = new ViewModel();
    v.Time = DateTime.Now;
    return View(v);
} 
```

以及来自索引的视图：

```
 ViewBag.Title = "Index";
}
<h2>Hello</h2> 
```

有人可以解释一下如何在我的视图中显示时间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:08:25.170

> 有人可以解释我如何在我的视图中显示时间吗？

您可以使用@直接显示它：

```
<div>@DateTime.Now.ToString()</div> 
```

如果您的唯一目的是显示 DateTime，我不会费心使用 ViewModel 或至少不会存储 DateTime。现在只是为了能够在 View 中显示它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T09:05:20.350

您视图的第一行

```
@model ViewModel 
```

这意味着您的视图是使用 type 键入的`ViewModel`

然后

```
@Html.DisplayFor(m => m.Time) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:23:41.440

首先在顶部的索引视图中添加 this:@model Yourapp.Models.ViewModel 然后你可以这样做：

```
Time is : @Model.Time 
```

# database - How to create a TableView with the rows displaying a value from an SQLite database in Titanium Studio?

> ID：14497405
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:01:46.493
> 
> 标签：database, sqlite, titanium

I'm trying to create an app using **Titanium Studio** that will display information from an SQLite database. To make things simpler, lets say my database have the following columns: **Last Name, Given Name, Age, Race & Religion**

I currently have a basic framework for the app, which consists of multiple tabs. In one of the tabs (which corresponds to a particular window), I would like to have a TableView that displays only **Last Name, Given Name & Age** in each row.

How do I do that? Appreciate all the help I can get!

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:24:24.317

[Have you looked at this?](http://docs.appcelerator.com/titanium/latest/#!/guide/Working_with_a_SQLite_Database)

So once you get the rows from the database, just create rows for your tableview. Here is a start:

```
// Fetch the db and execute a select from your person table
var db = Ti.Database.open('mydb');
var rows = db.execute('SELECT * FROM person');

var persons = [];
while (rows.isValidRow())
{
    persons.push({title : + rows.fieldByName('Last Name'));
    rows.next();
};
rows.close();

var yourTable = Ti.UI.createTableView({
    width : Ti.UI.FILL,
    height : Ti.UI.FILL,
    data: persons // Set the rows to the table
});

// Dont forget to close the db
db.close(); 
```

[Use this as a reference to style your table rows more effectively.](http://docs.appcelerator.com/titanium/latest/#!/guide/TableViews)

# git - hubflow：如果我想在 master 分支上从 0.0.1-rc2 转到 0.0.1，我应该执行什么命令？

> ID：14497407
> 
> 赞同：1
> 
> 时间：2013-01-24T09:01:54.133
> 
> 标签：git, github, git-flow

我目前正在学习使用 Git 和 GitHub 管理版本控制和工作流的[HubFlow](http://datasift.github.com/gitflow/GitFlowForGitHub.html)方法。

我创建了这个[虚拟存储库](https://github.com/simkimsia/learnhubflow)以获得一些实践经验。

我尝试了以下方法：

1.  从开发分支创建发布分支
2.  关闭发布分支
3.  从主分支创建修补程序分支
4.  关闭修补程序分支

现在我的主分支上有 0.0.1-rc2。由于 HubFlow 自动化工具，这些标签做得很好。

问题是，如果我现在想在我的主分支上将版本提升到 0.0.1，我该怎么办？

是吗

a) 使用命令创建另一个发布分支

```
git hf release start 0.0.1 
```

提升版本

```
git commit -a -m 'Bump to 0.0.1' 
```

然后完成发布

```
git hf release end 0.0.1 
```

**或者**

b) 转到主分支

```
git checkout master 
```

并提高版本

```
git commit -a -m 'Bump to 0.0.1' 
```

**或者**

c) 别的东西？

谢谢你。

# php - 没有数据时PHP代码不起作用？

> ID：14497414
> 
> 赞同：0
> 
> 时间：2013-01-24T09:02:22.760
> 
> 标签：php, mysql, ajax, uploadify

我正在做基于 PHP 的数据输入程序，每件事都没有问题（仍在建设中），但有一个问题我找不到解决方案。问题是当数据库没有任何数据时，图像路径不会被注册。

现在我正在使用 uplodify 上传图像文件，同时我也在发送一些数据。数据包含名称、联系方式和描述，这将直接插入到数据库中，我还将上传图像，该图像将保存到文件夹中，名称将保存在数据库中。但是这个过程由两个不同的 PHP 文件处理，一个是 AddPOIPro.PHP，它处理数据添加和 uplodify.php，用于处理文件上传和文件名的更新。

我遇到的第一个问题是 uplodify 不是在与提交的数据相同的行中添加文件名，所以我所做的是获取最后一个 ID 并将其递减一个，并更新在有数据时有效的行，但当他们的没有数据失败。那么我该怎么做才能克服这个问题。以下是我的完整脚本，感谢您的时间。

**形式**

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('lId.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="Upl/jquery.uploadify.min.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.form.js"></script>

<script type="text/javascript">
$(function() {
    $('#imgUpload').uploadify({
        'auto'     : false,
        'swf'      : 'Upl/uploadify.swf',
        'uploader' : 'Upl/uploadify.php',
        'height'   : 20,
        'width'    : 200,
    }
        // Put your options here
    });
});
</script>

<script type="text/javascript">
 $(document).ready(function(){
  $("#sendData").click(function(){
    var name  = document.getElementById("Name").value;
    var desc = document.getElementById("Descrip").value;
    var con = document.getElementById("ConInfo").value;
    var dataString = 'Name='+name+'&Descrip='+desc+'&ConInfo='+con;

    $.ajax({
      type:'POST',
      data:dataString,
      url:'AddPoiPro.php',
      success:function(data){
       if(data="Data inserted") {
          //alert("Data  Success");
          document.getElementById('msg').innerHTML= "<div style=\"background-color:#0F0; text-align:center; color: #060\">Data Saved</dive>";
          $('#msg').delay(1500).fadeOut();

        } else {
          //alert("Not Inserted");
          document.getElementById('msg').innerHTML= "<div style=\"background-color:#0F0; text-align:center; color: red\">Data Not Saved</div>";
        }
     } 
   });
  });
});
</script>

<link rel="stylesheet" type="text/css" href="Upl/uploadify.css" />

<title>AddPOI</title>
</head>

<body>
<form method="post" enctype="multipart/form-data" name="form1" id="form1">
  <p>
    <label for="poiid">ID :</label>
    <input type="text" name="poiid" id="poiid" readonly="readonly" style="width:70px;" value="<?php echo $tId; ?>" />
  </p>
  <p>
    <label for="Name">POI Name :</label>

    <input type="text" name="Name" id="Name" />
  </p>
  <p>
    <label for="Descrip" style="alignment-adjust:middle">POI Description :</label>
    <textarea name="Descrip" id="Descrip" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="ConInfo">Contact Infomation :</label>
    <textarea name="ConInfo" id="ConInfo" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="Img">POI Image</label>
    <input type="file" name="imgUpload" id="imgUpload" />
  </p>
  <p><div id="msg"></div></p>
  <p>  
  <div align="center">
    <input type="button" name="Submit" id="sendData" value="Submit" onclick="$('#imgUpload').uploadify('upload','*');" style="width:100px;" />
    <input type="reset" name="reset" id="reset" value="Rest Data" style="width:100px;" />
  </div>
  </p>
</form>
</body>
</html> 
```

**处理 PHP**

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('connect.php');

$getId = mysql_query("SELECT ID FROM poiinfo");
$row = mysql_fetch_array($getId);

$poiName = $_REQUEST['Name'];
$poiDes = $_REQUEST['Descrip'];
$poiCon = $_REQUEST['ConInfo'];

if($row['ID']== 1){

    $updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon' WHERE 1";
    $updDone = mysql_query($updLn);
    if ($updDone){
        echo "Data inserted";
    }else {
        echo "Not Done";
    }  

}else {
 $dbData = "INSERT INTO poiinfo(`Name`, `Des.`, `Contact`) VALUES ('$poiName','$poiDes','$poiCon')";

        $putData = mysql_query($dbData);
        if ($putData){
            echo "Data inserted";
        }else {
            echo "Not Done";
        }
 }       
?> 
```

**上传 php**

```
<?php
/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

include ('../../POIWeb/connect.php');
include ('../../POIWeb/lId.php');

// Define a destination
$path = 'POIWeb/img/';
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $path ; // Relative to the root

/*$verifyToken = md5('unique_salt' . $_POST['timestamp']);

if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);

        echo $fName;
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}*/

//if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetFile = $targetPath . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);    
    $tId = $tId--;

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);

        $fName = $_FILES['Filedata']['name'];
        $imgPath = "UPDATE poiinfo SET Img = '$fName' WHERE ID = '$tId'";
        mysql_query($imgPath);  

     echo '1';       

    } else {
        echo 'Invalid file type.';
    }
?> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:42:32.307

我发现我的问题的解决方案从 StackOverflow 中的人那里得到了一些帮助 下面是我的完整代码，如果有人遇到与我类似的问题，您可以使用此代码。如果它对你有用，请给我投票，谢谢。

**我的数据输入表**

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('lId.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="Upl/jquery.uploadify.min.js"></script>

<script type="text/javascript">
$(function() {
    $(function() {
        $('#imgUpload').uploadify({
            'auto'     : false,
            'swf'      : 'Upl/uploadify.swf',
            'uploader' : 'Upl/uploadify.php',
            'height'   : 20,
            'width'    : 200,
            'fileTypeDesc' : 'Image Files',
            'fileTypeExts' : '*.gif; *.jpg; *.png'
    });
        // Put your options here
    });
});
</script>

<script type="text/javascript">
 $(document).ready(function(){
  $("#save_data").click(function(){
    var name  = document.getElementById("Name").value;
    var desc = document.getElementById("Descrip").value;
    var con = document.getElementById("ConInfo").value;

    var dataString = 'Name='+name+'&Descrip='+desc+'&ConInfo='+con;

    $.ajax({
      type:'POST',
      data:dataString,
      url:'AddPoiPro.php',
      success:function(data){
       if(data="Data inserted") {
          //alert("Data  Success");
          document.getElementById('msg').innerHTML= "<div style=\"background-color:#0F0; text-align:center; color: #060\">Data Saved</dive>";
          $('#msg').delay(1500).fadeOut();
        } else {
          //alert("Not Inserted");
          document.getElementById('msg').innerHTML= "<div style=\"background-color:#0F0; text-align:center; color: red\">Data Not Saved</div>";
          $('#msg').delay(1500).fadeOut();
        }
     } 
   });
  });
});
</script>

<link rel="stylesheet" type="text/css" href="Upl/uploadify.css" />

<title>AddPOI</title>
</head>

<body>
<form method="post" enctype="multipart/form-data" name="form1" id="form1">
  <p>
    <label for="poiid">ID :</label>
    <input type="text" name="poiid" id="poiid" readonly="readonly" style="width:70px;" value="<?php echo $tId; ?>" />
  </p>
  <p>
    <label for="Name">POI Name :</label>

    <input type="text" name="Name" id="Name" />
  </p>
  <p>
    <label for="Descrip" style="alignment-adjust:middle">POI Description :</label>
    <textarea name="Descrip" id="Descrip" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="ConInfo">Contact Infomation :</label>
    <textarea name="ConInfo" id="ConInfo" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="Img">POI Image</label>
    <input type="file" name="imgUpload" id="imgUpload" />
  </p>
  <p><div id="msg"></div></p>
  <p>  
  <div align="center">
    <input type="button" name="Submit" id="save_data" value="Submit" onclick="$('#imgUpload').uploadify('upload','*');" style="width:100px;" />
    <input type="reset" name="reset" id="reset" value="Rest Data" style="width:100px;" />
  </div>
  </p>
</form>
</body>
</html> 
```

**我的数据处理 PHP**

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('connect.php');

$getId = mysql_query("SELECT ID FROM dbname");
$row = mysql_fetch_array($getId);

$poiName = $_REQUEST['Name'];
$poiDes = $_REQUEST['Descrip'];
$poiCon = $_REQUEST['ConInfo'];

if($row['ID']== 1){

    $updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon' WHERE 1";
    $updDone = mysql_query($updLn);

    if ($updDone){
        echo "Data inserted";
    }else {
        echo "Not Done";
    }  

}else {
    $dbData = "INSERT INTO poiinfo(`Name`, `Des.`, `Contact`) VALUES ('$poiName','$poiDes','$poiCon')";        
    $putData = mysql_query($dbData);

    if ($putData){
        echo "Data inserted";
    }else {
        echo "Not Done";
    }
 }       
?> 
```

这对于uploadify PHP 来说真的很棘手，但让它以我想要的方式工作。

**上传 PHP（我的版本）**

```
<?php
/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

include ('../../POIWeb/connect.php');
include ('../../POIWeb/lId.php');

// Define a destination
$path = 'POIWeb/img/';
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $path ; // Relative to the root

/*$verifyToken = md5('unique_salt' . $_POST['timestamp']);

if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);

        echo $fName;
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}*/

//if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetFile = $targetPath . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);    
    $tId = $tId--;

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);

        $fName = $_FILES['Filedata']['name'];
        $imgPath = "UPDATE poiinfo SET Img = '$fName' WHERE ID = '$tId'";
        mysql_query($imgPath);  

     echo '1';       

    } else {
        echo 'Invalid file type.';
    }
?> 
```

如果有人面临与我遇到的相同情况，则此脚本现在可以完美运行，并查看它是否适合您，并且您也可以进行任何更改。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:41:26.373

我认为这将是一个更好的方法

```
 $("#sendData").click(function(){
    //upload the file programatically (Method Call'upload')[http://www.uploadify.com/documentation/uploadify/upload/]
    // echo the name of the uploaded file (make sure to rename the file for uniquiness)
    // create a hidden element with the filename as the value inside the form
    // call the ajax submit and submit the form. You can use (onuploadsuccess)[http://www.uploadify.com/documentation/uploadify/onuploadsuccess/] to trigger the element creation and ajax submit functions
 }); 
```

您当前的实现可能会导致问题考虑，
*请求 1：ID 10
上传 1：ID 10
请求 2：ID 11
请求 3：ID 12
上传 2：ID 12
上传 3：ID 12*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:18:43.560

要获取 Last id，您可以按以下方式进行查询

```
SELECT `ID`
FROM `poiinfo`
ORDER BY `ID` DESC
LIMIT 0 , 1 
```

如果你遇到任何问题，那么你可以敲我..

# javascript - JQuery 选择器：如何获取一个只有一个属性的 img id

> ID：14497417
> 
> 赞同：1
> 
> 时间：2013-01-24T09:02:38.633
> 
> 标签：javascript, jquery, html, jquery-selectors

例如，如果页面上只有一张图像具有属性 aria-disabled = "true" ，如何使用 jquery 选择器来获取此元素？请注意，并非所有图像都具有 aria-disabled ，其中一些没有此属性，其中一些具有 aria-disabled = "false"。只有**一张**图像具有 aria-disabled = "true"。谢谢

例如。

```
$(img :  aria-disabled = "true").attr(id); 
```

当然这应该是无效的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:03:47.350

尝试这个

```
$('img[aria-disabled="true"]').attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:08:19.877

请参阅[元素选择器（“元素”）](http://api.jquery.com/element-selector/)和[属性等于选择器 [name="value"]](http://api.jquery.com/attribute-equals-selector/)文档。

您可以通过串联组合元素和属性选择器

```
$('img[aria-disabled="true"]').attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:16:00.300

尝试这个

***HTML***

```
<div>
     <img aria-disabled="true" id="1">
     <img aria-disabled="flase" id="2">
</div> 
```

***JS代码***

```
$img = $('img');
if($img.attr('aria-disabled') == 'true'){
    alert($img.attr('id'));
} 
```

**或者** 这也更有效

```
$('img[aria-disabled="true"]').attr('id'); 
```

**[演示](http://jsfiddle.net/ZCTgY/)**

# opencl - 我可以从 OpenCL 内核调用 C 库函数吗？

> ID：14497418
> 
> 赞同：4
> 
> 时间：2013-01-24T09:02:42.800
> 
> 标签：opencl

我将使用 OpenCL 并行化加密/解密过程。

为此，我只想使用现有的 openSSL 加密库函数，而不是创建自己的算法，如 AES、DES。

所以我要从 OpenCL 内核调用一个 openSSL 加密函数。您能否澄清我的查询，是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:42:37.820

不，您仅限于内置函数和您自己在内核级别定义的函数。如果您将主机和设备视为两个单独的实体，它们只能通过命令队列及其相关调用进行通信，这一点会立即变得清晰（在 GPU 的情况下）。

# c++ - 如何使用 C++ 设置 sqlite 参数

> ID：14497423
> 
> 赞同：1
> 
> 时间：2013-01-24T09:02:54.303
> 
> 标签：c++, sqlite

我需要设置一些参数，`sqlite`例如打开标题：（.headers ON），将输出模式设置为 csv ：（.mode csv），我需要使用 C++ 而不是`sqlite`命令行工具来完成。

我可以知道它是否可能，如果可能的话，如何实现这一点（使用示例）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:10:23.810

点命令是 sqlite 命令行工具的便利。使用 API 无法使用它们。不过，CSV 很容易自己构建。

# c# - 为什么我的 GridView 位字段列是空白的？

> ID：14497431
> 
> 赞同：0
> 
> 时间：2013-01-24T09:03:33.507
> 
> 标签：c#, asp.net, sql-server-2008

在 GridView 中显示位字段时出现问题，当呈现 GridView 时，位字段为空白。

绑定到我的 GridView 的代码：

```
protected void InitGridViewDisplay(GridView mygrid, Button mybutton, DataTable mydt, int i)
{
    mygrid.DataSource = mydt;
    mygrid.DataBind();
    mygrid.Visible = true;
} 
```

所有其他字段都正确显示，但是位字段显示为空列？

...经过进一步讨论...

```
 for (int j = 0; j < mydt.Columns.Count; j++)
    {
        string fieldtype = Convert.ToString(mydt.Columns[j].DataType);
        if (fieldtype == "System.Boolean")
        {
            foreach (DataRow row in mydt.Rows)
            {
                string getrowvalue = Convert.ToString(row[j]);
                switch (getrowvalue)
                {
                    case "False":
                        {
                            row[j] = 0;
                            break;
                        }
                    case "True":
                        {
                            row[j] = 1;
                            break;
                        }
                }
            }
        } 
    } 
```

......我错过了什么吗？在 GridView 中显示时，列仍为空白...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:21:08.053

在我的项目中，我有一个带有复选框的 GridView。它使用“位”值检查和取消检查。

```
<Columns>
<ItemTemplate>
   <asp:CheckBox id="chkStatus" Enabled='<%# Enable(Eval("Status")) %>' runat="server" />
</ItemTemplate> 
```

在后面的代码

```
 Protected Function Enable(ByVal sStatus As Boolean) As String
    If UCase(Trim(sStatus)) = True Then
        Return "true"
    ElseIf UCase(Trim(sStatus)) = False Then
        Return "false"
    End If
End Function 
```

阿伦

# java - 如何在正在运行的线程中显示警报对话框？

> ID：14497448
> 
> 赞同：0
> 
> 时间：2013-01-24T09:04:16.407
> 
> 标签：java, android, android-layout, android-widget

我想根据属性显示一个警报对话框，当用户单击“确定”按钮时，再次调用该函数以获取正在运行的进程中的更新值。

我有以下代码：

```
importingProgress = ProgressDialog.show(context, getString(R.string.progressNewsListTitle),
    getString(R.string.progressProjectListMessage), true);

new Thread(new Runnable() {
    public void run() {
        try {
            app.SetOtherTaskRunning(true);
            Ib_clients client = db.Ib_clients_GetById(app.GetCustomerId());
            try {
                LogManager.WriteToFile("---------------- Getting News from Webservice :- " + DateFormat.getDateTimeInstance().format(new Date()) + "----------------");
                CommonFuctions.CreateXml(context, h, client, db, app.GetBookMonth(), app.GetBookQuater(), app.GetBookYear(), Constants.News, app.GetWebServiceLastSyncDate(Constants.ServiceType.NEWS.toString()), Constants.ServiceType.NEWS, null, null, null, null, null);
                Return reponse = null;
                do {
                    reponse = CommonFuctions.SendingRequest(context, handler, db);
                    if (reponse.type.compareTo("warning") == 0) {
                        h.post(new Runnable() {
                            public void run() {
                                AlertDialog.Builder alert = new AlertDialog.Builder(context);
                                alert.setTitle(context.getString(R.string.information));
                                alert.setMessage("dsgdgd");
                                alert.setPositiveButton(context.getString(R.string.logoutDialogOk), new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int whichButton) {
                                    }
                                });
                                alert.show();
                            }
                        });
                    }
                } while (reponse.type.compareTo("warning") == 0);
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (Exception e) {
            //Log.d(Constants.TAG, e.getMessage());
            e.printStackTrace();
        }
        if (importingProgress != null) {
            importingProgress.dismiss();
            importingProgress = null;
        }
    }
}).start(); 
```

如果响应类型是`warning`，则向用户显示一条消息，如果用户单击`OK`按钮 ，则`CommonFuctions.SendingRequest(context, handler, db)`再次调用以获取更新的值。在我们得到一个 .response 类型之前`warning`，我们需要向用户显示一个警告对话框并`CommonFuctions.SendingRequest(context, handler, db)`再次调用。

返回类：

```
public class Return {
    public String type;
    public String msg;
    public boolean isSuccess;
    public int client_id; // for getting clientid from server 
    public int booking_id; // for getting bookingid form server
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:11:39.443

Try to run your dialog as below in runonUIthread:

> ```
>  runOnUiThread(new Runnable() {
>                         @Override
>                         public void run() {
>                              AlertDialog.Builder alert = new AlertDialog.Builder(context);       
>                                     alert.setTitle(context.getString(R.string.information));
>                                     alert.setMessage("dsgdgd");
>                                     alert.setPositiveButton(context.getString(R.string.logoutDialogOk), new DialogInterface.OnClickListener() {
>                                         public void onClick(DialogInterface dialog, int whichButton) {      
>                                         }
>                                     });        
>                                     alert.show();
>                         }
>                  }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:09:21.620

您将不得不使用处理程序来显示 AlertDialog，因为 UI 只能由主线程处理。

另一种方法是使用 asyncTask 进行多处理，然后使用 asyncTask 的 onPostExcecute() 来显示 AlertDialog

请随时提出任何进一步的疑问。

# c# - 找不到 eBayAPIInterfaceService

> ID：14497452
> 
> 赞同：4
> 
> 时间：2013-01-24T09:04:24.947
> 
> 标签：c#, ebay-api

我似乎连最基本的 Ebay Api Call 都无法正常工作。我正在尝试执行此处找到的教程：

[http://developer.ebay.com/DevZone/xml/docs/HowTo/FirstCall/MakingCallCSharp.html](http://developer.ebay.com/DevZone/xml/docs/HowTo/FirstCall/MakingCallCSharp.html)

但是我不断收到错误消息：

“找不到类型或命名空间‘eBayAPIInterfaceService’（您是否缺少 using 指令或程序集引用？）

（使用 Visual Studio 2012）

我添加了服务参考[http://developer.ebay.com/webservices/latest/ebaySvc.wsdl](http://developer.ebay.com/webservices/latest/ebaySvc.wsdl)

我确保添加了 using 语句。所有其他 ebay Api 对象都被识别 CustomSecurityHeaderType、GeteBayOfficialTimeRequestType 和 GeteBayOfficialTimeResponseType 未显示为错误。它似乎只有 eBayAPIInterfaceService

我已经搜索了这个问题的解决方案，似乎其他人过去也遇到过这个问题，但是我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T09:41:43.943

据我所知，这段代码应该可以工作：

```
eBayAPIInterfaceClient service = new eBayAPIInterfaceClient("eBayAPI");

// Set credentials
CustomSecurityHeaderType requesterCredentials = new CustomSecurityHeaderType();
requesterCredentials.eBayAuthToken = "yourToken";    // use your token
requesterCredentials.Credentials = new UserIdPasswordType();
requesterCredentials.Credentials.AppId = appId;
requesterCredentials.Credentials.DevId = devId;
requesterCredentials.Credentials.AuthCert = certId;

// Make the call to GeteBayOfficialTime
GeteBayOfficialTimeRequestType request = new GeteBayOfficialTimeRequestType();
request.Version = "405";
GeteBayOfficialTimeResponseType response = service.GeteBayOfficialTime(ref requesterCredentials, request);
Console.WriteLine("The time at eBay headquarters in San Jose, California, USA, is:");
Console.WriteLine(response.Timestamp); 
```

我没有 eBay API 密钥或任何东西，所以我无法真正测试它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T05:35:55.667

如果您找到此页面，那么您在寻找 API hello world 示例的错误位置。这个例子有一个更新的版本，你可以这样找到它：

从 eBay 下载并安装 eBayDotNET40sdk817.msi 文件（如果您还没有这样做的话，无论如何都需要这样做）：[https ://go.developer.ebay.com/developers/ebay/documentation-tools/sdks/dotnet](https://go.developer.ebay.com/developers/ebay/documentation-tools/sdks/dotnet)

然后你的硬盘上会有两个示例教程：C:\Program Files\eBay\eBay .NET SDK v817 Release\Tutorials\C#

这两个教程是：Tutorial_HelloWorld.doc、Tutorial_ConsoleAddItem.doc

我尝试了 add-item 教程，只需复制和粘贴代码就可以了。我还没有尝试过 hello world 教程，但我可以看到它是一个更新版本，不使用 eBayAPIInterfaceClient 或 eBayAPIInterfaceService。

附带说明：您需要添加到项目中的 COM 引用位于 C:\Program Files\eBay。

最后，如果您希望 Sebastian 的精彩答案（上图）中的代码能够正常工作，那么不要忘记将 requestURL 放在您实例化 eBayAPIInterfaceClient 的位置，如下所示：

```
eBayAPIInterfaceClient service = new eBayAPIInterfaceClient("eBayAPI", requestURL); 
```

（我试图编辑他的答案，但没有奏效）

祝你好运！:)

# svn - maven 使用提交消息将 jar 部署到 svn

> ID：14497459
> 
> 赞同：3
> 
> 时间：2013-01-24T09:04:45.183
> 
> 标签：svn, maven, maven-deploy-plugin

我们使用在 SVN 中管理的 maven repo。我构建了一个 jar `newUtil-1.0.jar`，我需要将它部署到远程仓库。我正在使用以下命令，这会导致构建失败。

> `mvn deploy:deploy-file -Dfile=/tmp/newUtil-1.0.jar -DgroupId=com.tareque.utils -DartifactId=newUtil -Dversion=1.0 -Dpackaging=jar -DrepositoryId=myrepo -Durl=https://<my-repo-url>`

检查服务器端的日志以`svn`显示此消息

> [2013 年 1 月 18 日星期五 11:35:47] [错误] [客户端 169.124.140.200] 提交被预提交挂钩（退出代码 1）阻止，输出：\n不允许空注释。

由此看来，带有空消息/评论的提交被阻止了。

那么，如何将提交消息的注释传递给上述`maven deploy`命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:12:22.560

不要使用部署，使用`maven-release-plugin`. 在这种情况下设置提交消息很容易：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-release-plugin</artifactId>
      <configuration>
        <scmCommentPrefix>re #123:</scmCommentPrefix>
      </configuration>
    </plugin>  ...... 
```

您必须首先搜索一下使用发布插件所需的任何其他设置（`<scm>`和`<distributionManagement>`标签，首先），但是一旦您开始`mvn release:prepare release:perform`工作，这个额外的配置设置将允许您修改提交消息。

相信我，一旦你正确使用了发布插件，你就不会想要回到手动发布的版本。

ETA：如果您实际上正在尝试将*快照*部署到 SVN（这似乎有点疯狂，我从未见过这样做过，但应该是可能的）您想要调查[使用`wagon-scm`](http://maven.apache.org/wagon/wagon-providers/wagon-scm/usage.html)，以便您的`<distributionManagement>`部分使用`scm:svn:https://your-repo-url`. 如果你得到它的工作，请告诉我们！

# iphone - UIAlertView 最大文本长度

> ID：14497463
> 
> 赞同：0
> 
> 时间：2013-01-24T09:05:03.440
> 
> 标签：iphone, ios, objective-c

我只想在上面显示一些文本，但如果文本长度大于允许的大小`UIAlertView`，它会显示字符串。`"Null"`

我很确定文本不会比屏幕大（大约一半多一点），所以我不想让实现 a 变得复杂`ScrollView`。

我[在更改 uialertview](https://stackoverflow.com/questions/3975347/problem-in-changing-size-of-uialertview)的大小以更改 uialertview 的大小时遇到​​问题`AlertView`，但它不起作用，另外会产生一些奇怪的视觉效果。

我尝试了这个第三部分组件[https://github.com/inamiy/YIPopupTextView](https://github.com/inamiy/YIPopupTextView)，我什至无法通过编译。（已经将这 4 个文件导入到项目中。）我不知道为什么。

所以，实际上我只是想增加允许在`AlertView`. 任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:15:55.853

我写了一个小测试程序。这是我添加到单一视图应用程序模板的唯一内容：

```
- (void)viewDidAppear:(BOOL)animated {
    NSMutableString *message = [[NSMutableString alloc] init];
    while (message.length < 100000) {
        [message appendString:@"Hello, world!  "];
    }
    [message appendString:@"This is the end."];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Test" message:message delegate:nil cancelButtonTitle:@"Done" otherButtonTitles:nil];
    [alert show];
} 
```

这在运行 iOS 5.0 的 iPhone 模拟器和运行 iOS 6.0.2 的 iPhone 5 上运行良好。显示所有文本（在可滚动的文本视图中）。

您的问题可能不在于文本的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T14:36:17.043

当我显示在字典中解析的 JSON 对象的结果然后打印在 alertView 上（在 Xcode 5.1.1 上，在 iphone 64 位模拟器上为 iOS 7.1 编译）时，我发现了一个奇怪的行为。对于相同的输入数据：

```
[[UIAlertView alloc]initWithTitle:@"something" message:[[[NSString stringWithFormat:@"json:%@",[inputData dictionaryRepresentation]] stringByReplacingOccurrencesOfString:@" "withString:@""]substringToIndex:7035] delegate:self cancelButtonTitle:@"ok" otherButtonTitles: nil]; 
```

正确打印，但如果我说“substringToIndex：7036”它只显示空格......没有“stringByReplacingOccurrencesOfString：”方法，限制远远超出：

```
[[UIAlertView alloc]initWithTitle:@"something" message:[[NSString stringWithFormat:@"json:%@",[inputData dictionaryRepresentation]] substringToIndex:13768] delegate:self cancelButtonTitle:@"ok" otherButtonTitles: nil]; 
```

正确打印，而不是“substringToIndex：13769”不打印......我意识到这不是最大长度的问题，而是JSON对象内的特殊字符

# android - 在 Android 上访问本地和远程文件时出现问题

> ID：14497469
> 
> 赞同：0
> 
> 时间：2013-01-24T09:05:19.303
> 
> 标签：android

我在访问我的`Android`应用程序上的本地文件时遇到了一些问题。我使用`FileInputStream`类访问 SD 卡上的文件没有任何问题。当我关闭我的应用程序并手动将新文件添加到 SD 卡时会出现此问题。当我尝试在我的应用程序上访问这个新的时，它无法访问（未找到）。我认为它必须与`cache`Android 为每个应用程序管理的相关。

我想`cache`在我的应用程序关闭时清理它。也许是因为当我关闭应用程序时。（活动）它已停止但未关闭，并且`cache`未清理。

有人有这个烦恼吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:00:12.497

问题解决了。在 SD 卡上是由于编码错误。刷新 SD 文件是在 Activity 中的 OnCreate 方法上完成的，并且在 Activity 关闭后并未执行。我已更改为 OnStart 并且工作正常。关于访问服务器上的远程文件，我使用了 URLConnection.setUseCaches(false)，现在也可以正常工作了！谢谢

# java - 分解 finally {...} 块

> ID：14497473
> 
> 赞同：12
> 
> 时间：2013-01-24T09:05:25.337
> 
> 标签：java, exception-handling

我想知道以下两个 swnippest 在语义上是否相同，如果不是，有什么区别（我们假设我们要计算 R 类型的结果，并且要防止在执行过程中可能抛出的异常 X所以）：

```
public R tcf(....) {
   try {
       R some = ...;
       ... compute the result ....
       return some; 
   }
   catch (X exception) {
       ... exception handling ....
   }
   finally {
       ... clean up ....
   }
} 
```

以及以下内容：

```
public R tc(....) {
   try {
       R some = ...;
       ... compute the result ....
       return some; 
   }
   catch (X exception) {
       ... exception handling ....
   }
}

public R tf(....) {
    try {
        return tc(....);  // wrap the try-catch in tc()
    }
    finally {
        ... clean up ....
    }
 } 
```

据我所见，它归结为如果包装在 try 块中的 try-catch 块与 finally 在语义上与 try-catch-finally 块相同，假设 finally 和 catch 短语中的代码保持不变同样，外部 try 块只是提升内部块的结果。

实际相关性：给定一个不使用 try-catch-finally 的代码库，什么时候应该使用，并且由于某种原因，人们无法触及该代码，因此可以或多或少地机械地生成一层包装方法，以添加最后。

我完全了解这样一个事实，即出于多种原因，应该尽可能使用 try ... catch ... finally。具体来说，我**不**建议以任何方式重构第一个示例，使其看起来像第二个示例。

相反，我想确保示例 2 可以安全地重构为示例 1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T09:08:22.137

在功能上，它们是等价的。

我认为以分配相关资源的相同方法执行清理是一种很好的方式。在某些情况下，这是处理事情的唯一实用方法（例如，如果清理涉及`tcf`/的本地变量`tc`）。

此外，如果`tc`不自行清理，清理将成为函数合同的一部分，作为调用者的义务。这使得设计更容易出错，因为清理很容易忘记或出错。此外，如果清理中涉及的步骤发生任何变化，则需要跟踪和更新每个调用者。

底线：如果*可以*在 中执行清理`tcf`，那么应该可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T09:09:31.377

然而，它们是相同的。try/finally 应该总是在请求追索权（最终释放）之后。（请注意，这发生在尝试之前）

例如：

```
 getLock();
   try {
       doSomething()
   }
   finally {
       releaseLock();
   } 
```

因为很容易忘记清理，所以它应该总是发生在与获取资源相同的位置。这样做的原因是，您永远不应该让呼叫者承担他们必须做的事情（您可以自己做）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T09:12:04.487

没有在与 try/catch 相同的方法中执行 finally 会使您对执行 try/catch 的方法在某个点被调用而不执行 finally，这可能是一个错误。
因此，我不建议您这样写，尽管在您描述的场景中，当包含 try/catch 的方法无法修改时，必须通过 finally 添加功能，这是唯一的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T09:15:30.797

我认为您的描述非常准确，因为`tf finally`将在两种情况下都执行，并且异常处理将在任一`tcf`或`tf catch`块中处理。

也就是说，在示例（1）中：如果您的 中发生异常`try`，流程将执行您的`catch`块，然后执行您的`finally block`. 在示例（2）中`tc`，如果您的块中发生异常`try`，则流程将在您的`catch`块中继续，然后（假设未重新抛出异常）返回到调用行 in `tf`。完成您的`tf try`区块后，流程将在您的`tf finally`区块中继续。

我想要注意的主要含义是：您可能无法按照您建议的方式进行纠正：

1.  如果您在第二个示例中实现您的代码，您将不一定能够访问`tc`资源`tf`来清理它们。
2.  即使可以，您也在一个不接近资源使用的层清理资源，甚至可能不被框架的其他客户端代码使用。我想这是文档和培训的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T09:13:36.023

两者是相同的。但 finally 用于当您有中断函数之间的风险或想要释放函数持有的一些资源时。在这种情况下，catch 会被跳过，但最终肯定会执行。

try 可以与 catch 或 finally 或两者一起使用。finally 一般不能显示发生的异常，但 catch 可以跟踪异常。

# java - 单个 NIC 上的多个 IP：UDP 广播

> ID：14497486
> 
> 赞同：1
> 
> 时间：2013-01-24T09:06:40.270
> 
> 标签：java, windows, networking, udp, broadcast

问题：
1-客户端 1 监听子网 A 的
IP。2-服务器向子网 B 发送广播消息
。3-客户端 1 也通过其在子网 A 中的 IP 读取此消息。-
如果消息未广播，则不会出现这种情况但单播。

我正在尝试编写一个 Java 应用程序来侦听在单个网络接口上定义的一些 IP 和端口。您可以在下面找到我的网络配置示例：

`netsh interface ip>show address`

`Configuration for interface "Local Area Connection"
DHCP enabled: No
IP Address: 22.108.131.1
SubnetMask: 255.255.255.0
IP Address: 22.108.132.1
SubnetMask: 255.255.255.0
IP Address: 22.108.133.1
SubnetMask: 255.255.255.0
InterfaceMetric: 0` 

我正在打开数据报通道并将它们绑定到这些 IP 地址。对于每个 IP，我都有不同的线程来响应来自通道的消息。

现在的问题是，服务器将 UDP 广播消息发送到

> 22.108.131.255
> 22.108.132.255
> 等等。

但是，例如在为监听 22.108.131.1 而创建的线程中，我收到了发往 22.108.132.255 的广播消息。我使用 Wireshark 检查传入的消息，它告诉我消息正确地以 22.108.132.255 的形式出现，但是在我的应用程序中，我看到消息的端点是 22.108.131.1，即监听线程。

起初我认为我的实现是错误的，但更令人惊讶的问题是传入的非广播消息。我的意思是，如果消息的目的地是 22.108.131.1，那么 22.108.132.1 不会收到，这显然是应该的。但我不明白的是，当它与广播消息有关时，它为什么不能按应有的方式运行。

我不确定问题是否是由 Windows 多 IP 配置引起的。但我观察到的是操作系统将子网 A 的广播消息传递给子网 B。

另一件可能是线索的事情是，我在上面只谈到了 22.108.131.1 和 22.108.132.1，虽然我也定义了 22.108.133.1。如果我不为该 IP 打开数据报通道，我仍然可以从其他 IP 读取该子网的广播消息。

那么我在这里错过了什么吗？还是 Windows 网络处理的本质？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:52:13.397

以 255 结尾的 IP 是一个广播消息，网络中的每个节点都会听到它。

# apache - 子目录、斜线和单个文件

> ID：14497487
> 
> 赞同：1
> 
> 时间：2013-01-24T09:06:46.107
> 
> 标签：apache, .htaccess, mod-rewrite

首先，如果有人找到一个更好的标题...去吧！问题是，我正在尝试设置 mod rewrite 以便将所有这些都转换为

`http:// mysite/phpnuget/nuget/metadata.php`

保留查询字符串参数

*   http://mysite/phpnuget/nuget/$metadata
*   http://mysite/phpnuget/nuget/$metadata/wetheaverdirstructure
*   http://mysite/phpnuget/nuget/$metadata/
*   http://mysite/phpnuget/nuget/$metadata?wetheaver=parameter
*   http://mysite/phpnuget/nuget/$metadata/wetheaverdirstructure?wetheaver=parameter
*   http://mysite/phpnuget/nuget/$metadata/?wetheaver=parameter

我通过各种测试在互联网上苦苦挣扎了几个小时，但我尝试过的第十个测试中没有一个......（mysite之前的空间只允许在Stackoverflow上发布......认为它不存在！）有人能给我一些提示吗? 谢谢你，恩里科

（改了标题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:51:20.880

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  !metadata\.php          [NC]
RewriteCond %{REQUEST_URI}  ^/phpnuget/nuget/\$metadata  [NC] 
RewriteRule  .*     phpnuget/nuget/metadata.php   [L] 
```

它会默默地映射任何像这样的 URL：

`http://mysite.com/phpnuget/nuget/$metadata/anything`

到：

`http://mysite.com/phpnuget/nuget/metadata.php`删除最后`anything`一段。

如果传入的 URL 包含查询，它将以`metadata.php`查询格式自动附加到。IE`?this=is&a=query`

以防万一，不需要 QSA 标志。

要使替换 URL 永久可见，请将最后一个 [L] 替换为 [L,R=301]

# ios - 使用 UITableView 嵌入 UIScrollView

> ID：14497490
> 
> 赞同：0
> 
> 时间：2013-01-24T09:07:18.023
> 
> 标签：ios, xcode, uitableview

所以 Path 使用这种类型的页面，在他们定制的表格上方有一个视图，这是一张背景照片，其中包含一些用户信息等。我正在尝试重新创建与此非常相似的东西。

因此，假设我想创建一个视图来准确显示 Path 应用程序的工作方式，但不是他们拥有的那个奇怪的自定义表格视图版本，而是一个实际的表格。我该怎么做这样的事情？我需要`UIScrollView`在视图中嵌入另一个的原因是因为整个事物都需要滚动的能力。我试图尽可能详细，但它有点难以解释。

如果我现在尝试一下，我想象会发生的事情是，我将 a 嵌入`UIView`到框架大小的`UITableView`a`UIScrollView`中，当我要滚动时，用户只会滚动`UITableView`，而不是一次全部。希望这有助于传达我的疑问。

另一种可能性是我完全想多了，我可以简单地在 a 的标题中子类化一个视图，`UITableView`它会拉伸我想要的宽度和高度。希望这是方法，因为这很容易！

无论如何，有人可以权衡一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:14:02.453

路径只是使用普通`UITableView`的 with `UITableViewStyleGrouped`。

顶部的自定义视图是表格第一部分的标题。

他们还访问 UITableView 的 UIScrollViewDelegate 方法以在滚动视图滚动时更改视图的外观（我认为图像已移动）。

如果您想要一个仅在视图的一部分和其上方的其他内容中滚动的表格视图，那么您需要使用`UIViewController`. 然后您可以使其符合`UITableViewDelegate`并`UITableViewDatasource`添加一个`UITableView`并使视图控制器成为数据源和委托。

然后你也可以添加一个 UIScrollView 给它。

# android - RequestRouteToHost 不起作用

> ID：14497496
> 
> 赞同：1
> 
> 时间：2013-01-24T09:07:43.793
> 
> 标签：android, routes, mms, connectivity

我需要检查我的 Android 应用程序是否存在主机路由。这是我的代码：

```
private void ensureRouteToHost(String proxyAddr) throws IOException
{
    ConnectivityManager connMgr = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);

    int inetAddr;
    inetAddr = lookupHost(proxyAddr); // Return -938825536 for IP 192.168.10.200
    Log.d(TAG, "host for proxy is " + inetAddr);
    if (inetAddr == -1)
    {
        Log.e(TAG, "cannot establish route for " + proxyAddr + ": unkown host");
        throw new IOException("Cannot establish route for " + proxyAddr + ": Unknown host");
    }
    else
    {
        int[] apnTypes = new int[] {ConnectivityManager.TYPE_MOBILE, ConnectivityManager.TYPE_MOBILE_MMS, ConnectivityManager.TYPE_MOBILE_DUN, ConnectivityManager.TYPE_MOBILE_HIPRI, ConnectivityManager.TYPE_MOBILE_SUPL};
        for (int i=0; i<apnTypes.length; i++)
        {
            if (connMgr.requestRouteToHost(apnTypes[i], inetAddr))
            {
                Log.d(TAG, "route to host requested");
                return;
            }
        }

        Log.e(TAG, "unable to request route to host");
        throw new IOException("Cannot establish route to proxy " + inetAddr);
    }
}

public static int lookupHost(String hostname)
{
    hostname = hostname.substring(0, hostname.indexOf(":") > 0 ? hostname.indexOf(":") : hostname.length());
    String result = "";
    String[] array = hostname.split("\\.");
    if (array.length != 4) return -1;

    int[] hexArray = new int[] {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};
    hexArray[0] = Integer.parseInt(array[0]) / 16;
    hexArray[1] = Integer.parseInt(array[0]) % 16;
    hexArray[2] = Integer.parseInt(array[1]) / 16;
    hexArray[3] = Integer.parseInt(array[1]) % 16;
    hexArray[4] = Integer.parseInt(array[2]) / 16;
    hexArray[5] = Integer.parseInt(array[2]) % 16;
    hexArray[6] = Integer.parseInt(array[3]) / 16;
    hexArray[7] = Integer.parseInt(array[3]) % 16;

    for (int i=0; i<8; i++)
    {
        result += Integer.toHexString( hexArray[i] );
    }

    return Long.valueOf(Long.parseLong(result, 16)).intValue();
} 
```

它在大多数设备上都能完美运行，但这真的很奇怪，它不适用于 Nexus S Europe。我已经尝试了几个 Nexus，但我总是遇到这个问题。问题出`ensureRouteToHost`在我调用时的方法中`connMgr.requestRouteToHost(apnTypes[i], inetAddr)`。无论我输入什么，它总是返回 false。我的计划是检查`192.168.10.200`我的 MMS 应用程序是否可以访问 IP。**这对于诸如 stackoverflow.com（69.59.197.21 或 1161544981 作为 int）之类的公共 IP 都不起作用。**

那么，您知道为什么这不适用于某些设备吗？感谢您阅读我的主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:31:27.963

您需要首先启动这些接口，例如 HIPRI。[此处描述了](https://stackoverflow.com/questions/2513713/how-to-use-3g-connection-in-android-application-instead-of-wi-fi/4756630#4756630)执行此操作的方法。

但是我发现虽然这使得两个接口都出现并`requestRouteToHost`返回 true（至少，一旦网络实际启动），路由似乎仍然没有效果。

这是在许多不同的手机上进行的测试。

如果你成功了，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T14:18:05.103

问题解决了。打开wifi找不到IP路由。最简单的方法是禁用wifi，做你的事情，然后启用wifi。

这是我使用的代码：

```
// Disable wifi if it's active
WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
if (wifiManager.isWifiEnabled())
{
      mWasWifiActive = true;
      wifiManager.setWifiEnabled(false);
      Log.e(TAG, "Wifi was enabled, now Off.");
}

// Do stuff here

// Re-enable wifi if it was active before routing
if (mWasWifiActive)
{
       WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
       wifiManager.setWifiEnabled(true);
       Log.e(TAG, "Wifi is back online.");
} 
```

# url - Sencha touch 自定义 rest 代理 url

> ID：14497497
> 
> 赞同：0
> 
> 时间：2013-01-24T09:07:43.887
> 
> 标签：url, rest, parameters, sencha-touch-2

我需要将附加参数传递给球衣服务器。但是我如何提交我的网址，例如**..get/{param1}/{param2}/{param3}**

这是我的js文件

```
 Ext.define('bluebutton.view.BlueButton.testing', {
    extend: 'Ext.form.Panel',
    xtype: 'testing',
       requires: [

    'bluebutton.view.BlueButton.TransactionList',
    'bluebutton.view.BlueButton.MemberPopUp',
     'bluebutton.view.BlueButton.MemberDetail',
     'bluebutton.store.BlueButton.MemberList',

    ],
    config: {
     id:'register',
        items :[

              {
                    xtype: 'textfield',
                    name: 'name',
                    label: 'Name'
                },
                {
                    xtype: 'emailfield',
                    name: 'email',
                    label: 'Email'
                },

                 {
                    xtype: 'button',
                    text: 'Send',
                    handler: function(button) {
                        var form = Ext.getCmp('register');
                          values = form.getValues();

//        Select record
        //If load data , restful will using "get",  url will be /users/1
        var User = Ext.ModelMgr.getModel('bluebutton.model.BlueButton.MemberList');
        User.load(123,
         {
            success: function(user) {
            alert(user.get('fullName'));

            }
        }
        );

                    }
                }

        ],

   }

}); 
```

模型.js

```
Ext.define('bluebutton.model.BlueButton.MemberList', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'memberModel',
        fields: [
            { name: 'fullName' },
            { name: 'singer' },

        ],

        proxy: {
            type: 'rest',
           url: 'http://localhost:8080/RESTFulExample/rest/json/metallica/get',
            reader: 'json',
            actionMethods: {
                create: 'GET',
                read: 'POST',
                update: 'PUT',
                destroy: 'DELETE'
            },

            reader: {
                type: 'json',

            },

            writer: {
                type: 'json',

            },
        }

    }

}); 
```

但现在我只能传递我的网址，如**..get/123**请指导我一些解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:22:14.450

我想到了两件事，首先不要在模型定义中编写代理，而是将其设置在 store 的初始化函数中，您可以在其中查看配置数据并在其基础上创建 url。例如

```
initialize: function() {
        var myId = this.config.uid;
        this.setProxy({
        type: 'rest',
        url: 'http://localhost:8080/RESTFulExample/rest/json/metallica/get/'+myId,
        reader: 'json',
        actionMethods: {
            create: 'GET',
            read: 'POST',
            update: 'PUT',
            destroy: 'DELETE'
        },
        reader: {
            type: 'json',

        },
        writer: {
            type: 'json',

        },
    });
} 
```

当您创建这样的商店时，您可以传递 id 来加载：

```
 var memberStore = Ext.create('bluebutton.store.BlueButton.MemberList', {
        uid : 123
    }); 
```

第二种方法可能是编写您自己的代理扩展`Ext.data.proxy.Rest`和实现`buildUrl`，以便它检查数据并将其附加到 url。例如

```
buildUrl: function(request) {
    var me      = this,
        url     = me.callParent(arguments);
    if(!Ext.isEmpty(someData)){
        url = Ext.urlAppend(url, "data="+someData);
    }
    return url;
} 
```

我希望它有所帮助。

**编辑** 自定义代理的示例代码，我过去使用它来将一些令牌附加到每个请求

```
Ext.define('myapp.proxy.CustomJsonpProxy', {
  extend: 'Ext.data.proxy.JsonP',
  alias: 'proxy.customjsonpproxy',
  buildUrl: function(request) {
    var me      = this,
    url     = me.callParent(arguments);
    if(!Ext.isEmpty(loggedInUserToken)){
      url = Ext.urlAppend(url, "token="+loggedInUserToken);
    }
    return url;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T01:54:28.967

下面的代码对我有用....将参数设置为 url

```
myStore.getProxy().getApi().read = myStore.getProxy().getApi().read + param; 
```

# c# - 计时器未处理

> ID：14497499
> 
> 赞同：0
> 
> 时间：2013-01-24T09:07:56.253
> 
> 标签：c#, timer, windows-services

我创建了一个 Windows 服务来运行一段代码，并在其中实现了计时器以定期运行它。

我的计时器课程是：

```
class TimerClass
{
    private static System.Timers.Timer aTimer;

    public static void Main()
    {

        aTimer = new System.Timers.Timer(1000);

        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        aTimer.Interval = 5000;
        aTimer.Enabled = true;

        GC.KeepAlive(aTimer);
    }

    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        aTimer.Stop();
        DatabaseUpdation dbUp = new DatabaseUpdation();
        File.AppendAllText(@"C:\Documents and Settings\New Folder\My Documents\demo\abc.txt", "Start" + " " + DateTime.Now.ToString() + Environment.NewLine);
        dbUp.GetDatafromSource();

        aTimer.Start();
    }

} 
```

我从我的 Start 方法中调用它：

```
 protected override void OnStart(string[] args)
    {
        TimerClass timer = new TimerClass();
    } 
```

但是计时器根本没有执行。谁能在这里找到我的错误？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:12:39.943

请阅读[构造函数](http://msdn.microsoft.com/en-us/library/vstudio/ace5hbzh.aspx)

您的初始化代码不应公开`static void Main()`，而应公开`public TimerClass()`

```
class TimerClass
{
    private System.Timers.Timer aTimer;

    public TimerClass()
    {
        aTimer = new System.Timers.Timer(1000);
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
        aTimer.Interval = 5000;
        aTimer.Enabled = true;
        GC.KeepAlive(aTimer);
    }

    private void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        aTimer.Stop();
        DatabaseUpdation dbUp = new DatabaseUpdation();
        File.AppendAllText(@"C:\Documents and Settings\New Folder\My Documents\demo\abc.txt", "Start" + " " + DateTime.Now.ToString() + Environment.NewLine);
        dbUp.GetDatafromSource();
        aTimer.Start();
    }
} 
```

您的方法和 aTimer 也不应该是静态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:15:03.760

您需要调用`Main`方法来启动计时器：

```
protected override void OnStart(string[] args)
{
    TimerClass.Main();
} 
```

顺便说一句，名字不是很好——我认为类似的东西`Start`会更好。另外我希望这不是您的应用程序入口点方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:11:40.857

你忘了启动你的计时器。把它移到你的范围之外。Elapse 仅在您的计时器到期时调用。

```
aTimer.Start(); 
```

仅供参考，一旦调用 start 方法，您就不需要启用计时器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T09:22:22.980

试试这个：

```
class TimerClass
    {
        private static System.Timers.Timer aTimer;

        public static void Main()
        {

            aTimer = new System.Timers.Timer(1000);

            aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

            aTimer.Interval = 5000;

            GC.KeepAlive(aTimer);

        }
        public static void Start()
        {
           aTimer.Start();

        }

        private static void OnTimedEvent(object source, ElapsedEventArgs e)
        {
            aTimer.Stop();
            DatabaseUpdation dbUp = new DatabaseUpdation();
            File.AppendAllText(@"C:\Documents and Settings\New Folder\My Documents\demo\abc.txt", "Start" + " " + DateTime.Now.ToString() + Environment.NewLine);
            dbUp.GetDatafromSource();

            aTimer.Start();
        }

    } 
```

* * *

你需要这样称呼它：

```
protected override void OnStart(string[] args)
    {
        //TimerClass timer = new TimerClass();<==No need it's static class!!!
        TimerClass.Main();
        TimerClass.Start();
    } 
```

# yii - Yii 助推器：如何在关系表行中呈现 cgridview？

> ID：14497501
> 
> 赞同：0
> 
> 时间：2013-01-24T09:08:01.747
> 
> 标签：yii, yii-extensions, cgridview

我通过 yii-booster 在 Yii 上使用 boostrap 库

我创建了一个关系表视图

相关视图是 TbGriView 本身

当我连续单击“相关”列上的链接时，该行会自行扩展，并在其中呈现一个 TbGridview。

问题是内部gridview无法排序、分页或过滤，因为它上面的每个动作都会导致整个容器网格为空

注意 - 外部网格作为 'extenalgrid' 的 id - 每个内部网格都具有类似 'internalgrid-$rowId' 的 id，因此每个内部网格在 div、table 和 table 行元素上都是不同的 id。- 从“渲染相关表格”链接调用的操作正在使用没有 postProcess 选项的 renderPartial。如果我使用 potProcess，该行将为空

那么是否不可能将完整的工作 gridview/tbgridview 渲染到相关表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:53:31.933

对不同表格的过滤器、按钮和标题使用不同`css`的类。来自`jquery.yiigridview.js`文件的事件绑定到选择器，`$('#table-id .selector-class')`因此内部 gridView 中的元素仍会触发绑定到外部 gridView 的事件。您还必须`url`通过将内部 gridView 设置为`ajaxUrl`.

# c# - TabControl 中不显示插入的表单

> ID：14497502
> 
> 赞同：1
> 
> 时间：2013-01-24T09:08:04.577
> 
> 标签：c#, .net, winforms, tabcontrol

我有 2 个表单，我希望将它们插入到带有 tabcontrol 的表单中。我已阅读[有关](https://stackoverflow.com/questions/5796334/embed-a-form-onto-a-tabcontrol-in-windows-forms)将表单添加到选项卡控件的问题，并且 Form1 已成功插入选项卡控件。Form2 也被插入，但没有显示表单的内容。

这是我的代码：

```
 private FrmMainForm trackIT = new FrmMainForm();
   private MainForm customer = new MainForm();

   private void TrackITForm_Load(object sender, EventArgs e)
        {
            AddNewForm(trackIT, trackitTab);
            AddNewForm(customer, customerTab);
        }

    public void AddNewForm(Form form, TabPage tab)
    {
        form.WindowState = FormWindowState.Maximized;
        form.TopLevel = false;
        form.Parent = tab;
        form.Visible = true;
    } 
```

我还将父窗体的 IsMDIContainer 属性设置为 true。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:29:51.277

1.  *我还将父窗体的 IsMDIContainer 属性设置为 true* ：不要那样做。你没有做MDI。
2.  在`AddNewForm()`中，在所有其他属性之后设置 WindowState 属性。
3.  我认为（不是 100% 肯定）这`Visble=true`还不够，请致电`form.Show()`。在设置 WindowState 尤其是 Parent 之后执行此操作。
4.  检查表单中设计器代码和 FormLoad 中的冲突属性。
5.  考虑使用 UserControls 而不是 Forms。它们旨在嵌入。

# jqgrid - jqgrid 搜索功能

> ID：14497503
> 
> 赞同：0
> 
> 时间：2013-01-24T09:08:04.547
> 
> 标签：jqgrid

我在我的项目中使用 jqgrid 高级搜索功能。无论搜索如何，我都想始终显示第一行。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:33:42.633

What do you mean by first overall row?

Are you fetching details from a list or from a database?

You can use a Dataprovider object and use it's setSort method..

If the data is coming from a database this can easily be done by using the sort property to pass it as the sort by property in your sql statement, if you're using a list you can use Collections.sort() but your list object has to have a sorting algo that it should follow..

# ajax - Advance Ajax Loader Plugin wordpress Google 地图未加载

> ID：14497504
> 
> 赞同：1
> 
> 时间：2013-01-24T09:08:04.873
> 
> 标签：ajax, wordpress

我用`Advance Ajax loader wordpress plugin`.

我曾经`function`加载`google map`，但是当我使用地图从一页切换到另一页时`ajax`不会加载。

我如何在后端的 advacnce ajax 加载程序的重新加载代码中尝试了我的功能，但对我没有任何作用，地图无法加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:13:02.630

如果遇到此问题的任何人只使用 iframe 并将地图功能放置在页面内，我就解决了它可以使用 ajax 轻松加载

# c# - CollectionViewSource，如何过 滤数据？

> ID：14497506
> 
> 赞同：10
> 
> 时间：2013-01-24T09:08:18.633
> 
> 标签：c#, binding, filtering, collectionviewsource

我将 ComboBox 绑定到实体，但我希望过滤数据。

到目前为止，我已经尝试了两种方法：

*   “简单”一：通过 LINQ to Entities 将过滤器直接应用于 ObjectSet
*   如 [msdn中所述设置过滤事件处理程序](http://msdn.microsoft.com/en-us/library/ms752348.aspx)

我对第一种方法感到满意，首先是因为生成到数据库的查询包含 WHERE 子句，因此不必从远程数据库中检索所有的整个数据......

但是，#2 方法要灵活得多，如果在运行时我想更改应用的过滤...我已经按照 msdn 上的示例进行操作，但出现异常，为什么？

所以，我的问题是：
1\. 哪种方法更好
2\. 为什么会出现异常？

这是我的代码：

```
 private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {
        //Do not load your data at design time.
        if (!System.ComponentModel.DesignerProperties.GetIsInDesignMode(this))
        {
            //Load your data here and assign the result to the CollectionViewSource.
            System.Windows.Data.CollectionViewSource myCollectionViewSource =
                (System.Windows.Data.CollectionViewSource)
                this.Resources["tSCHEDEViewSource"];

            // If I use this I get the data filtered on startup, but is it the right mode?
            //myCollectionViewSource.Source = _context.TSCHEDE.Where(s => s.KLINEA == kLinea && s.FCANC == "T").OrderBy(s => s.DSCHEDA).OrderByDescending(s => s.DSTORICO);

            // Instead If I apply my custom filtering logic
            myCollectionViewSource.Filter += new FilterEventHandler(filterSource);

            myCollectionViewSource.Source = _context.TSCHEDE; // ... Here i get an exception: 
            // 'System.Windows.Data.BindingListCollectionView' view does not support filtering. ???
        }
    }

    private void filterSource(object sender, FilterEventArgs e)
    {
        TSCHEDE scheda = e.Item as TSCHEDE;
        if (scheda != null)
        {
            if (scheda.KLINEA == 990)
            {
                e.Accepted = true;
            }
            else
            {
                e.Accepted = false;
            }
        }
    } 
```

**编辑**：我尝试在 View 上实现 Filter 属性，而不是设置 EventHandler：

```
myCollectionView = (BindingListCollectionView)myCollectionViewSource.View;
myCollectionView.Filter = new Predicate<object>(Contains);

public bool Contains(object de)
    {
        TSCHEDE scheda = de as TSCHEDE;
        return (scheda.KLINEA == 990);
    } 
```

现在我得到了一个*不太有用*的例外：

> System.NotSupportedException：不支持指定的方法。在 System.Windows.Data.CollectionView.set_Filter（谓词`1 值）

**编辑**

XAML 代码：

```
<UserControl.Resources>
    <CollectionViewSource x:Key="tSCHEDEViewSource" d:DesignSource="{d:DesignInstance my:TSCHEDE, CreateList=True}"  >
    </CollectionViewSource>
    <DataTemplate x:Key="SchedaTemplate">
        <StackPanel Orientation="Horizontal" >
            <TextBlock Text="{Binding Path=KSCHEDA}" Width="60"></TextBlock>
            <TextBlock Text="{Binding Path=DArticolo}" Width="200"></TextBlock>
            <TextBlock Text=" - " Width="40"></TextBlock>
            <TextBlock Text="{Binding Path=DSTORICO}" Width="150"></TextBlock>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>
<Grid Background="PapayaWhip" DataContext="{StaticResource tSCHEDEViewSource}" DataContextChanged="StartHere" Name="rootGrid">
    <ComboBox ItemTemplate="{StaticResource SchedaTemplate}" Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="23,129,0,0" Name="tSCHEDEComboBox1" SelectedValuePath="KSCHEDA" VerticalAlignment="Top" Width="393">
        <ComboBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel />
            </ItemsPanelTemplate>
        </ComboBox.ItemsPanel>
    </ComboBox>
</Grid> 
```

**现在我认为问题出在 XAML 绑定中，而不是在代码后面......**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T09:38:46.450

检查这个

**1）[CollectionView过滤](http://www.abhisheksur.com/2010/08/woring-with-icollectionviewsource-in.html)**

过滤需要一个委托（谓词），过滤将基于该委托（谓词）。Predicate 根据它返回的值 true 或 false 接收项目，它选择或取消选择一个元素。

```
this.Source.Filter = item => {
    ViewItem vitem = item as ViewItem;
    return vItem != null && vitem.Name.Contains("A");
}; 
```

2)**[动态过滤数据](http://marlongrech.wordpress.com/2008/02/11/filtering-collectionviewsource-dynamically/)**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T11:29:40.930

最后我找到了一个解决方案，正如[在这个问题](https://stackoverflow.com/questions/2702434/entity-framework-4-0-databinding-with-sorting-not-working/2720540#2720540) 中发布的那样明确声明集合的类型：

**CollectionViewType="ListCollectionView"**

所以在 XAML 中添加了 Collection 类型：

```
<CollectionViewSource x:Key="tSCHEDEViewSource" d:DesignSource="{d:DesignInstance my:TSCHEDE,  CreateList=True}" CollectionViewType="ListCollectionView">
    </CollectionViewSource> 
```

现在在代码中，事件处理程序可以工作：

```
myCollectionViewSource.Filter += new FilterEventHandler(filterSource); 
```

**唯一的遗憾是我不明白为什么，对于显然如此简单的事情，我必须在 XAML 中“手动”强制它？** 对我来说，这似乎是一种黑客行为，而且很容易出错......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T18:32:51.070

```
<TextBox x:Name="FilterTextBox">
    <b:Interaction.Triggers>
        <b:EventTrigger EventName="TextChanged">
            <b:CallMethodAction
                MethodName="Refresh"
                TargetObject="{Binding View, BindsDirectlyToSource=True, Source={StaticResource tSCHEDEViewSource}}" />
        </b:EventTrigger>
    </b:Interaction.Triggers>
</TextBox> 
```

# git - HubFlow：某些 HubFlow 命令多次提示我输入 GitHub 凭据。有没有解决的办法？

> ID：14497522
> 
> 赞同：2
> 
> 时间：2013-01-24T09:09:10.747
> 
> 标签：git, github, git-flow, hubflow

我目前正在学习使用 Git 和 GitHub 管理版本控制和工作流的[HubFlow](http://datasift.github.com/gitflow/GitFlowForGitHub.html)方法。

我创建了这个[虚拟存储库](https://github.com/simkimsia/learnhubflow)以获得一些实践经验。

我尝试过某些命令，例如

```
git hf update 
```

多次提示我输入 GitHub 凭据。

这是一个例子：

```
macair:learnhubflow simkimsia$ git hf update
Fetching origin
Already on 'master'
From https://github.com/simkimsia/learnhubflow
 * branch            master     -> FETCH_HEAD
Already up-to-date.
Username: 
Password: 
Everything up-to-date
Switched to branch 'develop'
Your branch is behind 'origin/develop' by 2 commits, and can be fast-forwarded.
From https://github.com/simkimsia/learnhubflow
 * branch            develop    -> FETCH_HEAD
Updating d76bec3..b351907
Fast-forward
 IMG_0001-w800-h600.png |  Bin 0 -> 192787 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 IMG_0001-w800-h600.png
Username: 
Password: 
Everything up-to-date
Switched to branch 'master'

Summary of actions:
- Changes from origin/master have been pulled into branch 'master'
- Changes from origin/develop have been pulled into branch 'develop'
- You are now on branch 'master' 
```

**有没有办法让我每次使用 HubFlow 命令时只需提供一次 GitHub 凭据？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:43:07.263

使用 SSH 密钥 + URL。如果您已有 SSH 密钥，[请将其添加到您的 Github 帐户](https://github.com/settings/ssh)。

如果您没有 SSH 密钥，Github 提供[了一个很好的指南，指导您创建密钥对](https://help.github.com/articles/generating-ssh-keys)并授权您的公钥。

将公钥添加到 Github 后，您需要更改遥控器以使用 SSH URL：

```
https://github.com/simkimsia/learnhubflow -> git@github.com:simkimsia/learnhubflow.git 
```

假设这是您的`origin`，您可以使用以下命令进行更改：

```
git remote set-url origin git@github.com:simkimsia/learnhubflow.git 
```

现在，您将使用您的密钥对进行身份验证，而无需输入您的密码。如果您愿意，您可以为您的密钥对设置一个密码，这样走到您未锁定计算机的人就无法像您一样推送更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T23:16:30.700

或者，如果难以为多个帐户维护 SSH 密钥，您可以将密码缓存 15 分钟。

$ git config credential.helper 缓存

使用此配置一次，您只需输入一次密码，它将在接下来的 15 分钟内缓存。

# vb.net - 运行 Visual Studio 2010 vb 项目的所有要求是什么

> ID：14497525
> 
> 赞同：0
> 
> 时间：2013-01-24T09:09:24.600
> 
> 标签：vb.net, deployment, vb.net-2010

我在 Visual Studio 2010 中开发了该项目。其他 PC 不支持该 exe 文件。要安装哪个dotnetframework？除了 dotnetframework 还需要其他要求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:35:05.117

您确定它不是您在编译期间指定的 CPU 类型（x86 与 x64 CPU）。如果您以 64 位编译并且用户只有 32 位处理器 (x86)，则您的代码将无法运行。

.Net Framework 应该可以在任何基于 PC 的系统上运行，但请确保将其包含在您的部署或安装包中。（您可以在您的包中提供 Excel、.NET Framework 和许多其他包。）

您还应该尝试找出您的用户收到的错误消息——这将为您指明正确的方向。

# vb.net - 正确关闭和打开串口

> ID：14497529
> 
> 赞同：0
> 
> 时间：2013-01-24T09:09:42.480
> 
> 标签：vb.net, serial-port, port

我正在使用串行端口连接到秤并在地磅 Windows 应用程序中获取秤读数。现在我的编码方式是，当我单击按钮打开并开始接收读数时，它开始很好地输出读数，我使用这个代码

```
Private Sub cmdOpen_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdOpen.Click
    comm.Parity = cboParity.Text
    comm.StopBits = cboStop.Text
    comm.DataBits = cboData.Text
    comm.BaudRate = cboBaud.Text
    comm.DisplayWindow = rtbDisplay
    comm.OpenPort()

    cmdOpen.Enabled = True
    cmdClose.Enabled = True
    cmdSend.Enabled = True

End Sub
Public Function OpenPort() As Boolean
    Try
        'first check if the port is already open
        'if its open then close it
        If comPort.IsOpen = True Then
            comPort.Close()
        End If

        'set the properties of our SerialPort Object
        comPort.BaudRate = Integer.Parse(_baudRate)
        'BaudRate
        comPort.DataBits = Integer.Parse(_dataBits)
        'DataBits
        comPort.StopBits = DirectCast([Enum].Parse(GetType(StopBits), _stopBits), StopBits)
        'StopBits
        comPort.Parity = DirectCast([Enum].Parse(GetType(Parity), _parity), Parity)
        'Parity
        comPort.PortName = _portName
        'PortName
        'now open the port
        comPort.Open()
        'display message
        _type = MessageType.Normal
        _msg = "Port opened at " + DateTime.Now + "" + Environment.NewLine + ""
        '_msg = Environment.NewLine
        DisplayData(_type, _msg)
        'return true
        Return True
    Catch ex As Exception
        DisplayData(MessageType.[Error], ex.Message)
        Return False
    End Try
End Function
Public Sub ClosePort()
    If comPort.IsOpen Then
        _msg = "Port closed at " + DateTime.Now + "" + Environment.NewLine + ""
        _type = MessageType.Normal
        DisplayData(_type, _msg)
        comPort.Close()
    End If
End Sub
  Private Sub comPort_DataReceived(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs)
    'determine the mode the user selected (binary/string)
    Select Case CurrentTransmissionType
        Case TransmissionType.Text
            'user chose string
            'read data waiting in the buffer
            Dim msg As String = comPort.ReadExisting()
            'display the data to the user
            _type = MessageType.Incoming
            _msg = msg
            DisplayData(MessageType.Incoming, msg + "" + Environment.NewLine + "")
            Exit Select
        Case TransmissionType.Hex
            'user chose binary
            'retrieve number of bytes in the buffer
            Dim bytes As Integer = comPort.BytesToRead
            'create a byte array to hold the awaiting data
            Dim comBuffer As Byte() = New Byte(bytes - 1) {}
            'read the data and store it
            comPort.Read(comBuffer, 0, bytes)
            'display the data to the user
            _type = MessageType.Incoming
            _msg = ByteToHex(comBuffer) + "" + Environment.NewLine + ""
            DisplayData(MessageType.Incoming, ByteToHex(comBuffer) + "" + Environment.NewLine + "")
            Exit Select
        Case Else
            'read data waiting in the buffer
            Dim str As String = comPort.ReadExisting()
            'display the data to the user
            _type = MessageType.Incoming
            _msg = str + "" + Environment.NewLine + ""
            DisplayData(MessageType.Incoming, str + "" + Environment.NewLine + "")
            Exit Select
    End Select
End Sub
Private Sub MonitorSP_DataReceived(ByVal sender As Object, ByVal e As IO.Ports.SerialDataReceivedEventArgs)
    Dim SP As IO.Ports.SerialPort = DirectCast(sender, IO.Ports.SerialPort)
    Dim Data As String = SP.ReadLine
    'Remember this is in a background thread so you can not update the UI from here without using Me.Invoke
End Sub

Private Sub CloseSP()
    For Each selSP As IO.Ports.SerialPort In MonitorSP
        selSP.Close()
    Next
    MonitorSP.Clear()
End Sub
 Private Sub cmdClose_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdClose.Click
    'Comm is an instance of the class that contains the methods I showed above like Datareceived and so forth
    comm.ClosePort()
    comm.ClosePort()
    'SetControlState()
    SetDefaults()
End Sub 
```

现在，当我尝试关闭并重新打开端口时，挑战出现了，当我关闭端口并等待几分钟，然后再次尝试重新打开端口时它不起作用（读数未显示在秤上）。但是当我关闭端口退出表格然后回到表格然后打开端口然后读数出现。我的问题是如何打开和关闭端口并再次打开它而无需关闭表单或重新启动应用程序。

# c# - 检查某些十进制值是否相等

> ID：14497537
> 
> 赞同：1
> 
> 时间：2013-01-24T09:09:58.363
> 
> 标签：c#

我正在使用以下代码行来检查小数是否相等，但它显示语法错误。

```
if (ProgramVariables.MSR_AR_System == ProgramVariables.MSR_AR_EB_1 == ProgramVariables.MSR_AR_EB_2 == ProgramVariables.MSR_AR_EB_3) 
```

什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:12:44.033

你不能这样做`A == B == C == D`。您必须使用`&&`(AND) 运算符，如下所示：

```
if (a == b && b == c && c == d && d == e)
{
    // Do something
} 
```

这意味着`if a equals b AND b equals c AND c equals d AND d equals e then`。

为什么会这样？因为[相等运算符](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)接受两个相同类型的参数。`a == b`结果为布尔值（`true`或`false`），您将此结果与`c`仍为类型的下一个值进行比较，`decimal`并且您无法将 a`boolean`与 a进行比较，`decimal`因为它们的类型不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:12:05.580

它应该是：

```
if (ProgramVariables.MSR_AR_System == ProgramVariables.MSR_AR_EB_1 
 && ProgramVariables.MSR_AR_EB_1 == ProgramVariables.MSR_AR_EB_2 
 && ProgramVariables.MSR_AR_EB_2 == ProgramVariables.MSR_AR_EB_3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:16:04.260

运算符是二元运算符，`==`从左到右计算。这意味着，它首先评估

```
ProgramVariables.MSR_AR_System == ProgramVariables.MSR_AR_EB_1 
```

它给出一个布尔值，然后将该布尔值与

```
(true or false) == ProgramVariables.MSR_AR_EB_2 
```

它再次给出一个布尔值，然后将第二个布尔值与

```
(true or false) == ProgramVariables.MSR_AR_EB_3 
```

你得到一个错误，因为你比较了不兼容类型的值。

比较多个值的正确方法是通过逻辑`&&`（和）运算符组合它们，例如

```
if (ProgramVariables.MSR_AR_System == ProgramVariables.MSR_AR_EB_1 
    && ProgramVariables.MSR_AR_System == ProgramVariables.MSR_AR_EB_2 
    && ProgramVariables.MSR_AR_System == ProgramVariables.MSR_AR_EB_3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:16:52.423

试试这个

```
if (ProgramVariables.MSR_AR_System.Equals(ProgramVariables.MSR_AR_EB_1).Equals(ProgramVariables.MSR_AR_EB_2.Equals(ProgramVariables.MSR_AR_EB_3))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:21:01.560

比较运算符返回布尔值，即 True 或 False。因此，第一个比较返回布尔值，并且您正在与十进制进行比较。因此错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T09:34:36.433

你可以这样写方法：

```
public static bool AllEqual<T>(params T[] values)
    where T : struct
{
    if (values.Length < 2) 
        return true;

    T first = values[0];
    for (int i = 1; i < values.Length; i++)
    {
        if (!values[i].Equals(first))
            return false;
    }

    return true;
} 
```

并使用它来比较所有值：

```
if (AllEqual(ProgramVariables.MSR_AR_System,
             ProgramVariables.MSR_AR_EB_1,
             ProgramVariables.MSR_AR_EB_2,
             ProgramVariables.MSR_AR_EB_3)) 
```

# c++ - 在 VC++ 中调用 C++ dll

> ID：14497538
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:00.437
> 
> 标签：c++

我正在使用 SAGEM MORPHO DLL 在 VC++ 上编写应用程序。
我指的 DLL 是 MORPHO_SDK.dll
暴露的函数是 I

```
C_MORPHO_User::Enroll  ( US  i_us_Timeout,UC  i_uc_FingerNumber, T_MORPHO_TYPE_TEMPLATE  i_x_TemplateType,  
  UL  i_ul_CallbackCmd,  
  T_MORPHO_CALLBACK_FUNCTION  i_pf_Callback,  
  PVOID  i_pv_CallbackArgument,  
  I  i_i_CoderChoice,  
  UL  i_ul_DetectModeChoice   
 ) 
```

我打电话的方式是

```
 int res;  
    C_MORPHO_User u,nw,idf;  

extern "C
" __declspec(dllimport) int Enroll  ( US  i_us_Timeout,UC  i_uc_FingerNumber, 
    T_MORPHO_TYPE_TEMPLATE  i_x_TemplateType,  
  UL  i_ul_CallbackCmd,  
  T_MORPHO_CALLBACK_FUNCTION  i_pf_Callback,  
  PVOID  i_pv_CallbackArgument,  
  I  i_i_CoderChoice,  
  UL  i_ul_DetectModeChoice   
 ) ;  
main()
{
int x=u.Enroll(0x15,1,MORPHO_PK_ISO_FMR ,0,NULL,NULL,MORPHO_MSO_V9_CODER ,MORPHO_ENROLL_DETECT_MODE);  
    printf("%d\n",x);  
} 
```

编译时出现这些错误

> 1.语法错误：缺少';' 在标识符 'u'
> 2.C_MORPHO_User 之前：缺少存储类或类型说明符。

这是调用DLL的正确方法吗？请帮助解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:24:21.030

我包含了所有必要的头文件，它已经解决了这个问题。

# java - 尝试用 Java 播放音乐：java.lang.IllegalArgumentException：格式无效

> ID：14497540
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:18.890
> 
> 标签：java, playback

这是我第一次尝试在我的代码中使用一首歌。我一直在关注一个解释如何播放歌曲的网页（http://www3.ntu.edu.sg/home/ehchua/programming/java/J8c_PlayingSound.html），但我遇到了错误 ava.lang.IllegalArgumentException：无效的格式。我不明白为什么会发生这种情况以及我可以做些什么来播放歌曲。

这是不起作用的代码：

```
 private void startMusic() throws UnsupportedAudioFileException, IOException, LineUnavailableException {
        // from a wave File
        File soundFile = new File("/home/simone/OhHa/Pakman02/src/main/java/Pakman/ArsenioLupin.wav");
        AudioInputStream audioIn = AudioSystem.getAudioInputStream(soundFile);
        Clip clip = AudioSystem.getClip();
        clip.open(audioIn);
// For small-size file only. Do not use this to open a large file over slow network, as it blocks.
        // start()
        clip.start();  // play once
// Loop()
//        clip.loop(0);  // repeat none (play once), can be used in place of start().
//        clip.loop(5);  // repeat 5 times (play 6 times)
        clip.loop(Clip.LOOP_CONTINUOUSLY);  // repeat forever
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:19:14.987

尝试这个。注意 javax.sound.sampled.* 的导入

```
 import java.io.*;
import java.net.URL;
import javax.sound.sampled.*;
import javax.swing.*;

public class SoundClipTest extends JFrame {

// Constructor
public SoundClipTest() {
  this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  this.setTitle("Test Sound Clip");
  this.setSize(300, 200);
  this.setVisible(true);

  try {
     // Open an audio input stream.
     URL url = this.getClass().getClassLoader().getResource("/home/simone/OhHa/Pakman02/src/main/java/Pakman/ArsenioLupin.wav");
     AudioInputStream audioIn = AudioSystem.getAudioInputStream(url);
     // Get a sound clip resource.
     Clip clip = AudioSystem.getClip();
     // Open audio clip and load samples from the audio input stream.
     clip.open(audioIn);
     clip.start();
  } catch (UnsupportedAudioFileException e) {
     e.printStackTrace();
  } catch (IOException e) {
     e.printStackTrace();
  } catch (LineUnavailableException e) {
     e.printStackTrace();
  }
}

public static void main(String[] args) {
   new SoundClipTest();
}
} 
```

另一种选择是

```
import javax.swing.*;
import sun.audio.*;
import java.awt.event.*;
import java.io.*;
public class Sound {
public static void main(String[] args)
{
JFrame frame = new JFrame();
frame.setSize(200,200);
JButton button = new JButton("Click me");
frame.add(button);
button.addActionListener(new AL());
frame.show(true);
}
public static class AL implements ActionListener{
public final void actionPerformed(ActionEvent e){
music();
}
}
public static void music(){
AudioPlayer MGP = AudioPlayer.player;
AudioStream BGM;
AudioData MD;
ContinuousAudioDataStream loop = null;
try{
BGM = new AudioStream(new FileInputStream("C:\home\simone\OhHa\Pakman02\src\main\java\Pakman\ArsenioLupin.wav"));
MD = BGM.getData();
loop = new ContinuousAudioDataStream(MD);
}catch(IOException error){
System.out.print("file not found");
}
MGP.start(loop);
}
} 
```

# jquery - 当多个实例具有相同的类时，只向下滑动一个实例

> ID：14497543
> 
> 赞同：2
> 
> 时间：2013-01-24T09:10:26.340
> 
> 标签：jquery

我需要有许多具有相同类的元素，并且它们中的内容在点击时会显示出来，但是现在因为它们都有相同的类，所以它们都同时打开。

我怎样才能让它只打开点击的那个而不打开其他的？

我的 HTML：

```
<div class="product">
    <p><a href="#">click</a></p>

    <div class="product_inner">
    <p>show me</p>
    </div>

</div>
    <div class="product">
    <p><a href="#">click</a></p>

    <div class="product_inner">
    <p>show me</p>
    </div>

</div>
    <div class="product">
    <p><a href="#">click</a></p>

    <div class="product_inner">
    <p>show me</p>
    </div>

</div> 
```

查询：

```
$(document).ready(function() {
$('.product p a').click(function() {
$('.product_inner').slideToggle(300);
}); // end click

}); // end ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:13:40.897

当你做一个选择器时，你会在你的文档中找到所有元素你想要的是找到你真正想要使用的元素：

```
$(document).ready(function() {
    $('.product p a').click(function() {
        $(this) // the current a-element that was clicked
            .parent() // p
                .next() // find the next element from <p> (.product_inner) 
                    .stop() // stop animation
                    .slideToggle(300); // Slide toggle
    }); // end click

}); // end ready 
```

或另一种方法：

```
$(document).ready(function() {
    $('.product p a').click(function() {
        $(this) // the current a-element that was clicked
            .closest('.product') // .product
                .find('.product_inner') // find .product_inner inside .product
                    .stop() // stop animation
                    .slideToggle(300); // Slide toggle
    }); // end click

}); // end ready 
```

如果你有另一个 html 标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:25:32.370

试试这个

**JS代码**

```
$(document).ready(function() {
   $('.product p a').click(function() {
      $(this).parent('p').siblings('.product_inner').slideToggle(300);
    }); // end click

}); 
```

**[现场演示](http://jsfiddle.net/ZCTgY/1/)**

# directx - 如何在 Windows 7 上禁用 Direct3D 加速？

> ID：14497545
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:28.657
> 
> 标签：directx, direct3d, hardware-acceleration

我尝试在操作系统为 Windows 7 的机器上禁用 3D 加速。我打开了 DirectX 诊断工具，但无法更改 DirectX 功能：

![在此处输入图像描述](../Images/9738a7e955a4cc7365dc82bf7ce6b463.png)

此外，我还尝试更改疑难解答设置。但是，它也无法更改：

![在此处输入图像描述](../Images/a27014c4405b24338f2e3e0a366087fa.png)

如何禁用 directX 功能？

注意：我的 directX 版本是 11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-26T14:27:04.743

1.  禁用 Aero（大多数情况下没有必要，但现在就这样做）禁用 Aero

2.  从这里下载 directx 9.0c 控制面板 [http://www.majorgeeks.com/files/details/microsoft_directx_control_panel.html](http://www.majorgeeks.com/files/details/microsoft_directx_control_panel.html)

3.  提取并以管理员身份运行“directx.cpl”。

4.  转到 Direct3D 和 DirectDraw 选项卡并取消选中“允许硬件加速”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T02:31:32.920

如果您的意思是针对您自己的应用程序，您可以通过`D3D_DRIVER_TYPE_WARP`在创建 Direct3D 设备 ( ) 时选择 WARP 驱动程序类型 ( ) 来禁用 GPU 硬件加速`D3D11CreateDevice`。

如果您指的是现有应用程序，您可以使用 DirectX 控制面板 ( `dxcpl.exe`) 执行相同操作并选择“强制 WARP”。

# ruby-on-rails - ActiveRecord: difference between collection << object and association = (associate)

> ID：14497548
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:34.477
> 
> 标签：ruby-on-rails, associations, has-many, belongs-to, rails-activerecord

Let us take an example:

```
class Subscription < ActiveRecord::Base
 belongs_to :user
end

class User < ActiveRecord::Base
 has_many :subscriptions
end

u1 =User.new
s1 = Subscription.new 
```

According to me, the following two lines should be equivalent:

```
u1.subscriptions << s1, and 
s1.user = u1 
```

However, it seems that it is not the case. After executing the first line, u1.subscriptions_ids returns [1] but after executing the second line, u1.subscriptions_ids returns [].

What could be the reason for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:28:31.053

```
u1.subscriptions << s1
[s1]

u1.subscriptions << s2
[s1,s2] 
```

.. ..等等 向数组中添加元素，类似于 push 方法

而`s1.user = u1`始终为用户对象赋值

```
s1.user = u2 
```

它给了 u2

# android - Binary transfer using bluetooth android--(OBEX)

> ID：14497549
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:10:35.240
> 
> 标签：android, bluetooth, binary-data, obex

I need to transfer binary data through bluetooth in android. Should I use OBEX for it or is there any other way of doing it.

Please suggest me a tutorial/link for the same.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:30:45.383

您应该使用蓝牙 SPP 配置文件，Android 在这里有很好的文档和示例代码。[设置蓝牙](http://developer.android.com/guide/topics/connectivity/bluetooth.html#SettingUp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T23:11:26.830

蓝牙文件传输的标准方法采用 OBEX over RFCOMM，提供 FTP 服务/配置文件。OBEX 是来自 IrDA 协会的二进制/对象交换协议，实现起来相当容易，但非常具有可扩展性和通用性。此外，如果您不想通过规范从头开始编写代码，则可以在 Internet 上使用多个库。无论您想要针对成熟的 FTP 还是更简单的 OPP，您都需要 OBEX 作为底层。

# android - Activity within the tabs in android

> ID：14497550
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:35.737
> 
> 标签：android, android-intent, android-activity, tabs

this is my login view [http://i.imgur.com/IfLIHFQ.jpg](http://i.imgur.com/IfLIHFQ.jpg) , a successful login will redirect to this page [http://i.imgur.com/4yv3KDv.jpg](http://i.imgur.com/4yv3KDv.jpg) but, instead of launch a new intent, I want the activity is proceed within the tab. This is how I describe it [http://i.imgur.com/sH8HQC7.jpg](http://i.imgur.com/sH8HQC7.jpg) (Note: The last pic is just an edited photoshop in order to give you a sample of what I want it to be). Sorry for asking newbie question, I appreciate your help thanks before.

This is my code : Tab1.java

```
public class Tab1 extends Activity {
    String var_usr,var_pass;
    EditText usr, psw;
    JSONArray str_login = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.panel_login);

        usr = (EditText) findViewById(R.id.txt_username);
        psw = (EditText) findViewById(R.id.txt_pass);

        Button submit = (Button) findViewById(R.id.btn_login);
        submit.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                var_usr = usr.getText().toString();
                var_pass = psw.getText().toString();
                String stts = "";
                String kode = "";
                String link_url = "http://10.0.2.2/gollege/login.php?usr="+var_usr+"&psw="+var_pass;
                com.bucheuw.gollege.portal.JSONParser jParser = new com.bucheuw.gollege.portal.JSONParser();
                JSONObject json = jParser.AmbilJson(link_url);

                try {
                    str_login = json.getJSONArray("statuslogin");

                    for(int i = 0; i < str_login.length(); i++){
                        JSONObject ar = str_login.getJSONObject(i);
                        TextView st = (TextView) findViewById(R.id.txt_alert);
                        String alrt = ar.getString("hasil");
                        stts = ar.getString("st");
                        kode = ar.getString("id");
                        st.setText(alrt);
                        usr.setText("");
                        psw.setText("");

                        if(stts.trim().equals("ok"))
                        {
                            Intent ni = null;                           
                            ni = new Intent(Tab1.this, com.bucheuw.gollege.portal.DashboardActivity.class);
                            Bundle b = new Bundle();
                            b.putString("par_kode", kode);
                            ni.putExtras(b);
                            startActivity(ni);
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
    } 
```

DashboardAcitvity.java

```
public class DashboardActivity extends Activity {

    public String nim;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.panel_dashboard);

        Bundle b = getIntent().getExtras();
        nim = b.getString("par_kode");

        Button btn_datapribadi = (Button) findViewById(R.id.btn_datapribadi);
        Button btn_ksm = (Button) findViewById(R.id.btn_ksm);
        Button btn_jdwlkuliah = (Button) findViewById(R.id.btn_jdwlkuliah);
        Button btn_absensi = (Button) findViewById(R.id.btn_absensi);
        Button btn_nilai = (Button) findViewById(R.id.btn_nilai);
        Button btn_tak = (Button) findViewById(R.id.btn_tak);
        Button btn_ips = (Button) findViewById(R.id.btn_ips);
        Button btn_jdwlujian = (Button) findViewById(R.id.btn_jdwlujian);
        Button btn_pengumuman = (Button) findViewById(R.id.btn_pengumuman);
        Button btn_klndr = (Button) findViewById(R.id.btn_klndr);
        Button btn_logout = (Button) findViewById(R.id.btn_logout);

        btn_datapribadi.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), DataPribadiActivity.class);
                startActivity(i);
            }
        });

        btn_ksm.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), KSMActivity.class);
                startActivity(i);
            }
        });

        btn_jdwlkuliah.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), JadwalKuliahActivity.class);
                startActivity(i);
            }
        });

        btn_absensi.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), AbsensiActivity.class);
                startActivity(i);
            }
        });

        btn_nilai.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), NilaiActivity.class);
                startActivity(i);
            }
        });

        btn_tak.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), TAKActivity.class);
                startActivity(i);
            }
        });

       btn_ips.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), IPSActivity.class);
                startActivity(i);
            }
        });

        btn_jdwlujian.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), JadwalUjianActivity.class);
                startActivity(i);
            }
        });

        btn_pengumuman.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), InfoKampusActivity.class);
                startActivity(i);
            }
        });

        btn_klndr.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {                        
                Intent i = new Intent(getApplicationContext(), KalenderAkademikActivity.class);
                startActivity(i);
            }
        });

        btn_logout.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {    
                    Intent exit = new Intent(Intent.ACTION_MAIN);
                    exit.addCategory(Intent.CATEGORY_HOME); exit.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    DashboardActivity.this.finish();

            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:17:44.897

在创建 tabhost 的父活动类中，我实现了如下方法：

```
public void switchTab(int tab){
            tabHost.setCurrentTab(tab);
} 
```

在我希望能够在内部切换到另一个选项卡的选项卡内部，我创建了以下方法：

```
public void switchTabInActivity(int indexTabToSwitchTo){
            MintTrack ParentActivity;
            ParentActivity = (MintTrack) this.getParent();
            ParentActivity.switchTab(indexTabToSwitchTo);
} 
```

如果您想要此代码的一个很好的示例，您可以在[此处](http://code.google.com/p/minttrack/source/browse/branches/MintTrackV2/MintTrack/src/com/ponyinc/minttrack/MintTrack.java)和[此处](http://code.google.com/p/minttrack/source/browse/branches/MintTrackV2/MintTrack/src/com/ponyinc/minttrack/tabs/AuditActivity.java)查看我的 MintTrack 项目。

附带说明一下，在决定是使用基于视图还是基于活动的 TabHost 时，请务必小心。

基于活动的选项卡很棒，因为它们可以分离到自己的 XML 文件中。活动也可以组织到自己的 Java 文件中，而不是混乱成一个。话虽这么说，一些你认为很容易的事情会因为基于活动的选项卡而变得复杂。很难在选项卡之间传递信息而不产生开销。基于活动的选项卡也使用更多的内存/CPU 时间，因为它们有围绕它们的活动的开销。在深入使用基于 Activity 的 TabHost 之前，请考虑这一点以及更多的权衡。我现在知道，如果我再次使用它们，我会亲自使用基于视图的 TabHost。

# android - Changing the GPS coordinates with out moving anywhere

> ID：14497551
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:37.727
> 
> 标签：android

> ****i have used the gps coordinates for calculating the distance using location updates. but problem is that if i am standing at same place the coordinates changes and distance is changing with out moving anywhere. I want to change it only when I have moved min 10 mtrs.

```
## Activity ##

//Activity

public TextView dist;
public double lati1,lati2,longi1,longi2;
private boolean run1 = false; 
private Handler handler1 = new Handler();
private Runnable task1 = new Runnable() {

     public void run() {  
     // TODO Auto-generated method stub  
        if (run1) {  
            handler1.postDelayed(this,1000);  
            if(lati1==0.0&&longi1==0.0)
            {
                    lati1=Service1.lat1;
                        longi1=Service1.lon1;
            }

                        lati2=Service1.lat1;
                        longi2=Service1.lon1;

              double R=63710;
              double dLat=Math.toRadians(lati2-lati1);
              double dLon=Math.toRadians(longi2-longi1);

                       double a=Math.sin(dLat/2)*Math.sin(dLat/2)+
                       Math.cos(Math.toRadians(lati1))*Math.cos(Math.toRadians(lati2))*
             Math.sin(dLon/2)*Math.sin(dLon/2);

             double c=2*Math.asin(Math.sqrt(a));
             double d=R*c;
             d=(double)(Math.round(d*100.00))/1000.00;
             distance+=d;
             String s=String.format("%.2f", distance);
             dist.setText(s); 

             lati1 = lati2;
             longi1 = longi2;

                    } 

            }  
        };
  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

        dist=(TextView)findViewById(R.id.distancetextView);
          Intent i =  new Intent(context, Service1.class);

        startService(i);

}

## Service ##

//Service

private double new_latitude = 0.0;
private double new_longitude = 0.0;

public static double lat1=0.0,lon1=0.0;

LocationManager locationManager = null;

@Override
public IBinder onBind(Intent intent) {
// TODO Auto-generated method stub
return null;
}

@Override
public void onCreate() {
// TODO Auto-generated method stub

locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0L, 0.0f, this);
super.onCreate();
}

@Override
public void onStart(Intent intent, int startId) {
// TODO Auto-generated method stub
super.onStart(intent, startId);
}
@Override
public void onDestroy() {
// TODO Auto-generated method stub
locationManager.removeUpdates(this);
super.onDestroy();
}

public void onLocationChanged(Location location) {
// TODO Auto-generated method stub

new_latitude=location.getLatitude();
new_longitude=location.getLongitude();

lat1=new_latitude;
lon1=new_longitude;
}

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub

}

public void onProviderEnabled(String arg0) {
// TODO Auto-generated method stub

}

public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
// TODO Auto-generated method stub

}**** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:14:02.547

我应该看到你正在编写的代码。但如果没有它，我可以说有一个你调用的函数，它每 X 毫秒为你提供一次位置更新。或者您可以获得最新更新的位置，我应该再次看到您的代码。

更新：

更改此行

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0L, 0.0f, this); 
```

至

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0L, 10.0f, this); 
```

移动 10m 后您将收到更新。

第二个参数是以毫秒为单位的时间，第三个是最小距离。但这并不意味着您将在请求的时间或请求的距离准确地获得更新，而是关于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:11:42.470

//在类上初始化的先前速度的公共或类变量。// 浮动上一个速度；

```
public void onLocationChanged(Location location) {
   // TODO Auto-generated method stub

   new_latitude=location.getLatitude();
   new_longitude=location.getLongitude();

   float speed = location.getSpeed();
   //You could also use location.hasSpeed(), which is a boolean, but it almost 
   //always returns True

   if(speed > DESIRED_LIMIT && previousSpeed > DESIRED_LIMIT){

      lat1=new_latitude;
      lon1=new_longitude;

   }

   previousSpeed = speed;
} 
```

所以类似的东西。这种情况没有得到很好的优化或设计。但这就是您从位置对象获取 GPS 速度的方式。您可以调整速度限制或整个条件以获得最佳结果。或者添加更多的速度历史来监控。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T09:14:23.360

您可以使用来自 android 市场的位置欺骗应用程序，并指定欺骗位置的持续时间以及距离

# drupal - 将 image_field 附加到 drupal 7 中的实体

> ID：14497552
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:41.057
> 
> 标签：drupal, drupal-fields, imagefield, drupal-entities

我使用 drupal 7 和 Entity API 来开发一个模块。我有一个实体来记录客户信息。我希望使用 image_field 让客户上传他们的标志。所以我有这个功能：

```
 function silver_client_enable()
{
  field_cache_clear();
  field_associate_fields("silver_client");

  if(field_info_field('logo'))
    return;

  $field = array(
    'field_name' => 'logo',
    'cadinality' => 1,
    'type' => 'image',
    );

    field_create_field($field);

  $instance = array(
    'field_name' => 'logo',
    'entity_type' => 'silver_client',
    'bundle' => 'silver_client',
    'label' => 'Logo',
    'description' => 'Logo',
    'display' => array(
      'default' => array('label' => 'hidden')
    ),
    'settings' => array(
      'file_directory' => '/logo',
    ),
    'widget' => array(
      'type' => 'image_image',
     ),
  );

  field_create_instance($instance);
} 
```

在实体创建/编辑表单中，我使用：

```
field_attach_form('silver_client', $client, $form, $form_state); 
```

附加领域。

当我调用此表单时，图像上传字段已更正显示。我可以使用它来上传文件以提供服务。

在表单提交功能中，我将实体保存为：

```
entity_save('silver_client', $client); 
```

但是，在我按下保存按钮后，实体表已正确保存。字段表不是。field_data_logo 和 field_revision_logo 都是空的。

我相信 Entity API 负责检索和保存附加字段。有人可以告诉我我的代码有什么问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:16:57.803

您必须将值写回到您的实体中：

```
field_attach_submit('silver_client', $client, $form, $form_state);
entity_save('silver_client', $client); 
```

[http://api.drupal.org/api/drupal/modules!field!field.attach.inc/function/field_attach_submit/7](http://api.drupal.org/api/drupal/modules!field!field.attach.inc/function/field_attach_submit/7)

您应该验证字段值：

```
field_attach_validate('silver_client', $client, $form, $form_state); 
```

[http://api.drupal.org/api/drupal/modules!field!field.attach.inc/function/field_attach_validate/7](http://api.drupal.org/api/drupal/modules!field!field.attach.inc/function/field_attach_validate/7)

此外，如果您不想自己声明实体和字段，您可以查看：http `EntityConstructionKit`: [//drupal.org/project/eck](http://drupal.org/project/eck)，它允许导出实体结构，`Features`就像`Views`.

# android - Circle Meter Type UI in android?

> ID：14497553
> 
> 赞同：5
> 
> 时间：2013-01-24T09:10:42.537
> 
> 标签：android, android-layout, android-ui

![enter image description here](../Images/da4032a010e1dde992971514f17843fb.png)

As here One static Image is shown inside back. But How could we implement that coloring rounded portion with one end is Starting RED and Ended with Green and after some Time duration.Please Let me know how to implement it.

![enter image description here](../Images/825cccf169bf392e8c41c55f374be92a.png)![enter image description here](../Images/55875bd0a52cd5f4e01eb460ce2f62ff.png)

Glad even u can help a bit. Thank You in Advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:22:54.770

您可以查看以下链接：-

[http://atstechlab.wordpress.com/2010/07/30/gauge-and-dial-widget-for-android/](http://atstechlab.wordpress.com/2010/07/30/gauge-and-dial-widget-for-android/)

[http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

[https://github.com/CodeAndMagic/GaugeView](https://github.com/CodeAndMagic/GaugeView)

这些会让你开始！

# checkstyle - 是否有用于将单词列入黑名单的 checkstyle 插件

> ID：14497556
> 
> 赞同：0
> 
> 时间：2013-01-24T09:10:54.177
> 
> 标签：checkstyle

是否有人知道可以配置一组单词的 checkstyle 插件，并将这些单词的所有出现标记为警告（在标识符或字符串值中）？

我们正在进行的项目要求所有代码都是英文的。但是大多数人不是母语人士，他们有时会不小心在代码中包含非英语单词。我们希望至少检测其中一些错误并发出信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:34:43.303

试试这条规则，它检查“Cheers！”的几个非英语变体，忽略大小写：

```
<module name="Regexp">
    <property name="format" value="(?i)(na zdrowie|kippis|a votre sante|prost)"/>
    <property name="message" value="Use only English language"/>
    <property name="illegalPattern" value="true"/>
</module> 
```

# linqpad - Other keywords are not allowed when the 'Name' keyword is specified

> ID：14497570
> 
> 赞同：0
> 
> 时间：2013-01-24T09:11:53.790
> 
> 标签：linqpad

I get the error in the title when I try to run a query in Linqpad, v4.43.06

Why is that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:15:42.857

嗯，没关系，这与我连接到的 DLL 中的 EF 上下文定义有关。

# php - How to hide a specific file in Code igniter / PHP?

> ID：14497571
> 
> 赞同：0
> 
> 时间：2013-01-24T09:12:00.290
> 
> 标签：php, apache, .htaccess, codeigniter

I have a web project and i have created an external photo library for my project.The photo library is outside the web root directory e.g My Codeigniter project is in C:\wamp\www\myprject\application\ but my photo library is under C:\wamp\www\myprject\Lib\

My .htaccess file (under my application folder ) successfully displays the library using the commands below:

**.htaccess** file

```
RewriteEngine on  
RewriteCond $1 !^(index\.php|images|Lib|css|js|robots\.txt)
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

But the problem is this .htaccess file is also displaying my error_log file along with all the images in the library directory. What changes i will need to make in this .htacess file to hide it?I just want to display (.jpg,gif,.bmp,.jpeg) files.Please help.Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:52:29.970

使用“FilesMatch”标签解决问题。

在 RewriteCond 和 RewriteRule 之后添加：

```
<FilesMatch "Lib\.(htaccess|htpasswd|ini|log|error_log|error|sh|inc|bak)$">
Order Allow,Deny
Deny from all
</FilesMatch> 
```

注意：请在管道 ' | 之间添加错误日志文件的扩展名。'符号。另外请删除您不想要的扩展名。

更多信息： [如何使用 apache .htaccess 隐藏某些文件类型？](https://stackoverflow.com/questions/2860019/how-to-hide-certain-file-type-using-apache-htaccess)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:20:37.550

我不是 .htaccess 大师，但您应该能够将其更改为：

```
## NOT TESTED ##
RewriteEngine on  
RewriteCond $1 !^(index\.php|images|Lib\/*\.jpg|Lib\/*\.gif|Lib\/*\.bmp|Lib\/*\.jpeg|css|js|robots\.txt)
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

`Lib\/*\.jpg`是`Lib`目录下任何 jpg 文件的正则表达式

# hadoop - 使用自定义 RecordReader 在 Hadoop 中读取 gzip 文件

> ID：14497572
> 
> 赞同：4
> 
> 时间：2013-01-24T09:12:01.183
> 
> 标签：hadoop, mapreduce

我正在编写一个 MapReduce 代码，其中我必须读取文件名作为键，文件内容作为它的值。为此，我[在 StackOverflow 上发布了这个问题](https://stackoverflow.com/questions/14212453/getting-filename-filedata-as-key-value-input-for-map-when-running-a-hadoop-mapre/14215357)。它适用于文本文件，但开始出现 gzip 文件的问题。因此，参考[LineRecordReader](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-737/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java#LineRecordReader)类，我对代码进行了一些修改。代码片段是：

```
public class WholeFileRecordReader extends RecordReader<Text, BytesWritable> {

    private CompressionCodecFactory compressionCodecs = null;
    private FileSplit fileSplit;
    private Configuration conf;
    private InputStream in;
    private Text key = new Text("");
    private BytesWritable value = new BytesWritable();
    private boolean processed = false;

    @Override
    public void initialize(InputSplit split, TaskAttemptContext context)
            throws IOException, InterruptedException {

        this.fileSplit = (FileSplit) split;
        this.conf = context.getConfiguration();

        final Path file = fileSplit.getPath();
        compressionCodecs = new CompressionCodecFactory(conf);

        final CompressionCodec codec = compressionCodecs.getCodec(file);
        System.out.println(codec);
        FileSystem fs = file.getFileSystem(conf);
        in = fs.open(file);

        if (codec != null) {
            in = codec.createInputStream(in);
        }
    }

    @Override
    public boolean nextKeyValue() throws IOException, InterruptedException {
        if (!processed) {
            byte[] contents = new byte[(int) fileSplit.getLength()];
            Path file = fileSplit.getPath();
            key.set(file.getName());

            try {
                IOUtils.readFully(in, contents, 0, contents.length);
                value.set(contents, 0, contents.length);
            } finally {
                IOUtils.closeStream(in);
            }

            processed = true;
            return true;
        }

        return false;
    }

    @Override
    public Text getCurrentKey() throws IOException, InterruptedException {
        return key;
    }

    @Override
    public BytesWritable getCurrentValue() throws IOException, InterruptedException {
        return value;
    }

    @Override
    public float getProgress() throws IOException {
        return processed ? 1.0f : 0.0f;
    }

    @Override
    public void close() throws IOException {
        // Do nothing
    }

} 
```

问题是我正在获取`codec`object的值，就`null`好像该文件是**gz**文件一样。需要注意的一件事是，出于我自己的目的，我在最后附加了带有日期的文件。但我觉得这应该不是问题，因为我听说 Unix 不使用扩展名来确定文件类型。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:39:51.327

CompressionCodecFactory 确实使用文件扩展名来确定要使用的编解码器 - 因此，如果文件以结尾，`.gz`则在调用时应返回 GzipCodec `getCodec`。如果您有`.gz.2012-01-24`扩展名，那么这将不会返回 gzip 编解码器。因此，您需要修改文件命名约定以交换日期和扩展名。

# jquery - JQuery DataTables Search based on StartsWith Not Contains

> ID：14497577
> 
> 赞同：1
> 
> 时间：2013-01-24T09:12:07.273
> 
> 标签：jquery, asp.net-mvc-3, datatable

I was working on MVC3 with Jquery DataTables. There every grid consist of search function where it searches the content by matching input character (say like, using contains). But I need the result should be using StartsWith.

I need something like this,

**Grid Records**

```
1\. Pipefitting Annotated instructor guide level 1 CD-ROM
2\. Adobe Photoshop CS4 for photographers A professional image editors 
```

If I Input character 'a', the result should come with second row (By searching starting character of the word in a string). or If I type 'g' then the result should be of first record.

I have googled a lot but I haven't find anything that matches my requirement. Please suggest me how can i do this.

**View Code**

```
 $(document).ready(function () {
    $('#CollectionTable').dataTable({
      "bJQueryUI": true,
      "sPaginationType": "full_numbers"}).makeEditable({
            "aoColumns": [
                null, null
                ]
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-30T01:25:59.490

使用数据表 1.10.9，搜索以您将输入的参数开头的值非常简单。

我自己做了一些研究，但是 datatables API 有内置的列过滤器来做你正在寻找的东西。

```
var table = $('#table_id').DataTable();

        $('#name').on( 'keyup', function () {

            table
                .columns( 0 ) // 0 based column
                .search( "^"+this.value, true, true, true )
                .draw();

        } ); 
```

table 是数据表对象

#name 是我从中传递参数的输入框。

您可以定义您感兴趣的列，然后在针对您的参数进行搜索时传入正则表达式查询。

[您可以在此处](https://datatables.net/reference/api/column%28%29.search%28%29)的官方文档中找到上述示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:51:56.257

fnFilter 允许您使用正则表达式过滤表：

```
$(document).ready(function() {
  var oTable = $('#example').dataTable();

  // Sometime later - filter...
  oTable.fnFilter( '^' + yourTerm, null, true, true, true, true);
} ); 
```

完整参考：[http ://www.datatables.net/ref](http://www.datatables.net/ref)

# java - Customize icon in Drag Drop Event?

> ID：14497578
> 
> 赞同：1
> 
> 时间：2013-01-24T09:12:08.777
> 
> 标签：java, swing, drag-and-drop, icons, jtable

I am dragging and dropping the jTable cell from one `jTable` to another `jTable`.For Now it is showing me default drag drop icon.

I am using `TransferHandler` class to implement this.

I Override `getDragImage(image)` to put my customize image But it is not working.

This way i implemented my code [Implementation](https://stackoverflow.com/questions/13075943/jtable-drag-and-drop-using-transferhandler?rq=1)

I tried this code into this method.

```
 File newFile = new File("./dragImage.jpeg");
             Font font = new Font("Tahoma", Font.PLAIN, 11);
             FontRenderContext frc = new FontRenderContext(null, true, true);
             Rectangle2D bounds = font.getStringBounds(l_value, frc);
             int w = (int) bounds.getWidth();
             int h = (int) bounds.getHeight();

             BufferedImage image = new BufferedImage(10,10,   BufferedImage.TYPE_INT_RGB);
             Graphics2D g = image.createGraphics();
             g.setColor(Color.WHITE);
             g.fillRect(0, 0, 10, 10);
             g.setColor(Color.BLACK);
             g.setFont(font);
             g.drawString(l_value, (float) bounds.getX(), (float) -bounds.getY());
             g.dispose();

            return image; 
```

This code is working in my main method but here in this function it is not working.

# c# - .NET and/or Web Service-accessible Object Manager with Security

> ID：14497579
> 
> 赞同：0
> 
> 时间：2013-01-24T09:12:09.100
> 
> 标签：c#, .net, orm, data-modeling

I currently use Microsoft CRM for a lot of development but am questioning if there is a better toolset for certain applications. One of the strengths with MS CRM is being able to create objects, relate them and add attributes. On top of this you have security and searching. There are other features such as UI, etc but I am keen to write an application that doesn't use the CRM user interface but has strong data modelling, manages the database layer and is supported, flexible and rapid in model development -- all characteristics of MS CRM. I have looked at ADO.NET dynamic data entities but wasn't a big fan.

Any thoughts?

Thanks in advance, James

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:43:02.827

为什么不试试 Fluent nHibernate，我就是喜欢它。简单、容易且使用极其快速。

我们一直在几个项目中使用它，并且还迁移了一个大项目。

看看 [http://www.fluentnhibernate.org/](http://www.fluentnhibernate.org/)

# java - java显示方法

> ID：14497583
> 
> 赞同：0
> 
> 时间：2013-01-24T09:12:21.000
> 
> 标签：java, arrays, methods

这里我需要编写一个方法 printArray 来显示数组**num**的内容并显示数组的内容，每个数字用空格分隔。我必须在每 20 个元素之后开始一个新行。

我写了这段代码，但是每当我尝试执行它时，它都会显示没有新行的数组

```
public class project2 {

    public static void main(String[] args) {

        int num []= new int [100];

        for (int i=0;i<num.length;i++){

            num[i]=-1;
            num[7]=7;
        }

        printArray(num);
        System.out.println(num);

    }

    public static void printArray (int array1[]){

        int count =20;
        for (int x=0;x<array1.length;x++){

            System.out.print(array1[x]+" ");
            if (array1[x]==count){

                System.out.println(" ");
                count=array1[x]+count;

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:25:35.443

```
import java.util.Arrays;
import java.util.Random;

public class project2 {

  public static void main(String[] args) {

    int num[] = new int[100];

    Random random = new Random();
    for (int i = 0; i < num.length; i++) {

      num[i] = random.nextInt(100);
    }

    printArray(num);

    System.out.println('\n' + Arrays.toString(num));
  }

  public static void printArray(int array1[]) {

    int count = 20;
    for (int i = 0; i < array1.length; i++) {

      System.out.printf("%2d ", array1[i]);
      if ((i + 1) % count == 0) {

        System.out.println("");
      }

    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:15:54.290

问题在于
`if (array1[x]==count)`
您正在`count`与数组中存在的值进行比较。而是将其与所需的计数进行比较，即 20 或使用其他答案/评论中建议的模运算符。

```
int count = 1;
for (int x=0;x<array1.length;x++){

    System.out.print(array1[x]+" ");

    if (count == 20){    // Check if its 20th element 
       System.out.println(" ");
       count=1;  // reset count 
    }
   count++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:17:51.623

您应该使用更适合您的用法的模（或余数）运算符 ( `%`)：

```
for (int x=0;x<array1.length;x++){
    System.out.print(array1[x]+" ");
    if (x>0 && (x%count)==0){
        System.out.println(" ");
    }

} 
```

这样，您将在每个`count`字符中获得一个新行，而第一行将没有它（这就是`x>0`检查存在的原因）。

此外，在原始帖子中，坦率地说，这条线非常糟糕：

```
count=array1[x]+count; 
```

它会做什么？为什么要将存储在数组中的*值添加到固定计数器？*考虑到这条线，我建议你真的应该坐下来，试着想想事情在后台是如何运作的......没有魔法！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:17:52.093

仔细看看你的 if 语句：

```
if (array1[x]==count) 
```

根据您的数组值，这将永远不会返回 true

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:18:15.730

> 我必须在每 20 个元素后开始一个新行。

更改为以下代码：

```
if (x%20 == 0)
{
    System.out.println();
} 
```

代替

```
if (array1[x]==count)
{
    System.out.println(" ");
    count=array1[x]+count;
} 
```

# android - CvCaptureFromAVI 问题 - OpenCV Android

> ID：14497595
> 
> 赞同：3
> 
> 时间：2013-01-24T09:12:44.830
> 
> 标签：android, c, opencv, android-ndk, java-native-interface

我需要从存储在我的 Android 设备（在本例中是我的模拟器）的 sd 卡中的视频中逐帧捕获。我正在通过 NDK 使用 Android 和 OpenCV。我通过 DDBS (eclipse) 的文件资源管理器手动推送了 sdcard 中的文件“SinglePerson.avi”，并使用以下代码读取文件：

```
 JNIEXPORT void JNICALL Java_org_opencv_samples_tutorial4_Sample4Mixed_VideoProcessing(JNIEnv*, jobject)
{
    LOGI("INSIDE VideoProcessing ");

    CvCapture* capture = cvCaptureFromAVI("/mnt/sdcard/SinglePerson.avi");

    IplImage* img = 0;

    if(!cvGrabFrame(capture)){              // capture a frame
        LOGI("Inside the if");
        printf("Could not grab a frame\n\7");
        exit(0);
    }
    img=cvRetrieveFrame(capture);// retrieve the captured frame
    cvReleaseCapture(&capture);

} 
```

问题是 cvGrabFrame(capture) 结果总是错误的。有什么建议可以正确打开视频并抓取帧吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:34:33.997

某些版本的 OpenCV（在 opencv2 包中）构建时不支持视频。如果是您的情况，您必须在 pkg 的 Makefile 中启用“-D WITH_FFMPEG=ON”并重新编译。

看[“Displaying AVI Video using OpenCV”](http://www.technical-recipes.com/2011/displaying-avi-video-using-opencv/#more-1262)教程：

“您可能需要确保已成功安装 ffmpeg 以允许以不同格式进行视频编码和视频解码。没有 ffmpeg 功能可能会在尝试运行此简单示例并产生编译错误时导致问题”。

还要检查 cvCaptureFromAVI 中的路径是否正确。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:52:50.863

您观察到的行为可能是由于`cvCaptureFromAVI()`失败。您需要**安全地开始编码**并检查您所做的调用的返回：

```
CvCapture* capture = cvCaptureFromAVI("/mnt/sdcard/SinglePerson.avi");
if (!capture)
{
    printf("!!! Failed to open video\n\7");
    exit(0);
} 
```

此功能通常失败有两个原因：

*   当它无法访问文件时（由于错误的文件系统权限）；
*   系统上缺少编解码器（或 OpenCV 不支持视频格式）。

如果您是 OpenCV 新手，我建议您先在桌面 (PC) 上测试您的 OpenCV 代码。

# intellisense - SSMS 2008 连接到 SQL Server 2012 - Intellisense？

> ID：14497600
> 
> 赞同：0
> 
> 时间：2013-01-24T09:12:54.057
> 
> 标签：intellisense, sql-server-2012, sql-server-2008

在连接到 SQL Server 2012 (SP1) 实例时，有没有人有幸在 SSMS 2008 中获得智能感知功能？

对我来说，这似乎行不通。

虽然我会考虑升级到 SSMS 2008 R2（如果智能感知在 2012 实例上工作），但不幸的是我目前无法升级到 SSMS 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:20:16.103

我正在使用 SSMS 2008R2，当我连接到我的 2012 实例时，我的智能感知工作正常（因为 SSMS 2008R2 取代了 SSMS 2008，我无法以其他方式测试！）

在选项 -> 文本编辑器 -> 所有语言 -> “自动列表成员”中打勾。

显示智能感知工作的屏幕截图（您可以在对象资源管理器中看到这是一个 2012 实例）：

![智能感知 2012](../Images/c167dad88bc3141304429130c3ab2ee8.png)

帮助 -> 关于 SSMS：

![SSMS 2008](../Images/5c378e9b05cb04e9e8ac1aa29c5c575d.png)

也许这个[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms173434.aspx)可以帮助您解决这个问题。

# sed - 从所有文件中删除字符串/脚本（递归）

> ID：14497605
> 
> 赞同：1
> 
> 时间：2013-01-24T09:13:03.127
> 
> 标签：sed

我的一个网站被黑了，所有的 index.html 和 index.php 文件都被某种 Javascript 感染了。我想要一个 unix 命令来从所有文件中删除这个脚本。

脚本在这里： http: [//pastie.org/private/6osrvd5zhphe372gblrc6w](http://pastie.org/private/6osrvd5zhphe372gblrc6w)

我试图用 sed 解决这个问题，但到目前为止还没有运气

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:21:27.090

```
sed -i 's/<script>.*<\/script>//' fileName 
```

将删除标记脚本及其所有内容。

如果您只有一个`<script>`标签，则此方法有效。

如果您没有一个，`try`请按以下方式使用关键字扩展它

```
sed -i 's/<script>try.*<\/script>//' fileName 
```

# 编辑

如果您想以递归方式对所有文件执行此操作，可以使用`find`如下命令：

```
find . -name "index.html" -print | xargs sed -i 's/<script>try.*<\/script>//' fileName 
```

`.`当前目录在哪里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:34:54.290

你可以试试这个

```
find src/ -name "index.html" -print | xargs sed -i 's/<script>try{document.body++}catch(dgsgsdg){zxc=12;ww=window;}if(zxc).*<\/scri‌​pt>// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:50:27.040

```
perl -pi -e 's/<script>.*<\/script>//g' index.html 
```

# android - App MediaRecorder program ANR

> ID：14497608
> 
> 赞同：2
> 
> 时间：2013-01-24T09:13:11.943
> 
> 标签：android, android-mediarecorder

I create the application like this:

The code for beginning recording

```
public static void startRecording() {

if (recordTime == 0) {
if (null == mr) {
mr = new MediaRecorder();
}
path = new File(Environment.getExternalStorageDirectory(),
"myRecording.3gp");
mr.reset(); 
```

Get the ΪMicphone music volime

```
mr.setAudioSource(MediaRecorder.AudioSource.MIC);
mr.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
mr.setOutputFile(path.getAbsolutePath());
mr.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

try {
mr.prepare();
} catch (IOException e) {
}
mr.start();
Record.recordTime = 1;
}
} 
```

End recording

```
public static void stopRecording() {
if (mr != null) {
// mr.reset();
mr.stop();
mr.release();
mr = null;
Record.recordTime = 0;
}

} 
```

I repeated fast call recording I call the recording fast repeatedly and stop the recording process, it will appear ANR phenomenon. Who knows what the problem is?
Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T19:03:40.487

Well... this post is a little old, but since i am with a very similar case, the explanation of the problem posted [here](https://stackoverflow.com/questions/12519677/android-media-recorder-stop) makes sense to me.

When you stop the recording, the video will be saved on the phone memory (internal or SD Card). Since this is an heavy I/O operation, the application may not respond for some time, causing the ANR.

I don't know, but have you tried to put the stop on a different thread ? This may work for you.

```
 public static void stopRecording() {
    if (mr != null) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                mr.stop();
                mr.release();
                mr = null;
                Record.recordTime = 0;
            }
        }).start();
    }
} 
```

# php - 如何在 Windows 上获取 PHP 中每个 CPU 核心的负载？

> ID：14497613
> 
> 赞同：1
> 
> 时间：2013-01-24T09:13:42.640
> 
> 标签：php, windows, load, wmi, core

有没有办法这样做？我尝试使用`WMI`, 和`Win32_PerfRawData_PerfOS_Processor`类，我最终得到了`PercentProcessorTime`and`Timestamp_PerfTime`这将需要睡眠一段时间来计算百分比，但这不是我需要的，我需要一些不需要 PHP 等待几秒钟的东西，它应该打印几乎立即摆脱负载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:22:59.373

一种方法是让另一个程序在 PHP 能够直接读取值的地方持续检查和记录处理器负载。日志记录可能会有一点延迟，但不会像几秒钟那样。

您可能可以在单独的 PHP 脚本中执行此操作。只需确保在检查之间睡眠（）一小会儿，否则处理器读取脚本会立即将处理器推到最大负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:25:17.950

您可以使用[XPerf](https://superuser.com/questions/163016/how-to-log-processes-throughout-workday)记录 CPU 活动，然后通过 PHP 访问这些日志文件吗？线程中还有其他建议，例如[this one](https://stackoverflow.com/questions/4705759/how-to-get-cpu-usage-and-ram-usage-without-exec)，建议尝试[Linfo](http://sourceforge.net/projects/linfo/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-12T11:38:47.987

我知道这是一篇旧帖子，但我前段时间处于相同的位置，但设法弄清楚了。

而不是使用

`Win32_PerfRawData_PerfOS_Processor`

利用

`Win32_PerfFormattedData_PerfOS_Processor`

例如

```
$data['core']  = array();
$wmi           = new COM("winmgmts:\\");
$cpu_cores     = $wmi->execquery("SELECT PercentProcessorTime FROM Win32_PerfFormattedData_PerfOS_Processor");

foreach ($cpu_cores as $core) {
    $data['core'][] = $core->PercentProcessorTime;
}

// If CPU Is A Dual Core 
echo $data['core'][0].'%'; // CORE 1 LOAD
echo $data['core'][1].'%'; // CORE 2 LOAD
echo $data['core'][2].'%'; // TOTAL CPU LOAD

// If CPU Is A Quad Core 
echo $data['core'][0].'%'; // CORE 1 LOAD
echo $data['core'][1].'%'; // CORE 2 LOAD
echo $data['core'][2].'%'; // CORE 3 LOAD
echo $data['core'][3].'%'; // CORE 4 LOAD
echo $data['core'][4].'%'; // TOTAL CPU LOAD

And So On 
```

# r - RcmdrPlugin包路径

> ID：14497615
> 
> 赞同：1
> 
> 时间：2013-01-24T09:13:50.397
> 
> 标签：r

我的路径和文件如下...

```
E:R/R-2.15.1/library/Rcmdr/
E:R/R-2.15.1/library/RcmdrPlugin.Package/

E:R/R-2.15.1/MyLibrary/RcmdrPlugin.Package.zip
E:R/R-2.15.1/MyLibrary/RcmdrPlugin.Package/ 
```

其中，在名称 RcmdrPlugin.Package 中，我使用了“包”这个词来表示正在使用的实际包的名称。

安装如上所述，因为 (i) 我不是安装软件包的专家，(ii) 我无法从 Cran 直接安装，因为我想将软件包放到 U 盘上；并且，（iii）在工作中，Cran 服务器被阻止（*原文如此*）。

当我从 GUI 启动包时，Cmdr 打开一次并快速关闭（我不知道这是否相关或正常）并再次打开。打开后，我可以通过 Cmdr 界面对包进行操作。这是一个非常好的包，在我想保存工作之前，一切都很好。然后我收到以下错误，

```
Error in obj[i] : object of type 'closure' is not subsettable 
```

我一直在与开发（并且仍在开发）该软件包的人联系，他们无法重现该错误。

我强烈怀疑问题在于我的“糟糕”安装和文件配置，而不是包。

任何人都可以通过建议我将如何撤消我所做的事情并鉴于上面的限制列表正确地做到这一点来帮助我吗？

我很感激我可以使用 Remove 来摆脱包，但我不想在没有更深入地了解我在做什么的情况下开始修补某些东西。

最后，请注意，错误已在此列表中多次讨论，但不在此特定上下文中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:03:57.103

我已经按照stackoverflow.com/questions/12820189/这里的说明设法让它工作了，在我将包放入/MyLibrary/之后我设置了repos=NULL

# android - 安卓应用栏

> ID：14497616
> 
> 赞同：0
> 
> 时间：2013-01-24T09:13:50.693
> 
> 标签：android, styles

这是我喜欢的 android applicationbar 的图片（我的意思是写设置的部分，不确定 applicationbar 是否是正确的名称:)） [http://oi50.tinypic.com/ehwwpc.jpg](http://oi50.tinypic.com/ehwwpc.jpg)

我下载的一些应用程序也有完全相同的栏，所以我猜测它是一个预定义的主题，但是当我制作一个项目（theme.holo）时，我的应用程序栏完全是黑色的。

所以我的问题是我如何获得相同的项目栏？

谢谢！

编辑：我发现所有应用程序都是opensoruce，我查看了android 4.0.4的设置应用程序清单，和我的一样。

这里是：[https ://android.googlesource.com/platform/packages/apps/Settings/+/android-4.0.4_r2.1/AndroidManifest.xml](https://android.googlesource.com/platform/packages/apps/Settings/+/android-4.0.4_r2.1/AndroidManifest.xml)

奇怪的是它使用了与我相同的主题：android:theme="@android:style/Theme.Holo"

...但标题栏仍然不同。必须有另一个属性来定义标题栏？有人有想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:33:37.660

Activity 的标题可以在 Manifest 文件中定义，它应该是 android:label 属性。例如：

```
<activity
     android:name=".MainActivity"
     android:label="@string/TitleBarText" /> 
```

TitleBarText 是包含标题名称的 android 字符串资源。

如果您希望从代码中执行此操作，您可以在 onCreate 方法中执行以下操作：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {

        setTitle("Title Bar Name");
        setContentView(R.layout.activity_main);

    } 
```

要创建自定义标题栏，请参考：[this](http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/)和[this](http://www.helloandroid.com/tutorials/how-create-custom-titlebar)

# amazon-ec2 - 增加 ubuntu 云实例的空间

> ID：14497617
> 
> 赞同：0
> 
> 时间：2013-01-24T09:13:58.427
> 
> 标签：amazon-ec2

嗨，我已经创建了一个大约 8Gb 的 ubuntu 云实例。现在我需要将大小增加到 32Gb。任何想法如何进行都会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:13:41.907

如果您不关心停机时间，您可以从 EBS 卷中拍摄快照并从中创建一个新卷，指定更大的 EBS 大小并将其附加到另一个实例。请记住，您可能还必须在其上扩大文件系统。

可以在[此处](http://alestic.com/2010/02/ec2-resize-running-ebs-root)找到对此的详细说明。

# c - Lua Lanes 应用程序崩溃

> ID：14497622
> 
> 赞同：3
> 
> 时间：2013-01-24T09:14:02.643
> 
> 标签：c, lua, lua-lanes

我有一个使用最新 lua 通道的 Lua 脚本。我有以下
脚本

```
local lanes = require "lanes"  
lanes.configure()  
require "helper_interfaces"  
--require "assert"  
local cleanup  
local error_func =  function(err)  
                     return debug.traceback(err)  
                    end

local function sample(n)  
   -- set_finalizer(cleanup)  
   local success, result = xpcall(m.usb_lua_printlog("hi\r\n"), error_func)  
   print(success, result)  
   return 2*n  
end

--lanes.configure()  
EnablePrintLog()  
--PrintLog("hi")  
usb_lua_printlog("hi\r\n")  
local lanes_gen = assert(lanes.gen)  
local lanes_linda = assert(lanes.linda)  

--while (true) do  
a1 = lanes_gen("*", { globals =  { ["m"] = require "UsbTestApp" } }, sample)(1)  
a1:join()  
--set_debug_threadname("first")  
while true do  
  str = a1.status  
  --thread_gc(a1)  
  if str == "done" or str == "cancelled" or str == "error" then  
     usb_lua_wait(1000)  
     break  
  end    
end 
```

我的问题是：

现在，当我从我的应用程序（在 Windows 上）执行它时，我在执行它时遇到了崩溃，以下是崩溃时的调用堆栈。

```
UsbTestApp.exe!_CrtIsValidHeapPointer(const void * pUserData)  Line 2036    C++  
UsbTestApp.exe!_free_dbg_nolock(void * pUserData, int nBlockUse)  Line 1322 + 0x9         bytes C++  
UsbTestApp.exe!_free_dbg(void * pUserData, int nBlockUse)  Line 1265 + 0xd bytes        C++>  
UsbTestApp.exe!free(void * pUserData)  Line 49 + 0xb bytes  C++  
UsbTestApp.exe!_luaL_loadbuffer()  + 0x42 bytes C  
UsbTestApp.exe!_luaM_realloc_()  + 0x23 bytes   C  
UsbTestApp.exe!_luaH_free()  + 0x2b bytes   C  
UsbTestApp.exe!_luaC_separateudata()  + 0x95d bytes C  
UsbTestApp.exe!_luaC_freeall()  + 0x4ce bytes   C  
UsbTestApp.exe!_luaC_fullgc()  + 0x4f bytes C  
UsbTestApp.exe!_lua_gc()  + 0x3f bytes  C  
UsbTestApp.exe!USB_LUA_TEST_EXECUTE_SCRIPT(lua_State * ulState)  Line 579 + 0xd     bytes   C++  
UsbTestApp.exe!USB_LUA_TEST_SCRIPT_RUN(lua_State * ulState)  Line 461 + 0x9 bytes       C++  
UsbTestApp.exe!_luaD_precall()  + 0x193 bytes   C  
UsbTestApp.exe!_luaD_call()  + 0x3c bytes   C  
UsbTestApp.exe!_lua_pcall()  + 0xd1 bytes   C  
UsbTestApp.exe!_luaD_rawrunprotected()  + 0x53 bytes    C  
UsbTestApp.exe!_luaD_pcall()  + 0x3e bytes  C  
UsbTestApp.exe!_lua_cpcall()  + 0x2f bytes  C  
UsbTestApp.exe!USB_LUA_CREATE_NEW_LUA_STATE(LUA_Script * luaScript)  Line 304 + 0x15       bytes    C++  
UsbTestApp.exe!UsbTestSuiteLIThread(void * lpParam)  Line 162 + 0x9 bytes   C++ 
```

任何人都可以帮助我尝试帮助我。由于包含和加载 lanes.configure() 似乎会导致此问题 可能是我做错了什么或任何建议可能会有所帮助。如果您需要更多信息，请告诉我。

非常感谢。

问候，
马尤尔

# emacs - 带有破折号但没有空格的单词的最简单正则表达式

> ID：14497628
> 
> 赞同：0
> 
> 时间：2013-01-24T09:14:23.953
> 
> 标签：emacs, elisp

当目标是只选择这个但不选择空格时，选择“words-with-dashes-but-no-whitespace”之类的文本最方便的正则表达式是什么？

我用过`(search-forward-regexp "\\s-")`，但我相信这会更容易。

我主要希望在点处选择包含破折号的单词，并使用 buffer-substring-no-properties 将其设置为变量。

[编辑： artscan](https://stackoverflow.com/users/1937596/artscan)在评论中给出了答案。使用 (current-word) 解决了这个问题。

但现在这个：如何删除这个`(current-word)`包括破折号？

我用至今`(delete-backward-char (string-width (current-word))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:13:54.643

要回答第二个问题，请尝试：

```
(let ((bounds (bounds-of-thing-at-point 'symbol)))
   (when bounds
     (delete-region (car bounds) (cdr bounds)))) 
```

它对点位置的依赖比`(delete-backward-char ...)`.

# iphone - 如何从 iOS 连接 sybase 数据库？

> ID：14497630
> 
> 赞同：1
> 
> 时间：2013-01-24T09:14:32.300
> 
> 标签：iphone, ios, ipad, sybase

1）是否可以从iOS应用程序连接windows机器中的sybase数据库进行iphone开发？

2）如果是，我们如何通过iOS查询连接和访问数据库数据并在Iphone模拟器中查看结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:41:51.880

[SAP's Sybase Unwired Platform](http://www54.sap.com/solutions/tech/mobile/software/solutions/platform/overview.html) allows you to build mobile applications that can take advantage of your enterprise data sources.

# javascript - 如何使用 JavaScript 控制嵌入标签中的音频

> ID：14497631
> 
> 赞同：0
> 
> 时间：2013-01-24T09:14:34.933
> 
> 标签：javascript, html, audio

开始 & 停止 & 暂停按钮正在工作，但我无法控制音频滚动条 这是我的代码 >>> 我的代码的目标是在不使用 html5 的情况下同时控制两个音频

```
<HTML>
    <HEAD>
        <SCRIPT LANGUAGE="JavaScript">
            function play() {
                window.document.embeds[0].Play()
                window.document.embeds[1].Play()
            }
            function stop() {
                window.document.embeds[0].Stop()
                window.document.embeds[1].Stop()
            }
            function start() {
                window.document.embeds[0].Rewind()
                window.document.embeds[1].Rewind()
            }
            function forward() {
                window.document.embeds[0].Forward();
                window.document.embeds[1].Forward();
            }
            function forward() {
                window.document.embeds[0].forward();
                window.document.embeds[1].forward();
            }
            function forward() {
                window.document.embeds[0].back();
                window.document.embeds[1].back();
            }
        </SCRIPT>
    </HEAD>
    <BODY onLoad="start()">
    <EMBED SRC="Sound/Egypt.wav" NAME="video" AUTOSTART="false">
        <EMBED SRC= "Sound/Madina.wav" AUTOSTART="false">
            <FORM>
                <INPUT TYPE="BUTTON" VALUE="Reset" onClick="start()">
                <INPUT TYPE="BUTTON" VALUE="Play" onClick="play()">
                <INPUT TYPE="BUTTON" VALUE="Pause" onClick="stop()">
                <INPUT TYPE="BUTTON" VALUE="<<" onClick="forward()">
                <INPUT TYPE="BUTTON" VALUE=">>" onClick="backward()">
            </FORM>
    </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:20:40.210

```
function ScrollSound(time){
    var x = document.getElementById("first");               
    x.SetTime(time+ x.GetTime());
    var y = document.getElementById("second");
    y.SetTime(time+ y.GetTime());
} 
```

# c++ - opengl multitexturing glsl - 一次只有一个纹理

> ID：14497634
> 
> 赞同：1
> 
> 时间：2013-01-24T09:14:50.427
> 
> 标签：c++, opengl, glsl, multitexturing, deferred-rendering

好像如果我使用`texture(texture0,textCoord)`一次然后我尝试再次使用`texture(texture1,textCoord);`它返回的另一个纹理（0,0,0,0）；我只是不知道为什么。

在我的程序中，它似乎是一个工作顺序，如果深度比其他工作不工作，如果我不使用深度比颜色工作等等。（深度，颜色，正常，位置，光泽是顺序）

```
this is the fragment shader :

uniform sampler2D tex0;
uniform sampler2D tex1;
uniform sampler2D tex2;
uniform sampler2D tex3;
uniform sampler2D depht;

void main()
{
    float UNIT = 1./640\. ;

    //vec4 depht = texture(depht,gl_TexCoord[0].st);
    vec4 color = texture(tex0,gl_TexCoord[0].st);
    vec4 norma = texture(tex1,gl_TexCoord[0].st);
    vec4 posit = texture(tex2,gl_TexCoord[0].st);
    vec4 shine = texture(tex3,gl_TexCoord[0].st);

    if(false){
            gl_FragColor=(  texture2D(tex0,gl_TexCoord[0].st +vec2(0,0))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(0,-UNIT))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(UNIT,-UNIT))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(UNIT,0))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(UNIT,UNIT))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(0,UNIT))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(-UNIT,UNIT))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(-UNIT,0))+
                            texture2D(tex0,gl_TexCoord[0].st +vec2(-UNIT,-UNIT)))/9.;
    }else{
        gl_FragColor=(norma+color);
    }
} 
```

这是绑定部分：

```
 fbotest.drawFBO();
DEFERRED.UseNow();
DrawGLScene();

fbotest.readFBO();
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

DEFERRED2.UseNow();

//glBlendFunc (GL_ONE, GL_ONE);
glEnable( GL_BLEND );

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, fbotest.Color);
glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, fbotest.Normal);
glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, fbotest.Pos);
glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE3);
glBindTexture(GL_TEXTURE_2D, fbotest.Shine);
glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE4);
glBindTexture(GL_TEXTURE_2D, fbotest.Depht);
glEnable(GL_TEXTURE_2D);

glUniform1i(glGetUniformLocation(DEFERRED2.PR,"tex0"),0);
glUniform1i(glGetUniformLocation(DEFERRED2.PR,"tex1"),1);
glUniform1i(glGetUniformLocation(DEFERRED2.PR,"tex2"),2);
glUniform1i(glGetUniformLocation(DEFERRED2.PR,"tex3"),3);
glUniform1i(glGetUniformLocation(DEFERRED2.PR,"depht"),4);

glLoadIdentity();
glBegin(GL_QUADS);
        glMultiTexCoord2f(GL_TEXTURE0, 1.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE1, 1.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE2, 1.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE3, 1.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE4, 1.0, 0.0);
    glVertex3f( 1,-1,-3);
        glMultiTexCoord2f(GL_TEXTURE0, 1.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE1, 1.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE2, 1.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE3, 1.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE4, 1.0, 1.0);
    glVertex3f( 1,1 ,-3);
        glMultiTexCoord2f(GL_TEXTURE0, 0.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE1, 0.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE2, 0.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE3, 0.0, 1.0);
        glMultiTexCoord2f(GL_TEXTURE4, 0.0, 1.0);
    glVertex3f( -1,1,-3);
        glMultiTexCoord2f(GL_TEXTURE0, 0.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE1, 0.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE2, 0.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE3, 0.0, 0.0);
        glMultiTexCoord2f(GL_TEXTURE4, 0.0, 0.0);
    glVertex3f(-1,-1,-3);
glEnd();

glActiveTextureARB(GL_TEXTURE4);
    glBindTexture(GL_TEXTURE_2D, 0);
glActiveTextureARB(GL_TEXTURE3);
    glBindTexture(GL_TEXTURE_2D, 0);
glActiveTextureARB(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, 0);
glActiveTextureARB(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D, 0);
glActiveTextureARB(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, 0);
glDisable( GL_BLEND ); 
```

这可能是 FBO 类：

```
 class deferred{
        public :
    unsigned int FBO;
    unsigned int Depht;
    unsigned int Color;
    unsigned int Normal;
    unsigned int Pos;
    unsigned int Shine;

    deferred();
    void initFBO();
    void readFBO();
    void drawFBO();

};

    void deferred::readFBO(){
        glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0);
        glBindFramebuffer(GL_READ_FRAMEBUFFER,FBO);
    }

    void deferred::drawFBO(){
        glBindFramebuffer(GL_READ_FRAMEBUFFER,0);
        glBindFramebuffer(GL_DRAW_FRAMEBUFFER,FBO);
    }

    deferred::deferred(){
        FBO     =0;
        Depht   =0;
        Color   =0;
        Normal  =0;
        Pos     =0;
        Shine   =0;
    }

    void deferred::initFBO(){
        glGenFramebuffers(1, &FBO);
        glBindFramebuffer(GL_DRAW_FRAMEBUFFER, FBO);

        glGenTextures(1,&Depht );
        glGenTextures(1,&Color );
        glGenTextures(1,&Normal);
        glGenTextures(1,&Pos   );
        glGenTextures(1,&Shine );

        int WindowWidth = Ww;
        int WindowHeight= Wh;

        glBindTexture(GL_TEXTURE_2D, Color);
        glTexImage2D (GL_TEXTURE_2D, 0, GL_RGB32F, WindowWidth, WindowHeight, 0, GL_RGB, GL_FLOAT, NULL);
        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, Color, 0);

        glBindTexture(GL_TEXTURE_2D, Normal);
        glTexImage2D (GL_TEXTURE_2D, 0, GL_RGB32F, WindowWidth, WindowHeight, 0, GL_RGB, GL_FLOAT, NULL);
        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, Normal, 0);

        glBindTexture(GL_TEXTURE_2D, Pos);
        glTexImage2D (GL_TEXTURE_2D, 0, GL_RGB32F, WindowWidth, WindowHeight, 0, GL_RGB, GL_FLOAT, NULL);
        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, Pos, 0);

        glBindTexture(GL_TEXTURE_2D, Shine);
        glTexImage2D (GL_TEXTURE_2D, 0, GL_RGB32F, WindowWidth, WindowHeight, 0, GL_RGB, GL_FLOAT, NULL);
        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT3, GL_TEXTURE_2D, Shine, 0);

        glBindTexture(GL_TEXTURE_2D, Depht);
        glTexImage2D (GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32F, WindowWidth, WindowHeight, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);
        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, Depht, 0);

        GLenum DrawBuffers[] = { GL_COLOR_ATTACHMENT0,
                                 GL_COLOR_ATTACHMENT1,
                                 GL_COLOR_ATTACHMENT2,
                                 GL_COLOR_ATTACHMENT3};

        glDrawBuffers(4, DrawBuffers);

        GLenum Status = glCheckFramebufferStatus(GL_FRAMEBUFFER);

        if (Status != GL_FRAMEBUFFER_COMPLETE) {
            cout <<"Frame Buffer ERROR : "<< Status << "\n" ;
        }

        glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:21:45.870

```
glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, 0);
glUniform1i(glGetUniformLocation(DEFERRED2.PR,"tex0"),0); 
```

尝试将这些更改为如下所示。绑定时应启用 GL_TEXTURE_2D。此外，glBindTexture 肩部末尾的 ID 会上升 - 0 1 2 3 4 5。我不确定您的值返回了什么。然后每次使用 glUinform1i 发送该数据，它将绑定在 0 处的纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:00:19.143

我改变了这个：

```
void deferred::readFBO(){
    glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0);
    glBindFramebuffer(GL_READ_FRAMEBUFFER,FBO);

}

void deferred::drawFBO(){
    glBindFramebuffer(GL_READ_FRAMEBUFFER,0);
    glBindFramebuffer(GL_DRAW_FRAMEBUFFER,FBO);
} 
```

有了这个 ：

```
> void deferred::readFBO(){
>     glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0);
>     glBindFramebuffer(GL_READ_FRAMEBUFFER,FBO);
> 
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, 0, 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, 0, 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, 0, 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT3, GL_TEXTURE_2D, 0, 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT , GL_TEXTURE_2D, 0, 0); 
}
> 
> void deferred::drawFBO(){
>     glBindFramebuffer(GL_READ_FRAMEBUFFER,0);
>     glBindFramebuffer(GL_DRAW_FRAMEBUFFER,FBO);
> 
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, Color , 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, Normal, 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, Pos   , 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT3, GL_TEXTURE_2D, Shine , 0);
>     glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT , GL_TEXTURE_2D, Depht , 0); 
} 
```

现在它可以工作了。我相信即使我没有看到帧速率的任何变化，它也会有点慢，而且我不知道为什么我不能让纹理绑定到帧缓冲区，但是是的，它解决了问题。

# android - 将 JSON 内容加载并显示到列表视图中时出现 NullPointerException

> ID：14497637
> 
> 赞同：2
> 
> 时间：2013-01-24T09:14:56.893
> 
> 标签：android, json

我正在尝试将 JSON 内容加载到包含图像和文本的列表视图中，但我`NullPointerException`在第 154 行，即`lv1.setAdapter(efficienadapter);`在 Actualities.class 中得到一个 '。

不知道是不是因为`postlist is null or an error in my code.`

有人可以帮助我吗

我的 Actualites 类 android.widget.TabHost.setCurrentTab(TabHost.java:329)

```
01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:133)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:456)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.view.View.performClick(View.java:2538)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.view.View$PerformClick.run(View.java:9152)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.os.Handler.handleCallback(Handler.java:587)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.os.Handler.dispatchMessage(Handler.java:92)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.os.Looper.loop(Looper.java:130)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.app.ActivityThread.main(ActivityThread.java:3687)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at java.lang.reflect.Method.invokeNative(Native Method)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at java.lang.reflect.Method.invoke(Method.java:507)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at dalvik.system.NativeStart.main(Native Method)

01-24 13:03:44.741: E/AndroidRuntime(4357): Caused by: java.lang.NullPointerException
01-24 13:03:44.741: E/AndroidRuntime(4357):     at fr.dtweb.gpf.Actualites.onCreate(Actualites.java:154)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

01-24 13:03:44.741: E/AndroidRuntime(4357):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)

01-24 13:03:44.741: E/AndroidRuntime(4357):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:21:26.123

`isActusAstuce`在使用它之前，您需要设置默认值。如果您从其他应用程序组件访问它，则将其设为静态：

```
public static  Boolean isActusAstuce=false; 
```

代替

```
public Boolean isActusAstuce; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:39:08.867

似乎 lv1 为空。一些可能性是：

*   布局actualites.xml中没有带有id的视图`list`
*   `android.R.id.list`标准和你自己 的不匹配`fr.dtweb.gpf.R.id.list`

android id
xml：`android:id="@android:id/list"`
代码：`import android.R`

您自己的 id
xml：`android:id="@+id/list"`
代码：`import fr.dtweb.gpf.R`

# vb.net - 如何使用 Excel.Workbook 操作 Excel 工作簿

> ID：14497641
> 
> 赞同：0
> 
> 时间：2013-01-24T09:15:01.063
> 
> 标签：vb.net, excel

所以，我找不到在`Excel.Workbook`or`Excel.Application`中打开文件的任何方法，我想知道为什么。

我有一个 Excel 文件的路径，我想操作它。我知道我必须使用`Excel.Application`,`Excel.Workbook`和`Excel.Worksheet`。Excel文件的文件是`ExcelFilePath`，我应该怎么做才能使它成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:26:14.973

您首先需要添加对`Microsoft.Office.Interop.Excel`项目的引用才能使用 Excel API，然后填写变量：

```
Dim xlApp As Excel.Application
Dim xlWorkBook As Excel.Workbook
Dim xlWS As Excel.Worksheet

xlApp = New Excel.ApplicationClass
xlWorkBook = xlApp.Workbooks.Open(sFilePath)
xlWS = CType(xlWorkBook.Worksheets(sheetNameOrIndex), Excel.Worksheet) 
```

然后你只需要使用他们拥有的方法。例如：

```
Dim sVar as String = xlWS.Range("C5").Value.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:26:58.340

试试这个：从我的项目

```
Dim xapp As New Microsoft.Office.Interop.Excel.Application
    Dim wb As Workbook = xapp.Workbooks.Add
    Dim ws As Worksheet = wb.Worksheets(1)
    ws.Activate()

    'Fill header of the sheet----------------------------------
    For i As Integer = 1 To dgvcustomer.Columns.Count
        ws.Cells(1, i) = dgvcustomer.Columns(i - 1).HeaderText
    Next
    'End header------------------------------------------------

    Dim Dgrow, Dgcell, Dgcol As Integer
    Dgrow = 1
    Dgcell = 1

    'Fill Sheet ------------------------------------------------------------------------------------------------

    While (Dgrow <= dgvcustomer.Rows.Count)
        Dgcol = 1
        While (Dgcol <= ws.UsedRange.Columns().Count)
            ws.Cells(Dgrow + 1, Dgcol).value = dgvcustomer.Rows(Dgrow - 1).Cells(ws.Cells(1, Dgcol).value).Value
            Dgcol += 1
        End While
        Dgrow += 1
    End While

    'End fill sheet---------------------------------------------------------------------------------------------

    wb.SaveAs(dlgSaveFile.FileName)
    wb.Close()
    xapp.Quit() 
```

# networking - 如何将多个端口的用户连接到单个服务器？

> ID：14497642
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:15:01.797
> 
> 标签：networking, tcp, client-server, port

根据谷歌，以下是关于端口使用的事实：

> 众所周知的端口是从 0 到 1023 的端口。注册端口是从 1024 到 49151 的端口 动态和/或专用端口是从 49152 到 65535 的端口

如何将超过 65535 个用户连接到单个服务器。因为我们需要为每个新的监听连接提供一个套接字？那么它不会为每个连接在本地创建一个新端口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:12:32.923

单个连接由 IPserver:server_port 和 IPclient:client_port 对定义。鉴于您的 server_port 只是一个并且是固定的，并且您的客户端由 IPclient:client_port 定义，它给出了 2^48（32 个 IPv4 + 16 个 PORT）不同客户端的理论范围，因此您可以有 2^48 个并行连接到单个服务器。

限制是您不能设置超过 2^16 个从单个 IP 到单个服务器的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:23:07.177

所有到侦听端口的传入连接都使用该端口。所以你的问题不存在，除非你的意思是你想要来自同一个客户端主机的超过 65535 个连接，这将是一个奇怪的要求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T13:11:25.137

一个 IP 地址只能容纳一个 2 字节的端口，正如 TCP 和 UDP 协议中所定义的那样。一种可能的解决方法是这样的：

1.  服务器分叉 n 个进程，在 192.168.0.(10+i):9999.(i = 0 to n-1) 上监听回声
2.  客户端尝试连接 192.168.0.10:9999，如果失败（192.168.0.10 没有更多可用端口因此无法建立连接），则尝试连接 192.168.0.11:9999 等等。

至于如何将多个 IP 绑定到单个 NIC，请查看：http: [//community.spiceworks.com/how_to/show/1782-bind-multiple-ips-to-one-nic-in-linux](http://community.spiceworks.com/how_to/show/1782-bind-multiple-ips-to-one-nic-in-linux)

# c# - Application.Documents.Add 返回 null

> ID：14497644
> 
> 赞同：0
> 
> 时间：2013-01-24T09:15:09.427
> 
> 标签：c#, asp.net, .net, com

我尝试使用 Microsoft.Office.Interop.Word 通过单词模板导出单词。下面的一些相关代码：

```
 //strTemppath is a path for my word template(.doc).
    object oTemplate = strTemppath;
    var WordDoc = WordApp.Documents.Add(ref oTemplate, ref missing, ref missing, ref missing); 
```

这在当地运作良好。但是，在我将应用程序移动到服务器后，“WordDoc”对象总是返回 null。这怎么可能发生？与服务器的配置有什么关系吗？例如“权限”或“Com 组件”或其他什么？

提前致谢

# python - 遍历对象结构

> ID：14497646
> 
> 赞同：0
> 
> 时间：2013-01-24T09:15:31.137
> 
> 标签：python, oop, object

我正在调查内存泄漏，并且正在寻找一种遍历对象的方法。我想出了以下代码。

```
def obj_scan(obj, path, fname):
    def _store(msg):
        open(fname, 'a').write(path+msg+'\n')

    try:
        if callable(obj):
            return
        obj_type = type(obj)
        if obj_type is str:
            _store('- STR {}'.format(len(obj)))
        elif obj is None:
            _store('- NONE')
        elif obj_type is int:
            _store('- INT')
        elif obj_type is list:
            for idx, val in enumerate(obj):
                obj_scan(val, '{}[{}]'.format(path, idx), fname)
        elif obj_type is dict:
            for key, val in obj.iteritems():
                fmt_line = '{}['+('"{}"]' if type(key) is str else ']')
                obj_scan(val, fmt_line.format(path, key), fname)
        else:
            for attr in dir(obj):
                if ('.'+attr) in path and attr != '__dict__':
                    count = path.count('.'+attr)+1
                    _store('.{} - ATTR repeated {}{}'.format(attr, count, ' - BACTRACKING'*(count>10)))
                    if count>10:
                        return
                obj_scan(getattr(obj, attr), '{}.{}'.format(path, attr), fname)
    except Exception as msg:
        _store('Recursion limit exceeded') 
```

我的问题是 - 有没有更有效的方法来做到这一点？（我知道 - 输出不会赢得选美比赛）

# jquery - 使用 jQuery 的信用卡验证器

> ID：14497649
> 
> 赞同：0
> 
> 时间：2013-01-24T09:15:41.093
> 
> 标签：jquery, asp.net, customvalidator, custom-validators

此代码不起作用，我不明白为什么：

这是特殊的 9 位数卡验证器，

我在页面“9digitCardTextBox”中有一个文本框，并在 .aspx 页面上使用客户端验证器进行调用。

错误：Microsoft JScript 中的运行时错误：需要对象。

验证者：

```
<asp:CustomValidator runat="server" ID="CustomValidator16" EnableClientScript="true" 
Display="Dynamic" OnServerValidate="9digitcard_ServerValidate" CssClass="error" 
SetFocusOnError="true" 
ClientValidationFunction="9digitcard_ClientValidate">cc not good</asp:CustomValidator> 
```

客户端调用：

```
function 9digitcard_ClientValidate(sender, e)
{        
    num = $("input[name*='9digitCardTextBox']").val();                
    sum = 0; mul = 1; l = num.length;
    for (i = 0; i < l; i++)
    {
        digit = num.substring(l-i-1,l-i);
        tproduct = parseInt(digit ,10)*mul;
        if (tproduct >= 10)
            sum += (tproduct % 10) + 1;
        else
            sum += tproduct;
        if (mul == 1)
            mul++;
        else
            mul–-;
    }
    if ((sum % 10) == 0)
        e.isValid = true;
    else
        e.isValid = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:18:18.110

我无法找到 JScript 语法的正式定义，但如果它足够类似于 JavaScript，那么首先要做的就是重命名`9digitcard_ClientValidate`为*不以数字开头*的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:29:09.477

不需要为此使用 jquery，只需一个 js 匹配就足够了：

```
var patt=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/g;
var mastercard    = "5123625454565122";
var random        = "21236258456565122";
var isValid       = patt.test(mastercard);

if(isValid){
    document.write("mastercard : credit card nbr is valid.<br />"); 
}else{
    document.write("mastercard : credit card nbr is NOT valid!<br />" ); 
}

var isValid     = patt.test(random);
if(isValid){
    document.write("random : credit card nbr is valid.<br />"); 
}else{
    document.write("random : credit card nbr is NOT valid!<br />" ); 
} 
```

见：http: [//jsfiddle.net/TbDR2/](http://jsfiddle.net/TbDR2/)

编辑：您可以在此处找到其他用于信用卡号验证的正则表达式：[http ://www.regular-expressions.info/creditcard.html](http://www.regular-expressions.info/creditcard.html)

# php - 转换后无法将缩略图图像保存到 BLOB MySQL

> ID：14497653
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:15:50.643
> 
> 标签：php, mysql, image, blob

我通过 URL 获取图像，需要适应缩略图并调整其大小并将其存储在 BLOB MySql 中以供多个用户进一步访问（建议不将图像存储在 BLOB 中不适合这里）。我使用 GD 类进行转换。

问题是当我尝试将其保存在 BLOB 列中时，我收到以下错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 'Вў|Г¶ВіВџ}Г¦В™gВѕГёГ.../~Г«[ГџВ‡ГћГ»*ВЌ1ГћГ»)IFГ±aIhВґГ„4В(Г …В«jВїГџГЇГ·Г»' 在第 1 行`

```
 $im = fill_image_png($link) ;  // GD library work 
       // get the image into the buffer from the image identifier   
    ob_start();
    imagepng($im);
    $stringdata = ob_get_contents(); // read from buffer
    ob_end_clean(); // delete buffer
    $zdata = gzdeflate($stringdata);
    $zdata = mb_convert_encoding ($zdata, "utf-8");
       //store into mysql db
    if (insert_image($_db, $table_name, $item['link'],  $zdata ) ) { echo "<em><strong>Image is stored into DB</em></strong><br/>"; }
    else  { echo "Failed to store image as binary<br/>"; } 
```

存储过程的代码是：

```
function insert_image($db_handler, $table_name, $link, $image) {
mysqli_query($db_handler,"UPDATE {$table_name} SET Thumbnail = '{$image}' WHERE Link = '{$link}' " );
} 
```

`Thumbnail' column is of a`MEDIUMBLOB` 类型。

出了什么问题/遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:06:04.977

我得到了使用 mysqli_stmt 将参数传递给 sql 查询的正确答案。这既可以避免注射`'; delete from {$tablename};`，也不需要`'`逃避：

```
 function insert_image($db_handler, $table_name, $link, $image) {
     $stmt = mysqli_prepare($db_handler, "UPDATE {$table_name} SET Thumbnail = ? WHERE Link = '{$link}' " );
     mysqli_stmt_bind_param($stmt, 's', $image);// whether 's' or 'b' - no avail

// execute prepared statement 
     if ( !mysqli_stmt_execute($stmt) ) 
    {  echo "Error inserting image into <em><strong>{$table_name}</strong></em>: " . mysqli_error($db_handler) ;
        echo "<br/>";
        mysqli_stmt_close($stmt);
        return False; 
    }
     mysqli_stmt_close($stmt); // close the stmt
        return True;
} 
```

现在没有出现 SQL 错误，但**blob 字段保持不变**（我检查了 PHPMyAdmin）。变量中的数据`$image`并不大，能够放入BLOB。怎么了？

# apple-push-notifications - 当应用程序未运行时，如何通过低功耗蓝牙接收消息？

> ID：14497661
> 
> 赞同：0
> 
> 时间：2013-01-24T09:16:00.830
> 
> 标签：apple-push-notifications, core-bluetooth, bluetooth-lowenergy

我通过 CoreBluetooth 制作了一个可以从其他 BLE 设备接收数据的应用程序。

当我收到来自 BLE 设备的新消息时，我想收到通知。

但苹果不允许任何应用程序在后台运行。

APNS 需要互联网。但味精来自蓝牙。

有没有什么好的解决方案可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:02:13.890

后台允许使用 GPS、音频和蓝牙低功耗。您必须在 Xcode 中为您的项目设置“需要后台服务”。对于一些 GPS 应用程序，我也在后台使用互联网。

# mysql - 在mysql中获取2天前的查询

> ID：14497662
> 
> 赞同：13
> 
> 时间：2013-01-24T09:16:03.683
> 
> 标签：mysql, sql

因此，为了获得最近 24 小时的查询，我使用类似这样的东西

```
SELECT COUNT(*) AS cnt FROM `mytable` WHERE timestamp >= DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

where`timestamp`是带有时间戳的表字段。

但是我怎样才能得到2天前和昨天之间的间隔。所以

今天是 24 岁。我想在 22 ian (00:00am) 和 23 ian (00:00am) 之间查询

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T09:18:28.127

```
WHERE timestamp BETWEEN 
        DATE_SUB(DATE(NOW()), INTERVAL 2 DAY)
         AND DATE_SUB(DATE(NOW()), INTERVAL 1 DAY) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T09:54:59.063

您也可以尝试[`DATE_ADD`](http://www.w3schools.com/sql/func_date_add.asp)使用负间隔；）

```
WHERE timestamp BETWEEN 
        DATE_ADD(DATE(NOW()), INTERVAL -2 DAY)
         AND DATE_ADD(DATE(NOW()), INTERVAL -1 DAY) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T09:19:32.017

### 利用`Interval`

```
WHERE `timestamp`
    BETWEEN DATE_SUB(NOW(), INTERVAL 2 DAY)
    AND DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-27T06:47:16.477

如果您想在 1 月 22 日（上午 00:00）和 1 月 22 日（晚上 11:59）之间进行查询

```
where DATE(timestamp) = DATE_SUB(DATE(now()), INTERVAL  2 day); 
```

示例：timestamp = 2020-02-24 12:07:19 并且 Date(timestamp) 是 2020-02-24 并且`now()`输出是当前日期和我们使用的时间，`DATE(now())`然后输出是 Date only，

```
DATE_SUB(DATE(now()), INTERVAL  2 day) 
```

将是 2 天前。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T09:20:47.380

试试`BETWEEN`::

```
SELECT 
COUNT(*) AS cnt 

FROM `mytable` 

WHERE timestamp BETWEEN DATE_SUB(NOW(), INTERVAL 2 DAY) and DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

# stata - Stata：删除换行控制字符

> ID：14497667
> 
> 赞同：2
> 
> 时间：2013-01-24T09:16:16.680
> 
> 标签：stata, linefeed

我有一个数据集，我用命令将其导出`outsheet`到 csv 文件中。有一些行在某个地方断线。使用十六进制编辑器，我可以识别记录中换行符“0a”的控制字符。产生换行符的变量值在视觉上（在 Stata 中）仅显示 5 个字符。但是，如果我计算字符数：

```
gen xlen = length(x) 
```

我得到 6。我可以编写一个 Perl 程序来解决这个问题，但我更喜欢在导出之前删除 Stata 中的控制字符（例如使用`regexr()`）。有谁知道如何删除控制字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:35:55.830

The `char()` function calls up particular ASCII characters. So, you can delete such characters by replacing them with empty strings.

```
replace x = subinstr(x, char(10), "", .) 
```

# django - 如何在 Django admin 中右对齐只读字段？

> ID：14497670
> 
> 赞同：0
> 
> 时间：2013-01-24T09:16:24.633
> 
> 标签：django, django-admin

我想在我的 Django 应用程序的管理界面中右对齐数字字段。`formfield_for_dbfield(self, db_field, **kwargs):`对于“普通”可编辑字段，通过覆盖`ModelAdmin`类可以正常工作：

```
def formfield_for_dbfield(self, db_field, **kwargs):
    field = super(MyModelAdmin, self).formfield_for_dbfield(db_field, **kwargs)
    if db_field.name in ("total_amount", "total_discount_amount"):
        field.widget.attrs['style'] = 'text-align:right;'
    return field 
```

当一个字段被定义为只读字段时，它会通过此方法并以不同的方式呈现（显然只是作为 css 样式的段落标记）。

有没有办法右对齐只读字段？我在 SO 上找到[了这个问题](https://stackoverflow.com/questions/8706408/django-admin-how-to-format-readonly-fields)，但它的问题与我的不同，我认为......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:40:06.277

为什么不直接使用 css？定义一个 /admin/base.html 模板，您可以在其中加载一个自定义 css，该 css 指定：

```
input[readonly="readonly"]{
    text-align: right
} 
```

如果您需要限制某些只读字段的样式，您仍然可以通过执行以下操作来使用 css：

```
#my-app fieldset input[readonly="readonly"]{
    text-align: right
} 
```

甚至特定领域：

```
#id_total, #id_average, #id_my_readonly_field{
    text-align: right
} 
```

# 附录

我看到你正在使用 Grappelli，在这种情况下你可以这样做：

```
.grp-readonly{
    float: right;
} 
```

如果您只需要设置某些只读段落而不是所有段落的样式，您仍然可以在 CSS 规则前面加上父元素的 css 类，通常该类以字段名称命名，所以如果您有一个名为“total”的文件这将是：

```
.total .grp-readonly{
    float: right;
} 
```

我认为为演示问题编写自定义过滤器是一种维护过度，您将来可能会后悔，您确定这是最好的方法吗？

# mysql - 如何使用没有特定格式的数字和字母对 varchar 进行排序？

> ID：14497692
> 
> 赞同：1
> 
> 时间：2013-01-24T09:17:32.293
> 
> 标签：mysql, sql, sql-server, sql-order-by

我有一个名为 MR 的列，它是一个 varchar。当我使用 ORDER BY 运行查询时，它似乎没有正确排序。

```
select MR, LName, FName 
from users
order by MR 
```

结果：

```
MR        | LNAME | FNAME
----------+-------+-------
1234-234  | HEN   | LO
2343MA2   | SY    | JACK
MR20001   | LINA  | MARY
MR200011  | TEST  | CASE
MR20002   | KO    | MIKE 
```

为什么 MR200011 显示在 MR20002 之前？关于如何正确排序的任何想法？MR 的格式不固定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:21:43.620

您是按字符串排序，而不是按数字的值。位置 7 中的字符是正在比较的差异：

```
MR200011 
MR20002 
      ^ 
```

因为'2' > '1'，这是你最终得到的顺序。从不比较第 8 个字符，因为基于字符的排序顺序不依赖于它。

要“修复”此问题，请创建一个存储函数，该函数采用您的 varchar 值，并返回一个新的“排序字符串”，它将数字组件填充到固定长度。

例如

```
MR20002  -> MR0020002
MR200011 -> MR0200011 
```

但更重要的是，如果你有两个数字块，它们不会被破坏：

```
A1234-234  -> A000000001234-000000000234
A1234-5123 -> A000000001234-000000005123 
```

以下函数在 sql-server 上执行此转换 - 您必须为 mysql 调整此函数：

```
create function dbo.get_numeric_sort_key(@value varchar(100)) 
    returns varchar(200)
as
begin
   declare @pad_characters varchar(12)
   declare @numeric_block varchar(12)
   declare @output varchar(200)
   set @pad_characters = '000000000000'
   set @output = ''
   set @numeric_block = ''

   declare @idx int
   declare @len int
   declare @char char(1)
   set @idx = 1
   set @len = len(@value)
   while @idx <= @len
   begin
     set @char = SUBSTRING(@value, @idx, 1)
     if @char in ('0','1','2','3','4','5','6','7','8','9') 
     begin
        set @numeric_block = @numeric_block + @char
     end
     else
     begin
        if (@numeric_block <> '')
        begin
          set @output = @output + right(@pad_characters + @numeric_block, 12)
          set @numeric_block = ''
        end
        set @output = @output + @char
     end
     set @idx = @idx + 1
   end

   if (@numeric_block <> '')
     set @output = @output + right(@pad_characters + @numeric_block, 12)

   return @output
end 
```

然后更改您的`order by`子句以使用新功能：

```
select MR, LName, FName 
from users 
order by dbo.get_numeric_sort_key(MR) 
```

如果您有大量数据，则值得在表定义的末尾添加一个计算字段（由此函数填充），这样您就不必每次运行此查询时都进行扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:22:45.180

只有当所有条目的长度都固定时，数字和字母的组合才能正确排序。在您的情况下，MR200011 和 MR20002 的长度不相等，并且根据 MR200011 MR20002 进行排序？第 8 个字符不见了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:48:16.513

也许这个查询看起来不太好，但它会按照你想要的顺序对行进行排序：

```
select
  MR,
  LName,
  FName
from (
  select
    MR,
    LName,
    FName,
    least(
      case when locate('0', MR)>0 then locate('0', MR) else length(MR)+1 end,
      case when locate('1', MR)>0 then locate('1', MR) else length(MR)+1 end,
      case when locate('2', MR)>0 then locate('2', MR) else length(MR)+1 end,
      case when locate('3', MR)>0 then locate('3', MR) else length(MR)+1 end,
      case when locate('4', MR)>0 then locate('4', MR) else length(MR)+1 end,
      case when locate('5', MR)>0 then locate('5', MR) else length(MR)+1 end,
      case when locate('6', MR)>0 then locate('6', MR) else length(MR)+1 end,
      case when locate('7', MR)>0 then locate('7', MR) else length(MR)+1 end,
      case when locate('8', MR)>0 then locate('8', MR) else length(MR)+1 end,
      case when locate('9', MR)>0 then locate('9', MR) else length(MR)+1 end) pos
  from users
  ) users_pos
order by
  left(MR, pos-1),
  mid(MR, pos, length(MR)-pos+1)+0 
```

在子查询 users_pos 我正在计算一个数字的第一个位置，然后我按`left(MR, pos-1)`哪个是字符串的非数字开头排序，哪个是字符串`mid(MR, pos, length(MR)-pos+1)+0`的数字部分，添加 0 将转换为数字并以数字形式排序（因此 20002 在 200011 之前）。

看到它在[这里](http://sqlfiddle.com/#!2/7ebae/2)工作。

# android - 来自被破坏的活动/片段的吐司，getString 问题

> ID：14497698
> 
> 赞同：0
> 
> 时间：2013-01-24T09:17:52.107
> 
> 标签：android, android-fragments, android-ui

我有一个带有 UI 的片段，负责执行简短的异步 api 调用。当异步任务完成时，片段会触发带有结果字符串的 Toast 消息。

我的问题是，如果用户在没有等待结果的情况下按下后退按钮，则应用程序由于某个方法而崩溃，该方法又会在已分离的片段中`onPostExecute`触发`Toast`+ ，因为活动落后于状态。`getString(R.string.whatever)``onDestroy`

我可以检查片段是否已分离或使用 a `ProgressDialog`，这是模态的，但我认为在没有阻塞或任何其他怪癖的情况下显示敬酒会很好。关于如何实现它的任何建议？应用程序类中的广播接收器 == 矫枉过正？

谢谢。

**UPD**日志：

> 01-24 12:01:29.626: E/AndroidRuntime(616): java.lang.IllegalStateException: Fragment HandsetSocialNetworksFragment{40612a78} 未附加到活动 01-24 12:01:29.626: E/AndroidRuntime(616): 在 android。 support.v4.app.Fragment.getResources(Fragment.java:571) 01-24 12:01:29.626: E/AndroidRuntime(616): 在 android.support.v4.app.Fragment.getString(Fragment.java:593 )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:23:08.990

在异步调用开始时，从片段中获取活动，并从中获取应用程序上下文。稍后使用它来获取您需要的字符串。

或者，您可以在开始异步调用时获取所需的字符串，而不是在必须显示 toast 时。

# c# - 在重定向之前设置 Viewbag

> ID：14497711
> 
> 赞同：138
> 
> 时间：2013-01-24T09:18:22.523
> 
> 标签：c#, asp.net-mvc

是否可以`ViewBag`在我调用重定向之前设置？

我想要类似的东西：

```
@ViewBag.Message="MyMessage";
RedirectToAction("MyAction"); 
```

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2013-01-24T09:23:51.717

使用重定向时，不应使用`ViewBag`, 但`TempData`

```
public ActionResult Action1 () {
 TempData["shortMessage"] = "MyMessage";
 return RedirectToAction("Action2");
}

public ActionResult Action2 () {
 //now I can populate my ViewBag (if I want to) with the TempData["shortMessage"] content
  ViewBag.Message = TempData["shortMessage"].ToString();
  return View();
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-24T09:24:08.233

在这种情况下，您可以使用 TempData。 [下面](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)是对 ViewBag、ViewData 和 TempData 的一些解释。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-18T13:21:51.697

我确实喜欢这个……它对我有用……在这里我正在更改密码，成功后我想将成功消息设置到 viewbag 以显示在视图中……

```
 public ActionResult ChangePass()
    {
        ChangePassword CP = new ChangePassword();
        if (TempData["status"] != null)
        {
            ViewBag.Status = "Success";
            TempData.Remove("status");
        }
        return View(CP);
    }

    [HttpPost]
    public ActionResult ChangePass(ChangePassword obj)
    {
        if (ModelState.IsValid)
        {
            int pid = Session.GetDataFromSession<int>("ssnPersonnelID");
            PersonnelMaster PM = db.PersonnelMasters.SingleOrDefault(x => x.PersonnelID == pid);

            PM.Password = obj.NewPassword;
            PM.Mdate = DateTime.Now;
            db.SaveChanges();

            TempData["status"] = "Success";
            return RedirectToAction("ChangePass");
        }

        return View(obj);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-10T08:05:32.500

[取自这里](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications/)

> **概括**
> 
> ViewData 和 ViewBag 对象为您提供了访问模型旁边的那些额外数据的方法，但是对于更复杂的数据，您可以向上移动到 ViewModel。另一方面，TempData 专门用于处理 HTTP 重定向上的数据，因此请记住在使用 TempData 时要小心。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-24T09:21:57.907

或者您可以使用 Session 替代：

```
Session["message"] = "MyMessage";
RedirectToAction("MyAction"); 
```

然后在需要时调用它。

**更新**

此外，正如@James 在他的评论中所说，在您使用该特定会话后，可以安全地取消或清除它的值，以避免不需要的垃圾数据或过时的值。

# c++ - 在简单向量实现中优化运行时间

> ID：14497713
> 
> 赞同：3
> 
> 时间：2013-01-24T09:18:27.953
> 
> 标签：c++, optimization, vector

我刚刚开始实现我自己的向量类，我正在用一个简单的文件对其进行测试，以检查完成所需的时间。一项测试用时 2:30 分钟，而其他测试用时 90 和 29 秒。

有什么东西影响了这门课的表现。你能帮我追查源头吗？

考试：

```
#include "MyVector.h"

const unsigned int SIZE_V= 1000000;
const unsigned int RUNS= 10000;

int main() {

      MyVector v(SIZE_V);

      for (unsigned int j=0; j<RUNS; ++j) {
        for (unsigned int i=0; i<SIZE_V; ++i) {
          v[i]= i;
        }
      }

      return 0;
} 
```

班上：

MyVector.h：

```
#ifndef MY_VECTOR_H
#define MY_VECTOR_H

class MyVector {

 public:

      MyVector(unsigned int size);
      ~MyVector();

      int& operator[](unsigned int i);

 private:
      int* _data;
      unsigned int _size;
      MyVector(const MyVector&);
      MyVector& operator=(const MyVector&);

};
#endif 
```

MyVector.cpp：

```
#include "MyVector.h"
#include <assert.h>

MyVector::MyVector(unsigned int size) : _data(new int[size]) {
}

MyVector::~MyVector() {
      delete[] _data;
}

int& MyVector::operator[](unsigned int i) {
      assert(i<_size);
      return _data[i];
} 
```

**编辑：**

这些是测试结果：

```
granularity: each sample hit covers 4 byte(s) for 0.04% of 27.09 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0   12.51   14.58                 main [1]
               11.28    0.00 1410065408/1410065408     MyVector::operator[](unsigned int) [2]
                3.31    0.00       1/1           MyVector::~MyVector() [3]
                0.00    0.00       1/1           MyVector::MyVector(unsigned int) [7]
-----------------------------------------------
               11.28    0.00 1410065408/1410065408     main [1]
[2]     41.6   11.28    0.00 1410065408         MyVector::operator[](unsigned int) [2]
-----------------------------------------------
                3.31    0.00       1/1           main [1]
[3]     12.2    3.31    0.00       1         MyVector::~MyVector() [3]
-----------------------------------------------
                0.00    0.00       1/1           main [1]
[7]      0.0    0.00    0.00       1         MyVector::MyVector(unsigned int) [7]
----------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:52:59.460

您可能想做的一件事是`operator[]`内联。当我这样做时，你的代码在我的盒子上的性能提高了三倍

```
real    0m18.270s 
```

到

```
real    0m6.030s 
```

在后一个测试中，测试循环的每次迭代大约需要 0.6ns (!) 或大约 1.5 个时钟周期。

这是在使用 g++ 4.7.2 和`-O3`.

PS代码中有一个错误：构造函数没有初始化`_size`，因此`assert()`具有未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:00:51.220

1.  在没有运行探查器的情况下进行测量。

2.  测量完全优化的代码：`g++ -O3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:40:45.403

你在写：-

```
1000000 * 10000 * 4 * 8 = 320000000000 
```

总共的数据位，在测试中是：-

```
2.5 mins = 2133333333 bits / sec = ~2,000 MB/s

90 secs = 3555555555 bits / sec = ~3,400 MB/s

30 secs = 10666666666 bits / sec = ~10,000 MB/s 
```

DDR2 峰值数据速率介于 3,200 MB/s 和 8,533 MB/s 之间，DDR3 峰值数据范围介于 6,400 MB/s 和 17,066 MB/s 之间/

基于此，我会说你有 DDR3-1600 内存芯片。

# java - IOS自动化测试工具

> ID：14497720
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:18:44.960
> 
> 标签：java, xcode, windows, cucumber, calabash

我是移动测试的新手，我想通过市场上可用的任何自动化工具来测试 ios 应用程序，你能建议我哪种工具最好吗？以及指向该工具的有用链接，以了解如何以适当的方式使用该工具

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:24:01.480

如果你想做验收测试，我个人更喜欢基于 Cucumber 构建的[Calabash 。](http://calaba.sh)[然后，您可以使用Jenkins](http://jenkins-ci.org)自动化您的构建。Jenkins 也支持 Cucumber，你可以在[这里](https://github.com/masterthought/jenkins-cucumber-jvm-reports-plugin)找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:27:41.297

您可以使用[Gorrila](https://www.gorillalogic.com/monkeytalk/legacy-products)和[TestStudio](http://www.telerik.com/automated-testing-tools/ios-testing.aspx)。

还有[StackOverFlow](https://stackoverflow.com/questions/402389/automated-testing-for-iphone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T03:14:22.607

另一个选择是[Appium](http://appium.io/)，它允许您使用多种语言和测试框架编写测试。

# asp.net - 如何使用 Jquery 获取 Gridview 行值

> ID：14497721
> 
> 赞同：2
> 
> 时间：2013-01-24T09:18:46.067
> 
> 标签：asp.net, jquery

当我们点击更新按钮时，我需要得到

日期、客户名称、小时数、费率、表格日期、截止日期、增值税、服务税、总金额详细信息..

使用“jQuery”

请帮助我....

我非常感谢你......

```
 <asp:GridView ID="gvTransactions" CssClass="gridStyle" runat="server" AutoGenerateColumns="false" 
DataKeyNames="fn_transaction_pk"
OnRowDataBound="gvTransactions_RowDataBound"
OnRowDeleting="gvTransactions_RowDeleting"
OnRowEditing="gvTransactions_RowEditing"
OnRowCancelingEdit="gvTransactions_RowCancelingEdit" >
<Columns>
<asp:TemplateField HeaderText="Invoice Details" ItemStyle-Width="90%" >
<ItemTemplate>
<table cellpadding="0" cellspacing="0">
<tr>
<td>
<asp:HiddenField ID="fn_transaction_pk" runat="server" value='<% #Eval("FN_TRANSACTION_PK")%>' />
<asp:Label ID="lblDate" runat="server" Text="Date : " CssClass="gridLabel1Style" />
</td>
<td><asp:Label ID="ltDate" runat="server" Text='<% #Eval("transaction_date","{0:MM/dd/yyyy}")%>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblClientName" runat="server" Text="Client Name : " CssClass="gridLabel1Style"/></td>
<td><asp:Label ID="ltClientName" runat="server" Text='<% #Eval("CLIENT_NAME") %>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblNoOfHours" runat="server" Text="Number of Hours : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltNoOfHours" runat="server" Text='<% #Eval("NO_OF_HOURS") %>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblRate" runat="server" Text="Rate : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltRate" runat="server" Text='<% #Eval("RATE", "{0:0.00}") %>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblFromD" runat="server" Text="From Date : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltFrom" runat="server" Text='<% #Eval("FROM_DATE","{0:MM/dd/yyyy}") %>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblToD" runat="server" Text="To Date : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltTo" runat="server" Text='<% #Eval("TO_DATE","{0:MM/dd/yyyy}") %>' CssClass="gridLadel2Style" /></td> 
</tr>
<tr>
<td><asp:Label ID="lblVAT" runat="server" Text="Value Added Tax(VAT) : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltVat" runat="server" Text='<% #Eval("VAT", "{0:0.00}") %>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblServiceTax" runat="server" Text="Service Tax : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltServiceTax" runat="server" Text='<% #Eval("SERVICE_TAX", "{0:0.00}") %>' CssClass="gridLadel2Style" /></td>
</tr>
<tr>
<td><asp:Label ID="lblAmount" runat="server" Text="Total Amount : " CssClass="gridLabel1Style" /></td>
<td><asp:Label ID="ltAmount" runat="server" Text='<% #Eval("TOTAL_AMOUNT", "{0:0.00}") %>' CssClass="gridLadel2Style" /></td>
</tr>
</table> 
</ItemTemplate>
<EditItemTemplate>
<asp:TextBox ID="txtInvDate" runat="server" CssClass="tcal csssmalltextbox" ToolTip="MM/DD/YYYY" />
</EditItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="Actions" ItemStyle-CssClass="gridColumnStyle2">
<ItemTemplate>

<asp:Button ID="updateBtn" runat="server" CommandName="select" Text="Update" onclientclick="pageLoad()" />

</ItemTemplate>
<EditItemTemplate>
<asp:LinkButton ID="btnupdate" runat="server" CommandName="Update" Text="Update" Width="70px" CssClass="updateBtn" />

</EditItemTemplate>
</asp:TemplateField> 
</Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:51:43.633

只需在具有 ID **updateBtn**的更新按钮上添加一个类名，然后尝试此代码

```
<script type="text/javascript">
        $(document).ready(function () {
            $(".updateBtn").click(function (e) {

                var Client = $(this).closest('tr').find("span[id*=lblClientName]").text();
                var Date = $(this).closest('tr').find("span[id*=ltDate]").text();
                alert(Client);
                e.preventDefault();
            });
        });
    </script> 
```

如果您需要任何进一步的解释，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:12:48.877

基本上我会做的是：`<br/>` 1\. 在 asp:LinkBut​​ton 模板中添加一个 onlclick 处理程序来调用 Javascript 函数

```
 <% #Eval("FN_TRANSACTION_PK")%>' /> as a parameter.<br/> 
```

1.  在该函数中，使用 jquery 迭代所有表格单元格并检索它们的值。

2.  将值映射到 json 对象或类似的东西。

3.  将其发送到服务器。`<br/>`

这应该足以让你继续前进，我很抱歉 - 我知道一些代码会有所帮助，但我没有时间 atm 来写它。`<br/>` 如果您有任何问题，请告诉我。

# php - 使用 HandlerSockets 时，我可以指定要从查询中接收哪些字段吗？

> ID：14497726
> 
> 赞同：1
> 
> 时间：2013-01-24T09:19:03.670
> 
> 标签：php, mysql, nosql, handlersocket

[使用HandlerSockets](https://github.com/DeNADev/HandlerSocket-Plugin-for-MySQL)时，我可以指定要从查询中接收哪些字段吗？

这是我的示例表

```
CREATE TABLE pushed_media
(
    user_id BINARY(12) NOT NULL,
    story_id BINARY(12) NOT NULL,
    sent_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    PRIMARY KEY ( user_id, story_id )
); 
```

查询它的PHP代码如下

```
$hs = new HandlerSocket($host, $port);
if (!($hs->openIndex(1, $dbname, $table, HandlerSocket::PRIMARY, 'user_id,story_id,sent_date')))
{
    echo $hs->getError(), PHP_EOL;
    die();
}

$user_id = pack('H*', substr(md5('ruslan'), 0, 24));
$story_id = pack('H*', substr(md5('story1'), 0, 24));

$retval = $hs->executeSingle(1, '=', array($user_id, $story_id), 1, 0); 
```

我所需要的只是`sent_date`因为我已经知道另外两个价值观。是否可以不再通过网络传输它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T20:42:38.903

[您可以通过简单地在openIndex](https://code.google.com/p/php-handlersocket/wiki/HandlerSocketOpenIndex)方法的`field`参数中指定要从查询中接收的字段来指定它们。 正如您可以[在此处](http://code.google.com/p/php-handlersocket/wiki/HandlerSocketExecuteSingle)阅读的，此代码：

```
<?php
$hs->openIndex(1, 'db', 'table', 'PRIMARY', 'k,v');
$ret = $hs->executeSingle(1, '>=', array('K1'));
var_dump($ret);
?> 
```

相当于下面的 SQL 语句：

```
SELECT k,v FROM table WHERE k >= 'K1' LIMIT 1 
```

回到您的示例，如果您只想读取`sent_date`字段值：

```
$hs = new HandlerSocket($host, $port);
if (!$hs->openIndex(1, $dbname, $table, myHandlerSocket::PRIMARY, 'sent_date')) {
    die($hs->getError());
}

$user_id  = pack('H*', substr(md5('ruslan'), 0, 24));
$story_id = pack('H*', substr(md5('story1'), 0, 24));

$retval = $hs->executeSingle(1, '=', array($user_id, $story_id), 1, 0);
die("<pre>".print_r($retval,true)."</pre>"); 
```

结果输出应该是这样的：

```
Array
(
    [0] => 0
    [1] => 1
    [2] => 2013-02-01 22:18:39
) 
```

[HandlerSocket 协议文档](https://github.com/DeNADev/HandlerSocket-Plugin-for-MySQL/blob/master/docs-en/protocol.en.txt)指出：

> 一旦发出“open_index”请求，HandlerSocket 插件就会打开指定的索引并保持打开状态，直到客户端连接关闭。每个打开的索引由 <indexid> 标识。如果 <indexid> 已经打开，则关闭旧的打开索引。**您可以多次打开 <dbname> <tablename> <indexname> 的相同组合，可能使用不同的 <columns>。**为提高效率，请尽可能保持 <indexid> 小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:54:59.050

怎么样`executeMulti`？

```
$retval = $hs->executeMulti(array(
  array(1, '=', array($user_id), 1, 0),
  array(2, '=', array($story_id), 1, 0),
)); 
```

# mysql - 在 mysql 中创建一个可搜索的卷

> ID：14497728
> 
> 赞同：0
> 
> 时间：2013-01-24T09:19:09.997
> 
> 标签：mysql, linux, unix, find

我需要将 Volume 的内容放入 mysql 数据库中，以便通过 Web 界面进行搜索。

要获取所有文件/文件夹，我可以这样做：

```
$ cd /Volumes/myVolume
$ find ./ 
```

这会给我所有我需要知道的。

如果我的 mysql 表只有一个名为 的列`path`，那么在有 1M+ 路径的情况下，将所有路径写入表的最有效方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:41:35.130

将上述脚本的输出通过管道传输到一个文件，然后导入该文件。

运行以下命令：

```
find ./ > directorylisting.txt 
```

打开文件并查看如何使用许多可用的导入功能之一将其导入 MySQL。对您的问题的评论中提到的链接 daniph 有一些链接。您可以使用 mysqlimport 或`LOAD DATA INFILE`语句将此文件加载到表中。正确索引它，您应该远离。

# javascript - javascript将数组复制到另一个

> ID：14497730
> 
> 赞同：0
> 
> 时间：2013-01-24T09:19:19.170
> 
> 标签：javascript

我有以下代码片段，其中 for 循环内部没有分配要包含的值，这是将数组复制到其他的正确方法吗？？

就像这里

```
 var groupCondition = "ALL-OF-THEM&ALL-OF-THEM&ALL-OF-THEM&ALL-OF-THEM&";
  var groupParam =    "rsTxTraceMsgAside&rsExpTraceMsgAside&rsTxTraceMsgBside&rsExpTraceMsgBside&#hp1TxTraceMsg&hp1ExpTraceMsg&#";

  var grpNameArr = groupParam.split("#");
  var groupcn= groupCondition.split("&");
  var m=grpNameArr.length;

var contain=new Array();
var cmds=new Array();
var ii;

for(ii=0;ii<(m-1);ii++)
{
   contain[ii] = groupCn[ii];
   cmds[ii] = grpNameArr[ii];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:22:04.647

如果要克隆数组，可以使用本页中提到的 slice() 方法：

[http://www.hardcode.nl/subcategory_1/article_414-copy-or-clone-javascript-array-object](http://www.hardcode.nl/subcategory_1/article_414-copy-or-clone-javascript-array-object)

```
var oldArray = ["mip", "map", "mop"];
var newArray = oldArray.slice(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:23:15.723

你的数组声明是错误的，应该是这样的： -

```
var groupcn=["All","All","All","All"]; 
var grpNameArr=["abc","def","ghi"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:23:47.347

So, after your edit, I see your problem was that you has some typo's in your variable names.

Replace:

```
var grpNameArr = groupParm.split("#");
var groupcn= groupCondtn.split("&"); 
```

With:

```
var grpNameArr = groupParam.split("#");
//                      ^ Missing `a` and `r`.
var groupCn= groupCondition.split("&");
//       ^ Capital C  ^ Missing `i`'s and `o`. 
```

* * *

**Old Answer**

These 2 lines:

```
var groupcn = All,All,All,All; 
var grpNameArr = abc,def,ghi; 
```

Are probably your problem.

What you're doing there is assigning the variable `All` to a new variable `groupcn`, then declaring `All` as a new variable, 3 times.

```
var groupcn=All,
    All, // new variable with the name `All`
    All, // new variable with the name `All`
    All; // new variable with the name `All`. These 3 override `All` 
```

You'll need to initialize them like this:

```
var groupcn = [All,All,All,All]; 
var grpNameArr = [abc,def,ghi]; 
```

Other than that, assuming `m` is the length of `groupcn`, the code should work.

However, a shorter solution is to copy the arrays like this:

```
var contain = groupcn.slice();
var cmds = grpNameArr.slice(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:23:56.813

you can use :

```
var contain=groupcn.concat();
var cmds=grpNameArray.concat(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T09:30:32.237

代码中有以下错误

1.  对两个数组使用一个循环。由于长度不同，应该使用两个不同的循环。

2.  groupcn 变量中存在拼写错误。

检查此代码

```
<!DOCTYPE html>
<html>
<script>
function chk()
{
  var groupCondition = "ALL-OF-THEM&ALL-OF-THEM&ALL-OF-THEM&ALL-OF-THEM&";
  var groupParam =    "rsTxTraceMsgAside&rsExpTraceMsgAside&rsTxTraceMsgBside&rsExpTraceMsgBside&#hp1TxTraceMsg&hp1ExpTraceMsg&#";

var grpNameArr = groupParam.split("#");
var groupcn= groupCondition.split("&");

var contain=new Array();
var cmds=new Array();
var ii;

for(ii=0;ii<(groupcn.length-1);ii++)
contain[ii] = groupcn[ii];

for(ii=0;ii<(grpNameArr.length-1);ii++)
cmds[ii] = grpNameArr[ii];

alert("groupcn   =  "+contain);
alert("grpNameArr   =  "+cmds);
}
</script>
<body onload="chk()">

</body> 
```

# android - 在android map v2中单击后不要捕捉到标记

> ID：14497734
> 
> 赞同：27
> 
> 时间：2013-01-24T09:19:43.210
> 
> 标签：android, google-maps, android-mapview, android-maps-v2

当前，Android Map v2 在单击后会捕捉到标记位置。我想禁用此行为，但看不到执行此操作的选项。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-24T16:38:51.900

根据我从 Markers 中读到的内容 - Google Maps Android API ( [https://developers.google.com/maps/documentation/android/marker#marker_click_events](https://developers.google.com/maps/documentation/android/marker#marker_click_events) )

> 标记点击事件
> 
> 您可以使用 OnMarkerClickListener 来侦听标记上的点击事件。要在地图上设置此侦听器，请调用 GoogleMap.setOnMarkerClickListener(OnMarkerClickListener)。当用户单击标记时，将调用 onMarkerClick(Marker) 并将标记作为参数传递。此方法返回一个布尔值，指示您是否已使用该事件（即，您想要抑制默认行为）。如果它返回 false，那么除了您的自定义行为之外，还将发生默认行为。标记单击事件的默认行为是显示其信息窗口（如果可用）并移动相机以使标记位于地图的中心。

您可能会覆盖此方法并让它仅打开标记并返回 true 以使用事件。

```
// Since we are consuming the event this is necessary to
// manage closing opened markers before opening new ones
Marker lastOpened = null;

mMap.setOnMarkerClickListener(new OnMarkerClickListener() {
    public boolean onMarkerClick(Marker marker) {
        // Check if there is an open info window
        if (lastOpened != null) {
            // Close the info window
            lastOpened.hideInfoWindow();

            // Is the marker the same marker that was already open
            if (lastOpened.equals(marker)) {
                // Nullify the lastOpened object
                lastOpened = null;
                // Return so that the info window isn't opened again
                return true;
            } 
        }

        // Open the info window for the marker
        marker.showInfoWindow();
        // Re-assign the last opened such that we can close it later
        lastOpened = marker;

        // Event was handled by our code do not launch default behaviour.
        return true;
    }
}); 
```

这是未经测试的代码，但这可能是一个可行的解决方案。

谢谢， 曼

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T12:22:08.033

看来我们应该能够执行以下操作，但是由于[这个错误](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5408)，它不起作用，因为`marker.isInfoWindowShown()`总是返回 false：

```
mMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
    public boolean onMarkerClick(Marker marker) {
        if (marker.isInfoWindowShown()) {
            marker.hideInfoWindow();
        } else {
            marker.showInfoWindow();
        }
        return true;
    }
}); 
```

但是，以下具有相同的效果并且确实有效：

```
mMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {

    Marker currentShown;

    public boolean onMarkerClick(Marker marker) {
        if (marker.equals(currentShown)) {
            marker.hideInfoWindow();
            currentShown = null;
        } else {
            marker.showInfoWindow();
            currentShown = marker;
        }
        return true;
    }
}); 
```

因为一次只显示一个信息窗口（如[Google Maps API v2 开发人员指南](https://developers.google.com/maps/documentation/android/infowindows)中所述），我们只需要在单击其信息窗口当前打开的标记时隐藏信息窗口。

# c# - 带有 xAxes 的字符串值的 DataBindXY 为点集合中的 x 提供 0

> ID：14497735
> 
> 赞同：1
> 
> 时间：2013-01-24T09:19:45.780
> 
> 标签：c#, asp.net, charts, series

我用 12 个字符串填充一个列表作为选定时间跨度的时间线

```
List<string> xValues = new List<string> 
{
  "Jan 2012", "Feb 2012", "Apr 2012", "Mai 2012", "Jun 2012", "Jul 2012", "Aug 2012",     "Sep 2012", "Okt 2012", "Nov 2012", "Dez 2012"
};

List<int> yValues = new List<int>();
foreach (string item in xValues )
{
    yValues.Add(0);
} 
```

并填写一个系列

```
mySeries.Points.DataBindXY(xValues, yValues); 
```

然后我创建了另一个系列，其中包含：

xvalue/yvalue：x =“2012 年 8 月”，y = 2 x =“2012 年 9 月”，y = 1

并将两个系列添加到 Chart.Series 集合。

现在我的问题。两个系列的点都没有月份字符串作为 x 值。他们都是0。

点调试器向我显示：

```
{X=0; Y=2}
{X=0; Y=1} 
```

而不是我想要的：

```
{X="Aug 2012"; Y=2}
{X="Sep 2012"; Y=1} 
```

这是一张图片：[http ://www.imagebanana.com/view/jxyt4pxz/Unbenannt1.jpg](http://www.imagebanana.com/view/jxyt4pxz/Unbenannt1.jpg)

0's 不要让图表在 2012 年 8 月开始，他从 2012 年 1 月开始，因为该系列在 xValues 之间没有分配。

我希望你能理解我的问题。怎么了？如何在 xAxes 的字符串值之间分配分配？

# php - php脚本根本没有执行

> ID：14497739
> 
> 赞同：0
> 
> 时间：2013-01-24T09:20:04.813
> 
> 标签：php, arrays, image, for-loop

我在使用 php 脚本时遇到了一些问题，该脚本应该将一些生成的图像放在不同的文件夹中，而它只是没有被执行。我从运行脚本中没有得到任何响应，并且对于之前的一些更改来说它工作得很好。

```
<?php
    echo "hej";
    $classarray = array("Lk10", "Lk11", "Lk12a", "Lk12b", "Mb10a", "Mb10b", "Mb11a", "Mb11b", "Mb12a", "Mb12b", "MbV12", "Mst10", "Mt10", "Mt12", "MtE11", "MtS11");
    foreach ($classarray as $value)
    {
        echo $value . "<br>";
        if (!mkdir($value))
        {
            echo "error";
        }
    }
    $ind = 0;
    for ($t = 0; $t < count($t); $t++)
    {
        for ($i = 1; $i <= 5; $i++)
        {
            $vecka = $i;
            $schemaadressarray = array("http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={FDCE3A18-B5F6-45F4-B9B2-EA9171290F71}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={9407F354-F253-4289-861B-F1F6A1C37932}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={630EE8B5-18EE-42FF-ABB1-0F58725208FE}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={1410A36C-2731-4F2A-A635-C705367A076C}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={1F546257-A731-4A50-BF1F-D6D43A360F73}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={408ADF22-E6A3-4DDD-AD16-476B41F91A3A}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={E5FA8180-F4BB-4405-9201-17E99BB566F4}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={30650758-86A5-4D31-8E06-8DF98B032964}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={27787EAA-583A-4D58-BA7F-61BF646C2231}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={A126BC26-7000-4580-826B-328A96E6B156}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={6A504AB9-F851-4EBF-A4AC-5720B4956FDD}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={F81C9984-4565-4F2B-9F7C-EBCD3805397A}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={F7785411-BF36-430F-ABF1-AE456D174CDB}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={76B2F681-AE2E-4754-9609-47672369D58C}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={0B676B2D-9158-4FB4-9702-9F30FD78432F}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874", "http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={1CF5E0E8-F7E9-4C1B-BA8E-3B6B1FA9AC28}&period=&week=" . $vecka . "&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=1883&height=874&maxwidth=1883&maxheight=874");
            $path = $classarray[$currentIndex] . "/schema{$i}.png";
            file_put_contents($path, file_get_contents($schemaadressarray[$t)));
        }
        $currentIndex++;
        $ind++;
    }
?> 
```

如果有人能够查明阻止此脚本执行的错误，我将不胜感激！

此致

自由宁静

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:33:25.113

```
file_put_contents($path, file_get_contents($schemaadressarray[$t])); 
```

You were missing that **]** and had a **)** instead.

Edit:

This was the wrong part:

```
file_put_contents($path, file_get_contents($schemaadressarray[$t))); 
```

# c - 用winsock发送结构

> ID：14497741
> 
> 赞同：1
> 
> 时间：2013-01-24T09:20:13.247
> 
> 标签：c, struct, client-server, winsock

我尝试将结构从客户端发送到服务器。我在互联网上读到我必须将结构类型转换为 char 数组，但是当我尝试这个时，char 没有内容。

这是我的结构：

```
struct packet
{
    int pa_ID;
    char message[MESSAGESIZE];
}; 
```

在这里我尝试发送结构：

```
int sendFile(FILE *file, SOCKET sock)
{
int amountToSend, amountSent;
int i = 0;
char buffer[BUFFERSIZE], serializedPacket[BUFFERSIZE];

while (!feof(file)) {
    struct packet p;
    fgets(p.message, MESSAGESIZE, file);
    p.pa_ID = i;

    if (p.message[strlen(p.message) - 1] == '\n')
        p.message[strlen(p.message) - 1] = '\0';

    amountToSend = sprintf_s(serializedPacket, sizeof(buffer), (char*)&p);
    amountSent = send(sock, serializedPacket, amountToSend, 0);
    if (amountSent == SOCKET_ERROR) {
        fprintf(stderr, "send() failed with error %d\n", WSAGetLastError());
        getchar();
        WSACleanup();
        return -1;
    }
    printf("Send %d bytes (out of %d bytes) of data: [%.*s]\n", amountSent, amountToSend, amountToSend, serializedPacket);
    memset(buffer, 0, sizeof(buffer));
    memset(p.message, 0, sizeof(p.message));
    memset(&p, 0, sizeof(p));
    i++;
}

fclose(file);
return 0; 
```

}

从文件中读取功能没有错误，但是 serializedPack 只是空的，我真的不明白为什么。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:29:32.527

这：

```
amountToSend = sprintf_s(serializedPacket, sizeof(buffer), (char*)&p); 
```

根本没有任何意义。

to的第三个参数[`sprintf_s()`](http://msdn.microsoft.com/en-us/library/ce3zzk1k%28v=vs.80%29.aspx)是一个格式化字符串，但是你将一个指针传递给一个结构，重新转换为一个字符指针。这完全没有意义。

将您的结构表示为文本字符串（序列化为字符串）可能是一个好主意，但是您需要一个正确的格式化字符串：

```
amountToSend = sprintf_s(serializedPacket, sizeof(buffer), "%d %s", p.pa_ID, p.message); 
```

Depending on how you send this, you might also want to include the 0-terminator for the string in the transmitted data.

# java - 请检查这个在我的 android 中不起作用的 xpath

> ID：14497749
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:20:40.663
> 
> 标签：java, android, xpath

我使用 eclipse，我想挑选节点 mytag 文本。我应该怎么做才能得到它？我有以下代码：

```
 XPath xpath = XPathFactory.newInstance().newXPath();
            String expression = "/outertag/innertag/mytag/text()";
            InputSource inputSource = new InputSource("http://www.anddev.org/images/tut/basic/parsingxml/example.xml");
            NodeList nodes = null;
            try {
                nodes = (NodeList) xpath.evaluate(expression, inputSource, XPathConstants.NODESET);
            } catch (XPathExpressionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            int i=nodes.getLength(); 
```

我参考的资料是[http://www.w3schools.com/xpath/xpath_examples.asp](http://www.w3schools.com/xpath/xpath_examples.asp) 现在我check in debug的时候，给nodes的内容很复杂，但是没有一个是mytag text --anddev.org rulez 为了把这个拿出来，我该怎么办？谢谢！

该网站中的 xml 文件（URL 参数）：

```
<?xml version="1.0"?>
<outertag>
    <innertag sampleattribute="innertagAttribute">
        <mytag>
            anddev.org rulez =)
        </mytag>
        <tagwithnumber thenumber="1337"/>
    </innertag>
</outertag> 
```

结果 i 为 1。但节点不提供任何文本字符串。这是一个以 m 开头的“描述”列表。我想要的只是把那个文本拿出来。因为我真正需要解析的是一个内部网站，那是一个巨大的表格。我需要根据每个类别存储该表中的数据。例如，一个文件包含名称和数学分数，另一个包含名称和物理。

```
<TABLE border="2" frame="hsides" rules="groups"
          summary="Code page support in different versions
                   of MS Windows.">
<CAPTION>CODE-PAGE SUPPORT IN MICROSOFT WINDOWS</CAPTION>
<COLGROUP align="center">
<COLGROUP align="left">
<COLGROUP align="center" span="2">
<COLGROUP align="center" span="3">
<THEAD valign="top">
<TR>
<TH>Code-Page<BR>ID
<TH>Name
<TH>ACP
<TH>OEMCP
<TH>Windows<BR>NT 3.1
<TH>Windows<BR>NT 3.51
<TH>Windows<BR>95
<TBODY>
<TR><TD>1200<TD>Unicode (BMP of ISO/IEC-10646)<TD><TD><TD>X<TD>X<TD>*
<TR><TD>1250<TD>Windows 3.1 Eastern European<TD>X<TD><TD>X<TD>X<TD>X
<TR><TD>1251<TD>Windows 3.1 Cyrillic<TD>X<TD><TD>X<TD>X<TD>X
<TR><TD>1252<TD>Windows 3.1 US (ANSI)<TD>X<TD><TD>X<TD>X<TD>X
<TR><TD>1253<TD>Windows 3.1 Greek<TD>X<TD><TD>X<TD>X<TD>X
<TR><TD>1254<TD>Windows 3.1 Turkish<TD>X<TD><TD>X<TD>X<TD>X
<TR><TD>1255<TD>Hebrew<TD>X<TD><TD><TD><TD>X
<TR><TD>1256<TD>Arabic<TD>X<TD><TD><TD><TD>X
<TR><TD>1257<TD>Baltic<TD>X<TD><TD><TD><TD>X
<TR><TD>1361<TD>Korean (Johab)<TD>X<TD><TD><TD>**<TD>X
<TBODY>
<TR><TD>437<TD>MS-DOS United States<TD><TD>X<TD>X<TD>X<TD>X
<TR><TD>708<TD>Arabic (ASMO 708)<TD><TD>X<TD><TD><TD>X
<TR><TD>709<TD>Arabic (ASMO 449+, BCON V4)<TD><TD>X<TD><TD><TD>X
<TR><TD>710<TD>Arabic (Transparent Arabic)<TD><TD>X<TD><TD><TD>X
<TR><TD>720<TD>Arabic (Transparent ASMO)<TD><TD>X<TD><TD><TD>X
</TABLE> 
```

和之后的所有内容，所以我认为它必须是 nodeList 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:04:54.313

`evaluate`

可以返回不同的对象，因为您的 XPath 可以返回需要表示为不同对象的文档的不同部分。您正在调用的评估版本返回一个 NodeList，如果您知道您将获得文本（您的 XPath 建议您这样做），这可能是矫枉过正。

相反，您可以调用更简单的：

```
String evaluate(java.lang.String expression, InputSource source) 
```

例如：

```
String myTagText = "";
try {
    myTagText = xpath.evaluate(expression, inputSource);
} catch (XPathExpressionException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
System.out.println(myTagText); 
```

# linux - 触摸文件设置它在将来修改

> ID：14497761
> 
> 赞同：2
> 
> 时间：2013-01-24T09:21:26.057
> 
> 标签：linux

我有一个问题，当我编辑文件时，它的修改时间戳设置为将来的时间

**问题说明：**

```
$ make
make: Nothing to be done for `all'.
$ touch makefile
$ make
make: Warning: File `makefile' has modification time 19 s in the future
make: Nothing to be done for `all'.
make: warning:  Clock skew detected.  Your build may be incomplete. 
```

如果我编辑文件会发生同样的事情（即：这不是唯一的问题`touch`）

**更多细节：**

```
$ date
Thu Jan 24 20:18:19 EST 2013
$ ls -l
total 24
-rw-rw-r--. 1 steve steve 13907 Jan 24 20:18 makefile
-rw-rw-r--. 1 steve steve    23 Jan 24 19:54 modules.mk
drwxrwxr-x. 3 steve steve  4096 Jan 24 19:54 test
$ touch makefile 
$ ls -l
total 24
-rw-rw-r--. 1 steve steve 13907 Jan 24  2013 makefile       <-- in the future!
-rw-rw-r--. 1 steve steve    23 Jan 24 19:54 modules.mk
drwxrwxr-x. 3 steve steve  4096 Jan 24 19:54 test
$ ls -l
total 24
-rw-rw-r--. 1 steve steve 13907 Jan 24 20:18 makefile
-rw-rw-r--. 1 steve steve    23 Jan 24 19:54 modules.mk
drwxrwxr-x. 3 steve steve  4096 Jan 24 19:54 test
$ date
Thu Jan 24 20:18:48 EST 2013 
```

如何编辑文件并将其修改时间设置为现在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:38:20.950

很久以前我在使用 NFS 时遇到了同样的问题。它把我逼疯了！存储文件的主机和我自己的计算机没有及时同步。我不得不要求系统管理员安装 NTP。

# html - 使用 Node.js 提供 HTML 并模板化到 HTML 网站

> ID：14497764
> 
> 赞同：1
> 
> 时间：2013-01-24T09:21:30.513
> 
> 标签：html, node.js, express, pug

我使用 Node.js 创建了一个主菜单（导航）。我在 express 下使用 Jade 作为模板引擎。菜单是用纯 HTML 和 CSS 创建的。

Node.js 旨在通过 URL 提供菜单。我想将此菜单*包含*到现有的 Web 应用程序中，它应该由 Node.js 提供。我在我的**website.html**中考虑了以下内容：

```
<body>
  <!-- begin: include main menu -->
  <script type="text/javascript" src="http://127.0.0.1:3000/menu"></script>
  <!-- end: include main menu -->
  the rest of the application/website
  ...
</body> 
```

我让它在我的路由机制中使用以下代码将一些 HTML 传递到我的网站，但我认为这真的很脏：

```
res.send("document.write('SOME_HTML_GOES_HERE')"); 
```

但我需要将 views/menu.jade 作为 HTML 片段传递回**website.html**。我已经返回了整个 HTML 网站：

```
res.render('index', { title: 'Express & Jade' }); 
```

我如何才能在 Node 使用模板机制交付的非 Node.js 应用程序中加载菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:03:37.997

您应该使用 iframe 来包含 node.js 菜单。您可以包含由 Express 和 Jade 呈现的 HTML：

```
<iframe src="http://127.0.0.1:3000/menu"></iframe> 
```

话虽如此，我认为您应该尝试从端口 80 为您的所有网站提供服务。许多用户无法访问端口 3000。

如果您在 node.js（端口 3000）和 Apache（端口 80）上托管您的网站，您应该尝试在它们前面部署一个代理。我使用[HAProxy](http://haproxy.1wt.eu/)来做到这一点。就我而言，代理在端口 80 上运行，Apache 在 8000 上运行，node.js 在 3000 上运行。我有简单的规则将请求重定向到 node.js 或 Apache。

# numpy - 同步两个数组的矢量化方法

> ID：14497777
> 
> 赞同：3
> 
> 时间：2013-01-24T09:22:11.673
> 
> 标签：numpy, pandas, vectorization

我有两个 Pandas TimeSeries:`x`和`y`，我想“从”同步。我想找到它之前`x`的最新（按索引）元素中的每个元素`y`（按索引值）。例如，我想计算这个`new_x`：

```
x       new_x
----    -----
13:01   13:00  
14:02   14:00

y
----
13:00
13:01
13:30
14:00 
```

我正在寻找矢量化解决方案，而不是 Python 循环。时间值基于 Numpy `datetime64`。数组的`y`长度约为数百万，因此 O(n^2) 解决方案可能不实用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:34:03.850

在某些圈子中，此操作称为“asof”连接。[这是一个实现](https://gist.github.com/3686236)：

```
def diffCols(df1, df2):
    """ Find columns in df1 not present in df2
    Return df1.columns  - df2.columns maintaining the order which the resulting
    columns appears in df1.

    Parameters:
    ----------
    df1 : pandas dataframe object
    df2 : pandas dataframe objct
    Pandas already offers df1.columns - df2.columns, but unfortunately
    the original order of the resulting columns is not maintained.
    """
    return [i for i in df1.columns if i not in df2.columns]

def aj(df1, df2, overwriteColumns=True, inplace=False):
    """ KDB+ like asof join.
    Finds prevailing values of df2 asof df1's index. The resulting dataframe
    will have same number of rows as df1.

    Parameters
    ----------
    df1 : Pandas dataframe
    df2 : Pandas dataframe
    overwriteColumns : boolean, default True
         The columns of df2 will overwrite the columns of df1 if they have the same
         name unless overwriteColumns is set to False. In that case, this function
         will only join columns of df2 which are not present in df1.
    inplace : boolean, default False.
        If True, adds columns of df2 to df1\. Otherwise, create a new dataframe with
        columns of both df1 and df2.

    *Assumes both df1 and df2 have datetime64 index. """
    joiner = lambda x : x.asof(df1.index)
    if not overwriteColumns:
        # Get columns of df2 not present in df1
        cols = diffCols(df2, df1)
        if len(cols) > 0:
            df2 = df2.ix[:,cols]
    result = df2.apply(joiner)
    if inplace:
        for i in result.columns:
            df1[i] = result[i]
        return df1
    else:
        return result 
```

在内部，这使用[`pandas.Series.asof()`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.asof.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:08:42.303

如何使用`Series.searchsorted()`返回`y`插入位置的索引`x`。然后，您可以从该值中减去一个并将其用于索引`y`。

```
In [1]: x
Out[1]:
0    1301
1    1402

In [2]: y
Out[2]:
0    1300
1    1301
2    1330
3    1400

In [3]: y[y.searchsorted(x)-1]
Out[3]:
0    1300
3    1400 
```

*注意：以上示例使用 int64 系列*

# php - PHP：如果数据文本包含“，”创建csv文件，数据将被分成几部分并放在其他列中？

> ID：14497779
> 
> 赞同：1
> 
> 时间：2013-01-24T09:22:12.933
> 
> 标签：php, csv

我在创建 csv 文件时遇到了问题，因为如果我的数据包含`,`它，它将被拆分为多个部分并将其放入其他列中，从而破坏我的 csv 文件。

这是示例输出：

[示例输出链接](http://img834.imageshack.us/img834/3034/39013281.png)

正如您所看到的，`TITLE`列中的第一行应该从其中`"Acer Aspire AS5250-0639 15.5" Laptop (1.65 GHz AMD Dual-Core Processor E-450, 4 GB RAM, 500 GB Hard Drive, DVD+/-RW Optical Drive, Windows 7 Home Premium 64-bit)"`开始的数据`4 GB RAM`被拆分并将其放在其他列中，因为在它之前`,`还有更多。

到目前为止，这是我的 PHP 脚本：

```
 <?php
include 'database.php';
$db = new database();

$data = $db->exportdatabase();

$out = '';
$out .= 'GSEQ,BRAND,TITLE,SIMAGE,SPRICE,WEIG,DIMENSIONS,ASIN,CATEGORYNAME,MODELNO';
$out .="\n";

foreach($data as $items){
    $out .=' '.$items['GSEQ'].', '.$items['BRAND'].', '.$items['TITLE'].', '.$items['SIMAGE'].', '.$items['SPRICE'].', '.$items['WEIG'].', '.$items['DIMENSIONS'].' 
    '.$items['ASIN'].', '.$items['CATEGORYNAME'].', '.$items['MODELNO'].'
    ';
    $out .="\n"; 
    //var_dump($items);
}

header('Content-Description: File Transfer');
header("Content-Type: application/csv") ;
header("Content-Disposition: attachment; filename=Data.csv");
header("Expires: 0");
echo $out;
exit;   
?> 
```

我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:28:44.127

对于初学者，我会停止尝试自己做一些 PHP 可以为您做的事情。使用 fputcsv 而不是自己做：http: [//php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)。此方法还处理转义分隔符（逗号）。

最重要的是......不要使用'，'作为你的csv分隔符。你可能最好使用'|' 作为分隔符，因为该字符不太常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:40:05.167

一种方法是使用引号 (") 包裹每个字段

另一种是使用 str_replace 将麻烦的“，”替换为另一个字符。

# html - 将 body 的高度设置为大于绝对 div 的高度

> ID：14497782
> 
> 赞同：1
> 
> 时间：2013-01-24T09:22:31.713
> 
> 标签：html, css

我有一个绝对 div 作为页面设计的主要内容区域。我有另一个 div 占据顶部，高度为 450px。在页面加载之前我无法知道绝对 div 的高度，所以只有在页面加载发生后才能找到它。

现在的问题是我的 body 也占据了 450px（高度），所以如果我想在绝对 div 结束后显示一些东西我无法这样做。

概括 ：

```
Absolute Div : 600px (for example, don't know the actual height) Has position:absolute.
Top Div : 450px (No position:absolute)
Body Becomes 450 px as expected 
```

**如何在绝对 div 下方放置一个 div。目前我唯一能想到的就是jQuery。**

这是我为说明问题而制作的一个[jsfiddle 。](http://jsfiddle.net/Zr3Zw/3/)即使整个 body 显示为蓝色，如果您启动开发人员工具并检查，您会看到 html 和 body 都占据

![体高更小](../Images/7d488d1f15b1ba8e1769066e49160fd9.png)

更新：[Linky](http://bit.ly/XyUSOp)我正在尝试在几个元素上方显示主要内容区域。你看到的那些圆圈是独立的元素。他们需要保持这种状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:45:52.860

我认为你需要更多地了解这些职位！无论如何，如果您将位置更改为相对，您所指的当前问题将得到解决！

```
<div id="First Div" style="height:100px;width:50px;position:relative;background-color:green;">
</div>
<div id="BelowDiv" style="height:100px;width:50px;position:relative;background-color:pink;">
</div> 
```

但是如果你真的需要把它放在静态的地方，或者换句话说“绝对”，那么你需要放置一个容器 div 并将位置设置为绝对，然后将其他两个甚至更多或者放在容器 div 内。

```
<div id="container" style="position:absolute; top:y; left:x">
     <div id="FirstDiv" style="position:relative;></div>
     <div id="SecondDiv" style="position:relative;></div>
</div> 
```

您可以使用 jquery 将标签附加到您的容器中。[这是执行此操作的示例链接！](https://stackoverflow.com/questions/7911916/jquery-append-div-inside-div-with-id-and-manipulate)

如果它没有帮助尝试`height:auto`and 还`overflow:visible`为您的容器！

# log4j - log4j.properties 与 log4j.xml

> ID：14497787
> 
> 赞同：41
> 
> 时间：2013-01-24T09:22:47.767
> 
> 标签：log4j

我被要求从属性样式配置转移到 xml 样式。这个过程本身很简单，并没有给我带来任何麻烦，我只是好奇为什么我会被问到这个问题并寻找原因。我发现这篇不错的帖子[为什么选择 XML 而不是 Log4J 配置的属性文件？](https://stackoverflow.com/questions/1256835/why-chose-xml-over-properties-files-for-log4j-configuration)（超过 3 岁，但仍然是我能找到的最丰富的信息），它指向[这个更古老的教程](http://www.laliluna.de/articles/posts/log4j-tutorial.html)。他们说

> 属性可以由属性文件或 XML 文件定义。
> 
> Log4j 查找名为 log4j.xml 的文件，然后查找名为 log4j.properties 的文件。两者都必须放在 src 文件夹中。

我检查了它，与声明相反，发现 Log4j 首先查找属性文件，然后第二次查找 xml。实际上，如果我将两者保存在同一个文件夹中，则输出将根据属性文件进行格式化。那么，我是否误解了该声明？是不是完全错了？我在 log4j **1.2.17**上时已针对 log4j **1.2.14**发表声明，log4j 团队是否可能更改了优先级？我找不到任何相关文档，但这将是一个奇怪的趋势反转，因为 xml 看起来是配置 log4j 的首选方式

 *** * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-24T09:55:11.267

看看JavaDoc。[PropertyConfiguratorClass](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html) (log4j.properties)的文档指出

> PropertyConfigurator 不处理 DOMConfigurator 支持的高级配置功能，例如支持自定义 ErrorHandlers、嵌套 appender（如 AsyncAppender）等。

因此[DOMConfigurator](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/DOMConfigurator.html) (log4j.xml) 提供了高级选项。

[除此之外，您可以使用提供的log4j.dtd](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd)对 log4j.xml 文件进行（至少是简单的）有效性检查。

如果您不使用高级功能，则无需从属性更改为 xml 文件。

您真正应该考虑的是从 log4j 更改为[log4j 2 beta](http://logging.apache.org/log4j/2.x/)甚至 [slf4j](http://www.slf4j.org/)。log4j 的开发已经停止，它的创始人 (@Ceki) 发明了 slf4j。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-29T15:11:22.380

根据[FrVaBe 的回答](https://stackoverflow.com/a/14498385/5503404)，PropertyConfigurator 类不处理 XML 可以支持的高级功能。

值得注意的是更有用的高级选项之一（仅可用 log4j.xml）是使用 LevelMatchFilter 和 DenyAllFilter 过滤特定日志级别或日志级别范围的能力

一个很好的例子可以在[这里](http://wiki.apache.org/logging-log4j/LogToAppenderByLevel)看到。**

# r - 使用循环来制作动态数组结构，然后将其转换为静态数组

> ID：14497791
> 
> 赞同：1
> 
> 时间：2013-01-24T09:22:58.483
> 
> 标签：r

我想根据我选择的状态数动态参数化状态空间模型的数组。

我正在循环执行此操作-

```
Q <- function(params,states) {
qmat <- matrix(0,statespace,statespace)
for (i in 1:statespace)
  qmat[i,i] <- statshockvar(params[(i-1)*5+1], params[(i-1)*5+2], 
                            params[(i-1)*5+3],states[i])          
qmat            

} 
```

这个函数被调用了很多次，因为程序的重点是优化一个参数集。但是，此函数设置大大减慢了优化阶段，因为此函数和其他类似函数不断被调用，并且他们不断重新定义数组。

如何使用上述相关参数**动态地**定义一次我需要的数组，然后能够使用一组新参数调用矩阵函数进行优化？

谢谢！

编辑 -

`statespace`只是一个整数，描述模型中使用的状态数，比如 3/

```
statshockvar <- function(meanrev,longrun,sigma,sstate) {

longrun*sigma^2/(2*meanrev)*(1-exp(-longrun))^2+sigma^2/longrun*(exp(-longrun) - 
  exp(-2*longrun))*sstate

} 
```

`statshockvar`- 在这个特定示例中，是期限结构的 CIR 模型的离散化方差

编辑 2 -

参数看起来像这样 - 请注意这些只是任意数字

```
params = c(
0.3275,
0.07,
0.197,
0,
0.05,

0.01,
0.2,
0.3,
0,
0.05,

0.01,
0.1,
0.3,
0,
0.05) 
```

状态将是这样的 -

```
states = c(0.07,0.07,0.07) 
```

同样，这些状态是任意的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:08:11.550

这是一个解决方案：

```
Q <- function(params, states) {
  diag(mapply(function(y, z) statshockvar(y[1], y[2], y[3], z), 
              lapply(seq(statespace), function(x) params[(x-1)*5 + 1:3]), 
              states))
} 
```

使用示例参数进行测试：

```
Q(params, states)

            [,1]       [,2]        [,3]
[1,] 0.002465305 0.00000000 0.000000000
[2,] 0.000000000 0.03424762 0.000000000
[3,] 0.000000000 0.00000000 0.009499883 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:04:31.183

查看 for 循环，

```
for (i in 1:statespace)
  qmat[i,i] <- statshockvar(params[(i-1)*5+1], params[(i-1)*5+2], 
                            params[(i-1)*5+3],states[i]) 
```

如果`statshockvar`是矢量化的，你可以简单地写

```
diag(qmat) <- statshockvar(params[((1:statespace)-1)*5+1], params[((1:statespace)-1)*5+2], params[((1:statespace)-1)*5+3], states[1:statespace]) 
```

如果不是，请参阅`?Vectorize`使其如此

# javascript - javascript正则表达式匹配单个单词

> ID：14497797
> 
> 赞同：0
> 
> 时间：2013-01-24T09:23:21.137
> 
> 标签：javascript, regex

```
 if (searchText.length > 3) {
   regex = new RegExp("(\\W)" + searchText, 'gi');
  }
  else {
   regex = new RegExp("(\\W)\b" + searchText + '\b', 'gi');}
  } 
```

显然，我把这个包装错了，但是如果我想在搜索词是 1、2 或 3 个字符时只匹配整个单词，那么正确的语法是什么？

例如，“do”与“DOne”中的 do 不匹配，但“heat”与“HEATed”中的 heat 匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:37:00.363

尝试这个..

```
if (searchText.length > 3) 
{
   regex = new RegExp(searchText, 'gi');
}
else 
{
   regex = new RegExp('\b' + searchText + '\b', 'gi');}
} 
```

`\W`以前不需要`\b`

# android - 异步任务时显示加载屏幕

> ID：14497799
> 
> 赞同：0
> 
> 时间：2013-01-24T09:23:25.737
> 
> 标签：android, android-asynctask

我有这个调用 Web 服务并解析 xml 的异步任务

```
@Override
protected void onPreExecute(){
super.onPreExecute();
time = System.currentTimeMillis();
}
 protected Boolean doInBackground(Integer... params) {
  //code 
 }

protected void onPostExecute(Boolean result) {
super.onPostExecute(result);
    difftime = System.currentTimeMillis() - time;
 } 
```

在执行异步任务时，我想显示一个加载屏幕，但是如果我这样做，加载屏幕会在异步任务完成之前完成

```
 super.onCreate(savedInstanceState);
        setContentView(R.layout.loading_screen);

            final CallWebService callTarif = new CallWebService(6,sett.getDeviceId());
            callTarif.execute();

new Handler().postDelayed(new Runnable(){ 
        @Override 
            public void run() { 

                LoadingScreen.this.finish(); 
                Intent intent = new Intent(LoadingScreen.this, NextActivity.class);
                                    startActivity(intent);            
            } 

        }
        },callTarif.difftime); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:26:23.913

实际上`postDelayed`是在完成**AsyncTask**之前调用。

只需将这些代码行

```
LoadingScreen.this.finish(); 
Intent intent = new Intent(LoadingScreen.this, NextActivity.class);
startActivity(intent); 
```

在`opPostExecute()`AsyncTask 中。

```
protected void onPostExecute(Boolean result) {
super.onPostExecute(result);

    difftime = System.currentTimeMillis() - time;
    LoadingScreen.this.finish(); 
    Intent intent = new Intent(LoadingScreen.this, NextActivity.class);
    startActivity(intent);      
} 
```

并删除**处理程序** `new Handler().postDelayed(new Runnable(){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:27:50.460

start your loading screen onPreExecute method and kill it onPostExecute method of the async task

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:29:06.163

使用异步任务访问 web 服务时无需使用 Handler 来显示加载。使用`onPreExecute()`AsyncTask 的方法来显示加载屏幕并在里面完成它，`onPostExecute`因为该方法在`doInBackground`执行完成时调用。将代码代码更改为：

```
 @Override
      protected void onPreExecute() {
            // show loading bar here
      }
@Override
      protected String doInBackground(String... params) {
                 // do network operation here
            return null;
      }      

      @Override
      protected void onPostExecute(String result) {      
          // dismiss loading bar here         
      } 
```

# asp.net - 替代 ASP.Net 中的进度条

> ID：14497802
> 
> 赞同：0
> 
> 时间：2013-01-24T09:23:30.590
> 
> 标签：asp.net, progress-bar, updateprogress

我应该用什么代替**`Progress bar`**in **`ASP.Net`**？我打算使用**`UpdateProgress`**，但我认为我不能在那里显示我正在处理的数据的百分比，或者是否有其他方法可以显示我正在使用的数据的百分比**`UpdateProgress`**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:44:32.733

您可以使用回发触发器并检查后台操作的进度，然后更新[jQuery ProgressBar](http://docs.jquery.com/UI/API/1.8/Progressbar)的状态。

例如：

```
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
    </Triggers>
    <ContentTemplate>
        <div id="progress"></div>
    </ContentTemplate>

    // register a startup script to update a jQuery ProgressBar. Use the page request manager as the $().ready event won't fire - the DOM has already been loaded:
    var js = @" Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function(s,e) {
        $('#progress').progressbar("value" , 50);
    });
    ScriptManager.RegisterStartupScript(this, typeof(Page), "jsProgress", "  ", true); 
```

# php - 向下滚动附加表格行

> ID：14497804
> 
> 赞同：0
> 
> 时间：2013-01-24T09:23:36.440
> 
> 标签：php, jquery, mysql

你好

我有一个关于可能的简单和良好工作解决方案宽度 jquery 的问题。如何从 sql 中追加 ajax 表

```
https://www.inforegister.ee/BACEXSQ-ARGOS-KRACHT 
```

使用“向下滚动”事件（ajax 重新加载表后的宽度）宽度查找表单？首先，我有一个包含`creat table tbl1(id int auto_increment,name varchar(200));`数百条记录的 mysql 表。从它自动附加例如 10 条记录。

Html 代码看起来像：

```
<form>
<input type="text" id="find" >
<input type="buttom" id="findb" >
</form>
<table></table> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:36:13.490

If you look at the source, you'll see that they're making use of the scroll event:

```
jQuery(window).scroll(function(){
    if(jQuery("#nextCompaniesCount").val() > 0) {
        if (jQuery(window).scrollTop() == jQuery(document).height() - jQuery(window).height()){
            loadNextCompanies();
        }
    }
}); 
```

Look at the source and you'll also see the loadNextCompanies() function, which performs an AJAX request and then adds any HTML to the body.

If you're wanting to add new items to the end of a table, you can use something like:

```
$('#id_of_table > tbody > tr:last').after(newRow); 
```

newRow would contain the tr html that you want to add.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:12:39.873

韦恩惠蒂的回答是要走的路，但我想补充一点：

如果您在链接到的页面上快速滚动，您会看到加载图像出现多次。发生这种情况是因为用户在加载新内容之前再次到达页面底部。

您可以通过在再次调用 loadNextCompanies() （或您的等价物）之前检查您是否已经在等待来自服务器的响应来提高效率。

**更新：** 你要求一个插件——虽然我从来没有使用任何插件来实现这个，所以我不能提出任何建议，我可以告诉你这叫做延迟加载，快速搜索会发现这个插件：[https:// code.google.com/p/jquerylazyscrollloading/](https://code.google.com/p/jquerylazyscrollloading/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:13:13.337

嘿，这是您正在寻找的插件。

[**http://masonry.desandro.com/demos/infinite-scroll.html**](http://masonry.desandro.com/demos/infinite-scroll.html)。

看看上面的例子。

# eclipse - 如何在命令行中运行 JavaScript 形式的 Eclipse

> ID：14497806
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:23:37.080
> 
> 标签：eclipse, eclipse-plugin, rcp, eclipse-juno

简单的问题：

我有一个 javaScript File 和 eclipse。是否可以通过命令行使用 eclipse 运行该脚本文件。
如果是：
我必须做什么。

如果否：
是否有可能这样做。任何输入将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:19:12.940

如果您使用的是 eclipse juno(e4) ，命令 /handler 支持调用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:58:42.153

Eclipse 的 JSDT 有一个内置的 rhino 解释器（Eclipse Juno 中的新功能）。我自己从未使用过它，但可以使用它来解释您的 JS 脚本。 [更多信息在这里](http://wiki.eclipse.org/JSDT/Debug/Rhino)。

现在，如果您的 JS 脚本与 DOM 或窗口交互，那么 rhino 将无法帮助您，但对于纯粹的无头 JS，这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:29:43.633

[phantomjs](http://phantomjs.org/)是一个基于 webkit 的无头 web 浏览器，可以从命令行调用。从[本](http://www.bryntum.com/blog/siesta-tip-integrating-phantomjs-with-your-ide/)教程中，您可以学习如何集成 eclipse 和 phantomjs 来执行 javscript 文件。

# mysql - MySQL Accented character

> ID：14497807
> 
> 赞同：1
> 
> 时间：2013-01-24T09:23:43.200
> 
> 标签：mysql, mysqldump, mysql-workbench

Last week I migrated my db in another platform. I did a mysqldump export from phpmyadmin panel and then I imported it in a new platform using the bigdump script. The sql dump file that I have imported was originally stored in a db that was setting in this manner:

```
MySQL charset: UTF-8 Unicode (utf8)
MySQL connection collation: utf8_unicode_ci 
```

I exported the db choosing utf8 character set but if I look inside the mysqldump file for every table appears: DEFAULT CHARSET=latin1

Now I have a problem with the accented letter (like à, è, ò, ì) that are displayed like Ã² , Ã...etc. For manage my new db I use MySQL Workbench and if i prompt: show variables like 'char%'; I see that all the values are set in utf8. How can I solve the problem? I'm not a Mysql and db expert!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:14:35.460

尽管您提到了 utf8 设置，但您的表似乎使用 latin1。所以你有几个选择：

1.  按原样获取创建的转储并使用 latin1 连接字符集（不是 utf8）将其发送到服务器。但是，这将创建具有 latin1 字符集的表，因为它们在源服务器上。
2.  如果您有可以执行此操作的工具，请将转储转换为 utf-8。不过，您也必须在脚本中更改表的字符集设置。
3.  将您的表转换为 utf8 并再次转储。
4.  合并 1 + 3，但转换您的目标表。如果您无法更改源表，则很有用。

您是否真的尝试过 MySQL Workbench 将转储恢复到您的新服务器？我很确定它应该能够使用 latin1 编码的备份来处理这种情况。请参阅服务器管理部分 -> 数据导入/恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:36:30.663

You can try changing the current character set of a table to the original:

```
alter table TABLE_NAME convert to character set utf8 collate utf8_unicode_ci; 
```

# c# - 电子邮件的 MVC3 正则表达式

> ID：14497809
> 
> 赞同：0
> 
> 时间：2013-01-24T09:23:48.083
> 
> 标签：c#, regex, asp.net-mvc-3

我正在使用以下正则表达式进行电子邮件验证

```
@"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$" 
```

它接受**[]name@gmail.com[][]**作为有效的电子邮件。我应该使用什么模式？是否可以在客户端检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:30:23.923

如果您想验证电子邮件地址正则**表达式**不是正确的选择。

[按照SLaks](https://stackoverflow.com/questions/1903356/email-validation-regular-expression/1903368#1903368)的建议使用[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

```
try 
{
   address = new MailAddress(address).Address;
   //address is valid here
} 
catch(FormatException) 
{
   //address is invalid
} 
```

* * *

但如果你沉迷于正则表达式..就这样做

```
.*@.* 
```

# video - 苹果电视的ffmpeg转换

> ID：14497816
> 
> 赞同：2
> 
> 时间：2013-01-24T09:24:00.187
> 
> 标签：video, ffmpeg, video-conversion

当我尝试将我的电影库转换为能够在我的 Apple TV 上观看时，我有一个特定的电影文件让我很伤心。我一直在使用 iFlicks 转换我的所有文件，但只有一个问题。这个特定电影文件的原始文件可以正常播放，但在转换后视频会在几分钟后冻结，但音频会继续播放。我尝试使用 ffmpeg 转换文件，但现在文件非常不稳定。第一次播放视频会断断续续，下一次音频会断断续续......但由于某种原因它在 VLC 中播放正常。所以我在想，也许我选择了错误的编解码器来适应 Quicktime/Apple TV。下面是我用于 ffmpeg 的命令。我是否选择了正确的编解码器并正确编写了命令？（我之前没有真正使用过ffmpeg...）

```
ffmpeg -i input.avi -vcodec libx264 -acodec libfaac output.m4v 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:36:33.563

我通过将帧速率值设置为整数（例如 24 而不是原来的 23.976）解决了同样的问题

`ffmpeg -i input.avi -vcodec libx264 -r 24 -acodec libfaac output.m4v`

# c++ - 将长度为 0 的字符串 ('0') 传递给需要 char* 的 STL 函数

> ID：14497820
> 
> 赞同：1
> 
> 时间：2013-01-24T09:24:05.563
> 
> 标签：c++, stl, stdstring

同事（我真的不使用 char* :) ）做了一个错误，减少到这个：

```
testVar.append('\0'); //testVar is std::string 
```

所以他基本上解决了这个问题：

```
testVar.append("\0"); 
```

我的问题是为什么第一个不合法？它不能被认为是0长度0终止的字符串吗？我尝试进入 VS10 std lib 实现来亲自查看，但我后悔了。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:26:08.733

`'`创建一个`char`文字，它与字符串 / 不同`char *`。一些语言将单个字符视为长度为 1 的字符串，但 C++ 将单个字符定义为原始数据类型，而字符串是字符数组。

# ios - UITableView delete section - header stays visible

> ID：14497821
> 
> 赞同：4
> 
> 时间：2013-01-24T09:24:07.593
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

After using `[UITableView deleteSections:withRowAnimation:]` on a section which is out of view - the section header remains visible.

On this image, we see the visible part of the tableview

![enter image description here](../Images/7dd80366c67e6aedfe06dcf60aac9821.png)

On the next image, we see the whole tableview - AISLE 2 is hidden until the user scrolls down, it contains only one row:

![enter image description here](../Images/47ffd7d4e1e13329ffbc0380afb4b7b5.png)

When I scroll down and delete the last row, AISLE 2 section header remains visible, even though I used `deleteSections`. if I delete a row from AISLE 1, the section header remains on the same place, and by scrolling down I can still see it.

Furthermore, when trying to scroll down so that AISLE 2 header is in the view, the UI acts as AISLE2 is NOT part of the tableview, and immediately scrolls me back up. Which means - this is a garbage view that is obviously not part of the table, since I removed it. for some reason, iOS doesn't remove this view, but de-associates it from the table.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:53:56.817

你的数据来自哪里，你怎么知道一开始有多少个部分？我认为通过解释这一点可以轻松解决您的问题。

看起来您可能有一个多维`nsmutablearray`数据，其中每个索引都是一个通道，每个对象都包含该通道的产品？或者您可能为每个过道设置不同的阵列？

当您删除一个单元格时，只需检查剩余多少个单元格，然后调用`[self.tableView reloadData];`

对于（假设的）示例；

如果你有你的过道阵列：

```
NSMutableArray *aisleOne = [[NSMutableArray alloc] initWithObjects:@"Product1", @"Product2", nil];
NSMutableArray *aisleTwo = [[NSMutableArray alloc] initWithObjects:@"Product1", @"Product2", nil];
NSMutableArray *aisleThree = [[NSMutableArray alloc] initWithObjects:@"Product1", @"Product2", nil];
NSMutableArray *aisleFour = [[NSMutableArray alloc] initWithObjects:@"Product1", @"Product2", nil]; 
```

然后将它们添加到一个数组中：

```
NSMutableArray *aisleArray = [[NSMutableArray alloc] initWithObjects:aisleOne, aisleTwo, aisleThree, aisleFour, nil]; 
```

然后，在删除单元格时调用此代码。它将从`aisleArray`（需要全局定义）中删除所有空通道：

```
NSMutableArray *tempArray = [[NSMutableArray alloc] initWithArray:aisleArray];
for (int i=0; i<[tempArray count]; i++) {
    if ([[tempArray objectAtIndex:i] count] == 0) {
        [aisleArray removeObjectAtIndex:i];
    }
}
[self.tableView reloadData]; 
```

为此，这两种方法应该是：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [aisleArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[aisleArray objectAtIndex:section] count];
} 
```

（未经测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:43:39.510

尝试`[tableview reload]`制作`numberofsections`为1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T19:43:24.517

几年后我面临同样的问题......删除最后一节不会从表格视图中删除最后一节标题。

然而，我注意到剩余的标题的框架正好低于正常的表格视图内容。因此，对我有用的解决方法（快速但您可以轻松地将其转换为 Objective C）是这样的：

```
DispatchQueue.main.async {
    let unwantedViews = self.tableView.subviews.filter{ $0.frame.minY >= self.tableView.contentSize.height}
    unwantedViews.forEach{ $0.isHidden = true }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T14:44:50.120

只需获取该部分的表 haderview 并将其从它的超级视图中删除，并且 tableView 不管理它。

```
UIView *mysteriousView = [tableView headerViewForSection:indexPath.section];
[tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationAutomatic];
[mysteriousView removeFromSuperview]; 
```

希望这可以帮助！

# c++ - Boost 智能指针设计问题

> ID：14497824
> 
> 赞同：4
> 
> 时间：2013-01-24T09:24:12.727
> 
> 标签：c++, class, boost, shared-ptr

这是我第一次在 C++ 中体验智能指针，我有一些理解问题。我想设计某种基于组件的 OpenGL 框架。

所以我有一个场景类，它创建节点（并为自己存储）并将其作为 shared_ptr 返回。Node 类有一个组件列表，这些组件在 Node 类中创建并再次作为 shared_ptr 返回，但是这些组件还需要对其所有者（节点）的引用，并且节点本身应将其指针传递给其组件。

现在：指向其组件中的节点的指针，它应该是什么？一个 shared_ptr 或一个 weak_ptr。以及如何在节点本身中传递它（节点没有引用其存储在场景中的 shared_ptr ）

//! 编辑 1

```
class Scene
{
vector<shared_ptr<Node>>  nodes;
public:
weak_ptr<Node>  NewNode();
}

class Node
{
vector<shared_ptr<Component>> components;
public:
weak_ptr<Component> AddComponent();
weak_ptr<Component> GetComponent(String classname);
vecotr<weak_ptr<Component>> GetComponents(String classname);
}

class Component
{
weak_ptr<Node> owner;
Component(weak_ptr<Node> owner_refernce);
public:
// component stuff
weak_ptr<Node> GetOwner();
friend class Node;
} 
```

请帮助我在这里做出最好的设计。

// EDIT1：更清楚！

场景是节点的唯一所有者。它创造并摧毁它们。每个节点都拥有它的所有组件。它创造并摧毁它们。并且组件需要对其所有者的引用，它们将与其他对象共享（通过在 Get 方法中返回所有者）。

-> 场景拥有节点，节点拥有组件。

-> 场景共享节点（按名称返回节点对象）

-> 节点共享它的所有组件（按类名返回组件）

-> 组件共享它们的所有者（返回所有者参考）

如何在不共享所有权的情况下共享对象？弱点？？

**编辑 2：在这种情况下，智能指针似乎没有用。所以我现在要使用行指针**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:59:07.523

根据您的描述，听起来`Node`实例具有明确的所有者（`Scene`）。如果是这样，`shared_ptr`不一定是最好的解决方案；`std::unique_ptr`，甚至原始指针（在 中带有必要的删除`~Scene`）可能更合适。或者也许是 Boost 的指针向量。相同的考虑适用于`Component`和`Node`。并且父指针`Component`看起来像是严格用于导航的，所以原始指针是最合适的。

# asp.net - ASP.NET is System.Web.UI.Page thread safe

> ID：14497826
> 
> 赞同：0
> 
> 时间：2013-01-24T09:24:25.473
> 
> 标签：asp.net, multithreading

I am wondering if the following code is thread safe?

Can i be be sure that `UniqueFoo` will indeed be the Unique Foo and will not be override?

```
public partial class Dummy : System.Web.UI.Page
{
    public string UniqueFoo{ get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        var id = int.Parse(Request["Id"]);
        UniqueFoo = SomeThreadSafeWCF.GetUniqueFoo(id);
    }
} 
```

what about the following (static)

```
public partial class Dummy : System.Web.UI.Page
{
    public static string UniqueFoo{ get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        var id = int.Parse(Request["Id"]);
        UniqueFoo = SomeThreadSafeWCF.GetUniqueFoo(id);
    }
} 
```

i later want to use `UniqueFoo` in a `[WebMethod]`

```
[WebMethod]
public static void SetSomeObject(SetSomeObject obj)
{
    SomeThreadSafeWCF service = new SomeThreadSafeWCF ();
    service.SetSomeObject(UniqueFoo, obj);
} 
```

**EDIT**: I am getting `SetSomeObject` from JS and `UniqueFoo` is coming from ASP.NET will i have any issues when NOT using the `static` in my `Dummy` class according to your answers?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:34:09.137

Surely your first sample is thread safe because when a request of a page post to the Web Server asp.net make new instance of your page and call page_load so if your SomeThreadSafeWCF.GetUniqueFoo() always make a unique Foo everything is thread save

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:26:29.623

您的第二个代码片段不是线程安全的，因为您正在修改静态字段的值。因此，例如，如果稍后在此页面中您尝试读取此`UniqueFoo`字段的值，您可能无法获得您期望的值。

第一个代码片段很好，因为该字段不是静态的。

如果您想在 WebMethod 中使用 UniqueFoo，那么我建议您在调用它时将其传递给此 Web 方法。

```
[WebMethod]
public static void SetSomeObject(SetSomeObject obj, string uniqueFoo)
{
    SomeThreadSafeWCF service = new SomeThreadSafeWCF ();
    service.SetSomeObject(uniqueFoo, obj);
} 
```

# c# - OleDbDataReader lock file

> ID：14497827
> 
> 赞同：0
> 
> 时间：2013-01-24T09:24:26.117
> 
> 标签：c#, oledbdatareader

I am using a oledbDataReader in C# to read data from a FoxPro database. What I would like to know is, does this lock the table that it is currently reading from? If so, how can I read from the table without locking the table.

Thanks in advance.

# c - 如何在C中向后打印一个单词

> ID：14497828
> 
> 赞同：1
> 
> 时间：2013-01-24T09:24:30.777
> 
> 标签：c

我虽然设置了一个名副其实`len`的`strlen()`函数来查找最后一个字符，打印它，然后将其减 1。它在我的代码中不起作用：

```
#include <stdio.h>
#include <string.h>
#define SIZE 4
int main(void)

{
    int index;
    char wordToPrint[SIZE];
    printf("please enter a random word:\n");
    for (index = 0; index < SIZE; index++)
    {
        scanf("%c", &wordToPrint[index]);
    }

    int len = strlen(wordToPrint);
    for (index = 0; index < SIZE; index++)
    {
        printf("%c", wordToPrint[len]);
        --len;
    }

    return 0;
} 
```

输入是“尼尔”

输出是：

```
??
r 
```

最后一个区块有什么问题？

tnx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:25:36.393

C 数组索引从零开始。

想想这如何影响字符串长度和最后一个字符的索引之间的关系。

另外，你在这个词中的阅读方式很奇怪，应该是：

```
scanf("%s", wordToPrint); 
```

或更好：

```
fgets(wordToPrint, sizeof wordToPrint, stdin); 
```

无需一次循环并读取一个字符。以上将根据输入量为您提供不同的长度。

第二个建议不会停留在空白处，所以如果你这样做，你可能应该替换`word`为`line`清楚起见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:28:35.960

反向迭代需要偏移一：

**向前：**

```
for (size_t i = 0; i != N; ++i) { putchar(word[i]); } 
```

**落后：**

```
for (size_t i = 0; i != N; ++i) { putchar(word[N - i - 1]); }
//                                                  ^^^^ 
```

这是因为长度数组[在范围内](https://stackoverflow.com/a/9963438/596781)`N`具有有效索引。[`[0, N)`](https://stackoverflow.com/a/9963438/596781)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T09:29:22.807

看看下面的代码：

```
end = strlen(wordToPrint) - 1;
for (x = end; x >= 0; --x) {
    printf("%c", wordToPrint[x]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T09:35:17.827

除了其他海报所说的之外，您可能应该考虑为字符串提供额外的字节：

```
char wordToPrint[SIZE + 1]; 
```

然后设置

```
wordToPrint[4] = '\0'; 
```

如果有人输入了 4 个字母的单词（例如 'blue'），您的字符串将看起来像 { 'b', 'l', 'u', 'e' } 但没有空字符的空间。

Strlen 和其他函数依赖于在最后找到一个空值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T09:30:57.257

```
int len = strlen(wordToPrint);
for (index = 0; index < SIZE; index++)
{
    printf("%c", wordToPrint[len]);
    --len;
}

return 0; 
```

假设你有单词 otto 所以 `int len = strlen(wordToPrint);`将设置`len`为 4，但是当你在 `printf("%c", wordToPrint[len]);`数组中 使用它时，数组`wordToPrint[4]`中的最后一个索引是`wordToPrint[3]`从 0 索引开始的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T10:36:53.743

像这样编写代码，因为在 wordToPrint[len] 处，len 是 +1，然后是 wordToPrint[] 数组的最后一个索引，因此它显示 garbadge/null 值

```
#include <stdio.h>
#include <string.h>
#define SIZE 4
int main(void)

{
    int index;
    char wordToPrint[SIZE];
    printf("please enter a random word:\n");
    for (index = 0; index < SIZE; index++)
    {
        scanf("%c", &wordToPrint[index]);
    }

    int len = strlen(wordToPrint);
    for (index = 0; index < SIZE; index++)
    {
        --len;
        printf("%c", wordToPrint[len-1]);
    }

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T11:20:47.867

对于您的问题，这是整个程序。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *strrev(char *); // Prototype

/* The following function is by me, to reverse a string, because strrev is not available in GCC */

char *strrev(char *str)
{
      char *p1, *p2;

      if (! str || ! *str)
            return str;
      for (p1 = str, p2 = str + strlen(str) - 1; p2 > p1; ++p1, --p2)
      {
            *p1 ^= *p2;
            *p2 ^= *p1;
            *p1 ^= *p2;
      }
      return str;
}

/*================================================================Begin Main======================================================================================*/

int main()
{
    char sentence[100], rev_sentence[100], c;

    int j = 0, i = 0, m = 0;

    sentence[i] = ' ';                 // The first char in the sentence should be a space to reverse this first word
    i++;
    printf("Enter a sentence : ");
    while((c = getchar()) != '\n')
    {
        sentence[i] = c;
        i++;
    }
    sentence[i] = '\0';

    printf("Reversed word is: ");

    for(i = strlen(sentence) - 1 ; i >= 0; i = i - 1)
    {
         if(sentence[i] == ' ')
        {
            rev_sentence[j] = '\0'; // because strrev fun reverses string ntil it encounters a first \0 character
            strrev(rev_sentence);
            printf("%s ", rev_sentence);
            for(m = 0; m < 100; m++)
            rev_sentence[m] = 0;
            j = 0;
            continue;
        }
        rev_sentence[j] = sentence[i];
        j++;
    }

    rev_sentence[j] = '\0';

} 
```

这个程序反转整个句子，或者如果你只输入一个单词并按下回车键，希望你喜欢并理解它

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-24T09:28:47.443

这段代码是错误的：

```
int len = strlen(wordToPrint);
for (index = 0; index < SIZE; index++)
{
    printf("%c", wordToPrint[len]);
    --len;
} 
```

它的打印字符从 4 到 1，但您想打印从 3 到 0 的字符。

你应该这样做：

```
for (index = len - 1; index >= 0; index--)
    printf("%c", wordToPrint[index ]); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-24T09:31:08.903

除了其他答案之外，当您知道单词具有 SIZE 字符时，为什么还要使用 strlen() ？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-24T10:14:21.147

这是基于发布的工作代码：

```
#include <stdio.h>
#include <string.h>
#define SIZE 4
int main(void)

{
int index;
char wordToPrint[SIZE];
printf("please enter a random word:\n");
//Why you need a loop to read a word?
//for (index = 0; index < SIZE; index++)
//{
//    scanf("%c", &wordToPrint[index]);
//}

scanf("%s",wordToPrint);

int len = strlen(wordToPrint);

//Modify the loop like this:
for (index = len; index >= 0 ; index--)
{
    printf("%c", wordToPrint[len]);  
}
printf("\n");//Add this line for clearing the stdout buffer and a more readable output.
return 0;
} 
```

注意：在使用之前对数组进行 m​​emset() 或 bzero() 始终是一个好习惯。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-15T23:06:48.963

Lil' hack 的乐趣 :)

```
#include <stdio.h>
#include <stdlib.h>

#define LENGTH 32

int main(void)
{
  // allocate a zero-filled buffer of LENGTH bytes
  // we add LENGTH so that we start writing right *after* the buffer
  char *word = LENGTH + calloc(LENGTH, 1);

  // 0xFF will limit our buffer so that we do not write out of bounds
  *(word - LENGTH) = 0xFF;

  // order is important: we are decrementing the pointer and **then**
  // reading a character from the standard input, we compare it to the
  // line feed character so that we stop reading characters when return
  // key is pressed
  while ((*--word = fgetc(stdin)) != '\n' && *word != 0xFF);
  printf("The word is: %s", word);

  // tidy up!
  free(word);
  return 0;
} 
```

当然，这在“现代”系统中不会*像预期*的那样工作，它实现了行缓冲控制台，而不是允许用户一次手动读取一个字符（尽管它可以使用特定于平台的 API 来实现。）

# silverlight-4.0 - Single instance of OPC client in WCF RIA Service

> ID：14497829
> 
> 赞同：0
> 
> 时间：2013-01-24T09:24:31.260
> 
> 标签：silverlight-4.0, wcf-ria-services, silverlight-5.0, opc

I'm developing a simple Silverlight app. The application will display the information found in the tags of an OPC server, running in the same machine of the web server.

I implemented a domain service class with a method that let the client ask for the value of a tag. The problem is that every time I call the method from the client side it instantiate a new OPC Client, connect to the server, read the value and then disconnect. This can be a problem with a large number of calls.

How can I use a single OPC Client object on the server side?

Here's the code of the domain service class.

```
namespace BFLabClientSL.Web.Servizi
{
    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.ComponentModel.DataAnnotations;
    using System.Linq;
    using System.ServiceModel.DomainServices.Hosting;
    using System.ServiceModel.DomainServices.Server;
    using OpcClientX;
    using System.Configuration;

    // TODO: creare metodi contenenti la logica dell'applicazione.
    [EnableClientAccess()]
    public class DSCAccessoDati : DomainService
    {
        protected OPCItem itemOPC = null;

        /// <summary>
        /// Permette l'acceso al valore di un dato
        /// </summary>
        /// <param name="itemCode">Chiave del dato</param>
        /// <returns>Valore del dato</returns>
        public string GetDato(string itemCode)
        {
            string result = "";

            OPCServer clientOPC = new OPCServer();
            clientOPC.Connect(Properties.Settings.Default.OPCServer_ProgID);
            OPCGroup gruppoOPC = clientOPC.OPCGroups.Add("Gruppo1");

            OPCItem itemOPC = gruppoOPC.OPCItems.AddItem(itemCode, 0);

            try
            {
                object value = null;
                object quality = null;
                object timestamp = null;

                itemOPC.Read(1, out value, out quality, out timestamp);

                result = (string)value;
            }
            catch (Exception e)
            {
                throw new Exception("Errore durante Caricamento dato da OPCServer", e);
            }
            finally
            {
                try
                {
                    clientOPC.Disconnect();
                }
                catch { }
                clientOPC = null;
            }

            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:36:51.633

一个简单的解决方案是在您的类中定义一个静态变量 OPCServer，您初始化一次并在您的方法中重用它

```
public class DSCAccessoDati : DomainService
{
    private static OPCServer clientOPC;

    static DSCAccessoDati() {
      clientOPC = new OPCServer();
      clientOPC.Connect(Properties.Settings.Default.OPCServer_ProgID);
    }

    public string GetDato(string itemCode) {

      OPCGroup gruppoOPC = clientOPC.OPCGroups.Add("Gruppo1");
      //your code without the disconnect of OPCServer
    } 
```

# java - 迁移时 Jdev 崩溃

> ID：14497830
> 
> 赞同：0
> 
> 时间：2013-01-24T09:24:43.180
> 
> 标签：java, spring, jsf, oracle-adf, jdeveloper

我已将 Jdevtp4 迁移到 Jdev 11.1.2.3.0 有谁知道这个错误..

```
Target URL -- http://localhost:7101/xxxxx/index.jsp
    <ADFContext> <getCurrent> Automatically initializing a DefaultContext for getCurrent.
    Caller should ensure that a DefaultContext is proper for this use.
    Memory leaks and/or unexpected behaviour may occur if the automatic initialization is performed improperly.
    This message may be avoided by performing initADFContext before using getCurrent().
    For more information please enable logging for oracle.adf.share.ADFContext at FINEST level.
    2013-01-24 14:38:52,027 ERROR [ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)' [com.cassiopae.cassiopae.container.servlets.CassiopaeFacesServlet] - <Some Other Exception>
    java.lang.UnsupportedOperationException
        at javax.faces.application.Application.getResourceHandler(Application.java:287)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:503)
        at com.cassiopae.cassiopae.container.servlets.CassiopaeFacesServlet.service(CassiopaeFacesServlet.java:160)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
        at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at oracle.adfinternal.view.faces.activedata.AdsFilter.doFilter(AdsFilter.java:60)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at oracle.adfinternal.view.faces.webapp.rich.SharedLibraryFilter.doFilter(SharedLibraryFilter.java:135)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at oracle.adfinternal.view.faces.webapp.rich.RegistrationFilter.doFilter(RegistrationFilter.java:69)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at oracle.adfinternal.view.faces.activedata.ADSFilter.doFilter(ADSFilter.java:85)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:293)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:199)
        at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at oracle.adfinternal.view.faces.activedata.AdsFilter.doFilter(AdsFilter.java:60)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at oracle.adfinternal.view.faces.webapp.rich.SharedLibraryFilter.doFilter(SharedLibraryFilter.java:135)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at oracle.adfinternal.view.faces.webapp.rich.RegistrationFilter.doFilter(RegistrationFilter.java:69)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at oracle.adfinternal.view.faces.activedata.ADSFilter.doFilter(ADSFilter.java:85)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:293)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:199)
        at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at com.cj.trim.trimFilter.doFilter(Unknown Source)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at com.cj.gzipflt.GzipFilter.doFilter(Unknown Source)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at org.springframework.webflow.executor.jsf.FlowSystemCleanupFilter.doFilterInternal(FlowSystemCleanupFilter.java:41)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:119)
        at java.security.AccessController.doPrivileged(Native Method)
        at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)
        at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:442)
        at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:103)
        at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:171)
        at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:139)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:36:54.353

```
java.lang.UnsupportedOperationException
    at javax.faces.application.Application.getResourceHandler(Application.java:287) 
```

当没有正确[`Application`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html)初始化时，将抛出此异常。当使用的 JSF API/impl 版本不匹配时，就会发生这种情况。例如，您的 webapp 正在运行 JSF 2.0 API 和 JSF 1.2 impl。

您应该调查目标容器（在您的情况下为 Weblogic）是否尚未随 JSF 一起提供，并取决于调查 2 个选项：

1.  **利用容器提供的 JSF 版本，并**确保您的 webapp在其`/WEB-INF/lib`.

2.  禁用容器提供的 JSF 库，并确保您的 webapp 在其`/WEB-INF/lib`.

# c - WinPE环境下C/C中的变体字符串转换

> ID：14497832
> 
> 赞同：0
> 
> 时间：2013-01-24T09:24:46.190
> 
> 标签：c, variant, string-conversion, winpe

我有 C/C++ 代码问题，其中有 WMI 查询检索 Win32_DiskDrive 的实例并获取其 Size 属性。该属性被检索为 Variant 类型，然后我必须将其转换为失败的 UINT64 类型。

如果我按原样打印变量 wchar 值，它会打印出来。但是如果我打印任何 UINT 表单，它会给我一些乱码。这是在WinPE环境中，不确定它是否会影响任何东西。

代码片段是：

```
VariantClear(&varPropVal);
hr = pInst->Get(L"Size", // property name
                0L,            // Reserved, must be zero.
                &varPropVal,   // property value returned.
                NULL,          // CIM type not needed.
                NULL);         // Flavor not needed.
if(hr == WBEM_S_NO_ERROR) 
{
    printf("Disk size: %S %llu %llu %u\n", V_BSTR(&varPropVal),
                                           V_UI4(&varPropVal),
                                           V_UI8(&varPropVal),
                                           V_UINT(&varPropVal));
    diskInfo->size = V_UI8(&varPropVal);
} 
```

日志语句的输出：磁盘大小：13440107520 4631112 4631112 4631112

这里打印为 wchar* 的第一个尺寸是正确的。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:06:21.340

在程序开始时设置语言环境 (std::locale("")) 可以解决问题。

# batch-file - 用批处理脚本替换包含注释（以;开头）行的文件中的字符串

> ID：14497836
> 
> 赞同：1
> 
> 时间：2013-01-24T09:24:57.163
> 
> 标签：batch-file

我有一个名为“abc.ini”的文件，其内容如下：

```
;------------------------
; this file is a reffernce file
; you will get server path as below
admin_folder=E:\Temp\utils_630\admin**
VERSION=630
PORT=6304
IP of server=10.9.23.64 
```

这里我需要将 utils_630 替换**为**utils_640**我** 正在使用脚本来替换它。但在输出中我没有得到; 在行的开头，就像在原始文件中一样。我需要替换所需字符串的文件。对此的任何帮助将不胜感激。在此先感谢!!!!!!!!! 分号是行首，第 4 行以 admin_folder 开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:03:04.457

干得好

```
setlocal enabledelayedexpansion
for /f "eol= tokens=*" %%a in (abc.ini) do (
set line=%%a
echo !line! | find "utils_"
if not !errorlevel!==0 (
echo !line! | find "VERSION="
if not !errorlevel!==0 (
echo !line! >>new.ini
) else (
call :EXTRACT
)
) else (
call :EXTRACT
)
)
del abc.ini /f /q
ren new.ini abc.ini
pause >nul

:EXTRACT
set "line=!line:630=640!"
echo !line! >>new.ini 
```

# matlab - Matlab - 矩阵的 2 次方

> ID：14497839
> 
> 赞同：2
> 
> 时间：2013-01-24T09:25:02.730
> 
> 标签：matlab, matrix, exponent

在`Matlab`中，我输入了以下命令：

```
>> a = [1 2; 3 4]

a =

     1     2
     3     4 
```

当我尝试命令`a^2`时，我得到以下信息：

```
>> a^2

ans =

     7    10
    15    22 
```

我实际上期望得到：

```
ans =

       1     4
       9     16 
```

换句话说，我期望将矩阵的每个元素提升到*2*。

为什么结果如上图？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T09:28:23.057

在 MATLAB 中，所有单字符运算符都是*矩阵*运算符。因此，您正在使用*矩阵*功率，例如，

```
a^2 == a*a 
```

如果要对每个*元素*求平方，则必须使用*逐元素*幂运算符：

```
>> a.^2
ans = 
    1   4
    9   16 
```

[在此处](http://www.mathworks.nl/help/matlab/matlab_prog/operators.html)阅读有关 MATLAB 运算符的更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T09:28:34.317

当您`a^2`在 Matlab 中输入时，您实际执行的是`a*a`（**矩阵**乘法）。如果你想在 Matalb 中进行**元素**操作，你需要输入

```
a.^2 
```

`^2`注意和之间的区别`.^2`！
操作数前面的小点`.`标记**元素**操作，而不是矩阵操作。

其他操作也是如此，例如`/`vs `./`、`*`vs.`.*`等。

# phantomjs - How to talk between cross-domain iframes in phantomJS

> ID：14497841
> 
> 赞同：2
> 
> 时间：2013-01-24T09:25:04.613
> 
> 标签：phantomjs

We are using phantomJS to test our frontend code, and currently the team is using the hooks on onConsoleMessage() to communicate between cross-domain iframes that are necessary in our project.

Is there a better way to do that?

I don't like the idea of our tests using the console to communicate. They mostly just have to send status flags. I'm pretty sure we are missing something obvious on how phantomJS deals with the iframes and how to inject code on them.

# jquery - 在 ajax 请求上，Rails 中出现 Gettin 500 Internal Server Error

> ID：14497843
> 
> 赞同：3
> 
> 时间：2013-01-24T09:25:14.783
> 
> 标签：jquery, ruby-on-rails, ajax, railscasts

我正在尝试从表单创建记录。我使用 railscast 136 作为基础工作。当我尝试提交时，由于缺少部分而收到 500 错误。我已经创建了控制器相关的 javascript 视图，但它正在请求与模型同名的视图。

**错误信息**

> 渲染的约会/create.js.erb (3.8ms) 在 12ms 内完成了 500 内部服务器错误
> 
> ActionView::Template::Error（缺少部分约会/约会与 {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee] }. 搜索：* "/Users/gjores/Sites/Rails/verkstad_test/app/views" ): 1: $('#appointments').append('<%= j render(@appointment) %>') ; app/views/appointments/create.js.erb:1:in `_app_views_appointments_create_js_erb___2325925946390315228_70273089113920' app/controllers/appointments_controller.rb:16:in`create'

**控制器**

```
 def create
    @appointment = Appointment.new(params[:appointment])
    if @appointment.save
      respond_to do |format|
        format.html { redirect_to new_appointment_path, :notice => "Successfully created appointment." }
        format.js
      end
    else
      render :action => 'new'
    end
  end 
```

**约会/new.html.erb**

```
<div id="appointments">
    <%= render 'shared/appointment_part' %>
</div>
<% title "New Appointment" %>
<table>
<% @students.each do |s| %>
<%= form_for @appointment,  :remote => true do |f|%>
  <%= f.error_messages %>
  <tr>  
    <td><%= s.name %></td>
    <td><%= f.label :week %></td>
    <td><%= f.number_field :week %></td>
    <td><%= f.label :teacher_id %></td>
    <td><%= f.collection_select(:teacher_id, Teacher.all, :id, :name) %></td>
    <%= f.hidden_field :student_id, :value => s.id %>

  <td><%= f.submit %></td>
  </tr>
<% end %>
<% end -%>
</table>

<p><%= link_to "Back to List", appointments_path %></p> 
```

**约会/create.js.erb**

```
$('#appointments').append('<%= j render(@appointment) %>'); 
```

**路线**

```
 appointments GET    /appointments(.:format)          appointments#index
                 POST   /appointments(.:format)          appointments#create
 new_appointment GET    /appointments/new(.:format)      appointments#new
edit_appointment GET    /appointments/:id/edit(.:format) appointments#edit
     appointment GET    /appointments/:id(.:format)      appointments#show
                 PUT    /appointments/:id(.:format)      appointments#update
                 DELETE /appointments/:id(.:format)      appointments#destroy
        teachers GET    /teachers(.:format)              teachers#index
                 POST   /teachers(.:format)              teachers#create
     new_teacher GET    /teachers/new(.:format)          teachers#new
    edit_teacher GET    /teachers/:id/edit(.:format)     teachers#edit
         teacher GET    /teachers/:id(.:format)          teachers#show
                 PUT    /teachers/:id(.:format)          teachers#update
                 DELETE /teachers/:id(.:format)          teachers#destroy
 notice_students POST   /students/notice(.:format)       students#notice
        students GET    /students(.:format)              students#index
                 POST   /students(.:format)              students#create
     new_student GET    /students/new(.:format)          students#new
    edit_student GET    /students/:id/edit(.:format)     students#edit
         student GET    /students/:id(.:format)          students#show
                 PUT    /students/:id(.:format)          students#update
                 DELETE /students/:id(.:format)          students#destroy 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:00:26.567

您的堆栈跟踪显示

```
Missing partial appointments/appointment 
```

所以看起来 Rails 正在尝试渲染一个名为约会/appointments.html 或约会/appointments.js 的部分

是否存在名为约会.js.erb 或约会.html.erb 的文件？

如果没有，则创建它。

但是，我怀疑您要做的是显示您的约会，因为我认为您希望下面的代码更新页面上某些元素的 html

```
$('#appointments').append('<%= j render(@appointment) %>'); 
```

我想你需要这条线变红

```
$('#appointments').append('<%= j render :partial => 'appointments/appointment', :formats => :html %>'); 
```

您的 html 视图部分应该是约会/_appointment.html.erb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:35:48.810

这是因为您在视图**约会/new.html.erb**中呈现部分，而不是在控制器**创建方法**中。

由于部分是在视图**约会**/new.html.erb 中定义的，所以对应的**javascript 视图**应该是**约会/new.js.erb**。

# api - 列出使用 Azure 服务管理 API 的 Azure 网站

> ID：14497846
> 
> 赞同：1
> 
> 时间：2013-01-24T09:25:17.953
> 
> 标签：api, azure, azure-web-app-service

我希望以编程方式监控我的 Azure 帐户。通过 MS Azure 服务管理 API，我找到了一种识别虚拟机和云服务的方法。但我似乎找不到在 azure 网站服务下列出机器的方法。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:02:44.130

[查看PowerShell cmdlet](https://github.com/WindowsAzure/azure-sdk-tools/tree/master/WindowsAzurePowershell/src/Management.WebSites/Services)中使用的代码。UriElements.cs文件还可以为您提供有关应使用的 url 的额外信息[。](https://github.com/WindowsAzure/azure-sdk-tools/blob/master/WindowsAzurePowershell/src/Management.WebSites/Utilities/UriElements.cs)

# php - 使用 php 或 javascript 隐藏 html 表单

> ID：14497848
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:25:27.767
> 
> 标签：php, javascript, html

我有两个 php 页面。index.php 和functions.php。在 index.php 中，我从 functions.php 调用登录和更改密码函数。我的问题是，当我单击登录时，我的登录表单将与更改密码表单一起显示。我只想在单击登录时显示更改密码表单。请帮忙！！

这是我的代码：index.php

```
<?php session_start(); ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> Login to the site</title>
</head>
<body>

<form action="index.php?act=login" method="post" id= "user_login" >
<center>
<table>
            <tr>
                    <td>User Login</td>
                    <td><a href="index.php?act=login" >Click Here</a></td>
            </tr>
            <tr>
                    <td>Forgot Password?</td>
                    <td><a href="index.php?act=forgotpassword">Click Here</a></td>
            </tr>
     </center>
     <table>

     </form>

     <?php
     include "functions.php";
     $action_type = $_GET["act"];
     $form_name = $_GET["name"];
     if ($action_type == "login")
     { 
      return login();
     }
     elseif ($action_type == "forgotpassword")
     {
     return forgotpassword();
     }
     elseif ($action_type == "changepassword")
     {
     return changepassword();
     }

     ?>

     </body>
     </html> 
```

函数.php：

```
function login()
 {
     echo' <script type="text/javascript">
function showhide() {
  var form = document.getElementById("login");
    if (form.style.visibility == "visible") {
form.style.visibility = "hidden";
}

}
   </script>
    <form action="index.php?act=login" method="post" id="login" >
    <center>
    <table cellpadding="2" cellspacing="2" border="0">
            <tr>
        <td width="30%" align="right">Username</td>
        <td width="70%"><input type="text" name="user" id="text_user"/></td>
            </tr>
            <tr>
                    <td align="right">Password</td>
                    <td><input type="password" name="pass" id="text_pass"  /></td>
            </tr>
            <tr>
                    <td>&nbsp;</td>
                    <td><input type="submit" value="login" name="submit"   onsubmit="showhide()" /></td>
            </tr>
    </center>
            </table>
       </form> </body></html>';

// login code goes here                

   }

   function changepassword()
   {
    echo'<form action ="index.php?act=changepassword" method="post" >
    <table cellpadding="2" cellspacing="2" border="0">
            <tr>
                    <td>Existing Password</td>
                    <td><input type="password" value="" name="pass" id="text_pass" /></td>
            </tr>
            <tr>
                    <td>New Password</td>
                    <td><input type="password" value="" name="cpass" id="text_cpass"/></td>
            </tr>
            <tr>
                    <td>Retype Password</td>
                    <td><input type="password" value="" name="crepass" id="text_crepass" /></td>
            </tr>
            <tr>
                    <td><input type="submit" value="change" name="submit" /></td>
            </tr>
    </table>
            <tr align = "left"> <td><br><a href="index.php?act=logout">LogOut</a></br> </td></tr>

     </form>';

     // changepassword code goes here

     }

   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:40:35.257

我认为你的代码应该是这样的

**测试.php**

```
<?php session_start(); ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> Login to the site</title>
</head>
<body>

<form action="test.php?act=login" method="post" id= "user_login" >
<center>
<table>
            <tr>
                    <td>User Login</td>
                    <td><a href="test.php?act=login" >Click Here</a></td>
            </tr>
            <tr>
                    <td>Forgot Password?</td>
                    <td><a href="test.php?act=forgotpassword">Click Here</a></td>
            </tr>
     </center>
     <table>

     </form>

     <?php
     include "functions.php";
     if(isset( $_GET["act"])) {
        $action_type = $_GET["act"];
        if ($action_type == "login")
     { 
      return login();
     }
     elseif ($action_type == "forgotpassword")
     {
     return forgotpassword();
     }
     elseif ($action_type == "changepassword")
     {
     return changepassword();
     }  
     }
     elseif(isset($_GET["name"])) {
        $form_name = $_GET["name"]; 
     }

     ?>

     </body>
     </html> 
```

还有你的**functions.php**页面

```
<?php
function login()
 {
     echo' <script type="text/javascript">
function showhide() {
  var form = document.getElementById("login");
    if (form.style.visibility == "visible") {
form.style.visibility = "hidden";
}

}
   </script>
    <form action="index.php?act=login" method="post" id="login" >
    <center>
    <table cellpadding="2" cellspacing="2" border="0">
            <tr>
        <td width="30%" align="right">Username</td>
        <td width="70%"><input type="text" name="user" id="text_user"/></td>
            </tr>
            <tr>
                    <td align="right">Password</td>
                    <td><input type="password" name="pass" id="text_pass"  /></td>
            </tr>
            <tr>
                    <td>&nbsp;</td>
                    <td><input type="submit" value="login" name="submit"   onsubmit="showhide()" /></td>
            </tr>
    </center>
            </table>
       </form> </body></html>';

// login code goes here                

   }

   function changepassword()
   {
    echo'<form action ="index.php?act=changepassword" method="post" >
    <table cellpadding="2" cellspacing="2" border="0">
            <tr>
                    <td>Existing Password</td>
                    <td><input type="password" value="" name="pass" id="text_pass" /></td>
            </tr>
            <tr>
                    <td>New Password</td>
                    <td><input type="password" value="" name="cpass" id="text_cpass"/></td>
            </tr>
            <tr>
                    <td>Retype Password</td>
                    <td><input type="password" value="" name="crepass" id="text_crepass" /></td>
            </tr>
            <tr>
                    <td><input type="submit" value="change" name="submit" /></td>
            </tr>
    </table>
            <tr align = "left"> <td><br><a href="index.php?act=logout">LogOut</a></br> </td></tr>

     </form>';
     }

      function forgotpassword()
   {
    echo'<form action ="index.php?act=changepassword" method="post" >
    <table cellpadding="2" cellspacing="2" border="0">
            <tr>
                    <td>Existing Password</td>
                    <td><input type="password" value="" name="pass" id="text_pass" /></td>
            </tr>
            <tr>
                    <td>New Password</td>
                    <td><input type="password" value="" name="cpass" id="text_cpass"/></td>
            </tr>
            <tr>
                    <td>Retype Password</td>
                    <td><input type="password" value="" name="crepass" id="text_crepass" /></td>
            </tr>
            <tr>
                    <td><input type="submit" value="change" name="submit" /></td>
            </tr>
    </table>
            <tr align = "left"> <td><br><a href="index.php?act=logout">LogOut</a></br> </td></tr>

     </form>';
     }

?> 
```

*请记住，在您的代码中，您已经声明了**forgotpassword 函数**，所以我只是复制了**changepassword 函数**并将其重命名为**forgotpassword 函数**，以便为您提供示例*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:32:41.120

您需要从 index.php 中删除**<form>**和**</form>**标记

从 index.php 中删除以下两行

```
<form action="index.php?act=login" method="post" id= "user_login" > 
```

和

```
</form 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:39:05.823

用于`switch`检查通过的操作并相应地显示表单。

```
include "functions.php";
$action_type = $_GET["act"];
$form_name = $_GET["name"];

switch($action_type)
{ 
      case 'login':
          login();
          break;
      case 'forgotpassword' :
          forgotpassword();
          break;
      case 'changepassword' :
          changepassword();
          break;
      default :
          login();
          break;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:40:22.873

更改代码：

```
<?php
 include "functions.php";
 $action_type = $_GET["act"];
 $form_name = $_GET["name"];
 if ($action_type == "login")
 { 
  return login();
 }
 elseif ($action_type == "forgotpassword")
 {
 return forgotpassword();
 }
 elseif ($action_type == "changepassword")
 {
 return changepassword();
 }

 ?> 
```

至 ：

```
 <?php

    include "function.php";
    $action = isset($_REQUEST['act'])?$_REQUEST['act'] : "";
    switch($action)
    {
        case 'login':
            login();
            break;

        case 'forgotpassword':
            changepassword();
            break;  
    }

 ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T11:23:28.623

```
<form action="index.php?act=login" method="post" id= "user_login" > 
```

将其更改为

```
<form action="index.php" method="post" id= "user_login" > 
```

# c# - 嵌套通用接口

> ID：14497854
> 
> 赞同：12
> 
> 时间：2013-01-24T09:25:45.613
> 
> 标签：c#, generics, interface

我有如下接口架构（C# .NET4）

```
interface A 
{

}

interface B 
{
    List<A> a;
}

interface C 
{
    List<B> b;
} 
```

我以这种方式实现了它：

```
public interface A 
{

}

public interface B<T> where T : A 
{
    List<T> a { get; set; }
}

public interface C<T> where T : B
{
    List<T> b { get; set; } // << ERROR: Using the generic type 'B<T>' requires 1 type arguments
} 
```

我不知道如何避免错误**使用泛型类型“B”需要 1 个类型参数**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T09:28:36.190

由于`interface B<T>`是泛型的，因此在声明`interface C<T>`. 换句话说，当前的问题是您没有告诉编译器接口 B 接口 C “继承”的类型。

这两个`T`s 不一定指的是同一类型。它们可以是相同的类型，如

```
public interface C<T> where T : B<T>, A { ... } 
```

或者它们可以是两种不同的类型：

```
public interface C<T, U> where T : B<U> where U : A { ... } 
```

在第一种情况下，对类型参数的限制当然更严格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:30:05.437

C 看起来像 Generic Generic 类型（因为缺少更好的词）。

这个 C 的定义会起作用吗？

```
public interface C<T,U> where T : B<U> where U : A
{
    List<T> b{ get; set; } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:30:55.413

由于接口中的泛型类型`B`只能是类型的实例`A`，因此在接口中`C`您需要声明`T`类型`B<A>`：

```
public interface A { }
public interface B<T> where T : A
{
    List<T> a { get; set; }
}
public interface C<T> where T : B<A>
{
    List<T> b { get; set; } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T09:30:59.733

这是因为你现在有一个`<List<T>>`where `T`is`B<T>`你`List<B>`需要为它指定一个类型的地方`B`。这就是你的错误的原因。

```
public interface C<T, T2> where T : B<T2>
  where T2 : A
{
  List<T> b { get; set; } 
} 
```

投到然后你会没事的`T2`:)`A`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T09:33:19.250

您可以在此处再添加一个界面，例如

```
public interface A { }
public interface B<T> where T : A
{
    List<T> a { get; set; }
}
public interface BA : B<A>
{ 
}
public interface C<T> where T : BA
{
    List<T> b { get; set; } // << ERROR: Using the generic type 'B<T>' requires 1 type arguments
} 
```

它解决了目的吗？

# java - @XmlRootElement(name="Helloworld") 注释再次引用原始类

> ID：14497855
> 
> 赞同：1
> 
> 时间：2013-01-24T09:25:47.947
> 
> 标签：java, web-services, soap

我有一堂课

```
@XmlRootElement(name="Helloworld")
@XmlType(propOrder = { "userName"})
public class UserDetails {
    //User Name
    private String userName;

    @XmlElement(name="UserName")   
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
} 
```

但是在我的 WSDL 中，我仍然得到

```
<xs:element name="Helloworld" type="tns:userDetails"/>
<xs:complexType name="userDetails">
<xs:sequence>
<xs:element minOccurs="0" name="UserName" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

WSDL 应该是这样的。

```
<xs:element name="Helloworld" type="tns:Helloworld"/>
<xs:complexType name="Helloworld">
<xs:sequence>
<xs:element minOccurs="0" name="UserName" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

我错过了什么吗。可以对此提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:33:21.323

上的名称仅影响元素声明，要更改复杂类型的名称，您还需要在注释`@XmlRootElement`上指定名称。`@XmlType`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:52:21.487

尝试使用这个：

```
@XmlRootElement(name="Helloworld")
@XmlType(name = "HelloWorld", propOrder = {"userName"})
public class UserDetails {
    //User Name
    private String userName;

    @XmlElement(name="UserName")   
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
} 
```

# jquery - 鼠标滚轮和滚动到如何停止多个事件触发

> ID：14497856
> 
> 赞同：1
> 
> 时间：2013-01-24T09:25:51.193
> 
> 标签：jquery, scrollto, mousewheel

我尝试了许多发布的解决方案，但无法正常工作。我正在使用 jQuery 鼠标滚轮插件来检测鼠标滚轮事件。

在滚动事件中，我只想使用 scrollTo() 滚动到给定的 id。我了解每次滚动都会触发多次事件存在问题，这就是为什么我在下面得到的代码无法正常工作的原因，如果有的话，滚动之间会出现长时间的延迟。

我已经剥离了我在计时器、解除绑定鼠标滚轮事件等方面的所有尝试，只保留了我需要的基本功能！scrollTo() 对点击事件工作正常，所以其他一切正常。

```
//scrollTo on mousewheel event

$(window).mousewheel(function() {
   $.scrollTo( '#home-top', 350, {easing:'swing'});
}); 
```

一些帮助/指针将不胜感激。

# java - FastSineTransformer - 用零填充数组以适应长度

> ID：14497858
> 
> 赞同：1
> 
> 时间：2013-01-24T09:25:53.330
> 
> 标签：java, math, poisson, apache-commons-math

我正在尝试为**Java**中的图像混合实现泊松求解器。在使用 5 星方法进行去离散化之后，真正的工作就开始了。为此，我使用颜色值执行以下三个步骤：

1.  对行和列使用正弦变换
2.  乘特征值
3.  对行和列使用反正弦变换

到目前为止，这有效。为了在 Java 中进行正弦变换，我使用了 Apache Commons Math 包。

但是[FastSineTransformer](http://ommons.apache.org/math/apidocs/org/apache/commons/math3/transform/FastSineTransformer.html "快速正弦变压器")有两个限制：

1.  数组中的第一个值必须为零（好吧，第二个是真正的问题）
2.  输入的长度必须是 2 的**幂**

所以现在我的摘录的长度是 127、255 等等。（我在开头插入一个零，这样 1 和 2 就满足了）这很愚蠢，因为我想选择我的摘录自由。

我的问题是： **有没有办法扩展我的数组，例如长度为 100 以适应 Apache FastSineTransformer 的限制？**

在 FastFourierTransfomer 类中提到，您可以用零填充以获得 2 的幂。但是当我这样做时，我会得到错误的结果。也许我做错了，但是当我用零填充时，我真的不知道是否有什么需要记住的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T11:49:21.807

据我所知[http://books.google.de/books?id=cOA-vwKIffkC&lpg=PP1&hl=de&pg=PA73#v=onepage&q&f=false](http://books.google.de/books?id=cOA-vwKIffkC&lpg=PP1&hl=de&pg=PA73#v=onepage&q&f=false)和来源[http://grepcode.com/file/repo1 .maven.org/maven2/org.apache.commons/commons-math3/3.2/org/apache/commons/math3/transform/FastSineTransformer.java?av=f](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-math3/3.2/org/apache/commons/math3/transform/FastSineTransformer.java?av=f)

规则如下：

*   根据实现，数据集大小应该是 2 的幂 - 可以推测，以便算法保证 O(n*log(n)) 执行时间。
*   根据 James S. Walker 的说法，函数必须是奇数，即上述假设必须是完整的，并且实现信任这一点。
*   根据实现，由于某种原因，第一个元素和中间元素必须为 0： x'[0] = x[0] = 0, x'[k] = x[k] if 1 <= k < N, x'[ N] = 0，如果 N + 1 <= k < 2N，则 x'[k] = -x[2N-k]。

至于您的情况，当您的数据集可能不是 2 的幂时，我建议您可以调整大小并用零填充间隙，而不会违反上述规则。但我建议先参考这本书。

# c++ - Boost sockets - 客户端没有从服务器接收所有字节

> ID：14497859
> 
> 赞同：4
> 
> 时间：2013-01-24T09:25:56.520
> 
> 标签：c++, networking, boost, boost-asio

我正在使用 C++ 开发一个应用程序，并且在使用 boost 套接字时遇到了一些困难。服务器发送图像但客户端未收到所有字节；客户端总是比服务器发送的少大约 500 个字节。下面提供的是程序运行的相关代码和截图。

服务器代码：

```
int sent = boost::asio::write(*socket, response, boost::asio::transfer_all(), error);
std::cout << "Sent: " << sent << std ::endl; 
```

客户端代码（我知道如果服务器发送的总字节数可被 10000 整除，read_some 将阻塞；此代码仅用于测试）：

```
int len = 0;
int count = 0;
do {
    len = socket->read_some( boost::asio::buffer( imageData, 10000 ) ); 
    count += len;
    std::cout << "len: " << len << std::endl;
    std::cout << "count: " << count << std::endl;
} while(len == 10000);

std::cout << "Image Received of size: " << count << std::endl; 
```

服务器截图： ![服务器截图](../Images/dc7972204fb220f11972302d332fd9ca.png)

客户端截图： ![客户端截图](../Images/b64eb072ad342ba4d90254bb092d6cd6.png)

谢谢你的时间; 任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T09:38:18.460

无法保证您会收到 10000 字节的完整缓冲区。

我推荐以下方法：

要发送一些不带任何显式终止符的二进制数据，首先发送其大小，然后再发送数据本身。在这种情况下，客户端将知道它应该在这个块中接收多少数据。

# android - 在Android中将图像设置为联系人照片

> ID：14497860
> 
> 赞同：1
> 
> 时间：2013-01-24T09:25:58.310
> 
> 标签：android, android-contacts

我有图像 URI。现在我想在 Android 中设置为照片我该如何开始？这是我的功能

```
 Cursor cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
            if(cursor.moveToNext())
            {

                    mContactName = cursor.getString(cursor.getColumnIndex((ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
                    mPhotoUri = Uri.withAppendedPath(result, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
                    mContactNumber = cursor.getString(cursor.getColumnIndex((ContactsContract.CommonDataKinds.Phone.NUMBER)));

                    Log.i("Dante", "ContactName = "+ mContactName  );
                    Log.i("Dante", "mContactNumber  ="+mContactNumber);
                    Log.i("Dante", " PhotoURI "+mPhotoUri );

            }

            ContentResolver cr = mContext.getContentResolver();
            int i = collagelistadaper.getItemPositon();
            ContentValues values = new ContentValues();   
            values.put(ContactsContract.Contacts.Photo.CONTENT_DIRECTORY,                                       Uri.fromFile(quiltFolder.listFiles()[i]).toString()); //ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).withValue(ContactsContract.Contacts.Photo.CONTENT_DIRECTORY, values);     
            Uri result1 = cr.insert(ContactsContract.Data.CONTENT_URI ,values);     
            // getContentResolver().update(mPhotoUri,values,null,null);             
        mPhotoUri = Uri.withAppendedPath(result,ContactsContract.Contacts.Photo.CONTENT_DIRECTORY); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:41:20.893

尝试这个，

```
Uri sendUri = Uri.fromFile(externalFile)
    Intent intent = new Intent(Intent.ACTION_ATTACH_DATA);
            intent.setDataAndType(sendUri, "image/jpg");
            intent.putExtra("mimeType", "image/jpg");
            startActivityForResult(Intent.createChooser(intent, "Set As"), 200); 
```

# mysql - 将 MySQL 导出到 .txt 选项卡，列标题全部在 MySQL 中？

> ID：14497861
> 
> 赞同：2
> 
> 时间：2013-01-24T09:26:03.610
> 
> 标签：mysql

我在 Linux (CentOS) 上使用 MySQL。我希望能够导出 MySQL 表以创建带有标题的 .txt 制表符分隔文件，以便可以将其导入 Salesforce。

这适用于 .txt 制表符分隔的文件：

```
SELECT * FROM myTable INTO OUTFILE 'data.txt' 
```

但它不包括列标题。我不喜欢使用命令行或 PHP 程序来执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:37:50.833

尝试这个 ：

```
SELECT 'ColName1', 'ColName2', 'ColName3'
UNION ALL
SELECT ColName1, ColName2, ColName3
INTO OUTFILE 'data.txt'
FIELDS TERMINATED BY '\t' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
FROM myTable; 
```

# java - 用java 7序列化，用java 6反序列化？

> ID：14497862
> 
> 赞同：3
> 
> 时间：2013-01-24T09:26:07.547
> 
> 标签：java, serialization, jvm, deserialization, java-7

知道是否应该使用 java 6 读取（反序列化）使用 java 7 的标准（默认）序列化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:28:12.967

如果您不序列化 Java 7 中添加的任何类，则可以读取它。即，您仍然需要接收端使用的每个类。

顺便说一句，在 Java 1.3 和 1.4 AFAIK 之间进行了不兼容的更改。您应该可以回到 Java 1.4。

# cruisecontrol.net - CCTray 是开源的吗？

> ID：14497865
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:26:09.063
> 
> 标签：cruisecontrol.net, cctray

我需要查看 CCTray 源代码。我只能找到在线下载其设置的链接，有什么方法可以获取它的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:14:26.277

CCNet 作为一个整体是开源的，可以在 github 上找到： [https ://github.com/ccnet/CruiseControl.NET](https://github.com/ccnet/CruiseControl.NET)

您也可以在那里找到 CCTray 的资源。

# java - String.format 不允许 int

> ID：14497866
> 
> 赞同：4
> 
> 时间：2013-01-24T09:26:13.313
> 
> 标签：java, eclipse, string-formatting

我正在寻找一种快速简便的方法将 int 格式化为带有两个前导零的字符串。我找到了这个[https://stackoverflow.com/a/4377337/47690](https://stackoverflow.com/a/4377337/47690)答案，它看起来像我需要的。所以我就这样实现了

```
int i = 34; //could be any value but you get the idea   
String.format("%03d", i); 
```

但是，Eclipse 似乎抱怨 String.format 的`Object[]`第二个参数需要一个。这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:31:56.787

如果要打印 的值`i`，可以使用：

```
System.out.printf("%03d", i); 
```

代替

```
System.out.println(String.format("%03d", i)); 
```

**编辑 ：**

~~我也在 Java 6 中尝试了你的代码，但它没有工作。所以，我使用了 printf()。~~ 哦。对不起！我清理了项目并且它工作。

我正在使用 Java 6 和 Eclipse Helios。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T09:39:52.327

检查你的项目设置

```
project -> Properties -> Java Compiler -> Compiler compliance level 
```

您可能使用的 Java 1.4 无法识别 vararg

```
String format(String format, Object ... args) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:29:02.550

以下在 Java 7 下编译并运行良好（Eclipse Juno SR1 对此很满意）：

```
public class Main {
    public static void main(String[] args) {
        int i = 42;   
        System.out.println(String.format("%03d", i));
    }
} 
```

错误消息是一条红鲱鱼：即使最后一个参数是`Object...`(aka `Object[]`)，自动装箱会处理所有事情。

我怀疑您使用的是过时的 Java 和/或 Eclipse 版本，或者您的 Eclipse 项目中的编译器合规级别设置为 pre-1.5（即使您使用的是 1.5+）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:48:13.033

String s = String.format("%04d", i);

此代码代表要字符串的数字中的 4 位数字，因此.. 如果您使用 %04d 我将在前面得到两个试用零

虽然 int i 是一个原始的并且它的期望对象作为它的参数，

它的 JVM 将在内部负责转换为对象数据类型

根据java实现看到这个..

```
public static String format(String format, Object ... args) {
return new Formatter().format(format, args).toString();
} 
```

动态附加零的示例代码...

导入 java.text.DecimalFormat；公共类 ArrayTest {

```
public static void main(String[] args) {
    int i = 34; //could be any value but you get the idea   
    int zeroCount = 2;

    String s = String.format("%d", i);
    int length = s.length()+zeroCount;

    System.out.println(String.format("%0"+length+"d", i));

    // second way u can achieve 
    DecimalFormat decimalFormat = new DecimalFormat();
    decimalFormat.setMinimumIntegerDigits(length);
    System.err.println(decimalFormat.format(i));
} 
```

}

谈到 System.format 的论点，它可能需要无限的不。参数作为它的可变参数对象作为第二个参数

检查这个网址 [http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

# jquery - jQuery SelectBox 插件按键

> ID：14497868
> 
> 赞同：4
> 
> 时间：2013-01-24T09:26:16.253
> 
> 标签：jquery, keypress, drop-down-menu

[http://www.bulgaria-web-developers.com/projects/javascript/selectbox/](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)

是否有任何“按键”事件，以便用户可以跳转到特定选项？就像我们有国家字段并且用户想搬到英国，那么他需要滚动以在列表中找到英国。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:48:43.057

看起来像越野车

试一试

```
$(document).keypress(function(e){
    console.log(String.fromCharCode(e.keyCode));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:04:18.277

基于 The Suresh Atta 解决方案，我创建了以下 jquery 扩展来实现解决方案

```
/*** EXTEND SELECT BOX TO HAVE KeyUp feature *********/
jQuery.fn.KeyUpSelectBox = function (options)
{
var myHandler = this;

this.init = function ()
{
    var sb = $(this).selectbox(options);
    var sbSelector = sb.attr('sb');

    $("#sbHolder_" + sbSelector).on('keyup', function (e)
    {
        var currentOptionText = $("#sbSelector_" + sbSelector).text().toLowerI();
        var keyText = String.fromCharCode(e.keyCode).toLowerI();

        var selectOptions = myHandler.find('option');
        var firstIndexWithLetter = -1;
        var bSet = false;
        var moveToNext = false;
        var bFoundOption = false;

        if (currentOptionText.substring(0, 1) == keyText)
        {
            moveToNext = true;
        }

        for (var i = 0; i < selectOptions.length; i++)
        {
            var optionText = $(selectOptions[i]).text().toLowerI();
            //console.log(optionText + ': ' + optionText.substring(0, 1));
            if (optionText.substring(0, 1) == keyText)
            {
                if (moveToNext)
                {
                    if (firstIndexWithLetter == -1) { firstIndexWithLetter = i; }

                    if (bFoundOption)
                    {
                        sb.selectbox("change", $(selectOptions[i]).attr('value'), $(selectOptions[i]).html());
                        sb.val($(selectOptions[i]).attr('value'));
                        bSet = true;
                        break;
                    }

                    if (optionText == currentOptionText)
                    {
                        bFoundOption = true;
                    }
                }
                else
                {
                    sb.selectbox("change", $(selectOptions[i]).attr('value'), $(selectOptions[i]).html());
                    sb.val($(selectOptions[i]).attr('value'));
                    break;
                }
            }
        }

        if (moveToNext && !bSet && (firstIndexWithLetter != -1))
        {
            sb.selectbox("change", $(selectOptions[firstIndexWithLetter]).attr('value'), $(selectOptions[firstIndexWithLetter]).html());
            sb.val($(selectOptions[firstIndexWithLetter]).attr('value'));
        }
    });
}

myHandler.init();

return myHandler;
} 
```

此扩展使用名为 toLowerI 的方法，它是一个字符串原型：

```
var patternLetters = /[öäüÖÄÜáàâéèêúùûóòôÁÀÂÉÈÊÚÙÛÓÒÔßãÃõÕçÇñÑ]/g;
var patternDateDmy = /^(?:\D+)?(\d{1,2})\.(\d{1,2})\.(\d{2,4})$/;
var lookupLetters = {
"ä": "a", "ö": "o", "ü": "u",
"Ä": "A", "Ö": "O", "Ü": "U",
"á": "a", "à": "a", "â": "a",
"é": "e", "è": "e", "ê": "e",
"ú": "u", "ù": "u", "û": "u",
"ó": "o", "ò": "o", "ô": "o",
"Á": "A", "À": "A", "Â": "A",
"É": "E", "È": "E", "Ê": "E",
"Ú": "U", "Ù": "U", "Û": "U",
"Ó": "O", "Ò": "O", "Ô": "O",
"ß": "s", "ã": "a", "Ã": "A",
"õ": "o", "Õ": "O", "ç": "c",
"Ç": "C", "ñ": "n", "Ñ": "N"
};

var letterTranslator = function (match)
{
    return lookupLetters[match] || match;
}

String.prototype.toLowerI = function ()
{
    return this.toLowerCase().replace(patternLetters, letterTranslator);
}; 
```

要使用它，而不是调用 .selectbox() 调用 .KeyUpSelectBox()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:37:15.323

好的。在“epocas”答案的基础上，我已将此代码集成到“jquery.selectbox-0.2.js”文件中，而不是像在“epocas”解决方案中那样扩展它......

插入发生在这里

sbHolder.data("uid", inst.uid).bind("keydown.sb", function (e) { ... });

这是完整的插入：

```
sbHolder.data("uid", inst.uid).bind("keydown.sb", function (e) {
  var letterTranslator = function (match){
    return lookupLetters[match] || match;
  };
  String.prototype.toLowerI = function (){
    return this.toLowerCase().replace(patternLetters, letterTranslator);
  };
  var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0,
      $this = $(this),
      uid = $this.data("uid"),
      inst = $this.siblings("select[sb='"+uid+"']").data(PROP_NAME),
      trgt = $this.siblings(["select[sb='", uid, "']"].join("")).get(0),
      $f = $this.find("ul").find("a." + inst.settings.classFocus),
      sb = $this,
      currentOptionText = $("#sbSelector_" + uid).text().toLowerI(),
      keyText = String.fromCharCode(e.keyCode).toLowerI(),
      selectOptions = $this.find("li a"),
      firstIndexWithLetter = -1,
      bSet = false,
      moveToNext = false,
      bFoundOption = false,
      patternLetters = /[öäüÖÄÜáàâéèêúùûóòôÁÀÂÉÈÊÚÙÛÓÒÔßãÃõÕçÇñÑ]/g,
      patternDateDmy = /^(?:\D+)?(\d{1,2})\.(\d{1,2})\.(\d{2,4})$/,
      lookupLetters = {
      "ä": "a", "ö": "o", "ü": "u",
      "Ä": "A", "Ö": "O", "Ü": "U",
      "á": "a", "à": "a", "â": "a",
      "é": "e", "è": "e", "ê": "e",
      "ú": "u", "ù": "u", "û": "u",
      "ó": "o", "ò": "o", "ô": "o",
      "Á": "A", "À": "A", "Â": "A",
      "É": "E", "È": "E", "Ê": "E",
      "Ú": "U", "Ù": "U", "Û": "U",
      "Ó": "O", "Ò": "O", "Ô": "O",
      "ß": "s", "ã": "a", "Ã": "A",
      "õ": "o", "Õ": "O", "ç": "c",
      "Ç": "C", "ñ": "n", "Ñ": "N"
      };
  if (currentOptionText.substring(0, 1) == keyText){
    moveToNext = true;
  }
  $("a", $this).removeClass(inst.settings.classFocus);
  for (var i = 0; i < selectOptions.length; i++){
    var optionText = $(selectOptions[i]).text().toLowerI();
    if (optionText.substring(0, 1) == keyText){
      if (moveToNext){
        if (firstIndexWithLetter == -1) { 
          firstIndexWithLetter = i; 
        }
        if (bFoundOption){
          $(selectOptions[i]).addClass(inst.settings.classFocus).focus();
          $("#sbSelector_" + uid).text(optionText);
          bSet = true;
          break;
        }
        if (optionText == currentOptionText){
          bFoundOption = true;
        }
      }
      else{
        $(selectOptions[i]).addClass(inst.settings.classFocus).focus();
        $("#sbSelector_" + uid).text(optionText);
        break;
      }
    }
  }     
  switch (key) {
      case 37: //Arrow Left
      case 38: //Arrow Up
          if ($f.length > 0) {
              var $next;
              $("a", $this).removeClass(inst.settings.classFocus);
              $next = $f.parent().prevAll("li:has(a)").eq(0).find("a");
              if ($next.length > 0) {
                  $next.addClass(inst.settings.classFocus).focus();
                  $("#sbSelector_" + uid).text($next.text());
              }
          }
          break;
      case 39: //Arrow Right
      case 40: //Arrow Down
          var $next;
          $("a", $this).removeClass(inst.settings.classFocus);
          if ($f.length > 0) {
              $next = $f.parent().nextAll("li:has(a)").eq(0).find("a");
          } else {
              $next = $this.find("ul").find("a").eq(0);
          }
          if ($next.length > 0) {
              $next.addClass(inst.settings.classFocus).focus();
              $("#sbSelector_" + uid).text($next.text());
          }
          break;                
      case 13: //Enter
          if ($f.length > 0) {
              self._changeSelectbox(trgt, $f.attr("rel"), $f.text());
          }
          self._closeSelectbox(trgt);
          break;
      case 9: //Tab
          if (trgt) {
              var inst = self._getInst(trgt);
              if (inst/* && inst.isOpen*/) {
                  if ($f.length > 0) {
                      self._changeSelectbox(trgt, $f.attr("rel"), $f.text());
                  }
                  self._closeSelectbox(trgt);
              }
          }
          var i = parseInt($this.attr("tabindex"), 10);
          if (!e.shiftKey) {
              i++;
          } else {
              i--;
          }
          $("*[tabindex='" + i + "']").focus();
          break;
      case 27: //Escape
          self._closeSelectbox(trgt);
          break;
  }
  e.stopPropagation();
  return false;
}).delegate("a", "mouseover", function (e) {
  $(this).addClass(inst.settings.classFocus);
}).delegate("a", "mouseout", function (e) {
  $(this).removeClass(inst.settings.classFocus);    
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T10:56:32.060

这是带有按键的工作插件。它从您键入的 n 个符号中动态搜索序列。如果您等待 1.5 秒，搜索将从第一个符号重新开始。

```
(function ($, undefined) {
    var PROP_NAME = 'selectbox',
        FALSE = false,
        TRUE = true,
        selectbox_keys = "",
        selectbox_keys_timeout = 0;
    /**
     * Selectbox manager.
     * Use the singleton instance of this class, $.selectbox, to interact with the select box.
     * Settings for (groups of) select boxes are maintained in an instance object,
     * allowing multiple different settings on the same page
     */
    function Selectbox() {
        this._state = [];
        this._defaults = { // Global defaults for all the select box instances
            classHolder: "sbHolder",
            classHolderDisabled: "sbHolderDisabled",
            classSelector: "sbSelector",
            classOptions: "sbOptions",
            classGroup: "sbGroup",
            classSub: "sbSub",
            classDisabled: "sbDisabled",
            classToggleOpen: "sbToggleOpen",
            classToggle: "sbToggle",
            classFocus: "sbFocus",
            speed: 200,
            effect: "slide", // "slide" or "fade"
            onChange: null, //Define a callback function when the selectbox is changed
            onOpen: null, //Define a callback function when the selectbox is open
            onClose: null //Define a callback function when the selectbox is closed
        };
    }

    $.extend(Selectbox.prototype, {
        /**
         * Is the first field in a jQuery collection open as a selectbox
         * 
         * @param {Object} target
         * @return {Boolean}
         */
        _isOpenSelectbox: function (target) {
            if (!target) {
                return FALSE;
            }
            var inst = this._getInst(target);
            return inst.isOpen;
        },
        /**
         * Is the first field in a jQuery collection disabled as a selectbox
         * 
         * @param {HTMLElement} target
         * @return {Boolean}
         */
        _isDisabledSelectbox: function (target) {
            if (!target) {
                return FALSE;
            }
            var inst = this._getInst(target);
            return inst.isDisabled;
        },
        /**
         * Attach the select box to a jQuery selection.
         * 
         * @param {HTMLElement} target
         * @param {Object} settings
         */
        _attachSelectbox: function (target, settings) {
            if (this._getInst(target)) {
                return FALSE;
            }
            var $target = $(target),
                self = this,
                inst = self._newInst($target),
                sbHolder, sbSelector, sbToggle, sbOptions,
                s = FALSE, optGroup = $target.find("optgroup"), opts = $target.find("option"), olen = opts.length;

            $target.attr("sb", inst.uid);

            $.extend(inst.settings, self._defaults, settings);
            self._state[inst.uid] = FALSE;
            $target.hide();

            function closeOthers() {
                var key, sel,
                    uid = this.attr("id").split("_")[1];
                for (key in self._state) {
                    if (key !== uid) {
                        if (self._state.hasOwnProperty(key)) {
                            sel = $("select[sb='" + key + "']")[0];
                            if (sel) {
                                self._closeSelectbox(sel);
                            }
                        }
                    }
                }
            }

            sbHolder = $("<div>", {
                "id": "sbHolder_" + inst.uid,
                "class": inst.settings.classHolder,
                "tabindex": $target.attr("tabindex")
            });

            sbSelector = $("<a>", {
                "id": "sbSelector_" + inst.uid,
                "href": "#",
                "class": inst.settings.classSelector,
                "click": function (e) {
                    e.preventDefault();
                    closeOthers.apply($(this), []);
                    var uid = $(this).attr("id").split("_")[1];
                    if (self._state[uid]) {
                        self._closeSelectbox(target);
                    } else {
                        self._openSelectbox(target);
                    }
                }
            });

            sbToggle = $("<a>", {
                "id": "sbToggle_" + inst.uid,
                "href": "#",
                "class": inst.settings.classToggle,
                "click": function (e) {
                    e.preventDefault();
                    closeOthers.apply($(this), []);
                    var uid = $(this).attr("id").split("_")[1];
                    if (self._state[uid]) {
                        self._closeSelectbox(target);
                    } else {
                        self._openSelectbox(target);
                    }
                }
            });
            sbToggle.appendTo(sbHolder);

            sbOptions = $("<ul>", {
                "id": "sbOptions_" + inst.uid,
                "class": inst.settings.classOptions,
                "css": {
                    "display": "none"
                }
            });

            $target.children().each(function(i) {
                var that = $(this), li, config = {};
                if (that.is("option")) {
                    getOptions(that);
                } else if (that.is("optgroup")) {
                    li = $("<li>");
                    $("<span>", {
                        "text": that.attr("label")
                    }).addClass(inst.settings.classGroup).appendTo(li);
                    li.appendTo(sbOptions);
                    if (that.is(":disabled")) {
                        config.disabled = true;
                    }
                    config.sub = true;
                    getOptions(that.find("option"), config);
                }
            });

            function getOptions () {
                var sub = arguments[1] && arguments[1].sub ? true : false,
                    disabled = arguments[1] && arguments[1].disabled ? true : false;
                arguments[0].each(function (i) {
                    var that = $(this),
                        li = $("<li>"),
                        child;
                    if (that.is(":selected")) {
                        sbSelector.text(that.text());
                        s = TRUE;
                    }
                    if (i === olen - 1) {
                        li.addClass("last");
                    }
                    if (!that.is(":disabled") && !disabled) {
                        child = $("<a>", {
                            "href": "#" + that.val(),
                            "rel": that.val()
                        }).text(that.text()).bind("click.sb", function (e) {
                            if (e && e.preventDefault) {
                                e.preventDefault();
                            }
                            var t = sbToggle,
                                $this = $(this),
                                uid = t.attr("id").split("_")[1];
                            self._changeSelectbox(target, $this.attr("rel"), $this.text());
                            self._closeSelectbox(target);
                        }).bind("mouseover.sb", function () {
                            var $this = $(this);
                            $this.parent().siblings().find("a").removeClass(inst.settings.classFocus);
                            $this.addClass(inst.settings.classFocus);
                        }).bind("mouseout.sb", function () {
                            $(this).removeClass(inst.settings.classFocus);
                        });
                        if (sub) {
                            child.addClass(inst.settings.classSub);
                        }
                        if (that.is(":selected")) {
                            child.addClass(inst.settings.classFocus);
                        }
                        child.appendTo(li);
                    } else {
                        child = $("<span>", {
                            "text": that.text()
                        }).addClass(inst.settings.classDisabled);
                        if (sub) {
                            child.addClass(inst.settings.classSub);
                        }
                        child.appendTo(li);
                    }
                    li.appendTo(sbOptions);
                });
            }

            if (!s) {
                sbSelector.text(opts.first().text());
            }

            $.data(target, PROP_NAME, inst);

            //sbHolder.data("uid", inst.uid).bind("keydown.sb", function (e) {
            sbHolder.data("uid", inst.uid).keypress(function(e) {
                var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0,
                    $this = $(this),
                    uid = $this.data("uid"),
                    inst = $this.siblings("select[sb='"+uid+"']").data(PROP_NAME),
                    trgt = $this.siblings(["select[sb='", uid, "']"].join("")).get(0),
                    $f = $this.find("ul").find("a." + inst.settings.classFocus);
                switch (key) {
                    case 37: //Arrow Left
                    case 38: //Arrow Up
                        if ($f.length > 0) {
                            var $next;
                            $("a", $this).removeClass(inst.settings.classFocus);
                            $next = $f.parent().prevAll("li:has(a)").eq(0).find("a");
                            if ($next.length > 0) {
                                $next.addClass(inst.settings.classFocus).focus();
                                $("#sbSelector_" + uid).text($next.text());
                            }
                        }
                        break;
                    case 39: //Arrow Right
                    case 40: //Arrow Down
                        var $next;
                        $("a", $this).removeClass(inst.settings.classFocus);
                        if ($f.length > 0) {
                            $next = $f.parent().nextAll("li:has(a)").eq(0).find("a");
                        } else {
                            $next = $this.find("ul").find("a").eq(0);
                        }
                        if ($next.length > 0) {
                            $next.addClass(inst.settings.classFocus).focus();
                            $("#sbSelector_" + uid).text($next.text());
                        }
                        break;              
                    case 13: //Enter
                        if ($f.length > 0) {
                            self._changeSelectbox(trgt, $f.attr("rel"), $f.text());
                        }
                        self._closeSelectbox(trgt);
                        break;
                    case 9: //Tab
                        if (trgt) {
                            var inst = self._getInst(trgt);
                            if (inst/* && inst.isOpen*/) {
                                if ($f.length > 0) {
                                    self._changeSelectbox(trgt, $f.attr("rel"), $f.text());
                                }
                                self._closeSelectbox(trgt);
                            }
                        }
                        var i = parseInt($this.attr("tabindex"), 10);
                        if (!e.shiftKey) {
                            i++;
                        } else {
                            i--;
                        }
                        $("*[tabindex='" + i + "']").focus();
                        break;
                    case 27: //Escape
                        self._closeSelectbox(trgt);
                        break;
                    default:
                        var theChar = String.fromCharCode(key);
                        var cur_check = selectbox_keys+theChar.toLowerCase();
                        $next = -1;
                        $this.find("ul").find("a").each(function() {
                            var text = jQuery(this).text().toLowerCase();
                            if (text.indexOf(cur_check) == 0) {
                                $next = jQuery(this);
                                selectbox_keys = cur_check;
                                return 0;
                            }
                        });

                        if ($next != -1) {
                            $("a", $this).removeClass(inst.settings.classFocus);
                            $next.addClass(inst.settings.classFocus).focus();
                            $("#sbSelector_" + uid).text($next.text());
                        }

                        clearTimeout(selectbox_keys_timeout);
                        var selectbox_keys_timeout = setTimeout(function() {
                            selectbox_keys = "";    
                        },1500);
                        break;
                }
                e.stopPropagation();
                return false;
            }).delegate("a", "mouseover", function (e) {
                $(this).addClass(inst.settings.classFocus);
            }).delegate("a", "mouseout", function (e) {
                $(this).removeClass(inst.settings.classFocus);  
            });

            sbSelector.appendTo(sbHolder);
            sbOptions.appendTo(sbHolder);           
            sbHolder.insertAfter($target);

            $("html").on('mousedown', function(e) {
                e.stopPropagation();          
                $("select").selectbox('close'); 
            });
            $([".", inst.settings.classHolder, ", .", inst.settings.classSelector].join("")).mousedown(function(e) {    
                e.stopPropagation();
            });
        },
        /**
         * Remove the selectbox functionality completely. This will return the element back to its pre-init state.
         * 
         * @param {HTMLElement} target
         */
        _detachSelectbox: function (target) {
            var inst = this._getInst(target);
            if (!inst) {
                return FALSE;
            }
            $("#sbHolder_" + inst.uid).remove();
            $.data(target, PROP_NAME, null);
            $(target).show();           
        },
        /**
         * Change selected attribute of the selectbox.
         * 
         * @param {HTMLElement} target
         * @param {String} value
         * @param {String} text
         */
        _changeSelectbox: function (target, value, text) {
            var onChange,
                inst = this._getInst(target);
            if (inst) {
                onChange = this._get(inst, 'onChange');
                $("#sbSelector_" + inst.uid).text(text);
            }
            value = value.replace(/\'/g, "\\'");
            $(target).find("option[value='" + value + "']").attr("selected", TRUE);
            if (inst && onChange) {
                onChange.apply((inst.input ? inst.input[0] : null), [value, inst]);
            } else if (inst && inst.input) {
                inst.input.trigger('change');
            }
        },
        /**
         * Enable the selectbox.
         * 
         * @param {HTMLElement} target
         */
        _enableSelectbox: function (target) {
            var inst = this._getInst(target);
            if (!inst || !inst.isDisabled) {
                return FALSE;
            }
            $("#sbHolder_" + inst.uid).removeClass(inst.settings.classHolderDisabled);
            inst.isDisabled = FALSE;
            $.data(target, PROP_NAME, inst);
        },
        /**
         * Disable the selectbox.
         * 
         * @param {HTMLElement} target
         */
        _disableSelectbox: function (target) {
            var inst = this._getInst(target);
            if (!inst || inst.isDisabled) {
                return FALSE;
            }
            $("#sbHolder_" + inst.uid).addClass(inst.settings.classHolderDisabled);
            inst.isDisabled = TRUE;
            $.data(target, PROP_NAME, inst);
        },
        /**
         * Get or set any selectbox option. If no value is specified, will act as a getter.
         * 
         * @param {HTMLElement} target
         * @param {String} name
         * @param {Object} value
         */
        _optionSelectbox: function (target, name, value) {
            var inst = this._getInst(target);
            if (!inst) {
                return FALSE;
            }
            //TODO check name
            inst[name] = value;
            $.data(target, PROP_NAME, inst);
        },
        /**
         * Call up attached selectbox
         * 
         * @param {HTMLElement} target
         */
        _openSelectbox: function (target) {
            var inst = this._getInst(target);
            //if (!inst || this._state[inst.uid] || inst.isDisabled) {
            if (!inst || inst.isOpen || inst.isDisabled) {
                return;
            }
            var el = $("#sbOptions_" + inst.uid),
                viewportHeight = parseInt($(window).height(), 10),
                offset = $("#sbHolder_" + inst.uid).offset(),
                scrollTop = $(window).scrollTop(),
                height = el.prev().height(),
                diff = viewportHeight - (offset.top - scrollTop) - height / 2,
                onOpen = this._get(inst, 'onOpen');
            el.css({
                "top": height + "px",
                "maxHeight": (diff - height) + "px"
            });
            inst.settings.effect === "fade" ? el.fadeIn(inst.settings.speed) : el.slideDown(inst.settings.speed);
            $("#sbToggle_" + inst.uid).addClass(inst.settings.classToggleOpen);
            this._state[inst.uid] = TRUE;
            inst.isOpen = TRUE;
            if (onOpen) {
                onOpen.apply((inst.input ? inst.input[0] : null), [inst]);
            }
            $.data(target, PROP_NAME, inst);
        },
        /**
         * Close opened selectbox
         * 
         * @param {HTMLElement} target
         */
        _closeSelectbox: function (target) {
            var inst = this._getInst(target);
            //if (!inst || !this._state[inst.uid]) {
            if (!inst || !inst.isOpen) {
                return;
            }
            var onClose = this._get(inst, 'onClose');
            inst.settings.effect === "fade" ? $("#sbOptions_" + inst.uid).fadeOut(inst.settings.speed) : $("#sbOptions_" + inst.uid).slideUp(inst.settings.speed);
            $("#sbToggle_" + inst.uid).removeClass(inst.settings.classToggleOpen);
            this._state[inst.uid] = FALSE;
            inst.isOpen = FALSE;
            if (onClose) {
                onClose.apply((inst.input ? inst.input[0] : null), [inst]);
            }
            $.data(target, PROP_NAME, inst);
        },
        /**
         * Create a new instance object
         * 
         * @param {HTMLElement} target
         * @return {Object}
         */
        _newInst: function(target) {
            var id = target[0].id.replace(/([^A-Za-z0-9_-])/g, '\\\\$1');
            return {
                id: id, 
                input: target, 
                uid: Math.floor(Math.random() * 99999999),
                isOpen: FALSE,
                isDisabled: FALSE,
                settings: {}
            }; 
        },
        /**
         * Retrieve the instance data for the target control.
         * 
         * @param {HTMLElement} target
         * @return {Object} - the associated instance data
         * @throws error if a jQuery problem getting data
         */
        _getInst: function(target) {
            try {
                return $.data(target, PROP_NAME);
            }
            catch (err) {
                throw 'Missing instance data for this selectbox';
            }
        },
        /**
         * Get a setting value, defaulting if necessary
         * 
         * @param {Object} inst
         * @param {String} name
         * @return {Mixed}
         */
        _get: function(inst, name) {
            return inst.settings[name] !== undefined ? inst.settings[name] : this._defaults[name];
        }
    });

    /**
     * Invoke the selectbox functionality.
     * 
     * @param {Object|String} options
     * @return {Object}
     */
    $.fn.selectbox = function (options) {

        var otherArgs = Array.prototype.slice.call(arguments, 1);
        if (typeof options == 'string' && options == 'isDisabled') {
            return $.selectbox['_' + options + 'Selectbox'].apply($.selectbox, [this[0]].concat(otherArgs));
        }

        if (options == 'option' && arguments.length == 2 && typeof arguments[1] == 'string') {
            return $.selectbox['_' + options + 'Selectbox'].apply($.selectbox, [this[0]].concat(otherArgs));
        }

        return this.each(function() {
            typeof options == 'string' ?
                $.selectbox['_' + options + 'Selectbox'].apply($.selectbox, [this].concat(otherArgs)) :
                $.selectbox._attachSelectbox(this, options);
        });
    };

    $.selectbox = new Selectbox(); // singleton instance
    $.selectbox.version = "0.2";
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:30:09.090

好吧，你可以自己做。

1.  选择选择框
2.  添加`.keyup()`事件监听器
3.  在那个事件监听器中，寻找一个按下的按钮
4.  如果按下的按钮与项目（或项目的第一个字符）匹配，则通过该项目触发单击事件`.trigger('click')`

这应该有效（理论上）。

# xcode - 其他链接器标志列表

> ID：14497872
> 
> 赞同：10
> 
> 时间：2013-01-24T09:26:30.090
> 
> 标签：xcode, linker, flags

是否有可以放入`Other Linker Flags`Xcode 构建设置字段的所有标志的列表？

我搜索了没有结果的开发人员文档。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T09:35:36.263

`ld`好吧，在 中提供了所有受支持的标志的最终列表[`ld manpage`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/ld.1.html)，我想您必须忽略 Xcode 正确支持的标志才能获得您的列表。

当然，您可以通过启动终端并键入以下内容从 Mac 访问联机帮助页：

```
$ man ld 
```

它也可能从 Xcode 文档窗口中获得。

# git - 将 Git 存储库添加到 Perforce 库

> ID：14497874
> 
> 赞同：4
> 
> 时间：2013-01-24T09:26:43.647
> 
> 标签：git, perforce

我正在尝试将签出的 Git 存储库添加到我的 Perforce 库。不要误会我的意思：Git 和 Perforce 之间没有集成，我只想在那里放置一个外部 Git 存储库，以便我可以像 Git 存储库一样访问它，并像往常一样使用拉/推和其他 Git 操作。

在 .git 文件夹中，我提交了除了 TortoiseGit 特定文件和 hooks 文件夹之外的所有内容。

但是，当我将该 Git 存储库下载到另一台 PC 上的 Perforce 工作区时，`git status`告诉我`'atal: Reference has invalid format: 'refs/remotes/origin/master`. 所有四个名为 master 的文件看起来都不错，`.git\refs\remotes\origin\master`例如，该文件包含一个提交哈希，后跟一个 Windows 换行符。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:32:54.363

好吧，那是相当明显的。Perforce 很愚蠢，默认情况下会自动转换行尾。见[这里](http://kb.perforce.com/article/63)。可以在高级工作区选项中更改。

Git 不喜欢`.git/*`文件中的 Windows 样式的换行符，更糟糕的是，例如，如果所有源代码都有 LF 换行符并且 Perforce 将它们转换为 CRLF，那么您的整个 Git 工作树将被标记为已修改。耶！（当然，像 Git 这样的优秀 VCS 会为您提供“按原样签出，按原样提交”选项，这是唯一有意义的选项。）

# random - 如何实现（伪）硬件随机数生成器

> ID：14497877
> 
> 赞同：7
> 
> 时间：2013-01-24T09:27:00.373
> 
> 标签：random, verilog, hdl

如何在 HDL（verilog）中实现硬件随机数生成器？

需要考虑哪些选项？

* * *

本题采用[自答题](https://stackoverflow.com/help/self-answer)形式。鼓励添加答案和更新。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-22T12:39:22.083

正如摩根的回答中指出的那样，这只会产生一个随机位。LFSR 中的位数仅设置您在序列重复之前获得多少个值。如果你想要一个 N 位随机数，你必须运行 LFSR N 个周期。但是，如果您希望每个时钟周期都有一个新数字，则另一种选择是展开循环并预测 N 个周期内的数字。重复下面摩根的例子，但每个周期得到一个 5 位的数字：

```
module fibonacci_lfsr_5bit(
  input clk,
  input rst_n,

  output reg [4:0] data
);

reg [4:0] data_next;

always @* begin
  data_next[4] = data[4]^data[1];
  data_next[3] = data[3]^data[0];
  data_next[2] = data[2]^data_next[4];
  data_next[1] = data[1]^data_next[3];
  data_next[0] = data[0]^data_next[2];
end

always @(posedge clk or negedge rst_n)
  if(!rst_n)
    data <= 5'h1f;
  else
    data <= data_next;

endmodule 
```

编辑：在下面添加了一个新版本，不需要你做数学。把它放在一个循环中，让综合工具找出逻辑：

```
module fibonacci_lfsr_nbit
   #(parameter BITS = 5)
   (
    input             clk,
    input             rst_n,

    output reg [4:0] data
    );

   reg [4:0] data_next;
   always_comb begin
      data_next = data;
      repeat(BITS) begin
         data_next = {(data_next[4]^data_next[1]), data_next[4:1]};
      end
   end

   always_ff @(posedge clk or negedge reset) begin
      if(!rst_n)
         data <= 5'h1f;
      else
         data <= data_next;
      end
   end

endmodule 
```

我也想让 LFSR 长度参数化，但这要困难得多，因为反馈抽头不遵循简单的模式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-09T14:00:32.533

这是一个在 FPGA 上工作的 TRNG（真随机数生成器）。它基本上是一个没有触发器的 LFSR 类型的结构，所以它是一个连续运行的组合循环。信号混乱地振荡，当您组合其中几个模块和 XOR 位时，您会得到一个真正随机的位，因为来自每个组合的抖动。您可以运行的最大时钟频率取决于您的 FPGA，您应该使用 diehard、dieharder、STS 或 TestU01 等测试套件来测试随机性。

这些被称为伽罗瓦环形振荡器（GARO）。还有其他 TRNG 使用更少的功率和面积，但它们的操作和写入更复杂，通常依靠调整延迟来使触发器进入亚稳态。

```
module GARO (input stop,clk, reset, output random);

(* OPTIMIZE="OFF" *)                    //stop *xilinx* tools optimizing this away
wire [31:1] stage /* synthesis keep */; //stop *altera* tools optimizing this away
reg meta1, meta2;

assign random = meta2;

always@(posedge clk or negedge reset)
if(!reset)
  begin
    meta1 <= 1'b0;
    meta2 <= 1'b0;
  end
else if(clk)
  begin
    meta1 <= stage[1];
    meta2 <= meta1;
  end

assign stage[1] = ~&{stage[2] ^ stage[1],stop};
assign stage[2] = !stage[3];
assign stage[3] = !stage[4] ^ stage[1];
assign stage[4] = !stage[5] ^ stage[1];
assign stage[5] = !stage[6] ^ stage[1];
assign stage[6] = !stage[7] ^ stage[1];
assign stage[7] = !stage[8];
assign stage[8] = !stage[9] ^ stage[1];
assign stage[9] = !stage[10] ^ stage[1];
assign stage[10] = !stage[11];
assign stage[11] = !stage[12];
assign stage[12] = !stage[13] ^ stage[1];
assign stage[13] = !stage[14];
assign stage[14] = !stage[15] ^ stage[1];
assign stage[15] = !stage[16] ^ stage[1];
assign stage[16] = !stage[17] ^ stage[1];
assign stage[17] = !stage[18];
assign stage[18] = !stage[19];
assign stage[19] = !stage[20] ^ stage[1];
assign stage[20] = !stage[21] ^ stage[1];
assign stage[21] = !stage[22];
assign stage[22] = !stage[23];
assign stage[23] = !stage[24];
assign stage[24] = !stage[25];
assign stage[25] = !stage[26];
assign stage[26] = !stage[27] ^ stage[1];
assign stage[27] = !stage[28];
assign stage[28] = !stage[29];
assign stage[29] = !stage[30];
assign stage[30] = !stage[31];
assign stage[31] = !stage[1];

endmodule 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-24T09:27:00.373

[LFSR](http://en.wikipedia.org/wiki/LFSR)通常是第一个停靠港。实现比较简单，一个移位寄存器与多个项 XORd 一起创建反馈项。

在考虑LFSR的实现时，需要考虑随机数的位宽和数字的可重复性。使用 N 位，最大 LFSR 将具有`(2**N) - 1`状态。如果没有额外的硬件，就不能使用所有零状态。

一个[4 位 LFSR 示例](https://github.com/rcastle/verilog_lfsr/blob/master/fibonacci_lfsr.v)，带有位 0 和位 4 的抽头：

```
module fibonacci_lfsr(
  input  clk,
  input  rst_n,

  output [4:0] data
);

wire feedback = data[4] ^ data[1] ;

always @(posedge clk or negedge rst_n)
  if (~rst_n) 
    data <= 4'hf;
  else
    data <= {data[3:0], feedback} ;

endmodule 
```

可以从此[表](http://www.ece.cmu.edu/~koopman/lfsr/index.html)中找到选择抽头点并找出序列长度（重复之前的数字数量） 。

例如，一个 17,820,000、30 位宽的序列可以使用 的抽头：

```
0x20000029 => bits "100000000000000000000000101001"   
0x2000005E => bits "100000000000000000000001011110"
0x20000089 => bits "100000000000000000000010001001" 
```

第一个将有一个反馈项：

```
feedback = data[29] ^ data[5] ^ data[3] ^ data[0]; 
```

如果您不确定抽头的顺序，请记住 MSB 始终是反馈点。最后（抽头）反馈点定义了 LFSR 的有效长度，之后它只是一个移位寄存器，与反馈序列无关。

如果您需要 69,273,666 的序列，则必须实现 31 位 LFSR 并为您的随机数选择 30 位。

LFSR 是创建 1 位随机数流的好方法，但如果您采用多个连续位来表示值之间存在相关性，则它是相同的数字移位加上抖动位。如果数字被用作抖动流，您可能需要引入映射层，例如每隔一个位交换一次。或者，对每个位使用不同长度的 LFSR 或抽头点。

## 延伸阅读

[Efficient Shift Registers, LFSR Counters, and Long Pseudo-Random Sequence Generators，
Peter Alfke 的 Xilinx 应用笔记](http://www.xilinx.com/support/documentation/application_notes/xapp052.pdf)。

[Virtex 器件中的线性反馈移位寄存器，
Maria George 和 Peter Alfke 的 Xilinx 应用笔记](http://www.xilinx.com/support/documentation/application_notes/xapp210.pdf)。

# javascript - 单击时更改按钮的值

> ID：14497882
> 
> 赞同：0
> 
> 时间：2013-01-24T09:27:19.997
> 
> 标签：javascript, jquery

我有一个笑话列表，我想在一个框中显示。加载页面时，我想在框中随机显示一个。然后，当我单击该框时，我希望它再次将值更改为列表中的另一个随机值。

目前我只是无法让它工作，也无法弄清楚我哪里出错了。我的 HTML 如下：

```
<input class="box" type="button" value"" />
<ul>
    <li>How much do pirates pay to get their ear pierced? &lt;/br&gt; A buck anear!</li>
    <li>How do pirates talk to one another? &lt;/br&gt; Aye to aye!</li>
    <li>What did the sea say to the pirate captain? &lt;/br&gt; Nothing, it justwaved!</li>
    <li>What is a pirates favourite shop? &lt;/br&gt; Ar-gos!</li>
    <li>When is it the best time for a pirate to buy a ship? &lt;/br&gt; Whenit is on sail!</li>
</ul> 
```

脚本是：

```
 $(document).ready(function () {

    var list = $("ul li").toArray();
    var elemlength = list.length;
    var randomnum = Math.floor(Math.random() * elemlength);
    var randomitem = list[randomnum];

    $('.box').click(function () {
        $(this).val(randomitem);
    });
}); 
```

有人可以告诉我如何在页面加载时使按钮具有值，然后在单击按钮时更改值。

小提琴：http: [//jsfiddle.net/uRd6N/98/](http://jsfiddle.net/uRd6N/98/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:31:09.917

那么你有两个问题。

首先是您总是选择同一个笑话（在页面加载时确定）。第二个是您将整个`li`元素添加到按钮的值中。

尝试这个：

```
$(document).ready(function () {
    var list = $("ul li").toArray();
    var elemlength = list.length;

    $('.box').click(function () {
        // get a new joke every time a button is clicked
        var randomnum = Math.floor(Math.random() * elemlength);
        var randomitem = list[randomnum].innerHTML; // use the HTML of the <li>
        $(this).val(randomitem);
    });
}); 
```

现场示例：http: [//jsfiddle.net/NxdEc/](http://jsfiddle.net/NxdEc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:29:49.540

你不需要加载一个 jQuery 对象来设置一个值。您还`randomitem`需要明确获取元素`innerText`的`li`

```
$(document).ready(function () {

    var list = $("ul li").toArray();
    var elemlength = list.length;
    var randomnum = Math.floor(Math.random() * elemlength);
    var randomitem = list[randomnum].innerText;

    $('.box').click(function () {
        this.value = randomitem;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:32:43.617

您应该对代码进行一些更改：

*   每次单击按钮时都会生成随机值。在您的代码中，随机值仅生成一次。
*   单击按钮时分配元素文本，而不是元素本身。
*   设置一个初始值。

函数内的随机生成和赋值封装在您的代码中会非常有用。这段代码现在可以运行（可以在[http://jsfiddle.net/uRd6N/99/](http://jsfiddle.net/uRd6N/99/)运行它）：

```
$(document).ready(function () {
    var list = $("ul li").toArray();
    var elemlength = list.length;

    // Encapsulate random value assignment within a function
    var setRandomValue = function(element) {
            var randomnum = Math.floor(Math.random() * elemlength);
            var randomitem = list[randomnum];
            $(element).val($(randomitem).text());
    }

    // Bind click button
    $('.box').click(function () {
        setRandomValue(this);
    });

    // Set random value for the first time
    setRandomValue($('.box'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:30:57.640

代替

```
$(this).val(randomitem); 
```

和：

```
$(this).val($(randomitem).text()); 
```

PS：甚至更好

```
$(document).ready(function () {

    var list = $("ul li");
    var elemlength = list.length;
    var randomnum = Math.floor(Math.random() * elemlength);
    var randomitem = list.eq(randomnum);

    $('.box').click(function () {
        this.value = randomitem.text();
    });
}); 
```

PPS：如果你想让按钮成为一个 div，你可以做类似的事情：

```
$(document).ready(function () {

    var list = $("ul li");
    var elemlength = list.length;
    var randomnum = Math.floor(Math.random() * elemlength);
    var randomitem = list.eq(randomnum);

    $('.box').click(function () {
        $(this).html(randomitem.text());
    });
}) 
```

请务必更改 div 的样式，因为它看起来与输入的样式不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:59:23.720

试试这个小提琴（这是你的一个叉子）：http: [//jsfiddle.net/darshanags/qHpkk/1/](http://jsfiddle.net/darshanags/qHpkk/1/)

HTML（更新）：

```
<input class="box" type="button" value="Value at page load" /> 
```

jQuery：

```
$(document).ready(function () {

  $('.box').click(function () {

    var $items = $("ul li"),
        list = $items.toArray(),
        elemlength = list.length,
        randomnum = Math.floor(Math.random() * elemlength);

     $(this).val($items.eq(randomnum).text());
  });
}); 
```

# assembly - 在 MIPS 中查找字符串的字符

> ID：14497885
> 
> 赞同：1
> 
> 时间：2013-01-24T09:27:29.587
> 
> 标签：assembly, mips, spim

如何在 MIPS 中已知长度的用户输入字符串中找到特定字符？我看过 SO 以及许多其他网站，但是，似乎没有一个可以从根本上解释如何操作用户输入的数据。

这是我到目前为止所拥有的：

```
A_string: 
.space 11
buffer:
asciiz"Is this inputed string 10 chars long?"
main: 

la $a0, buffer
li $v0, 4
syscall

li $v0, 8
la $a0, A_string
li $a1, 11
syscall 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:55:26.073

您必须遍历读取缓冲区以查找所需的特定字符。

例如，假设您想`'x'`在输入数据中查找字符，并假设此代码段放在您的代码之后，因此`$a1`已经读取了最大数量的字符。您必须从缓冲区的开头开始并迭代，直到找到您期望的字符或者您已经遍历了整个缓冲区：

```
 xor $a0, $a0, $a0
search:  
  lbu $a2, A_string($a0)
  beq $a2, 'x', found    # We are looking for character 'x'
  addiu $a0, $a0, 1
  bne $a0, $a1, search
not_found:
    # Code here is executed if the character is not found
    b done
found:
    # Code here is executed if the character is found
done: 
```

# regex - Use grep to match and erase a pattern and its previous line in a large chunck of text

> ID：14497890
> 
> 赞同：3
> 
> 时间：2013-01-24T09:27:47.343
> 
> 标签：regex, grep

I have a very large text file which contains data similar to the following:

```
he/PRP have/VBD obtain/VBN the/DT ##archbishopric/NN## against/IN the/DT monk/NNS of/IN the/DT

craft/NN ,/Fc he/PRP obtain/VBD the/DT ##archbishopric/NN## of/IN besancon/NP ;/Fx and/CC have/VBD it/PRP in/IN
======>match found: \#\#\sof\/IN

succeed/VBN to/TO the/DT ##archbishopric/NN## ./Fp

klutzy/NN little/JJ ##scene/NN## where/WRB 1/Z brave/JJ french/JJ man/NN refuse/VBZ to/TO sit/VB down/RP for/IN fear/NN of/IN be/VBG discover/VBN ./Fp
======>match found: \#\#\swhere\/WRB\s 
```

I would like to use grep to match and erase all those lines that contain a line of "text" followed immediately after a new line character with **=====>match found:** , as in:

```
craft/NN ,/Fc he/PRP obtain/VBD the/DT ##archbishopric/NN## of/IN besancon/NP ;/Fx and/CC have/VBD it/PRP in/IN
======>match found: \#\#\sof\/IN 
```

and end with a newline character.

Thus, according to the previous example, I'd like to run grep and obtain the following output

```
he/PRP have/VBD obtain/VBN the/DT ##archbishopric/NN## against/IN the/DT monk/NNS of/IN the/DT

succeed/VBN to/TO the/DT ##archbishopric/NN## ./Fp 
```

I have already tried: `grep -E -v '^.+\n======>match found:.+$' file.txt`

as suggested [here](https://stackoverflow.com/questions/14482938/use-grep-to-match-and-erase-a-pattern-in-a-large-chunck-of-text) by appending the regex `.+*\n` to the command to include the previous line, but it is not working, any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:44:26.007

此`sed`命令接近您想要的：

```
$ sed -n 'N;/\n======>match found:/d; P;D' textfile 
he/PRP have/VBD obtain/VBN the/DT ##archbishopric/NN## against/IN the/DT monk/NNS of/IN the/DT

succeed/VBN to/TO the/DT ##archbishopric/NN## ./Fp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:47:54.120

由于传统的 grep 实现一次只考虑一行这一事实，多行 grepping 变得复杂，因此添加`\n`到您的模式中没有意义。

如果您有 pcregrep 可用的多行匹配，可以使用以下`-M`标志完成：

```
pcregrep -Mv '^.+\n======>match found:.+$' 
```

输出：

```
he/PRP have/VBD obtain/VBN the/DT ##archbishopric/NN## against/IN the/DT monk/NNS of/IN the/DT

succeed/VBN to/TO the/DT ##archbishopric/NN## ./Fp 
```

# repository - Can I make time-lapse view in perforce faster?

> ID：14497893
> 
> 赞同：3
> 
> 时间：2013-01-24T09:27:54.227
> 
> 标签：repository, perforce, timelapse

I have problem with perforce. I like perforce's time-lapse view function very much. It helps me to find who did mistake. The problem is when some file is pretty big and frequently changed, opening time-lapse view takes very long time. So, I need some function like SQL (select * from time-lapse data top 100), that means I just need lasted 100(or 50? 20?) changed history to find what changed recently. Do perforce have that function? or is there any kinds of plug-in or perforce's commmand? Or I want to hear your know-how how to find changed history faster. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:08:06.037

我喜欢延时视图，但我经常从“文件历史记录”视图开始。正如您所指出的，因为最有趣的变化是最近的变化，所以我通常会首先查看最近的变化及其描述。通常，我看到一个看起来特别有趣的更改，我会自行研究该更改列表并查看我感兴趣的内容。

关于延时视图的速度，我想知道问题出在您的服务器上还是在您的客户端上。有几件事可以尝试：

1.  当您在同事的工作站上试用时，延时视图是否也会变慢？
2.  如果你运行'p4 annotate >tmp'，那也很慢吗？

如果 'p4 annotate' 速度很快，您可能会发现它值得用于那些历史很长的特别大的文件。延时视图非常强大且易于阅读，但它从服务器收集大量信息，然后必须格式化该信息以进行显示。

就我而言，当我调出延时视图时，我通常会计划研究一段时间的结果，所以我愿意在加载时等待几秒钟。

如果问题是您的服务器超载，您应该联系您的 Perforce 管理员，看看他能做什么。也许他可以为您的服务器添加更多资源（通常是内存），或者您应该考虑部署一个只读副本，该副本可以完全从副本中为诸如延时视图之类的操作提供服务，而无需主服务器的任何周期。Perforce 技术支持总是乐于帮助解决此类问题。

# javascript - Correct syntax for Google Spreadsheet update - Javascript

> ID：14497894
> 
> 赞同：0
> 
> 时间：2013-01-24T09:27:58.993
> 
> 标签：javascript, jquery, google-sheets, google-spreadsheet-api

Anybody know the correct syntax for updating a row in Google Spreadsheets using the Javascript API?

I'm working off of the API documentation [here](https://developers.google.com/google-apps/spreadsheets/#updating_a_list_row) and I can't figure out what is the correct syntax I need to send the data in. What I have currently is:

```
var serialObject = $('#basicForm').serialize();
$.ajax({
        url: updateBasicUrl,
        type: 'PUT',
        data: serialObject,
    }); 
```

What should the syntax of the data field be (the above throws an unidentifiable error)?

EDIT - after converting a JSON object to XML to conform to the exact look of the xml [here](https://developers.google.com/google-apps/spreadsheets/#updating_a_list_row), it still doesn't work:

```
var updateBasicUrl = "https://spreadsheets.google.com/feeds/list/*spreadsheetIDnumber*/od6/private/full/*cellID*/*versionnumber*?access_token=*accesstoken*
$.ajax({
        url: updateBasicUrl,
        type: 'PUT',
        contentType: 'application/atom+xml',
        //contentType: 'text/xml',  //tried both of these, they don't seem to work
        data: xmlBasic,
    }) 
```

EDIT - So it seems there is a Cross-Domain Origin problem. The Google Spreadsheets API won't allow it. Anybody know of a work-around?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:31:41.783

您可以搜索解决方案的 java 源代码 - [http://code.google.com/p/gdata-java-client/source/browse/trunk/java/src/com/google/gdata/client/spreadsheet/SpreadsheetService .java?r=94](http://code.google.com/p/gdata-java-client/source/browse/trunk/java/src/com/google/gdata/client/spreadsheet/SpreadsheetService.java?r=94)

这会触发 java 版本中的发送： service.insert(cellFeedUrl, newEntry);

```
public void setCell(int row, int col, String formulaOrValue)
    throws IOException, ServiceException {

  CellEntry newEntry = new CellEntry(row, col, formulaOrValue);
  service.insert(cellFeedUrl, newEntry);
  out.println("Added!");
} 
```

# c# - How does ASP.Net MVC replace the HTML tags with something that doesn't pars in browser

> ID：14497897
> 
> 赞同：1
> 
> 时间：2013-01-24T09:28:07.607
> 
> 标签：c#, asp.net, html, asp.net-mvc, unicode

If you generate an HTML string Like

```
ViewBag.FinalHTML="<a href=\"http://stackoverflow.com\">StackOverFlow</a>"; 
```

and then Try to show it in View using this code:

```
This is the best Q&A for programming questions: @ViewBag.FinalHTML 
```

then the result will be this:

```
This is the best Q&A for programming questions: <a href="http://stackoverflow.com">StackOverFlow</a> 
```

(I know how can I do that right. I have another question!)

How does ASP.Net MVC do it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:33:50.700

The `@` function uses the `HttpUtility.HtmlEncode` method to safe encode everything you pass to it.

If you don't want this automatic encoding to happen use the `@Html.Raw` method:

```
@Html.Raw(ViewBag.FinalHTML) 
```

Obviously by doing this you should make sure that this `FinalHTML` is absolutely never coming from an user input but is generated by you on the server. Otherwise you are opening a huge XSS hole in your website.

# c# - 多线程数据库插入

> ID：14497898
> 
> 赞同：0
> 
> 时间：2013-01-24T09:28:08.807
> 
> 标签：c#, mysql, multithreading

我有一个将数据插入数据库（MySQL）的应用程序（C#）。该程序在带有计时器的多线程上运行。

我的问题如下，将数据插入数据库的最佳方法是什么。

应用示例：

计时器每秒滴答一次，我有数据要每秒插入到数据库中，但我有一些数据要插入到后面，比如每半分钟。数据总是去不同的表，但相同的数据库。

每次插入后，我总是打开和关闭数据库连接。在那种情况下，当我想打开一个已经打开的连接或使用一个已经被另一个线程关闭的连接时，我遇到了问题。为了解决这个问题，我在启动计时器时打开连接并在停止时关闭它。它以这样的方式工作，但并不那么安全。

使用此解决方案，我的数据库有时仍然会感到困惑。我只是用本地数据库尝试过，我不知道它是否会与远程数据库不同（老实说，它也应该与本地和远程数据库一起使用）。

有一个想法是有一个额外的方法来收集它在每个滴答之后（或 X 滴答之后）上传到数据库的数据。我不确定这是否是一个更好的解决方案，但我现在真的没有更好的主意。该解决方案的问题是它可能会变得混乱，（我想我需要一个全局列表，所有线程都可以访问它并在其中插入数据，当我上传/清除列表时可能会导致问题其中一个线程可能想要访问它）。

如果不够清楚，请告诉我。任何建议将不胜感激。

谢谢

我的数据库插入代码如下：

`con.Open();
MySqlCommand cmd = new MySqlCommand(command, con);
cmd.ExecuteNonQuery();
con.Close();` 

我想我也应该在这里插入一些伪代码，以使我的问题更容易理解：

`Timer
foreach(sensor)
{
if sensor reading finished
{
check the type of the sensor
run the right thread
}` 

`示例线程：`

 ``Thread
Read out data from sensor
insert data to DB` 

传感器的响应不同，但仍然可以相同。这就是为什么我在插入数据库时​​遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:34:53.740

> 我确实总是在每次插入后打开和关闭数据库连接 [...] 它的工作方式就是这样，但并不那么安全。

这当然是最好的方法。在一个块中使用连接，`using () {}`它将是安全的。

> 使用此解决方案，我的数据库有时仍然会感到困惑。

您将不得不更好地描述这一点。

> 有一个想法是有一个额外的方法来收集它在每次滴答后上传的数据

是的，您可以（应该）使用额外的线程将内容推送到数据库。查找“生产者/消费者模式”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:38:53.997

仅使用单个连接，
使用您传递数据进行插入的一个函数，该函数将执行插入工作。

像

> func(strQry){ 命令 cmd = new ...(strQry, conn); cmd.执行...(); }

重用 conn obj ，但每次都创建新的 cmd obj ..

如果卡住了请评论...`

# ios - NSDictionay display

> ID：14497899
> 
> 赞同：-2
> 
> 时间：2013-01-24T09:28:11.543
> 
> 标签：ios, xcode, nsdictionary

im not able to display the values from this code .plz provide a code to display the mutabledictionay and a

```
- (void)viewDidLoad{
    [super viewDidLoad];

     mdict =[[NSMutableDictionary alloc]init];
     [mdict setValue:@"abc" forKey:@"def"];

     [mdict release];
}

-(void)display{

     CFShow(mdict);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:29:10.763

怎么用

```
-(void)display{

     NSLog(@"%@",mdict);

} 
```

将您的方法更改为：

```
- (void)viewDidLoad{
    [super viewDidLoad];

     mdict =[[NSMutableDictionary alloc]init];
     [mdict setValue:@"abc" forKey:@"def"];

     //if you want to display use following statement
     [self display];

    // [mdict release];//you should not release it here.
} 
```

注意：在`viewDidLoad`你使用`[mdict release];` mdict 时会被释放！！！

这不应该在`viewDidLoad`，把那个声明放进去`dealloc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:29:46.707

首先，您需要创建`NSMutableDictionary`is **Public**（在 .h 文件中声明），因为您在外部使用它并在`dealloc`方法中释放它的实例

```
- (void)viewDidLoad{
    [super viewDidLoad];

     self.mdict =[[NSMutableDictionary alloc]init];
     [self.mdict setValue:@"abc" forKey:@"def"];

     [self display];
}
-(void)display
{
   NSLog(@"%@",[self.mdict objectForKey:@"def"]);
} 
```

`-(void)dealloc`并在方法中释放字典实例

# php - 使用 jQuery 面对 ajax 的问题

> ID：14497900
> 
> 赞同：-9
> 
> 时间：2013-01-24T09:28:11.837
> 
> 标签：php, javascript, jquery, ajax

我有带有电子邮件和密码的registration.php页面，它在提交时调用了一个函数，即

```
 the function ChkVal() is written in comman.js file i.e

        function ChkVal()
        {
               var Valid = true;
               var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
               var address = document.getElementById("Email").value;
               if(reg.test(address) == false) 
               {
       ////somecode to check if it is valid email id or not
                }
               else
               {

    this is the section where i have the problem 

                   $(function() {

                          $.ajax({
                                url  : 'RegCheck.php',
                                type : 'POST',
                                data : 'User=' + address,
                                success : function(result){
                                   if(result != "No")
                                   {
                                       document.getElementById("EmailChk").innerHTML = result;   
///the result return from RegCheck.php will be Either already exist or No

                                       Valid = false;
                                   }
                                }

                          });              

                   });                         
                  document.getElementById("MailMand").innerHTML = "" ;

               } 
```

如果我在此处放置警报消息，则在返回 Valid 之前没有问题或向下任何位置，但是如果我删除警报消息，则查询将数据插入数据库...

```
 return Valid;

        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:54:10.833

你必须学习更多关于**jquery ajax**的知识。
来自 ajax 的响应应该是`html`形式上的。你可以在块上取悦`alert`它`success`，然后你就可以理解问题了。
就这样试试吧。

```
else
{
   $.ajax({
             url  : 'RegCheck.php',
             type : 'POST',
             data : {User: address},
                    success : function(result){
                       alert(result);
                       if(result != "No")
                       {
                         document.getElementById("EmailChk").innerHTML = result;                      Valid = false;
                       }
                    }

               });              

} 
```

# java - 在 JAVA 中将秒转换为 W、D、H、M 格式

> ID：14497902
> 
> 赞同：0
> 
> 时间：2013-01-24T09:28:13.573
> 
> 标签：java, seconds, time-format

我有几秒钟的时间，我想将其转换为 6w 3d 9h 5m 之类的格式。有人可以提供一种可以完成此任务的方法。谢谢 :) w=weeks d=days h=hours m=minutes

我已经尝试了下面的代码，但我没有使用几周

```
int day = (int)TimeUnit.SECONDS.toDays(seconds);        
long hours = TimeUnit.SECONDS.toHours(seconds) - TimeUnit.SECONDS.toHours(TimeUnit.SECONDS.toDays(seconds));
long minute = TimeUnit.SECONDS.toMinutes(seconds) - TimeUnit.SECONDS.toMinutes(TimeUnit.SECONDS.toHours(seconds));
System.out.println("Day :"+day+" Hours :"+hours+" Minutes :"+minute); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:42:37.713

这会给你：

```
1w 4d 10h 20m 
```

应该有更优雅的方式，但这有效：

```
long s = 987654l;
        final long M=60,H=60*M, D=24*H, W=7*D; 
        long w = s/W;
        s%=W; 
        long d = s/D;
        s%=D; 
        long h = s/H;
        s%=H; 
        long m = s/M;

        System.out.printf("%dw %dd %dh %dm",w,d,h,m); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:34:45.953

```
int seconds=98765410;
int weeks = (int) (TimeUnit.SECONDS.toDays(seconds) / 7);
int days = (int) (TimeUnit.SECONDS.toDays(seconds) - 7 * weeks);
long hours = TimeUnit.SECONDS.toHours(seconds) - TimeUnit.DAYS.toHours(days) - TimeUnit.DAYS.toHours(7*weeks);
long minutes = TimeUnit.SECONDS.toMinutes(seconds) - (TimeUnit.SECONDS.toHours(seconds) * 60);
System.out.println(weeks+"w "+days+"d "+hours+"h "+minutes+"m"); 
```

Will print out:

```
163w 2d 2h 50m 
```

# android - Android-NDK：使用本机代码创建 GUI 元素

> ID：14497906
> 
> 赞同：2
> 
> 时间：2013-01-24T09:28:26.053
> 
> 标签：android, user-interface, opengl-es, android-ndk, java-native-interface

据我了解Android-NDK-thingy它的工作原理如下：我必须使用一个NativeActivity，它本身调用附加的本机代码来移交一些OpenGL图形上下文。本机部分可以使用此上下文来绘制一些东西。

直到现在我才弄清楚：一些 GUI 元素怎么样？是否有可能从本机代码回调到 Java 只是为了创建一些 UI 元素并可能使用布局？意味着是否可以将标准的 Android GUI 元素也与此类本机代码一起使用？

如果是：如何做到这一点？如果不是：存在哪些替代方案（手动绘制所有内容除外）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:04:59.620

如果你想在 openGL 视图上使用 GUI 的东西，我认为使用普通的 Activity 而不是 NativeActivity 会更好。您可以使用名为 GL2JNIActivity 的 Android 示例。检查[以](https://stackoverflow.com/questions/6307399/how-to-import-android-samples-into-an-eclipse-ide)从 Eclipse 导入它。

您可以在 JNI 库部分（示例中的 JNILib 类）中声明一些本机函数。当您的 GUI 侦听器被调用时，您将调用它。基本上它看起来像这样：

```
public class GL2JNILib {

 static {
     // Maybe you need to load other relevant libraries here
     System.loadLibrary("gl2jni");
 }

 public static native void init(int width, int height);
 public static native void step();

 /*Add here your native functions to send to the native code*/     
 public static native void buttonClicked();
 //... add other listeners here (i.e: screen touched, etc.) 
```

}

然后在 Activity 本身中（在对应于 JNIActivity 类的示例中），您可以像往常一样加载一个 XML GUI 文件。当您通过 GUI 获得一些输入时，您可以调用在 GL2JNI 类中添加的本机函数。或多或少看起来像这样：

```
public class GL2JNIActivity extends Activity {

    GL2JNIView mView;
    Button mButton;

    @Override protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        mView = new GL2JNIView(getApplication());
        setContentView(mView);
        mButton = (Button)findViewById(R.id.your_button);        
        mButton.setOnClickListener( new Button.OnClickListener(){
            @Override
            public void onClick(View v) {
                mView.buttonClicked();
            }
        });
    }

    /*...*/
} 
```

最后，你必须在原生端实现原生函数：

```
JNIEXPORT void JNICALL Java_com_android_gl2jni_GL2JNILib_buttonClicked(
            JNIEnv * env, jobject obj)
{
    // will be called when the button is clicked
} 
```

# php - Redis 请求延迟

> ID：14497907
> 
> 赞同：18
> 
> 时间：2013-01-24T09:28:26.717
> 
> 标签：php, redis

我正在使用带有 php-fpm 和 phpredis 驱动程序的 redis (2.6.8)，并且遇到了一些 redis 延迟问题。在某些负载下，我们的应用程序对 redis 的第一次请求大约需要 1-1.5 秒，并且`redis-cli --latency`显示相同的延迟。

我已经检查[了延迟指南](http://redis.io/topics/latency)。

*   我们在具有 Unix 套接字的同一主机上使用 redis
*   慢日志不再有条目 5ms
*   我们不使用 AOF
*   redis 需要大约 3.5Gb 可用的 16Gb 内存（我想这不是太多）
*   我们的系统没有交换
*   没有其他进程在执行磁盘 I/O

我正在使用持久连接，连接的客户端数量从 5 到 25 不等（有时罢工到 60-80）。

[这是图表](https://dl.dropbox.com/u/9994669/Screen%20Shot%202013-01-21%20at%201.13.08%20AM.png)。

当有 20 个或更多同时连接的客户端时，问题似乎就开始了。

你能帮我找出问题出在哪里吗？

## 更新

我调查了这个问题，似乎由于某种原因，redis 没有足够的处理器时间来正常运行。

我在网络嗅探器的帮助下彻底检查了 php-fpm 和 redis 之间的通信。Redis 通过 tcp 收到请求，但仅在一秒半后才发回响应。这显然表明问题出在 redis 内部，它无法在给定的条件下处理这么多的请求（可能是处理器饥饿，因为整个系统的处理器负载只有 50%）。

通过将 redis 移动到几乎空闲的其他服务器来解决问题。我想我们应该使用 linux 调度程序让它在同一台服务器上工作，但还没有完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T01:45:05.897

请记住，Redis 是单线程的。如果您在处理器密集型方面执行的操作出错，则您的请求可能会相互阻塞。例如，如果您正在`HVALS`处理具有非常大值的哈希，您将让所有客户端等待，同时您提取所有数据并将其复制到输出缓冲区。

您需要在这里做的部分事情（不管这是否是问题）是查看您正在使用的所有命令并确定每个命令的复杂性。如果您要`O(N)`针对大量数据执行大量命令，那么您一次只是做太多事情并非不可能。

TL;DR 在不知道您正在使用哪些命令以及您的数据是什么样子的情况下，这里没有人可以真正确定地调试此问题。但是您可以查看您正在使用的每种方法的时间复杂度，并确保它是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T01:15:25.567

我在研究我正在处理的问题时遇到了这个问题，但认为它可能在这里有所帮助：

[https://groups.google.com/forum/#!topic/redis-db/uZaXHZUl0NA](https://groups.google.com/forum/#!topic/redis-db/uZaXHZUl0NA)

如果您通读该主题，则会发现一些有趣的信息。

# groovy - Groovyc 成功编译无效的 groovy 脚本

> ID：14497920
> 
> 赞同：2
> 
> 时间：2013-01-24T09:29:06.997
> 
> 标签：groovy

```
c:\>cat invalid.groovy
com.test.build(binding)

c:\junk>groovyc invalid.groovy

c:\junk>ls invalid.class
invalid.class 
```

为什么这不会导致编译错误？com.test.build 没有这样的方法！

这种编译在什么场景下会成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:41:51.617

由于 Groovy 是动态的，它无法知道`com.test.build`在运行时不会有

`com`可能是稍后在代码执行中添加到绑定的对象

* * *

一个例子：

说我们里面有一点时髦`Script.groovy`

```
com.test.build( binding ) 
```

用 groovyc 编译它：

```
groovyc Script.groovy 
```

然后，保留该`Script.class`文件，并丢弃 groovy 脚本以确保我们使用的是类文件：

```
rm Script.groovy 
```

现在，假设我们有以下内容`Runner.groovy`

```
// Create a class which you can call test.build( a ) on
class Example {
  Map test = [
    build : { it ->
      println "build called with parameter $it"
    }
  ]
}

// Create one of our Com objects
def variable = new Example()

// Load the Script.class, and make an instance of it
def otherscript = new GroovyClassLoader().loadClass( 'Script' ).newInstance()

// Then, set `com` in the scripts binding to be our variable from above
otherscript.binding.com = variable

// Then, run the script
otherscript.run() 
```

打印：

```
build called with parameter groovy.lang.Binding@7bf35647 
```

如您所见，它获取对象的`test`参数`com`（上图）并`build`以绑定作为参数调用闭包...

希望这是有道理的...

# sql - 在 Play-Scala 中使用什么 SQL 访问层进行简单读取？

> ID：14497921
> 
> 赞同：8
> 
> 时间：2013-01-24T09:29:07.147
> 
> 标签：sql, scala, playframework-2.0, dapper, anorm

我将在 Play 2.1 (Scala) 中实现一个只读 Web 应用程序。由于我只会读取和编组读取到 JSON 的数据，因此我想避免使用任何其他 DSL 和映射。

我使用[dapper-dot-net](http://code.google.com/p/dapper-dot-net/)在 .NET/C# 中完成了类似的项目，并且对结果非常满意。没有大惊小怪，没有太多的样板。

我目前正在查看：

*   [anorm](http://www.playframework.org/documentation/2.1-RC2/ScalaAnorm)（[anormtyped](https://github.com/guillaumebort/anormtyped-demo)看起来也很有前途，但可能还为时过早。避免手动将变量映射到案例类构造函数参数似乎很棒。）
*   [前传](https://github.com/jpersson/prequel/)
*   [slick](http://slick.typesafe.com/) - 因为它应该是 2.1 中执行 SQL 的主要方式，主要是普通 SQL API

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:31:03.990

光滑非常好。请务必查看[这本关于它的短书](http://mackler.org/LearningSlick/)——它非常擅长解释一些基础知识。连同文档一起，它会让您快速前进。另外，请注意 github 中的文档更好——最新的尚未发布。

使用普通 sql 选项得到了很好的支持。但是，对于普通的 sql 查询，您在类型检查方面并不多。否则，使用 Scala 2.10 进行简单查询就像：

```
sql"select * from coffees where name = $name".as[Coffee] 
```

这甚至可以保护您免受 sql 注入的影响，因为`$name`实际上并没有在查询中。有关更多信息，请参阅[文档](http://slick.typesafe.com/doc/1.0.0-RC1/sql.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T13:54:00.363

我在[GitHub 上](https://github.com/njeuk/dbmapper)有一个深受 Dapper 启发的项目，名为[dbmapper](https://github.com/njeuk/dbmapper)

优于 Slick 的优点是：

*   没有 DSL——你已经知道一个好的数据 DSL，它叫做 SQL
*   完全异步
*   很少的样板代码

这是一个例子：

```
// Scala class that maps to the book table, with columns to match the class members
case class Book(
  bookId: Int,
  title: String,
  retailPrice: BigDecimal,
  publishDate: LocalDate)

// mapping function from table row to Book class, 
// auto generated at compile time by Scala Macro  
implicit def rowToBook: RowData => Book = (r) => DbCodeGenerator.rowToClass[Book](r)

// query returning future list of books, 
// safe query interpolation, the maxPrice is converted to a query argument  
val maxPrice = 11.99
val allBooksFuture = DbAsync.exec[Book](q"select * from book where retail_price < $maxPrice")        

val oneBook: Future[Book] = DbAsync.execOne[Book](q"select * from book where book_id = 2")

// returns Future[Option[]]     
val maybeOneBook: Future[Option[Book]] = DbAsync.execOneOrNone[Book](q"select * from book where book_id = -123") 
```

如果您从 dotnet 世界了解 dapper，那么 dbmapper 会感到奇怪的熟悉！

# java - 如何爬上 TypeMirror 对象的层次结构树？

> ID：14497922
> 
> 赞同：1
> 
> 时间：2013-01-24T09:29:08.810
> 
> 标签：java, annotations, apt

我正在使用 Java 的注释处理机制为我的一些类创建序列化程序。
我想检查当前处理的类的每个字段，并确保它是`MyBaseSerializableClass`.
我的问题是我只知道如何找到字段类型的直接超类：

```
TypeElement fieldType = (TypeElement)element;
TypeMirror superClassType = fieldType.getSuperclass(); 
```

我怎样才能找到超类`superClassType`并继续向上继承树直到我命中`Object`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:49:06.183

好吧，我不知道这是否是最好的方法，但这是我找到的解决方案：

```
Types typeUtils = processingEnv.getTypeUtils();
while (!typeElement.toString().equals(Object.class.getName())) {
        element = (TypeElement)typeUtils.asElement(element.getSuperclass());
        // do whatever with element
} 
```

# opengl - jmonkey 没有在我的电脑上运行

> ID：14497923
> 
> 赞同：1
> 
> 时间：2013-01-24T09:29:09.150
> 
> 标签：opengl, jmonkeyengine

今天我决定开始开发一个 3D 游戏，我搜索并找到[了 JMonkey](http://jmonkeyengine.org/)。我安装了它并成功安装，但是运行时，我无法创建项目，而是在消息框中不断显示这两条消息。

1.  org.lwjgl.opengl.OpenGLException：无效枚举 (1280)
2.  java.lang.illegalstateexception:framebuffer 没有附加任何渲染缓冲区

我使用的是[DELL vostro 1014](http://www.dell.com/us/business/p/vostro-1014/pd)，没有任何额外的显卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:51:52.547

如果您尝试运行计算机不支持的全屏模式，通常会发生这种情况。

要查找支持的模式，请执行以下操作：

```
GraphicsDevice device =
    GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
DisplayMode[] modes = device.getDisplayModes(); 
```

# java - 加载/保存 CompiledST

> ID：14497927
> 
> 赞同：2
> 
> 时间：2013-01-24T09:29:12.130
> 
> 标签：java, stringtemplate

我正在创建一个使用 StringTemplate 生成 C 代码的 java 软件。但是，我不想直接将我的模板直接包含在最终版本的 jar 中，所以我正在寻找一种混淆模板的方法。

快速查看 StringTemplate 源代码，我发现它使用了包含在“CompiledST”对象中的中间字节码。

所以我的问题是：是否可以保存和加载此字节码以避免发布纯文本模板？

# android - 在项目中使用库中的自定义视图

> ID：14497929
> 
> 赞同：1
> 
> 时间：2013-01-24T09:29:19.697
> 
> 标签：android, android-custom-view

我`CustomLayout`在库 customAndroidLibrary 中声明了类。这`CustomLayout`延伸`ViewGroup`. 现在我想`layout.xml`在我的项目中使用这个 CustomLayout。我已经在我的项目中包含了这个库。

自定义布局类

```
package com.android.custom;
public class CustomLayout extends ViewGroup {
    .....
} 
```

布局.xml

```
<com.android.custom.CustomLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/animation_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</com.android.custom.CustomLayout> 
```

主要活动

```
package com.android.ui;    
public class MainActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);
    }
} 
```

但它是扔的`ClassNotFoundException`。 如果我在使用简单的 in 中使用自定义视图，
即使它也没有检测到我的。然后它没有给出任何错误。`Activity``layout.xml``TextView``layout.xml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:02:17.420

我自己解决了。

```
<com.android.custom.CustomLayout   
    xmlns:android="http://schemas.android.com/apk/res/android"
    class="com.android.custom.CustomLayout"
    android:id="@+id/animation_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</com.android.custom.CustomLayout> 
```

# node.js - 节点中的奇怪范围行为还是我在睡觉？

> ID：14497930
> 
> 赞同：0
> 
> 时间：2013-01-24T09:29:20.593
> 
> 标签：node.js, mongodb, pug, serverside-javascript, scoping

我的js如下，

```
/*
 * GET home page.
 */

var MongoClient = require('mongodb'); 

exports.index = function(req, res){
    var studentObj = {};
    MongoClient.connect("mongodb://localhost:27017/MY_DB_TEST", function(err, db) {
      if(!err) {
        console.log("We are connected");        

        var collection =  db.collection('test');        
        var stream = collection.find().stream();

        stream.on("data", function(item){
            studentObj =  item;
        });     
      }
    });
    res.render('index', { title: 'Express', obj: studentObj });
}; 
```

我尝试用**jade**渲染这个页面，我的语法是，

```
h1 Name: #{obj.name} 
```

我的**JSON**：（从 mongodb 获取）

```
{
  name: "Ron",
  age: 24
} 
```

这不起作用，它只有在我将 studentObj 保留为全局变量时才起作用，即在`require`语句之后。

此外，`obj.name`在第一次请求时不会呈现，只有从第二次请求开始，我才能获得 name 属性。

为什么会出现这些问题？我错过了一些非常微不足道的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:33:40.527

您正在尝试将异步代码视为同步代码。不要那样做。

这是你的代码：

```
// Declare local var
var studentObj = {};

// fire off an async request
MongoClient.connect("mongodb://localhost:27017/MY_DB_TEST", function(err, db) {

// render, not waiting for data to arrive from server
res.render('index', { title: 'Express', obj: studentObj }); 
```

这也解释了全局变量的行为。第一次渲染它仍然是空的，但在第二次渲染之前数据请求返回并初始化全局变量。解决方案是：只有在获得数据后才渲染。

```
stream.on("data", function(item){
  res.render('index', { title: 'Express', obj: item });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:31:52.747

代替：

```
studentObj =  item; 
```

和：

```
res.render('index', { title: 'Express', obj: item }); 
```

并删除第二个`res.render`.

渲染不会等待 mongodb 回来——这就是你没有可用数据的原因。

# c# - 在代码隐藏中修改样式表中的类

> ID：14497936
> 
> 赞同：0
> 
> 时间：2013-01-24T09:29:29.117
> 
> 标签：c#, asp.net

我在 asp.net 和 c# 中工作。

我的应用程序中有一个名为 STYLE.css 的 CSS 样式表，并且该样式表中有一些类。我想在我的代码隐藏中更改这些类的样式。如何做到这一点。给你的建议。

**样式.CSS**：

```
 .someclass
  {
   //some attributes

  } 
```

我想在代码隐藏中更改**someclass** Class 的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:01:24.487

最好控制css文件中的样式。所以在css中创建2个类并更改控件在后面代码中使用的类。

这意味着您可以将样式与功能分开，并使代码的维护更容易。因为当您决定想要稍微不同的颜色时，您只需要更改 css 条目而不是重新编译您的应用程序/项目。

# google-chrome - Chrome 25 和 iScroll 功能损坏

> ID：14497937
> 
> 赞同：1
> 
> 时间：2013-01-24T09:29:29.080
> 
> 标签：google-chrome, iscroll

在新的 beta Chrome 25 中，常用的 javascript 库 iScroll(4) 的功能被破坏。当前版本 24 运行良好。任何鼠标事件问题或类似问题？

[http://cubiq.org/dropbox/iscroll4/examples/simple/](http://cubiq.org/dropbox/iscroll4/examples/simple/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:01:14.843

[另见github](https://github.com/cubiq/iscroll/issues/343)上的错误报告

坏事是：我有一个 ist 不工作的设备，还有多个工作的设备！Chrome 版本是完全一样的。

# mysql - 在 mysql 中插入 current_timestamp

> ID：14497939
> 
> 赞同：3
> 
> 时间：2013-01-24T09:29:36.403
> 
> 标签：mysql, alter

我需要更改带有时间戳数据类型的列。问题是当插入记录时，当前时间戳应该插入该列。我知道有 ON UPDATE CURRENT_TIMESTAMP 但对于插入我找不到方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T09:44:27.710

您正在寻找的是`DEFAULT`关键字。

```
ALTER TABLE yourTable MODIFY COLUMN yourColumn timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-13T05:28:03.313

只需使用 DEFAULT 子句，忽略 ON UPDATE 子句，它应该适合你！

```
ALTER TABLE yourTable MODIFY COLUMN yourColumn timestamp DEFAULT CURRENT_TIMESTAMP 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-19T15:42:15.753

Rock 'Em 想要的是被告知使用 CURRENT_TIMESTAMP 作为该列的默认值。不在更新中。我一直使用这个。这样，当插入记录时，您就可以确切地知道它何时发生。在许多表中，为审计跟踪等执行此操作是一种很好的做法。

# django - 在动态 Django 表单中定义字段顺序

> ID：14497942
> 
> 赞同：1
> 
> 时间：2013-01-24T09:29:47.193
> 
> 标签：django, django-forms

[我已经编写了一个工厂函数来创建动态表单，正如 James Bennett 的有用帖子http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/](http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/)末尾所述。

该表单工作得很好，但项目显示的顺序有点随机，因为（我假设）这`fields`是一个字典（请参见下面的代码示例）。如何为表单域规定一个定义的显示顺序？

```
def make_form(assessment):
    '''
    Factory function to build and return dynamic AssessmentForms
    '''
    entries = assessment.entry_set.all()

    fields = {}

    for entry in entries:
        fields[entry.name] = forms.ChoiceField(
            required=False,
            initial=entry.rating,
            choices=CHOICES,
            widget=forms.RadioSelect()
        )

    return type('AssessmentForm', (forms.BaseForm,), { 'base_fields': fields }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:03:48.513

富田裕二是对的。您可以使用例如：

```
from django.utils.datastructures import SortedDict

fields = SortedDict()

for entry in entries:
    fields[entry.name] = forms.ChoiceField(
        required=False,
        initial=entry.rating,
        choices=CHOICES,
        widget=forms.RadioSelect()
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:59:44.150

使用`SortedDict`（2.7+的djangos实现`OrderedDict`）

[https://github.com/django/django/blob/master/django/utils/datastructures.py](https://github.com/django/django/blob/master/django/utils/datastructures.py)

# android - 在webview android中放大/缩小

> ID：14497943
> 
> 赞同：3
> 
> 时间：2013-01-24T09:29:48.060
> 
> 标签：android, webview

嗨，我已使用以下代码进行内置放大缩小控制

```
 mWebView = (WebView) findViewById(R.id.webView1);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.getSettings().setSupportZoom(true); 
```

我也使用了如下代码

```
 mWebView.setWebViewClient(new MyWebViewClient());
        mWebView.loadUrl(sabNZBurl);
        mWebView.getSettings().setDomStorageEnabled(true);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.getSettings().setSupportZoom(true);
        backwardBtn = (Button) findViewById(R.id.btnBackWard);
        cancelBtn = (Button) findViewById(R.id.btnCancel);
        refreshBtn = (Button) findViewById(R.id.btnRefresh);
        forwardBtn = (Button) findViewById(R.id.btnForward);

        backwardBtn.setOnClickListener(this);
        cancelBtn.setOnClickListener(this);
        refreshBtn.setOnClickListener(this);
        forwardBtn.setOnClickListener(this);

   final class MyWebViewClient extends WebViewClient {
    @Override
    // Show in WebView instead of Browser
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onLoadResource(WebView view, String url) {
        super.onLoadResource(view, url);

    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        PD.dismiss();
        view.getSettings().setBuiltInZoomControls(true);
        view.getSettings().setSupportZoom(true);
    }

} 
```

但是 webview 仍然没有内置放大缩小控制，任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:47:09.283

您是否在网页中有要显示的视口元标记？如果是并且如果它包含`user-scalable="no"`则它是正常的，HTML 本身禁用缩放。只需像这样编辑标签：

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, width=device-width" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-25T05:17:56.587

试试这个，我有答案

```
WebSettings webSetting = mWebView.getSettings();
            webSetting.setBuiltInZoomControls(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T07:55:47.637

可能这就是你正在寻找的..

```
settings.setBuiltInZoomControls(true);
settings.setSupportZoom(true);
settings.setUseWideViewPort(true);
settings.setJavaScriptEnabled(true);
settings.setJavaScriptCanOpenWindowsAutomatically(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-03T11:26:57.350

尝试这个：-

```
webview.getSettings().setUseWideViewPort(true); 
```

# codeigniter - 不同的用户级别

> ID：14497954
> 
> 赞同：0
> 
> 时间：2013-01-24T09:30:17.237
> 
> 标签：codeigniter

我目前正在开发一个具有不同用户级别的新应用程序，我想知道实现这一点的最佳方法是什么。

例如，我们将从 3 个级别开始： 1\. 用户 (10) 2\. 经理 (50) 3\. 老板 (100)

我知道用户可以做的所有动作，经理和老板也可以做，经理的所有动作都可以由老板做。

我的第一个想法是给每个动作一个名字，然后像这样将它添加到数据库中：

```
action       |  level
-------------------------
add_user     |  100  (boss only)
login        |  10   (user, manager + boss)
delete_user  |  50   (manager and boss)

$level = 10; // user
if($level >= $actions['add_user']) echo 'allowed'; 
```

这似乎是未来添加新关卡最灵活的方式，或者你们还有其他建议吗？

# asp.net-mvc-3 - 在 MVC 3 中，我们如何根据角色将用户重定向到默认 URL？

> ID：14497957
> 
> 赞同：2
> 
> 时间：2013-01-24T09:30:26.937
> 
> 标签：asp.net-mvc-3, url, asp.net-mvc-routing

```
public static void RegisterRoutes(RouteCollection routes)
           {
               routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
               routes.MapRoute(
                   "Default", // Route name
                   "{controller}/{action}/{id}", 
                   new { controller = "User", action = "Index", id = UrlParameter.Optional } 
               );

           } 
```

**如果当前用户是管理员，那么他应该在输入 root url 时重定向到管理页面？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:35:51.460

有很多方法（大多数是自定义的），但我会使用默认的 MVC 功能并保持路由不变，而是根据安全角色有两个控制器操作：

```
// actions part of UserController

public ActionResult Index()
{
    ...
}

[Authorize(Roles = "admin")]
[ActionName("Index")]
[AdminsOnly]
public ActionResult IndexAdmin()
{
    ...
} 
```

当用户成为特定角色的成员时，这将自动运行第二个。但是，如果您只有一个特定用户（管理员），那么您可以将该属性更改为：

```
[Authorize(Users = "admin")] 
```

如果您使用一些自定义机制来定义用户类型/角色成员资格，您始终可以编写自己的授权操作过滤器。

但`AuthoriseAttribute`不是动作选择器过滤器，因此 MVC 无法在不创建自定义动作选择器过滤器的情况下区分两者`AdminsOnlyAttribute`。这会为您进行检查，并且您不会错误地认为请求有多个操作。在编写此自定义过滤器的情况下，您也可以简单地删除，`AuthorizeAttribute`因为您的操作选择器已经检查过了。

## 其他竞争者

### 风俗`Route`

如果这不是您想要的，您始终可以编写自己的自定义`Route`类，根据用户名/角色成员身份将用户重定向到特定区域......尽管重定向也可能是您`Login`操作的一部分

```
[HttpPost]
public ActionResult Login(LoginCredentials user)
{
    // authenticate
    ...
    if (User.IsInRole("admin"))
    {
        return this.RedirectToAction("Index", "User", new { area = "Admin" });
    }
    return this.RedirectToAction("Index", "User");
} 
```

此操作假定您的应用程序中有管理区域。

### 自定义路由约束

另一种可能性是有自定义路由约束。因此，您实际上会定义两条路线，但一条路线具有特定的约束：

```
routes.MapRoute(
    "Admin", // Route name
    "{controller}/{action}/{id}", 
    new { area = "Admin", controller = "User", action = "Index", id = UrlParameter.Optional },
    new { isAdmin = new AdminRouteConstraint() }
);
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", 
    new { controller = "User", action = "Index", id = UrlParameter.Optional } 
); 
```

这样，您就可以将管理员路由到应用程序的**管理**区域，并为他们提供他们在那里拥有的特定功能。但这并不意味着他们需要一个管理区域。这只是我的路线定义。您可以按照您想要的方式定义路由默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:41:43.913

您可以在 Index 操作中实现此重定向：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        if (User.IsInRole("admin"))
        {
            // The user is an administrator => redirect him to his own page
            return RedirectToAction("SomeActionName", "SomeControllerName", new { area = "admin" });
        }

        // the use is either not authenticated or not in the admin role => render some view
        return View();
    }
} 
```

# r - 用 r 中的值替换数据集中的空白

> ID：14497958
> 
> 赞同：4
> 
> 时间：2013-01-24T09:30:29.837
> 
> 标签：r

道歉，因为我认为会有一个非常明显的答案，但我在网上找不到任何东西......

我经常得到非常大的数据集，其中缺失值是空白的，例如（简而言之）

```
#Some description of the dataset
#cover x number of lines
31   3213 313   64    63
31   3213 313   64    63
31   3213 313   64    63
31   3213 313   64    63
31   3213 313   64    63
12   178        190   865
532  31   6164  68
614       131   864   808 
```

例如，我想将所有空白替换为 -999。如果我使用这样的读取表

```
dat = read.table('file.txt',skip=2) 
```

我收到错误消息

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
line 6 did not have 5 elements 
```

我可以将文件作为数据框打开并执行

```
dat = data.frame('file.txt',skip=2)
is.na(rad1) = which(rad1 == '') 
```

但我不知道它是否会起作用，因为我不知道在读取数据帧时如何跳过前两行（例如，相当于“跳过”），而且我在任何地方都找不到答案。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T09:45:40.770

如果您知道每列的宽度，那么您可以使用`read.fwf`

例如

```
> dat <- read.fwf('temp.txt', skip=2, widths=c(5,5,6,6,6))
> dat
   V1   V2   V3  V4  V5
1  31 3213  313  64  63
2  31 3213  313  64  63
3  31 3213  313  64  63
4  31 3213  313  64  63
5  31 3213  313  64  63
6  12  178   NA 190 865
7 532   31 6164  68  NA
8 614   NA  131 864 808 
```

虽然用你想要的任何值替换值很容易`NA`，但这只是个坏主意，因为 R 有很多处理 NA 值的好方法。

例如，要取第二列的平均值，请使用：

```
mean(dat$V2, na.rm=TRUE)
[1] 163.4286 
```

R 具有处理缺失数据的其他功能。例如，您可以使用`na.omit()`完全删除缺少数据的行。

```
> na.omit(dat)
  V1   V2  V3 V4 V5
1 31 3213 313 64 63
2 31 3213 313 64 63
3 31 3213 313 64 63
4 31 3213 313 64 63
5 31 3213 313 64 63 
```

# .net - VS2010 周期性崩溃并出现 System.ArgumentException：值不在预期范围内

> ID：14497965
> 
> 赞同：3
> 
> 时间：2013-01-24T09:30:50.540
> 
> 标签：.net, visual-studio-2010, visual-studio

我在 Activity Monitor Log.xml 文件中收到以下错误

> System.ArgumentException：值不在预期范围内。在 Microsoft.VisualStudio.Web.CSS.ICSSLineTokenizer.TokenizeLine(ICSSTokenFactory factory, Int32 lLine) 在 Microsoft.VisualStudio.Web.CSS.Implementation.CSSColorizer.Microsoft.VisualStudio.Text.Classification.IClassifier.GetClassificationSpans(SnapshotSpan trackingSpan) 在 Microsoft。 VisualStudio.Text.Classification.Implementation.ClassifierTagger.d_0.MoveNext *() 在 Microsoft.VisualStudio.Text.Tagging.Implementation.TagAggregator`1.d* _16.MoveNext()

在源列中，它显示“编辑器或编辑器扩展”

这不会每次都发生，但平均每天发生一次。如果我重新启动它，一切都很好。这发生在代码的任何部分，无论是 css 文件还是 cs 或 aspx。任何人都可以帮忙吗？

在此之后，我在活动监视器 xml 文件中收到以下 Resharper 错误。

> 无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。C:\Program Files\JetBrains\ReSharper\v7.0\Bin\JetBrains.Platform.ReSharper.VisualStudio.v11.dll

和

> 无法加载文件或程序集 'Microsoft.VisualStudio.Shell.Interop.11.0, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其依赖项之一。该系统找不到指定的文件。C:\Program Files\JetBrains\ReSharper\v7.0\Bin\JetBrains.Platform.ReSharper.VisualStudio.v11.dll

伙计们，我不是专家级的程序员，只是一个初学者，而且对 StackOverFlow 也很陌生。因此，如果我在错误的地方或网站上发帖，请原谅。如果有人也可以善意地说明它..\谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:09:20.837

ArgumentException 不是你的错。这表明 Visual Studio 或您已安装的某些扩展中存在错误。确保您已安装 Service Pack 和所有更新。

JetBrains 问题意味着您安装了支持 Visual Studio 2012 的 ReSharper 版本。只要 Resharper 为您工作，我猜测如果您运行的是旧版本的 VS，在启动过程中这种异常是正常的比 Resharper 支持的最高版本。

# database - MySQL 表访问类比正确吗？

> ID：14497970
> 
> 赞同：0
> 
> 时间：2013-01-24T09:30:57.857
> 
> 标签：database, database-design

我正在设计一个数据库，系统的某些部分将位于它之上是能够为某些事物创建注释的概念。

例如，我有一个客户数据库，用户可以为这些客户创建注释。

我可以做两种风格来实现这一点。

首先是创建notes表和notes类型表。客户、供应商、发票等的所有注释都存储在这里，但由引用“notes_type_table”中的类型的 typeId 区分。

或者，我可以为系统的不同部分拆分所有笔记。即“customer_notes”、“supplier_notes”和“invoice_notes”。

类似于如果您想购买鞋子，去一家出售鞋子和许多其他东西的大型超市会因为更多的交通（人，排队等）而减慢您的速度。而去一家只卖鞋子的商店应该会导致购买鞋子的过程更快、更有效。

为我的系统的不同部分拆分注释表会更好的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:39:40.267

我会把信息分成几个表：

*   更容易维护数据库结构
*   更简单的查询
*   当您有大量数据并且您的查询更“面向注释类型”时，这很好。

# java - 最小化 GWT 应用程序的编译大小

> ID：14497973
> 
> 赞同：4
> 
> 时间：2013-01-24T09:31:07.843
> 
> 标签：java, gwt, gxt

我有这个基于`GWT`并且`Sencha Ext GWT 2`我遇到问题的管理站点，它加载非常缓慢，使用 Firebug 我可以看到这个

> 4DDF7CE1FD8584654846E8ADA9D9DECB.cache.html

现在大约 2MB，这就是加载速度慢的原因。但是，使用 GWT 2.5，我能够将编译大小减少约 15%。但是我仍然需要进一步减小尺寸。我想在采用代码拆分方法之前执行此操作。

使用 PageSpeed 我得到了优化的结果，比如 Minify HTML/Javascript 等，但是它很难专门用于 GWT 代码。

除了选择混淆模式外，还有哪些方法可以最小化编译大小。有没有像压缩模式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T04:06:56.283

您正在盲目地解决问题。PageSpeed 之类的工具更经常有助于提高运行时性能。

1) 您应该打开 GWT 编译器的报告功能。分析报告以深入了解您的应用程序中的哪些内容对 2 MB 的贡献最大。**在 GWT Maven 插件中**

```
 <compileReport>true</compileReport>
   <compilerMetrics>true</compilerMetrics>
   <soycDetailed>true</soycDetailed> 
```

2）您应该在构建中一一打开 GWT 编译器标志，以了解它们的影响程度。**在 GWT Maven 插件中**

```
 <disableCastChecking>true</disableCastChecking>
  <disableClassMetadata>true</disableClassMetadata>
  <optimizationLevel>9</optimizationLevel> 
```

**3) .gwt.xml 文件**中根据 Google IO 2011 的性能优化提示。

 **```
<set-configuration-property name="compiler.enum.obfuscate.names" value="true" /> 
```

**4) 在.gwt.xml 文件**中以 prod 模式去除 GWT 异常堆栈跟踪代码。

 **```
<set-property name="compiler.stackMode" value="strip" /> 
```

5) 您应该打开 GWT Compiler 标志以进行关闭。**在 GWT Maven 插件中**

```
<enableClosureCompiler>true</enableClosureCompiler> 
```

6) 另外，如果您使用的是 RPC，请注意方法签名。避免在 rpc 参数和返回类型中使用接口和抽象类，如 List、Map、Model。它们有助于减少应用程序中的 rpc 占用空间。

## 最后

应根据对 GWT 编译器报告的分析做出代码拆分的决定。GZIP 压缩有助于减少带宽占用，但同时会增加浏览器和服务器开销的成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-29T20:00:28.023

SSR 有很多优点。另外，不要忘记混淆你的 RPC，否则它们会被类引用臃肿。

```
<inherits name="com.google.gwt.user.RemoteServiceObfuscateTypeNames"/> 
```

George 在他出色的[GWT 博客文章](http://georgovassilis.blogspot.com/2011/03/squeezing-last-bit-out-of-rpc-gwt.html)中提供了一些额外的提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:23:23.957

您的选择很少：

1.  使用代码拆分。
2.  减少应用程序中使用的小部件数量。
3.  如果您的页面包含大量文本（例如帮助文章），您可以将此文本推送到外部 TextResource。

没有神奇的解决方案可以减少编译代码的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T10:41:25.710

这个巨大的尺寸不适用于 GWT，它适用于 GXT 小部件，我可以向您推荐：

*   使用 jetty [GZip 压缩](https://serverfault.com/questions/279057/how-can-i-enable-gzip-compression-in-jetty)功能。
*   尽快使用 GWT 代码吐出。****

# php - 卷曲（php）未收到表单提交的帖子变量

> ID：14497981
> 
> 赞同：0
> 
> 时间：2013-01-24T09:31:35.813
> 
> 标签：php, post, curl

我正在设计工作应用程序。它应该将提供的数据插入到下面提供的表格中，并自动提交。在任何其他页面上都没有问题，我可以登录、保存 cookie、阅读它们、转到同一站点上的其他链接。我遇到的问题是在表单页面上发生的，具体来说，curl 执行并获取页面，但未发送发布数据。（数据作为数组发送，也尝试了 urlencoded 字符串）它认为可能有一个表单的结构方式存在问题（下面的代码）。此外，带有表单的站点不是我的，但我会提供被询问的标题和帖子变量。

所以开始吧。形式：

```
<form action="newFault" method="GET" id="typeForm">
<div style="margin:5px">
Tip smetnje:
<select name="type" id="type">
<option value="SVA" selected>SVA VA</option>
<option value="SNBS">SNBS - NBSA</option>
<option value="SULL">SULL - ULL</option>
</select>
</div>
</form>

<div>
<form method="POST" action="createFault" enctype="multipart/form-data">
<input type="hidden" name="type" value="SVA">
<table class="tableLight" cellpadding="0" cellspacing="1" style="margin: 5px;">
<tr>
<td colspan="2" style="text-align: right">Virtual account code:</td>
<td><input name="accountCode" size="60"></td>
<td></td>
</tr>

<tr>
<th>konos</th>
<th style="text-align: right">Kontakt osoba:</th>
<td><input name="param.konos" size="60"></td>
<td></td>
</tr>
<tr>
<th>tel</th>
<th style="text-align: right">Telefon:</th>
<td><input name="param.tel" size="60"></td>
<td></td>
</tr>
<tr>
<th>tfx</th>
<td style="text-align: right">Telefax:</th>
<td><input name="param.tfx" size="60"></td>
<td></td>
</tr>
<tr>
<th>eml</th>
<td style="text-align: right">E-mail:</td>
<td><input name="param.eml" size="60"></td>
<td></td>
</tr>
<tr>
<th>vrkv</th>
<th style="text-align: right">Vrsta:</th>
<td><input name="param.vrkv" size="60"></td>
<td></td>
</tr>
<tr>
<th>lpb</th>
<td style="text-align: right">Lokalni pozivni broj:</td>
<td><input name="param.lpb" size="60"></td>
<td></td>
</tr>
<tr>
<th>idkod</th>
<th style="text-align: right">nesto pristupa:</th>
<td><input name="param.idkod" size="60"></td>
<td></td>
</tr>
<tr>
<th>ugbrz</th>
<td style="text-align: right">brzina:</td>
<td><input name="param.ugbrz" size="60"></td>
<td></td>
</tr>
<tr>
<th>iatk</th>
<th style="text-align: right; ">Name:</th>
<td><textarea name="param.iatk" cols="40" rows="3"></textarea></td>
<td></td>
</tr>
<tr>
<th>dkk</th>
<td style="text-align: right">Datum koji odredi krajnji korisnik (ukoliko je to primjenjivo):</td>
<td><input name="param.dkk" size="60"></td>
<td></td>
</tr>
<tr>
<th>opkv</th>
<th style="text-align: right">Opis kvara:</th>
<td><textarea name="param.opkv" cols="40"></textarea></td>
<td></td>
</tr>
<tr>
<th colspan="2" style="text-align: right">Dokumentacija u TIFF formatu:</th>
<td><input type="file" name="attachment"></td>
<td></td>
</tr>
<tr>
<td colspan="2"></td>
<td colspan="2">
<input type="submit" value="Pozovi"> 
```

PHP代码：

```
function saljipostom()
{
$postdata = 'type=SVA&accountCode=101010&param.konos=osoba&param.tel=016000840&param.tfx=&param.eml=&param.vrkv=vrsta&param.lpb=&param.idkod=02637992641&param.ugbrz=&param.iatk=imekorisnika&param.dkk=&param.opkv=opis&attachment=&submit=Pozovi';
$fields = array(
'type'=>'SVA',
'accountCode'=>'101010',
'param.konos'=>'osoba',
'param.tel'=>'016000840',
'param.tfx'=>'',
'param.eml'=>'',
'param.vrkv'=>'vrsta',
'param.lpb'=>'',
'param.idkod'=>'02637992641',
'param.ugbrz'=>'',
'param.iatk'=>'imekorisnika',
'param.dkk'=>'',
'param.opkv'=>'opis',
'attachment'=>''
);
$polje = $fields;
foreach ( $fields as $key => $value) 
{
    $post_items[] = $key . '=' . urlencode($value);
}
$post_string = implode ('&', $post_items);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"https://something.something/ui/ganimed/b2b/newFault?type=SVA");
curl_setopt($ch,CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0");
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'curl/cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'curl/cookies.txt');

$result = curl_exec ($ch);
curl_close ($ch);
unset($ch);

$page = str_get_html($result);
echo $page;
} 
```

输出回显到 .js

来自 curl 的响应标头：

```
HTTP/1.1 200 OK Date: Thu, 24 Jan 2013 08:05:17 GMT Content-Type: text/html;charset=UTF-8 Content-Language: en-US Vary: Accept-Encoding Transfer-Encoding: chunked 
```

Firebug 说 post 字段是：

```
typeSVA
accountCode
param.konos
param.tel
param.tfx
param.eml
param.vrkv
param.lpb
param.idkod
param.ugbrz
param.iatk
param.dkk
param.opkv
attachment 
```

萤火虫中的标题

```
Response Headers
Connection  Keep-Alive
Content-Language    en-US
Content-Length  0
Content-Type    text/plain
Date    Thu, 24 Jan 2013 12:52:46 GMT
Keep-Alive  timeout=15, max=100
Location    https://something.something/ui/something/b2b/faults?type=SVA&guid=40898022-1b33-42ab-a9f2-696cc5f70950 
```

请求标头

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  JSESSIONID=DD0148C1D1701FA237704C42DE093687.node1
Host    something
Referer https://something.something/ui/something/something/newFault?type=SVA
User-Agent  Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0 
```

问题：我遇到的问题是在表单页面上发生的，具体来说，curl 执行并获取页面，但未发送发布数据，即。表单不接受它（数据作为数组发送，也尝试了 urlencoded 字符串）有什么想法吗？

您需要的其他任何事情都可以问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:39:21.657

```
$url = 'http://foo.com/';

    $paramsarray = array(
            'name' => ' Test',
            'age' =>  24,
            'preferences' => array(1,2,3,4,5,6)
    )

$params = http_build_query($paramsarray);

$ch = curl_init();
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$params);
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

    if(curl_exec($ch) === false) {
            echo 0;
    } else {
            echo 1;
    }

    curl_close ($ch); 
```

试试这个，您可以使用该`http_build_query()`函数将数组转换为所需的字符串格式。然后使用 curl 发布到 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:31:53.943

创建一个 index.php 文件并在其中放置以下代码：

```
<?php

$url = 'http://localhost/curltest/ind.php';

$paramsarray = array(
    'name' => '',
    'age' =>  24,
);

$params = $query = http_build_query($paramsarray, '', '&');

$ch = curl_init($url);
curl_setopt_array($ch, array(
    CURLOPT_HEADER => false,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => $params,
));
$ress = curl_exec($ch);

echo $ress;

if(curl_exec($ch) === false) {
    echo 0;
} else {
    echo 1;
}
curl_close ($ch); 
```

现在创建第二个 PHP 文件，名为`ind.php`. 将其放在同一个项目中。

在该文件中编写以下代码：

```
<?php
print_r($_POST);
?> 
```

运行 index.php 文件，你会得到如下输出：

```
Array ( [name] => [age] => 24 ) 1 
```

这表明空的 Post 字段是`ind.php`使用 curl 提交到页面的。

# grails - grails 只有我的日志

> ID：14497983
> 
> 赞同：1
> 
> 时间：2013-01-24T09:31:47.910
> 
> 标签：grails, log4j

在我`Config.groovy`的`log4j`配置中：

```
log4j = {

    appenders {
        file name:'connection', file: '/tmp/connection.log'
    }

    info "grails.app.controllers.myController"

    root {
        info 'connection'
    } 
```

如何配置仅获取 myController 日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:35:51.570

> 如何配置仅获取 myController 日志？

您当前正在将根记录器设置为“信息”级别，因此

```
info "grails.app.controllers.myController" 
```

实际上并没有做任何事情（因为这个记录器无论如何都会从根继承一个级别的信息）。如果要禁用除此之外的所有日志记录，`myController`则需要将根记录器设置为“关闭”而不是 info

```
root {
    off 'connection'
} 
```

相反，如果您想将`myController`输出放入`/tmp/connection.log`stdout 并将其他日志消息保留在标准输出中，那么您需要

```
root {
  info 'stdout'
}

info connection:'grails.app.controllers.myController', additivity:false 
```

（或者完全忽略该`root`块以获得默认行为，这相当于说`root { error "stdout" }`）。`additivity:false`告诉 myController 记录器仅记录到直接附加到它的附加程序（您的“连接”附加程序）。如果没有这个，消息*也会*转到从父级继承的附加程序，即默认的“stdout”附加程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:02:21.743

您应该定义附加程序特定的记录器，例如

```
info connection: "grails.app.controllers.myController" 
```

接下来，您应该从根块中删除您的“连接”附加程序，以避免根记录器继承。

有关详细信息，请参阅 grails 文档中的日志记录部分：http: [//grails.org/doc/latest/guide/conf.html#logging](http://grails.org/doc/latest/guide/conf.html#logging)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:35:30.243

尝试这样的事情：

```
log4j = {

    def loggerPattern = '%d %-5p >> %m%n'

    def errorClasses = [] // add more classes if needed
    def infoClasses = ['grails.app.controllers.myController'] // add more classes if needed
    def debugClasses = [] // add more classes if needed

    appenders {
        console name:'stdout', layout:pattern(conversionPattern: loggerPattern)
        rollingFile name: "file", maxFileSize: 1024, file: "./tmp/logs/logger.log", layout:pattern(conversionPattern: loggerPattern)
    }

    error   stdout: errorClasses, file: errorClasses
    info    stdout: infoClasses, file: infoClasses
    debug   stdout: debugClasses, file: debugClasses
} 
```

# mysql - 总结mysql中的许多表

> ID：14497987
> 
> 赞同：3
> 
> 时间：2013-01-24T09:32:14.647
> 
> 标签：mysql, sql, select

我的任务是制作一个包含数千条记录的数千个其他表的汇总表。汇总表应包含：

1.  “记录”的非冗余列表；
2.  包含该“记录”的表数
3.  包含该“记录”的表的名称

示例是：

```
Table_1
nameA
nameB
nameC

Table_2
nameB
nameC
nameD

Table_3
nameC
nameD
nameE 
```

结果应该是这样的

```
Record_name  Number  Table_names
nameA        1       Table_1
nameB        2       Table_1, Table_2
nameC        3       Table_1, Table_2, Table_3
nameD        2       Table_2, Table_3
nameE        1       Table_3 
```

也许这不是一件复杂的事情，但是，由于我是新手`mysql`，我希望得到你们的一些建议和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:34:50.277

```
SELECT  col1 as `Record Number`, 
        COUNT(*) as `Number`, 
        GROUP_CONCAT(_name) as `table name`
FROM
(
    SELECT col1, 'table_1' as _name FROM table_1
    UNION ALL
    SELECT col1, 'table_2' as _name FROM table_2
    UNION ALL
    SELECT col1, 'table_3' as _name FROM table_3
) a
GROUP BY col1 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/0c2fe/4)

# java - 用于在应用程序之间委派任务的 Java 企业架构

> ID：14497989
> 
> 赞同：2
> 
> 时间：2013-01-24T09:32:27.450
> 
> 标签：java, jakarta-ee, architecture, scheduling, message-queue

在我的环境中，我需要安排长时间运行的任务。我有应用程序 A，它只向客户端显示当前正在运行的任务列表并允许安排新任务。还有应用程序 B 进行实际的艰苦工作。

所以应用 A 需要在应用 B 中调度一个任务。它们唯一的共同点就是数据库。最简单的做法似乎是添加一个包含任务列表的表，并让应用程序 B 每隔一段时间查询该表并执行新计划的任务。

然而，这似乎不是正确的做法。乍一看，企业环境中的工作工具似乎是消息队列。应用 A 向队列发送带有任务描述的消息，应用 B 从队列中读取消息并执行任务。在这种情况下，应用程序 A 是否有可能在不创建像上面提到的那样的表的情况下获取所有已调度任务的状态（持久队列？），应用程序 B 会将已完成任务的状态写入该表？另请注意，应用程序 A 可能有多个实例，并且每个实例都需要了解所有实例的所有任务。

“表格方法”的缺点是我需要进行数据库轮询。

“消息队列方法”的缺点是我在基础设施中引入了一个新的通信通道（另一件事可能会失败）。

你怎么看？还有其他想法吗？提前感谢您的任何建议:)

**========== 更新 ==========**

最终我决定采用以下方法：这个问题有两个方面：一个是 A 和 B 之间的通信。另一个是获取有关任务的信息。

对于通信来说，适合这项工作的工具是 JMS。为了获取数据，正确的工具是数据库。所以我会让应用程序 A 在“任务”表中添加一个新行来描述一个任务（我可以稍后查询这个表以获取所有任务的列表）。然后 A 将通过 JMS 向 B 发送一条消息，只是说“你有工作要做”。B 将完成工作并更新表中的任务状态。

感谢您的所有回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:51:05.563

您需要考虑现在的部署环境以及未来可能发生的变化。

您正在有效地研究两个问题，这两个问题都可以通过多种方式解决，具体取决于您能够获得多少基础设施并且愿意引入多少基础设施，但为您的问题“正确调整”设计也很重要。

虽然考虑使用数据库和消息传递是正确的，但您需要考虑这些项目是否对您的域来说是多余的，只有您和了解您的域的其他人才能真正回答这个问题。

我的建议是查看您所在地区已经使用的内容。如果您已经拥有可以构建的数据库基础架构，那么在数据库中监视任务活动和调度作业并不是一个坏主意。但是，如果您必须运行自己的数据库、获得新硬件、没有足够的支持资源，那么引入数据库可能不是一个明智的选择，您可以考虑一种更简单但可能更脆弱的方法来让您的进程写入文件以安排作业和报告任务。

同时，不要将 DB 或 JMS 的引入视为天生容易出错。正确实施它们是稳定且经过验证的技术，将使您的系统具有可扩展性和可管理性。

正如@kan 所说，使用暴露 Web 服务接口也是一个有用的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:37:48.373

您在企业架构中有[消息 (JMS) 。](http://docs.oracle.com/javaee/1.3/jms/tutorial/1_3_1-fcs/doc/overview.html#1027335)使用这些，它们在 Glassfish 等 Java EE 容器中可用。可以对消息进行序列化，以确保即使服务器在队列中重新启动，它们也会被传递。你甚至不需要关心这一切是如何实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:40:53.600

另一种选择是将 B 作为服务，例如将控制和状态接口公开为 REST 或 SOAP 接口。在这种情况下，A 将只是作为 B 的客户端应用程序。B 将其状态存储在数据库中。A 是一个无状态的应用程序，它只与 B 通信。

顺便说一句，使用 Spring Remote，您可以公开一个接口并使用 JMS、REST、SOAP 或 RMI 中的任何一个作为传输层，以后可以在必要时进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:23:03.553

这里可以有几种方法。首先，正如@kan 建议的那样，让应用 B 公开一些用于交互的 Web 服务。这将使异构客户端与应用程序 B 进行通信。似乎是一个好方法。应用 B 可以在内部使用它认为合适的任何持久性存储。

或者，您可以让应用程序 B 通过 JMX 公开一些管理接口，并让应用程序 A 等应用程序通过此管理接口与应用程序 B 通信。实现任务提交和检索统计信息等会更简单。此外，您还可以利用 JMX 通知来实时更新任务提交和成就等。这样做的缺点是这将是 Java 特定的解决方案，因此支持异构客户端将是遥不可及的梦想。

# eclipse - 向 Eclipse Git 添加新存储库时找不到 git-upload-pack

> ID：14497998
> 
> 赞同：8
> 
> 时间：2013-01-24T09:32:44.597
> 
> 标签：eclipse, git, egit

我使用带有 GIT 插件的 Eclipse。我尝试添加一个新的 GitHub 存储库，方法是将 GitHub URL 复制到剪贴板，然后转到“Git 存储库”视图并右键单击“粘贴存储库路径或 URL”。

我收到以下错误：

[https://github.com/rothariel/aimnegochat：https://github.com/rothariel/aimnegochat/info/refs?service=git-upload-pack](https://github.com/rothariel/aimnegochat)**未**找到

 **这很奇怪，因为我在这个视图中已经有一些存储库......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T10:45:24.600

从 Erel 在评论部分对我的问题的回答中，事实证明错误是错误 url 的副本。因此，Erel 没有复制 github 提供的 url，而是复制了导航栏中的 url。解决方案是将存储库地址更改为[https://github.com/rothariel/aimnegochat.git](https://github.com/rothariel/aimnegochat.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T13:22:52.863

对于从 Visual Studio Online 克隆时遇到相同错误的 EGit/Eclipse 用户，请注意 repo URL 不是：- [https://[alt-name].visualstudio.com/DefaultCollection/[your_repo]](https://[alt-name].visualstudio.com/DefaultCollection/[your_repo])

正确的是： - [https://[alt-name].visualstudio.com/DefaultCollection/](https://[alt-name].visualstudio.com/DefaultCollection/) **_git/** [your_repo]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T07:51:03.603

我在 service=git-upload-pack not found 之前收到了这条消息

似乎我用于该 git 的 gitlab 用户和密码是错误的。我把它改成了正确的，它工作得很好。

约西列夫**