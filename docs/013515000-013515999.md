# StackOverflow 问答 13515000-13515999

# php - 使用来自多个数组的键创建数组

> ID：13515000
> 
> 赞同：3
> 
> 时间：2012-11-22T14:39:32.237
> 
> 标签：php, arrays, foreach

我有一个看起来像这样的数组：

```
array(5) {
  [0]=>
  array(2) {
    ["id"]=>
    string(2) "23"
    ["my_value"]=>
    NULL
  }
  [1]=>
  array(2) {
    ["id"]=>
    string(2) "62"
    ["my_value"]=>
    NULL
  }
... 
```

我想要一个数组，它作为键在每个数组中具有键“id”的值，并且作为值具有“my_value”的值。但是，如果“my_value”为 NULL，我想将值设置为 100。

因此，结果数组将是这样的：

```
array(5) {
      [23] => 100
      [62] => 100
... 
```

我怎样才能干净地做到这一点？我一直在用 foreach 进行迭代，但我相信它可以做得更干净......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:51:24.790

你可以这样做：

```
$arrayUsers = array();//declare array

$arrUser = array("id"=>"23","myvalue"=>NULL); //User 23
$arrayUsers[$arrUser["id"]] = $arrUser; //add

$arrUser = array("id"=>"62","myvalue"=>NULL); //User 62
$arrayUsers[$arrUser["id"]] = $arrUser; //add

var_dump($arrayUsers); 
```

结果是这样的：

```
array(2) 
{ 
    [23]=> array(2) 
    { 
        ["id"]=> string(2) "23" 
        ["myvalue"]=> NULL 
    }

    [62]=> array(2) 
    { 
        ["id"]=> string(2) "62" 
        ["myvalue"]=> NULL 
    } 
} 
```

[编辑]

```
$valueArray = array();

foreach($arrayUsers as $id=>$value)
{
    $val = ($value["myvalue"]===NULL?100:$value["myvalue"]);
    $valueArray[$id] = $val;
}

var_dump($valueArray); 
```

这应该像你想要的那样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:46:38.453

您可以使用[array_map()](http://php.net/manual/en/function.array-map.php)进行填充`my_value`

```
$newData = array_map(function($row) {
    if ( $row['my_value'] === null ) $row['my_value'] = 100;
    return $row;
}, $data); 
```

但是由于格式化，您已经需要一个 foreach 循环。所以试试这个：

```
$newData = array();
foreach ($data as $row) {
    $newData[$row['id']] = ($row['my_value'] === null) ? 100 : $row['my_value'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:48:07.780

你应该这样做：

```
foreach($old_array as $value)
$new_array[$value['id']]= ($value['my_value']!==NULL) ? $value['my_value'] : 100 ; 
```

结果将是

```
array(5) {
      [23] => 100
      [62] => 100
... 
```

[在Codepad.org](http://codepad.org/ZCclOo1n)运行代码示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:00:11.243

```
$arr = array(5 => array('id'=>23, 'myvalue'=>null),
             1 => array('id'=>62, 'myvalue'=>null));

$callback = function($v) { 
  $id = $v['id'];
  $myv = !is_null($v['myvalue']) ? $v['myvalue'] : 100;
  return array($id=>$myv);

}
$newarr = array_map($callback, $arr); 
```

# sql - SQL 动态列重用

> ID：13515001
> 
> 赞同：1
> 
> 时间：2012-11-22T14:39:37.027
> 
> 标签：sql

我有以下 SQL 语句：

```
Select 
   DateAdd(month, 1, DateField) as MyNewDate, 
   CASE WHEN MyNewDate < GetDate() THEN 0 ELSE 1 END as Expired
End 
```

我想在`DateAdd`不重新评估`DateAdd`列的情况下重用计算`Expired`。实际上，查询比这个简单的 dateAdd 复杂得多。

我得到的错误是：

> *列名“MyNewDate”无效。*

如何重用动态列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:42:44.887

您不能在同一查询中使用别名。

你需要这样的东西

```
SELECT MyNewDate, CASE WHEN MyNewDate < GetDate() THEN 0 ELSE 1 END as Expired
FROM
(
    Select DateAdd(month, 1, DateField) as MyNewDate...
) 
```

或重新输入

```
Select 
   DateAdd(month, 1, DateField) as MyNewDate, 
   CASE WHEN DateAdd(month, 1, DateField) < GetDate() THEN 0 ELSE 1 END as Expired
End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:43:19.937

```
SELECT MyNewDate,
   CASE WHEN MyNewDate < GetDate() THEN 0 ELSE 1 END as Expired
(
Select 
   DateAdd(month, 1, DateField) as MyNewDate
FROM tab 
) 
```

# wpf - 动态填充 DataGridComboBoxColumn（WPF、DataGrid）的 ComboBox

> ID：13515007
> 
> 赞同：2
> 
> 时间：2012-11-22T14:39:52.187
> 
> 标签：wpf, datagrid, datagridcomboboxcolumn

在我的 WPF 应用程序中，我有一个绑定到 ObservableCollection 的 DataGrid。

```
 <DataGrid x:Name="DataGridTeilnehmer" HorizontalAlignment="Left" VerticalAlignment="Top" CellEditEnding="DataGridTeilnehmer_CellEditEnding" AutoGenerateColumns="False" SelectionMode="Single">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Teilnehmer" CellEditingTemplate="{StaticResource TeilnehmerEditTemplate}" CellTemplate="{StaticResource TeilnehmerCellTemplate}" />
            <DataGridComboBoxColumn Header="Pass" />
                    ... 
```

DataGridComboBoxColumn 应为每一行填充单独的值。这些值取决于第一列的条目。所以，我想在 CellEditEnding 事件中设置数据，如下所示：

```
 private void DataGridTeilnehmer_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
    {
        if (!commiting)
        {
          commiting = true;
            DataGridTeilnehmer.CommitEdit(DataGridEditingUnit.Row, false);
            commiting = false;

           // check, whether it is the first column that has been edited
           if (...)
             // get the list<string> for the combobox depending on the edited content
             // get the combobox of the current row and bind the calculated list<string> to it
        }
    }
} 
```

我怎样才能做到这一点？

编辑：我想要实现的一个例子。

我有客户名单，每个客户都有单独的票。在第一列中选​​择了客户后，我想加载该客户拥有的票证列表并将其加载到下一列 - 组合框列。

提前致谢，
弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:58:17.467

如果您将数据网格绑定到 ObservableCollection 并且您的对象实现了 INotifyPropertyChanged，您可以在不使用单元格编辑结束事件的情况下实现您所需要的。

在您的模型中，只需检查第一列的值，然后设置其他列的值：

```
private string _firstColumn;
public string FirstColumn
{
    get { return _firstColumn; }
    set { 
         _firstColumn = value; 
         if(value == ...)
         //set other properties
         ...
         //notify the change
         OnPropertyChanged("FirstColumn"); }
} 
```

当您的 datagridrow 失去焦点时，所有新值都会被通知给 datagrid

# android - 从上次会话中重新生成列表视图中的复选框

> ID：13515009
> 
> 赞同：1
> 
> 时间：2012-11-22T14:40:04.840
> 
> 标签：android, listview, checkbox, arraylist, android-arrayadapter

我从带有复选框的适配器生成一个工作列表视图：

```
final ArrayList<String> ArrayListHouse = new ArrayList<String>();
do
{
String ColumnNameTemp = myDBcursor.getString(ColumnIndexName);
ArrayListHouse.add(ColumnNameTemp);
}while (myDBcursor.moveToNext());

ListView = new ListView(getActivity());
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
android.R.layout.simple_list_item_checked, ArrayListHouse);
listView.setAdapter(adapter); 
```

现在我想在应用程序停止后重新生成复选框的状态。使用 sharedprefs 或我的数据库保存选中的复选框对我来说没有问题。但是我在尝试使用预定义的复选框加载列表时遇到了很多麻烦。什么是正确的机制？有什么例子吗？

再见卡斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:53:44.230

[http://developer.android.com/reference/android/widget/AbsListView.html#setItemChecked(int](http://developer.android.com/reference/android/widget/AbsListView.html#setItemChecked(int), boolean) Here is what you need:

```
AbsListView.setItemChecked(int, boolean) 
```

by the way, how many checkboxes do you have? probably it would be better to put them in LinearLayout and ScrollView manually ?

# vbscript - 查找来自一个域的用户是否存在于另一个域中

> ID：13515016
> 
> 赞同：1
> 
> 时间：2012-11-22T14:40:23.873
> 
> 标签：vbscript, active-directory, domainservices

我正在尝试学习一些系统管理员类型的东西，对此我很陌生。我的问题似乎很简单，但我似乎找不到办法做到这一点。这是场景：

*   我在笔记本电脑的 Hyper-V 下设置了 2 台 Windows Server 2012 机器
*   我在两者上都设置了新的森林，并将每个森林提升为 DC。假设一个域称为 mydomain.com，另一个称为 yourdomain.com。两个域之间存在双向信任，我已经验证了该信任。
*   我在 mydomain.com 和 yourdomain.com 中添加了一些虚拟用户，有些名称相同，有些名称不同

现在，我要做的是检查 mydomain.com 中的哪些用户也存在于 yourdomain.com 中。例如，我在 mydomain.com 中有一个名为“fred.flintstone”的用户，我想检查他是否也存在于 yourdomain.com 中。

我仅限于使用 VBScript/Perl/Python/Batchfile 和/或 DS 工具（如 dsquery、dsget 等），不幸的是 powershell 已退出（目前）

欢迎任何有关如何编写脚本的指示。

提前致谢

PS：本练习的最终目标是检查 mydomain.com 中的所有组，并检查这些组是否也存在于 yourdomain.com 中。如果存在，则将用户从 mydomain.com 移动到相应组中的 yourdomain.com 中，如果不存在，则在 yourdomain.com 中创建组并创建相应的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:02:04.170

Active-Directory 首先是一个目录，当您想到 Directory 时，您会想到 LDAP。

您首先必须考虑两个相同的用户是什么。我的意思是，您必须创建必须相同才能做出决定的属性列表。

其次，您可以使用 LDIFDE.EXE（或者这里可能是 CSVDE.EXE）工具来导出所有用户，但只需使用有趣的属性、DN 和重要属性。请注意提取 LDAP 树中的开头（为了避免常见的系统用户），还要考虑它存在两个用户类：'user' 和 'inetOrgPerson'。

然后你可以使用常规的脚本工具和算法来比较这两个列表。以及为什么不再次使用 LDIFDE.EXE 来创建丢失的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:52:41.423

如果您的最终目标是将用户从 mydomain.com 迁移到 yourdomain.com，那么您现在应该认真停下来，考虑一条不同的路径。

创建具有相同名称的用户和组将不允许这些用户和组访问 mydomain.com 中的资源。这是因为实际使用的不是名称，而是称为 SID 的安全标识符。这将在 yourdomain.com 中完全不同。

如果您必须访问 mydomain.com 中的资源，则需要修改访问控制列表 (ACL)。即使用户、组和服务器很少，这也是一个巨大的问题。

这就是微软提供名为 ADMT（Active Directory Migration Tool）的免费工具的原因。可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=8377)下载。不幸的是，它还不支持 Server 2012，因此您还需要目标域中的 2008 R2 Server。看[这里](http://support.microsoft.com/kb/2753560/en-us?wa=wsignin1.0)。ADMT 将允许您将用户 SID 添加到名为 SIDHistory 的属性中。在决定是否授予访问权限时，资源所有者会检查 SIDHistory 属性。SIDHistory 不能手动修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:20:11.267

我设法编写了我想要的 VBScript，所以我将在这里分享。该脚本可能需要很好的清理，但现在它完成了这项工作，所以我希望它也可以帮助其他人。

```
' Get OU

strOU1 = "OU=here,DC=mydomain,DC=com"
strOU2 = "OU=there,DC=yourdomain,DC=com"

Dim samid
Dim ldap_command

' Create connection to AD
'
Set objConnection = CreateObject("ADODB.Connection")
objConnection.Open "Provider=ADsDSOObject;"

' Create command
'
Set objCommand1 = CreateObject("ADODB.Command")
objCommand1.ActiveConnection = objConnection
objCommand1.Properties("Page Size") = 1000

' Execute command to get all users in OU
'
objCommand1.CommandText = _
  "<LDAP://" & strOU1 & ">;" & _
  "(&(objectclass=user)(objectcategory=person));" & _
  "adspath,distinguishedname,sAMAccountName;subtree"

Set objRecordSet = objCommand1.Execute

' Show info for each user in OU
'
Do Until objRecordSet.EOF

  ' Show required info for a user
  '  
   samid = objRecordSet.Fields("sAMAccountName").Value
   WScript.Echo "Processing " & objRecordSet.Fields("sAMAccountName").Value
   Set objCommand2 = CreateObject("ADODB.Command")
   ldap_command = _
   "<LDAP://" & strOU2 & ">;" & _
   "(&(objectclass=user)(objectcategory=person)" & _
   "(sAMAccountName=" & samid & "));" & _
   "adspath,distinguishedname,sAMAccountName;subtree"

   objCommand2.CommandText = ldap_command

   objCommand2.ActiveConnection = objConnection 
   objCommand2.Properties("Chase referrals") = &H40  

   Set objRecordSet2 = objCommand2.Execute

   If objRecordSet2.RecordCount = 0 Then
      Wscript.Echo "The sAMAccountName is not in use."
   Else
      Wscript.Echo "This ID is in use"
   End If

  ' Move to the next user
  '
   objRecordSet.MoveNext

Loop 
```

# objective-c - 将视图添加到顶视图控制器

> ID：13515020
> 
> 赞同：0
> 
> 时间：2012-11-22T14:40:41.353
> 
> 标签：objective-c

我试图将 UIView 添加到当前显示的 UIView 中。这是我想出的代码：

```
 UIWindow *window = [UIApplication sharedApplication].keyWindow;
    UINavigationController *nav = window.rootViewController;
    UIViewController *viewController = [[nav viewControllers]lastObject];
    NSLog(@"La clase: %@", [viewController class]);

    [viewController.view addSubview:self.infoMsg]; 
```

问题是我没有看到那个UIView，变量的值`viewController`是正确的，但是我没有看到那个视图上添加的视图...

谢谢

[编辑]

我刚刚检查过，例如，如果不是添加为子视图`infoMsg`，它是我已经合成的 UIView，我添加了一个我在添加之前创建的 UIView，它正确添加了为什么会这样？为什么我不能添加我的对象的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:44:45.753

在添加视图之前，您仍然必须创建视图，无论它是属性还是局部变量。我没有看到你在哪里初始化`self.infoMsg`。大概是吧`nil`。

试试这个：

```
NSLog(@"%@", self.infoMsg == nil ? @"It's nil" : @"It's not nil"); 
```

如果它为零，那是你的问题。

# bash - 如何获取目录中的特定文件名并将它们保存在bash中的文件中

> ID：13515021
> 
> 赞同：0
> 
> 时间：2012-11-22T14:40:40.190
> 
> 标签：bash, directory

我需要将包含一些特殊术语（如“B_”和“D_”）的目录中的目录名称保存到文本文件中，但只有文件名而不是整个目录，但我不知道如何在 bash 中执行此操作。我需要一个如下所示的文本文件作为输出：

```
topout_B6_
topout__B6_
topout_B6_
topout_D2_
topout_D2_
topout_D2_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:56:32.183

如果您的文件名足够简单，您可以使用 glob 扩展来获取它们的列表。此全局扩展将不包括任何父目录（但可能包括子目录）。

```
files=(*B_* *D_*) #stores an array of file names in $files 
```

如果模式更复杂并且您需要正则表达式，则可以使用[find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)实用程序。

```
files=($(find . -type f -regex ".*[BD]_?.*)) 
```

Find 将返回文件的完整路径，因此您需要去除前导路径。一种方法是使用[参数替换](http://tldp.org/LDP/abs/html/parameter-substitution.html)。

```
stripped_files=$(for f in "${files[@]}"; do echo ${f##*/}; done) #iterate over array values 
```

最后，您可以将其写入文件。（使用[这里字符串](http://en.wikipedia.org/wiki/Here_document#Unix_shells)）

```
>outfile <<<$stripped_files 
```

# .net - 装配帮助中的单例类使用远程处理

> ID：13515029
> 
> 赞同：0
> 
> 时间：2012-11-22T14:41:03.637
> 
> 标签：.net, vb.net, singleton, remoting

我在一个程序集中有一堂课，我希望成为一个单身人士。我希望它由我的服务器应用程序创建，然后允许*同一台机器上的*另一个应用程序访问这个类实例。

我正在使用这个延迟加载实现来确保只存在一个实例：

```
Private Shared ReadOnly _instance As New Lazy(Of PersonX)(Function() New PersonX(), System.Threading.LazyThreadSafetyMode.ExecutionAndPublication)

Public Shared ReadOnly Property Instance() As PersonX
    Get
        Return _instance.Value
    End Get
End Property 
```

然后我使用带有以下远程代码的*Private Sub New：*

```
Dim uri As String = String.Format("tcp://{0}:{1}/PersonX", "localhost", 1976)
RemotingServices.Marshal(Person.Instance, uri)
RemotingConfiguration.RegisterActivatedServiceType(GetType(PersonX)) 
```

在我的调用代码中，我创建了我的第一个实例：

```
Dim PersonX as SingletonTestClass.PersonX = SingletonTestClass.PersonX.Instance 
```

我正在使用以下代码使用远程处理连接到实例：

```
Dim newPerson As SingletonTestClass.PersonX
Dim uri As String = String.Format("tcp://{0}:{1}/PersonX", "localhost", 1976)
newPerson = CType(Activator.GetObject(GetType(SingletonTestClass.PersonX), uri), SingletonTestClass.PersonX) 
```

但是现在当我尝试访问对象属性时，我收到一条错误**Requested Service not found** on this line：

```
newPerson.Name = "Fred" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:46:37.307

要回答您的问题，您需要在编组 Remoting 对象之前注册一个频道：

请参阅简单、有效的 C# 示例：

```
public class Test : MarshalByRefObject
    {
        public string Echo(string message)
        {
            return "Echo: " + message;
        }
    }

private void button1_Click(object sender, EventArgs e)
        {
            ChannelServices.RegisterChannel(new TcpChannel(1234));
            Test test1 = new Test();
            RemotingServices.Marshal(test1, "TestService");

            Test test2 = (Test)Activator.GetObject(typeof(Test), "tcp://localhost:1234/TestService");
            MessageBox.Show(test2.Echo("Hey!"));
        } 
```

确保防火墙没有阻止端口。

# javascript - 在 Joomla 组件后端 2.5 中插入地理编码

> ID：13515031
> 
> 赞同：0
> 
> 时间：2012-11-22T14:41:10.013
> 
> 标签：javascript, jquery, joomla, joomla2.5, joomla-extensions

我目前正在为 Joomla 2.5 开发我的第一个组件，我在后端插入了 jForm，我现在需要在后端添加 java 脚本，因为我需要对插入的地址进行地理编码，然后填写两个字段纬度和另一个经度。

每次我尝试在后端插入任何形式的脚本时，都会收到 500 错误。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:17:35.350

很简单：

```
$document = JFactory::getDocument();
$document->addScript("http://maps.google.com/maps/api/js?sensor=false");
$document->addScript("//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js");
$document->addScript(JURI::base() . 'media/mod_locate/js/mod_map.js');
$document->addStyleSheet(JURI::base() . 'media/mod_locate/css/mod_map.css'); 
```

不管怎么说，还是要谢谢你 ：）

# c - 获取打开设备的文件路径

> ID：13515034
> 
> 赞同：-2
> 
> 时间：2012-11-22T14:41:14.013
> 
> 标签：c, linux

假设我打开 /dev/ttyUSB0。现在我想使用它的文件描述符来获取它的文件路径。

```
int myfd;

int main(int argc, char *argv[]){
char linkname[256];
ssize_t r;

myfd = open("/dev/ttyUSB0", O_RDWR);
if(myfd<0){

    perror("open error");
    exit(1);
}

r = readlink("/proc/self/fd/myfd", linkname, sizeof(linkname)-1);

if(r<0){
    perror("lstat");
    exit(EXIT_FAILURE);
}

printf("%s\n", linkname);

close(myfd);

    return 0;
} 
```

我应该得到的是/dev/ttyUSB0 ..我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:47:49.533

字符串肯定`myfd`不在 /proc 文件系统中吗？我认为链接是用数字命名的，所以你需要调用中的变量*值*。`myfd``readlink()`

# user-interface - 是否有任何 ghci GUI 前端/扩展支持像 ipython 这样的内联图形显示？

> ID：13515036
> 
> 赞同：4
> 
> 时间：2012-11-22T14:41:19.610
> 
> 标签：user-interface, haskell, ghci

我的意思是它具有内联图形显示、工作表模式、音频播放等功能......比如[ipython](http://ipython.org)、maple 和 matlab

我在 windows 上找到[了winghci](http://code.google.com/p/winghci)，但它似乎没有这些功能。（顺便说一句，我没有使用 Windows）

在 Linux 上，我找不到 ghci 的任何 GUI 模式。我总是从终端运行 ghci。

重复？[这](https://stackoverflow.com/questions/5868916/haskell-graphics-library-that-works-in-ghci-on-macos-x)和[这](https://stackoverflow.com/questions/9022978/haskell-plotting-library-similiar-to-matlab)表明 ghci 能够做图形，但这并不是我想知道的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:06:38.267

有一个名为[GHCLive](http://ghclive.wordpress.com/)的 Summer of Code 项目，它看起来与您想要的完全一样。令人惊讶的是，没有人真正谈论它。

我希望他们是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:43:16.673

GHCi 没有“图形”版本或变体。正如链接问题中所指出的，有很多 Haskell 库可以做[绘图、绘图和其他图形](http://hackage.haskell.org/packages/archive/pkg-list.html#cat%3agraphics)，并且有很多库可以[输出音频](http://hackage.haskell.org/packages/archive/pkg-list.html#cat%3amedia)或[产生音乐](http://haskell.cs.yale.edu/euterpea-2/)。

如果您只需要更好的 Haskell 编程助手，您应该查看 Emacs 的各种 Haskell 模式（我个人最喜欢的是[ghc-mod](http://www.mew.org/~kazu/proj/ghc-mod/en/)）。这些还可以让您从 Emacs 评估 Haskell 表达式，这可以让您模拟工作表。

还有一些像 Yi 或[Leksah](http://leksah.org/)这样的纯 Haskell 编辑器，它们可以完成 Emacs 的 Haskell 模式所做的一切，但以更纯粹的方式。特别是，Leksah 旨在成为您正在寻找的东西：与 Haskell 一起工作的 IDE。

# pdf - 使用RenderListener接口查找PDF中的一段文字时无法获取页码

> ID：13515038
> 
> 赞同：0
> 
> 时间：2012-11-22T14:41:25.617
> 
> 标签：pdf, itext

iText 需要坐标才能在不同位置的现有 PDF 中创建表单域和页码。

我的 PDF 是动态的。所以我决定用一些标识符文本创建 PDF。并使用 TextRenderInfo 查找文本的坐标，并使用这些坐标创建文本字段和其他表单字段。

```
解析HelloWorld.java
    public void extractText(String src, String dest) 抛出 IOException, DocumentException {
        PrintWriter out = new PrintWriter(new FileOutputStream(dest));
        PdfReader 阅读器 = 新 PdfReader(src);
        PdfStamper stp = new PdfStamper(reader, new FileOutputStream(dest);
        RenderListener listener = new MyTextRenderListener(out,reader,stp);
        PdfContentStreamProcessor 处理器 = new PdfContentStreamProcessor(listener);

```
 for ( int pageNum= 0; pageNum < reader.getNumberOfPages(); pageNum++ ){
        PdfDictionary pageDic = reader.getPageN(pageNum);

        PdfDictionary resourcesDic = pageDic.getAsDict(PdfName.RESOURCES);
        processor.processContent(ContentByteUtils.getContentBytesForPage(reader, pageNum), resourcesDic);
    }   

    out.flush();
    out.close();
    stp.close(); 
```

}

MyTextRenderListener.java
      公共无效渲染文本（TextRenderInfo渲染信息）{

 if (renderInfo.getText().startsWith("Fill_in_TextField")){
          // creates the text fields by getting co-ordinates form the renderinfo object.     
                    createTextField(renderInfo); 
     }else if (renderInfo.getText().startsWith("Fill_in_SignatureField")){
          // creates the text fields by getting co-ordinates form the renderinfo object.     
         createSignatureField(renderInfo);
     }

  } 
```

问题是我在类的 extractText 方法中有一个页码`ParsingHelloWorld`。当在内部处理页面内容的 MyTextRenderListener 类中调用 renderText 方法时，我无法获取 pageNumber 以在标识符文本所在的特定坐标处生成 PDF 中的字段（例如 Fill_in_TextField、Fill_in_SignatureField..etc ）。

在我的场景中获取页码的任何建议/想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:59:47.713

这很容易。将参数添加到`MyTextListener`：

```
protected int page;
public void setPage(int page) {
   this.page = page;
} 
```

现在，当您遍历 中的页面时`ParsingHelloWorld`，将页码传递给`MyTextListener`：

```
listener.setPage(pageNum); 
```

现在您可以在方法中访问该数字，`renderText()`并且可以将其传递给您的`createTextField()`方法。

请注意，我认为您的循环是错误的。页码不是从第 0 页开始，而是从第 1 页开始。

# java - 以 html 格式显示输出

> ID：13515042
> 
> 赞同：0
> 
> 时间：2012-11-22T14:41:37.440
> 
> 标签：java, sql

我正在使用`SQLLite`数据库。我正在尝试以`HTML`格式检索数据。我能够以正常方式检索数据，但我希望使用查询检索的数据必须以`HTML`格式显示。你能帮我么 ？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:54:35.437

If, per the original tagging, your question is "how to display HTML in Swing", if you limit yourself to simple HTML, you can just display it in a JLabel which supports rudimentary formatting.

A simple quick search bring back to Stackoverflow (as often) to the topic: [How to render basic HTML markup inside a JPanel in Java Swing?](https://stackoverflow.com/questions/6360744/how-to-render-basic-html-markup-inside-a-jpanel-in-java-swing)

# c++ - 更改一些默认模板参数

> ID：13515043
> 
> 赞同：2
> 
> 时间：2012-11-22T14:41:44.777
> 
> 标签：c++

考虑这样的模板类：

```
template <int opt1 = 1,
          bool opt2 = false,
          bool opt3 = true,
          int opt4 = 50>
class X  { }; 
```

我尝试只更改一个参数，但似乎 C++ 无法做到这一点。还是我错了？如何实现这样的目标：

```
X<opt2 = true> x; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:51:49.860

试试这个：

```
// opt1 = 1 (provided), opt2 = true (provided), opt3 = true (default), opt4 = 50 (default)
X<1, true> x; 
```

如果你想改变**第二个**参数的默认值，你也必须指定前一个参数的值。您不能通过名称引用参数，参数有名称和位置，事实是您根本不需要在声明中命名它们：

```
template <int = 1,
      bool = false,
      bool = true,
      int = 50>
class X  { }; 
```

因此，您不能为参数列表*中间*的参数定义默认值：

```
void f(int a, int b = 0, int c); // Error! 
```

如果前面的函数声明是合法的，这个调用会做什么？：

```
f(1, 2); 
```

它会`f`用`a = 1, b= 0, c = 2`or调用`a = 1, b = 2, c = unknown`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T16:09:36.280

*R. Martinho Fernandes*提到的 Boost 版本的工作原理如下：

1.  定义许多选项类型（它们可以是空标签结构，或模板化`bool`以启用/禁用，或其他）

    ```
    template <int I>  struct option_1: public std::integral_constant<int, I>  {};
    template <bool B> struct option_2: public std::integral_constant<bool, B> {};
    template <bool B> struct option_3: public std::integral_constant<bool, B> {};
    template <int I>  struct option_4: public std::integral_constant<int, I>  {}; 
    ```

2.  定义某种类型的默认值类型列表（我会将它与现有模板类一起隐藏在命名空间中）

    ```
    namespace impl {
      typedef typelist<option_1<1>, option_2<false>,
                       option_3<true>, option_4<50>> X_defaults;

      template <int opt1, bool opt2, bool opt3, int opt4>
      class X { /* ... */ };
    } 
    ```

3.  编写一种`get`机制以从合适的类型列表中提取选项（包括回退到提供的默认值的版本）

    一旦你拥有了所有这些，你就可以编写一个包装类来处理所有选项并委托给你现有的类，例如。

    ```
    template <typename... Options>
    class X: public impl::X<
        get<option_1, typelist<Options...>, impl::X_defaults>::value,
        get<option_2, typelist<Options...>, impl::X_defaults>::value,
        get<option_3, typelist<Options...>, impl::X_defaults>::value,
        get<option_4, typelist<Options...>, impl::X_defaults>::value>
    {
    }; 
    ```

您的最终调用现在看起来像：

```
X<option_2<true>> x; 
```

* * *

The `typelist` and `get` parts are left as an exercise (along with lots of errors, most likely) for the OP, a kindly passing editor, or me when I have more time.

# php - 实时程序

> ID：13515045
> 
> 赞同：1
> 
> 时间：2012-11-22T14:41:47.147
> 
> 标签：php, c, linux, real-time, google-ads-api

我有用 PHP 编写的与 Google Adwords API 同步的平台。我需要我的服务器反复检查 Adwords 数据库中的值，然后更新我的数据库。我认为这可以通过 cronjob 来完成，但问题是每 5 分钟运行一次 php cron，向谷歌服务器发送请求可能会破坏 CPU 并消耗大量内存。我想出了一个想法，用 C 语言制作它，它非常轻巧，不会消耗太多内存。

无论用户访问 PHP 脚本，同步过程都应该运行，因此我首先提出了 cronjob。

我的问题是我应该如何处理这个问题？cronjob 是正确的解决方案吗？如果是，应该用C来完成吗？我可能需要一个 Soap 客户端库，你能推荐一个吗？

非常感谢，奥伦

# python - 如何找到打印语句的位置？

> ID：13515048
> 
> 赞同：4
> 
> 时间：2012-11-22T14:41:57.317
> 
> 标签：python, debugging, io, refactoring

我有一个程序，它依赖于一个大型代码库，它会打印出许多不相关和烦人的消息。我想清理一下它们，但由于它们的内容是动态生成的，我不能只为它们 grep。

有没有办法在打印语句上放置一个钩子？（我使用 python 2.4，但我会对任何版本的结果感兴趣）。有没有另一种方法可以找到输出来自哪个“打印”语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:46:33.557

严格来说，您所依赖的代码库（如在库中）不应包含*任何* `print`语句。所以，你*真的应该把它们**全部*删除。

除此之外，您*可以进行*猴子补丁`stdout`：[将日期时间戳添加到 Python 打印](https://stackoverflow.com/questions/4883789/adding-a-datetime-stamp-to-python-print)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T15:30:27.420

对于 CPython2.5 或更早版本：

```
import sys
import inspect
import collections
_stdout = sys.stdout

Record = collections.namedtuple(
    'Record',
    'frame filename line_number function_name lines index')

class MyStream(object):
    def __init__(self, target):
        self.target = target
    def write(self, text):
        if text.strip():
            record = Record(*inspect.getouterframes(inspect.currentframe())[1])        
            self.target.write(
                '{f} {n}: '.format(f = record.filename, n = record.line_number))
        self.target.write(text)

sys.stdout = MyStream(sys.stdout)

def foo():
    print('Hi')

foo() 
```

产量

```
/home/unutbu/pybin/test.py 20: Hi 
```

* * *

对于 CPython2.6+，我们可以导入 print 函数

```
from __future__ import print_function 
```

然后按照我们的意愿重定向它：

```
from __future__ import print_function
import sys
import inspect
import collections

Record = collections.namedtuple(
    'Record',
    'frame filename line_number function_name lines index')

def myprint(text):
    if text.strip():
        record = Record(*inspect.getouterframes(inspect.currentframe())[1])        
        sys.stdout.write('{f} {n}: '.format(f = record.filename, n = record.line_number))
    sys.stdout.write(text + '\n')

def foo():
    print('Hi')

print = myprint
foo() 
```

* * *

请注意，`inspect.currentframe`使用`sys._getframe`which 不是 Python 的所有实现的一部分。所以上面的解决方案可能只适用于 CPython。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T14:44:54.053

完成这项工作的一个非常严重的黑客攻击：

使用您最喜欢的文本编辑器，使用您的搜索/查找功能。

找到所有的打印语句。

并手动输入一个数字或标识符。（或者如果你这样做是自动的，那么脚本）

执行此操作的脚本很简单，只需`print`使用正则表达式查找，然后将其替换为`print ID,`，然后一切都会相同，但您会得到数字。

干杯。

**编辑**

除非有任何奇怪的格式，否则下面的代码应该为您完成。

请注意，这只是您可以做到的方式的一个示例。不是真正的答案。

```
import re

class inc():
    def __init__(self):
        self.x = 0

    def get(self):
        self.x += 1
        return self.x

def replacer(filename_in, filename_out):
    i = inc()
    out = open(filename_out, 'w')
    with open(filename_in) as f:
        for line in f:
            out.write("%s\n" % re.sub(r'print', 'print %d,' % i.get(), line)) 
```

我使用了一个基本的增量器类，以防你想要某种更复杂的 ID，而不仅仅是一个计数器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T16:33:00.510

在恶劣的情况下（在一些奇怪的二进制库中完成输出），您也可以使用`strace -e write`（以及更多选项）。如果您不读取 strace 的输出，则 strace 程序会一直等到您读取，因此您可以向它发送一个信号并查看它在哪里死掉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T14:50:02.887

这是[Jeeeyul 为 Java 提出](http://jeeeyul.wordpress.com/2012/10/18/make-system-out-println-rocks/)的一个技巧：将输出流 (ie `sys.out`) 替换为在写入换行符时会注意到的内容。

如果此标志为真，则在写入下一个字节时抛出异常。在同一个地方捕获异常，沿着堆栈跟踪，直到找到不属于您的“调试流编写器”的代码。

伪代码：

```
class DebugPrintln:
    def __init__(self):
        self.wasLF = False

    def write(self, x):
        if self.wasLF:
            self.wasLF = False

            frames = traceback.extract_stack()
            ... find calling code and output it ...

        if x == '\n':
            self.wasLF = true

        super.write(x) 
```

# ios - 如何启动启动我的应用程序的应用程序

> ID：13515049
> 
> 赞同：0
> 
> 时间：2012-11-22T14:42:03.853
> 
> 标签：ios, launch, openurl, x-callback-url

我在我的应用程序中使用这个函数来处理来自其他应用程序的调用：

> (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication 注解:(id)注解

我需要了解在处理完请求后如何重新启动已启动我的应用程序的应用程序。

简而言之 - 一旦我在我的应用程序中处理完问题，我需要源应用程序处于前台。

这里的流程：

1.  用户单击第 3 方应用程序上的某个按钮（可以是任何应用程序，而不是特定应用程序）
2.  按钮使用

    > [[UIApplication sharedApplication] openURL:[NSURL URLWithString:sourceApplication]]

打开我的应用程序。

1.  我在我的应用程序中执行了一些操作。
2.  第 3 方的应用程序（源应用程序）重新打开。

有任何想法吗？

谢谢！

（顺便说一句 - 我认为 Facebook API 也会这样做，但不确定。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:51:02.183

Facebook 这样做是因为他们知道您的应用程序的网址，因为您必须添加 fb[APPID] 网址，其中 [APPID] 是您的 Facebook 应用程序 ID。

有一个处理你想要的规范的想法：http: [//x-callback-url.com](http://x-callback-url.com)但为了使用它，两个应用程序都必须支持它。

> 使用 x-callback-url 的源应用程序可以启动传递数据和上下文信息的其他应用程序，还可以提供参数指示目标应用程序在执行操作后将数据和控制权返回给源应用程序。

# asp.net - 捆绑：打开和关闭优化的脚本渲染之间的区别

> ID：13515051
> 
> 赞同：0
> 
> 时间：2012-11-22T14:42:11.263
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, webgrease

我正在使用 ASP.NET 4.5 MVC4，并且我已经设置了一个 css 和 javascript 文件的捆绑包，其中包含以前可以使用的定制包。

我自己制作了捆绑包，因为加载顺序很重要。

不知何故，它停止了工作。我最近更新了最新的 WebGrease (1.3.0)。这会是个问题吗？

奇怪的是，当我设置`BundleTable.EnableOptimizations`为 false 时它会起作用。但是当我将它设置为 true 时，我得到了 js 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:36:08.643

你得到了哪些 js 错误？`EnableOptimization`与to属性的主要区别`on`（参见此[页](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)）是它连接所有脚本并缩小它们。

# mysql - CakePHP Group By 字段每组只返回一个结果

> ID：13515053
> 
> 赞同：2
> 
> 时间：2012-11-22T14:42:19.970
> 
> 标签：mysql, cakephp, group-by, find

我有一张表如下：

```
id | date       | customer_id | env_id | jobs
1  | 2012-11-20 | 200         | 100    | 10
2  | 2012-11-20 | 200         | 101    | 15
3  | 2012-11-20 | 200         | 102    | 12
4  | 2012-11-21 | 200         | 100    | 10
5  | 2012-11-21 | 200         | 101    | 12
6  | 2012-11-21 | 200         | 102    | 20 
```

我所追求的是按日期分组的结果。

```
$usage = $this->Environment->DailyCount->find('all',
array(
'conditions' =>array('DailyCount.customer_id' => $user['customer_id']),
'group' => array('DailyCount.date'),
'recursive'=>-1)); 
```

但它只返回一排我想要所有三个！

结果：

```
Array
(
    [0] => Array
        (
            [DailyCount] => Array
                (
                    [id] => 1
                    [date] => 2012-11-20
                    [customer_id] => 200
                    [env_id] => 100
                    [jobs] => 10
                )
       )

    [1] => Array
        (
            [DailyCount] => Array
                (
                    [id] => 4
                    [date] => 2012-11-21
                    [customer_id] => 200
                    [env_id] => 100
                    [jobs] => 10
                )

        )
) 
```

我的结果中每个日期的所有三行之后 - 我需要所有三个 env_id 工作计数。

任何人都可以帮助如何在 CakePHP 中做到这一点，甚至如何在 MySQL 中获得这样的结果，我可以找出蛋糕的方法！

------------ 黑客解决方案 ------------

我无法回答我自己的问题，所以编辑问题

好的，这不是完美的解决方案，但对我有用，而且是一个快速的解决方案：

```
$dailyCount = $this->Environment->DailyCount->find('all',
array(
'conditions' => array('DailyCount.customer_id' => $user['customer_id']),
'order' => array('DailyCount.date DESC'),
'limit' => $limit,
'recursive'=>-1));

$usage = array();
foreach($dailyCount as $dc){
    $usage[$dc['DailyCount']['date']][] = $dc;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:04:19.790

您可以使用 MySQL 的[GROUP_CONCAT()](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)。如果您要分组，那可能是您最好的选择。

# c++ - 为什么这个 const 说明符有未指定的行为？

> ID：13515054
> 
> 赞同：2
> 
> 时间：2012-11-22T14:42:19.713
> 
> 标签：c++, clang, compiler-warnings, unspecified-behavior

我维护了一个开源程序，我的一个用户报告说它不会在`clang`我以前从未使用过的 . 我得到的错误之一是***Warning: qualifier on function type 'junky_t' (aka 'void (const int &, const int &)') has unspecified behavior.***。我创建了一个演示该问题的小程序：

```
typedef void junky_t(const int &foo,const int &bar);

class demo {
public:;
    const junky_t *junk;
}; 
```

这是我尝试编译时发生的情况：

```
$clang -DHAVE_CONFIG_H  -g -g -O3 -Wall -MD -Wpointer-arith -Wshadow -Wwrite-strings -Wcast-align -Wredundant-decls -Wdisabled-optimization -Wfloat-equal -Wmultichar -Wmissing-noreturn -Woverloaded-virtual -Wsign-promo -funit-at-a-time -Weffc++  -D_FORTIFY_SOURCE=2  -MT demo.o -MD -MP -c -o demo.o demo.cpp

demo.cpp:5:5: warning: qualifier on function type 'junky_t' (aka 'void (const int &, const int &)') has unspecified behavior
    const junky_t *junk;
    ^~~~~~~~~~~~~
1 warning generated. 
```

也就是说，类`demo`有一个函数指针，指向一个函数，该函数的签名采用许多 const 引用。`const`类中的`demo`应该防止`junk`被更改。但是显然它是模棱两可的，因为可能会考虑函数本身`const`，但事实并非如此。我用`gcc`or编译它没有问题，`llvm`但它不会`clang`在 Mac 上编译。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:15:59.363

这不是*未指明的行为*。clang的警告是错误的。您的代码是合法的 c++。标准 (C++11) 规定，函数类型之上的 cv 限定符被忽略。

因此，将 const 限定符放在函数类型之上没有任何意义。如果你希望你的指针是 const 然后写

`junky_t * const junk;`

否则就写

`junky_t * junk;`

# signalr - 通过 Web 代理使用 SignalR 客户端

> ID：13515058
> 
> 赞同：11
> 
> 时间：2012-11-22T14:42:30.733
> 
> 标签：signalr, signalr.client

我正在使用 SignalR .NET 客户端库创建控制台应用程序/win 服务，以在 Web 上使用 HTTPS 连接到信号 R 集线器。其中一些客户端可能需要 Web 代理才能访问 Internet。在哪里/如何为 SignalR 客户端设置 Web 代理？

这到底怎么不是一个真正的问题？当客户端位于防火墙/TMG 代理服务器后面时，我无法让 signalR 连接到 Web 服务器集线器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-31T09:04:26.997

为此使用*Connection.Proxy*属性 - [https://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.client.connection.proxy(v=vs.111).aspx](https://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.client.connection.proxy(v=vs.111).aspx)

例子：

```
var hubConnection = new HubConnection(url);
var webProxy = new WebProxy(new Uri(“address”));
webProxy.Credentials = new NetworkCredential(“Username”, “Password”);
hubConnection.Proxy = webProxy; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-02T21:01:41.720

尝试这个：

```
var webProxy = new WebProxy(new Uri(proxyUrl));

var connection = new HubConnectionBuilder().WithUrl("signalR hub endpoint", h => h.Proxy = webProxy).Build(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T08:47:17.660

In fact we implemented signalr to have a kind of real time progress about some document generation.

Some of our customers couldn't create documents any more because the connection disconnected.

"Maybe" because of some proxy server who not really blocked but hold the request for a while to scan it, so that signalr client got a timeout

# sql - 如何正确设置我的查询？

> ID：13515063
> 
> 赞同：0
> 
> 时间：2012-11-22T14:42:54.533
> 
> 标签：sql

嘿伙计们，我在进行查询时遇到问题。我有这些表：

```
lm_Artikel:
Index, Artikelbezeichnung, Status, Bestand, 
Lieferant, Datum-Einlagerung, Lagerort, Typ 

lm_Schwellwert:
Typ, Schwellwert 
```

`Typ`价值是关键。`lm_Artikel`里面有多个相同的artikel `Typ`。对于每个`Typ`我都有一个`Schwellwert`in `lm_Schwellwert`。现在我想选择`Bestand`低于的文章的索引`Schwellwert`。

这是我到目前为止所拥有的：

```
SELECT `Index` 
  FROM lm_Artikel 
 WHERE Bestand < (SELECT Schwellwert FROM lm_Schwellwert) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:45:28.993

看来你想要这个：

```
SELECT A.`Index`
FROM lm_Artikel A
INNER JOIN lm_Schwellwert S
    ON A.Typ = S.Typ
WHERE A.Bestand < S.Schwellwert 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:16:37.620

希望我理解正确...

1.  计算所有`Artikel`相同`Typ`的数量`lm_Artikel`
2.  检查总和`'Bestand'`是否`Typ`小于`Schwellwert`
3.  `Index`从`lm_Artikel`确定的中选择所有`Typ`

你可以试试这个：

```
SELECT `Index` 
FROM lm_Artikel m
JOIN
(
  SELECT s.`Typ` 
  FROM lm_Schwellwert s
  JOIN
  (
      SELECT `Typ`, SUM(`Bestand`) AS sumbestand
      FROM lm_Artikel
      GROUP BY `Typ`  
  ) t   
  ON s.`Typ`=t.`Typ`
  WHERE t.sumbestand<s.`Schwellwert`
)y
ON m.`Typ`=y.`Typ` 
```

内部`JOIN`确定哪个类型`'Bestand'`小于它对应的“Schwellwert”。

换行`JOIN`用于重新确定表`Index`中的 s `lm_Artikel`。

# ruby-on-rails - 带有复选框 HASBTM 的嵌套导轨形式

> ID：13515066
> 
> 赞同：0
> 
> 时间：2012-11-22T14:42:55.147
> 
> 标签：ruby-on-rails, checkbox, nested-forms, simple-form

我有部分表单，允许用户输入将包含在出站电子邮件中的主题和消息。我想允许用户从与电子邮件所属的发票关联的联系人中选择电子邮件的收件人。通过嵌套表单选择的电子邮件收件人将存储在单独的表中。

```
class EmailRecipient < ActiveRecord::Base
  attr_accessible :contact_id, :email_id

  belongs_to :email

end

class Email < ActiveRecord::Base
  attr_accessible :subject, :message, :invoice_id, :email_recipients_attributes

  belongs_to :invoice
  has_many :email_recipients

  accepts_nested_attributes_for :email_recipients

end

<%= simple_form_for [:invoice, @email], html: {class: "form-horizontal"} do |f| %>
  <%= f.error_notification %>

  <% @invoice.contacts do |c|%>
    <%= f.fields_for :email_recipients do |builder| %>
      <%= builder.input :contact_id, :as => :check_boxes %>
      <%= c.name %><br/>    
    <% end %>
  <% end %>

  <%= f.input :subject, :as => "string" %>
  <%= f.input :message, :input_html => { :class => 'span7', :rows => 10 } %>

  <div class="form-actions">
    <%= f.button :submit, "Send Invoice", :class => 'btn-warning' %>
    <%= link_to 'Cancel', invoice_path(@invoice), :class => 'btn' %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:31:11.900

这不是最漂亮的答案，所以我很想看到一个更好的解决方案，但它可以完成工作，直到我的技能提高。

在我添加的父表单的控制器中：

```
@invoice.contacts.each { |c| @email.email_recipients.build(contact_id: c.id) } 
```

无论是否需要，这都会为所有联系人建立记录。然后在部分表单中我修改了嵌套表单：

```
<%= simple_form_for [:invoice, @email], html: {class: "form-horizontal"} do |f| %>
  <%= f.error_notification %>
  <% count = 0 %>
  <%= f.simple_fields_for :email_recipients do |email_recipients_form| %>
    <%= email_recipients_form.input :_destroy, as: :boolean, :label => false do %>
      <%= email_recipients_form.check_box :_destroy, {}, "false", "true" %>
      <% contact = @invoice.contacts.find(@email.email_recipients[count].contact_id) %>
      <%= contact.name + " (" + contact.email + ")" %>
    <% end %>
  <%= email_recipients_form.input :contact_id, as: :hidden %>
  <% count += 1 %>
<% end %> 
```

# c++ - 从强制退出的 C 库函数生成异常

> ID：13515069
> 
> 赞同：0
> 
> 时间：2012-11-22T14:43:05.597
> 
> 标签：c++, exception, exit

我正在尝试使用 C++ 包装 C 库函数。该函数尝试初始化设备。出错时，它会强制程序的执行终止（可能带有`exit(1)`）。我想在错误时抛出异常。有没有办法在不编辑 C 源代码的情况下做到这一点？

我可以以某种方式禁止被调用函数终止程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:46:27.920

安装`atexit`处理程序，从处理程序抛出异常。啊。

PS。因此，正如人们指出的那样，C++异常不起作用，那么我们使用C“异常”：

```
#include <cstdlib>
#include <iostream>
#include <csetjmp>

jmp_buf buf;
void foo ()
{
        longjmp (buf, 1);
}

void bar () { exit(-1); }

int
main ()
{
        atexit (foo);

        if (setjmp (buf))
        {
                bar ();
        }
        else
        {
                std::cout << "graceful" << std::endl;
        }

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:54:24.353

If you are on Unix/Linux, you can check with `strace` what exactly your library calls, then you can override called function using `LD_PRELOAD`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:01:15.473

不是一个非常好的解决方案，但应该可以工作：派生一个新进程并在子进程中调用该 C 函数。在父进程中，等待子进程完成，检查错误码，如果是1，表示`exit(1)`被调用，抛出异常。

# php - dompdf - 图像输出

> ID：13515079
> 
> 赞同：0
> 
> 时间：2012-11-22T14:43:30.217
> 
> 标签：php, pdf, pdf-generation, dompdf

我正在使用该`dompdf`库从 HTML 创建 PDF。

我在渲染图像时遇到问题，因为它们似乎显示为红十字。

```
$dompdf = new DOMPDF();

$html = '<div><img src="http://www.domain.com/uploads/images/image1.jpg" /><div>';

$dompdf->load_html($html);
$dompdf->set_paper("A4");
$dompdf->render();
$output = $dompdf->output();
$filename = date('dmYHis') . '-lowres.pdf';

file_put_contents('/uploads/pdfs/low-res/' . $filename, $output); 
```

这会创建 PDF，但似乎找不到图像。

我试过只是`<img src="/uploads/images/imag1.jpg" />`，但这也会将图像呈现为红十字。

我正在使用 0.6.0beta3 版本的 DomPDF

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:53:19.050

好的，所以看起来像完整 URL 这样的路径不起作用。

`<img src="/uploads/images..."`/>`也没有

我改变了`<img src="uploads/images..." />`似乎可行的路径

# rest - Orchard CMS 适合这个吗？以及如何进行？

> ID：13515081
> 
> 赞同：0
> 
> 时间：2012-11-22T14:43:33.603
> 
> 标签：rest, orchardcms

埃洛！

目标是建立一个网上商店，其中所有产品类别和产品（以及用户身份验证、订单放置、订单历史等）都来自 REST web 服务。

所以基本上很少的数据将存储在 CMS 数据库中。

我设法扩展了登录部分（查看“Windows 身份验证模块”），但我不确定如何继续其他部分？

这里的答案是一条路吗？然而，答案似乎声称我们需要每个产品的记录？ [如何更改果园记录库](https://stackoverflow.com/questions/4727843/how-to-change-orchard-record-repository)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:50:46.177

首先，这是您可能需要考虑的事情。你真的想用请求淹没其余的服务吗？从您提出这个问题的方式来看（将存储很少的数据），似乎每次有人浏览页面时，您都会创建一个 REST 请求。这通常不是一个好主意，所以一定要包括一些缓存。

然后，我怀疑它是您想要的网上商店的 Windows 身份验证。确保检查表单身份验证。

然后，我想果园是你可以考虑的这个项目。常规网店通常有很多开销，因此最好在常规 CMS 中创建一个网店（具有此特定要求），并且 orchard 非常可扩展。

市长的一件事是，付款。确保您有一个适用于果园的良好支付处理器（或者您可以使其工作）。

# c# - finally 块仅在调试模式下执行

> ID：13515082
> 
> 赞同：0
> 
> 时间：2012-11-22T14:43:36.597
> 
> 标签：c#, visual-studio-2010, try-catch

问题来自这里：[SO - Timeout in c# tests](https://stackoverflow.com/questions/13514672/timeout-in-c-sharp-tests)

我创建了一个简单的单元测试，如下所示：

```
[Timeout(1000)][TestMethod]
public void TestMethod1()
{
    try
    {
        System.Threading.Thread.Sleep(2000);
    }
    finally
    {
        Console.WriteLine("Executed");
    }
} 
```

当我运行测试时，finally 块没有被执行。但是当我调试它时，它确实如此。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:46:16.107

您将测试超时指定为**1000**毫秒，而您的方法休眠**2000**毫秒。这会导致您的测试方法被测试框架过早地强制关闭，因此它不会离开`Sleep`调用并且没有时间到达`finally`阻塞。调试可能会禁用 timeout 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:53:58.833

Timeout 属性根本不适用于调试会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:59:21.770

调试期间禁用超时，因此您可以看到 Console.WriteLine() 输出。

但我仍然认为 finally 是在 vs2010 中执行的。如果您尝试显示消息框 System.Windows.Forms.MessageBox.Show("finally") 您应该能够看到它弹出。

在 vs2010 中超时后，Console.WriteLine 输出丢失。

# php - 如何在 PHP 中创建用户组？

> ID：13515083
> 
> 赞同：0
> 
> 时间：2012-11-22T14:43:35.917
> 
> 标签：php, mysql, admin, usergroups

我正在使用 PHP 和 MySQL 构建整个系统。

我想创建用户组。

例如，我希望*ADMIN1*能够**ADD USER**和**REMOVE USER**

但

我希望*ADMIN2*只能**添加**用户

执行此操作的标准方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:50:41.440

您可以使用 drupal 中使用的系统（“table_name”）：

“用户” [uid，名称]

"users_roles" [uid, 摆脱]

“角色” [摆脱，名称]

“权限” [pid，摆脱，名称]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:46:31.897

我为此创建角色，例如 ADMIN1、ADMIN2 或任何最适合的描述性名称。然后为每个用户分配一个角色，对于访问受限的页面或功能，我检查登录的用户是否是所需角色的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:47:06.830

mysql中没有*用户组。*您需要使用授权语法：[https ://dev.mysql.com/doc/refman/5.5/en/grant.html](https://dev.mysql.com/doc/refman/5.5/en/grant.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T14:50:27.510

你在寻找这样的东西吗？

```
Create user ‘admin1’ identified by ‘YOUR_PASSWORD’;
Revoke all on * from ‘admin1’;
Grant insert, delete, update, select on YOUR_TABLE to ‘admin1’;

Create user ‘admin2’ identified by ‘YOUR_PASSWORD’;
Revoke all on * from ‘admin2’;
Grant insert on YOUR_TABLE to ‘admin2’; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T14:52:14.477

您可以使用简单的登录系统并使用会话来允许访问某些页面，例如

```
session_start();
if (!(isset($_SESSION['login']) && $_SESSION['login'] != '')) {
header ("Location: login.php");
} 
```

这个例子只是阻止用户在没有先登录的情况下访问任何其他页面。登录页面会改变会话，如下所示：

```
 if (!empty ($username) && !empty ($password)){
        $sql = mysql_query ("SELECT * FROM users WHERE username='".$username."' AND password ='".$password."' LIMIT 1");
        if (mysql_num_rows ($sql) > 0){
            $_SESSION['login']=1;
            $_SESSION['username']=$username;
            header ("Location: index.php");
        } 
```

这只是一个基本示例，但希望您能看到使用用户表和会话可以完成的工作:)

# inheritance - Ninject Binding“全部继承自 x”

> ID：13515088
> 
> 赞同：0
> 
> 时间：2012-11-22T14:43:58.040
> 
> 标签：inheritance, binding, ninject, contextual-binding

很常见的场景：

```
public class A { }
public class B:A {}
public class C:A {} 
```

我真的想知道是否可以创建解决所有从 A 继承的 Ninject 绑定，如下所示：

```
Bind<A>().ToMethod(ctx => proxyFactory.CreateProxy(ctx.Request.Service) as A); 
```

这当然只适用于类型 A 的请求。对 B 和 C 的请求以默认方式处理。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:13:36.463

如果可以添加[ninject.extensions.conventions](https://github.com/ninject/ninject.extensions.conventions)，您可以像这样动态绑定它们：

```
kernel.Bind(x => x
    .FromThisAssembly()
    .SelectAllClasses()
    .InheritedFrom<A>()
    .BindBase()
    .Configure(c => c.InTransientScope())); 
```

# mysql - MYSQL 查询/子查询合并

> ID：13515091
> 
> 赞同：0
> 
> 时间：2012-11-22T14:44:14.020
> 
> 标签：mysql, sql

我在下面有两个查询，我确定可以合并为一个，但我不确定如何。

我想获取每个用户的 first_name 和 email 列，但我还想从第一条广告记录中获取关联的 pet_type 和 pet_breed（如果他们有的话）。广告记录仅包含一个breed_id，然后将其链接到pet_breeds 表以获取pet_type 和pet_breed。我不需要在结果中返回breed_id，只需要pet_type 和pet_breed。如果用户不存在关联的广告记录，那么我希望 pet_breed 和 pet_type 返回文本“无”。

```
SELECT users.first_name, users.email,
      (SELECT adverts.breed_id AS breed 
      FROM adverts 
      WHERE adverts.user_id = users.user_id 
      LIMIT 1)
FROM users 
```

第二次查询

```
SELECT pet_type, pet_breed
FROM pet_breeds
WHERE breed_id = breed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:50:39.597

使用`LEFT JOIN`and `COALESCE`(*来显示`NONE`而不是`NULL`*)

```
SELECT  a.first_name, a.email,
        COALESCE(c.pet_type, 'NONE') pet_type,
        COALESCE(c.pet_breed, 'NONE') pet_breed
FROM    users a
        LEFT JOIN adverts b
            ON a.user_ID = b.user_ID
        LEFT JOIN pet_breeds c
            ON b.breed_ID = c.breed_ID 
```

**更新 1**

```
SELECT  a.first_name, a.email,
        COALESCE(c.pet_type, 'NONE') pet_type,
        COALESCE(c.pet_breed, 'NONE') pet_breed
FROM    users a
        LEFT JOIN 
        (
            SELECT user_ID, max(breed_ID) breed_ID
            FROM adverts
            GROUP BY user_ID
        ) b ON a.user_ID = b.user_ID
        LEFT JOIN pet_breeds c
            ON b.breed_ID = c.breed_ID 
```

# php - 在 PHP 中获取数组元素

> ID：13515092
> 
> 赞同：0
> 
> 时间：2012-11-22T14:44:19.030
> 
> 标签：php, arrays

我有以下代码：

```
<?php
if ( isset($_POST['submit']) )
{
    // print_r($_POST['row']); // Works perfectly
    echo $_POST['row[1][2]'];
}
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<?php 
$num_of_days_in_month=3;
for($i = 1; $i<= $num_of_days_in_month; $i ++) {
for($j = 1; $j <= 4; $j++) {
echo "<input type=\"text\" name=\"row[$i][$j]\" />";
if ($j ==4) {
    echo "<br>";
}
}
}
?>
<input type="submit" name="submit" />
</form> 
```

我正在尝试回显第 1 行第 2 列并且输出为空白。

有谁知道为什么？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:46:18.953

试试这个

`echo $_POST['row'][1][2];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:46:16.003

你的索引是错误的，试试这个

```
<?php
if ( isset($_POST['submit']) )
{
    echo $_POST['row'][1];
    echo $_POST['row'][2];
}
?> 
```

或者

```
<?php
if ( isset($_POST['submit']) )
{
    echo $_POST['row'][1][2];
}
?> 
```

# playframework-2.0 - 使用 Guice 插件播放 2.0.4 Java - 应用程序启动时出错

> ID：13515093
> 
> 赞同：0
> 
> 时间：2012-11-22T14:44:19.357
> 
> 标签：playframework-2.0, guice

我们在文档中设置了 guice，它似乎工作正常，但我们在应用程序日志中收到以下错误：

> [警告] 应用程序 - 也许 inject.modules 配置参数未设置正确？java.lang.ClassNotFoundException：在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:366) 在 java.security.AccessController.doPrivileged( Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at com .typesafe.plugin.inject.InjectPlugin.createModules(InjectPlugin.java:88) at com.typesafe.plugin.inject.InjectPlugin.availableModules(InjectPlugin.java:29) at com.typesafe.plugin.inject.GuicePlugin.onStart(GuicePlugin .java:33) 在 play.api.Play$$anonfun$start$1.apply(Play.scala:60) 在 play.api。

有什么可以忽略的吗？如果在 application.conf 中没有为 inject.modules 指定任何内容，则 inject.modules 似乎是默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:52:26.347

您必须提供一个调用`module.Dependencies`来进行绑定的类，例如：

```
package module;

import com.google.inject.*;
import service.*;

public class Dependencies implements Module {

 public void configure(Binder binder) {
     binder.bind(Service.class).to(SomethingService.class);
  }  
} 
```

看看[这里](https://github.com/typesafehub/play-plugins/blob/master/guice/sample/app/module/Dependencies.java)。

# visual-studio-2012 - Sourcegear Vault 正在减慢 Visual Studio 2012

> ID：13515095
> 
> 赞同：1
> 
> 时间：2012-11-22T14:44:31.380
> 
> 标签：visual-studio-2012, sourcegear-vault

我发现 Source Gear Vault Standard 让 Visual Studio 慢得难以忍受。
每次我签出一个文件，甚至保存一个签出的文件时，我都会等待长达 10 秒的时间来保存文件。
如果我将保管库更改为在离线模式下工作，问题就会立即消失。

这是我正在运行的软件

*   视窗 7 专业版 x64
*   视觉工作室 2012
*   Sourcegear Vault 标准版 6.0.1.598（客户端和服务器）

我已尝试重新安装 Vault 客户端，但这并没有什么不同。
有没有其他人经历过这个，或者有什么建议？

目前我正在离线模式下工作，并且在我的会话结束时回到在线模式以检查所有内容。

我也在运行 Visual Studio 2010。
这是使用相同版本的 Vault 并且没有相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:03:52.423

新发布的版本 6.1.0.531 解决了这个问题。

# javascript - OpenLayers 弹出窗口上的 Jquery UI 按钮 - 选择只触发一次

> ID：13515096
> 
> 赞同：1
> 
> 时间：2012-11-22T14:44:43.257
> 
> 标签：javascript, jquery, jquery-ui, openlayers

我有一个在我的网络应用程序中生成的 html openlayers 弹出窗口，其中包含一个带有菜单的 JQuery 按钮。菜单显示正常，但`select`菜单事件仅第一次触发，此后不再响应。任何想法为什么？

这是Javascript

```
$("#popup_actions")
    .button({
        text: false,
        icons: {
            primary: "ui-icon-gear",
            secondary: "ui-icon-triangle-1-s"
        }
    })
    .click(function () {
        console.log(this);
        var menu = $(this).parent().next().show().position({
            my: "left top",
            at: "left bottom",
            of: this
        });
        // "chicken" (ahem) is the name of the containing div, for some reason using $(document) didn't work
        $("#chicken").one("click", function () {
            menu.hide();
        });
        return false;
    })
    .parent()
        .buttonset()
        .next()
            .hide()
            .menu({select: function(e) {
                console.log("The menu was selected", event);
            }}); 
```

和 HTML：

```
<div style="width:60px;float:left">
    <div>
        <button id="popup_actions">Actions</button>
    </div>
    <ul style="width:200px">
        <li><a href="#"><span class="ui-icon ui-icon-star"></span>Find in rack</a></li>
        <li><a href="#"><span class="ui-icon ui-icon-star"></span>Find in tree</a></li>
        <li><a href="#"><span class="ui-icon ui-icon-star"></span>Change Activity Report</a></li>
        <li><a href="#"><span class="ui-icon ui-icon-star"></span>Link State Change History Report</a></li>
    </ul>
</div> 
```

编辑：

我设法把它变成了一个显示行为不起作用的jsfiddle。这绝对是 OpenLayers 的问题。[http://jsfiddle.net/mattwoberts/JRmKN/13/](http://jsfiddle.net/mattwoberts/JRmKN/13/) - 向地图添加一个多边形，然后进入弹出模式并打开弹出窗口以查看菜单 - 选择事件只会触发一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:03:15.040

我不确定我是否理解问题，但如果只是选择，则存在拼写错误，您应该更改行

```
console.log("The menu was selected", event); 
```

至

```
console.log("The menu was selected", e); 
```

因为变量被命名为 e 而不是事件。

# javascript - 避免在列表中填充

> ID：13515103
> 
> 赞同：3
> 
> 时间：2012-11-22T14:45:00.480
> 
> 标签：javascript, html, css

如果打开的页面有任何子项，我正在开发一个扩展菜单。它看起来像这样：

[http://jsfiddle.net/phacer/qzykv/](http://jsfiddle.net/phacer/qzykv/)

只是在浅灰色的内部菜单下面有一些来自其 <li> 父级的填充。我正在考虑使用行高，但在某些地方，菜单项是两行文本。而且我还需要在每个项目之间使用虚线边框。

关于如何获得我现在拥有的东西但没有为有孩子的父母提供的任何建议？

html:

```
<nav>
<ul class="menu"><li class="first"><a href="#" title="" >Home</a></li>
<li class="active"><a href="#" title="" >Home</a><ul><li class="first"><a href="#" title="" >Home</a></li>
<li><a href="#" title="" >Home</a></li>
<li class="last"><a href="#" title="" >Home</a></li>
</ul></li>
<li><a href="#" title="" >Home</a></li>
<li><a href="#" title="" >HomeHome HomeHome Home HomeHome </a></li>
<li><a href="#" title="" >Home</a></li>
<li><a href="#" title="" >Home</a></li>
<li><a href="#" title="" >Home</a></li>
<li class="last"><a href="#" title="Contact" >Contact</a></li>
</ul>
</nav>​ 
```

CSS：

```
nav { width: 165px; min-height: 500px; position: relative; display: inline-block; float: left; }
nav ul li { padding: 10px 0 10px 20px; }
nav ul li a { margin-right: 10px; max-width: 125px; }
nav ul li.first { padding-top: 23px; }
nav ul li ul { margin-left: -20px; margin-top: 10px; }
nav ul li ul li { padding-left: 30px; }
nav ul li ul li.first { padding-top: 10px; }
nav ul li ul li ul { margin-left: -30px; margin-top: 10px; }
nav ul li ul li ul li{ padding-left: 40px; }
nav ul li ul li ul li.first { padding-top: 10px; }

nav ul li.active ul li a,
nav ul li.active ul li a:visited,
nav ul li.active ul li.active ul li a,
nav ul li.active ul li.active ul li a:visited       { color: #5c5c5c; }
nav a:hover,
nav ul li.active a                                  { color: #e0001b; }
nav ul li.active ul li.active a,
nav ul li.active ul li.active ul li.active a,
nav ul li.active ul li a:hover,
nav ul li.active ul li.active a:hover  { color: #91298e; }

nav                 { background: #5c5c5c repeat-x left top; }
nav ul li           { border-bottom: 1px dotted #fff; }
nav ul li ul        { background: #d6d6d7; }
nav ul li ul li     { border-bottom: none; border-top: 1px dotted #555; }
nav ul li ul li ul  { background: #ecedee; }

nav { font-size: 12px; list-style-type: none; line-height: 14.5px; text-align: left; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:13:16.293

您需要添加`nav ul li.active{padding:10px 0 0 10px;}`到您的 css 以删除活动的底部`li`填充`ul`

见[http://jsfiddle.net/qzykv/5/](http://jsfiddle.net/qzykv/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:02:47.957

您必须在 CSS 中添加以下行。它将删除有孩子的父母李的填充。

```
nav ul li.active{padding:0px;} 
```

# java - MyEclipse + Maven + ActiveJDBC 如何自动运行检测

> ID：13515107
> 
> 赞同：1
> 
> 时间：2012-11-22T14:45:14.423
> 
> 标签：java, database, maven, myeclipse, activejdbc

我正在为我的项目使用 MyEclipse + Maven 和 ActiveJDBC。

我正在从 MyExclipse 内部以爆炸模式将我的项目部署到 tomcat 服务器，这样我就可以在开发期间从热部署中获利。但是每次我更改数据库类时，我都必须手动检测它们。有没有办法自动检测类？我的 pom 中已经有仪器插件，但它被忽略了。

如果不是，我正在考虑迁移到不同的数据库框架。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:05:21.203

我不熟悉 ActiveJDBC 或 maven 的高级使用，但 MyEclipse 在正常构建或部署期间实际上不会运行 maven 构建。如果您可以让 maven 为您进行部署，那么您可以从上下文 Run As 菜单运行 maven 构建来完成这项工作。或者，您可以从 Builders 页面添加构建器（右键单击项目，选择属性并转到构建器页面），以运行 ant 构建或外部程序（例如，在外部运行 maven，在工作区中对项目进行操作)，每次在 MyEclipse 中完成构建（手动或自动）。

抱歉，这不是一个明确的解决方案，但希望它可以为您提供一些解决问题的想法。

请注意，您可能会在 Builders 页面上看到一个 maven 项目构建器，但它不会运行 maven；它只是做一些与 Maven 项目相关的内务处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:10:26.237

这个页面有一个简单的检测 Ant 脚本的例子。您可以调整路径并将此脚本连接到 Eclipse 中的菜单操作或按钮：[http ://code.google.com/p/activejdbc/wiki/Instrumentation#Bare_bones_Ant_script](http://code.google.com/p/activejdbc/wiki/Instrumentation#Bare_bones_Ant_script)

另外，查看这个线程，它有一个指向已配置 Eclipse 项目的链接。 [https://groups.google.com/forum/?fromgroups=#!searchin/activejdbc-group/eclipse/activejdbc-group/eaI1GNJAkVc/cTYxIlT1dLAJ](https://groups.google.com/forum/?fromgroups=#!searchin/activejdbc-group/eclipse/activejdbc-group/eaI1GNJAkVc/cTYxIlT1dLAJ)

# flash - 如何在 Flash Builder 项目中设置发布的 SWF 名称

> ID：13515112
> 
> 赞同：0
> 
> 时间：2012-11-22T14:45:30.070
> 
> 标签：flash, apache-flex, actionscript, flash-builder

多年来，我一直在 FlashDevelop 中愉快地工作，最近购买了一台 Macbook。我决定在使用我的 Macbook 时使用 Flash Builder 会更好。除了已发布的 SWF 名称，我已经完成了所有设置。这似乎迫使我使用应用程序类的名称。在我的示例中，此名称是“Main.as”。我希望将发布的 SWF 命名为“activityShell.swf”，原因有几个我不会在这里讨论。

请告诉我在构建和调试期间如何让发布的 swf 被称为 activityShell.swf 而不是 Main.swf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:57:02.200

> 请告诉我在构建和调试期间如何让发布的 swf 被称为 activityShell.swf 而不是 Main.swf？

您可以更改主应用程序文件的名称（AKA 将 Name.as 重命名为 activityShell.swf）。这可能会发出警告，因为 activityShell 不遵循类名的标准命名约定。类的第一个字母通常是大写字母。

或者您可以在事后更改生成的 SWF 的名称。

或者，您可以使用输出[命令行参数](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html)来指定完成的 SWF 的文件名和位置。

# android - Android：SQLite 查询在结果上显示同一行两次

> ID：13515113
> 
> 赞同：0
> 
> 时间：2012-11-22T14:45:37.953
> 
> 标签：android, sqlite

我有一个`ListView`由 SQLite 数据库中的查询填充的，但问题是结果通常会显示同一行两次。谁能告诉我我可能哪里出错了？

无论如何，这是我的片段：

**在 ListActivity 上**

```
idList = FavoriteProvider.getInstance().getFavoritesByTopicAndMinRating(minRating); 
```

**在最喜欢的提供者上**

```
public List<Long> getFavoritesByTopicAndMinRating(float rating) {
        List<Long> favIdsFromDB = null;

        Log.d(TAG, "loading new current favorites");
        this.currentFavoriteList.clear();

        try {

            favIdsFromDB = Loudmouth.getInstance().getDbHelper()
                    .getIdsFromSelectedTopicsWithMinRatingFav(rating);

            if (favIdsFromDB != null) {
                this.currentFavoriteList.addAll(favIdsFromDB);
            }
            // all loaded again
            setCurrentFavoriteListStateDirty(false);

        } catch (Exception e) {
            Log.e(TAG, "Error loading current favorites");
        }
        return currentFavoriteList;
    } 
```

**在 DatabaseHelper 上**

```
public ArrayList<Long> getIdsFromSelectedTopicsWithMinRatingFav(Float rating) {

        ArrayList<TopicFilterData> topics = getCheckedTopicListFav();

        String topicsAsString = topics.get(0).getTopicName() + "'";
        for (int i = 1; i < topics.size(); i++) {
            topicsAsString = topicsAsString + " OR " + KEY_FAV_CAT + " LIKE '" + topics.get(i) + "'";
        }
        String where = "(" + KEY_FAV_RATING + ">=" + rating + ") AND (" + KEY_FAV_CAT + " LIKE '" + topicsAsString + ")";
        String[] columns = { KEY_FAV_ID };
        Cursor query = db.query(DB_TABLE_FAVORITES, columns, where, null, null, null, KEY_FAV_RATING + " DESC", null);

        ArrayList<Long> resultList = new ArrayList<Long>();
        long id;

        if (query.moveToFirst() == true) {
            for (int i = 0; i < query.getCount(); i++) {
                id = query.getLong(COLUMN_FAV_ID);
                resultList.add(id);
                query.moveToNext();
            }
        }
        query.close();
        return resultList;
    }

private ArrayList<TopicFilterData> getCheckedTopicListFav() {
        Cursor cExisting = db.rawQuery("SELECT * FROM " + DB_TABLE_TOPICSFAV + " ORDER BY " + KEY_TF_NAME + " ASC", null);
        int existingTable = cExisting.getCount();
        cExisting.close();

        Cursor cNew = db.rawQuery("SELECT DISTINCT " + KEY_FAV_CAT + " FROM " + DB_TABLE_FAVORITES + " ORDER BY " + KEY_FAV_CAT + " ASC", null);
        int newTable = cNew.getCount();
        cNew.close();

        if (existingTable != newTable) {
            return getNewTopiclistFav();
        } else {
            return getCheckedTopicListFromDBFav();
        }
    }

private ArrayList<TopicFilterData> getCheckedTopicListFromDBFav() {
        ArrayList<TopicFilterData> resultList = new ArrayList<TopicFilterData>();
        Cursor c = db.rawQuery("SELECT " + KEY_TF_NAME + " FROM " + DB_TABLE_TOPICSFAV + " WHERE " + KEY_TF_SHOW + " = " + 1 + " ORDER BY "
                + KEY_TF_NAME + " ASC", null);

        TopicFilterData tFilterData;
        String topic;

        if (c.moveToFirst() == true) {
            for (int i = 0; i < c.getCount(); i++) {
                topic = c.getString((int) c.getLong(c.getColumnIndexOrThrow(KEY_TF_NAME)));

                // create item and add it to list
                tFilterData = new TopicFilterData(topic, true);

                resultList.add(tFilterData);
                c.moveToNext();
            }
        }
        c.close();
        return resultList;
    } 
```

# c++ - 在 C++ Visual Studio 2010 中创建输出文件

> ID：13515114
> 
> 赞同：2
> 
> 时间：2012-11-22T14:45:41.573
> 
> 标签：c++, visual-studio-2010, file, output

我有一个最初用 g++ 编译的 C++ 项目。现在，我试图让它在 Visual Studio 2010 中工作，问题是创建一个空输出文件用于写入的常规命令：

```
#include <fstream>
using namespace std;

ofstream fout("afile.txt");
fout<<"write someting"<<endl;
fout.close(); 
```

在 VS2010 中不起作用（不创建文件）。即使文件已经存在，也没有写任何东西。

那么，任何想法在 VS2010 中打开文件以从 C++ 写入的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:03:31.967

我怀疑该文件是在您预期之外的地方创建的 - 检查工作目录指向的位置。这个是2012的，但如果不一样就很相似了……在vs2010中右键项目，选择属性，然后选择调试，查看工作目录：

![在此处输入图像描述](../Images/0748bbbd592463ffc5613ed2f03bc239.png)

或者，构建它，并将应用程序复制到您创建的目录 - 然后在命令行上运行它以检查它是否存在权限问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:01:12.523

以下代码对我来说很好：

```
#include <fstream>
using namespace std;

int main(){
    ofstream fout("afile.txt");
    fout << "write someting"<<endl;
    fout.close();
    return 0;
} 
```

您没有使用 main 方法（奇怪的是它没有给出任何语法错误）。确保当您创建这样的项目时，它是一个 ConsoleApplication 并且它是一个空项目（您可以在 Win32 应用程序向导（用于创建项目的向导）中的“附加选项”下选中此选项。

标准 C++ 应该在 Visual Studio 中工作。如果您想确保只使用标准 C++ 代码，您始终可以使用 /Za 编译器选项（请参阅[http://msdn.microsoft.com/en-us/library/0k0w269d.aspx](http://msdn.microsoft.com/en-us/library/0k0w269d.aspx)）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-01T08:06:54.797

手动将 afile.txt 添加到与源文件相同的位置，然后运行您的程序。文本将被写入文件。但请确保在运行程序时没有打开 afile.txt 文件

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-11-01T14:51:13.917

我遇到了同样的问题，让我困惑了几分钟。检查您的项目目录。我打赌你会在那里找到你的文件。如果没有，那么您需要为调试或发布模式指定一个工作目录。在 MS Visual Studio 中，您可以通过单击“项目”菜单上的“属性”然后在“配置”属性中指定“工作目录”字段中的“调试”选项卡来执行此操作，您希望从中启动项目的目录。

# php - 在表上添加乘法行。PHP-MySQL

> ID：13515116
> 
> 赞同：0
> 
> 时间：2012-11-22T14:45:56.863
> 
> 标签：php

我从以下 url 检索下面提到的部分代码：[通过 php 数组将多行插入 mysql](https://stackoverflow.com/questions/779986/insert-multiple-rows-via-a-php-array-into-mysql) 但是我遇到了一个问题。我的代码如下：

```
//create an array
$array = array();

//add some values

//1st var_dump($array);
var_dump($array);

$msql = array(); 
foreach( $array as $row ) {
    $msql[] = '('.$row['trend'].', '.$row['image_url'].','.$row['sku'].')';
}

 var_dump($msql);   

 $insertData = "INSERT INTO Data_Info (trend, image_url,sku) VALUES ".implode(',', $msql);
 mysql_query($insertData) or die(mysql_error());

 mysql_close($conn); 
```

我创建的表包含三个字段-> 趋势、image_url、sku。

第一个 var_dump 的结果：

```
array(6) { 
   [0]=> string(7) "mytrend" 
   [1]=> string(70) "http://re.n.o.coat.png" 
   [2]=> string(12) "militarycoat" 
   [3]=> string(7) "mytrend" 
   [4]=> string(73) "http://re.n.o.padded.png" 
   [5]=> string(15) "signaturepadded" 
} 
```

2n var_dump 的结果：

```
array(6) {
   [0]=> string(8) "(m, m,m)" 
   [1]=> string(8) "(h, h,h)" 
   [2]=> string(8) "(m, m,m)" 
   [3]=> string(8) "(m, m,m)" 
   [4]=> string(8) "(h, h,h)" 
   [5]=> string(8) "(s, s,s)" 
} 
Unknown column 'm' in 'field list' 
```

我不明白出了什么问题。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:58:14.527

您正在遍历输入数组的每个元素，然后尝试访问没有字符串的属性。（惊讶它甚至可以做任何事情）

尝试`for`循环。

```
for($i = 0; $i < count($array); $i+=3)
{
    $msql[] = '('.$array[$i].', '.$array[$i+1].','.$array[$i+2].')';
} 
```

或以不同的方式定义您的 $array 以适应您的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:15:48.623

`Unknown column 'm' in 'field list'`由以下方式生成：

```
$insertData = "INSERT INTO Data_Info (trend, image_url,sku) VALUES ".implode(',', $msql); 
```

`VALUES`必须封装在括号中。数据也应该用引号引起来。现在是：

```
VALUES (m, m, m),(h, h, h) 
```

它应该是：

```
VALUES (('m', 'm', 'm'),('h', 'h', 'h'))
       ^                               ^
       |_________encapsulated__________| 
```

否则数据被视为列 ( `Unknown column 'm' in 'field list'`)

* * *

其次，您的数组不包含键`trend`,`image_url`和`sku`，因此您从中获得的值是该数组中每个字符串的第一个字母：

*   `(m, m,m)`是从第一个字母`"mytrend"`
*   `(h, h,h)`来自`"http://re.n.o.coat.png"`
*   ETC

所以像这样创建你的数组：

```
$array = array(0 => array("trend"     => "put", 
                          "image_url" => "something", 
                          "sku"       => "in here"), 
               1 => array("trend"     => "value1", 
                          "image_url" => "value2", 
                          "sku"       => "value3"),
               /* etc.. */
               ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:01:48.657

您正在尝试使用 $row['trend'] 等访问关联数组（多维），而您没有它，如您的第一个 var_dump 所示。你的第一个 var_dump 应该是这样的：

```
$array = array(0 => array("trend"=> "value", "image_url" => "value, "sku" => "value"), 1=> array( .... ) and so on. 
```

# c - 在不同场景中将一个数组复制到另一个数组的最安全和优雅的方法是什么？

> ID：13515117
> 
> 赞同：1
> 
> 时间：2012-11-22T14:45:59.593
> 
> 标签：c, arrays

在我发现这个非常有用的问答之后：[如何将数组的所有成员初始化为相同的值？](https://stackoverflow.com/q/201101/1370465)，我开始想知道，如果我经常遇到的问题是如何在`C`.

这些是我最感兴趣的一些案例：

1.  相同类型到相同类型，具有相同大小（例如 char 到 char）
2.  一种类型到另一种类型，大小相同（例如 const char 到 unit8）
3.  较小的一个变成一个较大的（例如 test[7] 到 test[70]）

我的上述方法是这样的 - 例如：

1.  `array1 = array2`
2.  `memcpy(&array2,array1,sizeof(array1))`
3.  也`memcpy`可以通过元素进行 for 循环

我希望这里有人可以提供或知道在哪里可以找到不同数组交换例程的精炼示例集合。不是，我不能让它发挥自己的作用，只是，如果解决方案是可靠的，就会有这种持续的不安全感。

哦，我真的很讨厌那些 for 循环，单独分配每个元素。对我来说，使用它们的唯一原因是在执行交换之前需要进行一些额外的处理 - 例如首先增加转移的价值，或类似的东西。

如果这不适合 Q/A 风格，我会很高兴，如果有人可以确认或改进我的尝试，例如 2：

```
#define SIZEOF_ARRAY = 16;

uint8 array2[SIZEOF_ARRAY+1];
const char array1[SIZEOF_ARRAY+1] = {"test"};

memcpy(&array2,array1,sizeof(array1)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:57:40.003

首先，您的案例 1 没有意义，您不能复制到`const`数组。它是恒定的。

然后，对第二种情况的代码进行两个挑剔：

1.  在这种情况下，数组名称会衰减为指向第一个元素的指针，因此`&`不需要。
2.  `sizeof`不是函数，因此不需要括号。

因此：

```
memcpy(array2, array1, sizeof array2); 
```

请注意，这样做有点危险，您必须确保尺寸确实匹配。

# mysql - 替换表中的行

> ID：13515118
> 
> 赞同：2
> 
> 时间：2012-11-22T14:46:03.583
> 
> 标签：mysql, sql, database

我有`123 456 789`，但我不知道如何用这个值替换`999 888 777`。我想避免对每种情况进行更新查询，因为我有很多值要替换。

```
 table_A
 id 
 123
 456
 789
 ... 
```

* * *

```
table_A
id
999
888
777
... 
```

我需要这种类型的查询的替代方法。

```
UPDATE table_A
SET id=999
WHERE id=123 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:50:58.427

您可以使用 来执行此操作`CASE`，如下所示：

```
UPDATE table_A
SET id = CASE
    WHEN id = 123 THEN 999
    WHEN id = 456 THEN 888
    WHEN id = 789 THEN 777
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:48:51.417

您可以使用 case 语句进行更新。

请参阅此处的文档[。](http://dev.mysql.com/doc/refman/5.0/en/case.html)

# java - primefaces如何从选择列表中检索更改的值

> ID：13515119
> 
> 赞同：1
> 
> 时间：2012-11-22T14:46:07.580
> 
> 标签：java, jsf, primefaces

我已经实施了以下选择列表：

```
<p:pickList id="pickList" value="#{reportConfiguratorBean.dualListVars}" var="cRVariable" itemValue="#{cRVariable}" itemLabel="#{cRVariable.varName}" converter="#{cRImageTypeConverter}" immediate="true" rendered="true" >
    <f:facet name="sourceCaption">Available Variables</f:facet>
    <f:facet name="targetCaption">Associated Variables</f:facet>                
</p:pickList>                       
<f:facet name="footer"> 
    <p:commandButton id='varassociate' action="#{reportConfiguratorBean.setAssocImTypVariables()}" value='Associate' process="@this,pickList" />
</f:facet> 
```

选择列表已正确填充（使用数据库中的 getAssocImTypVariables()）。但我的**问题**是**我无法捕获**用户更改的选项列表值会更改源列表和目标列表。我正在尝试使用 commandButton 方法“setAssocImTypVariables”来捕获更改，如下所示：

```
public void setAssocImTypVariables() {      
    System.out.println(">>>>>>>>>>>>>>> entered");          
    List<CRVariable> sourceVariables = this.dualListVars.getSource();
    List<CRVariable> targetVariables = this.dualListVars.getTarget();       

    System.out.println(dualListVars.getSource());
    System.out.println(dualListVars.getTarget());

    for (CRVariable sourceVariable:sourceVariables) {
        System.out.println(">>>>>>>>>>>>> I am a source variable: " + sourceVariable.getVarName());
    }       
    for (CRVariable targetVariable:targetVariables) {
        System.out.println(">>>>>>>>>>>>> I am a target variable: " + targetVariable.getVarName());
    }       
    } 
```

因此，例如，如果我有一个带有 INITIAL source = (Obj1,Obj2,Obj3,Obj5,Obj7) 和 target = (Obj4,Obj6) 的选项列表，我将“Obj1”从源移动到目标但在我的控制台中我得到：

--------- 输入 [] []

所以我的 dualListVars（源和目标）没有填充！我有两个用于源和目标的空列表...

**所以我的方法不能感知选项列表的变化......有什么想法吗？我是 java + primefaces 的新手，所以它可能是非常基本的东西:(**

我还附上了getAssocImTypesOnLoad()方法：

```
public void getAssocImTypesOnLoad() {               
    Long imTypeId = Long.parseLong(virtualId);      
    List<CRVariable> source;
    List<CRVariable> target;        
    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction tx = null;      
    try 
    {
        tx = session.beginTransaction();            
        String hq3 = "select distinct v from CRVariable v join v.crimagetypes t where t.id in (:itid)";
        Query query3 = session.createQuery(hq3);
        query3.setParameter("itid",imTypeId);
        target = query3.list();
        String hq4 = "select v FROM CRVariable v WHERE v.id not in (" +
                "select distinct v1.id " +
                "from CRVariable v1 " +
                "join v1.crimagetypes t2 " +
                "where t2.id in (:itid))";
        Query query4 = session.createQuery(hq4);
        query4.setParameter("itid",imTypeId);
        source = query4.list();
        dualListVars = new DualListModel<CRVariable>(source, target);
        tx.commit();
    } 
    catch (Exception e) 
    {
        if (tx != null) 
        {
            e.printStackTrace();
        }
    } 
    finally 
    {
       session.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:09:18.730

你为什么在 上使用`immediate=true`属性`commandButton`？

如果我没记错的话，根据[balusC](https://stackoverflow.com/users/157882/balusc) 的一篇文章，[请在此处查看](http://balusc.blogspot.de/2006/09/debug-jsf-lifecycle.html#AddImmediateTrueToUICommandOnly)`immediate=true`命令按钮上的`apply model to values phase`.

也许这就是为什么你的模型没有更新的原因？

（只是通过查看代码来猜测 - 我没有复制这个。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T09:47:49.253

一个正在运行的选项列表示例 picklist.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>

<h:body>
<h:form>
    <h3>Basic PickList</h3>
    <p:pickList value="#{pickListBean.cities}" var="city"
        itemLabel="#{city}" itemValue="#{city}" />
<p:commandButton  value="Submit" action="#{pickListBean.displayList}" />    

</h:form>

</h:body>
</html> 
```

PickListBean.java

```
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import org.primefaces.model.DualListModel;

@ManagedBean
public class PickListBean {

   private DualListModel<String> cities;

   public PickListBean() {

  //Cities
  List<String> citiesSource = new ArrayList<String>();
  List<String> citiesTarget = new ArrayList<String>();

  citiesSource.add("Istanbul");
  citiesSource.add("Ankara");
  citiesSource.add("Izmir");
  citiesSource.add("Antalya");
  citiesSource.add("Bursa");
//  citiesTarget.add("T1");

  cities = new DualListModel<String>(citiesSource, citiesTarget);
   }

   public DualListModel<String> getCities() {
      return cities;
   }
   public void setCities(DualListModel<String> cities) {
      this.cities = cities;
   }
   public void displayList(){

     System.out.println("values in list are" +cities.getTarget());

   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:36:14.970

Take a closer look to the primefaces showcase : [Primefaces picklist](http://www.primefaces.org/showcase/ui/picklist.jsf)

Call the `dualListVars` directly. `#{reportConfiguratorBean.dualListVars}` is resolved to `reportConfiguratorBean.getDualListVars()` since dualListVars is a property (eg. a property with a getter and a setter).

```
<p:pickList id="pickList" value="#{reportConfiguratorBean.dualListVars}" var="cRVariable" itemValue="#{cRVariable}" itemLabel="#{cRVariable.varName}" converter="#{cRImageTypeConverter}" immediate="true" rendered="true" >
    <f:facet name="sourceCaption">Available Variables</f:facet>
    <f:facet name="targetCaption">Associated Variables</f:facet>                
</p:pickList> 
```

The action attribute is meant for business logic. You can catch here the source and target list. The process attribute tell JSF which components to process. In your case, you want the component `picklist` and `commandButton` to be processed. You can also process the whole form with `process="@form"`.

```
<p:commandButton id='varassociate' action="#{reportConfiguratorBean.readMyAssocImTypVariables}" value='Associate' ajax='false' process="@this,pickList" immediate="true" /> 
```

The readMyAssocImTypVariables function :

```
 public void readMyAssocImTypVariables() {      
    List<CRVariable> sourceVariables = this.dualListVars.getSource();
    List<CRVariable> targetVariables = this.dualListVars.getTarget();       
    for (CRVariable sourceVariable:sourceVariables) {
        System.out.println(">>>>>>>>>>>>> I am a source variable: " + sourceVariable.getVarName());
    }       
    for (CRVariable targetVariable:targetVariables) {
        System.out.println(">>>>>>>>>>>>> I am a target variable: " + targetVariable.getVarName());
     }       
  } 
```

**Unrelated** : Do NOT put business logic into getters/setters ! They are called multiple time by JSF.

# android - 绘制一个大表格并平滑滚动

> ID：13515126
> 
> 赞同：2
> 
> 时间：2012-11-22T14:46:28.310
> 
> 标签：android, scroll, scrollview

我有一个大约 20 列和 200 行的表格，不能只在一个屏幕上显示。我必须水平和垂直滚动它，那么有什么办法可以实现吗？

我已经尝试过 TableLayout，它可以做这样的事情，但滚动起来很糟糕。Re Explorer 中的数据库浏览器非常完美，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:23:54.930

您可能会找到您的解决方案/解决其中的一些问题

[http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)

[如何使我的布局水平和垂直滚动？](https://stackoverflow.com/questions/1399605/problem-in-horizontal-scroll-in-android)

但是，如果您的雇主没有强迫您使用相同的布局设计，那么请更改屏幕设计.. 因为您选择的当前设计不受 ANDROID 支持，这是一种网页或桌面屏幕设计。

# php - 更新查询将零值写入数据库

> ID：13515130
> 
> 赞同：0
> 
> 时间：2012-11-22T14:46:36.750
> 
> 标签：php, mysql, arrays, sql-update

我正在尝试更新未填写的表单的某些字段，但是当我单击更新按钮时，较早存储的值设置为 0，并且新插入的值保持不变。如果我再次尝试编辑记录，这将继续。以前存储的值被设置为 0。如果有人可以看看这个并帮助我，那就太好了

这是编辑页面的代码。

```
 <?php
    include 'db.php';
    $mykey1=$_REQUEST['key1'];
    $mykey2=$_REQUEST['key2'];
    $mykey3=$_REQUEST['key3'];
    $mykey4=$_REQUEST['key4'];
    $mykey5=$_REQUEST['key5'];
    $mykey6=$_REQUEST['key6'];
    $mykey7=$_REQUEST['key7'];
    $mykey8=$_REQUEST['key8'];
    $mykey9=$_REQUEST['key9'];
    $mykey10=$_REQUEST['key10'];
    $mykey11=$_REQUEST['key11'];
    $mykey12=$_REQUEST['key12'];
    $mykey13=$_REQUEST['key13'];
    $mykey14=$_REQUEST['key14'];
    $mykey15=$_REQUEST['key15'];
    $mykey16=$_REQUEST["key16"];

    $t6 = "SELECT t.name FROM sicherheitsunterweisung as t where t.id = '".$mykey6."'";
    $r6 = mysql_query($t6)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r6)){
    $x6= $row['name'];  //handle rows.
    }

    $t7 = "SELECT t.training FROM trainings as t where t.id = '".$mykey7."'";
    $r7 = mysql_query($t7)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r7)){
    $x7= $row['training'];  //handle rows.
    }

    $t8 = "SELECT t.training FROM trainings as t where t.id = '".$mykey8."'";
    $r8 = mysql_query($t8)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r8)){
    $x8= $row['training'];  //handle rows.
    }

    $t9 = "SELECT t.training FROM trainings as t where t.id = '".$mykey9."'";
    $r9 = mysql_query($t9)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r9)){
    $x9= $row['training'];  //handle rows.
    }

    $t10 = "SELECT t.training FROM trainings as t where t.id = '".$mykey10."'";
    $r10 = mysql_query($t10)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r10)){
    $x10= $row['training'];  //handle rows.
    }

    $t11 = "SELECT t.training FROM trainings as t where t.id = '".$mykey11."'";
    $r11 = mysql_query($t11)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r11)){
    $x11= $row['training'];  //handle rows.
    }

    $t12 = "SELECT t.training FROM trainings as t where t.id = '".$mykey12."'";
    $r12 = mysql_query($t12)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r12)){
    $x12= $row['training'];  //handle rows.
    }

    $t13 = "SELECT t.training FROM trainings as t where t.id = '".$mykey13."'";
    $r13 = mysql_query($t13)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r13)){
    $x13= $row['training'];  //handle rows.
    }

    $t14 = "SELECT t.training FROM trainings as t where t.id = '".$mykey14."'";
    $r14 = mysql_query($t14)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r14)){
    $x14= $row['training'];  //handle rows.
    }

    $t15 = "SELECT t.training FROM trainings as t where t.id = '".$mykey15."'";
    $r15 = mysql_query($t15)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r15)){
    $x15= $row['training'];  //handle rows.
    }

    $t16 = "SELECT t.training FROM trainings as t where t.id = '".$mykey16."'";
    $r16 = mysql_query($t16)or die($myQuery."<br/><br/>".mysql_error());
    while($row = mysql_fetch_assoc($r16)){
    $x16= $row['training'];  //handle rows.
    }
    echo "<form action='update.php?key1=" . $mykey1 .  "'method='POST'>";
    echo "<center><table>";
    echo  "<TR><TD>ID Number</TD><TD><INPUT TYPE=text name='pers_nr' value=$mykey1 disabled = true></TD></TR>";
    echo  "<TR><TD>Family Name</TD><TD><INPUT TYPE=text name='n_name' value=$mykey2 disabled = true ></TD></TR>";
    echo  "<TR><TD>First Name</TD><TD><INPUT TYPE=text name='v_name' value=$mykey3 disabled = true></TD></TR>";
    echo  "<TR><TD>Access Level</TD><TD><INPUT TYPE=text name='berectigung_id' value=$mykey4 disabled = true></TD></TR>";
    echo  "<TR><TD>Sicherheitsunterweisung</TD><TD><INPUT TYPE=text name='sicherheisunterweisung_id' value=$x6 disabled = true ></TD></TR>";
    echo  "<TR><TD>Experience</TD><TD><INPUT TYPE=text name='erfahrungen_id' value=$mykey5 ></TD></TR>";
    if($x7!= NULL)
    {
    echo  "<TR><TD>Schulung 1</TD><TD><INPUT TYPE=text name='schulungen_id1' value=$x7 disabled = true></TD></TR>";
     }
     else {
    $sql1="SELECT id,training  FROM trainings as s"; 
    $result=mysql_query($sql1); 
    echo "<TR><TD> Schulung 1</TD><TD> <select name='schulungen_id1'><option value            default>$x7</option>";
    while ($row = mysql_fetch_array($result)) 
    {
    echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
    }
    echo "</select></TD></TR>";
    }
    if($x8!= NULL)
    {
    echo  "<TR><TD>Schulung 2</TD><TD><INPUT TYPE=text name='schulungen_id2' value=$x8 disabled = true></TD></TR>";
    }
    else {
    $sql2="SELECT id,training  FROM trainings as s"; 
    $result=mysql_query($sql2); 
    echo "<TR><TD> Schulung 2</TD><TD> <select name='schulungen_id2'><option value default>$x8</option>";
    while ($row = mysql_fetch_array($result)) 
    {
    echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
     }
     echo "</select></TD></TR>";
    }
   if($x9!= NULL)
   {
   echo  "<TR><TD>Schulung 3</TD><TD><INPUT TYPE=text name='schulungen_id3' value=$x9 disabled = true></TD></TR>";
    }
   else {
   $sql3="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql1); 
   echo "<TR><TD> Schulung 3 </TD><TD><select name='schulungen_id3'><option value default>$x9</option>";
   while ($row = mysql_fetch_array($result)) 
   {
   echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
   }
   echo "</select></TD></TR>";
   }
   if($x10!= NULL)
   {
   echo  "<TR><TD>Schulung 4</TD><TD><INPUT TYPE=text name='schulungen_id4' value=$x10 disabled = true></TD></TR>";
   }
   else {
   $sql4="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql4); 
   echo "<TR><TD> Schulung 4 </TD><TD><select name='schulungen_id4'><option value default>$x10</option>";
   while ($row = mysql_fetch_array($result)) 
   {
   echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
   }
   echo "</select></TD></TR>";
   }
   if($x11 != NULL)
   {
   echo  "<TR><TD>Schulung 5</TD><TD><INPUT TYPE=text name='schulungen_id5' value=$x11  disabled = true></TD></TR>";
   }
   else {
   $sql5="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql5); 
   echo "<TR><TD> Schulung 5 </TD><TD><select name='schulungen_id5'><option value       default>$x11</option>";
   while ($row = mysql_fetch_array($result)) 
   {
   echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
   }
   echo "</select></TD></TR>";
   }
   if($x12 != NULL)
   {
   echo  "<TR><TD>Schulung 6</TD><TD><INPUT TYPE=text name='schulungen_id6' value=$x12 disabled = true></TD></TR>";
   }
   else 
   {
   $sql6="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql6); 
   echo "<TR><TD> Schulung 6 </TD><TD><select name='schulungen_id6'><option value default>$x12</option>";
   while ($row = mysql_fetch_array($result)) 
   {
   echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
   }
   echo "</select></TD></TR>";
   }
   if($x13!= NULL)
   {
   echo  "<TR><TD>Schulung 7</TD><TD><INPUT TYPE=text name='schulungen_id7' value=$x13 disabled = true></TD></TR>";
   }
   else {
   $sql7="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql7); 
   echo "<TR><TD> Schulung 7</TD><TD> <select name='schulungen_id7'><option value default>$x13</option>";
   while ($row = mysql_fetch_array($result)) 
   {
   echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
   }
   echo "</select></TD></TR>";
   }
   if($x14!= NULL)
   {
   echo  "<TR><TD>Schulung 8</TD><TD><INPUT TYPE=text name='schulungen_id8' value=$x14 disabled = true></TD></TR>";
   }
   else {
   $sql8="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql8); 
   echo "<TR><TD> Schulung 8</TD><TD> <select name='schulungen_id8'><option value default>$x14</option>";
   while ($row = mysql_fetch_array($result)) 
   {
   echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
    }
   echo "</select></TD></TR>";
    }
   if($x15!= NULL)
   {
    echo  "<TR><TD>Schulung 9</TD><TD><INPUT TYPE=text name='schulungen_id9' value=$x15 ></TD></TR>";
    }
   else {
   $sql9="SELECT id,training  FROM trainings as s"; 
   $result=mysql_query($sql9); 
   echo "<TR><TD> Schulung 9 </TD><TD><select name='schulungen_id9'><option value default>$x15</option>";
   while ($row = mysql_fetch_array($result)) 
    {
    echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
     }
    echo "</select></TD></TR>";
    }
    if($x16!= NULL)
    {
    echo  "<TR><TD>Schulung 10</TD><TD><INPUT TYPE=text name='schulungen_id10' value=$x16 ></TD></TR>";
    }
    else {
    $sql10="SELECT id,training  FROM trainings as s"; 
    $result=mysql_query($sql10); 
    echo "<TR><TD> Schulung 10</TD><TD> <select name='schulungen_id10'><option value default>$x16</option>";
    while ($row = mysql_fetch_array($result)) 
    {
    echo "<option value='".$row['id']."'>" . $row['training'] . "</option>";
    }
    echo "</select></TD></TR>";
    }
    echo "<TR><TD><INPUT TYPE=submit value=Update></TD><TD><INPUT TYPE=reset value='cancel'></TD></TR></table>"; 
```

这是我为更新查询编写的脚本。

```
 include 'db.php';
    $myfamname = $_POST['key2'];
    $myfirstname = $_POST['key3'];
    $access = $_POST['key4'];
    $erfahrungen = $_POST['erfahrungen_id'];
    $sch1 = ($_REQUEST['schulungen_id1']);
    $sch2  = ($_REQUEST['schulungen_id2']);
    $sch3  = ($_REQUEST['schulungen_id3']);
    $sch4  = ($_REQUEST['schulungen_id4']);
    $sch5  = ($_REQUEST['schulungen_id5']);
    $sch6  = ($_REQUEST['schulungen_id6']);
    $sch7  = ($_REQUEST['schulungen_id7']);
    $sch8  = ($_REQUEST['schulungen_id8']);
    $sch9  = ($_REQUEST['schulungen_id9']);
    $sch10  = ($_REQUEST['schulungen_id10']);

    $berec = 1;
    $schid= array(1,2,3,4,5,6,7,8,9,10);
    //$erid = array (1,2,3,4,5);
    $key1 = $_REQUEST['key1'];
    switch ($berec)
    {  
    case 1 :
    if ((in_array($sch1,$schid)) && (in_array($sch2,$schid)) && (in_array($sch3,$schid)) && (in_array($sch4,$schid)) && (in_array($sch5,$schid)) && $erfahrungen == 2)
    {
    $berec = 2;
    }
    case 2 :
    if ((in_array($sch1,$schid)) && (in_array($sch2,$schid)) && (in_array($sch3,$schid)) && (in_array($sch4,$schid)) && (in_array($sch5,$schid)) && (in_array($sch6,$schid)) &&  (in_array($sch7,$schid))&& (in_array($sch8,$schid)) && $erfahrungen == 3)
    {
    $berec = 3;
    }
    case 3:
    if ((in_array($sch1,$schid)) && (in_array($sch2,$schid)) && (in_array($sch3,$schid)) && (in_array($sch4,$schid)) && (in_array($sch5,$schid)) && (in_array($sch6,$schid)) && (in_array($sch7,$schid))&& (in_array($sch8,$schid)) && (in_array($sch9,$schid)) &&  $erfahrungen == 4)
    {
    $berec = 4;
     }
    if ((in_array($sch1,$schid)) && (in_array($sch2,$schid)) && (in_array($sch3,$schid)) && (in_array($sch4,$schid)) && (in_array($sch5,$schid)) && (in_array($sch6,$schid)) && (in_array($sch7,$schid))&& (in_array($sch8,$schid)) && (in_array($sch9,$schid)) && (in_array($sch10,$schid)) &&  $erfahrungen == 5)
     {
     $berec = 5;
     }

     default : $access;
     break;
     } 
     $update = "update driverlicense set berectigung_id= '$berec', erfahrungen_id='$erfahrungen',sicherheisunterweisung_id = 1,schulungen_id1 =  '$sch1',schulungen_id2 = '$sch2',schulungen_id3 = '$sch3',schulungen_id4 = '$sch4',schulungen_id5 = '$sch5',schulungen_id6 = '$sch6',schulungen_id7 = '$sch7',schulungen_id8 = '$sch8',schulungen_id9 = '$sch9',schulungen_id10 = '$sch10' where pers_nr = '$key1'";
     $q = mysql_query($update) or die(mysql_error());
     echo "<script>alert('Successfully Updated')</script>";
     echo "<script>location.href='view.php'</script>";
     echo "$sch5"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:51:43.197

这可能是由于使用`disabled = true`.

```
<INPUT TYPE=text name='schulungen_id1' value=$x7 disabled = true> 
```

来自[stackoverflow.com/questions/7244728/post-for-disabled-select](https://stackoverflow.com/questions/7244728/post-for-disabled-select) -

> 这就是 disabled 属性的工作方式。禁用表单控件时，提交表单时将忽略该值，并且密钥不会出现在 $_POST（或 $_GET）中。
> 
> 如果您希望该值出现在提交的数据中，但您不希望用户能够更改页面上的值（我想这是您想要实现的），请改用 readonly="readonly"禁用=“禁用”。

另请参阅 - [https://stackoverflow.com/search?q=php+form+post+input+value+that+is+disabled](https://stackoverflow.com/search?q=php+form+post+input+value+that+is+disabled)

# sql-server - 使用 Reporting Services 实施 Windows 身份验证

> ID：13515133
> 
> 赞同：2
> 
> 时间：2012-11-22T14:46:47.653
> 
> 标签：sql-server, windows, authentication, iis, reporting-services

[这是对发布报告服务身份验证建议](https://stackoverflow.com/questions/13347593/reporting-services-authentication-advice-sought)的扩展，因为我无法在该线程上提交冗长的帖子（道歉管理员）。

基本上，我将报告服务的本地安装配置为使用 Windows 身份验证（最终目的是在网络上实现此身份验证）。

我目前的设置：

IIS (5.1)：我创建了一个名为“ReportServer”的应用程序，它使用 ASP.NET v2.0.50727。此应用程序的安全设置为“集成 Windows 身份验证”。我已取消选中“匿名访问”复选框。我是否正确假设这将阻止匿名访问 IIS（即 IIS 中的 ReportServer 应用程序？）。因此，将提示用户输入登录详细信息，然后将针对 windows/AD 进行验证？

报告：我创建了一个共享数据源，其中数据库驻留在不同的服务器上，并将数据源配置为使用“Windows 身份验证”（不是 SQL Server 身份验证），我可以成功测试连接。我还可以通过在 BIDS 中运行报告来成功创建和测试一个简单的报告。

当我部署报告时，不会提示我登录（这很好）。我相信这是因为 IIS 中的应用程序目录配置为使用“集成 Windows 身份验证”，它使用登录的 PC 用户帐户（正确吗？）。

每当我通过浏览器加载报告服务时，系统都会正确提示我输入我的 Windows 域用户名和密码，但只有当我从本地 PC 运行报告时。一旦通过身份验证，我就可以看到所有适用于我的报告。如果同事试图连接到我 PC 上的报表实例，他无需登录就允许进入！为什么是这样？！

但是，当我通过浏览器运行已部署的报告时，我收到错误“报告处理期间发生错误。无法创建与数据源的连接。用户“（null）”登录失败。原因：与受信任的人没有关联SQL Server 连接。” 如果我更改数据源以使其使用 SQL Server 身份验证并指定 SQL Server 中存在的登录名，则可以在浏览器中成功运行报告。

我想实现的理想解决方案如下：

1.  用户在浏览器中加载报表服务器 URL。
2.  系统会提示用户输入其 Windows/AD 凭据（包括域前缀）。
3.  在幕后，用户被允许进入报表服务器。
4.  用户将只能看到他/她被允许查看的报告文件夹和报告。这将通过将允许的 AD 组/用户添加到报告文件夹和报告中来控制（我知道如何执行此操作）。我不希望必须维护单独的 SQL Server 用户帐户。

我感觉好像我快到了，即与报表服务器的连接在允许用户访问报表服务器之前提示用户输入他们的 Windows 凭据。

请有人告诉我：

a) 为什么当我通过本地浏览器访问报表时，系统提示我登录 windows，但当其他 windows 用户通过浏览器窗口远程访问我的报表服务器时，却没有提示登录？

b）如果应该实施更好的整体解决方案，请您建议或指出相关资源。

c) 我当前的设置是否有任何需要注意的地方，这可能会在未来引起问题。

提前谢谢了。

JFB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:50:44.533

有2个安全方面需要处理

1.  访问报告的用户的身份验证
2.  对访问数据库的数据源进行身份验证

通常，我们发现我们希望在第 1 点踢出未经授权的用户，然后（假设用户已获得授权）为数据源提供一组静态连接凭据 - 这具有允许连接池和为我们的 DBA 省去了很多麻烦，因为他们只需要为“报告数据源用户”进行配置，就可以确定哪些用户可以访问哪些数据库，并运行哪些报告 SPROC 等。

第 1 点由添加到报告/文件夹的组/用户控制。

第 2 点可以通过为您的数据源设置域凭据，然后为该用户分配对它需要访问的各种数据库的适当读取/执行访问权限来完成。

您可能缺少的一点是您的数据源凭据运行需要“本地登录”权限才能工作？

FWIW 我们对数据源的设置如下：

*   安全存储在报表服务器中的凭据
*   检查：连接到数据源时用作 Windows 凭据

运行您的帐户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:50:10.883

您遇到这种情况的原因（即 user = null）是因为您要求报表服务器验证 Kerberos 凭据。[这里](http://blogs.technet.com/b/rob/archive/2011/11/23/enabling-kerberos-authentication-for-reporting-services.aspx)有一个广泛的帖子，但您的问题的症结在于您要求报表服务器验证 Windows 凭据，但 Active Directory 不信任您的计算机来传递这些凭据。如果您正确设置了委派，它将在没有登录提示的情况下满足您的要求，并且您可以通过第 4 点控制可见性。

# javascript - HTML/Javascript：如何访问在带有 src 集的脚本标签中加载的 JSON 数据

> ID：13515141
> 
> 赞同：106
> 
> 时间：2012-11-22T14:47:05.813
> 
> 标签：javascript, json, html, script-tag

我有我在服务器中生成的这个 JSON 文件，我希望在客户端可以访问该页面，因为该页面是可见的。基本上我想要实现的是：

我在我的 html 文档中声明了以下标签：

```
<script id="test" type="application/json" src="http://myresources/stuf.json"> 
```

其源中引用的文件具有 JSON 数据。正如我所见，数据已被下载，就像脚本一样。

现在，我如何在 Javascript 中访问它？我尝试使用多种方法尝试获取我的 JSON 数据，但不知何故这不起作用。如果 json 数据被内联写入脚本中，那么它`innerHTML`会起作用。它不是，也不是我想要达到的目标。

如果您想建议，页面加载后的远程 JSON 请求也不是一个选项。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-27T02:38:54.080

你不能像那样加载 JSON，抱歉。

我知道你在想“为什么我不能`src`在这里使用？我见过这样的东西......”：

```
<script id="myJson" type="application/json">
 { 
   name: 'Foo' 
 }
</script>

<script type="text/javascript">
    $(function() {
        var x = JSON.parse($('#myJson').html());
        alert(x.name); //Foo
     });
</script> 
```

...简单地说，这只是脚本标签被“滥用”为数据持有者。您可以使用各种数据来做到这一点。例如，[许多模板引擎利用脚本标签来保存模板](http://api.jquery.com/tmpl/)。

您有一个从远程文件加载 JSON 的选项的简短列表：

1.  使用`$.get('your.json')`或其他一些这样的 AJAX 方法。
2.  编写一个将全局变量设置为 json 的文件。（似乎胡作非为）。
3.  将其拉入一个不可见的 iframe，然后在加载后刮掉其中的内容（我称之为“1997 模式”）
4.  咨询伏都教牧师。

最后一点：

> 如果您想建议，页面加载后的远程 JSON 请求也不是一个选项。

……这没有意义。AJAX 请求和浏览器在处理您的请求时发送的请求之间的区别`<script src="">`本质上没有什么区别。他们都会对资源进行 GET 操作。HTTP 不在乎它是否因为脚本标记或 AJAX 调用而完成，您的服务器也不会。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-07-14T12:19:50.613

另一种解决方案是使用服务器端脚本语言并简单地包含 json-data inline。这是一个使用 PHP 的示例：

```
<script id="data" type="application/json"><?php include('stuff.json'); ?></script>
<script>
var jsonData = JSON.parse(document.getElementById('data').textContent)
</script> 
```

上面的例子使用了一个额外的 script 标签 type `application/json`。一个更简单的解决方案是将 JSON 直接包含到 JavaScript 中：

```
<script>var jsonData = <?php include('stuff.json');?>;</script> 
```

带有额外标签的解决方案的优点是 JavaScript 代码和 JSON 数据保持相互分离。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-20T15:49:16.553

看起来这是不可能的，或者至少不支持。

从[HTML5 规范](https://www.w3.org/TR/html5/scripting-1.html#script)：

> 当用于包含**数据块**时（相对于脚本），**数据必须内嵌**，数据的格式必须使用 type 属性给出，**src 属性不能指定**，并且 script 元素的内容必须符合为使用的格式定义的要求。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-10-16T01:42:55.923

虽然目前无法使用`script`标签，但`iframe`如果它来自同一个域，则可以。

```
<iframe
id="mySpecialId"
src="/my/link/to/some.json"
onload="(()=>{if(!window.jsonData){window.jsonData={}}try{window.jsonData[this.id]=JSON.parse(this.contentWindow.document.body.textContent.trim())}catch(e){console.warn(e)}this.remove();})();"
onerror="((err)=>console.warn(err))();"
style="display: none;"
></iframe> 
```

要使用上述内容，只需将`id`and`src`属性替换为您需要的属性。（`id`我们假设在这种情况下等于`mySpecialId`）将用于将*数据*存储在`window.jsonData["mySpecialId"]`.

换句话说，对于每个具有`id`和使用`onload`脚本的 iframe，都会将该数据*同步*加载到指定的`window.jsonData`对象`id`中。

*我这样做是为了好玩，并表明它是“可能的”，但我**不**建议使用它。*

* * *

这是一个使用回调的替代方法。

```
<script>
    function someCallback(data){
        /** do something with data */
        console.log(data);

    }
    function jsonOnLoad(callback){
        const raw = this.contentWindow.document.body.textContent.trim();
        try {
          const data = JSON.parse(raw);
          /** do something with data */
          callback(data);
        }catch(e){
          console.warn(e.message);
        }
        this.remove();
    }
</script>
<!-- I frame with src pointing to json file on server, onload we apply "this" to have the iframe context, display none as we don't want to show the iframe -->
<iframe src="your/link/to/some.json" onload="jsonOnLoad.apply(this, someCallback)" style="display: none;"></iframe> 
```

*在 chrome 中测试，应该在 Firefox 中工作。不确定 IE 或 Safari。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-23T23:18:01.233

我同意本。您无法加载/导入简单的 JSON 文件。

但是，如果您绝对想这样做并且可以灵活地更新 json 文件，您可以

我的 json.js

```
 var myJSON = {
      id: "12ws",
      name: "smith"
    } 
```

索引.html

```
<head>
  <script src="my-json.js"></script>
</head>
<body onload="document.getElementById('json-holder').innerHTML = JSON.stringify(myJSON);">
  <div id="json-holder"></div>
</body> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-24T18:07:17.010

如果您需要从另一个域加载 JSON： [http](http://en.wikipedia.org/wiki/JSONP)
://en.wikipedia.org/wiki/JSONP 但是请注意潜在的 XSSI 攻击： [https ://www.scip.ch/en/?labs.20160414](https://www.scip.ch/en/?labs.20160414)

如果它是同一个域，那么只需使用 Ajax。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-27T11:30:09.410

检查这个答案：[https ://stackoverflow.com/a/7346598/1764509](https://stackoverflow.com/a/7346598/1764509)

```
$.getJSON("test.json", function(json) {
    console.log(json); // this will show the info it in firebug console
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-21T23:04:09.127

在 javascript 中使用精确 json 的另一种选择。由于它是 Javascript 对象表示法，您可以直接使用 json 表示法创建对象。如果将其存储在 .js 文件中，则可以在应用程序中使用该对象。当我有一些静态 json 数据我想与我的应用程序的其余部分分开缓存在一个文件中时，这对我来说是一个有用的选项。

```
 //Just hard code json directly within JS
    //here I create an object CLC that represents the json!
    $scope.CLC = {
        "ContentLayouts": [
            {
                "ContentLayoutID": 1,
                "ContentLayoutTitle": "Right",
                "ContentLayoutImageUrl": "/Wasabi/Common/gfx/layout/right.png",
                "ContentLayoutIndex": 0,
                "IsDefault": true
            },
            {
                "ContentLayoutID": 2,
                "ContentLayoutTitle": "Bottom",
                "ContentLayoutImageUrl": "/Wasabi/Common/gfx/layout/bottom.png",
                "ContentLayoutIndex": 1,
                "IsDefault": false
            },
            {
                "ContentLayoutID": 3,
                "ContentLayoutTitle": "Top",
                "ContentLayoutImageUrl": "/Wasabi/Common/gfx/layout/top.png",
                "ContentLayoutIndex": 2,
                "IsDefault": false
            }
        ]
    }; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-10T11:14:40.923

在你的脚本文件中放置这样的东西 `json-content.js`

```
var mainjson = { your json data} 
```

然后从脚本标签调用它

```
<script src="json-content.js"></script> 
```

然后你可以在下一个脚本中使用它

```
<script>
console.log(mainjson)
</script> 
```

# android - 使用sax解析器将xml中的元素存储到android上的sqlite数据库

> ID：13515142
> 
> 赞同：1
> 
> 时间：2012-11-22T14:47:09.150
> 
> 标签：android, saxparser, android-sqlite

我正在使用 android 上的 sax 解析器解析 xml 文件，并将元素和属性的值存储在由 2 个表（通道、程序）组成的 sqlite 数据库中

这是 xml 文件：

```
<channel id="C9.telerama.fr">
<display-name>W9</display-name>
<icon src="http://localhost/logo9.gif"/>
</channel>

<programme start="20121102001000 +0100" stop="20121102010000 +0100" showview="5349005" channel="C1.telerama.fr">
<title>New York, section criminelle</title>
<sub-title>Les cartes en main</sub-title>
<desc lang="fr">
Saison : 6 - Episode : 17/22 - Après la condamnation d'un violeur par le tribunal, Jacob, le fils du juge Fenner, est assassiné. Mike Logan mène l'enquête avec Megan Wheeler et soupçonne un homme qu'il avait arrêté et que le juge avait condamné. Les deux inspecteurs trouvent bientôt une nouvelle piste.
</desc>
<credits>
<director>Tom Di Cillo, Tom DiCillo</director>
<actor>Chris Noth (Mike Logan)</actor>
<actor>William Hill (Bobby Grey)</actor>
</credits>
<date>2007</date>
<category lang="fr">série</category>
<category lang="fr">série policière</category>
<icon src="http://guidetv-iphone.telerama.fr/verytv/procedures/images/2012-11-02_1_00:10.jpg"/>
<episode-num system="xmltv_ns">5.16/22.</episode-num>
<video>
<aspect>16:9</aspect>
<quality>HDTV</quality>
</video>
<premiere/>
<subtitles type="teletext">
<language>fr</language>
</subtitles>
<rating system="CSA">
<value>-10</value>
<icon src="http://www.csa.fr/picts/visuels/picto_cat2.gif"/>
</rating>
</programme> 
```

但在第二个表“程序”中，我无法存储所有元素（标题、描述 ..）

这是空字符方法：

```
 public void characters(char[] ch, int start, int length)
            throws SAXException{
        if (inCat)
                        {
                            myBdd.insertprogram(id, startp, stopp, new String(ch, start, length), buffer1.toString())

;

                        System.out.println("ALEEEEEERRRRRRRRRRRRRRTTTTTTTTTTT");
                        System.out.println(buffer1.toString());
                        //myBdd.insertprogram(id, startp, stopp, buffer1.toString(),"");
                        inCat = false;
                    } 
```

startelement 方法：

```
public void startElement(String uri, String localName, String qName, Attributes attributes)
      throws SAXException
      {

            Log.i("qname", "<"+qName.toString()+">");

            if(qName.equals("tv"))
            {
                Log.i("Dans TV", "tv");
            }

            else if(qName.equals("channel"))
            {

                channelId = attributes.getValue("id");
                    Log.i("id",id);
                    //myBdd.insertchannel(channelId,title);
                    inPersonne = true;  
            }

            else if(qName.equals("display-name"))
            {
                buffer = new StringBuffer();
                inNom = true;   
            }

            else if(qName.equals("programme"))
            {
                    id = attributes.getValue("channel");
                    startp = attributes.getValue("start");
                    stopp = attributes.getValue("stop");

                inprog = true;
            }

            else if(qName.equals("category"))
            {
                inCat = true;   
            }

            else if(qName.equals("desc"))
            {
                buffer1 = new StringBuffer();
                inDesc = true;
            } 
```

那么我怎样才能获得例如“desc”元素，因为我只获得要插入数据库的 4 个第一个参数！！！（频道，开始，停止，类别）在我的数据库！

# c# - 如果选中 Box，如何循环遍历 CheckBoxList 并插入

> ID：13515145
> 
> 赞同：0
> 
> 时间：2012-11-22T14:47:26.817
> 
> 标签：c#, asp.net, sql, ado.net

我想循环这段代码并保存选定的 CheckBoxList 项目。我该怎么做？

```
String insCmd = "Insert into Sale (Name, price) values (@Name, @price)";
SqlCommand insertUser = new SqlCommand(insCmd, myConnection);
insertUser.Parameters.AddWithValue("@Name", CheckBoxList1.SelectedItem.ToString());
insertUser.Parameters.AddWithValue("@price", Convert.ToDecimal(TextBox3.Text));

try
{
  myConnection.Open();
  insertUser.ExecuteNonQuery();
  myConnection.Close();
}
catch (Exception er)
{
  Response.Write("<script>alert('Error While Input')</script>");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:58:50.437

```
connection.Open()
var insertUser = new SqlCommand(insCmd, connection);   

foreach(var item in CheckBoxList1.Items)
{
  if(!item.Selected) continue;
  insertUser.Parameters.Clear();
  // your code where you can use Item.Text to add parameters
  // i have no idea about your textboxes though 
  insertUser.ExecuteNonQuery();
}
connection.Close(); 
```

但这不是最佳方式。最佳方式将涉及表值参数和存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:00:08.700

您可以使用 LINQ 遍历选定的项目。

```
using (var con = new SqlConnection())
{
    try
    {
        con.Open();
        const string query = "INSERT INTO Sale (Name, Price) VALUES (@Name, @Price)";
        using (var command = new SqlCommand(query, con))
        {
            foreach (var item in CheckBoxList1.Items.Cast<ListItem>().Where(item => item.Selected))
            {
                command.Parameters.Clear();
                command.Parameters.AddWithValue("@Name", item.Text);
                command.Parameters.AddWithValue("@Price", Convert.ToDecimal(TextBox3.Text));
                command.ExecuteNonQuery();
            }
        }
        con.Close();
    }
    catch (Exception)
    {
        Response.Write("<script>alert('Error While Input')</script>");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:24:16.677

> ```
>  var items = new System.Collections.ArrayList(checkedListBox1.CheckedItems);
>         foreach (var item in items)
>         {
>             //your function for saving
>         } 
> ```

或者，重做您的插入功能，传递所选事物的集合，并将您的插入与您检查的所有值连接起来，并使用 1 go 执行查询以使其更快/更高效

# iis - 静态网页的url改写规则——使用url带附加参数后返回404

> ID：13515148
> 
> 赞同：3
> 
> 时间：2012-11-22T14:47:33.947
> 
> 标签：iis, iis-7, url-rewriting, http-status-code-404, url-parameters

我使用 IIS7 的 URL 重写模块 - 因为 URL 重写了几个静态文件。

基本上我将 /pretty-url 映射到 /real-file-name.html

到目前为止，这很简单。

但是在将查询字符串添加到漂亮的 url 之后，它会抛出 404 状态代码。到目前为止，我还没有找到任何解决此问题的方法。有什么建议，还是我做错了什么？

这是配置：

```
<rewriteMaps>
  <rewriteMap name="CoolUrls">
<add key="/pretty-url" value="/real-file.html" />
    ... and so on ...
  </rewriteMap>
</rewriteMaps> 
```

和：

```
<rules>
  <clear />
    <rule name="Rewrite rule for CoolUrls" stopProcessing="true">
      <match url=".*" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{CoolUrls:{REQUEST_URI}}" pattern="(.+)" />
      </conditions>
      <action type="Rewrite" url="{C:1}" appendQueryString="true" />
    </rule>
</rules> 
```

任何带有查询的请求（? 标记后的任何参数）都以 404 状态码结束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T22:21:24.423

我假设您希望能够添加一个查询字符串，并且这个查询字符串必须附加到重写的请求中。您可能不希望查询字符串包含在 rewritemap 的匹配中。因为这实际上就是您正在做的事情，`{CoolUrls:{REQUEST_URI}}`因为`{REQUEST_URI}`它还包含查询字符串。您应该将其替换为`{CoolUrls:{R:0}}`.

完整规则：

```
<rule name="Rewrite rule for CoolUrls" stopProcessing="true">
    <match url=".*" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{CoolUrls:{R:0}}" pattern="(.+)" />
    </conditions>
    <action type="Rewrite" url="{C:1}" appendQueryString="true" />
</rule> 
```

**更新：**您应该更新您的重写映射，因为`{R:0}`（URL）不包括 URL 中的前导斜杠。所以你的重写图应该是：

```
<rewriteMaps>
    <rewriteMap name="CoolUrls">
        <add key="pretty-url" value="/real-file.html" />
        <add key="another/pretty-url" value="/another/real-file.html" />
        ... and so on ...
    </rewriteMap>
</rewriteMaps> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T19:55:25.210

另一种方法是通过拉`SCRIPT_NAME`而不是`REQUEST_URI`or `R:0`。它也会匹配 rewriteMap 键中的前导斜杠。我省略了高级和可选配置（​​clear、trackAllCaptures 等），以便为其他人提供更好的起点：

```
<rules>
    <rule name="Rewrite rule for CoolUrls">
      <match url=".*" />
      <conditions>
        <add input="{CoolUrls:{SCRIPT_NAME}}" pattern="(.+)" />
      </conditions>
      <action type="Rewrite" url="{C:1}" appendQueryString="true" />
    </rule>
</rules> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T20:32:09.273

这解决了问题： [https](https://stackoverflow.com/a/45555140/1967211) ://stackoverflow.com/a/45555140/1967211 需要使用 PATH_INFO 而不是 REQUEST_URI

# java - 如何使用模式/过滤器从目录中获取文件

> ID：13515150
> 
> 赞同：7
> 
> 时间：2012-11-22T14:47:46.020
> 
> 标签：java, regex, file, filter, directory

我必须从 PDF 文件目录中获取文件。我有一个问题，我没有一个字段来合并所有数据来查找文件。

**这是一个例子：**

文件名：

```
Comp_20120619_170310_2_632128_FC_A_8_23903.pdf 
```

文件名生成：

```
Comp_20120619_--------_2_632128_FC_A_8_23903.pdf 
```

我没有`"--------"`使文件完整名称的字段。

我正在尝试，`File.list`但找不到正确的文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T14:54:04.163

You can define a [FilenameFilter](http://docs.oracle.com/javase/6/docs/api/java/io/FilenameFilter.html) to match against the filenames, and return true if the filename matches what you're looking for.

```
 File dir = new File("/path/to/pdfs");
    File[] files = dir.listFiles(new FilenameFilter() {
        @Override
        public boolean accept(File dir, String name) {
            return name.matches("Comp_20120619_[^_]*_2_632128_FC_A_8_23903.pdf");
        }
    }); 
```

The `listFiles()` method returns an array of File objects. This makes sense, because there might be more than one file that matches the pattern (in theory at least, albeit not necessarily in your system).

I've used a regular expression to match the filename, using `[^_]*` to match the section you're not sure about. However, you can use any function that will return a boolean if the filename matches. For example, you could use `startsWith` and `endsWith` instead of a regular expression.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:52:43.357

你有什么问题`list()`？

```
File folder = new File("path/to/pdffilefolder");
String[] allFilesInThatFolder = folder.list();
// contains only files, no folders. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-07T06:13:00.813

希望它有效..

```
String[] pdfFiles= yourDir.listFiles(getFileNameFilterMachingWithFileName("Comp_20120619_"));

private FilenameFilter getFileNameFilterMachingWithFileName(final String 
fileNameStart) {
        return new FilenameFilter() {
            @Override
             public boolean accept(File dir, String name) {
               return (name.toUpperCase().startsWith(fileNameStart.toUpperCase()) && name.toUpperCase().endsWith(".PDF"));          
             }
        };
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-13T09:51:34.403

您可以使用 WildcardFileFilter (org.apache.commons.io.filefilter)

代码看起来很简单：

```
FilenameFilter filenameFilter = new WildcardFileFilter("Comp_20120619_*_2_632128_FC_A_8_23903.pdf");
String[] pdfFileNames = yourDir.list(filenameFilter);
if(pdfFileNames != null ) {
    for (String pdfName : pdfFileNames) 
```

# c# - 假设我有一个创建一组 WPF 控件的 C# 代码。我可以用一段 XAML + 实例化调用替换它吗？

> ID：13515155
> 
> 赞同：1
> 
> 时间：2012-11-22T14:47:56.877
> 
> 标签：c#, wpf, xaml, controls

我想也许是控制模板、数据模板、样式——但它们似乎都用于不同的东西。我对此很感兴趣，所以我可以使用 Blend 来设计控件组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:57:57.187

您可以使用 a[`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol%28v=vs.100%29.aspx)并将其绑定`ItemsSource`到包含要在控件中显示的数据的对象集合。然后您需要设置`ItemsControl`'s`ItemTemplate`以实际显示控件。

查看这个[WPF ItemsControl 示例](http://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:09:23.683

首先，您永远不需要在代码中创建 WPF 控件。除了窗口和对话框。现在我不明白你的问题，但正如 khillang 已经指出的那样，ItemsControl 是一种非常简单的方法来显示一些东西的列表。这可以是任何事情，这要归功于 WPF 非常灵活的内容显示方式。`DataTemplate`s 在其中发挥了重要作用，因为它或多或少地告诉 WPF“我有一个对象 XYZ，我希望 WPF 像这样显示它”。`ControlTemplate`s 相似，但与您的数据无关，而是它们定义了控件的外观，您想要一个仅是彩色矩形的按钮吗？ControlTemplate 是要走的路。简而言之，样式是用于在 WPF 控件上设置属性的预定义宏。

现在你问什么，或者更好地理解我的理解，最好用`ContentControl`and来完成`DataTemplate`。只需将 ContentControl 放置在您希望放置控件组的位置，然后使用分配给 ContentControls`ContentTemplate`属性的 DataTemplate 来定义控件组。

# prolog - 让订单进入谓词解析

> ID：13515161
> 
> 赞同：4
> 
> 时间：2012-11-22T14:48:20.000
> 
> 标签：prolog, clpfd

查看以下目标（我正在使用 swi-prolog 和 Markus Triska 的 clpfd）：

```
result(Input,Result) :-
    Input #> 10,
    Result=decline.
result(Input,Result) :-
    Input in 0..20,
    Result=offer. 
```

可能的查询如下所示：

```
?- result(15,B).
B = decline ;
B = offer. 
```

我想添加订单或某种解决方案优先级。如果“拒绝”是 的有效响应`Input=15`，则不应再考虑第二个目标，因此这只是`B=decline`一个解决方案，而不是`B=offer`。

我知道我可以添加一个`!/0`，但反过来就行不通了。给我这个谓词的所有可能答案。

考虑到这个例子，a`Result=offer`应该只适用于`Input 0..10`，否则应该触发更高的先前下降目标。

当我尝试考虑谓词中的顺序时，我是否认为过于迫切？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T16:46:35.000

这里有几个问题，让我们先从最明显的开始：

## 建模问题

你有一个关系（`result/2`可能不是最好的名字），这个关系应该模拟何时`decline`和何时`offer`应该是真的。在阅读你的程序之前，我更喜欢问 Prolog：

```
?- 结果（X，拒绝），结果（X，报价）。
X 在 11..20 ;
错误的。

```

因此，对于从 11 到 20 的值，您的关系是模棱两可的。如果您要做出决定，请先修复此关系。实际上，我会从

*   关系的更好名称，表明它是一个关系
*   没有命令式措辞（喜欢`Input`或命令式）
*   一个更紧凑的公式，您的程序中不需要这么多`(=)/2`目标。相反，你可以这样写：

```
heigth_decision（我，拒绝）：-
   我#< 10。

```

## CLP 中的答案和成功与解决方案

然后还有另一个更根本的问题。这实际上要严重得多，因为到目前为止给出的所有 SO 答案都完全忽略了这一方面。它是关于答案和成功的概念，另一方面是解决方案的概念。

当您在 Prolog 中提出查询时，您得到的就是**答案**。这样的答案可能包含解决方案，例如`L = [_,_]`包含无限多个解决方案的答案。或者一个答案可能只包含一个解决方案，例如`Decision = decline`. 但是，如果您使用诸如`library(clpfd)`.

您现在可以获得有限多个解决方案：

```
?- abs(X) #< 3。
X 在 -2..2。
```

或无限多：

```
?- X #> Y。
Y#=<X+ -1。
```

但是你也可以得到一个完全不同的解决方案，它看起来不像：

```
?- 2^X #= 1。
2^X#=1。

```

所以，重申一下：我们这里只有一个整数解，但是对于 Prolog 来说这太复杂了。我们得到的答案是：是的，这都是真的，只要[所有这些细则都是真的]。

更糟糕的是，有时我们得到的答案不包含任何解决方案。

```
?- X^X#=0。
X^X#=0。

```

如果 Prolog 足够聪明，它会回答`false`. 但它不可能总是那么聪明，仅仅因为你可以很容易地提出无法确定的问题。这样的答案有时被称为**不一致**。德国的概念**Scheinlösung** （〜假解决方案，但负面含义较少）更好地传达了这个想法。

所以一个答案可能包含解决方案，但有些答案根本不包含解决方案。因此，不能将目标的成功视为解决方案的存在！也就是说，所有建议某种提交为 (;)/2 – if-then-else、once/1 或 !/0 的 SO 答案都是不正确的，如果他们将成功作为解决方案。要看到这一点，请尝试：

```
?- X^X#=0，结果（X，下降）。
X 在 11..sup,
X^X#=0 ;
错误的。

?- X^X#=0，结果（X，报价）。
X 在 0..20，
X^X#=0。

```

那么你现在怎么能确定任何事情呢？

*   您可以依靠目标的失败。

*   您可以尝试`labeling/2`，但这仅适用于有限域。

*   您可以使用`call_residue_vars/2`and`copy_term/3`来确定是否存在“徘徊”的约束

*   不幸的是，您不能完全依赖 SWI 的顶层，它隐藏了与答案中的变量无关的约束。只有 SICStus 能正确显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:08:39.073

令我困惑的部分是当您说“反过来行不通”时。为什么你想反其道而行之？

这是确定性搜索的一个明显案例，在 Prolog 中执行此操作的方法是进行剪切。如果满足第一条规则，则不要保持其他分支打开。或者，您可以使您检查的范围互斥。

如果您不只是在胡闹，并且您正在尝试实施一些严肃的事情，我建议您阅读具有*优先级*和*远程反应*规则的规则。您应该能够找到构建在 Prolog 之上的框架，这些框架可用于解决您的问题，而无需重新发明轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:59:31.603

谓词顺序是 Prolog 程序的重要组成部分。这是因为证明搜索按照严格定义的顺序进行，应用[SLD 解析](http://en.wikipedia.org/wiki/SLD_resolution)。

您的谓词给出了合理的结果：

```
?- result(X,Y).
Y = decline,
X in 11..sup ;
Y = offer,
X in 0..20. 
```

您可以在调用它时使用一次/1，而不是削减结果/2，保留适当的定义以供一般使用。

```
?- once(result(X,Y)).
Y = decline,
X in 11..sup. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-28T22:07:46.210

来自建设性否定的一些想法在这里可能会有所帮助。

**理论**

有一种简单的方法可以进行逻辑切割。特别是对于约束，因为约束通常是否定完成的。因此，如果您有一个约束 C，您通常可以找到具有以下属性的约束 C'：

```
C' <=> ~C 
```

在如下两个子句中强加优先权：

```
p :- C, q.
p :- r 
```

只需执行以下操作：

```
p :- C, q.
p :- C', r. 
```

如果您的约束求解器提供了一个具体的否定，例如`(#\)/1` 您甚至可以为此定义一个运算符：

```
:- op(1050,xfy,#?).
:- op(1100,xfy,#:).
(A #? B #: C) :- (A, B); (#\ A, C). 
```

然后写下以下内容：

```
p :- C #? q #: r. 
```

让我们将此策略应用于您的示例：

**例子**

您的代码当前如下所示：

```
result(Input, Result) :-
    Input #> 10,
    Result = decline.
result(Input, Result) :-
    Input in 0..20,
    Result = offer. 
```

然后执行以下操作：

```
result(Input, Result) :-
    Input #> 10,
    Result = decline.
result(Input, Result) :-
    Input #=< 10, Input in 0..20,
    Result = offer. 
```

这是一个示例运行：

```
?- result(15, X).
X = decline ;
false.

?- result(8, X).
X = offer. 
```

现在使用`(#?)/2`which 例如可以在 SWI-Prolog 中使用，因为那里的 CLP(FD) 库支持具体化。假设我们已经查阅了 CLP(FD) 库，然后定义`(#:)/2`如上：

```
 result(Input, Result) :-
    Input #> 10 
    #? 
       Result = decline 
    #: 
       Input in 0..20,
       Result = offer. 
```

这是一个示例运行：

```
?- result(15, X).
X = decline ;
false.

?- result(8, X).
X = offer. 
```

**免责声明**

`(#?)/2`and的后面语法`(#:)/2`受到 Java if-then-else 运算符`(?)/2`和`(:)/2`. 因为我们不能覆盖或扩展定义，所以不可能有更受 Prolog 启发的语法`(;)/2`。

有关具体化的更多信息，请参见[此处](http://www.swi-prolog.org/man/clpfd.html)的A.8.4 部分具体化。我们没有做的是具体化我们定义的 CLP(FD) if-then-else 中的合取和析取，因为 then 和 else 部分可能包含其他目标，然后是 CLP(FD) 约束。

再见

# android - ISO 8601 中的 Android 时间

> ID：13515168
> 
> 赞同：15
> 
> 时间：2012-11-22T14:48:40.437
> 
> 标签：android, timezone, jodatime, iso8601

使用 android 和 joda time lib - 我正在尝试转换用户的时区，以便稍后将其格式化为：例如 2012-11-12T21:45:00+02:00。

```
DateTimeZone zone = DateTimeZone.forID( TimeZone.getDefault().getID()); 
```

上面的代码失败了 - 任何人都知道如何获取“Europe/London”（Timezone.getID）并将其转换为偏移量，以便我可以将其放入 ISO 8601 格式？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-22T18:36:35.540

如果我正确理解了您的目标，您可以直接使用该`SimpleDateFormat`课程。

示例代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ", Locale.UK);
String formattedDate = sdf.format(new Date()); 
```

[您可以在SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)中查看文档

问候。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-23T18:54:59.537

API 级别 26 增加了对来自 Java 的许多时间和日期类的支持。所以这个解决方案现在也可以应用： [https ://stackoverflow.com/a/25618897/3316651](https://stackoverflow.com/a/25618897/3316651)

```
// works with Instant
Instant instant = Instant.now();
System.out.println(instant.format(DateTimeFormatter.ISO_INSTANT));

// works with ZonedDateTime 
ZonedDateTime zdt = ZonedDateTime.now();
System.out.println(zdt.format(DateTimeFormatter.ISO_INSTANT));

// example output
2014-09-02T08:05:23.653Z 
```

归功于乔达斯蒂芬。

安卓文档： [https ://developer.android.com/reference/java/time/format/DateTimeFormatter.html#ISO_INSTANT](https://developer.android.com/reference/java/time/format/DateTimeFormatter.html#ISO_INSTANT)

# scala - Scala 视图应用程序谜题

> ID：13515169
> 
> 赞同：13
> 
> 时间：2012-11-22T14:48:46.877
> 
> 标签：scala, types, implicits

假设我们有以下两个特征：

```
trait Foo[A] { def howMany(xs: List[A]) = xs.size }
trait Bar 
```

以及从第二个到第一个的隐式转换：

```
implicit def bar2foo[A](bar: Bar) = new Foo[A] {} 
```

我们创建一个`Bar`和一个整数列表：

```
val bar = new Bar {}
val stuff = List(1, 2, 3) 
```

现在我希望以下工作：

```
bar howMany stuff 
```

但它没有：

```
scala> bar howMany stuff
<console>:13: error: type mismatch;
 found   : List[Int]
 required: List[A]
              bar howMany stuff
                          ^ 
```

所以我们去[规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，它有这样的说法（粗体强调的是我的）：

> 视图适用于三种情况。
> 
> 1.  [这里不相关。]
>     
>     
> 2.  在类型为*T*的*e*选择*em*中，**如果选择器*****m*****不表示*****T***的成员。在这种情况下，搜索适用于*e*并且其结果包含名为*m的成员的视图**v*。搜索与隐式参数的情况一样进行，其中隐式范围是*T*之一。如果找到这样的视图，则将选择*em*转换为*v(e).m*。
>     
>     
> ****   在类型为*T*的*e*的选择*em(args)*中，**如果选择器*****m*****表示 T 的某些成员*****，*****但这些成员都不适用于参数*****args***。在这种情况下，搜索适用于*e*并且其结果包含 适用于*args的方法**m的视图**v*。搜索与隐式参数的情况一样进行，其中隐式范围是*T*之一。如果找到这样的视图，则选择*em*将转换为 *v(e).m(args)*。***

 ***所以我们尝试以下方法，认为它一定太荒谬了：

```
trait Foo[A] { def howMany(xs: List[A]) = xs.size }
trait Bar { def howMany = throw new Exception("I don't do anything!") }

implicit def bar2foo[A](bar: Bar) = new Foo[A] {}

val bar = new Bar {}
val stuff = List(1, 2, 3) 
```

但它确实（至少在 2.9.2 和 2.10.0-RC2 上）：

```
scala> bar howMany stuff
res0: Int = 3 
```

这会导致一些非常奇怪的行为，例如在这个[问题的](https://stackoverflow.com/q/13507202/334519)[解决方法](https://gist.github.com/4131492)中。

我有三个（密切相关的）问题：

1.  是否有一种直接的方法（即，不涉及添加具有适当名称的假方法）在上述原始案例中正确应用视图？
2.  有人可以提供解释这种行为的规范吗？
3.  假设这是预期的行为，它是否有任何意义？

我也很感谢以前讨论过这个问题的任何链接——我对谷歌的运气并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:07:55.360

这似乎是一个错误，所以我的答案是：

1.  搜索针对 Scala 编译器报告的类似错误，如果未找到，请报告新错误[https://issues.scala-lang.org/](https://issues.scala-lang.org/)
2.  在这种情况下，规范的那部分似乎并不重要，因为它没有谈论类型推断
3.  对我没有任何意义

PS。在 2.8.1 中，将虚拟方法添加到 Bar 的解决方法不会使其编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:26:46.587

供大家参考，这只能是一个错误。您知道的方式是错误消息：

```
<console>:13: error: type mismatch;
 found   : List[Int]
 required: List[A] 
```

List[A] 不是真正的类型 - 它是 List 应用于它自己的类型参数。这不是一种可以被要求的类型，因为它不是一种可以表达的类型。

[编辑——太早了，谁知道我在说什么。忽略以上内容，但您仍然可以点击链接。]

相关票证是[https://issues.scala-lang.org/browse/SI-6472](https://issues.scala-lang.org/browse/SI-6472)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:32:02.800

用这个替换你的 Foo：

`trait Foo[_] { def howMany(xs: List[_]) = xs.size }`

它有效，这对我来说也更有意义，因为你对 A 绝对不感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T16:10:44.160

您的隐式转换似乎完全按照您告诉它的方式进行。

```
implicit def bar2foo[A](bar: Bar) = new Foo[A] {} 
```

将 Bar 转换为新`Foo[A]`对象。所以反过来

```
scala> bar howMany stuff
<console>:13: error: type mismatch;
 found   : List[Int]
 required: List[A]
              bar howMany stuff 
```

它寻找“A”类型。

为了使这项工作按照您想要的方式进行（我认为），您可以在函数上执行它，而不是定义特征的视图。

```
trait Foo { def howMany[A](xs: List[A]) = xs.size }
trait Bar
implicit def bar2foo[A](bar: Bar) = new Foo{}
val bar = new Bar {}
val stuff = List(1, 2, 3) 
```

那么它应该会给你你想要的结果。

```
scala> bar howMany stuff
res0: Int = 3 
```

或者您可以在隐式函数上定义视图

```
trait Foo[A] { def howMany(xs: List[A]) = xs.size }
trait Bar

implicit def bar2foo[A](bar: Bar) = new Foo[Int] {}

val bar = new Bar {}
val stuff = List(1, 2, 3) 
```

我个人认为在函数上定义它更干净。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T20:50:26.640

这虽然丑陋，但似乎有效：

```
(bar: Foo[Int]) howMany stuff 
```***

# android - 自 4.2 起获得首选 apn 失败

> ID：13515175
> 
> 赞同：2
> 
> 时间：2012-11-22T14:49:04.743
> 
> 标签：android, security, proxy

我在oder中使用以下代码来获取设备的首选apn：

```
DefaultHttpClient http = new DefaultHttpClient();
Cursor mCursor = ctx.getContentResolver().query(Uri.parse("content://telephony/carriers/preferapn"), new String[] { "name", "proxy", "port"},null, null, null); 
```

如果设置了代理，我会修改我的 webrequest

```
if (mCursor != null) {
            try {
                if (mCursor.moveToFirst()) {
                    // String name = mCursor.getString(0);
                    String proxy = mCursor.getString(1);
                    String port = mCursor.getString(2);
                    if (proxy != null) {
                        if (!proxy.equals("")) {
                            HttpHost proxys = new HttpHost(proxy, Integer.parseInt(port));
                            http.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxys);
                        }
                    }

                }
            } finally {
                try {
                    mCursor.close();
                } catch (Exception e) {
                    mCursor = null;
                }
                mCursor = null;
            }
        } 
```

自 Android 4.2 以来，代码由于安全异常而失败，非进程的用户都没有权限 WRITE_APN_SETTINGS。我添加了，但没有任何效果。有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:13:39.903

> WRITE_APN_SETTINGS

现在是系统级权限：

[“冰淇淋三明治”和 WRITE_APN_SETTINGS](https://stackoverflow.com/questions/8714964/ice-cream-sandwich-and-write-apn-settings)

看来您需要将您的应用程序设置为系统应用程序才能使用 APN 设置，这需要有根手机。

# c# - 将属性扩展到依赖属性

> ID：13515176
> 
> 赞同：0
> 
> 时间：2012-11-22T14:49:05.100
> 
> 标签：c#, wpf, user-interface, properties, dependency-properties

我有一个包含我的逻辑的库项目，我不希望它依赖于 WPF，问题是：

**有没有办法将属性扩展为依赖属性？**还是我真的必须重写我**所有**的属性和变量？！这听起来很牵强和超现实，但我认为可能是这样，所以我把它留给你们，因为谷歌甚至不明白我想要什么（不相关的结果）。

*顺便说一句，我在一段时间内读到并听说 WPF 的一个主要概念是将 UI 与逻辑分开，但它迫使您将属性（逻辑）设置为依赖项属性（UI）。这有点荒谬，不是吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:57:45.377

好吧，WPF 可以使您的模型对象的绑定工作开箱即用（有一些限制）。检查[此链接](http://10rem.net/blog/2010/12/17/puff-the-magic-poco-binding-and-inotifypropertychanged-in-wpf)。但是，正如链接所指出的，这可能会影响您的应用程序的内存消耗。

话虽如此，模型对象的属性不需要是要在 WPF 绑定系统中使用的依赖项属性。他们只需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，它在 System 程序集的 System.ComponentModel 命名空间中定义。这将需要对对象中的属性声明进行一些更改。

做一些关于 MVVM 模式和 INotifyPropertyChanged 接口的研究。以下是一些帮助您入门的链接： [链接](http://msdn.microsoft.com/en-us/library/ms743695.aspx) [链接](http://10rem.net/blog/2010/12/16/strategies-for-improving-inotifypropertychanged-in-wpf-and-silverlight) [链接](http://japikse.blogspot.com.br/2009/07/inotifypropertychanged-and-wpf.html) [链接](http://blogs.msdn.com/b/wpfsdk/archive/2006/10/19/wpf-basic-data-binding-faq.aspx)

# html - 获取基础 SharePoint HTML

> ID：13515177
> 
> 赞同：1
> 
> 时间：2012-11-22T14:49:07.463
> 
> 标签：html, sharepoint

是否有一种简单/快速的方法来导出 SharePoint 网站中的所有基础 HTML？

我知道这对于给定的页面很容易，但我正在寻找一种方法来获取所有页面的 HTML。

有没有涉及`wget`这里的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:21:58.797

您可以使用手动放入其中的固定页面列表运行 WEB 爬虫（dir > file.txt）。这将为您提供这些页面的轮回。

# php - Symfony2实体字段

> ID：13515178
> 
> 赞同：1
> 
> 时间：2012-11-22T14:49:10.657
> 
> 标签：php, doctrine-orm, entity, symfony-2.1

我用 Symfony2 开发了一个应用程序，但我遇到了问题。

我有用户实体类，在这个类中我有：

```
/**
* @ORM\OneToOne(targetEntity="UserProperty", mappedBy="user")
*/
protected $properties; 
```

和

```
/**
 * Add properties
 *
 * @param Flashwand\UserBundle\Entity\UserProperty $property
 * @return User
 */
public function addProperties(\Warski\Flashwand\UserBundle\Entity\UserProperty $property)
{
    $this->properties[] = $property;

    return $this;
}

/**
 * Remove properties
 *
 * @param Flashwand\UserBundle\Entity\UserProperty $propertie
 */
public function removeProperties(\Warski\Flashwand\UserBundle\Entity\UserProperty $property)
{
    $this->properties->removeElement($property);
}

/**
 * Get properties
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getProperties()
{
    return $this->properties;
} 
```

在 UserProperty 类中，我有：

```
/**
 * @ORM\Id
 * @ORM\OneToOne(targetEntity="User", inversedBy="properties")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $user;

/**
 * @ORM\Column(name="phone", type="string", length=55, nullable=true)
 */
protected $phone = null;

/**
 * @ORM\Column(name="fax", type="string", length=55, nullable=true)
 */
protected $fax = null;

/**
 * @ORM\Column(name="company", type="string", length=150, nullable=true)
 */
protected $company = null;

/**
 * @ORM\Column(name="job_description", type="string", length=255, nullable=true)
 */
protected $job_description = null; 
```

现在，我正在尝试使用来自 UserProperty 的用户名、电子邮件、密码和公司名称来构建注册表单。

当用户填写字段时，我想创建新的用户和属性。

我的表单生成器如下所示：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('email', 'email', array(
        'label' => 'Email',
        'label_attr' => array('class' => 'control-label')
    ));
    $builder->add('password', 'repeated', array(
        'type' => 'password',
        'invalid_message' => 'Password don\'t match.',
        'first_options'  => array(
            'label' => 'Password', 
            'label_attr' => array('class' => 'control-label')
        ),
        'second_options' => array(
            'label' => 'Retype password', 
            'label_attr' => array('class' => 'control-label')
        ),
    ));
    $builder->add('firstname', 'text', array(
        'label' => 'Firstname',
        'label_attr' => array('class' => 'control-label')
    ));
    $builder->add('lastname', 'text', array(
        'label' => 'Lastname',
        'label_attr' => array('class' => 'control-label')
    ));
    $builder->add('email', 'email', array(
        'label' => 'Email',
        'label_attr' => array('class' => 'control-label')
    ));
    $builder->add('properties', 'entity', array(
        'class' => 'FlashwandUserBundle:UserProperty',
        'property' => 'company',
        'multiple' => false,
        'expanded' => false,
        'label' => 'Company',
        'label_attr' => array('class' => 'control-label')
    ));
} 
```

我想创建像文本一样的字段“公司”，而不是选择或单选按钮。我可以这样做吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:00:36.987

您是否应该创建[自定义表单字段类型](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)

比如：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class PropertiesType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
                ->add('company')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Flashwand\UserBundle\Entity\UserProperty',
        ));
    }

    public function getName()
    {
        return 'properties';
    }

} 
```

并更改您的表单生成器

```
$builder->add('properties', new PropertiesType(), array(
    'label' => 'Company',
    'label_attr' => array('class' => 'control-label')
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:42:30.830

我认为您可以为此使用[property_path](http://symfony.com/doc/current/reference/forms/types/form.html#property-path)。顺便说一句，我看到您在 OneToOne 关系中犯了一些错误。如果这是 OneToOne 为什么 user.properties 是集合/数组，而用户实体有 addProperty/removeProperty 方法？[在这里](https://gist.github.com/63468c95bd1182725c22)，我为您准备了一些小例子，我将如何解决这个问题（要点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:41:46.897

只需查看 Data Transformers [http://symfony.com/doc/2.0/cookbook/form/data_transformers.html](http://symfony.com/doc/2.0/cookbook/form/data_transformers.html)在此场景中，他们通过字符串（在您的情况下为公司名称）接收内容，但当然不是抛出错误您也可以创建一个实体。

# webgl - Three.js - 先渲染到 renderTarget 然后再渲染到屏幕会导致白屏

> ID：13515184
> 
> 赞同：2
> 
> 时间：2012-11-22T14:49:33.293
> 
> 标签：webgl, three.js

在我当前的项目中，我想在一个渲染过程中使用多个着色器。我认为这可以通过仅将最后一次传递到屏幕并将所有先前传递到 renderTarget 然后将此 renderTarget 作为纹理传递给下一个着色器来实现。

在我的情况下，问题似乎出在以下代码中的渲染循环中：

```
// something is going wrong here:    
viewer.renderer.render(viewer.scene, viewer.camera, viewer.renderTarget);

viewer.uniforms.tDiffuse.value = viewer.renderTarget;
viewer.uniforms.fragmentShader = viewer.fragment2;

viewer.renderer.render(viewer.scene, viewer.camera); 
```

为了让事情更清楚，我建立了这个片段

```
var viewer = {
    width: 512,
    height: 512
};

initViewer = function() {
    viewer.vertex     = $('#vertexShader').text();
    viewer.fragment1  = $('#fragmentShader1').text();
    viewer.fragment2  = $('#fragmentShader2').text();    

    viewer.camera = new THREE.OrthographicCamera(viewer.width / -2, viewer.width / 2, viewer.height / 2, viewer.height / -2, -1000, 1000);

    viewer.camera.position.z = 100;

    viewer.renderer = new THREE.WebGLRenderer();
    viewer.scene = new THREE.Scene();

    viewer.uniforms = {
        alpha: {
            type: 'f',
            value: '1.0'
        }, tDiffuse: {
            type: 't',
            value: ''
        }
    };

    viewer.initialMaterial = new THREE.ShaderMaterial({
        uniforms: viewer.uniforms,
        vertexShader: viewer.vertex,
        fragmentShader: viewer.fragment1
    });

    viewer.plane = new THREE.Mesh(new THREE.PlaneGeometry(viewer.width, viewer.height), viewer.initialMaterial);

    viewer.scene.add(viewer.plane);

    $('body').append(viewer.renderer.domElement);

    viewer.renderTarget = new THREE.WebGLRenderTarget( 512, 512 );

    render();
};

render = function() {

    // commenting out the next line makes everything work
    viewer.renderer.render(viewer.scene, viewer.camera, viewer.renderTarget);

    viewer.uniforms.tDiffuse.value = viewer.renderTarget;
    viewer.uniforms.fragmentShader = viewer.fragment2;

    viewer.renderer.render(viewer.scene, viewer.camera);

    requestAnimationFrame(render);
};

initViewer();
```

```
canvas 
{
    border: 1px solid lime;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script id="vertexShader" type="x-shader/x-vertex">

precision mediump float;

varying vec2 v_texCoord;
varying vec4 vertexPosition;

void main()
{
    v_texCoord = uv;
    vec3 p = position;
    vec4 mvPosition = modelViewMatrix * vec4(p, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
    vertexPosition = gl_Position;
}
</script>

<script id="fragmentShader1" type="x-shader/x-fragment">

precision mediump float;

void main()
{
    gl_FragColor = vec4(1.0, 0.0, 0.0, 0.2);
}
</script>

<script id="fragmentShader2" type="x-shader/x-fragment">

precision mediump float;
uniform sampler2D tDiffuse;
varying vec2 v_texCoord;

void main()
{
    gl_FragColor = texture2D( tDiffuse, v_texCoord) * vec4(0.0, 1.0, 1.0, 0.2);
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/91/three.min.js"></script>
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:44:20.820

通过从块中构建我需要的着色器来解决它（像这样：[https](https://github.com/mrdoob/three.js/blob/r50/src/renderers/WebGLShaders.js) ://github.com/mrdoob/three.js/blob/r50/src/renderers/WebGLShaders.js ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:24:52.177

最简单的方法：将所有通道渲染到单独的纹理，然后将它们应用到将它们与着色器混合[的全屏四边形](https://stackoverflow.com/questions/2588875/whats-the-best-way-to-draw-a-fullscreen-quad-in-opengl-3-2)。或者在单独的全屏四边形上并设置[混合](http://www.opengl.org/wiki/Blending)添加。您也可以仅使用具有不同着色方法的相同对象的混合和乘法渲染（[阅读此内容](http://www.opengl.org/archives/resources/faq/technical/transparency.htm)），如果您只需要简单的合成，它将为您节省 GPU 内存和[纹理填充率。](http://www.gpureview.com/texture-fill-rate-article-375.html)

# typescript - “statsTemplate: (params: any) => string;”是什么意思？方法？

> ID：13515188
> 
> 赞同：1
> 
> 时间：2012-11-22T14:49:46.340
> 
> 标签：typescript

我从 Typescript 开始，发现文档无法处理的语法：

```
statsTemplate: (params: any) => string; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:05:26.680

总体而言，该语句定义了所谓的“函数类型文字”（第 3.5.5 节*函数类型文字*）：

> 函数类型字面量定义了包含单个调用签名的对象类型。
> 
> `FunctionType: ( ParameterListopt ) => ReturnType`

换句话说，在这里您定义了一个名为`statsTemplate`（显然）表示返回类型值的函数的`string`类型 - 并采用任何类型的单个参数......这实际上是 TypeScript 中的一种特殊类型（第 3.1 节*“任何类型”*）：

> 该`Any`类型用于表示任何 JavaScript 值。类型的值 `Any`支持与 JavaScript 中的值相同的操作，并且不对 Any 值的操作执行静态类型检查。具体来说，可以通过`Any` 值访问任何名称的属性，并且`Any`可以将值作为具有任何参数列表的函数或构造函数来调用。

如您所见，它实际上在文档 ( [**PDF**](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf) ) 中有很好的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:25:15.127

有时通过实现一个类型更容易解释它：

```
var statsTemplate = function(params: any) : string {
    return 'Hello World';
}; 
```

这是以下实现：

```
(params: any) => string; 
```

# c# - 实体框架 5 - 为什么在 PropertyValue 设置回原始后实体状态“已修改”

> ID：13515190
> 
> 赞同：10
> 
> 时间：2012-11-22T14:49:56.943
> 
> 标签：c#, entity-framework

我使用 EF5 并且不知道为什么在我将此实体的唯一更改的 PropertyValue 设置回原始值后，该实体的状态为“已修改”。

```
using (TestDbContext context = new TestDbContext())
        {
            string name = context.Person.First().Name;

            // count is 0
            int count = context.ChangeTracker.Entries().Count(e => e.State == EntityState.Modified);

            // Change Value
            context.Person.First().Name = "Test";

            // count is 1 
            count = context.ChangeTracker.Entries().Count(e => e.State == EntityState.Modified);

            // Revert Value
            context.Person.First().Name = name;

            context.ChangeTracker.DetectChanges();

            // count is 1 
            count = context.ChangeTracker.Entries().Count(e => e.State == EntityState.Modified);
        } 
```

为什么？:(

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T14:55:25.960

因为实体框架只跟踪数据是否被修改，而不是与原始内容不同。

当实体未更改时，我们使用一种漂亮的方法将状态重置为未修改：

```
 public static void CheckIfModified(EntityObject entity, ObjectContext context)
    {
        if (entity.EntityState == EntityState.Modified)
        {
            ObjectStateEntry state = context.ObjectStateManager.GetObjectStateEntry(entity);
            DbDataRecord orig = state.OriginalValues;
            CurrentValueRecord curr = state.CurrentValues;

            bool changed = false;
            for (int i = 0; i < orig.FieldCount && !changed; ++i)
            {
                object origValue = orig.GetValue(i);
                object curValue = curr.GetValue(i);
                if (!origValue.Equals(curValue) && (!(origValue is byte[]) || !((byte[])origValue).SequenceEqual((byte[])curValue)))
                {
                    changed = true;
                }
            }

            if (!changed)
            {
                state.ChangeState(EntityState.Unchanged);
            }
        }
    } 
```

请注意，此方法适用于 EF 4.0，不适用于带有 DbContext 的较新版本。但是重写它以使用 EF 4.1+ 是没有问题的，我自己已经这样做了，但我现在找不到代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T15:29:57.783

谢谢提示:)

这是我的 EF5 (DbContext) 解决方案。我为从 ChangeTracker.Entries() 获得的每个 DbEnityEntry 调用此方法

```
 private void CheckIfDifferent(DbEntityEntry entry)
    {
        if (entry.State != EntityState.Modified) 
            return;

        if (entry.OriginalValues.PropertyNames.Any(propertyName => !entry.OriginalValues[propertyName].Equals(entry.CurrentValues[propertyName])))
            return;

       (this.dbContext as IObjectContextAdapter).ObjectContext.ObjectStateManager.GetObjectStateEntry(entry.Entity).ChangeState(EntityState.Unchanged);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-14T18:09:01.387

基于 User1481065 的答案，如果任何一个`OriginalValues`为空，则克服异常的可能性，请尝试以下操作。我假设一个上下文可能包含多个可能有更新的实体（可能不一定是价值的实际变化）。

```
_dirty = False
Dim oChanges As IEnumerable(Of DbEntityEntry(Of CsSetting)) = _dbContext.ChangeTracker.Entries(Of CsSetting)().Where(Function(r) r.State <> EntityState.Unchanged)
For Each c As DbEntityEntry(Of CsSetting) In oChanges
    _dirty = c.OriginalValues.PropertyNames.Any(Function(n) (c.OriginalValues(n) Is Nothing And c.CurrentValues(n) IsNot Nothing) OrElse (c.OriginalValues(n) IsNot Nothing AndAlso Not c.OriginalValues(n).Equals(c.CurrentValues(n))))
    If _dirty Then Exit For
Next c
Return _dirty 
```

您可能不需要循环，因此不需要`_dirty`.

# java - Android 权限保护级别 18 和 50

> ID：13515197
> 
> 赞同：9
> 
> 时间：2012-11-22T14:50:25.007
> 
> 标签：java, android

当我转储 Nexus 7 上所有应用程序的所有权限时，我（如预期）获得保护级别为 0（正常）、1（危险）、2（签名）的权限。没有任何记录低于 3 (SIGNATURE_OR_SYSTEM)*。

但也有很多权限的保护级别设置为“18”，有些权限设置为“50”。

我找不到任何关于这些值代表什么的文档。有人知道吗？

*它没有记录 3 以下的任何内容。

这些是记录的内容：

```
android.permission.ACCESS_CACHE_FILESYSTEM - 18
android.permission.ACCESS_CHECKIN_PROPERTIES - 18
android.permission.ACCESS_DOWNLOAD_MANAGER - 18
android.permission.ACCESS_DOWNLOAD_MANAGER_ADVANCED - 18
android.permission.ACCESS_MTP - 18
android.permission.ALLOW_ANY_CODEC_FOR_PLAYBACK - 18
android.permission.BACKUP - 18
android.permission.BIND_APPWIDGET - 18
android.permission.BIND_DIRECTORY_SEARCH - 18
android.permission.BIND_KEYGUARD_APPWIDGET - 18
android.permission.BIND_REMOTEVIEWS - 18
android.permission.BIND_WALLPAPER - 18
android.permission.CALL_PRIVILEGED - 18
android.permission.CHANGE_COMPONENT_ENABLED_STATE - 18
android.permission.CHANGE_CONFIGURATION - 18
android.permission.CONNECTIVITY_INTERNAL - 18
android.permission.CONTROL_LOCATION_UPDATES - 18
android.permission.CRYPT_KEEPER - 18
android.permission.DELETE_CACHE_FILES - 18
android.permission.DELETE_PACKAGES - 18
android.permission.DOWNLOAD_CACHE_NON_PURGEABLE - 18
android.permission.GLOBAL_SEARCH - 18
android.permission.INSTALL_LOCATION_PROVIDER - 18
android.permission.INSTALL_PACKAGES - 18
android.permission.MANAGE_USB - 18
android.permission.MANAGE_USERS - 18
android.permission.MASTER_CLEAR - 18
android.permission.MODIFY_APPWIDGET_BIND_PERMISSIONS - 18
android.permission.MODIFY_NETWORK_ACCOUNTING - 18
android.permission.MODIFY_PHONE_STATE - 18
android.permission.MOUNT_FORMAT_FILESYSTEMS - 18
android.permission.MOUNT_UNMOUNT_FILESYSTEMS - 18
android.permission.MOVE_PACKAGE - 18
android.permission.PACKAGE_USAGE_STATS - 18
android.permission.PACKAGE_VERIFICATION_AGENT - 18
android.permission.PERFORM_CDMA_PROVISIONING - 18
android.permission.READ_FRAME_BUFFER - 18
android.permission.READ_NETWORK_USAGE_HISTORY - 18
android.permission.READ_PRIVILEGED_PHONE_STATE - 18
android.permission.REBOOT - 18
android.permission.RECEIVE_DATA_ACTIVITY_CHANGE - 18
android.permission.RECEIVE_EMERGENCY_BROADCAST - 18
android.permission.RETRIEVE_WINDOW_CONTENT - 18
android.permission.SEND_SMS_NO_CONFIRMATION - 18
android.permission.SERIAL_PORT - 18
android.permission.SET_TIME - 18
android.permission.SET_WALLPAPER_COMPONENT - 18
android.permission.SHUTDOWN - 18
android.permission.STATUS_BAR - 18
android.permission.STOP_APP_SWITCHES - 18
android.permission.UPDATE_DEVICE_STATS - 18
android.permission.UPDATE_LOCK - 18
android.permission.WRITE_APN_SETTINGS - 18
android.permission.WRITE_GSERVICES - 18
android.permission.WRITE_MEDIA_STORAGE - 18
com.android.chrome.TOS_ACKED - 18
com.android.launcher.permission.PRELOAD_WORKSPACE - 18
com.android.vending.TOS_ACKED - 18
com.android.vending.billing.ADD_CREDIT_CARD - 18
com.android.vending.billing.BILLING_ACCOUNT_SERVICE - 18
com.google.android.c2dm.permission.SEND - 18
com.google.android.gallery3d.permission.GALLERY_PROVIDER - 18
com.google.android.gtalkservice.permission.SEND_HEARTBEAT - 18
com.google.android.partnersetup.permission.UPDATE_CLIENT_ID - 18
com.google.android.permission.BROADCAST_DATA_MESSAGE - 18
com.google.android.providers.gsf.permission.WRITE_GSERVICES - 18
com.google.android.xmpp.permission.BROADCAST - 18
com.google.android.xmpp.permission.XMPP_ENDPOINT_BROADCAST - 18

android.permission.CHANGE_CONFIGURATION - 50
android.permission.DUMP - 50
android.permission.INTERACT_ACROSS_USERS - 50
android.permission.READ_LOGS - 50
android.permission.SET_ALWAYS_FINISH - 50
android.permission.SET_ANIMATION_SCALE - 50
android.permission.SET_DEBUG_APP - 50
android.permission.SET_PROCESS_LIMIT - 50
android.permission.SIGNAL_PERSISTENT_PROCESSES - 50
android.permission.WRITE_SECURE_SETTINGS - 50 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T08:46:38.637

刚刚看到一个古老的未回答的问题。尽管您可能已经得到答案，但无论如何我都会回答。它可能会帮助其他人。:)

> 还有很多权限的保护级别设置为“18”，有些权限设置为“50”。

以下代码是从 Android Source 中的 PermissionInfo.java 中检索到的：

```
/**
 * Additional flag for {@link #protectionLevel}, corresponding
 * to the <code>system</code> value of
 * {@link android.R.attr#protectionLevel}.
 */
public static final int PROTECTION_FLAG_SYSTEM = 0x10;

/**
 * Additional flag for {@link #protectionLevel}, corresponding
 * to the <code>development</code> value of
 * {@link android.R.attr#protectionLevel}.
 */
public static final int PROTECTION_FLAG_DEVELOPMENT = 0x20; 
```

因此，如果有签名/系统权限，则级别将为 18(0x10 | 0x2)。如果权限用于特殊开发工具，则为 50(0x10 | 0x20 | 0x2)。

> 我找不到任何关于这些值代表什么的文档。有人知道吗？

正如我[在现有问题中回答的那样](https://stackoverflow.com/a/14887969/1365960)`frameworks/base/core/res/AndroidManifest.xml`，您可以在和中检查保护级别和这些权限的描述`frameworks/base/data/etc/platform.xml`。我在这里发布了一些供您参考。

```
<!-- Configure an application for debugging. -->
<permission android:name="android.permission.SET_DEBUG_APP"
    android:permissionGroup="android.permission-group.DEVELOPMENT_TOOLS"
    android:protectionLevel="signature|system|development"
    android:label="@string/permlab_setDebugApp"
    android:description="@string/permdesc_setDebugApp" />

<!-- @hide Package verifier needs to have this permission before the PackageManager will
     trust it to verify packages.
-->
<permission android:name="android.permission.PACKAGE_VERIFICATION_AGENT"
    android:label="@string/permlab_packageVerificationAgent"
    android:description="@string/permdesc_packageVerificationAgent"
    android:protectionLevel="signature|system" /> 
```

如果该 xml 块上有`@hide`注释，则您无法从文档中找到有关此权限的任何资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-25T02:24:55.593

构成您所指的开发权限 0x20 是 Google 引入的一组权限，用于在 Android 开发期间使用，并且它们永远不会被`PackageManager`自动授予。为了能够使用它们，您必须授予 using `adb shell pm grant permission`。

[您可以看到执行此操作的代码以及 Google 在02/21/2012 提交](https://android.googlesource.com/platform/frameworks/base/+/e639da7baa23121e35aa06d6e182558e0e755696%5E!/)中引入的更改。

# java - Android：多选对话框为数组中的元素分配名称

> ID：13515199
> 
> 赞同：1
> 
> 时间：2012-11-22T14:50:28.753
> 
> 标签：java, android, arrays

* * *

我正在将我的多选复选框对话框转换为来自公共属性和公共类（所以我可以从任何地方拉它）。

但是，通常当我在课堂上做某事时，我可以使用whatever.ID 和whatever.Name，我猜只是一个普通的多维数组。但是在这种情况下我无法弄清楚语法。

这是我的自定义类：

```
package com.directenquiries.assessment.tool.Globals;

public class clsNameID {
    public String Name;
    public String ID;

} 
```

这是创建数组的内容：

```
public static List<clsNameID> assetHelperTypes(){
    Log.e("Asset Helper Types:", "Started");
    clsNameID AssetDetails = null;
    List<clsNameID> mHelperNames = new ArrayList<clsNameID>();
    File dbfile = new File(Global.currentDBfull); 

    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
    Cursor f = db.rawQuery("select * from assetobservationtypes", null);  
    Log.e("Asset Helper Types:", "Cursor run");

    if(f.getCount() > 0) {
        f.moveToFirst();
           while(!f.isAfterLast()) {
               AssetDetails     = new clsNameID();
               AssetDetails.ID = f.getString(f.getColumnIndex("AssetObsID"));
               AssetDetails.Name = f.getString(f.getColumnIndex("Observation"));
               mHelperNames.add(AssetDetails);
               Log.e("Found Item:", AssetDetails.Name);
                f.moveToNext();
           }
    }

    f.close();

    return mHelperNames;
} 
```

这是我尝试使用数组的地方：

```
public void addCondition(View view){

          List<clsNameID> mHelperNames = DBFunctions.assetHelperTypes();

            final List<Integer> mSelectedItems = new ArrayList<Integer>();

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("My Title")
                    .setMultiChoiceItems(mHelperNames.toArray(new CharSequence[mHelperNames.size()]), null,
                            new DialogInterface.OnMultiChoiceClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which, boolean isChecked) {
                                    if (isChecked) {

                                        mSelectedItems.add(which);
                                    } else if (mSelectedItems.contains(which)) {

                                        mSelectedItems.remove(Integer
                                                .valueOf(which));
                                    }   
                                }
                            })

   .setPositiveButton("Save", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                        //Create onlcick method
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                        //Create onlcick method
                   }
               });
        builder.show();

} 
```

我想我真正需要做的是`.setMultiChoiceItems(mHelperNames.toArray.Name(new CharSequence[mHelperNames.size()])`

但显然这行不通。如何将名称值分配给我的 setMultiChoiceItems 数组？

汤姆

# c# - 检查动态创建的文本框是否被 Javascript 弄脏

> ID：13515200
> 
> 赞同：0
> 
> 时间：2012-11-22T14:50:29.330
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3

我正在开发 MVC 3 应用程序，我设法使用部分视图创建了一个动态创建的文本框，并对这些动态框进行了验证，但是，我想检查这些动态文本框是否已更改并将隐藏字段值更改为“脏”因此，我使用以下代码来检测文本框上的任何更改，并且它在任何已经存在的文本框上都可以正常工作，但它不适用于动态创建的文本框：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("input[type='text']").change(function () {
            $("#FormState").val('dirty');
        });
    });
</script> 
```

无论如何用javascript来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:55:50.097

What you want to do is called **event delegation**. jQuery currently offers three ways to do event delegation, with `live`, `delegate`, and `on`.

The other answer suggested using `live`, but it and `delegate` are deprecated for good reason. They have some performance problems. You should use `on` for event delegation. In order to use it best you need to give it a reasonable parent element of these inputs. Try to choose the closest parent to all of your inputs.

```
$('#parent-id').on('change', 'input[type="text"]', function () {
    $("#FormState").val('dirty');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:52:04.323

利用：

```
 $("input[type='text']").live('change',function () {
        $("#FormState").val('dirty');
    }); 
```

[jQuery 直播](http://api.jquery.com/live/)

# javascript - 如何使用在浏览器的 javascript 控制台的一些外部 *.js 文件中定义的 javascript 函数？

> ID：13515204
> 
> 赞同：3
> 
> 时间：2012-11-22T10:12:23.400
> 
> 标签：javascript

我想知道是否可以保存一些`simplemath.js`文件，例如

```
function ADD(a, b)
{
   return a + b;
} 
```

简单的函数，运行 opera 或其他浏览器的 javascript 控制台，以某种方式包含此 (simplemath.js) 文件，调用 ADD(2, 5)，并在控制台中获取结果或在当前网页上执行 javascript 代码并使用其内容进行操作。我怎样才能做到这一点？如何在 Web 浏览器的 javascript 控制台中使用来自外部文件的 javascript 函数？

**// 编辑**

`simplemath.js`只是本地文件，位于硬盘驱动器 ( `c:\temp\simplemath.js`) 上的某个位置，没有运行本地主机 Web 服务器。我想在任何网页上运行脚本并获得类似于`javascript: function ADD(a, b){return a+b;} alert(ADD(1, 41);)`在浏览器地址栏中键入的结果，但通过控制台，并`ADD`从外部文件加载函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:23:40.810

您至少有两种方法可以从控制台将脚本加载到标头中：

```
document.head.innerHTML+="<script src='simplemath.js'></script>"; 
```

或使用`appendChild()`：

```
var script= document.createElement('script');
script.type= 'text/javascript';
script.src= 'simplemath.js';
document.head.appendChild(script); 
```

如果在全局空间中定义了 ADD 函数，您可以`ADD(2, 5)`直接在控制台中调用。

您也可以先使用上述方式加载 jQuery，然后使用以下方法加载脚本：

```
$.getScript('simplemath.js'); 
```

最重要的是，因此您对安全性或路径没有任何问题，并被允许加载那些 javascript 文件，您应该将所有这些脚本放在同一个文件夹中的一个文件夹中，一个空的 html，并在同一个窗口中打开控制台，该窗口为空 html被跑了。否则，您将遇到域和路径问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:00:51.097

您可以将`simplemath.js`文件作为[用户脚本包含到 Opera](http://www.opera.com/docs/userjs/)中：

> 如果启用，用户 JavaScript 将加载到您访问的大多数页面上，包括任何框架和内联框架中的页面。在用户 JavaScript 中创建的任何全局函数和变量都将可用，并且可以被这些页面上的任何脚本读取。因此，为了保护您的隐私和安全，我们建议您不要在您的用户 JavaScript 中包含任何敏感信息

您可以全局[启用它](http://www.opera.com/docs/userjs/using/#writingscripts)，也可以仅在特定页面上启用它。Opera 也支持[greasemonkey 脚本](http://en.wikipedia.org/wiki/Greasemonkey)，一个[Firefox 插件](https://addons.mozilla.org/de/firefox/addon/greasemonkey/)。然而（至少在 FF 中）它们通常在沙箱中运行，因此它们不会将全局变量泄漏到可以从控制台访问的网页中（除非您明确说明）。

# java - lowagie 和 iText 有什么区别？

> ID：13515210
> 
> 赞同：62
> 
> 时间：2012-11-22T14:50:42.073
> 
> 标签：java, itext, openpdf

lowagie 和 iText 有什么区别？这只是版本差异还是库的升级。推荐使用哪一种？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2014-05-19T15:46:38.110

实际上，没有区别：在 iText 2.1.0 中。创建一个 PDF，转到属性并查看“lowagie.com 的 iText 2.1.0”））在 lib 的演变中似乎发生的事情是 java 包名称中的“lowagie”被替换为“itextpdf”。

那是我的第一个答案。布鲁诺不喜欢它））。好的——当然，java lib 的生命周期发生了很多变化。我的意思是“lowagie”与 iText 是同一个库（尽管在早期版本中）。我认为 Bruno 对重新命名 lib 非常感兴趣，并且不希望它被称为 lowagie。很好——但无需刻意——lowagie 是以前版本中的 iText。

Axe，让我再试一次......有一些东西，比如一个开源品牌/企业，他们有一个网站，它以创建者“lowagie.com”的名字命名。它是一个java lib。当我们使用它时，我们看到包装结构反映了这种品牌选择“lowagie”，如：

```
import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.Element;
import com.lowagie.text.Font;
import com.lowagie.text.Image;
import com.lowagie.text.PageSize;
import com.lowagie.text.Paragraph;
import com.lowagie.text.pdf.PdfContentByte;
import com.lowagie.text.pdf.PdfImportedPage;
import com.lowagie.text.pdf.PdfReader;
import com.lowagie.text.pdf.PdfWriter;
import com.lowagie.text.pdf.PdfStamper; 
```

所以，我坚持我的回答，并断言 iText 使用了两个品牌：iText 和 lowagie.com。但现在很明显，有一个摆脱“lowagie”并坚持使用 iText 的举措。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-11-22T15:02:40.103

我是Lowagie，你说的那个lowagie。我是 iText 的原作者，也是“iText in Action”书籍和关于 iText 历史的“企业家”书籍的作者。

**当人们在 PDF 的上下文中谈论 lowagie 时，**他们通常会谈论具有包名称 (Java) 或名称空间 (C#) 的库，例如`com.lowagie.text`(Java)。这些是 iText 的旧版本（版本 0、1 或 2）。最后一个旧版本是 2009 年 7 月或更早的 iText 2.1.7。

有 iTextSharp 3 和 4 (C#)，但从来没有正式的 iText 3 或 4 版本 (Java)。有分叉号称是基于 iText 4 的，因为 4 号是临时用在开源仓库中，为 iText 5 的发布做准备。有了 iText 5，Java 和 C# 版本的发布号终于有了同步。

**当人们谈论 iText 时，**他们通常谈论更新版本的 iText 可以在更新日志中找到：http: [//itextpdf.com/changelog](http://itextpdf.com/changelog)

**iText 5 版本**有以下实质性变化：

*   iText.jar 是使用 Java 5（而不是 JDK 1.4）编译的。
*   F/OSS 许可证已从 MPL/LGPL 升级到 AGPL。
*   软件包名称已从 更改`com.lowagie`为`com.itextpdf`。
*   工具箱和 RTF 支持已被删除：它们现在位于 SourceForge 的单独项目中。

从来没有正式的 iText 6 版本；iText 6 仅存在于 iText Group 内部，为 iText 7 做准备。

**iText 7 版本**是对该库的完全重写。想要从 iText 7 之前的版本迁移的人将不得不重写他们的代码，因为 iText 7 与之前的版本不兼容。

从头开始创建新版本的原因有很多：

*   重写字体层对于支持连字和书写系统（如梵文（印地语）、Gurmukhi（旁遮普语））以及支持许多其他印度语言（如卡纳达语、泰卢固语、马拉地语、乌尔都语）是必要的……无法生成 PDF由于在这些版本中实现字体的方式，在那些具有较旧版本的语言中。
*   重写库为解决 API 中的大量歧义和不一致提供了机会。从 iText 7 开始，该库不再是一个单一的 jar，而是一组 jar，您可以根据需要的功能进行选择。
*   iText 5（及更早版本）的设计始于 2000 年 2 月。它早于 2012 年发布的 PDF/UA 标准，并且没有考虑可访问性。为在 iText 5 中支持 PDF/UA 付出了巨大的努力，但我们不得不承认，可访问性功能被固定在不是为此目的而创建的现有库上。iText 7 的设计以生成可访问的 PDF 作为先决条件。作为副作用，在 iText 7 中 HTML 到 PDF 的转换比在 iText 5 中要好得多。
*   iText 7 也是唯一支持更新的 PDF 2.0 标准的版本。以前版本的 iText 只能生成 PDF 1.7 或更早版本的文件。
*   另一个已经发展的重要标准涉及数字签名。请注意，您当然不应该使用 iText 2（或更早版本，或克隆版本）来创建数字签名，因为“lowagie”可以追溯到 2009 年，并且从那个时候开始的所有数字签名标准都已经过时了。

要更全面地了解 iText 的历史，以及事情发生变化的方式和原因，请查看[Entreprenerd](https://entreprenerd.lowagie.com)网站。

**2021 年 7 月 21 日更新的答案：**自 2020 年 3 月起，我不再隶属于任何 iText 公司。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T19:07:20.893

[![这是今天的日食氧气](../Images/894c56b70e942d3c95b7b1415952226b.png)](https://i.stack.imgur.com/BwRkS.png)

所以我在 Eclipse Oxygen 中进行编辑，我的导入建议列表看起来像这样。有Lowagie！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-30T08:52:42.183

到目前为止，还有使用 com.lowagie 中的类的[OpenPDF](https://github.com/LibrePDF/OpenPDF)，因此您可能还需要考虑您的项目的某些依赖项可能取决于 OpenPDF。

# windows-8 - 为 Windows 应用商店应用程序配置开发、QA 和生产 URI

> ID：13515211
> 
> 赞同：1
> 
> 时间：2012-11-22T14:50:43.263
> 
> 标签：windows-8

我正在开发一个包含使用 OAuth 2.0 服务的 Windows 运行时组件（它使用 WebAuthenticationBroker 并安全地存储返回的令牌），但 OAuth 服务可以托管在几个不同的位置之一。例如，我们有自己的本地开发服务、多达 5 个不同的 alpha/qa 环境、一个预生产环境和实时生产环境。所有这些不同的环境都响应不同的 URI。

我希望能够更改我的组件所针对的 URI，以便使用我的组件的人可以针对这些环境中的任何一个，但我并不特别想将 URI 放在设置魅力中（如果这对于运行时来说甚至是可能的）组件），因为我不希望最终用户能够配置它。

我考虑过使用#if Debug/Live/Preprod/QA1 等，并在代码中包含内联的各种 URI，但这似乎不是一个非常实用的解决方案。我不想有那么多不同版本的二进制文件可供选择。有没有一种实用的方法来管理这个？

我刚刚想到的一个想法是假设组件正在使用实时服务器并使用 ApplicationData 中的设置来覆盖它。我不确定运行时组件是否会与使用它的应用程序共享相同的 ApplicationData 存储，我认为它可能会，但我只是在猜测。

注意，我也在 MSDN 的 Win 8 开发者论坛上发布了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:38:33.280

我在我的公共接口中创建了一个方法`SetConfiguration(Configuration c)`。如果使用我的组件的开发人员没有提供实例，那么该组件将使用我的默认值，否则他们可以在实例`Configuration`中提供自己的覆盖。`Configuration`

# php - PHP Explode 类似功能，除非字符位于另一组字符之间的任何位置

> ID：13515212
> 
> 赞同：0
> 
> 时间：2012-11-22T14:50:43.200
> 
> 标签：php, regex, explode

我想将以下字符串转换为数组

> [地图]id=map,size=512x512,markers=[[latitude=40.5,longitude=-73.9],[latitude=41.5,longitude=-72.9]][/map]

我想使用逗号作为分隔符，但前提是它们不位于 [ 和 ] 字符之间。

因此，上面的字符串将被转换为：

*   [0] => id=地图，
*   [1] => 尺寸=512x512，
*   [2] => 标记=[[纬度=40.5,经度=-73.9],[纬度=41.5,经度=-72.9]]

实现这一目标的最简单方法是什么？

我已经研究过使用函数 str_getcsv 但这似乎只有在整个部分都在传递的外壳内时才有效。

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:58:15.730

您可能需要编写自己的解析器来完成这项工作，让我们假设您有这样的字符串：（为了更短的示例而`id=map,size=512x512,markers=[[latitude=40.5,longitude=-73.9],[latitude=41.5,longitude=-72.9]]`剥离）：`[map]`

```
$lastStart = 0; // Position where we last cut
$len = strlen( $str);
$openedBraces = 0; // Number of braces opened
$result = array();

for( $i = 0; $i < $len; $i++){
    switch( $str[$i]){
        // Handle opening brace
        case '[':
           $openedBraces++;
           break;

        // Handle closing brace
        case ']':
           $openedBraces--; // You may want to check negative numbers
           break;

        // Handle coma (it's sane operation only if there are no braces opened)
        case ',':
           if( $openedBraces == 0){
               $result[] = substr( $str, $lastStart, $i-$lastStart);
               $lastStart = $i+1;
           }
           break;
    }
}

$result[] = substr( $str, $lastStart); 
```

工作[codepad.org](http://codepad.org/Cz5bsHkx)示例。

# c# - 使用 DataContractJsonSerializer 反序列化具有不同类型数组的 json

> ID：13515213
> 
> 赞同：3
> 
> 时间：2012-11-22T14:50:45.433
> 
> 标签：c#, json, serialization, datacontractjsonserializer

有没有办法反序列化这样的json

```
{
  "photos": [
    19,
    {
      "pid": 288777129,
      "aid": -6
    },
    {
      "pid": 286441792,
      "aid": -6
    },
    {
      "pid": 114893258,
      "aid": 34465839
    }
  ]
} 
```

使用 C#`DataContractJsonSerializer`无需修改源代码。我的意思是第一个元素 19。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:57:25.093

我通常改用这个`JavascriptSerializer`类：

```
JavaScriptSerializer js = new JavaScriptSerializer();
Object obj = js.DeserializeObject(str);
Response.Write(obj["photos"][0]); // 19 
```

# java - 简单游戏中的 ConcurrentModificationException

> ID：13515214
> 
> 赞同：0
> 
> 时间：2012-11-22T14:50:45.490
> 
> 标签：java, multithreading, jframe, jpanel, concurrentmodification

我正在编写一个简单的贪吃蛇游戏。所以，我有一个更新线程，执行一个无限循环，更新所有游戏对象并重新绘制 JPanel。

```
// Run thread
public void run () {
    try {
        while (true) {
            this.update();
            this.getGamePanel().sceneShouldRepaint();

            Thread.sleep(this.getFps());
        }
    }
    catch (Exception e) {
        JOptionPane.showMessageDialog(null, e.getMessage(), "Error", JOptionPane.OK_CANCEL_OPTION);
    }
} 
```

现在，问题是当我调用`myJFrame.repaint()`它时，它可能正在另一个线程中执行。而当我绘画的时候，我显然必须得到物体的位置、速度等等……我知道异常来自`paintComponent()`，因为它没有被捕获。如您所见，while 循环嵌入在 try-catch 中。

我能做些什么呢？

这是一个例外：

```
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
    at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
    at java.util.AbstractList$Itr.next(AbstractList.java:343)
    at ch.ilijatovilo.Scene.GameObjects.Creatures.Snake.Snake.render(Snake.java:52)
    at ch.ilijatovilo.Scene.SceneHandling.Scene.renderSceneObjects(Scene.java:57)
    at ch.ilijatovilo.Scene.SceneHandling.Scene.render(Scene.java:53)
    at ch.ilijatovilo.Scene.SceneHandling.GamePanel.paintComponent(GamePanel.java:53)
    at ch.ilijatovilo.Scene.SceneHandling.GamePanel.paint(GamePanel.java:30)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5106)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4890)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:812)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:714)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:694)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:41)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1672)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:702)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:672)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

谢谢你的帮助！

**暗示**

如果您尝试从 2 个不同的线程同时访问一个实例，则会引发 ConcurrentModificationException。至少我是这么听说的。

**更多代码**

```
// This is the render method in the Snake class at line 50.
// So 52 is the start of the for loop

public void render(Graphics g) {
    // We delegate the drawing to the body parts
    for (SnakeBodyPart sbp : this.getSnakeBodyParts()) {
        sbp.render(g);
    }

    this.getSnakeHead().render(g);
}

// And here the for loop from the Scene class
protected void renderSceneObjects (Graphics g) {
    for (SceneObject so : this.getSceneObjects()) {
        so.render(g);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:08:29.173

很可能您正在更改需要在该库似乎不允许的另一个线程中呈现的细节（我假设大多数 GUI 库不允许这样做）

当您更改 GUI 组件或您将渲染的东西时，您需要调用[SwingUtils.invokeLater()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)以便任务将在 GUI 事件线程中执行，而不是在另一个线程中同时执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:35:31.777

那么 CopyOnWriteArrayList 就是一个答案。当我有时间时，我会寻找另一个解决方案......

awt - 基于应用程序的另一个解决方案应该是

```
EventQueue.invokeLater(new Runnable() {...}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:09:30.273

如果您在两个线程中调整列表，您会看到您提到的问题。如果您找不到“Comodification”，您可以依靠 java.util.concurrent 库。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html)

# php - Symfony2 - 在哪里可以找到服务构造函数可能的参数列表？

> ID：13515216
> 
> 赞同：2
> 
> 时间：2012-11-22T14:50:47.597
> 
> 标签：php, symfony

在哪里可以找到可能的服务构造函数参数的完整列表，例如：`@request`、`@service_container`等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:58:42.133

列出可用的服务

```
$ app/console container:debug 
```

有关特定服务的信息

```
$ app/console container:debug request 
```

# unix - awk 删除重复字段并计数

> ID：13515220
> 
> 赞同：1
> 
> 时间：2012-11-22T14:51:02.027
> 
> 标签：unix, awk

我有一个问题，我试图仅使用 awk 来解决。

我在结构中有一个 csv 文件：

```
Easting  Northing    Latitude    Longitude   Locality Name

Easting  "Northing"  "Latitude"  "Longitude"     "LocalityName"
364208  176288           51.48441   -2.51685     "Fishponds"
358596  172813           51.45278   -2.59726     "Bristol City Centre"
358886  177828           51.49789   -2.59367     "Southmead"
358839  177839           51.49798   -2.59435     "Southmead"
358980  177882           51.49838   -2.59232     "Southmead"
359009  177863           51.49821   -2.5919          "Southmead"
358839  177529           51.4952        -2.59431     "Southmead"
359475  168262           51.41192   -2.58409     "Hengrove Park"
358945  173526           51.45921   -2.59232     "Bristol"
358943  173525           51.4592    -2.59235     "Bristol"
358941  173524           51.45919   -2.59238     "Bristol"
358940  173523           51.45919   -2.59239     "Bristol"
358945  173528           51.45923   -2.59232     "Bristol"
358936  173520           51.45916   -2.59245     "Bristol"
358936  173521           51.45917   -2.59245     "Bristol"
358932  173516           51.45912   -2.5925          "Bristol" 
```

等等...我正在尝试编写一个 awk 脚本，该脚本将计算 Locality 名称的每个实例并打印出来，因此输出将是：

```
Fishponds 1
Bristol City Centre 1
Southmead 5
Hengrove park 1
Bristol 8 
```

到目前为止，我得到了这个：

```
BEGIN { i = 0; state = 0; names[NR]; FS=","; }

{
#for each element in names array, check if already exists.
    for(j=0;j<=i;j++)
    {
        if(names[j] == $5)
        {
        state = 1;
        break;
        }
    }
# If the name doesnt already exist add to names array
    if(state == 0)
    {
        names[i] = $5;
        i++;
    }
    state = 0;
}

END { 
    for(x=0;x<=i;x++)
    {
    print names[x];
    }
} 
```

希望对位置进行排序并删除重复项，但我仍然想不出一个好方法来计算每个位置的实例然后将它们列出回来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T14:57:36.457

更简单的解决方案：

```
awk -F '"' 'NR>3 {locname[$2]++}
            END { for (n in locname) {print n, locname[n] } }' INPUTFILE 
```

首先输入文件分隔符设置为`"`，因此第二个字段将是位置名称。跳过第一行（标题）。利用数组（键是第二个字段）来计算出现次数。在最后一行之后打印数组的键和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:00:15.187

这是使用`GNU awk`. 它解析文件两次，但给出排序的输出：

```
awk -F "\"" 'NR > 3 && FNR==NR { a[$2]++; next } $2 in a && !b[$2]++ { print $2, a[$2] }' file{,} 
```

结果：

```
Fishponds 1
Bristol City Centre 1
Southmead 5
Hengrove Park 1
Bristol 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:21:08.893

这可能对您有用：

```
awk -F\" '/^[0-9]/{if(!location){location=$2};if(location==$2){count++;next};print location,count;location=$2;count=1};END{print location,count}' file 
```

这仅在对位置进行排序（如您的示例中所示）时才有效，否则使用：

```
awk -F\" '/^[0-9]/{count[$2]++;if(count[$2]==1)location[++order]=$2};END{for(n=1;n<=order;n++)print location[n],count[location[n]]}' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:58:14.303

perl 解决方案：

```
perl -F\" -lane 'if($.>3){$X{$F[1]}++}END{foreach (keys %X){print $_." ".$X{$_}}}' your_file 
```

测试如下：

```
> perl -F\" -lane 'if($.>3){$X{$F[1]}++}END{foreach (keys %X){print $_." ".$X{$_}}}' temp
Bristol 8
Hengrove Park 1
Southmead 5
Bristol City Centre 1
Fishponds 1
> 
```

# ruby-on-rails - Rails 3，具有 lambda 条件的 has_one / has_many

> ID：13515225
> 
> 赞同：2
> 
> 时间：2012-11-22T14:51:15.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, lambda

这是我的模型：

```
class User < ActiveRecord::Base
  has_many :bookmarks
end

class Topic < ActiveRecord::Base
  has_many :bookmarks
end

class Bookmark < ActiveRecord::Base
  belongs_to :user
  belongs_to :topic
  attr_accessible :position
  validates_uniqueness_of :user_id, :scope => :topic_id
end 
```

我想`topics`用`current_user`关联的`bookmark`. 提款机，我做：

```
Topic.all.each do |t|
    bookmark = t.bookmarks.where(user_id: current_user.id).last
    puts bookmark.position if bookmark
    puts t.name
end 
```

这很丑陋并且做了太多的数据库查询。我想要这样的东西：

```
class Topic < ActiveRecord::Base
  has_one :bookmark, :conditions => lambda {|u| "bookmarks.user_id = #{u.id}"}
end

Topic.includes(:bookmark, current_user).all.each do |t| # this must also includes topics without bookmark
    puts t.bookmark.position if t.bookmark
    puts t.name
end 
```

这可能吗？我有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T15:54:38.520

*嗯，我不确定我是否理解您的问题，但这可能会对您有所帮助：

```
# code
class Topic < ActiveRecord::Base
  scope :for_user, lambda { |user| includes(:bookmarks).where(bookmarks: { user_id: user.try(:id) || user} ) }

# call
Topic.for_user(current_user) # => Array of Topics 
```

如您所见，范围**的参数**`for_user` **可以是 User 对象或用户 id**。

希望这可以帮助！

**类似的问题：**

*   [如何根据属于第一个模型的另一个模型的属性查询模型？](https://stackoverflow.com/questions/23633301/how-to-query-a-model-based-on-attribute-of-another-model-which-belongs-to-the-fi/23633352#23633352)
*   [Rails 活动记录查询与“存在”的关联](https://stackoverflow.com/questions/18234602/rails-active-record-querying-association-with-exists/18234998#18234998)
*   [Rails 4 查找没有孩子的父母](https://stackoverflow.com/questions/18082096/rails-4-scope-to-find-parents-with-no-children/18082147#18082147)
*   [使用活动记录连接多个表](https://stackoverflow.com/questions/24266069/join-multiple-tables-with-active-records/24266583#24266583)

# java - 比较 Java 的传递值与 C++ 的传递值或引用

> ID：13515227
> 
> 赞同：0
> 
> 时间：2012-11-22T14:51:23.760
> 
> 标签：java, c++

Java 使用按值传递，包括对象和原始类型。因为Java传递引用的值，我们可以改变目标的值但不能改变地址。

这与 C++ 相比如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T15:04:55.830

不同之处在于您是否可以影响*调用*函数中的变量。

让我们暂时把物体放在一边。在纯按值传递的 Java 中，您无法更改传递给被*调用*函数的变量的调用函数值。例子：

```
void foo() {
    int a = 42;
    bar(a);
    System.out.println("foo says: " + a);
}
void bar(int a) {
    a = 67;
    System.out.println("bar says: " + a);
} 
```

如果你打电话`foo`，你会看到：

```
酒吧 说： 67
富 说： 42
```

`bar`改不了了`foo`。`a`

如果您按值传递，那么在 C++ 中就是如此。但是，如果您通过*引用*传递，您将传递对调用代码变量的*引用。*这意味着被调用的代码可以改变它：

```
void foo() {
    int a = 42;
    bar(a);
    cout << "foo says: " << a;
}
void bar(int& a) {
    a = 67;
    cout << "bar says: " << a;
} 
```

请注意，这`bar`被定义为接收*引用*( `int& a`)。如果你打电话`bar`，你会看到：

```
酒吧 说： 67
富 说： 67
```

`bar`能够改变within的*值*。`a``foo`

好的，让我们来处理对象引用：首先，请注意“引用”这个词被用于两个完全不同的事物：调用函数中对*变量的**引用*（即传递引用的事物），以及*引用*一个*对象*。当您将对象引用传递给 Java 中的方法时，引用是按*值*传递的，就像其他一切一样。

 ***```
void foo() {
    List list = new ArrayList();
    List ref2 = list; // (Let's remember that object reference for later...)
    bar(list);
    System.out.println("foo says: " + list.size());
    System.out.println("foo says: Same list? " + (ref2 == list));
}
void bar(List list) {
    // `bar` can modify the state of the object the reference points to
    list.add(new Object());
    System.out.println("bar says (after add): " + list.size());

    // ...but cannot change `foo`'s copy of `list`
    list = new ArrayList();
    System.out.println("bar says (after new): " + list.size());
} 
```

所以你看：

```
酒吧说（添加后）：1
酒吧说（新之后）：0
富 说： 1
foo 说：相同的列表？真的
```

`bar`可以更改（按值）传入其引用的对象的*状态*，但不能更改`foo`对该对象的引用。`foo`没有看到`bar`创建的新列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:05:09.497

在 Java 中，您可以按值传递原语和引用。没有其他选择。

在 C++ 中，您可以按值或按引用传递原语和指针。如果您通过引用传递，您可以看到在传递给方法后对值或指针所做的更改，并且您可以更改原始值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:34:28.440

不同之处在于您是否可以影响调用函数中的变量。

让我们暂时把物体放在一边。在纯按值传递的 Java 中，您无法更改传递给被调用函数的变量的调用函数值。例子：

```
void foo() {
    int a = 42;
    bar(a);
    System.out.println("foo says: " + a);
}
void bar(int a) {
    a = 67;
    System.out.println("bar says: " + a);
} 
```

如果你调用 foo，你会看到：

bar 说：67 foo 说：42 bar 不能改变 foo 的 a。

如果您按值传递，那么在 C++ 中就是如此。但是，如果您通过引用传递，您将传递对调用代码变量的引用。这意味着被调用的代码可以改变它：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T17:25:29.893

在 C++ 中，与 Java 等价的是这个

```
void Swap(Type* A, Type* B)
{
  // here we have pointers to type A (in Java they are called references and don't use * syntax)
  A->DoThis() // can call with -> a method on object
  //if you try to swap A with B not possible because we don't have A*/B* reference
  // see bellow how to do this
} 
```

在 C++ 中处理上述限制的方法是

```
void Swap(Type& A, Type& B)
{
  Type& temp = A;
  A = B;
  B = temp;
} 
```***

# ssis - SSIS - 脚本任务如何在发生错误时获取获取行号

> ID：13515232
> 
> 赞同：3
> 
> 时间：2012-11-22T14:51:37.103
> 
> 标签：ssis

当您的任何代码在 SSIS 脚本任务中失败时如何捕获 LINE NUMBER

以下代码没有给出发生错误的行号。

```
 MessageBox.Show(ex.Message.ToString(), "Error", MessageBoxButtons.OK)
        Dts.Events.FireError(1, ex.TargetSite.ToString(), ex.Message.ToString(), "", 0)
        Dts.TaskResult = ScriptResults.Failure 
```

请指教

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:21:13.027

我很确定堆栈跟踪**中的行号不适用于**脚本任务。我不相信 SSIS 用于脚本任务和组件的 Visual Studio Tools for Applications (VSTA) 可以设置为允许脚本本身的调试构建。如果没有调试信息，.NET 运行时无法确定哪一行源代码对应于发生错误的编译代码中的指令。

但是，坦率地说，如果您在特定的脚本任务中有这么多代码，以至于您**需要**行号来导航它，那么恕我直言，这是一个更大的问题。我建议您将该功能移到自定义任务中，或者至少将复杂代码放入可以从脚本任务中引用的单独的 .NET 程序集中。Script Tasks 非常适合编写少量代码，但作为一个完整的开发环境，与“真正的”Visual Studio 相比，VSTA 很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:45:52.070

根据@Edmund，我们无法获得行号。尝试使用 ex.StackTrace 来更深入地了解错误/异常。尝试在您的脚本任务中使用以下行。

```
MessageBox.Show(ex.StackTrace, "Error", MessageBoxButtons.OK)
Dts.Events.FireError(1, "Component Name", ex.StackTrace, "", 0)
Dts.TaskResult = ScriptResults.Failure 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T17:49:32.553

正如您所确定的，您无法从发布构建堆栈跟踪中获取行号。但是方法调用呢？也许您可以将长方法分解为多个方法调用，以帮助描述长方法的工作流程。发生错误时，您将有一个更短的检查方法。

# java - 如何获得自定义标题视图？

> ID：13515235
> 
> 赞同：2
> 
> 时间：2012-11-22T14:51:47.617
> 
> 标签：java, android, android-layout

我正在使用不同的布局在我的应用程序中显示不同样式的标题。问题是我无法获得对它们中存在的特定 Textview 的引用。如果我更改文本，则不会发生任何事情。

这是我正在做的事情：

```
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title_bar); 
```

以下方法不起作用：

```
public void setTitle(String text) {
    TextView txtTitle = (TextView) this.findViewById(R.id.txtTitle);
    if(txtTitle !=null) {
        txtTitleMoney.setText(text);
        Log.d("debug", "not null");
    } 
} 
```

我没有收到任何错误，所以我认为我访问了错误的视图。

希望有人可以帮助我:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T14:59:59.773

试试这个

```
boolean customTitleSupported;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);     
    setContentView(R.layout.mainscreen);

    customTitleBar();
}

public void customTitleBar( ) {

    if (customTitleSupported) {
            getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
                            R.layout.customtitlebar);
            TextView title = (TextView) findViewById R.id.title);               
            title.setText(left);             
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T22:37:07.780

如果您为所有不同标题布局中`txtTitle`的项目设置相同的 id (" ") ，那么您的代码应该可以工作。`TextView`还要确保你打电话`setTitle()`后`setContentView()`。

# html - 选择中不同尺寸的选项

> ID：13515239
> 
> 赞同：1
> 
> 时间：2012-11-22T14:52:04.637
> 
> 标签：html, css, html-select

我正在尝试使用不同大小的下拉菜单，因为我的选项位于不同的组中。

我可以更改文本的颜色、背景的颜色，但不能更改选项的高度，也不能更改字体大小（我的意思是，我可以更改但没有两个单独的）

编码

```
<select>
    <option class="title" disabled>Title 1</option>
    <option>Select 1</option>
    <option>Select 2</option>
    <option class="title" disabled>Title 2</option>
    <option>Select 3</option>
 </select> 
```

CSS

```
select .title
{
    color:#E0E0E0;
    font-size:12px;
    font-weight:bold;
    height:15px;
    background-color:#0000FF;
}

select option
{
    color:#0000FF;
    font-size:24px;
    font-weight:normal;
    height:30px;
    background-color:#0000FF;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:55:11.690

`<optgroup>`您是否知道专门为这样的事情调用的元素？

```
<select>
     <optgroup label="Title 1">
       <option>Select 1</option>
       <option>Select 2</option>
     </optgroup>
     <optgroup label="Title 2">
        <option>Select 3</option>
     </optgroup>
</select> 
```

如果你想改变`optgroup`textsize 试试这个

```
optgroup:before {
    content: "Demo";
    font-size: 18px;
} 
```

[**更改 OPTGROUP 标题小提琴的大小**](http://jsfiddle.net/fEdkj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:01:46.557

不幸的是，许多表单元素的样式非常有限。标签可以有一些改变的`<option>`样式，但 font-size 不是其中之一。它还取决于您使用的浏览器。

请参阅此页面以了解可能的情况： [http ://www.electrictoolbox.com/style-select-optgroup-options-css/](http://www.electrictoolbox.com/style-select-optgroup-options-css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:14:24.683

这是我的做法

HTML

```
<select>
 <optgroup label="Title 1"></optgroup> 

  <option>Select 1</option>
  <option>Select 2</option>

   <optgroup label="Title 2"></optgroup>

   <option>Select 3</option>
 </select> 
```

CSS

```
select
{
 width: 100%;
 font-size:24px;
}
select optgroup 
{
 color:#E0E0E0;
 font-size:12px;
 font-weight:bold;
 background-color:#0000FF;
}
select option
{
 color:#0000FF;
 font-weight:normal;
 background-color:#FFFFFF;
} 
```

高度虽然不起作用。

# css - 如何测试 Aural 样式表/CSS3 语音？

> ID：13515244
> 
> 赞同：3
> 
> 时间：2012-11-22T14:52:30.577
> 
> 标签：css, screen-readers, css-speech

我正在窥探网站代码并注意到它们的使用`@media aural {}`- 这让我想起了它的存在。所以，我以为我会玩……但后来意识到我不知道如何测试它们。

我不希望我的网站听起来像施瓦辛格在吃圣诞晚餐……

我如何通过浏览器测试听觉或语音以确保它听起来不错？

听觉和语音的规格：

*   [http://www.w3.org/TR/CSS2/aural.html](http://www.w3.org/TR/CSS2/aural.html)
*   [http://www.w3.org/TR/css3-speech/](http://www.w3.org/TR/css3-speech/)

*编辑：感谢 BoltClock 指出 Media aural 已被废弃并用 CSS3 Speech 替换/升级。所以，我现在将专注于 CSS3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T14:55:04.190

CSS3 Speech 模块和 CSS2 听觉样式表——或者至少是其中的一部分——在[Presto Opera](http://www.opera.com/docs/specs/presto24/css/properties)中得到了实验性支持（可能高达并包括 12.10，但*不*包括 15 及更高版本，它们基于 Blink，它没有实现他们根本没有）。

请注意，听觉样式表在 CSS2.1 中已被淘汰，后来又作为 CSS3 语音模块复活；旧规格仅供历史参考。考虑到语音模块在 2012 年已经是候选推荐 (CR)，任何新的浏览器都不太可能实现听觉样式表，因此您可以忘记测试这些，只关注基于新规范的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:19:21.000

**Safari中**的 VoiceOver 支持某些语音样式。我不确定是哪个，请进行实验并让我们知道结果:)

# c# - 分页无法正常工作

> ID：13515245
> 
> 赞同：4
> 
> 时间：2012-11-22T14:52:37.517
> 
> 标签：c#, asp.net, gridview, paging

我已经在我的 gridview 上打开了分页，但是当我尝试更改页面时，回发数据返回为空。

当页面第一次加载时，数据就在那里。

这是我第一次这样做，所以我可能做错了什么。

数据源是一个membershipusercollection 列表。

这是我的代码...

```
protected void Page_Load(object sender, EventArgs e)
{
    count = 0;             

    switch (Request.QueryString["status"])
    {
        case "active":
            lblUserListTitle.Text = "Activated user accounts";
            break;
        case "inactive":
            lblUserListTitle.Text = "Inactive user accounts";
            break;
        case "locked":
            lblUserListTitle.Text = "Locked user accounts";
            break;
        case "online":
            lblUserListTitle.Text = "Users online";
            break;
        case "notverified":
            lblUserListTitle.Text = "Users accounts not yet verified";
            break;
        default:
            lblUserListTitle.Text = "All user accounts";
            break;
    }
    if (!IsPostBack)
        BindGrid();    

    lblSearchResult.Text = "There are " + count.ToString() + " registered users found.";
}
protected void BindGrid()
{
    MembershipUserCollection usersList = Membership.GetAllUsers();
    MembershipUserCollection filteredUsers = new MembershipUserCollection();

    foreach (MembershipUser user in usersList)
    {
        if (!Roles.IsUserInRole(user.UserName, "Admin") && !Roles.IsUserInRole(user.UserName, "Engineering"))
        {
            userProfile = Profile.GetProfile(user.UserName);

            if (txtFilterCustomerNo.Text.Length > 0)
            {
                ProfileCommon PC = Profile.GetProfile(user.UserName);
                if (PC.RaymarineAccountNo == txtFilterCustomerNo.Text.ToUpper())
                {
                    filteredUsers.Add(user);
                    count++;
                }
            }
            else
            {
                //filter on querystring
                if (Request.QueryString["status"] == "active")
                {
                    if (user.IsApproved && !user.IsLockedOut)
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
                else if (Request.QueryString["status"] == "inactive")
                {
                    if (!user.IsApproved && !user.IsLockedOut)
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
                else if (Request.QueryString["status"] == "locked")
                {
                    if (user.IsLockedOut)
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
                else if (Request.QueryString["status"] == "online")
                {
                    if (user.IsOnline)
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
                else if (Request.QueryString["status"] == "notverified")
                {
                    if (user.IsApproved && !userProfile.IsVerified)
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
                else
                {
                    filteredUsers.Add(user);
                    count++;
                }
            }
        }
    }

    GridView1.DataSource = filteredUsers;
    GridView1.DataBind();
}
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    BindGrid();
} 
```

和 .aspx 页面...

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" Width="1000px" onrowdatabound="GridView1_RowDataBound" ViewStateMode="Enabled" AllowPaging="True" onpageindexchanging="GridView1_PageIndexChanging" PageSize="25">
                <Columns>
                    <asp:TemplateField ItemStyle-Width="70px">
                        <ItemTemplate>
                            <asp:HyperLink ID="lnkProfile" runat="server"><asp:Image ID="Image3" runat="server" ImageUrl="~/Content/admin_miniProfile.png" AlternateText="User Profile" /></asp:HyperLink>
                            &nbsp;<asp:HyperLink ID="lnkPermissions" runat="server"><asp:Image ID="Image2" runat="server" ImageUrl="~/Content/admin_miniPermissions.png" AlternateText="Permissions" /></asp:HyperLink>
                            &nbsp;<asp:HyperLink ID="lnkPassword" runat="server"><asp:Image ID="Image1" runat="server" ImageUrl="~/Content/admin_miniResetPassword.png" AlternateText="Reset Password" /></asp:HyperLink>
                        </ItemTemplate>
                    </asp:TemplateField>                        
                    <asp:BoundField DataField="UserName" HeaderText="User Name" />
                    <asp:TemplateField ItemStyle-Width="100px" HeaderText="Account No">
                        <ItemTemplate>                                
                            <asp:Label ID="lblAccountNo" runat="server" Text=""></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>                        
                    <asp:BoundField DataField="CreationDate" HeaderText="Created" ItemStyle-Width="160px" />
                    <asp:TemplateField ItemStyle-Width="20px">
                        <ItemTemplate>
                            <asp:HyperLink ID="lnkSalesman" runat="server"><asp:Image ID="imgFilter" runat="server" ImageUrl="~/Content/admin_miniFilter.png" /></asp:HyperLink>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField ItemStyle-Width="200px" HeaderText="Salesman">
                        <ItemTemplate>                                
                            <asp:Label ID="lblSalesman" runat="server" Text=""></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField ItemStyle-Width="20px">
                        <ItemTemplate>
                            <asp:HyperLink ID="lnkDelete" runat="server"><asp:Image ID="Image4" runat="server" ImageUrl="~/Content/admin_miniDeleteUser.png" AlternateText="Delete User" /></asp:HyperLink>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>    
                <PagerSettings Position="TopAndBottom" />
                <RowStyle Height="20px" VerticalAlign="Middle" />        
                <AlternatingRowStyle BackColor="#EEEEEE" />        
            </asp:GridView> 
```

除分页外，一切正常。

谁能帮我？如果我错过了任何重要信息，请告诉我，我会更新！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:16:55.247

我已经整理好了！

我已将集合放入页面加载时的会话中，并将 gridview 数据源绑定到会话对象。仅在非回发时创建会话对象。

更新的代码工作...

```
protected void Page_Load(object sender, EventArgs e)
{
    count = 0;             

    switch (Request.QueryString["status"])
    {
        case "active":
            lblUserListTitle.Text = "Activated user accounts";
            break;
        case "inactive":
            lblUserListTitle.Text = "Inactive user accounts";
            break;
        case "locked":
            lblUserListTitle.Text = "Locked user accounts";
            break;
        case "online":
            lblUserListTitle.Text = "Users online";
            break;
        case "notverified":
            lblUserListTitle.Text = "Users accounts not yet verified";
            break;
        default:
            lblUserListTitle.Text = "All user accounts";
            break;
    }

    if (!IsPostBack)
    {
        MembershipUserCollection usersList = Membership.GetAllUsers();
        MembershipUserCollection filteredUsers = new MembershipUserCollection();

        foreach (MembershipUser user in usersList)
        {
            if (!Roles.IsUserInRole(user.UserName, "Admin") && !Roles.IsUserInRole(user.UserName, "Engineering"))
            {
                userProfile = Profile.GetProfile(user.UserName);

                if (txtFilterCustomerNo.Text.Length > 0)
                {
                    ProfileCommon PC = Profile.GetProfile(user.UserName);
                    if (PC.RaymarineAccountNo == txtFilterCustomerNo.Text.ToUpper())
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
                else
                {
                    //filter on querystring
                    if (Request.QueryString["status"] == "active")
                    {
                        if (user.IsApproved && !user.IsLockedOut)
                        {
                            filteredUsers.Add(user);
                            count++;
                        }
                    }
                    else if (Request.QueryString["status"] == "inactive")
                    {
                        if (!user.IsApproved && !user.IsLockedOut)
                        {
                            filteredUsers.Add(user);
                            count++;
                        }
                    }
                    else if (Request.QueryString["status"] == "locked")
                    {
                        if (user.IsLockedOut)
                        {
                            filteredUsers.Add(user);
                            count++;
                        }
                    }
                    else if (Request.QueryString["status"] == "online")
                    {
                        if (user.IsOnline)
                        {
                            filteredUsers.Add(user);
                            count++;
                        }
                    }
                    else if (Request.QueryString["status"] == "notverified")
                    {
                        if (user.IsApproved && !userProfile.IsVerified)
                        {
                            filteredUsers.Add(user);
                            count++;
                        }
                    }
                    else
                    {
                        filteredUsers.Add(user);
                        count++;
                    }
                }
            }
        }

        if (Session["FilteredUsers"] == null)
            Session.Add("FilteredUsers", new MembershipUserCollection());
        Session["FilteredUsers"] = filteredUsers;
    }

    BindGrid();    

    lblSearchResult.Text = "There are " + count.ToString() + " registered users found.";
}
protected void BindGrid()
{    

    GridView1.DataSource = (MembershipUserCollection)Session["FilteredUsers"];
    GridView1.DataBind();
}
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    BindGrid();
} 
```

如果有比这更好的方法，请说，我还在学习 asp.net/c#！！

谢谢

# c# - 列表上的多个 LINQ Where vs foreach

> ID：13515248
> 
> 赞同：0
> 
> 时间：2012-11-22T14:52:49.780
> 
> 标签：c#, linq, foreach

如果我有一个集合：

```
List<T> collection; 
```

我需要对这个集合执行两个测试，这样效率更高：

```
foreach(T t in collection.where(w => w.value == true))
{
     t.something = true;
}

foreach(T t in collection.where(w => w.value2 == true))
{
     t.something2 = true;
} 
```

或者

```
foreach(T t in collection)
{
 if (t.value == true)
  {
     //check 1
  }

  if (t.value2 == true)
  {
    //check 2
  }
} 
```

我认为会是后者，因为我假设每个`where`人都会迭代集合，但只是想确保我没有遗漏什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:54:14.197

我认为它可能会根据集合大小而改变。但是我会使用第二个代码。

第一个代码将整个集合迭代两次（`where`每个一次），然后对每个结果进行一次迭代。

第二个代码只迭代整个集合一次。此外，它更清洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:59:05.960

第二个很可能会稍微快一些，但差异很小。

可能更重要的是您以不同的顺序做事。第一个代码循环遍历首先作用于一个条件的所有项目，然后再次作用于另一个条件。第二个代码循环遍历项目一次，依次检查每个项目的两个条件。根据您对物品的处理方式，这可能会有所不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T14:58:30.390

第一种情况会枚举您的集合两次（`WhereEnumerator`用于为您进行检查），第二种情况仅枚举一次，但您必须手动进行检查。后一种情况会更有效，因为您使用简单的条件表达式来比较项目值，而`WhereEnumerator`必须在每个项目上调用提供的委托。

# iphone - Objective C AES256 解密

> ID：13515250
> 
> 赞同：2
> 
> 时间：2012-11-22T14:52:50.653
> 
> 标签：iphone, objective-c

我必须解密（AES 256）目标 c 中的字符串。

我有对方用来加密的密钥和 IV（C#）。

你可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:38:55.323

请看看这个[应用程序](https://github.com/mayurbirari/AES256AndBase64)。

您需要做的就是在您的应用程序 中的所需文件中添加来自存储库[AES256AndBase64的 Helper 类。](https://github.com/mayurbirari/AES256AndBase64)`#import "NSString+AESCrypt.h"`

使用`- (NSString *)AES256DecryptWithKey:(NSString *)key`方法解密数据：

```
 NSString* dummyString=@"Steve Job";

    NSLog(@"Normal String- %@",dummyString);

    NSString* encrypt_decrypt_Key=@"apple";

    NSString *encryptString = [dummyString
                                  AES256EncryptWithKey:encrypt_decrypt_Key];

    NSLog(@"Encrypt String- %@",encryptString);

    NSString *decryptString = [encryptString
                               AES256DecryptWithKey:encrypt_decrypt_Key];

    NSLog(@"Decrypt String- %@",decryptString); 
```

# batch-file - 如何在 Windows 7 下为进程设置超时？

> ID：13515254
> 
> 赞同：29
> 
> 时间：2012-11-22T14:53:00.470
> 
> 标签：batch-file, timeout

我想用 Windows 批处理文件启动一个程序。但是程序应该在某个超时值后停止。例如：运行程序 60 秒，并在 60 秒后停止。

在 Linux 下，有这个很好的`timeout`命令可以做我想做的事。Windows 也有一个`timeout`命令，但它只是暂停一个命令，延迟它的执行。Windows下还有其他东西可以这样做吗？

设置：Windows 7、64 位、专业版

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-22T14:57:46.783

```
start yourprogram.exe
timeout /t 60
taskkill /im yourprogram.exe /f 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-04T16:49:15.600

Bali C 给出了简明扼要的回答。我需要一些更有特色和可重用的东西。基于 Bali C 的示例。我想出了这个。如果有人需要和我一样的。

你的.bat

```
REM...

CALL STARTwaitKILL..bat /relative/path/your_program.exe

REM... 
```

STARTwaitKILL.BAT

```
@ECHO OFF 
IF[%1]==[] GOTO EOF
IF NOT EXIST %1 GOTO EOF

REM SET PRIORITY=/NORMAL
REM ADJUST PRIORITY, BELOWNORMAL LETS BATCH FILE RUN MORE SMOOTHLY
REM WITH A PROGRAM THAT CONSUMES MORE CPU. SEE ABOUT MAXWAIT BELLOW
SET PRIORITY=/BELOWNORMAL
REM SET PRIORITY=/LOW
REM 0 NORMAL WINDOW :: 1 NO WINDOW :: 2 MINIMIZED WINDOW
SET /A HIDDEN=1
REM MAXWAIT HERE IS MORE LIKE MINIMUM WAIT IN WINDOWS.
SET MAXWAIT=10
SET WAITCOUNT=0

SET ARGS=/I %PRIORITY%
IF %HIDDEN% EQU 1 SET ARGS=%ARGS% /B
IF %HIDDEN% EQU 2 SET ARGS=%ARGS% /MIN

START %ARGS% %1

:WAIT
IF %WAITCOUNT% GEQ %MAXWAIT% GOTO KILL_IT

TIMEOUT /T 1 > NUL
SET /A WAITCOUNT+=1
FOR /F "delims=" %%a IN ('TASKLIST ^| FIND /C "%~nx1"') DO IF %%a EQU 0 GOTO RUN_DONE
GOTO WAIT

:KILL_IT
TASKKILL /IM %~nx1 /F > NUL
:RUN_DONE 
```

可以充实矿石以获取更多优先级等参数，但我不需要它。应该不难补充。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T15:30:06.577

Windows 中不存在任何延迟应用程序或为应用程序设置超时的命令

Windows 中的 Timeout 是为了延迟 CMD/Batfile 的执行过程，仅此而已。

你可以使用外部工具，我现在不记得名字了，这么多地下软件，对不起，但我记得在 autoit 官方论坛中有一个类似的命令行工具来启动一个设置超时的应用程序，也许在工具 NIRCMD 或 ps2exec 中，检查他们的帮助文件或 WAIK 工具包中的某个人。

这是您唯一可以做的：

```
@Echo OFF

:: First launch the app in background mode, because some applications stops the execution of CMD.
Start /B ".\Dir\Your app.exe"

:: Then stay in background for a certain time
Timeout /T "Seconds"

:: Continue your code...
Pause&Exit 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-12T16:03:12.957

`start`++`timeout`完全`taskkill`等待**给**定的时间。由于如果进程提前退出，我需要**停止等待**，因此我在 C++ 中创建了自己的解决方案。

该`tuxliketimeout`程序模仿[GNU 超时](https://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)。随意下载和编译

[https://github.com/cernoch/tuxliketimeout](https://github.com/cernoch/tuxliketimeout)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-11T13:45:37.170

在 Windows 10 中，最简单的方法是使用[scriptrunner](https://ss64.com/nt/scriptrunner.html)：

通过运行暂停命令来演示超时（这将杀死被调用的进程）：

```
ScriptRunner.exe -appvscript cmd "/c" "pause" -appvscriptrunnerparameters -wait -timeout=20 
```

# java - Eclipse Juno 指标插件

> ID：13515260
> 
> 赞同：5
> 
> 时间：2012-11-22T14:53:22.060
> 
> 标签：java, eclipse, metrics

Eclipse 的 JUNO 版本存在哪些 Eclipse 指标插件？我尝试了一些通用指标插件，但没有一个在 Eclipse 的 JUNO 版本中正常运行。差点忘了，我们使用 Java 作为编程语言。

我想要圈复杂度、代码行、方法长度、参数过量等指标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:57:37.860

查看以下内容，它们在 Juno 上运行良好：

*   [checkstyle](http://eclipse-cs.sourceforge.net/) : 代码风格，包括方法长度等
*   [再次检查样式](http://eclipse-cs.sourceforge.net/)：重复代码检测
*   [再次](http://eclipse-cs.sourceforge.net/)检查样式：圈复杂度
*   [cobertura](http://marketplace.eclipse.org/content/ecobertura#.UK49jCHA-xs)：用于测试覆盖率
*   [findbugs](http://findbugs.sourceforge.net/manual/eclipse.html#d0e1647)：代码中的潜在缺陷
*   [Google Plugin for eclipse](https://developers.google.com/eclipse/) google 自己的代码质量工具，包括测试生成

我想您不是在寻找分析器，但如果您是，请考虑（新复活？）[TPTP](http://www.eclipse.org/tptp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T09:17:56.150

您还可以查看名为“Metrics”的 Eclipse 插件。它是旧的，但它似乎工作正常。

[http://metrics.sourceforge.net/](http://metrics.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T09:22:50.337

我发现[https://github.com/leonardobsjr/metrics3](https://github.com/leonardobsjr/metrics3)源代码在 eclipse 4.5 上工作正常 :)

您需要自己编译和导出插件。

或者您可以使用我的更新站点： [https ://github.com/qxo/eclipse-metrics-plugin/raw/master/updatesite/](https://github.com/qxo/eclipse-metrics-plugin/raw/master/updatesite/)

来自： [https ://github.com/qxo/eclipse-metrics-plugin](https://github.com/qxo/eclipse-metrics-plugin)

现在（1.3.9）您必须在“Java Perspective”中使用此插件在项目上启用指标（右键单击项目 -> 属性 -> 指标 -> “启用指标”）。

# c++ - C++ 集：不匹配 - 运算符

> ID：13515261
> 
> 赞同：2
> 
> 时间：2012-11-22T14:53:28.913
> 
> 标签：c++, stl, set

我有一个集合，即 multiset 类型，我正在尝试使用 upper_bound 函数来查找迭代器返回的元素的索引。通常使用向量，如果我得到迭代器并从中减去 vector.begin() 以获得答案，它就可以工作。
但是，当我用一个集合尝试这个时，它会给出一个 STL 错误，说“与运算符 - 不匹配”...（省略 STL 详细信息）

这是否有一个根本原因（集合被实现为 RB-trees 和所有）。如果是这样，任何人都可以提出替代方案吗？（我正在尝试解决编程网站上的问题）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T14:59:36.617

是的，有不同类型的迭代器，`operator-`不支持非随机访问的集合迭代器。

您可以使用`std::distance( mySet.begin(), iter );`

我认为对于 std::set （和 multiset ），`O(log N)`与向量的恒定时间和列表的线性相比，这可能是一个操作。

您确定要将数据存储在`std::multiset`? 您可以改用排序向量。向量会变慢的地方是如果它被定期编辑，即你试图从任何地方插入和删除元素，同时保持其排序状态。如果数据构建一次然后多次访问，排序向量有时会更有效。

如果数据集非常大，请考虑使用`std::deque`而不是`std::vector`因为`deque`在不需要连续内存块方面更具可扩展性。

# c++ - boost 无法使用 apple llvm program_options 编译

> ID：13515262
> 
> 赞同：0
> 
> 时间：2012-11-22T14:53:31.093
> 
> 标签：c++, boost

我使用的是 LLVM GCC 4.2 编译器，但出于某种原因，我想改用 Apple LLVM 编译器。我使用一些静态链接的 boost 库。

我的代码部分在这里：

```
#include <boost/program_options/detail/config_file.hpp>

std::set<std::string> options;
std::map<std::string, std::string> parameters;
options.insert("*");

for (config_file_iterator i(config, options), e ; i != e; ++i) 
    parameters[i->string_key] = i->value[0]; 
```

当我将 Xcode 4.5.1 中的编译器更改为 Apple LLVM 4.1 时，它给了我这个错误：

```

    在 A.cpp:16 包含的文件中：
    boost_1_46_1/boost/program_options/detail/config_file.hpp:163:17：错误：
    调用模板中不可见的函数“to_internal”
    定义也没有通过依赖于参数的查找找到
        s = to_internal(in);
            ^
    A.cpp:82:39：注意：在成员函数的实例化中
    'boost::program_options::detail::basic_config_file_iterator::getline'
    在这里请求
        for (config_file_iterator i(config, options), e ; i != e; ++i)
                                  ^
    boost_1_46_1/boost/program_options/detail/convert.hpp:70:48：注意：
    'to_internal' 应在调用站点之前声明或
    在命名空间'__gnu_cxx'

        BOOST_PROGRAM_OPTIONS_DECL std::string to_internal(const std::string&);

```

![在此处输入图像描述](../Images/665a4809818b4d9f095795b7b335c19b.png)

有人知道解决方案是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:26:15.207

请在 顶部找到`detail/config_file.hpp`以下行：

```
#include <boost/program_options/detail/convert.hpp> 
```

并删除`#if`并`#endif`围绕该线。在那之后一切都应该很好。该修复程序已包含在当前版本中。

# php - How to find the error which is causing a segmentation fault in a script run by cron job

> ID：13515263
> 
> 赞同：1
> 
> 时间：2012-11-22T14:53:42.587
> 
> 标签：php, linux, segmentation-fault, wget

I have a cron job that executes once per day:

```
0 20 * * * /usr/bin/wget --timeout=10800 -O /home/File.txt http://www.site.com/script.php 
```

and so far all was fine, but recently I found out the script just stops.

I looked in the `/var/log/httpd/error_log` (it's a CentOS) and found this:

```
[Thu Nov 21 21:30:32 2012] [notice] child pid 8985 exit signal Segmentation fault (11) 
```

Now, this means two things: the script was successfully running for about hour and a half, but then the segmentation fault happened. Ususally the script takes around 2 hours to complete, so it lacks around half an hour to complete it's job.

Now, I can't find the error which causes the script to stop even though I do have error_reporting turned on.

I'm wondering, is there some way so that I can find a potential error line which caused the script to terminate?

I did try google, and SO, ofc, and tried to achieve the same as on [this question here on SO](https://stackoverflow.com/questions/13298619/cron-job-mysteriously-stopped-running/13318816#13318816) by doing this:

```
0 20 * * * /usr/bin/wget --timeout=10800 -O /home/File.txt http://www.site.com/script.php 2>1& >> /home/log.txt 
```

but the log file is empty. I'm not so good at managing linux so it may be that my command is wrong in this cronjob, so please steer me right.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:58:38.853

尝试这个

```
0 20 * * * /usr/bin/wget --timeout=10800 \
-O /home/File.txt http://www.site.com/script.php  >> /home/log.txt 2>&1 
```

2>&1 部分告诉将 STDERR 发送到与 STDOUT 相同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:10:24.360

Cron 将命令的输出发送到正在执行它的用户的电子邮件中。

要使该系统正常工作，您必须安装邮件守护程序，例如 exim 或 postfix。

此外，您要求 wget 在 /home/ 目录中写入文件，我认为是非 root 用户，这意味着您不能这样做。如果你是 root 你不应该那样做。

# php - wampserver php5.3.1 and Pear:DB problems

> ID：13515265
> 
> 赞同：2
> 
> 时间：2012-11-22T14:53:46.677
> 
> 标签：php, pear, wampserver

I've installed PHP5.3.1 on top of 5.3.0 on my Windows 7 Pro laptop. I've installed Smarty, Pear and the relevant Pear packages. I use a config.php file to set up my development site on Win separately from my production sites which run on Linux. I've checked phpinfo and everything is set up correctly.

Now when I try and open up my Home page (login page) on 5.3.1, It thinks for about a minute, doesn't load, leaving a blank screen, and generates no errors. I've tried hiding parts of the config file and the stumbling block appears to be:

```
require_once "DB.php";
$db = DB::connect("mysql://root:$dbpass@$dbhost/$dbname") or die("unable to connect to $dbhost");
$db_hw = DB::connect( "mysql://root:$dbpass@$dbhosthw/egret" ) or die("unable to connect to $dbhost_hw"); 
```

My service uses two different database servers. I'm not even getting the die("") statements displaying.

Any suggestions as to what might be wrong?

George

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:15:58.843

这是行不通的。在您的情况下，您使用第二个连接覆盖连接。使用 mysql_connect 或者`mysqli_connect`你得到一个资源，你可以用指定的资源处理你的查询：

[如何在一个网页上连接多个 MySQL 数据库？](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)

但是当您使用 PEAR 时，您访问的是同一个类`DB::connect`，这会覆盖数据库资源和连接。

`disconnect()`在您的情况下，您可以在新连接之前调用该函数：

```
require_once "DB.php";
$db = DB::connect("mysql://root:$dbpass@$dbhost/$dbname") or die("unable to connect to $dbhost");
$db->disconnect();

$db = DB::connect( "mysql://root:$dbpass@$dbhosthw/egret" ) or die("unable to connect to $dbhost_hw"); 
```

# c# - Why ListView background can not refresh?

> ID：13515271
> 
> 赞同：0
> 
> 时间：2012-11-22T14:54:21.863
> 
> 标签：c#, wpf, listview, refresh

I want change the ListView's item background dynamicly, so I using the Timer as the event trigger. But after the timer is triggered, the background color can not refresh automatically until I resize the window. Here is my code snippet:

```
 public MainWindow()
    {
        InitializeComponent();
        ObservableCollection<Object> People = new ObservableCollection<Object>();
        for (int i = 0; i < 10; i++)
            People.Add(new Person());
        listView.ItemsSource = People;

        System.Timers.Timer _timer = new System.Timers.Timer(10);
        _timer.Elapsed += new System.Timers.ElapsedEventHandler(theObjectDroped);
        _timer.AutoReset = true;
        _timer.Enabled = true;
    }

    public void theObjectDroped(object source, System.Timers.ElapsedEventArgs e)
    {
        for (int i = 0; i < listView.Items.Count; i++)
        {
            Dispatcher.Invoke(new Action<int, Brush>(ModifyListViewBackground), i, Brushes.Red);
        }
    }

    private void ModifyListViewBackground(int i, Brush brush)
    {
        listView.ItemContainerGenerator.StatusChanged += (s, e) =>
        {
            ListViewItem row = listView.ItemContainerGenerator.ContainerFromIndex(i) as ListViewItem;
            if (row != null && row.Background != brush)
            {
                row.Background = brush;
            }
        };
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:29:13.013

分析您`ModifyListViewBackground`的方法 - 您仅在执行后附加事件处理程序并更改背景。

`listView.ItemContainerGenerator.StatusChanged`您是否在代码中的其他地方触发？如果不是，这可能是最可能的情况。另请记住，事件处理程序可以堆叠多次，因此每次触发计时器时，您都需要清理（分离）旧的事件处理程序。

尝试测试以下版本之一`ModifyListViewBackground`。请注意，它们更具示意性，因为我目前没有 IDE - 分离以前的事件处理程序，附加新的和触发事件：

```
private void ModifyListViewBackground(int i, Brush brush)  
    {  
        listView.ItemContainerGenerator.StatusChanged -=StatusChangedCompleted;
        listView.ItemContainerGenerator.StatusChanged +=StatusChangedCompleted;
        listView.ItemContainerGenerator.StatusChanged();
    }
private void StatusChangedCompleted(object source, SomeEventArgs e)
{
    ListViewItem row = listView.ItemContainerGenerator.ContainerFromIndex(i) as ListViewItem;  
    if (row != null && row.Background != brush)  
    {  
        row.Background = brush;  
    }  
} 
```

或者，如果不需要事件处理程序，这也应该起作用：

```
private void ModifyListViewBackground(int i, Brush brush)  
    {  
        ListViewItem row = listView.ItemContainerGenerator.ContainerFromIndex(i) as ListViewItem;  
            if (row != null && row.Background != brush)  
            {  
                row.Background = brush;  
            }    
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:27:51.340

在这一行中，您正在为 StatusChanged 事件设置事件处理程序：

```
 listView.ItemContainerGenerator.StatusChanged += (s, e) => 
```

当您执行诸如更改窗口大小之类的操作时会触发此事件，这就是为什么您在执行诸如调整窗口大小之类的操作时只会看到背景颜色更改的原因。

要使其在计时器事件被触发后立即工作，只需在您的`ModifyListViewBackground`方法中删除事件处理程序：

```
 private void ModifyListViewBackground(int i, Brush brush)
    {
        ListViewItem row = listView.ItemContainerGenerator.ContainerFromIndex(i) as ListViewItem;
        if (row != null && row.Background != brush)
        {
            row.Background = brush;
        }
    } 
```

注意您的计时器设置为在 10 毫秒后触发。这是非常快的，当尝试这个时，它几乎是瞬间的。我将其设置为 1 秒（1000 毫秒），以便我可以看到超时后触发的事件。

# javascript - 如何在ckeditor 3中对齐图像中心？

> ID：13515277
> 
> 赞同：1
> 
> 时间：2012-11-22T14:54:37.737
> 
> 标签：javascript, ckeditor, wysiwyg, fckeditor

在 ckeditor 3 的最新可用版本中似乎没有办法使图像居中。包含一个错误，但没有解决方案：

[http://dev.ckeditor.com/ticket/8938](http://dev.ckeditor.com/ticket/8938)

看起来它在ckeditor 4 beta上也没有改变。

我想知道是否有人成功编辑了 ckeditor 3 以允许图像居中？

谢谢，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:27:37.793

这个问题绝对与 ckeditor 无关。自 HTML 4 起，该标签的`align`属性已`<img>`被弃用，自 HTML 5 起已被删除。

来自 W3C 网站^([来源](http://dev.w3.org/html5/markup/img.html))：

> img 元素上的 align 属性已过时。改用 CSS。

现在，即使该属性在 HTML 中使用但在 ckeditor 中没有使用 - 您可以在最终输出中看到它（在生产中，最终网站）。

有一些不同的解决方案：

*   在 HTML5 中，您可以使用`<center><img ... /></center>`或`<img style="margin:0px auto;display:block" ... />`

*   在任何 HTML 版本中，您都可以使用`<div style="text-align: center;"><img ... /></div>`（或任何其他标签容器，例如`<p>` `<span>`等）。

# java - JPQL: unknown state or association field (EclipseLink)

> ID：13515279
> 
> 赞同：0
> 
> 时间：2012-11-22T14:55:01.497
> 
> 标签：java, hibernate, jpa, jpa-2.0, eclipselink

I have an Employee entity which inherits from Person and OrganizationalUnit:

OrganizationalUnit:

```
@MappedSuperclass
public abstract class OrganizationalUnit implements Serializable
{
    @Id
    private Long id;

    @Basic( optional = false )
    private String name;

    public Long getId()
    {
        return this.id;
    }

    public void setId( Long id )
    {
        this.id = id;
    }

    public String getName()
    {
        return this.name;
    }

    public void setName( String name )
    {
        this.name = name;
    }

    // ...
} 
```

Person:

```
@MappedSuperclass
public abstract class Person extends OrganizationalUnit
{
    private String lastName;

    private String firstName;

    public String getLastName()
    {
        return this.lastName;
    }

    public void setLastName( String lastName )
    {
        this.lastName = lastName;
    }

    public String getFirstName()
    {
        return this.firstName;
    }

    public void setFirstName( String firstName )
    {
        this.firstName = firstName;
    }

    /**
     * Returns names of the form "John Doe".
     */
    @Override
    public String getName()
    {
        return this.firstName + " " + this.lastName;
    }

    @Override
    public void setName( String name )
    {
        throw new UnsupportedOperationException( "Name cannot be set explicitly!" );
    }

    /**
     * Returns names of the form "Doe, John".
     */
    public String getFormalName()
    {
        return this.lastName + ", " + this.firstName;
    }

    // ...
} 
```

Employee entity:

```
@Entity
@Table( name = "EMPLOYEES" )
@AttributeOverrides
(
    {
        @AttributeOverride( name = "id", column = @Column( name = "EMPLOYEE_ID" ) ),
        @AttributeOverride( name = "name", column = @Column( name = "LASTNAME", insertable = false, updatable = false ) ),
        @AttributeOverride( name = "firstName", column = @Column( name = "FIRSTNAME" ) ),
        @AttributeOverride( name = "lastName", column = @Column( name = "LASTNAME" ) ),
    }
)
@NamedQueries
(
    {
        @NamedQuery( name  = "Employee.FIND_BY_FORMAL_NAME",
                     query = "SELECT emp " +
                             "FROM Employee emp " +
                             "WHERE emp.formalName = :formalName" )
    }
)
public class Employee extends Person
{
    @Column( name = "EMPLOYEE_NO" )
    private String nbr;

    // lots of other stuff...
} 
```

I then attempted to find an employee by its formal name, e.g. "Doe, John" using the query above:

```
SELECT emp
FROM Employee emp
WHERE emp.formalName = :formalName 
```

However, this gives me an exception on deploying to EclipseLink:

```
Exception while preparing the app : Exception [EclipseLink-8030] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Error compiling the query [Employee.FIND_BY_CLIENT_AND_FORMAL_NAME: SELECT emp FROM Employee emp   JOIN FETCH emp.client   JOIN FETCH emp.unit WHERE emp.client.id = :clientId AND emp.formalName = :formalName], line 1, column 115: unknown state or association field [formalName] of class [de.bnext.core.common.entity.Employee].
Local Exception Stack: 
Exception [EclipseLink-8030] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Error compiling the query [Employee.FIND_BY_CLIENT_AND_FORMAL_NAME: SELECT emp FROM Employee emp   JOIN FETCH emp.client   JOIN FETCH emp.unit WHERE emp.client.id = :clientId AND emp.formalName = :formalName], line 1, column 115: unknown state or association field [formalName] of class [de.bnext.core.common.entity.Employee]. 
```

**Qs:**

What's wrong? Is it prohibited to use "artificial" properties in JPQL, here the WHERE clause? What are the premises here?

I checked the capitalization and spelling many times, I'm out of luck.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:57:43.793

您的类没有正式名称的映射，因此不能在查询中使用。您只能访问查询中的映射。无论如何，数据库中没有 FormalName，所以我不知道如何使用它。

您的查询将需要更改以访问名字和姓氏，方法与您在 getFormalName 代码中尝试的方式相同：

```
"SELECT emp FROM Employee emp JOIN FETCH emp.client JOIN FETCH emp.unit WHERE emp.client.id = :clientId AND CONCAT(CONCAT(emp.lastName, ', '), emp.firstName) = :formalName" 
```

请注意，您的 OrganizationalUnit 类在其字段上具有注释，因此只有字段将具有默认映射。这意味着您的表中将包含 firstName、LastName 和 Name 字段，尽管 Person 中的 getName 将名称定义为 this.firstName + " " + this.lastName。我建议删除 Person 中的 firstName/lastName 字段，而是处理 name 字段，或者您可以从 OrganizationalUnit 中删除 name 字段，并让子类以自己的方式处理 get/setname 访问器。

# git - Magit : how to see log between 2 points

> ID：13515284
> 
> 赞同：6
> 
> 时间：2012-11-22T14:55:19.560
> 
> 标签：git, emacs, emacs24, magit

I would like to know how I can see the result of command like `git log ..some-branch` in magit ?

From the [doc](http://philjackson.github.com/magit/magit.html#History) :

> Giving a prefix argument to l will ask for the starting and end point of the history. This can be used to show the commits that are in one branch, but not in another, for example. The start point can also be a range of revisions “r1..r2”. In that case “r1” is used as the start and “r2” as the end point of the history.

But I do not understand how I can give this prefix argument ? Which key sequence I should use ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-21T22:11:21.763

在当前版本的 magit 中（`2.11.0`截至撰写本文时），可以使用`l` `o`("log other") 显示日志范围，然后输入提交范围（例如：） `HEAD~5..HEAD`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:05:08.480

前缀参数是用 给出的`C-u`。但是，这似乎不适用于我的 magit。要获取远程日志，我按“l”，然后切换到“远程短”，然后按 Enter。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T16:53:38.123

`C-u` `l` `rl`对我有用：它提示输入将定义范围的两个参考。

# c# - How to do the DNS-Request in a local Proxy Server?

> ID：13515291
> 
> 赞同：0
> 
> 时间：2012-11-22T14:56:11.767
> 
> 标签：c#, http, dns, proxy

I'm writing a local Proxy server. It already works for the majority of the requests. But sometimes I have Problems when I want to resolve the Host-name. Here is what I do:

When the header of the request is received, I filter the first line out. Then I take the Request-URL (which is between the two spaces) out of that line and store it into an Uri object. After that I extract the hostname with: `string host= uri.host;` At least I do the DNS-call: `IPAddress[] ips = Dns.GetHostAddresses(host)[0];` (How do I know here, which IP of the array I should take. Whats the difference between those IP's)

Like I said, for the majority of the Requests that works fine. But there are some adresses, that cannot be resolved. Here an example: When I want to open **www.gmx.net**, I first get the HTML-File ( this works fine ). After that, the Browser reloads a couple of Web-Objects like pics, javascript and so on. Those Object of course have some URL. And one of those URLs, that cannot be resolved is: **ipv4-cout.gmx.net** . The attempt to resolve this URL results in the warning: **The stated Host is unknown**.

Another thing I need to know is: How to handle Alias-Host-names? For example: When I enter the hostname gmx.de into the Browser, it automaticaly resolves it into www.gmx.net. I know, there are Recource Reccords on a DNS-Server with type CNAME, but I dont know how to implement this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:00:37.287

我会说它们是按照 DNS 服务器发送它们的顺序返回的，我找不到任何特定顺序的参考。

[Dns.GetHostAddresses 方法](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)

在大多数情况下，只有一个 IP 地址。在 www.gmx.net 的情况下，他们确实有 2 个，理论上，这意味着您将循环请求。

```
www.gmx.net has address 212.227.223.5
www.gmx.net has address 212.227.223.4 
```

供您参考。pv4-cout.gmx.net 无法在我的机器上解析，并且在以任何其他方式访问时会导致 404。

gmx.de 无法解析为 www.gmx.net，Web 服务器上有一个 URL 重定向。

```
Connecting to www.gmx.de|212.227.223.10|:80... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: http://www.gmx.net/ [following] 
```

# haskell - What is wrong with my parsec parser?

> ID：13515296
> 
> 赞同：1
> 
> 时间：2012-11-22T14:56:27.970
> 
> 标签：haskell

I would like to get this parser to work. I am currently not quite sure where the error is. It is largely taken from the Parsec section of "Write you a scheme"

One more question: if it eventually works, are there any means to ensure that the string that starts with a question mark is always the last in the list?

```
input_text :: String
input_text = "Eval (isFib::, 1000, ?BOOL)"

data LTuple
   = Command [LTuple]
   | Number Integer
   | String String
   | Query Bool
   deriving (Eq, Ord, Show)

data Command = Rd | Read | In | Take | Wr | Out | Eval
    deriving (Eq, Ord, Show)

main :: IO ()
main = do
  case parse lindaCmd "example" input_text of
    Left err -> print err
    Right res -> putStrLn $ "I parsed: '" ++ res ++ "'"

parseList :: Parser lindaTpl
parseList = liftM Command $ sepBy1 lindaCmd  ( symbol "," )

lindaCmd =   string "rd"
         <|> string "take"
         <|> string "out"
         <|> string "eval"
         <|> do char '('
                x <- try parseList
                char ')'return x 
```

The current error message is:

```
test.hs:30:48:
    Couldn't match expected type `ParsecT s0 u0 m0 sep0'
                with actual type `String -> ParsecT s1 u1 m1 String'
    In the return type of a call of `symbol'
    Probable cause: `symbol' is applied to too few arguments
    In the second argument of `sepBy1', namely `(symbol ",")'
    In the second argument of `($)', namely
      `sepBy1 lindaCmd (symbol ",")'

test.hs:38:17:
    The function `char' is applied to three arguments,
    but its type `Char -> ParsecT s0 u0 m0 Char' has only one
    In a stmt of a 'do' block: char ')' return x
    In the second argument of `(<|>)', namely
      `do { char '(';
            x <- try parseList;
            char ')' return x }'
    In the second argument of `(<|>)', namely
      `string "eval"
       <|>
         do { char '(';
              x <- try parseList;
              char ')' return x }' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:05:23.497

第一个错误：

```
parseList = liftM Command $ sepBy1 lindaCmd  ( symbol "," ) 
```

应该是

```
parseList = liftM Command $ sepBy1 lindaCmd  ( string "," ) 
```

第二个错误，正如 dbaupp 指出的那样，

```
 <|> do char '('
            x <- try parseList
            char ')'return x 
```

应该

```
 <|> do char '('
            x <- try parseList
            char ')'
            return x 
```

这应该可以解决您现在遇到的两个错误，但我还没有检查是否还有其他错误。

* * *

编辑：

你有

```
parseList :: Parser lindaTpl 
```

但我希望你想要

```
parseList :: Parser LTuple 
```

我希望你也想要

```
lindaCmd :: Parser LTuple 
```

并且还必须修改`lindaCmd`--- 除了最后一个分支之外的所有内容似乎都想要类型`Parser String`......

# ios - 使用 Jenkins 在模拟器上运行 iOS 应用程序

> ID：13515297
> 
> 赞同：1
> 
> 时间：2012-11-22T14:56:28.230
> 
> 标签：ios, command-line, jenkins, simulator, nsrunningapplication

我正在使用 Jenkins 设置我的 CI 服务器。我可以成功构建应用程序，但现在我需要一种在模拟器中运行它的方法。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:13:46.823

你检查过 WaxSim 吗？这是一个运行模拟器的命令行应用程序。我听说过它在 Mac OSX 10.8 上无法运行的各种噪音，但他们现在可能已经解决了这个问题。

[https://github.com/square/waxsim](https://github.com/square/waxsim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:59:01.910

ios-sim (https://github.com/phonegap/ios-sim) 工作正常。只要确保构建应用程序的调试版本，否则它会在部署后进入后台。

# ssh - Open MPI 无法通过 SSH 启动远程节点

> ID：13515298
> 
> 赞同：2
> 
> 时间：2012-11-22T14:56:32.743
> 
> 标签：ssh, cluster-computing, mpi, hpc, openmpi

我正在尝试在网络上的几台机器之间设置 Open MPI。Open MPI 在本地运行良好，但我无法让它在远程节点上运行。我可以 ssh 进入远程机器（没有密码）就好了，但如果我尝试类似

```
mpiexec -n 4 --host remote.host hello_c 
```

然后 ssh 连接超时。

我检查了几个教程，但他们给出的唯一配置说明是“确保您可以在没有密码的情况下通过 ssh 进入远程机器”。我做到了，但我仍然无法在远程机器上启动节点。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:48:25.787

我有同样的问题。尝试使用 rsa 证书在 ssh 中连接

编辑 03/24：这不起作用..对不起

# ruby - 运行 p1pp 时出现问题 - GLI.run 不再适用于 GLI-2

> ID：13515299
> 
> 赞同：1
> 
> 时间：2012-11-22T14:56:40.553
> 
> 标签：ruby, xmpp, publish-subscribe, gli-gem

我是 ruby​​ 新手，想试试 ProcessOne 的推送平台 (p1pp)

我已经下载了 p1pp 的源代码（来自[https://github.com/processone/p1pp](https://github.com/processone/p1pp)），尝试在 Ubuntu 12.04 中运行它。

```
$./bin/p1.rb 
```

得到错误：

```
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- gli (LoadError)
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from ./bin/p1.rb:16 
```

使用命令安装 gli

```
gem install gli 
```

这次我得到了

```
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- blather/client/dsl (LoadError)
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /home/krishna/PubSub/p1pp-master/lib/p1pp/p1_publisher.rb:2
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from ./bin/p1.rb:18 
```

安装的废话：

```
gem install blather 
```

现在我被困在这里：

```
You should include GLI::App instead
GLI.run no longer works for GLI-2, you must just call `run(ARGV)' instead
either fix your app, or use the latest GLI in the 1.x family 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:41:04.197

自己找到了解决方案！

包括 GLI::App 而不是 GLI 并将最后一行中的“exit GLI.run(ARGV)”更改为“exit run(ARGV)

在这里找到这个信息：

[1] [http://forums.pragprog.com/forums/200/topics/10975](http://forums.pragprog.com/forums/200/topics/10975)

[2] [https://github.com/bencevans/hnews/issues/3](https://github.com/bencevans/hnews/issues/3)

# c++ - 模板模式匹配

> ID：13515300
> 
> 赞同：5
> 
> 时间：2012-11-22T14:56:41.260
> 
> 标签：c++, templates, c++11

考虑这个类模板：

```
template <typename T1, typename T2, bool B>
class SomeClass { }; 
```

现在，我想提供两个基于`B==true`和的实现`B==false`。也就是说，我想说的是：

```
template <ANYTHING, ANYTHING, true> class SomeClass {
// First implementation
};

template <ANYTHING, ANYTHING, false> class SomeClass {
// Second implementation
}; 
```

如何在 C++(11) 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T14:59:03.363

部分专业化：

```
// primary
template<typename X, typename Bool>
struct Foo;

template<typename X>
struct Foo<X, std::true_type> {};

template<typename X>
struct Foo<X, std::false_type> {};

// use
Foo<X, std::true_type> x; 
```

我使用类型包装器`bool`，但您也可以使用非类型模板参数来做到这一点：

```
// primary
template<typename, bool>
struct Foo;

template<typename X>
struct Foo<X, true> {};

template<typename X>
struct Foo<X, false> {};

// use
Foo<X, true> x; 
```

有时您可以使用默认参数中的元编程计算用于部分专业化的值：

```
// primary
template<typename X, typename is_integral_ = std::is_integral<X>::type>
struct Foo; 
```

这使得配置变量可以被用户选择覆盖。

```
struct my {};
Foo<my, std::true_type> x; 
```

为了防止这种情况，通过继承调度：

```
// primary, where Foo_impl is any of the above
template<typename X>
struct Foo : public Foo_impl<X> {}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T14:59:44.433

它被称为*部分专业化*：

```
template <typename T1, typename T2> class SomeClass<T1 ,T2, true> {
// First implementation
};

template <typename T1, typename T2> class SomeClass<T1, T2, false> {
// Second implementation
}; 
```

顾名思义，它与（完整）*专业化*相关，如下所示：

```
template <> class SomeClass<int, char, false> {
// dedicated version for T1=int, T2=char, B=false
}; 
```

* * *

请注意，如果大多数实现是相同的，您还可以编写一个通用版本，其中只有依赖于 bool 参数的代码被委托给一个*trait*类。在这种情况下，特征类将完全专用于单个参数。

# c# - 在 WinRT 中将视频上传到 Youtube

> ID：13515303
> 
> 赞同：2
> 
> 时间：2012-11-22T14:56:59.543
> 
> 标签：c#, windows-8, windows-runtime, youtube-api, windows-store-apps

我正在尝试将视频从 Windows 应用商店应用程序（C# + XAML）上传到 Youtube。使用 OAuth 验证部分非常容易。但上传本身并不是那么容易。我真的被困住了，不知道下一步该去哪里。在典型的 .Net 应用程序中，您可以使用“google-gdata”客户端库，但它不适用于 Windows 应用商店应用程序。

有没有人试过这个？并成功？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:35:52.300

您应该尝试自己上传视频文件。可能是这个[HttpClient 示例](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)可以很方便地开始。Laurent 再次与 MVVM light进行了一次[有益的谈话](http://vimeo.com/53068482)

# sorting - CUDA 推力和 sort_by_key

> ID：13515308
> 
> 赞同：4
> 
> 时间：2012-11-22T14:57:10.710
> 
> 标签：sorting, cuda, permutation, thrust

我正在 CUDA 上寻找一种排序算法，它可以对元素数组 A（双精度）进行排序，并为该数组 A 返回一个键数组 B。我知道`sort_by_key`Thrust 库中的函数，但我希望我的元素数组 A维持不变。我能做些什么？

我的代码是：

```
void sortCUDA(double V[], int P[], int N) {

        real_t *Vcpy = (double*) malloc(N*sizeof(double));
        memcpy(Vcpy,V,N*sizeof(double));

        thrust::sort_by_key(V, V + N, P);
        free(Vcpy);
} 
```

我正在将推力算法与我在顺序 cpu 上的其他算法进行比较

```
N               mergesort       sortCUDA
113             0.000008        0.000010
226             0.000018        0.000016
452             0.000036        0.000020
905             0.000061        0.000034
1810            0.000135        0.000071
3621            0.000297        0.000156
7242            0.000917        0.000338
14484           0.001421        0.000853
28968           0.003069        0.001931
57937           0.006666        0.003939
115874          0.014435        0.008025
231749          0.031059        0.016718
463499          0.067407        0.039848
926999          0.148170        0.118003
1853998         0.329005        0.260837
3707996         0.731768        0.544357
7415992         1.638445        1.073755
14831984        3.668039        2.150179
115035495       39.276560       19.812200
230070990       87.750377       39.762915
460141980       200.940501      74.605219 
```

推力性能还不错，但我认为如果我使用 OMP 可能很容易获得更好的 CPU 时间

我认为这是因为 memcpy

解决方案：

```
void thrustSort(double V[], int P[], int N)
{
        thrust::device_vector<int> d_P(N);
        thrust::device_vector<double> d_V(V, V + N);
        thrust::sequence(d_P.begin(), d_P.end());

        thrust::sort_by_key(d_V.begin(), d_V.end(), d_P.begin());

        thrust::copy(d_P.begin(),d_P.end(),P);
} 
```

其中 V 是我要排序的双精度值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:25:33.853

您可以修改比较运算符以排序键而不是值。@Robert Crovella 正确指出无法从主机分配原始设备指针。修改后的算法如下：

```
struct cmp : public binary_function<int,int,bool>
{
  cmp(const double *ptr) : rawA(ptr) { }

  __host__ __device__ bool operator()(const int i, const int j) const 
  {return rawA[i] > rawA[j];}

   const double *rawA; // an array in global mem
}; 

void sortkeys(double *A, int n) {
  // move data to the gpu
  thrust::device_vector<double> devA(A, A + n);
  double *rawA = thrust::raw_pointer_cast(devA.data());

  thrust::device_vector<int> B(n);
  // initialize keys
  thrust::sequence(B.begin(), B.end());
  thrust::sort(B.begin(), B.end(), cmp(rawA));
  // B now contains the sorted keys
 } 
```

这是arrayfire的替代方案。虽然我不确定哪一个更有效，因为 arrayfire 解决方案使用了两个额外的数组：

```
void sortkeys(double *A, int n) {
   af::array devA(n, A, af::afHost);
   af::array vals, indices;
   // sort and populate vals/indices arrays
   af::sort(vals, indices, devA);
   std::cout << devA << "\n" << indices << "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:12:30.787

这个数组有多大？如果内存可用，就速度而言，最有效的方法可能是在排序之前复制原始数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:40:27.017

基于@asm 提供的答案（我无法让它工作），这段代码似乎对我有用，并且只对键进行排序。但是，我相信它仅限于键按顺序 0、1、2、3、4 ......对应于（双）值的情况。由于这是一种“索引值”排序，因此可以将其扩展到任意键序列的情况，也许通过进行索引复制。但是，我不确定生成索引序列然后重新排列原始键的过程是否比将原始值数据复制到新向量（对于任意键的情况）更快。

```
#include <iostream>
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>
#include <thrust/sort.h>

using namespace std;

__device__  double *rawA; // an array in global mem

struct cmp : public binary_function<int, int, bool>
{
  __host__ __device__  bool operator()(const int i, const int j) const
  {return ( rawA[i] < rawA[j]);}
};

void sortkeys(double *A, int n) {
  // move data to the gpu
  thrust::device_vector<double> devA(A, A + n);
//  rawA = thrust::raw_pointer_cast(&(devA[0]));
  double *test = raw_pointer_cast(devA.data());
  cudaMemcpyToSymbol(rawA, &test, sizeof(double *));

  thrust::device_vector<int> B(n);
  // initialize keys
  thrust::sequence(B.begin(), B.end());
  thrust::sort(B.begin(), B.end(), cmp());
  // B now contains the sorted keys
  thrust::host_vector<int> hostB = B;
  for (int i=0; i<hostB.size(); i++)
    std::cout << hostB[i] << " ";
  std::cout<<std::endl;
  for (int i=0; i<hostB.size(); i++)
    std::cout << A[hostB[i]] << " ";
  std::cout<<std::endl;
 }

int main(){

  double C[] = {0.7, 0.3, 0.4, 0.2, 0.6, 1.2, -0.5, 0.5, 0.0, 10.0};
  sortkeys(C, 9);
  std::cout << std::endl;
  return 0;
} 
```

# teamcity - 将 Bugzilla 链接到 Teamcity 中的特定项目

> ID：13515309
> 
> 赞同：0
> 
> 时间：2012-11-22T14:57:14.223
> 
> 标签：teamcity, bugzilla

我的 teamCity 有多个项目和多个问题跟踪器（Bugzila（4 个连接）+ redmmine）。面临的问题是每个项目，如果我在我的 SVN 评论中使用数字，它会链接到 Redmine。我想将特定问题跟踪器与特定项目链接。我该如何做这个关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:53:29.463

根据 Teamcity，截至今天（2012 年 11 月 28 日）尚不支持此功能。我找到了一个替代方法。您可以做的是创建多个错误跟踪器实例，例如 Bugzilla 或 Redmine。使用正则表达式跟踪错误编号，但模式应该是唯一的。并且要记住的 ez 是将您的项目名称添加为带有错误编号的前缀，它将起作用。

# c# - 类型继承的 MongoDB 集合错误 (FileFormatException)

> ID：13515312
> 
> 赞同：0
> 
> 时间：2012-11-22T14:57:27.673
> 
> 标签：c#, mongodb, inheritance

这是我使用 Mongo（以及一般的 NoSQL）的最初几天，所以我可能正在尝试一些只有在我脑海中才有可能的东西。

**设置：**

数据库：MongoDB 2.2.1

接口：来自 nuget 的最新 10gen c# 驱动程序

我有一个像这样的普通班

```
public class User { public string userName {get;set;} } 
```

然后像这样的特定于应用程序的实现

```
public class App1User : User { public int appSpecificProperty { get;set; } } 
```

**问题：**

在我的应用程序中，我可以将保存为 User 类型的记录加载为 User 或 App1User。不幸的是，一旦我使用 App1User 类型保存记录，我就不能再将它作为用户加载（FileFormatException：元素'appSpecificProperty'不匹配用户类的任何字段或属性）。

我加载这样的项目：

```
var collection = mongDB.GetCollection<User>("users");
var query = new QueryDocument("username" : userName);
var user = collection.Find(query).SingleOrDefault(); // error here if record was type App1User 
```

这是一个问题，因为我想在多个项目中使用用户身份验证库，然后只需扩展用户对象以添加应用程序特定的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:16:04.233

我发现您需要使用此属性标记您的 Parent 类

```
[BsonDiscriminator("baseuser", RootClass = true)] 
```

不幸的是，这只会修复新记录，我还没有弄清楚如何将此修复应用于无法加载的现有记录。

# ruby-on-rails - 从对象数组中获取关联数组？

> ID：13515316
> 
> 赞同：1
> 
> 时间：2012-11-22T14:57:38.870
> 
> 标签：ruby-on-rails, ruby

我有一个数组`Pictures`。每张图片`has_many`评论。

如果我有一组图片`@pictures`，如何从所有图片中获取具有特定属性的所有评论`@pictures`？以下代码是否有一个不错的 Ruby 单行代码？：

```
@comments = []
@pictures.each do |pic|
  pic.comments.each do |comment|
    if comment.text == "test"
      @comments << comment
    end
  end
end 
```

注意：我知道我可能可以从数据库查询的一行中得到这个，但我认为使用我已经拥有的数据会更有效，而不是重新查询数据库中的所有图片，当我只关心我已经拥有的图片的某个子集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T15:27:00.707

```
@comments =
@pictures
.flat_map(&:comments)
.select{|comment| comment.text == "test"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:21:40.630

`map`+`select`应该可以解决问题：

```
@comments = @pictures.map(&:comments).flatten.select{|c| c.text == "test"} 
```

# javascript - jQuery .keyup() 无限触发

> ID：13515319
> 
> 赞同：2
> 
> 时间：2012-11-22T14:57:43.320
> 
> 标签：javascript, jquery

我正在尝试从输入框中获得有关已输入的字母的即时反馈。输入的最大长度为 1 个字符，我希望 jQuery 在用户举起输入字符后的键时提醒该值。

以下内容立即检测到该值，但随后会一直循环下去。这不是严格意义上的问题，但似乎是过度紧张。

```
$("#captcha").keyup(function(e) {
    ( $(this).val() == 'w' ) ? $(this).css("border-bottom","2px dotted #27bbb1") : $(this).css("border-bottom","2px dotted #ED0664") ;
    //e.preventDefault();
}); 
```

`change()`不会作为事件起作用，因为这仅在用户更改焦点时触发，我在按键后立即需要它。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T15:02:41.090

您可能正在使用 enter 键来关闭警报，这也会触发 keyup 事件。试试这个：

```
$("#captcha").keyup(function() {
    $(this).blur();
    var val = $(this).val();
    alert( val );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:05:58.857

你的脚本对我来说很好。试试我用你的脚本创建的这个 js fiddle。通过以下修改

```
 <form>
  <input id="target" type="text" value="Hello there" />
</form>
<div id="other">
  Trigger the handler
</div>​

$("#target").keyup(function() {
    val = $(this).val();
    alert( val );
});
​ 
```

[你的脚本工作](http://jsfiddle.net/92Z5q/)

# python - Python XML 拉解析器

> ID：13515330
> 
> 赞同：0
> 
> 时间：2012-11-22T14:58:25.190
> 
> 标签：python, xml, xml-parsing, xmlpullparser

我正在尝试使用 Python 解析 XML 文件。由于 XML 的大小，我想使用 Pull Parser。我找到[了这个](http://wiki.python.org/moin/PullDom)。

我的代码以

```
doc = pulldom.parse("myfile.xml")
for event, node in doc:
    # code here... 
```

我在用

```
if (node.localName == "b"): 
```

获取 XML 标记名称，它工作正常。

我找不到怎么做的是从标签之间获取文本。使用`node.nodeValue`退货`None`。

我可以`node.toxml()`用来获取节点的完整 XML，但我只想要标签之间的文本。除了使用正则表达式替换从标签中取出标签之外，还有其他方法`node.toxml()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:23:59.887

`START_ELEMENT`对于每个带有文本的标签 - a和 an ，您有两个本地名称为“b”的节点`END_ELEMENT`。通常你应该收到这样的东西：

```
START_ELEMENT
CHARACTERS
END_ELEMENT 
```

因此，您正在寻找匹配的起始元素之后的字符。您可能想尝试这样的事情：

```
from xml.dom.pulldom import CHARACTERS, START_ELEMENT, parse

doc = parse("myfile.xml")
text_expected = False
for event, node in doc:
    print event, node
    if text_expected:
        text_expected = False
        if event != CHARACTERS:
            # strange .. there should be some
            continue
        print node.data
    else:
        text_expected = (event == START_ELEMENT) and (node.localName == "b") 
```

有了这个`myfile.xml`

```
<a>
    <b>c1</b>
    <b>c2</b>
</a> 
```

我得到输出

```
c1
c2 
```

请注意，您可能需要`strip()`每个字符串，并且必须忽略所有其他`CHARACTERS`事件。两个元素之间的每个换行符和空格都会生成一个`CHARACTERS`- 事件。

# perl - 我如何在 perl selenium webdriver 中获取 http 请求和响应时间以进行性能测试

> ID：13515331
> 
> 赞同：0
> 
> 时间：2012-11-22T14:58:25.023
> 
> 标签：perl, selenium-webdriver, performance-testing

我正在寻找***Selenium Remote Driver***中的页面加载时间。我正在使用***perl***。
我已经使用***NetExport尝试过******Firebug***，但是如何将这些结果与 selenium 测试同步？ 我可以通过在执行前后添加时间戳来获取每个测试用例的时间。但我想要客户端时间。

 *我不想在这里使用 jmeter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:21:12.900

在客户端和服务器端检查性能有利有弊。

客户端：几乎准确....但它不考虑页面加载时间和时间在页面完全加载后开始。

服务器端：易于生成......但时间还包括网络延迟。

因此，在这两个标准中的选择纯粹是基于需求。

来到客户端通知时间点...我建议您使用 JavaScript 和 Selenium（C# 和 JavaScript 代码片段）

```
 IJavaScriptExecutor js = (IJavaScriptExecutor) driver;
    js.ExecuteScript("SetTimefunction();");
    // Your Automation Code goes Here
    js.ExecuteScript("return CalculateTime();"); 
```

页面中的 JavaScript 代码如下所示：

```
//Global variable in your page for start time of execution.
var Start_Global_Time;

//Sets the start time of your execution
function SetTimefunction(){
 Start_Global_Time=new Date();
}

//Calculate Difference between the Exec & Start Time
function CalculateTime(){
 var Exec_end_time=new Date();
 return Exec_end_time-Start_Global_Time;
} 
```*

# json - REST JSON Grails 中的异常 java.lang.StringIndexOutOfBoundsException

> ID：13515332
> 
> 赞同：1
> 
> 时间：2012-11-22T14:58:28.963
> 
> 标签：json, rest, grails, grails-orm

我为 Grails 使用了插件“JSON RESTful API for GORM”，但出现了下一个异常：

```
Error 500: Internal Server Error

java.lang.StringIndexOutOfBoundsException
Message
String index out of range: -1
Around line 64 of JSONDomainMarshaller.groovy 
```

但这只发生在我的类域引用另一个类域时，另一个简单的类域运行完美。

我希望你能帮忙。

# c - 畸形的 dns 响应

> ID：13515334
> 
> 赞同：0
> 
> 时间：2012-11-22T14:58:35.340
> 
> 标签：c, sockets, dns

我正在尝试向我的浏览器发送一条 dns 响应消息，现在我创建了一些结构并为 drupal.org 的网站填写了一个。

当我发送响应时，wiresharks sais 格式不正确，有人可以看看吗？

```
dnsresponse response;
    unsigned char buf[sizeof response];

    response.id = (unsigned short) htons(GetCurrentProcessId());
    response.response = 1;
    response.opCode = 0;
    response.authoritative = 0;
    response.truncated = 0;
    response.recursion = 1;
    response.recursionAvField = 1;
    response.z = 0;

    response.replyCode = 0;

    response.questions = 1;
    response.answer = 1;
    response.authorityRRS = 0;
    response.additionalRRS = 0;

    response.qName = (unsigned char *)malloc(sizeof("www.drupal.org"));
    response.qType = 1;
    response.qClass = 1;

    response.aName = (unsigned char *)malloc(sizeof("www.drupal.org"));
    response.aType = 1;
    response.aClass = 1;
    response.ttl = 0;
    response.dataLength = 9;
    response.addr = 2362640912;

    memcpy(buf, &response, sizeof response); 
```

我的结构如下：

```
typedef struct
{
unsigned short id; // ID nummer
unsigned short response :1; // 1 is reply 0 is query
unsigned short opCode :4;
unsigned short authoritative :1; // DNS server is authoritative server
unsigned short truncated :1;
unsigned short recursion :1; // Recursie of niet
unsigned short recursionAvField :1; // Recursie in reply
unsigned short z :3;
//unsigned short aa;
//unsigned short nAD;
unsigned short replyCode :4;

unsigned short questions;
unsigned short answer;
unsigned short authorityRRS;
unsigned short additionalRRS;

unsigned char * qName;
unsigned short qType;
unsigned short qClass;

unsigned char * aName;
unsigned short aType;
unsigned short aClass;
int ttl :32;
unsigned short dataLength;
unsigned int addr :32;
}dnsresponse; 
```

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:59:24.390

我不知道协议级别的 dns，但你的问题是

```
malloc(sizeof("string")) 
```

不复制字符串，它只为需要的字节保留空间——提示：**strdup**

编辑：d'oh，我只阅读了 nos 评论的“获取 dns 规范”部分。对不起，重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T11:51:42.680

你的方法从根本上是有缺陷的。你不能用结构体来表达DNS数据包，因为DNS数据包中的字符串是可变长度的，即字符串后面的字段在数据包中的偏移量取决于前面字符串的长度。

您的结构用字符指针代替每个字符串，每个指针通常是一个 32 位值，指向内存中的某个其他位置。因此，当您尝试发送内存中表示的结构时，您将发送或多或少的随机 32 位值来代替字符串。

这是一个关于 DNS 数据包应该是什么样子的相当说明性的指南： [http ://www.tcpipguide.com/free/t_DNSMessageProcessingandGeneralMessageFormat.htm](http://www.tcpipguide.com/free/t_DNSMessageProcessingandGeneralMessageFormat.htm)

# java - 有没有办法使用“SevenZip.LzmaAlone”类压缩来保持压缩文件扩展名？

> ID：13515338
> 
> 赞同：1
> 
> 时间：2012-11-22T14:58:41.850
> 
> 标签：java, compression, 7zip, lzma

我正在使用 Java 进行大文件压缩。（对我来说）将我的文件压缩为 7z 文件（LZMA 压缩）是强制性的。

为此，我使用的是[7z Java SKD](http://sourceforge.net/projects/p7zip/)。我正在调用 Decoder.code(...) 方法，一切正常。我从原始文件中获得了一个压缩的 7z 文件。唯一的问题是，当我手动提取它时，我得到一个无扩展名的文件，而它应该是一个“.xml”文件......

即使通过 7z 存档，任何人都知道如何保留我的原始文件的扩展名？

# jquery - Jquery 滑块不起作用

> ID：13515339
> 
> 赞同：1
> 
> 时间：2012-11-22T14:58:41.407
> 
> 标签：jquery, jquery-ui

我正在尝试使用 Timepicker - 它是 jquery 的插件，`http://trentrichardson.com/examples/timepicker/`此插件需要滑块才能工作。

出于某种原因，我无法让滑块工作 - 我设法让正常的 jquery ui 数据选择器工作，但不能让滑块工作。

这是我当前的代码。

```
<script type="text/javascript" src="/wp-content/plugins/groupon_cart/js/jquery-ui-timepicker-addon.js"></script> 
<script type="text/javascript" src="/wp-content/plugins/groupon_cart/js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="/wp-content/plugins/groupon_cart/js/jquery-ui-1.9.1.custom.js"></script>
<script type="text/javascript" src="/wp-content/plugins/groupon_cart/js/jquery.ui.slider.js"></script> 
```

我检查了地址，他们工作。顺便说一句，我也试过不包括`jquery.ui.slider.js.`

我在页面底部执行以下操作：

```
 <div id="slider"></div>

 <script>var $j = jQuery.noConflict();
$j(document).ready(function() {

    $j(function() {
        $j( "#slider" ).slider();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:04:42.803

正如[Timepicker 网站](http://trentrichardson.com/examples/timepicker/)上所述：

您还需要包含 jQuery 和 jQuery UI 以及 datepicker 和 slider wigits。**您应该按以下顺序**将它们包含在您的页面中：

*   jQuery
*   jQueryUI（带有 datepicker 和 slider wigits）
*   时间选择器

# windows-8 - 适用于 Windows 8 的 Windows 墨迹 - 如何设置笔纹理

> ID：13515341
> 
> 赞同：2
> 
> 时间：2012-11-22T14:58:46.530
> 
> 标签：windows-8, drawing, microsoft.ink

任何人都知道是否可以将自定义纹理设置为 Windows.UI.Input.Inking 绘图笔触？如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:15:07.007

下面是来自 CodeProject 的一个很好的示例。 [http://www.codeproject.com/Articles/416878/Metro-Paint](http://www.codeproject.com/Articles/416878/Metro-Paint)

# java - 构建具有大量数据通信的系统的最佳方法是什么？

> ID：13515343
> 
> 赞同：0
> 
> 时间：2012-11-22T14:58:50.937
> 
> 标签：java, web-services, corba, apache-mina, high-traffic

你好

我有一个缓存服务器（用 Java+Lucene 框架编写），它保存大量数据并根据请求查询提供它们。

它基本上是这样工作的：

1.  在启动时，它连接数据库并将所有表存储到 RAM。
2.  它监听请求并提供适当的数据作为数组列表（大约 1000 - 20000 行）
3.  当用户访问网页时，它会连接到缓存服务器，请求并显示服务器响应。

由于内存问题，我计划在不同的实例中运行 Web 和缓存应用程序。缓存服务器作为服务，web 在 Tomcat 上。

您对如何在 Web 端和缓存服务器之间建立通信有什么建议？

我需要将带有数组列表的大量数据从一个实例传递到另一个实例。我应该考虑 Web 服务（xml 通信）、nio 套接字通信（可能是 Apache MINA）还是像 CORBA 这样的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:33:47.460

这实际上很大程度上取决于您未指定的注意事项。

1.  客户是什么？例如，如果您的客户端是运行 AJAX 的 javascript，那么显然 HTTP 上的东西比专有的 UDP 解决方案更有用。
2.  它在哪个网络上工作？本地网络的行为与互联网不同，而移动互联网则与两者截然不同。
3.  您可以对缓存进行多精细的使用？如果您使用 HTTP，您可以很好地控制（通过 HTTP 标头）客户端缓存和网络缓存，以及可以同时使用这两者的大量现有软件。

还有许多其他因素需要考虑，并且有许多现有的系统实现可以满足更常见的需求。根据您给出的（不是很详细的）描述，我建议您看一下[Redis](http://redis.io/)。

# mysql - 如何根据条件比较同一表中的行

> ID：13515344
> 
> 赞同：2
> 
> 时间：2012-11-22T14:58:53.197
> 
> 标签：mysql, sql

例如，我有这个示例数据：

```
DATE        VALUE  ID
2010-09-28  1      20000 
2010-09-28  1      50000 X
2010-09-28  3      20001 
2010-09-28  3      50001 X
2010-10-02  6      50002
2010-10-02  6      50003 
```

我的问题是我有重复的数据，我只能通过自动递增的 ID 来区分它们：重复的差异很大；我想删除最新的条目，考虑到日期和值与其对应的先前条目（标有 X）相比相等。如果行相等，如果它们没有以前的 ID（如最后 2 行），这没问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:09:25.547

在您的表中，带有 X 的值不同......我认为这是一个错误。

无论如何，如果您想在 ID 之间的差异为（例如 1）时删除重复项，您可以这样做。

**编辑**：我想我现在得到了你想要的。因此，您不会将具有连续 ID 的记录视为重复记录（这是我在开始时的想法），但您会考虑具有很大差异的重复记录。**所以让我们说 ID 之间的最大差异，这样你就不会认为它们是重复的 = X**

```
Delete From Table where ID IN 
(Select a.ID from Table a, Table b Where a.ID-b.ID > X
AND a.Date = b.Date and a.Value = b.Value) 
```

在您的示例中，如果您将 1 或更大代替 X 它将完成您想要的工作。

[用于删除的选择的 SQL FIDDLE 示例](http://sqlfiddle.com/#!2/39649/1/0)

您将在上面看到我给您的选择，您将获得要删除的 ID。

# joomla - 新文章默认状态设置为已删除

> ID：13515345
> 
> 赞同：-1
> 
> 时间：2012-11-22T14:58:59.483
> 
> 标签：joomla, joomla2.5, joomla-article

我安装了 Joomla 2.5.3。当我创建一篇新文章时，默认的 STATUS 字段设置为“TRASHED”。

现在我知道 ARTICLE.XML 控制它，但是它不起作用。我在 XML 中将默认属性设置为什么并不重要，它仍然保持为 TRASHED。

我在代码中找不到生成它的位置。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:27:30.447

我刚刚安装了一个干净的 2.5.3 副本，我无法重现您的问题。

我建议您：

*   [从此处](http://joomlacode.org/gf/download/frsrelease/16804/73116/Joomla_2.5.3-Stable-Full_Package.zip)使用干净副本重新安装 2.5.3 （与我使用的相同）。
*   更新至最新的 2.5 版本（当前为 2.5.8），可在[此处](http://www.joomla.org/download.html)下载。

如果在任何一种情况下您都想保留您的内容，您可以使用[Akeeba Backup](http://extensions.joomla.org/extensions/access-a-security/site-security/backup/1606)。

# html - 固定在包装阴影边框上的位置

> ID：13515350
> 
> 赞同：2
> 
> 时间：2012-11-22T14:59:20.067
> 
> 标签：html, css

我正在编辑的网站是 www.bedriftsdesign.no。

我有一个阴影图像元素（shadow.png）包裹在身体周围。

```
#wrapper {
background: url('shadow.png') no-repeat;
width: 1282px;
margin: auto; 
```

我想让阴影在内容在里面滚动时保持固定，这样看起来就好像它在一个凹凸上滚动。我试图添加位置：像这样固定

```
#wrapper {
background: url('shadow.png') no-repeat;
width: 1282px;
margin: auto;
    position: fixed; 
```

但这只会使整个页面粘在一起，并且没有任何滚动。我只是不明白我应该如何进行这项工作。

任何解决该问题的帮助将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:02:38.160

您可以像这样设置 body bg img 并让网站的其余部分滚动：

```
body {    
background: url('shadow.png') no-repeat;    
background-attachment: fixed;
} 
```

我已经对这个网站做了这个（如果你想要的话）：www.kapantzakis-snails.gr

# windows - 我可以在 Windows 中创建 Apache 服务器并使用 No-IP（或类似的）来托管站点吗？

> ID：13515352
> 
> 赞同：0
> 
> 时间：2012-11-22T14:59:30.850
> 
> 标签：windows, apache, dns, ip

标题几乎说明了一切。我想在 Windows 下使用 apache，然后使用 No-IP 之类的服务将一个或多个域重定向到我的计算机。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:04:25.517

是的，您只需要在路由器上设置端口转发到您的本地机器（HTTP 端口 80，SSL 端口 443，FTP 端口 21（如果您还想运行 ftp 服务器）），并在那里设置一个指向的动态 dns无IP。您很可能可以添加一个 DynDNS 条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:02:26.307

是的。

如果您有静态 IP 地址，您甚至不需要动态 DNS 服务（如 no-ip）。在这种情况下，只需注册一个域名并创建两条 DNS 记录 -

```
NAME                    TYPE   VALUE
example.com.            A      public.ip.address.here
www.example.com.        CNAME  example.com. 
```

大多数 ISP 现在分配静态 IP（即使他们另有声明），如果没有，您只需支付少量费用（每月额外 5 美元）即可获得一个。或将您的帐户升级到商务舱。

这样您就不必在设置中引入另一层（动态 DNS）。

然后安装一个 WAMP，例如 - [xampp](http://www.apachefriends.org/en/xampp-windows.html)（这里非常流行） - [UniformServer](http://www.uniformserver.com/) - Wamp [-Developer Pro](http://www.devside.net/server/webdeveloper)（我使用的那个） - [WampServer](http://www.wampserver.com/en/)（另一个不错的）

您还需要将您的路由器（端口 80 和 443）端口转发到 LAN IP，并在 Windows 防火墙中创建两个规则以取消阻止传入端口 80 和 443 请求。

唯一可能出错的是您的 ISP 阻止传入端口 80 (http) 和 443 (https) 请求。您可以致电并让他们取消阻止，或者再次将帐户更新为商务舱以消除所有麻烦。

# android - 在android中使用uri将源设置为imageview会产生错误

> ID：13515359
> 
> 赞同：3
> 
> 时间：2012-11-22T14:59:52.360
> 
> 标签：android, uri, android-imageview, android-assets

我很困惑为什么会发生这种情况，因为我的知识很少说它不应该发生。我有几个图像存储在apk的android资产目录中，实际上在一些目录结构中，例如：

```
 Assets --> aphotos --> launch50 ---> launch501.jpg 
```

例如，现在我想以语法方式将图像设置为 imageview 小部件，如下所示： -

```
 Uri uri =    Uri.parse("file:///android_asset/"+context.getString(R.string.photoroot)+"/"+fldr+"/"+introphoto);
    System.out.println("Image URI: "+uri.toString());       
    imageView.setImageURI(uri); 
```

其中“fldr”和“introphoto”来自数据库。这样做时，它会在“LogCat”中生成以下错误：-

```
11-22 19:23:46.689: W/ImageView(12990): Unable to open content: file:///android_asset/aphotos/launch50/launch501.jpg 11-22 19:23:46.689: W/ImageView(12990): java.io.FileNotFoundException: /android_asset/aphotos/launch50/launch501.jpg (No such file or directory) 11-22 19:23:46.689: W/ImageView(12990):   at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method) 
```

谁能告诉它为什么会发生，因为图像在那里？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:06:10.850

从[这个问题](https://stackoverflow.com/questions/4820816/how-to-get-uri-from-an-asset-file)来看，获取资产文件的 URI 显然效果不佳。

我认为你需要用流来做到这一点：

```
 String path = context.getString(R.string.photoroot)+"/"+fldr+"/"+introphoto;
    InputStream is = getAssets().open(path);
    Bitmap bitmap = BitmapFactory.decodeStream(is);
    imageView.setImageBitmap(bitmap);
    is.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T10:15:42.690

我建议您使用以下代码：

```
ImageView imageView = (ImageView) findViewById(R.id.my_image_view);

Glide.with(this).load("file:///android_asset/img/fruit/cherries.jpg").into(imageView); 
```

# knockout.js - 淘汰赛 - 如何通过元素的 ID 绑定可观察对象？

> ID：13515360
> 
> 赞同：1
> 
> 时间：2012-11-22T14:59:51.417
> 
> 标签：knockout.js, validation

我正在构建一种机制来自动在表单字段中显示验证消息，并想讨论这个问题。

我有一个带有错误消息及其各自属性的可观察数组。

**如何将可观察数组的元素绑定到其各自的表单字段？**

可观察对象具有以下数据（即）：

```
messages = ko.observableArray();
- Property: Reference, Message: Already exists a product with this reference.
- Property: Name, Message: The product's name is mandatory.
- Property: Bar Code, Message: The Bars Code does not matches the EAN13 format.
- ... 
```

我的表单字段的 ID 与数组中的属性名称相同：

```
 <div class="s13">
            <label for="Reference">Reference</label>
            <input class="text-box single-line" id="Reference" name="Reference" type="text" value="" data-bind="value: selected().Reference" />
            <span id="vReference"></span>
        </div>

        <div class="s13">
            <label for="Name">Name</label>
            <input class="text-box single-line" id="Name" name="Name" type="text" value="" data-bind="value: selected().Name" />
            <span id="vName"></span>
        </div>

        <div class="s13">
            <label for="BarCode">Bars Code (EAN13)</label>
            <input class="text-box single-line" id="BarCode" name="BarCode" type="text" value="" data-bind="value: selected().BarCode" />
            <span id="vBarCode"></span>
        </div> 
```

我对**Knockout.js**很陌生，但我认为我需要使用“计算的 observable”，它为每个跨度返回相应的消息。

你说的话？

**/// 更新 ////////////////////////////////////////////// //////**

产品视图模型：

```
function mainmodel(baseUri) {

var m = this;
    m.baseUri = baseUri;

/// PRODUCTS VIEW MODEL ******************************************* *

    m.products = new function () {

        var p = this;
            p.baseUri = baseUri;
            p.items = ko.observableArray();
            p.selected = ko.observable();
            p.messages = ko.observableArray([]); 
```

产品加载中

```
 /// LIST
            p.list = function () {
                $.getJSON(p.baseUri + "/list" + "?page=" + p.currentpage(), p.items);
            } 
```

产品创建（加载验证消息的位置）

```
 /// CREATE
            p.create = function (formElement) {
                //$.post(p.baseUri + "/create", $(formElement).serialize(), null, "json")
                $.ajax({
                    type: 'POST',
                    url: p.baseUri + "/create",
                    data: $(formElement).serialize(),
                    success: null,
                    dataType: "json",
                    statusCode: {
                        400: function (o) {
                            p.messages($.parseJSON(o.responseText));
                        }
                    }
                });
            } 
```

运行它，**p.messages**包含每个产品属性的验证消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:48:12.030

我认为有几种方法可以用于这个。如果您从对服务器的请求中接收到这些验证消息，那么您可以遍历它们并根据结果直接填充 observables。

一个很好的方法是创建一个“sub” observable 来保存验证消息，例如：

```
this.myObservable = ko.observable();
this.myObservable.validationMessage = ko.observable(); 
```

现在您可以绑定`myObservable`and `myObservable.validationMessage`。

因此，如果您收到返回的消息数组，您可以遍历它们并应用如下消息：

```
 var messages = [
            { Property: "Reference", Message: "Can't find a reference to this reference" },
            { Property: "Name", Message: "Pick a better name" },
            { Property: "BarCode", Message: "Not a valid code" }
        ];

        //apply messages to each observable
        ko.utils.arrayForEach(messages, function(message) {
            if (ko.isObservable(self[message.Property])) {
               self[message.Property].error(message.Message);  
            }
        }); 
```

我不知道您的应用程序流程，但您可能想先清除错误。

这是一个示例：http: [//jsfiddle.net/rniemeyer/mk2Ed/](http://jsfiddle.net/rniemeyer/mk2Ed/)

这是使用计算的 observables 的替代方法（第一个会更有效）：http: [//jsfiddle.net/rniemeyer/R6mL8/](http://jsfiddle.net/rniemeyer/R6mL8/)

# codeigniter - 将 URL 重定向到 SEO 友好 URL 时使用哪个重定向？

> ID：13515362
> 
> 赞同：2
> 
> 时间：2012-11-22T15:00:02.687
> 
> 标签：codeigniter, redirect, seo

我正在使用 Codeigniter 开发一个网站。

我想将 URL 重定向到其 SEO 友好版本。例如。
我有网址

一种。`http://www.example.com/post/[post-id]/`

我希望此 URL 重定向到自身的 SEO 友好版本

B.`http://www.example.com/post/[post-id]/[post-title]`

就像stackoverflow正在使用并且喜欢将A URL重定向到B URL。

`http://stackoverflow.com/questions/[question-id]/[question-title]`

我在 Codeigniter 中使用 302 重定向，直到我在某处读到*如果您使用 302 重定向。
那么谷歌可能会将您视为垃圾邮件发送者*，但当我再次看到 Stackoverflow URL 模式时，我认为拥有 B 版本的 URL 会更好。

**所以我的问题是：**
1.stackoverflow 使用的是哪个重定向？
2\. 将[post-title]的Slug存储在数据库中还是使用`url_title()`函数手动计算更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:08:26.873

302 表示临时重定向。结果是搜索引擎仍会将原始 URL 编入索引。

301 表示永久重定向。这导致搜索引擎将索引数据传输到新 URL。

302 不是垃圾邮件，但如果在错误的情况下使用，您不会帮助自己。

在您的情况下，您将永久移动您的 URL，因此 301 是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:31:40.153

在帖子控制器中为帖子的 SEO 友好 URL 创建一个私有函数。

```
private function _redirect($url) {    // $url = http://www.example.com/post/[post-id]/
  redirect($url . $this->post_title); // becomes http://www.example.com/post/[post-id]/[post-title]
  return;
} 
```

您应该在重定向之前设置一个 post_title 成员变量。无论您在哪里调用 redirect() 函数，都可以将其替换为您的私有函数 _redirect() ，一切顺利。

默认情况下它的 302 重定向。要进行 301 重定向，只需将参数添加到 redirect() 函数。例如

```
// with 301 redirect
redirect($url . $this->post_title, 'location', 301); 
```

注意：为了使此功能正常工作，必须在将任何内容输出到浏览器之前使用它，因为它利用了服务器标头。

# javascript - 动态定位引导工具提示（用于动态生成的元素）

> ID：13515364
> 
> 赞同：23
> 
> 时间：2012-11-22T15:00:06.900
> 
> 标签：javascript, jquery, twitter-bootstrap, tooltip

我正在使用 Twitter Bootstrap (http://twitter.github.com/bootstrap/javascript.html#tooltips) 提供的工具提示。

我的 DOM 中有一些动态插入的标记需要触发工具提示。这就是为什么我以以下方式触发工具提示（https://github.com/twitter/bootstrap/issues/4215）：

```
$('body').tooltip({
    delay: { show: 300, hide: 0 },
    selector: '[rel=tooltip]:not([disabled])'
}); 
```

为了避免工具提示放置得太靠近屏幕边缘，我需要能够根据触发工具提示的元素的位置动态设置它们的位置。我想通过以下方式做到这一点：

```
 $('body').tooltip({
        delay: { show: 300, hide: 0 },
        // here comes the problem...
        placement: positionTooltip(this),
        selector: '[rel=tooltip]:not([disabled])'
    });

function positionTooltip(currentElement) {
     var position = $(currentElement).position();

     if (position.left > 515) {
            return "left";
        }

        if (position.left < 515) {
            return "right";
        }

        if (position.top < 110){
            return "bottom";
        }

     return "top";
} 
```

如何将 currentElement 正确传递给 positionTooltip 函数，以便为每个工具提示返回适当的放置值？

提前致谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-22T15:49:46.917

Bootstrap 使用包含元素的参数调用放置函数

```
this.options.placement.call(this, $tip[0], this.$element[0]) 
```

所以在你的情况下，这样做：

```
$('body').tooltip({
    delay: { show: 300, hide: 0 },
    placement: function(tip, element) { //$this is implicit
        var position = $(element).position();
        if (position.left > 515) {
            return "left";
        }
        if (position.left < 515) {
            return "right";
        }
        if (position.top < 110){
            return "bottom";
        }
        return "top";
    },
    selector: '[rel=tooltip]:not([disabled])'
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T10:27:03.083

这就是我在*Bootstrap 2.3.2中放置工具提示的方式*

```
placement: function (tooltip, trigger) {
    window.setTimeout(function () {
        $(tooltip)
            .addClass('top')
            .css({top: -24, left: 138.5})
            .find('.tooltip-arrow').css({left: '64%'});

        $(tooltip).addClass('in');
    }, 0);
} 
```

基本上我在这里说的是我的工具提示将定位在顶部并带有一些自定义偏移量，底部的小三角形箭头也会稍微向右。

最后，我添加了`in`显示工具提示的类。

另请注意，代码包含在`setTimeout 0`函数中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T15:48:35.603

文档中的`placement`选项允许 function 。没有记录（我可以找到）函数中有哪些参数。这很容易通过登录`arguments`到控制台来确定。

这是您可以使用的：

```
$('body').tooltip({

   placement: function(tip, el){
     var position = $(el).position();
      /* code to return value*/

  }

/* other options*/
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-04T19:30:23.280

这是我用来确定窗口宽度是否小于 768 的简写，然后从左到上更改工具提示位置：

```
placement: function(){return $(window).width()>768 ? "auto left":"auto top";} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-06T14:17:59.690

这个对我有用

```
$("[rel=tooltip]").popover({
            placement: function(a, element) {
               var position = $(element).parent().position();
               console.log($(element).parent().parent().is('th:first-child'));

                if ($(element).parent().parent().is('th:last-child')) {
                    return "left";
                }
                if ($(element).parent().parent().is('th:first-child')) {
                    return "right";
                }
                return "bottom";
            },

        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-14T12:15:38.117

`$(element).position()``container`如果选项设置为工具提示，将无法正常工作。

就我而言，我使用`container : 'body'`并且必须使用`$(element).offset()`。

# android - 用于下载/同步数据的 android 4.0 模式

> ID：13515369
> 
> 赞同：3
> 
> 时间：2012-11-22T15:00:31.130
> 
> 标签：android

我有一个适用于 android 4.0(android:minSdkVersion="14") 的应用程序，其中包含许多需要从我的服务器下载（而不是删除或发送）新数据的 SQLite 表。目前用户有一个同步按钮，但是我想实现一些在 3G/Wifi 开启时每隔 1-2 小时自动同步的东西。

我应该使用什么模式或最佳实践？警报事物，本地服务，远程服务还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:04:27.687

你需要两件事：

*   每隔 1-2 小时运行一次代码的警报（查看有关 AlarmManager 的教程）
*   用于拦截网络事件的广播接收器。（例如[，当 wifi 或 3g 网络状态发生变化时，请参阅 BroadcastReceiver](https://stackoverflow.com/questions/10733121/broadcastreceiver-when-wifi-or-3g-network-state-changed)）

确保您的代码在他自己的线程中运行，您不想在广播接收器中执行任何繁重的操作。运行此类代码的好地方是具有自己独立线程的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:16:18.587

使用[服务](http://developer.android.com/guide/components/services.html)和[广播接收器（对于 wifi 状态，如上所述）](https://stackoverflow.com/questions/10733121/broadcastreceiver-when-wifi-or-3g-network-state-changed)。请记住，就电池使用而言，每 X 次轮询 Web 服务器是一种非常糟糕的体验。尝试构建 GCM Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:18:14.813

我建议您阅读**Android Pro 4**的第 19 章（[http://my.safaribooksonline.com/book/programming/android/9781430239307/chapter-19-broadcast-receivers-and-long-running-services/navpoint-164](http://my.safaribooksonline.com/book/programming/android/9781430239307/chapter-19-broadcast-receivers-and-long-running-services/navpoint-164)）然后使用这里已经**准备好的源代码**[http://www.androidbook.com/akc/filestorage/satya/documentfiles/3810/ProAndroid4_Ch19_TestReceivers.zip](http://www.androidbook.com/akc/filestorage/satya/documentfiles/3810/ProAndroid4_Ch19_TestReceivers.zip)

我通过使用**Alarm** + **ALongRunningReceiver(=Broadcast Receiver)** + **ALongRunningNonStickyBroadcastService(Local Service)** + **LightedGreenRoom(Handles CPU partial_wake 所以它不会睡着) 做到了这一点**。

# php - PhoneGap 应用程序 PHP/MYSQL 数据库查询在 iPad 和 iPhone 上返回不同的结果

> ID：13515371
> 
> 赞同：0
> 
> 时间：2012-11-22T15:00:36.673
> 
> 标签：php, mysql, jquery, cordova, jquery-mobile

我有一个非常烦人的问题。当“pageshow”事件发生时，将执行外部 Web 服务类型 DB 查询，返回要在用户屏幕上显示的数据。

在 iPad (2) 上，这可以完美运行，但在 iPhone (5) 上，返回的结果与应用程序首次运行时返回的第一个结果完全相同。如果 iPhone 上的应用程序被卸载并再次重新安装，则查询会获取正确的数据，但无论我在数据库中进行什么更改，都会继续返回此数据。就好像数据被缓存在某个地方一样。但是......我正在使用jQuery的ajax（）函数，并且我在ajax请求的成功处理程序中有alert（），说明查询成功，但在这次成功中仍然产生错误的数据。

iPhone 5 有没有办法缓存整个 AJAX 请求，并假设正在发送和接收相同的数据？

谢谢詹姆斯

# mootools - Mootools 脚本在 Internet Explorer 7 中不起作用

> ID：13515373
> 
> 赞同：4
> 
> 时间：2012-11-22T15:00:46.043
> 
> 标签：mootools, mootools1.2

我希望你能帮助，

我对 mootools 比较陌生（对这里也是全新的），我一直在研究一个基本的 open close div。可以在这里看到：http: [//jsfiddle.net/jessicajet/2jZz5/](http://jsfiddle.net/jessicajet/2jZz5/)。它包括我在其他地方找到的可点击链接脚本。

```
 <script>
   window.addEvent('load', function() {

   Element.Events.outerClick = {
    base : 'click',
    condition : function(event){
    event.stopPropagation();
    return false;
     },
    onAdd : function(fn){
    this.getDocument().addEvent('click', fn);
     },
    onRemove : function(fn){
    this.getDocument().removeEvent('click', fn);
    }
    };

    (function() {
var opener = $('box2');
var boxtoopen = $('box');
var testmorph = $('test')

boxtoopen.set('morph', {
    duration: 800, 
});

boxtoopen.addEvent('outerClick', function(event) {
    boxtoopen.morph(".openOff");
     testmorph.morph(".openOff2"); 
});

opener.addEvent('click', function(e) {
    e.stop();
    boxtoopen.morph(".openOn");    
    testmorph.morph(".openOn2");    
});

})();

 var clix = new dwClickables({
elements: $('.box2'),
anchorToSpan: true
});

 });
</script> 
```

尽管在其他浏览器中似乎一致，但它似乎在 ie7 中不起作用？

谁能帮我解决这个问题并给我一些建议以供将来使用？

亲切的问候，

杰西卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:10:06.930

错别字通常是最难发现的错误；) IE 对此可能非常严厉。

[http://jsfiddle.net/2jZz5/2/](http://jsfiddle.net/2jZz5/2/)

我添加了一个缺少的分号 (;) 并删除了一个不需要的逗号 (,)

前：

```
var opener = $('box2');
var boxtoopen = $('box');
var testmorph = $('test')

boxtoopen.set('morph', {
    duration: 800, 
}); 
```

后：

```
var opener = $('box2');
var boxtoopen = $('box');
var testmorph = $('test');

boxtoopen.set('morph', {
    duration: 800 
}); 
```

# objective-c - NSString 中的字符编码

> ID：13515375
> 
> 赞同：0
> 
> 时间：2012-11-22T15:00:56.283
> 
> 标签：objective-c, ios, cocoa-touch

我正在开发一个 iOS 应用程序，但我遇到了一个基本问题。我花了很多时间来解决它，但我没有任何成功。

我有一些这样的 JSON：`{"htmlCode":"<thead><tr><td class=/"/"><p>Protected.....`

```
 SBJsonParser *jsonParser = [[[SBJsonParser alloc]init]autorelease];
    NSDictionary *results = [jsonParser objectWithString:jsonTableData];

    NSLog(@" result %@",results);
    result (null) 
```

我的问题是：`/"/"`- 我如何替换它`\"\"`？

我想做这样的事情：

```
jsonTableData = [jsonTableData stringByReplacingOccurrencesOfString:@"/"/"" withString:@"\"\""]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:10:32.690

您可以像这样替换字符串中的字符！

```
NSString *str = @"<thead><tr><td class=/\"/\"><p>Protected";

NSLog(@"%@", str);

str = [str stringByReplacingOccurrencesOfString:@"/" withString:@"\\"];

NSLog(@"%@", str); 
```

# javascript - 验证表单后如何让我的函数调用另一个函数？

> ID：13515376
> 
> 赞同：1
> 
> 时间：2012-11-22T15:00:57.533
> 
> 标签：javascript, html, css

我试图让 JavaScript 在显示隐藏的 div 之前验证表单中的所有数据。我一生都无法弄清楚我哪里出错了，一​​旦完成，我的第一个函数调用我的第二个函数。

所有 HTML、CSS 和 JavaScript 如下：

```
 <!DOCTYPE html>
    <html>
    <head>
    <title>Sign Up</title>
    <style text/css>
    body
    {
        background: url(http://www.catalink.com/images/christmas-1211.jpg);
    }
    .outer
    {
        margin: auto;
        width: 910px;
        position: relative
    }
    .inner
    {
        padding-left: 10px;
        padding-top: 10px;
        background: white;
        width: 900px;
        margin: auto;
        height: 410px;
    }
    .image
    {
        float: left;
    }
    .catname
    {
        margin-right: 180px;
        margin-left: 245px;
        background: #cae1ff;
        text-align: center;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 11px;
        line-height: 18px;
        height: 20px;
        border: solid;
        border-width: thin;
        border-color: #828282;
    }
    .catcopy
    {
        margin-right: 180px;
        padding-left: 28%;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 11px;
        line-height: 18px;
    }
    .banner
    {
        margin-left: 250px;
        margin-right: 180px;
        padding-top: 25px;
    }
    .singlelineform
    {
        background: #DDD;
        width: 150px;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        border: solid;
        border-width: thin;
        border-radius: 12px;
        padding: 5px;
        position: absolute;
        right: 0;
        top: 0;
    }
    .ntitle
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .fname
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .day
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .month
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .year
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .email
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .hnumber
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .pcode
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .button
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    button, input, select, textarea {
      font-family: Verdana, Geneva, sans-serif;
      font-size: 12px;
    }
    input
    {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      -khtml-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      -khtml-border-radius: 12px;
      border-radius: 12px;
    }
    select
    {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      -khtml-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      -khtml-border-radius: 12px;
      border-radius: 12px;
    }
    button
    {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      -khtml-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      -khtml-border-radius: 12px;
      border-radius: 12px;
    }
    .newformouter
    {
        margin: auto;
        width: 910px;
        position: relative;
        background: white;
    }
    #newinner
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        border: solid;
        border-width: thin;
        border-radius: 12px;
        padding-left: 5px;
        padding-top: 5px;
        background: #DDD;
        width: 600px;
        margin: auto;
        height: 200px;
    }
    .lnewform
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        width: 50%;
        left: 0;
        top: 0;
    }
    .rnewform
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        width: 296px;
        position: absolute;
        right: 159px;
        top: 0;
        height: 94px;
    }
    .address1
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
    }
    .address2
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
    }
    .county
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
    }
    .pcodenform
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
    }
    .telephone
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
    }
    .password
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
    }
    .privacydiv
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
        float: right;
        width: 50%
    }
    </style>
    <script type="text/javascript" language="javascript">
    function validateForm() {
        var fname = document.getElementById("fname");
        if (fname.value.length < 2) {
            alert ("Please enter your First name!");
            return false;
        }
        var lname = document.getElementById ("lname");
        if (lname.value.length < 3) {
            alert ("Please enter your Surname!");
            return false;
        }
        var address = document.getElementById ("address");
        if (address.value.length < 1) {
            alert ("Please enter your House Number or Name!");
            return false;
        }
        var postcode = document.getElementById ("postcode");
        if (postcode.value.length < 6) {
            alert ("Please enter your Post Code!");

        }
        var x=document.forms["firstform"]["email"].value;
        var atpos=x.indexOf("@");
        var dotpos=x.lastIndexOf(".");
        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
        {
            alert("Please enter a valid e-mail address");
            return false;
        }
    }
    function show()
    {
        document.getElementById("newinner").style.display = "block";
    }
    </script>
    </head>

    <body>
    <div class="outer">
    <div class="inner">
    <div class="image"><img src="http://www.catalink.com/images/cat/extralarge/burton-1208d.jpg" /></div>
    <div class="catname"><b>Burton eNewsletter</b></div>
    <div class="catcopy"><p><b>Outfitters of the Modern British Man...</b></p><p><b>Burton believes in combining accessible style with great value.</b> They want fashion to be easy and comfortable as well as stylish. They embrace their British tailoring roots but they also understand the importance of kicking back in a great pair of jeans and a hoodie. They love a good laugh, but they also know the importance of <b>"looking the business"</b></p></div>
    <div class="banner"><a href="http://www.burton.co.uk/webapp/wcs/stores/servlet/TopCategoriesDisplay?storeId=12551&catalogId=33052" target="blank"><img src="http://www.catalink.com/images/450ban/burton-450ban-1208b.jpg" border="0" /></a></div>
    <div class="singlelineform">
    <form name="firstform" method="post">
    <div class="formtitle"><b>To request this brochure please fill out the form below.</b></div>
    <div class="ntitle"><b>First Name*:</b><br><select>
      <option value="title">Title</option>
      <option value="mr">Mr</option>
      <option value="mrs">Mrs</option>
      <option value="miss">Miss</option>
      <option value="ms">Ms</option>
    </select>
    </div>
    <div class="fname">
    <input type="text" name="fname" id="fname" /></div>
    <div class="lname"><b>Last Name:*</b><input type="lastname" name="lname" id="lname" /></div>
    <div class="day"><b>Date of Birth*:</b>
    <select name="date" form="dateform">
    <option value="day">Day</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    </select>
    </div>
    <div class="month">
    <select form="monthhform">
    <option value="month">Month</option>
    <option value="january">January</option>
    <option value="february">February</option>
    <option value="march">March</option>
    <option value="april">April</option>
    <option value="may">May</option>
    <option value="june">June</option>
    <option value="july">July</option>
    <option value="august">August</option>
    <option value="september">September</option>
    <option value="october">October</option>
    <option value="november">November</option>
    <option value="december">December</option>
    </select>
    </div>
    <div class="year">
    <select form="yearform">
    <option value="year">Year</option>
    <option value="1994">1994</option>
    <option value="1993">1993</option>
    <option value="1992">1992</option>
    <option value="1991">1991</option>
    <option value="1990">1990</option>
    <option value="1989">1989</option>
    <option value="1988">1988</option>
    <option value="1987">1987</option>
    <option value="1986">1986</option>
    <option value="1985">1985</option>
    <option value="1984">1984</option>
    <option value="1983">1983</option>
    <option value="1982">1982</option>
    <option value="1981">1981</option>
    <option value="1980">1980</option>
    <option value="1979">1979</option>
    <option value="1978">1978</option>
    <option value="1977">1977</option>
    <option value="1976">1976</option>
    <option value="1975">1975</option>
    <option value="1974">1974</option>
    <option value="1973">1973</option>
    <option value="1972">1972</option>
    <option value="1971">1971</option>
    <option value="1970">1970</option>
    <option value="1969">1969</option>
    <option value="1968">1968</option>
    <option value="1967">1967</option>
    <option value="1966">1966</option>
    <option value="1965">1965</option>
    <option value="1964">1964</option>
    <option value="1963">1963</option>
    <option value="1962">1962</option>
    <option value="1961">1961</option>
    <option value="1960">1960</option>
    <option value="1959">1959</option>
    <option value="1958">1958</option>
    <option value="1957">1957</option>
    <option value="1956">1956</option>
    <option value="1955">1955</option>
    <option value="1954">1954</option>
    <option value="1953">1953</option>
    <option value="1952">1952</option>
    <option value="1951">1951</option>
    <option value="1950">1950</option>
    <option value="1949">1949</option>
    <option value="1948">1948</option>
    <option value="1947">1947</option>
    <option value="1946">1946</option>
    <option value="1945">1945</option>
    <option value="1944">1944</option>
    <option value="1943">1943</option>
    <option value="1942">1942</option>
    <option value="1941">1941</option>
    <option value="1940">1940</option>
    <option value="1939">1939</option>
    <option value="1938">1938</option>
    <option value="1937">1937</option>
    <option value="1936">1936</option>
    <option value="1935">1935</option>
    <option value="1934">1934</option>
    <option value="1933">1933</option>
    <option value="1932">1932</option>
    <option value="1931">1931</option>
    <option value="1930">1930</option>
    <option value="1929">1929</option>
    <option value="1928">1928</option>
    <option value="1927">1927</option>
    <option value="1926">1926</option>
    <option value="1925">1925</option>
    <option value="1924">1924</option>
    <option value="1923">1923</option>
    <option value="1922">1922</option>
    <option value="1921">1921</option>
    <option value="1920">1920</option>
    <option value="1919">1919</option>
    <option value="1918">1918</option>
    <option value="1917">1917</option>
    <option value="1916">1916</option>
    <option value="1915">1915</option>
    <option value="1914">1914</option>
    <option value="1913">1913</option>
    <option value="1912">1912</option>
    <option value="1911">1911</option>
    <option value="1910">1910</option>
    </select></div>
    <div class="email"><b>Email:*</b><input type="email" name="email" /></div>
    <div class="hnumber"><b>House Number*:</b><input type="text" name="address" id="address" /></div>
    <div class="pcode"><b>Post Code:*</b><input type="pcode" name="postcode" id="postcode" /></div>
    <div class="button"><input type="button" value="Find Address" name="findaddress" onclick="return validateForm();" /></div>
    </form>
    </div>
    </div>
    </div>
    <div class="newformouter">
    <div id="newinner" style="display:none;">
    <form>
    <div class="lnewform">
    <div class="address1"><b>House No &amp; Street:</b>&nbsp;<input type="text" name="addline1" /></div>
    <div class="address2"><b>Address 2:</b>&nbsp;<input type="text" name="addline2" /></div>
    <div class="county"><b>County:</b>&nbsp;<input type="text" name="county" /></div>
    <div class="pcodenform"><b>Post Code:</b>&nbsp;<input type="text" name="post_code" /></div>
    </div>
    <div class="rnewform">
    <div class="telephone"><b>Telephone/Mobile:</b>&nbsp;<input type="text" name="telephone" /></div>
    <div class="password"><b>Password:</b>&nbsp;<input type="password" name="password" /></div>
    <div class="password"><b>Confirm Password:</b>&nbsp;<input type="password" name="cpassword" /></div>
    </div>
    <div class="privacydiv">
    <div class="privacy">Please ensure you have read and understood our <a href="http://www.catalink.com/privacy_policy.php">Privacy Policy</a> before pressing the Submit button below.</div>
    <div class="button"><input type="button" value="Confirm" onClick="" /></div>
    </div>
    </form>
    </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:07:29.343

只需添加`show();`到第一个函数的末尾即可。

或者更好的是，将这一行从`show`移到末尾`validateForm`：

```
function validateForm() {
    var fname = document.getElementById("fname");
    if (fname.value.length < 2) {
        alert("Please enter your First name!");
        return false;
        //ETC, cut to reduce sample length.
    }
    document.getElementById("newinner").style.display = "block";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:05:46.657

你试过这个

```
function validateForm() {
        var fname = document.getElementById("fname");
         if (fname.value.length < 2) {
          alert ("Please enter your First name!");
          return false;
    }
        var lname = document.getElementById ("lname");
          if (lname.value.length < 3) {
           alert ("Please enter your Surname!");
           return false;
    }
    var address = document.getElementById ("address");
          if (address.value.length < 1) {
           alert ("Please enter your House Number or Name!");
           return false;
    }
    var postcode = document.getElementById ("postcode");
          if (postcode.value.length < 6) {
           alert ("Please enter your Post Code!");

    }
    var x=document.forms["firstform"]["email"].value;
    var atpos=x.indexOf("@");
    var dotpos=x.lastIndexOf(".");
    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
      {
      alert("Please enter a valid e-mail address");
      return false;
      }

     show();

    } 
```

你只需要在最后调用这样的节目

# iphone - 如何创建简单的菜单？

> ID：13515378
> 
> 赞同：0
> 
> 时间：2012-11-22T15:01:01.880
> 
> 标签：iphone, ios, uiviewcontroller, menu, subview

我正在尝试在我的应用程序中创建简单的（类似 Facebook 的）菜单。我发现了几个问题，其中大多数已经接受了答案，但通常答案是使用开发人员完成的一些程序。

这些程序通常在旧版本的 xCode 中（一个不使用情节提要），而那些在情节提要中完成的程序对于我来说太复杂了，无法在我的应用程序中实现。

所以我发现了一个问题，它的答案是这样的： 1\. 创建你的菜单视图控制器（对我来说是 UITableViewController） 2\. 在你的初始视图控制器中隐藏这个控制器：

```
MenuViewController *menView = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];

    [self.view sendSubviewToBack:menView.view]; 
```

3 创建一个按钮（可能稍后平移手势），在它的方法中，执行以下操作：

```
-(IBAction)menuButtonPressed:(id)sender
 {
    CGRect destination = self.navigationController.view.frame;

    if (destination.origin.x > 0) {
        destination.origin.x = 0;
    } else {
        destination.origin.x +=254.5;
    }

    [UIView animateWithDuration:0.25 animations:^{
        self.navigationController.view.frame = destination;
    } completion:^(BOOL finished)
     {
         self.view.userInteractionEnabled = !(destination.origin.x > 0);
     }];

} 
```

我猜这是什么，它基本上将您的视图向右移动了固定长度。我想，你的视图，你 sendToBack （你的 UITableView）应该是公开的和可交互的。但是，它对我所做的只是将顶视图向右移动，并留下空白的黑色屏幕。

现在我想，我的问题要么是 menuView 的错误实例化，要么就是我对本指南的理解错误。

如果有人知道如何处理这个问题，我将非常感谢您的回答。也许有一些已经完成的应用程序，就像这样容易理解并且希望在我的代码中更容易实现:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:35:10.960

我会在情节提要中使用容器视图来做到这一点。您可以根据自己的喜好调整左侧的大小，然后在其旁边添加一个右侧的，然后在检查器中将其宽度更改为 320——其中大部分将离开屏幕到右侧，它会将其嵌入式控制器的大小调整为是全屏尺寸。您可以删除使用左侧容器视图获得的视图控制器，然后拖出一个表格视图控制器，并使用嵌入segue从左侧视图连接它（当您控制从容器视图拖动时，这将是唯一的选择） . 我在主控制器的视图中添加了两个滑动手势识别器（一个左一个，一个右），并将它们连接到主控制器中的 2 个方法。然后在主控制器中，我在 .h 中有以下代码：

```
@interface ViewController : UIViewController

@property (weak,nonatomic) IBOutlet UIView *rightView;
@property (assign,nonatomic) CGRect rightRect;

@end 
```

而在.m中，只有这个：

```
@implementation ViewController

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.rightRect = self.rightView.frame;
}

-(IBAction)revealSidebar:(id)sender {
    [UIView animateWithDuration:.3 animations:^{
        self.rightView.frame = self.view.window.frame;
    }];
}

-(IBAction)hideSidebar:(id)sender {
    [UIView animateWithDuration:.3 animations:^{
        self.rightView.frame = self.rightRect;
    }];
}
@end 
```

# c# - C#循环语句，新手需要的帮助

> ID：13515380
> 
> 赞同：-2
> 
> 时间：2012-11-22T15:01:06.620
> 
> 标签：c#

我是 c# 的新手，需要一些循环语句的帮助。

我正在通过设计一个程序来练习，该程序计算每英里的成本（即 50 便士）并每 1000 英镑增加 30.00 英镑作为磨损费用。

如果有人能给我一些很棒的提示，我很难理解逻辑。

```
namespace ConsoleApplication10
{
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Input start milleage:");
            decimal StartMile = Convert.ToDecimal(Console.ReadLine());
        Console.WriteLine("Input Finish milleage:");
            decimal FinishMile = Convert.ToDecimal(Console.ReadLine());
            decimal TotalMilleage = FinishMile - StartMile;

            if (TotalMilleage < 1000)

                TotalMilleage = TotalMilleage / 2;

                Console.WriteLine("Total charge for hire:{0:C}", TotalMilleage);

            Theres the code Ive done so far :S 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:03:25.443

您不需要循环只需像这样表达，假设 30 英镑仅在 1000 英里后收费。

```
double price = 0.5 * DistanceInMile + ((int)(DistanceInMile /1000)) *30; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:04:11.943

**假设里程是`int`**

不知道我得到了这个问题，但是：

```
double price = 0.5 * miles + 30 * (miles / 1000); 
```

这样一来，1200 英里您只需添加一次 30.00 英镑。如果要添加两次：

```
int times = miles / 1000;
if (miles % 1000 != 0)
    times++;
double price = 0.5 * miles + 30 * times; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:14:00.213

```
route.Cost = 0.5 * route.Length + (Math.Floor(route.Length / 1000)) * 30; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:14:48.623

正如已经指出的那样，算术更好，但是由于这是一个编程练习，有很多方法可以做到这一点。

首先，假设您使用的是整数英里

```
int miles=4555; // example mile count;
decimal cost=0; // starting cost;
int mileCounter=0;

for (int i=1; i<=miles;i++) {
  cost += 0.5m;
  mileCounter++;
  if ( mileCounter == 1000) {
    mileCounter = 0;
    cost += 30;
  }
} 
```

或者你不能使用里程计数器并使用数学来计算

```
for (int i=1; i<=miles;i++) {
  cost += 0.5m;
  if ((i % 1000) == 0) {
    cost += 30;
  }
} 
```

你可以放弃单独的英里循环

```
decimal cost = 0.5m * miles;
for (int i=1000; i<= miles; i+=1000) {
  cost += 30;
} 
```

最后是直接算术方法

```
decimal cost = 0.5m * miles + (30 * Math.Truncate(miles/1000m)); 
```

# javascript - 嵌套在对象属性内的函数不执行

> ID：13515388
> 
> 赞同：0
> 
> 时间：2012-11-22T15:01:51.530
> 
> 标签：javascript, object

我的手臂上有一种奇怪的行为：

我声明了一个对象，属性将按顺序执行，它们会这样做，但是其中一个简单的传递是没有任何写入发生。

我有范围问题吗？

这是一个代码片段，其中 verteX 是我的对象

```
stepsCalcul: function() {
  var test = 2;
  verteX.testCheck = test*2; //returns undefined
  alert('stuff') //alerts nothing
  console.log("logged stuff")//logs nothing
  verteX.mouseCoordinates();
  return true;
}, 
```

我也排序了一个 jsFiddle

[http://jsfiddle.net/AEWrK/3/](http://jsfiddle.net/AEWrK/3/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:04:14.533

根据您的小提琴，您没有调用该`init`函数。

替换`verteX.init;`为`verteX.init();`

# android - 如何重新设置片段

> ID：13515396
> 
> 赞同：0
> 
> 时间：2012-11-22T15:02:14.387
> 
> 标签：android, android-layout

我在我的 baseActivity 中有一个框架布局 (A) 作为基本视图，然后我添加了一个附加视图 (B)，其中可能包括一个 SearchFragment。我想从此布局 B 中删除 SearchFragment 并将其添加到外部布局 A。

```
 private void reparentSearchFragment(ViewGroup view, FrameLayout container){
    View search = view.findViewById(R.id.search_fragment);
        if(search != null && view instanceof ViewGroup){
            view.removeView(search);
            container.addView(search);
    } 
} 
```

这似乎失败了，日志是`Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.`

我觉得这很奇怪，因为我正在删除视图，正如您在代码片段中看到的那样。有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:08:04.040

尝试使用动态片段（不是从 xml 布局文件中添加的），然后使用 FragmentTransaction api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:09:45.907

从代码动态地将片段添加到 B 布局。

当您需要将其放入 A 时，您将不得不删除片段并再次添加它，如下所示：

```
SearchFragment s = ...;
FragmentTransaction t = getSupportFragmentManager().beginTransaction();
t.remove(s);
t.add(R.layout.A_ID, s);
t.commit(); 
```

# php - Symfony2 Config TreeBuilder 验证 YML 中的数组值

> ID：13515397
> 
> 赞同：2
> 
> 时间：2012-11-22T15:02:20.180
> 
> 标签：php, validation, symfony, configuration

我在 YML 中有一个配置，如下所示：

```
foobar_template:
    templates:
        homepage:
            name: "Homepage template"
            regions: ["top", "main", "left", "bottom"]
            layout:
              - [ { region: "top", colspan: 4 } ]
              - [ { region: "left" }, { region: "main", colspan: 3 } ]
              - [ { region: "bottom", colspan: 4 } ]

        subpage:
            name: "Subpage template"
            regions: ["top", "main"]
            layout:
              - [ { region: "top", colspan: 4 } ]
              - [ { region: "main", colspan: 4 } ] 
```

我一直在尝试确保根据规范定义此配置，但似乎无法确保布局部分包含至少定义一个区域的条目。目前我的 Configuration.php 包含以下内容：

```
class Configuration implements ConfigurationInterface
{
    /**
     * {@inheritDoc}
     */
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('foobar_template');

        $rootNode
            ->children()
                ->arrayNode('templates')
                    ->useAttributeAsKey('template')
                    ->prototype('array')
                        ->children()
                            ->scalarNode('name')->end()
                            ->arrayNode('regions')
                                ->isRequired()
                                ->requiresAtLeastOneElement()
                                ->prototype('scalar')->end()
                            ->end()
                            ->append($this->addLayoutNode())
                        ->end()
                    ->end()
                ->end()
            ->end();

        return $treeBuilder;
    }

    public function addLayoutNode()
    {
        $builder = new TreeBuilder();
        $node = $builder->root('layout');

        $node
            ->isRequired()
            ->requiresAtLeastOneElement()
            ->prototype('array')
                ->prototype('variable')->end()
            ->end();

        return $node;
    }
} 
```

但我真的很想测试指定的布局块是否包含一个区域（即一个至少包含 的片段`- [{ region: <region_name> }]`，那么我应该使用什么而不是`->prototype('variable')->end()`addLayoutNode() 来实际执行此测试？我尝试了多种方法，但总是尝试执行此操作时遇到 InvalidDefinitionException 或 InvalidConfigurationException。有人知道如何在 Configuration 中测试上述内容吗？（我目前在 bundle Extension 的负载中进行了一些健全性检查，但如果 Configuration 可以检查它会更干净这个）。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-25T11:27:20.093

You can use a ConfigurationProccesor: [http://symfony.com/doc/2.0/components/config/definition.html#processing-configuration-values](http://symfony.com/doc/2.0/components/config/definition.html#processing-configuration-values) or a CompilerPass for the more complex config.

# performance - Squeryl - 查询组合的方法

> ID：13515398
> 
> 赞同：1
> 
> 时间：2012-11-22T15:02:32.277
> 
> 标签：performance, scala, subquery, squeryl

我需要执行一些可能依赖于通过 REST 接口提供的外部参数的查询。例如，客户端可能需要表单的 URL

```
some/entities?foo=12&bar=17 
```

`foo`参数，say`bar`和`quux`都是可选的。所以我从用 Squeryl 设计一些查询开始，比如

```
object Entity {
  def byFoo(id: Long) = from(DB.entities)(e =>
    where(e.foo === id)
    select(e)
  )
  // more criteria
} 
```

但是我当然想避免出现组合爆炸，所以我只设计了三个查询，这三个查询又可能从另一个查询中获取它们的数据：

```
object Entity {
  def byFoo(id: Long, source: Query[Entity] = DB.entites) = from(source)(e =>
    where(e.foo === id)
    select(e)
  )
  def byBar(id: Long, source: Query[Entity] = DB.entites) = from(source)(e =>
    where(e.bar === id)
    select(e)
  )
  // more criteria
} 
```

现在我可以将它们组合起来并运行如下查询

```
val result = Entity.byFoo(12,
  source = Entity.byBar(17)
) 
```

我对这种方法的唯一问题是，在幕后 Squeryl 将生成一个子查询，这可能效率低下。使用更典型的查询构建器，我将能够组合查询并获得以下等效项：

```
from(DB.entities)(e =>
  where(
    e.foo === 12 and
    e.bar === 17
  )
  select(e)
) 
```

> 是否有不同的方法可以在 Squeryl 中动态组合查询，从而产生这种更有效的形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:45:02.167

我认为您应该研究的第一件事是 inhibitorWhen，您可以[在文档](http://squeryl.org/dynamic-queries.html)中找到它。它的要点是您将查询建模为：

```
var foo: Option[Int] = None
var bar: Option[Int] = None

from(DB.entities)(e =>
  where(
    e.foo === foo.? and
    e.bar === bar.?)
  select(e)) 
```

这 ？第一个表达式中的运算符等效于 (e.foo === foo).inhibitWhen(foo == None)

# jquery - Jquery：光标自动放置在 val() 的末尾

> ID：13515400
> 
> 赞同：3
> 
> 时间：2012-11-22T15:02:33.133
> 
> 标签：jquery, input, cursor, keyup

我使用 javascript 代码在注册时清理用户名。当一个字符不被允许时，它被一个破折号代替。

我的**问题**是：当用户想在文本中间添加字符时，光标会**自动放在输入的末尾**。

你可以在这里测试它：http: [//jsfiddle.net/tZv5X/](http://jsfiddle.net/tZv5X/)

HTML：

```
Username : <input type="text" id="username" />​ 
```

JS：

```
// Clean username
function clean_username(s) 
{
    var temp = s.replace(/[àâä@]/gi,"a");
    temp = temp.replace(/[éèêë]/gi,"e");
    temp = temp.replace(/[îï]/gi,"i");
    temp = temp.replace(/[ôö]/gi,"o");
    temp = temp.replace(/[ùûü]/gi,"u");
    temp = temp.replace(/[ç]/gi,"c");
    temp = temp.replace(/[. _,;?!&+'"()]/gi,"-");
    return temp;
}

var current_value;
$("#username").keyup(function(e)
{
    if($(this).val() != current_value)
    {
        $(this).val(clean_username($(this).val()));
        current_value = $(this).val();
    }
});​ 
```

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:10:38.910

没有很好的方法，但是插件，[jQuery 插入符号位置](http://www.examplet.buss.hk/jquery/caret.php)应该可以减轻一些痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:22:08.880

您可以使用[**jCaret**](https://code.google.com/p/jcaret/)插件（@puppybeard 也提到过[）](https://stackoverflow.com/a/13515543/1249581)。一探究竟：

```
$("#username").bind({
    keydown: function() {
        var $this = $(this);
        $this.data("pos", $this.caret().start);
    },
    keyup: function() {
        var $this = $(this),
            pos = $this.data("pos"),
            value = clean_username(this.value);
        if (value !== this.value) {
            this.value = value;
            $this.caret(pos + 1, pos + 1);
        }
    }
});​ 
```

**演示：http:** [//jsfiddle.net/tZv5X/3/](http://jsfiddle.net/tZv5X/3/)

# php - 当用户上传图像时，如何将图像上传到画布

> ID：13515406
> 
> 赞同：1
> 
> 时间：2012-11-22T15:02:42.280
> 
> 标签：php, html, canvas

> **可能重复：**
> [在画布 html5 上导入图像](https://stackoverflow.com/questions/3868259/importing-image-on-canvas-html5)

我的问题：

我想让用户上传图像，当他们上传图像文件时，它会自动将其显示在画布元素中。

到目前为止我的代码：

```
<html>
<head>
<link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
<script>

   function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result)
                       // .width(500)
                        //.height(500);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

</script>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
</style>
</head>
<body>

  <input type='file' onchange="readURL(this);" /> <br> <br>
    <img id="blah" src="#" alt="your image" />

<?php

?>
</body>
</html> 
```

# iphone - 如何在 iPhone 方向更改时调整标签的大小和位置？

> ID：13515410
> 
> 赞同：0
> 
> 时间：2012-11-22T15:02:53.883
> 
> 标签：iphone, objective-c, ios6

我有一个视图控制器，它有两个 UILabel 和一个 UIButton 居中并堆叠在底部。UILabel 的外边缘和视图边界之间有 20 个像素，每个控件之间有 10 个像素。

当我将设备旋转到横向时，标签保持居中，并且填充和间距保持一致，但标签的高度不会改变 - 如果标签以前可以包含三行，它仍然是三行高，尽管文本在新方向中只有两行

我在 Stack Overflow 上看到过类似的问题，其中包含有关如何查找和更改标签高度的说明，但这些问题似乎使标签的左上角留在了标签仍然较大高度的位置。尽管有明确规定两个标签之间应该只有 10 个像素的约束。我假设这是因为我发现的解决方案改变了框架的高度，但这也迫使原点保持不变。

除了计算高度和设置新的正确宽度之外，我还可以添加更多代码来计算标签的新原点，但是对于必须相当常见的东西，必须有一种更简单的方法。

有没有办法让标签遵循约束，并忽略它们的集合原点？或者标签是否正确更改大小和位置以适合其文本？

这是我目前正在使用的代码：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    CGSize maximumLabelSize = CGSizeMake(self.view.frame.size.width - 40, CGFLOAT_MAX);

    CGSize expectedLabelSize = [helpMessageText sizeWithFont:[helpMessageLabel font] constrainedToSize:maximumLabelSize lineBreakMode:[helpMessageLabel lineBreakMode]];
    CGRect newFrame = helpMessageLabel.frame;
    newFrame.size.height = expectedLabelSize.height;
    [helpMessageLabel setText:helpMessageText];
    [helpMessageLabel setFrame:newFrame];
    NSLog(@"%f", newFrame.size.height);
    [helpMessageLabel setBackgroundColor:[UIColor blueColor]];

    expectedLabelSize = [errorMessageText sizeWithFont:[errorMessageLabel font] constrainedToSize:maximumLabelSize lineBreakMode:[errorMessageLabel lineBreakMode]];
    newFrame = errorMessageLabel.frame;
    newFrame.size.height = expectedLabelSize.height;
    [errorMessageLabel setText:errorMessageText];
    errorMessageLabel.frame = newFrame;
    NSLog(@"%f", newFrame.size.height);
    [errorMessageLabel setBackgroundColor:[UIColor greenColor]];
} 
```

这是应用程序在没有特殊代码的情况下的样子： ![这是应用程序的外观，没有特殊代码](../Images/6811c079d1458d0a0cbad1625a341658.png)

以下是使用上述代码的应用程序在横向中的样子： ![这是使用上述代码的应用程序在横向中的样子！](../Images/17b6a1c66bfc3f67b6edf8881f19fdf7.png)

这里更接近我想要的样子： ![这里更接近我想要的样子](../Images/76223b92af3a786ffc468d308337203d.png)

# php - simplehtmldom 奇怪的行为

> ID：13515412
> 
> 赞同：0
> 
> 时间：2012-11-22T15:02:57.110
> 
> 标签：php, curl, simple-html-dom

我遇到了一些奇怪`simplehtmldom`的行为。

我`$newlink`从某个页面获取，然后将其放入另一个卷曲中，返回空白数据。如果我改变

```
curl_setopt($ch1, CURLOPT_URL, $newlink); 
```

到

```
curl_setopt($ch1, CURLOPT_URL, "http://www.granma.cu/italiano/sport/22-noviembre-iaaf.html"); 
```

正在显示数据。我的错误在哪里？

```
<?php header("Content-Type: text/html; charset=utf-8"); ?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<?php
require dirname(__FILE__) . '/simple_html_dom.php'; 
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://youlichika.netii.net/aaa.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');
$htmls = curl_exec($ch);
curl_close($ch);
$html = str_get_html($htmls);
$newlink = $html->find('p',0);
echo $newlink;
$ch1 = curl_init();
curl_setopt($ch1, CURLOPT_URL, $newlink);
curl_setopt($ch1, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch1, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');
$newhtml = curl_exec($ch1);
curl_close($ch1);
echo $newhtml;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:49:12.703

您需要使用`$newlink->innertext`来获取`<p>`标签之间的内容。

# gcc - 是否可以在汇编程序中使用 GCC 的“__builtin_avr_delay_cycles”？

> ID：13515413
> 
> 赞同：0
> 
> 时间：2012-11-22T15:02:57.250
> 
> 标签：gcc, inline-assembly, avr, avr-gcc

对不起，英语不好。

我需要编写一段使用延迟的对时间要求严格的代码（通过 bit-bang 实现软件协议的严格部分）。编译时的 C 预处理器可以计算`F_CPU`延迟的时钟周期数（使用宏），因此我需要为*未知*的周期数实现汇编器延迟代码。

但是 GCC 提供了非常有用的功能，可以*精确地*`__builtin_avr_delay_cycles(unsigned long cycles)`延迟定义频率的时钟周期。 *`cycles``F_CPU`*

 ***问题**。有没有办法`__builtin_avr_delay_cycles` *在内*联汇编代码中使用？

**注意**。绕过方式是这样的：

```
__asm__ (...);
__builtin_avr_delay_cycles(...);
__asm__ (...); 
```

但是编译器可以围绕`__asm__`片段制作一些代码。这对我不好，我需要控制每个时钟周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:44:30.130

```
__asm__ (...);
__builtin_avr_delay_cycles(...);
__asm__ (...); 
```

像这样编译代码，然后查看编译器为内置函数发出的内容。

这将是一个与以下非常相似的序列：

```
 ldi R2,lo8(N)
   ldi R3,hi8(N)
   ldi R4,hlo8(N)
1: subi R2,1
   sbci R3,0
   sbci R4,0
   brne 1b" 
```

可能有 2-3 个这样的序列，有时以`nopv`insn 结尾，有时会有 1 或 2 或 3 个`ldi`和`sbci`insns，你会得到模式（这取决于循环数）。

把这些insn变成内联汇编，`N`是周期数，`Rn`是寄存器。

缺点是生成的代码取决于循环计数，如果它发生变化，您将不得不重复该过程。但是，如果更改在以下范围之一内，则您是安全的：[83886082, 0xFFFFFFFF], [262145, 83886081], [768, 262144], [6, 767]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:22:04.273

不，编译器内置函数不是真正的函数，不能从汇编器调用，编译器也不会在汇编器中识别它们。*

# vim - VIM 禁用插件的插入映射

> ID：13515416
> 
> 赞同：10
> 
> 时间：2012-11-22T15:03:03.970
> 
> 标签：vim, mapping

一个插件为我的插入映射添加了一个`<leader>is`. 我有一些想法可以是哪一个。但没关系我不想改变外国插件中的任何东西。所以我想禁用这个映射。我试过这个：

```
imap <leader>is  <nop> 
```

我没有帮忙。

你有什么建议？

BTW，我想问一下如何在vimrc中禁用插件的所有插入映射？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T15:25:19.173

要删除插入模式映射，请使用以下`:iunmap`命令：

```
:iunmap <Leader>is 
```

我不知道是否可以进行“批量取消映射”，但至少您可以列出所有活动的插入模式映射

```
:imap 
```

或者，更好的是，使用

```
:verbose imap 
```

这还将告诉您首先在哪里定义了映射。

* * *

**编辑：**为了澄清，取消映射需要在插件加载*后完成。*为此，请创建一个包含以下内容的文件`~/.vim/after/plugin/`（请参阅@ZyX 的答案）：

```
" myafter.vim: will be executed after plugins have been loaded
iunmap <Leader>is 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T15:23:21.760

如果插入 vimrc 中的命令在插件定义侵入式映射之前执行，这就是它没有效果的原因。要使其生效，您应该使其在该插件之后运行，这通常通过将其放入`~/.vim/after/plugin/disable_mappings.vim`（任何名称而不是`disable_mappings`作品）来实现。其次是使用`VimEnter`事件：

```
augroup DisableMappings
    autocmd! VimEnter * :inoremap <leader>ic <Nop>
augroup END 
```

. 要禁用所有映射，请参见and `:h 'paste'`（尽管后者将删除映射而不是暂时禁用它们）。`:h 'pastetoggle'``:h :imapclear`

* * *

当然，你也可以`iunmap`在我建议使用的地方使用`inoremap … <Nop>`. 我怎么会忘记这个命令？

# java - JFrame FileChooser 获取文件目录

> ID：13515417
> 
> 赞同：2
> 
> 时间：2012-11-22T15:03:07.660
> 
> 标签：java, swing, filechooser

我正在做作业。基本上任务已经完成，但我试图通过添加一个 GUI 来让它变得更好。

但是我遇到了一些问题，`FileChooser`因为我不太了解它是如何工作的。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;

public class CaesarCipherGui extends JFrame implements ActionListener{

private static final long serialVersionUID = 1L;
private static JButton Encrypt  = new JButton("Encrypttion");
private static JButton Decrypt  = new JButton("Decrypttion");
private static JPanel  panel    = new JPanel();

public static void main(String[] args) {
    new CaesarCipherGui();
}
private void addComponent(JPanel p, JComponent c, int x, int y, int width, int height, int align) {
    GridBagConstraints gc = new GridBagConstraints();
    gc.gridx = x;
    gc.gridy = y;
    gc.gridwidth = width;
    gc.gridheight = height;
    gc.weightx = 100.0;
    gc.weighty = 100.0;
    gc.insets = new Insets(5, 5, 5, 5);
    gc.anchor = align;
    gc.fill = GridBagConstraints.NONE;
    p.add(c, gc);
}

public CaesarCipherGui() {
    this.setSize(310, 192);
    this.setTitle("Caesar Cipher");
    this.setLocationRelativeTo(null);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setResizable(false);
    panel.setLayout(new GridBagLayout());

    addComponent(panel, Encrypt, 1, 4, 1, 1, GridBagConstraints.WEST);
    Encrypt.addActionListener(this);

    addComponent(panel, Decrypt, 1, 4, 1, 1, GridBagConstraints.EAST);
    Decrypt.addActionListener(this);

    this.add(panel);
    this.setVisible(true);
}
public void actionPerformed(ActionEvent e) {
    if (e.getSource() == Encrypt){
            Scanner console = new Scanner(System.in);
            System.out.print("Input file: ");
            String inputFileName = console.next();
            System.out.print("Output file: ");
            String outputFileName = console.next();

            try{ 
                FileReader reader = new FileReader("C:/"+inputFileName+".txt");
                Scanner in = new Scanner(reader);
                PrintWriter out = new PrintWriter("C:/"+outputFileName+".txt");

                    while (in.hasNextLine()){
                        String line = in.nextLine();
                        String outPutText = "";
                        int key = 3;

                        for (int i = 0; i < line.length(); i++) {
                            char c = line.charAt(i);
                            if (c >= 'a' && c <= 'z') {
                                c += key % 26;
                                if (c < 'a')
                                    c += 26;
                                if (c > 'z')
                                    c -= 26;
                            }
                            if (c >= 'A' && c <= 'Z') {
                                c += key % 26;
                                if (c < 'A')
                                    c += 26;
                                if (c > 'Z')
                                    c -= 26;
                            }
                            if (c == ' '){
                                c = '#';
                            }
                            outPutText += c;
                        }
                        out.println(outPutText);

                    }
                    out.close();
                    }
            catch (IOException exception){
                System.out.println("Error processing file:" + exception);
            }
    }
    if (e.getSource() == Decrypt){
        Scanner console = new Scanner(System.in);
        System.out.print("Input file: ");
        String inputFileName = console.next();
        System.out.print("Output file: ");
        String outputFileName = console.next();

        try{ 
            FileReader reader = new FileReader("C:/"+inputFileName+".txt");
            Scanner in = new Scanner(reader);
            PrintWriter out = new PrintWriter("C:/"+outputFileName+".txt");

                while (in.hasNextLine()){
                    String line = in.nextLine();
                    String outPutText = "";
                    int key = -3;

                    for (int i = 0; i < line.length(); i++) {
                        char c = line.charAt(i);
                        if (c >= 'a' && c <= 'z') {
                            c += key % 26;
                            if (c < 'a')
                                c += 26;
                            if (c > 'z')
                                c -= 26;
                        }
                        if (c >= 'A' && c <= 'Z') {
                            c += key % 26;
                            if (c < 'A')
                                c += 26;
                            if (c > 'Z')
                                c -= 26;
                        }
                        if (c == '#'){
                            c = ' ';
                        }
                        outPutText += c;
                    }
                    out.println(outPutText);

                }
                out.close();
                }
        catch (IOException exception){
            System.out.println("Error processing file:" + exception);
        }
}
}
} 
```

由于上面的代码是我的任务，但我希望为输入文件名添加文件选择器并为输出文件名保存文件，我该怎么做？或者您可以只修改需要更改的部分并显示给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:39:26.147

不，您将一个动作监听器添加到一个按钮并定义文件选择器：

```
cmdSearch = new AbstractAction("Search", null) {
    public void actionPerformed(ActionEvent evt) {
        final JFileChooser fc = new JFileChooser();
        fc.setFileSelectionMode(JFileChooser.FILES_ONLY);
        txtSearch.setText( (fc.showOpenDialog(YOURCLASSNAME.this) == JFileChooser.APPROVE_OPTION) ? fc.getSelectedFile().toString() : txtSearch.getText() );                                    
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:08:01.077

我想你应该从[官方文档](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)开始。使用 a`JFileChooser`非常简单，您只需要：

*   根据您正在执行的操作显示打开或保存对话框
*   检查 show 函数的返回值，看看用户是否有效地选择了一个文件
*   检索`File`通过`getSelectedFile()`方法
*   可选地使用自定义`FileFilter`让用户只看到您想要的文件类型

# vb.net - VB.NET Access DB INSERT 不插入数据？

> ID：13515419
> 
> 赞同：0
> 
> 时间：2012-11-22T15:03:11.967
> 
> 标签：vb.net, excel, ms-access, insert

我正在尝试在 Access 中的表中插入一行。该表名为 Site，它有两列，SiteId（自动编号）和 SiteName（文本）。出于测试目的，我从 Excel 工作表中获取了一个值，并尝试使用以下代码将该值插入到 SiteName 列中......

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim App As New Excel.Application
    Dim WB As Excel.Workbook = App.Workbooks.Open("C:\MyFile.xlsx")
    Dim WS As Excel.Worksheet = DirectCast(WB.Worksheets(2), Excel.Worksheet)
    App.Visible = False

    Dim Range As Excel.Range
    Range = WS.Range("A8")
    Dim cnn As New OleDbConnection(My.Settings.cnn)
    Dim cmd As New OleDbCommand("INSERT INTO Site(SiteName) VALUES(@SiteName)", cnn)
    cmd.Parameters.Add("@SiteName", OleDbType.Char).Value = Range.Value.ToString

    Try
        Using cmd.Connection
            cmd.Connection.Open()
            cmd.ExecuteNonQuery()
        End Using
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

即使我删除了 cmd.Parameters 行并且只输入了一个像 Values('Test') 这样的直接值，它也不会插入。执行命令时，代码中没有错误。为什么价值不起作用？我已经验证了从 Excel 工作表返回的数据，并且工作正常。我只是无法将其插入 Access 中的表中。连接也可以正常工作，因为如果我使用此插入...

```
Dim cmd As New OleDbCommand("INSERT INTO Site VALUES(@SiteName)", cnn) 
```

它会告诉我查询值的数量与字段计数或类似的东西不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:10:33.597

值被插入（至少在大多数情况下）；）您是否曾经手动检查过 mdb 的内容（在输出文件夹中！）？

您已将 mdb 文件添加到您的项目中吗？转到文件的属性窗口并将“复制到输出目录”设置为“从不”。

通常，当您添加文件时，它设置为“如果较新则复制”或“始终复制”。这意味着每当您在调试器中运行您的应用程序时，项目目录中的 mbd 文件都会被复制到调试/发布文件夹并覆盖其中已经存在的任何文件（以及您存储记录的位置）。

# java - 获取字符串输入

> ID：13515422
> 
> 赞同：2
> 
> 时间：2012-11-22T15:03:30.353
> 
> 标签：java, user-interface

我想从用户那里得到一个字符串输入。

我将其编码为：

```
String username= TEXT.getText();
String password = PASSWORD.getText(); 
```

两者都是字符串，但它不起作用。如果我这样写：

```
String username= String.parseString(TEXT.getText());
String password= String.parseString(PASSWORD.getText()); 
```

那是对的吗？这里的 TEXT 和 PASSWORD 是一个 JTextField。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:08:58.777

[`getText`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/JTextComponent.html#getText%28%29)any的方法`JTextComponent`返回 a `String`，因此您的第一个代码片段就足够了（您不需要再次调用`toString`）。

* * *

相关文件：

*   [JTextField](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextField.html)（的子类`JTextComponent`）
*   [`JTextComponent`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/JTextComponent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:05:55.237

作为Swing 应用程序`TEXT`中`PASSWORD`的`JTextField`组件，您可以简单地使用：

```
String username = TEXT.getText();
String password = PASSWORD.getText(); 
```

因为[getText()](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/JTextComponent.html#getText%28%29)的返回类型已经是`String`.

注意：[JPasswordField](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)用于接受密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:05:56.113

用它作为

```
String username= TEXT.getText().toString();

String password = PASSWORD.getText().toString(); 
```

无需解析。

# jsf - 是否可以将 JSF MyFaces 1.1.5 应用程序部署到 TomEE

> ID：13515424
> 
> 赞同：1
> 
> 时间：2012-11-22T15:03:32.710
> 
> 标签：jsf, myfaces, apache-tomee

使用 Tomcat7，我可以部署多个应用程序与 MyFaces 1.x / 2.x 的混合使用可以像在 jboss 中那样切换模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:48:55.443

应该可以正常工作。只需从中删除 myfaces-*.jars `<tomcat-home>/lib/`，然后在每个 webapp 中包含所需的 MyFaces jars。

# ios - UIApplicationExitsOnSuspend 和屏幕刷新

> ID：13515426
> 
> 赞同：0
> 
> 时间：2012-11-22T15:03:37.193
> 
> 标签：ios, background, sleep, exit

我有一个将 UIApplicationExitsOnSuspend 信息列表属性设置为 TRUE 的应用程序。现在我注意到一个奇怪的问题。我启动应用程序，让它在我的手机上运行，​​不要触摸我的手机。最终手机屏幕变暗，手机进入待机模式。当我唤醒手机时，我看到的是应用程序上显示的最后一个屏幕的屏幕截图。（这似乎符合规范，因为 Apple 文档说在将应用程序移至后台的过程中，ios 会拍摄应用程序的照片，并在应用程序恢复运行时将其用于过渡）。如果我双击主页按钮查看正在运行的应用程序，我看不到正在运行的应用程序实例。（同样，由于 UIApplicationExitsOnSuspend 设置为 true，因此按预期工作）。

我的问题是，我如何确保当手机唤醒时，它会回到默认主屏幕而不是应用程序的图片？显然，该应用程序在唤醒时并未运行，因此我无法在应用程序内执行任何操作来刷新屏幕。当应用程序进入后台时，我可以尝试退出，但是苹果指南说，永远不要以编程方式退出！

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:25:03.077

你误解了正在发生的事情。如果您启用`UIApplicationExitsOnSuspend`，这意味着您的应用程序将在应用程序正常进入后台时终止。如果您运行您的应用程序，然后让手机处于空闲状态，直到屏幕变暗，您的应用程序仍处于前台，因此它不会被终止。当设备进入待机模式时，当前应用仍然是当前应用。当您唤醒设备时，您不是在查看应用程序的快照，而是在查看正在运行的应用程序。此时双击主页按钮不会显示您的应用程序，因为您的应用程序是当前正在运行的应用程序。

如果您返回主屏幕或切换到另一个应用程序，您的应用程序将被终止。但它不会因为设备进入待机模式而终止。

如果您希望您的应用程序在设备被唤醒时返回其主屏幕，那么您需要在`UIApplicationDelegate applicationDidBecomeActive:`方法中放入代码来重置您的用户界面。

# c# - Log4Net 新事件日志不起作用

> ID：13515427
> 
> 赞同：2
> 
> 时间：2012-11-22T15:03:49.587
> 
> 标签：c#, winapi, log4net

我已设置`log4net`为我的应用程序使用单独的事件日志。事件日志存在并且是可见的（记录到那个甚至可以工作的日志！）

名字`"sbsysrst"` `isUat`是`true`。

预期的 LogName 是**SB3-UAT**，但它坚持记录到**Applicaiton**日志，尽管`log4net`下面有调试消息。

返回`ILog`对象的方法。

```
public static ILog GetLogger(string name, bool isUat = false)
{
    var eventLogAppender = new EventLogAppender
    {
        ApplicationName = name,
        Layout = new PatternLayout
        {
            ConversionPattern = "%message%newline%exception" 
        },
        LogName = "SB3" + (isUat ? "-" + UatSuffix : string.Empty),
        Threshold = Level.Info
    };

    BasicConfigurator.Configure(eventLogAppender, FileAppenders[isUat]);
    eventLogAppender.ActivateOptions();
    return LogManager.GetLogger(name);
} 
```

调试输出表单 log4net

```
log4net: Searched for existing files in [C:\Windows\...]
log4net: curSizeRollBackups starts at [0]
log4net: Opening file for writing [C:\Windows\...\SB3.log] append [True]
log4net: Searched for existing files in [C:\Windows\...]
log4net: curSizeRollBackups starts at [0]
log4net: Opening file for writing [C:\Windows\...\SB3.log] append [True]
log4net: Searched for existing files in [C:\Windows\...UAT]
log4net: curSizeRollBackups starts at [0]
log4net: Opening file for writing [C:\Windows\...UAT\SB3.log] append [True]
log4net: Searched for existing files in [C:\Windows\...UAT]
log4net: curSizeRollBackups starts at [0]
log4net: Opening file for writing [C:\Windows\...UAT\SB3.log] append [True]
log4net: Converter [message] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [newline] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [message] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [newline] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: log4net assembly [log4net, Version=1.2.11.0, Culture=neutral, PublicKeyToken=669e0ddf0bb1aa2a]. Loaded from [...]. (.NET Runtime [2.0.50727.5448] on Microsoft Windows NT 6.1.7601 Service Pack 1)
log4net: defaultRepositoryType [log4net.Repository.Hierarchy.Hierarchy]
log4net: Creating repository for assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]
log4net: Assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null] Loaded From [...]
log4net: Assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null] does not have a RepositoryAttribute specified.
log4net: Assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null] using repository [log4net-default-repository] and repository type [log4net.Repository.Hierarchy.Hierarchy]
log4net: log4net assembly [log4net, Version=1.2.11.0, Culture=neutral, PublicKeyToken=669e0ddf0bb1aa2a]. Loaded from [...]. (.NET Runtime [2.0.50727.5448] on Microsoft Windows NT 6.1.7601 Service Pack 1)
log4net: defaultRepositoryType [log4net.Repository.Hierarchy.Hierarchy]
log4net: Creating repository for assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]
log4net: Assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null] Loaded From [...]
log4net: Assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null] does not have a RepositoryAttribute specified.
log4net: Assembly [..., Version=1.0.0.0, Culture=neutral, PublicKeyToken=null] using repository [log4net-default-repository] and repository type [log4net.Repository.Hierarchy.Hierarchy]
log4nlog4net: Creating repository [log4net-default-repository] using type [log4net.Repository.Hierarchy.Hierarchy]
et: Creating repository [log4net-default-repository] using type [log4net.Repository.Hierarchy.Hierarchy]
log4net: Changing event source [sbsysrst] from log [SB3] to log [SB3-UAT]
log4net: Source [sbsysrst] is registered to log [SB3-UAT]
log4net: Changing event source [sbsysrst] from log [SB3] to log [SB3-UAT]
log4net: Source [sbsysrst] is registered to log [SB3-UAT] 
```

**更新 1**

查看log4net源代码，代码很大程度上归结为followimg，

```
// Inside ActivateOptions()
using (SecurityContext.Impersonate(this))
{
    sourceAlreadyExists = EventLog.SourceExists(m_applicationName);
    if (sourceAlreadyExists)
    {
        currentLogName = EventLog.LogNameFromSourceName(m_applicationName, m_machineName);
    }
}

using (SecurityContext.Impersonate(this))
{
    if (sourceAlreadyExists && currentLogName != m_logName)
    {
        //
        // Re-register this to the current application if the user has changed
        // the application / logfile association
        //
        EventLog.DeleteEventSource(m_applicationName, m_machineName);
        CreateEventSource(m_applicationName, m_logName, m_machineName);

        registeredLogName = EventLog.LogNameFromSourceName(m_applicationName, m_machineName);
    }
    else if (!sourceAlreadyExists)
    {
        CreateEventSource(m_applicationName, m_logName, m_machineName);

        registeredLogName = EventLog.LogNameFromSourceName(m_applicationName, m_machineName);
    }
}

// Inside Append(LoggingEvent loggingEvent)
using(SecurityContext.Impersonate(this))
{
    EventLog.WriteEntry(m_applicationName, eventTxt, entryType, eventID, category);
} 
```

关键是确实按预期`EventLog.LogNameFromSourceName(m_applicationName, m_machineName);`返回**SB3-UAT 。**

**更新 2**

我已经编写了我自己的，通过使用设置为日志和源名称的实例对象来`EventLogAppender`覆盖 log4net 功能。`Eventlog`

令我非常惊讶的是这也不起作用，所以我越来越倾向于机器问题，或者`SecurityContext.Impersonate()`与`log4net`.

**更新 3**

所以这不是 log4net 问题，甚至不是 dotnet 问题。下面是直接使用 Windows API 的代码，但仍然失败。源名称曾在应用程序日志中注册的事实使事情变得糟糕。

我正在查看适当的 WinAPI，看看是否可以消除这种困惑。当然，查看注册表项这应该***不是***问题。

```
const string SourceName = "sbsysrst";
const string TextMessage = "Test";
const string MachineName = ".";

// This code is essentially the watered down version behind `EventLog`
// in dotnet.  There are two main WinAPI calls and just boiler code around
// passing parameters to them as expected.

var message = new[] { TextMessage };
SafeHandle eventLogHandle = null;
var numArray = new IntPtr[message.Length];
var gcHandleArray = new GCHandle[mesage.Length];
GCHandle gcHandle = GCHandle.Alloc(numArray, GCHandleType.Pinned);
try
{
    eventLogHandle = SafeEventLogWriteHandle
        .RegisterEventSource(MachineName, SourceName);
    for (int index = 0; index < message.Length; index++)
    {
        gcHandleArray[index] = GCHandle
            .Alloc(message[index], GCHandleType.Pinned);
        numArray[index] = gcHandleArray[index]
            .AddrOfPinnedObject();
    }

    if (!ReportEvent(
        eventLogHandle,
        0x0004,           // Information type
        0,                // Category
        0,                // EventID
        null,             // user id
        message.Length,   // size of text array
        0,                // size of raw data array
        new HandleRef(this, gcHandle.AddrOfPinnedObject()),
        new byte[0]))     // raw data (none)
    {
        throw new Win32Exception(Marshal.GetLastWin32Error());
    }

}
finally
{
    for (int index = 0; index < message.Length; ++index)
    {
        if (gcHandleArray[index].IsAllocated)
        {
            gcHandleArray[index].Free();
        }
    }

    gcHandle.Free();
    if (eventLogHandle != null)
    {
        eventLogHandle.Dispose();
    }
}

// RegisterEventSource cannot return an abstract object.
internal sealed class SafeEventLogWriteHandle :
    SafeHandleZeroOrMinusOneIsInvalid
{
    internal SafeEventLogWriteHandle() : base(true)
    {
    }

    [DllImport("advapi32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    internal static extern SafeEventLogWriteHandle RegisterEventSource(
        string uncServerName, string sourceName);

    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [DllImport("advapi32.dll", SetLastError = true)]
    private static extern bool DeregisterEventSource(IntPtr hEventLog);

    protected override bool ReleaseHandle()
    {
        return DeregisterEventSource(this.handle);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:15:26.460

问题归结于源名称过去在不同的 EventLog 下注册的事实。虽然源注册已更改（在注册表中），但 EventLog 服务似乎缓存了注册。在重新启动机器并再次尝试登录时（您无法重新启动 Eventlog 服务），事件条目进入了正确的 Eventlog。

# c# - 读取 rss 的 xml 文件时出现空引用异常

> ID：13515428
> 
> 赞同：0
> 
> 时间：2012-11-22T15:03:54.270
> 
> 标签：c#, xml

```
 try
            {
                rssDoc = new XmlDocument();
                // Load the XML context into XmlDocument
                rssDoc.Load(rssReader);
                MessageBox.Show(rssDoc.ToString());
            }
            catch (Exception ex)
            {
               errorProvider1.SetError(url, "Cannot load the RSS from this url");
            }
            // Loop for <rss> tag in xmldocument
            for (int i = 0; i < rssDoc.ChildNodes.Count; i++)
            {
                // If <rss> tag found
                if (rssDoc.ChildNodes[i].Name == "rss")
                {
                    // assign the <rss> tag node to nodeRSS
                    nodeRss = rssDoc.ChildNodes[i];
                }
            }
            //Loop for the <channel> tag in side <rss> tag stored in nodeRss
            for (int i = 0; i < nodeRss.ChildNodes.Count; i++)  <<<<<<EXCEPTION
            {
                // <channel> node found
                if (nodeRss.ChildNodes[i].Name == "channel")
                {
                    //assign the <channel> tag to nodeChannel 
                    nodeChannel = nodeRss.ChildNodes[i];
                }
            } 
```

上面的代码对于大多数 rss 提要都可以正常工作，但是我在执行最后一个循环时遇到了 nullrefrence 异常。我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:14:01.253

您的循环代码不在 try 块内。您应该首先更改它，然后您应该使用 XDocument 和 ForEach。还可以看看@Michael Kjörling 写了什么。

```
try
{
    XDocument rssDoc = new XDocument(rssReader);

    foreach(var ele in rssDoc.Elemtens["rss"])
    {

    }
    foreach(var ele in rssDoc.Elemtens["channel"])
    {

    }
}    
catch (Exception ex)
{
    errorProvider1.SetError(url, "Cannot load the RSS from this url");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:14:08.380

为什么要重新发明轮子？

```
XmlNode nodeChannel = rssDoc.SelectSingleNode("/rss/channel"); 
```

......应该做的伎俩。（我很确定 RSS 只允许`channel`根`rss`元素内的单个元素。否则，请查看[`SelectNodes()`](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)而不是`SelectSingleNode()`.）

# c# - 我可以保存我的同一页c#的流吗？

> ID：13515432
> 
> 赞同：-4
> 
> 时间：2012-11-22T15:04:10.213
> 
> 标签：c#, stream

我的网站在 Load 事件中加载了许多标签。加载页面后，我需要获取所有包含这些新更改的 html。我能得到吗？我在同一页面上编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:12:42.450

请参阅此处已列举的各种方法： [ASP.NET Save HTML Sent to Browser](https://stackoverflow.com/questions/831334/asp-net-save-html-sent-to-browser)

我个人出于类似目的创建了一个 HTTP 模块。

# c++ - C/C++ 三元运算符实际上是否具有与赋值运算符相同的优先级？

> ID：13515434
> 
> 赞同：7
> 
> 时间：2012-11-22T15:04:12.543
> 
> 标签：c++, c, ternary-operator, operator-precedence

我查阅过的几乎所有 C/C++ 运算符优先级表都将三元条件运算符列为比赋值运算符具有更高的优先级。但是，有一些表，例如[wikipedia](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)上的一个和[operator-precedence.com](http://cpp.operator-precedence.com/)上的一个，将它们置于相同的优先级上。它是哪个，更高还是相同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T15:08:45.703

在 C++ 语法中，

```
赋值表达式：
    条件表达式
    逻辑或表达式赋值运算符初始化子句
    抛出表达式

条件表达式：
    逻辑或表达式
    逻辑或表达式？表达式：赋值表达式

初始化子句：
    赋值表达式
    支撑初始化列表

```

可以结合到

```
赋值表达式：
    逻辑或表达式
    逻辑或表达式？表达式：赋值表达式
    逻辑或表达式赋值运算符赋值表达式
    逻辑或表达式赋值运算符初始化子句
    抛出表达式

```

如果只看`=`and `?:`，而忽略 and 之间的内部表达式`?`，`:`这显然给出了`?:`和`=`完全相同的优先级。

这与 C 语法不同，其中`?:`' 的左操作数和右操作数都不能将赋值运算符作为其最顶层的运算符。

```
赋值表达式：
    条件表达式
    一元表达式赋值运算符赋值表达式

条件表达式：
    逻辑或表达式
    逻辑或表达式？表达式：条件表达式

```

所以对于 C 来说，给它们不同的优先级是有意义的。

也就是说，优先级只是标准实际所说的近似值，在某些情况下，您选择的任何优先级都会显示这些级别具有误导性或完全错误。根据你的解释，内心的表达`?:`可能是其中之一，它是给我的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-22T21:05:37.393

C++ 的答案是这样，`?:`并且`=`具有相同的优先级。是的，几乎所有的 C++ 运算符优先级表都是错误的。

`?:`在 C 中，是否高于无关紧要`=`，因为在 C 中，`?:`不允许运算符计算左值，如果优先级影响行为，则必须这样做（假设它们是已经 RTL 关联）。例如，请参阅 Luchian Crigore 的回答下的讨论。

也许这个错误是如此普遍，因为早期的 C++ 运算符优先表可能是从 C 表中复制和扩展的。也许错误一直存在，因为唯一的反例 - 形式的表达式`a?b:c=d`- 很少使用。也许。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-22T15:09:43.613

你会发现，在标准中：

### 5 表达式 [expr]

> 58) 运算符的优先级不是直接指定的，但可以从语法中推导出来。（笔记）

这意味着优先表是推断的，而不是指定的。只要他们的行为相同，你就可以说两者都是对的。因此，即使优先表将它们设置为具有相同的优先级，或者将三元组放在赋值运算符之上，实际上也会发生同样的事情，因为语法。

请注意，**关联性**在这里起着更大的作用（这也是从语法派生的）。

即使您假设它们具有相同的优先级：

```
a = b ? c : d; 
```

将被视为`a = (b ? c : d)`因为它们都是**right-to-left associative**。

# jsf - 为什么这个文本没有出现在 JSF 中？

> ID：13515438
> 
> 赞同：1
> 
> 时间：2012-11-22T15:04:22.183
> 
> 标签：jsf

我有以下 HTML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
>

<head>
<title>First Example JSF Program</title>
<head>

<body>
   Hello <h:outputText value="Darwin"></h:outputText>!
</body>
</html> 
```

但输出应为“Hello Darwin！” 不会出现。只有“你好！” 出现。为什么是这样？没有错误，我确信它有所有必需的 JAR 文件 - 如果没有，它会抛出错误，对吗？

干杯

PS 这是一个 HTML 5 文件，有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:08:11.433

如果您在浏览器地址中看到的请求 URL 与webapp 中定义的URL 不匹配`<url-pattern>`，则可能会发生这种情况，因此无法完成执行所有 JSF 工作的工作。`FacesServlet``web.xml``FacesServlet`

如果您在浏览器中右键单击页面并执行*View Source*，您应该已经注意到 JSF`<h:outputText>`标记完全未处理。Web 浏览器无法识别 JSF 标记。它们应该由`FacesServlet`网络服务器中的 处理。它们应该生成正确的 HTML 代码，并且最终的 HTML 结果根本不应该包含任何 JSF 标记。

您需要确保您在浏览器地址中看到的请求 URL 与`<url-pattern>`webapp`FacesServlet`中定义的`web.xml`. 想象它`*.jsf`就像

```
<url-pattern>*.jsf</url-pattern> 
```

那么您应该需要将地址栏中的 URL 从 /some.xhtml 更改为 /some.jsf。

或者，您也可以直接将更改为`web.xml`映射`FacesServlet``*.xhtml`

```
<url-pattern>*.xhtml</url-pattern> 
```

这样您就不再需要摆弄虚拟 URL。

至于具有 HTML5 doctype 的文件，那绝对没有区别。我只会删除那个 XML 序言，因为它只对 XHTML doctype 有效。另请参阅[是否可以将 JSF+Facelets 与 HTML 4/5 一起使用？](https://stackoverflow.com/questions/2935759/is-it-possible-to-use-jsffacelets-with-html-4-5/3869174#3869174)

# javascript - jquery ajax调用冲突？

> ID：13515443
> 
> 赞同：1
> 
> 时间：2012-11-22T15:04:42.073
> 
> 标签：javascript, jquery, ajax

在我的网站上，我正在使用 jquery ajax 调用动态加载带有“添加到购物车”按钮的购物产品。对于购物车本身，我使用 jcart、jquery 插件。

然后，当我将商品添加到购物车时，jcart 使用 ajax 和 POST 调用 php 文件。一切正常，产品已正确添加到购物车，但每次我将商品添加到购物车时页面都会重新加载。当我不使用 ajax 调用来加载产品时（例如，直接在页面中加载它们），一切正常，所以某处肯定存在冲突。有什么线索吗？

这是我的产品功能和 html。

```
...
<script>
      function loadProducts(str) {
             $.ajax({
                   type: 'GET',
                   async: true,
                   url: 'ajax/load.php',
                   data: {'max-id' : str},
                   cache: false,
                   success: function(response) {
                        $('#products').html(response).fadeIn('slow');
                   },
                 });
        }
</script>

<script>
     $(document).ready(function() {
        var n = '';
       loadProducts(n);
     });
</script>

<script src="jcart/js/jcart.js"></script>

</body>
</html> 
```

可以在此处找到带有 ajax 调用的 jcart 插件：http: [//conceptlogic.com/jcart/standalone-demo/jcart/js/jcart.js](http://conceptlogic.com/jcart/standalone-demo/jcart/js/jcart.js)

这是来自 jcart.js 的函数。

```
 $.ajaxSetup({
            type: 'POST',
            url: path + '/relay.php',
            cache: false,
            success: function(response) {
                // Refresh the cart display after a successful Ajax request
                container.html(response);
                $('#jcart-buttons').remove();
            },
            error: function(x, e) {
                ...
            }
        }); 
```

...

```
 function add(form) {
        // Input values for use in Ajax post
        var itemQty = form.find('[name=' + config.item.qty + ']'),
            itemAdd = form.find('[name=' + config.item.add + ']');

        // Add the item and refresh cart display
        $.ajax({
            data: form.serialize() + '&' + config.item.add + '=' + itemAdd.val(),
            success: function(response) {

                // Momentarily display tooltip over the add-to-cart button
                if (itemQty.val() > 0 && tip.css('display') === 'none') {
                    tip.fadeIn('100').delay('400').fadeOut('100');
                }

                container.html(response);
                $('#jcart-buttons').remove();
            }
        });
    } 
```

...

```
 // Add an item to the cart
            // is called from the submit-buttons within each product picture
    $('.jcart').submit(function(e) {
        add($(this));
        e.preventDefault();
    }); 
```

“loadProducts()”函数将其放入每个项目的#products 容器中：

```
<form method="post" action="" class="jcart">
    <fieldset>
        <input type="hidden" name="jcartToken" value="<?php echo $_SESSION['jcartToken'];?>" />
        <input type="hidden" name="my-item-id" value="SDK12345" />
        <input type="hidden" name="my-item-name" value="Product Name" />
        <input type="hidden" name="my-item-price" value="1.00" />
        <input type="hidden" name="my-item-qty" value="1" />
        <ul>
            <li><img src="product-image.jpg"/></li>
            <li>1.00 Dollar</li>
            </ul>
        <input type="submit" name="my-add-button" value="Add to cart" class="button" />
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:09:08.890

Ok, I found the solution.

As the forms are loaded via ajax, they were no correctly interpreted by jcart.js (though the functions all worked fine for themselves).

"bind" didn't work, but "live" fixed it:

```
$('.jcart').live('submit',function(e) {
  add($(this));
  e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:35:31.783

I'm guessing you are calling the loadProducts() function in a binded click action on your add to cart button. If you are using an element with a default click behavior. You might want to prevent that with a 'return false;' on the last line of your binded click function.

like this:

```
$('a.addtocart').bind('click', function(){
  //logic here (ajax)
  return false;
}); 
```

After your success function there's also a comma that might get messy in IE:

```
success: function(response) {
  $('#products').html(response).fadeIn('slow');
}, 
```

Remove the comma

I think there's an error in your ajax call, try to work it out... i cant see the logic of your php file that adds products to your basket. but if you want to send the data of your form (quantity, itemid), serializing your form data should be enough. No need to pass extra get variables.

```
 function add(form) {
        $.ajax({
            data: form.serializeArray(),
            url: 'yourfile.php',
            success: function(response) {

                // logic
            }
        });
     } 
```

# android - Android：buffer.toString() 不起作用

> ID：13515445
> 
> 赞同：0
> 
> 时间：2012-11-22T15:04:43.800
> 
> 标签：android, buffer

我试图将我的 Android 应用程序连接到远程主机上的数据库。我想使用数据库的记录，但是当我尝试这样做时出现问题：

```
if(buffer.toString()=="OPEN")
                    {
                        button_signal.setText("OPEN");
                    }
                    else
                    {
                        button_signal.setText("CLOSE");
                    } 
```

我已经使用 Logs 检查了 buffer.toString()，它等于“OPEN”，但 button_signal 的文本打印为“CLOSE”。为什么？你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:06:35.447

它可能有一些不可见的字符或一些字母可能是不同的大小写，所以请试试这个：

```
buffer.toString().trim().equalsIgnoreCase("OPEN"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:07:55.470

您不能将 String 与 Java 中的“==”运算符进行比较。字符串是一个对象。试试这个 buffer.toString().equals("OPEN");

编辑：

更好的是，如果你像这样比较它： "OPEN".equals(buffer.toString())

因为如果缓冲区为空，它不会抛出异常。

# javascript - 什么是 typescript AMD 模块，ASP MVC4 Web 应用程序需要它吗？

> ID：13515447
> 
> 赞同：0
> 
> 时间：2012-11-22T15:04:49.157
> 
> 标签：javascript, asp.net-mvc, typescript, amd

我开始使用 Web Essentials，我看到有一个选项“使用 AMD 模块”。我正在为 ASP MVC4 应用程序使用打字稿。有人可以解释一下 AMD 模块的全部内容吗？这是我应该知道的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:23:03.670

AMD 是格式化和加载模块化 JavaScript 的一种方式。见这里：[http](http://addyosmani.com/writing-modular-js/) ://addyosmani.com/writing-modular-js/尤其是这里：[http ://requirejs.org/docs/whyamd.html](http://requirejs.org/docs/whyamd.html)

引用后一个来源：

> AMD 格式来自于想要一种模块格式，它比今天的“编写一堆具有隐含依赖关系的脚本标签，您必须手动订购”以及易于直接在浏览器中使用的东西。

本质上，AMD 允许您按需加载 JavaScript 模块，并提供一种封装其内容的格式，这样全局命名空间就不会受到污染。

在 TypeScript 中，将您发现的 AMD 编译器开关设置为“on”，您可以像这样导出一个模块：

```
export module pe.components {
    export class Component {  // 'export' makes this visible outside the module

    }

    class FriendComponent { // no 'export' so this is only visible inside the module.

    }
} 
```

在另一个文件中，您像这样导入此模块：

`import c = module('relative-path-to-file/pe.components');`

然后像这样使用它：

`var component:Component = new c.pe.components.Component();`// 有效，因为组件已导出

...但不是这个：

`var friend:FriendComponent = new c.pe.components.FriendComponent();`// 不应该工作*，因为没有导出 FriendComponent。

（* 有一个错误使非导出的接口在其声明模块之外可见。我认为这已在 TS 0.8.1 中修复）。

至于你问题的第二部分 - 这真的太宽泛了。如果您的架构要求您加载新功能（例如，单页应用程序中的插件或小程序），那么是的，AMD 模块和加载框架（如[RequireJS](http://requirejs.org/) ）可能是可行的方法。另一方面，如果您事先知道用户将需要的所有功能，那么您最好彻底缩小脚本并提前将它们作为单个文件加载。

我认为您使用 MVC 的事实与此处无关：问题是您的客户端架构是否需要异步、模块化的方法。

# php - 如何在没有表单的情况下将变量传递给 AJAX 调用

> ID：13515449
> 
> 赞同：0
> 
> 时间：2012-11-22T15:04:59.747
> 
> 标签：php, jquery, ajax, codeigniter

我正在 Code Igniter 中构建一个应用程序，目前正在构建一些功能，用户可以通过单击页面上的勾号或十字图标来批准或拒绝页面上的请求。这些图标是锚标记。

我遇到的麻烦是将单个请求的 ID 传递给 AJAX 表单。我在表单中实现此功能没有问题，因为我只需使用一个隐藏的输入字段，该字段的值将从控制器保存在其中。可能有许多这样的请求，但它们总是有自己的个人 ID，因为它在视图中循环。

由于我使用的是锚标记而不是表单，我不确定我可以在标记中存储该请求的 id 的位置。这是代码：

```
 <p><span class="bold">Authorise This Request?: </span></p>
            <p>
                <a href="" class="authorise" id="allow"><img src="/igniter/images/tick.png" /></a>
                <a href="" class="authorise" id="deny"><img src="/igniter/images/cross.png" /></a>
            </p>
        </div>
        <?php $i++; ?>
    <?php } ?>
</div> 
```

```
<script type="text/javascript">
$(document).ready(function() {
    $('.authorise').click(function() {
        $.ajax({
            type: "POST",
            url: 'holiday_request/authoriseRequest',
            data: 'check=' + $(this).attr('id'),
            success: function(data) {

            }
        });
        return false;
    });
});
</script> 
```

如您所见，我使用输入字段的 ID 来确定稍后是允许还是拒绝它。我想要做的就是能够传递当前在控制器中的请求的 ID，因此在 AJAX 调用中的 URL 变量的末尾添加“&id= blahblahblah”。

有没有一种方法可以做到这一点而不必使用表单而不是锚标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:10:08.830

您可以使用[HTML5 data-* 属性](http://api.jquery.com/data/#data-html5)

```
<a href="" class="authorise" data-id="1" data-check="allow"><img src="/igniter/images/tick.png" /></a>
... 
```

然后获取值并将其添加到 ajax 数据参数中

```
data: 'check=' + $(this).data('check') + '&id=' + $(this).data('id'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:16:35.667

您可以将 ID 存储在锚标记的 Data 属性中。

```
<a href="" class="authorise" id="allow" data-val="10"><img src="/igniter/images/tick.png" /></a> 
```

使用 jquery 获取允许锚标记的存储值。

```
$val_allow = $('#allow').data('val'); // value 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:17:12.223

您可以尝试使用 $.post 并且可以根据需要使用自定义参数！

```
 $.post({ 'holiday_request/authoriseRequest' , { check: someId , anotherParam: 1 } , 
function(response)
        {
            console.log(response);
        }
    }); 
```

# objective-c - 防止将 UIButton 拖到其 UIView 之外

> ID：13515454
> 
> 赞同：2
> 
> 时间：2012-11-22T15:05:11.600
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uitouch

我的窗口上有两个 UIView：一个用于保存玩家分数，（一个侧边栏）和一个主游戏区。它们都适合 UIWindow，并且都不滚动。用户可以在主播放区域上拖动 UIButtons - 但目前，他们可以将它们拖放到侧边栏上。一旦他们这样做了，他们就不能再次拖动它们以将它们带回来，大概是因为您正在点击第二个视图，该视图不包含相关按钮。

我想防止将主视图内的任何内容移动到侧边栏视图上。我已经做到了，但是如果玩家的手指离开该视图，我需要释放拖动。使用下面的代码，按钮会随着手指移动，但不会越过视图的 X 坐标。我该怎么办？使用此调用启用拖动：

```
[firstButton addTarget: self action: @selector(wasDragged: withEvent:) forControlEvents: UIControlEventTouchDragInside]; 
```

对这个方法：

```
- (void) wasDragged: (UIButton *) button withEvent: (UIEvent *) event
{
    if (button == firstButton) {
        UITouch *touch = [[event touchesForView:button] anyObject];
        CGPoint previousLocation = [touch previousLocationInView:button];
        CGPoint location = [touch locationInView:button];
        CGFloat delta_x = location.x - previousLocation.x;
        CGFloat delta_y = location.y - previousLocation.y;
        if ((button.center.x + delta_x) < 352)
        {
            button.center = CGPointMake(button.center.x + delta_x, button.center.y + delta_y);
        } else {
            button.center = CGPointMake(345, button.center.y + delta_y);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:26:47.860

实施

`-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`

touch 委托方法，然后检查 的位置`UITouch`，如果该位置超出了您要允许的范围（第一个视图），则不要再移动它。您还可以使用`BOOL`iVar在用户拖动到视图外的点终止触摸

```
//In .h file
BOOL touchedOutside;

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    touchedOutside = NO;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    if (!touchedOutside) {  
        UITouch *touch = [[event allTouches] anyObject];
        CGPoint location = [touch locationInView:firstView];

          if (location.x < UPPER_XLIMIT && location.x > LOWER_XLIMIT) {
              if (location.y < UPPER_YLIMIT && location.x > LOWER_YLIMIT) {

                  //Moved within acceptable bounds
                  button.centre = location;
              }
          } else {
              //This will end the touch sequence
              touchedOutside = YES;

              //This is optional really, but you can implement 
              //touchesCancelled: to handle the end of the touch 
              //sequence, and execute the code immediately rather than
              //waiting for the user to remove the finger from the screen
              [self touchesCancelled:touches withEvent:event];   
    }
} 
```

# html - 我可以在一个页面中使用两次相同的 itemprop 吗？

> ID：13515456
> 
> 赞同：0
> 
> 时间：2012-11-22T15:05:17.903
> 
> 标签：html, microformats

我正在尝试在我的网站中使用微格式，以便谷歌按我想要的方式显示它。

我有这个简化的结构：

```
<h1>Name</h1>
<h2>Ocupation</h2>
<h4>Posted date</h4>
<div>Content<div> 
```

我希望职业和内容都出现在我对 Google 的描述中。如果我添加`itemprop="description"`两个元素可以吗？谷歌会同时索引职业和内容，还是只索引职业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:37:15.660

转到[http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

并尝试运行您的页面。它会告诉你它当前是否被接受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:14:15.177

这是使用这种微格式的一对一设置。如果您希望它们都在描述中，则需要合并这两个项目。

# ruby - 使用 Ruby 和 Calabash 的 POST 请求

> ID：13515459
> 
> 赞同：0
> 
> 时间：2012-11-22T15:05:21.493
> 
> 标签：ruby, post

我使用 Calabsh 来测试 iOS 应用程序。在测试期间，我需要创建 POST 请求来更改一些值，然后验证更改是否反映在 UI 中。

请求看起来像：

www.testserver.com/userAddMoney?user_id=1&amount=999

要在服务器上授权，我需要将特殊参数传递给请求的标头：

标头：X-Testing-Auth-Secret：kI7wGju76kjhJHGklk76

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:26:11.510

```
require 'net/http'

uri = URI.parse('http://www.testserver.com/userAddMoney?user_id=1&amount=999')
http = Net::HTTP.new(uri.host,uri.port)
##  https.use_ssl = true    # use https, need require net/https
req = Net::HTTP::Post.new(uri.path)
req['X-Testing-Auth-Secret'] = 'kI7wGju76kjhJHGklk76'
res = http.request(req) 
```

此处的文档：[Net::HTTP::Post](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP/Post.html) [Net::HTTPSession](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)

# python - f2py 不喜欢子程序中的显式形状数组

> ID：13515463
> 
> 赞同：3
> 
> 时间：2012-11-22T15:05:30.073
> 
> 标签：python, numpy, fortran, f2py

我正在尝试使用`f2py`. 该代码使用 ifort 编译得很好，但在使用 f2py 时会抛出错误。这是代码（它超过两个文件）：

gdat.f90：

```
 MODULE GDAT
  PUBLIC

  INTEGER :: NX, NY

  END MODULE GDAT 
```

部分.f90：

```
 SUBROUTINE PART(ARR)

  USE GDAT, ONLY: NX, NY
  INTEGER, INTENT(IN) :: ARR(NX,NY)
  PRINT*, ARR

  END SUBROUTINE PART 
```

我使用 编译它`f2py -c gdat.f90 part.f90 -m part`，但我得到关于 nx 和 ny 未定义的错误，例如：/var/tmp/tmp2hzU6s/src.linux-x86_64-2.7/untitledmodule.c: In function 'f2py_rout_untitled_pa​​rt': /var/tmp/tmp2hzU6s /src.linux-x86_64-2.7/untitledmodule.c:180: error: 'nx' undeclared (第一次在这个函数中使用)

显式数组的定义似乎有问题`ARR`。就像我说的，它在 ifort 上编译得很好。

我知道这是一段简单的代码，可以用另一种方式编写，但这只是我写的一个测试片：我实际上是在尝试编译一个更大的 fortran 模块集，这些模块在（使用来自中央模块的变量来定义边界），所以我真的很想让它工作而不是重写其他代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:06:15.100

据我了解，您遇到的问题是，数组的大小必须是动态的，`ALLOCATABLE`或者已经通过数值常量或参数固定。

在您的情况下，变量`nx`和`ny`既不是设置也不是参数。如果你想将你的两个文件分别编译成模块（with`ifort`和 not `f2py`），它也应该抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T16:01:04.387

尝试通过创建签名文件

```
f2py -m pythmod -h signature.pyf gdat.f90 part.f90 
```

然后使用它

```
f2py -c signature.pyf gdat.f90 part.f90 . 
```

这将创建文件*pythmod.so*。

# matlab - 贝叶斯网络的简单示例/应用

> ID：13515465
> 
> 赞同：1
> 
> 时间：2012-11-22T15:05:35.970
> 
> 标签：matlab, bayesian, bayesian-networks

谢谢阅读。

我想使用 Matlab 的 BNT 工具箱实现贝叶斯网络。问题是，我找不到“简单”的例子，因为这是我第一次处理 BN。

您能否提出一些可能的应用程序，（节点不多）请^^？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:00:46.173

看看 Tom Mitchell 的“机器学习”一书，该书从小而简单的示例开始涵盖该主题。我怀疑您可以在线访问许多课程幻灯片，其中也提供了简单的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:44:56.377

我认为从更高级的工具开始，在用代码构建网络之前了解如何构建网络是有帮助的。拥有 UI 还可以让您玩弄网络并了解网络的行为方式（传播、解释等）。

例如查看免费的 Genie ( [http://genie.sis.pitt.edu](http://genie.sis.pitt.edu) ) 及其示例，和/或 50 个节点限制的 Hugin-Lite ( [http://www.hugin.com/productsservices/demo /hugin-lite](http://www.hugin.com/productsservices/demo/hugin-lite) ) 及其示例网络。然后，您可以检查您的 BNT 实施，以确保它们根据软件包进行验证。

编辑：我忘了提到 Netica，它是另一个 BN/影响图软件包，我认为它拥有最多的示例[http://www.norsys.com/netlibrary/index.htm](http://www.norsys.com/netlibrary/index.htm)。

# python - matplotlib：如何防止 x 轴标签重叠

> ID：13515471
> 
> 赞同：55
> 
> 时间：2012-11-22T15:05:57.990
> 
> 标签：python, matplotlib, bar-chart

我正在使用 matplotlib 生成条形图。一切正常，但我不知道如何防止 x 轴的标签相互重叠。这里有一个例子：
![在此处输入图像描述](../Images/c2869bfd8de302f6f8bc3d1559b4fb62.png)

这是 postgres 9.1 数据库的一些示例 SQL：

```
drop table if exists mytable;
create table mytable(id bigint, version smallint, date_from timestamp without time zone);
insert into mytable(id, version, date_from) values

('4084036', '1', '2006-12-22 22:46:35'),
('4084938', '1', '2006-12-23 16:19:13'),
('4084938', '2', '2006-12-23 16:20:23'),
('4084939', '1', '2006-12-23 16:29:14'),
('4084954', '1', '2006-12-23 16:28:28'),
('4250653', '1', '2007-02-12 21:58:53'),
('4250657', '1', '2007-03-12 21:58:53')
; 
```

这是我的python脚本：

```
# -*- coding: utf-8 -*-
#!/usr/bin/python2.7
import psycopg2
import matplotlib.pyplot as plt
fig = plt.figure()

# for savefig()
import pylab

###
### Connect to database with psycopg2
###

try:
  conn_string="dbname='x' user='y' host='z' password='pw'"
  print "Connecting to database\n->%s" % (conn_string)

  conn = psycopg2.connect(conn_string)
  print "Connection to database was established succesfully"
except:
  print "Connection to database failed"

###
### Execute SQL query
###  

# New cursor method for sql
cur = conn.cursor()

# Execute SQL query. For more than one row use three '"'
try:
  cur.execute(""" 

-- In which year/month have these points been created?
-- Need 'yyyymm' because I only need Months with years (values are summeed up). Without, query returns every day the db has an entry.

SELECT to_char(s.day,'yyyymm') AS month
      ,count(t.id)::int AS count
FROM  (
   SELECT generate_series(min(date_from)::date
                         ,max(date_from)::date
                         ,interval '1 day'
          )::date AS day
   FROM   mytable t
   ) s
LEFT   JOIN mytable t ON t.date_from::date = s.day
GROUP  BY month
ORDER  BY month;

  """)

# Return the results of the query. Fetchall() =  all rows, fetchone() = first row
  records = cur.fetchall()
  cur.close()

except:
  print "Query could not be executed"

# Unzip the data from the db-query. Order is the same as db-query output
year, count = zip(*records)

###
### Plot (Barchart)
###

# Count the length of the range of the count-values, y-axis-values, position of axis-labels, legend-label
plt.bar(range(len(count)), count, align='center', label='Amount of created/edited points')

# Add database-values to the plot with an offset of 10px/10px
ax = fig.add_subplot(111)
for i,j in zip(year,count):
    ax.annotate(str(j), xy=(i,j), xytext=(10,10), textcoords='offset points')

# Rotate x-labels on the x-axis
fig.autofmt_xdate()

# Label-values for x and y axis
plt.xticks(range(len(count)), (year))

# Label x and y axis
plt.xlabel('Year')
plt.ylabel('Amount of created/edited points')

# Locate legend on the plot (http://matplotlib.org/users/legend_guide.html#legend-location)
plt.legend(loc=1)

# Plot-title
plt.title("Amount of created/edited points over time")

# show plot
pylab.show() 
```

有没有办法防止标签相互重叠？理想情况下以自动方式，因为我无法预测条的数量。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-23T00:10:30.477

我认为您对 matplotlib 如何处理日期的几点感到困惑。

目前，您实际上并没有计划日期。您在 x 轴上绘制事物，`[0,1,2,...]`然后使用日期的字符串表示手动标记每个点。

Matplotlib 将自动定位刻度。但是，您覆盖了 matplotlib 的刻度定位功能（使用`xticks`基本上是在说：“我希望刻度正好在这些位置”。）

目前，`[10, 20, 30, ...]`如果 matplotlib 自动定位它们，你会得到滴答声。但是，这些将对应于您用于绘制它们的值，而不是日期（您在绘制时没有使用）。

您可能想要使用日期实际绘制事物。

目前，你正在做这样的事情：

```
import datetime as dt
import matplotlib.dates as mdates
import numpy as np
import matplotlib.pyplot as plt

# Generate a series of dates (these are in matplotlib's internal date format)
dates = mdates.drange(dt.datetime(2010, 01, 01), dt.datetime(2012,11,01), 
                      dt.timedelta(weeks=3))

# Create some data for the y-axis
counts = np.sin(np.linspace(0, np.pi, dates.size))

# Set up the axes and figure
fig, ax = plt.subplots()

# Make a bar plot, ignoring the date values
ax.bar(np.arange(counts.size), counts, align='center', width=1.0)

# Force matplotlib to place a tick at every bar and label them with the date
datelabels = mdates.num2date(dates) # Go back to a sequence of datetimes...
ax.set(xticks=np.arange(dates.size), xticklabels=datelabels) #Same as plt.xticks

# Make space for and rotate the x-axis tick labels
fig.autofmt_xdate()

plt.show() 
```

![在此处输入图像描述](../Images/bb8588964e7e0f260d37fb2414c4e06c.png)

相反，尝试这样的事情：

```
import datetime as dt
import matplotlib.dates as mdates
import numpy as np
import matplotlib.pyplot as plt

# Generate a series of dates (these are in matplotlib's internal date format)
dates = mdates.drange(dt.datetime(2010, 01, 01), dt.datetime(2012,11,01), 
                      dt.timedelta(weeks=3))

# Create some data for the y-axis
counts = np.sin(np.linspace(0, np.pi, dates.size))

# Set up the axes and figure
fig, ax = plt.subplots()

# By default, the bars will have a width of 0.8 (days, in this case) We want
# them quite a bit wider, so we'll make them them the minimum spacing between
# the dates. (To use the exact code below, you'll need to convert your sequence
# of datetimes into matplotlib's float-based date format.  
# Use "dates = mdates.date2num(dates)" to convert them.)
width = np.diff(dates).min()

# Make a bar plot. Note that I'm using "dates" directly instead of plotting
# "counts" against x-values of [0,1,2...]
ax.bar(dates, counts, align='center', width=width)

# Tell matplotlib to interpret the x-axis values as dates
ax.xaxis_date()

# Make space for and rotate the x-axis tick labels
fig.autofmt_xdate()

plt.show() 
```

![在此处输入图像描述](../Images/4bf8298cc00cb689ce5d02efe6c66712.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-21T09:55:18.363

至于您关于如何在 xaxis 上仅显示每 4 个刻度（例如）的问题，您可以这样做：

```
import matplotlib.ticker as mticker

myLocator = mticker.MultipleLocator(4)
ax.xaxis.set_major_locator(myLocator) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-23T19:37:18.083

*   OP 中的问题是日期被格式化为`string`类型。`matplotlib`将每个值绘制为刻度标签，刻度位置是基于值数量的 0 索引数字。
*   `type`在这种情况下，解决此问题的方法是将所有值转换为正确`datetime`的 。
    *   一旦`axes`有了正确的`type`，还有其他`matplotlib` [方法](https://matplotlib.org/stable/gallery/text_labels_and_annotations/date.html)，可用于进一步自定义刻度间距。
*   将字符串数据传递给 matplotlib API 时会绘制什么的答案[？](https://stackoverflow.com/q/68873370/7758804)更详细地解释将`string`值传递给`matplotlib`.
*   截至 2014-09-30，pandas 有一个[`read_sql`](https://pandas.pydata.org/docs/reference/api/pandas.read_sql.html)函数，它有一个`parse_dates`参数。你肯定想用它来代替。

### 原始答案

以下是将日期字符串转换为真实日期时间对象的方法：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
data_tuples = [
    ('4084036', '1', '2006-12-22 22:46:35'),
    ('4084938', '1', '2006-12-23 16:19:13'),
    ('4084938', '2', '2006-12-23 16:20:23'),
    ('4084939', '1', '2006-12-23 16:29:14'),
    ('4084954', '1', '2006-12-23 16:28:28'),
    ('4250653', '1', '2007-02-12 21:58:53'),
    ('4250657', '1', '2007-03-12 21:58:53')]
datatypes = [('col1', 'i4'), ('col2', 'i4'), ('date', 'S20')]
data = np.array(data_tuples, dtype=datatypes)
col1 = data['col1']

# convert the dates to a datetime type
dates = mdates.num2date(mdates.datestr2num(data['date']))
fig, ax1 = plt.subplots()
ax1.bar(dates, col1)
fig.autofmt_xdate() 
```

[![在此处输入图像描述](../Images/68484a6b96bf754907f276f7e1fb8d4d.png)](https://i.stack.imgur.com/HsOSY.png)

从数据库游标中获取一个简单的元组列表应该像...

```
data_tuples = []
for row in cursor:
    data_tuples.append(row) 
```

但是，我在这里发布了一个函数版本，用于直接使用 db 游标来记录数组或 pandas 数据帧：[如何将 SQL 查询结果转换为 PANDAS 数据结构？](https://stackoverflow.com/questions/12047193/how-to-convert-sql-query-result-to-pandas-data-structure/12056933#12056933)

希望这也有帮助。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-12T12:22:21.797

```
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
# create a random dataframe with datetimeindex
date_range = pd.date_range('1/1/2011', '4/10/2011', freq='D')
df = pd.DataFrame(np.random.randint(0,10,size=(100, 1)), columns=['value'], index=date_range) 
```

日期刻度标签经常重叠：

```
plt.plot(df.index,df['value'])
plt.show() 
```

[![在此处输入图像描述](../Images/45781e930124110a8c2fa28ce8366976.png)](https://i.stack.imgur.com/EQDvG.png)

所以旋转它们并右对齐它们很有用。

```
fig, ax = plt.subplots()
ax.plot(df.index,df['value'])
ax.xaxis_date()     # interpret the x-axis values as dates
fig.autofmt_xdate() # make space for and rotate the x-axis tick labels
plt.show() 
```

[![在此处输入图像描述](../Images/fdf8c151cb8dc12223a420308570890f.png)](https://i.stack.imgur.com/2B0rs.png)

# scala - 带有类型演员的 Akka 可靠代理？

> ID：13515477
> 
> 赞同：2
> 
> 时间：2012-11-22T15:06:30.277
> 
> 标签：scala, akka, actor, scala-2.9

我刚刚阅读了有关[akka 中可靠代理的信息](http://doc.akka.io/docs/akka/snapshot/contrib/reliable-proxy.html)，但我找不到将它们与类型化演员一起使用的方法。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T07:22:48.193

可靠代理模式是一种在从一个参与者发送到另一个参与者时管理服务质量的方法。[TypedActors 不是为这个用例而设计的，正如我之前描述](http://letitcrash.com/post/19074284309/when-to-use-typedactors)的那样，它们的使用相当有限。所以答案是：如果你想探索消息传递模式，请使用普通（无类型）actor，因为只有它们真正模拟了actor模型的消息传递特性。

# java - Java构建动态dataTable的问题

> ID：13515481
> 
> 赞同：0
> 
> 时间：2012-11-22T15:06:38.817
> 
> 标签：java, jsf

我需要构建一个动态数据表，它从数据库中携带一个具有以下结构的对象：

我需要构建一个动态数据表，它从数据库中携带一个具有以下结构的对象：

目的：

*   姓名 = 安娜
*   cpf = 12364547

我需要将此数据显示在两列中，例如：

第 1 列

*   姓名
*   cpf

第 2 栏

*   安娜
*   12364547

我有以下代码：

```
public void criarTabelaDinamica(Object obj){
        fc = FacesContext.getCurrentInstance();
        this.tableMensagem = (HtmlDataTable) fc.getApplication().createComponent(HtmlDataTable.COMPONENT_TYPE);

        HtmlColumn column1 = new HtmlColumn();
        tableMensagem.getChildren().add(column1);

        HtmlColumn column2 = new HtmlColumn();
        tableMensagem.getChildren().add(column2);

        tableMensagem.setValue(obj); //how to put the items in the two columns of the object? Here is my question!!!
    } 
```

注意：对象因我的示例中的项目数量而异，为 2，例如，您可能有 5 个。

谢谢！！！

# android - Eclipse juno android xml 编辑器缺少按钮

> ID：13515482
> 
> 赞同：0
> 
> 时间：2012-11-22T15:06:40.293
> 
> 标签：android, eclipse, android-layout, android-xml, eclipse-juno

我最近决定开始玩一些 Android 编程，但我有一个非常奇怪的问题，我无法指定它是否是由我使用的 Eclipse 版本（又名 Juno）引起的。更具体地说，当我打开 Eclipse Indigo 上的 AndroidManifest.xml 时，底部有 5 个按钮，Manifest、Application、Permission、Instrumentation 和 AndroidManifest.xml。

现在，当我在 eclipse Juno 上打开这个文件时（忘了说我使用的是最新的 Android sdk 工具），底部没有这样的按钮，我根本无法移动到另一个方面/视图。我不知道这是否是 Juno 的版本特定问题，但因为我觉得它有点烦人，所以我更喜欢在 Juno 上工作。

我试着在网上搜索了一下，但找不到任何东西，而且我在 Eclipse 中也找不到可以（也许）禁用/启用此类功能的选项。另外，我想提一下我的操作系统是 ubuntu 12.04 lts 32 位。

任何反馈表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:12:55.980

尝试通过右键单击 xml 文件打开这些文件，然后使用 Open With -> Android XML Common Editor。

# java - 如何获得对话框大小？

> ID：13515486
> 
> 赞同：13
> 
> 时间：2012-11-22T15:06:58.110
> 
> 标签：java, android, dialog, android-dialog

我正在寻找一种获取自定义对话框大小的方法。我经历了[这个](https://stackoverflow.com/questions/11392334/how-to-get-size-of-a-custom-dialog-in-android)问题，但给出的唯一答案是没有用的，因为如果我尝试`mDialog.getWindow().getAttributes().height;`它只会返回-2，这是`WRAP_CONTENT`我设置为对话框的属性的常量。我怎样才能得到它的大小。我想知道背景图像的 siye。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-22T15:17:42.290

试试看：

```
mDialog.getWindow().getDecorView().getHeight() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-22T15:12:28.620

实际上，在 Android 中它不像在 iOS 中那样工作 - 您无法获得其`View`自身的大小，但是您可以做的是询问该视图的**ROOT**布局的大小。

例如：

`myDialog.this.findViewById(R.id.dialog_root_layout).getHeight());`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-24T17:33:02.580

@Kormilsev Anatoliy 的回答是正确的，我只是在改进。因此，在您从 Dialog 类继承的类中，只需覆盖该方法：

```
@Override
public void onWindowFocusChanged (boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    height = getWindow().getDecorView().getHeight();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-21T03:34:25.523

以防万一，如果您有自己的自定义对话框的 XML 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/dialog_main_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:background="@color/primaryBackground">

    /* whatever you want here */

</android.support.constraint.ConstraintLayout> 
```

活动中：

```
 final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.popup_gameover);

    dialog.setOnShowListener(new DialogInterface.OnShowListener() {
        @Override
        public void onShow(DialogInterface d) {
            View view = dialog.findViewById(R.id.dialog_main_layout);
            int width = view.getWidth();
            int height = view.getHeight();

            ...
        }
    }); 
```

这`width`和`height`预期的完全一样。

# matlab - 简化绘制轨迹的使用

> ID：13515491
> 
> 赞同：1
> 
> 时间：2012-11-22T15:07:36.753
> 
> 标签：matlab

我的项目是基于寻找相机记录的物体的轨迹。我已经获得了一个 3d 矩阵（2 维用于图像场景，第 3 轴是时间箭头），我在其中放置了代表对象后续位置的点。每个点都有一个索引，通过它我可以区分对象（值为“3”的点仅指索引为“3”的对象的轨迹）。现在我想画一条线来连接以下（在时间轴上）点。

我发现 streamline(x, y, z, u, v, w, sx, sy, sz) 函数非常适合我。但是我无法定义正确的 u、v、w 矩阵。我想如果我想要一个从点 A(xa, ya, za) 到点 B(xb, yb, zb) 的过渡流线，那么我需要计算向量 AB = [xb-xa, yb-ya, zb-za ] 并把它放到我的 u, v, w: u(xa, ya, za) = xb-xa; v(xa, ya, za) = yb-ya; w(xa, ya, za) = zb-za;

对于没有轨迹的点，其余的 u、v、w 保持为 0。但流线型的结果是空白空间。谁能给我一些建议？

# algorithm - 链表错误

> ID：13515492
> 
> 赞同：2
> 
> 时间：2012-11-22T15:07:37.657
> 
> 标签：algorithm, data-structures, linked-list

我只是在其中一个名为 name 的结构上测试该函数，但它不会到达它们。这是到目前为止的完整代码：

更新：

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <cstddef>
using namespace std;

struct Node{
    string name;
    string address;
    int phoneNum;
    struct Node* next;
};

Node insertInOrder(Node p, string theName);
void push(struct Node*& head, string theName);

int main(){

    cout<<"\tEnter S or s to show the list contents \n"
        <<"\tEnter A or a to add a node to the list \n"
        <<"\tEnter D or d to delete a node from the list \n"
        <<"\tEnter Q or q to quiet the program \n"
    <<"Make your selection: "<<endl;

    struct Node* newNode = new Node;
    push(newNode, "yeah");

    cout<<newNode;

    return 0;

}

void push(struct Node*& head, string theName){
    struct Node* newNode = new Node;
    newNode->name = theName;
    newNode->next = head;
    head = newNode;
}

Node insertInOrder(Node p, string theName){
    if(p == NULL || p.name >= theName){
        return new Node(p, theName);
    }
    else{
            p.next = insertInOrder(p.next, theName);
            return p;
        }
    } 
```

我收到一条错误消息：此代码的“sizeof”对不完整类型“节点”的无效应用：

```
 void push(struct Node*& head, string theName){
    struct Node* newNode = malloc(sizeof(struct Node));
    newNode->name = theName;
    newNode->next = head;
    head = newNode;
} 
```

我正在尝试将此代码转换为我的代码，但出现错误：

```
 Node insertInOrder( int k, Node p ) {
   if( p == " " || p.item >= k ) 
      return new Node( k, p ); 
   else {
      p.next = insertInOrder( k, p.next ); 
      return p;
   }
} 
```

我是这样翻译的：

```
Node insertInOrder(Node p, string theName){
    if(p == " " || p.name >= theName){
        return new Node(p, theName);
    }
    else{
            p.next = insertInOrder(p.next, theName);
            return p;
        }
    } 
```

这是此代码的错误：

```
 if(p == " " || p.name >= theName){
        return new Node(p, theName); 
```

错误：

```
- comparison with string literal results in unspecified behaviour [-Waddress]
- request for member ‘name’ in ‘p’, which is of pointer type ‘Node*’ (maybe you meant to use ‘-
 >’ ?)
- comparison between distinct pointer types ‘Node*’ and ‘const char*’ lacks a cast [-
 fpermissive] 
```

p.next = insertInOrder(p.next, theName); 返回 p;

错误：

```
Invalid arguments ' Candidates are: Node insertInOrder(Node, std::basic_string<char,std::char_traits<char>,std::allocator<char>>) '
- could not convert ‘p.Node::next’ from ‘Node*’ to ‘Node’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:19:13.887

几点：

*   忘记`malloc`，因为您正在使用 C++ 并使用`new`and`delete`
*   每当您使用它时，您都不需要再次指定该节点是一个结构，这样`sizeof(Node)`就足够了，但您不会直接使用 malloc
*   你的函数`Node insertInOrder(Node p, string theName)`接受一个具体的 Node 并返回一个具体`Node`的但你结构中的 next 字段是一个指向 a 的指针`Node`，我想你应该在你使用的内容上保持一致，因为你正在使用指针处理链表更合适
*   您不能直接在值和字符串文字 ( ) 之间使用比较运算符`p == " "`，您应该只检查`name`字段

# javascript - 为什么这个 div 与之前的 div 重叠？

> ID：13515495
> 
> 赞同：0
> 
> 时间：2012-11-22T15:07:54.210
> 
> 标签：javascript, html, css

我真的不知道怎么问，不知道这是什么错误。我很菜。

我试图订购这个 div，但 detalle_info 与之前的一个重叠（注意那里有白字）。

为什么会这样？提前致谢。

[http://tinyurl.com/cb8m37u](http://tinyurl.com/cb8m37u)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:15:17.787

在 #tabscontent 中，您的 tabs2 和 tabs3 DIV 位于 tabs1 DIV 中。将它们移出那里，希望它应该被修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:15:45.093

我看到`<div>`with id`namecost`有一个固定的高度 30px，只需将其删除。删除该高度将使 div 可根据其内容调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:16:19.123

您将高度设置为 30px，但内容不适合该高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:17:10.757

让你的积木漂浮，没有什么比这更复杂的了。在您的 div 上使用 float:left。顺便说一句，你不需要每个句子的 div 。（别忘了在最后写清楚：both）

# php - 按下按钮时如何获取提交类型按钮的ID

> ID：13515496
> 
> 赞同：6
> 
> 时间：2012-11-22T15:07:51.847
> 
> 标签：php, html

我想打印出我按下的按钮的 id。id 是为表中的每个按钮动态设置的。这是我的 HTML 代码：

```
 echo '<td><center><input type="submit" id="'.$row['I_ID'].'" class="btn"
name="Add" value ="Add to cart"><center></td><tr>'; 
```

我想在这里打印按钮的 id。

```
if (isset($_POST['Add'])) {
    $ID = $_GET['id'];
    echo $ID;
    echo '<br/>' . "* The item has been added to your cart.";
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T15:17:06.143

如果您不想使用隐藏字段，您可以像这样设置提交按钮：

```
<button type="submit" name="id" value="value">Submit</button> 
```

然后你可以用`$_GET['id']`.

您可以有多个`type="submit"`同名按钮 ( `id`)，如果表单是通过按 Enter 提交的，则值将是被点击的那个，或者是第一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T15:10:15.903

'id' 属性不提交给 PHP，只有 'value' 属性提交。

您应该做的是添加一个名为“id”的隐藏输入，如下所示：

```
echo '<td><center><input type="hidden" name="id" value="' . $row['I_ID'] . '" /><input type="submit" id="'.$row['I_ID'].'" class="btn" name="Add" value ="Add to cart"><center></td><tr>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T15:11:40.230

使用隐藏的输入字段：

```
<input type="hidden" value=".$row['I_ID']." name="input2"/> 
```

然后通过以下方式在第二个脚本中访问它：

```
$_POST['input2']; // or $_GET['input2'], depending on the method of the form submitting 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:15:17.650

正如其他人所说， id 属性没有传递给 PHP。

您可以使用 name 属性而不是 id，它将被传递给 PHP。

如果您有以下 HTML

```
<input type="submit" name="some_name" class="btn" value ="Add to cart"> 
```

你可以在 PHP 中访问它

```
$_POST['some_name'] = "Add to Cart" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T15:16:49.950

您可以使用 jquery 获取 id 并通过 ajax 调用发送它：

```
$(document).on('click', 'input.btn', function() {
    var this_id = $(this).attr('id');
    ajaxCall(this_id);
});

function ajaxCall(this_id) {
    var data = 'id=' + this_id;

$.ajax({
    url: 'proccess.php',  
    type: "GET",    
    data: data,
    cache: false,
    success: function (html) {
            DO WHAT EVER YOU WANT WITH THE RETURNED html
    }         
}); 
```

你的'proccess.php'：

```
 if (isset($_POST['Add'])) {
        $ID = $_GET['id'];
        echo $ID;
        echo '<br/>' . "* The item has been added to your cart.";
    } 
```

# ios - 使用“PhoneGap Build”提交到 App Store 构建的 PhoneGap 应用程序

> ID：13515498
> 
> 赞同：5
> 
> 时间：2012-11-22T15:07:58.273
> 
> 标签：ios, cordova, app-store, submission

是否可以通过[https://build.phonegap.com/](https://build.phonegap.com/)生成一个可以在 App Store 中提交的二进制文件？

我不想通过 Xcode 来做，而只能通过“PhoneGap Build”来做。[常见问题解答](https://build.phonegap.com/faq)和[新闻稿](http://phonegap.com/blog/2012/09/24/phonegap-build-is-launched)指出这是可能的：

```
Quickly and easily get back app-store ready apps for multiple platforms, 
including: *Apple iOS*, Google Android, ... 
```

所以，我已经成功地在 android 和 ios 上构建和测试了我的应用程序。此外，我已经成功地为 android 商店（谷歌播放）构建了一个发布就绪版本并提交。

我的问题是我似乎无法为 App Store 做同样的事情。在尝试使用 Application Loader 提交时，我得到：

```
Application failed codesign verification. The signature was invalid, 
contains disallowed entitlements, or it was not signed with an iPhone 
Distribution Certificate

Unable to extract entitlements from application:
/var/folders/vr/ghc8p.../T/APPNAME.ipa/Payload/APPNAME.app/APPNAME 
```

请注意，我确实使用分发证书从 PhoneGap Build 构建 .ipa

知道我接下来应该看哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T08:01:32.123

事实证明，这是一个 PhoneGap Build 错误。旧证书似乎已被缓存。我删除了应用程序（在 PhoneGap Build 中）和我的所有证书配置。我使用发布问题时使用的最后一个良好分发证书创建了一个新应用程序和一个新证书配置。

构建已成功从应用程序加载器接受。

所以这是一个 PhoneGap Build 错误。

# jquery - jquery file-upload-plugin - 拖放在firefox 3.6中不起作用

> ID：13515506
> 
> 赞同：2
> 
> 时间：2012-11-22T15:08:52.100
> 
> 标签：jquery, html, file-upload

由于我不会进入的原因，我需要支持具有拖放文件上传功能的 firefox 3.6。不幸的是，jquery-file-upload 似乎不支持 3.6，文档说它支持，但即使演示页面不适用于 ff3.6 [http://blueimp.github ，我也无法拖放工作.com/jQuery-文件-上传/](http://blueimp.github.com/jQuery-File-Upload/)

还有其他人设法做到这一点吗？我知道这个浏览器支持 HTML5 文件上传 API，我已经设法让 dnd 与另一个库一起工作，但我只想在必要时切换。

# .net - 在 WPF 中将最大长度设置为 DataGridTextBoxColumn

> ID：13515509
> 
> 赞同：1
> 
> 时间：2012-11-22T15:09:01.423
> 
> 标签：.net, wpf, maxlength

有没有办法在 WPF 的 DataGridTextBoxColumn 中设置最大长度？我找不到这个属性，我能想到的唯一方法是使用 DataGridTemplateColumn。

但是，当我这样做时，我在尝试编辑时遇到了一些其他问题。我希望有相同的行为：文本被选中，我可以开始输入正确的方式，这不是我现在得到的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:34:47.600

我知道这个有点旧，但我在回答类似[问题](https://stackoverflow.com/questions/1736753/datagridtextcolumn-maxlength "DataGridTextColumn.MaxLength？")之前就达到了，所以仅供参考。

您可以使用`EditingElementStyle`可以定位`TextBox`单元格内部的属性。

```
<DataGridTextColumn>
    <DataGridTextColumn.EditingElementStyle>
        <Style TargetType="TextBox">
            <Setter Property="MaxLength" Value="10"/>
        </Style>
    </DataGridTextColumn.EditingElementStyle>
</DataGridTextColumn> 
```

如果您在多个地方都有此样式，则可以将此样式移动到公共资源或单独的文件中，然后从那里使用它。在这种情况下，您需要类似：

风格资源：

```
<Style TargetType="{x:Type TextBox}" x:Key="TextBoxWithMaxLength" >
    <Setter Property="MaxLength" Value="10"/>
</Style> 
```

XAML：

```
<DataGridTextColumn EditingElementStyle="{StaticResource TextBoxWithMaxLength}"/> 
```

# python - 可迭代字符串

> ID：13515510
> 
> 赞同：1
> 
> 时间：2012-11-22T15:09:01.707
> 
> 标签：python, string, iterator

所以知道什么是迭代器，我假设一个字符串是一个可迭代的对象，因为以下是可能的：

```
for c in str:
  print c 
```

我正在继承`str`和覆盖`__hash__`and `__eq__`。在`__hash__`，我试图迭代字符串如下：

```
for c in self.__str__: 
```

但是会返回以下错误：`TypeError: 'method-wrapper' object is not iterable`. 这意味着它`__str__`是不可迭代的。如何获得字符串的可迭代版本？我尝试在 Python 上查找某种`str`对象 API，但 Python 的文档只向您展示了如何使用字符串，而不是内部是什么，以及其中的哪个对象`str`是可迭代的。

如何在我的字符串对象中遍历我的子类字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:10:32.033

应该`for c in self`做的。由于`self`是一个字符串，因此您可以对字符进行迭代。

`for c in self.__str__`不起作用，因为`__str__`它是一种方法，您必须调用它（但在这种情况下没用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:10:30.133

[`__str__`是另一个钩子方法](http://docs.python.org/2/reference/datamodel.html#object.__str__)，而不是字符串的值。

如果这是 的子类`str`，则可以直接迭代`self`：

```
for c in self: 
```

或者你可以让它更明确：

```
for c in iter(self): 
```

如果这*不是*子类，也许您打算*调用* `__str__()`：

```
for c in self.__str__(): 
```

或者您可以避免调用钩子并使用`str()`：

```
for c in str(self): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:12:37.990

如果你明确需要调用`__str__`钩子，你可以通过`str(self)`（推荐）或`self.__str__()`（不推荐，作为风格问题）来调用它。

`self.__str__`只是引用该名称的方法对象，而不是调用它。

# cluster-computing - 小型科学计算集群的最佳软件堆栈是什么

> ID：13515511
> 
> 赞同：0
> 
> 时间：2012-11-22T15:09:02.003
> 
> 标签：cluster-computing, scientific-computing, hpc

我在一个研究小组工作，主要从事机器学习和计算生物学。

我们目前有一个集群，但维护不善，I/O 吞吐量低，最关键的是没有任何调度或负载平衡设置。因此，要使用它，您必须自己找到一个空闲节点，通过 ssh 进入该节点，在命令行上运行您的脚本，然后手动收集您的结果。

实现易于使用的调度程序和负载平衡器的最佳软件堆栈是什么，以便用户可以将他们的作业提交到中央队列，当资源可用时自动运行，并轻松获取结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:05:28.457

有许多调度程序/资源管理器选项是开源的并且经过深思熟虑：

*   [Torque](http://en.wikipedia.org/wiki/TORQUE_Resource_Manager) / [Maui](http://www.adaptivecomputing.com/products/hpc-products/moab-hpc-basic-edition/)，古老的 PBS 的后代，现在由自适应计算维护
*   [Slurm](https://computing.llnl.gov/linux/slurm/)是 LLNL 的一个较新的项目，它的优点是可以很好地扩展
*   [Open Grid Engine](http://gridscheduler.sourceforge.net) , née Sun Grid Engine

但是还有许多旨在简化集群管理的完整软件堆栈：

*   [Warewulf](http://warewulf.lbl.gov/trac) , 脱离 LBL
*   [岩石](http://www.rocksclusters.org/)

我正在为其他有建议的人制作一个社区 wiki。

# java - 使用 InflaterInputStream 读取数据

> ID：13515512
> 
> 赞同：0
> 
> 时间：2012-11-22T15:09:04.483
> 
> 标签：java, inputstream

我正在做类似的事情

```
FileOutputStream fout = new FileOutputStream("test.dat", true);  //appending=true
Deflater d = new Deflater(Deflater.BEST_COMPRESSION);
DataOutputStream outFile = new DataOutputStream(new DeflatorOutputStream(fout, d)); 
```

以压缩格式打开用于写入数据的文件。我将数据写入文件：

```
void writeObject(MyObject o) {
outFile.writeLong(o.getDate().getTime());
outFile.writeChar(o.getValue1());
outFile.writeDouble(o.getValue2());
outFile.writeInt(o.getValue3()); 
```

偶尔我会刷新文件，然后关闭它。

我读了以下数据：

```
FileInputStream fin = new FileInputStream("test.dat");
DataInputStream inFile = new DataInputStream(new InflaterInputStream(fin));
try {    
 while(true) {
   long a = inFile.readLong();
   char b = inFile.readChar();
   double c = inFile.readDouble();
   int d = inFile.readInt()
   MyObject m = new MyObject(a,b,c,d);
   System.out.println(m.toString());
}
catch (Exception e) { } 
```

现在，当我将一堆 MyObjects 写入文件时，然后刷新（）和关闭（）文件。然后尝试阅读它们，它按预期工作。

但是，如果我将 50 个 MyObjects 写入文件，flush()，close()，然后重新打开文件，然后再写入 100 个 MyObjects，我看到文件大小在磁盘上按预期增长，但是当我尝试读取，我永远只能读取前 50 个对象（从第一个打开/关闭）到它们的末尾，我得到：

```
java.io.DataInputStream.readFully
java.io.DataInputStream.readLong 
```

在读。我不知道为什么会这样。如果我从 DataOutputStream/DataInputStream 中删除 DeflatoerOutputStream/InflaterInputStream，这可以正常工作（全部未压缩）。我在这里做错了什么？

提前致谢 -

# javascript - 谷歌地图标记未在 IE 中显示

> ID：13515514
> 
> 赞同：1
> 
> 时间：2012-11-22T15:09:08.213
> 
> 标签：javascript, ajax, google-maps

**嗨，我正在尝试使用 Google Maps API 创建一个网站并从 MySQL db 获取坐标**。到目前为止一切顺利，但**仅限于 Chrome 或 Safari**。**标记不会显示在 Internet Explorer**中。我可以使用一些帮助。我遵循了 Google [https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)的本指南 无论如何，这是我的代码。任何帮助将不胜感激，谢谢。

```
var customIcons = {
  sport: {
    icon: 'images/markers/sport.png',
  },
  bar: {
    icon: 'images/markers/bar.png',
  },
  poi: {
    icon: 'images/markers/poi.png',
  },
  skola: {
    icon: 'images/markers/skola.png',
  },
  kino: {
    icon: 'images/markers/kino.png',
  },
  divadlo: {
    icon: 'images/markers/divadlo.png',
  }
};

function nactimapu() {
  var map = new google.maps.Map(document.getElementById("mapa"), {
    center: new google.maps.LatLng(49.068299, 17.460907),
    zoom: 15,
    mapTypeId: 'hybrid'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("querymapa.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var nazev = markers[i].getAttribute("nazev");
      var popis = markers[i].getAttribute("popis");
      var typ = markers[i].getAttribute("typ");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + nazev + "</b> <br/>" + popis;
      var icon = customIcons[typ] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        animation: google.maps.Animation.DROP,
        icon: icon.icon
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {} 
```

**这是php中的xml输出，可能有错误。对不起，我没有早点发布。**

```
<?php  

require("dbconfig.php"); 

function parseToXML($htmlStr) 
{ 
$xmlStr=str_replace('<','&lt;',$htmlStr); 
$xmlStr=str_replace('>','&gt;',$xmlStr); 
$xmlStr=str_replace('"','&quot;',$xmlStr); 
$xmlStr=str_replace("'",'&#39;',$xmlStr); 
$xmlStr=str_replace("&",'&amp;',$xmlStr); 
return $xmlStr; 
} 

// Opens a connection to a MySQL server
$connection=mysql_connect ($dbserver, $dbuser, $dbheslo);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($dbname, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM lokace WHERE 1";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  echo '<marker ';
  echo 'nazev="' . parseToXML($row['nazev']) . '" ';
  echo 'popis="' . parseToXML($row['popis']) . '" ';
  echo 'lat="' . $row['lat'] . '" ';
  echo 'lng="' . $row['lng'] . '" ';
  echo 'typ="' . $row['typ'] . '" ';
  echo '/>';

// End XML file
echo '</markers>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:11:05.560

您的数组中有额外的逗号：

```
sport: {
     icon: 'images/markers/sport.png',  <-- Right here (among other places)
  } 
```

Internet Explorer 不喜欢这样，而其他浏览器则不介意。您可以安全地删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:15:51.670

```
 sport: {icon: 'images/markers/sport.png',}, 
```

Explorer 期望（其他浏览器忽略这一点）您向其中添加另一个命令，例如纬度或经度坐标以及标记中指定的其他项目。删除右括号前的逗号，你应该没问题

例如，我在下面发布了我自己工作的标记，所以你可以看到，当我关闭括号时，我不再使用逗号

```
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(data.latitude, data.longitude),
    map: yay,
    title: title,
    icon: icon
}); 
```

# java - 为什么我的 JmenuBar 没有显示

> ID：13515519
> 
> 赞同：2
> 
> 时间：2012-11-22T15:09:23.220
> 
> 标签：java, swing, user-interface, jpanel, jmenubar

我正在研究一个简单的 gui。

我似乎无法找出我的`JMenuBar`未出现的原因。我错过了什么？

这是下面的代码。

```
 myMenuBar = new JMenuBar(); 
    myFileMenu = new JMenu("File"); 
    myRegisterItem = new JMenuItem("Register");
    myMenuBar.add(myFileMenu);
    myFileMenu.add(myRegisterItem);
    setJMenuBar(myMenuBar); 
```

全班：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.rmi.Naming;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.EmptyBorder;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class GUI extends JFrame{

private JTextArea recievedField;
private JButton sendButton;
private JTextField messageField; 
private JComboBox itemComboBox;
private JButton connectButton;
private JTextField userNameField;
private JPasswordField passwordField;
private JButton loginButton;
private JMenuBar myMenuBar;
private JMenu myFileMenu;
private JMenuItem myRegisterItem;

public static void main(String[] args) {
    new GUI();
}

public GUI() {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                    e.printStackTrace();
                } 

            JFrame frame = new JFrame("GUI");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.add(new MainPane());
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }

    });
}

public class MainPane extends JPanel {

    public MainPane() {

        myMenuBar = new JMenuBar(); 
        setJMenuBar(myMenuBar); 
        myFileMenu = new JMenu("File"); 
        myRegisterItem = new JMenuItem("Register");
        myMenuBar.add(myFileMenu);
        myFileMenu.add(myRegisterItem);

        setBorder(new EmptyBorder(4, 4, 4, 4));
        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 1;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        add(new LoginPane(), gbc);
        gbc.gridy++;
        add(new ConnectPane(), gbc);
        gbc.gridy++;
        gbc.weighty = 1;
        gbc.fill = GridBagConstraints.BOTH;
        add(new JScrollPane(recievedField = new JTextArea(5, 20)), gbc);

        gbc.gridwidth = 1;

        messageField = new JTextField(10);
        sendButton = new JButton("Send");

        gbc.gridy++;
        gbc.weighty = 0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        add(messageField, gbc);
        gbc.gridx++;
        gbc.weightx = 0;
        gbc.insets = new Insets(5,5,5,5);
        add(sendButton, gbc);          

    }

}

public class ConnectPane extends JPanel {

    public ConnectPane() {

        itemComboBox = new JComboBox();
        itemComboBox.addItem("Select an Item");
        connectButton = new JButton("Connect");

        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.anchor = GridBagConstraints.WEST;
        gbc.insets = new Insets(5,5,5,5);
        add(itemComboBox, gbc);

        gbc.gridx++;
        gbc.weightx = 1;
        gbc.insets = new Insets(5,5,5,5);
        add(connectButton, gbc);
    }

}

public class LoginPane extends JPanel {

    public LoginPane() {

        userNameField = new JTextField(10);
        passwordField = new JPasswordField(10);
        loginButton = new JButton("Login");

        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.anchor = GridBagConstraints.WEST;
        gbc.insets = new Insets(5,5,5,5);
        add(new JLabel("User name:"), gbc);

        gbc.gridx++;
        gbc.insets = new Insets(5,5,5,5);
        add(userNameField, gbc);

        gbc.gridx++;
        gbc.insets = new Insets(5,5,5,5);
        add(new JLabel("Password:"), gbc);

        gbc.gridx++;
        gbc.insets = new Insets(5,5,5,5);
        add(passwordField, gbc);

        gbc.gridx++;
        gbc.weightx = 1;
        add(loginButton, gbc);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:18:59.477

您的问题是您调用`setJMenuBar`实例`JPanel`这是错误的，您应该调用：

```
frame.setJMenuBar(myMenuBar); 
```

也不需要：

```
frame.setLayout(new BorderLayout()); 
```

因为`JFrame` *contentPane*布局默认是`BorderLayout`

即将您的代码更改为：

```
 JFrame frame = new JFrame("GUI");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(new MainPane());
            frame.setJMenuBar(myMenuBar);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true); 
```

也不要使用`EventQueue`相当`SwingUtilities`：

```
 SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {

            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (Exception e) {
                e.printStackTrace();
            }

            JFrame frame = new JFrame("GUI");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(new MainPane());
            frame.setJMenuBar(myMenuBar);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }
    }); 
```

`setJmenuBar(..)`不要忘记在你的`MainPane`课堂上注释掉：

```
 public MainPane() {
        myMenuBar = new JMenuBar();

        //notice no call to setJMenuBar

        myFileMenu = new JMenu("File");
        myRegisterItem = new JMenuItem("Register");
        myMenuBar.add(myFileMenu);

        ...
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:11:10.803

这是因为你没有设置你的 JMenuBar 可见。

将此添加到您的代码中

```
 frame.setJMenuBar(myMenuBar); // This line to be added
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true); 
```

# android - Android中的图像处理性能

> ID：13515522
> 
> 赞同：0
> 
> 时间：2012-11-22T15:09:30.397
> 
> 标签：android, android-image

我正在尝试对我的图像执行一组操作，例如：

*   应用 Photoshop 曲线（更改像素值并使用 bmp.setPixels()）
*   应用亮度/对比度更改（使用 ColorMatrix 和 paint.setColorFilter）
*   应用饱和度（也使用 ColorMatrix）
*   模糊图像（使用 bmp.setPixels()）

和更多。

问题是当我尝试对一张图像应用 3 或 4 或 5 次操作时，会花费很多时间（在我的 HTC Desire 上需要 10-12 秒）并且效果不佳。我正在寻找一种提高图像处理性能的好方法。可能吗？

# vb.net - 在按钮单击时动态添加文本框

> ID：13515523
> 
> 赞同：0
> 
> 时间：2012-11-22T15:09:35.593
> 
> 标签：vb.net, textbox

我正在使用 vb.net windows 窗体应用程序中的 windows 窗体应用程序，其中有两个按钮：

1.  添加新的文本框
2.  将多个文本框数据插入数据库

当我点击第一个按钮时，它将创建新的文本框，如果我点击第二个按钮，它应该在数据库中插入多个文本框的数据。

数据库只有两个字段

1.  id 主键
2.  姓名

文本框包含名称。

请建议我实现这一点的方法，我对此一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:36:51.150

In your click-event assuming the ID-field is auto-incrementing in the database:

```
dim myTxt as New TextBox
myTxt.Name = Me.Controls.Count.ToString '"random" name
myTxt.Location = New Point(10, 10) 'set the position according to your layout
myTxt.Tag = "For DB" 'something to identify it by
myTxt.Visible = True

Me.Controls.Add(myTxt) 'add it to form's control collection.
Me.Refresh             'If in panel etc. change Me with that control. 
```

Then in your second click event:

```
... open database, do checks etc.

For each c As Control in Me.Controls
    If typeof c Is TextBox AndAlso c.Tag ="For DB" Then
        Dim txt As String = CType(c, TextBox).Text
        'insert txt into database
    End If
Next 
```

(A data-grid can do this for you as well).

Also you can use an array to perform the creation, and you can interact with each textbox you create by its index.

```
For y As UShort = 0 To indexsize_b - 1
    For x As UShort = 0 To indexsize_a - 1
    array(x, y) = New TextBox
    array(x, y).Size = New Size(60, 20)
    array(x, y).Location = New Point(5 + 60 * x, 40 + 20 * y)
    array(x, y).Visible = True
    Me.Controls.Add(array(x, y))
    Next
Next 
```

Interact via something like:

```
string s = array(a, b).text 
```

# actionscript-3 - 将一个组件放在另一个组的前面

> ID：13515527
> 
> 赞同：0
> 
> 时间：2012-11-22T15:09:52.833
> 
> 标签：actionscript-3, apache-flex

我有一个带有一些组件（标签、按钮等）的屏幕。

在这个屏幕前面，我展示了一个以 0.7 的黑色 alpha 填充屏幕的组件。

```
<s:Group id="screen" width="100%" height="100%">
    // components...
</s:Group>

<s:Group id="alpha" width="100%" height="100%">
    <s:Rect width="100%" height="100%">
        <s:fill><s:SolidColor alpha=".7"/></s:fill>
    </s:Rect>
    // components...
</s:Group> 
```

我想要的是在“alpha”屏幕前面显示一个（在“屏幕”组中）后面的组件。

因为它在不同的组中，所以我不能使用`depth`

但是，我无法从“屏幕”中删除该组件并将其添加到“alpha”中`addElement()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:49:14.340

您可以将“alpha”组放在“screen”组内，然后将 depth="1" 设置为您想要在“alpha”组上方的组件。

```
<s:Group id="screen" width="100%" height="100%">
    // components
    <s:Group id="alpha" width="100%" height="100%">
        <s:Rect width="100%" height="100%">
            <s:fill><s:SolidColor alpha="0.7"/></s:fill>
        </s:Rect>
    </s:Group>
</s:Group> 
```

# java - 使用静态工厂方法的动机

> ID：13515531
> 
> 赞同：0
> 
> 时间：2012-11-22T15:10:08.870
> 
> 标签：java

使用静态工厂方法的动机如下：

> Replace Constructor with Factory Method 最明显的动机是用子类化替换类型代码。
> 
> 您有一个经常使用类型代码创建的对象，但现在需要子类。确切的子类基于类型代码。
> 
> 但是，构造函数只能返回被请求的对象的一个​​实例。所以你需要用工厂方法替换构造函数。

谁能用代码解释一下？这个**类型代码**是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:15:56.653

工厂方法相对于裸构造函数的第二个优势是它可以返回现有对象。该`Integer.valueOf(int)`方法很好地利用了这一点。相比之下，`new`总是创建一个新对象。

最后，如果我们稍微扩大讨论范围，非静态工厂方法（例如以工厂*对象*的形式）允许您使用多态性来实现不同的对象创建策略。

* * *

> 这个类型代码是什么意思？

您需要在获得此内容的页面的上下文中阅读此内容。该页面所讨论的是代表不同“类型”事物的单个类。（在给出的例子中，一个`Employee`类代表不同类型的员工。）“类型代码”只是区分不同类型的类的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:13:36.277

构造函数只能返回一个实现，但是静态工厂方法可以返回任意数量的实现，通常是所引用类的子类。静态工厂方法还具有命名的优点，因此您可以对相同的参数有不同的行为。

例如，这两个方法返回一个 EnumSet 的子类（基于枚举中元素的数量），根据名称（即使论点相同）具有不同的值

```
EnumSet<MemoryType> memoryTypes = EnumSet.noneOf(MemoryType.class);
EnumSet<MemoryType> memoryTypes2 = EnumSet.allOf(MemoryType.class); 
```

从源头

```
public static <E extends Enum<E>> EnumSet<E> noneOf(Class<E> elementType) {
    Enum[] universe = getUniverse(elementType);
    if (universe == null)
        throw new ClassCastException(elementType + " not an enum");

    if (universe.length <= 64)
        return new RegularEnumSet<>(elementType, universe);
    else
        return new JumboEnumSet<>(elementType, universe);
} 
```

您可以看到它有一种用于较小枚举集的实现，另一种用于较大的枚举集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:17:42.007

想象一下，我们有一个`Person`类，其中有一个字段`type`，用于指示该人是教师还是学生。这将是类型代码。

现在想象我们用对象层次结构替换这个类型字段：`Person`具有 2 个子类的类`Teacher`和`Student`.

如果我使用构造函数，那么我只能创建特定类型的人，即`new Teacher()`或`new Student()`

但是如果我想要一种基于某种逻辑创建不同类型的人的方法，那么我可以这样做：

```
public static Person newPerson() {
   // can return either a Teacher or a Student
} 
```

# sql-server-2005 - Visual Basic 6.0 +Sql Server 存储过程超时问题

> ID：13515532
> 
> 赞同：2
> 
> 时间：2012-11-22T15:10:11.427
> 
> 标签：sql-server-2005, vb6

先生，我正在使用 vb6.0 和 sql server 2005。我写了一个小程序，它在 sql server 中立即返回结果，但在 vb 6.0 中它返回超时。对任何身体有任何想法吗？请帮忙？

我的程序：

```
Alter procedure
[dbo].[SpRptSalesDayBookSummary](@liComid integer,@liPerid integer,@ad_dtfrm DateTime,@ad_dtto DateTime)
AS
begin   
SET NOCOUNT ON;
Select SaleDate,Sum(Grand) as tot
from SalesMaster a,SalesDet b 
Where a.id=b.RefId 
    And a.CompanyId= @liComid 
    And a.PeriodId=@liPerid  
    And a.SaleDate Between @ad_dtfrm And @ad_dtto
Group By SaleDate Order By SaleDate 
End 
```

我的VB代码：

```
Dim cmd As New ADODB.Command
    Dim rs1 As New ADODB.Recordset
    Dim param2 As ADODB.Parameter
    Dim param3 As ADODB.Parameter
    Dim param4 As ADODB.Parameter
    Dim param5 As ADODB.Parameter

    g_objData.DBConn.CursorLocation = adUseClient
    Set cmd.ActiveConnection = g_objData.DBConn
    cmd.CommandType = adCmdStoredProc
    cmd.CommandText = "SpRptSalesDayBookSummary"
    Set param2 = cmd.CreateParameter("Input", adInteger, adParamInput)
    cmd.Parameters.Append param2
    param2.value = 20
    Set param3 = cmd.CreateParameter("Input", adInteger, adParamInput)
    cmd.Parameters.Append param3
    param3.value = 8
    Set param4 = cmd.CreateParameter("Input", adDate, adParamInput)
    cmd.Parameters.Append param4
    param4.value = Format(PD_DtFrm, "yyyy-mm-dd")
    Set param5 = cmd.CreateParameter("Input", adDate, adParamInput)
    cmd.Parameters.Append param5
    param5.value = Format(PD_DtTo, "yyyy-mm-dd")

    Set rs1 = cmd.Execute 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:50:26.480

您没有说明 .CommandTimeout 属性对 Connection 对象的作用，但您可能需要提高它。我相信您也可以针对命令对象指定 .CommandTimeout 属性 - 尝试将其设置为 600（10 分钟）。

我之前看过代码，它会在几秒钟内针对连接设置 CommandTimeout 属性，我认为它是几分钟！

# objective-c - UIButton 在 iOS 5.x 中不起作用，在 iOS 6.x 中一切正常

> ID：13515539
> 
> 赞同：9
> 
> 时间：2012-11-22T15:10:30.790
> 
> 标签：objective-c, xcode, ios5, uibutton, ios6

通过点击主 UIView 上的简单 UIButton，附加视图（子视图）出现在屏幕中心（以编程方式创建的子视图）。在该子视图上，我有 UIButton 启动 MPMoviePlayer（此代码在创建子视图的方法内部）：

```
 // Create play button

UIButton *playButton = [UIButton buttonWithType:UIButtonTypeCustom];
[playButton addTarget:self
               action:@selector(wtf)
     forControlEvents:UIControlEventTouchUpInside];

[playButton setTitle:@"" forState:UIControlEventTouchUpInside];
[playButton setImage:[UIImage imageNamed:[self.playButtons objectAtIndex:[sender tag] - 1]] forState:UIControlStateNormal];
playButton.frame = playButtonRect;
playButton.userInteractionEnabled = YES; 
```

此按钮在同一方法中作为子视图添加到此视图：

```
[self.infoView addSubview:playButton]; 
```

在 iOS Simulator 6.0 和带有 iOS 6.0 的真实设备中，一切正常，在 Simulator iOS 5.0 和带有 5.0 的设备中，我有一个非常奇怪的行为：只有当我通过这个按钮的区域进行拖动时，按钮才开始工作，当我点击按钮 - 它调用了当用户点击屏幕上的任何位置时调用的方法，就像我的按钮没有出现在屏幕上（但在视觉上它确实出现了）。我的目标是为 5.x 制作这个应用程序，所以我尝试在这个奇怪的问题上找到答案。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-01T19:35:47.500

您是否添加`UITapGestureRecognizer`到 infoView 或任何它的子视图？

如果是这种情况，您的手势识别器正在禁止 UIButton 操作。[您可以在这篇文章](https://stackoverflow.com/questions/3344341/uibutton-inside-a-view-that-has-a-uitapgesturerecognizer)中使用 Kevin Ballard 或 cdasher 提供的解决方案

您只需要设置以`UITapGestureRecognizer`该手势识别器 ( ) 为代表的视图`UIGestureRecognizerDelegate`。然后你可以添加以下代码：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return ! ([touch.view isKindOfClass:[UIControl class]]);
} 
```

您的点击手势识别器应如下所示：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapGestureAction)];
tap.delegate = self;
[self.view addGestureRecognizer:tap]; 
```

希望这可以帮助！

# vb.net - 不存在文件时，Kill(filepath) 抛出异常

> ID：13515545
> 
> 赞同：0
> 
> 时间：2012-11-22T15:10:41.007
> 
> 标签：vb.net, file, exception, kill

`Kill(filePath)`当不存在文件时抛出异常，但仅当我在单独的 XP 环境中安装编译的应用程序时。

当我从 VS2005 IDE 运行应用程序时，它*不会*抛出异常，这是我更喜欢的行为。

为什么此功能在两种环境中的运行方式不同？

# c# - C# 和 SharedPreferences 之类的东西

> ID：13515548
> 
> 赞同：2
> 
> 时间：2012-11-22T15:10:47.870
> 
> 标签：c#

我正在考虑类似 C# 中来自 android 的 SharedPreferences 之类的东西。我的意思是即使我关闭应用程序并再次运行，我也想保存一个变量的值。每次关闭应用程序并再次运行时，我都想保存这个值。我怎么能这样做？我知道当我使用数据库时这是可能的，但也许还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T15:27:00.390

在 C# 中，您可以使用用户或应用程序设置。每个用户的用户设置都不同，而通过应用程序设置，您可以为所有用户设置一个值。要设置初始值，您有一个编辑器，或者您可以直接编写 XML：

```
<setting name="HelloText" serializeAs="String">
   <value>This is the setting value</value>
</setting> 
```

要获取代码中的值，您可以编写以下代码：

```
this.Text = Properties.Settings.Default.HelloText; 
```

在这个[MSDN 教程](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)中，您可以找到从 C# 中的设置开始所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:14:35.160

它取决于您的应用程序的架构，

你可能有像 SQL Server CE 这样的嵌入式数据库，

您可以使用文件系统（拥有自己的配置文件）

您可以使用注册表编辑器，

您可以使用云在全球范围内存储用户值，

根据您的需求和标准，有很多选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:24:32.590

[隔离](http://msdn.microsoft.com/en-us/library/3ak841sy%28v=vs.110%29.aspx)存储或 WindowsStorage（在 Windows 应用商店应用的情况下）是 C# 中 SharedPreferences 的一种替代方法。

摘自文章[Windows Phone：存储数据和首选项](http://windowsphone.interoperabilitybridges.com/articles/android-to-wp7-chapter-6-storing-data-and-preferences)

> Android 提供 SharedPreferences 类来保存和检索原始数据类型的持久键值对。此数据在应用程序会话中仍然存在。同样，Windows Phone 提供了 IsolatedStorageSettings 类来持久化键值对。Windows 隔离存储设置存储在应用程序特定的隔离存储中。

# c# - 远程服务器返回错误：(403) Forbidden。- RESULT_INVALID_SIG

> ID：13515549
> 
> 赞同：1
> 
> 时间：2012-11-22T15:10:56.060
> 
> 标签：c#, api, desire2learn

大约 2 个月前，我为 D2L 申请了“App Developer Key”。我的大学很快就会迁移到 D2L，他们已经设置好了。

所以，我申请了“域限制”版本。现在，当我检查系统“是否已批准？” 字段为“True”，这意味着，我认为，我应该能够使用它。我更新了 D2L 的示例“入门”C# 项目中的 Host、AppId、AppKey、UserId、UserKey 字段（它使用默认值）。但是当我运行它时，我得到一个错误：

> 远程服务器返回错误：(403) Forbidden。

当我检查详细信息时，错误是`RESULT_INVALID_SIG`. 并且，“当签名或 id 无效时，通常这应该触发重新身份验证”返回这种类型的错误。所以你怎么看？这是因为我的角色是学生而不是管理员吗？或者这是关于 AppId 和 AppKey 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:59:34.037

这可能是因为您为示例的`UserId`和`UserKey`字段提供了值，而这些令牌不适合您拥有的主机+AppID/密钥对。

尝试使用您拥有的 App 凭据填写 LMS 的主机字段、App ID 和 Key 字段，然后查看您是否可以通过这种方式获取示例：

*   您应该能够在根本没有用户凭据的情况下进行“获取版本”调用（因为您可以匿名进行该调用。

*   要检索与您的应用程序 + AppID/密钥对匹配的用户凭据，只需提供主机和应用程序凭据，然后“验证”——身份验证过程应生成用户 ID/密钥对并填充这些字段——然后您可以缓存所有这些凭据值，并将它们与相同的应用程序/LMS 组合一起使用（只要您的用户令牌不会过期）。

# c++ - 两个字符串文字具有相同的指针值？

> ID：13515561
> 
> 赞同：8
> 
> 时间：2012-11-22T15:11:54.500
> 
> 标签：c++, string, pointers

当我使用 MinGW 运行这个程序时，我得到输出为“=”

```
#include<iostream>

using namespace std;

int main()
{
 char *str1 = "Hello";
 char *str2 = "Hello";

 if(str1==str2)
 cout<<"=";
 else
 cout<<"!=";

 return 0;
} 
```

但是，从逻辑上讲，它应该是！=，因为这些是指针，它们指向不同的内存位置。当我在我的 Turbo C++ 中运行这段代码时，我得到了！=

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T15:14:08.390

你是对的，因为它们是指针。但是，它们是否指向不同的位置取决于实现。编译器只存储一次字符串文字并在代码中使用它的任何地方使用它的地址是完全有效的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-22T15:32:18.680

不能保证这两个指针指向不同的内存位置。也许是因为优化，或者编译器使用了自己的规则……行为是“实现定义的”。

根据标准（C++11 §2.14.5 字符串文字）：

> 是否所有字符串文字都是不同的（即存储在不重叠的对象中）是由实现定义的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T15:58:41.510

这是预期的结果。您可以通过查看底层程序集来验证这一点。例如，如果我构建：

```
g++ -S ptr.c 
```

然后您可以在文件输出（ptr.s）中看到以下内容：

```
 .file   "ptr.c"
        .def    ___main;        .scl    2;      .type   32;     .endef
        .section .rdata,"dr"
LC0:
        .ascii "Hello\0"               ; Note - "Hello" only appears once in
                                       ; this data section!
LC1:
        .ascii "=\0"
LC2:
        .ascii "!=\0"
        .text
.globl _main
        .def    _main;  .scl    2;      .type   32;     .endef
_main:
        [... some stuff deleted for brevity ...]
LCFI5:
        call    ___main
        movl    $LC0, -12(%ebp)        ; This sets str1
        movl    $LC0, -8(%ebp)         ; This sets str2
        movl    -12(%ebp), %eax 
```

我已经注释了两个关键位——在底层代码的 rdata 部分中只有一个“Hello”出现，您可以看到 str1 和 str2 设置在最后，都指向同一个标签：`LC0`。这是因为 'Hello' 是字符串文字，重要的是，它是*常量*。

正如其他人所指出的 - 根据标准，这是完全合法的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T16:13:07.607

字符串文字的类型`"Hello"`是***const*** *char**数组***，因此，您将两个指针指向不允许更改的内容。**

 **C++ 标准使编译器可以自由地将相同的常量值合并在一起（请注意，编译器*不需*要这样做）。

相关：因此声明无效，必须修改为：

```
const char *str1 = "Hello";
const char *str2 = "Hello"; 
```

或者如果你想

```
char const *str1 = "Hello";
char const *str2 = "Hello"; 
```

从右到左阅读时读起来很好：

```
str1 is a pointer to const char 
```

.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T15:37:28.780

`char *str1 = "Hello";`-- 这条线虽然允许（许多编译器），但实际上是一个坏主意。它基本上只允许与 C 向后兼容，并且实际上写入 *str1 会导致未定义的行为。我建议您找到在执行此操作时会向您发出警告的编译器设置，如果您的编译器缺少此类警告，请寻找新的编译器。

C++ 标准在存储位置方面为编译器和执行环境提供了极大的自由度`"String literals"`。他们可以从字面上使用指向`"literal"`部分的`"String literals"`指针作为 的指针值`"literal"`，并将它们存储在内存中，当您尝试编辑它们时会出现段错误并不意外。

请注意，`char buf1[] = "Hello";`它的作用根本不同于`char* str1 = "Hello";`：它实际上`buf1`用字符初始化缓冲区`{'H','e','l','l','o','\0'}`。**

# php - 在 mysql 数据库中搜索日期范围

> ID：13515562
> 
> 赞同：0
> 
> 时间：2012-11-22T15:11:58.587
> 
> 标签：php

我有一个数据库，用户可以在其中输入日期，其中包括下拉日历，日期格式为 21-NOV-2012 格式。有没有办法用日期范围搜索数据库？我目前使用以下搜索日期::

```
sql ="SELECT * FROM ircb WHERE  date LIKE '%$term1%' AND date LIKE '%$term2%'  LIMIT $start_from, 15"; 
```

term1 是 month 和 term 2 是 year ，这不允许仅当月的月份内的日期范围。任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:25:48.393

我知道这并不能真正解决您的问题，但我想这是一个测试（并且您可以访问数据库）并且告诉您更好的方法会冒着被激怒的风险，因为如果不告诉您我会感到内疚正确的方法是什么：

您的数据库中应该有一个日期类型字段（我假设是 mysql）并将整个日期存储在该字段中，并且 mysql 可以使用该日期进行搜索（通常标准日期格式为 YYYY-MM-DD）。

你只需要这样做：

```
SELECT * FROM TABLE WHERE date > 'your date';
or ........................... < 'your date';
or .................WHERE date BETWEEN 'date1' AND 'date2'; 
```

它将允许您以更容易和人类可读的方式执行这些操作。

如果您有兴趣，还可以查看[日期](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)时间，因为您可以这样做，但当天的时间也包含在同一字段中！:D

仔细查看字段类型，因为保持数据库健康和优化至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:18:40.900

```
 date >= '$term2-$term1-01' AND date < DATE_ADD( '$term2-$term1-01', INTERVAL 1 MONTH) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:30:03.400

我认为这应该有效。

```
sql ="SELECT * FROM ircb WHERE date BETWEEN '$term1' AND '$term2' LIMIT $start_from, 15"; 
```

`BETWEEN`将让您获取范围日期，您可以删除那些`LIKE`.

# matlab - matlab m文件编译

> ID：13515563
> 
> 赞同：0
> 
> 时间：2012-11-22T15:12:13.700
> 
> 标签：matlab, matlab-deployment, matlab-compiler

我需要编译一个 matlab m-file , `file.m`.
我还想添加一些文件夹中的帮助文件和共享资源

```
c:\tt\folder1\    
c:\tt\folder2\ 
```

我可以使用 matlab 中的 deploytool 选项轻松完成此操作。但我希望能够使用 matlab 命令行来做到这一点。经过一番搜索，我找到了以下代码

```
mcc -m  file.m -I C:\tt\folder1 -I C:\tt\folder2 
```

但这并没有做任何事情。Matlab 刚刚进入“忙碌模式”。
谁能告诉我我做错了什么？？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:02:50.730

```
mcc -m  file.m -a C:\tt\folder1 -a C:\tt\folder2 
```

# jpa - Camel-JPA：将实体标记为已使用（不更新表记录）

> ID：13515566
> 
> 赞同：0
> 
> 时间：2012-11-22T15:12:23.630
> 
> 标签：jpa, apache-camel

我（再次;-）遇到了一些与 JPA 相关的问题，希望这里的任何人都可以提供帮助（Camel in Action 不能......）：

我使用 namedQuery 从 JPA 端点消费。我无法删除消费条目，因此我使用“consumeDelete=false”选项。

但是如何防止多次阅读同一个条目？我知道“@consumed”注释，但由于我不允许修改/更新原始数据库条目，我还没有弄清楚如何将条目标记为“已使用”......

有任何想法吗？

谢谢，米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:38:39.413

如果您无论如何都无法更改数据库中的数据以反映您已经使用了该记录，那么您需要将此信息“存储”到其他地方。

您可以使用幂等消费者 EIP 模式 [http://camel.apache.org/idempotent-consumer.html](http://camel.apache.org/idempotent-consumer.html)

然后，您需要使用内存/文件/另一个数据库/表来存储已消费消息的 id，并将其与幂等消费者模式一起使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-06T21:07:43.330

您可以在实体类中使用 @Consumed 与任何方法名称，并将字段的值更改为您想要的值。例如

```
@Consumed
public void updateConsumedStatus() {
this.status = false;
} 
```

请也在这里查看 [http://camel.apache.org/jpa.html](http://camel.apache.org/jpa.html)

# android - ViewPager 屏幕外片段

> ID：13515568
> 
> 赞同：0
> 
> 时间：2012-11-22T15:12:29.787
> 
> 标签：android

我有一个用于显示图像或视频的 ViewPager。所以它使用了两个片段。一个片段有 ImageView，另一个片段有 VideoView。

因此，当用户正在观看电影并滑动到另一个片段时，我希望视频停止在现在的屏幕外片段中播放。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:29:23.933

实现一个[ViewPager.OnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)，当用户从一个页面转到另一个页面时，它将为您提供采取行动的方式。

您使用[setOnPageChangeListener设置它](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener%28android.support.v4.view.ViewPager.OnPageChangeListener%29)

# c# - System.Timer 在单独的线程中过去并保持线程限制

> ID：13515574
> 
> 赞同：4
> 
> 时间：2012-11-22T15:12:48.993
> 
> 标签：c#, .net, wcf, timer, threadpool

我想限制我的多线程 WCF 服务中的线程数。所以，我使用`ThreadPool.SetMaxThread`函数。现在，我想用`System.Timers`给定的时间间隔生成事件。

但是，我的服务同时接收到许多要在线程池中执行的操作。当我的计时器用完时，该操作会在 ThreadPool 中排队（我有时期望有 100,000 个任务），因此执行速度很慢。

之前有没有办法执行我过去的事件？例如，通过设置线程池上排队的优先级任务？或者在线程池之外结束了事件？

我想在我的服务中保持我的全局线程限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:43:39.450

如果可以选择，您可以通过`Taskfactory`结合使用阻塞集合来转换您的代码以支持生产者-消费者模式。

该集合允许您设置最大限制。

从下面的链接：

> ```
> - An implementation of the Producer-Consumer pattern.
> 
> - Concurrent adding and taking of items from multiple threads. 
> ```
> 
> **> - 可选最大容量。**
> 
> ```
> - Insertion and removal operations that block when collection is empty or 
>   full.
> 
> - Insertion and removal "try" operations that do not block or that block
>   up to a specified period of time.
> 
> - Encapsulates any collection type that implements
>   IProducerConsumerCollection(Of T)
> 
> - Cancellation with cancellation tokens.
> 
> - Two kinds of enumeration with foreach (For Each in Visual Basic):
> 
>     - Read-only enumeration.
> 
>     - Enumeration that removes items as they are enumerated. 
> ```

以下是一些值得一试的资源：

[阻塞收集和生产者消费者问题](http://blogs.msdn.com/b/csharpfaq/archive/2010/08/12/blocking-collection-and-the-producer-consumer-problem.aspx)
[http://msdn.microsoft.com/en-us/library/dd997371.aspx](http://msdn.microsoft.com/en-us/library/dd997371.aspx)
[http://msdn.microsoft.com/en-us/library/dd267312。 aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:00:46.813

如果您只需要限制线程数来保护拒绝服务攻击，那么这里更好的选择是限制`maxConcurrentCalls`. `ServiceThrottlingBehavior`请参阅[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior.maxconcurrentcalls.aspx上的详细信息](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior.maxconcurrentcalls.aspx)

默认情况下，此参数是处理器计数的 16 倍。

如果是这样，那么您可以避免限制线程池的最大线程数。

然后从多个并发调用的角度来看，您的 WCF 服务将是安全的，同时将无延迟地处理计时器事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T07:02:49.090

这篇 .NET Matters MSDN 文章[ThreadPoolPriority 和 MethodImplAttribute 有点旧，](http://msdn.microsoft.com/en-us/magazine/cc163896.aspx)但我认为该方法仍然有效。他的解决方案是创建一个 ThreadPriorityPool 来定义托管池中下一个可用线程应该执行的内容。

另一种选择是尝试 CodeProject 上的[智能线程池](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)。它明确支持按优先级排序工作项。

# android - 在定时循环中更改 Imageview PNG

> ID：13515575
> 
> 赞同：2
> 
> 时间：2012-11-22T15:12:50.973
> 
> 标签：android, animation, timer, png

我有一个要在图像视图中显示的 png 序列。它有 745 帧，每帧最大 44kb，并希望以 23 fps 的速度播放。有些帧与前一帧不同或为空白，因此我可以跳过更新帧 100-243 和 340-400 等。所以磁盘上的总大小最终约为 9mb（我只需要使用 745 帧中的 249 个图像，因为动画中有一些暂停，有时动画对象会离开屏幕）。所有图像均为 320 x 480，并按比例缩放以适合屏幕。

在播放时，我需要在不停止动画的情况下沿途做一些其他的事情。我是 Java 新手。在伪代码中，我想做这样的事情：

活动加载...

对于 x = 1 到 745

```
if exsists("image" & x) then 
    imageview setbackground("image" & x) (change this every 35ms)

switch (x)
case: 10 then call a function at frame 10
case: 100 then call a function that vibrates 0.5sec at frame  100
case: 200 then call different function at frame 200 
```

环形

结束动画...

然后关闭活动。

所以问题是如何在Android上做到这一点？

我尝试使用 AnimationDrawable 和 animationlist.xml 数组，但如果我有超过 40 帧，则会出现模拟器 VM 错误。我可以在实际设备上运行更多。

任何帮助我指出正确方向的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:53:22.057

我最终找到了我正在寻找 Timed Loop 的解决方案，尽管它确实提出了一个关于我的帧速率要求的新问题，我已将其包含在一个新问题中。

如果您只需要每 70 毫秒更新一次图像，那么此解决方案似乎可以在没有与 AnimationDrawable 相同的内存限制的情况下工作。

在以下位置查看新问题：

[ImageView 中 750 帧透明 PNG 动画，23fps](https://stackoverflow.com/questions/13528116/750-frame-transparent-png-animation-in-imageview-at-23fps)

# c - 获取指向二维数组中元素的指针

> ID：13515576
> 
> 赞同：2
> 
> 时间：2012-11-22T15:12:54.080
> 
> 标签：c, multidimensional-array

如果我有这个数组：

```
#define a 10
#define b 20

int foo[a][b]; 
```

我可以得到这样的指针`foo[i][j]`：

```
int *pointerToElement(i, j)
{
    return *foo + i * b + j;
} 
```

`*foo[i][j]`使用索引符号 ( )没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:14:48.953

这个怎么样：

```
return & foo[i][j]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:16:38.423

你的方法不对：

```
*foo + i * b + j 
```

这会取消引用指针`foo`并为其值添加一些内容。你想要的是：

```
foo + i * b + j 
```

而且由于索引符号也取消引用指针，因此您必须再次引用它：

```
&foo[i][j] 
```

# google-chrome - 资源解释为文档，但使用 MIME 类型 application/zip (chrome) 传输

> ID：13515578
> 
> 赞同：3
> 
> 时间：2012-11-22T15:12:55.893
> 
> 标签：google-chrome, google-chrome-devtools

我有一个 php 脚本，它在服务器上复制一个 zip 文件，然后创建一个指向该 zip 文件的 html 链接。

链接如下所示：

```
<a href="mydir/myzipfile.zip">Link</a> 
```

我遇到的问题是，当我在使用 Chrome 时单击链接时，我在控制台中收到以下警告消息：

```
Resource interpreted as Document but transferred with MIME type application/zip 
```

该链接不指向某些 php 标头函数，它只是一个标准的 href 链接，但我有此警告消息。你知道为什么吗？谢谢

# java - 在java中压缩oracle clob数据类型

> ID：13515579
> 
> 赞同：0
> 
> 时间：2012-11-22T15:13:06.970
> 
> 标签：java, oracle, jdbc

当我使用 GZIPOutputStream 或 DeflaterOutputStream 进行压缩时，垃圾数据存储在 clob 数据类型中。

我的 oracle 字符集是 WE8ISO8859P1 ，但同一段代码正在使用 US7ASCII 字符集

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:06:49.453

也许您应该使用 BLOB。CLOBS 旨在存储您所没有的字符数据。您可以在存储到 CLOB 之前通过对 gzip 压缩的数据进行 base64 编码来测试这一点。这应该可行，但对您来说可能不是一个好的解决方案，因为 Base64 会将有效负载的大小增加约 30%。

# .net - 错误：填充：SelectCommand.Connection 属性尚未初始化

> ID：13515580
> 
> 赞同：0
> 
> 时间：2012-11-22T15:13:10.533
> 
> 标签：.net, sql, vb.net

我在这里遇到了这段代码的问题。我正在使用它将信息从预先填充的列表视图上传到远程服务器上的 SQL 表。似乎错误：

**填充：SelectCommand.connection 属性尚未初始化**

每次我尝试调试时都会出现。我使用相同方法上传信息的任何以前的程序也会发生这种情况（当时它们工作正常）

我正在使用 vb 2012 + win7/win8

```
 Sub legitsql()
        For i As Integer = 0 To UploadMasterStudentFile.numlines - 1
            ds = New DataSet
            da = New MySqlDataAdapter("insert into SK_StudentList (studentnumber,firstname,lastname,birthdate,year) values('" & Student_Record.StudentNumber(i) & "','" & Student_Record.FirstName(i) & "','" & Student_Record.FirstName(i) & "','" & Student_Record.Birthdate(i) & "','" & Student_Record.Year(i) & "')", sqlcon)
            da.Fill(ds, "SK_StudentList")
        Next
        MessageBox.Show("Student List Updated")

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:25:17.510

这可能与您的问题有关，但是，您应该在完成连接后处理它们。您应该使用`Using`- 语句：

```
Using sqlcon = New MySqlConnection(connectionString)
    Const sql = "insert into SK_StudentList (studentnumber,firstname,lastname,birthdate,year) values(?studentnumber,?firstname,?lastname,?birthdate,?year);"
    sqlcon.Open();
    For i As Integer = 0 To UploadMasterStudentFile.Count - 1
        Using cmd = New MySqlCommand(sql, sqlcon)
            cmd.Parameters.AddWithValue("?studentnumber", Student_Record.StudentNumber(i))
            cmd.Parameters.AddWithValue("?firstname", Student_Record.FirstName(i))
            cmd.Parameters.AddWithValue("?lastname", Student_Record.LastName(i))
            cmd.Parameters.AddWithValue("?birthdate", Student_Record.Birthdate(i))
            cmd.Parameters.AddWithValue("?year", Student_Record.Year(i))
            cmd.ExecuteNonQuery()
        End Using
    Next
End Using 
```

您还应该使用 sql-parameters 来避免 sql-injection，防止粗心的错误并使代码总体上更具可读性。

请注意，我已经更正了您的 sql 命令中的一个错误（您甚至使用了名字作为姓氏）。我不知道为什么在插入这些记录时使用 a`DataAdapter`来填充每次迭代。`DataSets`我省略了那部分，因为它毫无意义。

# c# - C#：带有 listView 的 if else 语句

> ID：13515581
> 
> 赞同：1
> 
> 时间：2012-11-22T15:13:12.127
> 
> 标签：c#, forms, listview, if-statement

我要做的是检查listView（第5列）是否包含任何带有“是”字样的项目。如果它确实写“很好”，如果该列根本不包含任何带有“是”字样的项目，则写“坏”。

现在发生的事情是我的程序只写了 Bad (the else 语句)，即使该列确实包含一个带有“是”字样的项目。

我怎样才能解决这个问题？：

```
foreach (ListViewItem item in listView1.Items) {
    if (item.SubItems[5].Text.Contains("Yes")) {
        // Do your work here
        labelContainsVideo2.Text = "GREAT";
        labelContainsVideo2.ForeColor = System.Drawing.Color.Green;
    } else {
        labelContainsVideo2.Text = "BAD";
        labelContainsVideo2.ForeColor = System.Drawing.Color.Red;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:15:06.200

也许是为了这个案子？

```
foreach (ListViewItem item in listView1.Items)
{
  if (item.SubItems[5].Text.ToUpper().Contains("YES"))
  {
    // Do your work here
    labelContainsVideo2.Text = "GREAT";
    labelContainsVideo2.ForeColor = System.Drawing.Color.Green;
  }
  else
  {
    labelContainsVideo2.Text = "BAD";
    labelContainsVideo2.ForeColor = System.Drawing.Color.Red;
  }
} 
```

另外，请记住，这种方式只会计算最后一个`item`. 如果你想显示所有项目的状态，你应该有一个标签数组或其他东西。如果您想知道是否**有任何**项目包含“是”，您应该遵循@ZombieSheep 的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:17:35.133

如果列表中的最后一项不包含“是”，那么无论其他项包含什么，输出都将为“BAD”。

试试这个...

```
string message = "BAD";
var msgColor = System.Drawing.Color.Red;
foreach (ListViewItem item in listView1.Items)
{
    if (item.SubItems[5].Text.Contains("Yes"))
    {
        message = "GREAT";
        msgColor = System.Drawing.Color.Green;
        break;   // no need to check any more items - we have a match!
    }
}
labelContainsVideo2.Text = message ;
labelContainsVideo2.ForeColor = msgColor; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:23:19.637

尝试这个：

```
if(listView1.Items.Cast<ListViewItem>().Any(i => i.SubItems[5].Text.ToLower().Contains("yes"))){
    labelContainsVideo2.Text = "GREAT";
    labelContainsVideo2.ForeColor = System.Drawing.Color.Green;
}
else
{
    labelContainsVideo2.Text = "BAD";
    labelContainsVideo2.ForeColor = System.Drawing.Color.Red;
} 
```

# java - 使用 gl.glrotatef 旋转对象

> ID：13515584
> 
> 赞同：1
> 
> 时间：2012-11-22T15:13:19.990
> 
> 标签：java, rotation, autorotate, glrotate

我正在尝试使用 opengl 和命令 gl.glroate 让对象旋转，但似乎什么也没发生，谁能告诉我哪里出错了？下面是代码

```
import javax.media.opengl.*;
import javax.media.opengl.glu.GLU;
import javax.swing.JFrame;
import com.sun.opengl.util.Animator;
import com.sun.opengl.util.FPSAnimator;

public class Cube2 implements GLEventListener {

      private float Rotate = 0.0f;

    private static final GLU glu = new GLU ();

    /**
     * @param args
     */
    public static void main(String[] args){
        JFrame frame = new JFrame("A simple JOGL demo");
        GLCanvas canvas = new GLCanvas ();
        canvas.addGLEventListener(new Cube2());
        frame.add(canvas);
        frame.setSize(640, 480);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setVisible(true);

        Animator animator = new FPSAnimator(canvas, 60);
        animator.add(canvas);
    }

@Override
public void display (GLAutoDrawable glDrawable){
    final GL gl = glDrawable.getGL();
    //gl.glClear(GL.GL_COLOR_BUFFER_BIT);
    gl.glClear(GL.GL_DEPTH_BUFFER_BIT);
    gl.glLoadIdentity();
    gl.glTranslatef(0.0f, 0.0f, -7.0f);
    gl.glRotatef(Rotate++, 1.0f, 0.0f, 0.0f); 
    gl.glRotatef(Rotate++, 0.0f, 1.0f, 0.0f);
    gl.glRotatef(Rotate++, 0.0f, 0.0f, 1.0f);

    gl.glBegin(GL.GL_TRIANGLES);

    //Counter Clockwise Front Face 1 
        gl.glColor3f(0.0f, 1.0f, 0.0f); //Green
        gl.glVertex3f (1.0f, 1.0f, 0.0f); //Top 
        gl.glVertex3f(-1.0f, 1.0f, 0.0f); // left to right      
        gl.glVertex3f (-1.0f, -1.0f, 0.0f); //left
        gl.glVertex3f (-1.0f, -1.0f, -0.0f); //left         
        gl.glVertex3f(1.0f, -1.0f, -0.0f);  //left to right     
        gl.glVertex3f (1.0f, 1.0f, -0.0f);  //left  

    // Right Face 2
        gl.glColor3f(1.0f, 0.0f, 1.0f); //Pink
        gl.glVertex3f (1.0f, 1.0f, 0.0f);       
        gl.glVertex3f(1.0f, -1.0f, -0.0f);      
        gl.glVertex3f (1.0f, 1.0f, 1.0f);       
        gl.glVertex3f (-1.0f, -1.0f, -0.0f);        
        gl.glVertex3f(-1.0f, 1.0f, 0.0f);       
        gl.glVertex3f (-1.0f, -1.0f, -1.0f);        

    gl.glEnd();

}

@Override
public void displayChanged (GLAutoDrawable arg0, boolean arg1, boolean arg2) 
{
    //TODO Auto-generated method stub
}

@Override
public void init(GLAutoDrawable glDrawable) 
{
    final GL gl = glDrawable.getGL();

    int width = 640;
    int height = 480;

    //Set the state of out new OpenGL context
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL.GL_PROJECTION);
    gl.glLoadIdentity();

    glu.gluPerspective(45.0f,(float)(width)/(float)(height),1.0f,100.0f);
    gl.glMatrixMode(GL.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glShadeModel(GL.GL_SMOOTH);                                  //Enable Smooth Shading
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);                        //Black Background
    gl.glClearDepth(1.0f);                                          //Depth Buffer Setup
    gl.glEnable(GL.GL_DEPTH_TEST);                                  //Enables Depth Testing
    gl.glDepthFunc(GL.GL_LEQUAL);                                   //The Type of Depth Testing To Do
    gl.glEnable(GL.GL_CULL_FACE);                                   //Start culling back faces
    gl.glHint(GL.GL_PERSPECTIVE_CORRECTION_HINT, GL.GL_NICEST);     //Really Nice Perspective Calculations
}

@Override
public void reshape (GLAutoDrawable arg0, int arg1, int arg2, int arg3, int arg4){
    //TODO Auto-generated method stub
}
} 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:34:59.143

1.  您应该首先添加

    动画师.start();

    为了开始渲染。

2.  您正在使用不再维护的 JOGL 1。而且它肯定行不通。您应该遵循 Jogamp.org 上的教程。

3.  您正在使用诸如 import com.sun.opengl.util.Animator 之类的专有 api；首先。如果您想从无权使用该 api 的人那里获得帮助，这是一个糟糕的选择。正如我所说，您可以访问 jogamp.org 以获取该软件包的开源替代品。

# java - 替换 Java 中的空格和其他字符

> ID：13515586
> 
> 赞同：3
> 
> 时间：2012-11-22T15:13:25.667
> 
> 标签：java, regex, string, replace

为什么这段代码不起作用？

```
public static void main(String[] args) {
    String s = "You need the new version for this. Please update app ...";
    System.out.println(s.replaceAll(". ", ".\\\\n").replaceAll(" ...", "..."));
} 
```

这是我想要的输出：

> 为此，您需要新版本。\n请更新应用...

谢谢提供信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:14:29.140

`String.replaceAll`方法将正则表达式作为第一个参数。

所以你需要转义你的*点*（`.`），因为它在正则表达式中具有特殊含义，它匹配任何字符。

```
System.out.println(s.replaceAll("\\. ", ".\\\\n").replaceAll(" \\.\\.\\.", "...")); 
```

但是，对于您给定的输入，您可以简单地使用`String.replace`方法，因为它不需要`Regex`，并且具有额外的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:16:22.640

您不应该使用`replaceAll`-[`replace`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)而是使用。`replaceAll`当这里不需要时采用正则表达式（因此它会不必要地低效）。

```
String s = "You need the new version for this. Please update app ...";
System.out.println(s.replace(". ", ".\\n").replace(" ...", "...")); 
```

（另请注意，我已替换`".\\\\n"`为`".\\n"`此处，这会产生所需的输出。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:14:32.427

`.`是一个特殊的正则表达式字符，将匹配任何内容。你需要像这样逃避它：`\\.`

因此，要匹配三个点，您必须使用以下正则表达式：`"\\.\\.\\."`

你想要的是

```
s.replaceAll("\\. ", ".\n").replaceAll(" \\.\\.\\.", "...") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:19:47.040

尝试作为

```
 System.out.println(s.replace(". ", ".\n").replace(" ...", "...")); 
```

这给了

```
You need the new version for this.
Please update app... 
```

# ios6 - Cocoapods：US-ASCII 中的无效字节序列

> ID：13515594
> 
> 赞同：1
> 
> 时间：2012-11-22T15:13:37.820
> 
> 标签：ios6, cocoapods

一步一步做，如下所示： [http ://www.raywenderlich.com/12139/introduction-to-cocoapods](http://www.raywenderlich.com/12139/introduction-to-cocoapods)

`pod install`在不同的项目中运行时出现错误：

```
### Stack

```
   CocoaPods : 0.15.2
        Ruby : ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]
    RubyGems : 1.8.24
        Host : Mac OS X 10.8.2 (12C60)
       Xcode : 4.5.2 (4G2008a)
Ruby lib dir : /usr/local/rvm/rubies/ruby-1.9.3-p194/lib
Repositories : master - https://github.com/CocoaPods/Specs.git @ 60b51e341f727b7d715ed541ea9cb52f6e0cc819
```

### Podfile

```ruby
          platform :ios, '6.0'
pod 'AFNetworking', '1.0'
```

### Error

```
invalid byte sequence in US-ASCII
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/local_pod.rb:540:in `glob'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/local_pod.rb:540:in `glob'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/local_pod.rb:540:in `block in expanded_paths'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/local_pod.rb:534:in `map'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/local_pod.rb:534:in `expanded_paths'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/local_pod.rb:327:in `readme_file'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/generator/documentation.rb:50:in `index_file'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/generator/documentation.rb:70:in `appledoc_options'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/generator/documentation.rb:81:in `generate'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:91:in `generate_docs'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:60:in `block (2 levels) in install_dependencies!'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/user_interface.rb:37:in `section'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:53:in `block in install_dependencies!'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:50:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:50:in `install_dependencies!'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:119:in `block in install!'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/user_interface.rb:37:in `section'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/installer.rb:118:in `install!'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/command/install.rb:46:in `run_install_with_update'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/command/install.rb:51:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/lib/cocoapods/command.rb:75:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/cocoapods-0.15.2/bin/pod:16:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/pod:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/pod:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
``` 
```

**更新。**：

```
➜  ~  gem install cocoapods
zsh: correct 'cocoapods' to '.cocoapods' [nyae]? n
Fetching: xcodeproj-0.4.0.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing cocoapods:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for -std=c99 option to compiler... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `block in try_compile'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:443:in `with_werror'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `try_compile'
    from extconf.rb:24:in `block in <main>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from extconf.rb:23:in `<main>'

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/xcodeproj-0.4.0 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/xcodeproj-0.4.0/ext/xcodeproj/gem_make.out 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T14:35:41.997

将 export LC_ALL="en_US.UTF-8" 添加到您的 ~/.zshrc 或 ~/.bashrc [https://github.com/CocoaPods/CocoaPods/issues/639](https://github.com/CocoaPods/CocoaPods/issues/639)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-04T08:57:12.853

打开一个新的终端窗口足以解决我的问题。

我的终端实例/会话如何搞砸了。`pod install`将在新窗口中工作，但在旧窗口中继续失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:14:03.590

问题出在 Ruby 编译器中，它已被其他一些应用程序损坏。重新安装后一切正常。

# 3d - 如何创建 3D 数学拓扑模拟？

> ID：13515596
> 
> 赞同：2
> 
> 时间：2012-11-22T15:13:43.310
> 
> 标签：3d, cuda, gpu, simulation, topology

我从未有过创建模拟或 3D 对象的经验，但我想开始学习它们，并创建一个小型应用程序，它将模拟 3D 中的拓扑对象。我所说的“拓扑对象”是指数学拓扑（代数/一般拓扑），意思是圆环、结、莫比乌斯带等。所以，我不是指网络拓扑之类的东西。

我一直在互联网上搜索一些关于它们的示例代码，但我找不到任何有用的东西。如果你能给我一些材料，我会很高兴。另一方面，我想听听您对我应该使用哪种编程语言/范式/扩展的意见？我还计划在项目中使用 CUDA 来实现加速。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:19:24.100

我认为 CUDA 对计算代数/一般拓扑的用途并不大。当然，您可以使用它来处理同调群等，但这更像是代数而不是拓扑，它本身往往过于抽象/“动态”，无法真正从 SIMD 中受益。如果您没有明确的想法，我会先尝试一些 CPU 实现，然后仅移植到 CUDA 作为以后的优化。

无论如何，您所描述的听起来更像是您主要对创建拓扑空间的*视​​觉表示*感兴趣，即对给出具体嵌入*T* → ℝ³ 感兴趣。那是在*差分拓扑*领域，我认为它可以很好地利用 gpgpu 处理。然而，对于最后的“可视化步骤”，您想要使用更具体的东西；openGL + GLUT 很好。你可以从许多语言中使用它，我推荐 Haskell（毫无疑问，它对所有数学都很好），但 C 或 C++ 当然更接近库，你会找到更多示例并且可以更轻松地获取 CUDA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:21:25.813

我可能会建议“示例中的 CUDA”，很好的书，适合 CUDA 的开始。对于 3D 可视化，我使用 OpenGL 和 GLUT（或 freeglut）。所以看看[NeHe教程](http://nehe.gamedev.net/)。

另一个不错的方法是检查一些可用的 3D 图形软件，以了解在 3D 空间中建模的想法。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:31:36.467

由于您是从该主题开始的，因此我建议您查看以下示例：

**教程**

Dobbs 博士期刊系列[CUDA：Rob Farmer 的大众超级计算](http://www.ddj.com/cpp/207200659)非常出色，在其十四期中几乎涵盖了所有内容。它也开始相当温和，因此对初学者相当友好。

和其他人：

*   [使用 CUDA 进行开发 - 简介](http://www.nvidia.com/object/cuda_learn.html)
*   [第 I 卷：CUDA 编程简介](http://www.nvidia.com/docs/IO/47904/VolumeI.pdf)
*   [开始使用 CUDA](http://llpanorama.wordpress.com/2008/04/24/getting-started-with-cuda/)
*   [CUDA 资源列表](http://llpanorama.wordpress.com/cuda-tutorial/)

看看最后一项，你会发现很多学习 CUDA 的链接。

你也想看看 OpenCL，所以：

OpenCL：[OpenCL 教程 | 麦克研究](http://www.macresearch.org/opencl)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T03:30:00.363

确定 CUDA 是否需要优化似乎将优化放在分析之前。如果我是你，我会使用更简单的渲染环境，直到我了解如何实现建模方面。

根据您首选的实现语言，您可能需要查看[OpenTk](http://www.opentk.com/)。这为 OpenGL 提供了一个非常有用的 C# 包装器。如果您发现需要，您可以在其中使用着色器语言。

就如何表示拓扑对象而言，细节将取决于您计划使用根据嵌入或隐式定义定义的描述。我应该认为后者可能是很自然的，因为组成的开放集可能会被分解成在可视化中变成多边形的片段。

# c - TCP：建立TCP连接

> ID：13515599
> 
> 赞同：1
> 
> 时间：2012-11-22T15:13:49.247
> 
> 标签：c, sockets, tcp, ip

我已经阅读了许多关于使用 C 联网的示例，但我被困住了。我可以看到带有 SYN 标志的 TCP 数据包在网络上（使用 wireshark），但接收端（我已经设置了一个虚拟机用于测试目的）什么都没有发回，甚至 RST 也没有。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <strings.h>

int establish_tcp(int port) {
    char *ip = "10.0.2.15"; /* Virtual Machine */
    struct sockaddr_in sockaddrin;
    struct hostent *host;
    int sock;

    sock = socket(AF_INET, SOCK_STREAM, 0);
    if(sock == -1) {
        fprintf(stderr, "Socket Error\n");
        exit(1);
    }

    sockaddrin.sin_family = AF_INET;

    host = gethostbyname(ip);
    if(host == NULL) {
        fprintf(stderr, "%s unknown host.\n", ip);
        exit(2);
    }

    /* copies the internet address into the struct */
    bcopy(host->h_addr, &sockaddrin.sin_addr, host->h_length);

    /* specify port (used by TCP a layer above */
    sockaddrin.sin_port = port;

    /* try to connect */
    return connect(sock, (struct sockaddr*) &sockaddrin, sizeof(struct sockaddr_in));
}

int main(void) {
    printf("status: %i\n", establish_tcp(80));
    return 0;
} 
```

数据包超时并返回 -1 作为状态码需要一段时间。目标机器不发送回复怎么会发生？我忽略了什么？

* * *

我想我已经发现这*不是*设置问题。我正在运行 Ubuntu 12.04。虚拟机是 Debian Wheezy，我用`ifconfig`. 我试过机器是否可以通过`telnet`.
为了避免可能与 Virtual Box 有关的问题，我尝试将 IP 替换为 Google 的 IP，得到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:19:34.440

问题很可能是这样的：

```
sockaddrin.sin_port = port; 
```

端口号必须采用*网络字节顺序*，这与 x86 和 x86_64 机器中的本机字节顺序不同。

改成：

```
sockaddrin.sin_port = htons(port); 
```

# jquery - Jquery输出未显示在网页中

> ID：13515603
> 
> 赞同：0
> 
> 时间：2012-11-22T15:14:02.157
> 
> 标签：jquery

我正在尝试在网页上显示数据库查询的结果。我正在使用下面的 JQUERY 脚本通过 php 脚本将数据作为 JSON 数组获取。

由于某种原因，我无法弄清楚，网页。为空白。请注意，警报显示数据正在正确传递给 $.each 循环。

谁能告诉我我做错了什么？？

谢谢克里斯
_

## 查询脚本

功能项目数据（）{

```
var data = '';

    $.ajax(
    {
        url:"projectdata.php", 
        type: "POST",
        dataType: 'JSON',
        cache: false,
        success:function(data)
        {
            $( "#projectList" ).insertAfter('<tbody>' + 

                $.each(data, function(indx, value) 
                {
                    '<tr><td>' + data[indx].project_id + '</td>' +
                    '<td>' + data[indx].dept + '</td>' +
                    '<td>' + value.projName + '</td>' +
                    '<td>' + data[indx].notes + '</td>' + 
                    '<td>' + data[indx].dates + '</td>' +
                    '<td>' + data[indx].status + '</td>' +
                    alert("ID: " + value.project_id + "   " + "DEPT: " + data[indx].dept);
                } //end function
                ) //end each
                ) //end After

        } //end success
    }); //end ajax 
```

} //结束项目数据

* * *

## HTML 脚本

> 现有项目：

```
&lt; table id="projectList">    
&lt; thead>  
&lt; tr class="success">   
&lt; th class="span1">PROJECT ID &lt; /th>  
&lt; th class="span2">SCHOOL / DEPT &lt; /th>  
&lt; th class="span1">PROJECT &lt; /th>  
&lt; th class="span3">DESCRIPTION / PROJECT NOTES &lt; /th>  
&lt; th class="span1">APPROX DATES &lt; /th>  
&lt; th class="span1">STATUS &lt; /th>  
&lt; th class="span1">USER</th> &lt; /tr>  
&lt; /thead>  
&lt; tbody>  
&lt; !-- RESULTS FROM JQUERY/PHP GOES HERE -->  

&lt; /tbody>  
&lt; /table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:17:44.380

您有语法错误

```
$( "#projectList" ).insertAfter('<tbody>' + 

$.each(data, function(indx, value) 
{
   '<tr><td>' + data[indx].project_id + '</td>' + 
```

这没有任何意义

也许这就是你想做的

```
var result = "";
$.each(data, function(indx, value) 
{
   result += '<tr><td>' + data[indx].project_id + '</td>' +
                '<td>' + data[indx].dept + '</td>' +
                '<td>' + value.projName + '</td>' +
                '<td>' + data[indx].notes + '</td>' + 
                '<td>' + data[indx].dates + '</td>' +
                '<td>' + data[indx].status + '</td></tr>';
}
$("#projectlist").insertAfter('<tbody>' + result + '</tbody>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:22:52.197

```
'<tbody>' + $.each(data, function(indx, value) 
```

在此代码中，您将字符串与函数连接起来

尝试先使用 $.each 创建 html，然后将其放入 tbody

```
var result = "";

$.each(data, function(i, val){

   result += "<tr><td>" + val.project_id + "</td></tr>";

})

$( "#projectList tbody" ).html(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:23:45.973

将您的 insertAfter 更改为附加：

```
 $( "#projectList" ).append('<tbody>' + 

                '<tr><td>' + data[indx].project_id + '</td>' +
                '<td>' + data[indx].dept + '</td>' +
                '<td>' + value.projName + '</td>' +
                '<td>' + data[indx].notes + '</td>' + 
                '<td>' + data[indx].dates + '</td>' +
                '<td>' + data[indx].status + '</td>' 
            ); 
```

警报在那里做什么？没有得到身份证。

# google-app-engine - GAE - 创建应用程序问题

> ID：13515604
> 
> 赞同：0
> 
> 时间：2012-11-22T15:14:04.320
> 
> 标签：google-app-engine

为了开始使用 GAE，我从 url [https://appengine.google.com/start](https://appengine.google.com/start)开始。[当我单击创建应用程序按钮时，浏览器在 url https://accounts.google.com/b/0/Idv](https://accounts.google.com/b/0/Idv)上获得了无限重定向循环.....我在 ubuntu 和 android 上尝试了不同的浏览器。都得到相同的错误。请帮助我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:11:08.753

使用 https 代理服务器解决了这个问题。谢谢！

# regex - 正则表达式仅在字符串末尾的 _ 之后去除结尾数字或字符

> ID：13515608
> 
> 赞同：1
> 
> 时间：2012-11-22T15:14:08.290
> 
> 标签：regex, chars

我想在java中有一个正则表达式，只有在数字位于字符串末尾以及下划线之后的所有内容时才会去掉它们。

```
1) massi_xxx -> massi
2) massi_12121 -> massi
3) massi123 -> massi
4) 123massi1 -> 123massi 
```

我发现
(?=[0-9_]).* 适用于 1,2,3 用例但不适用于 4) 关于如何改进它的任何想法？

谢谢M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:20:42.973

以下正则表达式应该适用于大多数口味：

```
(?:_.*|\d*)$ 
```

我们匹配任何一个，`_`然后匹配任何内容，直到字符串结束。或者我们匹配一堆数字直到字符串结束。（字符串的结尾由锚点表示`$`）

[工作演示。](http://regexr.com?32tb8)

有些口味可能会窒息，`?:`这实际上只是一种优化。你也可以把它排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:20:34.893

`(_.*|\d+)$`将匹配下划线后跟字符串末尾的任何内容或数字。这符合你的要求吗？（我使用[http://www.regextester.com/](http://www.regextester.com/)进行测试。）

# c# - 可标记计数器

> ID：13515613
> 
> 赞同：2
> 
> 时间：2012-11-22T15:14:23.100
> 
> 标签：c#, .net

我的情况是，我有一个会话，它通过一个简单的计数器获得一个由它分配的 ID。好吧，经过大量连接后，计数器将变为 500，即使可能只有 2 人连接。我想要做的是有一个计数器将数字标记为免费，以便它们可以重复使用！我不知道如何解决这个问题。我希望你们中的一个可以帮助我！

```
public void createSession(Socket gameClient)
{
    uint sessionID = mSessionCounter++;
    Session Session = new Session(sessionID, gameClient);
    mSessions.Add(sessionID, Session);
    CommandLine.WriteLine("Created session " + sessionID + " for " + Session.ipAddress, CommandLine.logType.sessionConnectionEvent);
    Session.Start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:56:20.140

只是快速了解您可以执行此操作的人员。尽管在您的情况下可能不需要重复使用，但它可能仍然值得知道如何去做（加上这个问题的答案会很好）。

如果您需要随时检查正在使用的会话 ID，那么您需要能够跟踪它们。为此，我建议一个简单的`List`就可以了，所以让我们从以下内容开始：

```
static List<int> CurrentSessionIDs = new List<int>(); 
```

这应该是全球可访问的。为确保此列表保持干净，在检查“保持活动状态”的函数中，您可以像这样删除一个项目：

```
CurrentSessionIDs.Remove(sessionID); 
```

接下来，您想使用您的列表作为例外列表来计算第一个可用的会话编号。您可以使用 Linq 执行此操作，如下所示：

```
//this would start at 0 for the first session number
int newSessionNumber = Enumerable.Range(0, int.MaxValue).Except(CurrentSessionIDs).First(); 
```

注意：这个用于查找第一个可用数字的可爱 Linq 语法的灵感来自[这篇文章](https://stackoverflow.com/a/8865806/838807)（归功于它到期的地方，等等）

# android - 以编程方式删除布局参数

> ID：13515618
> 
> 赞同：2
> 
> 时间：2012-11-22T15:14:32.643
> 
> 标签：android

我正在使用以下代码以编程方式设置布局的参数

```
LinearLayout text;
text = (LinearLayout) findViewById(R.id.text);
        RelativeLayout.LayoutParams layoutParams = 
            (RelativeLayout.LayoutParams)text.getLayoutParams();
    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT); 
```

我猜这会将 alignParentRight 值设置为 true。如果需要，我是否可以以编程方式将此值设置为 false？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T15:39:55.033

根据 Luksprog 的建议，`layoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, 0);`将该值设置为 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:19:28.217

从 API 级别 17 开始，可以通过以下方式删除布局参数：

```
public void removeRule (int verb) 
```

详情[在这里](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#removeRule%28int%29)。

# ajax - HTML、AJAX：两次点击更新内容的不同部分。css和第二次点击呢？

> ID：13515619
> 
> 赞同：0
> 
> 时间：2012-11-22T15:14:32.470
> 
> 标签：ajax, google-app-engine

（重新编辑，2012年11月23日，因为有些问题是我个人错误造成的。对不起。）

我正在 Google App Engine 上开发一个网络系统。我有一个包含链接的页面*base.html*，每个链接在单击时都会通过 Ajax 更新**content1** div。**content1**由包含按钮和**content2** div的*admin.html*提供。单击按钮时，也会通过 Ajax更新**content2 。****content2**由*manage.hmtl*提供，其中有多种形式可以一一收集数据。

 *******这是我的问题：

(1) 两次单击*base.html中的链接，然后单击**admin.html*中的按钮，都可以正常工作—— **content1**显示按钮，**content2**显示表单。但是，在*manage.html中没有***content2** div，Ajax 将如何更新**admin.html**中的*content2*呢？目前，当我发布其中一个表单数据时，**content1 变为**空白。我希望它仍然显示表单，因为还有其他数据要输入。

 ******(2) 页面中有20多个链接和按钮。我必须为他们编写 20 个 Ajax 函数吗？有没有办法只编写一个（或两个）函数并通过链接和按钮共享。

提前感谢您的帮助。程序说明及脚本片段如下：

*main.py*呈现*base.html*（包括**content1** div）

URL /admin: class Admin(webapp2.RequestHandler)通过 Ajax将*admin.html*的内容（包括按钮和**content2** div）添加到**content1**

URL /admin?arg1=manage: class Manage(webapp2.RequestHandler)通过ajax将*manage.html*的内容（包括几个表单）添加到**content2**

问题：在 content2 中提交其中一个表单**（**即*manage.html*）后，页面变为空白。

base.html：

```
 <html>
    ...
    <div id="content1"></div>
    ...
    <a href="javascript:void(0);" onclick="return admin()">Admin</a>
    ...
    <script>
    function admin() {
        $.ajax({
            type: "get",
            url: "/admin",
            cache: false,
            success: function(returndata){
                $("#content1").html(returndata);
            }
        });
    }
    </script>
    ...
    </html> 
```

'admin.html'（无 html 标头）

```
 ...
    <a href="javascript:void(0);" onclick="return manage()">
    <img src="/static/images/main-manage.png" class="adminButton" /></a>
    ...
    <div id="content2"></div>
    ...
    <script>
    function manage() {
        $.ajax({
            type: "get",
            url: "/admin?arg1=manage",
            cache: false,
            success: function(returndata){
                $("#content2").html(returndata);
            }
        });
    }
    </script> 
```

“manage.html”（无 html 标头）

```
 <form action="" method="">
    ...
    <input type="file" name="image">
    <input type="button" onclick="return addImage()">
    </form>

    ...

    <form ...>
    ...
    </form>

    <script>
    function addImage() {
        var image = $('input[name=image]').val();
        $.ajax({
            type: "post",
            url: "/admin?arg1=manage&arg2=image",
            data: {'image': image},
            cache: false,
            success: function(returndata){
                $("#content2").html(returndata);
            }
        });
    }
    </script> 
```*************

# c++ - Boost Spirit：如何转换基本类型？

> ID：13515623
> 
> 赞同：4
> 
> 时间：2012-11-22T15:14:40.200
> 
> 标签：c++, boost-spirit

假设我有一个`std::string`属性，但为了便于解析，我想使用`qi::int_`or `qi::double_`。

**有没有一种简单的方法可以将转换作为语义操作**？

我试过这样的事情：

```
 std::stringstream ss; 
 my_int_as_str = qi::int_ [ ref(ss)<<_1; _val=ss.str() ]; 
```

但这甚至不会编译。

**编辑 - 尝试下面的 sehe 答案**

```
#include <iostream>
#include <string>
#include <vector>

#include <boost/spirit/include/qi.hpp>

namespace qi=boost::spirit::qi;
namespace phx=boost::phoenix;

int main(int argc, char* argv[])
{
    std::string test="123";
    std::string result;

    // 1\. qi::raw[ qi::int_ ]       works
    // 2\. qi::lexeme[ qi::int_ ]    doesn't
    // 3\. qi::as_string[ qi::int_ ] doesn't
    qi::rule<std::string::const_iterator, std::string()> my_int_as_str = 
                   qi::raw[ qi::int_ ];
    parse( test.cbegin(), test.cend(), my_int_as_str, result );

    std::cout << result << std::endl;

    // -------------------------------------------------------------------------

    std::string test_vector="456 789";
    std::vector<std::string> result_vector;

    // 4\. qi::raw[ qi::int_ ]       won't compile
    // 5\. qi::lexeme[ qi::int_ ]    won't compile
    // 6\. qi::as_string[ qi::int_ ] doesn't
    qi::rule<std::string::const_iterator,std::vector<std::string>(),qi::space_type> 
            my_int_as_str_vector = qi::lexeme[ qi::int_ ];

    phrase_parse(test_vector.cbegin(),test_vector.cend(),
            my_int_as_str_vector,qi::space,result_vector);

    for(auto& string: result_vector)
        std::cout << string << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T23:01:43.023

Builtin way:

```
qi::rule<Iterator, std::string()> my_int_as_str = 
       qi::as_string [ qi::int_ ]; 
```

For this particular simple case, `qi::raw` or `qi::lexeme` would have worked equally well since they both expose source-iterator pairs, which have builtin *assignment-to-attribute* for `std::string`

**Elaborating:**

```
my_int_as_str = qi::lexeme [ qi::int_ ]; // equivalent
my_int_as_str = qi::raw [ qi::int_ ];    // idem 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T16:18:42.353

您可以[`attr_cast`](http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/auxiliary/attr_cast.html)通过专门[`transform_attribute`](http://www.boost.org/libs/spirit/doc/html/spirit/advanced/customize/transform.html)针对您的类型来使用。

```
#include <iostream>
#include <string>
#include <vector>

#include <boost/spirit/include/qi.hpp>

namespace qi=boost::spirit::qi;
namespace phx=boost::phoenix;

namespace boost { namespace spirit { namespace traits
{

    template <>
    struct transform_attribute<std::string, int, qi::domain>
    {
        typedef int type;
        static int pre(std::string& d) { return 0; }//not useful in this case but required to avoid compiler errors
        static void post(std::string& val, int const& attr) //`val` is the "returned" string, `attr` is what int_ parses
        {
            std::stringstream ss;
            ss << attr;
            val= ss.str();
        }
        static void fail(std::string&) {}
    };
}}}

int main(int argc, char* argv[])
{
    std::string test="123";
    std::string test_vector="456 789";

    qi::rule<std::string::const_iterator,std::string()> my_int_as_str = qi::attr_cast(qi::int_);
    qi::rule<std::string::const_iterator,std::vector<std::string>(),qi::space_type> my_int_as_str_vector= *qi::attr_cast(qi::int_);

    std::string result;
    std::vector<std::string> result_vector;

    parse(test.cbegin(),test.cend(),my_int_as_str,result);
    phrase_parse(test_vector.cbegin(),test_vector.cend(),my_int_as_str_vector,qi::space,result_vector);

    std::cout << result << std::endl;
    for(auto& string: result_vector)
        std::cout << string << std::endl;

    return 0;
} 
```

如果您确实需要/想要使用[语义操作](http://www.boost.org/libs/spirit/doc/html/spirit/qi/tutorials/semantic_actions.html)，最简单的替代方法是定义一个以 int 作为参数并返回字符串的函数（这比`attr_cast`替代方法更简单，但也更慢，几乎是我非常简单的基准测试的两倍):

```
std::string semantic_transform(int i)
{
    std::stringstream ss;
    ss<<i;
    return ss.str();
}
...
std::string string_semantic;
qi::parse(test.cbegin(),test.cend(),qi::int_[&semantic_transform],string_semantic);
std::cout << string_semantic << std::endl; 
```

# mysql - MySQL 数据透视表和 JOINS

> ID：13515627
> 
> 赞同：3
> 
> 时间：2012-11-22T15:14:53.967
> 
> 标签：mysql, sql

我有一个带有三个表的 mysql 数据库

学生 student_intervention 干预细节

我正在尝试做一个显示所有学生的数据透视表视图，并为每种干预类型提供列，总计每个学生的不同类型的干预。

到目前为止我有

```
 SELECT  t.`first_name`, t.`last_name`, t.`student_id`,
        Count(IF(t.`intervention_details_id` = 1, 1, null)) AS Intervention1,
        Count(IF(t.`intervention_details_id` = 0, 1, null)) AS Intervention2
 FROM  (
            SELECT student.`student_id`,  student.`first_name`,
                    student.`last_name`,
                    `student_intervention`.`intervention_details_id`
            FROM student, student_intervention 
            WHERE student_intervention.student_id = student.`student_id`
            ) t 
 GROUP BY t.student_id 
```

这可行，但它只显示有干预的学生的数据。我想要一份完整的学生名单，包括那些没有干预的学生。我想我需要一个 JOIN 但无法找出正确的。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:19:53.270

`LEFT JOIN`改为使用

```
SELECT  a.`student_id`,  
        a.`first_name`,
        a.`last_name`,
        SUM(IF(COALESCE(b.`intervention_details_id`,0) = 1, 1, 0)) Intervention1,
        SUM(IF(COALESCE(b.`intervention_details_id`,0) = 0, 1, 0)) Intervention2
FROM    student a
        LEFT JOIN student_intervention b
            ON b.student_id = a.`student_id`
GROUP BY a.`student_id`, a.`first_name`, a.`last_name` 
```

如果你想要准备好的陈述

```
SET @sql = NULL;

SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(CASE WHEN COALESCE(b.intervention_details_id ,0) = ',
      COALESCE(b.intervention_details_id ,0),
      ' THEN 1 ELSE 0 END) AS ',
      COALESCE(b.intervention_details_id ,0)
    )
  ) INTO @sql
FROM    student a 
        LEFT JOIN student_intervention b
            ON b.student_id = a.student_id;

SET @sql = CONCAT('SELECT  a.student_id , a.first_name , a.last_name , ', @sql, ' 
                   FROM     student a
                            LEFT JOIN student_intervention b
                                ON b.student_id = a.student_id 
                    GROUP BY a.student_id , a.first_name , a.last_name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# unit-testing - 单元测试 viewRenderer 的 renderScript 方法（Zend Framework 1.12）

> ID：13515629
> 
> 赞同：0
> 
> 时间：2012-11-22T15:15:15.847
> 
> 标签：unit-testing, zend-framework

在下面的设置中，有
一个控制器操作 (index/hello) 呈现不同于默认的视图脚本，
`index/instead-of-hello.phtml`而不是`index/hello.phtml`

```
public function helloAction()
{
    $this->renderScript('index/instead-of-hello.phtml');
} 
```

我想对动作实际**呈现进行****单元测试** **`index/instead-of-hello.phtml`**

 **```
public function testHelloAction()
{
    $params = array('action' => 'hello', 'controller' => 'Index', 'module' => 'default');
    $urlParams = $this->urlizeOptions($params);
    $url = $this->url($urlParams);
    $this->dispatch($url);
    $renderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
    $this->assertEquals('index/instead-of-hello.phtml', $renderer->getViewScript());
} 
```

此测试失败，因为`renderer->getViewScript()`返回的是默认渲染的脚本，而不是实际渲染的脚本。

```
1) IndexControllerTest::testHelloAction
Failed asserting that two strings are equal.
--- Expected
+++ Actual
@@ @@
-index/instead-of-hello.phtml
+index/hello.phtml 
```

我怎样才能成功地测试脚本`index/instead-of-hello.phtml`是否真的被渲染了？

[上面的例子](https://github.com/dbaltas/zend-framework1.12-playground/commit/49fb229943f1a6c470703693eda669b4c402b2da)使用了 Zend Framework 1.12 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:16:24.170

尝试：

```
$this->render('index/instead-of-hello.phtml'); 
```

这是来自文档的解释：

```
$this->renderScript() 
```

> 使用此方法时，ViewRenderer 不会自动确定脚本名称，而是直接将 $script 参数直接传递给视图对象的 render() 方法。**

# jquery - 为什么加载页面时第三个 li 元素总是聚焦？

> ID：13515636
> 
> 赞同：-1
> 
> 时间：2012-11-22T15:15:30.660
> 
> 标签：jquery, html, css, hover, html-lists

我正在创建一个包含菜单和子菜单的简单站点。加载页面时，它会显示 Re-Board 及其子菜单，就像它从无处悬停一样。我希望主页`li`成为加载页面时的默认菜单。有什么问题？我检查了我的 css 和 js 文件并进行了一些测试，但问题仍然存在。请帮忙。非常感谢 ！！！

HTML结构是这样的。

```
<ul id="topnav">
    <li style=""><a href="">Home</a></li>
    <li>
        <a href="">Company</a>
        <span>
            <a href="">The Company</a> |
            <a href="">The Team</a> |
            <a href="">Careers</a>
        </span>
    </li>
    <li>
        <a href="">Re-Board</a>
        <span>
            <a href="">What We Do</a> |
            <a href="">Our Process</a> |
            <a href="">Testimonials</a>
            </span>
            </li>
    <li><a href="">Design Database</a></li>
    <li><a href="">New</a></li>
    <li><a href="">Catalog</a></li>
    <li class="none-b"><a href="">Contact us</a></li>
</ul> 
```

我的完整代码:)

[http://jsfiddle.net/X9DwY/](http://jsfiddle.net/X9DwY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:49:55.480

如果您不希望它立即显示，您首先需要隐藏第二个子菜单：

```
<span style="display:none;"></span> 
```

代替：

```
<span></span> 
```

# python - 在Python中提取特定字符串

> ID：13515638
> 
> 赞同：0
> 
> 时间：2012-11-22T15:15:38.020
> 
> 标签：python, string

我有日志文件，有时我添加了时间戳创建，现在看起来像这样：
`log.txt:`

```
327555
327563
327570
327601
2012-11-19 22:21:37 :: 327001
2012-11-19 22:21:37 :: 327004
2012-11-19 22:21:37 :: 327007
2012-11-19 22:21:37 :: 327008 
```

在我的 Python 脚本中，我曾经从 log.txt 中读取所有行并将其逐行添加到集合中以供进一步使用：

```
log_file = open('log.txt')
set_log = set([])
for line in log_file:
    set_log.add(line.strip())
log_file.close() 
```

但是由于添加了时间戳，这个解决方案并在我的集合中给了我错误的值（它也包括时间戳）。

问：如何使其更灵活，以便使用没有时间戳和有时间戳的行并仅提取适当的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:17:43.960

只需解析时间戳即可。`ln.split()[-1]`将在空格分割后返回最后一个元素，这似乎是你所追求的，所以

```
set_log = set(ln.split()[-1] for ln in log_file) 
```

（使用生成器理解来替换循环。`strip()`不再需要`split()`删除所有空格。）

# python - 如何将networkx（python）节点序列化为json格式？

> ID：13515644
> 
> 赞同：3
> 
> 时间：2012-11-22T15:15:56.697
> 
> 标签：python, json, serialization, nodes, networkx

我有一个 networkx 图，我想通过使用 json 格式的连接发送一个节点（包括它的属性）。我知道如何序列化整个图：

```
import networkx as nx
from networkx.readwrite import json_graph
G=nx.Graph()
G.add_node(1)
G.node[1]["name"]="alice"
G.add_node(2)
G.add_edge(1,2)
print json.dumps(json_graph.node_link_data(G)) 
```

但是，我没有找到序列化单个节点的方法，例如

```
print json.dumps(json_graph.node_data(G.node[1])) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:38:32.473

您可以在节点上调用 json.dumps() 或 (node,data) 的元组。这同样适用于边缘。例如：

```
In [1]: import networkx as nx

In [2]: G=nx.Graph()

In [3]: G.add_node(1,color='red',size=75)

In [4]: G.add_node(2,color='blue',size=33)

In [5]: import json

In [6]: json.dumps(G.nodes(data=True))  # all nodes
Out[6]: '[[1, {"color": "red", "size": 75}], [2, {"color": "blue", "size": 33}]]'

In [7]: json.dumps((1,G.node[1])) # (node, data) tuple
Out[7]: '[1, {"color": "red", "size": 75}]' 
```

# python - 需要澄清 python 的属性访问和它的 dir()

> ID：13515649
> 
> 赞同：1
> 
> 时间：2012-11-22T15:16:01.003
> 
> 标签：python, attributes, magic-methods

我没有什么困惑；你可以在图片中看到.. 我创建了一个类，然后应用于`dir()`这个类以检查这个类定义了哪些名称。
然后访问这个类的属性；特别是那些以' `__`'开头的，我看到的是一个巨大的属性列表；其中大部分不在`dir()`'s 列表中；
所以我的第一个问题是他们都是从哪里来的？ ![在此处输入图像描述](../Images/bdfd8671610ad7711200d4f94a5752bf.png)

下面也是我的观察，我已经发布了这个问题。它就像
""" `dir(object1)`给了我们一个属性列表；它可以在`object2`（它是 this 的一个实例`object1`）`.`上访问`object2`（应用 that 如果它`object2`可以成为 的实例`object1`）（以及其他定义为`object2`)"""
**是这样吗？？？？？？**
让我们检查一下..（我正在使用 ipython 的 qtconsole）

`example 1`: `type`是它自己的实例。所以让我们先检查一下`type`。您可以在快照中看到如下列表；列表，`dir(type)` 然后是其属性的下一个输出，将其放置`.`在其上，（以 开头的第`__`一个）然后这是一个列表（参见`line 55`）；

![在此处输入图像描述](../Images/bdfd8671610ad7711200d4f94a5752bf.png)

然后对于所有的remaning（它只是一个`mro`）；所以在两者结合之后；它与`dir(type)` ![在此处输入图像描述](../Images/d80a75c67a02336a2e2f2edd2fd7544a.png)

`example 2`: 让我们创建我们自己的类

![在此处输入图像描述](../Images/66f69deb355df140e85452b504859428.png) 上`line 59`; （即在 的实例上`testClass`）允许首先访问以 开头的那些，`__`然后是其他的：![在此处输入图像描述](../Images/aa9d8a0ad466516cf086dd2920565c90.png) 最后将这两个结果结合起来`line 59`与 相同`dir(testClass)`。对？？就在那时；让我们看看另一个例子

`example 3`: ![在此处输入图像描述](../Images/93cbc7b7dd22da5f305eae9d0c285e04.png)并且![在此处输入图像描述](../Images/ee76d2e928afbe93e8b02337ccc066a0.png) 类似地结合示例 1 的结果`line 64`并将其与`line 54`示例 1 进行比较。

这就是我这边的结果。这是我的观察；这是正确的吗？？？？我需要 python 大师对此观察的任何专家评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:06:04.920

`dir()`显示对象本身的内容，但使用`.`运算符您还可以访问对象类型的属性。看看，在`dir(type(testClass))`那里你会找到你错过的那些。

# vb6 - 如何使用 vb6 在服务器上远程运行客户端的 exe

> ID：13515652
> 
> 赞同：3
> 
> 时间：2012-11-22T15:16:10.620
> 
> 标签：vb6, cmd, exe, remote-access

我正在使用下面的代码在 cmd 中执行我的命令。这实际上是为在我的服务器上运行 exe 而设计的。

```
Private Sub Command1_Click()
    Dim FN As Integer
    FN = FreeFile
    'DOS COMMANDS
    ServerName = "\\mydbserv"
    ExePath = """d:\myfolder\my.exe"""
    UserName = "myserver\myuser"
    Password = "mypass"
    MyCommand = "psexec " & ServerName & " -u " & UserName & " -p " & Password & " -i " & ExePath
    'Open Bat file
    Open "C:\Mybatc.bat" For Output As #FN
        Print #FN, "cd c:\Users\myuser"
        Print #FN, MyCommand
        Print #FN, "Exit"
    Close #FN
    'Activate
    result = Shell("C:\Mybatc.bat", vbHide)
    End
End Sub 
```

一切都很好，直到我看到进程完成后 cmd 没有关闭。更糟糕的是我试图远程运行的 exe 也没有停止。当我检查 CPU 使用情况时，它总是显示“00”甚至没有启动。它显示出永远工作但实际上从来没有工作过。所以我的问题是：

1.  为什么我不能远程运行这个exe文件？（或者为什么它就像跑步一样）
2.  在服务器上完成此 exe 文件后，如何远程运行和关闭？
3.  在我的电脑上完成后如何关闭窗口和处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:10:43.940

PSExec 只会在计算机中启动进程（大部分时间是远程的），之后它无法控制正在执行的 exe。请尝试将其作为进程运行（在 C# 中的 ProcessInfo 中）（shell 执行为 false）。也可以使用以下内容来确认远程 PC 中的进程状态：

```
Option Explicit

Private Sub Form_Load()

    Dim strComputer As String
    Dim sReturn As String
    Dim strNameOfUser As Variant
    Dim colProcesses As Object
    Dim objProcess As Object
    strComputer = "." '"." local or "\\ComputerName"
    Set colProcesses = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2").ExecQuery("Select * from Win32_Process")
    For Each objProcess In colProcesses
        sReturn = objProcess.GetOwner(strNameOfUser)
        If sReturn <> 0 Then
            MsgBox "Could not get owner info for process " & objProcess.Name & vbNewLine & "Error = " & sReturn
        Else
            MsgBox "Process " & objProcess.Name & " is owned by " & "\" & strNameOfUser & "."
        End If
    Next

End Sub 
```

链接：[http](http://www.vbforums.com/showthread.php?355203-RESOLVED-How-to-get-process-information) ://www.vbforums.com/showthread.php?355203-RESOLVED-How-to-get-process-information 希望对您有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:22:41.887

这个怎么样？

1.  在服务器上安装 Windbg。
2.  当您的 exe 准备好运行时，配置 windbg 自动附加到您的 exe。 [http://ask.brothersoft.com/image-file-execution-options-debugger-83827.html](http://ask.brothersoft.com/image-file-execution-options-debugger-83827.html)
3.  运行你的脚本
4.  启动 exe 后，windbg 将附加到它。
5.  在windbg命令中输入'g'，让你的exe运行。
6.  等到你认为它应该完成
7.  ctrl-break 让进程挂起
8.  向windbg 命令输入'~*kb'，查看每个线程中发生了什么，找出它们等待的原因，以及它们在等待什么？

# iphone - 如果在 didMoveToSuperview 中使用 UIImage+Retina4 类别不起作用

> ID：13515653
> 
> 赞同：0
> 
> 时间：2012-11-22T15:16:17.387
> 
> 标签：iphone, ios, uiimage, uikit, retina-display

如果应用程序在视网膜 4 设备上运行，我将使用此`UIImage`类别自动查找正确的资产：http: [//www.sourcedrop.net/FY53a14b0127f](http://www.sourcedrop.net/FY53a14b0127f)

如果在子类的方法中实例化，它会正确找到带有`-568h@2x`后缀的资产：`UIImage``UIView``init`

```
-(id) init{
    self = [super init];
    if(self){
        myButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [myButton setImage:[UIImage imageNamed:@"go_back_image"] forState:UIControlStateNormal];
        [self addSubview:myButton];
    }
} 
```

但是如果`UIImage`在类中实例化了，`didMoveToSuperView`则该类别不会获取资产：

```
-(void)didMoveToSuperview{
    if(self.superview != nil){
            [myButton setImage:[UIImage imageNamed:@"otherImage"] forState:UIControlStateNormal];
            [myButton setImage:[UIImage imageNamed:@"otherImageHighlighted"] forState:UIControlStateHighlighted];
    }
} 
```

如果在其中`UIImage`创建，`didMoveToSuperview`则显示正常大小的资产...

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T10:43:26.660

尝试在类别代码中使用断点。

我遇到了一个没有选择图像的问题，因为我将图像设置为 @"someImage.png" 之类的

```
[myButton setImage:[UIImage imageNamed:@"someImage.png"] forState:UIControlStateNormal]; 
```

而不是像这样简单的“someImage”

```
[myButton setImage:[UIImage imageNamed:@"someImage"] forState:UIControlStateNormal]; 
```

通过在类别类中调试发现这是问题并使用这一行来修复：

```
//removing png extension, if present
imageNameMutable = (NSMutableString *)[imageNameMutable stringByDeletingPathExtension];
NSString *imagePath = [[NSBundle mainBundle] pathForResource:imageNameMutable ofType:@"png"]; 
```

你可能需要做类似的事情。祝你好运:)

# java - 扩展一个类+新参数

> ID：13515657
> 
> 赞同：1
> 
> 时间：2012-11-22T15:16:18.880
> 
> 标签：java, oop, extends

好的，问题来了！

我有一堂课 GetStuff

```
public class GetStuff {

   public GetStuff(String data) {
       // stuff
   }

} 
```

在这个类中，我有一个方法 getMyStuff() 调用第二种方法：

```
getAllMyStuff(); 
```

现在，我想扩展我的课程，所以我会做一个：

```
public class GetSecondStuff extends GetStuff {

      public GetSecondStuff(String data, int newData) {
           super(data);
      }

} 
```

在第二个类中，我将覆盖我的 getAllMyStuffMethod，但在这个方法中，我需要使用构造函数中的 newData 参数：

```
private String getAllMyStuffMethod() {
   if (newData==0) // do something
} 
```

我如何在这里使用**newData**？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:19:20.690

**只需在GetSecondStuff**类中创建一个新字段并在构造函数中分配它。然后您可以在覆盖的方法中使用 newData 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:18:41.273

将变量 newData 保存在实例变量中。有了这个，你可以在 GetSecondStuff 类中访问它。

就像是：

```
public class GetSecondStuff extends GetStuff {
    private int newData;

    public GetSecondStuff(String data, int newData) {
      super(data);
      this.newData = newData;
    }

    private String getAllMyStuffMethod() {
      if (this.newData==0) // do something
    }
  } 
```

**编辑**：

在其中一条评论中，我读到您想在超类中使用子类参数。那么你能告诉我为什么新参数不在超类中吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:20:37.600

扩展第一个类可能有自己的属性，使用它们。

```
public class GetSecondStuff extends GetStuff {
  int _newData
  public GetSecondStuff(String data, int newData) {
       super(data);
       _newData = newData;
  }

   private String getAllMyStuffMethod() {
     if (_newData==0) // do something
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T15:30:27.270

```
public class GetStuff {
    public GetStuff(String data) {
        System.out.println(data);
    }
}

public class GetSecondStuff extends GetStuff {
    private int newData;

    public GetSecondStuff(String data, int newData) {
        super(data);
        this.newData = newData;

        data = "GetSecondStuff";        
        System.out.println(data);

        System.out.println(getAllMyStuffMethod());

    }

    private String getAllMyStuffMethod() {
        String ret=null;
          if (this.newData==0)
              ret="0";
          else
              ret="1";

        return "new data : "+ret;
    }
}

public class main {

    public static void main(String[] args) {        

        GetSecondStuff gf2 = new GetSecondStuff("GetStuff",1);      
    }

} 
```

输出 ：

获取材料

GetSecondStuff

新数据：1

# java - 在 CXF 中使用 rpc/encoded 样式的方法

> ID：13515660
> 
> 赞同：4
> 
> 时间：2012-11-22T15:16:24.437
> 
> 标签：java, wsdl, cxf, apache-karaf, osgi-bundle

我知道 CXF 不支持 rpc/encoded WSDL 样式，我正在寻找一种解决方案来解决这个问题。我必须执行 rpc/encoded 样式的 Web 服务，问题是该服务必须作为使用 CXF 2.6.2 的 OSGi 包部署在 Apache Karaf 2.2.9 中，我无法实现 rpc /编码的ws。

我在想的是创建另一个 Web 服务，它将在不同的容器上运行并使用 Axis 1.4 生成。它将作为部署到 Karaf 中的 CXF Web 服务的包装器。

我不太喜欢这个解决方案，因为必须涉及另一个容器。也许有人可以建议我解决方案如何在没有其他容器的情况下完成这项工作？（至少如果可能的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:59:53.607

Glen 有一个教程：

[http://www.jroller.com/gmazza/entry/calling_rpc_encoded_web_services](http://www.jroller.com/gmazza/entry/calling_rpc_encoded_web_services)

但这真的不是那么简单。

# simulator - Blackberry-10 级联

> ID：13515664
> 
> 赞同：0
> 
> 时间：2012-11-22T15:16:35.793
> 
> 标签：simulator, blackberry-10

我是 Blackberry-10 开发的新手，我在 blackBerry 10 Dev Alpha Simulator 上运行示例 BB-10 应用程序时遇到错误

![错误是](../Images/611a31e7eaa62c44aab181c6b68c7b59.png)

谁能帮我解决这个问题。！！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:07:44.630

重新启动VM ware并再次使用IP地址连接到模拟器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:39:47.383

当您尝试在 IDE 控制下再次启动应用程序时，当应用程序正在运行但不受 IDE 控制时，模拟器或 Dev Alpha 可能会出现同步和启动问题。通常在模拟器或 Dev Alpha 上退出应用程序会解决问题，但请记住遵守退避重试时间要求。

导致这些问题的其他问题可以通过重新启动模拟器操作系统和/或从模拟器中删除应用程序来解决。

# objective-c - 使用 CGAffineTransformMakeRotation 旋转具有相同中心点的 UIImageView

> ID：13515668
> 
> 赞同：5
> 
> 时间：2012-11-22T15:16:42.907
> 
> 标签：objective-c, uiimageview, rotation, cgaffinetransform

我正在尝试旋转 UIImageView 并使其居中。在下图中，我希望旋转的箭头（红色十字准线）中心点与 0° 箭头（蓝色十字准线）的中心点匹配。

我尝试了各种锚点，但似乎无法让它按我的意愿运行。

```
// Rotate
self.arrowRotatedImageView.layer.anchorPoint = CGPointMake(0.5,0.5);
CGFloat angle = 45 * (M_PI/180);
self.arrowRotatedImageView.transform = CGAffineTransformMakeRotation(angle); 
```

我错过了什么？我正在阅读[Apple 文档](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGAffineTransformMakeRotation) ，但我无法弄清楚。

![iPhone 屏幕截图的非旋转箭头顶部的旋转箭头](../Images/b71f630430cf345b9b8ca7b22c6878ef.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T18:54:30.980

原来奇怪的旋转问题与新的 iOS 6 自动布局功能有关。一旦我花了一些时间了解对齐约束是如何工作的，我就能够实现我想要的结果。

如果您遇到奇怪的旋转问题并且使用启用了自动布局的 iOS 6，那么您的约束可能需要调整。

关键是在其父视图中将旋转下的图像垂直和水平居中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T07:24:28.607

我遇到了同样的问题，我通过将 a`Center X Alignment Constraint`和 a`Center Y Alignment Constraint`应用于有问题的问题来解决它`UIImageView`。这样做将阻止图像从其中心 x 和 y 位置移动。

# asp.net-web-api - WebApi 元数据 - 未找到 ODataModelBuilder

> ID：13515671
> 
> 赞同：0
> 
> 时间：2012-11-22T15:16:54.023
> 
> 标签：asp.net-web-api

我发现了一些使用 ODataModelBuilder 的示例 应该引用哪些 NuGetPackage？似乎 Microsoft.Data.OData 不再包含此类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:07:58.540

包：包 id="Microsoft.AspNet.WebApi.OData" 版本="0.2.0-alpha"

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T11:56:29.057

安装 Microsoft.AspNet.WebApi.OData nuget 包

浏览这篇博文。 [http://dilanarandara.blogspot.com/2013/02/odata-using-aspnet-web-api.html](http://dilanarandara.blogspot.com/2013/02/odata-using-aspnet-web-api.html)

# php - 如何在 Yii 中安装 AWS 开发工具包

> ID：13515673
> 
> 赞同：4
> 
> 时间：2012-11-22T15:16:59.793
> 
> 标签：php, amazon-web-services, yii, include, autoload

我想在我的 Yii 项目中使用 Amazon AWS SDK for PHP，但是我得到了各种包含错误（例如`include(CFCredentials.php): failed to open stream: No such file or directory`）。

我认为这可能与 Yii 的类名必须与文件名匹配的假设有关......

我们能做些什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T05:07:17.667

我已经做到了：

```
spl_autoload_unregister(array('YiiBase', 'autoload'));
require_once PATH_TO_AWS_SDK . 'sdk.class.php';
// I write down in PATH_TO_AWS_SDK.'config.inc.php' my CFCredentials
spl_autoload_register(array('YiiBase', 'autoload'));

$amazon_opts = array(
    'curlopts' => array(
        CURLOPT_SSL_VERIFYPEER => false,
        CURLOPT_FORBID_REUSE   => false,
    ),
);
$amazon = new AmazonSES();
$response = $amazon->get_send_quota($amazon_opts); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:04:46.860

这很好用：

```
// Include the SDK

Yii::import('application.vendors.aws.*');
spl_autoload_unregister(array('YiiBase', 'autoload'));
require_once 'sdk.class.php';
spl_autoload_register(array('YiiBase', 'autoload'));

// Instantiate the AmazonEC2 class
$ec2 = new AmazonEC2(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T17:49:16.093

万一有人偶然发现了这个问题，我发现如果有人直接使用 PHAR 文件（我知道这是一个糟糕的决定）并通过 require_once 导入，那么在你的 SDK 调用完成之前，你不能调用 spl_autoload_register 来重新添加 YiiBase 自动加载.

至少这是我们在使用 StsClient 调用具有 IAM 角色的承担角色时的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-13T06:09:31.943

这是更简单的方法，您可以使用 Yii S3 Upload 扩展。

[http://www.yiiframework.com/extension/s3upload/](http://www.yiiframework.com/extension/s3upload/)

# asp.net-mvc-3 - 具有依赖注入 (Autofac) 和 Automapper 的 Mstest 控制器和服务层

> ID：13515679
> 
> 赞同：0
> 
> 时间：2012-11-22T15:17:21.580
> 
> 标签：asp.net-mvc-3, unit-testing, mstest, automapper, autofac

我正在尝试将测试层带入我的项目，但我没有到达那里:(希望有人可以帮助我。

控制器（基于 Automapper 映射和依赖注入容器）：

```
 public virtual ActionResult SearchCategories(string keywords)
    {
        var result = _categoryService.SearchCategories(keywords);

        var resultViewModel = Mapper.
            Map<IList<SearchCategoriesDto>, 
                IList<SearchCategoriesViewModel>>(result);

        return View(resultViewModel);
    } 
```

服务层：

```
 public IList<SearchCategoriesDto> SearchCategories(String keywords)
    {
        // Find the keywords in the Keywords table
        var keywordQuery = _keywordRepository.Query;

        foreach (string keyword in splitKeywords)
        {
            keywordQuery = keywordQuery.Where(p => p.Name == keyword);
        }

        // Get the Categories from the Search
        var keywordAdCategoryQuery = _keywordAdCategoryRepository.Query;
        var categoryQuery = _categoryRepository.Query;

        var query = from k in keywordQuery
                    join kac in keywordAdCategoryQuery on k.Id equals kac.Keyword_Id
                    join c in categoryQuery on kac.Category_Id equals c.Id
                    select new SearchCategoriesDto
                    {
                        Id = c.Id,
                        Name = c.Name,
                        SearchCount = keywordAdCategoryQuery
                             .Where(s => s.Category_Id == c.Id)
                             .GroupBy(p => p.Ad_Id).Count(),
                        ListController = c.ListController,
                        ListAction = c.ListAction
                    };

        var searchResults = query.Distinct().ToList();

        return searchResults;
    } 
```

测试完成但不工作：

```
 [TestMethod]
    public void Home_SearchCategories_Test()
    {
        // Setup
        var catetoryService = new CategoryService(
                                   _categoryRepository, 
                                   _keywordRepository, 
                                   _keywordAdCategoryRepository);

        // Act
        var result = catetoryService.SearchCategories("audi");

        // Add verifications here
        Assert.IsTrue(result.Count > 0);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:38:59.620

我假设您想使用真实的存储库和数据库为您的类别服务创建一个集成测试。（与单元测试相反，您将在这些存储库中使用 stub\mocks 并单独测试服务类）

因此，您将拥有一个分离的测试程序集，您将在其中添加集成测试，例如在服务级别为集成测试提供一个类。然后，在该类上，您将在运行每个测试之前创建所有存储库和 CategoryService 的实例，在具有属性 [TestInitialize] 的方法上。（具有此属性的方法将在每次测试之前由 msTest 运行）

由于您还真正地使用数据库，因此您希望确保已使用的所有资源都已处理完毕。例如，处理实体框架上下文。在这种情况下，您将添加一个具有 [TestCleanup] 属性的方法，您将在其中执行所需的任何清理逻辑。（具有此属性的方法将在每次测试后由 msTest 运行）

使用这些方法，您将确保每次测试都有一个新的服务和存储库实例。然后，您将按照 AAA 模式（安排、行动、断言）实施每个单独的集成测试

因此，带有单个测试的集成测试类的示例可能如下所示：

```
public class CategoryServiceIntegrationTest
{
    //dependencies of your class under test
    private ICategoryRepository _categoryRepository; 
    private IKeywordRepository _keywordRepository;
    private IKeywordAdCategoryRepository _keywordAdCategoryRepository;

    //your class under test
    private CategoryService _categoryService;

    [TestInitialize]
    public void InitializeBeforeRunningATest()
    {
        //manually create instances of the classes implementing the repositories
        //I don´t know about how they are implemented but I guess
        //you would need to provide the name of a connection string in the config file (in that case this should be in a config file of the test project)
        //,the connection string itself
        //or maybe you need to initialize an entity framework context
        _categoryRepository = new CategoryRepository( /*whatever you need to provide*/);
        _keywordRepository = new KeywordRepository( /*whatever you need to provide*/);
        _keywordAdCategoryRepository = new KeywordAdCategoryRepository( /*whatever you need to provide*/);

        //Create the class under test with all repositories dependencies          
        //as it is an integration test, they are your real objects and not mocks\stubs
        _categoryService = new CategoryService(_categoryRepository, 
                                               _keywordRepository,
                                               _keywordAdCategoryRepository);
    }

    [TestCleanup]
    public void CleanDatabaseResources()
    {
        //just in case you need to do something like disposing an EF context object          
    }

    [TestMethod]
    public void Home_SearchCategories_Test()
    {
        // Arrange
        var keywords = "audi";

        // Act (the _categoryService instance was created in the initialize method)
        var result = _categoryService.SearchCategories(keywords);

        // Assert
        Assert.IsTrue(result.Count > 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:35:38.580

使用 Autofac、Automapper 为服务（在本例中为类别服务）构建集成测试的解决方案（在此服务中不是必需的，但如果有必要，您需要放入 TestInitialize 方法，如您在以下解决方案中的注释行）和 Daniel JG 帮助下的实体框架（感谢 Daniel）：

首先，我使用 MSTest 创建了一个单独的测试项目（只是因为有很多关于它的文档）。

其次，您需要将实体框架的连接字符串放在测试数据所在的位置：

```
<connectionStrings>
    <add name="DB" connectionString="Data Source=.\sqlexpress;Database=DBNAME;UID=DBUSER;pwd=DBPASSWORD;MultipleActiveResultSets=True;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

在<configSections>之后的<configSections>部分

第三，您为测试创建类：

```
namespace Heelp.Tests
{
    [TestClass]
    public class CategoryServiceIntegrationTest
    {
        // Respositories dependencies
        private IRepository<Category> _categoryRepository;
        private IRepository<Keyword> _keywordRepository;
        private IRepository<KeywordAdCategory> _keywordAdCategoryRepository;

        // Service under test: Category Service
        private CategoryService _categoryService;

        // Context under test: HeelpDB Connection String in app.config
        private HeelpDbContext db;

        [TestInitialize]
        public void InitializeBeforeRunningATest()
        {
            // IoC dependencies registrations
            AutofacConfig.RegisterDependencies();

            // HERE YOU CAN CALL THE AUTOMAPPER CONFIGURE METHOD
            // IN MY PROJECT I USE AutoMapperConfiguration.Configure();  
            // IT'S LOCATED IN THE App_Start FOLDER IN THE AutoMapperConfig.cs CLASS
            // CALLED FROM GLOBAL.ASAX Application_Start() METHOD

            // Database context initialization
            db = new HeelpDbContext();

            // Repositories initialization
            _categoryRepository = new Repository<Category>(db);
            _keywordRepository = new Repository<Keyword>(db);
            _keywordAdCategoryRepository = new Repository<KeywordAdCategory>(db); 

            // Service initialization
            _categoryService = new CategoryService(_categoryRepository,
                                                   _keywordRepository,
                                                   _keywordAdCategoryRepository);
        }

        [TestCleanup]
        public void CleanDatabaseResources()
        {
            // Release the Entity Framework Context for other tests that will create a fresh new context.
            // With this method, we will make sure that we have a fresh service and repositories instances on each test. 
            db.Dispose();
        }

        [TestMethod]
        public void Home_SearchCategories_Test()
        {
            // Arrange
            var keywords = "audi";

            // Act (the _categoryService instance was created in the initialize method)
            var result = _categoryService.SearchCategories(keywords);

            // Assert
            Assert.IsTrue(result.Count > 0);
        }
    } 
```

}

现在你只需要运行测试看看它是否通过了。

为了保证集成测试，我会推荐与原始/生产数据库在表格方面相同的第二个数据库，但只有您的测试数据。

这将确保测试结果根据您的测试数据保持不变。

唯一的缺点是您需要对表进行sincronized，但您可以使用Simego 的SQL Admin Studio Freeware Tool 来实现这一点。

问候。

# xml - 通过 shell 脚本设置 XML 标签

> ID：13515685
> 
> 赞同：0
> 
> 时间：2012-11-22T15:17:41.357
> 
> 标签：xml, shell, unix, xml-parsing, sed

嗨，我被困在使用 shell 脚本设置 XML 的标记值（值可能包含特殊字符）。

XML 标记值应该用双引号括起来。

要求：我有一个带有标签值的 xml。对于 shell 脚本，我必须在标签之前放置一个带有值的新 XML 标签。所以我正在使用 sed，我尝试如下。如果 $4 $5 没有特殊字符，这可以正常工作。如何使用特殊字符进行此操作？（例如：&><:".,;' 等）

```
sed '/<jobResulsDir/s/<jobResulsDir/<CommCellUser userName="'$4'" password="'$5'" >  <\/CommCellUser> '$test' <jobResulsDir  /' $temp_dir/PreImageModeFile.xml > $temp_dir/PreImageModeFile2.xml 
```

除了 sed 还有其他方法吗。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:39:42.240

您尝试对 sed 执行的操作会破坏您的大脑，您必须在每个特殊字符之前使用反斜杠才能使其正常工作。我使用 m4 来完成这种工作。看一个例子：

```
define(your_macro_name,<Delete>
<Object fdn="SubNetwork=somemoredata`,SubNetwork=somedata'`,ManagedElement'=$1"/>
</Delete>)dnl 
```

将上面的代码保存在一个名为“xmlmacros.m4”的文件中，然后创建一个名为“test.m4”的文件并添加以下内容：

```
include(xmlmacros.m4)dnl
your_macro_name(YOURXMLVALUE) 
```

如果这两个文件在同一个文件夹中，您可以运行`m4 test.m4`，您的输出将是：

```
 <Delete>
 <Object fdn="SubNetwork=somemoredata,SubNetwork=somedata,ManagedElement=YOURXMLVALUE"/> 
```

where`$1`将替换为“test.m4”文件括号中的值。您还可以添加更多定义，以按需创建 xml 文件，例如 xml 标头等。

以上是您可以使用的工作示例。您可以四处寻找有关 m4 的更多信息，我总是将它用于此类工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:45:50.360

awk 不关心“特殊字符”。这在 sed 中：

```
sed '/<jobResulsDir/s/<jobResulsDir/<CommCellUser userName="'$4'" password="'$5'" > <\/CommCellUser> '$test' <jobResulsDir /' 
```

这是在 awk 中的：

```
awk -v userName="$4" -v password="$5" -v test="$test" '
   /<jobResulsDir/{ sub(/<jobResulsDir/, "<CommCellUser userName=" userName " password=" password " </CommCellUser> " test " <jobResulsDir ") }
   { print }
' 
```

但您实际上不需要预先测试，`/<jobResulsDir/`因为 sub() 仅在 RE 存在时才会发生，因此您可以将其缩写为：

```
awk -v userName="$4" -v password="$5" -v test="$test" '
   { sub(/<jobResulsDir/, "<CommCellUser userName=" userName " password=" password " </CommCellUser> " test " <jobResulsDir "); print }
' 
```

不确定这是否是您的评论/问题所要求的，但如果您需要在值名称周围加上双引号，只需调整脚本以在您需要的地方提供它们：

```
awk -v userName="$4" -v password="$5" -v test="$test" '
   { sub(/<jobResulsDir/, "<CommCellUser userName=\"" userName "\" password=\"" password "\" </CommCellUser> \"" test "\" <jobResulsDir "); print }
' 
```

最后，如果您愿意，可以通过以下一种方式拆分工作，使其更具可读性和效率：

```
awk -v userName="$4" -v password="$5" -v test="$test" '
   BEGIN{
      q = "\""
      rep = \
         "<CommCellUser userName=" q userName q\
         " password="              q password q\
         " </CommCellUser> "       q test     q\
         " <jobResulsDir "
   }
   { sub(/<jobResulsDir/, rep); print }
' 
```

看着它以这种方式布置，我意识到我对 awk 不关心“特殊字符”有点撒谎。sub() 实际上确实关心 1 个“特殊字符”，即替换字符串中的“&”，因为它用于反向引用 sub() 中匹配的内容，因此您需要将“&”替换为“\&”在代表：

```
awk -v userName="$4" -v password="$5" -v test="$test" '
   BEGIN{
      q = "\""
      rep = \
         "<CommCellUser userName=" q userName q\
         " password="              q password q\
         " </CommCellUser> "       q test     q\
         " <jobResulsDir "
   }
   { gsub(/&/,"\\\\&",rep); sub(/<jobResulsDir/, rep); print } 
```

它需要 4 个“\”，因为字符串文字在 awk 中被解释了两次（一次是在解释脚本时，一次是在执行脚本时），所以你需要 \\ 来代替 \ 来获得文字反斜杠。

如果您愿意，还有一种使用 match() 和 substr() 的替代方法，它没有该约束：

```
awk -v userName="$4" -v password="$5" -v test="$test" '
   BEGIN{
      q = "\""
      rep = \
         "<CommCellUser userName=" q userName q\
         " password="              q password q\
         " </CommCellUser> "       q test     q\
         " <jobResulsDir "
   }
   match($0,/<jobResulsDir/) {
       $0 = substr($0,1,RSTART) rep substr($0,RSTART+RLENGTH)
   }
   { print }
' 
```

就个人而言，我会使用 match()/substr() 方法，因为我讨厌转义字符。

只是循环回到我们开始的地方，如果你愿意，可以这样写：

```
awk -v userName="$4" -v password="$5" -v test="$test" '{
   print (match($0,/<jobResulsDir/) ? substr($0,1,RSTART) "<CommCellUser userName=\"" userName "\"password=\"" password "\" </CommCellUser> \"" test "\" <jobResulsDir " substr($0,RSTART+RLENGTH) : $0)
}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:34:49.817

为什么不用perl？它必须是一个shell脚本。

```
 #!/usr/bin/perl
   use XML::Simple;
   use Data::Dumper;
   open(my $XML_IN, '<', '/xml/file/path.xml');
   $/=undef;
   my $xml_ref = XMLIn(<$XML_IN>);
   print Dumper \$xml_ref;
   # ... access $xml_ref in appropriate location, adding element / value
   my $new_xml = XMLout($xml_ref);
   close $XML_IN;
   open(my $XML_OUT, '>', '/xml/file/path.xml');
   print $XML_OUT $new_xml;
   close $XML_OUT; 
```

# unicode - VB6 打印机上的 Unicode 打印

> ID：13515686
> 
> 赞同：0
> 
> 时间：2012-11-22T15:17:41.900
> 
> 标签：unicode, printing, vb6, cjk

我正在尝试在打印机（好吧，实际上是 PDFCreator）上打印 Unicode（中文）字符串，但我得到的只是字符的 VERTICAL 打印。

我使用从以下`TextOutW`位置导入的函数`gdi32.dll`：

```
TextOutW dest.hDC, x, y, StrConv(szText, vbUnicode), Len(szText) 
```

如果我尝试打印“0.12”（如果我打印汉字，无论如何我都会得到相同的结果），我得到

```
0
.
1
2 
```

如果我使用该`dest.Print`功能，我将无法打印 Unicode。

无论如何，`TextOutW`在屏幕上工作得非常好。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:06:43.403

的定义是`szText`什么？它是VB6字符串吗？在这种情况下尝试

```
Private Declare Function  Lib "gdi32" Alias "TextOutW" ( _
  ByVal hdc As Long, ByVal x As Long, ByVal y As Long, _
  ByVal lpStringU As Long, ByVal nCount As Long) As Long  

TextOutW dest.hDC, x, y, StrPtr(szText), Len(szText) 
```

笔记

*   `StrPtr`不是`StrConv(... , vbUnicode)`
*   `Declare`因为`TextOutW`有`ByVal lpStringU As Long`

# c# - 将形状放入 WPF 中的网格中

> ID：13515691
> 
> 赞同：1
> 
> 时间：2012-11-22T15:18:04.237
> 
> 标签：c#, windows-runtime

我正在尝试将形状动态添加到网格中，我正在以这种方式创建和设置它：

```
Rectangle theRect = new Rectangle();
currentRect = theRect;

theRect.VerticalAlignment = Windows.UI.Xaml.VerticalAlignment.Top;
theRect.HorizontalAlignment = Windows.UI.Xaml.HorizontalAlignment.Left;

theRect.Margin = new Thickness(oldPos.X,oldPos.Y,0,0);

theRect.StrokeThickness = brushWidht;
theRect.Stroke = new SolidColorBrush(brushColor);

theRect.Height = newPoint.Y - oldPos.Y;
theRect.Width = newPoint.X - oldPos.X;

theBoard.Children.Add(theRect); 
```

但它粘在“theBoard”的角落，这是我放置它的网格。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:49:07.553

由于您已经决定`Grid`为父母设置一个，我想您正试图将您的形状放在不同的“单元格”中，即不同的行和列中。您可以使用以下代码执行此操作：

```
Grid.SetRow(theRect, 1);
Grid.SetColumn(theRect, 1); 
```

如果要在父级中设置形状的绝对位置，那么 a`Canvas`将是更好的选择。在这种情况下，您可以使用以下代码在父对象内设置形状的偏移量：

```
Canvas.SetLeft(theRect, oldPos.X);
Canvas.SetTop(theRect, oldPos.Y); 
```

我希望这回答了你的问题。

# apache2 - 使用 SSL 的 Apache-2 proxypass 排除

> ID：13515692
> 
> 赞同：2
> 
> 时间：2012-11-22T15:18:06.090
> 
> 标签：apache2, apache-config

我使用 Jboss +Apache 解决方案。[请看下面我的 httpd-vhost.conf 文件]

我试图从代理重定向中排除我的图像文件夹。

我尝试做的是，当我使用**http://www.mysite.com/images**和**https://www.mysite.com/images**链接时，从 /usr/local/images/ 别名中选择图像。

这适用于虚拟主机端口 80，但是当我在虚拟主机端口 443 上进行相同配置时，它不会从 /usr/local/images/ 别名中获取图像并重定向到 Jboss。

换句话说， [http](http://www.mysite.com/images) ://www.mysite.com/images链接有效，但**https://www.mysite.com/images**无法使用相同的配置。

另请注意，其余 SSL 配置工作正常。我可以毫无问题地访问[https://www.mysite.com 。](https://www.mysite.com)

有人可以帮忙吗？

```
<VirtualHost www.mysite.com:80>
ServerName www.mysite.com
ProxyPreserveHost On
ProxyPass /images !
Alias /images/ /usr/local/images/
ProxyPass / http://www.mysite.com:8080/
ProxyPassReverse / http://www.mysite.com:8080/
</VirtualHost>

<VirtualHost www.mysite.com:443>
ServerName www.mysite.com
SSLEngine On
SSLCertificateFile "\jboss-5.1.0.GA\server\default\conf\mysite.crt"
SSLCertificateKeyFile "\jboss-5.1.0.GA\server\default\conf\mysite.key.insecure"
ProxyPreserveHost On
ProxyPass /images !
Alias /images/ /usr/local/images/
ProxyPass / http://www.mysite.com:8080/
ProxyPassReverse / http://www.mysite.com:8080/
</VirtualHost>

<Directory /usr/local/images/>
Options Indexes FollowSymLinks Includes ExecCGI
AllowOverride All
Order Allow,Deny
Allow from all
Require all granted
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:09:02.023

我找到了解决方案。

我所做的是创建单独的 httpd-ssl.conf 文件和 Listen 443。其他配置相同。

请在下面查看我的 httpd-ssl.conf 文件。

谢谢

```
Listen 443

<VirtualHost www.mysite.com:443>
 ServerName www.mysite.com
 SSLEngine On
 SSLCertificateFile "\jboss-5.1.0.GA\server\default\conf\mysite.crt"
 SSLCertificateKeyFile "\jboss-5.1.0.GA\server\default\conf\mysite.key.insecure"
 SSLProxyEngine On
 ProxyRequests Off
 ProxyPreserveHost On
 ProxyPass /images !
 Alias /images/ /usr/local/images/
 ProxyPass / https://www.mysite.com:7443/
 ProxyPassReverse / https://www.mysite.com:7443/
</VirtualHost> 
```

# r - 在 heatmap.2 中标记密度图例

> ID：13515695
> 
> 赞同：0
> 
> 时间：2012-11-22T15:18:16.047
> 
> 标签：r, heatmap

我正在使用`heatmap.2`来自`gplots`. 但是，最终图表分别显示 X 和 Y 轴的“值”和“计数”。

我怎样才能改变这个？这是我的台词：

```
library(gplots)
heatmap.2(mat) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:06:52.823

似乎我发现的唯一方法是根据 heatmap.2 定义我自己的 heatmap.3 函数并手动重命名“图例”图的轴。

# drupal - Drupal 6 中的 Nivo 视频滑块

> ID：13515697
> 
> 赞同：1
> 
> 时间：2012-11-22T15:18:19.043
> 
> 标签：drupal, drupal-6, drupal-views

我正在尝试使用 nivo 插件实现视频滑块。但是当我尝试在我的生产站点中显示它时遇到问题，没有显示任何结果。

我正在使用视图和面板字段。当我使用实时预览运行查询时，我得到了所需的结果，但是当我尝试在我的生产站点中查看它时，没有任何反应。

如何使用 nivo 滑块插件实现视频幻灯片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:46:32.920

如果它在您的实时预览中工作但不在生产站点上，我能想到的罪魁祸首是`contextual filters`.

在最终显示的页面上，检查上下文过滤器是否正确传递。启用`devel module`并检查页面上正在执行的查询。这会给你一个更好的主意。

# c - 查找数组中最大幅度元素的 MSB 集

> ID：13515700
> 
> 赞同：4
> 
> 时间：2012-11-22T15:18:30.140
> 
> 标签：c, algorithm, math, optimization, arm

`len`给定一个类型元素的数组，`signed short`它是在数组中的最大绝对值元素中找到最高有效位集合的位置。例如，如果数组 L 包含`{-134, 123, 0, -890}`，`f(L)`则应返回`floor(log2(abs(-890)))+1`.

这是我当前的功能：

```
short MSBSetMaxMagnitude(const short *p, int len)
{
   unsigned int t = 0;

   while (len > 0)
   {
      t |= abs(*p);
      p++;
      len--;
   }
   if(t)
      return (short)(32 - __builtin_clz(t));
   else
      return 0;
} 
```

但是，由于 abs() 函数需要分支，所以它有点慢。我尝试使用不带分支的 abs() 代替，但它甚至更慢，因为它包含至少 3 个算术指令。所以我希望也许有一种有效的算法可以准确地找到我需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:12:50.003

看到你在ARM平台上工作，你可以使用`abs`in 2指令的以下实现：

```
EORS r1, r1, r1, ASR #32 (x = x ^ (x >> 32); carry_flag = sign_bit)
ADC r1, r1, #0           (add the sign_bit to x) 
```

如果您可以容忍计算中 +/-1 的误差，请删除第二条指令；然后，你可以用 C 来表达它：

```
int abs_almost_exact(int x)
{
    return x ^ (x >> 32);
} 
```

但是，更大的问题是循环。您可能会从展开中受益匪浅（因为每次迭代都没有什么可做的）：

```
do { // assuming len is even!
    int value1 = *p++;
    int value2 = *p++;
    value1 = abs(value1); // or replace abs by the hand-made version
    value2 = abs(value2);
    t |= value1;
    t |= value2;
    len--;
}
while (len > 0); 
```

注意：我替换`while {}`为是`do {} while`因为我使用的编译器（ARM 编译器）以这种方式生成更好的代码。

另请注意，`short`从内存（在我使用的处理器上）加载变量时，ARM 有 2 个时钟周期的延迟。因此，最小展开因子为 3（但无论如何您都应该尽可能多地展开）。

哦，您的处理器是否支持`short`从内存中读取（半字）变量？我听说过一些非常古老的处理器无法做到这一点。如果是这种情况，您应该更改代码以一次加载 2 个值（1 个字），并使用一些位摆弄将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:31:43.543

三个算术指令在任何现代处理器上都应该花费很少的时间。您正在执行两个算术运算和一个条件分支来管理循环和索引。缓慢可能是由于数据缓存未命中和循环的组合造成的，由于指针使用和指针运算，编译器可能难以展开。

如果不查看数组中的每个元素，就无法找到依赖于数组中每个元素的值，因此目标应该是确保整个过程在扫描数组所需的时间内运行。

您可以通过替换来测试这是否是问题：

```
t |= abs(*p); 
```

与 t |= *p;

如果这不是更快，我建议在手动展开循环中尝试非分支 abs 版本。

# eclipse - 如何修复 Groovy Grails Tool Suite 3 极端内存使用

> ID：13515704
> 
> 赞同：4
> 
> 时间：2012-11-22T15:18:59.043
> 
> 标签：eclipse, grails, memory, groovy, sts-springsourcetoolsuite

Groovy Grails Tool Suite 总是占用超过 3000M 的内存。甚至在开始时。

堆状态显示约2500M

我该如何解决这个问题，它不应该花费那么多。我总是必须重新启动我的 IDE，因为它太慢了。

我已经升级了我的 GGTS.ini：

-Xms320m -Xmx3072m -XX:MaxPermSize=2048m

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:10:42.280

1.  关闭未使用的项目
2.  停用自动构建
3.  重新创建您的工作区（先备份它！）
4.  其他解决方案：http: [//blog.normation.com/2010/05/24/optimizing-eclipse-performances/](http://blog.normation.com/2010/05/24/optimizing-eclipse-performances/)

# android - 成功构建时自动提交（“breadcumbs”）？

> ID：13515707
> 
> 赞同：1
> 
> 时间：2012-11-22T15:19:06.687
> 
> 标签：android, git, intellij-idea, continuous-integration, build-automation

有谁知道是否有一种方法可以在 IDE 中成功构建后自动提交项目（目录）？那就是：类似于持续集成系统的东西，只是更轻巧，更适合低仪式的“单独开发”场景。

我对任何可以与 IntelliJ IDEA（社区版）和 GIT 用于 Android 项目（Java/Ant/Maven）的解决方案特别感兴趣，但我也对其他解决方案（Eclipse、Netbeans、SVN、Hg 等）感兴趣。 ）。我也对关于这个主题的更一般的讨论感兴趣（这是一个好/坏的主意，可以通过这种方式或其他方式完成，等等）。

我也对基于代码的解决方案（脚本、插件等）持开放态度。特别是，有人知道 IntelliJ IDEA 是否提供任何“挂钩”来在菜单命令之前/之后执行脚本？

理由：我正在使用 IDEA 对现有的 Android 项目进行一系列小（但很痛苦）的实验，我希望能够在需要时使用 GIT 逐步返回（每个步骤都由一个以前成功的构建）。如果您愿意，可以将其称为“面包屑编程”。

请注意：我知道这可以通过命令行使用 Ant/Maven/GIT/many-other-tools 轻松获得。我只是想看看是否可以从我习惯的任何 IDE 中执行此操作。是的：我知道我应该经常提交。我做。我只是累了用手做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:21:09.017

好的，看起来这对于 IntelliJ IDEA 是不可能的，即使自 2007 年以来有一个非常相似的功能请求休眠：http: [//youtrack.jetbrains.com/issue/IDEABKL-5755](http://youtrack.jetbrains.com/issue/IDEABKL-5755)。

据我所知，目前唯一*在其自己的 GUI*中提供用于执行构建前/构建后脚本的钩子的 IDE是 Eclipse，这要归功于它的“Builders”对话框：

[Eclipse 添加您自己的构建命令](https://stackoverflow.com/questions/2976610/eclipse-adding-your-own-build-command)

IDEA 和 NetBeans 都（仅）依赖于 Ant 目标来执行此类构建前/构建后的处理任务。请参阅：[https](https://ant.apache.org/manual/Tasks/exec.html) ://ant.apache.org/manual/Tasks/exec.html 。

不幸的是，Ant 和 GIT 之间还没有真正的集成（即使那里有几个项目），所以你要么必须依赖操作系统命令（一个进程分支），要么你可以尝试使用 JGit（[http:/ /eclipse.org/jgit/](http://eclipse.org/jgit/)）。

另一种可能的解决方案是修改现有的 IDE GIT 插件，使其能够接受提交前/提交后的任务或脚本（Eclipse、NetBeans 和 IDEA 使用插件与 GIT 交互）。

最有可能的是，对于手头的任务，我将依靠我（又老又累）的手或 Ant 脚本。

在任何情况下，恕我直言，执行这种自动提交的“正确”方式如下：

1.  构建项目（通过 Ant/Maven 或通过 IDE 内部构建系统）
2.  向用户询问提交消息（或根据日期和时间生成消息）
3.  提交源代码树

当然，失败的构建应该中止剩余的操作。

这将/应该/不应该取代正常的、手工执行的提交流程。相反，它应该补充它（可能使用单独的 GIT 本地存储库或单独的分支）。

# c++ - C++ 控制台窗口闪烁然后消失

> ID：13515716
> 
> 赞同：0
> 
> 时间：2012-11-22T15:19:36.007
> 
> 标签：c++, windows, console-application, executable

好的，这是我制作的销售税计算器，控制台窗口闪烁然后消失。只是想知道我做错了什么。另外我觉得单元测试嵌入在代码本身中，但我想知道单元测试如何应用于这些参数。

```
#include <iostream>
#include <fstream>
#include <string>
#include <iomanip>
#include <math.h>

using namespace std;

void p(double x)
{
  cout << fixed << setprecision(2) << x;
}

int main()
{
  ifstream basketFile;
 basketFile.open("basket.txt");

int howMany;
double price;
double salesTax = 0;
double total = 0;
bool correct = true;

string printIt;
string second;

string garbage1;
string garbage2;
string garbage3;
string garbage4;

string whichImported;

while(!basketFile.eof())
{
    //how many of the specific item do you have?
    basketFile >> howMany;

    //what is the item?
    basketFile >> printIt;

    cout << howMany << " ";

    if(printIt == "book")
    {
        basketFile >> garbage1; //throw away "at"

        basketFile >> price; //get price of book

        total += price;

        cout << printIt;
        cout << " ";
        cout << garbage1;
        cout << " ";
        p(price);
        cout << endl;
    }
    else if(printIt == "music")
    {
        basketFile >> garbage1; //throw away "CD"
        basketFile >> garbage2; //throw away "at"

        basketFile >> price;

        salesTax = ((10)*price)/100;

        price += salesTax;
        total += price;

        cout << printIt;
        cout << " ";
        cout << garbage1;
        cout << " ";
        cout << garbage2;
        cout << " ";
        p(price);
        cout << endl;
    }
    else if(printIt == "chocolate")
    {
        basketFile >> garbage1;
        basketFile >> garbage2;

        basketFile >> price;

        cout << printIt;
        cout << " ";
        cout << garbage1;
        cout << " ";
        cout << garbage2;
        cout << " ";
        p(price);
        cout << endl;
    }
    else if(printIt == "imported")
    {
        basketFile >> second;

        if(second == "box")
        {
            basketFile >> garbage1;
            basketFile >> garbage2;
            basketFile >> garbage3;

            basketFile >> price;

            cout << printIt;
            cout << " ";
            cout << second;
            cout << " ";
            cout << garbage1;
            cout << " ";
            cout << garbage2;
            cout << " ";
            cout << garbage3;
            cout << " ";
            p(price);
            cout << endl;

            salesTax += (5)*(price)/100;

            total += price;
        }
        else
        {
            basketFile >> garbage1;
            basketFile >> garbage2;
            basketFile >> garbage3;

            basketFile >> price;

            cout << printIt;
            cout << " ";
            cout << second;
            cout << " ";
            cout << garbage1;
            cout << " ";
            cout << garbage2;
            cout << " ";
            cout << garbage3;
            cout << " ";
            p(price);
            cout << endl;

            salesTax += ((15)*price)/100;

            total += price;
        }
    }
    else if(printIt == "packet")
    {
        basketFile >> garbage1;
        basketFile >> garbage2;
        basketFile >> garbage3;
        basketFile >> garbage4;

        basketFile >> price;

        cout << printIt;
        cout << " ";
        cout << garbage1;
        cout << " ";
        cout << garbage2;
        cout << " ";
        cout << garbage3;
        cout << " ";
        cout << garbage4;
        cout << " ";
        p(price);
        cout << endl;

        total += price;
    }
    else if(printIt == "bottle")
    {
        basketFile >> garbage1;
        basketFile >> garbage2;
        basketFile >> garbage3;

        basketFile >> price;

        cout << printIt;
        cout << " ";
        cout << garbage1;
        cout << " ";
        cout << garbage2;
        cout << " ";
        cout << garbage3;
        cout << " ";
        p(price);
        cout << endl;

        salesTax += (10)*(price)/100;

        total += price;
    }
    else
    {
        cout << "\nIncorrect parameters." << endl;
        correct = false;
        break;
    }
}

if(correct)
{
    total += salesTax;

    cout << "Sales Taxes: ";
    printf("%.1f",salesTax);
    cout << 0 << endl;
    cout << "Total: ";
    p(total);
    cout << endl;

}
else
{
     return 0;
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:28:28.437

通过“闪烁”，我假设您的意思是`Console`弹出，您的应用程序运行，然后自动关闭。这是正常行为。

添加一行以从用户那里获取输入，并且窗口将保持打开状态，直到给出输入。就像“按任意键关闭”。

如果您从 启动应用程序`Command Line`，您会看到执行结束后，控制`Command Line`权立即返回，这就是关闭窗口的原因，您的过程已完成。

如果您只想在关闭应用程序之前查看输出的内容，使用断点的建议技巧也是可行的。

您正在要求一个代码示例，最简单的可能是

```
#include <conio.h> 
```

在开始，然后，在你最后一次之前`}`

```
_getch(); // getch() might be deprecated with your compiler 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:34:45.017

您可以在应用程序结束时使用：

```
char x;
cin >> x; 
```

或使用 conio.h
程序中的旧 C 函数 getch() 将等待您按下任何键

# php - Smarty Zend 变量源

> ID：13515727
> 
> 赞同：0
> 
> 时间：2012-11-22T15:20:19.430
> 
> 标签：php, zend-framework, smarty

有没有办法跟踪在 Zend 框架中分配 Smarty 变量的控制器功能？

下面的例子：

```
{$TITLE} 
```

这是在 search.tpl

这必须是使用 Smarty 的分配功能分配的。

我怎样才能找到那个作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:40:32.083

由于`assign`（[此处](http://www.smarty.net/docsv2/en/api.assign.tpl)的文档）函数仅采用 2 个参数，即 the`key`和 the （或/对`value`的单个参数），您可能无法以编程方式找到分配的来源。`key``value`

`{assign}`Smarty 模板也可以使用（[此处](http://www.smarty.net/docs/en/language.function.assign.tpl)的文档）分配一个值。

但是，您可以做的是`Find in Files`（取决于您的 IDE，所有像 Sublime Text 2、Visual Studio、Notepad++ 等体面的东西......为您提供了一种在文件夹中的所有文件中查找字符串的方法，通常给出您可以选择更多选项，例如过滤文件的扩展名）用于字符串，或者如果您认为模板可以分配它，则`->assign("Title"`只是文字。`"title"`从那里，您将能够找到分配此值的源文件。如果设置了多个位置并且您想调试执行哪个位置，我建议使用一些`echo`调用，它们将出现在您的 HTML 文档中，就在您的`Template`.

# arrays - Mongo：如何通过存储在子数组中的 ObjectId 查找？

> ID：13515728
> 
> 赞同：7
> 
> 时间：2012-11-22T15:20:29.043
> 
> 标签：arrays, mongodb, find, objectid

我有一个这样的记录集合：

```
{
    "_id" : ObjectId("50ae3bdb50b3d6f01400027a"),
    "admins": 
       [ObjectId("50ae3bdb50b3d6f014000279"), ObjectId("50ae3bdb50b3d6f01400027e")]
} 
```

我想通过 'admin' 数组进行搜索。

如何在子数组中找到包含的所有文档，例如 ObjectId("50ae3bdb50b3d6f014000279") 。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T15:37:51.757

您可以像匹配`admins`非数组字段一样匹配数组字段：

```
db.coll.find({admins: ObjectId("50ae3bdb50b3d6f014000279")}) 
```

# asp.net-mvc - 在 MVC4 中使用 Ninject 和 SignalR

> ID：13515731
> 
> 赞同：2
> 
> 时间：2012-11-22T15:20:38.867
> 
> 标签：asp.net-mvc, asp.net-mvc-4, ninject, signalr

我刚刚开始在我们的 MVC 4 项目中探索 SignalR。我想做的一件事是将 Ninject DI 添加到我们的 Hub 类中。两个问题：

1) 我找到并安装了 SignalR.Ninject，但这样做之后，我不太确定我用它做什么。我尝试将以下行添加到 AppStart NinjectWebCommon 文件中的 RegisterServices() 方法中，但这会产生编译错误。

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Load(
        new Repositories.AssetModule()
    );

    GlobalHost.DependencyResolver = new
        SignalR.Ninject.NinjectDependencyResolver(kernel);
} 
```

2) 正确配置后，我可以对 Hub 类使用构造函数注入，还是需要对 [Inject] 属性使用属性注入？

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T14:41:34.317

我也一直在为以下编译错误而苦苦挣扎：

```
GlobalHost.DependencyResolver = new
        SignalR.Ninject.NinjectDependencyResolver(kernel); 
```

但是，我设法通过将 NinjectDependencyResolver 的内容复制到一个新类来解决它：

```
public class NinjectSignalRDependencyResolver : DefaultDependencyResolver
    {
        private readonly IKernel _kernel;

        public NinjectSignalRDependencyResolver(IKernel kernel) 
        {
            if (kernel == null)
            {
                throw new ArgumentNullException("kernel");
            }

            _kernel = kernel;
        }

        public override object GetService(Type serviceType) 
        {
            return _kernel.TryGet(serviceType) ?? base.GetService(serviceType);
        }

        public override IEnumerable<object> GetServices(Type serviceType) 
        {
            return _kernel.GetAll(serviceType).Concat(base.GetServices(serviceType));
        }
    } 
```

然后我在类 NinjectWebCommon（由 SignalR nuget 提供）的方法 RegisterServices 中设置解析器，如下所示：

```
private static void RegisterServices(IKernel kernel)
{            
   RouteTable.Routes.MapHubs(new NinjectSignalRDependencyResolver(kernel));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:53:28.440

我跟着@TobiasNilsson 的回答，但我得到了这个错误：无法从'SignalR.NinjectSignalRDependencyResolver'转换为'Microsoft.AspNet.SignalR.HubConfiguration

```
private static void RegisterServices(IKernel kernel)
{
    GlobalHost.DependencyResolver = new NinjectSignalRDependencyResolver(kernel);
} 
```

然后在其他地方：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapHubs();//SignalR
    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

# wpf - 从 xaml 获取 RowIndex

> ID：13515733
> 
> 赞同：3
> 
> 时间：2012-11-22T15:20:42.560
> 
> 标签：wpf, datagrid

我有一个带有 DataGridTemplateColumns 的 DataGrid。在 TemplateColumn 中，我使用了一个工作正常的 DataTrigger。它从 DataGrid 父级检索项目计数。

```
<DataGridTemplateColumn>                                                         
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
             ...
             <!-- this works fine! -->
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor,
                AncestorType={x:Type DataGrid}}, Path=Items.Count}" Value="1">
                    ...
             </DataTrigger>
          </DataTemplate> 
```

是否可以检索放置模板的当前 RowIndex ？我认为可以绑定到当前的 DataGridRow。不支持“GetIndex()”的绑定路径，例如：

```
<DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, 
    AncestorType={x:Type DataGridRow}}, Path=GetIndex()}" Value="0"> <!-- error: GetIndex() --> 
```

有没有替代方案，可以`DataGridRow.GetIndex()`从 xaml 绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:16:23.900

您只能绑定到`Properties`对象的方法，而不能绑定到对象的方法。`IValueConverter`如果要绑定到方法，则需要使用 a -

```
public class MyConverter : DependencyObject, IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, 
                             System.Globalization.CultureInfo culture)
    {
        return (value as DataGridRow).GetIndex();
    }

    public object ConvertBack(object value, Type targetType, object parameter,
                               System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

并像这样绑定它-

```
<DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, 
                        AncestorType={x:Type DataGridRow}},
                        Converter={StaticResource MyConverter}}"
            Value="0"> 
```

# java - 检测字符串输入中的单词错误

> ID：13515736
> 
> 赞同：2
> 
> 时间：2012-11-22T15:20:56.813
> 
> 标签：java, string, swing

我正在尝试编写一个代码，该代码可以检测用户输入中与存储在程序中的字符串数组有关的错误。

假设程序包含“快速棕色狐狸跳过懒狗”

如果用户输入“The quick brown is name over Jumps the lazy”

程序告诉用户你犯了 5 个错误。但是对于上述用户输入，我的代码无法正常工作。我的代码缺少什么来检测此类错误。这是代码：

```
public void checkTextCompleted()
{
    String input= text.getText();
    int temp=array[0],mistakes=0;

    if(input.length()==data.length()) {
        text.setEditable(false);
        text.setFocusable(false);

        for(int j=0;j<dataWords;j++) {
            int x = input.indexOf(data.substring(array[j]-temp, array[j]-1));

            System.out.println(x);
            if(x != -1) {
                String subs = input.substring(x, input.length());

                if(data.contains(subs)) {
                    break;
                } else {
                    mistakes++;
                    if(j!=0)
                        temp=array[j-1];
                    else
                        temp=array[j];
                }
            }
            else
                mistakes++;
        }
        JOptionPane.showMessageDialog(null,"You have made "+mistakes+" mistakes" , "Typing Test Completed", JOptionPane.OK_OPTION);
    }
} 
```

array[] 包含程序内置 String(data) 中检测到空格的位置，dataWords 包含程序内置 String(data) 中的字数。用户输入存储在“输入”中

我的代码缺少什么来检测上述问题？

**注意：** 如果一个单词错了，后面的字符串是对的，则错误为1，否则将在同一主体上检测下一个错误。

![在此处输入图像描述](../Images/824b8b2068e4565e139248b0d64b7d63.png)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:46:45.140

你不能用这个简单的逻辑来缩小你的代码吗？

```
String[] expectedSentenceA = "The quick brown fox jumps over the lazy dog".split(" ");
String[] inputStringA = inputString.split(" ");
int diff=  expectedSentenceA.length-inputStringA.length;
if(diff>0) {
    System.out.println("You have missed " + diff + " word(s)..!!!");
} else if (diff < 0) {
    System.out.println("Found " + diff + " excess word(s)..!!!");
}else {
   ArrayList<String> mistakeWords= new ArrayList();
   for(int i=0;i<expectedSentenceA.length;i++) {
    if(!expectedSentenceA[i].equals(inputStringA[i])){
        mistakeWords.add(inputStringA[i]);
    }
   }
   JOptionPane.showMessageDialog(null,"Total Mistakes ["+mistakeWords.size()+"] are " + mistakeWords);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:28:42.733

我不了解您的所有代码，但是这样的解决方案有什么问题：

```
String[] expectedWords = "The quick brown fox".split(" ");
String[] inputWords = inputText.split(" ");
int mistakes = 0;
if (expectedWords.length != inputWords.length) {
    return;
}
for (int i = 0; i < expectedWords.length; i++) {
    if (!expectedWords[i].equals(inputWords[i])) {
        mistakes++;
    }
}
// Show number of mistakes. 
```

# c++ - C++11 中的可变参数模板特化

> ID：13515739
> 
> 赞同：7
> 
> 时间：2012-11-22T15:21:19.677
> 
> 标签：c++, templates, c++11, g++, clang++

它是否已经实现，因为这不能编译：（使用 gcc 4.7.2）

```
template <typename... Ts>
struct Foo {
    int foo() {
        return 0;
    }
};

template <>
struct Foo<int x, int y> {
    int foo() {
        return x * y;
    }
};

int main()
{
    Foo<2, 3> x;
    cout << x.foo() << endl; //should print 6
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T15:25:04.337

你犯了一些错误。主模板需要类型，而不是整数常量。您还尝试使用整数常量实例化模板，但您的部分特化使用类型。

这更接近：

```
#include <iostream>

template <int... Ts>
struct Foo {
    int foo() {
        return 0;
    }
};

template <>
struct Foo<3, 2> {
  const int x = 3;
  const int y = 2;

  int foo() {
    return x * y;
  }
};

int main()
{
    Foo<2, 3> x;
    std::cout << x.foo() << std::endl; //should print 6
} 
```

但这并不是我们真正想要的，对吧？它也很笨拙。

```
#include <iostream>

template<typename Acc, typename... Rest>
struct accum_help; // primary

template<typename Acc, typename F, typename... Rest>
struct accum_help<Acc, F, Rest...> {
  typedef typename accum_help<
    std::integral_constant<typename Acc::value_type, 
                           Acc::value * F::value>, Rest...
    >::type type;
};

template<typename Acc>
struct accum_help<Acc> {
  typedef Acc type;
};

// peek into the first argument to avoid summing empty sequences and
// get the right type
template<typename X, typename... Integrals>
struct accum {
  typedef typename accum_help<
    std::integral_constant<typename X::value_type, 1>, X, Integrals...
    >::type type;
};

int main()
{

  std::cout << accum< std::integral_constant<int, 2>, std::integral_constant<int, 3> >::type::value << std::endl; //should print 6
} 
```

一个更简单的仅处理 int 的变体：

```
template <int...>
struct accum2_help;

template <int Acc, int X, int... Rest> 
struct accum2_help<Acc, X, Rest...> {
  static const int value = accum2_help< Acc * X, Rest...>::value;
};

template <int Acc>
struct accum2_help<Acc> {
  static const int value = Acc;
};

// again don't accept empty packs
template <int T, int... Ts>
struct accum2 {
  static const int value = accum2_help<1, T, Ts...>::value;
}; 
```

# php - php换行的问题

> ID：13515745
> 
> 赞同：0
> 
> 时间：2012-11-22T15:21:43.433
> 
> 标签：php, newline

我有这个代码

```
if($hgroup['groupid'] == $row_groups['groupid']){
  $problem++;
  $hostname=DBfetch($cursor_gethost_again);
  $replace_macro=array('/{HOSTNAME}/','/{HOST.NAME}/');
  $problem_text=$problem_text.$trigger['description'];
  $problem_text=preg_replace($replace_macro,$hostname['name'],$problem_text);
  $problem_text=$problem_text."\r\n";
} 
```

它是循环生成的代码。任何人都可以帮助我如何制作那个愚蠢的换行符吗？我必须这样做，因为我正在修改一个代码。所以我想保持这种布局。
它不起作用。它将与文本一起打印。我也尝试 preg_replace 到`<br />`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T15:24:03.887

如果您尝试打印 HTML，则新行不是使用`\r\n`而是附加`<br/>`.

在评论中，您确认您正在尝试在浏览器中查看此内容。正如 Kolink 所说，浏览器会将空格折叠成空格，因此您会丢失新行信息。

如果您要将值输出到标准输出，例如控制台，那么`\r\n`就是解决方案。如果您正在处理要写入的文件，也是如此。

如果您想将其输出到标准输出然后在 HTML 中，我建议先用 填充它`\r\n`，输出您的变量，然后使用`str_replace`（[此处](http://ca2.php.net/manual/en/function.str-replace.php)的文档）将您的所有内容转换`\r\n`为`<br/>`：

```
$html_problem_text = str_replace('\r\n', '<br/>', $problem_text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T15:24:11.287

只是猜测一下，您是在浏览器中查看输出吗？因为浏览器将换行符（或任何空格）折叠成一个（水平）空格。

您需要使用`<br />`标签在浏览器中创建换行符，或者您可以使用`<pre>`或一些 CSS 来强制浏览器呈现换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:32:35.560

如果您以 HTML 格式打印：

您可以使用：

```
$problem_text=$problem_text."<br/>"; 
```

或者保留`$problem_text=$problem_text."\r\n";`如果你想要但是在输出时，做：

```
nl2br($myvariable); 
```

这个函数基本上是“新行到 br”，它替换新行，`<br/>`所以你不需要`"<br/>"`在你的变量中有。

另外，为了您的信息，您可以使用`".="`这意味着“将此文本连接到变量：

```
$problem_text=$problem_text."\r\n";
$problem_text .= "\r\n"; 
```

它们的含义相同，按照相同的规则，还有其他运算符，例如 += 或 -= 用于算术运算（.= 仅用于连接字符串）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T15:29:25.473

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

```
\n = CR (Carriage Return) // new line character in Unix
\r = LF (Line Feed) // new line character in Mac OS
\n\r = CR + LF // new line character in Windows 
```

# android - Android TabSpec 文本填充

> ID：13515747
> 
> 赞同：0
> 
> 时间：2012-11-22T15:21:50.857
> 
> 标签：android, tabs, padding

我需要在 tabWidget 元素上添加一些填充。我试图在图像下方的文本上添加填充。

我正在尝试这个：

```
 for (int i = 0; i < tabHost.getChildCount(); i++) {
        tabHost.getChildAt(i).setPadding(2, 2, 2, 2);

    } 
```

但似乎什么都没有发生。

这是xml：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/LinearLayout01"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </TabWidget>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>
</LinearLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:44:05.137

来自类似问题的答案，在[此处](https://stackoverflow.com/questions/2804688/how-to-change-the-color-of-the-tabs-indicator-text-in-android)找到。

```
final TextView tv = (TextView) tabWidget.getChildAt(i).findViewById(android.R.id.title);        
tv.setPadding(2, 2, 2, 2); 
```

# git - Git post-update Hook 问题 - 有时 master 没有得到更新

> ID：13515748
> 
> 赞同：1
> 
> 时间：2012-11-22T15:21:54.467
> 
> 标签：git, githooks

这是我目前使用的设置：

> HOOK 1 我们将在 HUB 存储库上使用更新后挂钩。因此，当任何其他克隆向 HUB 推送时，HOOK get 被激活，它将根据 HEAD 指针位置访问相应的 WORKING DIRECTORY，无论是在 development 还是 master 上，它都会从那里：从集线器拉到开发分支或从集线器拉到主分支。

在`~/private/repos/projectname_hub.git/hooks`创建一个名为的文件并将`post-update` `pico post-update`以下内容放入其中：

```
#!/bin/sh

echo
echo "**** Pulling changes into Dev [Hub's post-update hook]"
echo

case " $1 " in
*'refs/heads/dev'*)
        cd /home/user/www/dev/ || exit
        unset GIT_DIR
        git pull hub dev
        echo
        echo "Dev was pulled"
        echo
        ;;
esac

case " $1 " in
*'refs/heads/master'*)
        cd /home/user/www/www/ || exit
        unset GIT_DIR
        git pull hub master
        echo
        echo "Master was pulled"
        echo
        ;;
esac

exec git-update-server-info 
```

> HOOK 2 为了防止历史冲突，如果我们出于某种原因直接在生产服务器上提交，每次主要主提交发生时，我们都会将这些提交的更改推送到 HUB。

在`~/www/www/.git/hooks`创建一个名为`post-commit` `pico post-commit`

```
#!/bin/sh

echo
echo "**** pushing changes to Hub [Prime's post-commit hook]"
echo

git push hub 
```

使用上面的设置，有时，我无法准确说明何时，我们可能已经将东西推送给主控，它说“一切都是最新的”，但事实并非如此。

显然，所有添加和提交的文件。

因此，经过一些帮助，我们最终发现问题出在 Hook 设置上。

我被告知不要使用`post-update`钩子：`git pull hub master`我可以使用：

```
git fetch hub && git reset --hard hub/master 
```

我的问题是：谁能提供必要的解释为什么`git pull hub dev`有效，`git pull hub master`有时无效，这条线将如何帮助我？

是的，我对 git 的使用很陌生，我不希望在不理解的情况下盲目复制粘贴上面的内容。如果有人可以删除几行，那将不胜感激。

更新：当我这样做时`git branch -a`，我得到：

```
* master
  remotes/hub/dev
  remotes/hub/master 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:47:12.857

```
git fetch hub && git reset --hard hub/master 
```

仅当您根本不开发时，这才是另一种选择`/home/user/www/www/`：它重置`master HEAD`为`www/www`从 获取的那个`hub`。
但对你来说不是这样，因为你有一个 post-commit`www/www`可以推回。

> 我们可能已经把东西推给了主人，它说“一切都是最新的”，但事实并非如此。

这通常是因为[DETACHED HEAD](https://stackoverflow.com/a/13470810/6309)情况（您在没有 HEAD 的分支中提交）。检查`git branch -a`何时发生，并确保您在分支中。

# mysql - 如何从 UTC 时间获取 MySQL 中的 Unix 时间戳？

> ID：13515752
> 
> 赞同：19
> 
> 时间：2012-11-22T15:22:10.993
> 
> 标签：mysql, datetime

如果我这样做`unix_timestamp(some_date)`，它会在内部转换`some_date`为 UTC，而`some_date`已经是 UTC。有没有办法获得当前的 Unix 时间戳？

编辑：我需要 UTC 时间的 Unix 时间戳。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-22T15:33:11.250

您应该能够首先使用以下方法将其从 UTC 转换为本地时区[`CONVERT_TZ`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)：

```
UNIX_TIMESTAMP(CONVERT_TZ(some_date, '+00:00', @@global.time_zone)) 
```

另见：[10.6。MySQL 服务器时区支持](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-09T19:26:54.283

以下是其他几种方法：

```
SELECT UNIX_TIMESTAMP(myDate)+UNIX_TIMESTAMP(NOW())-UNIX_TIMESTAMP(UTC_TIMESTAMP()) 
FROM myTable 
```

```
SELECT UNIX_TIMESTAMP(myDate)-TIMESTAMPDIFF(SECOND, NOW(), UTC_TIMESTAMP()) 
FROM myTable 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-05T17:36:42.770

这对我来说很好：

```
UNIX_TIMESTAMP(CONVERT_TZ("some_date", '+00:00', 'SYSTEM')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T16:50:38.120

您可以从 UTC 日期时间值获取 MySQL 中的 UNIX 时间戳，如下所示：

```
SELECT 
UNIX_TIMESTAMP(CONVERT_TZ("some_date", '+00:00', @@session.time_zone)) 
FROM `table_name` 
```

我在这里做了一个备忘单：[MySQL 是否应该将其时区设置为 UTC？](https://stackoverflow.com/questions/19023978/should-mysql-have-its-timezone-set-to-utc/19075291#19075291)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T18:55:50.027

因为两个原因：

1.  MySQL 的内置函数`UNIX_TIMESTAMP`并采用我通常不希望/能够更改`FROM_UNIXTIME`的存储时区，以及`@@global.time_zone`
2.  DST 更改时的内置行为（如果全球时区使用 DST）在某些用例中会导致信息丢失，

我首选的解决方案是编写自己的函数，将其转换为 Unix 时间戳并返回：

```
DELIMITER $$
CREATE FUNCTION UnixTimestamp(utcstamp DATETIME) RETURNS BIGINT UNSIGNED DETERMINISTIC
BEGIN
 DECLARE y INT UNSIGNED;
 SET y = YEAR(utcstamp);
 RETURN (y - 1970)          * 365 * 24 * 60 * 60 -- total seconds in full years since 1970
      + FLOOR((y - 1969) / 4)     * 24 * 60 * 60 -- add to that total seconds in extra days for each leap year
      - FLOOR((y - 1901) / 100)   * 24 * 60 * 60 -- subtract seconds for each day in a year that is divisible by 100 because those are not leap years
      + FLOOR((y - 1601) / 400)   * 24 * 60 * 60 -- but add back each day in a leap year that is divisible by 400 because those are leap years
      + (DAYOFYEAR(utcstamp) - 1) * 24 * 60 * 60 -- total seconds in full days since beginning of year
      + HOUR(utcstamp)                 * 60 * 60 -- total seconds for each full hour passed since beginning of day
      + MINUTE(utcstamp)                    * 60 -- total seconds for each full minute since last full hour
      + SECOND(utcstamp);                        -- seconds since last full minute
END$$
DELIMITER ;

DELIMITER $$
CREATE FUNCTION FromUnixtime(utcstamp BIGINT UNSIGNED) RETURNS DATETIME DETERMINISTIC
BEGIN
 DECLARE s INT UNSIGNED;
 DECLARE d INT UNSIGNED;
 DECLARE y INT UNSIGNED;
 IF utcstamp = 0 THEN RETURN '1970-01-01 00:00:00';
 END IF;
 SET s = utcstamp % (24 * 60 * 60);
 SET d = FLOOR(utcstamp / (24 * 60 * 60)) + 365 * 370 + 90;         -- days since 1600-01-01, last full leap year period
 SET y = 1600 + FLOOR(d / (400 * 365 + 97)) * 400;                  -- year is now 1600 + 400 * n, where n >= 0
 SET d = d - (400 * 365 + 97) * FLOOR(d / (400 * 365 + 97));        -- days since 1600 + 400 * n, less than 400 years
 IF d > 0 THEN
  SET y = y + FLOOR((d - 1) / (100 * 365 + 24)) * 100;              -- year is now 1600 + 400 * n + 100 * m, where 4 > m >= 0
  SET d = d - (100 * 365 + 24) * FLOOR((d - 1) / (100 * 365 + 24)); -- days since 1600 + 400 * n + 100 * m, less than 100 years
  SET y = y + FLOOR(d / (4 * 365 + 1)) * 4;                         -- year is now 1600 + 400 * n + 100 * m + 4 * l, where 25 > l >= 0
  SET d = d - (4 * 365 + 1) * FLOOR(d / (4 * 365 + 1));             -- days since 1600 + 400 * n + 100 * m + 4 * l, less than 4 years
  IF d > 0 THEN
   SET y = y + FLOOR(d / 365);                                      -- year is now 1600 + 400 * n + 100 * m + 4 * l + k, where 4 > k >= 0
   SET d = d - 365 * FLOOR(d / 365);                                -- days since 1600 + 400 * n + 100 * m + 4 * l + k, less than a year
   IF (y % 400 = 0 OR (y % 4 = 0 AND y % 100 <> 0)) THEN            -- if it's a leap year
    IF d > 0 THEN                                                   -- and if it's not day 0
     SET d = d + 1;                                                 -- add a day we dropped in a previous step
    ELSEIF d = 0 THEN                                               -- otherwise if it's day 0
     SET d = 365;                                                   -- then it's actually New Year's Eve
     SET y = y - 1;                                                 -- on the year before
    END IF;
   END IF;
  ELSE SET d = d + 1;
  END IF;
 ELSE SET d = d + 1;
 END IF;
 RETURN CONCAT(MAKEDATE(y, d), ' ', LPAD(FLOOR(s / 3600), 2, 0), ':', LPAD(FLOOR((s - FLOOR(s / 3600) * 3600) / 60), 2, 0), ':', LPAD(s % 60, 2, 0));
END$$
DELIMITER ; 
```

您可以通过执行以下命令来检查这些功能：

```
SELECT UTC_TIMESTAMP() AS CurrentTime, FromUnixtime(UnixTimestamp(UTC_TIMESTAMP())) AS Result; 
```

`CurrentTime`并且`Result`应该是一样的。

# css - 图像元素不会到达容器的边缘，因此与页眉和页脚图像元素对齐

> ID：13515753
> 
> 赞同：1
> 
> 时间：2012-11-22T15:22:22.497
> 
> 标签：css

为什么主要内容中的主要图像元素不与容器的边缘相遇。出于某种原因，我只是无法弄清楚为什么它不会伸展。

有什么想法吗？

页面链接 - [http://www.carpenter-and-walrus.co.uk/sympathy.html](http://www.carpenter-and-walrus.co.uk/sympathy.html)

元素-葬礼-花圈-向日葵-c.gif

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:38:44.643

`<img>`除非您明确设置它们的宽度和/或高度，否则元素不会拉伸。您的图像宽 970 像素，除非您手动将其设置为其他值，否则它将保持这种状态。

此外，您的标题和主图像大于其容器可以容纳的大小。容器的可用宽度（通常）是（通常）`width - padding`，所以如果你有一个 1000px 宽的容器，两边都有 20px 的填充，你将只有 960px 可用于内容。

如果您需要快速而肮脏的修复，`width: 1000px`请为主图像设置（并调整其高度以保持纵横比）并为标题和主图像设置一些负值`margin-left`以将它们偏移到您想要的位置。

# regex - Mod Rewrite 导致内部服务器错误

> ID：13515755
> 
> 赞同：1
> 
> 时间：2012-11-22T15:22:31.970
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

我刚刚使用了来自 mod 重写生成器的代码，但是如果我尝试单击引用 products.php 的链接，则会导致内部服务器错误：

```
RewriteEngine On
RewriteRule ^([^/]*)\.php$ /index.php?content=$1 [L] 
```

请帮忙，我什至不知道在这里做什么。

编辑：我还有最后一个问题。网址现在看起来像这样：

[http://www.exampledomain.com/examplecat/](http://www.exampledomain.com/examplecat/)

但我想附加这样的参数

[http://www.exampledomain.com/examplecat/?id=5&sortcol=model&sortdirection=asc](http://www.exampledomain.com/examplecat/?id=5&sortcol=model&sortdirection=asc)

目前，我上面的重写规则似乎根本没有附加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:54:07.040

应该是

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !rewrited
RewriteRule ^([^/]*)\.php$ /index.php?content=$1&rewrited=1 [L,QSA] 
```

# emacs - 用箭头键移动光标时取消选择emacs中的鼠标选择

> ID：13515756
> 
> 赞同：1
> 
> 时间：2012-11-22T15:22:36.470
> 
> 标签：emacs, textselection

自上次更新以来，我的 emacs 表现出以下行为：我通过将鼠标拖到某些文本上来选择它。然后我用箭头键移动光标，所选区域被修改，就好像我在按住 shift 键一样。我觉得这有点烦人，因为有时我在单击某处时会不小心选择了一个字符。然后当我用箭头键移动光标时，开始输入并删除文本区域。我希望 emacs 在我使用箭头键时取消选择该区域，就像我使用 shift-箭头键方法选择时一样。有没有让我改变这个的设置？我正在使用 GNU Emacs 23.3.1。

# mysql - 从 nextgen 中的多个画廊 ID 获取结果

> ID：13515757
> 
> 赞同：0
> 
> 时间：2012-11-22T15:22:41.150
> 
> 标签：mysql, sql, wordpress, nextgen-gallery

我认为这更像是一个与 SQL 相关的问题，而不是一个与 WP 相关的问题:::

```
$result = $wpdb->get_results( " SELECT *
from wp_ngg_gallery, wp_ngg_pictures
where wp_ngg_pictures.galleryid = wp_ngg_gallery.gid
and wp_ngg_gallery.gid = 10
order by wp_ngg_pictures.imagedate 
DESC " ); 
```

如果我只从 Gallery ID = 10 获取单个画廊 id 的数据（例如，示例中的 10），上面的查询可以正常工作 ::: 我想从多个画廊 ID 中检索数据我怎么能做到这一点（例如 10,8,4 ) :::

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:36:53.063

use `IN`

```
wp_ngg_gallery.gid IN (10,8,4 ) 
```

full query using `ANSI SQL-92` syntax

```
SELECT  *
FROM    wp_ngg_gallery
        INNER JOIN wp_ngg_pictures
            ON wp_ngg_pictures.galleryid = wp_ngg_gallery.gid
WHERE   wp_ngg_gallery.gid IN (10,8,4)
ORDER BY wp_ngg_pictures.imagedate DESC 
```

# mysql - 我怎样才能提高嵌套的mysql查询速度，比如这个？

> ID：13515758
> 
> 赞同：1
> 
> 时间：2012-11-22T15:22:42.620
> 
> 标签：mysql

在执行此类查询时，我在从 mysql 服务器检索快速响应时遇到了一些困难：

```
select distinct(products.id) as product_id,products.title as product_name, (select count(id) from stock where stock.available='0' and stock.product_id=products.id) as none,
(select count(id) from stock where stock.available='1' and stock.product_id=products.id) as available,
(select count(id) from stock where stock.available='2' and stock.product_id=products.id) as staged,
(select count(id) from stock where stock.available='3' and stock.product_id=products.id) as departed,
(select count(id) from stock where stock.available='4' and stock.product_id=products.id) as delivered
from products,stock where products.id=stock.product_id; 
```

我想知道是否有任何其他查询方法可以提供更快的响应。谢谢:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:35:25.127

Something like this:

```
SELECT
  P.id as product_id,
  P.title as product_name,
  SUM(CASE WHEN S.available = 0 THEN 1 ELSE 0 END) as none,
  SUM(CASE WHEN S.available = 1 THEN 1 ELSE 0 END) as available,
  SUM(CASE WHEN S.available = 2 THEN 1 ELSE 0 END) as staged,
  SUM(CASE WHEN S.available = 3 THEN 1 ELSE 0 END) as departed,
  SUM(CASE WHEN S.available = 4 THEN 1 ELSE 0 END) as delivered 
FROM products P
      JOIN stock S
          ON P.id = S.product_id
    GROUP BY P.id,
             P.title 
```

# html - 悬停时更改块链接的背景颜色

> ID：13515759
> 
> 赞同：5
> 
> 时间：2012-11-22T15:22:44.807
> 
> 标签：html, css, hover, background-color

我正在我的网页上创建一些链接，并且我想要产生效果，例如背景的变化或文本的大小似乎长大了，每当我将鼠标悬停在这些链接上时。链接显示为`blocks`.

* * *

*html部分*

```
<div>
   <a class="leftimagelinks" href="#">Submit a paper</a><br>
   <a class="leftimagelinks" href="#">Get the brochure</a><br>
   <a class="leftimagelinks" href="#">Housing and travel</a>
</div> 
```

*CSS部分*

```
.leftimagelinks {
margin: auto;
display: block;
width: 190px;
height: 25px;
border-radius: 8px;
text-align: center;
padding: 4px;
color: yellow;
background-color: black;
background-color: #32CD32;
}

.leftimagelinks a:hover{
background-color: red;
} 
```

* * *

但即使在上述内容之后，每当我将鼠标悬停在链接上时，也没有任何变化。这里有什么错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T15:24:36.887

CSS 选择器`.leftimageslinks a:hover`尝试选择“.leftimageslinks”内的链接。相反，试试这个：

```
.leftimagelinks:hover{
  background-color: red;
} 
```

[http://jsfiddle.net/BGJJn/](http://jsfiddle.net/BGJJn/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T15:24:57.930

利用

```
.leftimagelinks:hover 
```

您使用了错误的选择器。

# minify - 扩展 yeoman 构建过程以缩小 json

> ID：13515760
> 
> 赞同：1
> 
> 时间：2012-11-22T15:22:48.797
> 
> 标签：minify, gruntjs, yeoman

我正在寻找一种方法来扩展 yeoman 的构建过程，用一些东西来缩小 json 文件......我找到了一个可以缩小 json 文件但它不导出任何功能的 npm 包：/任何知道如何集成的人进入 yeoman 构建过程？

[https://npmjs.org/package/json-minify](https://npmjs.org/package/json-minify)

亲切的问候，

大安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T07:12:33.177

这是在 node.js 中缩小 JSON 的一种方法：`JSON.stringify(JSON.parse(jsonStr));`

我拼凑了一个 grunt-minjson 插件。使用 安装`npm install grunt-minjson --save-dev`，添加`grunt.loadNpmTasks('grunt-minjson');`到您的 Gruntfile 并进行如下配置：

```
grunt.initConfig({
  minjson: {
    compile: {
      files: {
        'all.min.json': ['jsonfiles/*.json']
      }
    }
  }
}); 
```

这是该项目的链接：[https ://github.com/shama/grunt-minjson](https://github.com/shama/grunt-minjson)

# java - JAVA中的符号数学实现

> ID：13515761
> 
> 赞同：0
> 
> 时间：2012-11-22T15:22:49.567
> 
> 标签：java, wolfram-mathematica, jlink

我正在尝试构建一个表达式解析器来评估数学表达式的值。然而，问题在于某些类型的表达式，其计算结果为无理数。

让我们举一个例子，例如`(√2)²` 这应该评估为。`2`但是由于程序编码的逻辑，它返回一个小数点数。

首先`√2`评估哪个等于`1.4142135`，然后结果平方给出`1.9999998`

目前，所能做的就是将表达式通过[JLink发送到](http://reference.wolfram.com/mathematica/JLink/guide/JavaInterface.html)[Mathematica](http://en.wikipedia.org/wiki/Mathematica)，然后使用结果。但是，这需要第三方软件的帮助。

我想知道这整个事情是否可以在java中实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:35:03.537

Yes, you can certainly implement an expression parser in Java. I think your fundamental error is not in Java programming but in program design.

You should not be evaluating surds until as late as possible. Instead you should be evaluating expressions like `(sqrt(n))^2` to `sqrt(n)*sqrt(n)` and `sqrt(n)*sqrt(n)` to `n`. Only then should you consider converting `n` into an equivalent floating-point number.

What you have identified as an error in your approach is a feature of floating-point arithmetic which you will struggle to fight against. A better strategy is to work around it by implementing symbolic operations on symbolic expressions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:32:25.607

```
Double value = new Double(2);
Double power = new Double(2);
Double result = Math.pow(value, power);
result = Math.sqrt(result);
System.out.print(result); 
```

# css - 在“多选”下拉框中更改所选项目的背景颜色？

> ID：13515767
> 
> 赞同：8
> 
> 时间：2012-11-22T15:23:17.080
> 
> 标签：css, multi-select, html.dropdownlistfor

我想为多选下拉框中的选定项目赋予黄色。默认情况下，它在选择后具有灰色背景，如何在`HTML`,中执行此操作`CSS`。

这个问题是关于**多**选的，但对于单选参考（相关但不重复）：[如何将背景颜色应用于选定的选项？](https://stackoverflow.com/questions/18091866)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-14T13:24:32.180

我们可以简单地在下面的 CSS 的帮助下完成：

```
select option:checked{
  background: #1aab8e -webkit-linear-gradient(bottom, #1aab8e 0%, #1aab8e 100%);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-07T09:58:14.220

```
<style>
     .select2-container--default .select2-results__option[aria-selected=true] {
        background-color: inherit;
        color: lightgray;
    }
</style> 
```

在块内添加您自己的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-07T05:50:53.580

我们可以使用 JS 来选择 DOM。

```
$('select').change(function() {
    $('option').css('background', 'none');
    $('option:selected').css('backgroundColor', 'red');
}).change()

<select>
    <option>1111111</option>
    <option>222222222</option>
    <option>33333333</option>
    <option>44444444</option>
</select> 
```

演示：http: [//jsfiddle.net/TxbVt/1/](http://jsfiddle.net/TxbVt/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:39:00.930

以下应该可以工作*（对于允许样式选项标签的浏览器）*，但是在大多数情况下默认的选择样式将被覆盖。但是，您也许可以找到一种禁用此功能的方法：

*   [http://jsfiddle.net/DEDX7/](http://jsfiddle.net/DEDX7/)
*   [http://jsfiddle.net/DEDX7/1/](http://jsfiddle.net/DEDX7/1/)

*css*

```
select option.selected {
  font-weight: bold;
  color: red;
} 
```

*javascript*

```
function highlight_options(field){
  var i,c;
  for(i in field.options){
    (c=field.options[i]).className=c.selected?'selected':'';
  }
} 
```

*标记*

```
<select onchange="highlight_options(this)" multiple="multiple">
  <option>One</option>
  <option>Two</option>
  <option>Three</option>
</select> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-07-21T03:41:59.287

纯 CSS 在这里会有所帮助：

```
option:checked 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-11-22T15:26:04.633

你不能。该`<option>`元素不接受 CSS 样式。

您可以使用基于 JavaScript 的替代方案。有许多`<select>`可用的替换脚本。

# jquery - rails - JS 回调未使用远程 JSON 表单执行（jQuery UJS）

> ID：13515768
> 
> 赞同：3
> 
> 时间：2012-11-22T15:23:17.983
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, ujs

在 .erb 视图中考虑以下形式：

```
<%= form_tag(harvester_next_url, :method => "post", :remote => true, "data-type" => :json, :id => "answerForm") do %>
<div id="dynamicFormContent"></div>
<% end %> 
```

在某些情况下，我想在`next`方法 中发出一个 JS 回调`render :js => "window.location = '#{definitions_path}'"`

但是，这不会在浏览器中执行。响应在正文中有“window.location ...”，并且`content-type`设置为`text/javascript`，请求`accept`也有`text/javascript`。

Rails 版本是 3.2.8。

一些附加信息：我不想将表单操作切换为使用 JS 格式，因为 JS 回调代码只是来自控制器的可能响应之一。另一次，我需要一些 JSON 来处理。

**问题：是否有可能在不使用客户端重定向**（即从 JSON 响应中获取 window.location）等的情况下使其工作？AFAIK，这适用于非远程表单。

**ADD**它`status = "parsererror"`在 XHR 完成时结束。显然，这是因为 jQuery 尝试将响应解析为 JSON，即使它是`text/javascript`. 这个问题仍然悬而未决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:33:55.763

最后我让它工作了。但是，我意识到按原样执行传入的 JS*通常*是一种肮脏的方法（你们都这么告诉我）。但是，只要我的问题是关于那种肮脏的方法，如果你真的需要它，我会发布一个如何使它工作的想法。

鉴于我们`parsererror`在提供纯 JS 的情况下具有状态，我们可以：

```
$('#answerForm').on('ajax:error',
  function(e, data, status, xhr)
  {
    $.globalEval(data.responseText);
  }
); 
```

感谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:54:18.697

监听回调并在客户端进行重定向：

```
$('#answerForm').on('ajax:success', function(data) {
  if (data.url) {
    window.location = data.url;
  } else {
    // do something else...
  }
})

# -- controller code
render json: {url: definitions_path} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:08:44.250

如果您要求 json，它不会立即呈现为 javascript，这意味着您需要从 json 响应中获取 url，例如`'next-url'`密钥。您可以在 ajax 回调中执行此操作。

这里有一些阅读应该可以使您尝试做的事情变得容易：

Rails ujs 教程（带有回调）：[http ://www.alfajango.com/blog/rails-3-remote-links-and-forms/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)

如何以 RESTfully 方式响应 json：[Rails 3：在 Rails 中使用 JSON 响应 REST-ful 操作的正确方法是什么？](https://stackoverflow.com/questions/2572571/rails-3-what-is-the-proper-way-to-respond-to-rest-ful-actions-with-json-in-rail)

还要检测 xhr：[Rails 检测请求是否为 AJAX](https://stackoverflow.com/questions/8220701/rails-detect-if-request-was-ajax)

# spring-mvc - 类上的@Secured 注解不适用于父类方法

> ID：13515771
> 
> 赞同：3
> 
> 时间：2012-11-22T15:23:21.697
> 
> 标签：spring-mvc, spring-security, aop

我有一个带有一些共享`@RequestMapping`方法的抽象类（父类），并且有一些`@Controller`实现它的类（子类）。

我在类级别注释了子类`@Secured`，但父类方法不受此保护。（即AOP拦截器只考虑子类上的方法，不考虑父类）。

不幸的是，每个子类都需要由不同的角色保护，因此不可能用一个共同的`@Secured`限制来注释父类。可以覆盖父类中的所有方法，以便它们受到保护，但我想避免这种丑陋的解决方法。

因此我想知道有什么我可以覆盖的（例如拦截器、建议或元数据提供者，以便类层次结构中的任何方法都可以观察`@Secured`目标类上的注释）？

附加信息：

似乎注释解析是在 [org.springframework.security.access.method.AbstractFallbackMethodSecurityMetadataSource](https://github.com/SpringSource/spring-security/blob/master/core/src/main/java/org/springframework/security/access/method/AbstractFallbackMethodSecurityMetadataSource.java)`.getAttributes(Method, Class<?>)`中实现的，实际上它只查看了方法的声明类（在我的例子中是父类）。但是，我对代理编程不太熟悉，所以欢迎任何关于如何安全地实现我想要的更改的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:08:51.047

看来你可以简单地`SecuredAnnotationSecurityMetadataSource`用类似的东西覆盖

```
@Override
public Collection<ConfigAttribute> getAttributes(Method method, Class<?> targetClass) {
    Collection<ConfigAttribute> out = super.getAttributes(method, targetClass);

    if (out == null || out.isEmpty()) {
        out = findAttributes(targetClass);
        if (out == null) out = Collections.emptyList();
    }

    return out;
} 
```

# c# - 在 asp.net 中打开 Word 文件时应用程序没有响应

> ID：13515773
> 
> 赞同：4
> 
> 时间：2012-11-22T15:23:35.753
> 
> 标签：c#, asp.net, .net, c#-4.0, office-interop

我想打开一个 docx 文件，然后使用 Microsoft.Office.Interop.Word 包将其转换为 asp.net 中的 pdf 文件。

这是我用asp按钮单击事件编写的代码：

```
object fileFormat = Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatPDF;
                        Object missing = Type.Missing;
                        object saveName = strURL.Replace(".docx", ".pdf");
                        object openName = docPath + "\\T4.docx";

                    Microsoft.Office.Interop.Word.Application wdApp = new Microsoft.Office.Interop.Word.Application();
                    Microsoft.Office.Interop.Word.Document doc = wdApp.Documents.Open(openName,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing);
doc.SaveAs(saveName,fileFormat,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing,missing);
 doc.Close(ref missing, ref missing, ref missing); 
```

但是在执行时它在**wdApp.Documents.Open()**行上有一些麻烦。

浏览器符号似乎总是在加载。

我不知道这个错误的原因是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:04:27.803

Microsoft 不支持在服务器环境中自动化 Office 应用程序，[此知识库文章](http://support.microsoft.com/kb/257757)解释了如果您尝试它可能会出现的一些潜在问题。

我建议您寻找第三方组件，例如 Aspose。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:07:17.730

当 Word 试图向用户显示对话框时，可能会发生这种情况。互操作不够聪明，无法抑制所有这些对话框。尝试以下操作：

1) 登录服务器并手动打开 MS Word。可能有某种对话框需要用户确认（例如第一次运行 Word 时显示的许可对话框）。一旦您手动通过这些对话框，它们将不再是互操作的问题。（也可以尝试打开其中一份文件。也许问题出在文件本身上。）

2) 在您的代码中尽可能多地抑制对话框。我知道 2 个这样的地方（DisplayAlerts 和 NoEncodingDialog）。

```
var word = new Word.Application();
word.DisplayAlerts = Word.WdAlertLevel.wdAlertsNone;

Word.Documents documents = word.Documents;
documents.Open(openName, NoEncodingDialog: true); 
```

附带说明，但非常重要：为了避免内存泄漏，您需要非常小心如何引用和处置这些 COM 对象。遵循[此答案](https://stackoverflow.com/a/159419/65775)中的建议。如果这样做，您可能会成功地使用与 ASP.NET 的互操作。（多年来，我有一台服务器正在做你想做的事——使用 Word 互操作将 .docx 转换为 .pdf——即使在重负载下它也能正常工作，但这只是因为我正确处理了每一个COM 对象引用。）

# javascript - jquery .each 进行两个循环

> ID：13515776
> 
> 赞同：-1
> 
> 时间：2012-11-22T15:23:46.110
> 
> 标签：javascript, jquery

这就是问题所在：我有一个用链接填充列表的函数，但是 $.each 函数通过 linkList 对象进行两个循环并填充容器两次（2 * 2 = 4 个项目而不是 2）有人可以解释为什么吗？

这是链接列表：

```
var linkList = {
    link1:["Title","Source","http://google.com","file.pdf"],
    link2:["Title2","Source2","http://google.com","file.pdf"]
}; 
```

这是功能：

```
function injectLinks(){

    $.each(linkList, function(i,item) {

        var title = item[0];
        var source = item[2];
        var extern = item[3];

        $('#linkListView').append('\
                <li>\
                    <a rel="external" href="'+extern+'">\
                            <h3>'+title+'</h3><p>'+source+'</p>\
                    </a>\
                </li>\
            ');
        });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:05:46.533

Found my problem, actually the populating function was called inside of a $document.ready function which was called once DOM is ready and another time after the populating function finished its work (DOM manipulation calls the document ready function) that's why I had double population. Thanks for your help.

So I used this technique:

```
var pageInitialized = false;

$(function(){
    if(pageInitialized) return;
    pageInitialized = true;
    //do things
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:41:42.723

我刚刚浏览了您的代码，发现实际上它循环了两次，并且它仅用两个项目填充容器，但是由于您`<h3>`在`<li>`.

这是**[jsFiddle](http://jsfiddle.net/fRNtq/2/)**修改后的代码。

# iphone - NSDate 和 NSDateFormatter

> ID：13515778
> 
> 赞同：0
> 
> 时间：2012-11-22T15:23:55.037
> 
> 标签：iphone, objective-c

2012-10-31T21:38:00+05:30

我已经为 iPhone 实现了一个日历应用程序，其中我有一个字符串格式的日期（例如“2012-10-31T21:38:00+05:30”）。

我想将其转换为 NSDate。

但是我尝试了很多都没有成功。

所以我想将此日期格式转换为“MM DD YYYY”。

有谁能够帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:26:54.897

使用此功能

```
-(NSDate*)mfDateFromDotNetJSONString:(NSString *)string
{
    static NSRegularExpression *dateRegEx = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        dateRegEx = [[NSRegularExpression alloc] initWithPattern:@"^\\/date\\((-?\\d++)(?:([+-])(\\d{2})(\\d{2}))?\\)\\/$" options:NSRegularExpressionCaseInsensitive error:nil];
    });
    NSTextCheckingResult *regexResult = [dateRegEx firstMatchInString:string options:0 range:NSMakeRange(0, [string length])];

    if (regexResult)
    {
        // milliseconds
        NSTimeInterval seconds = [[string substringWithRange:[regexResult rangeAtIndex:1]] doubleValue] / 1000.0;
        // timezone offset
        if ([regexResult rangeAtIndex:2].location != NSNotFound) {
            NSString *sign = [string substringWithRange:[regexResult rangeAtIndex:2]];
            // hours
            seconds += [[NSString stringWithFormat:@"%@%@", sign, [string substringWithRange:[regexResult rangeAtIndex:3]]] doubleValue] * 60.0 * 60.0;
            // minutes
            seconds += [[NSString stringWithFormat:@"%@%@", sign, [string substringWithRange:[regexResult rangeAtIndex:4]]] doubleValue] * 60.0;
        }

        return [NSDate dateWithTimeIntervalSince1970:seconds];
    }
    return nil;
} 
```

希望对你有帮助！

# ruby-on-rails - 以“-”（破折号）开头的电子邮件问题

> ID：13515781
> 
> 赞同：11
> 
> 时间：2012-11-22T15:24:04.017
> 
> 标签：ruby-on-rails, actionmailer

我们有 Ruby On Rails 应用程序和一些电子邮件订阅。它具有从 ActionMailer 继承的邮件程序类：

```
class UserMailer < ActionMailer::Base
...
end 
```

一切都好，除了一件事——一些用户的电子邮件地址以“-”开头。当我尝试向“-user@mailinator.com”发送电子邮件时出现错误：

```
sendmail: invalid option -- u
sendmail: invalid option -- s
sendmail: invalid option -- u
sendmail: fatal: usage: sendmail [options] 
```

我怎样才能为 ActionMailer 逃脱这个角色（也许还有一些类似的角色）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-20T21:57:01.380

URI.escape 方法虽然已被弃用，但确实需要第二个参数，让您可以像这样标记不安全的内容

```
URI.escape("-user@mailinator.com", '-')
=> "%2Duser@mailinator.com" 
```

替换 URI.escape 的 CGI 转义似乎没有相同的功能，但对于像这样的单个情况，它可能会起作用。

# forms - Symfony2 形式选择 - 对象数组（未映射实体）

> ID：13515791
> 
> 赞同：1
> 
> 时间：2012-11-22T15:24:54.507
> 
> 标签：forms, symfony, twig

我有一个对象数组：

```
[0] ProductObject
         Title
         Image
         Link

[1] ProductObject
         Title
         Image
         Link 
```

等等

我可以将这些对象很好地传递给我的表单：

```
public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add(
                'products',
                'choice',
                array(
                        'choices'   => $productsArray,
                        'multiple'  => false,
                        'required' => false
                )
        );

    } 
```

然后在模板中：

```
 {{ form_label(form.products, 'products') }}
            {{ form_errors(form.products) }}
            {{ form_widget(form.products) }}

            {{ form_rest(form) }} 
```

现在，正如预期的那样，表单呈现如下：

```
<optgroup label="0">
    <option value="id">174</option>
    <option value="title">A Bag Of Frogs</option>
    <option value="image">Image</option>
    <option value="link">http://www.myshoppe.com</option>
</optgroup> 
```

我只希望在下拉列表中有标题，但我希望在用户选择产品后立即使用 javascript 来使用图像标题和链接填充另一个 div 中的图像和链接。

所以，问题是“如何在 Twig 中隐藏对象属性？”

或者

这很荒谬吗？

:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:21:14.713

我认为您正在寻找[ObjectChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/ObjectChoiceList.php)。

你可以像这样使用它：

```
$choiceList = new ObjectChoiceList($products, 'title', array(), null, 'id');

public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add(
            'products',
            'choice',
            array(
                    'choice_list'   => $choiceList,
                    'multiple'  => false,
                    'required' => false
            )
    );

} 
```

# c# - SharpGL：简单的阴影和 vbo 不起作用

> ID：13515794
> 
> 赞同：0
> 
> 时间：2012-11-22T15:25:00.080
> 
> 标签：c#, opengl, graphics

我正在为我的项目使用 SharpGL，这将涉及使用 glsl 4.2 版。

在过去的几天里，我尝试了一些示例，但没有一个有效。为 OpenTK 编写的类似代码对我有用，所以我不知道我做错了什么，但在 SharpGL 中，如果我使用着色器和 VBO，则不会将任何内容绘制到屏幕上。要么我失去理智，要么 SharpGL 本身不能正常工作，我对此表示怀疑。

我宁愿将 SharpGL 用于其 WPF 控件。我附上了一个非常简单的示例代码。我将不胜感激有关此事的任何帮助。请注意，稍作改动的相同代码可在 OpenTK 中使用。

*主窗口.xaml.cs*

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;

using System.Runtime.InteropServices;
using System.IO;

using SharpGL;
using SharpGL.SceneGraph;

namespace SharpGLTest
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        OpenGL gl;
        uint theProgram, positionBufferObject;
        string strVertexShader = "test.vert";
        string strFragmentShader = "test.frag";

        public MainWindow()
        {
            InitializeComponent();
        }

        private void OpenGLControl_OpenGLInitialized(object sender, SharpGL.SceneGraph.OpenGLEventArgs args)
        {
            gl = args.OpenGL;

            InitializeVertexBuffer();
            InitializeProgram();
        }

        private uint CreateProgram(List<uint> shaderList)
        {
            uint program = gl.CreateProgram();

            foreach (uint shader in shaderList)
                gl.AttachShader(program, shader);

            gl.LinkProgram(program);

            ProgramErrorInfo(program);

            foreach (uint shader in shaderList)
                gl.DetachShader(program, shader);

            return program;
        }

        private uint CreateShader(uint eShaderType, string strShaderFile)
        {
            uint shader = gl.CreateShader(eShaderType);
            string[] strFileData = { File.ReadAllText(strShaderFile) };

            gl.ShaderSource(shader, strFileData);

            gl.CompileShader(shader);

            ShaderErrorInfo(shader);

            return shader;
        }

        private void InitializeProgram()
        {
            List<uint> shaderList = new List<uint>();

            shaderList.Add(CreateShader(OpenGL.GL_VERTEX_SHADER, strVertexShader));
            shaderList.Add(CreateShader(OpenGL.GL_FRAGMENT_SHADER, strFragmentShader));

            theProgram = CreateProgram(shaderList);

            foreach (uint shader in shaderList)
                gl.DeleteShader(shader);

        }

        private void InitializeVertexBuffer()
        {
            float[] vertexPositions = {
                0.75f, 0.75f, 0.0f, 1.0f,
                0.75f, -0.75f, 0.0f, 1.0f,
                -0.75f, -0.75f, 0.0f, 1.0f,
            };
            GCHandle handle = GCHandle.Alloc(vertexPositions, GCHandleType.Pinned);
            IntPtr vertexPtr = handle.AddrOfPinnedObject();
            var size = Marshal.SizeOf(typeof(float)) * vertexPositions.Length;

            uint[] pbo = new uint[1];
            gl.GenBuffers(1, pbo);
            positionBufferObject = pbo[0];

            gl.BindBuffer(OpenGL.GL_ARRAY_BUFFER, positionBufferObject);
            gl.BufferData(OpenGL.GL_ARRAY_BUFFER, size, vertexPtr, OpenGL.GL_STATIC_DRAW);
            gl.BindBuffer(OpenGL.GL_ARRAY_BUFFER, 0);

            handle.Free();
        }

        private void OpenGLControl_OpenGLDraw(object sender, SharpGL.SceneGraph.OpenGLEventArgs args)
        {
            gl.ClearColor(0.0f, 0.0f, 0.0f, 0.0f);
            gl.Clear(OpenGL.GL_COLOR_BUFFER_BIT);

            gl.UseProgram(theProgram);

            gl.BindBuffer(OpenGL.GL_ARRAY_BUFFER, positionBufferObject);
            gl.EnableVertexAttribArray(0);
            gl.VertexAttribPointer(0, 4, OpenGL.GL_FLOAT, false, 0, IntPtr.Zero);

            gl.DrawArrays(OpenGL.GL_TRIANGLES, 0, 3);

            gl.DisableVertexAttribArray(0);
            gl.UseProgram(0);

            gl.Flush();
        }

        private void OpenGLControl_Resized(object sender, OpenGLEventArgs args)
        {
            gl.Viewport(0, 0, gl.RenderContextProvider.Width, gl.RenderContextProvider.Height);
        }

        private bool ShaderErrorInfo(uint shaderId)
        {
            StringBuilder builder = new StringBuilder(2048);
            gl.GetShaderInfoLog(shaderId, 2048, IntPtr.Zero, builder);
            string res = builder.ToString();
            if (!res.Equals(""))
            {
                System.Console.WriteLine(res);
                return false;
            }

            return true;
        }

        private bool ProgramErrorInfo(uint programId)
        {
            StringBuilder builder = new StringBuilder(2048);
            gl.GetProgramInfoLog(programId, 2048, IntPtr.Zero, builder);
            string res = builder.ToString();
            if (!res.Equals(""))
            {
                System.Console.WriteLine(res);
                return false;
            }

            return true;
        }

    }
} 
```

*测试.vert*

```
#version 330

layout(location = 0) in vec4 position;
void main()
{
    gl_Position = position;
} 
```

*测试片段*

```
#version 330

out vec4 outputColor;
void main()
{
   outputColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);
} 
```

*主窗口.xaml*

```
<Window x:Class="SharpGLTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:sharpGL="clr-namespace:SharpGL.WPF;assembly=SharpGL.WPF">
    <Grid>
        <sharpGL:OpenGLControl x:Name="OpenGLControl"
            OpenGLInitialized="OpenGLControl_OpenGLInitialized"
            OpenGLDraw="OpenGLControl_OpenGLDraw" 
            RenderContextType="FBO"
            Resized="OpenGLControl_Resized"
                               />
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-17T16:13:02.770

我知道这个问题相当老了，但是，当我第一次来到这里时，我正在谷歌搜索一种使用 gl.GetShaderInfoLog 的方法，然后是 SharpGL 源代码的 Shader.cs。

在 SharpGl 中确实没有 glGetShaderiv/glGetProgramiv。然而，这不是为我们提供编译状态的信息日志，它是这样获得的（从 Shader.cs 中提取）：

```
public bool GetCompileStatus(OpenGL gl)
    {
        int[] parameters = new int[] { 0 };
        gl.GetShader(shaderObject, OpenGL.GL_COMPILE_STATUS, parameters);
        return parameters[0] == OpenGL.GL_TRUE;
    } 
```

就我而言，这向我显示了一个错误，而您的方式没有提出任何问题。

最后，蒂姆在编译错误方面走上了正轨。现在，您真的有编译错误吗？我不知道，但要回答这个问题，正确检查编译错误至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:46:17.360

不确定sharpGL 是否会进行错误检查，但如果不是，您可能应该在某处进行一些 glGetError 测试。

我不确定您的问题可能是什么，但我想指出，我认为检查信息日志的长度不足以测试操作是否成功。

要测试着色器编译/链接中的错误，您应该使用`glGetShaderiv/glGetProgramiv`目标`GL_COMPILE_STATUS`或`GL_LINK_STATUS`. 此布尔值的结果确定编译/链接是否成功。

大多数情况下，使用信息日志长度可能是正确的，但不能保证。我在某些平台上看到了链接可能失败并且没有错误日志的错误，而且我也知道编译/链接有可能成功并仍然打印一条消息。

# windows-phone-7 - 从 Memorystream 设置源位图图像

> ID：13515796
> 
> 赞同：1
> 
> 时间：2012-11-22T15:25:12.597
> 
> 标签：windows-phone-7

我有wp7的申请。我有必要从 Byte 数组中获取 BitmapImage。我这样做：

```
using (MemoryStream stream = new MemoryStream(rawImageBytes))

                {               
                    BitmapImage imageSource1 = new BitmapImage();
                    imageSource1.CreateOptions = BitmapCreateOptions.None;
                    imageSource1.SetSource(stream);
                } 
```

运行后，在 string *imageSource1.SetSource(stream);* 我有错误 ![在此处输入图像描述](../Images/776baee059a4a23ca13ffbb4aff4258f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:57:20.340

stream.Dispose() 将在 using 语句结束时调用。当 imageSource1 发现它的源是死流时，它会抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:48:01.297

我这样做了几次没有问题。也许，这只是因为您的 rawImageBytes 没有 Header 信息。要使用 rawImageBytes，您需要使用 WritableBitmap。我推荐 WriteableBitmapExtension [http://writeablebitmapex.codeplex.com/releases/view/39577](http://writeablebitmapex.codeplex.com/releases/view/39577)

```
wr = New WriteableBitmap(New Io.MemoryStream(rawImageBytes)) 
```

基础知识也很有趣：http: [//www.windowsphonegeek.com/articles/encode-and-decode-images-in-wp7](http://www.windowsphonegeek.com/articles/encode-and-decode-images-in-wp7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T13:53:38.300

我相信杰的回答是对的。

using 语句将导致在 MemoryStream 上调用 Dispose() 方法。这向垃圾收集器发出信号，在清理 MemoryStream 引用之前需要进行一些处理。因此，在完全删除对象之前，需要两次垃圾收集器的 Collect 执行。

问题没有一直出现的原因正是因为只要垃圾收集器还没有运行，MemoryStream 仍然可以访问。但是，一旦 GC 运行，您的 MemoryStream 引用就处于不可用状态。

# drupal - Drupal 7 - 创建一个食谱网站

> ID：13515797
> 
> 赞同：0
> 
> 时间：2012-11-22T15:25:13.727
> 
> 标签：drupal, recipe, custom-pages

我是drupal的新手，只是好奇创建食谱网站的步骤是什么，管理员用户和特定成员可以在其中输入食谱，并且网站将能够在单独的页面和列表中显示每个食谱.

有一个名为“Recipe”的流行模块可供下载和安装，但我不想使用该模块来完全控制我的网站。

我安装了模块字段集合（用于成分列表）并创建了一个自定义节点，管理员用户可以在其中输入配方所需的所有数据。我还创建了一个类别分类，并附上了用户可以选择配方类别的节点。没有任何问题。现在我的问题是：

1.  如何在我的网站上以树形添加整个食谱分类列表？
2.  当用户创建新节点时，如何使此列表自动填充？
3.  我想制作一个自定义页面，每个食谱都将单独显示。我怎样才能做到这一点。（我阅读了一些关于面板和视图的内容并尝试了一些。但我只能在准备视图时找到“字段集合”，而不是我在自定义节点中创建的所有字段）

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:32:55.620

1.  恐怕我不太了解你。
2.  听起来您想创建一个[视图](http://drupal.org/project/views)来显示您的节点。
3.  当然这只是节点页面本身？

# iphone - Flash 冻结 AVCaptureSession

> ID：13515805
> 
> 赞同：2
> 
> 时间：2012-11-22T15:25:31.143
> 
> 标签：iphone, ios, camera, avcapturesession

我有以下代码来打开手电筒和闪光灯：

```
 AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
            if ([device hasTorch]) {
                [self.session beginConfiguration];
                [device lockForConfiguration:nil];
                if(self.flashlightOn == YES)
                {
                    [device setTorchMode:AVCaptureTorchModeOn];
                    [device setFlashMode:AVCaptureFlashModeOn];
                    NSLog(@"TurnFlashOn");
                }
                else
                {
                    [device setTorchMode:AVCaptureTorchModeOff];
                    [device setFlashMode:AVCaptureFlashModeOff];
                    NSLog(@"TurnFlashOff");
                }

                [device unlockForConfiguration];
                [self.session commitConfiguration]; 
```

但是，如果调用代码我的会话似乎冻结，如果我删除 [device setTorchMode:] 部分一切正常。有人知道这里发生了什么吗？

编辑：它仅在没有 IDE 的情况下运行应用程序时出现 -> 单独运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:21:20.557

我在前后摄像头之间交换时遇到了同样的问题。我第一次使用该设备时它会起作用，然后每次都冻结在“commitConfiguration”上。似乎正确的顺序是：

```
 [self.session beginConfiguration];
            [device lockForConfiguration:nil];

            //*** Do your session configuration stuff here

            [device unlockForConfiguration];
            [self.session commitConfiguration];

            //*** And this is what fixed the problem:
            self.session startRunning]; 
```

希望这对你有用！

# java - 处理海量数字的程序或库

> ID：13515813
> 
> 赞同：4
> 
> 时间：2012-11-22T15:26:06.910
> 
> 标签：java, python, math

我正在寻找一些方法来处理数千万位数的数字，并且可以在这个级别上进行数学运算。我可以使用 Java 和一点 Python。因此，其中一个的库会很方便，但是可以处理这些数字的程序也可以工作。有没有人有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T15:27:31.963

对于 Java，请查看内置类[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)和[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html). `BigInteger`数字的大小受可用内存的限制。可以表示任意大的以 10 为底的数字，小数点右侧`BigDecimal`最多 2 ^(32位（实际上，也受可用内存限制）。)

这两者都仅限于相当基本的数学运算。（算术、整数幂等。没有根、日志等。）如果您需要更多的东西，请查阅[NIST Java Numerics 页面上](http://math.nist.gov/javanumerics/)的库列表。（[Apfloat 包](http://www.apfloat.org/)支持任意精度的超越函数和复杂的数学。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T15:27:32.250

Python 无需任何库即可处理大量数字。

```
>>> 100 ** 100
1000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000L 
```

尽管正如其他人所建议的那样，如果您想要额外的速度，您可能想要使用[gmpy 。](http://code.google.com/p/gmpy/)

* * *

在 Java 中，您可以使用[BigInteger](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T16:43:10.187

对于 Python，我推荐[gmpy ，它是](http://code.google.com/p/gmpy/)[GNU Bignum 库](http://gmplib.org/)的 Python 包装器。*虽然理论上*Python 确实可以处理任意大的整数（仅受内存限制），并且它可以处理几千位左右的数字，但它并不是非常适合处理百万位整数。它不使用最先进的算法进行快速乘法、数字转换和其他标准操作。 `gmpy`相反，旨在处理这种数量级的数字。

以下是一些示例计时，表明即使是几千位数`gmpy`也比 Python 的内置 long 快得多：

```
$ python -m timeit -s "from gmpy import mpz" "str(mpz(10)**10000)"
1000 loops, best of 3: 575 usec per loop
$ python -m timeit "str(10**10000)"
100 loops, best of 3: 11.8 msec per loop 
```

顺便说一句：在某个时候，一位 Python 核心开发人员尝试将 Python 的长整数实现替换为直接使用 GMP 的实现。事实证明，对于日常的非大整数用例，它实际上减慢了 Python 的速度。有关详细信息，请参阅[http://bugs.python.org/issue1814](http://bugs.python.org/issue1814)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T15:30:49.920

BigDecimal 应该足够好。但是，你可以看看[JScience](http://www.jscience.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T15:31:36.120

你需要什么样的数学运算？

Java 已经提供了诸如 java.math.BigDecimal 或 java.math.BigInteger 之类的类，您可以使用它们来做一些基本的事情（加法、乘法等）

# html - 结合边界半径在 Internet Explorer 中实现渐变

> ID：13515815
> 
> 赞同：1
> 
> 时间：2012-11-22T15:26:22.157
> 
> 标签：html, css, internet-explorer-9

当我尝试在**IE**中使用渐变和边框半径来设置按钮的样式时，我发现由于渐变应用于背景，所以角实际上是方形的。

所有其他浏览器似乎都能够毫无问题地处理这个问题。

[**如果您在 FireFox 中打开它，我已经在这里**](http://jsfiddle.net/codepuppy/HgV6f/2/)演示了这 一点，例如，如果您在 Internet Explorer 中打开它，您会看到圆角和包含在边框内的渐变。

显然我夸大了半径等以使效果清晰。使用以下 CSS：

```
.form_Wrapper{
    width: 250px;
    height: 250px;
    background-color: #32b1d2;
}

.form_Submit{
    /*positioning*/
    position: absolute;
    top: 100px;
    margin-left: 16px;
    margin-top:20px;
    padding: 3px 10px;
    width: 90px;height:40px;
    /*background*/
    background: #808080;
    background: -webkit-gradient(linear, left top, left bottom, from(#a5a5a5), to(#808080));
    background: -webkit-linear-gradient(top, #a5a5a5, #808080);
    background: -moz-linear-gradient(top, #a5a5a5, #808080);
    background: -ms-linear-gradient(#a5a5a5, #808080);
    background: -o-linear-gradient(#a5a5a5, #808080);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#a5a5a5', endColorstr='#808080');
    zoom: 1;
    /*border*/
    border: 2px solid #a5a5a5;
    border-color: #a2a2a2;
    -webkit-border-radius: 12px;
    -moz-border-radius: 12px;
    border-radius: 12px;
    /*text*/    
    opacity: 1.0;        
    color: #fff;
}
​ 
```

将渐变应用于边框内的区域而不是包含背景必须有一些技巧。但我一直无法研究解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:56:50.057

`-ms-linear-gradient`不会做任何事情，因为 IE 直接从 IE9 中的专有过滤器跳到`linear-gradient`IE10 中的标准。

专有过滤器的行为与背景并不完全相同，它只是对整个元素进行操作，而不必与其他 CSS 属性交互。

CSSPIE 为缺乏 CSS 支持提供了 VML（类似于 SVG）解决方法。如果您最终在很多元素上使用它，使用它可能会降低性能。

您也可以使用图像，但维护会变得混乱。想要改变颜色？您必须重新创建图像。并且最终用户每次更改时都需要重新下载图像文件。它可能很小，但它是一个明显的闪烁。

* * *

要点：最简单、最干净、最少拔毛的解决方案是为不兼容 CSS3 的浏览器提供备用纯色。如果人们想要 MS 所说的“更漂亮的网络”，他们会使用本身支持它的浏览器，而不是需要这些 hack 的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:37:00.463

问题似乎并不在于它是背景渐变，而特别是您使用过滤器来做到这一点。过滤器是一个专有的 IE css 属性，可以实现相同的效果，但它的行为不像背景。

不幸的是，IE 仅支持 IE10 及更高版本（[源代码](http://caniuse.com/#feat=css-gradients)）中的渐变，因此您要么必须使用图像（有效，但不如 CSS 酷）或[CSS3pie](http://css3pie.com/)（有时很难开始工作，但它的工作很好！）。

[为了查看一个工作示例，我在http://denkeensna.nl](http://denkeensna.nl)上使用了 CSS3 饼图，它在 IE 甚至 IE7 中都可以很好地处理渐变 + 边框半径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:31:30.507

我建议创建背景图像并让图像成为背景，而不是制作 CSS 渐变。这样，您将在每个浏览器上获得相同的背景。您甚至可以使图像的边框变圆（并且角透明，将其另存为`.png`），这样圆角在 < IE8 中可见

制作：

*   1 或 2 像素宽度的图像，然后水平重复，
*   或整个按钮的图像（可能有圆角）

# knockout.js - 淘汰赛将复选框绑定到复杂对象并提交服务器

> ID：13515819
> 
> 赞同：1
> 
> 时间：2012-11-22T15:26:35.980
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我现在正在创建一个这样的复选框集合。

一些背景：起初我只为整个客户端虚拟机使用 ko.mapping 插件。

**例如在我的代码上下文中：**

```
self.AllAgencyTypes = ko.mapping.fromJS([]);

self.observables = {   //this would be created by the mapping plugin on render/runtime
    SomeProperty: ko.observable(),
    AgencyTypes: ko.observableArray()
} 
```

我的复选框正确呈现，除了适当的复选框不会在屏幕加载时检查。然后我意识到淘汰赛中的一个问题，我需要将我的选中属性更改为文本。（请参阅我的 get ajax 调用成功）

**HTML**

```
<tbody data-bind="foreach: AllAgencyTypes">
 <tr>
   <td>
    <label class="checkbox inline">
       <input  type="checkbox" class="editorField" data-bind="attr: { value: Id }, 
                           checked: $root.SelectedAgencies" />
       <span class="editorField" data-bind="text: Name"></span>
    </label>
  </td>
 </tr>
</tbody> 
```

**视图模型**

```
 AgencyDetailsVM: function (options) {

         var self = this;    

         self.AllAgencyTypes = ko.mapping.fromJS([]);

         //added this to get past the check-box bug
         self.SelectedAgencies = ko.observableArray([]); 

         // CRUD Actions
         self.get = function () {
             $.ajax({
                url: options.getURL,
                dataType: 'json',
                success: function (result) {

                    self.observables = ko.mapping.fromJS(result);    

                    //convert to string array
                    self.SelectedAgencies($.Enumerable.From(result.AgencyTypes)
                        .Select(function (x) {
                          return x.Id.toString();
                        }).ToArray()
                    );

                    ko.applyBindings(self, $('form')[0]);
                 }
           });

           $.getJSON(options.getAgencyTypes, function (response) {
                    ko.mapping.fromJS(response, self.AllAgencyTypes);
           });
       };    
 } 
```

我当前的问题是关于保存提交。因为我的复选框绑定到新创建的可观察数组，所以它们没有绑定到我的服务器端模型。

```
$.ajax({
         url: options.editURL,
         data: self.observables,
         type: "post",
         dataType: "json",    .... 
}) 
```

我有一个想法，如果我能够做这样的事情......它可能会解决我的问题......但我不知道如何。（获取 .string 不允许/出现错误 ATM。）

```
<input  type="checkbox" class="editorField" data-bind="attr: { value: Id }, 
                               checked: $root.observables.AgencyTypes.Id.toString()" /> 
```

因此，我看到的唯一选择是将集合推回由 ko.mapping 创建的原始对象中......我现在也不知道该怎么做......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:01:15.797

您正在寻找`ko.toJSON`一个静态方法，它返回任何具有可观察成员的对象的 JSON 版本！试试这个：

```
$.ajax({
     url: options.editURL,
     data: ko.toJSON(self.observables),
     type: "post",
     dataType: "json",    .... 
}) 
```

如果出于某种原因，您需要一个“普通 JS”而不是序列化的 JSON 字符串，您可以使用它`ko.toJSON`本身使用的先行函数，`ko.toJS`：

```
var plainJSVM = ko.toJS(self.observables); // this produces a JS object containing the current, primitive values of all observables, ready to be serialized as JSON. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:08:21.830

`checked`绑定需要绑定布尔值或数组，因此您不能直接绑定字符串。

您可以考虑为每个项目添加一个布尔值，并使用[计算的 observable](http://knockoutjs.com/documentation/computedObservables.html)来表示所选项目。

否则，您可以使用[手动订阅](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)`SelectedAgencies`来保持`AgencyTypes`同步。

# javascript - d3js分区冰柱图修改

> ID：13515823
> 
> 赞同：0
> 
> 时间：2012-11-22T15:26:45.030
> 
> 标签：javascript, d3.js, icicle-diagram

因此，我正在尝试从此[链接](http://bl.ocks.org/1005873)修改可缩放冰柱图表，以便我可以拥有完全相同但最后一个节点，浅绿色的节点彼此堆叠而不是彼此相邻。这对我来说非常复杂，因为冰柱图的逻辑只能在这一点上打破。到目前为止，能够参考这一点只能由 d 的 d.depth 属性给出。我仍然在尝试寻找是否有更优雅的解决方案。
这是可缩放分区 Icicle 的代码

```
var width = 960,
height = 250;

var x = d3.scale.linear()
.range([0, width]);

var y = d3.scale.linear()
.range([0, height]);

var color = d3.scale.category20c();

var vis = d3.select("#chart").append("svg")
.attr("width", width)
.attr("height", height);

var partition = d3.layout.partition()
.value(function(d) { return d.size; });

d3.json("../data/flare.json", function(json) {
  var rect = vis.data([json]).selectAll("rect")
  .data(partition.nodes)
.enter().append("rect")
  .attr("x", function(d) { return x(d.x); })
  .attr("y", function(d) { return y(d.y); })
  .attr("width", function(d) { return x(d.dx); })
  .attr("height", function(d) { return y(d.dy); })
  .attr("fill", function(d) { return color((d.children ? d : d.parent).name); })
  .on("click", click);

  function click(d) {
    x.domain([d.x, d.x + d.dx]);
    y.domain([d.y, 1]).range([d.y ? 20 : 0, height]);

    rect.transition()
      .duration(750)
      .attr("x", function(d) { return x(d.x); })
      .attr("y", function(d) { return y(d.y); })
      .attr("width", function(d) { return x(d.x + d.dx) - x(d.x); })
      .attr("height", function(d) { return y(d.y + d.dy) - y(d.y); });
  }
}); 
```

我所有的属性 x、y、宽度和高度都必须有不同的逻辑才能创建我相信的堆叠矩形......但我怎么能确定呢？任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:25:40.430

尝试以可视化代码无需修改即可正确绘制数据的方式转换数据。如果我理解正确，您正在尝试显示节点的子节点来代替节点本身。此代码片段会将目标节点的所有子节点重新设置为目标节点的父节点，然后删除目标节点（假设目标节点是称为“节点”的根节点的子节点）：

```
d3.json("../data/flare.json", function(json) {
    d3.keys(json['node']).forEach(function(e) {
        json[e] = json['node'][e];
    });
    json['node'] = null

    /* the rest of the vis code */
}); 
```

希望这可以帮助。

# java - struts2 迭代器捕获特定值

> ID：13515824
> 
> 赞同：0
> 
> 时间：2012-11-22T15:26:45.107
> 
> 标签：java, xml, jsp, struts2, struts-tags

嗨，让我告诉你我搜索了很多，但我找不到我想要的

这是场景

我的jsp中有一个表正在通过迭代器加载，它是`ArrayList<Report>`

报告具有三个属性参数，观察，设计

在 JSP 中，我将通过迭代器显示第一列和第三列的值

```
<s:iterator value="ReportList" status="status" var="obj">
   <tr>
      <td><s:property value="%{#obj.parameter}" /></td>
      <td><s:textfield theme="simple" name="valOfSim" /></td>
      <td><s:property value="%{#obj.designed}" /></td>
   </tr>
</s:iterator> 
```

> ```
> Parameter           observation                designed
> X                                                10
> y                                                11
> Z                                                12 
> ```

现在我必须捕获已输入的第二个值，请帮助！

编辑：我的代码

让我解释一下，第一个 preload 方法将被调用，值将被预填充`ArrayList<Obj>`，然后用户将输入值进行观察，然后通过这个捕获它

```
<td><s:textfield theme="simple" name="obj[%{#status.index}].observation" /></td> 
```

之后，将出现一个提交按钮，单击该操作类的提交方法将被调用

打印用户输入的值（这里是 NULL）

```
import mypro.web.utility.SpringServiceLocator;

public class myAction extends ActionSupport implements      
ModelDriven,SessionAware,ServletRequestAware,Preparable  {
private Map<String, Object> session;
private Model  model = new Model();

public void prepare()
{

            Obj obj = new Obj();
    Obj obj2 = new Obj();
    Obj obj3 = new Obj();

    obj.setDesigned("10");
    obj.setParameter("X");
    model.getReportList().add(obj1);

    obj.setDesigned("11");
    obj.setParameter("y");
    model.getReportList().add(obj2);

            obj.setDesigned("12");
    obj.setParameter("Z");
    model.getReportList().add(obj3);
   }

  public String preload()
   {

  return "success";
   }

  public String submit()
   {

  System.out.println("------------------------------------------------------  
  &&&&&&&&&:"+model.getReportList().size());
    for(Obj obj : model.getReportList)
    {
        System.out.println("the value is to be checked"+obj.getObservation());//value which will be entered by user
        System.out.println("the value is to be checked"+obj.getRefcode()); //value which was added in the prepare method
    }

        return "success";
      } 

       public Object getModel() {

    return model;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:28:24.453

改变这个：

```
<s:textfield theme="simple" name="valOfSim" /> 
```

对此：

```
<s:textfield theme="simple" name="obj[%{#status.index}].observation" value="" /> 
```

这将

1.  将您的文本`observation`字段绑定到`obj`元素的字段；
2.  保留行号；
3.  将显示的值设置为空（不知道为什么，但如果这是你想要的......）

这样，如果您的 Action 有一个`setter`用于您的 obj 元素（而不仅仅是一个 getter），当您提交包含迭代元素的表单时，您将检索`observation`用户在您的`ArrayList<Obj>`...

# search - 如何在 yii 的表单中放置搜索字段？

> ID：13515826
> 
> 赞同：0
> 
> 时间：2012-11-22T15:26:49.967
> 
> 标签：search, yii

这是一个例子

前：

> 创建猪
> 
> [搜索鸡文本字段] [搜索鸡按钮]
> 
> [名称文本字段]
> 
> [另一个文本字段]
> 
> [提交按钮]

点击搜索后：

> 创建猪
> 
> /鸡名单/
> 
> [名称文本字段]
> 
> [另一个文本字段]
> 
> [提交按钮]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:06:50.210

我不确定我是否看到你到底想做什么。

我认为您可以像往常一样创建表单并通过 ajax 对其进行更新。

1.  初始化表格
2.  在按钮上单击进行 ajax 调用
3.  从 ajax 响应更新表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:18:43.650

> [搜索鸡文本字段] [搜索鸡按钮]

更好地使用它：

```
$this->widget('zii.widgets.jui.CJuiAutocomplete', array(
   'model' => $model,
   'attribute' => 'chicken',
   'minLength'=>'999', // for disable autosearching
));
CHtml::button('Search', array(
    'onclick'=>'$("#Pig_chicken").autocomplete( "search", "" );',
)); 
```

当用户键入搜索字符串时，它将由 ajax 请求（或使用预定义列表）自动完成以进行有用的搜索

# ruby-on-rails - Rails 应用程序未在生产环境中使用预编译资产

> ID：13515831
> 
> 赞同：3
> 
> 时间：2012-11-22T15:27:09.203
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，可以很好地加载开发中的所有资产。

```
<link rel="stylesheet" href="/assets/reset.css" type="text/css" media="screen" title="no title" />
<link rel="stylesheet" href="/assets/text.css" type="text/css" media="screen" title="no title" />
<link rel="stylesheet" href="/assets/buttons.css" type="text/css" media="screen" title="no title" />
<link rel="stylesheet" href="/assets/theme-default.css" type="text/css" media="screen" title="no title" />
<link rel="stylesheet" href="/assets/login.css" type="text/css" media="screen" title="no title" />
<link rel="stylesheet" href="/assets/notify.css" type="text/css" media="screen" title="no title" /> 
```

而在生产服务器上，它仍然使用上面的代码来加载 CSS。它不应该使用 /assets/applicaiton.css 文件吗？我已经在生产环境中手动运行了 rake assets:precompile 任务，我可以看到它已经在 /public/assets 文件夹中创建了所需的文件。

那么，我需要做什么来告诉 Rails 使用压缩文件呢？

我的 production.rb 看起来像这样：-

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = true

 # Compress JavaScripts and CSS
 config.assets.compress = true

 # Don't fallback to assets pipeline if a precompiled asset is missed
 config.assets.compile = false

 # Generate digests for assets URLs
 config.assets.digest = true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:35:58.933

You should use the stylesheet_link_tag helper to call the css file like this :

```
= stylesheet_link_tag "application", :media => "all" 
```

and insert your stylesheets inside the application stylesheet file like :

```
= require reset
= require text
= require button
... 
```

Modify then your production.rb file to set the config.assets.compile as true

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
 config.serve_static_assets = true

 # Compress JavaScripts and CSS
 config.assets.compress = true

 # Don't fallback to assets pipeline if a precompiled asset is missed
 config.assets.compile = true

 # Generate digests for assets URLs
 config.assets.digest = true 
```

"Should work"

# macos - 让 Postgresql 在 Mac 中运行：数据库“postgres”不存在

> ID：13515834
> 
> 赞同：8
> 
> 时间：2012-11-22T15:27:15.443
> 
> 标签：macos, postgresql, postgresql-9.2

我按照这些说明让 postgresql 在 mac 上运行。注意我是使用 Homebrew 安装的，目前通过 brew 可安装的版本是 9.2.1，所以我这里的说明中更改了版本号：[http ://rails3hub.blogspot.com/2012/02/install-postgresql- 9-on-os-x.html](http://rails3hub.blogspot.com/2012/02/install-postgresql-9-on-os-x.html)

一切都很顺利，但我无法进入 psql 来创建数据库等等。如果我尝试`psql`我得到`psql: FATAL: database "myusername" does not exist`

如果我尝试`psql -U root`我得到`psql: FATAL: role "postgres" does not exist`

如果我尝试按照博客中的说明使用 pgAdmin 作为我的 postgres 控制台，例如`psql -d postgres < /usr/local/Cellar/postgresql/9.2.1/share/postgresql/extension/adminpack--1.0.sql`我得到相同的角色“postgres”不存在错误。

我不知道如何启动和运行它，我只是想进入 psql，就像我会 mysql -U root、创建一个数据库并开始使用一个站点一样。

有人有什么建议吗？我可以发布更多信息，我在 Mac OSX 上仅供参考。

# python - BeautifulSoup4 无法正确解析 xml

> ID：13515837
> 
> 赞同：1
> 
> 时间：2012-11-22T15:27:22.650
> 
> 标签：python, beautifulsoup, lxml

我正在尝试在 Python 中使用 BeautifulSoup4 编写一个 xml 解析器。由于某种原因，文档没有被正确解析。我的 xml 文档如下所示：

```
<module id="BrainParser_1" name="Brain Parser" package="CCB" version="1" location="pipeline://cranium.loni.ucla.edu//usr/local/loniWorkflows/BrainParser/brainparser.sh" sourceCode="" icon="/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAx&#xA;NDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy&#xA;MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAAUCABIAFYEASIAAhEBAxEBBCIA/8QAHwAAAQUB&#xA;AQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEG&#xA;E1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVW&#xA;V1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLD&#xA;xMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAA&#xA;AAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKR&#xA;obHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hp&#xA;anN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU&#xA;1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADgQBAAIRAxEEAAA/APn+iip7OzuNQuktbWIyzPna&#xA;g74GaEr7AfP9FFTWlrcX13Fa2sLzTysEjjQZLE9AKgrQt9C1e7RHt9KvplcblaO3dgw9Rgc16B4a&#xA;+HEMRabWV8+YAGOBThM57nv9OnXrXqn9qXs0cYitoItoAYfxAVr7GS1krDguZ6ENTQWlzckC3t5Z&#xA;STgCNC3P4V7b4G/Z/urp/tfi5mtoBgpaQyDe/wDvEfdH05r6B03TLLSLGKy0+2jtraJdqRxrgAV8&#xA;9ReCPEstuJho9wiE4/e4jOfoxBqZ/AHihOulP0zgSxk4+gavdLi6vLxwFRTHG3zAnlvpVdXeS7Mi&#xA;mQHaRsJxjkVzc75mmd6wtNpO7Piyy8CeK9RjaS18Pai6qcEmBl5/HFTS/DnxlDGXfw3qO0ekJP6C&#xA;vtiivnm90vUNNYre2VxbnO3MsZUE+xPXpVSvoiQSi7Ek6qdw2qAeQKwbjwV4d1DfPLb7JWbBaNiv&#xA;P0BxSVXuTLBv7LPga5tLmymaK6t5YJFJBSRCpBHXg1DX3lf6RpuqhBqFhbXQT7vnxB9v0zXm3iD4&#xA;BeFtYv3u7OW40wuOYoMGPPqAeleK0V1viXwHfaJMjWm++tpSQpjQl0PoQPbuP04zyVaJp7HHOEoO&#xA;0j5Wors/Hfw01vwHPGb3y7izmJEV1BkqT6EHoa4yiiiimSFFFFFeheAfDl/DqbXs0fljycKpHPJB&#xA;59On61j+BPDsWu6yDdjNpERkf327L/j+Fe7f2cLCAqkAU45wMZrXDTh7ZRY5QfJzBXtPwM8A6u/i&#xA;ay8UXdp5WlxRO8MjnmRiCowPxJyfSuP+FvgP/hPPE5trh3i0+1Tzbl1HLDOAgPYn+QNfXmnafa6T&#xA;p1vp9lEIbW3QRxRgk7VH1qpFGJEwo4PJO7BBqwLRGVGk+ZsYB3GlihRY0IiCuevFXFUAYx+dduJn&#xA;Zcpyyk1sWqKKKpfZ0VsopU98d6rOmbrlN3yHI/EVoSSOr/LCSv8AeJwKzLzUbKzuA11c+UNh+6hP&#xA;ce1cKUW3cuNSv0bCiiika2idlk2srIeOTxSNa20h3SoOOcbsA0kOq6Ze5W21GNpOyyDbmpZFPCug&#xA;3Hseh+hrN04S2NoYqvSd5aoKKKKr77SSNkj4fkKM859q8+8Z+B1W2fUdMjzIgL3MYJZnJPUDPGOe&#xA;K9F6bX8pQQeMmkvY/PtpYThCw6gdawlF02elRqxxVN3RFcWtvdwmK5gjmjPVJFDD8jXzf8W/g6uh&#xA;RTeIfDyE6cCXubXOTBk/eX/Z56dvp0+laZNDFcQvDNGskTqVdHGQwPUEV840V0fjTQG0LWiFyYbg&#xA;eYhPr/EPz5/Gitk7q5584uEnFnwHRXU/EPwz/wAIl431DS0B8hX8yAnHMbcjp+X4UV6H8KbTytLg&#xA;uI7VJS5Z23yY+YMVBHHoBXq8tw723l3FkrBh9zzOn6V5L8M3lutCt4AuYIy6MUPzA7i3Pp1FelOi&#xA;6fZbXmZs9CzEkn8a5pR97Vfn/md9GHPFPoe5/s8aDDZ+DrjWt264v52Q+iohwB9c5Nex15J+z3q0&#xA;F34Ak05eJ7K6cOM9Q/zA/wAx+Fet1l392bOVfMgKpn5D5nB/SqsPie3Fy24RKAMAl/8A61WHhOrQ&#xA;lTNmDJBXPJrDvfB8P2bdbA+d1ILcEelelzVKkFzJHNUwnvc0Aooop03iS8vdTEFvLGsZPGwZJ/HF&#xA;T3Fi10+Jo95ZDy0hPcV0fhXw1pNrp0LtbpLKwBeRxyD6D0qfxDDpmmPFMpEQdSDlsAciuOnioSm4&#xA;2/r7zBxaCiiq97fWmm2j3V9cxW1un3pZXCqPqTXj82l3KXzQpEy/N8vBrtNAi1JLBkvox5an5PMb&#xA;Bq9Jf2zvsjCM4XcGyOlXre3ZYxPII2Y9Af51tzLt+YKLloixRWLY+L/DmpXy2VjrlhcXLDcIop1Z&#xA;iPbBraqk8MzrtCqCefv9P0pJ7SWTZI7bAvQ7+v6VppFJO5AAIz/DVXVpbbTIhLe3iKg5IbgDFRVb&#xA;kr8unz/zOrB01SvGUtWFFFZuta/pfh3T5b7Vb2K2gjUsS7cn2A6k/SvJ/inJvu9PQkEosgODn+7R&#xA;XM+K9ZOueILi5wvloTFFtOcoCcH8c5/GilHYxru9Rs+Zv2gYynxMZtynfZxHAOSOo5/KiuJ8Z+I5&#xA;PFfi3UdZcFVnlPlKf4Yxwo/ICirXhbxrqHhVZo7dVlhlO4oTghumQcHt/IV6/wCG7q91OC1vNYjM&#xA;d26bjEc/KO3HbPX2zivnuvVvAXjBLkRWN9Ltu4k2xs3/AC0UD19R3/P1xtRjHnu9zbD1HflbJ/B3&#xA;jvW/A95PcaRLHiddssUqbkb0OPUZr6c+EniPxF4o8JNqHiGFFYzFbeVU2GVMD5sfXIz3r4+r3z4J&#xA;/FS3tLaPwtr1yIkU4srmQ4UD/nmx7ex/D0r1WO1SOTzE2At17Zqjr2rjSrXfFbNNKRgYX5V+ppLb&#xA;V7dwCJFLMcdeallKzRyb04btXY9jrautD6DorO0/XtJ1WWSOw1K1uZInKOsUoYgjrx+NaNaPhC6m&#xA;u9CiuLlRukYtx6dq5T4xrbP4RuHcHzlCCPn/AKaJn9M12dmY7OwiijUKir0HavDvil40ttbuY9N0&#xA;ydJ7WMZkmXOC2TlRkcjgHIyDnrXz1C8q115nmy2CvJv2hkVvhzExkKlb6PC5+9w1eqXNzDZ2stzc&#xA;OI4YkLu56KoGSa+Vfi38Uo/HUtvYaZFLFpVsxfMoAaWTpnHYAdPqa85imlglWWGR45F6OjEEfiK6&#xA;+z+J/iO2jjilnjuIl4YOgDMPTI6flXG0V6SbWxmeZRSyQSrLFI0ciHKuhwQfUGu3sPjD4608Rquu&#xA;yzLH/DcIr5+pIyfzrhaK7rUvijq93amGzQWbN1kV9xH04GP1rkbvVtSv023moXdwvpNMzj9TVOin&#xA;KTluC0PRda+NvjTWtNFkb2OzBPzy2amOR/bdnj8MVwl9qd/qciyX99c3bqMBriVpCB6ZJqrRRRRR&#xA;UgFFFFFKrMjq6MVZTkEHBBoooAKKKK1tE8RXmiah9qTE+SS6SsxBJIJPX73HU5r1Ox8f6Zqdzawo&#xA;0m52zIhQgoP5H8KKKpTlyuPc0jVlFWRp+H9dvPDeu2mr2DKLi2feoblW9QfYivqHwT8afD/i27i0&#xA;6ZJNO1GReEmI8tz6K3r7ECiio/HvxEhg06TTNMaX7VOm1pB8vlL3OeufTH1+vjNFFY06UaatEhu5&#xA;xvxt+KUfk3PhHR2Vy4AvLlW+7zny1x34GT74r59oooooorQQUUUUUUUUAFFFFFFFFABRRRX/2Q==" posX="80" posY="70" rotation="1">
    <authors>
        <author fullName="Mubeena Mirza" email="" website="" />
    </authors>
    <executableAuthors>
        <author fullName="Zhuowen Tu" email="" website="" />
        <author fullName="Bruce Liu" email="" website="" />
    </executableAuthors>
    <metadata>
        <data key="__creationDateKey" value="Tue Sep 11 10:28:28 PDT 2007" />
    </metadata>
    <input id="BrainParser_1.Structure" name="Structure" description="0: segmentation sub-cortical structures&#xA;1: sulci detection" required="false" enabled="true" order="0" prefix="-p" prefixSpaced="true" prefixAllArgs="false">
        <format type="Enumerated" cardinality="1">
            <enumeration>0</enumeration>
            <enumeration>1</enumeration>
            <enumeration>2</enumeration>
        </format>
        <values>
            <value>2</value>
        </values>
    </input>
    <input id="BrainParser_1.Testing" name="Testing" description="0: perform segmentation/detection&#xA;1: perform training&#xA;" required="false" enabled="true" order="1" prefix="-r" prefixSpaced="true" prefixAllArgs="false">
        <format type="Enumerated" cardinality="1">
            <enumeration>0</enumeration>
            <enumeration>1</enumeration>
        </format>
        <values>
            <value>0</value>
        </values>
    </input>
    <input id="BrainParser_1.SourceFile" name="Source File" description="In testing, it points to the source file in training, it points directory in which the training volumes are saved.&#xA;" required="true" enabled="true" order="2">
        <format type="File" cardinality="1">
            <fileTypes>
                <filetype name="Analyze Image" extension="img" description="Analyze Image">
                    <need>hdr</need>
                </filetype>
                <filetype name="Analyze Image" extension="img" description="Analyze Image file">
                    <need>hdr</need>
                </filetype>
            </fileTypes>
        </format>
    </input>
    <output id="BrainParser_1.TargetFile" name="Target File" description="In testing, it points to the target file in training, it points directory in which the trained classifiers are saved.&#xA;" required="true" enabled="true" order="3">
       <format type="File" cardinality="1">
           <fileTypes>
               <filetype name="Analyze Image" extension="img" description="Analyze Image">
                    <need>hdr</need>
               </filetype>
            </fileTypes>
        </format>
    </output>
    <input id="BrainParser_1.ModelsDirectory" name="Models Directory" description="Directory of trained models." required="false" enabled="true" order="4" prefix="-m" prefixSpaced="true" prefixAllArgs="false">
        <format type="Directory" cardinality="1" />
        <values>
            <value>pipeline://cranium.loni.ucla.edu//usr/local/loniWorkflows/BrainParser/56_Structure</value>
        </values>
    </input>
    <input id="BrainParser_1.NumberofStructures" name="Number of Structures" description="Only effective in training." required="false" enabled="false" order="5" prefix="-n" prefixSpaced="true" prefixAllArgs="false">
        <format type="Number" cardinality="1" />
        <values>
            <value>1</value>
        </values>
    </input>
    <input id="BrainParser_1.NumberofIterations" name="Number of Iterations" required="false" enabled="false" order="6" prefix="-t" prefixSpaced="true" prefixAllArgs="false">
        <format type="Number" cardinality="1" />
    </input>
    <input id="BrainParser_1.SmoothnessFactor" name="Smoothness Factor" description="Defalut=0.5, typical 0.0~2.0." required="true" enabled="true" order="7" prefix="-s" prefixSpaced="true" prefixAllArgs="false">
        <format type="Number" cardinality="1" />
        <values>
            <value>2.0</value>
        </values>
    </input>
</module> 
```

我编写的 Python 代码如下所示：

```
if __name__ == '__main__':
    soup = BeautifulSoup (
        open('test.xml'),
        'lxml'
    )

    for e in soup.find_all('module',attrs={'name':'Brain Parser'}):
        for i in e.find_all('input'):
            print i.prettify() 
```

这是结果：

```
<input description="0: segmentation sub-cortical structures 1: sulci detection" enabled="true" id="BrainParser_1.Structure" name="Structure" order="0" prefix="-p" prefixallargs="false" prefixspaced="true" required="false"/>

<input description="0: perform segmentation/detection 1: perform training" enabled="true" id="BrainParser_1.Testing" name="Testing" order="1" prefix="-r" prefixallargs="false" prefixspaced="true" required="false"/>

<input description="In testing, it points to the source file in training, it points directory in which the training volumes are saved. " enabled="true" id="BrainParser_1.SourceFile" name="Source File" order="2" required="true"/>

<input description="Directory of trained models." enabled="true" id="BrainParser_1.ModelsDirectory" name="Models Directory" order="4" prefix="-m" prefixallargs="false" prefixspaced="true" required="false"/>

<input description="Only effective in training." enabled="false" id="BrainParser_1.NumberofStructures" name="Number of Structures" order="5" prefix="-n" prefixallargs="false" prefixspaced="true" required="false"/>

<input enabled="false" id="BrainParser_1.NumberofIterations" name="Number of Iterations" order="6" prefix="-t" prefixallargs="false" prefixspaced="true" required="false"/>

<input description="Defalut=0.5, typical 0.0~2.0." enabled="true" id="BrainParser_1.SmoothnessFactor" name="Smoothness Factor" order="7" prefix="-s" prefixallargs="false" prefixspaced="true" required="true"/> 
```

如您所见，它认为`input`没有子元素，但事实并非如此。我做了一些探索，似乎元素喜欢`value`并且`format`被解析为元素的子`module`元素。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:32:09.920

您正在调用`BeautifulSoup`with `"lxml"`，它告诉它使用`lxml`解析器并将输入解析为 HTML。（在 HTML 中，`input`标签是自动关闭的并且没有子标签，因此您的字符串不是有效的 HTML。BeautifulSoup 会执行其神奇的 HTML 修复并确定您的意思是让`input`标签立即关闭，这就是为什么您没有看到任何孩子们。）

您想用 来调用它`"xml"`，它告诉它输入是一个 XML 文档。

# android - 如何在不使用意图的情况下将数据从一个活动传递到另一个活动？

> ID：13515842
> 
> 赞同：7
> 
> 时间：2012-11-22T15:27:51.027
> 
> 标签：android, android-intent, android-activity

我已经在使用挂起的意图..所以如果我使用另一个意图并启动该意图，它会转到一个新的活动..我想避免这种情况..所以在不使用意图的情况下，我想将数据从一个活动传递到另一个可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T06:23:33.297

您可以使用静态方法从一个活动获取数据到另一个活动。下面是示例代码

**第一个活动**

```
public class First extends Activity {

 static First INSTANCE;
 String data="FirstActivity"; 

 @Override
  public void onCreate(Bundle savedInstanceState) {

    INSTANCE=this; 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   }

 public static First getActivityInstance()
   {
     return INSTANCE;
   }

 public String getData()
   {
     return this.data;
   }
 } 
```

**第二个活动：**

```
 public class Second extends Activity {

 String data; 

 @Override
  public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);
    data=First.getActivityInstance().getData();  
    Toast.makeText(Second.this,"Data from first activity is"+data, 1).show();
   }
} 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T04:13:05.143

您可以尝试使用单例

```
 public class Singleton{
       private static Singleton instance;

       private Singleton(){

       }

       public static Singleton getInstance(){
        if (instance == null){
            instance = new Singleton();
        }
        return instance;
    }
  // your fields, getter and setter here

 } 
```

然后在你的第一个活动中

```
Singleton a = Singleton.getInstance();
a.setFoo("something here"); 
```

然后你的第二个活动

```
Singleton b = Singleton.getInstance();
b.getFoo(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T05:39:44.747

如何设置一个全局变量类，然后在Activity1中设置它，在Activity2中访问它，如下所示：

全局变量类文件：Global.java

```
package <your packagename>;
public class Global {   
    public static String    stringToPass = "";
} 
```

在文件中设置全局变量：Activity1.java

```
Global.stringToPass = "your string value to pass";
    startActivity(new Intent(Activity1.this, Activity2.class)); 
```

读取文件中的全局变量：Activity2.java

```
String gotString = "Global.stringToPass; 
```

小心内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:52:34.857

您可以尝试使用全局类 Application 来共享您要发送的数据！只是在使用它们之前设置数据！

# c++ - 如何打印到 LLVM 中的字符串

> ID：13515844
> 
> 赞同：7
> 
> 时间：2012-11-22T15:27:53.180
> 
> 标签：c++, compiler-construction, llvm

我想将 LLVM 中的指令打印到字符串而不是屏幕上。我`I->print( errs() )`用来打印到屏幕上。我怎样才能把指令放在一个字符串中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T15:43:13.110

像这样，

```
std::string str;
llvm::raw_string_ostream rso(str);
I->print(rso); 
```

# java - 爪哇。按值排序的地图

> ID：13515845
> 
> 赞同：5
> 
> 时间：2012-11-22T15:28:08.970
> 
> 标签：java, treemap, sortedmap

> **可能重复：**
> [如何对 Java 中的值对 Map<Key, Value> 进行排序？](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

我需要像 TreeMap 这样的排序地图，但按值排序。我的地图会很大，所以我不能在需要的时候对地图进行排序。有什么好的解决方案来解决这个问题吗？也许存在满足这个的外部罐子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:34:30.067

有多种方法可以满足您的要求。正如您随后澄清的那样，您的当前 . 中可能有重复的对象`TreeMap`，也许您可​​以`TreeMap`用第三方多[图](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)（[Guava](http://en.wikipedia.org/wiki/Multimap)、[Apache Commons Collections](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)）替换您的，然后交换您的键和值 - 即替换为. 根据您的具体情况，我相信这很有可能为您工作。`TreeMap<Key, Value>``Multimap<Value, Key>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:04:04.303

实际上并不存在任何可以有效执行此操作的数据结构：您*必须*维护一个数据结构，以便通过键查找更高效，并且对值进行排序会使维护该结构变得更加困难。

但是，如果您在创建地图后不修改地图，那么您可以执行以下操作：

```
List<Map.Entry<Key, Value>> list = new ArrayList<Map.Entry<Key, Value>>(
    map.entrySet());
Collections.sort(list, new Comparator<Map.Entry<Key, Value>>() {
  public int compare(Map.Entry<Key, Value> e1, Map.Entry<Key, Value> e2) {
    return e1.getValue().compareTo(e2.getValue());
  }
});
Map<Key, Value> sortedByValues = new LinkedHashMap<Key, Value>();
for (Map.Entry<Key, Value> entry : list) {
  sortedByValues.put(entry.getKey(), entry.getValue());
} 
```

生成的 LinkedHashMap 将按排序值顺序进行迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:43:29.133

如果您使用`TreeMap`来维护您的值的索引，即您主要使用它来快速找到给定键的匹配值，那么您可以做的另一件事是保留 2 个数据结构：

*   您现在`TreeMap`用于索引的
*   A `PriorityQueue`（或其他排序列表）以排序顺序迭代您的值

然后，当您有任何更改时，只需在两个列表中添加和删除值。为此，您**不需要**保留两个值的副本。您可以简单地将您现在拥有的一份副本添加到两个列表中，因为这些列表仅适用于对您的值的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T16:42:02.087

如果您的数据是唯一的，您可以将它们保存在一个`Set`可以按升序迭代的中（假设您实现`Comparable`）。

然后，您可以`Map`单独持有，而无需花费太多额外费用，而不仅仅是持有原件`Map`。

# go - Golang goroutine 不能在内部通道中运行

> ID：13515846
> 
> 赞同：6
> 
> 时间：2012-11-22T15:28:26.100
> 
> 标签：go

我正在尝试实现一个字数统计程序，但第一步我遇到了一些问题。

这是我的代码：

```
package main

import (
    "fmt"
    "os"
    "bufio"
    "sync"
)

// Load data into channel
func laodData(arr []string,channel chan string,wg sync.WaitGroup) {
    for _,path := range arr {
        file,err := os.Open(path)
        fmt.Println("begin to laodData ", path)
        if err != nil {
            fmt.Println(err)
            os.Exit(-1)
        }
        defer file.Close()
        reader := bufio.NewReaderSize(file, 32*10*1024)
        i := 0
        for {
            line,err := reader.ReadString('\n')
            channel <- line
            if err != nil {
                break
            }
            i++
            if i%200 == 0 {
                fmt.Println(i," lines parsed")
            }
        }
        fmt.Println("finish laodData ", path)
    }
    wg.Done()
}

// dispatch data lines into different mappers
func dispatcher(channel chan string,wg sync.WaitGroup){
    fmt.Println("pull data 11")
    line,ok := <- channel
    fmt.Println(ok)
    for ok {
        fmt.Println(line)
        line,ok = <- channel
    }
    fmt.Println("pull data 22")
    wg.Done()
}

func main() {
    path := os.Args
    if len(path) < 2 {
        fmt.Println("Need Input Files")
        os.Exit(0)
    }
    var wg sync.WaitGroup
    wg.Add(2)

    channel := make(chan string)
    defer close(channel)

    fmt.Println("before dispatcher")
    go laodData(path[1:],channel,wg)
    go dispatcher(channel,wg)
    wg.Wait()

    fmt.Println("after dispatcher")
} 
```

这是我的输出：

```
...

finish laodData  result.txt

throw: all goroutines are asleep - deadlock!

goroutine 1 [semacquire]:
sync.runtime_Semacquire(0x42154100, 0x42154100)
    /usr/local/go/src/pkg/runtime/zsema_amd64.c:146 +0x25
sync.(*WaitGroup).Wait(0x4213b440, 0x0)
    /usr/local/go/src/pkg/sync/waitgroup.go:79 +0xf2
main.main()
    /Users/kuankuan/go/src/mreasy/main.go:66 +0x238

goroutine 2 [syscall]:
created by runtime.main
    /usr/local/go/src/pkg/runtime/proc.c:221

goroutine 4 [chan receive]:
main.dispatcher(0x42115a50, 0x0, 0x2, 0x0)
    /Users/kuankuan/go/src/mreasy/main.go:45 +0x223
created by main.main
    /Users/kuankuan/go/src/mreasy/main.go:65 +0x228
exit status 2 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T15:34:56.517

Program terminates when main goroutine exits, so that `dispatcher()` has no time to do anything. You need to block in `main()` until `dispatcher()` completes. Channel can be used for this:

```
package main

import (
    "fmt"
    "os"
    "bufio"
)

var done = make(chan bool)             // create channel

// Load files and send them into a channel for mappers reading.
func dispatcher(arr []string,channel chan string) {
    for _,path := range arr {
        file,err := os.Open(path)
        fmt.Println("begin to dispatch ", path)
        if err != nil {
            fmt.Println(err)
            os.Exit(-1)
        }
        defer file.Close()
        reader := bufio.NewReaderSize(file, 32*10*1024)
        i := 0
        for {
            line,_ := reader.ReadString('\n')
            channel <- line
            i++
            if i%200 == 0 {
                fmt.Println(i," lines parsed")
            }
        }
        fmt.Println("finish dispatch ", path)
    }
    done <- true                 // notify main() of completion
}

func main() {
    path := os.Args
    if len(path) < 2 {
        fmt.Println("Need Input Files")
        os.Exit(0)
    }
    channel := make(chan string)
    fmt.Println("before dispatcher")
    go dispatcher(path[1:],channel)
    <-done                 // wait for dispatcher()
    fmt.Println("after dispatcher")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T07:31:52.597

我[修改了您的示例](http://play.golang.org/p/U-Q0-0tX5_)以在没有文件 I/O 的 Go 操场上运行；它改为在通道上发送随机数。

@Victor Deryagin 的解释和他使用“完成”频道的建议是正确的。您遇到死锁的原因是您的 goroutine 在通道上发送，但没有人从中读取，因此程序卡在这一点上。在上面的链接中，我添加了一个消费者 goroutine。然后程序按预期同时运行。

请注意，要等待多个 goroutine，使用[sync.WaitGroup](http://golang.org/pkg/sync/#WaitGroup)更清晰、更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-15T18:49:02.903

原始问题中需要解决两个问题。

1.  发送完所有数据后，您必须关闭通道。在 func`laodData`中，请使用 close(channel) 发送所有数据。
2.  传递`sync.Waitgroup`作为参考。您将 wg 作为参数中的值发送给以下函数......`laodData`和调度程序函数。

解决这两个问题将解决您的死锁问题。您的代码中出现死锁的原因如下：

*   不关闭发送通道会导致下游通道等待较长时间。
*   将 的参数`sync.Waitgroup`作为值发送。它应该作为参考发送，否则它将创建您正在发送的对象的新副本。

# css - css3动画以及样式和计算样式之间的差异

> ID：13515847
> 
> 赞同：0
> 
> 时间：2012-11-22T15:28:26.410
> 
> 标签：css, animation

我正在进入css3动画，我偶然发现了animation-fill-mode属性，它基本上可以在动画结束后将动画的值应用于元素。

默认情况下，当动画结束时，元素会恢复到其原始状态。

所以例如

```
 #box{
     width: 100px;
     position: absolute;
 }

#box.startAnimation{

    animation-name:first, second;
    animation-duration:5s, 5s;
    animation-timing-function:linear;
    animation-delay:0s, 5s;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}

@-moz-keyframes first
{
    0%   {left:40%; top:0px;background:cyan}
    100% {left:100px; top:0px;}
}

@-moz-keyframes second
{
     0%   {left:100px; top:0px;}
     100% {left:0px; top:300px;width:300px}
} 
```

forwards 动画填充模式将使应用了 startAnimation 类的元素宽度为 300 像素，顶部为 300 像素，左侧为 0 像素。

但是，这些值应用于元素的计算样式而不是 css 样式。

这可能会导致不一致，因为如果有人现在尝试获取元素的宽度，他将返回 100 像素而不是 300 像素。

在大型项目中，上述内容可能会变得很奇怪，其中制作了动画并且存在需要访问宽度、高度、左侧等属性的 javascript 逻辑。

我的意思是计算样式与您通过 div.style.width 读取的样式之间存在这种差异（例如）

我很想听听上述问题的意见或解决方案

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:05:19.797

我认为这取决于您要完成的工作。您是否有要解决的问题的更具体用例，然后我可能会得到更具体的答案。

在上述情况下，我不会使用关键帧。在大多数项目中，我发现我不需要关键帧，除非我正在制作某种高级动画，比如一个人走路之类的。对于大多数 Web 界面，转换和类更改似乎都可以正常工作。

我将有一个基类和一个转换类，并使用 javascript 添加转换类。然后状态将保持并保持一致，因为它来自您添加的类，而不是来自关键帧的末尾。

```
.base-class { width: 100px; left: 0; top: 0; -webkit-transition: 1s all; }
.transition-class { width: 300px; -webkit-transform: translateX(300px); }

$('.base-class').on('click', function(){ $(this).addClass('transition-class'); }); 
```

必要时也可以使用JS查找动画的结尾

```
$('.base-class').on('-webkit-transition-end', function(){
    var width = $(this).width();
    alert(width);
}) 
```

（我也会使用 translateX 而不是 left。它有点快）

# objective-c - NSString 替换字符方法

> ID：13515852
> 
> 赞同：0
> 
> 时间：2012-11-22T15:28:49.037
> 
> 标签：objective-c

> **可能重复：**
> [NSString 中的字符编码](https://stackoverflow.com/questions/13515375/character-encoding-in-nsstring)

我如何使用以下方法替换`/"/"`：`\"\"``NSSTring``stringByReplacingOccurrencesOfString`

我正在这样做，但它不起作用：

```
myString = [myString stringByReplacingOccurrencesOfString:@"/"/"" withString:@"\"\""]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:36:00.137

如果我理解正确你想要什么： `myString = [myString stringByReplacingOccurrencesOfString:@"/"/"" withString:@"\\\"\\\""];`

\ 是一个特殊字符，它表示：小心，不要像往常一样解释下一个字符。示例：在 NSString 中更改行是使用 \n 完成的。换句话说，不要将这个“n”解释为一个简单的“n”。我要换行。

# asp.net-mvc-3 - Telerik MVC DatePicker 控件全球化

> ID：13515855
> 
> 赞同：1
> 
> 时间：2012-11-22T15:29:04.693
> 
> 标签：asp.net-mvc-3, telerik, telerik-mvc

有谁知道在设置***Html.Telerik().ScriptRegistrar().Globalization(true) 时 Telerik DatePicker “开箱即用”实际支持哪些语言环境（语言）***？DateTIme 选择器全球化演示只提供了几个示例，我没有看到任何支持 .js 文件来支持代码/演示中任何地方的语言环境。任何人都知道在哪里可以找到记录的这些信息？

提前致谢。

这是演示：[Telerik DatePicker 演示](http://demos.telerik.com/aspnet-mvc/razor/datepicker/globalization)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:48:12.660

开箱即用仅支持英语本地化。其余的本地化文件/资源​​由社区提供。

如果您想进行自己的本地化，只需复制/粘贴所需小部件的资源文件，将后缀更改为您想要的文化并修改其中的值。

就像这里为 Grid 小部件解释的[一样。](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-localization.html)

# javascript - 如何保存 html 画布，然后在不丢失形状的情况下重新加载它？

> ID：13515859
> 
> 赞同：2
> 
> 时间：2012-11-22T15:29:11.977
> 
> 标签：javascript, html, canvas, save, shapes

我有一个 html5 画布，用户可以在其中添加形状。形状有各种各样的行为 - 它们可以调整大小，可以移动等等。我需要保存它，所以我可以稍后重新加载（用户添加形状，保存，关闭浏览器。当他重新打开浏览器时，他应该得到与他之前保存的形状相同的画布。他应该能够移动/调整现有形状并添加新形状）

toDataURL 对我不利，因为它将所有形状的画布转换为图像，因此所有现有形状都丢失了。有什么方法可以将画布或上下文作为对象保存到数据库并稍后重新加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:46:07.493

也许您可以将每个形状的属性存储在一个`JSON`对象中，并将其存储`localStorage`或保存到数据库中。像这样的东西：

```
var ShapeData = {shapes:[]}
for(var i = 0; i < shapes.length; i++) {

    var newShape = {
        type : shapes[i].getType(),
        x : shapes[i].getX(),
        y : shapes[i].getY(),
        w : shapes[i].getWidth(),
        h : shapes[i].getHeight(),
        rot : shapes[i].getRotation()
    }

    ShapeData.shapes[i] = newShape;
}

var toTheDatabase = JSON.stringify(ShapeData); 
```

看起来像这样：

```
var ShapeData = {
    "shapes" : [{
        "type":"square",
        "x":"10",
        "y":"40",
        "w":"2",
        "h":"90",
        "rot":"140"
    },{
       "type":"circle",
        "x":"60",
        "y":"100",
        "w":"2",
        "h":"90",
        "rot":"0"
    }]
} 
```

# jquery - 根据行数计算元素的高度

> ID：13515860
> 
> 赞同：2
> 
> 时间：2012-11-22T15:29:12.843
> 
> 标签：jquery

我有一个元素的高度是由它的内容（a `ul`）计算的。目前`ul`有两行，每行三个项目。我正在`.element`使用以下 CSS 在屏幕上设置位置；

```
.element {
position: absolute;
left: 30px;
top: -139px;
} 
```

对此的标记是

```
<div class="element">
    <ul>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
    </ul>
</div> 
```

将来需要添加第三行，`ul`这意味着`top`我使用的定位将隐藏这个新行（因为元素 div 位于另一个 div 的顶部），这远非理想。

我想我需要用 jQuery 来做这件事，所以无论添加了多少行，我都不需要更改 CSS 来解决这个问题。

我到目前为止的 WIP jQuery 看起来像：

```
var elemImgHeight = $('.element li img').height();
var toggles = $('.element li');
var numOfRows = math.ceil( toggles.length() / 3 );
var elemTopOffset = numOfRows * elemImgHeight + 10;

    if ($('.element li') => 7) {
        $('.element').css({ top:elemTopOffset })
    } 
```

我不确定我是否在正确的轨道上，所以可以用一些指针来做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:42:02.540

容易......假设你有这个 html 结构：

```
<div class="element">
    <ul>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
        <li><img src="#" />Model</li>
    </ul>
</div>​​​​​​​ 
```

并且您想计算顶部位置，以便只显示最后一个 li 元素......使用这个：

```
var theElement = $(".element");
var topPosition = theElement.find("ul li:last").outerHeight()-theElement.outerHeight();
theElement.css("top",topPosition); 
```

样本位于此处：http: [//jsfiddle.net/senegalo/eEya4/2/](http://jsfiddle.net/senegalo/eEya4/2/)

# javascript - 鼠标悬停的交互式地图

> ID：13515864
> 
> 赞同：0
> 
> 时间：2012-11-22T15:29:28.890
> 
> 标签：javascript, php, css, maps

不久前，我偶然发现了 javascripting 和 css 的世界，我的顾问给了我一个交互式地图项目。

问题是我不知道我应该如何开始这个项目，而我想知道并找出的一件事是，我怎样才能只用 javascript、css 和一点 php 或 cms 制作交互式地图？

我找到了这些网站： [http](http://www.lglab.co.uk/usaSVG/advanced/index.html) : //www.lglab.co.uk/usaSVG/advanced/index.html http://edition.cnn.com/ELECTION/2012/ecalculator#?battleground

两者都与我即将要做的事情有关。

我想知道我如何能够编写一个像上面例子中那样的交互式地图，只需一点点定制，而无需支付工具费用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:06:21.457

试试 OpenLayers [ [http://openlayers.org/](http://openlayers.org/) ] - 它是一个免费的开源 JavaScript 映射工具包。检查交互和事件的示例以及所有这些。

你需要一些矢量格式的数据——GeoJSON、GML——类似的。然后编写一大堆 javascript 将图层添加到基本地图并处理事件。

其他开源 Javascript 地图工具包可用（例如 Leaflet），但 OpenLayers 是重量级大师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:48:32.333

您需要学习 SVG - 真正制作事件驱动多边形的唯一方法。

见： http: [//www.netzgesta.de/mapper/](http://www.netzgesta.de/mapper/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:02:49.300

您可以为此使用 geoJSON。见[http://palewi.re/posts/2012/03/26/leaflet-recipe-hover-events-features-and-polygons/](http://palewi.re/posts/2012/03/26/leaflet-recipe-hover-events-features-and-polygons/)

# java - 将自定义 CA 添加到 android

> ID：13515865
> 
> 赞同：1
> 
> 时间：2012-11-22T15:29:29.653
> 
> 标签：java, android, ssl, ca

如何在 android 中添加自己的 CA 证书？似乎只有使用全局密钥管理器才有可能。但我不希望用户先导入此密钥。

它不必在全球范围内安装，仅适用于我的应用程序。

我也在查看 android SSL Classes，但我对编程中的 SSL 不太熟悉，所以我不确定 Class migth 对我有什么帮助。

这解决了我的问题： [Android - 除了普通 SSL 证书外，还验证自签名证书](https://stackoverflow.com/questions/13152198/android-validating-self-signed-certificates-in-addition-to-normal-ssl-certific)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:49:55.947

我相信您正在寻找通常称为`FakeSocketFactory`. 这使得 SSL 证书的使用无需验证它们（与`CA`或其他证书实体）。

您可以`NaiveTrustManager`在下面的代码中添加类来检查您自己的 CA 证书。

[您可以在Fake Socket Factory](http://www.example8.com/category/view/id/15663)中找到代码示例

问候。

# c# - 在 C# 中下载 JSON 字符串

> ID：13515867
> 
> 赞同：11
> 
> 时间：2012-11-22T15:29:36.787
> 
> 标签：c#, .net, json, string

我正在尝试在我的 Windows 应用商店应用程序中下载一个 JSON 字符串，它应该如下所示：

```
{
 "status": "okay",
 "result": {"id":"1",
            "type":"monument",
            "description":"The Spire",
            "latitude":"53.34978",
            "longitude":"-6.260316",
            "private": "{\"tag\":\"david\"}"}
} 
```

但我得到了关于服务器的信息。我得到的输出如下：

```
Response: StatusCode: 200, ReasonPhrase: 'OK', Version: 1.1, Content: System.Net.Http.StreamContent, Headers:
{
  MS-Author-Via: DAV
  Keep-Alive: timeout=15, max=100
  Connection: Keep-Alive
  Date: Thu, 22 Nov 2012 15:13:53 GMT
  Server: Apache/2.2.22
  Server: (Unix)
  Server: DAV/2
  Server: PHP/5.3.15
  Server: with
  Server: Suhosin-Patch
  Server: mod_ssl/2.2.22
  Server: OpenSSL/0.9.8r
  X-Powered-By: PHP/5.3.15
  Content-Length: 159
  Content-Type: text/json
} 
```

我环顾四周，发现 WebClient 在 Windows 8 之前使用，现在被 HttpClient 取代。因此，我一直在使用 Content.ReadAsString()，而不是使用 DownloadString()。这是我到目前为止的一些代码：

```
public async Task<string> GetjsonStream()
{
    HttpClient client = new HttpClient();
    string url = "http://(urlHere)";
    HttpResponseMessage response = await client.GetAsync(url);
    Debug.WriteLine("Response: " + response);
    return await response.Content.ReadAsStringAsync();
} 
```

有人知道我要去哪里错了吗？提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-22T15:32:19.443

您正在输出服务器响应。服务器响应包含 a `StreamContent`（请参阅[此处](http://msdn.microsoft.com/en-us/library/system.net.http.streamcontent.aspx)的文档），但这`StreamContent`没有定义 a `ToString`，因此输出的是类名而不是内容。

`ReadAsStringAsync`（[此处](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.readasstringasync.aspx)的文档）是获取服务器发回的内容的正确方法。您应该打印出此调用的返回值：

```
public async Task<string> GetjsonStream()
{
    HttpClient client = new HttpClient();
    string url = "http://(urlHere)";
    HttpResponseMessage response = await client.GetAsync(url);
    string content = await response.Content.ReadAsStringAsync();
    Debug.WriteLine("Content: " + content);
    return content;
} 
```

# svg - 以编程方式生成结构化数据的图形 (ADAPT) 模型/图表

> ID：13515868
> 
> 赞同：0
> 
> 时间：2012-11-22T15:29:52.173
> 
> 标签：svg, drupal-7, diagram, dynamically-generated, activiti

我正在寻找从存储在数据库中的结构化数据生成图表的策略或其他起点。制作一个与我的要求非常相似的简化示例：

```
Input:          DDL SQL to create tables with attributes in a Database.
Desired output: ERD diagram of the tables with connections to each other as svg. 
```

我想要构建的图表类型是[ADAPT](http://www.symcorp.com/downloads/ADAPT_white_paper.pdf)，但由于我确信没有直接生成 ADAPT 图表的实现，我会对任何可以生成模型（如 BPMN、EPK 或类似的东西）的东西感到满意。ERD 的生成器可能是一个开始，但由于 ADAPT 比 ERD 更复杂，因此需要大量定制。

[我目前使用Drupal](http://drupal.org/)创建了一个原型，因此该领域的一些东西会很好，但我很高兴有任何可以学习解决核心问题的输入：*如何从结构化数据中自动创建图形模型（没有数据或用户交互）元素放置、元素大小等）？*

**旁注：**

*   svg 不是硬性要求（可能是 png 等），但对我来说似乎是最好的选择。
*   我正在构建的应用程序记录了应该成为模型的要求。
*   该解决方案需要可集成到 Web 应用程序中。（有某种API）
*   [Activiti](http://activiti.org/)可能是图表绘制的基础，但我无法找到有关通过 API 而不是 UI 创建图表的信息。
*   [Graphviz](http://www.graphviz.org/)可能是一个起点，但我还没有看到 ERD 之外的任何工作。
*   这是一个学生项目，所以预算有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:41:22.023

有许多图表库可用，每个都有其优点和缺点。这在很大程度上取决于您的确切要求。我建议您评估一些替代方案，看看最适合您的方案。

*我的想法*：**在商业场景中**， 适用于各种平台的[yFiles库套件可能是一种选择。](http://www.yworks.com)从我所见，基于 HTML/JavaScript 的解决方案应该可以很好地满足您的要求：可以很容易地告诉它从各种输入源获取数据，自动创建结构，最重要的是计算图表的布局，以便它可以无需人工安排即可立即查看。您还可以高度自定义库：您可以使项目看起来像“ADAPT”中的项目，自定义用户交互性以便只允许有效的模型更改（如果您需要交互式编辑），当然可以做所有事情以编程方式使用灵活的 Javascript API。

这里有一个很好的例子： [Interactive Graph Source](http://live.yworks.com/yfiles-for-html/demos/DataBinding/demo.yfiles.binding.interactivegraphsource/index.html)

全面披露：我在 yWorks 工作，但在 Stackoverflow 上我不代表我的雇主。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:07:08.550

您可以生成[Graphviz](http://www.graphviz.org/)的 DOT 语言，然后通过命令行运行 Graphviz 的 DOT.exe 程序，输入一个 DOT 语言文件，输出一个 .svg 文件。这种方法非常简单，因为您不需要通过 API 使用 Graphviz，而只需从您的编程环境中生成文本文件。

不确定这是否对您有帮助；也许只是一般的想法可能是有用的。

不过，更进一步，我在一个开源项目中完成了这项工作，与您在上面具体描述的显着不同之处在于我的项目采用表格（自我描述，结构化）数据而不是 SQL DDL 作为其用户输入. 输出是概念和关系形式的信息，可以以多种方式使用（搜索、操作、图表），其中一种是生成 .svg 输出，显示由各种颜色和标记的箭头互连的各种颜色和形状的实体。.svg 输出是通过将概念和关系转换为适当的 DOT 文件，然后通过命令行运行 Graphviz，然后在 .svg 输出上启动 Firefox 来完成的。与您需要的有很多不同，但布局完全由 Graphviz 处理。

# java - Android 到 php (url) 到 sql，db 什么也没显示。在浏览器中工作

> ID：13515870
> 
> 赞同：-1
> 
> 时间：2012-11-22T15:30:00.607
> 
> 标签：java, android

我通过 new CreateNewThread().execute(); 执行

```
class CreateNewThread extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(CreateThread.this);
        pDialog.setMessage("Creating Thread..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    protected String doInBackground(String... args) {

        tittel = inputTitle.getText().toString();
        tekst = inputText.getText().toString();

        if (!tittel.equals("") && !tekst.equals("")) {
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://.../createthread?title="
                                + tittel + "&text=" + tekst);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        is,"iso-8859-1"));
                System.out.println(tittel);
                System.out.println(tekst);
                System.out.println(in);
                String line;

                while ((line = in.readLine()) != null) {
                    JSONObject jo = new JSONObject(line);
                    System.out.println(jo.getString("svar"));
                }
            } catch (Exception e) {
                System.out.println("catchgreiene" + e);
            }

        } 
        else {
            System.out.println();
        }
        return null;
    }

    protected void onPostExecute(String file_url) {
        pDialog.dismiss();
    }

} 
```

我只是想运行一个网址。php 文件在浏览器中运行。这是 2.2 Froyo。我在这里想念什么？

我尝试了其他方法，但这对朋友有用。所以它应该工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T15:42:06.217

我不知道这是否是问题所在，但你永远不应该在 android 中执行 System.out.println。改用 Log.w("tag","key") ！

# ruby-on-rails - 为什么在运行回调 after_save 时错误堆栈级别太深

> ID：13515873
> 
> 赞同：0
> 
> 时间：2012-11-22T15:30:05.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有2个模型：

*   GeneralExam有很多TopicQuestion
*   TopicQuestion 属于 GeneralExam，belongs_to Topic

这是两个模型中的列：

*   GeneralExam：名称，描述，number_question
*   主题问题：general_exam_id、topic_id、number_question

我想通过加上 TopicQuestion 中每个主题的 number_question 来计算一般考试的问题总数。所以我写了一个这样的方法：

```
class GeneralExam < ActiveRecord::Base

  has_many :topic_questions, dependent: :destroy

  validates :number_question, numericality: { only_integer: true, greater_than: 0 }, on: :save

  after_save :calc_number_question

  private

  def calc_number_question
    number_question = 0
    self.topic_questions.each do  |tq|
      number_question += tq.number_question
    end
    self.number_question = number_question
    self.save
  end
end 
```

但是当我提交时，我收到错误：

```
SystemStackError in GeneralExamsController#create
stack level too deep 
```

这是我的参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"VyojDMOltc5wOJMDf4gtDM6lEk6soTZl/EaY9qrCRyY=",
 "general_exam"=>{"course_id"=>"1",
 "name"=>"dada",
 "description"=>"dada",
 "semester_id"=>"1",
 "duration"=>"1",
 "topic_questions_attributes"=>{"0"=>{"_destroy"=>"false",
 "topic_id"=>"15",
 "number_question"=>"15"},
 "1"=>{"_destroy"=>"false",
 "topic_id"=>"13",
 "number_question"=>"6"},
 "2"=>{"_destroy"=>"false",
 "topic_id"=>"Choose a topic",
 "number_question"=>""},
 "3"=>{"_destroy"=>"false",
 "topic_id"=>"Choose a topic",
 "number_question"=>""},
 "4"=>{"_destroy"=>"false",
 "topic_id"=>"Choose a topic",
 "number_question"=>""}}},
 "commit"=>"Create General exam"} 
```

我错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T15:44:19.697

你`self.save`最后打了电话。它正在开始另一个`after_save`回调。

如果您的 rails 版本是 3.2.1 或更高版本，您可以使用

```
update_column :number_question, number_question 
```

跳过回调。

**题外话：**

你可以重写它

```
number_question = 0
self.topic_questions.each do  |tq|
  number_question += tq.number_question
end 
```

作为

```
number_question = self.topic_questions.inject(0) { |sum, tq| sum + tq.number_question } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T01:20:04.187

用作`after_commit`回调。从那以后它就可以正常工作了，它不会循环。

# android - 由于写入权限，无法使用 Android shell atrace 命令

> ID：13515879
> 
> 赞同：3
> 
> 时间：2012-11-22T15:30:23.390
> 
> 标签：android, shell, adb

如果我从**模拟器中的****adb** shell尝试**atrace**工具：

 ****```
# atrace
atrace
error opening /sys/kernel/debug/tracing/options/overwrite: No such file or direc
tory (2) 
```

如果我做 ：

```
#mount -t debugfs nodev /sys/kernel/debug
#mount: No such file or directory 
```

如果我尝试制作文件夹：

```
#mkdir -p /sys/kernel/debug
#mkdir failed for /sys/kernel/debug/, No such file or directory 
```

所以显然我没有写权限，即使我是**root** ......

**编辑：**

我可以在**/data/**路径中创建文件夹，但不能在**/sys/**路径中创建文件夹...

有没有人能够在模拟器环境中的**/sys/路径中创建文件夹？**

有什么帮助吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:56:55.087

在提供的模拟器中这是不可能的，因为 Linux 内核编译是在没有激活 TRACING OPTIONS 的情况下完成的。

为了能够，必须重新编译 Linux 内核来激活所需的选项。

步骤可以在这里找到：

[http://www.linuxforu.com/2010/11/kernel-tracing-with-ftrace-part-1/](http://www.linuxforu.com/2010/11/kernel-tracing-with-ftrace-part-1/)

PS 感谢@zapl 和其他相关人员。

问候，****

# sql - 如何为数据库中的每个选定行执行插入

> ID：13515882
> 
> 赞同：3
> 
> 时间：2012-11-22T15:30:28.977
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我正在尝试制作存储过程：
- 获取`int`行列表

```
select ItemId from Items -- this returns: 1,2,3,4,5,6 
```

*   在程序的第二部分，我必须在另一个表中为每个选定的数字添加行。
    就像是：

    以前结果中的 foreach ItemId 插入表 (ItemIdInAnotherTable) 值 (ItemId)
    **更新**

    我错过了问题的一个重要部分。在程序的另一部分中，当我在另一个表中插入所选项目时，需要再插入几列。像这样的东西：

    插入 dbo.ItemsNotificator (UserId,ItemId) (13879, (select ItemId from Items))

所以它不是一列。很抱歉造成混淆:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T15:33:40.753

*编辑*：假设表`[table]`已经存在，并且如果 User 是一个常量，那么这样做：

```
INSERT INTO [table](UserId, ItemIdInAnotherTable) 
   SELECT 13879, ItemId 
   FROM Items; 
```

如果`UserId`完全来自另一个表，则需要弄清楚 UserId 和 ItemId 之间需要什么关系。例如，如果所有用户都链接到所有项目，那么它是：

```
INSERT INTO [table](UserId, ItemIdInAnotherTable) 
   SELECT u.UserId, i.ItemId 
   FROM Items i CROSS JOIN Users u; 
```

如果表`[table]`不存在，那么您可以使用`SELECT INTO`, 并指定一个新的表名（例如`#temp`存储在 中的表`tempdb`）

```
SELECT u.UserId, i.ItemId 
   INTO #tmpNewTable
   FROM Items i CROSS JOIN Users u; 
```

新创建的表中的列将具有相同的名称`UserId`和`ItemId`类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:33:17.683

对我来说看起来很简单：

```
 INSERT INTO ItemIdInAnotherTable (ItemId)
 SELECT ItemId from Items 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:33:58.667

这正是普通`insert`命令所做的。只需执行以下操作：

```
insert into Table (ItemID) 
    select ItemID from Items; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:34:00.860

使用`INSERT INTO..SELECT`声明

```
INSERT INTO ItemIdInAnotherTable (ItemId)
SELECT ItemId 
FROM   Items 
```

# c - Arduino的串行监视器输入？

> ID：13515884
> 
> 赞同：0
> 
> 时间：2012-11-22T15:30:38.210
> 
> 标签：c, arduino

这只是一个简单的测试程序。我正在尝试在连接到它的 LCD 屏幕上“接收”Arduino 打印。我认为这是我的 if 语句导致错误，有什么想法吗？

目前，当“发送”被放入串行监视器时，没有任何反应。

这是代码：

```
#include <LiquidCrystal.h>
LiquidCrystal lcd(8, 9, 4, 5, 6, 7);

char serialinput;   // for incoming serial data

void setup() {
    Serial.begin(9600);     // opens serial port, sets data rate to 9600 bps
    }

void loop() {

    // send data only when you receive data:
    if (Serial.available() > 0) {
            // read the incoming byte:
            serialinput = Serial.read();

            if (serialinput == 'send')
            {
            lcd.print("received");
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:48:01.623

您正在从串行端口读取一个字节（`char`C 中的 a），但您尝试将其与字符串进行比较：

如果您想阅读 4`char`并将其与它进行比较，`"send"`那么您必须执行以下操作：

```
#include <LiquidCrystal.h>
#include <string.h>
LiquidCrystal lcd(8, 9, 4, 5, 6, 7);

char serialinput [5] = {0};   // for incoming serial data
                              // 4 char + ending null char

void setup() {
    Serial.begin(9600);     // opens serial port, sets data rate to 9600 bps
}

void loop() {
    // send data only when you receive data:
    if (Serial.available() > 0) {
        memmove (serialinput, &serialinput[1], 3); // Move 3 previous char in the buffer
        serialinput [3] = Serial.read(); // read char at the end of input buffer

        if (0 == strcmp(serialinput, "send")) // Compare buffer content to "send"
        {
            lcd.print("received");
        }
    }
} 
```

假设`<string.h>`标头在 Arduino SDK 中有效

PS：C代码中的文字字符串写在`"`（双引号）之间。`'`是为字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:34:26.903

上传到 arduino 时遇到了什么错误？

# objective-c - 播放 iOS 的远程音频缓冲区时如何避免机器人声音？

> ID：13515889
> 
> 赞同：-1
> 
> 时间：2012-11-22T15:31:04.057
> 
> 标签：objective-c, ios, xcode, core-audio, audiounit

我只是尝试开发一个VOIP应用程序，

*   从 RecordingCallBack 获取的音频缓冲区将被包装到 NSData，然后由 GCDAsyncSocket 发送到远程端

*   并且远程端将获取 NSData，解包到音频
    缓冲区，然后 PlayingCallBack 将获取音频缓冲区。

我的计划到目前为止工作正常，在本地运行良好（套接字将数据发送到本地，并在本地播放缓冲区）

但是当它在两台设备（一台真正的 iphone-4s，一台模拟器）上运行时，声音会变得陌生，听起来像**机器人的声音**

> 有没有办法避免机器人音效？

这是我的音频单元设置：

```
#pragma mark - Init Methods

- (void)initAudioUint
{
    OSStatus status;

    // Describe audio component
    AudioComponentDescription desc;
    desc.componentType = kAudioUnitType_Output;
    desc.componentSubType = kAudioUnitSubType_RemoteIO;
    desc.componentFlags = 0;
    desc.componentFlagsMask = 0;
    desc.componentManufacturer = kAudioUnitManufacturer_Apple;

    // Get component
    AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

    // Get audio units
    status = AudioComponentInstanceNew(inputComponent, &audioUnit);
    checkStatus(status);

    // Enable IO for recording
    UInt32 flag = 1;
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Input,
                                  kInputBus,
                                  &flag,
                                  sizeof(flag));
    checkStatus(status);

    // Enable IO for playback
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Output,
                                  kOutputBus,
                                  &flag,
                                  sizeof(flag));
    checkStatus(status);

    // Describe format
    AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate = 44100.0f; // FS
    audioFormat.mFormatID = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;
    audioFormat.mChannelsPerFrame = 1; // stereo output
    audioFormat.mFramesPerPacket = 1;
    audioFormat.mBitsPerChannel = sizeof(short) * 8; // 16-bit
    audioFormat.mBytesPerFrame = audioFormat.mBitsPerChannel / 8 * audioFormat.mChannelsPerFrame;
    audioFormat.mBytesPerPacket = audioFormat.mBytesPerFrame * audioFormat.mFramesPerPacket;

    // Apply format
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &audioFormat,
                                  sizeof(audioFormat));
    checkStatus(status);
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Input,
                                  kOutputBus,
                                  &audioFormat,
                                  sizeof(audioFormat));
    checkStatus(status);

    // Set input callback
    AURenderCallbackStruct callbackStruct;
    callbackStruct.inputProc = recordingCallback;
    callbackStruct.inputProcRefCon = (__bridge void*)self;
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioOutputUnitProperty_SetInputCallback,
                                  kAudioUnitScope_Global,
                                  kInputBus,
                                  &callbackStruct,
                                  sizeof(callbackStruct));
    checkStatus(status);

    // Set output callback
    callbackStruct.inputProc = playbackCallback;
    callbackStruct.inputProcRefCon = (__bridge void*)self;
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioUnitProperty_SetRenderCallback,
                                  kAudioUnitScope_Global,
                                  kOutputBus,
                                  &callbackStruct,
                                  sizeof(callbackStruct));
    checkStatus(status);

    /*
    // Disable buffer allocation for the recorder (optional - do this if we want to pass in our own)
    flag = 0;
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioUnitProperty_ShouldAllocateBuffer,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &flag,
                                  sizeof(flag));

    // Allocate our own buffers (1 channel, 16 bits per sample, thus 16 bits per frame, thus 2 bytes per frame).
    // Practice learns the buffers used contain 512 frames, if this changes it will be fixed in processAudio.
    tempBuffer.mNumberChannels = 1;
    tempBuffer.mDataByteSize = 512 * 2;
    tempBuffer.mData = malloc( 512 * 2 );
    checkStatus(status);

    // Disable buffer allocation for the recorder (optional - do this if we want to pass in our own)
    flag = 0;
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioUnitProperty_ShouldAllocateBuffer,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &flag,
                                  sizeof(flag));

    // TODO: Allocate our own buffers if we want
    */

    // Initialise
    status = AudioUnitInitialize(audioUnit);
    checkStatus(status);

    conversionBuffer = (SInt16 *) malloc(1024 * sizeof(SInt16));
} 
```

> **顺便说一句，有没有办法设置 audioFormat.mFramesPerPacket > 1 ？**
> 
> 就我而言，如果参数 > 1，它将打印错误。
> 
> 我正在考虑发送一个包含多帧的缓冲区（以获取更多时间在远程端播放），它应该比为 VOIP 发送一个帧一个数据包更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:49:32.230

由于两个设备的音频采样率时钟不会完全同步，因此您将不得不处理由于轻微的采样率不匹配以及网络延迟抖动而导致的缓冲区下溢和溢出。

另请注意，发送到 RemoteIO 回调的缓冲区大小可能不会保持不变，因此两个回调必须能够处理缓冲区大小不匹配的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:24:37.847

我现在刚刚解决了这个问题！

需要设置音频会话的属性，确保两个设备具有相同的 BufferDuration

```
 // set preferred buffer size
    Float32 audioBufferSize = (set up the duration);
    UInt32 size = sizeof(audioBufferSize);
    result = AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareIOBufferDuration,
                           size, &audioBufferSize); 
```

# regex - 从文件中只解析需要的行

> ID：13515890
> 
> 赞同：1
> 
> 时间：2012-11-22T15:31:11.830
> 
> 标签：regex, perl, parsing

如何仅解析包含单词 QUERY 的行？我试过了：

```
my @strs  = loadf('ck.txt');    

while(1)
{
    my $str = shift @strs;
    if(!$str)   
    {
        exit;
    }
    if($str =~ /QUERY/)
    {
        ($cl) = $str =~ /QUERY: (.*?)/;
        open F, ">>go.txt";
        print F $cl;
        close F;    
    }
}

sub loadf {
    open (F, "<".$_[0]) or erroropen($_[0]);
    chomp(my @data = <F>);
    close F;
    return @data;
} 
```

ck.txt：

```
22.11.2012 16:55:45 +02:00
IP: 99.992.92.992
QUERY: BANNER_LANG=ru; textext community-lang=ru
REFERER: http:/site.ru/827
AGENT: Opera/9.80 (Windows NT 6.0) Presto/2.12.388 Version/12.10

22.11.2012 16:55:44 +02:00
IP: 89.189.191.6
QUERY: BANNER_LANG=ru; text; community-lang=ru
REFERER: http:/site.ru/444
AGENT: Opera/9.80 (Windows NT 5.1; U; ru) Presto/2.10.289 Version/12.00 
```

但它没有吨工作=\­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:45:51.727

你的问题是`(.*?)`. `?`使匹配不贪婪，因此它将匹配尽可能少的字符，同时仍满足正则表达式。在这种情况下，那总是零个字符。

此外，您的代码可以简化：

```
use strict;
use warnings;

my @strs  = ('BLAH', ' QUERY: foobarbaz', 'QUERY asdf');    

#open the file once: more efficient.
open my $file, '>>', 'go.txt' or die "Can't open file: $!";
for  my $str (@strs)
{
    #Perform all matching logic in one go.
    if($str =~ m/QUERY: (.*)/)
    {
        print {$file} $1;
    }
}
close $file; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:45:14.373

删除`?`以使其贪婪或`$`在关闭后添加`)`

例如

```
QUERY: (.*) 
```

或者

```
QUERY: (.*?)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:41:29.010

你把事情复杂化了。您的问题可以通过单线解决：

```
perl -nlwe 'print if /^QUERY/' query.txt >> go.txt 
```

`^`如果您的数据不规则，您可以考虑从正则表达式中删除行锚的开始。

如果你想删除这个词`QUERY:`，你可以使用这个单行：

```
perl -nlwe 'print if s/^QUERY:\s*//' query.txt >> go.txt 
```

这个单行代码的解析代码是（为简单起见进行了编辑）：

```
use warnings;                       # -w option: enable warnings
BEGIN { $/ = "\n"; $\ = "\n"; }     # -l option: handle line endings
while (<>) {                        # -n option: read input file or stdin
    chomp;                          # -l option again
    print $_ if s/^QUERY:\s+//;     # our code
} 
```

# jquery - 用于自动分页搜索结果的 jquery 插件，具有排序功能

> ID：13515891
> 
> 赞同：1
> 
> 时间：2012-11-22T15:31:13.070
> 
> 标签：jquery, ajax, pagination

我觉得有一个更好的名字我不知道，但我正在寻找一个插件，它可以在容器中为您提供一个页面价值的结果，使用 ajax，并且当您将容器向下滚动到底部时结果（或靠近底部）它会再次调用以获取结果的第 2 页，并将它们附加到列表的底部等，这样就无需单击显示“第 2 页”、“第 3 页”的链接"等，您向下滚动，它会自动填充它们。

我有一个与常规分页搜索（非ajax）一起使用的后端，带有用于排序列和顺序的额外参数，所以只需寻找插入它的东西。可能不会太难写，但我很懒，我相信有人已经做到了:)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:49:59.387

您正在寻找的是所谓的无尽分页，有几个插件： [http ://www.webdeveloperjuice.com/2012/05/26/10-aggressively-used-jquery-infinite-scroll-plugins-for-endless-寻呼/](http://www.webdeveloperjuice.com/2012/05/26/10-aggressively-used-jquery-infinite-scroll-plugins-for-endless-paging/)

刚刚google了一下，和那个页面没有关系xD

# r - 使用 pandoc 从 Markdown 转换为 PDF 时设置边距大小

> ID：13515893
> 
> 赞同：224
> 
> 时间：2012-11-22T15:31:31.753
> 
> 标签：r, latex, markdown, knitr, pandoc

我在 RStudio 中创建了一个 RMarkdown 文件，并设法用 knitr 将它编织成一个 HTML 和 .md 文件。接下来，我使用 pandoc 将 .md 文件转换为 PDF 文件（如果我尝试从 .html 文件进行转换，则会收到错误消息）。但是，生成的 PDF 有很大的边距（如[http://johnmacfarlane.net/pandoc/demo/example13.pdf](http://johnmacfarlane.net/pandoc/demo/example13.pdf)）。我怎样才能让 pandoc 生产利润较小的东西？我浏览了 pandoc 用户指南，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-11-22T15:40:51.943

### rmarkdown 和 pandoc 的最新版本

在最新版本的**rmarkdown**中，可以通过顶级元素在 YAML 标头中设置边距`geometry`。您在`geometry`标签中指定的内容将通过以下 LaTeX 片段传送到 Pandoc 附带的 LaTeX 模板中

```
$if(geometry)$
\usepackage[$for(geometry)$$geometry$$sep$,$endfor$]{geometry}
$endif$ 
```

例如，要指定宽度为 2 厘米的边距，可以包括

```
---
title: "Habits"
author: John Doe
date: March 22, 2005
geometry: margin=2cm
output: pdf_document
--- 
```

要将更复杂的规范传递给**几何**LaTeX 包，请将选项串在一起，就像使用 LaTeX 一样：

```
---
title: "Habits"
author: John Doe
date: March 22, 2005
geometry: "left=3cm,right=3cm,top=2cm,bottom=2cm"
output: pdf_document
--- 
```

* * *

### 原始答案

这是一个 LaTeX 问题，因为 Pandoc 通过 LaTeX 呈现为 PDF - 您链接到的内容代表 LaTeX 文档的默认边距。

例如，**几何**LaTeX 包可用于更改页面的边距。但是，您需要一种方法来告诉 Pandoc 使用它，方法是将其包含在应用于转换后的 md 文件的 LaTeX 标头中。

[Pandoc 用户指南](http://johnmacfarlane.net/pandoc/README.html)中记录了如何执行此操作。请特别参阅`--template=FILE`命令行参数和[模板部分](http://johnmacfarlane.net/pandoc/README.html#templates)。本质上，要么找到并修改默认模板以包含您要使用的 LaTeX 指令，要么从头开始创建自己的模板并将其放置在适当的位置；请参阅`--data-dir`命令行参数。

* * *

如果您使用的是最新版本的 Pandoc，另一种选择是使用变量参数（使用`-V KEY[=VAL]`或设置`--variable=KEY[:VAL]`）。该`geometry`包于 2012 年 5 月添加到默认的 LaTeX 模板中（请参阅[此讨论](https://groups.google.com/forum/#!topic/pandoc-discuss/59mBEixlIJU/discussion)）。因此，如果您想更改页边距，您可以使用：

```
pandoc -V geometry:margin=1in -o output.pdf input.md 
```

您也可以指定多个变量值。例如，如果您想创建一个 4 x 6 英寸、边距为半英寸的 pdf，您可以使用：

```
pandoc -V geometry:paperwidth=4in -V geometry:paperheight=6in -V geometry:margin=.5in -o output.pdf input.md 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2014-10-15T00:14:05.910

在更新版本的 pandoc 中，您可以在[YAML 标头](http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html#extension-yaml_metadata_block)中设置许多参数。您可以在此处设置几何图形，例如：

```
---
title:  Pandoc nice margins example
author: naught101
geometry: margin=3cm
---

body text of document 
```

当 pandoc 将其转换为 pdf 时，它应该具有正确的边距。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-26T09:46:50.783

FTR：上面的“最新版本”似乎包括 Knitr 1.30，在我需要以下标题之前：

```
---
  pdf_document: null
  geometry: margin=1cm
  output: pdf_document
--- 
```

没有额外`pdf_document: null`的几何设置没有效果。有了它，来自[https://bookdown.org/yihui/rmarkdown-cookbook/latex-variables.html](https://bookdown.org/yihui/rmarkdown-cookbook/latex-variables.html)的设置就起作用了。

# java - 套接字编程中的连接被拒绝异常

> ID：13515898
> 
> 赞同：2
> 
> 时间：2012-11-22T15:31:51.317
> 
> 标签：java

在java中的简单套接字编程中，在创建新套接字及其在wan上时应该给出什么ip

//服务器端

```
ServerSocket ss = new ServerSocket(8888);
System.out.println("\n\n\tWaiting for connection\n");
Socket c = ss.accept();
System.out.println("\n\n\tConnection established\n");

//Client side
Socket c=new Socket("192.16*****",8888);
System.out.println("\n\n\tSuccessfully connected to the server");

//in **** there is complete ip address of my computer .... i.e. IPV4 address (checked 

//from ipconfig command on cmd) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:33:32.157

默认情况下，新的`ServerSocket`应该绑定到所有网络接口。您应该能够通过运行找出正在使用的接口（我假设您正在运行 Windows，因为您提到了 ipconfig）：

```
netstat -an |find /i "8888" 
```

如果实际上应用程序正在创建一个套接字并绑定到所有接口，您应该会看到如下条目：

```
TCP   0.0.0.0:8888   0.0.0.0:0   LISTENING 
```

否则，您应该能够获取正在使用的接口（它是左侧的第一个 IP 地址）。

# unicode - 通过 Applescript 中的分隔符打破 UTF-16 Unicode 文本？

> ID：13515901
> 
> 赞同：0
> 
> 时间：2012-11-22T15:32:07.947
> 
> 标签：unicode, applescript

我有一个用 MacRoman 编码的文本列表，由换行符打破。不知何故，第二个列表无法保存在 MacRoman 中，所以我不得不使用 Unicode UTF-16 来获取德语“ö”、“ä”等。虽然 ListA 像预期的那样被填充，但 listB 不再被破坏，我最终得到一个字符串，我无法再破坏/不知道如何破坏。有人可以帮我吗？

```
set ListA to (read file myFile1 using delimiter linefeed) as list    
display dialog "" & item 1 of ListA    
--> "Name A" 

set ListB to (read file myFile2 using delimiter linefeed as Unicode text) as list    
display dialog "" & item 1 of ListB    
--> "Name A    
Name B    
Name C    
Name D" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:54:27.703

可以有许多不同类型的字符来分隔文本文件中的行。它并不总是换行。处理它们的最简单方法是使用 applescript 命令“paragraphs”，而不是在读取文件时使用分隔符。Paragraphs 非常擅长找出使用的字符并进行处理。它并不总是有效，但在你深入研究问题之前值得一试。因此，尝试像这样读取您的文件...

```
set ListB to paragraphs of (read file myFile2 as Unicode text) 
```

如果这不起作用，那么您将不得不尝试找出角色是什么。在这些情况下，我所做的是物理打开文件并用鼠标选择返回字符......然后复制它。然后我回到 AppleScript Editor 并将其粘贴到这个命令中。将其粘贴到我有字母“a”的位置。它会给你角色ID。

```
id of "a" 
```

然后你可以像这样使用分隔符读取文件，显然使用上面命令中的 id 号代替 97 ...

```
set ListB to read file myFile2 using delimiter (character id 97) as Unicode text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:22:06.107

您确定该文件使用 LF 行尾吗？这对我有用：

```
set f to POSIX file "/tmp/1"
set b to open for access f with write permission
set eof b to 0
write "あ" & linefeed & "い" to b as Unicode text -- UTF-16
close access b
read f using delimiter linefeed as Unicode text 
```

您是否尝试将文件保存为 UTF-8？您可以通过替换为来阅读`Unicode text`它`«class utf8»`。

# java - 为多个来源生成唯一 ID

> ID：13515912
> 
> 赞同：1
> 
> 时间：2012-11-22T15:32:38.030
> 
> 标签：java, events

考虑 N 个数据源，每个数据源都有一个事件流

```
Event{
    long id;
    Object data;
} 
```

一个流中的一些事件可能具有相同的 id，因为事件可能跨越更新、新等。所以我们可以看到以下两个流：

```
<1, 2, 3, 1, 5, 2>
<3, 3, 4, 5, 4> 
```

我现在想将这些组合成一个流，每个订单 ID 肯定是唯一的。

简单的方法是使用 String 而不是 long 并附加源编号，生成类似：

```
<"1 - 1", "1 - 2", "1 - 3", "2-3", "2-3" ... > 
```

有没有更多的记忆coimpact方式/更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:39:37.387

您的 String 解决方案很好，实际上很常见。如果您有兴趣使其更紧凑，您可能需要使用整数元组。

分布式系统中使用的另一种常用方法是使用范围分配：有一个中央（单例）服务器分配范围，每个客户端可以在其中命名其 ID。例如，这样的服务器可以将范围 0-99 分配给 client1，将 100-199 分配给 client2 等。当客户端用尽分配的范围时，它会再次联系服务器以分配新的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:26:40.040

根据您的流/事件编号的范围，您可以将这两个数字组合成一个 int 或 long，将流编号放在这么多位的顶部，将事件编号放在这么多位的底部。例如：

```
public static int getCombinedNo(int streamNo, int eventNo) {
    if (streamNo >= (1 << 16))
      throw new IllegalArgumentException("Stream no too big");
    if (eventNo >= (1 << 16))
      throw new IllegalArgumentException("Event no too big");
    return (streamNo << 16) | eventNo;
} 
```

对于您提到的类型的典型字符串，这将仅使用每个 int 4 个字节，而不是按（比如说）50-ish 字节的顺序。（在这种情况下，它还假设流和事件编号都不会超过 65535。）

但是：你的字符串解决方案也很好很清晰。内存真的那么紧，以至于您无法为每个事件节省额外的 50 个字节吗？

# pagination - Paginator（从 Cake 1.3 迁移到 2.0）

> ID：13515913
> 
> 赞同：1
> 
> 时间：2012-11-22T15:32:39.497
> 
> 标签：pagination, migration, cakephp-2.0

我在 Cakephp 2.0 中的分页器上苦苦挣扎。当我尝试将我的应用程序迁移到 2.0 时，我找不到任何直接跳转到最后一页的解决方案。在 1.3 中，像这样从外部执行此操作很安静：

```
echo $this->Html->link(__('Flights'), array('controller' => 'flights',
    'action' => 'index','page' => 'last')); 
```

但是这个在 2.0 中放入 'page:last' 的小技巧不再起作用了。当然有一个名为 last 的 Paginator 函数，但这只有在我已经在应用程序中时才有帮助。我的问题是从外部链接直接访问分页器的最后一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:12:10.690

如果“last”作为页码传递，您可以自己“计算”最后一页；

我*不鼓励*在 CakePHP 库文件中进行修改，因为这会使将来难以执行升级。

基本上，PaginatorHelper 使用由 PaginatorComponent 计算和设置的 viewVars，如下所示：[https ://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Component/PaginatorComponent.php#L212](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Component/PaginatorComponent.php#L212)

你可以在你的行动中复制它；例如：

```
public function index()
{
    if (!empty($this->request->params['named']['page'])) {
        switch($this->request->params['named']['page']) {
           case 'first':
                // replace the 'last' with actual number of the first page
                $this->request->params['named']['page'] = 1;
                break;

           case 'last':
                // calculate the last page
                $limit = 10; // your limit here
                $count = $this->Flight->find('count');
                $pageCount = intval(ceil($count / $limit));

                // replace the 'last' with actual number of the last page
                $this->request->params['named']['page'] = $pageCount;
                break;
        }

    }

    // then, paginate as usual
    $this->set('data', $this->paginate('Flight'));
} 
```

为了改进这一点，应该将此逻辑移至单独的方法或行为。然而; 如上所示，**不需要**在 PaginatorComponent 中进行修改！

另请注意，我的示例中的“查找（计数）”不采用附加条件，如果需要，应添加它们

如果您查看 CakePHP 1.3 的源`paginate()`代码，上面的代码是可比较的；[https://github.com/cakephp/cakephp/blob/1.3/cake/libs/controller/controller.php#L1204](https://github.com/cakephp/cakephp/blob/1.3/cake/libs/controller/controller.php#L1204)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:17:29.727

在为这个问题创建赏金后不久，我使用 CakePHP 2.2.4 找到了我的问题的解决方案。我试图完成相同的任务，但使用 2.2.4 版本而不是 2.0。基本上，如果我有一个看起来像[http://www.domain.com/articles/page:last](http://www.domain.com/articles/page:last)的链接，控制器的分页方法将知道要转到哪个页面并显示该页面的正确结果（文章）。例如，如果我有 110 篇文章并且分页限制设置为 25，通过转到该 URL，它将显示第 5 页，共 5 页，显示记录 101-110。如果我转到“page:first”，我也想要同样的能力。

我需要更改我的库文件**lib/Cake/Controller/Component/PaginatorComponent.php**。

我变了

```
if (intval($page) < 1) {
    $page = 1;
} 
```

至

```
if ((intval($page) < 1 && $page != "last") || $page == "first") {
    $page = 1;
} 
```

我还添加了

```
if($page == "last"){
    $page = $pageCount;
} 
```

线后

```
$pageCount = intval(ceil($count / $limit)); 
```

Christian Waschke，使用此解决方案，您可以使用与您在问题中所写完全相同的链接助手。对我来说，链接助手看起来像这样

```
<?php echo $this->Html->link('Go to Last Page', array('controller' => 'articles', 'action' => 'index', 'page' => 'last')); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:58:26.850

这是简单的方法：

```
echo  $this->Paginator->last('Any text'); 
```

获取最后一页编号的其他方法是：

```
echo  $this->Paginator->counter(array('format' => '{:pages}')); 
```

然后您可以使用它来生成您的链接。

欲了解更多信息： [http ://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper::last](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper::last)

# python - django 模板呈现“ <bound method..”而不是上下文变量<="" h1="">> ID：13515917
> 
> 赞同：2
> 
> 时间：2012-11-22T15:33:11.457
> 
> 标签：python, django, templates, html-safe

我有一个模板 ' `cart_summary.html`' 当我显示为另一个模板上的包含时，它呈现得很好`{% include 'cart/cart_summary.html' %}`。

但是，当我直接从视图函数（由 ajax 调用）呈现它时，我的上下文变量不会按预期呈现：

```
# views.py
def add_to_cart(request):
    ...
    cart = request.session['cart']
    ...
    return render_to_response('cart/cart_summary.html', {'cart': cart}) 
```

我的 cart_summary.html 模板 -

```
<a src="{% url cart-page pk=cart.pk %}">
    <span> CART ({{ cart.count }}) &pound;{{ cart.get_total }} </span>
    <img id="cart_icon" src="{{ STATIC_URL }}images/cart_icon.tiff">
</a> 
```

这是我要返回浏览器的东西-

```
<span> CART (&lt;bound method ManyRelatedManager.count of &lt;django.db.models.fields.related.ManyRelatedManager object at 0x106bfa150&gt;&gt;) &pound; </span>
<img id="cart_icon" src="images/cart_icon.tiff"> 
```

我需要做什么才能获得正确呈现的字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T13:30:04.430

您的方法返回的是方法而不是值。

可能它正在返回`queryset.count`而不是`queryset.count()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T10:34:21.727

经过几个小时调试一些非常糟糕的代码（我的代码）后，我发现了错误。它实际上是在 Cart 模型中。count 函数被编写为返回一个方法而不是方法的输出

```
def count(self):
    return self.items.count 
```

本来应该

```
def count(self):
    self.items.count() 
```

我被它转换为 html 安全代码（以及我的代码中的所有其他错误）的事实所抛弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:48:26.023

试试这个...

```
from django import template
return render_to_response('cart/cart_summary.html', {'cart': cart}, context_instance = template.RequestContent(request)) 
```</bound>

# actionscript-3 - 影片剪辑库名称

> ID：13515923
> 
> 赞同：0
> 
> 时间：2012-11-22T15:33:25.933
> 
> 标签：actionscript-3, flash

我有一个没有名字的movieclip，库名是“foo”。

但是如果我不使用“Export for ActionScript”选项，movieclip 类是“flash.display.MovieClip”，我找不到使用库名称“foo”之类的

遍历所有元素： if (getQualifiedClassName(this.getChildAt(i)) == "foo")

并且 .name 属性是“instance1”。

有一种方法可以在不使用“Export for ActionScript”的情况下识别影片剪辑“类”或库名称吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:06:41.037

据我所知，如果您不为 ActionScript 导出一个类，它将被初始化为一个通用的 DisplayObject，除了图形之外没有设置任何属性。您将无法使用名称或对象类型来检查它，因为它没有要检查的名称或类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:33:31.647

添加类名非常容易（双击库中“AS Linkage”下的空白字段并输入名称）。如果你不给它一个类，任何实例都将是 MovieClip 的实例（扩展 Sprite）。如果你*给*它一个类，任何实例都将是该类的实例（扩展 MovieClip）。您可以通过键入类似`trace(describeType(getChildAt(0)));`.

库和文件夹名称纯粹是组织性的。您可以使用您的 JSFL 脚本找到它们，因为 JSFL 正在与进行组织的 IDE 对话......对不起

如果由于某种原因您无法添加类名，也许您对相关实例有所了解？就像它有一个孩子命名为特定的东西（你可以搜索）。

# wordpress - nginx + wordpress + permalink - 除了 /feed/ 之外的工作

> ID：13515925
> 
> 赞同：0
> 
> 时间：2012-11-22T15:33:37.493
> 
> 标签：wordpress, nginx, permalinks, php

我有一个运行良好的网络服务器，在 Debian 6.0.3、nginx + php-fpm 上运行，以 wordpress 作为我的博客后端。我已经使用[lempstack中的 bash 脚本完成了设置](https://github.com/aatishnn/lempstack)

永久链接适用于我的页面和帖子，除了提要。我从中得到 404，`mydomain.com/feed/`但如果我已经登录，它就可以工作，这不是我想要的。

我正在尝试调试重定向，wordpress 是抛出 404 的那个。我尝试了 nginx 站点配置的变体，但结果仍然相同。有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:37:38.973

终于找到问题了，和nginx或php无关。显然，如果根本没有帖子，则使用返回 404 访问 rss 提要。它在我登录时有效，因为我有一些私人帖子。

# java - Java - 将字符串拆分为数组

> ID：13515929
> 
> 赞同：0
> 
> 时间：2012-11-22T15:33:52.940
> 
> 标签：java

我有一个用户提交的号码。
我想做这样的事情：`1568301`
到这样的数组：`1, 5, 6, 8, 3, 0, 1`。

我怎么能做到这一点而不在每个数字之间添加“，”或类似的东西？（类型 int）。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T15:35:15.657

```
String str = "123456";
str.toCharArray(); 
```

会大致做你想做的事。使用正则表达式的更复杂的版本是：

```
String str = "123456";
str.split("(?<!^)"); 
```

它使用否定的lookbehind（`split()`采用正则表达式-上面说只要左边的元素不是行首，就可以分割任何东西。`split("")`会给你一个前导的空白字符串）。

第二种解决方案更复杂，但为您提供了一个`Strings`. 另请注意，它会为您提供一个用于空白输入的单元素空数组。第一个解决方案为您提供了一个`Chars`. 无论哪种方式，您都必须将它们映射到`Integers`（可能使用`Integer.parseInt()`或`Character.digit()`？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T15:37:00.120

`"1568301".toCharArray()`应该做的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T15:48:22.210

您可以将拆分与“”一起使用，它将是这样的：

```
String test = "123456";
String test2[] = test.split("");
for (int i = 1; i < test2.length; i++) {
    System.out.println(test2[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T15:35:32.917

你不能简单地通过迭代字符串来填充数组吗？

```
char[] arr = new char[str.length];
for(int i=0; i<str.length; i++){
   arr[i] = str.charAt(i);
} 
```

甚至更好

```
char[] arr = "0123456".toCharArray(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T15:38:41.163

要获取整数数组中的值：

```
String str = "1568301";
int[] vals = new int[str.length];
for (int i = 0; i < str.length(); i++) {
    vals[i] = Character.digit(str.charAt(i), /* base */ 10));
} 
```

的第二个参数`Character.digit(char, int)`是基数。我假设你的号码是以 10 为底的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T15:39:30.930

如果您的号码是`String`格式，您可以简单地执行以下操作：

```
 String str = "1568301";
    char[] digitChars = str.toCharArray(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-22T15:39:36.077

期待这样的事情

```
 String ss ="1568301";
    char[] chars = ss.toCharArray(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-22T15:44:13.643

我猜你正在寻找一个int数组。

我建议使用以下代码：

```
String str = "1568301";
int [] arr = new int[str.length()];
for(int i=0; i<arr.length; i++)
{
  arr[i] = str.charAt(i)-'0';
} 
```

# objective-c - 有时无法隐藏 iOS 键盘并显示 UIPickerView

> ID：13515933
> 
> 赞同：0
> 
> 时间：2012-11-22T15:34:13.747
> 
> 标签：objective-c, uitextfield, uipickerview

这是我的`.h`

```
xxxx : UIViewController<UITextFieldDelegate> 
```

和我的`.m`

```
UITextField *quarterPicker = [[[UITextField alloc] init] autorelease];
[quarterPicker setFrame:CGRectMake(150, 370, 60, 30)];
[quarterPicker setText: @"Q1"];
quarterPicker.delegate = self; 
```

我用

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
     NSLog(@"textFieldShouldBeginEditing"); 
    [textField resignFirstResponder];
    [textField addTarget:self action:@selector(selectQuarterPicker:) forControlEvents:UIControlEventTouchDown];
    return NO;  // Hide both keyboard and blinking cursor.
} 
```

当我触摸我的文本字段时，我总是看到这个日志`textFieldShouldBeginEditing`

但是有一段时间，我的 Picker 没有显示出来。我使用：[https](https://github.com/TimCinel/ActionSheetPicker) ://github.com/TimCinel/ActionSheetPicker来制作 Picker。

我发现，当我刷我的 textFiled 时，我的选择器会显示。

我怎样才能解决这个问题？

**更新：**我把我的`UITextFiled`网站`UIScrollView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:38:00.167

您正在为第一次触摸后的触摸事件添加目标。所以只有第二个会起作用。为什么要添加这个事件？您可以简单地在 shouldBeginEditing 中显示选择器，而无需添加触摸事件

就像是

```
[self selectQuarterPicker:self]; //assuming the parameter is the sender as you commented 
```

# php - 链接 (CSS) 和脚本不会使用共享文件夹文档根目录更新我的 VM 上的内容

> ID：13515937
> 
> 赞同：6
> 
> 时间：2012-11-22T15:34:22.920
> 
> 标签：php, apache, virtual-machine

我已经在我的 CentOS6 虚拟机上全新安装了 Apache 和 PHP，我还创建了一个共享文件夹并将其用作我的文档根目录。

一切正常，我可以访问网站，做我想做的所有事情，我可以在我的工作站上编辑 PHP 文件，当在浏览器中测试时它们会立即更新。

但是，在编辑“链接”到网站的 CSS 和 JavaScript 文件时，我遇到了一个奇怪的问题，在对页面进行非缓存重新加载时，它们不会更新内容，但会更新内容长度。

因此，如果我在脚本中添加了任何内容，它将给我相同的内容，但内容长度更长，并尝试通过添加未知字符符号（方形问号）来纠正这个问题。

如果我删除了一些相反的东西，它会识别出内容长度更短，并在最后开始删除一些东西。

这发生在两次全新安装中，我曾尝试用谷歌搜索遇到相同问题的人，但问题的分散性使其难以定义。

我已经尝试了所有可能的 Apache 配置来强制未缓存的结果，但都没有运气。

我发现强制它更新的唯一方法是重新安装共享文件夹

如果您需要更多信息，我很乐意提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:31:58.070

当我开始怀疑问题不在缓存中时，任何其他问题都稍微超出了我的能力范围，因为我对 virtualbox 的工作并不多。

然而，我的一位同事指出，vboxsf“不够好”（不是用那些话）。因此，当我有其他事情要做时，搜索更容易定义和快速！

[https://forums.virtualbox.org/viewtopic.php?f=3&t=1940&p=6680&hilit=shared+folder+apache#p6680](https://forums.virtualbox.org/viewtopic.php?f=3&t=1940&p=6680&hilit=shared+folder+apache#p6680)

这导致了这一点：

[http://httpd.apache.org/docs/2.0/faq/error.html#error.sendfile](http://httpd.apache.org/docs/2.0/faq/error.html#error.sendfile)

禁用它们为我解决了这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:47:10.623

那么肯定有一些缓存正在某处进行。

我处理这个问题的策略是将 .css /.js 文件的[filemtime()](http://uk1.php.net/manual/en/function.filemtime.php)附加到链接的末尾。

你最终会得到像这样的链接

```
<link type='text/css' rel='stylesheet' media='screen' href='stylesheet.css?1352889543' /> 
```

这样，服务器和浏览器都不可能缓存已被修改的文件。

# java - 使用其他类的arraylist和适配器

> ID：13515939
> 
> 赞同：0
> 
> 时间：2012-11-22T15:34:23.607
> 
> 标签：java, android, static, arraylist

我想使用一个适配器和一个在 Inicio.java 中声明的 ArrayList ，例如：

在 Inicio.java 中

```
public static AdaptadorImagenes adaptador;
public static ArrayList<String> pathImagenes;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.layout_incio);

            if (android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.HONEYCOMB_MR2) {
                ActionBar actionBar = getActionBar();
                actionBar.hide();

            }
            contexto = getApplicationContext();
            datos = new ArrayList<Integer>();
            pathImagenes = new ArrayList<String>();

            recojeDatosDeSesion(savedInstanceState);
            adaptador = new AdaptadorImagenes(contexto); 
```

和 service.java

```
 Inicio.pathImagenes.add(pathImagen); 
```

该活动启动服务，但是当我尝试执行 Inicio.pathimagenes 时，这将返回我的空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:41:46.653

只需在声明时初始化列表（不在 中`onCreate`）：

```
public static ArrayList<String> pathImagenes = new ArrayList<String(); 
```

# sql - Oracle SQL 仅选择与月末或季度末对齐的日期

> ID：13515948
> 
> 赞同：0
> 
> 时间：2012-11-22T15:34:51.167
> 
> 标签：sql, oracle, date-arithmetic

我有一个查询，用户输入开始和结束日期。

```
AND PP.PATTR_CALCUL_DATE >= '31 JUN 2012'
AND PP.PATTR_CALCUL_DATE <= '30 SEP 2012' 
```

查询返回如下数据：

```
|    DATE    |  VALUE  |
| 01/07/2012 |   1.25  |
| 31/07/2012 |   2.25  |
| 05/09/2012 |   1.75  |
| 22/08/2012 |   3.99  |
| 30/09/2012 |   1.25  |
| 31/08/2012 |   6.37  | 
```

根据用户定义的变量，查询要么需要返回指定范围内与月末对齐的所有日期。所以这种情况下的结果是：

```
|    DATE    |  VALUE  |
| 31/07/2012 |   2.25  |
| 30/09/2012 |   1.25  |
| 31/08/2012 |   6.37  | 
```

或者它需要返回与季度结束一致的所有日期。结果将是：

```
|    DATE    |  VALUE  |
| 30/09/2012 |   1.25  | 
```

他们还需要第三个选项，它只返回原始表中的所有数据

请感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:59:01.167

您可以创建一个将根据参数更改的条件：

```
/* with :param = 'date' */
SQL> WITH data AS (
  2  SELECT to_date('01/07/2012', 'dd/mm/yyyy') dat, 1.25 value FROM DUAL
  3  UNION ALL SELECT to_date('31/07/2012', 'dd/mm/yyyy'), 2.25 FROM DUAL
  4  UNION ALL SELECT to_date('05/09/2012', 'dd/mm/yyyy'), 1.75 FROM DUAL
  5  UNION ALL SELECT to_date('22/08/2012', 'dd/mm/yyyy'), 3.99 FROM DUAL
  6  UNION ALL SELECT to_date('30/09/2012', 'dd/mm/yyyy'), 1.25 FROM DUAL
  7  UNION ALL SELECT to_date('31/08/2012', 'dd/mm/yyyy'), 6.37 FROM DUAL
  8  )
  9  SELECT dat,
 10         value
 11    FROM data
 12   WHERE dat = CASE :param
 13                 WHEN 'date'    THEN dat
 14                 WHEN 'month'   THEN last_day(dat)
 15                 WHEN 'quarter' THEN add_months(trunc(dat, 'q'), 3) - 1
 16               END;

DAT              VALUE
----------- ----------
01/07/2012        1,25
31/07/2012        2,25
05/09/2012        1,75
22/08/2012        3,99
30/09/2012        1,25
31/08/2012        6,37

/* with :param = 'month' */
DAT              VALUE
----------- ----------
31/07/2012        2,25
30/09/2012        1,25
31/08/2012        6,37

/* with :param = 'quarter' */
DAT              VALUE
----------- ----------
30/09/2012        1,25 
```

# android - Free memory from AnimationDrawable

> ID：13515950
> 
> 赞同：5
> 
> 时间：2012-11-22T15:35:01.650
> 
> 标签：android, animationdrawable

I'm using animationdrawables in many activities of my app. This is the code to inicializate them:

```
 public void prepareVideo (int resourceBall, String animation, int width, int height ){

    imgBall = (ImageView)findViewById(resourceBall);
    imgBall.setVisibility(ImageView.VISIBLE);
    String resourceNameAnimation = animation;
    int id_res = getResources().getIdentifier(resourceNameAnimation, "drawable", getPackageName());
    imgBall.setBackgroundResource(id_res);
        LayoutParams latoutFrame = imgBall.getLayoutParams();
    latoutFrame.width = width;
    latoutFrame.height = height;
    imgBall.setLayoutParams(latoutFrame); 
    frame = (AnimationDrawable) imgBall.getBackground();

} 
```

Then i call: imgBall.post(new StartAnimation());

that call a runnable:

```
class StartAnimation implements Runnable {

    public void run() {

frame.start();

    }

} 
```

The problem is i use many animations that are the uses the same xml (frame by frame). I have to call this method in many activities with the same animation. Finally i get a outofmemoryerror. I'm trying to free memory between screens:

```
for (int i = 0; i < frame.getNumberOfFrames(); ++i){
     Drawable frame_rescue = frame.getFrame(i);
     if (frame_rescue instanceof BitmapDrawable) {
         ((BitmapDrawable)frame_rescue).getBitmap().recycle();
     }
     frame_rescue.setCallback(null); 
```

The problem is that when i try to use a resourde again y get other error: "Trying to use recycled bitmap"

Anyone know other way of free memory?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-21T07:07:06.113

我有同样的问题，问题是可运行的。为每个动画制作一个独立的线程使得animationDrawables 在销毁活动并清除视图和回调后仍然存在。所以在没有独立线程的情况下启动动画让 GC 收集未使用的资源。

# javascript - 拦截浏览器中的所有 UI 事件

> ID：13515959
> 
> 赞同：3
> 
> 时间：2012-11-22T15:35:41.070
> 
> 标签：javascript, google-chrome, javascript-events

有没有办法拦截浏览器中的所有 UI（触摸/点击等）事件（用于监视/调试等） - 在 javascript 代码和任何 chrome 工具中 - 一切顺利。例如，我想标记一些事件（通过添加一些属性）并在处理它时捕获它（甚至不止一次）以查看堆栈跟踪等

**更新：**寻找拦截每个事件*，即使没有*在代码中的某处传播（冒泡/捕获）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:42:25.077

您可以从`Event`构造函数中获取事件类型列表。

```
Object.keys(Event).forEach(function (etype) {
    document.addEventListener(
        etype.toLowerCase(), console.log.bind(console), false
    );
}); 
```

[`Event`接口](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event)暴露的事件类型常量如下（在桌面 Safari 中）：

```
["MOUSEOUT", "FOCUS", "CHANGE", "MOUSEMOVE",
 "SELECT", "BLUR", "KEYUP",   "MOUSEDOWN", "MOUSEDRAG",
 "MOUSEUP", "MOUSEOVER", "CLICK", "DBLCLICK",
 "KEYDOWN", "KEYPRESS", "DRAGDROP"] 
```

# django - Django：过滤通过ForeignKey链接的多个模型？

> ID：13515960
> 
> 赞同：7
> 
> 时间：2012-11-22T15:35:48.523
> 
> 标签：django, django-models, django-queryset

我想为以下值和模型创建一个过滤排序混合：

```
class Course(models.Model):
    title = models.CharField(max_length=70)
    description = models.TextField()
    max_students = models.IntegerField()
    min_students = models.IntegerField()
    is_live = models.BooleanField(default=False)
    is_deleted = models.BooleanField(default=False)
    teacher = models.ForeignKey(User)

class Session(models.Model):
    course = models.ForeignKey(Course)
    title = models.CharField(max_length=50)
    description = models.TextField(max_length=1000, default='')
    date_from = models.DateField()
    date_to = models.DateField()
    time_from = models.TimeField()
    time_to = models.TimeField()

class CourseSignup(models.Model):
    course = models.ForeignKey(Course)
    student = models.ForeignKey(User)
    enrollment_date = models.DateTimeField(auto_now=True)

class TeacherRating(models.Model):
    course = models.ForeignKey(Course)
    teacher = models.ForeignKey(User)
    rated_by = models.ForeignKey(User)
    rating = models.IntegerField(default=0)
    comment = models.CharField(max_length=300, default='') 
```

*   课程可以是“离散数学 1”
*   课程是与课程相关的个别课程（例如 1\. 简介、2\. 第 I 章、3 期末考试等）以及日期/时间
*   CourseSignup 是学生的“注册”
*   TeacherRating 跟踪学生对老师的评分（课程完成后）

我想实现以下功能

*   按日期（最早的 Session.date_from）、Course.Name 排序（asc、desc）
*   筛选依据：日期（最早的 Session.date_from 和最后的 Session.date_to）、Average TeacherRating（例如最小值 = 3）、CourseSignups（例如最少 5 个用户注册）（这些选项通过 GET 参数传递，例如 sort=date_ascending&f_min_date= 10.10.12&...)

**你将如何为此创建一个函数？**

我试过使用

*   非规范化（只是在 Course 中添加了一个字段以获取所需的过滤/排序标准，并在发生更改时对其进行更新），但我对它不太满意（例如，在每次 TeacherRating 之后需要大量更新）。
*   ForeignKey 查询（Course.objects.filter(session__date_from=xxx)），但我稍后可能会遇到性能问题..

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T01:21:00.437

除了将 Q 对象用于高级 AND/OR 查询之外，还要熟悉反向查找。

当 Django 为外键关系创建反向查找时。在您的情况下，您可以获得属于课程的所有会话，这是两种方式之一，每种方式都可以被过滤。

```
c = Course.objects.get(id=1)
sessions = Session.objects.filter(course__id=c.id) # First way, forward lookup.
sessions = c.session_set.all() # Second way using the reverse lookup session_set added to Course object. 
```

您还需要熟悉`annotate()`and `aggregate()`，这些允许您计算字段并对结果进行排序/过滤。例如，Count、Sum、Avg、Min、Max 等。

```
courses_with_at_least_five_students = Course.objects.annotate(
    num_students=Count('coursesignup_set__all')
).order_by(
    '-num_students'
).filter(
    num_students__gte=5
)

course_earliest_session_within_last_240_days_with_avg_teacher_rating_below_4 = Course.objects.annotate(
    min_session_date_from = Min('session_set__all')
).annotate(
    avg_teacher_rating = Avg('teacherrating_set__all')
).order_by(
    'min_session_date_from',
    '-avg_teacher_rating'
).filter(
    min_session_date_from__gte=datetime.now() - datetime.timedelta(days=240)
    avg_teacher_rating__lte=4
) 
```

Q 用于允许您在查询中进行逻辑 AND 和逻辑 OR。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T18:01:03.023

我建议你看看复杂的查找：[https ://docs.djangoproject.com/en/1.5/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/1.5/topics/db/queries/#complex-lookups-with-q-objects)

以下查询可能不适用于您的情况（教师模型是什么样的？），但我希望它可以作为如何使用复杂查找的指示。

```
from django.db.models import Q

Course.objects.filter(Q(session__date__range=(start,end)) &
                      Q(teacher__rating__gt=3)) 
```

除非绝对必要，否则我确实会避免非规范化。

你的排序问题对我来说并不完全清楚。您想显示按 date_from 过滤的课程，并按日期、名称排序吗？

# excel - EPPlus - saving InvalidOperationException

> ID：13515962
> 
> 赞同：2
> 
> 时间：2012-11-22T15:35:50.527
> 
> 标签：excel, save, epplus, excelpackage

I'm trying to save a file using EPPlus, but I keep getting an InvalidOperationException on the Save() line.

```
System.IO.File.Copy(strSource, strNewNotePath, true);
ExcelPackage xlPackage = new ExcelPackage(new FileInfo(strNewNotePath));
xlPackage.Save(); 
```

The InnerException says "Index was out of range. Must be non-negative and less than the size of the collection.\r\nParameter name: index".

The Excel file has very little in it - just a few drawing items really - rounded rectangles, textboxes, and then two cells with some data in them.

Anyone got any ideas what could be causing this?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T10:40:56.593

我在 EPPlus 的 3.0.0.2 版本中遇到了同样的问题。我尝试创建新的 excel 文件，重新保存现有的文件，但没有奏效。我得到了最新版本（截至 20141016 (3.1.3.0)），它运行良好。

# c++ - QT 中的未知模块：webkit

> ID：13515964
> 
> 赞同：13
> 
> 时间：2012-11-22T15:35:56.340
> 
> 标签：c++, qt, webkit, qtwebkit

添加后`QT += network webkit`我尝试`QT += webkit`了 .pro 解决方案文件并从 QtCreator 内部运行 qmake 并收到此错误：

```
error: Unknown module(s) in QT: webkit 
```

我真的需要利用这些包括：

```
#include <QWebView>
#include <QUrl> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T19:34:55.680

如果您说您安装了 beta 版本，我想您安装了 Qt 版本 5。在这种情况下，webkit 模块不再存在。你需要 webkitwidgets：

```
QT += webkitwidgets 
```

这将添加使用 QWebView 所需的模块。QUrl 在核心模块中，所以不需要网络模块。

# c - Whats the difference between *(a+b) and (*a+b)

> ID：13515965
> 
> 赞同：-1
> 
> 时间：2012-11-22T15:35:57.430
> 
> 标签：c, ansi

A friend helped me with this code and I don't understand how it works. in the 5th line is (*pp-97)*4 basically the size of the char 110 so (110-97)*4 or the scanned value of pp? Thanks

```
char *pp =(char*)malloc(110);
printf("Enter text: ");
scanf("%s", pp); 
*pp = *(pp + n); 
int f = (*pp - 97)*4; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:44:16.487

注意`*pp`等价于`pp[0]`, 通常`*(pp + n)`等价于`pp[n]`, 所以

```
*pp = *(pp + n); 
```

也可以写成`pp[0] = pp[n];`，将`char`at 偏移量复制到偏移量 0 处`n`的第一个。`char`

```
int f = (*pp - 97)*4; 
```

这可以写成

```
int f = (pp[0] - 97)*4; 
```

因此，从块指向`'a'`的第一个中减去97（的 ASCII 值），然后将该差乘以 4。`char``pp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:47:10.420

```
char *pp = malloc(110);
printf("Enter text: ");
scanf("%s", pp); 
pp[0] = pp[n]; 
int f = (pp[0] - 'a')*4; 
```

在 C 中，数组运算符与指针解引用是一回事。通过使用正确的符号，代码变得不那么混乱（imo）。

`*(p + i)`是的同义词`p[i]` 因此`*pp`是相同`*(pp + 0)`的`pp[0]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:46:48.813

这是一个非常奇怪的片段。

这一行基本上声明了一个大小为 110 的字符串：

```
char *pp =(char*)malloc(110); 
```

这两行从用户那里获取输入：

```
printf("Enter text: ");
scanf("%s", pp); 
```

现在这就是事情开始变得奇怪的地方。

```
*pp = *(pp + n); 
```

上面的行将此字符串的第一个字符更改为字符串中的第 n 个字符。

```
int f = (*pp - 97)*4; 
```

现在就这条线而言。在这里，您正在取消引用指针 pp。当您取消引用此指针时，它也将是 pp 指向的第一个字符。这个 char 的值将被转换为一个整数（它的 ASCII 表示），然后减去 97（这是 ASCII 值`a`），然后乘以 4。

# .net - .Net Twitter OAuth how to perform a successful GET request

> ID：13515969
> 
> 赞同：2
> 
> 时间：2012-11-22T15:36:01.197
> 
> 标签：.net, asp.net-mvc, oauth, twitter, twitter-oauth

Following this tutorial I was able to perform a successful post to the Twitter API and update my status.

[http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net?fid=1649027&df=90&mpp=25&noise=3&prof=False&sort=Position&view=Quick&spc=Relaxed&fr=26#xx0xx](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net?fid=1649027&df=90&mpp=25&noise=3&prof=False&sort=Position&view=Quick&spc=Relaxed&fr=26#xx0xx)

However I am having trouble processing a successful GET request. I am trying to modify the Post request to accomplish this but keep getting "Invalid Protocol" errors on my web exception.

The following is the working code that will Post a status update. [https://dev.twitter.com/docs/api/1.1/post/statuses/update](https://dev.twitter.com/docs/api/1.1/post/statuses/update)

I tried to modify the code to perfrom the following GET request [https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

I know I need to add the screen_name or user id parameter that the get request requires. I need to change the base format and string to contain the correct parameters and request. I tried adding the screen name to the headerformat and auth header. (not sure if needed) And If I understand correctly get requests don't require a body.

I tinkered with this code for a while trying to convert it to a get request without success.

How is it done?

**Working Post request**

```
 public ActionResult Test2()
    {
        //Auth

        var oauth_token = "161946489-uLEUgIqbQ...";  //user
        var oauth_token_secret = "kVfAfW6GIbfc....";
        var oauth_consumer_key = "kvXJFgjsLGKs...";  //this is my app
        var oauth_consumer_secret = "2cgBSQyZS...";

        //Request details

        var oauth_version = "1.0";
        var oauth_signature_method = "HMAC-SHA1";
        var oauth_nonce = Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
        var timeSpan = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
        var oauth_timestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();
        var resource_url = "https://api.twitter.com/1.1/statuses/update.json";
        var status = "Updating status via REST API if this works again";
        //var screen_name = "ScreenName";

        //encrypted oAuth signature

        var baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" +
            "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&status={6}";

        var baseString = string.Format(baseFormat,
                                    oauth_consumer_key,
                                    oauth_nonce,
                                    oauth_signature_method,
                                    oauth_timestamp,
                                    oauth_token,
                                    oauth_version,
                                    Uri.EscapeDataString(status)
                                    );

        baseString = string.Concat("POST&", Uri.EscapeDataString(resource_url),
                     "&", Uri.EscapeDataString(baseString));

        //Encrypt data

        var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
                    "&", Uri.EscapeDataString(oauth_token_secret));

        string oauth_signature;
        using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
        {
            oauth_signature = Convert.ToBase64String(
                hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)));
        }

        //Finish Auth header

        var headerFormat = "OAuth oauth_nonce=\"{0}\", oauth_signature_method=\"{1}\", " +
               "oauth_timestamp=\"{2}\", oauth_consumer_key=\"{3}\", " +
               "oauth_token=\"{4}\", oauth_signature=\"{5}\", " +
               "oauth_version=\"{6}\"";

        var authHeader = string.Format(headerFormat,
                                Uri.EscapeDataString(oauth_nonce),
                                Uri.EscapeDataString(oauth_signature_method),
                                Uri.EscapeDataString(oauth_timestamp),
                                Uri.EscapeDataString(oauth_consumer_key),
                                Uri.EscapeDataString(oauth_token),
                                Uri.EscapeDataString(oauth_signature),
                                Uri.EscapeDataString(oauth_version)
                        );

        //Disable exprect 100 continue header

        var postBody = "status=" + Uri.EscapeDataString(status);

        ServicePointManager.Expect100Continue = false;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
        request.Headers.Add("Authorization", authHeader);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        using (Stream stream = request.GetRequestStream())
        {
            byte[] content = ASCIIEncoding.ASCII.GetBytes(postBody);
            stream.Write(content, 0, content.Length);
        }
        try
        {
            WebResponse response = request.GetResponse();
            ViewBag.Message = response.ToString();
        }
        catch (WebException e)
        {
            ViewBag.Message = e.Status;
        } 
```

**My nonworking attempt at a Get request**

```
 //Request details

        var oauth_version = "1.0";
        var oauth_signature_method = "HMAC-SHA1";
        var oauth_nonce = Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
        var timeSpan = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
        var oauth_timestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();
        var resource_url = "https://api.twitter.com/1.1/statuses/user_timeline.json";
        var status = "Updating status via REST API if this works again";
        var screen_name = "Starcraft2foru";

 //encrypted oAuth signature

    var baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" +
        "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&screen_name={6}";

    var baseString = string.Format(baseFormat,
                                oauth_consumer_key,
                                oauth_nonce,
                                oauth_signature_method,
                                oauth_timestamp,
                                oauth_token,
                                oauth_version,
                                Uri.EscapeDataString(screen_name)
                                );

    baseString = string.Concat("GET&", Uri.EscapeDataString(resource_url),
                 "&", Uri.EscapeDataString(baseString));

    //Encrypt data

    var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
                "&", Uri.EscapeDataString(oauth_token_secret));

    string oauth_signature;
    using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
    {
        oauth_signature = Convert.ToBase64String(
            hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)));
    }

    //Finish Authentification header

    var headerFormat = "OAuth oauth_nonce=\"{0}\", oauth_signature_method=\"{1}\", " +
           "oauth_timestamp=\"{2}\", oauth_consumer_key=\"{3}\", " +
           "oauth_token=\"{4}\", oauth_signature=\"{5}\", " +
           "oauth_version=\"{6}\", screen_name=\"{7}\"";

    var authHeader = string.Format(headerFormat,
                            Uri.EscapeDataString(oauth_nonce),
                            Uri.EscapeDataString(oauth_signature_method),
                            Uri.EscapeDataString(oauth_timestamp),
                            Uri.EscapeDataString(oauth_consumer_key),
                            Uri.EscapeDataString(oauth_token),
                            Uri.EscapeDataString(oauth_signature),
                            Uri.EscapeDataString(oauth_version),
                            Uri.EscapeDataString(screen_name)
                    );

    //Disable exprect 100 continue header

    var postBody = "screen_name=" + Uri.EscapeDataString(screen_name);

    ServicePointManager.Expect100Continue = false;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
        request.Headers.Add("Authorization", authHeader);
        request.Method = "GET";
        request.ContentType = "application/x-www-form-urlencoded";
        /*using (Stream stream = request.GetRequestStream())
        {
            byte[] content = ASCIIEncoding.ASCII.GetBytes(postBody);
            stream.Write(content, 0, content.Length);
        }
        */
        try
        {
            WebResponse response = request.GetResponse();
            ViewBag.Message = response.ToString();
        }
        catch (WebException e)
        {
            ViewBag.Message = e.Status;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T19:54:27.670

您不必通过标题传递屏幕名称参数。将其作为查询字符串传递给请求 URL：

```
https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=Starcraft2foru 
```

**更新：**这是完全未经测试的，所以如果有一些错误，我深表歉意。（我`DotNetOpenAuth`在我的应用程序中使用，所以我不必担心这些 OAuth 细节。）以下大部分是您问题中的代码，只是对其进行了一些更改。此外，请务必使用[Twitter API 控制台](https://apigee.com/console/twitter)来测试您的所有调用以查看它们是否有效。

```
//Request details
var oauth_version = "1.0";
var oauth_signature_method = "HMAC-SHA1";
var oauth_nonce = Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
var timeSpan = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
var oauth_timestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();
var resource_url = "https://api.twitter.com/1.1/statuses/user_timeline.json

//encrypted oAuth signature
var baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" +
    "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}";

var baseString = string.Format(baseFormat,
                            oauth_consumer_key,
                            oauth_nonce,
                            oauth_signature_method,
                            oauth_timestamp,
                            oauth_token,
                            oauth_version
                            );

baseString = string.Concat("GET&", Uri.EscapeDataString(resource_url),
             "&", Uri.EscapeDataString(baseString));

//Encrypt data

var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
            "&", Uri.EscapeDataString(oauth_token_secret));

string oauth_signature;
using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
{
    oauth_signature = Convert.ToBase64String(hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)));
}

//Finish Authentification header

var headerFormat = "OAuth oauth_nonce=\"{0}\", oauth_signature_method=\"{1}\", " +
       "oauth_timestamp=\"{2}\", oauth_consumer_key=\"{3}\", " +
       "oauth_token=\"{4}\", oauth_signature=\"{5}\", " +
       "oauth_version=\"{6}\"";

var authHeader = string.Format(headerFormat,
                        Uri.EscapeDataString(oauth_nonce),
                        Uri.EscapeDataString(oauth_signature_method),
                        Uri.EscapeDataString(oauth_timestamp),
                        Uri.EscapeDataString(oauth_consumer_key),
                        Uri.EscapeDataString(oauth_token),
                        Uri.EscapeDataString(oauth_signature),
                        Uri.EscapeDataString(oauth_version)
                );

//Disable exprect 100 continue header
ServicePointManager.Expect100Continue = false;

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
request.Headers.Add("Authorization", authHeader);
request.Method = "GET";

WebResponse response = request.GetResponse();
string responseData;

using(StreamReader reader = new StreamReader(response.GetResponseStream()))
{
    responseData = reader.ReadToEnd();
}

return responseData; // Or do whatever you want with the response 
```

# javascript - Refactor JS Function

> ID：13515972
> 
> 赞同：0
> 
> 时间：2012-11-22T15:36:20.057
> 
> 标签：javascript, jquery

I have this ugly chunk of code which is responsible for positioning some sub-navigation on a website and I want some opinion on how I could improve it, because even I admit it's ugly as hell :)

Maybe someone has a better structuring idea, because I don't due to the complex logic :

```
positionSubItems : function() {
        var $that = $(this),
            $parent = $that.parents().eq(1),
            $elements = $parent.find(' > li'),
            $activeElements = $parent.find(' > li.active'),
            $container = $that.parent().find(".expandedViewContainer"),

            highestBoundary = $($elements[0]).offset().top - $($elements[0]).outerHeight(true),
            lowestBoundary = $($elements[$elements.length - 1]).offset().top + $($elements[$elements.length - 1]).outerHeight(true),
            containerHeight = $container.outerHeight(true),
            elementHeight = $that.outerHeight(true),

            returnIndex = function(selector) {
                return $(selector).parent().index();
            };

        if($that.data().subItemsPositioned !== true) {

            $container.css({
                'margin-top' : - ( containerHeight / 2 + (elementHeight / 2) )
            });

            if((lowestBoundary - highestBoundary) <= containerHeight) {
                $container.css({
                    'margin-top' : - ((elementHeight * 2) + (elementHeight * returnIndex($that)) + ($activeElements.find(" > ul").outerHeight(true) || 0))
                });
            }

            if($container.offset().top < highestBoundary) {
                $container.css({
                    'margin-top' : - ((elementHeight * 2) + (elementHeight * returnIndex($that)))
                });

                if((lowestBoundary - highestBoundary) < containerHeight) {
                    $container.css({
                        'margin-top' : - ((elementHeight * 2) + (elementHeight * returnIndex($that)) + ($activeElements.find(" > ul").outerHeight(true) || 0))
                    });
                }
            }

            if(($container.offset().top + containerHeight) >= lowestBoundary) {
                $container.css({
                    'margin-top' : - ( containerHeight - (elementHeight * ($elements.length - returnIndex($that))) )
                });

                if((lowestBoundary - highestBoundary) <= containerHeight) {
                    $container.css({
                        'margin-top' : - ((elementHeight * 2) + (elementHeight * returnIndex($that)) + ($activeElements.find(" > ul").outerHeight(true) || 0))
                    });
                }
            }

            $that.data().subItemsPositioned = true;
        }

    } 
```

So just let me briefly explain what it does. Let's say we have a left vertical navigation ( a vertical list of `li` ). In those `li`s we have a link and another div which also contains another list of items. So what this function need's to do it's position this sub level of `li`s according to some rules :

*   there are two boundaries, one upper which corresponds to the most upper 'li' item on the first level plus it's own height, and the other one lower which corresponds to the most low `li` on the first level plus it's own height
*   the first condition would be that always position the sub items, which are held by a container and displayed to the right of the parent `li`, so the parent it's shown in the middle of that container
*   based on the above rule, if the offset of the resulted positioning of the container exceeds the upper boundary, then reposition the container so the top offset of the container it's now at the same level as the upper boundary
*   continuing to click on the rest of the items follow the first rule, apply the second one if it's the case, then if this following condition it's meet apply it : when the offset of the bottom of the container exceeds the lowest boundary, reposition it so the bottom of the container it's always at the same level as the lowest boundary
*   after going through all of the above rules and conditions you also have to check if the height of the container is bigger than the height between the upper and lower boundary, in that case apply the first rule, position the container at the same level as the upper boundary
*   there is also another scenario encountered, if there are to few parent `li`s and the height of the container now exceeds the height of the height between boundaries again, so we'll have to apply the just above mentioned rule
*   and there is another scenario which I won't describe as I'm already to deep into details

So stating the above, I hope someone has a better way of doing all the logic and maybe a more cleaner way too :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:53:24.743

这是某种示例（没有完全阅读您的函数的作用，只是进行了一些重构以使该函数干燥一点

这仍然有些丑陋，但我希望它有助于将您推向正确的方向

```
positionSubItems : function() {
    var $that = $(this),
    $parent = $that.parents().eq(1),
    $elements = $parent.find(' > li'),
    $activeElements = $parent.find(' > li.active'),
    $container = $that.parent().find(".expandedViewContainer"),

    highestBoundary = $($elements[0]).offset().top - $($elements[0]).outerHeight(true),
    lowestBoundary = $($elements[$elements.length - 1]).offset().top + $($elements[$elements.length - 1]).outerHeight(true),
    containerHeight = $container.outerHeight(true),
    elementHeight = $that.outerHeight(true),

    returnIndex = function(selector) {
        return $(selector).parent().index();
    },

    containerCSS = function(marginTop) {
        $container.css({
            'margin-top' : - marginTop
        });
    },

    doTheMarginTop = function() {
        containerCSS((elementHeight * 2) + (elementHeight * returnIndex($that)) + ($activeElements.find(" > ul").outerHeight(true) || 0));
    };

if($that.data().subItemsPositioned !== true) {

    containerCSS(containerHeight / 2 + (elementHeight / 2));

    if((lowestBoundary - highestBoundary) <= containerHeight) {
        doTheMarginTop();
    }

    if($container.offset().top < highestBoundary) {
        containerCSS(((elementHeight * 2) + (elementHeight * returnIndex($that))));

        if((lowestBoundary - highestBoundary) < containerHeight) {
            doTheMarginTop();
        }
    }

    if(($container.offset().top + containerHeight) >= lowestBoundary) {
        containerCSS( containerHeight - (elementHeight * ($elements.length - returnIndex($that))) );
        if((lowestBoundary - highestBoundary) <= containerHeight) { doTheMarginTop(); }
    }

    $that.data().subItemsPositioned = true;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:49:52.990

在不测试底层逻辑是否有意义的情况下，我认为这更容易阅读

```
if(!$that.data().subItemsPositioned)  {
  var  offset=0;
  var ulOuterHeight = (elementHeight * 2) + (elementHeight * returnIndex($that)) + ($activeElements.find("  >  ul").outerHeight(true) ||  0);
  switch(true)  {
    case (lowestBoundary - highestBoundary)  <=  containerHeight  :
      offset = ulOuterHeight;  
      break;
    case $container.offset().top  <  highestBoundary  :
      if((lowestBoundary - highestBoundary)  <  containerHeight)  {
        offset = ulOuterHeight; 
      }
      else offset = (elementHeight * 2) + (elementHeight * returnIndex($that))
      break;
    case ($container.offset().top + containerHeight)  >=  lowestBoundary  :
      if((lowestBoundary - highestBoundary)  <=  containerHeight)  {
        offset = ulOuterHeight; 
      }
      else offset = containerHeight - (elementHeight * ($elements.length - returnIndex($that)));  
      break;
    default: offset = containerHeight/2 + (elementHeight/2);
  }
  $container.css({'margin-top'  : - offset  });
  $that.data().subItemsPositioned = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:44:07.073

这段代码似乎总是一样的，试着把它放在 if 条件之外（可能是一个函数）：

```
$container.css({
    'margin-top' : - ((elementHeight * 2) + (elementHeight *     returnIndex($that)) + ($activeElements.find(" > ul").outerHeight(true) || 0))
}); 
```

我认为这应该是一个很好的起点。查找重复的代码行

# c# - Singleton vs PerSession vs PerCall state managment

> ID：13515973
> 
> 赞同：3
> 
> 时间：2012-11-22T15:36:22.023
> 
> 标签：c#, wcf, state

I have a WCF Service that is transferring large files.

Currently I'm using Singleton service with list of instances from my class to hold the state and to response to the client requests for transfer progress and so on.

The instanced class itself handles new threads for each transfer when needed.

Clients who add transfer requests and request progress can disconnect meanwhile and reconnect at random time for the requests.

Also several different clients may want to request progress of all transfers that are going on.

Everything is working great as it is, but I'm sure there is better way of doing this?

Storing state somehow in SQL? Storing state as I'm currently doing and somehow reconnecting to the same instance? How to get data from all instances then?

I hope you understood my rather long question :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:56:02.763

如果你的 WCF 服务只有一个实例，你的解决方案会很好用。

当您使用负载平衡实例化多个实例时，该方法将不起作用。
在这种情况下，您需要保持状态是所有实例共有的某个地方。它可以是 SQL、状态服务器、另一个可以保持状态的 WCF 服务等。

**更新**：
您需要为每个文件传输任务生成 id。然后 Singletone 可以将 id 与确实传输的实例相关联（我们称之为 Executor）。
当客户端想要获得进度或取消传输时，它会请求 Singletone 并提供任务 ID。
Singletone 应该使用 task id 来解析实际的 Executor 并将客户端的请求转发给正确的 Executor。

因此，您将能够根据需要实例化尽可能多的 Executor。客户不应该担心究竟是哪个 Executor 处理文件。客户应该知道的一切都是任务ID。

# ios - UITableView as subview of MKMapView

> ID：13515974
> 
> 赞同：0
> 
> 时间：2012-11-22T15:36:24.023
> 
> 标签：ios

I would add a UITableView under an MKMapView, and make it resizable as the orientation of the device changes. Also, the table should hide/show as per user request. I succeed in adding the subview, either in IB and in the code, but the problem is that when I change the orienation from portrait to landscape, the table is not properly rendered.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:03:46.347

您可以为横向模式设计和使用另一个 xib 文件或使用 autoresizingMask。

# javascript - Does the Arguments object leak?

> ID：13515977
> 
> 赞同：10
> 
> 时间：2012-11-22T15:36:33.447
> 
> 标签：javascript, memory-leaks, arguments, closures

Assuming I had this sloppy-mode function, which (for some odd reason) returns its `arguments` object to the caller:

```
function example(a, b/* ...*/) {
    var c = // some processing
    return arguments;
} 
```

Does storing the result of an invocation (`var d=example();`) prevent the variable environment of `example` (containing `a`, `b`, `c` etc) from being garbage-collected? The internal setters and getters of the [Arguments object](http://es5.github.com/#x10.6) might still refer to it, just like a function returned from a closure does. Demo:

```
function example(a, b) {
  var c = Array(1000).fill(0); // some large object
  return {
    args: arguments,
    set: function(x) { a = x; },
    get: function() { return a; }
  };
}
var d = example('init');
console.log(d.get());
d.args[0] = 'arguments update'; // assigns the `a` variable
console.log(d.get());
d.set('variable update');
console.log(d.args); // reads the `a` variable
```

I know there is hardly a use case (and passing around Arguments objects is considered bad practice, most likely because of their similarity to arrays), but this is more a theoretical question. How do different EcmaScript implementations handle this? Is it implemented close to the spec?

I would expect `c` to be garbage-collected [like with a normal closure](https://stackoverflow.com/q/28388530/1048572) and not to be leaked, but what about `b`? What would happen if I `delete` the properties of the `arguments` object?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:53:32.660

考虑一下：

```
var x = function() {
  return arguments;
}
console.log( x() === x() ); 
```

这是错误的，因为它不是同一个`arguments`对象：它（对于 的每次调用`x`）是一个新构造的对象，其中存储了所有参数的*值*。然而它具有以下特性`arguments`：

```
var y = x([]);
console.log(y instanceof Object); // true
console.log(y instanceof Array);  // false
console.log(y.length); // 1
console.log(y.callee + '');       // function() { return arguments; } 
```

* * *

然而，还有更多。`arguments`显然，如果返回，作为参数发送到函数的对象将不会被 GC 收集：

```
var z = x({some: 'value'});
console.log(z[0]); // {some:'value'} 
```

这是意料之中的：毕竟，您可以通过在函数内部声明一些本地对象，将函数的第一个参数的值分配为其对象'0'属性，然后返回该对象来获得类似的结果。在这两种情况下，引用的对象仍将“使用中”，所以我想没什么大不了的。

但是这个呢？

```
var globalArgs;
var returnArguments = function() {
  var localArgs = arguments;
  console.log('Local arguments: ');
  console.log(localArgs.callee.arguments); 
  if (globalArgs) { // not the first run
    console.log('Global arguments inside function: ');   
    console.log(globalArgs.callee.arguments); 
  }
  return arguments;
}
globalArgs = returnArguments('foo');
console.log('Global arguments outside function #1: ');   
console.log(globalArgs.callee.arguments);
globalArgs = returnArguments('bar');
console.log('Global arguments outside function #2: ');   
console.log(globalArgs.callee.arguments); 
```

输出：

```
Local arguments: ["foo"]
Global arguments outside function #1: null
Local arguments: ["bar"]
Global arguments inside function: ["bar"]
Global arguments outside function #2: null 
```

如您所见，如果您返回`arguments`对象并将其分配给某个变量，则在函数内部，其`callee.argument`属性指向与其自身相同的数据集`arguments`；这又是预期的。但函数外`variable.callee.arguments`等于*null*（不是*undefined*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:36:06.163

在没有对特定的 JavaScript 引擎进行任何研究的情况下，很难得出结论性的答案。然而，我认为`arguments` `Object`和创建的上下文之间的关系`example`与任何其他局部变量及其宿主上下文之间的关系相同。

也就是说，存储值不需要也存储它的上下文。

一个警告是属性，它是对给定绑定到`arguments.callee`的上下文（即`Function`）的引用。`arguments` `Object`但是，此属性在严格模式下不存在，并且[已被弃用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)。

除此之外，我认为可以安全地假设返回和存储`arguments` `Object`不会导致内存泄漏。

# android - android在对话框中按钮的设置事件上崩溃

> ID：13515985
> 
> 赞同：0
> 
> 时间：2012-11-22T15:37:08.043
> 
> 标签：android, dialog, crash

我在一个android应用程序中有这个代码，当按下菜单项时它会显示一个对话框，它工作正常但是当我从对话框设置按钮“发送”的功能时，单击菜单项时它会崩溃。我找不到问题

```
 private void showdialog (String ap){
    final Dialog dialog = new Dialog(this);
    et =(EditText)dialog.findViewById (R.id.commentET);
    send=(Button)dialog.findViewById(R.id.send);
    send.setOnClickListener(sendOnClickListener);
    dialog.setTitle(ap);
    dialog.setContentView(R.layout.comment);
    System.getProperty("line.separator");
    dialog.setCancelable(true);
    dialog.show();
}

Button.OnClickListener sendOnClickListener
= new Button.OnClickListener(){

public void onClick(View arg0) {
  s=et.getText().toString();
  dialog.dismiss();
} 
};

public boolean onCreateOptionsMenu(Menu menu) {
   getMenuInflater().inflate(R.menu.aprobare_menu, menu);
   return true;
}

public boolean onOptionsItemSelected(MenuItem item) 
   {

      switch (item.getItemId())
      {
         case R.id.aproba:
             showdialog("Aprobat");
             return true;

         case R.id.respinge:
            showdialog("Respins");
             return true;

       default:
            return super.onOptionsItemSelected(item);
      }
      }    

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:42:15.957

尝试更改调用 setContentView 的顺序：

```
private void showdialog (String ap){
final Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.comment);
et =(EditText)dialog.findViewById (R.id.commentET);
send=(Button)dialog.findViewById(R.id.send);
send.setOnClickListener(sendOnClickListener);
dialog.setTitle(ap);
System.getProperty("line.separator");
dialog.setCancelable(true);
dialog.show();
} 
```

不过不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:42:17.180

在通过 id 查找任何视图**之前**`contentView`为您的对话框设置：

 **```
private void showdialog (String ap){
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.comment);// should be before findViewById
    et =(EditText)dialog.findViewById (R.id.commentET);
    send=(Button)dialog.findViewById(R.id.send);
    send.setOnClickListener(sendOnClickListener);
    dialog.setTitle(ap);

    System.getProperty("line.separator");
    dialog.setCancelable(true);
    dialog.show();
} 
```**

# css - 两个小的引导 css 样式让 Firefox 和 Chrome 中的页面看起来完全不同？示例在里面

> ID：13515986
> 
> 赞同：0
> 
> 时间：2012-11-22T15:37:11.260
> 
> 标签：css, firefox, twitter-bootstrap, cross-browser

这是代码：[jsFiddle](http://jsfiddle.net/dZBWh/)

它在 Chrome 中看起来很正常（单选按钮没问题，尽管 6 个单选按钮中有 3 个留在浏览器的左边框），但在 Firefox 中看起来完全不同（Firefox 中的单选按钮很乱）。

如何解决css样式的问题？**这些样式取自 twitter bootstrap，因此它们只能被覆盖。**

另外，如果可能的话，html不能被触及，只有css。那是跨浏览器的错误吗？它看起来完全不同的原因是什么？

完整代码在这里：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <style>

            label
            {
                display       : block;
                margin-bottom : 5px
            }

            .radio input[type="radio"], .checkbox input[type="checkbox"]
            {
                float       : left;
                margin-left : -18px
            }

        </style>

    </head>
    <body>

        <div style="border:1px solid red; ">
            <label class="radio">
                <input name="count" value="A" type="radio">
                A </label>
            <label class="radio">
                <input name="count" value="B" type="radio">
                B </label>
            <label class="radio" style="border:1px solid blue;">
                <input name="count" value="C" type="radio">
                C </label>
        </div>

        <div style="margin-left: 300px; margin-top: -70px;">
            <label class="radio">
                <input name="count2" value="D" type="radio">
                D </label>
            <label class="radio">
                <input name="count2" value="E" type="radio">
                E </label>
            <label class="radio">
                <input name="count2" value="F" type="radio">
                F </label>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:47:49.787

问题是你的浮动。

去掉左边的浮子

```
.radio input[type="radio"], .checkbox input[type="checkbox"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:20:46.440

如果我理解正确，float 和 margin-left 会被 bootstrap 设置为你不想要的值。

为了覆盖它们，您需要做的就是向页面添加样式（或者最好是引导覆盖 css 文件，即在添加引导之后添加的文件），这将覆盖您不想要的引导值，例如

```
.radio input[type="radio"], .checkbox input[type="checkbox"]
            {
                float       : none;
                margin-left : 0px
            }​ 
```

# windows - 如何避免批处理行限制（每行 8191 个字符）？

> ID：13515988
> 
> 赞同：1
> 
> 时间：2012-11-22T15:37:18.843
> 
> 标签：windows, scripting, batch-file

我有一个多行文件（大约 300 - 400 行），每行有 72 个字符，我需要将其转换为单行。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:43:10.603

这是可能的，假设您希望将连接的行放在文本文件的一行中。但是，即使您可以使用批处理创建长行，您也无法使用批处理读取该行。正如 Electro Hacker 所说，您不能创建长度超过 8191 字节的批处理环境变量。

XP`SET /P`将保留每行的前导空格。但`SET /P`在 Vista 及以后的情况下，会出现领先的空格。

此解决方案在每个连接的行之间添加一个空格。

```
@echo off
setlocal
set "infile=test.txt"
set "outfile=out.txt"

>"%outfile%" (
  for /f usebackq^ delims^=^ eol^= %%A in ("%infile%") do <nul set /p "=%%A "
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:49:38.300

如果您想坚持使用标准 Windows 工具，PowerShell 也是一种选择：

```
-join (Get-Content foo.txt) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:24:15.797

你不能打破操作系统的限制，你不能打破 Windows 中的 255 个字符路径，你不能打破 CMD 解释器的长度限制，就这么简单！

抱歉，您不能将该行存储到 var 中，没办法，不存在任何魔法，计算机是合乎逻辑的。

但这不是世界末日，您可以在任何其他语言中轻松做到这一点，我推荐您使用 Ruby 或 python（为此使用 Ruby），这是一项简单的工作，打开一个文件，将内容存储到一个 var 中，然后做你想做的事，不需要任何经验，如果你需要一个例子，只需评论这个。

# c# - Windows 安全对话框问题

> ID：13515990
> 
> 赞同：0
> 
> 时间：2012-11-22T15:37:22.260
> 
> 标签：c#, watin

我在使用 WatiN 处理 Win7 中的 Windows 安全弹出窗口时遇到问题。我正在从这里尝试解决方案：[1]：[WatiN LogonDialogHandlers 在 Windows 7 中无法正常工作](https://stackoverflow.com/questions/2841120/watin-logondialoghandlers-not-working-correctly-in-windows-7)（最后一个答案）。我的电话是按原样使用代码，无需修改：

```
Ie.DialogWatcher.Add(new Windows7LogonDialogHandler(user, passw));
Ie.GoTo(url); 
```

但得到错误：

```
Exception was thrown while DialogWatcher called HandleDialog: System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source) 
```

在此刻：

```
var another = (from AutomationElement list in lists
                               where list.Current.ClassName == "UserTile"
                               where list.Current.Name == "Use another account"
                               select list).First(); 
```

我错过了什么？

# java - 展开树可视化

> ID：13515991
> 
> 赞同：0
> 
> 时间：2012-11-22T15:37:27.653
> 
> 标签：java, eclipse, swt

我必须快速创建显示 splay 树的应用程序，我想在这个小程序[http://techunix.technion.ac.il/~itai/](http://techunix.technion.ac.il/~itai/)中获得类似的东西什么是 SWT 的好库让我这样做？我不需要非常好的图形功能.. 只需要简单的二叉树即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:55:23.753

在 SWT 中有很多库可以显示和布局图形。

这是一个小清单：

*   [JUNG（Java 通用网络/图形框架）](http://jung.sourceforge.net/index.html)
*   [Zest：Eclipse 可视化工具包](http://www.eclipse.org/gef/zest/)
*   [二维绘图](http://www.eclipse.org/gef/draw2d/index.php)

你的问题不是很详细，所以看看哪一个最适合你的需求。

# ios - 使用自定义顺序在 MKMapview 中显示 MKAnnotationView？

> ID：13515995
> 
> 赞同：1
> 
> 时间：2012-11-22T15:37:47.127
> 
> 标签：ios, mkmapview, mkannotation, bus

对不起我的英语不好:">我有一个关于 iOS 的 MKMapkit 中的 MKMapView 和 MKAnnotation 的问题。

我正在编写一个名为“Transport Helper”的小应用程序。它包含地图和该地图中的一些注释以表示地点。（例如：汽车站，...）。

我向该 MKMapView 添加了注释序列（id），并希望它们会按照我添加它们的顺序出现。但我收到了结果：这些注释出现在顶部 -> 底部和左侧 -> 右侧。

有人可以帮我定制那个订单吗？？？

Ps：我非常需要那个自定义，因为我想显示我的公交车站跟随公交车的路线:((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:19:08.940

您可以添加每 100 毫秒调用一次函数的计时器，并将下一个注释添加到视图中。如果它们一次全部添加，iOS 会按照它想要的顺序绘制它们，但是如果你给它足够的时间，它会绘制你给它的那个，并准备好等待下一个。

# asp.net - 从 jqgrid 到 .xlsx

> ID：13515996
> 
> 赞同：0
> 
> 时间：2012-11-22T15:37:48.887
> 
> 标签：asp.net, jqgrid

我正在尝试从 jqgrid 导出到 excel，我使用的是 ASP.Net（不是 MVC）。交易是我需要扩展`.xlsx`不是`.xls`

我发现**[这个](http://www.trirand.net/examples/grid/exporting/excel/default.aspx)**`.xls`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:59:15.740

我可以建议您检查[答案](https://stackoverflow.com/a/9349688/315935)和[另一个](https://stackoverflow.com/a/10871428/315935)中的代码（并下载测试项目） 。第一个答案提供了演示如何使用[Open XML SDK 2.0](http://www.microsoft.com/download/en/details.aspx?id=5124)生成 XLSX 文件。该方法`DataForExcel.CreateXlsxAndFillData`将 XLSX 生成为流。来自的另一部分代码`ExcelResult.ExecuteResult`面向 ASP.NET MVC，但它很小并且希望易于理解。它只设置`Content-Type`,`Content-Encoding`和`content-disposition`服务器响应的 HTTP 标头中的部分。然后它使用`stream.WriteTo (response.OutputStream);`XLSX 结果流填充响应正文。换句话说，您可以轻松地重写代码以在任何 ASP.NET 应用程序中使用。

[第二个](https://stackoverflow.com/a/10871428/315935)提供了一个示例，我如何在 ASP.NET（而不是 MVC）中实现 jqGrid 所需的后端。

# c# - 为什么代码块是分层的？加分：编写代码块的好方法

> ID：13515997
> 
> 赞同：3
> 
> 时间：2012-11-22T15:37:50.083
> 
> 标签：c#, code-formatting

假设我想使用 2 个实现 IDispose 模式的类。其中一个类使用另一个类进行实例化，但之后不需要。当堆叠“使用”关键字时，这将导致（例如）在使用字体期间锁定文件。出于“编码美感”的原因，我希望在完成文件后立即解锁文件。

看看下面的“类标签”系统。

```
using1 (Stream stream = File.OpenRead("font.ttf"))
using2 (Font font = FontExtensions.FromStream(stream, 32))
ENDusing1
//use font here
ENDusing2 
```

分层方式，代码块的设计方式，对当前的处理施加了（美）限制。当然，这可以通过使用 try/finally 块来解决，但这些并不那么整洁。

我是否缺少使用（lol？）嵌套 IDisposable 对象/流的基本设计？

请分享您对标记代码块的看法以及解决此问题的最佳方法（编码美）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T15:44:15.530

您可以嵌套使用，同时关闭甚至提前处理流。

```
using (Stream stream = File.OpenRead("font.ttf")) {
    using (Font font = FontExtensions.FromStream(stream, 32)) {
        stream.Close(); // Or stream.Dispose();

        //use font here
    }
} 
```

该类`FileStream`在内部使用一个标志来了解它是否已关闭或处置，并确保这种情况不会发生两次。该`Dispose`方法只是调用该`Close`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:58:40.493

您可以创建一个实用方法来从临时资源创建您的对象：

```
public static T FromTempResource<T, TDisp>(Func<TDisp> dispFunc, Func<TDisp, T> createFunc) where TDisp : IDisposable
{
    using(TDisp d = dispFunc())
    {
        return createFunc(d);
    }
} 
```

你的例子可能是：

```
using (Font font = FromTempResource(() => File.OpenRead("font.tt"), stream => FontExtensions.FromStream(stream, 32))
{

} 
```

# c++ - 将参数传递给基类时使用 std::move()

> ID：13515999
> 
> 赞同：1
> 
> 时间：2012-11-22T15:37:54.703
> 
> 标签：c++, constructor, c++11, move-semantics

忽略做我所描述的事情的理智，`std::move()`当用于将参数传递给基本构造函数时，使用该函数是否会缩短构造时间？

```
struct Bar {
    Bar(std::string);

    std::string _s;
}

struct Foo : public Bar {
    Foo(std::string);
}

struct Bar(std::string bs) : _s(std::move(bs)) {
    // 1
}

struct Foo(std::string fs) : Bar(std::move(fs)) {
    // 2
} 
```

所以在这个例子中，`move()`使用 in`Foo`的构造函数是否会阻止创建额外的字符串副本？

并且为了澄清起见，这种设计是否意味着不应该尝试在点和点处使用和`bs`，但是在两个地方使用都是安全的？`fs``// 1``// 2``_s`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:02:09.843

为了找出答案，我用一个`String`像这样的假类重新编码了你的例子：

```
#include <iostream>

struct String
{
    String() {}
    String(const String&) {std::cout << "String(const String&)\n";}
    String& operator=(const String&)
        {std::cout << "String& operator=(const String&)\n"; return *this;}
    String(String&&) {std::cout << "String(String&&)\n";}
    String& operator=(String&&)
        {std::cout << "String& operator=(String&&)\n"; return *this;}
};

struct Bar {
    Bar(String);

    String _s;
};

struct Foo : public Bar {
    Foo(String);
};

Bar::Bar(String bs) : _s(std::move(bs)) {
    // 1
}

Foo::Foo(String fs) : Bar(std::move(fs)) {
    // 2
}
int main()
{
    Foo f{String()};
} 
```

对我来说，这打印出来：

```
String(String&&)
String(String&&) 
```

但是，如果我`std::move`从`Foo`构造函数中删除它，打印输出将更改为：

```
String(const String&)
String(String&&) 
```

所以假设 a`String(String&&)`比 a 快`String(const String&)`，前者更快。否则，不会。

> 为了澄清起见，这种设计是否意味着不应该尝试在点 // 1 和 // 2 使用 bs 和 fs，但是在这两个地方使用 _s 是安全的？

正确的。