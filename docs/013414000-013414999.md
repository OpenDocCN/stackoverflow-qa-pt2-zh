# StackOverflow 问答 13414000-13414999

# c++ - 用于双向随机访问的 c++ 高效数据结构

> ID：13414001
> 
> 赞同：9
> 
> 时间：2012-11-16T09:45:27.793
> 
> 标签：c++, data-structures, map

我有两个集合 A 和 B 的元素 a 和 b。现在它们彼此相关（0..1:n 基数），所以每个 a 在 B 中最多有一个伙伴，每个 b 可以有几个（至少一个）与 A 中的项目的关联。A 是一组整数对，B 是整数。

有没有有效的方法来存储这样的“双向”地图？一个简单的方法是使用两个地图：

```
map<pair<unsigned int, unsigned int>, unsigned int> AtoB
map<unsigned int, vector<pair<unsigned int, unsigned int> > > BtoA 
```

但也许有更好的方法来更有效地处理这个问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T09:49:04.217

Boost 包含两个库来处理这个问题：[Boost.Bimap](http://www.boost.org/doc/libs/release/libs/bimap/doc/html/index.html)和[Boost.MultiIndex](http://www.boost.org/doc/libs/release/libs/multi_index/doc/index.html)。前者特定于双射（“双向”）映射问题，而第二个更通用，实现类似于具有任意索引的内存数据库。

鉴于您的`unsigned int`密钥不会唯一地映射到您的对，我认为 MultiIndex 更有序。自从我上次使用这个库以来已经很长时间了，但是查看教程，你需要类似的东西

```
struct YourData {
     unsigned key;
     std::pair<unsigned, unsigned> value;
};

typedef multi_index_container<
    YourData,
    indexed_by<
        ordered_non_unique<member<YourData, unsigned, &YourData::key> >,
        ordered_unique<member<YourData, std::pair<unsigned, unsigned>,
                              &YourData::value> >
    >
> YourContainer; 
```

如果您不想使用 Boost，那么您至少可以通过替换

```
map<unsigned int, vector<pair<unsigned int, unsigned int> > > 
```

由`std::multimap<unsigned, std::pair<unsigned, unsigned>>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:48:05.670

怎么样`boost::bimap`？[http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/index.html](http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/index.html)我认为它适合你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:14:07.630

Map 和 Multimap 的效率为 O(log n)，因此，我认为这是存储数据的最佳方式。我建议使用

```
map<pair<unsigned int, unsigned int>, unsigned int> AtoB
multimap<pair<unsigned int, unsigned int>, unsigned int> BtoA 
```

# c# - 如何重定向到 MVC3 中的其他区域？

> ID：13414003
> 
> 赞同：0
> 
> 时间：2012-11-16T09:45:31.490
> 
> 标签：c#, asp.net-mvc-3, routing, asp.net-mvc-areas, asp.net-mvc-3-areas

我目前有 3 个区域（当我开始工作时会出现更多区域）`Login`：`User`和`Admin`. `Global.asax`转到登录区域（）中索引控制器的索引操作的默认路由`Login\Index\Index`可以正常工作，这就是我映射它的方式：

```
routes.MapRoute(
    "Default", // Route name
    "{area}/{controller}/{action}/{id}", // URL with parameters
    new { area = "Login", controller = "Index", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
    new[] { typeof(AppName.Areas.Login.Controllers.IndexController).Namespace }
); 
```

3 个区域中的每一个都在 AreaRegistration 文件中像这样注册：

```
context.MapRoute(
    "Admin_default",
    "{area}/{controller}/{action}/{id}",
    new { area = "Admin", controller = "Index", action = "Index", id = UrlParameter.Optional },
    new[] { typeof(AppName.Areas.Admin.Controllers.IndexController).Namespace }
); 
```

登录控制器索引操作获取用户登录详细信息，查找用户类型并将它们重定向到适当的区域......至少它应该这样做。从我可以收集到的搜索谷歌，重定向到特定区域的正确方法是：

```
return RedirectToAction("Action", "Controller", new { area = UserType }); 
```

这似乎不起作用，它只是重定向到`Login\Controller\Action`，我不知道为什么。

在我试图弄清楚发生了什么时，我使用了这个：

```
var url = Url.Action("Action", "Controller", new { area = "Admin" }); 
```

它产生了相同的`Login\Controller\Action`网址。

任何解决此问题的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:53:41.087

在 routes 参数中，您只需设置 new { area = "OtherAreaName" }。

## 编辑

哦，我看到你已经尝试过了。我想该区域的名称在类 AreaRegistration 类中被正确引用和正确命名，像这样？

```
public class AuthorAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Author";
        }
    }

    // ...
} 
```

是否也可能是您需要身份验证并且您被重定向到登录页面？

# javascript - 面板上的双击事件

> ID：13414006
> 
> 赞同：1
> 
> 时间：2012-11-16T09:45:36.980
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我在一些源代码中（几天前）看到一个程序`dblclick`在面板上有一个事件或类似的东西。

如果您查看文档

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel)

在事件下，没有点击事件。

我想我看到了类似的东西

```
ondblclick 
```

进而

```
fn: function(){...} 
```

为什么它不在文档中，如何`dblclick`在面板上触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:29:47.463

以下示例将起作用。**[双击事件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-event-dblclick)**将由**[Ext.Element](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element)**触发，该元素可以在从面板的 body 参数渲染后获取。在示例中，我重写了**[afterRender](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Renderable-method-afterRender)**方法，因为不需要为此注册事件。在那里，我为当前面板的 Ext.Element 注册了一个侦听器。

```
Ext.define('Ext.ux.panel.DCPanel', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.dcpanel',
    initComponent: function() {

        this.callParent(arguments);
    },
    afterRender: function() {
        var me = this;
        me.body.on('dblclick', function() { alert('hit'); }, me);
        me.callParent();
    }
});

Ext.create('Ext.ux.panel.DCPanel', {
    width: 300,
    height: 300,
    title: 'Demo',
    html: 'this is my data',
    renderTo: Ext.getBody()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:06:22.327

除了@sra 答案，我会说在分配侦听器时`Component`可以使用选项将处理程序分配给 dom ：`element`

```
var panel = Ext.create('Ext.panel.Panel', {
    // ...
    listeners: {
        dblclick: function() {
            // handle event
        },
        element: 'body'
    }
}); 
```

[演示](http://jsfiddle.net/molecule/WrpzE/)

# html - 如何使 div 缩小以适应窗口调整大小时的浮动？

> ID：13414010
> 
> 赞同：2
> 
> 时间：2012-11-16T09:45:46.107
> 
> 标签：html, css

我在一个 div 中有两个浮点数，带有 display:table 和 margin:auto。将这两个 div 居中效果很好。但是，当我使窗口变小时，其中一个浮动会像它应该的那样下降，但是包装器不会缩小到新的大小，因此内部的浮动会与左侧对齐而不是居中。你如何让它适当地缩小？我的意思是， display:table 应该缩小，为什么不呢？

所以这就是我最初的大窗口大小

```
+----------------+ - div {display:table, margin:auto}
|+-----+  +-----+|
||float|  |float||
|+-----+  +-----+|
+----------------+ 
```

缩小浏览器窗口后，div 大小保持不变，而不是缩小以适应新的浮动位置。看起来像这样

```
+--------------+
|+-----+       |
||float|       |
|+-----+       |
|+-----+       |
||float|       |
|+-----+       |
+--------------+ 
```

这就是它的样子

```
 +-------+
    |+-----+|
    ||float||
    |+-----+|
    |+-----+|
    ||float||
    |+-----+|
    +-------+ 
```

任何想法如何使这项工作？有没有办法在没有媒体查询的情况下做到这一点？

这是一个示例代码： http: [//jsfiddle.net/WerPx/1/](http://jsfiddle.net/WerPx/1/) 它在较大的窗口大小下按预期工作，但是如果您使结果窗口更小，则其中一个浮动在下面，但绿色包装不会缩小以适应新的尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:19:48.990

您可以使用媒体查询设置断点，将容器的宽度更改为等于浮动 div 的宽度。在浮动下降发生的点设置断点。代码更好地解释了这一点：

```
<div class="div1">
    <div>Float</div>
    <div>Float</div>    
</div> 
```

CSS

```
.div1 {
    display: table;
    margin: auto;
}

.div1 div {
    float: left;
    width: 250px;
}

/* If the window size is 500px or less then apply these styles */
@media all and (max-width: 500px) {
  .div1    {
      width: 250px;     
   }
} 
```

请参阅此[js fiddle](http://jsfiddle.net/atQ3L/2/)以获取工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:35:18.920

似乎您正在尝试制作[响应](http://en.wikipedia.org/wiki/Responsive_web_design)式布局。在您的示例中，您只需要设置`width: 100%`为包装器。但如果设计是一个更复杂的标题（水平导航、页脚、侧边栏......），那么使用[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)是一个好主意，如下所示：

```
@media (max-width:800px), projection {
  /* The browser window width must not exceed 800px or this device
     must be projected media for these rules to apply */
 }

@media screen and (min-width: 500px) and (max-width: 800px) 
{ 
   /* style sheet that is usable when the viewport is between 500 
      and 800 pixels wide */
} 
```

进一步阅读：

*   Smashing Magazine 中的[响应式教程和指南](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)
*   [带有媒体查询的自适应布局](http://www.netmagazine.com/tutorials/adaptive-layouts-media-queries)（教程）

**编辑：**对于您的代码，这是使用媒体查询的解决方案：http: [//jsfiddle.net/WerPx/2/](http://jsfiddle.net/WerPx/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:37:42.153

您正在寻找响应式设计布局，而 twitter bootstrap 与媒体查询一起出现在我的脑海中，并使用百分比值作为宽度。我已经使用 twitter bootstrap 设置了一个基本演示，您会看到页面在调整窗口大小时表现不同：

```
.container {
    margin-top: 10px;
}
.ora, .ban, .man{display:none;}
.fruit-content{width:100%;}
li{display:inline-block;width:24%;text-align:center;border-bottom:1px solid #fff;background: #C0C;}
ul.upperul{margin:0 0 0 0px;width:103%;}
.custom-row{border:1px solid green;}
.selected{background: #c0c0c0;}
@media  (max-width:480px) {
    li{display: block;width: 100%;text-align: left;}
    .custom-row{border:1px solid #000000;}
    ul.upperul{margin-left: 0px;width:100%;}

} 
```

[演示](http://jsfiddle.net/refhat/aT5dE/24/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:25:27.273

```
.col {
    width: 100px;
    border:1px solid red;
    display:table-cell;

} 
```

# eclipse - 在 JPanel 中绘图

> ID：13414012
> 
> 赞同：0
> 
> 时间：2012-11-16T09:45:57.043
> 
> 标签：eclipse, swing, netbeans, java

我有我的班级声明：

```
public class myRightPanel extends JPanel 
```

然后我像这样覆盖我的超类的paintComponent：

```
public void paintComponent(Graphics g){  
        super.paintComponents(g);
                //Draw bunch of things here
} 
```

现在事实证明我还需要一个方法，它接受两个整数（x，y）参数，并在我已经`myRightPanel`在该坐标处绘制的东西上添加一些东西。当我已经覆盖我的时，我该怎么做`paintComponent()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:50:21.687

将 x,y 作为 a 存储`Point`为类的属性，以便在 paint 方法中可以访问它。打电话`repaint()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:49:41.573

您需要使用 Graphics 对象来绘制您想要的任何内容。

例如：

```
public void paintComponent(Graphics g){  
  super.paintComponents(g);
  g.drawString("Hello test", 0, 0);
} 
```

我推荐阅读 Java 2D 教程： [http ://docs.oracle.com/javase/tutorial/2d/index.html](http://docs.oracle.com/javase/tutorial/2d/index.html)

# c# - 如果使用 IEnumerable，则无法正确分组字符串 C#中的.GroupBy

> ID：13414017
> 
> 赞同：-6
> 
> 时间：2012-11-16T09:46:07.953
> 
> 标签：c#, asp.net-mvc-3

假设我有以下文件

```
File_1.txt
File_2.txt
File_1_Over.txt
File_2_Item.txt

File_1_Over.bat
File_1_Over_test.bat
File_2_Standard.bat
File_2_Item_Standard.bat 
```

我想将`txt`文件与其`bat`文件分组。

我写的代码如下：

```
List<string> val1 = new List<string> {
          "File_1.txt","File_2.txt","File_1_Over.txt","File_2_Item.txt","File_1_Over.bat",
            "File_1_Over_test.bat","File_2_Standard.bat","File_2_Item_Standard.bat"
        };

        val1.GroupBy(f => Path.GetFileNameWithoutExtension(f));

        foreach(string i in val1){
            Console.WriteLine(i);   
        } 
```

它显示：

```
File_1.txt
File_2.txt
File_1_Over.txt
File_2_Item.txt
File_1_Over.bat
File_1_Over_test.bat
File_2_Standard.bat
File_2_Item_Standard.bat 
```

那不行。这似乎与`Sort`. 我想这样显示：

```
File_1.txt
File_1_Over.txt
File_1_Over.bat
File_1_Over_test.bat
File_2.txt
File_2_Standard.bat
File_2_Item.txt
File_2_Item_Standard.bat 
```

我在[http://compilr.com](http://compilr.com)上编写了代码（实时查看我的代码：[https](https://compilr.com/djsonique4ever/testproj/main.cs) ://compilr.com/djsonique4ever/testproj/main.cs ）

无论如何，我首先希望成为一个 TXT 文件而不是 BAT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:03:19.227

要真正确保它按照您的意愿出现，您可以这样[做](http://ideone.com/KbhaGo)：

```
var val = val1
    .GroupBy(f => Path.GetFileNameWithoutExtension(f)) //group by filename
    .OrderBy(group => group.Key); //here's the "Sort"

foreach (var group in val)
{
    var q = group.OrderByDescending(f => Path.GetExtension(f)); //order the filenames for outputting
    foreach (var f in q)
    {
        Console.WriteLine(f);
    }
} 
```

不过，我会重新考虑您的任务，也许会弄清楚您为什么要这样做

更新：如果你真的需要分组。如果没有分组，您可能会在下面找到更短的好答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:57:22.967

您需要做的就是对它们进行排序：

```
val1.Sort(); 
```

如果您想使用自己的规则进行排序，请编写您的比较函数，如下所示：

```
static int Compare2String(string a, string b)
{
    var name_a = Path.GetFileNameWithoutExtension(a);
    var name_b = Path.GetFileNameWithoutExtension(b);
    if (name_a.Equals(name_b))
    {
        var ext_a = Path.GetExtension(a);
        var ext_b = Path.GetExtension(b);
        return ext_b.CompareTo(ext_a);
    }
    return name_a.CompareTo(name_b);
} 
```

并像这样调用 Sort 函数：

```
val1.Sort((new Comparison<string>(Compare2String))); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T09:53:39.827

您正在丢弃该`GroupBy`方法返回的结果。此方法不会`IEnumerable<T>`就地修改，而是返回一个新的`IEnumerable<T>`：

```
var val1 = new List<string> 
{
    "File_1.txt","File_2.txt","File_1_Over.txt","File_2_Item.txt","File_1_Over.bat",
    "File_1_Over_test.bat","File_2_Standard.bat","File_2_Item_Standard.bat"
};

var result = val1.GroupBy(Path.GetFileNameWithoutExtension);

foreach (var item in result)
{
    foreach (var file in item)
    {
        Console.WriteLine(file);
    }
} 
```

# flash - 如何在带有流的特定站点中启用 winRT Arm 上的闪存？

> ID：13414020
> 
> 赞同：-2
> 
> 时间：2012-11-16T09:46:24.543
> 
> 标签：flash, stream, windows-runtime

如何使用 Putlocker 或 Nowvideo 等流在特定站点的 winRT Arm 上启用闪存？

我知道闪存嵌入在 Internet Explorer 10 for ARM 中，并且在某些站点工作中，如何激活其他站点或强制使用闪存？

谢谢，千田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:45:20.317

你不能。它是故意锁定的。

[这里](http://liliputing.com/2012/11/windows-8windows-rt-browser-hack-use-flash-on-any-website.html)有更多细节。

# json - 在 Hibernate 上集成 restful JPA

> ID：13414027
> 
> 赞同：2
> 
> 时间：2012-11-16T09:47:10.893
> 
> 标签：json, hibernate, rest, jpa, jax-rs

似乎[Eclispelink](http://wiki.eclipse.org/EclipseLink/Release/2.4.0/JPA-RS/REST-API)、[OpenJPA](http://openjpa.apache.org/2011/02/01/rest-on-openjpa.html)和[DataNucleus](http://www.datanucleus.org/products/accessplatform_3_0/rest/api.html)已经提供了开箱即用的完整的 restful JPA。

怎么样`Hibernate`？我不是在寻找任何从实体类生成宁静 Web 服务的 scalfold 框架，而是在 Hibernate 上集成 JAX-RS 和 JPA，最好具有默认的 JSON 支持。

# python - 在线程中捕获中断的系统调用

> ID：13414029
> 
> 赞同：3
> 
> 时间：2012-11-16T09:47:29.190
> 
> 标签：python, multithreading, asyncsocket

我有一个使用设想框架的客户端-服务器应用程序，我正在使用线程来处理连接，这是代码中的一个标记

```
 ....
    SocketServer.TCPServer.allow_reuse_address = True        
    self.server = TCPFactory( ( HOST, PORT ), TCPRequestHandler, self.application)               

    self.server_thread = threading.Thread( target = self.server.serve_forever )        

    self.server_thread.setDaemon( True )       
    self.server_thread.start() 

class TCPFactory( SocketServer.ThreadingTCPServer ):    
    def __init__( self, server_address, RequestHandlerClass, application ):
        SocketServer.ThreadingTCPServer.__init__( self, server_address, RequestHandlerClass )
        self.application = application

class TCPRequestHandler( SocketServer.BaseRequestHandler ):
    """"""
    def setup( self ):
        ..... 
```

在设想框架中，我调用该`open_file( )`函数，它给了我们一个弹出窗口，但是当这个窗口出现时，我收到以下错误

```
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.7/SocketServer.py", line 225, in serve_forever
    r, w, e = select.select([self], [], [], poll_interval)
error: (4, 'Interrupted system call') 
```

我该如何处理这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:16:02.013

在 Armin Rigo 发表评论后，我修改了 SockeServer.py

```
def serve_forever(self, poll_interval=0.5):
        """Handle one request at a time until shutdown.

        Polls for shutdown every poll_interval seconds. Ignores
        self.timeout. If you need to do periodic tasks, do them in
        another thread.
        """
        self.__is_shut_down.clear()
        try:
            while not self.__shutdown_request:
                # XXX: Consider using another file descriptor or
                # connecting to the socket to wake this up instead of
                # polling. Polling reduces our responsiveness to a
                # shutdown request and wastes cpu at all other times.
                try:
                        r, w, e = select.select([self], [], [], poll_interval)
                except select.error  as ex:
                        #print ex
                        if ex[0] == 4:
                                continue
                        else:
                                raise  
                if self in r:
                    self._handle_request_noblock()
        finally:
            self.__shutdown_request = False
            self.__is_shut_down.set() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T16:16:54.080

当我在程序中添加一个小型 httpd 服务器时，我遇到了类似的问题，它接收来自其他进程的各种信号。在玩弄之后，我想出了一个简单的解决方案，可以避免实际修改 stlib 代码，但我认为这有点冒险。我只是将 serve_forever 调用包装在一个循环中，该循环捕获并忽略套接字错误：

```
def non_int_serve_forever(self, poll_interval=0.5):
   while 1:
        try:
            self.serve_forever(poll_interval=poll_interval)
            break
        except select.error:
            pass 
```

这消除了针对不同版本的 SocketServer.py 需要不同解决方案的风险，但是虽然它现在似乎可以工作，但 serve_forever() 应该可以多次重新启动并不明显。

有什么想法吗？

# java - 正则表达式电子邮件验证长度

> ID：13414033
> 
> 赞同：0
> 
> 时间：2012-11-16T09:47:55.883
> 
> 标签：java, regex, email

我在java中有以下用于电子邮件验证的正则表达式

```
^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@([a-zA-Z0-    9!#$%&'*+/=?^_`{|}~-]+(\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])$ 
```

我想检查电子邮件不应超过 255 个字符，我该怎么做？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T09:50:13.363

把事情简单化。

`if (yourString.length() <= 255 && yourString.matches(YOUR_REGEX))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-14T04:47:23.913

此正则表达式适用于所有可能的电子邮件模式和不同的域。

```
abc@gmail.com
abc.de@gmail.in
abc.15@gmail.com
abc@def.technology 
```

相应的正则表达式是：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:53:23.520

除了简单的健全性检查（它是否有'@'和看起来像 TLD 的东西，也许）和简单的字符串长度检查之外，我不会为此使用正则表达式。

完全兼容的邮件地址的正则表达式是[巨大的](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)。你真的不想去那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T09:59:12.173

如果你真的想扩展关于长度的正则表达式，你可以在前面加上一个这样的前瞻表达式：

```
^(?=.{255}$) 
```

结果：

```
=> ^(?=.{255}$)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+............ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-02T09:22:58.490

完成Zhonk响应： ^(?=.{6,255}$)[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+.[A-Za-z ]{2,6}

# svn - 如何在java中获取SVN修订号之间的更改列表

> ID：13414037
> 
> 赞同：0
> 
> 时间：2012-11-16T09:48:03.627
> 
> 标签：svn, svnkit

假设您有 SVN 的开始修订号和结束修订号，是否有任何 SDK api 可以在 java 中获取它们的更改列表？我正在使用 TortoiseSVN。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T09:54:43.333

我不确定我是否理解正确，
但是对于使用 SVN 的 java 库，您可以检查 SVNKit。

[http://svnkit.com/](http://svnkit.com/)

这里有一个示例代码如何获取存储库历史记录： [http ://wiki.svnkit.com/Printing_Out_Repository_History](http://wiki.svnkit.com/Printing_Out_Repository_History)

**编辑：**

我使用 svnkit 1.7.6 和 svn 命令行版本 1.6.5 尝试了示例代码

```
svn log [存储库 URL] -r1000000:1000002
```

两者都给我回了 3 行历史，我认为你正在做的事情有问题。

这是java的代码：

```
import java.util.Collection;
import java.util.Iterator;

import org.tmatesoft.svn.core.SVNLogEntry;
import org.tmatesoft.svn.core.SVNURL;
import org.tmatesoft.svn.core.auth.ISVNAuthenticationManager;
import org.tmatesoft.svn.core.internal.io.dav.DAVRepositoryFactory;
import org.tmatesoft.svn.core.io.SVNRepository;
import org.tmatesoft.svn.core.io.SVNRepositoryFactory;
import org.tmatesoft.svn.core.wc.SVNWCUtil;

public class TestSvnLog {

/**
 * @param args
 */
public static void main(String[] args) {
    DAVRepositoryFactory.setup( );

    String url = "[REPOSITORY URL]";
    String name = "anonymous";
    String password = "anonymous";
    long startRevision = 1000000;
    long endRevision = 1000002; //HEAD (the latest) revision

    SVNRepository repository = null;
    try {
        repository = SVNRepositoryFactory.create( SVNURL.parseURIEncoded( url ) );
        ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager( name, password );
        repository.setAuthenticationManager( authManager );

        Collection logEntries = null;

        logEntries = repository.log( new String[] { "" } , null , startRevision , endRevision , true , true );

        for ( Iterator entries = logEntries.iterator( ); entries.hasNext( ); ) {
            SVNLogEntry logEntry = ( SVNLogEntry ) entries.next( );
            System.out.println (String.format("revision: %d, date %s", logEntry.getRevision( ), logEntry.getDate()));
        }
    } catch (Exception e){

    }

}

} 
```

# windows-7 - 如何进行命令行比较？

> ID：13414042
> 
> 赞同：0
> 
> 时间：2012-11-16T09:48:18.627
> 
> 标签：windows-7, batch-file

我正在尝试使用以下命令集

```
FOR /f %%B IN ('DIR %SOME_FOLDER_LOCATION%\*.html ^| FIND "File(s)"') DO SET cnt=%%B
ECHO %cnt% 
```

和

```
TYPE %SOME_TEXT_FILE_PATH% | FIND /V /C "abcxyzabczyx" 
```

在此之后，我需要比较两行的输出，并基于该显示一些状态，例如：

```
IF [%cnt%]==['TYPE %SOME_TEXT_FILE_PATH% | FIND /V /C "xyzxyzxyzxyz"'] ECHO CORRECT 
```

比较的第二部分是重复。写出来只是为了给你一个想法。

谁能建议如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:44:41.603

要计算 .html 文件的数量，我会使用以下方法：

```
SET cnt=0
FOR %%B IN (%SOME_FOLDER_LOCATION%\*.html) DO SET /A cnt=cnt+1
ECHO %cnt% 
```

要计算发现的数量，我会使用这个：

```
FOR /f %%B IN ('FIND /V /C "abcxyzabczyx" %SOME_TEXT_FILE_PATH%') DO SET finds=%%B 
```

这样，比较两个数字：

```
IF [%cnt%] == [%finds%] ECHO CORRECT 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:59:38.293

使用不同的命令行执行第一个两次，但也要设置不同的变量。然后只需比较两个变量。

# c# - Project Server 2010 - ApproveNonProjectTime 方法 GeneralItemDoesNotExist 错误

> ID：13414043
> 
> 赞同：1
> 
> 时间：2012-11-16T09:48:21.410
> 
> 标签：c#, web-services, ms-project-server-2010

我尝试使用 ApproveNonProjectTime 方法（[http://msdn.microsoft.com/en-us/library/websvctimesheet.timesheet.approvenonprojecttime%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/websvctimesheet.timesheet.approvenonprojecttime%28v=office.12%29.aspx)）在控制台应用程序中批准非项目时间。

我的代码很简单：

```
class Program
{
    const string projectServerUri = "http://morpheus-sp/pwa/";
    const string resourceServicePath = "_vti_bin/psi/Timesheet.asmx";

    static void Main(string[] args)
    {
        TimesheetWebSvc.TimeSheet timesheetSvc = new TimesheetWebSvc.TimeSheet();
        timesheetSvc.Url = projectServerUri + resourceServicePath;
        timesheetSvc.Credentials = CredentialCache.DefaultCredentials;

        timesheetSvc.ApproveNonProjectTime(new Guid[] { new Guid("D6909043-18A7-4FF6-83BB-67EFDF17A279")}, null);        
    }
} 
```

当我执行它时，我有这个错误消息：

> System.Web.Services.Protocols.SoapException: ProjectServerError(s) LastError=GeneralItemDoesNotExis

但是，我直接在我的数据库中获取了 TS_LINE_UID，它的状态是 Pending Approval。

你有解决办法吗？

谢谢你，贾斯汀

# angularjs - AngularJS 模态窗口指令

> ID：13414049
> 
> 赞同：8
> 
> 时间：2012-11-16T09:48:45.007
> 
> 标签：angularjs

我正在尝试为 Twitter Bootstrap Modal 制作一个指令 angularJS 指令。

```
 var demoApp = angular.module('demoApp', []);

demoApp.controller('DialogDemoCtrl', function AutocompleteDemoCtrl($scope) {
    $scope.Langs = [
        {Id:"1", Name:"ActionScript"},
        {Id:"2", Name:"AppleScript"},
        {Id:"3", Name:"Asp"},
        {Id:"4", Name:"BASIC"},
        {Id:"5", Name:"C"},
        {Id:"6", Name:"C++"}
    ];

    $scope.confirm = function (id) {
        console.log(id);
        var item = $scope.Langs.filter(function (item) { return item.Id == id })[0];
        var index = $scope.Langs.indexOf(item);
        $scope.Langs.splice(index, 1);
    };
});

demoApp.directive('modal', function ($compile, $timeout) {
    var modalTemplate = angular.element("<div id='{{modalId}}' class='modal' style='display:none'  tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'><div class='modal-header'><h3 id='myModalLabel'>{{modalHeaderText}}</h3></div><div class='modal-body'><p>{{modalBodyText}}</p></div><div class='modal-footer'><a class='{{cancelButtonClass}}' data-dismiss='modal' aria-hidden='true'>{{cancelButtonText}}</a><a ng-click='handler()' class='{{confirmButtonClas}}'>{{confirmButtonText}}</a></div></div>");
    var linkTemplate = "<a href='#{{modalId}}' id= role='button' data-toggle='modal' class='btn small_link_button'>{{linkTitle}}</a>"

    var linker = function (scope, element, attrs) {
        scope.confirmButtonText = attrs.confirmButtonText;
        scope.cancelButtonText = attrs.cancelButtonText;
        scope.modalHeaderText = attrs.modalHeaderText;
        scope.modalBodyText = attrs.modalBodyText;
        scope.confirmButtonClass = attrs.confirmButtonClass;
        scope.cancelButtonClass = attrs.cancelButtonClass;
        scope.modalId = attrs.modalId;
        scope.linkTitle = attrs.linkTitle;

        $compile(element.contents())(scope);
        var newTemplate = $compile(modalTemplate)(scope);

        $(newTemplate).appendTo('body');

        $("#" + scope.modalId).modal({
            backdrop: false,
            show: false
        });
    }

    var controller = function ($scope) {
        $scope.handler = function () {
            $timeout(function () {
                $("#"+ $scope.modalId).modal('hide');        
                $scope.confirm();            
            });
        }
    }

    return {
        restrict: "E",
        rep1ace: true,
        link: linker,
        controller: controller,
        template: linkTemplate
        scope: {
            confirm: '&'
        }
    };
});​ 
```

这是 JsFiddle 示例[http://jsfiddle.net/okolobaxa/unyh4/15/](http://jsfiddle.net/okolobaxa/unyh4/15/)

但是 handler() 函数运行的次数与页面上的指令一样多。为什么？什么是正确的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T15:58:10.040

我发现仅按照 twitter bootstrap 文档所说的方式使用 twitter bootstrap modals 就足以让它们正常工作。

我正在使用模式在我的管理页面上容纳用户编辑表单。我用来启动它的按钮有一个 ng-click 属性，该属性将用户 ID 传递给该范围的函数，该函数又将其传递给服务。模式的内容与它自己的控制器相关联，该控制器侦听来自服务的更改并更新值以显示在表单上。

所以.. ng-click 属性实际上只是传递数据，模式仍然由 data-toggle 和 href 标签触发。至于模态本身的内容，那是片面的。因此，我在页面上有多个按钮，它们都触发了标记中模态的单个实例，并且根据单击的按钮，该模态中表单上的值是不同的。

我会看一下我的代码，看看我是否可以从中提取任何一个来构建一个 plnkr 演示。

编辑：我整理了一个快速的 plunker 演示，基本上说明了我在我的应用程序中使用的内容：http: [//embed.plnkr.co/iqVl0Wb57rmKymza7AlI/preview](http://embed.plnkr.co/iqVl0Wb57rmKymza7AlI/preview)

奖励，它有一些测试来确保两个密码字段匹配（或将它们突出显示为错误），如果密码不匹配，或者新用户的用户名和密码字段为空，则禁用提交按钮。当然，save 没有任何作用，因为它只是一个演示。

享受。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-06T14:57:10.227

[AngularStrap](http://mgcrea.github.io/angular-strap)中有一个用于 Bootstrap3 的本地实现，它利用`ngAnimate`了 AngularJS v1.2+

*   演示： http: [//mgcrea.github.io/angular-strap/##modals](http://mgcrea.github.io/angular-strap/##modals)

您可能还想结帐：

*   来源：[https ://github.com/mgcrea/angular-strap/blob/master/src/modal/modal.js](https://github.com/mgcrea/angular-strap/blob/master/src/modal/modal.js)
*   Plunkr：[http ://plnkr.co/edit/vFslNMBAoKPVXtdmBXgv?p=preview](http://plnkr.co/edit/vFslNmBAoKPVXtdmBXgv?p=preview)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-16T15:38:41.320

好吧，除非你想重新发明这个，否则我认为已经有解决方案了。

[从AngularUI](https://github.com/angular-ui/bootstrap/blob/master/src/modal/modal.js)中查看。它在没有 twitter 引导的情况下运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-14T07:05:01.953

我知道可能已经晚了，但我开始试图弄清楚为什么处理程序被多次调用作为练习，直到完成我才能停下来：P

原因很简单，你为每个模态创建的每个 div 都没有唯一的 id，一旦我修复了一切都开始工作。不要问我这是什么确切原因，可能与 $('#' + scope.modalId).modal() 调用有关。

尽管如果其他人试图解决这个问题，我应该发布我的发现:)

# java - 在 java 中使用图像图标并使用 JRadio 按钮实现在线/离线用户（查看）功能

> ID：13414054
> 
> 赞同：1
> 
> 时间：2012-11-16T09:49:18.203
> 
> 标签：java, swing, imageicon, jradiobutton

我认为问题的标题很混乱（没有找到太多的词来解决这个问题），我将尝试在下面解释这个问题。

我想包含一个类似于各种聊天应用程序的功能。这些应用程序具有显示用户联系人的功能。基本上，它们显示个人资料图片（图像）和在线/离线状态（图像）以及联系人的姓名。当用户选择（通过单击）任何用户时，将打开相应的聊天窗口（或者当仅使用一个聊天窗口时，使用该用户信息和聊天历史更新聊天窗口）。这是被单击（或选择）的元素的快照： ![在此处输入图像描述](../Images/38cef798474c66605b4b3248a1113cd3.png)

所以它是使用图像+图像+文本的组合来实现的（我认为）。我想这些必须使用单选按钮（或类似的东西）。现在我想在 Java 中做同样的事情，但使用 java 我只能使用一个图像和文本作为单选按钮。因此，如果有任何方法可以在 java swing 中使用多个图像作为一个组件的图标，那么我会徘徊。或者有没有其他方法可以实现这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:58:25.190

*   `JRadioButton`没有图标

*   `drawIcon()`只有_

*   `JToggleButton`是父母`JRadioButton`

*   在这种情况下，最好[`set(Xxx)Icon()`使用`JToggleButton`](https://stackoverflow.com/a/7877817/714968)

# python - 使用 newaxis 对 for 循环进行 Python 时间优化

> ID：13414055
> 
> 赞同：3
> 
> 时间：2012-11-16T09:49:22.013
> 
> 标签：python, time, for-loop, numpy

我需要沿定义的线（3D）以相等的间距计算 n 个点（3D）。我知道这条线的起点和终点。首先，我用

```
for k in range(nbin):
  step = k/float(nbin-1)
  bin_point.append(beam_entry+(step*(beamlet_intersection-beam_entry))) 
```

然后，我发现对大型数组使用追加需要更多时间，然后我更改了如下代码：

```
bin_point = [start_point+((k/float(nbin-1))*(end_point-start_point)) for k in range(nbin)] 
```

我得到一个建议，使用 newaxis 将进一步缩短时间。修改后的代码如下所示。

```
step      = arange(nbin) / float(nbin-1)
bin_point = start_point + ( step[:,newaxis,newaxis]*((end_pint - start_point))[newaxis,:,:] ) 
```

但是，我无法理解 newaxis 函数，我也有疑问，如果改变 start_point 和 end_point 的结构或形状，相同的代码是否可以工作。同样，我如何使用 newaxis 来 mdoify 以下代码

```
 for j in range(32):      # for all los
   line_dist[j] = sqrt([sum(l) for l in (end_point[j]-start_point[j])**2]) 
```

抱歉这么笨重，更清楚 start_point 和 end_point 的结构是

```
array([ [[1,1,1],[],[],[]....[]], 
        [[],[],[],[]....[]],
        [[],[],[],[]....[]]......,
        [[],[],[],[]....[]] ]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:14:00.827

问题中新轴版本的解释：这些*不是*矩阵乘法，ndarray 乘法是逐个元素乘法与[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html). step[:,newaxis,newaxis] 是 num_steps x 1 x 1，而 point[newaxis,:,:] 是 1 x num_points x num_dimensions。将形状为 (num_steps x 1 x 1) 和 (1 x num_points x num_dimensions) 的 ndarray 一起广播会起作用，因为广播规则是每个维度都应该为 1 或相同；它只是意味着“重复维度为 1 的数组的次数与另一个数组的对应维度一样多”。这会以一种非常有效的方式产生一个形状为 (num_steps x num_points x num_dimensions) 的 ndarray；i, j, k 下标将是沿第 j 行的第 i 步的第 k 个坐标（由第 j 对起点和终点给出）。

演练：

```
>>> start_points = numpy.array([[1, 0, 0], [0, 1, 0]])
>>> end_points = numpy.array([[10, 0, 0], [0, 10, 0]])
>>> steps = numpy.arange(10)/9.0
>>> start_points.shape
(2, 3)
>>> steps.shape
(10,)
>>> steps[:,numpy.newaxis,numpy.newaxis].shape
(10, 1, 1)
>>> (steps[:,numpy.newaxis,numpy.newaxis] * start_points).shape
(10, 2, 3)
>>> (steps[:,numpy.newaxis,numpy.newaxis] * (end_points - start_points)) + start_points
array([[[  1.,   0.,   0.],
        [  0.,   1.,   0.]],
       [[  2.,   0.,   0.],
        [  0.,   2.,   0.]],
       [[  3.,   0.,   0.],
        [  0.,   3.,   0.]],
       [[  4.,   0.,   0.],
        [  0.,   4.,   0.]],
       [[  5.,   0.,   0.],
        [  0.,   5.,   0.]],
       [[  6.,   0.,   0.],
        [  0.,   6.,   0.]],
       [[  7.,   0.,   0.],
        [  0.,   7.,   0.]],
       [[  8.,   0.,   0.],
        [  0.,   8.,   0.]],
       [[  9.,   0.,   0.],
        [  0.,   9.,   0.]],
       [[ 10.,   0.,   0.],
        [  0.,  10.,   0.]]]) 
```

如您所见，这会产生正确的答案:) 在这种情况下，广播 (10,1,1) 和 (2,3) 会导致 (10,2,3)。你所拥有的是广播 (10,1,1) 和 (1,2,3) ，它们完全相同并且也产生 (10,2,3)。

问题的距离部分的代码不需要 newaxis：输入是 num_points x num_dimensions，输出是 num_points，因此必须删除一维。这实际上是你总结的轴。这应该有效：

```
line_dist = numpy.sqrt( numpy.sum( (end_point - start_point) ** 2, axis=1 ) 
```

这里 numpy.sum(..., axis=1) 表示仅沿该轴的总和，而不是所有元素：形状为 num_points x num_dimensions 的 ndarray 沿轴 = 1 求和产生具有 num_points 的结果，这是正确的。

编辑：删除没有广播的代码示例。编辑：修复索引的顺序。编辑：添加 line_dist

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:02:01.520

我不是通过理解你写的所有东西，但我已经可以告诉你一些事情；也许他们有帮助。

`newaxis`是一个标记而不是一个函数（事实上，它是 plain `None`）。它用于将（未使用的）维度添加到多维值。有了它，您可以从 2D 值（甚至更多）中生成 3D 值。输入值中已经存在的每个维度必须由`:`索引中的冒号表示（假设您要使用所有值，否则它会变得复杂超出我们的用例），要添加的维度由 表示`newaxis`。

示例：
输入是一维向量（1D）：1,2,3
输出应为矩阵（2D）。
有两种方法可以做到这一点；向量可以每行填充一个值，或者向量可以仅填充矩阵的第一行也是唯一一行。第一个由 创建`vector[:,newaxis]`，第二个由创建`vector[newaxis,:]`。结果：

```
>>> array([ 7,8,9 ])[:,newaxis]
array([[7],
       [8],
       [9]])
>>> array([ 7,8,9 ])[newaxis,:]
array([[7, 8, 9]]) 
```

（多维值的维度当然是用数组的嵌套来表示的。）

如果输入中有更多维度，请多次使用冒号（否则将忽略更深的嵌套维度，即数组被视为简单值）。我不会在此处粘贴此表示，因为当使用嵌套括号在 2D 显示器上写入 3D 和 4D 值时，由于光学复杂性，它不会澄清事情。我希望无论如何都能清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T03:56:12.163

newaxis 以这样的方式重塑数组，以便当您乘以 numpy 时使用广播。[这是一个很好的广播教程](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)。

`step[:, newaxis, newaxis]`与`step.reshape((step.shape[0], 1, 1))`（如果`step`是 1d）相同。任何一种重塑方法都应该非常快，因为在 numpy 中重塑数组非常便宜，它只是查看数组，特别是因为你应该只做一次。

# google-chrome - 使用 Web 应用程序从剪贴板获取图像的按钮

> ID：13414057
> 
> 赞同：1
> 
> 时间：2012-11-16T09:49:24.523
> 
> 标签：google-chrome, google-chrome-extension, clipboard, google-drive-api

我创建了 chrome webapp 来访问剪贴板数据。添加我的 webapp 后，我有权访问剪贴板，但我不知道如何通过单击页面中的粘贴按钮从剪贴板获取图像。我只是试图在谷歌驱动器演示文件中粘贴图像。它显示安装 GoogleDrive webapp。安装 GoogleDrive webapp 后，它允许我们通过单击编辑菜单中的粘贴按钮从剪贴板获取图像/文本。我想知道Google Drive 如何使用粘贴按钮获取剪贴板数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:50:02.233

如果您[请求剪贴板读取权限](http://developer.chrome.com/extensions/manifest.html#permissions)，则可以使用`document.execCommand("paste")`.

如何做到这一点的一个很好的解释是[https://stackoverflow.com/a/7147192/689161](https://stackoverflow.com/a/7147192/689161)

**编辑：**一些示例代码

背景.html

```
<div id="idk" contenteditable="true"></div> 
```

背景.js

```
function paste() {
    var div = document.getElementById("idk");
    div.focus();
    document.execCommand("paste");

    // you can now access whatever was pasted through div.innerHTML
    console.log(div.innerHTML);
} 
```

如果用户粘贴图像，它将显示为类似的`<img src="..."/>`内容，您可以将其提取以在您的应用程序中使用。

# php - Wordpress - 自定义模板中的联系人表单处理程序代码从另一个自定义模板触发

> ID：13414058
> 
> 赞同：1
> 
> 时间：2012-11-16T09:49:28.930
> 
> 标签：php, wordpress

第一次在这里发问题，如有错误请见谅！

我正在 Wordpress 中建立一个网站，该网站在主页上有一个联系表。为了在有人填写时发送电子邮件，我创建了一个自定义页面模板contact-success.php，在后端创建了一个页面并应用了该模板：

```
<?php
/**
* Template Name: Contact Success
* Description: A Page Template shows contact success and sends email
*
* @package WordPress
* @subpackage Twenty_Eleven
* @since Twenty Eleven 1.0 
*/

get_header(); ?> 
```

使用基本邮件功能发送电子邮件：

```
<?php
$contact = $_POST['contact'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$query = $_POST['query'];

$message .= "The following form was submitted on the xxx website\n\n\n";            $message .= 'Name: ' . $contact . "\n\n";
$message .= 'Phone: ' . $phone . "\n\n";
$message .= 'E-Mail: ' . $email . "\n\n";
$message .= 'Query: ' . $query . "\n\n";

if(mail('xxx@xxx.co.uk', 'New Contact Submission from ' . $contact, $message)) {
    echo('Successfully Sent');
} else {
    echo('Message Failed'); 
}

?> 
```

尽管表单从我的联系表单正确提交并触发电子邮件，但每当我访问应用了不同自定义页面模板 location-results.php 的其他页面之一时，它似乎也会触发：

```
<?php
/**
* Template Name: Location Results
* Description: A Page Template that shows location results
*
* @package WordPress
* @subpackage Twenty_Eleven
* @since Twenty Eleven 1.0
*/

get_header(); ?> 
```

关于我做错了什么的任何想法？

非常感谢，如果我需要提供任何进一步的信息，请告诉我！

# c# - 并行编程：创建一定数量的进程和相关的数据/工作

> ID：13414064
> 
> 赞同：2
> 
> 时间：2012-11-16T09:49:42.003
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, multiprocessing

我需要根据用户 PC 的逻辑核心数在不同的进程上分配工作负载。工作量由以下代码完成：

```
static void work()
{
    WorkData myData = new WorkData();
    Worker myWorker = new Worker(myData);
    MyWorker.doWork()
} 
```

我用这段代码计算逻辑核心：

```
int nbProcessors = 1;
foreach (var item in new System.Management.ManagementObjectSearcher("Select *  from Win32_ComputerSystem").Get())
{
    nbProcessors = Convert.ToInt32(item["NumberOfLogicalProcessors"]);
} 
```

现在，我必须通过在逻辑核心上共享工作来完成我的 work() 10000 次，所以对于我的电脑来说，这意味着启动 8 个进程，每个进程有 1250 次 work() 迭代。我还需要每个进程都有自己的数据，这样我就不会发生冲突。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:01:39.120

我认为您应该查看[Parallel](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx)方法和[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)方法。
这两个类都依赖于当前的工作站配置，因此您可以轻松地将它们用于您的任务。

并行使用示例：

[并行循环](http://msdn.microsoft.com/en-us/library/ff963552.aspx)：

```
int n = 10 000;
Parallel.For(0, n, (i, loopState) =>
{
  // ... 
  if (/* stopping condition is true */)
  {
    loopState.Break();
    return;   
  }
}); 
```

[线程池面向任务的例子](http://msdn.microsoft.com/en-us/library/h4732ks0.aspx)：

```
public void DoWork()
{
    // Queue a task.
    System.Threading.ThreadPool.QueueUserWorkItem(
        new System.Threading.WaitCallback(SomeLongTask));
    // Queue another task.
    System.Threading.ThreadPool.QueueUserWorkItem(
        new System.Threading.WaitCallback(AnotherLongTask));
}

private void SomeLongTask(Object state)
{
    // Insert code to perform a long task.
}

private void AnotherLongTask(Object state)
{
    // Insert code to perform a long task.
} 
```

**评论更新：**

[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)（Parralel 类）在内部使用 Threading.Tasks 命名空间，并管理一些进程：

> ThreadPool 上的线程调度

另外两个关于：[Task Parallelism](http://msdn.microsoft.com/en-us/library/dd537609.aspx)和[Data Parallelism](http://msdn.microsoft.com/en-us/library/dd537608.aspx)的链接。我认为第二个链接可以帮助您平衡数据的工作。

> 如果可能，如果工作负载变得不平衡，调度程序会在多个线程和处理器之间重新分配工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:04:08.017

从 C# 4.0 开始，您可以使用[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，它会自动进行负载平衡：

```
Parallel.For(0, 10000, p => work()); 
```

或者

```
ParallelEnumerable.Range(0, 10000).ForAll(p => work()); 
```

请参阅：[.NET Framework 中的并行编程](http://msdn.microsoft.com/en-us/library/dd460693.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:00:50.843

看看[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)：

```
 Parallel.For (0,10000, item => {
       WorkData myData = new WorkData();
       Worker myWorker = new Worker(myData);
       MyWorker.doWork()
   }); 
```

它将在核心之间自动拆分。但如果需要，您可以手动设置线程数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T10:03:35.627

嗯，你知道你可以通过访问属性来获得逻辑处理器数量：

```
Environment.ProcessorCount 
```

在我的四核 HT 机器上返回 8 - 有点结账。

如果您有固定数量的迭代（而不是对列表或其他内容进行迭代），那么您可以使用：

```
var parallelOptions = new ParallelOptions
{
    MaxDegreeOfParallelistm = Environment.ProcessorCount
};

//edited per comment
Parallel.For(0, 10000, parallelOptions, () =>
{
    WorkData myData = new WorkData();
    Worker myWorker = new Worker(myData);
    MyWorker.doWork() 
}); 
```

如果您必须对列表进行一些分区，那么 partitioner 就会发挥作用：

```
var partitioner = Partitioner.Create(yourList);
var parallelOptions = new ParallelOptions
{
    MaxDegreeOfParallelism = Environment.ProcessorCount
};

Parallel.ForEach(partitioner, parallelOptions, (listItem, loopState) =>
{
   //Do something
} 
```

尽管请注意，AFAIK`Parallel`默认情况下循环会产生与内核一样多的线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:43:40.323

看看[这个](http://www.albahari.com/threading/ "这")线程指南。
以一种非常容易理解的方式从非常基本的线程到并行编程。
简而言之，它是 c# 4.0 一书中的 5 章。
就个人而言，它帮助我更好地理解线程。

# c# - 使用动作的表达式树 可能的？

> ID：13414068
> 
> 赞同：3
> 
> 时间：2012-11-16T09:49:55.317
> 
> 标签：c#, generics, reflection, expression-trees

我正在做的事情有点麻烦。我最初创建了一个通用层，它位于我的业务对象和工作正常的数据访问层之间。然后，我最近读到了一种叫做 Expression Trees 的东西，它显然更有效，并且已经证明是这样的，因为我用表达式交换了 Activator.CreateInstance() 并以指数方式改进了我的通用层。

我仍在阅读有关整个区域（表达式）的内容，但遇到了一些我想尝试使其通用的代码。目前，您必须传入一个具体类型，例如字符串、整数、十进制等。我是这个位是通用的。我尝试了几件事但失败了。我想要通用的一点是动作，我不想传入一个字符串，我希望能够通用地传入属性的类型，即**typeof(T).GetProperty("Forename").PropertyType**。这可能吗？正在考虑做一个有点 foo bar 的 switch 语句。

在此先感谢，奥南。

```
public class TTT<T> where T : new()
{
    public void Do(object t)
    {
        MethodInfo info = typeof(T).GetProperty("Forename").GetSetMethod();

        ParameterExpression param = Expression.Parameter(typeof(string), "val");

        MethodCallExpression call = Expression.Call(Expression.Constant(t), info,
            new ParameterExpression[] { param });

        Action<string> action = Expression.Lambda<Action<string>>(call, param).Compile();

        action("hi");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:03:11.590

首先，请注意，这**不是**一个好方法；如果您正在构建`Expression`每个调用，然后`Compile()`-ing 它，然后调用它，则没有性能优势。反射会*更快*。如果您需要性能，请查看诸如["FastMember" 之](http://nuget.org/packages/FastMember)类的库，这将是：

```
var accessor = TypeAccessor.Create(typeof(T));
accessor[target, "Forename"] = value; 
```

（通过元编程和自动缓存完全优化）

* * *

如果您希望类型是动​​态的，那么有两个选项：

*   `Expression.GetActionType`使用和使用键入它`DynamicInvoke`-性能*非常*差（提示：不要这样做）
*   键入它`Action<object>`并在表达式中进行强制转换（很好）

所以像：

```
using System;
using System.Linq.Expressions;
using System.Reflection;
class Foo
{
    public string Forename {get;set;}
}
class Test<T>
{
    public void Do(object target, object value)
    {
        var obj = Expression.Constant(target, typeof(T));
        var member = Expression.PropertyOrField(obj, "Forename");
        var param = Expression.Parameter(typeof(object));
        Type type;
        switch(member.Member.MemberType)
        {
            case MemberTypes.Field:
                type = ((FieldInfo)member.Member).FieldType; break;
            case MemberTypes.Property:
                type = ((PropertyInfo)member.Member).PropertyType; break;
            default:
                throw new NotSupportedException(member.Member.MemberType.ToString());
        }
        var body = Expression.Assign(member, Expression.Convert(param, type));
        var lambda = Expression.Lambda<Action<object>>(body, param);
        lambda.Compile()(value);
    }
}
static class Program
{
    static void Main()
    {
        var obj = new Foo();
        new Test<Foo>().Do(obj, "abc");
        Console.WriteLine(obj.Forename);
    }
} 
```

# html - IIS 7 制作子文件夹的起点

> ID：13414069
> 
> 赞同：2
> 
> 时间：2012-11-16T09:50:04.887
> 
> 标签：html, iis, redirect, iis-7, webserver

在 IIS 7 中，我有一个网站文件夹，我们称之为**mysite** - 在这个 mysite 文件夹中，我的实际**索引 html**文件位于名为**start**的文件夹中。我希望 IIS 7 在输入服务器 url 时指向索引页面，但是当我将物理文件夹更改为 ...\wwwroot\mysite\start 时，我当然会丢失 mysite 文件夹的内容。

然后我将 mysite 再次设置为根并尝试将默认文档更改为 start/index.html 但这会破坏我的相对链接。

在我开始弄乱我的链接之前，IIS 7 中是否有一种简单的方法可以解决这个问题？

快速而肮脏的将是 mysite 内重定向到 start/index.html 的页面，但我相信您可以告诉我一个更好的方法来解决这个问题。

谢谢你。

# php - 计算y和宽度，就像谷歌日历一样

> ID：13414083
> 
> 赞同：0
> 
> 时间：2012-11-16T09:51:16.863
> 
> 标签：php, algorithm

在 PHP 中，我试图弄清楚如何有效地计算 X 中的位置和宽度。

给定的是一个以像素为单位的数组。但它们都具有相同的宽度和 y。所以当它们在同一时期时，它们会相互叠加。我希望它们更小，并且基于相关的其他块位于正确的 Y 位置。

对于示例中的星期五，数组以这种方式开始：

```
{
   "2013-01-11":[
      {
         "width":114,
         "left":0,
         "top":260,
         "height":100
      },
      {
         "width":114,
         "left":0,
         "top":300,
         "height":100
      },
      {
         "width":114,
         "left":0,
         "top":360,
         "height":100
      },
      {
         "width":114,
         "left":0,
         "top":400,
         "height":100
      }
    ]
} 
```

在打印屏幕中，您可以看到我想要的样子。一个区块在同一时间段内也可以有 3 个或更多区块。

![现在的情况](../Images/ebea756fa369d55ce7081fcd78cf95d0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:30:07.927

两种天真的方法是跟踪哪些时间很忙，或者通过根据一天的谨慎步骤（08:00、08:30、09:00 等）保留查找表，或者通过检查所有以前的事件同一天，并以这种方式检测重叠。

由于一天的事件数量和离散间隔的数量都相当低，我认为幼稚的方法可以很好地工作，并且以后很容易理解。

这假定事件按开始时间排序。

在伪代码/pythonish 中：

```
intervals = []

for event in events:
    time = event['starttime']
    columnoffset = 0

    while (time < event['endtime']):
        # check if this time space already has events assigned
        if (intervals[time] and columnoffset < intervals[time]):
            columnoffset = intervals[time]

        # count the event
        intervals[time]++

        # increment time bin
        time += discreet_step_size

    # set new x position based on how many columns were busy within this interval
    event['x'] = event['x'] + columnoffset * xoffset 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T10:08:11.090

/* 使用 GD 库*/

$im=imagecreatefromjpeg("imagename.jpg");

```
$w = imagesx($im);
$h = imagesy($im);

echo "width of page=".$w."</br>";//width of whole page
echo "height of page=".$h."</br>";//height of whole page

//reading pixels by pixels
for($i=0;$i<$w;$i++){

for($j=0;$j<$h;$j++){

        $rgb = imagecolorat($im,$i,$j);
        $r = ($rgb >> 16) & 0xFF;
        $g = ($rgb >> 8) & 0xFF;
        $b = $rgb & 0xFF;

        //comparing the value of rgb if found then excute  
        if ($r= && $ $g= && $b=)
        {
                   apply condition here;   
        }
    }
 } 
```

# iphone - 具有部分、不连续填充区域的进度条 - iOS

> ID：13414085
> 
> 赞同：0
> 
> 时间：2012-11-16T09:51:27.480
> 
> 标签：iphone, ios, cocoa-touch, ios5, ios6

我需要为一本书的阅读水平制作一种进度条。

当用户阅读书籍的特定页面时，进度条应显示视觉进度，仅突出显示已阅读页面进度条的特定区域。

例如，如果一本书的总页数为 100，并且用户已阅读第 1 至 10 页和 90 至 100 页，则该栏应在最左侧显示 10% 的突出显示，在最右侧显示 10% 的突出显示。这样，进度条将显示其中已阅读的不同区域。

我似乎无法在 UIProgress 栏中找到支持此功能的本机方法。无论如何这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:58:03.150

为此，您必须创建自定义进度条，您可以使用核心图形并填充与进度相对应的 uiview 区域

将总页数除以 uiview 的宽度并使用它。

使用该链接了解核心图形[核心图形绘制线条，矩形](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)

# rsync - 如何使用 rsync --list-only source 列出该目录中的所有文件？

> ID：13414086
> 
> 赞同：18
> 
> 时间：2012-11-16T09:51:26.770
> 
> 标签：rsync

rsync 可用于将服务器中的目录列出为：

```
rsync --list-only username@servername:/directoryname 
```

这列出了包含详细信息的目录。rsync 是否有任何选项可以列出目录中的所有文件，而不是列出包含详细信息的目录？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-21T13:30:55.043

只需在命令末尾插入一个斜杠，它就会显示文件夹内容，因此：

```
rsync --list-only username@servername:/directoryname/ 
```

# python - 用python创建游戏

> ID：13414087
> 
> 赞同：-4
> 
> 时间：2012-11-16T09:51:29.913
> 
> 标签：python, python-2.7, python-3.x, while-loop

我想知道如何在游戏中制作一个while循环，在玩家玩过一次游戏后，用户会问他们是否想再玩一次。如果用户输入yes，游戏就会重新开始，但如果他们说不，那么游戏结束。

我想要一些例子，如果你可以使用 while true boolean 方法来解释，因为我很难理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:55:30.393

看看这门课程[An Introduction to Interactive Programming in Python](https://www.coursera.org/course/interactivepython)：

> 如果我参加这门课，我会学到什么最酷的东西？
> 
> > 您将能够在 Python 中构建自己的游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:02:37.383

似乎您最大的问题是如何使用`while`循环并在循环内接受输入。

看看[Python 中的 While 循环](http://www.khanacademy.org/science/computer-science/v/while-loops-in-python)。将提供有关其工作原理的基本见解。

要解决您的问题，请分析以下代码。那应该可以让你开始。

```
print "Type 3 to continue, anything else to quit."
someInput = raw_input()

while someInput == '3':
    print "Thank you for the 3\. Very kind of you."
    print "Type 3 to continue, anything else to quit."
    someInput = raw_input()

print "That's not 3, so I'm quitting now." 
```

希望这可以帮助。

# css - 验证（CSS 3.0）：“重要”不是有效值（VS 2012）

> ID：13414093
> 
> 赞同：1
> 
> 时间：2012-11-16T09:51:46.357
> 
> 标签：css, visual-studio-2012, less

我正在使用较少的文件来定义我的 Web 应用程序中的样式。不幸的是，每次我在 Visual Studio 2012 中使用“重要”声明时，例如：

```
color: #FFFFFF !important; 
```

我收到以下警告：

```
Validation (CSS 3.0): "important" is not a valid value for the .... property. 
```

但是“！important”声明工作正常，我需要使用它。我做错了什么？VS选项中是否有一些错误的设置？我还在为 VS 2012 使用“Web Essentials 2012”扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:41:02.790

你没有做错任何事。我没有尝试过 VS2012，但是 VS2010 中的 HTML5/CSS3 验证器是不可信的——我不记得这是一个 MS 还是第三方插件，但我记得开发人员承认这只是实验性的.

我注意到您正确写入`!important`，但您的错误日志写入`important`（没有感叹号）。会不会是 VS2012 出于某种奇怪的原因跳过了这些？您应该考虑[提交错误报告](http://connect.microsoft.com/VisualStudio)。

`!important`当然是有效的，但无论如何都应该避免，因为它很难被覆盖。因此，一些验证器会因为它们是不好的做法而给你一个警告。练习稍高的特异性来覆盖样式将为您省去很多麻烦。

TL;DR：
只需忽略错误并继续前进。

# c# - 将动态表导出到 Excel

> ID：13414097
> 
> 赞同：0
> 
> 时间：2012-11-16T09:52:17.617
> 
> 标签：c#, asp.net, excel

我创建了一个动态表，并将数据集值绑定到这个动态表。我希望将此动态表导出到 Excel 。这是代码

```
 string table = string.Empty;
 table += "<table cellpadding='0' cellspacing='0' width='100%' 
style='border-left:solid 1px #bdbdbd;background-color:#ffffff;height:30px;'>";
table += "<tr><td colspan='2' class='cont' style='width: 50%; font-weight: bold; 
padding-left: 10px; border-right:solid 1px #bdbdbd; border-bottom:solid 1px 
#bdbdbd;background-color:#ffffff;height:30px; '>Mentor Name :&nbsp;" + 
dss.Tables[0].Rows[j]["FirstName"].ToString() + "</td></tr></table>";
dv1.InnerHtml = table; 
```

这`dv1`是我将表连接到 div 的 div 的 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:33:17.183

请将您的表格放在 div 中，您可以使用下面的 jquery 代码。

// html代码

```
<br/>
<div id="dvData">
<table>
    <tr>
        <th>Column One </th>
        <th>Column Two</th>
        <th>Column Three</th>
    </tr>
    <tr>
        <td>row1 Col1</td>
        <td>row1 Col2</td>
        <td>row1 Col3</td>
   </tr>
   <tr>
        <td>row2 Col1</td>
        <td>row2 Col2</td>
        <td>row2 Col3</td>
   </tr>
      <tr>
        <td>row3 Col1</td>
        <td>row3 Col2</td>
        <td>row3 Col3</td>  
   </tr>
</table>
</div>
<br/>
<input type="button" id="btnExport" value=" Export Table data into Excel " /> 
```

// jQuery 代码

```
$("#btnExport").click(function(e) {
    window.open('data:application/vnd.ms-excel,' + $('#dvData').html());
    e.preventDefault();
}); 
```

您还可以使用以下链接查看此代码的演示。

[http://jsfiddle.net/jquerybyexample/xhYcD/](http://jsfiddle.net/jquerybyexample/xhYcD/)

希望你能从这段代码中得到你的要求。

# iphone - 仅对子视图启用 UserInteraction

> ID：13414108
> 
> 赞同：9
> 
> 时间：2012-11-16T09:52:54.437
> 
> 标签：iphone, objective-c, ios, ipad, subview

我有一个视图和 view.UserInteractionenabled = no 并且一个按钮被添加到视图中。我只需要点击按钮。是否可以仅启用按钮交互。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T09:57:23.380

`userInteractionEnabled`除非是`YES`针对视图及其直到`UIWindow`对象的所有父视图，否则视图无法接收触摸。

您可以创建一个`UIView`包含按钮的子类，并通过覆盖使其忽略按钮外部的触摸`hitTest:withEvent:`。例子：

```
@interface MyView : UIView

@property (nonatomic, strong) IBOutlet UIButton *button;

@end

@implementation MyView

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    UIView *subview = [super hitTest:point withEvent:event];
    return subview == self.button ? subview : nil;
}

@end 
```

# r - 将数据框形状合并为一列

> ID：13414111
> 
> 赞同：1
> 
> 时间：2012-11-16T09:53:11.540
> 
> 标签：r, dataframe

我有一个这样的数据框

```
TargetID       A    B  knowngene
cg00000108 0.8644845 0.9289447 uc003chb.3
cg00000108 0.8644845 0.9289447 uc003cha.4
cg00000109 0.8810606 0.9109397 uc003fhy.3
cg00000109 0.8810606 0.9109397 uc003fhz.4
cg00000109 0.8810606 0.9109397 uc003fia.3 
```

我们的想法是改变它以获得这个新的

```
knowngene    Meth_info
uc003chb.3   cg00000108;0.8644845;0.9289447
uc003cha.4   cg00000108;0.8644845 0.9289447
uc003fhy.3   cg00000109;0.8810606;0.9109397
uc003fhz.4   cg00000109;0.8810606;0.9109397
uc003fia.3   cg00000109;0.8810606;0.9109397 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:08:07.647

这几乎是从`duplicated.data.frame`：

```
dat <- read.table(text = "TargetID       A    B  knowngene
cg00000108 0.8644845 0.9289447 uc003chb.3
cg00000108 0.8644845 0.9289447 uc003cha.4
cg00000109 0.8810606 0.9109397 uc003fhy.3
cg00000109 0.8810606 0.9109397 uc003fhz.4
cg00000109 0.8810606 0.9109397 uc003fia.3", header = TRUE)

# Paste together the first three columns
theStrings <- do.call(paste,c(dat[,-4],sep=";"))

# create a data.frame of the results
(dat2 <- data.frame(dat[,4, drop = FALSE], Meth_info = theStrings))

#    knowngene                     theStrings
# 1 uc003chb.3 cg00000108;0.8644845;0.9289447
# 2 uc003cha.4 cg00000108;0.8644845;0.9289447
# 3 uc003fhy.3 cg00000109;0.8810606;0.9109397
# 4 uc003fhz.4 cg00000109;0.8810606;0.9109397
# 5 uc003fia.3 cg00000109;0.8810606;0.9109397 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:36:53.490

试试这个：

```
df2 <- data.frame(knowngene, 
          Meth_info= paste(TargetID,";",A,";",B,sep="")
          ,stringsAsFactors=F) 
```

在向量上使用粘贴只是逐行粘贴项目 - 非常方便。

# android - 选择在 android 2.2 中不起作用

> ID：13414115
> 
> 赞同：1
> 
> 时间：2012-11-16T09:53:22.443
> 
> 标签：android, jquery, html, css

在我的应用程序中，我有一个选择按钮，当我单击它时会显示多个选项....它适用于 android 4.1，但在 android 2.2 中，当我单击它时没有效果，因此无法选择选项。 ...

```
<section class="fullContainer">
    <div class="container">
       <div class="descriptionRedeem"></div> 
        <div class="redeemContent"> 
            <form id="form_SNOWFLYGIFTCARDS">
            <p>Select a gift card</p>
            <select name="giftName" id="giftId">
                       <option value="">Select</option>
                       <option value="1001">Toys</option>
                       <option value="1002">Cosmetics</option>
                       <option value="1003">Cloths</option> 
                    </select>
        <input  type="button" value="Submit" name="submit_snowfly_gc" onclick="submitRedeemPoint()" >   <br>                                                                               
                <input type="reset" value="Cancel" name="_eventId_Cancel" >
            </form>
        </div>
         </div> 
    </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:16:12.760

我不确定这一点，但值得一试。

```
<input  type="button" value="Submit" name="submit_snowfly_gc" onclick="submitRedeemPoint()" />
<br />                                                                               
<input type="reset" value="Cancel" name="_eventId_Cancel" /> 
```

我假设旧的 android 浏览器足够严格，可以忽略格式不正确的 HTML。

# android - 电话输入在返回时不会触发事件

> ID：13414119
> 
> 赞同：1
> 
> 时间：2012-11-16T09:53:33.837
> 
> 标签：android, forms, cordova, android-webview, dom-events

我正在 Android 和 IOS 上开发 Phonegap 应用程序。

我找不到以下情况的解决方案。

我有一个单字段表单来获取邮政编码（在我的国家/地区为 4 个字符长度）。为了获得没有千位分隔符的数字键盘，我使用了下一个技巧：

```
<input type="tel" name="myName" maxlength="4" pattern="[0-9]*" /> 
```

我的问题是我无法隐藏键盘而不在字段外点击（模糊）。“return”键不可捕捉（我可以用文本类型捕捉它，但不能用电话或号码捕捉它）。

我知道表单字段（和相关功能）在 Android 上确实有问题（就像 webviews 中的许多其他东西一样）。

你能建议我解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:59:38.210

在 Android 中在 setContentView(R.layout.main); 之前使用这一行 this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

你肯定会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T11:47:11.477

[更新]：

对我有用的解决方法：

```
<input id="locator_zipcode" name="locator_zip" type="tel" pattern="[0-9]*" size="4" maxlength="4"
 onkeyup="
 if(isAndroid()){
     if($('#locator_zipcode').attr('value').length==4){
         setTimeout(function(){
             $('#locator_zipcode').blur();
         },500);
     }
 }"/> 
```

# asp.net-mvc - 使用奇怪的路径值渲染的链接

> ID：13414126
> 
> 赞同：0
> 
> 时间：2012-11-16T09:53:44.787
> 
> 标签：asp.net-mvc, iis, sql-session-state

我在我们的日志中看到过几次，用户也向我们报告过，但从未真正了解问题的根源。

有时，页面将从输出缓存中呈现，其中的链接具有奇怪的路径值。比如说`(X(3)S(5l53uwuaffkddojv4iwb3snm))`。这可能是因为页面的第一次渲染有这些链接，因此它们与它们一起缓存。

这意味着该页面上的所有 url 看起来都与此类似。

[http://www.example.com/(X(3)S(5l53uwuaffkddojv4iwb3snm))/foo/bar/index.htm](http://www.example.com/(X(3)S(5l53uwuaffkddojv4iwb3snm))/foo/bar/index.htm)

这看起来与[这个问题](https://stackoverflow.com/questions/6229565/iis7-5-asp-net-mvc-users-hitting-strange-urls-f1xe9exixpz)和 MSDN 文章“[了解 ASP.NET 无 Cookie 功能的工作原理](http://msdn.microsoft.com/en-us/library/aa479315.aspx)”相同，除了我们对公共站点使用会话或会话 cookie，但对于我们的站点的 99%，我们实际上并不使用会话. 剩下的 1% 使用会话 cookie 来提供用户体验，所以我看不出这会如何导致我们网站的其他部分出现问题。

上述文章的这一部分似乎引用了这个问题：

```
// Step 2: Check if we have already detected that Cookies are not 
//         supported. This is detected by looking for the string
//        "/(X(1))/" in the URL
If (URL-contains-"/(X(1))/")
   Report_cookies_are_NOT_supported_and_exit; 
```

当前[会话](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)状态如下所示：

```
<sessionState mode="SQLServer" sqlConnectionString="data source=myDatabase;user id=dbUsername;password=dbPassword" cookieless="false" timeout="10080" /> 
```

有人对我如何解决这个问题有任何想法吗？有没有办法阻止这样的网址显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:00:57.340

确保您已强制使用 cookie：

```
<sessionState cookieless="UseCookies" /> 
```

以及表单身份验证 cookie：

```
<forms loginUrl="~/Account/LogOn" timeout="2880" cookieless="UseCookies" /> 
```

如果您不这样做并且有一个禁用 cookie 的客户端浏览器，您将在 url 中获得上述令牌。

# iphone - 在 iOS 中旋转视频

> ID：13414128
> 
> 赞同：1
> 
> 时间：2012-11-16T09:53:59.697
> 
> 标签：iphone, ios, ipad, video, camera

我是 iOS 新手。

我有一个用于录制视频并在 iPad 上播放的应用程序。

现在我必须在视图中打开相机。所以我为此使用了avcapturesession。

现在通过我的编码，我可以录制和播放视频，但录制的视频处于旋转模式。

我使用 LandscapeRight 进行录制。

这是我的编码：

```
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
                    captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

                    captureVideoPreviewLayer.orientation=AVCaptureVideoOrientationLandscapeRight;
                    captureVideoPreviewLayer.frame = vwvideo.bounds;

                    [vwvideo.layer addSublayer:captureVideoPreviewLayer];

                    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

                    NSError *error = nil;
                    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
                    if (!input) {
                        // Handle the error appropriately.
                        NSLog(@"ERROR: trying to open camera: %@", error);
                    }

                    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

                    AVCaptureMovieFileOutput *movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];

                    NSString *documentsDirectory = [paths objectAtIndex:0];

                    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
                    [dateFormat setDateFormat:@"yyyy-MM-dd HH.mm.SS"];
                    NSDate *now = [[[NSDate alloc] init] autorelease];
                    theDate = [dateFormat stringFromDate:now];

                    NSString *tempPath = [NSString stringWithFormat:@"%@/%@.mp4",documentsDirectory,theDate];
                    [tempPath retain];
                    NSLog(@"Path::%@",tempPath);

                    NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:tempPath];
                                        [session addInput:input];
                    [session addOutput:movieFileOutput];
                    [session commitConfiguration];
                    [session startRunning];

                    [movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T10:20:17.260

[http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios/videoplayrecord](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios/videoplayrecord)

如果您仔细阅读示例项目的代码，该教程中给出的内容很容易通过以下代码片段将旋转的视频修复到正确的方向。（RecordVideo.m 文件）

```
 //FIXING ORIENTATION//
    AVMutableVideoCompositionLayerInstruction *FirstlayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:firstTrack];
    AVAssetTrack *FirstAssetTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    UIImageOrientation FirstAssetOrientation_  = UIImageOrientationUp;
    BOOL  isFirstAssetPortrait_  = NO;
    CGAffineTransform firstTransform = FirstAssetTrack.preferredTransform;
    if(firstTransform.a == 0 && firstTransform.b == 1.0 && firstTransform.c == -1.0 && firstTransform.d == 0)  {FirstAssetOrientation_= UIImageOrientationRight; isFirstAssetPortrait_ = YES;}
    if(firstTransform.a == 0 && firstTransform.b == -1.0 && firstTransform.c == 1.0 && firstTransform.d == 0)  {FirstAssetOrientation_ =  UIImageOrientationLeft; isFirstAssetPortrait_ = YES;}
    if(firstTransform.a == 1.0 && firstTransform.b == 0 && firstTransform.c == 0 && firstTransform.d == 1.0)   {FirstAssetOrientation_ =  UIImageOrientationUp;}
    if(firstTransform.a == -1.0 && firstTransform.b == 0 && firstTransform.c == 0 && firstTransform.d == -1.0) {FirstAssetOrientation_ = UIImageOrientationDown;}
    CGFloat FirstAssetScaleToFitRatio = 1.0;
    if(isFirstAssetPortrait_){
        FirstAssetScaleToFitRatio = 1.0;
        CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
        [FirstlayerInstruction setTransform:CGAffineTransformConcat(FirstAssetTrack.preferredTransform, FirstAssetScaleFactor) atTime:kCMTimeZero];
    }else{
        CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
        [FirstlayerInstruction setTransform:CGAffineTransformConcat(CGAffineTransformConcat(FirstAssetTrack.preferredTransform, FirstAssetScaleFactor),CGAffineTransformMakeTranslation(0, 160)) atTime:kCMTimeZero];
    }

    [FirstlayerInstruction setOpacity:0.0 atTime:videoAsset.duration];

    AVMutableVideoCompositionLayerInstruction *SecondlayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:AudioTrack];

    MainInstruction.layerInstructions = [NSArray arrayWithObjects:FirstlayerInstruction,nil];;

    AVMutableVideoComposition *MainCompositionInst = [AVMutableVideoComposition videoComposition];
    MainCompositionInst.instructions = [NSArray arrayWithObject:MainInstruction];
    MainCompositionInst.frameDuration = CMTimeMake(1, 30);
    MainCompositionInst.renderSize = CGSizeMake(360.0, 480.0);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    NSString *myPathDocs =  [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"orientationFixedVideo-%d.mov",arc4random() % 1000]];

    NSURL *url = [NSURL fileURLWithPath:myPathDocs];

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetMediumQuality];
    exporter.outputURL=url;
    exporter.outputFileType = AVFileTypeQuickTimeMovie;
    exporter.videoComposition = MainCompositionInst;
    exporter.shouldOptimizeForNetworkUse = YES;
    [exporter exportAsynchronouslyWithCompletionHandler:^
     {
         dispatch_async(dispatch_get_main_queue(), ^{
             [self exportDidFinish:exporter];
         });
     }]; 
```

# zend-framework - 在所有控制器中注册一个变量

> ID：13414132
> 
> 赞同：0
> 
> 时间：2012-11-16T09:54:14.620
> 
> 标签：zend-framework, zend-controller

我想注册一个在所有控制器中都可用的变量。

```
class testController extends Zend_Controller_Action{

   public function testAction(){
      echo $this->testVar;
   }
... 
```

如何以及在哪里，我可以设置这个变量的内容，以便我可以在每个控制器中访问它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T12:32:16.033

只需在 /public/index.php 中声明该变量即可。所有动作都从 index.php 开始，所以如果 U 在 index.php 中声明，您可以将其用作全局变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:52:33.997

```
class Default_Controller extends Custom_Controller_Abstract
{
    public function testAction()
    {
        $this->content = 'Test';
    }
}

class Index_Controller extends Custom_Controller_Abstract
{
    public function testAction()
    {
        echo $this->content;
    }
}

class Custom_Controller_Abstract extends Zend_Controller_Action
{
    public $content;
    public function __construct(Zend_Controller_Request_Abstract $request, Zend_Controller_Response_Abstract $response, array $invokeArgs = array)
    {       
        parent::__construct($request, $response,$invokeArgs);
    }
} 
```

希望这可以帮助

# ruby - 插值表达式

> ID：13414134
> 
> 赞同：1
> 
> 时间：2012-11-16T09:54:23.833
> 
> 标签：ruby

我有一个案例，要么`variable`被定义，要么`variable`被定义。我需要将逻辑实现到插值中，以在这些定义的变量中选择变量。当我做：`nil``alternative_variable`

```
some_value: "#{ variable || alternative_variable }" 
```

何时`variable`定义，一切正常。时刻`variable`未定义（并且`alternative_variable`存在），我收到以下错误：

```
undefined local variable or method `variable' for #<#Class:0x007fc3c021bc28>:0x007fc3c006c030> 
```

通过在插值之前添加以下代码块，我找到了一种绕过错误的方法：

```
<% variable ||= alternative_variable %> 
```

但它感觉很脏而且不是轨道方式。有没有一种简洁的方法可以将逻辑直接放在插值中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:56:04.170

这与rails无关，它只是红宝石。试试这个：

```
some_value: "#{ defined?(variable) ? variable : alternative_variable }" 
```

# mysql - 简化 MySQL 嵌套 SELECT

> ID：13414135
> 
> 赞同：5
> 
> 时间：2012-11-16T09:54:24.363
> 
> 标签：mysql, select, nested

```
id 标题 slug 摘要
------------------------------
1 标题1 slug1 摘要1
2 标题2 slug2 摘要2
3 标题3 slug3 摘要3
4 标题4 slug4 摘要4

```

我正在尝试选择所有字段，同时选择上/下一行的 id、title 和 slug

```
SELECT
    title, slug, summary, id as current_id,
    (SELECT id    FROM table WHERE id < current_id ORDER BY id DESC LIMIT 1) AS prev_id,
    (SELECT title FROM table WHERE id < current_id ORDER BY id DESC LIMIT 1) AS prev_title,
    (SELECT slug  FROM table WHERE id < current_id ORDER BY id DESC LIMIT 1) AS prev_slug,
    /*
    (SELECT id ...  ) AS next_id
    (SELECT title...) AS next_title
    ...
    and if there are more fields to select, I have to repeat this (SELECT...)
    */
FROM
    table
WHERE
    id IN (2,3,4); 
```

该查询有效，但显然这不是明智的做法。

有人可以帮忙简化一下吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:37:43.653

好的，我认为这很容易。但是在没有一个可行的解决方案的一个小时之后，我将用我刚刚想出的方式回答我自己的问题。

使用**CONCAT_WS**

```
SELECT
    title, slug, summary, id as current_id,
    (
        SELECT
            CONCAT_WS(',' id, title, slug)
        FROM
            table
        WHERE
            id < current_id ORDER BY id DESC LIMIT 1)
    ) AS prev_data,
    (
        SELECT
            CONCAT_WS(',' id, title, slug)
        FROM
            table
        WHERE
            id > current_id ORDER BY id ASC LIMIT 1)
    ) AS next_data
FROM
    table
WHERE
    id IN (2,3,4); 
```

结果会是这样的

```
id => 2
标题 => 标题2
蛞蝓=>蛞蝓2
摘要 => 摘要2
prev_data => 1,title1,slug1
next_data => 3,title3,slug3

```

然后我必须`explode`（PHP）`prev_data`并`next_data`获取详细信息。

我仍在寻找一种（更好的）方法来仅使用 MySQL 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:43:35.373

假设**列`Id`是`auto_increment`**并且值**之间没有间隙`id`**（意味着它们递增为 1、2、3、4。在 1、3、4、6 之间没有间隙），那么你可以试试这个**：**

```
SELECT T.Id AS CurrentId
    , T.Title AS CurrentTitle
    , T.Slug AS CurrentSlug
    , T.Summary AS CurrentSummary
    , IFNULL(P.Id, -1) AS PreviousId
    , IFNULL(P.Title, '') AS PreviousTitle
    , IFNULL(P.Slug, '') AS PreviousSlug
    , IFNULL(P.Summary, '') AS PreviousSummary
    , IFNULL(N.Id, -1) AS NextId
    , IFNULL(N.Title, '') AS NextTitle
    , IFNULL(N.Slug, '') AS NextSlug
    , IFNULL(N.Summary, '') AS NextSummary
    FROM table T
    LEFT JOIN table P ON P.Id - 1 = T.Id
    LEFT JOIN table N ON N.Id + 1 = T.Id
    WHERE T.Id IN (2, 3, 4); 
```

否则，您发布的答案是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:17:27.670

您可以从一个子查询中提取列：

```
SELECT
    title, slug, summary, id as current_id, prev.prev_id, prev.prev_title, prev.prev_slug, next.next_id, next.next_title, next.next_slug
FROM
    table,
    (SELECT id AS prev_id, title AS prev_title, slug AS prev_slug FROM table WHERE id < 2 ORDER BY id DESC LIMIT 1) AS prev,
    (SELECT id AS next_id, title AS next_title, slug AS next_slug FROM table WHERE id > 2 ORDER BY id DESC LIMIT 1) AS next
WHERE
    id = 2; 
```

`IN`但是，如果您必须在 where 中使用子句，这将不起作用；您需要为`id`...的每个值运行此查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-17T09:56:44.600

很抱歉解决了一个 6 岁问题，但必须这样做 :)
`LAG()`并`LEAD()`进行救援！
非常方便，在 Oracle 和 SQL Server 中也可用：

```
select 
    title, lead (title) over (order by id) next_title, lag (title) over (order by id) prev_title,
    slug, lead (slug) over (order by id) next_slug, lag (slug) over (order by id) prev_slug,
    summary, lead (summary) over (order by id) next_summary, lag (summary) over (order by id) prev_summary,
    id, lead (id) over (order by id) next_id, lag (id) over (order by id) prev_id
from `table`
;
/*
create table `table` as
(select id, concat('title', id) title, concat('slug', id) slug, concat('summary', id) summary
from
(select 1 id union all
select 14 id union all
select 34 id union all
select 13 id union all
select 2 id union all
select 4 id ) as q)
*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T13:52:55.267

也许这样的事情会奏效。我没有测试它，所以我不确定，但看起来不错:)

```
SELECT
  current.title as current_title,
  current.slug as current_slug,
  current.summary as current_summary, 
  current.id as current_id,
  prev.title as prev_title,
  prev.slug as prev_slug,
  prev.summary as prev_summary,
  prev.id as prev_id,
  next.title as next_title,
  next.slug as next_slug,
  next.summary as next_summary,
  nexrt.id as next_id
FROM
  `table` current LEFT JOIN 
  `table` prev ON prev.id = current.id - 1 LEFT JOIN
  `table` next ON next.id = current.id + 1                    
WHERE
  current.id IN (2,3,4) 
```

# java - SimpleDateFormat 的线程安全问题

> ID：13414142
> 
> 赞同：5
> 
> 时间：2012-11-16T09:54:54.000
> 
> 标签：java, thread-safety, simpledateformat

我从程序员测试中得到以下代码

```
private String formatDate(Date date)
{
  String result = "";
  //….
  SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
  result = sdf.format(date);
  //…
  return result;
} 
```

以及多个线程同时使用该方法的附加信息。这有什么问题吗？

我的回答是不，应该没问题（假设 //... 部分没有其他事情发生）。

我的动机是不使用全局或类数据结构。日期作为参数从每个踏板传递，在方法内部仅使用局部变量和局部对象。因此，每个线程将获取并使用它自己的 SimpleDateFormat 类的对象实例。

但是，这不是测试中的“正确”答案。“正确”的答案是 SimpleDateFormat 类不是线程安全的，因此需要同步对该对象的访问。

那么，我或解决方案是否正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T09:57:48.517

你的答案是正确的。SimpleDateFormat 不是线程安全的，这是真的，但每个方法调用都会创建一个自己的实例，所以这没关系。如果 SimpleDateFormat 是一个实例变量，这将不是线程安全的（如您所述）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T10:12:53.670

`SimpleDateFormatter`不是问题 - 这是一个局部变量，不能从多个线程访问它，因为它没有暴露在外部。真正的问题是`Date`参数（正如@Marko Topolnik 已经说过的那样）。该对象可以传递给方法和某个线程，可以在`formatDate`方法执行过程中对其进行修改。您可以使用`long`作为参数类型来防止数据竞争。要转换`Date`为`long`使用`Date.getTime()`方法并从中创建`Date`，`long`您可以使用`new Date(long)`构造函数。

# ios - 登录 Facebook 时出现 com.facebook.sdk 错误 2

> ID：13414143
> 
> 赞同：5
> 
> 时间：2012-11-16T09:54:53.907
> 
> 标签：ios, iphone, cordova

我正在尝试使用 Facebook 插件解决电话间隙但收到错误消息

> “操作无法完成 com.facebook.error 2”

我猜我的包标识符与 Facebook 不匹配，但我不确定
我错过了包标识符匹配的内容...检查我的代码是否缺少包标识符匹配的内容？

设备就绪功能：

```
document.addEventListener('deviceready', function() {
     try {
       alert('Device is ready! Make sure you set your app_id below this alert.');
       FB.init({ appId: "120048634820284", nativeInterface: CDV.FB, useCachedDialogs: false });
       document.getElementById('data').innerHTML = "";
     } catch (e) {
            alert(e);
     }
}, false); 
```

info.plist 文件

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.mycompany.myapp</string>
        <key>CFBUndleURLSchemes</key>
        <array>
            <string>fb120048634820284</string>
        </array>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T18:46:31.567

我有同样的错误，终于解决了。该应用程序配置为沙盒模式，我使用的 facebook 用户未添加到测试人员组。

管理员可以在这里解决它：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T09:29:49.083

从设置中退出 facebook 应用程序，然后尝试。

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:51:04.863

在设置中检查facebook，你会在你的应用程序名称前面看到，打开它，它会解决你的问题。

但这仍然不是完美的解决方案，我也在寻找这个问题的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T07:37:26.927

确保在 developers.facebook.com 上的应用设置中具有正确的捆绑标识符

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-20T02:03:26.083

在真实设备上似乎很好。sdk 错误 2 仅发生在 ios 模拟器上。这仍然困扰着我

但只要设备没有抛出错误，就可以了..

# javascript - 带有把手的 Javascript/jQuery OOP，出现未捕获的错误

> ID：13414145
> 
> 赞同：1
> 
> 时间：2012-11-16T09:54:59.630
> 
> 标签：javascript, oop, handlebars.js

我一直在尝试使用 Backbone.js，但效果并不好，所以我决定从头开始，并使用 javascript 进行 OOP，我认为现在我的模板做得很好只是不会被渲染，我无法判断模板，js，两者或数据是否有问题！

我的模板：

```
<script id="BudgetItemTemplate" type="text/x-handlebars-template">
{{#list data}}
 <div class="budget-item">
  <div class="item-info">{{type}}</div>
  <div class="item-spent">{{spent}}</div>
  <div class="item-budget">{{budget}}</div>
 </div>
{{/list}}   
</script> 
```

我的 javascript ：

```
var data = [];
var BudgetItems = [data];
var BudgetItemTemplateSource = $('#BudgetItemTemplate').html();
var BudgetItemTemplate = Handlebars.compile(BudgetItemTemplateSource);

function BudgetItem(type, spent, budget) {

   "use strict";
   this.type = type;
   this.spent = spent;
   this.budget = budget;

   this.editType = function (type) {
    this.type = type;
    return this;
};
this.editSpent = function (spent) {
    this.spent = spent;
    return this;
};
this.editBudget = function (budget) {
    this.budget = budget;
    return this;
};

 data.push({type: 'type', spent: 'spent', budget: 'budget'});
}

function BudgetItemList() {
this.BudgetItems = BudgetItems;
   this.render = function () {
    console.log('rendercalled')
      $('#iBudget').empty();
      $('#iBudget').append(BudgetItemTemplate(BudgetItems));
};
};

$(document).ready(function () {
var food = new BudgetItem('food', '0.00', '10.00');
var drink = new BudgetItem('drink', '10000.00', '450.00');
var bills = new BudgetItem('bills', '30.00', '50.00');
console.log(food.budget);
food.editType('basics');
console.log(food.type);
   console.log(BudgetItems);

var budgetlist = new BudgetItemList();    
budgetlist.render();
console.log(BudgetList.BudgetItems);

}); 
```

我只是不明白为什么模板不会渲染，我尝试了几种不同的方法来设置我的数据，目前它是一个数组的数组，在我把它当作一个大批。同样在模板中，如果尝试使用带有上下文和无上下文的“列表”助手，这两种情况都是数据。我一直在使用警报进行调试，问题似乎出在车把上，但我想不通！我将不胜感激任何评论、批评或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:38:28.783

首先，您的模板中有这个：

```
{{#list data}}
    ...
{{/list}} 
```

但`{{#list}}`不是由 Handlebars 定义的，我在`Handlebars.registerHelper`任何地方都看不到会添加这样一个自定义帮助程序的调用。所以我假设你打算使用标准内置的迭代器`{{#each}}`：

```
<script id="BudgetItemTemplate" type="text/x-handlebars-template">
    {{#each data}}
       <div class="budget-item">
           <div class="item-info">{{type}}</div>
           <div class="item-spent">{{spent}}</div>
           <div class="item-budget">{{budget}}</div>
       </div>
    {{/each}}   
</script>​ 
```

你的“模板需要一个对象”的想法是正确的，但你的实现有点偏离。已编译的 Handlebars 模板希望将对象用作键/值命名空间；所以如果你想`{{x}}`在模板中引用，那么你需要像这样调用模板函数：

```
var html = template({
    x: 'some value'
}); 
```

根据您的模板，您需要使用如下数据调用已编译的模板函数：

```
var html = template({
    data: [
        { type: 'pancakes', spent: 10, budget: 10 },
        { type: 'eggs',     spent:  5, budget:  1 },
        { type: 'stamps',   spent:  1, budget:  5 }
    ]
});​​​​​​​​​​​​​​ 
```

这是一个实际模板的演示（请原谅我非常糟糕的颜色感觉）：http: [//jsfiddle.net/ambiguous/BVPRb/](http://jsfiddle.net/ambiguous/BVPRb/)

# javascript - DOM 元素在添加到 DOM 树后是否立即可用？

> ID：13414146
> 
> 赞同：3
> 
> 时间：2012-11-16T09:55:05.200
> 
> 标签：javascript, dom, timing

在将一大段 HTML 动态附加到文档后（示例使用 jQuery，但问题对所有 JavaScript 都有效），我可以假设附加的元素在之后立即可用吗？

```
$('#content').append('<p>Content</p><button id="newbutton">New</button><p>Some more content</p>');
var forExample = $('#newbutton').width(); // Element available? 
```

在我的特殊情况下，创建单个元素是不切实际的。此外，这是很久以前的`the document.ready`事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:57:05.900

是的，它们立即可用。例如，jQuery 将返回正确的对象，并且您可以将元素绑定到它们上。

但是由于它们不会在脚本运行时呈现，因此并不总是立即进行大小计算，因此如果您需要对象的尺寸，您可能需要这样做

```
setTimeout(function(){
    var forExample = $('#newbutton').width();
    // use size
}, 0); // 0 is enough to tell the engine to render before it executes the callback 
```

请注意，如果您进行增量调试（脚本并不是真正“运行”），浏览器的行为会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:03:59.310

是的，它是直接可用的。你可以在 1 分钟内用小提琴测试它... [http://jsfiddle.net/adxbH/](http://jsfiddle.net/adxbH/)

```
var newButton = document.createElement('button');

newButton.id = 'newbutton';
newButton.innerHTML = 'button_test';
document.body.appendChild(newButton);
var forExample = document.getElementById('newbutton');
alert(forExample.offsetWidth);​ 
```

如您所见，不使用 jQuery 也很容易。

# lucene - Lucene NumericUtils.IntToPrefixCoded 有什么意义

> ID：13414149
> 
> 赞同：1
> 
> 时间：2012-11-16T09:55:15.527
> 
> 标签：lucene, lucene.net

我一直在研究 Subtext 的 Lucene.Net 实现作为对我们的网站进行类似操作的指南。当 Subtext 索引或搜索给定的帖子时，它通过 NumericUtils.IntToPrefixCoded 运行 ID。根据 Lucene 文档，它会发生一些变化，但不会失去精度。那么，有什么意义呢？它有什么作用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:49:39.330

您需要查看[类文档](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/util/NumericUtils.html)，其中更详细地解释了它：

> 为了在 Apache Lucene 中快速执行范围查询，将范围递归地划分为多个区间进行搜索：范围的中心仅在 trie 中以尽可能低的精度进行搜索，而边界匹配得更精确。这大大减少了术语的数量。
> 
> 此类生成术语以实现此目的：首先需要将数字整数值转换为字符串。对于该整数值（32 位或 64 位），它们是无符号的，并且这些位被转换为每 7 位的 ASCII 字符。结果字符串可以像原始整数值一样排序。每个值也以`shift`编码期间使用的值（删除的位数）作为前缀（在第一个字符中）。

据我了解，`intToPrefixCoded`方法正是这样做的：获取`int`值，对其进行移位并返回一个可排序的值，`String`如上所述。

# hibernate - 关于 JPA 验证

> ID：13414151
> 
> 赞同：1
> 
> 时间：2012-11-16T09:55:23.557
> 
> 标签：hibernate, jpa

在我的项目中，我正在为我的实体使用 JPA 验证。我正在使用两个实体类，例如 (1)InstrumentConfiguration 和 (2)GenericEntity。

在我的情况下 InstrumentConfiguration 扩展了 GenericEntity

Generic 类中有一个字段说 datemodified。我想在扩展的子类中提供验证，即 InstrumentConfiguration 。我想使用 XML 文件提供验证。我该怎么做？

# django - Django 定义 m2m 字段转换（从到字符串）

> ID：13414156
> 
> 赞同：0
> 
> 时间：2012-11-16T09:55:57.050
> 
> 标签：django, many-to-many, django-orm, m2m

我正在尝试使用 m2m 字段。

我想要做的是有一个字符串（CharField），用户可以在其中编写帖子的标签，每个标签用逗号分隔。

我能够以这种方式进行创作：

```
 tags = tags.split(',')
        for tag in tags:
            obj, create = Tag.objects.get_or_create(name=tag)
            pub.tags.add(obj) 
```

现在，我想做UpdateView。显然，如果我没有在表单中指定从列表到字符串的转换，我就没有设置任何值。所以它应该是这样的：

```
for tag in tags:
    str+=tag+"," 
```

重点是：

*   我是否必须每次都将列表转换为字符串并将字符串转换为列表？
*   我可以在某处指定如何进行此转换吗？Django中是否已经实现了任何东西？

PS：在 UpdateView 中，如果我删除了一个标签，我如何才能将它从关系中删除，因为我必须手动进行解析？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:20:21.727

最简单的方法是先删除所有标签`pub.tags`，然后将它们全部重新添加：

```
# Clear the existing tags
pub.tags.clear()

tags = tags.split(',')
for tag in tags:
    obj, create = Tag.objects.get_or_create(name=tag)
    pub.tags.add(obj) 
```

您可以尝试这种更 Python 的方法，而不是循环和构建字符串：

> > > 标签 = ['red', 'green', 'blue'] ','.join(tags) 'red,green,blue'

# php - 如何多次使用“stream_get_line”？

> ID：13414159
> 
> 赞同：0
> 
> 时间：2012-11-16T09:56:03.797
> 
> 标签：php

我想使用我的脚本的输出和[stream_get_line](http://php.net/manual/en/function.stream-get-line.php) php 函数声明多个变量。

例子：

```
<?php

$fp = fsockopen("10.73.xxx.xxx", "23");

fputs($fp,"user\r");
sleep(1);
fputs($fp,"password\r");
sleep(1);

$content = stream_get_line($fp, 100, "user");
$content2 = stream_get_line($fp, 100, "password");

echo $content;
echo $content2;
?> 
```

但是，在我使用一次 stream_get_line 后，脚本停止工作。如何多次使用它来获取多行输出？如果我删除第二个 stream_get_line 函数，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:03:00.243

这边走：

```
$fp = fsockopen("10.73.xxx.xxx", "23");

fputs($fp,"user\r");
sleep(1);
fputs($fp,"password\r");
sleep(1);

while(!feof($fp)) {
    $content = stream_get_line($fp, 100, "\n");
    echo $content;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:57:13.037

我最终使用了以下代码：

```
$fp = fsockopen("10.73.xxx.xxx", "23");

fputs($fp,"user\r");
sleep(1);
fputs($fp,"password\r");
sleep(1);

while(!feof($fp)) {
    $content = stream_get_line($fp, 100, "user");
    $content1 = substr($content, 10, 4);
    $content2 = substr($content, 15, 8);
} 
```

我将整个内容存储在变量“content”中，然后构建 2 个额外的变量“content1”和“content2”，从变量“content”中提取所需的输出。

# python - numpy直方图索引

> ID：13414162
> 
> 赞同：3
> 
> 时间：2012-11-16T09:56:17.220
> 
> 标签：python, numpy, scipy

考虑到我有一个 3D 直方图或为简单起见，一个 3D numpy 形状数组 (X,Y,Z)

```
import numpy as np
array = np.random.random((100,100,100)) 
```

使用 numpy 或 scipy 获取满足球体条件的数组值索引的最佳方法是什么？

```
(index_x**2 + index_y**2 + index_z**2) <= radius**2 
```

很明显，在后面的条件下，数组中心是(0, 0, 0)。一般情况下会是

```
((index_x-center_x)**2 + (index_y-center_y)**2 +(index_z-center_z)**2) <= radius**2 
```

只需使用 python 循环即可轻松解决该问题，但我需要对其进行优化。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:01:45.330

您可以首先有效地获取索引，`ogrid()`然后获取满足您条件的索引`nonzero()`。

可以使用[nonzero](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html#numpy.nonzero) () 获得索引，如下所示：

```
indexes = numpy.transpose((x**2+y**2+z**2 <= radius**2).nonzero())  # transpose() might be unnecessary: it depends on your needs 
```

[使用ogrid](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ogrid.html) ()有效地获得索引数组：

```
x, y, z = numpy.ogrid[:100, :100, :100] 
```

或者，对于您的输入`data`数组的任意形状：

```
x, y, z = ogrid[tuple(slice(None, dim) for dim in data.shape)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:20:08.670

只是为了使@EOL 更好的方法更通用，可以在数组的形状内定义一个中心

```
array = np.random.random((100,100,100))
center = (30,10,25)
radius = 5.0
x, y, z = np.ogrid[-center[0]:array.shape[0]-center[0],-center[1] :array.shape[1]-center[1], -center[2]:array.shape[2]-center[2]]
indexes = numpy.transpose((x**2+y**2+z**2 <= radius**2).nonzero()) 
```

# javascript - node.js 在异步请求中缺少帖子数据

> ID：13414163
> 
> 赞同：4
> 
> 时间：2012-11-16T09:56:22.263
> 
> 标签：javascript, node.js, post

我正在 Node.js 中制作一个简单的表单。其他一切似乎都正常工作，但是应该接收发布请求数据的函数永远不会被调用。这是相关的代码片段：

```
if (request.method == 'POST') {
    var body = '';
    console.log(request.body);
    request.on('data', function (chunk) {
        console.log("got the post request data"); //nothing logged to console
        body += chunk;
    });
    request.on('end', onRequestEnd(body, response));
} 
```

函数 onRequestEnd 确实被调用了，但后来我的代码在参数正文中只有一个空字符串时会中断。关键字“数据”是否正确？

代码是根据此处的答案修改的：[如何在 Node.js 中提取 POST 数据？](https://stackoverflow.com/questions/4295782/node-js-extracting-post-data). 如果需要，我会发布更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:13:22.330

在经历了很多挫折之后，我自己解决了这个问题！

我改变了这一行：

```
request.on('end', onRequestEnd(body, response)); 
```

到：

```
request.on('end', function() {
        onRequestEnd(body, response);
    }); 
```

它与回调有关。我不完全确定为什么这行得通，而另一个却行不通。这就是我的感受： http: [//www.masti-xpress.com/images/Story-of-Every-Programmer.jpg](http://www.masti-xpress.com/images/Story-of-Every-Programmer.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:34:51.063

我将分享我是如何解决这个问题的。然而，我对它有另一种看法，我也会分享。我想要的是在我的“视图”中有这样的东西。

```
app('/urlToView', function(req, response){
    request.on('end', function() {
        var post = **request.data;** //sanitize data
        resolver.renderTemplateOr404('start.html', post, request, response);
    });
} 
```

**request.data**是这里要注意的重要事项。但是，我还没有真正解决如何“不”拥有`request.on('end'...)`我的观点。

为什么 console.log() 的一个原因是您如何处理来自执行所有这些工作的函数的回调。

我在启动服务器时劫持了请求，然后它才出现在我的视图中

`self.preProcess(self, request, response);`

和

```
preProcess: function onRequest(app, request, response){ 
     processor.preRequest(request);
} 
```

最后是我做的 preRequest() 函数

```
if (request.method === 'POST') {
    var postdata = "";
    request.on('data', function(postdataChunk){
         postdata += postdataChunk;
    });
    request.on('end', function(){
        _transformRequest(request, _transformPostdata(postdata)); //this is to set the data on the request
    });
} 
```

并且在这里添加 a`console.log(postdataChunk);`不是问题，因为所有回调都得到了正确处理。

另外，我问这个问题可能很愚蠢，但你知道 console.log(); 不输出到浏览器而是输出到终端窗口？

这对您来说可能不是一个确切的答案，但我希望这会有所帮助。

# java - 使用 Thread.sleep() 的时间延迟用于paintComponent(Graphics g) 无法按预期工作

> ID：13414164
> 
> 赞同：2
> 
> 时间：2012-11-16T09:56:23.623
> 
> 标签：java, swing, progress-bar, paintcomponent, event-dispatch-thread

我正在制作一个动画进度条，其中我使用了多个`fillRect()`类方法`javax.swing.Graphics`。
为了在绘制每个矩形后延迟，我使用`Thread.sleep(500)`了延迟的方法，（许多论坛建议延迟）。
问题是，不是在显示每个矩形框后延迟 0.5 秒，而是在开始时占用所有矩形所需的整个延迟，然后显示最终图像，即进度条。
**问题 1**
为每个单条设置延迟，我将延迟“ `Thread.sleep(500)`”与条“ `fillRect()`”放在一个单`for() loop`中，我想知道，为什么在开始时需要所有延迟，然后显示完成的 ProgressBar。
**问题2**
如何更改我的代码，以便延迟可以与每个矩形条同时发生，所以当我运行程序时，它应该生成一个动画进度条。
**代码：**

```
import javax.swing.JOptionPane;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.Color;

class DrawPanel extends JPanel
{
    public paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(new Color(71,12,3));
        g.fillRect(35,30,410,90);

        for ( int i=1; i<=40; i+=2)
        {
          Color c = new Color (12*i/2,8*i/2,2*i/2);
          g.setColor(c);
          g.fillRect( 30+10*i,35,20,80);

        try
          { Thread.sleep(500); } 
        catch(InterruptedException ex)
          { Thread.currentThread().interrupt(); }
        }
    }
}

class ProgressBar
{
    public static void main (String []args)
    {
        DrawPanel panel = new DrawPanel();
        JFrame app = new JFrame();
        app.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        app.add(panel);
        app.setSize(500,200);
        app.setVisible(true);
    }
} 
```

非常感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T10:32:26.987

不要阻塞 EDT（事件调度线程）——当这种情况发生时，GUI 将“冻结”。而不是为重复的任务调用`Thread.sleep(n)`实现 Swing `Timer`。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)另外请务必查看@Brian 链接的进度条教程。它包含工作示例。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class DrawPanel extends JPanel
{
    int i = 0;
    public DrawPanel() {
        ActionListener animate = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                repaint();
            }
        };
        Timer timer = new Timer(50,animate);
        timer.start();
    }
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(new Color(71,12,3));
        g.fillRect(35,30,410,90);

        Color c = new Color (12*i/2,8*i/2,2*i/2);
        g.setColor(c);
        g.fillRect( 30+10*i,35,20,80);

        i+=2;
        if (i>40) i = 0;
    }
}

class ProgressBar
{
    public static void main (String []args)
    {
        DrawPanel panel = new DrawPanel();
        JFrame app = new JFrame();
        app.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        app.add(panel);
        app.setSize(500,200);
        app.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:58:13.633

我真的不会这样做。Swing 刷新线程不应该像这样使用。您最好使用另一个线程（可能使用[TimerTask](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)）并根据需要重绘矩形。

查看 Oracle [ProgressBar 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)以获取更多信息、代码等。

# cordova - PhoneGap/Kendo UI 应用程序在 iPhone 和 Android 上运行良好，但在 Blackberry OS 6 设备上挂起而不会触发任何错误

> ID：13414169
> 
> 赞同：0
> 
> 时间：2012-11-16T09:56:48.077
> 
> 标签：cordova, kendo-ui

我的应用程序似乎没有在 Blackberry 中正确初始化，但也没有引发任何错误。我有一个使用 Kendo UI 和 PhoneGap 构建的相当简单的应用程序。它在 Android 和 iPhone 以及 Blackberry 的 Ripple 调试模拟程序中运行良好。

但是，我有一个 Torch 设备，当我在设备上启动应用程序时，它会进入打开屏幕并挂在那里。该应用程序是选项卡式的，当我尝试单击选项卡时，它只会粘在第一个带有空白框架的选项卡上，应用程序的其余部分应该是：

![在此处输入图像描述](../Images/2399db6f319079536a70af05ca6b0522.png)

使用 PhoneGap Build 的调试控制台和设备本身的控制台，似乎没有任何错误触发。有没有其他人遇到过这个，有什么想法吗？我已经向 PhoneGap 支持人员提出了这个问题，他们建议我看看是否有人可以提供帮助。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:38:11.097

BB6 的 PhoneGap 中的视口有点错误，其中的应用程序无法指定高度：100%。这个问题应该在 Kendo UI Mobile 的较新版本中得到解决，如果您可以在 Q3（上周发布）中重现它，您可以尝试吗？

# java - 如何在 SWT 应用程序中显示 PDF？

> ID：13414171
> 
> 赞同：0
> 
> 时间：2012-11-16T09:56:53.030
> 
> 标签：java, pdf, swt, eclipse-rcp

在 swt 应用程序中显示 PDF 的最佳方式是什么？我更喜欢开源解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:26:46.063

如果您可以假设安装了 system-pdf 查看器，则可以`Browser`通过设置以下 HTML 来使用小部件

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<head>

</head>
<body onResize="fit();">
<embed
    type="application/pdf"
    src="http://www.adobe.com/security/pdfs/riskcompliance_faq.pdf"
    id="pdfDocument">
</embed>    
<script type="text/javascript">
fit();
function fit() {
 var myWidth = 0, myHeight = 0;
if( typeof( window.innerWidth ) == 'number' ) {
//Non-IE
myWidth = window.innerWidth;
myHeight = window.innerHeight;
} else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
//IE 6+ in 'standards compliant mode'
myWidth = document.documentElement.clientWidth;
myHeight = document.documentElement.clientHeight;
} else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
//IE 4 compatible
myWidth = document.body.clientWidth;
myHeight = document.body.clientHeight;
}
document.getElementById('pdfDocument').width = myWidth;
document.getElementById('pdfDocument').height = myHeight;
}</script>
</body>
</html> 
```

嵌入标签的 src 必须指向所需的 pdf，对于本地文件：`file://myPath/../test.pdf`

# apache-pig - 如何在猪中创建一个小的常量关系（表）？

> ID：13414172
> 
> 赞同：5
> 
> 时间：2012-11-16T09:56:57.303
> 
> 标签：apache-pig

有没有办法在猪中创建一个小的常量关系（表）？我需要创建一个仅包含 1 个包含常量值的元组的关系。类似于：

```
A = LOAD using ConstantLoader('{(1,2,3)}'); 
```

谢谢，伊多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-27T12:57:51.513

我不确定您为什么需要它，但是，这是一个丑陋的解决方案：

```
A = LOAD 'some/sample/file' ;
B = FOREACH A GENERATE '' ;
C = LIMIT A 1 ; 
```

现在，您可以使用“C”作为具有一个空元组的“空关系”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-06T19:00:17.743

```
DEFINE GenerateRelationFromString(string) RETURNS relation {
    temp = LOAD 'somefile';
    tempLimit1 = LIMIT temp 1;
    $relation = FOREACH tempLimit1 GENERATE FLATTEN(TOKENIZE('$string', ','));
}; 
```

用法：

```
fourRows = GenerateRelationFromString('1,2,3,4');
myConstantRelation = FOREACH fourRows GENERATE ( 
CASE $0
    WHEN '1' THEN (1, 'Ivan')
    WHEN '2' THEN (2, 'Boris')
    WHEN '3' THEN (3, 'Vladimir')
    WHEN '4' THEN (4, 'Olga')
END
) as myTuple; 
```

这肯定是 hacky，在我看来，正确的方法是实现一个 StringLoader() ，它可以像这样工作：

```
fourRows = LOAD '1,2,3,4' USING StringLoader(','); 
```

通常用于文件位置的参数将仅用作文字字符串输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-14T00:04:26.330

快速回答：没有。

[我在pig-dev 邮件列表](http://mail-archives.apache.org/mod_mbox/pig-dev/201408.mbox/%3CCAB2zpW8of3juRKzRrva72mc_7T7D8bRFB2+b4sS-tryCZbiVBg@mail.gmail.com%3E)中询问了它。

# android - 无法使用 github 凹凸演示在 android 中加载 .so 文件

> ID：13414173
> 
> 赞同：1
> 
> 时间：2012-11-16T09:57:01.607
> 
> 标签：android, shared-libraries, bump

我已经从 github 下载了凹凸演示，但是当我运行它时，它一直在运行，错误日志为

```
11-16 12:33:01.632: ERROR/AndroidRuntime(4298): FATAL EXCEPTION: main
11-16 12:33:01.632: ERROR/AndroidRuntime(4298): java.lang.UnsatisfiedLinkError: Library
android-api not found 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
java.lang.Runtime.loadLibrary(Runtime.java:461)
11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at     
java.lang.System.loadLibrary(System.java:557)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at com.bump.api.BumpAPI.<init>   
(BumpAPI.java:122)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at      
 java.lang.Class.newInstanceImpl(Native Method)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 java.lang.Class.newInstance(Class.java:1429)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 android.app.ActivityThread.handleCreateService(ActivityThread.java:2940)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 android.app.ActivityThread.access$3300(ActivityThread.java:125)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2087)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 android.os.Handler.dispatchMessage(Handler.java:99)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 android.os.Looper.loop(Looper.java:123)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 android.app.ActivityThread.main(ActivityThread.java:4627)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 java.lang.reflect.Method.invokeNative(Native Method)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 java.lang.reflect.Method.invoke(Method.java:521)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 11-16 12:33:01.632: ERROR/AndroidRuntime(4298):     at 
 dalvik.system.NativeStart.main(Native Method) 
```

当我使用这段代码在 onCreate 中加载它时

```
 public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    try {
        //System.loadLibrary("mysharedlibrary");
        //crashing on this line
        System.loadLibrary("libgifflen.so");
        } catch (UnsatisfiedLinkError use) {
        Log.e("JNI", "WARNING: Could not load libmysharedlibrary.so");
        System.out.println("warning  "+use.getMessage());
    }
   //.......some other code
 } 
```

我想我错过了一些非常字符串的东西，但我找不到任何这样的东西或无法为此得到一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:11:51.757

这就是我将凹凸库导入我的项目的方式，它可以工作。

1.  在你的eclipse中导入bump-api-library项目

2.  选择bump-api-library > Properties > Android > 确保选择了“Is Library” > 点击“Apply”然后“OK”

3.  选择您的项目 > 属性 > Android > 单击“添加”按钮 > 选择“bump-api-library” > 单击“应用”然后“确定”

# html - ColdFusion 9 中的动态下拉列表

> ID：13414175
> 
> 赞同：0
> 
> 时间：2012-11-16T09:57:07.430
> 
> 标签：html, coldfusion, coldfusion-9, cascadingdropdown

好吧，所以人们没有清楚地理解我的问题，所以我删除了其他人已经提出问题的网址，但我没有得到完美的答案..

所以这里是问题......

我希望在 ColdFusion 中编写一个动态下拉列表。我想要的是由上述下拉列表填充的下拉列表（例如：选择省（BC）将使用该省内的所有城市填充城市下拉列表）。省数据将从 ColdFusion 查询中收集，并与城市数据相同。

请不要使用 JavaScript，不要 AJAX，不要使用 ColdFusion CFC，不要多于或少于一些 ColdFusion 标签... :( 逻辑代码应位于一个 .cfm 文件本身中。

*   编辑 -

@查尔斯·希金斯

似乎无法让它工作。它抛出“调用 CFC BinFcns.cfc 时出错：内部服务器错误”“请告诉我哪里做错了，这里是代码..

这是'index.cfm'

```
<cfquery name="qstates" datasource="info">
  SELECT states
  FROM info

  GROUP BY states
</cfquery> 
<html> 
<head> 
</head> 
<body> 
<cfform>
<cfselect name="DropDown1" bind="cfc:BinFcns.Method({DropDown1})">
    <cfoutput query="qstates"><option>#states#</option></cfoutput>
</cfselect>
<cfselect name="DropDown2" bind="cfc:BinFcns.Method({DropDown1})" /> 
</cfform>
</body> 
</html> 
```

这个是.cfc，'BinFcns.cfc'

```
<cfcomponent output="true">
   <!--- set function name --->
   <cffunction name="Method" access="remote" returnType="array">
    <!--- this is what you passed to the CFC via the {} think in the select --->
      <cfargument name="Selected" type="numeric" required="true">
      <!--- Define array to produce the drop down --->
      <cfset var data="">
      <cfset var result=ArrayNew(2)>
      <cfset var i=0>
      <!--- Get data --->
      <cfquery name="data" datasource="info">
      SELECT *
      FROM info
      Order by cities
      </cfquery> 
      <!--- Convert results to array --->
      <cfloop index="i" from="1" to="#data.RecordCount#">
             <cfset result[i][1]=data.DropDownID[i]>
             <cfset result[i][2]='#DropDownTEXT#'>      
             <!--- determine which is selected via what you passed and something in the database --->
            <cfif data.DropDownID[i] eq #Selected#>
                <cfset result[i][3]=true>
            </cfif>
      </cfloop>

      <!--- And return it --->
      <cfreturn result>
   </cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:59:14.850

你的 CFC 它并不复杂，相信我会学习它的最佳选择，我没有测试过这段代码，但它应该接近工作了.. 就像我的大多数代码一样丑陋。

```
<cfcomponent output="false">
   <!--- set function name --->
   <cffunction name="Method" access="public" returnType="array">
    <!--- this is what you passed to the CFC via the {} think in the select --->
      <cfargument name="Selected" type="numeric" required="true">
      <!--- Define array to produce the drop down --->
      <cfset var data="">
      <cfset var result=ArrayNew(2)>
      <cfset var i=0>
      <!--- Get data --->
      <cfquery name="data" datasource="#THIS.dsn#">
      SELECT *
      FROM 2ndDropDownData
      Order by DataName
      </cfquery> 
      <!--- Convert results to array --->
      <cfloop index="i" from="1" to="#data.RecordCount#">
             <cfset result[i][1]=data.DropDownID[i]>
             <cfset result[i][2]='#DropDownTEXT#'>      
             <!--- determine which is selected via what you passed and something in the database --->
            <cfif data.DropDownID[i] eq #Selected#>
                <cfset result[i][3]=true>
            </cfif>
      </cfloop>

      <!--- And return it --->
      <cfreturn result>
   </cffunction>
</cffunction> 
```

CFM 简单！

一个名为 DropDown1 的下拉菜单，然后通过以下代码将其传递给 cfc 以获取下拉菜单 2

```
<cfselect name="DropDown2" bind="cfc:cfcname.Method({DropDown1})" /> 
```

就这么简单……两个下拉菜单，第二个叫CFC……值得学习。

如果需要，您可以在 2 日使用 Bindonload 进行预选。

无论如何，希望不要让你害怕氟氯化碳。它们非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:00:24.393

在您的页面顶部，您可以编写一个`cfquery`会访问您的数据库并检索数据的内容。然后在页面内，您可以使用`cfselect`带有查询属性的标签，这应该使用从您的`cfquery`.

这将允许您快速生成页面，但它不是很可重用，通常被认为是不好的做法。我倾向于远离任何`cfselect`,`cfform`等标签。我还将 my 添加`cfquery`到一个中央 .cfc 文件中，以便可以在整个站点中访问它们。这将在查询更改时节省您的时间，并且您正在整个站点中寻找您进行特定呼叫的位置。

无论如何，希望这会有所帮助，如果您有任何问题，请立即开火！

- -编辑 - -

回应您更新的问题。您的页面上可以有两个`cfquery`标签。一个会在页面的第一次加载时触发并填充省份列表。选择后，这将提交一个表单并设置一个 URL 变量。然后，您可以将该变量传递给您的第二个变量`cfquery`，然后填充城市列表。我上面的用户提供的代码示例将在这方面起作用。

再次希望这会有所帮助，如果您想要特定的代码，我可以提供它，但该逻辑应该让您走上正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:15:08.900

我相信有些人会惊恐地尖叫，但如果你想要动态选择，这是我作为新手曾经做过的事情。

查询表，获取值

```
<cfquery datasource="xy" name="get">
 Select *
 From Data
</cfquery> 
```

只需将输出粘贴在选择中，如果您想自大，请使用 CFIF 来确定您正在查看的位。你不需要用CFSELECT，select就可以了。

```
<cfselect name="select">
  <cfoutput query="get">
    <option value="#URLTAKENFROMDATABASE#"
    <cfif #CGI.SCRIPT_NAME# eq '#URLTAKENFROMDATABASE#'>selected</cfif>
     >#LINKNAME#</option
  </cfoutput>
</cfselect> 
```

您可以将您的查询或输出分组以粘贴在下拉列表中的子标题中，例如

```
<cfoutput query"get" group="SECTIONA">
  <option value="">#SECTIONA#</option>
      <cfoutput>
        <option value="#URLTAKENFROMDATABASE#"
        <cfif #CGI.SCRIPT_NAME# eq '#URLTAKENFROMDATABASE#'>selected</cfif>
         >#LINKNAME#</option
      </cfoutput>   
</cfouput> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:43:52.027

我通常只是用 jQuery 编写自己的 AJAX 调用，所以我对 ColdFusion 的数据绑定不太熟悉。CFC / NOT CFC 概念实际上是相同的。您正在从服务器请求数据，如果您使用 .cfm 文件或 .cfc 来返回数据，您的代码将非常相似。

从[CFSelect Docs](http://livedocs.adobe.com/coldfusion/8/htmldocs/ajaxdata_03.html#1128486)，返回必须是：

> *   一个二维数组，其中每个数组行中的第一个元素是选项值，行中的第二个元素是要在选项列表中显示的文本。
> *   如果绑定指定 CFC 函数、查询，或者，如果绑定指定 URL，则为查询的 JSON 表示。查询必须包括名称为 cfselect 标记值和显示属性值的列。尽管您可以返回其他列，但您不能在客户端代码中使用它们。调用 CFC 函数时，不必自己将查询转换为 JSON 格式；ColdFusion 会自动进行转换。要使用这种格式，您必须指定一个值属性。如果省略 display 属性，则查询中必须只有一个包含值的列；这些值也用作显示的文本。

从[绑定数据到表单字段](http://livedocs.adobe.com/coldfusion/8/htmldocs/ajaxdata_03.html#1128486)：

> *使用绑定表达式*要指定绑定表达式，请使用以下格式之一：
> 
> *   cfc:componentPath.functionName(parameters)*注意：*组件路径不能使用映射。componentPath 值必须是来自 Web 根目录或包含当前页面的目录的点分隔路径。
> *   javascript:functionName(参数)
> *   网址：网址？参数
> *   URL?参数
> *   包含一个或多个 {bind parameter} 实例的字符串，例如 {firstname}.{lastname}@{domain}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T23:18:27.820

首先，您可以将第一个下拉列表绑定到 cfc 或从页面上的查询中填充，但不能同时使用两者。任何一种方法都可以，选择一个。

接下来，您`Method`的 cfc 中的函数有一个参数，但没有正确使用它。您`cfquery`应该在`where`子句中使用它。另外，不要尝试预先选择任何城市。在级联选择的上下文中没有意义。

# javascript - 在网站中设计图像幻灯片

> ID：13414178
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:57:12.463
> 
> 标签：javascript, jquery, css, html

我想在我的网站中设计图像幻灯片，其功能类似于[http://wearehunted.com/a/#/emerging/](http://wearehunted.com/a/#/emerging/)中的功能 。但是，我不会有像参考网站中那样的小图像。相反，我将只有一个完整的图像占据整个屏幕。

任何人都可以帮助我如何实现这一点。这可以仅使用 CSS + html 完成，还是我需要使用 jquery 或 javascript 以及 html 和 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:15:22.087

仅使用 css 和 html，您将无法进行幻灯片放映之类的操作。

如果您想保持它*非常*简单和轻便（没有库等），您可以简单地使用 javascript 检查您的光标是否靠近左边框或右边框。如果它比某个值更接近，则调用一个将图片滑动到所要求方向的函数（例如通过增加/减少来改变它的绝对位置`left:variable%;`）

这是一个非常粗糙的小提琴，您可以依赖[http://jsfiddle.net/6VdL7/](http://jsfiddle.net/6VdL7/) 在我的示例中，我只检查左侧，而不检查图片是否到右侧结束。此外，我只实现了`mousemove`.

希望这可以帮助你到达你想要的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:01:21.953

对于全屏幻灯片，我使用这个：http: [//vegas.jaysalvat.com/](http://vegas.jaysalvat.com/)

它使用起来非常简单，有很多选项，并且还具有叠加层，可以使拉伸的图像看起来很漂亮。

# database - yii 框架中是否有任何用户界面可用于表格数据输入？

> ID：13414185
> 
> 赞同：0
> 
> 时间：2012-11-16T09:57:41.163
> 
> 标签：database, datagrid, yii-extensions, yii

嗨朋友们，我想知道是否有一些可用的小部件，我可以使用它同时插入多行数据项并在插入它们时更新数据库。

喜欢这个表格

[http://i49.tinypic.com/9s5hg5.jpg](http://i49.tinypic.com/9s5hg5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:39:37.360

从来没听说过。您通常必须自己滚动

# javascript - 选择不同图层上的各种帧并在保留图层的同时转换为 MovieClip？

> ID：13414186
> 
> 赞同：0
> 
> 时间：2012-11-16T09:57:41.980
> 
> 标签：javascript, actionscript-3, flash, flash-cs5, jsfl

如何在时间轴上跨不同图层选择一系列帧，将它们转换为符号（MovieClip），一旦转换，图层和帧的排列保持不变。与 After Effects 的“预合成”图层非常相似。

默认行为是在转换后将所有单独的帧放在同一层上，这非常烦人。

这可以通过自定义闪存命令实现吗？(jsfl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:15:52.757

[试试 ToonMonkey 的“New Anim Clip”扩展： http](http://toonmonkey.com/extensions.html) ://toonmonkey.com/extensions.html

我想它会做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:10:32.773

不知道“自定义 Flash 命令”，但您可以使用 Flash Player 虚拟机 API（阅读：ActionScript）来达到预期的效果。您需要做的是使用`gotoAndStop`. 然后你需要问自己——你的各个帧是展示动画还是静态的？如果它们也都被动画化，那么您需要忽略动画并在“随机”时间拍摄快照，或者您也需要遍历该动画 - 也需要调用`gotoAndStop`子电影剪辑。让我们假设您的帧不会自行设置动画，因为它使整个方法更容易。您只需使用[BitmapData.draw](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)在每个帧内容上，复制其视觉像素数据，从而缓存一帧动画。您将位图数据对象存储为索引数组，并创建一个计时器，该计时器调用连续显示每个此类位图。本质上，您随后会缓存您的时间线并使用您自己的“引擎”重现动画。

或者，您可以尝试使用[DisplayObject.cacheAsBitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap)属性，将其设置`true`为帧中显示的任何内容。**请注意，如果您的各个帧显示动画，这可能不是一件明智的事情，但请尽量尝试一下 - Flash Player 可能足够聪明，可以忽略您的设置，将动画快照缓存为位图快速动画可能会浪费更多的内存而不是带来任何好处**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:26:28.777

1 - 选择时间轴内的所有图层并选择右键单击复制（德语是 Bilder kopieren），而不是图层 2 - 创建新的 MovieClip (strg-F8) 3 - 单击第一帧并右键单击粘贴现在您可以删除原始图层并在其位置使用新的影片剪辑

# javascript - SVG 到 IE 客户端的图像

> ID：13414198
> 
> 赞同：0
> 
> 时间：2012-11-16T09:59:03.537
> 
> 标签：javascript, jquery, internet-explorer, svg

我有一组将在我的网站上使用的 svg 文件。在现代浏览器中显示 SVG 没有任何问题，但如果我们谈论的是 IE，我们就有问题。有什么方法可以让 IE 显示 SVG 图片？也许一些 jquery/js 插件可以做到这一点？

```
<img src="images/icon.svg" width="32" height="32" alt="" /> 
```

我花了很多时间，仍然没有找到任何解决方法:(

# javascript - 在 doLayout 之后开始编辑 EditorGridPanel

> ID：13414202
> 
> 赞同：0
> 
> 时间：2012-11-16T09:59:14.873
> 
> 标签：javascript, extjs, extjs4

我有一个带有 EditorGridPanel 的容器。当一个特性被添加到面板时，我执行 doLayout 来更新容器。在这一点上，我不会将标记放在面板中新行的第一个可编辑列中，例如

```
grid.startEditing(0,0); 
```

如果我把它直接放在 doLayout 之后它会失败，因为该行不存在，有没有我可以添加的侦听器，所以我可以确定该行在那里？我在 EditorGridPanel 中找不到任何合适的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:13:27.073

尝试在商店中使用 load 事件。

# matlab - MATLAB 数组中的小数位

> ID：13414205
> 
> 赞同：1
> 
> 时间：2012-11-16T09:59:35.143
> 
> 标签：matlab, find

考虑以下示例：

```
Bathymetry = [0,4134066;
    3,3817906;
    6,3343666;
    9,2978725;
    12,2742092;
    14,2584337;
    16,2415355;
    18,2228054;
    20,2040753;
    23,1761373;
    26,1514085];

Depth = [0;1;2;3;5;8;10;11.6;15];

newDepth = min(Bathymetry(:,1)):0.1:max(Bathymetry(:,1)); 
```

从这里我想找到'newDepth'的哪一列对应于'Depth'。例如：

```
dd = find(newDepth==Depth(1))
dd =

     1 
```

显示 Depth == 0，位于 newDepth 的第一列。当我将此应用于“深度”的所有条目时

```
for i = 1:length(Depth);
    dd(i) = find(newDepth == Depth(i));
end 
```

我收到一个错误：

```
Improper assignment with rectangular empty matrix. 
```

最初我不明白为什么，但是通过查看 newDepth 的数组，特别是在 newDepth == 11.6 的第 117 列，我注意到该值不等于 11.6 但等于 11.600000000000001，因此与 Depth(8) 不同。我怎样才能解决这个问题？为什么 MATLAB 不只是将值写为 11.6？我没有指定在任何地方包含 .000000000000001。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:11:53.723

这个问题与非常复杂的浮点运算有关，我建议你谷歌它并阅读一下，那里有很多解释它。这是一个好的开始：http: [//blogs.mathworks.com/loren/2006/08/23/a-glimpse-into-floating-point-accuracy/](http://blogs.mathworks.com/loren/2006/08/23/a-glimpse-into-floating-point-accuracy/)

为了解决你的情况，我建议四舍五入

```
newDepth = round(newDepth * 10) / 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:19:14.730

11.6000000000000001 是因为数字 11.6 不能用二进制浮点表示法精确表示。这与硬件的工作方式有关，而不是 Matlab 的任何限制。

您想将比较更改为类似

```
dd(i) = find(abs(newDepth - Depth(i))<.0000001); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:20:04.280

这是因为二进制中没有 0.1 的精确表示。阅读[wiki](http://en.wikipedia.org/wiki/Binary_numeral_system#Fractions_in_binary)了解更多背景信息。在二进制中，表示`0.1`就像试图写出三分之一的所有小数：

```
1/3 == 0.333333333333333333... 
```

无论`3`您添加多少，它永远不会是准确的。

由于这个（以及许多其他）原因，我建议您不要使用`==`（这是一个非常严格的要求），而是使用

```
for ii = 1:length(Depth);
    [~,dd(ii)] = min( abs(newDepth-Depth(ii)) );
end 
```

# colors - 如何覆盖 XNA 中的颜色插值？

> ID：13414207
> 
> 赞同：0
> 
> 时间：2012-11-16T09:59:39.423
> 
> 标签：colors, xna, interpolation

当您为 3 个顶点绘制 3 种不同颜色的三角形时，XNA 会自动在这些顶点之间插入像素颜色。我想禁用此行为并提供我自己的算法来确定中间像素的颜色（例如，使用 3 种颜色的平均值）。这应该如何在 XNA 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:38:54.313

插值是着色器的基本行为，你无法避免。如果将顶点数据发送到像素着色器，则会对构成三角形的三个顶点的数据进行插值。

因此，如果您想使用三种颜色的平均值，一个选项可能会在 cpu 中预先计算它们......并通过不同的顶点缓冲区将其发送到 gpu，这样您就可以在需要时更改它而无需更改顶点缓冲区包含顶点位置....

当然，如果一个顶点与两个三角形共享，并且它具有不同的颜色，则必须复制它。

# magento - magento系统配置显示空白页，

> ID：13414215
> 
> 赞同：1
> 
> 时间：2012-11-16T10:00:28.363
> 
> 标签：magento, configuration, system

当我将**合并 JavaScript 文件**和**合并 CSS 文件**设置为“是”并进入**高级**时关闭以下两个模块输出

**Mage_AdminNotification**

**Mage_Poll**

问题出现了，magento/system/configuration右边显示空白页，点击左边模块没有反映，显示还是空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:12:20.043

这个问题是由 js/css 的合并引起的，还是因为您禁用了这些模块或两者都禁用（您可以尝试通过一次禁用一个来缩小范围）？

您的 js 控制台中是否有任何 js 错误（js 是否在常规站点上工作）？

通常，如果在您的站点上添加自定义 js，并且在您的站点上启用合并时不添加分号 (;) 到行尾，您将遇到 js 错误。

您是否安装了任何自定义模块（如果同时启用，系统配置是否工作）？

# android - 即使应用程序被杀死也继续上传（Android）

> ID：13414220
> 
> 赞同：0
> 
> 时间：2012-11-16T10:00:51.093
> 
> 标签：android, memory, kill

即使应用程序在后台运行，我也希望完成上传操作。即使应用程序在打开其他应用程序时被杀死，该过程也应该完成。有人可以建议我一些解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:05:11.077

使用服务，并为其附加[持续](http://developer.android.com/guide/topics/ui/notifiers/notifications.html) [通知](https://stackoverflow.com/questions/5693997/android-how-to-create-an-ongoing-notification)。这将阻止 Android 大体上杀死您的应用程序，但在最极端的情况下您仍然有可能被杀死。但是，这是您能做的最好的事情，除非您的应用在整个上传过程中处于前台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:05:17.177

您的应用程序不会因打开其他应用程序而被杀死。检查 Android 生命周期。上传文件的最佳方式是在线程上进行。无论您关闭应用程序还是未启动线程都将继续工作。

# qt - QML：调整 ListView 页脚组件的大小以填充剩余空间

> ID：13414223
> 
> 赞同：3
> 
> 时间：2012-11-16T10:00:55.850
> 
> 标签：qt, listview, qml

对于包含项目的 ListView，以便在最后一个项目下方有一些空间，我想添加一个填充剩余空间的页脚。

可以在这里找到一个很好的用例描述：[如何使 ListView 的页脚伸展以填充剩余空间？](https://stackoverflow.com/questions/6918734/how-can-i-make-the-footer-of-a-listview-stretch-to-fill-the-remaining-space)

由于提出的解决方案适用于 android，因此我很难将其适应 QML。低技术的方式 - 总结代表高度和间距以计算页脚高度 - 可能会起作用，但感觉不好......

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:33:02.953

您可以使用

```
contentWidth : real 
```

列表视图的属性并从 ListView 高度中减去该值，并将结果值用作页脚的高度。例如：

```
ListView
{
  id: list
  height: 100
}
Rectangle
{
  anchors.bottom: list.bottom
  height: list.height - list.contentHeight
} 
```

# java - Swing：面板尺寸问题

> ID：13414226
> 
> 赞同：1
> 
> 时间：2012-11-16T10:00:59.563
> 
> 标签：java, swing, layout, panel, layout-manager

我正在设计一个应用程序，其中应该有 5 个不同`JPanel`的 s 包含不同的**Swing 组件**。对于这一`JRadioButton`部分，我遇到了一个无法找到合适解决方案的问题。'radioSizePanel' 应该放置在主面板中上部的某处。以前有没有人解决过这个问题？这是我正在使用的代码：

```
import java.awt.*;
import javax.swing.*;

public class PizzaShop extends JFrame 
{
    private static final long serialVersionUID = 1L;
    private JRadioButton[] radio_size = new JRadioButton[3];
    private JRadioButton[] radio_type = new JRadioButton[3];
    public PizzaShop() 
    {
        initializaUI();
    }

    private void initializaUI()
    {
        setSize(700, 600);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //Panel container to wrap checkboxes and radio buttons
        JPanel panel = new JPanel();

        //sizes radio buttons
        String Size[] = {"Small: $6.50", "Medium: $8.50", "Large: $10.00"};
        JPanel radioSizePanel = new JPanel(new GridLayout(3, 1));
        ButtonGroup radioSizeGroup = new ButtonGroup();
        for (int i=0; i<3; i++)
        {
            radio_size[i] = new JRadioButton(Size[i]);
            radioSizePanel.add(radio_size[i]);
            radioSizeGroup.add(radio_size[i]);
        }
        radioSizePanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), "Size"));
        radioSizePanel.setPreferredSize(new Dimension(100, 200));

        //
        panel.add(radioSizePanel);
        setContentPane(panel);
        setContentPane(radioSizePanel);
    }

    public static void main(String[] args) 
    {
        // TODO Auto-generated method stub
        SwingUtilities.invokeLater(new Runnable() 
        {
            public void run() 
            {
                new PizzaShop().setVisible(true);
            }
        });
    }
} 
```

这是我想要的预期输出：

![预期输出](../Images/6223c867bdc045d118232ffe420120ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:22:52.483

请务必观看代码示例，请务必仔细观看所有内容，添加内容的顺序`JFrame`。由于在您的示例中，您在将`setSize()`某些内容添加到之前调用了很多`JFrame`，因此首先将组件添加到容器中，然后调用它的`pack()/setSize()`方法，以便它可以很好地实现这一点。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PizzaLayout
{
    /*
     * Five JPanels we will be using.
     */
    private JPanel headerPanel;
    private JPanel footerPanel;
    // This JPanel will contain the middle components.
    private JPanel centerPanel;
    private JPanel toppingPanel;
    private JPanel sizePanel;
    private JPanel typePanel;
    private JPanel buttonPanel;

    private String[] toppings = {
                                    "Tomato",
                                    "Green Pepper",
                                    "Black Olives",
                                    "Mushrooms",
                                    "Extra Cheese",
                                    "Pepproni",
                                    "Sausage"
                                };

    private JCheckBox[] toppingsCBox;

    private String[] sizePizza = {
                                    "Small $6.50", 
                                    "Medium $8.50",
                                    "Large $10.00"
                                 };

    private JRadioButton[] sizePizzaRButton;

    private String[] typePizza = {
                                    "Thin Crust", 
                                    "Medium Crust",
                                    "Pan"
                                 };

    private JRadioButton[] typePizzaRButton;

    private JButton processButton;

    private ButtonGroup bGroupType, bGroupSize;

    private JTextArea orderTArea;

    private StringBuilder sBuilderOrder;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Pizza Shop");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        /*
         * This JPanel is the base of all the
         * other components, and at the end 
         * we will set this as Content Pane
         * for the JFrame.
         */
        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));
        contentPane.setBorder(
            BorderFactory.createEmptyBorder(10, 10, 10, 10));
        /*
         * TOP PART of the LAYOUT.
         */
        headerPanel = new JPanel();
        JLabel headerLabel = new JLabel(
                "Welcome to Home Style Pizza Shop"
                                    , JLabel.CENTER);
        headerLabel.setForeground(Color.RED);
        headerPanel.add(headerLabel);

        /*
         * CENTER PART of the LAYOUT.
         */
        centerPanel = new JPanel();
        centerPanel.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridheight = 2;
        gbc.weightx = 0.3;
        gbc.weighty = 1.0;

        /*
         * Above Constraints are for this part.
         */
        toppingPanel = new JPanel();
        toppingPanel.setBorder(
            BorderFactory.createTitledBorder(
                BorderFactory.createLineBorder(Color.RED),
                                            "Each Topping $1.50"));
        JPanel checkBoxesPanel = new JPanel();
        checkBoxesPanel.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        checkBoxesPanel.setLayout(new GridLayout(0, 1, 5, 5));

        toppingsCBox = new JCheckBox[toppings.length];
        for (int i = 0; i < toppings.length; i++)
        {
            toppingsCBox[i] = new JCheckBox(toppings[i]);
            checkBoxesPanel.add(toppingsCBox[i]);
        }

        toppingPanel.add(checkBoxesPanel);
        centerPanel.add(toppingPanel, gbc);

        // Till this.

        gbc.gridx = 1;
        gbc.gridheight = 1;
        gbc.weighty = 0.7;

        /*
         * Above Constraints are for this part.
         */
        sizePanel = new JPanel();
        sizePanel.setBorder(
            BorderFactory.createTitledBorder(
                BorderFactory.createLineBorder(Color.RED),
                                            "Pizza Size"));
        JPanel radioBoxesPanel = new JPanel();
        radioBoxesPanel.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        radioBoxesPanel.setLayout(new GridLayout(0, 1, 10, 10));

        sizePizzaRButton = new JRadioButton[sizePizza.length];
        bGroupSize = new ButtonGroup();
        for (int i = 0; i < sizePizza.length; i++)
        {
            sizePizzaRButton[i] = new JRadioButton(sizePizza[i]);
            bGroupSize.add(sizePizzaRButton[i]);
            radioBoxesPanel.add(sizePizzaRButton[i]);
        }

        sizePanel.add(radioBoxesPanel);
        centerPanel.add(sizePanel, gbc);
        // Till this.

        gbc.gridx = 2;
        gbc.weighty = 0.7;

        /*
         * Above Constraints are for this part.
         */
        typePanel = new JPanel();
        typePanel.setBorder(
            BorderFactory.createTitledBorder(
                BorderFactory.createLineBorder(Color.RED),
                                            "Pizza Type"));
        JPanel radioBoxesTypePanel = new JPanel();
        radioBoxesTypePanel.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        radioBoxesTypePanel.setLayout(new GridLayout(0, 1, 10, 10));

        typePizzaRButton = new JRadioButton[typePizza.length];
        bGroupType = new ButtonGroup();
        for (int i = 0; i < typePizza.length; i++)
        {
            typePizzaRButton[i] = new JRadioButton(typePizza[i]);
            bGroupType.add(typePizzaRButton[i]);
            radioBoxesTypePanel.add(typePizzaRButton[i]);
        }

        typePanel.add(radioBoxesTypePanel);
        centerPanel.add(typePanel, gbc);
        // Till this.

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.weighty = 0.3;
        gbc.gridwidth = 2;

        processButton = new JButton("Process Selection");
        processButton.addActionListener(
            new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                sBuilderOrder = new StringBuilder();
                sBuilderOrder.append("Pizza type : ");
                for (int i = 0; i < typePizza.length; i++)
                {
                    if (typePizzaRButton[i].isSelected())
                        sBuilderOrder.append(typePizzaRButton[i].getText());
                }

                sBuilderOrder.append("\n");
                sBuilderOrder.append("Pizza Size : ");

                for (int i = 0; i < sizePizza.length; i++)
                {
                    if (sizePizzaRButton[i].isSelected())
                        sBuilderOrder.append(sizePizzaRButton[i].getText());
                }

                sBuilderOrder.append("\n");
                sBuilderOrder.append("Toppings : ");
                /*
                 * I hope you can do this part yourself now :-)
                 */

                orderTArea.setText(sBuilderOrder.toString());
            }
        });
        centerPanel.add(processButton, gbc);

        footerPanel = new JPanel();
        footerPanel.setLayout(new BorderLayout(5, 5));
        footerPanel.setBorder(
            BorderFactory.createTitledBorder("Your Order : "));
        orderTArea = new JTextArea(10, 10);
        footerPanel.add(orderTArea, BorderLayout.CENTER);

        contentPane.add(headerPanel, BorderLayout.PAGE_START);
        contentPane.add(centerPanel, BorderLayout.CENTER);
        contentPane.add(footerPanel, BorderLayout.PAGE_END);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new PizzaLayout().displayGUI();
            }
        });
    }
} 
```

这是相同的输出：

![披萨布局](../Images/4b6775d001b6968a48defa5a85846c83.png)

# javascript - 在同一键上过滤具有多个值的数组

> ID：13414227
> 
> 赞同：4
> 
> 时间：2012-11-16T10:01:09.453
> 
> 标签：javascript, jquery

我尝试在 jQuery 中动态生成一个列表视图。这适用于整个列表，但现在我需要过滤/搜索/减少我的初始数据：

```
var rezepte = [
{ "name" : "Eierkopf" , "zutaten" : ["Eier", "Zucker"] , "zubereitung" : "alles schön mischen." },
{ "name" : "Käseschnitte" , "zutaten" : ["Käse", "Brot", "Paprika"] , "zubereitung" : "Käse drauf und in den Ofen" },
{ "nme" : "Gemüse-Auflauf" , "zutaten" : ["Lauch"] , "zubereitung" : "1\. schneiden 2\. Kochen 3\. essen" }
]; 
```

我想通过搜索数组过滤/搜索“食谱”，例如`var searcharray = ["Zucker", "Paprika"]`：

```
var result = [
{ "name" : "Eierkopf" , "zutaten" : ["Eier", "Zucker"] , "zubereitung" : "alles schön mischen." },
{ "name" : "Käseschnitte" , "Zutaten" : ["Käse", "Brot", "Paprika"] , "zubereitung" : "Käse drauf und in den Ofen" }]; 
```

我在 for 循环中尝试了很多东西：过滤、映射、推送——但所有这些都没有成功，总是会导致未定义的对象。

我也不确定我的食谱数组应该是什么语法：必须有可变数量的“成分”的可能性。

任何帮助和提示将不胜感激。

非常感谢，安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:09:17.240

使用本机 Array 函数，这应该可以工作：

```
result = recipes.filter(function(recipe) {
    return search.any(function(ingredient) {
        return recipe.ingredients.indexOf(ingredient) != -1;
    });
}); 
```

使用 jQuery，它将是

```
result = $.grep(recipes, function(recipe) {
    for (var i=0; i<search.length; i++)
        if ($.inArray(recipe.ingredients, search[i]) != -1)
            return true;
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:35:44.127

```
var rezepte = [
{ "name" : "Eierkopf" , "zutaten" : ["Eier", "Zucker"] , "zubereitung" : "alles schön mischen." },
{ "name" : "Käseschnitte" , "zutaten" : ["Käse", "Brot", "Paprika"] , "zubereitung" : "Käse drauf und in den Ofen" },
{ "nme" : "Gemüse-Auflauf" , "zutaten" : ["Lauch"] , "zubereitung" : "1\. schneiden 2\. Kochen 3\. essen" }
];

function search() {
    var search = $("#searchfield").val(); // returns string
    var searcharray = search.split(',');
    if (searcharray == "") {
        check = $.isArray(searcharray);
        alert(check); // true
        return rezepte;
    } else { 
        var result = [];
        alert("till here fine");
        result = $.grep(rezepte, function(rezept) {
            for (var i=0; i<searcharray.length; i++) {
                if ($.inArray(searcharray[i], rezept.zutaten) != -1)
                    return true;
            } 
             return false;
        });
    }
    console.log(result);
    return result;  
}
$(function(){
     $("#search").click(search);
}) 
```

我让它与这段代码一起工作。参见演示： http: [//jsfiddle.net/VcZtE/1/](http://jsfiddle.net/VcZtE/1/)（结果可以在浏览器控制台中看到）。与您的代码的唯一区别在于： `if ($.inArray(searcharray[i], rezept.zutaten) != -1)`. 根据[文档](http://api.jquery.com/jQuery.inArray/)，`inArray`needle 应该是要搜索的第一个参数和数组 - 第二个。你有相反的方式：数组作为第一个参数传递，针（要搜索的值）作为第二个参数传递。

# mysql - SQL Server 到 MySQL 的转换

> ID：13414228
> 
> 赞同：1
> 
> 时间：2012-11-16T10:01:18.380
> 
> 标签：mysql, sql, stored-procedures, pagination, sp-executesql

我需要帮助将这部分存储过程从 MSSQL 转换为 MYSQL，任何建议都值得赞赏。

Ps对不起我的英语

```
 set @PARAMS = '@DATA_INIZIO VARCHAR(20), 
           @DATA_FINE VARCHAR(20), 
           @SEDE VARCHAR(10)'

 set @CMD = 'WITH DriversRN AS
    (
        SELECT ROW_NUMBER() OVER(ORDER BY '+ @ORDER_BY_RN +') as ROW_NUM, * FROM digitalpodcontrol 
        WHERE Date BETWEEN @DATA_INIZIO AND @DATA_FINE AND Depot = @SEDE
    )
    SELECT * FROM DriversRN
    WHERE ROW_NUM BETWEEN ' + CONVERT(VARCHAR(50),@MIN__VALUE) + ' AND ' + CONVERT(VARCHAR(50),@MAX__VALUE) + ' 
    ORDER BY ' + @ORDER_BY + ' ' + @DIRECTION

    EXECUTE sp_executesql @CMD, @PARAMS, @DATA_INIZIO, @DATA_FINE, @SEDE 
```

# mysql - 根据匹配的 ID 获取另一个表的记录

> ID：13414230
> 
> 赞同：1
> 
> 时间：2012-11-16T10:01:24.880
> 
> 标签：mysql

我有 2 张桌子

**表 1：dit_news**

```
1\. id
2\. title
3\. body
4\. date
5\. posterID 
```

**表 2：dit_users**

```
1\. id
2\. fullName
3+ a bunch of irrelevant to this problem columns 
```

`dit_news.posterID`等于`dit_users.id`

我需要一种方法来获取`fullName`dit_users 的 ID 等于`posterID`in的记录`dit_news`。我希望这是有道理的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:04:32.480

```
SELECT dit_users.fullName FROM ditusers INNER JOIN dit_news ON dit_users.id = dit_news.posterID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:04:23.830

```
select distinct u.fullName
from dit_users u
inner join dit_news n on n.posterID = u.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:04:53.020

```
SELECT
    dit_users.fullName
FROM
    dit_news
    JOIN dit_users ON
        dit_news.posterID = dit_users.id
; 
```

您可能只想添加`WHERE dit_news.id = N`以检索文章 N 的用户名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:07:59.303

```
SELECT u.fullname
FROM dit_users u
   JOIN dit_news n ON (n.posterid = u.id)
WHERE n.id = 12345 
```

# svn - 在詹金斯中使用乌龟颠覆时使用浏览器驱动程序

> ID：13414231
> 
> 赞同：0
> 
> 时间：2012-11-16T10:01:26.117
> 
> 标签：svn, maven, selenium, jenkins, selenium-chromedriver

我用的是windows xp, maven3.0.4, jenkins, tortoise subversion

我正在使用乌龟颠覆，我在其中发布我的代码并使用它在来自主机的从属机器上运行测试（所有机器都是 windows xp）。我想在不同的从站和不同的浏览器中一次运行测试。为了在不同的从服务器上运行，我将浏览器驱动程序粘贴到所有机器的相同路径中，然后执行测试。这是我的问题：有没有更好的选择？

# eclipse - jrockit下的eclipse卸载插件失败

> ID：13414232
> 
> 赞同：3
> 
> 时间：2012-11-16T10:01:29.113
> 
> 标签：eclipse, eclipse-plugin

我在使用 jrockit vm 而不是热点 vm 卸载 eclipse 插件时遇到问题。

它失败并出现以下异常：

```
An error occurred while installing the items
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Install, operand=null --> [R]org.sonatype.tycho.m2e 0.6.0.201207302152, action=org.eclipse.equinox.internal.p2.touchpoint.eclipse.actions.InstallBundleAction).
java.net.URISyntaxException: Illegal character in scheme name at index 0: %23c:/Program%20Files/Java/jdk1.6.0_26/bin/javaw.exe
java.net.URISyntaxException: Illegal character in scheme name at index 0: %23c:/Program%20Files/Java/jdk1.6.0_26/bin/javaw.exe 
```

当我将 vm 改回热点时，这个问题就消失了。

```
-vm
c:/Program Files/Java/jdk1.6.0_26/bin/javaw.exe
#c:/Program Files/Java/jrockit-jdk1.6.0_33-R28.2.4-4.1.0/bin/javaw.exe 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-17T15:07:21.743

我相信这是因为您不能在该位置上使用评论 - 只需删除原始行（正如它所说：开头`c:/Program Files/Java/jdk1.6.0_26/bin/javaw.exe`有一个无效字符）。`#`顺便说一句，这似乎是 m2e 插件中的一个问题（或者它是一个错误的配置，这个插件第一次遇到这个问题）。

# c# - 解析正则表达式模式

> ID：13414238
> 
> 赞同：3
> 
> 时间：2012-11-16T10:01:53.640
> 
> 标签：c#, regex, vb.net

有没有办法解析一个复杂的正则表达式模式（包含几个`named groups`以及几个`numbered groups`and `non-capturing groups`）并报告每个`groupname`或`groupnumber`连同模式文本。

假设，我确实有这样的 RegEx 模式：

```
 (?im)(?<x>\b[a-s03]+\b)(?-i)(?<a>\p{L}+?,(?<b>.+?:(?<c>.+?;(?<d>.+?(?:\d|sample-text|(\k'x'|sos30)))))) 
```

我喜欢提取：=

```
 Named groups:
  x==>(?<x>\b[a-s03]+\b)
  a==>(?<a>\p{L}+?,(?<b>.+?:(?<c>.+?;(?<d>.+?(?:\d|sample-text|(\k'x'|sos30))))))
  b==>(?<b>.+?:(?<c>.+?;(?<d>.+?(?:\d|sample-text|(\k'x'|sos30)))))
  c==>(?<c>.+?;(?<d>.+?(?:\d|sample-text|(\k'x'|sos30))))
  d==>(?<d>.+?(?:\d|sample-text|(\k'x'|sos30)))

  Numbered groups:
  1==>(\k'x'|sos30)

  Non-capturing-groups:
  1st==>(?:\d|sample-text|(\k'x'|sos30)) 
```

**本要求的目的：**

我确实有一个包含复杂 RegEx 模式的大型数据库。以前的程序在准备这些复杂模式时没有使用任何注释[ `(?#...)`]，而且这些模式中不`linebreaks`存在任何注释。在某些情况下，我必须修改这些模式，并且还必须在这些模式中使用注释。现在它就像在干草堆中寻找针一样。我根本无法为此目的使用 RegEx。因此，我倾向于在这种情况下使用解析器。

**我尝试了什么：**

为此，我尝试`GetGroupNames`并收集。`GetGroupNumbers`我只能提取`Names/Numbers`的`groups`，但不能提取相应的文本模式。

**我正在寻找非正则表达式解决方案/一些提示。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T00:08:34.620

这个怎么样，为此：

```
(?im)(?<x>\b[a-s03]+\b)(?-i)(?<a>\p{L}+?,(?<b>.+?:(?'c'.+?;(.+?(?:\d|sample-text|(\k'x'|sos30)))))) 
```

这作为输出：

```
(0)<0>:     (?im)(?<x>\b[a-s03]+\b)(?-i)(?<a>\p{L}+?,(?<b>.+?:(?'c'.+?;(.+?(?:\d|sample-text|(\k'x'|sos30))))))
(1)<x>:     \b[a-s03]+\b
(2)<a>:     \p{L}+?,(?<b>.+?:(?'c'.+?;(.+?(?:\d|sample-text|(\k'x'|sos30))))
(3)<b>:     .+?:(?'c'.+?;(.+?(?:\d|sample-text|(\k'x'|sos30)))
(4)<c>:     .+?;(.+?(?:\d|sample-text|(\k'x'|sos30))
(5)<5>:     .+?(?:\d|sample-text|(\k'x'|sos30)
(6)<6>:     \k'x'|sos30 
```

这是代码：

```
Imports System.Collections.Specialized
Module Module1
Public DictGroups As New OrderedDictionary
Public DictTrackers As New Dictionary(Of Integer, Boolean)
Public intGroups As Integer = 0
Public CommandGroup As Boolean = False
Sub Main()
    Dim regexToEval As String = "(?im)(?<x>\b[a-s03]+\b)(?-i)(?<a>\p{L}+?,(?<b>.+?:(?'c'.+?;(.+?(?:\d|sample-text|(\k'x'|sos30))))))"
    Dim curChar As String = ""
    DictGroups.Add(0, "(0)<0>: " & vbTab)
    DictTrackers.Add(0, True)
    For i = 1 To regexToEval.Length
        Dim iChar As String = regexToEval.Substring(i - 1, 1)
        If curChar <> "\" AndAlso iChar = ")" Then EndGroup()
        AddStrToTrackers(iChar)
        If curChar = "\" OrElse iChar <> "(" OrElse regexToEval.Length < i + 2 Then curChar = iChar : Continue For
        If regexToEval.Substring(i, 1) = "?" Then
            i += 1 : AddStrToTrackers("?")
            If regexToEval.Substring(i, 1) = ":" Then i += 1 : AddStrToTrackers(":") : curChar = ":" : Continue For
            Dim NameLength As Integer = 0
            If regexToEval.Substring(i, 1) = "<" Or regexToEval.Substring(i, 1) = "'" Then
                i += 1 : AddStrToTrackers(regexToEval.Substring(i - 1, 1))
                i += 1
                For x = i To regexToEval.Length
                    If regexToEval.Substring(x - 1, 1) = ">" Or regexToEval.Substring(x - 1, 1) = "'" Then
                        NameLength = x - i
                        Exit For
                    End If
                Next
            Else
                CommandGroup = True
                Continue For
            End If
            If NameLength > 0 Then
                Dim GroupName As String = regexToEval.Substring(i - 1, NameLength)
                i += NameLength : curChar = regexToEval.Substring(i - 1, 1) : AddStrToTrackers(GroupName & curChar)
                intGroups += 1
                DictGroups.Add(intGroups, "(" & DictGroups.Count & ")<" & GroupName & ">: " & vbTab)
                DictTrackers.Add(intGroups, True)
                Continue For
            End If
        End If
        curChar = iChar
        intGroups += 1
        DictGroups.Add(intGroups, "(" & DictGroups.Count & ")<" & intGroups.ToString & ">: " & vbTab)
        DictTrackers.Add(intGroups, True)
    Next
    Dim Output As String = MakeOutput()
End Sub

Private Function MakeOutput() As String
    Dim retString As String = String.Empty
    For i = 0 To DictGroups.Count - 1
        retString &= DictGroups(i) & vbCrLf
    Next
    Return retString
End Function

Public Sub EndGroup()
    If CommandGroup Then
        CommandGroup = False
        Exit Sub
    End If
    Dim HighestNum As Integer = 0
    For Each item In DictTrackers
        If Not item.Value Then Continue For
        If item.Key > HighestNum Then HighestNum = item.Key
    Next
    If HighestNum <> 0 Then DictTrackers(HighestNum) = False
End Sub

Public Sub AddStrToTrackers(ByVal addString As String)
    For Each item In DictTrackers
        If item.Value Then DictGroups(item.Key) &= addString
    Next
End Sub
End Module 
```

唯一的区别是我没有捕获非捕获组，也没有捕获功能组。当然，这只是我在 10 分钟内编写的快速代码。但如果你愿意，这是一个开始。我使用 OrderedDictionary 作为组号的键。如果您还想在输出中包含非捕获组和功能组，则可以更改该结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:51:48.950

System.Text.RegularExpressions 命名空间中有一个 RegexParser 类（内部），您可以使用 Private Reflection 调用它。到目前为止，我在我的 FxCopContrib 项目中使用了一个[示例实现。](http://fxcopcontrib.codeplex.com/SourceControl/changeset/view/20003#58159)

Mono 项目中有[RegexParser 实现](https://github.com/mono/mono/tree/master/mcs/class/System/System.Text.RegularExpressions)，您可以利用它。

然后是[Deveel 的 Regex 库](http://sourceforge.net/projects/deveel-regex/files/)。

# android - 当服务已经启动时，bindservice 失败

> ID：13414242
> 
> 赞同：0
> 
> 时间：2012-11-16T10:02:14.780
> 
> 标签：android, android-intent, android-service

我从app 1启动了一个服务，这个app的manifest中的service声明如下：

```
 <service android:name="jp.co.xyz.bluetooth.profile.TIPServer"
     android:permission="jp.co.abc.android.OMRSSettings.permission.Access" >
<intent-filter>
    <action android:name="jp.co.xyz.bluetooth.api.ICommonResultCallback" />
    <action android:name="jp.co.xyz.bluetooth.api.ITimeServer" />
</intent-filter> 
```

我尝试从第二个应用程序绑定到此服务。第二个应用程序清单中的服务声明如下：

```
 <service android:name="jp.co.xyz.bluetooth.profile.TIPServer"
     android:permission="jp.co.abc.android.OMRSSettings.permission.Access" >
<intent-filter>
    <action android:name="jp.co.xyz.bluetooth.api.ICommonResultCallback" />
    <action android:name="jp.co.xyz.bluetooth.api.ITimeServer" />
</intent-filter> 
```

以下是我用来从应用程序 2 执行绑定服务的代码。

```
Intent time_intent = new Intent(ITimeServer.class.getName());
mContext.bindService(time_intent, time_connection, Context.BIND_AUTO_CREATE); 
```

当我尝试绑定到已从应用程序 1 启动的服务时，出现以下异常。

```
01-02 00:06:54.531: INFO/PowerManagerService(425): Start Light.setBrightness(), [20],  [3]
01-02 00:06:56.473: INFO/PowerManagerService(425): Start Light.setBrightness(), [130], [3]
01-02 00:06:58.055: WARN/dalvikvm(4956): threadid=1: thread exiting with uncaught exception (group=0x40b70390)
01-02 00:06:58.055: WARN/ActivityManager(425): Permission Denial: Accessing service ComponentInfo{jp.co.abc.android.omrsettings/jp.co.xyz.bluetooth.profile.TIPServer} from   pid=4956, uid=10158 requires jp.co.abc.android.OMRSettings.permission.Access
01-02 00:06:58.065: ERROR/AndroidRuntime(4956): FATAL EXCEPTION: main
java.lang.SecurityException: Not allowed to bind to service Intent { act=jp.co.xyz.bluetooth.api.ITimeServer }
at android.app.ContextImpl.bindService(ContextImpl.java:1187)
at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
at jp.co.abc.middleware.tip.LeTimeServerProfile.startTimeServer(LeTimeServerProfile.java:45)
at jp.co.abc.tip.TimeActivity.onClick(TimeActivity.java:49)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14133)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method)
01-02 00:06:58.095: WARN/ActivityManager(425): Force finishing activity  jp.co.abc.tip/.TimeActivity 
```

当我删除应用程序 1 时，我可以毫无问题地绑定到服务。

有人可以让我知道这个问题的原因和解决方案吗？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:07:41.923

您错过了在清单中写入 android:process=":remote" 。您的声明应该是

```
 <service android:name="jp.co.xyz.bluetooth.profile.TIPServer" android:process=":remote"> 
```

android:process=":remote" 属性告诉 Android 在与应用程序的其余部分不同的进程中运行我们的服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T05:26:34.697

使用此代码：

```
Intent intent = new Intent();
intent.setAction("com.action");
intent.setPackage("com.package.to.service"); 
```

# rdf - 离线备份RDF（Virtuoso）数据库并使用条带化还原此数据库

> ID：13414243
> 
> 赞同：1
> 
> 时间：2012-11-16T10:02:16.937
> 
> 标签：rdf, virtuoso

现在 virtuoso.db 文件中的条带化未启用。我想用条带化功能恢复这些数据。必须有一种方法可以使用条带化转换数据。所以请告诉我执行此操作的完整方法，以便我可以转换我的数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:38:02.057

大致步骤如您引用的文档片段中所建议的那样。（当您发布这样的片段时，包含指向源页面的链接会有所帮助——因此我们 [我为[OpenLink Software](http://www.openlinksw.com/)工作] 可以在必要时调整内容......）

1.  `backup_online()`使用您首选的备份方法 ( , `+backup-dump`, )转储数据库`+crash-dump`。
2.  移动/删除现有`.db`文件。
3.  编辑`INI`文件，根据需要设置条带化。
4.  使用适合您的转储 ( , )的功能`.db`从备份转储中恢复。`.trx``+restore-backup``+restore-crash-dump`

此处无法提供部署的确切步骤。

对于未来——特别是关于 Virtuoso 的问题通常最好通过[Virtuoso 用户邮件列表](http://sourceforge.net/mailarchive/forum.php?forum_name=virtuoso-users)、[公共 OpenLink 支持论坛](http://boards.openlinksw.com/support/)或通过[机密支持案例](http://support.openlinksw.com/support/online-support.vsp)提出。

# javascript - 关闭 Tooltip Bootstrap 功能

> ID：13414244
> 
> 赞同：48
> 
> 时间：2012-11-16T10:02:23.753
> 
> 标签：javascript, jquery, twitter-bootstrap, tooltip, jquery-events

根据[文档](http://twitter.github.com/bootstrap/javascript.html)可以关闭刚刚做的功能`$('body').off('.alert.data-api')`。
在[工具提示](http://twitter.github.com/bootstrap/javascript.html#tooltips)的情况下，我从 js 控制台尝试了以下操作，`$('body').off('.tooltip.data-api')`但它没有禁用按钮上的工具提示。
任何提示如何先行？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-11-16T10:20:25.913

您不能以这种方式禁用工具提示，因为它在主体上没有事件侦听器。相反，您可以使用以下代码自行禁用工具提示。

```
$('[rel=tooltip]').tooltip()          // Init tooltips
$('[rel=tooltip]').tooltip('disable') // Disable tooltips
$('[rel=tooltip]').tooltip('enable')  // (Re-)enable tooltips
$('[rel=tooltip]').tooltip('destroy') // Hide and destroy tooltips 
```

* * *

**编辑：**对于 Bootstrap 4，`'destroy'`命令已被命令替换[`'dispose'`，](https://getbootstrap.com/docs/4.0/components/tooltips/#tooltipdispose)因此：

```
$('[rel=tooltip]').tooltip('dispose') // Hide and destroy tooltips in Bootstrap 4 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T10:20:03.223

你能试一下吗：

```
$('a[rel=tooltip]').tooltip();
$('a[rel=tooltip]').off('.tooltip'); 
```

不要忘记更改选择器。对我来说很好...... [http://jsfiddle.net/D9JTZ/](http://jsfiddle.net/D9JTZ/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-22T09:04:33.673

要**永久**禁用工具提示：

`$('[data-toggle="tooltip"]').tooltip("disable");`

要停止在悬停时显示工具提示但能够重新启用它：

`$('[data-toggle="tooltip"]').tooltip("destroy");`

`$('[data-toggle="tooltip"]').tooltip(); // re-enabling`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T14:39:51.343

我找到了一种使用 CSS 的方法！只需添加`.tooltip { visibility: hidden }`到您的 CSS 文件中。

如果您想在没有工具提示的情况下使您的链接可访问性友好，那么只需添加`aria-label= "Here's a link description."`

希望这可以帮助！

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-08-10T14:21:38.573

我也为此苦苦挣扎，但我想出了一个解决方案！在我的情况下，我使用 Jquery Sortable，当你有工具提示飞来飞去时，这当然很烦人！

所以我做了一个变量

```
var sort = '0`; 
```

由于几乎每个工具提示都有一个 init() 函数，所以我创建了

```
if(window.sort!='1') { // So I'm not sorting
  init.tooltip();
} 
```

所以，这可能是最简单的启用/禁用功能！

# python - 无法理解 Django 和 mixin 行为

> ID：13414247
> 
> 赞同：1
> 
> 时间：2012-11-16T10:02:39.103
> 
> 标签：python, django, django-generic-views

我有以下类层次结构：

```
class ProfileUpdateView( UpdateView, LoggerMixin ):

    def get_context_data(self, **kwargs):
        context = super(ProfileCreateView, self).get_context_data(**kwargs)
        ...
        return context 
```

UpdateView 其实就是 django.views.generic.UpdateView

```
class EventViewMixin(object):
    template_name = ...
    model = Event
    form_class = ...

    def get_success_url(self):
        return self.success_url + str(self.object.id) 
```

类 UpdateEventView 混合 ProfileUpdateView 和 EventViewMixin

```
class UpdateEventView(ProfileUpdateView, EventViewMixin):

    def form_valid(self, form):
        ...
        return super(UpdateEventView, self).form_valid(form) 
```

问题在于，由于某种原因，当框架尝试使用 UpdateEventView 时，“model=Event”字段对框架不可见。所以我得到了错误：

UpdateEventView 缺少查询集。定义 UpdateEventView.model、UpdateEventView.queryset，或覆盖 UpdateEventView.get_object()。

我错过了什么？

免责声明：我是 Python/Django 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:06:27.480

所以我的问题有点愚蠢......问题在于mixin的顺序：

```
class UpdateEventView(ProfileUpdateView, EventViewMixin):
    .... 
```

必须替换为：

```
class UpdateEventView( EventViewMixin, ProfileUpdateView ): 
```

这是因为 ProfileUpdateView 在其继承树中有一个字段“model=None”，如果 ProfileUpdateView 位于第一个位置，则将考虑该值。如果 EventViewMixin 先出现，则采用正确的值。

# iphone - Xcode 与 Unity 挂钩

> ID：13414248
> 
> 赞同：2
> 
> 时间：2012-11-16T10:02:42.280
> 
> 标签：iphone, ios, xcode, facebook, unity3d

嗨，我是 Unity 的新手，但我有 1 年的 Xcode 经验，我正在为 iPhone 做 Unity 的应用程序，但对如何将 Xcode 与 Unity 连接有点困惑，我想要 Facebook 共享、Twitter 共享以及Unity 中的 iOS 原生电子邮件共享（使用 Mail Composer），但我没有得到任何有用的解决方案来完成 Unity 中的任务，我只获得了我需要先购买的插件。所以我想在 Xcode 中完成这项任务，它减少了时间和金钱以及 Unity 上的其余工作，所以我们可以在 Xcode 和 Unity 之间进行通信吗？如果可能的话，请与我分享一些知识和链接，以便我可以尽快完成这项任务。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:38:03.110

您可以开始编写自己的插件来完成 Unity3D 与 iOS 之间的通信。

从 iOS 到 Unity，你可以只使用 UnitySendMessage，这在大多数情况下就足够了。您也可以尝试在 Unity Script 中使用事件和委托来处理更复杂的情况。

从 Unity 到 iOS，需要自己实现插件。首先，使用 .cs 文件来声明外部方法。然后在 Xcode 中的 .mm 文件中实现本机代码，并将它们“extern C”到 Unity。然后您可以调用 .cs 方法并调用一个本机函数。您需要 Unity Pro 许可证才能使用插件功能。

对于 UnitySendMessage 和 Unity 插件，请访问[Unity Doc-Building Plugins for iOS](http://docs.unity3d.com/Documentation/Manual/PluginsForIOS.html)。您可以在名为 Bonjour Browser Sample 的文档中找到一个示例。这对你来说是一个很好的起点。如果你有 1 年的 Xcode 经验，我认为这对你来说会很容易。

要在 Unity 中使用委托和事件，请访问[Prime31 的 Unity 提示视频](http://www.youtube.com/watch?v=N2zdwKIsXJs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:27:50.787

查看 Niklas 的免费 unity iOS 插件。

[http://forum.unity3d.com/threads/122681-Free-facebook-Plugin-for-Unity-iOS](http://forum.unity3d.com/threads/122681-Free-facebook-Plugin-for-Unity-iOS)

它不再开箱即用，但是通过一些更改和更新，您可以使其正常工作。

如果您已经有 xCode 经验，那么希望额外的工作应该是微不足道的，因为 Facebook SDK 文档非常好。

# sql - SQL Group 上的值组合

> ID：13414250
> 
> 赞同：0
> 
> 时间：2012-11-16T10:02:42.317
> 
> 标签：sql, grouping

我正在设计一个关于用户如何启动某些东西的数据库设计。我的想法是有时间戳（DateTime）列和方法列（varchar）。

这个“方法”（varchar）可以是任何东西：

*   BUTTON_OK
*   按钮_X
*   APP_Y
*   APP_Z
*   ETC

我如何计算使用但对一些值进行分组。在这种情况下，我想要我的结果：

*   按钮：20
*   APP_X：10
*   APP_Z：14

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:15:46.167

您需要某种方式来定义哪些“方法”属于哪个“方法组”。

一种方法是有一个查找表：

```
tbl_methodgroup

method_id 方法 Method_group
1 Button_OK 按钮
2 Button_X 按钮
3 App_Y App_Y
4 应用_Z 应用_Z

```

那么你可以使用：

```
 select 
b.method_group, 
count(1) 
from
tbl_methodgroup a
  inner join tbl_method b on a.Method=b.Method
group by b.method_group 
```

随着更多方法的添加，这种方法具有可扩展性的优点。而不是手动编码查询，每次都需要修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:06:16.050

如果表的名称是 tblTest，那么查询将如下所示：

```
 SELECT method, COUNT(*) FROM tblTEst Group BY method 
```

如果我错过了问题，我深表歉意，如果您在数据和分组场景中具有一致性，您可以执行以下操作，这是纠正问题的最后机会：

```
 SELECT LEFT(method,CHARINDEX('_',method)-1), 
        COUNT(*) 
 FROM tblTest 
 GROUP BY LEFT(method,CHARINDEX('_',method)-1) 
```

否则，斯图尔特摩尔的答案是正确的。

# c++ - 为什么这个 CUDA 内核与原始代码给出不同的结果？

> ID：13414256
> 
> 赞同：0
> 
> 时间：2012-11-16T10:02:56.483
> 
> 标签：c++, cuda

我移植了这段代码：

```
 if(_layersCount > 1)
    {
        for(int i=_layersCount-2;i>=0;i--)
        {
            for(int j=0;j<_neuronsPerLayerCount[i];j++) // cuda kernel
            {
                localGradients[indexByLayerAndNeuron(i, j)] = 0;

                for(int k=0;k<_neuronsPerLayerCount[i+1];k++)
                {
                    localGradients[indexByLayerAndNeuron(i, j)] += _neuronsInputsWeights[indexByLayerNeuronAndInput(i+1, k, j)]
                                                                    * localGradients[indexByLayerAndNeuron(i+1, k)];
                }

                localGradients[indexByLayerAndNeuron(i, j)] *= derivatives[indexByLayerAndNeuron(i, j)];
            }
        }
    } 
```

到 CUDA：

```
 if(_layersCount > 1)
    {
        for(int i=_layersCount-2;i>=0;i--)
        {
            // calculateLocalGradientsForAnotherLayers
            blocksCount = floor((double) _neuronsPerLayerCount[i] / threads.x) + 1;
            blocks = dim3(blocksCount, 1);

            calculateLocalGradientsForAnotherLayers <<<blocks, threads>>> (deviceLocalGradients, _neuronsInputsWeights, deviceDerivatives, _neuronsPerLayerCount[i], _neuronsInPreviousLayers[i], _neuronsInPreviousLayers[i+1], _neuronsPerLayerCount[i+1], _inputsInPreviousLayers[i], _inputsInCurrentLayer[i]);
        }
    } 
```

calculateLocalGradientsForAnotherLayers 内核：

```
__global__ void calculateLocalGradientsForAnotherLayers(double * localGradients, double * neuronsInputsWeights, double * derivatives, int neuronsCount, int neuronsInPreviousLayers, int neuronsInPreviousLayersWithCurrent, int neuronsInNextLayer, int inputsInPreviousLayers, int inputsInCurrentLayer)
{
    int idx = blockIdx.x * blockDim.x + threadIdx.x;

    if(idx < neuronsCount)
    {
        int neuron = neuronsInPreviousLayers + idx;

        localGradients[neuron] = 0;

        // this to Kernel, then reduce localGradients.
        for(int k=0;k<neuronsInNextLayer;k++)
        {
            localGradients[neuron] += neuronsInputsWeights[inputsInPreviousLayers + k*inputsInCurrentLayer + idx]
                                                            * localGradients[neuronsInPreviousLayersWithCurrent + k];
        }

        localGradients[neuron] *= derivatives[neuron];
    }
} 
```

但我看到了小数点后第二位的结果差异。为什么误差这么大？除此以外，所有内核都运行良好。

我的 GPU 是 NV GF555M。它支持双精度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:29:13.823

在内核的主体中，您需要某种`localGradients`数组上的块间同步：

```
for(int k=0;k<neuronsInNextLayer;k++)
        {
            localGradients[neuron] += neuronsInputsWeights[inputsInPreviousLayers + k*inputsInCurrentLayer + idx]
                                                            * localGradients[neuronsInPreviousLayersWithCurrent + k];
        } 
```

并发读/写访问可能会破坏`localGradients`元素的实际值。由于读/写没有同步，您可能会看到随机结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:08:47.927

我发现了问题。而是行：

```
calculateLocalGradientsForAnotherLayers <<<blocks, threads>>> (deviceLocalGradients, _neuronsInputsWeights, deviceDerivatives, _neuronsPerLayerCount[i], _neuronsInPreviousLayers[i], _neuronsInPreviousLayers[i+1], _neuronsPerLayerCount[i+1], _inputsInPreviousLayers[i], _inputsInCurrentLayer[i]); 
```

应该写：

```
calculateLocalGradientsForAnotherLayers <<<blocks, threads>>> (deviceLocalGradients, _neuronsInputsWeights, deviceDerivatives, _neuronsPerLayerCount[i], _neuronsInPreviousLayers[i], _neuronsInPreviousLayers[i+1], _neuronsPerLayerCount[i+1], _inputsInPreviousLayers[i+1], _inputsInCurrentLayer[i+1]); 
```

# jsf - 获取会话地图

> ID：13414258
> 
> 赞同：4
> 
> 时间：2012-11-16T10:02:59.910
> 
> 标签：jsf

在我的代码中，我有一个简单的`Phase Listener`.

```
public class PhaseTracker implements PhaseListener {
    private static final Logger LOGGER = LoggerFactory.getLogger(PhaseTracker.class);

    @Override
    public void afterPhase(PhaseEvent pe) {
        LOGGER.debug("afterPhase " + pe.getPhaseId());
        LOGGER.debug(""+FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("haveErrors"));

    }

    @Override
    public void beforePhase(PhaseEvent pe) {
        LOGGER.debug("beforePhase " + pe.getPhaseId());
        boolean error = false;
        Iterator<FacesMessage> messageIterator = pe.getFacesContext().getMessages();
        while (messageIterator.hasNext()) {
            FacesMessage message = messageIterator.next();
            if (message.getSeverity().equals(FacesMessage.SEVERITY_ERROR)) {
                LOGGER.debug("beforePhase severity is error");
                error = true;
            }

        }

        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("haveErrors", error);
        LOGGER.debug(""+FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("haveErrors"));
    }

    @Override
    public PhaseId getPhaseId() {
        LOGGER.debug("getPhaseId");
        return PhaseId.ANY_PHASE;
    }
} 
```

问题是`XHTML`当我在文件中尝试访问变量时

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("haveErrors") 
```

我有一个`null`来源，我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T12:38:38.293

试试这样

```
 public synchronized void beforePhase(PhaseEvent event) {

        FacesContext context = event.getFacesContext();
        ExternalContext ex = context.getExternalContext();

 String viewId = "/index.xhtml";

        if (context.getViewRoot() != null && context.getViewRoot().getViewId() != null) {
            viewId = context.getViewRoot().getViewId();

        }

        String localeCode = (String) ex.getSessionMap().get("localeCode");

        if (localeCode == null) {
            ex.getSessionMap().put("localeCode", "en");
            context.getViewRoot().setLocale(new Locale("en"));
            // System.out.println("locale code " +"En?");
        } else if (localeCode != null) {
            //System.out.println("locale code " +localeCode);
            ex.getSessionMap().put("localeCode", localeCode);
            context.getViewRoot().setLocale(new Locale(localeCode));
        } 
```

# jquery - .text() jquery 内联，同时形成 div

> ID：13414261
> 
> 赞同：0
> 
> 时间：2012-11-16T10:03:03.817
> 
> 标签：jquery, html, text, xss

$('#box').text("你好"); 将显示为文本。当我在循环中形成 div 时如何使用它？

```
for(i=0;i,3;i++) {
        description+ = "<div id="box">+text[i]+</div>";
} 
```

我如何指定内联文本不应作为脚本执行。

编辑：忘记+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:04:34.087

尝试这个，

```
text = [1,2,3];
for(i=0;i<3;i++) {
        description+ = '<div id="box">' + text[i] + '</div>"';
} 
```

编辑：转义脚本标签，`you need to change </script> to <\/script>`

**[现场演示](http://jsfiddle.net/KEJdU/1/)**

```
text = ['<script>alert("Hi");<\/script>','<script>alert("Hi");<\/script>','<script>alert("Hi");<\/script>'];
description ="";

for(i=0;i<3;i++) {
        description += '<div id="box">' + text[i] + '</div>"';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:24:10.833

您可以使用 XMP 标签来阻止脚本的执行。

```
for(i=0;i<3;i++) {
        description+ = '<div id="box"><xmp>' + text[i] + '</xmp></div>';
} 
```

# bluetooth - Mono for Android 中的 Zebra 标签打印机导致意外崩溃，无一例外

> ID：13414263
> 
> 赞同：1
> 
> 时间：2012-11-16T10:03:09.150
> 
> 标签：bluetooth, xamarin.android, zebra-printers

我创建了一个使用 Zebra 打印 API 的 Mono for Android 应用程序。我已经设法在此处定义的 Java 绑定库和 Android 应用程序的标准 Mono 中引用了 ZSDK_API.jar[文件](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar))

*   我已将 .jar 文件添加到 JBL 项目（Jars 文件夹）并将其构建操作设置为 InputJar
*   我还将 jar 添加到 Mono for Android 应用程序，并将构建操作设置为 AndroidJavaLibrary。

**发现处理程序**

```
public class DiscoveryHandler : IDiscoveryHandler
{
    private Discovery _reference;

    public DiscoveryHandler(Discovery reference)
    {
        _reference = reference;
    }

    public void DiscoveryError(string message)
    {
        new UIHelper(_reference).showErrorDialogOnGuiThread(message);
    }

    public void DiscoveryFinished()
    {
        _reference.RunOnUiThread(() =>
        {
            Toast.MakeText(_reference, " Discovered " + _reference.discoveredPrinters.Count + " devices", ToastLength.Short).Show();
            _reference.SetProgressBarIndeterminateVisibility(false);
        });
    }

    public void FoundPrinter(DiscoveredPrinter printer)
    {
        _reference.RunOnUiThread(() => 
        {
            DiscoveredPrinterBluetooth p = (DiscoveredPrinterBluetooth)printer;
            _reference.discoveredPrinters.Add(p.Address + " (" + p.FriendlyName + ")");
            _reference.mArrayAdapter.NotifyDataSetChanged();
        }); 
    }

    public void Dispose()
    {

    }

    public IntPtr Handle
    {
        get { return _reference.Handle; }
    }
} 
```

**发现.cs**

```
public class Discovery : ListActivity
{
    public List<string> discoveredPrinters = null;
    public ArrayAdapter<string> mArrayAdapter;
    private static IDiscoveryHandler btDiscoveryHandler = null;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        RequestWindowFeature(WindowFeatures.IndeterminateProgress);
        SetContentView(Resource.Layout.discovery_results);

        SetProgressBarIndeterminateVisibility(true);
        discoveredPrinters = new List<string>();
        SetupListAdapter();
        btDiscoveryHandler = new DiscoveryHandler(this);

        try
        {
            new Thread(new ThreadStart(() =>
                {
                    Looper.Prepare();

                    try
                    {
                        RunOnUiThread(() => Toast.MakeText(this, "Trying", ToastLength.Short).Show());
                        BluetoothDiscoverer.FindPrinters(this, btDiscoveryHandler);
                        RunOnUiThread(() => Toast.MakeText(this, "And...", ToastLength.Short).Show());
                    }
                    catch (ZebraPrinterConnectionException zex)
                    {
                        new UIHelper(this).showErrorDialogOnGuiThread(zex.Message);
                    }
                    catch (ThreadInterruptedException iex)
                    {
                        new UIHelper(this).showErrorDialogOnGuiThread(iex.Message);
                    }
                    catch (Exception ex)
                    {
                        new UIHelper(this).showErrorDialogOnGuiThread(ex.Message);
                    }
                    finally
                    {
                        RunOnUiThread(() => Toast.MakeText(this, "Quitting looper", ToastLength.Short).Show());
                        Looper.MyLooper().Quit();
                        RunOnUiThread(() => Toast.MakeText(this, "Finished", ToastLength.Short).Show());
                    }
                })).Start();
        }
        catch (Exception ex)
        {
            new UIHelper(this).showErrorDialogOnGuiThread(ex.Message);
        }            
    }

    private void SetupListAdapter()
    {
        mArrayAdapter = new ArrayAdapter<string>(this, global::Android.Resource.Layout.SimpleListItem1, discoveredPrinters);
        ListAdapter = mArrayAdapter;
    }
} 
```

我已确保清单正在请求蓝牙和 Bluetooth_Admin 以及互联网。

应用程序构建，但运行时只是崩溃，没有例外，只是说“应用程序已意外停止”

所有的类都被检测和编译，但我不知道为什么它会像这样轰炸。有没有人成功使用 Mono for Android - Zebra 集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:14:15.337

该死 - 我是一个印章！就在我发布它时，我开始思考——这可能与我将 IntPtr Handle 实现为父句柄这一事实有关——我是对的。这是工作代码的第一步（第一步 - 如果我必须回答自己的问题！）：

```
public class Discovery : ListActivity, IDiscoveryHandler
{
    public List<string> discoveredPrinters = null;
    public ArrayAdapter<string> mArrayAdapter;        

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        RequestWindowFeature(WindowFeatures.IndeterminateProgress);
        SetContentView(Resource.Layout.discovery_results);

        SetProgressBarIndeterminateVisibility(true);
        discoveredPrinters = new List<string>();
        SetupListAdapter();            

        try
        {
            new Thread(new ThreadStart(() =>
                {
                    Looper.Prepare();

                    try
                    {                            
                        BluetoothDiscoverer.FindPrinters(this, this);                         
                    }
                    catch (ZebraPrinterConnectionException zex)
                    {
                        new UIHelper(this).showErrorDialogOnGuiThread(zex.Message);
                    }
                    catch (ThreadInterruptedException iex)
                    {
                        new UIHelper(this).showErrorDialogOnGuiThread(iex.Message);
                    }
                    catch (Exception ex)
                    {
                        new UIHelper(this).showErrorDialogOnGuiThread(ex.Message);
                    }
                    finally
                    {
                        RunOnUiThread(() => Toast.MakeText(this, "Quitting looper", ToastLength.Short).Show());
                        Looper.MyLooper().Quit();
                        RunOnUiThread(() => Toast.MakeText(this, "Finished", ToastLength.Short).Show());
                    }
                })).Start();
        }
        catch (Exception ex)
        {
            new UIHelper(this).showErrorDialogOnGuiThread(ex.Message);
        }            
    }

    private void SetupListAdapter()
    {
        mArrayAdapter = new ArrayAdapter<string>(this, global::Android.Resource.Layout.SimpleListItem1, discoveredPrinters);
        ListAdapter = mArrayAdapter;
    }

    public void DiscoveryError(string message)
    {
        new UIHelper(this).showErrorDialogOnGuiThread(message);
    }

    public void DiscoveryFinished()
    {
        RunOnUiThread(() =>
        {
            Toast.MakeText(this, " Discovered " + discoveredPrinters.Count + " devices", ToastLength.Short).Show();
            SetProgressBarIndeterminateVisibility(false);
        });
    }

    public void FoundPrinter(DiscoveredPrinter printer)
    {
        RunOnUiThread(() =>
        {

            DiscoveredPrinterBluetooth p = printer.JavaCast<DiscoveredPrinterBluetooth>();
            discoveredPrinters.Add(p.Address + " (" + p.FriendlyName + ")");
            mArrayAdapter.NotifyDataSetChanged();
        }); 
    }
} 
```

}

# antlr - ANTLR：回溯和前瞻之间的区别？

> ID：13414265
> 
> 赞同：6
> 
> 时间：2012-11-16T10:03:14.107
> 
> 标签：antlr, grammar, backtracking, lookahead, ll

我对 ANTLR 比较陌生。我有一个非常简单的语法：

```
start   :
('A' 'B' 'C' '1'
|'A' 'B' 'C' '2' 
|'A' 'B' 'C' '3'
)
; 
```

我认为我已经了解了前瞻和回溯概念的基础知识（适用于句法谓词）。所以这个语法适用于 k=4 或 backtrack=true。但是确切的区别是什么，主要问题是我什么时候使用什么？我试图在互联网上找到答案，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:58:27.263

您的语法在 ANTLR v3 中有效，没有任何选项。

k 选项将 ANTLR 限制为经典的 LL(k) 解析。回溯意味着 - 如果解析器无法预测要使用哪个规则，它只会尝试、回溯并再次尝试。当 ANTLR 无法为给定语法构建前瞻 DFA 时应使用的回溯选项。ANTLR v3 可以很容易地从正则表达式构建 DFA，但它在递归规则方面存在困难。例如，这个语法有效：

```
start: recursive_rule ';'
     | recursive_rule ':'
     ;

recursive_rule : (ID)* '%'
               ; 
```

下面这个语法是一样的，但是通过递归来表达。ANTLR 无法为其构建 DFA（我实际上不知道为什么），因此您需要打开回溯：

```
start options {backtrack=true;} : recursive_rule ';'
                                | recursive_rule ':'
                                ;

recursive_rule : ID recursive_rule
               |'%'
               ; 
```

k 选项用于提高解析器的性能。我不知道将 LL(*) 限制为 LL(k) 的任何其他原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:46:35.033

我在“The definitve Antlr Reference”一书中找到了对我的问题的理论描述，这对我的理解也很重要。也许其他一些问自己类似问题的人也会对本书的这个片段有所帮助。

![书中的片段](../Images/93f7fa4341bb746ea2193426565882f1.png)

第 262 页

# geolocation - Twitter API：获取附近的最新推文

> ID：13414270
> 
> 赞同：0
> 
> 时间：2012-11-16T10:03:27.507
> 
> 标签：geolocation, twitter

我在这里看到请求 API 文档：[https](https://dev.twitter.com/docs/api/1.1/get/search/tweets) ://dev.twitter.com/docs/api/1.1/get/search/tweets 我知道有一个地理编码字段。问题是查询字段是必需的，这意味着我必须搜索与该区域相关的内容。是否可以在不指定查询的情况下仅获取该区域周围的所有最新推文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:49:18.423

不，这是为了防止对服务器的巨大需求，您需要指定其他内容。我的提示 - 使用与日期/时间相关的查询字段。这是可以接受的，如果你真的需要“永远”，你可以提出更多的请求。

# mysql - MySQL InnoDB 在 DELETE CASCADE 上更改引用操作

> ID：13414273
> 
> 赞同：2
> 
> 时间：2012-11-16T10:03:32.703
> 
> 标签：mysql, innodb, foreign-key-relationship, cascade, referential-integrity

有没有比删除和添加约束更快的方法将 CASCADE 规则添加到现有外键？

```
SET foreign_key_checks = 0;
ALTER TABLE drop foreign key ...;
ALTER TABLE add foreign key ...;
SET foreign_key_checks = 1; 
```

手册说，您不能在单个 ALTER TABLE 语句的单独子句中添加外键和删除外键。您必须使用单独的语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:27:24.273

我尝试使用“MySQL Workbench 5.2 CE->EER Diagram”仅更改外键选项：从表中的“on delete restrict”到“on delete cascade”：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`Customers` (
  `CustomerID` INT NOT NULL AUTO_INCREMENT ,
  `FirstName` VARCHAR(45) NOT NULL ,
  `LastName` VARCHAR(45) NOT NULL ,
  `Email` VARCHAR(500) NOT NULL ,
  `Password` VARCHAR(500) NOT NULL ,
  `AddressID` INT NULL ,
  PRIMARY KEY (`CustomerID`) ,
  INDEX `AddressID_idx` (`AddressID` ASC) ,
  UNIQUE INDEX `Email_UNIQUE` (`Email` ASC) ,
  CONSTRAINT `CustomerAddressID`
    FOREIGN KEY (`AddressID` )
    REFERENCES `mydb`.`Address` (`AddressID` )
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

因此，该 GUI 工具生成以下代码：

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

ALTER TABLE `mydb`.`Customers` DROP FOREIGN KEY `CustomerAddressID` ;

ALTER TABLE `mydb`.`Customers` 
  ADD CONSTRAINT `CustomerAddressID`
  FOREIGN KEY (`AddressID` )
  REFERENCES `mydb`.`Address` (`AddressID` )
  ON DELETE CASCADE
  ON UPDATE CASCADE;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

我认为这意味着通过两步更改外键选项是自然的方式。

# c# - SQLDataReader 不显示第一个元素，但访问它？

> ID：13414277
> 
> 赞同：0
> 
> 时间：2012-11-16T10:03:41.737
> 
> 标签：c#, .net, visual-studio-2008, .net-3.5

我有类似于以下的代码：

```
SqlDataReader sdr = null;
.
.
sdr = cmd.ExecuteReader();

while(sdr.Read()){
    string x = sdr["x"].ToString();
    Console.WriteLine(x);
    long? y = Int64.Parse(sdr["y"].ToString());
} 
```

我目前在解析y的值时正在调试一个问题。在数据库中，对于写入控制台的值 x，它表示 y 是一个数值（如果不是，它将为空）。

当抛出异常时，我将鼠标悬停在 sdr 上并导航到正在存储的实际数据。元素 [0] 中的值与刚刚写入屏幕的值 x 相对应。换句话说，肯定会访问 x，因为我可以看到 x 的正确值正在显示。但是，在 Visual Studio 2008 中，调试时，查看对象的内存，第一个元素的 x 列值与控制台上显示的值不同！

- 为什么我看不到已访问的元素？- 这个问题是否与我的数值未正确解析有关？

我确实注意到另一个奇怪的事情：我第一次在 Visual Studio 中查看 sdr 对象时，我可以看到元素。如果我将鼠标移动到屏幕的另一侧，然后将鼠标悬停在对象上，尝试遍历 sdr 读取器对象的元素，没有元素 - 好像它是空的？！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:24:38.050

真的，这不是使用 SqlDataReader 的方式......

撇开@TimSchmelter 所述的编译问题，您应该在尝试访问和转换 SqlDataReader 的值之前编写检查 DBNull.Value 的代码

```
string x = string.Empty;
int index = sdr.GetOrdinal("x");
if (!sdr.IsDBNull(index))
     x = sdr.GetString(index);

long? y;
index = sdr.GetOrdinal("y");
if (!sdr.IsDBNull(index))
    y = sdr.GetInt64(index); 
```

# css - 按类别全选，除了最后一个

> ID：13414279
> 
> 赞同：1
> 
> 时间：2012-11-16T10:03:43.410
> 
> 标签：css, css-selectors

我有一系列，`div`我想选择除每个 div 中的最后一个之外的所有`p`带有类的标签，`enable`以便在 css 中应用特定样式。内容是动态生成的，并且可能因用户而异。

在下面的示例中，我想将此样式应用于第`p`一个 div 中的前两个，而在另一个中不应用此样式。我敢肯定这很容易，但我找不到任何解决方案来解决它。

```
<div>
    <p class="enable"></p>
    <p class="enable"></p>
    <p class="enable"></p>
    <p class="disable"></p>
</div>
<div>
    <p class="enable"></p>
    <p class="disable"></p>
    <p class="disable"></p>
    <p class="disable"></p>
</div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:14:37.807

如果`p`元素限制为四个，`div`则可以使用`nth-child`伪选择器。

```
p.enable:nth-child(-n+2)
{
    background: #0f0;
}

p.disable
{
    background: #eee;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/vw4wQ/](http://jsfiddle.net/Kyle_Sevenoaks/vw4wQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:19:33.120

我有一个 Javascript 解决方案给你：

```
var divs = document.getElementsByTagName("div"), paras, i, j;

for(i = 0; i < divs.length; i++) {
    paras = divs[i].getElementsByTagName("p");
    for(j = 0; j < paras.length-1; j++) {
        if(paras[j+1].className === "disable")
            break;
        // apply your custom code here
        paras[j].style.background = "#FF0000";
    }
} 
```

[**在这个 jsFiddle**](http://jsfiddle.net/8M5kE/)检查这个解决方案[](http://jsfiddle.net/8M5kE/)

# c# - jqgrid mvc json格式？

> ID：13414280
> 
> 赞同：0
> 
> 时间：2012-11-16T10:03:48.093
> 
> 标签：c#, asp.net-mvc, json, jqgrid

脚本：

```
jQuery("#grid_table").jqGrid({
        url: '@Url.Action("GetAll", "Widget")',
        datatype: "json",
        mtype: 'GET',
        colNames: ['id', 'name'],
        colModel: [
            { name: 'id', index: 'id', width: 55, sortable: true, editable: false, editoptions: { readonly: true, size: 10} },
            { name: 'name', index: 'name', width: 200, editable: true }
       ],
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            id: "id",
            userdata: "userdata"
        },
        rowNum: 10,
        rowList: [10, 20, 30],
        pager: jQuery('#gridpager'),
        sortname: 'name',
        viewrecords: true,
        sortorder: "asc",
        caption: "Wines"
    }).navGrid('#gridpager'); 
```

控制器：

```
public ActionResult GetAll()
    {
        List<object> list = new List<object>();

        for (int i = 0; i < 20; i++)
        {
            var o = new
            {
                id = i.ToString(),
                name = "name " + i.ToString()
            };
            list.Add(o);
        }

        var result = new
        {
            page = "1",
            total = "1",
            records = "10",
            rows = list.ToArray()
        };

        string Jlist = Newtonsoft.Json.JsonConvert.SerializeObject(result);

        return Json(Jlist, JsonRequestBehavior.AllowGet);
    } 
```

json输出：

![在此处输入图像描述](../Images/3e2cfe3ebb37225bde32c28a4ca420ad.png)

和消息：没有找到记录！

我的代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:44:37.953

我认为您的 json 阅读器中提到的“userdata”不在您的 json 中。

所以请在您的用户数据字段中传递一些空值或任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:09:53.883

问题是这一行：

```
string Jlist = Newtonsoft.Json.JsonConvert.SerializeObject(result); 
```

我删除了序列化线，然后它就可以工作了。谢谢您的回复。

# php - 从 Zend Framework 1 到 2 的逐步迁移

> ID：13414282
> 
> 赞同：27
> 
> 时间：2012-11-16T10:03:59.940
> 
> 标签：php, zend-framework, migration, zend-framework2

我必须将应用程序从 Zend Framework 1.12.0 迁移到版本 2。似乎还[没有迁移指南](http://zend-framework-community.634137.n4.nabble.com/ZF1-gt-ZF2-migration-guide-td4656239.html)。我已经研究过 ZF2 编码约定，并采用了依赖注入 (Zend\Di) 和 PHP 5.3 命名空间。我的目标是将我的 ZF1 应用程序重构为 ZF2 模块。

问题：是否可以在每一步之后逐步使用至少部分*工作的应用程序*并*避免大量的重构步骤*？如果是，步骤是什么？

这是我对这种逐步迁移的想法，但我不知道在每一步之后我是否最终得到了一个工作应用程序：

1.  首先设置[ZF2 骨架应用程序](https://github.com/zendframework/ZendSkeletonApplication)
2.  [设置一个新模块](http://packages.zendframework.com/docs/latest/manual/en/user-guide/modules.html)（MyApp），并将我的ZF1应用程序的内容重新组织到MyApp模块文件夹结构中。然后设置非常基本的配置和引导并通过从 ZF2 AbstractActionController 扩展 IndexController 来迁移它。模型 (Zend_Db) 和视图 (Zend_View) 将稍后迁移。这里的目标是拥有一个没有很多依赖项的有效 IndexController::indexAction。
3.  设置更多配置和引导（路由、翻译、区域设置、缓存、Db、Acl、ViewHelpers...）。我想先设置这些组件的ZF1版本，以后再一个一个迁移。
4.  [使用 Zend\Di 或使用 ServiceManager](http://www.zfdaily.com/2012/07/getting-dependencies-into-zf2-controllers/)迁移其他控制器并设置依赖注入到控制器中。
5.  [通过使旧的phing](http://www.phing.info/)脚本与新的目录结构一起工作来设置自动部署。
6.  将视图（包括助手）和表单迁移到 ZF2。
7.  迁移模型（从 Zend_Db 到 ZF2 Zend\Db 或到 Doctrine）。
8.  一个一个地迁移其他 ZF1 组件（Translate、Locale、Cache、Acl，...）。
9.  重构康复和长假。

但是，只有当某些 ZF2 组件与 ZF1 组件一起工作时，我才会在每一步之后都有一个工作应用程序。我不知道是否可以将 ZF1 视图（和视图助手）与 ZF2 控制器一起使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:29:39.577

曾经在某处写过，使用一些中间层会很容易，但我从未在库中看到任何链接或任何看起来像它的东西。

现在，您可以找到的唯一内容和最新信息是在文档的概述页面中。就是这个：

> 注意 ZF2 不向后兼容 ZF1，因为框架实现了 PHP 5.3+ 中的新功能，并且由于对许多组件进行了重大重写。

我从没想过它会向后兼容，但我认为这里的关键声明是对许多组件的**主要重写**。

几个月前我用 ZF2 开始了一个新项目，我只想要这个库；所以没有 MVC 这应该很容易，对吧？到目前为止，这几乎是一场噩梦，因为一切都不再一样了。除了一些熟悉的类名或结构外，整个框架已经从头开始完全重写。

我喜欢的、经常使用的和熟记的东西，比如表单、缓存或会话是完全不同的。对于我的项目，它花费了我很多时间而没有任何好处。我认为 ZF2 的关键对象之一是彻底检查文档，这些文档的编写方式比以前的文档差。

对于我其他现有的 ZF1.x 项目，除了完全重写应用程序之外，我看不到如何管理升级。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-26T19:50:12.397

**从 Zend Framework 1 迁移**

> 本指南旨在提供从 Zend Framework 1 迁移到 Zend Framework 2 的工具和策略。没有适用于每个项目的单一解决方案，也没有任何工具可以自动化该过程。

在本指南中，我们将介绍以下内容：

1.  用于命名代码的工具。
2.  在 Zend Framework 1 应用程序中使用 Zend Framework 2 的工具。
3.  并行运行 Zend Framework 2 和 Zend Framework 1 的策略。
4.  使您的代码更易于迁移的策略，主要关注域逻辑和 MVC 层的清晰分离。
5.  迁移 MVC 层的策略。
6.  迁移领域层的策略。

[http://framework.zend.com/manual/2.1/en/migration/overview.html](http://framework.zend.com/manual/2.1/en/migration/overview.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T23:41:25.793

来自[Zend Framework 2 常见问题解答](http://framework.zend.com/about/faq/)：

> **我有一个使用 Zend Framework 1 构建的应用程序——我可以将它迁移到新版本吗？**
> 
> 绝对地。Zend Framework 2 的一个重要部分是迁移层，它将允许 ZF 1 代码在新的 ZF 2 引擎上运行，该引擎将在未来提供。有了它，您将能够以可控的速度添加新的 ZF 2 代码并重构现有代码。

但是，在这一点上，我还没有听说过任何实际的迁移层。我们只能希望会有，但在这一点上，我有我的怀疑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-11T17:38:34.630

在过去的一年中，我们一直在将一个大型应用程序从 Zend Framework 1 迁移到 Zend Framework 2。我们从命名空间等简单的东西开始，然后慢慢地进入各种库组件。最终，我们最终编辑`Zend_Layout`了 to work with `Zend\Filter`、`Zend_Form`to work with`Zend\Filter`和`Zend\Json`、`Zend_Navigation`to work with`Zend\Permissions\Acl`等。这帮助我们消除了几乎所有 ZF1 组件，除了 ZF1 应用程序结构包括四个类`Zend_Application`、`Zend_Config`、`Zend_Controller`和`Zend_Layout`. 拼图的最后一块是 和 的实现`Zend\Mvc\Application`，`Zend\View`其余部分是 ZF2 就绪的。

最近，我们创建了一个代理来连接`Zend\Mvc\Application`ZF1 和 ZF2 模块。这***非常***有帮助。我在[http://webjawns.com/2013/11/migrating-to-zf2-integrating-composer-and-doctrineormmodule/](http://webjawns.com/2013/11/migrating-to-zf2-integrating-composer-and-doctrineormmodule/)详细介绍了这些步骤。

总之...

*   将前缀转换为命名空间（`Model_`to `Model\`、`Application_Controller`to`Application\Controller`等）
*   将非 MVC 组件替换为 ZF2 对应组件，包括自动加载器
*   创建 ZF2 应用程序结构和挂钩以开始使用 ZF2 模块
*   移动控制器和视图（仍在为此制定计划）

# ocr - 为 Tesseract OCR 创建训练图像

> ID：13414285
> 
> 赞同：8
> 
> 时间：2012-11-16T10:04:04.597
> 
> 标签：ocr, tesseract

我正在为 Tesseract OCR 训练图像编写生成器。

在为 Tesseract OCR 的新字体生成训练图像时，最佳值是什么：

1.  新闻部
2.  以磅为单位的字体大小
3.  字体是否应该抗锯齿
4.  边界框是否应紧贴：![在此处输入图像描述](../Images/0b769586fd3ba8c22559eac2793737ca.png)，或不：![在此处输入图像描述](../Images/e7206429f204affd2a97496d1448e589.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T22:24:52.233

第二个问题在这里以某种方式得到了回答：[http ://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3#Generate_Training_Images](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3#Generate_Training_Images) *没有必要用多种尺寸进行训练。10点就可以了。（一个例外是非常小的文本。如果您想识别 x 高度小于约 15 像素的文本，您应该专门训练它或在尝试识别它们之前缩放您的图像。）*

问题 1 和 3：根据经验，我已成功使用 300 dpi 图像/非抗锯齿字体。更具体地说，我在训练 pdf 上使用了以下转换参数，生成了令人满意的图像：

```
convert -density 300 -depth 8 [input].pdf -background white -flatten +matte -compress none -monochrome [output].tif 
```

但后来我尝试向 Tesseract 添加点字体，它仅在我使用 150 dpi 图像时才能正确检测到字符。所以，我认为没有通用的解决方案，这取决于您尝试添加的字体类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:12:44.620

我找到了第四个问题的答案 - “边界框是否应该紧贴”。

似乎尽可能多地拟合矩形会产生更好的结果。

正如@Yaroslav 建议的那样，对于其他 12 点和 300 dpi 就足够了。我认为最好关闭抗锯齿。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-05T10:06:09.010

tesseract 训练的好工具[http://vietocr.sourceforge.net/training.html](http://vietocr.sourceforge.net/training.html)

这是一个很好的工具，因为它有很多优点

1.  字母上的边界框可以通过基于 GUI 的界面进行编辑
2.  自动创建所有需要文件
3.  自动将freq-dawg、word-dawg、user-words（可以是空文件）、Inttemp、Normproto、Pffmtable、Unicharset、DangAmbigs（可以是空文件）、shapetable 等所有文件合并为单个`eng.traineddata`文件。
4.  新的训练数据可以与现有的 tesseract 文件一起使用`end.traineddata`

# javascript - Javascript - 即使购买了 2 或 5 件商品，购物车也只会添加 1 件商品

> ID：13414286
> 
> 赞同：1
> 
> 时间：2012-11-16T10:04:04.377
> 
> 标签：javascript, shopping-cart, cart

我的脚本只有 HTML 和 Javascript，我找不到问题所在。我有一个 html 页面，其中包含 8 种具有相同 html 样式的产品。但是当我点击产品 2 或 8 时，它总是只列出列表中的第一个产品。而且我不知道我需要做什么才能让它工作。（脚本中的一些文本是我的母语瑞典语）

HTML 代码

```
 <div id="Tama">
  <h2>TAMA</h2>
  <img src="images/trummor/tama.jpg">
  <br/>
  <p>TAMA Superstar. </p>
  <p>Pris: 25000 kr</p>
  <hr style="border: 1px solid #000;">
  <form name="order">
   <input type="hidden" id="IDnumber" value="004">
   <input type="hidden" id="pris" value="25000">
   <input type="hidden" id="item" value="Tama Superstar">
   Välj antal: 
   <input type="text" id="antal" value="1" name="antal"  onChange="this.value=CKquantity(this.value)" style="width:30px;" maxlength="1"> | 
   <input type="button" value="Köp" onclick="addElement(this.form);">
  </form>
  <hr style="border: 1px solid #000;">
  <p>
   <a href="#drums" onclick="drums()">Tillbaka till produkter</a>
  </p>
 </div> 
```

Javascript购物车文件

```
// -- CHECK IF ANTAL IS A NUMBER -- //
function CKquantity(checkString) {
  var strNewQuantity = "";

  for ( i = 0; i < checkString.length; i++ ) {
  ch = checkString.substring(i, i+1);
  if ( (ch >= "0" && ch <= "9") || (ch == '.') )
     strNewQuantity += ch;
  }

  if ( strNewQuantity.length < 1 )
  strNewQuantity = "1";

  return(strNewQuantity);
 }

 // -- ADD TO CART -- //
 // still problem - only enter the first item on the list either you click on the
  second or last product

function addElement(thisForm)
 { 
var itemId = document.getElementById('IDnumber').value
var itemName = document.getElementById('item').innerHTML;

var antal = document.getElementById('antal').value;
var pris = document.getElementById('pris').value;

var parent = document.getElementById('cart'); 
var newElement = document.createElement('li'); 
newElement.setAttribute('class','item');

var sum = antal * pris;

newElement.innerHTML = "("+itemId+") "+ antal + " x " + itemName + " - " + pris + " kr, Totalt: " + sum + " kr";
parent.appendChild(newElement);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:11:11.100

JavaScript 是区分大小写的脚本语言，这意味着它的关键字应该以`right-case`. 你应该写`function`而不是`FUNCTION`.

尝试这个：

```
function addElement()
{ 
var itemName = document.getElementById('item').innerHTML;
var antal = document.getElementById('antal').value; // 'value' not 'VALUE'

var parent = document.getElementById('cart'); 
var newElement = document.createElement('li'); 
newElement.setAttribute('class','item'); 
newElement.innerHTML = antal + " x " + itemName; 
parent.appendChild(newElement);
} 
```

# c++ - 为什么“预期的主表达式”看起来不错

> ID：13414288
> 
> 赞同：1
> 
> 时间：2012-11-16T10:04:16.023
> 
> 标签：c++

在我之前的问题之后 [，派生类的受保护成员是未知的](https://stackoverflow.com/questions/13359679/protected-member-is-unknown-for-derived-class)

我无法理解该行的哪一部分是错误的，知道吗？

这里有一个编译错误：

```
template <typename K, typename T>
bool graph<K, T>::is_edge(const K& k1, const K& k2)
{
  if (this->nod.find(k1) == this->nod.end() || this->nod.find(k2) == this->nod.end())
    throw std::string("is_edge: Node does not exist");

  if (k1 < k2) // Below line makes error: expected primary-expression!!!!
    return std::find(this->edg.begin(), this->edg.end(), edge(k1, k2)) != this->edg.end();
  return std::find(this->edg.begin(), this->edg.end(), edge(k2, k1)) != this->edg.end();
} 
```

或者，这句话有什么问题：

```
std::find(this->edg.begin(), this->edg.end(), edge(k1, k2)) != this->edg.end(); 
```

完整的代码在[这里](http://ideone.com/erbzWA)，您可以在其中测试和编译它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:10:05.270

从查看完整的代码，我看到`edge`也是在基类中定义的。您还必须告诉编译器它是一个从属名称，如下所示：

```
if (k1 < k2) // Below line makes error: expected primary-expression!!!!
  return std::find(this->edg.begin(), this->edg.end(), typename _base_graph<K, void*, T>::edge(k1, k2)) != this->edg.end();
return std::find(this->edg.begin(), this->edg.end(), typename _base_graph<K, void*, T>::edge(k2, k1)) != this->edg.end(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:17:25.550

您可以像这样通过派生类解析为基类（至少 LLVM 可以 =）：

```
template <typename K, typename T>
bool graph<K, T>::is_edge(const K& k1, const K& k2)
{
    typedef typename graph::edge edge;

    if (this->nod.find(k1) == this->nod.end() || this->nod.find(k2) == this->nod.end())
        throw std::string("is_edge: Node does not exist");

    if (k1 < k2)
        return std::find(this->edg.begin(), this->edg.end(), edge(k1, k2)) != this->edg.end();
    return std::find(this->edg.begin(), this->edg.end(), edge(k2, k1)) != this->edg.end();
} 
```

# ios - IOS UIScrollView - 同时滚动和点击元素

> ID：13414289
> 
> 赞同：3
> 
> 时间：2012-11-16T10:04:21.027
> 
> 标签：ios, uiscrollview

我`UIScrollView`在滚动视图的内容区域外有一个按钮。用户必须向上滚动并按住一根手指的弹簧效果并用另一根手指按下按钮。问题是按钮上的触摸从未被检测到。

请看下图

![处于初始状态的滚动视图。 橙色区域是scrollView，白色区域是按钮](../Images/302d2c01c5c9eaf0792a2b88bb45b5af.png)

*处于初始状态的滚动视图。橙色区域是scrollView，白色区域是按钮*

![用户现在用一根手指滚动并按住，克服了UIScrollView的弹簧效应，想要点击按钮，目前是不可能的](../Images/31fa246fb4d675bf05e07b11406bb543.png)

*用户现在用一根手指滚动并按住以克服 UIScrollView 的弹簧效应，并希望单击按钮*

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:50:01.443

检查一下： [UIScrollView 在缩放或滚动时阻止所有触摸](https://stackoverflow.com/questions/11061528/uiscrollview-blocks-all-touches-while-zooming-or-scrolling)

确保您在滚动视图上将多点触控设置为“是”，并且没有任何启用了独占触控的子视图。

# java - 周期性字符串

> ID：13414290
> 
> 赞同：2
> 
> 时间：2012-11-16T10:04:22.457
> 
> 标签：java, string

我正在尝试解决这个[字符串操作](http://uva.onlinejudge.org/external/4/455.html)问题，我需要找到给定字符串的最小周期。

* * *

如果一个字符串可以通过连接另一个长度为 k 的字符串的一个或多个重复来形成，则称该字符串具有周期 k。

* * *

例如，字符串“abcabcabcabc”的句号为 3，因为它由字符串“abc”的 4 次重复组成。它也有周期 6（“abcabc”的两次重复）和 12（“abcabcabcabc”的一次重复）。这是我的代码：

* * *

```
public static int getPeriod(String str){
    int len=str.length();   
    boolean flag=false;
    int i;

    for (i=0;i<len;i++){
        String s=str.substring(0,i);
        String tmp=str;

        while(tmp.length()>0){
            if(tmp.startsWith(s)){
                tmp=tmp.substring(0,i);
                flag=true;
            }

            else {
                flag=false;
                continue;
            }
        }

        if (flag==true)
            break;
    }

    return i;
 } 
```

* * *

我`s`通过循环遍历原始字符串来形成一个字符串，一次一个字符。之后，我正在检查是否可以通过连接字符串`s`任意次数来完全耗尽原始字符串。

* * *

错误：

> 该方法始终返回 0。
> 
> 为什么呢 ？

* * *

**编辑：我的算法**

让我们考虑输入字符串`HoHoHo`

```
First step: s=H
        tmp= HoHoHo
        tmp= oHoHo (after substringing tmp)
        'o' isn't the same as s, so we increase i

   Second step:s=Ho
            tmp= HoHoHo
            tmp= HoHo (after substringing tmp)
            tmp= Ho (after substringing tmp)
            tmp= "" (after substringing tmp)

Return the value of i, that is 2. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:26:00.537

while 循环中的代码不正确，它在第一次调用 for 循环期间被调用，`i=0`因此第一次分配给变量的`tmp`变量设置为空字符串，循环退出，你得到 0。标志分配和`continue`中的`else`也不正确。尝试这个：

```
public static int getPeriod(String str) {
    int len = str.length();
    int i;

    for (i = 1; i <= len/2; i++) {
        String period = str.substring(0, i);
        String tmp = str;
        boolean flag = true;

        while (flag && tmp.length() > 0) {
            if (tmp.startsWith(period)) {
                tmp = tmp.substring(i);
            } else {
                flag = false;
            }
        }

        if (flag == true) {
            return i;
        }
    }
    return 0;
} 
```

请注意，`for`循环从开始`1`到结束，`len/2`因为您不想检查零长度周期，并且周期不能超过`n/2`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:18:13.110

在第一次循环迭代中，i == 0，所以 s 是“”（空字符串），第一次循环结束后 tmp 也是“” `while`，所以`tmp`也变成“”并退出所有循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:17:26.253

从 i = 0 开始将始终返回 true，因为 substring(0,0) 将返回 "" 字符串并且 tmp.startsWith("") 始终为 true。

首先你应该从 1 开始 i ，你也应该替换`continue`为`break`，因为`continue`会继续你`while loop`但你想要做的是`continue`而`for loop`不是 while 循环

这是您的代码工作的一个版本：

```
public static int getPeriod(String str){
    int len=str.length();   
    boolean flag=false;
    int i;

    for (i=1;i<len;i++){
        String s=str.substring(0,i);
        String tmp=str;

        while(tmp.length()>0){
            if(tmp.startsWith(s)){
                tmp=tmp.substring(i);
                flag=true;
            }

            else {
                flag=false;
                break; 
                // Replaced continue with break to exit the while loop and pass 
                // to the next value in the for loop
            }
        }

        if (flag==true)
            break;
    }

    return i;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T08:42:14.717

我知道这是一个老问题。可以使用 Knuth 的前缀函数在线性时间内解决该问题。

```
 public static int prefixFunction(final String needle)
    {
        //This code does not include input validation. Validate the input and return appropriate error message

        int[] pf = new int[needle.length()];
        for (int i = 1; i < needle.length(); i++)
        {
            int j = pf[i - 1];
            while (j > 0 && needle.charAt(i) != needle.charAt(j)) j--;
            if (needle.charAt(i) == needle.charAt(j)) ++j;
            pf[i] = j;
        }
        int n = needle.length(), maxValue = pf[n - 1];
        if(maxValue == 0 || n%(n-maxValue) != 0) return -1; //Not periodic 
        return needle.length() - maxValue;
    } 
```

# android - 通过 JCIFS 对远程 sqlite 数据库执行查询

> ID：13414295
> 
> 赞同：2
> 
> 时间：2012-11-16T10:04:34.370
> 
> 标签：android, sqlite, samba, jcifs

对于我的 Android 项目，我必须访问共享 Windows 工作组中某处的 SQLite 数据库。其他（桌面）应用程序也使用此数据库。
现在我设法使用 JCIFS-Library 访问了这个网络，但我不知道如何（如果可能的话）我可以对数据库执行查询。
我当前的解决方案是将数据库复制到我的应用程序，执行所需的查询，然后用我操纵的版本替换共享位置上的文件。这对于我只需要查找某些内容的查询来说已经足够好了，但是添加、删除或更改行几乎不可能正确同步。

有没有办法做到这一点？如果是这样，我应该朝哪个方向看？

# jquery - jQuery，选择一个元素

> ID：13414297
> 
> 赞同：0
> 
> 时间：2012-11-16T10:04:47.800
> 
> 标签：jquery, element

我有这个 html：

```
<div id="para0104" class="entry">
<label for="id0104">d</label>
<div>
<label for="input0104100">
<input id="input0104100" type="radio" name="input0104" value="wxcwxc" />
wxcwxc</label>
<label for="input0104100">
<input id="input0104100" type="radio" name="input0104" value="wc" />
wc</label>
<label for="input0104100">
<input id="input0104100" type="radio" name="input0104" value="az" />
az</label></div>
</div> 
```

我在每个输入类型收音机的循环中，所以 $(this) 将这些输入返回给我。

我怎样才能检索值“d” `<label for="id0104">d</label>`？

当我尝试时`$(this).parent().parent();`我检索`<div>`，当我尝试时`$(this).parent().parent().parent();`我检索`<div id="para0104" class="entry">`

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:07:19.790

您可以使用最接近的 jQuery 并选择标签子项：

```
var txt = $(this).closest('div.entry').children('label').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:06:57.093

尝试使用[最接近的方法](http://api.jquery.com/closest/)

$(this).closest('div.entry').find('label:first').text()

# c# - 将附加信息从 SoapExtension 传递到 WebMethod 实现

> ID：13414306
> 
> 赞同：1
> 
> 时间：2012-11-16T10:05:23.773
> 
> 标签：c#, .net, web-services

由于我们软件的网络架构，我们的应用服务器无法直接连接到客户的网络服务。因此，我们在应用程序服务器和客户服务器之间有一个集成服务器。此集成服务器托管代理 Web 服务。问题是必要的凭据和一些其他附加信息需要从我们的应用程序服务器上的数据库传递到我们在集成服务器上的代理 Web 服务。

我不想污染 API 并传递包含凭据和每个 Web 服务请求的附加信息的对象。此外，我们有多个可以随意关闭的集成服务器，因此我不能只在单独的方法中使用凭据和其他信息初始化 Web 服务，因为后续的 Web 服务请求可能会传递到另一个集成服务器。

有没有办法添加某种 SoapExtension 可用于在每种方法上将信息传递给我的 Web 服务实例？如果没有，除了为每个 Web 方法添加一个参数并使用它来传递信息之外，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:53:21.217

答案其实很明显。

首先，我需要创建一个从 SoapHeader 派生的类。此类用于存储所有凭据和其他附加信息。为了便于解释，我们给这个类起一个名字 CredentialContainer。

在实际的 Web 服务类中，我们需要添加一个新的 CredentialContainer 类型的公共属性。此示例中的属性名为 Container。

最后，我们必须为每个具有 WebMethod 属性的方法添加名为 SoapHeader 的新属性。这处理将 SOAP 消息头中传递的信息传输到我们的 CredentialContainer 实例。因为每个 Web 服务请求都会创建新的 Web 服务实例，所以即使有多个并发 Web 服务请求也不会有风险。

这是示例代码：

```
[WebService]
public class ExampleWebService
{
    public CredentialContainer Container { get; set; }

    [WebMethod]
    [SoapHeader("Container")]
    public void PerformSomething(string value)
    {
        var actualWebServiceClient = new MyWebServiceClient(Container.Url, ...);
        actualWebServiceClient.SendValue(value);
    }
}

public class CredentialContainer : SoapHeader
{
    public string Url { get; set; }
    ...
} 
```

# apache-pig - pig - 当关系（表）为空时，如何使聚合函数（MAX）返回一个常量值？

> ID：13414308
> 
> 赞同：0
> 
> 时间：2012-11-16T10:05:34.710
> 
> 标签：apache-pig

我在整个表上应用聚合函数：

```
 G = group A by all;
 M = foreach G generate MAX(my_column); 
```

这当然会返回整个 A 关系（表）中 my_column 的最大值。

但是，当 A 为空时，结果 M 也为空。有人能想到一个技巧，在这种情况下我如何强制 M 包含一个常数值 0？

（注意：这个问题可能与[如何在 pig 中创建一个小的常量关系（表）有关？](https://stackoverflow.com/questions/13414172/how-to-create-a-small-constant-relationtable-in-pig)但可能每个人都有一个单独的答案）

谢谢，伊多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:39:52.730

使用三元运算符和[IsEmpty](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#IsEmpty)：

```
M = foreach G generate (IsEmpty(A) ? 0 : MAX(my_column)); 
```

# loops - 批处理“While”循环不起作用，但为什么呢？

> ID：13414310
> 
> 赞同：0
> 
> 时间：2012-11-16T10:05:37.843
> 
> 标签：loops, batch-file, while-loop

```
echo off

set /a a=0
:start
if %a% LEQ 21(
echo test
set /a a=%a%+1
goto start
) 
```

我不明白...我只在循环开始时收到语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:14:18.790

您发布的代码不是有效的，在使用这样的 for 循环中`bash script`它是20 次：`batch script``echo test``bash script`

```
#/bin/bash

for i in {1..20}; do
    echo test
done 
```

比它更清晰易读`batch scripts`，欢迎使用`bash`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:25:26.043

除了 Bali C 已经解释的错误之外，您应该注意您的代码存在潜在问题。在此命令`set /a a=%a%+1`中： %a% 值在命令执行时*仅扩展一次。*`if`在这种情况下，您的代码偶然运行，因为该`goto`命令导致在每个循环中再次执行，但是如果您的程序更大更复杂，并且此 set 命令将*在括号内*`if`执行多次，则代码将失败，因为 %a % 将仅扩展一次到变量在输入括号*之前的值。**`a`*

 **在这种情况下解决这个问题的方法很简单：只需去掉百分号，因为`set /a a=a+1`命令可以直接取变量的值。但是，这里涉及的内容更多！有关详细信息，请键入`set /?`并注意“延迟变量扩展”说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:40:23.503

您在 and 之间缺少一个空格`21`，`(`这将使其将循环中的数字与 进行比较`21(`，也破坏了`if`语句，后者是您收到语法错误的原因。

添加一个空格，它工作正常。

```
echo off

set /a a=0
:start
if %a% LEQ 21 (
echo test
set /a a=%a%+1
goto start
) 
```**

# c++ - 可变参数模板的模板模板语法问题

> ID：13414314
> 
> 赞同：7
> 
> 时间：2012-11-16T10:05:50.960
> 
> 标签：c++, templates, c++11, variadic-templates

我对可变参数模板模板有疑问：

```
 template <typename T> class A { };
            template< template <typename> class T> class B { };
            template <template <typename> class T, typename parm> class C { typedef T<parm> type; };
            template <typename... types> class D { };
            template <template <typename...> class T, typename ... parms> class E { typedef T<parms...> type; };

            // How to pass list in list??
            template < template <typename...> class ...T, ???>
            class F
            {
            }; 
```

首先，给模板传一个类型，没问题：

```
 A<int> a; //ok 
```

现在，我想从 B 创建一个实例，但无法传递模板模板参数：

```
 B<A> b; // ok, but no chance to submit <int> inside A! 
```

所以我必须扩展参数列表：

```
 C<A, int> c; // ok, this transport int as parm into A 
```

现在我以标准方式使用可变参数模板：

```
 D<> d1; // ok
            D<int, float, double> d2;   //ok 
```

将参数传递到可变参数部分也很困难：

```
 E<D> e1;    //ok
            E<D, double, float, int> e2; //ok 
```

但是：如果我想要一个列表列表，我找不到可以将参数列表传递给类型列表的语法。我的意图是这样的。而且上面的例子也表明这`B<A<int>> b;`是一个错误！所以下面的例子不能工作:-(

```
 F< D< int, float>, D< int>, D <float, float, float> > f; 
```

我的目标是通过模板专业化展开列表列表。有什么提示吗？

**我理解问题后的解决方案。谢谢！**

现在我可以展开我的可变参数模板模板，如下例所示。简单的问题是，我等待模板类而不是简单类型。有时，解决方案可以如此简单:-)

这就是我现在的工作结果：

```
 template <typename ... > class D;

    template <typename Head, typename... types>
    class D<Head, types...>
    {
       public:
          static void Do() { cout << "AnyType" << endl; D<types...>::Do(); }
    };

    template<>
    class D<>
    {
       public:
          static void Do() { cout << "End of D" << endl; }
    };

    template < typename ...T> class H;

    template < typename Head, typename ...T>
    class H<Head, T...>
    {
       public:
          static void Do()
          {
             cout << "unroll H" << endl;
             cout << "Subtype " << endl;
             Head::Do();
             H<T...>::Do();
          }
    };

    template <>
    class H<>
    {
       public:
          static void Do() { cout << "End of H" << endl; }
    };

    int main()
    {
       H< D<int,int,int>, D<float, double, int> >::Do();
       return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:18:46.607

您可以通过专业化一次解压一个可变参数专业化：

```
template<typename...> struct S;
template<> struct S<> { constexpr static int n = 0; };
template<template<typename...> class T, typename... Us, typename... Vs>
struct S<T<Us...>, Vs...> {
    constexpr static int n = sizeof...(Us) + S<Vs...>::n;
};

template<typename...> struct D {};

#include <iostream>
int main() {
    std::cout << S<D<int, int, int>, D<int, int>, D<int>>::n << '\n'; // prints 6
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:19:30.400

像这样 ：

```
template < template <typename...> class ...T >
class F
{
};
int main()
{
  F< D, D > f;
} 
```

所以，F 期望的是一个可变参数模板类，它接受另一个可变参数模板类作为它的参数。

您不能扩展模板类参数的参数的参数。如果您专门化作为参数传递的模板类，那么您将获得专门化的版本。

这个 ：

```
 F< D< int, float>, D< int>, D <float, float, float> > f; 
```

不起作用，因为 F 需要可变参数模板类，将可变参数模板类作为类型，并且`D< int, float>`不再是模板（它是一个具体类）。

# ruby-on-rails - 调用私有方法输出未定义方法错误

> ID：13414315
> 
> 赞同：3
> 
> 时间：2012-11-16T10:05:50.803
> 
> 标签：ruby-on-rails, ruby

我收到`undefined method 'search_type'`下面的代码。你能告诉我我在这里做错了什么吗？可能与调用私有函数有关，但我找不到问题所在。

```
class Entry < ActiveRecord::Base
  attr_accessible :content, :rank, :title, :url, :user_id

  def self.search(params)
    t, o = search_type(params[:type]),search_order(params[:order])
    scope = self

    scope = scope.where(t) if t
    scope.order(o).page(params[:page]).per_page(20)
  end

  private

  def search_order(order)
    return 'comments_count DESC' if order == '1'
    return 'points DESC' if order == '2'

    'rank DESC'
  end

  def search_type(type)
    return nil unless type.present?

    "entry_type = #{type}"
  end
end 
```

在控制器中，我只有`@entries = Entry.search(params)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T10:16:49.013

这与您的方法的私有性无关，而是因为它`search`是一个类方法，所以当您`search_order`从它内部调用时，它正在寻找一个被调用的类方法，`search_order`但您已经定义`search_order`为实例方法。

让你的 2 个辅助方法类方法，你应该没问题。如果您希望它们成为私有类方法，那么

```
class << self
  def search(...)
  end
  private
  def search_type(...)
  end
  def search_order(...)
  end
end 
```

如果您想知道为什么会`@entries.search(...)`起作用，那是因为我假设@entries 类似于`Entry.where(...)`即作用域，并且您可以在作用域上调用类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:13:56.090

`search`被定义为类方法，所以你应该调用`Entry.search(params)`而不是`@entries.search(params)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:17:14.073

你的方法是一个类方法，你不能在你的类的实例中使用它

# terminal - 相当于 ctrl+k 的 Tmux（将当前 pos -> eol 复制到缓冲区中）

> ID：13414316
> 
> 赞同：1
> 
> 时间：2012-11-16T10:05:52.797
> 
> 标签：terminal, key-bindings, hotkeys, tmux

我已经使用 tmux 一段时间了，非常喜欢内部复制缓冲区。我经常发现自己想在窗格之间复制命令，但还没有真正找到一种简单的方法来做到这一点。

我想要的是一些等价的`Ctrl`+`K`将数据移动到 tmux 缓冲区中。有没有办法用一个键绑定来做到这一点？事实上，我可能可以让它与两个一起工作（首先 do `Ctrl`+ `K`，然后通过 xclip 将剪贴板移动到 tmux 缓冲区的键绑定），但我真的希望能够只用一个热键快速完成它。

编辑：我在 tmux 中将 bash 作为 shell 运行，在 Kubuntu 12.04 中将 evilvte 作为终端。

# asp.net-mvc-3 - MVC 3 razor - 在页面请求之间维护复选框值

> ID：13414317
> 
> 赞同：0
> 
> 时间：2012-11-16T10:05:59.607
> 
> 标签：asp.net-mvc-3, razor, checkbox

我有一个带有复选框的页面，用于过滤 webgrid。

为了通过取消选中复选框来给我的问题提供一些上下文，数据将被过滤以使用 ajax 请求在我的 webgrid 中显示更少的结果。但是，一旦我单击 webgrid 下面的数字以循环浏览网格中的下一组记录，我就会丢失复选框的当前状态。这是因为我再次调用我的 ActionResult 方法，该方法再次加载页面。

那么如何在页面加载之间维护这些复选框值呢？

**这是我的看法**

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model>

@*@model UserManager.Models.vw_UserManager_Model
*@
@{
    ViewBag.Title = "User Manager Dashboard";
}

    @Html.ActionLink("Create New User", "CreateUser")

<div class="webgrid-filter">
    <b>@Html.Label("Select a filter: ")</b>
    <br />
    @Html.Label("Toggle ALF Intelligence users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("Index", "UserManager")')" id="chkFilterAlfIntell" checked="checked" />
     @Html.Label("Toggle ALF Connect users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("Index", "UserManager")')" id="chkFilterAlfConn" checked="checked"/>
     @Html.Label("Toggle BRAD users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("Index", "UserManager")')" id="chkFilterBrad" checked="checked"/>
</div>

<div id="webgrid-wrapper">
    @Html.Partial("~/Views/Partial/_WebGridUserManager.cshtml", Model)
    </div>
<br />

<script type="text/javascript">
    $(document).ready(function () {

        // Disable checkboxs where a user is not active.
        $(".webgrid-wrapper input:not(:checked)").attr("disabled", "disabled");

        // Style tables.
        function jQueryUIStyling() {
            $('input:button, input:submit').button();

            $('.webgrid-wrapper').addClass('ui-grid ui-widget ui-widget-content ui-corner-all');
            $('.webgrid-title').addClass('ui-grid-header ui-widget-header ui-corner-top');
            jQueryTableStyling();
        } // end of jQueryUIStyling

        function jQueryTableStyling() {
            $('.webgrid').addClass('ui-grid-content ui-widget-content');
            $('.webgrid-header').addClass('ui-state-default');
            $('.webgrid-footer').addClass('ui-grid-footer ui-widget-header ui-corner-bottom ui-helper-clearfix');
        } // end of jQueryTableStyling
    });
</script>
<script type="text/javascript">

    function filterGrid(url) {
        var filters = getFilterVals();
//        console.log(filters);

        $.ajax({
            url: url,
            type: "POST",
            async: true,
            dataType: "html",
            data: "alfConnect=" + filters.alfConnect + "&" + "alfIntelligence=" + filters.alfIntelligence + "&" + "brad=" + filters.brad,
            success: function (data) {
                $('#webgrid-wrapper').empty().html(data);
//                $('#webgrid-wrapper').html(data);
            }
        });
    }

    function getFilterVals() {
        filters = new Object();
        if ($('.webgrid-filter #chkFilterAlfIntell').is(':checked')) {
            filters.alfIntelligence = 1;
        }
        else {
            filters.alfIntelligence = 0;
        }

        if ($('.webgrid-filter #chkFilterAlfConn').is(':checked')) {
            filters.alfConnect = 1;
        }
        else {
            filters.alfConnect = 0;
        }

        if ($('.webgrid-filter #chkFilterBrad').is(':checked')) {
            filters.brad = 1;
        }
        else {
            filters.brad = 0;
        }
        return filters;

    }

    function logUserOff(url) {
        var answer = confirm('Are you sure you want to save this data?')
        if (answer) {
//            alert(url + ": " + value);

            $.ajax({
                url: url,
                type: "POST"
//                data: value
            }).done(function () {
                $(this).addClass("done");
            });

            return true;
        }
        else {
            return false;
        }
    };
</script> 
```

在 div 类 webgrid 过滤器中，您可以看到我想要维护其值的复选框。

**我对这个视图的 actionResult**

```
public ActionResult Index()
        {
            try
            {
                var model = new UserManagerTestEntities().vw_UserManager_Model;
                //var model = new UserManager.Models.vw_UserManager_Model();
                return View(model.ToList());

            }
            catch (Exception ex)
            {
                return View(ViewBag);
            }

        } 
```

![在此处输入图像描述](../Images/5864cb7f10fcff506f1ab2ace1af25a6.png)

有人有建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:22:59.463

而不是对控制器执行操作，也许您可​​以：作为复选框调用 javascript 函数的单击操作，该函数最后会进行 ajax 调用。

# c# - 打开 Outlook 新电子邮件窗口，内容已填满

> ID：13414320
> 
> 赞同：1
> 
> 时间：2012-11-16T10:06:03.150
> 
> 标签：c#, asp.net, email, smtp

如何实现电子邮件功能，其中：

当我单击 asp 按钮时，会打开一个新的电子邮件窗口，其中包含已从代码后面添加的所有内容（包括收件人地址、发件人地址、主题和正文）。

但不应自动发送电子邮件。它需要用户点击发送按钮。

目的是，管理员可以在发送给用户之前修改电子邮件内容。

有没有人研究过类似的功能，并且可以帮助或告诉我如何实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:10:32.270

```
Outlook.Application outlookApp    = new Outlook.Application ();
Outlook._MailItem mailItem = (Outlook._MailItem)outlookApp.CreateItem ( Outlook.OlItemType.olMailItem );
mailItem.To  = address;
// body, bcc etc...
mailItem.Display ( true ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T10:28:26.953

我认为您不需要 ASP.NET。您只需要使用正确参数的[mailto 。](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_mailto)

```
Example: 

<a href="mailto:someone@example.com?Subject=Hello%20again&body=This%20is%20body">
Send Mail</a> 
```

这将向someone@example.com 发送电子邮件，主题为“Hello”，正文为“This is body”。您还可以使用 CC 参数添加 CC 电子邮件。

[有关此链接的更多信息](http://www.askdavetaylor.com/can_i_have_a_mailto_link_specify_a_subject_and_body/)

一个可能有帮助的相关问题[如何正确编码 mailto 链接？](https://stackoverflow.com/questions/7561181/how-do-i-properly-encode-a-mailto-link)

# ruby-on-rails - 找不到 gem spree-stock-manager，源不包含任何版本

> ID：13414321
> 
> 赞同：3
> 
> 时间：2012-11-16T10:06:04.023
> 
> 标签：ruby-on-rails, gem, spree

我一直在寻找解决此问题的方法，但找不到。

我正在尝试将 spree-stock-manager 添加到我的香草狂欢测试商店（1.2.0）。

当我运行“捆绑安装”时，我得到

```
Could not find gem 'spree-stock-manager (>= 0) ruby' in git://github.com/olivierbuffon/spree-stock-manager.git (at master). Source does not contain any versions of 'spree-stock-manager (>= 0) ruby' 
```

我尝试将其作为本地 gem 下载并安装到 vendor/gems 中，并在我的 Gemfile 中添加了一个特定版本（来自 Stackoverflow 的建议）。同样的结果只说 (= 1.1.0) 而不是 (>= 0)。

我查看了 spree_stock_manager 的 .gemspec，它说

```
 s.add_dependency 'spree_core', '~> 1.1.0' 
```

所以应该包括 spree_core 1.2.0，对吧？

其他信息：Mac OSX、rvm、rails 3.2.9

有谁知道为什么会这样？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:00:47.970

```
s.add_dependency 'spree_core', '~> 1.1.0' 
```

这表明它需要从 1.1.0 到但不包括 1.2.0 的任何版本的 spree_core。

出于几个原因，我会厌倦使用这个宝石。首先，没有与之相关的测试，这告诉我作者对代码不够关心，没有花时间记录预期的行为。其他人也不容易在没有测试的情况下贡献错误修复或增强功能。其次，gem 没有在 ruby​​gems.org 上注册。虽然不是必需的，但这是标准的 gem 存储库，并告诉我作者无意公开发布它。

# jquery - div出现后一段时间延迟后淡出成功消息

> ID：13414322
> 
> 赞同：0
> 
> 时间：2012-11-16T10:06:08.243
> 
> 标签：jquery

我有一个表单，在提交时我想显示成功消息，一旦出现我想淡出。我正在使用此代码，但不工作，我正在使用实时，因为加载时 div 不存在，成功提交我正在加载那个 div，希望我的话很清楚，任何帮助都会很棒。

```
$(".formsucessmsg").live(function () {
    $(".formsucessmsg").fadeOut("slow");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:52:16.737

你真的应该延迟褪色，让人们有时间阅读信息。

但是您需要做的主要事情是添加一个它绑定到的事件，在这种情况下使用“加载”将使其正常工作。

```
$(".formsucessmsg").live('load',function () {
    $(".formsucessmsg").delay(3000).fadeOut("slow");
}); 
```

但这是对您问题的直接回答。假设您在创建和加载时使用 $.ajax() 或 $.post() 来处理整个事情，您也可以将其添加到“成功”回调中`.formsuccessmsg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:10:11.107

jquery live的格式为：$(selector).live(events, data, handler);

例如：-

```
 $("p").live("click", function(){
       $(this).after("<p>Another paragraph!</p>");
    }); 
```

你应该将它绑定到一个事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:11:09.590

您应该将`$(".formsucessmsg").fadeOut("slow");`代码放在使消息出现回调的函数上，请将您用来实现此功能的代码发送给我们...

# xpages - 如何在 XPage 中动态设置 HTML 标记

> ID：13414326
> 
> 赞同：1
> 
> 时间：2012-11-16T10:06:14.933
> 
> 标签：xpages

在我的标准网页中，我有以下代码，但是如何在 XPage 中执行此操作？

```
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]--> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T10:46:09.480

您可以通过向 UIViewRoot 组件添加属性来做到这一点：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

   <xp:this.attrs>

      <!-- if browser is IE 7 or smaller -->
      <xp:attr name="class" value="no-js lt-ie9 lt-ie8 lt-ie7"
         rendered="#{javascript:context.getUserAgent().isIE(0,7)}">
      </xp:attr>

      <!-- if browser is NOT IE 7 or smaller -->
      <xp:attr name="class" value="no-js lt-ie9 lt-ie8 lt-ie7"
         rendered="#{javascript:!(context.getUserAgent().isIE(0,7))}">
      </xp:attr>

   </xp:this.attrs>

</xp:view> 
```

*lang*属性由 XPage 的当前语言设置计算得出。要在应用程序/服务器范围内执行此操作，您必须将其添加到主题中。

**编辑：**

主题必须如下所示：

```
<control>
   <name>ViewRoot</name>
      <property>
         <name>attrs</name>
            <complex type="xp_attr">
               <property>
                  <name>name</name>
                  <value>class</value>
               </property>
               <property>
                  <name>value</name>
                  <value>#{javascript:
                     if (context.getUserAgent().isIE(0,6)) {
                        return 'no-js lt-ie9 lt-ie8 lt-ie7';
                     }
                     if (context.getUserAgent().isIE(7,7)) {
                        return 'no-js lt-ie9 lt-ie8';
                     }
                     if (context.getUserAgent().isIE(8,8)) {
                        return 'no-js lt-ie9';
                     }
                     return '';
                    }</value>
            </property>
         </complex>
      </property>
</control> 
```

需要空返回，否则主题会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:04:05.583

如果您可以将类放在 <body> 标记中，您可以通过主题集中执行此操作，因此无需在每个页面上重复代码：

```
 <control>
        <name>ViewRoot</name>
        <property>
            <name>styleClass</name>
            <value>#{javascript:if (context.getUserAgent().isIE(0,6)) {
    return 'no-js lt-ie9 lt-ie8 lt-ie7';
} else if (context.getUserAgent().isIE(7,7)) {
    return 'no-js lt-ie9 lt-ie8';
} else if (context.getUserAgent().isIE(8,8)) {
    return 'no-js lt-ie9';
}}</value>
        </property>
    </control> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:28:22.860

[您可以通过此网页http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Browser_compatibility](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Browser_compatibility)上的代码检查哪个 Bowser

if then else 您可以在计算文本中使用，这是一种快速的方式。并在 if 语句中返回正确的 html。您需要将计算文本设置为 HTML

# asp.net-mvc - 如何在asp.net web api中只返回一些字段到json响应

> ID：13414327
> 
> 赞同：1
> 
> 时间：2012-11-16T10:06:28.920
> 
> 标签：asp.net-mvc, asp.net-web-api, json.net

我正在研究 asp.net mvc 4 web api。我正在尝试将记录列表作为 json 响应返回。我的表包含四个字段 field1、field2、field3 和 field4，我写了这样的动作，

```
public List<MyTable> GetRecords()
{
return context.mytable.ToList();
} 
```

我得到了这样的回应，

```
[{"field1":true,"field2":false,"field3":true,"field4":false}] 
```

现在我只需要获取值为 true 的字段，因此上述响应将如下所示，

```
[{"field1":true,"field3":true}] 
```

我尝试过使用 [JsonIgnore] 属性，但它只能在创建模型类时使用，例如，

```
[JsonIgnore]
public string field1{get; set;} 
```

我如何以编程方式在字段上应用 jsonignore，以便我只能返回指定的字段。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:25:27.360

您可以将忽略的字段设为 null 并将其添加到序列化时忽略 null 吗：

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.NullValueHandling = NullValueHandling.Ignore; 
```

# c# - HttpContext.Current.User.Identity.Name 是如何工作的？它有多安全？

> ID：13414338
> 
> 赞同：7
> 
> 时间：2012-11-16T10:07:21.797
> 
> 标签：c#, asp.net, security, iis

我正在使用*HttpContext.Current.User.Identity.Name*来获取登录用户的用户名。我想知道这是如何工作的（使用 NTLM v2 / Kerberos）以及它的安全性如何？用户可以尝试模仿他是其他人吗？

基本上，从安全的角度来看，我应该担心什么，或者我应该如何改进它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T05:26:40.617

如果您正在使用 Windows 身份验证进行身份验证（鉴于您提到 NTLM/Kerberos，您似乎就是这样），那么会发生什么（大致）如下

*   IE 向您的 Web 服务器发送一个没有身份验证标头的请求。
*   IIS 使用 401 响应代码拒绝该请求，并告诉浏览器它想要的身份验证方案（在本例中为 Negotiate，它首先尝试 Kerberos，然后回退到 NTLM）
*   路边握手发生在多个连接上，并且根据 AD 验证票证
*   IIS 将票证向下传递给 ASP.NET，ASP.NET 在构建请求对象的过程中使用票证中的身份详细信息填充分配给请求的线程上的主体。
*   当您访问 HttpContext.User 时，您会看到当前线程的主体。

它是安全的。它与通过文件共享或其他任何使用 kerberos 的方式连接到 Windows 服务器时使用的身份验证类型基本相同。实际上，绝大多数工作都是 IIS 和 Windows 本身完成的，ASP.NET 只是为您提供了一种查询结果的好方法。

# java - 拆分不带分隔符的字符串

> ID：13414341
> 
> 赞同：0
> 
> 时间：2012-11-16T10:07:34.327
> 
> 标签：java, string, split, delimiter

我的控制器接收这个字符串“20120115Z”作为@RequestParam，代表一个日期。

我想将其转换为这种格式：yyyy-MM-dd，所以我会有一个像 2012-01-15 这样的新字符串。

如您所见，没有分隔符，只有“Z”始终作为最后一个字符。

我的方法很明显：

```
String data = 
strData.substring(0, 4) + "-" + 
strData.substring(4, 6) + "-" + 
strData.substring(6, 8); 
```

它有效，但正如您所知，这些“神奇数字”是要避免的。我也尝试使用像“^[^\s]{4}[^\s]{2}[^\s]{2}Z$”这样的正则表达式，但没有成功。

任何的想法？

**更新：最后我已经按照@Brian Agnew 的建议使用 Joda-Time DateTime 类完成了它**

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("YYYYMMdd'T'hhmm'Z'");
String strData = "20120115T0600Z";
DateTime dt = fmt.parseDateTime(strData); 
```

印刷方式：

```
private static void printDateTime(DateTime dt) {
    int year = dt.getYear();
    int month = dt.getMonthOfYear();
    int day = dt.getDayOfMonth();
    int hour = dt.getHourOfDay();
    int minute = dt.getMinuteOfHour();
    int second = dt.getSecondOfMinute();
    int millis = dt.getMillisOfSecond();
    String zone = dt.getZone().toString();
    log.info("fecha: "
            + day + "/" + month + "/" + year + " " + hour + ":" + minute + ":" + second + ":" + millis
            + " " + zone + "\n");
} 
```

输出

```
15/1/2012 6:0:0:0 UTC 
```

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:09:12.607

我可能会使用 Joda-Time [DateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)。

为什么 ？它会检查格式，包括小时/分钟/秒的有效值，并为您返回一个合适的[DateTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)对象，您可以使用它来做什么（包括使用类似的方法重新格式化它）。

你只需给它你想要解析的格式，它就会完成剩下的所有工作。你有一个约会，所以就这样对待它。

# javascript - 将文本添加到 div 之间的 javascript 延迟

> ID：13414345
> 
> 赞同：3
> 
> 时间：2012-11-16T10:07:48.300
> 
> 标签：javascript

我想使用 Javascript 向 html 元素（例如 p 标签）添加文本 15 次，每次添加文本时都必须等待一秒钟。

我尝试了一些方法并没有得到正确的结果。它会在 15 秒后添加所有 15 条文本。

我应该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:49:15.557

这是一种使用 setTimeout 的函数式方法

```
function addText(text,total) {
    setTimeout(function() {
        total--;
        if(total == 0) {
         return true;   
        }
       addText(text,total);        
    },1000);

    document.getElementById('myDiv').innerHTML += text;
} 
```

用法：

```
addText("sometext",15); 
```

工作小提琴：http: [//jsfiddle.net/HNpQp/1/](http://jsfiddle.net/HNpQp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:08:38.853

```
var i = 0;
var element = document.getElementById("mydiv");
var interval = setInterval(function(){
         if(i <= 14){
              element.innerHTML += "sometext";
              }else{
            clearInterval(interval);
           }
        i++;
 },1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:38:30.077

```
var i = 0;    
var element = document.getElementById("mydiv");

var interval = setInterval(function(){
     if(i <= 14){
          element.innerHTML += "sometext";
          }else{
        clearInterval(interval);
       }
    i++;

 },1000); 
```

innerHTML 不是一种方法

# php - 滚动条出现在我的网站内

> ID：13414348
> 
> 赞同：1
> 
> 时间：2012-11-16T10:07:55.093
> 
> 标签：php, javascript, html, css

我的网站有问题。 [http://flightsdubai.org/America/Dubai-to-America.php5](http://flightsdubai.org/America/Dubai-to-America.php5)

我的内容窗口中出现了一个神秘的滚动条。

[http://flightsdubai.org/Asia/Dubai-to-Asia.php5](http://flightsdubai.org/Asia/Dubai-to-Asia.php5)基于相同的模板，但那里没有神秘的滚动条。

以前有人遇到过这个问题吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:15:06.007

只需从中删除`overflow-x:hidden`，`mainContent`然后更改`display:block`为`display:inline-block`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:25:29.837

只需删除并将其`overflow-x: hidden;`提供`overflow: hidden;`给您的此类`.maincontent`

我希望这会奏效…………

**更新的 CSS**

```
.mainContent {
    overflow: hidden;
} 
```

# cordova - 使用 Phonegap 快速开发应用程序

> ID：13414355
> 
> 赞同：1
> 
> 时间：2012-11-16T10:08:10.860
> 
> 标签：cordova

我已经阅读并分析了一些使用 Phonegap 创建应用程序的示例，并且我已经看到，如果我在 Eclipse 中使用模拟器工作，整个开发过程非常缓慢。

我想也许我可以在普通浏览器上开发所有 JavaScript 和模板的东西，在那里快速调试并创建屏幕，然后，当有时间为手机使用一些特殊的东西时，比如相机或数据库，然后将整个项目复制到 assets/www 文件夹并在那里进行最终实现。

你有什么事吗？这可能吗，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:25:35.643

你是对的，例如你可以..

1.  使用 html 5、javascript 和 css 将其创建为 Web 应用程序；
2.  使用 jQuery Mobile 之类的库，您将创建一个单页应用程序（在 index.html 中），并且 jQuery Mobile 将提供许多有用的手机 UI 功能（可以在不同的手机浏览器上工作 - 这意味着 phonegap 可以创建应用程序针对不同的平台）；
3.  在浏览器中测试它；
4.  将 Ripple Emulator 添加到 Chrome 浏览器以测试手机模拟器的外观和功能；
5.  将其作为可在手机上运行的 Web 应用程序进行测试；
6.  按照您的建议，将所有 Web 应用程序文件复制到 www 文件夹中。
7.  现在添加 phoneGap 功能，构建应用程序并开始在真实手机上进行测试；

我发现通过首先将其作为 Web 应用程序进行开发和测试，我可以更快地获得用户反馈并修复错误。这是快速构建手机应用程序的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:32:06.503

[这就是NS Basic/App Studio](http://www.nsbasic.com/app/)背后的想法。它为您提供了一个不错的 IDE，带有拖放设计屏幕、jQuery Mobile 对象模板和常用库。它会生成一个您可以在浏览器中测试的 Web 应用程序，然后有一个 Make App using PhoneGap 选项。

您可以使用 JavaScript 或非常类似于 VB 的 Basic 方言进行编程。

（披露——我为 NS Basic 工作。制作这个产品很有趣！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:30:35.767

对于 Android 开发，您确实需要使用实际设备。模拟器适用于 iOS，但 android 模拟器速度非常慢，并且与实际的最终用户体验不太一样。

不过，您在使用桌面浏览器时走在正确的轨道上 - 刷新网页比运行完整版本要快得多。

我使用 jekyll --auto --server 生成应用程序 HTML，因此桌面预览始终在 http 上，这使得检测 phonegap 相当容易。

下面是我的应用程序启动代码 - 完整的工作代码位于[https://github.com/tqc/ChondricJS/blob/master/src/app.js](https://github.com/tqc/ChondricJS/blob/master/src/app.js)

```
 if (settings.mightBePhoneGap && document.location.protocol == "file:") {
        // file protocol indicates phonegap
        app.isPhonegap = true;
        app.platform = "cordova";
        document.addEventListener("deviceready", function() {
            console.log("appframework deviceready");
            console.log(device.platform);
            app.isSimulator = device.platform.indexOf("Simulator") > 0;
            $(initInternal);
        }

        , false);
    } else {
        // no phonegap - web preview mode
        app.platform = "web"

        $(initInternal);
    } 
```

在您的应用程序代码中，检查 app.platform，这样您就不会尝试从桌面浏览器调用任何插件，因为桌面浏览器不会提供这些插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T12:39:04.670

我所做的只是将我所有的 javascript 文件上传到网络服务器并使用它们。

像这样，我的三星使用来自服务器的 JS 文件，上传这些文件比使用 phoneGap 重建和重新启动应用程序要快得多，只要您在 javascripts 中进行小的更改。

当然，这并不能解决所有问题（尝试不同的手机），但对我来说效果很好。

准备好后不要忘记使用本地副本，否则您的应用程序将始终需要互联网连接；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T08:27:28.233

您可以使用此应用程序来简化您的开发！

[https://play.google.com/store/apps/details?id=org.Bellinux.CordovaFast](https://play.google.com/store/apps/details?id=org.Bellinux.CordovaFast)

# php - 在 MySQL 数据库中插入 alpha、beta 等特殊字符

> ID：13414356
> 
> 赞同：0
> 
> 时间：2012-11-16T10:08:11.287
> 
> 标签：php, mysql, sql

如何通过 php 脚本将**alpha、beta、delta**插入**MySQL数据库？**

我想使用这些特殊字符将我的主题代码保存到我的数据库表中。

示例主题代码`CSC113α`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:11:15.523

从[这个网站：](http://forums.asp.net/t/1434051.aspx/1)

```
Declare @t table( id int, txt nvarchar(20))
Insert Into @t Values (1, N'αβγδ')
Insert Into @t Values (2, nchar(945)+nchar(946)+nchar(947)+nchar(948)) 
```

所以，只要把它变成 PHP，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:23:32.590

将您尝试插入的字段的文本排序规则设置为 UTF8 并尝试再次插入特殊字符。

```
ALTER TABLE `table_name`
MODIFY COLUMN `column_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

# jquery - 与非选择器一起使用时，jQuery on 调用了两次

> ID：13414357
> 
> 赞同：0
> 
> 时间：2012-11-16T10:08:15.600
> 
> 标签：jquery

我正在使用[on](http://api.jquery.com/on/)处理程序将寄存器注册到“body”元素，并在元素不在特定 div 中时触发事件。因此，我使用 not 选择器过滤掉所有这些元素。但是，如果我单击该元素，该事件将被触发两次，而不是一次。

我误解了非选择器吗？

小提琴样本： http: [//fiddle.jshell.net/kHbH9/](http://fiddle.jshell.net/kHbH9/)

示例代码

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Demo</title>
        <script src="jquery.js"></script>
        <script>
            $(function() {
                $('body').on('click', ':not(#toolbar)', function(){
                    $('body').append('clicked<br/>')
                });
            });

        </script>
    </head>
    <body>
        <div id"toolbar">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
        </div>
        <h1>Click here</h1>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:14:07.980

罪魁祸首`id"toolbar"`应该是`id="toolbar"`。您可以使用`stopPrapagation`防止事件冒泡的方法。

```
$(function() {
    $('body').on('click', function() {
         $('body').append('clicked<br/>')
    });
    $('#toolbar').click(function(e) {
        e.stopPropagation()
    })
}); 
```

[http://fiddle.jshell.net/PHkbR/](http://fiddle.jshell.net/PHkbR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:16:16.133

我认为你需要的是：

```
$(function() {
    $('body').on('click', ':not(#toolbar, #toolbar *)', function(){
        $('body').append('clicked'+this.nodeName+"<br/>");
    });
}); 
```

问题是处理程序不是在工具栏元素*上*触发，而是在其所有子元素（即段落）上触发。您需要排除选择器中的所有后代，这可以通过在`:not`子句中添加后代选择器来完成。

如果您修复此问题以及我之前提到的标记错误，它应该可以正常工作。

[http://fiddle.jshell.net/kHbH9/2/](http://fiddle.jshell.net/kHbH9/2/)

# excel - VBA 工作簿地址

> ID：13414362
> 
> 赞同：3
> 
> 时间：2012-11-16T10:08:42.033
> 
> 标签：excel, vba

我正在编写一个宏，工作簿`MACRO`，它必须打开另一个工作簿，让我们调用它`OPEN`。

问题在于工作簿`OPEN`并且`MACRO`在网络上，并且`OPEN`'s 地址取决于运行宏的人。

我的意思是，如果我运行宏，地址是：

```
X:\Destkop\OPEN.xlsm 
```

但是，例如，如果宏由另一个人运行，则地址可能会更改：

```
Y:\Destkop\OPEn.xlsm 
```

所以对于宏来说，打开工作簿`OPEN`并且它不运行代码是不可能的。

要获取地址，我使用以下代码：

```
activeworkbook.fullname 
```

但问题是代码将返回`OPEN`我计算机中的地址而不是“网络”。

有没有办法知道/获取放在网上的任何工作簿的地址？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:15:02.300

不要使用映射的驱动器号，而是使用 UNC 地址。`X:\`并且`Y:\`很可能是同一个地方的不同别名（因为需要更好的术语），也可以用 UNC 形式表示为

```
\\ServerName\SharedFolder\ 
```

所以完整的路径是`\\ServerName\SharedFolder\Desktop\Open.xlsm`

您应该能够在命令中使用它来打开工作簿，只要他们有权访问它，他们将共享映射到哪个驱动器号或者是否完全映射它都将不再重要。

# android - 滑动viewpager时如何防止onViewCreated？

> ID：13414365
> 
> 赞同：0
> 
> 时间：2012-11-16T10:08:50.537
> 
> 标签：android, android-viewpager

在我的 android 应用程序中，我有 3 个 Fragments.A,B,C。当我像 B->C->A 一样滑动时，在片段 A 中调用 onViewCreated 方法，因此应用程序变慢。我想停止调用这个 onViewCreated页面滑动。我们如何才能让 onViewCreated 在创建 Mainactivity 时只被调用一次。在此先感谢..

主要活动=>

```
public class MainActivity extends FragmentActivity {

    private ViewPager mViewPager;

    private ProgressDialog pd;
    Button settings;
    static TextView flashnews;
    public static int stopflag=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Headlines.parse();

        SharedPreferences mlmprf = getSharedPreferences("malayalam", MODE_PRIVATE);
        final SharedPreferences.Editor mlmedit = mlmprf.edit();

        if(mlmprf.getBoolean("enable", true))
     {
         Headlines.headflag="malayalam";
     }
     else
     {
         Headlines.headflag="english";
     }

       flashnews=(TextView)findViewById(R.id.flashs);
       flashnews.setSelected(true);
       flashnews.setEllipsize(TruncateAt.MARQUEE);
       flashnews.setHorizontallyScrolling(true);
       flashnews.setSingleLine(true);
       flashnews.setLines(1);

        ;

                PagerTabStrip pagerTabStrip = (PagerTabStrip) findViewById(R.id.pager_title_strip);
        pagerTabStrip.setDrawFullUnderline(true);
        pagerTabStrip.setTabIndicatorColor(Color.rgb(174, 1, 34));

        // We get UI references
        mViewPager = (ViewPager) findViewById(R.id.viewpager);
        mViewPager.setAdapter(new MyAdapter(this));
    }
 private class MyAdapter extends FragmentPagerAdapter{
 private Context mContext;
        private String[] frags = {A.class.getName(), B.class.getName(),C.class.getName()};

        public MyAdapter(FragmentActivity activity) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
        }

        @Override
        public Fragment getItem(int pos) {
            return Fragment.instantiate(mContext, frags[pos]);
        }

        @Override
        public int getCount() {
            return frags.length;
        }

        @Override
        public CharSequence getPageTitle(int pos) {

            if(pos==0)
            return "A";

            if(pos==1)
            return "B";

            if(pos==2)
            return "C";

            else
            return null;

        }

    }
} 
```

片段 A=>

```
 public class A extends Fragment{

    public static String urls;
    // XML node keys
    static final String KEY_HEAD = "item"; // parent node
    //static final String KEY_TITLE = "title";
    static final String KEY_DATE = "pubDate";
    public static String headflag="english";
    public static String[] Title;
    public static String[] Description;
    public static String[] Tit;
    public static String[] Tit2;
    public static String[] Desc;
    public static String[] Desc2;
    public static String[] image;
    int f=0;
    GridView list;
    HeadlinesAdapter adapter;
    private TextView mMessageView;
    private Button mClearButton;
    public ArrayList<HashMap<String, String>> newsList; 

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflating layout
        View v = inflater.inflate(R.layout.headlines_fragment, container, false);
        // We obtain layout references

        return v;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        // We set clear listener

        if(Headlines.headflag=="malayalam")
        {
            urls="http://www.abc.com/rssfeeds/19_18_17_25/1/rss.xml";

        }

        if(Headlines.headflag=="english")
        {
            urls="http://www.abc.com/en/rssfeeds/1_2_3_5/latest/rss.xml";

        }

        parse();
        populate_listview();    
    }

     public void populate_listview()
     {

        newsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(urls); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_HEAD);
        // looping through all song nodes <song>
        NodeList itemLst = doc.getElementsByTagName("item");
        String MarqueeStr="";

        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            newsList.add(map);
            //MarqueeStr = MarqueeStr +" *** "+ Title[i];

     }

        list=(GridView)getActivity().findViewById(R.id.grid);

        // Getting adapter by passing xml data ArrayList
                 adapter=new HeadlinesAdapter(getActivity(), newsList);        
                 list.setAdapter(adapter);

    }

  public void parse()
     {

            URL url;

            try {

                url = new URL(urls);
                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                if((conn.getResponseCode() == HttpURLConnection.HTTP_OK)){
                      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                      DocumentBuilder db = dbf.newDocumentBuilder();
                      Document doc;
                      doc = db.parse(url.openStream());
                      doc.getDocumentElement().normalize();

                      NodeList itemLst = doc.getElementsByTagName("item");
                      Description = new String[itemLst.getLength()];//........
                      Title = new String[itemLst.getLength()];
                      Tit=new String[itemLst.getLength()];
                      Tit2=new String[itemLst.getLength()];
                      Desc=new String[itemLst.getLength()];
                      Desc2=new String[itemLst.getLength()];
                      image= new String[itemLst.getLength()];

                      for(int i=0; i < itemLst.getLength(); i++){

                            Node item = itemLst.item(i);
                            if(item.getNodeType() == Node.ELEMENT_NODE){
                                  Element ielem = (Element)item;
                                  NodeList title = ielem.getElementsByTagName("title");
                                  NodeList date = ielem.getElementsByTagName("pubDate");
                                  NodeList description = ielem.getElementsByTagName("description");
                                  Tit[i]= title.item(0).getChildNodes().item(0).getNodeValue();
                                  Desc[i]= description.item(0).getChildNodes().item(0).getNodeValue();
                                  Tit2[i]=Translate.title(Tit[i]);
                                  Desc2[i]=Translate.description(Desc[i]);
                                  if(Headlines.headflag=="malayalam")
                                    {
                                      Desc2[i]=Desc2[i].replace("read more","IqSpXÂ");
                                    }
                                  Title[i] =Tit2[i];
                                  if (Desc2[i].contains("<img ")){
                                      String img  = Desc2[i].substring(Desc2[i].indexOf("<img "));
                                      String cleanUp = img.substring(0, img.indexOf(">")+1);
                                      img = img.substring(img.indexOf("src=") + 5);
                                      int indexOf = img.indexOf("'");
                                      if (indexOf==-1){
                                          indexOf = img.indexOf("\"");
                                        }
                                      img = img.substring(0, indexOf);

                                //setImgLink(img);
                                    if(Headlines.headflag=="malayalam")
                                    {
                                        String img2=img.replace("files","files/imagecache/android_320");
                                        Description[i]=Desc2[i].replace(img,img2);
                                        image[i]=img2;
                                    }

                                else
                                {
                                    String img2=img.replace("files","files/imagecache/android_1_img");
                                    Description[i]=Desc2[i].replace(img,img2);
                                    image[i]=img2;
                                }
                                  }
                                else
                                {
                                    Description[i] =Desc2[i];
                                }

                            }

                          }

                        }
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (DOMException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ParserConfigurationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SAXException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
     }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:15:48.913

我通过设置 viewPager.setOffscreenPageLimit(3) 自己解决了这个问题...

# python - Python：多级嵌套列表

> ID：13414366
> 
> 赞同：1
> 
> 时间：2012-11-16T10:08:53.913
> 
> 标签：python, algorithm, list, loops, python-2.7

> **可能重复：**
> [在 Python 中展平（不规则）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

**示例 1：**

假设我有一个列表：[[1,2]，[3,4]]。我可以使用两个 for 循环来打印：1、2、3、4。

**示例 2：**

所以，现在让我们假设我得到了一个输出，但我不知道 list1 中有多少嵌套列表：

list1 = [1, [1, 2, [3, 5, 6,[ .. ], ..., ] ] ] ] ]

所以，我的问题是如何以与第一个示例相同的格式打印出每个单独的数字。我现在正在处理一些结果，它给了我嵌套列表，但是函数的不同输入会给我不同数量的嵌套列表。

我能想到的就是这样做，但是我不知道在isinstance部分之后要做什么：

```
c = 0
for i in list1:
   while c < len(list1):
         if isinstance(i, list):

         else:
              print i
         c += 1 
```

谢谢

**第一次编辑**

如果还有一种方法可以将所有嵌套列表解构为一个对我也有用的列表，但我很想知道这两个问题的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:33:34.323

[itertools 文档](http://docs.python.org/2/library/itertools.html)有一些很好的迭代列表等示例，因此当面对这样的任务时，它总是一个很好的起点。

我建议使用生成器，它可以避免创建多个级别的列表：

```
def flatten_all(iterable):
    for elem in iterable:
        if not isinstance(elem, list):
            yield elem
        else:
            for x in flatten_all(elem):
                yield x
            # in Python 3.3 just: yield from flatten_all(elem) 
```

应用：

```
for x in flatten_all([1, [2, [3]]]):
    print(x)

# or if you need a list:
my_lst = list(flatten_all([1, [2, [3]]])
assert my_lst == [1, 2, 3] 
```

**编辑：非递归线性版本**

```
def flatten_all(iterable):
    stack = [iter(iterable)]
    while stack:
        try:
            elem  = stack[-1].next()
            if not isinstance(elem, list):
                yield elem
            else:
                stack.append(iter(elem))
        except StopIteration:
            stack.pop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:26:05.283

您可以尝试这样的事情（代码使您的列表平放在一行中，以便您稍后打印）：

```
def make_flat(arr):
    res = []
    for l in arr:
        if isinstance(l, list):# or isinstance(l, collections.Iterable)
            res.extend(make_flat(l)) 
        else:
            res.append(l)
    return res

flat = make_flat(list1)
for x in flat:
    print x 
```

或者：

```
def make_flat(arr):
    return sum(map(lambda a: make_flat(a) if isinstance(a,(list)) else [a],arr),[]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:27:38.323

这是一个使用递归的例子：

```
list1 = [1, [2,3,4], [5, 6, 7, [8, 9]]]

def print_list(l):
    for e in l:
        if type(e) == list:
            print_list(e)
        else:
            print e

print_list(list1) 
```

# actionscript-3 - UIComponent 似乎设置了“填充/边距”（Flex 3 到 Flex 4 迁移问题？）

> ID：13414367
> 
> 赞同：0
> 
> 时间：2012-11-16T10:08:55.637
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, offset

我有一个 Flex 应用程序，它有一个 UIComponent，它包含一个 Bitmap 对象。在 Flex 3 中，一切都很好。在 Flex 4 中，相同的代码会导致 UIComponent 中的子元素发生偏移，这是我无法理解的。

这是我的 .html 文件的对象标记：

```
 <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="320" height="480" id="MyId">
          <param name="allowScriptAccess" value="sameDomain" />
          <param name="allowFullScreen" value="false" />
          <param name="movie" value="MyFlexApp.swf" />
          <param name="quality" value="high" />
          <param name="bgcolor" value="#ffff00" />
          <embed allowScriptAccess="sameDomain" allowFullScreen="false" src="MyFlexApp.swf" quality="high" bgcolor="#ffff00" width="320" height="480" name="MyAppName" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />
        </object> 
```

这是我的 .mxml 文件：

```
<?xml version="1.0"?>
<!-- usingas/UsingCDATA.mxml -->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" applicationComplete="init()" width="320" height="480" backgroundColor="#FF0000" styleName="plain">
  <mx:Script>
    <![CDATA[
    import mx.core.UIComponent;
    import MyClass;
    public function init() : void
    {
            var s:UIComponent = new MyClass();
            addChild( s );
    }
    ]]>
  </mx:Script>
</mx:Application> 
```

这是 MyClass.as：

```
public class MyClass extends UIComponent
{
    ... <snip> ...

    screenBitmap = new Bitmap( screenBitmapData );
    addChildAt( screenBitmap, 0 );
    // screenBitmap.x = -160;
    // screenBitmap.y = -24;
    var t:TextField = new TextField();
    t.type = TextFieldType.INPUT;
    t.border = true;
    t.text = "hello";
    addChildAt( t, 1 );

    ... <snip> ...
} 
```

请注意，该标签具有黄色背景色。我看到黄色背景正确填充了 .swf 的 320x480 大小。请注意，应用程序的背景颜色为红色。同样，在闪烁黄色之后，我看到红色背景正确填充了 .swf 的 320x480 大小，所以我相信应用程序本身没有偏移。

但我看到的是 screenBitmap 对象在显示器内出现偏移。它太低了 24 像素，向右 160 像素（因此位图的左边缘正好从应用程序显示矩形的中间开始）。我不明白这些偏移量来自哪里。特别是，我不知道 MyClass 对象是否在 Application 对象内偏移（即，好像 Application 对象具有 160 的“左填充”和 24 的“顶部填充”），或者它是否是 MyClass 对象具有这些填充，然后应用于*其*子级（位图和 TextField）。（我在这里使用“填充”来表示 Flex 正在以某种方式执行的 .css 填充之类的东西，尽管我在 Flex 文档中没有看到提到这样的概念。）

通过取消注释这两行

```
 // screenBitmap.x = -160;
    // screenBitmap.y = -24; 
```

我可以让位图“正确”显示，但这不正确，因为位图上的鼠标事件随后被错误地偏移。我当然也可以补偿鼠标事件处理的变化，但我想了解为什么会发生这种变化，而不是盲目地补偿它。

请注意，我还包括一个 TextField 对象：

```
 var t:TextField = new TextField();
    t.type = TextFieldType.INPUT;
    t.border = true;
    t.text = "hello";
    addChildAt( t, 1 ); 
```

我这样做只是为了确保我的位图对象没有什么奇怪的东西导致了这种转变。文本对象得到相同的偏移，其左上角在 160, 24 在整个 .swf 矩形内。

正如我所说，我没有在 Flex 3 中获得这些偏移量。我使用完全相同的代码，现在只是使用 Flex 4 SDK 进行编译。

知道偏移量来自哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:43:55.237

非常感谢 The_asMan 和 Sunil D。以下是修正后的 .mxml 文件，其中不再存在偏移问题：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:s="library://ns.adobe.com/flex/spark" applicationComplete="init()" width="320" height="480" backgroundColor="#FF0000">
  <fx:Script>
    import mx.core.UIComponent;
    import MyClass;
    public function init() : void
    {
            var s:UIComponent = new MyClass();
            addChild( s );
    }
    ]]>
  </fx:Script>
</s:Application> 
```

# r - Rcpp 和 Netbeans/Eclipse 的代码自动完成问题

> ID：13414372
> 
> 赞同：1
> 
> 时间：2012-11-16T10:09:15.170
> 
> 标签：r, netbeans, rcpp

我正在尝试使用 Netbeans 编写一些 Rcpp 代码，主要使用 IDE 进行方法查找/代码完成。我已经将项目设置为包含 R/include 和 R/library/Rcpp/include 文件夹，这似乎 - 几乎 - 可行。例如，如果我写

```
#include <Rcpp.h>

Rcpp::CharacterVector x;
x. // hit CTRL+SPACE to pop-up methods available to x, no hits 
```

但是，如果我们看一下 CharacterVector 是什么，我们会看到：

```
typedef Vector<STRSXP> CharacterVector 
```

它在 Rcpp/include/vector/instanstiation.h 中定义，所以它应该（？）只是继承 Rcpp::Vector 类可用的所有方法。等效地，如果我写

```
Rcpp::Vector<STRSXP> x;
x. // hit CTRL+SPACE, and I do see a bunch of methods available 
```

它确实有效。此外，如果我只是将 typedef 声明复制到我当前的源文件中，那么自动完成确实有效。

所以，我想我的问题是——为什么 Netbeans 很难找到 Rcpp::CharacterVector 可用的方法，而不是 Rcpp::Vector？

最终，这不是一个大问题，但我很好奇......

# sql - 对于每个 $_POST 变量一个 mysql_real_escape_string？

> ID：13414374
> 
> 赞同：0
> 
> 时间：2012-11-16T10:09:15.840
> 
> 标签：sql, post, foreach, code-injection, mysql-real-escape-string

对于我的学校作业，我必须创建一个使用,并防止 SQL 和 HTML 注入的**函数。**`trim()``htmlspecialchars()``mysql_real_escape_string()`

我已经尝试了一段时间，但我无法让它工作。我试过一个`foreach`循环和一个`extract`函数。我一定是做错了什么，或者错过了什么。

到目前为止，我得到了这个：（只是为了看看变量是否正在被处理）

`foreach ($_Post as $Key => $Value) { $$Key = $Value; echo $$Key."<br>"; }`

但它不会返回任何东西。

我可以`trim`单独对每个变量使用 etc，但必须有一个更简单的方法。

我有`$_POST`变量“voorletters”、“tussenvoegsel”、“naam”、“adres”、“huisnummer”（数字）、“telefoon”（数字）、“邮政编码”、“woonplaats”、“geslacht”、“电子邮件” ' 和 'wachtwoord'（密码）。

请帮助我:(！我是关于php的初学者，所以请尝试彻底解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:21:30.217

那这个呢

```
foreach($_POST as $key => $value) {
    echo 'Current value in $_POST["' . $key . '"] is : ' . $value . '<br>';
    $_POST[$key] = your_filter($value);
} 
```

`your_filter()`您的函数调用 trim、htmlspecialchars 等在哪里：

```
function your_filter($value) {
    $newVal = trim($value);
    $newVal = htmlspecialchars($newVal);
    $newVal = mysql_real_escape_string($newVal);
    return $newVal;
} 
```

也要注意变量名`$_POST`不是`$_Post`. 你不需要在这里使用 $$，你在循环中有键名，`$key`你可以访问/替换数组中的值`$_POST[$key]`

编辑：添加回声以打印当前值

EDIT2：添加了一个`your_filter()`函数示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:32:27.093

```
// $_POST = array('voorletters' => '<<', 'tussenvoegsel' => '>>', 'naam' => '<<');

foreach($_POST as &$val) //pass any post value by reference
   $val = mysql_real_escape_string(htmlspecialchars(trim($val)));

extract($_POST);
echo $voorletters;
echo $tussenvoegsel;
echo $naam; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T10:20:51.147

```
foreach ($_POST as $Key => $Value) { 

 echo yourFunctionName($Value)."<br/>"; 

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-02T12:33:22.527

> 尝试这个...

```
function real_escape_and_trim($value)
{
    $value = trim($value);
    $value = mysql_real_escape_string($value);
    return $value;
}

foreach($_POST as $key => $value)
{
    $_POST[$key] = real_escape_and_trim($value);
}

$field_name = $_POST['field_name']; 
```

# css - 字体 Georgia 从不同的高度开始

> ID：13414376
> 
> 赞同：2
> 
> 时间：2012-11-16T10:09:17.210
> 
> 标签：css, fonts

我有适合我想要的 websafe 字体 georgia。

我遇到的唯一问题是字体底部没有对齐。

[http://jsfiddle.net/JW7F8/](http://jsfiddle.net/JW7F8/)

```
<style>
.georgia {
    font-family:georgia;
    font-size:1.9em;
}​
</style>
<span class="georgia">
    1234567890
</span>
​ 
```

正如您在小提琴中看到的那样，1、2、6 和 8 的起点都比其他的高一点。

**问题：** 我怎样才能渲染格鲁吉亚，这一切都从一条线上开始，同时仍然能够使用*XX* **em**设置站点。

我不介意：

*   拆分字符串
*   设置不同的类

我只需要一个可行的解决方案，它仍然允许动态调整大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:13:19.133

这只是字体的样式，从技术上讲，所有字体字符都排成一行（如果突出显示文本，它将显示字体字符的高度）。

即使通过拆分字体，您也无法始终如一地排列 Georgia 字体，因为偏移量必须根据字体大小而变化。使用 's 可以做到这一点`em`，但至少会很麻烦，并且很难跨浏览器始终如一地工作。

此外，更改字体位置会导致[字距调整](http://en.wikipedia.org/wiki/Kerning)问题。

* * *

然而，Georgia 还受到了另一种类似的字体的影响，它确实是：

> Georgia 融合了 Clarendon 风格字体的影响

[http://en.wikipedia.org/wiki/Clarendon_(字体)](http://en.wikipedia.org/wiki/Clarendon_%28typeface%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:37:20.530

Georgia 字体有老式数字，即高度不同的数字，也可能延伸到基线以下。

人们在网页上使用的大多数字体都有现代风格的“衬里”数字，所有数字的高度相同，与大写字母大致相同。

一些字体包含两者。最近，可以在 CSS 中的这些替代方案之间进行选择，在几个浏览器中，使用`font-feature-settings`. 但乔治亚州只有老式数字。

如果您认为这样的基本功能不适合您的文本，最好选择不同的字体。

但是，在 WebKit 浏览器（Chrome、Safari）上，使用`@font-face`(for local fonts, not embedded) 和`unicode-range`，您可以指定从另一种字体中获取数字。这在技术上很简单，但并不是一个好主意：

```
@font-face {
  font-family: Georgiax;
  src: local("Times New Roman");
  unicode-range: U+30-39;
}
@font-face {
  font-family: Georgiax;
  src: local("Georgia");
  unicode-range: U+0-29, U+40-10FFFF;
} 
```

然后你会像使用`font-family: Georgiax`真正的字体系列一样使用它。但如前所述，除了 WebKit 浏览器之外，这种技术不受支持，并且从另一种字体中获取数字意味着印刷错误。

PS Georgia 不是网络安全的。没有字体。例如，您不会在 Android 上找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:34:21.513

对于网络安全解决方案，我最终实现了这个：http: **//jsfiddle.net/JW7F8/2/**

```
<style>
.georgia {
    font-family:georgia;
    font-size:1.9em;
}
.subitx {
        position:relative;
        top:0.18em;
        }
.subity {
        position:relative;
        top:0.13em;
        font-size:1.2em
        }​
</style>
<span class="georgia">
    <span class="subity">1</span><span class="subity">2</span>345<span class="subitx">6</span>7<span class="subitx">8</span>9<span class="subity">0</span>
</span> 
```

唯一的遗憾是放大的字体比其他字体更粗。

我真的希望有更多可以跨浏览器使用的网络安全字体...*叹息* ​</p>

# java - 二叉树中节点的路径

> ID：13414377
> 
> 赞同：0
> 
> 时间：2012-11-16T10:09:22.137
> 
> 标签：java, recursion, binary-tree

我试图递归地显示到二叉树中给定节点的路径，该方法将以下列方式输出所需的路径：“左、右、左”。这是我到目前为止所拥有的：

```
public static void pathToNode(BTNode p, char target, String res){
    if(p.data == target){
        res = res + p.data;
        System.out.println(res);
        return;
    }else if(res != null){
        if(res.charAt(0) == 'S'){
        res = res + p.data;
        }
    }else{
        pathToNode(p.leftLink, target, res);
        pathToNode(p.leftLink, target, res);
    }

} 
```

此代码旨在像这样打印出路径：“ABCD”。完成此操作后，我打算根据每个节点遍历的正确选项使该方法从左到右打印出来。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:23:21.220

你的代码对我来说有点不清楚。'S' 应该是根有效载荷吗？此外，您真的应该尝试使用更有说服力的变量名称。

```
public static String pathToNode(BTNode p, char target) {
    // termination rules
    if (p.data == target) {
       // success
       return p.data;       
    }
    // failure: p is not the target AND is a leaf.
    if (p.leftLink == null && p.rightLink == null) return null;

    // recursion: if p is in the subtree, this will find it.
    return (pathToNode(p.leftLink, target) == null) ? (p.data + pathToNode(p.rightLink), target) : (p.data + pathToNode(p.leftLink, target));

} 
```

编辑：`null`如果目标不在树中，这当然可能会返回。另外，我忘了实际打印路径。现在在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:17:49.143

我认为您正在尝试从根目录中找到路径。另外我假设这棵树只有一条到达目标的路径。我的意思是同一个元素不能在树的不同位置。

此代码将起作用，

```
public static void pathToNode(BTNode p, char target, String res){
    if(p.data == target){
        res += p.data;
        System.out.println(res);
        return;
    }
    else{
        if(res==null){
           res="";
        }
        res += p.data;
        pathToNode(p.leftLink, target, res);
        pathToNode(p.rightLink, target, res);
    }
} 
```

但这将是非常低效且容易消耗内存的解决方案。请阅读有关树遍历的更多信息以获得一个好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:17:59.617

当您在第一个 if 子句中找到您正在寻找的目标时，您正在打印结果。或者，您应该同时尝试树的左分支和右分支，就像您（几乎，您正在做左两个）在最后一个子句中所做的那样。

我不确定第二个子句应该做什么，但删除它并在递归调用中添加`p.data`应该`res`确保“当前”步骤保存在`res`变量中：

```
if (p.data == target) {
    res = res + p.data;
    System.out.println(res);
} else {
    pathToNode(p.leftLink, target, res + p.data);
    pathToNode(p.rightLink, target, res + p.data);
} 
```

这样，您将使用递归算法常见的传统基本案例 + 递归案例。

# jquery - 在嵌套数组中附加 JSON 值

> ID：13414383
> 
> 赞同：0
> 
> 时间：2012-11-16T10:09:38.610
> 
> 标签：jquery, html, json

目前我正在使用以下代码来显示 JSON 数据文件的部分内容：

```
$.getJSON( 
    "json.json",
    function(data) {
        $.each(data.events, function() {
            $('#listings').append("<p>" + this['eventname'] + "</p><p>" + this['eventurl'] + "</p><p>" + this['dates[startdate]'] + "</p>");
        });
    }
); 
```

这是我从中检索数据的本地缓存和创建的 JSON 文件的一部分。

```
"events": [
    {
        "eventid": "4419605",
        "facebookeventid": "",
        "eventname": "Mervi"
        "dates": {
            "startdate": "20120529010000",
            "enddate": "20121231235500",
            "timezone": "EDT"
        },
        "venue": {
            "venueid": "210795",
            "name": "On
            "venueimages": {
                "large": "",
                "small": ""
            }
        },
        "eventimages": [""],
        "prices": {
            "pricelow": "$195.00",
            "pricehigh": "$195.00",
            "pricedisplay": "$195.00"
        },
        "attractionList": [
            {
                "sequence": "0",
                "artist": "",
                "artistid": "7014411",
                "billing": "1.00",
                "genre": "Seminar/Lecture",
                "links": "",
                "media": ""
            },
            {
                "sequence": "1",
                "artist": "Families.",
                "artistid": "7014441",
                "billing": "0.75",
                "links": "",
                "media": ""
            },
            {
                "sequence": "2",
                "artist": "Se",
                "artistid": "7014451",
                "billing": "0.75",
                "links": "",
                "media": ""
            }
        ]
    }, 
```

我可以访问`eventname`和以下键条目以在 html 中生成值（这是我所追求的）但是当我想显示该`venueid`值时，这是在`venue`数组内部的哪个内部。并且`eventimages`它有一个空数组，它也在主数组内。在这里显示数据的正确语法是什么？我是否使用正确的 JSON/AJAX 方法来显示像这样的复杂 JSON 结构？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:22:18.490

鉴于您修复了当前 JSON 对象中损坏的一些内容，您可以通过`this.venue.venueid`（就像您可以使用`this.eventname`而不是`this['eventname']`）访问这些属性。

如果您出于某种原因更喜欢字符串表示法，则等价的将是`this['venue']['venueid']`，但我在这里看不到有用的情况。

您的 JSON 对象中的问题是

*   事件名称后缺少逗号
*   场地名称后未终止的字符串和缺少逗号

# django - Django Admin：如何同时保存页面和拆分标签？

> ID：13414384
> 
> 赞同：0
> 
> 时间：2012-11-16T10:09:40.283
> 
> 标签：django, django-admin

我正在尝试保存一个`Page`实例并同时拆分保存它的标签。

这是我的代码：

```
class Page(models.Model):
    title = models.CharField(max_length=255, unique=True)
    slug = models.SlugField(max_length=255, default='', blank=True)
    content = tinymce_models.HTMLField(blank=True)
    categories = models.ManyToManyField(PageCategory, related_name='page_categories', null=True, blank=True)
    tags = models.CharField(max_length=512, default='')

    def __unicode__(self):
        return self.title

    def save(self, *args, **kwargs):
        #save first
        self.slug = slugify(unidecode(self.title))
        obj = super(Page, self).save(*args, **kwargs) #save first
        if obj.id and obj.tags:  #split and assign tags to this page <--ERROR--
            tags = obj.tags.split(',')
            for t in tags:
                atag = t.strip(' ')
                tag, saved = Tag.objects.get_or_create(name=atag)
                obj.page_tags.add(tag)

class Tag(models.Model):
    name = models.CharField(max_length=255, unique=True)
    pages = models.ManyToManyField(Page, related_name='page_tags') 
```

问题是我总是收到这个错误： `'NoneType' object has no attribute 'id'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:09:28.397

你应该`obj`改变`self`：

```
self.page_tags.add(tag) 
```

因为[模型 save() 方法不返回任何数据](https://github.com/django/django/blob/master/django/db/models/base.py)。

# php - 适用于 PHP 5.3.13 的 SQL Server 驱动程序

> ID：13414391
> 
> 赞同：0
> 
> 时间：2012-11-16T10:10:13.057
> 
> 标签：php, sql-server, wamp

我一直在尝试为我的 wamp 服务器 32 位（php ver 5.3.13）安装 SQL Server 驱动程序，我从 Microsoft 下载站点下载了驱动程序，我将它们复制到 ext 文件夹并更改了 php.ini 文件，但我仍然得到错误。您能否给我一份完整的安装手册，我真的需要解决这个问题并开始为此开发一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:31:58.090

你能不使用 PDO 这会解决你的问题吗？[http://www.php.net/manual/en/ref.pdo-dblib.php](http://www.php.net/manual/en/ref.pdo-dblib.php)

编辑：

下载 PHP 的 SQL 驱动程序 - [http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx](http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx)和[http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

# javascript - 如何从网页获取 DataDictionary 的值到 android

> ID：13414393
> 
> 赞同：0
> 
> 时间：2012-11-16T10:10:15.983
> 
> 标签：javascript, android, data-dictionary

我想在 Android 应用程序中解析来自 Html 页面的数据。我发送数据字典值如下

```
var fields = {"data1" : "1","data2" : "2"}; 
```

如何在 android 应用程序中获取 data1 和 data2 值？

**注意：如果我将此字段传递给 MainActivity，我会得到“对象对象”，并且想象 data1 和 data2，只是我想提取列副。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:22:04.640

```
 var fields = {"data1" : "1","data2" : "2"};

  try {
    JSONObject json= new JSONObject(fields);

    String data1 =  json.getString("data1");
    String data2 =  json.getString("data2");
  }
  catch (JSONException e) {
    e.printStackTrace();
  } 
```

# javascript - 如何从打字稿中的 Ajax 调用的函数内部调用类内部的函数？

> ID：13414397
> 
> 赞同：1
> 
> 时间：2012-11-16T10:10:27.410
> 
> 标签：javascript, typescript

我有以下打字稿代码：

```
 export class Modal {

        private link: Link;

        constructor (public $link: JQuery) {
            this.link = new Link($link);
            this.ajaxGet(this.link);
        }

        ajaxGet(link: Link) {
             $.ajax(link.Href,
            {
                context: {
                    link: link
                },
                dataType: 'html'
            })
                .done(this.ajaxDone)
                .fail(this.ajaxFail);
        }

        ajaxDone(data: string, textStatus: string, jqXHR: JQueryXHR) {
            var link = <Link> this.link;
            link.Modal.Content = data;
            this.create(link);
        }

        create(link: Link) {
           var a = link;
        }

    } 
```

这一直有效到在 ajaxDone 中我有一个 this.create(link)。问题是“this”不再是 Modal 并且它没有创建功能。此时如何让它调用 Modal.Create() 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:34:20.423

我认为您的 Ajax 调用中的上下文是错误的 - 上下文是......

> 该对象将成为所有 Ajax 相关回调的上下文

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax(this.link.Href, {
    context: this,
    dataType: 'html'
})
.done(this.ajaxDone)
.fail(this.ajaxFail); 
```

# .htaccess - 使文件无法通过 URL 访问

> ID：13414399
> 
> 赞同：0
> 
> 时间：2012-11-16T10:10:31.837
> 
> 标签：.htaccess

如何通过 .htaccess 文件重定向，只有 index.html 可以通过 URL 访问。我已经得到了这个：

```
RewriteEngine on
RewriteBase /
Options +FollowSymlinks

RewriteRule ^/?login/?$ /php/login.php [NC,R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.html [L,QSA] 
```

如果有人输入例如“www.mypage.com/skd/lasnd”，它会正常工作，但如果有人输入网络服务器上存在的文件，例如“www.mypage.com/php/login.php”，他会被重定向到该页面。怎么禁止呢？

更准确地说：我的**JavaScript 和 PHP 脚本仍然应该被允许**访问我的网络服务器上的每个文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T10:20:39.213

这些行：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

是条件“如果 REQUEST_FILENAME 不是文件，如果 REQUEST_FILENAME 不是目录”并且如果两者都满足，则 RewriteRule 正在发生。这通常是为了允许“友好的 url”工作，同时不重写任何图像、css 等。您可以通过多种方式阻止对文件的访问，但您必须注意不要阻止太多（如所说的图像ETC）。最简单的方法是将文件放在子目录中，然后`.htaccess`在该目录中添加另一个文件

```
Deny From All 
```

这将使 httpd reny 对该目录和子目录中的任何内容的任何请求（除非另一个`.htaccess`覆盖这些规则），而您的脚本将能够毫无问题地访问它们。

我强烈建议[阅读 mod_rewrite 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

**编辑**

没有“我的 javascript”和“他们的 javascript”。有请求，这就是你可以确定的。您无法分辨哪些访问是您的，哪些不是。“我只想通过在浏览器地址行中输入来拒绝请求” - 你也不能说。理论上你可以检查 REFERER，如果没有设置，则**假设**它是直接命中的，但 REFERER 来自浏览器，因此它也可以被伪造。而且我个人默认阻止所有 REFERERS，所以我的所有请求都没有任何 REFERER，即使这些不是直接的。您可以尝试 cookie，但同样 - 这些可以被脚本抓取并发送回来。唯一真正的选择是`Deny from all`这些文件并通过某种脚本（即PHP）“调谐”它们，即`file()`**如果用户之前使用登录名和密码验证了自己。任何其他尝试从一开始就被打破。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:16:04.800

尝试以下

```
RewriteRule /.* http://www.new-domain.com/index.html 
```**

# hibernate - 禁用特定类的 Hibernate SQL 日志记录

> ID：13414402
> 
> 赞同：4
> 
> 时间：2012-11-16T10:10:40.017
> 
> 标签：hibernate, log4j

有没有办法禁用特定类的 SQL 语句的日志记录？

我通过定义一个一般来说很好的 log4j 记录器来启用 SQL 语句记录。不幸的是，我有一个类被非常频繁地调用并产生大量的控制台输出。我想仅禁用单个类的日志记录。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:13:28.043

尽管可以在 log4j 1 中定义每个类的日志级别，例如：

```
<!-- Suppress success logging from InteractiveAuthenticationSuccessEvent -->
<logger name="org.springframework.security">
    <level value="ERROR"/>
</logger> 
```

无法对其进行微调。

要更好地控制日志记录，您需要升级 log4j 2。

在 Log4j 2 中，您可以使用过滤器：

[http://logging.apache.org/log4j/2.x/manual/filters.html](http://logging.apache.org/log4j/2.x/manual/filters.html)

这是使用正则表达式过滤器的配置片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="warn" name="MyApp" packages="">
  <appenders>
    <RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz">
      <RegexFilter regex=".* test .*" onMatch="ACCEPT" onMismatch="DENY"/>
      <PatternLayout>
        <pattern>%d %p %C{1.} [%t] %m%n</pattern>
      </PatternLayout>
      <TimeBasedTriggeringPolicy />
    </RollingFile>
  </appenders>
  <loggers>
    <root level="error">
      <appender-ref ref="RollingFile"/>
    </root>
  </loggers>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:04:49.400

不，你问的是不可能的。如果您不想记录特定类（映射到表）但该表连接到另一个表怎么办。如果表是联接的一部分，您是否希望日志显示信息？

# java - marshall 与 xjc 创建了嵌套类

> ID：13414407
> 
> 赞同：7
> 
> 时间：2012-11-16T10:11:06.250
> 
> 标签：java, jaxb, xjc

```
<ProductInformation Context="GL">
 <Assets>
  <Asset ID="assetID" UserTypeID="ID">
    <Name>name</Name>
    <Reference ClassificationID="id"/>
      <Values>
        <Value AttributeID="ID">Value1</Value>
        <Value AttributeID="ID">Value2</Value>
          <MultiValue AttributeID="attributeID">
             <Value>value3a</Value>
             <Value>value3b</Value>
          </MultiValue>
     </Values>
   </Asset>
 </Assets>

 <Products>....</Products>

</ProductInformation> 
```

我使用这个 xml->xsd 和 xjc 从它创建类。

现在我想创建我的 ProductInformation 对象，并对其进行编组。

我的问题是 xjc 创建 3 个类和一个 objectfactory，以及 ProductInformation 中的一些嵌套类。当我查看可用的方法时，我主要看到的是 getter 而不是 setter。

“资产”类没有这样的方法；

```
asset.setValues(List<Value> values) 
```

我最后也写了这样有趣的代码；

```
ProductInformation.Assets.Asset.Values.MultiValue multivalue=new ProductInformation.Assets.Asset.Values.MultiValue(); 
```

Jaxb 这正常吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:15:11.703

[**伊恩·罗伯茨给出**](https://stackoverflow.com/a/13414508/383861)的答案是正确的。我给出这个是为了为那些对没有内部类感兴趣的人提供一些额外的信息。

**XML 模式 (schema.xsd)**

如果 JAXB 类是从以下 XML 模式生成的，则生成的类`Customer`和`Employee`类都将包含一个名为的静态嵌套类`Address`（因为每个类都包含它们自己的地址定义）。这就是为什么使用静态嵌套类来避免名称冲突问题的原因。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema
    targetNamespace="http://www.example.org/company"
    xmlns="http://www.example.org/company"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"> 

    <xsd:element name="customer">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="address">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="street" type="xsd:string"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:element name="employee">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="address">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="road" type="xsd:string"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

**JAXB 绑定文件 (binding.xml)**

绑定文件用于将模式定制为 Java 生成。您可以指定一切都应该是一个顶级类`localScoping="top-level"`。执行此操作时，您必须确保解决任何潜在的名称冲突。

```
<jaxb:bindings
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">
    <jaxb:globalBindings localScoping="toplevel"/>
    <jaxb:bindings schemaLocation="company.xsd">
        <jaxb:bindings node="//xsd:element[@name='employee']/xsd:complexType/xsd:sequence/xsd:element[@name='address']/xsd:complexType">
            <jaxb:class name="EmployeeAddress"/>
        </jaxb:bindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

**XJC 呼叫**

下面是使用 XJC 命令从 XML 模式生成 Java 类时指定绑定文件的示例。

```
xjc -b binding.xml schema.xsd 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/07/jaxb-xjc-and-nested-classes.html](http://blog.bdoughan.com/2011/07/jaxb-xjc-and-nested-classes.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T10:17:03.303

JAXB 通常处理多值属性的方式是只为 提供一个 getter 而没有 setter `List<Whatever>`，它返回一个可变列表 - 您应该调用 getter 来检索一个最初为空的列表，然后为此列表创建成员对象以`new`正常方式使用并将`add`它们直接添加到列表中。您可以`new`使用与顶级类完全相同的方式创建静态嵌套类。

应该使用 getter 和 setter 生成单值属性（不是列表）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-27T11:29:31.760

这实际上只是对 Blaise Doughan 的回答的评论，但我想发布 xml。

如果您使用更复杂的 xsd 并且`node`属性中的路径变得太长，您可以：

```
<jaxb:bindings xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" version="2.1">
    <jaxb:globalBindings localScoping="toplevel"/>
    <jaxb:bindings schemaLocation="company.xsd">
        <jaxb:bindings node="//xsd:element[@name='employee']">
            ....
                <jaxb:bindings node=".//xsd:element[@name='address']/xsd:complexType">
                    <jaxb:class name="EmployeeAddress"/>
                </jaxb:bindings>
            ....
        </jaxb:bindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

# c# - 关闭警告 CS1607

> ID：13414409
> 
> 赞同：5
> 
> 时间：2012-11-16T10:11:09.920
> 
> 标签：c#, .net-assembly

我有一个常见的程序集文件，我试图在其中关闭警告：

> 警告 CS1607：程序集生成 - 为“文件版本”指定的版本“2.0.4.121106”不是正常的“major.minor.build.revision”格式

我已经这样做了，但它不起作用：

```
#pragma warning disable 1607    
[assembly: AssemblyVersion("2.0.*")]
[assembly: AssemblyFileVersion("2.0.4.121106")]
[assembly: AssemblyInformationalVersion("2.0.0.0")]
#pragma warning restore 1607 
```

那么有没有办法在代码中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T20:19:43.633

您收到错误的原因是因为修订号大于 65534。我发现为我的解决方案研究相同的问题是没有办法（或简单/正确）来抑制此警告。但是为了让我们绕过它，我们发现我们可以在 AssemblyVersion.cs 中设置以下代码，并以您的版本为例：

```
[assembly: AssemblyFileVersion("2.0.0.0")]
[assembly: AssemblyInformationalVersion("2.0.4.121106")] 
```

当查看我们的 dll 的“属性”>“详细信息”的详细信息时，这将使它成为我们 dll 的“2.0.4.121106”的产品版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T10:17:36.093

您可以在“构建”选项卡上的项目属性中执行此操作。有一个名为“禁止警告”的字段，您应该在其中输入“1607”。

# javascript - Javascript：location.href 打开一个新窗口

> ID：13414413
> 
> 赞同：1
> 
> 时间：2012-11-16T10:11:27.753
> 
> 标签：javascript, frame

我的应用程序正在尝试使用以下语法将 URL 附加到隐藏框架。

```
top.frames['main_frame_name'].frames['sub_frame_name'].location.href = URL 
```

但是当我的应用程序执行上述语法时，它会在新窗口中打开 URL，而不是将其附加到隐藏框架。

我的应用程序和框架应用程序位于不同的域上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:16:38.590

我认为您没有正确引用您的框架，为框架分配一个 id 并通过以下方式设置其 url：

```
document.getElementById('myframe').src = URL; 
```

这应该有效；

```
<frameset rows="50%,*" onload="LoadPage();">    
   <frame id="content2"></frame>
   ..... 
```

完整代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>
<head>
<script type="text/javascript">
function LoadPage(){
    document.getElementById('content1').src = "http://www.google.com";
    document.getElementById('content2').src = "http://www.bing.com";
}
</script>
<title></title>
</head>
<frameset rows="50%,*" onload="LoadPage();">    
    <frame src="#" id="content1">    
    <frame src="#" id="content2">                
</frameset>
</html> 
```

# ios - 在 Facebook iOS 登录流程完成后将 JS 脚本注入 UIWebView

> ID：13414416
> 
> 赞同：0
> 
> 时间：2012-11-16T10:11:42.503
> 
> 标签：ios, uiwebview, facebook-login

有时，当我在 Facebook iOS 登录流程完成后尝试将 JS 脚本注入 UIWebView 时，我的 iOS 应用程序在快速应用程序切换（从 Safari 到我的应用程序）期间冻结。
在 XCode 控制台中，我收到以下错误消息：

> 等待 10 秒后未能返回。主运行循环模式：kCFRunLoopDefaultMode...

有时应用程序不会被冻结，但错误消息仍然显示。

我通过在 1 秒间隔后运行 JS 注入代码来解决这个问题。我实现它如下：

在 FB 会话更改的回调中，我使用`NSObject`'s`performSelector:withObject:afterDelay:`方法在 1 秒内调用了我的 JS 回调。这是我的代码示例：

```
/*
 * Callback for session changes.
*/
- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:(NSError   *)error
{
  switch (state) {
    case FBSessionStateOpen:
      if (!error) {
        // We have a valid session
        [self performSelector:@selector(jsCallback:) withObject:session afterDelay:1];
      }
    break;

  // the rest of the method is omitted
}

- (void)jsCallback:(FBSession *)session {
     UIWebView *webView = ...
     NSString *jsScript = ...
     [webView stringByEvaluatingJavaScriptFromString:jsScript];
} 
```

它有效，但我担心它不是一个可靠的解决方案。例如，在某些情况下，1 秒可能不够。

任何想法如何以更可靠的方式实现相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:52:03.543

好吧，事实证明这很简单。我使用了`UIApplicationState`，像这样：

```
/*
 * Callback for session changes.
*/
- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:      (NSError   *)error
{
  switch (state) {
    case FBSessionStateOpen:
      if (!error) {
        // We have a valid session
        UIApplicationState appState = [[UIApplication sharedApplication] applicationState];

        NSLog(@"We have a valid session, app state: %u",appState);

        if (UIApplicationStateActive == appState){
            [self jsCallback:session];
        } else {
            self.fbSessionJustOpened = YES;
        }
      }
    break;

    // the rest of the method is omitted
} 
```

In方法`UIApplicationDelegate`：`applicationDidBecomeActive`

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{  
    if (self.isFbSessionJustOpened){
        self.fbSessionJustOpened = NO; // reset flag to NO        
        [self jsCallback:[FBSession activeSession]];
    }
} 
```

# java - 休眠中的映射异常

> ID：13414426
> 
> 赞同：0
> 
> 时间：2012-11-16T10:12:43.803
> 
> 标签：java, hibernate

我正在尝试实现一对一的关联映射，但它提供了 MappingException
Student.hbm.xml 文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
 <!-- Generated 16 Nov, 2012 3:10:16 PM by Hibernate Tools 3.4.0.CR1 -->
 <hibernate-mapping>
   <class name="com.sst.student.Student" table="STUDENT">
    <id name="studentId" type="java.lang.Long">
        <column name="STUDENT_ID" />
        <generator class="native" />
    </id>
    <property name="studentName" type="string" length="20" column="STUDENT_NAME"/>
   <many-to-one name="studentAddress" 
   column="STUDENT_ADDRESS"  class="com.sst.student.Address" cascade="all" 
   unique="true"/>  
    </class>

   </hibernate-mapping> 
```

我的 Address.hbm.xml 文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"

"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 16 Nov, 2012 3:10:16 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="com.sst.student.Address" table="ADDRESS">
    <id name="addressId" type="java.lang.Long">
        <column name="ADDRESS_ID" />
        <generator class="native" />
    </id>
    <property name="street" type="string" column="STREET" length="20"/>
    <property name="city" type="string" column="CITY" length="20"/>
    <property name="state" type="string" column="STATE" length="20"/>
    <property name="country" type="string" column="COUNTRY" length="20"/>
</class>
</hibernate-mapping> 
```

在代码生成时，我收到以下异常：

```
 org.hibernate.MappingException: An association from the table STUDENT refers to an   
  unmapped class: com.sst.student.Address 
```

我的 cfg 文件“one2one.cfg.xml”：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
 <hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.password">root$12</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306 
    /mysql</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.hbm2ddl.auto">create</property>
    <mapping resource="com/sst/student/Student.hbm.xml"/>
    <mapping resource="com/sst/student/Address.hbm.xml"/>
 </session-factory>
 </hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:57:35.903

您需要在地址 hbm.xml 中进行一对多映射。

# html - 设置 iframe 以占用页面中的剩余空间

> ID：13414427
> 
> 赞同：8
> 
> 时间：2012-11-16T10:12:48.577
> 
> 标签：html, css, internet-explorer, iframe, height

关于 iframe 及其高度有很多问题。有些是相似的，但没有给我正确的答案。所以让我解释一下我的情况：

JSFiddle： http: [//jsfiddle.net/AmVhK/3/show/](http://jsfiddle.net/AmVhK/3/show/)
编辑：http: [//jsfiddle.net/AmVhK/3/](http://jsfiddle.net/AmVhK/3/)

有一个有 2 行的表。第一个包含一个具有**固定**高度的 div #toolbar。第二行包含一个包含 iframe 的 div。我需要 iframe 来占用工具栏 div 下方的可用空间。

我面临的问题是**IE 标准模式**（支持 IE8+）。*假设*窗口的高度是 1000px，工具栏的高度是 200px，那么 iframe 的高度也是 1000px，滚动条也是如此。我需要 iframe 的高度为（页面高度-工具栏高度）。

如果有 CSS 解决方案就好了。使用 JavaScript 获取可用高度并将其设置为 iframe 或包含 div 是我最后的解决方案:)

将工具栏或 iframe 设置为绝对位置也不适用于我的用例。**如有必要，可以更改标记**（如果要删除表）

我已经设置了以下 CSS：

```
html, body {height: 100%} 
```

任何好的解决方案来实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T08:48:29.373

这是在 IE8 和 FF17 中测试的解决方案

```
<!DOCTYPE html>
<html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <title> - jsFiddle demo</title>

        <style type="text/css">
            *
            {
                border: 0;
                line-height: 0;
                margin: 0;
                padding: 0;
            }

            html,
            body
            {
                height: 100%;
            }

            #layout
            {
                position: relative;
                width: 100%;
                min-height: 100%;
                            overflow-y: hidden;

                background-color: green;
            }

            #toolbar
            {
                width: 100%;
                height: 200px;

                background-color: blue;
            }

            #content-wrapper
            {
                position: absolute;
                top: 200px;
                bottom: 0px;

                width: 100%;

                background-color: red;
            }

            #content
            {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div id="layout">
            <div id="toolbar">

            </div>
            <div id="content-wrapper">
                <iframe id="content" name="content" src="https://c9.io/" border="0"></iframe>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T08:39:01.217

好的，这是我的尝试，iframe 有问题想要在 IE7 中进行水平滚动但布局很好，我不得不放弃，因为与 IE7 的斗争让我想咬自己的眼睛，希望有人可以扩展从这里。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>iframelayout</title>
        <style>
            html, body {
                margin: 0;
                padding: 0;
                height: 100%;
            }

            div, iframe {
                margin: 0;
                padding: 0;
                border: 0;
            }

            .container {
                position: relative;
                width: 100%;
                height: 100%;
                background: #222;
            }

            .toolbar {
                height: 200px;
                background: #aaa;
            }

            .iframe-container {
                position: absolute;
                top: 200px;
                bottom: 0;
                width: 100%;
                background: #555;
                overflow-y: hidden;
            }

            .iframe-container iframe {
                position: absolute;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="toolbar">

            </div>
            <div class="iframe-container">
                <iframe src="https://c9.io/" frameborder="0">Your browser is kaput!</iframe>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T13:46:01.710

这很干净，因为它可以让您注意到您的原始问题提到工具栏有一个**固定的**的高度。最少的代码，没有包装元素，也不需要表格，兼容 IE8+/Chrome/Fox。

但是，在 Dale 的解决方案的评论中，您提到工具栏高度是灵活的，并且需要 iframe 进行调整 - 这是一个主要的游戏规则改变者，我建议您去掉您的要求，因为在 CSS2 中如果没有它实际上是不可能实现的额外的 JS 和/或可怕的 CSS hack。如果您不希望 IE<=9 兼容，那么使用 CSS3 flexbox 是很有可能的。

由于工具栏灵活高度的原因是您提到的不同状态的动画，我建议您使用下面的代码并同时为工具栏**高度**和 iframe **padding-top**设置动画以实现所需的灵活性，而不仅仅是工具栏高度。它不需要动画本身之外的任何额外 JavaScript，因此唯一的“缺点”是动画 2 个属性而不是 1 个。布局的其余部分将进行微调。

```
<style type="text/css">
html, body {
    height: 100%;
    margin: 0;
}
#toolbar {
    position: absolute;
    width: 100%;
    height: 200px; /* animate this */
}
#cblt_content {
    display: block;
    width: 100%;
    height: 100%;
    padding-top: 200px; /* and this */
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    border: 0;
}
</style>

<div id="toolbar">Toolbar</div>
<iframe id="cblt_content" src="https://c9.io/"></iframe> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T05:13:23.743

## 摆脱垂直滚动

使用此代码应该只留下内部 ( `iframe`) 滚动：

```
html, body
{
    height:    100%;
    width:     100%;
    position: fixed;
} 
```

**笔记：**

1.  `width`是必需的（如`absolute`）。
2.  你`absolute`不帮助你是对的。
3.  这实际上对您要实现的目标有意义（如果我做对了）。

**浏览器支持：**

可能有点问题，但应该从 IE7 ( [quirksmode](http://www.quirksmode.org/css/contents.html#t28) ) 开始支持。

* * *

*希望我的问题是正确的。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T07:13:57.750

解决方案是

```
<!DOCTYPE html>
<html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <title> - Webduos Demo</title>

        <style type="text/css">
            *{ border: 0;  line-height: 0;  margin: 0; padding: 0; }

            html, body {  height: 100%;  }

            #layout { position: relative; width: 100%; min-height: 100%; overflow-y: hidden; background-color: green; }

            #toolbar {  width: 100%;  height: 160px;  background-color: blue;  }

            #content-wrapper {  position:absolute;  top:180px; bottom: 0px; width: 100%; background-color: #0000dd;  }

            #content {width: 100%; height: 100%;  }
        </style>
    </head>
    <body>
        <div id="layout">
            <div id="toolbar">

            </div>
            <div id="content-wrapper">
                <iframe id="content" name="content" src="https://google.com/" border="0"></iframe>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T06:23:59.170

我认为你可以简单地隐藏父滚动条并得到你想要的。就像通过简单地添加溢出-y隐藏：

```
html, body {
        height: 100%;
        overflow-y:hidden;
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-20T23:44:53.193

这应该做！这是快速预览链接：http: [//jsfiddle.net/AmVhK/15/show/](http://jsfiddle.net/AmVhK/15/show/)

```
<style type="text/css">
    html, body {
        height: 100%;
    margin: 0;
    padding: 0;
    }
    #contentiframewrapper, #cblt_content {
    /* max-height: 100%;
    min-height: 99.9%;*/
    height: 99.9%;
    margin: 0;
    padding: 0;
    line-height: 0;
    }
    #toolbar {
        height: 100px !important;
        background-color: #CCC;
        text-align: center;
        font-size: 50px;
        vertical-align: middle;
    }
</style>
<table width="100%" height="99.6%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td valign="top" id="toolbar">Toolbar
            </td>
        </tr>
        <tr>
            <td width="100%" valign="top" height="80.5%">
                <div align="center" id="contentiframewrapper">
                     <iframe width="100%" frameborder="0" name="cblt_content" id="cblt_content" src="https://c9.io/" border="0"></iframe>
                </div>
           </td>
    </tr>
    </tbody>
</table>​ 
```

我已经在 Chrome 和 IE8 中对其进行了测试，并且它适用于我。它可能在 IE8 中的 JSFiddle 中出现错误，但如果您将其视为单独的页面（在正常情况下），它不应该。

**编辑：** 对原始代码进行了一些细微的更改。但是，`<td>`如果您更改工具栏的高度，则必须将保存 iFrame 高度值的 更改为新高度。对于 IE，没有神奇的 % 值（除非你使用 JS，当然你不想要它），它只是反复试验。

# macos - 在 Bash 中将 MacOS 样式的路径转换为 POSIX 路径

> ID：13414430
> 
> 赞同：0
> 
> 时间：2012-11-16T10:13:00.757
> 
> 标签：macos, bash, unix, posix

我在 OSX 上，想将 MacOS 样式的路径（例如 Macintosh HD:Users:Shared:）转换为 POSIX 路径（例如 /Users/Shared/）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:20:10.127

您可以使用 AppleScript 将旧版 Mac 路径转换为 ​​POSIX 路径，您可以使用以下命令从 shell 调用`osascript`：

```
$ osascript -e 'POSIX path of "Macintosh HD:Users:Shared"'
/Users/Shared 
```

# c# - 我可以“生成” COM 可见程序集吗？

> ID：13414433
> 
> 赞同：3
> 
> 时间：2012-11-16T10:13:20.957
> 
> 标签：c#, com

我可以生成 COM 可见程序集（使用 CodeDom 或其他任何东西）吗？

我希望将 C# 类公开给 VBA。基本上，我有一个对象驱动的 Web 服务器，每次构建我的 Web 服务器时，我还想生成一些包装类（使用 CodeDom 可见的 COM），因为某些客户端需要这些来访问来自其他上下文的数据（Excel/VBA ， ETC...）。

那么这可能吗？

**更新：** 尝试**Snoopy的****RegFree**方法，我使用 CodeDom 将该类构建到 test2.dll 中：

 **```
 namespace Test
   { 
       public class TestClass
       {
        private double _d1;
        private double _d2;

              public double d1 {
                get { 
                  return _d1; }
                set { _d1 = value; }
              }

           public double d2 {
            get { return _d2; }
            set { _d2 = value; }
           }

           public double sum()
           {
            return d1 + d2;
           }
       }
   } 
```

我在 VBE 中得到以下信息： ![在此处输入图像描述](../Images/045e6347318f5cfbca256d62059881f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:02:41.063

如果您查看[ComVisibleAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)的文档，它会说

> 默认值为 true，表示托管类型对 COM 可见。使公共托管程序集和类型可见，不需要此属性；默认情况下，它们对 COM 可见。

然后有一些限制，例如只有具有默认构造函数的公共类型等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:05:06.590

是的，这可以使用免费注册 COM。

1）打开Excel并添加以下引用

C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoree.tlb（公共语言运行时执行引擎 2.4 库）

C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.tlb

将您的 Code Dom 生成的 Classlibrary 添加到存储 Excel 工作表的同一目录中

3）使用以下VBA代码：

```
子 Command1_Click()
     将 clr 调暗为 CorRuntimeHost
     暗域作为 AppDomain
     将 objTest 调暗为对象
     将 fltResult 调暗为字符串

     设置 clr = 新 CorRuntimeHost

     clr.开始
     clr.GetDefaultDomain 域
     设置 objTest = domain.CreateInstanceFrom("C:\Bla\YourGeneratedClassLibrary.dll", "NetComClassLibrary.Info").Unwrap
     fltResult = objTest.Version
     clr.停止

     '//调试.打印 fltResult
     消息框 fltResult
 结束子

```

更多信息：http: [//blogs.msdn.com/b/junfeng/archive/2006/04/20/579748.aspx](http://blogs.msdn.com/b/junfeng/archive/2006/04/20/579748.aspx)**

# javascript - 检查 Google Analytics _gaq 对象是否已加载且可用

> ID：13414440
> 
> 赞同：8
> 
> 时间：2012-11-16T10:13:36.530
> 
> 标签：javascript, jquery, google-analytics, typeof, web-analytics

我的网站上有一些 Google Analytics 跟踪代码 (GATC)，它会触发对`_gaq.push`Google 代码中的方法的调用。

在 GA 不可用或`_gaq`尚未加载的情况下，我想确保页面上没有任何 JavaScript 错误。通过检查`_gaq`与“未定义”不同 - 这足以检查它是否可用并且这是 x 浏览器吗？我已经查看了 Google 的文档，但它没有提及任何关于此的内容。

我知道检查对象是否为`null`，但我不确定这是否有必要。

```
if (typeof(_gaq) !== 'undefined') {
   _gaq.push(['_trackEvent', 'Downloaded Video', 'Yes']); 
   _gaq.push(['rollup._trackEvent', 'Downloaded Video', 'Yes']);                                    
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-07-04T15:46:06.673

如果您使用的是 Universal Analytics ( `analytics.js`)，请切换：

```
_gaq.push(['_trackEvent', 'Downloaded Video', 'Yes']); 
```

对此：

```
ga('send', 'event', 'Downloaded Video', 'Yes'); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-16T10:16:12.093

在您从分析中获得的推荐 javascript 代码中，它包括以下行：

```
var _gaq = _gaq || []; 
```

因此，如果您在代码中保留此行，则该数组应该始终可用。如果您稍后添加分析代码，只需在主脚本之前添加上面的行，它就会起作用。

请注意，即使您`_gaq`之前定义了此代码段，它也是无害的，因为它仅将它定义为一个新的 Array，如果它以前未定义。

这是使用异步脚本的好方法，数组首先在本地定义，您可以在需要时将命令推送到该数组。加载分析脚本后，它可以在需要时使用这些命令。所以不需要检查数组是否未定义或类似的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T09:18:30.190

加载时`ga.js`，它定义了一个`window._gat`（注意 T 而不是 Q）全局对象，您只需要测试它是否已定义（但要注意它是异步加载的，那么您可能会延迟测试）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T20:13:46.250

您通常不需要检查它是否已定义，因为 Google Analytics（分析）代码段会为您执行此操作。但是，如果您在 stie 的其他部分执行类似事件跟踪的操作，因为问题表明，有时最好检查一下脚本是否已加载，因为它是异步的。

我为 GA 编写了一个 jQuery 插件包装器，并想在尝试向其推送任何数据之前检查代码是否确实安装了 GA。这是为了涵盖有人试图在未安装 GA 或初始化 GA 之前使用插件的情况。

```
if (typeof(_gaq) == 'undefined') {
  console.error("Google Analytics is not installed");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T21:20:10.110

正如[@David](https://stackoverflow.com/users/210578/david)所说，只要您之前`var _gaq = _gaq || [];`定义了代码段，就可以了，无需检查`_gaq`是否未定义。

`_gaq`如果之前未定义，则将其定义为空数组的原因是它有一个`push`方法。这允许您的分析代码在加载 GA 代码之前执行，或者在某些情况下它不可用时执行。

当 GA 加载时，`_gaq`将被重新定义为带有`push`方法的对象，并且将执行旧 _gaq 数组的任何现有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T13:52:41.303

您可能想在 js 中的某处添加事件跟踪，但 CMS 只为未登录的访问者或某些页面添加 Google Analytics。该功能的以下检查将起作用：

```
if (typeof(ga) === 'function') {
  ga('send', 'event', 'what', 'has', 'happened');
} 
```

# tomcat7 - 在 OpenCMS 设置期间遇到冻结

> ID：13414442
> 
> 赞同：1
> 
> 时间：2012-11-16T10:13:45.393
> 
> 标签：tomcat7, opencms

有没有人经历过这样的事情？我正在安装 OpenCMS 8.5.0。用于评估，在 Tomcat 7x 上运行，在设置的第 8 步（安装模块）期间，该过程冻结 - 我在同一行卡住了很长时间（我保持原样，然后闲逛咖啡 30-40 分钟），没有任何更新。

你做了什么？

谢谢，

*****从此行编辑*****

我试图刷新页面（从我的咖啡休息回来后），它只清除了日志。所以我停止了服务器并重新启动它。该过程从头开始（我不得不删除数据库并再次创建它），过程再次冻结，我等了一段时间，有时尝试刷新页面，我再次面临“textarea”内的日志被清除，之后一些尝试，这个过程终于完成了。

有人遇到过同样的经历吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:36:42.100

检查事项：

最大多少。堆是分配给Tomcat的吗？64MB 作为默认标准？最终试图增加那个参数？

你可以检查日志（WEB-INF/logs/opencms.log）或 catalina.out - 你看到那里有任何错误吗？

我在 Tomcat7 上运行 OpenCms 8.5 没有任何问题。

你在哪个操作系统上？Windows、Linux、Mac？

# sql-server - 存储过程中截断表发生错误

> ID：13414446
> 
> 赞同：4
> 
> 时间：2012-11-16T10:13:55.450
> 
> 标签：sql-server, sql-server-2008, stored-procedures, truncate, user-permissions

我有一个非常奇怪的情况，我试图从网上研究答案，但无济于事。我正在使用 SQL Server 2008 R2。

我创建了一个存储过程， `TRUNCATE TABLE`其中包含其他 T-SQL 语句中的语句。

从 SQL Server Management Studio 运行时，存储过程运行时不会出现错误。

从 Windows 窗体应用程序（使用 .NET Framework 4 用 VB.Net 编写）运行时，出现错误

> *找不到对象 tbl_Test1，因为它不存在或您没有权限*

与数据库的连接是在应用程序中正确设置的，更奇怪的是，我还有其他以完全相同的方式创建的存储过程，它们有自己的`TRUNCATE TABLE`语句，并且这些过程仍然可以正常运行。

`User_Role`对调用应用程序登录的存储过程具有执行权限。

该表`tbl_Test1`确实存在。

我已经尝试了几件事，并且这样做，对整个情况变得更加困惑。

1.  如果我在.`Select * from tbl_Test1`之前放了一个`TRUNCATE`，那么存储过程就可以工作。

2.  因为我稍后会返回一个选择，所以我希望它不存在。所以我重新编码并`select @Count = count(*) from tbl_Test1`在声明之前做了一个`TRUNCATE`，这失败了，上面的错误相同，说明`tbl_Test1`不存在或没有权限。

我完全不知道为什么会发生这种情况。我还有其他几个存储过程，其中包含截断语句，创建方式与此完全相同，并且在从应用程序调用时工作正常。

任何人都可以帮助或阐明我的问题。

提前谢谢了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T11:37:45.503

所有权链接[不适](http://www.sommarskog.se/grantperm.html#notallperms)用于`TRUNCATE TABLE`.

您需要明确授予该权限（[所需的最低权限`ALTER`在 table_name 上](http://msdn.microsoft.com/en-us/library/ms177570.aspx)）或`EXECUTE AS`在存储过程中使用。授予`EXEC`存储过程的权限是不够的。

# android - Intelij 想法如何从设备制作打印屏幕

> ID：13414448
> 
> 赞同：0
> 
> 时间：2012-11-16T10:14:01.663
> 
> 标签：android, intellij-idea, screenshot

我刚开始使用 IntelliJ IDEA。在此之前，我使用了 Eclipse。

有一件好事，您可以从您的设备获取屏幕截图：

![Eclipse 中功能的屏幕截图](../Images/f3e26a389e8e638962c6cfeed0698ada.png)

IntelliJ 中是否有类似的功能可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:13:07.457

您应该直接使用 DDMS。（这已经是 Eclipse 所做的。）

在 [Android SDK]/tools 文件夹中有一个名为*ddms.bat*的文件。

运行该文件将启动**Dalvik Debug Monitor**。

使用此监视器中的*设备*菜单，选择当前模拟器后选择*屏幕捕获。*

现在您可以使用*保存*和*刷新*按钮截取屏幕截图。

# c++ - 是否有可能有一个程序将键盘输入更改为所有其他程序？

> ID：13414456
> 
> 赞同：0
> 
> 时间：2012-11-16T10:14:25.453
> 
> 标签：c++, windows, winapi, textfield

是否可以制作一个在后台运行的程序，并在按下某个组合键后插入某些字符？

例如，一个程序是否可以在任何时间（任何地方）按下`Ctrl`+`M`插入短语“Copyright 2012”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:18:05.580

是的，有可能。从技术上讲，这已经回答了您的问题，但我也会为您提供这样做的功能：[RegisterHotkey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)。

# virtualization - Regd Harware 辅助虚拟化

> ID：13414457
> 
> 赞同：0
> 
> 时间：2012-11-16T10:14:27.757
> 
> 标签：virtualization

我正在尝试了解具有 ARM CortexA8 并使用 ARM Trustzone 功能的项目的硬件辅助虚拟化。我是这个主题的新手，因此我从 Wiki 条目开始了解更多信息。

Wikipedia 解释了硬件辅助虚拟化并在定义中添加了一行：

> 完全虚拟化用于模拟完整的硬件环境或虚拟机，其中未修改的客户操作系统（**使用与主机相同的指令集**）完全隔离地执行。

粗体字有点混乱。处理器的同一个指令集是如何提供两个隔离环境的呢？有人可以解释一下吗？ArmTrustzone 手册还谈到了提供安全性的“虚拟处理器内核”。请放一些光。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:40:53.480

不，CPU 没有附加指令。虚拟机指令集由称为 VMM（虚拟机管理器）的管理程序组件转换，以在物理 CPU 上执行。

具有辅助虚拟化的物理 CPU 仅引入了一种称为 VMX 的新环 0 模式，该模式允许虚拟机执行环 0 中的一些指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:52:08.707

短语“**使用与主机相同的指令集**”意味着客户操作系统不知道虚拟化层，并且其行为就像在真实机器上执行（使用相同的指令集）一样。这与半虚拟化范式形成对比，在半虚拟化范式中，来宾操作系统知道虚拟化并调用一些特定的 VMM 功能，即超调用。

# visual-studio-2010 - 如何在设计时在 Blend 或 VS for Windows Phone 7 或 8 中查看屏幕外内容

> ID：13414458
> 
> 赞同：0
> 
> 时间：2012-11-16T10:14:32.077
> 
> 标签：visual-studio-2010, windows-phone-7, xaml, expression-blend, windows-phone-8

我正在设计一个长长的 Windows Phone 8 页面。非常令人沮丧的是，我在设计视觉效果中看不到大部分内容。

我想知道是否有人知道在设计时能够在页面底部（即在设计器中向上滚动）直观地查看内容的方法，或者最好能够看到整个页面。

我知道你可以关闭 chrome，有什么方法可以关闭视图窗口遮罩框？

这也适用于尝试查看整个全景视图！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:30:02.417

尝试暂时折叠正在离开屏幕的控件上方的控件。稍后您可以再次将该控件设置为所需的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T05:09:09.407

无需从 xaml 根标记中删除`d:DesignWidth`& `d:DesignHeight`，只需将这些值设置得足够高，以便显示所有内容。

# java - 是否可以在 Spring MVC 中进行自动 url 映射？

> ID：13414459
> 
> 赞同：4
> 
> 时间：2012-11-16T10:14:33.263
> 
> 标签：java, spring-mvc

是否可以在 Spring MVC 中进行自动 url 映射？例如，url`http://localhost/eshop/products`调用 eshop 模块中的 ProductsController 而没有显式的 @RequestMapping。系统应该知道第一个参数是一个模块，第二个参数是一个控制器。每次创建新控制器时，我都不想在 web.xml 或 @RequestMapping 中进行任何更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:30:01.010

请检查此链接 [http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s10.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s10.html)

Spring MVC 的约定优于配置

# javascript - 如何在高图中将不同类别的值放在 X 轴上

> ID：13414460
> 
> 赞同：4
> 
> 时间：2012-11-16T10:14:32.597
> 
> 标签：javascript, highcharts

我想用不同的数据来制作不同的柱状图。（与折线图相同，我可以单击底部的小图标然后图表更改）但是我有一个问题，每个数据在 X 轴上都有不同的类别，这意味着每当我更改数据时，类别也会随之更改。

我不知道该怎么做，例如：

我在柱形图中有多个数据：

`series: [{ name: 'name', data: data, color: 'white' }, {name: 'name', data: data, color: 'white'}]`

每个数据也有不同的类别

```
categories: cataTitle1,cataTitle2 
```

我不能随着数据的变化而改变类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:33:00.817

您需要使用柱形图的多个轴和多个系列[这里是演示](http://jsfiddle.net/zaheerahmed/V8cgE/) 您也可以使用多个 YAxis。[Highchart Demo](http://www.highcharts.com/demo/combo-multi-axes)可以为您提供详细的帮助。

```
 series: [{
            name: 'Rainfall',
            color: '#4572A7',
            type: 'column',

            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]

        }, {
            name: 'Sea-Level Pressure',
            type: 'column',
            color: '#AA4643',
            xAxis: 1,
            data: [1016, 1016, 1015.9, 1015.5, 1012.3, 1009.5, 1009.6, 1010.2, 1013.1, 1016.9, 1018.2, 1016.7],
            marker: {
                enabled: false
            },
            dashStyle: 'shortdot'

        }] 
```

# android - 启动android相机意图和布局

> ID：13414463
> 
> 赞同：0
> 
> 时间：2012-11-16T10:14:39.977
> 
> 标签：android, android-layout, android-intent

我正在尝试加载相机以从我的 android 应用程序中拍照，

**我的 Photos.java 是**

```
private Uri imageUri;

public void takePhoto(View view) {
    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    File photo = new File(Environment.getExternalStorageDirectory(),  "Pic.jpg");
    intent.putExtra(MediaStore.EXTRA_OUTPUT,
            Uri.fromFile(photo));
    imageUri = Uri.fromFile(photo);
    startActivityForResult(intent, TAKE_PICTURE);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case TAKE_PICTURE:
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImage = imageUri;
            getContentResolver().notifyChange(selectedImage, null);
            ImageView imageView = (ImageView) findViewById(R.id.ImageView);
            ContentResolver cr = getContentResolver();
            Bitmap bitmap;
            try {
                 bitmap = android.provider.MediaStore.Images.Media
                 .getBitmap(cr, selectedImage);

                imageView.setImageBitmap(bitmap);
                Toast.makeText(this, selectedImage.toString(),
                        Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT)
                        .show();
                Log.e("Camera", e.toString());
            }
        }
    } 
```

这很好用。但它的布局部分调用了我正在努力解决的这个意图。

我创建了一个按钮来加载相机

```
<Button
    android:id="@+id/takePhoto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="41dp"
    android:onClick="takePhoto"
    android:text="@string/Photos_Button1" /> 
```

但现在我需要有一个部分来显示我拍摄的图像。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T10:40:30.530

**试试这个...**

*注意：仅适用于 Android API 8 // 2.2 或更高版本*

```
public class PhotoActivity extends Activity {

    /** The Constant PICK_IMAGE. */
    private static final int PICK_IMAGE = 0;

    /** The Constant PICK_IMAGE_FROM_GALLERY. */
    private static final int PICK_IMAGE_FROM_GALLERY = 1;

    /** The btn cancel. */
    private Button btnPhotoCamera,btnPhotoGallery,btnCancel;

    /** The img view. */
    private ImageView imgView;

    /** The u. */
    private Uri u;

    /* (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_photo_options);

        imgView=(ImageView)findViewById(R.id.imgDisplayImage);
        btnPhotoCamera=(Button)findViewById(R.id.btnPhotoCamera);
        btnPhotoGallery=(Button)findViewById(R.id.btnPhotoGallery);
        btnCancel=(Button)findViewById(R.id.btnCancel);

        btnPhotoCamera.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent camera=new Intent();
                camera.setAction(MediaStore.ACTION_IMAGE_CAPTURE);
                camera.putExtra("crop", "true");

                File f=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);

                u = Uri.fromFile(new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"myFile.jpg"));
                camera.putExtra(MediaStore.EXTRA_OUTPUT, u);
                startActivityForResult(camera, PICK_IMAGE);
            }
        });

        btnPhotoGallery.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(Intent.ACTION_PICK);
                intent.setType("image/*");
                startActivityForResult(intent, PICK_IMAGE_FROM_GALLERY);
            }
        });

        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent goStartUp=new Intent(PhotoActivity.this, StartUpActivity.class);
                goStartUp.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(goStartUp);
                finish();
            }
        });
    }

    /* (non-Javadoc)
     * @see android.app.Activity#onActivityResult(int, int, android.content.Intent)
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if (resultCode==RESULT_OK )
        {
            if(requestCode == PICK_IMAGE) {

                InputStream is=null;
                try {
                    is = this.getContentResolver().openInputStream(u);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
                Bitmap bmp=BitmapFactory.decodeStream(is);
                imgView.setImageBitmap(bmp);
                Log.i("Inside", "PICK_IMAGE");
            }

            if (requestCode == PICK_IMAGE_FROM_GALLERY) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };
                Log.d("data",filePathColumn[0]);
                Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
                cursor.moveToFirst();
                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                cursor.close();
                imgView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
                Log.i("Inside", "PICK_IMAGE_FROM_GALLERY");
            }
        }
    }
} 
```

XML 文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#f0f0f0">
    <TextView
        android:id="@+id/lblSelectOptions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="20dp"
        android:text="@string/two_options"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#ff0000"/>
    <Button
        android:id="@+id/btnPhotoCamera"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lblSelectOptions"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/camera"/>
    <Button
        android:id="@+id/btnPhotoGallery"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnPhotoCamera"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/gallery"/>
    <Button
        android:id="@+id/btnCancel"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnPhotoGallery"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="19dp"
        android:text="@string/cancel"/>
    <TextView
        android:id="@+id/lblDisplayImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnCancel"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/below_this_text_image_will_be_displayed"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#000000"
        android:textSize="13dp"/>
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@+id/lblDisplayImage"
        android:layout_centerInParent="true"
        android:layout_marginTop="10dp"
        android:gravity="bottom">
        <!--
             <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        -->
        <ImageView
            android:id="@+id/imgDisplayImage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@+id/lblDisplayImage"
            android:layout_centerInParent="true"
            android:contentDescription="@string/area_where_image_is_to_be_displayed" />
        <!-- </ScrollView> -->
    </RelativeLayout>
</RelativeLayout> 
```

还可以根据您的使用修改 Android Manifest 文件：-

```
<manifest....
  <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="21" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
<application....
..........
</application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-16T11:21:49.223

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/Photos_Text1" />

<Button
    android:id="@+id/takePhoto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="takePhoto"
    android:text="@string/Photos_Button1" />

<Button
    android:id="@+id/pagePhotoUpload"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="pagePhotoUpload"
    android:text="@string/Photos_Button2" />

<ImageView
    android:id="@+id/ImageView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.85"
    android:src="@drawable/ic_action_search" />

</LinearLayout> 
```

我正在使用

```
 android:onClick="takePhoto" 
```

但是这不是在我的java中设计的，我已经制作了“takePhoto”

# c# - 带有 Mysql 索引的实体框架

> ID：13414464
> 
> 赞同：0
> 
> 时间：2012-11-16T10:14:43.267
> 
> 标签：c#, asp.net, .net, mysql, entity-framework

EF 生成 SQL，例如 SELECT blablabla WHERE @gp1 != `Extent1`。`Alias`订购方式`Extent1`。`Alias`，其中别名是 INDEX。但是 mysql 在 WHERE 中需要不同的参数位置作为索引： WHERE `Extent1`。`Alias`!= @gp1。那么，如何更改 EF 中的参数位置或如何在 EF 中应用 FORCE INDEX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:08:28.077

[http://vincentlauzon.wordpress.com/2011/04/21/entity-framework-4-1-bypassing-ef-query-mapping-8/](http://vincentlauzon.wordpress.com/2011/04/21/entity-framework-4-1-bypassing-ef-query-mapping-8/)

我相信你想做这样的事情。

# ios - 切换视图控制器时iOS键盘闪烁

> ID：13414466
> 
> 赞同：3
> 
> 时间：2012-11-16T10:14:56.137
> 
> 标签：ios

我有一个注册表单，我希望键盘始终位于顶部。我现在这样做的方式是，当用户在视图控制器之间移动时，在 viewDidLoad 中，第一个 UITextField 成为第一响应者。问题是当用户在视图控制器之间移动时，键盘会闪烁（消失然后再次出现）。

此外，与此相关：我有一个带有几个 uitextfields 的表单。当用户按下 next 时，它会使用 becomefirstresponder 转到下一个 uitextfield。当用户位于最后一个文本字段时，键盘按钮变为“完成”。然后，当用户按下它时，如果最后一个字段出现错误，它应该获得焦点（调用 becomeFirstResponder），但这不会发生（没有获得焦点并且键盘关闭）。所有其他字段都很好，只是最后一个字段没有。我已经尝试了一切：切换到其他文本字段并返回。问题是 done 会自动删除键盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:36:21.370

您应该为此提出两个单独的问题。

首先，你的闪烁：

我猜你正在使用 UINavigationController。您可以在 UINavigationController 中的某处添加一个不可见的 UITextField，在切换到新的 ViewController 之前将其聚焦。然后，当新的 ViewController 出现时 ( `viewDidAppear`)，根据需要将焦点设置到第一个 textField。

但是，整个方法有点老套，我不建议您使用它。相反，请尝试在 scrollView 中使用多个视图，当您移动到新视图时，您会更改其中的偏移量。这也将解决闪烁。

其次，在 Done 上失去 firstResponder 状态：

完成按钮专门用于指示它所说的内容；完毕。按下此按钮假定用户已完成并且没有文本可输入，从而关闭键盘。

如果您真的想保留“完成”按钮，请尝试以下操作；

1.  允许用户关闭键盘。
2.  解雇后，检查最后一个字段中的错误。
3.  如果出现错误，不要调用`[lastField becomeFirstResponder]`，而是尝试`[self performSelector:@selector(thisSelectorWillCallFirstResponder) withObject:nil afterDelay:1.0]`。
4.  在方法`thisSelectorWillCallFirstResponder`调用`[lastField becomeFirstResponder]`中。

这将使键盘有时间消失，然后再次弹出，因此不会干扰`becomeFirstResponder`通话。

另一种方法是不使用完成按钮，而是使用返回键。您可以随时使用委托方法拦截返回`textFieldShouldReturn:`。在那里您可以处理任何错误检查，而不会导致 textField 失去焦点。

# iphone - TableView 没有隐藏在 xcode 的 didSelectRowAtIndexPath 中？

> ID：13414469
> 
> 赞同：1
> 
> 时间：2012-11-16T10:14:59.400
> 
> 标签：iphone, xcode, uitableview, autocomplete

我对 Objective-C 和实现 UItextField 的自动完成功能的概念相当陌生。我可以适当地做到这一点。但是当我选择一个特定的单元格时，该单元格的文本应该显示在 UITextField 中，并且相应的 tableView 必须被隐藏。但是我选择单元格后无法隐藏 UITableView ..我哪里出错了？

```
- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

    NSURL *urlString= [NSString stringWithFormat:@"http://179.87.89.90/services/Service.svc/GetCities/?p=%@&k=%@",substring,txtId.text];     
    NSURL *jsonUrl =[NSURL URLWithString:urlString];
    NSString *jsonStr = [[NSString alloc] initWithContentsOfURL:jsonUrl];  
    parser = [[NSXMLParser alloc] initWithContentsOfURL:jsonUrl];
    currentHTMLElement=@"3";
    [parser setDelegate:self];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    [parser parse];
    [parser release];
    NSLog(@"%@",arr2);

    if([arr2 count]!=0)
    {
        self.autocompleteUrls = [[NSMutableArray alloc] init];

        autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(88, 447, 200, 120) style:UITableViewStyleGrouped];
        autocompleteTableView.delegate = self;
        autocompleteTableView.dataSource = self;
        autocompleteTableView.scrollEnabled = YES;
        // autocompleteTableView.hidden = YES;  
        [self.view addSubview:autocompleteTableView];
        [autocompleteUrls removeAllObjects];
            for(int i=0;i<[arr2 count];i++)
            {
                NSString *curString = [[arr2 objectAtIndex:i] valueForKey:@"Name"];

                NSRange substringRange = [curString rangeOfString:substring];

                if (substringRange.location == 0) 
                    [autocompleteUrls addObject:curString];  

            }
      [autocompleteTableView reloadData];
    }
    else
    {
        autocompleteTableView.delegate=nil;
        autocompleteTableView.dataSource=nil;
        autocompleteTableView.hidden = YES;  

    }

}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if( textField == txtcity)
    {
     autocompleteTableView.hidden = NO;
    NSString *substring = [NSString stringWithString:textField.text];
    substring = [substring stringByReplacingCharactersInRange:range withString:string];
    [self searchAutocompleteEntriesWithSubstring:substring];
    return YES;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger) section {
    return autocompleteUrls.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = nil;
    static NSString *AutoCompleteRowIdentifier = @"AutoCompleteRowIdentifier";
    cell = [tableView dequeueReusableCellWithIdentifier:AutoCompleteRowIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] 
                 initWithStyle:UITableViewCellStyleDefault reuseIdentifier:AutoCompleteRowIdentifier] autorelease];
    }

    cell.textLabel.text = [autocompleteUrls objectAtIndex:indexPath.row];
    cell.textLabel.font=[UIFont boldSystemFontOfSize:12];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    txtcity.text = selectedCell.textLabel.text;
    [autocompleteUrls removeAllObjects];
    [self.autocompleteTableView setHidden:YES];    
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
        txtcity.text = selectedCell.textLabel.text;
        [autocompleteUrls removeAllObjects];
        autocompleteTableView.hidden=YES;

    } 
```

选择一行后如何隐藏 autocompleteTableView ？任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:00:53.237

问题在于 if 条件，当`if`评估为 true 时，`autocompleteTableView`再次分配并添加到 self.view。它将被放置在前一个 tableView 上，您将失去前一个 tableView 的引用。如果你打电话`autocompleteTableView.hidden = YES`。最后添加`tableView`的将被隐藏。但是之前添加的 tableViews 会在那里。

只需将 if 块更改为：

```
if([arr2 count]!=0)
{
    self.autocompleteUrls = [[NSMutableArray alloc] init];
    if(autocompleteTableView)
         [autocompleteTableView removeFromSuperView];
    autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(88, 447, 200, 120) style:UITableViewStyleGrouped];
    autocompleteTableView.delegate = self;
    autocompleteTableView.dataSource = self;
    autocompleteTableView.scrollEnabled = YES;
    // autocompleteTableView.hidden = YES;  
    [self.view addSubview:autocompleteTableView];
        for(int i=0;i<[arr2 count];i++)
        {
            NSString *curString = [[arr2 objectAtIndex:i] valueForKey:@"Name"];

            NSRange substringRange = [curString rangeOfString:substring];

            if (substringRange.location == 0) 
                [autocompleteUrls addObject:curString];  

        }
  [autocompleteTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:00:47.537

@Arizah - 请尝试制作一个新的应用程序来测试 UItableview 和 UItextField 委托方法。可能在某个地方——

```
autocompleteTableView.delegate=nil;
autocompleteTableView.dataSource=nil; 
```

被调用，因为进一步没有委托方法，如：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

不会被调用。尝试避免此代码。

另外声明：**`self.autocompleteUrls = [[NSMutableArray alloc] init];`** 在技术上是不正确的，因为保留属性不需要分配。相反，您可以使用：

```
NSMutableArray *theArray= [[NSMutableArray alloc] init];
self.autocompleteUrls = theArray;
[theArray release]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-16T10:42:50.863

你试过了吗：

```
[self.tableView setHidden:YES]; 
```

# android - Android EditText setError() 无法按预期工作

> ID：13414473
> 
> 赞同：1
> 
> 时间：2012-11-16T10:15:15.087
> 
> 标签：android, validation, android-edittext, textwatcher

我在使用时遇到`setError()`问题`EditText`。打开活动时，它会检查某些字段是否为空，如果为真，则在其上设置错误消息。但是，感叹号图标仅在我在字段中写入一些文本然后删除它的情况下才会显示。如果我失去对该领域的关注，该图标将再次消失。这两个字段`Naam`都`Telefonnumer`具有此验证。

**我使用 Android 2.2.2 SDK 并且该应用程序在 Nexus 7 上运行并具有最新更新。**

我有 Util 类：

```
public class Util {

    private static String TAG = "Util Class";

    public static boolean editTextIsEmpty(EditText edittext) {
        if (edittext.getText().toString().trim().length() < 1)
            return true;
        else
            return false;
    }

    public void editTextListener(final EditText editText) {
        editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                if (editTextIsEmpty(editText) && editText.isEnabled())
                    editText.setError("Nodig");
                else
                    editText.setError(null);
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                if (editTextIsEmpty(editText) && editText.isEnabled())
                    editText.setError("Nodig");
                else
                    editText.setError(null);
            }
        });
    }
} 
```

然后我`validateInput()`的活动中有方法：

```
public class DeliveryActivity extends BaseActivity {

    private ImageButton btnSetDate;

    private Button btnToSummary;
    private Button btnSearchAddress;

    private EditText txtPostcode;
    private EditText txtHouseNumber;
    private EditText txtHouseNumberSuffix;
    private EditText txtStreet;
    private EditText txtCity;
    private EditText txtDeliveryDate;
    private EditText txtName;
    private EditText txtPhone;
    private EditText txtEmail;
    private EditText txtRemark;

    private TextView lblExtraDeliveryInfo;

    private Spinner spinnerDelivery;
    private Spinner spinnerDeliveryPeriod;
    private Spinner spinnerContact;
    private Spinner spinnerDeliveryAddress;
    private Spinner spinnerExtraDeliveryInfo;

    private RelativeLayout rlDeliveryAddressDetails;

    private DevRestHelper additionalDeliveryInfo;
    private DevRestHelper searchClientAddress;

    private Util util = new Util();

    private int year;
    private int month;
    private int day;

    public static final int DIALOG_DATEPICKER = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_delivery);

        initControls();

        validateInput();
    }

    private void initControls() {
        btnSetDate = (ImageButton) findViewById(R.id.activity_delivery_btnCalendar);

        btnToSummary = (Button) findViewById(R.id.activity_delivery_btnSummary);
        btnSearchAddress = (Button) findViewById(R.id.activity_delivery_btnSearchAddress);

        spinnerDelivery = (Spinner) findViewById(R.id.activity_delivery_spinnerDeliveryMethod);
        spinnerDeliveryPeriod = (Spinner) findViewById(R.id.activity_delivery_spinnerDeliveryPeriod);
        spinnerContact = (Spinner) findViewById(R.id.activity_delivery_spinnerContactperson);
        spinnerDeliveryAddress = (Spinner) findViewById(R.id.activity_delivery_spinnerDeliveryAddress);
        spinnerExtraDeliveryInfo = (Spinner) findViewById(R.id.activity_delivery_spinnerExtraDeliveryInformation);

        txtPostcode = (EditText) findViewById(R.id.activity_delivery_txtPostcode);
        txtHouseNumber = (EditText) findViewById(R.id.activity_delivery_txtHousenumber);
        txtHouseNumberSuffix = (EditText) findViewById(R.id.activity_delivery_txtHousenumberSuffix);
        txtStreet = (EditText) findViewById(R.id.activity_delivery_txtStreet);
        txtCity = (EditText) findViewById(R.id.activity_delivery_txtCity);
        txtDeliveryDate = (EditText) findViewById(R.id.activity_delivery_txtDeliveryDate);
        txtName = (EditText) findViewById(R.id.activity_delivery_txtName);
        txtPhone = (EditText) findViewById(R.id.activity_delivery_txtPhone);
        txtEmail = (EditText) findViewById(R.id.activity_delivery_txtEmail);
        txtRemark = (EditText) findViewById(R.id.activity_delivery_txtRemark);

        lblExtraDeliveryInfo = (TextView) findViewById(R.id.activity_delivery_lblExtraDetailInformation);

        rlDeliveryAddressDetails = (RelativeLayout) findViewById(R.id.activity_delivery_rlDeliveryAddressDetails);
    }

    private void validateInput() {
        util.editTextListener(txtPostcode);
        util.editTextListener(txtHouseNumber);
        util.editTextListener(txtDeliveryDate);
    }
} 
```

我只想说代码在 BlueStacks 模拟器上工作。

![在此处输入图像描述](../Images/f78331cb074c48486b3d6864eb2e9c99.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:33:56.723

Jelly Bean_MR1（4.2 和 4.2.1）上的 setError 存在一个已知错误。但是，我假设您正在测试的 Nexus 7 正在运行这些版本的 Android 之一。见这里：[http ://code.google.com/p/android/issues/detail?id=40417](http://code.google.com/p/android/issues/detail?id=40417)

当您专注于该 EditText 字段时，将显示错误，但当您失去焦点时，错误图标将不可见以通知用户该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-07T06:49:45.247

在任何视图或编辑文本上设置错误之前，只需调用

```
yourEditText.requestFocus();
yourEditText.setError("Your Error Message"); 
```

然后设置错误。它会解决你的问题。至少我的做到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T12:35:44.553

这是您唯一需要在 TextView 上获得预期的 setError 行为

```
android:focusable="true"
android:clickable="true"
android:focusableInTouchMode="true" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T06:28:15.327

您可以使用以下代码：

希望对您有所帮助：

```
mPopupInlineErrorBackgroundId = getResourceId(mPopupInlineErrorBackgroundId,
                    com.android.internal.R.styleable.Theme_errorMessageBackground);
mView.setBackgroundResource(mPopupInlineErrorBackgroundId); 
```

但是，您可以使用重载的`setError(CharSequence, Drawable)`.

您可以使用`fromHtml()`.

例如：

```
yourEditText.setError(Html.fromHtml("<font color='blue'>this is the error</font>")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:19:44.763

尝试这个

```
new TextWatcher() {

    @Override
    public void afterTextChanged(Editable s) {
        if (editTextIsEmpty(editText) && editText.isEnabled())
            editText.setError("Nodig");
        else
            editText.setError(null);
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // nothing here
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // nothing here
    }

} 
```

# java - 用于字段和方法的 javax.annotation 的 FindBugs DefaultAnnotation 的替代品

> ID：13414474
> 
> 赞同：4
> 
> 时间：2012-11-16T10:15:21.917
> 
> 标签：java, findbugs

我目前使用

```
@DefaultAnnotation(NonNull.class)
package jobs;

import edu.umd.cs.findbugs.annotations.DefaultAnnotation;
import edu.umd.cs.findbugs.annotations.NonNull; 
```

但是注释 @edu.umd.cs.findbugs.annotations.DefaultAnnotation 已弃用： [http ://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/DefaultAnnotation.html](http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/DefaultAnnotation.html)

他们建议使用 javax.annotation.ParametersAreNonnullByDefault 但是，DefaultAnnotation 不仅针对参数，还针对字段和方法。

那么，默认情况下将字段和方法设置为 Nonnull 的 javax.annotation 替代方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T08:45:12.387

据我所知，没有。想要同样的东西，我将[源`ParametersAreNonnullByDefault`](http://jsr-305.googlecode.com/svn/trunk/ri/src/main/java/javax/annotation/ParametersAreNonnullByDefault.java)复制到我自己的中`FieldsAreNonnullByDefault`，`MethodsAreNonnullByDefault`并将`@TypeQualifierDefault`值更改为匹配（`FIELD`和`METHOD`相应的）。FindBugs 完美地采用了这些新注释。

这是一个示例`FieldsAreNonnullByDefault`：

```
package com.sample;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

import javax.annotation.meta.TypeQualifierDefault;

/**
 * This annotation can be applied to a package or class to indicate that the 
 * classes' fields in that element are nonnull by default unless there is
 * <ul>
 *   <li>an explicit nullness annotation
 *   <li>a default field annotation applied to a more tightly nested element.
 * </ul>
 */
@Documented
@Nonnull
@TypeQualifierDefault(ElementType.FIELD)  // <-- METHOD for return values
@Retention(RetentionPolicy.RUNTIME)
public @interface FieldsAreNonnullByDefault {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-24T10:58:21.573

所以从纯代码的角度来看，并没有什么大的区别。

一旦您之后开始分发代码，就会出现差异。

只要您不使用注释 jar**和**JRE 发布您的代码，就应该没问题。

如果您正在分发 JRE，那么您已经知道您需要遵守[Oracle Java 二进制许可证](http://www.oracle.com/technetwork/java/javase/terms/license/index.html)。

您可能想用该许可的条款刷新自己，特别是：

> F. JAVA 技术限制。您不得创建、修改或更改其行为，或授权您的被许可人创建、修改或更改以任何方式标识为“java”、“javax”、“ sun"、"oracle" 或 Oracle 在任何命名约定指定中指定的类似约定。

因此，如果您正在分发 JRE，并且同一分发包含一个在`javax`子包中定义类的 jar 文件，**除非**这些类符合由 JSR 发布和发布的规范，否则您将不遵守 Oracle Java 二进制许可的条款。

此时您应该查看[JSR 305 官方页面](https://jcp.org/en/jsr/detail?id=305)。

此时 JSR 尚未发布**任何内容**：

[![JSR - 截至 2016 年 3 月 - 被列为休眠](../Images/1b900d617e624770315aaa1c8821c5ee.png)](https://i.stack.imgur.com/BjC77.png)

因此，您需要确保不在 Windows 安装程序、OS-X 安装程序、Docker 映像等中的 JRE 旁边分发“jsr305.jar”文件。

# javascript - 为一组元素动态创建回调函数

> ID：13414483
> 
> 赞同：1
> 
> 时间：2012-11-16T10:15:50.077
> 
> 标签：javascript, jquery, callback

该变量`myCollection`包含`jQuery`DOM 元素，我想`callback`为它们的每个事件设置一个函数，`onclick`如下所示。实际上我想要的是，增量设置或可以说“烧掉”`number`每个元素，所以当它们被点击时，它自己的号码会被提醒。此代码提醒最后一次`number`在循环中何时递增的最后一个值。

```
var number = 1;

myCollection.each(function(){
    this.onclick = function() { someFunction(number) };
    number++;
});

//This function is somewhere else, but accessible.
function someFunction(number) {
    alert(number);
} 
```

如何复制或实例化每个元素的回调函数，以便它们具有相同的过程但绑定不同的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:19:25.673

一个经典的作用域问题，可以这样解决：

```
myCollection.each(function(){
  this.onclick=(function(number) {
      // in this scope, number has been "burned"
      return function() {
          someFunction(number)
      };
  }(number));
  number++;
}); 
```

请注意，jQuery 已经在每个回调中包含了正确范围的索引，因此您需要做的就是：

```
myCollection.each(function(i){
    $(this).click(function(){
        someFunction(i+1);
    });
}); 
```

# php - 为什么我的 symfony 路由不起作用？

> ID：13414485
> 
> 赞同：4
> 
> 时间：2012-11-16T10:15:53.687
> 
> 标签：php, symfony

嗨，我在 symfony 中的路由有问题。我的 routing_dev 看起来像：

```
_test:
    resource: "@MyBundle/Controller/DefaultController.php"
    type:     annotation
    prefix:   /test 
```

然后我有一个控制器：

```
/**
 * @Route("/", name="_test")
 * @Template()
 */
public function indexAction($name)
{
    return array('name' => $name);
} 
```

当我尝试运行 /test 时，我收到消息：

```
No route found for "GET /test"
404 Not Found - NotFoundHttpException
1 linked Exception: ResourceNotFoundException » 
```

我不知道错误在哪里。我需要你的帮助。如何找到问题？

编辑：我正在使用 app_dev.php 而不是 app.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:23:36.540

首先，您必须确保 routing.yml 导入文件 routing_dev.yml。

然后，您必须在路由中定义传入参数的 $name 变量。如果这个参数是可选的，你可以给它一个默认值。

此外，请注意，您可以将前缀直接放在注释中。

```
/**
 * @Route("/blog")
 */
class TheClassController extends Controller
{
    /**
     * @Route("/{name}", name="_test", defaults={"name" = "Jean"})
     * @Template()
     */
    public function indexAction($name)
    {
         return array('name'=>$name);
    }
} 
```

之后，您可以运行运行命令`php app/console router:debug`以测试路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:19:27.537

也许您必须使用[http://your.site/app_dev.php/test](http://your.site/app_dev.php/test)网址。或者将你的路由信息​​复制到 routing.yml（不是 routing_dev.yml）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:59:37.203

您必须明确设置动作的路线。不仅适用于整个控制器。

您的 routing.yml 应如下所示：

```
mybundle_controller:
    resource: "@MyBundle/Controller"
    type:     annotation
    prefix:   /test 
```

你的控制器像：

```
/**
 * @Route("/") #Note you can omit this, since you set the prefix in the routing.yml
 * 
 */
public function indexAction($name)
{
    /**
     * @Route("/", name="_test"
     * @Template()
     */
    return array('name' => $name);
} 
```

尝试运行`php app/console router:debug`

它应该返回给你类似的东西

```
_test                   ANY      /test/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:00:50.250

您实际上是在输入您的网址 /test 吗？因为您的路线只是“/”，所以您提供的名称用于从模板生成该路线。如果您希望 url 为 /test 您应该将您的路由参数更改为`@Route("/test", name="test")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-12T10:03:18.183

如果你使用 Symfony 4，你只需要安装**学说/注释**包。要下载它，请在终端运行：

```
composer require annotations 
```

该命令会将包下载到您的供应商文件夹中，并在**config/routes**文件夹下添加新的**annotations.yaml**文件。确保 annotations.yaml 有以下几行：

 **```
controllers:
    resource: ../../src/Controller/
    type: annotation 
```

您不需要在**config/routes.yaml**文件中进行任何额外的路由设置。**

# ruby - 访问 ERB 中的页面名称

> ID：13414487
> 
> 赞同：0
> 
> 时间：2012-11-16T10:16:02.570
> 
> 标签：ruby, sinatra, erb

我正在使用 Sinatra 和 ERB 模板构建一个网站。在 ERB 中，我想访问正在加载的页面的名称并相应地更改布局的一小部分。

例如，我的路线如下：

```
get '/' do
  erb :index
end 
```

我需要类似的东西：

```
<% unless page_is_index %>
    <!-- HTML goes here -->
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:24:26.150

在 Sinatra 中，路由和控制器之间没有直接关系，因此在 Rails中没有`current_controller`和助手。`current_action`你能做的就是检查`request.path`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:28:58.367

您可以指定一个不同的布局来进行您需要的更改。如果不出意外，这个布局可以只包括带有更多选项的主布局。

```
get '/' do
  erb :index, :layout => 'index_layout'
end 
```

# php - PHP：相交两个数组并获取两者的值

> ID：13414488
> 
> 赞同：1
> 
> 时间：2012-11-16T10:16:03.257
> 
> 标签：php, arrays, intersection

所以我有点卡在这里，我可以用 foreach 循环来做，但我想找到一种更聪明的方法。

**更新：**我在问题中遗漏了一些东西。数组可能以随机顺序和不同长度出现，因此具有不同的密钥。以下示例已更新。

情况如下：

阵列1

```
array (
    slug1 => England,
    slug2 => France,
    slug3 => Italy,
    slug4 => Germany,
) 
```

数组2

```
array (
    slug2 => 215,
    slug1 => 168,
    slug4 => 55,
    slug5 => 149,
    slug3 => 40,
    slug6 => 137,
) 
```

我想与这些数组相交并构建具有以下元素的新数组：

```
array (
    168 => England,
    215 => France,
    40 => Italy,
    55 => Germany,
) 
```

**注意：**元素没有排序，尽管这很容易实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:18:10.723

**回答原始问题**

您可以使用`array_combine`它创建一个数组，将一个数组用作键，另一个数组用作其值

```
$array1 = array(
        "slug1" => "England",
        "slug2" => "France",
        "slug3" => "Italy",
        "slug4" => "Germany");

$array2 = array(
        "slug1" => "168",
        "slug2" => "215",
        "slug3" => "40",
        "slug4" => "55");

$final = array_combine($array2, $array1);

echo "<pre>";
print_r($final); 
```

输出

```
Array
(
    [168] => England
    [215] => France
    [40] => Italy
    [55] => Germany
) 
```

[观看现场演示](http://eval.in/3569)

**回答更新的问题**

`Update: There was something that I've missed in the question. The arrays may come in random order and in different length thus having different keys. Examples below updated.`

```
$array1 = array(
        "slug1" => "England",
        "slug2" => "France",
        "slug3" => "Italy",
        "slug4" => "Germany");

$array2 = array (
        "slug2" => 215,
        "slug1" => 168,
        "slug4" => 55,
        "slug5" => 149,
        "slug3" => 40,
        "slug6" => 137);

$final = customCombine($array2, $array1);

echo "<pre>";
print_r($final); 
```

输出

```
Array
(
    [215] => France
    [168] => England
    [55] => Germany
    [40] => Italy
) 
```

使用的功能

```
function customCombine($keys, $arr) {
    $t = array();
    foreach ( $keys as $k => $val ) {
        isset($arr[$k]) and $t[$val] = $arr[$k];
    }
    return $t;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:27:16.000

Baba 的回答应该适合您，但这是一种处理数组和/或不同大小之间的不同键顺序的有趣方法。

```
// get values from $array2 in the order in which they appear in $array1
// whereby the array keys are used to match them
$keys = array_intersect_key($array2, $array1);
// create a new array with the keys found in the previous step and 
// another array_intersect_key() to only select the matching items
// from $array1
array_combine($keys, array_intersect_key($array1, $keys)); 
```

它还确保`array_combine()`适用于相同大小的数组；的大小`$array2`是输出大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T10:33:17.073

为了扩展[Jack](https://stackoverflow.com/users/1338292/jack)的答案，因为它可能会按照它们的构造顺序组合数组，而不是键匹配的顺序：

```
Array
(
    [215] => England
    [168] => France
    [55] => Italy
    [40] => Germany
) 
```

一些中间数据杂耍可以将其整理出来（无论哪个数组更短，它都可以工作）：

```
$array1 = array(
    'slug1' => 'England',
    'slug2' => 'France',
    'slug3' => 'Italy',
    'slug4' => 'Germany'
);

$array2 = array (
    'slug2' => 215,
    'slug1' => 168,
    'slug4' => 55,
    'slug5' => 149,
    'slug3' => 40,
    'slug6' => 137
);

$keys = array_intersect_key($array2, $array1);
ksort($keys);
$intersect = array_intersect_key($array1, $keys);
ksort($intersect);
$final = array_combine($keys, $intersect);

print_r($final); 
```

输出

```
Array
(
    [168] => England
    [215] => France
    [40] => Italy
    [55] => Germany
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:41:09.543

我找到了最适合我的解决方案：

[http://eval.in/3578](http://eval.in/3578)

```
<?php

$array1 = array("slug1" => "England","slug2" => "France","slug3" => "Italy","slug4" => "Germany");
$array2 = array("slug1" => "168","slug2" => "215","slug3" => "40","slug4" => "55", "slug5" => "178");

ksort($array1);
ksort($array2);

$test1 = array_intersect_key($array1, $array2);
$test2 = array_intersect_key($array2, $array1);

$final = array_combine($test2, $test1);
print_r($final);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:20:19.340

利用`array_combine()`

```
<?php
$a = array('green', 'red', 'yellow');
$b = array('avocado', 'apple', 'banana');
$c = array_combine($a, $b);

print_r($c);
?> 
```

[http://in1.php.net/array-combine](http://in1.php.net/array-combine)

# windows - vbs中如何传递包含空格的参数

> ID：13414496
> 
> 赞同：3
> 
> 时间：2012-11-16T10:16:34.200
> 
> 标签：windows, batch-file, vbscript, dos

我有一个批处理脚本：

### 测试.bat

```
echo first arg is %1
pause 
```

我想从具有管理员权限的 vbscript 调用，如下所示：

### 测试.vbs

```
Set UAC = CreateObject("Shell.Application")
UAC.ShellExecute "test.bat", "argument", "", "runas", 1 
```

这工作正常，但我无法传递包含空格作为单个参数的路径参数。基本上，我需要将参数括在空格中，但无论我尝试什么，它都不起作用。看起来它调用了批处理，但是 cmd 窗口只是闪烁并消失了，所以我不知道出了什么问题。我试过了：

```
UAC.ShellExecute "test.bat", """has spaces""", "", "runas", 1 
```

和

```
UAC.ShellExecute "test.bat", Chr(34) & "has spaces" & Chr(34), "", "runas", 1 
```

和

```
UAC.ShellExecute "test.bat", '"has spaces"', , "runas", 1 
```

和

```
UAC.ShellExecute "cmd", "/c test.bat " & chr(34) & "has spaces" & chr(34), "", "runas", 1 
```

但没有运气。有什么建议我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:17:25.900

让这个工作的方法是：

```
UAC.ShellExecute "cmd", "/c """"c:\test.bat"" ""has spaces""""", "", "runas", 1 
```

使用 runas 调用管理员用户权限时需要注意的重要一点是，工作目录将更改为 c:\windows\system32。因此，您需要指定批处理文件的完整路径，以便可以找到它。

我仍然不确定为什么这只在将 bat 文件作为参数传递给“cmd”时才有效，而不是直接执行它。

所有功劳归功于[Alex K](https://stackoverflow.com/users/246342/alex-k)，所以如果这对您有帮助，请支持他的评论。

在这种情况下，您需要引用 cmd 的整个参数集，以及每个参数。您还需要将引号加倍。它看起来有点疯狂，但这是最好的解决方案，否则如果您在任何参数和 bat 文件路径中有空格，它将失败。

# opencv - ii 不能在 opencv 的 features2d.hpp 中使用函数

> ID：13414497
> 
> 赞同：0
> 
> 时间：2012-11-16T10:16:35.150
> 
> 标签：opencv

我想使用 features2d.hpp 中的函数我知道它们是非自由的，但我仍然想使用它们。我该如何使用它们请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:06:34.197

你还必须包括 nonfree.hpp

```
#include<opencv2/nonfree/nonfree.hpp> 
```

# php - 根据外键复制几个mysql行

> ID：13414500
> 
> 赞同：-1
> 
> 时间：2012-11-16T10:16:41.697
> 
> 标签：php, mysql

我想根据外键复制 mysql 表中的几行，并为新行分配一个新的外键 ID。假设我的表格布局如下所示：

`test`
`-----`
`table1_id int(11)`
`value varchar(20)`

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:16:41.697

发现查询需要如下所示：
`INSERT INTO test (table1_id, value) (SELECT '2', value FROM test WHERE table1_id=1)`

这将复制具有外键 ID '1' 的所有行，并改为分配具有 ID 2 的新行。如果表包含更多行，您可以在 SELECT 部分添加它们或更改顺序，如下所示

`...(SELECT row1, '{$new_id}', value, another_row FROM...`

# php - 功能 Mootools & Ajax to POST date to form

> ID：13414502
> 
> 赞同：2
> 
> 时间：2012-11-16T10:16:44.457
> 
> 标签：php, javascript, ajax, forms, mootools

我的第一个问题:)

我正在使用 Mootools 并且我有一个 JavaScript 函数，我的问题是如何在不刷新页面的情况下将数据发布到表单。

我认为我的代码不适用于 Mootools，请检查并提供建议

```
<script type="text/javascript">
    function (PostData) {
        $.ajax({
            type: "POST",
            url: "form.php",
            data: { userid: 1111, test: 'test'}
        })
    }
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:26:36.897

正如已经说明的那样。$.ajax 方法是一个 Jquery 方法。如果您想在 mootools 中执行此操作，您应该使用请求类。

如果您想要（并且应该）更深入地挖掘，这里是[Mootools 请求文档。](http://mootools.net/docs/core/Request/Request)

这是您想要使用 Mootools 实现的目标

```
var request = new Request({
    url: 'form.php',
    method: 'post',
    data: {
        userId:1111,
        test: 'test'
    },
    onSuccess: function(response){ Whatever you want to do}
}
request.send(); 
```

您还可以使用 Request.JSON 对象，它会自动将响应解码为 Json 对象。

# php - LAMP 堆栈中的哪个应用程序组件设置“Set-Cookie”标头

> ID：13414515
> 
> 赞同：-1
> 
> 时间：2012-11-16T10:17:17.530
> 
> 标签：php, http-headers, session-cookies

我正在使用的应用程序接受三种不同类型的登录。如果客户端从某些 IP 地址或 POST 请求（从普通浏览器呈现的形式）或向 JSON 读取 API 端点连接，则自动连接。

所有三个选项都归结为调用相同的函数来注册用户并生成会话。

尽管据我所知代码路径是相同的，但其中两个始终有效，而一个始终未能将“Set-Cookie”标头添加到响应中，即使应用程序逻辑生成了一个在响应体。

从来不需要深入研究会话身份验证是如何工作到这种详细程度的，我意识到我不明白。**'Set-Cookie' 标头*应该*来自哪里**。应用程序逻辑是否应该始终手动构建标头？[一旦session_start()](http://php.net/manual/en/function.session-start.php)被调用，PHP 会自动执行它吗？Apache 是否基于标头的其他部分执行此操作？

`grep -ri "set.cookie" *`我在我正在使用的代码库中找不到任何东西，从而排除了 1 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:24:11.007

`session_start`发送*会话缓存限制器*和*会话 cookie*（或使用您的 PHPSESSID 设置 $_GET 键）。

此函数是 Set-Cookie 参数的发送来源。然后，Apache 在将页面发回时会将其传递回浏览器。

但是您需要记住，存储 cookie 实际上**取决于浏览器**。总的来说，它们的设置没有问题，但某些条件会阻止这种情况发生，例如 Internet Explorer 中的安全设置或用户完全拒绝 cookie。

进一步阅读：

[http://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

[http://www.php.net/manual/en/function.session-get-cookie-params.php](http://www.php.net/manual/en/function.session-get-cookie-params.php)

[http://www.php.net/manual/en/function.session-status.php](http://www.php.net/manual/en/function.session-status.php)

# javascript - Javascript 值格式。如何以不带 $ 符号的美国货币格式向我们输出我的输出？

> ID：13414524
> 
> 赞同：0
> 
> 时间：2012-11-16T10:17:48.653
> 
> 标签：javascript, forms, formatting, decimal

我有一个表格，可以计算输入金额的总和。我想知道如何使输出从以下内容开始：

> 97.231345

到

> 97.23

我正在尝试使用美国货币格式但没有美元符号，如果可能的话，我可以四舍五入到最接近的百分之一。对于我缺乏知识，我深表歉意，并提前感谢您的所有帮助。我真的很感谢你的时间，谢谢。

```
<script type="text/javascript">
  function addition(){
    a=Number(document.calculator.number1.value);
    b=Number(document.calculator.number2.value);
    c=a+b;
    document.calculator.total.value=c;
  }
</script>
<br/>
<form name="calculator">
  Enter Product Price(s) HERE
  Product A: $ <input name="number1" size="9" type="text"><br>
  Product B: $ <input name="number2" size="9" type="text"><br>
  TOTAL: $<input name="total" size="14" type="text"><br>
  <input onClick="javascript:addition();" value="UPDATE" type="button">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:30:39.450

正确的解决方案是使用`toFixed`，如

```
c=(a+b).toFixed(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:29:08.423

```
function nearestCent(amt) {
    return Math.round(amt*100)/100;
}

function displayNearestCent(amt) {
    var dollars = Math.floor(amt);
    return dollars + "." + Math.round((amt-dollars)*100);
}

c = nearestCent(a + b);
document.calculator.total.value = displayNearestCent(c); 
```

有两个问题需要注意。第一个是您已经看到的，将金额存储为浮点数会导致 0.33333 类型的问题。第二个是即使你四舍五入到美分，你的分数的 javascript 的二进制表示对于每一个美分数都不会是精确的，所以你也需要四舍五入来生成显示字符串。

真正的解决方案是使用整数美分：

```
function nearestCents(amt) {
    return Math.round(amt * 100);
}

function displayCentsInDollars(cents) {
    var dollars = Math.floor(cents/100);
    return dollars + "." + Math.round(cents - 100*dollars);
} 
```

这样，一旦您将金额转换为美分，您就只是使用整数美分。

# jquery - 让 jQuery 动画更流畅

> ID：13414530
> 
> 赞同：1
> 
> 时间：2012-11-16T10:18:00.083
> 
> 标签：jquery, jquery-animate

如何让 jQuery 动画更流畅？
在 Firefox 中，它不像 chrome 甚至 IE 那样平滑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:24:21.630

如果您可以使用 css 过渡来实现动画，请尝试它们，并使用 modernizr 回退到 jquery 动画。

IE 和 chrome 似乎总是使 jquery 动画更流畅。

# javascript - 如何在此处的文本字段中获取输入？

> ID：13414531
> 
> 赞同：0
> 
> 时间：2012-11-16T10:17:59.850
> 
> 标签：javascript, html

我是 JavaScript 新手。我只想在创建的文本字段中输入。

这样我就创建了一个id 为 cstList的**ul 标签。**

并在 onclick 事件上调用函数**listData()**

在里面，我试图在**div 标签**内创建一个**输入标签。**

 **创建后，我无法在文本字段中输入。

谁能告诉我，为什么会这样？

这是我的**listData()**代码

```
function listData()
    {       
        //var a = sessionStorage.getItem('id');
        if(sessionStorage == null)
        {
            alert("Session storage not supported here");
        }
        else
        {
            var ss = sessionStorage.getItem('id');
            alert("storage value is: "+ss);
        }
    var rows = prompt('Please type in the number of required rows');
    var listCode = '';

    for (var i = 0; i < rows; i++) {
        var listID = 'list_' + i.toString();
        var divID = 'div_' + i.toString();
        var inputIdp = 'inputp_'+ i.toString();
        var inputIdq = 'inputq_'+ i.toString();
          //  listCode += '<li id="' + listID + '><div id = "'+ divID + '"> <input type= "text" id= "boltQTY" name= "boltQTY" value = "abc"/> <input type= "text" id= "a" name= "boltQTY" value = "abc" size="5"/></div></li>';

          listCode += "<li id='" + listID + "'><div id = '"+ divID + "'> <input type='text' id='" + inputIdp + "' name='" + inputIdp + "' value='' size='15'/> <input type='text' id='" + inputIdq + "' name='" + inputIdq + "' value='' size='15'/> </div></li>";

            //variable = "string" + var1 + "string=' " + var2 +"' ";
    }
    document.getElementById('cstList').innerHTML = listCode;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:01:08.317

我得到了答案。这就是在 group.google.com 上讨论的 iscroll 的问题。

通过以下代码解决了在文本字段中输入值的问题。

**在新的js**文件中创建此代码。

```
iScroll.prototype.handleEvent = function(e) {
    var that = this,
        hasTouch = 'ontouchstart' in window && !isTouchPad,
        vendor = (/webkit/i).test(navigator.appVersion) ? 'webkit' :
                 (/firefox/i).test(navigator.userAgent) ? 'Moz' :
                 'opera' in window ? 'O' : '',
        RESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',
        START_EV = hasTouch ? 'touchstart' : 'mousedown',
        MOVE_EV = hasTouch ? 'touchmove' : 'mousemove',
        END_EV = hasTouch ? 'touchend' : 'mouseup',
        CANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',
        WHEEL_EV = vendor == 'Moz' ? 'DOMMouseScroll' : 'mousewheel';

    switch(e.type) {
        case START_EV:
            if (that.checkInputs(e.target.tagName)) {
                return;
            }

            if (!hasTouch && e.button !== 0) return;

            that._start(e);
            break;
        case MOVE_EV: 
            that._move(e); 
            break;
        case END_EV:
            if (that.checkInputs(e.target.tagName)) {
                return;
            }
        case CANCEL_EV: 
            that._end(e);
            break;
        case RESIZE_EV: 
            that._resize();
            break;
        case WHEEL_EV: 
            that._wheel(e); 
            break;
        case 'mouseout': 
            that._mouseout(e); 
            break;
        case 'webkitTransitionEnd': 
            that._transitionEnd(e); 
            break;
    }
}

iScroll.prototype.checkInputs = function(tagName) {
    if (tagName === 'INPUT' || tagName === 'TEXTFIELD' || tagName === 'SELECT') {
        return true;
    } else {
        return false;
    }
} 
```**

# c# - 如何在多个浏览器中运行 ActiveX 控件

> ID：13414534
> 
> 赞同：1
> 
> 时间：2012-11-16T10:18:06.927
> 
> 标签：c#, browser, activex

我在 Visual Studio 中创建的应用程序中使用了 ActiveX 控件。它在 Internet Explorer 中完美运行，但现在，我需要在不同的浏览器（例如“chrome”或“Firefox”）中运行该应用程序。请让我知道是否有人这样做过。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:22:11.400

Internet Explorer 是唯一支持运行 ActiveX 控件的浏览器。

您不能在其他浏览器中运行这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:23:20.613

在 mozilla 和 chrome 中安装 IETab 有助于运行 activex 控件

# c# - 从数据表的一列中获取数据

> ID：13414537
> 
> 赞同：-3
> 
> 时间：2012-11-16T10:18:22.970
> 
> 标签：c#, linq, datatable

下面的查询将从列中获取数据，以查看数据是否包含某个字符串。

这是在该列中找到的字符串，我想选择其中行中的所有数据。例如，在数据表中，将是一行，`age[10-20]`并基于此输入字符串，它应该输出字符串所在的所有行`age`

该代码不返回任何数据，也没有任何错误。是否可以根据索引选择列？

```
var result = excelDataTable.AsEnumerable().Where(data => data.Field<String>(0).StartsWith(queryString)); 
```

数据输入 1

```
Age 
```

数据在`DataTable`

```
Age[0-8]         1           1                1
Age[9-11]        2           2                2
season[winter]   4           4                4 
```

根据我要返回的输入

```
Age[0-8]         1           1                1
Age[9-11]        2           2                2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:19:52.710

您可以使用 Select 方法选择列名。

```
var result = importedExcelData.AsEnumerable()
              .Where(data => data.Field<String>("All Respondents")
              .Contains(first))
              .Select(c=>c.Field<String>(0)).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:24:44.047

[`Field`扩展](http://msdn.microsoft.com/en-us/library/bb301394%28v=vs.90%29.aspx)方法也适用于列的索引：

```
var result = importedExcelData.AsEnumerable()
                              .Where(r=> r.Field<String>(0).Contains(first)); 
```

# c++ - DLL 不支持函数模板？

> ID：13414539
> 
> 赞同：1
> 
> 时间：2012-11-16T10:18:32.970
> 
> 标签：c++, templates, dll, header

我尝试在我的 DLL 文件中添加函数模板以使工作更容易，但到目前为止未能这样做，即使我尝试将函数模板放在 DLL 头中，它仍然无法工作，编译器总是给我烦人的未解决每当我尝试在其他程序中使用 DLL 时出现外部符号错误（Visual Studio）。

无论如何在 DLL 中使用函数模板（我知道我可以简单地将所有函数模板放在一个独立的头文件而不是 DLL 中，但这会使程序维护变得一团糟）。

我想在 DLL 中做的是：

```
 template<typename T>int foo(T*x){...}; 
```

然后像这样称呼它：

```
 fooINT(int* x){ return foo<int>(x);}; 
```

DLL可以编译，但它总是会给我错误：

__declspec(dllimport) 的未解析外部符号

每当 Visual Studio 使用调用此 DLL 的程序编译时。

# android - EditText：以编程方式设置字符数

> ID：13414540
> 
> 赞同：18
> 
> 时间：2012-11-16T10:18:35.637
> 
> 标签：android, android-layout, android-intent

我有一个`EditText`，我想限制可以在其中输入**的字符数，并以****编程**`EditText`方式进行此限制，怎么做？例如，假设我想将其限制为仅允许 10 个字符。

 *** * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-16T10:22:55.840

您可以使用[InputFilter](https://developer.android.com/reference/android/text/InputFilter.html)以编程方式限制 EditView 中的字符数：

```
InputFilter[] FilterArray = new InputFilter[1];
FilterArray[0] = new InputFilter.LengthFilter(10);
your_edittext.setFilters(FilterArray); 
```

如需更多帮助，您可以查看本教程以限制 EditView 中的字符数：

[http://www.tutorialforandroid.com/2009/02/maxlength-in-edittext-using-codes.html](http://www.tutorialforandroid.com/2009/02/maxlength-in-edittext-using-codes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:23:26.277

我会实现一个过滤器：

```
InputFilter filter = new InputFilter() {

   @Override
   public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
      if (source.length > 10){
       //cancel the edit or whatever
      }
   }
};
EditText editText = (EditText) findViewById(R.id.rg);
editText.setFilters(new InputFilter[] {filter}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T13:08:26.447

```
public void setEditTextMaxLength(int length) {
    InputFilter[] FilterArray = new InputFilter[1];
    FilterArray[0] = new InputFilter.LengthFilter(length);
    edt_text.setFilters(FilterArray);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-12T14:25:39.007

试试这个我的朋友简单的游戏简单的生活 `InputFilter[] FilterArray = new InputFilter[1]; FilterArray[0] = new InputFilter.LengthFilter(5); input.setFilters(FilterArray);`**

# navision - 反布尔值 Navision

> ID：13414542
> 
> 赞同：2
> 
> 时间：2012-11-16T10:18:42.267
> 
> 标签：navision, dynamics-nav

有没有更简单的方法来反转布尔值而不是使用 IF ELSE 构造？
通常我会使用 ! 在布尔值前面。但这在 Navision 中并不能解决问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:06:25.330

您可以使用`NOT`关键字代替`!`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-08T21:18:01.767

您可以使用此示例反转布尔变量值：

```
PROCEDURE InvertValue(VAR Value @ Boolean;);
begin
  Value := NOT Value;
end; 
```

# jsp - 使用消息存储拦截器的 Struts 2 验证

> ID：13414543
> 
> 赞同：4
> 
> 时间：2012-11-16T10:18:41.570
> 
> 标签：jsp, jakarta-ee, struts2, struts-validation, struts2-interceptors

我有一个尝试让用户登录的操作。

```
public class RegisteredUserAction extends ActionSupport implements SessionAware {
..
..
 public String login() throws Exception {

        DBLogic dBLogic = new DBLogic();
        RegisteredUser user = null;
        try {
            user = dBLogic.getRegisteredUser(getUserUsername(), getUserPassword());
        } catch (CredentialException e) {
            addFieldError("userUsername", e.getMessage());

            addActionError(e.getMessage());
            return INPUT;
        }

        if (user != null) {
            session.put("user", user);
            return SUCCESS;
        }

        return ERROR;
    }
} 
```

如您所见，如果用户名或密码无效，我会抛出一个 CredentialException，然后在我的 fieldError 中填充该异常消息。我什至尝试添加一个操作错误。

通过一些建议和在线搜索，我设法使用 Message Store Interceptor 使用 RegisteredUserAction.action 和 MainAction.action 中的注释分别存储和获取。

```
import org.apache.struts2.convention.annotation.InterceptorRef;
import org.apache.struts2.convention.annotation.InterceptorRefs;
@InterceptorRefs({
    @InterceptorRef(value = "store", params = {"operationMode", "STORE"}),
    @InterceptorRef("defaultStack"),}) 
```

和

```
import org.apache.struts2.convention.annotation.InterceptorRefs;

@InterceptorRefs({
    @InterceptorRef(value = "store", params = {"operationMode", "RETRIEVE"}),
    @InterceptorRef("defaultStack"),}) 
```

这是相关的 struts.xml 文件内容：

```
<package name="pages" extends="struts-default" namespace="/">
        <global-results>
            <result name="displayPage">/WEB-INF/template/page.jsp</result>
            <result name="input">/WEB-INF/template/page.jsp</result>
        </global-results>
        <action name="registrationPage" class="actions.MainAction" 
              method="loadRegistrationPage"></action>
        <action name="loginPage" class="actions.MainAction" 
              method="loadLoginPage"></action>
</package>

<package name="operations" extends="struts-default" namespace="/">

        <action  name="userLogin" class="actions.RegisteredUserAction" method="login">
            <result type="redirect" name="input">loginPage.action</result>
            <result type="redirect" name="success">homePage.action</result>
        </action>
</package> 
```

我正在使用基于模板的方法，其中中间内容（在我的情况下是 LoginPage.jsp）被动态包含到主页中。

我的 page.jsp（包括 mainContent）：

```
<s:include value="../%{mainContent}.jsp" ></s:include> 
```

我的 login.jsp（包括在内）：

```
<%@taglib prefix="s" uri="/struts-tags"%>

<s:form action="userLogin" method="POST">
    <s:textfield name="userUsername" />Error:<s:fielderror name="userUsername" />
    <s:password name="userPassword" />
    <s:submit />
</s:form> 
```

重定向工作正常，登录表单出现，但没有错误。我什至尝试在 struts.xml 中使用消息存储拦截器，但没有成功。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:42:21.647

使用`redirectAction`结果而不是`redirect`. 并尝试在`struts.xml`文件中使用配置而不是注释。

```
<action name="userLogin" class="actions.RegisteredUserAction" method="login">
   <interceptor-ref name="store">
      <param name="operationMode">STORE</param>
   </interceptor-ref>
   <interceptor-ref name="defaultStack" />
   <result type="redirectAction" name="input">loginPage</result>
   <result type="redirectAction" name="success">homePage</result>
</action> 
```

# ide - 如何在 IntelliJ IDEA 中的当前文件上运行外部工具

> ID：13414544
> 
> 赞同：7
> 
> 时间：2012-11-16T10:18:41.160
> 
> 标签：ide, intellij-idea

我需要通过 scp 将当前编辑的 JSP 上传到服务器。我的 Windows 机器上的路径上有 pscp。

如何设置 inteliij idea 以通过单击当前打开的文件来执行此操作？

（我可以在 Eclipse 中进行设置 - 通过“运行工具”和参数占位符）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:33:29.337

在 IntelliJ IDEA 中，此功能称为[External Tools](http://www.jetbrains.com/idea/webhelp/configuring-third-party-tools.html)。您可以将各种变量传递给进程，包括当前文件名。

# java - java清除（不关闭）InputStream

> ID：13414545
> 
> 赞同：1
> 
> 时间：2012-11-16T10:18:43.040
> 
> 标签：java, parsing, inputstream, interactive

我用java编写了一个服务器/客户端应用程序。现在我必须创建一个测试组件来与服务器交互。测试组件本身包含一个处理客户端实例的类（每个都有一个 ProcessBuilder）。

现在问题来了：为了解析服务器响应（找到响应的结尾），我关闭了转义序列中的特定行（例如 \t\b）。这按预期工作，但在向服务器发送特定命令之前，我必须清除 InputStream（丢弃流中的所有内容，如日志条目、状态消息等）。

```
//input=process.getInputStream();
//out = new BufferedWriter(new OutputStreamWriter(process.getOutputStream()));

public String send(String command){
    log.info("execute: " + command);

    try{
        //clear old output
        int chars = input.available();

        log.info("Skip " + chars + " characters from process output.");
        input.skip(chars);

        out.write(command + "\n");
        out.flush();

    }catch (IOException e){
        log.error("could not write to process", e);
    }

    BufferedReader reader = new BufferedReader(new InputStreamReader(input));
    StringBuilder str = new StringBuilder();

    String line;

    try {
        while( (line = reader.readLine()) != null ){
            log.info("new line " + line);

            if(line.contains("\t\b")){
                //skip others
                input.skip(input.available());
                break;
            }
        }
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    return str.toString();
} 
```

但这不起作用。

**示例输出**

```
0    [main] INFO  loadtesting.ClientHandler  - ClientHandler started 1543748404 (localhost 9000 )
6    [main] INFO  loadtesting.ClientHandler  - execute: somecommand
 6    [main] INFO  loadtesting.ClientHandler  - Skip 0 characters from process output.
 112  [main] INFO  loadtesting.ClientHandler  - new line Connection successfully
 113  [main] INFO  loadtesting.ClientHandler  - new line no entries available\t\b 
```

“连接成功”应该被丢弃。

```
113  [main] INFO  loadtesting.ClientHandler  - execute: somecommand
 113  [main] INFO  loadtesting.ClientHandler  - Skip 0 characters from process output.
 114  [main] INFO  loadtesting.ClientHandler  - new line no entries available\t\b

114  [main] INFO  Test  - Test: close
 114  [main] INFO  loadtesting.ClientHandler  - ClientHandler Closed 1543748404
 114  [main] INFO  loadtesting.ClientHandler  - und ciao 
```

**更新** 我发现了问题，但没有解决方案。这是因为 InputStream 的可用方法总是返回 0：

> InputStream 类的可用方法总是返回 0。

现在我将搜索 IS 的一个子节点，它实现了 available()。

# codeigniter - CodeIgniter - 动态 URL 段

> ID：13414548
> 
> 赞同：0
> 
> 时间：2012-11-16T10:18:58.240
> 
> 标签：codeigniter

我想知道是否有人可以帮助我。

我在我的 codeigniter 应用程序中建立了一个论坛，并且在弄清楚我如何构建这些细分市场时遇到了一些麻烦。

根据 CI 用户指南，uri 的构建如下

```
www.application.com/CLASS/METHOD/ARGUMENTS 
```

这很好，只是我需要对那部分进行一些不同的构造。

在我的论坛中，我有类别和帖子，因此要查看类别，请使用以下 url

```
www.application.com/forums 
```

这很好，因为它的类名，但我想让下一个段动态，例如，如果我有一个名为“mycategory”的类别和一个名为“this-is-my-first-post”的帖子，那么结构应该是

```
www.application.com/forums/mycategory/this-is-my-first-post 
```

我似乎无法做到这一点，因为根据文档，“mycategory”需要成为一种方法，即使我要做类似 /forums/category/mycategory/this-is-my-first-post 之类的事情，它仍然会让人感到困惑。

如果有人以前做过这样的事情，请他们为我解释一下，我很坚持这一点。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:31:18.547

文档中没有什么令人困惑的地方，但您有点困惑。让我给你一些建议。
您创建一个视图，在其中创建要单击的超链接，并在超链接中提供此说明

```
<a href="www.application.com/forums/category/mycategory/this-is-my-first-post">First Post</a> 
```

在控制器中你可以很容易地得到这个

```
$category = $this->uri->segment(3);
$post     = $this->uri->segment(4); 
```

现在你可以继续了。如果您认为您的要求是其他东西，您可以使用 hack 我为此创建了一个动态分配段的方法。

转到 system/core/uri.php 并添加此方法

```
function assing_segment($n,$num)
{
    $this->segments[$n] =   $num;
    return $this->segments[$n];
} 
```

如何使用

```
$this->uri->assign_segment(3,'mycategory');
$this->uri->assign_segment(4,'this-is-my-first-post'); 
```

如果您有错误“您提交的 uri 包含不允许的字符”，请转到 application/config/config.php 并将 - 添加到此

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:59:17.507

您可以制作一条转发到查找功能的路线。
例如，在您的 routes.php 中添加类似的行；

```
$route['product/(:any)/(:any)'] = "forums/cat_lookup/$1/$2"; 
```

然后，此函数将执行数据库查找以查找类别。

```
...
public function cat_lookup($cat, $post) {
    $catid = $this->forum_model->get_by_name($cat);
    if ($catid == FALSE) {
        redirect('/home');
    }
    $post_id = $this->post_model->get_by_name($post);
    /* whatever else you want */

    // then call the function you want or load the view
    $this->load->view('show_post');
}
... 
```

如果类别不存在，此方法将使 url 保持您想要的外观并处理任何问题。
不要忘记您可以使用下划线将类别/帖子存储在数据库中，并使用[uri_title()](http://codeigniter.com/user_guide/helpers/url_helper.html)函数使它们漂亮，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-16T22:49:42.457

```
Set in within config/routes.php 

$route['song-album/(:any)/:num'] = 'Home/song_album/$id';

fetch in function  with help of uri segment.

$this->uri->segment(1); 
```

# go - 复合类型和指针方法

> ID：13414549
> 
> 赞同：3
> 
> 时间：2012-11-16T10:18:58.677
> 
> 标签：go

我在根据类型 time.Time 创建自己的类型 Date 时遇到一些问题

我尝试按如下方式创建日期类型：

```
type Date time.Time

func (d Date) UnmarshalJSON(buf []byte) error {
    var s string
    json.Unmarshal(buf, &s)
    t, err := time.Parse(timeLayout,s)
    d= Date(t)
    return err
}

func (d Date) MarshalJSON() ([]byte, error) {
    b,_ := json.Marshal(d.Format(timeLayout))
    return b,nil
} 
```

这本身就有效，我可以将此日期作为 time.Time 存储在 AppEngine Datastore 中。封送处理本身也有效，但不起作用的是：然后当从 json 解组时，日期 d 将填充该值。据我了解，这是因为 unmarshalJson 函数创建了 Date 的副本。

因此，当我将 unmarshalJson 函数更改为使用指向日期的指针时，我无法使用：

```
d=Date(t) 
```

所以第一个问题，有没有解决方案如何做到这一点？

我现在所做的是重写代码如下：

```
type Date struct {
    t time.Time
}

func (d *Date) UnmarshalJSON(buf []byte) error {
    var s string
    json.Unmarshal(buf, &s)
    t, err := time.Parse(timeLayout,s)
    d.t = t
    return err
}

func (d Date) MarshalJSON() ([]byte, error) {
    b,_ := json.Marshal(d.t.Format(timeLayout))
    return b,nil
} 
```

这可行，但在这种情况下 Date 不是 time.Time 的扩展类型，它只是 time.Time 类型的包装器。

有更好的解决方案吗？我还是新手。

我需要这种日期类型，只有日期的 json 格式类型，因为 Chrome 只支持 html5 类型：日期而不是日期时间。并且方法覆盖在 go 中是不可能的（意味着覆盖 time.Time 类型的 un/marshalJson 方法）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:38:07.377

完全未经测试的代码：

```
type Date time.Time

func (d *Date) UnmarshalJSON(buf []byte) error {
        var s string
        json.Unmarshal(buf, &s)
        t, err := time.Parse(timeLayout, s)
        *d = *(*Date)(&t)
        return err
}

func (d *Date) MarshalJSON() ([]byte, error) {
        b, _ := json.Marshal(d.Format(timeLayout))
        return b, nil
} 
```

# node.js - 不同队列并行消费消息+rabbitmq+nodejs

> ID：13414550
> 
> 赞同：3
> 
> 时间：2012-11-16T10:19:08.250
> 
> 标签：node.js, rabbitmq, amqp

看起来唯一用于在 rabbitmq 上编写 nodejs 应用程序的库是

[https://github.com/postwait/node-amqp](https://github.com/postwait/node-amqp)

我有一个生产者以非常快的速度将消息发布到多个队列，而在消费者中我正在为每个队列创建订阅。

```
connection.on('ready', function () {
  for(var i=0;i<queues.length;i++)
  connection.queue(queues[i],{autoDelete:false}, qOnReady);
});
function qOnReady(q){
 // Catch all messages
  logger("Q "+q.name+" is ready");
  q.bind('#');
 // Receive messages
  q.subscribe(subscriber);
} 
```

但是当我运行消费者时，所有消耗的消息都来自特定队列并且直到队列耗尽，订阅不会在另一个队列上开始。我如何实现并行消费消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:00:51.977

您可能希望使用异步库来实现队列的并行执行。

虽然不确定它是否符合您的需求。

[https://github.com/caolan/async#paralleltasks-callback](https://github.com/caolan/async#paralleltasks-callback)

# java - Android - webview 打开额外的活动

> ID：13414554
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:19.793
> 
> 标签：java, android, android-activity, webview

我有一个 android 应用程序，其中主要活动从外部库调用一个函数，然后在必要时打开一个 webview。

打开webview没有问题。当人们/用户关闭网络视图时，我的问题就开始了。似乎 webview（我想，我不确定）在调用外部库的原始应用程序之上打开了一个额外的活动或其他东西。

现在用户必须关闭 2 个窗口，然后才能继续使用原始应用程序。

有没有人有这方面的经验，或者知道这里发生了什么？

**主要活动**

```
public class MainActivity extends Activity
{
    private final String appKey = "Android.Lib.Test";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        externalLib.Initialize(this, getIntent(), appKey);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**外部库**

```
public class externalLib
{
    private static final String TAG = "externalLib";
    private static int messageId;

    public static void Initialize(Context context, Intent intent, String newAppKey)
    {
        Log.d(TAG, "initializing");

        APPKEY = newAppKey;

        if(intent.hasExtra("url"))
        {
            if(intent.getExtras().getString("url") != null)
            {
                Intent webViewIntent = new Intent(context, externalLibWebView.class);
                webViewIntent.putExtra("url", intent.getExtras().getString("url"));
                context.startActivity(webViewIntent);
            }
        }

        if(intent.hasExtra("messageId"))
        {
            messageId = intent.getExtras().getInt("messageId");
            Log.e(TAG, "messageId: " + messageId);
        }
        else
        {
            messageId = 0;
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:45:34.843

我发现了问题所在。我希望 webview 加载 url，但是打开浏览器却将 webview 留空，从而“创建”了额外的活动。现在 webview 加载 url。

# c# - 使用 Stop() 和 Start() 时，有时会启用错误的计时器？

> ID：13414557
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:23.500
> 
> 标签：c#, .net, timer

我在 .net 4.0 中有一个简单的计时器，间隔设置为 1000（= 1 秒）并且启用 = true。要启动我使用的计时器`.Start()`。到目前为止一切正常。

然后在计时器的情况下，我得到了这个：

```
private void MyTimerEvent()
{
    myTimer.Stop();
    myTimer.Start();

    //Some other work is done not related to the timer
} 
```

问题是，一旦计时器事件运行一次，它就会停止抛出事件，并且它似乎设置为`enabled = false`即使在 myTimer.Start(); 之后也是如此。有时。但我根本没有设置`enabled = false`？

我究竟做错了什么？

编辑：`System.Windows.Forms.Timer`是我使用的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:26:17.937

如果您调用`Stop`a`Forms.Timer`它只会执行`Enabled=False`. 与 相同`Start`。如果您的 Timer 是`enabled`，则无需调用`Start`，因为计时器已经在运行。您可以使用 Reflector et al 检查自己：

```
[TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    public void Start()
    {
        this.Enabled = true;
    }

    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    public void Stop()
    {
        this.Enabled = false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:17:01.183

> 我在 init 方法中使用 Start，事件中的 Stop/Start 是将当前计数设置为 0（重新开始），因为该事件可以由另一个回调触发。

那很可能是你的问题。`Start`如果您正在使用/ ，请不要共享计时器`Stop`。您可能应该改用队列，而队列又由`BackgroundThread`.

# android - 监控用户活动的 Android 服务

> ID：13414558
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:24.683
> 
> 标签：android, android-service

后台服务是否可以记录用户在其设备上的每个操作？我只想检查我们的设备是否容易受到此类行为的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:26:09.170

是的。但是根据您的应用程序想要监控的内容，您不需要运行一个`Service`只是为了不断地监控用户的操作。您所需要的只是在发生特定电话事件时`BroadcastReceiver`侦听系统触发的 s 。`Intent`

例如，我曾经构建了一个移动应用程序，它记录所有用户发送的 SMS，检测传入的 SMS、传入和传出的呼叫以及通过 3G 和 WiFi 发送和接收的数据字节数。无耻的插件，我已经在我的网站上发布了一些关于如何做到这一点的教程：http: [//www.mattquiros.com/blog](http://www.mattquiros.com/blog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T19:22:07.373

您也可以通过其他方式进行监控。查看 Browser 类和监控进程以及使用 ActivityManager 正在运行的任务。

# sqlite - 获取“Dart_NewString”：在构建 dart-sqlite 时找不到标识符

> ID：13414561
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:28.873
> 
> 标签：sqlite, dart

这是 dart-sqlite：[https ://github.com/sam-mccall/dart-sqlite](https://github.com/sam-mccall/dart-sqlite)

尝试构建它，因为我需要 32 位版本。也有可能在32位中获得它吗？

我设置了 dart-sdk 的路径，设置了 sqlite 源的路径并尝试构建：

```
D:\Contrib\dart-sqlite>build
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.40219.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

dart_sqlite.cc
src\dart_sqlite.cc(42) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(43) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(44) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(97) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(121) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(123) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(124) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(195) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(229) : error C3861: 'Dart_NewString': identifier not found
src\dart_sqlite.cc(266) : error C3861: 'Dart_IsString8': identifier not found
Generating Code...
Compiling...
sqlite3.c
Generating Code... 
```

我必须切换编译器..吗？还是有什么我想念的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:58:55.577

在我们的代码中，大多数 Dart_NewString 的使用都被一个实用函数 NewString 所取代：

```
// Create a new Dart String object from a C String.
static Dart_Handle NewString(const char* str) {
  ASSERT(str != NULL);
  return Dart_NewStringFromUTF8(reinterpret_cast<const uint8_t*>(str),
                                strlen(str));
} 
```

你可以在 dart_sqlite 中包含这个实用函数，或者直接使用 Dart_NewStringFromUTF8。

可能还有其他问题，因为 Dart 可执行文件现在包含 sqlite 库，作为 NSS（网络安全服务，来自 Mozilla）的一部分，用于在 dart:io 中实现安全套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:54:22.427

快速浏览一下最新的 sdk 头文件 Dart_NewString 已经不存在了。以下签名可用，因此您可能需要更新 sam 的代码。

```
16:53:48-adam@Adams-MacBook-Air:~/dart_bleeding/dart/runtime/include
$ grep -r Dart_NewString *
dart_api.h:DART_EXPORT Dart_Handle Dart_NewStringFromCString(const char* str);
dart_api.h:DART_EXPORT Dart_Handle Dart_NewStringFromUTF8(const uint8_t* utf8_array,
dart_api.h:DART_EXPORT Dart_Handle Dart_NewStringFromUTF16(const uint16_t* utf16_array,
dart_api.h:DART_EXPORT Dart_Handle Dart_NewStringFromUTF32(const uint32_t* utf32_array, 
```

# c# - 如何覆盖 SortedList Add 方法以按值排序

> ID：13414564
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:32.043
> 
> 标签：c#, sorting, overriding, sortedlist

我的代码中有一个`SortedList`。我在里面填写键值对。当我添加一个项目时，`SortedList`它会自动按键排序。但我需要按价值对其进行排序。因为这些值是组合框中的可见文本。它们必须按字母顺序排序。我决定编写一个类并从`SortedList`类继承并覆盖该`Add`方法。

但是当我查看[Microsoft 的 SortedList 类](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/clr/src/BCL/System/Collections/SortedList@cs/1305376/SortedList@cs)的代码时，我看到有一个`Insert`方法可以进行排序，不幸的是它是私有的，所以我无法覆盖它。你能帮我解决这个问题吗？

注意：我不能使用`ArrayList`or`Dictionary`或其他东西。我无法管理我们项目中的所有代码。我必须返回 ' `SortedList`' 或 ' `MySortedList`' 派生自`SortedList`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:49:01.077

我的第一个建议是使用自定义比较器，但他没有解决问题。因此，我更详细地调查了 SortedList 的实现，并用以下建议替换了我原来的帖子：

覆盖 Add 方法并使用反射调用私有 Insert 应该可以解决问题

```
private MySortedList()
{
}

public override void Add(object key, object value)
{
    if (key == null || value == null)
    {
        //throw new ArgumentNullException("key", Environment.GetResourceString("ArgumentNull_Key"));
        throw new ArgumentNullException(); // build your own exception, Environment.GetResourceString is not accessible here
    }

    var valuesArray = new object[Values.Count];
    Values.CopyTo(valuesArray , 0);

    int index = Array.BinarySearch(valuesArray, 0, valuesArray.Length, value, _comparer);
    if (index >= 0)
    {
        //throw new ArgumentException(Environment.GetResourceString("Argument_AddingDuplicate__", new object[] { this.GetKey(index), key }));
        throw new ArgumentNullException(); // build your own exception, Environment.GetResourceString is not accessible here
    }

    MethodInfo m = typeof(SortedList).GetMethod("Insert", BindingFlags.NonPublic | BindingFlags.Instance);
    m.Invoke(this, new object[] {~index, key, value});
} 
```

# java - javax.mail.Session 与空主机名，端口和身份验证？

> ID：13414565
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:37.563
> 
> 标签：java, jakarta-mail

我`javax.mail.Session`用来配置会话 `org.springframework.mail.javamail.JavaMailSenderImpl`

在配置`Session`对象时，我将以下属性作为空白传递

1.  邮件.smtp.auth
2.  邮件.smtp.host
3.  邮件.smtp.port

尽管属性为空白，但我仍然可以使用 发送邮件，在这种情况下使用`JavaMailSenderImpl`什么默认值？`session/JavaMailSenderImpl`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:24:20.467

*   mail.smtp.auth - 如果为真，则尝试使用 AUTH 命令对用户进行身份验证。默认为假
*   mail.smtp.host - 要连接的 SMTP 服务器
*   mail.smtp.port - 连接到的 SMTP 服务器端口，如果 connect() 方法没有明确指定一个。默认为 25

# shell - grep 从日志文件中获取计数

> ID：13414567
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:39.620
> 
> 标签：shell, scripting, awk, grep, sh

我必须从文件中获得一定的数量。我使用的 grep 语句是这样的：

```
counter_pstn=0
completed_count_pstn=0
rec=0
for rec in `(grep "merged" update_completed*.log | awk '{print $1}' | sed 's/ //g' | cut -d':' -f2)`
do
if [ $counter_pstn -eq 0 ]
then
completed_count_pstn=$rec
else
completed_count_pstn=$(($completed_count_pstn+$rec))
fi
counter_pstn=$(($counter_pstn+1))
done
echo "Completed Orders PSTN Primary " $completed_count_pstn 
```

但是日志文件包含这种格式的数据：

```
2500 rows merged.
2500 rows merged.
2500 rows merged.
2500 rows merged.2500 rows merged.
2500 rows merged.
2500 rows merged. 
```

结果，它错过了一次合并的计数（例如在输出的第 4 行）。我如何修改 grep 或使用另一个函数来获取计数。请注意，2500 数字可能用于不同的日志。所以我们必须使用“合并的行”模式来获取计数。我试过 -o ,-w grep 选项，但它不起作用。

上述数据的预期输出：

```
17500 
```

实际输出显示：

```
15000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:10:33.533

```
perl -p -lne 's/merged./merged.\n/g' your_file|awk '{a+=$1}END{print a}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:00:46.277

只需将 awk 与 '.' 一起使用。作为记录分隔符，因为这似乎是您想要指示每条记录结尾的内容：

```
$ cat file
2500 rows merged.
2500 rows merged.2500 rows merged.
2500 rows merged.

$ awk -v RS='.' '/merged/{sum+=$1} END{print "sum=" sum}' file
sum=10000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:00:10.627

你的 grep -V 输出是什么？

无论如何，你可以在没有 grep 的情况下做到这一点：

```
sed 's/merged\./\n/g' file|awk '{x+=$1}END{print x}' 
```

测试

```
kent$  echo "2500 rows merged.
2500 rows merged.
2500 rows merged.
2500 rows merged.2500 rows merged.
2500 rows merged.
2500 rows merged."|sed 's/merged\./\n/g'|awk '{x+=$1}END{print x}'                                                                                                         
17500 
```

# php - 哪个性能更好 - if(condition){result} VS if(condition) result;

> ID：13414573
> 
> 赞同：0
> 
> 时间：2012-11-16T10:19:54.900
> 
> 标签：php, performance, conditional, curly-brackets

我知道在这两种情况下性能差异会非常小，但我想知道哪个是用 PHP 编写条件的更实用、性能改进的版本。

```
if(condition){
  result;
} 
```

VS

```
if(condition)
  result; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T10:22:14.373

两者完全相同，都是编码风格，与性能无关。更好地适应你喜欢的风格。

一些提示工具建议使用第一种样式来避免这样的错误：

```
if(condition)
  result;
  foo; // Nothing to do with the condition but you can get confused. 
```

如果您使用花括号，则不会发生这种情况：

```
if(condition){
    result;
}
    foo; // Nothing to do with the condition but now it's clear. 
```

顺便说一句，我没有对 in 中的一个语句使用大括号`if`，因为对于非新手来说，避免这种情况并不难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T10:22:38.880

一行代码不需要大括号；但在一行代码中使用大括号也是一种很好的做法。两者都是一样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T10:22:57.727

老实说，如果有的话，差异将是微不足道的。如果除了格式化之外没有其他原因，我将永远是您{}。如果这些天任何系统会有显着差异，我会感到惊讶。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T10:21:46.853

甚至没有理由*考虑*这种优化。无论您选择哪种方式（取决于您个人偏好的风格），它们的表现都完全相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:23:59.913

从结果和性能的角度来看，它们是相同的，但是您使用

```
if(condition)
  result; 
```

只有当你有一个语句里面，如果你有更多你使用括号

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T10:35:18.437

如果表达式的值为 TRUE，PHP 将执行语句，如果它的值为 FALSE - 它会忽略它。

如果 $a 大于 $b，以下示例将显示 a 大于 b：

```
<?php
if ($a > $b)
  echo "a is bigger than b";
?> 
```

通常，您希望有多个语句有条件地执行。当然，没有必要用 if 子句包装每个语句。相反，您可以将多个语句组合成一个语句组。例如，如果 $a 大于 $b，此代码将显示 a 大于 b，然后将 $a 的值赋给 $b：

```
<?php
if ($a > $b) {
  echo "a is bigger than b";
  $b = $a;
}
?> 
```

If 语句可以无限嵌套在其他 if 语句中，这为您在条件执行程序的各个部分时提供了完全的灵活性。

供参考使用 php.net

# objective-c - 如何在Objective C中将基于XML的字符串值转换为整数

> ID：13414579
> 
> 赞同：1
> 
> 时间：2012-11-16T10:20:04.910
> 
> 标签：objective-c, ios, xcode4.2, xcode4.3

这是用逗号分隔的 XML 代码，我将其解析为字符串，现在需要转换为整数：.h 文件中的结构：NSString * 位置；

XML 文件：100,280,924,320

这是代码：

```
 NSArray * positons = [partyMember elementsForName:@"position"];
    if (positons.count > 0) {
        GDataXMLElement *firstName = (GDataXMLElement *) [positons objectAtIndex:0];
        //parsed[i].positons = firstName.stringValue;
        parsed[i].positons = firstName.stringValue;
        NSLog(@"position-%@,\n",parsed[i].positons); 
```

名字是本地声明的， parsed[i].positions 具有 da 解析值，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:30:51.763

您可以使用以下方法获取字符串数组：

```
NSArray* arr = [fullStr componentsSeparatedByString:@","] 
```

然后从中得到一个 int

```
int firstInt = [[arr objectAtIndex:0] intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:34:19.163

您可以使用以下代码从字符串中获取整数值：

1.  首先在任何数组中获取逗号分隔的对象，如下所示：

    ```
    NSArray *arrObjects=[parsed[i].positons componentsSeparatedByString:@","]; 
    ```

2.  然后通过使用该数组将字符串值转换为整数，如下所示：

    ```
    int iFirstValue=[[arrObjects objectAtIndex:0] intValue]; 
    ```

对其他人类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T06:43:50.540

这是我所做的:) 在视图控制器中应用它时更改 Objectatindex 值

```
 NSArray * positons = [partyMember elementsForName:@"position"];
    if (positons.count > 0) {
        GDataXMLElement *firstName = (GDataXMLElement *) [positons objectAtIndex:0];
        //parsed[i].positons = firstName.stringValue;
        parsed[i].positons = firstName.stringValue;
        NSLog(@" parsed position is %d, i = %d\n",[parsed[i].positons integerValue],i);
        NSArray* arr = [parsed[i].positons componentsSeparatedByString:@","];
       // firstStr = [[arr objectAtIndex:0] intValue];
        NSLog(@"position-%d,\n",[[arr objectAtIndex:2] intValue]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:30:23.227

您可以通过以下方式将 NSString 更改为 int 值：

```
[string intValue];
[string floatValue]; 
```

但这仅在值为数字但为字符串形式时才有意义，

# email - Selenium IDE - 验证随机生成的电子邮件

> ID：13414582
> 
> 赞同：1
> 
> 时间：2012-11-16T10:20:08.413
> 
> 标签：email, selenium, random, ide, verify

我想使用下面的代码来随机创建电子邮件地址 - 但在我的网站上，我有另一个“类型”字段，需要我之后验证这个电子邮件地址，所以它需要输入生成的特定地址才能使其工作 -我怎么能轻松做到这一点？

```
 <tr>
    <td>storeEval</td>
    <td>Math.round (Math.random() * 1357)</td>
    <td>random</td>
</tr>
<tr>
    <td>type</td>
    <td>email</td>
    <td>selenium${random}@domain.com</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:35:25.493

更改代码以使用对随机数进行计算的变量。将该变量放在 selenium 测试中，使其具有相同的数字。

```
var Random = Math.round (Math.random() * 1357); 
```

然后在页面和 Selenium 测试中使用这个变量。

# kml - KML 和离线可用性

> ID：13414584
> 
> 赞同：0
> 
> 时间：2012-11-16T10:20:10.407
> 
> 标签：kml

如果这是一个菜鸟问题，请提前抱歉。

所有 kml 文件都以大致相同的两行开头：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2"> 
```

在第二行中，引用了一个包含 kml 架构的 Web 地址。

1.  我是否理解每次读取 kml 文件时都会联系这个？
2.  其次，是否有可能（以及如何）不必联系这个（和其他）地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:45:15.937

KML 文件中的*xmlns*引用仅定义 XML 命名空间，该命名空间恰好与定义该命名空间的 XML 模式相关联。

Google 地球或 Google 地图**不会**在每次访问 KML 文件时下载 KML 架构。事实上，它永远不会下载 XML 模式。命名空间只是告诉 GE 如何处理文件。

碰巧 KML 的命名空间 URI 是一个重定向到适当 XML 模式的 URL。

事实上，KML 的完整架构参考如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.opengis.net/kml/2.2
     http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd">
...
</kml> 
```

XML 命名空间的描述可以在这里找到： http: [//www.w3.org/TR/REC-xml-names/#sec-namespaces](http://www.w3.org/TR/REC-xml-names/#sec-namespaces)

在相关说明中，可用于 KML 地标的标准图标（例如*[http://maps.google.com/mapfiles/kml/shapes/airports.png](http://maps.google.com/mapfiles/kml/shapes/airports.png)*）同样不会被 Google 地球客户端下载。这些图像是已安装的 Google 地球应用程序的一部分，Google 地球通过该应用程序将 URL 映射到本地图像文件。

# android - 如何在第一次出现时以编程方式打开 Activity 的 optionMenu？

> ID：13414591
> 
> 赞同：3
> 
> 时间：2012-11-16T10:20:20.073
> 
> 标签：android, android-activity, menu

到目前为止，我试图把线 openOptionsMenu(); 在 onCreate()、onResume() 和从 onCreate() 发送到 runOnUIThread() 的可运行对象中，但还没有运气——我遇到了一个异常：

```
11-16 10:14:57.499: E/AndroidRuntime(939): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running? 
```

我如何确保执行 openOptionsMenu(); 活动正在运行时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:23:47.670

尝试这个。将以下方法添加到您的 Activity 并`openOptionsMenu()`从它调用，就像我在这里展示的那样。

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    openOptionsMenu();
    super.onWindowFocusChanged(hasFocus);
} 
```

# jquery - 使用 jQuery 的全局自定义事件

> ID：13414603
> 
> 赞同：2
> 
> 时间：2012-11-16T10:21:06.930
> 
> 标签：jquery, ember.js

我希望有多个视图对用户所做的事情做出反应。所以我想，一个全球性的自定义活动将是实现我的目标的正确选择。如果有更好的东西，我很高兴有其他想法。

根据[文档](http://emberjs.com/guides/view_layer/#toc_adding-new-events)，我应该能够像这样将自定义事件添加到我的 Ember.js 应用程序中：

```
Mobile = Em.Application.create({
  customEvents: {
    "customevent": "customevent"
  }
}); 
```

不幸的是，文档停在那里，并没有告诉我如何触发事件并将某些东西绑定到它。所以自己尝试了一下，并创建了一个应该“倾听”它的视图：

```
Mobile.HeaderView = Em.View.extend({
  templateName: "header",
  customevent: function() {
    return console.log("Custom event has been fired!");
  }
}); 
```

最后，我在控制台中触发了该事件：

```
$.event.trigger("customevent") 
```

不幸的是，什么也没有发生。

谁能告诉我我做错了什么？或者如果有更好的方法来获得我想要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:09:05.010

我已经解决了我的问题，`Em.Binding`就像 Luke Melia 在他的幻灯片中演示的那样： [http ://www.lukemelia.com/devblog/archives/2012/08/23/architecting-ember-js-apps/](http://www.lukemelia.com/devblog/archives/2012/08/23/architecting-ember-js-apps/)

[来自另一个 StackOverflow 问题的](https://stackoverflow.com/questions/12502465/bindings-on-objectcontroller-ember-js)代码示例：

```
App.FailController = Em.ObjectController.extend({
    content: null,
    my: null,
    myBinding: "App.router.myController", // <-- works
}); 
```

# javascript - CasperJS getElementsByXPath 只返回第一个元素

> ID：13414606
> 
> 赞同：7
> 
> 时间：2012-11-16T10:21:09.400
> 
> 标签：javascript, casperjs

我使用以下代码获取第一个表格行中的所有表格单元格。然后我想检查每个表格单元格的 innerHTML。但在此函数返回的对象中，实际上只有第一个表格单元格存在，所有其他属性均为空：

```
firstRow = this.evaluate(function () {
    return __utils__.getElementsByXPath('//tbody/tr[1]/td');
});

utils.dump(firstRow); 
```

utils.dump 的输出是：

```
[
    {
        "abbr": "",
        "align": "",
        "attributes": {...}
    },
    null,
    null,
    null
] 
```

我也尝试了**utils** .findAll ，结果是一样的。如何获得所有匹配的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:33:56.877

使用 Casper/PhantomJS`evaluate()`函数，您必须将原生 DOM 元素和元素列表映射到 JSON 可序列化的东西：

```
var firstRow = this.evaluate(function () {
    var elements = __utils__.getElementsByXPath('//tbody/tr[1]/td');
    return [].map.call(elements, function(element) {
        return element.outerHTML;
    });
});

utils.dump(firstRow); 
```

# wpf - WPF：将 ItemsSource 更改为 CompositeCollection 时，避免 CustomCombobox 触发 SelectedItem 绑定

> ID：13414611
> 
> 赞同：0
> 
> 时间：2012-11-16T10:21:33.723
> 
> 标签：wpf, combobox, custom-controls, selecteditem, itemssource

我有一个从 ComboBox 派生的自定义控件，我在其中使用 CompositeCollection 将原始 ItemsSource 与其他对象“合并”。

问题是，那

```
CompositeCollection comp = new CompositeCollection();
SomeLogic();
ItemsSource = comp; 
```

将 ItemsSource 设置为组合 Collection 就是将 SelectedItem 设置为 null 并调用 Binding TwoWay Binding 到 ViewModel。然后，我的 ViewModel 中的 SelectedItem 绑定属性将为“null”。

我目前正在通过在分配 ItemsSource 后恢复 SelectedItem 来解决此问题：

```
 Object priorSelectedItem = SelectedItem;
 ItemsSource = comp;    
 SelectedItem = priorSelectedItem; 
```

然而，这只是修复了我的 ViewModel 中 SelectedItem 的值，一个令人讨厌的副作用是，当对象更改时，某些逻辑在 Setter 中运行。EG设置一个

```
_dataHasChanged = true; 
```

旗帜。

所以如果有什么办法我可以

a) 防止 SelectedItem 在更改 ItemsSource 时重置

或者

b) 防止在更改 ItemsSource 时调用 SelectedItem-Binding

**从自定义控件中**（不想处理 20 个 ViewModel，因为控件中存在缺陷）我将非常感谢有关如何执行此操作的任何输入 :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:37:21.263

通过将 SelectedItem-Binding 保存在 OnApplyTemplate() 的私有变量中，然后在应用新的 ItemsSource 后将其清除并设置回变量值，我设法防止了这种行为。

```
 private Binding _selectedItemBinding;
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        _selectedItemBinding = BindingOperations.GetBinding(this, ComboBox.SelectedItemProperty);
        BindingOperations.ClearBinding(this, ComboBox.SelectedItemProperty);
        if (BindingOperations.IsDataBound(this, ComboBox.SelectedItemProperty))
            this.SetBinding(ComboBox.SelectedItemProperty, "dummy");
        ...
    }

 private void AdaptItemSource()
 {
   Object priorSelectedItem = SelectedItem;
   ItemsSource = comp;    
   SelectedItem = priorSelectedItem;

   BindingOperations.SetBinding(this, ComboBox.SelectedItemProperty, _selectedItemBinding);
 } 
```

这对我有用

# php - 将可变长度 URL 映射到数字的简单散列函数 (0...3)

> ID：13414612
> 
> 赞同：3
> 
> 时间：2012-11-16T10:21:34.820
> 
> 标签：php, algorithm, hash

我的网站使用来自单个域的各种资源，例如：

```
http://static.example.com/javascript/common.js
http://static.example.com/javascript/common.css
http://static.example.com/javascript/menu/menu.js
http://static.example.com/javascript/menu/menu.css
http://static.example.com/images/1804/logo/02000100.jpg
http://static.example.com/images/1804/headers/main/09400060.png
http://static.example.com/images/1804/headers/home/1101/06900200-01.jpg
http://static.example.com/images/1804/headers/home/1101/06900200-02.jpg 
```

我需要一个非常简单的字符串散列函数，将这些 URL 映射到数字，数字是 0、1、2 和 3。算法应该是确定性和统一的。我已标记问题 PHP，但可以接受通用答案。

你可能已经猜到我为什么需要这个了；我计划将 URL 更改为，例如：

```
http://0.static.example.com/javascript/common.js
http://2.static.example.com/javascript/common.css 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:29:31.217

我更喜欢`crc32`对字符串进行哈希处理，并将其与限制取模。

代码：

```
function numeric_hash($str, $range) {
    return sprintf("%u", crc32($str)) % $range;
} 
```

用法：

```
$str = "http://static.example.com/javascript/common.js
http://static.example.com/javascript/common.css
http://static.example.com/javascript/menu/menu.js
http://static.example.com/javascript/menu/menu.css
http://static.example.com/images/1804/logo/02000100.jpg
http://static.example.com/images/1804/headers/main/09400060.png
http://static.example.com/images/1804/headers/home/1101/06900200-01.jpg
http://static.example.com/images/1804/headers/home/1101/06900200-02.jpg";
$urls = explode("\n", $str);

foreach($urls as $url) {
    echo numeric_hash($url, 4) . "\n";
} 
```

输出：

```
1
3
3
3
1
3
1
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:27:50.910

如果你有很多 URL，你应该只是一个强大的散列，然后采取`mod <noBuckets>`

```
MD5(URL) % 4 
```

如果您的 URL 很少，或者您的大小或调用频率不均匀，则“随机”分布可能会很糟糕，您应该只创建四个列表并将您的 URL 静态分配给每个列表，无论是手动还是使用基于每个 URL 的请求数的启发式方法.

# javascript - 用javascript绘制流程图并返回绘图变量而不是图片

> ID：13414613
> 
> 赞同：-2
> 
> 时间：2012-11-16T10:21:40.383
> 
> 标签：javascript, flowchart

我想创建一个页面供客户端用户绘制流程图，最重要的是可以返回绘图的值，例如在他绘制的框中输入，而不是最终结果为图片。

谁能给一些建议使用什么以及从哪里开始？谢谢你。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:28:06.713

正如其他人所提到的，您需要使用 PHP 以外的东西来完成绘图部分。 [http://diagramo.com/](http://diagramo.com/)是一个非常好的插件，可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:33:59.267

如果您真的想在纯 PHP 中执行此操作，您可以使用[GD 库](http://php.net/manual/en/book.image.php)在 PHP 中创建图像和绘制形状。如果这是你想要的方向，有一些工具可以帮助你解决这个问题，尽管我现在唯一能找到的就是这个： http: [//phpflow.berlios.de/](http://phpflow.berlios.de/)

但是，我不建议这样做——有更简单的方法可以使用客户端 Javascript 工具来完成所有艰苦的工作；您的 PHP 代码只需要处理数据，Javascript 框架可以绘制漂亮闪亮的图形。

更多参考资料：

*   [JavaScript流程图/流程图库](https://stackoverflow.com/questions/3944723/javascript-flowchart-flow-diagram-lib)
*   [https://stackoverflow.com/questions/2558972/javascript-flowchart-library-for-workflow-visualization](https://stackoverflow.com/questions/2558972/javascript-flowchart-library-for-workflow-visualization)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:23:43.793

您将需要使用客户端语言或应用程序，例如 HTML5、JavaScript 和/或 JavaScript 框架（如 jQuery）或什至像 Flash 之类的东西，它们可以与用户的浏览器（“客户端”）进行交互。这样的事情不能用服务器端语言来完成，它只能与运行它的服务器（你的网络服务器）交互。

有关可能对您有用的 HTML5 画布元素的一些说明，请参阅[Dive Into HTML5 - Canvas](http://diveintohtml5.info/canvas.html "深入了解 HTML5 - 画布")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:24:42.167

PHP 是一个`server-side`组件，而用户交互需要更具交互性的东西，出于某种原因，它被称为`user-side`. 对于网络浏览器，它可以是 JavaScript 或 Java 或 DirectX 或 Flash 或 Silverlight 或类似的东西。但不仅仅是 PHP。

# c++ - 程序在 Xcode 调试器中挂起，但在 Instruments 中没有

> ID：13414625
> 
> 赞同：0
> 
> 时间：2012-11-16T10:22:15.247
> 
> 标签：c++, xcode, macos, debugging, lldb

我正在调试一个用 C++ 编写的游戏，当我尝试在 Xcode 中（在调试模式下）运行它时，它最近开始挂在启动画面上。我无法识别我的代码中可能导致此问题的任何更改，并且在发生此挂起时没有打印任何日志消息（我知道这会严重减慢程序的速度）。然后我打开 Instruments 并使用时间分析器尝试找到问题的根源，但是当我在时间分析器上运行我的程序时，它进展到了挂起的部分，并按预期运行。运行和分析都设置为使用调试模式，因此构建是相同的，有谁知道什么可能导致这样的问题？

更多信息：我使用 LLVM/Clang 作为编译器，使用 LLDB 作为调试器。在挂起期间查看活动监视器，我可以看到游戏显示为“无响应”，并且 Xcode 正在使用大量 CPU 活动，尽管没有打印任何日志消息等。在“编辑方案”中，配置文件方案设置为使用Run 操作的参数和环境变量。

# xml - sencha touch 2 如何使用 jsonp 读取跨浏览器 xml

> ID：13414627
> 
> 赞同：0
> 
> 时间：2012-11-16T10:22:14.497
> 
> 标签：xml, extjs, proxy, sencha-touch-2, jsonp

我有点进退两难。我似乎无法找到如何使用 jsonp 从跨域站点将 xml 读取到我的列表中（因为仅当源位于同一域上时才使用 ajax）。

我与`proxy:{ type:'jsonp', url:'http://www.aftonbladet.se/rss.xml',reader:{type:'xml',record:'item'}}`

但最终在控制台中出现“ Uncaught SyntaxError: Unexpected token < rss.xml:1 ”。

我有一种关于创建某种回调的预感，但就是这样......我有点卡住了。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:08:45.727

JSONP 不是 XML。XML 不是 JSONP。您使用其中一种。

Sencha Touch 中有一个 XML 阅读器。这可能是您正在寻找的：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.data.reader.Xml](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.reader.Xml)

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['id', 'name', 'email']
    }
});

var store = Ext.create('Ext.data.Store', {
    model: 'User',
    proxy: {
        type: 'ajax',
        url : 'users.xml',
        reader: {
            type: 'xml',
            record: 'user'
        }
    }
}); 
```

# mongodb - MongoDB多索引

> ID：13414630
> 
> 赞同：0
> 
> 时间：2012-11-16T10:22:37.317
> 
> 标签：mongodb, indexing

快速提问，你知道 mongo 是否可以在以下数据上创建索引：

```
{
    prices: {
        price1: 0.90,
        price2: 0.12,
        price3: 0.13
    }
} 
```

所以我想做这样的索引，`ensureIndex({prices:1})`但我不确定它是否会包含所有价格及其值。

我需要以这种方式而不是标准数组方法放置数据的原因是因为我希望能够根据选择的价格版本进行排序，即`sort({prices.price:1})`。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:26:50.850

当您`ensureIndex({prices:1})`处理该数据时，您将在 price1、price2 和 price3 的精确组合上创建一个索引。因此，只有当您同时搜索所有三个价格的完全匹配时（搜索或潜在结果中没有额外的价格），该索引才可搜索。

但是，当您像这样构建数据时，您可以搜索单个价格：

```
{
    prices: [
         {version: 1, value: 0.99},
         {version: 2, value: 0.12},
         {version: 3, value: 0.13}
    ]
} 
```

然后，您可以添加一个复合索引，其中包括价格.version、price.value 和父文档中的唯一标识符。这样您就可以通过`{prices.version:1}`或快速搜索产品`{prices.version:2}`。

另请参阅[mongodb 中的索引文档](http://docs.mongodb.org/manual/core/indexes/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:43:31.437

好的，我想我现在明白了。您希望按给定价格版本对集合中的所有文档进行排序。

这不适用于子文档，因为您不能像这样进行位置排序：

```
find({price.version:1}).sort({price.$.version: 1}) 
```

因此，这作为根文档中的平面结构会更好。事实上，在您的示例中，将它放在子文档中除了对实际上使索引更难的数据进行分组之外没有任何实际用途。

因此，我建议您将字段投影到根文档。您可以使用@Philipp 的答案在这里对聚合框架做一些花哨的事情，但听起来这个查询可能会非常频繁地运行，并且可能在更大的工作集上运行。

因此，新的文件结构将是：

```
{
        price1: 0.90,
        price2: 0.12,
        price3: 0.13
} 
```

这就是我在 SQL 和 MongoDB 中做这种事情的方式，它适用于所有字段的复合索引。

当然，由于 MongoDB 是无模式的，当您想向应用程序添加新价格时，您不必担心维护数据库。

# java - Maven + Java 包声明

> ID：13414638
> 
> 赞同：11
> 
> 时间：2012-11-16T10:22:59.753
> 
> 标签：java, maven, package

我们有一个带有*Java*文件的*Maven*项目（打包为 JAR） 。最近向该项目添加了一个新的*Java源文件。*添加 Java 文件的路径与其包声明不匹配。正如预期的那样，Eclipse 在类中显示了不匹配的错误。但是，Maven 可以很好地构建项目。在生成的 JAR 文件中，.class 文件位于包声明指示的路径中。我们尝试将 Java 源文件移动到其他不正确的文件夹（即与包声明不同），但每次 Maven 构建项目都很好。

 **那么，Maven 会忽略 .java 文件所在的实际目录吗？它只考虑包声明吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T10:42:17.820

Maven 编译器插件在内部组装了一个命令行调用，其中包含传递给 javac 的参数，每个源文件一个参数（使用[javac 调用](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#synopsis)[的`sourcefiles`](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#synopsis)版本）。它确实传递了实际的源文件夹，也用于注释处理等元功能，但是当单个源文件传递给 javac 时，这些优先，编译器没有有效的方法来找出哪个文件属于哪个源文件夹，因此不能t 验证包结构。

Maven Compiler Plugin 内部使用[Plexus Compiler API](http://plexus.codehaus.org/plexus-components/plexus-compiler/plexus-compiler-api/)，您可以在这两个类中找到相关代码：

*   [丛编译器 API：`AbstractCompiler`](https://github.com/sonatype/plexus-compiler/blob/master/plexus-compiler-api/src/main/java/org/codehaus/plexus/compiler/AbstractCompiler.java#L188)
*   [丛编译器-javac：`JavacCompiler`](https://github.com/sonatype/plexus-compiler/blob/master/plexus-compilers/plexus-compiler-javac/src/main/java/org/codehaus/plexus/compiler/javac/JavacCompiler.java#L194)**

# python - 文件 .egg 不存在

> ID：13414639
> 
> 赞同：1
> 
> 时间：2012-11-16T10:23:01.697
> 
> 标签：python, panda3d

我正在尝试执行一个使用 PANDA3D 库的 python 脚本。

我有这个错误： `ERROR: the path '\c\virtual-vision-simulator_master\media\scenes\office_floor\skybox.egg' doesn't exist'`

我已检查并且该文件存在于此路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:27:32.653

Panda3D 使用 UNIX 风格的路径，即使在 Windows 上也是如此。这意味着您必须使用正斜杠而不是反斜杠。因此，您应该改用以下路径：

```
/c/virtual-vision-simulator_master/media/scenes/office_floor/skybox.egg 
```

最重要的是，反斜杠在 Python 中有一个特殊的解释（就像在许多其他语言中一样），如果你必须在字符串中使用反斜杠，你必须要么放在`r`字符串前面（如`r"a\b"`），要么你必须使用双反斜杠（如`"a\\b"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:13:55.227

使用 '\' 通常表示转义字符，例如 '\n' 表示下一行。尝试用“/”替换“\”值。

```
'/c/virtual-vision-simulator_master/media/scenes/office_floor/skybox.egg' 
```

# jquery - 如何在 python web.py 中使用 jquery 选中/取消选中复选框

> ID：13414640
> 
> 赞同：0
> 
> 时间：2012-11-16T10:23:04.317
> 
> 标签：jquery, python, html, checkbox, web.py

我正在使用 web.py 框架来开发一个显示数据库中所有记录的小网页。

下面是我的代码

**list_page.html**

```
$def with ( select_query )
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>List Page</title>
</head>
<body>
 <form method="POST" action="/retrieve">
 <table border="1">
   <tr>
    <td>Select</td><td>Column_two</td><td>Column_three</td><td>Column_four</td><td>Column_five</td>
   </tr>
  $for r in select_query:
   <tr>
    <td><p align = "center"><input type="checkbox" id="$r.id" value="" name="$r.id"/></p></td>
    <td>$r.Listing_Name</td><td>$r.Address</td><td>$r.Pincode</td><td>$r.Phone</td>
   </tr>
 </table>
   <br/>
  <p><button id="submit" name="select_unselect">Select All/Unselect All</button></p>
  <p><button id="submit" name="submit">Retrieve</button></p>
</form> 
```

因此，从上面的 html 页面中，来自数据库的结果将以表格的形式出现。

实际上，我正在尝试在 python 中使用 jquery 实现检查/取消选中复选框。

下面是我的**index.py** 代码

```
import web   
render = web.template.render('templates/')
db = web.database(dbn='mysql', db='Browser_Date', user='root', pw='redhat')
urls = ('/',   'Listpage',)
app = web.application(urls, globals())

class Listpage:

    def GET(self):
        select_query = db.select('File_upload')
        return render.list_page(select_query)

    def POST(self):
        i = web.input(groups = {})
        ids =  i.keys()
        ........
        ........
        web.header('Content-Type','text/csv')
        web.header('Content-disposition', 'attachment; filename=csv_file.csv')
        return csv_file.getvalue()

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

概念是网页（上面显示的html）将显示来自数据库的记录，并基于通过选中/取消选中并单击`retrieve`按钮后选择的记录，将在页面上生成一个包含所选记录的csv文件

所以现在我正在尝试使用 jquery 一次检查/取消选中所有复选框，但不知道如何开始以及在上面的 html 代码中编写 jquery 代码的位置，我在 jquery 上搜索但它真的很混乱，所以我接近了.

基本上我是 web 开发的新手，不知道如何实现/使用 jquery，谁能告诉我如何在上述代码/html 文件中实现检查/取消选中复选框功能？这样我就可以轻松地进一步扩展代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:54:46.937

Python、web.py、html、javascript 和 jQuery 令人困惑。

它很强大，但当你第一次尝试理解它时也会很困惑。您必须从混合、多平台应用程序的角度来考虑，因为您实际上是将至少三种不同的技术合并到一种用户体验中。

web.py 服务器和模板只是将 STATIC 内容传送到 Web 浏览器。这就是网络服务器的作用。模板代码允许您在服务器端的 python 中基于查询字符串参数等做出决策，但最终您真正要做的只是将*代码*（html+javscript）传递给另一个解释器（浏览器）。PHP、Ruby、ASP……在这方面它们都是一样的——为浏览器构建一个页面。

一旦请求被传递，浏览器就会接管。如果用户点击了某些东西，它将是处理该点击的 javascript 解释器。Javascript（或 jquery）可以 a) 将用户重定向到不同的页面，b) 在本地操作或 c) 通过 ajax 提交/接收信息。

（jQuery 是 javascript……它只是简化纯 javascript 的一些怪癖的好方法。）

因此，一个典型的工作流程：

*   用户请求`http://localhost/index`
*   web.py 通过 render() 传递主页
*   浏览器绘制主页 html，并处理任何 onload() javascript（页面现在空闲，等待用户交互）
*   用户点击某物，javascript函数评估点击的内容并决定请求更多数据
*   javascript 创建并发出 XmlHttpRequest（或在 jQuery 中... $.ajax() ）
*   web.py 处理请求，假设它是到 /home_tab_2
*   javascript 更新页面（使用 element.innerHTML() 或 jquery `$(element).append()`或其他）

我希望这会有所帮助，因为写下来确实对我的第一个 ajax 应用程序有所帮​​助。

# api - Redmine REST API - 用户

> ID：13414642
> 
> 赞同：1
> 
> 时间：2012-11-16T10:23:17.430
> 
> 标签：api, rest, authentication, redmine

我正在使用 Redmine 的数据编写应用程序。我使用它的 REST API 来获取数据。

它适用于项目或问题，但是当我尝试访问用户的数据时，我无法访问，因为它在浏览器中要求提供凭据，并且它以 HTTP 错误代码 401 响应我的程序的 HTTP 请求。

我如何找到解决此问题的方法？

```
Environment:
  Redmine version                          2.1.2.stable
  Ruby version                             1.8.7 (i386-mingw32)
  Ruby on Rails version                    3.2.8
  Environment                              production
  Database adapter                         MySQL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:50:42.270

我想通了。Redmine wiki 上对其进行了非常详细的描述。

有几个选项可以验证您自己。

最简单的方法是在查询中包含一个加号字段，命名为键。您必须在每个查询中包含您的用户的 REST API 密钥。

像：

```
localhost/redmine/users.xml?key=eaksdnynkdnasdfnaskdsar 
```

这很有趣，因为在早期版本 (2.1.0) 中，它要求对每个 XML 文件进行身份验证。但在我的版本 2.1.3 中，它不会询问，只有当我请求用户数据时。

# c# - 没有 XAML WPF 的新画布

> ID：13414644
> 
> 赞同：0
> 
> 时间：2012-11-16T10:23:18.053
> 
> 标签：c#, wpf, windows

我想在不使用 XAML 的情况下添加一个已经存在的 Canvas 或在窗口中创建一个新的 Canvas。

我有一个像按钮一样工作的类，如果它们被按下，它会产生相同类型的类。这可行，但它们现在没有添加到我的窗口使用的同一画布中，所以我看不到它们。这个类和主窗口应该使用相同的 Canvas。

// 我如何想象代码应该如何（错误） this.Add(ClassThatContainsACanvas.CanvasIWantToUse);

//ClassThatContainsACanvas

```
class BundlePS
{
    public static Canvas OUCanvas = new Canvas();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:00:58.817

您是说要在 MainWindow 中编写一些代码以将静态 Canvas 放入该窗口吗？

如果是这样，调用将是（在 MainWindow 代码中）：

```
this.Content = BundlePS.OUCanvas; 
```

否则，如果我误解了这个问题，请提供更多关于你想要做什么的细节！

# css - 如何使主题图像可点击

> ID：13414646
> 
> 赞同：1
> 
> 时间：2012-11-16T10:23:20.287
> 
> 标签：css, themes

我有一个主题图像，我从信息路径获取并通过 xslt 进行处理。我使用这张图片作为我网站标题的主题。这是我目前的结构

```
<div id="mainContent"> <a href="http://xyz.com">testlink</a></div>
<div id="theme"><a href="http://aaa.com"><img src="abc.jpg" /></a></div> 
```

我通过 position:absolute 和 z-index:-1 将我的主题放在标题栏后面

现在我的问题是，我必须使这个主题图像可点击。但是，如果我在 mainContent div 上有一个链接，那也应该可以。此外，我不能使用图像作为背景，因为我必须使图像路径可配置（通过 infopath）并且不能在 css 中对其进行硬编码。

在 IE 浏览器中，上述结构运行良好，因为 IE 允许我们访问较低 z 索引的 div，我可以单击它。但是其他浏览器不是。我需要一个可以在 IE 7+ 和最新版本的 Firefox、Chrome 和 safari 中运行的通用解决方案

注意：我是在论坛上发布问题的新手，所以如果我的问题有任何不清楚的地方，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:58:59.267

如果您可以更改您的 html，一个解决方案是先放置*主题*div，然后将两个 div 放在*position:absolute*中。那么你就不需要 z-index 了。

可以在此处找到一个简单的示例：[jsFiddle 示例](http://jsfiddle.net/Yzhzj/1/)。

CSS代码是：

```
#theme {
    position: absolute;
    top:0;
    left:0;
}
#mainContent {
    position: absolute;
    top:0;
    left: 0;
} 
```

[受此答案](https://stackoverflow.com/a/3494108/867124)启发的其他方法：将主题图像设置为 mainContent div 的一部分，设置绝对位置和 z-index，以及设置相对位置和更大 z-index 的所有其他内容。请参阅[此示例](http://jsfiddle.net/Yzhzj/4/)。

# ssis - SSIS - 即使在 Foreach 循环容器中的内部任务失败后仍继续包流

> ID：13414648
> 
> 赞同：6
> 
> 时间：2012-11-16T10:23:22.223
> 
> 标签：ssis

*在下图中，尽管*正确处理了（失败的 DFT 的）失败路径，为什么 Foreach 循环容器仍然失败？

**处理失败路径后如何让循环继续？**

![在此处输入图像描述](../Images/031792a9e7bcc3d47896c1a40c434cb2.png)

如果它有助于了解包装中发生的事情，那么要点如下：

> 我们有一个要求，必须将 Excel 文件中的数据加载到数据库中。我们拥有的包将每个 Excel 文件拆分为组成的 CSV 文件（每张 CSV 文件），并将 CSV 加载到数据库中。某些工作表可能存在问题（缺少列、数据类型不匹配等），并且此类错误的 CSV 被 DFT 的失败路径捕获。理想情况下，包必须继续处理其余的 CSV 文件和其余的 Excel 文件，并成功退出。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T16:41:52.787

您是否为该数据流任务定义了任何**OnError事件处理程序？**如果是，您也可以将该错误处理程序范围的系统变量**Propogate （布尔类型）设置为****'False'**。

还请通过[SSIS 包中的优雅处理任务错误](http://sqlblog.com/blogs/rushabh_mehta/archive/2008/04/24/gracefully-handing-task-error-in-ssis-package.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:51:13.590

每个被调用的 SSIS 组件上都有一个属性，`MaximumErrorCount`它定义了在整个包失败之前该特定组件可以接受的错误数。

您必须为要在失败之前继续执行的每个组件增加此值。

# iis - 将 EPI5 从 IIS6 迁移到 IIS7.5

> ID：13414650
> 
> 赞同：1
> 
> 时间：2012-11-16T10:23:25.853
> 
> 标签：iis, episerver

试图将 EPI5 站点从具有 IIS6 的服务器移动到具有 IIS7.5 的服务器。

由于为 IIS6 设置的配置而出现问题。我试过按照说明 [http://world.episerver.com/en/Documentation/Items/Tech-Notes/EPiServer-CMS-5/EPiServer-CMS-5-R2-SP1/Changes-Between-IIS6-and-IIS7 /#更改](http://world.episerver.com/en/Documentation/Items/Tech-Notes/EPiServer-CMS-5/EPiServer-CMS-5-R2-SP1/Changes-Between-IIS6-and-IIS7/#Changes)web.config

有没有人有遵循本指南或从 IIS6 重新配置到 IIS7.x 的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:36:40.617

在这种情况下（多次）我所做的是在具有 IIS 7 的服务器上安装一个新的（空白/演示）EPiServer 5 站点，并在将真实站点从 IIS 6 移动到 IIS 7 时使用这些配置文件作为模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:26:03.843

不正式支持带有 IIS7 的 Windows 2008 上的 EPiServer 4。您可以让它工作 - 一个关键是在经典模式下运行应用程序池。

编辑：您还需要打开池的“32 位”设置。

# c++ - 带有 unique_ptr 的前向声明？

> ID：13414652
> 
> 赞同：88
> 
> 时间：2012-11-16T10:23:35.300
> 
> 标签：c++, destructor, forward-declaration, unique-ptr

`std::unique_ptr`我发现将类的前向声明与下面的代码结合使用很有用。它编译并与 GCC 一起工作，但整个事情看起来有点奇怪，我想知道这是否是标准行为（即标准要求）？由于 B 在我声明`unique_ptr`.

### A.hpp

```
#include <memory>

class B;

class A {
    std::unique_ptr<B> myptr;
    // B::~B() can't be seen from here
public:
    ~A();
}; 
```

### A.cpp

```
#include "B.hpp"
//B.hpp has to be included, otherwise it doesn't work.

A::~A() = default; // without this line, it won't compile 
// however, any destructor definiton will do. 
```

`unique_ptr<B>`我怀疑这与在特定编译单元（A.cpp）中定义的析构函数（因此需要调用 的析构函数）有关。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-11-16T10:36:31.470

这是明确合法的。规则是用于在标准库中实例化模板的类型必须是完整的，*除非*另有说明。在 的情况下`unique_ptr`，§20.7.1/5 说“[...] unique_ptr 的模板参数 T 可能是不完整的类型。”

指针上的某些操作需要完整的类型；特别是，当对象实际被破坏时（至少使用默认删除器）。例如，在您的示例中，如果 `A::~A()`是内联的，这可能会导致问题。（请注意，如果您不自己声明析构函数，它将是内联的。这部分违背了使用的目的`std::unique_ptr`。）

# ssh - 使用 ssh2 exec 执行多个命令

> ID：13414657
> 
> 赞同：1
> 
> 时间：2012-11-16T10:23:43.143
> 
> 标签：ssh, command, exec

我有一个运行一个命令的脚本。基于该结果，我可以运行下一个命令。步骤：运行第一个脚本，它将我置于全局，然后从全局运行下一个命令。
第一个命令：
$stream = ssh2_exec($connection, 'config global');
在这个结果之后我应该运行这个因为我需要进入 global
$stream = ssh2_exec($connection, 'get hardware cpu');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:27:46.303

你可以这样做

```
$stream = ssh2_exec($connection, 'command1;command2'); 
```

# c# - 为什么覆盖 == 必须覆盖等于？

> ID：13414662
> 
> 赞同：8
> 
> 时间：2012-11-16T10:23:59.913
> 
> 标签：c#, .net

> **可能重复：**
> [重写 Equals 方法时是否需要重写 == 和 != 运算符？（。网）](https://stackoverflow.com/questions/1222035/is-it-necessary-to-override-and-operators-when-overriding-the-equals-metho)

C#编译器提示我如果覆盖==，我应该覆盖equals，我只想知道为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T10:25:54.593

如果您通过 重新定义相等性，如果与 做一些非常不同的事情`==`，它会变得**非常**混乱，并且必须作为后备，因为在编译时不知道类型时，只有可用。因此，定义实际上意味着：定义、和，并可能为某些实现。`==``.Equals``.Equals``.Equals``==``==``!=``Equals``GetHashCode``IEquatable<T>``T`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T10:25:34.333

因为否则您将有两个语义相似的操作，可能会产生不同的结果，这意味着很多混乱。

我不确定编译器是阻止你还是只是一个警告，但在任何一种情况下，确保它们的行为相同通常都是好的。

`double.NaN == double.NaN`与vs有类似的东西`double.NaN.Equals(double.NaN)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:40:06.583

因为否则，根据您进行比较的方式，您将获得不同的结果。

做`x == y`可能会产生与做不同的结果`y == x`（如果`x`和`y`是不同的类型）。其他比较，例如在列表中查找值或将其用作字典中的键不使用`==`运算符，因此根本不起作用。

# ruby-on-rails - 将 Rails link_to 用于发布的链接

> ID：13414663
> 
> 赞同：98
> 
> 时间：2012-11-16T10:24:07.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, post, ruby-on-rails-3.2, link-to

我有一个链接，我需要使用该链接提交发布请求。通常，我会使用 jQuery 并阻止链接的默认行为，然后将表单提交到目的地。这似乎是 Rails 应该能够帮助我解决的问题。果然，该`link_to`方法有一个用于指定 POST http 方法的选项：

```
link_to "Profile", 'http://example.com/profile', method: :post 
```

这行得通，但我也需要添加 2 个参数。我试过：

```
link_to "Profile", 'http://example.com/profile', method: post, param1: 'value1', param2: 'value2' 
```

那只是将这些参数添加到`<a>`HTML 元素中，但在单击链接时没有提交这些参数：

```
<a rel="nofollow" param1="value1" param2="value2" data-method="post" href="http://example.com/profile">Profile</a> 
```

有没有办法使用参数`link_to`或任何其他 Rails 方法进行 POST 请求？我正在使用 Rails 3.2.9。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-11-16T10:32:37.797

简短的回答是，如果您所说的“参数”是表单字段，那么您根本无法做到这一点（至少不是以我能看到的直接方式）。您应该使用带有提交按钮的表单，其样式看起来像一个链接（如果您希望它看起来像这样）。

另一方面，如果您的意思是*查询*参数，那么这将起作用：

```
link_to "Profile", profile_path(@profile.id, param1: 'value1', param2: 'value2'), method: :post 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T10:56:00.700

您可以通过这种方式对 URL 中的参数进行编码：

```
link_to "Profile", 'http://example.com/profile?' + {param1: 'value1', param2: 'value2'}.to_param, method: :post 
```

如果它不符合您的需求，您最好使用表单而不是`link_to`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-16T15:09:25.937

请注意，如果用户禁用了 JS 或者您已删除默认提供的不显眼的 JS 库，`link_to`则将通过`GET`请求静默提交。

一般来说，我不太喜欢有执行`POST`请求的链接。我认为这是表单和按钮的作用。

因此，一个简单（且更安全）的替代方法是使用 Rails [button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)助手：

```
button_to 'Profile', profile_path(@profile, param1: 'value1', param2: 'value2') 
```

`button_to`也支持该`method`选项，但由于它默认为`post`所以我只是省略了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-13T05:31:52.017

为了发布数据，您需要一个表单。但是，您不需要提交按钮。如果出于某种原因您希望它看起来像一个链接，您实际上可以使它成为一个通过 JavaScript 提交表单的链接。在下面的示例中，POST 资源只是一个不需要任何字段的 REST 操作，因此没有表单输入控件。如果您想发布一些数据，只需在表单中放置隐藏的输入字段。

```
<%= form_tag('http://something_postable', :method => :post, :class => 'internal') %></form>
<%= link_to_function('Label for Link', 'previous("form").submit()', :title => 'Hover text for link') %> 
```

表单被分配了一个类，因此您可以通过 CSS 设置样式或隐藏它（例如“显示：内联”）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-29T08:18:36.297

参数和http方法要在一起`{param1: 'value1', param2: 'value2', :method: :post}`

```
<%= link_to "Profile", profile_path(@profile), {param1: 'value1', param2: 'value2', method: :post} %> 
```

# sql - 数据透视表字段默认折叠

> ID：13414665
> 
> 赞同：2
> 
> 时间：2012-11-16T10:24:09.477
> 
> 标签：sql, excel, pivot, ssas

是否可以默认所有字段不折叠？

客户抱怨他们需要在打开数据透视表时取消折叠每个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:39:38.773

在 VBA 脚本中是可能的。例如，您可以编写类似的东西（不是最好的解决方案，但它正在工作）：

```
Sub Button1_Click()
    On Error Resume Next
    Dim pf As PivotField
    For Each pf In ActiveSheet.PivotTables("PivotTable1").PivotFields
        pf.DrilledDown = True
    Next pf
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:40:16.497

您可以单击数据透视表，然后单击菜单中的选项，然后单击“按钮 +/-”以禁用它们。

# javascript - 将设置添加到 Charm Windows 8 应用程序

> ID：13414666
> 
> 赞同：3
> 
> 时间：2012-11-16T10:24:09.493
> 
> 标签：javascript, windows-8, windows-store-apps, privacy, windows-store

我的 Windows 应用商店应用程序认证失败，测试人员给我的说明是：

> 该应用程序已声明访问网络功能，并且在 Windows 设置超级按钮中未提供隐私声明。

有没有人对如何解决这个问题有任何想法？

如果有任何解决方案基于 Javascript，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:53:48.040

MS提供的样本很糟糕，但我在[http://eion.robbmob.com/blog/2013/04/02/win8-js-privacy-policy-settings/做了一个简单的解决方案](http://eion.robbmob.com/blog/2013/04/02/win8-js-privacy-policy-settings/)

编辑：在此处附加代码:)

```
var settingsPane = Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();
function commandsRequested(eventArgs) {
    var applicationCommands = eventArgs.request.applicationCommands;
    var privacyCommand = new Windows.UI.ApplicationSettings.SettingsCommand('privacy', 'Privacy Policy', function() {
        window.open('www.link.to.your/privacy_policy.html');
    });
    applicationCommands.append(privacyCommand);
}
settingsPane.addEventListener("commandsrequested", commandsRequested); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:02:11.617

您需要通过 Settings Charm 中的链接为您的应用程序添加隐私声明。请参阅应用程序设置指南 - [http://msdn.microsoft.com/en-us/library/windows/apps/Hh770544.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh770544.aspx)和应用程序设置示例 - [http://code.msdn.microsoft.com/windowsapps/App -settings-sample-1f762f49](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49)。

查看您已安装的现有 Windows 应用商店应用以获取隐私声明示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T06:24:30.463

这是[一篇记录隐私认证失败](http://blogs.msdn.com/b/jennifer/archive/2012/11/15/common-windows-store-certification-errors-4-1-your-app-must-comply-with-privacy-requirements.aspx)的文章。简而言之，如果您不使用网络，请在您的应用清单中取消选中 Internet（客户端）功能，如果您使用了，本文会告诉您在隐私政策中需要什么、在哪里显示隐私政策以及示例链接代码。

# java - 如何使用 SQLite DB 运行 JNLP 文件？

> ID：13414670
> 
> 赞同：0
> 
> 时间：2012-11-16T10:24:12.647
> 
> 标签：java, sqlite, javafx-2, jnlp, java-web-start

我是 JavaFX 的新手。我有一个 JavaFX 应用程序，它正在生成一个 jar 和一个 JNLP 文件。作为数据库，我使用的是 SQLite 数据库。系统在 Netbeans IDE 上运行时运行良好，但无法使用构建文件（jnlp、jar）。问题是使用 JNLP 运行时 JNLP 无法找到数据库位置。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T06:17:03.427

数据库是如何安装的？

假设安装程序可以接受“安装路径”，我倾向于：

1.  使用`installer-desc`元素来启动 Java 代码。
2.  弹出一个`JFileChooser`允许用户创建/选择安装目录
3.  然后它将（该路径）传递给数据库安装程序，并且..
4.  使用`PersistenceService`

当主 GUI 启动时，它可以：

1.  从`PersistenceService`
2.  调用/启动数据库。

用于演示。其中的一些部分，请参阅：

1.  [`PersistenceService`](http://pscode.org/jws/api.html#ps)。_
2.  `installer-desc`调用[`ExtensionInstallerService`](http://pscode.org./jws/api.html#eis). _

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:48:52.427

[为您的应用程序签名](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)以授予它在 jnlp 模式下正确运行所需的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:21:03.680

如果您对正在运行的计算机具有权限并且用户接受了它们，您应该能够将新的数据库文件写入本地系统。

确保检查数据库是否存在，如果不存在则创建它。做不到这一点，有什么例外？

# xaml - C# Windows Store App - 在 xaml 上查找资源

> ID：13414675
> 
> 赞同：1
> 
> 时间：2012-11-16T10:24:22.537
> 
> 标签：xaml, windows-8, microsoft-metro, c#

如果我在 XAML 文件中声明了 9 个 TextBlock，如下所示：

```
<TextBlock Name="cellText_00" Tag="0"/>
<TextBlock Name="cellText_01" Tag="1"/>
<TextBlock Name="cellText_02" Tag="2"/>
<TextBlock Name="cellText_20" Tag="3"/>
...
<TextBlock Name="cellText_22" Tag="8"/> 
```

有一种方法可以从 .cs 与它进行交互，从而获得所需的标签元素？

例如，是否可以给所有相同的名称并以这种方式获取它：

```
TextBlock tb = get(cellText,0); 
```

第一个字段是名称，第二个字段是标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:33:19.427

不，您不能对许多控件使用相同的名称。但是有一个解决方法：使用 FindName 方法：

[http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname(v=vs.95).aspx)

[为什么我不能使用 FindName() 按名称访问文本框](https://stackoverflow.com/questions/1755377/why-cant-i-access-a-textbox-by-name-with-findname)？ 您可以找到与命名空间问题相关的示例和解决方案。

FindName 使用字符串来检索控件。所以你可以做这样的事情：`FindName("cellText_" + identifier);`并获取你需要的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:38:42.010

@Sandrouos，我认为他没有使用相同的名字。

这篇博文完美地解释了它：

[http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html](http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html)

# c# - 在 C# 控制台应用程序中将表单数据发布到服务器

> ID：13414680
> 
> 赞同：0
> 
> 时间：2012-11-16T10:24:51.117
> 
> 标签：c#, .net, post, httpwebrequest, webresponse

我正在尝试使用 C# 控制台应用程序在内部发布此表单中的数据。但我不明白为什么它不起作用。下面是html页面的body标签内的表单。

```
<form method="POST" name="frogs_simple_vmf" action="frog_simple.php">

            <table BORDER="0" cellpadding="5" cellspacing="0" border="0" class="tbl">       

              <tr>
                    <td>
                       <select name='from' onchange='check_ns2(this.form)'>
                          <option value='Sub1'>Sub1</option>
                  <option value='Sub2'>Sub2</option>
                  <option value='Sub3'>Sub3</option>              
                          <option value='Sub4'>Sub4</option>              
                       </select>
                       &nbsp
                       <input type='text' name='spec_id' size='30'>
                    </td>
                  </tr>
                <tr>
                <td>
                <table WIDTH="400" BORDER="0" cellpadding="0" cellspacing="0" >     
                <tr>
                            <td WIDTH="150"><b><a href="javascript:popup('../help/help_avp_light_eu.htm#Run_option', '500', '300');" class="lbl">Run Option:</a></td>
                    <td><b><a href="javascript:popup('../help/help_avp_light_eu.htm#DCN_inter', '500', '300');" class="lbl">DCN Interpretation:</a></td>
                        </tr>
                </table>
                </td>           
                    <td><b><a href="javascript:popup('../help/help_avp_light_eu.htm#User_name', '500', '300');" class="lbl">User Name:</a></td>
                    </tr>
              <tr><td><select name='output' onchange='check_ns2(this.form)'>
               <option value='Va1'>Va2</option>
               <option value='Va2'>Va2</option>

                     </select>&nbsp&nbsp;&nbsp;&nbsp;<input type='text' name='build' size=6> (YYYYWW)</td>
            <td><input type='text' id="time1" name='username' size=12></td>
              </tr>
              <tr>
            <td  colspan="2" class="buttonRow"> 
              <input TYPE="HIDDEN" name="com_site" value="comvmf">
              <input TYPE="SUBMIT" name="Execute" VALUE="Submit" class="btn">&nbsp;
              <input TYPE="RESET" VALUE="Reset" class="btn">&nbsp;                  
            </td>
              </tr>
            </table>
          </form> 
```

这是我的代码：

```
public static string HttpPostWithCookie(string uri, string parameters, CookieContainer cookieContainer, out string result)
        {
            result = "ok";
            // parameters: name1=value1&name2=value2          
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);
            webRequest.CookieContainer = cookieContainer;
            webRequest.Credentials = CredentialCache.DefaultCredentials;
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.Method = "POST";
            byte[] bytes = Encoding.ASCII.GetBytes(parameters);
            System.IO.Stream os = null;
            try
            { // send the Post
                webRequest.ContentLength = bytes.Length;   //Count bytes to send
                os = webRequest.GetRequestStream();
                os.Write(bytes, 0, bytes.Length);         //Send it
            }
            catch (WebException ex)
            {
                result = "HttpPost: Request error" + ex.Message;
            }
            finally
            {
                if (os != null)
                {
                    os.Close();
                }
            }

            try
            { // get the response
                WebResponse webResponse = webRequest.GetResponse();
                if (webResponse == null)
                {
                    result = "Empty response";
                    return null;
                }
                System.IO.StreamReader sr = new System.IO.StreamReader(webResponse.GetResponseStream());
                return sr.ReadToEnd().Trim();
            }
            catch (WebException ex)
            {
                result = "HttpPost: Response error" + ex.Message;
            }
            return null;
        } // end HttpPost 
```

不幸的是，我无法发布数据。有没有其他方法可以将数据发布到网页“frog_simple.php”？我收到的只是一个网络响应，上面写着“>>ERROR。没有提交数据”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:53:15.043

如果这是您的正文标签内容，我想您的第一个错误是您没有打开表单标签。

# vhdl - 如何在 vhdl 中创建包含文件？

> ID：13414682
> 
> 赞同：3
> 
> 时间：2012-11-16T10:25:03.313
> 
> 标签：vhdl

我需要使用一个模块，我之前在另一个模块中使用 vhdl 创建，但我找不到任何有关如何执行此操作的信息。我被迫使用 maxplus2，我发现的唯一一件事是我可以在那里创建包含文件（将具有 .inc 扩展名），但我仍然无法将它包含在我的第二个模块中。我整个上午都在寻找这个信息，但一无所获。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:32:11.547

你没有。

VHDL 没有包含文件，它避免了整个可怕的灾难性不可靠混乱。

VHDL 使用单独的编译，良好的 VHDL 工具（不是全部！）正确跟踪所有依赖项，无需包含或 Makefile。

所以你把你的其他模块编译成一个库——也许是“my_modules”——或者如果你没有指定一个库，只需编译它，它将进入名为“work”的默认库。

然后在你的主模块中命名库（除了总是存在的“工作”）

```
library ieee;
library my_modules; 
```

并命名你想要的东西（模块，包）（除了“工作”......）

```
use ieee.numeric_std.all;
use my_modules.all; 
```

现在您可以使用这些库中的任何内容。使用模块的最简单方法是“直接实体实例化”——搜索它，“VHDL”会告诉你如何做。或者你可以在你的主模块中声明一个与你的其他模块具有相同端口的组件，并且正确的模块将在详细说明时替换该组件（VHDL术语用于链接）。如果您还没有编写库模块，您将需要一个组件 - 即自顶向下设计......否则直接实体实例化更简单。

现在，忽略“my_modules”而只使用“work”——当你得到一个大设计时，使用库来组织它，例如保持硬件和测试台分开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T13:31:55.067

布赖恩有正确的答案给你。我要添加的内容与您的问题有关，因为这是人们使用包含文件的其他内容：

`package`s 是 VHDL 共享数据类型、常量、函数和过程的方式。

# c# - Ajax 调用未从 C# 代码返回响应

> ID：13414683
> 
> 赞同：0
> 
> 时间：2012-11-16T10:25:11.650
> 
> 标签：c#, javascript, jquery, asp.net

这是我的jQuery代码

```
var ajaxUrl = "AjaxCallHandler.aspx";
function _init_Chart() {

$.ajax({
    type: "GET",        //GET or POST or PUT or DELETE verb
    url: ajaxUrl,       // Location of the service
    data: "OpCode=GetCallAverageReportForGraph&Parms=DeptId^17~Month^10~Year^2012",         //Data sent to server
    contentType: "",    // content type sent to server
    dataType: "string",     //Expected data format from server
    processdata: true,  //True or False
    success: function (responseString) {//On Successful service call
        alert(responseString);
    }
});

return false; 
```

}

这是我的 C# 代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string responseMessage = "";
        string status = "SUCCESS";
        try
        {
            if (Request.QueryString["OpCode"] == null)
            {
                throw new Exception("Invalid Request, OpCode missing.");
            }
            string operationRequested = Request.QueryString["OpCode"];
            string Params = Request.QueryString["Parms"];
            switch (operationRequested)
            {
                case "GetCallAverageReportForGraph":
                    responseMessage = GetCallAverageReportForGraph(Params);
                    break;
                case "GetCallAverageReportDetails":
                    responseMessage = GetCallAverageReportDetails(Params);
                    break;
            }
        }
        catch (Exception exp)
        {
            status = "EXCEPTION";
            responseMessage = exp.Message;
        }
        Response.ClearContent();
        Response.ClearHeaders();
        Response.Write(responseMessage);
    } 
```

我尝试在 c# 代码中放置一个断点。它是用`Response.Write`c# 代码编写的，但我无法接收到 jquery 代码中的响应。任何人都可以指出这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:28:00.630

您的代码中有很多遗漏的东西。

您需要一个标有属性的静态方法`WebMethod`：

```
[WebMethod]
public static RetrunValue Foo()
{
    ...
} 
```

数据在 asp.net 中必须是*json*格式。

[你应该阅读这篇文章](http://encosia.com/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:28:12.393

**将数据类型字符串**更改为 html或将其留空作为默认类型

参考[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:42:25.573

以这种方式将代码写入代码隐藏中。

```
Response.Clear();
        Response.Write("Your response in string");
        Response.End(); 
```

请注意，如果您的响应是 HTML，则必须在 Response.Write("Your String") 中传递字符串，如果您的响应是 Json 格式，请像这样编写代码。

```
string json = JsonConvert.SerializeObject(List<object> of your code);
        Response.Clear();
        Response.Write(json);
        Response.End(); 
```

# jquery - 用jquery添加类

> ID：13414684
> 
> 赞同：0
> 
> 时间：2012-11-16T10:25:21.537
> 
> 标签：jquery, css

我使用具有不同 bg 类的 div 容器，例如：

```
<!--Recipes-->
    <div class="PozVideos BgBlue RadiusTopTen">
        <div class="Caption">Yemek tarifleri</div>
        <ul>
            <li><a href=""><img src="" alt=""></a></li>
            <li><a href=""><img src="" alt=""></a></li>
            <li><a href=""><img src="" alt=""></a></li>
            <li><a href=""><img src="" alt=""></a></li>
            <li><a href=""><img src="" alt=""></a></li>
            <li><a href=""><img src="" alt=""></a></li>
        </ul>
    </div>
    <!--Recipes-->
<!--Videos-->
<div class="PozVideos BgPurple RadiusTopTen">
    <div class="Caption">Video Galeri</div>
    <ul>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
    </ul>
</div>
<!--Videos-->
<!--Gallery-->
<div class="PozVideos BgYellow RadiusTopTen">
    <div class="Caption">Fotoğraf Galerileri</div>
    <ul>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
        <li><a href=""><img src="" alt=""></a></li>
    </ul>
</div>
<!--Gallery--> 
```

例如，如何为每个添加另一个不同的背景类`<li>`；

*   如果 PozVideos 类有 BgYellow 类，我想在这个 div.containner(PozVideos) 中为每个 li 元素添加 BgYellowForLi 类。

*   如果 PozVideos 类有 BgPruple 类，我想在这个 div.containner(PozVideos) 中为每个 li 元素添加 BgPurpleForLi 类。

jQuery可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:27:27.123

```
$('.PozVideos.BgYellow li').addClass('BgYellowForLi'); 
```

但是你最好改变你的 CSS：

```
.PozVideos li {
    /* styles that apply for all li's in any PozVideos */
}

.PozVideos.BgYellow li {
   /* styles that apply only to yellow li's */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T10:27:37.603

```
$('.PozVideos.BgYellow').find('li').addClass('BgYellowForLi');

$('.PozVideos.BgPruple').find('li').addClass('BgPurpleForLi'); 
```

您甚至可以编写代码更像他们描述您想用一些 if 语句做什么的方式

```
var $yellowElem = $('.PozVideos.BgYellow li');
if($yellowElem.length > 0) {
  $yellowElem.addClass('BgYellowForLi');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:29:18.403

是的，这是可能的，而且并不复杂：

“如果 PozVideos 类有 BgYellow 类，我想在这个 div.containner(PozVideos) 中为每个 li 元素添加 BgYellowForLi 类”：

```
$('.PozVideos.BgYellow li').addClass('BgYellowForLi'); 
```

“如果 PozVideos 类有 BgPruple 类，我想在这个 div.containner(PozVideos) 中为每个 li 元素添加 BgPurpleForLi 类”：

```
$('.PozVideos.BgPurple li').addClass('BgPurpleForLi'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:29:58.080

动态解决方案：

```
$('#PozVideos').each(function(){

    var classList = $(this).prop('class').split(/\s+/);

    $(this).find('li').addClass(classList[1] + 'ForLi');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:30:20.607

这也可以这样实现：

```
var bgParent = $('.BgYellow');

$('li',bgParent).css({"background":"blue"}); 
```

# java - 在这种情况下将使用哪个类加载器？

> ID：13414695
> 
> 赞同：0
> 
> 时间：2012-11-16T10:25:49.413
> 
> 标签：java, multithreading, classloader, axis, contextclassloader

我有以下问题。
A`HashMap`用于设置属性，键是 a `ClassLoader`。
设置属性的代码如下（`AxisProperties`）：

```
public static void setProperty(String propertyName, String value, boolean isDefault){  
      if(propertyName != null)  
            synchronized(propertiesCache)  
            {  
                ClassLoader classLoader = getThreadContextClassLoader();  
                HashMap properties = (HashMap)propertiesCache.get(classLoader);  
                if(value == null)  
                {  
                    if(properties != null)  
                        properties.remove(propertyName);  
                } else  
                {  
                    if(properties == null)  
                    {  
                        properties = new HashMap();  
                        propertiesCache.put(classLoader, properties);  
                    }  
                    properties.put(propertyName, new Value(value, isDefault));  
                }  
            }  
  } 
```

其中一个值缓存在某处，我需要重置此哈希图，但问题是我不知道如何执行此操作。
我想加载类（委托`axis`使用 a `URLClassLoader`），但我看到代码是`getThreadContextClassLoader();`这样的：

```
public ClassLoader getThreadContextClassLoader()  
{  
   ClassLoader classLoader;  
        try  
        {  
            classLoader = Thread.currentThread().getContextClassLoader();  
        }  
        catch(SecurityException e)  
        {  
            classLoader = null;  
        }  
        return classLoader;  
} 
```

所以我认为它将使用我当前线程的类加载器，而不是我用来加载要使用的类的类加载器（即`axis`）。
那么有没有办法解决这个问题？

**注意：**我已经加载`axis`了我的应用程序的一部分。所以想法是通过不同的类加载器重新加载它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:11:31.753

如果你知道有问题的类加载器，你可以在调用轴之前设置上下文类加载器：

```
ClassLoader key = ...;
ClassLoader oldCtx = Thread.currentThread().getContextClassLoader();
try {
  Thread.currentThread().setContextClassLoader(key);

  // your code here.
}
finally {
  Thread.currentThread().setContextClassLoader(oldCtx);
} 
```

当您在 servlet 容器之外时，您通常必须这样做，但库假定您在其中。例如，您必须在 OSGi 容器中使用 CXF 执行此操作，其中未定义上下文类加载器的语义。您可以使用这样的模板来保持整洁：

```
public abstract class CCLTemplate<R>
{
  public R execute( ClassLoader context )
    throws Exception
 {
    ClassLoader oldCtx = Thread.currentThread().getContextClassLoader();
    try {
      Thread.currentThread().setContextClassLoader(context);

      return inContext();
    }
    finally {
      Thread.currentThread().setContextClassLoader(oldCtx);
    }
  }

  public abstract R inContext() throws Exception;
} 
```

然后在与 Axis 交互时执行此操作：

```
ClassLoader context = ...;
new CCLTemplate<Void>() {
  public Void inContext() {
    // your code here.
    return null;
  }
}.execute(context); 
```

# sql-server - 日期不等于两个日期

> ID：13414709
> 
> 赞同：-2
> 
> 时间：2012-11-16T10:26:19.847
> 
> 标签：sql-server, date-comparison, select-query

我从表中得到数据。表中有一个`datetime`字段。字段名称是`createdon`

在选择查询中，我传递了两个日期时间参数现在我想要`createdon`字段不等于这两个日期时间参数的表中的所有数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:33:20.493

字面解释。

```
SELECT *
  FROM TBL
 WHERE createdon NOT IN (@date1, @date2); 
```

# sql - SQL Server - 从临时表复制数据

> ID：13414716
> 
> 赞同：5
> 
> 时间：2012-11-16T10:26:50.770
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在使用临时表来执行验证并插入到 live 中。

假设我有一张桌子**PERSONS**

```
TABLE Persons
(
Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
HouseNumber int,
) 
```

和一个**暂存表**如下

```
TABLE Persons_Staging
(
Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
HouseNumber varchar(255),
) 
```

我需要编写一个过程来将数据从**临时表**传输到**活动表**，同时确保不插入重复项。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T10:30:46.673

使用[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)命令。

像这样的东西：

```
MERGE 
    INTO Persons AS TARGET
    USING Persons_Staging AS SOURCE
    ON TARGET.ID = SOURCE.ID
    --WHEN MATCHED
    --    THEN UPDATE???
    WHEN NOT MATCHED BY TARGET
        THEN INSERT (Id , LastName , FirstName, HouseNumber)
    VALUES (SOURCE.Id , SOURCE.LastName , SOURCE.FirstName, SOURCE.HouseNumber)
    -- WHEN NOT MATCHED BY SOURCE
    --    THEN DELETE???
; 
```

如果要更新现有记录，请取消注释该`UPDATE`部分并添加合适的更新子句。删除部分也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:22:09.520

您可以在两个表上使用左外连接来获取所有不同的数据。然后您可以将这些数据插入到您的列中

```
INSERT INTO Tab1(front,end,number)
SELECT first,last,nr from tab2 LEFT OUTER JOIN tab1 ON front = first AND last = end AND convert(int,number) = CONVERT(int,nr)
WHERE tab1.ID is null 
```

this could work, on the other hand there are tools made for this kind of stuff

# salesforce - 使用 SOAP API 禁用 SalesForce 触发器

> ID：13414720
> 
> 赞同：1
> 
> 时间：2012-11-16T10:26:59.260
> 
> 标签：salesforce

我正在使用合作伙伴 SOAP API 将数据插入到 salesforce org，但由于对象上的验证和触发器，一些数据没有被插入

如何在插入数据之前禁用验证和触发器？

我想通过 salesforce SOAP API 以编程方式进行

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:37:51.620

我不相信您可以以编程方式禁用它们（设置为非活动状态）。

但是，您可以将自定义设置用作开关，这可以从 apex 访问。但这需要您在所有验证规则和触发器中添加它。

所以你的验证规则和触发器会像

> 如果 switch 为真 ---> 做事

以及当您想要运行不应触发验证规则和触发器的代码时

```
> set switch to false
-----> do stuff  
> set switch to true 
```

# python - 如何使用变量在 Django 模板中索引元组的元素？

> ID：13414721
> 
> 赞同：0
> 
> 时间：2012-11-16T10:27:00.133
> 
> 标签：python, django

我有`week_infos`元组并将其传递给模板

```
{{ week_infos.4.0 }} 
```

这行得通。但是，以下不是：

```
{% for j in 7|get_range %}
    <td row={{j}} col={{i|add:6}}>
        {{  week_infos.j }} 
```

如何访问元组中的特定项目项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:45:05.063

您似乎正在使用范围来对行进行编号，但是，如果您遍历 week_infos 元组，则可以使用[for 循环的计数器执行相同的操作：](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)

```
{% for week_info in week_infos %}
    <td row="{{ forloop.counter0 }}" col="{{ i|add:6 }}">
        {{ week_info }} 
```

（此外，您应该始终将 HTML 属性用引号括起来，因为它们可以包含空格）

# c++ - 析构函数调用了不合适的库

> ID：13414723
> 
> 赞同：2
> 
> 时间：2012-11-16T10:27:07.100
> 
> 标签：c++, linux, g++, siebel

**这是代码：**

foo.h

```
extern "C" {
    int  sdq_init_connector(const SSchar* path);
} 
```

foo.cxx

```
int sdq_init_connector(const SSchar* path)
{
    Logger log(LOG_DEBUG, "sdq_init_connector");

    /*
    here goes some not so relevant code
    */

    log.write("Here be dragons");

    return 0;
 } 
```

还有 Logger 类，它在 foo 中使用，没什么有趣的，constructor(char * message)、destructor() 和 write(char * message)。

**问题总结：**

当我从测试设备调用 libfoo.so 时，它可以正常工作，但是在函数 sdq_init_connector 返回它之后从生产系统调用它时 SEGFAULTs backtrace 下面

```
#10 <signal handler called>
#11 0x583d7fee in Node::~Node() () from /opt/siebel/sba81/siebsrvr/mw/lib/libtl.so
#12 0x583de09a in Logger::~Logger() () from /opt/siebel/sba81/siebsrvr/mw/lib/libtl.so
#13 0x6c86e001 in sdq_init_connector () from /opt/siebel/sba81/siebsrvr/lib/libfoo.so 
```

请注意 #12 有另一个具有相同对象名称的库。为什么我的内部对象需要来自某个外部库的析构函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:42:51.997

Logger 对象的析构函数的签名确实是相同的。

它怎么样：

```
[root@baz ~]# nm -aC /opt/siebel/sba81/siebsrvr/mw/lib/libtl.so| grep Logger
0001a0b0 W Logger::~Logger()
0001a070 W Logger::~Logger()

[root@baz ~]# nm -aC /opt/siebel/sba81/siebsrvr/lib/libfoo.so| grep Logger
000251b8 T Logger::~Logger()
000257ac T Logger::~Logger()
00025d90 T Logger::~Logger() 
```

现在怎么样了：

```
[root@baz ~]# nm -aC /opt/siebel/sba81/siebsrvr/lib/libfoo.so| grep Logger
00025288 T Foo::Logger::~Logger()
0002587c T Foo::Logger::~Logger()
00025e60 T Foo::Logger::~Logger() 
```

我已将命名空间添加到我的库中，它解决了这个问题。

# postgresql - PHP PDO PGPOOL PGSQL - SQLSTATE[HY000]：一般错误：7 没有连接到服务器

> ID：13414724
> 
> 赞同：6
> 
> 时间：2012-11-16T10:27:09.440
> 
> 标签：postgresql, pdo, pgpool

我试着解释我遇到的问题！！！

我使用 PDO 扩展通过 pgpool-II 连接到 PostgreSQL。它在 Apache 中运行良好，但从 PHP CLI（在同一台机器上）我收到此 PDO 错误：

**SQLSTATE[HY000]: 一般错误: 7 没有连接到服务器**

我已经在谷歌和这里搜索过，但似乎没有人尝试过这样做。有人有什么主意吗？

编辑：

这是我用来建立连接的代码：

```
include 'manage_db.php';
include_once 'properties.php';
global $properties;

$dsn = 'pgsql:dbname=' . $properties['db_pgpool'] . ';host=localhost;port=' . $properties['port_pgpool'];

try{
   $mgmtDb = new ManageDb($dsn, $properties['username_pgpool'], $properties['password_pgpool']);
} catch (Exception $e) {
   echo 'PDO - Caught exception: ',  $e->getMessage(), "\n";
} 
```

ManageDB 是我自己的类，它实现了一些实用功能以及创建数据库连接：

```
class ManageDb {
        var $db;

        function ManageDb($dsn, $username, $password){
            $this->db = new PDO($dsn, $username, $password);
            $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }

.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:13:16.330

尝试这个

config.database.php

```
<?php
class DatabaseConfig {

    const DBNAME    = 'dbname';
    const HOST      = '123.1.233.123';
    const USER      = 'mysuperuser';
    const PASSWORD  = 'mysupperparrword';
    const PORT      = 5432; 
}
?> 
```

类.database.php

```
<?php

include('config.database.php');

class Database {

    protected static $instance = null;

    final private function __construct() {}
    final private function __destruct() {
        self::$instance = null;
    }

    final private function __clone() {}

    public static function getInstance() {
        if (self::$instance === null) {
            try {
                self::$instance = new PDO(
                    'pgsql:host='   . DatabaseConfig::HOST . 
                    ';port='        . DatabaseConfig::PORT . 
                    ';dbname='      . DatabaseConfig::DBNAME . 
                    ';user='        . DatabaseConfig::USER . 
                    ';password='    . DatabaseConfig::PASSWORD
                );
                self::$instance->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                self::$instance->setAttribute(PDO::ATTR_EMULATE_PREPARES, true);
            } catch (PDOException $e) {
                die('Database connection could not be established.');
            }
        }

        return self::$instance;
    }
    public static function __callStatic($method, $args) {
        return call_user_func_array(array(self::instance(), $method), $args);
    }
}
?> 
```

# jquery - Iscroll4 ，#scroller 中的菜单无法滚动？

> ID：13414734
> 
> 赞同：2
> 
> 时间：2012-11-16T10:27:55.817
> 
> 标签：jquery, css, scroll, iscroll4, iscroll

我在`#scroller`里面有一个菜单`#wrapper`，它应该能够`#scroller`使用 jquery+css 滚动/移动 div`transform:translate`和`css transition`.

安装`iscroll4`插件后，当我点击它时，它会跳过我的过渡动画，并跳转到该位置。如果我将菜单放在 之外，我可以再次使用我的 css 过渡`#wrapper`滚动。`#scroller`

CSS Transition是滚动页面最流畅的方式。因此**我不想**使用`scrollto`iscroll中的javascript函数，而是在我自己的脚本中触发css转换功能。

另外我认为页面的滚动不如浏览器的默认滚动流畅。如何让iscroll滚动更流畅？

# javascript - 通过Javascript检查加载控制状态的最佳方法是什么

> ID：13414740
> 
> 赞同：1
> 
> 时间：2012-11-16T10:28:06.430
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer

我有一个页面正在检查 jQuery 加载函数中的控件状态。

这工作得很好，但现在注意到它在 IE 中没有。

```
$g(window).load(function() {
   var one = $find("<%= rb1.ClientID%>");
   var two = $find("<%= rb2.ClientID%>");
     alert(1);
        if (one.get_checked()) {      
            alert(2);
            $g('[id$="div1"]').hide();
            $g('[id$="div2"]').show();                    
        }
        else if (two.get_checked()) {   
            alert(3);
            $g('[id$="div1"]').hide();
            $g('[id$="div2"]').show();                
        }     
}); 
```

在 IE 中，控制状态检查永远不会被命中（即我从未看到 2 或 3 的警报，但确实看到 1 的警报）

在其他浏览器中，我没有任何问题，一切都按预期工作。我有没有更好的方法来实现上述内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:31:08.207

您可以使用 jquery 来检查检查状态。

```
isOneChecked = one.is(':checked'); 
```

或使用 javascript。

```
isOneChecked = one[0].checked; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:52:11.387

这似乎是 Telerik 控件的问题。为了解决这个问题，我在单选按钮控件 OnClientLoad 命令而不是 window.onload 上调用一个函数

# java - 我的程序抛出异常，但运行良好

> ID：13414742
> 
> 赞同：0
> 
> 时间：2012-11-16T10:28:14.897
> 
> 标签：java, swing, exception-handling, applet, out-of-memory

这是我正在做的代码：

```
import java.net.*;
import java.applet.*;
import javax.swing.*;
import java.io.*;
import java.awt.*;
import javax.sound.sampled.AudioFileFormat;
class GraphicsProgram extends Canvas
{
public GraphicsProgram()
{ setSize(200, 200);
setBackground(Color.PINK);
}
public static AudioFileFormat ee;
public static AudioClip ss;
public class NEW extends JApplet {
public void init() {
  ss = Applet.newAudioClip(Get_Location("/pj1/anarkali.wav"));
  ss.play();}

public URL Get_Location(String filename)
{
    URL url = null;
    try{ url=this.getClass().getResource(filename);

    }
    catch(Exception e){}
    return url;
  }
  }
   public static void main(String[] argS)
    {
GraphicsProgram GP = new GraphicsProgram();
//create a new frame to which we will add a canvas
Frame aFrame = new Frame(); aFrame.setSize(800, 800);
//add the canvas
aFrame.add(GP);
aFrame.setVisible(true); }
public void paint(Graphics g)
{
Image img01 = Toolkit.getDefaultToolkit().getImage("e:\\m.gif");
g.drawImage(img01, 110, 140, this);
Image img0 = Toolkit.getDefaultToolkit().getImage("e:\\m10.jpg");
g.drawImage(img0, 100, 140, this);
Image img2 = Toolkit.getDefaultToolkit().getImage("e:\\m2.gif");
g.drawImage(img2, 200, 140, this);
NEW ss=new NEW();
ss.init();
}
    } 
```

我得到：线程“AWT-EventQueue-0”中的异常 java.lang.OutOfMemoryError：Java 堆空间

但是，我仍然可以运行它，它正在播放声音并显示图像。这可能吗？为什么我会出现堆空间错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:31:46.530

您收到此异常是因为在每个绘画事件中您都在加载图像。您应该只在初始化时执行一次，然后在 paint 方法中重用图像。

等等……在每一个绘画事件中，你都在创建一个新的实例，`NEW`它就是 Applet 本身。所以你的堆被大量的小程序填满，这是你的问题。

# apache-camel - Apache Camel端点注入直接路由“端点上没有可用的消费者”

> ID：13414743
> 
> 赞同：16
> 
> 时间：2012-11-16T10:28:15.010
> 
> 标签：apache-camel, endpoint, blueprint

我想使用 Camel 从 ActiveMQ 获取消息，然后根据消息内容（protobuf）向 Twitter 发送一条或多条消息。我编写了一个从路由中调用的 bean，它使用注入将多条消息发送到“direct:xyz”端点。

然而，骆驼在运行时抱怨：

```
2012-11-16 09:56:33,376 | WARN  | ication.twitter] | DirectProducer                   | 160 - org.apache.camel.camel-core - 2.10.2 | No consumers available on endpoint: Endpoint[direct://twitter] to process: Exchange[Message: hello world] 
```

如果我直接从 bean 中注入到 Twitter 端点，它工作正常。但是，为了简化测试、简化配置等，我想将实际的 Twitter 配置分开，因此希望发送到单独的路由。

骆驼上下文配置如下所示：-

```
<camelContext id="NotificationTwitter"
    trace="false" xmlns="http://camel.apache.org/schema/blueprint">
    <dataFormats>
        <protobuf id="notificationProto" instanceClass="org.abc.schemas.protobuf.NotificationDef$NotificationMsg" />
    </dataFormats>

    <route id="TwitterPreparation">
        <from uri="activemq:notification.twitter" />
        <unmarshal ref="notificationProto" />
        <log logName="abc" loggingLevel="INFO"
            message="Twitter request received: ${body}" />
        <bean ref="NotificationTweeter" method="createTweets" />
    </route>

    <route id="Twitter">
        <from uri="direct:twitter" />
        <log logName="abc" loggingLevel="INFO"
            message="Tweeting: ${body}" />
        <to uri="twitter://timeline/user?consumerKey=itsasecret&amp;consumerSecret=itsasecret&amp;accessToken=itsasecret&amp;accessTokenSecret=itsasecret" />
    </route>
</camelContext> 
```

豆子看起来像： -

```
public class NotificationTweeter {

  @EndpointInject(uri = "direct:twitter")
  private ProducerTemplate producerTemplate;

  public void createTweets(NotificationMsg notification) {

    String tweet = notification.getMessageDetail().getTitle();

    try {
      // only send tweets where the notification message contains the Twitter mechanism
      for (MechanismMsg mechanism : notification.getMechanismList()) {
        if (mechanism.getType() == MechanismTypeEnum.TWITTER) {

          // Cycle round the recipients
          for (RecipientMsg recipient : mechanism.getRecipientList()) {
            tweet = "@" + recipient.getIdentifier() + " " + tweet;

            producerTemplate.sendBody(tweet);
          }

          // TODO exceptions if no recipients found, etc
        }
      }
    } catch (Exception ex) {
      ex.printStackTrace();
    }
  }
} 
```

我在其他路线上遇到过这个问题（它肯定与 Twitter 功能无关），但刚刚解决了这个问题。但是，这一次，我想真正了解问题所在！感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-04T15:14:10.210

根据您的设置，它也可能取决于`CamelContext`您选择的内容。我收到了同样的错误消息，因为我正在发送的消息存在于另一个路径中，而`CamelContext`不是我实际使用的路径。

（尽管先前的答案已被接受，但这可能是其他人搜索该错误消息的有效解决方案。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T11:59:45.310

这听起来像是您的路线启动排序的问题。在此处查看更多详细信息[http://camel.apache.org/configuring-route-startup-ordering-and-autostartup.html](http://camel.apache.org/configuring-route-startup-ordering-and-autostartup.html)

您可以将“直接”路由配置为在其他路由之前启动，然后应该解决该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T21:54:14.163

对于其他来到这里的人，此错误也可能是由尚未部署的依赖项的 OSGI 错误引起的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-18T08:19:59.763

聚会有点晚了，但是当我有两个单独的蓝图文件时发生了这个错误，一个用于正常运行，一个用于测试。在我的测试中，我指的是测试蓝图，但注意到正常的蓝图也自动启动，导致错误。

在文档[http://camel.apache.org/blueprint-testing.html](http://camel.apache.org/blueprint-testing.html)中，它说您可以禁用某些捆绑包的启动。这对我的情况有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T07:11:15.047

这也可能是由 . 在路线名称中。替换`my.Route.Name`为`myRouteName`解决了我的问题。

# windows-phone-7 - 如何在 windowsphone 上将工具提示添加到图钉

> ID：13414745
> 
> 赞同：1
> 
> 时间：2012-11-16T10:28:17.943
> 
> 标签：windows-phone-7

我一直在写一篇关于 Windows Phone 上的地图的文章。我将图钉默认添加到地图中，其内容是图像。我想在点击或单击图钉时显示信息，但我不知道该怎么做。我刚刚考虑过使用工具提示来显示信息，但我做不到。这是我的 createpushpin 函数。你能帮助我吗？谢谢你的一切！

```
 private void CreateNewPushpin(object selectedItem)
    {

        var pushpinPrototype = selectedItem as Pushpinsmodel;
        var pushpinicon = pushpinPrototype.Icon;

        Pushpin pushpins = new Pushpin() { Tag = adress.Name };
        pushpins.Background = new SolidColorBrush(Colors.Green);
        pushpins.Location = new GeoCoordinate(lad, long);
        ImageBrush image = new ImageBrush() { 
         ImageSource = new System.Windows.Media.Imaging.BitmapImage
        (pushpinicon)};

        Ellipse elip = new Ellipse()
        {
            Fill = image,

            Name = adress.Name,
            StrokeThickness = 10,
            Height = 30,
            Width = 30
        };
            pushpins.Content = elip;
            var tooltipText = new ToolTip { Content = adress.Name};
        ToolTipService.SetToolTip(pushpins, tooltipText);
        map1.Children.Add(pushpins); 
        listpushpin.Add(pushpins);
              this.map1.SetView(pushpins.Location, 18.0); 
```

}

# content-management-system - silverstripe 模型管理内容不向内容作者显示

> ID：13414747
> 
> 赞同：3
> 
> 时间：2012-11-16T10:28:26.027
> 
> 标签：content-management-system, silverstripe

cms 中有一个模型管理部分。对于内容作者，模型管理部分显示在侧边栏中（我已在组权限中将访问权限设置为“模型管理”部分。）但由于某种原因，没有显示数据对象。以管理员身份登录，我可以看到所有内容。

编辑：这通常适用于 GridFields：相关数据对象在内容作者的网格字段中不可见。将 canView 函数添加到数据对象会有所帮助。

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:38:31.807

银条 2.4？

这可能是权限问题。如果缺少以下函数，我会尝试将它们添加到您的托管模型（DataObject 类）中。

```
public function canEdit() {
    return true;
}

public function canDelete() {
    return true;
}

public function canCreate(){
    return true;
}

public function canPublish(){
    return true;
}

public function canView(){
    return true;
} 
```

# facebook - Facebook Like Box 确认页面无法正常工作

> ID：13414754
> 
> 赞同：1
> 
> 时间：2012-11-16T10:28:52.293
> 
> 标签：facebook, http-status-code-404, facebook-likebox, confirmation

我目前正在使用 Facebook Like Box。

我使用了官方的like box生成器。对于所需的输入页面，我使用： [https ://www.facebook.com/pages/Cinta-Buku/265954863527629](https://www.facebook.com/pages/Cinta-Buku/265954863527629)

生成器生成以下代码：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FCinta-Buku%2F265954863527629&amp;width=292&amp;height=590&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=true&amp;header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:590px;" allowTransparency="true"></iframe> 
```

*它有效。*

但是，问题是：每次我尝试用盒子点赞页面时，我都必须确认它。在我点击确认页面的链接后，它显示“找不到您请求的页面”。但我确信我在生成器中插入了正确的页面。

这是确认页面的屏幕截图：

![](../Images/303039e331c255af46d5a6141ecc49a7.png)

以下是确认页面的完整 URL：

```
https://www.facebook.com/plugins/like_confirm.php?href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FCinta-Buku%2F265954863527629&node_type=page&edge_type=like&widget_id=connect_widget_50a60922e85357a20242337 
```

我尝试使用调试器检查 facebook 页面。但是结果很奇怪，我的意思是，facebook生成的页面怎么可能不通过调试器？也许这个调试器不适用于 Facebook 页面。

我在 Stack Overflow 中找到的最接近的问题是 'Facebook Like Button Confirmation Page 说“找不到您请求的页面”'，但这个问题是针对 Like Widget，而不是 Like Box，并且该解决方案对我不起作用。

您可以在此处尝试有问题​​的框：[http](http://www.cintabuku.co.id/) ://www.cintabuku.co.id/ 它位于右下侧边栏中。

所以，是的，我在这里有点难过。有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:55:07.463

我也遇到过这个问题。让我猜猜……一开始，赞框工作正常吗？

发生这种情况是因为 Facebook 试图抓取您想要喜欢的网址（在您的情况下为[http://www.facebook.com/pages/Cinta-Buku/265954863527629](http://www.facebook.com/pages/Cinta-Buku/265954863527629)），但是如果您将其放入调试器中，则会出现错误无法解析。因此，一段时间后，Facebook 会将页面标记为“垃圾邮件”，然后您必须确认（这通常也不起作用）。

Facebook 没有正确抓取页面的原因是因为如果我认为 url 中的数字。因为如果您尝试使用调试器抓取[http://www.facebook.com/ ，它就可以工作。](http://www.facebook.com/)

我在这里并没有真正为您找到真正的解决方案，我们总是必须喜欢外部页面而不是 Facebook 页面本身，但我仍然希望您现在能更好地理解这个问题。

# vb.net - 将 VisualBasic 2010 中的表保存到 .txt 文件

> ID：13414758
> 
> 赞同：0
> 
> 时间：2012-11-16T10:29:17.773
> 
> 标签：vb.net

我正在寻找在下面程序结束时生成的表格，可以选择将其保存到 .txt 中，以便以后可以查看它，但我正在努力实现这一点。

```
 Module Module1
    Dim kTick As Integer
    Dim kName(64) As String
    Dim kHours(64) As Integer
    Dim kHoursPay(64) As Integer
    Dim kGross(64) As Integer
    Dim kTax As Integer = 20
    Dim kNet(64) As Integer
    Dim kTotal As Integer
    Dim kAverage As Integer
    Sub Main()
        'Assigning kTick (Number of employee's)
        Assign()
        'Imputting the data
        Entry()
        'Calculating kGross, kTax, kNet and kTotal
        Print()
    End Sub
    Sub Assign()
        Console.ForegroundColor = ConsoleColor.Gray
        Console.WriteLine("Please enter the total amount of employee's:")
        Console.ForegroundColor = ConsoleColor.White
        kTick = Console.ReadLine()
        Console.Clear()
    End Sub
    Sub Entry()
        For kCounter = 1 To kTick
            Console.ForegroundColor = ConsoleColor.DarkGray
            Console.WriteLine("Employee " & kCounter)
            Console.ForegroundColor = ConsoleColor.Gray
            Console.WriteLine("Please enter the employee name below:")
            Console.ForegroundColor = ConsoleColor.White
            kName(kCounter) = Console.ReadLine()
            Do
                Console.ForegroundColor = ConsoleColor.Gray
                Console.WriteLine("Please enter the employees total hours worked below:")
                Console.ForegroundColor = ConsoleColor.White
                kHours(kCounter) = Console.ReadLine()
            Loop Until kHours(kCounter) >= 0 And kHours(kCounter) <= 60
            Do
                Console.ForegroundColor = ConsoleColor.Gray
                Console.WriteLine("Please enter the employees Hourly Pay below:")
                Console.ForegroundColor = ConsoleColor.White
                kHoursPay(kCounter) = Console.ReadLine()
            Loop Until kHoursPay(kCounter) >= 6 And kHoursPay(kCounter) <= 250
            Console.Clear()
        Next
    End Sub
    Sub Print()
        For kCounter = 1 To kTick
            kGross(kCounter) = kHours(kCounter) * kHoursPay(kCounter)
        Next
        For kCounter = 1 To kTick
            kNet(kCounter) = (kGross(kCounter) / 10) * 8
        Next
        For kCounter = 1 To kTick
            kTotal = kTotal + kHours(kCounter)
        Next
        kAverage = kTotal / kTick
        Console.ForegroundColor = ConsoleColor.Gray
        Console.WriteLine("Name" & vbTab & "Hours" & vbTab & "Hourly Rate" & vbTab & "Gross Pay" & vbTab & "Tax" & vbTab & "Net Pay")
        Console.ForegroundColor = ConsoleColor.White
        For kCounter = 1 To kTick
            Console.WriteLine(kName(kCounter) & vbTab & kHours(kCounter) & vbTab & "£" & kHoursPay(kCounter) & vbTab & vbTab & "£" & kGross(kCounter) & vbTab & vbTab & kTax & "%" & vbTab & "£" & kNet(kCounter))
        Next
        Console.ForegroundColor = ConsoleColor.Gray
        Console.WriteLine("Total hours worked: " & kTotal)
        Console.WriteLine("Total average hours worked: " & kAverage)
        Console.WriteLine("Total number of employees: " & kTick)
        Console.ReadLine()
        Save()
    End Sub
    Sub Save()

    End Sub
End Module 
```

我正在尝试在 Save 子例程中获取代码，任何帮助将不胜感激！

谢谢凯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:33:24.433

请注意：您不应该`Save`来自，`Print`因为两者本质上是无关的。因此，您可能希望打印而不保存或保存而不打印到控制台。

一种简单的方法是使用`File`类，例如使用[`File.WriteAllText(path)`](http://msdn.microsoft.com/en-us/library/ms143375.aspx)or [`File.WriteAllLines(path)`](http://msdn.microsoft.com/en-us/library/dd383693.aspx)。因此，您需要将要输出的文本（到控制台和文件）存储在某处。例如在一个`List(Of String)`变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:33:22.763

您正在寻找[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)类。它有可以帮助你的方法`Write`。`WriteLine`它的工作方式与`Console.WriteLine`您使用的方式相同。

# php - 如何集成 AJAX 避免 PHP CMS 的页面重定向

> ID：13414760
> 
> 赞同：0
> 
> 时间：2012-11-16T10:29:18.147
> 
> 标签：php, mysql, ajax, redirect, content-management-system

我使用了一个用 PHP 和 MySQL 构建的 CMS。它效果很好，我已经根据自己的喜好对其进行了完全定制。现在唯一要做的就是采用更有效的方式加载数据。当用户想要选择一篇文章时，我希望浏览器保持在相同的页面/网址上，而无需重新加载或重定向。这是 CMS 的演示：[DEMO LINK](http://www.elated.com/res/File/articles/development/php/cms-in-an-afternoon-php-mysql/demo/)

例如，上面的代码行是从 homepage.php 脚本中执行的。它是一个锚标签，供用户选择查看特定文章的全部内容，该文章仅部分显示在主页中。单击此链接时，用户会被引导离开主页并转到文章的特定 URL。如何让全文内容页面加载到主页内并隐藏原始主页内容以避免页面重定向问题。这是可以用这个特定的 CMS 完成的吗？如果需要，我可以提供来自 CMS 的任何 PHP 脚本。提前致谢。

**ARCHIVE.php 脚本：**

```
 <?php foreach ( $results['articles'] as $article ) { ?>
    <li>
      <h2>
        <span class="pubDate"><?php echo date('j F Y', $article->publicationDate)?></span><br><a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>"><?php echo htmlspecialchars( $article->title )?></a>
      </h2>
      <p class="summary">
        <?php if ( $imagePath = $article->getImagePath( IMG_TYPE_THUMB ) ) { ?>
          <a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>">

<div class="floated_child0" style="background-repeat:none; background-image:url('<?php echo $imagePath?>');"></div></a>
        <?php } ?>
      <?php echo htmlspecialchars( $article->summary )?>&nbsp;&nbsp;<a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>">(more)</a>
      </p>
    </li>
 <?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:29:16.687

如果您可以使用 ajax 获取文章的内容并将该内容放在该文章的标题下方，例如，假设您在后端有一个 php 函数，您可以调用该函数来获取给定文章 ID 的文章内容，那么您可以发出 GET ajax 请求以获取文章内容并放入所需的 div。就像是：

```
<script language="javascript">
$("#view_more").click(function(){
 var dataString = "id="+article_ID;
          $.ajax({
                type: "GET",
                url: 'http://myhost.com/articles/getArticleContent',
                data: dataString,
                success: function(response) {
                   $('div #description').html(response);
                }
          });
          return false;
      });
</script> 
```

**更新：27-11-2012** 你可以尝试这样的事情，如果这有助于你更好地理解。它可能不是您想要的，但我希望它能帮助您了解如何进行。

```
<?php foreach ( $results['articles'] as $article ) { ?>
    <li>
      <h2>
        <span class="pubDate"><?php echo date('j F Y', $article->publicationDate)?></span><br><a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>"><?php echo htmlspecialchars( $article->title )?></a>
      </h2>
      <p class="summary" id="<?php echo $article->id?>">
        <?php if ( $imagePath = $article->getImagePath( IMG_TYPE_THUMB ) ) { ?>
          <a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>">

<div class="floated_child0" style="background-repeat:none; background-image:url('<?php echo $imagePath?>');"></div></a>
        <?php } ?>
      <?php echo htmlspecialchars( $article->summary )?>&nbsp;&nbsp;<a href="#" onclick="viewFullArticle(<?php echo $article->id?>)">(more)</a>
      </p>
    </li>
 <?php } ?>
<script language="javascript">
function viewFullArticle(article_ID){
 var dataString = "id="+article_ID;
          $.ajax({
                type: "GET",
                url: 'http://myhost.com/articles/getArticleContent',
                data: dataString,
                success: function(response) {
                   $('p #'+article_ID).html(response); //assuming response is everything you want to display within summary paragraph
                }
          });
          return false;
      };
</script> 
```

# awk - 如何从windows word文件中的字符串中awk特定字符

> ID：13414762
> 
> 赞同：0
> 
> 时间：2012-11-16T10:29:21.050
> 
> 标签：awk, cygwin

我有一个 word 文档，我只想选择以整数开头的行。我有 cygwin 并想使用 awk 命令来选择整行...

我正在使用的命令是 awk /n/ document1，但它为我用“n”字母拉线。

例如：

```
129 CalledVPNTop-
GroupNumber
Char[15] Indicates the top group number of the called party.
Value range: numerals within 0-9
Can be null
130 CalledVPNGrou
pNumber
Char[10] Indicates the group number of the called party.
Value range: numerals within 0-9
Can be null
131 CalledVPNShor
tNumber
Char[10] Indicates the short number of the called party
Value range: numerals within 0-9
Can be null
132 CallingNetwork
Type
Char[10] Reserved.
Can be null
133 CalledNetwork-
Type
Char[10] Reserved.
Can be null
134 GroupCallType Char[10] Indicates the call type when the charged subscriber
is a VPN user.
The options are as follows:
l 0: On-net call
l 1: Off-net call
l Other: to be extended 
```

我想提取以 129、130、131 等整数开头的字符，以及之后的 11 个字符。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:34:40.843

对于文本文件，我会使用`awk '/^[:digit:]*/ {print $0}' document.txt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:56:29.467

```
awk '/^[0-9]+/{print substr($0,length($1),11)}' your_file 
```

# php - 仅使用 PHP 创建 Prestashop 主题

> ID：13414763
> 
> 赞同：0
> 
> 时间：2012-11-16T10:29:28.007
> 
> 标签：php, smarty, prestashop

我想知道是否可以只使用 PHP 为 prestashop 创建一个完整的主题，而不使用 Smarty。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:35:24.577

是的，这是可能的。您可以使用 PHP 从 Shop 中读取数据并在没有 Smarty 的情况下进行渲染。但 Smarty 会让您的生活更轻松。

看看： http: [//www.prestashop.com/forums/topic/122579-prestashop-without-using-smarty/](http://www.prestashop.com/forums/topic/122579-prestashop-without-using-smarty/)

# backbone.js - 将页面的每个部分都作为主干视图模板是否可取？

> ID：13414766
> 
> 赞同：0
> 
> 时间：2012-11-16T10:29:34.383
> 
> 标签：backbone.js, uiwebview, underscore.js, backbone-views

我正在使用 Backbone.js 为 iOS 和 Android 制作一个 webview 应用程序。我对 Backbone 有点陌生，我见过一些例子，他们在特定页面/视图的每个部分都使用了骨干的视图模板，即使这些部分只是静态文本或图像。我不确定这是否是正确的方法。在我看来，只有当视图在其表示中动态改变时，才应该在 HTML 中编写一个模板作为模板，在变量等的帮助下。否则，HTML 元素的通常结构就足够了。

请提供您的输入。

谢谢。

# algorithm - 有没有比 Dijkstra 算法更好的方法来找到不超过指定成本的最快路径

> ID：13414769
> 
> 赞同：2
> 
> 时间：2012-11-16T10:29:54.380
> 
> 标签：algorithm, dijkstra

我在寻找不超过指定成本的最快路径时遇到问题。这个问题有类似的问题，但是它们之间有很大的不同。在这里，唯一可以出现在数据中的记录是那些从较低点到较高点的记录（例如，1 -> 3 可能出现，但 3 -> 1 可能不出现）（见下文）。在不知道这一点的情况下，我会使用 Dijkstra。这些额外的信息可能会让它在比 Dijkstras 算法更快的时间内完成。你怎么看待这件事？

假设我有指定的最大成本和 4 条记录。

```
// specified cost
    10 
// end point
    5
//(start point) (finish point) (time) (cost)
    2 5 50 5
    3 5 20 9
    1 2 30 5
    1 3 30 7
// all the records lead from a lower to a higher point no. 
```

我必须决定，是否有可能从点 (1) 到 (5)（当没有成本 <= 比我们拥有的路径或当 1-5 之间没有联系时，这是不可能的）如果是这样，什么将是进入那里的最快方式。

此类数据的输出将是：

```
80 // fastest time
3 1 // number of points that (1 -> 2)  -> (2 -> 5) 
```

请记住，如果有记录说您可以移动**1->2**

```
1 2 30 5 
```

它不允许您移动**2<-1**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:41:37.383

对于深度为 n 的每个节点，到它的最小路径成本是`n/2 * (minimal first edge at the path + minimal edge connecting to the node)`- 算术级数之和。如果此计算超过所需的最大值，则无需检查后面的节点。切断这些节点并在其余节点上应用 Dijkstra。

# iphone - 基于图像的核心图形绘制

> ID：13414772
> 
> 赞同：2
> 
> 时间：2012-11-16T10:30:06.660
> 
> 标签：iphone, objective-c, uiimageview, drawing, core-graphics

我必须绘制许多形状，如矩形、圆形、三角形等。我正在通过核心图形绘制它们。它工作正常。我想问一下，假设我有一个图像（例如 1024*1024 的方形图像），现在我希望我的圆圈绘制为图像，就像我绘制红色圆圈或其他颜色一样，所以如果可以显示我的图像如画在圆圈中，就像图像是圆圈一样，

```
My code for normal circle  drawing:-
- (void)drawRect:(CGRect)rect{

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(ctx, [ [UIColor colorWithRed:255.0/255.0 green:0.0/255.0 blue:0.0/255.0 alpha:1] CGColor]);
    CGContextSetAlpha(ctx, 0.7);
    CGContextMoveToPoint(ctx, radius, radius);
    CGContextAddArc(ctx, radius,radius, radius,  radians(0), radians(360), 0);
    CGContextClosePath(ctx);
    CGContextFillPath(ctx);

} 
```

我想把我的形象画成圆圈。

**基本上我希望我们可以在核心图形中填充颜色，无论是圆形、弧形、三角形。所以有可能用我的图像而不是任何纯色填充我的形状。**

这是否可能，如果是，请建议我如何实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:26:00.863

试试这个在`CGContextSetFillColorWithColor`函数中设置颜色`[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"pattern.jpg"]CGColor];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:20:28.590

在图像上添加一个带有和矩形的 UIView。

在此视图中，您必须绘制孔。

现在我没有mac，我无法检查，但尝试替换

```
CGContextSetFillColorWithColor(ctx, [ [UIColor colorWithRed:255.0/255.0 green:0.0/255.0 blue:0.0/255.0 alpha:1] CGColor]); 
```

和

```
CGContextSetBlendMode(currentContext, kCGBlendModeClear); 
```

让我知道

# jsf - 注入使用带有值的 @Named 的 Bean

> ID：13414785
> 
> 赞同：0
> 
> 时间：2012-11-16T10:30:47.390
> 
> 标签：jsf, cdi, inject

如何注入一个使用`@Named`注释和值的 Bean？

```
@Named
public class LanguageService{
   ...
} 

public class SomeOtherBean{

    @Inject
    private LanguageService languageService
} 
```

工作没有问题 - 但如何注入，如果我使用：

```
@Named("lang")
public class LanguageService{
   ...
} 
```

`@Inject`不能像原来那样有值`@ManagedProperty`。（但我不想留在 CDI）

编辑：我注意到 bean 如何命名并不重要。我的导致 NPE 的错误很简单，我`SomeOtherBean`手动创建了，而且 ofc。没有进行注射。我的错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:50:09.890

CDI 按类型（和限定符）而不是注解参数选择可注入 bean。该名称用于从视图（例如 facelets）中寻址 CDI bean。

# gcc - gcc-4.7 和 openMP 缺少 ___emutls_get_address

> ID：13414786
> 
> 赞同：10
> 
> 时间：2012-11-16T10:30:49.620
> 
> 标签：gcc, openmp, dynamic-linking, gcc4.7

我正在尝试在 Mac OS 10.8.2 上使用自编译的 GCC-4.7.1 编译程序。程序使用openMP，编译成功；但是，当我尝试运行程序时，动态链接器会抱怨

```
dyld: lazy symbol binding failed: Symbol not found: ___emutls_get_address
  Referenced from: /usr/local/gcc-4.7.1/lib/libgomp.1.dylib
  Expected in: /usr/lib/libSystem.B.dylib

dyld: Symbol not found: ___emutls_get_address
  Referenced from: /usr/local/gcc-4.7.1/lib/libgomp.1.dylib
  Expected in: /usr/lib/libSystem.B.dylib 
```

这个问题经常出现在使用 -fopenmp 编译的任何程序中，包括 MWE

```
#include <stdio.h>

int main() {
  #pragma omp parallel
  printf("Hallo!\n");
  return 0;
} 
```

[请注意，什么是“___emutls_get_address”符号](https://stackoverflow.com/questions/7885246/what-is-the-emutls-get-address-symbol)中建议的解决方案？，即`-lgcc_eh`在链接阶段添加，不起作用（我仍然收到相同的 dyld 错误消息）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-04-03T16:37:24.983

我也有同样的问题。而且我是 openMP 的新手，使用 Michal Fapso 提供的解决方案我的技能不是很好。我通过使用解决了这个问题

```
brew link --overwrite gcc 
```

问题就解决了！

也许您可以尝试将 gcc 重新安装到您的 Mac。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T19:06:36.163

我有完全相同的问题。在我的情况下，它是由链接到由 XCode 安装的旧版本 gcc 的库（我不记得是哪个库）引起的，该库位于 /usr/lib 中。当我更正它以链接到我用于编译（在 /usr/local 中）的较新版本的 gcc 库时，此错误已修复。

因此，只需检查您构建的可执行文件及其链接的所有库

```
otool -L EXECUTABLE_OR_DYLIB 
```

如果您发现任何与旧 gcc 库相关的内容，请修复它。

# objective-c - 如何使用 Objective-C 确定音频文件的平均音量？

> ID：13414788
> 
> 赞同：2
> 
> 时间：2012-11-16T10:30:51.053
> 
> 标签：objective-c, audio, volume, decibel

我想比较我正在为学校工作的 iPhone 应用程序的两个音频文件的平均音量（以 dB 为单位）。我在 Xcode，Objective-C 中工作。

经过一些研究，我在 AVFoundation 框架中找到了“averagePowerForChannel：”，但我无法弄清楚它是如何工作的。这是一些代码：

```
NSString *stringPath = [NSBundle mainBundle]pathForResource:wavname ofType:@"wav"];
NSURL *url = [NSURL fileURLWithPath:stringPath];
avPlayer = [[AVaudioPlayer alloc]initWithContentsOfUrl:url error:nil];
[avPlayer play]; 
```

上面的代码播放一个名为“wavname”的 .wav 文件。我如何确定它的平均音量？

```
[avPlayer averagePowerForChannel:0]; 
```

如果我只是在上面添加 te 代码，它将返回 -160.000。我猜这是音频文件开头的音量。

我该如何正确使用它？因为，目前，我不明白为什么它被称为“averagePower”，因为它似乎只在一个时间点检查音量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:54:47.713

`averagePowerForChannel:`只返回播放或录制通道的平均功率。iow，它对于分析整个文件不是很有用。该方法对电流表值很有用（作为一个例子）。

要分析文件，请读取其所有样本数据（例如使用 ExtAudioFile API），计算其[二次平均值](http://en.wikipedia.org/wiki/Root_mean_square)（对于 RMS）。

# java - LDAP 服务器充当 CRM

> ID：13414790
> 
> 赞同：0
> 
> 时间：2012-11-16T10:30:56.473
> 
> 标签：java, ldap, crm, ldif

我目前正在为我的公司开发 CRM 产品。LDAP 用于访问以下信息：

*   用户信息
*   联系信息
*   网络资源

LDAP 可用于查找：

*   加密证书
*   指向打印机的指针
*   服务
*   从各种服务访问同一目录

我目前正在构建这个 CRM 平台的架构。将 LDAP 用作 CRM 存储库是否常见？在上下文中将客户信息存储在 LDAP 中是个好主意吗？

例如，该软件将有客户、产品、订单。

我正在尝试寻找一些架构示例，但似乎找不到大多数 CRM 系统上使用的架构。

我希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:41:21.037

LDAP 最适合存储有关用户的数据——它是一个目录。虽然它可以用来存储几乎任何东西，但我当然不会选择 LDAP 作为 CRM 的数据存储。

你看过[http://www.sugarcrm.com/](http://www.sugarcrm.com/)吗？您仍然可以使用 LDAP 目录来验证用户并执行查找。

# mysql - 为什么我需要双转义（使用 4 \）才能在纯 SQL 中找到反斜杠（ \ ）？

> ID：13414791
> 
> 赞同：6
> 
> 时间：2012-11-16T10:30:56.770
> 
> 标签：mysql, select, escaping, sql-like, backslash

我不理解这种 MySQL 行为：如果我想显示 a\b，我可以选择`"a\\b"`哪个工作没有问题：

```
mysql> select "a\\b";
+-----+
| a\b |
+-----+
| a\b |
+-----+
1 row in set (0.05 sec) 
```

但是，如果我想使用 LIKE 在表中搜索包含 \ 的字符串，我需要双重转义我的“\”。为什么 ？

这是一个例子。

我们准备了一张小桌子。

```
create table test ( test varchar(255) );
insert into test values ( "a\\b" ) , ( "a\\b\\c" ) , ( "abcd" );

mysql> select * from test;
+-------+
| test  |
+-------+
| a\b   |
| a\b\c |
| abcd  |
+-------+
3 rows in set (0.05 sec) 
```

我们尝试获取以“a\b”开头的条目...

```
mysql> select * from test where test LIKE "a\\b%";
+------+
| test |
+------+
| abcd |
+------+
1 row in set (0.05 sec) 
```

为什么`\\`在那里被忽略？为什么我需要双重转义 basckslash 才能获得预期的结果？

```
mysql> select * from test where test LIKE "a\\\\b%";
+-------+
| test  |
+-------+
| a\b   |
| a\b\c |
+-------+
2 rows in set (0.04 sec) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T10:51:50.697

您首先转义字符串语法，然后转义`LIKE`语法。

在`LIKE`字符中`%`并且`_`具有特殊含义，因此如果要搜索文字`%`，则需要使用`\%`，如果要搜索文字，则`\%`需要转义反斜杠，如`\\%`.

在字符串语法`"`中显然具有特殊含义，因此如果要在字符串中包含引号，则需要将其转义为`\"`，而要在字符串中包含文字`\"`，则必须将反斜杠转义为`\\"`。

因此，在这两种语法中，您都必须转义`\`.

* * *

如果不想使用`\`LIKE 模式转义，可以使用 ESCAPE 关键字。例如：

```
...  where test LIKE "a\\b%" ESCAPE '|'; 
```

这样，您需要编写`|%`或`|_`转义`||`这些特殊字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T10:52:50.993

请参阅[字符串比较函数](http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html#operator_like)

`like`运算符与可能包括`%`and的模式进行比较`_`。要逃避这些，您必须使用`\`. 所以反斜杠也是一个特殊字符。

当您输入模式字符串`"a\\\\b"`时，它由 Mysql 解释，然后由 like 运算符再次解释，给出`"a\\b"`and then `"a\b"`。

# integer - 在 fortran 中访问无符号整数值

> ID：13414792
> 
> 赞同：4
> 
> 时间：2012-11-16T10:31:02.757
> 
> 标签：integer, fortran, fortran95, fortran2003

如果我`c_int8_t`在 Fortran 中有一个变量，并且想将底层位解释为无符号整数（用于索引而不是任何算术），那么进行转换的最有效方法是什么？我想做类似的事情

```
X( some_function( my_c_int8_t_var ) ) = 1 
```

其中 X 是一个数组，`some_function`应该返回一个包含 的无符号值的 c_int16_t `my_c_int8_t_var`。我已经看到了包括转移、iadd 在内的选项（或者我猜只是一个带有强制转换和加法的简单条件），但我想知道最有效的方法是什么（这个索引发生在内部循环中）。当然，它不一定是一个函数——如果它可以用一个内联表达式来完成，那就太好了。

编辑：如果该方法也适用于其他整数大小，那就太好了......即用于在 c_int32_t 中获取无符号 c_int16_t 的内容并将无符号 c_int32_t 获取到 c_int64_t 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:58:17.430

您可以使用`transfer()`和`ichar()`功能。就像是

```
X(ichar(transfer(my_c_int8_t_var,"a")))) = 1 
```

例如

```
 use iso_c_binding
 write (*,*) ichar(transfer(-1_c_int8_t,"a"))

 end 
```

返回 255。

当您找不到对应的字符类型（例如，16 位）时，我会编写一个函数，将 huge(1._my_integer_kind) 添加到值中。

```
integer function indx(i)
  integer(c_int16_t),intent(in) :: i

  if (i<0) then
    indx = 2*(huge(i)+1) + i
  else
    indx = i
  end if
end function indx 
```

或者

```
 integer function indx2(i)
    integer(c_int8_t),intent(in) :: i

    indx2 = TRANSFER([i,0_c_int8_t],1_c_int16_t)
  end function indx2 
```

最后一种情况仅适用于 little-endian 平台。

您可以为此函数创建一个通用接口。

```
 write (*,*) indx(-2_c_int16_t) 
```

给出 65534

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:06:39.767

关于什么

```
integer(c_int16_t) :: i, i2(2)
integer(c_int32_t) :: i32

equivalence (i32, i2)

i2(2) = 0 
```

然后在循环内

```
i2(1) = i
X(i32) = 1 
```

这行得通吗？对于 little-endian 平台，我应该将 16 位数据放在 i2(1) 还是 i2(2) 中？

# c++ - Windows 多显示器位置

> ID：13414794
> 
> 赞同：2
> 
> 时间：2012-11-16T10:31:08.890
> 
> 标签：c++, windows, hook, multiple-monitors, window-messages

如果监视器位置发生变化，Windows 会发送任何消息吗？

例如，如果从 WM_DEVICECHANGE 将新显示器插入 PC，我会感到困惑。

当我改变显示器的位置时，我需要这样的消息。

（关于poisiton我的意思是：左边的第一个监视器，右边的第二个监视器。之后我改变了poisiton，第一个监视器右边，第二个监视器左边。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:51:49.773

您可以收听[WM_DISPLAYCHANGE](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145210%28v=vs.85%29.aspx)消息。

文档说它是在显示器分辨率更改时发送的，但我在 Win7 上对 Spy++ 的实验表明它也是在多个显示器排列更改时发送的（事实上，它是当时唯一发送的系统范围通知） .

# php - MySQL / PHP - 查找可用的时间段

> ID：13414795
> 
> 赞同：5
> 
> 时间：2012-11-16T10:31:17.753
> 
> 标签：php, mysql, datetime

有人就类似主题提出了一些问题，但我找不到解决这个特定问题的方法，并感谢您的意见。

我正在开发一个预订引擎，用户可以在其中在线预订某些服务。我一直在寻找和显示特定日期（或一周）内的可用时间段。我知道所需时段的长度（例如 1 小时）和可预订时段的营业时间（例如 09:00 - 18:00）。此外，我有一个 MySQL 表来存储已经存在的约会。与我的问题相关的列如下所示：

```
id  start (datetime)        end (datetime)
1   '2012-11-16 13:00:00'   '2012-11-16 14:30:00'
2   '2012-11-16 15:00:00'   '2012-11-16 16:00:00'
3   '2012-11-17 12:00:00'   '2012-11-16 15:45:00'
4   '2012-11-17 13:00:00'   '2012-11-16 16:15:00'
... 
```

现在鉴于上述信息，我无法找到一个好的解决方案（在 MySQL 或 PHP 中）来检索可用时隙列表。还有一个条件：时隙只能以季度为单位开始。IE。对于上面 16 日可用一小时时段的示例数据，将是：
09:00、09:15、09:30、09:45、10:00、...、12:00、16:00、16： 15，...，17:00。

请注意，即使可能存在重叠时间（如示例数据中所示），可用时隙也不能重叠。

您认为解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T14:22:52.757

```
SELECT a.end AS free_after
FROM bookings a
WHERE NOT EXISTS (
  SELECT 1
  FROM bookings b
  WHERE b.start BETWEEN a.end AND a.end + INTERVAL your_duration HOURS
)
AND a.end BETWEEN start_of_search_window AND end_of_search_window; 
```

您只需要提供`your_duration`（整数）、`start_of_search_window`（日期时间）和`end_of_search_window`（日期时间）的值。

如果你想要花里胡哨....

```
SELECT free_from, free_until
FROM (
  SELECT a.end AS free_from,
  (SELECT MIN(c.start)
   FROM bookings c
   WHERE c.start > a.end) as free_until
  FROM bookings a
  WHERE NOT EXISTS (
    SELECT 1
    FROM bookings b
    WHERE b.start BETWEEN a.end AND a.end + INTERVAL your_duration HOUR
  )
  AND a.end BETWEEN start_of_search_window AND end_of_search_window
)
ORDER BY free_until-free_from
LIMIT 0,3; 
```

将为您提供窗口内三个最短的可用插槽（即最接近目标大小）。

# java - 我的自定义异步任务是否应该同步访问传递给构造函数的内容？

> ID：13414800
> 
> 赞同：0
> 
> 时间：2012-11-16T10:31:34.850
> 
> 标签：java, concurrency, synchronization

假设我有一个不可变的`Model`类：

```
class Model {
    final String id;
    Model(String id) {
        this.id = id;
    }
} 
```

我有一个自定义`Task`类：

```
class Task extends BlaBlaTask {

    final Model model;

    Task(Model model) {
        this.model = model;
    }

    // runs on a background thread
    void doInBackground() {
        // do smth with model, e.g.:
        String id = model.id;
    }
} 
```

和实例都是在主 UI 线程上创建的`Model`。`Task`但是`doInBackground()`在另一个线程上运行。这段代码错了吗？我应该添加同步，例如这样的：

```
class Task extends BlaBlaTask {

    Model model;

    Task(Model model) {
        setModel(model);
    }

    // runs on a background thread
    void doInBackground() {
        // do smth with model, e.g.:
        String id = getModel().id;
    }

    private synchronized void setModel(Model m) {
        model = m;
    }

    private synchronized Model getModel() {
         return model;
    }
} 
```

PS 我正在研究 Java 1.4，代码可能可以在多核 CPU 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:42:47.810

I'm not familiar anymore with the Java memory model of Java 1.4, but I don't see why you would need synchronization.

If you're starting a thread, then the new thread will see everything you have written before starting the thread.

And if you're passing the task to an existing thread, the publishing mechanism should have all the necessary synchronization in place to make sure that the thread sees everything that has been written before the publication. That shouldn't be the task's job to synchronize anything, it should be the Queue's job (or any other way you use to pass the task from one thread to the other)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:40:39.860

If you have instantiated both `Task` (and threrefore its `Model` as well) before the background thread was started, then there is definitely no synchronization necessary. If the thread is already running and you are just submitting a task to it, and you don't benefit from Java 5's `final` semantics, there may theoretically be a problem, but it is quite unlikely to actually occur in practice.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T20:23:58.573

[AsyncTask API](http://developer.android.com/reference/android/os/AsyncTask.html) now has an explicit notice on this:

> # Memory observability
> 
> AsyncTask guarantees that all callback calls are synchronized in such a way that the following operations are safe without explicit synchronizations.
> 
> *   Set member fields in the constructor or `onPreExecute()`, and refer to them in `doInBackground(Params...)`.
> *   Set member fields in `doInBackground(Params...)`, and refer to them in `onProgressUpdate(Progress...)` and `onPostExecute(Result)`.

This is exactly what I was looking for!

# php - 这是将json读入php的简单方法？

> ID：13414803
> 
> 赞同：1
> 
> 时间：2012-11-16T10:31:37.860
> 
> 标签：php, json

我是 json 新手。我想将 JSON 文件中的数据读入 php 文件。

我的json文件数据是这样的

```
{"multicast_id":8925377088262649527,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"NotRegistered"}]} 
```

我只想检查`success`和`failure`值。我用了

```
json_decode($jason_string,true); 
```

但它不适用于我的服务器。我不知道原因。

所以请告诉我解决这个问题的最简单方法，并请详细解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:40:19.213

您的代码应该可以工作。

```
<?php 
$somestring = <<<HEREDOC
{"multicast_id":8925377088262649527,"success":0,"failure":1,"canonical_ids":0,"results"$
HEREDOC;

var_dump(json_decode($somestring, true)); 
```

按预期输出：

```
chris@chris-UX31E:~$ php test.php 
array(5) {
  ["multicast_id"]=>
  int(8925377088262649527)
  ["success"]=>
  int(0)
  ["failure"]=>
  int(1)
  ["canonical_ids"]=>
  int(0)
  ["results"]=>
  array(1) {
    [0]=>
    array(1) {
      ["error"]=>
      string(13) "NotRegistered"
    }
  }
} 
```

请启用 PHP 日志记录以进行调试！看看：[http ://davidwinter.me/articles/2009/07/14/enable-php-error-logging/](http://davidwinter.me/articles/2009/07/14/enable-php-error-logging/)

如果它是本地开发服务器，我更喜欢显示错误并启用所有错误消息 [http://www.dzone.com/snippets/let-php-show-all-errors](http://www.dzone.com/snippets/let-php-show-all-errors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:57:04.117

做这个 ：

转到 -> 开始 -> 运行 -> cmd.exe

跑：

```
c:\path\to\your\php.exe --version 
```

检查您是否有 php 5.2 或更高版本。（json 从 5.2 开始默认与 php 捆绑在一起）如果你不...你需要安装（http://www.php.net/manual/en/install.pecl.windows.php）或将 php 升级到更新版本。

你也可以尝试在 shell 中执行此操作

```
c:\path\to\your\php.exe --ini 
```

编辑前面显示的 php.ini

```
Loaded Configuration File: 
```

找到线

;扩展=php_json.dll

去除 ';' 并保存，如果您没有该行，您可以添加它。重新启动您的网络服务器并重试

# javascript - IE 和 chrome 中选择选项的边距不起作用

> ID：13414809
> 
> 赞同：0
> 
> 时间：2012-11-16T10:31:58.803
> 
> 标签：javascript, jquery, html, css

我正在为 JS 中的一些选择选项设置一个 CSS 类。此类包括边距样式。它在 FF 中工作，但不在 IE 和 chrome 中。

```
 window.onload = function() {
    replace('edit-field-region-tid');
    replace('edit-tid');
}
function replace(id) {
    var i = 0;
    var s = document.getElementById(id);
    for (i; i < s.options.length; i++) {
        if (find(s.options[i].text, id, i)) {
            s.options[i].setAttribute("class", "sub_options");
        }
    }
}
function find(str, id, option_id) {
    var i;
    var s = document.getElementById(id);
    for (i = 0; i < str.length; i++) {
        if (str.charAt(i) == '-') {
            s.options[option_id].text = str.cutAt(0, "");
            return true;
        }
    }
    return false;
}
String.prototype.cutAt = function(index, char) {
        return this.substr(index+1, this.length);
} 
```

和 CSS：

```
.sub_options{
    margin-left:20px;
    text-indent:-2px;
} 
```

任何想法谢谢！

![火狐](../Images/4b7a63ceec4c70e2e54c10b56489fce9.png)

![铬合金](../Images/761fdf21096616278f1d16b1fd7537d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:58:22.437

你可以这样做：http: [//jsbin.com/oyatis/1/edit](http://jsbin.com/oyatis/1/edit)

```
$('select option').prepend('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'); 
```

我尝试使用 jquery 的 css 方法，但这并没有受到影响，但是一些不间断的空格是移动元素的有效方法。看看这是否适合你。

# glassfish - Glassfish 重定向_n 递归

> ID：13414810
> 
> 赞同：1
> 
> 时间：2012-11-16T10:32:26.123
> 
> 标签：glassfish, virtualhost

Glassfish V3 虚拟主机和重定向功能存在问题。

1.  我有一个域：**example.com** ;-)
2.  我将我的应用程序托管在：**www.example.com** [可以使用默认应用程序和专用虚拟服务器]
3.  我希望 example.com 使用“301 HTTP 状态代码”重定向到 www.example.com 以防止重复内容

如 glassfish 文档中所述，我使用了“redirect_n”虚拟主机属性：

```
value="from=/ url-prefix=www.example.com" 
```

...在一个新的专用虚拟主机上，但它导致重定向器的递归调用和 REQUEST URI TOO LARGE Grizzly 错误！

有没有人试过这个，得到更好的结果？

谢谢你的帮助，赛斯。

# java - 根据它们的开始和结束索引将花括号放在特定单词的句子中

> ID：13414814
> 
> 赞同：1
> 
> 时间：2012-11-16T10:32:28.567
> 
> 标签：java

我需要根据索引将花括号放在一个句子中。假设我的输入语句是：`"I am a girl and I live in Nepal."`并且我需要根据

```
[12, 15], [2, 4], [23, 25] 
```

这些索引分别对应于单词`"am"`,`"and"`和`"in"`。所需的输出应该是：

```
"I {am} a girl {and} I live {in} Nepal." 
```

我尝试过使用`substring`，但是在它替换了第一个单词之后，它会将字符移动两个索引，这就是我遇到的问题。

谁能为我提供解决方案以获得所需的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:36:35.583

我认为`String.substring`使用 a 的索引很简单`String.replace`。

这是索引之一的代码 - `[2, 4]`： -

```
String str = "I am a girl and I live in Nepal.";

String str2 = str.replace(str.substring(2, 4), "{" + str.substring(2, 4) + "}");
System.out.println(str2);   // str is not changed. 
```

**输出： -**

```
I {am} a girl and I live in Nepal. 
```

如果您不知道索引，而只有单词，那么您可以使用`String.indexOf`方法找到它。

这是更好的解决方案： -

```
 String str = "I am a girl and I live in Nepal.";

    int startIndex = str.indexOf("am");
    int endIndex = startIndex + "am".length();

    str = str.replace(str.substring(startIndex, endIndex), 
                "{" + str.substring(startIndex, endIndex) + "}");

    System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:38:27.887

我会：

1.  将原始字符串拆分为[字符](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toCharArray%28%29)。
2.  遍历并将每个字符写入[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)
3.  在编写每个字符之前，检查该字符的索引是否对应于起始大括号位置，如果是，则将起始大括号写入 StringBuilder
4.  写入每个字符后，检查该字符的索引是否对应于结束括号位置，如果是，则将结束括号写入 StringBuilder

以上内容不会修改您的原始字符串（或者更确切地说是您正在使用的字符串）。它从原始字符逐个字符地构建一个新字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:14:18.193

*   对参数数组进行排序
*   验证每个条目的端点是 gte 的开始
*   验证对于每个条目，开始是 gt 最后一个条目的结尾
*   `StringBuilder`循环遍历字符，随时将它们附加到 a
*   如果在循环时遇到条目的开头或结尾，请在字符之前或之后设置适当的大括号

# android - Android：如何通过 FTPClient 获取 FTP 文件的文件大小？

> ID：13414817
> 
> 赞同：11
> 
> 时间：2012-11-16T10:32:32.270
> 
> 标签：android, ftp, download, filesize

如何读取存储在我的 ftp 服务器上的文件的文件大小？我不喜欢实现另一个库。

我正在使用 commons-io-2.4 和 commons-net-3.1

**来自 talhakosen 的答案和代码（谢谢！）**

```
private long getFileSize(FTPClient ftp, String filePath) throws Exception {
    long fileSize = 0;
    FTPFile[] files = ftp.listFiles(filePath);
    if (files.length == 1 && files[0].isFile()) {
        fileSize = files[0].getSize();
    }
    Log.i(TAG, "File size = " + fileSize);
    return fileSize;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T10:39:05.010

您好，您可以使用下面的代码，

```
private void ftpDownload() {
    FTPClient ftp = null;
    try {
        ftp = new FTPClient();
        ftp.connect(mServer);

        try {
            int reply = ftp.getReplyCode();
            if (!FTPReply.isPositiveCompletion(reply)) {
                throw new Exception("Connect failed: " + ftp.getReplyString());
            }
            if (!ftp.login(mUser, mPassword)) {
                throw new Exception("Login failed: " + ftp.getReplyString());
            }
            try {
                ftp.enterLocalPassiveMode();
                if (!ftp.setFileType(FTP.BINARY_FILE_TYPE)) {
                    Log.e(TAG, "Setting binary file type failed.");
                }
                transferFile(ftp);
            } catch(Exception e) {
                handleThrowable(e);
            } finally {
                if (!ftp.logout()) {
                    Log.e(TAG, "Logout failed.");
                }
            }
        } catch(Exception e) {
            handleThrowable(e);
        } finally {
            ftp.disconnect();
        }
    } catch(Exception e) {
        handleThrowable(e);
    }
}

private void transferFile(FTPClient ftp) throws Exception {
    long fileSize = getFileSize(ftp, mFilePath);
    InputStream is = retrieveFileStream(ftp, mFilePath);
    downloadFile(is, buffer, fileSize);
    is.close();

    if (!ftp.completePendingCommand()) {
        throw new Exception("Pending command failed: " + ftp.getReplyString());
    }
}

private InputStream retrieveFileStream(FTPClient ftp, String filePath)
throws Exception {
    InputStream is = ftp.retrieveFileStream(filePath);
    int reply = ftp.getReplyCode();
    if (is == null
            || (!FTPReply.isPositivePreliminary(reply)
                    && !FTPReply.isPositiveCompletion(reply))) {
        throw new Exception(ftp.getReplyString());
    }
    return is;
}

private byte[] downloadFile(InputStream is, long fileSize)
throws Exception {
    byte[] buffer = new byte[fileSize];
    if (is.read(buffer, 0, buffer.length)) == -1) {
        return null;
    }
    return buffer; // <-- Here is your file's contents !!!
}

private long getFileSize(FTPClient ftp, String filePath) throws Exception {
    long fileSize = 0;
    FTPFile[] files = ftp.listFiles(filePath);
    if (files.length == 1 && files[0].isFile()) {
        fileSize = files[0].getSize();
    }
    Log.i(TAG, "File size = " + fileSize);
    return fileSize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-06T04:05:05.937

如果服务器不允许客户端列出文件。你可以试试size cmd。有关大小 FTP cmd 语法，请参阅[FTP RFC3659 扩展。](https://www.rfc-editor.org/rfc/rfc3659#page-10)您也可以使用以下函数示例。

```
private long getRemoteSize(FTPClient client, String remoteFilePath) throws Exception {
    client.sendCommand("SIZE", remoteFilePath);
    String[] reply = client.getReplyStrings();
    String[] response = reply[0].split(" ");
    if(client.getReplyCode() != 213){
      throw new Exception(String.format("ftp client size cmd response %d",client.getReplyCode()));
    }
    return Long.parseLong(response[1]);
  }; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T04:36:39.620

```
private long getFileSize(FTPClient ftpClient, String fileName) throws Exception 
{
   long fileSize = 0;
   String fileName; 
   //down file name 
   FTPFile[] files = ftpClient.listFiles(); //ftp list
   for ( i = 0; i < files.length; i++)
   { //ftp connect forder in files              
      if (fileName == files[i].getName())
      { 
        fileSize = files[i].getSize();
        return fileSize;
      }
   }         
} 
```

# c# - 没有 RequestValidation=False 的 ASP .net RichTextBox

> ID：13414821
> 
> 赞同：0
> 
> 时间：2012-11-16T10:32:58.077
> 
> 标签：c#, asp.net, richtextbox, rich-text-editor

我正在尝试通过文本框在 aspx 页面中提交一些格式化的文本，因此我想在文本框中传递 Html 以便将其保存在数据库中。有谁知道任何不需要 RequestValidation="false" 的 asp .net 3.5 RichText 编辑器？

# mysql - Rails 消息系统（获取收到的消息）

> ID：13414824
> 
> 赞同：0
> 
> 时间：2012-11-16T10:33:10.893
> 
> 标签：mysql, ruby, ruby-on-rails-3, activerecord, associations

我有一个供业主和租客交流的消息系统。车主拥有车辆。如果租客有任何问题，他可以发送消息。

注意！一个**新**的讨论会与发布的消息一起**自动创建。**

讨论有很多消息。

讨论具有以下结构：（id，title，vehicle_id，user_id） 消息具有以下结构：（id，text，discussion_id，user_id）

**获取用户发送**的所有消息非常容易：

在用户类中：

```
has_many :sent_messages, :class_name => "Message", :foreign_key => "user_id" 
```

但现在我不知道如何为用户获取所有**收到**的消息 - user.received_messages

基本上，这意味着有必要查看属于用户的所有讨论（他创建了该讨论并且有不属于他的消息）或属于他的车辆的讨论（其他人创建此讨论和 Discussion.user_id == Message.user_id）。

有人可以帮我解决这个问题吗？无法弄清楚如何进行此关联查询。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:20:19.050

解决了它，使用关联`:finder_sql`参数。`has_many`我在我的问题中描述了使用算法的原始 SQL 查询。

# php - 在客户端计算机上创建的 cookie 在哪里

> ID：13414830
> 
> 赞同：2
> 
> 时间：2012-11-16T10:33:25.013
> 
> 标签：php, cookies, location

当我们使用 php**`setcookie()`**函数时，它们是在客户端计算机上的什么位置创建的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:35:25.170

当您使用 时**[`setcookie()`](http://php.net/manual/en/function.setcookie.php)**，会包含一个 HTTP 标头（Set-Cookie），其中包含有关要设置的 cookie、其到期等信息。

该 cookie 本身的存储位置**取决于浏览器**。

然后，浏览器将存储在*某处*的 cookie 内容与**适当**`Cookie:`的标头一起发送，如下所述。

 **> 有两个与 cookie 相关的标头 Set-Cookie 和 Cookie。Set-Cookie 标头由服务器发送以响应 HTTP 请求，该请求用于在用户系统上创建 cookie。如果存在具有匹配域和路径的 cookie，则客户端应用程序会将 Cookie 标头包含在发送到服务器的 HTTP 请求中。

**[RFC6265](http://www.rfc-editor.org/rfc/rfc6265.txt)**定义了*HTTP Cookie*和*Set-Cookie*标头字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:36:10.563

浏览器接收带有标头的 HTTP 响应，`Set-Cookie`然后在内部对其进行处理。

它可能将 cookie 存储在内存中、cookie 文件中、cookie 目录中的文件中或它喜欢的任何其他内容中。这是一个对 Web 服务器完全透明的实现细节。

大多数浏览器都会提供一个 UI 来查看现有的 cookie。

您还可以使用请求监控工具（浏览器中内置的工具，或 Charles Proxy 等外部工具）来观察请求中发送回服务器的 cookie 标头。**

# javascript - 协作 JSON 查看器/解析器

> ID：13414831
> 
> 赞同：0
> 
> 时间：2012-11-16T10:33:30.517
> 
> 标签：javascript, json, collaboration

我是在线 json 查看器[jsonviewer.stack.hu的粉丝](http://jsonviewer.stack.hu/)

是否有任何网站允许共享解析的 json，就像[jsbin.com](http://jsbin.com/)或[jsfiddle.net](http://jsfiddle.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T10:07:12.720

Github [Gist](https://gist.github.com)是迄今为止我发现的最好的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-01T16:56:36.990

[JSON Viewer](http://codebeautify.org/jsonviewer)提供的最佳工具，您可以在其中测试您的 json 数据以及保存和分享给全世界。

# ssl - 如何使用来自另一个 jar 的资源加载密钥库。

> ID：13414834
> 
> 赞同：0
> 
> 时间：2012-11-16T10:33:31.700
> 
> 标签：ssl, https, classloader, keystore, httpsurlconnection

我的问题是：我有两个由 maven 构建的罐子。一个 jar 包含一个逻辑，该逻辑包装来自 jave.net.ssl 的一些类，以在 URL 中的方案为 https 时发出 https 请求：获得 HttpsUrlConnection 后，我将获得 SSLSocketFactory，如下所示：

```
private SSLSocketFactory prepareSSLSocketFactory(SecurityConfig secConfig) throws NoSuchAlgorithmException, CertificateException, IOException, KeyStoreException, KeyManagementException
{
    if (secConfig == null) throw new IllegalArgumentException("secConfig");
    if (sslSocketFactory!=null)
        return sslSocketFactory;

    KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());      
    trustStore.load(secConfig.getSslTrustStore()/*ClassLoader.getSystemClassLoader().getResourceAsStream("jclienttruststore.jks")*/, secConfig.getSslTrustStorePassword().toCharArray());

    TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    tmf.init(trustStore);
    SSLContext ctx = SSLContext.getInstance(secConfig.getSslAlgorithm());
    ctx.init(null, tmf.getTrustManagers(), null);
    sslSocketFactory = ctx.getSocketFactory();
    return sslSocketFactory;
} 
```

请注意 secConfig.getSslTrustStore() 部分，因为它包含传递给此方法的 InputStream，在从 jar 的类中获取它之后，该类是包含上述代码的父类。获取InputStream如下：

```
protected InputStream obtainTrustStore() 
{                
    //InputStream stream = this.getClass().getClassLoader().getParent().getResourceAsStream("trustcert/jclienttruststore.jks");
    //InputStream stream = ClassLoader.getSystemClassLoader().getResourceAsStream("trustcert/jclienttruststore.jks");

    InputStream stream = this.getClass().getClassLoader().getResourceAsStream("trustcert/jclienttruststore.jks");
    return stream;
} 
```

资源定位成功，获得InputStream。但是在第一个片段上执行 trustStore.load() 时，我收到奇怪的异常，说 KeyStoreFormat 无效。KeyStoreFormat 是有效的 - 这是肯定的 - 因为当我从包含此 prepareSSLSocketFactory 的 jar 执行测试方法并加载相同的密钥库文件但位于当前 jar 的资源中时，根本没有例外，并且客户端通过 ssl 成功通信。

因此，我的观察如下：如果我从位于执行方法 prepareSSLSocketFactory 的 jar 中的密钥库资源中加载提供 InputStream 的 trustore，则它可以工作，但是如果另一个 jar 负责将 InputStream（带有密钥库）提供给包含 prepareSSLSocketFactory() 的依赖 jar - 它抛出异常。不知道如何处理它。

请注意，我已经通过调用检查了提供资源的类和包含 prepareSSLSocketFacory 的类是否由同一个 ClassLoader 加载：

this.getClass().getClassLoader().equals(HttpConnector.class.getClassLoader()) - 没关系。

从提供密钥库 InputStream 的类到底层的 https 请求生成类。

但是我不知道是否有可能，HttpConnector.class.getClassLoader() 返回的 ClassLoader 不是加载最后在运行时使用的 HttpConnector 的那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:53:16.843

现在问题已经解决了......而且更重要的是 - 答案不是真实的。问题与加载相同密钥库资源的不同类加载器无关，实际上其中一个资源（资源我的意思是由 keytool 生成的密钥库文件）在运行时被简单地损坏（因此异常“密钥库格式无效”是可以的）。这很难弄清楚，因为密钥库只生成一次，然后文件被复制到资源文件夹中。所以我假设它不会被损坏 - 它不是 - 因为我重建项目 - 在我的 Maven 构建中，我有一个资源插件，它为所有资源启用了过滤 - 这使得每次我构建项目时密钥库文件都损坏:)

# c# - 如何在 C# 数组字符串中选择 5 位随机数？

> ID：13414837
> 
> 赞同：1
> 
> 时间：2012-11-16T10:33:46.467
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 中生成随机 8 个字符的字母数字字符串？](https://stackoverflow.com/questions/1344221/how-can-i-generate-random-8-character-alphanumeric-strings-in-c)

我有字母名称的数组。现在我需要随机选择 5 个字符。如果我使用以下代码，我只能选择一个字符。***如何随机选择给定数组字符串中的 5 位数字？***

```
 String[] letters = { "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q" };
    Random rand = new Random();
    String number = letters[rand.Next(1,10)]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:37:04.727

```
string number = 
    string.Concat(Enumerable.Range(0,5).Select(i => 
        letters[rand.Next(0, 10)])); 
```

当然，鉴于您的数组内容，这在功能上等同于：

```
string number = rand.Next(0, 100000).ToString("D5"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T10:36:15.223

```
string[] selected = new string[5];
Random rand = new Random();
for(int i = 0 ; i < selected.Length ; i++)
{
    selected[i] = letters[rand.Next(letters.Length)];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T10:50:56.503

```
var randomSelection = (from c in letters orderby rand.Next() select c).Take(5); 
```

# html - 如何推广html5移动应用

> ID：13414841
> 
> 赞同：2
> 
> 时间：2012-11-16T10:33:59.057
> 
> 标签：html, web-applications, jquery-mobile, mobile

我正在开发一个 HTML5 跨设备移动优化应用程序 ( [podcaster.mobi](http://www.podcaster.mobi) )。我将它提交给[OpenAppMkt](http://openappmkt.com/app/504ce8062a67710002007931/Podcaster.mobi)，在那里我得到了很好的评价（5 颗星中的 4 颗星，平均 6 分），但除了告诉朋友它和创建 Facebook 页面（http://www. facebook.com/pages/Podcastermobi/104949029662395）

有没有人有为移动 Web 应用程序建立用户群的经验？似乎在原生应用商店/市场中缺乏存在是 HTML5 WebApps 的一大限制——我很想找到一个很好的解决方案！

# android - 在 android 浏览器上，如果 text size 设置为大，则 mobiscroll 控件的布局不正确，尤其是在 clickpick 中

> ID：13414844
> 
> 赞同：1
> 
> 时间：2012-11-16T10:34:06.257
> 
> 标签：android, layout, text, size, mobiscroll

重现：在 android 设备上，转到 mobiscroll 演示（在默认浏览器中），将文本大小设置为更大或更大并刷新屏幕。

有谁知道这是否可以通过设置或其他东西修复，或者这是一个错误？

# c - 为什么我的程序的输出没有复制所需的输出？

> ID：13414851
> 
> 赞同：0
> 
> 时间：2012-11-16T10:34:35.007
> 
> 标签：c, recursion

我一直在尝试制作一个程序来协助一款名为“Mastermind”的游戏。如果你不熟悉这个游戏，简单来说就是这样：有一个代码需要被猜测，一个玩家制作这个代码，而另一个玩家尝试猜测它，根据猜测玩家得到一个黑色钉子他猜到的字母在正确的位置，每个字母的白色钉子在错误的位置并属于模式中的其他位置，最后如果字母根本不出现，则没有钉子。

我的程序应该接受猜测，白色钉子的数量和黑色钉子的数量，并输出所有可能的解决方案。另外一个要求是程序必须使用递归。

程序应如何运行的示例：

```
输入花样长度：3

输入猜测模式：abc

在反馈中输入黑钉的数量：2

在反馈中输入白钉的数量：0

可能的关键模式是：

aac

阿坝

abb

abd

阿部

abf

ACC

ADC

aec

亚足联

英国广播公司

加拿大广播公司

数据库

ebc

脸书

```

正如您通过运行代码所看到的那样，我编写的程序显然不会给出相同的输出。（顺便说一下，我还将输入的 char 数组转换为 int 数组并将内容打印为 char）

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <stdbool.h>

    void userEnter(int*pattern, int n);
    void print( int * s, int n);
    void recurs( int * s, int * a, int n, int wpegs, int bpegs);
    bool Done (int*s);
    bool bPegs(int*a ,int*s, int bpegs, int wpegs, int n);
    bool wPegs(int* modcom, int* modoriginal, int*s, int wpegs, int w);
    void change(int*modoriginal, int*modcom, int i, int k, int w);

    int main(void)
    {
        int i, n, bpegs, wpegs;

        printf("Enter the pattern length: ");
        scanf("%d",&n);
        int *a = malloc(n * sizeof *a);
        printf("Input the guess pattern: ");
        int pattern[n];
        userEnter(pattern, n);  
        printf("Enter the number of black pegs in the feedback: ");
        scanf("%d",&bpegs);
        printf("Enter the number of white pegs in the feedback: ");
        scanf("%d",&wpegs);
        printf("The possible key patterns are: ");
        for(i=0; i<=n-1; i++)
        {
            a[i]=0;
        }
        print(a, n);
        recurs(a, pattern, n, wpegs, bpegs);

    }

    void userEnter(int*pattern, int n)
    {
        char input[n];
        scanf("%s",input);

        int i;
        for(i = 0; i < n-1; i++)
        {
            pattern[i] = input[i]-65;
        }
    }

    void print( int * s, int n)
    {
        int i; 
        printf( "\n" );
        for( i = n-1; i >= 0; i-- )
        {
            printf( "%c", ( s[ i ] + 65 ) );
        }
    }

    void recurs( int * s, int * a, int n, int wpegs, int bpegs)
    {

        int i;

        if(Done(s))
        {
            print( s, n);
            printf( "\nAccomplisshed!\n" );
        }

        else{
            s[ 0 ] += 1;
            for( i = 0; i < n-1; i++ )
            {
                if( s[ i ] == 6 ){
                    s[ i ] = 0;
                    s[ i + 1 ] += 1;
                }
            }
            if(bPegs(a ,s, bpegs, wpegs, n))
            {
            print( s, n);
            }
            recurs(s, a, n, wpegs, bpegs);
        }
    }

    bool Done (int*s)
        {
            int i;
            bool done=true;
            for (i=0;i<=11;i++)
            {
                if(s[i]!=5)
                {
                    done=false;
                }
            }
            return done;
        }

    bool bPegs(int*a ,int*s, int bpegs, int wpegs, int n)
    {
        int i,j,c=0;
        bool d = false;
        for(i=0; i<n-1; i++)
        {
            if(a[i]=s[i])
            {
                c++;
            }
        }
        int x =n-c;
        int* modcom; 
        int*modoriginal;
        modcom=(int*)malloc((x)*(sizeof(int)));
        modoriginal=(int*)malloc((x)*(sizeof(int)));
        int w=0;
        for(j=0; j<n-1; j++)
        {
            if(a[j]!=s[j])
            {
                modcom[w]=s[j];
                modoriginal[w]=a[j];
                w++;
            }       
        }
        if(c=bpegs)
        {
            d = wPegs(modcom, modoriginal, s, wpegs, w);
        }

        return d;

    }

    bool wPegs(int*modcom, int*modoriginal, int*s, int wpegs, int w)
    {
        int i, k, count=0;
        for(i=0; i<=w; i++)
        {
            for(k=0; k<=w; k++)
            {
                if (modoriginal[i]==modcom[k])
                {
                    count++;
                    change(modoriginal, modcom, i, k, w);
                }
            }
        }
        if(wpegs=count)
        {
            return true;
        }

    }

    void change(int*modoriginal, int*modcom, int i, int k, int w)
    {
        int c, o;
        for(c=i-1; c<w-1; c++)
        {
            modoriginal[c]=modoriginal[c+1];
        }
        for(o=k-1;o<w-1;o++)
        {
            modcom[o]=modcom[o+1];
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:36:07.547

`&`您的 scanf中缺少：

```
int bpegs, wpegs;
...
scanf("%d",bpegs);
scanf("%d",wpegs); 
```

# c# - 我不应该允许 user1 通过更改 url 来访问 user2

> ID：13414855
> 
> 赞同：-2
> 
> 时间：2012-11-16T10:34:41.153
> 
> 标签：c#, asp.net

我正在使用表单身份验证及其工作正常。但是在 user1 登录后，他将显示 user1.aspx 页面，但如果他在登录后更改 url，他可以访问 user2 页面，这也不应该发生，所以我在 web config 文件中进行了更改像这样

```
<authentication mode="Forms">
      <forms
        name=".LOGIN" 
        cookieless="UseCookies"
        loginUrl="LOGIN.aspx"/>

    </authentication>

    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>

  <location path="~/CabScheduler/User1/User1.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="~/CabScheduler/User2/User2.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

在登录页面——

```
 protected void btnLogin_Click(object sender, EventArgs e) 
        { 
            bool validLogin = false; 

            validLogin = IsValidUser(txtUserName.Text.Trim(), txtPassword.Text.Trim());
            int UserId = FindRoleId(txtUserName.Text.Trim(), txtPassword.Text.Trim());
            if (validLogin) 

            {       
                FormsAuthentication.RedirectFromLoginPage(txtUserName.Text.Trim(), false); 
                if(UserId ==1)
                    Response.Redirect("~/User1/User1.aspx");
                else
                    Response.Redirect("~/User2/User2.aspx");
        }

            else 

                lblInformation.Text = "Incorrect Login Information"; 
        } 
```

告诉我我错过了什么或做错了什么。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:40:05.680

在`User1.aspx`OnLoad 事件中，检查当前用户是否已通过身份验证以访问此页面并进行相应处理。

在 User1.aspx onLoad 事件检查：

```
 if(UserId !=1)
  {
    //redirect to login page
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:41:02.270

试试下面

```
 <location path="~/CabScheduler/User2/User2.aspx">
    <system.web>
      <authorization>
                <allow users="user2" />
                <deny users="*, ?" />
      </authorization>
    </system.web>
  </location>

    <location path="~/CabScheduler/User1/User1.aspx">
        <system.web>
            <authorization>
                <allow users="user1" />
                <deny users="*, ?" />
            </authorization>
        </system.web>
    </location> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:37:20.180

将 userId 存储在 a 中`Session`，并检查该 id 是否对这些页面上的当前页面有效。

```
Session["userId"] = UserId; 
```

在页面本身上：

```
if (Session["userId"] != xxx)
    Redirect("somewhere"); 
```

请填写适当的值。

# ios - 哈德森不建设项目

> ID：13414858
> 
> 赞同：2
> 
> 时间：2012-11-16T10:34:56.823
> 
> 标签：ios, svn, hudson

我正在使用带有颠覆功能的 Hudson 来构建自动化。

我已经配置了要构建的作业，但 Hudson 没有构建该项目 - 它只是提供以下日志消息。我不知道发生了什么事。

```
Started by user admin
Updating someaddress/iOS/Apps/iPhoneApp/_Iphone revision: Nov 16, 2012 3:56:11 PM depth:infinity ignoreExternals: true
At revision 119
no revision recorded for someaddress/iOS/Apps/iPhoneApp/_Iphone in the previous build
[DEBUG] Skipping watched dependency update; build not configured with trigger: MyFirstBuildJob #44
Finished: SUCCESS 
```

# api - SoundCloiud API 中的“公共”过滤器是什么意思，是否意味着“可流式传输”？

> ID：13414859
> 
> 赞同：0
> 
> 时间：2012-11-16T10:34:57.657
> 
> 标签：api, soundcloud

我正在使用 SoundCloud API 获取曲目列表，但我只想要用户设置为公共并且允许嵌入 SoundCloud 之外的曲目。

该参数的合适值是`filter`多少？

虽然没有记录，但似乎我可以组合参数中的值`filter`，例如`filter=public,streamable`. 实际上是否`public`意味着可流式传输，还是我必须同时过滤才能获得所需的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:58:13.303

除非该用户已通过您的应用程序使用 API 进行了身份验证，否则您将只能获得公共曲目。`streamable`应该没事。或者，只需将它们全部获取，您可以通过删除没有`stream_url`属性的项目来自行过滤。

# winforms - 谷歌地图，winform和捕捉点击事件

> ID：13414864
> 
> 赞同：2
> 
> 时间：2012-11-16T10:35:18.523
> 
> 标签：winforms, google-maps, double-click

我有一个场景，我必须从数据库中读取一些数据，例如已经有纬度和经度信息的地址，然后用标记填充谷歌地图。我正在使用带有 Windows 窗体和 winform 网络浏览器控件的谷歌地图。

浏览器控件显示 .asp 页面，其中使用查询字符串传递地址的详细信息。

要求是，如果用户在谷歌地图中单击这些标记中的任何一个，那么我们应该捕获单击事件并处理结果，例如获取地址的 ID，并可能导航到 Windows 窗体中的特定记录。

问题是如何捕获单击事件，然后将数据从 .asp 页面传递到 Windows 窗体？

还有其他更好的可能性吗？建议？

# java - Java System.getProperty("line.separator") 在 apache 服务器中不起作用

> ID：13414865
> 
> 赞同：1
> 
> 时间：2012-11-16T10:35:20.207
> 
> 标签：java, regex, string, char, system-properties

我的方法`System.getProperty("line.separator")`在*Apache*服务器中不起作用，但似乎在本地*Eclipse*中起作用。

实际执行

```
str2=str1.replace(System.getProperty("line.separator"), "CH(50)"); 
```

该代码在 Eclipse 中有效，但在服务器中无效，并且“line.separator 不会被 CH(50) 替换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:38:23.550

***line.seperator***：操作系统用来分隔文本文件中的行的序列

`System.getProperty("line.seperator")`取决于操作系统。

您的服务器可能是 Linux，并且您正在 Windows 中进行本地测试

# android - Soap Web 服务中的 Android 空值

> ID：13414868
> 
> 赞同：0
> 
> 时间：2012-11-16T10:35:40.010
> 
> 标签：android, web-services, ksoap2

我编写了一个程序来从 web 服务中获取值。但我只得到空值。我想不通原因。但是朋友建议从代理服务器通信时，不允许发送或接收数据。请更正下面的错误。我附上了下面的程序

```
package com.example.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class WebService extends Activity {
private final String NAMESPACE = "http://tempuri.org/";
private final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?wsdl";
private final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
private final String METHOD_NAME = "CelsiusToFahrenheit";
String celsius="";

Button b;
TextView tv;
EditText et;
String res,resultval;
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_web_service);
et=(EditText)findViewById(R.id.editText1);
tv=(TextView)findViewById(R.id.Result);
b=(Button)findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
            // TODO Auto-generated method stub
            //String result=getFarenheit(et.getText().toString());
            //tv.setText(result+"°F");
            new service().execute();
            }
        });
    }
private class service extends AsyncTask<Void, Void, String>{

@Override
protected String doInBackground(Void... arg0) {

            SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo celsuiusPI= new PropertyInfo();
            celsuiusPI.setName("Celsius");
            celsuiusPI.setValue(celsius);
            celsuiusPI.setType(String.class);
            request.addProperty("XMLMarks",celsuiusPI);
            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope (SoapEnvelope.VER11);
            envelope.dotNet=true;
            envelope.implicitTypes = true;
            envelope.enc = SoapSerializationEnvelope.ENC2003;
            envelope.xsd = SoapEnvelope.XSD;
            envelope.xsi = SoapEnvelope.XSI;
            envelope.setOutputSoapObject(request);
            envelope.setAddAdornments(false);
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
            try{
            androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
            androidHttpTransport.debug = true;
            androidHttpTransport.call(SOAP_ACTION, envelope);
            final SoapPrimitive response=(SoapPrimitive)envelope.getResponse();
            Toast.makeText(WebService.this, response    .toString(), 20).show();
            Log.i("WebService output", response.toString());
            System.out.println("WebService Response"+response.toString());
            Object res= response.toString();
            resultval=(String) res;
            }
            catch(Exception e){
            e.printStackTrace();
            }

            return res;

            }
            protected void onPostExecute(String h){
            String result=h;
            tv.setText(result+"°F");

 }

}
} 
```

没有发现异常请更正上面的程序并告诉我错误的原因，以便我学习

# cucumber - cucumber 无法启动我的 @rerun.txt 失败测试

> ID：13414869
> 
> 赞同：1
> 
> 时间：2012-11-16T10:35:42.720
> 
> 标签：cucumber

我试图执行：

```
cucumber @rerun.txt 
```

我不得不将以下内容添加到我的 gemfile 中，因为它因不同的错误而失败：

```
gem "ramaze"
gem "webrat"
gem "rubypython" 
```

现在，当我执行 cucumber 命令“cucumber @rerun.txt”时，我收到以下错误消息，知道什么可能导致这个问题以及如何克服它？

```
"Don't know how to reveal method 'respond_to?' (RuntimeError)" 
```

# java - 可从 android 中的 URL 有限内存中提取

> ID：13414870
> 
> 赞同：0
> 
> 时间：2012-11-16T10:35:46.993
> 
> 标签：java, android, memory

我想从 URL 获取图像并将其转换为可绘制的。我有这个方法，效果很好：

```
public static Drawable getDrawableFromUrl(String url) throws IOException {
    Bitmap x;

    HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
    connection.connect();
    InputStream input = connection.getInputStream();

    x = BitmapFactory.decodeStream(input);
    return new BitmapDrawable(x);
} 
```

除了一件事。当图像太大时应用程序崩溃。

```
E/dalvikvm-heap(12750): 13142360-byte external allocation too large for this process.
E/dalvikvm(12750): Out of memory: Heap Size=6023KB, Allocated=3177KB, Bitmap Size=2563KB, Limit=20480KB
E/dalvikvm(12750): Trim info: Footprint=6023KB, Allowed Footprint=6023KB, Trimmed=952KB
E/GraphicsJNI(12750): VM won't let us allocate 13142360 bytes 
```

我可以以某种方式增加图像所需的内存吗？或者也许有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:49:17.783

[有效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

上面的链接从 url 返回重新调整大小的位图，然后您可以转换为可绘制的位图。

从该链接下载并使用 Bitmap fun 示例应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:01:52.743

您需要按照此链接的建议缩小图像或调整其大小

[加载大图像](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

以下是一些代码片段：

```
 public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
}

public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
}
return inSampleSize;
} 
```

设置可绘制对象时只需调用此部分

```
MyImageview.setImageBitmap(decodeSampledBitmapFromResource(getResources(), mydrawable, 420, 620)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:06:31.010

行。这是最终有效的代码。正如建议的那样，我使用给定的函数减小了图像的大小：calculateInSampleSize - thx Androyds。

```
public static Drawable getDrawableFromUrl(String url, Context context) throws IOException {
    Bitmap x;

    HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
    connection.connect();
    InputStream inputStream = connection.getInputStream();
    BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);

    BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
bufferedInputStream.mark(connection.getContentLength());
BitmapFactory.decodeStream(bufferedInputStream, null, options);
bufferedInputStream.reset();

options.inJustDecodeBounds = false;
options.inSampleSize = calculateInSampleSize(options, 400, 400);

x = BitmapFactory.decodeStream(bufferedInputStream, null, options);

bufferedInputStream.close();
connection.disconnect();

    BitmapDrawable y = new BitmapDrawable(x);

    return y;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:45:05.140

我建议您将文件临时保存在手机上并阅读它并将其用作可绘制对象。但如果手机无法加载图片，则需要从发件人处或在打开之前将图片按比例缩小。

# node.js - NodeJS Heroku 上的 Redis MULTI 命令

> ID：13414880
> 
> 赞同：1
> 
> 时间：2012-11-16T10:36:23.620
> 
> 标签：node.js, heroku, redis

我一直在尝试`MULTI`在 Heroku 上将命令与 redis 一起使用，它运行良好几次，但迟早会停止工作并返回 'QUEUED'。当我使用`MULTI`.

```
redis.multi()
    .hgetall('project:' + url)
    .hgetall('code:' + url)
    .exec(function (err, results) {
        //...
    }); 
```

它在我的本地机器上运行良好，但它一直在 Heroku 上崩溃。

为什么'QUEUED'在这里意味着？有人在 Heroku 上遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:07:39.110

哪个 npm 模块用于 redis？我没有在 Heroku 上使用 redis，所以我不知道这是否适用于您正在使用的特定模块，但我一直在使用的模块在某些较新版本上存在错误，这给我带来了很多问题。例如[https://github.com/mranney/node_redis/issues/289](https://github.com/mranney/node_redis/issues/289)

如果是 node_redis，你可以试试 0.7.3，或者 master 的最新版本。

# javascript - Jquery mobile无法正确加载脚本

> ID：13414882
> 
> 赞同：0
> 
> 时间：2012-11-16T10:36:24.370
> 
> 标签：javascript, jquery, google-maps, jquery-mobile

我遇到了问题，但我无法加载我的地​​图。我正在使用 jQM，它通过 ajax 加载页面。我将地图加载脚本放在 data-role="page" 中，但这不起作用。我还在开始和结束时放了一些 console.log，它们工作正常。这是我的代码：

```
<div data-role="page" class="page-nearme" id = "map">
<script>            
$('#map').bind('pagecreate', function(){
console.log('script started to load')
function initialize() {
var mapOptions = {
    mapTypeId :google.maps.MapTypeId.ROADMAP,
    maxZoom: 16
};
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
var defaultBounds = new google.maps.LatLngBounds(
           new google.maps.LatLng(32.773419,-117.172348),
           new google.maps.LatLng(32.773419,-117.172348));
        map.fitBounds(defaultBounds);
var input = document.getElementById('target');
var searchBox = new google.maps.places.SearchBox(input);
var markers = [];
google.maps.event.addListener(searchBox, 'places_changed', function() {
var places = searchBox.getPlaces();
for (var i = 0, marker; marker = markers[i]; i++) {
marker.setMap(null);
          }
markers = [];
var bounds = new google.maps.LatLngBounds();
for (var i = 0, place; place = places[i]; i++) {
var image = new google.maps.MarkerImage(
place.icon, new google.maps.Size(71, 71),
new google.maps.Point(0, 0), new google.maps.Point(17, 34),
new google.maps.Size(25, 25));
var marker = new google.maps.Marker({
                  map: map,
                 icon: image,
                  title: place.name,
                  position: place.geometry.location
               });

               markers.push(marker);
               bounds.extend(place.geometry.location);
                              }

          map.fitBounds(bounds);
                    });

        google.maps.event.addListener(map, 'bounds_changed', function() {
        var bounds = map.getBounds();
        searchBox.setBounds(bounds);
              });
        }
        google.maps.event.addDomListener(window, 'load', initialize);
        console.log('map loaded')
                    });
           </script>

            <div data-role="header" data-id="navbar" data-position="fixed"  data-tap-toggle="false">
            </div><!-- /header -->

            <div data-role="content">
                <div id="search-panel">
                      <input id="target" type="search" placeholder="Search Box">
                    </div>

                    <div id="map_canvas"></div>

            </div>

            <!-- tabbar -->
            <div data-role="footer" data-id="main_footer" data-position="fixed" data-fullscreen="true" data-visible-on-page-show="false" id ="fxedfooter"data-tap-toggle="false">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li><a id="menu-item-home" data-icon="custom" href="index.html">&nbsp;</a></li>
                        <li><a id="menu-item-near-me" data-icon="custom" href="near-me.html" class="ui-btn-active ui-state-persist">&nbsp;</a></li>
                        <li><a id="menu-item-rewards" data-icon="custom" href="rewards.html">&nbsp;</a></li>
                        <li><a id="menu-item-invite" data-icon="custom" href="invite.html">&nbsp;</a></li>
                        <li><a id="menu-item-profile" data-icon="custom" href="profile.html">&nbsp;</a></li>
                    </ul>
                </div><!-- /navbar -->
            </div>

        </div> 
```

当我通过 ajax 加载此页面时，如何加载我的地​​图？

PS：我在 index.html 的头部包含了 gmap.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:52:57.030

首先，使用创建名为 'load_map(data)' 的地图的所有代码创建一个函数。然后添加这个函数来触发加载。这将调用您的函数 load_map 在请求成功后传递来自请求的数据。ps：将此代码放在其他文件中并包含它。在 pagecreate 绑定中，调用 trigger_load_map

```
 function trigger_load_map() {
   $.ajax({
     url: url,
     type: "POST",
     dataType: "json",
     data : {},
     success: function(data) {   
       load_map(data); 
     }
   });
 } 

 load_map(data){
   //you code to create map
 } 
```

# css - 透明的官方推特小工具

> ID：13414883
> 
> 赞同：2
> 
> 时间：2012-11-16T10:36:28.433
> 
> 标签：css, twitter, widget, background-color

我想在网站中插入官方[Twitter 小部件](https://twitter.com/settings/widgets)。

所以，我不能在这个选项页面上选择任何背景颜色。
是否有可能将背景颜色从白色变为透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:16:17.783

I have the same problem. My solution was to alter the css of the twitter widget after the page is loaded using jQuery.

```
 $(window).load(function() {
        $("iframe.twitter-timeline")
             .contents()
             .find(".timeline")
             .css("background-color", "transparent");
    }); 
```

Downside of this is that until the page is loaded you get the white background so I placed the widget inside the container that is hidden and in the page load event after I replace the css I show the container.

# php - 在 vbulletin 中为未注册用户下载附件文件

> ID：13414888
> 
> 赞同：3
> 
> 时间：2012-11-16T10:36:53.013
> 
> 标签：php, attachment, vbulletin

我的论坛中有一个脚本，允许我的用户从我的论坛上传一些东西。

我想让我的用户从论坛上传附件文件，但 vbulletin 总是显示未注册的表格。

所以我问有没有一种方法可以发送带有附件链接的用户名和密码，以便 vbulletin 可以识别我的用户并允许下载该附件文件？

我试过这个：

```
$link = 'http://localhost/vb/attachment.php?attachmentid=2';
$username = 'admin';
$password = '1111';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $link);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
echo '<pre>';
print_r($info);
print_r($output); 
```

但正如我所说，未注册的表格出现了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:57:47.127

我假设您只希望他们在登录论坛后下载文件？如果是这种情况，假设您使用的是 vbulletin，您可以使用类似的东西。

if ($vbulletin->userinfo['userid']) { 在此处插入代码以显示下载链接 };

所做的只是检查用户是否登录到论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:19:30.957

我找到了解决我的问题的方法。由于我的两个脚本都在一个主机中，我曾经`copy`在我的主机上复制我的附件文件。通过这种方式，我不需要处理 vbulletin。

# rest - 使用 Jackson（或 Spring）解码 Base64

> ID：13414890
> 
> 赞同：8
> 
> 时间：2012-11-16T10:37:04.360
> 
> 标签：rest, spring-mvc, base64, jackson

这是我第一次尝试处理二进制数据，所以我对此很陌生。我正在编写一个用于上传内容的 REST 服务，并且我将收到一个 Base64 编码的字符串。

我找到[了这个](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseBase64Binary%28java.lang.String%29)（标准 Java），并且我还找到了一个内部 Spring 类（坏主意）。

是否有杰克逊注释可以自动解码来自 Base64 的属性？我应该在我的对象中使用 String 还是 byte[]？

我也在使用 Spring MVC 3，因此可以使用 Spring 框架中的一个类来执行此操作。

[请不要使用 Apache Commons。我想在不添加更多内容的情况下找到解决方案]

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-17T03:45:20.903

用于`byte[]`属性，Base64 编码/解码“正常工作”。没有额外的事情可做。

此外，杰克逊可以通过以下方式进行显式转换：

```
ObjectMapper mapper = new ObjectMapper();
byte[] encoded = mapper.convertValue("Some text", byte[].class);
String decoded = mapper.convertValue(encoded, String.class); 
```

如果您想使用 Jackson 进行独立的 Base64 编码/解码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-17T00:34:50.297

对于使用 Java8 的用户，现在完全支持 Base64 编码/解码，不再需要第三方库。此外，它更简单（从三行减少到两行）并且更直接。

```
byte[] decodedBytes = Base64.getDecoder().decode(encodedString);
String decodedString = new String(decodedBytes); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-28T16:04:12.233

[在 Spring 官方文档](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/Base64Utils.html)中有一个实用程序类，可以单行解决 base64 编码/解码问题。

```
byte[] bytes = Base64Utils.decodeFromString(b64String); 
```

# android - 在分配它的方法之外访问私有变量

> ID：13414893
> 
> 赞同：0
> 
> 时间：2012-11-16T10:37:13.330
> 
> 标签：android, android-layout, final, runnable

我曾经`Runnable`找到状态栏的高度，它给出了正确的输出。

但是如何在 的方法之外访问**StatusBarHeight**？`run()``Runnable`

这是我的一段代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final RelativeLayout main = (RelativeLayout) findViewById(R.id.main);

        final Rect rectgle = new Rect();
        final Window window = getWindow();

        main.post(new Runnable() {
            @Override
            public void run() {

                window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
                int StatusBarHeight = rectgle.top;
                int contentViewTop = window.findViewById(
                        Window.ID_ANDROID_CONTENT).getTop();
                int TitleBarHeight = contentViewTop - StatusBarHeight;

                Log.i("ScreenDemo", "StatusBar Height= " + StatusBarHeight
                        + " , TitleBar Height = " + TitleBarHeight);
            }
        });
} 
```

`run()`PS：如果我直接在其中编写代码`onCreate()`，它会返回**0**，因为 UI 尚未呈现。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:40:06.187

您的变量`StatusBarHeight`的范围是块内的本地，如果您想从 onCreate() 方法访问它，那么您需要按以下方式声明它，

```
private static int StatusBarHeight;  // class level declaration

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final RelativeLayout main = (RelativeLayout) findViewById(R.id.main);

        final Rect rectgle = new Rect();
        final Window window = getWindow();

        main.post(new Runnable() {
            @Override
            public void run() {

                window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
                StatusBarHeight = rectgle.top;
                int contentViewTop = window.findViewById(
                        Window.ID_ANDROID_CONTENT).getTop();
                int TitleBarHeight = contentViewTop - StatusBarHeight;

                Log.i("ScreenDemo", "StatusBar Height= " + StatusBarHeight
                        + " , TitleBar Height = " + TitleBarHeight);
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:37:45.910

您需要在类中将变量声明为私有成员变量，以便您可以在`Runnable`. 像这样：

```
private int statusBarHeight; // member variable available to all methods in the class

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);    
    final RelativeLayout main = (RelativeLayout) findViewById(R.id.main);
    final Rect rectgle = new Rect();
    final Window window = getWindow();
    main.post(new Runnable() {
        @Override
        public void run() {
            window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
            statusBarHeight = rectgle.top;
            int contentViewTop = window.findViewById(
                     Window.ID_ANDROID_CONTENT).getTop();
            int titleBarHeight = contentViewTop - statusBarHeight;
            Log.i("ScreenDemo", "StatusBar Height= " + statusBarHeight
                     + " , TitleBar Height = " + titleBarHeight);
        }
    });
} 
```

**注意：** 我已将变量的名称从`StatusBarHeight`to`statusBarHeight`和 from`TitleBarHeight`更改为`titleBarHeight`。请记住对变量使用初始小写名称。Java 命名约定使用初始小写的变量名和初始大写的类名。

# xslt - 如何剥离标签上下文相关？

> ID：13414894
> 
> 赞同：2
> 
> 时间：2012-11-16T10:37:12.903
> 
> 标签：xslt

假设我有一个这样的源示例文档：

```
<html>
  <b><i><u>TestBIU</u></i></b>
  <i><b><u>TestIBU</u></b></i>
  <i><u><b>TestIUB</b></u></i>
  <b><u><i>TestBUI</i></u></b>
  <u><i><b>TestUIB</b></i></u>
  <u><b><i>TestUBI</i></b></u>
  <u>TestU</u>
  <i>TestI</i>
  <b>TestB</b>
  <u><b>TestUB</b></u>
</html> 
```

我需要一个 XSLT 模板来产生这个：

```
<html>
  <b><i>TestBIU</i></b>
  <i><b>TestIBU</b></i>
  <i><b>TestIUB</b></i>
  <b><i>TestBUI</i></b>
  <i><b>TestUIB</b></i>
  <b><i>TestUBI</i></b>
  <u>TestU</u>
  <i>TestI</i>
  <b>TestB</b>
  <b>TestUB</b>
</html> 
```

因此，当它与斜体和/或粗体标签结合出现时，它应该删除下划线标签。当只加下划线时，它应该保留。任何想法如何解决这个特定问题？

这是我的尝试，但如果 TestUIB 和 TestUBI 失败：

```
<xsl:template match="/">
    <html>
    <xsl:apply-templates />
    </html>
</xsl:template>
<xsl:template match="b/u">
      <xsl:apply-templates />
</xsl:template>
<xsl:template match="i/u">    
      <xsl:apply-templates />
</xsl:template>
<xsl:template match="u/i">
  <i><xsl:apply-templates /></i>
</xsl:template> 
<xsl:template match="u/b">
    <b><xsl:apply-templates /></b>
</xsl:template>    
<xsl:template match="b | u | i">
    <xsl:copy>
        <xsl:apply-templates select="* | text()"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:46:41.583

我认为

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="b//u | i//u | u[b] | u[i]">
  <xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet> 
```

就够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:14:18.393

试试这个：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="u[ancestor::b | ancestor::i | descendant::b | descendant::i]">
    <xsl:apply-templates />
</xsl:template>

</xsl:stylesheet> 
```

它为您的示例生成以下输出：

```
<html>
    <b><i>TestBIU</i></b>
    <i><b>TestIBU</b></i>
    <i><b>TestIUB</b></i>
    <b><i>TestBUI</i></b>
    <i><b>TestUIB</b></i>
    <b><i>TestUBI</i></b>
    <u>TestU</u>
    <i>TestI</i>
    <b>TestB</b>
    <b>TestUB</b>
</html> 
```

**Description**: In my solution I'm using [identity transform](http://en.wikipedia.org/wiki/Identity_transform) that copies everything node by node and attribute by attribute. The second template intercepts all `<u>` HTML tags that have `<i>` or `<b>` amongst their ancestors or descendants. When such situation occurs, we do not copy the tag, but only invoke apply-templates which will take care of its children.

# sql - 在 sql 查询中传递条件

> ID：13414897
> 
> 赞同：0
> 
> 时间：2012-11-16T10:37:24.267
> 
> 标签：sql, oracle

在我的项目中，我需要编写一个 sql 查询，但我有一个问题。例如，我有一千个机构，我需要为这些机构测试几个字段，但有时某个机构的某些字段不存在，因此我的查询在结果中丢弃了这个机构。所以我想做的是测试该机构是否存在该领域，如果是则进行条件测试，否则通过条件。

有没有办法像这样在“WHERE”部分简单地做到这一点：

```
where if(e.field1 exist) then e.field1='plop1' and if(e.field2 exist) then e.field2='plop2' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:40:18.967

```
where (e.field1 is null or e.field1 = 'plop1')
    and (e.field2 is null or e.field2 = 'plop2') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:41:33.687

为此，您可以使用 coalesce 函数：

```
SELECT COALESCE(e.field1, 'plop1') AS field1 FROM table e 
```

这将用字符串“plop1”替换字段的 NULL 值，从而为每条记录生成非空结果。

另见[http://www.techonthenet.com/oracle/functions/coalesce.php](http://www.techonthenet.com/oracle/functions/coalesce.php)

编辑：我假设字段“field1”存在于您的数据库模式中。否则，这是一个完全不同的问题，可能已经在数据库/应用程序设计级别解决了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T10:43:47.477

你必须使用 REF CURSOR

像下面

```
TYPE curvar_type IS REF CURSOR;
   curvar    curvar_type;

    my_query_v   VARCHAR2(1000) := 'select * from something';
    where_v       VARCHAR2(100);
    BEGIN
       ...
       IF (abc is null)
           where_v := 'xyz=null';
       ELSE
           where_v := 'xyz='''||abc'' ';
       END IF;

        my_query_v := my_query_v || ' WHERE ' || where_v;
       ... 
```

# facebook - 不推荐使用 fb:page_id 来声明域的理想解决方案

> ID：13414898
> 
> 赞同：8
> 
> 时间：2012-11-16T10:37:27.603
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-insights

我被要求为一个品牌申请一个域名。我们曾经通过使用来做到这一点

```
<meta property="fb:page_id"content="%page_id_here%" /> 
```

这将自动让相关 Facebook 页面的管理员访问域见解。Facebook 将不再验证此类域的所有权 ( [1](https://stackoverflow.com/questions/13347937/the-app-id-specified-within-the-fbapp-id-meta-tag-was-invalid) ) ( [2](https://stackoverflow.com/questions/10724036/claiming-a-domain-for-facebook-insights) )，您必须使用`fb:admin`or `fb:app_id`。

显然`fb:app_id`将是执行此操作的首选方式，但这是否意味着我们有两组用户权限，一组用于 Facebook 页面，一组用于仅为域创建的 Facebook 应用程序？

有什么简单的方法可以使它们一模一样吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-02T21:15:38.870

取自洞察页面。

```
<meta property="fb:admins" content="1234,1235" />
<meta property="fb:app_id" content="your_app_id" /> 
```

fb:admins 可以采用单个用户 ID 或逗号分隔的用户 ID 列表的值。fb:app_id 可以采用单个应用 ID 的值。

由于必须手动添加每个用户 ID，您失去了访问的管理员自动化，但获得了“两者兼而有之”。

# python - Python 日志记录 - 当前安装的记录器/处理程序的概述

> ID：13414899
> 
> 赞同：4
> 
> 时间：2012-11-16T10:37:37.137
> 
> 标签：python, django, logging, fluentd

我正在尝试使用代码中的记录器从 Django 项目中设置 Fluentd 日志处理程序：

```
def get_fluentd_logger(name):
    import logging
    from fluent import handler

    logging.basicConfig(level=logging.DEBUG)
    logger = logging.getLogger(name)
    logger.addHandler(handler.FluentHandler(name, host='localhost', port=24224))
    return logger 
```

`handler.FluentHandler`来自包`fluent-logger`，我在`fluent`本地运行。

流利的.conf：

```
<source>
  type forward
  port 24224
</source>

<match **>
  type copy
  <store>
        type stdout
  </store>

  <store>
          type forward
          send_timeout 60s
          recover_wait 10s
          heartbeat_interval 1s
          phi_threshold 8
          hard_timeout 60s

          <server>
            name monitoring
            host 1.2.3.4
            port 24224
            weight 100
          </server>
  </store>
</match> 
```

当我从非 django python 项目运行它时，它工作正常，但是当从 django 调用它时，它什么也不做。

问题是：有没有办法查看当前安装的记录器及其处理程序，以便我可以调试这种情况？

[编辑]

从 django 设置完成后，如下所示：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'simple': {
            'format': '%(levelname)s: %(message)s'
        },
    },
    'handlers': {
       'fluentdebug':{
            'level':'DEBUG',
            'class':'fluent.handler.FluentHandler',
            'formatter': 'simple',
            'tag':'foo.bar.baz',
            'host':'localhost',
            'port':24224,
        },
    },
    'loggers': {
        'foo.bar.baz': {
            'handlers': ['fluentdebug'],
            'level': 'DEBUG',
            'propagate': True,
        },
    }
} 
```

它确实有效。但是，我希望能够从代码中执行此操作，因为`foo.bar.baz`它可以采用许多值，并且我不想用 20 个完全相同的记录器和处理程序污染这个文件。

也许真正的问题是：为什么我不能`logging`在 Django 执行它的设置之后从代码中添加记录器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T07:24:55.163

这不是我以前处理过的事情，但是[Logging Tree](http://pypi.python.org/pypi/logging_tree)听起来像是您可能正在寻找的东西。您应该阅读[Brandon 的帖子](http://rhodesmill.org/brandon/2012/logging_tree/)，但这里有一个输出示例：

```
<--""
   Level WARNING
   Handler Stream <open file '<stderr>', mode 'w' at ...>
   |
   o<--[cherrypy]
       |
       o<--"cherrypy.access"
       |   Level INFO
       |   Handler Stream <open file '<stdout>', mode 'w' ...>
       |
       o<--"cherrypy.error"
           Level INFO
           Handler Stream <open file '<stderr>', mode 'w' ...> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T09:25:33.940

我要回答自己，因为如果有人遇到同样的问题，它更容易找到。问题似乎与`FluentHandler`. 使用@Thomas 提到的 Brandon 的 Logging 树，我们可以看到记录器已正确添加。

然而，进一步的调试表明，如果您没有明确设置日志级别，它将被设置为`NotSet`. 不知何故，在“普通”python中这是可以的，并且记录被发出。然而，在 Django 中，`NotSet`级别日志被丢弃了。我不知道这是否是标准的 Django 行为，但它引起了很多麻烦。以下是有效的代码：

```
def get_fluentd_logger(name):
    import logging
    from fluent import handler

    logging.basicConfig(level=logging.DEBUG)
    logger = logging.getLogger(name)
    logger.level = logging.INFO
    handler = handler.FluentHandler(name, host='localhost', port=24224)
    handler.level = logging.INFO
    logger.addHandler(handler)
    return logger 
```

# symfony - 如何在 Symfony2 中隐藏 E_USER_NOTICE 错误

> ID：13414900
> 
> 赞同：0
> 
> 时间：2012-11-16T10:37:46.130
> 
> 标签：symfony, error-handling

我在我的 Symfony2 项目中触发了一个错误，如下所示：

```
trigger_error('message', E_USER_NOTICE); 
```

如何抑制此错误，以使我没有收到代码 500 响应，而仅使用独白记录此通知？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:17:47.410

`trigger_error`不推荐使用在 Symfony2 中触发错误的方法。在 Symfony2 中触发错误的推荐方法是使用[异常](http://php.net/exception)。在 Symfony2 中，您可以使用全局异常和 Symfony2 框架创建的异常，甚至是您在捆绑包中创建的异常：

```
<?php
// src/Acme/DemoBundle/Exception/FooException.php
namespace Acme\DemoBundle\Exception;

class FooException extends \Exception
{
} 
```

```
<?php
// src/Acme/DemoBundle/Controller/FooController.php

// ...
use Acme\DemoBundle\Exception\FooException;

// ...
public function barAction()
{
    // ... do something

    // throw an error
    throw new FooException('message');
} 
```

但是，如果您想将某些内容记录到文件中，您可以更好地使用其中一项服务`monolog.logger`（`doctrine`、`event`、`profiler`、`request`、`router`或）。有关更多信息，请阅读[独白文档](https://github.com/Seldaek/monolog/tree/master/doc)。您还可以创建自己的 Monolog 记录器，创建服务并使用它。`security``templating`

# content-management-system - Silverstripe 功能拦截

> ID：13414908
> 
> 赞同：0
> 
> 时间：2012-11-16T10:38:11.723
> 
> 标签：content-management-system, silverstripe

有谁能告诉我如何编写一个可以拦截 silverstripe 上的发布命令的函数？我想实现一个系统，每当页面更改即将发生时，就会发送对另一个系统的 HTTP 调用，这将通知管理员页面已更改。然后我希望系统等待几分钟，让管理员有时间在未经授权的情况下删除更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:03:06.100

类中有各种事件挂钩`SiteTree`可用于此目的。

```
class MySiteTreeExtension extends DataExtension {
    function onAfterPublish() {
        $this->notifyMyAdmin(sprintf('Page "%s" has been published', $this->owner->Title));
    }
} 
```

将具有以下添加的扩展应用到您的`mysite/_config.php`:

```
Object::add_extension('SiteTree', 'MySiteTreeExtension'); 
```

您显然需要实现`notifyMyAdmin()`进行 HTTP 调用的方法。一般来说，我建议不要对用户操作进行同步 HTTP 调用，因为它们会使您的系统依赖于另一个系统的可用性。考虑使用类似[messagequeue](http://www.silverstripe.org/message-queue-module/)模块的东西。在“等待几分钟发布”方面：不可能通过扩展系统“否决”发布。为此，您可以在子类中进行覆盖`SiteTree->doPublish()`，但对于用户而言，这仍然是一种奇怪的 UI 模式。工作流模块加上“请求发布”加上一些自动批准它们的 cron 作业会更直接。

# c# - 如何为数据注释属性传递自定义错误消息

> ID：13414909
> 
> 赞同：0
> 
> 时间：2012-11-16T10:38:18.563
> 
> 标签：c#, asp.net-mvc

如果我在单独的项目中有数据合同，我将在网站中使用数据合同。现在我想为数据成员提供自定义错误消息。

我如何在 C#、ASP.Net 中实现这一点

例如：

```
[DataMember]
[Required]
public string City { get; set; } 
```

我如何提供自定义消息 - ErrorMessage = "City is required." 数据合同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:41:08.700

你可以在validationAttribute中传递它：

```
public class MyClass
{
    [Required(ErrorMessage="your custom message here")]
    public object MyProperty { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T04:24:48.697

```
public class Product 
{
     [NotMapped] // <--
     public const string priceStartsAt = "price starts at $5.00"; // <--

     [Key]
     public int Id { get; set; }
     [Required]
     public string Name { get; set; }
     [Required]
     [Range(5, 10000, ErrorMessage = priceStartsAt)] // <--
     public string FullDescription { get; set; }
     [Required]
     [Column(TypeName = "decimal(18,2)")]
     [Range(5, 10000, ErrorMessage = priceStartsAt)] // <--
     public decimal VendorPrice { get; set; }
     [Required]
     [Column(TypeName = "decimal(18,2)")]
     [Range(5, 10000, ErrorMessage = priceStartsAt)] // <--
     public decimal CustomerPrice { get; set; }  
     [Column(TypeName = "decimal(18,2)")]
     [Range(5, 10000, ErrorMessage = priceStartsAt)] // <--
     public decimal OldCustomerPrice { get; set; }
} 
```

# jquery - 如何检查具有动态名称的单选框是否被选中

> ID：13414913
> 
> 赞同：1
> 
> 时间：2012-11-16T10:38:29.300
> 
> 标签：jquery, html, validation, radio-button

我有多排这样的单选框

```
<input id="m_0" type="radio" value="m" name="c_0">
<input id="f_0" type="radio" value="f" name="c_0">

<input id="m_1" type="radio" value="m" name="c_1">
<input id="f_1" type="radio" value="f" name="c_1">

<input id="m_2" type="radio" value="m" name="c_2">
<input id="f_2" type="radio" value="f" name="c_2"> 
```

所以，我想验证是否在每一行中都选择了收音机

我试过这样-`if ($('input:radio[name="c_"+i]:checked').val()) {`

其中 i = 0,1,2... 但它不起作用

知道如何将其更改为工作吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:48:56.880

`val`返回一个始终为的字符串`true`，您应该改用**[`length`](http://api.jquery.com/length/)**属性：

```
if ($('input:radio[name=c_'+i+']:checked').length) { 
```

请注意，您错误地连接了变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:46:17.493

使用代码：

```
$("input[type=radio]").prop("checked") )
$("input[type=radio]").is(":checked") ) 
```

# mysql - CF8 - 循环求和

> ID：13414916
> 
> 赞同：0
> 
> 时间：2012-11-16T10:38:47.777
> 
> 标签：mysql, loops, coldfusion, coldfusion-8, addition

我有一个查询：

```
<cfquery name="getDesc" datasource="#ds#">
  SELECT
    desc,
    SUM(charge) as cost,
    COUNT(*) as cnt
  FROM
    product
  WHERE Length(desc) > 0
</cfquery> 
```

然后填充一个表：

```
<table>
  <tbody>
      <tr>
        <th>Description</th>
        <th>Amount of Charges</th>
        <th>Cost (&pound;)</th>
      </tr>

      <cfoutput query="getDesc">
      <tr>
        <td>
          #HTMLEditFormat(getDesc.desc)# <br />
        </td>     
        <td>
          #HTMLEditFormat(getDesc.cnt)# <br />
        </td>
        <td>
            #HTMLEditFormat(getDesc.cost)# <br />
        </td>
      </tr>
    </cfoutput>
  </tbody>
</table> 
```

我的问题是我想组合表中具有相同值的两行并且它们的两个计数加在一起。

到目前为止，我有：

```
<table>
  <tbody>
      <tr>
        <th>Description</th>
        <th>Amount of Charges</th>
        <th>Cost (&pound;)</th>
      </tr>

      <cfoutput query="getDesc">
      <tr>
        <cfif getDesc.desc EQ 'No Charge' OR getDesc.desc EQ 'No Charge (2)'>
          <td>
            No Charge & (2)
          </td>
          <td>
            <cfset cntSum = arraySum(getDesc['cnt'])>
            #cntSum#
          </td>
        <cfelse>
        <td>
          #HTMLEditFormat(getDesc.desc)# <br />
        </td>     
        <td>
          #HTMLEditFormat(getDesc.cnt)# <br />
        </td>
        </cfif>
        <td>
            #HTMLEditFormat(getDesc.cost)# <br />
        </td>
      </tr>
    </cfoutput>
  </tbody>
</table> 
```

但这给了我两行“免费和（2）”，计数是表中所有其余行的总和，而不仅仅是我想要的两行。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:01:58.517

我会更改您的查询以获取您需要的数据。这是我刚刚整理的，我认为可以满足您的要求：

```
 SELECT
    CASE `desc` WHEN 'No Charge (2)' THEN 'No Charge' ELSE `desc` END,
    SUM(charge) as cost,
    COUNT(*) as cnt
  FROM
    product
  WHERE Length(`desc`) > 0
  group by CASE `desc` WHEN 'No Charge (2)' THEN 'No Charge' ELSE `desc` END 
```

case 语句将“No Charge (2)”更改为“No Charge”，因此两种值都只有一行。group by 语句使 mySQL 对“desc”的不同值执行一次求和和计数。

# ios - 关闭 SecondViewController 时，firstViewController 中的 UIButton 无法正确更改图像

> ID：13414925
> 
> 赞同：0
> 
> 时间：2012-11-16T10:39:20.767
> 
> 标签：ios, uiviewcontroller, uibutton, viewdidload

我正在从 SecondView 控制器中保存图像并调整它的大小。
然后，当我回到 Firstview 控制器时，必须从刚刚保存的图像文件中加载此控制器上的按钮图像。

并且图像部分出现（仅图像的顶部）。但是，如果我再次转到 SecondViewController 并且不再保存图像并返回到 First ViewController，则 Button 图像会完全显示并且看起来不错。

```
- (void)showImageFirst { 

    //Show thumb image in button.

    NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
    NSString *docDirectory = [sysPaths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/thumbtest.png", docDirectory];
    UIImage *tempimage = [[UIImage alloc] initWithContentsOfFile:filePath];

    [imageForButton setImage:tempimage forState:UIControlStateNormal];
} 
```

我在 ViewDiDLoad 中调用它，我也尝试将它放在 ViewDidAppear 中：

```
-(void)viewWillAppear {
    [self.showImageFirst];
    [super viewWillAppear:animated];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:54:10.940

您可以使第一个视图控制器成为第二个视图控制器的代表。

然后，不要将图像保存到磁盘然后从磁盘加载回，只需将 UIImage 从第二个视图控制器传递回第一个视图控制器。

我还没有检查过，但我几乎可以肯定将图像保存到磁盘是异步运行的，因此当您尝试再次加载图像时，可能没有保存图像。

# java - 如何转换列表 列表到 csv 字符串

> ID：13414935
> 
> 赞同：24
> 
> 时间：2012-11-16T10:40:15.657
> 
> 标签：java, string, csv

我有`List`一个*字符串*。是否有*Java*便捷方法可以将其转换`List`为*CSV* `String`？所以 "test1, test2, test3" 是包含 "test1" "test2" "test3" 的列表 3 个字符串元素的转换结果

我可以自己编写方法来转换，`String`但也许这已经由*API*实现了？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-16T10:42:24.120

[Apache Commons Lang](http://commons.apache.org/lang/)包含一个[StringUtils.join()](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join%28T...%29)方法正是为了这个目的。请注意，存在不同的风味。

截至 2014 年 3 月，Java 8 现在有一个[StringJoiner](https://docs.oracle.com/javase/8/docs/api/java/util/StringJoiner.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-06-25T14:37:36.053

如果您使用的是 Java 8

```
List<String> objects= Arrays.asList("Test1","Test2","Test3");
String objectsCommaSeparated = String.join(",", objects);
System.out.println(objectsCommaSeparated); 
```

使用流

```
String objectsCommaSeparated = objects.stream().collect(Collectors.joining(","));
System.out.println(objectsCommaSeparated); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-16T10:44:52.713

有一个名为[Joiner](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Joiner.html)的 Guava 类可以轻松创建这类字符串。

做`Joiner.on(",").join(yourStrings)`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-16T11:41:25.483

中有一些有用的方法`org.springframework.util.StringUtils`。

例子：

```
String text = StringUtils.arrayToCommaDelimitedString(new Object[]{"test1", "test2", "test3"}); 
```

更多详情： [http ://static.springsource.org/spring/docs/1.2.9/api/org/springframework/util/StringUtils.html](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/util/StringUtils.html)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-12T15:35:11.363

写了这个简单的方法；

```
String listToCsv(List<String> listOfStrings, char separator) {
    StringBuilder sb = new StringBuilder();

    // all but last
    for(int i = 0; i < listOfStrings.size() - 1 ; i++) {
        sb.append(listOfStrings.get(i));
        sb.append(separator);
    }

    // last string, no separator
    if(listOfStrings.size() > 0){
        sb.append(listOfStrings.get(listOfStrings.size()-1));
    }

    return sb.toString();
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-16T10:44:42.183

如果您只想使用核心 java，我认为您可以使用以下内容。

```
java.util.Arrays.toString(list.toArray(new String[list.size()]).replace("[", "\"").replace("]", "\""); 
```

警告：我没有检查所有情况。;)

Arrays.toString 会产生类似的东西

```
[a], [b], [c] 
```

如果您列出包含`a, b, c`

我们可以在这里使用逗号分隔这一事实，只需删除方括号并将其替换`"`为逗号在数据中的情况。如果你不需要这个，你可以这样做`replace("[", ""`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-16T10:47:44.767

不，JDK 中没有可用的便捷方法。您可以创建自己的，但对于一般情况，这并不像看起来那么简单（例如，当字段包含分隔符、换行符或文本分隔符时）：

*   字段包含换行符：必须引用字段
*   字段包含文本分隔符：分隔符加倍
*   字段包含分隔符：必须引用字段

例子：

```
String[] fields = { "\n", ""he said \"hello\"", "," } 
```

应该给你这个：

```
"
","he said ""hello""","," 
```

编辑：这是 CSV 的提议[RFC](https://www.rfc-editor.org/rfc/rfc4180)。

EDIT2：如果有人对实现感兴趣，请发表评论，我家里的硬盘上有一个。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-10-01T15:50:11.747

```
public class StringUtil {

    public String toCsv(final List<?> list) {
        return toString(list, ',');
    }

    public String toString(final List<?> list, char delimiter) {
        final StringBuilder b = new StringBuilder();
        if (list != null) {
            for (int i = 0; i < list.size(); i++) {
                b.append(list.get(i).toString());
                if (i != list.size() - 1) {
                    b.append(delimiter);
                }
            }
        }
        return b.toString();
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-10T17:55:15.240

这就是我正在做的

```
 @Test
    public void testString(){
        List<String> listOfWords = Arrays.asList("Some","Other","lalala");

        final String fields = listOfWords.stream().reduce((t, u) -> t + "," + u).get();
        System.out.println("Look "+fields);
    } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-11-24T21:13:25.000

此代码处理包含引号、逗号和其他麻烦字符的数据：

> 公共类 ToCsv {
> 
> ```
> private static final String QUOTE = "\"";
> private static final Pattern NON_WORD = Pattern.compile(".*\\W.*");
> 
> public final static String toCsv(final List<Object> list) {
>     final StringBuilder sb = new StringBuilder();
>     String sep = "";
>     for (final Object object : list) {
>         String s = object.toString();
>         final Matcher m = NON_WORD.matcher(s);
>         if (m.matches()) {
>             if (s.contains(QUOTE)) {
>                 s = s.replaceAll(QUOTE, "\"\"");
>             }
>             sb.append(sep).append(QUOTE).append(s).append(QUOTE);
>         } else {
>             sb.append(sep).append(s);
>         }
>         sep = ",";
>     }
>     return sb.toString();
> } } 
> ```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-11-16T10:49:04.087

使用此代码

```
 public static String listToString(List list) {

        int len = list.size();
        int last = len - 1;
        StringBuffer sb = new StringBuffer(2 * (len + 1));

        sb.append('{');

        for (int i = 0; i < len; i++) {
            sb.append(list.get(i));

            if (i != last) {
                sb.append(',');
            }
        }

        sb.append('}');

        return sb.toString();
    } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-25T19:43:02.807

Android 用户，您可以使用以下内容：

```
TextUtils.join(",", getCollectionOfStrings()); 
```

第二个参数将接受 Object[] 或 Iterable 类。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-08-29T08:31:57.207

我知道已经很晚了，但我没有看到有人用[Java 8 方式](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.Iterable-)回答：

```
String csvString = String.join(",", myStringList); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-14T15:06:49.527

想要将**[List 转换为 String Java](https://www.tracedynamics.com/list-to-string-java/)**吗？让我们看看如何在 Java 中将元素的 Java 集合列表转换为字符串。

基本上，Java 中的 List 是有序集合或默认序列。

List 接受重复的元素，不像 Map 不接受重复的值，并且还将对象保存在键值对中。

我们可以在调试代码时以可读的形式打印 List 元素的内容，这很有帮助。在下面的 Java 程序中，让我们看看如何使用 toString 方法将 Java 列表转换为字符串数组。

我们使用 Arrays asList() 方法传递整数参数（数字）来创建 java 字符串数组。

换句话说，我们将整数列表作为数组传递给列表。 [在下面的 Java 程序中，让我们看看如何使用 toString 方法将 Java 列表转换为字符串数组。](https://i.stack.imgur.com/TqvPf.png)

# c++ - 如何找出迭代器是否在一个范围内？

> ID：13414941
> 
> 赞同：1
> 
> 时间：2012-11-16T10:40:34.937
> 
> 标签：c++, iterator

假设我有一个包含三个迭代器的容器`it1`，`it2`和`it3`。现在我正在使用`it1`并`it2`定义一个范围，例如传递给一些标准算法。

**我如何找出是否在and`it3`定义的范围内？`it1``it2`**

`it1`我知道将临时迭代器从to推进并在每一步`it2`检查的蛮力方法。`it3`有更快的方法吗？

首选的解决方案是标准 C++，没有诸如 boost 之类的库。

**编辑：**它没有先验地`ìt3`作用于给定容器的同一实例，因为`it1`总是`it2`如此。所以另一个问题是：**有没有办法找出两个迭代器属于同一个容器实例？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:42:06.183

随机访问迭代器具有可比性。就这样做`it1 < it3 && it2 > it3`-**如果**它们属于同一个集合。

您可以在支持 O(1) 索引的集合上获得随机访问迭代器，例如`vector`、 `deque`和`array`。

**编辑**：检查一个交互器是否属于给定的集合显然是不可行的，这应该是一个完全不同的问题。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/6302706/c-check-if-iterator-belongs-to-a-list)。（tl;博士：你不能。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:44:27.217

对于前向迭代器：

*   1 将它们全部滚动到容器的末尾并计算偏移量
*   2 比较偏移量

对于随机访问迭代器，请立即比较它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T10:45:12.940

没有对所有类型的容器都有效的方法，但通用方法是使用[`std::distance`](http://en.cppreference.com/w/cpp/iterator/distance)并检查其符号。

```
auto dist1 = std::distance(it1, it3); // should be 0 or +ve
auto dist2 = std::distance(it3, it2); // should be 0 or +ve 
```

唯一的要求是迭代器满足`InputIterator`要求。

请注意，如果任何迭代器彼此无法访问，则行为未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:03:33.863

如果您不知道它来自哪里，请不要使用迭代器。`<g>`您所做的任何比较仅在迭代器指向范围内时才有效，因此您不能使用迭代器比较来做出该确定。

但是，在大多数情况下，您可以使用蛮力：

```
while (first != last)
    if (&*first == &*questionable)
        // in sequence 
```

假设迭代器的 value_type 没有`operator&`以某种时髦的方式重载。

# css - 将文本与引导程序上相邻按钮的中心对齐

> ID：13414950
> 
> 赞同：0
> 
> 时间：2012-11-16T10:41:20.783
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap, modal-dialog

我有以下 jsfiddle 模态

[http://jsfiddle.net/WGGn6/1/](http://jsfiddle.net/WGGn6/1/)

在登录按钮旁边，我想要一个“忘记密码”链接。

问题是链接不在按钮的中心，看起来很糟糕

![在此处输入图像描述](../Images/24d4a9c93d1b8b9f7d80718d7e60ca29.png)

相关的html代码是：

```
 <div class="control-group">
            <div class="controls" style="position: relative;">
                    <div class="checkbox"><input name="user[remember_me]" type="hidden" value="0"><input id="user_remember_me" name="user[remember_me]" type="checkbox" value="1"> <label for="user_remember_me">Remember me</label></div>
                <input class="control-group btn" name="commit" type="submit" value="Sign in"><a href="/users/password/new" data-remote="true" class="control-group" id="forgotpass" style="position: absolute; ">Forgot your password?</a> 
```

它是从 erb 创建的：

```
<div class="control-group">
            <div class="controls" style="position: relative;">
                <% if devise_mapping.rememberable? -%>
                    <div class="checkbox"><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
                <% end -%>
                <%= f.submit "Sign in" , :class => "control-group btn"%><%- if devise_mapping.recoverable? && controller_name != 'passwords' %><%= link_to "Forgot your password?", new_user_password_path , :remote=>true, :style => "position: absolute; bottom: 0", :id=>"forgotpass" %>
                <% end -%>
                <%= ajaxloadericon %>
            </div>
        </div> 
```

必须做什么才能使其处于中心位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:50:24.133

您可以使用填充来做到这一点，它可以移动文本。

```
​#forgotpass {
    padding: 5px 0 0 3px;
}​ 
```

会给你[这个](http://jsfiddle.net/WGGn6/2/)

# r - 从数据框中提取具有最高和最低值的行

> ID：13414954
> 
> 赞同：5
> 
> 时间：2012-11-16T10:41:58.843
> 
> 标签：r, dataframe, plyr, subset, outliers

我对 R 很陌生，我主要使用它来使用`ggplot2`库来可视化统计数据。现在我遇到了数据准备的问题。

我需要编写一个函数，它将从数据框中删除一些（2、5 或 10）行，这些​​行在指定列中具有最高和最低值，并将它们放入另一个数据框中，并对两个因素的每个组合执行此操作（在我的情况下：每天和服务器）。

到目前为止，我已经完成了以下步骤（MWE 使用`esoph`示例数据集）。

我已经根据所需的参数（`ncontrols`例如）对框架进行了排序：

```
esoph<-esoph[with(esoph,order(-ncontrols)) ,] 
```

我可以显示每个因子值的第一个/最后一个记录（在此示例中为每个年龄范围）：

```
by(data=esoph,INDICES=esoph$agegp,FUN=head,3)
by(data=esoph,INDICES=esoph$agegp,FUN=tail,3) 
```

所以基本上，我可以**看到**最高和最低值，但我不知道如何将它们提取到另一个数据框中以及如何将它们从主要数据框中删除。

同样在上面的示例中，我可以看到一个因素（年龄范围）的每个值的最高/最低记录，但实际上我需要知道**两个**因素的每个值的最高和最低记录——在这个例子中，它们可能是`agegp`和`alcgp`。

我什至不确定上述这些步骤是否可行 - 也许使用`plyr`会更好？我会很感激任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:53:21.393

是的，您可以`plyr`按如下方式使用：

```
esoph <- data.frame(agegp = sample(letters[1:2], 20, replace = TRUE),
                    alcgp = sample(LETTERS[1:2], 20, replace = TRUE),
                    ncontrols = runif(20))

ddply(esoph, c("agegp", "alcgp"),
      function(x){idx <- c(which.min(x$ncontrols),
                           which.max(x$ncontrols))
                  x[idx, , drop = FALSE]})
#   agegp alcgp  ncontrols
# 1     a     A 0.03091483
# 2     a     A 0.88529790
# 3     a     B 0.51265447
# 4     a     B 0.86111649
# 5     b     A 0.28372232
# 6     b     A 0.61698401
# 7     b     B 0.05618841
# 8     b     B 0.89346943

ddply(esoph, c("agegp", "alcgp"),
      function(x){idx <- c(which.min(x$ncontrols),
                           which.max(x$ncontrols))
                  x[-idx, , drop = FALSE]})
#    agegp alcgp ncontrols
# 1      a     A 0.3745029
# 2      a     B 0.7621474
# 3      a     B 0.6319013
# 4      b     A 0.3055078
# 5      b     A 0.5146028
# 6      b     B 0.3735615
# 7      b     B 0.2528612
# 8      b     B 0.4415205
# 9      b     B 0.6868219
# 10     b     B 0.3750102
# 11     b     B 0.2279462
# 12     b     B 0.1891052 
```

可能有很多替代方法，例如使用`head`and`tail`如果您的数据已经排序，但这应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T18:07:16.443

使用基础 R：

```
newesoph <- esoph[esoph$ncontrols == ave(esoph$ncontrols,list(esoph$agegp,esoph$alcgp),FUN = max) 
        | esoph$ncontrols == ave(esoph$ncontrols,list(esoph$agegp,esoph$alcgp),FUN = min), ] 
```

# vb.net - 无法在 vb.net 中检查对象的空值

> ID：13414957
> 
> 赞同：0
> 
> 时间：2012-11-16T10:42:09.367
> 
> 标签：vb.net, object, properties

这是我的课：

```
Public Class AddressForm

    Private Street As String

    Property Street_() As String
        Get
            Return Street
        End Get
        Set(ByVal value As String)
            If value IsNot Nothing Then
                Street = ""
            Else
                Street = value
            End If

        End Set
    End Property
End Class 
```

这是我上面类 BusinessAddressDialog 的对象

如果 Not BussinessAddressDialog.Street_ = String.Empty（此处应用程序因空值而崩溃）在此行之后，我将在数据库中插入值

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:51:11.357

尝试使用`ShortCircuit`技术：

```
If BussinessAddressDialog IsNot Nothing AndAlso _
   BussinessAddressDialog.Street_ = String.Empty Then
    ' Do you work here
End If 
```

可能`BussinessAddressDialog`未初始化已设置为`Nothing`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:47:51.500

如果该`Street`字段在您使用它之前不会被初始化，您可以在您`Set`的.`value``Nothing`

```
Public Class AddressForm

    Private Street As String

    Property Street_() As String
        Get
            If Street Is Nothing then
                Return String.Empty
            Else
                Return Street
            End If
        End Get
        Set(ByVal value As String)
            If value Is Nothing Then
                Street = ""
            Else
                Street = value
            End If

        End Set
    End Property
End Class 
```

# active-directory - 使用 LotusScript 查询 AD - lastLogon 值为空

> ID：13414958
> 
> 赞同：1
> 
> 时间：2012-11-16T10:42:11.700
> 
> 标签：active-directory, lotusscript, ldap-query

亲爱的 LotusScript 大师，

我正在开发一个 Lotus Notes 代理，它应该将我们的 Windows 2003 AD 与我们的 Lotus Domino 目录（V 7.0.3 服务器/客户端）同步。

我正在使用 ADODB.Connection 和 ADODB.Command 进程来连接它并查询 AD 用户。

这是命令文本：

`objCommand.CommandText = "<LDAP://ou=DMHU Users,dc=some,dc=kindof,dc=domain>;(&(objectCategory=person)(objectClass=user));name,lastLogon;subTree"`

然后我将访问“lastLogon”字段的内容：

`objRecordSet.Fields("lastLogon").Value`

但这是空的，而“名称”字段具有正确的值（我知道 lastLogon 字段是一个 64 位日期 - 整数左右）。

例如，在 VBScript 中使用相同的查询可以很好地接收 lastLogon 内容。

在 LotusScript 代码中使用类似 SQL 的查询也会给出相同的空 lastLogon 值。

有人有想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:11:48.163

最后我找到了解决方案。

要访问 lastLogon （以及此类 AD 变量），首先必须设置一个接收当前 AD 用户对象的对象：

```
Set objUser = GetObject(rs.Fields("adspath").Value)

... 
```

那么 lastLogon 也必须设置为一个对象：

```
Set objLastLogon = objUser.Get("lastLogonTimeStamp") 
```

此 OLE 对象将有一个 HighPart 和一个 LowPart 成员。使用该成员可以计算上次登录日期和时间。

这篇博文让我大开眼界： [http ://sgwindowsgroup.org/blogs/badz/archive/2010/03/01/querying-for-the-lastlogontimestamp-attribute-of-all-users-in-an-ou.aspx](http://sgwindowsgroup.org/blogs/badz/archive/2010/03/01/querying-for-the-lastlogontimestamp-attribute-of-all-users-in-an-ou.aspx)

这是我实现的功能，可以接收特定用户的CN和lastLogonTimeStamp。

```
Sub getADUserLastLogon(sUser As String)
    Dim workspace As New NotesUIWorkspace
    Dim conn As Variant
    Dim sRoot As String

    sRoot = "LDAP://ou=USERS_OR_WHATEVER,dc=my,dc=domain"

    Set oConn = CreateObject("ADODB.Connection")
    oConn.Provider = "ADSDSOObject"
    oConn.Open "Ads Provider", "USERNAME", "SECRETPWD" ' open connection with specific user credentials

    Dim rs
    Set rs = oConn.Execute("<" & sRoot & ">;(&(objectCategory=person)(objectClass=user)(cn=" & sUser & "));" &_
    "adspath,distinguishedname,sAMAccountName,cn,mail,telephoneNumber,lastLogonTimeStamp;subtree")

    While Not (rs.EOF)
        On Error Resume Next

        Set objUser = GetObject(rs.Fields("adspath").Value)

        'Print "getting user: " & objUser.Get("cn")

        Set objLastLogon = objUser.Get("lastLogonTimeStamp")

        Dim intLastLogonTime As Double

        intLastLogonTime = (objLastLogon.HighPart * (2^32)) + objLastLogon.LowPart ' due to the 64 bit number
        intLastLogonTime = intLastLogonTime / (60 * 10000000) ' convert from 100nanosec to minutes
        intLastLogonTime = intLastLogonTime + 60 ' local timezone
        intLastLogonTime = intLastLogonTime / 1440 ' convert to hours
        intLastLogonTime = intLastLogonTime + Datenumber(1601,1,1)

        Call workspace.CurrentDocument.Document.ReplaceItemValue("txtADResult", _
        workspace.CurrentDocument.FieldGetText("txtADResult") & Chr(13) & _
        rs.Fields("cn").Value & " Last Logon: " & Format$(Cdat(intLastLogonTime), "yyyy.mm.dd. hh:nn:ss"))

        rs.MoveNext
    Wend
End Sub 
```

# iphone - 如何使用 CaptiveNetwork 获取可用 WiFi 网络列表

> ID：13414961
> 
> 赞同：3
> 
> 时间：2012-11-16T10:42:16.890
> 
> 标签：iphone, ios, ios6, wifi

我想获取一个区域内所有可用的 WiFi 网络及其 SSID 和 SSIDDATA 值。使用[它](https://stackoverflow.com/questions/5198716/iphone-get-ssid-without-private-library)，我可以获得我正在使用的 WiFi 网络的 SSID 和 SSIDDATA 值。但问题是如何获取所有可用 WiFi 网络的 SSID 和 SSIDDATA，即使我没有连接到其中一个。我不想使用私有 API 来做这件事，因为它会被 AppStore 拒绝。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:57:37.220

简单的答案是，如果不使用私有 API，您将无法获得它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T00:35:30.697

我相信您也许可以通过 Apple 的[SystemConfiguration API](https://developer.apple.com/reference/systemconfiguration)。

[来自另一篇文章的](https://stackoverflow.com/questions/31715055/how-to-get-available-wifi-network-name-in-ios-using-swift)这段代码可能有用：

```
import UIKit
import Foundation
import SystemConfiguration.CaptiveNetwork

class FirstView: UIViewController
{
    @IBOutlet weak var label: UILabel!

    override func viewDidLoad()
    {
        super.viewDidLoad()
        let ssid = self.getWiFiName()
        print("SSID: \(ssid)")
    }

    func getWiFiName() -> String? {
        var ssid: String?
        if let interfaces = CNCopySupportedInterfaces() as NSArray? {
            for interface in interfaces {
                if let interfaceInfo = CNCopyCurrentNetworkInfo(interface as! CFString) as NSDictionary? {
                    ssid = interfaceInfo[kCNNetworkInfoKeySSID as String] as? String
                    break
                }
            }
        }
        return ssid
    }
} 
```

# iphone - 越狱 iPhone 上最快的跨进程？

> ID：13414963
> 
> 赞同：4
> 
> 时间：2012-11-16T10:42:18.690
> 
> 标签：iphone, macos, ipc, jailbreak

首先，我们谈论的是越狱 iPhone 上的守护进程和应用程序之间的 IPC。

据我所知，进程之间的通信有 4 种方式，它们是 BSD `socket`，`CPDistributedMessagingCenter, CFMessagePort, CFSocket.`

我想知道哪种方式最适合经常（例如每秒 50 次）、快速、少量数据（每次 50-1k 字节）、基于回复的通信？

PS：我今天在 MAC OS X 上看到了分布式对象。我尝试在 iphone 上运行它但失败了。任何人都可以帮忙吗？还是分布式对象不值得尝试？

# google-visualization - 如何从谷歌地理图表的工具提示中删除坐标

> ID：13414966
> 
> 赞同：4
> 
> 时间：2012-11-16T10:42:35.450
> 
> 标签：google-visualization

我在地图上添加了一些标记（使用 Googles Chart API）

```
data.addColumn('number', 'Lat');
data.addColumn('number', 'Long');
data.addColumn('number', 'Value');
data.addColumn({type:'string', role:'tooltip'}); 

data.addRows([
    [48.1667,14.0333, 15, 'Tooltiptext'],
    [48.2000,14.0333, 25, 'Tooltiptext'],
    [48.2000,14.2333, 35, 'Tooltiptext']
]); 
```

这是它的外观：

![在此处输入图像描述](../Images/0e618bc698304dca1e88f6aae4a7cec5.png)

我想摆脱纬度/经度并将其替换为`Tooltiptext: {value}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:40:09.733

您可以使用此数据结构，例如：

```
google.visualization.DataTable();

 data.addColumn('number', 'Lat');                                
 data.addColumn('number', 'Long');
 data.addColumn('string','tooltip');
 data.addColumn('number','Example');
 data.addColumn({type:'string', role:'tooltip'});

data.addRows([[41.151636,-8.569336,'Portugal',0,'test PT']]);
data.addRows([[ 39.059575,-98.789062,'USA',1,'test US']]); 
```

这样坐标就不会显示出来，并且工具提示将有 2 行。

检查一个工作示例：

[http://jsfiddle.net/cmoreira/q9Jzz/](http://jsfiddle.net/cmoreira/q9Jzz/)

# r - 将唯一值从一列复制到另一列

> ID：13414968
> 
> 赞同：1
> 
> 时间：2012-11-16T10:42:42.920
> 
> 标签：r

我最近开始使用 R，虽然我有它的手册，但我不断发现在那里找不到我需要的功能。这是我偶然发现的一个问题。

我的数据看起来像这样：

```
col1    col2    col3
Alex    NA  URL
Mike    URL NA
John    URL URL
Peter   NA  NA
James   NA  URL 
```

Col1 将始终是唯一的分类值。Col2 代表这些人来自哪里，到我的网站（URL 表示那里有一个完整的 URL，可以是 http.www.facebook.com）。NA 表示用户病毒式访问我的网站。Col3 表示引用（用户来自哪里的另一个指示）。

我需要做的是根据以下条件将数据从 col3 传输或复制到 col2：如果在 col 3 中我有一个 URL，而在 col2 我有 NA，那么我需要将带有来自 col3 的 URL 的单元格复制到col2。如果 col3 和 col2 都有 URL，那么我不想在那里发生任何事情。如果 col 3 有 NA 并且 col2 有 URL，我也不希望有任何改变。这是所需的输出

```
col1    col2                    col3   
Alex    URL(copied from col3)   URL
Mike    URL(kept this URL)      NA
John    URL(kept this URL)      URL
Peter   NA(Kept NA)             NA
James   URL(copied from col3)   URL 
```

因此，Alex 和 James 从 col3 获得了 URL，John 和 Mike 保留了他们在 col2 中的初始 URL，而 Peter 保留了他的 NA。

现在，我到处寻找，甚至在这个网站上，也找不到任何关于使用“IF”条件将数据从一列复制到另一列的信息。我发现的唯一一件事是如何使用“合并”功能将一整列从一个数据帧复制到另一个数据帧，但除此之外别无其他。

是否存在可以完成此任务的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:51:20.950

您的示例不可重现，因此我必须自己创建一些示例：

```
dat = data.frame(name = sample(c("John", "James", "Peter"), size = 10, replace = TRUE),
                 source = sprintf("http://www.%s.com", sample(LETTERS, size = 10)),
                 referal = sprintf("http://www.%s.com", sample(LETTERS, size = 10)))
# Introduce some NA's
dat[c(1,3,9), "source"] <- NA
dat[c(2,7), "referal"] <- NA
> dat
    name           source          referal
1   John             <NA> http://www.W.com                          
2  James http://www.M.com             <NA>                          
3   John             <NA> http://www.Z.com                          
4  Peter http://www.J.com http://www.L.com                          
5  Peter http://www.L.com http://www.H.com                          
6  Peter http://www.T.com http://www.U.com                          
7  James http://www.E.com             <NA>                          
8  Peter http://www.K.com http://www.K.com                          
9  Peter             <NA> http://www.R.com                          
10 James http://www.Z.com http://www.N.com 
```

您正在寻找的功能被称为`ifelse`：

```
dat = within(dat, { 
      source = as.character(source)
      referal = as.character(referal)
      source = ifelse(is.na(source), referal, source) 
    } )
> dat
    name           source          referal
1   John http://www.W.com http://www.W.com                          
2  James http://www.M.com             <NA>                          
3   John http://www.Z.com http://www.Z.com                          
4  Peter http://www.J.com http://www.L.com                          
5  Peter http://www.L.com http://www.H.com                          
6  Peter http://www.T.com http://www.U.com                          
7  James http://www.E.com             <NA>                          
8  Peter http://www.K.com http://www.K.com                          
9  Peter http://www.R.com http://www.R.com                          
10 James http://www.Z.com http://www.N.com 
```

# asp.net-mvc - 如何在云中获取运行 MVC4 应用程序的 API 响应？

> ID：13414970
> 
> 赞同：0
> 
> 时间：2012-11-16T10:42:44.220
> 
> 标签：asp.net-mvc, asp.net-mvc-4, azure-storage

我在 Windows Azure 云平台中创建了带有数据库的网站，并将我的 MVC 应用程序发布到云中，但我没有看到 XML 或 JSON 格式的 api 响应，即加载时`besmart.azurewebsites.net/api/deals`我看到的唯一内容是：

```
 <Error>
<Message>An error has occurred.</Message>
</Error> 
```

相反，我应该在数据库中看到我的表的内容。但是，当我在本地（`localhost:port/api/deals`）运行应用程序时，我可以获得 JSON 文件。

我需要使用我的云数据库的连接字符串吗？将其写入 Web.config？但是当我发布应用程序时，它会自动识别连接字符串。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:02:31.000

为了给你一个更好的答案，你需要弄清楚你得到了什么错误。选项很少，前两个将记录抛出的异常并检查您的日志，或者使用 try catch 子句将 Deals 控制器中的 GET 操作方法包装起来，并通过使用在响应中返回异常详细信息`return Request.CreateErrorResponse(statusCode, exception)`

现在，如果我必须推测（根据您的问题），我会说您可能没有正确转换/设置 SQL 连接字符串，它仍然指向本地 sql express（默认）。您是否尝试在本地运行应用程序时指向您的云数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:22:07.620

如果您`[DataMember]`在模型中使用

您需要`[DataContract]`在类上方添加到您的模型...

例子：

```
namespace DataContractExample
{
    [DataContract]//<-- Add this to your model
    class exaple
    {
        [DataMember]
        public string example_string; 
```

# javascript - 多重搜索打开事件

> ID：13414973
> 
> 赞同：0
> 
> 时间：2012-11-16T10:42:54.270
> 
> 标签：javascript, jquery, jqgrid

我想知道打开 multipleSearch 对话框时是否有事件。我试过寻找，但似乎找不到任何帮助。我尝试了以下代码作为测试，但没有成功。

```
{closeOnEscape: true, multipleSearch: true,onOpen:function(){
        console.log("open");
    }} 
```

谁能指出我正确的方向，如果有的话？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:33:09.287

可能您需要使用`afterShowSearch`,`afterRedraw`或`afterChange`回调而不是`onOpen`. 请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asinge_searching#options)。

# sql - 使用动态 sql 插入日期时间值的最佳方法是什么

> ID：13414975
> 
> 赞同：0
> 
> 时间：2012-11-16T10:42:59.747
> 
> 标签：sql, tsql, sybase

使用动态 sql 字符串插入日期时间值的最佳方法是什么，同时能够处理值为空的可能性？

当前语句从使用字符串构建的 select 语句插入到表中。datetime 值存储在一个参数中，该参数在 select 中使用。

像这样：

```
SET @execsql = 'INSERT INTO ( start_date )
SELECT ( ''' + CAST(start_date as VARCHAR) + ''' + ')'
EXECUTE(@execsql) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:53:54.483

当您运行 Sybase 时，类似

```
Set @execsql = 'Insert Into <table> ( start_date ) Select (' + 
  Case When start_date is null Then
    'Null' 
  Else 
    '''' + Cast(start_date as Varchar) + '''' 
  End + ')'

Execute(@execsql) 
```

应该做的伎俩

这是SQL Server方式供参考

```
Declare @sql nvarchar(max), @params navarchar(max)

Set @sql = N'Insert Into Table (start_date) Select (@start_date)'
Set @params = N'@start_date datetime'

Exec sp_executesql @sql, @params, @start_date 
```

显然，在这种情况下，您不需要动态 SQL，但我认为这是一个更大示例的一部分。

与动态 SQL 问题一样，建议阅读[http://www.sommarskog.se/dynamic_sql.html 。](http://www.sommarskog.se/dynamic_sql.html)

# java - PSelectionEventHandler 不触发回调

> ID：13414978
> 
> 赞同：0
> 
> 时间：2012-11-16T10:43:12.857
> 
> 标签：java, swing, piccolo

我正在使用 Piccolo2D 库在画布上绘制节点。我已经在 Piccolo2D 的示例中设置了 PSelectionEventHandler：[SelectionExample.java](http://code.google.com/p/piccolo2d/source/browse/piccolo2d.java/trunk/examples/src/main/java/edu/umd/cs/piccolo/examples/SelectionExample.java?r=1021) ，然后我在

```
private void nodeSelected(final PNotification n)
{
}   // nodeSelected 
```

但是当我选择节点时，不会调用回调。为什么？

***编辑：（取自OP的回答）***

好的，代码如下：

在主 JFrame 中：

```
this.panelMain().panelWorkspace().canvas().addInputEventListener(
this.handlerCanvasSelection());
this.panelMain().panelWorkspace().canvas().getRoot().getDefaultInputManager().
     setKeyboardFocus(this.handlerCanvasSelection());

PNotificationCenter.defaultCenter().addListener(this, "nodeSelected",
                PSelectionEventHandler.SELECTION_CHANGED_NOTIFICATION,
                this.handlerCanvasSelection());

private void nodeSelected(final PNotification n)
{
}   // nodeSelected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:44:23.477

问题是`nodeSelected()`声明了注册为回调的方法`private`。的实现`PNotificationCenter.addListener()`使用反射来查找和注册回调方法。它实际上使用`Class.getMethod()`which 只返回公共方法。因此，如果未找到该方法（无论出于何种原因），则未注册侦听器。

考虑这个演示`SELECTION_CHANGED_NOTIFICATION`通知的简单示例：

![在此处输入图像描述](../Images/1977546fd093231ca4a9f72cdb4ad512.png)

```
import java.awt.*;
import javax.swing.*;
import edu.umd.cs.piccolo.*;
import edu.umd.cs.piccolo.nodes.*;
import edu.umd.cs.piccolox.event.*;

public class TestSelectHandle {

    private static void createAndShowUI() {
        JFrame frame = new JFrame("TestSelectHandle");
        PCanvas canvas = new PCanvas() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(100, 200);
            }
        };

        final JTextArea output = new JTextArea(5, 20);

        JSplitPane splitPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
                canvas, output);
        frame.add(splitPane);

        final PNode blueRect = PPath.createRectangle(50, 50, 50, 50);
        blueRect.setPaint(Color.BLUE);
        canvas.getLayer().addChild(blueRect);

        final PNode redRect = PPath.createRectangle(110, 110, 50, 50);
        redRect.setPaint(Color.RED);
        canvas.getLayer().addChild(redRect);

        canvas.removeInputEventListener(canvas.getPanEventHandler());
        canvas.removeInputEventListener(canvas.getZoomEventHandler());

        PSelectionEventHandler selectionHandler = new PSelectionEventHandler(
                canvas.getLayer(), canvas.getLayer());
        canvas.addInputEventListener(selectionHandler);
        canvas.getRoot().getDefaultInputManager()
                .setKeyboardFocus(selectionHandler);

        PNotificationCenter.defaultCenter().addListener(
                new NodeSelectionListener(output), "selectionChanged",
                PSelectionEventHandler.SELECTION_CHANGED_NOTIFICATION,
                selectionHandler);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static class NodeSelectionListener {
        private JTextArea output;

        public NodeSelectionListener(JTextArea output) {
            this.output = output;
        }

        public void selectionChanged(final PNotification notfication) {
            output.append("selection changed\n");
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

# jquery - 单击按钮后jquery的hide（）方法不起作用

> ID：13414985
> 
> 赞同：-3
> 
> 时间：2012-11-16T10:43:51.833
> 
> 标签：jquery, html, css

我有两个按钮，其中一个按钮 ie`Staffing`和另一个按钮 ie `NonStaffing`。当我单击`Staffing`按钮时，我能够得到我想要的结果，这意味着我能够看到 page1 并隐藏 page2。但是当我点击`NonStaffing`按钮时，我没有得到我想要的结果，这意味着隐藏 page1 并显示 page2。它隐藏了整个页面。我无法弄清楚问题所在。

HTML：

```
<ul>
     <li class="menu-item" style="list-style-type: none;margin-left: 50px; margin-top: -120px; position: absolute;">
        <input   type="submit" name="projectType" value="Staffing" >
     </li>
    <li style="list-style-type: none;margin-left: 150px; margin-top: -120px; position: absolute;" >
        <input type="submit" name="projectType1" value="NonStaffing">
    </li>
</ul>

<div id="abc1" style="background: #CCC; height:250px;width:250px;margin-top:150px;border: 4px solid #AAA;">
   <button>Open Dialog</button>
        Page1  

</div>

<div id ="mno" style="background: #CCC; height:110px;width:150px;margin-left:410px;margin-top: -250px; border: 4px solid #AAA;"> Page2

</div> 
```

Javascript：

```
var dialogOffset = {
    top: 50,
    left: 10
}
  $("input:submit[name=projectType1]").click(function() {
    var value = $(this).val();
    if(value=='NonStaffing'){

        $('#mno').show();
         $('#abc1').hide();

    }else{

    }
});

     $("input:submit[name=projectType]").click(function() {
                var value = $(this).val();
                    if(value=='Staffing'){
                        $('#abc1').show();
                        $('#mno').hide();
                    }else{}
                }); 

$('button').click(function() {
    var $parent = $(this).closest('div.col');
    var parentPos = $parent.offset()
    var parentIndex = $('.col').index($parent);   
    var numDialogs= $('.colDialog_'+parentIndex).length;
    var dialogTop=parentPos.top + dialogOffset.top + numDialogs*30;
    var dialogPosition = [parentPos.left + dialogOffset.left, dialogTop];
    $('<div class="colDialog_'+parentIndex+'">').dialog({      
        position:  dialogPosition,
        width: 170,
        title: 'Col:'+(parentIndex+1 +', Dia: '+(numDialogs+1)) ,
        close: function() {
            $(this).remove()
        }
    })
});​ 
```

[您可以在此处](http://jsfiddle.net/CPtp4/4/)找到上述代码的 JSFiddle 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:01:02.907

这是一个简化的代码：它并不完美，但我试图保持您代码的理念。它修复了由于负边距和绝对定位使用不当引起的问题。javascript可以相同...

```
<ul style="list-style-type: none; margin-top: 50px;">
     <li class="menu-item" style="margin-left: 50px; display: inline-block;">
        <input   type="submit" name="projectType" value="Staffing" >
     </li>
    <li style="margin-left: 50px; display: inline-block;" >
        <input type="submit" name="projectType1" value="NonStaffing">
    </li>
</ul>

<div style="margin-top:150px; position: relative;">
    <div id="abc1" style="position: absolute; background: #CCC; height:250px; width:250px; border: 4px solid #AAA;">
       <button>Open Dialog</button>
            Page1         
    </div>

    <div id ="mno" style="position: absolute; left: 350px; background: #CCC; height:110px; width:150px; border: 4px solid #AAA;"> Page2

    </div>
</div> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:01:07.993

```
<input type="submit" class="chgpage" rel="abc1" value="Staffing" >
<input type="submit" class="chgpage" rel="mno" value="NonStaffing">
<div id="abc1" class="page" style="display:none;width:500px;height:500px;border:1px solid black;">Page1</div>
<div id ="mno" class="page" style="display:none;width:500px;height:500px;border:1px solid red;">Page2</div>

<script type="text/javascript">
     $("input.chgpage").click(function() {
         $('div.page').hide();
         $('#'+$(this).attr('rel')).show();
    });
</script> 
```

玩得开心 ;）

# android - Android Alertdialog 在 Emultator 和 Device 上的大小不同

> ID：13414987
> 
> 赞同：1
> 
> 时间：2012-11-16T10:43:52.880
> 
> 标签：android, android-layout, android-alertdialog

我创建并显示了一个 Alertdialog，它在模拟器中看起来不错，但在我的设备中看起来很奇怪。

**这是它在模拟器中的样子：**

![在此处输入图像描述](../Images/208f50a3993c426cec416ca3ad67df85.png)

**这是它在设备中的样子：**

![在此处输入图像描述](../Images/f5202d1abacc88f8a3bef0aa6111dd3f.png)

这是我正在执行以显示对话框的代码：

```
 AlertDialog.Builder builder;
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View layout = inflater.inflate(R.layout.popup_contact, (ViewGroup) findViewById(R.id.ppc_llContact));
    tbMissatge = (EditText) layout.findViewById(R.id.ppc_tbMissatge);
    builder = new AlertDialog.Builder(this);

    builder.setView(layout);
    ppEnviarMsg = builder.create();

    btEnviar = (Button) layout.findViewById(R.id.ppc_btEnviar);
    btEnviar.setOnClickListener(this);

    ppEnviarMsg.show();

    ppEnviarMsg.getWindow().getAttributes().gravity = Gravity.CENTER; 
```

这里是弹出窗口的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ppc_llContact"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#414145"
        android:orientation="vertical"
        android:gravity="center">

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#ffffff"
            android:text="@string/ppc_lbContact"
            android:layout_margin="4dp"/>

        <EditText
            android:id="@+id/ppc_tbMissatge"
            android:hint="@string/ppc_tooltipContact"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="2dp" 
            android:inputType="textMultiLine"
            android:gravity="top"
            android:lines="5">
        </EditText>

        <Button android:id="@+id/ppc_btEnviar"
            android:text="@string/ppc_btEnviar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:layout_marginTop="10dp"/>

    </LinearLayout> 
```

它可能与Sense有关吗？我的设备是 HTC Desrie S，运行 ICS 和 Sense。有人知道吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:08:53.527

我认为问题可能出在这里：

```
View layout = inflater.inflate(R.layout.popup_contact, (ViewGroup) findViewById(R.id.ppc_llContact)); 
```

您将 Activity 的某些布局`ppc_llContact`用作“为返回的层次结构的根提供一组 LayoutParams 值的对象”，这是毫无意义的，因为此布局不会参与对话框的最终层次结构。

改用这个：

```
View layout = inflater.inflate(R.layout.popup_contact, null); 
```

另一种选择是以这种方式强制设置对话框的大小：

```
ppEnviarMsg.getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
//FILL_PARENT is an example 
```

# r - 带有字母数字的子集范围

> ID：13414992
> 
> 赞同：-1
> 
> 时间：2012-11-16T10:44:16.177
> 
> 标签：r

我正在尝试在数据列中定义一个子集（实际上想要创建一个具有多个不同范围的子集）。

我开始：

`subset <- x[(x$y >= "J8500" & x$y < "J8900"), ]`

但是，这不包括所有内容。剩下 0 个观察值。

```
subset <- x[x$y >= "J8500", ] 
```

确实排除了所有以 a 开头`J`且低于 8500 的变量，但它也包括一些以其他字母开头的变量。对于该命令，我只想要以 J 开头的变量。

最终，我想做类似以下的事情：

```
subset <- x[(x$y >= "J8500" & x$y < "J8900") | (x$y >= "96400" & x$y <"96599") | (x$y >= "Q0083" & x$y < "Q0085"), ] 
```

我没有太多的编码背景，希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:56:14.103

您可以使用`substr()`提取子字符串。所以如果你只想要以“J”开头的条目，你可以使用这样的东西：

```
yy <- c("KK","JK","KJ")
substr(yy,1,1)=="J" 
```

之后，您可能需要使用拆分字符串`substr()`，然后将第二部分从字符串转换为数字变量，`as.numeric()`以便它们与数字进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:29:33.533

是`x$y`一个因素吗？如果是这样，那可能会导致错误。

尝试将 y 转换为数字

```
 x$y <- as.character(x$y) 
```

或将对 x$y 的调用包装在 as.character() 中

```
subset <- x[as.character(x$y) >= "J8500" & as.character(x$y) < "J8900", ] 
```

# matlab - randperm 或同时打乱两个数据集

> ID：13414997
> 
> 赞同：0
> 
> 时间：2012-11-16T10:44:33.120
> 
> 标签：matlab, random, permutation

[我在这里](https://stackoverflow.com/questions/13412283/matching-row-samples-to-class-labels)有一个先前的问题，我认为我遇到了一个问题，因为我不能同时洗牌样本数据和样本数据的索引（idx）。

我有一个名为`fulldata`的数据集，其中包含 49,000 行 x 6 列，然后我有另一个数据集，它是 fulldata (Book2) 的类标签，其中包含许多类标签，它们对应于 fulldata 中的确切行。

我只想从 fulldata（正常。和 smurf。）中选择两个类标签，我想要 750 个正常行和 250 个 smurf 行。

然后我想随机打乱新的样本数据（1000x6）。

到此为止，已被管理。但是后来我被卡住了... Dan 帮助解决了上一个问题，但后来我注意到 k1 输出了 Book2 中的一些其他类标签，例如海王星等，但事实并非如此... K1 应该只包含 smurf 和 normal 类标签。

我问这个的原因是因为我想在matlab中使用baysian分类器，为了使用它我需要：

```
Test_Data (unseen data)
Trainning_data (This is the sample data im trying to create above)
Target_class (this is the class labels that match exactly each row in sample data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:20:54.867

我想你想要

```
idx = [smurfIdx(a);normIdx(p)]; 
```

然后确保使用上一个问题中@Dan 的建议，即

```
shuffle = randperm(1000);
sample = sample(shuffle,:);
K1 = Book2(idx (shuffle), :); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:23:25.733

这个问题的措辞有些含糊，所以不清楚你到底卡在哪里。但是，我冒昧地查看了您以前的问题（[this](https://stackoverflow.com/questions/13355372/sampling-data-in-matlab)和[this](https://stackoverflow.com/questions/13412283/matching-row-samples-to-class-labels)），所以这是我解决您问题的尝试：

出于此答案的目的，让我们首先生成一个随机数据集，类似于您的：

```
classes = {'normal.', 'smurf.', 'neptune.', 'eject.', 'portsweep.'};
fulldata = ceil(1e3 * rand(49000, 6));
Book2 = {classes{ceil(numel(classes) * rand(size(fulldata, 1), 1))}}'; 
```

让我们随机选择 750 行对应“普通”标签和 250 行对应“蓝精灵”标签。但是，与其应用`randperm`数据本身并选择前 N 个值（就像您在之前的问题中所做的那样），不如创建一个随机索引向量并使用它来索引`fulldata`和`Book2`数组，如下所示：

```
idxnormal = strmatch('normal.', Book2);            % # Find normals
idxnormal = idxnormal(randperm(numel(idxnormal))); % # Random shuffle of normals
idxsmurf = strmatch('smurf.', Book2);              % # Find smurfs
idxsmurf = idxsmurf(randperm(numel(idxsmurf)));    % # Random shuffle of smurfs
idx = [idxnormal(1:750); idxsmurf(1:250)];         % # 750 normals and 250 smurfs
idx = idx(randperm(numel(idx)));                   % # Random shuffle 
```

`idx`现在将随机索引保存到`fulldata`/'Book2' 中，这些索引仅对应于“正常”或“蓝精灵”标签。现在让我们检索具有相应标签的数据子集：

```
subsetdata = fulldata(idx, :);
K1 = Book2(idx); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:54:18.890

好的，在阅读了前面的问题后，我希望已经理解了这个问题。如果我是对的，您只是忘记了先过滤数据并仅提取 smurf 和 normal。

在这种情况下，您应该查看逻辑索引：[http ://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html;jsessionid=97fa707e5059807b7ecae8969810](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html;jsessionid=97fa707e5059807b7ecae8969810)

在绘制数据点之前使用它来提取正确的子集，你应该没问题。