# StackOverflow 问答 15348000-15348999

# html - How To Layout a Grid in CSS

> ID：15348006
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:30:13.657
> 
> 标签：html, css, layout

I need to layout a page, but I can't figure out how to do it without tables. I know it must be possible, but I can't think of a solution that isn't table-based that isn't incredibly rigid with fixed widths for everything.

Mockup: [http://i.imgur.com/jSSDhIh.png](http://i.imgur.com/jSSDhIh.png)

No matter what I do, it looks like I'm going to have commit a major sin. For example, the top set - it looks like I'm going to have either to:

1.  Create a table (the root of all evil, apparently)
2.  Hardcode widths and heights specifically for these elements. (either #id or style= or single-use classes, all three are also considered evil)

Is that the case? Is there a realistic way I can avoid those scenarios? Googling for answers just gets me a bunch of useless "TABLES ARE EVIL SO ARE CSS TABLES ALSO DON'T USE ID SELECTORS OR STYLE ATTRIBUTES EVERYTHING MUST BE A REUSABLE CLASS" with no actual useful information.

EDIT: I've already done this with CSS tables (display: table) and had it thrown back as unacceptable. I think it's fine because it works and it still looks good, but it's not my call.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:40:16.860

这是关于[HTML 表格的链接——何时以及如何在 HTML 中使用表格，](http://www.webdesignfromscratch.com/html-css/html-tables/) 这可能有助于您了解何时使用表格。

在您的模拟中，没有理由不使用表格。像 wordpress 后端使用表格作为表格，但以表格形式。

但如果你真的想在 div 上进行布局，我宁愿建议使用 css 网格框架。我个人使用zurb粉底。[这是链接](http://foundation.zurb.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:46:26.437

我建议使用 Bootstrap，它为您提供了很多样式样式选项。（但是它可能会干扰您的 CSS 的其余部分。）

以下是两列表单的工作方式：

```
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">

<div class="row">

  <!-- right column -->
  <div class="span6">
    <label>Subject <input type="text"></label>
    <label>Category <select></select></label>
    <label><input type="radio"> Permanent Change</label>
    <label><input type="radio"> Temporary Change</label>
  </div>

  <!-- right column -->
  <div class="span6">
    <label>Requested Approval Date <input type="text"></label>
    Effective Dates <input type="text"> to <input type="text">
  </div>

</div> 
```

显然，样式还有很多不足之处，但请查看[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)看看你能做多少。你会想要调查的`<form class="form-horizontal">`。预先警告 CSS 很挑剔，你需要很多`<div class="control-group">`'s.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:36:06.210

桌子并不邪恶。仅此 stackexchange 页面就有许多表格。有些人想使用 div 来使用网格创建行和跨度。我建议在它们看起来合适的地方使用表格。如果您真的想避免它，请考虑为 twitter 获取类似 bootstrap 之类的东西。 [http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem) 在那里，您可以使用他们的脚手架以您想要的方式排列项目，而无需使用表格。

# django - Django's ModelForm - where is the list of Meta options?

> ID：15348007
> 
> 赞同：28
> 
> 时间：2013-03-11T20:30:17.437
> 
> 标签：django, django-admin

In the Django documentation, where is the definitive list of `Meta` options for `django.forms.models.ModelForm`? (e.g., `model`, `exclude`, `fields`, `widgets`) I'm looking for the equivalent of [Model Meta Options](https://docs.djangoproject.com/en/dev/ref/models/options/).

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-12T21:36:44.543

今天我自己也有这个问题。为了完整起见，这里是当前存在的文档：

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelforms-overriding-default-fields](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelforms-overriding-default-fields)

摘自[django/forms/models.py](https://github.com/django/django/blob/3.1/django/forms/models.py#L195)：

```
class ModelFormOptions:
    def __init__(self, options=None):
        self.model = getattr(options, 'model', None)
        self.fields = getattr(options, 'fields', None)
        self.exclude = getattr(options, 'exclude', None)
        self.widgets = getattr(options, 'widgets', None)
        self.localized_fields = getattr(options, 'localized_fields', None)
        self.labels = getattr(options, 'labels', None)
        self.help_texts = getattr(options, 'help_texts', None)
        self.error_messages = getattr(options, 'error_messages', None)
        self.field_classes = getattr(options, 'field_classes', None) 
```

从该列表中，我搜索了文档页面上的每个选项以找到我需要的内容。希望对某人有所帮助。

# asp.net - Load an aspx page from an external project into the current web application

> ID：15348011
> 
> 赞同：1
> 
> 时间：2013-03-11T20:30:21.910
> 
> 标签：asp.net, web-applications

Say I have 'Project1' and 'Project2'. Is it possible to load an aspx page from Project1 into the current web application instantiated by Project2?

# jquery - 阿拉伯斜体字体

> ID：15348014
> 
> 赞同：10
> 
> 时间：2013-03-11T20:30:35.403
> 
> 标签：jquery, css

`font-style:italic;`像这样将字体向右倾斜：*我的字体*

在阿拉伯语中，书写是从右到左，而不是从左到右。我想要实现的是将字体斜体化，使其向左倾斜而不是向右倾斜。有什么建议么？您不必在答案中包含阿拉伯字母。`font-style:italic;`我想要与任何语言相反的东西。

![在此处输入图像描述](../Images/1e3402cce897088710b7218d0c90e9bd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T20:42:20.107

您可以使用`skew`CSS 转换声明中调用的内容：

```
.fontToTransform {
    font-size: 40px;
    transform: skewX(15deg);
    -webkit-transform: skewX(15deg);
    -moz-transform: skewX(15deg);
    -o-transform: skewX(15deg);
    -ms-transform: skewX(15deg);
} 
```

这将使您摆脱实际操作字体本身的麻烦。这将改变您的文本所在的整个块。您可能需要某种验证来检查每个换行符并将它们分隔为每次新标签。因此，这可能不是一个真正的解决方案，如果您想剪切较短（单行）的文本，您可能会考虑它。

***编辑***

这有点牵强，但这是一个肮脏的例子，它找出文本块中的各个行并将它们中的每一行放入一个 new`span`中，这将导致每行单独使用样式设置`skewX`样式。干得好：

**CSS**

```
#fontTransform {
    font-size: 40px;
    margin-right: 30px;
    text-align: right;
}

#fontTransform span {
    display: block;
    transform: skewX(15deg);
    -webkit-transform: skewX(15deg);
    -moz-transform: skewX(15deg);
    -o-transform: skewX(15deg);
    -ms-transform: skewX(15deg);
} 
```

**HTML**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>HTML</title>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="main.js" type="text/javascript"></script>
    <link rel="stylesheet" href="main.css" type="text/css" />
</head>
<body>
    <p id="fontTransform">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
</body>
</html> 
```

**main.js**

```
'use strict';
$(document).ready(function(){
    var d = document.getElementById('fontTransform');
    var t = d.innerHTML;
    var w = t.split(' ');

    var lines = [];

    d.innerHTML = w[0];
    var height = d.clientHeight;

    var tmp_line = [];

    for (var i = 0; i < w.length; i++) {
        d.innerHTML = d.innerHTML + ' ' + w[i];

        tmp_line[tmp_line.length] = w[i];

        if (d.clientHeight > height) {
            height = d.clientHeight;
            console.log(w[i-1]);

            delete tmp_line[tmp_line.length-1];
            lines[lines.length] = tmp_line;
            tmp_line = [];
        }
    }

    // Destroy d.innerHTML
    d.innerHTML = '';
    var tmp_html = '';

    // Refill the lines within spans
    for (var i = 0; i < lines.length-1; i++) {
        tmp_html = '<span>';
        for (var x = 0; x < lines[i].length-1; x++) {
            tmp_html = tmp_html + lines[i][x] + ' ';
        }
        tmp_html = tmp_html.trim();
        tmp_html = tmp_html + '</span>';

        d.innerHTML = d.innerHTML + tmp_html;
    }
}); 
```

您可能会考虑使用 jQuery 的`resize()`绑定来更新具有百分位宽度的文本块。另外，我不确定如果很长的单词不适合一行会发生什么。并不是说这可能真的会发生，但请记住，它未经测试，可能会导致单词丢失。确实需要为实际发布做更多的测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T21:34:47.003

作为一名 RTL 语言用户，我感受到了你的痛苦 :)

使用阿拉伯语网络字体并将其导入您的 CSS 怎么样？ [Amiri](http://www.amirifont.org/)是一种开放的网络字体，具有适合阿拉伯语 naskh 脚本的排版倾斜。它甚至托管在谷歌 CDN 上！

然后你可以这样做：

```
@import url(http://fonts.googleapis.com/earlyaccess/amiri.css);
.myItalic{
   font-family: 'Amiri', serif;   
   font-style: italic; 
 } 
```

这是一个有效的[JSFiddle 示例](http://jsfiddle.net/opherv/G5FuS/)

如果您不喜欢此字体，您可以使用其他其他网络字体。[这里有一些](http://www.google.com/webfonts/earlyaccess)要测试的。如果这些都不适合您 - 我想您可以找到您喜欢的字体，更改其斜体版本并以相同的方式将其嵌入您的页面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T00:59:28.123

同意 Allendar（从上方）

可以很容易地在 CSS3 中完成。根本不需要 JavaScript……。

这是你的答案：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <style type="text/css">    
      .skewTheFont {
        transform: skewX(10deg);
        -webkit-transform: skewX(10deg);
        -moz-transform: skewX(10deg);
        font-size: 60px;
        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;

      }
    </style>
    <!-- Style ends here -->  
</head>  

<body>
    <p class="skewTheFont">Arabic Font</p>

</body>

</html> 
```

但是，FF、IE10 和 Chrome 支持此功能（不适用于 < IE10）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:39:30.223

不幸的是，没有办法使用 font-style 属性来做到这一点。请参阅此处的页面：http: [//www.w3schools.com/cssref/pr_font_font-style.asp](http://www.w3schools.com/cssref/pr_font_font-style.asp)。我不确定那里是否有可能以相反方向斜体的阿拉伯字体。如果有，它们可能没有得到广泛的支持。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T21:23:44.123

亲爱的，我曾经用两件事来分割 wajbah 项目。在代码中使用方向 rtl 为：

```
dir="rtl" 
```

之后，您要在右侧显示的内容使用`float right`。

它将解决您的问题。

试试看，请回复。

# android - 为什么“android:shadowColor”属性不支持“选择器”？

> ID：15348015
> 
> 赞同：4
> 
> 时间：2013-03-11T20:30:44.623
> 
> 标签：android, adt, android-xml, android-drawable

开发者工具：面向 Java 开发者的 Eclipse IDE Juno Release+Android2.2+ADT-21.0.1.zip

使用：颜色/tab_color_text_shadow：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="#ffffff"/>
    <item android:state_focused="true" android:color="#ffffff"/>
    <item android:state_checked="true" android:color="#ffffff"/>
    <item android:color="#f75893"/>

</selector> 
```

值/样式.xml：

```
<style name="main_tab_bottom">
 <item name="android:shadowColor">@color/tab_color_text_shadow</item>
 <item name="android:shadowDy">2</item>
 <item name="android:shadowRadius">1</item>
</style>

<RadioButton xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/main_tab_bottom"
    android:layout_marginTop="2dip"
    android:drawableTop="@drawable/exam_menu"
    android:tag="radio_button1"
    android:text="检查"
    android:textStyle="bold" /> 
```

问题：为什么“android:shadowColor”不支持“选择器”？

亚行错误报告：

```
02-19 10:41:23.650: E/AndroidRuntime(29865): Caused by: java.lang.NumberFormatException: Invalid int: "res/color/tab_color_text_shadow.xml"
02-19 10:41:23.650: E/AndroidRuntime(29865):    at java.lang.Integer.invalidInt(Integer.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at java.lang.Integer.parse(Integer.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at java.lang.Integer.parseInt(Integer.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at android.content.res.TypedArray.getInt(TypedArray.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at android.widget.TextView.<init>(TextView.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at android.widget.Button.<init>(Button.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at android.widget.CompoundButton.<init>(CompoundButton.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at android.widget.RadioButton.<init>(RadioButton.java)
02-19 10:41:23.650: E/AndroidRuntime(29865):    at android.widget.RadioButton.<init>(RadioButton.java) 
```

已经发布到 android 项目，[问题 49793](https://code.google.com/p/android/issues/detail?id=49793)。

# google-maps - Google API 密钥刚刚停止工作

> ID：15348018
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:30:57.540
> 
> 标签：google-maps, geocoding, google-geocoding-api

今天我开始从谷歌收到“无效的 api 密钥”错误，经过多年的代码运行良好。今天开始。例子：

这不起作用：

[http://maps.google.com/maps/geo?q=dallas&output=xml&v=2&sensor=false&key=AIzaSyBtU9NELBF88O3yYqSjhkbTL2SkPe1xum0](http://maps.google.com/maps/geo?q=dallas&output=xml&v=2&sensor=false&key=AIzaSyBtU9NELBF88O3yYqSjhkbTL2SkPe1xum0)

这可以：

[http://maps.google.com/maps/geo?q=dallas&output=xml&v=2&sensor=false&key=ABQIAAAAzAkrOIsv60fbtV-5UlnnJxRUrcFJRfPs1DYZSl5DdA7w5qtvARRv6HblVCIt_AgTSnG3PdPypHTBEQ](http://maps.google.com/maps/geo?q=dallas&output=xml&v=2&sensor=false&key=ABQIAAAAzAkrOIsv60fbtV-5UlnnJxRUrcFJRfPs1DYZSl5DdA7w5qtvARRv6HblVCIt_AgTSnG3PdPypHTBEQ)

此外，单击链接不起作用，但将其直接粘贴到窗口中会...为什么？

两者都是有效的 API 密钥，但我认为后者是一个旧版本。但直到今天，我之前一直在使用以前的 URL。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:25:59.000

Sensor=false 是必需的输入，对于 V3 API 不再是可选的。您应该迁移到 V3，因为 V2 最终将在 2013 年 9 月停止工作。URL 和参数以及 json 和 xml 响应的格式都会发生变化

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/) [https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests)

# java - 映射到自定义对象时出现 java.lang.ClassCastException

> ID：15348022
> 
> 赞同：4
> 
> 时间：2013-03-11T20:31:06.593
> 
> 标签：java

我有一个如下所示的集合：

```
db.testdata.save(
{
    "Indicator": "One",
    "secs": [
        {
            "when": "2013-03-16",
            "num": 16,
            "choices": [
                {
                    "size": "10",
                    "mult": "10"
                },
                {
                    "size": "10",
                    "mult": "10"
                }
            ]
        },
        {
            "when": "2013-03-22",
            "num": 24,
            "choices": [
                {
                    "size": "100",
                    "mult": "100"
                },
                {
                    "size": "100",
                    "mult": "100"
                }
            ]
        }
    ]
}) 
```

我正在尝试使用自定义对象检索它，如下所示：

```
public class Test {    
    public static void main(String args[]) throws UnknownHostException {
        Mongo mongo = new Mongo();
        DB db = mongo.getDB("at");
        DBCollection testdata = db.getCollection("testdata");

        BasicDBObject query = new BasicDBObject();
        query.put("Indicator", "One");

        CustomChainData ocd = (CustomChainData) testdata.findOne(query);

        ocd.getWhen().size();    
    }    
} 
```

* * *

```
import java.util.List;    
import com.mongodb.BasicDBObject;

public class CustomChainData extends BasicDBObject{     
    public CustomChainData() {
        super();
    }    

    @SuppressWarnings("unchecked")
    public List<WhenData> getWhen() {
        return (List<WhenData>) get("secs");
    }    

    public void setWhen(List<WhenData> expirationDts) {
        put("secs", expirationDts);
    }    
} 
```

* * *

```
import com.mongodb.BasicDBObject;

public class WhenData extends BasicDBObject{        
    public String getSize() {
        return (String) get("size");
    }

    public void setSize(String size) {
        put("size", size);
    }    
} 
```

不幸的是，我不断得到：

> 线程“主”java.lang.ClassCastException 中的异常：com.mongodb.BasicDBObject 无法在 Test.main 中转换为 com.CustomChainData（Test.java:19）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T01:28:23.783

The MongoDB Java driver doesn't support automatically using sub-classes of `BasicDBObject`. That's why you're getting the `ClassCastException`; the objects returned by the driver are `BasicDBObject` instances, not instances of your subclasses.

One option to get this to work would be to replace the casts with constructor calls. For example, in `Test`, replace

```
CustomChainData ocd = (CustomChainData) testdata.findOne(query); 
```

with

```
CustomChainData ocd = new CustomChainData(testdata.findOne(query)); 
```

and in `CustomChainData`, add

```
CustomChainData(Map m) {
    super(m);
} 
```

This uses a copy-constructor to allow usage of your `CustomChainData` class with the data loaded from MongoDB. However, you'd need to apply this pattern every time you get back a `BasicDBObject` (for the When object as well, for example).

I prefer the approach of using a library that performs mapping between MongoDB data and Java objects. I've used [Morphia](https://code.google.com/p/morphia/) in the past and been quite happy with it. Other options are listed in the [MongoDB Java Language Center](http://docs.mongodb.org/ecosystem/drivers/java/#pojo-mappers).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T11:00:57.100

您需要设置对象类类型....在保存和检索对象之前使用[DBCollection的](http://api.mongodb.org/java/2.0/com/mongodb/DBCollection.html)[setObjectClass](http://api.mongodb.org/java/2.0/com/mongodb/DBCollection.html#setObjectClass(java.lang.Class))方法....在您的情况下，它应该是-

***DBCollection testdata = db.getCollection("testdata"); testdata.setObjectClass(CustomChainData.class);***

# asp.net-mvc - 使用传统的 MVC 框架 Vs 使用 HTML + Javascript + Services 应用程序有什么优势？

> ID：15348024
> 
> 赞同：3
> 
> 时间：2013-03-11T20:31:18.787
> 
> 标签：asp.net-mvc, design-patterns, web-applications, architecture

我现在正在构建一个 Web 应用程序，而客户不确定是否使用 ASP.NET MVC 或任何其他 MVC 框架（Rails、Djando 或其他也适用）。

客户没有看到使用这些框架的价值。他们更喜欢使用传统的 HTML 并通过 JavaScript 调用 Web 服务来获取所有数据。对他们来说 SOA 非常重要，他们希望所有的应用程序都是面向 SOA 的。在当前的开发中，我们正在向视图返回一些数据，用于初始加载主页（使用 ORM 工具并在控制器中完成所有计算并将模型返回到视图），并执行对页面的任何更新使用 JavaScript 调用 Rest Services。客户抱怨使用控制器将数据返回到视图。他们希望所有数据都通过 Web 服务返回，因此 MVC 框架对他们来说毫无用处。我可以对客户说什么来“推销”MVC 框架的使用？

使用每种架构的优缺点是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:38:17.200

ASP.net MVC，你可以利用面向服务的架构，后端继续使用MVC，前端会满足你的html，javascript来使用（前端控制器）并使用SOA连接你的后端后端的消息传递 (JSON) 可以使用 MVC 架构来管理您的服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:55:31.010

这一切都取决于......

当然，您可以[在 JavaScript 中使用 MVC 模式](https://stackoverflow.com/questions/386885/is-there-a-javascript-mvc-micro-framework)。您还可以[将 MVC 应用程序挂接到面向服务的体系结构](https://stackoverflow.com/questions/4110898/can-we-implement-soa-style-in-mvc-architecture)中。

我认为问题归结为“您在哪里构建页面” - 前端或服务器端。

在浏览器中构建页面的好处是显而易见的。您可以更轻松地进行扩展，因为大量繁重的工作发生在客户端。您被迫创建松散耦合的服务，您可以通过许多有趣的方式组合这些服务。

缺点可能有点微妙。大多数搜索引擎不会执行 JavaScript，因此您的服务呈现的 HTML 很可能对它们不可见。随着浏览器数量的增加（智能手机、智能电视等），测试这种应用程序逻辑可能会变得不堪重负。实际上，您想要放入 JavaScript 的业务和应用程序逻辑的数量可能会受到限制——下载时间和执行时间可能会成为一个问题，并且需要开发团队的大量纪律。根据页面逻辑，您可能无法像在服务器上构建页面时那样缓存那么多。

服务器端页面构建的好处也相当明显：您可以利用完善的库和框架。您的页面可以缓存在浏览器或 CDN 上。通过在服务器上测试业务和/或应用程序逻辑，您可以确信它可以在所有设备上运行（尽管用户界面可能会损坏）。在服务器上构建它们时，以不同格式（例如 HTML 和 RSS 版本）公开服务器生成的页面可能更容易。

服务器端页面生成的缺点包括不容易分离不同的组件并重新使用它们，除非您从一开始就进行设计。在 Web 应用程序依赖大量服务的情况下，后端代码可能无法继续使用。

# ios - 以编程方式更改导航栏标题：添加符号并更改其颜色

> ID：15348030
> 
> 赞同：2
> 
> 时间：2013-03-11T20:31:37.330
> 
> 标签：ios, objective-c, uiview, uinavigationcontroller, uikit

我想在导航控制器的`UINavigationBar`. 根据我的应用程序的状态，我想更改项目符号的前景色。

我考虑过使用属性字符串来改变颜色。但是，我没有找到直接访问标题并为其分配属性字符串的方法。

你会推荐什么解决方案来添加一个字符符号`UINavigationBar`并能够改变它的颜色？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T20:44:05.727

如果您的视图控制器包含在导航控制器中，则设置标题属性就足够了：

```
self.title=@"Something •"; 
```

Xcode 和 NSStrings 完全兼容 UTF-8，因此将项目符号直接放在字符串中就可以了。

如果您尝试独立操作导航栏标题，则必须经过一些步骤才能找到它。如果您知道它是根视图控制器，那么您可以执行以下操作：

```
UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
UINavigationController *navCtrl = (UINavigationController*)[keyWindow rootViewController];
UINavigationItem *topItem = [navCtrl topItem];
topItem.title = @"Something •"; 
```

# iphone - 在 iPhone 应用程序中设置货币

> ID：15348031
> 
> 赞同：0
> 
> 时间：2013-03-11T20:31:37.687
> 
> 标签：iphone, ios, xcode, nsnumberformatter

我的应用程序中有一个设置来更改货币。我已经意识到这将导致问题由于不同的键盘区域设置，您可能会在货币与键盘不匹配的情况下，例如在应用程序中选择的欧元，它使用逗号作为小数分隔符和英国的区域设置键盘小数分隔符。

删除我的设置并将货币设置为手机区域设置的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:41:20.057

没有问题。小数点分隔符基于用户的区域设置，而不是所选货币。例如，假设您有一个国家的用户使用逗号作为小数点分隔符，但他们选择了美元。仅仅因为美国人通常使用句点作为小数分隔符并不意味着该用户想要更改为使用外国数字格式。他们将以美元输入货币，但使用逗号。

# java - 从经典多线程到 java.nio 异步/非阻塞服务器

> ID：15348035
> 
> 赞同：9
> 
> 时间：2013-03-11T20:31:47.420
> 
> 标签：java

我是一款网络游戏的主要开发者。玩家使用特定的客户端软件通过 TCP/IP（TCP，不是 UDP）连接到游戏服务器

目前，服务器的架构是一个经典的多线程服务器，每个连接一个线程。但是在高峰时段，当经常有 300 或 400 个连接的人时，服务器变得越来越迟钝。

我想知道，如果切换到 java.nio.* 异步 I/O 模型，用很少的线程管理很多连接，性能会更好。在 Web 上查找涵盖此类服务器架构基础知识的示例代码非常容易。但是，经过数小时的谷歌搜索，我没有找到一些更高级问题的答案：

1 - 该协议是基于文本的，而不是基于二进制的。客户端和服务器交换以 UTF-8 编码的文本行。单行文本代表一个命令，每一行都以 \n 或 \r\n 正确终止。对于经典的多线程服务器，我有这样的代码：

```
public Connection (Socket sock) {
this.in = new BufferedReader( new InputStreamReader( sock.getInputStream(), "UTF-8" ));
this.out = new BufferedWriter( new OutputStreamWriter(sock.getOutputStream(), "UTF-8"));
new Thread(this) .start();
} 
```

然后在运行中，使用 readLine 逐行读取数据。

在文档中，我找到了一个实用类 Channels，它可以从 SocketChannel 创建一个 Reader。但是据说如果 Channel 处于非阻塞模式，则生成的 Reader 将无法工作，这与非阻塞模式必须使用我愿意使用的高性能通道选择 API 的事实相矛盾。所以，我怀疑这不是我想做的正确解决方案。因此，第一个问题如下：如果我不能使用它，如何有效和正确地处理断行并将本机 java 字符串从/转换为 nio API 中的 UTF-8 编码数据，带有缓冲区和通道？我是否必须手动使用 get/put 或在包装的字节数组中？如何从 ByteBuffer 转到以 UTF-8 编码的字符串？我承认不

2 - 在异步/非阻塞 I/O 世界中，如何处理本质上一个接一个地依次执行的连续读/写？例如，典型的基于挑战-响应的登录过程：服务器发送一个问题（特定计算），客户端发送响应，然后服务器检查客户端给出的响应。答案是，我认为，当然不要为整个登录过程创建一个任务发送到工作线程，因为它很长，有冻结工作线程太长时间的风险（想象一下这种情况：10 个池线程, 10 个玩家同时尝试连接；与已经在线的玩家相关的任务被延迟，直到有一个线程再次准备好）。

3 - 如果两个不同的线程同时在同一个 Channel 上调用 Channel.write(ByteBuffer) 会发生什么？客户可能会收到混淆的线路吗？例如，如果一个线程发送“aaaaa”而另一个线程发送“bbbbb”，客户端是否可以接收“aaabbbbbaa”，或者我是否确保每个线程都以一致的顺序发送？我可以在调用返回后立即修改使用的缓冲区吗？或者换一种方式问，我是否需要额外的同步来避免这种情况？如果我需要额外的同步，如何知道何时释放锁等，写完成后？恐怕答案并不像在选择器中注册 OP_WRITE 那样简单。通过尝试，我注意到我一直都得到了 write-ready 事件，并且总是针对所有客户端，主要是提前退出 Selector.select，因为每个客户端每秒只发送 3 或 4 条消息，而选择循环每秒执行数百次。因此，从潜在的角度来看，积极等待是非常糟糕的。

4 - 多个线程是否可以同时在同一个选择器上调用 Selector.select 而不会出现任何并发问题，例如丢失事件、调度两次等？

5 - 事实上，nio 是否像它所说的那样好？保留经典的多线程模型是否会很有趣，但不是为每个连接创建一个线程，而是使用更少的线程并循环连接以使用 InputStream.isAvailable 查找数据可用性？这个想法是愚蠢和/或低效的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:56:17.467

1) 是的。我认为您需要编写自己的非阻塞 readLine 方法。另请注意，当缓冲区中有几行或有不完整的行时，可能会发出非阻塞读取信号：

示例：（初读）

```
 USER foo
 PASS 
```

（二读）

```
 bar 
```

您将需要存储（参见 2）未使用的数据，直到有足够的信息准备好处理它。

```
 //channel was select for OP_READ
 read data from channel 
 prepend data from previous read
 split complete lines
 save incomplete line
 execute commands 
```

2）您需要保留每个客户端的状态。

```
 Map<SocketChannel,State> clients = new HashMap<SocketChannel,State>(); 
```

当一个通道被连接时，`put`一个新鲜的状态进入地图

```
 clients.put(channel,new State()); 
```

或者将当前状态[存储](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SelectionKey.html#attach%28java.lang.Object%29)为`SelectionKey`.

然后，在执行每个命令时，更新状态。你可以把它写成一个整体的方法，或者做一些更花哨的东西，比如 的多态实现`State`，每个状态都知道如何处理一些命令（例如`LoginState`，需要 USER 和 PASS，然后你将状态更改为新的`AuthorizedState`）。

3) 我不记得在每个通道中使用 NIO 和许多异步写入器，但文档说它是线程安全的（我不会详细说明，因为我没有证据）。关于 OP_WRITE，请注意它在写缓冲区**未满**时发出信号。换句话说，正如[这里](https://stackoverflow.com/questions/7053924/java-nio-server)所说：OP_WRITE 几乎总是准备就绪，即除非套接字发送缓冲区已满，因此您只会使您的`Selector.select()`方法无意识地旋转。

4) 是的。`Selector.select()`执行[阻塞选择操作](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/Selector.html#select%28%29)。

5) 我认为最困难的部分是从每个客户端线程架构切换到读取和写入与处理分离的不同设计。完成此操作后，使用通道比使用阻塞流以自己的方式工作更容易。

# ios - 无法使用 RestKit 处理成功的 204 响应并正确映射失败的响应

> ID：15348037
> 
> 赞同：5
> 
> 时间：2013-03-11T20:31:50.903
> 
> 标签：ios, restkit

我正在编写一个与服务交互以更新用户个人资料的 iOS 应用程序。为了更新用户名，iOS 应用 PUT 请求具有以下格式的正文：

```
 {"name" : {"first" : "FIRSTNAMEGOESHERE", "lastName":"LASTNAMEGOESHERE"}} 
```

在请求正文有效的情况下（即同时提供名字和姓氏），服务返回 204（无内容）状态代码和空响应正文。

在请求正文无效的情况下（例如缺少名字等），服务将返回状态码 400 和以下格式的响应正文：

```
{"code":"ERRORCODEHERE"} 
```

iOS应用程序正在使用RestKit，我一直无法弄清楚如何让它正确处理成功和失败的情况。如果我使用这个：

```
- (void)updateUserName
{
    RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:[[NSURL alloc] initWithString:@"http://someqaserver:8080"]];
    [objectManager setRequestSerializationMIMEType:RKMIMETypeJSON];

    RKObjectMapping *userMapping = [RKObjectMapping requestMapping];
    [userMapping addAttributeMappingsFromDictionary:@{@"firstName" : @"first", @"lastName" : @"last"}];

    RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:userMapping objectClass:[OurUser class]                                       rootKeyPath:@"name"];

    [objectManager addRequestDescriptor:requestDescriptor];

    [objectManager putObject:[OurUser getCurrentUser]
                   path:@"/mobile/profile/name"
                   parameters:nil
                   success:^(RKObjectRequestOperation *operation, RKMappingResult *result)
                   {
                     NSLog(@"Success!");
                   }
                   failure:^(RKObjectRequestOperation *operation, NSError *error)
                   {
                     NSLog(@"Fail!");
                   }];
} 
```

这显然不适用于错误情况，但在从服务器返回 204 的情况下，它确实成功执行了成功块。

如果我在调用 putObject 之前添加以下代码，则错误处理有效，但现在有效的 204 案例被视为失败：

```
 RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[ServiceError class]];
    [errorMapping addAttributeMappingsFromDictionary:@{@"code" : @"errorCode"}];
    RKResponseDescriptor *errorDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping pathPattern:nil keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError)];
    [objectManager addResponseDescriptor:errorDescriptor]; 
```

这似乎发生了，因为接受的 HTTP 状态代码现在设置为提供的响应描述符的状态代码，而 204 不是其中之一（或者可能是其他东西？）

我怎样才能得到它：1.）如果返回 204，它被视为成功 2.）如果返回 4XX，它被视为失败并且错误代码正确映射到我的 ServiceError 对象？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-11T00:15:57.123

该问题还通过添加响应描述符来处理 204 来解决：

```
RKResponseDescriptor *successResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:[RKObjectMapping mappingForClass:nil]
                                                                                               method:RKRequestMethodPUT
                                                                                          pathPattern:nil
                                                                                              keyPath:nil
                                                                                          statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[manager addResponseDescriptor:successResponseDescriptor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T07:18:03.200

代码 204 不是错误，任何 2xx 状态都被视为成功。204 表示“无内容”，这是一个完全有效的响应。如果您希望 restkit 将其视为错误，请确保您抛出 3xx、4xx 或 5xx 错误。在您的情况下，您使用的是 RKStatusCodeClassClientErrorm ，这表明您应该抛出 4xx 错误。

有关错误代码的完整列表，请参阅[wikipedia](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success)

# antlr - 如何将一个令牌的长度依赖于另一个令牌的值？

> ID：15348045
> 
> 赞同：4
> 
> 时间：2013-03-11T20:32:17.357
> 
> 标签：antlr, binary-data, antlr4

我想标记一些二进制数据，其中某些部分的长度取决于先前标记的值。你可以这样想：

```
<length><binary data> 
```

假设*长度*是两个字节的无符号整数，表示*二进制数据*的长度（以字节为单位）。

如何使用 ANTLR 4 实现这种关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:55:58.677

您可能需要扩展 ANTLR 的输入流。到目前为止，唯一的输入流[`ANTLRInputStream`](https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/ANTLRInputStream.java)和[`ANTLRFileStream`](https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/ANTLRFileStream.java)由 a 支持，`char[]`这可能不适合您匹配任何类型的二进制数据的要求。

如您所述，要使词法分析器上下文敏感，您可以：

*   匹配一个`UNSIGNED`数字标记，一旦匹配，就`bytesToConsume`用这个值初始化一个实例变量（）；
*   一旦`bytesToConsume`设置好，只要`bytesToConsume`大于 0 就消耗字节/字符^！
*   当然，一旦`bytesToConsume`被初始化，你就不想匹配一个`UNSIGNED`令牌^！

^！这些检查由[语义谓词](http://www.antlr.org/wiki/display/ANTLR4/Semantic+Predicates) `{boolean-expression}?`执行。

一个演示：

```
grammar T;

@lexer::members {

  private int bytesToConsume = -1;         

  boolean binary() {
    if(bytesToConsume < 0) {
      return false;
    }
    bytesToConsume--;
    return true;
  }
}

parse
 : block* EOF
 ;

block
 : UNSIGNED BINARY
 ;

UNSIGNED 
 : {!binary()}? 
   [0-9a-fA-F] [0-9a-fA-F] {bytesToConsume = Integer.parseInt(getText(), 16);}
 ;

BINARY
 : ({binary()}? . )+
 ; 
```

一个驱动类：

```
import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.*;

public class Main {

  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRInputStream("03aaa0Fbbbbbbbbbbbbbbb01c"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    ParseTree tree = parser.parse();
    System.out.println(tree.toStringTree(parser));
  }
} 
```

通过执行以下操作对其进行测试：

## *尼克斯

```
java -jar antlr-4.0-complete.jar T.g4
javac -cp .:antlr-4.0-complete.jar *.java
java -cp .:antlr-4.0-complete.jar 主要
```

## 视窗

```
java -jar antlr-4.0-complete.jar T.g4
javac -cp .;antlr-4.0-complete.jar *.java
java -cp .;antlr-4.0-complete.jar 主要
```

您会看到以下内容被打印到控制台（虽然我添加了缩进）：

```
(parse 
  (block 03 aaa) 
  (block 0F bbbbbbbbbbbbbbb) 
  (block 01 c) 
  <EOF>) 
```

## 编辑

通过使用 ANTLR4 的[词法模式](http://www.antlr.org/wiki/display/ANTLR4/Lexer+Rules#LexerRules-LexicalModes)，也许可以实现一些更简洁的东西。但是，我对 v4 很陌生，我不知道这是否可能，因为一旦消耗了一定数量的字节/字符而不是二进制模式中的明确结束，您想弹回默认词法范围.

# ruby-on-rails-3 - jquery-ui 进度条不显示

> ID：15348046
> 
> 赞同：3
> 
> 时间：2013-03-11T20:32:17.743
> 
> 标签：ruby-on-rails-3, jquery-ui

我正在尝试使用 jquery-ui 在 Rails 中的应用程序中添加一个简单的进度条。我正在关注这个例子：http: [//jqueryui.com/progressbar/](http://jqueryui.com/progressbar/)

我创建了 div

```
<div id="progressbar"></div> 
```

在我的 JS 中，我有

```
$(document).ready( function() {
  $("#progressbar").progressbar({
    value: 37
  });
}); 
```

但是 html 中的 div 没有任何反应——它保持为空且未设置样式（即没有对其应用额外的 CSS）。

我检查了我的应用程序中是否包含 jquery-ui - 特别是，我已经确定包含 jquery-ui css 文件。

但是，我愿意打赌这个问题与 jquery-ui 在我的应用程序中无法正常工作有关，因为我遇到了另一个问题，它和工具提示功能，我在这里询问过：[定位 jQuery 工具提示](https://stackoverflow.com/questions/15278630/positioning-jquery-tooltip)

这让我发疯了，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T12:49:32.663

我现在有同样的问题。

似乎示例中引用的库不起作用。
我从“Firefox - 开发者工具 - 浏览器控制台”得到的错误是：

> ReferenceError: $ 未定义

（我在 Firefox 32.0.3 和 IE 11 上测试过）

如果您只是将示例 html/jquery 源代码从“ [http://jqueryui.com/progressbar/](http://jqueryui.com/progressbar/) ”复制到本地文件（我们称之为：“testJqueryProgressBar.html”）并双击它，您将看不到进度条！

“testJqueryProgressBar.html”的来源：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Progressbar - Default functionality</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="//jqueryui.com/resources/demos/style.css">
    <script>
        $(function() 
        {
            $( "#progressbar" ).progressbar({ value: 37 });
        });
    </script>
</head>
<body>
    <div id="progressbar"></div>
</body>
</html> 
```

因此，我检查了示例标题中的链接，并且都引用了一些东西。所以链接是有效的！

我什至尝试从另一个提供商 fe 引用 jquery 库：[https](https://developers.google.com/speed/libraries/devguide?hl=de#jquery-ui) ://developers.google.com/speed/libraries/devguide?hl=de#jquery-ui 。同样的问题！

然后我去了[http://jqueryui.com/download/](http://jqueryui.com/download/) 选择的版本：1.11.1（稳定，用于 jQuery1.6+） 在底部选择了不同的 UI 主题

下载了 zip 并在我的本地示例 testJqueryProgressBar.html 中引用了这些解压缩的 jquery 源，它可以工作。

# android - 在android中保存网页的内容

> ID：15348052
> 
> 赞同：0
> 
> 时间：2013-03-11T20:32:33.533
> 
> 标签：android

这是在 webview 中保存网页内容的任何方式。我的意思是当我有网络连接时，我会下载所有内容，如果我没有网络连接，我仍然可以观看视频或查看所有内容。这个有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:46:36.467

没有很好的方法来询问 webview 的内容。有一些涉及 javascript 注入的解决方法，类似于：

[如何从 WebView 中检索 HTML 内容（作为字符串）](https://stackoverflow.com/questions/5264162/how-to-retrieve-html-content-from-webview-as-a-string)

如果您正在寻找某些东西并且不一定需要桌面浏览器中带有“查看页面源”的整个厨房水槽，这对您来说可能已经足够了。

理想情况下，如果可能的话，您会使用 HttpURLConnection 来检索内容。这是来自 android sdk 参考的片段：

```
URL url = new URL("http://www.android.com/");
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
InputStream in = new BufferedInputStream(urlConnection.getInputStream());
readStream(in); 
```

[http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

# c++ - 使用 Opengl 在窗口上显示菜单

> ID：15348055
> 
> 赞同：1
> 
> 时间：2013-03-11T20:32:45.517
> 
> 标签：c++, winapi, opengl

我在我的窗口中制作了一个编辑框，但是当我尝试用 OpenGl 在 dissapears 中绘制一些东西时。我应该改变什么？

这是代码：

```
#include <windows.h>
#include <gl/gl.h>
#include <math.h>
#define IDC_MAIN_EDIT 102 
HWND hEdit;

// Function Declarations
HMENU men;
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);
void EnableOpenGL(HWND hWnd, HDC * hDC, HGLRC * hRC);
void DisableOpenGL(HWND hWnd, HDC hDC, HGLRC hRC);

// WinMain

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
                   LPSTR lpCmdLine, int iCmdShow)
{
    WNDCLASS wc;
    HWND hWnd;
    HDC hDC;
    HGLRC hRC;
    MSG msg;
    BOOL quit = FALSE;
    float theta = 0.0f;

    // register window class
    wc.style = CS_OWNDC;
    wc.lpfnWndProc = WndProc;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hInstance = hInstance;
    wc.hIcon = LoadIcon( NULL, IDI_APPLICATION );
    wc.hCursor = LoadCursor( NULL, IDC_ARROW );
    wc.hbrBackground = (HBRUSH)GetStockObject( BLACK_BRUSH );
    wc.lpszMenuName = NULL;
    wc.lpszClassName = "GLSample";
    RegisterClass( &wc );

    // create main window
    hWnd = CreateWindow( 
        "GLSample", "OpenGL Sample", 
        WS_CAPTION | WS_POPUPWINDOW | WS_VISIBLE,
        0, 0, 800, 800,
        NULL, NULL, hInstance, NULL );

    // enable OpenGL for the window
    EnableOpenGL( hWnd, &hDC, &hRC );

    // program main loop
    while ( !quit )
    {

        // check for messages
        if ( PeekMessage( &msg, NULL, 0, 0, PM_REMOVE )  )
        {

            // handle or dispatch messages
            if ( msg.message == WM_QUIT ) 
            {
                quit = TRUE;
            } 
            else 
            {
                TranslateMessage( &msg );
                DispatchMessage( &msg );
            }

        } 
        else 
        {

            // OpenGL animation code goes here
           glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
           glClear(GL_COLOR_BUFFER_BIT);
           glPushMatrix();
           glRotatef( theta, 0.0f, 0.0f, 1.0f );
           glBegin( GL_TRIANGLES );
           glColor3f( 1.0f, 0.0f, 0.0f ); glVertex2f( 0.0f, 0.25f );
           glColor3f( 0.0f, 1.0f, 0.0f ); glVertex2f( 0.21f, -0.12f );
           glColor3f( 0.0f, 0.0f, 1.0f ); glVertex2f( -0.21f, -0.12f );
           glEnd();
            glPopMatrix();

            SwapBuffers( hDC );

            theta += 1.0f;

        }

    }

    // shutdown OpenGL
    DisableOpenGL( hWnd, hDC, hRC );

    // destroy the window explicitly
    DestroyWindow( hWnd );

    return msg.wParam;

}

// Window Procedure

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{

    switch (message)
    {

    case WM_CREATE:
        {
            hEdit=CreateWindowEx(WS_EX_CLIENTEDGE,
                "EDIT",
                "",
                WS_CHILD|WS_VISIBLE|
                ES_MULTILINE|ES_AUTOVSCROLL|ES_AUTOHSCROLL,
                50,
                20,
                60,
                30,
                hWnd,
                (HMENU)IDC_MAIN_EDIT,
                GetModuleHandle(NULL),
                NULL);
            HGDIOBJ hfDefault=GetStockObject(DEFAULT_GUI_FONT);
            SendMessage(hEdit,
                WM_SETFONT,
                (WPARAM)hfDefault,
                MAKELPARAM(FALSE,0));
            SendMessage(hEdit,
                WM_SETTEXT,
                NULL,
                (LPARAM)"Length");
            return 0;
        }
    case WM_CLOSE:
        PostQuitMessage( 0 );
        return 0;

    case WM_DESTROY:
        return 0;

    case WM_KEYDOWN:
        switch ( wParam )
        {

        case VK_ESCAPE:
            PostQuitMessage(0);
            return 0;

        }
        return 0;

    default:
        return DefWindowProc( hWnd, message, wParam, lParam );

    }

}

// Enable OpenGL

void EnableOpenGL(HWND hWnd, HDC * hDC, HGLRC * hRC)
{
    PIXELFORMATDESCRIPTOR pfd;
    int format;

    // get the device context (DC)
    *hDC = GetDC( hWnd );

    // set the pixel format for the DC
    ZeroMemory( &pfd, sizeof( pfd ) );
    pfd.nSize = sizeof( pfd );
    pfd.nVersion = 1;
    pfd.dwFlags = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
    pfd.iPixelType = PFD_TYPE_RGBA;
    pfd.cColorBits = 24;
    pfd.cDepthBits = 16;
    pfd.iLayerType = PFD_MAIN_PLANE;
    format = ChoosePixelFormat( *hDC, &pfd );
    SetPixelFormat( *hDC, format, &pfd );

    // create and enable the render context (RC)
    *hRC = wglCreateContext( *hDC );
    wglMakeCurrent( *hDC, *hRC );

}

// Disable OpenGL

void DisableOpenGL(HWND hWnd, HDC hDC, HGLRC hRC)
{
    wglMakeCurrent( NULL, NULL );
    wglDeleteContext( hRC );
    ReleaseDC( hWnd, hDC );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:58:34.973

答案很简单——我只是将函数 CreateWindow 的参数更改为

```
hWnd = CreateWindow( 
        "GLSample", "OpenGL Sample", 
         WS_SYSMENU|WS_VISIBLE|WS_MINIMIZEBOX|WS_OVERLAPPED|WS_BORDER|WS_CAPTION|
  WS_CLIPCHILDREN|WS_CLIPSIBLINGS,
        0, 0, 800, 800,
        NULL, NULL, hInstance, NULL ); 
```

这和瞧 - 一切正常^_^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:56:09.490

它可能会在默认[`WM_ERASEBKGND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648055%28v=vs.85%29.aspx)代码中覆盖您的绘画。解决它的一种方法是将您的 OpenGL 代码移动到[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213%28v=vs.85%29.aspx)处理程序，然后在每次您希望动画前进时使您的窗口无效。

# image - Hard code product images in Magento with dynamic references

> ID：15348060
> 
> 赞同：0
> 
> 时间：2013-03-11T20:32:48.917
> 
> 标签：image, magento, dynamic, reference, src

In Magento, I have a page where I'm hard coding the images of certain products. Rather than simply using the products' image URLs to do so, I'd like to use dynamic references to the products' associated images so that if I change the product's image, the reference on this page won't break. I need both thumbnail size images and large images. Does anyone know how to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:24:28.320

假设您已经可以访问产品对象`$_product`

```
$thumbImageUrl =  Mage::helper('catalog/image')->init($_product, 'small_image')->resize($width, $height);
$imageUrl =  Mage::helper('catalog/image')->init($_product, 'image')->resize($width, $height);
// if you don't want to resize at all
$imageUrl = $_product->getMediaConfig()->getMediaUrl($_product->getData('image')); 
```

# function - Lisp 中的多项式

> ID：15348061
> 
> 赞同：-2
> 
> 时间：2013-03-11T20:32:52.293
> 
> 标签：function, math, recursion, lisp, polynomial-math

伙计们，帮我解决这个**lisp**函数。有一个多项式系数列表。该函数需要计算多项式的值。

```
Pol (x list) 
```

例如`(Pol 2 '(3 5 2))`=> 17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:51:57.120

您需要使用[霍纳的方法](http://en.wikipedia.org/wiki/Horner%27s_method)。

# telerik - 如何在 Rad ListBox 的 Transferred 事件中获取 ItemIndex

> ID：15348069
> 
> 赞同：0
> 
> 时间：2013-03-11T20:33:08.773
> 
> 标签：telerik

我正在尝试在**Transferred**事件中获取选定的项目文本和**RadListBox的值。**

 **我尝试了以下代码：

```
 protected void listbox_Initial_Transferred(object sender, RadListBoxTransferredEventArgs e)
{

           string id =  e.Items[0].Value.ToString();
            string description = e.Items[0].Text.ToString();
 } 
```

这里我通过“0”作为索引。它工作正常。

现在我被困在这里以获取项目的选定索引。

期待您的评论和回复。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:51:10.100

请尝试使用以下代码片段。

```
 // for single item
 string id = RadListBox1.SelectedItem.Value.ToString();
 string description = RadListBox1.SelectedItem.Text.ToString();

 // for multiple item
 foreach (RadListBoxItem item in RadListBox1.SelectedItems)
 {
     string _id = item.Value.ToString();
     string _description = item.Text.ToString();
 } 
```

根据您的示例代码，也请尝试使用以下代码片段。

```
// for multiple item
 foreach (RadListBoxItem item in e.Items)
 {
     string _id = item.Value.ToString();
     string _description = item.Text.ToString();
 } 
```**

# php - 从 PHP 优化数据库查询

> ID：15348076
> 
> 赞同：0
> 
> 时间：2013-03-11T20:33:26.720
> 
> 标签：php, mysql, sql, pdo

我正在建立一个类似 Pinterest 风格的网站，处于非常早期的开发阶段。

我可以毫无问题地做到这一点，但我想知道这是否是最好的方法。

# 客观的：

从数据库中提取所有图像数据，然后，对于每个图像，从“收藏夹”表中提取数据，计算照片的收藏夹，然后，如果存在活动的用户会话，则判断用户是否标记为收藏夹。

# 问题

该网站默认显示 54 张照片，然后，对于这 54 张照片，程序必须查找每张照片的收藏夹。这代表了对服务器和数据库的许多请求，我认为它的形式是：

```
$images = 'SELECT * FROM IMAGES photo_id ORDER BY LIMIT 54';

foreach ( $images as $image ) {
   $lookFavorite = 'SELECT * FROM favorites WHERE photo_id ='. $ image ['photo_id'] ';
} 
```

# 数据库表结构

## 相片

```
photo_id    INT (auto increment)
user_nick   VARCHAR (25)
photo_path  VARCHAR (255)
photo_title VARCHAR (150)
photo_theme VARCHAR (60)
date        TIMESTAMP 
```

## 收藏夹

```
photo_id  INT
user_nick VARCHAR (25)
date      TIMESTAMP 
```

# 重要的

```
PHP version 5.3, using MySQL.
The program I'm building is object oriented [I'm using PDO']. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:40:49.557

您应该使用从图像到收藏夹的左连接，然后根据需要使用 GROUP BY 来获取计数，以防有图像有 0 个收藏夹。

```
SELECT * 
FROM `images` 
LEFT JOIN `favorites` ON `images`.`photo_id`=`favotites`.`photo_id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:36:13.917

放下循环并做

```
$lookFavorite = 'SELECT * FROM favorites'; 
```

创建一个包含所有内容的数组，然后根据您从该数组中获得的内容循环访问您需要的内容

```
$images = 'SELECT * FROM IMAGES photo_id ORDER BY LIMIT 54'; 
```

这样，只运行了两个查询而不是 55

或者

```
$images = 'SELECT * FROM photos INNER JOIN favorites ON (favorites.photo_id = photos.photo_id) ORDER BY favorites.photo_id LIMIT 54'; 
```

在单个查询中完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:44:48.327

我认为您在这里寻找的是 LEFT JOIN。

```
SELECT * FROM images
LEFT JOIN favorites
ON images.photo_id = favorites.photo_id
WHERE images.photo_id IN (..array populated from first query..) 
```

如果您需要将结果限制为前 54 个图像，那么您只需使用适当的谓词填充 JOIN 的 WHERE 子句。

作为旁注，我选择 LEFT JOIN 是因为我想在该列表中包含所有图像，即使它们没有收藏夹，但我不想*包含*与我想要的图像不相关的收藏夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:52:09.960

1 如果您不需要所有字段，请不要使用 *。

在你的服务器上测试，但我认为这个解决方案工作得更快

```
$images = 'SELECT photo_id, photo_path FROM photos LIMIT 54';
$ids = array();
foreach ( $images as $image ) {
  $ids[]= $image ['photo_id'];
}

$lookFavorite = 'SELECT * FROM favorites WHERE photo_id in ('. implode(',',$ids). ')'; 
```

# python - Python 属性和字符串格式

> ID：15348078
> 
> 赞同：5
> 
> 时间：2013-03-11T20:33:30.093
> 
> 标签：python, string, properties, formatting

我的印象是使用 .format() 的 python 字符串格式化会正确使用属性，而不是我得到字符串格式化的对象的默认行为：

```
>>> def get(): return "Blah"
>>> a = property(get)
>>> "{a}!".format(a=a)
'<property object at 0x221df18>!' 
```

这是预期的行为吗？如果是这样，什么是实现属性特殊行为的好方法（例如，上面的测试将返回“Blah！”）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T20:35:36.673

`property`对象是描述符。因此，除非通过类访问，否则它们没有任何特殊能力。

就像是：

```
class Foo(object):
     @property
     def blah(self):
         return "Cheddar Cheese!"

a = Foo()
print('{a.blah}'.format(a=a)) 
```

应该管用。（你会看到`Cheddar Cheese!`打印出来的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:35:16.830

是的，这与您刚刚执行的操作基本相同：

```
>>> def get(): return "Blah"
>>> a = property(get)
>>> print a 
```

如果您`"Blah"`只想调用该函数：

```
>>> def get(): return "Blah"
>>> a = property(get)
>>> "{a}!".format(a=a.fget()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:00:26.800

Python 属性可以与 .format() 很好地互操作。考虑以下示例：

```
>>> class Example(object):
...     def __init__(self):
...             self._x = 'Blah'
...     def getx(self): return self._x
...     def setx(self, value): self._x = value
...     def delx(self): del self._x
...     x = property(getx,setx,delx, "I'm the 'x' property.")
...
>>>
>>> ex = Example()
>>> ex.x
'Blah'
>>> print(ex.x)
'Blah'
>>> "{x.x}!".format(x=ex)
'Blah!' 
```

我相信您的问题源于您的财产不是班级的一部分。您实际上是如何使用它们不使用 .format() 的属性的？

# sql-server - Visio - 从 Azure SQL Server 数据库对数据库模型进行逆向工程——崩溃

> ID：15348094
> 
> 赞同：0
> 
> 时间：2013-03-11T20:34:05.617
> 
> 标签：sql-server, azure, reverse-engineering, visio

在用于数据库驱动程序的 Microsoft SQL Server 设置中，我勾选了 SQL Server、SQL Server Native Client 10.0 和 SQL Server Native Client 11.0。

我创建了 6 个数据源，每个“数据源类型”（用户数据源或系统数据源，因为文件数据源不显示）乘以每个驱动程序（SQL Server、Native Client 10.0 和 Native Client）一个11.0)。

创建数据源时，我请求 SQL Server 身份验证并提供用户名和密码。

在保存之前，我测试了连接，它成功了。

当我尝试连接到数据库时，它会请求我的用户名/密码。当我提供凭据时，Visio 崩溃。如果我的凭据拼写错误，Visio 会告诉我我的凭据无效。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:29:49.643

以下对我有用：我将 ODBC 通用驱动程序与 Native Client 11.0 一起使用。

也可以尝试@mellamokb 上面评论中的建议。

# zend-framework2 - 如何在 Zend Framework 2 中使用 distinct？

> ID：15348096
> 
> 赞同：22
> 
> 时间：2013-03-11T20:34:23.323
> 
> 标签：zend-framework2, zend-db, zend-db-select

如何将`distinct`子句与 一起使用`Zend\Db\Sql\`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-24T15:05:17.450

[我在http://blog.abmeier.de/php/zf2-select-distinct](http://blog.abmeier.de/php/zf2-select-distinct)上发现了这个非常有用的解决方案

```
$sql = new Sql($adapter);
$select = $sql->select();
$select->quantifier('DISTINCT'); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-12T16:16:10.337

在列选择中使用表达式。

```
$select = new Select('tablename');
$select->columns(array(new Expression('DISTINCT(id) as id'))); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-09-29T20:33:59.157

虽然 Mihai Dobre 的回答是正确的，但我认为您应该使用框架提供的常量而不是使用字符串文字。这将使您的代码更具前瞻性。

```
$sql->select()->quantifier(\Zend\Db\Sql\Select::QUANTIFIER_DISTINCT) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T11:34:04.983

这对我来说效果最好。

```
$select = $this->select()
          ->distinct()
          ->where('user_id = ?', $user_id); 
```

[http://webphplearn.com/blog/blogdetail/Distinct_in_Zendframework2](http://webphplearn.com/blog/blogdetail/Distinct_in_Zendframework2)

# c# - 创建新用户的 Ajax 表单

> ID：15348098
> 
> 赞同：2
> 
> 时间：2013-03-11T20:34:28.467
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

```
@using (Ajax.BeginForm("Register","Account",
new AjaxOptions
{
    HttpMethod="POST",
    UpdateTargetId="Done",
    InsertionMode=InsertionMode.Replace,
    OnSuccess="SucceedCreatedNewAcc"
}
)) 
{
@Html.AntiForgeryToken()
@Html.ValidationSummary()
//Fill in the form
 <div id="Done"></div>
} 
```

我的`register`方法

```
 [HttpPost]
    [Authorize]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password);

                return PartialView(model);
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }            
        return PartialView();
    } 
```

我的 JS 片段`SucceedCreatedNewAcc`

```
function SucceedCreatedNewAcc()
{
    $( "#Done" ).html( "A new account has been created" );
} 
```

我有2个小问题

1.  我不知道我在`SucceedCreatedNewAcc`重置我曾经在上面填写的所有表单字段中插入了什么。我想清空所有这些。

2.  如何检索成功创建的帐户的用户名，以便我可以将其插入`SucceedCreatedNewAcc`以使我的`html`文本更有意义，即 `$( "#Done" ).html( "A new account @username has been created" );`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:13:02.057

1.  使用类似`document.getElementById('registerForm').reset()`或`$(’#registerForm’)[0].reset();`或 `$(':input',’#registerForm’).not(':button,:submit,:reset,:hidden') .val('').removeAttr('checked').removeAttr('selected')`

2.  您`AjaxOptions`使用`UpdateTargetId="Done"`和`InsertionMode=InsertionMode.Replace`。这意味着带有 id 的元素的 html`Done`将被替换为返回控制器`Register`操作的html。`Account`因此，您需要的只是从控制器操作返回字符串，如*“已创建新帐户@username”*`$( "#Done" ).html( "A new account has been created" );`并从`SucceedCreatedNewAcc`函数中删除。

# java - 构造函数未定义

> ID：15348099
> 
> 赞同：1
> 
> 时间：2013-03-11T20:34:32.053
> 
> 标签：java

我的代码有问题，因为它一直说构造函数未定义。我已经在某处读到我需要声明没有参数的构造函数。我只是不知道该怎么做。

如果有人可以提供帮助，我是 Java 和编程的新手。我的代码如下：

```
import java.util.*;//import library

class Input
{

    public Input (int size,int startV,int endingV)
      {

         //declarations of variables
        double difference;
        double[] array= new double[size];

        array[0]=startV;

     //calculating the difference to add on each number in the array
     difference=(endingV-startV)/size;

    for (int counter=1;counter<size;counter++) //for loop to fill the array
              {
        array[counter]=array[counter-1] + difference;           
          }

      }

    public Input enter(int size,int startV,int endingV)
      {

        //declarations of variables
        double difference;
        double[] array= new double[size];

        array[0]=startV;

             //calculating the difference to add on each number in the array
        difference=(endingV-startV)/size; 

            for (int counter=1;counter<size;counter++) //for loop to fill the array
        {
            array[counter]=array[counter-1] + difference;           
        }

            return this;
    }
}

class Show
{
    public Show (int size,double[] array)
    {

        for (int i=0;i<size;i++) //for loop to print the array
            System.out.println("This is the array " + i+ ": " + array[i]);

    }

    public Show print(int size,double[] array)
    {

        for (int i=0;i<size;i++) //for loop to print the array
        System.out.println("This is the array " + i+ ": " + array[i]);

        return this;
    }
}

public class Assignment2 
{

    public static void  main(String[] args)
    {
        //declaring variables
        int startV,endingV;
        int size=0;

        System.out.print("Give the size of the array:");//Print message on screen
        size = new Scanner(System.in).nextInt();//asking for the size of array

            double[] array= new double[size]; //creation of array

    System.out.print("Give the starting value of the array:");
    startV = new Scanner(System.in).nextInt();//asking for the starting value of array

    System.out.print("Give the ending value of the array:");
    endingV = new Scanner(System.in).nextInt();//asking for the last value of array

    //calling the functions from the other classes 

        Input enter= new Input(size,startV,endingV);
        Show print= new Show(size,array);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:37:45.410

你很接近：

你有一个方法：

```
public Method enter(int size,int startV,int endingV) { 
```

要使其成为构造函数，它的签名必须是

```
public Method (int size,int startV,int endingV) { 
```

然后您必须删除该`return this;`语句。

请记住，构造函数没有返回类型，并且它们的名称与类的名称相同。有了这些信息，您还可以修复`Method1`构造函数。

* * *

另外，请尊重 Java 命名约定，变量以小写字母开头，以提高代码的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:38:51.270

您的构造函数必须与您的类同名并且没有返回类型。因此，对于您的班级`Method`，您的构造函数将是：

```
public Method(int size, int startV, int endingV)
{
    // code...
} 
```

另请注意，存在构造函数来初始化您的对象实例，如果您想创建一个执行特定计算的方法，那么是的，您必须这样做：

```
public int enter(int size, int startV, int endingV)
{
     int result = 0;
     // code to calculate, for example result = size + startV + endingV ...
     return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:40:21.330

对于类方法

默认构造函数将是

```
public Method(){} 
```

对于类 Method1

默认构造函数将是

```
public Method1(){} 
```

在你的类中没有构造函数

构造函数名称必须与类名称相同。

```
enter(int size,int startV,int endingV) 
```

和

```
print(int size,double[] array) 
```

可以是您的类中的两种方法。

您的两个构造函数也可以是-

```
public Method(int size,int startV,int endingV){ /..../} 
```

和

```
public Method1(int size,double[] array){ /..../} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:37:05.063

你需要创建一个

```
public Method(size,startV,endingV) 
```

不是

```
public Method enter = (size, startV, endingV) 
```

第一个是构造函数，第二个是方法

# javascript - 将 javascript 与模型表单一起使用

> ID：15348102
> 
> 赞同：1
> 
> 时间：2013-03-11T20:34:57.347
> 
> 标签：javascript, playframework-2.0

我从表单中获取值并使用这些值在我的游戏项目中创建 Journey 对象，但我需要扩展它以便我可以在后台添加其他值。下面是我当前的表单，它从用户输入中获取所有值。

```
@form(routes.Application.createJourney()) {

    <fieldset>

    @inputText(journeyForm("start_loc"), '_label -> "Starting Location", 'placeholder -> "E.g. 1 Main Street")
    @inputText(journeyForm("end_loc"), '_label -> "End Location", 'placeholder -> "E.g. 1 High Street")
    @select(
        journeyForm("participant_type"), 
        options = options("Driver"->"Driver", "Passenger"->"Passenger"),
        '_label -> "Travel as",
        '_error -> journeyForm("participant_type").error.map(_.withMessage("Select participant type"))
        )
    @inputDate(journeyForm("date"), '_label -> "Date")
    @helper.input(journeyForm("Time")) { (id,name,value,args) => <input type="time" name="@name" id="@id" @toHtmlArgs(args)> } 

    </fieldset>
    <div class="actions">
        <input type="submit" value="Create" class="btn primary"> 
    </div> 
```

我不太确定如何将 javascript 与这些 scala 模板生成器一起使用，并且我有一个我想使用的 javascript 函数。我表单中的两个输入用于位置，我希望能够使用 javascript 检索这些位置，以使用 Google Maps API 获取它们的 lat/lng 值。以下是一个位置的 javascript：

```
 <script type="text/javascript">
  function codeAddress() {
    var geocoder;
    geocoder = new google.maps.Geocoder();
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        alert(results[0].geometry.location);
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
  </script> 
```

所以有两件事我真的需要做。从表单中检索 inputText 以在 javascript 函数中使用。在我的 javascript 函数中使用变量在后台填充表单参数之一。通常我只是一个 document.getElementByID 但我认为这不适用于表单助手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:28:47.640

您可以使用表单助手设置元素的 id。一旦它在视图中呈现，用 javascript 检索它应该不是问题。

# android - 检查自定义帐户身份验证器中的权限

> ID：15348105
> 
> 赞同：3
> 
> 时间：2013-03-11T20:35:06.887
> 
> 标签：android, android-account, android-authenticator

我有一个自定义身份验证器，我想将用户/密码公开给其他应用程序。为了防止任何随机应用程序获取凭据，我想在我的自定义身份验证器的`getAuthToken()`方法中执行权限检查之类的操作。什么是正确的方法？

我试过这个，

```
 int p = context.checkCallingPermission("com.whatever.AUTH");
    if (p != PackageManager.PERMISSION_GRANTED) { 
```

在托管我的身份验证器的应用程序中定义了“com.whatever.AUTH”，

```
<permission android:name="com.vmware.horizon.AUTH" /> 
```

`uses-permission`但是，在我的清单中没有的测试应用程序中，当我请求帐户时，

```
 AccountManagerFuture<Bundle> future = am.getAuthToken(new Account(
            "com.whatever", "com.whatever"),
            "com.whatever", new Bundle(), this,
            new AccountManagerCallback<Bundle>() {

                @Override
                public void run(AccountManagerFuture<Bundle> future) {
                                        String token  = result.getString(AccountManager.KEY_AUTHTOKEN);

                }
            }, handler); 
```

我成功获得了身份验证令牌。调试显示对我的身份验证器`getAuthToken()`方法的调用发生了，但检查权限调用返回“已授予”。

编辑：如果我从我用来调用`checkCallingPermission()`它的上下文中获取包名称，则它是托管自定义身份验证器的应用程序的包名称。如果我得到调用 PID，UID 它们分别是 0 和 1000。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:53:19.760

在查看 Android 源代码时，我注意到帐户管理器服务将 Bundle 上的调用者的 pid 和 uid 设置为`AccountManager.KEY_CALLER_PID`和`AccountManager.KEY_CALLER_UID`。

您可以使用`getInt()`捆绑包在 getAppToken 方法中找出真正的调用者的 pid 和 uid。

另一个很难找到的有用信息。由于帐户管理器服务缓存了结果，因此该`getAppToken`方法通常只调用一次。如果您希望能够更积极地管理令牌，您可以通过将元数据添加到清单条目来禁用缓存：

```
<service android:name=".authenticator.AccountAuthenticatorService">
  <meta-data android:name="android.accounts.AccountAuthenticator" android:resource="@xml/authenticator"/>
  <meta-data android:name="android.accounts.AccountAuthenticator.customTokens" android:value="1"/>
</service> 
```

下面是验证器 xml 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
  android:accountType="com.your.account.type"
  android:customTokens="true"
  android:icon="@drawable/logo"
  android:smallIcon="@drawable/logo"
  android:label="@string/app_name_long"/> 
```

# javascript - node.js - express - URL 和错误处理

> ID：15348106
> 
> 赞同：0
> 
> 时间：2013-03-11T20:35:08.013
> 
> 标签：javascript, node.js, express

我是 node.js 的新手，所以请放纵一下。

我只是在玩 node.js 和 express-module。我知道如何处理浏览器请求，现在我有一个简单的问题：

这是一个好主意/做法还是有更好的解决方案来处理它？

```
var http = require('http');
var express = require('express');
var fs = require('fs');
var app = express();

http.createServer(app).listen(80);

app.get('/*',function(req,res,next){
    fs.exists(__dirname + req.url, function (exists) {
        if(exists)
        {
            console.log('Sending ' + __dirname + req.url + "...");
            res.sendfile(__dirname + req.url);      
        }
        else
        {
            console.log(__dirname + req.url + " not found!");
            res.send('Sorry, page not found.',404);     
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:42:18.430

Express 基于[Connect](http://www.senchalabs.org/connect/)，因此支持其中间件。并且有一个适合您情况的完美中间件：[静态文件服务](http://www.senchalabs.org/connect/static.html)。

```
app.use(express.static(__dirname + '/public')); 
```

这会将目录中的所有文件`/public`作为根目录中可用的静态文件提供服务。对于未单独处理且不存在文件的路由，将返回 404 错误。

顺便提一句。你想把`listen`-call 放在最后。

# networkx - Django/NetworkX 消除重复节点

> ID：15348108
> 
> 赞同：1
> 
> 时间：2013-03-11T20:35:10.963
> 
> 标签：networkx

我想使用 d3js 来可视化我的 Django 网站用户之间的联系。我正在重用[强制有向图](http://bl.ocks.org/mbostock/4062045)示例的代码，它要求每个节点都有两个属性（ID 和名称）。我在 user_profiles_table 中为每个用户创建了一个节点，并根据 connections_table 中的每一行在已创建的节点之间添加了一条边。这没用; 当我开始使用 connection_table 时，networkx 会创建新节点。

```
nodeindex=0
for user_profile in UserProfile.objects.all():
    sourcetostring=user_profile.full_name3()
    G.add_node(nodeindex, name=sourcetostring)
    nodeindex = nodeindex +1

for user_connection in Connection.objects.all():
    target_tostring=user_connection.target()
    source_tostring=user_connection.source()
    G.add_edge(sourcetostring, target_tostring, value=1)

data = json_graph.node_link_data(G) 
```

结果：

```
 {'directed': False,
 'graph': [],
 'links': [{'source': 6, 'target': 7, 'value': 1},
  {'source': 7, 'target': 8, 'value': 1},
  {'source': 7, 'target': 9, 'value': 1},
  {'source': 7, 'target': 10, 'value': 1},
  {'source': 7, 'target': 7, 'value': 1}],
 'multigraph': False,
 'nodes': [{'id': 0, 'name': u'raymondkalonji'},
  {'id': 1, 'name': u'raykaeng'},
  {'id': 2, 'name': u'raymondkalonji2'},
  {'id': 3, 'name': u'tester1cet'},
  {'id': 4, 'name': u'tester2cet'},
  {'id': 5, 'name': u'tester3cet'},
  {'id': u'tester2cet'},
  {'id': u'tester3cet'},
  {'id': u'tester1cet'},
  {'id': u'raykaeng'},
  {'id': u'raymondkalonji2'}]} 
```

如何消除重复节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-07T21:22:17.123

您可能会得到重复的节点，因为您的`user_connection.target()`and`user_connection.source()`函数返回的是节点名称，而不是它的 ID。当您调用 时`add_edge`，如果图中不存在端点，则会创建它们，这解释了为什么会出现重复。

以下代码应该可以工作。

```
for user_profile in UserProfile.objects.all():
    source = user_profile.full_name3()
    G.add_node(source, name=source)

for user_connection in Connection.objects.all():
    target = user_connection.target()
    source = user_connection.source()
    G.add_edge(source, target, value=1)

data = json_graph.node_link_data(G) 
```

另请注意，`data`如果您想要格式正确的 json 字符串，则应将对象转储到 json。您可以按如下方式进行。

```
import json
json.dumps(data)                  # get the string representation
json.dump(data, 'somefile.json')  # write to file 
```

# php - Codeigniter 配置文件，从模型中加载一个 get 函数

> ID：15348120
> 
> 赞同：2
> 
> 时间：2013-03-11T20:35:33.260
> 
> 标签：php, codeigniter

我有一个用于 twitter 的自定义配置文件设置，其中有一些 vars，但数据保存在数据库中，因此我需要调用类似：

```
$this->wc_settings->get()->row_array('consumer_key') 
```

这是配置文件

```
$config['tweets'] = array(
'_tokens' => array(
    'consumer_key' => $this->wc_settings->get()->row_array('consumer_key'),
    //'consumer_secret' => '',
    //'access_key' => '',
    //'access_secret' => '',
), 
```

这不起作用，但我需要它才能使配置文件工作，但需要从数据库中获取数据，如上所示。非常感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:46:03.950

您可以使用以下方法在控制器或模型中动态设置配置：

```
$this->config->load('tweets');
$dynamic_config = $this->wc_settings->get()->row_array('consumer_key');
$this->config->set_item('_tokens['consumer_key']', $dynamic_config); 
```

# facebook - 如何通过 Facebook API 发布包含多张照片的状态？

> ID：15348124
> 
> 赞同：3
> 
> 时间：2013-03-11T20:35:44.143
> 
> 标签：facebook, facebook-opengraph

我对 Facebook Graph API 有疑问。有没有办法使用 Graph API（Javascript SDK）“在状态帖子中附加多张照片”？

使用 iOS Facebook 应用程序可以发布包含多张照片的状态。

但是，在浏览了互联网上的文档后，我无法找到它是如何工作的。有人知道吗？这是我想使用 Facebook API 生成[的状态屏幕截图。](http://i.stack.imgur.com/L4ncN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-02T13:15:08.857

这可能是一个解决方案：

1.  创建仅包含消息的帖子，获取其 ID
2.  上传你所有的照片`{ "published" : "false" }`，获取他们的ID
3.  更新每张照片`{ "target_post" : "<yourPostID>", "published" : "true" }`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T20:41:38.060

你看到这个文档了吗？[https://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/) 它可能会帮助你

# java - Java深度优先递归函数

> ID：15348131
> 
> 赞同：0
> 
> 时间：2013-03-11T20:36:06.967
> 
> 标签：java, recursion, graph-theory

我在 Java（图论）中编写了一个递归函数来获取 4x4 表中的所有路径，从随机起点开始。可能的方向是水平、垂直和对角线，但我要求不能两次访问同一位置。

到目前为止，该脚本运行良好，我得到了很多组合。问题是，在函数的 for 循环中，当有不止一种可能的方法时，我会在第二个和后续循环中得到错误的结果，因为 boolean[] tempvisited 没有恢复到他的旧值。

我希望有人能理解我的英语和我的问题。到目前为止，这是我的代码：

```
// here I define a constant input of values:
String letters = "1548987425461854"

// This matrix shows all possible directions from every startpoint in the matrix:
// from the second value, you may get to the following locations: 1,3,5,6 and 7
    private int[][] matrix = {
        {1,4,5},
        {0,2,4,5,6},
        {1,3,5,6,7},
        {2,6,7},
        {0,1,5,8,9},
        {0,1,2,4,6,8,9,10},
        {1,2,3,5,7,9,10,11},
        {2,3,6,10,11},
        {4,5,9,12,13},
        {4,5,6,8,10,12,13,14},
        {5,6,7,9,11,13,14,15},
        {6,7,10,14,15},
        {8,9,13},
        {8,9,10,12,14},
        {9,10,11,13,15},
        {10,11,14}
};

// Here begins the recursive function 
public List<Combination> depthFirst(int vertex, boolean[] visited, Combination zeichen, List<Combination> combis){
  // A temporary list of booleans to mark every value position visited or not
  boolean[] tempvisited = new boolean[16];

  // combis is the whole list of ways, zeichen is just the actual combination
  zeichen.name = zeichen.name + this.letters.charAt(vertex);
  combis.add(zeichen.name);

    //marks actual value as visited
    visited[vertex] = true;
    for(int i = 0; i < 16; i++){
        tempvisited[i] = visited[i];
    }//end for

    // going to next possible locations
    for (int i = 0; i < this.matrix[vertex].length; i++) {
        if (!visited[this.matrix[vertex][i]]) {         
            combis = depthFirst(this.matrix[vertex][i], tempvisited, zeichen, combis);      
        }//end if
    }//end for
    return combis;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:46:04.527

你有正确的想法`tempvisited`，制作副本。但是你这样做是在错误的地方。

你正在设置`visited[vertex] = true`，这意味着`visited`你传入的值正在改变。你想要的是`visited`永不改变。制作一个副本，然后对该副本进行更改。

另外，我注意到您`zeichen`每次都使用相同的。因此，如果您的路径长 3 步，则您的`combis`列表将包含 3 个相同的`zeichen`. 这似乎不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:47:25.110

您在第一个 for 循环之前将visited[vertex] 设置为true；您可以在返回之前将其重置为 false。如果每个调用（直接）撤消它所做的更改，那么每个调用都将返回到调用时的状态。不需要临时访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:47:53.147

查看深度优先搜索 (DFS) 的其他递归解决方案（伪代码）。

```
void search(Node root) {
 if (root == null) return;

 visit(root);
 root.visited = true;
 foreach (Node n in root.adjacent) {
  if (n.visited == false)
   search(n);
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:48:08.253

实际上，您不需要访问过的数组的副本。在 depthFirst 的循环调用之前将节点标记为已访问，然后在调用之后立即“取消标记”它。就像是：

```
for (int i = 0; i < this.matrix[vertex].length; i++) {
    if (!visited[this.matrix[vertex][i]]) {     
        visited[this.matrix[vertex][i]] = true;  
        combis = depthFirst(this.matrix[vertex][i], tempvisited, zeichen, combis);      
        visited[this.matrix[vertex][i]] = false;
    }//end if
}//end for 
```

# highcharts - Highcharts 仪表填充到容器的 100%

> ID：15348137
> 
> 赞同：2
> 
> 时间：2013-03-11T20:36:17.403
> 
> 标签：highcharts, gauge

*此功能可通过 plotOptions大小*参数用于饼图，但是在检查 Highcharts API 后，*大小*不适用于 Gauge。

*饼图的 *大小API 条目*![饼图的大小 API 条目](../Images/e7ab84668ae1f40729b165ddb7408172.png)*

 *考虑到这两个图表的相似性（圆形），我希望会有一个类似的选项，但仪表总是填充我无法控制的容器 div 的一些子集。有没有其他人遇到过这个问题或找到了解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T21:39:51.730

通过将间距设置为零，您可以填充整个空间：

[http://jsfiddle.net/mkremer90/3sngK/1/](http://jsfiddle.net/mkremer90/3sngK/1/)

摆弄`spacing`参数以更改图表的填充量。至于基于百分比的类似`size`选项，我也找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T02:51:03.460

我知道这很旧，但是如果像我一样，您将borderWidth 设置为大于0 的值，您会发现标签的位置（例如x="5.5" y="5.5"）远离角落和宽度和身高缩小了。在这种情况下，设置间距和边距选项将无济于事。

那么简单的解决方案是避免将borderWidth设置为任何东西；只需将其保留为默认值或将其设置为零。相反，在您调用 highcharts 的容器元素上设置边框。

或者，您可以设置负边距并增加容器元素的大小，以补偿图表上的位置偏移和大小缩小。可能需要使用 style="overflow: hidden;" 将容器包装在 div 中。*

# eclipse - 从项目目录设置 Eclipse 构建路径库

> ID：15348138
> 
> 赞同：1
> 
> 时间：2013-03-11T20:36:17.390
> 
> 标签：eclipse, svn, buildpath

我将 eclipse 与 svn 一起使用，当我将一些 .jar 文件添加到我的 Build Path 中时，eclipse 添加了带有来自根目录的完整路径的 jar。

我确定该文件将始终位于与我的项目相同的目录中名为 lib 的文件夹中：

例如：~/lib ~/proj

我可以添加以我的项目目录为参考的文件吗？../lib 之类的东西？

因为，现在，当有人进行更新时，需要更改构建路径......

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:50:47.487

在下面

```
Window > Preferences > java > Build Path > User Libraries 
```

你可以定义用户库，你可以添加到你的类路径中。只需说`new`输入名称（例如`MY_EXTERNAL_LIB_FOO`）并点击`ok`。然后选择它（单击）并点击`add JAR...`，然后您可以浏览您的罐子并添加您想要的罐子（可以多选）

输入`.classpath`看起来像这样

```
<classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/MY_EXTERNAL_LIB_FOO"/> 
```

这样您就可以为项目抽象出库的位置，它们只需要知道名称，Eclipse 需要知道名称的库所在的位置。

如果您也在项目中对库进行版本控制，那么在编辑构建路径时`add JARs...`会`add External JARs...`提示您在实际工作区中的所有项目列表，请选择您在项目中拥有的项目。中的条目`.classpath`将与您的项目相关。

因此，如果您有以下项目布局

```
+ MyProject
    + src
    + lib
       some_3rd_party_lib.jar 
```

然后进入`.classpath`将看起来像

```
<classpathentry kind="lib" path="lib/some_3rd_party_lib.jar"/> 
```

# python - 带有值列表的 Django 变量

> ID：15348149
> 
> 赞同：0
> 
> 时间：2013-03-11T20:37:14.063
> 
> 标签：python, database, django, django-models, many-to-many

我想知道是否有更好的方法来实现这一点：我有一个包含多个字段的模型。每个字段都需要有多个具有相应值的日期范围。例如，我可能有一个带有布尔变量“Hungry”的类“Person”，从上午 9 点到下午 12 点为真，从下午 12 点到下午 2 点为假，然后在下午 2 点到 5 点再次为真。我的日期范围未涵盖的任何时间都只是默认值。

实现这一点的一种方法是将 Hungry 变成一个具有值、开始时间和结束时间的单独类。那么 Person 将与 Hungry 建立多对多关系。有没有更好的方法来实现这一点，它不会为每个变量创建一个表，但仍然允许轻松查找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:37:16.143

我建议使用外键而不是多对多关系。

```
Class Person(models.Model):
    #...

Class Hungry(models.Model):
    person = models.ForeignKeyField(Person)
    start = models. DateTimeField()
    end = models. DateTimeField()
    hungry = models. BooleanField() 
```

我想你可以用 a替换`person`字段，以便将其压缩到一个表中，但这是糟糕的数据库设计。它实际上应该是两个单独的表。`Hungry``CharField`

# java - 如何使用 ActionListener 在同一个 Applet 中添加新面板

> ID：15348151
> 
> 赞同：0
> 
> 时间：2013-03-11T20:37:23.837
> 
> 标签：java, swing, japplet

我有一个有面板的小程序。在面板中添加了一个按钮，单击该按钮将删除当前面板，并将一个新面板添加到当前小程序中。

但我没有得到想要的输出！！！

**我想用来自 ActionListener 的新面板替换当前添加到 Applet 的显示面板。**

请指出错误！

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JApplet;
import javax.swing.JPanel;

public class Init extends JApplet {

    public Display ref;
    public NewDisplay ref2;

    public class Display extends JPanel  implements ActionListener {

        public Display() {
            initComponents();
        }

        private void initComponents() {
            jButton1 = new javax.swing.JButton();
            jButton1.setText("New Game");
            add(jButton1);
            jButton1.addActionListener(this);

        }
        public javax.swing.JButton jButton1;

        @Override
        public void actionPerformed(ActionEvent e) {
            String x = e.getActionCommand();
            if (x.equals("New Game")) {
                System.out.println("clicked");
                //ref.setVisible(false);
                this.removeAll();
                //add(ref2);
                add(ref2);
                invalidate();
                revalidate();
                repaint();
            }
        }
    }

    public class NewDisplay extends JPanel {

        public NewDisplay() {
            setSize(800, 600);
        }

        @Override
        public void paintComponent(Graphics g) {
            g.setColor(Color.RED);
            g.fillRect(0, 0, 800, 600);
        }
    }

    @Override
    public void init() {
        ref = new Display();
        ref2 = new NewDisplay();
        add(ref);
        setSize(800,600);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:57:49.287

您不应该使用 setSize() 方法来设置组件的大小。

布局管理器使用组件的首选大小。您应该覆盖面板的 getPreferredSzie() 方法以返回所需的大小。

```
public class NewDisplay extends JPanel {

    public NewDisplay() {
    //   setSize(800, 600);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return new Dimension(800, 600);
    }

    @Override
    public void paintComponent(Graphics g) {
        g.setColor(Color.RED);
        g.fillRect(0, 0, 800, 600);
    }
} 
```

或者更好的解决方案是使用卡片布局，然后将面板摇摆进出。请参阅[如何使用卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。

# c# - 从另一个表格填写一个表格

> ID：15348166
> 
> 赞同：1
> 
> 时间：2013-03-11T20:38:34.860
> 
> 标签：c#, winforms

我的项目中有两种形式，一种是带有按钮的，另一种是带有两个文本框的。当我单击第一个表单按钮时，我想在另一个中填充文本框。

代码：

```
secondForm secondForm = new secondForm();
secondForm.MdiParent = this.MdiParent;
secondForm.fillForm("String");

if (formShown != true)
{
    secondForm.Show();
    formShown = true;
}
else
{
    Application.OpenForms[secondForm.Name].Focus();
} 
```

和

```
public void fillForm(string text)
{
    if (String.IsNullOrEmpty(priceText1.Text))
    {
        priceText1.Text = text;
    }
    else
    {
        priceText2.Text = text;
    }
} 
```

看起来很简单，但是当我第二次单击按钮时，它没有检测到第二个表单文本框中的文本并在 textbox1 而不是 textbox2 中输入数据，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:43:38.030

问题是，当您第二次单击该按钮时，您正在创建表单的第二个实例，然后只是不显示它（您正在关注第一个实例）。您应该重构程序，以免那样做。

```
private secondform secondform = null;

private void Foo()
{
    if(secondForm == null)
    {
        secondForm = new secondForm();
        secondForm.MdiParent = this.MdiParent;
        secondForm.Show();
    }

    secondForm.fillForm("String");

    secondForm.Focus();
} 
```

因此，只有在我们还没有实例的情况下才会创建一个新实例，我们每次都填充数据，然后聚焦表单。

PS第一次聚焦表格没什么问题，所以我在结束后就离开了`if`。如果有什么事情只应该在不是第一次发生时发生，我们可以添加一个`else`并将`if`代码放在那里。

PSS`secondForm`不遵循类名称的标准命名约定。类名应以大写字母开头，即`SecondForm`. 除其他问题外，这消除了`secondForm`是指类型还是类型实例的歧义。

PSSS 在您的情况下可能不需要功能，但我们可能需要正确处理关闭子窗体然后再次单击按钮的情况。处理此问题的最简单方法是在表单关闭时清除`secondForm`实例字段（如果发生这种情况，则在下次单击按钮时创建一个新字段）。闭包使这变得非常容易，我们只需在之前添加这一行`secondForm.Show();`：

```
secondform.FormClosed += (s, arg) => secondform = null; 
```

# facebook - Facebook 不允许我在没有对话的情况下在用户的墙上发帖。Causes.com 如何摆脱它？

> ID：15348167
> 
> 赞同：1
> 
> 时间：2013-03-11T20:38:41.857
> 
> 标签：facebook

我有一个应用程序，允许用户通过单击他们姓名旁边的复选框然后发布一堆帖子来将页面共享给特定用户。我在二月份收到了一条警告，说除非有对话框，否则我将无法在朋友的墙上发帖。

但是，我注意到如果您在 Causes.com 上签署请愿书，他们会做非常相似的事情，将请愿书发布到一群朋友的墙上。

我很好奇他们是如何逃脱惩罚的。也许我对 Facebook API 不够熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:43:29.123

我不确定这是否有帮助，但 Facebook 确实与某些对其 api 密钥、facebook 应用程序拥有更多特权的网站/公司建立了业务合作伙伴关系。这可能是这些情况之一。

一个例子是，当您访问一个主要站点并且该站点能够读取您的 facebook 会话时，并且在该站点中，一旦呈现该站点，它们就会显示您的姓名和图片。从本质上讲，这些网站已经知道你是谁。

# android - Android - 缩放自定义地图/图像视图并将绘制的标记保持在相对位置

> ID：15348174
> 
> 赞同：1
> 
> 时间：2013-03-11T20:39:03.233
> 
> 标签：android, math, view, custom-component

只是为了清除......我认为我不能使用谷歌地图，除非它会自动缩放地图缩放时我需要使用的自定义图像。

我正在尝试创建自己的自定义视图，用于显示可缩放的地图图像，并允许用户在他们触摸的地方留下标记……也许可以通过长触按下一次，或者我可以通过单次来管理它触碰。

我在想从哪里开始时遇到了一些麻烦。到目前为止，我有几个不同的可缩放图像视图实现，它们工作正常，但我无法提出数学运算，以允许标记在用户捏合和缩放时移动到相对于缩放级别的正确位置。

我遇到了与我之前在这里尝试做的类似的解决方案，但当然现在我正在寻找它，它在哪里找不到。

所以我的问题是我将如何根据缩放级别从数学上确定在哪里绘制我的标记？有没有人知道已经做这种事情的任何库或开源项目？任何有关此事的帮助将不胜感激。

# android - json在android的listview中只填充一行

> ID：15348176
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:39:18.510
> 
> 标签：android, json

我有一个 php 文件，它以 json 格式将以下内容返回给 android：

```
[
   {
      "IDpost":"1",
      "username":"you",
      "FirstN":"Mounzer",
      "LastN":"Yaghi",
      "Content":"test1",
      "Type":"CARS",
      "Dateofp":"2013-03-03"
   },
   {
      "IDpost":"2",
      "username":"boss",
      "FirstN":"Marwan",
      "LastN":"Geha",
      "Content":"test2",
      "Type":"CARS",
      "Dateofp":"2013-03-05"
   },
   {
      "IDpost":"4",
      "username":"boss",
      "FirstN":"Marwan",
      "LastN":"Geha",
      "Content":"hello this is getting boring",
      "Type":"CARS",
      "Dateofp":"2000-02-02"
   }
] 
```

我想要做的是在其中一些信息中填充一个列表视图，但由于一些 json 异常，它不起作用，这是我的 java 代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class Posts extends Activity {
    String type, firstname, lastname, email, number, username, content; 
    HttpClient httpclient;
    HttpPost httppost;
    ArrayList<NameValuePair> nameValuePairs;
    HttpResponse response;
    HttpEntity entity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addpost);

        Bundle gotBasket = getIntent().getExtras();
        type = gotBasket.getString("type_post");
        firstname = gotBasket.getString("fn");
        lastname = gotBasket.getString("ln");
        email = gotBasket.getString("pemail");
        number = gotBasket.getString("number");
        username = gotBasket.getString("user");

        this.setTitle(type);

        Button addp = (Button) findViewById(R.id.addpost1);
        addp.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Bundle basket = new Bundle();
                basket.putString("user", username);
                basket.putString("fn", firstname);
                basket.putString("ln", lastname);
                basket.putString("number", number);
                basket.putString("pemail", email);
                basket.putString("type_post", type);

                Intent a = new Intent(Posts.this, Addpost_2.class);
                a.putExtras(basket);
                startActivity(a);       
            }
        });

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

         httpclient = new DefaultHttpClient();
         httpclient = new DefaultHttpClient();
         httppost = new HttpPost("http://192.168.1.38/LTC/Uploadposts.php?type=" + type + "");
         try {
             nameValuePairs = new ArrayList<NameValuePair>();
             nameValuePairs.add(new BasicNameValuePair("type",type));
             nameValuePairs.add(new BasicNameValuePair("FirstN",firstname));
             nameValuePairs.add(new BasicNameValuePair("LastN",lastname));
             nameValuePairs.add(new BasicNameValuePair("Content",content));

             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             response = httpclient.execute(httppost);

             if (response.getStatusLine().getStatusCode() == 200) {
                 entity = response.getEntity();
                 if (entity != null) {
                     InputStream instream = entity.getContent();
                     JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
                     //Toast.makeText(getBaseContext(),jsonResponse.toString(),Toast.LENGTH_LONG).show();
                     String retUser = jsonResponse.getString("username");
                     String retcont = jsonResponse.getString("Content");
                     String getf = jsonResponse.getString("FirstN");
                     String getl = jsonResponse.getString("LastN");
                     String dop = jsonResponse.getString("Dateofp");

                     try {
                         JSONArray jArray = new JSONArray(convertStreamToString(instream));

                         int jArrayLength = jArray.length();
                         List<String> listContents = new ArrayList<String>(jArrayLength);

                         for (int i = 0; i < jArray.length(); i++){
                             JSONObject json_data = jArray.getJSONObject(i);
                             listContents.add(json_data.getString("FirstN") + " "
                                         + json_data.getString("LastN") + " "
                                         + json_data.getString("Dateofp")
                                         + "\n\n" +json_data.getString("Content"));
                         }

                         ListView myListView = (ListView) findViewById(R.id.listView2);
                         myListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listContents));

                     } catch(JSONException e) {
                         Log.e("log_tag","Error parsin data "+e.toString());
                     }
                 }
             }
         } catch(Exception e) {
             Toast.makeText(getBaseContext(), e.toString(),Toast.LENGTH_LONG).show(); 
         }
     }

     private static String convertStreamToString(InputStream is) {
         BufferedReader reader = new BufferedReader(new InputStreamReader(is));
         StringBuilder sb = new StringBuilder();
         String line = null;
         try {
             while ((line = reader.readLine()) != null) {
                 sb.append(line + "\n");
             }
        } catch(IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch(IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
     }
 } 
```

我知道错误在我的java代码中，谁能帮助我并告诉我应该在代码中更改什么，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:44:27.657

在不知道你得到的确切异常的情况下，我猜你必须`new JSONObject(convertStreamToString(instream));`用 new替换，`JSONArray(convertStreamToString(instream));`因为你的 PHP 返回一个数组，而不是一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:47:05.073

```
 public static JSONObject retrieveJsonObjectFromUrl(URL url)
        throws JSONException, IOException {
    HttpURLConnection connection = null;
    StringBuilder jsonResults = new StringBuilder();

    try {
        if (url != null) {
            connection = (HttpURLConnection) url.openConnection();
            connection.setReadTimeout(10000);
            connection.setConnectTimeout(10000);

            InputStreamReader in = new InputStreamReader(
                    connection.getInputStream());

            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {

                jsonResults.append(buff, 0, read);
            }
        }
    } catch (MalformedURLException e) {
        Log.e("Invalid URL", "Error processing ", e);
        return null;
    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    }
    return new JSONObject(jsonResults.toString());
} 
```

# c++ - 为什么 floor 不返回整数？

> ID：15348180
> 
> 赞同：29
> 
> 时间：2013-03-11T20:39:32.943
> 
> 标签：c++, c

刚才我偶然发现了一个事实，即 C++ 函数返回的类型与您传递给它的类型相同，`floor`无论是 it还是其他类型。`float``double`

根据[此参考](http://www.cplusplus.com/reference/cmath/floor/)，该函数返回一个向下舍入的整数值。为什么这不是整数？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-11T20:40:51.493

因为整数类型不一定具有与 a`float`或相同的整数值`double`。

```
int main(int argc, char *argv[]) {
    std::cout << floor(std::numeric_limits<float>::max()) << std::endl;
    std::cout << static_cast<long>(floor(std::numeric_limits<float>::max())) << ::endl;
} 
```

输出（在我的 x86_64 架构上）

```
3.40282e+38
-9223372036854775808 
```

此外，浮点值可以保存 NaN、+Inf 和 -Inf，所有这些都由`floor()`操作保留。这些值都不能用整数类型表示。

```
int main(int argc, char *argv[]) {
    std::cout << floor(std::numeric_limits<float>::quiet_NaN()) << std::endl;
    std::cout << floor(std::numeric_limits<float>::infinity()) << std::endl;
    std::cout << floor(-std::numeric_limits<float>::infinity()) << std::endl;
} 
```

输出

```
nan
inf
-inf 
```

# wpf - WPF 动态创建页面时显示繁忙指示器的最佳方式

> ID：15348185
> 
> 赞同：1
> 
> 时间：2013-03-11T20:39:42.753
> 
> 标签：wpf, xbap, busyindicator

我有一个在浏览器中作为 XBAP 运行的 WPF 应用程序。在几个页面上，所有控件都是根据用户选择的内容动态创建的。因此，在加载所有控件之前，应用程序可能看起来没有做任何事情。我希望事先显示某种繁忙的指示器，以向用户显示控件正在加载，它不必动画，但如果这样做会很好。我已经查看了 Telerik 繁忙指示器，但这不起作用，因为它实际上是为了获取单个控件的数据，并且在加载控件之前不显示，这违背了目的。

我正在考虑首先显示一个叠加层或类似的东西，包含一个加载徽标，然后加载其后面的页面并在控件加载时隐藏叠加层。我想知道这是否是解决此问题的最佳方法，或者是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:50:49.217

注意：我没有在 XBAP 浏览器应用程序中尝试过这个，但它在 WPF 应用程序中运行没有任何问题！我在必要时使用 DispatcherTimer 显示沙漏，并将此代码抽象为静态类。

```
public static class UiServices
{

    /// <summary>
    ///   A value indicating whether the UI is currently busy
    /// </summary>
    private static bool IsBusy;

    /// <summary>
    /// Sets the busystate as busy.
    /// </summary>
    public static void SetBusyState()
    {
        SetBusyState(true);
    }

    /// <summary>
    /// Sets the busystate to busy or not busy.
    /// </summary>
    /// <param name="busy">if set to <c>true</c> the application is now busy.</param>
    private static void SetBusyState(bool busy)
    {
        if (busy != IsBusy)
        {
            IsBusy = busy;
            Mouse.OverrideCursor = busy ? Cursors.Wait : null;

            if (IsBusy)
            {
                new DispatcherTimer(TimeSpan.FromSeconds(0), DispatcherPriority.ApplicationIdle, dispatcherTimer_Tick, Application.Current.Dispatcher);
            }
        }
    }

    /// <summary>
    /// Handles the Tick event of the dispatcherTimer control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
    private static void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        var dispatcherTimer = sender as DispatcherTimer;
        if (dispatcherTimer != null)
        {
            SetBusyState(false);
            dispatcherTimer.Stop();
        }
    }
} 
```

你会像这样使用它：

```
void DoSomething()
{
    UiServices.SetBusyState();
    // Do your thing
} 
```

希望这可以帮助！

# apache - 将具有文件夹结构的地址重定向到 https？

> ID：15348187
> 
> 赞同：1
> 
> 时间：2013-03-11T20:39:44.470
> 
> 标签：apache, .htaccess

我想确保我的所有流量都在 ssl 上，即使他们输入 http。但我也希望它传递文件夹，所以 mod_rewrite 仍然可以工作。我尝试了这个糟糕的例子，但它不起作用。基本上我如果他们输入[http://mydomain.com/apage](http://mydomain.com/apage)它将重定向到[https://mydomain.com/apage](https://mydomain.com/apage)

服务器：Apache2，LAMP 堆栈。

.htaccess

```
RewriteEngine on

RewriteCond %{HTTPS} !=on
RewriteRule ^(/) https://%{HTTP_HOST}%{REQUEST_URI} [NC,R=301,L] 
```

我愿意为 Apache 调整虚拟主机文件，但我以前没有看到它这样做过。这是我对 ssl 托管的第一次冒险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:00:25.840

如果您可以访问 httpd.conf，我建议不要使用 mod_rewrite 或 htaccess。如果您想强制所有用户使用 https（一个好主意），您可以在 httpd.conf 中添加如下内容：

> <虚拟主机 1.2.3.4:80>
> 
> ```
>  ServerName SSL.EXAMPLE.COM
>     CustomLog /var/log/httpd/EXAMPLE.access_log combined
>     ErrorLog /var/log/httpd/EXAMPLE.error_log
> 
>     Redirect / https://ssl.example.com/ 
> ```
> 
> </虚拟主机>
> 
> <虚拟主机 1.2.3.4:443>
> 
> ```
> ServerName ssl.example.com
> DocumentRoot /var/www/html
> SSLEngine on
> SSLProtocol all -SSLv2
> SSLCipherSuite HIGH:MEDIUM
> .
> .
> . 
> ```
> 
> </虚拟主机>
> 
> <目录/var/www/html>
> 
> ```
> #If all else fails, this will ensure nothing can get in without being encrypted.
> SSLRequireSSL 
> ```
> 
> </目录>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:41:27.527

只需替换`http`为`https`

```
RewriteCond %{HTTPS} !on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

# php - var_dump 返回 null，不知道为什么

> ID：15348189
> 
> 赞同：0
> 
> 时间：2013-03-11T20:40:02.530
> 
> 标签：php, json

```
 <?php
     $json_string = file_get_contents('infile.json');
     fwrite($fileout, $json_string);
     var_dump(json_decode($json_string));
     $get_json_values=json_decode($json_string,true);
        if(is_array($get_json_values))
        {
        foreach ($get_json_values as $getlikes) {  ?>
          <li>
            <a href="https://www.facebook.com/<?php echo $getlikes['id']; ?>" target="_top">
          </li>
        <?php
      } }
       ?> 
```

我正在尝试从`json`文件中获取值，但我无法弄清楚为什么`var_dump`返回 NULL。此外，如果我删除`if`，出于显而易见的原因，有一个
`Warning: Invalid argument supplied for foreach()`

请帮我解决这个问题，我整天都在做这个，这太令人沮丧了，它无论如何都没有解决。

注意：文件名正确，文件与文件在同一目录下`.php`，里面有数据，`infile.json`完成**后****打印** 。`fwrite($fileout, $json_string);`

 **会有什么问题，我该怎么办？

* * *

编辑：该`json`文件有大约 1000 个包含 facebook 页面数据的条目。它们都具有以下结构：

```
{"category":"Musician\/band","name":"Yann Tiersen (official)","id":"18359161762","created_time":"2013-03-09T23:00:54+0000"} 
```

`var_dump($json_string)`打印文件中的数据。

如果这有任何帮助，`json`可以在[此处下载文件](https://www.dropbox.com/s/gtqrzml1p9p5zpy/infile.json)

* * *

我已经像这样组成了我的json：

```
function idx(array $array, $key, $default = null) {
  return array_key_exists($key, $array) ? $array[$key] : $default;
}
$likes = idx($facebook->api('/me/likes'), 'data', array());
foreach ($likes as $like) {

                    fwrite($fileout,json_encode($like));
                    fwrite($fileout,PHP_EOL );
                  ?>` 
```

所以，我应该改变的是：
1）添加`fwrite($fileout, "[");`before 和`fwrite($fileout,"]");`after `foreach`。
2）添加`fwrite($fileout,",")`之前`fwrite($fileout,PHP_EOL );` 是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:43:29.960

您可能在`infile.json`. 根据[json_decode()](http://php.net/manual/en/function.json-decode.php)的文档：

```
NULL is returned if the json cannot be decoded or if the encoded data is deeper 
than the recursion limit. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:09:47.030

您的 JSON 文件无效。

基本上你有很多行本身都是有效的 JSON，但它们组合起来是无效的！

无效的：

```
{"category":"Musician\/band","name":"Yann Tiersen (official)","id":"18359161762","created_time":"2013-03-09T23:00:54+0000"}
{"category":"Travel\/leisure","name":"Me hitchhiking around the world","id":"221159531328223","created_time":"2013-03-09T13:24:06+0000"} 
```

将是有效的：

```
[
    {"category":"Musician\/band","name":"Yann Tiersen (official)","id":"18359161762","created_time":"2013-03-09T23:00:54+0000"}
,
    {"category":"Travel\/leisure","name":"Me hitchhiking around the world","id":"221159531328223","created_time":"2013-03-09T13:24:06+0000"}
] 
```

您可以逐行解码 JSON，也可以将其转换为有效格式。**

# c# - 从 ADGroup 获取电子邮件地址列表

> ID：15348192
> 
> 赞同：3
> 
> 时间：2013-03-11T20:40:13.877
> 
> 标签：c#, active-directory

如果我有 Active Directory 组的名称，如何获取成员列表或其电子邮件地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T20:51:40.797

```
void Main()
{
    string groupName = "somegroup";
    string domainName = "somedomain";

    using(PrincipalContext ctx = new PrincipalContext(ContextType.Domain, domainName))
    {
        using(GroupPrincipal grp = GroupPrincipal.FindByIdentity(ctx, IdentityType.Name, groupName))
        {
            var sams = from x in grp.GetMembers(true) select new {x.SamAccountName, };
            var users = from sam in sams.Distinct()
                let usr = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, sam.SamAccountName)
                select new { usr.SamAccountName, usr.DisplayName, usr.EmailAddress};
            //do something with users...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:48:12.080

在这个 url 中有一篇关于 C# 的完整的 AD 文章[http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#42](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#42)，用户存储为 DiretoryEntry查看属性属性 [http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.properties(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.properties(v=vs.100).aspx)

# sqlite - SQLite 问题：查询错误：FROM 附近：语法错误无法执行语句

> ID：15348197
> 
> 赞同：0
> 
> 时间：2013-03-11T20:40:25.310
> 
> 标签：sqlite, syntax

我在 SQLite 中不断收到此错误：

> 查询错误：“FROM”附近：语法错误无法执行语句

```
SELECT Name, CourseId
    FROM Lecturer JOIN Lecture ON Lecturer.LecturerId = Lecture.LecturerId
    JOIN     (SELECT CourseId   
        FROM Course
        WHERE EXISTS (SELECT * 
                    FROM Exam
                WHERE Exam.CourseId = Course.CourseId
                AND (SELECT COUNT *
                          FROM Exam
                          WHERE Grade > 6)
                <
                (SELECT COUNT *
                FROM Exam
                WHERE Grade < 6)))
    USING Course.Id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:43:22.927

`COUNT`是一个函数，你需要在`*`

如：

`COUNT(*)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:33:35.513

我通常会为内联视图分配一个别名，例如 FOO，并使用 on... 子句将外部表连接到内联视图：

```
 select * from x
  join
  (
      select someColumn, someOtherColumn...

  ) as FOO
  on x.somecolumn = FOO.somecolumn 
```

我会这样做：

```
 select lecture.*, FOO.courseid
  from lecture
  join lecturer on lecture.lecturerid = lecturer.lecturerid
  join
  (
       you inline view selecting the courses

  ) as FOO
  on lecture.courseid = FOO.courseid 
```

# c# - 按查询字符串过滤 FormView

> ID：15348204
> 
> 赞同：3
> 
> 时间：2013-03-11T20:41:04.593
> 
> 标签：c#, .net, formview, linqdatasource

我有一个连接到我想按查询字符串过滤的 LinqDataSource 的 FormView。基本上，如果通过查询字符串传入 ID，我只想显示该记录，否则如果没有提供 ID，则将它们全部显示。我已经设法使用几种不同的方法使其工作，但是每次我尝试将数据保存在 FormView 中时，我都会遇到异常：`Operator '==' incompatible with operand types 'Int32?' and 'Object'`.

当我调用`FormView.UpdateItem(true)`. 这是我过滤 LinqDataSource 的方法：

```
protected void ldsIncidents_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    if (!String.IsNullOrEmpty(Request.QueryString["id"]))
    {
        e.Result = db.Incidents.Where(i => i.Incident_Number == Convert.ToInt32(Request.QueryString["id"]));
    }
} 
```

当我调用`FormView.UpdateItem(true)`. 一旦我从`Selecting`上面的事件中删除代码，一切都会正常运行，但我无法再过滤数据。我也尝试将 WhereParameters 动态添加到 LinqDataSource，但同样的事情发生了。有谁知道为什么会发生这种情况或如何解决它？如果有帮助，这是我的堆栈跟踪：

```
Exception Type: System.Web.Query.Dynamic.ParseException
Message: Operator '==' incompatible with operand types 'Int32?' and 'Object'
Stack Trace:
   at System.Web.Query.Dynamic.ExpressionParser.CheckAndPromoteOperands(Type signatures, String opName, Expression& left, Expression& right, Int32 errorPos)
   at System.Web.Query.Dynamic.ExpressionParser.ParseComparison()
   at System.Web.Query.Dynamic.ExpressionParser.ParseLogicalAnd()
   at System.Web.Query.Dynamic.ExpressionParser.ParseLogicalOr()
   at System.Web.Query.Dynamic.ExpressionParser.ParseExpression()
   at System.Web.Query.Dynamic.ExpressionParser.Parse(Type resultType)
   at System.Web.Query.Dynamic.DynamicExpression.ParseLambda(ParameterExpression[] parameters, Type resultType, String expression, Object[] values)
   at System.Web.Query.Dynamic.DynamicExpression.ParseLambda(Type itType, Type resultType, String expression, Object[] values)
   at System.Web.Query.Dynamic.DynamicQueryable.Where(IQueryable source, String predicate, Object[] values)
   at System.Web.UI.WebControls.DynamicQueryableWrapper.Where(IQueryable source, String predicate, Object[] values)
   at System.Web.UI.WebControls.QueryableDataSourceView.ExecuteQueryExpressions(IQueryable source, QueryContext context)
   at System.Web.UI.WebControls.QueryableDataSourceView.ExecuteQuery(IQueryable source, QueryContext context)
   at System.Web.UI.WebControls.LinqDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments)
   at System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback)
   at System.Web.UI.WebControls.DataBoundControl.PerformSelect()
   at System.Web.UI.WebControls.BaseDataBoundControl.DataBind()
   at System.Web.UI.WebControls.GridView.DataBind()
   at System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound()
   at System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls()
   at System.Web.UI.Control.EnsureChildControls()
   at System.Web.UI.WebControls.CompositeDataBoundControl.get_Controls()
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.DataBoundControlHelper.ExtractValuesFromBindableControls(IOrderedDictionary dictionary, Control container)
   at System.Web.UI.WebControls.FormView.ExtractRowValues(IOrderedDictionary fieldValues, Boolean includeKeys)
   at System.Web.UI.WebControls.FormView.HandleUpdate(String commandArg, Boolean causesValidation)
   at System.Web.UI.WebControls.FormView.UpdateItem(Boolean causesValidation)
   at PRIDE.Pages.Incidents.View.btnSaveIncident_Click(Object sender, EventArgs e) in C:\Users\hopfnejo\Documents\Development Projects\PRIDE\PRIDE\Pages\Incidents\View.aspx.cs:line 317 
```

* * *

***编辑***

以下是 FormView`ItemUpdating`事件的内容：

```
protected void fvIncident_ItemUpdating(object sender, FormViewUpdateEventArgs e)
{
    TabContainer tc = fvIncident.FindControl("tcMain") as TabContainer;

    e.NewValues["Division"] = (tc.Tabs[0].FindControl("cboDivision") as DropDownList).SelectedValue;
    e.NewValues["Safety"] = (tc.Tabs[0].FindControl("chkSafety") as CheckBox).Checked;
    e.NewValues["Quality"] = (tc.Tabs[0].FindControl("chkQuality") as CheckBox).Checked;
    e.NewValues["Cost"] = (tc.Tabs[0].FindControl("chkCost") as CheckBox).Checked;
    e.NewValues["Production"] = (tc.Tabs[0].FindControl("chkProduction") as CheckBox).Checked;
    e.NewValues["Environment"] = (tc.Tabs[0].FindControl("chkEnvironment") as CheckBox).Checked;
    e.NewValues["Department"] = (tc.Tabs[0].FindControl("cboDepartment") as DropDownList).SelectedValue;
    e.NewValues["Area"] = (tc.Tabs[0].FindControl("cboArea") as DropDownList).SelectedValue;
    e.NewValues["Initiated_By"] = (tc.Tabs[0].FindControl("txtInitiatedBy") as TextBox).Text;
    e.NewValues["KRA_Notes"] = (tc.Tabs[0].FindControl("txtKRANotes") as TextBox).Text;
    e.NewValues["Incident_type"] = (tc.Tabs[0].FindControl("cboIncidentType") as DropDownList).SelectedValue;
    e.NewValues["Aspect_Affected"] = (tc.Tabs[0].FindControl("cboAspectAffected") as DropDownList).SelectedValue;

    e.NewValues["Incident_Level"] = (tc.Tabs[1].FindControl("cboIncidentLevel") as DropDownList).SelectedValue;
    e.NewValues["ADM_Testing_Within_Guidelines"] = (tc.Tabs[1].FindControl("chkADMTestingWithinGuidelines") as CheckBox).Checked;
    e.NewValues["ADM_Testing_Required"] = (tc.Tabs[1].FindControl("chkADMTestingRequired") as CheckBox).Checked;
    e.NewValues["Number_Of_People_Involved"] = (tc.Tabs[1].FindControl("txtNumPeopleInvolved") as TextBox).Text;

    e.NewValues["Mill_State"] = (tc.Tabs[2].FindControl("cboMillState") as DropDownList).SelectedValue;
    e.NewValues["Area_Downtime"] = (tc.Tabs[2].FindControl("txtDowntime") as TextBox).Text;
    e.NewValues["Production_Amount_Lost"] = (tc.Tabs[2].FindControl("txtProductionAmountLost") as TextBox).Text;
    e.NewValues["Production_Actual_or_Estimate"] = (tc.Tabs[2].FindControl("cboProductionActualOrEstimate") as DropDownList).SelectedValue;
    e.NewValues["Production_Units"] = (tc.Tabs[2].FindControl("cboProductionUnits") as DropDownList).SelectedValue;

    e.NewValues["Environmental_Impact"] = (tc.Tabs[3].FindControl("txtEnvironmentalImpact") as TextBox).Text;
    e.NewValues["Environmental_Specialist_Notified"] = (tc.Tabs[3].FindControl("cboEnvironmentalSpecialistNotified") as DropDownList).SelectedValue;
    e.NewValues["Environmental_Incident_Reportable_to_Government"] = (tc.Tabs[3].FindControl("cboEnvironmentalIncidentReportableToGovernment") as DropDownList).SelectedValue;
    e.NewValues["Environmental_Governement_Agency_Involved"] = (tc.Tabs[3].FindControl("txtGovernmentAgencyInvolved") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[3].FindControl("txtDateReported") as TextBox).Text))
        e.NewValues["Environmental_Date_Reported"] = null;
    else
        e.NewValues["Environmental_Date_Reported"] = (tc.Tabs[3].FindControl("txtDateReported") as TextBox).Text;
    e.NewValues["Environmental_Action_Taken"] = (tc.Tabs[3].FindControl("txtEnforcementActionTaken") as TextBox).Text;
    e.NewValues["Environmental_Reference_Number"] = (tc.Tabs[3].FindControl("txtReferenceNumber") as TextBox).Text;

    e.NewValues["Procedures"] = (tc.Tabs[4].FindControl("txtProceduresAffected") as TextBox).Text;
    e.NewValues["Referances"] = (tc.Tabs[4].FindControl("txtReferences") as TextBox).Text;

    e.NewValues["Reviewed_By__BUL_"] = (tc.Tabs[8].FindControl("txtReviewedByBUL") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtSignOffDateBUL") as TextBox).Text))
        e.NewValues["Sign_Off_Date__BUL_"] = null;
    else
        e.NewValues["Sign_Off_Date__BUL_"] = (tc.Tabs[8].FindControl("txtSignOffDateBUL") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtPlannedReviewDate") as TextBox).Text))
        e.NewValues["Planned_Review_Date"] = null;
    else
        e.NewValues["Planned_Review_Date"] = (tc.Tabs[8].FindControl("txtPlannedReviewDate") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtPlannedCompletionDate") as TextBox).Text))
        e.NewValues["Planned_Completion_Date"] = null;
    else
        e.NewValues["Planned_Completion_Date"] = (tc.Tabs[8].FindControl("txtPlannedCompletionDate") as TextBox).Text;
    e.NewValues["Signed_Off_By__BGL_"] = (tc.Tabs[8].FindControl("txtSignedOffByBGL") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtSignOffDateBGL") as TextBox).Text))
        e.NewValues["Sign_Off_Date__BGL_"] = null;
    else
        e.NewValues["Sign_Off_Date__BGL_"] = (tc.Tabs[8].FindControl("txtSignOffDateBGL") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtActualReviewDate") as TextBox).Text))
        e.NewValues["Actual_Review_Date"] = null;
    else
        e.NewValues["Actual_Review_Date"] = (tc.Tabs[8].FindControl("txtActualReviewDate") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtActualCompletionDate") as TextBox).Text))
        e.NewValues["Actual_Completion_Date"] = null;
    else
        e.NewValues["Actual_Completion_Date"] = (tc.Tabs[8].FindControl("txtActualCompletionDate") as TextBox).Text;
    e.NewValues["Signed_Off_By__Mill_Manager_"] = (tc.Tabs[8].FindControl("txtSignedOffByMillManager") as TextBox).Text;
    if (String.IsNullOrEmpty((tc.Tabs[8].FindControl("txtSignOffDateMillManager") as TextBox).Text))
        e.NewValues["Sign_Off_Date__Mill_Manager_"] = null;
    else
        e.NewValues["Sign_Off_Date__Mill_Manager_"] = (tc.Tabs[8].FindControl("txtSignOffDateMillManager") as TextBox).Text;
} 
```

***编辑 2***

我已经尝试在我拥有与 LinqDataSource 和 FormView 相关的处理程序的唯一事件中设置断点，并且在异常发生之前没有任何事件被触发。这些事件是：

*   `LinqDataSource_Selecting`
*   `FormView_ItemUpdating`
*   `FormView_DataBound`

单击“保存”按钮后，我的任何断点都没有到达。它在这里爆炸，不是很有用：

![截屏](../Images/694cc3642906e031f3e08e2e91be8d0a.png)

这是我的 FormView 声明：

```
<asp:FormView ID="fvIncident" runat="server" DefaultMode="Edit" 
    DataSourceID="ldsIncidents" DataKeyNames="Incident_Number" 
    AllowPaging="True" CssClass="full" ondatabound="fvIncident_DataBound" 
    onitemupdating="fvIncident_ItemUpdating"> 
```

还有我的 LinqDataSource 声明：

```
<asp:LinqDataSource ID="ldsIncidents" runat="server" 
    ContextTypeName="PRIDE.PRIDEDataContext" EnableUpdate="True" EntityTypeName="" 
    TableName="Incidents" OrderBy="Incident_Number DESC" 
    onselecting="ldsIncidents_Selecting">
</asp:LinqDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:16:19.487

试试这个。

```
IQueryable<Incident> query = this.context.Incidents;
string whereCaluse = String.Format("Incident_Value=={0}",Request.QueryString["id"]);
query.Where(whereClause);
e.Result=query; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:20:56.183

通过查看异常细节，我可以说`i.Incident_Number`可能是对象类型。

因此，您也可以尝试`i.Incident_Number`在 linq 表达式中转换为 int。像：

```
protected void ldsIncidents_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    if (!String.IsNullOrEmpty(Request.QueryString["id"]))
    {
        e.Result = db.Incidents.Where(i => Convert.ToInt32(i.Incident_Number) == Convert.ToInt32(Request.QueryString["id"]));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:08:19.043

也许你应该使用 TryParse

```
protected void ldsIncidents_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    if (!String.IsNullOrEmpty(Request.QueryString["id"]))
    {
        int id;
        e.Result = db.Incidents.Where(i => i.Incident_Number == Int32.TryParse(Request.QueryString["id"], out id) ? id : 0);
    }
} 
```

## 编辑

要在下面验证我的建议，您可以这样做来检查您的值

```
 protected void ldsIncidents_Selecting(object sender, LinqDataSourceSelectEventArgs e)
    {
        if (!String.IsNullOrEmpty(Request.QueryString["id"]))
        {
            int id;

            // now you can check the values you gat;
            var queryString = Request.QueryString["id"];
            int iNr =Int32.TryParse(queryString, out id) ? id : 0;

            e.Result = db.Incidents.Where(i => i.Incident_Number == iNr);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T21:50:37.013

好吧，信不信由你，这是通过实施[此 SO question](https://stackoverflow.com/questions/12611347/is-this-a-formview-bug)中的修复来解决的。微软迫切需要解决这个问题。我将寻呼机设置更改为仅显示在 FormView 的底部并停止抱怨。

# backbone.js - 主干多面过滤器

> ID：15348208
> 
> 赞同：0
> 
> 时间：2013-03-11T20:41:25.143
> 
> 标签：backbone.js, faceted-search

我正在尝试为骨干网（收集数据）找到分面过滤解决方案。我不是指搜索框，而是像这里的[http://www.documentcloud.org/public/search/](http://www.documentcloud.org/public/search/) - 左侧边栏中的项目列表。这些东西有图书馆吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:29:45.397

在我的公司，我们正在开发这个，也许你可能会感兴趣： [https ://github.com/arillo/Backbone.Facetr](https://github.com/arillo/Backbone.Facetr)

# jquery - jQuery 模态对话框和 CKEditor 输入对话框

> ID：15348209
> 
> 赞同：14
> 
> 时间：2013-03-11T20:41:25.973
> 
> 标签：jquery, jquery-ui, dialog, ckeditor

# 解决方案更新

在花了一些时间搜索之后，我想我可以解决这个问题。对我来说，使用模态对话框的唯一特点是它可以防止从它后面的元素访问。我发现它与使用带有覆盖层的非模态对话框一样。叠加层只是起到了作为模态对话框的作用（尽管它不是全功能的模态）。

所以这是我的解决方案，在初始化对话框之前，我在它之前插入一个 div 元素并将*ui-widget-overlay*类赋予 div。它使用[.insertBefore()](http://api.jquery.com/insertBefore/)方法完成。然后，在对话框“*关闭*”事件中，我删除了该覆盖 div。对话框 ' *modal* ' 选项设置为**false**。通过使用此解决方案，CKEditor 弹出窗口工作正常，因为只有一个模式对话框（CKEditor 弹出窗口）。

这是[jsfiddle](http://jsfiddle.net/marsel_aipassa/sd5UT/)中的全部代码。希望这可以帮助。

* * *

* * *

我正在使用 jQuery 来显示一个对话框。**我将此对话框设置为模态模式**。在该对话框中，我包含一个文本区域，然后将与 CKEditor 一起使用。当我显示对话框时，CKEditor 很好地转换了文本区域。但是当尝试包含图像时（**CKEditor 为输入显示 ITS OWN DIALOG**），我无法使用 URL 输入。

这是我初始化对话框的代码：

```
var $dialogJurnal = $("#dialog").dialog({
    autoOpen: false,
    height: 630,
    width: 'auto',
    maxHeight: 630,
    resize: 'auto',
    modal: true
}); 
```

使用该配置，我无法单击文本框并输入。

* * *

然后我发现，**如果我将模式设置为 false，那么它应该可以工作**。

这是代码：

```
var $dialogJurnal = $("#dialog").dialog({
    autoOpen: false,
    height: 630,
    width: 'auto',
    maxHeight: 630,
    resize: 'auto',
    modal: false
}); 
```

使用该代码，一切正常，我可以单击文本框并输入。

* * *

**因为我需要启用模态模式，所以这成为我的问题。**我认为这是因为 jQuery 对话框（或类似）中的 z-index 阻止了 CKEditor 输入对话框。有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-26T13:42:03.280

最近，（就在这周），我遇到了类似的问题。我将完全按照您在提供的 jsfiddle 中所做的操作。然而，经过一些研究并尝试了对话 UI 代码中发生的事情以及页面中的标记发生了什么，我终于明白了我需要做什么。

这都是关于**小部件工厂**和**_allowInteraction**函数的。

对我来说，我在 jQuery 对话框中使用带有过滤器的 Sencha ExtJs 网格。网格工作正常，但过滤器（文本框过滤器）不起作用。这是因为当显示过滤器时，它们位于对话框 div 或 .ui-dialog 标记之外。

如果您深入了解**_allowInteraction**函数中的对话框 UI 代码，它会执行以下操作。

```
//From the jQuery dialog UI
_allowInteraction: function(event) {
    if($(event.target).closest('.ui-dialog').length) {
        return true;
    }

    // TODO: Remove hack when datepicker implements
    // the .ui-front logic (#8989)
    return !!$( event.target ).closest(".ui-datepicker").length;
} 
```

我需要做的就是在我的 jQuery UI 文件之后添加一个 javascript 文件，代码如下：

```
$.widget('ui.dialog', $.ui.dialog, {
    _allowInteraction: function( event ) {
        //This overrides the jQuery Dialog UI _allowInteraction to handle the sencha
        //extjs filter's not working.
        //this._super(event) passes onto the base jQuery UI
        return !!$( event.target ).closest( ".x-panel :input" ).length || this._super( event );
    }
} 
```

由于**_allowInteraction**会在对话框失去焦点时触发，因此我只需要查找 .x-panel :input，因为这是触发事件的原因。

在您的情况下，您只需要查看 CKEditor 最接近的元素是什么。这样您就不需要做任何类型的解决方法，您只需将对话框的模式选项设置为 true。您不想这样做的原因是如果您要在该对话框之上显示另一个对话框。您的叠加层可能订购错误或附加到错误的元素。对话框 UI 已经有代码来处理它。

通过执行*$.widget( **'ui.dialog'** , $.ui.dialog, function(){});* 它适用于我们网站的所有 ui 对话框。

[工作 jsFiddle 演示](http://jsfiddle.net/dklingman/h54Jt/)

参考点：

[jQuery 对话框 UI _allowInteraction](http://api.jqueryui.com/dialog/#method-_allowInteraction)

[jQuery UI 小部件工厂](http://learn.jquery.com/jquery-ui/widget-factory/how-to-use-the-widget-factory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T12:39:59.300

是的，jQueryUI 的模式阻止了与 jQuery 对话框之外的任何东西进行交互。在创建 jQuery UI 对话框之前注册它：

```
// Prevent jQuery UI modal from disabling ckeditor dialog inputs
// @see http://api.jqueryui.com/dialog/#method-_allowInteraction
$.widget("ui.dialog", $.ui.dialog, {
    _allowInteraction: function(event) {
        return !!$(event.target).closest(".cke_dialog").length || this._super(event);
    }
}); 
```

来源：[http ://bugs.jqueryui.com/ticket/9087#comment:14](http://bugs.jqueryui.com/ticket/9087#comment:14)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T12:30:39.787

我在模态中使用 CKEditor 时遇到了同样的问题，尽管我没有使用 jQuery 创建模态。

我尝试了在互联网上找到的几种解决方案，但只有[这个](https://stackoverflow.com/a/43104663/10236810)解决了我的问题

```
$.fn.modal.Constructor.prototype._enforceFocus = function() {
            var $modalElement = this.$element;
            $(document).on('focusin.modal',function(e) {
                if ($modalElement[0] !== e.target
                    && !$modalElement.has(e.target).length
                    && $(e.target).parentsUntil('*[role="dialog"]').length === 0) {
                    $modalElement.focus();
                }
            });
        }; 
```

来自[https://stackoverflow.com/a/43104663/10236810](https://stackoverflow.com/a/43104663/10236810)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-18T10:52:37.317

一个对我有用的更简单的解决方案取自另一个没有提到 CKE 的 SO 问题，而是关于使模态非模态： [https ://stackoverflow.com/a/28101676/4050940](https://stackoverflow.com/a/28101676/4050940)

在打开模式后运行它：

```
$(document).off('focusin.bs.modal'); 
```

ckeditor 对话框可以正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-02T09:21:55.540

这种替代方法对我有用：

```
//Create the dialog
$("#myDialog").dialog({
 modal: true
});

//Fix problem with ckeditor dialogs
 $.ui.dialog.prototype._allowInteraction = function(event) {
  return true;
 }; 
```

几乎在最后的来源：[https ://forum.jquery.com/topic/can-t-edit-fields-of-ckeditor-in-jquery-ui-modal-dialog](https://forum.jquery.com/topic/can-t-edit-fields-of-ckeditor-in-jquery-ui-modal-dialog)

# backbone.js - 何时使用 Backbone.View 与 Backbone.Marionette.ItemView？

> ID：15348215
> 
> 赞同：5
> 
> 时间：2013-03-11T20:42:08.170
> 
> 标签：backbone.js, marionette

我正在第一次尝试使用 Backbone.Marionette，并想知道当一个简单的 Backbone.View 就足够了时，是否有任何理由使用 Backbone.Marionette.ItemView？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T20:56:13.647

Marionette 的 ItemView 提供了一个默认值`render`和`close`方法，可以为您做一些事情。

`render`执行以下操作（除其他外）：

1) 将视图标记为 !this.isClosed（与在 Regions 中显示视图有关，另一个 Marionette 概念）

2) 在渲染事件之前和之后触发

3) 调用`serializeData`方法来获取数据（默认为来自`this.model`或的数据） `this.collection`。

4) 获取模板（可能来自 TemplateCache）并通过 Marionette.Renderer 进行渲染

5) 绑定 UI 元素

除了这种“免费”`render`方法之外，您还可以获得关闭的功能。

当然，如果您使用的是 CollectionView/ItemView 组合（非常强大）或 CompositeView/ItemView，则必须使用 ItemView。

在这些情况之外，一大好处是您知道您的视图将与 Marionette Regions 兼容。理想情况下，在 Marionette 应用程序中，您使用单独的区域来显示您的视图，如下所示：

```
var myView = new MyView();

// render and display the view
MyApp.mainRegion.show(myView);

// closes the current view
MyApp.mainRegion.close(); 
```

如果`MyView`是 Marionette ItemView，这将像一个魅力。如果它只是一个原始的主干视图，您可能需要做一些工作以确保它按计划工作。

在我的应用程序中，我通常只选择使用 ItemView 作为我所有非集合和非复合视图的基础。

# django - (Django) 创建一个管理命令，它将覆盖 BaseCommand 中的默认设置

> ID：15348223
> 
> 赞同：3
> 
> 时间：2013-03-11T20:42:27.117
> 
> 标签：django, command, settings

我们总是在 settings_test 之外运行我们的测试，就像这样：./manage.py test someapp --settings=settings_test。问题是记住添加选项有时会出现问题。

我想介绍一个只有管理命令test.py的通用应用程序。根据它在 INSTALLED_APPS 设置中的位置，它将覆盖默认值。在命令本身内部，我想更改 --settings 选项的默认值。我怎样才能做到这一点？

我知道我可以创建一个类似于 manage.py 但使用 settings_test 而不是设置的 local.py 文件。但是，关键是仍然运行 ./manage.py，但将 settings_test 作为默认值，而不是在 ./manage.py test someapp 之后不断输入“--settings=settings_test”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-22T09:44:46.670

经过几次尝试，我发现在调用实际管理命令之前，manage.py 设置设置的时间足够长，因此基本上不可能（据我所知）在那里更改它们。最终我决定，因为改变 manage.py 似乎是可以的 - 例如，那里有你的默认设置文件 - 这将是一个处理这个问题的合理地方，所以我在那里实现了它：

```
if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapp.settings")

    argv = sys.argv
    try:
        if argv[1] == 'test' and not any([k.startswith('--settings') for k in argv]):
            os.environ["DJANGO_SETTINGS_MODULE"] = "myapp.test_settings"
    except IndexError:
        pass

    from django.core.management import execute_from_command_line
    execute_from_command_line(argv) 
```

这似乎按预期工作，我没有看到任何重大缺点或问题 - 很高兴得到纠正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T14:28:12.300

您可以通过在您的应用程序中实现它们来覆盖默认命令（例如：common_app）。

`management.commands`在 common_app 中创建一个包。并在那里实现一个测试命令：

```
# this is commonapp/management/commands/test.py
try:
    from south.management.commands import test
except ImportError:
    from django.core.management.commands import test

class Command(test.Command):
    def handle(self, *args, **kwargs):
        kwargs['settings'] = kwargs.get('settings', 'common_app.settings')
        super(Command, self).handle(*args, **kwargs) 
```

`settings.py`如果给定没有'--settings ='标志，这将使用common_app中的文件。但是您可以在“settings_test”中更改该字符串，它将加载它可以在您的 python 路径中找到的第一个 settings_test.py。

[South](http://south.aeracode.org/)也覆盖了这个命令，所以为了完整起见，我添加了 south 导入。但是，如果您安装的任何其他应用程序也覆盖了测试命令......你明白了。

不要忘记`__init__.py`制作“管理”和“命令”[包](http://docs.python.org/2/tutorial/modules.html#packages)的空文件。

[RTFM](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)了解有关 Django 自定义管理命令的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T13:25:01.543

您可以按照@Chris Wesseling 在他的回答中描述的那样覆盖 django 命令。

**注意：**如果有其他应用程序正在扩展该命令，请将您的应用程序移到`INSTALLED_APPS`列表中这些应用程序的上方，即

*   要覆盖`runserver`命令并且您正在使用`'django.contrib.staticfiles'`，请将您的应用程序放在 staticfiles 应用程序之前
*   覆盖`test`命令并且您正在使用测试应用程序，即 django_nose，同样，将您的应用程序放在 django_nose 应用程序之前

# sql - 如何动态过滤 DataGridView 结果？(五)

> ID：15348224
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:42:38.407
> 
> 标签：sql, vb.net, datagridview

我有一个 DataGridView 显示存储在数据库中的信息。

假设我有一个科目（数学、英语和科学）的专栏，我怎样才能使 DataGridView 只显示我选择的科目（最好通过下拉框）。因此，如果我在下拉框中选择了英语，它将只显示主题 = 英语的数据条目。

我很无能为力，因此非常感谢您的帮助，谢谢。（这是在VB中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:03:05.457

您可以过滤您的数据视图并将其显示在数据网格上。

```
Dim view as new DataView //'Declare a new dataview
view.Table = someDataSet.Tables("Sometable") //'the table you're working with
view.RowFilter = "subject = 'English'" //'The filter as you were writing a where clause
someDatagridview.DataSource = view //'bind it to DGW 
```

# php - 希望同时循环 2 个元素（php /xpath）

> ID：15348231
> 
> 赞同：0
> 
> 时间：2013-03-11T20:42:59.820
> 
> 标签：php, loops, curl, xpath, foreach

我正在尝试使用 PHP Curl 和 Xpath 提取 2 个元素！

到目前为止，元素已经分开，`foreach`但我想同时拥有它们：

```
@$dom->loadHTML($html);
$xpath = new DOMXpath($dom);
$elements = $xpath->evaluate("//p[@class='row']/a/@href");
//$elements = $xpath->query("//p[@class='row']/a");

foreach ($elements as $element) {
    $url = $element->nodeValue;
    //$title = $element->nodeValue;    
} 
```

当我`echo`每个人`foreach`都只得到一个元素时，当它在里面回响时，`foreach`我得到了所有的元素。

我的问题是如何同时获得它们（url 和 title）以及使用 pdo 将它们添加到 myqsl 的最佳方法是什么。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:58:51.190

在这种情况下，不需要使用 XPath 两次。您可以执行一个查询并导航到关联的其他节点。

For example, find all of the `href`s that you are interested in and get their `ownerElement`'s (the `<a>`) node value.

```
$hrefs = $xpath->query("//p[@class='row']/a/@href");
foreach ($hrefs as $href) {
    $url = $href->value;
    $title = $href->ownerElement->nodeValue;
    // Insert into db here
} 
```

Or, find all of the `<a>`s that you are interested in and get their `href` attributes.

```
$anchors = $xpath->query("//p[@class='row']/a[@href]");
foreach ($anchors as $anchor) {
    $url = $anchor->getAttribute("href");
    $title = $anchor->nodeValue;
    // Insert into db here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:45:00.077

您正在覆盖`$url`每次迭代。也许使用数组？

```
@$dom->loadHTML($html);
$xpath = new DOMXpath($dom);
$elements = $xpath->evaluate("//p[@class='row']/a/@href");
//$elements = $xpath->query("//p[@class='row']/a");

$urls = array();

foreach ($elements as $element){
    array_push($urls, $element->nodeValue);
    //$title = $element->nodeValue;

} 
```

# oracle - MVC 4 - 具有 Oracle 数据库的自定义成员资格提供程序

> ID：15348236
> 
> 赞同：0
> 
> 时间：2013-03-11T20:43:14.040
> 
> 标签：oracle, entity-framework, asp.net-mvc-4

我必须在 Oracle 数据库之上使用 MVC 4 构建网站。我也不想要这些 pages_Membership 或 pages_OAuthMembership 表。有必要自己写会员提供者和角色提供者吗？我发现[了这个](http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/)- 这可能是一个很好的解决方案，但也许有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:56:10.303

如果您不想使用由 Simple Membership Provider 创建的表，请从解决方案资源管理器转到过滤器，`InitializeSimpleMembershipAttribute.cs`并确保`autoCreateTables`设置为`false`：

```
WebSecurity.InitializeDatabaseConnection("MyContext", "TableToPointTo", 
"UserIdColumn", "UserNameColumn", autoCreateTables: false); 
```

Simple Membership Provider 继承自 Extended Membership Provider，因此如果您想创建自己的自定义提供程序，您可以执行以下操作：

```
public class MyMembershipProvider : ExtendedMembershipProvider
{
    // inherited methods
} 
```

如果要查看 SimpleMembershipProvider 类中的逻辑，可以在[此处](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/bf897646cb14#src/WebMatrix.WebData/SimpleMembershipProvider.cs)查看源代码。

# android - 允许在 Android Drawables 中针对各种密度自动缩放？

> ID：15348239
> 
> 赞同：2
> 
> 时间：2013-03-11T20:43:24.853
> 
> 标签：android, performance, android-resources, android-memory

很多关于 Android 开发的博客和最佳实践说

“**您不需要为每种可能的密度提供位图，Android 会缩放您的位图（通常在加载时）以匹配当前密度**。”

参考链接： https: [//plus.google.com/105051985738280261832/posts/6eWwQvFGLV8](https://plus.google.com/105051985738280261832/posts/6eWwQvFGLV8)

我试过了，效果很好。但我无法理解一件事。

例如，我在视图寻呼机中创建了一个示例应用程序，其中包含 5 个大约 1.5 MB 的全屏图像。

我为 Galaxy Tab 2 等 7 英寸 MDPI 设备创建了重图像，并将它们放在“drawable-large-mdpi”文件夹中。它有点生涩，但没有崩溃，让我滚动浏览所有图像。

现在我尝试在几乎是大型 HDPI 设备的 Nexus 7 上使用该应用程序。该应用程序在解码位图时因“OOM 错误”而崩溃。

**如果我将图像从大 MDPI 移动到大 HDPI，它在两个设备上都可以正常工作而不会出现任何崩溃。**

**所以我有两个问题。**

1.  这个结果是否倾向于，我们只能将图形资源放在最高密度的可绘制文件夹中，并让它在其范围内自动缩小？
2.  内部发生了什么，为什么它第一次崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:07:15.513

1.  只要可绘制对象在缩放时看起来不错，那将是一种方法。缩小规模*通常*比扩大规模更好。也就是说，有这样一行：

    > 即便如此，当位图缩放到没有设计的密度时，您可能会得到诸如边缘软化之类的伪影。

    `HDPI`从到缩放`TVDPI`工作正常的原因是因为两个密度非常接近。一些图像的问题将开始出现在主要密度之间。例如，从 跳到`HDPI`肯定`LDPI`会导致许多伪影，因为图像根本不是为低分辨率设计的。

2.  Nexus 7 中的 OOM 很可能会崩溃，因为它会拍摄设备认为是`MDPI`图像的大图像并将它们放大到`TVDPI`设置。这将导致更大的图像。

    当您将它们放在 HDPI 文件夹中时，您是在告诉它按比例缩小以`TVDPI`使生成的图像占用更少的内存。

    在实际缩放中还有开销。

    当您扩展到 XHDPI 设备时，可能会发生同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:04:44.047

1.  不，您可以将图形资源放入任何可绘制文件夹。如果您只将资源放在一个密度文件夹中，系统将按比例放大和缩小到目标设备密度。
2.  您想在同时使用这些大图像时使用大量内存。即使你使用压缩的图像格式，当系统在屏幕上绘制它时，它也会以位图的形式存在于内存中。因此，如果您同时在内存中保留 4-5 个 1200x800 像素的图像，它将耗尽位图中的内存量。这使您的应用程序崩溃，因为它用完了授予的内存（默认情况下非常低，android 仅确保 16 mb，通常由制造商扩大）。

当您将图像放入 hdpi 时，系统会按比例缩小图像，这就是为什么可能（不保证）有足够的内存用于较小的图像。

解决方案：不要使用那么大的图像作为背景。尝试可扩展的图像，并查看 9-patch 格式：[链接](http://radleymarx.com/blog/simple-guide-to-9-patch/)

# java - 在 Swing 中拖放以对项目进行排序

> ID：15348241
> 
> 赞同：0
> 
> 时间：2013-03-11T20:43:29.130
> 
> 标签：java, swing

我有一个要在 Swing 中显示的项目列表。为简单起见，假设每个项目仅包含一个名称。我希望用户能够通过将它们拖放到彼此上方/下方来订购这些项目。实现这一目标的最佳方法是什么？

或者，这是否可以通过使用 JList 来完成，该 JList 带有一个“向上”和“向下”按钮，可以在列表中向上/向下移动所选项目。这需要在每次点击时立即更新图形显示（我不知道如何执行此操作），并通过按当前顺序获取列表中的项目来保存新订单（我也不知道该怎么做）。

或者拖放解决方案是否更可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:54:32.977

使用您提到的解决方案可能更容易实现这`JList`一点，所以我会给您一些指示（我对 D&D 不是很有经验）。

基本上，您希望拥有三个组件：a`JList`和两个（一个向上，一个向下）`JButton`s。您可能还需要一个自定义列表模型。如果您不熟悉模型或列出模型，请查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/components/model.html)。否则，请继续阅读。

在列表模型类（例如`ReorderableListModel`）中，继续定义两个方法：`public void moveUp(int index)`和`public void moveDown(int index)`。

的代码`moveUp`如下：

```
if (index > 0) { // error checking
    // Swap the given index with the previous index.
    // (where `list` is the name of your list variable)
    Collections.swap(list, index, index - 1);
}
// Finally, notify the `JList` that the list structure has changed.
fireContentsChanged(this, index - 1, index); 
```

`moveDown`类似：

```
if (index < getSize() - 1) {
    Collections.swap(list, index, index + 1);
}
fireContentsChanged(this, index, index + 1); 
```

现在，我们需要为按钮实现动作监听器。对于向上按钮，请尝试以下侦听器代码：

```
// First, move the item up in the list.
listModel.moveUp(list.getSelectedIndex());

// Now, set the selection index to keep the same item selected.
//
// If you use the default list selection interval, setting the index to -1
// will do nothing (so it's okay, we don't need error checking here).
list.setSelectedIndex(list.getSelectedIndex() - 1); 
```

添加一个类似的“下移”方法，你就完成了！

关于“在每次点击时立即更新图形显示”，这就是`fireContentsChanged`模型类中的方法所做的。`JList`将为您进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:52:37.677

仅使用 swing 很难实现的功能。你听说过 JavaFX 吗？如果您想在桌面应用程序中实现更多动态功能，它是一个很好的图形框架，请查看这篇文章：[http ://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)

在这里，您将能够找到包含更多信息的链接以及一些示例。最好的祝福。

# xml - PHP DomDocument 错误 - XML 声明不在文档的开头

> ID：15348244
> 
> 赞同：0
> 
> 时间：2013-03-11T20:43:33.543
> 
> 标签：xml, domdocument, php

我想用 PHP DomDocument 类创建站点地图。当我尝试使用 Kohana 模型从数据库中获取数据时，它显示内容错误：

> XML 声明不在文档开头

当我通过模型访问删除这两行时 - 一切正常，有什么问题？我需要这些数据来创建我的网址。

我正在使用这个功能：

```
public function sitemap()
{
    $doc = new DOMDocument();
    $doc->formatOutput = true;

    $r = $doc->createElementNS("http://www.sitemaps.org/schemas/sitemap/0.9","urlset" );
    $r->setAttributeNS('http://www.w3.org/2001/XMLSchema-instance',
            'xsi:schemaLocation',
            'http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd'
            );

    $doc->appendChild( $r );

    $model = new Data_Model; // THESE TWO LINES CAUSES ERROR
    $arrayofdata = $model->get_all();

for($i=0; $i<10; $i++)
{
    $b = $doc->createElement( "url" );
    $loc = $doc->createElement("loc");
    $loc->appendChild($doc->createTextNode('www.example.com'));
    $b->appendChild( $loc );
        $priority = $doc->createElement( "priority" );
        $priority->appendChild(
                    $doc->createTextNode('1.0')
                    );
        $b->appendChild( $priority );

        $r->appendChild( $b );

        $changefreq = $doc->createElement( "changefreq" );
        $changefreq->appendChild(
                    $doc->createTextNode('Daily')
                    );
        $b->appendChild( $changefreq );

        $lastmod = $doc->createElement( "lastmod" );
        $lastmod->appendChild(
                    $doc->createTextNode(date('Y-m-d'))
                    );
    $b->appendChild( $lastmod );

    $r->appendChild( $b );
}
    $output = $doc->saveXML();
    header("Content-type:text/xml");  
    echo $output;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:34:46.723

错误

> XML 声明不在文档开头

只是意味着您在 XML 声明（即`<?xml version="1.0" ... ?>`部分）之前有一些输出（数据）。而是将该输出放入文档中。这是一个例子：

```
<?php
error_reporting(~0);
ini_set('display_errors', 1);

class Data_Model {
    public function __construct() {
        echo "I output something just because I can!\n";
    }

    public function get_all() {
        trigger_error('Yes I can trigger notices baby!', E_USER_NOTICE);
        echo "Output, I love it! Just put it out!\n";
        return array();
    }
}

$doc                     = new DOMDocument();
$doc->formatOutput       = TRUE;
$doc->preserveWhiteSpace = FALSE;

$r = $doc->createElementNS("http://www.sitemaps.org/schemas/sitemap/0.9", "urlset");
$r->setAttributeNS('http://www.w3.org/2001/XMLSchema-instance',
    'xsi:schemaLocation',
    'http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd'
);
$doc->appendChild($r);

// capture leaked output and create a <buffer> element containing the output (if any) with the
// output XML

ob_start();
$model       = new Data_Model; // THESE TWO LINES CAUSES ERROR
$arrayofdata = $model->get_all();
$buffer      = ob_get_clean();

$bufferElement = $doc->createElement('buffer');
$bufferElement->setAttribute('strlen', strlen($buffer));
$bufferElement->appendChild($doc->createCDATASection($buffer));
$bufferElement = $doc->documentElement->appendChild($bufferElement);

# ... 

// output XML
header("Content-Type: text/xml");
$doc->save('php://stdout'); 
```

如您所见，它与您的代码相似。该类的模拟`Data_Model`只是泄漏了一些数据-因为它可以！是的！并触发一个通知，这就是为什么错误报告被打开并且显示错误被打开的原因（不要在生产中这样做，它在这里是为了示例）。

接下来的内容基本上是您的代码，直到它到达该`ob_start()`行，然后将`ob_get_clean()`一个新的 XML 元素添加到 out 中。

然后是输出。如果您仔细阅读，您会发现一些关于如何改进代码的小提示。无论如何，这是迄今为止的示例输出：

```
<?xml version="1.0"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
  <buffer strlen="640"><![CDATA[I output something just because I can!

Notice: Yes I can trigger notices baby! in \home\user\test-parts.php on line 14

Call Stack:
    0.0006     147024   1\. {main}() \home\user\test-parts.php:0
    0.0007     165016   2\. Data_Model->get_all() \home\user\test-parts.php:36
    0.0007     165128   3\. trigger_error() \home\user\test-parts.php:14

Output, I love it! Just put it out!
]]></buffer>
</urlset> 
```

如您所见，所有输出现在都在 XML 文档中，而不是在它之前。错误消失了。

自己尝试一下（或者开始排除故障，找出为什么你的模型输出到 Stdout 而不是不输出。

* * *

*额外说明：*当您向文档添加元素节点并且稍后想要在文档中向该节点添加子节点时，您需要重新分配变量：

```
$r = $doc->appendChild( $r );
^^^^^ 
```

否则`$r`仍然是*未*添加到文档中的元素。所以你需要稍后*再*添加它，这不是你想要的。有关[`DOMDocument::appendChild()`](http://php.net/DOMDocument.appendChild)详细说明和示例代码，请参阅。

# html - 更改文本区域中的行高会导致 IE9 和 IE10 中的垂直滚动条

> ID：15348245
> 
> 赞同：2
> 
> 时间：2013-03-11T20:43:34.983
> 
> 标签：html, textarea, rows, css

我有一个需要能够使用*Rows*属性调整大小的文本区域。我还希望能够调整文本区域内文本的*行高。***但是，这会导致IE9 和 IE10 中**出现滚动条。有没有不涉及javascript的方法？

这个 JSFiddle 说明了这个问题：http: [//jsfiddle.net/JYkAX/6/](http://jsfiddle.net/JYkAX/6/)

这是html：

```
<textarea rows="3" class="textbox">No line-height
2
3</textarea>
<div class="separator"></div>
<textarea rows="3" class="textbox2">Lineheight = 20px
2
3</textarea> 
```

这是CSS：

```
.textbox
{
    overflow: auto;  
}
.textbox2
{
    overflow: auto;
    line-height: 20px;
}
.separator
{
     display: block;
     height: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:59:20.473

为ie创建一个额外的css文件并将line-height设置为例如13px；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:04:43.970

你的 css 很好，但要使这项工作添加 Jquery：

```
$(document).ready(function() {

  var textArea = $('textarea'),
      lineHeight = parseFloat(textArea.css('lineHeight'));

  textArea.height(lineHeight * textArea.attr('rows'))

}); 
```

这将定义行高及其自动高度。

**我知道你没有提到 JS，但是当我不得不处理类似的事情时，jquery 是我唯一的解决方案**

泽克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:09:34.650

```
use this line-height: 15px\9; in css 
```

它是现代浏览器的 css IE9 hack。它会起作用的。我在 IE9 上查看。你在IE10上检查它。因为我没有IE10。

这是一个很好的问题。我喜欢它的正确回答:)

# javascript - node.js 中的 console.time() 安全吗？

> ID：15348250
> 
> 赞同：19
> 
> 时间：2013-03-11T20:43:48.183
> 
> 标签：javascript, node.js

我面前有一小段 node.js 代码，如下所示：

```
console.time("queryTime");
doAsyncIOBoundThing(function(err, results) {
    console.timeEnd("queryTime");
    // Process the results...
}); 
```

当然，当我在我的（否则空闲的）开发系统上运行它时，我会收到一条很好的控制台消息，如下所示：

```
queryTime: 564ms 
```

但是，如果我将其投入生产，是否可能同时进行多个异步调用，并且每个调用都会覆盖前一个计时器？或者节点是否有某种神奇的执行上下文，为每个“执行线程”提供一个单独的控制台计时器命名空间？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-11T20:56:41.363

只需使用独特的标签，它就会很安全。这就是您使用标签来唯一标识开始时间的原因。

只要您不意外使用标签两次，一切都会完全按预期工作。另请注意，`node`通常只有一个执行线程。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-08T11:38:18.360

这个简单的代码不起作用吗？

```
var labelWithTime = "label " + Date.now();
console.time(labelWithTime);
// Do something
console.timeEnd(labelWithTime); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-13T17:57:08.150

考虑新的 NodeJS 功能，因为它也在发展。请查看：

`process.hrtime()`& NodeJS 的其他性能 API 钩子：

[https://nodejs.org/api/perf_hooks.html#perf_hooks_performance_timing_api](https://nodejs.org/api/perf_hooks.html#perf_hooks_performance_timing_api)

# java - 通过 Class.forName 加载动态类是否适用于简单的类名

> ID：15348255
> 
> 赞同：0
> 
> 时间：2013-03-11T20:44:10.413
> 
> 标签：java, classnotfoundexception, dynamic-class-loaders

我尝试在一个简单的程序中动态加载类，有趣的是，当我尝试动态加载具有简单名称的类时，它会因 classnotfoundexception 而失败。仅当类位于默认包以外的包下时才会发生这种情况。

但是当我指定完整路径名时，动态加载成功。正在加载的类与 Main 类在同一个包中。

文件 Main.java：

```
public class Main {

    public static void main(String[] args) throws InstantiationException, IllegalAccessException, ClassNotFoundException {                  
        System.out.println(Class.forName("m"));
    }
}

class m extends Main{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:45:12.937

不，`Class.forName` *总是*需要包限定的类名。从[参数文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)：

> `className`- 所需类的完全限定名称。

调用代码的包无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:48:57.307

您必须在此处为该类输入完全限定的类名

如`System.out.println(Class.forName("com.sample.M"));`

假设

com.sample 是你的类包名。

# .htaccess - 尝试使用 htaccess mod-rewrite 阻止 ZmEu 和 Ezooms 会导致错误 310 ERR_TOO_MANY_REDIRECTS

> ID：15348256
> 
> 赞同：1
> 
> 时间：2013-03-11T20:44:14.043
> 
> 标签：.htaccess, mod-rewrite, security

我正在尝试阻止我一直受到的 ZmEu 和 Ezooms 滥用。我尝试遵循此链接中讨论的内容：[http](http://www.philriesch.com/articles/2010/07/getting-a-little-sick-of-zmeu/) ://www.philriesch.com/articles/2010/07/getting-a-little-sick-of-zmeu/但我的尝试导致错误 310，重定向过多。知道是什么导致了这个循环吗？

我的 htaccess 代码如下。我暂时将 HTTP_USER_AGENT 值之一设置为 Chrome 以对其进行测试。

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !^/my_base/special/ip-flagged
RewriteCond %{HTTP_USER_AGENT} (.*)Chrome(.*)|(.*)ZmEu(.*) 
RewriteRule .* /my_base/special/ip-flagged [R=301,L]

RewriteBase /my_base
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$1 [PT,L] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:37:52.590

我想到了。添加线条，

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

到第一个 RewriteRule 停止循环。所以现在只要使用的浏览器是 Chrome，以下代码总是重定向到“ip-flaged”页面：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/my_base/special/ip-flagged
RewriteCond %{HTTP_USER_AGENT} (.*)Chrome(.*)
RewriteRule .* /my_base/special/ip-flagged [R=301,L]

RewriteBase /my_base
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$1 [PT,L] 
```

# php - 在 Javascript 中本地使用正确的服务器 (Codeigniter) URL

> ID：15348263
> 
> 赞同：2
> 
> 时间：2013-03-11T20:44:46.717
> 
> 标签：php, javascript, codeigniter

我无法在带有 Codeigniter 后端的本地 Javascript 中使用正确的路径名。

我的 Codeigniter 文件目录如下所示

```
-user_data
-application
-system
-assets 
```

在我的 JS 中，我定义了我想要使用的路径，它是 user_data，如下所示：

```
var user_file_location = 'user_data'; 
```

我有一个函数（在我的本地 JS 中）根据给定的 url 预加载图像：

```
loader.addImage(image_url); 
```

现在，当我尝试从目录 user_data 加载图像时，如下所示：

```
loader.addImage(user_file_location + 'grass.png') 
```

我在浏览器控制台中收到以下错误：

```
GET http://localhost/index.php/userdata/grass.png 404 (Not Found) 
```

因此，函数 loader.addImage() 试图从中获取图像的 url 不正确。

# 我的问题

什么是实现我想要做的事情的好方法？我是否应该构建一个 ajax 函数来询问 Codeigniter base_url() 并以某种方式在我的 JS 中使用它？

请帮忙，我完全迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:52:19.013

我使用这种技术将配置参数从后端发布到我的 js 代码：

在我的布局文件中，我输出以下内容：

```
echo "<script>";
echo "window.myNameSpace = new Object(); ";
echo "window.myNameSpace.baseUrl = '" . base_url() . "';";
echo "</script>"; 
```

然后我可以在任何我想要的地方访问 js 代码中的这个参数，就像这样：

```
var imageUrl = window.myNameSpace.baseUrl + image.png 
```

# python - 在文本小部件中输入文本后按 Enter 键时如何执行回调？

> ID：15348271
> 
> 赞同：0
> 
> 时间：2013-03-11T20:45:22.070
> 
> 标签：python, text, callback, tkinter

我真的试图找出这一点，但只发现了不连贯的片段，例如`tag_bind`. 我无法弄清楚如何使用它（如果这确实是正确的前进方式）。

我有一个 Text 小部件，用户可以在其中输入一些文本（例如命令或问题），我想执行一个读取该文本然后响应它的函数。显然，我可以提供一个附近的 Button 小部件，当单击它时，它会读取 Text 小部件中的文本。但我不希望人们不得不将手从键盘移到鼠标上。如果他们按下 Enter 键，我只想触发回调。请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:54:40.663

```
import Tkinter as tk

def on_enter(event):
    widget = event.widget
    print(widget.get())

root = tk.Tk()
entry = tk.Entry()
entry.pack(padx=5, pady=5)
entry.focus()
entry.bind('<Return>', on_enter)
root.mainloop() 
```

# sql-server - 还原小备份时磁盘空间不足

> ID：15348272
> 
> 赞同：6
> 
> 时间：2013-03-11T20:45:22.373
> 
> 标签：sql-server, sql-server-2005

我正在尝试从 32MB 备份中恢复数据库。我的磁盘上有 6GB 可用空间。当我尝试恢复备份时，它显示磁盘空间不足错误。32MB 的备份怎么可能需要超过 6GB 的磁盘空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T20:45:56.687

可能是因为备份被压缩了，或者因为有一个非常大的日志文件不需要成为备份本身的一部分，或者因为数据文件本身已被清除 - 备份仅由包含数据的页面组成. 但是当恢复时，它仍然需要将数据文件扩展为原来的大小，即使它大部分是空的。

向我们展示运行时大小列的内容：

```
RESTORE FILELISTONLY FROM DISK = '[path]\whatever.bak'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-07T09:29:53.927

我有同样的问题，我有一个 800 MB 的数据库备份文件，需要 320 GB 的可用空间才能在目标计算机中恢复。

原来这只是因为数据库日志文件，为了确保日志文件是导致问题的原因，右键单击预期的数据库并单击属性，然后在数据库的`General`选项卡检查`Size`中，如果它很大，请转到`Files`选项卡和导航到 tfiles 的路径。

我`Shrink`通过界面在数据库和文件上运行命令，但没有帮助，以下查询最终救了我：

```
ALTER DATABASE DataBase_Name SET RECOVERY SIMPLE;
GO
DBCC SHRINKFILE(DataBase_Name_log, 200);
GO
ALTER DATABASE DataBase_Name SET RECOVERY FULL;
GO 
```

这意味着您必须对数据库运行查询，然后再次创建一个备份文件。

注意：正如您在上面的查询中看到的，数据库恢复模式应该在执行`Simple`之前打开`SHRINKFILE`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:51:06.477

仔细检查您将 mdf 和 ldf 还原到哪个磁盘总是好的，也许您正在创建完整磁盘中的文件，它可能会发生。

除此之外，我建议在另一个地方恢复该备份，将文件缩小，然后再次备份以采取紧急措施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-10T23:52:39.870

其他答案解释了错误消息的原因，但没有提供问题的解决方案。我有同样的问题，这是我找到的解决方案。

插入具有大量可用空间的外部硬盘驱动器，然后将 .mdf 和 .ldf 文件移动到外部硬盘驱动器。此脚本可用于在还原时移动文件：

```
RESTORE DATABASE [MyDb] FROM  DISK = N'C:\Data\Backup\MyDb_FULL.bak' WITH  FILE = 1,  MOVE N'MyDb' TO N'E:\Data\MyDb.mdf',  MOVE N'MyDb_log' TO N'E:\Data\MyDb_log.ldf',  NOUNLOAD,  REPLACE,  STATS = 5 
```

数据库成功恢复到外部驱动器后，您可以选择缩小文件，然后将它们移动到硬盘驱动器或您希望它们位于的任何其他位置。

# objective-c - 将 CGRect 锁定到当前位置 – Objective-c

> ID：15348275
> 
> 赞同：-5
> 
> 时间：2013-03-11T20:45:30.993
> 
> 标签：objective-c, cocoa-touch, quartz-2d

我有一个`UIButton`按下时，将布尔值 (touchHasBegan2) 更改为 YES。并且在按下按钮时绘制一个`drawRect`方法。`CGRect`我想将矩形“锁定”到视图中的当前位置。因此，当再次单击该按钮时，将绘制一个新的矩形。这是我的代码：

```
if (touchHasBegan2)
{
    addedLine = CGRectMake(pointWhereUserClicksX, pointWhereUserClicksY, 80, 20);
    CGContextAddRect(context, addedLine);
    CGContextDrawPath(context, kCGPathFillStroke);
} 
```

当第二次，第三次点击按钮时，如何“锁定”矩形的位置并绘制一个新的位置，依此类推？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:22:06.070

一种方法是保留一个矩形数组。每次点击按钮时，都会在数组末尾添加一个新矩形。在您的`drawRect:`中，绘制数组中的每个矩形。

您可能希望使用`+[NSValue valueWithCGRect:]`并将`-[NSValue CGRectValue]`矩形存储在`NSMutableArray`.

# java - 如何摆脱 ClassCastException

> ID：15348276
> 
> 赞同：0
> 
> 时间：2013-03-11T20:45:39.120
> 
> 标签：java

这是我的收藏：

```
 db.power.find().pretty()
{
        "_id" : ObjectId("513e4022cc6d8d7ff2c83239"),
        "Indicator" : "One",
        "sex" : "male"
} 
```

如何逃脱`ClassCastException`？

```
import java.net.UnknownHostException;    
import com.mongodb.BasicDBObject;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.Mongo;

public class Test {    
    public static void main(String args[]) throws UnknownHostException {
        Mongo mongo = new Mongo();
        DB db = mongo.getDB("at");
        DBCollection testdata = db.getCollection("power");

        BasicDBObject query = new BasicDBObject();
        query.put("Indicator", "One");

        PowerData data = (PowerData) testdata.findOne(query);

        System.out.println(data.getSize());
    }    
}

import com.mongodb.BasicDBObject;    

public class PowerData extends BasicDBObject{       

    public String getSize() {
        return (String) get("sex");
    }

    public void setSize(String sex) {
        put("sex", sex);
    }       

    public String getIndicator() {
        return (String) get("Indicator");
    }

    public void setIndicator(String Indicator) {
        put("Indicator", Indicator);
    }

    public String getId() {
        return (String) get("_id");
    }

    public void setId(String _id) {
        put("_id", _id);
    }
} 
```

线程“main”java.lang.ClassCastException 中的异常：com.mongodb.BasicDBObject 无法在 Test.main 中转换为 PowerData（Test.java:19）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T02:18:33.960

你可以像这样改变你的`PowerData`班级：

```
public class PowerData extends BasicDBObject{

  private BasicDBObject wrapped;

  public PowerData(BasicDBObject o) {
    this.wrapped = o;
  }

  public String getSize() {
    return (String) o.get("sex");
  }

  public void setSize(String sex) {
    o.put("sex", sex);
  }

  public String getIndicator() {
    return (String) o.get("Indicator");
  }

  public void setIndicator(String Indicator) {
    o.put("Indicator", Indicator);
  }

  public String getId() {
    return (String) o.get("_id");
  }

  public void setId(String _id) {
    o.put("_id", _id);
  }
} 
```

在您的`main`方法中，替换`PowerData data = (PowerData) testdata.findOne(query);`为以下内容：

```
PowerData data = new PowerData(testdata.findOne(query)); 
```

# c# - 带有变量 TKey 的 OrderBy

> ID：15348279
> 
> 赞同：1
> 
> 时间：2013-03-11T20:45:48.590
> 
> 标签：c#, linq-to-entities

我有一个 FileInfo 列表，我必须按不同的属性对其进行排序，例如

```
List<FileInfo> infoListOrdered = infoList.OrderBy(x => x.CreationTime).ToList(); 
```

是否可以将 TKey 作为参数传递，而不是为每个 FileInfo 属性编写表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:27:48.083

这是基于我对问题的（错误）理解的解决方案。它为您可能希望通过以下方式订购的`OrderBy`每个属性提供：`prop`

```
static void Main()
{
    IEnumerable<FileInfo> infoList = XXX; // your source to sort

    var orderByMeth = typeof(Enumerable).GetMethods().Single(m => m.Name == "OrderBy" && m.GetParameters().Length == 2);
    var tFileInfo = typeof(FileInfo);
    foreach (var prop in tFileInfo.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.Instance))
    {
        var tKey = prop.PropertyType;

        var xParam = Expression.Parameter(tFileInfo);
        var propBody = Expression.Property(xParam, prop.GetMethod);
        var lambda = Expression.Lambda(propBody, xParam);
        var func = lambda.Compile();

        var orderByMethConstr = orderByMeth.MakeGenericMethod(tFileInfo, tKey);

        var result = orderByMethConstr.Invoke(null, new object[] { infoList, func, });
        var infoListOrdered = (IOrderedEnumerable<FileInfo>)result;

        // keep infoListOrdered; foreach through it to get that particular ordering
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:02:24.157

不，`TKey`是一种类型；Lamba`x=>x.CreationTime`是返回类型值的值选择器`TKey`。您不能仅根据其类型来选择某些东西，因为在您的类中可能有多个该类型的属性实例。

# x509certificate - Pvk2Pfx 不会使用输入 PVK 密码进行输出 PFX 保护

> ID：15348285
> 
> 赞同：7
> 
> 时间：2013-03-11T20:46:15.857
> 
> 标签：x509certificate

我正在使用[Pvk2Pfx](http://msdn.microsoft.com/en-ca/library/windows/hardware/ff550672%28v=vs.85%29.aspx)将 pvk 和 cer 转换为 pfx 文件，我使用的命令是

```
pvk2pfx -pvk MyTest.pvk -spc MyTest.cer -pfx MyTest.pfx 
```

在使用创建 pvk 文件的过程中`makecert`，系统提示我输入私钥的密码。

当我运行命令进行转换时，我还被提示输入 pvk 文件的密码。当我尝试将 pfx 文件导入 Windows 中的证书存储时，我不必指定密码。但根据微软文档

> /po pfxpassword 指定 .pfx 文件的密码。如果未指定 .pfx 文件的密码，则 .pfx 文件的密码将与 .pvk 文件的密码相同

在这种情况下，我没有在命令中使用 /po 开关，我认为 pfx 文件应该与 pvk 文件具有相同的密码，对吧？为什么我不需要提供密码即可将其导入证书存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-05T12:16:23.190

如果您使用 /pi 开关提供密码，它看起来只会使用 .pvk 文件的密码作为 .pfx 文件的密码。

```
pvk2pfx /pvk pvkfilename.pvk /pi pvkpassword /spc spcfilename.cer /pfx pfxfilename.pfx 
```

如果您没有指定 pvk 密码，系统会提示您输入一个，但生成的 pfx 文件将不受密码保护。

[有关 pvk2pfx 的附加信息。](https://msdn.microsoft.com/en-ca/library/windows/hardware/ff550672(v=vs.85).aspx)

# gwt - GWT：MVP 演示者接口

> ID：15348286
> 
> 赞同：1
> 
> 时间：2013-03-11T20:46:19.510
> 
> 标签：gwt, interface, presenter

我试图了解有关活动和地点的 gwt 示例如何工作（[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)）。我想知道他们为什么要为演示者定义一个界面。我知道视图界面有助于轻松交换视图。但是演示者界面有什么用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:21:14.593

[MVP 架构](https://developers.google.com/web-toolkit/articles/mvp-architecture-2?hl=te)中使您的设计非常干净的另一个关键因素是定义一个`Presenter interface`（正如我们已经知道的界面之美`OOP concept`）`JAVA`。

`Presenter`允许我们`View`在收到事件时`callback`进入的接口。`presenter`Presenter 接口定义了以下内容：

```
public interface Presenter<T> {
 void onAddButtonClicked(); 
} 
```

然后您可以将演示者设置为您的视图，如下所示

```
private Presenter<T> presenter;
  public void setPresenter(Presenter<T> presenter) {
    this.presenter = presenter;
  } 
```

最后，当您的 PresenterConcreteClass 实现您的`presenter`接口时，这些`implementations`将触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:16:37.430

使用接口而不是具体类来设计应用程序始终是最佳实践。

1.  参考 - [“程序到接口，而不是实现”是什么意思？](https://stackoverflow.com/questions/2697783/what-does-program-to-interfaces-not-implementations-mean)
2.  参考 - [MVP 的 WikiPedia 示例](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:51:19.000

除了使用界面的*简洁*性之外，您也没有理由不测试您的视图。您可以使用端到端测试，但您也可以简单地使用`GWTTestCase`实例化视图并使用模拟演示者。

然后，您可以测试“当我单击此按钮时，它应该从演示者调用此方法，并将值 X、Y 和 Z 作为参数”，或者“当我使用这些参数调用视图的此方法时，那么这样的小部件应该变成红色，而另一个小部件应该隐藏/折叠/显示/无论如何”。

我也曾经用它来类似地构建一个简单的*测试平台*应用程序，以使用假数据手动测试 UI。该应用程序由按钮组成，用于模拟演示者使用假数据调用视图，并使用`Window.alert`或类似的东西处理从视图中返回的演示者回调。您将在浏览器中启动应用程序并单击此处和此处并验证视图是否按预期工作。

当您稍后将字段添加到表单中时，这可能很有用，以确保您正确地*将*其与演示者关联。当单元测试就足够时，您不想从真正的演示者那里设置您的 GWT-RPC/RequestFactory/任何服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-24T01:37:19.827

我脑海中浮现的 2 个重要原因（可能还有其他原因……）

1.  **测试**：您的 Presenter 不必直接引用 View，这很好，因为 View 包含不能在标准单元测试用例中使用的 GWT 对象（即：任何小部件）：任何 GWT 对象都必须有一个 JS要实例化的容器（即：浏览器或 GWTTestCase）；JUnit 测试用例不能使用浏览器；**GWTTestCase 运行非常缓慢**，所以你不应该使用它。如果没有接口，Presenter 将不得不通过直接引用 View 来引用 View 的方法；这意味着在测试 Presenter 时，您必须实例化 View，它必须实例化其 Widget（此时需要 GWTTestCase 用于 Widget）。而你首先要做的就是测试逻辑，这应该完全在 Presenter 中以避免 GWTTestCase ......使用 Display 接口，你可以做到这一点：专注于测试 Presenter，没有实例化 View 的复杂性（它有自己的实例化复杂程度）并且必须使用 GWTTestCase
2.  **对同一个演示者有多个视图**：[我认为只有在您有不同的平台（即：移动应用程序与浏览器）时，您才会这样做，每个平台都需要自己的视图（因为视图的移动应用程序版本的呈现方式与浏览器视图，因为它们是具有不同 GUI 实体的不同平台）]。然后，多个视图都将以各自的方式实现 Display 接口。然后单个 Presenter 可以包含对所有 View 相同的逻辑，用于所有不同的 View，并且所有 View 实现都保证遵循该单个 Presenter 的相同期望（这是 Display 接口中的编码）！这是使用接口设计的 OOP 最佳实践的体现，@SSR Answers。

# mysql - Mysql查询选择非成员

> ID：15348288
> 
> 赞同：0
> 
> 时间：2013-03-11T20:46:26.407
> 
> 标签：mysql, sql

我有 2 张桌子：

```
Customers:
- ID
- NAME

Modulemembers:
- ID
- customer_id
- enabled 
```

我使用它来为某些客户启用我的网站的功能。我有一个表单，站点管理员可以在其中为客户添加模块，所以我需要一个查询来查找不是 modulemembers 表成员的客户。

我做的：

```
SELECT customers.id, 
       customers.name 
FROM   customers, 
       modulemembers 
WHERE  customers_id != modulemembers.cust_id 
ORDER  BY customers.name 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:52:02.147

您可以`NOT EXISTS`在`WHERE`子句中使用来获得结果：

```
SELECT c.id, 
  c.name 
FROM customers c
WHERE not exists (select customer_id
                  from modulemembers m
                  where c.id = m.customer_id)
order by c.name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:48:03.353

您可以使用 a`LEFT OUTER JOIN`和基于 的过滤器`NULLs`。下面的查询将从`customers`表和`modulemembers`表中提取所有结果。`modulemembers`如果表中没有匹配项，`custid`则为`NULL`。

```
SELECT c.id, c.name 
FROM customers c
    LEFT OUTER JOIN modulemembers m ON c.customers_id = m.cust_id 
WHERE m.custid IS NULL
ORDER BY c.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:49:11.457

尝试这样的事情：

```
 SELECT c.ID AS customerId,
          c.NAME AS fullName,
          m.ID AS memberId
     FROM Customers AS c
LEFT JOIN Modulemembers AS m ON m.customer_id = c.ID
    WHERE m.ID IS NULL; 
```

# java - Java 字段初始化

> ID：15348292
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:46:55.027
> 
> 标签：java

假设我有一个类`B`，它有一个类`C`类型成员作为字段。

现在我写了一个构造函数，`B`这样它的默认构造函数就不会被合成。

但是`B's`构造函数不会`C`显式初始化该类型字段。

```
Class B
{
  C obj_c;

  B()
  { }
} 
```

在 C++ 中，默认构造函数`obj_c`将被称为因为非初始化成员的默认构造函数将被隐式调用为 Object 类型成员。Java 呢？

如果构造函数不初始化 Java 中的字段会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T20:49:04.707

未初始化的成员变量会自动初始化`false`为布尔值、`0`数字和`null`对象引用，这就是`obj_c`这里的位置。它被初始化为`null`.

**编辑**

将其初始化为的不是构造函数`null`；根据[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)，如果您不初始化类变量和实例变量，Java 将初始化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:49:06.710

C 的构造函数不会被隐式调用。它必须通过字段初始化或构造函数的设置显式调用。

# php - PHP动态函数调用

> ID：15348296
> 
> 赞同：-1
> 
> 时间：2013-03-11T20:47:14.463
> 
> 标签：php

我不太确定我应该如何问这个问题，但我会尽量说清楚：

我有 document.php 和 doc2.php （例如）。

在第一个中，我想将一个函数放在一个变量中，这样我就可以在第一个中说：

```
 $_SESSION['action'] = 'exampleFunction($params)'; 
```

在第二份文件中，我很想能够说：

```
 $params = 'test';
   $_SESSION['action']; 
```

然后，我可以根据用户在上一个文档中所做的操作来启动正确的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:49:25.853

您可以使用“变量函数”

```
<?php
function foo() {
    echo "In foo()<br />\n";
}

$func = 'foo';
$func('arg1'); 
```

参考： http: [//php.net/manual/en/functions.variable-functions.php](http://php.net/manual/en/functions.variable-functions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:50:08.253

或者你可以使用`create_function()`.

[参考。](http://php.net/manual/en/function.create-function.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T20:50:36.503

您可以使用 eval 函数：[http ://www.php.net/manual/function.eval.php](http://www.php.net/manual/function.eval.php)

```
eval($_SESSION['action']); 
```

但我强烈反对这样做，因为它非常不安全

# json - 获取 AWK 的 END 之前的总行数

> ID：15348300
> 
> 赞同：1
> 
> 时间：2013-03-11T20:47:39.107
> 
> 标签：json, awk, git-log

我几乎设法将整个`git log`输出转换为有效`JSON`格式，现在唯一缺少的是去掉`JSON`数组末尾的尾随逗号*（见下面的输出）*。

由于`awk`到目前为止我已经使用它来使其正常工作，因此我更愿意继续使用它，除非我可以使用其他东西获得完全相同的输出。我愿意接受任何建议！

该脚本放置在`git`存储库的根目录中，并从终端运行，如：

```
./gitlog.sh 
```

（考虑到您已经 cd'ed 到存储库的根目录）

### 剧本：

```
git log --all --no-merges --shortstat --pretty=format:'commit_hash %H commit_hash_abbreviated %h tree_hash %T tree_hash_abbreviated %t parent_hashes %P parent_hashes_abbreviated %p author_email %ae author_date %ad author_date_unix_timestamp %at author_date_iso_8601 %ai committer_email %ce' | paste -d " " - - - | tail -r | awk -v q='"' -v c=':' -v cl='{' -v cr='}' -v bl='[' -v br=']' -v e=',' -v t='    ' '
BEGIN {
    print cl;
    print t q "commits" q c bl;
}
{
    count++;
    print t t cl;
    print t t t q "commit_nr" q c q count q e;
    print t t t q "commit_hash" q c q $2 q e;
    print t t t q "commit_hash_abbreviated" q c q $4 q e;
    print t t t q "tree_hash" q c q $6 q e;
    print t t t q "tree_hash_abbreviated" q c q $8 q e;
    if ( count == 1 ) {
        print t t t q "parent_hashes" q c q "" q e;
        print t t t q "parent_hashes_abbreviated" q c q "" q e;
        print t t t q "author_email" q c q $12 q e;
        print t t t q "date_day_week" q c q $14 q e;
        print t t t q "date_month_name" q c q $15 q e;
        print t t t q "date_month_day" q c q $16 q e;
        print t t t q "date_hour" q c q $17 q e;
        print t t t q "date_year" q c q $18 q e;
        print t t t q "date_hour_gmt" q c q $19 q e;
        print t t t q "author_date_unix_timestamp" q c q $21 q e;
        print t t t q "date_iso_8601" q c q $23 q e;
        print t t t q "committer_email" q c q $27 q e;
        print t t t q "files_changed" q c q $28 q e;
        print t t t q "insertions" q c q $31 q e;
        print t t t q "deletions" q c q $33 q e;
        print t t t q "impact" q c q $31 - $33 q;
    } else {
        print t t t q "parent_hashes" q c q $10 q e;
        print t t t q "parent_hashes_abbreviated" q c q $12 q e;
        print t t t q "author_email" q c q $14 q e;
        print t t t q "date_day_week" q c q $16 q e;
        print t t t q "date_month_name" q c q $17 q e;
        print t t t q "date_month_day" q c q $18 q e;
        print t t t q "date_hour" q c q $19 q e;
        print t t t q "date_year" q c q $20 q e;
        print t t t q "date_hour_gmt" q c q $21 q e;
        print t t t q "author_date_unix_timestamp" q c q $23 q e;
        print t t t q "date_iso_8601" q c q $25 q e;
        print t t t q "committer_email" q c q $29 q e;
        print t t t q "files_changed" q c q $30 q e;
        print t t t q "insertions" q c q $33 q e;
        print t t t q "deletions" q c q $35 q e;
        print t t t q "impact" q c q $33 - $35 q;
    }
    print t t cr e;
} END {
    print t br;
    print cr;
}' > gitlog.json 
```

### 输出：

*为了示例而缩短*

```
 {
      "commits":[
          {
              "commit_nr":"1",
              "commit_hash":"c7a397928f814f29028bccb281de60066395eaa1",
              "commit_hash_abbreviated":"c7a3979",
              "tree_hash":"e38dac0e625f63e877baa329204511ae490cd944",
              "tree_hash_abbreviated":"e38dac0",
              "parent_hashes":"",
              "parent_hashes_abbreviated":"",
              "author_email":"i@dreamyguy.com",
              "date_day_week":"Wed",
              "date_month_name":"Mar",
              "date_month_day":"6",
              "date_hour":"09:54:27",
              "date_year":"2013",
              "date_hour_gmt":"-0800",
              "author_date_unix_timestamp":"1362592467",
              "date_iso_8601":"2013-03-06",
              "committer_email":"i@dreamyguy.com",
              "files_changed":"1",
              "insertions":"4",
              "deletions":"",
              "impact":"4"
          },
          {
              "commit_nr":"2",
              "commit_hash":"ee3810c9ff8fe144c9ee58f48d99f59885f03462",
              "commit_hash_abbreviated":"ee3810c",
              "tree_hash":"c6d102d3311a32a2475ba1539247f7ecc26b23d1",
              "tree_hash_abbreviated":"c6d102d",
              "parent_hashes":"c7a397928f814f29028bccb281de60066395eaa1",
              "parent_hashes_abbreviated":"c7a3979",
              "author_email":"i@dreamyguy.com",
              "date_day_week":"Thu",
              "date_month_name":"Mar",
              "date_month_day":"7",
              "date_hour":"20:20:42",
              "date_year":"2013",
              "date_hour_gmt":"+0100",
              "author_date_unix_timestamp":"1362684042",
              "date_iso_8601":"2013-03-07",
              "committer_email":"i@dreamyguy.com",
              "files_changed":"2",
              "insertions":"481133",
              "deletions":"",
              "impact":"481133"
          },
          {
              "commit_nr":"3",
              "commit_hash":"bc9a179663f00f134041ac750a56df8280e0b50b",
              "commit_hash_abbreviated":"bc9a179",
              "tree_hash":"f80d83c9e8e14ff55b2d77921cb0479bd173bae9",
              "tree_hash_abbreviated":"f80d83c",
              "parent_hashes":"ee3810c9ff8fe144c9ee58f48d99f59885f03462",
              "parent_hashes_abbreviated":"ee3810c",
              "author_email":"i@dreamyguy.com",
              "date_day_week":"Thu",
              "date_month_name":"Mar",
              "date_month_day":"7",
              "date_hour":"20:22:03",
              "date_year":"2013",
              "date_hour_gmt":"+0100",
              "author_date_unix_timestamp":"1362684123",
              "date_iso_8601":"2013-03-07",
              "committer_email":"i@dreamyguy.com",
              "files_changed":"1",
              "insertions":"71",
              "deletions":"3",
              "impact":"68"
          },
      ]
  } 
```

如您所见，这里的问题是该行为循环中的每一行（包括最后一行）输出一个逗号（通过我命名`print t t cr e;`的预定义变量）。:(`awk``e`

### 我尝试过的：

我替换`print t t cr e;`为：

```
if (getline == 0) { print t t cr; } else { print t t cr e; } 
```

`getline`当它到达最后一行时应该返回`0`，但这不是一个可靠的解决方案：它停在我的 25 行输出（25 次提交）的第 13 行。我还使用官方 git 存储库 ( [https://github.com/git/git/commits/master](https://github.com/git/git/commits/master) ) 测试了这种方法。最后一次提交后，我仍然得到尾随逗号。

由于脚本中的某些缺陷，可能`getline`无法获得真实的行数。但两者都`NR`返回`count`准确的行数。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:47:49.930

您可以尝试的一种解决方案是在下一行的开头而不是在上一行的末尾添加逗号，并使用该`printf`函数来处理换行符。

在`awk`脚本中，我检查 line 是否不是第一个并添加逗号：

```
BEGIN {
    print cl;
    print t q "commits" q c bl;
}
{
    count++;
    #--------------------
    if ( count > 1 ) {
      printf "%s\n", e
    }
    #--------------------
    ...
} END {
    ...
}' > gitlog.json 
```

在最后一行的打印中，我`printf`用来避免或添加额外的换行符：

```
...
printf "%s%s%s", t, t, cr;
} END {
    printf "\n%s%s\n", t, br;
    print cr;
}' > gitlog.json 
```

我已经对其进行了测试，并且似乎可以正常工作。我希望它对你有用。

# sql-server - MVC 更改默认连接

> ID：15348302
> 
> 赞同：1
> 
> 时间：2013-03-11T20:47:45.873
> 
> 标签：sql-server, asp.net-mvc, entity-framework, database-connection, webmatrix

只是为了它，我决定我不希望 MVC 中的成员身份授权机制使用`Default Connection`，我希望它使用我创建的连接字符串`Membership`。

```
 <connectionStrings>
    <add name="Membership" 
         connectionString="Data Source=localhost\SQLEXPRESS;Initial Catalog=Development_Membership;Integrated Security=True" 
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

并在我中创建了一个转换以`web.release.config`将其更改为我的生产数据库，即：

我将行更改为`InitializeSimpleMembershipAttribute.cs`：

```
WebSecurity.InitializeDatabaseConnection("Membership", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

但是，当我通过 VS 发布进行部署时，我发现一个虚拟的默认连接已经恢复，并且似乎被使用，就好像我将它更改为一个虚拟字符串一样，成员资格中断。

这里发生了什么，是否有可能摆脱`Default Connection`，或者更确切地说，使用另一个更好命名的连接字符串？

# entity-framework - 使用复合键删除实例给出属性''是对象的键信息的一部分，不能修改

> ID：15348309
> 
> 赞同：1
> 
> 时间：2013-03-11T20:48:22.667
> 
> 标签：entity-framework, entity-framework-4

我有以下模型：

```
public class EventDetail
{
    [Key][Column(Order = 1)] public int UserId { get; set; }
    [Key][Column(Order = 2)] public int EventId { get; set; }
    [Required(ErrorMessage="")] public string Details { get; set; }
} 
```

起初我试图更新它，显然您无法更新具有 2 个主键（复合键）的实例。并被告知我必须将其删除然后重新插入。现在收集实例，然后尝试像这样将其从上下文中删除。

```
EventDetail e = myDbContext.EventDetails
                    .FirstOrDefault(e => e.EventId == 1 && e.UserId == 66);
myDbContext.EventDetails.Remove(e); 
```

它会抛出这个错误：

> 属性 '' 是对象的关键信息的一部分，不能修改。

# c# - 使用usings在asp中发送电子邮件

> ID：15348315
> 
> 赞同：1
> 
> 时间：2013-03-11T20:48:49.530
> 
> 标签：c#, asp.net, visual-studio, email

我的网站上有一个`email form`效果很好。我唯一想做的就是添加`usings`更好的编码，最好的方法是什么？我使用的代码如下：

```
 try
            {
            //create message
            MailMessage msg = new MailMessage();
            msg.To.Add(txtTo.Text);
            msg.From = new MailAddress(txtFrom.Text);
            msg.Subject = string.Format("Van: " + txtName.Text + " | Email: " + txtFrom.Text + " | Onderwerp: " + txtSubject.Text);
            msg.Body = txtBericht.Text;

            SmtpClient smtp = new SmtpClient("");
            smtp.Host = "smtp.live.com";
            smtp.Port = 587;
            smtp.EnableSsl = true;

            smtp.Credentials = new NetworkCredential("emailaddress", "pass");

                smtp.Send(msg);
                ClearTextboxes();
                lblError.ForeColor = Color.Green;
                lblError.Text = "Het verzenden van uw e-mail is gelukt!";
            }
            catch
            {
                lblError.ForeColor = Color.Red;
                lblError.Text = "Er ging iets mis met het versturen van de email."; 
            } 
```

如何`usings`在此代码上使用？当我上传我的网站时使用填写我的电子邮件地址和密码是否安全，或者我应该使用其他方法？

提前致谢！

编辑：

我将代码更改为以下内容：

```
 try
            {
            //create message
                using (MailMessage msg = new MailMessage())
                {

                     //create message
            MailMessage msg = new MailMessage();
            msg.To.Add(txtTo.Text);
            msg.From = new MailAddress(txtFrom.Text);
            msg.Subject = string.Format("Van: " + txtName.Text + " | Email: " + txtFrom.Text + " | Onderwerp: " + txtSubject.Text);
            msg.Body = txtBericht.Text;

                    using (SmtpClient smtp = new SmtpClient())
                    {
                        smtp.Host = "smtp.live.com";
                        smtp.Port = 587;
                        smtp.EnableSsl = true;

                        smtp.Credentials = new NetworkCredential("emailadress", "pass");

                        smtp.Send(msg);
                    }
                    ClearTextboxes();
                    lblError.ForeColor = Color.Green;
                    lblError.Text = "Het verzenden van uw e-mail is gelukt!";
                }          
            }
            catch
            {
                lblError.ForeColor = Color.Red;
                lblError.Text = "Er ging iets mis met het versturen van de email."; 
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:51:50.013

切勿将身份验证信息放入您的代码中。把它放在你的 web.config 中，并在你需要的地方引用它。如果您更改密码，这也为您省去了在使用它的任何地方寻找的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:53:51.497

我建议使用 web.config 来设置主机、用户名和密码。例子。

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="Network" from="name@domain.com">
            <network host="smtp.mail.com" 
                     userName="name@domain.com" 
                     password="blog.dotnetclr.com" port="25"/>
        </smtp>
    </mailSettings>
</system.net> 
```

代码示例：

```
Public Sub SendEmail([to] As String, subject As String, body As String)
    Dim mailMessage = New System.Net.Mail.MailMessage()
    mailMessage.[To].Add([to])
    mailMessage.Subject = subject
    mailMessage.Body = body

    Dim smtpClient = New SmtpClient()
    smtpClient.EnableSsl = True
    smtpClient.Send(mailMessage)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:52:45.903

[http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.100).aspx)

```
using (MailMessage msg = new MailMessage())
{
    //Your Code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:55:39.257

您可以将 using 用于 MailMessage 和 SMTP 客户端对象

```
 //create message
           using (SmtpClient smtp = new SmtpClient(""))
           using( MailMessage msg = new MailMessage())
           {

                // Your code

           } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T20:59:07.407

```
 using(SmtpClient smtp = new SmtpClient()){
        //smtp options here
        using(MailMessage msg = new MailMessage()){
            //mail options here
            smtp.Send(msg);
        }
    } 
```

# c - 在 C 中创建计时器

> ID：15348318
> 
> 赞同：2
> 
> 时间：2013-03-11T20:48:57.037
> 
> 标签：c, timer

如何创建计时器？一个类似于 Visual Basic 中的计时器；您设置了一个间隔，如果启用了计时器，它会一直等到时间到。

我不想使用现有的库，因为我想知道它是如何工作的。

所以..我只是希望有人可以向我解释计时器是如何工作的，也许可以给我一个代码示例来创建我自己的 - 如果它不是太先进的话。

编辑：我想为 linux 系统创建一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:19:02.423

以下是一个非常基本的示例，它将在 Linux 下运行。如果您查看手册页，`signal`您会看到它已被弃用，取而代之的是`sigaction`. 重要的是不要忘记`volatile`，否则`while`循环可能不会根据优化终止。还要注意`SIGALRM`高度共享的资源是如何被其他计时器设施使用的，并且只有一个。

该程序将打印三秒钟，然后在打印一次`Waiting`后退出。`Finally ...`

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>

volatile int mark = 0;

void trigger(int sig)
{
        mark = 1;
}

int main(void)
{
        signal(SIGALRM, trigger);
        alarm(3);

        while (!mark)
        {
                printf("Waiting\n");
        }
        printf("Finally ...\n");

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T21:38:01.393

你可以这样做

```
#include <stdio.h>
#include <unistd.h>

int main() {
    printf("wait\n");
    sleep(3);
    printf("time elapsed\n");
    return 0;
} 
```

# java - Java - UTF8/16 是字符集名称还是字符编码？

> ID：15348320
> 
> 赞同：2
> 
> 时间：2013-03-11T20:48:57.353
> 
> 标签：java, character-encoding

我正在开发的应用程序将被西欧和东欧以及美国的人们使用。我正在使用 UTF-8 字符集对输入进行编码和对输出进行解码。

我的困惑是因为当我使用这个方法 String(byte[] bytes, String charsetName) 时，我提供 UTF-8 作为 charsetname，而它确实是一个字符编码。我的默认设置在 Eclipse 中设置为 Cp1252。

这是否意味着，如果我在美国的 Java 应用程序中使用 Cp1252 作为我的字符集编码和 UTF-8 作为我的字符集名称创建了一个输出文本文件，欧洲的人们是否能够在我的 Java 应用程序中读取这个文件并且反之亦然？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T20:51:33.223

它们是编码。遗憾的是，Java 在真正意味着“编码”时到处使用“字符集”，但现在很难解决 :( 恼人的是，[IANA 犯了同样的错误](http://www.iana.org/assignments/character-sets/character-sets.xml)。

实际上，按照[Unicode 术语](http://www.unicode.org/glossary/)，它们可能是最准确的[字符编码方案](http://www.unicode.org/glossary/#character_encoding_scheme)：

> 一种字符编码形式加上字节序列化。Unicode 中有七种字符编码方案：UTF-8、UTF-16、UTF-16BE、UTF-16LE、UTF-32、UTF-32BE 和 UTF-32LE。

其中字符编码形式为：

> 从字符集定义映射到用于表示数据的实际代码单元。

是的，Unicode 只定义了七种字符编码形式这一事实使这更加令人困惑。从根本上说，*大多数*开发人员需要知道的是，Java 术语中的“字符集”是文本数据 ( `String`, `char[]`) 和二进制数据 ( `byte[]`) 之间的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:02:34.423

我认为这两件事没有直接关系。

Eclipse 设置决定了您的 Eclipse 编辑器将如何保存您创建/编辑的文本文件（通常是源代码）。您可以使用其他编辑器，因此文件可能会保存在其他编码方案中。只要您的 java 编译器在编译源代码时没有问题，您就是安全的。

这 `java String(byte[] bytes, String charsetName)` 是您自己的应用程序逻辑，用于处理您希望如何解释从文件或网络读取的某些数据。不同的 charsetName（本质上是不同的字符编码方案）可能对字节数组有不同的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T22:00:32.980

“字符集”确实暗示了文本使用的字符集。对于 UTF-8/16，字符集恰好是“所有”字符。对于其他人，不一定。过去，每个人都在发明自己的字符集和编码方案，两者几乎是一对一的映射，因此一个名称可以同时指代字符集和编码方案。

# c++ - 这是未定义的行为吗？

> ID：15348321
> 
> 赞同：-8
> 
> 时间：2013-03-11T20:48:57.820
> 
> 标签：c++

```
using namespace std;
struct s{
    int tab[9]; 
};

int main(){
    s x; 
```

**EDITION**初始化后我得到的相同输出

```
(x.tab)[0]=1;
(x.tab)[1]=1;
(x.tab)[2]=1;
(x.tab)[3]=1;
(x.tab)[4]=1;
(x.tab)[5]=1;
(x.tab)[6]=1;
(x.tab)[7]=1;
(x.tab)[8]=1;

    cout<<(x.tab[0]);
} 
```

上面的代码如何产生下面的输出？它是可解释的还是未定义的行为 - 鼻恶魔？我认为是第二个，因为输出矩阵的大小与选项卡数组的大小无关。

```
2293236 2293240 2293244 2293248 2293252 2293256 2293260 2293264 2293268
2293272 2293276 2293280 2293284 2293288 2293292 2293296 2293300 2293304
2293308 2293312 2293316 2293320 2293324 2293328 2293332 2293336 2293340
2293344 2293348 2293352 2293356 2293360 2293364 2293368 2293372 2293376
2293380 2293384 2293388 2293392 2293396 2293400 2293404 2293408 2293412
2293416 2293420 2293424 2293428 2293432 2293436 2293440 2293444 2293448
2293452 2293456 2293460 2293464 2293468 2293472 2293476 2293480 2293484
2293488 2293492 2293496 2293500 2293504 2293508 2293512 2293516 2293520
2293524 2293528 2293532 2293536 2293540 2293544 2293548 2293552 2293556

--------------------------------
Process exited with return value 0
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:49:49.843

使用未初始化的变量会触发 UB。您还没有初始化 x 所以是的，您正在调用未定义的行为。

# android - Android 使用应用分发文件

> ID：15348325
> 
> 赞同：0
> 
> 时间：2013-03-11T20:49:13.663
> 
> 标签：android

当我完成我正在开发的 Android 应用程序时，我将要分发它，以便将大约 300 个图像文件存储在 sdcard 上。有没有办法在通常的自动安装系统中做到这一点？我不想通过在 res/raw 中包含文件来占用内存。

我相信现在可以使用安装在 sdcard 上的指令来构建应用程序，所以我想我可以这样做并将文件包含在 res/raw 中，但是 res/raw 中的文件数量是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:44:15.073

如果您不想包含图像，您可以使用 APK 扩展文件机制：

[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

它甚至会将其保存到 SD 卡中。

否则，您将不得不包含图像或以编程方式将它们下载到 sdcard。至于 res/raw/assets 文件夹的限制，我找不到任何硬数据。上限虽然是 apk 的最大大小。您总是可以编写一个小脚本来放置 5k/10k/20k 1byte 文件，然后自己查看该上限。如果文件的实际数量成为问题，您始终可以将它们压缩到 assets/raw 中并将它们解压缩到外部存储。

我亲自为一个客户提供了一个应用程序，该应用程序在资产文件夹中有超过 500 张图像，并且运行良好。

# php - 在第 3 方的网页上创建监听器

> ID：15348326
> 
> 赞同：0
> 
> 时间：2013-03-11T20:49:13.867
> 
> 标签：php, python, web

我想写一个小程序，只要网页发生变化，它就会给我一个更新。就像我想看看某个类别下是否有新的 ebay 列表，然后给自己发一封电子邮件。有什么干净的方法可以做到这一点吗？我可以设置一个程序并在某处的服务器上运行它，让它每隔几分钟或几秒钟无限期地轮询 ebay.com，但我觉得应该有更好的方法。如果我想监视各种页面的更新，这种方法也可能会变得很冒险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:02:50.433

没有“干净”的方法可以做到这一点。

您必须使用上下文选项进行中继`CURL`，`file_get_context()`以便简单地从 URL 获取数据，并且为了在 URL 内容发生更改时通知您，您必须将正在收听的页面的数据库快照存储在数据库中。最近，您正在将新版本的爬网内容与早期创建的快照进行比较，如果检测到 DOM 的重要部分发生变化，则应该触发您的邮件通知功能。

# python - 为什么属性装饰器显示“对象没有属性”？

> ID：15348331
> 
> 赞同：11
> 
> 时间：2013-03-11T20:49:39.133
> 
> 标签：python, pyqt4, python-decorators

我有以下代码：

```
import sys
import platform
from PyQt4.QtGui import QApplication
from PyQt4.QtWebKit import QWebPage

class Render(QWebPage):
    def __init__(self):
        self.app = QApplication([])
        QWebPage.__init__(self)

    @property
    def html(self):
        return self.mainFrame().toHtml.toAscii()

page = Render()
print sys.version, platform.platform()
print 'html attribute?', [p for p in dir(page) if 'html' in p]
print page.html 
```

给出这个异常输出：

```
stav@maia:$ python property.py
2.7.3 (default, Aug  1 2012, 05:14:39)
[GCC 4.6.3] Linux-3.2.0-38-generic-x86_64-with-Ubuntu-12.04-precise
html attribute? ['html']
Traceback (most recent call last):
  File "property.py", line 18, in <module>
    print page.html
AttributeError: 'Render' object has no attribute 'html' 
```

如果我删除`@property`装饰器或删除`.toAscii`调用，那么它可以工作。但是为什么错误说即使`dir(page)`显示它也没有属性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-31T20:33:23.387

这里的问题是 Python 给出了*误导性*的错误消息。在这种情况下，人们期望的错误消息是：

```
AttributeError: 'function' object has no attribute 'toAscii' 
```

但相反，Python 给出了一个误导性的错误消息：

```
AttributeError: 'Render' object has no attribute 'html' 
```

也就是说，*在*`AttributeError`属性函数中生成的 an 就好像它是属性本身的 an 一样。*`AttributeError`*

 *当您的类`@property`派生自`QObject`. 这是 PyQt 中的一个已知问题。事实上，PyQt 维护者声称这是预期的行为（错误地，恕我直言）。有关详细信息，请参阅[此线程](http://www.riverbankcomputing.com/pipermail/pyqt/2011-April/029667.html)。（在该线程中，据称其`QObject`行为与 Python 的内置`object`类相同，但我自己的测试表明并非如此。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:00:30.393

你可能的意思是`.toHtml().toAscii()`。注意缺少的括号。*

# php - 如果键名不存在，array_column 会返回什么？

> ID：15348333
> 
> 赞同：6
> 
> 时间：2013-03-11T20:49:59.990
> 
> 标签：php, associative-array

根据[https://wiki.php.net/rfc/array_column，array_column](https://wiki.php.net/rfc/array_column)计划很快添加到 PHP 中。但我无法理解 RFC。如果命名键不存在会返回什么？

**例子：**

```
$arr = array(
    array(
        'firstname' => 'Bob',
        'lastname'  => 'Tomato'
    ),
    array(
        'firstname' => 'Larry',
        'lastname'  => 'Cucumber'
    )
);

$middlenames = array_column($arr, 'middlename'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T01:32:24.787

**介绍**

为了让您了解，`RFC`您需要先了解问题及其引入的原因。

**你的数组**

```
$arr = array(
        array(
                'firstname' => 'Bob',    <--
                'lastname' => 'Tomato'     |    <--
        ),                                 |      |
        array(                             |      |
                'firstname' => 'Larry',  <--      |
                'lastname' => 'Cucumber'        <-|
        )
); 
```

**获取列**

要获取`Bob & Larry`或`Tomato and Cucumber`您已使用多行代码示例，请执行以下操作：

```
$colums = array();
foreach ( array_map(null, $arr[0], $arr[1]) as $value ) {
    $colums[] = $value;
}
print_r($colums); 
```

[输出](http://eval.in/14899)

```
Array
(
    [0] => Array
        (
            [0] => Bob
            [1] => Larry
        )

    [1] => Array
        (
            [0] => Tomato
            [1] => Cucumber
        )

) 
```

**动态版**

上面的代码只有在您知道另一种创造性方式的元素数量时才有效

```
$colums = array();
array_unshift($arr, null);
foreach (call_user_func_array("array_map", $arr) as $value ) {
    $colums[] = $value;
} 
```

[现场测试](http://eval.in/14900)

或 Better Sill 使用`MultipleIterator`

```
$mi = new MultipleIterator(MultipleIterator::MIT_NEED_ALL);
foreach ( $arr as $v ) {
    $mi->attachIterator(new ArrayIterator($v));
}

$colums = array();
foreach ( $mi as $v ) {
    $colums[] = $v;
}
print_r($colums); 
```

[现场测试](http://eval.in/14901)

**键名**

如果您需要在这里获取密钥名称是另一种方法

```
$colums = array_reduce($arr, function ($a, $b) {
    foreach ( $b as $k => $v ) {
        $a[$k][] = $v;
    }
    return $a;
}); 
```

[现场测试](http://eval.in/14898)

**回到`array_column`**

`array_column`只打算处理该过程并获取所有具有名字的列将如下所示简单：

```
 print_r(array_column($arr,"lastname"));
                               ^
                               |
                               +--- This get value with key "lastname" 
```

[现场测试](http://3v4l.org/Jh3eQ)

**更复杂的 Senerio**

想象一下，您希望您的阵列具有此输出

```
Array
(
    [Bob] => Tomato
    [Larry] => Cucumber
) 
```

使用您可以拥有的旧方法

```
$colums = array();
array_unshift($arr, null);
foreach (call_user_func_array("array_map", $arr) as $value ) {
    $key = array_shift($value);
    $colums[$key] = current($value);
}
print_r($colums); 
```

[现场测试](http://eval.in/14902)

现在您可以看到我必须使用`array_shift`并`current`获得前 2 个元素 .. 随着您的数组增长，这可能会变得复杂，但`array_column`会简化它

```
print_r(array_column($arr,"lastname","firstname"));
                              ^           ^
                              |           |
                             Value       Key    (I wonder why position is backwards) 
```

[输出](http://3v4l.org/13sTu)

```
Array
(
    [Bob] => Tomato
    [Larry] => Cucumber
) 
```

**最后回到你的问题**

`What will be returned if a named key doesn't exist?`

空数组......从你的例子

```
 print_r(array_column($arr,"middlename"));
                                ^
                                |
                        it would try to check if any of your array has key middle man 
```

[它返回](http://3v4l.org/DRdgT)

```
Array        <------- Otherwise returns empty array 
(
) 
```

**结论**

我使用了很多不同的例子，使用,`loop`和来解释试图实现的目标。`array_map``array_reduce``MultipleIterator``array_column`

如您所见`array_column`，它更加简化了，但[我建议您](https://wiki.php.net/rfc/array_column)稍微使用一下 RFC 中的示例，如果您仍然不理解它，这将使您更好地理解它，这`PHP`是一种灵活的语言，您始终可以实现自己的版本

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T20:52:18.980

根据：[https ://wiki.php.net/rfc/array_column](https://wiki.php.net/rfc/array_column)

> 当找不到对应的 indexKey 时，该值将以整数作为键，从零开始。

RFC 中使用的示例：

```
$mismatchedColumns = array(
   array(
       'a' => 'foo',
       'b' => 'bar',
       'e' => 'baz'
   ),
   array(
       'a' => 'qux',
       'c' => 'quux',
       'd' => 'corge'
   ),
   array(
       'a' => 'grault',
       'b' => 'garply',
       'e' => 'waldo'
   ),
);

$foo = array_column($mismatchedColumns, 'a', 'b'); 
```

结果`$foo`等于：

```
Array
(
   [bar] => foo
   [0] => qux
   [garply] => grault
) 
```

本质上，a 处的值**成为**新的数组值，**b**成为键。当原始数组不包含键**b**时，它会创建一个 0 索引并使用它。如果有多个不存在的键，它们将从 0 开始递增。

进一步研究他们的示例，它暗示当您无法匹配原始数组中的值时，您根本不会得到数组元素。这意味着如果您在数组中查找单个值并且它不存在，它将返回一个空数组。

* * *

PS我显然从来没有**使用**过这个功能，所以大部分是对RFC的解释。

* * *

在旁注中，这个函数被接受包含在 PHP 中，最初是由 Ben Ramsey 提出的，最终结果是 38 票赞成，6 票反对。邮件列表讨论可以在这里查看：http: [//grokbase.com/t/php/php-internals/126nxxa80p/draft-rfc-array-column-function](http://grokbase.com/t/php/php-internals/126nxxa80p/draft-rfc-array-column-function)。另见[https://github.com/php/php-src/pull/257](https://github.com/php/php-src/pull/257)

# java - 无法从 GPS 检查返回布尔值

> ID：15348334
> 
> 赞同：0
> 
> 时间：2013-03-11T20:50:04.553
> 
> 标签：java, android

我试图检测我设备上的 GPS 是否已打开。

目前，我只是返回一个布尔值 true 或 false 值，然后继续执行我的代码，或将用户定向到 GPS 设置。

在我返回布尔值的那一刻，我的代码正在崩溃。我已经对其进行了调试，但仍然看不到它返回值的原因。

这是代码：

```
 GPSYesOrNo g = new GPSYesOrNo(this);

  check = g.checkStatus();
  // check if GPS enabled
  if (check == true) {
     Intent Appoint = new Intent("com.example.flybaseapp.appointmantMenu");
     startActivity(Appoint);
  } else {  
     alert();
  } 
```

和 GPSYesOrNo 类：

```
public class GPSYesOrNo {
   Context cc;
   private LocationManager locationManager;
   boolean enable;

   public GPSYesOrNo(Context c) {
      this.cc = c;
      checkStatus();
   }

   public boolean checkStatus() {
      locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
      boolean enabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 

      if (enabled) {
         return true;
      } else {
         return false;
      }
   }
} 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:51:58.753

您正在分配启用，而不是比较：

```
if(enable = true) 
```

将其更改为`==`，您应该会很好。就像其他人说的那样，`if (enable)`看起来也会更干净。

**更新：**

有了新信息，当您在其上调用 isProviderEnabled 时，您的 locationManager 似乎为空。在调用 checkStatus() 之前验证它的设置是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:51:23.387

您不应该扩展 Activity，只需传入一个上下文即可获取 locationManager。无论如何，您的应用程序崩溃了，因为您没有使用上下文参数调用构造函数。因此 cc 为空。顺便说一句 getSystemService(cc.LOCATION_SERVICE) 应该是 getSystemService(Context.LOCATION_SERVICE)

改变

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

到

```
locationManager = (LocationManager) cc.getSystemService(Context.LOCATION_SERVICE); 
```

# c# - Windows Phone NavigationService 跳转

> ID：15348340
> 
> 赞同：1
> 
> 时间：2013-03-11T20:50:16.920
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我有一些 xaml 页面，我们称它们为 1、2、3 等。

当从 1 导航到 2 时，整个页面在加载页面时会向上跳一点，然后恢复正常，如果从 2 导航到 3，也会发生同样的情况。

虽然使用 navigationservice.GoBack(); 向后导航时 方法，从 page3 到 page2 或 page2 到 page1 页面转换都是平滑的，中间没有跳转。

我遇到的跳跃只会在向前导航时发生，这可能是问题所在，因为它有点烦人，我想解决这个问题。

我如何向前导航的示例：

```
NavigationService.Navigate(new Uri("/page2.xaml", UriKind.Relative)); 
```

Xaml 布局：

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="Blablabla secret" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="More blablabla" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <ScrollViewer Height="500" HorizontalAlignment="Left" Margin="18,0,0,0" Name="scrollViewer1" VerticalAlignment="Top" Width="450" HorizontalScrollBarVisibility="Disabled" Grid.Row="1">
        <StackPanel Height="Auto" Name="stackPanel1" Width="450">
            <TextBlock Height="54" Name="textBlock1" Text="" TextWrapping="Wrap">
                <Underline FontSize="40">page2</Underline>
            </TextBlock>
            <TextBlock Height="400" Name="textBlock2" Text="Blablablabla" TextWrapping="Wrap" FontSize="26" />

        </StackPanel>
    </ScrollViewer>
    <my:AdControl AdUnitId="000000" ApplicationId="ffffff" Grid.Row="1" Height="80" HorizontalAlignment="Left" Margin="0,455,0,0" Name="adControl1" VerticalAlignment="Top" Width="480" />
    <Grid.Background>
        <ImageBrush ImageSource="/Blablaapplication;component/Images/Secret.png" />
    </Grid.Background>
</Grid>
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar.Back.rest.png" Text="Back" Click="Backbutton"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar.next.rest.png" Text="Next" Click="Nextbutton"/>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:07:45.593

您是在物理设备还是模拟器上进行测试？您使用的是什么版本的 SDK/OS？

然而，我个人之前从未遇到过这个问题，我记得一些开发人员认为这是解决这个问题的方法，他们强迫导航推送（`NavigationService.Navigate`）通过核心调度程序。

基本上：

```
Dispatcher.BeginInvoke(() =>
    {
        NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.Relative));
    }); 
```

# asp.net - 未设置 asp 表单身份验证 cookie 域

> ID：15348343
> 
> 赞同：2
> 
> 时间：2013-03-11T20:50:24.243
> 
> 标签：asp.net, cookies, iis-7

我试图将 cookie 的域设置为 mysite.net，而不是无论我做什么，它都将 cookie 设置为 server.mysite.net 问题是我想在子域之间切换，这样我就可以做 server1.mysite。净 server2.mysite.net。

下面是我为 cookie 指定的行。

```
<pre>
<authentication mode="Forms">
      <forms timeout="120"   domain="mysite.net" cookieless="UseCookies" enableCrossAppRedirects="true" name=".ASPXAUTH" />
    </authentication>  
</pre> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:12:08.580

[https://stackoverflow.com/a/2088853/222427](https://stackoverflow.com/a/2088853/222427)

在 web.config 中的一行，您需要花费一周的时间来完成工作......

# android - 在 Android 应用程序中集成 Facebook 和 LinkedIn

> ID：15348346
> 
> 赞同：3
> 
> 时间：2013-03-11T20:50:35.490
> 
> 标签：android, facebook, linkedin, single-instance

我有一个集成了 Facebook 和 LinkdedIn 网络的应用程序。根据说明，为了集成 LinkedIn，我需要在我的清单中添加以下代码，在我的活动中：

```
<intent-filter>
   <action android:name="android.intent.action.VIEW" />
   <category android:name="android.intent.category.DEFAULT" />
   <category android:name="android.intent.category.BROWSABLE" />
   <data android:scheme="x-oauthflow-linkedin" android:host="callback" />
</intent-filter> 
```

[也可以在此处](https://github.com/alt236/LinkedIn-J-Test-Application---Android/blob/master/AndroidManifest.xml)找到示例。正如您在链接中看到的，我们还需要添加“ **android:launchMode="singleInstance"** ”行，否则在使用LinkedIn 登录后，将启动一个新的活动实例。

但是，当尝试从同一活动登录 Facebook 时，此实际行会导致来自 Facebook 登录活动 (!) 的以下错误：

**E/AndroidRuntime(7100)：原因：com.facebook.FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。**

所以现在，我不知何故被卡住了，因为删除**android:launchMode="singleInstance"**将使 Facebook 登录工作，但会导致 LinkedIn 登录启动我的活动的另一个实例，但如果我添加它，那么 Facebook 登录不起作用！

有谁知道如何解决这个问题？

谢谢，

迪米特里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:00:21.167

在阅读了一些文档之后，似乎用 singleTask 替换了 singleInstance 就可以了。虽然，我还没有弄清楚具体原因，但我将其发布给其他人以防万一有人需要它。我将尝试进一步挖掘并理解原因，但与此同时，如果有人能解释为什么这是有效的，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:25:55.430

[这个](https://code.google.com/p/socialauth-android/)sdk 可以让您轻松处理 facebook 和 linkedin。还使用有效的 url 进行链接回调。

# java - Java中的维特比算法

> ID：15348351
> 
> 赞同：5
> 
> 时间：2013-03-11T20:50:55.603
> 
> 标签：java, nlp, hidden-markov-models, viterbi

我正在学习 coursera NLP 课程，第一个编程任务是构建一个 Viterbi 解码器。我想我真的很接近完成它，但是有一些我似乎无法追踪的难以捉摸的错误。这是我的代码：

[http://pastie.org/private/ksmbns3gjctedu1zxrehw](http://pastie.org/private/ksmbns3gjctedu1zxrehw)

[http://pastie.org/private/ssv6tc8dwnamn2qegdvww](http://pastie.org/private/ssv6tc8dwnamn2qegdvww)

到目前为止，我已经调试了“教学”相关的功能，所以我可以说算法的参数被正确估计了。特别感兴趣的是 viterbi() 和 findW() 方法。我正在使用的算法的定义可以在这里找到：[http](http://www.cs.columbia.edu/~mcollins/hmms-spring2013.pdf) ://www.cs.columbia.edu/~mcollins/hmms-spring2013.pdf第 18 页。

我很难理解的一件事是，当 K = {1, 2} 时，我应该如何更新特殊情况的后向指针（在我的情况下，这是 0 和 1，因为我是零 -索引我的数组）分别在这些情况下我使用的参数是 q({TAGSET} | *, *) 和 q ({TAGSET} | *, {TAGSET})。

提示而不是用勺子喂的答案也将受到高度赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:17:18.060

这是 Yusuke Shunyama 的 viterbi 解码器的简单实现 =) [http://cs.nyu.edu/yusuke/course/NLP/viterbi/Viterbi.java](http://cs.nyu.edu/yusuke/course/NLP/viterbi/Viterbi.java)

```
/*
 * Viterbi.java
 * Toy Viterbi Decorder
 *
 * by Yusuke Shinyama <yusuke at cs . nyu . edu>
 *
 *   Permission to use, copy, modify, distribute this software 
 *   for any purpose is hereby granted without fee, provided 
 *   that the above copyright notice appear in all copies and
 *   that both that copyright notice and this permission notice
 *   appear in supporting documentation.
 */

import java.awt.*;
import java.util.*;
import java.text.*;
import java.awt.event.*;
import java.applet.*;

class Symbol {
    public String name;

    public Symbol(String s) {
    name = s;
    }
}

class SymbolTable {
    Hashtable table;

    public SymbolTable() {
    table = new Hashtable();
    }
    public Symbol intern(String s) {
    s = s.toLowerCase();
    Object sym = table.get(s);
    if (sym == null) {
        sym = new Symbol(s);
        table.put(s, sym);
    }
    return (Symbol)sym;
    }
}

class SymbolList {
    Vector list;

    public SymbolList() {
    list = new Vector();
    }
    public int size() {
    return list.size();
    }
    public void set(int index, Symbol sym) {
    list.setElementAt(sym, index);
    }
    public void add(Symbol sym) {
    list.addElement(sym);
    }
    public Symbol get(int index) {
    return (Symbol) list.elementAt(index);
    }
}

class IntegerList {
    Vector list;

    public IntegerList() {
    list = new Vector();
    }
    public int size() {
    return list.size();
    }
    public void set(int index, int i) {
    list.setElementAt(new Integer(i), index);
    }
    public void add(int i) {
    list.addElement(new Integer(i));
    }
    public int get(int index) {
    return ((Integer)list.elementAt(index)).intValue();
    }
}

class ProbTable {
    Hashtable table;

    public ProbTable() {
    table = new Hashtable();
    }
    public void put(Object obj, double prob) {
    table.put(obj, new Double(prob));
    }
    public double get(Object obj) {
    Double prob = (Double)table.get(obj);
    if (prob == null) {
        return 0.0;
    }
    return prob.doubleValue();
    }
    // normalize probability
    public void normalize() {
    double total = 0.0;
    for(Enumeration e = table.elements() ; e.hasMoreElements() ;) {
        total += ((Double)e.nextElement()).doubleValue();
    }
    if (total == 0.0) {
        return;     // div by zero!
    }
    for(Enumeration e = table.keys() ; e.hasMoreElements() ;) {
        Object k = e.nextElement();
        double prob = ((Double)table.get(k)).doubleValue();
        table.put(k, new Double(prob / total));
    }
    }
}

class State {
    public String name;
    ProbTable emits;
    ProbTable linksto;

    public State(String s) {
    name = s;
    emits = new ProbTable();
    linksto = new ProbTable();
    }

    public void normalize() {
    emits.normalize();
    linksto.normalize();
    }

    public void addSymbol(Symbol sym, double prob) {
    emits.put(sym, prob);
    }

    public double emitprob(Symbol sym) {
    return emits.get(sym);
    }

    public void addLink(State st, double prob) {
    linksto.put(st, prob);
    }

    public double transprob(State st) {
    return linksto.get(st);
    }
}

class StateTable {
    Hashtable table;

    public StateTable() {
    table = new Hashtable();
    }
    public State get(String s) {
    s = s.toUpperCase();
    State st = (State)table.get(s);
    if (st == null) {
        st = new State(s);
        table.put(s, st);
    }
    return st;
    }
}

class StateIDTable {
    Hashtable table;

    public StateIDTable() {
    table = new Hashtable();
    }
    public void put(State obj, int i) {
    table.put(obj, new Integer(i));
    }
    public int get(State obj) {
    Integer i = (Integer)table.get(obj);
    if (i == null) {
        return 0;
    }
    return i.intValue();
    }
}

class StateList {
    Vector list;

    public StateList() {
    list = new Vector();
    }
    public int size() {
    return list.size();
    }
    public void set(int index, State st) {
    list.setElementAt(st, index);
    }
    public void add(State st) {
    list.addElement(st);
    }
    public State get(int index) {
    return (State) list.elementAt(index);
    }
}

class HMMCanvas extends Canvas {
    static final int grid_x = 60;
    static final int grid_y = 40;
    static final int offset_x = 70;
    static final int offset_y = 30;
    static final int offset_y2 = 10;
    static final int offset_y3 = 65;
    static final int col_x = 40;
    static final int col_y = 10;
    static final int state_r = 10;
    static final Color state_fill = Color.white;
    static final Color state_fill_maximum = Color.yellow;
    static final Color state_fill_best = Color.red;
    static final Color state_boundery = Color.black;
    static final Color link_normal = Color.green;
    static final Color link_processed = Color.blue;
    static final Color link_maximum = Color.red;

    HMMDecoder hmm;

    public HMMCanvas() {
    setBackground(Color.white);
    setSize(400,300);
    }

    public void setHMM(HMMDecoder h) {
    hmm = h;
    }

    private void drawState(Graphics g, int x, int y, Color c) {
    x = x * grid_x + offset_x;
    y = y * grid_y + offset_y;
    g.setColor(c);
    g.fillOval(x-state_r, y-state_r, state_r*2, state_r*2);
    g.setColor(state_boundery);
    g.drawOval(x-state_r, y-state_r, state_r*2, state_r*2);
    }

    private void drawLink(Graphics g, int x, int y0, int y1, Color c) {
    int x0 = grid_x * x + offset_x;
    int x1 = grid_x * (x+1) + offset_x;
    y0 = y0 * grid_y + offset_y;
    y1 = y1 * grid_y + offset_y;
    g.setColor(c);
    g.drawLine(x0, y0, x1, y1);
    }

    private void drawCenterString(Graphics g, String s, int x, int y) {
    x = x - g.getFontMetrics().stringWidth(s)/2;
    g.setColor(Color.black);
    g.drawString(s, x, y+5);
    }

    private void drawRightString(Graphics g, String s, int x, int y) {
    x = x - g.getFontMetrics().stringWidth(s);
    g.setColor(Color.black);
    g.drawString(s, x, y+5);
    }

    public void paint(Graphics g) {
    if (hmm == null) {
        return;
    }
    DecimalFormat form = new DecimalFormat("0.0000");
    int nsymbols = hmm.symbols.size();
    int nstates = hmm.states.size();
    // complete graph.
    for(int i = 0; i < nsymbols; i++) {
        int offset_ymax = offset_y2+nstates*grid_y;
        if (i < nsymbols-1) {
        for(int y1 = 0; y1 < nstates; y1++) {
            for(int y0 = 0; y0 < nstates; y0++) {
            Color c = link_normal;
            if (hmm.stage == i+1 && hmm.i0 == y0 && hmm.i1 == y1) {
                c = link_processed;
            }
            if (hmm.matrix_prevstate[i+1][y1] == y0) {
                c = link_maximum;
            }
            drawLink(g, i, y0, y1, c);
            if (c == link_maximum && 0 < i) {
                double transprob = hmm.states.get(y0).transprob(hmm.states.get(y1));
                drawCenterString(g, form.format(transprob),
                         offset_x + i*grid_x + grid_x/2, offset_ymax);
                offset_ymax = offset_ymax + 16;
            }
            }
        }
        }
        // state circles.
        for(int y = 0; y < nstates; y++) {
        Color c = state_fill;
        if (hmm.matrix_prevstate[i][y] != -1) {
            c = state_fill_maximum;
        }
        if (hmm.sequence.size() == nsymbols && 
            hmm.sequence.get(nsymbols-1-i) == y) {
            c = state_fill_best;
        }
        drawState(g, i, y, c);
        }
    }
    // max probability.
    for(int i = 0; i < nsymbols; i++) {
        for(int y1 = 0; y1 < nstates; y1++) {
        if (hmm.matrix_prevstate[i][y1] != -1) {
            drawCenterString(g, form.format(hmm.matrix_maxprob[i][y1]),
                     offset_x+i*grid_x, offset_y+y1*grid_y);
        }
        }
    }

    // captions (symbols atop)
    for(int i = 0; i < nsymbols; i++) {
        drawCenterString(g, hmm.symbols.get(i).name, offset_x+i*grid_x, col_y);
    }
    // captions (states in left)
    for(int y = 0; y < nstates; y++) {
        drawRightString(g, hmm.states.get(y).name, col_x, offset_y+y*grid_y);
    }

    // status bar
    g.setColor(Color.black);
    g.drawString(hmm.status, col_x, offset_y3+nstates*grid_y);
    g.drawString(hmm.status2, col_x, offset_y3+nstates*grid_y+16);
    }
}

class HMMDecoder {
    StateList states;
    int state_start;
    int state_end;

    public IntegerList sequence;
    public double[][] matrix_maxprob;
    public int[][] matrix_prevstate;
    public SymbolList symbols;
    public double probmax;
    public int stage, i0, i1;
    public boolean laststage;
    public String status, status2;

    public HMMDecoder() {
    status = "Not initialized.";
    status2 = "";
    states = new StateList();
    }

    public void addStartState(State st) {
    state_start = states.size(); // get current index
    states.add(st);
    }
    public void addNormalState(State st) {
    states.add(st);
    }
    public void addEndState(State st) {
    state_end = states.size(); // get current index
    states.add(st);
    }

    // for debugging.
    public void showmatrix() {
    for(int i = 0; i < symbols.size(); i++) {
        for(int j = 0; j < states.size(); j++) {
        System.out.print(matrix_maxprob[i][j]+" "+matrix_prevstate[i][j]+", ");
        }
        System.out.println();
    }
    }

    // initialize for decoding
    public void initialize(SymbolList syms) {
    // symbols[syms.length] should be END
    symbols = syms;
    matrix_maxprob = new double[symbols.size()][states.size()];
    matrix_prevstate = new int[symbols.size()][states.size()];
    for(int i = 0; i < symbols.size(); i++) {
        for(int j = 0; j < states.size(); j++) {
        matrix_prevstate[i][j] = -1;
        }
    }

    State start = states.get(state_start);
    for(int i = 0; i < states.size(); i++) {
        matrix_maxprob[0][i] = start.transprob(states.get(i));
        matrix_prevstate[0][i] = 0;
    }

    stage = 0;
    i0 = -1;
    i1 = -1;
    sequence = new IntegerList();
    status = "Ok, let's get started...";
    status2 = "";
    }

    // forward procedure
    public boolean proceed_decoding() {
    status2 = "";
    // already end?
    if (symbols.size() <= stage) {
        return false;
    }
    // not started?
    if (stage == 0) {
        stage = 1;
        i0 = 0;
        i1 = 0;
        matrix_maxprob[stage][i1] = 0.0;
    } else {
        i0++;
        if (states.size() <= i0) {
        // i0 should be reinitialized.
        i0 = 0;
        i1++;
        if (states.size() <= i1) {
            // i1 should be reinitialized.
            // goto next stage.
            stage++;
            if (symbols.size() <= stage) {
            // done.
            status = "Decoding finished.";
            return false;
            }
            laststage = (stage == symbols.size()-1);
            i1 = 0;
        }
        matrix_maxprob[stage][i1] = 0.0;
        }
    }

    // sym1: next symbol
    Symbol sym1 = symbols.get(stage);
    State s0 = states.get(i0);
    State s1 = states.get(i1);

    // precond: 1 <= stage.
    double prob = matrix_maxprob[stage-1][i0];
    DecimalFormat form = new DecimalFormat("0.0000");
    status = "Prob:" + form.format(prob);

    if (1 < stage) {
        // skip first stage.
        double transprob = s0.transprob(s1);
        prob = prob * transprob;
        status = status + " x " + form.format(transprob);
    }

    double emitprob = s1.emitprob(sym1);
    prob = prob * emitprob;
    status = status + " x " + form.format(emitprob) + "(" + s1.name+":"+sym1.name + ")";

    status = status + " = " + form.format(prob);
    // System.out.println("stage: "+stage+", i0:"+i0+", i1:"+i1+", prob:"+prob);

    if (matrix_maxprob[stage][i1] < prob) {
        matrix_maxprob[stage][i1] = prob;
        matrix_prevstate[stage][i1] = i0;
        status2 = "(new maximum found)";
    }

    return true;
    }

    // backward proc
    public void backward() {
    int probmaxstate = state_end;
    sequence.add(probmaxstate);
    for(int i = symbols.size()-1; 0 < i; i--) {
        probmaxstate = matrix_prevstate[i][probmaxstate];
        if (probmaxstate == -1) {
        status2 = "Decoding failed.";
        return;
        }
        sequence.add(probmaxstate);
        //System.out.println("stage: "+i+", state:"+probmaxstate);
    }
    }
}

public class Viterbi extends Applet implements ActionListener, Runnable {
    SymbolTable symtab;
    StateTable sttab;
    HMMDecoder myhmm = null;
    HMMCanvas canvas;
    Panel p;
    TextArea hmmdesc;
    TextField sentence;
    Button bstart, bskip;
    static final String initialHMM =
    "start: go(cow,1.0)\n" + 
    "cow: emit(moo,0.9) emit(hello,0.1) go(cow,0.5) go(duck,0.3) go(end,0.2)\n" +
    "duck: emit(quack,0.6) emit(hello,0.4) go(duck,0.5) go(cow,0.3) go(end,0.2)\n";

    final int sleepmillisec = 100; // 0.1s

    // setup hmm
    // success:true.
    boolean setupHMM(String s) {
    myhmm = new HMMDecoder();
    symtab = new SymbolTable();
    sttab = new StateTable();

    State start = sttab.get("start");
    State end = sttab.get("end");
    myhmm.addStartState(start);

    boolean success = true;
    StringTokenizer lines = new StringTokenizer(s, "\n");
    while (lines.hasMoreTokens()) {
        // foreach line.
        String line = lines.nextToken();
        int i = line.indexOf(':');
        if (i == -1) break;
        State st0 = sttab.get(line.substring(0,i).trim());
        if (st0 != start && st0 != end) {
        myhmm.addNormalState(st0);
        }
        //System.out.println(st0.name+":"+line.substring(i+1));

        StringTokenizer tokenz = new StringTokenizer(line.substring(i+1), ", ");
        while (tokenz.hasMoreTokens()) {
        // foreach token.
        String t = tokenz.nextToken().toLowerCase();
        if (t.startsWith("go(")) {
            State st1 = sttab.get(t.substring(3).trim());
            // fetch another token.
            if (!tokenz.hasMoreTokens()) {
            success = false; // err. nomoretoken
            break;
            }
            String n = tokenz.nextToken().replace(')', ' ');
            double prob;
            try {
            prob = Double.valueOf(n).doubleValue();
            } catch (NumberFormatException e) {
            success = false; // err.
            prob = 0.0;
            }
            st0.addLink(st1, prob);
            //System.out.println("go:"+st1.name+","+prob);
        } else if (t.startsWith("emit(")) {
            Symbol sym = symtab.intern(t.substring(5).trim());
            // fetch another token.
            if (!tokenz.hasMoreTokens()) {
            success = false; // err. nomoretoken
            break;
            }
            String n = tokenz.nextToken().replace(')', ' ');
            double prob;
            try {
            prob = Double.valueOf(n).doubleValue();
            } catch (NumberFormatException e) {
            success = false; // err.
            prob = 0.0;
            }
            st0.addSymbol(sym, prob);
            //System.out.println("emit:"+sym.name+","+prob);
        } else {
            // illegal syntax, just ignore
            break;
        }
        }

        st0.normalize();    // normalize probability
    }

    end.addSymbol(symtab.intern("end"), 1.0);
    myhmm.addEndState(end);

    return success;
    }

    // success:true.
    boolean setup() {
    if (! setupHMM(hmmdesc.getText()))
        return false;

    // initialize words
    SymbolList words = new SymbolList();
    StringTokenizer tokenz = new StringTokenizer(sentence.getText());
    words.add(symtab.intern("start"));
    while (tokenz.hasMoreTokens()) {
        words.add(symtab.intern(tokenz.nextToken()));
    }
    words.add(symtab.intern("end"));
    myhmm.initialize(words);
    canvas.setHMM(myhmm);
    return true;
    }

    public void init() {
    canvas = new HMMCanvas();

    setLayout(new BorderLayout());
    p = new Panel();
    sentence = new TextField("moo hello quack", 20);
    bstart = new Button("  Start  ");
    bskip = new Button("Auto");
    bstart.addActionListener(this);
    bskip.addActionListener(this);
    p.add(sentence);
    p.add(bstart);
    p.add(bskip);
    hmmdesc = new TextArea(initialHMM, 4, 20);
    add("North", canvas);
    add("Center", p);
    add("South", hmmdesc);

    }

    void setup_fallback() {
    // adjustable
    State cow = sttab.get("cow");
    State duck = sttab.get("duck");
    State end = sttab.get("end");

    cow.addLink  (cow,  0.5);
    cow.addLink  (duck, 0.3);
    cow.addLink  (end,  0.2);
    duck.addLink (cow,  0.3);
    duck.addLink (duck, 0.5);
    duck.addLink (end,  0.2);   

    cow.addSymbol(symtab.intern("moo"), 0.9);
    cow.addSymbol(symtab.intern("hello"), 0.1);
    duck.addSymbol(symtab.intern("quack"), 0.6);
    duck.addSymbol(symtab.intern("hello"), 0.4);
    }

    public void destroy() {
        remove(p);
        remove(canvas);
    }

    public void processEvent(AWTEvent e) {
        if (e.getID() == Event.WINDOW_DESTROY) {
            System.exit(0);
        }
    }

    public void run() {
    if (myhmm != null) {
        while (myhmm.proceed_decoding()) {
        canvas.repaint();
        try {
            Thread.sleep(sleepmillisec);
        } catch (InterruptedException e) {
            ;
        }
        }
        myhmm.backward();
        canvas.repaint();
        bstart.setLabel("  Start  ");
        bstart.setEnabled(true);
        bskip.setEnabled(true);
        myhmm = null;
    }
    }

    public void actionPerformed(ActionEvent ev) {
    String label = ev.getActionCommand();

    if (label.equalsIgnoreCase("  start  ")) {
        if (!setup()) {
        // error
        return;
        }
        bstart.setLabel("Proceed");
        canvas.repaint();
    } else if (label.equalsIgnoreCase("proceed")) {
        // next
        if (! myhmm.proceed_decoding()) {
        myhmm.backward();
        bstart.setLabel("  Start  ");
        myhmm = null;
        }
        canvas.repaint();
    } else if (label.equalsIgnoreCase("auto")) {
        // skip
        if (myhmm == null) {
        if (!setup()) {
            // error
            return;
        }
        }
        bstart.setEnabled(false);
        bskip.setEnabled(false);
        Thread me = new Thread(this);
        me.setPriority(Thread.MIN_PRIORITY);
        // start animation.
        me.start();
    }
    }

    public static void main(String args[]) {
    Frame f = new Frame("Viterbi");
    Viterbi v = new Viterbi();
    f.add("Center", v);
    f.setSize(400, 400);
    f.show();
    v.init();
    v.start();
    }

    public String getAppletInfo() {
        return "A Sample Viterbi Decoder Applet";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:59:50.373

以下是一些建议：

1.  如果您对模型中如何发生转换有任何困惑，您应该画出 HMM 格。例如，您可以将到第一个隐藏状态的转换视为源自单个开始隐藏状态，因此 k=0 的后向指针必须始终指向此开始状态。在您的代码中，您可能不应该在 k=0 中循环隐藏状态`findW`（这似乎是正确的），但您可能应该为 k=1 循环。

2.  通常在 HMM 推理中乘以转换和发射概率会导致非常小的浮点值，这可能会导致数值错误。您应该添加对数概率而不是乘以概率。

3.  为了检查 viterbi 或向前向后的实现，我通常还会编写一个蛮力方法并比较每个方法的输出。如果蛮力和动态规划算法在短序列上匹配，那么这给出了一个合理的信心度量，即两者都是正确的。

# google-app-engine - Google App Engine 教程示例不起作用

> ID：15348358
> 
> 赞同：0
> 
> 时间：2013-03-11T20:51:36.163
> 
> 标签：google-app-engine, deployment, google-cloud-datastore

我将 Web 应用程序“Google App Engine 教程示例 1”（[http://googcloudlabs.appspot.com/codelabexercise1.html ）部署到网站](http://googcloudlabs.appspot.com/codelabexercise1.html)[http://templiba.appspot.com](http://templiba.appspot.com)的 GAE 。我可以访问该站点，但应用程序未将 Product 和 Item 值保存在 DataStore 中。当我在本地尝试时也会发生同样的情况。它有一个已知的修复方法吗？或者你能帮助我编写一个包含写入数据存储的代码的教程示例吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:23:32.823

Are you sure you made all the required modifications to the code provided as outlined in Step 4? When I migrated from Google App Engine for Python to Java, the Getting Started guide was very useful; it covers all the basic concepts starting from creating the Eclipse project while presenting the code in a easier way to understand (in my opinion) than the Code Labs which seem slighly outdated (broken links, etc).

*   [Getting Started](https://developers.google.com/appengine/docs/java/gettingstarted/)
*   [Datastore Overview within Getting Started](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)

# c# - 从表中删除sql中的行

> ID：15348374
> 
> 赞同：0
> 
> 时间：2013-03-11T20:52:24.610
> 
> 标签：c#, .net, sql, winforms

对不起标题，但我不知道如何命名它..

我正在使用 C# 并有一个 WinForms 应用程序我有 2 个表，每个表都有一个主键，这 2 个表是陌生人。这意味着我有第三张表连接它们。第三个表具有列：表的 A 主键和表的 B 主键。

我只想知道如果我从第三个表中删除一行，表A和B中的相关数据是否也会被删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:55:22.083

如果您使用该`ON DELETE CASCADE`选项创建了外键约束，那么是的，它将删除其他表中的相关行。

如果您在没有该选项的情况下创建了外键约束`ON DELETE CASCADE`，那么 DBMS 将完全阻止您删除原始行。

如果您没有创建外键约束，则只会删除原始行。

有关级联删除选项的示例用法，请参[见此 SO 答案](https://stackoverflow.com/a/6260736/786388)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:54:56.717

不，您的第三个表不只是关联表，它存储表 A 和 B 的引用。

但它会以其他方式具有不同的功能，如果表 A 中的记录被删除并且它在关联表 C 中有任何引用。根据您的级联选项，表 C 中的记录也将被删除。如果没有提到级联选项，则会给出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:55:52.167

由于外键约束，Sql Server 不允许您从第三个表中删除该行。您必须先从表 A 和 B 中删除引用第三个表的值，然后再从第三个表中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T20:55:10.200

不，因为第三张表是表a和表b的关联表，如果删除的是第三张表，则不会删除表a和表b的记录。

# assembly - 程序集 8086（实模式）中的堆栈错误（堆栈已满时打印字符）

> ID：15348376
> 
> 赞同：0
> 
> 时间：2013-03-11T20:52:30.983
> 
> 标签：assembly, printing, x86, stack, x86-16

所以我写了一个小程序，把一个大于 9 的数字写到屏幕上。但是一旦我将一个值压入堆栈，我就无法打印任何东西，直到堆栈为空。有没有办法解决这个问题？

这是代码：

```
print_int:          ; Breaks number in ax register to print it
    mov cx, 10
    mov bx, 0
    break_num_to_pics:
        cmp ax, 0
        je print_all_pics
        div cx
        push dx
        inc bx
        jmp break_num_to_pics
    print_all_pics:
        cmp bx, 0       ; tests if bx is already null
        je f_end
        pop ax
        add ax, 30h
        call print_char
        dec bx
        jmp print_all_pics

print_char:             ; Function to print single character to      screen
        mov ah, 0eh     ; Prepare registers to print the character
        int 10h         ; Call BIOS interrupt
        ret

f_end:              ; Return back upon function completion
    ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:30:03.227

您的代码中有 2 个错误。

第一个是你`dx`之前不归零`div cx`：

```
print_int:          ; Breaks number in ax register to print it
    mov cx, 10
    mov bx, 0
    break_num_to_pics:
    cmp ax, 0
    je print_all_pics

    ; here you need to zero dx, eg. xor dx,dx

    xor dx,dx       ; add this line to your code.

    div cx          ; dx:ax/cx, quotient in ax, remainder in dx.
    push dx         ; push remainder into stack.
    inc bx          ; increment counter.
    jmp break_num_to_pics 
```

`dx`问题是你在除法之前没有归零。第一次`div cx`，`dx`未初始化。下一次`div cx`达到`remainder:quotient`除以`10`，这没有多大意义。

另一个在这里：

```
print_char:         ; Function to print single character to      screen
    mov ah, 0eh     ; Prepare registers to print the character
    int 10h         ; Call BIOS interrupt
    ret 
```

您没有为 and 设置任何有意义的值`bl`，`bh`即使它们是 , 的输入寄存器 `mov ah,0eh`（`int 10h`参见[Ralf Brown 的中断列表](http://www.ctyme.com/rbrown.htm)）

```
INT 10 - VIDEO - TELETYPE OUTPUT
     AH = 0Eh
     AL = character to write
     BH = page number
     BL = foreground color (graphics modes only) 
```

当您`bx`用作柜台时，您需要将其存储在内部或外部`print_char`。例如，保存`bx`在里面`print_char`：

```
print_char:         ; Function to print single character to      screen
    mov ah, 0eh     ; Prepare registers to print the character

    push bx         ; store bx into stack
    xor bh,bh       ; page number <- check this, if I remember correctly 0
                    ; is the default page.
    mov bl,0fh      ; foreground color (graphics modes only)

    int 10h         ; Call BIOS interrupt

    pop bx          ; pop bx from stack
    ret 
```

# php - 解决javascript php登录系统

> ID：15348381
> 
> 赞同：0
> 
> 时间：2013-03-11T20:52:47.250
> 
> 标签：php, javascript, jquery, ajax, login

我使用 javascript 构建登录/注册系统以显示系统的特定 div，例如

第一个 div = 登录或注册的菜单选项

第二个 div = 取决于点击的内容（登录或注册）显示登录表单或注册表单

第三个 div = 显示用户成功注册/登录的时间

脚本如下所示：

html:

```
<article id="container">
            <div id="load-new" class="game_menu">
                <h1>LOAD/NEW</h1>
                <button id="new_but" type="button">New Game</button>
                <button id="load_but" type="button">Load Game</button>
            </div>
            <div id="reg" class="game_menu">
                <h1>REGISTER</h1>
                <form name="register" method="post" action="">
                    <label for="usernamesignup" class="uname">Your username</label>
                    <input id="usernamesignup" name="usernamesignup" required="required" type="text" placeholder="Username" />
                    <label for="emailsignup" class="youmail"> Your email</label>
                    <input id="emailsignup" name="emailsignup" required="required" type="email" placeholder="domain@mydomain.com"/>
                    <label for="passwordsignup" class="youpasswd">Your password </label>
                    <input id="passwordsignup" name="passwordsignup" required="required" type="password"/>
                    <label for="passwordsignup_confirm" class="youpasswd">Please confirm your password </label>
                    <input id="passwordsignup_confirm" name="passwordsignup_confirm" required="required" type="password"/>
                    <button id="reg_submit" type="button">Register</button>
                </form>
            </div>
            <div id="login" class="game_menu">
                <h1>LOGIN</h1>
                <form name="login" method="post" action="">
                    <label for="username" id="username_label">Username:</label>
                    <input type="text" name="username" id="username" value=""/>
                    <label for="password" id="password_label">Password:</label>
                    <input type="password" name="password" id="password" value=""/>
                    <button id="login_submit" type="button">Login</button>
                </form>
            </div>
            <div id="access" class="game_menu">
                <h1>ACCESS</h1>
                <button id="login_but" type="button">Login</button>
                <button id="reg_but" type="button">Register</button>
            </div>
            <canvas id="TBG" width="640" height="416">
                Please use a more up to date browser
            </canvas> 
```

javascript看起来像这样

主.js：

```
 //----------Login/Register Gui --------------
$('#load-new').hide();
$('#reg').hide();
$('#login').hide();

//create new instance of gui class
var ui = new Gui();

//if login_but is clicked do ui.login function
$('#login_but').click(ui.login);
//if reg_but is clicked do ui.register function
$('#reg_but').click(ui.register);
//if login_sumbit button is clicked do ui.login_ajax function
$("#login_submit").click(ui.login_ajax);

$("#reg_submit").click(ui.register_ajax); 
```

gui.js：

```
function Gui (){

var valid = 'true';
var invalid = 'false';

//hide access div, show login div
this.login = function()
{
    $('#access').hide();
    $('#login').show();
};

//hide access div, show register div
this.register = function()
{
    $('#access').hide();
    $('#reg').show();
};

//function to send login data to php script login.php
this.login_ajax = function()
{
    //username user inputted
    var username = $("#username").val();
    //password user inputted
    var password = $("#password").val();

    //inputted data made into JSON string
    var dataString = {"reg":invalid, "login":valid,  "username":username , 
    "password":password};

    //AJAX Request to login.php
    $.ajax({
        type:"POST",
        url:"PHP/class.ajax.php",
        data: dataString,
        dataType: 'JSON',
        success: function(success) {
            alert("Your are logged in");
            if(success == 'true'){
            $('#login').hide();
            $('#load-new').show();
            }
        },
        error: function(){
            alert("ERROR in AJAX");
        }

    });
};

this.register_ajax = function()
{
    var username_signup = $("#usernamesignup").val();
    var email_signup = $("#emailsignup").val();
    var password_signup = $("#passwordsignup").val();
    var password_signup_confirm = $('#passwordsignup_confirm').val();

    var dataString = {"reg":valid, "login":invalid, "username_signup":username_signup,
                                "email_signup":email_signup,
 "password_signup":password_signup, "password_signup_confirm":password_signup_confirm};

    $.ajax({
       type:"POST",
        url:"PHP/class.ajax.php",
        data: dataString,
        dataType: 'JSON',
        success: function(success) {
            alert("You are registered");
            if(success == 'true'){
                $('#reg').hide();
                $()
                $('#load-new').show();
            }
        },
        error: function(){
            alert("ERROR in AJAX");
        }
    });
} 
```

}

我使用 ajax 向 php 脚本发送请求以处理登录或注册。ajax 请求的脚本很简单，因此我可以在登录 php 或注册 php 中选择特定功能。

我想在我的 html 中有一个 are 来显示用户是否已登录，有点像 runescape 网站右上角的 are：[这里](http://www.runescape.com)。

现在我在我的 header.php 文件中尝试了这个 php：

```
if(isset($_POST['username'])){
$is_logged_in = '<div id = "user_box">Welcome '.$_POST['username'].'</div>';
}
else
 {
$is_logged_in = '<div id = "welcome_box">Welcome friend!</div>';
} 
```

但显然这不起作用，因为页面没有刷新即时使用 javascript 显示菜单的不同部分。

我的问题：

使用我现有的 javascript/php 系统实现这种效果的最实用的方法是什么？

我会像使用菜单 div 一样使用 javascript 隐藏/显示 div 吗？或者有没有我可以用来刷新页面而不会将我送回第一个菜单 div 的功能？

谢谢你的时间汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:17:26.213

If I'm understanding your question correctly your wanting to indicate to the user that they are logged in without reloading the page and by displaying a div in the top right corner.

That being the case you could create a hidden div with an absolute top right position which would be something like:

```
<div id="welcome" style="display:none; postion:absolute; top:0; float:right;">...</div> 
```

In the 'success:' portion of the ajax request above, add a call to a new js function that makes a separate ajax request to retrieve a json object containing the logged in users display name and any other information that you want to show. Using that json data you could then populate 'welcome' div accordingly and change it's display to block.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:59:52.877

现在，您仅从使用 ajax 调用的 php 脚本中返回一个值，您仅`true`用于成功登录或注册。

您可以做的是修改这些脚本以返回多个值。因此，除了`true`成功登录的值之外，您还发送用户名，然后在您的 javascript 中使用该用户名构建一个 html 块，以显示在您要显示用户名的顶部区域。

您已经在使用 json，因此您只需在 php 脚本中生成一个带有返回值的数组，并使用`echo json_encode($your_return_values);`它来将其发送到您的 javascript`success`变量。

顺便说一句，您可以使用 jquery / javascript 来替换和构建 html 的整个部分，您不需要在开始时将所有内容都放入只是为了隐藏它。

# r - R/shiny 中的多项选择框 - 添加滚动条

> ID：15348385
> 
> 赞同：11
> 
> 时间：2013-03-11T20:53:02.317
> 
> 标签：r, shiny

我构建了一个 R/shiny 网络应用程序。我想要一个多选框（我使用 checkboxGroupInput()，但对替代方案持开放态度）。但是，选项列表很长，我想将它包含在一个相对较小的选项框中（一次显示 5-6 个选项），并带有一个滚动条，可以滚动整个选项列表。

有没有办法做到这一点？最小的例子：

用户界面

```
library(shiny)
choices = paste("A",1:30,sep="_")

shinyUI(pageWithSidebar(

# Application title
headerPanel("my title"),
sidebarPanel(   
  checkboxGroupInput("inp", "choose any of the following", choices)
),
mainPanel(
   tableOutput("result")

)
)) 
```

服务器.R

```
library(shiny)
shinyServer(function(input, output) {
myInput <- reactive({
    input$inp
})
output$result <- renderTable({
x = myInput()
if(length(x)==0) {
x = "No Choice Made"
}
matrix(x,ncol=1)
})

}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T02:25:28.993

我发现 using`selectInput(..., multiple = TRUE)`可以解决问题。

# android - 在数字前的空白处拆分字符串

> ID：15348386
> 
> 赞同：1
> 
> 时间：2013-03-11T20:53:02.310
> 
> 标签：android, regex, split

我有几个字符串。这些是（示例）

```
 Phone 12345 aa / bb
  Phone is 12345 aa / bb
  Phone is this 12354 aa / bb 
```

我试图找到一个允许我在 android/java 上使用 string.split(regex) 函数的正则表达式，但我还没有找到任何真正能解决问题的方法。

我想要的是在电话号码之前的空白处拆分的字符串。在下面的列表中，[1] 是在空格之前返回的内容，而 [2] 是剩下的内容。

```
 [1]Phone[2]12345 aa / bb
  [1]Phone is[2]12345 aa / bb
  [1]Phone is this[2]12354 aa / bb 
```

我的大多数微弱尝试都删除了 12345 中的第一个数字 (1)。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:56:44.520

尝试这个：

```
String[] arr  = str.split(" (?=\\d)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:55:51.443

使用这个正则表达式模式：`\s+(?=\d)`

在这里解释演示：[http ://regex101.com/r/jY9eO4](http://regex101.com/r/jY9eO4)

它之所以有效，是因为它没有捕获数字，只是“向前看”以查看是否有数字。

# objective-c - 核心数据 - 单个实体的多个条目

> ID：15348387
> 
> 赞同：0
> 
> 时间：2013-03-11T20:53:02.943
> 
> 标签：objective-c, ios5, core-data, magicalrecord

所以在我的应用程序中，我有一个名为 Cards 的实体和另一个名为 Transactions 的实体。

Transaction 实体具有以下属性：Date、Location 和 Amount。因此，如果用户在 10 个地点消费，我需要在单张卡的交易中输入 10 个条目。

我刚开始使用 Core Data，它变得一团糟。

我还使用 MagicalRecord 来处理 Core Data。

我能够对卡片实体进行 CRUD、添加、更新等……一切都很好。

问题是，我需要将交易添加到卡中，但不知道如何从这种关系开始。如何将交易添加到卡中，然后获取包含所有交易的卡？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:01:57.433

如果我理解你的正确，那么你建立他们之间的关系。

Card -> Transaction 是一个多对多关系。有关此选项，请参见 xcode 中的右侧窗格。添加一个逆。总是添加一个逆。所以你有一个非多对多关系交易-> 卡对吗？每次交易只有一张卡？

其余的答案取决于您如何访问数据。我建议为每个实体创建一个模型类。你知道如何？单击实体，然后转到文件/新建/文件，选择核心数据，然后选择 NSManagedObjectSubclass，它将为您创建。此类具有添加相关项目的方法。

myTransaction.card = myCard;
分别 [myCard addTransactionsObject:myTransaction];

当然假设 myCard 和 myTransaction 是类，并且您的一对一关系被命名为 card 并且对多关系被命名为 transactions。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:04:54.400

`Card`只需设置从到实体的一对多关系`Transaction`，然后`[card addTransactionsObject:newTransaction]`使用该关系简单地获取您的所有（之前通过调用添加的）事务：`card.transactions`.

不要忘记添加从`Transaction`to的反比关系`Card`！ ![在此处输入图像描述](../Images/0c62963eb473b1149e3447f01846b8c7.png)

# c# - 从 C# 中的实例变量获取对象引用？

> ID：15348389
> 
> 赞同：2
> 
> 时间：2013-03-11T20:53:17.183
> 
> 标签：c#, wpf

我是 WPF 应用程序和 c# 的新手。我将解释我的情况：

我有一个名为的类`myObject`，它有一个类型的图像实例变量`Image` 在运行时，我想获得`image`类似的对象引用：

```
myObject obj = new myObject();

Image img = obj.getImage();//reference to obj's image variable; 
```

现在`img`我想得到对象`obj`的引用。我怎么得到这个？

编辑：下面是一个解决方案。

**伙计们！首先非常感谢您的所有帮助！我真的很感激！你们都摇滚！**

按照**Noob.net**的建议，每当我创建 myObject obj 时，我都会将 obj 引用存储在**img.Tag**属性中！

```
myObject obj = new myObject();
img.MouseLeftButtonDown += new MouseButtonEventHandler(img_MouseLeftButtonDown);
Image img = obj.getImage(); 
```

处理程序部分：

```
Image i = (Image)sender;
myObject otemp = (myObject)i.Tag;// refers to the same object from which img was created 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:05:42.863

如果您按照建议将`Image`和`myObject`放在`Dictionary`一起，那么您将度过一段糟糕的时光。您的图像将与字典一样长，并且可能不会及时处理。

那么，当您可以构建数据以*默认*跟踪引用时，为什么要使用数据结构来跟踪此映射呢？

如果您将映射*包装*在[View Model](http://en.wikipedia.org/wiki/Model_View_ViewModel)中，您会明白我的意思：

```
public class MyObjectViewModel : INotifyPropertyChanged
{
    private myObject obj;

    public Image Image
    {
        get;
        private set;
    }

    public MyObjectViewModel(myObject obj)
    {
        this.obj = obj;
        this.Image = obj.getImage();
    }

    public void SomethingThatMakesImageChange()
    {
        this.Image = obj.getImage();
        this.RaisePropertyChanged("Image");
    }

    // ... insert suitable INPC implementation ...
} 
```

这种方法有两个明显的优点：

1.  您的视图模型通常只存在与您的模型一样长的时间，这意味着重`Image`类只会在视图中存在必要的时间
2.  如果您需要适应`myObject`实例的实时更改，您可以使用您的视图模型来处理这些更改并`Image`相应地更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:57:48.260

您可以直接执行此操作的唯一方法是，如果您的`Image`类型具有对其所有者对象的引用。如果您谈论的是`Image`.NET 中内置的类型，那么就没有这样的属性。

您将不得不采取措施将每个对象的父对象记录在`Image`其他地方，以便以后再返回。`HashTable`一种常见的模式是在内存中维护一个`Image`对象是键，`MyObject`对象是值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T21:07:29.500

您可以使用 Tag 属性来存储有关您的 Image 实例的其他信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:09:02.763

我想我不明白，但这是我的答案：

```
public class MyObject
{
    private Image img;
    public Image Img
    {
        get { return img; }
        set { img = value; }
    }
    public MyObject()
    {
        Img = Image.FromFile("");
    }
}

public class Main
{
    MyObject obj = new MyObject();
    //obj.Img = Image.FromFile(""); //if u want
    Image image = obj.Img;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T20:56:48.743

您的`Image`类必须有一个`Parent`属性来保存对您的`myObject`实例的引用。然后，您必须确保在设置图像时`myObject`设置`Parent`属性。

现在，如果您不能或不会将`Parent`属性添加到`Image`类中，那么您唯一的选择是将 instance of`myObject`与 the进行比较`Image`以查看是否`myObject`包含它。如果你有 的集合`myObject`，那么使用 Linq 相当容易，但性能可能不是很好。

# jquery - 如何发送 AJAX 请求并接收（数据）？

> ID：15348392
> 
> 赞同：0
> 
> 时间：2013-03-11T20:53:33.907
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我如何拥有我的 ajax 功能

```
$(function() {
  $("form#new_user").click(function(e) { e.preventDefault();
      var dataString = $('#new_user').serialize();

     $.ajax({
      type: 'POST',
      url: '/user',
      data: dataString,
      success: function(data) { 
        $('#alertt').text(data);
        $('#alertt').fadeIn().delay(2000).fadeOut('slow');
      }
      });
      return false; 
```

然后在 php 方面，它只是做它的事情，然后`json_encode(whatever)`当它取得成功时：它可以将数据放入`<p>`像 Blah 一样成功的地方

我的表格：

```
<form accept-charset="UTF-8" action="/users" class="new_user" id="new_user" method="post"> 
```

--

但是现在在 Rails 上，我假设设置是相同的，但是要指向的数据是一样的，但是`url: '/users'`我如何设置要在 Rails 上发送回的消息，以便我可以将`<p>`文本设置为`User Created`这些行的长文本。希望我说得通谢谢。

例如

```
def create
if user.save?
sendmessagebacksomethinglike('User Created')
end
end 
```

我将如何发回消息以便我可以将它与（数据）一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:16:29.563

Try this for the JS,

```
$.ajax({
  type: 'POST',
  url: '/user',
  data: dataString,
  dataType: "json",
  success: function(data) {
    $('#alertt').text(data.message);
  }
}); 
```

and this for the controller action,

```
def create
  @item = Item.new(params)
  if @item.save
    render json: { message: "Successfully created." }.to_json, status: 201
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:06:22.350

我经常遇到两件事。

：部分，：文本

```
def create

    if user.save?

    render :text => "User Created!"

    end

end

$.ajax(
  success: function(data) {    
    $('#alertt').text(data);    
  }
  });
  return false; 
```

大多数情况下，我会在控制器中设置几个实例变量后渲染一个部分，然后获取该部分并使用 div 在 JS 中的 HTML 上绘制它。别管这个。**您正在寻找的是渲染：文本**

这是一个我认为可以帮助你的模型，

**看法**

```
<%= form_tag url_for(:controller => "do", 
                     :action => "something"),
                     :id => 'do',:method => 'post'  do %>

<% end %> 
```

**应用程序.js**

```
$(function() {

     $("form#do").submit(function() {  

      var data = $('form#do').serialize();

       $.post('/do_something',data, function(result){

        $("#done").hide().html(result).fadeIn(3000);

        });        

       return false;

      });

}); 
```

**路线.rb**

```
match '/do_something' => "do#something" #routing do_something to do controller, something action. 
```

**do_controller.rb**

```
def something

  render :text => 'did something'

end 
```

# python - 实例没有属性_pi

> ID：15348393
> 
> 赞同：1
> 
> 时间：2013-03-11T20:53:36.740
> 
> 标签：python, class, python-2.7, package, attributeerror

我正在尝试制作这样的 Python 模块：

```
class square:
    def _init_(self):
        self._length = 0
        self._perimeter = 0
        self._area = 0
    def setLength(self, length):
        self._length = float(length)
        self._perimeter = 0
        self._area = 0
    def getLength(self):
        return self._length
    def getPerimeter(self):
        if self._perimeter == 0:
            self._perimeter = float(self._length * 4)
        return self._perimeter
    def getArea(self):
        if self._area == 0:
            self._area = float(self._length * self._length)
        return self._area
class rectangle:
    def _init_(self):
        self._length = 0
        self._width = 0
        self._perimeter = 0
        self._area = 0
    def setLength(self, length):
        self._length = float(length)
        self._perimeter = 0
        self._area = 0
    def getLength(self):
        return self._length
    def setWidth(self, width):
        self._width = float(width)
        self._perimeter = 0
        self._area = 0
    def getWidth(self):
        return self._width
    def getPerimeter(self):
        if self._perimeter == 0:
            perim1 = float(self._length * 2)
            perim2 = float(self._width * 2)
            self._perimeter = float(perim1 + perim2)
        return self._perimeter
    def getArea(self):
        if self._area == 0:
            self._area = float(self._length * self._width)
        return self._area
class circle:
    def _init_(self):
        self._radius = 0
        self._diameter = 0
        self._circumference = 0
        self._pi = 3.14159265
    def setRadius(self, radius):
        self._radius = float(radius)
        self._diameter = float(self._radius * 2)
        self._circumference = 0
    def setDiameter(self, diameter):
        self._diameter = float(diameter)
        self._radius = float(self._diameter / 2)
        self._circumference = 0
    def getRadius(self):
        return self._radius
    def getDiameter(self):
        return self._diameter
    def getPi(self):
        return self._pi
    def getCircumference(self):
        if self._circumference == 0:
            self._circumference = float(self._diameter * self._pi)
        return self._circumference
class triangle:
    def _init_(self):
        self._side = []
        self._side[0] = 0
        self._side[1] = 0
        self._side[2] = 0
        self._side[3] = 0
        self._angle = []
        self._angle[0] = 0
        self._angle[1] = 0
        self._angle[2] = 0
        self._angle[3] = 0
        self._perimeter = 0
        self._area = 0
    def setSide(self, side, length):
        self._side[side] = float(length)
    def getSide(self, side):
        return self._side[side]
    def getPerimeter(self):
        if self._perimeter == 0:
            self._perimeter = side[1] + side[2] + side[3]
        return self._perimeter
    def setAngle(self, angle, measure):
        self._angle[angle] = float(measure)
    def getAngle(self, angle):
        if self._angle[angle] == 0:
            if angle == 1:
                angle1 = self._angle[2]
                angle2 = self._angle[3]
            elif angle == 2:
                angle1 = self._angle[1]
                angle2 = self._angle[3]
            elif angle == 3:
                angle1 = self._angle[1]
                angle2 = self._angle[2]
            anglet = angle1 + angle2
            angler = float(180) - anglet
            self._angle[angle] = angler
        return self.angle[angle] 
```

它是名为 Mathworks 的软件包的一部分。调用代码是这样的：

```
import mathworks as mw
mycircle = mw.shapes.circle()
mycircle.setDiameter(5)
circum = mycircle.getCircumference()
print circim 
```

当我尝试两次运行第二个模块时，我得到了这个：

```
Traceback (most recent call last):
  File "<string>", line 254, in run_nodebug
  File "<module1>", line 21, in <module>
  File "<module1>", line 17, in main
  File "C:\Python27\lib\site-packages\mathworks\shapes.py", line 70, in getCircumference
    self._circumference = float(self._diameter * self._pi)
AttributeError: circle instance has no attribute '_pi' 
```

怎么了？如果我`self._pi`用 3.14159265 替换它可以工作，但我需要它以另一种方式工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:56:04.467

您没有正确命名初始化程序，它的两端都需要*双下划线：*

```
def __init__(self): 
```

你需要为你的*所有*课程更正它。

因为您没有正确命名它们，所以当您创建类的实例时它们没有运行。

您将遇到的下一个问题是`triangle`初始化程序；您不能处理空列表中的索引。一口气创建整个列表：

```
def __init__(self):
    self._side = [0, 0, 0, 0]
    self._angle = [0, 0, 0, 0]
    self._perimeter = 0
    self._area = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:56:33.920

您的构造函数编写不正确。它应该是`__init__`，不是`_init_`，即双下划线。

因为你写错了，它没有被调用，所以当你实例化你的对象时没有创建这些属性。

# macos - 架构 x86_64 的未定义符号：“_yylval”，引用自 Mac OS 上的 _yylex

> ID：15348398
> 
> 赞同：4
> 
> 时间：2013-03-11T20:53:59.093
> 
> 标签：macos, bison, flex-lexer

我正在尝试 O'Reilly Flex & Bison 的一些示例。我尝试的第一个 Bison 和 Flex 程序在链接源时给了我下一个错误：

> 架构 x86_64 的未定义符号：“_yylval”，已引用
> 
> 从：
> 
> ```
>  _yylex in lex-0qfK1M.o 
> ```

由于我是 Mac 新手，我只是在尝试示例，所以我不知道这里出了什么问题。

l 文件：

```
/* recognize tokens for the calculator and print them out */
%{
#include "fb1-5.tab.h"
%}

%%
"+"     { return ADD; }
"-"     { return SUB; }
"*"     { return MUL; }
"/"     { return DIV; }
"|"     { return ABS; }
[0-9]+  { yylval = atoi(yytext); return NUMBER; }
\n      { return EOL; }
[ \t]   { /* Ignore whitespace */ }
.       { printf("Mystery character %c\n", *yytext); }
%% 
```

y 文件：

```
/* simplest version of calculator */
%{
#include <stdio.h>
%}
/* declare tokens */
%token NUMBER
%token ADD SUB MUL DIV ABS
%token EOL
%%
calclist: /* nothing */ matches at beginning of input
 | calclist exp EOL { printf("= %d\n", $1); } EOL is end of an expression
 ;
exp: factor default $$ = $1
 | exp ADD factor { $$ = $1 + $3; }
 | exp SUB factor { $$ = $1 - $3; }
 ;
factor: term default $$ = $1
 | factor MUL term { $$ = $1 * $3; }
 | factor DIV term { $$ = $1 / $3; }
 ;
term: NUMBER default $$ = $1
 | ABS term { $$ = $2 >= 0? $2 : - $2; }
 ;
%%
main(int argc, char **argv)
{
    yyparse();
}

yyerror(char *s)
{
    fprintf(stderr, "error: %s\n", s);
} 
```

命令行：

```
bison -d fb1-5.y
flex fb1-5.l
cc -o $@ fb1-5.tab.c lex.yy.c -ll 
```

我使用 -ll 而不是 -lfl 因为显然在 Mac os x 上， fl 库不存在。

输出：

```
Undefined symbols for architecture x86_64:
  "_yylval", referenced from:
      _yylex in lex-0qfK1M.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T05:11:32.627

我通过编译一个开始的 lex 文件引起了类似的错误

```
%{
#include "y.tab.h"
%} 
```

使用命令

```
gcc -ll lex.yy.c 
```

这有效：

```
gcc -ll y.tab.c lex.yy.c 
```

这是怎么回事？y.tab.h 中有一个声明

```
extern int yylval 
```

这允许 lex.yy.c 编译。但是，lex.yy.o 需要链接到包含 yylval 的目标文件，例如 y.tab.o

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:51:28.297

显然 O'Reilly 的 Flex & Bison 书充满了错误。

请参阅[http://oreilly.com/catalog/errataunconfirmed.csp?isbn=9780596155988](http://oreilly.com/catalog/errataunconfirmed.csp?isbn=9780596155988)

很奇怪，他们甚至不费心测试自己的例子......

部分问题在[未定义的对 yyparse (flex & bison) 的引用中](https://stackoverflow.com/questions/3298718/undefined-reference-to-yyparse-flex-bison)得到了解决，但不是全部。请参阅 errataunconfirmed 页面。

# javascript - 如何识别jquery mobile是否已经加载？

> ID：15348400
> 
> 赞同：1
> 
> 时间：2013-03-11T20:54:08.300
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在动态加载 jqm，我需要知道它在某些情况下是否已经加载。有没有办法知道 jqm 是否已加载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:55:04.860

```
if (jQuery.mobile) {  
  console.log("jQuery Mobile is loaded");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T20:58:03.377

您可以使用此代码片段进行检查

```
if($.mobile !== undefined){
   console.log('jQuery mobile loaded');
}else{
  //make your fall back;
} 
```

# mysql - mysql内部连接条件忽略重复的ID

> ID：15348403
> 
> 赞同：2
> 
> 时间：2013-03-11T20:54:19.243
> 
> 标签：mysql, duplicates, sum, inner-join

## 下面给出了表格列表。

**根据位置 [23,24,25,26,27] 中产品的点击次数总和，按降序排列商店 ID。**

> 给定 product_id = 8

* * *

链接商店位置

```
shop_id | location_id
---------------------
1       | 23
2       | 24
3       | 25
3       | 26
3       | 27 
```

* * *

products_clicks

```
shop_id | product_id | clicks
-----------------------------
1       | 8          | 1
2       | 7          | 3
2       | 8          | 87
3       | 8          | 21
3       | 8          | 9 
```

* * *

链接产品商店

```
product_id | shop_id
---------------------
 7         | 1
 8         | 1
 8         | 1
 8         | 2
 8         | 2
 8         | 1
 7         | 3
 8         | 3 
```

这是我尝试过的，

```
SELECT SUM(c.clicks) as no,
       s.shop_id
FROM  link_products_shops l
INNER JOIN products_clicks c
ON c.product_id = l.product_id
INNER JOIN link_shops_locations s
ON s.shop_id = c.shop_id // duplicate shop_ids gives wrong SUM
WHERE s.location_id IN (23,24,25,26,27)
GROUP BY s.shop_id
ORDER BY no DESC; 
```

**我的问题是，由于 link_shops_locations 表有 3 个 shop_id，因此预期的 SUM 乘以 3。我该如何解决这个问题？**link_shops_locations 的 INNER JOIN 条件与此有关吗？一点帮助将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:59:15.277

**[1]您在使用 products_clicks 的 INNER JOIN**中又错过了一个条件。

[2]你也忽略了`product_id`。看看这个查询。

[3]您在表格中插入`product_id=8 and shop_id=1`了 3 次。`link_products_shops`

```
 select shop_id, SUM(NoOfClicks) FROM(SELECT distinct c.shop_id, c.clicks AS NoOfClicks 
FROM  products_clicks c 
INNER JOIN link_products_shops l 
ON c.product_id = l.product_id 
AND c.shop_id = l.shop_id 
INNER JOIN link_shops_locations s 
ON s.shop_id = c.shop_id and s.shop_id = l.shop_id 
WHERE s.location_id IN (23,24,25,26,27) 
AND c.product_id = 8) AS TabShopCounters
GROUP BY shop_id
ORDER BY NoOfClicks DESC; 
```

SQL 小提琴 - [http://www.sqlfiddle.com/#!2/b22fe/8](http://www.sqlfiddle.com/#!2/b22fe/8)

# c - 使用外部结构时 XC8 中的冲突声明

> ID：15348408
> 
> 赞同：2
> 
> 时间：2013-03-11T20:54:51.713
> 
> 标签：c, embedded, pic18, mplab

我有一个结构变量，在 .c 文件中定义：

```
struct {
    int write_cursor;
    int read_cursor;
    message messages[10];
} out_messages = {0, 0}; 
```

为了使它在其他文件中可用，我有一个 .h 文件：

```
extern struct {
    int write_cursor;
    int read_cursor;
    message messages[10];
} out_messages; 
```

这适用于 Microchip C18 编译器。XC8 编译器给出错误：

```
communications.c:24: error: type redeclared
communications.c:24: error: conflicting declarations for variable "out_messages" (communications.h:50) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:24:17.667

符号不正确，您可以这样做：

```
typedef struct {
    int write_cursor;
    int read_cursor;
    message messages[10];
} Struct_out_messages;

extern Struct_out_messages out_messages; 
```

并在 .c 中进行初始化。

```
Struct_out_messages out_messages = {0, 0, {0}}; 
```

这在 XC16 中编译没有任何问题，希望在 XC8 上也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:18:42.770

如果您需要访问`struct`多个文件中的内容，您可以将头文件中的声明更改为：

```
struct out_messages_t {
    int write_cursor;
    int read_cursor;
    message messages[10];
};

extern struct out_messages_t out_messages; 
```

然后在您的 .c 文件中，定义并初始化：

```
struct out_messages_t out_messages = {0, 0}; 
```

（并包括标题）

# android - 如何将子项动态添加到可展开的列表视图中。？

> ID：15348412
> 
> 赞同：3
> 
> 时间：2013-03-11T20:55:03.807
> 
> 标签：android, parent-child, expandablelistview

例如，我有一个编辑文本和一个按钮。当按下按钮时，文本被添加到我的可扩展列表视图的第一组中，并且在其下方添加了以下每个项目。谢谢你。（如果您需要我目前拥有的代码，请索取。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T21:25:49.113

第一个您应该创建自己的自定义适配器。一旦创建一个这样的类。

```
public class ExpandableListParentClass{

    private Object parent;
    private ArrayList<Object> parentChildren;

    public ExpandableListParentClass() {
    }
    public ExpandableListParentClass(Object parent, ArrayList<Object> parentChildren) {
        this.parent = parent;
        this.parentChildren = parentChildren;
    }

    public Object getParent() {
        return parent;
    }

    public void setParent(Object parent) {
        this.parent = parent;
    }

    public ArrayList<Object> getParentChildren() {
        return parentChildren;
    }

    public void setParentChildren(ArrayList<Object> parentChildren) {
        this.parentChildren = parentChildren;
    }
} 
```

并创建您的适配器

```
public class ExpandableListAdapter extends BaseExpandableListAdapter implements Filterable{

    private LayoutInflater inflater;
    private ArrayList<ExpandableListParentClass<Object>> mParent;
    private View view;

    public ArrayList<Object> getMParent() {
        return mParent;
    }

    public ExpandableListAdapter(Context context,
         ArrayList<ExpandableListParentClass<Object>> parentList ) {
        this.mParent = parentList;
        this.inflater = LayoutInflater.from(context);

    }

    // counts the number of group/parent items so the list knows how many
    // times calls getGroupView() method
    public int getGroupCount() {
        return mParent.size();
    }

    // counts the number of children items so the list knows how many times
    // calls getChildView() method
    public int getChildrenCount(int parentPosition) {
        int size =0;
        if(mParent.get(parentPosition).getParentChildren() != null){
        size = mParent.get(parentPosition).getParentChildren().size();
        }
        return size;
    }

    // gets the title of each parent/group
    public Object getGroup(int i) {
        return mParent.get(i).getParent();
    }

    // gets the name of each item
    public Object getChild(int parentPosition, int childPosition) {
        return mParent.get(parentPosition).getParentChildren().get(childPosition);
    }

    public long getGroupId(int parentPosition) {
        return parentPosition;
    }

    public long getChildId(int i, int childPosition) {
        return childPosition;
    }

    public boolean hasStableIds() {
        return true;
    }

    // in this method you must set the text to see the parent/group on the list

    public View getGroupView(int parentPosition, boolean b, View view, ViewGroup viewGroup) {
        if (view == null) {
            view = inflater.inflate(R.layout.layout_listview, viewGroup, false);
        }

        return view;

    }

    // in this method you must set the text to see the children on the list

    public View getChildView(int parentPosition, int childPosition, boolean b, View view, ViewGroup viewGroup) {
        if (view == null) {
        view = inflater.inflate(R.layout.layout_listview, viewGroup, false);
        }

        // return the entire view
        return view;
    }

    public boolean isChildSelectable(int i, int i1) {
        return true;
    }

    }

 now fill to list

      List<ExpandableListParentClass> arrayParents = new ArrayList<ExpandableListParentClass>();
      ExpandableListParentClass item = new ExpandableListParentClass();
      item.setParent(yourParentItem);
      item.setParentChildren( yourChildList); 
```

之后当你需要添加孩子

```
ExpandableListView myExpList= (ExpandableListView) this.view.findViewById(R.id.yourExpListView);

ExpandableListAdapter adapter = 
        (ExpandableListAdapter) myExpList.getExpandableListAdapter();

( (ExpandableListParentClass)adapter.getMParent().get(0) ).getParentChildren().add(object);
//(change to get(0) which you parent want to get )
adapter.notifyDataSetChanged();
adapter.notifyDataSetInvalidated(); 
```

# python - 在 Google App Engine 中使用 db.PropertyReference

> ID：15348414
> 
> 赞同：1
> 
> 时间：2013-03-11T20:55:07.747
> 
> 标签：python, google-app-engine

我有两个模型：

```
class Person(db.Model):
  name = db.StringProperty()
  role = db.StringProperty(default = "", choices = ["Engineering", "Marketing",  "Care",     "Sales"])

class Item(db.Model):
  user_name = db.ReferenceProperty(Person)
  computer_type = db.StringProperty(default = "", choices = ['Dell Latitude E6500', 'Dell Latitude E5510', 'Dell Latitude E5500' ])
  hostname = db.StringProperty()
  serial  = db.StringProperty() 
```

我想使用 Person 模型中的 Name 作为 Item Model 中的 user_name 来存储它们，并将它们显示在网页上。

我的 get 看起来像这样：

```
class ItemPage(webapp.RequestHandler):
  def get(self):
    query_comp = db.GqlQuery("SELECT * FROM Item ORDER BY user_name")
    template_values = {
            'query_comp': query_comp
            }
    path = os.path.join(os.path.dirname(__file__), 'table.html')
    self.response.out.write(template.render(path, template_values)) 
```

table.html 看起来像这样：

```
{% for item in query_comp %}
<tr style='white-space: nowrap; overflow: hidden; text-overflow:ellipsis;'>
    <td>{{ item.fname }}</td>
    <td>{{ item.computer_type }}</td>
    <td>{{ item.hostname }}</td>
    <td>{{ item.serial }}</td>
</tr>
{% endfor %} 
```

我得到的错误是 AttributeError: 'unicode' object has no attribute 'has_key'

我很确定我的问题是我没有正确引用 Person 模型中的 name 对象，我目前只将 key 对象返回给 Item 模型，这就是我要打破的地方。我已经尝试过查看文档，但据我研究，它们与使用 Gql 查询无关。我想我必须将一个`Item.person.name`对象传递给查询，但我有点迷茫。求指导，谢谢。

# c++ - 在 Visual Studio 中显示图像未另存为资源

> ID：15348419
> 
> 赞同：2
> 
> 时间：2013-03-11T20:55:20.573
> 
> 标签：c++, winapi

我正在尝试显示一个图像，我通过`GetOpenFilename`. 这本身不是问题，我还尝试简单地将现有图像的 URL 从资源文件复制并粘贴到`LoadBitmap`函数中，并且我分配的 HBITMAP 为 NULL。我怎样才能使这项工作？

```
void GetUserSprite(HWND hwnd, HBITMAP &Image, HBITMAP &Mask)
{
using namespace std;
OPENFILENAME ofn;
char szFileName[MAX_PATH + 1];
ZeroMemory(&ofn, sizeof(ofn));
ofn.lStructSize = sizeof(ofn);
ofn.hwndOwner = hwnd;
ofn.lpstrFilter = "Bitmaps (*.JPG, *.BMP, *.DIB, *.gif, *.JPEG, *.jpe, *.png)\0*.jpg;*.bmp;*.jpeg;*.png";
ofn.lpstrFile = szFileName;
ofn.lpstrFile[0] = '\0';
ofn.nMaxFile = MAX_PATH;
ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY | OFN_PATHMUSTEXIST;
ofn.lpstrDefExt = "bmp";
if(GetOpenFileName(&ofn))
{
    bDefaultSprite = false;
    strImageURL = szFileName;
    Image = LoadBitmap(GetModuleHandle(NULL), strImageURL.c_str());
    if (Image == NULL)
    {
        MessageBox(hwnd, "Well, that sucks...", "", NULL);
    }
    Mask = CreateBitmapMask(Image, RGB(0,0,0));
    InvalidateRect(hwnd, NULL, TRUE);
    UpdateWindow(hwnd);
}
} 
```

# ruby-on-rails - 在代码的其他地方设计渲染符号 => 向上/以局部形式呈现

> ID：15348421
> 
> 赞同：6
> 
> 时间：2013-03-11T20:55:29.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise, ruby-on-rails-3.2

我刚开始使用 Devise 和 Rails3。我已经完成了身份验证，并且正在工作并了解基础知识。

到目前为止，在代表我的主页/首页的主页控制器中，我有两个链接，一个链接到 Register => sign_up，另一个链接根据登录/注销 => sign_in/sign_out 而变化。

但是我不想将我的用户重定向到登录页面。相反，我想在我的首页上显示我的登录表单。所以我将`devise/session/new`模板 int 分离为一个视图和一个 _form.html.erb 部分。

现在在我的主页视图中，我将登录表单呈现为：

```
<% if user_signed_in? %>
    Welcome: <b><%= current_user.username %> (<%= current_user.group.name %>)</b>
    <%= link_to "Logout", destroy_user_session_path, :method => 'delete' %>
<% else %>
    <%= render 'devise/sessions/form' %> // Rendering the partial here
    <%= link_to "Login", new_user_session_path %>
<% end %>
<hr> 
```

这是部分的代码：

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email, :autofocus => true %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
<% end %> 
```

我的错误如下：

```
NameError in Home#index

Showing devise/sessions/_form.html.erb where line #1 raised:

undefined local variable or method `resource' for #<#<Class:0x614ec68>:0x6157ff8>
Extracted source (around line #1):

1: <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
2:   <div><%= f.label :email %><br />
3:   <%= f.email_field :email, :autofocus => true %></div>
4: 
```

我明白为什么会发生错误。这是因为部分它没有被赋予资源属性。我使用`dump(resource)`了，结果发现它是一个用户模型/对象所以我在它之前添加了以下内容：

```
<% if @user %>
   <% resource = @user %>
<% end %> 
```

并在我的 Home 控制器索引方法中添加了以下内容：

```
def index
   @user = User.new
end 
```

然而，在那之后我得到了resource_name错误，结果证明它只是简单的`:user`，如果我设置了它，那么我会遇到一个问题，因为`devise_mapping.rememberable?`我不知道如何提供。

我想正确地做到这一点，所以我想避免我开始的混乱和不合逻辑的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T22:01:38.203

看看这个问题的答案：[在不同的控制器中设计表单](https://stackoverflow.com/questions/4081744/devise-form-within-a-different-controller?rq=1)

您尝试使用 Home 控制器呈现的表单依赖于 Devise 定义的助手，这些助手无法从非 Devise 控制器访问。

将必要的助手添加到 home_helper.rb 应该可以解决您的问题：

```
def resource_name
:user
end

def resource
@resource ||= User.new
end

def devise_mapping
@devise_mapping ||= Devise.mappings[:user]
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-30T12:59:46.213

我正在使用 Devise 3.5.1，我还必须添加 resource_class 才能让登录表单在不同的控制器上工作。

我将它添加到 application_helper.rb 所以它适用于我所有的控制器。

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
  @devise_mapping ||= Devise.mappings[:user]
end

def resource_class
  devise_mapping.to
end 
```

# database - CodeIgniter：多个数据库 - 在第二个数据库中访问数据库配置

> ID：15348423
> 
> 赞同：9
> 
> 时间：2013-03-11T20:55:31.870
> 
> 标签：database, codeigniter, multiple-databases

我一直在研究将多个数据库与 CodeIgniter 一起使用。如果我提前知道数据库是什么，那么我可以在配置文件中设置信息，然后调用我需要的任何数据库组。

但是，在我的情况下，我需要将该数据库信息存储在另一个数据库中。它是一种主数据库，其中包含有关客户的一般信息，包括存储客户数据的数据库和凭据。然后，该供应商可以随时添加客户，并将每个客户的数据隔离在不同的数据库中。

如何根据从 CodeIgniter 中的主数据库返回的值设置数据库和凭据，或者甚至有办法做到这一点？

谁能指出我正确的方向？提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T21:07:05.427

从文档（[https://www.codeigniter.com/user_guide/database/connecting.html](https://www.codeigniter.com/user_guide/database/connecting.html)）：

> 该函数的第一个参数可以选择用于从配置文件中指定特定的数据库组，**或者您甚至可以为配置文件中未指定的数据库提交连接值**。

**所以你会做这样的事情，用主**数据库中的值替换值：

```
$config['hostname'] = "localhost";
$config['username'] = "myusername";
$config['password'] = "mypassword";
$config['database'] = "mydatabase";
$config['dbdriver'] = "mysql";
$config['dbprefix'] = "";
$config['pconnect'] = FALSE;
$config['db_debug'] = TRUE;
$config['cache_on'] = FALSE;
$config['cachedir'] = "";
$config['char_set'] = "utf8";
$config['dbcollat'] = "utf8_general_ci";

$this->load->database($config); 
```

如果您需要维护与**主**数据库和**客户**数据库的连接，则将最后一行更改为：

```
$customer_db = $this->load->database($config, TRUE);

// to use the master database:
$this->db->query("SELECT * FROM my_table");

// to then use the customer database:
$customer_db->query("SELECT * FROM whatever"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T05:10:01.630

将主数据库设为默认数据库，将客户设为第二个数据库
$active_group = 'default'; $active_record = TRUE;

```
 $db['default']['hostname'] = '';
    $db['default']['username'] = '';
    $db['default']['password'] = '';
    $db['default']['dbdriver'] = '';
    $db['default']['dbprefix'] = '';
    $db['default']['pconnect'] = TRUE;
    $db['default']['db_debug'] = TRUE;
    $db['default']['cache_on'] = FALSE;
    $db['default']['cachedir'] = '';
    $db['default']['char_set'] = 'utf8';
    $db['default']['dbcollat'] = 'utf8_general_ci';
    $db['default']['swap_pre'] = '';
    $db['default']['autoinit'] = TRUE;
    $db['default']['stricton'] = FALSE;

    $db['secondDatabase']['hostname'] = '';
    $db['secondDatabase']['username'] = '';
    $db['secondDatabase']['password'] = '';
    $db['secondDatabase']['dbdriver'] = '';
    $db['secondDatabase']['dbprefix'] = '';
    $db['secondDatabase']['pconnect'] = TRUE;
    $db['secondDatabase']['db_debug'] = TRUE;
    $db['secondDatabase']['cache_on'] = FALSE;
    $db['secondDatabase']['cachedir'] = '';
    $db['secondDatabase']['char_set'] = 'utf8';
    $db['secondDatabase']['dbcollat'] = 'utf8_general_ci';
    $db['secondDatabase']['swap_pre'] = '';
    $db['secondDatabase']['autoinit'] = TRUE;
    $db['secondDatabase']['stricton'] = FALSE; 
```

您可以通过以下方式将第二个数据库加载到控制器或模型中

```
$DB2 = $this->load->database('secondDatabase', TRUE); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T09:29:54.930

/** 配置/数据库.php **/

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = '';
$db['default']['username'] = '';
$db['default']['password'] = '';
$db['default']['dbdriver'] = '';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = (ENVIRONMENT !== 'production');
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

/** 你的控制器或模型 **/

```
//by default the master database will be loaded and you can directly access db using      $this->db 
   $result = $this->db->query("SELECT * FROM `your_table`")->limit(1)->get()->result();

$config['dbxyz']['hostname'] = $result->hostname;
$config['dbxyz']['username'] = $result->username;
$config['dbxyz']['password'] = $result->password;
$config['dbxyz']['dbdriver'] = '';
$config['dbxyz']['dbprefix'] = '';
$config['dbxyz']['pconnect'] = TRUE;
$config['dbxyz']['db_debug'] = (ENVIRONMENT !== 'production');
$config['dbxyz']['cache_on'] = FALSE;
$config['dbxyz']['cachedir'] = '';
$config['dbxyz']['char_set'] = 'utf8';
$config['dbxyz']['dbcollat'] = 'utf8_general_ci';
$config['dbxyz']['swap_pre'] = '';
$config['dbxyz']['autoinit'] = TRUE;
$config['dbxyz']['stricton'] = FALSE;

//load database config
$this->config->load('database');

//Set database config dynamically        
$this->config->set_item('dbxyz', $config);

//Now you can load the new database using
$this->dbxyz = $this->load->database('dbxyz'); 
```

注意：有关更多详细信息，请参阅[配置类 Codeigniter 文档](http://ellislab.com/codeigniter/user-guide/libraries/config.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-26T11:44:04.800

在 application\config\database.php 中添加以下行

```
$db['mydb2']['hostname'] = 'localhost';
$db['mydb2']['username'] = 'root';
$db['mydb2']['password'] = '';
$db['mydb2']['database'] = 'ci2';
$db['mydb2']['dbdriver'] = 'mysql';
$db['mydb2']['dbprefix'] = '';
$db['mydb2']['pconnect'] = TRUE;
$db['mydb2']['db_debug'] = TRUE;
$db['mydb2']['cache_on'] = FALSE;
$db['mydb2']['cachedir'] = '';
$db['mydb2']['char_set'] = 'utf8';
$db['mydb2']['dbcollat'] = 'utf8_general_ci';
$db['mydb2']['swap_pre'] = '';
$db['mydb2']['autoinit'] = TRUE;
$db['mydb2']['stricton'] = FALSE; 
```

现在我们在控制器和模型中使用我们的第二个数据库，如下所示。

```
$CI = &get_instance();
$this->db2 = $CI->load->database('mydb2', TRUE);
$qry = $this->db2->query("SELECT * FROM employee");
print_r($qry->result()); 
```

我参考了[http://www.tutsway.com/use-multiple-db-connections-in-codeigniter.php 。](http://www.tutsway.com/use-multiple-db-connections-in-codeigniter.php)它对我有用。

# ios - 视图已加载但未加载 viewDidLoad

> ID：15348425
> 
> 赞同：1
> 
> 时间：2013-03-11T20:55:43.303
> 
> 标签：ios, xcode-storyboard

我有两个视图控制器：`BSViewController`和`BSotherViewController`. `BSViewController`有一个按钮，它是 segues to `BSotherViewController`。那部分工作正常，当我在模拟器上运行时，我可以看到一个 VC，然后是“另一个”VC。但是我有一个`NSLog(@"other");`in`BSotherViewController`没有`-viewDidLoad`在控制台中显示。控制台中显示的类似`NSLog(@"other");`in 。我怀疑问题是缺少一个，但我不知道它应该去哪里以及它应该如何在情节提要中链接。`BSViewController``-viewDidLoad``IBAction`

BSViewController.h

```
#import <UIKit/UIKit.h>

@interface BSViewController : UIViewController

@property (nonatomic) NSInteger number;
@end 
```

BSViewController.m

```
#import "BSViewController.h"

@interface BSViewController ()
@end
@implementation BSViewController
@synthesize number;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.number = 25;
    NSLog(@"number: %d", self.number);
}

@end 
```

BSotherViewController.h

```
#import <UIKit/UIKit.h>

@interface BSotherViewController : UIViewController
@property (nonatomic) NSInteger anumber;
@end 
```

BSotherViewController.m

```
#import "BSotherViewController.h"
#include "BSViewController.h"
@interface BSotherViewController ()

@end

@implementation BSotherViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"other number:");
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    BSViewController *view = [[BSViewController alloc] init];
    self.anumber = view.number;
    NSLog(@"other number: %d", self.anumber);
} 
```

![故事板](../Images/becb1de448d4390f3a2c921cdc21ee7b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:26:22.137

在情节提要中，第二个视图控制器是否设置为`BSotherViewController`？您可以通过将鼠标悬停在情节提要中的视图控制器图标上来进行验证。

![悬停](../Images/5cbbbc13e2e0265e3d6038cdf24fcab6.png)

如果不是，则单击它并转到身份控制器并输入。

![身份](../Images/f6dfbdf80708c3a210f7d5fa1de08f2c.png)

# redis - redis排行榜的唯一得分

> ID：15348426
> 
> 赞同：2
> 
> 时间：2013-03-11T20:55:45.903
> 
> 标签：redis

我正在使用redis创建一个排行榜，并试图找出一种处理获得相同高分的玩家的好方法（具有相同高分的玩家应该按照谁首先获得该高分来排序）

我曾想过做以下事情......

```
zadd leaderboard highscore.timestamp player_id.attempt_number 
```

但是，当我执行 zrevrange 时，时间戳显然会以错误的顺序排列。

示例输入：

```
zadd leaderboard 20.123 5.1
zadd leaderboard 20.125 5.2
zadd leaderboard 20.012 5.3
zadd leaderboard 21.024 5.4 
```

输出：

```
zrevrange leaderboard 0 -1
5.4
5.2
5.1
5.3 
```

期望的输出：

```
5.4
5.3
5.1
5.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:44:07.273

一种选择是`zadd leaderboard highscore.(Long.MAX_VALUE - timestamp) player_id.attempt_number`（将 Long.MAX_VALUE 更改为您的时间戳的合理最高可能值 - 带符号的 64 位 int 将存储大约 3 亿年的毫秒数，因此可能不需要）

编辑：不要忘记添加前导零:)

# c - 在 Linux 上 close() 会调用 fsync() 吗？

> ID：15348431
> 
> 赞同：11
> 
> 时间：2013-03-11T20:55:54.440
> 
> 标签：c, linux, unix

当我们调用`close(<fd>)`时，它会自动`fsync()`同步到物理媒体吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T20:57:16.000

它不是。调用`close()`不保证内容在磁盘上，因为操作系统可能推迟了写入。

作为旁注，请始终检查`close()`. 它会让您知道到那时为止的任何延迟错误。如果您想确保内容在磁盘上，请始终调用`fsync()`并检查其返回值。

要记住的一件事是后备存储是什么。有些设备可能会进行内部写入延迟，并且在某些情况下内容可能会丢失（尽管较新的存储媒体设备通常具有超级电容器来防止这种情况，或者禁用此功能的方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:59:20.410

不。

从[`man 2 close`](http://man7.org/linux/man-pages/man2/close.2.html#notes)

> 成功关闭并不能保证数据已成功保存到磁盘，因为内核延迟写入。文件系统在流关闭时刷新缓冲区并不常见。如果您需要确保数据是物理存储的，请使用 fsync(2)。（此时这将取决于磁盘硬件。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:00:46.217

来自[`man 2 close`](http://linux.die.net/man/2/close)：

> 成功关闭并不能保证数据已成功保存到磁盘，因为内核延迟写入。文件系统在流关闭时刷新缓冲区并不常见。如果您需要确保数据是物理存储的，请使用 fsync(2)。（此时这将取决于磁盘硬件。）

回答你的问题，**NO**，`close()`不保证`fsync()`

`close`只关闭进程的文件描述符并删除与进程关联的任何记录锁。

# javascript - Jison 解析器中的语法错误

> ID：15348432
> 
> 赞同：2
> 
> 时间：2013-03-11T20:55:54.943
> 
> 标签：javascript, bison, flex-lexer, jison

我正在尝试使用[Jison](http://zaach.github.com/jison/docs/)编写一个解析器来解析该`javap`工具的输出。这是我的 .jison 文件的内容：

```
%lex

%x classfile

%%

"Classfile"             { this.begin("classfile"); }

<classfile>\s+          { /* ignore whitespace */ }
<classfile>[^\n]+       { this.popState(); return 'CLASSFILE'; }

<INITIAL><<EOF>>        { return 'EOF'; }

/lex

%start root

%%

root
  : CLASSFILE EOF { return $1; }
  ; 
```

不幸的是，当我运行“jison javap.jison”时，我收到了这个错误：

```
undefined:5
case 0:"Classfile"             { this.begin("classfile"); }
                               ^
SyntaxError: Unexpected token {
    at Function (<anonymous>)
    at Object.buildActions (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\node_modules\jison-lex\regexp-lexer.js:118:12)
    at Object.RegExpLexer (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\node_modules\jison-lex\regexp-lexer.js:131:39)
    at Jison_Generator (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\jison.js:108:22)
    at (anonymous function) (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\util\typal.js:23:28)
    at new o.constructor (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\util\typal.js:77:70)
    at new Jison_Generator (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\jison.js:1578:20)
    at processGrammar (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\cli.js:87:21)
    at Object.exports.main (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\cli.js:61:56)
    at Object.<anonymous> (C:\Users\cdmck_000\AppData\Roaming\npm\node_modules\jison\lib\cli.js:105:13) 
```

我试过用替换`"Classfile"`但`\w+`它只是给我一个错误`\`而`\w+`不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:18:10.970

我将行尾从 Windows 格式转换为 UNIX 格式，问题就消失了。

# winhttp - BigCommerce API。如何使用 WInHTTP 进行连接

> ID：15348434
> 
> 赞同：2
> 
> 时间：2013-03-11T20:55:56.170
> 
> 标签：winhttp, bigcommerce

如何使用 WinHTTP 连接到 BigCommerce API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:10:42.373

我想你可能想看看 MSDN 上的示例代码。目前，Bigcommerce 没有基于 .NET 的客户端库。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383147(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383147(v=vs.85).aspx)

在显示的示例中，您可以将 [authenticationSite] 替换为 store_url，将用户名和密码替换为您的 API 凭据（例如 admin、apikey）

希望这可以帮助。

# wso2 - WSO2 ESB 发送到多个端点

> ID：15348435
> 
> 赞同：2
> 
> 时间：2013-03-11T20:55:57.497
> 
> 标签：wso2, wso2esb

是否可以从代理服务的**发送**中介内将消息发送到多个端点？

WSO2 ESB Send Mediator 文档中的此[链接](http://wso2.org/project/esb/java/4.0.3/docs/mediators/send.html)在语法一章下指出，*如果要将消息发送到一个或多个端点，则使用以下内容：*

```
<send>
    (endpointref | endpoint)+
</send> 
```

*其中 endpointref 令牌指的是以下内容：*

```
<endpoint key="name"/> 
```

我尝试在发送下包含两个端点，但第二个端点在保存代理服务时会自动删除（在 Developer Studio 中或直接在 ESB Stratos 界面中）。我确实去了 Send Mediator 的 Synapse[页面](http://synapse.apache.org/userguide/mediators.html#Send)，看看他们是否说了什么特别的东西，他们的格式显示：

```
(endpointref | endpoint)? 
```

现在假设这些字符代表正则表达式，？代表 0 次或 1 次，+ 表示 1 次或多次。WSO2 是否在 Synapse Send Mediator 之上实现了这个额外的“一个或多个端点”功能，或者它只是文档页面上的一个错误。如果他们这样做了，使其工作的确切语法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:03:34.480

实际上，您可以使用[Recipienlist 端点](http://docs.wso2.org/wiki/display/ESB450/Recipient+List+Endpoint)将单个消息发送到多个端点。在将收件人列表存储为 localentry 并将其提供为端点密钥之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:42:10.197

你可以这样做：

```
<send>
    <endpoint key="jmsMBendpoint1"/>
    </send>
                                     <send>
                                        <endpoint key="jmsMBendpoint2"/>
                                     </send> 
```

.我已经使用了这种方法并且正在为我工​​作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T12:31:25.637

您可以使用克隆调解器发送到多个端点，并指定相应的端点，如下面的配置所示。

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="send_to_all">
   <clone sequential="false">
      <target endpoint="endpoint1"/>
      <target endpoint="endpoint2"/>
      <target endpoint="endpoint3"/>     
   </clone>
   <drop/>
</sequence> 
```

# ios - UIBezierPath 中的 CGContextSaveGState 0x0

> ID：15348442
> 
> 赞同：2
> 
> 时间：2013-03-11T20:56:09.647
> 
> 标签：ios, objective-c, uitouch, uibezierpath

我正在尝试使用 Apples 方法来检测一个点是否在 UIBezierPath 上。然而，它返回一个“无效的上下文”。

正如您从 NSlog 中看到的，我正在传递一个 UIBezierPath 和 A 点来检查。就我而言，是一个接触点。

我不明白为什么。有人可以向我解释或指出正确的方向吗？

NSLOG -----

```
Path <UIBezierPath: 0x7f57110>
Contains point Path <UIBezierPath: 0x7f57110>
Touch point 425.000000 139.000000
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextAddPath: invalid context 0x0
<Error>: CGContextPathContainsPoint: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
NO 
```

**直接来自 Apples Documentation 关于如何确定路径中的点**

```
- (BOOL)containsPoint:(CGPoint)point onPath:(UIBezierPath *)path inFillArea:(BOOL)inFill {

    NSLog(@"contains point Path %@", path);
    NSLog(@"Touch point %f %f", point.x, point.y );

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPathRef cgPath = path.CGPath;
    BOOL    isHit = NO;
// Determine the drawing mode to use. Default to detecting hits on the stroked portion of the path.
    CGPathDrawingMode mode = kCGPathStroke;

    if (inFill) { // Look for hits in the fill area of the path instead.
        if (path.usesEvenOddFillRule)
            mode = kCGPathEOFill;
        else
            mode = kCGPathFill;
    }
 // Save the graphics state so that the path can be removed later.
    CGContextSaveGState(context);
    CGContextAddPath(context, cgPath);

    // Do the hit detection.
    isHit = CGContextPathContainsPoint(context, point, mode);

    CGContextRestoreGState(context);

    return isHit;
} 
```

**这是我的 touchesBegan 方法。我在 NSMutableArray 中有我的路径。我解析数组以检查我所有的路径，看看是否有任何被触及。**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

 CGPoint curPoint = [[touches anyObject] locationInView:self];
  for (int i = 0; i < [pathInfo count]; i++){
            NSArray *row = [[NSArray alloc] initWithArray:[pathInfo objectAtIndex:i]];
            UIBezierPath *path = [row objectAtIndex:0];

            NSLog(@"Path %@", path);
if ([self containsPoint:curPoint onPath:path inFillArea:NO]){
               NSLog(@"YES");
            } else {
                NSLog(@"NO");
            }

        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:04:29.403

**tl; dr：**您应该`CGPathContainsPoint( ... )`改用。

* * *

# 什么地方出了错

您的问题是您没有尝试获取它的上下文

```
CGContextRef context = UIGraphicsGetCurrentContext(); // <-- This line here... 
```

`UIGraphicsGetCurrentContext`如果存在有效的当前上下文，该方法将仅返回一个上下文。两个主要的例子是

1.  内部`drawRect:`（上下文是您正在绘制的视图）

2.  在您自己的图像上下文中（当您使用`UIGraphicsBeginImageContext()`以便可以使用 Core Graphics 绘制图像时（也许您将其传递给代码的其他部分并将其显示在图像视图中或将其保存到磁盘））。

# 解决方案

我不知道您为什么要做所有额外的上下文工作，保存和恢复状态等。我似乎错过了简单的方法`CGPathContainsPoint()`。

```
BOOL isHit = CGPathContainsPoint(
                                 path.CGPath,
                                 NULL,
                                 point,
                                 path.usesEvenOddFillRule
                                 ); 
```

### 编辑

如果您想点击测试笔触路径，您可以使用`CGPathCreateCopyByStrokingPath()`来首先创建您正在抚摸的路径的新填充路径（给定一定的宽度等）。Ole Begemann在他的博客上对如何做到这一点有[很好的解释（包括一些示例代码）。](http://oleb.net/blog/2012/02/cgpath-hit-testing/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T21:15:54.863

该`CGContextPathContainsPoint`方法需要一个图形上下文，Apple 的示例代码从`UIGraphicsGetCurrentContext`. 但是，`UIGraphicsGetCurrentContext`只能`-[UIView drawRect:]`在调用设置 UI 图形上下文的函数内部或之后工作，例如`UIGraphicsBeginImageContext`.

您可以在没有图形上下文的情况下使用`CGPathCreateCopyByStrokingPath`（在 iOS 5.0 中添加）和`CGPathContainsPoint`描边副本执行命中测试：

```
static BOOL strokedPathContainsPoint(CGPathRef unstrokedPath,
    const CGAffineTransform *transform, CGFloat lineWidth,
    CGLineCap lineCap, CGLineJoin lineJoin, CGFloat miterLimit,
    CGPoint point, bool eoFill)
{
    CGPathRef strokedPath = CGPathCreateCopyByStrokingPath(unstrokedPath,
        transform, lineWidth, lineCap, lineJoin, miterLimit);
    BOOL doesContain = CGPathContainsPoint(strokedPath, NULL, point, eoFill);
    CGPathRelease(strokedPath);
    return doesContain;
} 
```

您必须决定要使用的线宽和其他描边参数。例如：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint curPoint = [[touches anyObject] locationInView:self];
    for (int i = 0; i < [pathInfo count]; i++){
        NSArray *row = [[NSArray alloc] initWithArray:[pathInfo objectAtIndex:i]];
        UIBezierPath *path = [row objectAtIndex:0];

        NSLog(@"Path %@", path);
        if (strokedPathContainsPoint(path.CGPath, NULL, 10.0f, kCGLineCapRound,
            kCGLineJoinRound, 0, curPoint, path.usesEvenOddFillRule))
        {
            NSLog(@"YES");
        } else {
            NSLog(@"NO");
        }
    }
} 
```

请注意，这`CGPathCreateCopyByStrokingPath`可能有点昂贵，因此您可能希望对路径进行一次描边，然后保存描边的副本，而不是每次需要测试点时都对它们进行描边。

# d3.js - D3 示例不工作

> ID：15348444
> 
> 赞同：2
> 
> 时间：2013-03-11T20:56:12.103
> 
> 标签：d3.js

我只是从这里的第一个示例中复制粘贴： [http ://www.recursion.org/d3-for-mere-mortals/](http://www.recursion.org/d3-for-mere-mortals/)

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>

<!--<script src="d3/d3.v3.js"></script>-->
<script src="/d3/d3.v3.js"></script>

<div>
    <script>

        var rectDemo = d3.select("#rect-demo").
                append("svg:svg").
                attr("width", 400).
                attr("height", 300);

        rectDemo.append("svg:rect").
                attr("x", 100).
                attr("y", 100).
                attr("height", 100).
                attr("width", 200);

        d3.selectAll("body").append(rectDemo) ;

    </script>
</div>

</body> 
```

它在页面上什么也不显示。我确定我在这里做了一些愚蠢的事情，但这是我的第一个例子，无法弄清楚发生了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:00:45.580

该脚本尝试在`svg`添加到（已经存在的）元素内的元素中绘制矩形`id="rect-demo"`。

`<div>`因此，您需要有一个带有适当的 HTML 元素（例如 a ） `id`：

```
<div id="rect-demo"> </div> 
```

看这个现场演示：http: [//jsbin.com/enisen/2/edit](http://jsbin.com/enisen/2/edit)

# svn - 在 VisualSVN 中设置访问级别

> ID：15348447
> 
> 赞同：1
> 
> 时间：2013-03-11T20:56:15.390
> 
> 标签：svn, visualsvn-server, windows-server

我在 Windows Server 2008 机器上运行 VisualSVN Server。我们有几个开发人员。我想将 VisualSVN 服务器配置为仅允许某些用户有权修改存储库设置、创建/删除存储库。

我联系了 VisualSVN Server 的支持并收到了以下回复：

> 默认情况下不允许用户管理 VisualSVN 服务器。VisualSVN Server 只能由属于 AD 组 的用户`"VisualSVN Server Admins"`和. 我建议你检查这些文章：`"Distributed COM Users"``Local Administrators`
> 
> *   [“远程服务器管理”](http://www.visualsvn.com/server/features/remote-admin/)
>     
>     
> *   [“配置远程管理”](http://www.visualsvn.com/support/topic/00025/)

由于其他原因，我们都需要成为此服务器上的本地管理员。我想出的唯一方法是在 VisualSVN 管理工具所在的目录上创建文件夹权限，只允许两个管理员执行权限。

还有其他人必须处理这个吗？有什么建议吗？我真的希望在 VisualSVN 管理工具中将用户配置为管理员或基本用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:09:54.390

由于您是服务器机器上本地管理员组的成员，您可以通过 VisualSVN 服务器管理器管理 VisualSVN 服务器。

要禁止管理访问，您可以为以下目录的用户或组设置拒绝完全控制权限：

*   存储库根目录（默认为“C:\Repositories\”），
*   %VISUALSVN_SERVER%（默认为“C:\Program Files (x86)\VisualSVN Server\”）。

请注意，服务器上的本地管理员组具有停止/启动/重新启动服务的能力。所以你可能想拒绝对 VisualSVN 服务器服务的完全控制；您可以通过组策略管理编辑器执行此操作：

1.  在组策略管理编辑器树中，转到**计算机配置 | 政策 | 安全设置 | 系统服务**。

2.  在详细信息窗格中，双击 VisualSVN 服务器。

3.  在“属性”窗口中，选择“定义此策略设置”，选择所需的启动模式并单击**“编辑安全性...”**。

# c# - datagridview 行单元格值

> ID：15348449
> 
> 赞同：0
> 
> 时间：2013-03-11T20:56:29.750
> 
> 标签：c#, winforms, datagridview

我在网上搜索了答案，但没有找到。这是 C# winforms。有可能做这样的事情：

```
private void datagridItems_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
int ID;
DataGridViewRow row = this.datagridItems.Rows[e.RowIndex];
DataGridViewCell cell = row.Cells[e.ColumnIndex];

if (row.Cells[2].Value == some value)
{
//set the value of a cell
row.Cells[4].Value = new value;
}
} 
```

我需要根据单元格[2] 中的一些其他标准清除单元格[4] 的现有内容。

谢谢你的帮助。瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:02:25.463

如果 DataGridView 是数据绑定的，则不应直接修改单元格的内容。相反，您应该修改数据绑定对象。您可以通过 DataGridViewRow 的 DataBoundItem 访问该对象：

```
MyObject obj = (MyObject)dataGridView.CurrentRow.DataBoundItem;
obj.MyProperty = newValue; 
```

如果您的绑定对象不支持 INotifyPropertyChanged 事件，请在之后刷新网格。

# python - 匹配除字母以外的任何内容 - 正则表达式

> ID：15348457
> 
> 赞同：3
> 
> 时间：2013-03-11T20:56:55.203
> 
> 标签：python, regex, python-2.7

如何匹配除字母之外的任何内容？我以为`[^a-z]+`会做，但不是真的。

我有这个字符串要搜索：

```
"price":"7.99","opt":{"1":[1.01,1.02]},"mixedId":0,"price":"8.99","opt":{"3":[1.03],"4":[1.04,1.05]} 
```

我想获得这些值`8.99`，`1.04,1.05`但无法匹配`7.99`

我确实喜欢这样：

```
'"price":"(.+?)","opt":\{"[^a-z]*"4":\[(.+?)]' 
```

但它什么也没找到。需要一些支持:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:17:03.173

Your fixed RegEx should look something like this:

`"price":"([\d\.]+?)","opt":\{"[^a-z]*"4":\[(.+?)\]`

Live demo here: [http://regex101.com/r/iU3oT7](http://regex101.com/r/iU3oT7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:06:40.820

以下正则表达式将匹配您想要的（数字和句点），包括“1”：

```
[\d\.]+ 
```

如果您只想匹配包含句点和两位小数的数字，您可以使用以下模式：

```
\d+\.\d{2} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:02:57.677

```
import json

def handle_duplicates(pairs):    
    d = {}
    for k, v in pairs:
        if k in d:
           d[k].append(v)
        else:
           d.setdefault(k,[]).append(v)
    return d

s = '{"price":"7.99","opt":{"1":[1.01,1.02]},"mixedId":0,"price":"8.99","opt":{"3":[1.03],"4":[1.04,1.05]}}'

d = json.loads(s, object_pairs_hook=handle_duplicates)
print d 
```

出去：

```
{u'mixedId': [0],
 u'opt': [{u'1': [[1.01, 1.02]]}, {u'3': [[1.03]], u'4': [[1.04, 1.05]]}],
 u'price': [u'7.99', u'8.99']} 
```

因为你现在有一个字典，你可以得到价目表，比如`d['price']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-12T10:43:52.097

要匹配不是字母的所有内容（如原始问题中所示），请使用此字符类，它是`\w`对[文档](https://docs.python.org/3/howto/regex.html)的修改：

```
[^a-zA-Z] 
```

从后续评论来看，听起来你对类似于@Mauritz Hansen 的这个字符类的第 1 组更感兴趣：

```
'\[([\d\.,]*)\] 
```

我很困惑您所说的“我也需要匹配：”是什么意思。此 Python 代码找到以下`1.01`价格`1.05`：

```
import re

txt = '"price":"7.99","opt":{"1":[1.01,1.02]},"mixedId":0,"price":"8.99","opt":{"3":[1.03],"4":[1.04,1.05]}'

pattern = '\\[([\d\\.,]*)\\]'

for m in re.finditer(pattern2, txt):
    print m.group(1) 
```

输出：

```
1.01,1.02
1.03
1.04,1.05 
```

# internet-explorer - IE8宽度条件

> ID：15348458
> 
> 赞同：0
> 
> 时间：2013-03-11T20:56:57.683
> 
> 标签：internet-explorer, width

我在 IE8 中工作。

我有一个宽度取决于内容的 div。宽度作为最小尺寸。但如果内容大于最小值，则宽度应为 123px。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <STYLE type="text/css">
.elements{
    max-width:200px;
    min-width:100px;
    background-color:blue;
}
</style>
</head>
<body>
<div class="elements">
 100px
</div>
<br/>
<div class="elements">
    Content too long, should be 200px
</div>
</body>
</html> 
```

[http://jsfiddle.net/bH7mZ/3/](http://jsfiddle.net/bH7mZ/3/)

第一个 div 应该是 100px，第二个是 200px。

# algorithm - 如何在边界框中平移和缩放点？

> ID：15348461
> 
> 赞同：0
> 
> 时间：2013-03-11T20:57:16.387
> 
> 标签：algorithm, math, point, pseudocode, bounding-box

我有许多实数形式的点*P。*我想在边界框（矩形）内平移和缩放所有这些点，该边界框从点（左上角）开始并延伸到点（右下角）。`(x, y)``x,y``(0,0)``(1000, 1000)`

为什么以下算法不会在该边界框中产生点？

```
for Point p in P:
    max = greatest(p.x, p.y, max)

scale = 1000 / max
for Point p in P:
    p.x = (p.x - 500) * scale + 500
    p.y = (p.y - 500) * scale + 500 
```

我担心这在负数`p.x`时不起作用。`p.y`

我还想保持点的“形状”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:05:52.663

1.  为您的点集找到所有 yMin、yMax、xMin、xMax、xDelta = xMax-xMin 和 yDelta = yMax-yMin。
2.  设置最大值 = 最大（xDelta，yDelta）。
3.  Foreach Point p set pX = (pX - xMin) * scale and pY = (pY - yMin) * scale

# c++ - math.h pow() 函数无法正常工作？

> ID：15348464
> 
> 赞同：1
> 
> 时间：2013-03-11T20:57:40.630
> 
> 标签：c++, primes, math.h, prime-factoring

我正在做一个个人项目，在这个项目中我需要确定 0 到 999 之间的所有[素数](http://en.wikipedia.org/wiki/Prime_power)。因为我不是特别擅长数学，所以我厌倦了下面这种笨拙的蛮力方法。

```
bool constexpr is_prime(int imp)
{
    return imp == 1 ? false : (imp % imp == 0 && imp % 1 == 0 && [&imp]{ for(int i = 2; i < imp; ++i)  if(imp % i == 0) return false; return true;}());
}

bool is_prime_power(int imp)
{
    for(int i = 1; i < 1000; ++i)
        if (is_prime(i))
            for (int j = 0; j < 100; ++j)
                if (imp == pow(i, j))
                    return true;
    return false;
} 
```

对于 0...30，输出应该是（根据[A000961](http://oeis.org/A000961)）：

```
1 2 3 4 5 7 8 9 11 13 16 17 19 
```

但是，这是我得到的：

```
1 2 3 4 5 7 8 9 11 16 19 
```

13和17消失到哪里去了？

由于我的方法找不到任何逻辑问题，因此我实现了自己的 pow() 函数。

```
double constexpr _pow(double base, double exp)
{
    return exp == 0 ? 1 : base*pow(base, exp - 1);
} 
```

现在，如果我从 math.h 调用我的 _pow() 而不是 pow() 版本，则输出显示为异常。我的实施错了吗？如果没有，来自 math.h 的 pow() 将无法正常工作。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:00:59.617

问题是`double`（以及一般的浮点数）并不精确，标准库中的数学函数也使用近似公式进行计算。例如，如果您调用`pow(2, 10)`，您可能会得到`1023.999375`（然后，根据上下文，可能会被截断为`1023`）。

`pow()`因此，您可以使用自己的整数**精确**实现，而不是使用标准库中的浮点函数：

```
int constexpr _pow(int base, int exp)
{
    return exp == 0 ? 1 : base * _pow(base, exp - 1);
} 
```

（或者如果需要，将其更改为您想要的任何整数类型`unsigned`或`long long`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:01:22.140

您永远不需要验证一个数字是否可以除自身以及一个数字是否可以除以一个数字。这是没用的：`imp % imp == 0 && imp % 1 == 0`

否则，您遇到的问题是因为 pow 在将其与整数进行比较时返回双精度或浮点数。由于舍入误差，比较可能会失败。我建议您实现自己的整数幂运算，以避免任何舍入错误。或者将 i 转换为 double 并使用与一些小的 esylon 容差进行比较。

# jquery - 使用 bind() 与 on() 的自定义事件

> ID：15348467
> 
> 赞同：1
> 
> 时间：2013-03-11T20:57:48.980
> 
> 标签：jquery

我遇到了添加自定义事件以检测源自键盘或鼠标事件的输入文本更改的代码：

[http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

代码有点旧，文档说用于`bind()`附加自定义事件，例如：

```
$('#exhibita').bind('hastext', function () {
  $('#exhibitaButton').removeClass('disabled').attr('disabled', false);
}); 
```

jQuery[文档](http://api.jquery.com/bind/)状态

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。对于早期版本，.bind() 方法用于将事件处理程序直接附加到元素。

我以为我可以将代码重写为：

```
$(document).on('hastext', '#exhibita', function () {
  $('#exhibitaButton').removeClass('disabled').attr('disabled', false);
}); 
```

但永远不会触发事件处理程序。

**问题**

*   我在使用 时犯了错误`on()`吗？
*   是否必须重写提供自定义事件的代码以支持`on()`？如果是这样，必须改变什么？
*   被`bind()`记录为在未来版本的 jQuery 中删除的候选者？我没有在文档中看到折旧警告，但我知道`live()`并`die()`已从 1.9 中删除...
*   是否有一种面向未来的方式来使用这些自定义事件而无需重写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:06:15.547

您在`on`此处使用的方式是创建偶数委托。这基本上相当于旧的 jquery `live`。

此自定义事件可能没有正确冒泡。试试这个：

```
$('#exhibita').on('hastext', function () { 
```

如果绑定有效，这将有效。

# asp.net - Response.Redirect 使用查询字符串

> ID：15348469
> 
> 赞同：2
> 
> 时间：2013-03-11T20:57:53.663
> 
> 标签：asp.net, vb.net, ms-access, query-string, response.redirect

好的，所以我刚刚编写了自己的“将一本书添加到数据库”ASP.net 页面，如下所示：

> ```
> <div class="addbook"><br />If you feel that we&#39;ve forgotten a book
> that you love, please fill out this form 
> below to help us keep the site fresh and dynamic!
> <h3>Title:</h3><asp:TextBox ID="tb_booktitle" runat="server"></asp:TextBox>
> <h3>Author:</h3><asp:TextBox ID="tb_bookauthor" runat="server"></asp:TextBox>
> <h3>Publication Date:</h3><asp:TextBox ID="tb_bookpubyear" runat="server" ></asp:TextBox>    <asp:CompareValidator
> ID="CompareValidatorTextBox1" runat="server"
> ControlToValidate="tb_bookpubyear"
> Type="Date"
> Operator="DataTypeCheck" 
> ErrorMessage="Date must be in the DD/MM/YYYY format)" ForeColor="Red"
> />
> <h3>Number of Pages:</h3><asp:TextBox ID="tb_bookpages" runat="server"></asp:TextBox><asp:RangeValidator ID="RangeValidator1" runat="server" 
>     ControlToValidate="tb_bookpages" 
>     ErrorMessage="Please enter a number." ForeColor="Red" 
>     MaximumValue="9999999" MinimumValue="1" SetFocusOnError="True"></asp:RangeValidator>
> 
> <h3>Publisher:</h3><asp:TextBox ID="tb_publisher" runat="server"></asp:TextBox>
> <h3>Book Cover:</h3>
> <asp:FileUpload ID="fu_picture" runat="server" />
> <h3>Your Rating:</h3>
> <p>    
>     <asp:RadioButtonList ID="rbl_Stars" runat="server" 
>     RepeatDirection="Horizontal" Width="142px">
>     <asp:ListItem>1</asp:ListItem>
>     <asp:ListItem>2</asp:ListItem>
>     <asp:ListItem>3</asp:ListItem>
>     <asp:ListItem>4</asp:ListItem>
>     <asp:ListItem>5</asp:ListItem>
> </asp:RadioButtonList>
> </p>
> <p>
>     <asp:Button ID="btn_submission" runat="server" Text="Upload Book!" />
> </p> 
> ```

以及背后的代码：

> ```
> Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
> 
> End Sub
> 
> Protected Sub btn_submission_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btn_submission.Click
>     Dim myGUID = Guid.NewGuid()
> 
>     Dim newFileName As String = myGUID.ToString() & ".jpg"
>     Dim fileLocationOnServerHardDisk = Request.MapPath("img/thumb") & "/" & newFileName
>     fu_picture.SaveAs(fileLocationOnServerHardDisk)
>     Dim oleDbConn As New OleDb.OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     Dim SqlString As String = "Insert into booklist(Title,Author,PublicationDate,Pages,Publisher,imgurl,AverageRating)
> Values (@f1,@f2,@f3,@f4,@f5,@f6,@f7)"
>     Dim cmd As OleDbCommand = New OleDbCommand(SqlString, oleDbConn)
>     cmd.CommandType = CommandType.Text
>     cmd.Parameters.AddWithValue("@f1", tb_booktitle.Text)
>     cmd.Parameters.AddWithValue("@f2", tb_bookauthor.Text)
>     cmd.Parameters.AddWithValue("@f3", tb_bookpubyear.Text)
>     cmd.Parameters.AddWithValue("@f4", tb_bookpages.Text)
>     cmd.Parameters.AddWithValue("@f5", tb_publisher.Text)
>     cmd.Parameters.AddWithValue("@f6", "img/thumb/" & newFileName)
>     cmd.Parameters.AddWithValue("@f7", rbl_Stars.SelectedValue)
>     oleDbConn.Open()
>     cmd.ExecuteNonQuery()
>     Response.Redirect("detail.aspx?ID={0}")
> 
> End Sub
> 
> Protected Sub rbl_Stars_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles rbl_Stars.SelectedIndexChanged
> 
> End Sub 
> End Class 
> ```

正如您在上面的代码中看到的那样，一旦建立了与数据库的连接，我想使用查询字符串重定向到 detail.aspx（这是一个显示来自数据库和相关内容的单个书籍记录的页面）显示刚刚添加的记录。但我收到这样的错误：

> 输入字符串的格式不正确。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.FormatException：输入字符串的格式不正确。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [FormatException: 输入字符串格式不正确。]
> System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +10722195 System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info ) +145
> System.String.System.IConvertible.ToInt32(IFormatProvider provider) +46 System.Convert.ChangeType(Object value, TypeCode typeCode, IFormatProvider provider) +297
> System.Web.UI.WebControls.Parameter.GetValue(Object value, String defaultValue, TypeCode type, Boolean convertEmptyStringToNull, Boolean ignoreNullableTypeChanges) +126
> System.Web.UI.WebControls.Parameter.GetValue(Object value, Boolean ignoreNullableTypeChanges) +63
> System.Web.UI.WebControls.Parameter.get_ParameterValue() +40
> System.Web.UI.WebControls.ParameterCollection.GetValues(HttpContext context, Control control) +247
> System.Web.UI.WebControls.SqlDataSourceView.InitializeParameters(DbCommand 命令, ParameterCollection 参数，IDictionary excludeList）+257 System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect（DataSourceSelectArguments 参数）+589
> System.Web.UI.DataSourceView.Select（DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调）+21
> System.Web.UI.WebControls .DataBoundControl.PerformSelect() +138
> System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +30
> System.Web.UI.WebControls.GridView.DataBind() +4
> System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +105 System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75 System.Web.UI.Control.EnsureChildControls() +83 System.Web.UI.Control .PreRenderRecursiveInternal() +42
> System.Web.UI.Control.PreRenderRecursiveInternal() +168
> System.Web.UI.Control.PreRenderRecursiveInternal() +168
> System.Web.UI.Control.PreRenderRecursiveInternal() +168
> System.Web.UI .Control.PreRenderRecursiveInternal() +168
> System.Web.UI.Page.ProcessRequestMain(布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint) +974

我将如何去实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:15:49.583

为什么不创建一个存储过程，其输出参数为新插入的书的 id，然后执行以下操作

```
If outputparam.value isnot nothing then
    Response.Redirect(String.Format("detail.aspx?ID={0}",outputparam.value)
end if 
```

请查看此网址以获取更多信息。

[输入和输出参数以及返回值](http://msdn.microsoft.com/en-us/library/59x02y99%28v=vs.71%29.aspx)

# macos - MacOSX中保存的窗口的全屏状态在哪里

> ID：15348473
> 
> 赞同：0
> 
> 时间：2013-03-11T20:58:04.503
> 
> 标签：macos, cocoa, nsuserdefaults

出于测试目的，我想指定我的应用程序是否应从其主窗口以全屏模式启动。MacOSX 必须在某个地方保持这个状态，因为它恢复了以前的状态，但我不知道在哪里。

我会猜到这个状态将存储在我的应用程序的默认数据库中，因为这是保存窗口大小和位置的地方，但情况似乎并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:01:58.677

有关已保存状态的信息在`~/Library/Saved Application State/<your app ID>.savedState`

# mysql - 具有多个相同字段的 MySQL LOAD XML

> ID：15348474
> 
> 赞同：1
> 
> 时间：2013-03-11T20:58:08.163
> 
> 标签：mysql, xml, load

我是 MySQL 新手，正在尝试使用 LOAD XML 来填充表。问题是 XML 不是我创建的，所以我无法制作它，所以当我阅读它时它是“完美”的格式。

以下是 XML 文件的示例：

```
<program id="1">
  <date>20130308</date>
  <category>Business</category>
  <category>Series</category>
</program> 
```

我有一个包含这些列的表：

```
program, date, category, category_2 
```

这是 MySQL 代码：

```
LOAD XML LOCAL INFILE 'C:/Test/BHTest.xml'
INTO TABLE bh_test
ROWS IDENTIFIED BY '<program>'; 
```

如果我使用 LOAD XML，我会在“category”字段中保存第二个类别，并且“category_2”字段为空。

那么，我该如何让两个类别出现在同一行？

非常感谢！

# c++ - 内联公共接口的方法

> ID：15348477
> 
> 赞同：1
> 
> 时间：2013-03-11T20:58:26.557
> 
> 标签：c++, compilation, linker, inline

通常我更喜欢完全拆分声明和定义，因此，我倾向于在其中定义内联方法，`.cpp`
我只是希望链接优化器在它用于不同的编译单元时内联它。

我的问题是：

1.  如果我知道我的链接器支持在链接时内联，是否真的不鼓励在 cpp 中内联？
2.  如果我想从另一个库调用该函数，我应该怎么做？（它会工作吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:04:05.903

如果你标记你的函数`inline`，那么你*必须*在每个使用它的翻译单元中提供一个定义。这与将定义放在单个`.cpp`.

如果你想把一个函数放在一个单一的`.cpp`你不应该声明它`inline`。如果你想内联函数，你必须依赖你的工具链，将合适的优化标志传递给你的编译器和链接器。您的工具链实际上将内联哪些功能是您必须试验的东西。

根据您的工具链，您可以使用特定于实现的属性来装饰您的函数，以指示您想要内联哪些函数。

# php - 本地服务器破坏字符编码

> ID：15348478
> 
> 赞同：2
> 
> 时间：2013-03-11T20:58:31.680
> 
> 标签：php, encoding, character-encoding, wamp, localserver

我需要好好学习所有这些编码的东西。因为这是我第三次在愚蠢的错误编码问题上浪费时间。这是问题所在：
我有一个简单的 php 文件。

*   文件格式为 UTF-8
*   如果我运行我的本地服务器，它会生成`ı => Ä±`和`ö => Ãœ`
*   如果我将扩展名重命名为 HTML，它可以完美地工作，所以问题出在本地服务器上。

为了纠正这个问题，我做了以下

1.  我读过[这个](https://stackoverflow.com/questions/7522956/strange-character-in-fresh-wamp-installation)，[这个](https://stackoverflow.com/questions/7609509/php-mysql-e-written-as-a?lq=1)和[这个](https://stackoverflow.com/questions/825939/php-character-encoding-problems)
2.  仔细检查文件编码，它是 UTF-8
3.  添加了元标记`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`
4.  在 php 标签中添加了标题：`header("Content-type:text/html; charset: UTF-8");`
5.  在 php 标签内添加了内部编码`mb_internal_encoding('UTF-8');`
6.  更正了*php.ini*文件中的行`default_charset = UTF-8`
7.  在 httpd.conf 文件中添加以下内容：`AddDefaultCharset utf-8`
8.  一切都是硬编码的，所以我不使用数据库，它与mysql编码无关

我正在使用 WAMP，机器是 Windows 7 英语。我完全筋疲力尽，因此，我真的需要帮助。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:35:22.173

最后我发现了问题。我写

```
header("Content-type:text/html; charset: UTF-8"); 
```

之后`Content-Type`，我们需要放`:`，但是在 Charset 之后我们需要放等号`=`，这对我来说非常令人沮丧。所以，

```
header('Content-Type: text/html; charset=utf-8'); 
```

解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:07:42.837

检查文档编码是否为没有 BOM 的 UTF-8

如果不起作用，请尝试`utf8_encode() and utf8_decode()`

**编辑**

```
$text = "A strange string to pass, maybe with some ø, æ, å characters."; 

foreach(mb_list_encodings() as $chr){ 
        echo mb_convert_encoding($text, 'UTF-8', $chr)." : ".$chr."<br>";    
 } 
```

# xpages - 使用按列值筛选从数据源获取数据？

> ID：15348481
> 
> 赞同：0
> 
> 时间：2013-03-11T20:58:53.330
> 
> 标签：xpages

我有一个列表框，我试图从 names.nsf 中的人员视图中获取数据。

计算人员视图的第一列并显示姓氏、名字。

下面的代码适用于我的列表框值，但它没有考虑按列值筛选中的值。基本上，下面的代码就像不存在按列过滤值属性一样。我知道按列值筛选属性正在工作，因为我用计算字段替换了页面上的重复控件，并且重复控件显示了异常值，但列表框显示了视图中第一个文档的值。

我必须解决的想法是：

使用 getAllDocumentsByKey 仅搜索人员视图，但是当我这样做时，我会丢失列值并且我需要重新计算值，如果可能的话，我想避免这种情况，以防列公式发生变化。

使用 FTSearch，但我真正需要做的是仅搜索第一列，我不知道仅搜索列的搜索运算符。有这样的事吗？

另一个想法是以某种方式使用重复控件的值作为我的列表框的值，但我猜这是不可能的。我有点想用范围变量做一些事情，但我还没有解决这个问题。

重复控制有效。如何让我的代码像重复控件一样循环遍历文档？

作为一个附带问题，无论如何将寻呼机绑定到数据源，而不是重复控制。

顺便说一句，我目前所做的是使用一些计算字段和一个重复控件来构建一个列表框，但我真正想做的是使用一个常规的 xpages 列表框控件。

这是代码：

```
 var doc:NotesDocument = view1.getFirstDocument();

while (doc != null && count<10)
{       
    var tmpDoc:NotesDocument = view1.getNextDocument(doc)
    ret.push(doc.getColumnValues()[1]);
    doc.recycle();
    count++;
    doc = tmpDoc;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:15:42.547

尝试使用 getAllEntriesByKey。这将使您可以访问列值（通过视图条目的 ColumnValue 属性）。

# sql - 与 SQL 进行数据匹配并分配身份 ID

> ID：15348487
> 
> 赞同：2
> 
> 时间：2013-03-11T20:59:10.397
> 
> 标签：sql, sql-server, identity, matching

如何编写一个匹配数据并为其生成和标识的查询。

例如：

```
记录ID | 姓名
1 | 约翰
2 | 约翰
3 | 史密斯
4 | 史密斯
5 | 史密斯
6 | 卡尔

```

我想要一个查询，它会在名称完全匹配后分配一个身份。

预期输出：

```
记录ID | 姓名 | ID
1 | 约翰 | 1X
2 | 约翰 | 1X
3 | 史密斯 | 1年
4 | 史密斯 | 1年
5 | 史密斯 | 1年
6 | 卡尔 | 1Z

```

注意：每个匹配项的 ID 都应该是唯一的。此外，它可以是数字或 varchar。

有人可以帮我吗？最主要的是分配ID。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:26:27.793

这个怎么样：

```
with temp as
(
select 1 as id,'John' as name
union
select 2,'John'
union
select 3,'Smith'
union
select 4,'Smith'
union
select 5,'Smith'
union
select 6,'Carl'
)

SELECT *, DENSE_RANK() OVER
(ORDER BY Name) as NewId
FROM TEMP
Order by id 
```

第一部分仅用于测试目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:29:52.273

这种结构似乎有效：

```
CREATE TABLE #Table 
    (
    Department VARCHAR(100),
    Name     VARCHAR(100)
    );

INSERT INTO #Table VALUES
('Sales','michaeljackson'),
('Sales','michaeljackson'),
('Sales','jim'),
('Sales','jim'),
('Sales','jill'),
('Sales','jill'),
('Sales','jill'),
('Sales','j');

WITH Cte_Rank AS
(
SELECT [Name],
       rw = ROW_NUMBER() OVER (ORDER BY [Name])
FROM   #Table 
GROUP BY [Name]
)
SELECT  a.Department,
        a.Name,
        b.rw
FROM    #Table a
        INNER JOIN Cte_Rank b 
        ON a.Name = b.Name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:09:00.660

请试试：

```
SELECT *,
Rank() over (order by Name ASC) 
FROM table 
```

# jpa - JPA EAGER fetch 仅在服务器重新启动时才有效

> ID：15348488
> 
> 赞同：0
> 
> 时间：2013-03-11T20:59:12.907
> 
> 标签：jpa, glassfish, fetch, restart, eager

大家晚上好，这是我在 Stack Overflow 上的第一篇文章。我最近才被介绍到 Java 6 EE，尤其是作为 JSF 2.1 框架的一部分的 JPA，我现在面临着一个奇怪的行为，我希望你能帮助我理解。在我们的项目（使用 NetBeans 7.2 开发）中，我们有几个一对多的关系，我们希望以与导航多对一相同的方式导航它们。事实是，相反，只有在重新启动应用程序服务器（Glassfish 3.1.2）之后，我们才能让它们按照我们的意愿工作，此外，这种行为只会持续到下一次部署；这意味着我们每次应用修改时都需要重新启动 Glassfish...这里有一些代码摘录可以帮助您了解我们的情况。

这表示我们的主要实体（Person），除其他外，它与 Email 和 Phone 具有一对多关系，与 AccountType 具有多对一关系

```
@Entity
public class Person implements Serializable {
    //
    //private non-collection fields including id 
    //

    @OneToMany(mappedBy="person", fetch=FetchType.EAGER)
    private Collection<Email> personEmails;

    @OneToMany(mappedBy="person")
    private Collection<Phone> personPhones;

    @ManyToOne
    private AccountType accountType;

    //
    // getter and setter, hashCode, isEqual and toString
    //
} 
```

这些是电子邮件...

```
@Entity
public class Email implements Serializable {
    //
    //private non-collection fields including id 
    //

    private String address;

    @ManyToOne
    private Person person;

    //
    // getter and setter, hashCode, isEqual and toString
    //
} 
```

... 电话 ...

```
@Entity
public class Phone implements Serializable {
    //
    //private non-collection fields including id 
    //

    private String number;

    @ManyToOne
    private Person person;

    //
    // getter and setter, hashCode, isEqual and toString
    //
} 
```

...和帐户类型

```
@Entity
public class AccounType implements Serializable {
    //
    //private non-collection fields including id 
    //

    private String name;

    @OneToMany(mappedBy="accountType")
    private Collection<Person> persons;

    //
    // getter and setter, hashCode, isEqual and toString
    //
} 
```

然后，我们设置了一个示例页面来测试 Person 中的三个字段是如何实际获取的。

这代表 xhtml 页面...

```
<h:form id="form">

    <h:panelGrid columns="2">

        <h:outputLabel value="forename" />
        <h:outputLabel value="#{meBean.currentUser.forename}" />

        <h:outputLabel value="emails" />
        <h:outputLabel value="#{meBean.currentUser.personEmails.size()}" />

        <h:outputLabel value="phones" />
        <h:outputLabel value="#{meBean.currentUser.personPhones}" />

        <h:outputLabel value="accountType" />
        <h:outputLabel value="#{meBean.currentUser.accountType.name}" />

    </h:panelGrid>

</h:form> 
```

...这就是控制器

```
@ManagedBean
@RequestScoped
public class MeBean {

    @EJB
    private PersonFacade personFacade;
    private Person currentUser;

    public MeBean() {
        init();
    }

    @PostConstruct
    private void init() {
        // Hard-coding user details        
        try {
            this.currentUser = this.personFacade.getFromUsername("user1");
            this.currentUser.getPersonPhones().isEmpty();
        } catch (Exception e) {
        }
    }

    public Person getCurrentUser() {
        return currentUser;
    }

    public void setCurrentUser(Person currentUser) {
        this.currentUser = currentUser;
    }
} 
```

现在，我们得到的结果是我们所期望的，只有在我们重新启动应用程序服务器后立即访问该页面时。

```
forename    Alice
emails      2
phones      {[sums.groupa.entities.Phone[id=38]]}
accountType Student 
```

如果我们修改任何东西（除了视图）并保存，在不可避免的部署之后，结果就会不同。

```
forename    Alice
emails      0
phones      {[]}
accountType Student 
```

为什么会发生这种情况，我们该如何避免呢？

提前致谢。

股份公司

一些贡献者（我要感谢他们的快速回复）要求实现 PersonFacade。

```
public Person getFromUsername(String username)
    {
        try
        {
            Query q = em.createQuery("SELECT p FROM Person p LEFT JOIN FETCH p.personEmails WHERE UPPER(p.username) = :username");
            q.setParameter("username", username.toUpperCase());
            return (Person) q.getSingleResult();
        }
        catch (Exception ex)
        {
            Logger.getLogger(PersonFacade.class.getName()).log(Level.SEVERE, null, ex);
            return null;
        }
    } 
```

如您所见，我尝试按照建议使用 FETCH JOIN，但查询得到的结果太多：它应该只获取一个代表 Alice 的 Person 实例，并在 personEmails 字段中包含两个 Email 实例，但我怀疑它得到了两个不同的Person 的实例，每个实例都附加了不同的 Email 实例。

原始查询如下：

```
SELECT p FROM Person p WHERE UPPER(p.username) = :username 
```

再次感谢。

股份公司

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:29:44.613

我不知道您是如何编写 personFacade 并获得 Person 实体的。

但我猜你使用了查询。

如果您使用的是 JPQL，请尝试 fetch join。

# java - 如何设置最大tomcat gzip压缩大小？

> ID：15348489
> 
> 赞同：7
> 
> 时间：2013-03-11T20:59:14.333
> 
> 标签：java, tomcat, gzip

我正在配置 tomcat 以压缩基于文本的文件。我目前的配置有：

```
compression="on"
compressableMimeType="text/html,text/xml,text/plain,text/css,text/javascript,application/xml,application/x-javascript,application/json" 
```

但是，我注意到超过 60kb 的 javascript 文件没有被压缩。我错过了任何隐藏的设置吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T21:02:26.087

搜索[tomcat7 的文档](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)我找不到对`compressionMaxSize`. 像这样的唯一命令`compressionMinSize`旨在过滤掉任何小于定义值的文件的压缩。像这样：

```
compressionMinSize="2048" 
```

这是我的 server.xml 在压缩方面的样子：

```
compression="on"
compressionMinSize="2048"
noCompressionUserAgents="gozilla, traviata"
compressableMimeType="text/html,text/xml" 
```

实际上，有一些与此相关的隐藏文档可以解释您的经历：

> 注意：在使用压缩（节省带宽）和使用 sendfile 功能（节省 CPU 周期）之间需要权衡。如果连接器支持 sendfile 功能，例如 NIO 连接器，则使用 sendfile 将优先于压缩。**症状是大于 48 Kb 的静态文件将在未压缩的情况下发送。**您可以通过设置连接器的 useSendfile 属性来关闭 sendfile，如下所述，或者在默认 conf/web.xml 或 Web 应用程序的 web.xml 中的 DefaultServlet 配置中更改 sendfile 使用阈值。

因此，如果您想以 CPU 利用率为代价来节省带宽，您可以通过将此设置添加到 web.xml 来禁用此触发器（[参见此处](http://tomcat.apache.org/tomcat-7.0-doc/default-servlet.html)）：

```
<init-param>
    <param-name>sendfileSize</param-name>
    <param-value>96</param-value> <!-- value in KB where compression is turned off in the name of CPU utilization -->
</init-param> 
```

# css - 固定宽度浮动元素旁边的流体浮动元素

> ID：15348493
> 
> 赞同：0
> 
> 时间：2013-03-11T20:59:25.717
> 
> 标签：css, css-float

这是我的简单标记：

```
<div class="row">
  <div class="col fixed">Short text</div>
  <div class="col fluid">Longer text....</div>
</div> 
```

这是我的 CSS：

```
.row {
    padding: 20px;
}
.row:after {
    content: "";
    display: block;
    clear: both;
}

.col {
    float: left;
}
.col.fixed {
    width: 200px;
} 
```

我认为流畅的文本会出现在固定列旁边（在其右侧），然后会折回。这不是实际发生的情况。相反，整个`.col.fluid`下降到另一列下，好像没有浮动。

[演示在这里](http://jsfiddle.net/7cMQg/1/)。

为什么这不起作用（这不是花车应该如何工作的）？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:10:48.083

一种方法是使用这个 CSS：

```
.row {
    background: rgba(0, 128, 0, .2);
    padding: 20px;
    display:table;
}
.col {
    display:table-cell;
}
.col.fixed {
    width: 200px;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/7cMQg/5/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:15:57.757

要获得您想要的效果，您需要将浮动固定框放置在流畅的块级 div 中。

请参阅以下内容：http: [//jsfiddle.net/audetwebdesign/7cMQg/6/](http://jsfiddle.net/audetwebdesign/7cMQg/6/)

```
<div class="row">
<div class="col fluid">
    <div class="col fixed">Short text: to see the full effect,
    type in a bit more text so that you can get a few lines
    in the floated-fixed-width box.</div>
    Lorem Ipsum is simply dummy text of the printing and typesetting
    industry...
</div>
</div> 
```

如果您检查 CSS，我在浮动 div 中添加了一个右边距，并更改了背景颜色以突出显示定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:19:35.247

如果您想要类似于第一个字母大于文本其余部分的效果（在许多书籍和著作中都可以找到），请尝试以下操作：

```
<div>
   <span class="fixed">Short text</span>
   Lorem Ipsum is simply dummy text of the printing and typesetting industry.
</div> 
```

CSS

```
.fixed {
    width: 200px;
    display:inline-block;
} 
```

[jsFiddle](http://jsfiddle.net/daCrosby/7cMQg/7/)

# c# - 为什么 Visual Studio 调试器会在显示中删除 \n？

> ID：15348494
> 
> 赞同：3
> 
> 时间：2013-03-11T20:59:26.707
> 
> 标签：c#, visual-studio, visual-studio-debugging

我预计以下代码中变量**a**的调试器显示为{11\n22} 但它是 {1122}：

```
class A
{
    public string Text;
    public override string ToString()
    {
        return this.Text;
    }
}

A a = new A();
a.Text = "11\n22"; 
```

调试器显示在变量窗口中：

```
display string of the object  "{1122}"    // why not "{11\n22}" ?
a.Text                        "11\n22"
a.ToString()                  "11\n22" 
```

用 VS2012 和 VS2010 测试。我以前从未意识到这一点。任何人都知道**为什么**显示字符串省略了 \n 字符？

即使添加 [DebuggerDisplay("Text")] 也会得到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:36:17.333

尝试固定它，你会看到你需要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:27:55.410

似乎 Visual Studio 正在显示`Object.ToString()`删除所有**`whitespaces`**.

但是，如果您复制文本并将其粘贴到`Notepad`它上面，则会显示带有所有`whitespaces`.

视觉工作室似乎`designed/coded`是这样的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:58:20.563

`\n`没有**省略**- 它被评估。尝试`\"`在字符串中插入某处，您会看到帮助窗口中出现双引号。同样，如果您进入`a`即时窗口，您将看到以下内容：

```
a
{"11
22"}
    Text: "11\"\n\\2\"2" 
```

它似乎只是被省略了，因为您正在查看的帮助窗口将所有内容压缩到一行中。

我想这是评估的，因为这实际上是对象的*摘要*，所以它向您显示的是`a.ToString()`- Visual Studio 的打印值（正确）解释`\n`为换行符。

# java - 写入和读取文件 - Java - 不读取我写入文件的内容

> ID：15348495
> 
> 赞同：0
> 
> 时间：2013-03-11T20:59:28.690
> 
> 标签：java

`.xtt`我正在执行一个加密算法，我需要您的帮助，以便在 Java 中写入和读取文件。作为加密的一部分，我基本上需要将 Base64 编码的字节写入`.txt`文件并读取这些确切的字节，对其进行解码并使用它们来执行解密过程。

与我写入`.txt`文件的内容相比，我似乎正在阅读不同的内容。基本上，当我检查我正在写入文件的字节数组时，它被读取为`[B@56e5b723`但是当我从文件中读取它时，它会生成`[B@35a8767`.

这是我的 Java 控制台中打印的结果：

```
***Numbs converted to ByteArray is as follows: [B@56e5b723
Size of NumbsByteArray is: 10

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-x-x-x-x-x WriteByteArrayToFile(byte[] encoded) HAS STARTED -x-x-x-x-x

6,7,8,9,10 has been received as a byte array in WriteByteArrayToFile(byte[] encoded): [B@56e5b723

6,7,8,9,10 IS TO BE WRITTEN TO THE FILE: /Users/anmonari/Desktop/textfiletwo.txt

bs.write(encoded); HAS BEEN CALLED

-x-x-x-x-x WriteByteArrayToFile(byte[] encoded) HAS ENDED -x-x-x-x-x

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-x-x-x-x-x ReadByteArray() HAS STARTED -x-x-x-x-x

fileData read as bytes is: [B@35a8767

Size of fileData is: 10

fileDataString when converted to a string using String object is����������

fileDataString when converted to a string using fileDataStringTwo.toString()[B@35a8767

fileDataString.getBytes(); is: [B@2c6f7ce9

-x-x-x-x-x ReadByteArray() HAS ENDED -x-x-x-x-x*** 
```

下面是我的代码：

```
package com.writeandreadfromfile;

import java.io.BufferedOutputStream;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class WriteAndRead {

    public static void main(String j[]) {

        String Numbs = "6,7,8,9,10";

        byte[] NumbsByteArray = Numbs.getBytes();

        System.out.println("Numbs converted to ByteArray is as follows: " + NumbsByteArray);
        System.out.println("Size of NumbsByteArray is: " + NumbsByteArray.length);

        System.out.println("\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");

        WriteByteArrayToFile(NumbsByteArray);

        System.out.println("\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n");

        try {
            ReadByteArrayFromFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    // Write ByteArray To File
    public static void WriteByteArrayToFile(byte[] NumbsByteArray) {
        System.out.println("\n-x-x-x-x-x WriteByteArrayToFile(byte[] encoded) HAS STARTED -x-x-x-x-x");

        System.out.println("6,7,8,9,10 has been received as a byte array in WriteByteArrayToFile(byte[] encoded): " + NumbsByteArray);

        String fileName = "/Users/anmonari/Desktop/textfiletwo.txt";

        System.out.println("6,7,8,9,10 IS TO BE WRITTEN TO THE FILE: " + fileName);

        BufferedOutputStream bs = null;

        try {

            FileOutputStream fs = new FileOutputStream(new File(fileName));
            bs = new BufferedOutputStream(fs);
            bs.write(NumbsByteArray);
            System.out.println("bs.write(encoded); HAS BEEN CALLED");
            bs.close();
            bs = null;

        } catch (Exception e) {
            e.printStackTrace();
        }

        if (bs != null) try { bs.close(); } catch (Exception e) {}

        System.out.println("-x-x-x-x-x WriteByteArrayToFile(byte[] encoded) HAS ENDED -x-x-x-x-x");
    }

    // Read ByteArray To File
    public static void ReadByteArrayFromFile() throws IOException {
        // Create FileInputStream and feed it the file name
        System.out.println("-x-x-x-x-x ReadByteArray() HAS STARTED -x-x-x-x-x");

        File file;

        try {
            file = new File("/Users/anmonari/Desktop/textfiletwo.txt");

            // Create the object of DataInputStream
            DataInputStream in = new DataInputStream((new FileInputStream(file)));

            byte[] fileData = new byte[(int)file.length()];

            System.out.println("fileData read as bytes is from file: "  + fileData);

            System.out.println("Size of fileData is: " + fileData.length);

            //String fileDataString = in.readLine();

            String fileDataString = new String(fileData);
            System.out.println("fileDataString when converted to a string using String object is"  + fileDataString);

            String fileDataStringTwo = fileData.toString();
            System.out.println("fileDataString when converted to a string using fileDataStringTwo.toString()" + fileDataStringTwo);

            fileDataString.getBytes();
            System.out.println("fileDataString.getBytes(); is: "  + fileDataString.getBytes());

            //Close the input stream
            in.close();

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("-x-x-x-x-x ReadByteArray() HAS ENDED -x-x-x-x-x");

    }
} 
```

对于如何从文件中读取您写入文件的确切字节数组的任何帮助，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:12:42.683

您没有打印字节数组的内容。您正在输出它们的类型和 hashCode（`toString()`数组方法的结果）。

要输出字节数组的内容，请使用

```
System.out.println(java.util.Arrays.toString(array)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:27:59.577

除了 Sotirios 指出的（你不是从 读取`in`）之外，你正在将字节数组写为文本，*即*“6,7,8,9,10”，但是你正在调用`fileDataString.getBytes();`. 这将获取字符串的字节，其中（假设 UTF-8）将为`0x36 0x2c 0x37 0x2c 0x38 0x2c 0x39 0x2c 0x31 0x30`.

如果您的计划是文件将是文本，则需要将字符串*解析*回字节数组。也许像

```
String[] numbers = fileDataString.split();
byte[] bytes = new byte[numbers.length];
for (int i = 0; i < numbers.length; i++) {
    bytes[i] = Byte.parseByte(numbers[i]);
} 
```

另一方面，如果您只需要保存和恢复字节数组，则只需使用[ObjectOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)和[ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)就可以更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:14:27.950

您可以尝试 bs(fs).flush() 缓冲所有写出的内容

# makefile - GNU make：生成用于提取 tarball 的规则

> ID：15348497
> 
> 赞同：3
> 
> 时间：2013-03-11T20:59:35.340
> 
> 标签：makefile, gnu-make

我有一个提取一系列 tarball 的 Makefile。现在规则是这样写的：

```
dirname:
        tar zxvf file.tar.gz 
```

和其他依赖于扩展的 tarball 参考的目标`dirname`。但是，为每个 tarball 定义这样的规则有点混乱。所以，我正在尝试使用该`eval`功能来自动生成这些规则。我的尝试如下所示：

```
TARFILES = $(wildcard *.tar.gz *.tgz)
define extract_tmpl =
 $(shell tar tf $(1) | head -1):
        tar zxvf $(1)
endef
$(foreach file, $(TARFILES), $(eval $(call extract_tmpl, $(file)))) 
```

但这似乎不起作用。我正在使用这个 tarball 进行测试（在同一个目录中）：

```
$ ls Python-2.6.6.tgz 
Python-2.6.6.tgz
$ tar tf Python-2.6.6.tgz | head -1
Python-2.6.6/
$ make Python-2.6.6/
make-3.79.1-p7: *** No rule to make target `Python-2.6.6/'.  Stop. 
```

似乎它应该对我有用，但老实说，我什至不确定我如何才能看到它扩展到什么。这里有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T21:12:10.007

*   您不需要`=`在`define`.
*   之前应该有一个硬标签`tar zxvf $(1)`
*   可选，`default`在 Makefile 中定义一个称为第一条规则的规则，该规则取决于将要创建的所有目录，因此如果您只运行`make`，它将提取所有 tarball。
*   可选，但良好的做法是定义`default`为`PHONY`规则，因为它不会创建任何名为`default`.

这就是它的`Makefile`样子（并在当前目录中使用 2 个 tarball 进行了测试）：

```
TARFILES = $(wildcard *.tar.gz *.tgz)

define extract_tmpl
$(shell tar tf $(1) | head -1):
    tar zxvf $(1)
# ^
# HARD-TAB
#
endef

TAR_DIRS := $(foreach file, $(TARFILES), $(shell tar tf $(file) | head -1))

default: $(TAR_DIRS)

$(foreach file, $(TARFILES), $(eval $(call extract_tmpl, $(file))))

.PHONY: default 
```

`eval`不使用and just的替代解决方案[`static pattern rules`](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Static-Usage.html)：

*   使用`.extract_file.tar.gz`或`.extract_file.tgz`作为空文件，如果已提取档案，则不重新提取档案
*   没有 eval，只有静态模式规则，这应该使其与旧版本的 make 兼容，如 v3.79
*   添加了清洁规则

这是`Makefile`：

```
TARFILES = $(wildcard *.tar.gz *.tgz)

EXTRACT_TARGETS := $(addprefix .extract_,$(TARFILES))
CLEAN_TARGETS := $(addprefix .clean_,$(TARFILES))

default: $(EXTRACT_TARGETS)

clean: $(CLEAN_TARGETS)

$(CLEAN_TARGETS): .clean_%: .extract_%
    rm -rf "$(shell tar tf $(patsubst .extract_%,%,$<) | head -1)"
    rm -f $<

$(EXTRACT_TARGETS): .extract_%: %
    tar zxf $<
    touch $@

.PHONY: default clean $(CLEAN_TARGETS) 
```

# c++ - Linux ::glibc 中的 C++ 运行时错误检测到 free()：下一个大小无效（快速）：带有 void ptr 元素的堆栈

> ID：15348498
> 
> 赞同：0
> 
> 时间：2013-03-11T20:59:35.400
> 
> 标签：c++, dynamic, error-handling, stack, glibc

这是我的第一个问题，所以如果这太愚蠢了，我会道歉。我试图搜索，但仍然无法找到代码的问题。我正在调试别人的代码，它在 linux 中给出了这个错误，它在 Solaris 中运行得很好。

```
*** glibc detected ***  free(): invalid next size (fast): 0x096c72b0 ***
======= Backtrace: =========
/lib/libc.so.6[0xa986c5]
/lib/libc.so.6(cfree+0x59)[0xa98b09]
... 
```

代码很大，有很多内部逻辑，但我试图创建一个问题可能出在哪里的示例。

```
Typedef Struct _FIELD
{
Int  size;
Char str[25];
Void *pData;
Void *pValue;
}FIELD;

Class ABC
{
 FIELD * field1;
 FIELD* getFIeld(int);
 …}

ABC::ABC()
{
field1=NULL;
}
ABC::~ABC()
{ 
for (int I = 0; I < total_num; i++)
{
    free (field1[i].pData);
   free(field1[i],pValue);
 }
free(field1);
}

FIELD* ABC::getField(int total_num)
{
FIELD *pFields = NULL;
pFields = GetValues( total_num);//just sets up pFields

field1 = malloc ( total_num * sizeof(FIELD));
for (int i =0 ; i<total_num; i++)
 {
 // earlier this code was memcpy, memcpy(&field1, &pFields, sizeof(FIELD)) I have       changed this to explicit copy
 Strcpy(field1[i].str, pFields[i].str);
  field1[i].size = pFields[i].size;
  field1[i].pData = malloc(fields[i].size);
  field1[i].pValue = malloc(fields[i].size);
   //I am not doing strdup for pData and PValue as I checked they are null at this point.
 }
 free(pFields);
 return(field1);

}
…
//Main 
FIELD* field1 = NULL;

  ……
 field1 = getField(n);
  …….

 field1 =getField(n)
 … 
```

如果这很明显，我想再次道歉..

我确信这是由于内存分配给结构的方式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:49:07.923

您可能在某处出现缓冲区溢出。您从 glibc 获得的错误消息表明堆已损坏，通常是通过覆盖跟踪已使用和空闲块的内部记录。glibc 比其他平台更积极地尝试检测这些类型的错误；您可能在其他地方也有相同的错误，但 libc 没有检测到它。

至于错误的确切位置，我没有直接在您的代码中看到它，但是该代码做了很多假设（例如预先分配数据结构中记录的大小的缓冲区）和程序的其余部分可能不遵循这些假设。

简短版：我会安装 valgrind 并在其下运行您的程序。这是一个适用于 UNIX 的运行时内存调试器，它会告诉您何时写入超过分配内存的末尾以及哪一行代码存在该问题。这是解决这类问题的第一件事。

# mysql - 如何在 mysql 列中找到确切的字符串

> ID：15348499
> 
> 赞同：1
> 
> 时间：2013-03-11T20:59:49.180
> 
> 标签：mysql

我有一个问题，在列中找到精确字符串匹配的最佳方法是什么。

我尝试使用`locate('needle', 'haystack') > 0.`这个问题是，例如，如果我要查找的字符串类似于“Ed”，但在 blob 或文本列内，我有一个字符串表示“我住过”，locate() 会返回 6\. 但是，这不是我要问的。在精确匹配中，最好使用`LIKE ''`，但是，LIKE 存在性能问题，因此，它不是一个可行的解决方案。

有没有一种方法可以`LOCATE()`用来进行精确匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:07:35.770

你可以使用这个：

```
WHERE CONCAT(' ', column, ' ') LIKE BINARY '% string_to_find %' 
```

或使用定位：

```
WHERE LOCATE(BINARY ' Ed ', CONCAT(' ', column, ' ')) 
```

使用 BINARY 将强制进行精确的大小写匹配。我认为 LOCATE 或 LIKE 的表现会非常相似。请[在此处](http://sqlfiddle.com/#!2/8eb11/2)查看小提琴。

# excel - 如何在 Excel VBA 2010 中彻底断开链接

> ID：15348503
> 
> 赞同：1
> 
> 时间：2013-03-11T20:59:57.260
> 
> 标签：excel, vba

我正在尝试以编程方式断开所有链接，然后在工作簿中重新创建它们。

我得到了一些 VBA 代码来干净地破坏 Excel 2010 中的 Excel 链接，但是我一直遇到的问题是每次我重新创建链接时 Excel 都会提示我。

这就是我正在做的事情：

这是 BreakLinks 程序：

```
Sub BreakLinks()
    vLinks = ActiveWorkbook.LinkSources(Type:=xlLinkTypeExcelLinks)

    ' Break all links in the active workbook.
    For lLink = LBound(vLinks) To UBound(vLinks)
        ActiveWorkbook.BreakLink _
            Name:=vLinks(lLink), _
            Type:=xlLinkTypeExcelLinks
    Next lLink
end sub 
```

这是主要部分： ***请注意，我分配 thisFormula 的最后一行是 Excel 提示我使用文件对话框的地方，该对话框迫使我取消或选择我要链接回的主工作簿...

```
 BreakLinks    ' call proc to break the links
    thisFormula = "='[DataMaster - Data Template.xlsm]MASTER'!$B" + Trim(Str(myRow))     ' reference back to master workbook
    Range("A1").Formula = thisFormula       ' i.e. "='[DataMaster - Data Template.xlsm]MASTER'!$B32"
    Range("B1").Formula = "=D1"
    Range("C1").Formula = "=E1/100"
    thisFormula = "=BDH('[DataMaster - Data Template.xlsm]MASTER'!$A" + Trim(Str(myRow)) + "," + charCode + "PX_LAST" + charCode + ",FirstDate," + charCode + " " + charCode + "," + charCode + "cols=2;rows=50" + charCode + ")"
    Range("D1").Formula = thisFormula 
```

我想知道如何避免这个非常烦人的 Excel 提示，而只是干净地重新创建我的公式/链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:47:49.403

您可以尝试使用 Application.DisplayAlerts：

```
Application.DisplayAlerts = False
'<statements that may invoke alerts>
Application.DisplayAlerts = True 
```

# jquery-ui-datepicker - jquery ui 多日期选择器：如何禁用滑动效果

> ID：15348508
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:05.923
> 
> 标签：jquery-ui-datepicker

在显示 numberOfMonths: 3 中，当我点击第二个月的某个日期时，它是向左滑动的。是否有可能禁用此效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:04:18.317

您可能希望使用 JQuery UI 日期选择器的默认功能。下方链接。基本上去掉了动画代码。

[http://jqueryui.com/datepicker/#default](http://jqueryui.com/datepicker/#default)

删除与此相似的代码： $( "#anim" ).change(function() { $( "#datepicker" ).datepicker( "option", "showAnim", $( this ).val() ) ; });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:05:01.517

我发现在[github.com/dubrox/Multiple-Dates-Picker-for-jQuery-UI/issues/9](http://github.com/dubrox/Multiple-Dates-Picker-for-jQuery-UI/issues/9)上，启用了“幻灯片效果”，但是当您超出选定的 3 个月份时，它比之前：在您添加的每个日期，您都会返回所选的 3 个月。

```
onSelect:function (dateText, inst) {
    var newDate = new Date();
    inst.drawMonth = newDate.getMonth();
    inst.drawYear = newDate.getFullYear();
    inst.currentMonth = newDate.getMonth();
    inst.currentYear = newDate.getFullYear();
} 
```

这段代码使左上角的月份在每次选择时始终相同（在本例中为当前月份）。所以还在找...

# javascript - 根据 html 输入的输入更新 JS/JQuery 变量

> ID：15348509
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:10.133
> 
> 标签：javascript, jquery, html, ajax

我目前对我的高级搜索页面有这个 javascript/ajax 请求

```
 <script>
//      window.setInterval(function()
//      {
          $(function () 
          {
            var SearchTerm = '<?php echo $_POST['Search']; ?>';
            $.ajax({                                      
                url: 'Ajax/AjaxAdvSearch.php?SearchTerm='+SearchTerm, dataType: 'json',  success: function(rows)        
                {
                $('#output').empty();
                    for (var i in rows)
                    {
                        var row = rows[i];          
                        var id = row[0];
                        var FunctionName = row[1];
                        $('#output').append("<a href='Page.php?ID="+id+"'>"+FunctionName+"</a><br>");
                    } 
                } 
            });       
          });
//      }, 5000);
      </script> 
```

`$_POST['Search'];`是从 HTML 文本区域获得的：

```
<textarea name='Search' style='width: 100%; height: 150px;'></textarea><br> 
```

我想在用户每次输入 textarea 时动态更新我的 javascript var，而无需用户按下提交。

因此，当用户键入时，`var SearchTerm`每次文本区域更新内容时都会动态更新。

谁能提供一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:02:16.793

在 jQuery 中使用 .change() 方法

```
var variableToUpdate = '';

$('#Search').change(function() {
    variableToUpdate = $(this).val();

    // call your search from within if you want
}); 
```

对于搜索时键入的教程和插件...

[http://dbachrach.com/blog/2007/04/spotlight-like-search-as-you-type-with-css-ajax-js/](http://dbachrach.com/blog/2007/04/spotlight-like-search-as-you-type-with-css-ajax-js/) [http://www.jquery4u.com/plugins/14-jquery-实时搜索插件/](http://www.jquery4u.com/plugins/14-jquery-live-search-plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:18:46.350

让我给你一个例子

```
<html>
<head><style>

</style>

<script>
var DataCon;

function UpdateDIV(){
    document.getElementById('updater').innerHTML=DataCon;
}
</script>
</head><body>
<div id="updater"> 
</div>

<textarea onkeydown="DataCon=this.value;UpdateDIV()"></textarea>

</body>
</html> 
```

在这里你可以看到，当你输入一个全局变量更新时，检查它的工作更新DIV函数也给出了更新带有id更新器的div......

现在只需分配某些变量并完成您的工作

# sql-server-2008 - 连接问题

> ID：15348511
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:18.477
> 
> 标签：sql-server-2008

我正在尝试根据其他列创建一个列，但它一直给我错误：

“错误将 varchar 转换为浮点数”我认为它试图添加而不是连接。

我的陈述如下所示：

```
select column1 + ' ' + column2 + ' ' as ColumnDesired 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:01:22.497

好吧，如果这些列中的任何一个是数字的，那么由于数据类型的优先级，它正在尝试添加。例如，在数学`SELECT 4 + 'cow'`上采用`4`并尝试添加`cow`它，因为它尝试将所有表达式转换为具有最高先例的数据类型（在这种情况下，`INT`）。

因此，请使用`CONVERT`确保所有数字和其他非字符串数据类型列都被明确视为字符串。我猜 32 个字符对于这些列中的任何一个都应该足够了，只是要小心不要意外截断任何超过 32 个字符的列。

```
SELECT ColumnDesired = CONVERT(VARCHAR(32), column1) + CONVERT(VARCHAR(32), column2)
FROM ... 
```

您可能还需要处理`NULL`s

```
SELECT ColumnDesired = COALESCE(CONVERT(VARCHAR(32), column1), '')
       + COALESCE(CONVERT(VARCHAR(32), column2), '')
FROM ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:03:03.830

如果您尝试连接列，则可能需要转换为数字的列：

```
select cast(column1 as varchar(50)) + ' ' + column2 + ' ' as ColumnDesired 
```

或者

```
select column1 + ' ' +  cast(column2 as varchar(50)) + ' ' as ColumnDesired 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:07:58.917

其中一列是数字，使用 CONVERT()。

底线，永远不要依赖隐式转换，并且 CONVERT() 所有非 (N)CHAR/(N)VARCHAR 值。

# android - 为什么我不能在 AsyncTask 中使用 Geocoder 更新 onPostExecute 中的 EditText？

> ID：15348512
> 
> 赞同：1
> 
> 时间：2013-03-11T21:00:23.983
> 
> 标签：android, multithreading, android-asynctask, android-edittext

我正在尝试在 an 中反转地理编码`AsyncTask`以获取当前位置的地址。我想`EditText`在开始活动时将地址设置为默认值。我的问题是我无法在 中执行此操作`onPostExecute()`，但是，我可以在`runOnUiThread()`内部执行此操作`doInBackground()`。为什么是这样？

异步任务：

```
protected String doInBackground(Void ...params) {
    Geocoder geocoder = new Geocoder(AddSpot.this, Locale.getDefault());
    List<Address> addresses = null;
    try {
        // Call the synchronous getFromLocation() method by passing in the lat/long values.
        addresses = geocoder.getFromLocation(currentLat, currentLng, 1);
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    }
    if (addresses != null && addresses.size() > 0)
    {
        Address address = addresses.get(0);
        // Format the first line of address (if available), city, and country name.
        final String addressText = String.format("%s, %s, %s",
                address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                address.getLocality(),
                address.getCountryName());
        System.out.println(addressText);
        return addressText;
    }
    return null;
}
protected void onPostExecute(String address) { 
    EditText addrField=(EditText)findViewById(R.id.addr);
    addrField.setText(address);
} 
```

那是行不通的。但是，当我将 a 插入`runOnUiThread`其中时，它会起作用：

```
 if (addresses != null && addresses.size() > 0)
                {
                    Address address = addresses.get(0);
                    // Format the first line of address (if available), city, and country name.
                    final String addressText = String.format("%s, %s, %s",
                            address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                            address.getLocality(),
                            address.getCountryName());

                    runOnUiThread(new Runnable()
                    {
                        @Override
                        public void run()
                        {
                            EditText addrField=(EditText)findViewById(R.id.addr);
                            addrField.setText(addressText); 
                        }
                    });
                    System.out.println(addressText);
                    return addressText;
                } 
```

**更新**

经过一些调试后，无论我做什么，似乎都不会调用 onPostExecute 。

我尝试过的事情：

*   onPostExecute里面的日志信息：不出现
*   删除 doInBackground 中的整个逻辑，如下所示`return "hello"`： onPost 仍然不执行

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-28T12:59:57.267

您没有将@Override 放在 onPostExecute 之上。还必须在 UI 线程内创建 asynctask 对象。

**编辑**：您的编辑文本没有更新，因为它在后执行完成后立即被消耗。

1）编写EditText addrField；作为活动类的类变量。2) 在 onCreate() 中找到对它的引用。3) 在您的原件上`onpostexecute`应该只保留`addrField.setText(address);`

有我的课，从 onPostexecute 更新文本字段没有任何问题

```
public class AddToCheckActivity extends Activity {
    // All static variables
    private ProgressDialog pd = null;
    // XML node keys
    TextView active;
    String addId = "";
    JSONObject json = null;
    ListView list;
    String not_id, not_section, not_street, not_sqTotal, not_sqLiving,
            not_sqKitchen, not_flat, not_floor, not_floors, not_text,
            user_phone1, user_phone2, user_contact, not_region, not_district,
            not_settle, not_price, not_photo, not_date, not_date_till, not_up,
            not_premium, not_status, region_title, district_title,
            settle_title, section_title, not_priceFor;
    LinearLayout lin;
    ImageView photo1;
    ImageView photo2;
    ImageView photo3;
    Activity app;
    ArrayList<String> photo_ids = new ArrayList<String>();
    TextView address;
    TextView date;
    TextView date_till;
    TextView description;
    TextView district;
    TextView flat;
    TextView floor;
    TextView floors;
    TextView id;
    TextView phone1;
    TextView phone2;
    TextView premium;
    TextView region;
    TextView section;
    TextView settle;
    TextView sqKitchen;
    TextView sqLiving;
    TextView sqTotal;
    TextView uped;
    TextView price;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aadd_addtocheck);
        app = this;
        lin = (LinearLayout) findViewById(R.id.lin);
        address = (TextView) findViewById(R.id.tv_atc_address);
        date = (TextView) findViewById(R.id.tv_atc_date);
        date_till = (TextView) findViewById(R.id.tv_atc_date_till);
        description = (TextView) findViewById(R.id.tv_atc_description);
        district = (TextView) findViewById(R.id.tv_atc_dstrict);
        flat = (TextView) findViewById(R.id.tv_atc_flat);
        floor = (TextView) findViewById(R.id.tv_atc_floor);
        floors = (TextView) findViewById(R.id.tv_atc_floors);
        id = (TextView) findViewById(R.id.tv_atc_id);
        phone1 = (TextView) findViewById(R.id.tv_atc_phone1);
        phone2 = (TextView) findViewById(R.id.tv_atc_phone2);
        premium = (TextView) findViewById(R.id.tv_atc_premium);
        region = (TextView) findViewById(R.id.tv_atc_region);
        section = (TextView) findViewById(R.id.tv_atc_section);
        settle = (TextView) findViewById(R.id.tv_atc_settle);
        sqKitchen = (TextView) findViewById(R.id.tv_atc_sqKitchen);
        sqLiving = (TextView) findViewById(R.id.tv_atc_sqLiving);
        sqTotal = (TextView) findViewById(R.id.tv_atc_sqTotal);
        uped = (TextView) findViewById(R.id.tv_atc_uped);
        price = (TextView) findViewById(R.id.tv_atc_price);
        Bundle ex = getIntent().getExtras();
        Log.d("Gues: ", "1");
        Button back_button = (Button) findViewById(R.id.back_btn);
        back_button.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {

                Intent i = new Intent(getApplicationContext(),
                        ChooserActivity.class);
                startActivity(i);
                finish();
            }
        });
        pd = new ProgressDialog(app);
        pd.setOwnerActivity(app);
        pd.setTitle("Идет загрузка...");
        pd.setCancelable(true);
        if (ex != null) {
            addId = ex.getString("add_id");
            Log.d("Gues: ", "2");
            not_id = not_priceFor = not_section = not_street = not_sqTotal = not_sqLiving = not_sqKitchen = not_flat = not_floor = not_floors = not_text = user_phone1 = user_phone2 = user_contact = not_region = not_district = not_settle = not_price = not_photo = not_date = not_date_till = not_up = not_premium = not_status = region_title = district_title = settle_title = section_title = "";
            Log.d("Gues: ", "3");
            GetAdd addvert = new GetAdd();
            addvert.execute();
        }

    }

    public void onClickBtnAtcDelete(View v) {
        Thread t = new Thread(new Runnable() {
            public void run() {
                UserFunctions u = new UserFunctions();
                u.deleteAdd(not_id);

            }
        });
        t.start();
        try {
            t.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Intent i = new Intent(getApplicationContext(), MyAddActivity.class);
        startActivity(i);
        finish();
    }

    public void btnAtcEdit(View v) {
        Intent i = new Intent(getApplicationContext(), AddSaveActivity.class);

        final BitmapDrawable bitmapDrawable1 = (BitmapDrawable) photo1
                .getDrawable();
        final Bitmap yourBitmap1 = bitmapDrawable1.getBitmap();
        ByteArrayOutputStream stream1 = new ByteArrayOutputStream();
        yourBitmap1.compress(Bitmap.CompressFormat.PNG, 90, stream1);
        byte[] imm1 = stream1.toByteArray();

        final BitmapDrawable bitmapDrawable2 = (BitmapDrawable) photo2
                .getDrawable();
        final Bitmap yourBitmap2 = bitmapDrawable2.getBitmap();
        ByteArrayOutputStream stream2 = new ByteArrayOutputStream();
        yourBitmap2.compress(Bitmap.CompressFormat.PNG, 90, stream2);
        byte[] imm2 = stream2.toByteArray();

        final BitmapDrawable bitmapDrawable3 = (BitmapDrawable) photo3
                .getDrawable();
        final Bitmap yourBitmap3 = bitmapDrawable3.getBitmap();
        ByteArrayOutputStream stream3 = new ByteArrayOutputStream();
        yourBitmap3.compress(Bitmap.CompressFormat.PNG, 90, stream3);

        byte[] imm3 = stream3.toByteArray();
        i.putExtra("photo1", imm1);
        i.putExtra("photo2", imm2);
        i.putExtra("photo3", imm3);
        i.putStringArrayListExtra("photo_ids", photo_ids);
        i.putExtra("not_id", not_id);
        i.putExtra("not_section", not_section);
        i.putExtra("not_street", not_street);
        i.putExtra("not_sqTotal", not_sqTotal);
        i.putExtra("not_sqLiving", not_sqLiving);
        i.putExtra("not_sqKitchen", not_sqKitchen);
        i.putExtra("not_flat", not_flat);
        i.putExtra("not_floor", not_floor);
        i.putExtra("not_floors", not_floors);
        i.putExtra("not_text", not_text);
        i.putExtra("not_phone1", user_phone1);
        i.putExtra("not_phone2", user_phone2);
        i.putExtra("not_region", not_region);
        i.putExtra("not_district", not_district);
        i.putExtra("not_settle", not_settle);
        i.putExtra("not_price", not_price);
        i.putExtra("not_date", not_date);
        i.putExtra("not_date_till", not_date_till);
        i.putExtra("region_title", region_title);
        i.putExtra("district_title", district_title);
        i.putExtra("section_title", section_title);
        i.putExtra("settle_title", settle_title);
        i.putExtra("not_priceFor", not_priceFor);
        startActivity(i);

    }

    public void onClickAtcGoToChooser(View v) {
        Intent i = new Intent(getApplicationContext(), MyAddActivity.class);

        startActivity(i);

        finish();
    }

    class GetAdd extends AsyncTask<Integer, Void, JSONObject> {
        // private ProgressDialog pd = null;
        private int op = 0;

        @Override
        protected void onPreExecute() {
            // pd = new ProgressDialog(app);
            // pd.setOwnerActivity(app);
            // pd.setTitle("Идет загрузка...");
            // pd.setCancelable(true);
            pd.show();
        }

        @Override
        protected JSONObject doInBackground(Integer... params) {
            // TODO Auto-generated method stub
            UserFunctions u = new UserFunctions();
            // json = u.getNewAdd(addId);
            return u.getNewAdd(addId);
        }

        @Override
        protected void onPostExecute(JSONObject result) {
            super.onPostExecute(result);
            pd.dismiss();
            active = (TextView) findViewById(R.id.tv_atc_active);

            photo1 = (ImageView) findViewById(R.id.imageP1);
            photo2 = (ImageView) findViewById(R.id.imageP2);
            photo3 = (ImageView) findViewById(R.id.imageP3);
            ImageLoader imi = new ImageLoader(app.getApplicationContext());
            if (result != null && result.has("not_id")) {
                try {

                    Log.d("Gues: ",
                            "5_1 to status " + result.getString("not_status"));

                    // active.setText(json.getString("not_status")+"");
                    not_status = ("" + result.getString("not_status"));
                    not_region = ("" + result.getString("not_region"));
                    not_district = ("" + result.getString("not_district"));
                    not_settle = ("" + result.getString("not_settle"));
                    not_section = ("" + result.getString("not_section"));
                    not_street = (result.getString("not_street"));
                    not_date = (result.getString("not_date"));
                    not_price = (result.getString("not_price"));
                    not_date_till = (result.getString("not_date_till"));
                    not_text = (result.getString("not_text"));
                    district_title = (result.getString("district_title"));
                    not_flat = (result.getString("not_flat"));
                    not_floor = (result.getString("not_floor"));
                    not_floors = (result.getString("not_floors"));
                    not_id = (result.getString("not_id"));
                    user_phone1 = (result.getString("user_phone1"));
                    user_phone2 = (result.getString("user_phone2"));
                    not_premium = (result.getString("not_premium"));
                    region_title = (result.getString("region_title"));
                    section_title = (result.getString("section_title"));
                    settle_title = (result.getString("settle_title"));
                    not_sqKitchen = (result.getString("not_sqKitchen"));
                    not_sqTotal = (result.getString("not_sqTotal"));
                    not_sqLiving = (result.getString("not_sqLiving"));
                    not_up = (result.getString("not_up"));
                    LinearLayout l = (LinearLayout) findViewById(R.id.appDetail);
                    if (Integer.parseInt(not_section) == 1981
                            || Integer.parseInt(not_section) == 1982) {
                        l.setVisibility(View.GONE);
                    }
                    not_priceFor = (result.getString("not_priceFor"));
                    String link1, link2, link3;
                    link1 = link2 = link3 = "";
                    JSONArray ar = result.getJSONArray("not_photos");
                    JSONArray pp = result.getJSONArray("photo_ids");
                    Log.d("ATC photo_ids", "-" + pp.length());
                    Log.d("ATC result", result.toString());
                    Log.d("ATC result pp", pp.toString());
                    Log.d("ATC result ppelement", pp.getString(0).toString());
                    for (int i = 0; i < pp.length(); i++) {
                        Log.d("ATC photo_ids pos", "-" + i);
                        Log.d("ATC result ppelement iter", pp.getString(i)
                                .toString());
                        photo_ids.add(pp.getString(i).toString());
                    }
                    // String[] ph = new String[3];
                    // for (int i =0; i< 3;i++){
                    // ph[i]=ar.getJSONObject(i).toString();
                    // }
                    imi.DisplayImage(ar.getString(0).toString(), photo1);
                    imi.DisplayImage(ar.getString(1).toString(), photo2);
                    imi.DisplayImage(ar.getString(2).toString(), photo3);
                    Log.d("Gues: ", "5_5");
                    runOnUiThread(new Runnable() {
                        @Override
                        public void run() {

                        }
                    });
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                if (Integer.parseInt(not_status) == 0) {
                    active.setText("Неактивно");
                } else {
                    active.setText("Активно");
                }
                address.setText("Улица: " + not_street);
                date.setText("Создано: " + not_date);
                date_till.setText("Действительно до: " + not_date_till);
                description.setText("Подробности объявления: " + "\n"
                        + not_text);
                district.setText("Город/поселок: " + district_title);
                if (Integer.parseInt(not_section) == 1981
                        || Integer.parseInt(not_section) == 1982) {
                    flat.setText("Машиномест: " + not_flat);
                } else
                    flat.setText("Количество комнат: " + not_flat);
                floor.setText("Этаж: " + not_floor);
                floors.setText("Этажность: " + not_floors);
                id.setText("ID: " + not_id + " ");
                phone1.setText("Телефон: " + user_phone1);
                phone2.setText("Телефон: " + user_phone2);
                if (Integer.parseInt(not_premium) == 0) {
                    premium.setText("Обычное");
                } else {
                    premium.setText(" Примиумное");
                }
                region.setText("Регион: " + region_title);
                section.setText("В рубрике: " + section_title);
                settle.setText("Район: " + settle_title);
                sqKitchen.setText("Площадь кухни: " + not_sqKitchen);
                sqTotal.setText("Общая площадь: " + not_sqTotal);
                sqLiving.setText("Жилая площадь: " + not_sqLiving);
                if (Integer.parseInt(not_up) == 0) {
                    uped.setText("");
                } else {
                    uped.setText(" Поднятое ");
                }
                String priceT = "";
                if (Integer.parseInt(not_priceFor) == 1)
                    priceT = "за все";
                else if (Integer.parseInt(not_priceFor) == 2)
                    priceT = "за кв.м";
                else if (Integer.parseInt(not_priceFor) == 3)
                    priceT = "за месяц";
                else if (Integer.parseInt(not_priceFor) == 4)
                    priceT = "в сутки";
                else if (Integer.parseInt(not_priceFor) == 5)
                    priceT = "в час";
                else if (Integer.parseInt(not_priceFor) == 6)
                    priceT = "за кв.м./месяц";
                else if (Integer.parseInt(not_priceFor) == 7)
                    priceT = "за сотку";
                price.setText("Цена: " + not_price + " грн. " + priceT);
                lin.setVisibility(View.VISIBLE);

            } else {
                error();
            }

        }
    }
} 
```

**PS** : 为避免日后出现问题，请勿将 UI 操作放在 try{} 的任何部分

# ios - 使用 Magic Record 在单独的线程中保存核心数据

> ID：15348516
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:29.863
> 
> 标签：ios, objective-c, magicalrecord

我正在使用 Magical Record 来帮助保存核心数据和多线程。

我用 GCD 启动了一个新线程。在那个新线程中，我检查是否存在实体；如果不是，我想创建一个新的并保存它。

`saveUsingCurrentThreadContextWithBlock^(NSManagedObjectContext *localContext){}`如果在非主线程上调用会返回主线程保存吗？

还是我应该将上下文传递给新线程？

编辑：

在主线程上，我创建一个 MBProgress 指标并创建一个新线程：

```
MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.mapView animated:YES];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    Person *person = [Person MR_findFirstByAttribute:NAME withValue:self.user.username];

    if (person == NULL) {
        NSLog(@"SEPERATE THREAD | person %@ does not exist, creating", self.user.username);
        person = [Person MR_createEntity];
        person.name = self.user.username;
        person.uid = self.user.UID;

        [[NSManagedObjectContext MR_contextForCurrentThread] MR_saveOnlySelfWithCompletion:^(BOOL success, NSError *error) {
            [MBProgressHUD hideHUDForView:self.mapView animated:YES];

            Person *person = [Person MR_findFirstByAttribute:NAME withValue:self.user.username];

            if (person) {
                NSLog(@"COMPLETION BLOCK | person exists: %@", person.name);
            }
        }];
    }
    else {
        NSLog(@"SEPERATE THREAD | person %@ does", self.user.username);

            dispatch_async(dispatch_get_main_queue(), ^{
                [MBProgressHUD hideHUDForView:self.mapView animated:YES];
            });
    }
}); 
```

（这种保存方法不是持久化，我重启app找不到Person实体）：

```
2013-03-12 14:25:44.014  SEPERATE THREAD | person iDealer does not exist, creating
2013-03-12 14:25:44.014  SEPERATE THREAD | thread: <NSThread: 0x84ca720>{name = (null), num = 4}
2013-03-12 14:25:44.015  -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x840ec30) → Saving <NSManagedObjectContext (0x840ec30): *** UNNAMED ***> on *** BACKGROUND THREAD ***
2013-03-12 14:25:44.015  -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x840ec30) → Save Parents? 0
2013-03-12 14:25:44.015  -[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:](0x840ec30) → Save Synchronously? 0
2013-03-12 14:25:44.016  -[NSManagedObjectContext(MagicalRecord) MR_contextWillSave:](0x840ec30) Context UNNAMED is about to save. Obtaining permanent IDs for new 1 inserted objects
2013-03-12 14:25:44.132  __70-[NSManagedObjectContext(MagicalSaves) MR_saveWithOptions:completion:]_block_invoke21(0x840ec30) → Finished saving: <NSManagedObjectContext (0x840ec30): *** UNNAMED ***> on *** BACKGROUND THREAD ***
2013-03-12 14:25:44.134  COMPLETION BLOCK | thread: <NSThread: 0x8435f30>{name = (null), num = 1}
2013-03-12 14:25:44.134  COMPLETION BLOCK | person exists: iDealer 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:29:58.643

好的，我开始工作了：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    Person *person = [Person MR_findFirstByAttribute:NAME withValue:self.user.username];

    if (person == NULL) {
            [MagicalRecord saveUsingCurrentThreadContextWithBlock:^(NSManagedObjectContext *localContext){
                Person *localPerson = [Person MR_createInContext:localContext];
                localPerson.name = self.user.username;

            } completion:^(BOOL success, NSError *error){
                [MBProgressHUD hideHUDForView:self.mapView animated:YES];
            }];
    }
    else {
        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:self.mapView animated:YES];
        });
    }
}); 
```

这有效并保存。我不确定这种方法的 casademora 是什么意思是不正确的。我无法确定使用此方法与使用`saveOnlySelf:completion:`方法之间的区别。

似乎我永远无法使用`saveOnlySelf`. 如果我使用问题中的代码创建它，它将被放置在上下文中。如果我搜索 Person 实体，我可以找到它。但是一旦我终止了应用程序并重新启动，那个 Person 实体就不会在那里了。感觉就像我正在将线程上下文保存或合并到主/默认上下文，但该上下文没有被保存。

编辑：

在玩了一些 MR 之后，似乎如果`saveOnlySelf`在非主线程中使用任何方法，它会将本地上下文合并到默认上下文，但不会将其保存到持久存储中。如果您在完成后检查默认上下文，则新实体确实存在。但是一旦您终止应用程序并重新运行它，它就不存在了。

要合并上下文并保存到商店，您需要调用其中一种`saveToPersistentStoreAndWait`类型方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:41:33.533

在当前版本的 MagicalRecord 中，是的，完成块将返回到主线程。但是，您这里的方法是不正确的。现在有更明确的 save 方法变体：

```
saveOnlySelf:completion:
saveToPersistentStore:completion: 
```

在当前版本中查看这些方法。提醒一下，请确保您只使用提供给您的 localContext 中的托管对象。该工作块可以在任何线程/队列中运行，在这种情况下，您仍然希望对核心数据使用正确的线程管理规则。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T21:41:21.643

是的，在主线程中执行的完成块。例如：

```
NSOperationQueue *newQueue = [[NSOperationQueue alloc] init];
[newQueue addOperationWithBlock:^{
    [MagicalRecord saveUsingCurrentThreadContextWithBlock:^(NSManagedObjectContext *localContext) {
        // save something
    } completion:^(BOOL success, NSError *error) {
        // this will execute in the main thread
    }];
}]; 
```

# websphere - 使用 wsadmin 将定制属性添加到资源环境条目

> ID：15348519
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:35.710
> 
> 标签：websphere, jython, wsadmin

我可以使用以下 wsadmin 命令添加资源环境条目：

```
AdminResources.createResourceEnvEntries("myNode","myServer","ConfigurationProvider", "test", "test/zmtest") 
```

但是，我不确定如何将自定义属性添加到我创建的资源环境条目中。我在 WebSphere Application Server 8.0 上。

如何使用 wsadmin 将自定义属性添加到我的资源环境条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:06:53.620

应该多搜索一点......如何做到这一点的详细信息可以在这里找到...... [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom。 ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Ftxml_envcustom.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Ftxml_envcustom.html)

# crystal-reports - 你能帮我在水晶报表中显示正确的总计吗

> ID：15348520
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:35.663
> 
> 标签：crystal-reports

我在水晶报告中的总数是数千而不是数百，例如我有一列产品金额等，金额是：10.00 42.00 55.00 45.00 75.00

它加起来为 227.00，但在报告中总计显示 22,700.00....请帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:29:20.683

意外总计的最可能的罪魁祸首是不正确的分组。如果您没有每个组的总数，请添加它们，然后查看它们是否关闭。一旦你修复了分组，并确保你在正确的字段上总计，那么你的总计也应该是正确的。

# asp.net-mvc-4 - mvc 4 应用程序中的自定义错误页面，使用 Windows 身份验证进行设置

> ID：15348521
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:37.703
> 
> 标签：asp.net-mvc-4, windows-authentication, custom-error-pages

我有一个带有 Windows 身份验证的 Intranet 应用程序设置。与大多数应用程序一样，应用程序的某些部分只能由特定角色访问。当不具有所需角色的用户尝试访问该区域时，应向他显示友好的“您无权查看此页面”视图。我搜索并查看了一些指导扩展授权属性的资源。我尝试了这种方法，但它根本不起作用。我仍然收到 IIS 错误消息，并且此自定义属性中的断点永远不会被命中。即使角色中的用户访问该页面，我的扩展属性中的断点也不会被命中。所以，我想知道我是否遗漏了什么？这就是我所拥有的——

```
 [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class AuthorizeRedirect : AuthorizeAttribute
{

    private const string IS_AUTHORIZED = "isAuthorized";
    public string RedirectUrl = "~Areas/Errors/Http401";

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool isAuthorized =  base.AuthorizeCore(httpContext);
        httpContext.Items.Add(IS_AUTHORIZED, isAuthorized);
        return isAuthorized;
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        var isAuthorized = filterContext.HttpContext.Items[IS_AUTHORIZED] != null ? Convert.ToBoolean(filterContext.HttpContext.Items[IS_AUTHORIZED]) : false;

        if(!isAuthorized && filterContext.RequestContext.HttpContext.User.Identity.IsAuthenticated)
        {
        filterContext.RequestContext.HttpContext.Response.Redirect(RedirectUrl);
        }

    }
} 
```

控制器 -

```
 [AuthorizeRedirect]
    [HttpPost, ValidateInput(true)]
    public  ActionResult NewPart(PartsViewModel vmodel) {..} 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-20T05:27:43.083

我认为您可以改用自定义错误页面。用于[`AuthorizeAttribute`](https://docs.microsoft.com/en-us/previous-versions/aspnet/web-frameworks/dd460317(v=vs.98))限制调用者对操作方法的访问。

```
[Authorize (Roles="Editor, Moderator", Users="Ann, Gohn")]
public ActionResult RestrictedAction()
{
    // action logic
} 
```

然后您可以使用@Marco 提出的其中一种[方式。](https://stackoverflow.com/a/9026907/7914637)我喜欢在`Application_EndRequest`. 因此，可以通过以下方式解决您的问题：

```
protected void Application_EndRequest()
{
    int status = Response.StatusCode;
    if (Response.StatusCode == 401)
    {
        Response.Clear();
        var rd = new RouteData();
        rd.DataTokens["area"] = "Areas";
        rd.Values["controller"] = "Errors";
        rd.Values["action"] = "Http401";
        IController c = new ErrorsController();
        c.Execute(new RequestContext(new HttpContextWrapper(Context), rd));
    }
} 
```

为了清楚地指定当 HTTP 状态代码错误时现有响应会发生什么，您应该在配置文件中使用元素的`existingResponse`属性。[`<httpErrors>`](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/httperrors/)如果您想立即出现错误页面，则使用`Replace`value，否则 - `PassThrough`（请参阅[我的问题](https://stackoverflow.com/questions/51304236/custom-401-error-page-for-asp-net-mvc-application)中的详细信息）。

# html - 如何使相邻和不相邻正方形的边界全部相等？

> ID：15348522
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:42.067
> 
> 标签：html, css, image, border

我正在尝试使用`30px`带有`2px`边框的单个正方形在 HTML/CSS 中重新创建“像素化”版本的 Space Invaders。

感谢 Sunyatasattva，这是我目前所拥有的：

[http://jsfiddle.net/wnhzp/](http://jsfiddle.net/wnhzp/)

但是，请注意，只有“内部”方格周围有正确的`2px`黑色边框，并且“外部”方格的任何不面向相邻方格的边只有一个`1px`边框。

我怎样才能让**每个**正方形都有正确的`2px`边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:07:05.243

添加`margin:1px`到您的 div 样式。

* * *

更新：哦，我明白你想要什么。给你：[jsfiddle.net/nunzabar/Wna8L/](http://jsfiddle.net/nunzabar/Wna8L/)

我必须手动设置每个边框。入侵者现在看起来很棒。

# assembly - $s0 和 $s1 MIPS 程序集的交换值

> ID：15348523
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:44.987
> 
> 标签：assembly, exchange-server, mips

我正在使用 MARS 模拟器，但在交换/交换 $s0 和 $s1 的值时遇到问题。如果有人可以提供解决方案，将不胜感激。

# android - 如何在记录位置之前等待 GPS 定位

> ID：15348526
> 
> 赞同：3
> 
> 时间：2013-03-11T21:00:46.680
> 
> 标签：android, service, gps, locationlistener

我无法在我的 Android 应用程序中找到等待 GPS 修复的方法。我正在运行一项服务来记录用户位置，并希望在执行此操作之前等待 GPS 修复。任何人都可以提出一种方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:11:31.513

这确实是关键的事情之一。你会遇到问题，要么你可能有一个不准确的修复，要么你正在等待一个准确的修复，而用户在你的应用程序中没有得到位置反馈。

这在很大程度上取决于您的应用程序。
您可以等到`location.getAccuarcy()`30m 以下，或第一个速度超过 x km/h 的应用程序，您想要记录运动的地方。

要在地图上显示，您想先获得。

对此没有普遍的灵魂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:43:40.077

只需获取一个 locationManager 并请求 GPS 的位置更新。不要调用 getLastKnownLocation。当您获得固定 GPS 的 onLocationChanged() 时。

# function - 如何从 GUI 中的编辑框中检索数据

> ID：15348527
> 
> 赞同：0
> 
> 时间：2013-03-11T21:00:53.610
> 
> 标签：function, matlab, user-interface, user-defined-functions

我的 GUI 中有一个编辑框。用户在编辑框中输入一个数字，然后按下按钮。当按下按钮时，调用外部函数。对于外部函数，我需要在编辑框中输入的数字。我如何使用“句柄”来检索编辑框中的数据输入？

这是我的打开功能的代码

```
% --- Executes just before NEWSTALLGUI is made visible.
function NEWSTALLGUI_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to NEWSTALLGUI (see VARARGIN)

% Choose default command line output for NEWSTALLGUI
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);
set(handles.EnterSpeed,'string','0');

% UIWAIT makes NEWSTALLGUI wait for user response (see UIRESUME)
% uiwait(handles.figure1); 
```

这是我的编辑框的代码

```
function EnterSpeed_Callback(hObject, eventdata, handles)
% hObject    handle to EnterSpeed (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of EnterSpeed as text
%        str2double(get(hObject,'String')) returns contents of EnterSpeed as a double
user_speed=str2double(get(handles.EnterSpeed,'string')); 
```

这是我的按钮的代码

```
% --- Executes on button press in Calculate.
function Calculate_Callback(hObject, eventdata, handles)
% hObject    handle to Calculate (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
Newfunction(user_speed); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:39:29.387

看这个：[GUI问题，无法使用句柄存储变量](https://stackoverflow.com/questions/15325567/problems-with-gui-unable-to-use-handles-to-store-variables/15329484#15329484)

基本上使用：editnum = get(editbox_handle,'string');

然后您可能希望将其转换为数字。

编辑：

```
function NEWSTALLGUI_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to NEWSTALLGUI (see VARARGIN)

% Choose default command line output for NEWSTALLGUI
handles.output = hObject;
handles.user_speed = 0;

% Update handles structure
guidata(hObject, handles);
set(handles.EnterSpeed,'string','0');

% UIWAIT makes NEWSTALLGUI wait for user response (see UIRESUME)
% uiwait(handles.figure1); 
```

-

```
function EnterSpeed_Callback(hObject, eventdata, handles)
% hObject    handle to EnterSpeed (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of EnterSpeed as text
%        str2double(get(hObject,'String')) returns contents of EnterSpeed as a double
handles.user_speed=str2double(get(handles.EnterSpeed,'string')); 
```

-

```
function Calculate_Callback(hObject, eventdata, handles)
% hObject    handle to Calculate (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
Newfunction(handles.user_speed); 
```

-

我认为您也可以只使用：

```
Newfunction(str2double(get(handles.EnterSpeed,'string'))); 
```

但无论什么漂浮你的船。此外，在调用 Newfunction 之前，您还应该检查输入是否也是数字……在数字以外的其他东西上使用 str2double 将返回“[]”。

# css - 绝对定位和可滚动 DIV

> ID：15348528
> 
> 赞同：4
> 
> 时间：2013-03-11T21:00:56.840
> 
> 标签：css

我有这个棘手的 CSS 问题：我有这个 HTML：

```
<div id="wrapper">
    <div class="left"></div>

    <div id="scroll">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque faucibus volutpat turpis at iaculis. Proin at nisl leo. Morbi nec blandit leo? Pellentesque interdum nunc sed nisl rhoncus gravida. Nunc sollicitudin, mi sit amet porta mollis, metus erat ornare odio, eu accumsan mauris diam nec augue. Ut tincidunt dui at lorem consequat vitae consectetur sapien pharetra. Suspendisse potenti. Donec turpis enim, varius accumsan congue vitae, rhoncus ut justo. Curabitur tristique lobortis eros ut pharetra. Maecenas non condimentum justo. Integer tincidunt; velit quis auctor varius, magna lorem pharetra urna, eget pellentesque leo nibh at mi. Ut pretium bibendum dui vel venenatis. Proin vel sem vitae lacus tincidunt bibendum. Pellentesque blandit mauris sit amet mauris sollicitudin pretium. In molestie condimentum nisi placerat consequat.
    </div>

    <div class="right"></div>
</div> 
```

使用这个 CSS：

```
#wrapper {
    position: relative;
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    height: 47px;
}

#scroll {
    position: relative;
    height: 100%;
    width: 10000px;
}

div.left, div.right {
    position: absolute;
    display: block;
    background-color: rgba(255, 0, 0, 0.5);
    width: 24px;
    height: 100%;
    z-index: 100;
    top: 0;
}

div.left {
    left: 0;
}

div.right {
    right: 0;
} 
```

视觉结果是这样的： ![在此处输入图像描述](../Images/397d17503abb9833eaaad73691ac700a.png)

出于某种原因，`div.right`当我滚动`#scroll`. 我希望它始终漂浮在`#wrapper`.

这就是我现在得到的： ![在此处输入图像描述](../Images/aa7e608167707af2519863ce78251c9f.png)

这是jsfiddle：http: [//jsfiddle.net/b5fYH/](http://jsfiddle.net/b5fYH/)

谢谢

**编辑**

仅仅因为它不明显，它必须在移动设备上工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:05:13.053

`position: absolute`你必须知道和之间的区别`position: fixed`。

第一个意味着：将元素放置在相对元素内的绝对位置并保持在那个位置（相对）。

第二种：将元素放在**窗口**（框架）内的绝对位置，无论发生什么都保持在那里。

检查这个小提琴：http: [//jsfiddle.net/b5fYH/1/](http://jsfiddle.net/b5fYH/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:16:58.190

The problem is with how overflow-x changes the wrapper div width.

The solution I found was:

Demo: [http://jsfiddle.net/5jWpG/](http://jsfiddle.net/5jWpG/)

1.  wrapping the whole thing with a new div with the id wrapper-container
2.  then adding the following CSS code:

    ```
    #wrapper-container {
        position: relative;
    }

    #wrapper {
        position: static; /* or remove position relative from your code */
    }

    div.left, div.right {
        bottom: 16px; 
        height: auto; /* or remove height: 100% from your code */
    } 
    ```

# matlab - 如何轻松查看工作区中 (x,y,z) 数组的每个条目的内容？

> ID：15348530
> 
> 赞同：0
> 
> 时间：2013-03-11T21:01:01.110
> 
> 标签：matlab, matrix

我希望能够在 Matlab 工作区中显示 M(1,:,:)、M(2,:,:) 等。但这仅显示 M(:,:,1)...

![在此处输入图像描述](../Images/d540612b17e27c353fc090e011874612.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:02:57.770

您可以尝试使用以下方法移动矩阵的尺寸：

```
permute(val, [3 1 2]) 
```

这实质上是旋转矩阵，使得第 3 维是第 1 维，第 1 维是第 2 维，第 2 维是第 3 维。

# c++ - 从 C++ 中的给定文件点读取目录

> ID：15348532
> 
> 赞同：3
> 
> 时间：2013-03-11T21:01:05.690
> 
> 标签：c++, file, directory

我有两个程序将同时读取/写入文件到同一个目录（但不是同时读取相同的文件）。我已经完成了写作部分，但我正在努力实现阅读目录部分的一半体面和工作实施。

目录中的文件遵循以下命名方案： `Image-[INDEX]-[KEY/DEL]--[TIMESTAMP]`

`[INDEX]`根据图像是键还是增量帧以及文件创建时的 Unix/Linux 纪元时间，从 递增`000000`，交替。`[KEY/DEL]``[TIMESTAMP]`

现在，读取程序`dirent.h`每次需要在目录中查找图像时，一次读取一个文件（使用库）。当目录变得非常大时，我想这个操作/方法会很快变得非常耗费资源，并最终失败。所以，我正在尝试寻找一种替代方法。我正在考虑在初始化时读取整个目录，并将文件信息保存在一个数组中以便稍后在程序中访问/使用。然后，当请求一个不在数组中的文件时，程序将通过读取目录来更新文件数组，但这一次从它在初始化结束时停止的点开始。

这可能吗？在目录中的已知点（最后一个文件“读入”）开始读取目录中的文件名？还是我每次都必须从头开始？

或者有没有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:38:42.770

正如安德鲁所说，在尝试解决它之前，我会确认这实际上是一个问题。

如果您可以忽略创建文件不按顺序创建的可能性，也就是说，在该文件之后创建另一个文件之前您不希望处理任何文件，那么您可以使用此方法。

首先，将整个目录列表读入一个数组或`vector`. 然后，在迭代文件时，只需迭代向量。最后，如果找不到文件或到达矢量的末尾，请刷新它以防万一创建了更多文件。

毫无疑问，您会希望将此逻辑封装到某种上下文对象中，该对象会记住上次读取的文件。您还可以通过对向量进行排序来进行优化。

# android - 如何将地理定位参数 lat/long 设置/发送到 Android-x86 模拟器

> ID：15348533
> 
> 赞同：1
> 
> 时间：2013-03-11T21:01:09.490
> 
> 标签：android, android-x86

我从网站[Android x86 4.0 RC2 reconfigure keyboard](http://sourceforge.net/projects/androidx86rc2te/)下载了一个 Android iso 。

安装 VirtualBox，选择 Linux 发行版，256 MB RAM，8 GB HDD。

我将iso加载到CD中，最后安装到虚拟硬盘上，模拟器运行流畅。

我允许在开发人员设置中模拟位置。

在我的主机上执行命令后，我可以使用 NAT* *** *通过导航器连接到互联网

```
VBoxManage modifyvm AndroidVM --natpf1 adb,tcp,*,5555,*,5555 
```

******如果我选择了无法设置以太网的网桥适配器，netcfg eth0 dhcp 会产生超时*

我可以从主机连接 adb

```
adb connect localhost 
```

我检查了设备是否已连接：

```
 C:\Android\android-sdk\platform-tools>adb devices
  List of devices attached
  localhost:5555  device 
```

但是当我尝试将地理位置设置/发送到模拟器时......

*   通过 Eclipse--> The Emulator Controls -> Locations 控件。它不允许我编辑纬度/经度并发送它。

*   如果我尝试使用 telnet localhost 5555 进行连接，那么我可以使用 geo 命令，会出现黑屏，如果我按下任何按钮，光标会移动但什么也没有出现。

*   最后，我尝试安装蓝牙 GPS 应用程序，但是当 Google Play 由于某种原因似乎链接了一个帐户时，没有检测到网络并且我无法继续，即使我之前在浏览器中的 google play 网站上注册过。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:26:11.217

首先，确定目标模拟器实例的控制台端口号。例如，启动的第一个模拟器实例的控制台端口号是 5554。接下来，连接到目标模拟器实例的控制台，指定其控制台端口号，如下所示：

```
$ telnet localhost 5554 
```

从android控制台你可以执行

```
geo fix <longitude value> <latitude value> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T13:05:20.727

在 Android x-86 上不运行 Telnet 服务器。这就是您看到黑屏的原因。您可以安装 SSH Server 3.1.apk 来运行 Telnet 服务器。但在 Android x-86 中将无法识别 geo fix 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-28T10:04:04.467

如果您想通过某种管道设置地理位置，您可能会发现此 vbs 脚本可用：

```
Set client = CreateObject("WScript.Shell")
Set fso = CreateObject("Scripting.FileSystemObject")
auth_token_file = "C:\Users\" & CreateObject("WScript.Network").UserName & "\.emulator_console_auth_token"

WScript.Sleep 500
client.SendKeys"telnet localhost 5554"
client.SendKeys("{Enter}")
WScript.Sleep 1600
client.SendKeys"auth "
client.SendKeys fso.OpenTextFile(auth_token_file, 1).readAll
client.SendKeys("{Enter}")
WScript.Sleep 1600
client.SendKeys"geo fix 15.9666 45.8154"
WScript.Sleep 1600
client.SendKeys("{Enter}")
WScript.Sleep 1600
client.SendKeys"exit"
client.SendKeys("{Enter}")
client.SendKeys("{Enter}") 
```

# java - 运行应用程序时eclipse挂起（应用程序运行良好，eclipse是挂起的）

> ID：15348538
> 
> 赞同：4
> 
> 时间：2013-03-11T21:01:24.023
> 
> 标签：java, linux, eclipse

我有一个应用程序，它会在通过 eclipse 运行时导致 eclipse 本身挂起。如果我将此应用程序导出为 jar 并运行它，它工作正常。但是如果我运行（或调试）它，应用程序将出现启动（根据 ps）并运行；但 eclipse 本身会挂起，并报告为没有 CPU 或内存使用的“停止”程序。我在这个应用程序的第一行放置了一个断点，在 eclipse 停止之前它甚至没有到达那里。如果我强行将日食从停止状态唤醒，它将起作用；但它也会失去与我启动的程序的联系。我要调试的程序将继续运行，但在我恢复停止的 eclipse 后，eclipse 无法控制或杀死它。

我可以运行许多其他应用程序而不会出现 eclipse 的问题。奇怪的是我之前遇到过这个问题，然后我可以运行我的应用程序一天，现在我又回到了原来的问题。我不知道重要的人之间发生了什么变化。

任何人都可以建议可能导致此问题的原因或如何修复它？

更新：

我做了一些更多的 linux 魔术。似乎 eclipse 在等待命令时停止了： sh -c stty -lcanon min 1

似乎在那之前有一个 sh （已失效）命令也挂起而没有被收割几分钟，我认为这使 eclipse 无法正常运行；如果我等待足够长的时间， sh （已失效）最终会消失；但随后我刚刚链接的 sh 命令出现了。我不知道原来失效的 SH 命令是什么；在它失效之前，我无法以足够快的速度捕捉它。这两个问题都只发生在 eclipse 中；作为一个 jar 文件，这个程序运行得非常好。

我的假设是eclipse没有正确获取或处理sigchild？这至少可以解释 sh （已失效）应用程序。它没有解释当前未显示为已失效的 SH 命令；尽管它应该在几秒钟内执行？

更新 2.0：

我找到了这个链接： http: [//linux.about.com/od/srl_howto/a/hwtsrl13t04_3.htm](http://linux.about.com/od/srl_howto/a/hwtsrl13t04_3.htm) 基本上 stty 在使用 < /dev/tty 语法时会挂起；这就是为什么不推荐使用该语法并用较新的语法替换的原因。我很确定这是问题所在。可悲的是，我无法弄清楚哪个库正在使用已弃用的命令。我认为这一切都是从构建 ConsoleReader 开始的；但谁知道实际运行冻结命令的代码是什么？此外，如果这是在 linux 环境中从 eclipse 运行 consoleReader 的任何人都会遇到同样的问题；我认为可以安全地假设情况并非如此，否则它将被记录在整个网络上；所以也许我的理解仍然存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T09:03:01.883

它与为附加控制台而创建的 stty 进程的配置有关，因此只会在类似 UNIX 的系统上发生。似乎在当前 2.11 jline 版本上已修复。

要绕过该问题，您可以使用以下命令禁用特殊的 unix-terminal 功能：

`-Djline.terminal=none`

作为 Eclipse 启动配置中的 VM 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:39:54.257

尝试在eclipse安装的根目录中增加`-Xms<abc>m/-Xmx<efg>m`（取决于系统内存） 。`eclipse.ini`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:20:44.750

问题是我们使用的是旧版本的“jline”，它使用了已弃用的功能。新的 jline jar 解决了这个问题，因为它不再使用已弃用的 stty 调用。我不太确定为什么日食每次都会导致这种情况发生；似乎它应该是一个间歇性错误，但 jline 绝对是原因。

# pdf - 为多页 tiff 设置光度解释标签

> ID：15348539
> 
> 赞同：1
> 
> 时间：2013-03-11T21:01:25.427
> 
> 标签：pdf, split, tiff

在尝试将多页文档从 tiff 转换为 pdf 时，我遇到了以下问题：

```
↪ tiff2pdf 0271.f1.tiff -o 0271.f1.pdf
tiff2pdf: No support for 0271.f1.tiff with no photometric interpretation tag.
tiff2pdf: An error occurred creating output PDF file. 
```

有谁知道这是什么原因以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:01:25.427

这是因为多页 tiff 中的一个或多个页面没有设置[光度解释](http://www.awaresystems.be/imaging/tiff/tifftags/photometricinterpretation.html)标签。这是一个必需的标签，因此这意味着您的 tiff 在技术上是无效的（尽管我敢打赌它们无论如何都可以正常工作）。

要解决此问题，您必须识别没有设置光度解释集的页面（或页面）并进行修复。

要识别页面，您可以简单地运行以下命令：

```
↪ tiffinfo your-file.tiff 
```

这将为您的 tiff的**每一**页吐出信息。对于每个好的页面，您会看到如下内容：

```
TIFF Directory at offset 0x105c0 (67008)
  Subfile Type: (0 = 0x0)
  Image Width: 1760 Image Length: 2639
  Resolution: 300, 300 pixels/inch
  Bits/Sample: 1
  Compression Scheme: CCITT Group 4
  **Photometric Interpretation: min-is-white**
  FillOrder: msb-to-lsb
  Orientation: row 0 top, col 0 lhs
  Samples/Pixel: 1
  Rows/Strip: 2639
  Planar Configuration: single image plane
  Software: ScanFix(TM) Enhanced ImageGear Version:  11.00.024
  DateTime: Mon Oct 31 15:11:07 2005
  Artist: 1996-2001 AccuSoft Co., All rights reserved 
```

如果您的页面不好，它将缺少该`photometric interpretation`部分，您可以通过以下方式修复它：

```
 ↪ tiffset -d $page-number -s 262 0 your-file.tiff 
```

请注意，零值是光度解释键的默认值，即 262。您可以在上面的链接中查看此键的其他值。

如果您的 tiff 有很多页面（就像我的那样），您可能无法通过肉眼轻松识别不良页面。在这种情况下，您可以采取蛮力方法，将所有页面的光度解释设置为默认值。

```
# First, split the tiff into many one-page files
↪ tiffsplit your-file.tiff
# Then, set the photometric interpretation to the default for all pages
↪ find . -name '*.tiff' -exec tiffset -s 262 0 '{}' \;
# Then rejoin the pages
↪ tiffcp *.tiff -o out-file.tiff 
```

大量的虚拟工作，但完成了工作。

# php - 在Android中将新数据添加到数据库后更新listview

> ID：15348540
> 
> 赞同：3
> 
> 时间：2013-03-11T21:01:26.287
> 
> 标签：php, android, mysql, json, chat

我想制作聊天室 Android 应用程序，我使用 JSON 作为 Web 服务，使用 PHP、MYSQL 并在我的 android 应用程序中解析它。最初能够看到数据，但即使在我的数据库中更新后也无法更新我的应用程序中的数据，我必须重新运行应用程序以获取更新的数据。我该如何解决这个问题。

代码：

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Timer;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

//import com.mekya.R;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AllProductsActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> all_chat;

    // url to get all products list
    private static String url_all_products = "http://url.com/chat-app/";

    // JSON Node names
    private static final String TAG_CHAT = "chat";
    private static final String TAG_FROM = "from_u";
    private static final String TAG_MESSAGE = "message";
    private static final String TAG_DATE = "date";

    // products JSONArray
    JSONArray chat = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_products);

        // Hashmap for ListView
        all_chat = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();  

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                    // products found
                    // Getting Array of Products
                    chat = json.getJSONArray(TAG_CHAT);

                    // looping through All Products
                    for (int i = 0; i < chat.length(); i++) {
                        JSONObject c = chat.getJSONObject(i);

                        // Storing each json item in variable
                        String date = c.getString(TAG_DATE);
                        String from = c.getString(TAG_FROM);
                        String message = c.getString(TAG_MESSAGE);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_DATE, date);
                        map.put(TAG_FROM, from);
                        map.put(TAG_MESSAGE, message);

                        // adding HashList to ArrayList
                        all_chat.add(map);
                    }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread

            runOnUiThread(new Runnable() {

                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, all_chat, R.layout.list_item, new String[] { TAG_FROM,TAG_DATE, TAG_MESSAGE },
                            new int[] { R.id.from,R.id.date, R.id.message });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:05:04.813

过程应该是这样的，

假设这是您的 url：`http://www.xxx.com/get_chat.php?id=""` 服务器应该根据 id 参数发送响应。如果它什么都没有，则发送整个列表，否则发送比该 ID 更新的新数据。

所以，第一次你会得到整个列表，然后服务器会根据最后一项的 id 发送新数据。根据您提到的内容，我假设您可以更新数据库。

现在假设您有一个计时器，并且您的应用程序每秒钟向服务器发送一次请求（如果您想让它成为现实，这是一个可怕的假设。假设每秒钟有 10000 台设备向服务器发送请求！）。 **如果没有数据**：不要做任何事情（应该检查 onPostExecute 方法） **如果有数据**：从数据库中获取整个列表（因为之前添加了新数据，因此您将更新项目）和将其传递给您的适配器。

希望它可以帮助你:)

# matlab - Matlab: conv() -> fft() * fft() -> ifft()

> ID：15348541
> 
> 赞同：1
> 
> 时间：2013-03-11T21:01:28.190
> 
> 标签：matlab, signal-processing, fft, convolution

祝大家有美好的一天！

我试图解决通过观察其卷积与一些已知的脉冲响应来获得原始信号的基本问题。

但是我得到的结果在某种程度上是完全错误的，可能我在这里混合了不同的错误步骤。我已经在这里和developpez等其他网站上查看了类似的主题，但未能找出原因。我将不胜感激任何帮助。

假设我的真实信号*f* [.] 只是时间 1 的脉冲，而脉冲响应*g* [.] 是高斯的。我通过 计算它们的卷积*h* [.] `conv()`，然后，基本上，想要找到`ifft( fft[h]./fft[g] )`，期望这是*f* [.]。

第一个问题是`conv()`创建一个包含*n+m-1 个*元素的数组，其中*n,m*是参数数组的长度。所以，要执行，`fft[h]./fft[g]`我需要用 g 的长度来做。这是我可能会做错的第一个可疑地方（请参阅代码）。正确的方法是什么？

第二个问题是我得到的东西与最初的真实信号非常不同。

第三个问题是我无法理解如何处理信号偏移。在 matlab 中，我必须使用正时间信号进行操作，但是，例如，高斯脉冲响应具有时间负和正时间元素，因此，要在这里使用它，我需要将它“向前”移动（窥视将向右移动），而不是我需要“取消移动”结果？

谢谢！

这是我的废话:)

```
close all;

TrueSignal = zeros( 101, 1 ); % impulse in t = 1.
TrueSignal( 1 ) = 1;
ImpulseResp = normpdf(-1:0.02:1)/normpdf( 0 ); % 101 elements array

figure;
subplot( 2,2,1 );
title('True signal')
plot( TrueSignal );
subplot( 2,2,2 );
title('Impulse response')
plot( ImpulseResp );

Conv = conv( TrueSignal, ImpulseResp ); % produces 201 elements array.
subplot( 2,2,3 );
title('Convolution')
plot( Conv );

% Wrong? I need a 201 elements array to represent the impulse response.
ImpulseResp_sparse = normpdf( -1:0.01:1 )/normpdf( 0 );
FIR = fft( ImpulseResp_sparse )/201;

Inverse = ifft( fft( Conv )./FIR ); % UPD Added fft() according to one of comments, bad mistake, but still not preventing.

subplot( 2,2,4 );
title('What is that???')
plot( abs( Inverse ) ); % It's weird! With no abs(), result is even more weird! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:04:04.967

直接使用`fft`for 卷积将导致[循环卷积](http://en.wikipedia.org/wiki/Circular_convolution)，而您想要（以及做什么`conv`）是[线性卷积](http://en.wikipedia.org/wiki/Convolution)。因此，要实现这样的方案`fft`，您必须将信号零填充到长度`m+n-1`。

这是一个示例，显示`conv`和`fft`基于线性卷积的输出之间的等价性：

```
x=rand(4,1);y=rand(3,1); %sample data
out1=conv(x,y);          %output from conv()
X=fft(x,6);Y=fft(y,6);   %zero pad and compute fft
out2=ifft(X.*Y);         %output from fft based lin. conv. 
```

您可以检查它们是否相同（在 FP 精度范围内）`out1`。`out2`

以这种方式重新表述你的问题，你应该很高兴。我不知道你在问什么 re: shifts，但你可能想看看`fftshift`and `ifftshift`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:49:00.100

1.  您可能希望使用`filter(g, 1, f)`而不是`conv(g, f)`避免结果长度的问题。或剪切生成的数组。
2.  看起来你忘了做一个 fft：`Inverse = ifft( fft(Conv)./FIR );`

这对我有用：

```
 close all;

   TrueSignal = zeros( 101, 1 ); % impulse in t = 1.
   TrueSignal( 1 ) = 1;
   ImpulseResp = normpdf(-1:0.02:1)/normpdf( 0 ); % 101 elements array

   figure;
   subplot( 2,2,1 );
   title('True signal')
   plot( TrueSignal );
   subplot( 2,2,2 );
   title('Impulse response')
   plot( ImpulseResp );

   Conv = filter( TrueSignal, 1, ImpulseResp ); 
   subplot( 2,2,3 );
   title('Convolution')
   plot( Conv );

   fftConv = fft(Conv);

   FIR = fft( ImpulseResp );

   Inverse = ifft( fftConv./FIR );

   subplot( 2,2,4 );
   plot( abs( Inverse ) ); 
```

1.  如前所述，FFT 假设信号是周期性的。如果要分析非周期信号，则需要使用“加窗 FFT”算法来提高质量。它几乎是一样的，但是你要把你的输入乘以一个特殊的窗口函数（例如[Blackman](http://www.mathworks.com/help/signal/ref/blackman.html)）。添加填充也有效，但它是计算量最大的方式。

# ruby-on-rails - Ruby 三元运算符似乎没有处理散列分配

> ID：15348543
> 
> 赞同：0
> 
> 时间：2013-03-11T21:01:34.513
> 
> 标签：ruby-on-rails, ruby

在学习ruby的过程中（本人有java背景）。

我有赋值语句，其中一个的值`hash[:name_field]`被分配给另一个。但是来自右侧哈希的值有时是空白的。这使我的代码崩溃，因此我添加了三元逻辑`.nil ?`等......

我很惊讶这不起作用......错误是：

```
undefined method `nil' for 1133:Fixnum (NoMethodError) 
```

下面是代码：

```
people_traffic.each do |person|

  person_record = DaysTraffic.new 

  person_record[:name] = person[:name_filed].nil ? 0 : person[:name_filed]
  person_record[:age]  = person[:age_field].nil ? 0 :  person[:age_field]

  person_record.save
end 
```

为什么我会`(NoMethodError)`得到`nil?`

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T21:02:46.773

应该是`.nil?`（带问号）不是`.nil`。所以在你的情况下，那将是：

```
person_record[:name] = person[:name_filed].nil? ? 0 : person[:name_filed] 
```

实际上，您可以像这样写得更简单：

```
person_record[:name] = person[:name_filed] || 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T21:06:25.740

因为`#to_i`变成这样写的好方法是`nil`：`0,`

```
person_record[:age] = person[:age_field].to_i 
```

# java - 我的网站上的加密设计问题

> ID：15348544
> 
> 赞同：0
> 
> 时间：2013-03-11T21:01:36.550
> 
> 标签：java, javascript, rest, encryption

我正在构建我的网站，在该网站中我面临着实施加密的问题。我正在使用 Java 中的 RESTful Web 服务开发它。

我发现 GibberishAES API 用于从 javascript 进行加密。加密的消息现在进入网络服务，但我不知道如何在（java）网络服务中解密它。我知道 GibberishAES 在 java 中不可用，但是有什么迂回的方法吗？

或者，是否有任何同时支持 Java 和 Javascript 的加密 API？

我也有网站的（对称）密钥分配问题。它将有 100 个客户端（机器，在公共网络中），我不知道如何将特定机器的唯一密钥传达给它。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:28:19.533

[GibberishAES](http://webscripts.softpedia.com/script/Security-Systems/Gibberish-AES-66219.html) implements AES encryption. AES is a symmetric cipher, that means that both parties must know a shared key. The problem of distributing the key is not trivial, and there exist well-known algorithms for doing so.

As it was mentioned in some comments, SSL already solves that problem, because it negotiates the generation of a distributed secret key, that is later used for encryption. If for any reason you cannot use SSL, you should adopt some mechanism for secure generation or transport of the secret key. For instance, you could generate a ephimeral RSA key pair in the client, send the public key to the server, and have the server return the secret (AES) key in wrapped form.

# paypal - 如何在新的 Paypal 沙盒上测试增强的定期付款标准？

> ID：15348548
> 
> 赞同：2
> 
> 时间：2013-03-11T21:02:01.157
> 
> 标签：paypal, paypal-sandbox, recurring

我的网站有一个测试环境，我通常在上线之前使用 Paypal Sandbox 来测试交易。我想测试增强的定期付款功能，但我找不到这样做的选项（添加更多功能的链接将我定向到实时站点），我在 Google 上找到的任何内容都没有给出答案更改后如何在 Paypal Sandbox 上测试增强的定期付款。

Paypal Sandbox 是否支持 ERP，或者我只是不知道如何访问此选项？任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:56:24.430

在此处注册沙盒：[https ://www.sandbox.paypal.com/us/cgi-bin/?cmd=_product-go&product=premium_services](https://www.sandbox.paypal.com/us/cgi-bin/?cmd=_product-go&product=premium_services)

（出于好奇，我通过访问 paypal.com/erp 然后在生成的 URL 的 paypal.com 前面添加“sandbox.”来获得此 URL）

使用您的测试帐户电子邮件/密码登录（类似于 aaaaaa_############_biz@emaildomain.com ）

如果它显示“请登录以使用 PayPal 沙盒功能。”，这是正在开发的新沙盒的问题 - 现在，清除所有 paypal.com cookie，再次登录 developer.paypal.com，然后然后再次访问上述网址

# spring - spring 的环境特定 log4j 配置

> ID：15348550
> 
> 赞同：18
> 
> 时间：2013-03-11T21:02:07.750
> 
> 标签：spring, log4j

我正在使用传统方式加载 log4j.xml

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:conf/log4j.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

这工作正常，但现在我需要根据我所在的环境加载不同的 log4j.xml 文件，该环境由环境变量/jndi 条目定义.. 所以我希望使用新的 spring 3.1 属性管理我可以改变这个至

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:conf/log4j-${ENV-NAME}.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

并且 spring 将在每个环境中加载正确的 log4j 文件，但这可能不起作用，因为 web.xml 是在 spring 之前加载的。我遇到了这种方法

```
<bean id="log4jInitialization" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
<property name="targetClass" value="org.springframework.util.Log4jConfigurer" />
<property name="targetMethod" value="initLogging" />
<property name="arguments">
 <list>
  <value>log4j-${ENV-NAME}.xml</value>
 </list>
</property>
</bean> 
```

所以本质上将 log4j 的配置移动到 spring 上下文文件而不是 web.xml 中。但这也不起作用，因为某种原因，日志记录是以记录所有内容的方式启用的。那么如何根据环境变量使用不同的 log4j.xml 文件或在 servletcontextlistener 中以编程方式加载它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T16:47:06.147

帮助adeelmahmood为时已晚，但希望其他人能从我的回答中受益。事情是adeelmahmood是对的，这个配置：

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:conf/log4j-${ENV-NAME}.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

正在工作，但是：

*   Log4jConfigListener 应该在 web.xml 中的 ContextLoaderListener 之前注册！！！
*   您还必须记住，Log4jConfigListener 假定一个扩展的 WAR 文件。

然后，如果设置了 ENV-NAME 环境变量，它将按预期工作。

顺便说一句，${ENV-NAME} 也可以在 spring 配置文件中使用！这还不是全部......您还可以使用我们的 env.property 设置弹簧配置文件：

```
<context-param>
 <param-name>spring.profiles.active</param-name>
 <param-value>${ENV-NAME}</param-value>
</context-param> 
```

这样，您可以使用一个相同的环境设置 log4jConfigLocation 和 spring 配置文件。多变的。

顺便说一句，以防万一：使用 Maven 配置文件为开发、测试和生产进行单独的构建并不是好的做法。阅读例如。[http://java.dzone.com/articles/maven-profile-best-practices](http://java.dzone.com/articles/maven-profile-best-practices)并记住：“使用配置文件来管理构建时变量，而不是运行时变量，而不是（极少数例外）工件的替代版本” .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-27T13:20:23.543

这可能对最近的读者也有帮助：在 Log4j 2.7（但它可能更旧）中，参数名称已更改：请参阅接口`Log4jWebSupport`：

```
/**
 * The {@link javax.servlet.ServletContext} parameter name for the location of the configuration.
 */
String LOG4J_CONFIG_LOCATION = "log4jConfiguration"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-20T07:00:54.067

默认情况下，Spring Boot 从系统的默认位置（例如`classpath:logback.xml`Logback）获取本机配置，但您可以使用`logging.config`属性设置配置文件的位置。

`logging.config=classpath:log4j-<ENV-NAME>.xml`

[https://docs.spring.io/spring-boot/docs/2.0.0.RELEASE/reference/html/howto-logging.html](https://docs.spring.io/spring-boot/docs/2.0.0.RELEASE/reference/html/howto-logging.html)

# c++ - while() 不同的输出；同一个变量

> ID：15348552
> 
> 赞同：0
> 
> 时间：2013-03-11T21:02:21.677
> 
> 标签：c++, while-loop

如果可能的话，我想知道C++中的**while 是如何****解释**这两个不同的代码的。

它们两者之间的区别在于，第一个 while 是从已经给定值的前一个 var 加载的，而第二个代码是在执行 while 时给出变量的值。

下面的代码是一个非常简单的“打印目录中的所有文件”程序的一部分

第一个。**执行 while 时给出值**。按预期返回所有文件

```
 ent = readdir(directory);
    if(ent == NULL){
        cout << "Cannot read directory!";
    }else{
        while((ent = readdir (directory)) != NULL){
        cout << ent->d_name; //this one is the one which works fine; value is given when doing the while
        }
    } 
```

2n。**在执行 while 之前给变量赋值**。返回具有第一个值的无限 bucle。

```
 ent = readdir(directory);
        if(ent == NULL){
            cout << "Cannot read directory!";
        }else{
            while((ent) != NULL){
            cout << ent->d_name; //this one returns an infinite bucle of only the first value of the while
            }
        } 
```

C++ 如何解释它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:05:34.640

你真的需要重新阅读那个教程......

***`while()`在每次迭代之前评估和检查语句的条件。***

所以这：

```
while ((ent = readdir(directory)) != NULL) 
```

将调用`readdir()`每次迭代，而另一个则不会。从这一点开始，你可以自己做逻辑，你会明白为什么它会这样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:05:00.407

您不会在每次迭代的第二个版本中重新评估`ent`。所以它的价值永远不会改变，因此如果你一旦进入循环，你将永远留在里面。

相反，在第一个版本中，代码`while((ent = readdir (directory)) != NULL)`将`ent`在每次迭代时分配一个新值，并且可能会退出循环一次`ent`（或者实际上`readdir(directory)`结果为 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:06:33.410

在第一个中， ent=readdir(directory) 导致它获取下一个目录，最终变为 null，并结束 while 循环。请注意，这也不会吐出第一个目录名称。

第二个永远不会改变 - 它只是不断检查 (ent) 中的值是否为空。所以它只会吐出第一个目录的名称，不会吐出其他任何东西，并且会一直如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:07:15.120

您的困惑可能来自对`readdir`. 您可能会认为`readdir`每次都返回相同的内容（“目录”或目录的“列表”） - 因此您对为什么两个代码存在差异感到困惑，而显然（对您而言）程序没有改变。然而，这种解释`readdir`是错误的！每次调用`readdir`都会返回一个指向目录中*下一个*文件的指针，因为系统会“记住”每次调用后您离开的位置。遍历完所有文件后，`readdir`最后返回`NULL`，此时`while`条件失败并退出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T21:12:50.767

在这段代码中

```
while((ent) != NULL){
    cout << ent->d_name;
} 
```

变量`ent`永远不会改变，所以一旦你进入while，你就会被困在那里。

在这段代码中

```
while((ent = readdir (directory)) != NULL){
    cout << ent->d_name;
} 
```

每次检查 while 条件之前都会更改变量`ent`，因此您有机会结束。

这是遍历目录树的正确方法，`readdir`称为递归。

# vb.net - 如何仅获取要重命名的文本中的最后一个字符串

> ID：15348557
> 
> 赞同：0
> 
> 时间：2013-03-11T21:02:34.630
> 
> 标签：vb.net, string, visual-studio, rename

我首先在我的richtextbox 中找到最后一个单词，然后检查该字符串是否与特定字符串匹配。

然后我用另一个字符串替换字符串。

问题是，每当我输入相同的字符串并单击我的“重命名”按钮时，它都会重命名两个字符串，因为如果两个字符串现在都是“狗”，那么它将把 lastWord 识别为狗，而不是最后输入的最近输入的单词，因此它将是重命名为别的东西。

```
private sub getwords()

    dval = dval + 1

    Dim lastWord As String = RichTextBox1.Text.Split(" ").Last

    If dval = 1 And lastWord = "meu" Then

        RichTextBox1.Text = RichTextBox1.Text.Replace(lastWord, "dog")

    End If

    MsgBox(lastWord)

    If dval = 2 And RichTextBox1.Text.EndsWith("dog") And lastWord = "dog" Then

        RichTextBox1.Text = RichTextBox1.Text.Replace(lastWord, "cat")
        dval =0
    End If

end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:32:07.133

这个天真的解决方案怎么样，它删除了最后一个单词，然后将它连接到最后。

```
private sub getwords()

    dval = dval + 1

    Dim lastWord As String = RichTextBox1.Text.Split(" ").Last

    If dval = 1 AndAlso lastWord = "meu" Then

        RichTextBox1.Text = RichTextBox1.Text.Remove(RichTextBox1.Text.Length - lastWord.Length) & "dog"

    End If

    MsgBox(lastWord)

    If dval = 2 AndAlso RichTextBox1.Text.EndsWith("dog") AndAlso lastWord = "dog" Then

        RichTextBox1.Text = RichTextBox1.Text.Remove(RichTextBox1.Text.Length - lastWord.Length) & "cat"
        dval = 0
    End If

End Sub 
```

# html - 用 JQuery Mobile 中的按钮填充整个内容区域

> ID：15348569
> 
> 赞同：1
> 
> 时间：2013-03-11T21:03:06.143
> 
> 标签：html, css, jquery-mobile

我正在使用 JQuery Mobile 创建一个包含页眉、内容和页脚区域的页面。整个内容区域必须分成两个部分，每个部分 50%，其中每个部分必须是一个按钮，没有任何圆角或间距，可以根据使用的设备和设备的布局（纵向或风景）。我尝试了几种方法，例如 with`data-role="controlgroup"`和 with`data-type="horizontal"`但它似乎没有提供我想要的。有人可以告诉我这是否可能，如果可以，应该使用哪些元素和属性？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:39:35.700

这是一个工作示例：http: [//jsfiddle.net/Gajotres/TfzPw/](http://jsfiddle.net/Gajotres/TfzPw/)

该解决方案需要：

1.  jQuery Mobile 网格（Omar 在他的评论中提到了它）

    ```
    <div class="ui-grid-a">
        <div class="ui-block-a"><a data-role="button" id="custom-btn">Button Left</a></div>
        <div class="ui-block-b"><a data-role="button" id="custom-btn">Button Right</a></div>
    </div><!-- /grid-a --> 
    ```

    官方文档：http: [//jquerymobile.com/demos/1.3.0-rc.1/docs/content/content-grids.html](http://jquerymobile.com/demos/1.3.0-rc.1/docs/content/content-grids.html)

2.  去除圆角：

    ```
    $(document).on('pagebeforeshow', '#index', function(){       
        $('a').buttonMarkup({ corners: false });
    }); 
    ```

    官方文档：http: [//jquerymobile.com/demos/1.3.0-rc.1/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.3.0-rc.1/docs/buttons/buttons-options.html)

3.  删除内容 div 上的填充：

    ```
    #index-content {
        padding: 0 !important;
    } 
    ```

4.  删除按钮边距：

    ```
    #custom-btn {
        margin: 0 !important;
    } 
    ```

# javascript - 添加到收藏夹数组

> ID：15348570
> 
> 赞同：0
> 
> 时间：2013-03-11T21:03:06.337
> 
> 标签：javascript, jquery, html, arrays

我想在 Javascript/Jquery 中做的是能够单击一个按钮（每个项目上的一个按钮），将其添加到数组中。然后，当您单击收藏夹页面时，该数组将按顺序发布。

我只是很难理解这将如何工作。因为我可能希望数组中的每个项目都包含一些内容，例如描述该项目的图片和文本。

在一般条款/示例中，这将如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:01:02.697

有很多方法可以做到这一点。但是，我会选择一个*更*通用的 - 你可以为自己扩展：

[http://jsfiddle.net/TEELr/11/](http://jsfiddle.net/TEELr/11/)

HTML：这只是用最喜欢的类创建不同的元素——这将是我们检查一个元素是否被点击的选择器。

```
<div class="favorite"><p>Add to favorites</p></div>
<div class="favorite type2"><p>Just another favorite type</p></div>

<button id="reveal">
    Reveal Favorites
</button> 
```

JS：

每次单击具有“最喜欢”的 CSS 类的元素时，它都会被添加到数组中 - 这也适用于具有多个类的元素（具有“最喜欢的”CSS 类）。

**现在，当单击“显示收藏夹”按钮时，它将提醒数组中的内容 - 按单击的顺序（按要求）。**

```
$(document).ready(function() {
    var favorites = [];
    var counter = 0;

    $('.favorite').click(function() {
        ++counter;
        favorites.push("\"" + $(this).text() + " " + counter + "\"");
    });

    $('#reveal').click(function() {
       alert(favorites); 
    });
}); 
```

CSS：

仅出于演示目的而存在的简单 CSS，以使用多个 CSS 类选择器证明前面的观点：

```
.favorite {
    width: 400px;
    height: 50px;
    line-height: 50px;
    text-align: center;
    display: block;
    background-color: #f3f3f3;
    border-bottom: 1px solid #ccc;
}

.favorite.type2 {
    background-color: #ff3;
}

.favorite:hover {
    cursor:hand;
    cursor: pointer;
} 
```

# jquery - 水平 div 不对齐

> ID：15348571
> 
> 赞同：0
> 
> 时间：2013-03-11T21:03:06.590
> 
> 标签：jquery, html, css

我在 Jquery 和[jsFiddle中创建了几行 div](http://jsfiddle.net/mwl707/JUbAY/2/)

生成的html是

```
<div id="thisPage">
  <div id="vehicles" class="wrapper">
    <div class="divd spacer">&nbsp;</div> 
    <div id="Paul " title="Driver Details" class="divd i100">i1001<br>Paul </div>
    <div id="Simon " title="Driver Details" class="divd i100">i1002<br>Simon </div>
    <div id="Phil " title="Driver Details" class="divd i100">i1003<br>Phil </div>
    <div id="Lee " title="Driver Details" class="divd i100">i1004<br>Lee </div>
    <div id="Martin" title="Driver Details" class="divd i100">i1005<br>Martin </div>
    <div id="" title="Driver Details" class="divd i100">i1006<br></div>
    <div id="Tom Robson" title="Driver Details" class="divd i60">i601<br>Tom Robson</div>
    <div id="Alan Linney " title="Driver Details" class="divd i60">i602<br>Alan Linney </div>
  </div>

  <div id="vehicles" class="wrapper" style="top:60px">
    <div id="2013-03-11" class="divd dateWeekday">Monday 11<br>March</div>
    <div id="Paul " title="Driver Details" class="divd i100"> JOB D </div>
    <div id="Simon " title="Driver Details" class="divd i100"> JOB D </div>
    <div id="Phil " title="Driver Details" class="divd i100"> JOB D </div>
    <div id="Lee " title="Driver Details" class="divd i100"> JOB D </div>
    <div id="Martin " title="Driver Details" class="divd i100"> JOB D </div>
    <div id="" title="Driver Details" class="divd i100"> JOB D </div>
    <div id="Tom " title="Driver Details" class="divd i60"> JOB D </div>
  </div>
</div> 
```

样式是

```
.wrapper {
    position:absolute; vertical-align:middle ; 
}
.divd { 
    display: inline-block;
    margin:2px 2px 2px 2px ;
    width: 50px;
    height: 50px;   
    border: 1px solid black;
    background-color:#999; 
    border-radius:5px;  
    z-index:200;
    text-align:center;
    vertical-align:bottom ;
}
.dateWeekday {
        width: 120px;
        background-color:#9CF ;
        margin:2px 2px 2px 2px ;
    }
.spacer {
        width: 120px;
        margin:2px 2px 2px 2px ;
    } 
```

一切正常，但浏览器中的结果显示第二行偏移到第一行，如下图红线所示，我该如何纠正这个？请问有什么帮助吗？

[屏幕抓取](http://i.stack.imgur.com/70s6Y.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:11:27.403

试试这个：

```
.wrapper {
    position:absolute; vertical-align:middle ; 
}
.divd { 
background-color: #999999;
    border: 1px solid black;
    border-radius: 5px 5px 5px 5px;
    display: inline-block;
    float: left;
    height: 50px;
    margin: 0 1px 0 0;
    text-align: center;
    vertical-align: bottom;
    width: 50px;
    z-index: 200;
}
.dateWeekday {
        width: 120px;
        background-color:#9CF ;
    }
.spacer {
        width: 120px;
    } 
```

所以现在你在每个 divd 上都有一个 1px 右侧的边距；

```
margin-right:1px; /* is the same as margin:0 1px 0 0; */ 
```

边距是这样工作的：

```
margin:topPX rightPX bottomtPX leftPX; /* if four */ 
```

或者：

```
 margin:top&bottomPX right&leftPX; /*if only two */ 
```

边距：2px 2px 2px 2px ; 是相同的：

```
 margin:2px; /* if just one its the same top+right+bottom+left */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:06:52.333

尝试：

```
.wrapper div {
   float: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:08:26.450

如果您正在使用 div 行，则应该为每行 div 提供一个包装器，如果您需要更改设计，这将有很大帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:21:44.223

```
.wrapper
 {
vertical-align:middle ;
float:left; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T21:50:20.943

我知道，这不是答案，我需要发布图片。

这是我从这台电脑上看到的。

![在此处输入图像描述](../Images/fdd282af72422c3d7a412377009156f5.png)

也许您可以**提供**有关您的情况的更多信息，例如**针对特定浏览器**、**完整的 html**代码（查看文档类型、BOM 标记、字符编码等）

# matlab - 未知标志错误差异集“稳定”

> ID：15348573
> 
> 赞同：0
> 
> 时间：2013-03-11T21:03:09.263
> 
> 标签：matlab, set

我正在尝试使用 diffset，设置稳定，但出现`Unknown flag.`错误。我也试过了`sorted`，但同样的错误适用。有不同的语法吗？

我的代码：

```
C = setdiff([4 1 3 2],[2 1],'sorted') 
```

我正在使用 Matlab 7.10.0 r2010a

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:54:39.043

如前所述，这可能是 MATLAB 版本问题。的行为`setdiff`在上一个版本中发生了变化，并且[在线文档](http://www.mathworks.com/help/matlab/ref/setdiff.html)仅涵盖了 MATLAB 的最新 2013a 版本，因此这可能是您感到困惑的一个原因。

也就是说，以前的 MATLAB 版本的文档[也可以在线获得](http://www.mathworks.com/help/doc-archives.html)（但请注意，它需要一个 MathWorks 帐户）。无论如何，您的 MATLAB 似乎具有较旧的`setdiff`命令实现，您可以通过以下方式验证：

```
help setdiff 
```

无论如何，当标志*setOrder*设置为时，旧实现`setdiff`的行为类似于新实现的行为。如果您想模仿标志*setOrder*设置为时的行为，则可以改用，例如：*`'sorted'`*`'stable'`[`ismember`](http://www.mathworks.com/help/matlab/ref/ismember.html)**

 **```
A = [4 1 3 2];
B = [2 1];
C = A(~ismember(A, B)) 
```

产生：

```
C =
     4     3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T00:43:14.757

这篇[文章](http://mrmartin.net/?p=269)提供了一个实现：

```
function [res]=setdiff_stable(a,b)
    if(size(a,1)>size(a,2))
        a=a';
    end
    if(size(b,1)>size(b,2))
        b=b';
    end
    res=a(sum(repmat(a,length(b),1)-repmat(b',1,length(a))==0,1)==0);
end 
```**

# tidesdk - Windows TideSDK 应用程序是否在沙盒中运行？

> ID：15348576
> 
> 赞同：1
> 
> 时间：2013-03-11T21:03:18.897
> 
> 标签：tidesdk

我在 TideSDK 中创建的 windows 软件，它是在沙盒中运行还是我可以完全访问文件系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:07:21.177

答案是肯定的和否定的。。

如果您正在加载来自本地硬盘/文件系统的页面，您将可以通过 window.Ti 对象完全访问文件系统。[您可以在此处](http://tidesdk.multipart.net/docs/user-dev/generated/)查看各种可用 API 的文档

其次，如果您正在加载任何远程服务器 url .. 您将无法访问任何扩展 api，因为“window.Ti”对象不可用。

# mysql - 在 PRIMARY KEY 上使用 AUTO_INCREMENT 的 MySQL 性能

> ID：15348579
> 
> 赞同：2
> 
> 时间：2013-03-11T21:03:44.883
> 
> 标签：mysql, primary-key, auto-increment

我使用 MySQL 5.6 将比较 INSERTing 行插入到一个空表中。

每个表都包含一个按 AUTO_INCREMENT 顺序递增的列（**升序**）和一对接收随机唯一数字的列（ **random_1**、**random_2 ）。**

在第一个测试中，**升序**是 PRIMARY KEY，（**random_1**，**random_2**）是 KEY。在第二个测试中，( **random_1** , **random_2** ) 是 PRIMARY KEY 并且**升序**是 KEY。

```
CREATE TABLE clh_test_pk_auto_increment (
   ascending_pk       BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, -- PK
   random_ak_1        BIGINT UNSIGNED NOT NULL,                -- AK1
   random_ak_2        BIGINT UNSIGNED,                         -- AK2
   payload            VARCHAR(40),
   PRIMARY KEY        ( ascending_pk ),
   KEY                ( random_ak_1, random_ak_2 )
)  ENGINE=MYISAM 
   AUTO_INCREMENT=1 
   ;

CREATE TABLE clh_test_auto_increment (
   ascending_ak       BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, -- AK
   random_pk_1        BIGINT UNSIGNED NOT NULL,                -- PK1
   random_pk_2        BIGINT UNSIGNED,                         -- PK2
   payload            VARCHAR(40),
   PRIMARY KEY        ( random_pk_1, random_pk_2 ),
   KEY                ( ascending_ak )
)  ENGINE=MYISAM 
   AUTO_INCREMENT=1 
   ; 
```

始终如一地，第二个测试（自动增量列*不是*PRIMARY KEY）运行得稍微快一些——5-6%。任何人都可以推测为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:08:37.033

主键通常用作数据实际存储的顺序。如果主键增加，则简单地追加数据。如果主键是随机的，这意味着必须移动现有数据以使新行进入正确的序列。基本（非主键）索引的内容通常要轻得多，并且可以以更少的开销更快地移动。

我知道其他 DBMS 也是如此；我敢猜测 MySQL 在这方面的工作方式类似。

**更新**

正如@BillKarwin 在下面的评论中所说，这个理论不适用于 MyISAM 表。作为后续理论，我会参考下面@KevinPostlewaite 的答案（他已被删除），问题是主键上缺少 AUTO_INCREMENT - 这必须是唯一的。使用 AUTO_INCREMENT 更容易确定这些值是唯一的，因为它们保证是增量的。对于随机值，实际遍历索引可能需要一些时间才能做出此决定。

# python - python中使用字典的变量扩展

> ID：15348582
> 
> 赞同：0
> 
> 时间：2013-03-11T21:03:55.550
> 
> 标签：python, function, dictionary, string-substitution, variable-expansion

我面临以下问题；

在我的脚本中的某个地方，我定义了一个函数

```
def lookup(type, value): 
    doctors = {'doctor1':"Smith", 'doctor2':"Rogers"}
    supervisors = {'super1': "Steve", 'super2': "Annie"}
    print type['value'] 
```

我从脚本的末尾调用这个函数，如下所示：

```
myDoc = 'super1'
lookup('supervisors', myDoc) 
```

但是我收到以下错误：

```
TypeError: string indices must be integers, not str 
```

为什么会发生这种情况，我该如何解决？

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:06:42.100

不要尝试从字符串中查找局部变量。只需将您的医生和主管存储在嵌套字典中：

```
def lookup(type, value): 
    people = {
        'doctors': {'doctor1': "Smith", 'doctor2': "Rogers"},
        'supervisors': {'super1': "Steve", 'super2': "Annie"}
    }
    print people[type][value] 
```

这导致：

```
>>> myDoc = 'super1'
>>> lookup('supervisors', myDoc)
Steve 
```

在极少数情况下，您*确实*需要动态引用局部变量，您可以使用[`locals()`function](http://docs.python.org/2/library/functions.html#locals)来做到这一点，它返回一个将局部名称映射到值的字典。请注意，在函数中，对`locals()`映射的更改不会反映在函数本地命名空间中。

# asp.net - HTML Textarea 读取换行符

> ID：15348586
> 
> 赞同：0
> 
> 时间：2013-03-11T21:04:20.817
> 
> 标签：asp.net, html, razor, textarea, newline

我有一个可以接受大块文本的 HTML 文本区域。textarea 需要读取换行符。

例如。如果有人键入以下内容：

* * *

堆栈溢出太酷了。

我喜欢它。

* * *

当我将它保存到数据库并再次打印出来时，它显示为：

堆栈溢出太酷了。我喜欢它。

我需要记录换行符（输入）。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:08:03.187

用 CKEditor 或 FCKEditor Enabled 控件替换 HTML 文本区域，这些控件根据用户输入获取并保存总 html 以供进一步使用和显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:08:21.170

对于 PHP，您可以使用函数 nl2br：

[http://ca3.php.net/manual/en/function.nl2br.php](http://ca3.php.net/manual/en/function.nl2br.php)

# iphone - 登录后加载信息objective-c

> ID：15348594
> 
> 赞同：0
> 
> 时间：2013-03-11T21:04:46.100
> 
> 标签：iphone, ios, objective-c, nsstring, uitableview

我有一个带有两个按钮的登录页面，一个用于 facebook 登录一个带有电子邮件并通过登录，登录后我将在表中加载一些信息，我的问题是加载这些信息的最佳方法是什么，为每个创建两个 .xib 文件 tableView登录，或者只是一个 .xib 文件。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:15:50.317

我建议以下解决方案：

1 创建第二个视图，将其命名为 ListVC.xib 之类的东西。

2 在ListVC 中添加一个名为listData 的成员NSMutableArray。

3 在你的第一个窗口中，说 loginVC.xib，你的每个按钮都会以自己的方式加载 NSMutableArray 中的数据。然后每个打开 ListVC.xib，并将 listData 成员设置为它刚刚加载的数组。

如果您使用此解决方案或类似的解决方案，您将不会使用几乎相同的代码创建 2 个 ViewController。基本上，复制和粘贴代码是不好的。如果你需要修改它，它会变得更加复杂。

# wpf - 在哪里可以找到 Metro 主题控件颜色定义？

> ID：15348602
> 
> 赞同：0
> 
> 时间：2013-03-11T21:05:13.120
> 
> 标签：wpf, xaml, user-interface, microsoft-metro, baml

我正在尝试使我的自定义控件在演示框架中的行为和外观与其他控件一样。我尝试使用 ILSpy 浏览 GAC，但似乎找不到“Metro”定义。

使用“SystemColors”下定义的颜色，不要想出与“native”控件匹配的颜色。

有没有人有任何提示？

即：热跟踪的颜色（在 SystemColors 中）与 WPF 文本框使用的颜色不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:39:16.223

看来“Metro”真的是“Aero2”。ILSpy 无法在 Aero2 的 baml 中达到峰值，但 MSDN 提供了 Aero2 的源代码。

# c# - 实体框架 - 从视图创建模型？

> ID：15348606
> 
> 赞同：4
> 
> 时间：2013-03-11T21:05:31.397
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我是 ASPNET 和 MVC 4 的新手，所以我想这可能是一个简单的问题。但是，我一直无法正确地用谷歌搜索答案。我只想显示一些销售信息 - 我*只*需要显示它。我不需要从基础表中插入、更新或删除。

有 3 个 SQL Server 表需要从中提取数据：CurrentSales、SalesPlans 和 AverageSales。我为此创建了一个 VIEW 并在其上放置了一个唯一的聚集索引；它包含一些外部连接，但具有处理任何不太可能的 NULL 值的逻辑。

我转到模型，添加一个新的 ADO.NET 实体数据模型，并将我的视图添加到模型中。它回来并说“表/视图'vw_FullView'没有定义主键。已推断出键并且定义被创建为只读表/视图。” 当我从此模型和实体创建控制器类时，加载网站时视图不显示任何数据。

但是，如果我创建一个完全空白的表 - 具有适当的主键 - 作为模型表，*然后*使用存储过程（作为函数导入）来检索我需要的数据，一切都很好。

这显然不是处理这个问题的正确方法。有没有办法从视图中创建强类型模型？我宁愿让 ASP.NET 中的 Controller 和 View 对象从模型中的 SQL 视图正确地自动生成，而不是需要这个空白表来“欺骗”系统。

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:19:14.847

实体框架不太喜欢视图。它无法确定视图的主键是什么，因此它假定任何不可为空的字段都是复合主键的一部分。

通常，在使用实体框架时避免使用视图。创建一个 linq 查询来执行您的视图所做的操作并使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-16T17:01:41.910

Entity Framework 确实不喜欢 SQL Server 视图，因为主键在视图中并不明显。不幸的是，在模型中指定 [Key] 似乎还不够。但是，它可以完成并且在 98% 的情况下非常有用，其中有一个视图组合了表，而您只想在网格中显示它的数据。关键（请原谅双关语）是正确定义视图。

我的原始视图包含以下列：

```
DepartmentCode(varchar(8),not null)
DepartmentName(varchar(60), not null)
DivisionCode(varchar(8), null)
DivisionName(varchar(8), null)
StatusCode(char(1), not null)
Virtual(varchar(1), not null) 
```

在我的模型中我指定

```
[Key]
[Column("DepartmentCode")]
[DatabaseGenerated(DatabaseGeneratedOption.None)]
[StringLength(8)]
[Display(Name = "Department Code")]
public string DepartmentCode { get; set; } 
```

当我搭建这个脚手架并显示索引视图时，我收到一个引用主键的错误。显然，实体框架假定所有非空字段都有助于主键。

删除额外的非空值就可以了。我使用以下命令强制视图中的列可以为空：

```
CREATE view [dbo].[Departments] as
select DepartmentCode
,nullif(DepartmentName,'') as DepartmentName
,nullif(DivisionCode,'') as DivisionCode
,nullif(DivisionName,'') as DivisionName
,nullif(StatusCode,'') as StatusCode
,nullif(Virtual,'') as Virtual
from .... 
```

现在视图列看起来像这样

```
DepartmentCode(varchar(8),not null)
DepartmentName(varchar(60), null)
DivisionCode(varchar(8), null)
DivisionName(varchar(8), null)
StatusCode(char(1), null)
Virtual(varchar(1), null) 
```

一旦我更改了视图，索引视图就可以正常工作。

我还确认了包含复合（多列）键的视图也可以工作，只要这些列不为空，并且在您的模型中，您在每列上指定 [Key] 并添加 Order=1 和 Order=2到这些关键列上的 [Column] 注释。

当然，这里的假设是您有权修改视图（或者可以创建替代视图）。我只能确认这适用于 MVC 5 和 Entity Framework 6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:26:00.913

视图只是实体或实体组合的投影。默认实体框架将只允许只读访问，因为视图中没有真实实体，这意味着 ET 无法跟踪更改。

simmdan 实际上做得很好，在[MSDN 论坛中解释了如何解决这个问题](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c93dff3c-4a75-4a6b-a1f1-ffcab51058e6)

基本上，正如神秘人已经指出的那样，如果您使用实体框架，最简单的方法是使用由 linq 连接和过滤的真实实体来克隆您的视图。

# c++ - 提取具有指定纵横比的子图像

> ID：15348607
> 
> 赞同：1
> 
> 时间：2013-03-11T21:05:33.480
> 
> 标签：c++, python, algorithm, matlab, image-processing

我需要从图像中提取对象。我知道对象在图像内的位置，即对象所在的区域：该区域以一对坐标*[xmin, ymin]*和*[xmax, ymax]*的形式提供。

我想修改这个区域的坐标（从而以合适的方式增加高度和宽度），以便提取具有指定纵横比的子图像。因此，我们有以下约束：

1.  为避免错误切割物体，区域的宽度和高度不得减少；
2.  边界检查：区域大小的适配必须保证新坐标在图像内部；
3.  子图像的*宽/高*比应该大约等于指定的纵横比。

如何解决这个问题呢？

**更新：一种可能的解决方案**

我的问题的解决方案主要是Mark在[this answer](https://stackoverflow.com/a/15348901/364056)中提出的算法。该算法的结果是一个比原始区域更宽或更高的新区域，并且能够获得非常接近指定的新纵横比，而无需移动原始区域的中心（如果可行，取决于原始图像中的区域）。从该算法得到的区域可以通过以下算法进一步处理，以使纵横比更接近指定的纵横比。

```
for left=0:(xmin-1),                      // it tries all possible combinations
    for right=0:(imgWidth-xmax),          // of increments of the region size
        for top=0:(ymin-1),               // along the four directions
            for bottom=0:(imgHeight-ymax),
                x1 = xmin - left;
                x2 = xmax + right;
                y1 = ymin - top;
                y2 = ymax + bottom;

                newRatio = (x2 - x1) / (y2 - y1);

                if (newRatio == ratio)
                    rect = [x1 y1 x2 y2];
                    return;
                end
            end
        end
    end
end 
```

***示例...*** 976 行 1239 列的图像；初始区域 [xmin ymin xmax ymax] = [570 174 959 957]。

第一种算法（*主要处理*）。

*   输入：初始区域和图像大小。
*   输出：它产生新的区域 r1 = [568 174 960 957]，宽度 = 392 和高度 = 783，所以纵横比等于 0.5006。

第二种算法（*后处理*）。

*   输入：区域 r1。
*   输出：新区域 r2 = [568 174 960 958]，宽度 = 392，高度 = 784，因此纵横比等于 0.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:22:01.427

```
obj_width = xmax - xmin
obj_height = ymax - ymin
if (obj_width / obj_height > ratio)
{
    height_adjustment = ((obj_width / ratio) - (ymax - ymin)) / 2;
    ymin -= height_adjustment;
    ymax += height_adjustment;
    if (ymin < 0)
    {
        ymax -= ymin;
        ymin = 0;
    }
    if (ymax >= image_height)
        ymax = image_height - 1;
}
else if (obj_width / obj_height < ratio)
{
    width_adjustment = ((obj_height * ratio) - (xmax - xmin)) / 2;
    xmin -= width_adjustment;
    xmax += width_adjustment;
    if (xmin < 0)
    {
        xmax -= xmin;
        xmin = 0;
    }
    if (xmax >= image_width)
        xmax = image_width - 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:22:17.447

让我们从您的区域开始：以点*p为中心的**w* x *h*矩形。您想扩展此区域以具有纵横比*r*。这个想法是扩展宽度或高度：

 **1.  （小例）如果*w* / *h* == *r*，则返回。
2.  计算*w'* = *h* x *r*。
    *   如果*w'* > *w*，则结果区域的宽度为*w'*，高度为*h*，中心为*p*。
    *   否则，结果区域的宽度为*w*，高度为*h'* = *w* / *r*，中心为*p*。
3.  如果必须裁剪图像，则移动中心*p*以跟随图像的边缘，例如，如果结果区域的左上角点在图像之外：让*u* = 结果区域的左上角点和*d* = (min ( *ux* ,0), min( *uy* ,0))。然后，最终的中心将是*p'* = *p* - *d*。该区域的右下部分也是如此。
4.  将生成的区域剪辑到图像。**

# scala - 新 Lift 项目的“对象 github 不是包 com 的成员”

> ID：15348612
> 
> 赞同：2
> 
> 时间：2013-03-11T21:05:43.073
> 
> 标签：scala, sbt, lift

我正在使用此处的文档开始我的第一个 Lift 项目：

[http://cookbook.liftweb.net/#LiftFromScratch](http://cookbook.liftweb.net/#LiftFromScratch)

我按照指示创建了 build.sbt。然后演练说：

> 现在您已经了解了 SBT 项目的基础知识，您可以启动 sbt 控制台。它应该加载所有必要的依赖项，包括正确的 Scala 版本，并为您提供提示。

但是，当我这样做时，我收到以下错误：

```
/Users/craig/myprojectdir/scala/build.sbt:9: error: object github is not a member of package com
seq(com.github.siasia.WebPlugin.webSettings :_*)
        ^
[error] Type error in expression
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? 
```

这是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:08:33.560

原来我有错误的路径/文件名`project/plugins.sbt`。大概这就是加载“com.github”插件的内容；由于文件名称错误，SBT 无法找到它。

# python - Python：多项选择题代码

> ID：15348613
> 
> 赞同：0
> 
> 时间：2013-03-11T21:05:47.533
> 
> 标签：python, variables, input

```
print "Do you want to be (A) begginner, (B) interidate or (Other) advanced?"
input = level
if level == "A":
    ...
elif level == "B":
    ...
else :
    ... 
```

这出现了这个错误：

```
Traceback (most recent call last):
  File "C:/Users/*****/Maths.py", line 4, in <module>
    input = level
NameError: name 'level' is not defined 
```

如果这很明显，我是 python 新手，很抱歉，但我无法通过指南找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:10:43.737

您应该按以下方式使用 raw_input：

```
level = raw_input("Do you want to be (A) begginner, (B) intermediate or (Other) advanced? ")
if level == "A":
    print "A"
elif level == "B":
    print "B"
else :
    print "default" 
```

`raw_input`将返回一个字符串，而`input`将尝试评估用户在命令行中传递的任何内容并将其分配给指定的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:09:28.280

在 Python 2 中，您需要使用

```
level=raw_input() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:14:21.190

它出现在您提供的代码的第二行：`input = level` 您所说的“使输入等于级别”

它应该是：

```
level = input("Do you want to be (A) begginner, (B) interidate or (Other) advanced?")
... 
```

因此，您将变量设置`level`为等于`input`来自用户的任何内容。

# r - 沿 data.frame 的行应用具有 char 和 num 参数的函数

> ID：15348614
> 
> 赞同：0
> 
> 时间：2013-03-11T21:05:50.923
> 
> 标签：r

我正在尝试将函数应用于数据框的每一行。该函数使用字符和数字的组合作为参数。

这不是聚合练习，而是基于使用 char 和 num 变量的一系列条件在现有 data.frame 中定义新字段。所有变量都在 data.frame 中。

我知道该`apply`函数将数据框行转换为向量，在本例中为 char 向量：我想避免在函数中重新转换数据框变量。

有几篇关于如何使用`apply`以及`plyr`跨 data.frame 行运行函数的包的帖子，但是 - 从我的新手的角度来看 - 这些示例不会逐行混合 char 和 num 参数。谢谢。

```
condsIdx <- function(IDa,IDb,clss){
  if (clss == 'a'){
    y = IDa
  } else if (clss == 'b' && IDb > 14) {
    y = IDb
  } else {
    y = -1
  }
  y
}

df <- data.frame( IDa=c(1,2,3,4,5,6),
                  IDb=c(11,12,13,14,15,16),
                  clss=c('a','a','a','b','b','c'))

df$res <- -1
for ( i in 1:nrow(df) ){
  df$res[i] <- condsIdx(df$IDa[i],df$IDb[i],df$clss[i])
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:09:38.680

只需使用`mapply`或**plyr**等效项`mlply`：

```
mapply(condsIdx,IDa = df$IDa,IDb = df$IDb,clss = df$clss)
[1]  1  2  3 -1 15 -1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:11:07.450

您可以使用`ifelse`此处获得矢量化解决方案：

```
transform(df, res =  ifelse (clss == 'a', 
                             IDa,
                             ifelse(clss == 'b' & IDb > 14,IDb,  -1)))

  IDa IDb clss res
1   1  11    a   1
2   2  12    a   2
3   3  13    a   3
4   4  14    b  -1
5   5  15    b  15
6   6  16    c  -1 
```

**编辑**一个错字错误 && 没有矢量化所以我用 & 替换它。（感谢@joran）

# d3.js - d3：在 d3.svg.axis 上制作刻度线可拖动？

> ID：15348616
> 
> 赞同：2
> 
> 时间：2013-03-11T21:05:56.863
> 
> 标签：d3.js

我想将 d3.svg.axis 重新用于需要刻度线大且可拖动的用途：

![轴](../Images/780f3e14c3d9751fecf9e2d9a53db625.png)

例如，在上面[代码在此处的轴的](http://livecoding.io/5137615)屏幕截图中，当您将鼠标悬停在 25 或 69 上时，我希望鼠标变为四角形状，然后能够向左拖动刻度线和按住鼠标右键。

我可以看到`<svg>`d3 自动生成的代码`<line>`为类为“tick”的每个刻度生成一个单独的元素：

![轴代码](../Images/544790238d0063220c1e3fd75d607b77.png)

所以我认为有一种方法可以定位这些元素并使它们响应拖动，但我不清楚如何做到这一点。当然，线元素不应该在任何地方都可以拖动，而只能沿着水平轴左右滑动，并且不能移动到开始和结束刻度之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:10:42.533

我得到了这个工作：[livecoding.io example](http://livecoding.io/5140513)

这里是相关的代码，不是特别干净但有效：

```
var w = h = 600;
var padding = 20;
var svg = d3.select("svg").attr("width", w).attr("height", h);

var xScale = d3.scale.linear()
             .domain([0, 100])
             .range([padding, w - padding * 2]);

var sharedAxis = function() {
  return d3.svg.axis()
            .scale(xScale)
            .tickValues([19,69])
            .tickSize(50);
}

var downAxis = sharedAxis()
            .orient("bottom");

var upAxis = sharedAxis()
            .orient("top");

var addPlayer = function(playerAxis) {
  svg.append("g")
   .attr("class", "axis")
   .attr("transform", "translate(0," + (100) + ")")
   .call(playerAxis);
}

addPlayer(downAxis);
addPlayer(upAxis);

var drag = d3.behavior.drag()
    .on("drag", dragmove);

function dragmove(d) {
  // move it
  var curX = d3.select(this).attr("transform").match(/\(([^,]+),/)[1];
  var newX = Math.max(xScale.range()[0], d3.event.x);
  newX = Math.min(xScale.range()[1], newX);
  var newTransform = d3.select(this).attr("transform").replace(/\([^,]+,/, "(" + newX + ",");
  d3.select(this).attr("transform", newTransform);
  // update text
  d3.select(this).select("text").text(parseInt(xScale.invert(newX)));
}

var allTicks = d3.selectAll(".axis g").call(drag); 
```

# android - Android VideoView 不工作

> ID：15348617
> 
> 赞同：1
> 
> 时间：2013-03-11T21:05:59.603
> 
> 标签：android, uri, media, android-videoview

我想编写在单击按钮时播放视频的代码。我无法显示视频。当我单击按钮播放时，模拟器停止工作。

```
public class Video extends Activity{

private static final String MOVIE_URL = "http://www.youtube.com/watch?v=XtYzTxydKmk&list=PL33CD04942E3B59AF&index=3";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video_layout);

    VideoView video = (VideoView) findViewById(R.id.videoHK);
    Uri HKvideo = Uri.parse(MOVIE_URL);
    video.setMediaController(new MediaController(this));
    video.setVideoURI(HKvideo);
    video.start();
    video.requestFocus();
} 
```

对于我有的按钮

```
Button videoButton = (Button) findViewById(R.id.btnVideo);
    videoButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent video = new Intent(AboutHK.this, Video.class);
            startActivity(video);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:16:41.727

```
private String MOVIE_URL = "http://www.youtube.com/watch?v=XtYzTxydKmk&list=..."; 
```

So at first when you want to play Video trough `VideoView` from youtube in phone, this String as `Uri` is not supported and it does not working. You need **RTSP Link**.

Here is [explanation](https://stackoverflow.com/questions/5162088/video-view-not-playing-youtube-video) and there is guide [how to convert youtube links to RTSP](https://github.com/vrunoa/youtube-url2rtsp).

If you want to play video with classic `Uri` so you need to make it via `Intent`:

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com");
startActivity(i); 
```

But i recommend to you read

*   [YouTube Android Player API](https://developers.google.com/youtube/android/player/)
*   [YouTube API v2.0](https://developers.google.com/youtube/2.0/developers_guide_protocol?hl=sk)

# java - 将多个类连接在一起？

> ID：15348618
> 
> 赞同：0
> 
> 时间：2013-03-11T21:06:00.437
> 
> 标签：java, class, minecraft

我以前见过这个问题，但我不太明白所有激烈的 Java Jargin 意味着什么。我只是想知道它是否可能拥有，例如“A”和“B”类

在我的“A”类中，它包含将在我的游戏中运行的所有主要代码，但在“B”类中，它将定义我的所有变量以及每个项目的价值”

例如

```
if(args [ 0 ].equalsIgnoreCase("sell") && args [ 1 ] !=(null)){
    int numOfItems = Integer.parseInt(args[1]);
    if(numOfItems == player.getInventory().getItemInHand().getAmount()){
        player.getInventory().setItemInHand(null);
        getServer().dispatchCommand(getServer().getConsoleSender(), "eco give " + player.getName() + " " + Diamond);
    }else if(numOfItems > player.getInventory().getItemInHand().getAmount()){
        player.sendMessage("not enough");
    }else if(numOfItems < player.getInventory().getItemInHand().getAmount()){
        player.getInventory().getItemInHand().setAmount(player.getInventory().getItemInHand().getAmount() - numOfItems);
        getServer().dispatchCommand(getServer().getConsoleSender(), "eco give " + player.getName() + " " + Diamond);
    }
} 
```

那是针对 Minecraft 插件的，我希望变量“Diamond”能够在“B”类中搜索其值，然后它将按照 Diamond 定义的金额发送给游戏中的玩家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:28:34.043

这很简单。您需要做的就是在您的主插件类中声明一个“B”的实例：

```
class B {
    Material diamond = Material.DIAMOND;
    //...other stuff
}

class Main {
//...

    public boolean onCommand(CommandSender sender, Command cmd, String commandLabel, String[] args) {
        if (commandLabel.equalsIgnoreCase("sell")) {
            B b = new B();
            //...
            //use b.diamond where appropriate
        }
    }
} 
```

抱歉简短；我是这么着急写这个的。如果您需要进一步的帮助，请告诉我。

# python - 用浮点数和整数解析 python 字符串

> ID：15348619
> 
> 赞同：3
> 
> 时间：2013-03-11T21:06:01.717
> 
> 标签：python, parsing, floating-point, int

我有数百个字符串都具有相同的格式——2 个整数后跟三个浮点数。一个例子：

```
1 10 1.2345 5.4321 10.5647 
```

我只想一个接一个地获取这些字符串并将它们解析为它们各自的整数和浮点数。我可以想出几种方法来做到这一点，但我希望 python 能有一些优雅的东西，一种与`str.format`用于写作的东西相反的东西。这似乎是非常基本的功能，所以如果我问的是已经回答的问题，我很抱歉，但我在任何地方都找不到解决方案。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:10:49.433

一个简单的列表理解应该可以解决问题

```
>>> mystr = '1 10 1.2345 5.4321 10.5647'
>>> [int(s) if s.isdigit() else float(s) for s in mystr.split()]
[1, 10, 1.2345, 5.4321, 10.5647] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:21:40.277

我认为您最好使用 numpy's`genfromtxt`或`loadtxt`:

```
import numpy as np
import StringIO

s = """1 10 1.2345 5.4321 10.5647
       2 14 434.35 345.34 1000000
       3 8  253.235 2.53 .002345"""
f = StringIO.StringIO(s)

data = np.genfromtxt(f, names = 'id, count, x, y, z', dtype=[int,int,float,float,float]) 
```

这为您提供了这些东西的数组，因此第一行可以作为

```
data[0]
#(1, 10, 1.2345, 5.4321, 10.5647) 
```

或所有第二列：

```
data['count']
#array([10, 14,  8]) 
```

顺便说一句，这会将浮点列中的整数转换为浮点数，以防您的浮点数恰好是整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:44:53.313

你可以这样做：

```
def linep(line):
    line=line.split()
    try:
        ints=map(int, line[0:2])
        floats=map(float, line[2:5])
    except ValueError as e:
        print e
    return ints+floats

print linep('1 10 1.2345 5.4321 10.5647') 
```

然后以这种方式使用它：

```
>>> s='''1 10 1.2345 5.4321 10.5647
 -2 11 -0.5 0.5 .3'''
>>> for line in s.splitlines():
...     print linep(line) 
```

印刷：

```
[1, 10, 1.2345, 5.4321, 10.5647]
[-2, 11, -0.5, 0.5, 0.3] 
```

# android - 在 android 本地创建文件（不在 SD 卡上）

> ID：15348620
> 
> 赞同：0
> 
> 时间：2013-03-11T21:06:03.183
> 
> 标签：android, eclipse, android-emulator, io

我遇到了一个问题，我试图在 android 模拟器上本地创建一个文件，但是当我测试它时文件存在，它不存在。我无权访问物理 android 设备，所以我使用模拟器。请注意，我不想将文件保存在 SD 卡上。我对android的文件结构不是很熟悉，如果我的代码没有意义，请原谅我。这是我目前正在使用的代码，它不起作用:(

```
EditText editText = (EditText) findViewById(R.id.editTextName);
        String  sName = editText.getText().toString();

        editText = (EditText) findViewById(R.id.editTextEmail);
        String  sEmail = editText.getText().toString();

        editText = (EditText) findViewById(R.id.editTextPostal);
        String  sPostal = editText.getText().toString();

File file = new File("/storage/new/test.txt");
        FileOutputStream fos;
        byte[] data = new String("Name: " + sName + " Subject: " + sEmail + " Question: " + sPostal ).getBytes();

        OutputStream myOutput;
            try {
            myOutput = new BufferedOutputStream(new FileOutputStream(file,true));
            myOutput.write(data);
            myOutput.flush();
            myOutput.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

        if(file.exists())
        {
            finish();
        } 
```

在android开发领域有足够经验的人可以提供一些示例代码或指出我正确的方向，以便我可以让这个坏男孩工作吗？ **编辑：**当我说它不起作用时，我的意思是永远不会创建文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:11:02.550

If you are new to file storage in Android I suggest you read trough [this piece of documentation](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal) to get started - it should answer your questions with examples.

# asp.net - 用于 ASP.NET Web 服务（预热）的 IIS 7.5 应用程序初始化，无需重新映射请求

> ID：15348621
> 
> 赞同：19
> 
> 时间：2013-03-11T21:06:09.510
> 
> 标签：asp.net, iis, iis-7.5, splash-screen, warm-up

我正在尝试使用 IIS 7.5 应用程序初始化扩展来为我的 Web 应用程序配置预热过程。这是我正在采取的一种方法，以最大程度地减少由应用程序池回收引起的减速，这个[问题在 Stack Overflow 上的其他问题中得到了很好的解释](https://stackoverflow.com/questions/11854243/asp-net-warmup-initialize)。

**我想要**的是获得应用程序初始化的好处，而无需在其他任何地方**重新映射请求。**

## 到目前为止我所做的

我按照基本用例的[IIS 8 说明](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-application-initialization)进行操作，效果很好！我创建了一个名为 app_starting.htm 的启动页面，并通过使用此代码，在应用程序初始化时显示它：

```
<applicationInitialization remapManagedRequestsTo="app_starting.htm" skipManagedModules="true" >
    <add initializationPage="/" />
</applicationInitialization> 
```

## 为什么这不好

我想使用初始化来加快对使用 ASP.NET MVC 编写的基于 REST 的 Web 服务的请求。此 Web 服务是多个应用程序的后端。当他们向资源（即`/client/1/addresses`）发出请求时，他们无法处理接收启动页面。

## 我试过的

我删除了该`remapManagedRequestsTo`属性。但是，**现在**当我在初始化期间请求资源时，**我会收到 500 错误**，直到初始化完成。之后，响应恢复正常。依赖此服务的应用程序也不会很好地响应 500 错误，因为初始化不应该是错误条件。

## 我需要的

在不执行任何重新映射的情况下，我希望请求行为恢复正常。即使初始化正在进行中，对应用程序的其他请求也**应该排队等待**直到初始化完成。

有什么我想念的吗？我能做到这一点吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-12T17:08:48.537

我想我回答了我自己的问题。我删除了该`skipManagedModules`属性并且它起作用了。这段代码完成了应用程序的初始化，并且在预热期间，请求似乎在等待它完成后才被处理：

```
<applicationInitialization>
    <add initializationPage="/" />
</applicationInitialization> 
```

我找不到任何文档说明为什么它会以这种方式运行，也不真正理解这`skipManagedModules`意味着什么。如果有人可以进一步解释这一点，我可以将解释标记为答案。谢谢！

# java - 数组中的零值

> ID：15348625
> 
> 赞同：-5
> 
> 时间：2013-03-11T21:06:20.320
> 
> 标签：java

将函数放入类中后，我的数组中得到零（0）结果。这是为什么？什么都没有改变我只是在课堂上复制粘贴它们？我还应该在课堂上放什么东西来完成这项工作吗？

```
import java.util.*;//import library

class Input
{

    public Input (int size,int startV,int endingV)
      {

         //declarations of variables
        double difference;
        double[] array= new double[size];

        array[0]=startV;

     //calculating the difference to add on each number in the array
     difference=(endingV-startV)/size;

    for (int counter=1;counter<size;counter++) //for loop to fill the array
              {
        array[counter]=array[counter-1] + difference;           
          }

      }

    public Input enter(int size,int startV,int endingV)
      {

        //declarations of variables
        double difference;
        double[] array= new double[size];

        array[0]=startV;

             //calculating the difference to add on each number in the array
        difference=(endingV-startV)/size; 

            for (int counter=1;counter<size;counter++) //for loop to fill the array
        {
            array[counter]=array[counter-1] + difference;           
        }

            return this;
    }
}

class Show
{
    public Show (int size,double[] array)
    {

        for (int i=0;i<size;i++) //for loop to print the array
            System.out.println("This is the array " + i+ ": " + array[i]);

    }

    public Show print(int size,double[] array)
    {

        for (int i=0;i<size;i++) //for loop to print the array
        System.out.println("This is the array " + i+ ": " + array[i]);

        return this;
    }
}

public class Assignment2 
{

    public static void  main(String[] args)
    {
        //declaring variables
        int startV,endingV;
        int size=0;

        System.out.print("Give the size of the array:");//Print message on screen
        size = new Scanner(System.in).nextInt();//asking for the size of array

            double[] array= new double[size]; //creation of array

    System.out.print("Give the starting value of the array:");
    startV = new Scanner(System.in).nextInt();//asking for the starting value of array

    System.out.print("Give the ending value of the array:");
    endingV = new Scanner(System.in).nextInt();//asking for the last value of array

    //calling the functions from the other classes 

        Input enter= new Input(size,startV,endingV);
        Show print= new Show(size,array);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:09:46.487

以下内容可能不是您想要的：

```
difference=(endingV-startV)/size; 
```

由于`startV`和都是整数，因此使用整数（截断）除法`endingV`。`size`

`Scanner`此外，每次需要读取一个值时，创建并使用一个而不是创建一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:22:02.310

`//calling the functions from the other classes`

不，你没有。您只需创建实例。

# php - 如何在 Codeigniter 中使用 Ajax 进行动态下拉

> ID：15348634
> 
> 赞同：1
> 
> 时间：2013-03-11T21:06:44.607
> 
> 标签：php, jquery, ajax, codeigniter

我知道这可能是第 [insertLongNumber] 有人问这个问题，我做了我的研究，但我找不到适合我的问题的另一个答案。所以就在这里。

我正在使用 php 和 ajax 在 codeigniter 中处理动态下拉列表。我是 CI 新手，我对 Ajax 有基本的了解。

到目前为止我注意到的是，在控制台中，它没有识别来自第一个下拉列表的值，所以我得到了 departamento_id : undefined 这让我觉得问题来自 ajax 脚本（我从网上得到了它）

我的观点，包括 ajax 代码

```
<?php
$this->load->helper('html'); 
?>

<html>
<head>
    <title>Buscador</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#dpto-dropdown select').change(function () {
                var selDpto = $(this).attr('value');
                console.log(selDpto);
                $.ajax({
                    url: "test/ajax_call",
                    async: false,
                    type: "POST",
                    data: "departamento_id="+selDpto,
                    dataType: "html",

                    success: function(data) {
                        $('#ciudad').html(data);
                    }
                })
            });
        });
    </script>
</head>

<?php echo form_open('test/buscar');?>

<?php 

<div id='dpto-dropdown'><?php print form_dropdown('departamentos', $departamento) ?></div>

<div id="ciudad"><select><option value=''>-</option></select></div>
//rest of code... 
```

这是我的控制器代码：

```
class Test extends CI_Controller 
{
function __construct()
{
    parent::__construct();
    $this->load->model('buscador_model');
}   

function index()
{
    $departamentos = $this->buscador_model->traerInfoDptos();
    $precios = $this->buscador_model->traerPrecioHoteles();

    foreach($departamentos as $departamento){
        $dpto_final[$departamento->id] = $departamento->nom_departamento;
    }

    $info = array(
        'departamento' => $dpto_final,
        'precios' => $precios,
    ); 

    $this->load->view('buscador_view', $info);
}

function ajax_call()
{
    //check to see people wont go directly
    if (isset($_POST) && isset($_POST['departamento_id'])) 
    {
        $dpto = $_POST['departamento_id'];
        $ciudad = $this->buscador_model->traerCiudadPorDpto($dpto);

        foreach ($ciudad as $c)
        {
            $ciudadfinal[$c->cod_ciudad] = $c->nom_ciudad;
        }

        //dropdown

        echo form_dropdown('Ciudades', $ciudadfinal);
    }
    else 
    {
        redirect('index');
    }
}
} 
```

这是我的模型：

```
Class Buscador_model extends CI_Model
{

function traerInfoDptos()
{
    $this->db->select('id, nom_departamento');
    $this->db->from('departamento');
    $query = $this->db->get();

    if ($query->num_rows > 0)
    {
        return $query->result();
    }
}

function traerCiudadPorDpto($dpto)
{
    $query = $this->db->query("SELECT nom_ciudad, cod_ciudad FROM ciudad WHERE departamento_id = '{$dpto}'");

    if ($query->num_rows > 0)
    {
        return $query->result();
    }
}

}// end buscador model class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:15:14.310

请参阅此页面：[http ://www.onerutter.com/open-source/jquery/jquery-tips-how-to-get-value-of-selected-option-in-select-box.html](http://www.onerutter.com/open-source/jquery/jquery-tips-how-to-get-value-of-selected-option-in-select-box.html)

您需要使用`.val()`而不是`.attr('value')`

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#dpto-dropdown select').change(function () {

            var selDpto = $(this).val(); // <-- change this line
            console.log(selDpto);

            $.ajax({
                url: "test/ajax_call",
                async: false,
                type: "POST",
                data: "departamento_id="+selDpto,
                dataType: "html",

                success: function(data) {
                    $('#ciudad').html(data);
                }
            })
        });
    });
</script> 
```

# javascript - 如何获取div的内容高度

> ID：15348637
> 
> 赞同：3
> 
> 时间：2013-03-11T21:06:50.990
> 
> 标签：javascript, jquery, css

我的 div 有一个样式`position:absolute`，因此，如果内容高于它的高度，它就不会扩展。

因此，我认为一个解决方案是，如果我找到实际内容的高度，并`div`使用`position:absolute`样式将高度分配给 。

知道怎么做吗？或者也许一个想法如何`absolute` `div`根据其内容进行扩展。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T21:20:21.727

`Element.scrollHeight`应该做的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:40:12.183

这是获取容器高度的一种糟糕方法。我们基本上是在克隆整个 div，设置位置使其具有高度，检查该高度，然后将其删除：

```
$(function () {
    var clone = null;
    alert( clone = $('.test').clone().css('position', 'static').appendTo(".container").height());
    clone.remove();
}); 
```

这是小提琴：http: [//jsfiddle.net/vPMDh/1/](http://jsfiddle.net/vPMDh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:09:41.940

即使是绝对的，它也应该扩大。检查你没有身高：xxpx

如果是这样，将其更改为 min-height

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:10:39.160

使用 clearfix hack。[这是链接](http://www.webtoolkit.info/css-clearfix.html)

并将 clearfix 添加到您的 div

例子

在您的样式表中

```
<style>
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
}
</style> 
```

...并在您的 div 中添加**clearfix**类

```
<div class="clearfix">
   //some html tags
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T21:19:00.123

正如你所说`"it doesn't expand if the content is higher than it's height."`，我猜你有一个固定的高度。如果你出于某种原因确实需要这个，请尝试使用它`min-height`。

看看这个[小提琴](http://jsfiddle.net/BZbhK/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T21:29:40.393

```
<div class="classname">

Some content....

<p style="clear:both">&nbsp</p>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T22:00:20.813

感谢您提出您的问题。如果你使用这个：

```
$(document).ready(function(){

 var x = $("#container").height();
 alert(x);

//if not works then 
  var y = $("#container").outerHeight();
  alert(y);

}); 
```

我认为如果你不应用 div 的高度，那么很容易找到任何 div 的高度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-13T17:19:12.863

与@MattDiamant 类似的解决方案，但使用 vanilla JS 并且没有创建克隆：

```
function getDivHeight(posAbsoluteDiv) {
   const heightBackup = posAbsoluteDiv.style.height;

   posAbsoluteDiv.style.height = 'auto';

   const contentHeight = posAbsoluteDiv.getBoundingClientRect().height;

   posAbsoluteDiv.style.height = heightBackup;

   return contentHeight;
} 
```

# android - 如何让科尔多瓦 InAppBrowser 在 iOS 和 Android 之间以类似方式显示内容？

> ID：15348641
> 
> 赞同：0
> 
> 时间：2013-03-11T21:06:53.183
> 
> 标签：android, cordova, inappbrowser

我正在使用 cordova InAppBrowser 来显示来自外部站点的内容。当我在 iPhone 上打开浏览器时，InAppBrowser 内容的缩放级别与我的应用程序其余部分的缩放级别相匹配。当我导航到我的 Android 设备中的同一位置时，InAppBrowser 内容显示为缩小且非常小且难以阅读。

有谁知道为 Android 设备设置或调整 InAppBrowser 的缩放级别或视口的方法？

注意：我可以控制 InAppBrowser 中显示的内容的*样式*，但不能控制该站点的 html 或 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:07:58.247

我找到了一种将 android InAppBrowser 视口更改为与 iOS InAppBrowser 一致的方法。它需要修改cordova源代码，但实际上很容易做到……只需要更改一行代码。

以下是一些分步说明：

1.  下载cordova源代码：“git clone [https://github.com/apache/cordova-android.git](https://github.com/apache/cordova-android.git) ”
2.  下载公共编解码器库：http: [//ftp.carnet.hr/misc/apache//commons/codec/binaries/commons-codec-1.7-bin.zip](http://ftp.carnet.hr/misc/apache//commons/codec/binaries/commons-codec-1.7-bin.zip)
3.  打开 Android 开发者工具
4.  将cordova项目导入您的工作区（文件>导入...>现有项目到工作区）
5.  创建一个“libs”目录并将下载的 commons-codec-1.7.jar 文件复制到其中。
6.  将“gen”文件夹添加到项目中（.classpath 文件需要，但不包含在 git 下载中，因为 git 不允许空文件夹）
7.  转到项目 > 全部构建。该项目应该没有错误地构建。
8.  打开 InAppBrowser.java 并搜索“inAppWebView.getSettings().setUseWideViewPort(true);” （我下载的科尔多瓦版本中的第 458 行）。
9.  在该行中将“true”更改为“false”。
10.  再次构建项目。
11.  将 bin/cordova.jar 文件复制到您正在使用 cordova 的任何项目中。

这将更改视口以与 iOS InAppBrowser 保持一致。如果您更喜欢更宽的视口，但仍希望在 Android/iOS 之间保持一致，您可能可以在 cordova- *ios*源代码中执行类似的操作来更改 iOS 以使用更宽的视口（但我还没有研究过）。

我从这个 google 组获得了一些关于获取 cordova 源代码和构建项目的信息：[https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/mUcBcjPISgg](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/mUcBcjPISgg)

# ruby-on-rails - Aptana Studio：创建问题“资源已存在”

> ID：15348643
> 
> 赞同：1
> 
> 时间：2013-03-11T21:06:59.760
> 
> 标签：ruby-on-rails, ruby, aptana, aptana3

好的，所以我有一个想要完全重新启动的项目，所以我删除了工作区目录中的文件夹（在 finder 中）。现在，当我重新创建了 ruby​​ 项目（它具有相同的名称）并且我去 Aptana 并“导入”一个文件夹作为我的项目时，它说 cannot create since `'Resource /NameOfProject already exists'`.

我也尝试过删除元数据和 DS_Store 文件，我尝试过使用不同的工作区，然后重新导入项目，仍然是同样的问题，知道发生了什么吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:51:49.133

转到项目资源管理器 > 右键单击​​文件夹 > 删除。

现在您应该可以导入该文件夹了。

# c# - 获取 HttpRequest 完整的请求字符串

> ID：15348647
> 
> 赞同：2
> 
> 时间：2013-03-11T21:07:08.783
> 
> 标签：c#, asp.net

我正在研究将连接中继到另一台服务器的代理。我已经实现了一个`IHttpHandler`接收特定地址的请求并将它们发送到我的代理。

我的代理基本上启动到代理服务器的 sockect 连接并读取原始请求：

```
var requestString = new StreamReader(httpRequest.InputStream).ReadToEnd(); 
```

我的问题出现在这一点上：输入流只包含HTTP请求的主体流，而不是完整的请求。

如何检索完整的 HTTP 请求，而无需从`HttpRequest`对象中重建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:31:22.393

我不知道 ASP .NET 中是否有明确的单行代码，但您可以非常接近，如[本](http://forums.asp.net/t/1128496.aspx/)论坛帖子所示。建议从 HttpRequest 属性中构建第一行，然后添加，然后是您已经在做`ServerVariables["ALL_RAW"]`的请求正文。`InputStream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:15:07.087

获得“完整 HTTP 请求”对象的唯一方法是以某种方式实际重建它。不过，我不确定您是否需要整个对象来完成此过程。也许您可以只获取 HttpRequest 中的项目子集进行处理？您可以手动将您需要的对象的各个部分连接成新的东西。但是，一旦您偏离使用 HttpRequest，这对我来说都是自定义的。

# ssrs-2008 - 如何使用自动 NTLM 凭据传递在外部对 SSRS 进行身份验证？

> ID：15348649
> 
> 赞同：2
> 
> 时间：2013-03-11T21:07:11.090
> 
> 标签：ssrs-2008, ntlm

我正在尝试设置我们的 SSRS 服务器以使用用户输入的 NTLM 凭据和 IE 中的自动登录设置通过 Internet 进行身份验证。

到目前为止，结果是在尝试导航到报表管理器或报表服务器时出现一般的“Internet Explorer 无法显示网页”错误。我没有从谷歌获得太多相关信息。

有没有其他人遇到过这种极端情况？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:14:34.623

`<RSWindowsNegotiate/>`如果身份验证类型存在于`<Authentication>`rsreportserver.config 文件的部分中，SSRS 将无法通过自动 NTLM 凭据传递通过 Internet 进行身份验证。

注释掉`<RSWindowsNegotiate/>`身份验证类型以解决此问题。

(C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\rsreportserver.config)

```
 <Authentication>
    <AuthenticationTypes>
    <RSWindowsNTLM/>
    <!-- <RSWindowsNegotiate/> -->   
    </AuthenticationTypes>
    <RSWindowsExtendedProtectionLevel>Off</RSWindowsExtendedProtectionLevel>
    <RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>
    <EnableAuthPersistence>true</EnableAuthPersistence>
    </Authentication> 
```

# android - framelayout如何获取内容？

> ID：15348655
> 
> 赞同：0
> 
> 时间：2013-03-11T21:07:34.990
> 
> 标签：android, android-framelayout

因为我必须为我的应用程序做一个自定义菜单，所以我制作了一个片段，它在我的应用程序底部就像一个操作栏！

但是我与堆栈有一些冲突（按下后退按钮时）。

我应该如何编写以下方法？

```
public void changerContenu(int frameLayout, Fragment frag, boolean ajouterAuStack)
{
    if(R.id.frameContent != frag.getId()) 
// * if the current displaying
// fragment in the layout is the same as the one that I received in param#2 (frag),   
// then don't do anything.
    {
        ft = fragmentManager.beginTransaction();

        ft.replace(frameLayout, frag);
        if(ajouterAuStack)
            ft.addToBackStack(null);

        ft.commit();
    }
} 
```

我知道我的“如果”现在没有任何意义，试图弄清楚如何达到预期的结果:(现在，当我访问片段一次（并且它被推入堆栈）时，我无法重新访问它使用我的“自制操作栏”中的按钮，直到我按了几次后退按钮来清理堆栈。

如果我在菜单上单击几次相同的按钮，我只想不重复堆栈中的项目...

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:36:13.437

我想更好地理解这个问题。

您有一个片段，其作用类似于操作栏。如果片段已经在显示，你什么都不想做；否则，你想显示它。在什么情况下你想回去，应该怎么做？

请注意，底部的单个操作栏不适合典型的 Android 设计。用户可能不了解如何使用您的应用程序。我很想知道为什么常规的 ActionBar 不适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:09:53.727

为了将来参考，我让它这样工作：

```
public void changerContenu(int frameLayout, Fragment frag, boolean ajouterAuStack, String tag)
{
    ft = fragmentManager.beginTransaction();

    ft.replace(frameLayout, frag);
    if(ajouterAuStack && (fragmentManager.getBackStackEntryCount() == 0 
            || fragmentManager.getBackStackEntryAt(fragmentManager.getBackStackEntryCount()-1).getName() != tag))
        ft.addToBackStack(tag);

    ft.commit();
} 
```

# apache - Netbeans 项目 404 + apache localhost XAMPP

> ID：15348662
> 
> 赞同：0
> 
> 时间：2013-03-11T21:07:47.747
> 
> 标签：apache, netbeans, glassfish, localhost, http-status-code-404

我在 Netbeans 中创建了一个 Web 项目。当我运行它时，它启动了一个 glassfish 服务器，一切正常（我不明白为什么或如何，但它可以工作）。

我的 Mac 上也安装了 XAMPP。我将我的 netbeans 项目文件夹复制到我的用户站点文件夹，并使用 XAMPP 运行我的 apache 服务器。

我可以访问站点索引，但是每当我尝试使用 servlet 时，我都会得到 404，找不到对象。

这与 glassfish web xml 文件有关吗？Servlet 映射？我必须创建一个新的 apache web xml 文件才能在 apache 服务器上工作吗？

如果需要，我可以粘贴代码。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:12:01.627

Apache Server 用于基于 php 的应用程序和运行基于 java 的 Web 项目，您必须安装 apache tomcat 或 glassfish，就像您之前在 servlet 容器可用的地方所做的那样。

# javascript - 如何在鼠标悬停时显示传递变量的警报

> ID：15348663
> 
> 赞同：0
> 
> 时间：2013-03-11T21:07:54.693
> 
> 标签：javascript, html

这应该很简单......我不确定我在这里做错了什么。在我的 HTML 中，我有

```
<a onmouseover="test(this.id)" id="ok">test me</a> 
```

在我的标题中，我有这个脚本。

```
<script>
    function test(this.id){
        alert(id);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:09:09.480

[函数参数名称](http://www.ecma-international.org/ecma-262/5.1/#sec-13)必须是[有效的标识符](http://www.ecma-international.org/ecma-262/5.1/#sec-7.6)，而不是表达式：

> *FormalParameterList* :
>     *标识符*
>     *FormalParameterList* ,*标识符*

`this.id`是一个表达式，因为它是一个[属性访问器](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.1)，因此`this.id`用作形式参数名称是一个语法错误。改变

```
function test(this.id){
    alert(id);
} 
```

到

```
function test(id){
    alert(id);
}

// or
function test(foo){
    alert(foo);
} 
```

或者干脆

```
<a onmouseover="alert(this.id)" id="ok">test me</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:08:57.900

这：

```
<script>
    function test(id){
        alert(id);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:09:59.590

试试这个：

```
<a onmouseover="test(this.id)" id="ok">test me</a>

<script>
    function test(id){
        alert(id);
    }
</script> 
```

[演示](http://jsfiddle.net/kyDMe/)

# silverlight - ControlTemplate 到带有图像的按钮 - Silverlight for WP7

> ID：15348664
> 
> 赞同：0
> 
> 时间：2013-03-11T21:07:54.677
> 
> 标签：silverlight, windows-phone-7, user-controls, custom-controls, controltemplate

我有一个针对按钮控件的 ControlTemplate。ControlTemplate 有两个用于正常和按下状态的图像，每个图像一个。我想在屏幕上的 8 个不同按钮中使用这个 ControlTemplate，每个按钮前面都有不同的图像。

```
<ControlTemplate x:Key="ButtonControlTemplate1" TargetType="Button">
        <Grid>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates1">
                    <VisualState x:Name="Pressed1">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="image">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Collapsed</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="image1">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Visible</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Normal1"/>
                    <VisualState x:Name="Disabled1"/>
                    <VisualState x:Name="MouseOver1"/>
                </VisualStateGroup>
                <VisualStateGroup x:Name="FocusStates1">
                    <VisualState x:Name="Focused1"/>
                </VisualStateGroup>
                <VisualStateGroup x:Name="CommonStates"/>
                <VisualStateGroup x:Name="FocusStates"/>
            </VisualStateManager.VisualStateGroups>
            <Image x:Name="image" Source="source1" />
            <Image x:Name="image1" Source="source2" Visibility="Collapsed"/>
        </Grid>
    </ControlTemplate> 
```

如何在模板中放置第三张图片，以便为每个按钮接收不同的来源？

像这样的东西：

```
<Button Template="{StaticResource ButtonControlTemplate1}" thirdImage="source_to_third_image"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:21:59.290

为什么不将 Content 属性用于第三张图片？

您的 ControlTemplate 将如下所示：

```
<ControlTemplate x:Key="ButtonControlTemplate1" TargetType="Button">
    <Grid>
        ...
        <ContentPresenter Content="{TemplateBinding Content}" />
        <Image x:Name="image" Source="source1" />
        <Image x:Name="image1" Source="source2" Visibility="Collapsed"/>
    </Grid>
</ControlTemplate> 
```

您的按钮声明将如下所示：

```
<Button>
    <Image Source="source3" />
</Button> 
```

然后你只需要添加一个相关的视觉状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:14:44.463

根据我对您问题的理解，您正在寻求实现[附加属性](http://msdn.microsoft.com/en-us/library/cc265152%28v=vs.95%29.aspx)。

由于按钮本身不携带三个独立图像源的属性（您可以绕过该`Content`属性，但这会很痛苦），您将需要实现这些并简单地从您的模板执行标准绑定。

# html - 如何有条件地将html输入值设置为空白

> ID：15348668
> 
> 赞同：1
> 
> 时间：2013-03-11T21:08:03.290
> 
> 标签：html, asp.net-mvc, razor

我有一个包含以下行的剃须刀文件：

```
<input type="hidden" class="personId" value=@(Model != null ? Model.Id : "") /> 
```

所以我的目标是当模型存在时将隐藏控件的值设置为模型的 ID。当它不存在时 value=""。

我得到的是 value="/"

所以我尝试了：

```
<input type="hidden" class="personId" value=@(Model != null ? Model.Id : string.Empty)/> 
```

结果相同。

试过：

```
<input type="hidden" class="personId" value=@(Model != null ? Model.Id : null)/> 
```

又是一样。

为什么我不能将其设置为空？

我应该一起忽略价值，这甚至是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:13:04.510

您是否尝试过使用为此目的设计的助手：

```
@Html.HiddenFor(x => x.Id, new { @class = "personId" }) 
```

# android - 检测是否从 Google Play 与 Amazon 与其他下载了 Android 应用程序

> ID：15348671
> 
> 赞同：18
> 
> 时间：2013-03-11T21:08:29.633
> 
> 标签：android, google-play, amazon-appstore

我知道这可能是一个远景，但是有没有办法以编程方式检测应用程序是托管在亚马逊应用商店还是托管在 Google Play 上？我想链接到应用程序下载的应用程序商店，如果可以避免的话，我宁愿没有两个不同的 APK，只是这种差异。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-09T09:52:33.950

就在最近，亚马逊应用商店返回了合理的值`PackageManager.getInstallerPackageName()`

```
PackageManager pm = context.getPackageManager();
String installerPackageName = pm.getInstallerPackageName(context.getPackageName());

if ("com.android.vending".equals(installerPackageName)) {
    //do google things
} else if ("com.amazon.venezia".equals(installerPackageName)) {
    //do amazon things
} 
```

见这里： [https ://forums.developer.amazon.com/forums/thread.jspa?threadID=680](https://forums.developer.amazon.com/forums/thread.jspa?threadID=680)

评价此应用链接的示例：

**谷歌播放-**

> market://details?id=PACKAGANAME

**亚马逊商店**

> [http://www.amazon.com/gp/mas/dl/android?p=PACKAGENAME](http://www.amazon.com/gp/mas/dl/android?p=PACKAGENAME)

或者

> amzn://apps/android?p=com.amazon.mp3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:22:10.423

最简单的方法是在 Amazon 和 Google Play 之间使用不同的版本代码或名称。然后，您可以使用[PackageManager.getPackageInfo](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java.lang.String,%20int%29)来检索这些值并从那里适当地选择应用商店链接。

示例：使用“.65”作为您所有亚马逊版本名称的后缀，即 1.0.65。然后使用

```
public boolean isAmazon(Context context) {
    String versionName = "";
    try {
        versionName = context.getPackageManager().getPackageInfo(
            getPackageName(), 0).versionName;
    } catch (NameNotFoundException e) {
        // Can't find itself...
    }
    return versionName.endsWith(".65");
} 
```

# java - Spring批处理项目拆分器

> ID：15348675
> 
> 赞同：1
> 
> 时间：2013-03-11T21:08:37.437
> 
> 标签：java, spring, spring-batch, jobs, spring-integration

我有以下问题：我有一个文件，其中每行导致 1 个或多个项目被写入数据库。我需要从另一个系统进行查找以找出需要写入多少项。从单行产生的每个项目都必须使用项目处理器链进行转换，最后写入数据库中的多个表。

因为每个项目都需要写入多个表，所以它们必须每个都在自己的事务中。因此，我不能只使用`ItemProcessor<Foo, List<Bar>>`which 来处理它。在那种情况下——即使`commit-interval`是 1——我最终会在同一个事务中处理多个项目。

我已经看过[这个](https://stackoverflow.com/questions/7894445/read-one-record-item-and-write-multiple-records-items-using-spring-batch)堆栈溢出问题了。由于交易问题，接受的答案对我没有帮助。关于使用 Spring Integration 拆分器的另一个答案听起来很有趣。但是，它并没有提供大量细节。如何将阅读器的输出定义为通道输入？我将如何定义到我的项目编写器的输出通道？我怎么还能在每个新划分的项目上运行项目处理器链？

我无法在春季批处理作业中找到使用拆分器的任何示例。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T13:50:43.380

FlatFileItemReader 有同样的问题，但减去事务问题。以这种方式处理它：

```
public class FlatFileItemListWriter<T> extends FlatFileItemWriter<T> {

    /**
     * {@inheritDoc}
     * 
     * @see org.springframework.batch.item.file.FlatFileItemWriter#write(java.util.List)
     */
    @Override
    @SuppressWarnings("unchecked")
    public void write(List<? extends T> itemsLists) throws Exception {
        List<T> items = new ArrayList<T>();
        for (Object item : itemsLists) {
            items.addAll((List<T>) item);
        }
        super.write(items);
    }

} 
```

这样，FlatFileItemWriter 处理列表的方式与我的处理器不生成列表的方式相同。

# php - Android 的 HTTP-GET

> ID：15348685
> 
> 赞同：0
> 
> 时间：2013-03-11T21:09:35.923
> 
> 标签：php, android, http, http-get

我正在尝试使用以下代码“打开”网页：

```
 public HttpResponse hitUrl(String url) {
      try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = httpclient.execute(new HttpGet(url));
        return response;
      } catch (Exception e) {
          e.printStackTrace();
        return null;
      }
    } 
```

并调用该方法

```
hitUrl("http://www.test.com/Example.php"); 
```

我的 PHP 代码是：

```
<?php
$userdatei = fopen ("example.txt","r");
$zeile = fgets($userdatei, 500);
$zeile++;
fclose($userdatei);

$schreiben = fopen ("example.txt","w");
fwrite($schreiben, $zeile);
fclose($schreiben);

echo $zeile;
?> 
```

但是 PHP 不算数。如果我用浏览器打开 PHP，它确实很重要！但是没有这段代码。它出什么问题了？是的，我们在清单中使用了互联网许可

编辑：这里是完整的代码：

```
package com.example.phpcheck;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b1=(Button)findViewById(R.id.button1);

    b1.setOnClickListener(new View.OnClickListener() { //Neu Button
       public void onClick(View view) {
        hitUrl("http://www.test.com/Example.php");
       }
    }); 
}

public HttpResponse hitUrl(String url) {
    try {
      HttpClient httpclient = new DefaultHttpClient();
      HttpResponse response = httpclient.execute(new HttpGet(url));
      return response;
    } catch (Exception e) {
        e.printStackTrace();
      return null;
    }
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

这里是完整的logcat：

> 03-12 17:52:11.942: W/ActivityThread(21149): 应用程序 com.example.phpcheck 正在等待端口 8100 上的调试器... 03-12 17:52:52.926: W/System.err(21149) : android.os.NetworkOnMainThreadException 03-12 17:52:52.950: W/System.err(21149): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 03-12 17:52:52.950: W/System.err(21149): 在 java.net.InetAddress.lookupHostByName(InetAddress.java:385) 03-12 17:52:52.950: W/System.err(21149): 在 java.net.InetAddress.getAllByNameImpl (InetAddress.java:236) 03-12 17:52:52.950: W/System.err(21149): 在 java.net.InetAddress.getAllByName(InetAddress.java:214) 03-12 17:52:52.950: W /System.err(21149): 在 org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137) 03-12 17:52:52.958:W/System.err(21149): 在 org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) 03-12 17:52:52.958: W/System.err(21149): 在 org .apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119) 03-12 17:52:52.958：W/System.err(21149)：在 org.apache.http.impl.client.DefaultRequestDirector。执行（DefaultRequestDirector.java:360）03-12 17:52:52.958：W/System.err（21149）：在 org.apache.http.impl.client.AbstractHttpClient.execute（AbstractHttpClient.java:555）03-12 17:52:52.958: W/System.err(21149): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 03-12 17:52:52.965: W/System.err (21149): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 03-12 17:52:52.965: W/System.err(21149): 在 com.example.phpcheck。MainActivity.hitUrl(MainActivity.java:35) 03-12 17:52:52.965: W/System.err(21149): 在 com.example.phpcheck.MainActivity$1.onClick(MainActivity.java:27) 03-12 17 ：52：52.965：W / System.err（21149）：在android.view.View.performClick（View.java：4204）03-12 17：52：52.965：W / System.err（21149）：在android。 view.View$PerformClick.run(View.java:17355) 03-12 17:52:52.965: W/System.err(21149): 在 android.os.Handler.handleCallback(Handler.java:725) 03-12 17:52:52.965: W/System.err(21149): 在 android.os.Handler.dispatchMessage(Handler.java:92) 03-12 17:52:52.973: W/System.err(21149): 在 android .os.Looper.loop(Looper.java:137) 03-12 17:52:52.973: W/System.err(21149): 在 android.app.ActivityThread.main(ActivityThread.java:5226) 03-12 17 ：52：52.973：W / System.err（21149）：在java.lang.reflect.Method。invokeNative（本机方法）03-12 17:52:52.973：W/System.err（21149）：在 java.lang.reflect.Method.invoke（Method.java:511）03-12 17:52:52.973：W /System.err(21149): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795) 03-12 17:52:52.973: W/System.err(21149): 在 com. android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03-12 17:52:52.981: W/System.err(21149): at dalvik.system.NativeStart.main(Native Method) 03-12 17 :54:18.692: W/System.err(21931): android.os.NetworkOnMainThreadException 03-12 17:54:18.692: W/System.err(21931): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode. java:1117) 03-12 17:54:18.692: W/System.err(21931): 在 java.net.InetAddress.lookupHostByName(InetAddress.java:385) 03-12 17:54:18.692: W/System。错误（21931）：在 java.net.InetAddress。getAllByNameImpl(InetAddress.java:236) 03-12 17:54:18.692: W/System.err(21931): 在 java.net.InetAddress.getAllByName(InetAddress.java:214) 03-12 17:54:18.692: W/System.err(21931): 在 org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137) 03-12 17:54:18.700: W/System.err(21931): 在 org .apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) 03-12 17:54:18.700: W/System.err(21931): at org.apache.http.impl.conn.AbstractPooledConnAdapter。打开（AbstractPooledConnAdapter.java:119）03-12 17:54:18.700：W/System.err（21931）：在 org.apache.http.impl.client.DefaultRequestDirector.execute（DefaultRequestDirector.java:360）03-12 17:54:18.700: W/System.err(21931): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 03-12 17:54:18.700: W/System.err(21931): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 03-12 17:54:18.700: W/System.err(21931): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 03-12 17:54:18.700: W/System.err(21931): 在 com .example.phpcheck.MainActivity.hitUrl(MainActivity.java:35) 03-12 17:54:18.700: W/System.err(21931): at com.example.phpcheck.MainActivity$1.onClick(MainActivity.java:27 ) 03-12 17:54:18.700: W/System.err(21931): 在 android.view.View.performClick(View.java:4204) 03-12 17:54:18.700: W/System.err(21931 ): 在 android.view.View$PerformClick.run(View.java:17355) 03-12 17:54:18.700: W/System.err(21931): 在 android.os.Handler.handleCallback(Handler.java: 725) 03-12 17:54:18.700: W/System.err(21931): 在安卓。os.Handler.dispatchMessage(Handler.java:92) 03-12 17:54:18.700: W/System.err(21931): 在 android.os.Looper.loop(Looper.java:137) 03-12 17: 54:18.700: W/System.err(21931): 在 android.app.ActivityThread.main(ActivityThread.java:5226) 03-12 17:54:18.700: W/System.err(21931): 在 java.lang .reflect.Method.invokeNative(Native Method) 03-12 17:54:18.700: W/System.err(21931): at java.lang.reflect.Method.invoke(Method.java:511) 03-12 17: 54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931 ): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03-12 17:54:18.700: W/System.err(21931): 在 dalvik.system.NativeStart.main(Native Method )错误（21931）：在 android.os.Looper.loop（Looper.java:137）03-12 17:54:18.700：W/System.err（21931）：在 android.app.ActivityThread.main（ActivityThread.java :5226) 03-12 17:54:18.700: W/System.err(21931): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-12 17:54:18.700: W/System.err( 21931): 在 java.lang.reflect.Method.invoke(Method.java:511) 03-12 17:54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller .run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03-12 17 ：54：18.700：W / System.err（21931）：在dalvik.system.NativeStart.main（本机方法）错误（21931）：在 android.os.Looper.loop（Looper.java:137）03-12 17:54:18.700：W/System.err（21931）：在 android.app.ActivityThread.main（ActivityThread.java :5226) 03-12 17:54:18.700: W/System.err(21931): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-12 17:54:18.700: W/System.err( 21931): 在 java.lang.reflect.Method.invoke(Method.java:511) 03-12 17:54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller .run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03-12 17 ：54：18.700：W / System.err（21931）：在dalvik.system.NativeStart.main（本机方法）java:5226) 03-12 17:54:18.700: W/System.err(21931): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-12 17:54:18.700: W/System.err (21931): 在 java.lang.reflect.Method.invoke(Method.java:511) 03-12 17:54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03-12 17：54：18.700：W/System.err（21931）：在 dalvik.system.NativeStart.main（本机方法）java:5226) 03-12 17:54:18.700: W/System.err(21931): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-12 17:54:18.700: W/System.err (21931): 在 java.lang.reflect.Method.invoke(Method.java:511) 03-12 17:54:18.700: W/System.err(21931): 在 com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03-12 17：54：18.700：W/System.err（21931）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03 -12 17:54:18.700：W/System.err（21931）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795) 03-12 17:54:18.700: W/System.err(21931): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 03 -12 17:54:18.700：W/System.err（21931）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:07:22.740

知道了：

只需在“hitURL”之前添加这行代码

```
StrictMode.ThreadPolicy policy = new   
StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

感谢所有的帮助:)

# ruby-on-rails - 启动 Rails 应用程序时出现乘客 Phusion 错误

> ID：15348688
> 
> 赞同：0
> 
> 时间：2013-03-11T21:09:44.097
> 
> 标签：ruby-on-rails, passenger

昨晚我在我的 web 应用程序上工作了很多，然后上床睡觉。今天起床尝试从另一台电脑访问网页，遇到以下问题：

```
Ruby (Rack) application could not be started

Error message:
    undefined local variable or method `config' for main:Object
Exception class:
  NameError

Backtrace:
    #   File    Line    Location
    0   /var/www/myapp/config/initializers/setup_mail.rb    1   
    1   /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb  245     in `load'
    2   /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb  245     in `load'
    3   /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb  236     in `load_dependency'
    4   /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb  245     in `load'
    5   /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb  588     
    6   /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb  587     in `each'
    7   /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb  587     
    8   /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb   30  in `instance_exec'
    9   /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb   30  in `run'
    10  /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb   55  in `run_initializers'
    11  /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb   54  in `each'
    12  /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb   54  in `run_initializers'
    13  /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/application.rb     136     in `initialize!'
    14  /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb    30  in `send'
    15  /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb    30  in `method_missing'
    16  /var/www/myapp/config/environment.rb    5   
    17  config.ru   3   in `require'
    18  config.ru   3   
    19  /var/lib/gems/1.8/gems/rack-1.4.5/lib/rack/builder.rb   51  in `instance_eval'
    20  /var/lib/gems/1.8/gems/rack-1.4.5/lib/rack/builder.rb   51  in `initialize'
    21  config.ru   1   in `new'
    22  config.ru   1 
```

setup_mail.rb 的内容

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address              => "localhost",
  :port                 => 25,
  :domain               => 'mydomain.com',
  :openssl_verify_mode  => 'none',
  :tls                  => false,
  :enable_starttls_auto => false

} 
```

有人能告诉我如何解决这个问题吗？当我对任何文件进行更改时，我是否需要重新启动乘客或 nginx 或我的 rails 应用程序？错误消息太神秘了，不知道在哪里寻找问题。感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:50:14.290

您正在尝试在适当的上下文之外访问应用程序的配置对象。尝试像这样包装您的代码：

```
AppName::Application.configure do
  config.action_mailer.delivery_method = :smtp
  # etc ...
end 
```

或将每个替换`config`为`AppName::Application.config`.

# c++ - 在 C++ 中比较 int 和 bitset

> ID：15348691
> 
> 赞同：0
> 
> 时间：2013-03-11T21:09:53.703
> 
> 标签：c++, bitset

如何将 bitset 与整数进行比较？或者更一般地使用整数运算符：像这样：

```
#include <iostream> 
#include <iomanip>
#include <bitset>
using namespace std;

int main()
{
bitset<4> _b1 = 3 ; 

if(_b1>=2 )
    cout<<_b1;

system("pause");
return 0; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T21:11:34.120

使用[`std::bitset<N>::to_ulong()`](http://en.cppreference.com/w/cpp/utility/bitset/to_ulong)：

```
if(_b1.to_ulong() >= 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:12:03.787

有一种`to_ulong`bitset 方法可以返回 a `bitset`as的值`unsigned long`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:12:12.020

您可以使用`to_ulong`来获取位集的无符号整数值：

```
 _b1.to_ulong() 
```

这是[参考](http://www.cplusplus.com/reference/bitset/bitset/to_ulong/)。在您的情况下，它将：

```
if(_b1.to_ulong()>=2 )
   cout<<_b1; 
```

你也应该避免[system("pause")](https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:14:30.203

您可以使用 to_ulong()，并与 long 进行比较，或者可能将 ulong 转换为 int。

# c# - 列表视图有时不显示来自我的 DataSource.cs 的数据

> ID：15348693
> 
> 赞同：0
> 
> 时间：2013-03-11T21:10:01.047
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, async-await

我是 WinRT 开发的新手。我正在尝试将数据从我的数据源绑定到 ListView。但是我用的时候有问题

```
var file = await ApplicationData.Current.LocalFolder.GetFileAsync("tasks.xml");
var readStream = await FileIO.ReadTextAsync(file); 
```

如果我使用此代码，则应用程序有时不会在 ListView 中显示该数据（它确实是随机的，有时它显示一切正常，有时在 ListView 中不显示任何内容）。

当我从数据源中删除此代码时，一切正常。

我有这个数据源类（DataSource.cs）

```
public class InboxPageViewModel
{
    public List<Task> Items { get; set; }

    public InboxPageViewModel()
    {
        GetTasks();
    }

    private async void GetTasks()
    {
        try
        {
            var file = await ApplicationData.Current.LocalFolder.GetFileAsync("tasks.xml");
            var readStream = await FileIO.ReadTextAsync(file);

            var tasksList = new List<Task>
            {
                new Task { Name = "a", DueDate = "b", Project = "c", Context = "d"},
            };

            Items = tasksList;
        }
        catch (Exception ex)
        {
            new MessageDialog(ex.Message).ShowAsync();
        }
    }
}

public class Task
{
    public string Name { get; set; }
    public string Category { get; set; }
    public string DueDate { get; set; }
    public string Project { get; set; }
    public string Context { get; set; }
    public string Note { get; set; }
    public string IsFinished { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:52:11.457

您永远不应该使用`async void`方法（除非您正在编写事件处理程序）。

而且您也不应该`async`从构造函数中调用方法，有关更多信息，请阅读[Stephen Cleary 的文章](http://blog.stephencleary.com/2013/01/async-oop-2-constructors.html)。

# java - 无法运行客户端/服务器应用程序

> ID：15348694
> 
> 赞同：0
> 
> 时间：2013-03-11T21:10:04.427
> 
> 标签：java, android, sockets, client-server

我目前正致力于在 Android 上编写一个简单的消息应用程序。我在一个名为 的类中有服务器`RunServer`，它运行完美。然后我在`MainActivity`调用的方法中有一个客户端`startClient()`。我有一个按钮，它有一个`onclick="startClient"`. 但是每当我点击按钮时，什么都没有发生。我试图在任何地方都放入日志，这就是它不起作用的地方：

```
socket.connect(ipPort); 
```

我似乎无法弄清楚问题是什么。我尝试了不同的端口和 IP 地址，但仍然没有。

`MainActivity`：

```
public class MainActivity extends Activity {

    private Socket socket;
    private ObjectInputStream ois;
    private DataOutputStream dos;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        runOnUiThread(new Runnable() {

            public void run() {
                EditText et = (EditText) findViewById(R.id.message_id);
                String message = et.getText().toString();
                EditText et1 = (EditText) findViewById(R.id.messages);
                et1.append(message);
            }
        });
    }

    public void startClient(View v) {
        socket = new Socket();
        InetSocketAddress ipPort = new InetSocketAddress("10.0.2.2", 4444);
        System.out.println("HEJ!");
        try {
            socket.connect(ipPort); // här tar det stop
            Log.v("It works", "Hello");
            dos = new DataOutputStream(socket.getOutputStream());
        } catch (Exception e) {
        }
        Thread thread = new Thread();
        thread.start();
    }
} 
```

`RunServer`：

```
public class RunServer {

    private ServerSocket server;
    private Socket socket;
    private DataInputStream dis;
    private int port;

    public RunServer(int port) {
        this.port = port;
        Thread connectThread = new Thread(new Connect());
        connectThread.start();
    }

    private class Connect implements Runnable {

        public void run() {
            try {
                server = new ServerSocket(port);
                System.out.println("Server running");
                while (true) {
                    socket = server.accept();
                    Thread clientThread = new Thread(new TalkToClient(socket));
                    clientThread.start();
                    System.out.println("someone connected");
                }
            } catch (IOException ex) {
                Logger.getLogger(RunServer.class.getName()).log(Level.SEVERE,
                        null, ex);
            }
            try {
                server.close();
            } catch (Exception e) {
            }
        }
    }

    private class TalkToClient implements Runnable {

        private Socket socket;

        public TalkToClient(Socket socket) {
            this.socket = socket;
        }

        public void run() {
            String clientMsg;
            try {
                dis = new DataInputStream(socket.getInputStream());
                while ((clientMsg = dis.readUTF()) != null) {
                    if (clientMsg.length() > 0) {
                        System.out.println("Whatup");
                    }
                }
            } catch (Exception e) {
                System.out.println(e);
            }
        }
    }

    public static void main(String[] args) {
        new RunServer(4444);
    }
} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bakgrund"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/ip"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/white" />

    <EditText
        android:id="@+id/ip_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:background="@color/white"
        android:ems="10"
        android:hint="@string/get_ip"
        android:inputType="numberDecimal" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/ip_id"
        android:text="@string/port"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/white" />

    <EditText
        android:id="@+id/port_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView2"
        android:background="@color/white"
        android:ems="10"
        android:hint="@string/get_port"
        android:inputType="number" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/port_id"
        android:layout_below="@+id/port_id"
        android:text="@string/message"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/white" />

    <EditText
        android:id="@+id/message_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView3"
        android:background="@color/white"
        android:ems="10"
        android:hint="@string/get_message" />

    <Button
        android:id="@+id/connect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/message_id"
        android:onClick="startClient"
        android:text="@string/connect"
        android:textColor="@color/white" />

    <Button
        android:id="@+id/send"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/connect"
        android:layout_alignBottom="@+id/connect"
        android:layout_toRightOf="@+id/connect"
        android:text="@string/send"
        android:textColor="@color/white" />

    <TextView
        android:id="@+id/status_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/connect"
        android:layout_below="@+id/send"
        android:layout_marginTop="23dp"
        android:text="@string/status"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/white" />

    <EditText
        android:id="@+id/messages"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/status_id"
        android:background="@color/white"
        android:ems="10"
        android:inputType="textMultiLine" />

</RelativeLayout> 
```

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.datorkomprojekt"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.datorkomprojekt.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:26:19.913

我要做的第一件事是验证代码是否可以在 Android 之外运行。也就是说，只是普通的 java 代码。

顺便说一句，您不需要该`runOnUiThread`方法。该`onCreate`方法始终在主 UI 线程上运行。

不知道为什么 XML 中的 onClick 不起作用，但您可以通过编程方式进行：

```
public class MyActivity extends Activity {
     protected void onCreate(Bundle icicle) {
         super.onCreate(icicle);

         setContentView(R.layout.content_layout_id);

         final Button button = (Button) findViewById(R.id.button_id);
         button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 // Perform action on click
             }
         });
     }
 } 
```

# bash - 请帮我破译这行 bash 脚本代码

> ID：15348696
> 
> 赞同：2
> 
> 时间：2013-03-11T21:10:06.587
> 
> 标签：bash, resty

这是什么意思？

```
 h2t=$((exec 2>&-; (which lynx >/dev/null && echo lynx -stdin -dump) \
            || which html2text || which cat) |tail -n 1) 
```

好的，`h2t=...`意味着它正在设置一个变量。

我认为双括号是用于算术运算的。如果是这样的话，我在那里看不到任何算术，我完全感到困惑。

当然，该行代码上方有一个 15 行的注释块，它解释了意图。不幸的是，评论是古代苏美尔语的 unicode 版本，我无法解释。

**只是在开玩笑！没有评论。

附录：来自[https://github.com/micha/resty/blob/master/resty](https://github.com/micha/resty/blob/master/resty)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:11:44.270

[twalberg](https://stackoverflow.com/users/1253222/twalberg)在对我的回答的评论中发现了它。事实证明，外部`$()`分配了一个命令行，具体取决于可能能够将 HTML 转换为文本的各种工具的可用性。

因此`h2t`包含`lynx -stdin -dump`命令行，或失败（即`lynx`不可用），`html2text`或作为最后的手段`cat`。后两个的命令来自`which`调用，前者的命令来自`echo`.

* * *

它将 HTML 从标准输入转换为文本。

让我们把它分开。

*   `exec 2>&-`在子外壳中设置重定向（`stderr`闭嘴，IIRC）
*   下一个 sub-subshel​​l 尝试查看 lynx 是否已安装并运行它，从`stdin`.
*   之后的其他部分`||`没有多大意义，因为它们只评估是否安装`html2text`，`cat`但不运行它们
*   然后我们从第一个子shell中获取最后一行

**刮那个。**因为它是一个`echo`它不做任何事情。对我来说看起来像是原型设计。

将其拆开以提高可读性：

```
$(
    exec 2>&-
      (
        which lynx >/dev/null &&
        echo lynx -stdin -dump
      ) ||
    which html2text ||
    which cat
  ) |
  tail -n 1
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:17:41.643

我不记得消除语法歧义的确切规则，但应该这样解析：

```
h2t=$(
       (exec 2>&-; (which lynx >/dev/null && echo lynx -stdin -dump) ||
         which html2text ||
         which cat) |
       tail -n 1
     ) 
```

换句话说，一个命令替换，由一个通过管道传输到`tail`. 子shell 用于为`exec`命令提供“范围”，之后另一个子shell 启动一个列表，其中3 个命令由`||`运算符分隔。

# json - Ember 数据和映射 JSON 对象

> ID：15348698
> 
> 赞同：6
> 
> 时间：2013-03-11T21:10:11.110
> 
> 标签：json, ember.js, ember-data

我已经真正进行了搜索，但还没有找到使用序列化程序从不同格式的 JSON 响应中获取对象的体面示例。我不更改 JSON 响应格式的原因在[http://flask.pocoo.org/docs/security/#json-security](http://flask.pocoo.org/docs/security/#json-security)中进行了概述。

我对 javascript 还不是很好，所以我很难理解 serialize_json.js 中的钩子，或者我应该使用映射（我只是不知道）。所以这是我对许多对象的 JSON 响应的示例：

```
{
  "total_pages": 1, 
  "objects": [
     {
      "is_completed": true, 
      "id": 1, 
      "title": "I need to eat"
    }, 
    {
      "is_completed": false, 
      "id": 2, 
      "title": "Hey does this work"
    }, 
    {
      "is_completed": false, 
      "id": 3, 
      "title": "Go to sleep"
    }, 
  ], 
  "num_results": 3, 
  "page": 1
} 
```

当 ember-data 尝试使用它时，我收到以下错误：

```
DEBUG: -------------------------------
DEBUG: Ember.VERSION : 1.0.0-rc.1
DEBUG: Handlebars.VERSION : 1.0.0-rc.3
DEBUG: jQuery.VERSION : 1.9.1
DEBUG: -------------------------------
Uncaught Error: assertion failed: Your server returned a hash with the key total_pages but you have no mapping for it 
```

当您查看我的数据存储代码时，这完全是：

```
Todos.Store = DS.Store.extend({
    revision: 12,
    adapter: DS.RESTAdapter.create({
        mappings: {objects: "Todos.Todo"},
        namespace: 'api'
    })
}); 
```

My question is how do I deal with `total_pages`, `num_results` and `page`? And by deal, I mean ignore so I can just map the `objects` array.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T22:17:10.280

All root properties you return in your JSON result are mapped to a DS.Model in Ember Data. You should not return properties that are not modelled or you should model them.

If you want to get rid of the error you should make an empty model for the properties you don't use.

Read more [here](http://emberjs.com/guides/models/the-rest-adapter/#toc_json-root)

Why are you returning properties you don't want to use? Or is it out of your control?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T17:34:55.863

Ember is fairly opinionated about how things are done. Ember data is no exception. The Ember team works towards certain standards that it thinks is best, which is, in my opinion, a good thing.

Check out [this post](http://emberjs.com/blog/2013/05/03/ember-data-progress-update.html) on where ember is going. TL;DR because there are so many varying implementations of api calls, they're setting their efforts towards supporting the [JSON API](http://jsonapi.org/).

From my understanding, there is no easy way to do what you're asking. Your best bet is to write your own custom adapter and serialized. This shouldn't be too hard to do, and has been done before. I recommend you having a look at the [Tastypie adapter](https://github.com/escalant3/ember-data-tastypie-adapter) used for Python's Django Tastypie

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-17T09:03:21.710

The way to accomplish this is with a custom serializer. If all your data is returned from the server in this format you could simply create `ApplicationSerializer` like this:

```
DS.RESTSerilizer.extend({
  normalizePayload: function(type, payload) {
     delete payload.total_pages;
     delete payload.num_results;
     delete payload.page;
     return payload;
  }
}); 
```

That should allow Ember Data to consume your API seamlessly.

# ios - iPhone模拟器突然开始运行很慢

> ID：15348699
> 
> 赞同：334
> 
> 时间：2013-03-11T21:10:17.373
> 
> 标签：ios, macos, ios-simulator, osx-mountain-lion

我已经在 iphone 模拟器中开发了一个应用程序数周，到目前为止它一直运行良好，但是在加载内容和动画时突然开始运行非常缓慢。自从我上次成功测试以来，我没有对我的代码进行任何更改。

我尝试重新启动模拟器（多次）并删除应用程序并进行完全干净的重建，但没有运气。我还在模拟器运行时通过监视器检查了我的 cpu 使用情况，我只使用了大约 30% 的 cpu 和 40% 的内存。

我完全理解模拟器从来没有像设备本身那么快，但它在这么长的时间后突然开始运行缓慢似乎很奇怪，我所说的慢是指不到它原来速度的四分之一。

* * *

## 回答 #1

> 赞同：814
> 
> 时间：2013-03-11T21:11:25.157

在 iOS 模拟器中，在顶部的栏中，单击`Debug`→ `Toggle Slow Animations`（或`Slow Animations`使用 Xcode 10+）。您可能不小心将其打开。

* * *

## 回答 #2

> 赞同：186
> 
> 时间：2015-07-07T17:18:56.667

简单的`Command`+`T`将解决这个问题。

`Command`+`T`切换模拟器的`Slow Animations`，可以在模拟器菜单下找到：`Debug`-> `Slow Animations`。

* * *

## 回答 #3

> 赞同：169
> 
> 时间：2013-03-11T21:11:16.330

转到模拟器的调试菜单并选择“切换慢速动画”。

**更新：**在 Xcode 10 中，它只是“慢动画”：

[![模拟器调试菜单](../Images/6d6f7e9d88cea9890fb81ed6a73ce57b.png)](https://i.stack.imgur.com/Rgnev.png)

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2017-08-16T05:29:09.677

选择模拟器，

选择调试并取消选中慢动画。
快捷命令 + t

这对我有用。

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2016-10-27T00:45:52.867

如果 Cmd-T（慢速动画）选项对您不起作用并且`Debug -> Slow Animations`已关闭，但您**仍然**有慢速动画，请尝试`Simulator -> Reset Contents and Settings`（或可能`Hardware -> Erase All Content and Settings`）。当这里没有其他答案时，这对我有用。有人对为什么有建议吗？

还附加了一个**调试器**（完全）可能会使动画非常慢。

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2016-11-07T02:56:18.753

React-Native 用户的另一个潜在修复：

Chrome 会取消在前台以外的任何选项卡中运行的 Javascript 的优先级。因此，如果您启用了远程调试，请务必将调试器放在自己的窗口中。

* * *

## 回答 #7

> 赞同：29
> 
> 时间：2015-06-10T13:51:20.537

使用模拟器时，您不小心在调试时按下了慢速动画。所以运行模拟器 -> 调试 -> 取消选中慢动画。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2013-11-07T08:15:53.493

我认为您错误地按下了 command + T 而不是 command + R 。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-04-24T21:42:15.327

我还没有代表发表评论，但我在这里提出了一些答案并想说更多。我在 iOS 模拟器中遇到了动画缓慢的问题，尤其是在旋转时，我通过 Google 找到了这篇文章。确实，不知何故“切换慢速动画”一定是打开了，因为三班倒修复了它。起初，我不认为这是一个问题，因为“切换慢速动画”旁边没有复选标记。事实证明，菜单上从来没有复选标记，也没有任何指示，无论它是打开还是关闭。所以只需尝试切换它，看看旋转/导航是否更快/更慢。

所以谢谢！

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-10-31T06:23:08.337

模拟器->重置内容和设置对我有用。当我远程调试我的 react-native 代码时，这个问题似乎再次出现。[正如nomad 建议](https://stackoverflow.com/questions/15348699/iphone-simulator-suddenly-started-running-very-slow/40337452#comment67888487_40274351)的那样，它也可能与 AsyncStorage 有关。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-01-07T10:05:48.030

这不仅仅是关于慢动画。Xcode 模拟器在全球范围内具有极低的性能。这是苹果的错误。我已经通过[反馈助手](https://feedbackassistant.apple.com/)报告了它。**我用代码创建了演示，演示模拟器比任何旧的真实设备慢 200 倍。**我发现在 WKWebView 中执行的带有 Date 对象的 JavaScript 代码对模拟器来说很痛苦。在我的情况下，更改模拟器中的选项无济于事。见 jsfiddle [https://jsfiddle.net/kjms16cw/](https://jsfiddle.net/kjms16cw/)希望苹果能尽快修复！

```
var log = document.getElementById("log");
document.getElementById("button").onclick = function() { run(); };

function run() {
	var d1 = new Date();
	for (var i = 0; i < 1000; i++) {
		var x = new Date();
		x.setMilliseconds(0);
		x.setSeconds(0);
		x.setMinutes(0);
	}
	var d2 = new Date();
	log.innerHTML = ((d2.getTime() - d1.getTime()) / 1000) + " seconds";
}
```

```
<h3>Xcode Simulator Extremely Low Performance</h3>
<p>This test runs fast (several tens milliseconds e.g. 30 ms)
in any browser any device any platform including very old iOS device
e.g. iPhone 5C and several years old iPad 2, BUT IN SIMULATOR IT TAKES 6000 ms 
(yes, 6 seconds!). Terrible!</p>
<button id="button">run()</button>
<div id="log"></div>
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-10-02T06:45:38.300

您可以尝试关闭远程调试（Cmd-D -> 停止远程 JS 调试）。这通常会加快速度。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-06T15:45:03.903

当 chrome 调试处于活动状态且浏览器选项卡不在前台时，模拟器也很慢。对我来说，我决定把指南放在前台。

# batch-file - Imagemagick 遮罩

> ID：15348700
> 
> 赞同：1
> 
> 时间：2013-03-11T21:10:31.343
> 
> 标签：batch-file, imagemagick

我有一个看起来像这样的图像：

![](../Images/d6cf89bbcdc0effa2188c78b0c75f4d0.png)

但是，此图像的背景是白色的，而不是透明的。

我想知道是否有一种方法可以使用此蒙版并使原始图像的白色背景透明：

![](../Images/3c23617199129679154d3f1d707cdb2d.png)

我想我可能需要从这里使用一些东西，但我不知道它是什么：[http ://www.imagemagick.org/Usage/masking/](http://www.imagemagick.org/Usage/masking/)

我在命令行上使用 Imagemagick。（这是[http://www.imagemagick.org/Usage/masking/](http://www.imagemagick.org/Usage/masking/)上的示例使用的内容）

*抱歉无法直接提供网址/图片，我目前没有足够的声誉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:30:01.413

查看您提到的 ImageMagick 页面上的[Masking Simple Backgrounds (floodfill)部分。](http://www.imagemagick.org/Usage/masking/#floodfill)那里的示例应该完全符合您的要求。但正如该页面所说，生成的图像在深色背景上看起来不太好。

# ios - TableView IndexPath.row 不可分配

> ID：15348702
> 
> 赞同：0
> 
> 时间：2013-03-11T21:10:35.073
> 
> 标签：ios, uitableview, tableview

我想将 tableView indexPath 分配给视图控制器变量之一。但是，它分配其中一个对我来说很奇怪，无论我选择哪一行，它总是分配 0。正如您在下面的代码中看到的，iVC.virdsection=indexPath.row 工作得很好，但是 sVC2.evradID=indexPath .row 始终为 0。

```
//
//  TableViewController.h

#import <UIKit/UIKit.h>
#import "DetailViewController.h"
#import "SubViewController.h"

@interface TableeViewController : UITableViewController
@property (nonatomic,strong)NSArray *contentArray;
@property (strong,nonatomic)DetailViewController *detailViewController;
@property (strong,nonatomic)SubViewController *subViewController;
@end

//
//  TableViewController.m

#import "TableViewController.h"
#import "DetailViewController.h"
#import "SubViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController
@synthesize contentArray;
@synthesize detailViewController;
@synthesize subViewController;
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    DetailViewController *iVC = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
    self.detailViewController = iVC;

    iVC.virdSection = indexPath.row;
    iVC.navigationItem.title=[NSString stringWithFormat:@"%d.Vird",indexPath.row+1];

   SubViewController *sVC2 = [[SubViewController alloc] initWithNibName:@"SubViewController" bundle:[NSBundle mainBundle]];
    self.subViewController = sVC2;
    sVC2.evradID=indexPath.row;
    [self.navigationController pushViewController:iVC animated:YES];
}

Here is my SubViewController.h
//  SubViewController.h

#import <UIKit/UIKit.h>

@interface SubViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *evradLabel;
-(void)evradCall;
@property int evradID;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:58:10.193

第 0 行是第一行。如果您记录`indexPath.row`它可能会显示所有行的索引。0 在技术上是正确的。试试这个代码

```
NSUInteger row = 0;
NSUInteger sect = indexPath.section;
for (NSUInteger i = 0; i < sect; ++ i){
sVC2.evradID = i;
} 
```

（我在[这里找到了这个）](https://stackoverflow.com/questions/2107603/correct-indexpath-row-selection-in-tableview-which-has-multiple-sections)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:16:14.163

Dumb question, but I've had it happen to me before, is `sVC2` nil? You could have a problem instantiating sVC2.

It's kind of hard to tell what's going on from code posted.

# integration - 是否可以在 Perforce 中添加缺少的集成记录？

> ID：15348703
> 
> 赞同：2
> 
> 时间：2013-03-11T21:10:37.663
> 
> 标签：integration, perforce

最近我向 Perforce 提交了一个文件作为“添加”（一个新文件）。

然后我提交了更多的更改。

现在我意识到原来的“添加”应该是“集成”，因为该文件实际上是另一个现有文件的副本和修改。

有没有办法在事后添加集成链接？

如果没有，最简单的方法是什么？如果我们删除所有受影响的变更列表，然后重新提交它们，但使用正确的集成历史，那会奏效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:26:44.873

刚刚通过电话与 Perforce 支持人员交谈。答案是否定的，你不能“改变历史”。但是，建议的行动方案是：

*   复制对新文件所做的每项更改
*   删除所有应该是*集成的添加文件*
*   重新提交所做的每项更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:07:47.273

可以生成 Perforce 日志（数据库）记录，将丢失的数据放在适当的位置。这些是由系统管理员重播到实时数据库中的纯文本条目。记录了数据库架构：www.perforce.com/perforce/doc.current/schema

在执行此操作时，您需要非常小心并与 Perforce Support 合作，并首先在测试系统上进行尝试。通常不值得付出努力。

# android - 无法访问的代码？

> ID：15348708
> 
> 赞同：0
> 
> 时间：2013-03-11T21:10:51.537
> 
> 标签：android, android-layout, android-button

我正在“尝试”制作一个 android 应用程序。我正在努力做到这一点，以便当我单击一个按钮时，它会将我带到另一个布局。我已经正确地完成了其他所有操作，我很确定......除了这个错误之外还有 0 个错误。无法访问的代码。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;

Button bUtuube = (Button) findViewById(R.id.Utuube);
bUtuube.setOnClickListener(new View.OnClickListener() { 
```

我收到无法访问的代码错误`Button bUtuube = (Button) findViewById(R.id.Utuube)`。那就是出现红线的地方。

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T21:14:20.520

`return true;`导致您退出`onCreateOptionsMenu`方法并将控制权返回给调用者。所以编译器试图告诉你，在 return 语句之后没有办法得到代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:26:20.737

您缺少右括号：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;

} // < ----- missing

Button bUtuube = (Button) findViewById(R.id.Utuube);
bUtuube.setOnClickListener(new View.OnClickListener() { 
```

从您显示的片段中无法分辨，但我假设 YouTube 按钮应该在外部声明`onCreateOptionsMenu`，这似乎很可能。

# python - 生成 PDF 文件的 Web 服务器

> ID：15348710
> 
> 赞同：2
> 
> 时间：2013-03-11T21:10:58.243
> 
> 标签：python, http, pdf, web-applications, latex

我正在使用 Python 构建一个网站，该网站使用 LaTeX 生成 PDF 文件。但我想把大部分网站放在 Google App Engine 上，我不能在上面运行 LaTeX。所以我想在另一台服务器上做 LaTeX 部分。

起初这似乎是一个简单的问题——我认为最好的方法是将 LaTeX 发布到服务器并让它以 PDF 响应。但是如果 LaTeX 文件很长，有时可能需要一段时间才能编译，所以我开始认为这不是最好的方法。做这样的事情的标准方法是什么？这一定是一个非常普遍的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:37:27.467

你可以像亚马逊一样通过电子邮件发送，将文件发送到服务器，当它可以时，服务器通过电子邮件发送

# ruby-on-rails - 从接收到的数据创建一个数组

> ID：15348711
> 
> 赞同：0
> 
> 时间：2013-03-11T21:10:59.133
> 
> 标签：ruby-on-rails, arrays, screen-scraping, models

我正在尝试学习如何通过屏幕抓取获取数据，然后将其保存到模型中。到目前为止，我可以获取数据。我这样说，好像我这样做：

```
puts home_team 
```

我让所有的主队回归

get_match.rb #抓取数据

```
require 'open-uri'
require 'nokogiri'

module MatchGrabber::GetMatch

FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

def get_fixtures
doc = Nokogiri::HTML(open(FIXTURE_URL))
home_team =  doc.css(".team-home.teams").text
end
end 
```

然后我想更新我的模型

match_fixtures.rb

```
 module MatchFixtures
 class MatchFixtures
 include MatchGrabber::GetMatch

def perform
  update_fixtures
end

private

 def update_fixtures
  Fixture.destroy_all
  fixtures = get_fixtures
end

def update_db(matches)
  matches.each do |match|
    fixture = Fixture.new(
      home_team: match.first
      )
    fixture.save
 end
end
end
end 
```

所以下一步就是我卡住的地方。首先，我需要将 home_team 结果放入一个数组中？

第二部分是我通过我的 update_db 方法传递匹配，但这不正确，我在这里传递什么，我的 update_fixtures 方法或方法本身的 home_team 的结果？

要运行我执行的任务：

```
namespace :grab do
task :fixtures => :environment do
MatchFixtures::MatchFixtures.new.perform
end
end 
```

但什么都没有得救，但这是意料之中的。

这里有陡峭的学习曲线，希望能朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:24:55.717

您可以将数组直接传递给更新方法：

```
def update_fixtures
  Fixture.destroy_all
  update_db(get_fixtures)
end

def update_db(matches)
  matches.each {|match| Fixture.create(home_team: match.first) }
end 
```

或者一起取消该方法：

```
def update_fixtures
  Fixture.destroy_all
  get_fixtures.each {|match| Fixture.create(home_team: match.first) }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:00:48.283

调用`css(".team-home.teams").text`不会将匹配的 DOM 元素作为数组返回，而是作为单个字符串返回。

为了获得一个元素数组，将 get fixture 重构为如下所示：

```
get_teams
  doc = Nokogiri::HTML(open(FIXTURE_URL))
  doc.css(".team-home.teams").map { |el| el.text.strip }
end 
```

这将返回一个数组，其中包含与您的选择器匹配的元素的文本，去掉空白和换行符。此时，您可以遍历返回的数组并将每个团队作为参数传递给模型的`create`方法：

```
get_teams.each { |team| Fixture.create(home_team: team) } 
```

# java - 为什么没有调用 WindowBuilder 事件？

> ID：15348716
> 
> 赞同：0
> 
> 时间：2013-03-11T21:11:25.480
> 
> 标签：java, dialog, windowbuilder

我在 WindowBuilder for Eclipse 中创建了一个 Java 应用程序。我构建了一个菜单，并在其中一个菜单项上添加了 mouseclicked 事件。

```
JMenuItem mitemAbout = new JMenuItem("About");
    mitemAbout.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent arg0) {
            JOptionPane.showInternalMessageDialog( form, "Message", "title", JOptionPane.PLAIN_MESSAGE);

        }
    });
    mitemHelp.add(mitemAbout); 
```

我在 JOptionPane 行上放了一个断点，当我在调试模式下单击菜单项时，它甚至都没有到达它。我在这里完全错过了一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:16:31.517

Although `JMenuItem` components offer the `addMouseListener` method (inherited from `java.awt.Component`) `MouseEvents` are only processed for the `MenuElements` own functional use, i.e. any external `MouseEvents` will have no effect.

For `JMenuItem` components, use an `ActionListener` rather than a `MouseListener` to listen for user events:

```
mitemAbout.addActionListener(new ActionListener() {
   @Override
   public void actionPerformed(ActionEvent e) {
      ...               
}
}); 
```

or use:

```
mitemAbout.setAction(myAction); 
```

# magento - Magento - 通过安装程序安装 EAV 属性

> ID：15348718
> 
> 赞同：0
> 
> 时间：2013-03-11T21:11:29.793
> 
> 标签：magento

大家好，我正在使用我模块中的安装程序将新的 EAV 产品属性添加到默认属性集中。到目前为止它工作得很好，但有两件小事困扰着我。

```
public function getDefaultEntities(){

    return array(
        'catalog_product' => array(
            'entity_model'                      => 'catalog/product',
            'attribute_model'                   => 'catalog/resource_eav_attribute',
            'table'                             => 'catalog/product',
            'additional_attribute_table'        => 'catalog/eav_attribute',
            'entity_attribute_collection'       => 'catalog/product_attribute_collection',
            'attributes'        => array(
                'disable_sale' => array(
                    'group'                     => 'General',
                    'label'                     => 'Disable Sale',
                    'type'                      => 'int',
                    'input'                     => 'select',
                    'source'                    => 'eav/entity_attribute_source_boolean',
                    'global'                    => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
                    'is_visible_on_front'       => true,
                    'used_in_product_listing'   => true,
                )
            )
        )
    );
} 
```

我希望我的属性集默认显示在产品详细信息页面和目录列表中。

```
'is_visible_on_front'       => true,
'used_in_product_listing'   => true, 
```

问题是这两个值都没有设置为可见。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:22:48.547

is_visible_on_front 更改为 visible_on_front 然后检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:17:28.810

我没有对属性本身进行此操作，但是在您的代码中尝试同时使用“整数”1 和“字符串”“1”，看看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:01:05.943

在 stackoverflow 找到答案： [Magento 模块设置/安装脚本](https://stackoverflow.com/questions/8990441/magento-module-setup-installer-script)

安装类应该从

```
Mage_Catalog_Model_Resource_Eav_Mysql4_Setup 
```

现在安装程序知道附加属性和它的工作就像一个魅力。

# asp.net-mvc-4 - 肯多格不工作

> ID：15348721
> 
> 赞同：1
> 
> 时间：2013-03-11T21:11:37.357
> 
> 标签：asp.net-mvc-4, kendo-ui

这是我的剑道网格代码。我看到列中的数据，但只有这个。我无法对数据进行排序或过滤。“创造”是我的行动，利润是控制器。我错过了什么

```
 @(Html.Kendo().Grid(Model)    
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Bound(model=> model.IdCategory.Name).Groupable(false);
            columns.Bound(model=> model.Value);
            columns.Bound(model => model.Description);
            columns.Bound(model => model.DateInput);
        })
        .Groupable()
        .Pageable()
        .Sortable()
        .Scrollable()
        .Filterable()
        .DataSource(dataSource => dataSource
            .Ajax()
            .Read(read => read.Action("Create", "Profit"))
        )
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:47:45.467

检查浏览器开发人员工具中的任何 JavaScript 错误。有一个常见的 JavaScript 错误列表：[http ://docs.kendoui.c​​om/getting-started/troubleshooting#javascript-error-that-kendo-widgets-are-unavailable-or-undefined](http://docs.kendoui.com/getting-started/troubleshooting#javascript-error-that-kendo-widgets-are-unavailable-or-undefined)

另外检查网格故障排除：[http ://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting)

# ios - 在 Xcode 中导入 CocoalibSpotify

> ID：15348724
> 
> 赞同：1
> 
> 时间：2013-03-11T21:11:44.473
> 
> 标签：ios, spotify

在开始之前，我想指出我对编码非常陌生，并且有 UI 和 UX 设计的背景。但是对于一个项目，我需要使用 Xcode 和音乐播放器，Spotify 是首选之一。

我下载了 Spotify 包装器和库文件，并获得了一个开发人员密钥来使示例文件工作，但在此之后我真的不知道如何处理它。

我希望该应用程序尽可能接近 iPhone 的 spotify 应用程序，并且以我有限的编码知识想知道是否有一种简单的方法可以让我在 Xcode 中获得它？

现在任何帮助都会很棒！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:40:47.933

CocoaLibSpotify 没有在包中提供 Spotify iPhone 客户端。除了登录屏幕之外，它不包含任何 UI 元素，这与官方客户端使用的不一样。

但是，CocoaLib Spotify*确实*提供了一个基础，您可以在其中访问 Spotify 用户的播放列表并执行搜索等。它还提供播放功能。

要开始使用 CocoaLibSpotify，请阅读自述文件——它包含有关如何开始使用 Xcode 的说明。或者，查看`iOS Library/Sample Projects`文件夹中的示例项目，其中都包含 CocoaLibSpotify 和一堆示例代码，以帮助您开始。

# javascript - 如何在javascript中一次出现一个测验问题

> ID：15348725
> 
> 赞同：5
> 
> 时间：2013-03-11T21:11:47.163
> 
> 标签：javascript, jquery, dynamic

JavaScript 菜鸟在这里。我正在尝试制作我正在开发的测验应用程序，但我真的不知道如何进行。我已经用 html 写出了所有的问题。

情况是这样的：这个测验没有正确答案，只有答案值。该代码应该将每个问题的所有值相加，并根据累积的总分在最后显示最终分数/描述：

```
<html xmlns="http://www.w3.org/1999/html">
<head>
    <link rel="stylesheet" type="text/css" href="quiz.css">
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript" href="quiz.js"></script>
<title>What Type of Date Are You? (Dude Edition)</title>
</head>
<body>
<div>
    <h1>What Type of Date Are You? (Dude Edition)</h1>
</div>
<div class="questions">
    <p>1\. You see a girl waiting at the bus stop. She is exactly your type. How do you get her number?</p>
    <form class="options">
        <input class="option" type="radio" name="question1" value=4>You walk right up to her, strike up a conversation, and ask for her number<br>
        <input class="option" type="radio" name="question1" value=3>You wait a few days until you get the courage to go and talk to her<br>
        <input class="option" type="radio" name="question1" value=2>You tell one of your mutual friends that you like her<br>
        <input class="option" type="radio" name="question1" value=1>You wait for her to come to you</br>
    </form>
</div>
<div class="questions">
    <p>2\. You guys decide to go out on a date. Where do you decide to take her?</p>
    <form class="options">
        <input class="option" type="radio" name="question2" value=4>You take her out for a short coffee and talk about life and relationships<br>
        <input class="option" type="radio" name="question2" value=3>You take her out on a creative date and ask her questions about her life and you respond in kind, tried-and-true interview-style<br>
        <input class="option" type="radio" name="question2" value=2>You take her out to a nice restaurant and dress in your best clothes. You ask the same questions as above<br>
        <input class="option" type="radio" name="question2" value=1>You take her to the best restaurant and hope that your clothes does most of the talking. If not, you've got great stories to tell up your sleeves<br>
    </form>
</div>
<div class="questions">
    <p>3\. You think you had a great first date. What do you do between now and your second date?</p>
    <form class="options">
        <input class="option" type="radio" name="question3" value=4>You send her a text telling her you'll have out again soon. No big deal. Another date with another girl, coming up!<br>
        <input class="option" type="radio" name="question3" value=3>You send her a text telling her how much fun you had and can't wait for the next date.<br>
        <input class="option" type="radio" name="question3" value=2>In addition to doing above, you call her and ask her how she thinks the date went and when/where the next date is<br>
        <input class="option" type="radio" name="question3" value=1>In addition to doing above, you think about how lucky you are for finally finding an amazing girl. You hope to start a relationship ASAP<br>
    </form>
</div>
<div class="questions">
    <p>4\. Crap! You just remembered you have a huge project due this Friday. This might be a problem. How many dates do you have this week?</p>
    <form>
        <input class="option" type="radio" name="question4" value=4>More than 5\. You're going to have to cancel one of them.<br>
        <input class="option" type="radio" name="question4" value=3>You have a few dates in the pipeline, just testing the waters. You can still make the dates<br>
        <input class="option" type="radio" name="question4" value=2>You have one date because you're a one woman kind of guy<br>
        <input class="option" type="radio" name="question4" value=1>You have one date. You don't date much, in general.<br>
    </form>
</div>
<div class="questions">
    <p>5\. Finally, how spontaneous are you?</p>
    <form>
        <input class="option" type="radio" name="question5" value=4>YOLO is your middle name. Your amusement > all else<br>
        <input class="option" type="radio" name="question5" value=3>You may not be the most wild or crazy person, but you are definitely down for good times<br>
        <input class="option" type="radio" name="question5" value=2>You like to have fun as much as the next guy, as long as things don't get too out of hand<br>
        <input class="option" type="radio" name="question5" value=1>I like to plan ahead, no matter what the situation, work or play<br>
    </form>
</div>
    <br>
    <input type="button" id='next' value="Next" onlick="sum_values()"> 
```

这是我的 JavaScript：

```
$(document).ready(function(){
answers = new Object();
$('.option').change(function(){
    var answer = ($(this).attr('value'))
    var question = ($(this).attr('name'))
    answers[question] = answer
})
var item1 = document.getElementById('questions');

$('#next').click(function(){
    var result = sum_values()
    //do stuff with the result
    alert(result);
});

})

function sum_values(){
var the_sum = 0;
for (questions in answers){
    the_sum = the_sum + parseInt(answers[question])
}
return the_sum
}

$('#next').click(function(){
$('.questions').fadeOut();
$('.questions' + $(this).html()).delay(450).fadeIn(); 
```

我知道它充满了错误，但我希望尽可能多地学习，因此任何批评/帮助将不胜感激。我显然还远远没有完成，所以我不会把它当作个人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T22:12:30.677

欢迎来到 Stackoverflow！SO会在你遇到死胡同时帮助你，但你必须用尽所有可能性并真正陷入困境。网上有大量关于 javascript 和 jQuery 的资源，谷歌是你的朋友 :)

要回答“如何在 javascript 中使测验问题一次出现一个”的问题，有一百种方法可以使紫色火烈鸟出现。一种解决方案是获取问题的总数并跟踪当前显示的问题。然后当用户单击下一步时，隐藏当前问题并显示下一个问题。[http://jsfiddle.net/3kpFV/](http://jsfiddle.net/3kpFV/)

```
//Store the total number of questions
var totalQuestions = $('.questions').size();

//Set the current question to display to 1
var currentQuestion = 0;

//Store the selector in a variable.
//It is good practice to prefix jQuery selector variables with a $
$questions = $('.questions');

//Hide all the questions
$questions.hide();

//Show the first question
$($questions.get(currentQuestion)).fadeIn();

//attach a click listener to the HTML element with the id of 'next'
$('#next').click(function () {

     //fade out the current question,
     //putting a function inside of fadeOut calls that function 
     //immediately after fadeOut is completed, 
     //this is for a smoother transition animation
     $($questions.get(currentQuestion)).fadeOut(function () {

        //increment the current question by one
        currentQuestion = currentQuestion + 1;

        //if there are no more questions do stuff
        if (currentQuestion == totalQuestions) {

            var result = sum_values()

            //do stuff with the result
            alert(result);

        } else {

            //otherwise show the next question
            $($questions.get(currentQuestion)).fadeIn();

        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-18T12:18:43.007

奥尔曼教授的回答是一个非常有创意的回答。我一直在寻找使用核心 java 脚本开发一些花哨的测验......但是...... [Slick Quiz](https://github.com/jewlofthelotus/SlickQuiz) - 这个 jquery 插件是我需要的东西。它干净且易于定制。

[演示测验](http://www.iknowmine.org/slickQuiz_example.html)

您只需要创建一个 PHP 脚本，以 JSON 格式公开您的所有测验数据。这个插件默认支持很多配置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-12T10:12:05.557

```
#For the Next Prev Question or Survey Question to show and hide.#
<div class="question"></div>

 <div class="d-flex justify-content-center ">
         <div class="button hide col-md-2 btn btn-primary mt-5 btn-lg" id="next">Next</div>
            <div class="button hide col-md-2 btn btn-primary btn-lg mt-5 ml-2" id="prev">Prev</div>
        </div>
    ##
    <script>
        $(document).ready(function() {

     //Store the total number of questions
    var totalQuestions = $('.question').size();
    //alert(totalQuestions);
    //Set the current question to display to 1
    var currentQuestion = 0;
    //Store the selector in a variable.
    //It is good practice to prefix jQuery selector variables with a $
    $questions = $('.question');
    $prev=$('#prev');
    $next=$('#next');

    //Hide all the questions
    $questions.hide();

    $prev.hide();
    //Show the first question
    $($questions.get(currentQuestion)).fadeIn();
    //attach a click listener to the HTML element with the id of 'next'
    $('#next').click(function () {
         //fade out the current question,
         //putting a function inside of fadeOut calls that function 
         //immediately after fadeOut is completed, 
         //this is for a smoother transition animation
         $($questions.get(currentQuestion)).fadeOut(function () {
            //increment the current question by one
            currentQuestion = currentQuestion + 1;
            if(currentQuestion<=1) $('.button').fadeIn();
           //alert(currentQuestion);
            if (isNaN(currentQuestion) || currentQuestion == totalQuestions ) {
         $('#next').fadeOut();
        $($questions.get(currentQuestion)).fadeIn();
       }
            //if there are no more questions do stuff
            if (currentQuestion == totalQuestions) {
               // var result = sum_values()
                //do stuff with the result
                //alert(totalQuestions);
                $('#prev').fadeIn();
                $('#next').fadeOut();
                currentQuestion=currentQuestion-1
                $($questions.get(currentQuestion)).fadeIn();
            } else {
                $('#next').fadeIn();
                //otherwise show the next question
                $($questions.get(currentQuestion)).fadeIn();
            }
        });
    });

    $('#prev').click(function () {
    //fade out the current question,
    //putting a function inside of fadeOut calls that function 
    //immediately after fadeOut is completed, 
    //this is for a smoother transition animation
    $($questions.get(currentQuestion)).fadeOut(function () {
       //Decrement the current question by one
       currentQuestion = currentQuestion - 1;
       //if there are no more questions do stuff
       if (isNaN(currentQuestion) || currentQuestion <= 0 ) {
        $('#prev').fadeOut();
        $($questions.get(currentQuestion)).fadeIn();
       }
       if (currentQuestion == totalQuestions) {
           currentQuestion=currentQuestion-1
           $($questions.get(currentQuestion)).fadeIn();
       } else {
        $('#next').fadeIn();
           //otherwise show the next question
           $($questions.get(currentQuestion)).fadeIn();
       }
    });

    });
    });
    </script> 
```

# d3.js - d3 刻度仅显示星期日：

> ID：15348729
> 
> 赞同：12
> 
> 时间：2013-03-11T21:11:49.277
> 
> 标签：d3.js

我希望我的规模从第一天开始到最后一天结束，而不是只显示星期天：

我希望数据从 28 （不是 3）开始，但它从 3 开始，即星期日：

我如何在一周中的任何一天开始我的体重秤？

我希望显示的日期与我给出的图表不显示星期天的数据相匹配。

示例链接：http: [//jsfiddle.net/3LZua/2/](http://jsfiddle.net/3LZua/2/)

提前致谢。

PS这是代码：（在html中会有一个）

```
followerLineGraph = function(data)
{    
    var width = 400;

    var x = d3.time.scale()
        .domain([data[0].date, data[data.length - 1].date])
        .range([0, width]);

    var chart = d3.select("#test").append("svg").attr("class", "chart");

    //Date Label
    var xAxis = d3.svg.axis()
        .scale(x)
        .ticks(data.length)
        .tickFormat(d3.time.format('%m/%d-%a'))
        .tickSize(0)
        .tickPadding(8);

    chart.append('g')
        .attr('fill', '#1ff')
        .call(xAxis);
}

    var data = [
      { date: new Date(2013, 1, 28), TotalLikes: 18 },
      { date: new Date(2013, 2, 14), TotalLikes: 15 },
      { date: new Date(2013, 2, 21), TotalLikes: 17 },
      { date: new Date(2013, 2, 28), TotalLikes: 17 },
      { date: new Date(2013, 3, 4), TotalLikes: 20 }
];

followerLineGraph(data); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-07-03T04:55:47.513

我刚刚遇到了一个非常相似的问题，我无法在 d3 文档中找到答案。但是，我查看了 d3 源代码 ( [https://github.com/mbostock/d3/blob/master/d3.js](https://github.com/mbostock/d3/blob/master/d3.js) ) 并且能够找到以下行：

```
d3.time.weeks = d3.time.sunday.range; 
```

记住这个提示：请注意，如文档中所述，

```
var xAxis = d3.svg.axis()
   .scale(x)
   .ticks(d3.time.weeks, 1); 
```

在每个星期天给出一个带有刻度的轴 - 等等

```
var xAxis = d3.svg.axis()
   .scale(x)
   .ticks(d3.time.xxxday.range, 1); 
```

给出一个在每个 上打勾的轴`xxxday`，其中`xxxday`是`monday`, `tuesday`, `wednesday`, `thursday`, `friday`, `saturday`, 或`sunday`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-11T22:59:08.060

您在这里有几个选择。

在轴上调用“ticks”会将参数传递给底层比例以获得要绘制的轴的列表刻度。当您传入单个数值时，比例尺将尝试产生“不错”的值。数值是您理想情况下可能喜欢多少滴答声的提示 - 它不能保证您实际收到的数字。

```
.ticks(5) 
```

结果： 03/03-Sun 03/10-Sun 03/17-Sun 03/24-Sun 03/31-Sun

因为您使用的是时间刻度，您还可以选择指定刻度之间的时间量，例如：

```
.ticks(d3.time.days,7) 
```

结果： 03/01-Fri 03/08-Fri 03/15-Fri 03/22-Fri 03/29-Fri 04/01-Mon

这将使您每 7 天打勾。但我认为它仍然会尝试包含“不错”的时间界限，比如月份开始。

对于微调（但有些静态）的情况，您实际上可以使用轴上的 tickValues 方法准确指定您希望刻度在何处。我用它来准确设置所有数据点的日期：

```
xAxis2.tickValues(data.map(function(d) { return d.date;})) 
```

最后，您实际上可以将参数传递给 ticks 函数，以便每次都能准确获取所需的刻度。该函数将获取开始和结束，以便将刻度设置为那些加上我所做的中点：

```
xAxis3.ticks(function(start, end) {
    console.log(arguments);
    var mid = new Date((start.getTime() + end.getTime()) / 2); 
```

尽管在这种情况下，您可能应该在刻度上设置函数，这样您就可以通过轴调用来使用 step 参数（请参阅 d3 文档中的更多信息）。

[你可以在这里](http://jsfiddle.net/superboggly/F58bs/2/)玩小提琴。

另请查看[刻度刻度](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-ticks)和[轴](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)刻度值的文档。[这里](http://alignedleft.com/tutorials/d3/)还有一个很棒的轴教程。

# ms-access - 循环遍历表单上所有未绑定的控件并清除数据

> ID：15348730
> 
> 赞同：3
> 
> 时间：2013-03-11T21:12:00.337
> 
> 标签：ms-access, vba, ms-access-2010

我想遍历表单上的所有 UNBOUND 控件并清除它们的数据或重置它们的值。我有文本框、组合框和复选框。每次我尝试这样的事情：

```
Dim ctl As Control
    For Each ctl In Me.Controls
        If IsNull(ctl.ControlSource) Then
            ctl.Value = Nothing
        End If
    Next ctl 
```

我收到运行时错误消息：

> 438 此对象不支持此属性或方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T22:13:38.113

该代码循环遍历表单集合中的*每个*控件。`Controls`该集合包括控件，例如标签和命令按钮，它们既未绑定也未绑定......因此尝试引用它们`.ControlSource`会产生该错误。

对于诸如未绑定文本框之类的控件，它的`.ControlSource`属性是一个空字符串，而不是 Null。

因此，当您遍历控件时，请`.ControlSource`仅检查您希望定位的控件类型。在下面的示例中，我选择了文本框和组合框。当`.ControlSource`是零长度字符串时，将控件设置`.Value`为 Null。

```
For Each ctl In Me.Controls
    Select Case ctl.ControlType
    Case acTextBox, acComboBox ' adjust to taste
        'Debug.Print ctl.Name, Len(ctl.ControlSource)
        If Len(ctl.ControlSource) = 0 Then
            ctl.value = Null
        End If
    Case Else
        ' pass
    End Select
Next 
```

# python - 在 Python 字典中查找所有键 >= 整数

> ID：15348739
> 
> 赞同：0
> 
> 时间：2013-03-11T21:12:21.850
> 
> 标签：python, for-loop, dictionary, key

假设我有以下纪元时间键字典：

```
dict = {
  "1363017884": "some val",
  "1363033813": "another val",
} 
```

我想找到所有大于 1363033000 的键（在这种情况下只有 1363033813 会匹配）。我有一个检查每个键的 for 循环，但这似乎效率很低：

```
for epoch,value in dict.iteritems():
  if int(epoch) >= 1363033000:
    do something interesting 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T21:13:07.927

遍历字典是您唯一真正的选择，没有更有效的方法。

或者你可以使用不同的数据结构；例如，在 btree 结构中存储连接到值的整数将使搜索大于或小于给定搜索值的键更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:36:21.297

[您可以从此处](https://stackoverflow.com/questions/2060972/subclassing-python-dictionary-to-override-setitem)稍微修改代码以添加`large_keys`属性。现在，每当添加其中一个大纪元时，字典都会跟踪它们。当你想迭代它们时，你可以简单地迭代那个属性。

```
class MyUpdateDict(dict):
    def __init__(self, *args, **kwargs):
        self.large_keys = []
        self.update(*args, **kwargs)

    def __setitem__(self, key, value):
        # optional processing here
        if int(key)>1363033000:
            self.large_keys.append((key,value))
        super(MyUpdateDict, self).__setitem__(key, value)

    def update(self, *args, **kwargs):
        if args:
            if len(args) > 1:
                raise TypeError("update expected at most 1 arguments, got %d" % len(args))
            other = dict(args[0])
            for key in other:
                self[key] = other[key]
        for key in kwargs:
            self[key] = kwargs[key]

    def setdefault(self, key, value=None):
        if key not in self:
            self[key] = value
        return self[key] 
```

这可能过于简单，因为大值是硬编码的，但您可以修改以使其更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T12:26:11.190

如果您将**数字和字符串作为**字典中的键，请先执行此操作

```
myStringsList = [s for s in dictFromFile.keys() if s.isdigit()] 
```

这将为您提供一个包含数字作为字符串的列表。

然后将**字符串列表转换为 int 列表**并**仅获取 > 而不是 X**元素：

```
myFinalList = [s for s in map(int, mynewlist) if s > X] 
```

希望能帮助到你！

# php - blueimp 文件上传器的唯一 ID

> ID：15348742
> 
> 赞同：0
> 
> 时间：2013-03-11T21:12:28.150
> 
> 标签：php, mysql, ajax, blueimp

我使用blueimp上传器进行文件上传，我试图为一组图像获取一个唯一的ID，但我最终为每个文件上传获得了一个唯一的ID

我试图通过 handle_file_upload 函数添加它，但每次它调用它，因此每次都获得一个新的 id

任何帮助都会被感激的家伙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:03:14.523

只计算自己的var。不要使用函数中的索引。

```
var i=0; // global!
....
$.each(data.files, function (index, file) {
    $i++;
    $('<p>Here is your ID:' + i+'</p>').appendTo('#container'); // e.g.
    ...
} 
```

# javascript - java脚本根据窗口大小展开div和bg图像

> ID：15348743
> 
> 赞同：0
> 
> 时间：2013-03-11T21:12:28.450
> 
> 标签：javascript, css, html

对不起，第一个问题。我是通过反复试验来学习这一切的。无论如何，我无法弄清楚如何复制这个 1 脚本。

我想要做的是使用 javascript 或 somthing 根据窗口的大小在该 div 内扩展 div 和 bg 图像。有关我正在尝试做的示例，请查看[42floors](http://42floors.com)。

我的项目已格式化

```
/* header */

/* I want to expand dynamically */
<div>

/*Content area with title showing at bottom like example site, even when window is expanded. */
<div>

/* footer */ 
```

任何见解或方向都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:14:49.757

看看他们的源代码。他们正在使用以下内容：

```
#container {
  width: 100%;
  background: url(your-image.png);
  background-size: 100%;
} 
```

请记住，`background-size`IE6-8 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:10:53.480

a fairly simple programmatic approach would be to add an event listener to the window resize event and calculate the height/width and appropriate resize the image/div.

```
$(document).ready(function(){
    $(window).resize(function(){
        //change the size of your div using something like
        $(div).css("width", value);
        $(div).css("height", value);
    });
}); 
```

this uses Jquery by the way. [http://code.jquery.com/jquery-1.9.1.min.js](http://code.jquery.com/jquery-1.9.1.min.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:28:17.470

[http://johnpatrickgiven.com/jquery/background-resize/](http://johnpatrickgiven.com/jquery/background-resize/)以获得全面支持，如上所示，如果您不提供有关 IE < 9的** * 信息，则可以选择 background-size*

# sql - 播放框架 ebean RawSql 分页

> ID：15348744
> 
> 赞同：2
> 
> 时间：2013-03-11T21:12:29.317
> 
> 标签：sql, playframework, pagination, ebean, rawsql

是否可以将分页与自定义 SQL ebean 查询一起使用？例如，当我设置此查询时：

```
String sql =
          "SELECT   q.event_id              AS event_id,"
        + "         MIN(q.total_price)      AS price_min, "
        + "         MAX(q.total_price)      AS price_max "
        + "FROM     quote q "
        + "WHERE    q.quote_status_id = 2 "
        + "    AND  q.event_id IS NOT NULL "
        + "GROUP    BY q.event_id";

RawSql rawSql = RawSqlBuilder.unparsed(sql)
        .columnMapping("event_id", "event.id")
        .columnMapping("price_min", "priceMin")
        .columnMapping("price_max", "priceMax")
        .create();

com.avaje.ebean.Query<salesPipelineRow> ebeanQuery = Ebean.find(salesPipelineRow.class);

ebeanQuery.setRawSql(rawSql); 
```

...然后我可以打电话...

```
List<salesPipelineRow> list = ebeanQuery.findList(); 
```

...没有任何问题（即我得到一个有效的 salesPipelineRow 对象列表）。但是，当我改为尝试类似...

```
Page<salesPipelineRow> page = ebeanQuery.findPagingList(5).getPage(0); 
```

...我收到一个空错误，例如：

```
java.util.concurrent.ExecutionException: javax.persistence.PersistenceException: 
Query threw SQLException:You have an error in your SQL syntax; check the manual that corresponds to your MySQL     
server version for the right syntax to use near 'null t0
limit 6' at line 2
Bind values:[]

Query was:
select t0.price_min c0, t0.price_max c1, t0.event_id c2
from null t0
limit 6 
```

谁能解释为什么 FROM、WHERE 和 GROUP BY 子句被“null”取代？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T10:22:44.027

我想这必须通过 EBean 邮件列表运行（如果它仍然处于活动状态。我认为 EBean 已经死了）。对我来说似乎是一个错误。*应该*呈现的 SQL将是：

```
select t0.price_min c0, t0.price_max c1, t0.event_id c2
from (
    SELECT [... your raw SQL statement here ...]
) t0
limit 6 
```

# xlsm - Excel剪切和粘贴特定字符

> ID：15348746
> 
> 赞同：0
> 
> 时间：2013-03-11T21:12:41.923
> 
> 标签：xlsm

我希望创建一个宏，该宏将从列中的每个单元格中剪切字符 49 到 56，并将列中的这些字符直接粘贴到右侧。有 4000 行数据需要处理。

数据示例：

```
Stop: Coggins Drive and Jones Rd NW 04 Feb 2013 07:40:00:000
Stop: Coggins Drive and Jones Rd NW 04 Feb 2013 08:20:00:000
Stop: Coggins Drive and Jones Rd NW 04 Feb 2013 08:40:00:000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:05:03.447

我认为函数会更简单。

假设示例数据在 A 列中，从 A3 行开始。在单元格 B3 中，输入下面的公式并向下填充到数据的末尾。

```
=MID(A3,49,7) 
```

函数提取子字符串后，选择 B 列中的单元格范围，然后复制然后粘贴特殊的值。这将函数替换为实际值。

如果您需要将此作为宏，则使用宏记录器记录上述操作。:-)

注意：您可能想要标记问题“Excel”和“宏”。

# haskell - Parsec 挂在文件输入上

> ID：15348750
> 
> 赞同：0
> 
> 时间：2013-03-11T21:12:50.023
> 
> 标签：haskell, parsec

我正在尝试为配置文件编写解析器，但遇到了一个奇怪的错误，解析器只是冻结了。代码可以在[这里](https://github.com/jason-johnson/hyper-cms/blob/troubleshooting/src/Hyper/Config/File/Parser.hs)看到。我已经在调试器中运行它，它似乎发生在行中

```
p_server_entry = many settings *> pure () 
```

在“纯（）”的评价。也就是说，如果可以信任调试器的行为，则尝试从 p_server_entry 返回似乎会失败。我尝试删除“纯（）”语句并简单地返回“[（）]”（并显然调整类型签名）但它似乎挂在同一个地方。我知道 Parsec 不支持左递归，但我看不到这里发生了什么？

我正在做的是，我正在使用 Parsec 通过用户状态为我填写一条记录。对于返回值，我只是从所有函数中返回 ()，因为配置记录将从状态中检索并作为解析结果返回。导致挂起的示例文件是：

```
[server]
port = 80 
```

我通过在 ghci 中运行 Parser.hs 文件来测试这一点（尽管编译程序并运行它会得到相同的结果）然后执行

```
:m + Data.Monoid
parseConfigFile "test.config" mempty 
```

我感谢任何人可以提供的任何帮助。

编辑：我应该提到这几乎和以前一样工作。我将它从返回一个特殊的解析树更改为直接更新配置结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:41:48.347

疯狂的猜测：如果你尝试`ch = satisfy (notelem)`用其他东西改变它会发生什么（即`oneOf“某物”）。我想知道 notelem 是否可以匹配一个空字符串或有一些奇怪的行为。

更一般地说，我知道这很麻烦，但请尝试隔离您的问题（即重新创建解析器失败的最小状态）。就目前而言（200 行代码），评估和解决它有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:18:33.583

我明白了。我将删除代码链接，因为该分支不应该发布，但它的要点是：我有一个类似的记录

```
data Config = { port :: Int, {- ... -} }  -- "Save edits" doesn't seem to always save edits! 
```

我创建了一个解析器来解析输入并更新其中一个结构。它丢弃了实际的解析数据，因为无论如何我想要的只是更新的记录。问题是，这丢弃了*类型*信息，也阻碍了编译器指出我的逻辑错误。对于每个实际产生数据的语句，都会有一个

```
*> pure () 
```

在语句结束时，丢弃已解析的数据。我决定我可能不应该丢弃数据，即使我现在不需要它，所以我创建了新类型来对解析的内容进行编码，并最终返回解析树以及更新的配置结构。

完成此操作后，问题立即变得明显。我有这样的声明

```
p_server_settings = case someVar of
    "server" -> many p_serverSettings
    _        -> many p_siteSettings 
```

并且这两个组合器都被定义为

```
p_serverSettings = many settings *> pure ()
    where settings = {- bunch of possible settings -} 
```

一旦我删除 () 返回并使用生成的内容，我立即看到 p_server_settings 试图返回 [[Setting]] 而不是 [Setting]，这是因为我有

```
many many settings 
```

这是一个方便的小循环，不消耗任何输入。

经验教训：如果你扔掉你的类型，你就会束缚编译器的手。

# mysql - 添加外键约束

> ID：15348754
> 
> 赞同：0
> 
> 时间：2013-03-11T21:13:02.753
> 
> 标签：mysql

我正在尝试创建一个表，但我遇到了问题，`foreign key` 这是我尝试过的脚本：

```
CREATE TABLE IF NOT EXISTS note_etudiant(
    num_insc int auto_increment,
    cin int foreign key references T_utilisateur(cin),
    nom varchar(25),
    note float
)Engine=InnoDB DEFAULT CHARSET=latin1; 
```

这是我得到的错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“外键引用 T_utilisateur(cin), nom varchar(25), no”附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:16:57.057

You need to list your foreign key constraint after your column creation

```
cin int,
constraint foreign key (cin) references T_utilisateur(cin), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:18:03.260

您需要与列分开创建外键。我还建议单独创建索引，以便您可以控制索引的名称。

尝试这样的事情：

```
CREATE TABLE IF NOT EXISTS note_etudiant(
    num_insc int auto_increment,
    cin int,
    nom varchar(25),
    note float,
    primary key (num_insc),
    key cin (cin),
    constraint fk_note_etudiant_to_t_utilisateur foreign key (cin) references T_utilisateur(cin)
)Engine=InnoDB DEFAULT CHARSET=latin1; 
```

# ios - AFNetworking UIImage NSURL

> ID：15348757
> 
> 赞同：0
> 
> 时间：2013-03-11T21:13:06.743
> 
> 标签：ios, uiimageview, afnetworking, nsurl

我使用 AFNetworking 从我的 rails api 获取啤酒详细信息，并且我想显示来自返回的 url 的图像。

示例 API 响应

```
 description = "Super tasty";
    id = 3;
    "label_url" = "/system/beers/labels/000/000/003/medium/Pliny.png?1363034728";
    "location_id" = 2;
    name = "Pliny The Elder";
    price = "3.5";
    style = IPA; 
```

label_url 是图像的 url，我试图在 BeerDetailViewController 中显示。这是我迄今为止尝试过的，它没有错误但没有图像显示。

```
BeerDetailViewController.m

#import "UIImageView+AFNetworking.h"
#import "AFImageRequestOperation.h"

- (void)viewDidLoad
{
    [super viewDidLoad];

    beerLabel.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:
                                              [NSURL URLWithString: beer_label]]]; 
```

任何想法为什么它不起作用？我可以在这个视图中显示 url，`beerLabel.text = beer_label`这样我就知道它正在通过并阅读以供使用，只是不确定为什么它不显示图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:15:29.257

```
/system/beers/labels/000/000/003/medium/Pliny.png?1363034728 
```

不是有效的 URL。**说真的，穷人怎么会`NSURL`知道`NSData`你在找什么主人？**您需要使用主机和此*路径*构造一个正确的 URL 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:25:12.123

您所拥有的只是 URL 的路径部分。您想根据正确的基本 URL 解决此问题。因此，假设您的服务器是`example.com`. 要解决它：

```
NSURL *base = [NSURL URLWithString:@"http://example.com"];
NSURL *resolved = [NSURL URLWithString:beer_label relativeToURL:base]; 
```

# bash - 在 osascript 输出中搜索关键字

> ID：15348759
> 
> 赞同：0
> 
> 时间：2013-03-11T21:13:08.837
> 
> 标签：bash

我正在尝试编写一个小脚本来打印终端所说的脚本正在运行。

```
osascript -e 'POSIX path of (path to frontmost application)' 
```

到目前为止，这将打印类似

```
/Applications/Utilities/Terminal.app/ 
```

我想做一些事情，比如在字符串中搜索关键字列表，例如“Terminal.app”“iTerm.app”等。或执行诸如排除“/”、“应用程序”和“实用程序”之类的操作以将其过滤掉。

我发现的所有搜索字符串的方法似乎都需要它在一个变量中，我不知道如何将它传递给一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:16:42.223

试试这个：

```
osascript -e 'POSIX path of (path to frontmost application)' | cut -d"/" -f4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:30:36.063

由于您正在处理文件路径，因此不妨使用文件实用程序 - [basename](http://linux.die.net/man/1/basename)：

```
osascript -e 'POSIX path of (path to frontmost application)' | xargs basename 
```

# iphone - 是否有任何 API 可以获取某些 Apple ID 的已购买/已购买应用程序列表？

> ID：15348761
> 
> 赞同：1
> 
> 时间：2013-03-11T21:13:19.337
> 
> 标签：iphone, ios, objective-c

我想从 Apple 那里找到一个 API，以获取某些 App ID（或设备上已经登录的 Apple ID）的已购买/已购买应用程序列表。我更喜欢检索曲目 ID 的列表（不是应用程序的名称），以便我可以使用搜索：`https://itunes.apple.com/lookup?id=<Track ID>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:22:14.400

不，绝对不是。

您可以在自己的机器上执行此操作 - 如果您的设备已备份在那里。但不是在用户设备上，也不是在其他应用程序上。

有充分的理由，我想补充一下。如果您不同意，请提交增强请求

亚历克斯

# image - CATiled 层异步图像下载

> ID：15348775
> 
> 赞同：0
> 
> 时间：2013-03-11T21:14:38.850
> 
> 标签：image, asynchronous, background-process, catiledlayer

我正在自定义照片滚动条 xcode 源。对于平铺图像，我想在后台使用 nsoperation 从 Web 服务器下载图像。

该应用程序会正确下载瓷砖图像，但不会刷新。不确定，如何在下载完成后立即刷新平铺图像。任何提示将不胜感激。

* * *

```
- (UIImage *)tileForScale:(CGFloat)scale row:(int)row col:(int)col
{
    //  Step 1
    //  format the target and source folder name using store id, flyer id and page number
    //  format the tile name using folder name and the tile col and row
    //  initiate the background process to download the target file, if required
    tileName = [NSString stringWithFormat:@"%@_%d_%d_%d.png", imageName, (int)(scale * 1000), col + 1, row + 1];
    [self startBackground];

    //  Step 2
    NSString *targetFileName = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"tmp/%@",tileName]];
//    NSLog(@"Return- %@",targetFileName);

    UIImage *image = [UIImage imageWithContentsOfFile:targetFileName];
    return image;
}

- (void)startBackground
{
    NSOperationQueue *queue = [NSOperationQueue new];
    NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                        initWithTarget:self
                                        selector:@selector(downloadAsRequired:)
                                        object:tileName];
    [queue addOperation:operation];
    [operation release];
}

- (void)downloadAsRequired:(NSString*)imageTileName
{
    //  Steps
    //  format target file
    //  check if target file exists
    NSString *targetFileName = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"tmp/%@",imageTileName]];
    NSFileManager *fileManager =[NSFileManager defaultManager];
    NSData  *dataFromFile = nil;

    dataFromFile = [fileManager contentsAtPath:targetFileName];
    if (dataFromFile==nil)
    {
        //  file doesn't exist
        NSString *folderName = [NSString stringWithFormat:@"S%@F1/P%d/",[flyer.storeIdentifier stringValue],index + 1];
        NSString *sourceFileName = [NSString stringWithFormat:@"%@%@%@",kLocationTiles,folderName,imageTileName];
        NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:sourceFileName]];
//        UIImage* image = [[[UIImage alloc] initWithData:imageData] autorelease];
        NSLog(@"%@-%@",sourceFileName,targetFileName);
        BOOL fileSaved = [fileManager createFileAtPath:targetFileName contents:imageData attributes:nil];
        if(!fileSaved)
        {
            NSLog(@"failed to copy tile");
        }
        else
        {
            NSLog(@"%@ created",targetFileName);
        }
        [imageData release];
//        [self performSelectorOnMainThread:@selector(displayImage:) withObject:image waitUntilDone:NO];
    }
    else
    {
        //  file exists, so do nothing
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:40:58.757

* * *

```
- (UIImage *)tileForScale:(CGFloat)scale row:(int)row col:(int)col
{
    //  Step 1

    UIImage *imageTile=nil;
    tileName = [NSString stringWithFormat:@"%@_%d_%d_%d", imageName, (int)(scale * 1000), col + 1, row + 1];
    NSString *targetFileName = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"tmp/%@.png",tileName]];

    NSFileManager *fileManager =[NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:targetFileName])
    {
        imageTile = [UIImage imageWithContentsOfFile:targetFileName];
    }
    else
    {
        NSString *folderName = [NSString stringWithFormat:@"%@%@/%d/",[id1 stringValue],[id2 stringValue],index + 1];
        NSString *sourceFileName = [NSString stringWithFormat:@"%@%@%@.png",kLocationTiles,folderName,tileName];
        NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:sourceFileName]];

        if (imageData != nil)
        {
            imageTile = [UIImage imageWithData:imageData];
            [fileManager createFileAtPath:targetFileName contents:imageData attributes:nil];
        }
        else
        {
            imageTile = [UIImage imageWithContentsOfFile:[NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"tmp/logo.png"]]];
        }

        [imageData release];
    }

    return imageTile;
} 
```

* * *

基本上，我稍微了解一下图像源背后的逻辑。

1) 我决定了最终图像的位置，例如 /tmp/tileXX.png 2) 当我加载磁贴时，我在目标文件夹中查找磁贴 3) 如果它不存在，我下载了源图像来自服务器并使用它绘制平铺，而且还位于目标文件夹以供将来参考。所以下次画的时候已经可以用了，就不下载了。4）当用户滚动页面或放大/缩小时，它也只下载所需的图像。5）这避免了在要求出现之前下载所有平铺图像。6）所以甚至不需要后台进程。

这可能需要一些时间，最初取决于网络连接，但我们无法通过预先下载所需的图像来改变这一点。

我希望这适用于类似情况的人。

湿婆

# internet-explorer - 在 Internet Explorer 10 中重置 css 过渡

> ID：15348776
> 
> 赞同：5
> 
> 时间：2013-03-11T21:14:40.647
> 
> 标签：internet-explorer, css, css-transitions, internet-explorer-10

在尝试 CSS 转换时，我创建了一个小滚动演示，它将`right`CSS 样式从某个负数转换为 0，然后在`transitionend`事件触发时重新启动以获得无限滚动效果。这是我演示的小提琴 - [http://jsfiddle.net/XhFdv/](http://jsfiddle.net/XhFdv/)

这适用于最新的 FF、Chrome、Safari (win) 和 Opera。在 IE 10（在 Win 7 和 Win 8 上测试）事件触发，但试图将正确的属性设置回它开始的负数似乎不起作用 - 它通常在设置后保持 0（但不是总是）。

为了让事情更有趣，添加`console.log()`或`alert()`通常足以让它按预期运行。这让我觉得 UI 层有一些未完成的东西。我试图将更多的样式设置包装在一个`setTimeout(..., 0)`这样的渲染中可以赶上，但这似乎没有帮助。

这是 IE 10 中的错误，还是我在演示脚本中遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T02:01:55.803

`alert()`有效，因为它会阻止脚本执行。作为次要措施：触发重绘或重排的东西将是下一个最好的东西：

*   `visibility:hidden/visible`通过类属性更改切换
*   `visibility:hidden/visible`通过样式属性更改切换
*   通过 CSSOM 添加样式表
*   通过隐藏元素`display:none`
*   计算`offsetWidth`或`offsetHeight`
*   触发`scroll`事件
*   在相关元素的兄弟上触发`:hover`伪类

**参考**

*   [Onload 中的 Onload](http://www.stevesouders.com/blog/2014/09/12/onload-in-onload/)

*   [渲染：重绘、回流/重新布局、重新设计](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)

*   [JavaScript 性能最佳实践：最小化重排和重绘的次数](http://developer.nokia.com/community/wiki/JavaScript_Performance_Best_Practices#Minimize_the_number_of_reflows_and_repaints)

*   [重排和重绘：CSS 性能让你的 JavaScript 变慢？](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)

*   [让 Web 更快：最小化浏览器回流](https://developers.google.com/speed/articles/reflow)

*   [回流计时器书签](http://www.browserscope.org/reflow/about)

*   [回流选择器测试页](http://stevesouders.com/efws/css-selectors/universal.php)

# linux - 如何解析一行 - 引号内的内容或使用 unix 的模式

> ID：15348778
> 
> 赞同：0
> 
> 时间：2013-03-11T21:14:58.990
> 
> 标签：linux, unix, scripting, split

我正在尝试在一些格式化文本中获取内容。例子

在文件中输入：

```
i would like to say ("hi")

i am leaving, ("bye")

who is there? ("crazy cat")

I have a ("dirty dog that needs water")

// 
```

我如何只抓取（“”）中的字符串。

我试图通过空格或具有 (" 的字符串来解析它，但我无法获取带空格的字符串...

目前我正在使用

```
 cat get_list.txt | tr ' ' '\n' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:17:06.917

```
grep -o -E '\(\".*\"\)' get_list.txt 
```

Should do it if you want to include the `("` and the `")`

If you don't want those, then you need the following:

```
sed 's/^.*(\"\(.*\)\").*$/\1/' get_list.txt 
```

Explanation:

```
s/       substitute
^.*(\"   all characters from the start of the string until a (" (the " is escaped)
\(.*\)   keep the next bit in a buffer - this is the match I care about
\")      this signals that the bit I'm interested in is over
.*$      then match to the end of the line
/\1/     replace all of that with the bit I was interested in 
```

(Note - I changed the `grep` and `sed` command in response to valid comments that a pipe wasn't necessary).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:21:07.840

尝试使用[环视正则表达式技术](http://www.perlmonks.org/?node_id=518444)来执行此操作：

```
$ grep -oP '\("\K[^"]+(?="\))' file.txt
bye
crazy cat
dirty dog that needs water 
```

或者使用仍然使用[环视正则表达式技术的](http://www.perlmonks.org/?node_id=518444)[perl](/questions/tagged/perl "显示标记为“perl”的问题")便携式解决方案：

```
perl -lne 'print $& if /\("\K[^"]+(?="\))/' file.txt 
```

或者简单地说：

```
cut -d'"' -f2 file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:21:39.723

如果您只想要双引号之间的文本（没有引号本身），您可以使用*awk*：

```
awk -F\" '{print $2}' get_list.txt 
```

# vb.net - 从列文本文件 vb.net 获取信息

> ID：15348783
> 
> 赞同：0
> 
> 时间：2013-03-11T21:15:29.177
> 
> 标签：vb.net

我有这个文件： No TMNo EnNo Name GMNo Mode DateTime 1 1 1 1 1 09/12/2006 11:09:58 2 1 2 1 2 09/12/2006 11:09:59 3 1 65535 1 3 09/12 /2006 11:10:00 59949 1 20 1 20 09/13/2006 03:49:06 59950 1 24 1 21 09/13/2006 03:49:07

我需要从每一列中获取信息。No-> 最多为 5 位 EnNo-> 最多为 5 位 其余列最多为 2 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:10:56.237

This is conceptually how you might want to do that.

```
Dim inFile As StreamReader = File.OpenText("filename.txt")
Dim fields() As String
Do While (inFile.Peek <> -1)
    ' read the fields from the current line in the file
    ' split each line by a space according to your text file
    fields = inFile.ReadLine.Split(" ")
    ' do something with each element in fields
Loop 
```

# iphone - 更改 NSMutablearray 中子层的 .contents

> ID：15348785
> 
> 赞同：0
> 
> 时间：2013-03-11T21:15:34.250
> 
> 标签：iphone, objective-c, xcode

我正在创建一个 96x 64 的子层网格一次，所以我可以轻松地更新它们的 .contents ......

```
- (void)createLayer{
    CALayer *currentLayer = self.layer;

    _layerArray = [[NSMutableArray alloc] initWithCapacity:WIDTH*HEIGHT];
    int cellSize = self.bounds.size.width / WIDTH;
    double xOffset = 0;

    CGRect cellFrame = CGRectMake(0, 0, cellSize, cellSize);
    NSUInteger cellIndex = 0;
    cellFrame.origin.x = xOffset;

    for (int i = 0; i < WIDTH; i++)
    {
        cellFrame.origin.y = 0;
        for (int j = 0; j < HEIGHT; j++, cellIndex++)
        {                
            if([[self.levelState.boardChanges objectAtIndex:(i*HEIGHT)+j] intValue]==1){
                {
                    NSNumber *currentCell = [self.levelState.board objectAtIndex:cellIndex];
                    CALayer *sublayer = [CALayer layer];
                    sublayer.frame = cellFrame;
                    if (currentCell.intValue == 1)
                    {
                        sublayer.contents = (id) [UIImage imageNamed:@"image1.png"].CGImage;
                    }
                    else if (currentCell.intValue == 0)
                    {
                        sublayer.contents = (id) [UIImage imageNamed:@"image2.png"].CGImage;
                    }
                    [currentLayer addSublayer:sublayer];
                    [_layerArray addObject:sublayer];
                }
            }
            cellFrame.origin.y += cellSize;
        }
        cellFrame.origin.x += cellSize;
    }
} 
```

但是我确实失败了..我尝试的是类似的东西...

```
[[_layerArray objectAtIndex:(i*HEIGHT)+j ].contents ] = (id) [UIImage imageNamed:@"image.png"].CGImage; 
```

我如何更改他们的 .contents ？我应该改用 NSArray 吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:42:04.597

我还没有测试过这个，但它看起来好像它会工作

```
[sublayer.contents addObject:[UIImage imageNamed:@"image2.png"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:24:48.653

```
[[_layerArray objectAtIndex:(i*HEIGHT)+j ] setContents:(id) [UIImage imageNamed:@"image.png"].CGImage]; 
```

但它非常缓慢...

###最终编辑

作为上述主题发布的方法非常缓慢......我的最终方法如下：

UIViewController 有 UIView 有 CALayers 作为子层

子层是： 1\. zindex 0 处的背景 2\. frontImages，它们是较高 zindex 的混合图像......

# asp.net - SQL Server resets aspnetdb file permissions from time to time

> ID：15348800
> 
> 赞同：1
> 
> 时间：2013-03-11T21:16:11.223
> 
> 标签：asp.net, sql-server

My `aspnetdb` database's (the database that get's created when you use asp.net's membership provider) windows file permissions keeps getting reset after a while. This happened on SQL Server 2005 Express and SQL Server 2008 Express.

The database is accessed via an asp.net website. When this happens, the website says login invalid and attempting to reset the password produces an error saying unsuccessful. When I examine the the windows file permissions for the `aspnetdb.mdf`, all the user and group permissions are gone. The only way to get things working again is by restoring the `aspnetdb` file from backup.

I've tried setting autoclose and autoshrink on the database to false and passing the `-t1802` option to SQL Server and this problem still comes up from time to time. The website that accesses the database is running on IIS 7 and asp.net 3.5.

EDIT: My connections strings are:

`<add name="LocalSqlServer" connectionString="data source=.\sqlexpress;Integrated Security=SSPI;initial catalog=aspnetdb"/>`

`<add name="ConnectionString" connectionString="Data Source=(local)\sqlexpress;Initial Catalog=NetDevices;Integrated Security=True" ProviderName="System.Data.SqlClient"/>`

I am not dynamically attaching the database, I attach the aspnetdb.mdf file explicity in sql management express.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:57:32.633

在我看来，整个*附加`.mdf`数据库文件*的方法来使用 SQL Server 数据库是有严重缺陷的。

许多人都看到了许多潜在的问题——被重置的权限是一个新的、额外的问题。

在我看来，**真正的解决方案**是

1.  安装 SQL Server Express（如果你现在使用这种方法，你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`ASPNETDB`）

4.  **使用它的逻辑数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=ASPNETDB;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......

# java - Java 自签名证书和密钥库的使用

> ID：15348801
> 
> 赞同：1
> 
> 时间：2013-03-11T21:16:12.653
> 
> 标签：java, x509certificate, keystore, pki

我需要沿着公共证书创建公钥和私钥。我可以使用以下代码生成自签名证书...

```
 KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA");  
    keyPairGenerator.initialize(1024);  
    KeyPair KPair = keyPairGenerator.generateKeyPair(); 
   PrivateKey privkey = KPair.getPrivate();

  X509CertInfo info = new X509CertInfo();
  Date from = new Date();
  Date to = new Date(from.getTime() + days * 86400000l);
  CertificateValidity interval = new CertificateValidity(from, to);
  BigInteger sn = new BigInteger(64, new SecureRandom());
  X500Name owner = new X500Name(dn);

  info.set(X509CertInfo.VALIDITY, interval);
  info.set(X509CertInfo.SERIAL_NUMBER, new CertificateSerialNumber(sn));
  info.set(X509CertInfo.SUBJECT, new CertificateSubjectName(owner));
  info.set(X509CertInfo.ISSUER, new CertificateIssuerName(owner));
  info.set(X509CertInfo.KEY, new CertificateX509Key(pair.getPublic()));
  info.set(X509CertInfo.VERSION, new CertificateVersion(CertificateVersion.V3));
  AlgorithmId algo = new AlgorithmId(AlgorithmId.md5WithRSAEncryption_oid);
  info.set(X509CertInfo.ALGORITHM_ID, new CertificateAlgorithmId(algo));

  // Sign the cert to identify the algorithm that's used.
  X509CertImpl cert = new X509CertImpl(info);
  cert.sign(privkey, algorithm);

  // Update the algorith, and resign.
  algo = (AlgorithmId)cert.get(X509CertImpl.SIG_ALG);
  info.set(CertificateAlgorithmId.NAME + "." + CertificateAlgorithmId.ALGORITHM, algo);
  cert = new X509CertImpl(info);
  cert.sign(privkey, algorithm); 
```

现在我需要使用密钥库或任何其他方式保存私钥和公钥，以便我可以检索那些用于签署任何文件或对象的密钥。我尝试使用简单的文件流，但它给了我错误，似乎它不是正确的方法。请指导我下一步该怎么做。我想使用证书和私钥来签署一些数据，我想保存它们以便我可以随时使用验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:13:01.103

我找到了答案

```
 private  void savePublicKeyToFile(String fileName,
                                BigInteger mod, BigInteger exp) throws IOException {
     ObjectOutputStream oout = new ObjectOutputStream(
             new BufferedOutputStream(new FileOutputStream(fileName)));
     try {
         oout.writeObject(mod);
         oout.writeObject(exp);
     } catch (Exception e) {
        // throw new SomeException(e);
     } finally {
         oout.close();
     }
 }

  private  void savePrivteKeyToFile(String fileName,
                                BigInteger mod, BigInteger PublicExponent, BigInteger PrivateExponent,
            BigInteger PrimeP, BigInteger PrimeQ,BigInteger PrimeExponentP,BigInteger PrimeExponentQ,
            BigInteger CrtCoefficient) throws IOException {
     ObjectOutputStream oout = new ObjectOutputStream(
             new BufferedOutputStream(new FileOutputStream(fileName)));
     try {
         oout.writeObject(mod);
         oout.writeObject(PublicExponent);
         oout.writeObject(PrivateExponent);
         oout.writeObject(PrimeP);
         oout.writeObject(PrimeQ);
         oout.writeObject(PrimeExponentP);
         oout.writeObject(PrimeExponentQ);
         oout.writeObject(CrtCoefficient);
     } catch (Exception e) {
        // throw new SomeException(e);
     } finally {
         oout.close();
     }
 }

     // To save in keystore here is the way

     Certificate [] certChain = new Certificate[1];
    certChain[0] = ca;
    String strAlias = "abcalias", strPassword="mypass";
    KeyStore keyStore = KeyStore.getInstance("jks");
    keyStore.load(null,strPassword.toCharArray());
    keyStore.setEntry(strAlias,
       new KeyStore.PrivateKeyEntry((PrivateKey) KPair.getPrivate(), certChain),
       new KeyStore.PasswordProtection(strPassword.toCharArray()));

    FileOutputStream fkey = new FileOutputStream(strFilePath+".keystore"); 
    keyStore.store(fkey, strPassword.toCharArray());
    fkey.close(); 
```

# python - 防止 matplotlib 将我的轴重新设置为零

> ID：15348802
> 
> 赞同：4
> 
> 时间：2013-03-11T21:16:13.967
> 
> 标签：python, matplotlib, pandas

我有一个熊猫时间序列：

```
timeSeries
2010-01-16 02:00:00    512450
2010-01-16 02:00:01    512450
2010-01-16 02:00:02    512450
2010-01-16 02:00:03    512450
... 
```

我想绘制它，所以我这样做：

```
timeSeries.plot() 
```

但是当我这样做时，我得到一个 y 轴从 0 开始的图。在图表的顶部，matplotlib 有用地告诉我，0 表示“+5.1245e5”。这种减法使得阅读情节变得困难。

编辑：设置`ylim`没有帮助，因为限制实际上设置正确。与`yticks`.

我怎样才能阻止它这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:12:36.227

你只需要设置`useOffset=False`. 一种设置方法是：

```
ax = timeSeries.plot()
ax.ticklabel_format(useOffset=False) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T03:34:31.183

原来顺序很重要。`useOffset=False`需要在`plot`调用命令之前设置。例如

```
fig = plt.figure()
ax = fig.add_subplot(111)
ax.ticklabel_format(useOffset=False) 
```

# python - 在 Linux 中创建的 Python 应用程序的 Windows 安装程序

> ID：15348812
> 
> 赞同：5
> 
> 时间：2013-03-11T21:16:34.323
> 
> 标签：python, linux, windows, installation

假设我在某个 Linux 发行版上有一个用 Python 编写的工作应用程序，我想知道是否可以使用 pyinstaller 或其他类似程序在 Linux 中为 Windows 生成可执行文件，以及如何为此创建某种 Windows 安装程序将程序和一些数据放在相关目录中的程序。欢迎任何建议！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T06:05:37.203

我已经成功地使用在 Wine 下运行的[PyInstaller](http://www.pyinstaller.org/)来生成在 Windows 上运行的可执行文件。在 Linux 上设置您的 Wine 环境，将 PyInstaller 的副本放在适当的位置。例如`drive_c\pyinstaller-2.0`。

还要在你的 Wine 环境中安装 Python for Windows。您必须使用`msiexec`选项运行 Python 安装程序。

```
wine msiexec /i python-2.6.6.msi 
```

您可能还需要安装其他依赖项，例如`pywin32`.

然后，只需在您的规范文件上运行 PyInstaller：

```
wine c:/Python26/Python.exe c:/pyinstaller-2.0/pyinstaller.py <spec_file> 
```

这负责创建将在 Windows 下运行的可执行文件。将此 exe 打包为安装程序的一部分是一项附加任务，您可以按照其他答案中的建议使用 NSIS。我不确定 NSIS 是否会在 Linux 上的 Wine 下成功运行，所以这只回答了你问题的一半。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:05:16.577

如果您需要制作安装程序，请尝试以下操作：

*   Inno 设置：[http](http://www.jrsoftware.org/isinfo.php) ://www.jrsoftware.org/isinfo.php ,

*   NSIS： http: [//nsis.sourceforge.net/Main_Page](http://nsis.sourceforge.net/Main_Page)

按照建议，您可以使用 wine [http://www.winehq.org/](http://www.winehq.org/)在 Linux 上运行。

# java - taking a part of a string in java

> ID：15348821
> 
> 赞同：-6
> 
> 时间：2013-03-11T21:17:07.290
> 
> 标签：java

I'm new to java and I have a question concerning strings

If I have :

```
String example="PostID:123"; 
```

How can I get the number 123 and store it in another string ? thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:19:56.590

一种快速的方法是使用[拆分](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)方法：

```
String source = "PostID:123";
String[] tokens = source.split(":");
String numberString = tokens[1]; 
```

如果您确切地知道源格式或者您知道这种格式永远不会改变，这将是有效的。

另一种方法是使用**char-array**和**StringBuilder**（如果您不确切知道 String 的格式并且不喜欢正则表达式 :)

```
StringBuilder b = new StringBuilder(); // or StringBuffer
for (char c: source.toCharArray()) {
   if (Character.isDigit(c)) {
      b.append(c);
   }
}
String numString = b.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:19:14.763

一种解决方案是[拆分](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)根据`String`并`:`返回第二部分：

```
String newString = example.split(":")[1]; 
```

如果你`String`可以是这样的：`PostID:123456 xy bla bla bla`你可以这样做：

```
String newString = example.split(":")[1].split(" ")[0]; //Will contain 123456 
```

`example.split(":")[1]`将包含`123456 xy bla bla bla`，然后我们根据空格进行拆分，并返回第一个元素，该元素将包含`123456`.

请注意，此解决方案假定 的结构与`String`您所说的完全相同。您可以为更通用的字符串实现更好的解决方案，例如：

```
String example="PostID   :   12312 xy abc asd ";
Pattern p = Pattern.compile(":\\s*(.*?)\\s+");
Matcher m = p.matcher(example);
if (m.find()) {
    System.out.println(m.group(1)); //Will print 12312
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:23:44.373

```
String example="PostID:123";

String numString = example.subString(example.lastIndexOf(":")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:19:48.857

使用API`substring`中可用的方法。`String`

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T21:20:28.897

使用 String 的 split 方法。

**编辑：**根据另一个答案的评论......提问者也有空格，所以我正在更新正则表达式以拆分`:`或`space`.

```
public class Test {

  public static void main(String[] args) {
    String example="PostID:123 xy zy";
    String[] vals = example.split(":|\\s");
    for (int i = 0; i < vals.length; i++){
      System.out.println(vals[i]);
    }
  }

} 
```

给

```
PostID
123
xy
zy 
```

# c# - Regular Expression to split a string with parentheses

> ID：15348828
> 
> 赞同：1
> 
> 时间：2013-03-11T21:17:34.083
> 
> 标签：c#, regex

Need help with RegEx. Using C#.

Group of Words in parentheses (round or box or curly) should be considered as one word. The part, which is outside parentheses, should split based on white space ' '.

A) Test Case –

Input - `Andrew. (The Great Musician) John Smith-Lt.Gen3rd`

Result (Array of string) –<br> 1\. Andrew.
2\. The Great Musician
3\. John
4\. Smith-Lt.Gen3rd

B) Test Case –

Input - `Andrew. John`

Result (Array of string) –<br> 1\. Andrew.
2\. John

C) Test Case –

Input - `Andrew {The Great} Pirate`

Result (Array of string) –<br> 1\. Andrew
2\. The Great
3\. Pirate

The input is name of a person or any other entity. Current system is very old written in Access. They did it by scanning character by character. I am replacing it with C#.

I thought of doing it in two steps – first parentheses based split and then word split.

I wanted to throw these cases out as bad input -

1.  Only Starting or ending parentheses available

2.  nested parentheses

Overall, I wanted to split only well-formed (if start parentheses is there, there must be an ending) Inputs only.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T22:14:06.150

这是一个正则表达式，它将从您的示例中给出正确的结果：

```
\s(?=.*?(?:\(|\{|\[).*?(?:\]|\}|\)).*?)|(?<=(?:\(|\[|\{).*?(?:\}|\]|\)).*?)\s 
```

此正则表达式分为两部分，由`|`(OR) 语句分隔：

1.  `\s(?=.*?(?:\(|\{|\[).*?(?:\]|\}|\)).*?)` - 在`()`, `[]`, 或`{}`
2.  `(?<=(?:\(|\[|\{).*?(?:\}|\]|\)).*?)\s`- 在`()`, `[]`, 或`{}`

以下是每个部分的细分：

第 1 部分（`\s(?=.*?(?:\(|\{|\[).*?(?:\]|\}|\)).*?)`）：

```
1\. \s             - matches white space
2\. (?=            - Begins a lookahead assertion (What is included must exist after the \s
3\. .*?            - Looks for any character any number of times. The `?` makes in ungreedy, so it will grab the least number it needs
4\. (?:\(|\{|\[)   - A non passive group looking for `(`, `{`, or `[`
5\. .*?            - Same as #3
6\. (?:\]|\}|\))   - The reverse of #4
7\. .*?            - Same as #3
8\. )              - Closes the lookahead.  #3 through #7 are in the lookahead. 
```

第 2 部分是相同的，但不是前瞻 ( `(?=)`)，而是后视 ( `(?<=)`)

在作者编辑问题后：

对于将搜索仅包含完整括号的行的正则表达式，您可以使用以下命令：

`.*\(.*(?=.*?\).*?)|(?<=.*?\(.*?).*\).*`

您可以使用它来替换`(`and`)`和`{`and `}`or `[`，`]`因此您有完整的大括号和方括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:37:30.853

这个怎么样：

```
Regex regexObj = new Regex(
    @"(?<=\()       # Assert that the previous character is a (
    [^(){}[\]]+     # Match one or more non-paren/brace/bracket characters
    (?=\))          # Assert that the next character is a )
    |               # or
    (?<=\{)[^(){}[\]]+(?=\}) # Match {...}
    |               # or 
    (?<=\[)[^(){}[\]]+(?=\]) # Match [...]
    |               # or
    [^(){}[\]\s]+   # Match anything except whitespace or parens/braces/brackets", 
    RegexOptions.IgnorePatternWhitespace); 
```

这假定没有嵌套的括号/大括号/方括号。

# python - 在 django 中创建字段列表

> ID：15348829
> 
> 赞同：1
> 
> 时间：2013-03-11T21:17:38.037
> 
> 标签：python, django

我需要创建一个包含列表的模型。这就是我到现在为止的距离

```
 class Language(models.Model):
      name = models.TextField()
      def __str__(self):
         return self.name
      def __unicode(self):
         return self.name

    class Education(models.Model):
      mother_language = models.TextField()
      foreign_languages = models.ForeignKey(Language)
      def __str__(self):
         return self.mother_language # + ' ' + list_of_self.foreign_languages
      def __unicode__(self):
         return self.mother_language # + ' ' + list_of_self.foreign_languages 
```

我想要的是写类似 foreign_languages=['English', 'German'] 的东西，我希望能够像上面那样打印它。

有人能帮忙吗？

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:22:48.273

您应该将字段类型从更改`ForeignKey`为`ManyToMany`，然后尝试类似：

```
', '.join(unicode(x) for x in self.foreign_languages.all()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:33:35.720

为此，恐怕您需要覆盖**setaddr**

**setattr** ">http://docs.python.org/2/reference/datamodel.html#object.setattr

 **您需要检查正在设置的属性，除了“语言”之外，在所有情况下基本上什么都不做，您必须遍历列表，在模型中添加缺少的语言，然后将它们添加到类中。**

# jquery - jQuery html() not working - firefox unterminated string literal

> ID：15348832
> 
> 赞同：0
> 
> 时间：2013-03-11T21:18:00.703
> 
> 标签：jquery, html, ajax, char

I'm trying to add to a `<p>` element the following string:

(with no charset defined)

```
Ð¦ÐµÐ½Ð°: 4,80 BGN ÐŸÐ¾Ð´Ð´Ñ€ÑŠÐ¶ÐºÐ°: 
```

(directly from .XML file)

```
&#1062;&#1077;&#1085;&#1072;: 4,80 BGN 
```

but it doesn't work, firebug keeps saying:

```
$('#sms_hint p').html('aЦена: 4,80 BGN unterminated string literal 
```

and this is how I'm trying to add the html to element:

```
<?php $promo = "&#1062;&#1077;&#1085;&#1072;: 4,80 BGN";?>    
<script>$('#sms_hint p').html('<?php echo $promo;?>a')</script> 
```

This is an ajax request, an external .php file which contains all code from above, and if an input is changed this should update the index.php file.

Am I need to convert or encrypt to pass data?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:21:53.990

你不应该把你的 php 和你的 javascript 混在一起。

试试这样：

```
<script>
var promo = "&#1062;&#1077;&#1085;&#1072;: 4,80 BGN";
$('#sms_hint p').html(promo);
</script> 
```

# mysql - 带有外部约束的sql查询

> ID：15348836
> 
> 赞同：0
> 
> 时间：2013-03-11T21:18:05.947
> 
> 标签：mysql, foreign-keys

遵循教科书“SQL in a Nutshell”它要求查询

> 对于拥有电子邮件地址的员工，请显示他们的年龄和性别。

在以下数据库上：

```
CREATE TABLE EMPLOYEES(
   PID SMALLINT NOT NULL,
   PRIMARY KEY(PID),
   CONSTRAINT EMPLOYEES_FK FOREIGN KEY (PID) REFERENCES PERSONS (PID)
);

CREATE TABLE PERSONS(
 PID SMALLINT NOT NULL,
 NAME VARCHAR(20) NOT NULL,
 GENDER CHAR(1) NOT NULL CHECK (GENDER IN ('M','F')),
 AGE SMALLINT NOT NULL CHECK (AGE BETWEEN 0 AND 120),
 BIRTHDATE DATE NOT NULL,
 PRIMARY KEY(PID)
);

CREATE TABLE HASE(
 PID SMALLINT NOT NULL,
 EADDR VARCHAR(30) NOT NULL,
 PRIMARY KEY(PID,EADDR),
 CONSTRAINT HASE_FK FOREIGN KEY (PID) REFERENCES PERSONS (PID)
); 
```

我对 SQL 查询很陌生，所以我的尝试是：

```
SELECT GENDER, AGE
FROM PERSONS AND EMPLOYEES
WHERE EXISTS HASE.EADDR
; 
```

但我不认为我与外键的关系正确。我意识到这是非常基本的，但我认为一旦我看到查询的方式，它将帮助我处理其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:22:21.577

您可以使用 EXISTS 来获取结果

```
SELECT Gender, Age
FROM Persons
  JOIN Employees ON Persons.PID = Employees.PID
WHERE Exists (SELECT PID
              FROM Hase
              WHERE Persons.PID = Hase.PID) 
```

也可以使用 IN，但 EXISTS 查询会更快

```
SELECT Gender, Age
FROM Persons
  JOIN Employees ON Persons.PID = Employees.PID
WHERE Persons.PID IN  (SELECT PID
                       FROM Hase) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:22:58.923

```
SELECT DISTINCT
  persons.NAME,
  persons.GENDER,
  persons.AGE
FROM
  persons INNER JOIN employees
  ON persons.PID = employees.PID
  INNER JOIN hase
  ON persons.PID = hase.PID 
```

请[在此处](http://sqlfiddle.com/#!2/8bf4f/3)查看小提琴。

# jquery - jQuery在悬停时显示图像，检测元素ID的某些部分

> ID：15348844
> 
> 赞同：1
> 
> 时间：2013-03-11T21:18:45.043
> 
> 标签：jquery

`<a>`我想在和`</a>`标签之间的链接悬停上创建一个图像预览。这是我的代码：

```
<li id="pic39">
    <span class="pr2"></span>
    <a id="pic39" href="http://shrani.slo-devs.com/index.php?p=6vxK53pk" target="_blank">Sandra</a>
    <span class="edit" onclick="location.href='index.php?e=39'"></span>
    <span class="delete" onclick="deletePIC(39)"></span>
    <i class="infoSlike">(0 ogledov | 11.03.2013 / 21:59:31)</i>
    <div id="imgPrv">
        <span id="imgPrv39">
            <img src="http://www.shrani.slo-devs.com/upl/CENSURE.jpeg" />
        </span>
    </div>
</li> 
```

我希望 jQuery 检测标签 ID 的其余部分（因此，数字**39**）并显示包含数字**39**的跨度（ID**为 imgPrv39**的跨度）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:24:08.783

```
$('li a').hover(function(){
   // You can replace the `pic` with an empty string
   var id = this.id.replace('pic', '');
   $('#imgPrv' + id).toggle();
}) 
```

请注意，ID 必须是唯一的，您有多个具有相同 ID 的元素，您的标记无效，您应该改用类。

您还可以使用`siblings`方法：

```
$('li a').hover(function(){
   $(this).siblings('div').find('span').toggle();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:25:01.750

你不需要这样做。您可以使用相对选择器并消除所有这些 ID 业务。

这假设您的 LI 中只有一个 A 和一个 SPAN。如果您想更具体，可以使用类名。

```
$("li a").hover(
  function () {
    $(this).find('span').show();
  },
  function () {
     $(this).find('span').hide();
  }
); 
```

# c# - 对对象的 ArrayList 进行排序

> ID：15348847
> 
> 赞同：0
> 
> 时间：2013-03-11T21:18:55.603
> 
> 标签：c#, linq, sorting, arraylist

尝试对自定义对象类型的 ArrayList 进行排序时，我感到有些沮丧。我正在尝试使用 LINQ，以下代码是我用于测试的代码：

```
 foreach (classOrder co in orderList)
        {
            MessageBox.Show("Before: " + co.Feet);
        }

        //use LINQ to sort my orderList which is an ArrayList of classOrder objects
        var sortedList = orderList.OfType<classOrder>().OrderBy(r => r.Feet);

        foreach (classOrder co in sortedList)
        {
            MessageBox.Show("After: " + co.Feet);
        } 
```

显然这是不正确~~的，因为底部 foreach 的输出与顶部相同。~~因为它只对第一个数字进行排序。Feet 是一个字符串，但包含数字。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:22:13.140

对于arrayList，也许您应该使用排序。

[http://msdn.microsoft.com/en-us/library/8k6e334t.aspx](http://msdn.microsoft.com/en-us/library/8k6e334t.aspx)

我建议尽可能避免使用 ArrayList，或者除非您出于特定目的需要它。在这种情况下，List 或您需要的任何类型将是更可取的，因为它使您可以访问奇妙的扩展方法，如 OrderBy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:23:29.897

您必须在自定义类中实现 IComparable iinterface，然后才能使用简单的 List.Sort() 函数。

# linux - Bash：如何更改文件的第一列且仅更改第一列

> ID：15348852
> 
> 赞同：0
> 
> 时间：2013-03-11T21:19:06.573
> 
> 标签：linux, bash, scripting, awk, text-parsing

我有一个文件被程序搞砸了，现在每一行看起来像这样：

```
somelongstring:number   number    number   number   ... a lot more columns 
```

（制表符分隔）我需要做的是修改每一行，以便第一列（如果它的格式为 somelengthystring:number）更改为数字（去掉字符串和冒号）

我知道我可以在 awk 中使用 split 来摆脱字符串和冒号，例如：

```
awk '{
   split($1,array,":")
} 
END{
   print array[2],$2,$3...
}' 
```

但问题是我不想要第一列。我想要整行，只想修复第一列。唯一的问题是，列太多了，输入 $2,$3, ... 一直到 $35 或其他任何值都是相当愚蠢的。有什么更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:21:19.370

使用 Perl 你可以这样做：

```
cat file.txt | perl -pe 's/.*?://' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:23:38.923

如果到目前为止您所拥有的工作，除了 $2, .... 部分：

```
awk '{
    split(..)
    $1=array[2]
    print
}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:24:04.793

使用`sed`. 删除从行首 ( `^`) 到第一个冒号的所有字符。

```
sed 's/^[^:]*://' infile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T21:36:10.977

使用[`cut`](http://linux.die.net/man/1/cut)

```
cut -d: -f2- file.txt 
```

这使用冒号作为分隔符并将所有内容保留在它的右侧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T22:18:36.427

如果只更改第一个制表符分隔字段中的格式`somelengthystring:number`，您可以尝试以下操作：

```
awk '$1~/:[0-9]*$/{sub(/.*:/,x,$1)}1' FS='\t' OFS='\t' file 
```

# database - 访问：在一个表单上为另一个表上的每个项目添加记录

> ID：15348854
> 
> 赞同：1
> 
> 时间：2013-03-11T21:19:13.637
> 
> 标签：database, ms-access

我需要帮助制作表格以输入用于一大群人的小时数；我不确定如何为多个关联记录**生成新/空记录并****一次显示它们**。

该数据库旨在按工资周期跟踪 200 名员工的工时，并为每组使用的工时提供认证。每个员工只分配到一个部门，每个认证都分配给一个员工，每个小时事件（因为没有更好的术语）被分配到一个认证**和**一个支付周期。

我需要为每个工资期给工资单职员一张空白表格，显示职员负责**的部分中的所有员工**，并为该工资期**的每个员工创建一个新的小时记录。**我们需要能够在一个长列表中显示该部分的所有员工；没有使用记录选择器在记录之间进行洗牌。

（在理想的世界中，如果员工在该支付期间实际使用了小时数，我们只会创建新记录，但我愿意接受创建大量使用 0 小时的“小时”记录，如果这是更简单的方法它。）

**关联表/字段**
List_Sections：*SectionID*
List_Employees：*EmployeeID*，*SectionID*
List_Certifications： *CertID*，*EmployeeID*
List_PayPeriods：*PeriodID*

**表添加到**
List_Hours：*HoursID*、*HoursUsed*、*CertID*、*PeriodID* （*HoursID*是自动编号）

该表格将向职员提出以下问题：

1.  你是谁？（他们从组合框中选择他们的名字；这已解决）
2.  您要为哪个部分添加小时数？（只能从他们负责的部分中选择；这个已经解决了）
3.  您要为哪个支付期输入数据？（可以选择未来两周或一年后的任何支付期）

这应该使用以下列填充数据表/表格子表单：

1.  EmployeeID（**为该部分中的每个员工自动生成的一行**）
2.  PeriodID（由店员在问题 3 中选择的内容自动填充）
3.  HoursUsed（他们会输入这个）
4.  CertID（这是一个仅限于与相关员工相关的认证的组合框；我需要弄清楚如何使新工时记录的默认值成为*该员工*的最新认证）
5.  HoursID（这将是自动编号，我实际上可能不会将其粘贴在表单上，​​因为我怀疑我的用户可能会尝试删除/更改它并感到沮丧。）

我还想*提取*之前为给定员工在此支付期间创建的任何*现有*记录，但这是次要优先级（我已经有一个查询会提醒我们奇怪的情况，比如有人使用 160 小时两周内，并输入了一个用于编辑现有时间的表格。）

相关资料：

1.  我正在使用 Access 2010。
2.  我对 Microsoft Office 产品的理解很好，但是我对 VBA 的理解很差，而且我已经有十年没有用比 Excel 中的“连接”更高级的任何类型的代码做这么多的工作了；我为我最终运行的级联组合框感到*非常*自豪。
3.  我的办公桌上有一本“Access 2010: The Missing Manual”，但没有其他纸质参考资料。如果这个答案在本手册的某个地方，我会向教我如何在书中找东西的人要求退款。
4.  好吧，好吧，我承认，他们实际上会在表单上看到诸如“员工全名”和“具有多个相关详细信息的认证描述”之类的字段。这些在相关表上，由更新查询定期更改，（一旦我完成了这个数据库）将每天或两天自动运行一次。因为我被告知永远不要在我的表中放置计算字段或查找。

我一直在努力思考这个问题，但我被困在“我想知道你是否可以做一些事情，比如将附加查询作为“更新后”事件过程运行......”我希望有一个更优雅的我还没有想到的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:11:28.030

根据您对需求的（非常好的）描述，我倾向于同意在一开始就创建所有可能相关的 [List_Hours] 记录可能是最好的方法。是的，仅包含 0 小时的记录会出现一些“膨胀”，但存在这些记录将使数据输入和报告更容易。

> 我被困在“我想知道您是否可以执行诸如将附加查询作为“更新后”事件过程运行之类的操作……”我希望我还没有想到一个更加优雅的解决方案。

我看不出有什么不雅之处。如果此时您有足够的信息来确定需要存在哪些 [List_Hours] 记录，那么就该确保它们存在了。

对于这种方法，我能看到的唯一问题是 [List_Hours] 仅通过 [CertID] 与员工建立了间接链接。将小时数直接链接到员工可能更有意义（即，使用 [EmployeeId] 而不是 [CertId]），这样您就可以在知道有问题的 Section 和 Pay_Period 后立即创建 [List_Hours] 记录。

# c - OpenGL/OSX/GLFW：只有窗口颜色

> ID：15348858
> 
> 赞同：1
> 
> 时间：2013-03-11T21:19:26.713
> 
> 标签：c, opengl, glfw

我正在为大学做一些 OpenGL/C 工作（我在 WebGL 方面有经验）。下面的代码主要基于 gltut 教程（不能在 OSX 上运行 - 需要 OGL 3.3）和 NeHe 教程。我的问题是，无论如何，唯一绘制的是用任何一种颜色填充的初始窗口（在 while 循环中更改颜色有效，因此循环正常运行）。然而，三角形和四边形根本没有出现。在过去的 5 个小时里，我一直在对其进行故障排除，而且我没有比开始时更进一步。任何帮助将不胜感激！

使用：OpenGL3.2，最新GLFW（2.7.7）

编译使用：**gcc main.c -I/usr/local/include -I/opt/X11/include -L/usr/local/lib -I/opt/X11/lib -w -framework OpenGL -framework Cocoa -framework IOKit -lglfw -o 测试**

我下面评论中的代码有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:36:34.140

您似乎没有初始化您的矩阵 - 既不是投影，也不是模型视图。

即使默认矩阵偶然地对您的目的来说是合理的，您也会不断地应用翻译，这将很快导致无论如何事情都在屏幕外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:37:50.617

下面的固定代码（3.2 OGL 上下文位被注释，因为它们不起作用 - 如上所述的空白屏幕）：

```
//c-libs
#include <stdlib.h>

//opengl
#include <OpenGL/gl3.h>
#include <OpenGL/gl.h>
#include <OpenGL/glu.h>

//glfw
#define GLFW_INCLUDE_GL3  /* don't drag in legacy GL headers. */
#define GLFW_NO_GLU       /* don't drag in the old GLU lib - unless you must. */
#include <GL/glfw.h>

int init() {
    //init glfw
    if( !glfwInit() )
        return -1;

    //DOES NOT WORK
    //set to version 3.2 & use core profile
    //glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    //glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    //glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
    //glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    /* Create a windowed mode window and its OpenGL context */
    if (!glfwOpenWindow(1000, 500, 5, 6, 5, 0, 0, 0, GLFW_WINDOW))
        return -1;

    glfwSetWindowTitle( "My Amazing Super Fantastic Window" );

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    float aspect_ratio = ((float)1000) / 500;
    glFrustum(.5, -.5, -.5 * aspect_ratio, .5 * aspect_ratio, 1, 50);
    glMatrixMode(GL_MODELVIEW);

    return 1;
}

int main(int argc, char *argv[])
{
    if( !init() )
        return -1;

    /* Loop until the user closes the window */
    int running = GL_TRUE;
    while (1)
    {
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // reset view matrix
        glLoadIdentity();
        // move view back a bit
        glTranslatef(0, 0, -30);
        // by repeatedly rotating the view matrix during drawing, the
        // squares end up in a circle
        int i = 0, squares = 15;
        float red = 1, blue = 1, green = 1;
        for (; i < squares; ++i){
            glRotatef(360.0/squares, 0, 0, 1);
            glBegin(GL_QUADS); {
                glColor3f(red, green, blue);
                glVertex2i(1, 11);
                glColor3f(red * .8, green * .8, blue * .8);
                glVertex2i(-1, 11);
                glColor3f(red * .5, green * .5, blue * .5);
                glVertex2i(-1, 9);
                glColor3f(red * .8, green * .8, blue * .8);
                glVertex2i(1, 9);
            } glEnd();
        }

        /* Swap front and back buffers and process events */
        glfwSwapBuffers();
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T00:07:32.817

我遇到了同样的问题。我必须在我的 VBO 之前创建一个 VAO，现在它可以在 OS X 上运行。

```
GLuint vertex_array;
glGenVertexArrays(1, &vertex_array);
glBindVertexArray(vertex_array); 
```

# magento - CMS 页面中的 Magento 客户群

> ID：15348860
> 
> 赞同：0
> 
> 时间：2013-03-11T21:19:33.653
> 
> 标签：magento, templates, content-management-system, tags

有没有办法在*不*接触任何 php 文件的情况下在 CMS 页面中公开客户组 ID？就像交易电子邮件模板中的 {{var customer.group_id}} 一样？

提前致谢！

马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:07:40.737

不。

PHP 将是必需的（扩展？仍然需要 PHP）。

# c# - If-None-Match, ETag 在 HTTP 与 RestSharp

> ID：15348862
> 
> 赞同：1
> 
> 时间：2013-03-11T21:19:37.167
> 
> 标签：c#, asp.net-web-api, restsharp

Etag 在 HTTP 规范中有很好的定义。此处提供更多解释[http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)

最近我尝试使用带有 ASP.Net Web API 的 RestSharp 客户端库，但是我在缓存方面遇到了一些问题，我从服务器端发送 Etag（即“ETag”：“12345”作为响应头）到客户端，我可以看到RestResponse 对象的响应标头中的 Etag 相同，到目前为止很高兴。

现在在下一个请求中，使用相同的 RestSharp 客户端，我希望 RestSharp 在随后对服务器的相同资源请求中传递“If-None-Match”标头（即“If-None-Match”：“12345”作为请求标头），但不幸的是，我找不到将 RestSharp 设置为自动执行此操作的方法。

注意：c# 中的 WebClient 类在原始操作中完成这项工作，但 RestSharp 没有。

我想要的是，有人来确认怎么做，或者只是告诉我我是垃圾：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:22:47.983

根据我在源代码中看到的内容，您需要在对该资源的下一个请求中自己添加该标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T19:12:54.373

RestSharp`HttpWebRequest`在幕后使用。我在客户端初始化期间运行了这行代码，并开始`If-None-Match`自动获取标题。

```
HttpWebRequest.DefaultCachePolicy = new HttpRequestCachePolicy(HttpRequestCacheLevel.Default); 
```

这告诉`HttpWebRequest`使用默认缓存级别（没有此行，似乎缓存级别设置为`HttpRequestCacheLevel.BypassCache`）。

# facebook-graph-api - Facebook Graph Api 搜索输出语言

> ID：15348863
> 
> 赞同：0
> 
> 时间：2013-03-11T21:19:37.553
> 
> 标签：facebook-graph-api, search, localization

有什么方法可以获取特定语言的 Facebook Graph Api 的搜索输出？我尝试添加`&locale=en_EN`参数，也尝试添加 HTTP`Accept-Language`标头。看来这两种方法都行不通。现在有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:16:15.423

答案来的有点晚，但它可能会帮助其他人解决这个问题。

如果您提到的任何事情都不起作用，您可以使用[这个](http://code.activestate.com/recipes/326576/)库（使用字符三元组的语言检测）来帮助您确定您的帖子是用什么语言编写的。它非常轻巧且快速，因此不会造成太大的开销.

# javascript - Chrome扩展弹出窗口中的谷歌图表？

> ID：15348868
> 
> 赞同：4
> 
> 时间：2013-03-11T21:19:58.630
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-visualization

我想让我的 Chrome 扩展程序的弹出页面显示一个谷歌图表，显示用户阅读新闻习惯的信息。我注意到（特别是这里：[Chrome 扩展程序不起作用](https://stackoverflow.com/questions/10799257/chrome-extension-doesnt-work)），这个问题是 Chrome 扩展程序不允许内联脚本，这使得包括使用 Google Chart 所需的 API 文件变得复杂。有没有解决的办法？有没有什么地方可以下载整个 API 以简单地包含在我的扩展中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-17T14:18:49.597

原则上，扩展可以使用违反 CSP 的库。但是，这需要额外的跳跃：[沙盒](https://developer.chrome.com/extensions/manifest/sandbox)。

```
 "sandbox": {
    "pages": [
      "sandbox.html"
    ]
    "content_security_policy":
        "sandbox allow-scripts; script-src 'self' 'unsafe-eval' https://www.google.com/jsapi"
  ], 
```

它是专门为解决这个问题而创建的。请参阅[“在 Chrome 扩展程序中使用 eval。安全。”](http://developer.chrome.com/extensions/sandboxingEval) 实施细节指南。

您需要在普通脚本和沙箱之间传达结果，因为沙箱页面没有 Chrome API 访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:40:29.210

如果文档位于 Chrome 扩展程序的上下文中，则不能使用 Google Charts，因为它违反了内联 JavaScript 规则。但是，您可以将 iframe 放入引用远程资源的扩展弹出窗口中。例如，如果以下代码段在您的弹出窗口中：

```
<iframe src="https://mycoolextension.com/user/12345"></iframe> 
```

然后，您可以在地址[https://mycoolextension.com/user/12345](https://mycoolextension.com/user/12345)上使用 Google Charts 获得应用程序。如果要将图表与扩展程序的数据集成，则需要将参数添加到图表 iframe 的地址，或者实施内容脚本以将值发送到 iframe。

# c# - 更有效地加载列表

> ID：15348869
> 
> 赞同：0
> 
> 时间：2013-03-11T21:19:59.540
> 
> 标签：c#, performance, lambda, parallel-extensions

我的任务是更新一些遗留代码，并且确实需要减少部分代码的运行时间。下面的列表经常加载。我已经设法将时间从大约一分钟减少到大约十五秒，但它确实需要进一步减少。以下代码行运行良好，但我正试图从中挤出一切。

```
List<MyObject> _moList = new List<MyObject>(DB.GetAll(queryString, parameters, MyObject.Extract));
_moList.AsParallel().ForAll(s => s.RelativeCost = GetRelativeCost(s)); 
```

所以我有几个问题。首先，是否可以将这两行合并为一行，如果可以，如何？其次，这样做会提高性能吗？

有些不是 MyObject 有大约 40 个属性（不确定这是否相关），而 GetRelativeCost 在时间/cpu 周期方面有些昂贵（因此并行运行）。

任何帮助将不胜感激！

PS 我也在其他角度工作，特别是试图降低 GetRelativeCost 的“成本”，但我需要让每个周期都能摆脱它，以使其为用户所接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:29:49.613

1.  你有没有运行分析器？您确定要优化瓶颈吗？
2.  您为什么要尝试优化列表处理而不是`GetRelativeCost`?
3.  是什么`DB.GetAll`？你确定它以最佳方式工作吗？
4.  我认为正确`MyObject.Extract`的是某种物体水合功能吗？你确定它是最优的吗？
5.  为什么`GetRelativeCost`在列表加载时执行？推迟执行不是有意义吗？

更多关于最后一点。如果你`GetRelativeCost`有一些副作用 - 你最好还是删除它们，因为它违反了 DRY 原则。如果没有，您可能需要重写`RelativeCost`以允许延迟初始化，例如

```
private int? _relativeCost
public int RelativeCost {
    get {
       if  (!_relativeCost.HasValue)
            _relativeCost = GetRelativeCost();
       return _relativeCost;
    }
} 
```

这样你就可以延迟`GetRelativeCost`执行，直到它真正需要为止。通过这种方式，您可以通过不计算`GetRelativeCost`实际上不需要设置的实体来进行优化，并通过延迟昂贵的计算来`RelativeCost`加速**特定的代码**`GetRelativeCost`，但代价是稍后会增加计算。

总结一下：运行profiler，确定bottleneck，优化**bottleneck**。如果出现瓶颈`GetRelativeCost`- 尝试像我上面描述的那样让它变得懒惰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:24:52.360

您可以通过删除变量并在 new 的结果上调用 AsParalel 将它们组合成一行。

```
(new List<MyObject>(DB.GetAll(queryString, parameters, MyObject.Extract))).AsParallel().ForAll(s => s.RelativeCost = GetRelativeCost(s)); 
```

但是，不要指望这会提高代码的性能。

# domain-driven-design - 除非域模型非常复杂，否则我们不应该使用隔离核心吗？

> ID：15348870
> 
> 赞同：1
> 
> 时间：2013-03-11T21:20:02.490
> 
> 标签：domain-driven-design

埃文的书，第 页。430：

> 因此，虽然这个例子可能不够复杂，无法将我们推向隔离核心......

a）作者是否暗示除非*领域模型*非常复杂，否则我们不应该有一个*隔离核心*？换句话说，除非处理*复杂*的领域模型，*核心领域*应该只以*文档的形式*存在（即*领域愿景声明*和*突出核心*），而不应该表现为*一个单独的物理实体*？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:55:33.423

对我来说，分离核心是指将域组件组织成完全独立的包，但一起代表同一个核心域。大型核心可能会从这种类型的组织中受益，以澄清领域的组成，或者将支持能力与核心领域概念分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T19:59:31.540

“核心域应该只以文档的形式存在（即域愿景声明和突出核心），”

不，您的核心域不应该仅作为一组文档存在。这违背了领域驱动设计的观点。DDD 的全部要点是您的业务分析工件在您的系统中具有一流的表示。例如，如果您的需求经常讨论 ShippingCargo 的 Route 的概念，并且您没有**ShippingCargo**和**Route的***类*（代码级工件），那么您做错了。**通用语言**的重点在于，我们所说的软件所做的事情和它实际所做的事情之间存在紧密的映射。

 ******该技术旨在管理认知负荷，并减少不同利益相关者对系统的术语和推理的阻抗不匹配。

仅将模型保存在文档中是违反[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的情况。与[代码注释和反对它们的各种论点](http://elegantcode.com/2010/04/18/eliminating-comments-the-road-to-clarity/)类似，文档变得陈旧并失去价值。这一点我怎么强调都不为过，DDD 的重点是你的代码应该能够在非代码文档的最小支持下显示**核心域。**

当域对象（实体、值对象等）的数量变得如此之大以至于为了凝聚力和架构简单性而将事物分开时，分离核心特别有用。

此概念的应用示例

*   [斯波克框架](http://code.google.com/p/spock/source/browse/#svn/trunk)
*   [马文](https://git-wip-us.apache.org/repos/asf?p=maven.git;a=commit;h=01de14724cdef164cd33c7c8c2fe155faf9602da)
*   [地质工具](https://github.com/geotools/geotools)

观察他们的代码库的演变（你可能需要浏览过去几年来看看事情是如何变化的）。您会注意到，随着这些系统变得越来越大，并与更多的外部系统交互，“核心”模块的想法变得很重要。这就是隔离核心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-21T17:53:22.580

在 pg 上。429 埃文斯说：

> 当你有一个对系统至关重要的大型有界上下文，但模型的基本部分被大量支持能力所掩盖时，是时候砍掉一个分离的核心了。

分离核心只是一种**重构技术**，您可以使用它来改进核心模型，使其演变成概念上更具凝聚力的模型。**将仅部分服务于 CORE DOMAIN 的**元素移动到单独的支持上下文中是隔离核心告诉您要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:18:49.557

整套领域驱动模式和方法只能用于复杂的业务领域。

“复杂”是一个贬义词，当代码模型设计不当或无法提供域驱动应用程序所需的表达能力时，它可以应用于代码模型。此外，初级建模师可能会忽略业务本身的重点，并设计出比业务更复杂的模型（通常是为了寻求灵活性）。

当您使用大型复杂领域以及多年演变的模型时，您通常会累积小型建模债务，类似于众所周知的技术债务。然后，重构为应该只包含最有价值的概念和业务规则（从客户的角度来看）的隔离核心域，可以降低系统的演化成本（即使它本身通常是昂贵的重构）。

但是，当您需要 DDD 时，不仅仅是编写规范文档。您需要 DDD 来理解和处理复杂的业务，通过称为“源代码”的符号表示来表达它们。对我来说，DDD 是一个有价值的业务分析工具，但它的全部意义在于支持对解决复杂业务问题的有价值的应用程序进行编码。******

# android - 如何让科尔多瓦 InAppBrowser 为用户提供一种在使用 Android 设备时关闭浏览器的方法？

> ID：15348871
> 
> 赞同：20
> 
> 时间：2013-03-11T21:20:14.317
> 
> 标签：android, cordova, cordova-2.0.0, inappbrowser

我正在使用 cordova InAppBrowser 在我的应用程序中显示来自外部站点的内容。当我在 iPhone 上打开浏览器时，InAppBrowser 底部有一些按钮用于关闭它或来回导航。Android 设备上的 InAppBrowser 没有这样的按钮，也没有明显的方法让用户关闭浏览器。

我知道如何以编程方式关闭 InAppBrowser，但*用户*在使用 Android 设备时如何关闭它？

我知道用户可以点击硬件后退按钮来关闭浏览器，但是（1）这不直观 - 后退按钮通常意味着“返回页面”，并且（2）我最终想改变的行为后退按钮可返回显示在 InAppBrowser 中的站点内的页面，而不是关闭浏览器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-08-03T17:47:35.627

对于我们这些使用 Ionic ( [ionicframework.com](http://ionicframework.com) ) 和/或 ngcordova ( [ngcordova.com](http://ngcordova.com) ) 的人。以下代码将启动 inappbrowser，然后通过链接关闭对话框`<a href="/mobile/close">close</a>`。

```
 $cordovaInAppBrowser.open('http://localhost:3000/#/mypath/', '_blank', options).then((event) ->
    # success
    return
    ).catch (event) ->
      # error
      return

  $rootScope.$on '$cordovaInAppBrowser:loadstart', (e, event) ->
    $log.log 'loadstart', e, event
    if event.url.match('mobile/close')
      $cordovaInAppBrowser.close() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-12-04T15:08:11.990

对于那些在 Android（类似于 iOS）的页脚中寻找本机“完成”按钮的人，我[已经](https://github.com/dpa99c/cordova-plugin-themeablebrowser/tree/CB-13409)在`cordova-plugin-inappbrowser`.

**更新：2018 年 1 月**

我的[pull request](https://github.com/apache/cordova-plugin-inappbrowser/pull/258)已经合并到[官方插件 repo](https://github.com/apache/cordova-plugin-inappbrowser)中，所以你可以等待下一个版本（将 >=2.0.2）或直接从 Github 安装，例如：

```
cordova plugin add https://github.com/apache/cordova-plugin-inappbrowser 
```

**原始答案**

~~该实施是[PR #246](https://github.com/apache/cordova-plugin-inappbrowser/pull/246)的扩展，目前（*2017 年 12 月 4 日*）等待批准合并。完成后，我将打开一个单独的 issue 和 PR 以将其合并回 master `cordova-plugin-inappbrowser`。~~

以下是一些带有相关选项的屏幕截图：

**位置=是，页脚=是**

[![](../Images/3d1bc18b3aaa924f3b0e16f45e93dc8a.png)](https://user-images.githubusercontent.com/2345062/33147006-2a602f88-cfbe-11e7-9580-438b07236400.png)

**位置=否，页脚=是**

[![](../Images/f8942a4247429f3410232c5b5966a056.png)](https://user-images.githubusercontent.com/2345062/33147147-a60efaba-cfbe-11e7-8132-120179e8b43e.png)

**位置=是，页脚=是，关闭按钮标题=完成**

[![](../Images/b5e5f0c8f6007f8aa57f264b5211f296.png)](https://user-images.githubusercontent.com/2345062/33147185-ca8d1e6c-cfbe-11e7-9646-0e1cea52abce.png)

**位置=否，页脚=是，closebuttoncaption=完成，closebuttoncolor=#0000ff**

[![](../Images/961958fe165f5db6a46d78e73838f273.png)](https://user-images.githubusercontent.com/2345062/33147285-1aa7bc54-cfbf-11e7-9b9b-576f0d87ed9a.png)

**location=no,footer=yes,footercolor=#0000ff,closebuttoncaption=完成**

[![](../Images/6d1880c813c24321af56524d4aef5790.png)](https://user-images.githubusercontent.com/2345062/33147316-3ab511fe-cfbf-11e7-8b19-d1de80ad289e.png)

**location=no,footer=yes,footercolor=#00ff00,closebuttoncaption=完成,closebuttoncolor=#0000ff**

[![](../Images/f1c6046c8d8905b15b4407028ddd9164.png)](https://user-images.githubusercontent.com/2345062/33147348-581b55c8-cfbf-11e7-9490-c61d83957079.png)

**位置=否，页脚=是，页脚颜色=#CC000000，关闭按钮标题=完成，关闭按钮颜色=#00FFFF**

[![](../Images/8cd8a4bd68b51ed32439e864218610ee.png)](https://user-images.githubusercontent.com/2345062/33147377-6ec46c6a-cfbf-11e7-969e-a075142133c4.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-11T23:04:53.683

添加`"location=yes"`到通话结束后，会在 Android 上的窗口顶部放置一个地址栏和完成按钮。（它出现在 iOS 窗口的底部）。单击完成关闭窗口。

```
var ref = window.open('http://apache.org', '_blank', 'location=yes'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-16T20:09:30.710

为了保持选项“location=yes”在 Android 和 iOS 上的行为相同，我建议通过以下更改修改 Troy 的修复程序，将 if 语句移动到控制“toolbar.addView(edittext);” 而不是整个工具栏。

```
// Add the views to our toolbar
toolbar.addView(actionButtonContainer);
if (getShowLocationBar()) {
    toolbar.addView(edittext);
}
toolbar.addView(close);

// Add our toolbar to our main view/layout
main.addView(toolbar); 
```

与原始代码相比：

```
// Add the views to our toolbar
toolbar.addView(actionButtonContainer);
toolbar.addView(edittext);
toolbar.addView(close);

// Don't add the toolbar if its been disabled
if (getShowLocationBar()) {
    // Add our toolbar to our main view/layout
    main.addView(toolbar);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-12T15:52:21.330

正如 elMarquis 所说，您需要添加“location=yes”才能在 Android 设备上获得“完成”按钮。但是，如果您想单独获得 Done 按钮，而无需地址栏，只需对 cordova 源代码进行一次更改即可轻松完成。

我从这个 google 组获得了信息：[https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/mUcBcjPISgg](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/mUcBcjPISgg)

以下是一些分步说明：

1.  下载科尔多瓦源代码：

    `git clone https://github.com/apache/cordova-plugin-inappbrowser`

2.  [从这里](http://archive.apache.org/dist/commons/codec/binaries/commons-codec-1.7-bin.zip)下载公共编解码器库

3.  打开 Android 开发者工具
4.  将 cordova 项目导入您的工作区

    `File > Import... > Existing Projects into Workspace`

5.  创建一个`libs`目录并将下载的`commons-codec-1.7.jar`文件复制到其中。

6.  将文件夹添加`gen`到项目中（.classpath 文件需要，但不包含在 git 下载中，因为 git 不允许空文件夹）
7.  转到项目 > 全部构建。该项目应该没有错误地构建。
8.  打开 InAppBrowser.java 并搜索“toolbar.addView(edittext);” （我下载的科尔多瓦版本中的第 468 行）。
9.  注释掉那一行。
10.  再次构建项目。
11.  将 bin/cordova.jar 文件复制到您正在使用 cordova 的任何项目中。

希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-15T15:21:20.833

截至 2016 年 4 月，这些答案已经过时了。我现在必须这样做，所以这是我的经验。

首先，Cordova/Ionic 项目被分割成插件。我们需要的是[cordova-plugin-inAppBrowser](https://github.com/apache/cordova-plugin-inappbrowser) repo。

**第1步**

首先，我们必须在本地克隆它或在 github/bitbucket 上 fork 它。（对于每个新项目设置，我们都需要永久克隆的 repo。）我们可以使用以下命令轻松克隆 repo：

```
git clone git@github.com:apache/cordova-plugin-inappbrowser.git 
```

**第2步**

然后我们必须对项目进行请求的更改。为了使*Android上的 url bar 行为与**iOS*中相同，我们必须始终显示菜单栏，并且只有在用户请求菜单栏时才显示 url 栏。控制它的代码在`/src/android/InAppBrowser.java`文件中。

我们必须更改[707-716](https://github.com/apache/cordova-plugin-inappbrowser/blob/master/src/android/InAppBrowser.java#L707-L716)之间的行。（注意：如果他们修改文件，这些行号可能会改变。）

我们必须从这里更改代码

```
// Add the views to our toolbar
toolbar.addView(actionButtonContainer);
toolbar.addView(edittext);
toolbar.addView(close);

// Don't add the toolbar if its been disabled
if (getShowLocationBar()) {
    // Add our toolbar to our main view/layout
    main.addView(toolbar);
} 
```

对此：

```
// Add the views to our toolbar
toolbar.addView(actionButtonContainer);
if (getShowLocationBar()) {
    toolbar.addView(edittext);
}
toolbar.addView(close);

main.addView(toolbar); 
```

所以我们在这里所做的是我们总是添加带有退出/前进/后退按钮的工具栏，并且只有当用户想要完整的栏时才添加 url 栏。这是 iOS 版本的行为。

此外，如果我们想删除前进/后退按钮，因为*Android*有一个原生的后退按钮，那么我们必须将它们注释掉，并且只有当用户想要完整的菜单栏时才添加它们。所以我们的代码应该是这样的：

```
// actionButtonContainer.addView(back);
// actionButtonContainer.addView(forward);

// Add the views to our toolbar
toolbar.addView(actionButtonContainer);
if (getShowLocationBar()) {
    toolbar.addView(edittext);
    // We add this here if the user want the full bar, then we need this buttons.
    actionButtonContainer.addView(back);
    actionButtonContainer.addView(forward);
}
toolbar.addView(close); 
```

**第 3 步**

我们必须将修改后的插件添加到我们的项目中，如果您只想要一次，那么只需运行

```
cordova plugin add https://github.com/username/cordova-plugin-inappbrowser.git
// or
cordova plugin add https://UserName@bitbucket.org/UserName/cordova-plugin-inappbrowser.git 
```

代替

```
cordova plugin add cordova-plugin-inappbrowser 
```

注意：您必须保留修改后的存储库，因为`cordova plugin add`每次设置项目时该命令都会从存储库中获取。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-12T00:22:09.033

刚刚遇到一个可以帮助更好地满足您的需求和/或帮助其他人的解决方案。

总之，您可以创建一个“虚拟”HTML 页面，在您的应用程序中添加 JavaScript 以检测该页面何时加载，并在加载时关闭 InAppBrowser。

请参阅此处：[Phonegap build - 在 InAppBrowser 或没有工具栏的子浏览器中打开外部页面并关闭它？](https://stackoverflow.com/questions/15666258/phonegap-build-open-external-page-in-inappbrowser-or-childbrowser-with-no-tool)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-15T05:38:26.963

这可以通过调整“InAppBrowser.java”来实现。我知道这有点奇怪，但这是我唯一的选择。但是，我对 java 文件所做的那些小调整现在允许我在我的应用程序的页面中导航回来。

这是要在 InAppBrowser.java 中进行的更改，在 showWebPage 方法中的“运行”方法中，将有一个类似这样的侦听器代码，

```
dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
                    public void onDismiss(DialogInterface dialog) {     
                        closeDialog();
                    }
}); 
```

在该行下方添加以下代码，

```
dialog.setOnKeyListener(new DialogInterface.OnKeyListener() {                   
@Override
     public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
         if (event.getAction()!=KeyEvent.ACTION_DOWN)
             return true;               
         if(keyCode==KeyEvent.KEYCODE_BACK){
             goBack();
             return true;
         }else {
             return false;
          }
      }
}); 
```

# php - 我的 PHP 脚本中的 PHP 解析错误

> ID：15348878
> 
> 赞同：-4
> 
> 时间：2013-03-11T21:20:43.137
> 
> 标签：php

我已经检查了这段代码几个小时，但找不到缺少的逗号、括号或引号等。我是 PHP 初学者，但我正在尝试 - 找到它的任何帮助都会很棒。我得到的错误是：

> PHP Parse 错误：语法错误，第 235 行中的意外 $end of file in ...

这是我的代码：

```
<?php
    $page = get_page_by_title( 'CSA' );
    $page1 = get_page_by_title( 'Co-op Members' );
    $page2 = get_page_by_title( 'Recipes' );
    $page3 = get_page_by_title( 'FAQs' );
    $page4 = get_page_by_title( 'Contact Us' );
    $page5 = get_page_by_title( 'Home' );

    if ( is_page($page->ID) )
    {?>
        <div id="page-bg" style="background: url('<?php bloginfo('template_directory'); ?>/images/green/page-top5.jpg') no-repeat scroll center bottom #244714 !important;">
    <?php
    }elseif ( is_page($page1->ID) )
    {?>
        <div id="page-bg" style="background: url('<?php bloginfo('template_directory'); ?>/images/green/page-top2.jpg') no-repeat scroll center bottom #244714 !important;">
    <?php
    }elseif ( is_page($page2->ID) )
    {?>
        <div id="page-bg" style="background: url('<?php bloginfo('template_directory'); ?>/images/green/page-top3.jpg') no-repeat scroll center bottom #244714 !important;">
    <?php   
    }elseif ( is_page($page3->ID) )
    {?>
        <div id="page-bg" style="background: url('<?php bloginfo('template_directory'); ?>/images/green/page-top4.jpg') no-repeat scroll center bottom #244714 !important;">
    <?php
    }elseif ( is_page($page4->ID) )
    {?>
        <div id="page-bg" style="background: url('<?php bloginfo('template_directory'); ?>/images/green/page-top5.jpg') no-repeat scroll center bottom #244714 !important;">
    <?php
    }elseif ( is_page($page5->ID) )
    {?>
        <div id="page-bg" style="background: url('http://ycgrown.com/wp-content/uploads/2013/03/Cherry-Tomatoes.jpg') no-repeat scroll center bottom #244714 !important;">
<?php
    }else{
?>
        <div id="page-bg" style="background: url('http://ycgrown.com/wp-content/uploads/2013/03/Cherry-Tomatoes.jpg') no-repeat scroll center bottom #244714 !important;"> 
```

编辑：我添加了 PHP 标记，但仍然收到错误 - 以及进一步的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:31:24.890

您还缺少 else 条件的右大括号

```
 }else{
?>
        <div id="page-bg" style="background: url('http://ycgrown.com/wp-content/uploads/2013/03/Cherry-Tomatoes.jpg') no-repeat scroll center bottom #244714 !important;">
 <?php
 }
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:21:54.463

您缺少 PHP 标签：

```
{?>
            <div id="page-bg" style="background: url('http://xyz.com/wp-content/uploads/2013/03/Cherry-Tomatoes.jpg') no-repeat scroll center bottom #244714 !important;">
<?php
        }else{
?>
            <div id="page-bg" style="background: url('http://xyz.com/wp-content/uploads/2013/03/Cherry-Tomatoes.jpg') no-repeat scroll center bottom #244714 !important;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:49:22.053

你可以做几件事来整理这段代码。理想情况下，一开始的代码将进入控制器，然后您的渲染将主要是带有一些 PHP 片段的 HTML。

```
<?php
// This would be best in a controller class, but for now we'll enclose
// it in its own little section
$page = get_page_by_title( 'CSA' );
$page1 = get_page_by_title( 'Co-op Members' );
$page2 = get_page_by_title( 'Recipes' );
$page3 = get_page_by_title( 'FAQs' );
$page4 = get_page_by_title( 'Contact Us' );
$page5 = get_page_by_title( 'Home' );
?>

<!-- This is your 'view layer', so keep your PHP small and concise -->
<?php if ( is_page($page->ID) ): ?>
    <div
        id="page-bg"
        class="bgnd"
        style="background-image: url('<?php bloginfo('template_directory') ?>/images/green/page-top5.jpg');"
    >
<?php elseif ( is_page($page1->ID) ): ?>
    <div
        id="page-bg"
        class="bgnd"
        style="background-image: url('<?php bloginfo('template_directory') ?>/images/green/page-top2.jpg');"
    >
<?php elseif ... ?> 
```

因此，每个 PHP`if`或`elseif`（或实际上任何语句）只占用一行，从而更容易查看您的缩进是否匹配。请注意，虽然循环/构造的大括号形式更适合“正确的”PHP，其中 PHP 在视图层中使用，但我更喜欢冒号形式，因为它更紧凑，并且末端描述比扫描阅读更容易一个右大括号。

另外，我已将您的内联`background`规则切换为`background-image`，并建议您设置“bgnd”类：

```
.bgnd { background: no-repeat scroll center bottom #244714 !important; } 
```

这将使事情变得更加干燥（不要重复自己），从而节省您的时间和精力。

最后，我缩进了`div`s，所以它们的属性是每行一个。这是一个口味问题，但 imo 它更具可读性，并且作为 HTML 仍然完全有效。它还有一个好处是你需要在你的 IDE 中做更少/没有水平滚动，这可以让调试时更轻松一些。

# python - if else 语句未正确遵循 elif

> ID：15348879
> 
> 赞同：0
> 
> 时间：2013-03-11T21:21:06.833
> 
> 标签：python, loops, if-statement

我的任务是制作一个接受用户输入（温度）的程序，如果温度是摄氏温度，则转换为华氏温度，反之亦然。

问题是，当您键入类似 35:C 的内容时，即使 myscale 是 C 我的代码，程序也会使用 if myscale == "F" 而不是 elif myscale == "C"：

```
mytemp = 0.0
while mytemp != "quit":
    info = raw_input("Please enter a temperature and a scale. For example - 75:F " \
                       "for 75 degrees farenheit or 63:C for 63 degrees celcius "\
                       "celcious. ").split(":")
    mytemp = info[0]
    myscale = str(info[1])

    if mytemp == "quit":
        "You have entered quit: "
    else:
        mytemp = float(mytemp)
        scale = myscale
        if myscale == "f" or "F":
            newtemp = round((5.0/9.0*(mytemp-32)),3)
            print "\n",mytemp,"degrees in farenheit is equal to",newtemp,"degrees in 
            celcius. \n" 
        elif: myscale == "c" or "C":
            newtemp = 9.0/5.0*mytemp+32
            print "\n",mytemp,"degrees in celcius is equal to",newtemp,"degrees in 
            farenheit. \n"
        else:
            print "There seems to have been an error; remember to place a colon (:) 
                  between "\
                  "The degrees and the letter representing the scale enter code here. "
raw_input("Press enter to exit") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:22:08.800

以下：

```
 if myscale == "f" or "F": 
```

应该读：

```
 if myscale == "f" or myscale == "F": 
```

或者

```
 if myscale in ("f", "F"): 
```

或（如果您的 Python 足够新以支持集合文字）：

```
 if myscale in {"f", "F"}: 
```

这同样适用于

```
 elif: myscale == "c" or "C": 
```

此外，. 后面还有一个多余的冒号`elif`。

您现在拥有的在语法上是有效的，但与预期的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:23:59.870

这是你的问题：

```
elif: myscale == "c" or "C": 
```

注意`:`后面的`elif`

您还应该`in`按照其他答案的说明使用。

# yii - 带有希腊文件名的 Elfinder

> ID：15348881
> 
> 赞同：0
> 
> 时间：2013-03-11T21:21:13.047
> 
> 标签：yii, yii-extensions, elfinder

我正在尝试在我的 Yii 应用程序中使用 elFinder。当我将带有希腊名称的文件上传到服务器时，就会出现问题。当我转到存储文件的物理目录时，我看到这些文件在 elFilnder 浏览器上正确呈现，但我看到带有“中文”符号的文件名。所以基本上 elFinder 会重命名这些文件，我根本不需要。另外，我注意到如果我手动上传带有希腊名称的文件，elFinder 根本不会呈现它们。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:53:51.487

您应该查看保存文件的控制器。如果您在扩展文件夹中提取了 elFilnder，您将查看文件并粘贴与保存文件相关的控制器代码。

# asp.net - 关于 ASP.NET 页面生命周期，以及如何在等待回发结果时添加 throbber

> ID：15348883
> 
> 赞同：1
> 
> 时间：2013-03-11T21:21:18.067
> 
> 标签：asp.net, .net

我似乎无法理解 ASP.NET 页面生命周期及其实际影响。我想要做的是在用户单击提交按钮后加载一个 throbber 图像，然后在使用数据网格重新加载页面后让该 throbber 消失。有人会尝试启发我吗？蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:54:54.557

当提交显示图像的页面时，您可以使用`RegisterOnSubmitStatement`运行一些 javascript 函数。

```
var script = "document.getElementById('MyImage').style.display = 'block'";
Page.ClientScript.RegisterOnSubmitStatement(GetType(), "ShowImage", script); 
```

要使用 IE（已知错误）在回发期间制作动画 gif 动画，请执行以下操作（使用 jQuery）：

```
var src = $theImge.attr("src");
$theImge.attr("src", "test.png"); //can be anything
$theImge.attr("src", src);
$theImge.hide();
$theImge.show(); 
```

# xcode4.3 - 来自 xcode 的 SCons autoconf 测试

> ID：15348892
> 
> 赞同：0
> 
> 时间：2013-03-11T21:21:42.867
> 
> 标签：xcode4.3, scons

我正在尝试从 xcode 4 中启动 scons，以构建一个外部（即最初不是在 xcode 中创建的）c++ 项目。

按照文档中的建议，我创建了一个带有外部构建系统的新项目。

除了 scons 中内置的 autoconf 功能外，一切正常 - 它无法在 /usr/lib 中找到库。从 shell（即在 xcode 之外）调用 scons 当然可以。

由于 SCons 允许缓存配置测试结果，我还第一次尝试从 shell 运行 scons，希望 xcode 能够获取测试结果，从而避免执行它们。它不起作用 - 当从 shell 或从 xcode 调用时，显然 scons 正在使用不同的缓存......

有什么建议可以识别问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:15:19.377

Ups，在更仔细地查看了 scons 日志后找到了解决方案。

问题是 xcode 传递给链接命令的以下参数：

-syslibroot /Applications/Programming/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk

可以通过删除 SDKROOT 变量在 GUI 中禁用它...

希望它可以帮助某人马可

# php - IF 语句未在 php 中验证

> ID：15348896
> 
> 赞同：0
> 
> 时间：2013-03-11T21:21:48.440
> 
> 标签：php, if-statement

我在一页上有这个 php 脚本，它从输入字段中获取变量：

```
if($fname <> "" and $lname <> "" and $ydept <> "") {
    if ($percentage >= "85") {
        mail ($myEmail, $mailSubject, $msgBody, $header);
        mail ($userEmail, $sentMailSubject, $sentMailBody, $sentHeader);
        $filename = "blah.txt"; #Must CHMOD to 666, set folder to 777
        $text = "\n" . str_pad($fname, 25) . "" . str_pad($lname, 25) . "" . str_pad($empID, 15) . "" . str_pad($doh, 15) . "";

        $fp = fopen ($filename, "a"); # a = append to the file. w = write to the file (create new if doesn't exist)
        if ($fp) {
            fwrite ($fp, $text);
            fclose ($fp);
            #echo ("File written");
        }
        else {
            #echo ("File was not written");
        }
        header ("Location: yes.php?fname=$fname&type=$type");
    }
    else {
        header ("Location: didnotpass.php?percent=$percentage&type=$type");
    }
}
else {
    header ("Location: empty.php?type=$type");
} 
```

didnotpass.php 脚本是：

```
<?php
if (isset($_GET['type']) && isset($_GET['percentage'])) {
    $percent = trim(strip_tags(stripslashes($_GET['percent'])));
    $type = trim(strip_tags(stripslashes($_GET['type'])));

    if ($type == "Clinical") {
?>
The Certificate of Attendance has been completed yet, but your score of $percent% is less then the passing score of 85%.<br><br>
Please <b><a href="C.php">Click Here</a></b> to retake the certification.
<?php
    }
    else {
?>
The Certificate of Attendance has been completed yet, but your score of $percent% is less then the passing score of 85%.<br><br>
Please <b><a href="nonC.php">Click Here</a></b> to retake the certification.
<?php
    }
}
else {
?>
Please <b><a href="start.php">Go To Certification Homepage</a></b> to start the certification.
<?php
}
?> 
```

我遇到的问题是分数是否为 85%，它转到最后一个 else 语句：

```
Please <b><a href="start.php">Go To Certification Homepage</a></b> to start the certification. 
```

我的 IF 语句是否正确：

```
if ($percentage >= "85") 
```

我认为它工作正常，因为它正在路由到正确的页面，但 didnotpass.php 中的 IF/ELSE 语句工作不正常。任何人都可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:24:53.123

```
if ($percentage >= "85") 
```

应该：

```
if ($percentage >= 85) 
```

不能在数字周围加上引号，然后期望它评估为 >=。它会将其视为字符串。您可能还需要将其解析为整数，具体取决于它的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:27:44.663

我认为正在发生的事情是查询字符串参数`percent`不一致：

```
if (isset($_GET['type']) && isset($_GET['percentage'])) {
    $percent = trim(strip_tags(stripslashes($_GET['percent'])));
    $type = trim(strip_tags(stripslashes($_GET['type']))); 
```

它应该是

```
if (isset($_GET['type']) && isset($_GET['percent'])) {
    $percent = trim(strip_tags(stripslashes($_GET['percent'])));
    $type = trim(strip_tags(stripslashes($_GET['type']))); 
```

if 语句引用`$_GET['percentage']`而不是`$_GET['percent']`

# javascript - 为什么我设置的超时不起作用？

> ID：15348897
> 
> 赞同：0
> 
> 时间：2013-03-11T21:21:50.377
> 
> 标签：javascript, jquery, html, css

我有一个定时器功能不起作用的问题，谁能指出为什么会这样？我确定这很简单，但不确定它是什么。

```
<a class="item"></a>
<div class="item"></div>
<div class="item"></div>
<div class="item"></div>
<div class="item"></div>

.item {width:50px; height:50px; background:red; margin:10px; float:left; opacity:1; }

$("document").ready(function() {
    var tooltipTimeout;

    $(".item").hover(function () {
    tooltipTimeout = setTimeout( $(".item").not(this).stop().fadeTo("slow", 0.5), 2000);
    },
    function () {
        $(".item").stop().fadeTo("slow", 1);
    });

}); 
```

谢谢。

见[http://jsfiddle.net/Jrand/wqJMt/1/](http://jsfiddle.net/Jrand/wqJMt/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:23:09.907

您需要将要在匿名函数中执行的 JS 包装起来。此外，`setTimeout()`将更改（[此处](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#The_.22this.22_problem)`this`的解释）的值，因此请确保在函数中分配一个新变量，并将其用作参数：`this``hover()``.not()`

```
$(".item").hover(function () {
  var item = this;
  tooltipTimeout = setTimeout(function() { $(".item").not(item).stop().fadeTo("slow", 0.5) }, 2000);
},
function () {
    $(".item").stop().fadeTo("slow", 1);
}); 
```

见[演示](http://jsfiddle.net/zaknotzak/wqJMt/5/)。

# javascript - 如何使用此 javascript 显示 youtube 视频 ID

> ID：15348898
> 
> 赞同：0
> 
> 时间：2013-03-11T21:21:52.627
> 
> 标签：javascript, youtube

我正在使用[这个 javascript](http://www.yvoschaap.com/ytpage/ytembed.js)在我的页面上显示 youtube 搜索结果。

这是代码中显示标题、描述等的部分......

```
li.innerHTML = '<table cellspacing="0" cellpadding="0" border="0">
<tr><td valign="top" rowspan="2"></td>
<td valign="top"><h3>'+entry.title+'</h3><span>'+this.formatDescription(entry.description)+'</span></td>
<td valign="top" style="width: 150px" class="meta">
<div>From: <a href="http://www.youtube.com/profile?user='+entry.uploader+'">'+entry.uploader+'</a></div><div>Views: '+entry.viewCount+'</div><div>'+this.formatRating(entry.rating,entry.ratingCount)+' ratings</div>Time: '+this.formatDuration(entry.duration)+'</td></tr></table>'; 
```

如何从 javascript 添加`'+ytPlayerParams.videoId+'`或`'+data.id+'`其他内容，以便显示 youtube 视频 ID`http://www.youtube.com/embed/...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T19:34:36.270

```
li.innerHTML = '<table cellspacing="0" cellpadding="0" border="0">
  <tr><td valign="top" rowspan="2"></td>
    <td valign="top">
       <h3>'+entry.title+'</h3
       <span>'+this.formatDescription(entry.description)+'</span>
    </td>
    <td valign="top" style="width: 150px" class="meta">
      <div>From: <a href="http://www.youtube.com/profile?user='+entry.uploader+'">'+entry.uploader+'</a></div>
      <div>ID: '+entry.id+'</div><div>Views: '+entry.viewCount+'</div><div>'+this.formatRating(entry.rating,entry.ratingCount)+' ratings</div>
      Time: '+this.formatDuration(entry.duration)+'
      </td>
    </tr>
  </table>'; 
```

我为 id 添加了一个 div，它将提供唯一的视频 id

# objective-c - 100000 个对象：如何在 NSTextField 中快速自动完成

> ID：15348904
> 
> 赞同：2
> 
> 时间：2013-03-11T21:22:07.167
> 
> 标签：objective-c, performance, cocoa, autocomplete, nstextfield

我需要自动完成用户在 NSTextField 中的输入，并使用 NSArray 检查是否存在匹配项，但 NSArray 大约有 100,000 个对象，因此匹配需要相当长的时间。

我实现此功能的方式或多或少与此处建议的方式相同：

[在文本字段中使用 twitter 用户名自动完成（可可）](https://stackoverflow.com/questions/7637860/autocomplete-with-twitter-usernames-in-text-field-cocoa)

有没有办法让事情变得更快？有谁知道更好的方法？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T00:17:36.877

我有一个专门为[NDTrie](http://github.com/nathanday/ndtrie)（和[NDMutableTrie](http://github.com/nathanday/ndtrie)）编写的类，它基本上是一个树结构，其中节点的键是其所有子节点开头的字符串，它可以搜索所有以 'cat' 开头的单词示例很快，因为您只需要找到键“cat”的节点并枚举它及其所有子节点。除了握住绳子，它还可以握住任何物体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:09:02.170

对此[答案](https://stackoverflow.com/a/14960700/893113)的评论链接到[PJTernarySearchTree](https://github.com/peakji/PJTernarySearchTree)的 Github 存储库。你可以试试看。

# php - PHP使用正则表达式将大写文件扩展名转换为小写

> ID：15348906
> 
> 赞同：1
> 
> 时间：2013-03-11T21:22:09.923
> 
> 标签：php, regex

我正在尝试实现以下转换：

IM22_htp.JPG -> IM22_htp.jpg

到目前为止，我已经尝试了以下方法，但它似乎不起作用：

```
$string = "IM22_htp.JPG";
$pattern = '/(.+) \.(\w+)/i';
$replacement = '${1}\. strtolower($3)';
echo preg_replace($pattern, $replacement, $string); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T21:30:15.120

使用正则表达式：

```
$string = "IM22_htp.JPG";
$new_string = preg_replace_callback('/\.\w+$/', function($m){
   return strtolower($m[0]);
}, $string);
echo $new_string; 
```

使用[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)：

```
$string = "IM22_htp.JPG";
$new_string = pathinfo($string, PATHINFO_FILENAME) . '.' . strtolower(pathinfo($string, PATHINFO_EXTENSION));
echo $new_string; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T21:26:54.677

如果您使用[pathinfo](http://php.net/manual/en/function.pathinfo.php)仅提取扩展名，将其小写，然后将其与文件名连接起来，会更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T21:30:05.610

```
echo preg_replace_callback('/\.(\w+)/',
         create_function('$x','return strtolower($x[0]);'),
         $string); 
```

# shell - 将 sar 命令结果输出到 csv 文件

> ID：15348914
> 
> 赞同：9
> 
> 时间：2013-03-11T21:22:29.517
> 
> 标签：shell, unix, sar

我对 shell 编程比较陌生，想知道是否有一种简单的方法可以将`sar`命令的结果输出到`csv`文件中。Using`sar > file1.csv`可以完成这项工作，但它的格式不正确。所有数据都存在于一列中。我试过这个，但情况更糟

```
sar -d -u -w 1 1 | grep -v Average | grep -v Linux | tr -s ' ' ',' | tr -d '\n' > file1.csv 
```

谁能给我正确的脚本来将`sar`命令的输出存储在`csv`文件中。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-06-13T13:24:29.163

我知道这有点旧，但您应该或可以使用`sadf -dh -- <sar command>`. 它是[sysstat](http://sebastien.godard.pagesperso-orange.fr/man_sadf.html)包的一部分，它将为您提供 csv 输出，而无需任何`awk`正则表达式。实际上，最新版本也能够将信息输出到 JSON 和 XML。你可以选择你的毒药:)

简单的例子：

```
$ sadf -dh -- -p
localhost.localdomain;-1;2014-06-13 08:47:02 UTC;LINUX-RESTART
# hostname;interval;timestamp;CPU;%user;%nice;%system;%iowait;%steal;%idle[...]
localhost.localdomain;600;2014-06-13 09:00:01 UTC;-1;8.80;0.01;1.65;9.51;0.00;80.03
localhost.localdomain;600;2014-06-13 09:10:01 UTC;-1;3.03;0.71;2.41;0.81;0.00;93.05 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T22:14:21.567

```
sar -d -u -w 1 1 | grep -v Average | grep -v Linux |awk '{if ($0 ~ /[0-9]/) { print $1","$2","$4","$5","$6; }  }'

22:14:04,CPU,%nice,%system,%iowait
22:14:05,all,0.00,8.53,0.00
22:14:04,proc/s,,,
22:14:05,0.00,,,
22:14:04,DEV,rd_sec/s,wr_sec/s,avgrq-sz
22:14:05,dev8-0,0.00,0.00,0.00 
```

上面的输出享受

# sitemap - 动态页面的站点地图问题

> ID：15348916
> 
> 赞同：2
> 
> 时间：2013-03-11T21:22:34.290
> 
> 标签：sitemap

我创建了一个网站，我想创建一个站点地图供 Google 抓取它。

该网站使用以下 url 格式从基于 course_id 的课程数据库描述中检索：

```
 http://formationmtl.com/coursedescription.php?course_id=1
  http://formationmtl.com/coursedescription.php?course_id=2
  etc.. 
```

现在我不能保证某个 course_id 存在，因为它可能会被删除。

我在网上使用了第 3 方产品来生成我的站点地图，它给了我这个：

```
 <?xml version="1.0" encoding="UTF-8" ?> 
- <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
- <!--  created with Free Online Sitemap Generator www.xml-sitemaps.com 
  --> 
- <url>
  <loc>http://formationmtl.com/</loc> 
  </url>
- <url>
  <loc>http://formationmtl.com/index.php</loc> 
etc... 
```

如何修改它以合并我的动态页面？

这可能是一个愚蠢的问题，但我对此很陌生。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:53:36.963

这个想法是制作文件sitemap.php，但是，当php运行时，它实际上输出了一个正确的xml站点地图（使用echo等），所以你正在做的是输出一个xml文件，只是通过php呈现。

只需确保 xml 文件的第一行被正确转义，例如：

```
<?php    

  echo '<?xml version="1.0" encoding="UTF-8" ?>';

  // RUN Database / PHP stuff Here
  // Output properly formatted XML using echo or something to that effect

?> 
```

这就是创建 php / xml 站点地图背后的设计逻辑。然后，您可以向 Google 提交指向您的站点地图的链接：即[http://www.example.com/sitemap.php](http://www.example.com/sitemap.php)

当 google-bot 抓取您的站点地图时，它将运行 php，它将输出正确的 xml 站点地图（只要您没有忘记转义 xml 的第一行）。

# css - 弯曲的阴影随着背景色消失

> ID：15348917
> 
> 赞同：0
> 
> 时间：2013-03-11T21:22:39.450
> 
> 标签：css

我想要一个曲线水平阴影，它可以工作，但背景颜色会影响阴影

我有这个html：

```
<div class="dcontainer">
  <div class="dshadow curva curva-h">
    myshadow
  </div>
</div> 
```

这个CSS：

```
.dcontainer {
    /*background-color: #f6f6f6;*/
    height: 140px;
}
.dshadow {
position:relative;
float:left;
width:40%;
padding:1em;
margin:2em 10px 4em;
background:#fff;
box-shadow:0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
}

.dshadow:before,
.dshadow:after {
content:"";
position:absolute;
z-index:-2;
}

.curva:before {
top:21px;
bottom:10px;
left:0;
right:50%;
box-shadow:0 0 15px rgba(0,0,0,0.6);
border-radius:10px / 100px;
}

.curva-h:before {
top:50%;
bottom:0;
left:10px;
right:10px;
border-radius:100px / 10px;
} 
```

如果我取消注释背景颜色阴影“曲线”消失，会发生什么？？？我不明白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:30:32.943

您必须调整`z-index`容器的 ，使其低于阴影 -[**演示**](http://jsfiddle.net/Fkgmj/)

```
.dcontainer {
    background-color: #f6f6f6;
    height: 140px;
    position: relative;
    z-index: -5;
} 
```

# xcode - 为什么这些 Xcode 搜索结果是灰色的？

> ID：15348918
> 
> 赞同：0
> 
> 时间：2013-03-11T21:22:40.880
> 
> 标签：xcode

![代码](../Images/ffc1ca6f147feae87fd33b258da1799e.png)

我指的是前两个和后两个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:28:21.580

只是在 Xcode 中乱七八糟，看起来那些正在显示不可执行的结果，如评论或 plist 中的结果。

# google-chrome - 为什么工具栏图标从 Google Chrome 开发者工具中消失了？

> ID：15348919
> 
> 赞同：3
> 
> 时间：2013-03-11T21:22:41.237
> 
> 标签：google-chrome, developer-tools

我一直在使用 Google Chrome 开发者工具。突然，工具栏图标消失了。它们曾经在 , 等...之上`Elements`...`Resources`现在它们消失了。我想这没关系，因为我一开始就不需要它们。但是，有没有办法重新打开它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T21:22:41.237

前几天我也发生了这种情况。我花了一段时间，但我终于找到了可以重新启用它们的地方：只需转到开发人员工具设置。顺便说一句，那里还有很多其他很酷的东西。

要调出设置（我使用的是 25 版），请单击开发者工具窗口右下角的齿轮图标。在左侧，单击`General`。在 下`Appearance`，您会找到一个标记为 的复选框`Show toolbar icons`。

`Shortcuts`顺便说一句，如果您喜欢使用键盘导航，请务必查看该区域。

# javascript - javascript验证是数字还是只有字母

> ID：15348924
> 
> 赞同：-1
> 
> 时间：2013-03-11T21:22:55.157
> 
> 标签：javascript, verification

我知道还有其他与此类似的问题，但无论如何我都会问，我正在尝试验证邮政编码只输入了数字，而姓名只输入了字母。我尝试了一些 isNaN，但那不起作用。这是我试图验证的代码。

```
if(first_name.length < 2){
    alert("Please enter your first name.");
    return false;
}else if(zip=="" || zip.length < 5 ){
    alert("Please enter a valid zip code.");
    return false; 
```

我尝试过这样的事情

```
}else if(zip=="" || zip.length < 5 || zip == isNaN ){
    alert("Please enter a valid zip code.");
    return false; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:24:53.373

简单的解决方案：正则表达式

测试 5 位数字

```
/^\d{5}$/.test(your_string); 
```

测试是否只有字符（至少 3 个）：

alert(/^[a-zA-Z]{3,}$/.test(your_string));

玩它：

[http://jsfiddle.net/BAKpY/2/](http://jsfiddle.net/BAKpY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:36:00.987

如果您想要一个仅由数字组成的有效邮政编码，您需要更多的东西来确保它是有效的。

```
var ext = null;
ext = $("#inputId").value.match(/a-zA-Z/)[1];
if(ext != null){
   alert("Please enter a valid zip code.");
} 
```

# facebook - 我可以帮助用户在 Facebook 上发帖（并知道他们是否发帖）而无需应用权限的麻烦吗？

> ID：15348932
> 
> 赞同：0
> 
> 时间：2013-03-11T21:23:31.497
> 
> 标签：facebook, facebook-graph-api, facebook-wall

我想完成两件事：

1.  我想建议我网站上的用户在他们的 Facebook 墙上分享一个链接。

2.  如果用户确实分享了链接，我想知道（这样我就可以在我的网站上为他们提供不同的体验）。

问题是，我不想让我的用户批准应用程序来完成这项工作。这对我的用例来说太麻烦了。

因此，当我网站上的用户点击我的“在 Facebook 上分享”链接时，我希望他们看到：

![在此处输入图像描述](../Images/53f3edbe244e803cd1f32ac26af1d553.png)

不是这个：

[![在此处输入图像描述](../Images/e5766dbc98993a5e57eb98eda8dac38b.png)](https://i.stack.imgur.com/FzOUA.png)

我的想法可能吗？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:35:35.610

> [来自评论]“提要对话框”的文档建议该功能“提示用户将单个故事发布到个人资料的提要。这不需要任何扩展权限。” 我只是不清楚该功能是否仅在用户已授予权限的应用程序中可用...

Feed 对话框需要一个应用程序 ID——要么用于初始化 JS SDK，要么在通过 URL 调用对话框时作为 GET 参数传递。

但是用户不必*为*应用程序授予任何特殊权限，甚至根本不需要连接到它。

（如果要将 Feed 对话框用于大量垃圾邮件，则可能需要将其与应用程序 ID 关联起来，以阻止应用程序和/或开发人员帐户。但由于该对话框在没有用户参与的情况下无法工作，因此风险是非常低。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:59:43.710

您绝对可以使用 Facebook 的[Web 插件](https://developers.facebook.com/docs/guides/web/#plugins)来做到这一点。

您可以阅读链接中的文档以获取更多信息，但我认为您正在寻找的功能可以通过 Like & Share 插件（您可以[在此链接](https://developers.facebook.com/docs/reference/plugins/like/)中找到）获得。它添加了您使用 URL 和 Javascript 回调设置的“喜欢”和“分享”按钮。一旦用户喜欢或分享您的页面，您的 Javascript 回调就会触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:26:41.453

不，根据 Facebook 政策，这是不可能的。如果没有用户的接受信息，他们将不允许在用户个人资料中发布任何帖子。

# c# - vb/c#十进制内部格式

> ID：15348938
> 
> 赞同：5
> 
> 时间：2013-03-11T21:23:52.407
> 
> 标签：c#, .net, vb.net, types

VB 或 C# 中“十进制”值的内部格式是什么？

我不知道这对我立即做的任何事情都很重要，但这是很高兴知道的事情之一。就像，知道有多少位以及如何存储负数可能意味着当你看到一个负数出现在你期望一个正数的地方时，你可以立即想，“啊，有一个溢出”，而不是被深深的黑暗谜团所迷惑.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T21:26:52.713

[文档](http://msdn.microsoft.com/en-us/library/system.decimal.aspx#remarksToggle)以完整的彩色技术提供了您问题的答案：

> Decimal 值类型表示从正数 79,228,162,514,264,337,593,543,950,335 到负数 79,228,162,514,264,337,593,543,950,335 的十进制数。Decimal 值类型适用于需要大量有效整数和小数位数且无舍入错误的财务计算。Decimal 类型不会消除舍入的需要。相反，它最大限度地减少了由于四舍五入引起的错误。
> 
> 十进制数是一个浮点值，它由一个符号、一个数值中的每个数字的范围从 0 到 9 以及一个比例因子组成，该比例因子表示分隔整数和小数部分的浮点小数点的位置的数值。
> 
> Decimal 值的二进制表示由 1 位符号、96 位整数和用于划分 96 位整数并指定它的哪一部分是小数部分的比例因子组成。比例因子是隐含的数字 10，指数范围从 0 到 28。因此，十进制值的二进制表示形式为 ((-2 ^(96)到 2 ^(96) ) / 10 ^((0 到 28)) ) ，其中-2 ^(96) -1 等于MinValue，2 ^(96) -1 等于MaxValue。有关 Decimal 值的二进制表示形式和示例的详细信息，请参阅[Decimal(Int32[])](http://msdn.microsoft.com/en-us/library/t1de0ya1.aspx)构造函数和[GetBits](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)方法。
> 
> 缩放因子还保留 Decimal 数字中的任何尾随零。尾随零不会影响算术或比较运算中的 Decimal 数的值。但是，如果应用了适当的格式字符串，则 ToString 方法可以显示尾随零。

以及二进制表示，如文档中所述[`GetBits`](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)：

> Decimal 数的二进制表示由一个 1 位符号、一个 96 位整数和一个比例因子组成，该比例因子用于划分整数并指定它的哪一部分是小数部分。比例因子隐含地是数字 10，升为从 0 到 28 的指数。
> 
> 返回值是一个 32 位有符号整数的四元素数组。
> 
> 返回数组的第一个、第二个和第三个元素包含 96 位整数的低、中和高 32 位。
> 
> 返回数组的第四个元素包含比例因子和符号。它由以下部分组成：
> 
> 位 0 到 15（低位字）未使用且必须为零。
> 
> 位 16 到 23 必须包含 0 到 28 之间的指数，表示整数除以 10 的幂。
> 
> 位 24 到 30 未使用，必须为零。
> 
> 第 31 位包含符号：0 表示正，1 表示负。
> 
> 请注意，位表示区分负零和正零。这些值在所有操作中都被视为相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:27:16.693

c# 和 VB.NET 都`decimal`引用了`System.Decimal`，这是有据可查的：[System.Decimal](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)

[十进制（C# 参考）](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)

> decimal 关键字表示 128 位数据类型。与浮点类型相比，十进制类型的精度更高，范围更小，适用于金融和货币计算。小数类型的大致范围和精度如下表所示。
> 
> 范围：±1.0 × 10−28 至 ±7.9 × 1028 精度：28-29 位有效数字

[十进制数据类型 (Visual Basic)](http://msdn.microsoft.com/en-us/library/xtba3z33%28v=vs.110%29.aspx)

> 保存有符号的 128 位（16 字节）值，表示以 10 的可变幂缩放的 96 位（12 字节）整数。缩放因子指定小数点右侧的位数；它的范围从 0 到 28。如果刻度为 0（无小数位），最大可能值为 +/-79,228,162,514,264,337,593,543,950,335 (+/-7.9228162514264337593543950335E+28)。小数点后 28 位，最大值为 +/-7.9228162514264337593543950335，最小的非零值为 +/-0.0000000000000000000000000001 (+/-1E-28)。

# android - android ListActivity 按钮

> ID：15348939
> 
> 赞同：0
> 
> 时间：2013-03-11T21:23:57.213
> 
> 标签：android, listview, android-listview

我有一个似乎超出了我当前技能水平的 Android 开发问题。问题如下：我有一个 SQLite 数据库和一个内容提供者。简而言之，单击按钮后，我希望通过 a `ListActivity`（或可能是 a `ListView`）在屏幕上显示一些存储的项目，但我不知道该怎么做。

我阅读了相关的 stackoverflow 网页，但未能正确回答我的问题。

总结一下：

假设已经创建了一个 SQLite 数据库。

如果 SQLite 数据库不为空，则从该 SQLite 数据库中选择一些数据。

*   创建`ListActivity`包含这些选择的数据。
*   创建一个`Button`
*   点击`Button`
*   单击后，存储在数据库中的所选项目将通过`ListActivity`.

我想知道你能不能帮帮我。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:30:36.467

如果您正在寻找的只是如何更新列表视图，也许可以尝试在您的列表视图适配器上调用 notifyDataSetChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:32:26.857

数据是在 SQLite 数据库中还是在内容提供者中？两者是不同的。如果数据在内容提供者中，则使用加载器来检索数据，并将数据绑定到带有 CursorAdapter 的 ListView。请参阅[在后台加载数据](http://developer.android.com/training/load-data-background/index.html)。此外，您还想从按钮的 onClick 方法初始化加载程序（调用 initLoader()）。您可以使用 setOnClickListener() 使用匿名类以编程方式设置它，也可以在 XML 中使用 Button 的 onClick 属性进行设置。

CursorLoader 的优点是它*包括*数据观察。当支持 Cursor 的数据发生变化时，CursorLoader 会自动调用 onLoaderReset，然后调用 onCreateLoader。这在我提供的链接中有更详细的解释。

API 指南[List View](http://developer.android.com/guide/topics/ui/layout/listview.html)解释了将 ListView 绑定到 Cursor 和使用 Loader 的步骤。

注意：我总是对 ListView 和适配器感到困惑。ListView 需要*两种*布局：

1.  描述整个屏幕的布局，包括 ListView 视图对象。
2.  描述列表中每行或项目的布局的布局。

您通常使用 CursorAdapter 将 Cursor 绑定到 ListView。CursorAdapter 的默认实现假设如下：

*   光标包含一个名为“_ID”的列
*   您要显示的光标中的每一列都转到行布局中的一个视图。
*   无需中间计算或处理即可将数据从光标传输到线布局。

您不必显示光标中的所有列，但行布局中的每个视图对象只能占用一列。

# java - 如何从 XPath 中的子值节点获取父文本值？

> ID：15348940
> 
> 赞同：0
> 
> 时间：2013-03-11T21:23:58.923
> 
> 标签：java, xml, xpath

如何使用 Java XPath 从地址名称为“BILL_TO”（如果有）的`addressinformation`（在本例中**为 999123 ）获取 UUID？**

这是我的 XML：

```
 <Company>
        <Name>My Company</Name>
        <LastName>Smith</LastName>
        <FirstName>Jim</FirstName>
        <street>123 Main Street</street>
        <AddressInformation>
                <UUID>543233<UUID>
            <Address>
                <UUID>223223</UUID>
                <AddressID>
                    <AddressName>Default</AddressName>
                </AddressID>
            </Address>
        </AddressInformation>
        <AddressInformation>
                <UUID>999123<UUID>
            <Address>
                <UUID>443211</UUID>
                <AddressID>
                    <AddressName>BILL_TO</AddressName>
                </AddressID>
            </Address>
        </AddressInformation>
        <city>Mytown</city>
        <state>NY</state>
        <zip>11234</zip>
</Company> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:38:24.137

好的，首先你的 XML 格式不正确，所以我为你修复了它

```
 <Company>
    <Name>My Company</Name>
    <LastName>Smith</LastName>
    <FirstName>Jim</FirstName>
    <street>123 Main Street</street>
    <AddressInformation>
            <UUID>543233</UUID>
        <Address>
            <UUID>223223</UUID>
            <AddressID>
                <AddressName>Default</AddressName>
            </AddressID>
        </Address>
    </AddressInformation>
    <AddressInformation>
            <UUID>999123</UUID>
        <Address>
            <UUID>443211</UUID>
            <AddressID>
                <AddressName>BILL_TO</AddressName>
            </AddressID>
        </Address>
    </AddressInformation>
    <city>Mytown</city>
    <state>NY</state>
    <zip>11234</zip>
</Company> 
```

那么这是应该为您解决问题的xpath：

```
//Company/AddressInformation[Address/AddressID/AddressName='BILL_TO']/UUID 
```

# facebook - Facebook 评论计数可点击

> ID：15348944
> 
> 赞同：1
> 
> 时间：2013-03-11T21:24:07.253
> 
> 标签：facebook, wordpress, comments

我在我的 wordpress 网站上使用了一个 facebook 插件。我将下面的代码放在循环和single.php页面上以显示评论数

```
<fb:comments-count href="<?php echo get_permalink($post->ID); ?>"></fb:comments-count> Comments 
```

它显示评论的数量，但它不像普通的 WP 计数那样可点击。我怎样才能使它可点击，以便它链接到永久链接？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:45:54.710

我认为这就是你想要做的：

```
<a href="<?php echo the_permalink(); ?>">
<div class="fb-comments-count" data-href="<?php echo the_permalink(); ?>">0</div>
comments</a> 
```

注意 <div> 块

您可能还想临时添加这些共享库之一，然后检查元素并查看 javascript 以确切了解它们是如何做到的。

[https://www.addthis.com/get/sharing](https://www.addthis.com/get/sharing)

[http://sharethis.com](http://sharethis.com)

也可以看看

[如何使用 HTML5 获取 Facebook 评论计数？](https://stackoverflow.com/questions/7642631/how-to-get-facebook-comments-count-with-html5)

[<fb:comments-count> 在我的 WordPress 驱动的博客上不起作用](https://stackoverflow.com/questions/5956488/fbcomments-count-not-working-on-my-wordpress-powered-blog?rq=1)

[如何使用 HTML5 获取 Facebook 评论计数？](https://stackoverflow.com/questions/7642631/how-to-get-facebook-comments-count-with-html5)

# google-apps-script - 捕获 MailApp.sendEmail 传递失败

> ID：15348952
> 
> 赞同：1
> 
> 时间：2013-03-11T21:24:25.343
> 
> 标签：google-apps-script

我正在尝试在应用脚本中捕获电子邮件传递失败。我认为在 try catch 中围绕 MailApp.sendEmail 会像这样工作：

```
function headache(){
 Logger.log("Before Try");
  try{
    Logger.log("before sendEmail");
    MailApp.sendEmail("ThisAFake@email.address", "Ima Error", "");
    Logger.log("after sendEmail");
  }catch(err){
   Logger.log("In catch");
    MailApp.sendEmail("ThisAReal@email.address", "Ima catched Error", "");
    } 
  Logger.log("After Try");
} 
```

但这是我得到的输出：

```
Before Try
before sendEmail
after sendEmail
After Try 
```

有没有办法捕捉邮件发送失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T22:06:51.260

电子邮件发送被推迟，没有办法捕捉到这个错误。

# java - 无法在 ActionListener 中重绘

> ID：15348953
> 
> 赞同：1
> 
> 时间：2013-03-11T21:24:26.667
> 
> 标签：java, swing, actionlistener, repaint

编辑：现在它工作正常，但是当我切换到“游戏”JPanel 时，KeyListener 不起作用:(有什么办法解决这个问题吗？

我只是在编写一个 java 游戏，repaint() 方法有问题：我想从菜单进入游戏，所以我删除了菜单面板并添加了游戏面板（“Zeichnen”扩展了 JPanel）但每次我尝试重新绘制，eclipse 给了我以下错误：“对于类型 new ActionListener(){}，方法 repaint() 是未定义的”有人可以帮我吗？:(

代码：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Frame {

JFrame frame;
JPanel menu;
JButton start;
Zeichnen game;

public Frame() {

    start = new JButton("Start Game");
    menu = new JPanel();
    game = new Zeichnen();
    frame = new JFrame("Epic Game");

    start.addActionListener(new ActionListener () {
        public void actionPerformed(ActionEvent e) {

            frame.remove(menu);
            frame.add(game);
            repaint();

    }});

    frame.setVisible(true);
    frame.setSize(640,480);
    game.addKeyListener(new Listener(game));
    menu.add(start);
    frame.add(menu);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:37:05.743

建议：

*   您应该使用 CardLayout 来让容器交换组件，因为这是更改视图的最简单和最可靠的方法。在此站点上的先前问题中有许多使用此方法的示例。
*   不要使用 KeyListener 而是使用 Key Bindings，因为它们在组件焦点方面更加宽容。
*   将您的“框架”类重命名为与核心 Java 类不匹配的名称。这是一个非常混乱的名字。

例如：

```
import java.awt.event.*;
import java.awt.*;

import javax.swing.*;

public class ContentPane extends JPanel {

   public static final String MENU = "menu";
   public static final String GAME = "game";
   private static final int PREF_W = 640;
   private static final int PREF_H = 480;

   private CardLayout cardlayout = new CardLayout();
   private JPanel menu = new JPanel();
   private JButton start;
   private Zeichnen game;

   public ContentPane() {
      setLayout(cardlayout);
      start = new JButton("Start Game");
      game = new Zeichnen();

      add(menu, MENU);
      add(game, GAME);

      start.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
            cardlayout.next(ContentPane.this);
         }
      });

      menu.add(start);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("Epic Game");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new ContentPane());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

和键绑定：

```
@SuppressWarnings("serial")
class Zeichnen extends JPanel {
   private static final String DOWN = "down";

   public Zeichnen() {
      int condition = WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition);
      ActionMap actionMap = getActionMap();

      inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), DOWN);
      actionMap.put(DOWN, new AbstractAction(DOWN) {
         {
            putValue(ACTION_COMMAND_KEY, DOWN);
         }

         @Override
         public void actionPerformed(ActionEvent evt) {
            System.out.println(evt.getActionCommand());
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:28:55.457

您需要调用 game.repaint() 因为您创建的匿名类**没有**称为 repaint()的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:29:10.847

那是因为在该结构中的任何类（即`Frame`→ 匿名`ActionListener`）中都没有扩展`Component`并具有方法的`repaint`方法。

你可以让你的主`Frame`类扩展`JFrame`，或者调用`game.repaint()`. 你可能想做前者。

# algorithm - 使用 3 个数组的双向链表

> ID：15348954
> 
> 赞同：0
> 
> 时间：2013-03-11T21:24:31.763
> 
> 标签：algorithm, linked-list

令 L 为长度为 m 的双向链表，存储在数组 key、prev 和 next 中，它们的长度均为 n。假设这些数组由 ALLOCATE_OBJECT 和 FREE_OBJECT 过程管理，它们保持一个双向链接的空闲列表 F。进一步假设 n 个项目 [可以由三个数组描述，恰好 m 在列表 L 上，而其他 nm 在自由列表 F. 编写一个程序 COMPACTIFY_LIST(L,F) 移动 L 中的项目，使它们占据数组位置 1,2,...,m 并调整所有数组中的索引值，以便 L 列出保持相同的顺序，并且 F 列表包含与以前相同数量的元素，现在占据数组中的位置 m+1、m+1、..、n。

我只能想到一个保留两个指针的 O(n) 程序。我从数组键开头的两个指针开始。Pointer1 查找第一个可用的空白空间，然后 pointer2 查找该位置之后的数组的第一个索引，该索引包含链表的一个元素。然后将这个元素移动到pointer1所指向的位置，然后pointer1寻找下一个空白处继续。但是如果我没记错的话，这个过程将花费 O(n) 时间。我想不出一个 O(m) 算法。

PS 是的，这是作业。但我被困住了，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:31:46.863

将 L 的每个元素 [i] 放置在基本数组 A 的位置 [i] 就足够了。通读 L 并将找到的每个元素与已经在 A 中占据其指定位置的任何元素交换。这显然有 O(m)复杂。

# ant - 在后台运行 Ant 目标而不使用 spawn=true

> ID：15348960
> 
> 赞同：4
> 
> 时间：2013-03-11T21:24:52.963
> 
> 标签：ant, fork, spawn

我想在后台启动一个服务器，返回并执行一些其他目标，然后在 Ant 执行完所有目标时停止服务器。

我提出了以下两个解决方案，但它们都阻止 Ant 执行后续目标。

由于我希望进程最终死掉，我不想使用 spawn="true"。还有其他解决方案吗？

```
<target name="Start_Selenium_Server">
    <java dir="lib" jar="lib/selenium-server-standalone-2.28.0.jar" fork="true">
        <arg line="-singleWindow -userExtensions user-extensions.js"/>
    </java>
</target>   

<target name="Start_Selenium_Server">
    <exec dir="lib" executable="java" newenvironment="true" output="./log/StartSeleniumServer.log">
        <arg line="-jar selenium-server-standalone-2.28.0.jar -singleWindow -userExtensions user-extensions.js" />
    </exec>
</target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T14:42:48.280

使用并行任务和守护进程嵌套元素包装调用

```
<target name="Start_Selenium_Server">
    <parallel> 
        <daemons>
            <java dir="lib" jar="lib/selenium-server-standalone-2.28.0.jar" fork="true">
               <arg line="-singleWindow -userExtensions user-extensions.js"/>
            </java>
        </daemons>
 <parallel> 
</target> 
```

# function - 返回给定日期前 n 天的函数

> ID：15348975
> 
> 赞同：1
> 
> 时间：2013-03-11T21:26:10.990
> 
> 标签：function, recursion, functional-programming, ocaml

所以我正在寻找一个函数，它需要一个 int 和一天（下面是我的一天类型）并返回给定日期前 n 天的一天。

我将类型日定义为

```
type day = Sun | Mon | Tues | Wed | Thurs | Fri | Sat;; 
```

以及第二天返回的函数：

```
let next (d:day) : day =
    match d with
  Mon -> Tues;
 | Tues -> Wed;
 | Wed -> Thurs;
 | Thurs -> Fri;
 | Fri -> Sat;
 | Sat -> Sun;
 | Sun -> Mon;
;; 
```

我正在寻找如上所述构建一个函数，我认为它需要对 next 进行递归调用以不断增加这一天，直到它提前 n 天，但我完全不知道如何在 OCaml 中定义它。我试图定义一些东西，但到目前为止只创建了一个与下一个功能相同的函数，例如：

```
let rec ndays (n:int) (d:day) : day =
  if n=0 then next d else ndays (pred n) d;; 
```

我觉得这很接近，但众所周知，接近只有马蹄铁和手榴弹才算。有人对我如何进行有任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:40:13.970

首先，您的代码中的 f7 是什么。事实上，fn 符号应该是什么意思？

如果我理解正确，您正在寻找这样的功能：

```
let rec next_n d = function
  | 0 -> d
  | n -> next_n (next d) (pred n)
# next_n : day -> int -> day 
```

# assembly - MIPS 汇编中的 XOR 使用

> ID：15348977
> 
> 赞同：-1
> 
> 时间：2013-03-11T21:26:12.887
> 
> 标签：assembly, mips, xor

好的，我很确定我已经用完了所有可能的 XOR 变体来用 $s1 交换 $s0，但是，我仍然无法让它工作！这是 MIPS 程序集，我正在使用 MARS。请问有人可以给我一个解决方案吗？

您将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:33:03.737

你试过了吗

```
xor $s0, $s0, $s1
xor $s1, $s0, $s1
xor $s0, $s0, $s1 
```

# windows - 带有引用符号链接的变量的脚本，但我需要移动/重命名源文件

> ID：15348979
> 
> 赞同：0
> 
> 时间：2013-03-11T21:26:19.913
> 
> 标签：windows, command-line, batch-file

我们正在尝试设计一个 Windows 命令行脚本，当脚本在转码作业结束时由应用程序触发时，它将移动和重命名源文件。

脚本的第一部分是移动源文件：

```
MOVE /Y %1 Z:\Target-Directory 
```

该`%1`变量引用监视文件夹中的源文件。
变量的 %source% 信息由主机应用程序（Carbon Coder）提供。

问题 - 这些监视文件夹仅包含符号链接，而不是完整文件。完整的源文件位于另一个卷上。

因此，正如您可能猜到的那样，当脚本执行时，它会移动符号链接而不是实际源。

将监视文件夹更改为实际源文件所在的卷不是一种选择。也不会将源文件复制到监视文件夹的当前位置。我们唯一的选择是在 watch 文件夹中创建一个指向源媒体的符号链接。

考虑到这一点，有没有办法设计一个脚本来使用变量并知道移动实际的源文件，而不是符号链接？

谢谢。

* * *

编辑：

看起来该`dir`命令不会产生这些文件的源位置信息。

```
 Volume in drive K is CarbonCoder-Local
 Volume Serial Number is B0A3-97E8

 Directory of K:\CarbonCoder_WatchFolders\ProResHQ_4Chan_NTSC

03/12/2013  09:56 AM    <DIR>          .
03/12/2013  09:56 AM    <DIR>          ..
03/12/2013  09:56 AM               853 test-01.mov.lnk
03/12/2013  09:56 AM               853 test-02.mov.lnk
03/12/2013  09:56 AM               853 test-03.mov.lnk
03/12/2013  09:56 AM               853 test-04.mov.lnk
03/12/2013  09:56 AM               853 test-05.mov.lnk
               5 File(s)          4,265 bytes
               2 Dir(s)  9,365,513,400,320 bytes free 
```

我弄错了，这些不是符号链接，而只是 mircosoft 快捷方式文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:52:10.443

## 回答

对于批处理，使用`dir`命令来识别符号链接及其目标。

## 例子

```
C:\>mklink symlink.txt C:\Folder\File.txt
symbolic link created for symlink.txt <<===>> C:\Folder\File.txt

C:\>dir Folder
 Volume in drive C is OSDisk
 Volume Serial Number is DC11-1111

 Directory of C:\

03/11/2013  04:45 PM    <DIR>          .
03/11/2013  04:45 PM    <DIR>          ..
03/11/2013  04:45 PM    <DIR>          Folder
03/11/2013  04:45 PM    <SYMLINK>      symlink.txt [C:\Folder\File.txt]
... 
```

## 用法

编辑添加此插图（未经测试的示例），说明如何`dir`在批处理脚本中根据需要使用命令信息。

```
setlocal EnableExtensions EnableDelayedExpansion
for /f "delims=" %%A in ('dir "%~1" ^| find /i "%~nx1"') do (
    set "Information=%%A"
    for /f "tokens=4*" %%B in ("!Information:%~nx1=!") do (
        echo %%B
    )
)
endlocal 
```

### 输出

```
[C:\Folder\File.txt] 
```

# dojo - Dojo CircularLinearGauge 和 noChange 属性

> ID：15348983
> 
> 赞同：0
> 
> 时间：2013-03-11T21:26:23.000
> 
> 标签：dojo

对于某人来说，这可能是一些容易赢得的积分...

我有以下简单的代码

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test</title>
<script type="text/javascript" src="dojo/dojo.js" data-dojo-config="async:true">    </script>
</head>
<body>
<script>
    require(["dojo/parser"] , function( parser ) {
            parser.parse();
        }
    );

</script>
<div id="livingroom" data-dojo-type="dojox/dgauges/components/default/CircularLinearGauge" noChange="true"
     value="0" minimum="-50" maximum="50" style="width:300px; height:300px; left:80px; top:0px; position: absolute;">
</div>
</body>
</html> 
```

它按预期显示了一个仪表。但是，“noChange”属性没有效果，并且可以移动仪表的指针 - 有人可以告诉我出了什么问题吗？另外，根据 API 参考，此设置的默认值为“true”，所以似乎根本没有使用它？

Dojo 1.8 安装在本地。

（我要去睡觉了，所以任何进一步的澄清都得等到早上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:41:02.440

`noChange`是 Dojo 中旧的、现已弃用的仪表框架中受支持的属性。旧的仪表框架（1.8 之前）在**dojox** /gauges中，新的在**dojox/dgauges**中。由于您使用的是新框架，因此您应该使用的属性是`interactionArea`并且它的值应该设置为`none`。有关详细信息，请参阅[dgauges 框架文档](http://livedocs.dojotoolkit.org/dojox/dgauges#setting-properties-using-markup)。

希望这可以帮助。

# pattern-matching - Jess 子串操作

> ID：15348985
> 
> 赞同：1
> 
> 时间：2013-03-11T21:26:35.983
> 
> 标签：pattern-matching, rules, jess

我使用 jess 规则引擎，我想实现子字符串匹配。具体来说，我有一个定义模板的人，我检查规则左侧的人员槽值，例如

`(defrule vsvmntud (declare (salience 1)) (person (job unemployed)) =>....`

上面的代码将匹配工作与整个字符串“失业”。我想匹配子字符串，例如，如果作业包含子字符串“em”。这可能吗;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:05:38.880

从 Jess 7 开始，直接支持正则表达式：类似的规则

```
(defrule vsvmntud
  (person (job /.*em.*/))
   =>
  ... 
```

会将`job`插槽与 Java 正则表达式匹配`.*em.*`。

您还可以使用 Jess 库中的任何函数——例如

```
(defrule vsvmntud
  (person (job ?j&:(str-index em ?j)))
   =>
  ... 
```

做同样的事情（如果没有找到匹配项，则函数`str-index`返回，或者一个数字——当转换为布尔值时被解释为——否则。）`FALSE``TRUE`

# ios - 在 iOS 中发生未捕获的异常后，有什么方法可以执行代码？

> ID：15348986
> 
> 赞同：9
> 
> 时间：2013-03-11T21:26:39.050
> 
> 标签：ios, objective-c, logging, ios6, uncaught-exception

我一直在为几个实现多级日志记录的应用程序开发一个框架。它主要用于内部用于测试与其他设备通信的应用程序，但也用于我们将分发的一些应用程序。

有什么方法可以捕获未捕获的异常并及时执行代码将异常保存到日志文件中？目前，Log 类只是每隔一段时间就写入文件，在写入失败的情况下在两个文件之间交替等。这工作正常，但如果它可以看到发生未处理的异常，写入任何未写入的日志，那就太好了记录到文件中，注意发生了异常并记录其详细信息，然后允许应用程序崩溃。

如果有某种方法可以在应用程序范围内捕获未处理的异常，我认为它会是这样的：

```
appDidReceiveUnhandledException:(NSException *)exception
{
    //write log to disk
    //append exception info to log file
    //rethrow exception
} 
```

如果有人能给我关于这是否可能的见解或建议，将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T21:30:25.610

您可以在 AppDelegate 中添加应用程序范围的未处理异常处理程序：

```
void HandleExceptions(NSException *exception) {
    NSLog(@"The app has encountered an unhandled exception: %@", [exception debugDescription]);
    // Save application data on crash
} 
```

在 AppDelegate 中将其引用`didFinishLaunchingWithOptions`为：

```
NSSetUncaughtExceptionHandler(&HandleExceptions); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:31:19.593

您可以通过调用设置自己的异常处理程序`NSSetUncaughtExceptionHandler()`

你可以称它为你的应用程序委托

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

#ifdef DEBUG
    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);
#endif

...

} 
```

如您所见，您需要将函数指针传递给这样的函数：

```
void uncaughtExceptionHandler(NSException *exception)
{
    NSLog(@"App Crash:\n%@", exception);
    NSLog(@"Stack Trace:\n%@", [exception callStackSymbols]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:31:55.453

您必须设置您的异常处理程序，最好在 applicationDidFinishLaunching 中的应用程序委托中完成，即：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSSetUncaughtExceptionHandler(&mExceptionHandler);
}

- (void)mExceptionHandler(NSException *exception) {
    NSLog(@"Exception %@", exception);
} 
```