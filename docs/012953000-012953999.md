# StackOverflow 问答 12953000-12953999

# objective-c - Xcode Views 和 Cocos2d Layers 在一个项目中

> ID：12953005
> 
> 赞同：0
> 
> 时间：2012-10-18T10:54:56.257
> 
> 标签：objective-c, xcode, cocos2d-iphone, game-engine

我的任务是从三个视图制作简单的应用程序：

*   in first：UITableView（应用启动时需要是第一个View）
*   第二：UITextField
*   第三个：Cocos2d 层

也许还有一个视图菜单可以在它们之间切换。如何在一个项目中混合 ViewControllers 和 Layers？我需要从 Xcode 或 Cocos2d 模板启动项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:02:21.940

一种可能的方法是从 Cocos2D 项目开始，然后使用[CCUIViewWrapper](http://www.cocos2d-iphone.org/forum/topic/6889)将任何视图显示为`CCNode`. 如果您可以在同一个 Cocos2D 场景中处理所有视图，那么这种方法是最好的方法。

如果您计划构建，例如，基于导航控制器的应用程序，那么相反的策略可能更合适：从“普通”应用程序开始，然后，当您需要它时（即，在您的第三个视图控制器中），添加 Cocos2d 的GLView 到您的视图控制器视图：

```
[myViewController.view.layer addSublayer:[[CCDirector sharedDirector] glView].layer]; 
```

或者：

```
[myViewController.view addSubview:[[CCDirector sharedDirector] glView]]; 
```

您需要导入 QuartzCore/QuartzCore.h 才能被允许使用 CALayers。

# eclipse - 如何在 BIRT 中通过 URL 传递输入参数？

> ID：12953007
> 
> 赞同：4
> 
> 时间：2012-10-18T10:54:59.367
> 
> 标签：eclipse, report, birt

我是 BIRT 报告的新手。在我的 BIRT 报告中，我有两个输入参数。我想通过查询字符串（在 URL 中）将这两个输入参数传递给服务器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T11:11:56.853

如果问题只是获取正确的 URL，这将类似于：

“YOUR_SERVER/your_birt_app/run?__report=ReportName.rptdesign&Name_Parameter1=Value1&Name_Paremeter2=Value2”。

“run”方法是映射到 BIRT Viewer Servlet 中的方法之一。还有另外两个：“框架集”和“预览”。

您可以在以下位置查看这些信息： http: [//www.eclipse.org/birt/phoenix/deploy/viewerUsage2.2.php](http://www.eclipse.org/birt/phoenix/deploy/viewerUsage2.2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:09:21.453

哈克雷..

如果您使用的是静态参数，则可以通过以下方式传递这些参数：“http://yourcompleteurl¶metername1=value1¶metername2=value2”。

# hadoop - Hadoop：如何在同一个作业中输出不同的格式类型？

> ID：12953010
> 
> 赞同：3
> 
> 时间：2012-10-18T10:55:23.053
> 
> 标签：hadoop, mapreduce, gzip, lzo

我想在一项工作中同时输出`gzip`和格式化。`lzo`

我使用`MultipleOutputs`, 并添加两个命名输出，如下所示：

`MultipleOutputs.addNamedOutput(job, "LzoOutput", GBKTextOutputFormat.class, Text.class, Text.class);`

`GBKTextOutputFormat.setOutputCompressorClass(job, LzoCodec.class);`

`MultipleOutputs.addNamedOutput(job, "GzOutput", TextOutputFormat.class, Text.class, Text.class);`

`TextOutputFormat.setOutputCompressorClass(job, GzipCodec.class);`

（`GBKTextOutputFormat`这里是我自己写的延伸`FileOutputFormat`）

它们用于减速器，例如：

`multipleOutputs.write("LzoOutput", NullWritable.get(), value, "/user/hadoop/lzo/"+key.toString());`

`multipleOutputs.write("GzOutput", NullWritable.get(), value, "/user/hadoop/gzip/"+key.toString());`

结果是：

我可以在两条路径中获得输出，但它们都是`gzip`格式。

有人可以帮助我吗？谢谢！

==================================================== =========================

更多的：

我只是查看了`setOutputCompressorClass`in的源代码`FileOutputFormat`，其中`conf.setClass("mapred.output.compression.codec", codecClass, CompressionCodec.class);`

调用 setOutputCompressorClass 时，配置中的 mapred.output.compression.codec 似乎会被重置。

那么实际的压缩格式是我们最后设置的，不能在同一个job中设置两种不同的压缩格式？或者还有什么被忽略的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:38:49.247

So maybe as a work-around, try setting the correct outputCompressorClass directly in the configuration

```
context.getConfiguration().setOutputCompressorClass(GzipCodec.class); 
```

just before your write call to each of the outputs. It does look like any output format configuration parameters other than key class, value class and output path are not handled well by MultipleOutputs and we may have to write a bit of code to offset that oversight.

# c# - Imap 西里尔文邮件

> ID：12953014
> 
> 赞同：2
> 
> 时间：2012-10-18T10:55:53.357
> 
> 标签：c#, .net, gmail, imap, gmail-imap

我使用 mailsystem.NET 库将消息放入我的收件箱。这是我的代码：

```
Imap4Client imap = new Imap4Client();
imap.ConnectSsl("imap.gmail.com", 993);
imap.Login(mylogin, mypassword);
Mailbox mails;
mails = imap.SelectMailbox("INBOX");
Message commomMessage = new Message();
commomMessage.From = new Address("someAddress", "someName");
commomMessage.To.Add(mylogin, "myName");
commomMessage.Subject = "someSubject";
commomMessage.BodyHtml.Text = "Привет мир";//or some cyrillic text 
commomMessage.Date = DateTime.Now;
mails.Append(commomMessage); 
```

当我打开我的 gmail 收件箱时，我看到了这封邮件，但正文包含`????? ???`而不是“привет мир”。如果`commomMessage.BodyHtml.Text`只包含拉丁字符，则没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:01:19.427

如果`Message`类继承自 .NET 的`MailMessage`类，请尝试使用它的`BodyEncoding`属性并将其设置为`System.Text.Encoding.UTF8`，例如：

```
commomMessage.BodyEncoding =  System.Text.Encoding.UTF8; 
```

如果`Message`类不继承自`MailMessage`尝试找到其他方式为您的电子邮件设置适当的编码。我相信这是您可以通过使用 UTF8 编码来解决的问题。

# objective-c - NSArray 和 NSDictionary

> ID：12953016
> 
> 赞同：0
> 
> 时间：2012-10-18T10:56:03.110
> 
> 标签：objective-c, nsarray, nsdictionary

我有一个 NSDictionary，我必须将它添加到 NSArray。我该怎么做？

```
NSDictionary *row = [NSDictionary dictionaryWithObjectsAndKeys:
     [NSString stringWithFormat:@"%@",NSLocalizedString(@"no_favorites", nil)], @"Address", nil]; 
```

如果我使用：

```
 aFavorite = [row allValues]; 
```

as sugested, if I print it I got:

```
(
"No favorites added"
) 
```

What I need is:

```
 (
    {
    Address = "No favorites added";
 }
 ) 
```

Because I will use:

```
NSDictionary* dict = [aFavorite objectAtIndex:[indexPath row]];
 NSString *contentForThisRow = [dict objectForKey:@"Address"]; 
```

The dict value can have 1 or 2 keys.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T10:59:15.183

要转换字典，您可以使用它的方法：

```
myArray = [[NSArray alloc] initWithArray:[myDic allValues]]; 
```

**更新**

当您想添加 dic 以检索它并使用键检索值时，请使用`NSMutableArray`如下方式：

```
NSMutableArray *myArray = [[NSMutableArray alloc] init];
[myArray addObject:myDic]; 
```

然后只需使用以下命令即可检索 dic：

```
NSDictionary *myDic = [myArray objectAtIndex:indexPath.row];
NSString *value = [myDic objectForKey:@"myValue"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:59:29.557

调用`allValues`函数`NSDictionary`，它会返回`NSArray`所有的值。

```
NSArray *array = [row allValues]; 
```

要获取键的 NSArray，请使用，

```
NSArray *array = [row allKeys]; 
```

参考链接：[Apple Doc](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

* * *

嗯，这是一个带有一些字符串连接的基本编程逻辑。如果你想要“键值对”，那么你必须使用 NSDictionary。但是，如果您愿意`Address = Something`，则将所有键放在一个数组中，然后将所有值放在不同的数组中，然后将它们循环到单个循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:22:38.550

如果您想访问所有值然后尝试它：- NSArray * values = [dictionary allValues];

如果访问所有键尝试它：- NSArray * values = [dict allValues];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:20:15.710

```
NSDictionary *row = [NSDictionary dictionaryWithObjectsAndKeys:
[NSString stringWithFormat:@"%@",NSLocalizedString(@"no_favorites", nil)], @"Address", nil];
[aFavorite addObject:row]; 
```

然后：

```
NSDictionary* dict = [aFavorite objectAtIndex:[indexPath row]];
NSString *contentForThisRow = [dict objectForKey:@"Address"]; 
```

***我有一个 NSDictionary，我必须将它添加到 NSArray***

如果您的意思是在运行时将 NSDictionary 添加到 NSArray，很抱歉您不能这样做，NSArray 是不可变的。

# ajax - 如何在 Ajax 中为现代浏览器创建请求对象

> ID：12953018
> 
> 赞同：0
> 
> 时间：2012-10-18T10:56:05.057
> 
> 标签：ajax, xmlhttprequest, request-object

我想制作一个 javascript 函数来在 Ajax 中创建一个请求对象。我希望它仅适用于现代浏览器，问题是：我真的需要区分两种可能性吗？

```
function createRequestObject(){
var reqObj;
var browser = navigator.appName;
if(browser == "Microsoft Internet Explorer"){
reqObj = new ActiveXObject("Microsoft.XMLHTTP");
}else{
reqObj = new XMLHttpRequest();
}
return reqObj;
} 
```

如果我直接使用 XMLHttpRequest()，它可以在主流浏览器中使用吗？为什么或者为什么不？

# ruby-on-rails-2 - I18 导轨错误 2

> ID：12953029
> 
> 赞同：1
> 
> 时间：2012-10-18T10:56:37.123
> 
> 标签：ruby-on-rails-2, i18n-gem

我用过 I18 gem 。

我想用荷兰语翻译，所以我做了以下事情

在 environment.rb 文件中

```
config.i18n.default_locale = "nl" 
```

在应用程序控制器中

```
before_filter :set_locale     
def set_locale      
  I18n.locale = params[:locale] || I18n.default_locale     
end 
```

并使用 nl.yml 文件创建 en.yml 文件

在 en.yml 文件中

```
en:    
  Are_you_sure?: "Are you sure?" 
```

并在 nl.yml 文件中

```
nl:            
  Are_you_sure?: "Weet je het zeker?" 
```

但出现以下错误

```
syntax error on line 4, col 15: `   Are_you_sure?: "Are you sure?"' 
```

谁能告诉我我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T08:55:08.540

也许你混合了“制表符”和“空格”。选择一个统一的缩进，比如

```
en:
  are_you_sure: "Are you sure ?"
  other_thing:
    foo: "Bar" 
```

每个缩进有 2 个空格。

# c#-4.0 - 尝试从远程计算机访问私有消息队列时无法获取私有消息队列的 QueueList

> ID：12953031
> 
> 赞同：1
> 
> 时间：2012-10-18T10:56:39.297
> 
> 标签：c#-4.0, msmq

当我尝试使用下面给出的代码从 loacl 机器获取私有队列列表时，我能够获取队列列表。

System.Messaging.MessageQueue.GetPrivateQueuesByMachine（字符串机器名）

但是当我尝试从远程机器访问队列列表时出现错误

远程计算机不可用。

我可以访问远程机器。

我已经检查了队列的权限，似乎它具有完全控制权。

还有什么我需要检查的。我不知道是什么原因。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:54:04.087

检查您尝试获取队列列表的机器中的防火墙设置。它可能会阻止远程访问队列。

# command-line - Phabricator：Arcanist：arc diff --update：未找到更改

> ID：12953033
> 
> 赞同：12
> 
> 时间：2012-10-18T10:56:49.187
> 
> 标签：command-line, updates, revision, phabricator

我最近开始使用phabricator。我正在使用 Arcanist CLI 将差异提交给 phabricator。直到昨天它工作正常，今天每当我尝试创建新修订或更新现有修订时它都会引发错误。

这是我用来更新修订的命令`D3`

```
arc diff --update D3 
```

在我发表评论后，它会引发以下异常

```
Linting...
No lint engine configured for this project.
Running unit tests...
No unit test engine is configured for this project.
Usage Exception: No changes found. (Did you specify the wrong commit range?) 
```

你们知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-01T19:43:14.220

如消息所述，您没有指定提交范围。

尝试：

```
arc diff HEAD~ --update D3 
```

HEAD~ 应该是您希望推送到修订版的提交

# mysql - 将字符串与查询 MySQL 混合

> ID：12953034
> 
> 赞同：0
> 
> 时间：2012-10-18T10:56:53.420
> 
> 标签：mysql, sql, join

我正在尝试输出一个字符串以及我从数据库中获得的某些值。例如，在 Microsoft Server 2008 中，以下内容按照我想要的方式运行：

```
SELECT 
'SELECT c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, '''
+ NAME + ''' db FROM ' + NAME 
+ '.sys.all_columns as c INNER JOIN ' + NAME 
+ 
'.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like ''%password%'' AND type = ''U'' UNION'
  FROM SYS.DATABASES 
```

返回以下内容：

```
SELECT c.NAME COLLATE SQL_LATIN1_GENERAL_CP1_CI_AS colName, 
       o.NAME COLLATE SQL_LATIN1_GENERAL_CP1_CI_AS tableName, 
       'master'                                    db 
  FROM MASTER.SYS.ALL_COLUMNS AS c 
       INNER JOIN MASTER.SYS.ALL_OBJECTS o 
               ON c.OBJECT_ID = o.OBJECT_ID 
 WHERE c.NAME LIKE '%password%' 
       AND TYPE = 'U' 
UNION 
SELECT c.NAME COLLATE SQL_LATIN1_GENERAL_CP1_CI_AS colName, 
       o.NAME COLLATE SQL_LATIN1_GENERAL_CP1_CI_AS tableName, 
       'tempdb'                                    db 
  FROM TEMPDB.SYS.ALL_COLUMNS AS c 
       INNER JOIN TEMPDB.SYS.ALL_OBJECTS o 
               ON c.OBJECT_ID = o.OBJECT_ID 
 WHERE c.NAME LIKE '%password%' 
       AND TYPE = 'U' 
UNION 
```

但是当我在 MySQL 中尝试类似的事情时：

```
 SELECT 
'SELECT c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, '''
+ DB + ''' db FROM ' + DB 
+ '.sys.all_columns as c INNER JOIN ' + DB 
+ 
'.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like ''%password%'' AND type = ''U'' UNION'
  FROM DB 
```

它只返回我想要的记录的空白行。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:03:38.850

在 MySQL 中，您需要`concat`函数 in 而不是`+`运算符：

```
SELECT concat(
'SELECT c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, '''
, DB , ''' db FROM ' , DB 
, '.sys.all_columns as c INNER JOIN ' , DB 
, 
'.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like ''%password%'' AND type = ''U'' UNION'
)  FROM DB 
```

# solr - 分面搜索为 1 个结果提供大于 1 的数字

> ID：12953039
> 
> 赞同：2
> 
> 时间：2012-10-18T10:57:06.980
> 
> 标签：solr, faceted-search

我从我的到 solr 的查询看起来像这样

```
q=(rtitle:(work+codex))&facet=true&facet.field=record_type&facet.field=subject0&facet.field=grid&facet.limit=9000&start=0&rows=0 
```

有趣的是，我的许多记录都可以通过使用单词“work”和单词“codex”找到。当我像上面那样查询时，我得到类似的东西

`<lst name="grid"><int name="23908">2</int></lst>`

in 的值`name`是我记录的某种 id。在我的数据库中，我只有**一条**id = 23908 的记录，所以我确信 faceted 将返回 mi 编号 1，但看起来它给了我 2，因为可以为每个单词找到该记录。

当我这样查询时：

```
q=(rtitle:(work+AND+codex))&facet=true&facet.field=record_type&facet.field=subject0&facet.field=grid&facet.limit=9000&start=0&rows=0 
```

我得到了正确的刻面但查询不是我想要的。Id 不会以我需要的质量返回结果，所以这对我来说是错误的。

我该怎么做才能在单词之间进行 OR 并进行分面搜索以将我的结果正确计算为 uniq 值而不是它们的总和？

* * *

**更新**

好的，我喜欢我的代码中的错误。正如我在该字段的不同记录类型的数据配置集 uid 中看到的开发人员之一（我有两个数据配置）。在某些情况下，来自一种数据类型和第二种数据类型的 id，其中一个短语相同。这样我得到的数字是 2 而不是 1

# python - iPython 文件路径自动完成

> ID：12953040
> 
> 赞同：4
> 
> 时间：2012-10-18T10:57:15.977
> 
> 标签：python, ipython

我在 Windows 7 64 位上运行 iPython v0.13。( `qtconsole --pylab=inline`)

当我键入`%cd 'C:/Users/My Name/Downloads'`时，它会将我带到所需的位置。

当我`tab`在目录之间自动完成时，如果目录的名称中有空格（如示例中所示），则自动完成将失败。

是否有这个原因以及克服它的解决方案（除了迁移到 Linux 或使用下划线作为文件名/目录名称分隔符。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:41:51.940

刚才我在我的 mac 上尝试了 ipython，自动完成在处理包含空间的目录时效果很好。我使用的 ipython 版本是 0.13.1。也许简单的升级你的 ipython 就可以解决。

# r - 警告：二项式 glm 中的非整数 #successes！（调查包）

> ID：12953045
> 
> 赞同：56
> 
> 时间：2012-10-18T10:57:41.207
> 
> 标签：r, statistics, glm

我正在使用该`twang`包来创建倾向得分，这些得分在二项式 glm 中用作权重，使用`survey::svyglm`. 代码看起来像这样：

```
pscore <- ps(ppci ~ var1+var2+.........., data=dt....)

dt$w <- get.weights(pscore, stop.method="es.mean")

design.ps <- svydesign(ids=~1, weights=~w, data=dt,)

glm1 <- svyglm(m30 ~ ppci, design=design.ps,family=binomial) 
```

这会产生以下警告：

```
Warning message:
   In eval(expr, envir, enclos) : non-integer #successes in a binomial glm! 
```

有谁知道我可能做错了什么？

我不确定这条消息在 stats.SE 上是否会更好，但总的来说，我想我会先在这里尝试。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-18T12:00:53.100

没有错，`glm`只是在指定二项式（和泊松）模型时很挑剔。如果检测到否，它会发出警告。试验或成功的次数是不完整的，但它会继续前进并且无论如何都适合模型。如果您想抑制警告（并且您确定这不是问题），请`family=quasibinomial`改用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-03-21T16:03:29.230

就像@HoongOoi 所说，`glm.fit`家庭`binomial`期望整数计数，否则会发出警告；如果您想要非整数计数，请使用`quasi-binomial`. 我的其余答案比较了这些。

R for 中的准二项式与系数估计`glm.fit`完全相同`binomial`（如@HongOoi 的评论中所述），但与标准误差不同（如@nograpes 的评论中所述）。

## 源码对比

源代码的差异`stats::binomial`并`stats::quasibinomial`显示以下更改：

*   文本“二项式”变为“准二项式”
*   aic 函数返回 NA 而不是计算的 AIC

以及以下删除：

*   当权重 = 0 时将结果设置为 0
*   检查权重的完整性
*   `simfun`模拟数据的功能

only`simfun`可以有所作为，但是 的源代码`glm.fit`显示没有使用该函数，这与返回的对象中的其他字段不同，`stats::binomial`例如`mu.eta`and `link`。

## 最小的工作示例

对于这个最小工作示例中的系数，使用`quasibinomial`or的结果是相同的：`binomial`

```
library('MASS')
library('stats')

gen_data <- function(n=100, p=3) {

  set.seed(1)  
  weights <- stats::rgamma(n=n, shape=rep(1, n), rate=rep(1, n))
  y <- stats::rbinom(n=n, size=1, prob=0.5)
  theta <- stats::rnorm(n=p, mean=0, sd=1)
  means <- colMeans(as.matrix(y) %*% theta)
  x <- MASS::mvrnorm(n=n, means, diag(1, p, p))

  return(list(x=x, y=y, weights=weights, theta=theta))  
}

fit_glm <- function(family) {
  data <- gen_data()
  fit <- stats::glm.fit(x = data$x,
                        y = data$y,
                        weights = data$weights,
                        family = family)
  return(fit)
}

fit1 <- fit_glm(family=stats::binomial(link = "logit"))
fit2 <- fit_glm(family=stats::quasibinomial(link = "logit"))

all(fit1$coefficients == fit2$coefficients) 
```

## 与拟二项式概率分布的比较

[该线程](https://stats.stackexchange.com/questions/91724/what-is-quasi-binomial-distribution-in-the-context-of-glm)表明准二项式分布与具有附加参数的二项式分布不同`phi`。但它们在统计和`R`.

首先，源代码中没有`quasibinomial`提到该附加`phi`参数的地方。

其次，[准](https://en.wikipedia.org/wiki/Quasiprobability)概率类似于概率，但不是正确的概率。在这种情况下，当数字是非整数时，无法计算项 (n \choose k)，尽管可以使用 Gamma 函数。这对于概率分布的定义可能是一个问题，但与估计无关，因为项 (n 选择 k) 不依赖于参数并且不属于优化。

对数似然估计是：

[![对数似然估计器](../Images/b50da3967307b53a35783f86a3bb1173.png)](https://i.stack.imgur.com/xmdGE.png)

作为二项式族的 theta 函数的对数似然是：

[![二项式家庭的对数似然](../Images/3b7694b93b545fa6e6b88e64f714867e.png)](https://i.stack.imgur.com/DrSzD.png)

其中常数与参数 theta 无关，因此它不在优化范围内。

## 标准误比较

[如stats::summary.glm](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/summary.glm.html)中所述，通过对和系列`stats::summary.glm`使用不同的离散值计算的标准误差：`binomial``quasibinomial`

> 拟合过程中不使用 GLM 的离散度，但需要找到标准误差。如果`dispersion`未提供 或`NULL`，则将离散视为和族，否则通过残差卡方统计量（根据非零权重的情况计算）除以残差自由度来估计`1`。`binomial``Poisson`
> 
> ...
> 
> `cov.unscaled`: 估计系数的未缩放 ( `dispersion = 1`) 估计协方差矩阵。
> 
> `cov.scaled`: 同上，按比例缩放`dispersion`。

使用上面的最小工作示例：

```
summary1 <- stats::summary.glm(fit1)
summary2 <- stats::summary.glm(fit2)

print("Equality of unscaled variance-covariance-matrix:")
all(summary1$cov.unscaled == summary2$cov.unscaled)

print("Equality of variance-covariance matrix scaled by `dispersion`:")
all(summary1$cov.scaled == summary2$cov.scaled)

print(summary1$coefficients)
print(summary2$coefficients) 
```

显示相同的系数、相同的未缩放方差-协方差矩阵和不同的缩放方差-协方差矩阵：

```
[1] "Equality of unscaled variance-covariance-matrix:"
[1] TRUE
[1] "Equality of variance-covariance matrix scaled by `dispersion`:"
[1] FALSE
       Estimate Std. Error   z value   Pr(>|z|)
[1,] -0.3726848  0.1959110 -1.902317 0.05712978
[2,]  0.5887384  0.2721666  2.163155 0.03052930
[3,]  0.3161643  0.2352180  1.344133 0.17890528
       Estimate Std. Error   t value   Pr(>|t|)
[1,] -0.3726848  0.1886017 -1.976042 0.05099072
[2,]  0.5887384  0.2620122  2.246988 0.02690735
[3,]  0.3161643  0.2264421  1.396226 0.16583365 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-23T18:42:23.070

*计算*上没有错，但从*统计*上看，你可能没有做一些有意义的事情。在这种情况下，最好使用稳健的回归方法，如果您的数据包含正好为 1 或正好为 0 的单位，这对于比例响应数据通常是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-01T19:09:32.257

抱歉，但从某种意义上说，如果底层机制是过度分散的二项式模型，则在估计标准误差时，过度分散的二项式将考虑到它。因此，即使点估计值相同，您也会获得更好的覆盖率。

# android - 我下面的对话框不起作用，请更正

> ID：12953046
> 
> 赞同：0
> 
> 时间：2012-10-18T10:57:46.523
> 
> 标签：android, dialog

```
pbutton.setOnClickListener(new OnClickListener()
    {   private AlertDialog show;
        public void onClick(View arg0)
        {   
            if ((input1.getText().length() == 0) || (input1.getText().toString().equals(" ")) || (input2.getText().length() == 0) || (input2.getText().toString().equals(" "))|| (input1.getText().toString().equals(""))||(input2.getText().toString().equals("")))
            {

            show = new AlertDialog.Builder(MainActivity.this).setTitle("Error").setMessage("Some inputs are empty").setPositiveButton("OK", null).show();
            }
            double result = new Double(input1.getText().toString())+ new Double(input2.getText().toString());
            output.setText(Double.toString(result));

        } 
```

我也尝试过传递也不起作用的上下文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:02:43.357

以这种方式使用：-

```
 b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
              if ((input1.getText().length() == 0) || (input1.getText().toString().equals(" ")) || (input2.getText().length() == 0) || (input2.getText().toString().equals(" "))|| (input1.getText().toString().equals(""))||(input2.getText().toString().equals("")))
                {
            showAlert();
                }
        }
    });
}
private void showAlert() {
    AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
            alertbox.setMessage("Some Inputs are Empty");
            alertbox.setTitle("error"); 
    alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface arg0, int arg1) {

        }
    });

     alertbox.show();

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:04:08.290

I think you need to call the `create()` first like:

```
show = new AlertDialog.Builder(MainActivity.this).setTitle("Error").setMessage("Some inputs are empty").setPositiveButton("OK", null).create();

show.show(); 
```

**EDIT**:

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
alertDialogBuilder.setTitle("Error");
alertDialogBuilder.setMessage("Some inputs are empty");
alertDialogBuilder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        // if this button is clicked, ....

    }
  });   

AlertDialog alertDialog = alertDialogBuilder.create();
alertDialog.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:15:39.863

我按原样使用了您的代码并且工作正常。请确保您没有导入

**导入 android.content.DialogInterface.OnClickListener；**

如果您在侦听器上方导入，那么您必须在下方导入，它不会起作用，

**导入 android.view.View.OnClickListener；**

那么它肯定会起作用。

# html - 调整窗口大小时的css问题

> ID：12953049
> 
> 赞同：0
> 
> 时间：2012-10-18T10:58:06.000
> 
> 标签：html, css

嗨，我遇到了 css 问题，因为当我调整窗口大小时，div 没有正确放置，如下所示

![在此处输入图像描述](../Images/e70ff524c4287a6ba4f3243f7f58bfd9.png)

这是涉及 div 的 CSS

```
.similar_story_block_form {
    background-color: white;
    border: 1px solid #CCCCCC;
    border-radius: 0 0 12px 12px;
    box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.8);
    font-size: 13px;
    left: 337px;
    position: absolute;
    top: 105px;
    width: 337px;
    z-index: 100;
} 
```

html代码

```
<div id="search-box-form">
  <div style="display:block;" class="similar_story_block_form">
     <div class="head">
        <p>What interest you?</p>
        <a onclick="javascript:closeSearchBox(event);" id="close-element-form" href="#"></a></div>
<ul>
 <li>
   <a no-confirm="" class="pushstate">
    <div col-400="" class="fleft"><p>No such business</p></div></a></li>
    <div class="head"><p>Nothing is found from <span style="color:red;font-weight:italic;">"s"</span></p>
    </div>
</ul>
</div>
</div> 
```

目前我使用 chrome 这给了我同样的问题。我在这里想念什么？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:25:39.287

把“位置：相对；” 或“#search-box-form”元素上的“位置：绝对”。这样，“.similar_story_block_form”位置将与父位置相对/绝对。而不是全局/身体位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:30:30.220

具有类`similar_story_block`_form的div的父级`search-box-form`应该具有相对位置，而具有类的div`search-box-form`应该具有绝对位置，您需要更改`search-box-form`div的顶部和左侧值。确保您还添加`left:0;top:0;`到父 div 是`search-box-form`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:19:09.220

您必须以% 而不是像素为单位提供**左侧、顶部、宽度的样式值。**

当您以像素为单位时，大小和位置将固定为标准浏览器大小，而不是调整大小的。

如果你给它%，那么它会根据它的父元素自动改变它的宽度和位置。

例如，

```
 .similar_story_block_form{ width:80%; } 
```

将使“similar_story_block_form”的宽度为其父元素的 80%。如果父元素是body，它会自动改变它的宽度和浏览器窗口的宽度。

# ruby-on-rails - Rails：基于外部 API 的认证系统

> ID：12953052
> 
> 赞同：1
> 
> 时间：2012-10-18T10:58:14.877
> 
> 标签：ruby-on-rails

我正在构建一个 Rails 应用程序来扩展现有在线 Rails 应用程序的功能。现有的 Rails 应用程序提供了一个用于身份验证的 API。

我的方法：用户 X 在现有的 Rails 应用程序中有一个帐户。使用这些登录数据，用户 X 应该在我的 Rails 应用程序上进行身份验证。现有应用程序提供了一个 gem，用于在登录后连接到 API。

存储有关成功登录的信息的最佳方法是什么？我应该使用会话吗？或者 Rails 是否为此提供了更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:31:51.183

我认为 Rails 没有为此提供标准方法。

您可以在认证成功后将 user_id 存储在 session 中，然后`session[:user_id]`在每个请求上检查 application_controller 以查看用户是否已登录。

请参阅RailsCasts 上的[#250 从头开始​​的身份验证。](http://railscasts.com/episodes/250-authentication-from-scratch)

# asp.net - Header Div Position 根据 Content Div 编辑

> ID：12953053
> 
> 赞同：0
> 
> 时间：2012-10-18T10:58:17.777
> 
> 标签：asp.net, css, html, position, positioning

我想设计我的网站。我有两个主要的 div，其中一个是“标题”，另一个是“内容”。我想设置 width 属性：80% 并为它们设置中心。但我不这样做。关于标题 div 的其他问题。我上传了一张图片，我想这样设计。我怎样才能做到所有这些？

![标题](../Images/b7996ece54e75d7cfb828c3825acef66.png)

我的 CSS：

```
 #main
    {
        margin:0px auto;
        margin-left:50px;
        margin-right:50px;
        margin-top:25px;
        margin-bottom:25px;
        height:auto;
        text-align:center;}

 #content
    {

        width:80%;
        height:auto;
        margin:0px auto;
        }

    #header
     {

         width:80%;
         height:100px;
         top:20px;
         }

    #header_left
     {

        float:left ;
        height: 100px;
        text-align: center;
        }

    #header_right
    {
        margin:0px auto;
        height:30px;
        text-align:center;
        margin-top:35px;
        }

        #header_social
        {

            float:right;
            height:30px;
            text-align:center;
            margin-top:35px;} 
```

我的客户代码：

```
<div id="main">

    <div id="content">

    <div id="header">

    <div id="header_left">
    <asp:Image ID="Image1" runat="server" />
    </div>

    <div id="header_right">

    <asp:LinkButton ID="LinkButton5" runat="server" ForeColor="Gray"></asp:LinkButton>&nbsp;|
    <asp:LinkButton ID="LinkButton4" runat="server" ForeColor="Gray" ></asp:LinkButton>&nbsp;|
    <asp:LinkButton ID="LinkButton3" runat="server" ForeColor="#FF3300" ></asp:LinkButton>&nbsp;|
    <asp:LinkButton ID="LinkButton2" runat="server" ForeColor="Gray" ></asp:LinkButton>&nbsp;|
    <asp:LinkButton ID="LinkButton1" runat="server" ForeColor="Gray" ></asp:LinkButton>
    </div>

    <div id="header_social">
        <asp:ImageButton ID="ImageButton1" runat="server"/>
        <asp:ImageButton ID="ImageButton2" runat="server"/>
    </div>

    </div>

     ******CONTENT FIELD*****

    </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:30:53.143

检查这个小提琴：http: [//jsfiddle.net/2wqe8/28/](http://jsfiddle.net/2wqe8/28/)

我没有得到上传图片部分。请您详细说明一下好吗？

**更新：**
检查另一个小提琴的内容：http: [//jsfiddle.net/MkP4D/8/](http://jsfiddle.net/MkP4D/8/)

当您使用 float 时，首先提供正确的浮动元素。欲了解更多信息： [CSS 浮动](http://www.w3schools.com/css/css_float.asp)

# javascript - 从左向右滑动 div 内容

> ID：12953055
> 
> 赞同：0
> 
> 时间：2012-10-18T10:58:23.637
> 
> 标签：javascript, jquery, html, jquery-plugins

我是 jquery 的初学者，我总是想知道开发人员是如何做到的。谁能给我一个简单的例子..？

[http://static.livedemo00.template-help.com/wt_37928/#!/home](http://static.livedemo00.template-help.com/wt_37928/#!/home)

我需要的是一个菜单栏，当您单击其中的链接时，该链接的内容应该出现在左侧的屏幕中心，当您单击另一个链接时，可见内容应该出现在右侧，并且最近单击的链接的内容会出现在屏幕上如我所说。

谁能帮我吗...？这对我来说将是一个很大的解脱。

谢谢你。

我找到了解决方案。这是我正在寻找的效果。但我需要一个菜单​​栏。当有人点击一个链接时，它的内容应该是这样的。

[http://jsfiddle.net/jtbowden/ykbgT/1/](http://jsfiddle.net/jtbowden/ykbgT/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:12:38.400

```
$('#moving').stop().animate({

    "left": '+=500' 

}, 250); 
```

这将在 250 毫秒的时间范围内将 div 向右移动 500 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:12:12.127

[http://jquery.com/](http://jquery.com/) - 框架建议让这些移动。

[http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery) - 一个很好的消费教程，介绍 jquery 如何工作以及如何掌握选择器等等。

就像@senthilbp 说的，尝试让[http://api.jquery.com/animate/](http://api.jquery.com/animate/)函数通读。

通读这些内容，如果您在理解它们时遇到任何困难，请首先搜索问题，如果没有给出答案，请返回并再次询问，并提供您遇到问题的具体示例。

# matlab - Matlab：如何在imrect中找到白线的最右边点？

> ID：12953057
> 
> 赞同：1
> 
> 时间：2012-10-18T10:58:33.297
> 
> 标签：matlab

我有一个关于 imrect() 函数的问题，它是 MatLab 中图像处理工具箱的一部分。我想在具有 (x,y) 坐标的图像中找到一个起点。

我使用 imrect 函数设置区域以限制和指定查找区域，但我无法获得 ROI 掩码重新映射到图像原始大小的点。

正如您在图像上看到的，有一个指定的矩形（青色），我想检查白线，尤其是距离矩形右边缘最近的点。我尝试只查看矩形的最后一列，但正如我之前提到的，重新映射到全局图像坐标上失败了。所以在这个例子中，我想得到的白点大约是 (98,302)

![在此处输入图像描述](../Images/515794a441eb4976f85de35d90bebfe4.png)

原始 (x,y) 坐标是相关的，因此不能将图像裁剪为矩形。那么，你有什么想法吗？感谢您的任何帮助评论。

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:24:09.117

天啊。我应该经常去外面吸一大袋空气。当遇到问题时，它真的很有帮助。

对于所有有相同问题的人，请参阅以下部分中的答案。

```
imshow(im);
h1 = imrect;
pos = getPosition(h1); % to get the current position of the rectangle
setPosition(h1,[pos(1) pos(2) 1 pos(4)]); %for just selecting one row of the rect
BW = createMask(h1); 
test = BW.*im; % get the masked content of the image
[x,y] = find(test); % find the non-zero element and return x and y 
```

# sql - 更好地理解数据库表之间的关系

> ID：12953058
> 
> 赞同：-3
> 
> 时间：2012-10-18T10:58:36.993
> 
> 标签：sql, database-design

我正在努力更好地理解关系数据库，但有些东西我一直碰到并且不理解。让我们来看看这两张表：

![在此处输入图像描述](../Images/5a9be1e7c2b374c45c32318ef19d61b2.png)

在这种情况下`Login.ID`是主键与`auto_increment`集合，`Profile.ID_LOGIN`是外键。当创建用户并将其用户名和密码存储在`login`数据库中时，是否`ID`会自动添加与当前用户名和密码对应的内容，`ID_LOGIN`还是我必须创建一个 SQL 语句来执行此操作？

如果我必须创建一个 SQL 语句，我应该如何添加`ID_LOGIN`以确保我正确添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:12:18.013

您需要将数据添加到两个表（两个插入语句）。首先，您插入用户并获取其自动生成的 ID。然后您可以使用您在第一次插入中获得的 user_id 插入您的个人资料记录。

也就是说，您描述的*是一对多*关系（一个用户可能有多个配置文件），但用户和配置文件之间的关系应该是*一对一的*，因为每个用户总是只有一个配置文件，每个配置文件只对应一个用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:12:31.223

严格来说，外键只是一个表中的一个字段，它是存储对另一个表中记录的引用的地方。因此，您的代码必须填充两个表并设置外键。

数据库具有外键约束的功能，这有助于禁止在外键值引用的另一个表中没有记录的情况下留下外键的数据库操作。

在 SQL 数据库中维护外键的真正方便之处在于，当您在查询中需要相关数据时，您可以轻松地进行连接以获取相关数据。

顺便说一句，Ruby on Rails 使用关联为您管理外键。因此，如果您使用 Ruby on Rails 进行编程，它会为您设置外键并经常执行您需要的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:01:39.097

您应该创建 SQL 语句以将记录添加到 Profile 表中。FK 约束不允许您添加不在登录表中的 ID_LOGIN，因此您不必手动检查它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:03:17.417

当您使用外键将一行插入到 tbale 中时，您必须事先确保您尝试插入外键列的值存在于链接表中。

换句话说：例如，当您尝试在 ID_LOGIN 设置为 25 的 Profile 中插入一行，而在 ID 为 25 的 Login 表中不存在任何行时，您会收到错误消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T11:04:58.773

它不会自动添加。您必须使用 create 语句添加它。如果您希望它自动添加，那么您必须使用 Login 表创建触发器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T11:05:17.960

创建个人资料记录时，您需要确保已链接正确的登录记录。

例如，对于一个叫 John Smith 的人，他收到了 jsmith@thecompany.com 的电子邮件，并且拥有 johns/password 的用户/密码组合

`Insert into Profile values ('John Smith', jsmith@thecompany.com, (select ID from Login where user = jsmith))`

将创建一个链接回您的登录记录的配置文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-18T11:06:19.193

您将始终必须创建一个 SQL 查询才能将其添加到 Profile 表中。但也许使用过程/触发器/函数，您可能能够创建一个查询，允许您在登录表中添加一行后立即添加它。

# javascript - 如何将数值变量与 Javascript 中数组中的每个数值元素进行比较？

> ID：12953062
> 
> 赞同：1
> 
> 时间：2012-10-18T10:58:58.380
> 
> 标签：javascript, arrays, compare

如果我有一个用 10 个数字填充的 Javascript 数组。例如 (10,11,12,13,14,15,16,17,18,19) 我想取一个值为 20 的变量，并检查数组中是否有任何元素大于 20。因为我将比较许多用数字填充的数组，并且不知道它们包含哪些数字。

如何取 20，然后让 Javascript 测试数组中的每个数字，以确定它是否大于 20。

我知道你可以这样说：

```
var x = 20;
if (  x > myArray[0] && 
  x > myArray[1] 
```

等等等等，但这可能意味着输入一长串元素检查。有没有一种简单的方法，比如从起始索引 [0] 到 [10] 进行检查或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:08:11.407

您可以使用[`.some()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)：

```
if (myArray.some(function(x) {return x > 20;}))
    // do something 
```

并非所有浏览器都支持它，但您可以轻松地对其进行填充。此外，库有这样的辅助函数，例如 Underscore 的`any`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:47:18.067

我喜欢用`Object.prototype`它来扩展 JavaScript 对象的基本功能。就像 JS 框架[原型](http://prototypejs.org/)和[MooTools](http://mootools.net/)一样。

`filter`所以向JS -Object引入一个新功能`Array`不仅可以解决您的具体问题，而且还可以解决一整类问题。

```
// extending the Array type with the new function 'filter'
// so all arrays have access to this function
// argument `fn` is a test-function which returns true or false
Array.prototype.filter = function(fn) {
    var filtered = []; // a new array for the filtered items
    for(var i = 0, len = this.length; i < len; i++) {
        var item = this[i];
        // store this item if fn returns true
        if( fn(item) ) filtered.push(item); 
    }
    return filtered;
}

// want to filter this array   
var myArr = [1,2,3,4,5,6];

// find items in myArr > 3
var myArrGt3 = myArr.filter(
    // this is the test function / must always return a bool
    function(item) {
        return item > 3;
    }
);

// testing output
document.write(JSON.stringify(myArrGt3)); // prints "[4,5,6]" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:08:14.243

尝试这个：

```
function getValuesFrom(array,x)
{
    x = +(x);//coerce to number
    array.sort(function(a,b)
    {
        return (a > b ? 1 : -1);
    });//sort in ascending order
    for (var i = 0;i<array.length;i++)
    {
        if (+array[i] >= x)
        {
            return array.slice(i);//return all elements >= x
        }
    }
}
var myArray = [10,11,12,13,14,15,16,17,18,19];
var larger = getValuesFrom(myArray,15);
console.log(larger);//[15,16,17,18,19]
console.log(larger.length);//5 
```

那应该这样做。注意：将数组传递给此函数后，您可能会发现它的顺序发生了变化，以避免这种情况：

```
function getValuesFrom(array,x)
{
    x = +(x);//coerce to number
    var tmpArray = array.slice(0);//copy array
    tmpArray.sort(function(a,b)
    {
        return (a > b ? 1 : -1);
    });//sort in ascending order
    for (var i = 0;i<tmpArray.length;i++)
    {
        if (+tmpArray[i] >= x)
        {
            return tmpArray.slice(i);//return all elements >= x
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:01:22.237

使用 for 循环。

```
for (var i = 0; i < myArray.length; i++) {
    if (x > myArray[i]) {
         // whatever
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T11:03:07.417

```
var x = 20;
var myArray = [10,11,12,13,14,15,16,17,18,19];
var cnt=0;

for(var i = 0; i < myArray.length; i++) {
 if(myArray[i]>x) {
   cnt++;
 }
}

alert("Found "+cnt+" values greater than "+x+" in the array" ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-17T09:42:48.593

您可以使用 jQuery 使用 inArray 方法。

**描述：**在数组中搜索指定值并返回其索引（如果未找到则返回 -1）。

```
$.inArray( 5 + 5, [ 4, 5 , 7, 10 ] );  // output is 3 
```

例子：

```
<script>
var arr = [ 4, "Pete", 8, "John" ];

jQuery.inArray( "John", arr ) // this returns 3(Index value of John)

</script> 
```

**同样在for 循环**的帮助下，您还可以循环它们。

```
var array1=["fox","tiger","lion"];
var array2=["rat","cow","lion"];
for(i=0; i<array2.length; i++)
{
document.write(jQuery.inArray( array2[i], array1 ));
}

Output: -1 
        -1 
         2 
```

再会！

# c# - 在单独的线程中显示 WPF ProgressBar 窗口

> ID：12953064
> 
> 赞同：1
> 
> 时间：2012-10-18T10:59:14.047
> 
> 标签：c#, wpf, xaml, mvvm

`Indeterminate="True"`在运行耗时的任务时，我想显示一个带有进度条的简单 WPF 窗口。

我已经按照Reed Copsey 的[这个例子实现了我的解决方案。](http://reedcopsey.com/2011/11/28/launching-a-wpf-window-in-a-separate-thread-part-1/)

该过程完成后，我需要关闭窗口。我的猜测是，要实现这一点，我需要杀死线程或关闭视图（窗口）。

不幸的是，这两种方式都给我以下错误：

1）调用`Abort()`线程：

窗口已关闭，这是正确的，但我仍然收到以下错误：

无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部

2）`View.Close()`：

调用线程无法访问此对象，因为不同的线程拥有它。

需要在`StopThread()`方法中实现所需的逻辑，知道我可以做什么来优雅地关闭窗口：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Threading;
using Microsoft.Practices.Composite.Presentation.Commands;

namespace ProgressBar
{
    public class ProgressBarViewModel
    {
        public DelegateCommand<object> CloseCommand { get; set; }
        Thread newWindowThread;

        string _closeButton;
        public string CloseButton 
        {
            get { return _closeButton; }
            set { _closeButton = value; }
        }

        ProgressBarView _view;
        public ProgressBarView View
        {
            get { return _view; }
            set { _view = value; }
        }

        public ProgressBarViewModel(ProgressBarView view)
        {
                CloseButton = "Close";
                CloseCommand = new DelegateCommand<object>(CloseForm);

                View = view;
                View.Closing +=new System.ComponentModel.CancelEventHandler(View_Closing);
                View.DataContext = this;
        }

        public void View_Closing(object sender,CancelEventArgs e)
        {
            StopThread();
        }

        public void CloseForm(object p)
        {
            StopThread();
        }

        private void StopThread()
        {
            try
            {
                //View.Close();
                newWindowThread.Abort();
            }
            catch (Exception eX)
            {
                Debugger.Break();
                //Getting an error when attempting to end the thread:
                //Unable to evaluate expression because the code is optimized or a native frame is on top of the call stack
            }
        }

        public void ShowProgress()
        {
                newWindowThread = new Thread(new ThreadStart(() =>
                {
                    ProgressBarView tempWindow = new ProgressBarView();
                    tempWindow.DataContext = this;
                    tempWindow.Show();
                    System.Windows.Threading.Dispatcher.Run();
                }));

                newWindowThread.SetApartmentState(ApartmentState.STA);
                newWindowThread.IsBackground = true;
                newWindowThread.Start();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:11:26.820

也许您应该考虑使用 BackgroundWorker 进行此操作？您可以响应 RunWorkerCompleted 事件来关闭视图。

```
public void YourFunction(Dispatcher dispatcher)
{
    BackgroundWorker bw = new BackgroundWorker();
    bw.DoWork += (sender, args) =>
      {
         ...do your long running operation
      };

    bw.RunWorkerCompleted += (sender, args) =>
      { 
         dispatcher.BeginInvoke(...close your view here);
      }

    bw.RunWorkerAsync();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:03:34.980

What you should do is encapsulate your operation within its own class, and make it raise an event when it's completed (or you want to close the view)

The event handler will need to use the `Dispatcher` to run the `close()` in the same thread as the view.

# c++ - 在串行端口上写入时出现错误 112（磁盘已满）是什么意思？

> ID：12953075
> 
> 赞同：3
> 
> 时间：2012-10-18T10:59:53.387
> 
> 标签：c++, windows, winapi, serial-port, citrix

在 Windows 机器上写入串行端口 (COM1) 时出现写入错误。返回的错误是 112 (DISK_FULL)。由于这是一个串行端口，我不明白错误的含义。

会不会是缓冲区满了？我不这么认为，因为我在打开端口后发送的第一个请求中收到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:47:25.883

类似的 I/O 错误是由设备驱动程序生成的。这几天很少是微软提供的标准Windows串口驱动程序，它只适用于真正的串口硬件。串行端口通常由使用自定义硬件来实现通信的设备驱动程序*模拟。*例如蓝牙和 USB。但一切都会过去。

这对设备制造商来说很方便，因为他们不必提供允许您在自己的代码中使用设备的自定义 DLL。模拟串行端口让您可以简单地使用标准的 winapi 函数与设备通信。

但就目前而言，一个核心问题是您实际上并没有使用串行端口硬件。另一个是这些设备制造商不太擅长编写自定义驱动程序。特别是 USB 驱动程序因质量差而臭名昭著。根本没有帮助的是串行端口不支持即插即用，它们太原始而无法支持设备发现。如此简单的事情，比如发现哪个端口号连接到设备，以及在设备使用时断开设备的连接，都是严重的障碍。

可以肯定的是，“磁盘已满”错误代码没有任何意义。设备驱动程序编写器获取了特定于设备的某种错误条件的错误代码。找出错误真正含义的唯一方法是询问供应商。

# asp.net-mvc-3 - 仅通过 ID 填充 ViewModel 中的值？

> ID：12953087
> 
> 赞同：0
> 
> 时间：2012-10-18T11:00:44.470
> 
> 标签：asp.net-mvc-3

我不确定是否以及如何做到这一点，但在我的控制器中，我有：

```
[HttpGet]
public ActionResult Detail(int userId)
{
  UserDetailViewModel user = new UserDetailViewModel();
  user.UserId = userId;
  user.Email = Email;
  return View(user);
} 
```

我的 UserDetailViewModel：

```
 namespace Zinc.Web.Areas.Admin.ViewModels.User

  public class UserDetailViewModel
  {
    [LocalizedRequired]
    [DisplayName("UserId")]
    public int UserId { get; set; }

    [LocalizedRequired]
    [DisplayName("Email")]
    public string Email { get; set; }
  } 
```

我有用户的 ID，但需要获取其他详细信息，例如电子邮件、姓名、姓氏等。我现在刚刚放下电子邮件。我必须将另一个具有这些详细信息的模型传递到视图中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:05:24.380

您需要将所有这些属性添加到您的视图模型中（即`UserDetailViewModel`）。

然后创建一个方法，该方法可以获取值并将它们设置为使用`id`作为参数的属性：

```
[HttpGet]
public ActionResult Detail(int userId)
{
   UserDetailModel user = GetUser(userid);
   UserDetailViewModel model = new UserDetailViewModel;
   model.UserId = user.UserId;
   model.Email = user.Email;
   model.Name = user.Name;
   //etc...
   return View(model);
} 
```

示例`GetUser`：

```
public UserDetailModel GetUser(userId){
   //Do some data access here
   UserDetailModel user = new UserDetailModel;
   user.UserId = //Set from data accessed
   //etc..
   return user;
} 
```

将其应用于通用模型而不是您的视图模型的优势在于，它可以应用于其他视图模型，而无需为相同数据的数据访问创建多种方法。

# json - 泽西岛中用于 JSON 序列化的 JAXB 注释 POJO 为每个字段类型返回字符串

> ID：12953092
> 
> 赞同：6
> 
> 时间：2012-10-18T11:01:09.180
> 
> 标签：json, jaxb, jersey, jackson, jax-rs

我正在使用 Jersey 为服务器组件创建 Web 服务。不幸的是，我的 JSON 响应的格式存在问题，因为数据始终被格式化为字符串。

我有一个带有不同字段类型的简单 JAXB 注释 POJO：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class JaxbPojo {

    @XmlElement(name = "id_64")
    private Long id;

    @XmlElement(name = "desc")
    private String description;

    private Boolean active;

    // getters and setters
    ..
} 
```

和一个简单的资源，返回传入的对象：

```
@Path("/jaxb_pojo")
public class JaxbPojoResource {

    @POST
    @Consumes({ MediaType.APPLICATION_JSON })
    @Produces({ MediaType.APPLICATION_JSON })
    public JaxbPojo processBidRequest(JaxbPojo pojo) {
         return pojo;
    }

} 
```

当使用以下 JSON 数据向资源发送请求时，该对象在资源方法中被正确填充。但是返回的 JSON 数据的字段类型总是格式化为字符串：

```
me@host:/tmp $ cat simple_jaxb_pojo 
{"id_64":99,"desc":"simple JAXB POJO","active":true}

me@host:/tmp $ curl -X POST -H "Content-Type: application/json" --data-binary @simple_jaxb_pojo http://localhost/srvr/rest/jaxb_pojo
{"id_64":"99","desc":"simple JAXB POJO","active":"true"} 
```

所有使用的 jar 文件（jsr311-api-1.1.1.jar、jersey-core-1.6.jar、jersey-json-1.6.jar、jersey-server-1.6.jar）都直接包含在 tomcat/lib 路径中。JAX-RS 库通过 Maven pom.xml 使用，范围为“提供”：

```
<dependency>
    <groupId>javax.ws.rs</groupId>
    <artifactId>jsr311-api</artifactId>
    <version>1.1.1</version>
    <scope>provided</scope>
</dependency> 
```

我的 web.xml 看起来像这样：

```
<servlet>
    <servlet-name>RestServlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.rest.RestResourcesApplication</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

..

<servlet-mapping>
    <servlet-name>RestServlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

我是否遗漏了什么，或者我是否必须以使用我的 POJO 类型的方式显式配置 Jackson。我对这个主题相当陌生，所以我发布了我所拥有的所有信息。我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:55:18.870

有趣的问题。我不确定为什么会发生这种情况，但请尝试添加：

```
 <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param> 
```

到 web.xml 中的 Jersey servlet 定义。我认为 Jersey 需要它来生成 JSON，但是当我删除这个 init-param 时，我看到了你遇到的同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:08:07.883

user463324 的解决方案很好。通常，您可以使用此解决方案将 Java 对象转换为 JSON 并返回。它基于杰克逊图书馆。

如果你想获得基于 JAXB 的 JSON，提供了一些配置选项，这样你就可以控制如何序列化和反序列化。对于默认配置，您将获得字符串格式，就像您指出的问题一样。

要实现更重要的 JSON 格式更改，您需要配置 Jersey JSON 处理器本身。可以在 JSONConfiguration 实例上设置各种配置选项。然后可以进一步使用该实例来创建 JSONConfigurated JSONJAXBContext，作为该区域的主要配置点。要将您的专用 JSONJAXBContext 传递给 Jersey，您最终需要实现一个 JAXBContext ContextResolver：

```
 @Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {

    private final JAXBContext context;
    private final Set<Class> types;
    private Class[] ctypes = { JaxbPojo.class};
    public JAXBContextResolver() throws Exception {
        this.types = new HashSet(Arrays.asList(ctypes));
        this.context = new JSONJAXBContext(JSONConfiguration.natural().build(),
                ctypes);
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {
        return (types.contains(objectType)) ? context : null;
    }
} 
```

详细信息可以参考[球衣官方文档](http://jersey.java.net/nonav/documentation/latest/json.html)。

# xcode - 具有相同 xcode 版本的 Mac Pro 和 MacBook Pro 之间的音频质量不同

> ID：12953099
> 
> 赞同：1
> 
> 时间：2012-10-18T11:01:26.057
> 
> 标签：xcode, macos, audio, audio-streaming, portaudio

我在 MacBook Pro（Intel Core 2 Duo 2.66 GHz）上用 xcode（使用 portaudio）编写了一个程序。Release 运行没有问题（清晰的音频流），CPU 使用率接近 90%。当我在 Mac Pro（四核 Intel Xeon 2.8 GHz）上运行 Release 时出现问题。尽管 CPU 使用率比 MacBook Pro 低四倍，但在计算量很大时，音频流并不清晰（点击次数很少）。

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:04:45.233

4 核系统中 25% 的 CPU 使用率意味着一个核心 100% 负载。另外，我假设 Xeon 是 Pentium4 Xeon，它的 CPU 内核比 Core2Duo 差得多，尽管时钟频率有点高......

# xcode - XCode不保存文件

> ID：12953102
> 
> 赞同：0
> 
> 时间：2012-10-18T11:01:47.397
> 
> 标签：xcode, xcode4

我无法使用 xcode 保存任何文件，当我保存/运行代码时收到以下警告“无法保存文档 XXXXXX。您没有权限。要查看或更改权限，请选择该项目在 Finder 中选择“文件”>“获取信息”。”。我已经尝试了其他问题中针对此问题提供的所有解决方案，但这无济于事。有没有人对此有解决方案？一切都很好，直到上周和本周，我安装了 JIRA 和 mysql，之后我开始面临这个问题。不确定 JIRA 和 mysql 安装是否导致了这个问题，尝试卸载这些，还没有希望 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:41:02.020

这是您的mac权限问题，要解决此问题，请尝试使用本[教程](http://osxdaily.com/2011/11/15/repair-user-permissions-in-mac-os-x-lion/)重置您的用户权限，如果没有成功，请使用此[解决方案](https://discussions.apple.com/thread/3897436?start=0&tstart=0)解决问题。

# objective-c - 我在 Xcode 中存储 LinkedIn 访问令牌后的下一步是什么

> ID：12953103
> 
> 赞同：1
> 
> 时间：2012-10-18T11:01:47.823
> 
> 标签：objective-c, xcode, linkedin, access-token

我已经很久没有在这个问题上绞尽脑汁了。

我知道如何将 LinkedIn 集成到我的原生 iPhone 应用程序中。我也对 OAuth 的工作原理有所了解，所以我从[https://github.com/synedra/LinkedIn-OAuth-Sample-Client下载了 OAuthStarterKit](https://github.com/synedra/LinkedIn-OAuth-Sample-Client)

我做了一些研究，发现我在这里生成的访问令牌“ - (id)initWithHTTPResponseBody:(const NSString *)body ”

现在我可以将它存储到钥匙串中，或者我实际上可以将它存储在数据库中。我理解那部分。现在我的问题来了，下一步该怎么做？我希望 api 调用使用此访问令牌，我应该为此编写什么代码。

OATokenManager.m 中的方法有保存代码，但我似乎无法理解实际发生了什么？

Linkedin Developer 站点上的所有文档和线程都有 Javascript 或 Ruby on Rails 的代码，但我需要它用于 Xcode（目标 c），我真的需要帮助。

很抱歉，我知道我的身体有点乱，但请建议我会相应地对其进行编辑，但请不要投反对票。

# javascript - Highcharts - 在导出时隐藏字幕

> ID：12953105
> 
> 赞同：0
> 
> 时间：2012-10-18T11:01:50.267
> 
> 标签：javascript, highcharts

我有一个带有时间序列和缩放的图表。如果将图表导出为 pdf 或图像时不出现对了解如何缩放非常有用的副标题（“在绘图区域中单击并拖动以放大”）会更好。

所以我想知道是否有办法隐藏它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:58:19.393

Here is a [**example**](http://jsfiddle.net/PMyHQ/390/) on how to do what you are asking. The part does the subtitle manipulation is:

```
exporting: {
   buttons: {
      exportButton: {
         menuItems: null,
         onclick: function() {
            chart.exportChart(null, {subtitle: {text:''}});
         }  
      },
      printButton: {
         onclick: function() {
            chart.setTitle(null, { text: ' ' });
            chart.print();
            chart.setTitle(null, { text: 'Click and drag in the plot area to zoom in' });
         }
      }
   }
}, 
```

**EDIT:**

**Sedondary option**

You could remove the Highcharts generated print and export buttons. Then create your own print and export buttons along with a drop down for selecting the export type. Then if the export button is clicked, check the type and export as the type and without the sub title. Here is an [**example**](http://jsfiddle.net/348sh/3/). Here is the code that handles the export and print button clicks:

```
$('#buttonExport').click(function() {
    var e = document.getElementById("ExportOption");
    var ExportAs = e.options[e.selectedIndex].value;   

    if(ExportAs == 'PNG')
    {
        chart.exportChart({type: 'image/png', filename: 'my-png'}, {subtitle: {text:''}});
    }
    if(ExportAs == 'JPEG')
    {
        chart.exportChart({type: 'image/jpeg', filename: 'my-jpg'}, {subtitle: {text:''}});
    }
    if(ExportAs == 'PDF')
    {
        chart.exportChart({type: 'application/pdf', filename: 'my-pdf'}, {subtitle: {text:''}});
    }
    if(ExportAs == 'SVG')
    {
        chart.exportChart({type: 'image/svg+xml', filename: 'my-svg'}, {subtitle: {text:''}});
    }
}); 

$('#buttonPrint').click(function() {
     chart.setTitle(null, { text: ' ' });
     chart.print();
     chart.setTitle(null, { text: 'Click and drag in the plot area to zoom in' });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T16:17:35.267

如果有人在他们的页面上有翻译并想要打印图表，我做了另一个保留字幕的示例。只需在@Linger 答案上添加一个变量：

```
var subtitle = this.options.subtitle.text;
chart.setTitle(null, { text: ' ' });
        chart.print();
        chart.setTitle(null, { text: subtitle }); 
```

此处的示例代码：http: [//jsfiddle.net/pb6tbx7u/](http://jsfiddle.net/pb6tbx7u/)

# jsf - 如何在从 Facelets 页面接收的请求中允许 UTF-8 数据

> ID：12953106
> 
> 赞同：1
> 
> 时间：2012-10-18T11:01:48.863
> 
> 标签：jsf, utf-8, jboss, facelets, jboss7.x

我正在使用 JBoss AS 7。我创建了一个绑定到托管 bean 的 Facelets 页面。我的页面中有 JSF 输入文本字段。如果我在输入文本字段中写入一些特殊字符并提交页面，那么它会向服务器发送请求。但是特殊字符已经转换为其他一些字符。我在 Facelets 页面中添加了 UTF-8 支持标签，但我仍然没有在服务器端获取 UTF-8 数据。我是否需要在 JBoss 服务器上添加一些设置以便它可以接受 UTF-8 数据？

我添加了一个简单的文本字段

`<h:inputText value="#{myBean.value}" />`

并写了这样的文字
`"“ ©” ‘with special character’ — » É €"`

我在服务器上添加了一个断点并检查了值，我得到了这样的东西

`Ã¢ÂÂ ÃÂ©Ã¢ÂÂ Ã¢ÂÂwith special characterÃ¢ÂÂ Ã¢ÂÂ ÃÂ» ÃÂ Ã¢ÂÂ¬`

我不知道如何在服务器端获得实际价值

# c++ - 如何通过好友函数调用私有函数？

> ID：12953107
> 
> 赞同：3
> 
> 时间：2012-10-18T11:01:51.233
> 
> 标签：c++, visual-studio-2010, googletest

您好我正在尝试访问私有成员函数是`Gtest`. 代码看起来与此有些相似。那么，我该如何访问`static void Pri_fun`？

```
using namespace std;
class test{

};
class abc{
public:
    friend class test;
private:
    static void Pri_fun()
        {
        cout << "private fun called \n";
        }
};
int main()
{
    abc ab;
    test *abd;
    abd->Pri_fun();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:02:58.940

由于它是一个静态函数，您应该通过类名访问它：

```
abc::Pri_fun(); 
```

不过，您应该创建一个调用函数，或者从朋友类的构造函数中调用它：

```
class test{
public:
    void foo() 
    {
        abc::Pri_fun();
    }
}; 
```

或者

```
class test{
public:
    test() 
    {
        abc::Pri_fun();
    }
}; 
```

# iphone - if([labelView.layer containsPoint:touchPoint]) 在 Xcode 中不起作用

> ID：12953108
> 
> 赞同：0
> 
> 时间：2012-10-18T11:01:56.010
> 
> 标签：iphone, objective-c, ios, cocoa-touch

谁能告诉我，我`UIPangesture`在拖动和释放鼠标时使用了可拖动标签，我正在使用它找到接触点

```
CGPoint touchPoint = [panGesture locationInView:self.view]; 
```

现在我想检查这个标签是在哪个标签上拖动的。为此，我正在使用此代码

```
for(UILabel *labelView in self.view.subviews){
    if ([labelView isMemberOfClass:[UILabel class]]) {

        NSLog(@"%@",NSStringFromCGPoint(touchPoint ));

        NSLog(@"%@",NSStringFromCGRect(labelView.layer.frame));

        if([labelView.layer containsPoint:touchPoint]){

            int i=[[labelView.subviews objectAtIndex:0] tag];

            NSLog(@">>>> %d",i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:05:55.320

传递给手势处理程序方法的 panGesture 具有属性“视图”，它指向您使用识别器设置的 UILabel 对象

**编辑：** * *- 上面的答案是错误的。感谢 Jacky 指出我——* *

self.view 的 hitTest:withEvent: 方法将返回该点的视图。将 nil 传递给 withEvent：

如果 self.view 也有 UILabel 以外的子视图，并且您想避免返回其中之一，请致电

```
bool CGRectContainsPoint (
   CGRect rect,
   CGPoint point
); 
```

对于每个标签。为矩形传递框架，为点传递接触点

```
for(UILabel *labelView in self.view.subviews){
    if ([labelView isMemberOfClass:[UILabel class]]) {
        if(CGRectContainsPoint(labelView.frame,touchPoint)){
            int i=[[labelView.subviews objectAtIndex:0] tag];
            NSLog(@">>>> %d",i);
        }
    }
} 
```

**编辑：** .layer 的 containsPoint: 不起作用的原因：

> thePoint 接收器坐标系中的一个点。

在您的代码中，touchPoint 位于 self.view 的坐标系中，该坐标系不同于任何标签的坐标系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:19:02.960

感谢回复。这对我有用

```
if ([labelView.layer containsPoint:[labelView.layer convertPoint:touchPoint fromLayer:labelView.layer.superlayer]] == TRUE) 
```

但你的回答也是正确的，我已经检查过了。

# jquery - 如何避免在 javascript 和后端中重复 HTML？

> ID：12953109
> 
> 赞同：2
> 
> 时间：2012-10-18T11:01:59.393
> 
> 标签：jquery, django, code-duplication

我正在编写一个类似 facebook 的发布系统，用户可以在其中输入文本评论并让它立即出现在页面上的一个正确样式和格式的框中，同时文本被 ajax'd 到后端进行存储。评论基本上是 HTML5 ，但它的结构相当复杂，因此实际文本应该最终出现在文章中的 div 中的 div 中的 div 中。我正在用 jquery 做这个 DOM 操作。

生成页面时，后端需要遍历每条评论，并将评论文本（以及海报名称、时间戳等元数据）插入 django 模板中的适当位置。

这提出了一个概念性问题 - 我现在在我的代码中的两个位置复制一组相当复杂的嵌套 html 标记，其中包含适当的类和 id 名称：带有 jquery 的 js 文件以添加新注释，以及后端模板引擎生成初始页面html。这对我来说已经是一个问题，因为我仍在设计评论中需要在样式方面发生的确切内容，并且在我的代码中的两个地方有这个复杂的 HTML 包已经让我绊倒了。

处理这种 HTML 重复的最佳实践是什么？我无法删除 jquery，因为我需要它来处理动态添加评论。同时，放弃 django 的模板引擎的功能来构建我需要的 HTML 结构并在每个评论的基础上填写详细信息似乎很浪费 - 加上我不想总是呈现空白页面和每次用户加载页面时，使用 jquery DOM 操作动态构建可能非常多的评论。有什么我没有想到的可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:08:42.863

只需使用模板而不是 JSON 让您的 Ajax 处理视图返回呈现的 HTML 片段，jQuery 只需将它们插入正确的位置，而不是从原始数据构建它们。

# django - 在大规模 Django 代码重组期间，“没有名为 foobar 的模块”；foo 和 bar 是我的应用程序的一部分，但不是 foobar

> ID：12953110
> 
> 赞同：1
> 
> 时间：2012-10-18T11:02:02.300
> 
> 标签：django

我正在对我的 Django 项目进行大规模的代码重组，以将其拆分为应用程序。

在移动了很多代码之后，当我尝试运行项目时出现此错误：

`Error: no module named foobar`

请注意，`foo`和`bar`都是我项目中 Django 应用程序的名称，但我没有类似`foobar`的东西。

`grep foobar . -r`= 没有结果。

`find . -name '*foobar*'`= 没有结果。

我难住了。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:12:00.173

您在 foo 和 bar 之间的 settings.py 中安装的应用程序中缺少逗号

INSTALLED_APPS=['foo','bar']

# javascript - 拨打电话时如何不一直显示手机屏幕？

> ID：12953113
> 
> 赞同：10
> 
> 时间：2012-10-18T11:02:18.520
> 
> 标签：javascript, android

我编写了一个应用程序，其中包括在后台运行的服务，以及一个 GUI，其中包括（除其他外）呼叫预定义号码的能力。现在 - 当用户按下按钮拨打电话时 - 通话正常 - 屏幕变为电话的 GUI。我宁愿应用程序保持在视图中并且手机根本没有显示 - 但我可以忍受它短暂显示。然而，要返回应用程序，用户必须手动单击手机上的“返回按钮”。如果可能的话，我希望立即发生这种情况。我已经尝试使用 PhoneStateListener——我已经将它用于其他东西（在应用程序的服务部分）——但似乎无法检测到正在拨打的电话，然后再次显示主屏幕。

建议将不胜感激！提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:27:02.307

如果您需要对通话体验进行如此精细的控制，为什么不直接使用 Twilio Client？

[http://www.twilio.com/client/mobile](http://www.twilio.com/client/mobile)

这使您可以控制整个语音体验。

# jsp - JSP Rabbitmq：如何消费下一条消息

> ID：12953121
> 
> 赞同：2
> 
> 时间：2012-10-18T11:02:50.630
> 
> 标签：jsp, servlets, rabbitmq

在 JSP 中，当我到达“QueueingConsumer.Delivery Delivery = consumer.nextDelivery()”时，页面被卡住了加载。消息已被使用，但 jsp 不会加载，也不会出错。请帮忙

```
String QUEUE_NAME = "hello";

ConnectionFactory factory = new ConnectionFactory();
factory.setHost("localhost");
Connection connection = factory.newConnection();
Channel channel = connection.createChannel();

channel.queueDeclare(QUEUE_NAME, false, false, false, null);
out.println(" [*] Waiting for messages. To exit press CTRL+C");

QueueingConsumer consumer = new QueueingConsumer(channel);
channel.basicConsume(QUEUE_NAME, true, consumer);

while (true) {
  QueueingConsumer.Delivery delivery = consumer.nextDelivery();
  String message = new String(delivery.getBody());
  out.println(" [x] Received '" + message + "'");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:36:28.870

我猜您正在尝试在 JSP 页面中实现[RabbitMQ“Hello World”教程。](http://www.rabbitmq.com/tutorials/tutorial-one-java.html)你不能这样做：

*   QueueingConsumer.nextDelivery 将阻塞，直到队列中有消息可用
*   要在到达队列头部时显示所有消息，您需要一个在 JSP 页面中不起作用的无限循环（如教程中所示）。

您的 JSP 页面是请求生命周期的一部分，它需要尽快结束并将请求的资源（在本例中为您的 JSP 页面中的 HTML 等）返回给用户的浏览器。尽管大多数浏览器会在收到结果时开始显示结果，但它们不会处理长时间的中断或无休止的响应。即使他们可以，您也不希望这样做，因为您的服务器可以处理的并发请求数量会受到限制。

如果您正在使用 RabbitMQ 来了解它是如何工作的，那么我建议您开发一个 Java 应用程序（按照教程），即不要尝试在 webapp 中进行。（另外，正如 fvu 所指出的，请注意 QueueingConsumer 现在已弃用）。

如果您需要在 web 应用程序中执行此操作，那么您需要考虑一种存储消息的方法（例如，如果您有单个 Tomcat 实例，则在数据库或单例数据结构中），因为它们已从消息队列中取出（可能由后台线程，即不是服务请求的线程）。然后，您的 JSP 页面可以从您的数据结构中读取消息以显示给用户。

# c# - 如何使用 PagedDataSource CopyTo()？

> ID：12953122
> 
> 赞同：1
> 
> 时间：2012-10-18T11:02:51.487
> 
> 标签：c#, asp.net

调用 ReadInDataFromRssAndReturnArrayWithTheDataStatic 时出现错误，因为 DataSource 无法存储在 CopyTo 方法中指定的数组中。

我想知道我应该如何找到我应该使用的数组类型。下面是我的一些代码：

```
 public static class StillingslisteStatic
    {
        public static string RssSourceStatic { get; set; }
        public static string StillingssideStatic { get; set; }
        //This contains all of the data from the rss-file!!
        public static PagedDataSource PgdsPositionsStatic { get; set; }

        //This function is written by Anders Branderud
        public static DataView[] ReadInDataFromRssAndReturnArrayWithTheDataStatic(PageData ledigeStillingerPage)
        {
            DataView[] myObjArray = null; //I also tried with DataTable

            if (ledigeStillingerPage["Stillingsside"] != null)
                StillingssideStatic = ledigeStillingerPage["Stillingsside"].ToString();
            if (ledigeStillingerPage["RssSource"] != null) RssSourceStatic = (string)ledigeStillingerPage["RssSource"];

            if (!string.IsNullOrEmpty(RssSourceStatic))
            {
                FilterTableStatic(LoadFeedStatic(RssSourceStatic, ledigeStillingerPage), 100); //This initializes PgdsPositionsStatic
                myObjArray = new DataView[PgdsPositionsStatic.Count]; //one DataTable  is one item
                PgdsPositionsStatic.CopyTo(myObjArray, 0);
            }

            return myObjArray;
        }

        private static DataTable LoadFeedStatic(string url, PageData ledigeStillingerPage)
        {

            var reader = new XmlTextReader(url);
            var ds = new DataSet();
            ds.ReadXml(reader);

            foreach (DataTable table in ds.Tables)
            {
                if (table.TableName == "item")
                {
                    return table;
                }
            }
            return null;
        }

        private static void FilterTableStatic(DataTable table2Filter, int count)
        {
            PgdsPositionsStatic = new PagedDataSource();
            if (table2Filter == null) return;

            int counter = 1;
            var deleteItems = new DataRow[table2Filter.Rows.Count];
            foreach (DataRow row in table2Filter.Rows)
            {
                if (counter > count)
                    deleteItems[counter - count] = row; ;
                counter++;
            }
            for (int i = 0; i < (counter - count); i++)
            {
                var row = (DataRow)deleteItems[i];
                if (row == null)
                    continue;
                table2Filter.Rows.Remove(row);
            }
            PgdsPositionsStatic.DataSource = table2Filter.DefaultView;
        } 
```

错误信息：

```
{"Message":"Object cannot be stored in an array of this type.","StackTrace":"   at System.Array.InternalSetValue(Void* target, Object value)\r\n   at System.Array.SetValue(Object value, Int32 index)\r\n   at System.Web.UI.WebControls.PagedDataSource.CopyTo(Array array, Int32 index)\r\n   at 
```

# python - Python：如何提高脚本的性能以获取一组点的边界框

> ID：12953125
> 
> 赞同：3
> 
> 时间：2012-10-18T11:02:56.613
> 
> 标签：python, performance, memory-management, coding-style

我有一组点（x 和 y），我想知道 X 和 Y（边界框）的最大值和最小值。我对这些行进行了编码，在这些行中我使用列表理解读取了所有点，然后在 X 和 Y 上使用了 max 和 min。最后我删除了这些点。

这个解决方案不是内存效率，因为我需要读取所有点

```
points = [(p.x,p.y) for p in lasfile.File(inFile,None,'r')] # read in list comprehension
X_Max = max(zip(*points)[0])
X_Min = min(zip(*points)[0])
Y_Max = max(zip(*points)[1])
Y_Min = min(zip(*points)[1])
del points 
```

我要求建议避免此步骤（将所有点存储在内存中）。提前感谢詹尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:11:58.787

```
X_Max = float('-inf')
X_Min = float('+inf')
Y_Max = float('-inf')
Y_Min = float('+inf')

for p in lasfile.File(inFile,None,'r'):
    X_Max = max(X_Max, p.x)
    X_Min = min(X_Min, p.x)
    Y_Max = max(Y_Max, p.y)
    Y_Min = min(Y_Min, p.y) 
```

这样，您只需在文件上循环一次，并避免一次在内存中拥有多个点。

**EDIT** `File()`提供了一个迭代器，它一次只从文件中读取一行，`p`并在需要时将其提供给循环变量。

在您的问题中，您在初始点分配周围使用了方括号。这是一个列表推导，顾名思义，它创建了一个列表——所以从那时起所有的点都保存在内存中。如果您像这样使用括号：

```
points = ((p.x,p.y) for p in lasfile.File(inFile,None,'r'))

X_Max = float('-inf')
X_Min = float('+inf')
Y_Max = float('-inf')
Y_Min = float('+inf')

for p in points:
    X_Max = max(X_Max, p.x)
    X_Min = min(X_Min, p.x)
    Y_Max = max(Y_Max, p.y)
    Y_Min = min(Y_Min, p.y) 
```

...然后 Python 不会创建一个列表，而是一个生成器/迭代器——它会一次返回一个点，直到文件用完。这将避免同时在内存中拥有所有点 - 但只能迭代一次。

不过，为了简单起见，我放弃了创建一个额外的迭代器，而是`lasfile.File()`直接使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:10:03.730

您可以使用生成器表达式 for`points`并使用`key`参数 for [`max`](http://docs.python.org/library/functions.html#max)and [`min`](http://docs.python.org/library/functions.html#min)：

```
from itertools import tee
points = ((p.x,p.y) for p in lasfile.File(inFile,None,'r'))
points = tee(points, 4)

X_Max = max(points[0], key=lambda x:x[0])[0]
X_Min = min(points[1], key=lambda x:x[0])[0]
Y_Max = max(points[2], key=lambda x:x[1])[1]
Y_Min = min(points[3], key=lambda x:x[1])[1] 
```

**更新：**

我添加了对[itertools.tee](http://docs.python.org/library/itertools.html#itertools.tee)的调用以复制原始生成器。

如评论中所述，此解决方案的缺点是您必须（不必要地）对文件进行 4 次迭代。[正如@SteveMayne](https://stackoverflow.com/a/12953279/637284)所做的那样，计算每次迭代的最大值和最小值，可以避免这种情况。

# c++ - 什么是复制省略和返回值优化？

> ID：12953127
> 
> 赞同：459
> 
> 时间：2012-10-18T11:03:03.340
> 
> 标签：c++, optimization, c++-faq, return-value-optimization, copy-elision

什么是复制省略？什么是（命名的）返回值优化？它们意味着什么？

它们会在什么情况下发生？什么是限制？

*   如果您被提及此问题，您可能正在寻找[**介绍**](https://stackoverflow.com/a/12953129/673730)。
*   有关技术概述，请参阅[**标准参考**](https://stackoverflow.com/a/12953145/673730)。
*   [在此处](https://stackoverflow.com/a/12953150/673730)查看[**常见案例**](https://stackoverflow.com/a/12953150/673730)。

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-10-18T11:03:03.340

## 介绍

对于技术概述 -[跳到这个答案](https://stackoverflow.com/a/12953145/673730)。

对于发生复制省略的常见情况，请[跳至此答案](https://stackoverflow.com/a/12953150/673730)。

复制省略是大多数编译器实现的一种优化，用于在某些情况下防止额外的（可能是昂贵的）复制。它使按值返回或按值传递在实践中可行（有限制）。

这是省略（哈哈！）as-if 规则的唯一优化形式 -**即使复制/移动对象有副作用，也可以应用复制省略**。

以下示例取自[维基百科](http://en.wikipedia.org/wiki/Return_value_optimization)：

```
struct C {
  C() {}
  C(const C&) { std::cout << "A copy was made.\n"; }
};

C f() {
  return C();
}

int main() {
  std::cout << "Hello World!\n";
  C obj = f();
} 
```

根据编译器和设置，以下输出**都是有效**的：

> 你好世界！
> 制作了一份副本。
> 制作了一份副本。

* * *

> 你好世界！
> 制作了一份副本。

* * *

> 你好世界！

这也意味着可以创建更少的对象，因此您也不能依赖于调用特定数量的析构函数。您不应该在复制/移动构造函数或析构函数中包含关键逻辑，因为您不能依赖它们被调用。

如果省略了对复制或移动构造函数的调用，则该构造函数必须仍然存在并且必须是可访问的。这确保复制省略不允许复制通常不可复制的对象，例如因为它们具有私有或已删除的复制/移动构造函数。

**C++17**：从 C++17 开始，直接返回对象时保证复制省略：

```
struct C {
  C() {}
  C(const C&) { std::cout << "A copy was made.\n"; }
};

C f() {
  return C(); //Definitely performs copy elision
}
C g() {
    C c;
    return c; //Maybe performs copy elision
}

int main() {
  std::cout << "Hello World!\n";
  C obj = f(); //Copy constructor isn't called
} 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-10-18T11:03:51.627

## Standard reference

For a less technical view & introduction - [skip to this answer](https://stackoverflow.com/a/12953129/673730).

For common cases where copy elision occurs - [skip to this answer](https://stackoverflow.com/a/12953150/673730).

**Copy elision** is defined in the standard in:

### 12.8 Copying and moving class objects [class.copy]

as

> 31) When certain criteria are met, an implementation is allowed to omit the copy/move construction of a class object, even if the copy/move constructor and/or destructor for the object have side effects. In such cases, the implementation treats the source and target of the omitted copy/move operation as simply two different ways of referring to the same object, and the destruction of that object occurs at the later of the times when the two objects would have been destroyed without the optimization.^(123) This elision of copy/move operations, called *copy elision*, is permitted in the following circumstances (which may be combined to eliminate multiple copies):
> 
> — in a return statement in a function with a class return type, when the expression is the name of a non-volatile automatic object (other than a function or catch-clause parameter) with the same cvunqualified type as the function return type, the copy/move operation can be omitted by constructing the automatic object directly into the function’s return value
> 
> — in a throw-expression, when the operand is the name of a non-volatile automatic object (other than a function or catch-clause parameter) whose scope does not extend beyond the end of the innermost enclosing try-block (if there is one), the copy/move operation from the operand to the exception object (15.1) can be omitted by constructing the automatic object directly into the exception object
> 
> — when a temporary class object that has not been bound to a reference (12.2) would be copied/moved to a class object with the same cv-unqualified type, the copy/move operation can be omitted by constructing the temporary object directly into the target of the omitted copy/move
> 
> — when the exception-declaration of an exception handler (Clause 15) declares an object of the same type (except for cv-qualification) as the exception object (15.1), the copy/move operation can be omitted by treating the exception-declaration as an alias for the exception object if the meaning of the program will be unchanged except for the execution of constructors and destructors for the object declared by the exception-declaration.
> 
> [123) Because only one object is destroyed instead of two, and one copy/move constructor is not executed, there is still one object destroyed for each one constructed.]

The example given is:

```
class Thing {
public:
  Thing();
  ~Thing();
  Thing(const Thing&);
};
Thing f() {
  Thing t;
  return t;
}
Thing t2 = f(); 
```

and explained:

> Here the criteria for elision can be combined to eliminate two calls to the copy constructor of class `Thing`: the copying of the local automatic object `t` into the temporary object for the return value of function `f()` and the copying of that temporary object into object `t2`. Effectively, the construction of the local object `t` can be viewed as directly initializing the global object `t2`, and that object’s destruction will occur at program exit. Adding a move constructor to Thing has the same effect, but it is the move construction from the temporary object to `t2` that is elided.

* * *

## 回答 #3

> 赞同：109
> 
> 时间：2012-10-18T11:04:05.947

## Common forms of copy elision

For a technical overview - [skip to this answer](https://stackoverflow.com/a/12953145/673730).

For a less technical view & introduction - [skip to this answer](https://stackoverflow.com/a/12953129/673730).

(Named) Return value optimization is a common form of copy elision. It refers to the situation where an object returned by value from a method has its copy elided. The example set forth in the standard illustrates **named return value optimization**, since the object is named.

```
class Thing {
public:
  Thing();
  ~Thing();
  Thing(const Thing&);
};
Thing f() {
  Thing t;
  return t;
}
Thing t2 = f(); 
```

Regular **return value optimization** occurs when a temporary is returned:

```
class Thing {
public:
  Thing();
  ~Thing();
  Thing(const Thing&);
};
Thing f() {
  return Thing();
}
Thing t2 = f(); 
```

Other common places where copy elision takes place is when a **temporary is passed by value**:

```
class Thing {
public:
  Thing();
  ~Thing();
  Thing(const Thing&);
};
void foo(Thing t);

foo(Thing()); 
```

or when an **exception is thrown and caught by value**:

```
struct Thing{
  Thing();
  Thing(const Thing&);
};

void foo() {
  Thing c;
  throw c;
}

int main() {
  try {
    foo();
  }
  catch(Thing c) {  
  }             
} 
```

[Common limitations of copy elision are:](http://msdn.microsoft.com/en-us/library/ms364057%28v=vs.80%29.aspx#nrvo_cpp05_topic3)

*   multiple return points
*   conditional initialization

Most commercial-grade compilers support copy elision & (N)RVO (depending on optimization settings).

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2015-01-13T07:26:05.853

复制省略是一种编译器优化技术，可消除不必要的对象复制/移动。

在以下情况下，允许编译器省略复制/移动操作，因此不调用关联的构造函数：

1.  **NRVO（命名返回值优化）**：如果函数按值返回类类型，并且返回语句的表达式是具有自动存储持续时间的非易失性对象的名称（这不是函数参数），则复制/移动可以省略将由非优化编译器执行的。如果是这样，则返回值直接在存储中构造，否则函数的返回值将被移动或复制到该存储中。
2.  **RVO（返回值优化）**：如果函数返回一个无名的临时对象，该对象将被天真的编译器移动或复制到目标中，则可以按照 1 省略复制或移动。

```
#include <iostream>  
using namespace std;

class ABC  
{  
public:   
    const char *a;  
    ABC()  
     { cout<<"Constructor"<<endl; }  
    ABC(const char *ptr)  
     { cout<<"Constructor"<<endl; }  
    ABC(ABC  &obj)  
     { cout<<"copy constructor"<<endl;}  
    ABC(ABC&& obj)  
    { cout<<"Move constructor"<<endl; }  
    ~ABC()  
    { cout<<"Destructor"<<endl; }  
};

ABC fun123()  
{ ABC obj; return obj; }  

ABC xyz123()  
{  return ABC(); }  

int main()  
{  
    ABC abc;  
    ABC obj1(fun123());    //NRVO  
    ABC obj2(xyz123());    //RVO, not NRVO 
    ABC xyz = "Stack Overflow";//RVO  
    return 0;  
}

**Output without -fno-elide-constructors**  
root@ajay-PC:/home/ajay/c++# ./a.out   
Constructor    
Constructor  
Constructor  
Constructor  
Destructor  
Destructor  
Destructor  
Destructor  

**Output with -fno-elide-constructors**  
root@ajay-PC:/home/ajay/c++# g++ -std=c++11 copy_elision.cpp -fno-elide-constructors    
root@ajay-PC:/home/ajay/c++# ./a.out   
Constructor  
Constructor  
Move constructor  
Destructor  
Move constructor  
Destructor  
Constructor  
Move constructor  
Destructor  
Move constructor  
Destructor  
Constructor  
Move constructor  
Destructor  
Destructor  
Destructor  
Destructor  
Destructor 
```

即使发生复制省略并且未调用复制/移动构造函数，它也必须存在且可访问（就好像根本没有发生优化一样），否则程序格式错误。

您应该只在不会影响软件可观察行为的地方允许此类复制省略。复制省略是唯一允许具有（即省略）可观察到的副作用的优化形式。例子：

```
#include <iostream>     
int n = 0;    
class ABC     
{  public:  
 ABC(int) {}    
 ABC(const ABC& a) { ++n; } // the copy constructor has a visible side effect    
};                     // it modifies an object with static storage duration    

int main()   
{  
  ABC c1(21); // direct-initialization, calls C::C(42)  
  ABC c2 = ABC(21); // copy-initialization, calls C::C( C(42) )  

  std::cout << n << std::endl; // prints 0 if the copy was elided, 1 otherwise
  return 0;  
}

Output without -fno-elide-constructors  
root@ajay-PC:/home/ayadav# g++ -std=c++11 copy_elision.cpp  
root@ajay-PC:/home/ayadav# ./a.out   
0

Output with -fno-elide-constructors  
root@ajay-PC:/home/ayadav# g++ -std=c++11 copy_elision.cpp -fno-elide-constructors  
root@ajay-PC:/home/ayadav# ./a.out   
1 
```

GCC 提供了`-fno-elide-constructors`禁用复制省略的选项。如果您想避免可能的复制省略，请使用`-fno-elide-constructors`.

现在几乎所有编译器都在启用优化时提供复制省略（如果没有设置其他选项来禁用它）。

# 结论

每次复制省略，副本的一个构造和一个匹配销毁都被省略，从而节省了 CPU 时间，并且不创建一个对象，从而节省了堆栈帧上的空间。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-10-15T14:27:18.550

在这里，我给出了我今天显然遇到的另一个复制省略示例。

```
# include <iostream>

class Obj {
public:
  int var1;
  Obj(){
    std::cout<<"In   Obj()"<<"\n";
    var1 =2;
  };
  Obj(const Obj & org){
    std::cout<<"In   Obj(const Obj & org)"<<"\n";
    var1=org.var1+1;
  };
};

int  main(){

  {
    /*const*/ Obj Obj_instance1;  //const doesn't change anything
    Obj Obj_instance2;
    std::cout<<"assignment:"<<"\n";
    Obj_instance2=Obj(Obj(Obj(Obj(Obj_instance1))))   ;
    // in fact expected: 6, but got 3, because of 'copy elision'
    std::cout<<"Obj_instance2.var1:"<<Obj_instance2.var1<<"\n";
  }

} 
```

结果：

```
In   Obj()
In   Obj()
assignment:
In   Obj(const Obj & org)
Obj_instance2.var1:3 
```

# asp.net - 无法在 asp.net Web 应用程序中访问 GAC 程序集

> ID：12953128
> 
> 赞同：2
> 
> 时间：2012-10-18T11:03:05.387
> 
> 标签：asp.net, gac, production

我使用 .net framework 4.0 开发了一个 asp.net Web 应用程序。

我在 GAC 中安装了一些 dll，并在我的 Web 应用程序中添加了它们的引用，以便我可以使用它。这些 dll 在 .net framework 3.5 中编译。

开发后，当我发布我的应用程序并部署在我的本地 IIS 中时，它工作正常。在这个测试之后，我在测试服务器和阶段服务器上部署了相同的内容。并且还在 GAC 中安装了这些所需的 dll。到目前为止一切正常。

但是当我在生产服务器上部署相同的内容并遵循相同的步骤时，它开始给我错误消息“无法加载文件或程序集......”。这表明我的 Web 应用程序无法访问该 GAC 程序集。

我已经尝试了很多来解决这个问题，但找不到任何解决方案。

我在所有环境中发现的一个**主要区别**是，操作系统安装在生产服务器的 D: 中，而操作系统安装在 C: 中的其他环境中，它工作正常。这可能会导致问题。如果是，那么解决方案应该是什么。

我不想将这些 dll 放在我的 BIN 文件夹中，我已经通过这样做进行了测试并且它工作正常。我只能使用安装在 GAC 中的 dll。

请帮我 。

# ruby-on-rails - Rails 3 基于格式和子域的路由约束

> ID：12953136
> 
> 赞同：1
> 
> 时间：2012-10-18T11:03:26.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, rails-routing

这是我的场景

*   我有一个作为资源路由的瓶子模型
*   我有一个子域“foo”

我的要求如下

*   通过 html 格式对 /bottles/* 的任何带有“www”或没有子域的请求应重定向到`/bottles/*whateve`r 到“sub”子域

*   通过 html 格式对“foo”子域发出的请求`/bottles/*whatever`应该直接转到 /bottles/*whatever 而无需任何重定向

*   任何`/bottles/*whatever`通过 json 格式发出的带有“www”或没有子域的请求都应该直接转到 /bottles/*whatever，而无需任何重定向

*   通过 json 格式对“foo”子域发出的请求`/bottles/*whatever`应该直接转到 /bottles/*whatever 而无需任何重定向

这是我的路线.rb

```
scope :constraints => lambda{|req| ((req.subdomain =="" || req.subdomain=="www") && req.format == "html") } do
    match "/bottles/*whatever" => redirect{|p,req| URI.parse(req.url).tap { |x| x.host = "foo.#{x.host}" }.to_s}
    match "/bottles/" => redirect{|p,req| URI.parse(req.url).tap { |x| x.host = "foo.#{x.host}" }.to_s} 
  end

resources :bottles 
```

重定向部分受到约束，以确保我们仅在具有“”或“Www”子域且格式为 html 时才进行重定向，否则直接使用`resources :bottles`.

以上在以下情况下完美运行

*   `me.com/bottles/*whatever with`html被重定向到`sub.me.com/bottles/*whatever`
*   `sub.me.com/bottles/*whatever`用html直接路由到`sub.me.com/bottles/*whatever`
*   `sub.me.com/bottles/*whatever`用json直接路由到`sub.me.com/bottles/*whatever`

但在以下情况下失败

*   `me.com/bottles/*whatever`with`json`没有按预期重定向，但它弄乱了我的`params`，`/bottles/1`应该匹配`resource :bottles`并带我去`bottles#show`with `params[:id]=1`，但它带我去`bottles#show`with `params[:whatver] = 1`，为什么它将我的`id`参数放在`whatever`字段中？当它从未被重定向并且从未匹配约束部分内的路由时..任何想法，下面的一些服务器日志

    在 2012-10-18 15:55:49 +0500 开始 GET "/bottles/1.json" for 127.0.0.1 由 BottlesController#show as JSON 参数处理：{"whatever"=>"1"} 完成 500 内部服务器1ms 内的错误

    ActiveRecord::RecordNotFound（找不到没有 ID 的瓶子）：app/controllers/bottles_controller.rb:16:in `show'

# ruby-on-rails - 如何分组和限制计数

> ID：12953138
> 
> 赞同：3
> 
> 时间：2012-10-18T11:03:31.427
> 
> 标签：ruby-on-rails, postgresql

我正在构建一个 Rails 3.2 应用程序，在这个应用程序中我有两个表（postgres）。一种称为用户，一种称为消息。

在消息表中，我有一个名为 user_id 的列。我需要能够获取每个用户发送了多少条消息并将它们显示在一个列表中，而我只需要获取那些发送了超过 100 条消息的消息。如果这可以在一个电话中完成，那将是完美的。

到目前为止，这是我的代码，它可以获取每个用户发出的消息数量，但我只需要获取超过 100 条消息的消息。

```
@messages = Message.group("user_id").order("count_all DESC").count 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:18:27.553

尝试：

```
@messages = Message.count(:all, :group => 'user_id, HAVING COUNT(*) > 100') 
```

或者

```
@messages = Message.group('user_id').having('COUNT(*) > 100').count 
```

# windows - Unable to remove directory app.publish

> ID：12953143
> 
> 赞同：3
> 
> 时间：2012-10-18T11:03:50.473
> 
> 标签：windows, visual-studio-2012

I can't change permissions on folder. If I try to delete folder I get a "access denied".

It does not help to open VS with admin rights.

The only thing that works is signing out.

I am running Win8

![enter image description here](../Images/957f7b623d7e640a2e640dc2ae9e9967.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T06:38:04.887

确保您没有在后台运行任何锁定这些文件的版本控制程序。我遇到了这个问题，并通过关闭 EasyMercurial 并重新构建来解决它。

# c# - show a windows form from a window service

> ID：12953148
> 
> 赞同：3
> 
> 时间：2012-10-18T11:03:55.917
> 
> 标签：c#, winforms, windows-services

i am creating a window service. my requirement is to display window form from window NT service on particular interval. For testing purpose , i just want to display the form on service start:

```
 protected override void OnStart(string[] args)
        {
            eventLog1.WriteEntry("In OnStart -before form show");

            Messager_Form obj = new Messager_Form();
            obj.Show();
           // System.Diagnostics.Process.Start("calc.exe");
            eventLog1.WriteEntry("In OnStart -after form show");
           // timer1.Start();
        } 
```

it not working. Neither form is showing nor calc process is running. i have found some links [showing pop up](https://stackoverflow.com/questions/8788325/showing-a-popup-form-a-windows-service) , but most of them suggesting WCF. isn't it possible without wcf. can anybody show me the way to achieve this.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:00:59.033

做不到*。在以后不能作为 Windows 服务工作的操作系统中，不允许与桌面交互 - 相反，Windows 服务提供的 UI 显示在[Session 0](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)中，这是一个通常对最终用户不可见的特殊登录会话。

相反，您应该编写一个单独的 Windows 窗体应用程序，该应用程序始终在运行，但并不总是可见（可能使该应用程序[在启动时运行并在](https://stackoverflow.com/questions/674628/how-do-i-set-a-program-to-launch-at-startup)[通知区域](http://blogs.msdn.com/b/oldnewthing/archive/2003/09/10/54831.aspx)中有一个图标）并使用某种形式的[IPC与 Windows 服务通信](https://stackoverflow.com/questions/56121/ipc-mechanisms-in-c-sharp-usage-and-best-practices)

当 Windows 服务希望向用户显示一些 UI 时，它会向应用程序发送一条消息，该应用程序又向最终用户显示所需的 UI。

**或者至少绝对不应该这样做*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:05:17.447

我只是指 StackOverflow 中另一个链接中给出的答案

[如何从与桌面交互的应用程序与 Windows 服务进行通信？](https://stackoverflow.com/questions/84860/how-to-communicate-with-a-windows-service-from-an-application-that-interacts-wit?rq=1)

答案是：

请注意，如果您计划最终在 Windows Vista 或 Windows Server 2008 上进行部署，那么今天可以完成的许多方法都行不通。这是因为引入了一种称为“会话 0 隔离”的新安全功能。

大多数 Windows 服务现在已移至会话 0 中运行，以便将它们与系统的其余部分正确隔离。对此的扩展是，第一个登录系统的用户不再被放置在 Session #0 中，他们被放置在 Session 1 中。因此，隔离将破坏在服务和桌面应用程序之间进行某些类型通信的代码。

今天，在服务和应用程序之间进行通信时，编写可在 Vista 和 Server 2008 上运行的代码的最佳方法是使用适当的跨进程 API，如 RPC、命名管道等。不要使用 SendMessage/PostMessage，因为那样会在会话 0 隔离下失败。

[http://www.microsoft.com/whdc/system/vista/services.mspx](http://www.microsoft.com/whdc/system/vista/services.mspx)

现在，鉴于您的要求，您将陷入困境。对于跨平台问题，我不确定是否支持远程处理。您可能必须下拉并一直回到套接字：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:45:53.563

选中“与桌面交互”框将在 Windows NT、2000、XP 和 2003 上工作，但由于[会话 0 隔离](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSession0Isolation)，该设置不再像您在 Windows Vista 及更高版本中所期望的那样工作。在开发交互式服务之前，您需要[仔细考虑](http://www.coretechnologies.com/WindowsServices/FAQ.html#GUIServices)...

# javascript - 将锚点附加到它后触发 onclick 事件

> ID：12953156
> 
> 赞同：0
> 
> 时间：2012-10-18T11:04:19.393
> 
> 标签：javascript, jquery, onclick

再会，

一段时间以来，我一直在努力做到这一点，我只是想知道我是在做一些非常愚蠢的事情还是在这方面。

该代码从 php 中获取一个 json 对象并正确附加信息。但我无法让它调用附加锚标记上的函数。我首先尝试通过 jQuery 通过其 id 使用 click 函数，但这不起作用，现在我试图通过 onclick 触发事件。

```
 $(document).ready(function(){
    $("#searchBtn2").click(function(){
        $('#searchResults').children().remove();
        var l = document.getElementById('properSearch').value.length;
        if(l > 0){
            var searchjson = 
            {
                "search" : document.getElementById('properSearch').value
            };
            searchjs = JSON.stringify(searchjson);
            var search = {json:searchjs};
            $.ajax({
                type: "POST",
                url: "searchUsers.php",
                data: search,
                success: function(result)
                {     
                    var obj = jQuery.parseJSON(result);
                    $('#searchResults').next().remove();
                    for(var i = 0; i < obj.length; i+=1)
                    {
                        if(obj[i].user_id != localStorage.user_id)
                            $('#searchResults').append("<tr><td id = 'search_row'>" + obj[i].firstname + " " + obj[i].lastname + " </td> <td> <a OnClick = \"add();\" href = '#' id = 'friend_add' class = '" + obj[i].user_id + "' > add </a> </td> </tr> ");
                    }
                },
                error: function()
                {
                    alert('An Error has occured, please try again.');
                }
            });
        }
    });

    function add(){
        alert("clicked");
        //var theClass = this.className;
        //alert( theClass );
    };
}); 
```

编辑：具有开启功能

```
 $(document).ready(function(){
    $("#searchBtn2").click(function(){
        $('#searchResults').children().remove();
        var l = document.getElementById('properSearch').value.length;
        if(l > 0){
            var searchjson = 
            {
                "search" : document.getElementById('properSearch').value
            };
            searchjs = JSON.stringify(searchjson);
            var search = {json:searchjs};
            $.ajax({
                type: "POST",
                url: "searchUsers.php",
                data: search,
                success: function(result)
                {     
                    var obj = jQuery.parseJSON(result);
                    $('#searchResults').next().remove();
                    for(var i = 0; i < obj.length; i+=1)
                    {
                        if(obj[i].user_id != localStorage.user_id)
                            $('#searchResults').append("<tr><td id = 'search_row'>" + obj[i].firstname + " " + obj[i].lastname + " </td> <td> <a href = '#' class = 'friend_add' id = '" + obj[i].user_id + "' > add </a> </td> </tr> ");
                    }
                },
                error: function()
                {
                    alert('An Error has occured, please try again.');
                }
            });
        }
    });

});

$('#searchResults').on('click', '.friend_add', (function(){
    alert("clicked");
)}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:15:18.177

不要使用内联事件处理程序，而是考虑为所有元素提供一个公共类并使用以下方式委派事件`jQuery.on()`：

```
$("#searchResults").on("click", ".friend_add", add); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:08:06.527

内联事件处理程序将无法找到您的 add 函数，因为它是在匿名函数中定义的。尝试在 document.ready 处理程序之外定义 add 。

# objective-c - 如何在 iOS 上使用 AudioUnit.framework 配置帧大小

> ID：12953157
> 
> 赞同：4
> 
> 时间：2012-10-18T11:04:25.213
> 
> 标签：objective-c, core-audio, audiounit

我有一个音频应用程序，我需要捕获麦克风样本以使用 ffmpeg 编码为 mp3

首先配置音频：

```
/**  
     * 我们需要指定我们想要处理的格式。
     * 我们使用线性 PCM 导致其未压缩，我们处理原始数据。
     *更多信息检查。
     *
     * 我们想要 16 位，2 个字节（短字节）每个数据包/帧在 8khz
     */
    AudioStreamBasicDescription 音频格式；
    audioFormat.mSampleRate = SAMPLE_RATE；
    audioFormat.mFormatID = kAudioFormatLinearPCM；
    audioFormat.mFormatFlags = kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger;
    audioFormat.mFramesPerPacket = 1;
    audioFormat.mChannelsPerFrame = 1;
    audioFormat.mBitsPerChannel = audioFormat.mChannelsPerFrame*sizeof(SInt16)*8;
    audioFormat.mBytesPerPacket = audioFormat.mChannelsPerFrame*sizeof(SInt16);
    audioFormat.mBytesPerFrame = audioFormat.mChannelsPerFrame*sizeof(SInt16);

```

录音回调是：

```
静态 OSStatus recordingCallback(void *inRefCon,
                                  AudioUnitRenderActionFlags *ioActionFlags,
                                  const AudioTimeStamp *inTimeStamp,
                                  UInt32 inBusNumber,
                                  UInt32 inNumberFrames,
                                  音频缓冲区列表 *ioData)
{
    NSLog(@"日志记录：%lu", inBusNumber);
    NSLog(@"日志记录：%lu", inNumberFrames);
    NSLog(@"日志记录：%lu", (UInt32)inTimeStamp);

    // 数据在这里渲染
    AudioBuffer 缓冲区；

    // 一个我们检查状态的变量
    OSStatus 状态；

    /**
     这是对拥有回调的对象的引用。
     */
    AudioProcessor *audioProcessor = (__bridge AudioProcessor*) inRefCon;

    /**
     在这一点上我们定义了通道数，也就是单声道
     为 iPhone。帧数通常为 512 或 1024。
     */
    buffer.mDataByteSize = inNumberFrames * sizeof(SInt16); // 样本大小
    缓冲区.mNumberChannels = 1; // 一个通道

    buffer.mData = malloc(inNumberFrames * sizeof(SInt16)); // 缓冲区大小

    // 我们将缓冲区放入缓冲区列表数组中进行渲染
    AudioBufferList 缓冲区列表；
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = 缓冲区；

    // 渲染输入并检查错误
    status = AudioUnitRender([audioProcessor audioUnit], ioActionFlags, inTimeStamp, inBusNumber, inNumberFrames, &bufferList);
    [audioProcessor hasError:status:__FILE__:__LINE__];

    // 在音频处理器中处理缓冲区列表
    [audioProcessor processBuffer:&bufferList];

    // 清理缓冲区
    免费（bufferList.mBuffers[0].mData）；

    //NSLog(@"记录");
    返回无错误；
}

```

有数据：

总线编号 = 1

inNumberFrames = 1024

inTimeStamp = 80444304 // 一直都是相同的 inTimeStamp，这很奇怪

但是，我需要对 mp3 进行编码的帧大小是 1152。我该如何配置它？

如果我做缓冲，那意味着延迟，但我想避免这种情况，因为它是一个实时应用程序。如果我使用这种配置，每个缓冲区我都会得到垃圾尾随样本，1152 - 1024 = 128 个坏样本。所有样品均为 SInt16。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:57:15.237

您可以使用属性配置 AudioUnit 将使用的每个切片的帧数`kAudioUnitProperty_MaximumFramesPerSlice`。但是，我认为在您的情况下最好的解决方案是将传入的音频缓冲到环形缓冲区，然后向您的编码器发出音频可用的信号。由于您要转码为 MP3，因此我不确定在这种情况下实时意味着什么。

# google-maps - MarkerClusterer 未显示在地图上

> ID：12953169
> 
> 赞同：2
> 
> 时间：2012-10-18T11:05:18.130
> 
> 标签：google-maps, markerclusterer

嗨，我尝试将 markerclusterer 添加到我的谷歌地图，但我肯定错过了一些东西，因为标记在地图上，但我看不到集群......

这是我的脚本：

```
//<![CDATA[

  function initialize() {
  var cluster = [];
  var map = new google.maps.Map(document.getElementById("map_canvas"), {
    center: new google.maps.LatLng(<?php echo get_post_meta($find_CODGEO, 'latitude', true); ?>, <?php echo get_post_meta($find_CODGEO, 'longitude', true); ?>),
    zoom: 14,
    mapTypeId: 'roadmap'
  });
  var mcOptions = {gridSize: 10, maxZoom: 15};

  var infoWindow = new google.maps.InfoWindow;

  downloadUrl("/wp-content/themes/codium-extend/search/search_equipements.php?lat=<?php echo get_post_meta($find_CODGEO, 'latitude', true); ?>&lng=<?php echo get_post_meta($find_CODGEO, 'longitude', true); ?>&type=<?php echo $thematiquematch ; ?>&codgeo=<?php echo $CODGEO ; ?>&radius=50", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("sous_type");
      var type = markers[i].getAttribute("sous_type_img");
      var offsetLat = markers[i].getAttribute("lat");
      var offsetLng = markers[i].getAttribute("lng");
      var point = new google.maps.LatLng(offsetLat, offsetLng);
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = 'http://images.commune-mairie.fr/maps/' + type + '.png';
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: 'http://images.commune-mairie.fr/maps/' + type + '.png',
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(markers[i].getAttribute("name"));
                        infowindow.open(map, marker);
                    }
                })(marker, i));
      cluster.push(marker);
    }
    var mc = new MarkerClusterer(map,cluster,mcOptions);

  });

}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]> 
```

这里有一个活生生的例子[http://www.commune-mairie.fr/equipements/lyon-69123/](http://www.commune-mairie.fr/equipements/lyon-69123/)感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:29:32.333

您在循环中执行此操作：

```
bindInfoWindow(marker, map, infoWindow, html);

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
                        return function() {
                            infowindow.setContent(markers[i].getAttribute("name"));
                            infowindow.open(map, marker);
                        }
                    })(marker, i)); 
```

但是你的 bindInfoWindow 函数看起来像这样：

```
 function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    } 
```

因此，您正在复制标记单击事件侦听器。我不确定这会导致 MarkerClusterer 出现问题，但无论如何你都应该整理一下。

# java - 用子字符串解析字符串

> ID：12953173
> 
> 赞同：1
> 
> 时间：2012-10-18T11:05:34.817
> 
> 标签：java

解析字符串的最佳方法是什么

例子

```
SomeName_Some1_Name2_SomeName3 
```

我想出去`SomeName`。最好的方法是什么？使用`substring`和计算位置或者是另一种更好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:13:57.647

您可以匹配`SomeName`用于提取的模式 -

```
 String str= "SomeName_Some1_Name2_SomeName3";
        Pattern ptrn= Pattern.compile("SomeName");
        Matcher matcher = ptrn.matcher(str);
        while(matcher.find()){
            System.out.println(matcher.group());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:08:11.157

*   `_`使用方法通过下划线分割它`split()`
*   从上一步返回的数组中获取索引#0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:09:25.183

如果你知道分隔符，那么你可以试试这个：

```
System.out.println("SomeName_Some1_Name2_SomeName3".split("_")[0]); 
```

另请参阅：[String.split()的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:09:36.057

取决于您的配置以及您是否对其他领域感兴趣。在这种情况下，请使用 _ 分隔符拆分字符串。

如果您只想要字符串的一部分，我会结合 indexOf('_') 进行子字符串化。

如果您想要所有出现次数，您还可以在文本中找到所有出现的“someName”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T11:10:25.183

使用 regex 和 Pattern Matcher API 来获取 SomeName。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T11:10:42.327

干得好：

```
String str = "SomeName_Some1_Name2_SomeName3";
String newStr = str.substring(0, str.indexOf("_"));
System.out.println(newStr); 
```

输出：

```
SomeName 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T11:12:55.437

```
String str = "SomeName_Some1_Name2_SomeName3";
String output = str.split ( "_" ) [ 0 ]; 
```

您将获得作为 SomeName 的输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-18T11:18:09.187

```
String your_String =  "SomeName_Some1_Name2_SomeName3";
your_String = your_String.split("_")[0];
Log.v("log","your string  "+ your_String); 
```

# android - 如何在给定旋转角度的情况下手动绘制箭头 - android

> ID：12953174
> 
> 赞同：1
> 
> 时间：2012-10-18T11:05:38.607
> 
> 标签：android, math, drawing, android-mapview

我想在地图上手动绘制箭头。我没有使用可绘制对象的旋转来解决性能问题，因为如果使用这种技术进行绘制，我有许多叠加层会减慢应用程序的速度。

我将手动绘制箭头，给定一个 gps 点和旋转角度，我需要在该点上绘制箭头。我将扩展覆盖类并在绘制方法上，我将完成绘图工作。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:19:04.427

我在我的应用程序中处理了同样的问题。代码[在github上](https://github.com/bostonbusmap/bostonbusmap/blob/master/src/boston/Bus/Map/ui/BusDrawable.java)

基本上我`draw`在绘制箭头之前覆盖并旋转画布。

```
@Override
public void draw(Canvas canvas) {

    //NOTE: 0, 0 is the bottom center point of the bus icon

    //first draw the bus
    vehicle.draw(canvas);

    //then draw arrow
    if (arrow != null && heading != BusLocation.NO_HEADING)
    {
        //put the arrow in the bus window

        int arrowLeft = -(arrow.getIntrinsicWidth() / 4);
        int arrowTop = -vehicle.getIntrinsicHeight() + arrowTopDiff;

        //NOTE: use integer division when possible. This code is frequently executed
        int arrowWidth = (arrow.getIntrinsicWidth() * 6) / 10;  
        int arrowHeight = (arrow.getIntrinsicHeight() * 6) / 10;
        int arrowRight = arrowLeft + arrowWidth;
        int arrowBottom = arrowTop + arrowHeight;

        arrow.setBounds(arrowLeft, arrowTop, arrowRight, arrowBottom);

        canvas.save();
        //set rotation pivot at the center of the arrow image
        canvas.rotate(heading, arrowLeft + arrowWidth/2, arrowTop + arrowHeight / 2);

        Rect rect = arrow.getBounds();
        arrow.draw(canvas);
        arrow.setBounds(rect);

        canvas.restore();

    }

} 
```

# keyboard - Vim：为什么 noremap 在插入模式下不起作用？

> ID：12953183
> 
> 赞同：6
> 
> 时间：2012-10-18T11:06:01.237
> 
> 标签：keyboard, vim

考虑使用解除箭头键的绑定

```
 noremap <Left>  <NOP>
 noremap <Right> <NOP>
 noremap <Up>    <NOP>
 noremap <Down>  <NOP> 
```

这在正常模式下有效，但在插入模式下*无效*：仍然可以使用箭头键导航。作为一种对策，必须包括

```
 inoremap <Left>  <NOP>
 inoremap <Right> <NOP>
 inoremap <Up>    <NOP>
 inoremap <Down>  <NOP> 
```

但这对我来说真的没有意义，因为我假设`map`并且`noremap`应该在所有模式下工作，而预先`n/v/x/s/o/i/l/c`指定映射仅在该特定模式下工作。是否有一个原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:10:57.057

```
:help map-overview 
```

map（和 noremap）用于正常、可视、选择和操作员挂起模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T11:40:06.007

> 为什么没有包罗万象的模态图，而不是同时发布地图和地图！

这很容易解释：在插入模式映射中，Vim 不会自动切换到正常模式（您可能希望保持插入模式，尽管文本翻译通常是通过`:iabb`而不是 via完成`:imap`的），因此适用的命令集完全不同. 例如，在正常模式下 Ctrl-U 向上滚动，但在插入模式下它会删除行中输入的字符！

`<C-O>`诸如临时从插入模式切换到正常模式的前缀。实际上，甚至经常需要为命令行模式定义不同的前缀，如下例所示：

```
noremap <C-Tab> :<C-U>tabnext<CR>
inoremap <C-Tab> <C-O>:tabnext<CR>
cnoremap <C-Tab> <C-C>:tabnext<CR> 
```

因此，在定义映射时，请始终考虑在哪些模式下需要它们以及是否需要重新映射（`:nmap`vs. `:noremap`，更喜欢后者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T12:50:33.580

与您的预期相反，`noremap`实际上`map`并不适用于所有模式。基于来自 的非常有用的摘要`:help map-listing`，这里列出了可以作为前缀（或在 的情况下为后缀`!`）到`map`、`noremap`、`unmap`和的字符`mapclear`，以及它们适用的模式：

*   （无）– 正常、可视、选择和等待操作员
*   `n`- 普通的
*   `v`- 视觉和选择
*   `x`- 视觉的
*   `s`- 选择
*   `o`– 运营商待定
*   `!`- 插入和命令行
*   `i`- 插入
*   `c`- 命令行
*   `l`– 用于插入、命令行和 Lang-Arg 的 ":lmap" 映射

因此，`noremap`映射在“插入”或“命令行”模式下无效，并且不加考虑，在“可视化”、“选择”或“运算符挂起”模式下也可能无法按预期工作。

然而，映射可以适应在不同的模式下工作，只需更改模式并返回映射即可。例如，`noremap`发出命令行命令但仅在正常模式下工作的映射可以调整为也可以在其他模式下工作，如下例所示：

```
noremap <C-Tab> :<C-U>set list!<CR>
inoremap <C-Tab> <C-O>:set list!<CR>
cnoremap <C-Tab> <C-C>:set list!<CR>:<Up> 
```

`noremap`适用于 Normal、Visual、Select 和 Operator-pending 模式，`:<C-U>`如果 Vim 插入范围，则进入命令行模式然后清除当前行；`inoremap`适用于插入模式，`<C-O>:`暂时退出普通模式，然后进入命令行模式；并`cnoremap`适用于命令行模式，`<C-C>:`退出并重新进入命令行模式以清除行，但与 不同`<C-U>`的是，将其保留在命令历史记录中以便`:<Up>`可以将其恢复。

These three mappings cover all six modes. (Apparently ‘Lang-Arg’ isn't a mode.) There are some corner-cases where it doesn't work, but then there are also some cases it works when I'd have thought it wouldn't, and I don't understand why. Also, most of the modes will loose little things like selections and pending operators, even if the mapped command wouldn't otherwise loose these things. For instance, when in Insert mode, I don't see why the example I've given would need to break the current edit into separate changes in the undo/redo history (try typing `i123<C-O><Esc>456<Esc>u`). To be honest using key mappings to run commands in this way seems like a bit of a hack to me, but I don't know another way.

# c - 命名管道窗口的行为

> ID：12953185
> 
> 赞同：0
> 
> 时间：2012-10-18T11:06:11.937
> 
> 标签：c, windows, named-pipes

我正在尝试在 Windows 中创建一个带有命名管道的基本服务器。尝试连接管道时会出现问题（我怀疑）。

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

int main(){
    HANDLE p1, p2;
    printf("Server...");
    p1 = CreateNamedPipe(TEXT("\\\\.\\PIPE\\pipe1"),PIPE_ACCESS_INBOUND,PIPE_TYPE_BYTE|PIPE_WAIT,3,0,0,0,NULL);
    p2 = CreateNamedPipe(TEXT("\\\\.\\PIPE\\pipe2"),PIPE_ACCESS_OUTBOUND,PIPE_TYPE_BYTE|PIPE_WAIT,3,0,0,0,NULL);
    if(p1 == INVALID_HANDLE_VALUE || p2 ==  INVALID_HANDLE_VALUE ) { printf("pipe fail");exit(2);}
    printf("1\. Pipes created");
    ConnectNamedPipe(p1,NULL);
    ConnectNamedPipe(p2,NULL);
    printf("2\. Pipes connected");

    DisconnectNamedPipe(p1);
    DisconnectNamedPipe(p2);
    CloseHandle(p1);
    CloseHandle(p2);
    printf("3\. Pipes disconnected & closed");

    printf("exit server...");

    return 0; 
```

}

运行程序时，它不会打印任何内容，当我手动停止它时，它只会打印 `Server...1\. Pipes created`（在我的 IDE 控制台 - Eclipse 中），或者如果我直接运行程序，它会打印相同的内容然后保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:58:23.117

在这里探戈需要两个人。您需要编写另一个调用 CreateFile() 的程序来打开命名管道。只有这样，您的服务器程序中的 ConnectNamedPipe() 调用才会完成。避免在你的测试程序中使用两个管道，管道是双向的，所以你只需要一个管道来来回通信。如果您想支持多个客户端，则只需在建立管道连接后再次调用 ConnectNamedPipe。此时，使用重叠 I/O 或线程也变得很重要。

请查看命名管道的[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365799%28v=vs.85%29.aspx)中包含的示例代码。它向您展示了如何编写服务器和客户端代码。

# symfony - symfony2 autoload.php 在我的电脑上执行，但不在远程

> ID：12953186
> 
> 赞同：0
> 
> 时间：2012-10-18T11:06:12.920
> 
> 标签：symfony, autoload

这是我的`app/autoload.php`

```
use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale        /Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale    /Resources/stubs');
    $loader->add('Stof', __DIR__.'/../vendor/bundles');
    $loader->add('Gedmo', __DIR__.'/../vendor/gedmo-doctrine-extensions/lib');
    $loader->add('Zend\\Search' , __DIR__.'/../src/EWZ/zends');
    $loader->add('EWZ', __DIR__.'/../src/EWZ');
} 
```

问题是，它在我的计算机上执行条件（加载类），而不是在通过 git 下载它的其他计算机上。当我`die`进入条件时，它会为我停止，但不会为其他计算机停止。谁能告诉我这种情况有什么作用？因为过去两个小时我在解决问题方面一直失败得很惨。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:53:53.973

“如果当前版本的 PHP 不存在 intl 扩展，则将输入条件。听起来好像您的远程服务器确实安装了它，但您没有在本地安装。” 机器人大师

# vb.net - SQL命令未将数据网格中的所有值插入数据库，

> ID：12953196
> 
> 赞同：0
> 
> 时间：2012-10-18T11:06:46.747
> 
> 标签：vb.net

我正在尝试将 gridview 数据传递到数据库中。我遇到的问题是，并非我的gridview 中的所有数据都进入了数据库。做一个消息框只显示名称列。这是我的代码

```
Protected Sub Button2_Click1(sender As Object, e As EventArgs) Handles Button2.Click
    Dim sc As StringCollection = New StringCollection
    Dim field1 As String = String.Empty
    Dim i As Integer = 0
    Do While (i < GridView1.Rows.Count)
        field1 = GridView1.Rows(i).Cells(0).Text
        i = (i + 1)
    Loop
    ' get the  field to be Inserted
    sc.Add(field1)
    ' add the field to be Inserted in the StringCollection
    InsertRecords(sc)
    ' call method for insert and pass the StringCollection values

End Sub

Dim conn As MySqlConnection = New MySqlConnection("Server=****************;Database=******;Uid=*******;Pwd=****;allow user variables=true")
    Dim sb As StringBuilder = New StringBuilder(String.Empty)
    For Each item As String In sc
        Const sqlStatement As String = "INSERT INTO student(name, age, adress) VALUES ("
        sb.AppendFormat("{0}'{1}' ", sqlStatement, item)

    Next
    sb.Append(")")

    MsgBox(sb.ToString)

    Try
        conn.Open()
        Dim cmd As MySqlCommand = New MySqlCommand(sb.ToString, conn)
        cmd.CommandType = CommandType.Text
        cmd.ExecuteNonQuery()

    Catch ex As System.Data.SqlClient.SqlException
        Dim msg As String = "Insert Error:"
        msg = (msg + ex.Message)
        Throw New Exception(msg)
    Finally
        conn.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:34:07.113

不要连接字符串来创建 sql 命令，而是使用参数主要避免 sql 注入。

```
Const sqlStatement As String = "INSERT INTO student(name, age, adress) VALUES (?Pname,?Page,?Padress)"
Try
    Using con = New MySqlConnection(connectionString)
        con.Open()
        For Each item In sc
            Using cmd = New MySqlCommand(sqlStatement, con)
                cmd.Parameters.AddWithValue("?Pname", item.Name)
                cmd.Parameters.AddWithValue("?Page", item.Page)
                cmd.Parameters.AddWithValue("?Padress", item.Padress)
                cmd.ExecuteNonQuery()
            End Using
        Next
    End Using
Catch ex As System.Data.SqlClient.SqlException
    ' log message '
    Throw ' don't use throw new Exception or throw ex '
End Try 
```

请注意，我已经使用`sc`了具有所有需要属性的自定义类的集合。但即使这不正确，它也应该让您了解它是如何工作的。

# sql - sql查询限制列中的值数量

> ID：12953197
> 
> 赞同：0
> 
> 时间：2012-10-18T11:06:55.337
> 
> 标签：sql, sql-server-2005, pagination

我在 SQL Server 2005 上工作，其中有两个表，如下所示：

*表格1*

```
ID (Guid) Primarykey
something1 (string)
something2 (string) 
```

和

*表2*

```
ID (Guid) Primarykey
Table1ID (Guid) is a ForeignKey to Table1
OrderNr (int)
something1 (string)
something2 (string) 
```

现在我必须做一个选择查询（这给了我数百个结果），基本上是这样的：`SELECT * from Table2 where something1 = 'foo' order by Table1ID, OrderNr`

特别是顺序很重要，我无法更改。而且这个语句实际上要复杂得多，有很多连接、子选择和 where 等等，但这里不需要它们......

我的问题是，我需要一个特殊的分页：只需选择从 ID 10 到 ID 15 的 20 个不同 Table1ID 的所有行。（这意味着**我想要一个分页，但不是在行数上，而是在此列上唯一值**）

如果我有一个嵌套选择或一个函数调用，它添加了选择语句的迭代数，我可以使用一个 between，但是我如何计算唯一 ID 并将其添加到那里的查询中？

谢谢你的帮助，卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:11:42.577

您可以`ROW_NUMBER`使用`Partition By`：

```
WITH CTE AS
(
   SELCT Columns, ...
       , RN = ROW_NUMBER() OVER (PARTITION BY Table1IDs ORDER BY ID)
   FROM dbo.Table
)
SELECT Columns, ...
FROM CTE
WHERE RN BETWEEN 10 AND 15 
```

（或者我误解了你的要求，这不太可能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:47:28.547

实际上它类似于蒂姆施梅尔特所说的，但不是**`ROW_NUMBER() OVER (PARTITION BY`**......而是**`DENSE_RANK() OVER (ORDER BY Table1ID) AS rank`**

说明： DENSE_RANK 完全符合我的要求。它对表格进行排名，在我的例子中是 Table1ID。效果是，每个 Table1ID 都有自己的 ranknumber。随着**`rank between 10 and 15`**我得到我想要的。

坦克你，卡尔

# mysql - Mysql函数查找两个日期之间的总秒数

> ID：12953200
> 
> 赞同：1
> 
> 时间：2012-10-18T11:07:06.680
> 
> 标签：mysql

假设我的起始日期为 2012 年 17 月 10 日，截止日期为 2012 年 10 月 18 日。我将如何找到可用的总秒数？

**更新**我不想选择已经超过日期的行？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:14:12.560

这是工作演示。

[http://sqlfiddle.com/#!2/d41d8/2869](http://sqlfiddle.com/#!2/d41d8/2869)

```
SELECT UNIX_TIMESTAMP('2012-10-19') - UNIX_TIMESTAMP('2012-10-18') as differece_seconds; 
```

“如果使用日期参数调用 UNIX_TIMESTAMP()，它将返回参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数。”

您可以简单地将它与日期库一起使用。请检查：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:11:03.957

用于[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)获取特定日期的纪元以来的秒数。然后只需减去两个值。

因此，假设值（在某些`DATE`或`DATETIME`中）分别存储在`col1`和`col2`中，使用可以使用如下内容：

```
SELECT UNIX_TIMESTAMP( col1 ) - UNIX_TIMESTAMP( col2 ) AS diff FROM yourTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:10:10.787

假设您的列是正确的`DATE/DATETIME`列而不是问题中的日期字符串，请减去[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

```
SELECT UNIX_TIMESTAMP(date1_column) - UNIX_TIMESTAMP(date2_column) AS difference_seconds 
```

如果您以上面发布的字符串格式存储日期（这是一个坏主意），您需要[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)首先将它们解析为正确的 MySQL 日期。

```
SELECT UNIX_TIMSTAMP(STR_TO_DATE('17/10/2012','%d/%m/%%Y')) - UNIX_TIMSTAMP(STR_TO_DATE('18/10/2012','%d/%m/%%Y')) AS difference_seconds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:29:17.540

```
 select timestampdiff(second,'2012-10-16','2012-10-18'); 
```

输出将是 172800

# cakephp - 用户登录空错误

> ID：12953201
> 
> 赞同：1
> 
> 时间：2012-10-18T11:07:06.990
> 
> 标签：cakephp, login, cakephp-2.1

我正在使用 cakephp 2.1，我在 UsersController 中使用了登录操作，如下所示。

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Invalid email or password, try again', 'default/flash_error');
        }
    }
} 
```

而login.ctp代码如下。

```
<?php echo $this->Form->create('User', array('class' => 'form')); ?>

            <div class="control-group">
                <label class="control-label" for="inputEmail">Email</label>
                <div class="controls">
                    <?php echo $this -> Form -> text('email', array('id' => 'inputEmail', 'placeholder' => 'Email')); ?>
                    <?php echo $this -> Form -> error('email', null, array('wrap' => 'span', 'class' => 'help-block')); ?>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputPassword">Password</label>
                <div class="controls">
                    <?php echo $this -> Form -> password('password', array('id' => 'inputPassword', 'placeholder' => 'Password')); ?>
                    <?php echo $this -> Form -> error('password', null, array('wrap' => 'span', 'class' => 'help-block')); ?>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <label class="checkbox">
                        <input type="checkbox"/>
                        Remember me </label>
                    <?php echo $this->Form->button('Sign in', array('type' => 'submit', 'class' => 'btn')); ?>
                </div>
            </div>
            <?php echo $this->Form->end(); ?> 
```

当表单使用电子邮件和密码提交时，用户无法登录，因此显示错误“电子邮件或密码无效，请重试”。即使我将 $this->request->data['User'] 传递给 $this->Auth->login() 方法并调试了 $this->Session->read(Auth.User.id)。它给了我null。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:09:54.827

您可以尝试传递`$this->request->data`给该`$this->Auth->login()`方法。这不是一个好方法（参见这篇文章：[CakePHP Auth Component Not logging in when using $this->Auth->login();](https://stackoverflow.com/questions/10026379/cakephp-auth-component-not-logging-in-when-using-this-auth-login)），但它对我有用。你调试过`$this->Auth->login()`吗？

# android - 图形布局和模拟器的区别

> ID：12953202
> 
> 赞同：0
> 
> 时间：2012-10-18T11:07:07.307
> 
> 标签：android

我的图形布局视图和正在运行的模拟器视图是不同的。我做了一个横向布局，它在运行模拟器中显示的不同于图形布局的视图。我能做些什么来匹配它们（至少 95%）。我想知道它是否在真实设备中再次显示不同..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:18:39.410

是的，图形布局视图和模拟器视图会有所不同。您可以通过更改视图（横向或纵向）和设备类型来查看与模拟器相同的图形布局中的布局，如下图所示：

![在此处输入图像描述](../Images/09f3cb6a8ef5db650f9ffc5edb9028c4.png)

![在此处输入图像描述](../Images/f98e1cca8a80706f09dfd99513fb2656.png)

# java - Swing：调整 RadioButton 的大小

> ID：12953204
> 
> 赞同：1
> 
> 时间：2012-10-18T11:07:20.750
> 
> 标签：java, swing, resize, jradiobutton, uimanager

我需要在我的应用程序中实现字体大小切换。但是当我增加字体的大小时，RadioButtons 保持相同的大小并且在具有高分辨率的小屏幕上，我的客户无法轻松点击它。有没有办法以编程方式调整 RadioButton 的圆形物体的大小，而无需深入研究 L&F 并手动重新绘制图标（这很复杂，因为应用程序针对具有不同 UI 的多个平台，并且每个平台都必须有 7 个图标）。

完美的解决方案可能如下所示：

1.  提取原生 UI 图标。
2.  调整大小
3.  将调整大小的图标设置为组件的图标。

**如何实施第 1 步？可能吗？**

**编辑**：这是我迄今为止尝试过的

```
public class IconImageSaver extends JFrame{

    public IconImageSaver() {

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setBounds(0,0,100,100);
        setVisible(true);

        JRadioButton rad1 = new JRadioButton();
        rad1.setBounds(10,10,40,40);
        add(rad1);

        Icon icon = UIManager.getIcon("RadioButton.icon");//(1) trying to get icon

        int w = icon.getIconWidth(),h = icon.getIconHeight();
        Image i = rad1.createImage(w, h);
        Image i2 = rad1.createImage(w,h);
        Graphics g = i.getGraphics();
        Graphics g2 = i2.getGraphics();

        g.setColor(Color.CYAN);
        g.fillRect(0, 0, w, h);
        rad1.setIcon(new ImageIcon(i));//setting icons
        g2.setColor(Color.RED);
        g2.fillRect(0, 0, w, h);
        rad1.setPressedIcon(new ImageIcon(i2));//setting icons
    }

    public static void main(String[] args) {
        new IconImageSaver();
    }

} 
```

在位置 (1) 我试图获取图标图像，但它只返回背景颜色。无法理解为什么。为各种状态设置图标按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:14:10.687

一些 L&F（例如*Nimbus*、*Aqua*）支持*大* `JComponent.sizeVariant`的，如[*调整组件大小*](http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/size.html)和[*使用客户端属性*](http://developer.apple.com/mac/library/technotes/tn2007/tn2196.html#USING_PROPERTIES)中所述。

附录：*我必须使用纯原生 L&F*。

a 的呈现`JRadioButton`由其关联的`ButtonUI`委托决定。本地 L&F 提供的委托内部通常无法访问，并且依赖于主机平台 API。您必须使用用户选择的 L&F 的可用功能或提供您自己的功能。如果您能解释更多有关潜在问题的信息，可能有助于提出更好的替代方案。

附录：在没有开发完整的 L&F 的情况下，可能可以使用单选按钮的父级，`JToggleButton`. 这样的按钮在 a 中效果很好，如此[处](https://stackoverflow.com/a/6036048/230513)`ButtonGroup`所示，并且可以任意装饰，如此[处](https://stackoverflow.com/a/13655458/230513)所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T13:09:32.483

**重要提示：这仅在默认的“金属”外观和感觉下进行了测试。我不保证这适用于任何其他外观和感觉。此外，我也不完全确定它是如何工作的，因为它确实有点像 hack。**

我能够以不同的方式解决这个问题。

我正在使用 UIManager 默认值全局缩放我的字体，所以我希望我的单选按钮与字体一起缩放。

我发现我可以通过从 UIManager 中提取单选按钮的图标、缓冲它们、重新调整它们的大小，然后从缓冲图标的图形中派生一个新图标来做到这一点。

我最终得到了这个功能：

```
public static void scaleRadioButtonIcon(JRadioButton rb){
    boolean previousState = rb.isSelected();
    rb.setSelected(false);
    FontMetrics boxFontMetrics =  rb.getFontMetrics(rb.getFont());
    Icon radioIcon = UIManager.getIcon("RadioButton.icon");
    BufferedImage radioImage = new BufferedImage(
        radioIcon.getIconWidth(), radioIcon.getIconHeight(),BufferedImage.TYPE_INT_ARGB
    );
    Graphics graphics = radioImage.createGraphics();
    try{
        radioIcon.paintIcon(rb, graphics, 0, 0);
    }finally{
        graphics.dispose();
    }
    ImageIcon newRadioImage = new ImageIcon(radioImage);
    Image finalRadioImage = newRadioImage.getImage().getScaledInstance(
        boxFontMetrics.getHeight(), boxFontMetrics.getHeight(), Image.SCALE_SMOOTH
    );

    rb.setSelected(true);
    Icon selectedRadioIcon = UIManager.getIcon("RadioButton.icon");
    BufferedImage selectedRadioImage = new BufferedImage(
            selectedRadioIcon.getIconWidth(), selectedRadioIcon.getIconHeight(),BufferedImage.TYPE_INT_ARGB
    );
    Graphics selectedGraphics = selectedRadioImage.createGraphics();
    try{
        selectedRadioIcon.paintIcon(rb, selectedGraphics, 0, 0);
    }finally{
        selectedGraphics.dispose();
    }
    ImageIcon newSelectedRadioImage = new ImageIcon(selectedRadioImage);
    Image selectedFinalRadioImage = newSelectedRadioImage.getImage().getScaledInstance(
        boxFontMetrics.getHeight(), boxFontMetrics.getHeight(), Image.SCALE_SMOOTH
    );
    rb.setSelected(previousState);
    rb.setIcon(new ImageIcon(finalRadioImage));
    rb.setSelectedIcon(new ImageIcon(selectedFinalRadioImage));
} 
```

它的作用是从单选按钮的字体度量中获取字体的大小。使用这些指标，它会根据在“外观”中找到的图标派生一个新图标，并将其调整为字体高度。

我无法解释的一件事是，当我访问相同的属性以获取两个图标时，来自 UIManager 的单选按钮的图标如何更改为“选定”图标。

我首先保存控件的状态，以便在最后恢复它。这样做是因为为了正确设置图标，当您第一次从 UIManager 请求图标时需要取消选中状态，然后在第二次请求图标时需要检查状态以获得“已选中” ' 图标。

同样，我不完全确定 UIManager 是如何工作的，或者当我们仅通过设置单个单选按钮的 'selected' 值来调用相同的属性时为什么图标会发生变化，但这是获得两个必要图标所必需的。

如果您不想使用字体来调整控件的大小，您可以轻松地将高度和宽度作为参数传递，并在设置缓冲图像大小时使用它们而不是字体的高度。

[我可能会提到，同样的方法也适用于复选框](https://stackoverflow.com/questions/4770022/make-jcheckbox-bigger/26995048#26995048)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:18:04.243

非常`L&F sensitive`，默认你可以

*   使用正确的 L&F（只有 Nimbus 实现了 auto_whatever）但我们谈论的是自定义 L&F

*   覆盖 UIManager 中的键，但与另一个 L&F 相比，这些键可以（呈现或带有值）或缺失

*   创建自己的（J）组件，覆盖重要的方法和

    a) 放入 UIManger（一个默认对整个 JVM 实例有效）

    b) 在可见 GUI 中添加到 (J)Components, ei .... 的选定、期望或部分

*   注意 ( `I need to implement font size switching in my app`) 非常重要的是测试是否需要更改（我们将讨论）字体或 FontUIResources，部分 (J)Components 的已实现方法的一部分完全忽略 Font 和所需的 FontUIResources，现在不确定是否是副反之亦然

# reporting-services - SSRS 中的多个 IF 语句

> ID：12953205
> 
> 赞同：0
> 
> 时间：2012-10-18T11:07:23.357
> 
> 标签：reporting-services

如何在 SSRS 中编写多个 if 语句。我是这样写的。

```
=IIf(Parameters!MyDuration.Value="ThisMonth" & Parameters!Transactions.Value="Sale", Sum(Fields!ThisMonthSal), True,False) 
```

这引发了多个参数使用的异常。请指导我如何编写这个多重 if 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:41:24.263

`&`运算符连接两个字符串。您正在寻找`And`运营商。请参阅[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/cc281079%28v=sql.100%29.aspx)。

此外，请注意 IIF 包含三个部分（请参阅[此处](http://msdn.microsoft.com/en-us/library/ms157328.aspx)的决策函数），其工作方式如下：

```
=Iif(test, truepart, falsepart) 
```

我不确定你想用“SUM”位做什么（或者你想达到什么目的，这个问题还不清楚），但这样的事情会起作用：

```
=IIf(Parameters!MyDuration.Value="ThisMonth" And Parameters!Transactions.Value="Sale", 
      Iif(Sum(Fields!ThisMonthSal.Value) = 0, "Zero sum", "Non-zero sum"),
      "Not thismonth or sale") 
```

最后，你并不完全清楚你得到的错误。如果您在访问参数时也遇到问题，您可能需要单独调查。无论如何，上面应该解释`Iif`一下。

# android - “WHERE”附近：语法错误 - SQLite

> ID：12953206
> 
> 赞同：1
> 
> 时间：2012-10-18T11:07:32.667
> 
> 标签：android, sqlite, where-clause, android-sqlite

我有一个方法，如果检查两个文本字段存在然后重新调整记录 ID。我的方法如下所示：

```
int getQueryMatch(String word, String meter) {
    SQLiteDatabase db = this.getReadableDatabase();

    String selectQuery = "SELECT *  FROM " + TABLE_HISTORY + " WHERE " + QUERYWORD +  "= '" + word + "' AND WHERE " + DISTANCEQ + "= '"+ meter +"' "  ;
    Cursor cursor = db.rawQuery(selectQuery, null);
    int getidd = cursor.getColumnIndex(KEY_ID) ;

    Log.v("Match query ", "return? " + getidd );
    if (cursor != null)
        cursor.moveToFirst();

    // return History
    return getidd;
} 
```

我的桌子看起来像这样：

```
 String CREATE_HISTORYS_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_HISTORY + "(" + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," +
            QUERYWORD + " TEXT," + DISTANCEQ + " TEXT" + ","  + KEY_TIMESTAMP + ")";
    db.execSQL(CREATE_HISTORYS_TABLE); 
```

现在当我像 getQueryMatch(Mystr1, Mystr2); 一样运行该方法时

我收到了这个错误：

```
10-18 22:04:04.294: E/AndroidRuntime(13736): FATAL EXCEPTION: AsyncTask #1
10-18 22:04:04.294: E/AndroidRuntime(13736): java.lang.RuntimeException: An error occured while executing doInBackground()
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.lang.Thread.run(Thread.java:856)
10-18 22:04:04.294: E/AndroidRuntime(13736): Caused by: ****android.database.sqlite.SQLiteException: near "WHERE": syntax error (code 1): , while compiling: SELECT *  FROM history WHERE query= 'Information Pillar' AND WHERE distance= '20'****
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at com.example.phooogle.DatabaseHandler.getQueryMatch(DatabaseHandler.java:149)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at com.example.phooogle.GoogleMapsAppActivity$InitTask.doInBackground(GoogleMapsAppActivity.java:233)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at com.example.phooogle.GoogleMapsAppActivity$InitTask.doInBackground(GoogleMapsAppActivity.java:1)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-18 22:04:04.294: E/AndroidRuntime(13736):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

我的选择查询对我来说看起来不错，但我不知道问题出在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:09:01.767

删除第二个`WHERE`，然后它将起作用。

```
String selectQuery = "SELECT *  FROM " + TABLE_HISTORY + " WHERE " + QUERYWORD +  "= '" + word + "' AND WHERE " + DISTANCEQ + "= '"+ meter +"' "  ;
                                                                                                        ^^^^^
                                                                                                   here's the error 
```

啊，顺便说一句：您的查询构建似乎很容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响！更好地解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T11:09:58.990

您的查询中有 2 个 WHERE 子句。你只能拥有一个。像这样组合它们：

```
String selectQuery = "SELECT *  FROM " + TABLE_HISTORY + " WHERE " + QUERYWORD +  "= '" + word + "' AND " + DISTANCEQ + "= '"+ meter +"' "  ; 
```

所以现在你的查询是：

```
SELECT *  FROM history WHERE query= 'Information Pillar' AND distance= '20'` 
```

这现在是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T11:09:48.833

使用后无需`WHERE`第二次`AND`
使用：

```
String selectQuery = "SELECT *  FROM " + TABLE_HISTORY + " WHERE " + QUERYWORD +  "= '" + word + "' AND " + DISTANCEQ + "= '"+ meter +"' "  ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:12:05.917

您正在使用 2 个 WHERE 语句；但是，这是不允许的，您必须删除最后一个 WHERE 语句，因为您已经有一个 AND 语句。

# c# - 从Gridview中的字符串中检索整数值

> ID：12953209
> 
> 赞同：0
> 
> 时间：2012-10-18T11:07:49.783
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

我有一个gridview，当将数据插入表中`dept(100, 1, 'IT')`并从两个表中获取数据时`emp`，`dept`记录如下网格：

```
EMpNo    DeptNo  DeptName
Harshal   1        IT 
```

我的问题是，当我单击网格视图时，所有记录都显示在受尊重的文本框中，但问题是，我得到了除`empno`. 在这里，我得到的是员工姓名，而不是我想要的姓名`Empno`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:12:36.273

你可以试试这样

```
 select empno,deptno,deptname from emp inner join dept on emp.dept.id=dept.id 
```

# java - org.h2.jdbc.JdbcSQLException：不支持的连接设置 AUTO_SERVER

> ID：12953210
> 
> 赞同：1
> 
> 时间：2012-10-18T11:07:50.753
> 
> 标签：java, jdbc, h2

在尝试使用以下 URL 创建 H2 数据库连接时，

```
 Connection conn = DriverManager.getConnection("jdbc:h2:D:/HATBOX/Data;AUTO_SERVER=TRUE") 
```

我得到以下异常。谁能解释我在这里缺少什么。

```
Exception in thread "main" org.h2.jdbc.JdbcSQLException: Unsupported connection setting AUTO_SERVER [90113-73]
at org.h2.message.Message.getSQLException(Message.java:103)
at org.h2.message.Message.getSQLException(Message.java:114)
at org.h2.message.Message.getSQLException(Message.java:77)
at org.h2.engine.ConnectionInfo.readSettingsFromURL(ConnectionInfo.java:189)
at org.h2.engine.ConnectionInfo.<init>(ConnectionInfo.java:87)
at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:87)
at org.h2.Driver.connect(Driver.java:57)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at com.company.h2.TestInsert.main(TestInsert.java:16) 
```

我需要使用 AUTO_SERVER=true，因为我正在尝试使用我的应用程序配置 HatBox，以便多个进程可以访问同一个数据库，而无需手动启动服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:17:24.597

您使用的是非常旧的 H2 版本（2008 年 5 月 31 日的 1.0.73 版），不支持此选项。

我建议升级到 H2 的最新版本。

# java - java - 如何从父类对象中获取所有子类对象并放入map java spring

> ID：12953218
> 
> 赞同：0
> 
> 时间：2012-10-18T11:08:20.830
> 
> 标签：java, spring, map, converter

java - 如何从父类对象中获取所有子类对象并放入map java spring

```
 public static Map<String, Object> ConvertObjectToMap(Object obj, Integer number) throws            IllegalAccessException, IllegalArgumentException, InvocationTargetException {
    Class<?> pomclass = obj.getClass();
    pomclass = obj.getClass();
    Method[] methods = obj.getClass().getMethods();
    Map<String, Object> map = new HashMap<String, Object>();
    for (Method m : methods) {
        if (m.getName().startsWith("get") && !m.getName().startsWith("getClass")) {
            Object value = null;
            value = (Object) m.invoke(obj);
            if (number <= 1) {
                if (value.getClass().isAnnotation()) {
                    map.putAll(ConvertObjectToMap(value, number++));
                } else {
                    map.put(m.getName().substring(3), (Object) value);
                }
            }
        }
    }
    return map;
} 
```

这个对吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:31:53.377

因此，如果我理解正确，您需要一个属性名称与其值的映射。

如何使用 commons-beanutils 而不是自己编写呢？类似的东西

```
import org.apache.commons.beanutils.PropertyUtils;

public static Map<String, Object> ConvertObjectToMap(Object obj, Integer number) throws            IllegalAccessException, IllegalArgumentException, InvocationTargetException {
    return PropertyUtils.describe(obj);
} 
```

上面的代码将调用所有的 getter，所以这和你的一样。如果您想过滤“类”属性，您可以在 describe 返回的地图上调用 .remove("class")。

更多信息：[commons-beanutils 主页](http://commons.apache.org/beanutils/)

# c++ - 包括 log4cxx 的问题

> ID：12953220
> 
> 赞同：1
> 
> 时间：2012-10-18T11:08:25.103
> 
> 标签：c++, logging, include, log4cxx

我对 C++ 比较陌生，但我使用过`log4j`（它是 Python 克隆`logging`）。因此，我想`log4cxx`用于登录我的新 C++ 项目。

我安装了 log4cxx

```
brew install log4cxx 
```

现在我需要将它包含在我的源文件中。我试过了，例如

```
#include "log4cxx/logger.h"

namespace EnsembleClustering {

METISGraphParser::METISGraphParser() {
    // logging
    log4cxx::LoggerPtr logger(log4cxx::Logger::getLogger("METISGraphParser"));
    logger->setLevel(log4cxx::Level::getInfo());
    this->logger = logger;
}

} 
```

这似乎还不够，因为这给了我链接器错误

```
13:06:29 **** Incremental Build of configuration Debug for project EnsembleClustering ****
make all 
Building file: ../src/METISGraphParser.cpp
Invoking: GCC C++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/METISGraphParser.d" -MT"src/METISGraphParser.d" -o "src/METISGraphParser.o" "../src/METISGraphParser.cpp"
../src/METISGraphParser.cpp: In member function 'virtual void EnsembleClustering::METISGraphParser::connectNode(EnsembleClustering::id, std::vector<unsigned int, std::allocator<unsigned int> >)':
../src/METISGraphParser.cpp:128: warning: unused variable 'deg'
../src/METISGraphParser.cpp: In member function 'virtual EnsembleClustering::Graph EnsembleClustering::METISGraphParser::parse(std::string)':
../src/METISGraphParser.cpp:112: warning: control reaches end of non-void function
Finished building: ../src/METISGraphParser.cpp

Building target: EnsembleClustering
Invoking: MacOS X C++ Linker
g++  -o "EnsembleClustering"  ./src/EdgeScoring.o ./src/EdgeTripleGraphData.o ./src/EnsembleClustering.o ./src/EnsembleClusteringAlgo.o ./src/Graph.o ./src/METISGraphParser.o ./src/Matching.o ./src/Modularity.o   
Undefined symbols for architecture x86_64:
  "log4cxx::spi::LocationInfo::LocationInfo(char const*, char const*, int)", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::Level::getInfo()", referenced from:
      EnsembleClustering::METISGraphParser::METISGraphParser()in METISGraphParser.o
      EnsembleClustering::METISGraphParser::METISGraphParser()in METISGraphParser.o
  "log4cxx::Level::getDebug()", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::Logger::getLogger(char const*)", referenced from:
      EnsembleClustering::METISGraphParser::METISGraphParser()in METISGraphParser.o
      EnsembleClustering::METISGraphParser::METISGraphParser()in METISGraphParser.o
  "log4cxx::helpers::MessageBuffer::str(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::helpers::MessageBuffer::MessageBuffer()", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::helpers::MessageBuffer::~MessageBuffer()", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::helpers::MessageBuffer::operator<<(char const*)", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::helpers::ObjectPtrBase::exchange(void**, void*)", referenced from:
      log4cxx::helpers::ObjectPtrT<log4cxx::Logger>::exchange(log4cxx::Logger const*)in METISGraphParser.o
  "log4cxx::helpers::ObjectPtrBase::ObjectPtrBase()", referenced from:
      log4cxx::helpers::ObjectPtrT<log4cxx::Logger>::ObjectPtrT()in METISGraphParser.o
  "log4cxx::helpers::ObjectPtrBase::~ObjectPtrBase()", referenced from:
      log4cxx::helpers::ObjectPtrT<log4cxx::Level>::~ObjectPtrT()in METISGraphParser.o
      log4cxx::helpers::ObjectPtrT<log4cxx::Level>::~ObjectPtrT()in METISGraphParser.o
      log4cxx::helpers::ObjectPtrT<log4cxx::Logger>::~ObjectPtrT()in METISGraphParser.o
      log4cxx::helpers::ObjectPtrT<log4cxx::Logger>::~ObjectPtrT()in METISGraphParser.o
  "log4cxx::helpers::CharMessageBuffer::operator<<(int)", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::Logger::isDebugEnabled() const", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "log4cxx::Logger::forcedLog(log4cxx::helpers::ObjectPtrT<log4cxx::Level> const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, log4cxx::spi::LocationInfo const&) const", referenced from:
      EnsembleClustering::METISGraphParser::initGraph(int, int)in METISGraphParser.o
  "typeinfo for log4cxx::helpers::ObjectPtrBase", referenced from:
      typeinfo for log4cxx::helpers::ObjectPtrT<log4cxx::Level>in METISGraphParser.o
      typeinfo for log4cxx::helpers::ObjectPtrT<log4cxx::Logger>in METISGraphParser.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [EnsembleClustering] Error 1 
```

我需要包括什么才能开始使用 log4cxx？或者我是否需要通过修改我的 Eclipse 构建设置来显式链接到 log4cxx？[log4cxx 简介](http://logging.apache.org/log4cxx/index.html)在这方面并不是特别有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:41:18.767

这是我设法正确链接 log4cxx 的方法。Homebrew 会提示您安装库的位置：

```
cls ~/ $ brew info log4cxx
log4cxx: stable 0.10.0
http://logging.apache.org/log4cxx/index.html
Depends on: automake, libtool
/usr/local/Cellar/log4cxx/0.10.0 (182 files, 7,3M) *
https://github.com/mxcl/homebrew/commits/master/Library/Formula/log4cxx.rb 
```

正如用户组件 10 所说，我需要在链接器行中添加`-L<dir>`和，其中is和是 library *name* (not filename) 。`-l<lib>``<dir>``/usr/local/Cellar/log4cxx/0.10.0/lib/``<lib>`*`log4cxx`*

 *在 Eclipse 中，我需要编辑以下设置：

![在此处输入图像描述](../Images/8125e4276d54d45824cb3680ebd91836.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:31:55.917

为了使这稍微简单一些，你可以做

```
brew link log4cxx 
```

它将创建指向 /usr/local/lib 和 /usr/local/include 中的库的符号链接，这些库通常位于默认的链接器/包含搜索路径中。

您仍然需要指定 -llog4cxx。*

# python - 在 matplotlib 中将一些值绘制到极坐标图

> ID：12953221
> 
> 赞同：1
> 
> 时间：2012-10-18T11:08:39.367
> 
> 标签：python, matplotlib

我想用 Python 和 matplotlib 将一些代表可见卫星的值绘制成极坐标图。我在 matplotlib 示例之后编写了一些代码，并表示了极坐标图，但未绘制给定点：

```
import matplotlib
from matplotlib.pyplot import figure, show, rc, grid
from math import pi

# radar green, solid grid lines
rc('grid', color='#316931', linewidth=1, linestyle='-')
rc('xtick', labelsize=15)
rc('ytick', labelsize=15)

# force square figure and square axes looks better for polar, IMO
width, height = matplotlib.rcParams['figure.figsize']
size = min(width, height)
# make a square figure
fig = figure(figsize=(size, size))
ax = fig.add_axes([0.1, 0.1, 0.8, 0.8], polar=True, axisbg='#d5de9c')

# Satellite info [PRN, E, Az, Ss, Used (1 yes, 0 no)]
sat = [ [1, 62, 255, 46, 1],
        [14, 62, 26, 46, 1],
        [31, 42, 158, 36, 1],
        [22, 40, 76, 50, 1],
        [11, 29, 308, 0, 0],
        [19, 26, 243, 36, 1],
        [3, 13, 217, 0, 0],
        [18, 10, 93, 0, 0],
        [20, 6, 291, 0, 0],
        [5, 1, 72, 0, 0],
        [122, 43, 216, 0, 0],
        [135, 47, 203, 43, 0] ]

for index in (0, len(sat)-1):
    if(sat[index][4]>0):
        ax.plot(sat[index][2], sat[index][1], color='green', marker='s', markersize=12)
    else:
        ax.plot(sat[index][2], sat[index][1], color='gray', marker='s', markersize=12)

ax.set_rmax(2.0)
grid(True)

ax.set_title("Visible satellites", fontsize=20)
show() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:24:40.790

像这样迭代你的 sats 列表更简单：

```
for s in sat:
    if(s[4]>0):
        ax.plot(s[2], s[1],color='green', marker='s', markersize=5)
    else:
        ax.plot(s[2], s[1],color='gray', marker='s', markersize=5) 
```

除此之外，您还使用 set_rmax 将方位角限制为 <2，这只会留下 1 颗卫星可见，取消注释以查看所有卫星。

编辑：直接解包列表可能会进一步提高可读性：

```
for (PRN, E, Az, Ss, Used) in sat:
    if(Used>0):
        ax.plot(Ss, Az,color='green', marker='s', markersize=5)
    else:
        ax.plot(Ss, Az,color='gray', marker='s', markersize=5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:20:55.177

在这一行：

```
for index in (0, len(sat)-1): 
```

index 只运行在一对值上。你是说范围`for index in range(0, len(sat))`吗？

# delphi - 当以模态方式显示另一个表单时，如何制作未禁用的表单？

> ID：12953225
> 
> 赞同：11
> 
> 时间：2012-10-18T11:08:58.147
> 
> 标签：delphi, delphi-xe, vcl

**我有一个实用程序对话框（非模态和保持在顶部），即使是模态对话框**，在使用应用程序时也应该始终可以访问它（想想在使用应用程序时可以用来记笔记的对话框）**显示**。

应用程序的其余部分无法更改。

是否可以？我该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T14:43:35.550

当`ShowModal`被调用时，所有现有的顶级窗口都被禁用。这就是模态的工作方式。如果你有一个交互合理的窗口，你只需要再次启用它。

例如，您可以将其添加到实用程序窗口：

```
type
  TMyUtilityForm = class(TForm)
  protected
    procedure WMEnable(var Message: TWMEnable); message WM_ENABLE;
  end;
....
procedure TMyUtilityForm.WMEnable(var Message: TWMEnable);
begin
  if not Message.Enabled then
    EnableWindow(Handle, True);
  inherited;
end; 
```

这将确保您的实用程序窗口永远不会被禁用。

# objective-c - 选择行时如何在 UITTableViewCell 上添加内容视图？

> ID：12953226
> 
> 赞同：0
> 
> 时间：2012-10-18T11:08:58.057
> 
> 标签：objective-c, ios, ios5, uitableview

我正在尝试在选择一行时添加一个按钮，`UITableView`并在第二次点击该行时将其删除，我不想要 custom `UITableViewCell`。

任何建议或示例代码将不胜感激。

我尝试过的代码：在**cellForRowAtIndexPath** 方法中

```
if(cell.selected == YES){

                UITextField* numOfBottles =[[UITextField alloc] initWithFrame:CGRectMake(240,9.0f,50, 25)];
                numOfBottles.tag = indexPath.row;

                [numOfBottles setBorderStyle:UITextBorderStyleNone];
                [numOfBottles setBackgroundColor:[UIColor clearColor]];
                [numOfBottles setTextColor:[UIColor whiteColor]];
                [numOfBottles setTextAlignment:UITextAlignmentLeft];
                [numOfBottles setBackground:[UIImage imageNamed:@"blue_dropdown_normal.png"]];
                [numOfBottles setFont:[UIFont systemFontOfSize:16.0f]];
                [numOfBottles setDelegate:self];

                NSString* quantity = [[NSString alloc] initWithString:[subtotalObj.qtyArray objectAtIndex:(indexPath.row - 1)]];

                [numOfBottles setText:quantity];
                [numOfBottles setTextAlignment:UITextAlignmentCenter];
                [numOfBottles setBackgroundColor:[UIColor whiteColor]];
                numOfBottles.keyboardType = UIKeyboardTypeDefault;
               // numOfBottles.tag = indexPath.row;
                [cell.contentView addSubview:numOfBottles];
                [numOfBottles release];
            } 
```

在**didSelectRowAtIndexPath**方法中

```
[tableView reloadData]; 
```

但是仍然没有呈现按钮（带有背景图像的文本字段）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:17:47.587

我认为最好的方法是使用 UITableViewCell 子类。但是您可以使用我对[另一个问题](https://stackoverflow.com/questions/12881376/how-to-set-image-of-custom-cell-after-selecting-another-cell/12881543#12881543)的回答来使您的 TableView 重新呈现并在您的单元格中放置一个按钮。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if(indexPath.row == selectedRow){ // if your criteria where met
      //add your button
    }

     return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //do your select things here
  selectedRow = indexPath.row; //where selectedRow is a class variable
  [self.tableView reloadData]; // rerenders the tableview

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:21:23.187

有`UITableView`委托，`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`实现它，您将在其中获取用户点击的行，获取您需要使用and传递的当前`cell`使用。现在检查是否有你想要的？如果是，则执行else 。如果你已经填写了s 你可以给标签来区分它们。`cellForRowAtIndexPath:``NSIndexPath``section``row``cell.contentView subviews``UIButton``removeFromSuperView``addSubView``cell``UIButton``unique`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:31:49.330

使用这些代表

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
  UITableViewCell *cell = (UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
  //Create reference of button with tag 999
  cell.contentView addSubView:yourButtonReference]
  [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone]; 
```

}

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = (UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
    UIButton *btnAdded = (UIButton *)[cell viewWithTag:999];
    if(btnAdded){
      [btnAdded removeFromSuperView];
      [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
    }
} 
```

# sql-server-2012 - LAG 和 LEAD 函数

> ID：12953231
> 
> 赞同：4
> 
> 时间：2012-10-18T11:09:15.493
> 
> 标签：sql-server-2012

在 SQL Server 2012 中使用新的 LAG 和 LEAD 函数有哪些优势？
仅仅是更容易编写和更容易调试查询，还是还有性能改进？

这对我来说很重要，因为我们经常需要这种类型的功能，我需要知道我们是否应该在不久的将来推荐升级。
如果它只是更简单的查询，那么升级的麻烦（和成本）将不值得。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:29:53.763

为了演示执行计划的不同，我使用了 Dave 的 SQL Authority 博客中的获胜解决方案：

*   [谜题解法——在不使用 SQL Server 2012 解析函数的情况下模拟 LEAD() 和 LAG()](http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012-analytic-function/)

```
;WITH T1
AS (SELECT row_number() OVER (ORDER BY SalesOrderDetailID) N
         , s.SalesOrderID
         , s.SalesOrderDetailID
    FROM
        TempDB.dbo.LAG s
    WHERE
        SalesOrderID IN (20120303, 20120515, 20120824, 20121031))
SELECT SalesOrderID
     , SalesOrderDetailID AS CurrentSalesOrderDetailID
/*   , CASE
           WHEN N % 2 = 1 THEN
               max(CASE
                   WHEN N % 2 = 0 THEN
                       SalesOrderDetailID
               END) OVER (PARTITION BY (N + 1) / 2)
           ELSE
               max(CASE
                   WHEN N % 2 = 1 THEN
                       SalesOrderDetailID
               END) OVER (PARTITION BY N / 2)
       END LeadVal */
     , CASE
           WHEN N % 2 = 1 THEN
               max(CASE
                   WHEN N % 2 = 0 THEN
                       SalesOrderDetailID
               END) OVER (PARTITION BY N / 2)
           ELSE
               max(CASE
                   WHEN N % 2 = 1 THEN
                       SalesOrderDetailID
               END) OVER (PARTITION BY (N + 1) / 2)
       END PreviousSalesOrderDetailID
FROM
    T1
ORDER BY
    SalesOrderID
  , SalesOrderDetailID;

SELECT SalesOrderID
     , SalesOrderDetailID AS CurrentSalesOrderDetailID
     , LAG(SalesOrderDetailID, 1, 0) OVER (ORDER BY SalesOrderID, SalesOrderDetailID) AS PreviousSalesOrderDetailID
FROM TempDB.dbo.LAG
WHERE SalesOrderID  IN (20120303, 20120515, 20120824, 20121031);

Warning: Null value is eliminated by an aggregate or other SET operation.

(10204 row(s) affected)
Table 'Worktable'. Scan count 6, logical reads 81638, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'LAG'. Scan count 4, logical reads 48, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

 SQL Server Execution Times:   CPU time = 297 ms,  elapsed time = 332 ms.

--- versus ---

(10204 row(s) affected)
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'LAG'. Scan count 4, logical reads 48, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

 SQL Server Execution Times:   CPU time = 78 ms,  elapsed time = 113 ms. 
```

除了更优雅之外，它消耗的资源也少得多。

下面是图形执行计划的比较：

![执行计划在这个特定案例中显示出明显的赢家](../Images/15975563a387ad6ac0db8c0cd280704f.png)

在这种特定情况下，执行计划显示出明显的赢家。Dave 的页面有许多可能的不同方式来获得 LEAD/LAG 功能。也许其中一些会击败 SQL Server 的内部解决方案。或者可能不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T14:44:12.520

我不能对 MS SQL Server 2012 发表太多评论，但从 PostgreSQL 的角度来看，这些功能从[8.4](http://www.postgresql.org/docs/8.4/static/functions-window.html)版本开始就可用。

一般来说，它们非常便于检测变化（通常在时间序列中，与 结合使用`ORDER BY`）。通常：

```
WITH shifted_timeseries AS (
    SELECT event_time,
           value,
           LAG(value) OVER (ORDER BY event_time) AS lagged_value
        FROM timeseries
)
SELECT event_time AS change_time, value AS new_value
FROM shifted_timeseries
    WHERE value != lagged_value; 
```

对于这类事情，仅就清晰度而言，它们是值得的（尽管这可能是主观的）。

对于更复杂的操作，例如，如果您想要连续值的时间段，则[此答案](https://stackoverflow.com/a/10624628/372643)是解决此问题的一个非常优雅的解决方案。根据[这个 SQLFiddle](http://www.sqlfiddle.com/#!6/14f4b/1) ，它似乎在 SQL Server 2012 中工作得很好。

这两个博客条目还显示了使用 LEAD/LAG 与不执行相同查询之间的比较：

*   [不使用 LEAD 和 LAG 编写 T-SQL 自联接](http://blog.sqlauthority.com/2011/11/16/sql-server-puzzle-to-win-print-book-write-t-sql-self-join-without-using-first-_value-and-last_value/)
*   [谜题解法——在不使用 SQL Server 2012 解析函数的情况下模拟 LEAD() 和 LAG()](http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012-analytic-function/)

（比较执行计划会很有趣。）

# codeigniter - 在 Codeigniter 中初始化库时传递参数

> ID：12953232
> 
> 赞同：4
> 
> 时间：2012-10-18T11:09:18.447
> 
> 标签：codeigniter

我对 Codeigniter 真的很陌生，只是从头开始学习。在 CI 文档中它说：

```
$params = array('type' => 'large', 'color' => 'red');
$this->load->library('Someclass', $params); 
```

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Someclass {

    public function __construct($params)
    {
        // Do something with $params
    }
} 
```

你能给我一个简单的例子，如何使用数组作为参数将数据从控制器传递到外部库吗？我想看一个简单的例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T11:18:45.040

所有Codeigniter“库”构造函​​数都需要一个参数：一个参数数组，通常在使用CI的加载器加载类时传递，如您的示例：

```
$params = array('type' => 'large', 'color' => 'red');
$this->load->library('Someclass', $params); 
```

我猜你对“使用 $params 做某事”部分感到困惑。没有必要传入任何参数，但如果你这样做了，你可以像这样使用它们：

```
class Someclass {
    public $color = 'blue'; //default color
    public $size = 'small'; //default size
    public function __construct($params)
    {
        foreach ($params as $property => $value)
        {
            $this->$property = $value;
        }
        // Size is now "large", color is "red"
    }
} 
```

如果需要，您可以随时重新初始化，如下所示：

```
$this->load->library('Someclass');
$this->Someclass->__construct($params); 
```

另一件需要注意的事情是，如果您有一个与您的类名称匹配的配置文件，该配置将自动加载。例如，如果您有文件`application/config/someclass.php`：

```
$config['size'] = 'medium';
$config['color'] = 'green';
// etc. 
```

此配置在加载时将自动传递给“someclass”的类构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:18:04.680

在库目录中创建一个文件`Someclass_lib.php`

这是您的图书馆代码

```
if (!defined('BASEPATH')) exit('No direct script access allowed');

class Someclass_lib
{
    public  $type       =   '';
    public  $color      =   '';

    function Someclass_lib($params)
    {
        $this->CI   =&  get_instance();
        $this->type =   $params['type'];
        $this->color    =   $params['color'];
    }
} 
```

当您要加载库时使用此代码

```
$params = array('type' => 'large', 'color' => 'red'); 
$this->load->library('Someclass_lib', $params); 
```

# php - 跨域使用cookies？

> ID：12953237
> 
> 赞同：0
> 
> 时间：2012-10-18T11:09:33.640
> 
> 标签：php

> **可能重复：**
> [跨域 cookie](https://stackoverflow.com/questions/1084114/cross-domain-cookies)

我需要一个可跨多个域使用的 cookie。我知道你不能直接这样做，但我可以这样做：

*   用户访问域1
*   domain1 向 domain2 发送 curl 帖子
*   domain2 检查是否已经设置了名为“someCookie”的 cookie。如果是，则返回一些数据以告诉 domain1 它已设置，如果不是，则返回一些数据以说明其未设置。
*   现在 domain1 知道是否设置了 domain2 的 cookie

所以基本上 domain2 总是处理 cookie 并且只是向其他域报告它是否设置。我还需要通过在 domain2 上调用设置 cookie 的脚本来从 domain1 设置它。

我不知道这是否可能，但请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:12:52.373

someCookie 是 CLIENT 上的数据存储而不是服务器上的数据......所以只要客户端没有加载到浏览器窗口或来自 domain2 的 iframe 页面中，就不会有 cookie。请记住，某些浏览器会阻止从 iframe 创建 cookie。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:13:31.020

您建议的解决方案的问题是cookies保存在客户端。因此，domain1 不能简单地联系 domain2 来询问 cookie 是否存在。

你可以做的是有一个 iframe 到 domain2。Domain2 读取 cookie 并向 domain1 发送一些通知，告诉 domain1 客户端 X 刚刚访问了 domain2 并且有或没有设置 cookie。然而，这是一个非常老套的解决方案，它不适用于所有浏览器。

将数据从一个域传递到另一个域是一项非常复杂的任务。浏览器对这些东西的支持非常有限，因为这些东西通常用于恶意软件目的（跨站点脚本）。因此，浏览器有意限制这种情况下可能的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:20:21.393

Cookie 不能与不同的域共享，但它不是子域，更改它会起作用。

尝试一些类似的东西

```
http://domain1.com/authenticate?token=tekrjadfjhad&action=auth 
```

并根据您的逻辑验证令牌和操作或其他任何内容。

# python - 如何从插件调用 Twisted 到已经在运行主循环的 GTK 程序？

> ID：12953239
> 
> 赞同：2
> 
> 时间：2012-10-18T11:09:36.777
> 
> 标签：python, asynchronous, twisted, rhythmbox

我写了一个 Rhythmbox 插件，我正在尝试添加一些代码来异步下载一些 JSON。回调在`do_activate`函数中注册：

```
def do_activate(self):
    shell = self.object
    sp = shell.props.shell_player
    self.db = shell.get_property('db')
    self.qm = RB.RhythmDBQueryModel.new_empty(self.db)
    self.pec_id = sp.connect('playing-song-changed', self.playing_entry_changed)
    self.pc_id = sp.connect('playing-changed', self.playing_changed)
    self.sc_id = sp.connect('playing-source-changed', self.source_changed)
    self.current_entry = None

    ... 
```

我正在尝试在`playing_changed`触发时下载一些内容。它目前用于`urllib2`同步下载内容，但这有可能会在短时间内阻塞 UI。我想使用 Twisted 来解决问题，但是我见过的所有示例都使用`reactor.run()`，它会无限期地阻塞。

我对 Twisted 很陌生，我想知道，有没有办法在不阻塞主线程的情况下异步处理这种情况？

完整代码在[这里](https://github.com/bostonbusmap/rhythmbox-echonest/blob/master/echonest-recommender.py)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:25:53.190

在不运行 IO-loop ( `reactor.run`) 的情况下，twisted 无法执行异步 http 请求。运行`reactor`使您能够使用默认情况下 python 中不存在的异步功能。但是，如果您使用twisted 的唯一原因是进行异步http 调用，那可能是一种矫枉过正。改用简单的线程，让你的线程等待 http 响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:40:02.227

在 Rhythmbox 插件的上下文中，您可能需要处理 GTK 主循环已经在运行的事实。这是 Twisted 原则上支持的一种情况，但支持 API 以在可能已经或可能还没有主循环的主循环上协作初始化反应器是棘手的。

您可以使用以下函数解决它：

```
def maybeInstallReactor():
    import sys
    if 'twisted.internet.reactor' not in sys:
        from twisted.internet import gtk2reactor # s/2/3 if you're using gtk3
        reactor = gtk2reactor.install()
        reactor.startRunning()
        reactor._simulate()
    else:
        from twisted.internet import reactor
    return reactor 
```

确保在您的程序中尽早调用此函数，然后再导入其他任何内容（尤其是来自 Twisted 的内容）。

该`startRunning`调用将反应器连接到 GLib 主循环，并且该`_simulate`调用将 Twisted 的定时事件连接到 GLib 计时器。

遗憾的是，这确实涉及调用一个私有函数 ，`_simulate`因此您必须小心确保新版本的 Twisted 不会破坏它；[但是由于这个问题，我打开了一个错误来明确支持这个用例。](http://twistedmatrix.com/trac/ticket/6147) 另外，除了这个私有方法调用之外，关于你对 Twisted 的使用没有什么奇怪的了。

# hadoop - EMR 中打开的文件过多

> ID：12953251
> 
> 赞同：4
> 
> 时间：2012-10-18T11:10:27.553
> 
> 标签：hadoop, mapreduce, elastic-map-reduce, emr

我的减速器出现以下异常：

```
EMFILE: Too many open files
    at org.apache.hadoop.io.nativeio.NativeIO.open(Native Method)
    at org.apache.hadoop.io.SecureIOUtils.createForWrite(SecureIOUtils.java:161)
    at org.apache.hadoop.mapred.TaskLog.writeToIndexFile(TaskLog.java:296)
    at org.apache.hadoop.mapred.TaskLog.syncLogs(TaskLog.java:369)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:257)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

每个 reducer 正在创建大约 10,000 个文件。有没有办法可以设置每个盒子的ulimit。

我尝试使用以下命令作为引导脚本： ulimit -n 1000000

但这根本没有帮助。

我还在引导操作中尝试了以下操作来替换 /usr/lib/hadoop/hadoop-daemon.sh 中的 ulimit 命令：

```
#!/bin/bash
set -e -x
sudo sed -i -e "/^ulimit /s|.*|ulimit -n 134217728|" /usr/lib/hadoop/hadoop-daemon.sh 
```

但即便如此，当我们登录到主节点时，我仍可以看到 ulimit -n 返回：32768。我还确认在 /usr/lib/hadoop/hadoop-daemon.sh 中进行了所需的更改，并且它具有：ulimit -n 134217728。

我们对此有任何 hadoop 配置吗？或者有解决方法吗？

我的主要目的是根据每条记录的id将记录拆分成文件，现在有15亿条记录，肯定会增加。

在每个从属服务器上运行此守护程序之前，有什么方法可以编辑此文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T21:22:37.373

好的，看来亚马逊 EMR 设置中默认设置的 ulimit : 32768 已经太多了，如果有任何工作需要更多，那么应该重新审视他们的逻辑。因此，我没有将每个文件都直接写入 s3，而是将它们写入本地，然后分批 1024 个文件移动到 s3。这解决了`too many open files`问题。

也许当打开文件描述符以写入 s3 时，并没有像写入本地文件时那样释放/关闭。欢迎对此进行任何更好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:51:04.727

可能有一种方法可以通过[引导操作](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html)来执行此操作，特别是预定义的操作之一。如果预定义不起作用，自定义脚本可以做任何你通常可以在任何 linux 集群上做的事情。但首先我会问你为什么要输出这么多文件？HDFS/Hadoop 绝对针对更少的大文件进行了更多优化。如果您希望进行某种索引，写出具有不同名称的原始文件可能不是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:57:45.340

我认为这里正确的解决方案是拥有一个序列文件，其内容是每个二进制文件，由文件名键入。可以将记录拆分为文件，但这些文件可以存储为 blob，由文件名键入，在一个大序列文件中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T11:13:31.783

我有这个问题，但它是一个linux设置。

去这里解决它并按照以下步骤操作：

[http://www.cyberciti.biz/faq/linux-unix-nginx-too-many-open-files/](http://www.cyberciti.biz/faq/linux-unix-nginx-too-many-open-files/)

# javascript - 结果类名称未出现在 SOAP 结果中

> ID：12953252
> 
> 赞同：1
> 
> 时间：2012-10-18T11:10:29.020
> 
> 标签：javascript, jquery, wcf, soap, wcf-client

我有 WCF 服务。我使用带有 jQ​​uery 的 SOAP 1.2 调用它的方法
我调用了一个假设返回以下类的方法：

```
namespace ConfigComWrapper.ConfigCom
{
    public class CommandResult
    {
        public int ErrorCode = ErrorCodeTypes.OK;
        public string ErrorDescription = string.Empty;

        public CommandResult(){}    
} 
```

然而，SOAP 响应只返回它的成员，甚至根本没有提到 CommandResult 类。这是 WCF 测试客户端中生成的 xml 响应（SOAP）：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <a:Action s:mustUnderstand="1" u:Id="_2">http://www.enghouse.com/CosmoCom/WebAdminAPIServiceLibrary/ITenantAdmin/LoginResponse</a:Action>
    <a:RelatesTo u:Id="_3">urn:uuid:509fa011-0e6a-4370-896b-6d45756a5fa9</a:RelatesTo>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <u:Timestamp u:Id="uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-11">
        <u:Created>2012-10-18T14:30:49.878Z</u:Created>
        <u:Expires>2012-10-18T14:35:49.878Z</u:Expires>
      </u:Timestamp>
      <c:DerivedKeyToken u:Id="uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-7" xmlns:c="http://schemas.xmlsoap.org/ws/2005/02/sc">
        <o:SecurityTokenReference>
          <o:Reference URI="urn:uuid:cf569488-040b-4bcb-8270-b7973c0d6e2a" ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/sct" />
        </o:SecurityTokenReference>
        <c:Offset>0</c:Offset>
        <c:Length>24</c:Length>
        <c:Nonce>TNFiG8+NqEdgXJ8njmVNPw==</c:Nonce>
      </c:DerivedKeyToken>
      <c:DerivedKeyToken u:Id="uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-8" xmlns:c="http://schemas.xmlsoap.org/ws/2005/02/sc">
        <o:SecurityTokenReference>
          <o:Reference URI="urn:uuid:cf569488-040b-4bcb-8270-b7973c0d6e2a" ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/sct" />
        </o:SecurityTokenReference>
        <c:Nonce>9dmn1BiWfn0U7cmlbkFWdg==</c:Nonce>
      </c:DerivedKeyToken>
      <e:ReferenceList xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:DataReference URI="#_1" />
        <e:DataReference URI="#_4" />
      </e:ReferenceList>
      <e:EncryptedData Id="_4" Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc" />
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <o:SecurityTokenReference>
            <o:Reference ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/dk" URI="#uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-8" />
          </o:SecurityTokenReference>
        </KeyInfo>
        <e:CipherData>
          <e:CipherValue>CgnkLBEkjO1Pnqsypzy4NCQUs0E7f0gEMepzaMacN1Zkrfvqldi+sdFDOPHehXwdIa6h7OXiqCHCCTNuQMP0kmQaqrX3YqeeUi1ntlZdOJU1X0s7bwavxJHWHfP0w1ASrOo6a0YOK3o750uO9dgbp/T69dRGZW0/oRKZu0eES5URJkAx5NuHGGKUP9gb+RraOu+1wwJnAvpiuSe2G/SULwVGjQzu3SdRn5HA3BU5Ndh1qnq1n6TLXRByPeNTrSUMs6CV1jNN+EiNrtNeinre6nCE2WRuNvBaomcZW+5h0tx7r7Jg/DlLKK1YLvJVB4jDjtf/9eh1CWTgHiq7mrZev9aL0WYkwX2coMn6NO+vyMD0EKobkHM3zTf7okFDwVg8yWCYOGXO3zhWXivcPl1M2XYqzQWSmXtvVAN7kKyktjiB3SLGSq1jpo13fXuoII+K/yngJH4We/qoyjUSllTZDz9TBS7aUielDhL2nJZIjTGfBNw6HEYJsp2xaZOojrcRRvrKGNKRifYJX0moP1GT8J3EzRkgVAyhI9qkMbKg0IQC1+4AD+SDUXm7+69c+9/zVyWJAK36Hdbk/TBmMfK6YVLSxlpnPgNuw/1K2nBpgO1YqfXO+YMGsgTUEaltaCsh5zugtwCObg21ybA2rxKw08rDduMQ9fmUTtjBrxNTtX6EAI67z9gtBxgSZwRJTAu3GGj3u5ymkdFBeI/22rndj4k+eXJMTnCHibQ+zvnWAYiVhGukVSvGwgBM8BPioty8kTT75EljhlLfqOHQsVB5pZGYovi1k+wiPb24mYet08eETHsaU11bkAWmjB5AvfBtKAttDRnvjuyFx/yv+vZ6MbV8Kau2p/gmKnJ/JeNmlGv7C/lqQHz0tPv62t0l8FKAQVdBOSMwSVUWptjMsto++AVRLNqQ3Fgkz9C/nR/3dNMkQXxvhSOW3VK67fmiitp4451HtRcXEE8RbyO7ULuDdbUET6SLEpGJ2uPelrYsX7sp4bVGK0hGCG18AmqQ3H1yhCSm+ObenuqqRtgWxK588phuzExuGRORjiTd75LwxtKWk7jzyPQKN+ZBiWbodcqhHG7rVvQbz3hkhymmTrPW5VmhyTFnJWdDVZaZVQJBi/2CNoCOZfBd09hDhvEQWhg3DqExV4I/gPytcJaO+yWR8s6nGGVrgYSsB3YRb/1fUVkt4vM7BobqRoDXHAFJhRl0TaXyPfZJ4sPPLyMgXJn1+A2dDjxzJxi4lYnAbqg1ypzmtZwOLQcDTPiq4DR5mV9TJScMX7laroYqS1thHzXjPP0rBlxSAbhedxjxoiGe5vDdDK0CLohFHj8lqXOq6bvY2LwpMczR1Y5BaR/mETkfr/PxQLuaGqEWl7BxJuJzun6uOt1yrhwyKTCQHUzGol4FZ9X6fybjTAGARQInpHH3QqwQaovVUHZX29CBBU6fb+lBEAUSZMUwjyyLzJHPTcw9VL+G68ROWxdXDoRAOp6sWoJwN6wqnWaZdoXUDzNqS978D4w2gMqnJFZYNDRalA0ky9y+kgkk4stSjRaoJfOXjyxZQo85XCqdGr0ndcYrGfnkjYQRPTT02FL1eERMuyFUgJJwAqBiB6jb366Mya6JHUeRtz+9Iu2OdpxFJxAXR+p4Lv4PkjQGrPTUAUv0lqZNCTRKoTreszpIAlKcVTNKnRgKCMc2PhzJidZ6jJcuBbWxuVkVmguoUg4TujvOKxYJPUk5XBcuO0c7xr+78lYQ2KzHrliVyYUFNY9m7mM2b/g+bbIgJqj3v80fOpSKRiTqfdnwoFVPKZFIprgN4eDOatghzce/ZAQyrwwnya0Gq5Z/msJdRQAklKYrfJG8E6FYssCJCCuvrsaVHwjmzzSwmnA2XoYrK3QhhPsNhI6O0mlLbh4ALo7YwOkrf2+jacf5zpeui1bTnFo4coknvFEcC8CCMymAzrLtLWqBkAbdCh0bCTd/9F+Upyiwk/dWgkPk4trnYe6yyxnKaiqxsUZ4jruo+jmjYb45s1mig5YGV2kh+z/fNf6bhHSseANqPQJAOLdyC7sRIP5LdALtxIzpkF21ZOJ78FShTY9PV7XvUywNOubXGpMo0ljhC5Y4Sx6UC0LBcg7gb66NaqrsLR8kObjnhK2WUHdFZsvBckb4VzkG8TRRAIUcQXRbwLKrA9yl</e:CipherValue>
        </e:CipherData>
      </e:EncryptedData>
    </o:Security>
  </s:Header>
  <s:Body u:Id="_0">
    <LoginResponse xmlns="http://www.enghouse.com/CosmoCom/WebAdminAPIServiceLibrary">
      <LoginResult xmlns:a="http://schemas.datacontract.org/2004/07/ConfigComWrapper.ConfigCom" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <a:ErrorCode>0</a:ErrorCode>
        <a:ErrorDescription />
      </LoginResult>
    </LoginResponse>
  </s:Body>
</s:Envelope> 
```

但由于某种原因，WCF 测试客户端中的“格式化选项”显示 CommandResult 已返回：
![在此处输入图像描述](../Images/e6f5d883f205e6492917a58f0e3322c9.png)

有人知道为什么它缺少 SOAP 响应中的 CommandResult 类吗？
谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:33:49.287

如果由于服务器端的操作调用而发送对象，则必须将类设置为 [DataContract]。根据我的理解，这将有助于自定义类的序列化，根据您的问题，您必须将其设置如下。

```
namespace ConfigComWrapper.ConfigCom
{
    [DataContract]
    public class CommandResult
    {
        [DataMember]
        public int ErrorCode = ErrorCodeTypes.OK;
        [DataMember]
        public string ErrorDescription = string.Empty;
        [DataMember]
        public CommandResult(){}    
} 
```

完成此操作后，请在客户端更新您的服务参考。希望这会帮助你。

# python - 在列表中的元素中搜索子字符串并删除该元素

> ID：12953253
> 
> 赞同：4
> 
> 时间：2012-10-18T11:10:28.613
> 
> 标签：python, list, search, element, substring

我有一个列表，我正在尝试删除其中的元素`'pie'`。这就是我所做的：

```
['applepie','orangepie', 'turkeycake']
for i in range(len(list)):
    if "pie" in list[i]:
         del list[i] 
```

我不断使列表索引超出范围，但是当我将其更改`del`为`print`语句时，它会很好地打印出元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:16:18.443

不要从您正在迭代的列表中删除一个项目，而是尝试使用 Python 的漂亮[列表理解语法](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)创建一个新列表：

```
foods = ['applepie','orangepie', 'turkeycake']
pieless_foods =  [f for f in foods if 'pie' not in f] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:15:23.343

在迭代过程中删除元素，会改变大小，导致 IndexError。

您可以将代码重写为（使用列表理解）

```
L = [e for e in L if "pie" not in e] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T11:21:51.560

就像是：

```
stuff = ['applepie','orangepie', 'turkeycake']
stuff = [item for item in stuff if not item.endswith('pie')] 
```

修改您正在迭代的对象应该被视为不可行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:14:24.353

您收到错误的原因是因为您在删除某些内容时更改了列表的长度！

例子：

```
first loop: i = 0, length of list will become 1 less because you delete "applepie" (length is now 2)
second loop: i = 1, length of list will now become just 1 because we delete "orangepie"
last/third loop: i = 2, Now you should see the problem, since i = 2 and the length of the list is only 1 (to clarify only list[0] have something in it!). 
```

所以宁愿使用类似的东西：

```
for item in in list:
    if "pie" not in item:
        new list.append(item) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T11:16:02.013

另一种但更长的方法是记下遇到 pie 的索引并在第一个 for 循环后删除这些元素

# arrays - 木偶中的数组

> ID：12953255
> 
> 赞同：0
> 
> 时间：2012-10-18T11:10:38.353
> 
> 标签：arrays, file, resources, puppet

我想知道如何解决以下 puppet 问题：我想基于字符串数组创建几个文件。复杂之处在于我想用文件创建多个目录：

```
dir1/
    fileA
    fileB
dir2/
    fileA
    fileB
    fileC 
```

问题是文件资源标题必须是唯一的。因此，如果我将文件名保存在数组中，我需要以自定义方式迭代数组，以便能够使用目录名对文件名进行后缀：

```
$file_names = ['fileA', 'fileB']
$file_names_2 = [$file_names, 'fileC']

file {'dir1': ensure => directory }
file {'dir2': ensure => directory }

file { $file_names: path = 'dir1', ensure =>present, }
file { $file_names_2: path = 'dir2', ensure =>present, } 
```

这不起作用，因为文件资源标题冲突。所以我需要将例如目录名称附加到文件标题，但是，这将导致文件数组被连接并且不被视为多个文件......

啊。。

```
file { "${file_names}-dir1": path = 'dir1', ensure =>present, }
file { "${file_names_2}-dir2": path = 'dir1', ensure =>present, } 
```

如何在不需要重复文件资源本身的情况下解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:32:07.893

我试过这个。您可以以此为例，根据您的具体需求进行修改

```
class common_setup::test {                                                                                                                                                             

   file {'/var/tmp/dir1': ensure => directory }                                                                                                                                         
   file {'/var/tmp/dir2': ensure => directory }                                                                                                                                         

   $file_names = ['fileA', 'fileB']                                                                                                                                                     
   $file_names_2 = unique(flatten([$file_names, 'fileC']))                                                                                                                              
   common_setup::makeDirs { $file_names_2 :}                                                                                                                                            
}                                                                                                                                                                                      

define common_setup::makeDirs {                                                                                                                                                        
   include common_setup::test                                                                                                                                                           

   if ($name in $file_names) and ($name in $file_names_2) {                                                                                                                             
      file { "/var/tmp/dir1/$name" :                                                                                                                                                     
        ensure => present,                                                                                                                                                               
      }                                                                                                                                                                                  

      file {"/var/tmp/dir2/$name" :                                                                                                                                                      
        ensure => present,                                                                                                                                                               
      }                                                                                                                                                                                  
   }                                                                                                                                                                                    
   else {                                                                                                                                                                               
     file {"/var/tmp/dir2/$name" :                                                                                                                                                      
       ensure => present,                                                                                                                                                               
     }                                                                                                                                                                                  
   }                                                                                                                                                                                    
} 
```

测试成功：

```
notice: /Stage[main]/Common_setup::Test/File[/var/tmp/dir2]/ensure: created
notice:   /Stage[main]/Common_setup::Test/Common_setup::Makedirs[fileA]/File[/var/tmp/dir2/fileA]/ensure: created
notice: /Stage[main]/Common_setup::Test/Common_setup::Makedirs[fileC]/File[/var/tmp/dir2/fileC]/ensure: created
notice: /Stage[main]/Common_setup::Test/Common_setup::Makedirs[fileB]/File[/var/tmp/dir2/fileB]/ensure: created
notice: /Stage[main]/Common_setup::Test/File[/var/tmp/dir1]/ensure: created
notice: /Stage[main]/Common_setup::Test/Common_setup::Makedirs[fileB]/File[/var/tmp/dir1/fileB]/ensure: created
notice: /Stage[main]/Common_setup::Test/Common_setup::Makedirs[fileA]/File[/var/tmp/dir1/fileA]/ensure: created
notice: Finished catalog run in 1.97 seconds 
```

并创建目录和文件：

```
ls /var/tmp/dir*/
/var/tmp/dir1/:
fileA  fileB

/var/tmp/dir2/:
fileA  fileB  fileC 
```

# javascript - 如何将此事件放入 .live

> ID：12953258
> 
> 赞同：1
> 
> 时间：2012-10-18T11:10:47.650
> 
> 标签：javascript, jquery

我有这个函数，我想把它放在 .live() 中。我的问题是这个功能可以正常工作，但是下次“不刷新”它不起作用，所以我正在考虑在执行后重置“模糊”的值。我读过这可以在 .live() 中使用 .blur() 来完成，但我真的不知道该怎么做。需要了解更多关于 sintaxt 和回调的信息。

```
$(window).blur( function() {
    // our window is on blur
    if(overiFrame != -1 ){
        // mouse over iframe and blur we count a click
        llamarAjax(1, adTopSrc, adMidSrc, adBotSrc);
    } else if(overiFrame2 != -1 ){
        // mouse over iframe and blur we count a click
        llamarAjax(2, adTopSrc, adMidSrc, adBotSrc);
    }else if( overiFrame3 != -1 ){
        // mouse over iframe and blur we count a click
        llamarAjax(3, adTopSrc, adMidSrc, adBotSrc);
    }
}); 
```

谢谢

# php - 使用 PHP 的透明圆形裁剪图像

> ID：12953262
> 
> 赞同：4
> 
> 时间：2012-10-18T11:11:05.430
> 
> 标签：php, image-processing, gd

我想使用 PHP 裁剪圆形图像，但我的新图像似乎有一些透明像素。当然，我只希望椭圆的外部区域具有透明背景

我的代码如下：

```
 $image = imagecreatetruecolor($this->dst_w, $this->dst_h);
        imagealphablending($image,true);
        imagecopy ( $image , $image_s , 0, 0, $this->src_x, $this->src_y, $this->dst_w, $this->dst_h );
        $mask = imagecreatetruecolor($this->src_x, $this->src_y);
        $mask = imagecreatetruecolor($this->dst_w, $this->dst_h);
        $transparent = imagecolorallocate($mask, 255, 0, 0);
        imagecolortransparent($mask, $transparent);
        imagefilledellipse($mask, $this->dst_w/2, $this->dst_h/2, $this->dst_w, $this->dst_h, $transparent);
        $red = imagecolorallocate($mask, 0, 0, 0);
        imagecopymerge($image, $mask, 0, 0, 0, 0, $this->dst_w, $this->dst_h,100);
        imagecolortransparent($image, $red);
        imagefill($image,0,0, $red);

        if ($ext=="jpg" || $ext=="jpeg") {
            imagejpeg($image, $this->croppedImage);
        } else if ($ext=="png") {
            imagepng($image, $this->croppedImage);
        }           
        imagedestroy($image);
        imagedestroy($mask);
        // <------- END generate cropped Image ------->

        // <------- START generate transparent Image ------->               
        $this->generateTransparentImage('circle'); 
```

……

实际生成图像的示例如下： ![在此处输入图像描述](../Images/f066b2e11036c8da4db008df4cf422a6.png)

编辑： generateTransparentImage 函数与上面列出的代码无关；这个函数生成这个图像： [http ://s7.postimage.org/byybq9163/Koala7_500x375_c_transparent.png](http://s7.postimage.org/byybq9163/Koala7_500x375_c_transparent.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T07:51:53.790

有几点需要注意：

正如@DainisAbols 建议的那样，最好采用不寻常的颜色来提高透明度。在这里，您使用的是 black ：

```
 $red = imagecolorallocate($mask, 0, 0, 0);
    imagecopymerge($image, $mask, 0, 0, 0, 0, $this->dst_w, $this->dst_h,100);
    imagecolortransparent($image, $red); 
```

即使您的 var 被称为红色，您的 RGB 值也是 0-0-0。不常见的颜色包括闪亮的蓝色 (0-0-255)、闪亮的绿色 (0-255-0)、闪亮的黄色 (255-255-0)、闪亮的青色 (0-255-255) 和闪亮的粉红色 (255-0- 255)。红色在任何地方都很常见，而且不是那么华丽，所以我将它排除在那些特殊颜色之外。

然后，即使您的图像都是真彩色的，为每个图像分配颜色也是一个好习惯。在上面的示例中，您创建了一个`$red`包含黑色的变量`$mask`，但您将其用作 中的透明度颜色`$image`。

最后，您正在绘制一个与图像大小具有相同半径的椭圆，因此您需要绘制图像的`imagefill`每个角，而不仅仅是左上角的角。在您的示例中它有效，但这只是因为您选择黑色作为透明色。

这是一个完整的实现。

```
<?php

class CircleCrop
{

    private $src_img;
    private $src_w;
    private $src_h;
    private $dst_img;
    private $dst_w;
    private $dst_h;

    public function __construct($img)
    {
        $this->src_img = $img;
        $this->src_w = imagesx($img);
        $this->src_h = imagesy($img);
        $this->dst_w = imagesx($img);
        $this->dst_h = imagesy($img);
    }

    public function __destruct()
    {
        if (is_resource($this->dst_img))
        {
            imagedestroy($this->dst_img);
        }
    }

    public function display()
    {
        header("Content-type: image/png");
        imagepng($this->dst_img);
        return $this;
    }

    public function reset()
    {
        if (is_resource(($this->dst_img)))
        {
            imagedestroy($this->dst_img);
        }
        $this->dst_img = imagecreatetruecolor($this->dst_w, $this->dst_h);
        imagecopy($this->dst_img, $this->src_img, 0, 0, 0, 0, $this->dst_w, $this->dst_h);
        return $this;
    }

    public function size($dstWidth, $dstHeight)
    {
        $this->dst_w = $dstWidth;
        $this->dst_h = $dstHeight;
        return $this->reset();
    }

    public function crop()
    {
        // Intializes destination image
        $this->reset();

        // Create a black image with a transparent ellipse, and merge with destination
        $mask = imagecreatetruecolor($this->dst_w, $this->dst_h);
        $maskTransparent = imagecolorallocate($mask, 255, 0, 255);
        imagecolortransparent($mask, $maskTransparent);
        imagefilledellipse($mask, $this->dst_w / 2, $this->dst_h / 2, $this->dst_w, $this->dst_h, $maskTransparent);
        imagecopymerge($this->dst_img, $mask, 0, 0, 0, 0, $this->dst_w, $this->dst_h, 100);

        // Fill each corners of destination image with transparency
        $dstTransparent = imagecolorallocate($this->dst_img, 255, 0, 255);
        imagefill($this->dst_img, 0, 0, $dstTransparent);
        imagefill($this->dst_img, $this->dst_w - 1, 0, $dstTransparent);
        imagefill($this->dst_img, 0, $this->dst_h - 1, $dstTransparent);
        imagefill($this->dst_img, $this->dst_w - 1, $this->dst_h - 1, $dstTransparent);
        imagecolortransparent($this->dst_img, $dstTransparent);

        return $this;
    }

} 
```

演示：

```
$img = imagecreatefromjpeg("test4.jpg");
$crop = new CircleCrop($img);
$crop->crop()->display(); 
```

结果 ：

![在此处输入图像描述](../Images/c59e8eac9a2a0e7c36b8f986bb94b06d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T04:32:12.500

我也无法用 Alain 的代码完成它。经过一段时间了解每一行代码的作用，这是我的修复..

```
 //this creates a pink rectangle of the same size
    $mask = imagecreatetruecolor($imgwidth, $imgheight);
    $pink = imagecolorallocate($mask, 255, 0, 255);
    imagefill($mask, 0, 0, $pink);
    //this cuts a hole in the middle of the pink mask
    $black = imagecolorallocate($mask, 0, 0, 0);
    imagecolortransparent($mask, $black);
    imagefilledellipse($mask, $imgwidth/2, $imgheight/2, $imgwidth, $imgheight, $black);
    //this merges the mask over the pic and makes the pink corners transparent
    imagecopymerge($img, $mask, 0, 0, 0, 0, $imgheight, $imgheight);
    imagecolortransparent($img, $pink);
    imagepng($img, "my_circle.png"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:14:14.870

您正在裁剪**和**删除黑色（或将黑色设置为透明）。由于您的图像中有黑色，因此它也会被删除。

不要删除颜色，而是尝试将外层颜色替换为粉红色，然后将其设置为透明。

# c++ - 多文件程序中的范围

> ID：12953264
> 
> 赞同：1
> 
> 时间：2012-10-18T11:11:17.770
> 
> 标签：c++, header, scope

除了 main.cpp 和一个常量头之外，我还有一个包含两个外部文件的程序。所以总共四个文件。它们包含以下代码：

主文件

```
#include <iostream>
using namespace std;

int ext1_func();
int ext2_func();

int main()
{
    int i;
    i = ext1_func();
    cout <<  i << endl;

    i = ext2_func();
    cout << i << endl;

    return 0;
} 
```

ext1.cpp

```
#include "const.h"
int asd1=1;

int ext1_func()
{
   return temp_int;

} 
```

ext2.cpp

```
#include "const.h"
int asd2 = 2;

int ext2_func()
{
   return temp_int;
} 
```

常量.h

```
#ifndef CONST_H
#define CONST_H

const int temp_int=1;

#endif 
```

我想要的是以下内容：

1) 在 ext1.cpp 中声明的任何变量都应该*只*为 ext1.cpp 内的函数所知，对于 ext2.cpp 也是如此。所以“asd1”必须只有“ext1_func”知道，“asd2”只能知道“ext2_func”。

2) “exp1.cpp”和“ext2.cpp”中的函数必须能够看到“const.h”中定义的所有值

我相信我编写并附加的代码满足这些要求，但我想问一下我这样做是否正确？有没有比我建议的更简单的方法来获得所需的行为？

提前致谢。

奈尔斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:17:23.977

在编译单元级别，您在“全局”范围内声明的符号都链接到全局变量空间。

避免这种情况的旧方法是将它们声明为静态的。新方法是将它们放入匿名命名空间中。它们也可以在那里被声明为静态的。

ext1.cpp

```
namespace {
  /*static*/ int asd1=1;  
} 
```

头文件中的 const 是可以的，这种方式声明的常量具有特殊的地位，实际上编译器可以在代码中替换该值。不过，理想情况下，您至少应该将它们包装在一个（命名的）命名空间中，以避免污染全局命名空间。修改值（使用 const_cast）将是未定义的行为。

如果它是非常量并且您真的想要一个全局（通常不是一个好主意），您需要在标头中使用 extern 关键字，然后在单个编译单元中创建它的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:18:47.313

我不会在 main.cpp中重复`ext1_func()`和`ext2_func()`原型，而是为每个函数定义一个头文件，并在那里添加函数原型：

```
// ext1.h
#ifndef EXT1_H_INCLUDED
#define EXT1_H_INCLUDED

int ext1_func();

#endif // EXT1_H_INCLUDED

// ext2.h
#ifndef EXT2_H_INCLUDED
#define EXT2_H_INCLUDED

int ext2_func();

#endif // EXT2_H_INCLUDED 
```

在 main.cpp 中：

```
#include "ext1.h"
#include "ext2.h" 
```

在 ext1.cpp 和 ext2.cpp 中，仅对源文件本地的变量使用**匿名命名空间：**

```
// ext1.cpp
#include "const.h"
#include "ext1.h"

namespace {

int asd1=1;

} // anonymous namespace

int ext1_func()
{
   return temp_int;   
} 
```

与 ext_2.cpp 类似。

您可能还想`#pragma once`在头文件中使用方便，而不是`#ifndef/#define`包含保护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:14:28.300

您应该将变量定义为`ext1.cpp`和`ext2.cpp`是静态的，以防止它们被其他文件看到。但是，这是一种非常糟糕的构建方式。相反，您应该将代码分成不同的类。有关详细信息，请参阅[此](http://en.wikipedia.org/wiki/Object-oriented_programming)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:18:57.910

当您想将变量设置为翻译单元（`.cpp`文件）的本地变量时，您可以将它们放入匿名命名空间中，如下所示：

```
namespace
{
    int local_variable = 1;
} 
```

或者你也可以用旧的 C 方式来做：

```
static int local_variable = 1; 
```

此外，您不应该在头文件中定义变量，因为它将在`.cpp`包含此头文件的每个模块中重复。你应该像这样在外部声明它`const.h`：

```
extern int external_variable; 
```

然后在相应的`const.cpp`文件中定义如下：

```
int external_variable = 1; 
```

# iphone - UIButton 内存管理 - 如何管理它？

> ID：12953268
> 
> 赞同：0
> 
> 时间：2012-10-18T11:11:30.987
> 
> 标签：iphone, objective-c, ios, uibutton, automatic-ref-counting

在我看来，我有将近 45`UIButton`秒，我知道按钮尚未分配到内存，编译器以某种方式分配/释放它，但我注意到设备在这个视图中变得更慢，所以......我该怎么办避免使用`UIButton`??

这是我将按钮放入视图的方式：

在 myView.h 中：

```
UIButton *btn1; 
```

在 myView.m 中：

```
btn1 = [UIButton buttonWithType:UIButtonTypeCustom];
[btn1 setTitle:@"btn1" forState:UIControlStateNormal];
[btn1 addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
btn1.backgroundColor = [UIColor clearColor];
btn1.frame = CGRectMake(  arc4random() % 920, arc4random() %600+50  , 65, 65);
[self.view addSubview:btn1]; 
```

以及我如何删除它：

```
for(UIButton* b in [self.view subviews]){
    [b removeFromSuperview];
    b = nil;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:18:33.993

内存泄漏本身不会导致您的应用程序显着变慢。它们的作用是填满内存，如果数量足够多，操作系统会由于内存使用过多而终止您的应用程序。（如果操作系统没有杀死您的应用程序，那么您可能会放慢速度，但由于它会杀死应用程序，所以没有问题）。

在任何情况下，如果您担心内存泄漏，您可以触发 Instruments 并在显示视图时查看它是否检测到任何内存泄漏。

您查看速度慢的可能原因是必须将 45 个图像加载到内存中，然后从磁盘读取它们（这很慢）。您可能会考虑预加载它们，看看这是否会有所改善。

预加载图像的一种简单方法是通过以下方式实例化它`imageNamed`：

```
 UIImage* img = [UIImage imageNamed:@"myButton1.png"]; 
```

您可以为所有按钮调用该方法，并在您可以调用的另一个方法中收集所有相关调用，例如，在启动时，或在对您有意义的任何其他时刻。

编辑：

> 当我进入视图并退出并重新进入视图时等等

请注意：您不需要从其父视图中删除按钮（在正常情况下）：这将由框架在删除父视图时完成。这可能会减慢应用程序的速度吗？

此外，如果在退出/进入视图时出现问题，您是否可以尝试“缓存”整个视图（例如：仅实例化一次，然后在需要时显示它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:20:12.713

您可以使用

```
@autoreleasepool {   //You UIButtons creation code goes here  } 
```

这将释放内存，在 autoreleasepool 范围内创建。我将 autoreleasepool 用于我的 cellForAtIndexPath 方法，有时我有超过 10000 行的自定义单元格和一些数据库查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:25:46.953

我以这种方式使用自动释放池。这将释放更多在自动释放中创建的内容。我以这种方式将许多自动释放池添加到我的表中以获得更好的性能

```
@autoreleasepool {
                    UIButton *btn=(UIButton*)[cell3.contentView.subviews objectAtIndex:btncont];

                    btn.tag=i;
                    [btn addTarget:self action:@selector(MozaicTblBtnSelection:) forControlEvents:UIControlEventTouchUpInside];

                    UIImage* img =  [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@/downloads/%@/files/%@.jpg",del.LocalPath,del.CompFolder,del.RepId,pi.STOCK_CODE]];

                    if(img!=nil)
                    {   
                        [btn setImage:img forState:UIControlStateNormal];

                        [btn.layer setBorderColor:[UIColor blackColor].CGColor];
                        [btn.layer setBorderWidth:1.0];

                    }
                    else
                    {
                        [btn setImage:[UIImage imageNamed:@"no_privew95x77.jpg"] forState:UIControlStateNormal];

                    }
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:41:23.623

我希望这可以帮助你...

```
 UIScrollView *scrlView =[[UIScrollView alloc]initWithFrame:self.view.frame];
    scrlView.tag=123;
    [scrlView  setBackgroundColor:[UIColor blueColor]];

    for(int i=0;i<45;i++)
    {
       UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeCustom];
        [btn1 setTitle:@"OK" forState:UIControlStateNormal];
        btn1.tag=i;
        [btn1 addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
        btn1.backgroundColor = [UIColor clearColor];
        btn1.frame = CGRectMake(  arc4random() % 300, arc4random() %420  , 30, 30);
        [scrlView addSubview:btn1];
    }
    [scrlView setContentSize:CGSizeMake(320, 460)];
    [self.view addSubview:scrlView]; 
```

& 获取 CickEvent

```
 -(IBAction)btnClicked:(UIButton*)sender
    {
        NSLog(@"Button No :%d Clicked",sender.tag);
    } 
```

& 删除你可以做的是

```
 for(UIButton* b in [[self.view viewWithTag:123] subviews])
    {
        [b removeFromSuperview];
    } 
```

# jquery - 通过 .each() 跨函数使用 vars

> ID：12953271
> 
> 赞同：1
> 
> 时间：2012-10-18T11:11:43.637
> 
> 标签：jquery, variables, truncate

我正在尝试截断 div 标头。我相信，我的功能是有问题的，因为范围可变。

这是我的功能分解：

> 1.  设置变量，使它们的范围正确
> 2.  循环遍历每个 div：
>     *   保存长标题
>     *   创建截断的标题
>     *   设置截断的标题
> 3.  在鼠标输入时，使用完整标题
> 4.  在鼠标离开时，使用截断的标题

我怎样才能重新排列这个函数，以便正确地传递变量？

```
jQuery(document).ready(function($) {
    eventHover();
}); 

function eventHover(){

    // Set var scope
    var title = '';
    var shortText = '';
    var longText = '';

    // Change long titles to short version
    $('#event_promo .panel').each( function() {
        title = $(this).find($('h3 a'));
        longText = title.html();

        shortText = jQuery.trim(longText).substring(0, 50)
            .split(" ").slice(0, -1).join(" ") + "...";

        title.html(shortText);
    }); 

    // Add hover class and change title to long version
    $('#event_promo .panel .trigger').mouseenter(function () {
        $(this).parent().addClass('hover');
        title.html(longText);
    });

    // Remove hover class and revert title to short version
    $('#event_promo .panel .trigger').mouseleave(function () {
        $(this).parent().removeClass('hover');
        title.html(shortText);
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:25:07.193

我建议[`data()`](http://api.jquery.com/data/)在“全局”变量上使用该方法：

```
$('#event_promo .panel').each( function() {

    var $title = $(this).find('h3 a');
    var longText = title.html();

    var shortText = jQuery.trim(longText).substring(0, 50)
        .split(" ").slice(0, -1).join(" ") + "...";

    $title.html(shortText);

    $(this).data({ shortText: shortText, longText: longText });
}); 
```

处理数据：

```
$('#event_promo .panel .trigger').mouseenter(function () {

    var longText = $(this).closest('.panel').data('longText');
    var shortText = $(this).closest('.panel').data('shortText');

    //do stuff with the texts here

}); 
```

# java - 如何从 RES 导出的 .jar 文件中调用 ILOG 规则？

> ID：12953278
> 
> 赞同：0
> 
> 时间：2012-10-18T11:11:57.287
> 
> 标签：java, ilog

我正在研究 ILOG Jrules7.1。我已经编写了规则并部署在 RES 中。我可以使用网络服务调用规则。我也得到了预期的结果。

但我的客户要求是将 RES 中的规则导出为 jar 并将此 jar 添加到 Web 应用程序中。

我应该能够在 Web 应用程序中调用此规则，而无需点击 RES。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:55:31.043

实际执行规则的是规则执行服务器 (RES)，因此您仍然需要调用它。您可以将规则导出为 jar，但这只是允许您将它们安装到另一个 RES 中，而不是自己执行它们。

当您说“我能够使用 Web 服务调用规则”时，您实际上是在调用 RES 并告诉它执行您的规则，而不是直接调用规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T19:42:11.367

您需要为基于规则的应用程序开发 Java 客户端。此客户端将保存 rulset.jar，可根据您的设置通过 ra.xml 进行配置，（基于文件/数据库的持久性）

您可以在此链接中参考上述步骤

[https://www-01.ibm.com/support/knowledgecenter/SSQP76_8.7.1/com.ibm.odm.dserver.rules.res.developing/topics/tsk_res_client_pojo.html](https://www-01.ibm.com/support/knowledgecenter/SSQP76_8.7.1/com.ibm.odm.dserver.rules.res.developing/topics/tsk_res_client_pojo.html)

希望能帮助到你！！！

# firebug - OpenLayers 中的某些图块未加载，除非我打开/关闭萤火虫

> ID：12953281
> 
> 赞同：3
> 
> 时间：2012-10-18T11:12:00.127
> 
> 标签：firebug, openlayers, openstreetmap, firebug-lite

我想将地图加载到灯箱中。因此，一旦触发链接，就会显示一个包含地图的灯箱。但是当我这样做时，除了我打开/关闭萤火虫（取决于它是否已经打开）时，一些图块不会加载，实际上不仅萤火虫，还有 Chrome 检查器和 IE 开发人员工具。我在具有相同尺寸和相同结构的页面（没有灯箱）上单独尝试过，一切正常。顺便说一句，我正在使用 OpenLayers-2.12。是调试问题还是什么？如果是，我该如何解决？

这是所有页面的代码：

```
<html>
<head>
        <script type="text/javascript" src="/js/jquery-1.7.min.js"></script>
        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">

            function longlat(lon,lat) {
                var fromProjection = new OpenLayers.Projection("EPSG:4326");
                var toProjection   = new OpenLayers.Projection("EPSG:900913");
                return new OpenLayers.LonLat(lon,lat).transform(fromProjection, toProjection);
            }

             function init_map() {
                var map = new OpenLayers.Map("basicMap");
                var mapnik         = new OpenLayers.Layer.OSM();
                var position       = longlat(28.8013,31.1711);
                var zoom           = 3; 
                var markers = new OpenLayers.Layer.Markers( "Markers" );
                map.addLayer(markers);
                var size = new OpenLayers.Size(21,25);
                var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
                var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png', size, offset);

                var location = new OpenLayers.Geometry.Point(28.8013, 31.1711).transform('EPSG:4326', 'EPSG:3857');

                var popup = new OpenLayers.Popup.FramedCloud('Popup',location.getBounds().getCenterLonLat(),new OpenLayers.Size(200,200),'<p>some text</p>',null,true);
                var marker = new OpenLayers.Marker(longlat(28.8013,31.1711),icon.clone());
                   marker.events.register('click',marker,function (evt) { 
                        map.addPopup(popup);
                        popup.show(); 
                   });
                   markers.addMarker(marker);

                    map.addLayer(mapnik);
                    map.setCenter(position, zoom);

              }

             </script>

        <script type="text/javascript">
                    jQuery(document).ready(function() {
                        init_map();
                        jQuery('#map_button').click(function() {
                            jQuery('.map_lightbox , .map_box , #basicMap').css('display','block');
                            jQuery('.map_lightbox').animate({opacity:0.8},300,'linear');
                            jQuery('.map_box').animate({opacity:1.0},500,'linear');

                            jQuery('.map_close').click(function() {
                                map_close();
                            });

                            jQuery('.map_lightbox').click(function() {
                                map_close();
                            });

                        });

                    });

                    function map_close() {
                        $('.map_container').children('object').remove();
                        $('.map_lightbox').animate({opacity:0},300,'linear',function() {
                            $('.map_lightbox , .map_box').css('display','none');
                        });
                    }
        </script>

        <style>
            .map_lightbox {
                    position: fixed;
                    top:0px;
                    left:0px;
                    width:100%;
                    height:100%;
                    background:#000000;
                    opacity:0;
                    filter:alpha(opacity=0);
                    z-index: 1000;
                    display:none;
                }

                .map_box {
                    position:fixed;
                    top:20%;
                    left:25%;
                    width:600px;
                    height:400px;
                    background :#f2f2f2;
                    z-index:1005;
                    padding:10px;
                    -moz-border-radius: 5px;
                    -webkit-border-radius: 5px;
                    border-radius:5px;
                    display:none;
                }

                .map_close {
                    cursor:pointer;
                    float:right;
                    margin-left:98%;
                    font-weight:bold;
                }

                .map_container {
                    margin-right:5px;
                }

                .map_container {
                    width:95%;
                    height:95%;
                    position:relative;
                    float:right;
                    margin-right:20px;
                    -moz-border-radius:3px;
                    border-radius:3px;
                    -webkit-border-radius:3px;
                }
        </style>
</head>
<body>
    <div class='map_lightbox'>
    </div>
    <div class='map_box'>
        <div class='map_close'>x</div>  
        <div class='map_container'>
            <div id='basicMap' style='width:100%;height:100%;display:none;position:absolute;'></div>
        </div>
    </div>
    <a href='javascript:void(0)' id='map_button' >full map</a>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:35:43.823

这对最终结果有什么影响吗？

```
 OpenLayers.IMAGE_RELOAD_ATTEMPTS = 5; 
```

此外，javacript 调试器是否在某处“中断”？也许是由于js错误？最后，您的“网络”面板是否显示任何非 http 响应代码 200 行（通常为红色）。然后您知道呼叫已拨打但失败。

# android - 在更改视图可见性的同时应用动画

> ID：12953284
> 
> 赞同：4
> 
> 时间：2012-10-18T11:12:03.607
> 
> 标签：android, animation

我的应用程序中有一个 Horizo​​ntalScrollView，并且我经常使用它的可见性（可见和消失）。所以我想要的是，而不是突然让它可见和不可见，我可以应用某种动画或其他东西，以便它开始以滑动方式变得可见和不可见？

任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T11:24:19.220

你可以试试这个：

```
Animation animation = new TranslateAnimation(0,0,0,1000);
animation.setDuration(1000);
yourButtonorImage.startAnimation(animation); 
```

要使其可见或不可见，您可以使用 setAnimationListener。在 onAnimationEnd 中，使其可见或不可见。不确定这是否是您的意思..希望它有所帮助..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-13T08:28:10.507

试试这个..

```
youView.setVisibility(View.VISIBLE);
ObjectAnimator anim = ObjectAnimator.ofFloat(youView, "alpha", 0f, 1f);
anim.setDuration(1000);
anim.start(); 
```

应用了 API 级别限制。

# solr - solr 索引后没有找到结果

> ID：12953285
> 
> 赞同：1
> 
> 时间：2012-10-18T11:12:04.607
> 
> 标签：solr

我正在使用 DataImportHandle 将 sql 数据导入到 solr。

我得到

索引完成。添加/更新：121 个文档。删除了 0 个文档。请求：1，获取：121，跳过：0，处理：121

导入后

当我查询`q=*:*` 时得到 0 个结果

01 *：* xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T13:37:26.790

当您数据导入检查提交选项

信用：@Jayendra [https://stackoverflow.com/users/950178/jayendra](https://stackoverflow.com/users/950178/jayendra)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:37:46.060

尝试使用`q=*:*`That is the standard search all fields for all values 查询的查询。

# php - 使用 php 脚本将大 zip 文件分成小块

> ID：12953301
> 
> 赞同：1
> 
> 时间：2012-10-18T11:12:40.290
> 
> 标签：php, file, split

我正在使用以下脚本将大 zip 文件拆分为小夹头。

```
$filename = "pro.zip"; 
$targetfolder = '/tmp';

// File size in Mb per piece/split. 
// For a 200Mb file if piecesize=10 it will create twenty 10Mb files
$piecesize = 10; // splitted file size in MB

$buffer = 1024;
$piece = 1048576*$piecesize;
$current = 0;
$splitnum = 1;

if(!file_exists($targetfolder)) {
    if(mkdir($targetfolder)) {
        echo "Created target folder $targetfolder".br();
    }
}

if(!$handle = fopen($filename, "rb")) {
    die("Unable to open $filename for read! Make sure you edited filesplit.php correctly!".br());
}

$base_filename = basename($filename);

$piece_name = $targetfolder.'/'.$base_filename.'.'.str_pad($splitnum, 3, "0", STR_PAD_LEFT);
if(!$fw = fopen($piece_name,"w")) {
    die("Unable to open $piece_name for write. Make sure target folder is writeable.".br());
}
echo "Splitting $base_filename into $piecesize Mb files ".br()."(last piece may be smaller in size)".br();
echo "Writing $piece_name...".br();
while (!feof($handle) and $splitnum < 999) {
    if($current < $piece) {
        if($content = fread($handle, $buffer)) {
            if(fwrite($fw, $content)) {
                $current += $buffer;
            } else {
                die("filesplit.php is unable to write to target folder");
            }
        }
    } else {
        fclose($fw);
        $current = 0;
        $splitnum++;
        $piece_name = $targetfolder.'/'.$base_filename.'.'.str_pad($splitnum, 3, "0", STR_PAD_LEFT);
        echo "Writing $piece_name...".br();
        $fw = fopen($piece_name,"w");
    }
}
fclose($fw);
fclose($handle);
echo "Done! ".br();
exit;

function br() {
    return (!empty($_SERVER['SERVER_SOFTWARE']))?'<br>':"\n";
}
?> 
```

但是这个脚本在目标临时文件夹中拆分后不会创建小文件。脚本成功运行，没有任何错误。

请帮我找出这里有什么问题？或者，如果您有任何其他类似功能的工作脚本，请提供给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:36:22.700

如上面的评论所示，您可以使用`split`将文件拆分成更小的部分，然后可以使用`cat`将它们重新组合在一起。

```
split -b50m filename x 
```

并把它们放回去

```
 cat xaa xab xac > filename 
```

如果您希望将 zipfile 拆分为跨越类型的存档，这样您就不需要将它们重新连接在一起，请查看`zipsplit`

```
 zipslit -n (size) filename 
```

所以你可以从你的 exec 脚本中调用 zipsplit，然后大多数标准的解压缩工具应该能够将它重新组合在一起。 `man zipslit`更多选项，包括设置输出路径等。

# javascript - Javascript日期时间字符串到日期对象

> ID：12953302
> 
> 赞同：9
> 
> 时间：2012-10-18T11:12:42.490
> 
> 标签：javascript, date, datetime, time

我正在调试一个带有一些只能在 Chrome 中运行的功能的小应用程序。问题在于您选择日期和时间的日期选择器，日期选择器将其连接到日期时间字符串中。

无论如何，字符串看起来像这样：`2012-10-20 00:00`.

但是，现在使用它的 javascript 只接受字符串并用它初始化一个对象，如下所示：`new Date('2012-10-20 00:00');`

这导致 Firefox、IE 以及除 Chrome 之外的所有浏览器中的日期无效。我需要建议我如何最好地将这个日期字符串转换为 javascript 中的 Date 对象。我启用了 jQuery。

感谢您的圣人建议和更好的智慧。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T11:20:15.033

如果字符串格式始终如您所述，则拆分字符串并使用位，例如：

```
var s = '2012-10-20 00:00';
var bits = s.split(/\D/);
var date = new Date(bits[0], --bits[1], bits[2], bits[3], bits[4]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-07T02:30:23.853

这只是简化版本：

```
 var newDate = new Date('2015-04-07 01:00:00'.split(' ')[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:20:16.537

如果`str = '2012-10-20 00:00'`

```
new Date(str.split(' ')[0].split('-').join(',') + ',' + str.split(' ')[1].
split('-').join(',')) 
```

应该做的伎俩

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-18T11:26:58.783

使用 parseExact 方法

```
var date = new Date.parseExact(dateString, "yyyy-mm-dd hh-mm"); 
```

# blender - 搅拌机出口/单面多边形

> ID：12953308
> 
> 赞同：0
> 
> 时间：2012-10-18T11:13:06.853
> 
> 标签：blender, 3d-modelling, copperlicht

我对 3d 建模、搅拌机等真的很陌生。

我用搅拌机（一个房间）创建了一个模型。现在我将其导出（作为 .obj），以便可以将其导入 CopperCube（创建 3D 场景的工具）。

问题是，墙壁只能从外面看到。看一下图片：

搅拌机：http: [//imageshack.us/photo/my-images/341/blenderg.png/](http://imageshack.us/photo/my-images/341/blenderg.png/)

铜立方：http : [//imageshack.us/photo/my-images/829/coppercube.png/](http://imageshack.us/photo/my-images/829/coppercube.png/)

我问了 CopperCube 的论坛，他们说只有一侧的多边形（或翻转）。有没有办法改变这个？对不起，但我是这个的初学者......

以下是 CopperCube 论坛的答案：

> 我不知道搅拌机，但是您可以更改任何导出选项吗？看起来您的模型只有一侧的多边形，或者其中一些的法线被翻转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:27:40.403

确保在 OBJ 导出选项中选中了法线复选框（在左侧，默认情况下它是关闭的）：

![在此处输入图像描述](../Images/a2f42df2846d713548d95f1681488f72.png)

您需要对房间进行建模，使其具有细长的立方体而不是平面，只要它们从两侧都可见。

您可以在编辑模式下在 Blender 中显示法线。在*Properties* (N) 中向下滚动到 Mesh Display 并检查您想要查看的法线类型及其长度。

要重新计算法线或翻转其方向，请转到*法线部分的**工具架*(T) 。

 *![在此处输入图像描述](../Images/75bf01b3502be896e068f428446ed04b.png)*

# objective-c - 如何为 UIProgressView 的自定义 trackImage 禁用抗锯齿？

> ID：12953310
> 
> 赞同：1
> 
> 时间：2012-10-18T11:13:10.063
> 
> 标签：objective-c, ios, progress-bar, pixel, antialiasing

我有一个名为 xpBar 的插座，它是一个 UIProgressView。我需要为自定义轨道和进度图像禁用抗锯齿，但我可以在其中找到的唯一图层显然不会影响轨道和进度图像。

```
self.xpBar.trackImage = [[UIImage imageNamed:@"bar_grey.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(4, 4, 4, 4)];
self.xpBar.layer.magnificationFilter = kCAFilterNearest; // Does nothing :( 
```

我真的需要继承 UIProgressView 来做到这一点，如果是这样，我将如何摆脱这种抗锯齿？

# android - EditText keylistener 上的 Android 空值

> ID：12953312
> 
> 赞同：0
> 
> 时间：2012-10-18T11:13:29.503
> 
> 标签：android, null, android-edittext, android-softkeyboard, onclicklistener

现在已经尝试使用此代码，但是当我按 Enter 时一直得到一个空值？任何人都可以提出一个解决方案来避免这种情况吗？

```
editext.setOnKeyListener(new View.OnKeyListener() {         
   public boolean onKey (View v, int keyCode, KeyEvent event) {             
      // TODO Auto-generated method stub             
      if (keyCode==KeyEvent.KEYCODE_ENTER) {                  
         if ("test1".equalsIgnoreCase(editext.getText().toString())) {                    
            but4.performClick();                     
         }
      }                 
      else if ("test2".equalsIgnoreCase(editext.getText().toString())) {            
         but5.performClick();                 
      }              

      if ("test5".equalsIgnoreCase(editext.getText().toString())) {              
         but6.performClick();             
      }              

      if ("test7".equalsIgnoreCase(editext.getText().toString())) {              
         but7.performClick();             
      }             

      if (editext.getText().toString() != null){               
         testwrong.seText("wrong");               
      }          

      return true;             
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:26:23.530

根据[文档](http://developer.android.com/reference/android/view/View.OnKeyListener.html)，该`keyCode`值对应于按下的*硬件*键。这可能不是指软键盘。

尝试从`KeyEvent`.

# ios - AVPlayer 的音频音量超过 Airplay？

> ID：12953316
> 
> 赞同：1
> 
> 时间：2012-10-18T11:13:42.297
> 
> 标签：ios, audio, avplayer, airplay

有谁知道通过 Airplay 播放 AVPlayer 音轨时调整音量的方法？我已经尝试过 AVAudioMix 和 MPVolumeView 但它们都不起作用。我已经在 iOS 5 和 iOS 6 上尝试过，并且正在使用最新的 xcode 4.5.1。这不起作用的一个简单示例是 Apple 的 AVPlayerTestApp，它使用 setVolumeRampFromStartVolume 进行简单的淡出。这在设备上可以正常工作，但如果通过 Airplay 连接则不能。

在 ViewDidLoad 中，我加载曲目并开始播放（这全部取自 AVPlayerTestApp）

```
AVAudioSession *session = [AVAudioSession sharedInstance];
[session setActive:TRUE error:nil];
[session setCategory:AVAudioSessionCategoryPlayback error:nil];

self.mediaItems = [[[MPMediaQuery songsQuery] items] mutableCopy];

NSURL *anUrl = [[mediaItems objectAtIndex: 0] valueForProperty:MPMediaItemPropertyAssetURL];
AVAsset *asset = [AVURLAsset URLAssetWithURL:anUrl options:nil];
AVPlayerItem *myPlayerItem = [AVPlayerItem playerItemWithAsset:asset];

self.myPlayer1 = [[[AVPlayer alloc] initWithPlayerItem:myPlayerItem] retain];

[myPlayer1 play]; 
```

然后我有一个按钮，它打开一个警报视图，允许用户设置音量并打开播放

```
MPVolumeView *volumeView = [[[MPVolumeView alloc] initWithFrame: CGRectMake(10, 37, 260, 20)] autorelease];
UIAlertView *volumeAlert = [[UIAlertView alloc] initWithTitle:@"Volume" message:@"" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[volumeView sizeToFit];
[volumeAlert addSubview:volumeView];
[volumeAlert show];
[volumeAlert release]; 
```

然后是淡出当前播放曲目的另一个按钮

```
AVAsset *asset = [myPlayer1.currentItem asset];
NSArray *keys = [NSArray arrayWithObject:@"tracks"];
[asset loadValuesAsynchronouslyForKeys:keys completionHandler:^(void) {
    NSError *error = nil;
    AVKeyValueStatus trackStatus = [asset statusOfValueForKey:@"tracks" error:&error];
    CMTime currentTime;
    switch (trackStatus) {
        case AVKeyValueStatusLoaded:
            if(myPlayer1)
            {
                NSArray *tracks = [asset tracksWithMediaType:AVMediaTypeAudio];
                NSMutableArray * allAudioParams = [NSMutableArray array];
                for (AVAssetTrack *t in tracks) {
                    AVMutableAudioMixInputParameters *params =[AVMutableAudioMixInputParameters audioMixInputParameters];

                    float fadeOutSeconds = 5;

                    currentTime = [myPlayer1 currentTime];

                    [params setVolumeRampFromStartVolume: 1.0 toEndVolume: 0.0 timeRange: CMTimeRangeMake(currentTime, CMTimeMakeWithSeconds(fadeOutSeconds, 1))];

                    [params setTrackID:[t trackID]];
                    [allAudioParams addObject:params];
                }
                AVMutableAudioMix * zeromix = [AVMutableAudioMix audioMix];
                [zeromix setInputParameters:allAudioParams];

                [myPlayer1.currentItem setAudioMix:zeromix];
            }

            break;
        case AVKeyValueStatusFailed:
            // error occured loading AVAsset
            NSLog(@"error occured loading AVAsset");
            break;
        case AVKeyValueStatusCancelled:
            // loading of the AVAsset was cancelled
            NSLog(@"loading of the AVAsset was cancelled");
            break;
        default:
            break;
    }
}]; 
```

这在设备上按预期工作，并在点击按钮时减弱音量。但是，如果打开 Airplay，则无法更改音量。使用 MPMoviePlayController 我可以做淡化自己，这在 Airplay 上工作，但 AVPlayer 的延迟比 Airplay 少，所以我宁愿使用它。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:05:27.853

由于 Sam_899 没有发布答案，我将不得不这样做。据我所知，除非在打开镜像的情况下建立连接，否则无法通过 airplay 控制 avplayer 的音量。由于打开镜像的唯一方法是在您的应用程序外部，因此唯一的选择是通知用户如何自己打开它并希望他们对此感到满意！对于那些不知道如何通过airplay打开镜像的人；双击home键，向左滑动到音量控制，点击airplay图标，选择要连接的airplay设备，然后打开镜像。

# pdf - 通过 geoserver 打印模块 (MapFish) 在矢量图层上打印标签

> ID：12953317
> 
> 赞同：0
> 
> 时间：2012-10-18T11:13:44.077
> 
> 标签：pdf, labels, geoserver

我将 MapFish 插件用于地理服务器。矢量图层打印良好，但其上的文本标签不会出现在 pdf 中。尽管它们在打印之前在地图上可见。

请帮帮我=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T11:17:53.767

请使用最新的 mapfish-print。您需要按照此处的说明下载并编译它[https://github.com/mapfish/mapfish-print](https://github.com/mapfish/mapfish-print)

# sql-server-2008 - TSQL 游标的结果不一致

> ID：12953321
> 
> 赞同：0
> 
> 时间：2012-10-18T11:14:00.140
> 
> 标签：sql-server-2008, tsql, cursor

我有一个使用游标将数据插入数据库的查询。奇怪的是查询第一次运行（ SSMS > Execute ），但是如果我第二次运行它，带有光标的部分不会执行。

但是 - 如果我然后点击“调试”，我可以调试并且整个查询执行得很好。之后，它再次正常工作，然后再次执行第一个插入脚本。

[我尝试了此处](https://stackoverflow.com/questions/4048147/inconsistent-cursor-results-when-looping-over-databases)提到的 FAST_FORWARD，但这似乎并不能解决问题。有什么建议么？

```
/** Declarations **************************************************/
DECLARE @TemplateFileName varchar(200)
DECLARE @TemplatePreviewFileName varchar(200)
DECLARE @TemplateId int
DECLARE @CompanyId int
DECLARE CompanyCursor cursor FAST_FORWARD FOR SELECT [CmpId] from SetCompany
/******************************************************************/

/** Set template name here ****************************************/
SET @TemplateFileName           = 'Template_2'
SET @TemplatePreviewFileName    = 'Template_2'
/******************************************************************/

/******************************************************************/
INSERT INTO ... etc
SET @TemplateId = @@IDENTITY;
Open CompanyCursor

WHILE @@FETCH_STATUS = 0
    BEGIN       
        IF(@CompanyId IS NOT NULL)
        BEGIN
            PRINT 'Adding template ' + @TemplateFileName + ' with id ' + convert(varchar, @TemplateId) + ' to company ' + convert(varchar, @CompanyId);
            INSERT INTO .... etc
            PRINT 'OK';
        END
        Fetch NEXT FROM CompanyCursor INTO @CompanyId
END
CLOSE CompanyCursor;
DEALLOCATE CompanyCursor; 
```

运行“第一次”，我得到：

```
(1 row(s) affected)
Adding template Template_2.frx with id 2272 to company 10

(1 row(s) affected)
OK
Adding template Template_2.frx with id 2272 to company 11

(1 row(s) affected)
OK
Adding template Template_2.frx with id 2272 to company 12

(1 row(s) affected)
OK
Adding template Template_2.frx with id 2272 to company 13

(1 row(s) affected)
OK
Adding template Template_2.frx with id 2272 to company 14

(1 row(s) affected)
OK 
```

第二次，只有这个：

```
(1 row(s) affected) 
```

事实上，光标内的插入没有运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:21:03.657

后

```
Open CompanyCursor 
```

添加

```
FETCH NEXT FROM CompanyCursor
INTO @CompanyId 
```

# php - php轮适合购物车总数吗？

> ID：12953322
> 
> 赞同：1
> 
> 时间：2012-10-18T11:14:05.120
> 
> 标签：php, floating-point, shopping-cart, rounding

我正在使用这个

```
$grandtotal = round ($grandtotal, 2); 
```

从购物车中呼应我计算出的总计，因为没有它我会得到这样的东西：

27.999999997 由于价格中的小数。

问题，

我可以指望浮点误差总是在 0.000000 区域的某个地方吗？

如果总是这么小的数字四舍五入应该不是问题并且总是返回正确的总数吗？

还是我需要更复杂的方法？

我正在经营的商店将是一家送餐店，预计人们不会订购数千件商品，因此 0.00000002 的不准确性会累积到 0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:23:16.760

如果您在整个计算过程中使用 round 函数，那么应该没有问题。

我在 php 中编写了一些会计资料，并且使用该函数没有什么大问题。
但一定要对照一些好的旧纸和铅笔计算来检查结果。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:36:12.230

我们不使用圆形

```
number_format($amount, 2, ".",""); //as you want the amount to be as much closer to real 27.99 
```

但如果你真的需要使用圆形：

```
echo round(9.0, 0, PHP_ROUND_HALF_UP);   // 9
echo round(9.1, 0, PHP_ROUND_HALF_UP);   // 9
echo round(9.2, 0, PHP_ROUND_HALF_UP);   //9
echo round(9.3, 0, PHP_ROUND_HALF_UP);   // 9
echo round(9.4, 0, PHP_ROUND_HALF_UP);   // 9
echo round(9.5, 0, PHP_ROUND_HALF_UP);   // 10
echo round(9.6, 0, PHP_ROUND_HALF_UP);   // 10
echo round(9.7, 0, PHP_ROUND_HALF_UP);   // 10
echo round(9.8, 0, PHP_ROUND_HALF_UP);   // 10
echo round(9.9, 0, PHP_ROUND_HALF_UP);   // 10
echo round(27.999999997, 0, PHP_ROUND_HALF_UP); //28
echo round(27.994444, 0, PHP_ROUND_HALF_UP);   // 28 
```

通过向上或向下舍入，您可能会损失很多钱。您的购物篮将有 10 件物品，成本为 1.4 英镑，如果您有 10000 件物品，您的损失将是 4 便士，损失将是 400 英镑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:36:55.460

不是[`round`](http://php.net/round)不适合，而是您的数据类型不适合。[PHP 的浮点数](http://php.net/manual/en/language.types.float.php)不适合您在问题中的货币值。所以你没有使用合适的类型来完成这项工作。

而是使用专用货币类型。默认情况下，PHP 中不存在 AFAIK，您可以在各个地方找到它的模式描述，例如在[EAA 目录的 P | | 钱](http://martinfowler.com/eaaCatalog/money.html)。

# java - jboss 上的 web.xml 欢迎文件

> ID：12953328
> 
> 赞同：0
> 
> 时间：2012-10-18T11:14:14.683
> 
> 标签：java, web, jboss7.x, web.xml

我有带有 ejb 和 web 模块的 ear 应用程序。在 web-inf 的 web 模块中，我有这样的 web.xml：

```
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>view.xhtml</welcome-file>
</welcome-file-list> 
```

它不起作用。JBoss 在启动时不显示此页面。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:17:28.130

你试过没有 q 命名空间的标签吗？像：

```
<welcome-file-list>
    <welcome-file>view.xhtml</welcome-file>
</welcome-file-list> 
```

# javascript - jQuery ScrollTo 跳过并且是 Notchy

> ID：12953329
> 
> 赞同：2
> 
> 时间：2012-10-18T11:14:23.323
> 
> 标签：javascript, jquery

我对 jQuery ScrollTo 有疑问。
当应用于我的页面时，它会跳过并且存在滞后。

[这是指向](http://jsfiddle.net/UyH56/8/)有效的 jsFiddle 示例的链接，[这](http://tinyurl.com/d5smxls)是应用于我的页面但无效的相同代码。

它可能在某些机器上正常运行，但我测试过的所有机器都不能！
我使用的图像数量可能有问题吗？
我能做些什么来克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:26:42.047

它在我的机器（你的网站）上有点跳动，但我注意到可能有帮助的一件事是，如果我很快在“高级行政人员”和“经验丰富的雇用”之间单击返回和第四个，它真的很好而且很流畅。在滚动之前、期间或之后是否有任何回调或一些计算？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:26:54.197

那里的问题是背景图像。在“性能不佳的机器”上，像您一样使用整页背景图像并且滚动效率不高。

例如，使用顶部菜单或常规滚动条，我的工作机器在您的页面上滞后。另一方面，当使用顶部菜单滚动时，我的 MacBook Pro 以流畅的感觉完美地处理您的页面。

我在我的机器上使用 chrome 对其进行了测试，并使用开发人员工具删除了背景图像。它现在完美运行。一旦我放回背景图像，它就会再次开始滞后。

# google-maps-api-3 - 谷歌地图：信息窗口没有关闭

> ID：12953332
> 
> 赞同：0
> 
> 时间：2012-10-18T11:14:38.723
> 
> 标签：google-maps-api-3, infowindow

当我单击另一个标记时，我的 infowindows 不会自动关闭。这里的代码：[http](http://pastebin.com/PvCt2z7W) ://pastebin.com/PvCt2z7W 这是带有 infowindows 的标记的代码

```
 for (var n = 0 ; n <listFavourite.length ; n++)
                    //var favouriteObject =listFavourite[n];
                       addMarker(listFavourite[n]);
                   }           
                   function addMarker(data) {
                       var marker = new google.maps.Marker({
                           position: new google.maps.LatLng(data.lattitude, data.longitude),
                           map: map,
                           title: data.address
                       });

                       var contentString = '<div id="content">'+
                           '<div id="siteNotice">'+
                           '</div>'+
                           '<h2 id="firstHeading" class="firstHeading">'+data.name+'</h2>'+
                           '<div id="bodyContent">'+
                           '<p>'+data.address+'</p>'+
                           '<p></p>'+
                           '<p>Do You Want to change search location</p>'+
                           '<input name="yes" id="yes" type="button" class="btn-common" value="Yes"/>'+
                           '</div>'+
                           '</div>';                                                   
                       var infowindow = new google.maps.InfoWindow({
                       maxWidth: 10,
                       });              
                       google.maps.event.addListener(marker, "click", function() {                     
                           infowindow.setContent(contentString);
                           infowindow.open(map, marker);                       
                       });     
                   }; 
```

我在这里尝试了所有答案，但无法正常工作任何建议或帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:25:30.137

不要为每个标记创建一个信息窗口，而是拥有一个全局信息窗口变量。然后，您在标记单击处理程序中所做的就是每次更新标记的内容。但是，您的代码将要求使用闭包来完成此操作，否则您将获得具有最后一个标记内容的每个标记。

```
var infowindow = new google.maps.InfoWindow({
   maxWidth: 10
});

var arrMarkers = [];

function addMarker(data) {
   var marker = new google.maps.Marker({
       position: new google.maps.LatLng(data.lattitude, data.longitude),
       map: map,
       title: data.address
   });

    arrMarkers.push(marker);

   var contentString = '<div id="content">'+
       '<div id="siteNotice">'+
       '</div>'+
       '<h2 id="firstHeading" class="firstHeading">'+data.name+'</h2>'+
       '<div id="bodyContent">'+
       '<p>'+data.address+'</p>'+
       '<p></p>'+
       '<p>Do You Want to change search location</p>'+
       '<input name="yes" id="yes" type="button" class="btn-common" value="Yes"/>'+
       '</div>'+
       '</div>';                                                   

    // add an event listener for this marker
    bindInfoWindow(marker, map, infowindow, contentString);   
}

function bindInfoWindow(marker, map, infowindow, html) { 
    google.maps.event.addListener(marker, 'click', function() { 
        infowindow.setContent(html); 
        infowindow.open(map, marker); 
    }); 
}

function clickLink(ID) {
    google.maps.event.trigger(arrMarkers[ID], 'click');
} 
```

您的侧边栏链接 HTML 可能如下所示：

```
<a href="javascript:clickLink(0); return false;">Link 1</a><br>
<a href="javascript:clickLink(1); return false;">Link 2</a><br>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:55:36.423

使用函数闭包的另一个选项（基本上涉及使用 createMarker 函数）是将信息窗口的内容保存在标记的属性中。使用单个信息窗口仍然是最简单的。您没有在您的 pastebin 中提供足够的上下文来为您提供一个可以做到这一点的工作示例。

这是一个使用函数闭包将信息窗口内容与标记相关联的示例，并且具有单个信息窗口（翻译自 Mike Williams 的 v2 教程）。

[http://www.geocodezip.com/v3_MW_example_map3.html](http://www.geocodezip.com/v3_MW_example_map3.html)

[Mike Williams 对函数闭包的描述](http://econym.org.uk/gmap/closure.htm)

这是一个不使用函数闭包的示例（它将信息窗口内容存储在标记对象的属性中）：

[http://www.geocodezip.com/v3_MW_example_map3_noclosure.html](http://www.geocodezip.com/v3_MW_example_map3_noclosure.html)

# marklogic - Marklogic：分数计算

> ID：12953333
> 
> 赞同：1
> 
> 时间：2012-10-18T11:14:45.170
> 
> 标签：marklogic

我有以下 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
<text>We are a doing nothing here you can say it time pass. what are you doing doing doing doing doing time?</text>
<text>We are a doing nothing here you can say it time pass. what are you doing doing doing doing doing time?</text>
</data> 
```

现在我执行了以下查询：

```
let $hits :=
let $terms :=
let $node := xdmp:document-filter(doc("/content/C/Documents and Settings/vimleshm/Desktop/abc.xml"))
return 
(cts:distinctive-terms($node,
<options xmlns="cts:distinctive-terms"
xmlns:db="http://marklogic.com/xdmp/database">
<use-db-config>false</use-db-config>
<score>logtf</score>
<max-terms>100</max-terms>
<db:word-searches>true</db:word-searches>
<db:stemmed-searches>off</db:stemmed-searches>
<db:fast-phrase-searches>false</db:fast-phrase-searches>
<db:fast-element-word-searches>false</db:fast-element-word-searches>
<db:fast-element-phrase-searches>false</db:fast-element-phrase-searches>
</options>)//cts:term)
for $wq in $terms
where $wq/cts:word-query
return element word {
attribute score {                               $wq/@score},
$wq/cts:word-query/cts:text/string() }
return 

let $x:=
for $hit in $hits

return $hit
return $x 
```

它给了我以下回应：

```
<?xml version="1.0" encoding="UTF-8"?>
<results warning="more than one root item">
  <word score="36864">doing</word>
  <word score="26624">text</word>
  <word score="26624">you</word>
  <word score="26624">time</word>
  <word score="26624">are</word>
  <word score="22528">a</word>
  <word score="22528">we</word>
  <word score="22528">it</word>
  <word score="22528">data</word>
  <word score="22528">can</word>
  <word score="22528">pass</word>
  <word score="22528">here</word>
  <word score="22528">nothing</word>
  <word score="22528">what</word>
  <word score="22528">say</word>
</results> 
```

有人能告诉我这个分数 [log(term frequency)] 是如何计算的吗？上述案例中的示例在总共 42 个单词中使用了 12 次“doing”。

以下是上述文件的总条款和频率[括号内]

```
doing [12]
you [4]
time [4]
are [4]
a [2]
We [2]
nothing [2]
here [2]
can  [2]
say [2]
it [2]
pass [2]
what [2] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:56:33.643

[http://docs.marklogic.com/guide/search-dev/relevance#chapter](http://docs.marklogic.com/guide/search-dev/relevance#chapter)无疑是最好的起点。这里还有比 logTF 更多的事情。还有：

*   IDF - 这些词在数据库中有多常见？
*   文档长度标准化 - 较长的文档往往比较短的文档有更多的词，因此分数会根据文档长度进行缩放
*   而 logTF 实际上是阶梯式 TF 函数的自然对数（为了速度）

所有这些因素共同作用，使得分准确而快速。

# facebook - 喜欢按钮不显示面孔

> ID：12953337
> 
> 赞同：0
> 
> 时间：2012-10-18T11:14:53.853
> 
> 标签：facebook, facebook-graph-api, facebook-like

我有一个带有特定网址的类似按钮。问题是它不显示面孔。这是代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=225460250806615";
  fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.nu.nl/binnenland/2936758/verfbommen-huis-minister-leers.html" data-send="false" data-width="450" data-show-faces="true"></div>
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:32:38.610

如果您的朋友列表中没有人喜欢该网址（data-href），您将看不到任何面孔。

# php - 不记录错误，但记录调试消息

> ID：12953339
> 
> 赞同：0
> 
> 时间：2012-10-18T11:15:08.633
> 
> 标签：php, codeigniter

我正在使用**codeignitor v.3.0-dev**。

在我`application\config\config.php`的以下行

```
`$config['log_threshold'] = 1;` errors are not logging even if I place some wrong syntax's errors... 
```

如果我尝试

`$config['log_threshold'] = 2 or 3 or 4` 消息被记录....

有人可以告诉我为什么会发生这种情况......

提前致谢...

# c++ - 向量向量到一维数组

> ID：12953340
> 
> 赞同：5
> 
> 时间：2012-10-18T11:15:09.097
> 
> 标签：c++, stl, std, stdvector

我想知道是否有一种巧妙的方法可以将向量中的信息呈现为一维数组。示例：让我们创建一个由 5x3 int 元素组成的向量

```
vector< vector<int>> iVector;
ivector.resize( 5 );
for(i = 0; i < 5; i++){
    iVector[i].resize(3);
} 
```

但现在我希望将此结构转换为一维数组：

```
int* myArray = new int[5*3]; 
```

所以我可以访问我想要的每个元素，如下所示：

```
for (i =0;i < 5; i++)
  for(j =0; j< 3; j++)
      myArray[i*3+j] = ... 
```

我知道我可以将向量逐个元素复制到数组中，但我想知道是否有一种方法可以直接解决向量到数组的转换。我也知道向量可以被称为`iVector[i][j]`，但不幸的是它需要是一个数组，因为它将被发送到 GPU 并且 GPU 不理解向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:32:52.023

只需使用`std::copy`5 次。

```
int* ptrArray = myArray;
for (i =0;i < 5; i++) {
  std::copy(iVector[i].begin(), iVector[i].end(), ptrArray);
  ptrArray += iVector[i].size();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:35:24.973

除了将其复制到数组中之外，您实际上无能为力。GPU 无法理解您创建的任何抽象，它无法理解`std::vector`。您所能做的就是制作一个数组并将其复制过来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:31:54.730

向量应该以线性方式存储元素，所以理论上你可以引用整个底层向量（只有一个向量）：

```
std::vector<int> numbers;
int data[4] = &(numbers[0]); 
```

同样，也许您可​​以对 2D 版本尝试相同的方法。但是，在您的位置，我会考虑使用专门设计用于处理矩阵的类（很容易编写类似于 std::vector() 的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-31T20:01:17.127

或者您可以使用普通的旧 C。

您首先将数组大小初始化为行数 * 您的向量向量具有的列数。然后使用 memcpy 将每个向量复制到数组中。

```
vector<vector<int> > v = { {1,2},{3,4},{5,6} }; //v is 3 by 2 matrix 
int *arr = (int*)malloc( (3*2) * sizeof(int)); // arr has size 3*2 = 6
for (int i = 0; i < 3; i++)
    memcpy(arr + v[i].size() * i, &(v[i][0]), v[i].size() * sizeof(int)); 
```

这是我为您编写的一个函数：

```
template<typename T>
T *vectorToArray(vector<vector<T> > const &v) {
    T *rv = (T*)malloc((v.size()*v[0].size()) * sizeof(T)); //Assuming all rows have the same size
    for (unsigned i = 0; i < v.size(); i++)
        memcpy(rv + v[i].size() * i, &(v[i][0]), v[i].size() * sizeof(T));
    return rv;
} 
```

所以现在你可以做这样的事情：

```
vector<vector<int> > v = { {1,2},{3,4},{5,6} }; //v is 3 by 2 matrix 
int *arr = vectorToArray(v); 
```

我希望这有帮助

# wpf - 为什么这个 Binding 即使从源代码中获取价值也不能正常工作？

> ID：12953345
> 
> 赞同：0
> 
> 时间：2012-10-18T11:15:23.610
> 
> 标签：wpf, binding, dependency-properties, stackpanel, gridviewcolumn

我有这个自己的课程：

```
public class PeriodContainerPanel:StackPanel
{
    public PeriodContainerPanel()
        : base()
    {
        addCollectionsToStackPanel();
    }

    private void addCollectionsToStackPanel()
    {
        this.Children.Clear();

        if (PeriodsList!=null)
        {
            double minutes = PeriodsList.Count * (Properties.Settings.Default.EndTimeSpan - Properties.Settings.Default.StartTimeSpan).TotalMinutes;
            foreach (ObservableCollection<PeriodBase> lst in PeriodsList)
            {
                this.Children.Add(new ChartUserControl(lst) { Minutes = minutes });
            }
        }
    }

    public List<ObservableCollection<PeriodBase>> PeriodsList
    {
        get { return (List<ObservableCollection<PeriodBase>>)GetValue(PeriodsListProperty); } //do NOT modify anything in here
        set { SetValue(PeriodsListProperty, value); addCollectionsToStackPanel(); } //...or here
    }

    public static readonly DependencyProperty PeriodsListProperty =
        DependencyProperty.Register(
        "PeriodsList",  //Must be the same name as the property created above
        typeof(List<ObservableCollection<PeriodBase>>), //Must be the same type as the property created above
        typeof(PeriodContainerPanel), //Must be the same as the owner class
        new UIPropertyMetadata(
            null  //default value, must be of the same type as the property
            ));
} 
```

我像这样使用`DependencyProperty` `PeriodList`它`UserControl`：

```
<GridViewColumn>
   <GridViewColumn.CellTemplate>
   <DataTemplate>
      <UI:PeriodContainerPanel PeriodsList="{Binding RelativeSource={RelativeSource  Mode=TemplatedParent}, Path=DataContext}" />
   </DataTemplate>
   </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

我检查`Convertor`是否有任何获取过程（如果有价值）是的有价值并且它是正确的，但它没有设置为`PeriodsList`属性。什么是问题？PS如果对代码有任何疑问，请告诉我，我可以添加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:23:36.750

正如@MrDosu 建议的那样，在 DependencyProperty 上使用 PropertyChangedCallback。Callback 是静态的问题并不是什么大问题，因为您将在调用中获得对 DependencyObject 的引用：

```
private static void ValueChangedCallBack(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
  ((MyCustomControl)d).RaiseMyValueChanged(); //Where RaiseMyValueChanged is a private non-static method.
} 
```

此外，您对 TemplatedParent 和 Path=DataContext 的使用似乎很奇怪。路径应该是指一个属性。TemplatedParent 用于定义样式和/或控件模板时，您的 XAML 片段不是资源中的控件模板，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:52:18.923

`addCollectionsToStackPanel()`绑定发生时不会被调用。绑定引擎`SetValue`直接使用，这就是为什么你不应该在属性中做这样的逻辑。（这就是为什么它在自动生成的评论中说“不要修改任何东西”）

`PropertyChangedCallback`在这种情况下使用 a ：http: [//msdn.microsoft.com/en-us/library/ms745795.aspx](http://msdn.microsoft.com/en-us/library/ms745795.aspx)

# ruby-on-rails - 为什么 application.rb 中的公共方法不能通过 helper:all 对所有视图和控制器可用？

> ID：12953346
> 
> 赞同：0
> 
> 时间：2012-10-18T11:15:35.180
> 
> 标签：ruby-on-rails

我认为`helper:all`以下内容`application.rb`可`current_user`用于每个控制器和视图？

```
class ApplicationController < ActionController::Base

  helper :all
  protect_from_forgery
  before_filter { |c| Authorization.current_user = c.current_user }

  def current_user_session
    return @current_user_session if defined?(@current_user_session)
    @current_user_session = UserSession.find
  end

  def current_user
    return @current_user if defined?(@current_user)
    @current_user = current_user_session && current_user_session.record
  end

  ...

  private

  ...

  protected

  ...

end 
```

我的观点调用这样的`current_user`方法：

```
- if current_user
  = link_to "Logout", logout_path 
```

为此，我得到了以下回复：

```
undefined local variable or method `current_user' for #<#<Class:0x007f971d812a48>:0x007f972050c378> 
```

我错过了什么？

非常感谢，

史蒂文。

PS我已经在与失败的视图相关的控制器中对此进行了实验：

```
before_filter :current_user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:18:44.863

[从文档：](http://apidock.com/rails/ActionController/Helpers/ClassMethods/helper)

> 当参数是符号 :all 时，控制器将包含 ActionController::Base.helpers_dir 下的所有助手（默认为 RAILS_ROOT 下的 app/helpers/*/.rb）。

您正在寻找：

```
helper_method :current_user, :current_user_session 
```

# javascript - 滑块第一个图像固定宽度

> ID：12953348
> 
> 赞同：0
> 
> 时间：2012-10-18T11:15:42.003
> 
> 标签：javascript, html, css, slider

在我的滑块代码主页上，我想修复第一张图像的宽度。是否有可能来自css或html。因为我尝试了但没有工作。我当前的滑块 css 代码如下。

```
#slider {
    background-attachment: scroll;
    background-color: #FFFFFF;
    background-image: url("http://silverharmony.in/wp-content/uploads/2012/10/Slider_bg.png");
    background-position: 50% 0;
    background-repeat: repeat;
    display: block;
    float: left;
    width: 100%;
}

.inner, .wrapper {
    display: block;
    height: 100%;
    margin: 0 auto;
    position: relative;
    width: 960px;
    z-index: 0;
}

ul.kwicks {
    background-color: #333333;
    border-radius: 3px 3px 3px 3px;
    list-style: none outside none;
    margin: 0;
    overflow: hidden;
    padding: 0;
    position: relative;
}

ul.kwicks li {
    background: url("../images/icons/ajax_loader.gif") no-repeat scroll 50% 50% transparent;
    display: block;
    overflow: hidden;
    padding: 0;
}

.kw_img {
    display: block;
}

.kw_img img {
    vertical-align: middle;
}

.kw_shadow {
    background: url("../images/icons/overlay.png") repeat-y scroll 0 0 transparent;
    border-right: 1px solid rgba(255, 255, 255, 0.3);
    height: 100%;
    position: absolute;
    right: 0;
    width: 40px;
    z-index: 2;
}

.last .kw_shadow {
    background: none repeat scroll 0 0 transparent !important;
    border-right: 0 none;
} 
```

我当前的 Slider HTML 代码如下。

```
<div id="slider">
<div class="inner">
    <ul style="width:960px; height:400px; margin:15px 0;" data-width="960" data-max="660" class="kwicks" id="kwicks-1">
        <li class="kwick" style="left: 0px; width: 192px; margin: 0px; position: absolute;">
            <div class="kw_shadow"></div>
            <div class="kw_img">
                <img width="960" height="400" alt="" src="http://silverharmony.in/wp-content/themes/cstardesign/cache/timthumb.php?src=http://silverharmony.in/wp-content/uploads/2012/10/2.jpg&amp;h=400&amp;w=960&amp;zc=1&amp;q=100">
            </div>
        </li>
        <li class="kwick" style="left: 192px; width: 192px; margin: 0px; position: absolute;">
            <div class="kw_shadow"></div>
            <div class="kw_img">
                <img width="960" height="400" alt="" src="http://silverharmony.in/wp-content/themes/cstardesign/cache/timthumb.php?src=http://silverharmony.in/wp-content/uploads/2012/10/Image-2.jpg&amp;h=400&amp;w=960&amp;zc=1&amp;q=100">
            </div>
        </li>
        <li class="kwick" style="left: 384px; width: 192px; margin: 0px; position: absolute;">
        <div class="kw_shadow"></div>
        <div class="kw_img">
                <img width="960" height="400" alt="" src="http://silverharmony.in/wp-content/themes/cstardesign/cache/timthumb.php?src=http://silverharmony.in/wp-content/uploads/2012/10/3.png&amp;h=400&amp;w=960&amp;zc=1&amp;q=100">
            </div>
        </li>
        <li class="kwick" style="left: 576px; width: 192px; margin: 0px; position: absolute;">
        <div class="kw_shadow"></div>
        <div class="kw_img">
                <img width="960" height="400" alt="" src="http://silverharmony.in/wp-content/themes/cstardesign/cache/timthumb.php?src=http://silverharmony.in/wp-content/uploads/2012/10/Image-1.jpg&amp;h=400&amp;w=960&amp;zc=1&amp;q=100">
        </div>
        </li>
        <li class="kwick last" style="right: 0px; width: 192px; margin: 0px; position: absolute;">
        <div class="kw_shadow"></div>
        <div class="kw_img"><img width="960" height="400" alt="" src="http://silverharmony.in/wp-content/themes/cstardesign/cache/timthumb.php?src=http://silverharmony.in/wp-content/uploads/2012/10/1.jpg&amp;h=400&amp;w=960&amp;zc=1&amp;q=100"></div>
        </li>
    </ul>
</div> 
```

​</p>

目前我的滑块看起来像这样。[http://silverharmony.in/](http://silverharmony.in/)

我真的想喜欢下面的链接。

[http://silverharmony.in/wp-content/uploads/2012/10/slider-screenshoot.png](http://silverharmony.in/wp-content/uploads/2012/10/slider-screenshoot.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:20:37.037

Slider 正在使用[Kwicks](http://devsmash.com/projects/kwicks) jQuery 插件。我添加了第一个`li`项目`.kwicks-selected`类来实现你正在寻找的东西。

此处示例[jsFiddle](http://jsfiddle.net/agriboz/dkx4t/3/)

# c - enum 是常量还是 const varibale 或其他任何东西？在以下代码中出现错误

> ID：12953349
> 
> 赞同：0
> 
> 时间：2012-10-18T11:15:43.453
> 
> 标签：c, enums, constants

```
#include<stdio.h>

typedef enum {a,b,c}key;

int main()
{
 key d=3;
 printf("%p\n,&a);
 printf("%p\n",&d);
 printf("%d\t %d\t %d\t %d\n",a,b,c,d);
 return 0;
} 
```

当我尝试获取 a 或 b 或 c 的地址时，编译器会抛出一个错误，该错误是一元 & 所需的左值

我没有得到它，因为它适用于相同类型的 d 。这里发生了什么事 ？是这些常量还是由编译器分配了值 0 1 和 2 的 const 变量。因为我们只为常量得到了这种错误。请帮忙，我是C新手

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:22:10.777

看看[enum](http://msdn.microsoft.com/en-us/library/whbyts4t(v=vs.80).aspx)到底是什么。这是一个价值。请记住，如果您不初始化枚举列表，则第一个枚举列表的值是`0`.

考虑布尔枚举示例：

```
typedef enum /* Declares an enumeration data type called BOOLEAN */
{
    false,     /* false = 0, true = 1 */
    true 
}BOOLEAN ; 
```

所以枚举“false”是0。你不能取0的地址，但是如果你从中做一个“BOOLEAN”：

```
BOOLEAN something = false; 
```

现在有些东西是一个变量，您可以获取它的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:17:21.857

a,b,c 是枚举中常量整数的符号。它们不是具有地址的变量。因此 & 不能在这里使用（这意味着只有右值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:17:53.797

枚举的成员是常量（就像 3、1000 或 'b'），因此只能用作右值。它们在内存中没有任何位置。

But`d`是一个变量，其值是枚举成员之一（尽管不一定）。`d`有一个明确定义的内存位置，可以用作左值（我们可以取它的地址，修改它等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:19:02.433

An`enum`就像一个整数类型，具有一堆命名文字的额外好处。枚举包含一组命名的整数常量值。

来自 C 标准 C99。第 6.7 节语义，第 3 点：

> 对于枚举常量或 typedef 名称，是标识符的（唯一）声明。

所以它只是一个声明。不会分配内存。

# c - 忽略子进程中的 SIGINT 信号

> ID：12953350
> 
> 赞同：14
> 
> 时间：2012-10-18T11:15:48.990
> 
> 标签：c, signals

我正在编写一个简单的程序，其中父进程和子进程交替打印到文件中。我已经设法使用用户定义的信号来做到这一点。现在我想处理`SIGINT`信号。一旦`ctrl-c`收到父母必须向孩子发送终止信号，孩子应该终止，最后父母应该终止。

我的问题是，为了使这项工作正常进行，我必须`SIGINT`仅从父母那里捕获信号并从孩子那里忽略它。这样对吗？如果是的话，有什么提示吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-18T11:22:17.800

称呼：

```
signal(SIGINT, SIG_IGN); 
```

来自子进程，这将使子进程忽略`SIGINT`信号。从[人信号](http://linux.die.net/man/2/signal)：

> 如果处置设置为 SIG_IGN，则忽略该信号。

# java - 想将 2 中的十进制值转换为格式并想知道它在 java 中的 2 的幂

> ID：12953352
> 
> 赞同：1
> 
> 时间：2012-10-18T11:15:57.337
> 
> 标签：java, algorithm, math

我有一个十进制值`65`，我想将此值除以 2 以格式化。

例如，我有这个类型规则：

![在此处输入图像描述](../Images/0519f0b30e5107c2ca5233762ffbe0a2.png)

如果我得到`42`十进制数，我想先除`42 number in format of 2 raised to`。然后，我只想输出它的力量，比如：

```
OutPut : 1,3,5 
```

![在此处输入图像描述](../Images/2a10db76c8b06101fe6a3e16f336abca.png)

例如，如果我有 65 作为十进制数，那么我想`6,0`作为它的输出，因为 (2 提高到 6) + (2 提高到 0) = 65。

谢谢

任何人都可以帮助我如何在 Java 中实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:27:42.730

您可以反复比较最低有效位，边走边算，然后右移数字以依次查看每个位：

```
int n = 65
int d = 0;
while (n > 0) {
    if ((n & 1) == 1) {  // check LSB
        System.out.println(d);
    }
    n >>>= 1;  // shift right
    ++d;       // inc digit count
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:24:30.637

```
Integer.toString(65, 2); 
```

执行以下输出：

```
1000001 
```

然后你在字符串上工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:25:08.227

这可以改进，但我认为它会完成这项工作。

```
int n = 42;
    String binary = Integer.toBinaryString(n);
    for(int i = binary.length() - 1; i >= 0; i--){
        if(binary.charAt(i) == '1')
            System.out.print(i+1);      
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:27:26.757

这是算法：

1.  查找给定数字 x=log(2, input) 的对数底数 2
2.  求结果 y = floor(x), z=ceiling(x) 的下限和上限
3.  找到 2^y, 2^z 并选择更接近输入的那个。
4.  计算 diff = (input - 2^(x or y)) 并递归地对 diff 执行相同的操作，直到 diff=0。

# windows-phone-7 - 如何使用 ScrollViewer 在 Windows Phone 7 中添加大于屏幕尺寸的更多控件

> ID：12953361
> 
> 赞同：0
> 
> 时间：2012-10-18T11:16:26.477
> 
> 标签：windows-phone-7

在我的 Windows Phone 7 应用程序中，我只是尝试在一个页面中添加 10 个控件，但页面中只有 7 个控件可见。我想在该页面中添加高于手机默认屏幕尺寸的剩余控件。

当我用谷歌搜索时，我发现 ScrollViewer 控件用于滚动页面。因此，我在网格上方添加了 ScrollViewer，并将其垂直滚动条可见性设置为 true，但由于无法查看控件，因此没有任何变化。

如何使用 ScrollViewer 编写 XAML 以显示我的所有控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:44:11.200

ScrollViewer 下只能有一个子元素，但它可以是任何类型的元素或元素容器，例如 Grid。

只需将所有元素添加到该容器中，然后您就可以滚动所有项目。

例如，您可以使用 StackPanel 因为它只会将所有项目包装在每个项目下

```
<ScrollViewer>
    <StackPanel>
        <!-- All your controls -->
    </StackPanel>
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T19:52:09.640

这是有效的

```
 <ScrollViewer>
    <StackPanel>
        <!-- All your controls -->
    </StackPanel>
</ScrollViewer> 
```

bt 在堆栈面板中，它就像堆栈一样，我们无法随意移动控件。为了摆脱它，我们可以使用网格。

```
<ScrollViewer>
    <Grid>
        <!-- All your controls -->
    </Grid>
</ScrollViewer> 
```

# php - 选择用户或用户发送的消息

> ID：12953363
> 
> 赞同：1
> 
> 时间：2012-10-18T11:16:41.780
> 
> 标签：php, mysql, facebook, select, messages

这应该很简单，但是我坚持下去。

当我做查询

```
SELECT * FROM `inbox` where toid=4 or fromid=4 order by time desc 
```

，我得到：

```
id  toid    fromid  message           time
23  48101   4   hello call me     12/23/2011 12:27
6   34584   4   hi there      12/22/2011 15:42
5   34584   4   how are you   12/22/2011 14:08
4   34584   4   say hello     12/22/2011 14:07
3   34584   4   whats up      12/22/2011 14:07
2   4   34584   nice picture      11/24/2010 0:00
1   4   2   this is very interesting!   12/23/2008 0:00 
```

现在，我需要将用户 4 和其他用户之间的对话分组到最后一条消息的一行（就像 facebook 消息一样）。

有人知道最好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:21:39.237

[SQL小提琴](http://www.sqlfiddle.com/#!2/22b89/4)

```
select i.id, toid, fromid, message, `time`
from
    inbox i
    inner join (
        select max(id) as id
        from inbox
        where toid = 4 or fromid = 4
        group by greatest(toid, fromid), least(toid, fromid)
    ) s on i.id = s.id 
```

# java - 页面未加载到所需的框架中

> ID：12953365
> 
> 赞同：0
> 
> 时间：2012-10-18T11:16:54.057
> 
> 标签：java, html, struts, frame

我有一个框架集，我在其中加载一些页面，例如

```
Top ->   Header
Left ->  Menu
Right -> Data 
```

但是当我尝试单击菜单时，实际页面必须加载到右侧框架中并且它没有发生，而是加载到左侧框架中并且菜单移动到右侧。

我已经给出了 target="rightSideFrame" 但它仍然没有得到。

我在java代码中为菜单创建链接，我使用struts1.2.9框架

以下是我的代码片段：

HTML：

```
<frameset border="0" frameborder="0" framespacing="0" rows="64,*">
                    <frame border="0" frameborder="0" framespacing="0" id="topFrame" name="topFrame" src="<%=resourcePath%>/common/header.jsp" marginheight="0" marginwidth="0" noresize="noresize" scrolling="no">
                    <frameset border="0" frameborder="0" framespacing="0" id="MainFrameSet" cols="209,*">
                            <frame noresize="noresize" border="0" frameborder="0" framespacing="0" id="leftFrame" name="leftFrame" src="<%=resourcePath%>/common/left_menu.jsp" scrolling="auto">
                            <frame border="0" frameborder="0" framespacing="0" id="workFrame" name="workFrame" src="<%=resourcePath%>/common/WelcomePage.jsp" marginheight="7" marginwidth="7" noresize="noresize" scrolling="auto">
                    </frameset>
            </frameset> 
```

和菜单链接：

```
<a href=\"#\" target=\"workFrame\" onclick=\"getMenuRequest('"+model.getResource_name()+"','goToHome')\">"+model.getMenu_name()+"</a> 
```

更新 ：

和`getmenuRequest`

```
function getMenuRequest(actionName,methodName){
                       document.forms[0].action=actionName+".htm";
                       document.forms[0].method.value=methodName;
                       document.forms[0].submit();
                   } 
```

请帮我解决这个问题，

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:30:38.907

问题是`target`您的链接属性在 javascript 提交表单时被忽略，您必须修改您的`getMenuRequest`方法来设置`form`目标：

```
function getMenuRequest(actionName,methodName){
    document.forms[0].action=actionName+".htm";
    document.forms[0].method.value=methodName;
    document.forms[0].target='workFrame';
    document.forms[0].submit();
} 
```

但是有一个警告，如果您稍后在其他请求中提交表单，它仍然会有一个目标`workFrame`，然后可能会针对错误的框架......

注意我没试过这个......

# powershell - 将两次或多次调用 Get-ChildItem 的结果加入一个数组的最简洁方法是什么？

> ID：12953366
> 
> 赞同：2
> 
> 时间：2012-10-18T11:16:54.137
> 
> 标签：powershell, powershell-2.0

我面临着使用 PowerShell 在文件系统上移动和复制某些项目的问题。

我通过实验知道，即使使用 PowerShell v3， cmdlet`Copy-Item`也`Move-Item`无法`Delete-Item` **正确处理**像联结和符号链接这样的重解析点，并且如果与 switch 一起使用可能会导致灾难`-Recurse`。

我想阻止这种情况。每次运行我必须处理两个或更多文件夹，所以我在想这样的事情。

```
$Strings = @{ ... }
$ori = Get-ChildItem $OriginPath -Recurse
$dri = Get-ChildItem $DestinationPath -Recurse

$items = ($ori + $dri) | where { $_.Attributes -match 'ReparsePoint' }
if ($items.Length -gt 0)
{
    Write-Verbose ($Strings.LogExistingReparsePoint -f $items.Length)
    $items | foreach { Write-Verbose "    $($_.FullName)" }
    throw ($Strings.ErrorExistingReparsePoint -f $items.Length)
} 
```

这不起作用，因为`$ori`并且`$dri`也可以是单个项目而不是数组：`op-Addition`将会失败。更改为

```
$items = @(@($ori) + @($dri)) | where { $_.Attributes -match 'ReparsePoint' } 
```

提出了另一个问题，因为`$ori`and`$dri`也可以是`$null`并且我可以以包含`$null`. 再次将连接结果通过管道传输到`Where-Object`时，我可以以`$null`、单个项目或数组结尾。

唯一明显有效的解决方案是以下更复杂的代码

```
$items = $()
if ($ori -ne $null) { $items += @($ori) }
if ($dri -ne $null) { $items += @($dri) }
$items = $items | where { $_.Attributes -match 'ReparsePoint' }

if ($items -ne $null)
{
    Write-Verbose ($Strings.LogExistingReparsePoint -f @($items).Length)
    $items | foreach { Write-Verbose "    $($_.FullName)" }
    throw ($Strings.ErrorExistingReparsePoint -f @($items).Length)
} 
```

有更好的方法吗？

我很确定是否有办法以正确的方式使用 PowerShell cmdlet 处理重解析点，但**我更想知道如何加入和过滤两个或多个“PowerShell 集合”**。

我总结观察到，目前，PowerShell 的这个特性，“多态数组”，对我来说似乎没有这么大的好处。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:00:45.790

只需添加一个过滤器即可丢弃空值。你在正确的轨道上。

`$items = @(@($ori) + @($dri)) | ? { $_ -ne $null }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:29:54.653

我在 Powershell 3 上已经有一段时间了，但据我所知，这也应该在 2.0 中工作：

```
$items = @($ori, $dri) | %{ $_ } | ? { $_.Attributes -match 'ReparsePoint' } 
```

基本上`%{ $_ }`是一个 foreach 循环，它通过迭代内部数组并将每个内部元素 ( `$_`) 传递到管道中来展开内部数组。Null 将自动从管道中排除。

# xss - 防止对托管 CMS 的 XSS/JS 攻击

> ID：12953367
> 
> 赞同：0
> 
> 时间：2012-10-18T11:17:00.253
> 
> 标签：xss, csrf, google-caja, hosted-app

我正在开发托管 CMS，并且正在考虑允许站点编辑器添加自定义 javascript 和 html（一个非常需要的功能）。

我担心这会打开一个攻击媒介——讨厌的 js 可能会调用我们托管的 CMS 公开的功能（有关用户脚本对 myspace 所做的示例，请参阅[Samy 蠕虫](http://en.wikipedia.org/wiki/Samy_%28computer_worm%29)），但我真的想给用户控制权在他们的网站上（你不能添加自己的聪明东西的 CMS 有什么意义？）

解决此问题的好方法是什么？我能想到几个我想评论的，但我不打算列出它们，因为害怕“没有列出问题的模组”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:34:26.553

我怀疑[Caja](https://developers.google.com/caja/)在你的名单上，所以我会提到这正好在 Caja 的用例中；例如，[Google Sites](https://sites.google.com/)非常像 CMS，使用 Caja 嵌入任意 JS 和 HTML。

Caja 主机页面可以提供任意附加接口供沙盒内容使用，例如，可以包括将 CMS 提供的小部件嵌入到用户提供的 HTML 中，同时保持封装。

（披露：我在 Caja 团队为 Google 工作。）

# ruby-on-rails-3 - Rails 3：检测是否在服务器端禁用了 cookie

> ID：12953368
> 
> 赞同：1
> 
> 时间：2012-10-18T11:17:01.560
> 
> 标签：ruby-on-rails-3, cookies

最好的方法是什么（如果可能的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:18:09.823

看看这篇文章[http://clearcove.ca/2009/09/rails-cookie-detection/](http://clearcove.ca/2009/09/rails-cookie-detection/)。
我认为它涵盖了所有内容，并且它也有一些源代码。

# java - 在无状态 EJB 计时器中正确使用实例变量

> ID：12953371
> 
> 赞同：3
> 
> 时间：2012-10-18T11:17:18.113
> 
> 标签：java, timer, java-ee-6, ejb-3.1, stateless-session-bean

我知道在无状态会话 bean 中使用实例变量是一个流行的讨论主题，并且已经阅读了其中的一些，但我从这个主题中特别需要的是我的应用程序的实际正确设计。

我的企业应用程序由几个无状态 bean 组成，它们触发特定事件。在此类事件中，我希望同时触发几个计时器并跟踪某些事情（例如，插入数据库中的新数据，特定于原始事件）。

```
@Stateless
public class SpecificFeedbackImpl implements SpecificFeedback {

    @Resource
    protected TimerService timerService;

    //more injections here

    public String name;
    public String ip;

    @Timeout
    public void timeoutHandler(Timer timer) {
         if (timer.getInfo().toString().startsWith(name)) {

         //search db for data of event with identifier "name"
         //if anything found, then send to "ip"

         }  
    }

    public void stopTimer() {
        for (Object o : this.timerService.getTimers())
            if (((Timer) o).getInfo().toString().startsWith(name)){
                ((Timer)o).cancel();
            }       
    }

    @Override
    public void startTimer(long interval, String eventID, String serverIP){
        this.name = eventID;
        this.ip = serverIP;
        stopTimer();        
        TimerConfig config = new TimerConfig();
        config.setInfo(name);
        config.setPersistent(false);
        timerService.createIntervalTimer(interval, interval, config);
    }

} 
```

但是，当我对手动调用多个计时器进行小测试时，使用不同的间隔、eventID 和 serverIP，我没有得到所有计时器的预期行为（其中一些从未超时，等等）。

上述来源是否适合所需的用途，或者我应该以不同的方式设计/实施它？如果是，您能否建议一些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:55:34.910

我认为您不应该将状态存储在无状态 bean 中。替代方法是将其存储在 db/em 中或将其存储在单例 bean 中。

编辑如下：

在数据库中存储的一种方法是使用 JPA：[http ://www.vogella.com/articles/JavaPersistenceAPI/article.html](http://www.vogella.com/articles/JavaPersistenceAPI/article.html)

关于为什么在你的 ejb 中存储状态是一个坏主意的解释：
改变你的超时方法是这样的：

```
@Timeout
public void timeoutHandler(Timer timer) {
    String actualName = timer.getInfo().toString();
    System.out.println("actualName=" + actualName + " storedName=" + name);
} 
```

并尝试启动几个计时器：

```
@Singleton
@Startup
public class SingletonBean {

    @EJB
    LabBean labBean;

    @PostConstruct
    public void init() {
        labBean.startTimer(2000, "123", "1.2.3.4");
        labBean.startTimer(2000, "222", "1.2.3.4");
        labBean.startTimer(2000, "333", "1.2.3.4");
        labBean.startTimer(2000, "444", "1.2.3.4");
        labBean.startTimer(2000, "555", "1.2.3.4");
        labBean.startTimer(2000, "666", "1.2.3.4");
    }
} 
```

您将看到控制台输出显示如下内容：

```
INFO: actualName=123 storedName=666
INFO: actualName=555 storedName=666
INFO: actualName=333 storedName=null
INFO: actualName=444 storedName=null
INFO: actualName=666 storedName=666
INFO: actualName=222 storedName=null 
```

原因是当您调用 startTimer() 时，会从 EJB 池中获取无状态 EJB 实例。当 startTimer() 方法返回时，EJB 将返回到池中。

当超时发生 2000 毫秒后，它可能是从池中获取的不同 EJB 实例来处理 @timeout 注释方法的方法调用。

# sql - 如何将此 sql 代码转换为 Codigniter ActiveRecord

> ID：12953376
> 
> 赞同：-2
> 
> 时间：2012-10-18T11:17:29.450
> 
> 标签：sql, codeigniter, activerecord

我在 PRVO 表中有一行，有四种类型的值：第一、第二、第三、第四

我想计算第一次出现的次数，第二次出现的次数，第三次的出现次数和第四次的出现次数，并像这样回应它：

```
First = 4
Second = 5
..... 
```

我有以下代码：

```
$anketadb->select('prvo');
$anketadb->from('anketadata');
$anketadb->group_by('prvo'); 
```

如何添加计数以获得我上面写的结果？提前致谢

更新：

现在我有情况：模型：

```
$anketadb = $this->load->database('anketa',TRUE);

    $anketadb->select('prvo');
    $anketadb->from('anketadata');
    $anketadb->group_by('prvo');
$result =   $anketadb->get();

$result =   $result->result_array();

$count  =   array('povremeno' => 0, 'nikad' => 0, 'svakibroj' => 0, 'prodajemkupujem' => 0);

foreach($result as $row){
    switch($row){
        case 'povremeno' :  $count['povremeno']++; break;
        case 'nikad' : $count['nikad']++; break;
        case 'svakibroj' :  $count['svakibroj']++; break;
        case 'prodajemkupujem' : $count['prodajemkupujem']++; break;
    }
}
return $count; 
```

控制器：

```
$this->load->model('anketerezultati_model');
    $data['count'] = $this->anketerezultati_model->prvo();
    $this->load->view('ankete/rezultatiankete', $data); 
```

看法：

```
echo "povremeno".$count['povremeno'];
echo "nikad".$count['nikad']; 
```

结果都是 0 ......我找不到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:30:25.547

希望你需要这个：

```
$this->db->select('*');
$this->db->from('anketadata');
$this->db->group_by('prvo');
$result =   $this->db->get();

//Result set
$result =   $result->result_array(); 
```

**更新**

```
$count  =   array('first' => 0, 'second' => 0, 'third' => 0, 'fourth' => 0);

foreach($result as $row){

    switch($row['<fieldName>']){

        case 'first' :  $count['first']++; break;
        case 'second' : $count['second']++; break;
        case 'third' :  $count['third']++; break;
        case 'fourth' : $count['fourth']++; break;
    }
} 
```

`$count`最后，您在数组中出现了 first.second....。要使用`$count['first']`第二次 出现的次数`$count['second ']`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:34:15.773

编辑

```
$this->db->select('prvo');
$this->db->from('anketadata');
$this->db->group_by('prvo');
$query = $this->db->count_all_results();

return $query; 
```

# c# - 异步编程中的悬空等待和可能的内存泄漏

> ID：12953377
> 
> 赞同：11
> 
> 时间：2012-10-18T11:17:33.543
> 
> 标签：c#, asynchronous, error-handling, .net-4.5, async-ctp

***.NET 4.5 和 Async CTP 4.0 中包含await***的流程可能由于各种原因而卡住，例如远程客户端没有响应。当然，WaitForAny，当我们也等待一些超时任务时，显然是恢复高层流的一个解决方案。尽管如此，这并不能解决所有可能的问题。

我有以下问题：

1.  永远不会返回的***等待***上下文会发生什么？我知道这会造成内存泄漏。我对吗？

2.  如何在调试器中或使用相应的 API 检查应用程序中存在多少悬空的“*等待者”？*

3.  是否可以在全球范围内枚举它们？

4.  如果 3\. 正确，是否可以强制取消这些***await** *s 的任务（即清理）？

注意：在问题 4 中，我没有询问在显式任务创建期间要使用的取消项目。我的意思是间接创建任务的情况：

```
async Task<bool> SomeTask()
{
   await Something();
   ...
   return true;
} 
```

这个问题的动机：

1.  试图避免内存泄漏
2.  试图在涉及取消令牌的情况下使代码复杂化
3.  在许多情况下，每个低级任务的超时时间是事先不知道的，但高级流程可以使用刚刚恢复的方法：“我们被卡住了？没关系，只需清理并让我们重新开始”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T13:55:39.800

> 1 永远不会返回的等待上下文会发生什么？

我相信它会导致内存泄漏（如果您正在`await`执行 I/O 操作）。最好[总是完成你`Task`的 s](http://blogs.msdn.com/b/pfxteam/archive/2011/10/02/10218999.aspx)（这意味着总是让你的`async`方法迟早返回）。

**svick 评论的更新：**在某些[情况下](http://blogs.msdn.com/b/pfxteam/archive/2011/10/02/10219048.aspx)，这*不会*导致内存泄漏。

> 2 如何在调试器中或使用相应的 API 检查应用程序中有多少悬空的“等待者”？

我不确定是否有一种简单的方法可以做到这一点。我相信*应该*可以编写一个调试器插件，使用 SoS 来查找与编译器生成的异步状态机模式匹配的现有堆对象。

但这是*很多*工作却收效甚微。

> 3 是否可以在全球范围内枚举它们？

不是使用普通的 API。

> 如果 3 是正确的，是否可以强制取消这些等待的任务（即清理）？

即使您可以在运行时枚举它们（例如，通过分析 API），您也不能“强制”取消任务。取消是合作的。

* * *

处理此问题的正确方法是使用标准取消。基于[任务的异步模式文档](http://www.microsoft.com/en-us/download/details.aspx?id=19957)指定了可取消`async`方法的指南。

在最低级别：`async`BCL 中的许多 API 采用可选的`CancellationToken`.

中级：通常让一个`async`方法接受一个可选项`CancellationToken`，然后将其传递给其他`async`方法。

在最高级别：很[容易创建](http://msdn.microsoft.com/en-us/library/hh139115.aspx)一个`CancellationToken`在给定时间后触发的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:07:52.587

关于问题 2 和 3，我没有真正的答案。

1.  只要在应用程序终止时CLR处理任务时正确处理任务中使用的资源，我对此表示怀疑。

拥有永远不会返回的任务几乎不是一件好事。为了避免这种情况并回答第 4 点：可以取消任务。

您需要创建一个传递给任务的取消令牌。该任务自己负责监视该取消令牌的状态并在取消时抛出异常。（也可以使用同一个令牌一次取消多个任务。）

[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/dd537607.aspx)向您展示了这样做。

# c# - 将颜色值从 c# 传递到 aspx 样式类

> ID：12953381
> 
> 赞同：1
> 
> 时间：2012-10-18T11:17:43.453
> 
> 标签：c#, asp.net, css

净 c# 项目。我需要将 c# 代码中的颜色值传递给 asp.net 样式类。我的课是

```
<style>div.timeline-event {
color: #1A1A1A;
border-color: green;
background-color:#EFD5F6;
display: inline-block;
}</style> 
```

我尝试了以下代码来传递值字符串

```
 MyBackgroundColor = "#EFD5F6"; 
```

在页面加载中，我已在上面声明。

```
 div.timeline-event {
color: #1A1A1A;
border-color: green;
background-color:'<%=MyBackgroundColor %>';
display: inline-block;
} 
```

但我无法通过它的课程。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:44:12.573

`background-color: '<%=MyBackgroundColor%>'`将`background-color: '#EFD5F6'`在最终的 html 代码中。将您的代码更改为`background-color: <%=MyBackgroundColor%>`并确保 MyBackgroundColor 是具有公共/受保护访问修饰符的页面的属性。

# arrays - Symfony 2 中从 ArrayCollection 获取随机元素的问题

> ID：12953387
> 
> 赞同：3
> 
> 时间：2012-10-18T11:18:00.783
> 
> 标签：arrays, symfony, doctrine-orm, fixtures

任何人都可以帮助我吗？我在尝试加载 DataFixtures 时遇到此错误：

```
Notice: Undefined index:  in path/DataFixtures/ORM/Fixture.php 
```

这是我的简单代码......我不明白为什么会失败，因为我之前用另一个夹具做过它并且它有效

```
$things = $manager->getRepository('namespaceBundle:Entity')->findByProperty($property->getId());
$thing = $things[array_rand($things)]; 
```

我只是想从 ArrayCollection 中获取一个随机对象`$things`

我需要一些帮助，我被困住了......我确信这是一个愚蠢的错误，但我看不到它！

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T11:28:13.900

最简单的是

```
$thing = $things->get(array_rand($things->toArray())); 
```

# asp.net - 为什么从 ASP.NET 1.1 使用 WCF Web 服务需要 ServiceContract 中的 XmlSerializerFormat 属性

> ID：12953389
> 
> 赞同：0
> 
> 时间：2012-10-18T11:18:02.950
> 
> 标签：asp.net, .net, wcf, web-services, endpoint

我正在*使用来自 APS.NET 1.1 的 WCF Web 服务，*并且我在任何需要阅读的地方阅读

1：将**XmlSerializerFormat 属性**添加到我们要使用的 ServiceContract 中。

2：使用**basicHttpBinding**作为 Endpoint 设置。

**为什么这样？**

> -> 是否可以在配置文件中以某种方式设置 POINT 1 条件？
> 
> -> 当 basicHttpBinding 的默认为 XML 序列化时。为什么我们需要将服务契约显式声明为 XmlSerializerFormat ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:54:06.583

开箱即用，我不认为 WCF 提供了覆盖默认序列化程序（即 DataContractSerializer）的方法。但是，您可以创建自定义服务\操作行为，为自定义操作行为定义配置元素并使用它来覆盖序列化程序。

默认的序列化`BasicHttpBinding`器是 DataContractSerializer，而不是 XmlSerializer。两种序列化程序的工作方式不同（尽管产生 xml 输出）。您可以检查这两个序列化程序的行为之间的差异。

# delphi - 为什么 Delphi XE3 给出“E2382 无法使用实例变量调用构造函数”？

> ID：12953393
> 
> 赞同：4
> 
> 时间：2012-10-18T11:18:13.717
> 
> 标签：delphi, object, constructor

我有一段简单的代码，可以在 Delphi XE2 中编译，但不能在 XE3 中编译，我不知道为什么。我已将有问题的代码减少到一点点，并想知道 Delphi 认为它有什么问题。尝试在 Delphi XE 2 中编译包含该单元的项目工作正常，但在 Delphi XE3（试用版）中，它给出“[dcc32 Error] AffineTransform.pas(26): E2382 Cannot call constructors using instance variables”。我在这里知道的唯一“古怪”的事情是使用老式的“对象”类型，其中构造函数与真实对象（基于 TObject 的类实例）中的构造函数并不完全相同。

如果我将此对象中的“构造函数”替换为“过程”，那么它可以编译，但是为什么会这样，在我的代码中这是一个可以做的改变吗，即它是否对功能？

```
unit AffineTransform;

interface

type
  { Rectangular area. }
  TCoordRect = object
  public
    Left, Top, Right, Bottom: Real;
    constructor CreatePos(ALeft, ATop, ARight, ABottom: Real);
    procedure   Include(AX, AY: Real);
  end;

implementation

constructor TCoordRect.CreatePos(ALeft, ATop, ARight, ABottom: Real);
begin
  Left := ALeft;
  Top := ATop;
  Right := ARight;
  Bottom := ABottom;
end;

procedure TCoordRect.Include(AX, AY: Real);
begin
  CreatePos(AX, AY, AX, AY)
end;

end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T14:08:24.627

对于这种传统的 Turbo Pascal 风格`object`，关键字确实没有任何意义`constructor`。尽管`object`构造函数确实有一些特殊处理，但这里绝对不需要。这里所拥有的不过是`record`一些方法。

XE3 编译器已更改，因此它不再允许您在`Self`实例方法内部调用构造函数。`class`和都是这种情况`object`。我没有看到任何文档说明为什么要进行此更改。毫无疑问，它会及时渗出。

您的直接解决方案是替换`constructor`为`procedure`. `record`从长远来看，把它变成 a而不是a 是有意义的`object`。

* * *

我还建议您将该方法的名称更改为`Initialize`. 一些图书馆设计师似乎选择在他们的记录上使用`Create`和方法。`Free`这导致大量的代码是这样编写的：

```
ctx := TRttiContext.Create;
try
  ....
finally
  ctx.Free;
end; 
```

事实上，所有这些代码都是虚假的，可以简单地删除！`TRttiContext`变量会自动初始化。

这种设计也为喜欢使用的 Delphi 编码人员设置了一个巨大的[Heffalump 陷阱](http://en.wikipedia.org/wiki/Heffalump)`FreeAndNil`。传递记录会`FreeAndNil`导致一些有趣的烟花！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T17:28:08.220

> 我有一段简单的代码，可以在 Delphi XE2 中编译，但不能在 XE3 中编译，我不知道为什么。

您试图在已经实例化和初始化的实例的方法内调用构造函数。编译器不再允许这样做。更具体地说，这段代码：

```
procedure TCoordRect.Include(AX, AY: Real); 
begin 
  CreatePos(AX, AY, AX, AY) 
end; 
```

与此代码相同：

```
procedure TCoordRect.Include(AX, AY: Real); 
begin 
  Self.CreatePos(AX, AY, AX, AY) 
end; 
```

而且你不能再在`Self`变量上调用构造函数了。为什么？IIRC，它与编译器正在向支持移动开发的转变有关。

# html - 在没有 AJAX 的情况下加载页面的一部分

> ID：12953396
> 
> 赞同：0
> 
> 时间：2012-10-18T11:14:22.250
> 
> 标签：html, jquery, ajax, css

我正在开发一个网站，我希望左侧菜单保持固定，同时加载单击选项的内容。

实际上，我所做的是每个使用 AJAX 的菜单链接都会返回请求的内容。一切正常，但我想避免它，因为那时很难跟踪统计数据（以及其他一些东西，比如谷歌靴子）。

没有javascript，我如何做同样的影响/相似（http://www.foundcrelamps.com/）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:29:31.233

我会做的有点不同。我会让菜单上的链接指向内容的有效链接。例如`Contacte`指向`http://www.foundcrelamps.com/contacte`这样，如果您将该链接粘贴到浏览器中，它将直接加载页面。

然后保留ajax，这样用户不会在每次点击时重新加载整个页面。

您可以使用[History.js](https://github.com/balupton/History.js/)来保留浏览器历史记录并修改 URL，以便后退/下一步按钮工作，即使使用 ajax。

编辑，如果您使用`a`带有标准的常规元素，`href`它可能如下所示：

```
$('a').click(function(){
    $('YOUR CONTAINER').load($(this).attr('href'));
    return false; // so that it does not load the whole page
}); 
```

然后在服务器上你应该做这样的事情：

```
/* AJAX check  */
$isAjax = false;
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']==='XMLHttpRequest') {
    $isAjax = true;
}

if (!$isAjax) {
    outputHeader();
}

outputMainContent();

if (!$isAjax) {
    outputFooter();
} 
```

这样，当您执行 ajax 时，您将只加载内部内容。如果没有，它将加载整个页面。

还有一种替代方法 - 您可以使用 jQuery 加载整个页面，但只使用 html 的内部部分来替换原始内容。

# c# - 如何从通用处理程序访问会话

> ID：12953397
> 
> 赞同：0
> 
> 时间：2012-10-18T11:18:14.150
> 
> 标签：c#, asp.net

在 ashx 中：我将数据放入实体列表中并将其分配给会话。

```
context.Session["objList"] = myEntityCollection; 
```

我想通过响应获得这个会话；在后面的代码中。它是如何实现的？

```
context.Response.ContentType = ???
.....
context.Response.Write(context.Session["objList"]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:52:17.313

嗨，如果我理解正确的话。要访问 ashx 文件中的会话数据，您需要实现接口[IRequiresSessionState](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WEB.SESSIONSTATE.IREQUIRESSESSIONSTATE%29;k%28IREQUIRESSESSIONSTATE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)

```
public class ExampleHttpHandler : IHttpHandler, IRequiresSessionState
{
    public bool IsReusable
    {
        get
        {
            return false;
        }
    } 

    public void ProcessRequest(HttpContext context)
    {    
        context.Session["test"] = "test";
        context.Response.Write(context.Session["test"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:24:58.090

将对象序列化为 JSON，返回带有响应的序列化字符串并使用`application/json`ContentType

# javascript - jquery没有选择数据选项更改

> ID：12953399
> 
> 赞同：0
> 
> 时间：2012-10-18T11:18:18.970
> 
> 标签：javascript, jquery

我有这样的 div ：

```
<div id="something-1" data-options='{"pause":"YES","delete":"NO", "kill":"NO"}'></div> 
```

我正在做的是一些 ajax 请求并像这样更改数据选项：

```
$('#something-1' + item.id).attr("data-options", '{"pause":"YES","delete":"YES", "kill":"NO"}'); 
```

当我用 firebug 检查时，我可以在 html 中看到更改的数据选项。

然后我有这个“测试”功能，我从 firebug 触发，以查看在 ajax 更新后数据是否发生了变化：

```
(function() {
        window.checkChanges = checkChanges;
        function checkChanges(id) {
        var dataOptions = $("#" + id).data('options');

        for(var index in dataOptions) {
            console.log(index,dataOptions[index]);
        };
        }
    })(); 
```

但是由于某种原因，在 ajax 请求之前和之后的数据选项是相同的。我需要以某种方式将实时功能纳入其中吗？或者别的什么，但我不知道是什么？有什么建议么？

**编辑**

Ajax 请求更改删除到`YES`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:37:10.470

您是否可能混淆了所选 div 的 ID？在您的虚假 ajax 请求中，您在检查中不存在的“某物”之后添加了一个 item.id。然后它工作得很好。

[http://jsfiddle.net/EVyVT/](http://jsfiddle.net/EVyVT/)

charlietfl 指出您可以省略对象周围的引号，但我认为它也适用于引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:26:21.530

删除包裹您尝试设置的对象的引号，`options`以便您将对象而不是字符串传递给`data`

```
$(selector).attr("data-options", {"pause":"YES","delete":"YES", "kill":"NO"}); 
```

演示：http: [//jsfiddle.net/8A3LE/](http://jsfiddle.net/8A3LE/)

仅更改一个值的另一种方法

```
$(selector).data('options').delete='YES' 
```

# asp.net - 使用 CCNET 重启或清除 App Farbic 缓存

> ID：12953405
> 
> 赞同：0
> 
> 时间：2012-10-18T11:18:30.410
> 
> 标签：asp.net, caching, cruisecontrol.net

我正在使用 CCNet 作为 CI 服务器，我希望它在每次构建时重新启动缓存或清除它（App Fabric）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:10:02.967

免责声明：我不熟悉 App Fabric。

我做了一些查找，发现以下有关[使用 Powershell 管理 AppFabric 的 Cache 的](http://msdn.microsoft.com/en-us/library/ff718177%28v=azure.10%29.aspx)信息。

使用那里的信息，您可以使用[Powershell 任务](http://www.cruisecontrolnet.org/projects/ccnet/wiki/PowerShell_Task)来完成您需要的工作。

# templates - Sublime Text 2 FileTemplates 插件不起作用

> ID：12953406
> 
> 赞同：0
> 
> 时间：2012-10-18T11:18:30.237
> 
> 标签：templates, plugins, sublimetext2, sublimetext

我想在 Sublime Text 2 中使用“FileTemplates”插件。我用包控制器安装了它，但是当我使用“从模板创建文件”并选择一些东西时，什么也没有发生！它甚至不创建文件。

我怎样才能让它工作？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T03:12:14.433

您需要找到当前用户的包文件夹。在这里，您将找到 FileTemplates 包的安装位置。在我的 Windows 系统上，它是 %APPDATA%\Roaming\Sublime Text 2\Packages\FileTemplates。您也可以通过选择 Browse Packages... 从 Preferences 菜单访问此文件夹。

在此文件夹内有一个 Templates 文件夹。在此文件夹中，您将找到预装文件模板。您可以通过复制和粘贴现有文件来创建自己的模板，以创建您喜欢的模板。您需要在 FileTemplates 文件夹中创建一个 .file-template 文件。这个文件是一个 xml 文件，它告诉 sublime 在哪里可以找到实际的模板，以及用户可以将哪些参数传递给模板。例如 $name 是提示用户输入的参数，用于命名从模板创建的文件。希望这可以帮助。

# c# - 如果表格单元格有大数据然后它的高度，则建立一个链接

> ID：12953418
> 
> 赞同：-2
> 
> 时间：2012-10-18T11:19:00.060
> 
> 标签：c#, asp.net, html, css

我正在从后面的代码创建表格以显示每周报告。它工作正常。但是现在如果表格单元格中的数据很大，就会出现问题。如果数据较大以适合表格单元格，我想在单元格中创建一个链接，并且 onclick 在弹出窗口中显示单元格的整个数据。或类似的东西。我尝试溢出滚动，但看起来很糟糕。我从中生成表的代码是：-

```
private void TaskTable(TaskSearch search)
{

    _empList = _objDBL.GetEmpList(ddlCategory.SelectedValue);
    Label heading = new Label();
    heading.Text ="Task Report from "+search.FromDate.ToString("dd MMM,yyyy")+" to "+search.ToDate.ToString("dd MMM,yyyy");
    heading.Attributes.Add("class", "weekheading");

    divTaskTable.Controls.Add(heading);
    Session["Lable"] = heading;
    Table table = new Table();
    TableRow row;
    TableCell cell;
    TableHeaderRow headerRow = new TableHeaderRow();
    TableHeaderCell headerCell;
    table.CssClass = "grid-view";

    headerCell = new TableHeaderCell();
    headerCell.Text = "Emp Name";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Monday";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Tuesday";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Wednesday";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Thursday";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Friday";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Saturday";
    headerRow.Cells.Add(headerCell);

    table.Rows.Add(headerRow);
    for (int i = 0; i < _empList.Count; i++)
    {
        int m=1;
        row = new TableRow();
        cell = new TableCell();
        cell.Text = _empList[i].Name;
        row.Cells.Add(cell);
        search.EmpId = _empList[i].Id;
        _taskList = _objDBL.GetSearchedTaskList(search);
        string[] months = System.Globalization.DateTimeFormatInfo.InvariantInfo.DayNames;

        for (int j = 0; m < months.Count() && j<_taskList.Count; m++)
        {
            if (_taskList[j].Date.DayOfWeek.ToString().Equals(months[m]))
            {
                cell = new TableCell();
                cell.Text = _taskList[j++].TodaysTask;
                row.Cells.Add(cell);
            }
            else
            {
                cell = new TableCell();
                cell.Text = "-";
                row.Cells.Add(cell);
            }

        }
        for (; m < 7; m++)
        {
            cell = new TableCell();
            cell.Text = "-";
            row.Cells.Add(cell);
        }
        table.Rows.Add(row);
    }
    divTaskTable.Controls.Add(table);
    Session["Table"] = table;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:27:51.523

这就是我在我们的网站上进行产品描述的方式，文本大于 75 个字符，它会生成一个较短的文本，然后是一个完整的描述链接。我相信您可以将其修改为您的代码。我的站点在 VB.NET 中，此代码用于 gridview 控件，但您了解它的要点。

```
 If descLength >= 75 then
      CType(row.FindControl("shortDesc"), Label).Text = CType(row.FindControl("labelDesc"), Label).Text.Substring(0, 74) & "... <a href='/detailsfp.aspx?prodid=" & productIDM & "'>Full Description</a>"
 End If 
```

# c++ - 在计时器执行过程中使用 c++ KillTimer() 是否安全？

> ID：12953425
> 
> 赞同：3
> 
> 时间：2012-10-18T11:19:15.517
> 
> 标签：c++, winapi, mfc, timer

在执行期间[`KillTimer()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644903.aspx)发送命令时，对工作计时器有何影响？

只是为了确保，工作计时器意味着计时器执行其代码。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:29:13.010

杀死一个计时器与杀死一个线程不同（杀死一个线程是不安全的）。

在 Windows 系统中它是完全安全的。

# entity-framework - 实体框架中的条件映射 - 使用 TPH 进行 OR 操作

> ID：12953428
> 
> 赞同：0
> 
> 时间：2012-10-18T11:19:24.853
> 
> 标签：entity-framework, inheritance, tph

我们有一个类似实体和三个派生实体，`Vehicle`例如和。这个继承层次是用**TPH**实现的。`Car``Motorbike``Bicycle`

 **以下是实体映射条件：

*   `__disc__ = car`车用
*   `__disc__ = motorbike`摩托车
*   `__disc__ = bicycle`自行车

    ***如何***使用以下映射条件`Vehicle`like派生另一个孩子`MotorVehicle`

*   `__disc__ = car OR motorbike`机动车

**当我使用TPT**具有这种结构时，我会在数据库中这样查看：

```
SELECT    Id
FROM      Vehicles
WHERE     (__Disc__ = N'car') OR (__Disc__ = N'motorbike') 
```

我认为 TPH 不需要这种观点。

***请注意，***我不能像这样更改继承：Vehicle<-- MotorVehicle<-- Car. 不要考虑注入汽车作为汽车和其他孩子的父母，因为汽车和摩托车和自行车已经存在。我只想为所有机动车辆分配一些业务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:41:22.710

为什么不能`MotorVehicle`在类层次结构中引入一个级别？你可以。它只是一个抽象类，因此不需要鉴别器值。EF几乎没有注意到课堂！

我尝试了使用和不使用`MotorVehicle`类和数据库结构，并且在两种情况下定义的鉴别器的数量都是相同的。

* * *

**编辑**

这就是我所做的：

```
public abstract class Vehicle
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public abstract class MotorVehicle : Vehicle
{
    public int Hp { get; set; }
}

public class Car : MotorVehicle
{ }

public class MotorBike : MotorVehicle
{ }

public class Bicycle : Vehicle
{ }

internal class NestedInheritanceContext : DbContext
{
    public DbSet<Vehicle> Vehicles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Vehicle>().Property(v => v.Name).IsRequired();
        modelBuilder.Entity<Car>().Map(m => m.Requires("Discriminator")
            .HasValue("car").HasColumnType("char")
            .HasMaxLength(10)
            .IsRequired());
        modelBuilder.Entity<MotorBike>().Map(m => m.Requires("Discriminator")
            .HasValue("motorbike"));
        modelBuilder.Entity<Bicycle>().Map(m => m.Requires("Discriminator")
            .HasValue("bicycle"));
        base.OnModelCreating(modelBuilder);
    }
} 
```**

# vba - 我可以去掉 Office 文档中的“标记为最终”条吗？

> ID：12953429
> 
> 赞同：0
> 
> 时间：2012-10-18T11:19:28.263
> 
> 标签：vba, powerpoint, powerpoint-2010, powerpoint-2007

当用户打开已标记为最终的文档（或在我的情况下为演示文稿）时，窗口顶部会出现一条黄色条，说明该文档已标记为最终并且已禁用编辑。该条还包括一个“仍然编辑”按钮。

我想以编程方式关闭这个地带。那可能吗？

注意：我这样做不是为了防止更改；我知道用户仍然可以删除标记为最终设置。我只想摆脱大黄条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:59:21.620

这就是您需要做的所有事情：

```
oPres.Final = False 
' where oPres is a reference to the 
' presentation you want to change 
```

# architecture - 共享声明 V 消息

> ID：12953430
> 
> 赞同：1
> 
> 时间：2012-10-18T11:19:30.857
> 
> 标签：architecture, distributed-computing

实现并发有两种架构方案：

*   共享状态的多个线程。这需要锁定代码等
*   消息模型。消息被放入队列，然后由单个线程处理。

我的问题是，多线程何时优于消息传递模型？例如，假设您有一个服务器，它可以通过将消息请求置于内部提示上来异步处理它们。如果您使用多线程服务器模型，是否存在任何未引入的瓶颈（例如甚至在 TCP / IP）级别。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:14:03.260

尽管您的问题的答案可能取决于很多因素，但我认为要考虑的一个重要方面是如何充分利用机器中的多个 CPU。正如您在此处所描述的，如果您的机器有多个 CPU，则使用一个线程处理所有消息的消息队列方法并不是最佳的。处理所有消息的一个线程可能会最大限度地使用一个 CPU，而其他线程将未充分使用其他可用的 CPU。共享状态方法可能会更好地利用多个 CPU。

然而，另一种方法是通过让多个线程（最多比 CPU 数量少一到两个）来清空队列并同时处理消息来修改消息队列算法。这使您可以对 CPU 的利用方式进行相当多的控制，尤其是当您可以选择将特定线程绑定到特定 CPU 时。这种高度的控制可能会使消息队列方法的多线程版本优于共享状态。

这个答案是相关的假设源于当今许多机器确实具有多个 CPU 的事实。如果这不适用于您的情况，那么请更详细地描述您的边界条件，以及当您说“表现出色”时，您所说的性能是什么意思。

# c - AMESim 中 malloc/free 二维数组的问题

> ID：12953431
> 
> 赞同：1
> 
> 时间：2012-10-18T11:19:33.943
> 
> 标签：c, multidimensional-array, malloc, free

我正在用 C 语言编写一个名为 AMESim 的仿真软件，我需要帮助来管理二维阵列。

AMESim 的工作原理与 Simulink 或 LabView 等其他仿真软件一样，将一些图标放在称为草图的环境中并将它们链接在一起，模拟真实系统。在图标后面有一个 C 函数，这是我正在编写的部分（嗯，我正在从 Fortran 更新它）。该软件有一个内置的集成器，可以在需要的时间调用各种子模型并及时管理进度，所以我无法直接访问那部分代码。

我在其中一个子模型中遇到问题：不存在此子模型的液压泵模型可以完美运行，而当连接此模型时，模拟会在一定时间后突然停止（经过 1.8... 秒的模拟时间，或者在大约 1970-1980 年来自集成商的电话之后）。

该子模型使用应用于二维表面的雷诺方程对摩擦学进行了一些繁重的计算，该方程在代码中用矩阵表示，其尺寸由用户通过图形界面决定，然后作为参数传递给函数。在这些基础上，我需要用动态数组来实现矩阵，或者更好地用指针数组来实现（我说一个矩阵，但实际上有几个，一些是整数类型，一些是浮点数，还有一个十几个一维数组）。矩阵有维度`(L+Le)*M`，而一些数组有维度`(L+Le)`，而另一些有维度`M`。

遇到问题后，我尝试通过逐步禁用部分代码来缩小可能的错误原因，直到达到下面发布的状态。进行各种测试后，我了解到问题出在矩阵/数组的分配中：在某个时刻，尝试分配其中一个矩阵的行时`malloc`会返回错误（a ）。`NULL`我尝试了函数和调节分配/解除分配的子函数的各种配置，但我遇到了错误。更改编译器时也会发生这种情况（我尝试过使用 Intel 和 MS VisualC 32 位）。

这是代码：

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include "ameutils.h"    //it is a library of AMESim that has various I/O utilities
#include <malloc.h>
#include <string.h>
#include <direct.h>
#include <errno.h>

//various functions prototypes
void allocate_matrix(int ***table, int rows, int columns) ;
void free_matrix(int*** table, int rows);
void allocate_matrixd(double ***table, int rows, int columns) ;
void free_matrixd(double*** table, int rows);

//bla bla check of parameters and so on

//this is my main function
void barreldin27wpprova_( \*bla bla, there are a lot of parameters 
for the calculation that I will skip */ , 
double *rp, //array with real parameters chosen by the user
int *ip, //array with integer parameters
double *c, //array with static double that are saved between calls of the function
int ic[6] //array with static int
) 
{

int loop, i;
double *Xdib=NULL, *Xwib=NULL, *Xddb=NULL, *Xwdb=NULL;
double **MatH=NULL, **MatPdim=NULL, **Matx=NULL, **Maty=NULL, **DummyMat=NULL, **MatZp=NULL;
int **DummyMatInt=NULL, **Matrixt=NULL, **Matrixtn=NULL, **Matrixp=NULL, **Matrixpn=NULL;
double *VectR=NULL, *DummyL=NULL, *DummyM=NULL, *tetar=NULL, *tetag=NULL, *radim=NULL;
//these are all of my arrays

//allocation of dynamic blocks
   allocate_matrix(&DummyMatInt,(L+Le),M);
      //repeat for all int matrices
   allocate_matrixd(&Matx,(L+Le),M);
      //repeat for all double matrices

//the program stops with an error from malloc during one of these allocations

   VectR= malloc((L+Le) * sizeof(double));
   if (VectR == NULL) { 
    amefprintf(stdout,"Error in allocation of VectR\n");   //amefprintf is internal
                            of AMESim, the same as fprintf
    AmeExit(1); //exit function of AMESim
    }
   //repeated for all dynamic arrays, then initialized to 0.e0 with "for" cycles

//a lot of calculation and subfunctions, that are all disabled in this example; function outputs 
  are set to zero

//Deallocation of dynamic blocks
free_matrix(&DummyMatInt, (L+Le));    //repeated for all int matrices
free_matrixd(&Matx, (L+Le));          //repeated for all double matrices
free(VectR); VectR =NULL;             //repeated for all arrays
} 
```

这是分配/解除分配的两个函数，出于篇幅原因，我将只写整数：

```
void allocate_matrix(int ***table, int rows, int columns) 
{
 int i,j;

 *table =  malloc(rows * sizeof **table );
  if (*table == NULL) { 
    amefprintf(stdout,"Error in memory allocation array of pointers\n");
    AmeExit(1);
    }

 for (i = 0; i < rows; i++) {
     (*table)[i] = malloc(columns * sizeof *(*table)[i]);
     if ((*table)[i] == NULL) { 
        amefprintf(stdout,"Error in memory allocation row %d \n",i);
        AmeExit(1);
        }
     for (j=0; j < columns; j++) {
        (*table)[i][j] = 0;
     }
    }

 }   

void free_matrix(int*** table, int rows)
{
int i;
for (i = 0; i < rows; i++)
    {
    free ((*table)[i]);
    (*table)[i] = NULL;
    }
free (*table);
*table = NULL;
return;
} 
```

我写信是为了检查我是否在指针的所有引用/取消引用方面搞砸了，并更好地理解如何控制堆的可用空间。错误的另一种解释（我认为应该作为最后一个资源考虑）是软件集成商中存在一些未知错误，但肯定很难验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:10:49.347

结果发现参数`Le`没有正确初始化（它是在分配数组后初始化的）。

因此，在分配期间它有一个临时值（比如说`20`），分配一个`L+20`内存块空间，而在初始化时它的值是`0`. 当`free`被调用时，它只释放`L+0`内存块，导致程序长时间运行时内存泄漏。

不幸的是，AMESim 的结构有点复杂，尤其是在参数分配方面。此外，Fortran 不太容易出现这种错误（或者它可能只是跳过它们），IMO，所以在从一个到另一个的转换过程中，所有这种混乱都出现了......

感谢阅读/回复的人！

# sql - 寻找 MAX

> ID：12953442
> 
> 赞同：0
> 
> 时间：2012-10-18T11:20:36.717
> 
> 标签：sql, oracle, top-n

> **可能重复：**
> [Oracle SQL - 如何检索列的最高 5 个值](https://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column)

对于对 SQL 一无所知的人，我有一个简单的问题，但由于我很新，虽然我尝试了许多不同的方法，但我似乎永远无法正确地获得语法。我只想显示 MAX 结果的平均酒店。目前它单独显示所有酒店的平均值。这是我可以使用 MAX 功能的东西吗？我正在使用甲骨文

```
SELECT HOTEL.H_NAME "HOTEL NAME", ROUND(AVG (R_PRICE), 1) "AVERAGE ROOM PRICE"
FROM ROOM JOIN HOTEL ON HOTEL.HOTEL_NO = ROOM.HOTEL_NO
WHERE HOTEL.H_NAME = 'Shangra_La'
OR HOTEL.H_NAME = 'Hilton'
OR HOTEL.H_NAME = 'Sheraton'
GROUP BY HOTEL.H_NAME
ORDER BY HOTEL.H_NAME; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:32:08.963

在 Oracle 中，您可以使用`ROWNUM`伪列。

```
SELECT * FROM
(
    SELECT 
        HOTEL.H_NAME "HOTEL NAME", 
        ROUND(AVG (R_PRICE), 1) "AVERAGE ROOM PRICE" 
    FROM
        ROOM 
            JOIN HOTEL ON HOTEL.HOTEL_NO = ROOM.HOTEL_NO 
    WHERE HOTEL.H_NAME IN ('Shangra_La','Hilton','Sheraton')
    GROUP BY HOTEL.H_NAME 
) v
WHERE ROWNUM = 1
ORDER BY "AVERAGE ROOM PRICE" DESC; 
```

# php - Symfony - 根据身份验证角色显示价格

> ID：12953444
> 
> 赞同：1
> 
> 时间：2012-10-18T11:20:45.067
> 
> 标签：php, model-view-controller, symfony, twig

我使用 Security Bundle 在 Symfony 中设置了不同的身份验证角色。

```
* Wholesale
* Detailing
* Public 
```

根据用户登录的身份验证，我想显示产品的不同价格。

在我的产品实体中，我有

```
$protected wholesalePrice;
$protected detailingPrice;
$protected publicPrice; 
```

我可以使用一个视图来获取特定身份验证角色的价格，还是应该创建 3 个不同的视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:31:32.823

我建议创建一个服务和一个树枝扩展来通过您的模板访问它。

这样你只需要做类似的事情：

```
{{ product | priceByRole }} 
```

这将访问处理安全逻辑的“按角色定价”服务。

服务：[http](http://symfony.com/doc/current/book/service_container.html) ://symfony.com/doc/current/book/service_container.html 编写 Twig 扩展：[http ://symfony.com/doc/2.0/cookbook/templating/twig_extension.html](http://symfony.com/doc/2.0/cookbook/templating/twig_extension.html)

树枝扩展示例：

```
<?php

namespace Acme\DemoBundle\Twig;

use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

class PriceByRoleExtension extends \Twig_Extension implements ContainerAwareInterface
{
    protected $container;

    public function setContainer(ContainerInterface $container = null)
    {
        $this->container = $container;
    }

    public function getFilters()
    {
        return array(
            'priceByRole' => new \Twig_Filter_Method($this, 'priceByRoleFilter'),
        );
    }

    public function priceByRoleFilter(Item $entity)
    {
        $service = $this->container->get('my.price.service');

        return $service->getPriceFromEntity($entity);
    }

    public function getName()
    {
        return 'acme_extension';
    }
} 
```

示例服务：

```
<?php

namespace Acme\DemoBundle\Service;

use Symfony\Component\Security\Core\SecurityContextInterface;
use Acme\DemoBundle\Entity\Product;

class PriceService
{
    protected $context;

    public function setSecurityContext(SecurityContextInterface $context = null)
    {
        $this->context = $context;
    }

    public function getPriceFromEntity(Product $product)
    {
        if ($this->context->isGranted('ROLE_A'))
            return $product->getWholesalePrice();

        if ($this->context->isGranted('ROLE_B'))
            return $product->getDetailingPrice();

        if ($this->context->isGranted('ROLE_C'))
            return $product->getPublicPrice();

        throw new \Exception('No valid role for any price.');
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:27:42.330

您可以使用以下方法仅使用一个视图来执行`is_granted()`此操作：

```
{% if is_granted('ROLE_A') %} 
    {{ product.wholesalePrice }}
{% elseif is_granted('ROLE B') %}
    {{ product.detailingPrice }}
{% elseif is_granted('ROLE C') %}
    {{ product.publicPrice }}
{% endif %} 
```

希望能帮助到你。

# java - JVM是否调用匿名类的默认构造函数来创建实例？

> ID：12953446
> 
> 赞同：2
> 
> 时间：2012-10-18T11:20:55.703
> 
> 标签：java

是否`JVM`调用默认值`Constructor`来`Anonymous Class`创建实例。

我的理解可能是愚蠢的。我想，即使`Reflection API`是用来创建实例，至少也会有`Default Constructor`. `Anonymous Class`有`Default Constructor`吗？否则，如何`JVM`或以任何方式创建实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:31:50.423

是的，它确实。您甚至可以通过指定参数来使用其他构造函数：

给定

```
public abstract class A {
   String str;
   public A(String str){
       this.str=str;
   }
   public abstract void doSomething();
} 
```

你可以做

```
...

A a = new A("Hello World") {
   public void doSomething() {
       System.out.println(str);
   }
};
a.doSomething(); 
```

当一个类没有显式构造函数时，它有一个隐式的默认空构造函数。就像调用任何其他构造函数一样，它被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T17:48:17.743

在我看来，与普通类不同，匿名类具有与隐式构造函数相关的不同行为。

当您定义一个普通类时，编译器只能隐式插入一个无参数构造函数。但是使用匿名类，您可以（通过编译器隐式）获取超类拥有的所有构造函数。

假设我们有一个类：

```
class A {
    A(int i) {}
    A(String s) {}
} 
```

如果我们将其子类如下...

```
class B extends A {} 
```

...我们得到一个编译错误，因为编译器试图这样做：

```
class B extends A {
    B() {
        super();        // Error: there's no no-arg superclass constructor!
    }
} 
```

但是当我们创建一个匿名类时，它会隐式创建为超类 (A) 定义的构造函数

```
A a1 = new A(1) {};     // OK. Uses (int) constructor
A a2 = new A("") {};    // OK. Uses (String) constructor
A a3 = new A() {};      // Error. There's no no-arg constructor 
```

好像我们的匿名类有这些构造函数

```
X(int i) {
    super(i);
}

X(String s) {
    super(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:28:53.103

匿名类有一个默认的无参数构造函数，由 JVM 调用一次。由于匿名类没有名称，因此无法为匿名类定义构造函数。如果您的类需要构造函数，则必须改用本地类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:29:09.633

在任何情况下，都会调用构造函数来初始化新创建的对象。匿名类有默认构造函数，它初始化类的字段，如果有的话，并调用超类的构造函数。

# java - Java：强制实现接口以扩展抽象类

> ID：12953452
> 
> 赞同：7
> 
> 时间：2012-10-18T11:21:17.703
> 
> 标签：java, interface, abstract-class

我有几个类实现了接口 MyInterface，我希望它们都扩展抽象类 MyAbstractClass。最好的方法是什么？

有没有比创建另一个扩展 MyAbstractClass 并实现 MyInterface 的抽象类更好的方法？

（我发誓在发布之前我没有发现任何这样的问题）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:47:19.437

最简洁的解决方案是在接口的 JavaDoc 中定义这样的要求。在 JavaDoc 中，它应该声明类似“要使用此接口，您需要从 MyAbstractClass 扩展或提供您自己的实现”。这样，程序员负责实现。请记住，这是一个你试图解决技术性的社会学问题。

另一个“解决方案”是删除接口并使用抽象类。在抽象类中实现接口在这里没有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T11:26:24.027

您可以定义`MyAbstractClass`实现`MyInterface`，然后让所有其他类扩展`MyAbstractClass`：

```
public abstract class MyAbstractClass implements MyInterface {
    ...
}

public class OneOfSeveral extends MyAbstractClass {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:32:25.220

您不能强制所有具体类以任何其他方式扩展 MyAbstractClass，而不是实际更改它们的定义

```
class A implements MyInterface 
```

至

```
class A extends MyAbstractClass 
```

而且当然

```
abstract class MyAbstractClass implements MyInterface 
```

不过，您在编写时不需要另一个抽象类。

**编辑**：关于您在下面的评论：“我想要 MyInterface 的每个实现都扩展 MyAbstractClass 的另一种方式”-您无法明智地强制执行。您可以定义另一个`MyInterface`扩展并调用它的接口，`MyAbstractClassInterface`如果您愿意，但您仍然无法强制现有类扩展实现后一个接口的抽象类，尽管它们当然必须实际实现此接口中定义的方法...

在我看来，您应该删除接口并将其替换为抽象类。

干杯，

# jquery - Javascript onclick触发功能，但让默认行为继续

> ID：12953453
> 
> 赞同：0
> 
> 时间：2012-10-18T11:21:20.813
> 
> 标签：jquery, onclick

这是场景，我有一个带有打开fancybox iframe 窗口的按钮的页面。iframe 内容中包含一个链接，该链接将使用`target="_blank"`. 我想点击触发一个javascript函数来关闭fancybox窗口以及打开新窗口。

使用jquery，我绑定了一个简单的点击函数来调用`parent.$.fancybox.close();`，但这不会将点击返回给浏览器以在新窗口中触发链接。

我不想使用`window.open`它，因为它 99% 的时间都被阻止了，我只需要发生默认行为。

如何在让正常行为发生的同时调用关闭函数 onclick？

编辑

添加代码：

打开fancybox iframe 的页面。

```
<a href="http://something.com" id="OpenIframeLink">open fancybox</a>
<script>
$("#OpenIframeLink").fancybox({
    'padding': '20',
    'width': 450,
    'height': 550,
    'scrolling': 'no',
    'type': 'iframe',
    'href': '/content.asp?url=' + encodeURIComponent($("#OpenIframeLink").attr('href')),
    'showCloseButton': false
});
</script> 
```

现在此代码位于 iframe fancybox 窗口中的 content.asp 页面上

```
<div id="message">
    <a href="http://something.com" target="_blank">click me</a>
</div>

<script type="text/javascript">
    $('#message a').click(function() {
      parent.$.fancybox.close();

      //now it should open the new window as a standard default click
      //as if this function wasn't bound to the click
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:57:19.953

检查此**链接**：[http ://www.techfoobar.com/2012/jquery-programmatically-clicking-a-link-and-forcing-the-default-action](http://www.techfoobar.com/2012/jquery-programmatically-clicking-a-link-and-forcing-the-default-action)

*免责声明：*这是我写的一篇文章。

该技术涉及动态创建一个`form`元素，其中链接`href`作为其属性，`action`链接`target`作为其`target`属性，然后通过代码触发其提交（幸运的是浏览器允许）

# objective-c - 如何在 iOS 中使用 kCICategoryDistortionEffect 和 kCICategoryGeometryAdjustment？

> ID：12953462
> 
> 赞同：2
> 
> 时间：2012-10-18T11:21:42.370
> 
> 标签：objective-c, ios, core-image

我想在我的 iOS 应用程序中添加“Face-wrap”效果。经过大量搜索后，我知道 iOS 中有 CoreImage 框架，它提供了一些常量，如 kCICategoryDistortionEffect 和 kCICategoryGeometryAdjustment。我希望两者都能帮助我实现我的目标。但是，现在我可以找到如何使用它们的任何示例。你能帮我么？提前致谢。

# jsp - JspMethodNotFoundException: /login.jsp(40,26) > '#{login_bean.dbDelete}' 找不到方法

> ID：12953465
> 
> 赞同：0
> 
> 时间：2012-10-18T11:21:54.243
> 
> 标签：jsp, jsf

我无法在 JSF 支持 bean 中调用方法。我收到此错误。

> （org.apache.jasper.el.JspMethodNotFoundException: /login.jsp(40,26) '#{login_bean.dbDelete}' 找不到方法： beans.login_bean@263b1d94.dbDelete() ）

方法签名如下：

```
public void dbDelete(String UName) {
    // 
} 
```

调用该方法的JSP代码为：

```
 <h:commandButton action="#{login_bean.dbDelete}" value="Delete" type="submit"/> 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:32:14.430

```
<h:commandButton action="#{login_bean.dbDelete}" value="Delete" type="submit"/> 
```

此操作需要一个无参数的方法。

```
public void dbDelete() {
    // ...
} 
```

所以要解决这个问题，要么`String UName`从你的方法签名中删除，要么提供一个有效的参数（仅在 EL 2.2 中有效）：

```
<h:commandButton action="#{login_bean.dbDelete(uName)}" value="Delete" type="submit"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:26:13.403

你正在做的是：

```
delete * from tbl_users where UName=? 
```

并且您的删除查询语法错误。去掉星星，应该是

```
delete  from tbl_users where UName=? 
```

看看这个[http://www.mkyong.com/jdbc/jdbc-statement-example-delete-a-record/](http://www.mkyong.com/jdbc/jdbc-statement-example-delete-a-record/)

# algorithm - 从一组中选择 n 个向量同时最小化成本的算法

> ID：12953470
> 
> 赞同：4
> 
> 时间：2012-10-18T11:22:26.273
> 
> 标签：algorithm, machine-learning, artificial-intelligence

假设我们有：

*   集合 U 的 n 维向量（向量 v = < x1,x2 ... ,xn >）
*   约束 n 维向量 c = < x1...xn >
*   n 维权重向量 w = < x1...xn >
*   整数 S

我需要从 U 中选择 S 向量到集合 R 中同时最小化函数成本（R）的算法

```
cost(R) = sum(abs(c-sumVectors(R))*w) 
```

（sumVectors 是一个对所有向量求和的函数，如下所示：`sumVectors({< 1,2 >; < 3 ,4>}) = < 4,6 >`while`sum(< 1, 2, 3 >)`返回标量 6）

解决方案不必是最优的。我只需要在预设时间内得到一个最好的猜测。

知道从哪里开始吗？（最好比遗传算法更快/更智能）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:37:51.680

这是一个优化问题。由于您不需要最佳解决方案，您可以尝试[随机优化](http://en.wikipedia.org/wiki/Stochastic_optimization)方法，例如[Hill Climbing](http://en.wikipedia.org/wiki/Hill_climbing)，其中您从随机解决方案（R 的随机子集）开始并查看相邻解决方案的集合（添加或删除当前解决方案的组成部分之一）对于那些具有各自成本函数更好的组件。

为了获得更好的解决方案，您还可以将[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)添加到您的爬山搜索中。这个想法是，在某些情况下，有必要转向一个更糟糕的解决方案，然后再找到一个更好的解决方案。模拟退火效果更好，因为它允许在工艺开始时采用更差的解决方案。随着过程的进行，该算法不太可能允许更差的解决方案。

我在这里粘贴了一些示例爬山 python 代码来解决您的问题： [https ://gist.github.com/921f398d61ad351ac3d6](https://gist.github.com/921f398d61ad351ac3d6)

在我的示例代码中，**`R`**总是包含一个索引列表**`U`**，我使用[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)来比较邻居之间的相似性。当然，您可以使用其他满足您自己需求的距离函数。还要在代码中注意，我正在快速找到邻居。如果您在 中有大量向量**`U`**，您可能需要缓存预先计算的邻居，甚至考虑使用局部敏感散列以避免**`O(n^2)`**比较。可以将模拟退火添加到上述代码中。

一次随机运行的结果如下所示。

我只使用了 20 个向量**`U`**，**`S`**=10，这样我就可以将结果与最优解进行比较。当没有更好的选择时，爬山过程在第 4 步停止，只替换一个 k 最近邻。

我还进行了详尽的搜索，迭代了所有可能的组合。可以看到，与穷举法相比，爬山的结果相当不错。只需 4 步即可获得相对较小的成本（尽管是局部最小值），这需要超过 82K 步的详尽搜索才能击败它。

```
initial R [1, 3, 4, 5, 6, 11, 13, 14, 15, 17]
hill-climbing cost at step      1: 91784
hill-climbing cost at step      2: 89574
hill-climbing cost at step      3: 88664
hill-climbing cost at step      4: 88503
exhaustive search cost at step      1: 94165
exhaustive search cost at step      2: 93888
exhaustive search cost at step      4: 93656
exhaustive search cost at step      5: 93274
exhaustive search cost at step     10: 92318
exhaustive search cost at step     44: 92089
exhaustive search cost at step     50: 91707
exhaustive search cost at step     84: 91561
exhaustive search cost at step     99: 91329
exhaustive search cost at step    105: 90947
exhaustive search cost at step    235: 90718
exhaustive search cost at step    255: 90357
exhaustive search cost at step   8657: 90271
exhaustive search cost at step   8691: 90129
exhaustive search cost at step   8694: 90048
exhaustive search cost at step  19637: 90021
exhaustive search cost at step  19733: 89854
exhaustive search cost at step  19782: 89622
exhaustive search cost at step  19802: 89261
exhaustive search cost at step  20097: 89032
exhaustive search cost at step  20131: 88890
exhaustive search cost at step  20134: 88809
exhaustive search cost at step  32122: 88804
exhaustive search cost at step  32125: 88723
exhaustive search cost at step  32156: 88581
exhaustive search cost at step  69336: 88506
exhaustive search cost at step  82628: 88420 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:38:50.750

您将需要检查所有可能的集合 R 和最小化的成本。如果您在每次添加时以逐步最小化成本的方式选择向量，您可能找不到具有最低成本的集合。如果向量集 U 非常大并且计算速度太慢，您可能会被迫使用逐步方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:39:33.157

您的问题本质上是一个组合优化问题。这些很难解决，但我可以提供一些建议。它们基于您无法探索所有组合的想法，因此您只能在贪婪的最佳解决方案附近进行探索。

有一种非常通用的方法叫做[beam-search](http://en.wikipedia.org/wiki/Beam_search)，它是一种启发式方法，它本质上修改了最佳优先搜索以使用有限的内存（波束宽度）。它依赖于这样一个概念，即对于任何给定的部分解决方案，您可以计算与向集合中添加一些新成员相关的分数，以及当前集合的分数（因为您有一个很好的目标函数）。这个想法是，然后您从空集开始，并为堆栈上的每个状态不断选择 n 个最佳下一个状态，然后当所有状态都展开时，您丢弃堆栈上除了 n 个最佳状态之外的所有状态并重复。这将为您提供 n 个可能的解决方案，并且您可以选择得分最高的。

但是，这可能行不通，因为您的目标函数的细节会使这个选择向量立即接近约束，然后（经过一些步骤，具体取决于您的成本向量和分量向量的相对比例）寻找小向量以减少差异。如果是这样，您可以使用此方法的解决方案来初始化随机游走/模拟退火策略（将允许您从集合中随机添加或删除），以寻找接近您通过光束搜索获得的解决方案的更好解决方案。

# parent - 引用父文档的公式在计算字段中起作用，而不是作为默认值

> ID：12953471
> 
> 赞同：2
> 
> 时间：2012-10-18T11:22:27.307
> 
> 标签：parent, lotus-notes, default-value, lotus-formula

继这个问题之后：[在创建文档时引用父字段](https://stackoverflow.com/questions/7660665/referencing-parent-field-on-document-creation)我正在使用公式作为`name`字段的默认值。

```
IfError(@IfError(@GetDocField($ref;"ProductFamilyManager");
                 @GetDocField(ParentUNID;"ProductFamilyManager"));
        "") 
```

这在它是一个计算字段时有效，但当我将其更改为可使用默认值公式编辑时无效。

有什么想法可以让该字段填充默认值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:51:55.010

它可能不受支持，但只是为了确定，在您创建响应文档之前是否保存了父文档？

假设这不是问题，替代方法是使用“从父文档继承字段值”选项，该选项将在创建时将值从父文档传递给响应文档。我的措辞可能有误，但该选项位于 Designer 的表单属性对话框中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:44:17.293

最好的方法是使用@InheritedDocumentUniqueId。您需要启用继承以使该功能可用，但您实际上不必继承任何父值。

你绝对不应该使用两种不同的技术和@IfError 来完成这项工作。顺便说一句：你知道@IfError 在 Domino 7 中已经过时了吗？

# c++ - 析构函数调用以前从未构造过的对象

> ID：12953475
> 
> 赞同：1
> 
> 时间：2012-10-18T11:22:48.597
> 
> 标签：c++, object-destruction

我有以下代码。

```
class Wave {

int m_length;
data_type * m_data;

public:

    Wave(){
        blah...blah...blah
        m_data = NULL;
        m_length = 0;
        cout << "Wave " << this << " created on " << m_data << " with m_length " <<  m_length << endl;
    }

    Wave(int len, data_type data){
        blah...blah...blah
        if (len) {
            m_length = len;
            m_data = new data_type [m_length];
        } else {
            m_length = 0;
            m_data = NULL;
        }
        cout << "Wave " << this << " created on " << m_data << " with m_length " <<  m_length << endl;
    }

    ~Wave() 
    {
    cout << "Wave " << this << " destructor  on " << m_data << " started ";
        if (m_length) delete[] m_data;
    cout << "and finished " << endl;
    };        

    Wave & operator+= (const Wave wave){
    cout << __FUNCTION__ << ":" << __LINE__ << " m_length " << m_length << endl;
    if (NULL != m_data){
        data_type * tBuf = new data_type [m_length + wave.Length()];
        copy (wave.begin(),wave.end(), copy (begin(),end(),iterator(tBuf)));
        cout << "Wave " << this << " data on " << m_data << " moved onto " << tBuf;
        delete[] m_data;
        m_data = tBuf;
        cout << " and deleted" << endl;
    } else {
        m_data = new data_type [wave.Length()];
        copy (wave.begin(), wave.end(), begin());
        cout << "Wave " << this << " data created on " << m_data << " of length " <<  wave.Length() << endl;
    }
    m_length += wave.Length();
    cout << __FUNCTION__ << ":" << __LINE__ << " m_length " << m_length << endl;
    return *this;
    };

}

main(){

blah..blah..blah

Wave sample;

for (......) {

    cout << pulseNum << "-th High part: " << pulse->first << endl;
    Wave tSample(x,y);
    blah.blah.blah

    sample += tSample;

    cout << endl << pulseNum++ << "-th Low part: " << pulse->second << endl;
    tSample = Wave(a,b);
    blah.blah.blah

    sample += tSample;
}

} 
```

下面是执行此代码的日志

```
Wave 0x28fe34 created on 0 with m_length 0
0-th High part: 220
Wave 0x28fe54 created on 0xc60f00 with m_length 207
operator+=:211 m_length 0
Wave 0x28fe34 data created on 0xc610a8 of length 207
operator+=:230 m_length 207
Wave 0x28fe9c destructor  on 0xc60f00 started and finished

0-th Low part: 320
Wave 0x28febc created on 0xc61250 with m_length 301
Wave 0x28febc destructor  on 0xc61250 started and finished
operator+=:211 m_length 207
Wave 0x28fe34 data on 0xc610a8 moved to 0xc61250 and deleted 
operator+=:230 m_length 508
Wave 0x28fee0 destructor  on 0xc61250 started and finished

Wave 0x28fe54 destructor  on 0xc61250 started and finished 
```

对我来说最奇怪的是析构函数的调用次数比构造函数的调用次数多。此外，它被调用用于以前从未构造过的对象，而是用于相同的数据地址。
怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T11:25:08.770

`Wave`有一个编译器生成的复制构造函数，你看不到它的输出。

例如，调用此复制构造函数来构造作为 的参数的对象`Wave & operator+= (const Wave wave)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:33:26.390

如果您想简化代码，只需定义一个`std::vector<data_type> m_data`数据成员，而不是使用原始指针 ( `data_type * m_data`)。

这样，编译器会*自动*为你的类生成正确的复制构造函数、复制操作符=（以及移动语义）和析构函数（自动生成的复制构造函数、复制操作符=和析构函数将操作成员- 明智的，例如自动生成的复制构造函数将为您的类的每个数据成员调用复制构造函数）。

分配数据，而不是：

```
m_data = new data_type [m_length]; 
```

采用：

```
m_data.resize(m_length); 
```

您还可以摆脱`m_length`数据成员，因为它`std::vector`知道自己的大小（您可以通过`std::vector::size()`方法访问它）。

请注意，`std::vector`将其所有元素存储在一个连续的内存区域中（如`new[]`）；您可以使用 访问该区域的开头`&m_data[0]`。

# java - Manager 不适用于 Tomcat 6，但适用于 v7

> ID：12953479
> 
> 赞同：2
> 
> 时间：2012-10-18T11:22:55.940
> 
> 标签：java, tomcat, web-applications, application-server

我想使用 Tomcat 管理器和 Maven 插件，但它似乎不起作用；我已将`tomcat-users.xml`文件更改为包含：

```
<tomcat-users>
  <role rolename="manager"/>
  <role rolename="admin"/>
  <role rolename="manager-gui"/>
  <user username="admin" password="password" roles="admin,manager,manager-gui"/>
</tomcat-users> 
```

尝试访问时，`http://localhost:8080/manager/`我得到`HTTP Status 404 - /manager/`/其他应用程序工作；有趣的是，这只发生在 Tomcat 6 上；在 Tomcat 7 上，经理工作正常（问题是我的项目只在 Tomcat 6 中工作）。

ROOT 和 manager 文件夹存在于 webapps 文件夹中（我尝试使用新下载的 Tomcat 6 以确保它们无论如何都没有损坏）。

我唯一没有做的是为 CATALINA_HOME (&others) 设置环境变量，但我不认为这可能是一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:34:59.533

如果您正在运行 Tomcat 6，请使用：

```
http://localhost:8080/manager/html 
```

更多信息[在这里](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html)。

# excel - Sumproducts #价值！错误

> ID：12953480
> 
> 赞同：1
> 
> 时间：2012-10-18T11:23:00.037
> 
> 标签：excel, function

我正在尝试使用 Sumproducts 函数，但得到 #VALUE 错误

代码如下所示： =SUMPRODUCT('组合输出表'!AO4:BH4,'ECAP CONSTANTS'!B2:I2)

两个数组都由百分比值组成。

我在其他地方的 Sumproducts 函数中使用了第二个数组，它可以完美地工作，并且我检查了第一个数组是否仅由数字值（百分比格式）组成。两个数组都没有任何字符或非数字值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:33:52.807

这两个范围需要相同的大小，在您的公式中，第一个范围是 20 个单元格，第二个范围只有 8 个，所以我不知道应该将哪些单元格相乘，但这应该可以工作

`=SUMPRODUCT('Combined Output Table'!AO4:BH4,'ECAP CONSTANTS'!B2:U2)`

第二个范围在 U2 完成，使其大小与第一个范围相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:33:47.523

您的范围大小不同。算法试图将某个值乘以某个不存在的值是没有意义的，因此 SUMPRODUCT() 中的所有范围必须始终在大小上匹配。

# nlog - NLOG 翻转配置

> ID：12953481
> 
> 赞同：3
> 
> 时间：2012-10-18T11:23:01.857
> 
> 标签：nlog, rollover

NLOG 中是否有完成以下任务的配置

1）当当前文件超过特定大小时，应创建一个新的日志文件，例如：- 5 MB

2) 应在配置的时间段后删除旧的日志文件，例如：- 1 天

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T11:36:42.393

您可以在页面上找到您的问题（和示例）的答案：

[基于大小的文件归档](https://github.com/nlog/NLog/wiki/File-target#size-based-file-archival)- 日志文件可以通过在达到一定大小后将它们移动到另一个位置来自动归档，并且

[基于时间的文件归档](https://github.com/nlog/NLog/wiki/File-target#time-based-file-archival)- 日志文件也可以基于时间自动归档

尝试使用第二个并每天更改日志文件。比您可以保留最大数量的存档文件。

# java - SLF4J-Log4j 记录器不记录

> ID：12953482
> 
> 赞同：12
> 
> 时间：2012-10-18T11:23:04.537
> 
> 标签：java, tomcat, logging, log4j, slf4j

我第一次尝试使用 SLF4J-Log4j。在每个 Java 类中，我都定义了一个记录器，如下所示：

```
private org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger(<TheClass>.class); 
```

（当然，我确保`slf4-log4j12-1.6.4.jar`JAR 在类路径中！）

但是每当我去使用记录器时，比如`logger.debug("Something interesting happened");`or `logger.error("An error occurred");`，我都没有在我的日志文件中看到它们的输出。但是，没有异常发生，应用程序（实际上是部署到 Tomcat 的 WAR）运行良好。

这是`log4j.properties`项目中包含的文件：

```
# Set the root logger to DEBUG.
log4j.rootLogger=DEBUG

# MonitorLog - used to log messages in the Monitor.log file.
log4j.appender.MonitorAppender=org.apache.log4j.FileAppender
log4j.appender.MonitorAppender.File=${catalina.base}/logs/MyAppMonitor.log
log4j.appender.MonitorAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.MonitorAppender.layout.ConversionPattern= %-4r [%t] %-5p %c %x - %m%n

# Use the MonitorAppender to log all messages.
log4j.logger.*=DEBUG,MonitorAppender
org.quartz.impl.StdSchedulerFactory=DEBUG,MonitorAppender 
```

此 WAR 使用 Quartz 来 cron 执行一些作业，这就是您看到最后一个条目的原因。

当我检查 Tomcat 的 logs/ 目录时，我看到了`MyAppMonitor.log`get 已创建，但其中没有任何内容（0 字节）。我也扫描了所有典型的 catalina.out、catalina- 和 localhost- 日志，但我的日志语句都没有出现。

我在想：

1.  我没有`log4j.properties`正确配置，或者
2.  我没有正确配置 slf4j-log4j，或者
3.  这是一个类路径问题，也许 WAR 找不到`log4j.properties`（尽管我想我会看到错误或警告），或者
4.  我没有正确使用（API 本身）SLF4J，或者
5.  我从未真正创建过名为的东西`MonitorAppender`，所以我想知道这是否是问题所在；我只是按照我在网上看到的一个例子

谁能发现我哪里出错了，或者帮我解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T15:22:48.247

您的`log4j.properties`配置文件中有许多错误。尝试像下面这样简单的东西。

```
log4j.debug=true
log4j.rootLogger=DEBUG, CON

log4j.appender.CON=org.apache.log4j.ConsoleAppender
log4j.appender.CON.layout=org.apache.log4j.PatternLayout
log4j.appender.CON.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

至于您问题中的配置文件，根记录器没有附加附加程序。此外，线

```
log4j.logger.*=DEBUG,MonitorAppender 
```

无效，因为不支持“*”。

# php - PHP中不存在怎么写

> ID：12953485
> 
> 赞同：-2
> 
> 时间：2012-10-18T11:23:14.140
> 
> 标签：php

所以我在 PHP 中有一个 if 语句，如下所示：

```
if ($_GET['Squares'] != 0) 
```

但实际上我需要检查变量 squares 是否已通过 url 传递。因此，如果正方形不存在，则必须如此。我尝试了以下方法，但它会引发错误。

```
if (!isset $_GET['Squares']) 
```

谁能告诉我正确的语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:25:01.287

`isset()`在调用周围添加括号：

```
if (!isset($_GET['Squares'])) 
```

在 PHP 中，所有函数调用都必须在参数周围加上括号。确保不要将语言结构混淆为函数，例如可以不带括号调用的`print`和。`echo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:25:04.830

改用这个：

```
if (isset($_GET['Squares'])) {
   // variable passed via the URL
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:24:52.950

```
if (!isset $_GET['Squares'])
          ^-----------------^--herr is the problem should be like below

if (!isset ($_GET['Squares'])) 
```

并改用

```
if (isset($_GET['Squares'])) {
    //code
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:24:56.963

添加括号。`isset`是一个函数，所有函数都需要它们`()`的参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T13:49:19.923

`isset($variable)`功能将帮助您查找是否`$variable`已设置。

所以要检查是否`Squares`在 URL 中设置，你可以尝试这样的事情

```
if(isset($_GET['Squares'])){

//The Squares is set

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T11:25:40.143

你应该这样使用它

```
if(isset($_GET['Squares'])){
...
} 
```

这将检查变量是否已设置以及它是否不为空。

# java - 如何在 dvr（服务器）和带有 android（客户端）的手机之间直接流式传输视频？

> ID：12953489
> 
> 赞同：4
> 
> 时间：2012-10-18T11:23:23.827
> 
> 标签：java, android, video, stream

我的意思是我应该使用哪些函数/库？

# java - 由于基础异常导致通信链路故障：连接超时

> ID：12953494
> 
> 赞同：0
> 
> 时间：2012-10-18T11:23:54.203
> 
> 标签：java, mysql, linux, networking, jdbc

我的应用程序在 Linux Mandriva 上运行，无法连接到 MySQL 数据库。

my.cnf 的一部分：

```
bind-address="127.0.0.1"
# skip- networking 
```

我设置`wait_timeout`如下：

```
SET GLOBAL wait_timeout = 28800; 
```

我试图连接到数据库：

```
public class TestJdbc {
    public static void main(String[] args) {
        Connection conn = null;

        String url = "jdbc:mysql://localhost:3306/";        
        String driver = "com.mysql.jdbc.Driver";

        String dbName = "gibrid", userName = "java", 
            password = "java";      

        try {
            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url+dbName, userName, password);
            System.out.println("Connected to the database");
            conn.close();
            System.out.println("Disconnected from database");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我将这个类打包在 jar 中并发送到服务器。当我尝试执行它时，我得到以下信息：

```
 com.mysql.jdbc.CommunicationsException: 
Communications link failure due to underlying exception:

    ** BEGIN MESSAGE **

    java.net.ConnectException
    MESSAGE: Connection timed out

    STACKTRACE: java.net.ConnectException: Connection timed out
      at java.net.PlainSocketImpl.socketConnect(Native Method)
      at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:333)
      ... 
```

但是当我从本地主机运行这段代码时，一切正常：

```
Connected to the database
Disconnected from database 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:29:22.667

你`telnet`能连接到那个 Linux 服务器上的 3306 端口吗？这会告诉你是否有东西在那个端口上监听。

请注意，如果您从 Windows 服务器运行代码，请使用以下行：

```
jdbc:mysql://localhost:3306/"; 
```

意味着您正在连接到 Windows 机器上的服务，而不是 Linux 机器。

# asp.net-mvc-3 - 创建一个简单的站点来显示我的应用程序，有一些路由问题

> ID：12953495
> 
> 赞同：1
> 
> 时间：2012-10-18T11:23:55.243
> 
> 标签：asp.net-mvc-3

我想创建一个网站来显示我的应用程序。我使用 MVC 3。

我的 Home 控制器是一个典型的概览页面，我将在其中列出我的所有应用程序。然后是 App 控制器，如果您单击概览上的应用程序可以获得更多信息... url 场景将是：

```
http://myhost.com                 <-- overview
http://myhost.com/App/app_name    <-- render info about that app 
```

但是我在理解路线时遇到了一个小问题，我认为我做得对：

```
 routes.MapRoute(
                "App", // Route name
                "{controller}/{id}", // URL with parameters
                new { controller = "App", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

以及如何在控制器中获取 id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:27:02.527

您的应用程序规则不会更具体，即

```
routes.MapRoute(
                "App", // Route name
                "App/{id}", // URL with parameters
                new { controller = "App", action = "Index", 
                                             id = UrlParameter.Optional } 
                // Parameter defaults
            ); 
```

注意替换`{controller}`为`App`

# c - 在 C 中通过引用传递时会发生什么？

> ID：12953496
> 
> 赞同：5
> 
> 时间：2012-10-18T11:24:00.917
> 
> 标签：c, string, pointers, pass-by-reference

我知道当我们将参数传递给函数时，会在函数的堆栈中创建一个副本，并且调用者函数中参数的实际值没有变化。

将指针传递给函数时会发生什么？我知道参数的值在调用者函数中**确实**发生了变化。但它是如何在内部发生的？被调用函数如何访问调用者函数中的变量？

我试图从维基百科的[Call_by_reference 页面](http://en.wikipedia.org/wiki/Call_by_reference#Call_by_reference)获取信息，但并不重要。

一旦我开始阅读有关字符串并将字符串作为参数传递给其他函数的内容，我就会对此感到困惑。任何有关这方面的帮助都会有很大帮助。谢谢！！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T11:26:28.353

当您将指针传递给函数时，指针会被复制。但是，指向对象的指针的副本`x`也是指向 的指针`x`，因此可以使用它来修改`x`。

对于（人为的）类比，假设那`x`是你的房子。根据 C 的规则，当您需要管道工来修理房子里的东西时，您可以给管道工一份您房子的副本，让他们修理，然后将副本还给您。不用说，对于大于几个字节的房屋，由于所有的复制，这是非常低效的。所以相反，你给水管工*一个指向*你房子的指针（它的地址），这样水管工就可以进入你的房子并当场修理它。这就是引用调用的含义：您传递的不是要修改的数据，而是指向该数据的指针，以便被调用者知道*在哪个位置*进行操作，而不仅仅是*在哪个 value 上*进行操作。

```
const int broken = 0, fixed = 1;

struct House {
    int plumbing;
};

void plumber(House *h)
{
    h->plumbing = fixed;
}

int main()
{
    struct House h;
    h.plumbing = broken;
    plumber(&h);          // give the plumber the address of the house,
                          // not a copy of the house
    assert(h.plumbing == fixed);
} 
```

在传递字符串的情况下，您传递的是指向`char`字符串中第一个的指针。使用指针算法，您可以得到以下元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T11:33:36.137

C 没有通过引用传递。将指针传递给函数时，实际上是将变量的地址传递给函数。然后该函数可以更改该地址处的值，然后此更改将反映在调用函数的变量中。但是，如果您尝试更改指针指向的地址，则更改不会反映在调用函数中，因为指针仍然按值传递。

```
void f(int *j) {
  (*j)++;
  int k = 20;
  j = &k;
}

int main() {
  int i = 20;
  int *p = &i;
  printf("i = %d, p = %p\n", i, p);
  f(p);
  printf("i = %d, p = %p\n", i, p);

  return 0;
} 
```

**输出**

```
i = 20, p = 0x123456
i = 21, p = 0x123456 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T11:35:40.427

C 中的每个参数都是按值传递的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T11:43:31.937

```
 a=10     b=20
                        ------   -------
                        0xf8      0Xf4
                    ----------  ---------

                Suppose a and b are two variables in a function stack
                when you call another function 
                foo(&a,&b)
                actually 0xf8 and 0xf4 is caught in the definition of 
                foo(int *pa,int *pb)

       So  pa=0xf8    pb=0xf4
           --------    ---------
 But *pa = 10 and *pb = 20 , You can manipulate like this.
 So these pointers start pointing to the actual data and any changes here are reflected in the original environment. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T11:27:45.987

所有数据都存储在具有特定地址的特定位置。当你通过引用传递时，你通过引用传递数据的地址。并告诉函数使用间接寻址来操作数据。

当您将其传递给函数时，（变量的）地址作为数据发送，但数据本身是按值传递的。

# git - git致命错误参考未找到

> ID：12953500
> 
> 赞同：3
> 
> 时间：2012-10-18T11:24:10.630
> 
> 标签：git, fatal-error, git-bash, gitstack

尝试推送到我设置的运行 GitStack 的 Windows 服务器时出现此错误。

`fatal: http://xx.xx.x.xxx/mjtest.git/info/refs not found: did you run git update-server-info on the server?`

这个错误在 Git、GitBash 和 GitStack 的新手中似乎很常见，所以我找到了一些可能的解决方案，但似乎没有一个对我有用。

这就是导致错误的原因，首先我在 GitStack 中创建一个名为 mjtest 的空存储库，然后创建一个用户并将其添加到存储库并授予他们读写权限，然后我使用 GitBash 创建一个本地存储库并尝试推动它。

```
git config --global user.name "XXXXXXX"
git config --global user.email XXXXXXX
mkdir ~/mjtest
cd ~/mjtest
git init
touch README
git add README
git commit -m 'first commit'
git remote add origin http://XX.XX.X.XXX/mjtest.git
git push origin master 
```

然后这会要求我输入用户名，然后是我正确输入的密码。输入它们后，它会返回致命错误消息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:27:29.940

它可能与[控制访问问题](http://www.kernel.org/pub/software/scm/git/docs/gitweb.html#_controlling_access_to_git_repositories)有关。
这通常发生在 repo 未设置为导出（通过`git-daemon`或`gitweb`）时：GitStack 可以依赖类似的机制。
例如，请参阅[此线程](http://gitstack.com/questions/git-clone-fails-with-inforefs-not-found-did-you-run-git-update-server-info-on-the-server/)/

> 我在我的一个存储库中创建了一个名为“”的“空”文件`git-daemon-export-ok`。
> 我现在可以毫无问题地克隆/推送/拉到这个存储库。

该文件应直接在`xxx.git`服务器上裸仓库的根目录下创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-28T10:02:41.220

我查看了 C:/GitStack/apache/logs/error.log 并发现 GitStack 在错误的位置寻找存储库，尽管它的设置说 D:/Repositories （我的自定义位置），GitStack 在其默认值中查找存储库地点。所以我只是从 GitStack 管理页面再次保存了设置。它解决了这个问题。

# actionscript-3 - 画一条线：Graphics.lineStyle() 中是否存在粗细限制？

> ID：12953502
> 
> 赞同：2
> 
> 时间：2012-10-18T11:24:17.623
> 
> 标签：actionscript-3, flash, graphics

我正在为基于 Flash 的应用程序开发一个简单的图形编辑器。在我的编辑器中有缩放的可能性，缩放范围很大（最大比例为`16.0`，最小比例为`0.001`，默认比例为`0.2`）。因此，用户很有可能绘制一条粗细为`0.1`或的线`300.0`，并且看起来粗细的线 (in `Graphics.lineStyle()`) 具有上边框。正如我从[livedocs](http://livedocs.adobe.com/livecycle/8.2/programLC/common/langref/flash/display/Graphics.html#lineStyle%28%29)中发现的，最大值是`255`. 因此，如果厚度更大，则`255.0`绘制一条厚度线`255.0`。提到的上边界是否存在以及它有多大。这是我的问题：

1.  现在我正在用`drawPath()`or`lineTo()`方法画线。如果厚度更大，自然 walkarround`255.0`是绘制一个矩形而不是段，并在段的末端绘制两个圆圈（而不是`lineTo()`）。或者甚至绘制两个细线段和两个半圆并填充内部。也许有更优雅/快速的解决方案？
2.  另一个问题是，如果线的粗细很大但小于`255.0`（例如`100.0`），用什么画一条线`lineTo()`或画两条细线段和两个半圆并填充内部更快？
3.  最后，也许有人知道一篇很好的文章/书，我可以在其中阅读所有`flash.display.Graphics`类方法中的内容（甚至不是关于图形的特定文章/书）？

任何想法表示赞赏。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:10:35.807

我同意 fa 将线放入容器中可能比绘制矩形和额外的圆圈更好、更有效。

我认为数学计算不会太难。为了提高效率，你应该只在线条样式超过 255 时才这样做。

要设置显示对象以保持您的线条，我首先将线条的宽度减半（长度可以保持不变）。然后创建一个新的精灵并在精灵中以一半大小绘制线条（例如，如果您想要 300，只需将其绘制为 150）。最简单的方法是从 (0,0) 开始并笔直绘制线段，这样您的所有变换都可以应用于新的精灵。

从这里您可以将精灵的 scaleY 加倍以获得所需的线宽。它应该保持相同的长度，并且端部也应该正确修圆。

希望这有所帮助！

使用图形类的一个很酷的资源是 Flash 和 Math。这个站点有几个很酷的效果和工作示例和源代码。

[http://www.flashandmath.com/](http://www.flashandmath.com/)

# android - getrotation( ) 在 Samsung Galaxy p1000 (4.1 Jelly Bean) 和 Samsung Galaxy tab 10.1 (3.2) 上返回不同的值

> ID：12953506
> 
> 赞同：0
> 
> 时间：2012-10-18T11:24:30.247
> 
> 标签：android, android-imageview, screen-rotation

我正在使用 getrotation 函数来检测创建活动时屏幕的初始旋转。但是当我以前注销返回此功能的内容时，我提到在我的 P1000 上，当旋转 = 1 或 3 时，这意味着我的平板电脑处于横向状态。但是在我的 10.1 选项卡上，当旋转 = 0 或 2 时，这意味着我的平板电脑处于横向状态。这导致我在背景图像使用替换中出现问题。这是我的代码：

```
HomeBackground = (ImageView) findViewById(R.id.home_background);
    Display display = ((WindowManager) this.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    int rotation = display.getRotation();

        if (rotation == 1 || rotation == 3) {
        HomeBackground.setBackgroundResource(R.drawable.home_bg_landscape);
    } else {
        HomeBackground.setBackgroundResource(R.drawable.home_bg_portrait);
    } 
```

那么使用另一种方法检测屏幕初始旋转的解决方案是什么？或者我的错误是什么？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:30:40.870

从文档中`Display.getRotation()`：

> 从“自然”方向返回屏幕的旋转。

Galaxy Tab 10.1 的自然方向是横向的，我假设其他设备是纵向的。

[这个答案](https://stackoverflow.com/questions/4553650/how-to-check-device-natural-default-orientation-on-android-i-e-get-landscape)可能有助于确定默认方向是什么

# solr - Solr 索引的 DateField 上的 Lucene 查询

> ID：12953510
> 
> 赞同：3
> 
> 时间：2012-10-18T11:24:42.817
> 
> 标签：solr, lucene

我们正在为各种搜索应用程序使用 solr 索引。在大多数情况下，我们就像使用管理界面一样使用它。例如：

```
+text:Mr +text:burns +publish_date[2012-09-10T00:00:00Z TO 2012-10-10T00:00:00Z] 
```

这工作正常。
我的问题是，在一个应用程序中，我们直接对索引使用复杂的 lucene 查询（不使用 solr），在这些查询中我找不到如何搜索日期字段。
在 schema.xml 中：

```
<field name="publish_date" type="date" indexed="true" stored="true"/> 
```

似乎 solr 将日期存储为以毫秒为单位的 unix 时间，当从索引中提取字段时，它看起来像**1336867200000**

在 lucene 中，我尝试了所有我能想到的查询：

```
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "1299628800000", "1336867200000", true, true);
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "1299628800", "1336867200", true, true);
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "2012-09-10T00:00:00Z", "2012-10-10T00:00:00Z", true, true);
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "20120910", "20121010", true, true);
NumericRangeQuery nq1 = NumericRangeQuery.newLongRange("publish_date", 1299628800, 1336867200, true, true); 
```

和其他一些尝试......
返回结果的唯一查询是

```
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  null, null, true, true); 
```

当然，这是一个带有“开放端点”的查询，但它似乎确实适用于该字段被索引为字符串（同样不适用于 int-range 或 long-range）。
令人沮丧的是，这显然是可能的，我只需要弄清楚 solr 的剂量是如何影响它的日期范围的。
任何人都知道如何执行此搜索？
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:08:42.083

“1336867200000”是一个时间戳，是的。

```
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "1299628800000", "1336867200000", true, true);
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "1299628800", "1336867200", true, true); 
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "2012-09-10T00:00:00Z", "2012-10-10T00:00:00Z", true, true); 
TermRangeQuery nq1 = new TermRangeQuery("publish_date",  "20120910", "20121010", true, true); 
```

以上这些将不起作用，因为您正在对数字数据使用字符串参数。

```
NumericRangeQuery nq1 = NumericRangeQuery.newLongRange("publish_date", 1299628800, 1336867200, true, true); 
```

这个行不通，因为你没有用足够的零填充它。1299628800 代表 1970 年 1 月 16 日星期五 02:00:28 GMT 1970。

如果您的文件日期在 2011 年 9 月 3 日至 2012 年 5 月 13 日之间，则以下内容应该有效：

```
NumericRangeQuery nq1 = NumericRangeQuery.newLongRange("publish_date", 1299628800000L, 1336867200000L, true, true); 
```

# java - 休眠 hbm2java

> ID：12953532
> 
> 赞同：1
> 
> 时间：2012-10-18T11:25:52.283
> 
> 标签：java, hibernate, hbm2java

我正在通过 Eclipse 中的休眠代码生成来生成带注释的 pojo。类生成得很好，但是视图类是由@EmbeddedId 组成的，我不希望这样。我想直接在这个类中有属性。我在生成对话框中找到了一个选项“生成基本类型的复合 ID”，但是当我取消选中它时，它也会生成带有 @EmbeddedId 的视图类，但不会生成相应的 Id 类。有没有办法在没有@EmbeddedId 的情况下生成这些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:01:28.533

我使用了这个：[Hibernate Pojo Generator](http://hibernatepojoge.sourceforge.net/)，结果正是想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T11:10:04.820

如果关联的表没有主键，则会生成 @EmbeddedId 注释。所以只需设置一个主键并重新生成代码。

# android - 启动 Spotify 意图

> ID：12953534
> 
> 赞同：5
> 
> 时间：2012-10-18T11:26:00.277
> 
> 标签：android, android-intent, spotify, google-play

我希望我的应用程序打开 Spotify 链接并将人们发送到该应用程序。如果安装了该应用程序，这将产生奇迹：

```
final Intent intent = new Intent(Intent.ACTION_VIEW,
                    Uri.parse("spotify:album:7rt7AxYexFTtdEqaJPekvX")); 
```

但是，在某些情况下该应用程序尚未安装，因此我希望他们以其他意图从 Google Play 下载它：

```
final Intent intent = new Intent(
                    Intent.ACTION_VIEW,
                    Uri.parse("https://play.google.com/store/apps/details?id=com.spotify.mobile.android.ui")); 
```

但是，我真的希望它直接从 Google Play 安装，而不是让人们选择打开哪个应用程序……如果安装了 Google Play。如果缺少 Google Play，我希望他们选择打开哪个应用程序（通常是导航器，但无论如何）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:34:12.913

> 但是，我真的希望它直接从 Google Play 安装，而不是让人们选择打开哪个应用程序

使用`market://` `Uri`而不是：http `https://` `Uri`: [//developer.android.com/distribute/googleplay/promote/linking.html](http://developer.android.com/distribute/googleplay/promote/linking.html)

此外，请仅在`spotify:`公开记录和支持的情况下使用该方案。

# jquery - 如何让 jScrollPane 和 uiTableFilter 一起工作

> ID：12953536
> 
> 赞同：0
> 
> 时间：2012-10-18T11:26:06.073
> 
> 标签：jquery, jscrollpane

这是一个基本示例： http: [//jsfiddle.net/KFHyG/5](http://jsfiddle.net/KFHyG/5)一起显示了 2 个插件。

我怎样才能做到： 1\. 这适用于页面上的多个过滤器。2\. jScroller 重新初始化。请参阅我已添加代码但无法正常工作。

```
var scroller = $('.scroller');
    scroller.jScrollPane({
        verticalDragMinHeight: 60,
        verticalDragMaxHeight: 60,
        showArrows: true,
        arrowScrollOnHover: true
    });
    jScroller = scroller.data("jsp");

    $(".search").keyup(function() {
        $.uiTableFilter($("table.searchme"), this.value);
        jScroller.reinitialise();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:33:22.757

为此，您需要区分表格和滚动窗格。

[这是一个工作示例](http://jsfiddle.net/KFHyG/6/)

HTML

```
<input type="text" class="search" data-id="1" />

<div id="scroller_1" class="scroller">
    <table class="searchme_1">
        <thead>
            <tr>
                <th scope="col">
                    Product Name</th>
                <th scope="col">
                    Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Large product0</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product1</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product2</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product3</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product4</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product5</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product6</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product7</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product8</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product9</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product10</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product11</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product12</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
        </tbody>
    </table>
</div>
<br />
<hr />
<br />

<input type="text" class="search"  data-id="2" />
<div id="scroller_2" class="scroller">
    <table class="searchme_2">
        <thead>
            <tr>
                <th scope="col">
                    Product Name</th>
                <th scope="col">
                    Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Large product0</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product1</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product2</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product3</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product4</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product5</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product6</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product7</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product8</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product9</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product10</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product11</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
            <tr>
                <td>Large product12</td>
                <td><a href="http://example.com">Find out more</a></td>
            </tr>
        </tbody>
    </table>
</div> 
```

JAVASCRIPT

```
$(document).ready(function() {
    var options = {
        verticalDragMinHeight: 60,
        verticalDragMaxHeight: 60,
        showArrows: true,
        arrowScrollOnHover: true
    }

    var scroller_1 = $('#scroller_1');
    scroller_1.jScrollPane(options);
    var jScroller_1 = scroller_1.data("jsp");

    var scroller_2 = $('#scroller_2');
    scroller_2.jScrollPane(options);
    var jScroller_2 = scroller_2.data("jsp");

    $(".search").keyup(function() {
        $.uiTableFilter($("table.searchme_" + $(this).attr('data-id')), this.value);
        eval("jScroller_" + $(this).attr('data-id')).reinitialise();
    });    
}); 
```

# php - PHP Memcached 客户端 - 设置数据时压缩不起作用

> ID：12953538
> 
> 赞同：3
> 
> 时间：2012-10-18T11:26:11.513
> 
> 标签：php, memcached

我正在尝试使用 php memcached 客户端。似乎默认情况下，对于 php memcached 中的设置操作，压缩是打开的。我尝试设置一个中等大小的字符串数据，当我`get`在 telnet 中运行命令时，我得到的值只是纯文本。现在，当使用 memcache 完成相同操作时，该值会出现乱码/难以辨认。这不仅是我在 telnet 中检查了统计信息。这是结果

```
memcache - compressed
bytes - 148
memcache - uncompressed
bytes - 285

memcached - uncompressed
bytes - 285
memcached - uncompressed
bytes - 285 
```

如您所见，使用 php memcache 压缩了 50%。所以压缩确实有效。但是使用 php memcached 我没有压缩。即使我使用以下命令显式打开压缩也是如此：

```
$objMemcached->setOption(Memcached::OPT_COMPRESSION, true);  //default fastlz compression
OR
$objMemcached->setOption(Memcached::OPT_COMPRESSION, true);
$objMemcached->setOption(Memcached::OPT_COMPRESSION_TYPE, Memcached::COMPRESSION_ZLIB ); 
```

我是否需要设置任何其他选项才能使其正常工作？自从 3 周以来我一直从事这个项目，如果压缩不起作用，我的老板不会接受从 memcache 到 memcached 的迁移。我希望你理解紧迫性；）（kiddnig）。

版本：

```
memcached     - 1.4.5
php-memcached - 2.0.1
libmemcached  - 1.0.8 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:10:04.847

尝试在 php.ini 中设置 memcached.compression_threshold

memcached.compression_threshold = 100

然后设置值并使用 telnet 进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:46:12.537

您的 memcached.ini 供参考

内存缓存文件

```
; Enable PECL memcached extension module

extension = memcached.so

; Use memcached as a session handler
; valid values: files, memcached
; the default value is memcached

;session.save_handler = "memcached"

; Comma separated list of servers to use for session storage
;session.save_path = "127.0.0.1:11211"

[memcached]
; Use session locking
; valid values: On, Off
; the default value is On

memcached.sess_locking = On

; Session spin lock retry wait time in microseconds
; Be carefull when setting this value.
; valid values: integers, where 0 is interpreted as default
; Negative values result in a reduced locking to a try lock.
; the default value is 150000

memcached.sess_lock_wait = 150000

; Session key prefix
; valid values: strings less than 219 bytes long
; the default value is "memc.sess.key."

memcached.sess_prefix = "memc.sess.key."

; Session binary mode

memcached.sess_binary = Off

; Compression type
; valid values: fastlz, zlib
; the default value is fastlz

memcached.compression_type = "fastlz"

; Compression factor
; Store compressed value only if the compression
; factor (saving) exceeds the set limit.
; Store compressed if:
; plain_len > comp_len * factor
; the default value is 1.3 (23% space saving)

memcached.compression_factor = "1.3"

; Compression threshold
; Do not compress serialized values below this threshold.
; the default value is 2000 bytes

memcached.compression_threshold = 100

; Default serializer for new memcached objects
; valid values: php, igbinary, json, json_array
; json - standard php JSON encoding. This serializer
; is fast and compact but only works on UTF-8
; encoded data and does not fully implement
; serializing. See the JSON extension.
; json_array - as json, but decodes into arrays
; php - the standard php serializer
; igbinary - a binary serializer
; the default value is igbinary

;memcached.serializer = "igbinary" 
```

# python - 为什么 SimpleHTTPServer 在我请求 ?querystring 时重定向到 ?querystring/？

> ID：12953542
> 
> 赞同：13
> 
> 时间：2012-10-18T11:26:22.183
> 
> 标签：python, simplehttpserver, webdev.webserver

我喜欢使用 Python 的 SimpleHTTPServer 来本地开发各种需要通过 Ajax 调用等加载资源的 Web 应用程序。

当我在我的 URL 中使用查询字符串时，服务器总是重定向到同一个 URL 并附加一个斜杠。

例如`/folder/?id=1`重定向到`/folder/?id=1/`使用 HTTP 301 响应。

我只是使用`python -m SimpleHTTPServer`.

知道如何摆脱重定向行为吗？这是 Python 2.7.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-11T11:43:37.923

正确的方法是确保查询参数保持原样，确保您直接对文件名发出请求，而不是让`SimpleHTTPServer`重定向到您的`index.html`

例如`http://localhost:8000/?param1=1`，执行重定向（301）并更改`http://localhost:8000/?param=1/`与查询参数混淆的 url。

但是`http://localhost:8000/index.html?param1=1`（使索引文件显式）正确加载。

因此，不让`SimpleHTTPServer`进行 url 重定向就可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T15:22:02.677

好的。在 Morten 的帮助下，我想出了这个，这似乎就是我所需要的：只需忽略查询字符串（如果它们存在）并提供静态文件。

```
import SimpleHTTPServer
import SocketServer

PORT = 8000

class CustomHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):

    def __init__(self, req, client_addr, server):
        SimpleHTTPServer.SimpleHTTPRequestHandler.__init__(self, req, client_addr, server)

    def do_GET(self):
        # cut off a query string
        if '?' in self.path:
            self.path = self.path.split('?')[0]
        SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self)

class MyTCPServer(SocketServer.ThreadingTCPServer):
    allow_reuse_address = True

if __name__ == '__main__':
    httpd = MyTCPServer(('localhost', PORT), CustomHandler)
    httpd.allow_reuse_address = True
    print "Serving at port", PORT
    httpd.serve_forever() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:19:27.067

我不确定重定向是如何生成的......我尝试实现一个非常基本的 SimpleHTTPServer，并且在使用查询字符串参数时我没有得到任何重定向。

在处理请求之前做一些类似`self.path.split("/")`的事情并处理路径？这段代码可以满足我的想法：

```
import SocketServer
import SimpleHTTPServer
import os

class CustomHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
    def folder(self):
        fid = self.uri[-1].split("?id=")[-1].rstrip()
        return "FOLDER ID: %s" % fid

    def get_static_content(self):
        # set default root to cwd
        root = os.getcwd()
        # look up routes and set root directory accordingly
        for pattern, rootdir in ROUTES:
            if path.startswith(pattern):
                # found match!
                path = path[len(pattern):]  # consume path up to pattern len
                root = rootdir
                break
        # normalize path and prepend root directory
        path = path.split('?',1)[0]
        path = path.split('#',1)[0]
        path = posixpath.normpath(urllib.unquote(path))
        words = path.split('/')
        words = filter(None, words)
        path = root
        for word in words:
            drive, word = os.path.splitdrive(word)
            head, word = os.path.split(word)
            if word in (os.curdir, os.pardir):
                continue
            path = os.path.join(path, word)
            return path

    def do_GET(self):
        path = self.path
        self.uri = path.split("/")[1:]

        actions = {
            "folder": self.folder,
        }
        resource = self.uri[0]
        if not resource:
            return self.get_static_content()
        action = actions.get(resource)
        if action:
            print "action from looking up '%s' is:" % resource, action
            return self.wfile.write(action())
        SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self)

class MyTCPServer(SocketServer.ThreadingTCPServer):
    allow_reuse_address = True

httpd = MyTCPServer(('localhost', 8080), CustomHandler)
httpd.allow_reuse_address = True
print "serving at port", 8080
httpd.serve_forever() 
```

试试看：

`HTTP GET /folder/?id=500x`->`"FOLDER ID: 500x"`

**编辑：**

好吧，如果你以前没有使用过 SimpleHTTPServer 的东西，你基本上实现了基本请求处理程序，实现 do_GET()、do_PUT()、do_POST() 等。

然后我通常做的是解析请求字符串（使用re），模式匹配，看看我是否能找到一个请求处理程序，如果没有，如果可能的话，将请求作为对静态内容的请求处理。

你说如果可能的话你想提供静态内容，那么你应该翻转这个模式匹配，首先看看请求是否匹配文件存储，如果不匹配，然后匹配处理程序:)

# java - Android：单击标签打开电子邮件应用程序

> ID：12953547
> 
> 赞同：0
> 
> 时间：2012-10-18T11:26:31.140
> 
> 标签：java, android

```
<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/header"
    android:layout_alignLeft="@+id/button1"
    android:layout_marginBottom="127dp"
    android:text="@string/email"
    android:textColor="#000000"
    android:textSize="12dp"
    android:typeface="sans" /> 
```

我有一个包含我的电子邮件信息的测试视图。如何在单击消息时打开默认电子邮件客户端。

```
<string name="email">E-mail:email@gmail.com</string> 
```

这是我的覆盖方法。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView t2 = (TextView) findViewById(R.id.TextView03);
            email.setOnClickListener(new View.OnClickListener() {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub                
                 }

           });
} 
```

我应该从这里做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:30:36.333

```
Intent i= new Intent(android.content.Intent.ACTION_SEND);
i.setType("plain/text");
i.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"email@email.com"});
i.putExtra(android.content.Intent.EXTRA_SUBJECT, mySubject);
i.putExtra(android.content.Intent.EXTRA_TEXT, myBodyText); 
context.startActivity(Intent.createChooser(i, "Send mail...)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:28:35.163

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.setClassName("com.google.android.gm", "com.google.android.gm.ComposeActivityGmail");
sendIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { "email@gmail.com" });
sendIntent.setData(Uri.parse("email@gmail.com"));
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "enter subject");
sendIntent.setType("plain/text");
sendIntent.putExtra(Intent.EXTRA_TEXT, "Insert text");
startActivity(sendIntent); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-28T21:43:07.247

我知道它很晚了，但只是想分享一些我发现更容易的东西！如果您在文本视图中显示电子邮件，请使用：

```
<TextView
...
android:text="Email: username@gmail.com"
android:autoLink="email"
/> 
```

这将自动在用户手机上打开首选电子邮件应用程序，其中“收件人：”地址预先填写了上述电子邮件 ID。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T11:43:10.750

只需在您的 TextView 上使用 Linkify，

```
TextView t2 = (TextView) findViewById(R.id.TextView03);
t2.setText("E-mail:email@gmail.com");
Linkify.addLinks(t2, Linkify.EMAIL_ADDRESSES); 
```

为此，您的文本视图将将此电子邮件地址显示为超链接，您可以单击并选择适当的提供商以在给定的电子邮件地址上发送电子邮件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T11:33:37.270

试试这个代码：

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.setClassName("com.google.android.gm", "com.google.android.gm.ComposeActivityGmail");
sendIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { "demo@gmail.com" });
sendIntent.setData(Uri.parse("demo@gmail.com"));
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "subject");
sendIntent.setType("plain/text");
sendIntent.putExtra(Intent.EXTRA_TEXT, "Insert text");
startActivity(sendIntent); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T11:36:20.607

不要忘记将文本设置为 android:clickable:"true"

# html - Facebook 见解错误

> ID：12953548
> 
> 赞同：0
> 
> 时间：2012-10-18T11:26:32.780
> 
> 标签：html, facebook, metadata

我曾尝试为客户网站 (http://www.luof.co.uk) 设置 Facebook 洞察力。但是，当我尝试设置它时，它会出现这个

在“fb:app_id”元标记中指定的应用 ID“343,046,272,445,393”无效

我已经将它与源代码进行了匹配，并且ID完全相同。有任何想法吗？

# javascript - 将主题/动态 CSS 应用到页面/任何 HTML 元素

> ID：12953553
> 
> 赞同：1
> 
> 时间：2012-10-18T11:26:55.510
> 
> 标签：javascript, html, css, themes, stylesheet

在某些时候，用户可能会对`Style/Theme`. 他们可能会想，“**只要我能让它看起来像我喜欢的那样**”`WEB applications`

 ****示例**：

*   我自己是 Stack Overflow 的用户。如果我喜欢 Page-headerBar 看起来是蓝色/紫色怎么办
*   页面本身具有黑色背景和白色文本颜色
*   ...

**我的需要**：
不仅要更改类属性，还要更改完整的 CSS 定义本身。
如果我们强制用户从一组样式表中进行选择，那会将他们限制在一个很小的空间内，所以我想避免这种情况。

*** 注意 ***我在纯 javascript 中需要它，不使用任何 jquery 插件或任何 jquery 脚本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:12:15.070

你可以试试它的纯 Javascript

```
<script>
    function applyit()
    {
        var ref = document.querySelector("#divel");
        var bdy = document.getElementsByTagName("body")[0];
        var style = (bdy.querySelector("#thm") || document.createElement("style"));
        style.setAttribute("id","thm");
        var reqCSS = prompt("Enter the CSS Body","color:#AA5533;");
        style.innerHTML = ".cus{"+reqCSS+"}";
        bdy.appendChild(style);
        ref.setAttribute("class","cus");
    }
    </script>
    <style> .def { color:#0000FF; } </style>

<div id="divel" class="def">
  <h3>This is a heading in a div element Which Has The Color Change</h3>
  <p>This is p tag in a div element Which Has The Color Change.</p>
</div>

<p onclick="applyit();">Click Here To Change The Color For Heading and p tag.</p> 
```

注意：我们可以将 User Preferred 样式存储在 browserStorage/Server 中以改善 UserExperience**

# jsf - 将 EL 方法表达式作为自定义 Facelets 标记文件的属性传递

> ID：12953560
> 
> 赞同：2
> 
> 时间：2012-10-18T11:27:17.260
> 
> 标签：jsf, jsf-2, facelets, tagfile, methodexpression

我创建了一个自定义 JSF 标记：

```
<ui:composition>
    <h:panelGroup>
        <rich:dataScroller id="#{id}" for="#{table}" execute="#{table}"
            page="#{scrollerPage}" render="#{table}-sc1" maxPages="5"
            fastControls="hide" oncomplete="#{onCompl}" scrollListener="#{scrollListenerBean[scrollListenerMethod]}" />
        <h:inputText value="#{scrollerPage}" id="#{table}-sc1" size="2">
            <f:convertNumber integerOnly="true" />
        </h:inputText>
        <h:outputText styleClass="outputText"
            value=" of #{scrollPagesCount}  " />
        <h:commandButton value="GO! " />
    </h:panelGroup>
</ui:composition> 
```

为了传递监听器方法，我使用了一个相当古老的[博客](http://digitaljoel.nerd-herders.com/2009/08/25/passing-action-methods-in-facelets-using-array-notation/)中建议的解决方案：

```
<my:dataScroller id="idDS1" table="table1"
                    scrollerPage="#{bean.navigationHelper.scrollerPage}"
                    scrollPagesCount="#{bean.navigationHelper.scrollPagesCount}"
                    onCompl="initForm();" 
                    scrollListenerBean="#{bean}"
                    scrollListenerMethod="aMethod" /> 
```

我的问题是：这是最好的方法吗？如何使该方法可选？

非常感谢您的帮助！再见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:57:38.420

> *我的问题是：这是最好的方法吗？*

无论如何，这是*唯一*的方法，前提是您只能使用标准的 JSF/EL 工具并且不能创建自定义标记处理程序。

但是，您可以创建自定义标记处理程序以将值表达式转换为方法表达式。OmniFaces JSF 实用程序库[正好](http://omnifaces.org)`<o:methodParam>`用于此目的。[另请`<o:methodParam>`](http://showcase.omnifaces.org/taghandlers/methodParam)参阅[演示页面](http://showcase.omnifaces.org/taghandlers/methodParam)。

然后你可能会像这样：

```
<my:dataScroller ... scrollListener="#{bean.aMethod}" /> 
```

和

```
<o:methodParam name="scrollListenerMethod" value="#{scrollListener}" />
<rich:dataScroller ... scrollListener="#{scrollListenerMethod}" /> 
```

### 也可以看看：

*   [动态 ui 包含和命令按钮](https://stackoverflow.com/questions/15002272/dynamic-ui-include-and-commandbutton/)

* * *

> *如何使该方法可选？*

理论上，您可以使用 JSTL 标记有条件地构建视图。就像是：

```
<h:someComponent>
    <c:if test="#{not empty fooAttribute}">
        <f:attribute name="foo" value="#{fooAttriubte}" />
    </c:if>
</h:someComponent> 
```

但不幸的是，在特殊方法表达式侦听器属性的特殊情况下，这是不可能的。没有任何`<rich:scrollListener>`东西可以让您将 RichFaces 特定`scrollListener`作为单独的标签绑定到`<rich:dataScroller>`. 在不创建自定义标记处理程序的情况下，您可以做的最好的事情是将整个复制到`<rich:dataScroller>`两个`<c:if>`s （或 a `<c:choose>`）中；一个有一个没有`scrollListener`。这太笨拙了。您最好`<my:richScrollListener>`为此创建一个自定义标记处理程序，然后您可以将其放置在`<c:if>`.

# extjs - 1对多模型关联

> ID：12953563
> 
> 赞同：0
> 
> 时间：2012-10-18T11:27:34.893
> 
> 标签：extjs, sencha-touch-2

我在使用 Sencha Touch 2 制作一对多模型时遇到问题。

我想保存“人员”并将“待办事项”添加到人员。这些值应保存在本地存储中。

所以 1 个人可以有很多待办事项。

为此，我有 2 个模型和 2 个商店。

人物模型：

```
Ext.define("app.model.PersonModel", {
extend: "Ext.data.Model",
config: {
    idProperty: 'email',
    fields: [
        { name: 'name', type: 'string' },
        { name: 'email', type: 'string' },
    ],
    validations: [
        { type: 'presence', field: 'email' , message: 'Blabla'},
        { type: 'presence', field: 'name' , message: 'Blabla'},
        { type: 'email', field: 'email' , message: 'Blabla'},
    ]
}
}); 
```

待办事项模型：

```
Ext.define("app.model.TodoModel", {
extend: 'Ext.data.Model',
config: {
    idProperty: 'todoId',
    fields: [
        { name: 'todoId', type: 'int' },
        { name: 'email', type: 'string' },
        { name: 'note', type: 'string' }
    ],
    validations: [
        { type: 'presence', field: 'todoId', message: 'Blabla' },
        { type: 'presence', field: 'email', message: 'Blabla' },
        { type: 'presence', field: 'note', message: 'Blabla' }
    ]
}
}); 
```

人物商店：

```
Ext.define("app.store.PersonStore", {
extend: "Ext.data.Store",
requires: "Ext.data.proxy.LocalStorage",
config: {
    model: "app.model.PersonModel",
    proxy: {
        type: 'localstorage',
        id: 'todo-app-personstore'
    },
    sorters: [{ property: 'name', direction: 'ASC'}],
    grouper: {
        sortProperty: "name",
        direction: "ASC",
        groupFn: function (record) {
        }
    }
}
}); 
```

待办商店：

```
Ext.define("app.store.TodoStore", {
extend: "Ext.data.Store",
requires: "Ext.data.proxy.LocalStorage",
config: {
    model: "app.model.TodoModel",
    proxy: {
        type: 'localstorage',
        id: 'todo-app-todostore'
    },
    sorters: [{ property: 'email', direction: 'ASC'}],
    grouper: {
        sortProperty: "email",
        direction: "ASC",
        groupFn: function (record) {
        }
    }
}
}); 
```

我删除了我在模型中建立的关联，因为它们根本不起作用。

也许相关信息：首先我要救一个人。稍后我想保存待办事项并将它们连接到一个人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:22:35.667

尝试参考以下链接可能对您有所帮助

[http://miamicoder.com/2012/sencha-touch-2-models-hasmany-associations-php-example/](http://miamicoder.com/2012/sencha-touch-2-models-hasmany-associations-php-example/)

[http://appointsolutions.com/2012/07/using-model-associations-in-sencha-touch-2-and-ext-js-4/](http://appointsolutions.com/2012/07/using-model-associations-in-sencha-touch-2-and-ext-js-4/)

# xcode - 在IOS6的webview中禁用输入字段的自动缩放

> ID：12953571
> 
> 赞同：0
> 
> 时间：2012-10-18T11:27:50.127
> 
> 标签：xcode, uiwebview

有谁知道是否有可能在 IOS6 的 web 视图中删除输入字段的自动缩放？

我们制作了一个显示在 web 视图中的移动网站，并且在 IOS5 上运行良好，但是当我们尝试在具有固定宽度/高度的 iPad 上打开它时，当输入输入字段时，孔内容会被移动。

对于 IOS5 - 用户可缩放设置为 no 的元标记视口可以完美运行，但在 IOS6 上我会中断。

有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:22:32.053

尝试这个。

```
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1,width=device-width,user-scalable=0"> 
```

这个对我有用。

# sql - SQL 查询的工作方式与预期不同

> ID：12953580
> 
> 赞同：0
> 
> 时间：2012-10-18T11:28:10.177
> 
> 标签：sql, database, plsql, oracle10g

我在理解 sql 语句时遇到问题。当我执行它时（见下文），我只会得到 sgtn_typ 'L' 的人。

```
 SELECT DISTINCT kun_id kid
                ,dep_id
                ,ddg_rang_g RANG
                ,dep_perf_g
                ,TO_CHAR(dep_buchwert + dep_kasse, '999G999G990D99') WERT
                ,kun_name1
                ,Kun_vorname
                ,kun_cust_id
                ,kun_strasse
                ,kun_plz
                ,kun_ort
                ,kun_e_mail
                ,kun_pseudonym
                ,kka_value
   FROM ddg, dep, kun, kat, kka, sgtn
  WHERE dep_spi_id = 245
        AND dep_abr_id = 24
        AND ddg_dgr_id = 3
        AND ddg_abr_id = dep_abr_id
        AND ddg_spi_id = dep_spi_id
        AND ddg_dep_id = dep_id
        AND dep_kun_id = kun_id
        AND kun_aktiv = 'J'
        AND dep_spi_id = kun_spi_id
        AND dep_id IS NOT NULL
        AND dep_id NOT IN (SELECT ddg_dep_id
                             FROM ddg
                            WHERE ddg_spi_id = 245
                                  AND ddg_abr_id = 0
                                  AND ddg_dgr_id = 1)
        AND kun_id = kka_kun_id
        AND kka_spi_id = 245
        AND kat_spi_id = 245
        AND kka_kat_kuerzel = kat_kuerzel
        AND kat_kuerzel = 'NSCH'
        AND kka_spi_id = sgtn_spi_id
        AND kka_kun_id = sgtn_kun_id
        AND sgtn_spi_id = 245
        AND sgtn_e_mail = kun_e_mail
        AND (sgtn_typ = 'L' 
           OR (sgtn_typ = 'T'
              AND sgtn_e_mail NOT IN (SELECT sgtn_e_mail
                                      FROM sgtn
                                      WHERE sgtn_spi_id = 245
                                      AND sgtn_typ = 'L'))
          )
  ORDER BY kun_id, sgtn_typ; 
```

但是当我执行这个时，我得到了 sgtn_typ 'T' 的人：

```
 SELECT *
   FROM sgtn
  WHERE sgtn_spi_id = 245
        AND (sgtn_typ = 'L' 
             OR (sgtn_typ = 'T'
                 AND sgtn_e_mail NOT IN (SELECT sgtn_e_mail
                                         FROM sgtn
                                         WHERE sgtn_spi_id = 245
                                         AND sgtn_typ = 'L'))
 )
  ORDER BY sgtn_kun_id; 
```

我不明白为什么？有人可以给我任何线索吗？我期待着，我用“L”型替换所有人，并得到“T”型的人：

```
 AND (sgtn_typ = 'L'
         OR (sgtn_typ = 'T' 
              AND sgtn_e_mail NOT IN (SELECT sgtn_e_mail
                                     FROM sgtn
                                     WHERE sgtn_spi_id = 245
                                      AND sgtn_typ = 'L'))
       ) 
```

sgtn 表中有“重复”（有些人输入了“T”和“L”）。除此之外，整个记录都是一样的。

表方案如下：

SGTN：

```
SGTN_ID             NUMBER(22)
SGTN_SPI_ID             NUMBER(22)
SGTN_KUN_ID             NUMBER(22)
SGTN_TYP                VARCHAR2(4)
SGTN_GESCHLECHT     VARCHAR2(4)
SGTN_VORNAME        VARCHAR2(160)
SGTN_NAME1              VARCHAR2(240)
SGTN_STRASSE        VARCHAR2(240)
SGTN_PLZ                VARCHAR2(60)
SGTN_ORT                VARCHAR2(240)
SGTN_E_MAIL             VARCHAR2(240)
SGTN_GEB_DAT            DATE(7)
SGTN_KLASSE             VARCHAR2(200)
SGTN_SCHULE             VARCHAR2(200)
SGTN_TELEFON        VARCHAR2(120)
SGTN_KONTONUMMER        VARCHAR2(120) 
```

鲲：

```
KUN_ID          NUMBER(22)
KUN_SPI_ID          NUMBER(22)
KUN_LAN_ID          NUMBER(22)
KUN_MED_KBEZ    VARCHAR2(40)
KUN_NAME1           VARCHAR2(240)
KUN_MKZ         VARCHAR2(80)
KUN_TS          DATE(7)
KUN_AKTIV           VARCHAR2(12)
KUN_KTOINH          VARCHAR2(240)
KUN_BLZ         VARCHAR2(40)
KUN_BANK            VARCHAR2(240)
KUN_KTONR           VARCHAR2(80)
KUN_ZAHLART         VARCHAR2(4)
KUN_NAME2           VARCHAR2(240)
KUN_VORNAME         VARCHAR2(160)
KUN_STRASSE         VARCHAR2(240)
KUN_PLZ         VARCHAR2(60)
KUN_ORT         VARCHAR2(240)
KUN_TEL1            VARCHAR2(120)
KUN_TEL2            VARCHAR2(120)
KUN_FAX         VARCHAR2(120)
KUN_E_MAIL          VARCHAR2(240)
KUN_PSEUDONYM   VARCHAR2(120)
KUN_PWD         VARCHAR2(60)
KUN_CUST_ID         VARCHAR2(240)
KUN_GESCHLECHT  VARCHAR2(4)
KUN_K_NAME          VARCHAR2(80)
KUN_K_NR            NUMBER(22)
KUN_K_VALID         VARCHAR2(40)
KUN_ZUSATZ_1    VARCHAR2(400)
KUN_ZUSATZ_DATUM    DATE(7)
KUN_COMMENT         VARCHAR2(4000)
KUN_EVT_SMS         VARCHAR2(80)
KUN_EVT_E_MAIL  VARCHAR2(240)
KUN_COMMENT2    VARCHAR2(4000)
KUN_AKTIV_BIS   DATE(7)
KUN_FLG_AGB         VARCHAR2(4)
KUN_TITEL           VARCHAR2(200) 
```

提前感谢您提供线索。

问候

R·巴达

# sql - Oracle - 在单列中添加所有值

> ID：12953582
> 
> 赞同：0
> 
> 时间：2012-10-18T11:28:15.943
> 
> 标签：sql, oracle

我正在尝试添加列中的所有值以获得该列的总数，有人知道这个技巧吗？

这是我的查询：

```
select T.*,
sum(nvl(BIN1,0))+sum(nvl(BIN2,0))+sum(nvl((BIN3,0)) as TOTAL
from
(
  SELECT CSM_FLASKS.FLASK_CODE,
    MN_ASSAYS_STAGES.ASSAY_STAGE_ID,
    VITRO_REP.TREATMENT_DOSE(CSM_FLASKS.GROUP_ID)                                               AS TREATMENT_DOSE,
    MN_RI_REP.FLASK_BIN_VALUE_BY_INDEX(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 1) AS BIN1,
    MN_RI_REP.FLASK_BIN_VALUE_BY_INDEX(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 2) AS BIN2,
    MN_RI_REP.FLASK_BIN_VALUE_BY_INDEX(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 3) AS BIN3,
    MN_RI_REP.CBPI_FLASK(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 1, 2, 2)         AS CBPI,
    CSM_EXPERIMENTS.EXPT_CODE
  FROM CSM_TREATMENT_GROUPS_EXPTS
  INNER JOIN CSM_ASSAYS
  ON CSM_ASSAYS.EXPT_ID = CSM_TREATMENT_GROUPS_EXPTS.EXPERIMENT_ID
  INNER JOIN CSM_FLASKS
  ON CSM_TREATMENT_GROUPS_EXPTS.GROUP_ID = CSM_FLASKS.GROUP_ID
  INNER JOIN MN_ASSAYS
  ON CSM_ASSAYS.ASSAY_ID = MN_ASSAYS.ASSAY_ID
  INNER JOIN MN_ASSAYS_STAGES
  ON MN_ASSAYS.MN_ASSAY_ID = MN_ASSAYS_STAGES.MN_ASSAY_ID
  INNER JOIN CSM_EXPERIMENTS
  ON CSM_EXPERIMENTS.EXPT_ID    = CSM_TREATMENT_GROUPS_EXPTS.EXPERIMENT_ID
  AND CSM_EXPERIMENTS.EXPT_ID   = CSM_ASSAYS.EXPT_ID
  WHERE CSM_ASSAYS.ASSAY_ID     = 1000060
  AND MN_ASSAYS_STAGES.STAGE_ID = 2
  ORDER BY CSM_TREATMENT_GROUPS_EXPTS.ORDER_INDEX,
    CSM_FLASKS.FLASK_ID,
    CSM_FLASKS.IS_PLUS DESC
) T 
```

错误：ORA-00937：不是单组组函数 00937。00000 -“不是单组组函数” *原因：
*操作：行错误：1 列：9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:36:07.347

使用任何聚合函数时，您需要将非聚合字段添加到`GROUP BY`子句中。因此，在您的列中，您需要列出子句中聚合函数`SUM`中未列出的那些字段。`GROUP BY`因此，您的查询应如下所示：

```
SELECT FLASK_CODE,
SUM(nvl(BIN1, 0)) + SUM(nvl(BIN2, 0)) + SUM(nvl((BIN3, 0)) AS TOTAL
FROM
(
  ...

) T
GROUP BY FLASK_CODE 
```

这只是一个例子。但是您必须确定要在`SELECT`子句中选择哪些字段，并且也需要在`GROUP BY`子句中列出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T07:58:33.903

试试这个：如果您在单列中添加所有数据意味着：

```
select sum( column_name ) from table inner join .........; 
```

最后你找到总数

# magento - 产品在导入后没有显示在 Magento 的列表中？

> ID：12953584
> 
> 赞同：1
> 
> 时间：2012-10-18T11:28:24.180
> 
> 标签：magento, import, product

![在此处输入图像描述](../Images/1797dd949cae6bc16151479d6167882c.png) 我已经创建了 csv 文件并使用`System -> Import/Export -> Dataflow-Profile`

我发现在`Catalog -> Manage Categories`中`Category Products`，产品正在显示，但在 Manage Products 中没有显示产品。

并且在数据库`catalog_product_flat_1`表中没有该产品的条目，而在其他表中则有该产品的条目

我有重新索引数据并清除缓存但没有解决方案..

请帮助一些人..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T13:09:31.630

`catalog_product_entity_int`如果有任何缺失的记录，应显示检查数据。

管理产品网格集合查询具有以下内部联接：

```
INNER JOIN `catalog_product_entity_int` AS `at_status` ON (`at_status`.`entity_id` = `e`.`entity_id`) AND (`at_status`.`attribute_id` = '96') AND (`at_status`.`store_id` = 0) 
INNER JOIN `catalog_product_entity_int` AS `at_visibility` ON (`at_visibility`.`entity_id` = `e`.`entity_id`) AND (`at_visibility`.`attribute_id` = '102') AND (`at_visibility`.`store_id` = 0) 
```

在您的情况下，似乎没有**产品状态**记录导致`catalog_product_entity_int`产品不在网格中显示，而是显示在**类别产品**中（未检查产品状态）。

问题的根源与状态列（用于导入的 csv 文件）中的值 1 有关。DataFlow 依赖于属性的文本值（启用/禁用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T14:03:56.770

由于产品名称中的特殊字符，它发生在我身上。就我而言，“Crème”这个词制造了所有的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T03:12:17.640

检查您是否将 CSV 文件中的“状态”字段设置为启用或禁用。

在我忘记保存包含在“”中的所有值的 CSV 文件后，这发生在我身上。数据流配置文件导入返回错误。即使在我稍后尝试提供正确的 CSV 之后，所有产品都已从产品网格中消失（但仍保留在与目录相关的产品列表中）

我解决它的方法是创建一个临时产品并填写尽可能多的字段。选择“导出：所有字段”执行数据流配置文件导出

当我获得新的 CSV 文件时，我将新产品的字段与隐藏的字段进行了比较。“状态”字段根本没有价值。它必须是启用或禁用

# .net - 并发读取/编辑文件

> ID：12953588
> 
> 赞同：0
> 
> 时间：2012-10-18T11:28:45.517
> 
> 标签：.net, concurrency, io

我有一个平面文件数据库（一个 xml 文件）。我有一个读取和编辑这个数据库的客户端。我在一个目录中有许多客户端连接到的 xml 文件。如果一个客户端进行编辑，则需要在所有客户端上进行更新。

我不能使用数据库，必须使用这种平面文件结构（即我不能一直运行管理服务器应用程序）

客户端运行 XP 和 .NET

这个问题的现代解决方案是什么？我有一段时间没有进行任何 XP 或 .NET 编码了，简单地使用文件锁会很容易吗？你甚至在 XP 上有单独的读/写锁吗？

**编辑**

客户端都在不同的机器上，数据库存储在网络共享上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:58:32.410

您可以使用[System.Threading.Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)来处理对该文件的读取/编辑访问。在您正在处理或阅读此平面文件的班级中，您应该编写

```
yourMutex.WaitOne();
ReaderOrWrite();
yourMutex.ReleaseMutex(); 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/c41ybyt3%28v=vs.80%29.aspx)找到一个很好的示例代码，它还可以处理没有创建互斥锁的情况。

Mutex 是一种信号量，用于处理对关键区域的多次访问，在您的示例中为 xml 文件，并提供防止关键部分并发执行的解决方案。

# html - :在 CSS 选择器位置不起作用之后

> ID：12953597
> 
> 赞同：-4
> 
> 时间：2012-10-18T11:29:14.403
> 
> 标签：html, css

嗨，

:after 元素的位置有问题。我想落后于 .step-s3 ，不知道为什么不工作。已经尝试使用 position: absolute 和 nothing。任何的想法？

这是[示例](http://jsfiddle.net/DHXGw/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:36:15.147

这应该是你要找的？

```
.steps-s3{
    width: 150px;
    margin-right: 30px;

    font-family: "Play";
    font-weight: bold;
    font-size: 12px;
     color: #787878;
     text-transform: uppercase;

     -webkit-border-top-left-radius: 3px;
    -webkit-border-bottom-left-radius: 3px;
    -moz-border-radius-topleft: 3px;
    -moz-border-radius-bottomleft: 3px;
    border-top-left-radius: 3px;
    border-bottom-left-radius: 3px; 

    height: 30px;
    line-height: 30px;
    padding: 0 9px 0 25px;
    white-space: nowrap;

    border-top: 1px solid #d1d1d1;
    border-bottom: 1px solid #d1d1d1;
    border-left: 1px solid #d1d1d1;

   background: rgb(255,255,255); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(246,246,246,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(246,246,246,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0 ); /* IE6-9 */
}

.steps-s3:after{
    position: relative; 
    display: block;
    z-index: -100;
    left: 144px;
    bottom: 15px;
    content: ' ';

    width: 21px;
    height: 20px;
    background: #ccc;
    -webkit-transform: rotate(-45deg);
    -webkit-transform-origin: 0 0;
    -moz-transform: rotate(-45deg);
    -moz-transform-origin: 0 0;
    -o-transform: rotate(-45deg);
    -o-transform-origin: 0 0;
    -ms-transform: rotate(-45deg);
    -ms-transform-origin: 0 0;
    transform: rotate(-45deg);
    transform-origin: 0 0;

    border-left: 1px solid #d1d1d1;
    border-top: 1px solid #d1d1d1;
    border-right: 1px solid #d1d1d1;
    border-bottom: 1px solid #d1d1d1;

    background: rgb(255,255,255); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(246,246,246,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(246,246,246,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(246,246,246,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0 ); /* IE6-9 */
}
```

```
<div class="steps-s3">Test</div>
```

# ruby-on-rails - has_many 带有参数的条件

> ID：12953600
> 
> 赞同：1
> 
> 时间：2012-10-18T11:29:17.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, conditional-statements, has-many

我有以下型号：

```
Trip -> has_many trip_members & belongs_to user
Trip -> has_many shares
Share -> belongs_to user 
```

在我的旅行模型中，我正在建立这样的关系

```
has_many :shares, :conditions => proc { |user| {:user_id => user.id} } 
```

这样我总是有一个与共享关联的用户。我试图通过在调用 trip.shares(user) 时传入一个用户对象来访问它，但这似乎不起作用。这个传递给 proc 的参数是如何工作的？

另外，这是设置条件的正确方法吗？我想过重写生成的方法（例如 trip.shares<< 等）以包含作为参数传入的用户，但这感觉不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:38:24.900

条件不会改变创建关联对象的行为。它们只限制从数据库查询的结果。

```
trip.shares.create(:user => user) 
```

# c++ - 如何在鼠标点找到 mfc 控件的句柄但处于其他控件之下？

> ID：12953607
> 
> 赞同：1
> 
> 时间：2012-10-18T11:29:31.690
> 
> 标签：c++, winapi, visual-c++, mfc, window

我想在鼠标悬停时找到控制手柄位于其他下方，但它只在上方找到控制（使用`WindowFromPoint`、`ChildWindowFromPoint`等不起作用）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:47:45.350

您可以使用[`GetNextWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633509%28v=vs.85%29.aspx)Win32 API 调用来检索 Z-Order 中位于此窗口下方的下一个窗口。

算法可能是这样的：

1.  获取初始窗口`HWND hwnd = ChildWindowFromPoint(hwndParent, point);`
2.  如果`hwnd`是抢手的窗口则停止
3.  `hwnd = GetNextWindow(hwnd, GW_HWNDNEXT);`
4.  如果`hwnd`包含`point`则转到 2
5.  否则转到 3。

另一种方法 - 只需枚举对话框或视图上的所有控件，将它们的矩形和句柄存储在某个容器中并手动进行点检查。

# javascript - 如何在javascript中更改鱼眼效果中项目之间的边距

> ID：12953611
> 
> 赞同：0
> 
> 时间：2012-10-18T11:29:45.980
> 
> 标签：javascript, html, css

我看到了这个渲染 js 的鱼眼效果，并尝试在网站 HTML 中使用它。它工作正常，但我无法更改项目之间的空间。有谁知道如何改变项目之间的空间？这是 HTML/js 代码：

```
<script type="text/javascript">

    $(document).ready(
        function()
        {
            $('#dock').Fisheye(
                {
                    maxWidth: 50,
                    items: 'a',
                    itemsText: 'span',
                    container: '.dock-container',
                    itemWidth: 75,
                    proximity: 90,
                    halign : 'center'
                }
            )
        }
    );

</script><div id="topbutton-container">
<div style="float:left; width:17px; margin:0px;"><img src="images/topbutton-left.jpg" /></div>
<div id="topbutton" align="center"><div class="dock" id="dock">
  <div class="dock-container">
  <a class="dock-item" href="index.html"><img src="images/home.png" alt="home" /><span>Home</span></a> 
  <a class="dock-item" href="projects.html"><img src="images/projects.png" alt="contact" /><span>Projects</span></a> 
  <a class="dock-item" href="course.html"><img src="images/course.png" alt="portfolio" /><span>Course</span></a> 
  <a class="dock-item" href="testimonial.html"><img src="images/music.png" alt="music" /><span>Testimonial</span></a> 
  <a class="dock-item" href="latest-updates.html"><img src="images/history.png" alt="history" /><span> Latest Updates</span></a> 
  <a class="dock-item" href="contact.html"><img src="images/contact.png" alt="calendar" /><span>Contact</span></a> 
</div>
</div></div>
<div style="float:left; width:17px; margin-top:0px;"><img src="images/tobutton-right.jpg" /></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:38:36.707

你包括所有的支持文件吗？

```
 <script type="text/javascript" src="javascript/jquery.js"></script>
    <script type="text/javascript" src="javascript/interface.js"></script>
    <link type="text/css" href="css/interface-fisheye.css" rel="stylesheet"> 
```

# google-maps - Google Maps API v3 无法在带有 iframe 的隐藏 div 中的 IE 中正确加载，但在所有其他浏览器中完美加载

> ID：12953614
> 
> 赞同：1
> 
> 时间：2012-10-18T11:29:54.523
> 
> 标签：google-maps, google-maps-api-3

好的，我已经到处寻找解决方案。我发现的一切都不太正常。这是一个类似的问题，谷歌地图没有出现在使用 jquery 选项卡的隐藏 div 中。但是，当导航到另一个选项卡并返回 Chrome、Firefox、Opera 和 Safari 时，我可以正确加载地图并保持缩放。

所以我的问题像往常一样是IE。

我设置它的方式是最初隐藏 div，然后显示它并加载到 iframe 中，其中包含地图代码。正如我所说，它在除了 IE 之外的所有设备上都可以正常工作，它在左侧角落加载地图而没有调整大小的能力。我假设这取决于 IE 处理 javascript 的方式。我在这里尝试了很多建议，但在 IE 中都失败了，所以想知道以前是否有人遇到过这个问题以及是否有任何解决方法可用。

下面的代码是初始化地图。对函数的调用是页面中结束 html 标记之后的最后一件事。

然后，当按下 ui.tab 以更改显示的 div 面板时，此页面会通过 iframe 加载到 div 标记中。

任何线索或提示都将受到欢迎。

```
function initialize() {
  var myLatlng = new google.maps.LatLng(50.66416319854267,-1.1316803097724914);

  var myOptions = {
     zoom: 10,
     center: myLatlng,
     mapTypeId: google.maps.MapTypeId.SATELLITE
     }
 var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 

  var marker = new google.maps.Marker({
  draggable: false,
  position: myLatlng, 
  map: map,
  icon: '../images/yellow-pin.png',
  title: ""
  });
  google.maps.event.trigger(map, 'resize'); // added from another forum post does not work
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:02:15.740

这就是典型的隐藏“左上角”问题。

您是否尝试过使用 onload 函数来运行初始化函数？

问题是 iframe 中的 javascript 代码（触发器“resize”）在页面加载时执行，而不是在显示时执行。加载时，div 的大小为零。您需要在 div 显示并具有大小后在地图上触发 resize 功能。

# javascript - 使用 JavaScript 搜索的离线 HTML5 网站

> ID：12953626
> 
> 赞同：1
> 
> 时间：2012-10-18T11:30:46.300
> 
> 标签：javascript, html

我正在构建一个简单的网站，如果需要，它需要能够完全离线运行。旨在成为 50 多页的可搜索参考手册。

我需要在打开一页时缓存整个网站。我正在使用 appcache 清单执行此操作，并且让网站缓存并在离线移动设备上查看似乎工作正常。

该网站有一个基本的 JavaScript 搜索工具（这是一个免费下载软件），并且在在线时这个搜索工作得很好。一旦 Internet 连接停止并使用缓存版本，搜索就不再起作用，显示以下两种症状之一： 1\. 单击按钮但没有任何反应或 2\. 显示“找不到网页”类型的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:42:31.037

引用自[https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache#Gotchas](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache#Gotchas)

> 永远不要使用传统的 GET 参数（如 other-cached-page.html?parameterName=value）访问缓存文件。这将使浏览器绕过缓存并尝试从网络获取它。要链接到具有在 JavaScript 中解析的参数的缓存资源，请使用链接的哈希部分中的参数，例如 other-cached-page.html#whatever?parameterName=value。

但这正是您的 js-search 所做的。它尝试使用 XHR 加载像“http://www.filemanage.co.uk/offline/index.html?1350563635665”这样的子页面。

作为修复尝试这个

```
// change in function sendRequest line 228 from 
this.httpRequest.open("GET", uri+"?"+q, true);
// to
this.httpRequest.open("GET", uri, true); 
```

# java - 如何查看 JTable 中的列标签？

> ID：12953627
> 
> 赞同：1
> 
> 时间：2012-10-18T11:30:48.017
> 
> 标签：java, swing, jtable

我有如下代码：

```
table_1 = new JTable();

table_1.setModel(new DefaultTableModel(
    new Object[][] {
        {null, null, null, null, null, null, null},
    },
    new String[] {
        "Product Code", "Description", "Price", "Quantity", "Total ", "Discount", "Remarks"
    }
)); 
```

我想查看列标题名称。我尝试使用此代码，但看不到名称。我想知道该怎么做？

另外，我还想设置来自`JTextField`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:34:49.027

`table_1`在添加到 a之前，列名不会显示`JScrollPane`，就像在[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中显示的那样。

# git - 如何使用通配符仅在根文件夹中“git add”文件

> ID：12953630
> 
> 赞同：0
> 
> 时间：2012-10-18T11:30:54.060
> 
> 标签：git

我想在项目的根文件夹中添加所有文本文件。

这不起作用：

`$ git add '/*.txt'`

会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:34:34.997

转到项目的根文件夹，然后

```
git add *.txt 
```

> 警告：不适用于 Windows

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:35:48.103

您需要从通配符周围删除引号：

```
git add *.txt 
```

会将当前目录中的所有文本文件添加到 git 暂存区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-27T18:09:26.087

你可以这样做：

```
git add ./*.txt 
```

问候！

# android - android中的覆盖后退按钮仅适用于索引页面

> ID：12953634
> 
> 赞同：1
> 
> 时间：2012-10-18T11:31:10.987
> 
> 标签：android, jakarta-ee, cordova, overriding, back-button

每次用户按下后退按钮时，我都尝试使用 android 中的后退按钮转到主页，并且当用户未登录时，应用程序应该退出。我已经尝试过这种编码，但它只适用于索引页面和其他页面，后退按钮就像它已被禁用一样。我为此应用程序使用phonegap。

$(document).ready(function(){ document.addEventListener("deviceready", onDeviceReady, false);

```
function onDeviceReady() {
document.addEventListener("backbutton", onBackKeyDown, false);

} 
```

}

我在 .js 文件中保留了以下功能。

```
function onBackKeyDown() {
    alert('Back Button!');
    if (window.localStorage.getItem("loggedInData") == "undefined"
            && window.localStorage.getItem("loggedInData") == "") {
        //location.href = 'main.html';
        alert('LoggedIn');

    } else {
        alert('not logged in');
        navigator.app.exitApp();

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:05:21.260

在我对 Phonegap 的简短经验中，我必须在 document.ready 之前调用 onDeviceReady（我知道这没有意义，但它在一个小项目上对我有用）。

此外，如果我根据页面为后退按钮分配不同的功能，我希望在每次重新绑定它们之前先清除它们，如下所示链接 off().on()：

```
$(document).off("deviceready").on("deviceready", PhoneGapReady);
function PhoneGapReady(e) {
    $(document).off("backbutton").on("backbutton", backHandler);
}
function backHandler(e) {
    //back button pressed do something if you like
} 
```

同样在localstorage的if语句中，应该是'or'而不是'and'吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:58:42.393

要使后退按钮适用于应用程序的每个页面，请将以下代码添加到每个 html 页面。

 **```
 $(document).ready(function() {
 $(document).on("deviceready", PhoneGapReady);
 function PhoneGapReady(e) {
document.addEventListener("backbutton", onBackKeyDown, false);
    } 
```* 

}

```
function onBackKeyDown(){
//your codes for back button
} 
```

 *并添加

*`<script>type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"</script>`*

到每一页......当我使用cordova-2.0.0时，我已经使用了它。**

# objective-c - Sqlite3 表主键被替换

> ID：12953638
> 
> 赞同：0
> 
> 时间：2012-10-18T11:31:33.093
> 
> 标签：objective-c, ios, sqlite

我有一个 SQLite 数据库，其中有一个名为 tblUser 的表，其中有变量为 Id、name、image、gender。

在我的应用程序中，我提供了添加、删除更新用户条目的功能（通用功能）。假设我在有 2 个用户的页面上默认有 2 条记录，并且两者都被删除。现在插入的第三条记录将提供主键为 3。

现在，如果我编辑该特定记录，则不会使用新数据更新它，而是在调用以下函数时将其主键替换为 1：

```
+ (void) getInitialDataToDisplay:(NSString *)dbPath
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    //sqlite3_open([dbPath UTF8String], &database);
    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
        const char *sql = "select UserId,UserAge,UserName,UserGender,UserImage from [tblUser]";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK)
        {
            while(sqlite3_step(selectstmt) == SQLITE_ROW)
            {
                NSInteger primaryKey = sqlite3_column_int(selectstmt,0);
                UserDetail *DataObj = [[UserDetail alloc] initWithPrimaryKey:primaryKey];

                DataObj.UserAge = sqlite3_column_int(selectstmt,1);
                DataObj.UserName =    [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
                DataObj.UserGender =   [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];
                DataObj.UserImage =   [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];
                DataObj.isDirty = NO;
                [appDelegate.DataArray addObject:DataObj];
            }
        }
        else
        {
            NSAssert1(0,@"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
        }
    }
    else
        sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory.
} 
```

请注意，当我在单击需要填写所有详细信息的页面的保存按钮后返回显示用户列表的页面时，我正在调用此函数。任何提示都会很有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:06:39.593

假设这`UserId`是一个`INTEGER PRIMARY KEY`: SQLite 将创建比先前最大值大一的新 ID，但如果表为空，它将[（重新）从 1 开始](http://www.sqlite.org/autoinc.html)。

# sql - Oracle SQL Developer 中的 SQL Server 表

> ID：12953643
> 
> 赞同：1
> 
> 时间：2012-10-18T11:31:52.100
> 
> 标签：sql, sql-server, oracle

我将 SQL Server 数据库与 Oracle SQL Developer 3.2.10.09 连接，一切看起来都很好，除了我只能浏览数据，我不能更改表中的数据，不能插入新行或删除行。查询也被禁用（我收到消息：此连接类型不支持查询生成器。）我使用第三方 JDBC 驱动程序 - jtds-1.2.6.jar 作为我与 SQL 服务器的连接。有没有办法更改表中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T07:38:04.757

它帮助我回滚到 Oracle SQL Developer v.3.1.06.82
查询生成器支持 MS SQL Server 表

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-18T11:43:10.597

我只使用 SQL Server Management Studio。你看..当你购买一整套软件时，它附带了编写 SQL 的工具。不用担心，如果您太便宜而无法购买 49 美元/开发人员版的 SQL Server，您仍然可以免费获得 SSMS。

# sql - 查找日期 - SQL

> ID：12953646
> 
> 赞同：-1
> 
> 时间：2012-10-18T11:32:02.903
> 
> 标签：sql, sql-server-2005, netezza

我有以下起止日期，需要使用动态 sql 查询仅列出 netezza 数据库中下面提到的 3 个日期

```
 From      To
20120603    20120831

Required Result:     
20120702
20120703
20120801 
```

是否有可能对 netezza 使用动态 SQL 查询来生成用户指定范围内的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:34:34.777

我不是起诉我理解你的问题，但我认为你想要

```
WHERE From IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:36:43.760

你可以试试类似的东西

```
select * from table where date in (20120702,20120703,20120801) 
```

# python - 从 python/scrapy（python 框架）将数据写入单个 csv 文件中的多个工作表

> ID：12953647
> 
> 赞同：1
> 
> 时间：2012-10-18T11:32:05.820
> 
> 标签：python, csv, scrapy

我正在使用 scrapy 框架并通过创建两个蜘蛛文件从两个 url 获取数据。

现在，例如，当我运行时，抓取`spider1`的`url1`数据将保存到`csv1`文件中，当我运行第二次时`spider2`，数据将保存到`csv2`文件中。

实际上，我要做的是将来自不同蜘蛛的所有数据保存到不同工作表中的单个 csv 文件中（工作表名称应为蜘蛛名称）

```
All about my question is how to write data in to multiple sheets in a single csv file from python 
```

**管道.py**

```
from w3c_browser.items import WCBrowserItem
import csv
from csv import DictWriter
from cStringIO import StringIO
from datetime import datetime
from scrapy.xlib.pydispatch import dispatcher
from scrapy import signals
from scrapy import log

class W3CBrowserPipeline(object):
    def __init__(self):
        dispatcher.connect(self.spider_opened, signal=signals.spider_opened)
        dispatcher.connect(self.spider_closed, signal=signals.spider_closed)
        self.brandCategoryCsv = csv.writer(open('wcbbrowser.csv', 'wb'))

    def spider_opened(self, spider):
        spider.started_on = datetime.now()
        if spider.name == 'browser_statistics':
            log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
            self.brandCategoryCsv = csv.writer(open("csv/%s-%s.csv"% (spider.name,datetime.now().strftime('%d%m%y')), "wb"),
                       delimiter=',', quoting=csv.QUOTE_MINIMAL)
        elif spider.name == 'browser_os':
            log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
            self.brandCategoryCsv = csv.writer(open("csv/%s-%s.csv"% (spider.name,datetime.now().strftime('%d%m%y')), "wb"),
                       delimiter=',', quoting=csv.QUOTE_MINIMAL)
        elif spider.name == 'browser_display':
            log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
            self.brandCategoryCsv = csv.writer(open("csv/%s-%s.csv"% (spider.name,datetime.now().strftime('%d%m%y')), "wb"),
                       delimiter=',', quoting=csv.QUOTE_MINIMAL)

    def process_item(self, item, spider):
        if spider.name == 'browser_statistics':
            self.brandCategoryCsv.writerow([item['year'],
                                            item['internet_explorer'],
                                            item['firefox'],
                                            item['chrome'],
                                            item['safari'],
                                            item['opera'],
            ])
            return item

        elif spider.name == 'browser_os':
            def process_item(self, item, spider):
                self.brandCategoryCsv.writerow([item['year'],
                                                item['vista'],
                                                item['nt'],
                                                item['winxp'],
                                                item['linux'],
                                                item['mac'],
                                                item['mobile'],
                ])
                return item

    def spider_closed(self, spider):
        log.msg("closed spider %s at %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
        work_time = datetime.now() - spider.started_on
        print str(work_time),"Total Time taken by the spider to run>>>>>>>>>>>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:16:07.370

我不知道是否有一个漂亮的内置方法可以使用命令行中的scrapy来做到这一点。但是创建自己的[管道](http://doc.scrapy.org/en/latest/topics/item-pipeline.html)非常简单。管道可以为所有蜘蛛打开同一个文件，并为每个不同的蜘蛛编写不同的工作表。这将需要您自己实现此逻辑。

# java - 垃圾收集事件

> ID：12953649
> 
> 赞同：0
> 
> 时间：2012-10-18T11:32:09.780
> 
> 标签：java, jpa, garbage-collection

我们可以在像我要被垃圾收集时那样的课程中获得事件吗？

让我解释一下事情：

我正在使用**JPA API**来获取数据库对象。所以场景是我们必须打开**EntityManager**，**调用各自的东西**并**在离开之前关闭它。**

但是，如果无意中有人忘记关闭实体管理器，那么对同一数据库的所有查询都会给出以前未更新的结果。:(

我的观点是无论如何我都会遇到类似你将被破坏的事件，在这种情况下，我将编写**this.entitymanager.close()**的代码，这样每次**实体管理器**对象**在用户忘记时自行关闭时下次垃圾收集器来收集它时关闭**。

我知道析构函数是不可能的，但是处理这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:36:25.117

也许这会对您有所帮助；

```
@Override
protected void finalize() {
    try {
        close();        // close EntityManager connection
    } finally {
        super.finalize();
    }
} 
```

在为垃圾收集计划对象时调用 Finalize。

# tfs - 团队服务器基础VS2010在任务完成分配给测试人员时设置工作流

> ID：12953655
> 
> 赞同：0
> 
> 时间：2012-10-18T11:32:28.230
> 
> 标签：tfs, tfs-workitem, tfs-2010

我对整个团队服务器基础非常陌生，我希望你们能指出我正确的方向。

我已经成功地将一个项目从 Microsoft Project 2010 导入到我的 VS 2010 tfs 中。到目前为止一切都很好。

我只是想知道是否可以让开发人员完成的任务发送通知并将测试任务分配给测试人员。

换句话说：

1.  开发者完成了他/她的任务。
2.  开发者将 TFS 中的任务更新为“已完成”</li>
3.  任务被分配给测试人员进行测试。
4.  通知发送给他/她必须测试的新任务的测试人员。

这是可能的还是我必须手动将开发人员完成的任务分配给测试人员进行测试？或者是否可以将 TFS 设置为自动执行此操作？

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:46:14.340

您可以更新工作项背后的规则引擎。但是你怎么知道测试者呢？我看到两个解决方案。

1.  创建一个包含测试人员的新字段。当状态设置为已解决时，该字段的值将复制到 AssignedTo。
2.  不要使用测试人员的名称，而是在状态更改为已解决时将活动更改为测试。

无论哪种方式，您都可以设置工作项警报以获得通知。

资源：
[定义工作项字段](http://msdn.microsoft.com/en-us/library/dd695793.aspx)
[定义和自定义工作项工作流](http://msdn.microsoft.com/en-us/library/ms243889.aspx)
[设置个人或团队警报](http://msdn.microsoft.com/en-us/library/ms181334.aspx)
[配置电子邮件通知并指定 SMTP 服务器](http://msdn.microsoft.com/en-us/library/ms400808.aspx)

# jquery - ElFinder - 禁用目录的拖放

> ID：12953656
> 
> 赞同：1
> 
> 时间：2012-10-18T11:32:29.463
> 
> 标签：jquery, drag-and-drop

有谁知道如何禁用 ElFinder 2.x 的拖放功能？据我所知，这不能通过初始化参数来控制（请随时仔细检查），但我们已经删除了 tree.js 中的一些代码，这些代码负责文件的拖放：

来自 tree.js：

```
/**
         * Navigation tree
         *
         * @type JQuery
         */
        tree = $(this).addClass(treeclass)
            // make dirs draggable and toggle hover class

            /* DISABLE DRAGGABLE
            .delegate('.'+navdir, 'hover', function(e) {
                var link  = $(this), 
                    enter = e.type == 'mouseenter';

                if (!link.is('.'+dropover+' ,.'+disabled)) {
                    enter && !link.is('.'+root+',.'+draggable+',.elfinder-na,.elfinder-wo') && link.draggable(fm.draggable);
                    link.toggleClass(hover, enter);
                }
            })*/

            // add/remove dropover css class
            .delegate('.'+navdir, 'dropover dropout drop', function(e) {
                $(this)[e.type == 'dropover' ? 'addClass' : 'removeClass'](dropover+' '+hover);
            })
            // open dir or open subfolders in tree
            .delegate('.'+navdir, 'click', function(e) {
                var link = $(

 ...... // rest of code ommitted 
```

这禁用了文件拖放，但不是文件夹。为此，我在 cwd.js 中注释掉了另一个委托，但这破坏了打开文件夹的双击事件 - 所以我现在正在解决这个问题。如果有人有更好的解决方案，请随时分享。

在 cwd.js 的第 670 行注释掉以下内容：

```
.delegate(fileSelector, 'mouseenter.'+fm.namespace, function(e) {
            var $this = $(this),
            target = list ? $this : $this.children();

            if (!$this.is('.'+clTmp) && !target.is('.'+clDraggable+',.'+clDisabled)) {
            target.draggable(fm.draggable); 
            }
            }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:18:59.093

终于找到答案了，想想自己花了多长时间才解出来，真是太容易了。

只需在 elFinder.js 中找到 Draggable 选项（大约第 465 行）。将 appendTo 参数从“body”删除到“”（空），就完成了。

查看此博客文章了解更多详细信息以及如何保留可拖动功能但停止实际可放置事件：[http ://blog.degree.no/2012/10/disable-drag-and-drop-in-elfinder-2 -X/](http://blog.degree.no/2012/10/disable-drag-and-drop-in-elfinder-2-x/)

# c# - 如何为不同的数据源实现数据映射器/存储库持久性模式？

> ID：12953660
> 
> 赞同：4
> 
> 时间：2012-10-18T11:32:38.883
> 
> 标签：c#, model-view-controller, design-patterns, data-access-layer, datamapper

我正在从头开始编写一个新的网站项目。该项目是 C#，但我的背景是 PHP（下面的伪代码有点混合，试图既简洁又具有声明性）。

**问题**

我需要从两个地方之一检索配置数据——有时来自本地数据库，有时来自 Soap 服务。我应该能够从任一源创建相同的模型对象集。

数据以完全不同的结构存储在不同的数据源中——几个不同的 Soap 响应需要从 Soap 端拼凑在一起，而 DB 结构更接近于我在代码中构建模型对象的方式。

配置由对象树组成：*产品*包含*属性*，其中包含*选项*，这些选项在应用时具有*条件*。

**目标**

我想尽可能地分离关注点（希望有利于测试/维护/扩展能力）：

*   我的模型对象应该对数据持久性或检索一无所知
*   Data Persistence 对象应尽可能与数据源的确切类型无关
*   我想尽可能地将对象创建分开。

**问题**

我知道围绕这一点的各种设计模式（尽管我不完全确定我完全理解它们）。我[在 Programmers 上问了一个](https://softwareengineering.stackexchange.com/questions/170295/how-should-i-architect-my-model-and-data-access-layer-objects-in-my-website/170297)与此类似的问题，并得到了关于[Persistence Ignorance](https://stackoverflow.com/questions/1974735/what-exactly-is-persistence-ignorance)（[更多此处](https://stackoverflow.com/questions/905498/what-are-the-benefits-of-persistence-ignorance)）和[Repository](http://msdn.microsoft.com/en-us/library/ff649690.aspx)模式的回复，这两个似乎都是来自 Microsoft 世界的概念。

据我所知，“持久性无知”只是让模型对象对您的数据存储机制一无所知的概念，并且存储库模式似乎与数据映射器模式非常相似，除了它[可能更像是一个门面](https://stackoverflow.com/questions/804751/what-is-the-difference-between-the-data-mapper-table-data-gateway-gateway-da#answer-814479)，隐藏更多实际发生的事情。

所以我的问题是：

*在数据映射器模式中，每个模型对象应该有一个映射器吗？而不是为整个配置树设置一个？*

因此，我是否应该有一个使用所有这些 Mapper 对象的配置树构建对象？

```
class ConfigBuilder() {
    public ConfigBuilder (productMapper, propertyMapper, optionMapper, conditionMapper) {
        // save them into local properties
    }

    public Products() {
       var products = productMapper.FetchAll();

       foreach (var product in products) {
           AddProperties(product);
       }

        return products;
    }

    private AddProperties(products) { /* ... */ }
    private AddOptions(property) { /* ... */ }
    private AddConditions(option) { /* ... */ }
} 
```

这似乎是一个很好的解决方案？

*构建对象的逻辑应该放在哪里？*

在某些时候，需要大量的逻辑来从我从 Soap 服务返回的 XML 数据的随机数组构建我的配置对象，并且需要少量的逻辑来从数据库中做同样的事情。

我应该将构建对象的逻辑放在 Mapper 对象的单独实例中吗？

```
interface IProductMapper { FetchAll; FetchByCode; Create; Delete; Update  }

class ProductMapperXml implements IProductMapper {
    public ProductMapperXml(xmlDataSource) {}
    public FetchAll() { /* A whole bunch of logic to create the Product objects from XML data source */ }
}

class ProductMapperDatabase implements IProductMapper {
    public ProductMapperDatabase(databaseConnection) {}
    public FetchAll() { /* Select and build products from the database */ }
} 
```

这个可以吗？是否应该进一步抽象这个逻辑？如果是，为什么？另外，我对`ProductMapperXml`对象本身具有相当大的逻辑并且还负责在`Product`内部创建对象感到有些不安。我应该以`ProductFactory`某种方式传递它吗？还是只使用工厂方法？

请让我知道是否有比我的建议更优雅的方法来解决这个问题？此外，如果我错过了任何抽象层或设计模式，我可以从中受益吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:20:12.427

由于没有答案，我将自己写下来。

我确实最终采用了这种`DataMapper`模式 - 我希望我以一种明智的方式实现它。

我最终没有使用任何 Factory 类，因为我能够通过这些类本身来构建树。

我创建了一堆 Mapper 接口：

```
interface Models.Interfaces.IModel {}
interface Mappers.Interfaces.IMapper {}
interface Mappers.Interfaces.IDatabaseMapper : IMapper {}
interface Mappers.Interfaces.IXmlMapper : IMapper {} 
```

我为所有东西创建了模型：

```
class Models.Product : IModel {}
class Models.Property : IModel {}
class Models.Option : IModel {}
class Models.Condition : IModel {} 
```

然后我给每个模型两个映射器类：

```
class Mappers.ProductDatabaseMapper : IDatabaseMapper {}
class Mappers.ProductXmlMapper : IXmlMapper {}
/* ... (same for each model) */ 
```

每个 Mapper 类都有创建子类的方法：

```
class ProductDatabaseMapper :IDatabaseMapper {
    public List<Product> FetchAllWithChildren {
        var productRows = DbManager.FetchAll("Product");
        var products = List<Product>();

        foreach(var productRow in productRows) {
            var product = new Product(productRow["Name"]);
            product.Properties = PropertyManagerInstance.FetchAllWithChildren(product);
            products.Add(product):
        }

        return products;
    }
} 
```

我认为这提供了一个相当简洁的解决方案。尽管我仍然有点担心我的各个`Mapper`类都在自己创建对象这一事实。但我认为我只会在必要时将其分离到工厂中。

# c - 将 ASCII 码转换为字符值

> ID：12953665
> 
> 赞同：1
> 
> 时间：2012-10-18T11:33:08.690
> 
> 标签：c, character, ascii

我刚刚开始学习如何用 C 编程，我正在尝试制作一个接受数字并将其用作 ASCII 值以返回与该值关联的 ASCII 字符的程序。

该程序在预定义参数时工作，但是当我引入 scanf 函数时，它会编译但不会给我相同的结果。

这是我的代码：

```
#include <stdio.h>

int main(void) 
{
    question2();
    return 0; 
}

int question2(void)
{

    int myInt = 65;

    scanf("%d", myInt);
    char ch = myInt;

    printf("%c",ch);

    return 0;
} 
```

干杯，感谢任何帮助家伙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:34:29.187

您需要传递 to 的地址*（*编译器应该为此发出警告）：`myInt``scanf()`

```
scanf("%d", &myInt); 
```

您还应该检查 的返回值`scanf()`以确保`myInt`实际分配给。`scanf()`返回所做的分配数量，在这种情况下预计为`1`：

```
if (1 == scanf("%d", &myInt))
{
} 
```

请注意，`int`它的范围值比 a 更大，`char`因此您应该检查存储在其中的值`myInt`是否*适合*a `char`。标头中定义了`limits.h`可用于检查的宏：

```
if (1 == scanf("%d", &myInt))
{
    if (myInt >= CHAR_MIN && myInt <= CHAR_MAX)
    {
        printf("%c\n", (char) myInt);
    }
    else
    {
        printf("%d out-of-range: min=%d, max=%d\n",
            myInt, CHAR_MIN, CHAR_MAX);
    }
} 
```

*编译器*还应该针对`question2()`. 要更正，请将 的定义`question2()`或声明放在`question2()`之前`main()`。

# iphone - 我可以检测导入的 ALAsset 照片是否是通过屏幕截图拍摄的吗？

> ID：12953669
> 
> 赞同：5
> 
> 时间：2012-10-18T11:33:25.890
> 
> 标签：iphone, objective-c, ios, alassetslibrary

我有一个`imagePickerController`用于将照片从库中导入我的应用程序。

在 中`ALAssetsLibraryAssetForURLResultBlock`，我试图找出我在块中获得的 ALAsset 是作为屏幕截图拍摄的照片，还是由相机拍摄的“真实”照片。

我试图浏览 ALAsset 的元数据字典，但找不到任何可能适合的标志/指示。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T06:59:34.107

对于屏幕截图，它的 UTI 总是一个“public.png”并且与屏幕大小相同（确保您在屏幕边界宽度和高度上乘以 [UIScreen scale]），只需检查这两个元数据，您就可以轻松识别屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:00:14.023

将**MetaData**添加到**UIImage**同时**保存到 Photo Library**。UIImage 的相同元数据可用于了解其是否截图。

请参阅[Save_Photo_to_Album_with_Metadata](http://docs.xamarin.com/ios/recipes/Media/Video_and_Photos/Save_Photo_to_Album_with_Metadata)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:54:13.293

好吧，我正在研究和试验.. 我找到的最接近的解决方案是基于 iPhone 屏幕截图不会产生 EXIF 记录（而所有其他生成的照片都会生成它们）的事实。

因此，一旦在选择器中选择了一张照片，我就会检查照片的元数据是否包含 EXIF 记录，如果不包含 - 我断定照片是屏幕截图。

我发现它是目前“尽可能好”的解决方案，尽管它不是官方解决方案。

干杯。

# sql - 如何在 SQL 存储过程中获取和遍历二维列表（我猜是使用 foreach）

> ID：12953671
> 
> 赞同：0
> 
> 时间：2012-10-18T11:33:28.050
> 
> 标签：sql, sql-server-2008, stored-procedures

我想要一个存储过程，它将以下结果放入一个列表中，然后我可以遍历我在存储过程中声明的每个列表项，

首先，我将使用此语句进行列，

```
SELECT ColumnA, ColumnB 
FROM MyTable   // Save it into a two dimensional array or dictionary I guess 
```

然后需要在存储过程中为每个查询做另一个查询`columnA`，`columnB`并取回一个值列表`columnC`

```
if exists (
    SELECT ColumnC FROM Table2 
    Where ColumnA = //@ColumnA[i] or something  
    AND SchemeID = //@ColumnB[i] or something)
//then add ColumnC value to a list
else
continue 
```

我是 SQL 新手，但一直在研究 C#，所以不知道如何制作这个存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:35:21.653

您可以将表中的数据插入到临时表中，然后写入游标，但在 SQL 中这样做并不好。
我建议你描述你想在存储过程结束时得到什么。

```
SELECT T2.ColumnC 
FROM Table2 as T2
where
    exists
    (
       select *
       from Table as T1
       where T1.ColumnA = T2.ColumnA and T1.ColumnB = T2.SchemeID
    ) 
```

# security - 通过字符识别 txt 文件，并在其内容中相互对应的位置

> ID：12953672
> 
> 赞同：0
> 
> 时间：2012-10-18T11:33:30.430
> 
> 标签：security, text, batch-file, fingerprint

我想制作一个批处理文件，它可以不是通过名称而是通过其内容更好地找到特定的文本文件，但不是通过其全部内容而是通过它的选定部分。

例如，如果我有一个包含内容的 txt 文件

汤姆迪克和哈利

我希望我的批处理文件计算一下，如果 txt 文件中的任何地方都有一行包含 T 并且如果从该字母开始的 7 个字符是 K 并且从该字母开始的两个字符是 A 则文件被识别作为我的文件，它被删除了。

也许更好地解释为批处理文件可以找到“指纹”，这样其他人可以重命名我的 txt 文件，但我仍然会找到它……</p>

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:12:54.227

您可以使用`findstr`

```
for /f "delims=*" %%f in ('"findstr /r /m /c:T.......K..A *.FILEEXT"') do (
    del "%%f"
) 
```

# jquery-mobile - Symfony 和 JQueryMobile 内容加载

> ID：12953675
> 
> 赞同：2
> 
> 时间：2012-10-18T11:33:37.287
> 
> 标签：jquery-mobile, symfony

我用 symfony2 和 jqueryMobile 开发了一个移动网站

我以可折叠的方式加载列表视图，但得到了类似图像中的响应![在此处输入图像描述](../Images/d2896f2c1eb3db9255581f944c3c5017.png)

这是我在第一页的代码

```
{% block content %}
<h4>Les Categories</h4>

<div data-role="collapsible-set" data-theme="b" data-content-theme="d" class="ui-collapsible-set">
{% for Categorie in Categories %}
    <div data-role="collapsible" data-collapsed="true" class="info" data-record="{{Categorie.id}}"> 
        <h1>{{ Categorie.Libelle }}</h1> 
        <p class="catdetail">

        </p>
    </div>
{% endfor %}
</div>
    <script>
    $('div.info').live('expand', function(){
        //get the ID for this record
        var record = $(this).data("record");
        console.log('expanded '+record);
        $(".catdetail", this).load("{{ path('Ecommerceboutique_mobile')}}dscat/"+record);
    });
</script> 
```

{% 端块 %}

这里是可折叠加载的第二页

```
<ul data-role="listview" class="ui-listview">
{% for souscategorie in souscategories %}
    <li>
        <a href="{{ path('Ecommerceboutique_mobile_lstprdsouscat', { 'id': souscategorie.id })}}">
            {{souscategorie.Libelle}}
        </a>
    </li>
{% endfor %} 
```

* * *

## 编辑

我将脚本添加到第二页但仍然是同样的问题

```
<script>
$(function() {
    $('.selector').listview('refresh');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:19:30.043

拉出列表视图后，可能会刷新它

```
$(".catdetail", this).load("{{ path('Ecommerceboutique_mobile')}}dscat/"+record).listview('refresh'); 
```

jQM 文档：

*   [http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:09:05.767

我解决了这个问题

```
 {% for souscategorie in souscategories %}
    <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c">
        <div class="ui-btn-inner ui-li">
            <div class="ui-btn-text">
                <a href="{{ path('Ecommerceboutique_mobile_lstprdsouscat', { 'id': souscategorie.id })}}" class="ui-link-inherit">
                    {{souscategorie.Libelle}}
                </a>
            </div>
            <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
        </div>
    </li>
{% endfor %} 
```

感谢菲尔的帮助

# asp.net-mvc-4 - 无法解析区域中站点地图节点的 URL

> ID：12953680
> 
> 赞同：1
> 
> 时间：2012-10-18T11:34:06.187
> 
> 标签：asp.net-mvc-4, sitemap, mvcsitemapprovider

在互联网上搜索[我发现了一个类似的问题](https://stackoverflow.com/questions/9643397/mvcsitemapprovider-preserved-route-parameter-gives-error-could-not-resolve-url)，但我的问题只发生在项目其他区域的节点上。

**错误**

> 无法解析站点地图节点 Carta de Interveniência 的 URL，它表示控制器进程中的操作 carta_interveniencia。确保可以解析此站点地图节点的路由，并且其默认值允许解析当前站点地图节点的 URL。

**网站地图**

```
<mvcSiteMapNode title="Cadastros" clickable="false" roles="*" >

    <mvcSiteMapNode title="Processos" controller="processos" action="index">
        <mvcSiteMapNode title="Novo" action="novo" />
        <mvcSiteMapNode title="Editar" action="editar" dynamicNodeProvider="CreditoImobiliarioBB.Web.Infra.Sitemap.ProcessosDynamicNodeProvider, CreditoImobiliarioBB.Web" />
        <mvcSiteMapNode title="Detalhes" action="detalhes" preservedRouteParameters="id" dynamicNodeProvider="CreditoImobiliarioBB.Web.Infra.Sitemap.ProcessosDynamicNodeProvider, CreditoImobiliarioBB.Web">
            <mvcSiteMapNode title="Documentos" key="ProcessoDocumentos2" clickable="false" area="Documentos" controller="processo">
                <mvcSiteMapNode title="Carta de Interveniência" preservedRouteParameters="id" action="carta_interveniencia"></mvcSiteMapNode>
            </mvcSiteMapNode>
        </mvcSiteMapNode>

    </mvcSiteMapNode> 
```

**区域登记**

```
public class DocumentosAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Documentos";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            name: "Documentos",
            url: "{controller}/{id}/documento/{action}",
            defaults: null,
            constraints: new { id = @"^\d+$" },
            namespaces: new string[] { "CreditoImobiliarioBB.Web.Areas.Documentos" }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:36:44.677

解析器的默认实现以这种方式运行。它会尝试根据您在站点地图中的确切内容来定位路线。由于您的站点地图没有 id 参数并且您对此有限制，因此找不到路由并且解析器会引发异常。但是，解析器在加载站点地图时没有真正的理由必须解析每个 URL。

您可以创建自己的解析器并将其注册到站点地图。将默认的复制并粘贴到您自己的类中。默认代码底部附近是这样的：

```
if (string.IsNullOrEmpty(returnValue))
{
    throw new UrlResolverException(string.Format(Messages.CouldNotResolve, mvcSiteMapNode.Title, action, controller, mvcSiteMapNode.Route ?? ""));
}

 _urlkey = key;
_url = returnValue;
return returnValue; 
```

将该代码更改为：

```
if (string.IsNullOrEmpty(returnValue))
{
    return Guid.NewGuid().ToString();
}

 _urlkey = key;
_url = returnValue;
return returnValue; 
```

# php - facebook->api('/me') 在本地主机上不起作用。

> ID：12953681
> 
> 赞同：0
> 
> 时间：2012-10-18T11:34:06.633
> 
> 标签：php, facebook, facebook-javascript-sdk

```
<?php

require 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';

define('APP_ID', '******************');
define('APP_SECRET', '***********************');

$facebook = new Facebook(array(
            'appId' => '******************',
            'secret' => '***********************',
            'cookie' => true
        ));

$session = $facebook->getSession();

if (!empty($session)) {
    # Active session, let's try getting the user id (getUser()) and user info (api->('/me'))
    try {

        $uid = $facebook->getUser();
        print_r($uid);
        $user = $facebook->api('/me');
        facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false; 
        facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYHOST] = 2;
    } catch (Exception $e) {

    }

    if ($user) {
        # User info ok? Let's print it (Here we will be adding the login and registering routines)
        echo '<pre>';
        print_r($user);
        echo '</pre><br/>';
        $username = $user['name'];
        $user = new User();
        $userdata = $user->checkUser($uid, 'facebook', $username);
        if(!empty($userdata)){
            session_start();
            $_SESSION['id'] = $userdata['id'];
 $_SESSION['oauth_id'] = $uid;

            $_SESSION['username'] = $userdata['username'];
            $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
            header("Location: home.php");
        }
    } else {
        # For testing purposes, if there was an error, let's kill the script

        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
   // $login_url = $facebook->getLoginUrl();
     $loginUrl = $facebook->getLoginUrl( array(
                           'canvas'    => 1,
                           'fbconnect' => 0,
                           'req_perms' => 'email,publish_stream',
                       'next' => 'http://localhost/login_twitbook/',
                              'cancel_url' => 'http://localhost/login_twitbook/'
                      ) );
    header("Location: " . $login_url);
}
?> 
```

$user = $facebook->api('/me'); 不能正常工作它总是什么都不返回。请帮我解决这个问题。我正在处理 localhost.$uid = $facebook->getUser() 它返回值但 $user 不返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:47:24.447

尝试更改 base_facebook.php 文件中的 getCode 函数，将所有 $_REQUEST 更改为 $_GET。不知道为什么这个问题还没有解决，但我一直在努力弄清楚为什么在我这样做之前它会为用户返回 0，现在它可以完美地工作了。

应该在文件的第 680 行或附近，并且有 4 个要更改。

```
 protected function getCode() {
if (isset($_GET['code'])) {
  if ($this->state !== null &&
      isset($_GET['state']) &&
      $this->state === $_GET['state']) {

    // CSRF state has done its job, so clear it
    $this->state = null;
    $this->clearPersistentData('state');
    return $_GET['code'];
  } else {
    self::errorLog('CSRF state token does not match one provided.');
    return false;
  }
}

return false; 
```

}

# python - Windows文件路径中的反斜杠？

> ID：12953683
> 
> 赞同：4
> 
> 时间：2012-10-18T11:34:06.880
> 
> 标签：python, windows

在 Windows 的 Python 中将字符串设置为文件路径时，是否需要将其格式化为：

```
C:\\Users\\ 
```

还是转义不适用于 Windows？我的脚本目前在行中给了我类似“非 ASCII 字符”的东西`import os`，所以我无法真正测试它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:37:36.307

尝试添加一个“r”，如下所示：

```
path = r"C:\mypaht\morepaht\myfie.file" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:48:40.127

**简短回答：**按照 gnibbler 的建议使用正斜杠。

**关于使用原始字符串：**

使用原始字符串*通常*可以正常工作，但您仍然必须注意`r"\""`转义 quoute char。也就是说，原始字符串不是绝对原始的，这就是为什么您不能在字符串末尾使用反斜杠（或任何奇数个反斜杠）的原因`'\'`（反斜杠会转义下面的引号字符）。

```
In [9]: a=r'\\'

In [10]: b=r'\\\'
  File "<ipython-input-10-9f86439e68a3>", line 1
    b=r'\\\'
             ^
SyntaxError: EOL while scanning string literal

In [11]: a
Out[11]: '\\\\' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T12:24:11.993

您不应该以这种方式构造文件路径。它不便携且容易出错。

使用[join()](http://docs.python.org/library/os.path.html#os.path.join)函数 `os.path`

```
import os.path
path = os.path.join('C:', 'Users', 'name') 
```

# java - 一个线程中的异常/错误可以停止整个应用程序吗？

> ID：12953687
> 
> 赞同：5
> 
> 时间：2012-10-18T11:34:15.460
> 
> 标签：java, multithreading, exception, error-handling

如果在线程（不是主线程）中抛出错误/异常，这可以停止整个应用程序吗？

有这种可能吗？或者这会停止它正在运行的线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:36:39.783

> 如果在线程（不是主线程）中抛出错误/异常，这可以停止整个应用程序吗？

如果它导致唯一的非守护线程从`run()`

如果有其他非守护线程在运行，或者异常或错误被捕获和处理，应用程序将继续运行。

> 这会停止它正在运行的线程吗？

如果异常或错误被捕获并处理，它可能不会停止任何线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:39:47.557

除了 Peter Lawrey 的回答之外，还有一种情况是未处理的异常会导致应用程序冻结：如果死线程已经抓住了程序其他线程所需的一些锁。

# eclipse - 使用 GWT 在其本机程序中打开文件

> ID：12953688
> 
> 赞同：1
> 
> 时间：2012-10-18T11:34:24.773
> 
> 标签：eclipse, gwt

我想将我的 Web 应用程序中可用**的文件打开到****PC 中**相应的本机应用程序。我已经创建了一组程序来从 Web 应用程序下载文件，但不知道如何设置这些文件以在系统中使用本机应用程序打开。请帮助我。如果您有任何其他选项可以使用而不是下载和显示文件，请建议我。

**注意：**我正在使用 eclipse 开发 web 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:04:09.817

此问题与 GWT 无关。只需提供指向您应用中文件的链接。当用户单击链接时，用户的浏览器/PC 将决定如何处理文件。它要么在浏览器中打开文件（PDF、图像、一些视频和音乐文件，具体取决于浏览器），要么提供保存。

# php - 使用 PHP 浏览 .htpasswd 受保护的文件夹

> ID：12953689
> 
> 赞同：-1
> 
> 时间：2012-10-18T11:34:24.617
> 
> 标签：php, login, .htpasswd

场景是我想在我的 Web 应用程序中实现单点登录过程，目前我使用 .htpasswd 保护了几个文件夹

现在，当用户登录系统时，我希望他们也可以访问那些受保护的文件夹，而不会被浏览器再次询问用户名和密码

有没有办法做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:40:35.023

据我所知，没有这样的解决方案。您应该使用 PHP 的 SESSIONS 和登录界面来控制用户的访问，而不是 .htpasswd 。

或者，您可以在未受保护的文件夹中创建一个文件，并在该文件中包含 protectedfolder/protected-file.php 并让用户在不提示输入密码的情况下访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:41:17.427

除非您的所有用户都存在于 .htpasswd 文件中，并且您的 Web 应用程序使用相同的域和身份验证类型（基本 || 摘要），否则您将无法让用户直接访问受保护文件夹中的文件。因为当使用 http auth 来保护文件夹时，用户名/密码会在每个请求上发送。

您可以编写受保护文件夹之外的代码来处理身份验证，然后用于`fpassthru`将文件发回。

# java - Java GAE :: 错误：“权限被拒绝：不允许发出套接字连接：权限被拒绝..

> ID：12953690
> 
> 赞同：0
> 
> 时间：2012-10-18T11:34:24.840
> 
> 标签：java, sql-server-2008, google-app-engine

将应用程序作为 Web 应用程序运行时出现错误，但是当我作为 Java 应用程序运行时，相同的文件运行良好。让我更详细地解释一下这是当我作为 Java 应用程序运行时的代码工作完美

```
 package com.gst.user.dao.impl;
import java.sql.CallableStatement;
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;

public class Sqldbconnect {

    public static void main(String[] argv) throws SQLException {

        System.out.println("-------- SQL JDBC Connection Testing ------");

        try {

            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

        } catch (ClassNotFoundException e) {

            System.out.println("Where is your mysql jdbc Driver?");
            e.printStackTrace();
            return;

        }

        System.out.println("Mysql JDBC Driver Registered!");

        Connection connection = null;

        try {

            connection = DriverManager.getConnection(
                    "jdbc:sqlserver://Idatabase:65535;DatabaseName=Data_Base", "DUser","DPass");

        } catch (SQLException e) {

            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return;

        }

        if (connection != null) {
            System.out.println("You made it!");
            connection.close();
        } else {
            System.out.println("Failed to make connection!");
        }
    }

} 
```

但是如果我尝试作为 Web 应用程序运行，几乎相同的东西和相同的包中会抛出异常。这是代码

```
package com.gst.user.dao.impl;

import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.gst.user.dao.CallSPDao;

public class CallSPDaoImpl implements CallSPDao {

    @Override
    public void callSPDao() throws SQLException {
        // TODO Auto-generated method stub
        System.out.println("Calling Stored processor Begins");

        System.out.println("-------- SQL JDBC Connection Testing ------");

        try {

            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

        } catch (ClassNotFoundException e) {

            System.out.println("Where is your mysql jdbc Driver?");
            e.printStackTrace();
            return;

        }

        System.out.println("Mysql JDBC Driver Registered!");

        Connection connection = null;

        try {

            connection = DriverManager.getConnection(
                    "jdbc:sqlserver://Idatabase:65535;DatabaseName=Data_Base", "DUser","DPass");
                //  
        } catch (SQLException e) {

            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return;

        }

        if (connection != null) {
            System.out.println("You made it!");
            connection.close();
        } else {
            System.out.println("Failed to make connection!");
        }
    }

    } 
```

例外是::

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host IL93SQLF031, port 65535 has failed. Error: "Permission denied: Not allowed to issue a socket connect: permission denied.. Verify the connection properties, check that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port, and that no firewall is blocking TCP connections to the port.".
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:170)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1049)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:833)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:716)
at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:841)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at com.gst.user.dao.impl.CallSPDaoImpl.callSPDao(CallSPDaoImpl.java:38)
at com.gst.user.action.UnsubscribeAction.unsubscribeUser(UnsubscribeAction.java:39)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

SQLSERVER 正在接受 TCP/IP 连接。我正在使用 GAE 1.7.2，JDK 1.6.0_29，在 Windows x64 上构建 JAVA 应用程序。任何想法如何解决这个问题..我认为防火墙不是问题

任何帮助/想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:06:14.477

由于您的应用程序使用了 java.policy，您的应用程序无权打开套接字连接。我没有使用 GAE 的经验，但我认为有一些限制，这可能是其中之一。

请参阅[http://download.java.net/jdk8/docs/technotes/guides/security/permissions.html](http://download.java.net/jdk8/docs/technotes/guides/security/permissions.html) 和 [是否有正确的方法来操作 GoogleAppEngine 安全权限？](https://stackoverflow.com/questions/1454519/is-there-a-right-way-to-manipulate-googleappengine-security-permissions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:48:03.547

您是否尝试通过 Google App Engine 网络应用程序与本地网络上的 SQL Server 取得联系？

首先，在 DNS 中进行`Idatabase`或`IL93SQLF031`解析（提示：我希望不会），如果这样做，SQL Server 是否直接或通过 NAT 暴露于 Internet（提示：同样，可能不会）。

**编辑**：如果您打算在 GAE 上运行您的应用程序，您可能应该阅读[Datastore](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:05:38.117

由于 Appengine 的策略，您无法打开套接字。例如，您可能不使用文件系统。Google 列出了所有您可能不做的事情，以及您可能使用的列入白名单的类和包（标准 Java 包之外）的列表。如果你试图超越限制，你会得到这个异常。因此，当您将其作为 Java 应用程序运行时，它在逻辑上有效，因为在这种情况下，您的编译器不会通过 Appengine（和 GWT）验证。因此，对于您的项目，请记住 Appengine 实例无法打开套接字，因此您无法使用自己的 SQL 服务器。您必须使用谷歌云 SQL。appengine 实例从云“外部”获取数据的唯一方法是 URL Fetch API，它可以从 appengine 外部获取内容。

# mongodb - 如何知道 MongoDB 中的登录用户？

> ID：12953691
> 
> 赞同：1
> 
> 时间：2012-10-18T11:34:26.880
> 
> 标签：mongodb

我创建了一个只读用户并与新创建的用户连接

> db.addUser("user2","test", true);

我使用命令行参数登录到 MongoDB

> C:\mongodb\bin>mongo.exe -u "user2" -p "test"

尽管我的用户是只读用户，但我已连接到数据库并能够执行插入操作。我想知道

1.  如何检查哪个用户登录？
2.  如果我以正确的用户登录，我怎样才能执行插入操作？

# c - 设置编译器 在 Windows XP 中打开 watcom

> ID：12953697
> 
> 赞同：0
> 
> 时间：2012-10-18T11:34:40.463
> 
> 标签：c, windows, ide, dos, watcom

我在我的操作系统 Win XP 上安装了**编译器“Open watcom”** ，我在 Virtual Box 下运行。
我在自动模式下安装了程序：完整包并自动更改了 autoexec 和配置文件，在安装过程中插入了所有需要的环境变量信息。

**我无法为 DOS 16 位编译 C 项目，**出现错误：

```
WxD WDEBUG.386 not present. 
```

我尝试修改“system.init”文件并在 [386enh] 目录中插入“device=c:\watcom\binw\wdebug.386”（在与 open watcom 相关的站点之一的常见问题解答中建议），但是没有效果。

我需要帮助！我应该怎么做才能使 c 项目编译并解决 wdebug.386 的问题提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:36:48.067

我过去遇到的一个问题是 Watcom 不喜欢路径中的空格。这似乎不是您的问题，但我建议您至少消除它作为可能的原因。

我通过将 Watcom 安装在我称为 Programx 的特殊程序目录中解决了这个问题。

所以我建议你这样做：

1.  卸载 Watcom
2.  在“C:\”下创建一个子目录“Programx”
3.  重新安装 Watcom，使其根目录为“C:\Programx\Watcom”

祝你好运！如果您还不知道，Watcom 会生成出色的 Win32 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:56:54.087

我从来没有遇到过OW这样的问题。

我使用默认配置或选择主机操作系统作为 Windows 安装它。使用该配置，OW 默认创建 Win32 应用程序。如果要创建 DOS 应用程序，则需要以特殊方式调用编译器。

这在 Windows 7 64 位上对我有用：

```
// file: hw.c
// compile with Open Watcom C/C++ 1.9 under Windows: wcl -q -bt=DOS hw.c
#include <stdio.h>

int main(void)
{
  printf("Hello world!\n");
  return 0;
} 
```

然后我可以`hw.exe`使用命令在 DosBox中成功运行`dosbox hw.exe`。在 Windows XP 中可以`hw.exe`直接运行。

如果有任何帮助，这些是我系统上与 OW 相关的环境变量：

```
EDPATH=C:\WATCOM\EDDAT
INCLUDE=C:\WATCOM\H;C:\WATCOM\H\NT;C:\WATCOM\H\NT\DIRECTX;C:\WATCOM\H\NT\DDK
Path=...;C:\WATCOM\BINNT;C:\WATCOM\BINW;...
WATCOM=C:\WATCOM
WHTMLHELP=C:\WATCOM\BINNT\HELP
WIPFC=C:\WATCOM\WIPFC 
```

# javascript - 如何访问包含特殊字符的对象属性？

> ID：12953704
> 
> 赞同：30
> 
> 时间：2012-10-18T11:35:19.173
> 
> 标签：javascript

我有一个`form`DOM 元素：

```
var virDom = document.getElementsByTagName("form")[0]; 
```

`virDom`有两个带有 ID`creditId`和的字段`pwdId..`。我可以`virDom.creditId` 毫无问题地访问，但`virDom.pwdId..`由于名称中包含句点而出现语法错误而失败。

我怎样才能访问这些属性？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-18T11:38:15.870

使用[**括号表示法**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)：

```
virDom['creditId']
virDom['pwdId..'] 
```

这适用于任何对象，对于非标识符安全字符以及访问您可能不提前知道的键特别有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-22T07:38:51.717

对于具有如下特殊字符的嵌套对象，

```
var details = {"name-details": {"first-name": "Kiran"}} 
```

利用

```
console.log(details["name-details"]["first-name"]) 
```

# vsto - 是否有相当于 Word 的 ToggleRibbon 的 PowerPoint？或者另一种方式来完成同样的事情？

> ID：12953711
> 
> 赞同：0
> 
> 时间：2012-10-18T11:36:02.673
> 
> 标签：vsto, office-2007, office-2010, powerpoint-2007, powerpoint-2010

[在 Office 2007+ 中，您可以使功能区最小化，以便只显示选项卡名称，这使它看起来有点像菜单栏。只有当您单击选项卡时，才会显示完整的功能区。这个色带状态是我想要控制的。]

在 Word 2007+ 对象模型中，对象上有一个[ToggleRibbon](http://msdn.microsoft.com/en-us/library/office/bb243911%28v=office.12%29.aspx)方法`Window`，可以最小化（或不最小化）该窗口的功能区。

我正在寻找 PowerPoint 2007+ 中的等效方法，但找不到。有没有这样的事情，如果没有，还有其他方法可以实现吗？除了 using `SendKeys`，就是 - 不要去那里。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T13:57:22.950

我已经在 c# 中使用 word addins 实现了。

您可以从以下链接获取帮助：http:
[//msdn.microsoft.com/en-us/library/bb608590.aspx](http://msdn.microsoft.com/en-us/library/bb608590.aspx)

我在功能区（视觉）中添加了一个按钮。
在按钮单击中，我添加了以下代码。

```
 private void button1_Click(object sender, RibbonControlEventArgs e)
        {
            Globals.ThisAddIn.Toogle();
        } 
```

我在以下代码中添加了这些代码`ThisAddIn.cs`：

```
 public void Toogle()
        {
            Word.Window obj = Application.ActiveWindow;
            obj.ToggleRibbon();
        } 
```

* * *

抱歉， `Window.ToggleRibbon()`仅存在于单词中。即使它不存在于 excel 或工作中。所以要实现这一点，请执行以下代码：

```
 private void button1_Click(object sender, RibbonControlEventArgs e)
        {
            SendKeys.SendWait("^{F1}");
        } 
```

希望，这对你有用。

# c# - 使图像源交换更快

> ID：12953722
> 
> 赞同：0
> 
> 时间：2012-10-18T11:36:20.863
> 
> 标签：c#, performance, silverlight

我有 4 个图像控件和一个按钮，用于交换这些图像控件中的所有图像。但这进展太慢了。

图像交换发生在 1.5 秒故事板动画之后。所以想象一下那些四图控件向下移动然后调用这个方法：

```
 BLOCK4.Source = stack[3];
 BLOCK3.Source = stack[2];
 BLOCK2.Source = stack[1];
 BLOCK1.Source = stack[0]; 
```

stack 是一个私有`BitmapImage[] stack;`数组，在每次动画调用后包含随机图像。

您是否看到了一种调整此代码以使交换看起来更快的方法？

**这就是发生的情况：**动画开始 -> 停止 -> 我可以看到旧图像 -> 毫秒过去了 -> 我可以看到新图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:38:26.100

改变图像位置而不是改变来源会给用户带来更花哨的视觉效果

# c# - LINQ 查询到 SQL 查询的转换

> ID：12953731
> 
> 赞同：0
> 
> 时间：2012-10-18T11:36:46.787
> 
> 标签：c#, asp.net, sql

你好。我想将 LINQ 查询转换为 SQL 查询。我是 LINQ 的新手。有人可以帮我转换吗？这是我的 Linq 代码：

```
 var val = from AppDetails in db.ApplicantProfile
                  join PRQDetails in db.PrqcreatedInformation on AppDetails.ApplicantProfileId equals PRQDetails.ApplicantId
                  where PRQDetails.ConsiderForPrq == true
                  orderby PRQDetails.Entrydate ascending
                  select new
                  {
                      Prefix = AppDetails.Prefix.Name,
                      FirstName = AppDetails.FirstName,
                      MiddleName = AppDetails.MiddleName,
                      LastName = AppDetails.LastName,
                      ArdisPersonId = AppDetails.ArdisPersonId,
                      ApplicantProfileId = AppDetails.ApplicantProfileId,
                      PRQEntryDate = PRQDetails.Entrydate,
                      PrqUpdated = PRQDetails.PrqUpdated,
                      IsSendtoARDs = PRQDetails.IsSendtoArds,
                      DataSentToARDis=PRQDetails.DataSentToArdis,
                      DataSentToARDisBy=PRQDetails.DataSentToArdisBy 
                  }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:43:50.047

它将类似于以下内容：

```
SELECT
   p.Name,
   ad.FirstName,
   ad.MiddleName,
   ad.LastName,
   ad.ArdisPersonId,
   ad.ApplicationProfileId,
   prq.Entrydate,
   prq.PrqUpdated,
   prq.IsSendtoArds,
   prq.DataSentToArdis,
   prq.DataSentToArdisBy 
FROM AppDetails ad
INNER JOIN PRQDetails prq 
   ON ad.ApplicantProfileId = prq.ApplicantId
INNER JOIN Prefix p
   ON ?????? = ?????
WHERE prq.ConsiderForPrq = 1
ORDER BY prq.Entrydate 
```

但是没有关于如何`AppDetails`链接`Prefix`的信息很难填写`????`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:44:33.587

[这是来自 MSDN http://msdn.microsoft.com/en-us/library/Bb386961(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/Bb386961(v=VS.90).aspx)的示例

请注意，在他们的示例中，变量 db 是 DatabaseContext。

# c# - 为什么 IIS ServerManager 类创建我的处理程序映射被禁用？

> ID：12953732
> 
> 赞同：3
> 
> 时间：2012-10-18T11:36:46.937
> 
> 标签：c#, iis, iis-7, servermanager

我想使用 Microsoft.Web.Administration 命名空间中的类将自定义 CGI-Exe 的处理程序映射（脚本映射）添加到 Internet 信息服务器。（简化的）代码是：

```
var serverManager = ServerManager.OpenRemote(serverName);

Configuration webConfig = serverManager.GetWebConfiguration(siteName, appPath);
ConfigurationSection handlersSection = webConfig.GetSection("system.webServer/handlers");

ConfigurationElementCollection handlersCollection = handlersSection.GetCollection();
string elementName = cgiFile + " script map appHost added by ACM";
ConfigurationElement addElement = handlersCollection.CreateElement("add");
addElement["allowPathInfo"] = true;
addElement["modules"] = "CgiModule";
addElement["name"] = elementName;
addElement["path"] = cgiFile;
addElement["requireAccess"] = "Execute";
addElement["scriptProcessor"] = Path.Combine(scriptsPath, cgiFile);
addElement["verb"] = "*";

handlersCollection.Add(addElement);
serverManager.CommitChanges(); 
```

此代码将处理程序映射添加到 IIS 中的映射列表，但它被标记为禁用： ![IIS 管理器中禁用的处理程序映射的屏幕截图](../Images/45a7b4be670c754098495151539d7556.png)

我必须从“操作”窗格中手动选择“编辑功能权限...”，然后在以下对话框中选择“执行”权限：

![“编辑功能权限”对话框的屏幕截图](../Images/4e0d89bfede38461dc9c75661f3769c5.png)

我想知道如何通过在创建处理程序时设置不同的配置选项或通过以编程方式编辑功能权限来启用处理程序映射。

**更新**

我复制了由该脚本创建的 web.config，然后使用上面的对话框手动添加了执行权限，并将生成的 web.config 与原始权限进行了比较：

起点从：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <handlers> 
```

到

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <handlers accessPolicy="Read, Execute, Script"> 
```

现在我需要了解如何设置 accessPolicy。但是为什么这个设置在处理程序节点上而不是在我的特定处理程序节点上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:38:20.040

有时它有助于在stackoverflow上制定问题。在玩了两天之后，我在发布问题几个小时后找到了解决方案：

我需要为处理程序设置 accessPolicy。

添加此行后，它终于起作用了：

```
handlersSection["accessPolicy"] = "Read, Script, Execute"; 
```

看来我只是使用了错误的搜索词，我寻找的是“编辑功能权限”而不是 accessPolicy。

# android - 使用 webview 显示地理位置

> ID：12953733
> 
> 赞同：4
> 
> 时间：2012-10-18T11:36:54.323
> 
> 标签：android, map, webview

我想在谷歌地图上显示一个特定的地理位置。我不能使用地图视图/地图活动。

我也不能使用动作视图意图

我可以为此使用 webview 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:41:23.387

打开这样的网址应该可以工作：

```
webView.loadUrl("http://maps.google.com/maps?q=47.404376,8.601478"); 
```

用您的纬度/经度替换 47.404376,8.601478。在浏览器中工作，我猜在移动设备上它会打开谷歌地图的移动版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:40:53.463

查看谷歌静态地图 API [https://developers.google.com/maps/documentation/staticmaps/?hl=nl](https://developers.google.com/maps/documentation/staticmaps/?hl=nl)

您必须构建一个显示您所在位置的地图（可能的标记）的静态图像的 url。然后您可以下载它并在图像视图中显示它。

```
String latitude= "45.838211";
String longitude = "9.334661";
String url = "http://maps.google.com/maps/api/staticmap?center=" + latitude + "," + longitude+ "&zoom=10&size=400x400&sensor=false" 
```

# c# - 使用泛型可以将提供的类型限制为内置？

> ID：12953736
> 
> 赞同：2
> 
> 时间：2012-10-18T11:37:00.217
> 
> 标签：c#

我想将我的方法使用泛型接受的数据类型限制为内置类型：

内置类型： http: [//msdn.microsoft.com/en-us/library/ya5y69ds (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ya5y69ds(v=vs.80).aspx)

该列表不同于值/引用类型。而且我想只支持内置的，而不是所有的值类型，而且 ofc 也支持字符串，它是一种引用类型。

这可能吗？

编辑：

使用约束，您可以限制为像这样的值类型：

```
T GetObject<T> where T: struct; 
```

但是，这将不允许字符串通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:54:35.210

不可能与泛型有关。

如果您需要这样做并保留编译时检查，您唯一的选择是提供具有不同参数类型的方法的重载，以便覆盖所有内置类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:48:29.707

不，不幸的是这是不可能的。

我认为你可以做的最接近的是：

```
T GetObject<T>()
{
    if (!(typeof(T) is typeof(int)
        || typeof(T) is typeof(uint)
        ...
        || typeof(T) is typeof(string)))
    {
        //Custom exception class for this purpose
        throw new TypeArgumentException("Invalid type parameter \"T\".");
    }

    ...
} 
```

不那么好，但可以完成工作。

# mysql - Zend 导出数据库进行备份

> ID：12953744
> 
> 赞同：1
> 
> 时间：2012-10-18T11:37:40.607
> 
> 标签：mysql, database, zend-framework, backup

我想创建一个 cronjob 用于从我的数据库中进行备份（sql 转储）并将其通过电子邮件发送给我。设置 cronjob 和其他东西效果很好，我可以使用我的 zend 应用程序的一部分:)

不幸的是，我不能在我的服务器上使用`exec()`or `system()`，所以现在我正在寻找一种方法来获得相同的结果。我到处搜索我能想到的所有可能的描述，但没有任何结果。

简而言之：

*   我想备份我的数据库
*   最好是 .sql 格式（如 phpmyadmin 中的导出）
*   使用 Zend 框架（这样我就可以使用我已经加载的数据库的 application.ini 设置）
*   我不能使用`exec()`或`system()`

我完全被困住了，所以真的任何事情都会有所帮助！提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T13:06:35.700

David Walsh 的解决方案看起来像您想要的：

[http://davidwalsh.name/backup-mysql-database-php](http://davidwalsh.name/backup-mysql-database-php)

一个 php 脚本，用于检索数据库中的表并将数据保存在 .sql 文件中。

# c# - 我在编写 Ints 以将十进制转换为二进制时尝试拆分

> ID：12953745
> 
> 赞同：-1
> 
> 时间：2012-10-18T11:37:42.983
> 
> 标签：c#, split

我正在尝试从十进制转换为二进制，但我不知道如何从一个八进制拆分到另一个八进制。

这是我的代码：

```
 int oct = 0;
        int bin = 128;
        string resul = "";
        Console.WriteLine("insert ip address");
        string temp = Console.ReadLine();
        oct = int.Parse(temp);

        while (bin > 0)
        {
            if (oct >= bin)
            {
                resul += "1";
                oct = oct - bin;
            }

            else
            {
                resul += "0";
            }

            bin = bin / 2;

        }                       

         {
            Console.WriteLine(resul);
            Console.ReadKey();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:44:44.523

```
oct = int.Parse(temp);
string resul = Convert.ToString(oct ,2); 
```

# deployment - 适用于 Windows 的最小精简 JRE

> ID：12953748
> 
> 赞同：16
> 
> 时间：2012-10-18T11:38:09.430
> 
> 标签：deployment, java, software-distribution

我有一个 jar 文件形式的应用程序，大小约为 2MB。出于多种原因，我必须将 JRE 与我的应用程序捆绑在一起。当我使用我的 jar 和 JRE 创建 MSI 时，MSI 大小约为 30MB。

我正在寻找可以捆绑的商业或免费 JRE，以便我可以将 MSI 的大小尽可能减小。我正在查看总共 5MB，但即使高达 10MB 也可以。预构建的 JRE 二进制文件会很棒，但不是绝对必须的。

[我查看了此处](https://stackoverflow.com/questions/4283388/stripping-the-jre-to-be-bundled-with-an-application-what-can-i-omit)和[此处](https://stackoverflow.com/questions/2258932/embed-a-jre-in-a-windows-executable)发布的类似问题。

这些和其他线程中的很多答案都建议使用 Excelsior。我下载了 Excelsior JET 的评估版并试用了它 - 出于几个原因，我认为它可能不适合我。

1) Excelsior 着眼于减少已安装产品而不是安装程序的占用空间。我不太关心已安装产品的大小 - 我主要关注较小的下载（我的产品安装程序目前为 30MB）。

2）除其他外，Excelsior 对代码进行了很多优化以实现这一点 - 我根本不希望我的 jar 文件被触及。我想要一个更小的 JRE 和我的 jar。也没有办法关闭一些优化。

3) Excelsior 创建一个 EXE - 我并不是特别在寻找这个 - 我可以通过 javaw.exe 命令行调用我的产品。

那么对我的需要有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T12:56:32.310

这里有一个可能的解决方案。这些工具安装了 Java 的简约版本。不知道对你来说够不够小。看看看看： [https ://superuser.com/questions/745112/how-do-i-run-a-jar-file-without-installing-java](https://superuser.com/questions/745112/how-do-i-run-a-jar-file-without-installing-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:44:55.663

Avian 和 ProGuard 是您的朋友，因为有人在您链接到的线程之一中[已经提到](https://stackoverflow.com/a/11556563/738323)过（顺便说一句，这是第二条评论）。

从禽鸟主页：

> 类库被设计为尽可能松耦合，允许像 ProGuard 这样的工具积极地隔离应用程序所需的最少代码。这转化为更小的下载和更快的启动。

听起来正是您需要的。如果这对您没有帮助，请查看该线程中引用的其余工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:25:26.627

也许已经过时了：有一个关于 JavaKernel/ConsumerJRE 的谣言。

[http://weblogs.java.net/blog/enicholas/archive/2007/05/java_kernel_unm.html](http://weblogs.java.net/blog/enicholas/archive/2007/05/java_kernel_unm.html)

[http://www.oracle.com/technetwork/java/javase/kernel-135055.html](http://www.oracle.com/technetwork/java/javase/kernel-135055.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T12:06:38.673

我会让 JRE 与 Oracle（或您的首选供应商）分开安装。如果您愿意，可以根据需要下载它。如果已经安装了 JRE，即使是减少的 JRE，再次下载也是一种浪费。

顺便说一句：我不会弄乱 JRE 中的内容，因为

*   AFAIK 违反了您的许可协议。
*   很难做到正确并且不删除您有一天可能需要的课程。

# page-refresh - 单击经典asp中的弹出确定按钮后防止页面返回父页面

> ID：12953759
> 
> 赞同：1
> 
> 时间：2012-10-18T11:39:03.047
> 
> 标签：page-refresh

我为弹出窗口编写了以下代码：

```
function OpenApproveLevelPopup() {
   // debugger;
    //document.frmopportunity.txtopplvl.value = 'Level2';
    var url = 'ApprovePopUp_shilpa.asp?opprApprLvl=' + document.frmopportunity.txtopplvl.value;
     //+ document.frmopportunity.txtopplvl.value;
    var windowRetVal = window.showModalDialog(url, "", "dialogHeight:150px;dialogWidth:280px;status: No;");
    document.frmopportunity.txtopplvl.value = windowRetVal;
    //TheForm.
    return windowRetVal;
} 
```

我使用以下代码在单击按钮时调用此函数：

```
<TD><INPUT class=standard type=submit value='Change Opportunity Design Level' name=ChangeOpportunityDesignLevel onclick = ' return OpenApproveLevelPopup()' ></TD></TR>" 
```

单击弹出窗口中的“确定”按钮后，我的页面正在刷新并返回父页面，我不想要这个。即使单击“确定”按钮，请帮助我重新获得相同的结果。

# javascript - Javascript：新对象与返回对象

> ID：12953761
> 
> 赞同：1
> 
> 时间：2012-10-18T11:39:05.240
> 
> 标签：javascript, node.js

> **可能重复：**
> [函数与对象字面量符号 - 有区别吗？](https://stackoverflow.com/questions/10079544/function-vs-object-literal-notaion-is-there-a-diifference)

我在 nodejs 中玩耍，我到了一个可以用两种不同方式做同样事情的地方。

```
var x = function(arr) {
    this.get = function(index) {
        return arr[index];
    }
}
var myVar = new x([1,2,3,4]); 
```

或者

```
var y = function(arr) {
    return {
        get: function(index) {
            return arr[index];
        }
    }
}
var myVar = y([1,2,3,4]); 
```

这两种方法显然有一些区别，我的问题是哪个？谢谢

# linq-to-sql - 如何编写查询以使用 linq to sql 搜索项目？

> ID：12953768
> 
> 赞同：0
> 
> 时间：2012-10-18T11:39:36.660
> 
> 标签：linq-to-sql

在我的表格中，有两个文本框，一个用于州，一个用于国家。如果用户仅根据数据库中可用的状态输入状态，我需要显示项目。如果只有国家/地区输入需要从数据库中获取匹配的国家/地区项目。如果两者都输入需要在我的视图中显示匹配的状态和国家/地区项目。请告诉我如何为达到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:50:31.950

如果我正确地回答了您的问题，您想根据输入的州和国家/地区过滤项目。

我假设您有一个存储项目信息的数据库表，并且那里还有州和国家/地区字段，并且您希望与国家或州完全匹配。

然后你可以试试这个。

```
var country = txtCountry.Text.Trim();
var state = txtState.Text.Trim();

var items = (from item in itemTable
            where (country == "" || item.country == country)
            &&    (state == "" || item.state == state)
            select item).ToList(); 
```

或者您想匹配包含的国家或州。

```
var items = (from item in itemTable
            where (country == "" || item.country.Contains(country))
            &&    (state == "" || item.state.Contains(state))
            select item).ToList(); 
```

# java - 哈希如何推送新的和更新当前的

> ID：12953772
> 
> 赞同：0
> 
> 时间：2012-10-18T11:39:57.630
> 
> 标签：java, hash

我`Hash`喜欢

```
 private Map<String, List<MEventDto>> mEventsMap; 
```

然后我想检查密钥是否已经存在。如果存在，我将只更新值并添加一个新键。我怎样才能做到这一点。

我尝试喜欢：

```
for (MEventDto mEventDto : mEventList) {
    String mEventKey = mEventDto.getMEventKey();
    String findBaseMEvent = mEventKey.split("_")[0];

    if (mEventsMap.get(findBaseMEvent ) != null) {
        // create new one
        mEventsMap.put(findBaseMEvent , mEventDtoList);
    } else {
        // just update it
         mediationEventsMap.
    }
} 
```

我该怎么做`Hash`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:43:22.983

您可以使用[`Map#containsKey`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#containsKey%28java.lang.Object%29)检查密钥是否存在：-

所以，在你的情况下，它会是这样的： -

```
if (mEventsMap.containsKey(findBaseMEvent)) {
      // just update the enclosed list
      mEventsMap.get(findBaseMEvent).add("Whatever you want");            
} else {
      // create new entry
      mEventsMap.put(findBaseMEvent , mEventDtoList);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:42:12.547

[HashMap containsKey()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)可以使用这个方法

```
 boolean    containsKey(Object key) 
      Returns true if this map contains a mapping for the specified key. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:44:28.237

你可以这样做：

```
String mEventKey = mEventDto.getMEventKey();
String findBaseMEvent = mEventKey.split("_")[0];

List<MEventDto> list = mEventsMap.get(findBaseMEvent);
/* 
 * If the key is not already present, create new list, 
 * otherwise use the list corresponding to the key.
 */
list = (list == null) ? new ArrayList<MEventDto>() : list;

// Add the current Dto to the list and put it in the map.
list.add(mEventDto);
mEventsMap.put(findBaseMEvent , mEventDtoList); 
```

# r - 循环分组 RLE 计算的更快解决方案

> ID：12953781
> 
> 赞同：1
> 
> 时间：2012-10-18T11:40:38.860
> 
> 标签：r, loops

我的问题有一个可行的[解决方案](https://stackoverflow.com/q/12892985/429846)，但我无法使用它，因为它太慢了（我的计算预测整个模拟需要 2-3 年！）。因此，我正在寻找更好（更快）的解决方案。这是（本质上）我正在使用的代码：

```
N=4
x <-NULL
for (i in 1:N) { #first loop
  v <-sample(0:1, 1000000, 1/2) #generate data
  v <-as.data.frame(v) #convert to dataframe
  v$t <-rep(1:2, each=250) #group
  v$p <-rep(1:2000, each=500) #p.number
  # second loop
  for (j in 1:2000) { #second loop
    #count rle for group 1 for each pnumber
    x <- rbind(x, table(rle(v$v[v$t==1&v$p==j])))
    #count rle for group 2 for each pnumber
    x <- rbind(x, table(rle(v$v[v$t==2&v$p==j])))
  } #end second loop
} #end first loop
#total rle counts for both group 1 & 2
y <-aggregate(x, list(as.numeric(rownames(x))), sum) 
```

简而言之：代码生成抛硬币模拟 ( `v`)。生成一个组因子（1 和 2）。生成一个 p.number 因子 (1:2000)。记录第 1 组和第 2 组的每个 p.number (1:2000) 的运行长度（每个 p.number 在两个组中都有运行）。在`N`循环（第一个循环）之后，总运行长度以表格（聚合）的形式呈现（即，每个组的运行长度，每个 p.number，超过`N`循环的总数）。

我需要第一个循环，因为我正在使用的数据来自单个文件（所以我正在加载文件，计算各种统计数据等，然后加载下一个文件并执行相同的操作）。我对第二个循环的依恋程度要低得多，但不知道如何用更快的东西替换它。

可以对第二个循环做些什么来使它（希望是很多）更快？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T11:52:57.067

你犯了在 R 的循环中增长一个对象的主要罪行`for()`。不要（**我重复不要**）这样做。在开始时分配足够的存储空间，`x`然后随用随填`x`。

```
x <- matrix(nrow = N * (2000 * 2), ncol = ??) 
```

然后在内循环

```
x[ii, ] <- table(rle(....)) 
```

where`ii`是您`1`在第一个循环之前初始化并在第二个循环内递增的循环计数器：

```
x <- matrix(nrow = N * (2000 * 2), ncol = ??)
ii <- 1
for(i in 1:N) {
    .... # stuff here
    for(j in 1:2000) {
        .... # stuff here
        x[ii, ] <- table(rle(....))
        ## increment ii
        ii <- ii + 1
        x[ii, ] <- table(rle(....))
        ## increment ii
        ii <- ii + 1
    } ##  end inner loop
} ## end outer loop 
```

另请注意，您正在为第二个循环重复使用`i`bot for() `loops which will not work.`i `is just a normal R object and so both`for() `loops will be overwriting it as the progress. USe`j` 中的索引，就像我在上面所做的那样。

首先尝试这个简单的优化，看看是否能让真实模拟在可接受的时间内完成。如果没有，请返回一个显示最新代码的新 Q，我们可以考虑其他优化。上面的优化很简单，优化`table()`并且`rle()`可能需要更多的工作。请注意，您可能会查看`tabulate()`执行繁重工作的函数`table()`，这可能是优化该特定步骤的一种途径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:19:23.467

如果您只想分别运行`rle`and的值的`table`每个组合，则不需要第二个循环。这种方式要快得多：`v$t``v$p`

```
values <- v$v + v$t * 10 + v$p * 100
runlength <- rle(values)
runlength$values <- runlength$values %% 2
x <- table(runlength)

y <- aggregate(unclass(x), list(as.numeric(rownames(x))), sum) 
```

* * *

整个代码将如下所示。如果`N`低至4，生长对象`x`不会是一个严重的问题。但总的来说，我同意@GavinSimpson 的观点，这不是一种好的编程技术。

```
N=4
x <-NULL
for (i in 1:N) { #first loop
  v <-sample(0:1, 1000000, 1/2) #generate data
  v <-as.data.frame(v) #convert to dataframe
  v$t <-rep(1:2, each=250) #group
  v$p <-rep(1:2000, each=500) #p.number

  values <- v$v + N * 10 + v$t * 100 + v$p * 1000
  runlength <- rle(values)
  runlength$values <- runlength$values %% 2
  x <- rbind(x, table(runlength))

} #end first loop
y <-aggregate(x, list(as.numeric(rownames(x))), sum) #tota 
```

# python - 扭曲的 adbapi：runInteraction last_insert_id()

> ID：12953784
> 
> 赞同：4
> 
> 时间：2012-10-18T11:40:53.337
> 
> 标签：python, mysql, last-insert-id

```
class MySQL(object):

    def __init__(self):
        self.dbpool = adbapi.ConnectionPool(
            'MySQLdb',
            db='dummy',
            user='root',
            passwd='',
            host = 'localhost',
            cp_reconnect = True,
            cursorclass=MySQLdb.cursors.DictCursor,
            charset='utf8',
            use_unicode=True
        )

    def process(self, item):
        query = self.dbpool.runInteraction(self.conditionalInsert, item).addErrback(self.handle_error)        
        return item

    def conditionalInsert(self, tx, item):
        tx.execute("INSERT INTO User (user_name) VALUES (%s)",(name))
        tx.execute("SELECT LAST_INSERT_ID()")
        lastID = getID(tx.fetchone())
        # DO SOMETHING USING lasID
        ...
        ...
    def handle_error(self, e):
        log.err(e) 
```

我们下面第二行的lastID对应第一行的插入？或者它可能来自任何 runInteraction 线程？

```
 tx.execute("INSERT INTO User (user_name) VALUES (%s)",(name))
    tx.execute("SELECT LAST_INSERT_ID()") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-27T08:57:36.977

最后一个 id 将是同一事务中最后插入的行的 id。

我已经使用以下操作对其进行了测试：

1.  使用 runInteraction(...) 函数开始事务并插入一行

2.  获取最后一个插入 id，例如它是 18

3.  在事务运行的函数中休眠 30 秒

4.  使用 mysql 客户端或 phpMyAdmin 在同一个表中插入一行

5.  从第 4 步获取最后一个插入 id，例如它是 19

6.  sleep函数返回并查询最后插入id再次使用同一个Transaction对象，最后插入id还是18

# c# - 当多个 Id 标签相同时，自动填充网站中的文本框 c#

> ID：12953785
> 
> 赞同：2
> 
> 时间：2012-10-18T11:40:59.817
> 
> 标签：c#, webbrowser-control, getelementbyid, getelementsbytagname, getelementsbyclassname

我想通过我的 c# 程序在网站中填写文本框

我的问题是我要填充的文本框的 Id 标签与另一个文本框的 Id 标签相同，而我要填充的不是第一个

我可以用代码找到我需要的 HemlElment

```
var oForm = This.Document.Forms[2]; 
```

这是oForm的innerhtml，我需要填写用户名、密码、电子邮件和时区。

```
<INPUT style="WIDTH: 150px" id=username name=username_reg size=30>
<INPUT style="WIDTH: 150px" id=password name=password_reg value="" size=30 type=password>
<INPUT style="WIDTH: 150px" id=mail_reg name=mail_reg size=30>

SELECT name=time_zone 
```

如果我尝试

```
oForm.SetAttribute("username_reg", RegisterData.UserData.Username); 
```

有一个例外，`Member not found. (Exception from HRESULT: 0x80020003 (DISP_E_MEMBERNOTFOUND))`

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T12:07:27.447

尝试：

```
 var form = webBrowser1.Document.Forms[2];

    FindFormInputElementByIdAndSetItsValue(form, "username", "{{UserName}}");
    FindFormInputElementByIdAndSetItsValue(form, "password", "{{Password}}");
    FindFormInputElementByIdAndSetItsValue(form, "mail_reg", "{{EMail}}"); 
```

...

```
 public void FindFormInputElementByIdAndSetItsValue(
                 HtmlElement form, string id, string value)
    {
        form.GetElementsByTagName("input")
            .OfType<System.Windows.Forms.HtmlElement>()
            .Where(x => x.Id == id) 
            .First()
            .SetAttribute("value", value);
    } 
```

# xpath - 解析名称差异很小的 XML 标签

> ID：12953795
> 
> 赞同：0
> 
> 时间：2012-10-18T11:41:20.937
> 
> 标签：xpath

我有一个要解析的 XML 文件，其中元素标签的格式为：

```
<mensa-1>
..
</mensa-1>

<mensa-2>
..
</mensa-2> 
```

当元素名称在末尾通过数字不同时，是否可以通过 Xpath 解析此类元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:07:31.950

以下 XPath 表达式返回名称以“mensa-”开头的所有元素：

```
//*[starts-with(name(),'mensa-')] 
```

# c# - 继承的静态成员的静态初始化

> ID：12953797
> 
> 赞同：6
> 
> 时间：2012-10-18T11:41:23.403
> 
> 标签：c#, generics, inheritance, static-members

考虑这个示例代码：

```
public class A<T> 
{
    public static T TheT { get; set; }
}
public class B : A<string>
{
    static B() {
        TheT = "Test";
    }
}

public class Program {
    public static void Main(String[] args) {
        Console.WriteLine(B.TheT);
    }
} 
```

这里`B.TheT`是空的。但是，像这样更改`Main`方法：

```
public static void Main() {
    new B();
    Console.WriteLine(B.TheT);
} 
```

`B.TheT`正如预期的那样，是“测试”。我可以理解这会强制静态构造函数运行，但为什么在第一种情况下不会发生这种情况？

我尝试阅读规范，这引起了我的注意（§10.12）：

> [...] 静态构造函数的执行由在应用程序域中发生的以下事件中的第一个触发：
> 
> • [...]
> 
> • 引用类类型的任何静态成员。

我对此的解释是，由于`TheT`不是 的成员，因此不会强制运行`B`的静态构造函数。`B`它是否正确？

如果这是正确的，我将如何最好`B`地指定如何初始化`TheT`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:45:17.160

> 正如预期的那样，A.TheT 是“测试”。我可以理解这会强制静态构造函数运行，但为什么在第一种情况下不会发生这种情况？

基本上，您还没有*真正*引用`B`. 如果您查看 IL，我想您会发现您的代码实际上等同于：

```
public static void Main(String[] args) {
    Console.WriteLine(A<string>.TheT);
} 
```

*即使*您编写了`B.TheT`.

> 如果这是正确的，我将如何最好地让 A 指定如何初始化 TheT？

老实说，我会尽量避免一开始就这样做......但你总是可以添加一个静态方法`B`：

```
public static void Initialize() {
    // Type initializer will be executed now.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:47:57.377

在第一次访问之前或最迟在第一次访问时调用静态构造函数。即你知道它在第一次访问时被调用，但不知道之前多久。但是，如果没有访问，则不会调用它。所以你不能控制只有当它被调用时。

***根据[MSDN](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.110%29.aspx)参考***

> 静态构造函数用于初始化任何静态数据，或执行只需要执行一次的特定操作。在创建第一个实例或引用任何静态成员之前自动调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:49:02.627

在第二种情况下称为静态构造器，它将调用实际类型的静态构造器，而不是*派生*的构造器。因此，在您的情况下，它调用 the 的静态 ctor`A<T> =>A<string>`而**不是**.`A`

要证明这种行为，只需执行以下操作：

```
public class Base {

    static Base() {
      "Base static".Dump(); 
    }
}

public class Derived : Base {

    static Derived() {
      "Derived static".Dump(); 
    }

    public static string temp = "Hello";
} 
```

并打电话

```
Derived.temp.Dump(); 
```

你会得到：

```
Derived static
Hello 
```

这是您在代码中实际执行的操作，您访问*派生*类型`A<string>`并调用它的默认静态 ctor。

# python - 在 Django 应用程序的 Celery 任务中使用事务会导致问题吗？

> ID：12953801
> 
> 赞同：1
> 
> 时间：2012-10-18T11:41:39.427
> 
> 标签：python, django, transactions, celery, django-celery

我有一组我写的芹菜任务。这些任务中的每一个都以作者 ID 作为参数——只是一个例子——作为参数，对于作者的每本书，它获取最新价格并将其存储在数据库中。

我想通过将 Django 的 `@transaction.commit_on_success`装饰器添加到我的任务中来将事务添加到我的任务中。如果任何任务崩溃，我希望整个任务都失败，并且没有任何内容可以保存到数据库中。

我有十几个芹菜工人检查作者的书籍价格，我想知道这个简单的事务逻辑是否会导致我的 Postgres 数据库中的锁定和竞争条件。

我已经挖掘并发现了这个名为[django-celery-transactions 的](https://github.com/chrisdoble/django-celery-transactions)项目，但我仍然不了解这背后的真正问题以及该项目试图解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:51:16.380

这取决于几件事，包括：数据库的事务隔离级别、检查价格更新的频率以及期望价格变化的频率。[例如，如果您每秒对标准](http://www.postgresql.org/docs/9.2/static/transaction-iso.html)PostgreSQL进行大量更新，您可能会在事务中多次执行相同的 select 语句得到不同的结果。

数据库经过优化以处理并发性，所以我认为这对您来说不是问题；特别是如果您在获取价格后才打开交易（即使用上下文管理器而不是装饰任务）。如果 - 由于某种原因 - 未来事情变得缓慢，那么优化（不那么频繁地获取价格，调整数据库配置等）。

至于你的其他问题：django-celery-transactions 旨在防止 Django 和 Celery 之间的竞争条件。一个示例是，如果您要将新创建的对象的主键传递给任务：该任务可能会在视图的事务提交之前尝试检索该对象。繁荣！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:28:37.700

原因是在您的 Django 视图中，如果您应用装饰器，则在视图退出之前不会提交数据库事务。在视图返回并触发提交之前，您可以调用期望 DB 事务已经提交的任务，即那些条目存在于 DB 上下文中。

为了防止这种竞争条件（任务在您的视图之前开始并因此事务完成）您可以手动管理它或使用您提到的自动为您处理它的模块。

例如，在您的情况下，它可能会失败的示例是，如果您要添加新作者，并且您有一项任务可以获取所有/任何书籍的价格。如果任务在新作者事务的提交完成之前执行，您的任务将尝试使用尚不存在的 id 获取作者。

# php - $doc->getElementById('id'), $doc->getElementsByName('id') 不工作

> ID：12953802
> 
> 赞同：0
> 
> 时间：2012-10-18T11:41:47.097
> 
> 标签：php

> **可能重复：**
> [PHP HTML DomDocument getElementById 问题](https://stackoverflow.com/questions/3391942/php-html-domdocument-getelementbyid-problems)

我正在尝试从 PHP 中的 Google 搜索中提取信息，并发现我可以毫无问题地阅读搜索 url，但从中获取任何内容是一个完全不同的问题。在阅读了大量帖子和适用的 PHP 文档后，我想出了以下内容

```
// get large panoramas of montana
$url = 'http://www.google.com/search?q=montana+panorama&tbm=isch&biw=1408&bih=409';
$html = file_get_contents($url);
// was getting tons of "entity parse" errors, so added
$html = htmlentities($html, ENT_COMPAT, 'UTF-8', true); // tried false as well

$doc = new DOMDocument();
//$doc->strictErrorChecking = false; // tried both true and false here, same result
$result = $doc->loadHTML($html);

//echo $doc->saveHTML(); this shows that the tags I'm looking for are in fact in $doc

if ($result === true)
{
    var_dump($result); // prints 'true'
    $tags = $doc->getElementById('center_col');
    $tags = $doc->getElementsByTagName('td');
    var_dump($tags); // previous 2 lines both print NULL
} 
```

我已经通过error_log($html) 验证了我要查找的id 和标签在html 中，并且在$doc->SaveHTNL() 的解析文档中。有人看到我做错了什么吗？

编辑：

感谢大家的帮助，但我已经用 DOMDocument 碰壁了。任何文档或其他线程中的任何内容都不适用于 Google 图像查询。这是我尝试过的：

我查看了@Jon 链接，尝试了那里的所有建议，查看了 getElementByID 文档并阅读了那里的所有评论。仍然得到空的结果集。比 NULL 好，但不多。

我尝试了 xpath 技巧：

```
$xpath  = new DOMXPath($doc);
$ccol   = $xpath->query("//*[@id='center_col']"); 
```

同样的结果，一个空集。

我在读取文件后直接做了一个 error_log($html) 并且文档有一个 doctype "" 所以不是那样的。

我还在那里看到用户“carl2088”说“根据我的经验，如果您加载了 HTML 文档，getElementById 似乎可以在没有任何设置的情况下正常工作”。在谷歌图片查询的情况下，它会出现。

无奈之下，我尝试了

```
echo count(explode('center_col', $html)) 
```

看看是否由于某种奇怪的原因它在初始 error_log($html) 之后消失了。它肯定存在，字符串被分成 4 个块。

我检查了我在 2012 年 8 月 25 日编译的 PHP (5.3.15) 版本，所以它不是一个太旧的版本，无法支持 getElementByID。

在昨天之前，我一直在使用一系列极其丑陋的“爆炸”来获取信息，虽然它是可怕的代码，但它花了 45 分钟的时间来编写并且它有效。

我真的很想放弃我的“爆炸”黑客，但是 5 小时一无所获，而 45 分钟才能得到有效的东西，这使得以正确的方式做事真的很困难。

如果其他有使用 DOMDocument 经验的人有一些我可以尝试的额外技巧，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:43:28.377

你在使用javascript吗`getElementById`，`getElementsByTagName`如果是的话，这就是问题所在

```
 $tags = $doc->getElementById('center_col');
    $tags = $doc->getElementsByTagName('td'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:41:52.243

在使用函数**$doc->getElementById('center_col');**之前，您需要使用**DOMDocument->validate()**或**DOMDocument->validateOnParse验证您的文档；**

 **```
$doc->validateOnParse = true;
$doc->loadHTML($html); 
```

[stackoverflow：getelementbyid问题](https://stackoverflow.com/questions/3391942/php-html-domdocument-getelementbyid-problems/3392081#3392081)

[http://php.net/manual/de/domdocument.getelementbyid.php](http://php.net/manual/de/domdocument.getelementbyid.php)

这是@Jon 在他的评论中发布的问题！**

# php - Kohana 3 ORM - 使用静态方法连接和 has_many 关系

> ID：12953813
> 
> 赞同：0
> 
> 时间：2012-10-18T11:42:43.013
> 
> 标签：php, mysql, orm, kohana-3

我有扩展 ORM 的 Model_User，`$_has_many`与角色有关系：

```
protected $_has_many = array(
    'roles' => array('model'=>'role','through'=>'users_roles'),
); 
```

我有一个静态函数返回所有活动用户：

```
public static function get_all_active_users()
{
    return self::factory('user')->where('status', '=', 'active')->find_all();
} 
```

我想根据以下 sql 更新函数以仅返回特定角色的用户：

```
SELECT `users`.* FROM `users`
INNER JOIN `users_roles` ON `users_roles`.`user_id` = `users`.`id`
INNER JOIN `roles` ON `roles`.`id` = `users_roles`.`role_id` AND `roles`.`identifier` = 'admin'
WHERE `users`.`status` = 'active' 
```

有没有办法在 get_all_active_users 方法中过滤结果，或者我应该创建一个新方法并手动加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:09:29.803

这对我有用：

```
return self::factory('user')
                ->join('users_roles', 'INNER')->on('users_roles.user_id', '=', 'user.id')
                ->join('roles', 'INNER')->on('roles.id', '=', 'users_roles.role_id')
                ->where(roles.identifier', '=', 'admin')
                ->where('status', '=', 'active')
                ->find_all(); 
```

有兴趣知道任何替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T13:24:48.577

一个更优雅的方法是定义 Role 模型以拥有许多这样的用户：

```
protected $_has_many = array(
  'users' => array('model'=>'user','through'=>'users_roles'),
); 
```

然后像这样通过角色本身获取用户：

```
return self::factory('role')
            ->where('identifier', '=', 'admin')
            ->users->
            ->where('status', '=', 'active')
            ->find_all(); 
```

# jquery - SlideToggle 的 jQuery Parent & Children

> ID：12953814
> 
> 赞同：0
> 
> 时间：2012-10-18T11:43:00.527
> 
> 标签：jquery

我为购物网站构建了一个 CSS 菜单。这个想法是主要类别被点击，然后 slideToggle 启动并加载子类别。我已经建立了原则并且正在研究 jQuery .children

但是，当我单击链接时，什么都没有发生。

我的jQuery如下：

```
$('ul.sub_menu').css('display','none');

$(".nav-list li a.clickable").toggle(function () {
  $(this).children().slideToggle();
}, function() {
  $(this).children().slideToggle();
} 
```

我的 HTML 结构是这样的......

```
<ul class="nav nav-list">
  <li>

    <a class="clickable" href="#">Christmas</a>

    <ul class="sub_menu">
      <li>
        <a href="/~sweetdis/category/wreaths" >Wreaths</a>
      </li>
      <li>
        <a href="/~sweetdis/category/large-logs">Large Logs</a>
      </li>
    </ul>

  </li>
</ul> 
```

我只是在这里遗漏了什么吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:53:41.213

试试这个 -

```
$('.sub_menu').hide();
$('.clickable').click(function(){
    $(this).next('ul').slideToggle();
}); 
```

或者 -

```
$('.ulClass li a:first').click(function(){
    $(this).next('ul').slideToggle();
}); 
```

[**工作演示**](http://jsfiddle.net/7LZUL/)

当你点击时什么都没有发生，`clickable`因为它没有任何孩子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:55:10.997

因为当此锚不存在子级时，您使用with 类`slideToggle`的子级，所以您可以使用：`anchor``clickable`[**`siblings`**](http://api.jquery.com/siblings/)

```
$('ul.sub_menu').css('display','none');

$(".nav-list li a.clickable").click(function () {
    $(this).siblings('ul.sub_menu').slideToggle();
});​ 
```

**小提琴：http :** [//jsfiddle.net/QqMks/](http://jsfiddle.net/QqMks/)

# eclipse - Eclipse 中的自动文本扩展

> ID：12953818
> 
> 赞同：2
> 
> 时间：2012-10-18T11:43:15.930
> 
> 标签：eclipse

在 NetBeans 中，有一个方便的功能可以扩展常见的 Java 指令。例如：

我输入**psfi**并扩展为`private static final int`.

或**Psfs**成为`public static final String`

Eclipse 中是否有等效功能？以及如何配置/启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:45:46.530

转到`Preferences / Java / Editor / Templates`添加您自己的模板。

![在此处输入图像描述](../Images/864d48db474409ab7c49545386c0f17a.png)

我刚刚使用您的模板进行了测试，它按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:22:08.660

还有一些内置的短格式。例如。键入 syso 并按 Ctrl+空格，它将完成它作为 system.out.println(); 或键入 main 并按 CTRl+空格，它将作为 public static void main() 完成

# javascript - 如何通过 Jquery prepend() 对已添加到 HTML 头部的元素实现 Javascript？

> ID：12953820
> 
> 赞同：0
> 
> 时间：2012-10-18T11:43:22.900
> 
> 标签：javascript, jquery

我的头部有这个。

```
<script type="text/javascript" src="post.js"></script> 
```

我希望这个 post.js 也可以应用于新创建的元素。我的另一个名为 main.js 的*js 文件*有一个代码，它从另一个 php 文件中获取数据并将其添加到 div 中，id 为 display.Previous Loaded Div 适用于 post.js 文件，但由于添加了新元素，它不适用于新元素。这是我的 main.js 代码，它从 php 文件中获取数据并将其添加到前面：

```
var auto_refresh8 = setInterval(function() {
    var id = "id="+$(".ally:first").attr("id");
    $.ajax({
        type: "POST",
        url: "get_post.php",
        data: id,
        cache: false,
        success:function(html){
            $('#display').prepend(html);
        }
    });
},2000); 
```

这个 jquery ajax 请求从 get_post.php 文件中获取数据并将其添加到 div 显示中。但是 post.js 中的代码不适用于此。jquery ajax 请求返回的数据包含一个带有类 comm 的 div，必须在按键功能起作用时提交。

以下是 post.js 的代码：

```
$(document).ready( function() {
    $(".comm").keypress(function(e) {
        if(e.which == 13) {
            var id = $(this).attr("id");
            var data = 'id=' + id;
            var post = $(this).val();
            var data1 = 'comment='+post;
            var wholedata = data+'&'+data1;

            $(this).blur();
            $.ajax({
                type: "POST",
                url: "c_insert.php",
                data: wholedata,
                cache: false,
                success:function(html){
                    $('.class_all'+id).append(html);
                }
            });
            return false;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:11:59.173

改为使用委托来处理 post.js 文件中的事件。有关更多信息，请参阅[jQuery 文档](http://api.jquery.com/on/)。

这样的事情应该这样做：

```
$('#display').on('keypress', '.comm', function (e) {
  if(e.which == 13) {
    // Do code on event
  }
}); 
```

请注意，只有在使用 jQuery 1.7 或更高版本时才应使用“on”函数。以前的版本使用“委托”功能。

*编辑*将 $(document).on(...) 更改为 $('#display').on(...)，因为所有 '.comm' 元素都是 '#display' 的子元素。

# jaxb - Java Beans 中的 ObjectFactory 类

> ID：12953826
> 
> 赞同：1
> 
> 时间：2012-10-18T11:43:37.457
> 
> 标签：jaxb

谁能告诉如何从一些 Java bean 生成 ObjectFactory 类？请记住，我没有 xsd，因此我不能使用 JAXB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:11:11.540

JAXB (JSR-222) 实现所做的唯一类生成是来自 XML 模式。从 Java 类开始时，您只需要创建一个类并对其进行注释`@XmlRegistry`。您需要将此类包含在用于引导`JAXBContext`. 这样做的主要原因是利用`@XmlElementDecl`注释将多个根元素与一个类相关联。这是你想要做的吗？

# iphone - iPhone 应用程序 - iPad 上 iOS 6 的初始无响应

> ID：12953828
> 
> 赞同：5
> 
> 时间：2012-10-18T11:43:50.513
> 
> 标签：iphone, ios, ipad, ios6

我有一个在 iPhone 上运行良好的 iPhone 应用程序（在 iOS 6 和 iOS 5 上测试）和运行 iOS 5 的 iPad。但是，在 iOS 6 iPad 上，应用程序最初没有响应，直到从 1x 模式调整到 2x 模式（反之亦然)，或方向改变。

这似乎是操作系统中的一个错误，因为应用程序不应该能够对 1x 或 2x 模式的更改做出反应，但它仍然令人困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T05:55:43.747

我也在我的应用程序上看到了这个问题。我找到了一个解决方案：在 Xcode 项目 -> 目标 -> 摘要中，向下滚动到“状态栏”，选中“可见性”框“在应用程序启动期间隐藏”。完成此操作后，iPhone 应用程序再次在**iPad iOS 6**上运行。

您可能会注意到更改后状态栏是隐藏的。您可以在代码中重新启用它： [application setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:12:56.967

PaiGow 的修复对我有用，但在 iOS 6 的 iPad Retina sim 中，固定在我（仅限横向）屏幕顶部边缘的视图向上移动到状态栏空间，并被虚拟状态栏裁剪，而不是 iPhone“显示”在 iPad 上使用。

相反，我未选中“在应用程序启动期间隐藏”，但仍使用以下行：

```
[application setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

在我的应用程序代表的`applicationDidBecomeActive`电话中。

只需进行此调用就`setStatusBarHidden:withAnimation:`足以使应用程序在 sim 卡和实际设备上再次响应，并且它没有我可以看到的视觉副作用。

我也尝试过拨打电话`application:didFinishLaunchingWithOptions:`，它可以在 sim 中运行；我还没有收到我的 iPad Beta 测试人员的回复，说它在硬件上是否也能正常工作。

# java - 递归函数打印出我认为不应该打印的东西

> ID：12953831
> 
> 赞同：1
> 
> 时间：2012-10-18T11:44:05.600
> 
> 标签：java, recursion

我相信我在编程方面有很好的背景，但今天我遇到了一些让我质疑的事情。这是代码：

```
public class Recursive{
public static void main(String[] args) {
    func(10);        
}

static void func(int x)
{
    if(x > 0) 
    {
        func(x/2);
        System.out.print(x % 2);     // I thought the code won't reach here ever
    }                
} 
```

}

在我看来，这段代码不应该打印任何东西。但是`1010`当我编译它时它实际上会打印出来。如果`System.out.print(x % 2)`是以前写的`func(X/2)`，那是有道理的，但现在看起来不对。对此有何解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:47:16.117

调用 func 然后打印 x%2。

另一方面，如果您使用 return func(x/2)，则永远无法到达 print 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:51:44.943

这很简单。首先，您的函数 func() 获取值 10。它在内部检查 10 > 0。既然是，它调用 func(5 `/*10/2 = 5*/`)。

然后由于 5 > 0，它在内部调用 func(2)。这是因为 0.5 的截断。 `func(2/2 /*= 1*/)`被调用并执行。然后，调用 func(0)，它返回。当它返回时，以 1%2 = 1 执行 Print 语句。内部返回，并以 2 % 2 = 0 再次执行 print 语句。它再次返回并以参数 5 % 2 = 1 再次执行 print 语句。返回最后一个打印语句会再次执行打印 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:49:41.500

它必须对 func 进行第二次调用，然后第一次调用已经完成，它将沿着堆栈向下工作以完成原始函数。

您需要查找基本的递归理论。

[http://en.wikipedia.org/wiki/Recursion_(computer_science](http://en.wikipedia.org/wiki/Recursion_(computer_science) )。

如上所述，使用 return func(x/2) 将从堆栈中删除该函数，因此永远不会到达函数的末尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:01:29.790

```
func(x/2);     ----------------> // Statement # 1
System.out.print(x % 2); ------> // Statement # 2 
```

**`Statement # 2`**如果您返回at**`Unreachable Block`**的值，将会是**`func(x / 2) call`****`Statement # 1`**

`Recursive function calls`存储在`stack`. 因此，对于每次调用，`stack entry`都会进行 a，存储当前调用，然后进行下一次调用。

现在，当您的基本条件达到时，通过弹出函数的先前状态`stack`开始`roll-back`，然后最终到达它开始的位置。

现在，在`func`从堆栈中弹出每个调用之后，执行将`function`在最后一次`func()`调用完成的地方继续执行下一条语句`(Statement # 2 in this case)`，完成后，该函数返回，该函数依次调用堆栈上的下一个函数。（**注意： - 如果你有`return func(x / 2)`代替`func(x / 2)`，那么代码将不会执行下一条语句，而是立即将控制权交给堆栈中的下一个函数。因此`Unreachable Code`**）

因此最后声明

```
System.out.print(x % 2); 
```

将被执行，当`stack`完全清空时，控制权返回到

```
func(x / 2) 
```

函数调用，位于堆栈的底部。

* * *

**所以，你的递归是这样的： -**

**堆栈**： -

```
func(x / 8)  --> Base condition
func(x / 4)  ^
func(x / 2)  ^
func(x)      --> First invocation 
```

假设`x / 8`是基本条件。因此，当`func(x / 8)`完成执行时，执行的下一条语句是：-

`System.out.println(x % 2)`-> 这里 x 的值为**`original-x / 8`**

然后这个函数从堆栈中弹出，并将控制权返回给堆栈中的下一个函数： - `func(x / 4)`，然后执行下一条语句： -

`System.out.println(x % 2)`->`x`这里又是**`original-x / 4`**

等等。然后最终，`System.out.println(x % 2)`被执行**`original-x`**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T12:39:10.197

打印一和零的行为是绝对正确的。

虽然您的 x> 严格大于 0，但您将使用新的 x = int(x/2) 进行更深入的递归，因为 x 是一个整数。

当 x<=1 时，您将获得 x/2==0，因此递归停止，您将开始打印 x/2 的剩余部分。

在你的情况下：

```
f(10)->f(5)->f(2)->f(1)->f(0)  
                          |
  0 <-  1  <- 0  <-  1  <-+ 
```

提示：当我确实遇到此类问题时，我会将 System.out.println() 跟踪代码放入代码中以了解流程。如果您使用的是 Eclipse/Netbeans/Idea，您可以进入调试模式并单步执行您的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T12:04:23.787

嗯，乍一看，我以为它不会打印任何东西，但跟踪代码给了我 1010 是写答案，因为我们永远不会改变 x 的值，我的意思是我们正在对 x 进行操作，但我们正在存储。所以这就是为什么它是 1010什么都没有。

好技巧问题

# javascript - 如何在javascript中引用哈希数组中的数据：Windows 8 Metro

> ID：12953832
> 
> 赞同：0
> 
> 时间：2012-10-18T11:44:06.430
> 
> 标签：javascript, windows-8, microsoft-metro

我以这种方式存储了一些数据：

```
 var protossUnitsArray =
   [
      { name: "Zealot", health:"100", shield:"50", armor:"1", picture: "/images/protoss/zealotPortrait.png" },
      { name: "Stalker", health: "80", shield: "80", armor: "1", picture: "/images/protoss/stalkerPortrait.png" },
      { name: "Sentry", health: "40", shield: "40", armor: "1", picture: "/images/protoss/sentryPortrait.png" },
      { name: "High Templar", health: "40", shield: "40", armor: "0", picture: "/images/protoss/hightemplarPortrait.png" },
      { name: "Dark Templar", health: "40", shield: "80", armor: "1", picture: "/images/protoss/darktemplarPortrait.png" },
      { name: "Immortal", health: "200", shield: "100", armor: "1", picture: "/images/protoss/immortalPortrait.png" }
   ];

   var protossUnitsList = new WinJS.Binding.List(protossUnitsArray);

   var publicMembers =
   {
      itemList: protossUnitsList
   };

   WinJS.Namespace.define("ProtossUnitsData", publicMembers); 
```

如您所见，该数组已公开发布。

我如何从另一个 javascript 文件中实际引用该数组中的数据？

假设我想知道 Stalker 的健康状况（即 80）。假设我知道 Stalkers 总是会成为数组中的第二个项目，不应该是这样的吗

`ProtossUnitsData.itemList[1]['health']`?

但这不太对。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:22:47.283

弄清楚了！其实是：

```
ProtossUnitsData.itemList.getAt(1).health; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:04:28.270

我不了解 Windows 8 和以前称为 Metro 的 UI，但在 JavaScript 中不应该只是：

```
ProtossUnitsData.itemList[1].health 
```

## 编辑

查看文档，似乎`WinJS.Binding.List`公开了处理列表中数据的方法。有关更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh700774.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh700753.aspx)，但看起来您想使用：

```
var item = ProtossUnitsData.getItem(1),
    data = item.health; 
```

那可能行得通...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:07:55.930

如果你想从数组中访问第二个项目`protossUnitsArray`，不应该是：

```
protossUnitsArray[1].health 
```

# android - java.lang.IllegalArgumentException：已添加：Lorg/jbox2d/callbacks/ContactFilter；

> ID：12953834
> 
> 赞同：0
> 
> 时间：2012-10-18T11:44:09.080
> 
> 标签：android, jbox2d

我有一个 android 项目，正在尝试添加 JBox2D 并添加“jox2d-library-2.1.2.2.jar”作为 Java Build Path|Libraries 和 Android Dependencies 中的引用库，并且在这两种情况下都会出现运行时错误：

意外的顶级异常：java.lang.IllegalArgumentException：已添加：Lorg/jbox2d/callbacks/ContactFilter；

我只是不明白为什么这会失败，因为只添加了一个 JBox2D 库 jar 的实例。

有没有其他人遇到过这个问题？

每次在执行运行之前，我都会执行项目清理。

此外，我还看到其他 Android 开发人员在不同的项目中遇到了类似的问题：

[https://stackoverflow.com/questions/2680](https://stackoverflow.com/questions/2680) ... ternal-jar

我已经尝试了他们的建议，但没有运气。

格雷厄姆

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T12:44:57.577

如果您的 ADT 2.0 或更高版本的 lib 文件不起作用。

解决方案： - 删除 lib 文件 - 从 java 构建路径中删除外部 jar 文件引用 - 创建 libs 文件 - 在此处复制 jar 文件（不要从 java 构建路径中引用） - 清理您的项目

现在它可以运行了

# ios - 在视网膜屏幕上绘制错误

> ID：12953839
> 
> 赞同：0
> 
> 时间：2012-10-18T11:44:16.367
> 
> 标签：ios, xcode

我正在做“绘图”项目。我的项目在屏幕上运行良好。但是当我在视网膜屏幕上测试它时，我得到了像这个 [视网膜屏幕这样的图像！](http://c1210.hizliresim.com/12/l/f1m6z.png) 它在 ipad2 上运行良好。

我的代码的一部分：

```
 CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
        CGPoint mid2 = midPoint(currentPoint, previousPoint1);
        [curImage drawAtPoint:CGPointMake(0, 0)];
        CGContextRef context = UIGraphicsGetCurrentContext(); 
        [self.layer renderInContext:context];
        CGContextMoveToPoint(context, mid1.x, mid1.y);
        CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
        if(previousPoint1.x == previousPoint2.x && previousPoint1.y == previousPoint2.y && previousPoint1.x == currentPoint.x && previousPoint1.y == currentPoint.y)
        {
            CGContextSetLineCap(context, kCGLineCapRound);

        }
        else 
        {
            CGContextSetLineCap(context, kCGLineCapRound);
        }

        CGContextSetBlendMode(context, kCGBlendModeNormal);
        CGContextSetLineJoin(context, kCGLineJoinRound);
        CGContextSetLineWidth(context, self.lineWidth);
        CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
        CGContextSetShouldAntialias(context, YES);  
        CGContextSetAllowsAntialiasing(context, YES); 
        CGContextSetFlatness(context, 0.1f);
        CGContextSetAlpha(context, self.lineAlpha);
        CGContextStrokePath(context); 

- (void) calculateMinImageArea:(CGPoint)pp1 :(CGPoint)pp2 :(CGPoint)cp{ 
```

CGPoint mid1 = midPoint(pp1, pp2); CGPoint mid2 = midPoint(cp, pp1);

```
CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
CGPathAddQuadCurveToPoint(path, NULL, pp1.x, pp1.y, mid2.x, mid2.y);
CGRect bounds = CGPathGetBoundingBox(path);
CGPathRelease(path);

CGRect drawBox = bounds;

//Pad our values so the bounding box respects our line width
drawBox.origin.x        -= self.lineWidth * 1;
drawBox.origin.y        -= self.lineWidth * 1;
drawBox.size.width      += self.lineWidth * 2;
drawBox.size.height     += self.lineWidth * 2;

UIGraphicsBeginImageContext(drawBox.size);
[self.layer renderInContext:UIGraphicsGetCurrentContext()];
curImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[self setNeedsDisplayInRect:drawBox];
[[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate date]];

  CGPoint midPoint(CGPoint p1, CGPoint p2)
{
    return CGPointMake((p1.x + p2.x) * 0.5, (p1.y + p2.y) * 0.5);} 
```

# python - 在 python 和 pyGTK 中处理后激活和禁用按钮

> ID：12953840
> 
> 赞同：5
> 
> 时间：2012-10-18T11:44:19.083
> 
> 标签：python, pygtk, popen

本质上，我试图首先使按钮“活动”，运行一个进程，然后在该进程完成运行后，再次禁用该按钮。

使用 pyGTK 和 Python，有问题的代码看起来像这样......

```
self.MEDIA_PLAYER_STOP_BUTTON.set_sensitive(True) #Set button to be "active"
playProcess = Popen("aplay " + str(pathToWAV) + " >/dev/null 2>&1",shell=True) #Run Process
playProcess.wait() #Wait for process to complete    
self.MEDIA_PLAYER_STOP_BUTTON.set_sensitive(False) #After process is complete, disable the button again 
```

但是，这根本不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:20:33.290

一切正常（python 2.7.3）。但是如果你在 gui 线程中调用 playProcess.wait() - 你会冻结 gui 线程而不重绘（对不起，我的英语不是很好）。你确定你尝试使用 subprocess.popen() 吗？也许是 os.popen()？

我的小测试：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pygtk, gtk, gtk.glade
import subprocess

def aplay_func(btn):
        btn.set_sensitive(True)
        print "init"
        playProcess = subprocess.Popen("aplay tara.wav>/dev/null 2>&1", shell=True)
        print "aaa"
        playProcess.wait()
        print "bbb"
        btn.set_sensitive(False)

wTree = gtk.glade.XML("localize.glade")
window = wTree.get_widget("window1")
btn1 = wTree.get_widget("button1")
window.connect("delete_event", lambda wid, we: gtk.main_quit())
btn1.connect("clicked", aplay_func)
window.show_all()
gtk.main() 
```

结果：

```
init
aaa
bbb 
```

是的，按钮工作正常。声音也。

# ruby-on-rails - Rails：Globalize3 和 batch_translations

> ID：12953842
> 
> 赞同：0
> 
> 时间：2012-10-18T11:44:26.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, translation, globalize3

我正在使用 rails 3.2.8、globalize3 和 batch_translations 为一个小 cms 和 shop 系统翻译特定内容。我将它集成到一个模型上的一个翻译没有问题。所以一切都很好。我开始为我的其他模型添加此功能并且..shhhhh 奇怪的事情发生了。

现在的状态：我可以创建带有翻译的新内容。一切都好。但是，如果我尝试编辑/更新翻译表中的值，什么也不会发生！也许在 batch_translations 或其他东西中有错误的参数路径...

这是类别的示例！

迁移文件

```
class CreateCategories < ActiveRecord::Migration
  def self.up
    create_table :categories do |t|
      t.timestamps
    end
    Category.create_translation_table! :category_name => :string, :description => :string
  end

  def self.down
    Category.drop_translation_table!
    drop_table :categories
  end
end 
```

模型：

```
class Category < ActiveRecord::Base
  attr_accessible :category_name, :description

  attr_accessible :translations_attributes
  translates :category_name, :description
  has_many :translations
  accepts_nested_attributes_for :translations

  class Translation
    attr_accessible :locale, :category_name, :description
  end
end 
```

我写的这个奇怪的类翻译是因为我在语言环境等方面遇到了质量分配错误......

形式：

```
<div>
  <%= form_for @category, html: { :multipart => true } do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <%= build_translation_text_field f, :category_name, :description  %>
    <%= f.submit (t ".save"), class: "btn btn-large btn-primary" %>
  <% end %>
</div> 
```

我的翻译表格的助手：

```
def build_translation_text_field(f, *atts)
  tag = content_tag(:h1, "Test")
  I18n.available_locales.each do |l|
    f.globalize_fields_for l do |g|
      atts.each do |a|
        tag += content_tag(:div, content_tag(:h4, t(a)+":"))
        tag += (g.text_field a, class: l)
      end
    end
  end
  tag
end 
```

categories_controller 更新方法：

```
def create
  @category = Category.new(params[:category])
  if @category.save
    @categories = Category.all
    flash[:success] = t(:category_created)
    respond_to do |format|
      format.html {render 'index'}
      format.js
    end
  else
    flash[:error] = @category.errors.full_messages.each {|msg| p msg}
    @categories = Category.all
    respond_to do |format|
      format.html {render 'new'}
      format.js
    end
  end
end

def update
  @category = Category.find(params[:id])
  if @category.update_attributes(params[:category])
    @categories = Category.all
    flash[:success] = t(:category_updated)
    respond_to do |format|
      format.html {render 'index'}
      format.js
    end
  else
    flash[:error] = @category.errors.full_messages.each {|msg| p msg}
    @categories = Category.all
    respond_to do |format|
      format.html {render 'edit'}
      format.js
    end
  end
end 
```

任何人都有想法或有两个模型的工作示例，带有一个或多个翻译属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:25:41.517

我的错：

模型更新：

```
class Category < ActiveRecord::Base
  attr_accessible :category_name, :description

  attr_accessible :translations_attributes
  translates :category_name, :description
  # has_many :translations <-- delete this
  accepts_nested_attributes_for :translations

  class Translation
    attr_accessible :locale, :category_name, :description
  end
end 
```

# jquery - JQuery Datatables行索引未根据页面显示

> ID：12953843
> 
> 赞同：3
> 
> 时间：2012-10-18T11:44:27.413
> 
> 标签：jquery, indexing, row, datatables

我正在使用[Jquery](http://datatables.net/)数据表来构建一个表。我需要为我拥有的每一行创建一个行索引。但是当我切换到下一页时，行索引重置为 1。我需要从第一页最后一行继续行索引，这意味着如果我的页面大小为 10，那么第二页第一行应该以 11 而不是 1 开头。我的问题与此图像[SAMPLE](https://dl.dropbox.com/u/18686477/Untitled.png)相同。请帮我检查我的代码有什么问题。非常感谢 ：）

```
var oTable = $('#myDataTable').dataTable({
                "bServerSide": true,
                "bJQueryUI": true,
                "bProcessing": true,
                "sAjaxSource": sAjaxPage.toString(),
                "sPaginationType": "full_numbers",
                "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    debugger;
                    var index = iDisplayIndexFull + 1;
                    $("td:first", nRow).html(index);
                    return nRow;
                },
      "fnServerParams": function (aoData) {
                    aoData.push({ "name": "pTransactionDateFrom", "value": pTransactionDateFrom });
                    aoData.push({ "name": "pTransactionDateTo", "value": pTransactionDateTo });
                    aoData.push({ "name": "pTransactionNo", "value": pTransactionNo });
                },
                "aoColumns": [
                        {
                            "bSort": false,
                            "bSearchable": false,
                            "bSortable": false,
                            "bFilter": false
                        },
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null
                    ]
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:56:13.213

我找到了解决我的问题的方法。不是标准，但它正在工作。:)

```
"fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {

                    var numStart =  this.fnPagingInfo().iStart;

                    var index = numStart +  iDisplayIndexFull + 1;
                    $("td:first", nRow).html(index);
                    return nRow;
                }, 
```

数据表 api 是[http://datatables.net/plug-ins/api#fnPagingInfo](http://datatables.net/plug-ins/api#fnPagingInfo)

```
$.fn.dataTableExt.oApi.fnPagingInfo = function (oSettings) {
    return {
        "iStart": oSettings._iDisplayStart,
        "iEnd": oSettings.fnDisplayEnd(),
        "iLength": oSettings._iDisplayLength,
        "iTotal": oSettings.fnRecordsTotal(),
        "iFilteredTotal": oSettings.fnRecordsDisplay(),
        "iPage": Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength),
        "iTotalPages": Math.ceil(oSettings.fnRecordsDisplay() / oSettings._iDisplayLength)
    };
}; 
```

# excel - excel 2007 以 ssas 为中心

> ID：12953848
> 
> 赞同：0
> 
> 时间：2012-10-18T11:44:40.920
> 
> 标签：excel, ssas

我是新来的。

我在 SSAS 的 excel 2007 中构建了一个数据透视报告。它连接到我本地电脑上的立方体。现在我想将此数据透视报告发送给其他人，让他们能够查看数据透视报告并自己进行一些分析（扩展年月日等）。

当我的同事尝试时，他无法扩展。

我怎样才能做到这一点？

谢谢你，年

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:14:01.490

您的同事需要能够访问多维数据集才能刷新它。这意味着您的多维数据集应该在共享机器上（如服务器）。我建议将多维数据集放在服务器上并设置数据库只读用户登录名并设置 Excel 文件以使用该用户名/密码。您可能可以访问您的本地计算机，但我没有这方面的经验，无论如何我都会建议您不要这样做（如果您的计算机上没有您的计算机，您的用户将无法刷新多维数据集网络）。

此外，即使您向他们发送包含从多维数据集缓存的数据的文件，也只会缓存这么多数据。展开项目时，如果缓存了特定数据，则不需要从多维数据集（在您的机器/服务器上）请求数据。创建过滤器时可能会发生同样的情况。

# ruby-on-rails - 嵌套的 ActiveRecords：找到许多父母的许多孩子

> ID：12953854
> 
> 赞同：1
> 
> 时间：2012-10-18T11:45:02.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在我的 Rails 3.2 应用程序中，连接器 has_many Incidents。

要获取某个连接器的所有事件，我可以这样做：（在控制台中）

```
c = Connector.find(1) # c.class is Connector(id: integer, name: string, ...
i = c.incidents.all # all good, lists incidents of c 
```

但是我怎样才能得到许多连接器的所有事件呢？

```
c = Connector.find(1,2) # works fine, but c.class is Array
i = c.incidents.all #=> NoMethodError: undefined method `incidents' for #<Array:0x4cc15e0> 
```

应该很容易！但我不明白！

这是我的 statistics_controller.rb 中的完整代码

```
class StatisticsController < ApplicationController
  def index

    @connectors = Connector.scoped

    if params['connector_tokens']
      logger.debug "Following tokens are given:  #{params['connector_tokens']}"
      @connectors = @connectors.find_all_by_name(params[:connector_tokens].split(','))
    end

    @start_at = params[:start_at] || 4.weeks.ago.beginning_of_week
    @end_at = params[:end_at] || Time.now

    #@time_line_data = Incident.time_line_data( @start_at, @end_at, 10) #=> That works, but doesn’t limit the result to given connectors
    @time_line_data = @connectors.incidents.time_line_data( @start_at, @end_at, 10) #=> undefined method `incidents' for #<ActiveRecord::Relation:0x3f643c8>
    respond_to do |format|
      format.html # index.html.haml
    end
  end
end 
```

* * *

## **参考下面的前 3 个答案进行编辑：**

伟大的！使用下面的代码，我得到一个包含给定连接器的所有事件的数组。

```
c = Connector.find(1,2)
i = c.map(&:incidents.all).flatten 
```

但理想情况下，我想获得一个 Active Records 对象而不是数组，因为我想在其上调用 where()，如下面的方法`time_line_data`所示。

我可以通过阵列达到我的目标，但我需要改变整个策略......

这是我`time_line_data()`在事件模型模型/incidents.rb

```
 def self.time_line_data(start_at = 8.weeks.ago, end_at = Time.now, lim = 10)
        total = {}
        rickshaw = []
        arr = []
        inc = where(created_at: start_at.to_time.beginning_of_day..end_at.to_time.end_of_day)

        # create a hash, number of incidents per day, with day as key
        inc.each do |i|
          if total[i.created_at.to_date].to_i > 0
            total[i.created_at.to_date] += 1
          else
            total[i.created_at.to_date] = 1
          end
        end
        # create a hash with all days in given timeframe, number of incidents per day, date as key and 0 as value if no incident is in database for this day
        (start_at.to_date..end_at.to_date).each do |date|
          js_timestamp = date.to_time.to_i
          if total[date].to_i > 0
            arr.push([js_timestamp, total[date]])
            rickshaw.push({x: js_timestamp, y: total[date]})
          else
            arr.push([js_timestamp, 0])
            rickshaw.push({x: js_timestamp, y: 0})
          end
        end

        { :start_at => start_at,
          :end_at => end_at,
          :series => rickshaw #arr

}
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:46:38.657

参考：-[地图](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)

```
c = Connector.find(1,2)
i = c.map(&:incidents.all).flatten 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:00:57.880

由于您似乎只对时间线数据感兴趣，您可以进一步扩展之前给出的地图示例，例如：

```
@time_line_data = @connectors.map do |connector|
  connector.incidents.map do |incident|
    incident.time_line_data(@start_at, @end_at, 10)
  end
end 
```

这将映射/收集连接器集合中所有事件的 time_line_data 方法调用的所有返回值。

# c# - 如何以编程方式在 DNN 中的页面上添加模块

> ID：12953855
> 
> 赞同：2
> 
> 时间：2012-10-18T11:45:08.737
> 
> 标签：c#, dotnetnuke, dotnetnuke-module

到目前为止，我已经尝试使用下面的代码通过 DNN 页面上的代码添加模块。

```
 protected void Page_Load(object sender, EventArgs e)
{
       ModuleController MC = new ModuleController();
       ModuleInfo MInfo = new ModuleInfo();
       MInfo = MC.GetModule(507, 116,false);//Just Hard coded for testing 
       MInfo.TabID = PortalSettings.ActiveTab.TabID;
       MInfo.PaneName = "ContentPane";
       MInfo.Alignment = "left";
       MC.AddModule(MInfo);//Line throwing error :-

} 
```

我正在尝试添加一个模块，该模块存在于我当前的选项卡或事件页面上。`tabid=116`但最后一行抛出一个错误说`moduleId=507``pageLoad`

```
"Violation of UNIQUE KEY constraint 'IX_TabModules_UniqueId'. Cannot insert duplicate key in object 'dbo.TabModules'. The duplicate key value is (555ba77a-be19-40a0-bb72-559672230345)." 
```

请告诉我我在哪里做错了？这是添加模块的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:30:48.003

我注意到的第一件事是您正在有效地尝试将模块的相同实例添加到数据库中。您已经更改了`TabID`，但实例中的所有其他 ID`ModuleInfo`仍然存在。

查看[DNN 如何添加现有模块](https://github.com/dnnsoftware/Dnn.Platform/blob/6d382d62f0719a614c10370efa6dd70be879a644/Website/admin/ControlPanel/AddModule.ascx.cs#L433-L542)（查看`DoAddExistingModule`方法），他们首先调用`Clone()`实例`ModuleInfo`，然后重置`UniqueId`（这是您遇到的约束）：

```
newModule.UniqueId = Guid.NewGuid(); 
```

# c# - 自定义表单未显示

> ID：12953858
> 
> 赞同：0
> 
> 时间：2012-10-18T11:45:19.317
> 
> 标签：c#, .net, forms

我使用可视化编辑器在 C#.NET 中设计了一个 Windows 窗体。我想从另一个表单调用这个表单。但是没有从另一个表单中检测到该表单。设计的来自称为**DataList**，主要代码如下 -

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace DataList
{
    public partial class DataList : Form
    {
        //code, functions etc.
    }
} 
```

当我使用它从另一个表单调用它时，`DataList.Show();`它会突出显示*DataList*并显示错误 -*当前上下文中不存在名称 DataList。*

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:48:55.210

`DataList`是一个不能直接调用任何非静态函数/方法的类。

您需要创建它的一个实例。

```
(new DataList()).Show(); 
```

或者可能

```
DataList myDataList;
myDataList = new DataList();
myDataList.Show();

// Do whatever you want? 
```

如果万一它*仍然*失败，那*就是*命名空间问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:49:25.647

不要使用 NameSpace Name 和 Class Name SAME。

使用此[链接](http://msdn.microsoft.com/en-us/library/ms229026.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:03:55.690

对类使用 static 然后你可以运行 class.show();

# php - PHP正则表达式匹配第一次出现？

> ID：12953863
> 
> 赞同：2
> 
> 时间：2012-10-18T11:45:37.720
> 
> 标签：php, regex

```
http://someurlhere.com|http://sometexturl.com|sometexthere 
```

我只想提取 | 之前的第一个 url , [http://someurlhere.com](http://someurlhere.com)

我写了正则表达式

```
\bhttp(.*)\|\b 
```

但它捕获了所有发生的|

感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T11:47:27.300

使不`.*`贪心：`.*?`

```
\bhttp(.*?)\|\b 
```

如果您只想在第一个之后匹配`|`：

```
\|http://(.*?)\| 
```

有了这个，网址就在`$1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:48:19.890

这不是一个确切的答案，但我会向您指出可以帮助您解决此问题的信息！

[正则表达式：匹配字符的第一次出现](https://stackoverflow.com/questions/2013124/regex-matching-up-to-the-first-occurrence-of-a-character)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:50:09.940

不需要正则表达式。我看到你把它标记为 PHP。

```
$boom = explode('|', 'http://someurlhere.com|sometexturl.com|sometexthere');
$url = $boom[0];
echo $url; 
```

输出：

```
http://someurlhere.com 
```

[http://codepad.org/xnW0FTfA](http://codepad.org/xnW0FTfA)

# javascript - 使用 javascript 禁用弹出链接 5 秒

> ID：12953864
> 
> 赞同：0
> 
> 时间：2012-10-18T11:45:42.107
> 
> 标签：javascript, jquery, printing, popup, disable-link

对于一个项目，我需要使用 PHP 代码打印一个文档。目前我有一个自动关闭弹出窗口来开始打印。

我遇到的唯一问题是用户可能会向按钮发送垃圾邮件，从而创建大量打印请求和庞大的队列。

我现在拥有的代码：

```
function newPopup(url) {
popupWindow = window.open(
url,'popUpWindow','height=10,width=100,left=10,top=10,resizable=no,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=no');    // Verstop op achtergrond
popupWindow.blur();
}
<a href="JavaScript:newPopup('print.php');">Print</a> 
```

我找到了一些停止链接的代码，但是我在实现这些代码时遇到了问题，因为我已经将其称为弹出窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:51:16.430

您可以使用标志：

```
var flag=true;
function newPopup(url) {
  if(flag) {
    window.open(...).blur();
    flag=false;
    window.setTimeout(function(){flag=true;},5*1000);
  }
} 
```

不是一个“好的”解决方案（使用全局变量），但它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:53:52.913

您可以在打开弹出窗口之前禁用该链接，然后在五秒钟后重新启用它。*问题*是启用/禁用链接不能以非常便携的方式完成。要解决此问题，您必须保存实际链接，将其替换为假链接，然后稍后重新启用它（当间隔过去时）。像这样：

```
function newPopup(url) {
    // Save current link and replace it with a fake one
    var oldLink = $("#linkid").attr("href");
    $("#linkid").attr("href", "#");

    setinterval(function() {
        // Restore true link
        $("#linkid").attr("href", oldLink);
    }, 5000);

    // ...
} 
```

您可以将此代码提取到一个单独的函数`temporaryDisableLink(id, timeout)`中，以便将其用于许多不同的链接（不会污染所有其他代码）。

**现在让我们探索其他解决方案。**

您的 HTML 代码必须更新为（如果您想对许多链接重复使用相同的函数，否则您不需要传递链接 id 参数）到：

```
<a id="link-print" 
   href="JavaScript:newPopup('#link-print', 'print.php');">
   Print
</a> 
```

IE（和 Opera）不支持 CSS 属性，`pointer-events`所以我不建议在现实世界中使用它。反正就是：

```
function newPopup(id, url) {
    $(id).css("pointer-events", "none");

    setinterval(function() {
        $(id).css("pointer-events", "auto");
    }, 5000);

    // ...
} 
```

因为您使用 JavaScript 打开弹出窗口，您可能会考虑稍微更改函数以使用*自定义* `disabled`属性（或检查`pointer-events`您是否打算一起使用它们）：

```
function newPopup(id, url) {
    if ($(id).attr("disabled") == "disabled") {
        return false;
    }

    $(id).attr("disabled", "disabled");
    setinterval(function() {
        $(id).removeAttr("disabled");
    }, 5000);

    // ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T13:35:01.290

```
<script>
    function newPopup(url) {
        setTimeout(function () {
            popupWindow = window.open(
url, 'popUpWindow', 'height=10,width=100,left=10,top=10,resizable=no,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=no');    // Verstop op achtergrond
            popupWindow.blur();
        },5000
        );
    }
</script>
<a href="JavaScript:newPopup('print.php');">Print</a> 
```

# ios - 应用商店中未显示希腊语本地化

> ID：12953867
> 
> 赞同：0
> 
> 时间：2012-10-18T11:45:51.507
> 
> 标签：ios, localization, app-store

我上传了一个应用程序，最近我尝试对其进行本地化。
默认语言是英语，但我也想要希腊语（该应用程序是希腊语）。
我在 iTunes 连接中创建了元数据，并且我添加了希腊语作为活动语言。
我也成功地本地化了这个项目。甚至捆绑显示名称也有效。
问题是在应用商店中显示了英文名称和描述，即使在希腊应用商店中也是如此。
同样在iTunes Connect中的版本摘要中，选择了希腊时，它显示了英文描述。

是否可以选择告诉希腊应用商店它需要希腊语翻译的元数据？我是否必须在应用程序的 plist 中添加任何行？
我看到有一些用于本地化的键，但我还没有尝试过。
此外，我只本地化了包显示名称。我还需要本地化捆绑名称吗？我认为应用商店不会从 plist 中获取这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:56:52.887

希腊 App Store 未本地化。所以一切都会以英文显示。

为了让您的应用程序显示希腊语翻译，您必须将手机的语言切换为希腊语并以这种方式测试应用程序。

如果它没有出现在希腊语中，那么您应该验证 localizable.strings 文件是否在您的项目中正确设置。

你也应该这样做，大多数希腊开发人员正在做的事情，这意味着在英语元数据部分输入希腊描述。

# jquery - 主干视图初始化代码

> ID：12953868
> 
> 赞同：1
> 
> 时间：2012-10-18T11:45:59.160
> 
> 标签：jquery, backbone.js

我有一些依赖于 jQuery 插件的主干视图，例如：

```
$("#phone").mask("(999) 999-9999") 
```

只是想知道在哪里添加这个推荐的地方。渲染调用？

```
class App.Views.Chrome extends Backbone.View
   render: ->
      header = new App.Views.Header()
      @$el.html header.render().el
      $("#phone").mask("(999) 999-9999")
      @ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:54:23.387

那正是我要说的地方。这样，每次渲染此视图时，都会应用蒙版，任何依赖于此的代码或 UI 体验都可以依赖于它已被应用的事实。

我倾向于在`render`代码中放置很多东西，例如，保留指向特定节点或节点集合的 jQuery 对象的缓存副本，这样我每次引用它们时都不必使用 jQuery 选择器查找它们, 表示它们是 jQuery 对象，通过在它们的名称前加上`$`.

`@$divMain = @$el.find('#divMain');`

# haskell - ByteString 或 Text 上是否有 monadic/applicative map（即 traverse/mapM）函数？

> ID：12953871
> 
> 赞同：5
> 
> 时间：2012-10-18T11:46:27.643
> 
> 标签：haskell, text, map, traversal, bytestring

[ByteString](http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html#g:4)和[Text](http://hackage.haskell.org/packages/archive/text/latest/doc/html/Data-Text.html#g:7)有标准（纯）映射函数：

```
map :: (Word8 -> Word8) -> ByteString -> ByteString
map :: (Char -> Char) -> Text -> Text 
```

但我错过了他们的一元/应用同行：

```
traverse :: (Applicative f) => (Word8 -> f Word8) -> ByteString -> f ByteString
traverse :: (Applicative f) => (Char -> f Char) -> Text -> f Text 
```

（如果我们有`traverse`，我们可以定义`mapM f = unwrapMonad . traverse (WrapMonad . f)`。）

我试着翻看包裹，试过 Hoogle，但没有找到。我忽略了什么吗？或者是否有它们丢失的原因（比如不可能/容易有效地定义它们）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:20:38.077

顺便说一句，您在 Edward Kmett 的[`lens`](http://hackage.haskell.org/package/lens)软件包中拥有您所需要的东西；您想要的`traverse`版本只是`Data.Bytestring.Lens.bytes`和`Data.Text.Lens.text`.

**编辑：** 为了澄清，上述功能是（泛化）类型`SimpleTraversal c e`（分别为`(c ~ Bytestring, e ~ Word8)`和`(c ~ Text, e ~ Char)`），这是类型同义词`forall f. (Applicative f) => (e -> f e) -> c -> f c`

# c# - XPathNodeIterator 从迭代数据中访问子节点

> ID：12953874
> 
> 赞同：3
> 
> 时间：2012-10-18T11:46:31.917
> 
> 标签：c#, xml, xpath, xpathnodeiterator

```
<?xml version="1.0"?>

-<bookstore>            
        <book > 
            <title>aaaa</title> 
            -<author > 
                <first-name>firts</first-name> 
                <last-name>last</last-name> 
            </author> 
            <price>8.23</price> 
            <otherbooks>
                    <book > 
                        <title>bbb</title>      
                        <price>18.23</price> 
                    </book>     
                    <book > 
                        <title>ccc</title>      
                        <price>11.22</price> 
                    </book>     
            </otherbooks>
        </book> 
</bookstore> 
```

我已经从 xml 文件中选择了所有书籍。如何使用 XPath 为每本书选择标题、作者（名字和姓氏）和价格？

```
xPathDoc = new XPathDocument(filePath);
xPathNavigator = xPathDoc.CreateNavigator();
XPathNodeIterator xPathIterator = xPathNavigator.Select("/bookstore//book");
foreach (XPathNavigator book in xPathIterator)
{
    ??
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T12:13:13.237

使用`SelectSingleNode()`和`Value`：

```
 XPathDocument xPathDoc = new XPathDocument(filePath); 
  XPathNavigator xPathNavigator = xPathDoc.CreateNavigator(); 
  XPathNodeIterator xPathIterator = xPathNavigator.Select("/bookstore//book"); 
  foreach (XPathNavigator book in xPathIterator) 
  {
    XPathNavigator nav = book.SelectSingleNode("title");
    string title = nav==null ? string.Empty : nav.Value;
    nav = book.SelectSingleNode("author/first-name");
    string authorFirstName = nav==null ? string.Empty : nav.Value;
    nav = book.SelectSingleNode("author/last-name");
    string authorLastName = nav==null ? string.Empty : nav.Value;
    nav = book.SelectSingleNode("price");
    string price = nav==null ? string.Empty : nav.Value;;
    Console.WriteLine("{0} {1} {2} {3}", title, authorFirstName, authorLastName, price);
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:57:33.813

您可以使用 LINQ2XML

```
XElement doc=XElement.Load("yourXML.xml");//loads your xml
var bookList=doc.Descendants().Elements("book").Select(
x=>//your book node
    new{
           title=x.Element("title").Value,
           author=new //accessing your author node
           {
               firstName=x.Element("author").Element("first-name").Value,
               lastName=x.Element("author").Element("last-name").Value
           },
           price=x.Element("price").Value
       }
); 
```

`bookList`现在拥有你想要的所有元素

所以，你现在可以这样做

```
foreach(var book in bookList)
{
book.title;//contains title of the book
book.author.firstName;//contains firstname of that book's author
book.author.lastName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T17:03:39.807

我喜欢 Mimo 提供的解决方案，但有一个微小的变化，创建了一个扩展方法来重用部分功能：

```
public static class XPathNavigatorExtensions
{
    public static string GetChildNodeValue(this XPathNavigator navigator, string nodePath)
    {
        XPathNavigator nav = navigator.SelectSingleNode(nodePath);
        return nav == null ? string.Empty : nav.Value;
    }
} 
```

生成的代码看起来更干净：

```
 ICollection<Book> books = new List<Book>();
        foreach (XPathNavigator node in iterator)
        {
            Book book = new Book() { Author = new Author() };
            book.Title = node.GetChildNodeValue("title");
            book.Author.FirstName = node.GetChildNodeValue("author/first-name");
            book.Author.LastName = node.GetChildNodeValue("author/last-name");
            book.Price = node.GetChildNodeValue("price");
            books.Add(book);
        } 
```

# jquery - Jquery datepicker beforeShow 似乎没有传递实例

> ID：12953878
> 
> 赞同：3
> 
> 时间：2012-10-18T11:46:39.000
> 
> 标签：jquery, jquery-ui, datepicker

这是 JS 小提琴：

[http://jsfiddle.net/UEnqL/](http://jsfiddle.net/UEnqL/)

```
$("#datepicker").datepicker({ dateFormat: 'dd/mm/yy', beforeShowDay: myFunction});

function myFunction(input, inst)
{
    alert(inst);
} 
```

根据文档：[http ://docs.jquery.com/UI/API/1.8/Datepicker#event-beforeShow](http://docs.jquery.com/UI/API/1.8/Datepicker#event-beforeShow)

该`beforeshowDay`方法接受输入和 inst。虽然 inst 似乎总是未定义。这让我有些悲伤，因为我需要掌握日期选择器本身。

有解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:52:25.040

`beforeshowDay`回调只有一个参数；`date`根据文档的对象。`beforeShow`但是，正如您提到的，回调有 2 个参数。

`beforeShowDay`- [http://docs.jquery.com/UI/API/1.8/Datepicker#event-beforeShowDay](http://docs.jquery.com/UI/API/1.8/Datepicker#event-beforeShowDay)

检查这个**演示**：http: [//jsfiddle.net/UEnqL/6/](http://jsfiddle.net/UEnqL/6/)

如您所见，`beforeShow`回调正确地传入了元素和实例。`beforeshowDay`传递的只是一个日期对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:57:38.950

我想你说的是`beforeShow`，不是`beforeShowday`。 [这](http://jsfiddle.net/UEnqL/9/)是小提琴。

# android - 基类成员函数直接访问子类成员函数？

> ID：12953883
> 
> 赞同：0
> 
> 时间：2012-10-18T11:46:58.957
> 
> 标签：android, c++, inheritance, virtual-functions

基类成员函数是否可以直接访问子类成员函数？

我从 Androind 找到了代码，**BufferQueue**继承了**BnSurfaceTexture**，并且有一个成员函数“requestBuffer”。

在基类**BnSurfaceTexture**中，我发现它只是直接调用 requestBuffer 。

基类**BnSurfaceTexture**如何知道函数“requestBuffer”？

谢谢

基类成员函数：

```
status_t BnSurfaceTexture::onTransact(
    uint32_t code, const Parcel& data, Parcel* reply, uint32_t flags)
{
    switch(code) {
        case REQUEST_BUFFER: {
            CHECK_INTERFACE(ISurfaceTexture, data, reply);
            int bufferIdx   = data.readInt32();
            sp<GraphicBuffer> buffer;
            /* it call requestBuffer directly */ <--------
            int result = requestBuffer(bufferIdx, &buffer);
            reply->writeInt32(buffer != 0); 
```

子类声明和实现：

```
class BufferQueue : public BnSurfaceTexture {

private:
    virtual status_t requestBuffer(int slot, sp<GraphicBuffer>* buf);

status_t BufferQueue::requestBuffer(int slot, sp<GraphicBuffer>* buf) {
    ATRACE_CALL();
    ST_LOGV("requestBuffer: slot=%d", slot);
    Mutex::Autolock lock(mMutex);
    ...
    return NO_ERROR;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:50:32.053

> 基类 BnSurfaceTexture 如何知道函数“requestBuffer”？

这个函数必须*至少*在基类中声明（它可以用一些默认实现来定义）并且它必须是`virtual`.

因此，在编译时，编译器会看到这样的函数存在。
函数调用在运行时解析。这就是多态性。

* * *

小例子：

```
class Base
{
public:
    virtual void f() { /* Base */ } // could be pure virtual
    virtual void g() { f(); };
};

class Derived: public Base
{
public:
    virtual void f() { /* derived */ }
}; 
```

当你有

```
Base* pB = new Derived;
pB->g(); 
```

`g()`会打电话`Derived::f`；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:58:34.940

只要确保基类函数被*声明*，派生类在基类函数定义*之前**定义*。这是一个例子

```
#include <iostream>

class Base
{
    public :

    void call_derived ();
};

class Derived : public Base
{
    public :

    void derived_fun ()
    {
        std::cout << "Derived class member function called!" << std::endl;
    }
};

void Base::call_derived ()
{
    static_cast<Derived *>(this)->derived_fun();
}

int main ()
{
    Derived dobj;
    dobj.call_derived();

    return 0;
} 
```

但是，这种使用是不安全的，如果您尝试不完整的对象`static_cast`，编译器不会抱怨。`call_derived`但是，您可以添加一个断言`assert(dynamic_cast<Derived *>(this)`，至少在调试模式下，用于调试目的。或者，您可以声明基类的构造函数 destructor `protected`，以防止创建不完整的对象，或在基类不是多态的情况下尝试销毁派生对象

但是，上面的代码在现实世界中并不常见。还存在其他更高级的技术，例如 CRTP，它们也使用和提供没有函数的`static_cast`静态多态性。`virtual`

这个答案可能不是你想要的。它仅表明即使在基类中根本没有定义派生类成员，也可以在基类中调用派生类成员。但是要直接调用它而不进行任何转换，您仍然需要`virtual`函数。

# c# - Magento 1.7 api - proxy.catalogcategorycreate() 抛出错误

> ID：12953885
> 
> 赞同：1
> 
> 时间：2012-10-18T11:47:08.580
> 
> 标签：c#, magento

虽然我正在尝试使用 api 在 magento 中创建类别。它使用代码为每个类别引发错误。

```
categoryEntity = new catalogCategoryEntityCreate();

string[] sortby_values;
    sortby_values = cat.available_sort_by.ToString().Split(',');
    currstore = 1;
//string[] sortby = new[] { "name", "price" };
string[] sortby;
sortby = sortby_values;// new[] { "name", "price" };
categoryEntity.available_sort_by = sortby;
rtbState.Text += "testing";
categoryEntity.default_sort_by = cat.default_sort_by; // "name";
//categoryEntity.available_sort_by = null;
//categoryEntity.default_sort_by = null;
categoryEntity.description = null;
categoryEntity.is_active =                           Convert.ToInt16(rectify_option(cat.is_active.ToString()));
categoryEntity.is_activeSpecified = cat.is_activeSpecified;
categoryEntity.include_in_menu = Convert.ToInt16(rectify_option(cat.include_in_menu.ToString()));
categoryEntity.include_in_menuSpecified = cat.include_in_menuSpecified;
categoryEntity.name = cat.Name;
WriteLine("Category with code : " + categoryEntity.name + " Created in magento Successfully.");
if (cat.Is_Anchor == Is_Anchor.Yes)
    categoryEntity.is_anchor = 1;
else
    categoryEntity.is_anchor = 0;
categoryEntity.is_anchorSpecified = true;
try
{   
    int categoryid = proxy.catalogCategoryCreate(sessionId, cat.parent_category_id , categoryEntity, "1" );
} 
```

它在最后一行抛出错误。错误是：**在非对象上调用成员函数 getId()**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:20:03.883

这是 magento 1.7.0.3 中的问题。您必须更改一项设置。admin/system/configuration/extensions/dropdownmenu 使其禁用（启用字段名称）下拉菜单并使其禁用。现在使用api并成功创建类别..

# android - 如何使用 TextView 在 Android 中突出显示特定句子

> ID：12953886
> 
> 赞同：-1
> 
> 时间：2012-10-18T11:47:07.707
> 
> 标签：android

我正在开发电子书阅读器。请建议我如何在 android 中突出显示我的字符串的特定句子，例如 IOS 中的 iBook、android 中的 MoonReader 等等。

它有任何图书馆。请向我推荐任何示例或教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:53:54.337

试试这个代码希望这对你有帮助

```
textView.setText("This Is Android", TextView.BufferType.SPANNABLE);

    Spannable WordtoSpan = (Spannable) textView.getText();

    WordtoSpan.setSpan(new BackgroundColorSpan(FF0000), 6, 15, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    textView.setText(WordtoSpan); 
```

它将突出显示从字符 6 到 15 的文本

# web-applications - 服务器是否决定要遵循什么身份验证方法？

> ID：12953888
> 
> 赞同：0
> 
> 时间：2012-10-18T11:47:11.540
> 
> 标签：web-applications, security, kerberos, ntlm, ntlmv2

对于 Web 应用程序，服务器是否决定要遵循的身份验证方法还是客户端。

NTLM 和 Kerberos 浏览器等身份验证方法是否特定。

在 Intranet Web 应用程序中，与 NTLM 和 Kerberos 相比，BASIC 和 Diget 处于什么位置？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:35:39.017

正如[RFC 2617](http://www.ietf.org/rfc/rfc2617.txt)中所讨论的，它需要双方的合作。

当访问资源需要凭据时，服务器将发送回一个`401`响应，其中包含一个或多个`WWW-Authenticate`标头，指示它支持的身份验证类型。如果有多个`WWW-Authenticate`标头，客户端“必须选择使用它理解的最强身份验证方案并根据该挑战请求凭据。”

所以回应可能是：

```
WWW-Authenticate: Basic realm="protected area"
WWW-Authenticate: Digest
        realm="protected area"
        qop="auth"
        nonce="ea9c8142787af00ec11bd0eac248cac930"
        opaque="cdc069ca3ffe57acff21c259deadbeef"
WWW-Authenticate: Negotiate 
```

这表明服务器愿意接受[RFC 2617中描述的 Basic 和 Digest 机制，以及使用](http://www.ietf.org/rfc/rfc2617.txt)[RFC 4559](https://www.rfc-editor.org/rfc/rfc4559)中描述的“SPNEGO”（协商机制）的 NTLM 或 Kerberos 。

然后，客户端必须确定这些方案中哪一个是最强的并再次发送请求。这取决于所讨论的用户代理，但这些机制的评级为假定弱到强（因此最优选的是*last*）：

1.  **[Basic](http://en.wikipedia.org/wiki/Basic_access_authentication)**不提供安全性，明文密码可以轻松恢复。仅当对安全性的期望完全为零或该层已使用 TLS 加密时才应使用。

2.  **[摘要](http://en.wikipedia.org/wiki/Digest_access_authentication)**是一种挑战/响应机制，它依赖于散列算法，在这一点上，这些算法在密码学上不被认为是强大的。

3.  **[NTLM](http://en.wikipedia.org/wiki/NTLM)**是一系列挑战/响应机制，即使在其最强（NTLMv2）的情况下，它也依赖于加密强度不高的哈希算法。然而，NTLM 的一个优势是，Windows 计算机上的用户在登录期间对其密码进行哈希处理，这样他们就可以成为算法的输入，从而允许“单点登录”到网站，而无需重新输入密码。

4.  **[Kerberos](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29)**使用受信任的密钥分发中心 (KDC) 提供安全身份验证，是 Intranet 的绝佳选择，但不太可能成为 Internet 上所有客户端的可行机制。

通过使用 TLS 保护会话以提供传输加密，可以减少任何这些协议的弱点的影响，并且**绝对**应该在任何不受信任的网络（即整个互联网）上执行。

# c# - 类中的奇怪属性

> ID：12953898
> 
> 赞同：1
> 
> 时间：2012-10-18T11:47:34.460
> 
> 标签：c#

你能描述一下它的作用吗？我在一个项目中遇到了它，但不知道它是如何工作的。

```
public object this[int i]
{
    get { return columnValues[i]; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:48:49.780

这称为**indexer**，用于索引，例如我们用它来从字符串中获取字符。你可以在这里准备好[，](http://msdn.microsoft.com/en-us/library/aa288465%28v=vs.71%29.aspx)或者 [在这里](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)，

```
string str = "heel";

char chr = str[0]; 
```

这就是如何为类制作索引器

```
class Sentence
{
    string[] words = "The quick brown fox".Split();
    public string this [int wordNum] // indexer
    {
       get { return words [wordNum]; }
       set { words [wordNum] = value; }
    }
}

Sentence s = new Sentence();
Console.WriteLine (s[3]); // fox
s[3] = "kangaroo";
Console.WriteLine (s[3]); // kangaroo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:48:59.520

这称为[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。它允许您在自己的类型上使用方括号。

# eclipse - 在 CDT 中调试模板方法时出现“无可用源”

> ID：12953899
> 
> 赞同：2
> 
> 时间：2012-10-18T11:47:39.533
> 
> 标签：eclipse, gdb, eclipse-cdt

我正在使用 GDB 调试 Eclipse CDT 8.1.1 中的程序。它工作正常，直到我尝试输入模板方法。然后我收到一条“没有可用于...的源”消息并且无法再查看代码，我被迫要么上堆栈要么切换到指令步进模式。

如果我尝试在函数本身中放置一个断点，程序会在那里停止，但它仍然会失去与源的同步。无论如何，当我离开模板函数时，同步会返回。

我该如何解决这个问题，以使我能够正确调试模板方法？

# iphone - 通知设置中缺少“警报样式”选项

> ID：12953900
> 
> 赞同：1
> 
> 时间：2012-10-18T11:47:41.380
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我已经设置了一个带有推送通知的 iOS 应用程序。问题是该应用程序在不处于活动状态时会忽略通知，或者更准确地说，没有显示横幅。一个奇怪的事情是缺少“警报样式”选项。

我想知道 .entitlements 文件是否是必要的，我应该在那里定义一些东西。除此之外，我认为所有设置都是正确的。环境就是生产。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:05:46.657

所有推送通知都由 iOS 而不是您的应用程序处理，iOS 将在用户单击/滑动查看选项后将推送通知发送到您的应用程序。

`UIRemoteNotificationTypeAlert`当您注册通知时，您是否为警报（横幅）设置了正确的通知类型？

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeBadge|UIRemoteNotificationTypeSound)]; 
```

更多您无法设置“警报样式”，用户可以在设置应用程序中执行此操作。您不能强制通知的呈现方式。

# asp.net - NPOI - 保存从模板文件创建的工作簿

> ID：12953901
> 
> 赞同：7
> 
> 时间：2012-10-18T11:47:44.273
> 
> 标签：asp.net, asp.net-mvc, excel, asp.net-mvc-4, npoi

这是我第二次与 NPOI 打交道。我正在从这样的模板 excel 文件创建一个工作簿。

```
 string dldir = AppDomain.CurrentDomain.BaseDirectory + "Download\\excel\\";
        string uldir = AppDomain.CurrentDomain.BaseDirectory + "Upload\\default_export_file\\";
        string filename = DateTime.Now.ToString("yyyy-M-d") + "_" + user.first_name + "_" + query.default_export_filename;

        System.IO.File.Delete(Path.Combine(dldir, filename));

        //System.IO.File.Copy(Path.Combine(uldir, query.default_export_filename), Path.Combine(dldir, filename));

        HSSFWorkbook hssfwb;
        using (FileStream file = new FileStream(Path.Combine(uldir, query.default_export_filename), FileMode.Open, FileAccess.ReadWrite))
        {
            hssfwb = new HSSFWorkbook(file);
        }

        MemoryStream mstream = new MemoryStream();
        hssfwb.Write(mstream);

        FileStream xfile = new FileStream(Path.Combine(dldir, filename), FileMode.Create, System.IO.FileAccess.Write);
        byte[] bytes = new byte[mstream.Length];
        mstream.Read(bytes, 0, (int)mstream.Length);
        xfile.Write(bytes, 0, bytes.Length);
        xfile.Close();
        mstream.Close(); 
```

但是当我检查创建的文件时。它什么都没有。大小是正确的。但内容只是空白。我也无法在 MS Excel 中打开它。我重复并跟踪了代码，但似乎找不到导致它只写空白的原因。

任何人都知道为什么会这样

仅供参考：我正在使用从 NuGet 库安装的 VS 2010、ASP.Net MVC 4 和 NPOI 1.2.5

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T17:49:46.847

这个怎么样：</p>

```
MemoryStream mstream = new MemoryStream();
hssfwb.Write(mstream);

FileStream xfile = new FileStream(Path.Combine(dldir, filename), FileMode.Create, System.IO.FileAccess.Write);
byte[] bytes = new byte[mstream.Length];
mstream.Read(bytes, 0, (int)mstream.Length);
xfile.Write(bytes, 0, bytes.Length);
xfile.Close();
mstream.Close(); 
```

修改：</p>

```
FileStream xfile = new FileStream(Path.Combine(dldir, filename), FileMode.Create, System.IO.FileAccess.Write);
hssfwb.Write(xfile);
xfile.Close(); 
```

# heroku - Heroku：用于 Twitter 插件的 Apigee

> ID：12953903
> 
> 赞同：1
> 
> 时间：2012-10-18T11:47:47.273
> 
> 标签：heroku, twitter, apigee

我正在尝试在 Heroku 中将 apigee 用于 Twitter 插件，但我收到了这条消息

该插件仅对选定的用户可用

我必须做什么？

谢谢

PS：这个插件可以与 Twitter API v1.1 一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:32:30.007

来自 Apigee 的 Tim。我可以确认我们的 Apigee for Twitter（和 Apigee for Facebook）插件已被弃用。已经配置了附加组件的 Heroku 应用程序可以继续使用它们，但我们目前不接受任何新用户。

也就是说，您不一定需要附加组件；您或许可以通过新的 Apigee 平台获得您正在寻找的相同功能。您可以[免费注册并使用它，并按照我们的](http://enterprise.apigee.com/signup)[快速入门](http://apigee.com/docs/enterprise/quickstarts)非常快速地让它代理 Twitter API 。

如果您还有其他问题，请随时在 SO 上发布，我会确保有人给您及时的答复。

# nsis - 如何在 nsis 中冻结服务一段时间？

> ID：12953904
> 
> 赞同：-1
> 
> 时间：2012-10-18T11:47:55.080
> 
> 标签：nsis

我的要求是冻结一个服务组大约一分钟（60 秒）。我怎么能在 nsis 中做到这一点？我想它会是这样的： hagrp -value Service Frozen ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:20:32.457

`Exec`您可以使用/执行应用程序`ExecWait`：

```
Exec '"$instdir\myapp.exe" /param1 "par am2" /param3' 
```

如果您想在不显示控制台窗口的情况下执行控制台应用程序，则必须使用其中一个 exec 插件：[nsExec](http://nsis.sourceforge.net/Docs/nsExec/nsExec.txt)、[ExecDos](http://nsis.sourceforge.net/ExecDos_plug-in) 或[ExecCmd](http://nsis.sourceforge.net/ExecCmd_plug-in)。

**编辑：**

如果您想操作 Windows 服务，有[几个插件和脚本可供选择...](http://nsis.sourceforge.net/How_do_I_start/stop/create/remove/check_a_service)

# c# - Resharper：隐式捕获的闭包：this

> ID：12953907
> 
> 赞同：65
> 
> 时间：2012-10-18T11:48:03.617
> 
> 标签：c#, .net, resharper

我从 Resharper 收到此警告（“隐式捕获的闭包：this”）：这是否意味着此代码以某种方式捕获了整个封闭对象？

```
 internal Timer Timeout = new Timer
                            {
                                Enabled = false,
                                AutoReset = false
                            };
    public Task<Response> ResponseTask
    {
        get
        {
            var tcs = new TaskCompletionSource<Response>();

            Timeout.Elapsed += (e, a) => tcs.SetException(new TimeoutException("Timeout at " + a.SignalTime));

            if (_response != null) tcs.SetResult(_response);
            else ResponseHandler += r => tcs.SetResult(_response);
            return tcs.Task;
        }
    } 
```

我不确定它是如何或为什么这样做的——它应该捕获的唯一变量是 TaskCompletionSource，这是有意的。这实际上是一个问题，如果是，我将如何解决它？

编辑：警告在第一个 lambda （超时事件）上。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-18T13:47:25.137

似乎问题不是我认为的问题。

问题是我有两个 lambdas 引用父对象中的字段：编译器生成一个具有两个方法和一个对父类 ( `this`) 的引用的类。

我认为这将是一个问题，因为对的引用`this`可能会留在 TaskCompletionSource 对象中，从而阻止它被 GC。至少这是我在这个问题上发现的建议。

生成的类看起来像这样（显然名称会不同且无法发音）：

```
class GeneratedClass {
    Request _this;
    TaskCompletionSource tcs;

    public lambda1 (Object e, ElapsedEventArgs a) {
        tcs.SetException(new TimeoutException("Timeout at " + a.SignalTime));
    }

    public lambda2 () {
        tcs.SetResult(_this._response);
    }
} 
```

我想编译器这样做的原因可能是效率，因为`TaskCompletionSource`两个 lambdas 都使用了；但是现在只要仍然引用了对其中一个 lambda 的引用，对`Request`object 的引用也将保持不变。

不过，我仍然没有更接近弄清楚如何避免这个问题。

编辑：当我写它时，我显然没有考虑到这一点。我通过改变这样的方法解决了这个问题：

```
 public Task<Response> TaskResponse
    {
        get
        {
            var tcs = new TaskCompletionSource<Response>();

            Timeout.Elapsed += (e, a) => tcs.SetException(new TimeoutException("Timeout at " + a.SignalTime));

            if (_response != null) tcs.SetResult(_response);
            else ResponseHandler += tcs.SetResult; //The event passes an object of type Response (derp) which is then assigned to the _response field.
            return tcs.Task;
        }
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T11:49:42.183

它看起来像是`_response`您班级中的一个字段。

`_response`从 lambda引用将`this`在闭包中捕获，并`this._response`在 lambda 执行时读取。

为了防止这种情况，您可以复制`_response`到局部变量并改用它。请注意，这将导致它使用的*当前*值`_response`而不是其最终值。

# ruby-on-rails - 在静态和动态内容之间进行组合的最佳方式是什么

> ID：12953910
> 
> 赞同：0
> 
> 时间：2012-10-18T11:48:10.787
> 
> 标签：ruby-on-rails

我在 Ruby on Rails 中需要一个带有下拉功能的菜单栏。几乎所有东西都是静态的，除了一个。在那里我需要显示用户输入的所有类别。

我需要为此使用 Gem 或 Twitter Bootstrap 还是可以使用表单助手来完成？

罗洛夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:15:34.707

你的意思是这样的？
假设`user.categories`存在，并且`category`模型有一个`description`属性。

```
<ul>
  <% user.categories.each do |cat| %>
    <li><%= cat.description %></li>
  <% end %>
</ul> 
```

这将根据用户的每个类别创建列表项。

# ruby - 在 ubuntu 中无法连接到 X 服务器错误 capybara-webkit

> ID：12953915
> 
> 赞同：0
> 
> 时间：2012-10-18T11:48:31.997
> 
> 标签：ruby, rubygems, web-scraping, capybara, capybara-webkit

需要帮忙。使用 ruby​​（不是 rails）和 capybara-webkit gem 编写脚本。在 EC2 和 Linode 上都进行了检查，并且此错误仍然存​​在。

`webkit_server: cannot connect to X server /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit/connection.rb:103:in `attempt_connect' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit/connection.rb:96:in`connect' /usr/lib/ruby/1.8/timeout.rb:62:in `timeout' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit/connection.rb:94:in`connect' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit/connection.rb:17:in `initialize' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit.rb:26:in`new' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit.rb:26:in `initialize' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/webkit.rb:5:in`new' /usr/lib/ruby/gems/1.8/gems/capybara-webkit-0.12.1/lib/capybara/webkit.rb:5 /usr/lib/ruby/gems/1.8/gems/capybara-1.1.2/lib/capybara/session.rb:61:in `call' /usr/lib/ruby/gems/1.8/gems/capybara-1.1.2/lib/capybara/session.rb:61:in`driver' /usr/lib/ruby/gems/1.8/gems/capybara-1.1.2/lib/capybara/session.rb:157:in `visit' /usr/lib/ruby/gems/1.8/gems/capybara-1.1.2/lib/capybara/dsl.rb:161:in`visit'`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:10:48.410

使用 xvfb 包生成虚拟帧缓冲区。问题已解决[https://github.com/thoughtbot/capybara-webkit/issues/402](https://github.com/thoughtbot/capybara-webkit/issues/402)

# php - 完全清除 _POST 数组

> ID：12953917
> 
> 赞同：34
> 
> 时间：2012-10-18T11:48:43.653
> 
> 标签：php

我想完全清除 $_POST 数组内容，我在互联网上看到的所有示例如下所示：

```
if (count($_POST) > 0) {
    foreach ($_POST as $k=>$v) {
        unset($_POST[$k]);
    }
} 
```

请告诉我，这个变种不会更好吗？（节约资源的观点）

```
if (count($_POST) > 0) {
     $_POST = array();
} 
```

或不 ？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-18T11:50:40.280

是的，这很好。`$_POST`只是另一个变量，除了它具有（[超级](http://php.net/manual/en/language.variables.superglobals.php)）全局范围。

```
$_POST = array(); 
```

……就够了。循环没用。最好将其保留为数组而不是取消设置，以防其他文件试图读取它并假设它是一个数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T11:50:30.663

要取消设置`$_POST`变量，请将其重新声明为空数组：

```
$_POST = array(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-04-23T20:44:23.677

到目前为止的解决方案都不起作用，因为 POST 数据存储在标头中。根据这篇文章，重定向解决了这个问题。

[使用 PHP 在浏览器上按“刷新”按钮时如何删除 $_POST 变量？](https://stackoverflow.com/questions/8335828/how-to-delete-post-variable-upon-pressing-refresh-button-on-browser-with-php/8336492)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-08T14:26:21.733

它可能看起来过于尴尬，但您最好一次取消设置一个元素而不是整个 $_POST 数组。*原因*如下：如果你使用面向对象编程，你可能有一个类使用 $_POST['alpha'] 而另一个类使用 $_POST['beta']，如果你在第一次使用后取消设置数组，它会使其在其他类中的使用无效。为了安全起见，不要在脚上开枪，只需使用一种可以取消您刚刚使用的元素的小方法：例如：

```
private function doUnset()
{
    unset($_POST['alpha']);
    unset($_POST['gamma']);
    unset($_POST['delta']);
    unset($_GET['eta']);
    unset($_GET['zeta']);
} 
```

只需调用该方法并取消设置*那些已传递给变量或参数的超全局元素*。然后，可能需要超全局元素的其他类仍然可以使用它们。

> 但是，明智的做法是在将超全局变量传递给封装对象后立即取消设置它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T11:51:24.150

### 您可以结合使用两者[`unset()`](http://php.net/manual/en/function.unset.php)和初始化：

```
unset($_POST);
$_POST = array(); 
```

或在单个语句中：

```
unset($_POST) ? $_POST = array() : $_POST = array(); 
```

但是你想这样做的原因是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-04T14:16:04.097

为了回答“为什么”有人可能会使用它，我很想使用它，因为我在页面刷新后或从一个页面转到另一个页面时存储了 $_POST 值。我的感觉告诉我这不是一个好的做法，但它仍然有效。

# java - 如何创建新注释？

> ID：12953919
> 
> 赞同：8
> 
> 时间：2012-10-18T11:48:48.400
> 
> 标签：java, spring

如何基于 Spring`@Service`注释或创建新注释`@Component`？

我只想将名称更改为更具语义用途：例如将名称更改为`@TransactionelService`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T11:57:19.357

您可以创建自己的注释（例如`@MyComponent`），并使用相应的弹簧注释进行注释。例如：

```
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component
public @interface MyComponent {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:25:27.923

元注释：

可用于注释其他注释的注释。

```
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Service
@Transactional(timeout = 60)
public @interface MyTranscationalService{
} 
```

--这可以识别上面的代码并扫描下面的代码

我们可以使用 MyTranscationalService 作为其他类的注解

```
@MyTranscationalService
public class TransferImpl implements TransferService{
} 
```

# gwt - UiBinder 中的动态字符串（不适用于 i18n）

> ID：12953926
> 
> 赞同：1
> 
> 时间：2012-10-18T11:49:09.923
> 
> 标签：gwt, uibinder

我正在尝试制作一个小部件，该小部件从 twitter 推广可折叠项目的引导样式。

我必须对其进行硬编码，但我发现抽象它有一些困难。

小部件看起来像：

```
<div class="accordion" id="accordion1">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne">
        ... text to show collapsed ...
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse">
      <div class="accordion-inner">
        ... anything to show expanded ...
      </div>
    </div>
  </div>
</div> 
```

问题是，这使用了一个 javascript，它依赖于一些 div 标签的 id。通用小部件需要将其随机化或取决于构造函数中传递的某些种子。

从 Java 部分访问那些生成的字符串也很不错，因为这将是设置小部件中显示的文本的一种奇特方式。

我的第一种方法是使用类似的东西，`<ui:with type="com.a.b.c.IdGenerator" field="idGenerator"></ui:with>`但它似乎动态地实例化类`IdGenerator`，因此在 Java 部分中无法访问字符串。

有没有什么奇特的方法可以动态地生成那些可以从 Java 部分访问它们的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:38:09.013

您只需要`@UiField IdGenerator idGenerator`在 Java 端有一个由`<ui:with>`注入创建的实例（或者您可以`@UiField(provided = true)`）。

# buttonclick - 在 HTML 页面中单击按钮时立即播放声音

> ID：12953928
> 
> 赞同：15
> 
> 时间：2012-10-18T11:49:14.930
> 
> 标签：buttonclick, playsound

在我的 HTML 页面中，我有 9 个用于拨号的图像和一个显示按下号码的文本框。我希望每个图像在用户单击它们时立即播放哔声。我尝试使用带有隐藏属性的嵌入并将其源导航到 .wav 声音。

它工作正常，但是当我立即一个接一个地按下图像时，它无法播放声音，最后只有蜜蜂一次。

有没有更快的方法在“onclick”方法上播放 .wav 声音？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T12:01:01.790

如果您只需要支持最近的浏览器，那么 HTML 5 为您提供了`Audio`对象

加载/缓冲你的声音：

```
var snd = new Audio("file.wav"); 
```

播放声音：

```
snd.play(); 
```

将其重新提示到开头（以便您可以再次播放）：

```
snd.currentTime=0; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-26T18:19:37.720

@klaustopher 的这个答案[https://stackoverflow.com/a/7620930/1459653](https://stackoverflow.com/a/7620930/1459653)（[https://stackoverflow.com/users/767272/klaustopher](https://stackoverflow.com/users/767272/klaustopher)）帮助了我。他写了：

> HTML5 有新的`<audio>`-Tag 可以用来播放声音。它甚至有一个非常简单的 JavaScript 接口：
> 
> `<audio id="sound1" src="yoursound.mp3" preload="auto"></audio> <button onclick="document.getElementById('sound1').play();">Play it</button>`

以下是我如何实施他的建议，以便单击[Font Awesome](http://fortawesome.github.io/Font-Awesome/)图标“fa-volume-up”（位于网页上“mule”之后）会播放“donkey2.mp3”声音（注意：mp3 不播放在所有浏览器中）。

```
<p>In short, you're treated like a whole person, instead of a rented mule. <audio id="sound1" src="assets/donkey2.mp3" preload="auto"></audio><a class="icon fa-volume-up" onclick="document.getElementById('sound1').play();"></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T00:26:56.147

您可以使用*embed*元素播放声音，但您必须检查不同浏览器支持的格式。

[*在 MDN 上嵌入*元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/embed)

```
<a onclick="playSound('1.mp3')">
   <img src="1.gif">
</a>
<div id="sound"></div>

<script>
   var playSound = function (soundFile) {
      $("#sound").html("<embed src=\"" + soundFile + "\" hidden=\"true\" autostart=\"true\" />");
   }
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-28T15:09:10.373

基于接受的答案的示例（在 Chrome 70 中测试），但我不需要重新提示：

```
<button onclick="snd.play()"> Click Me </button>

<script>
    var snd = new Audio("/Content/mysound.wav"); 
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-03T03:45:38.813

此代码可让您放入图片按钮；单击时会发出声音。它适用于 Google Chrome 和 Microsoft Edge，但我无法在 Internet Explorer 中使用。我正在使用 html 5 代码；请复制并粘贴并添加您自己的示例。

```
</head>
<body>
<script>
var audio = new Audio("/Sample.wav ");
audio.oncanplaythrough = function ( ) { }
audio.onended = function ( ) { }
</script> <input type="image" src="file://C:/Sample.jpg" onclick="audio.play ( )">
</body>
</html> 
```

有关代码的更多信息，请查看 [http://html5doctor.com/html5-audio-the-state-of-play/](http://html5doctor.com/html5-audio-the-state-of-play/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-20T23:07:17.893

这就是我要播放音效的方法：

```
 <html>
            <body>
        <audio id="sfx"><source src="mysound.mp3"></audio>
            <button onclick="playsound()" id="button">Play a sound!</button>
            <script> function playsound() {

    var sfx = document.getElementById("sfx");
    sfx.autoplay = 'true';
sfx.load();} 
```

或者您可以运行此代码段：

```
function playsound() {
  var mysound = document.getElementById("mysound");
  mysound.autoplay = 'true';
  mysound.load();
}
```

```
button {
  color: blue;
  border-radius: 24px;
  border: 5px solid red;
}

body {
  background-color: #bfbfbf;
}
```

```
<html>

<body>
  <audio id='mysound'><source src="click.mp3"><!-- "click.mp3" isn't a sound effect uploaded to the snippet, because I don't think you can upload sfx to snippets. (I'm new to stackoverflow, so there might be a way) But if you actually use a sound effect in that folder that you're using, it works.  --></audio>
  <button id='btn' onclick='playsound()'>Play a sound!</button>
</body>

</html>
```

# php - PHP 转义 shell arg 不需要的行为

> ID：12953929
> 
> 赞同：3
> 
> 时间：2012-10-18T11:49:16.467
> 
> 标签：php, shell, encoding

当我这样做时[`escapeshellarg('référencement')`](http://php.net/escapeshellarg) ，它会返回“rfrencement”。我们怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T11:57:43.723

这几乎可以肯定是由于您的系统区域设置。您的参数使用什么字符串编码，而不是设置为语言环境的编码？作为调试步骤，您可以尝试强制使用 UTF-8

```
setlocale(LC_CTYPE, "en_US.UTF-8"); 
```

在你打电话之前`escapeshellarg`，看看这是否有帮助。

# uitableview - UITableViewCell 在切换视图时显示选中

> ID：12953932
> 
> 赞同：0
> 
> 时间：2012-10-18T11:49:27.097
> 
> 标签：uitableview, selection, highlight

我有一个 UITableViewCell，我希望在单击它时保持选中状态。所以我有这个工作得很好的代码：

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {   

static NSString *identifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
    }
    cell.textLabel.text = [NSString stringWithFormat:@"%@", [[[self.dataSource objectAtIndex:indexPath.row] lastPathComponent] stringByDeletingPathExtension]];
    //cell.selectionStyle = UITableViewCellSelectionStyleNone;
    UIView *bgColorView = [[UIView alloc] init];
    [bgColorView setBackgroundColor:[UIColor brownColor]];
    [cell setSelectedBackgroundView:bgColorView];
    return cell;
} 
```

每次我单击一个单元格时，它都会被选择为棕色并保持选中状态，直到我单击另一个单元格...完美但是当我通过单击导航控制器的后退按钮关闭视图然后切换回我的视图时我的单元格不再被选中。那么，当我返回视图时，如何实现在切换视图之前选择的单元格仍然被选中？

我想我可能必须从 tableview 创建一个属性，然后再次选择 viewDidLoad 中的行。我可以将 selectedRow 索引保存在 nsuserdefaults 中。但我希望有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:34:43.107

在您的`-viewDidLoad`方法中，将其添加到底部：`self.clearsSelectionOnViewWillAppear = NO;`这将使其看起来像这样：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.clearsSelectionOnViewWillAppear = NO;
} 
```

# html - 文字过长时，li 下的文字会乱七八糟

> ID：12953933
> 
> 赞同：1
> 
> 时间：2012-10-18T11:49:29.670
> 
> 标签：html, wordpress, css

我正在使用WordPress 的[WooCommerce 插件](http://www.woothemes.com/woocommerce/)来制作`ecommerce store`. 但我的问题是某些项目的标题超过 50-60 个字符。这样一来，产品的布局就搞砸了。在这里，我附上了布局的屏幕截图。请建议我在这里应该做什么？现场直播可以到[这里](http://modulesoft.info/projects/gamesite/)。

![在此处输入图像描述](../Images/f366cab0de2c4da311c9335448766f9d.png)

**更新**

破碎的屏幕图像在这里![在此处输入图像描述](../Images/ef0ef5a2e81a8d9137517f5c7f042e8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:34:19.523

好吧，你有大约 3 个选项。

1.  什么都不做，忍受它
2.  约束`li`或`h3`高度并让它滚动/隐藏溢出。
3.  减少标题

第二个是将其添加到 css ：

```
div#content ul.products li.product {height:300px; overflow:auto;} 
```

或者也可以添加这个：

```
div#content ul.products li.product h3 {height:1em;overflow:hidden} 
```

数字 3 是关于根本没有长标题...
当您编写游戏标题时，请查看字符串长度是否大于*您的限制*，如果是，则仅打印一个 substr 并附加“...”。

我能想到另一种解决方案，但它有点复杂。取游戏标题长度并相应地缩小您的文本大小，直到某个阈值。

# windows-mobile - 为 windows mobile 编译特定版本的 c 运行时

> ID：12953934
> 
> 赞同：1
> 
> 时间：2012-10-18T11:49:31.137
> 
> 标签：windows-mobile, msvcrt

我有移动设备，从所有 msvcrXX 文件中都有 msvcr80.dll。Visual Studio 将我的库编译成一个依赖于 msvcr90.dll 的库。

如何更改我的 dll 的依赖项？我不想在移动设备上更改运行时版本。果然，使用 /MT 编译可以避免问题，但我对解决方案感兴趣，而不是避免。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:22:58.730

一般来说，只有当您针对特定版本的 CRT 库编译和链接您的项目时，才有可能。给定版本的 VS 支持这些库的具体版本：VS 2005 => msvcrt8 VS 2008 => msvcrt9

标准库通过 #pragma comment(lib, "libcXXX.lib") 或 #pragma comment(lib, "msvcXXX.lib") 链接

取决于您的项目配置（查看 afx.h）

VCPROJ 中没有 CruntimeLib 的依赖定义，所以你在这里没有什么可以改变的。

如果您在旧版本 (8.0) 中为具体平台（例如：Win32 或 PocketPC 2003 等）获得所需库/dll/头文件的完整树，您将需要更改给定平台的路径：

工具 / 选项 / 项目和解决方案 / VC++ 目录

（！！！注意通过菜单导出操作之前备份您的配置）

# java - 在 Java 中缩放时查看 SVG 文件的像素

> ID：12953936
> 
> 赞同：0
> 
> 时间：2012-10-18T11:49:35.647
> 
> 标签：java, svg, scaling, pixels, batik

我正在使用 Batik 库处理 Java 中的 SVG 文件。当我缩放它时会出现问题。我可以看到线条的像素。当然这不应该发生，我应该能够至少缩放 4000% 并保持平滑度。

SVG 文件是从扩展类中读取的，并且是通过覆盖绘制方法绘制的。首先，我将新比例设置为 AffineTransform 变量，将其应用于方法的图形并使用 super.paint() 进行绘制。

我真的被卡住了，无法弄清楚问题所在。我使用的 SVG 文件没问题，我在 Inkscape 中打开它们并且可以在不显示像素的情况下进行缩放。请帮忙。

代码：

```
@Override
public void paint(Graphics g) {
  try {
    rad = (int)(radInit*zoom);
    updateTransform();

    Graphics2D g2d = (Graphics2D) g;
    g2d.setTransform(transform);

    super.paint(g);
    paintElements(g2d);
  } catch(NullPointerException nulle) {
    // System.out.println("SVG not loaded yet");
  }
}

private void updateTransform(){
  transform = new AffineTransform();
  transform.translate((-1)*zoom*centarX, (-1)*zoom*centarY);
  transform.scale(zoom, zoom);                      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:16:51.713

需要的是

```
this.setRenderingTransform(transform, true); 
```

这样就看不到任何像素，或者更确切地说，一切都按照应有的方式绘制。

# android - 尝试使用回收位图

> ID：12953948
> 
> 赞同：1
> 
> 时间：2012-10-18T11:50:37.813
> 
> 标签：android

```
 for (int imageId : mImageIds) {
            Bitmap originalImage;
            originalImage= BitmapFactory.decodeResource(
                    getResources(), imageId);
            ImageView imageView=null;
            imageView = new ImageView(mContext);
            imageView.setImageBitmap(originalImage);
            imageView.setLayoutParams(new myView.LayoutParams(
                    (int) ((6 * width) / 10), MenuHeight));
            Log.i("MenuHeight", "" + MenuHeight);
            Log.i("MenuWidth", "" + (6 * width) / 10);

            imageView.setScaleType(ScaleType.MATRIX);
            mImages[index++] = imageView;
            originalImage.recycle();

        } 
```

我正在使用此代码段及其在尝试使用回收位图时给出的异常，如果我没有回收位图，它将消耗内存，所以你能告诉我何时何地最好在任何代码中使用 bitmap.recycle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:14:49.020

它会引发异常，因为您的位图在 ImageView 中使用。要调用回收，您的位图不必链接到视图。

由于您的所有图片似乎都已显示（或链接到物理视图对象），因此您无法回收。

处理您的问题的一种方法是为每张图片使用更少的内存。

请参阅这篇文章： [如何在 android 中为 imageview 压缩图像](https://stackoverflow.com/questions/5125779/how-to-compress-image-for-imageview-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:58:46.037

这将解决它：

```
 for (int imageId : mImageIds) {
         if(originalImage!=null && !originalImage.isRecycled()){             
                Bitmap originalImage;
                originalImage= BitmapFactory.decodeResource(
                        getResources(), imageId);
                ImageView imageView=null;
                imageView = new ImageView(mContext);
                imageView.setImageBitmap(originalImage);
                imageView.setLayoutParams(new myView.LayoutParams(
                        (int) ((6 * width) / 10), MenuHeight));
                Log.i("MenuHeight", "" + MenuHeight);
                Log.i("MenuWidth", "" + (6 * width) / 10);

                imageView.setScaleType(ScaleType.MATRIX);
                mImages[index++] = imageView;

                originalImage.recycle();
                originalImage = null;
           }
} 
```

# vba - 防止关闭按钮在 MS Access 中保存记录

> ID：12953949
> 
> 赞同：5
> 
> 时间：2012-10-18T11:50:38.797
> 
> 标签：vba, ms-access-2007

在 Microsoft Access 窗体中，只要当前记录发生更改，绑定控件中的任何更改都会以静默方式保存到数据库表中。这很好，但我不希望在用户关闭表单时发生这种情况，因为这与许多人的期望正好相反。

最好的例子是，当您尝试关闭未保存更改的 excel 文件时，它会询问是否应丢弃更改。这正是我试图在 Access 中实现的，但找不到任何方法来捕获 VBA 中的关闭按钮事件。

表单的 Unload 事件是当有人单击关闭按钮时触发的第一个事件，但此时更改已写入数据库。

这是可能的，还是我必须创建自己的关闭按钮？我很乐意为这样的琐碎事情编写大量代码，但我讨厌不得不使 GUI 混乱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T13:15:11.100

你必须处理`Form_BeforeUpdate`事件。下面是一个例子；但是它确实会创建一条典型的警告消息：“此时您无法保存此记录。Microsoft Access 在尝试保存记录时可能遇到错误......” - 取决于您的数据库设置。您可以使用下面的简单解决方法来避免显示该消息。

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
   Cancel = True
   'Or even better you can check certain fields here (If Then...)

End Sub

Private Sub Form_Error(DataErr As Integer, Response As Integer)
    If DataErr = 2169 Then 
        Response = True
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-27T19:14:55.817

肖恩给出了一个几乎正确的答案，但它留下了空白。

一般来说，FORM's`BeforeUpdate`是最重要的表单事件。这是您的最后一道防线，并且无论什么提示保存（表单关闭、新记录、您自己的保存按钮、单击子表单等），始终在保存记录之前运行。虽然我偶尔使用该控件也是如果您的验证涉及多个字段，您将使用的事件。如果您正在使用任何其他控件或事件级别的事件，那么您就是在浪费时间。你的“陷阱”总是很远，你的表几乎肯定包含无效数据。`BeforeUpdate`事件因此用户会更快地收到错误消息，我编写的大部分验证代码都会在`Form_BeforeUpdate`事件中运行。如果要确保某些控件不为空，则必须使用此事件。在所有情况下，没有任何控制级别事件能够可靠地做到这一点。主要是因为如果控件永远不会获得焦点，则不会触发控件级别事件。 `Form_BeforeUpdate`

关于OP的问题。如果您想强制人们使用您自己的保存按钮并在他们不使用时提示他们，那么您需要一个表单级别的变量，正如 Sean 的建议所暗示的那样。唯一的区别是您需要在表单的 Current 事件而不是 Open 事件中将其设置为 False。您希望为每条新记录重置标志，而不仅仅是在表单打开时。然后在你的保存按钮点击事件中将它设置为 True，就在你强制记录保存之前`DoCmd.RunCommand acCmdSaveRecord`。

最后，在`Form_BeforeUpdate`事件中，您检查变量的值。

```
If bClose = False Then
   If MsgBox("Do you want to save the changes?", vbYesNo) = vbNo Then
       Cancel = True
       If MsgBox("Do you want to discard the Changes?", vbYesNo) = vbYes Then           
            Me.Undo
       End If
       Exit Sub
   End If
End If 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:48:22.723

这是我检查表单是否被关闭或保存的代码。

```
Private Sub Form_BeforeUpdate(Cancel As Integer)

If Not UsingSaveButton Then
    If MsgBox("Abandon Data?", vbInformation + vbYesNo) = vbNo Then
        Cancel = True
    Else
        DoCmd.RunCommand acCmdUndo
    End If
End If
End Sub 
```

我有一个布尔标志，在加载时设置为 False，然后在使用我的保存按钮时，我将其设置为 true 以允许更新运行。
如果未设置标志，那么他们将离开记录（通过转到不同的记录或关闭表单）所以我问他们是否真的要保存更改。如果进行了任何更改，则中止表单的退出或移动到不同的记录
。 撤消任何更改，因此不会保存它们。`Cancel = True`
`DoCmd.RunCommand acCmdUndo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:11:19.230

实际上，您无法捕捉到这一点，Access 直接在表上工作，当字段通过移动到另一个字段、记录或按钮而失去焦点时，每个更改都已保存。

实际上恕我直言，与 Excel 相比，这是一个很大的优势

如果您真的想要类似于 Excel 的行为，您需要处理表格的副本和一些用于更新的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-28T10:22:53.310

在“On Unload”事件的表单中添加以下代码。

```
DoCmd.RunCommand acCmdUndo
DoCmd.Quit 
```

当用户以任何方式关闭表单时，不再保存记录。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-20T17:57:33.930

**您可以使用此代码的退出按钮**

```
Private Sub Button_Click()
If Me.Dirty = True Then
   If MsgBox(" Save Change ", vbYesNo) = vbYes Then
      Me.Dirty = False
   Else
      Me.Undo
   End If
End If
DoCmd.Close acForm, "FormName"
End Sub 
```

# xml - 带有类名的 XQuery 本体视图

> ID：12953954
> 
> 赞同：2
> 
> 时间：2012-10-18T11:51:06.757
> 
> 标签：xml, xquery

所以我得到了一个很大的 XML 文档。我必须编写一个查询，给定一个类名和本体名称，它将计算一个本体视图，其中包含与该类相关的文档的本体部分。更准确地说，我需要选择类的子类、实例以及与类相关的规则。我正在考虑递归地执行此操作。

知道如何轻松做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:24:33.977

您可以通过递归函数降低文档中定义的类层次结构：

```
declare default element namespace "http://omdoc.org/ns";
declare namespace om = "http://www.openmath.org/OpenMath";

declare function local:class-hierarchy(
  $doc as document-node(),
  $classname as xs:string
) as node() {
  <class name='{$classname}'> {
    for $OMA in $doc//axiom/FMP/om:OMOBJ/om:OMA
    where $OMA/om:OMS[1]/@name = 'subclass'
      and $OMA/om:OMS[3]/@name = $classname
    return local:class-hierarchy($doc, $OMA/om:OMS[2]/@name)
  }</class>
}; 
```

该函数返回表示子类关系的嵌套元素。例如的子类`Device`可以计算如下：

```
let $doc := fn:doc("http://rasdaman.flanche.net/dbwa/Assignment5/example.omdoc"),
    $class := 'Device'
return local:class-hierarchy($doc, $class) 
```

结果：

```
<class xmlns="http://omdoc.org/ns" name="Device">
  <class name="Camera">
    <class name="DSLR"/>
  </class>
</class> 
```

您可以轻松地调整此函数以返回相应类的规则和实例。

# java - 如何从java中的数组创建ARFF文件？

> ID：12953958
> 
> 赞同：1
> 
> 时间：2012-10-18T11:51:30.033
> 
> 标签：java, weka, regression, arff

我想获得由 java 中的两个数组表示的 xy 对的加权线性回归的系数。我已经对 weka 进行了归零，但它在“LinearRegression”类中询问“Instances”类对象。要创建“Instances”类文件，需要一个包含数据的 ARFF 文件。我遇到了使用 FastVector 类的解决方案，但现在在最新的 weka 版本中已弃用。如何为 xy 对和相应的权重创建一个 ARFF 文件，这些权重都由 java 中的数组表示？

这是我基于 Baz 回答的代码。它在最后一行 "lr.buildClassifier(newDataset)" - Thread [main] (Suspended (exception UnassignedClassException))
Capabilities.testWithFail(Instances) line: 1302 上给出了一个异常。这是代码 -

```
public static void test() throws Exception
{
    double[][] data = {{4058.0, 4059.0, 4060.0, 214.0, 1710.0, 2452.0, 2473.0, 2474.0, 2475.0, 2476.0, 2477.0, 2478.0, 2688.0, 2905.0, 2906.0, 2907.0, 2908.0, 2909.0, 2950.0, 2969.0, 2970.0, 3202.0, 3342.0, 3900.0, 4007.0, 4052.0, 4058.0, 4059.0, 4060.0}, {19.0, 20.0, 21.0, 31.0, 103.0, 136.0, 141.0, 142.0, 143.0, 144.0, 145.0, 146.0, 212.0, 243.0, 244.0, 245.0, 246.0, 247.0, 261.0, 270.0, 271.0, 294.0, 302.0, 340.0, 343.0, 354.0, 356.0, 357.0, 358.0}};

    int numInstances = data[0].length;

    ArrayList<Attribute> atts = new ArrayList<Attribute>();
    List<Instance> instances = new ArrayList<Instance>();
    for(int dim = 0; dim < 2; dim++)
    {
        Attribute current = new Attribute("Attribute" + dim, dim);

        if(dim == 0)
        {
            for(int obj = 0; obj < numInstances; obj++)
            {
                instances.add(new SparseInstance(numInstances));
            }
        }

        for(int obj = 0; obj < numInstances; obj++)
        {
            instances.get(obj).setValue(current, data[dim][obj]);
            //instances.get(obj).setWeight(weights[obj]);
        }
        atts.add(current);
    }

    Instances newDataset = new Instances("Dataset", atts, instances.size());

    for(Instance inst : instances)
        newDataset.add(inst);

    LinearRegression lr = new LinearRegression();

    lr.buildClassifier(newDataset);             
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:22:56.530

我认为这可能会对您有所帮助：

```
FastVector atts = new FastVector();
List<Instance> instances = new ArrayList<Instance>();
for(int dim = 0; dim < numDimensions; dim++)
{
    // Create new attribute / dimension
    Attribute current = new Attribute("Attribute" + dim, dim);
    // Create an instance for each data object
    if(dim == 0)
    {
        for(int obj = 0; obj < numInstances; obj++)
        {
            instances.add(new SparseInstance(numDimensions));
        }
    }

    // Fill the value of dimension "dim" into each object
    for(int obj = 0; obj < numInstances; obj++)
    {
        instances.get(obj).setValue(current, data[dim][obj]);
    }

    // Add attribute to total attributes
    atts.addElement(current);
}

// Create new dataset
Instances newDataset = new Instances("Dataset", atts, instances.size());

// Fill in data objects
for(Instance inst : instances)
    newDataset.add(inst); 
```

之后`Instances`是你的数据集。

**注意**：Weka 的**当前**版本（3.6.8）没有抱怨，即使我使用了`FastVector`.

但是，对于**Developer**版本 (3.7.7)，请使用以下命令：

```
ArrayList<Attribute> atts = new ArrayList<Attribute>();
List<Instance> instances = new ArrayList<Instance>();
for(int dim = 0; dim < numDimensions; dim++)
{
    Attribute current = new Attribute("Attribute" + dim, dim);
    if(dim == 0)
    {
        for(int obj = 0; obj < numInstances; obj++)
        {
            instances.add(new SparseInstance(numDimensions));
        }
    }

    for(int obj = 0; obj < numInstances; obj++)
    {
        instances.get(obj).setValue(current, data[dim][obj]);
    }

    atts.add(current);
}

Instances newDataset = new Instances("Dataset", atts, instances.size());

for(Instance inst : instances)
    newDataset.add(inst); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:12:40.620

You want to construct an [Instances](http://weka.sourceforge.net/doc.dev/weka/core/Instances.html) object, that class overrides `toString()` to output in ARFF format. If FastVector is deprecated you could just use [Vector](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html).

# algorithm - 亚马逊专访：BST中叶子节点的总和

> ID：12953961
> 
> 赞同：0
> 
> 时间：2012-10-18T11:51:45.743
> 
> 标签：algorithm, data-structures

我为此编写的代码：

```
 sumBST(BST *root)
     {
         static sum =0;
         if (root!= null)
           {
              if (root->left != null || root->right != null)
                {
                  sum = sum + sumBST(root->left) + sumBST(root->right);
                  return sum;
                }
              else
                {
                   root->data;
                }
           }
         else
            {
               return 0;
            }
        return sum;
     } 
```

我通过绘制递归树来检查它似乎很好，但我仍然在某些时候感到困惑，我犯了一些错误。请纠正我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:55:35.940

好吧，看起来您实际上并没有添加叶节点的总和。
特别是 - 行：

```
root->data 
```

实际上并不返回数据，只是读取它。在伪代码中应该是这样的：

```
sumBST(node):
    if (root == null):
       return 0
    else if (root->left == null && root->right == null)  
       //add the value of the node if it is a leaf, this step is missing
      return root->data;
    else:
      return sumBST(root->left) + sumBST(root->right) 
```

* * *

**编辑：**
代码中的问题如下（在答案中进一步澄清和解释这一点）：

您应该在某处返回叶子的数据 - 这在代码中的任何地方都没有发生 - 我怀疑您想在`root->data`.

但是请注意，递归将转到每一个叶子 - 它只是缺少返回每个叶子的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:05:23.557

此类问题的目的主要集中在评估候选人的思维过程。

我在这里看到的只是一个拼写错误

```
root->data => return root->data 
```

和永远达不到的指令

```
return sum; 
```

和一个过长的指令

```
 sum = sum + sumBST(root->left) + sumBST(root->right); => return sumBST(root->left) + sumBST(root->right); 
```

面试官总是喜欢被问到他们给出的问题。诸如“是否给出了 BST 或者我可以设计一个针对给定叶子总和进行优化的结构？”、“BST 有多大？”之类的问题......可以添加一个加号，并且很可能会完全改变您的答案。

# ruby-on-rails - 分页链接未显示在数组上

> ID：12953963
> 
> 赞同：0
> 
> 时间：2012-10-18T11:51:53.650
> 
> 标签：ruby-on-rails, will-paginate

我的应用程序获取他们每个 Facebook 相册的封面（我使用 Koala 执行此操作），并且我正在尝试使用 will_paginate 对结果进行分页。我对其他元素进行了分页，但它似乎不喜欢使用数组。

我浏览了文档，使用了`require 'will_paginate/array'`，并且可以通过它来限制每页的条目数量 - 我有七张专辑，will_paginate 将使用以下代码显示前四张：

```
albums = graph.get_connections("me", "albums")

@albums = albums.paginate(:page => params[:page], :per_page => 4) 
```

但是`<% will_paginate @albums %>`放到视图中的任何地方似乎都不会影响任何东西，当然也不会生成分页链接。我有什么遗漏/做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:54:04.887

使用`<%= %>` 代替`<% %>`

IE

改变

```
<% will_paginate @albums %> 
```

到

```
<%= will_paginate @albums %> 
```

# c# - 如何在 iTextSharp 中将 PDF 转换为文本文件

> ID：12953965
> 
> 赞同：7
> 
> 时间：2012-10-18T11:52:05.927
> 
> 标签：c#, pdf, itextsharp

我必须从 PDF 文件中检索文本。但是使用下面的代码我只得到空的文本文件。

```
for (int i = 0; i < n; i++)
{
    pagenumber = i + 1;
    filename = pagenumber.ToString();
    while (filename.Length < digits) filename = "0" + filename;
    filename = "_" + filename;
    filename = splitFile + name + filename;
    // step 1: creation of a document-object
    document = new Document(reader.GetPageSizeWithRotation(pagenumber));
    // step 2: we create a writer that listens to the document
    PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(filename + ".pdf", FileMode.Create));

    // step 3: we open the document
    document.Open();

    PdfContentByte cb = writer.DirectContent;
    PdfImportedPage page = writer.GetImportedPage(reader, pagenumber);
    int rotation = reader.GetPageRotation(pagenumber);
    if (rotation == 90 || rotation == 270)
    {
        cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(pagenumber).Height);
    }
    else
    {
        cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
    }
    // step 5: we close the document

    document.Close();
    PDFParser parser = new PDFParser();
    parser.ExtractText(filename + ".pdf", filename + ".txt");
} 
```

我在做什么错，我应该如何从 PDF 中提取文本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T12:57:29.220

要使用 iTextSharp 提取文本，请获取该库的当前版本并使用

```
PdfTextExtractor.GetTextFromPage(reader, pageNumber); 
```

请注意，某些 5.3.x 版本中的文本提取代码中存在一个错误，该错误同时已在主干中修复。因此，您可能想要检查主干修订版。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-12T21:37:44.007

```
using System;
using System.IO;
using System.Linq;
using System.Text;
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.parser;

namespace Pdf2Text
{
    class Program
    {
        static void Main(string[] args)
        {
            if (!args.Any()) return;

            var file = args[0];
            var output = Path.ChangeExtension(file, ".txt");
            if (!File.Exists(file)) return;

            var bytes = File.ReadAllBytes(file);
            File.WriteAllText(output, ConvertToText(bytes), Encoding.UTF8);
        }

        private static string ConvertToText(byte[] bytes)
        {
            var sb = new StringBuilder();

            try
            {
                var reader = new PdfReader(bytes);
                var numberOfPages = reader.NumberOfPages;

                for (var currentPageIndex = 1; currentPageIndex <= numberOfPages; currentPageIndex++)
                {
                    sb.Append(PdfTextExtractor.GetTextFromPage(reader, currentPageIndex));
                }
            }
            catch (Exception exception)
            {
                Console.WriteLine(exception.Message);
            }

            return sb.ToString();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-10-19T16:31:25.113

```
//call Create_pdf() function when Done button pressed;

EditText et_Text=findViewById(R.id.EditText);

String projectname="MyPdf";

public  void Create_pdf(){
    Document doc =new Document();
    String outPath= Environment.getExternalStorageDirectory()+"/"+projectname+".pdf";
    try {
       PdfWriter.getInstance(doc, new FileOutputStream(outPath));
       doc.open();
       doc.add(new Paragraph(et_Text.getText().toString()));
       doc.close();
    } catch (DocumentException e) {
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
} 
```

# java - Spring3.x 中的依赖检查

> ID：12953967
> 
> 赞同：0
> 
> 时间：2012-10-18T11:52:16.363
> 
> 标签：java, spring, spring-mvc, dependency-injection

Spring2.5 有一个名为dependency-check 的特性，可以为bean 标签提供，而default-dependency-check 可以在父级`<beans>`标签上提供。

例如：`<bean id="soandSo" class="..." dependecy-check=""/>`

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd" 
    default-dependency-check="all"> 
```

但是在 Spring3.x 中，这些属性已被弃用，除了使用`@Required`属性和任何等效于 Spring3.x 中的默认依赖项检查之外，还有其他设置依赖项检查的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:41:36.423

**自 Spring 3.x 起不再支持**此功能。您可以通过告诉 Spring 尊重`@Required`和`@Autowired`注释来实现类似的结果。它可以使用 XML 上下文文件中的以下任何配置选项来完成：

1.  `<context:annotation-config/>`
2.  `<context:component-scan base-package="*"/>`

您可以通过注册适当的选项来跳过这些选项，`BeanPostProcessors`例如`AutowiredAnnotationBeanPostProcessor`和`RequiredAnnotationBeanPostProcessor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:30:28.897

我认为不会，因为在 Spring 2.5 中，注释已被完全接受，并且随着框架通过这些类型的更改而发展，很明显，注释将继续成为保持框架尽可能清晰和直接的强大驱动力。

Spring 团队现在鼓励开发人员使用以下替代方案（Spring 3 及更高版本）。

*   仅使用构造函数（构造函数注入而不是 setter 注入）来确保设置正确的属性。使用实现的专用 init 方法创建设置器。
*   `@Required`在需要属性时创建带有注释的 setter 。
*   使用`@Autowired`- 驱动的注入，这也意味着默认情况下需要的属性。

# mysql - Codeigniter 数据库加入不接受值而不是列名

> ID：12953972
> 
> 赞同：1
> 
> 时间：2012-10-18T11:52:24.853
> 
> 标签：mysql, database, codeigniter, activerecord, join

> **可能重复：**
> [Codeigniter ActiveRecord：加入反引号](https://stackoverflow.com/questions/7860441/codeigniter-activerecord-join-backticking)

我想在列名的位置给出一个值，但它无法识别它并且它给了我错误。这是我的代码：

```
$this->db->select('*')->from('users')->where('users.ID',$this->session->userdata('user_id'));
$this->db->join('contact','contact.ID = 1','left');
$result =  $this->db->get()->row_array(); 
```

问题在于加入，它不接受价值。它给了我这个错误

```
error:

Unknown column '1' in 'on clause' 
```

我必须使用 1 因为表之间没有关系，并且在联系表中只有一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:23:37.373

当您要进行连接时，您需要在公共字段上进行连接，自然 SQL 将是：

`select * from users join contact on USERS.COMMON_FIELD = CONTACT.COMMONFIELD where users.id = $this->session->userdata('user_id')`

将其“翻译”为 CI

```
$this->db->select('*')->from('users'));
$this->db->join('contact','contact.common_field = users=common_field');
$this->db->where('users.ID',$this->session->userdata('user_id')) 
```

你必须把它说`contact.ID = 1);`的表格之间的公共领域，

mysql 加入[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

CodeIgniter 加入：[http ://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:04:01.347

谢谢大家的回复。我找到了一个替代方法，使用这个： `$this->db->query("SELECT * FROM (users) LEFT JOIN 'contact' ON contact.ID = ? WHERE users.ID = ?",array(1,$user_id));` ，做这个codeigniter不会给我任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:22:24.420

我前段时间遇到过这个问题，我找到了解决方法，请参见[此处](https://stackoverflow.com/questions/7860441/codeigniter-activerecord-join-backticking/7865482#7865482)！

（所以这个问题是重复的）

# entity-framework - 实体框架的DLL不起作用

> ID：12953974
> 
> 赞同：1
> 
> 时间：2012-10-18T11:52:30.640
> 
> 标签：entity-framework, dll

在我的项目中，我在我构建的实体框架中的项目的 dll 中使用，例如，我有这样的类：

```
public class Games
{
    public int GameID { get; set; }
    public string Description { get; set; }
    public float Time { get; set; }
    public int Level { get; set; }

    //Collection of all the players that play in the game
    public virtual ICollection<PlayerGame> PlayersInGame { get; set; }

} 
```

在类玩家游戏中定义游戏的属性，如下所示：

```
 public virtual  Games Game { get; set; } 
```

约束定义在模型构建上。

玩家游戏中的游戏是表中的外键。

当我在这个项目上测试它时，集合会填写详细信息。

但是当我在其他项目中使用 dll 时，集合为空。

其他项目中的代码是这样的：

```
GamesContext MyContext = new GamesContext();
List<Games> GamesList= MyContext.GamesTbl.ToList(); 
```

在上下文类中，我有表格和约束，它在实体框架的项目中工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:43:27.030

DLL最终确实起作用了..

配置文件有问题

# java - python子进程运行jar给出错误

> ID：12953975
> 
> 赞同：0
> 
> 时间：2012-10-18T11:52:32.993
> 
> 标签：java, python, jar, subprocess

在终端中运行此命令可以正常工作：

```
java -jar file.jar --arg1 --arg2 pathTofile 
```

然后，当我尝试使用以下代码从 python 代码中执行此操作时：

```
subprocess.call(['java', '-jar', 'file.jar', '--arg1' , '--arg2' , 'pathTofile']) 
```

我得到了 --arg1 的 IllegalArugmentException。

关于为什么这会产生问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T10:34:09.603

@Benst - 我遇到了同样的问题，这对我有用：

`subprocess.call(['java', '-Dparam1=paramValue1', '-Dparam2=paramValue2', '-jar', 'filename.jar']);`

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:11:29.077

好的，我想通了。在 python 中使用 subprocess 例程时，您需要单独引用选项和并发值

例如：

```
subprocess.call(['java', '-jar', 'file.jar', '-option', 'valueForThisOption', '-option', 'valueForThisOption', 'pathToFile']) 
```

将 -option 和 value 放在一个引号中会产生此错误。我在某处读到，如果您将 shell=True 放在最后，您只能将 -option 和 value 放在一个引号中。（未经测试）

# ios5 - 将谷歌分析添加到 iOS 的问题

> ID：12953976
> 
> 赞同：2
> 
> 时间：2012-10-18T11:52:37.317
> 
> 标签：ios5, google-analytics, xcode4.3

添加 libGoogleAnalytics.a CFNetwork 和 libsqlite3.0.dylib 框架后，并将 GANTracker.h 添加到我的 AppDelegate.m

我收到此错误：

架构 armv7 的未定义符号：“_OBJC_CLASS_$_GANTracker”，引用自：AppDelegate.o ld 中的 objc-class-ref：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v查看调用），应用程序甚至无法编译。我的应用程序针对 iOS 5.0

# list - 用列表中的单词替换数字

> ID：12953977
> 
> 赞同：0
> 
> 时间：2012-10-18T11:52:45.367
> 
> 标签：list, recursion, lisp

我正在尝试用一个单词替换列表的所有数字并保持单词原样：例如：(spam '(i ate 1 and he ate 1 too)) 输出：我吃了食物，他也吃了食物。在我的函数中，如果列表为空，我首先检查基本情况。然后我递归地检查列表中的字符，如果它们是数字，例如将它们转换为一些单词 food。最后我检查字符是否是字符保留它。即使我认为逻辑是正确的，代码也不起作用并给出错误。所以这是我的代码

```
(defun spam(list)
    (if (null list) nil
        (if (first numberp list) 'food (spam(rest list))
            ((first list)(spam(rest list)))
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:24:04.050

在原始函数中，第二个条件应为

```
(if (numberp (first list) ... 
```

不是

```
(if (first numberp list) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:26:09.223

```
CL-USER > (subst-if 'food #'numberp '(i ate 1 and he ate 1 too))
(I ATE FOOD AND HE ATE FOOD TOO) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:58:07.483

而不是`'food (spam (rest list))`，你需要`(cons 'food (spam (rest list)))`。同样对于`if`.

# scala - 将多个子项目添加到 Play 2 框架

> ID：12953978
> 
> 赞同：-1
> 
> 时间：2012-10-18T11:52:50.547
> 
> 标签：scala, playframework-2.0

我正在使用带有 java 的 play 2 框架

我已将项目依赖项添加为子项目

按照教程

现在我想要第二个子项目。

但是 build.scala 文件中的 scala 代码有点新

有人能告诉我如何安排第二个子项目吗？

下面是我的 build.scala 文件和子项目的代码。

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "Rub_Server"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // These are the project dependencies
        "mysql" % "mysql-connector-java" % "5.1.18",

    )

  val subProject = Project("Com-RubineEngine-GesturePoints", file("modules/Com-RubineEngine-GesturePoints"))

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here            
    ).dependsOn(subProject)

} 
```

现在我想在 build.scala 文件中添加第二个项目我该怎么做谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:39:46.213

```
 .dependsOn(subProject, anotherProject) 
```

# android - FFMpeg(Android) av_read_frame 或 avcodec_decode_video2 返回相同的颜色

> ID：12953979
> 
> 赞同：0
> 
> 时间：2012-10-18T11:52:51.450
> 
> 标签：android, android-ndk, ffmpeg, rgb, yuv

过去两周我一直在试验 FFMpeg，但遇到了一些麻烦……首先我一直在使用 Galaxy S3，它工作得非常好，给了我有史以来最好的照片，但我最近切换到一个 Galaxy NEXUS 给我带来了一堆问题......

我在做什么：我只是从视频中提取帧

我在做什么：

```
while(av_read_frame(gFormatCtx, &packet)>=0)
        {
            // Is this a packet from the video stream?
            if(packet.stream_index==videoStream)
            {
                // Decode video frame
                avcodec_decode_video2(gVideoCodecCtx, pFrame, &frameFinished, &packet);
                // Did we get a video frame?
                if(frameFinished)
                {//and so on... But our problem is already here... 
```

好的，现在`pFrame`持有我的框架的 YUV 表示......所以，为了检查我从`avcodec_decode_video2(...)`函数中得到的内容，我只是写入`pFrame`一个文件，这样我就可以使用网络上的任何 YUV 阅读器查看它。

```
char yuvFileName[100];
sprintf(yuvFileName,"/storage/sdcard0/yuv%d.yuv",index);
FILE* fp = fopen(yuvFileName, "wb");
int y;
// Write pixel data
for(y=0; y<gVideoCodecCtx->height; y++)
{
    fwrite(pFrame->data[0]+y*pFrame->linesize[0], 1, gVideoCodecCtx->width, fp);    
}
for(y=0; y<gVideoCodecCtx->height/2; y++)
{
    fwrite(pFrame->data[1]+y*pFrame->linesize[1], 1, gVideoCodecCtx->width/2, fp);
}
for(y=0; y<gVideoCodecCtx->height/2; y++)
{
    fwrite(pFrame->data[2]+y*pFrame->linesize[2], 1, gVideoCodecCtx->width/2, fp);
}
fclose(fp); 
```

好的，现在我的结果在`/storage/sdcard0/blabla.YUV`我的 Galaxy Nexus 根内存上的文件存储 @ 上。

但是如果我用（例如 XnView，它旨在正确显示 YUV 类型）打开文件，我只会在图片上看到深绿色。

令我困扰的是，Galaxy S3 上一切正常，但 GNexus 上出现故障......

所以这是我的问题：为什么它在 Galaxy Nexus 上不起作用？

Gnexus 和 armeabiv7 之间的兼容性问题？

我不知道 ！

问候， 切姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:25:25.453

可能是你的帧没有解码好，因为解码器还没有得到关键帧。当我处理直播流时，这发生在我身上。所以在你保存生成的帧之前等待第一个关键帧。并使用 pFrame->width 而不是 gVideoCodecCtx->width

# visual-studio-2012 - 在 Visual Studio 2012 中生成解决方案/项目图

> ID：12953981
> 
> 赞同：1
> 
> 时间：2012-10-18T11:53:07.393
> 
> 标签：visual-studio-2012

我有一个 VS 2012 解决方案，其中包含许多类项目。现在我需要生成一个图表，它可以描述解决方案的整体视图，并帮助我可视化所有项目的结构以及它们是如何相互关联的。

我也没有看到“架构”菜单选项。

如何解决我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:06:49.290

UML 建模支持仅在 VS2012 Ultimate 和 Premium 产品系列中可用。VS2012 Professional 不支持 UML 建模。

Samething 适用于 VS2010 版本。

检查链接以获取更多信息

[http://www.microsoft.com/visualstudio/eng/products/compare](http://www.microsoft.com/visualstudio/eng/products/compare)

# qt - 检测 QMainWindow / QDialog (Qt 4.8) 的移动结束

> ID：12953983
> 
> 赞同：1
> 
> 时间：2012-10-18T11:53:14.493
> 
> 标签：qt, qt4, qdialog, qmainwindow, qt4.8

我在 X11 上使用 Qt 4.8.3。

我需要知道用户何时结束在屏幕上拖动窗口，以便读取最终位置并最终启动动画以将窗口位置调整为“允许”位置。

我注意到`QWidget::moveEvent`每个小动作都会调用 ，但这非常不方便，因为我必须在用户释放鼠标按钮并且移动完全完成时才执行位置检查（并最终启动动画）。

这是真正的问题：当用户单击标题栏时，似乎没有办法检测鼠标释放事件（或获取鼠标按钮状态），因为它是由操作系统而不是 Qt 控制的。我也尝试了`QWidget::x11event(XEvent* e)`...但是事件只收集在窗口内，而不是标题栏。

有人知道实现这一目标的方法吗？

我怀疑我将不得不自己重新实现标题栏……太糟糕了……</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T03:26:52.747

我和你有同样的问题。moveEvent 在其移动的每个点都被触发，Qt 没有提供明确的方法来确定移动的结束。

但是现在，受到divanov回答的启发，我发现当我们在移动对话框后松开鼠标时，总是会触发一个类型为173的事件。那是 QEvent::NonClientAreaMouseMove。

所以代码很简单。

首先安装事件过滤器并宣布一个成员变量：`int nLastEvent;`.

```
bool Win::eventFilter(QObject *obj, QEvent *event)
{
    if (nLastEvent == QEvent::Move && event->type() == 173)
    {
        // do what you wanna do here when the mouse is released,
        // like attaching the dialog to the main window
    }
    nLastEvent = event->type();
    return QWidget::eventFilter(obj, event);
} 
```

它足够简单和高效，不是吗！

希望它对你也有用。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-30T21:37:21.583

意识到这是一个*非常*古老的问题，它是当您尝试“Qt 检测窗口移动事件的结束”时出现的第一个问题。所以，我想我会添加一个与当前（撰写本文时）Qt 5.12.3 版本配合良好的解决方案。

您可以设置一个小型状态机，为了解何时使用`QObject::eventFilter()`. 在 Qt 5.12.x 中，`QEvent::NonClientAreaMouseButtonPress`当鼠标在窗口的非客户区域（例如，标题栏）向下移动时，您将收到一个事件，`QEvent::Move`当窗口位置发生变化时（如果有的话），您将收到一个后续事件，然后是`QEvent::NonClientAreaMouseButtonRelease`释放鼠标按钮时的最终事件。

知道这个序列，并使用一个持久的布尔状态标志 ( `user_moved_window`) 来知道位置实际发生了变化，将在您的`QObject::eventFilter()`方法中为您提供以下代码片段：

```
bool MainWindow::eventFilter(QObject *obj, QEvent *event)
{
    QEvent::Type event_type = event->type();
    [...]
    else if(event_type == QEvent::NonClientAreaMouseButtonPress)
        user_moved_window = false;
    else if(event_type == QEvent::Move && isVisible())
        user_moved_window = true;
    else if(event_type == QEvent::NonClientAreaMouseButtonRelease)
    {
        if(user_moved_window)
        {
            // do what you need to do to here to respond to
            // the end of the reposition event...

            user_moved_window = false;
        }
    }
    [...]
    return MainWindow::eventFilter(obj, event);
} 
```

您可能需要根据您的情况添加一些额外的检查——例如，确保`obj`事件实际上是主窗口——但这个示例适用于我使用 Qt 5.12.3 的生产代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:56:13.057

让我们考虑以下测试应用程序：main.cpp

```
#include <QApplication>

#include "win.h"

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    Win w;
    w.show();

    return app.exec();
} 
```

赢.h：

```
#include <QWidget>
#include <QEvent>
#include <QMoveEvent>
#include <QDebug>

class Win : public QWidget
{
public:
    Win(QWidget *parent = 0) : QWidget(parent) {
        this->installEventFilter(this);
    }

protected:
    bool eventFilter(QObject *obj, QEvent *event) {
        if (event->type() == QEvent::Move) {
            QMoveEvent *moveEvent = static_cast<QMoveEvent*>(event);
            qDebug() << "Move event:" << moveEvent->pos();
        } else {
            qDebug() << "Event type:" << event->type();
        }
        return QWidget::eventFilter(obj, event);
    }
}; 
```

此应用程序仅在其自身上安装事件过滤器，并打印到控制台所有接收到的事件，并使用 QMoveEvent 的特殊格式来区分它在日志中。

典型日志：

```
Event type: 203 
Event type: 75 
Move event: QPoint(0,0) 
Event type: 14 
Event type: 17 
Event type: 26 
Event type: 74 
Event type: 77 
Move event: QPoint(66,52) 
Event type: 12 
Event type: 24 
Event type: 99 
Event type: 77 
Event type: 12 
Event type: 10 
Event type: 11 
Move event: QPoint(308,356) 
Event type: 19 
Event type: 25 
Event type: 99 
Event type: 18 
Event type: 27 
Event type: 77 
```

如您所见，有 2 个移动事件，一个是在最初创建应用程序时，另一个是在我完成窗口移动之后。我正在使用 Qt 4.8.1 和 XOrg 7.6 进行测试。

检查原始 X 事件

1.  让测试应用程序运行。
2.  获取测试应用程序的窗口 ID。为此，请在命令行中执行`xwininfo -name WINDOW_NAME`，其中`WINDOW_NAME`是测试应用程序窗口的名称。另一种选择是使用不带参数的 xwininfo，然后您必须用鼠标指针选择测试应用程序窗口。
3.  运行 X 事件监视器`xev -id 0x2a00002`，其中`0x2a00002`是在上一步中找到的窗口 ID。这将打印您的窗口从 X 服务器接收到的 X 事件。`ConfigureNotify`是 X 协议的对应物`QMoveEvent`。

# c++ - 如何在标准 C++11 中创建 shared_lock 或 upgrade_lock？

> ID：12953984
> 
> 赞同：6
> 
> 时间：2012-10-18T11:53:14.043
> 
> 标签：c++, multithreading, c++11, mutex, boost-thread

我在新标准中非常缺少`std::shared_lock`模板类。在 Boost.Thread 中有`boost::shared_lock`，甚至`boost::upgrade_lock`存在。

`std::unique_lock`为什么会这样，在 C++11中没有 std::shared_lock吗？但是在纯 C++11 中，
如何获得类似的行为？`boost::shared_lock`

我正在考虑使用`boost::shared_lock<std::mutex>`，但这没有太大意义，因为`std::mutex`没有`lock_shared()`成员。而且，没有这样的`std::shared_mutex`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T13:09:15.517

`std::shared_mutex`由于没有时间正确考虑，霍华德对 C++11 的提议被拒绝了。他再次为 C++17 提出了它，并且本周在波特兰的会议上正在讨论它。

同时，如果您可以使用 Boost，那么您也可以使用；标准化不会有任何新功能。

也就是说，值得检查一下 using`shared_mutex`实际上是有益的——在许多情况下，由于互斥体本身的争用，它并没有提供所希望的性能提升。

# objective-c - 从屏幕 iOS 中删除视图

> ID：12953985
> 
> 赞同：0
> 
> 时间：2012-10-18T11:53:14.817
> 
> 标签：objective-c, ios, uiview

我有这样的架构：

```
----- main view    
       |
        ---right bar view
             |
              ----- Navigation Controller view
                     |
                     ------tableView Controller 
```

当我在 tableViewController 上时，如何从窗口中删除右栏视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:01:14.983

对要删除的视图使用标签，并使用该标签的引用删除视图。
喜欢：
在将右栏视图添加到主视图（self.view）之前添加一个标签

```
rightBarView.tag   =   1; 
```

并删除 pirticular 视图写入

```
for(UIView *temp in [self.view subviews]) {
    if (temp.tag == 1) {
        [temp removeFromSuperview];
    }
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:57:48.107

尝试这个：

```
 [self.view.superview.superview removeFromSuperview]; 
```

另一种更简洁的方法是使用通知：您可以向控制您的主视图的对象发送通知，以便它删除它的右栏子视图。它会是这样的：

在您的主视图控制器中：

```
[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(removeRightBar:) 
    name:@"RemoveRightBarNotification"
    object:nil];

- (void) receiveTestNotification:(NSNotification *) notification
{
     <REMOVE SUBVIEW FROM mainView>
} 
```

并在您的表格视图控制器中：

```
[[NSNotificationCenter defaultCenter] 
    postNotificationName:@"RemoveRightBarNotification" 
    object:self]; 
```

在这种情况下，通知将在主视图和表视图控制器之间提供非常松散的连接。

# delphi - 检索火鸟用户密码

> ID：12953989
> 
> 赞同：1
> 
> 时间：2012-10-18T11:53:33.507
> 
> 标签：delphi, firebird

我的应用程序当前正在使用 firebird 安全性为我的应用程序的任何用户登录。

我们使用的是 Delphi7 和 Firebird 2.1。

现在我们需要改变这一点，我们需要自己控制去访问。

我们正在考虑从数据库中检索所有用户密码（作为转换例程）并将密码保存在我们的表中......

有可能做到这一点吗？

我正在尝试使用 delphi 组件 TIBSecurityService，但没有成功。

看一看：

```
var
  i: integer;
  l: TStrings;
  pwd: string;
begin
  IBSecurityService1.Attach;
  IBSecurityService1.DisplayUsers;
  l := TStringList.Create;
  try
    for i := 0 to IBSecurityService1.UserInfoCount-1 do
      l.add(IBSecurityService1.UserInfo[i].UserName);

    while l.Count > 0 do
      try
        IBSecurityService1.DisplayUser(l[0]);
        pwd := IBSecurityService1.Password;
        // pwd = ''
      finally
        l.Delete(0);
      end;
  finally
    l.Free;
  end;
end; 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:22:49.697

Firebird 中的密码经过哈希处理，因此您无法恢复它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T12:25:09.100

据我所知，TIBSecurityService 适用于 Interbase 6（请参阅其在[Embarcadero 的 wiki](http://docwiki.embarcadero.com/Libraries/XE3/en/IBServices.TIBSecurityService)上的条目）。我不确定该组件是否仍然适用于 Firebird 2.1，因为最初的 Firebird 是该版本的一个分支。

说了这么多，就**无法**找回原来的密码了。[Firebird 中的密码使用Firebird 常见问题解答](http://www.firebirdfaq.org/faq55/)中所述的单向加密算法进行加密。因此，如果那是您的意图，那么它将行不通。

您可以尝试升级保存用户信息的 security2.FDB 数据库。您可以通过在旧的 Firebird 服务器上备份该数据库并在新的 Firebird 服务器上恢复它来做到这一点。检查[此链接](http://ibexpert.net/ibe/index.php?n=Doc.SecurityInFirebird2#DoingTheSecurity)以了解要遵循的步骤。

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:20:55.113

在任何体面的应用程序中，密码都不会加密或以纯文本形式存储。

它们是通过计算密码的哈希值来存储的。尽管有几种弱散列算法，但 Hasing 应该是不可逆的，我怀疑如果没有严重的黑客攻击，恢复是可能的。

# opencv - 深度图像的 Otsu 阈值

> ID：12953993
> 
> 赞同：14
> 
> 时间：2012-10-18T11:53:46.300
> 
> 标签：opencv, kinect, background-subtraction

我正在尝试从使用 kinect 获取的深度图像中减去背景。当我了解 otsu 阈值是什么时，我认为它可以做到。将深度图像转换为灰度我希望可以应用 otsu 阈值来对图像进行二值化。

但是我用 OpenCV 2.3 实现（试图实现）这个，它是徒劳的。然而，输出图像被二值化，非常出乎意料。我连续进行了阈值处理（即将结果打印到屏幕上以对每一帧进行分析），发现某些帧的阈值是 160ish，有时发现为 0。我不太明白为什么会这样。可能是由于 kinect 返回的深度图像中有大量 0，对应的像素无法测量。有没有办法告诉算法忽略值为 0 的像素？或者 otsu 阈值对我想要做的事情不利？

以下是相关代码的一些输出和段。您可能会注意到第二个屏幕截图看起来可以进行一些很好的二值化，但是我想要实现一个能够明显区分场景中椅子对应的像素和背景的像素。

谢谢。

```
 cv::Mat1s depthcv(depth->getHeight(), depth->getWidth());
            cv::Mat1b depthcv8(depth->getHeight(), depth->getWidth());
            cv::Mat1b depthcv8_th(depth->getHeight(), depth->getWidth());
            depthcv.data =(uchar*) depth->getDepthMetaData().Data();
            depthcv.convertTo(depthcv8,CV_8U,255/5000.f);

            //apply otsu thresholding
            cv::threshold(depthcv8, depthcv8_th, 128, 255, CV_THRESH_BINARY|CV_THRESH_OTSU);
            std::ofstream output;
            output.open("output.txt");
            //output << "M = "<< endl << " "  << depthcv8 << endl << endl;
            cv::imshow("lab",depthcv8_th);
            cv::waitKey(1); 
```

![图 1](../Images/a4a15ccee1a28f8f3405cc9fc51685c1.png) ![第二张截图看起来可以做一些很好的二值化](../Images/09740d94c96b55bf5cc20513ce417101.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T19:18:01.040

Otsu 可能足以满足您的要求，但您确实需要在使用 Otsu 算法计算最佳阈值之前屏蔽零值，否则强度值的分布将偏斜低于您想要的值。

OpenCV 没有为`cv::threshold`函数提供掩码参数，因此您必须自己删除这些值。我建议将所有非零值放在一个 1 x N 矩阵中，并调用`cv::threshold`函数`CV_THRESH_OTSU`并保存返回值（这是估计的最佳阈值），然后仅使用标志`cv::threshold`在原始图像上再次运行该函数`CV_THRESH_BINARY`和计算的阈值。

这是一种可能的实现：

```
// move zeros to the back of a temp array
cv::Mat copyImg = origImg;
uint8* ptr = copyImg.datastart;
uint8* ptr_end = copyImg.dataend;
while (ptr < ptr_end) {
  if (*ptr == 0) { // swap if zero
    uint8 tmp = *ptr_end;
    *ptr_end = *ptr;
    *ptr = tmp;
    ptr_end--; // make array smaller
  } else {
    ptr++;
  }
}

// make a new matrix with only valid data
cv::Mat nz = cv::Mat(std::vector<uint8>(copyImg.datastart,ptr_end),true);

// compute optimal Otsu threshold
double thresh = cv::threshold(nz,nz,0,255,CV_THRESH_BINARY | CV_THRESH_OTSU);

// apply threshold
cv::threshold(origImg,origImg,thresh,255,CV_THRESH_BINARY_INV); 
```

# mootools - 使用 mootools 注入文本输入时缺少值属性

> ID：12953999
> 
> 赞同：1
> 
> 时间：2012-10-18T11:53:58.530
> 
> 标签：mootools, element, code-injection

正如[这个](https://stackoverflow.com/questions/6222062/how-to-set-the-value-of-a-text-input-with-mootools)问题和[这个](http://jsfiddle.net/Me7Zr/3/)小提琴所指出的，当注入一个输入时，值属性似乎没有被添加到 DOM 中，MooTools 似乎在内部处理它。不幸的是，这意味着这样注入的输入：

```
new Element("input", {type: "text", value: "injected value"}).inject(parent); 
```

不能像这样选择：

```
parent.getElements('input[value="injected value"]').length; 
```

（如果存在 value 属性，则返回 0 而不是 1）

在我的项目中，我需要插入空白输入框，但前提是还没有空白输入框；`if(parent.getElements('input[value=""]').length == 0`）但是，无论有多少空白输入，这总是解决为真。

有没有更好的方法来实现我的目标，或者是否有修复看起来像错误的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:57:07.037

您可以尝试添加：

```
var x = new Element("input", {type: "text", value: "injected value"}).inject(parent);
x.setAttribute("value",x.value); 
```

**警告：**虽然这解决了元素的 value 属性未反映的问题，但 value 属性通常不是检查字段是否为空的好方法，因为它没有与输入的内容同步。

最好使用这样的东西：

```
$$('input[type=text]').filter(function(item){return (item.value=="");}) 
```