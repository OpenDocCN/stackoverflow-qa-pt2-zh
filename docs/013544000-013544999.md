# StackOverflow 问答 13544000-13544999

# c# - 分离视图、命令表示（文本、图标）和命令逻辑（执行、CanExecute）

> ID：13544002
> 
> 赞同：7
> 
> 时间：2012-11-24T18:02:47.770
> 
> 标签：c#, wpf, xaml, mvvm, routed-commands

如果 TL;DR：请参阅最后一段。

纯 WPF “建议”将演示文稿（控件、文本、图标）放入视图并将命令逻辑（执行、CanExecute 方法）放入代码隐藏中。除了将逻辑放入视图 ( ) 和代码隐藏是一种不受欢迎的做法之外，它对**XAML 复制**`CommandBindings`毫无帮助：**每次**命令时都必须复制文本、图标、大图标、提示和许多其他属性用于：主菜单、上下文菜单、工具栏按钮、功能区按钮和其他控件。

 ****看起来第一个问题（真正分离视图和逻辑）由`DelegateCommand`,`RelayCommand`和类似的方法解决。命令逻辑被移动到 ViewModels（或在 MVVMC 的情况下为控制器），代码隐藏是干净的，`CommandBindings`视图中没有其他废话。

但是，对于演示重复问题，我找不到普遍接受的解决方案。我想将**命令表示**（文本、图标）和**命令逻辑**（`Execute`、`CanExecute`方法）分开。我能找到的所有代码要么将演示文稿放入代码中（通过创建带有and之类的`RoutedCommand`附加属性的 a ），要么将代码放入演示文稿中（即，将处理程序放入视图和代码隐藏中）。我也不喜欢。我认为演示文稿应该完全在 XAML 中，代码应该完全在 CS 中（在 ViewModel 或 Controller 中）。`Label``Icon`

**问题：**如何分离视图（带有引用命令的控件的 XAML）、命令的表示（每个命令的标签、图标等）和命令的逻辑（ViewModel 或控制器中的 C# 代码等）`Execute`？`CanExecute`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:59:02.657

这个问题没有内置的解决方案，您将不得不卷起袖子并自己创建所需的结构。

在我最近参与的一个项目中，我正是这样做的。我创建了一个名为“动作”的概念，它`ICommand`用其他视觉属性补充了 WPF。是这样的……

```
interface IAction
{
  ICommand Command { get; }
  string DisplayText { get; }
  string ToolTipText{ get; }
  URI Icon { get; }
} 
```

该应用程序包含一组`Action`实例。然后可以将它们绑定到菜单、工具栏等……允许`Action`以各种不同的演示样式重新使用相同的实例。这都是相当简单的 MVVM 东西！****

# php - jQuery成功函数未执行

> ID：13544007
> 
> 赞同：2
> 
> 时间：2012-11-24T18:03:21.780
> 
> 标签：php, jquery

第一个成功函数有效，第二个无效……如果我将数据类型更改为文本，它会起作用……但如果我将数据类型更改为文本，则无法遍历数组……例如，我需要数据 [0]……这适用于 json....但使用 json 成功功能不起作用...

```
var turl = "getForum.php";
var turl = "getForum.php";
var wurl = "getDiscussions.php";
$.ajax({
    url:turl,
    type:"POST",
    dataType:"json",
    success:function(data){
        forumid = data[0]; // this works ...
        dataString = 'forumid='+ forumid;
        $.ajax({
            url:wurl,
            type:"POST",
            dataType:"json",
            data:dataString,
            success:function(data){
                alert(data); // this works if I change datatype to text... but if i type datatype to   text am not able to iterate through the array .. for example i require data[0].. which works with json....but with json success function is not working ... 
            }
        });
    }
}); 
```

php 文件返回 json 对象

```
$query1 = " select * from discussforum where forumId= '$forumid'; ";
$result1 = mysql_query($query1); 

 while($info1 = mysql_fetch_array( $result1 )){
 echo json_encode($info1);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:47:38.217

您确定您的 PHP 只返回一个 JSON 对象吗？如果不：

```
$ret = array();
while($info1 = mysql_fetch_array( $result1 )){
    $ret[] = $info1;
}
print json_encode($ret); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:53:09.010

我认为解决方案在评论中有所描述，但在这里更详细一点。首先看一下[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)的精美文档。您需要为所有 Ajax 调用添加错误回调。带有以下签名：

```
error(jqXHR, textStatus, errorThrown) 
```

您可以像这样向 .ajax() 添加一个参数：

```
error: function(jqXHR, textStatus, errorThrown) {
  console.error(textStatus);
}, 
```

这样，您将在控制台中看到在 Ajax 调用期间以及在消息处理期间发生的每个错误。您可以在一些常见的 .js 文件中定义一个通用的 ajaxError 回调并在任何地方使用它。

在这种情况下，您很好地解释了错误的原因：`getDiscussions.php`返回的不是 JSON，因此 jQuery 解析器在您设置时无法理解它：如果有回调`dataType:"json"`，它将调用回调。`error`但是，当 dataType 设置为 text 时，它可以工作。所以 POST 请求可能失败。

要查看它发送的内容，您可以在错误回调中提取它，如下所示：

```
error: function(jqXHR, textStatus, errorThrown) {
  console.error('Error in response: ' + jqXHR.responseText
}, 
```

这样您就可以诊断服务器中的问题。

# sql - 返回组成员满足条件 x 的组中的所有条目

> ID：13544011
> 
> 赞同：0
> 
> 时间：2012-11-24T18:04:27.677
> 
> 标签：sql, ms-access-2010

在 Ms Access 中，我正在尝试编写一个 SQL 查询来回答以下问题：在至少一名球队成员受伤的足球运动员列表中返回所有球队的所有球员 ID。

我是 SQL 新手。我试过类似的东西

```
SELECT pid FROM players WHERE team_id IN 
           (SELECT team_id FROM players WHERE injury = 'yes') 
```

Access 不接受此 IN。有没有一种简单的方法可以做到这一点？我宁愿这样作为一个查询运行，而不是创建单独的查询，所以我可以根据需要轻松更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:11:07.783

我很难相信它不支持`IN`，但是您可以使用连接来做到这一点：

```
SELECT distinct players.pid
FROM players as injured
INNER JOIN players on players.team_id = injured.team_id
WHERE injured.injury = 'yes' 
```

我用`distinct`在一个球队有多名受伤球员的情况下，这会导致该球队的球员被多次归还

# ios - 将拖动触摸传播到 UIScrollView 超级视图

> ID：13544013
> 
> 赞同：2
> 
> 时间：2012-11-24T18:04:38.673
> 
> 标签：ios, uiscrollview, uigesturerecognizer, superview

我一直在这里寻找所有其他类似的主题，使用 UIGestureRecognizers、使用 hitTest:withEvent、pointInside:withEvent: 等，但对于我需要实现的目标似乎没有什么好说的。

基本上我有一个主视图（一个普通 UIViewController 的 self.view）和一个小的矩形 UIScrollView 附加到它的底部：scrollView 充满了一些 UIImageViews，用户可以像往常一样滚动它。

但是用户也应该能够将一个 UIImageView （或它的副本）从 UIScrollView 拖到主视图，而且，这是我发现非常困难的，使用相同的拖动手势，因此我需要一种方法：

1）区分正常的水平滚动手势，这应该由 UIScrollView 以通常的方式处理和在图像视图上的拖动手势。

2）一旦确定了拖动手势，应该将触摸传播到超级视图，它将承载 UIImageView 的副本，并且使用相同的拖动手势继续在主视图上拖动，即使超出 UIScrollView 的范围。

请注意，我知道如果 UIScrollView 具有 userInteractionEnabled = NO，则触摸会传播到子视图，但是 1）我想将其传播到父视图而不是子视图，2）userInteractionEnabled 属性显然只有在初始手势为终止，而我需要使用单个拖动手势。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:57:10.120

所以，到目前为止，我最终实现了`touchesShouldBegin:withEvent:inContentView:`我的 UIScrollView 子类的方法，但`delayContentTouches`设置为 YES （默认）而不是 @nhahtdh 建议的 NO 。

奇怪的是，即使只实现该方法就足以让我的子视图拦截拖动，并且我的滚动视图仍然正常滚动，而 delayContentTouches 设置为 NO 我无法滚动它，因为所有子视图都开始移动。

真的要归功于@nhahtdh，所以伙计，如果您发布答案，我会接受，非常感谢您的帮助。

# java - 如何在图像调整大小时调整字体大小？

> ID：13544015
> 
> 赞同：-1
> 
> 时间：2012-11-24T18:05:04.010
> 
> 标签：java, swing, java-2d

> **可能重复：**
> [如何编辑转换为图像的文本？或任何其他实现/编辑文本的方法](https://stackoverflow.com/questions/13485501/how-to-edit-a-text-that-is-converted-into-image-or-any-other-approach-to-realiz)

我想要实现的是......我在文本窗格中有一个文本，我将其转换为 BufferedImage 并通过用鼠标拖动它来调整图像的大小。现在，如果我想编辑文本，我单击隐藏图像并显示文本窗格中的文本的图像。

我的问题是文本窗格中文本的大小未调整大小（增加/减少），因为调整大小是在图像而不是文本上完成的。那么如何在调整包含文本的图像大小时更改字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:26:06.133

您可以通过使用`AffineTransform`. 基本上，您需要维护对用户开始使用的基本字体的引用。当您需要时，您可以通过为 a 提供适当的比例来派生一个新的字体实例`AffineTransform`并将其应用于文本窗格

查看[`Font#deriveFont(AffineTransform trans)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#deriveFont%28java.awt.geom.AffineTransform%29)更多详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:18:00.090

尝试`JTextPane`按此处所述缩放 的内容[http://java-sl.com/Scale_In_JEditorPane.html](http://java-sl.com/Scale_In_JEditorPane.html)

只需听 resize 并相应地调整比例因子

# ios - UINavigationBar 项目在旋转后调整大小

> ID：13544017
> 
> 赞同：1
> 
> 时间：2012-11-24T18:05:09.860
> 
> 标签：ios, xcode, navigationbar

我这样设置 NavigationBar 的按钮：

```
UIBarButtonItem *addAcc = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Add"                                            
                               style:UIBarButtonItemStylePlain 
                               target:self 
                               action:@selector(addNewAcc)];

UIBarButtonItem *delAcc = [[UIBarButtonItem alloc] 
          initWithTitle:@"Del"                                            
          style:UIBarButtonItemStylePlain 
          target:self 
          action:@selector(DeleteButtonAction)];

NSArray *arrBtns = [[NSArray alloc]initWithObjects:addAcc,delAcc, nil];
self.navigationItem.rightBarButtonItems = arrBtns; 
```

这很好用，但在旋转设备或更改按钮后，它们会变得更长。我该如何解决这个问题？

问候

这是截图： 旋转前： http: [//i.stack.imgur.com/9W3Hl.jpg](http://i.stack.imgur.com/9W3Hl.jpg) 旋转后：http: [//i.stack.imgur.com/M27Hx.jpg](http://i.stack.imgur.com/M27Hx.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:33:40.760

您应该使用按钮的属性 autoresizngmask 和 autoriszessubViews 。

检查参考： [自动](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/autoresizingMask)

# templates - 我可以在 ExpressionEngine / ModX 上使用我自己的网站模板吗？

> ID：13544019
> 
> 赞同：0
> 
> 时间：2012-11-24T18:05:11.867
> 
> 标签：templates, web, expressionengine

我是 ExpressionEngine 和 ModX 的新手，我几乎没有开始阅读它，我需要一些鼓励，然后再深入学习它们中的任何一个。

我知道它们都是 CMS 实用程序，可让您创建网站并像 wordpress 一样管理它们，但我想知道是否可以简单地使用模板，而不是完全从头开始构建它，比如一个那些免费的 HTML 模板或高级模板，并使用这两个 CMS 实用程序之一来管理/更新站点的内容。

我四处寻找一些教程，但我发现的那些只教如何从头开始创建网站，我不介意阅读和学习，只要有人能告诉我是否可以做我提到的事情前。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:14:25.053

是的，您可以使用 MODx。你可以使用任何你想要的 HTML、css、javascript，没有任何限制。

我不知道 ExpressEngine。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T12:39:34.423

是的，您可以在 ExpressionEngine 中使用您喜欢的任何 HTML，无论是您自己编写的代码还是来自模板。

# mysql - 员工时钟的 MySQL 数据库结构

> ID：13544023
> 
> 赞同：4
> 
> 时间：2012-11-24T18:06:20.283
> 
> 标签：mysql, datetime, unix-timestamp

我正在开发一个部分是员工时钟的应用程序。这不是太复杂，但我想确保我第一次朝着正确的方向前进。我目前有这个表结构：

```
id - int
employee_id - int (fk)
timestamp - mysql timestamp
event_code - int (1 for clock in, 0 for clock out) 
```

如果他们的最后一个活动是“打卡”，他们只会看到“打卡”按钮，反之亦然，我已经完成了所有工作。

我的问题是我们需要生成一份报告，显示员工一个月内工作了多少小时，以及当前财政年度（自当年 6 月 1 日起）的总小时数。

似乎我可以将时钟输入和输出存储在同一记录中，甚至可以计算两个事件之间的工作分钟数并将其存储在一个名为“工作”的列中。然后，我只需要为该员工获取所有该列的总和即可知道总共有多少时间。

我应该保持我的结构，每对时钟输入和输出事件都移动到一行，还是有更好的方法让我完全错过？

我知道人为错误也是打卡钟的一个大问题，因为人们经常忘记打卡或打卡，我不确定哪种结构可以更轻松地处理。

MySQL Timestamp 是一个不错的选择还是我应该使用 UNIX Timestamp？

感谢您的任何建议/指导。

富有的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:10:26.533

我会选择*两张*桌子：

1.  一张表应该是发生了什么事件的简单日志，就像您现有的设计一样。

2.  第二个表包含计算的工作时间。有用于登录和注销时间的列，也许还有第三列，其中预先计算了它们之间的时间差。

正如您所提到的，关键是计算员工工作了多少小时很复杂。员工可能会抱怨他们的工作时间比您的计划报告的时间长。在这种情况下，您希望能够访问所有事件的原始日志而不会丢失任何信息，以便您可以准确地查看和调试发生的事情。但是这种原始格式在 SQL 中运行缓慢且难以使用，因此出于报告目的，您还需要第二个表，以便您可以快速生成包含每周、每月或每年总和的报告。

* * *

> MySQL Timestamp 是一个不错的选择还是我应该使用 UNIX Timestamp？

时间戳很好，因为有很多 MySQL 函数可以很好地使用时间戳。您可能还想考虑使用`datetime`与`timestamp`.

**有关的**

*   [我应该使用字段“日期时间”还是“时间戳”？](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)

# c# - 防止按键离开应用程序

> ID：13544026
> 
> 赞同：0
> 
> 时间：2012-11-24T18:06:44.467
> 
> 标签：c#, winforms

我想基本上吸收按键。

我目前正在我的主窗体上使用键预览，并且有一个按键事件处理程序，用于检查是否按下了 windows 键。有没有办法防止按键离开应用程序并打开开始菜单？

特定控件有一个选项可以抑制按键，有没有办法抑制对 Windows 的按键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:14:57.890

几个地方开始寻找：

*   [如何使用 vb.net 禁用 Windows 开始菜单？](https://stackoverflow.com/questions/3308163/how-to-disable-windows-startmenu-using-vb-net)
*   [禁用 Windows 键 [已解决]](http://www.vbforums.com/showthread.php?381250-Disable-Windows-Key-Resolved) - 参考`SetWindowsHookEx`
*   [使用 Win32 应用程序在 Windows 7 中禁用 CONTROL + ALT + DELETE 和 Windows(win) 键](https://stackoverflow.com/questions/4529577/disable-control-alt-delete-and-windowswin-key-in-windows-7-using-win32-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:10:02.480

在应用程序外部拦截键盘事件的唯一方法是使用 P/Invoke [SetWindowsHookEx](http://www.pinvoke.net/default.aspx/user32.setwindowshookex)。这将为与焦点应用程序无关的键盘事件设置全局回调。

# android - Scoreloop Android 无法提交用户或分数

> ID：13544031
> 
> 赞同：0
> 
> 时间：2012-11-24T18:07:13.090
> 
> 标签：android, scoreloop

这是代码：

```
public class ProfileActivity extends Activity {

private final static int    DIALOG_PROGRESS = 0;
private final static int    DIALOG_SUCCESS  = 1;
private final static int    DIALOG_ERROR    = 2;

private EditText usernameText;
private EditText emailText;

// saves the last error occurred, so we can read it in onPrepareDialog()
String dialogErrorMsg = "";
String dialogSuccessMsg = "";

public void onResume() {
    super.onResume();

    // here we fetch the user's profile data from Scoreloop to fill in 
    // the text fields

    // first, a request observer...
    RequestControllerObserver observer = new RequestControllerObserver() {

        public void requestControllerDidReceiveResponse(RequestController requestController) {
            UserController userController = (UserController)requestController;
            dismissDialog(DIALOG_PROGRESS);

            // insert values into text fields
            User user = userController.getUser();
            usernameText.setText(user.getLogin());
            emailText.setText(user.getEmailAddress());
        }

        public void requestControllerDidFail(RequestController aRequestController, Exception anException) {
            // the profile could not be loaded :(
            dismissDialog(DIALOG_PROGRESS);

            // show some error message
            dialogErrorMsg = "خطأ في تحميل الملف الشخصي";
            showDialog(DIALOG_ERROR);
        }
    };

    // here's the UserController doing our work to update the profile data
    UserController userController = new UserController(observer);

    // show progress dialog
    showDialog(DIALOG_PROGRESS);

    // and fire the request
    userController.loadUser();
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // load the layout
    setContentView(R.layout.profile);

    // find our text fields
    usernameText = (EditText) findViewById(R.id.text_username);
    emailText = (EditText) findViewById(R.id.text_email);

    // set up click handler for the save button
    ((Button) findViewById(R.id.button_save_profile)).setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            // get the current User
            User user = Session.getCurrentSession().getUser();

            // update his values
            user.setLogin(usernameText.getText().toString());
            user.setEmailAddress(emailText.getText().toString());

            // set up a request observer
            RequestControllerObserver observer = new RequestControllerObserver() {

                public void requestControllerDidReceiveResponse(RequestController aRequestController) {
                    dismissDialog(DIALOG_PROGRESS);

                    dialogSuccessMsg = "تم تحميل الملف الشخصي بنجاح";

                    showDialog(DIALOG_SUCCESS);
                }

                public void requestControllerDidFail(RequestController controller, Exception exception) {
                    dismissDialog(DIALOG_PROGRESS);

                    // Error handling has to account for many different types of
                    // failures...

                    if(exception instanceof RequestControllerException) {

                        RequestControllerException ctrlException = (RequestControllerException) exception;

                        if(ctrlException.hasDetail(RequestControllerException.DETAIL_USER_UPDATE_REQUEST_EMAIL_TAKEN)) {
                            // this case is not quite a fatal error. if the email address is already
                            // taken, an email will be sent to it to allow the user to link this device
                            // with his account. 
                            // that's why we'll show a success dialog in this case.
                            dialogSuccessMsg = "تم إستخدام الأميل من قبل شخص آخر";
                            showDialog(DIALOG_SUCCESS);
                        }
                        else {
                            // in any of these cases it's an error:

                            dialogErrorMsg= "";
                            // email may be invalid
                            if(ctrlException.hasDetail(RequestControllerException.DETAIL_USER_UPDATE_REQUEST_INVALID_EMAIL)) {
                                dialogErrorMsg += "خطأ في الأميل";
                            }

                            // username may be invalid, taken or too short
                            if(ctrlException.hasDetail(RequestControllerException.DETAIL_USER_UPDATE_REQUEST_USERNAME_TAKEN)) {
                                dialogErrorMsg += "تم إستخدام الأسم من قبل شخص آخر";
                            }
                            else if(ctrlException.hasDetail(RequestControllerException.DETAIL_USER_UPDATE_REQUEST_USERNAME_TOO_SHORT)) {
                                dialogErrorMsg += "الأسم قصير جدا";
                            }
                            else if(ctrlException.hasDetail(RequestControllerException.DETAIL_USER_UPDATE_REQUEST_INVALID_USERNAME)) {
                                dialogErrorMsg += "الأسم غير صالح للإستخدام";
                            }

                            showDialog(DIALOG_ERROR);
                        }
                    }
                    else {
                        // generic Exception
                        dialogErrorMsg = exception.getLocalizedMessage();
                        showDialog(DIALOG_ERROR);
                    }

                    // update displayed values
                    User user = ((UserController)controller).getUser();
                    usernameText.setText(user.getLogin());
                    emailText.setText(user.getEmailAddress());

                }
            };

            // with our observer, set up the request controller
            UserController userController = new  UserController(observer);

            // pass the user into the controller
            userController.setUser(user);

            showDialog(DIALOG_PROGRESS);

            // submit our changes
            userController.submitUser();

        }
    });
}

// handler to create our dialogs
@Override
protected Dialog onCreateDialog(final int id) {
    switch (id) {
    case DIALOG_PROGRESS:
        return ProgressDialog.show(ProfileActivity.this, "", "جاري التحميل");
    case DIALOG_ERROR:
        return (new AlertDialog.Builder(this))
            .setPositiveButton("إغلاق", null)
            .setMessage("")
            .create();
    case DIALOG_SUCCESS:
        return (new AlertDialog.Builder(this))
            .setPositiveButton("إغلاق", null)
            .setMessage("")
            .create();
    }
    return null;
}

// handler to update the success and error dialog with the corresponding message
@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    switch (id) {
    case DIALOG_ERROR:
        AlertDialog errorDialog = (AlertDialog)dialog;
        errorDialog.setMessage(dialogErrorMsg);
        break;
    case DIALOG_SUCCESS:
        AlertDialog successDialog = (AlertDialog)dialog;
        successDialog.setMessage(dialogSuccessMsg);
        break;
    }
}

} 
```

它总是无法提交新用户。没有任何理由，我已经在我的主屏幕中初始化了它。

```
 Client.init(this, secret, null); 
```

我也将 socreloop.properties 复制到我的协助文件夹中。

提交新分数时也会出现同样的问题。它不会提交。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:23:54.250

您是否在模拟器上测试它，因为在我的情况下，从模拟器测试添加新用户需要很长时间，有时甚至无法从模拟器添加新用户，尝试从 android 设备测试它。

# android - 正在测试的 Robotium Activity 需要一个 Intent

> ID：13544034
> 
> 赞同：0
> 
> 时间：2012-11-24T18:07:35.803
> 
> 标签：android, testing, robotium

我有一个活动声明为

```
public class QuestionActivity {

    private Quiz quiz;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.question);
        quiz = (Quiz) getIntent().getSerializableExtra("quiz");
        quiz.getQuestions()
    }
} 
```

如您所见，这要求启动该活动的活动在意图中放置一个 Quiz 对象。

这是我的单元测试

```
public class QuestionActivityTest extends
    ActivityInstrumentationTestCase2<QuestionActivity>
{
    public QuestionActivityTest()
    {
        super(QuestionActivity.class);
    }

    public void testExecuteQuiz()
    {
      //Test stuff
    }
} 
```

这个什么都不做的简单测试失败了，因为当 Robotium 创建我的 Activity 实例时，我将得到一个空指针，因为我看不到如何将我的 Quiz 实例注入 Intent 以便它可用于 Activity onCreate 方法？

这是日志猫：

```
 11-24 20:57:24.691: I/TestRunner(1331): started: testExecuteQuiz(com.nquizitive.timestables.QuestionActivityTest)
 11-24 20:57:24.791: I/TestRunner(1331): finished: testExecuteQuiz(com.nquizitive.timestables.QuestionActivityTest)
 11-24 20:57:24.791: I/TestRunner(1331): passed: testExecuteQuiz(com.nquizitive.timestables.QuestionActivityTest)
 11-24 20:57:26.281: I/TestRunner(1346): started: testExecuteQuiz(com.nquizitive.timestables.QuestionActivityTest)
 11-24 20:57:26.641: D/AndroidRuntime(1346): Shutting down VM
 11-24 20:57:26.671: W/dalvikvm(1346): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
 11-24 20:57:26.711: E/AndroidRuntime(1346): FATAL EXCEPTION: main
 11-24 20:57:26.711: E/AndroidRuntime(1346): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nquizitive.timestables/com.nquizitive.timestables.QuestionActivity}: java.lang.NullPointerException
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.os.Handler.dispatchMessage(Handler.java:99)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.os.Looper.loop(Looper.java:123)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.ActivityThread.main(ActivityThread.java:4627)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at java.lang.reflect.Method.invokeNative(Native Method)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at java.lang.reflect.Method.invoke(Method.java:521)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at dalvik.system.NativeStart.main(Native Method)
 11-24 20:57:26.711: E/AndroidRuntime(1346): Caused by: java.lang.NullPointerException
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at com.nquizitive.timestables.QuestionActivity.populateQuestion(QuestionActivity.java:128)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at com.nquizitive.timestables.QuestionActivity.populateActivity(QuestionActivity.java:95)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at com.nquizitive.timestables.QuestionActivity.onCreate(QuestionActivity.java:87)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
 11-24 20:57:26.711: E/AndroidRuntime(1346):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T11:09:10.833

在执行特定测试之前，您可以在 setUp() 中进行意图和设置。就像是：

```
protected void setUp() {
     Quiz quiz = new Quiz();
     Intent intent = new Intent();
     intent.putExtra("quiz",quiz);
     setActivityIntent(intent);
} 
```

然后执行你的测试。

# jquery - 服务器端保护机制，防止任何人查看 javascript 源代码

> ID：13544037
> 
> 赞同：-5
> 
> 时间：2012-11-24T18:07:55.543
> 
> 标签：jquery, encryption, protection, protected

我知道您可以使用 javascript obfosculator 来保护 javascript 源代码，但除此之外我还需要一个更好的解决方案。

我正在研究加密要放置在某些网站上的 javascript 文件的选项。这个 javascript 文件像往常一样包含在：

```
<script src="http://secure.com/encryted.js"></script> 
```

这个想法是为了以某种方式阻止用户查看 javascript 的源代码，或者至少让这样做变得更加困难......

我正在考虑一种仅通过执行类似操作来返回 javascript 的方法

```
<script src="http://secure.com/validate.php"></script> 
```

这样我就可以在主机secure.com上检查某些条件，只有在满足这些条件时才返回javascript（加密）。

有没有人有想法或做过这样的事情？或者知道防止javascript源代码暴露或使其变得非常困难的好方法？

ETA 似乎是加密它的好方法

```
http://www.enetplanet.com/enc/ 
```

我的目标是让人们查看源代码 /html 不能“仅查看”源代码有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:40:10.670

不，TEA (http://www.enetplanet.com/enc/) 不是您可以用于此类任务的工具。它只是一个概念验证或玩具而已。TEA（与任何其他加密系统一样）实际上不能用于加密/保护您发送到客户浏览器的 javascript 文件。

考虑一下：用户必须拥有加密程序的副本才能解密来自您的服务器的 javascript 文件。在其他情况下，这本身并不是一个很大的安全漏洞。任何加密系统都依赖于密钥的秘密性，而不是加密程序/算法的秘密性。

不幸的是，当谈到客户端 JavaScript 时，这*是*一个安全漏洞。加密程序 (TEA) 本身就是一个 javascript 文件。任何人都可以阅读它。以仅打印出加密密钥或仅解密“受保护” javascript文件而不进行任何检查的方式对其进行修改是微不足道的。

此外，最终用户可以完全、无限制地访问网络通信渠道。他可以使用安装在其 PC 上的网络嗅探器读取密码（密钥）。没有密钥（也没有加密系统）可以抵抗这种攻击（众所周知的“中间人”攻击）。

众所周知，没有任何真正的方法可以加密/保护 javascript 文件。你能做的最好的就是混淆它。

如果你真的需要保护某种客户端软件，你必须使用*编译软件*（C/C++）、*加密*和某种*硬件密钥*。任何其他系统都可以很容易地被“破解”（整个计算机游戏的历史都可以证明）。

# jquery - 将变量输入到 $.post

> ID：13544041
> 
> 赞同：0
> 
> 时间：2012-11-24T18:08:24.040
> 
> 标签：jquery, variables, post, var

我尝试使用此 jQuery 代码通过 $_POST["fname"] = Jones 调用 Changes.php：

```
<script>
    $(document).ready(function(e) {
                var $x = 'Jones';
        $.post("Changes.php", { fname: $X } );
    });
</script> 
```

但它不起作用！

我做错了什么？如果我将 $X 放入 '' - fname 将变为 $X，而不是 Jones。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:10:23.643

JS中的变量名区分大小写，使用小写`x`：

```
$.post("Changes.php", { fname: $x} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:18:30.153

你的代码应该是这样的

```
<script>
    $(document).ready(function(e) {
        var x = 'Jones';
        $.post("Changes.php", { fname:x } );
    });
</script> 
```

您的脚本的问题是您使用小“x”创建 var x 并且在分配您使用大写 X 时，在 javascript 中也不允许在文件开头使用 $

# vim - 如何使用 molokai 为 vim 中的括号和括号添加颜色

> ID：13544042
> 
> 赞同：2
> 
> 时间：2012-11-24T18:08:38.993
> 
> 标签：vim

我在 vim 中使用[molokai](http://www.vim.org/scripts/script.php?script_id=2340)来编写 python/html/css/javascript 中的代码。当我编辑 python 文件（或 javascript）时，括号没有颜色。对于括号为灰色的简单脚本（如 molokai.vim 本身），情况并非如此。

我编辑`molokai.vim`并添加

```
hi parens guifg=#999999 
```

然后我编辑`.vimrc`并添加：

```
syn match parens /[(){}]/ 
```

但括号和括号仍然是白色的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:44:11.657

1.  永远不要使用`:syn`突出显示所有文件类型，有`matchadd()`这个。使用`:syn`可以很容易地打破突出显示，`matchadd()`是一个覆盖。
2.  `Syntax`事件触发时语法突出显示被覆盖。而且，它只对当前缓冲区有影响。所以只是`syn`在 vimrc 中永远不会工作，你必须使用自动命令

    ```
    autocmd! Syntax python :syntax match Parens /[(){}]/ 
    ```

    （对于 python，它是安全的，因为括号和数字括号不与任何其他语法元素匹配）。

3.  在 javascript 括号中 ( `()`) 已经被`javaScriptParens`高亮组匹配。因此你必须使用

    ```
    hi def link javaScriptParens Parens 
    ```

    （在配色方案中）。大括号匹配`javaScriptBraces`并需要类似的命令。

4.  要确定用于特定符号的突出显示，我将光标放在该符号上并启动

    ```
    echo 'Normal '.join(map(synstack(line('.'), col('.')), 'synIDattr(v:val, "name")')) 
    ```

    ，最后显示的单词通常是您需要的。如果仅`Normal`显示，则符号未突出显示，您必须转到 2.，否则您必须转到 3。

5.  对于忽略当前使用的突出显示的通用解决方案，您可以使用`matchadd()`我已经说过的。但它是窗口本地的，所以如果你正在使用多个窗口/选项卡，你就不能没有 autocmd：

    ```
    autocmd! WinEnter * :if !exists('w:parens_match_id') | let w:parens_match_id=matchadd('Parens', '[(){}]') | endif 
    ```

所有自动命令都将被包围

```
augroup HighlightParens
    autocmd! …
augroup END 
```

# java - 将 Long[] 转换为 long[]

> ID：13544044
> 
> 赞同：3
> 
> 时间：2012-11-24T18:08:52.340
> 
> 标签：java, android

> **可能重复：**
> [将对象数组转换为原始类型数组](https://stackoverflow.com/questions/564392/converting-an-array-of-objects-to-an-array-of-their-primitive-types)

我`Parcel`为Android制作了一个，我试图通过将它转换为来打包一个`ArrayList<Long>`（toArray给我`Long[]`）`long[]`，有没有一种简单的方法可以做到这一点？

我意识到我可以循环，但我想我正在寻找一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T18:11:00.100

您可以使用 Apache commons [ArrayUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)：

```
long[] longArray = ArrayUtils.toPrimitive(longObjectArray); 
```

或在 Google 的[Guava](http://code.google.com/p/guava-libraries/)中：

```
long[] longArray = Longs.toArray(Arrays.asList(longObjectArray)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T18:11:21.340

不幸的是，没有比循环更简单的方法了。[这篇文章](https://stackoverflow.com/questions/754294/convert-an-array-of-primitive-longs-into-a-list-of-longs)是关于做相反的事情，但想法是一样的......

由于另一个答案推荐 Apache Commons 并且您使用的是 Android - 如果我要包含一个额外的依赖项，我宁愿选择[guava Longs 实用程序类](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/Longs.html#toArray%28java.util.Collection%29)：

```
long[] primitive = Longs.toArray(listOfLongObjects); 
```

供参考，代码为：

```
 public static long[] toArray(Collection<? extends Number> collection) {
    if (collection instanceof LongArrayAsList) {
      return ((LongArrayAsList) collection).toLongArray();
    }

    Object[] boxedArray = collection.toArray();
    int len = boxedArray.length;
    long[] array = new long[len];
    for (int i = 0; i < len; i++) {
      // checkNotNull for GWT (do not optimize)
      array[i] = ((Number) checkNotNull(boxedArray[i])).longValue();
    }
    return array;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T18:16:16.433

`Long`并且`long`是不同的类型。`Long`是一类。`long`是原始的。`Long`java 5 引入的自动装箱可能会让一些人感到困惑，因为和之间的双向转换`long`是由编译器自动完成的。但是，这对于数组是不正确的。这意味着您必须创建新的类型数组`long`并逐个元素地复制：

```
List<Long> list = new ArrayList<>();
// this way you create array of Long
Long[] arr1 = list.toArray(new Long[list.size()]);

// this way you create array of long
long[] arr2 = new long[list.size()];
int i = 0;
for (Long e : list) {
    arr2[i++] = e; // autoboxing does the job here
} 
```

显然，您可以使用`System.arrcopy()`而不是自己编写循环。但是 id 没有任何区别。

# ios - 如何从 doc/docx 文件的第一页创建 UIImage？

> ID：13544047
> 
> 赞同：0
> 
> 时间：2012-11-24T18:09:17.637
> 
> 标签：ios, uiimage, docx, doc

在我的应用程序中，我使用 QLPreviewController 来查看/阅读一些文档，在 UICollectionView 中点击它之后。collectionView 中的单元格有一个 UIImageView，我想在其中显示文档的第一页，如图像。

我怎样才能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:13:01.303

尝试规范的方式：

```
UIGraphicsBeginImageContext(rect);
[qlController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您可以定义`rect`以选择要转换为图像的视图区域。

# python - 压缩的加密文件比源文件大

> ID：13544061
> 
> 赞同：1
> 
> 时间：2012-11-24T18:10:33.113
> 
> 标签：python, python-2.7, pycrypto

我从 python 中的文本文件创建了一个加密文件。粗壮的使用 pycrypto。

所以我的源文本文件是 33742 字节，加密版本是 33752。到目前为止还可以，但是......

当我用 tar -czvf 压缩 test.enc （加密的测试文件）时，最终文件是 33989 字节。为什么源文件加密后压缩不起作用？

到目前为止，唯一的选择似乎是先压缩它然后加密它，因为文件保持那么小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:12:11.417

压缩通过识别数据中的模式来工作。由于您无法识别加密数据中的模式（这就是重点），因此您无法对其进行压缩。

对于产生 33,742 字节输出的完美加密算法，理想情况下，您能够确定的关于解密的原始数据的全部内容是它可以容纳 33,742 字节，但仅此而已。如果您可以将其压缩到 31,400 字节，那么您会立即知道输入数据不是 32,000 字节的随机数据，因为随机数据是无模式的，因此不可压缩。这将表明加密方案的一部分失败。解密的数据是否随机无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:13:25.877

tar -z 使用的压缩方法依赖于输入文件中的重复模式，将这些模式替换为模式重复次数的计数（非常简化）。

但是，当您加密文件时，您基本上是在尝试将任何重复模式隐藏在尽可能多的“随机”噪声中。这使您的文件几乎不可压缩。将其与存档和压缩文件格式（元数据等）的开销相结合，您的文件实际上最终会稍微大一些。

你应该扭转这个过程；首先压缩，*然后*加密，您将大大增加最终获得较小有效负载的机会。

# windows-8 - SgmlReader 和 System.Xml Windows 8

> ID：13544062
> 
> 赞同：0
> 
> 时间：2012-11-24T18:10:33.320
> 
> 标签：windows-8, sgmlreader

我正在尝试使用 SgmlReader 将 HTML 流转换为 XML 以进行进一步解析。此转换是我正在为 Windows 8 应用商店开发的 APP 的一部分。以下是将 Html 转换为 XML 的方法：-

```
public static void ConvertToXml(string webResponse)
    {
        StringWriter sWriter = new StringWriter();
        XmlWriter xmlWriter = XmlWriter.Create(sWriter);
        SgmlReader sgmlReader = new SgmlReader();
        sgmlReader.DocType = "HTML";
        sgmlReader.WhitespaceHandling = WhitespaceHandling.All;
        sgmlReader.CaseFolding = CaseFolding.ToLower;
        sgmlReader.InputStream = new StringReader(webResponse);
        sgmlReader.IgnoreDtd = true;
        while (!sgmlReader.EOF)
        {
            xmlWriter.WriteNode(sgmlReader, true);
        }
        xmlWriter.Flush();
        XmlString = sWriter.ToString();
    } 
```

sgmlReader.WhitespaceHandling = WhitespaceHandling.All; 是 Xml.WhitespaceHandling 不存在的问题。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:28:00.420

经过大量阅读和测试/调试后，我发现至少在我的情况下不需要 sgmlReader.WhitespaceHandling = WhitespaceHandling.All，因为默认情况下 sgmlReader.WhitespaceHandling 设置为 All 。但是我删除了 sgmlReader.IgnoreDtd = true; 现在我的 Xml 文件看起来很正常；）

希望这会对某人有所帮助

# c++ - 如何实现运算符重载？

> ID：13544065
> 
> 赞同：1
> 
> 时间：2012-11-24T18:10:40.013
> 
> 标签：c++, oop, overloading, operator-keyword

我的程序有问题。我想创建一个二维容器，我不知道如何实现运算符重载。这是我的代码：

```
 template<class T, int N, int M>//az osztály sablonjai
    class my_matrix:public matrix_base<T,N,M>{
    public:
    my_matrix();

    ~my_matrix();

    T& operator=(my_matrix &rhs);

    T& operator()(int rhs,int lhs);

    T& operator+(my_matrix<T,N,M> &rhs);

    T& operator-(my_matrix<T,N,M> rhs);

    T& operator*(my_matrix<T,N,M> rhs);

    T& operator/(my_matrix<T,N,M> rhs);

    private:
    T arr[N][M];//alap kétdimenziós tömb
    };

    my_matrix<T,N,M>::my_matrix<T,N,M>(){
    T arr[N][M];
    };

    my_matrix<T,N,M>::~my_matrix<T,N,M>(){
    delete[] arr;
    };

    T& operator=(my_matrix rhs){
    return this;
    };

    T& operator()(int rhs,int lhs){
    return arr[rhs][lhs];
    };

    T& my_matrix::operator+(my_matrix<T,N,M> rhs){
    return this+lhs;
    };

    T& my_matrix::operator-(my_matrix<T,N,M> rhs){
    return this-lhs;
    };

    T& my_matrix::operator*(my_matrix<T,N,M> rhs){
    return this*lhs;
    };

    T& my_matrix::operator/(my_matrix<T,N,M> &rhs){
    return this/lhs;
    }; 
```

我想得到这个：my_matrix m; 我的矩阵 m2; ... m=m+m2;

matrix_base 是一个未知的抽象类（这是一个任务）。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:20:50.573

我强烈建议您在发布之前搜索 C++ FAQ 和 StackOverflow。

例如，C++ FAQ 中有很大一部分是关于 Matrix 类和运算符重载的。查看此链接： [C++ 常见问题解答 - 矩阵重载运算符](http://www.parashift.com/c++-faq/matrix-subscript-op.html)

## 编辑 1：添加了有效的 C++

另一个建议是获取 Scott Meyer 的 Effective C++ 书籍：
[Scott Meyer 在 Amazon.com 上的书籍](http://www.amazon.com/Scott-Meyers/e/B004BBEYYW)
不要忘记 Herb Sutter 的 Exceptional C++：
[Herb Sutter 在 Amazon.com 上的书籍](http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias=stripbooks&field-keywords=Herb%20Sutter%20C%2b%2b)

Scott Meyer 的书中有关于重载运算符的部分，尤其是`+, -, +=`和`-=`.

# window - 禁用 GLFW 窗口上的关闭按钮

> ID：13544068
> 
> 赞同：2
> 
> 时间：2012-11-24T18:10:59.103
> 
> 标签：window, glfw

对于使用 GLFW 进行窗口化的游戏，我想禁止用户使用关闭按钮关闭游戏窗口。有没有跨平台的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:20:20.757

用于`glfwSetWindowCloseCallback`设置始终返回的回调`GL_FALSE`。

# javascript - 仅允许 HTML5 目录中的文件上传表单元素中的图像

> ID：13544070
> 
> 赞同：0
> 
> 时间：2012-11-24T18:11:00.540
> 
> 标签：javascript, jquery, image, html, file-upload

**HTML 代码**

```
<input  type="file" accept="image/*" multiple webkitdirectory mozdirectory msdirectory odirectory directory id="fileURL"/> 
```

**Javascript代码：**

```
var files, 
file, 
extension,
sum,
input = document.getElementById("fileURL"),
output = document.getElementById("fileOutput"),
holder = document.getElementById("fileHolder")
sizeShow = document.getElementById("filesSize");

input.addEventListener("change", function (e) {

    files = e.target.files;
    output.innerHTML = "";
    sum = 0;
    for (var i = 0, len = files.length; i < len; i++) {
        file = files[i];
        extension = file.name.split(".").pop();
        if(extension=="jpg"||extension=="png"){
            var size = Math.floor(file.size/1024 * 100)/100;
            sum = size+sum;
            output.innerHTML += "<li class='type-" + extension + "'>"+file.webkitRelativePath + file.name + " (" +  size + "KB)</li>";
        }else{
           file.remove();
        }
    }
    if(sum<1024*1024){
        sizeShow.innerHTML = Math.floor(sum/1024*100)/100 + " MB";
    }else if(sum>1024*1024){
        sizeShow.innerHTML = Math.floor(sum/1024*1024*100)/100 + " GB";
    }
}, false); 
```

我如何只获取文件上传中的图像？`accept="image/*"`不适用于目录。

这确实有效，但该语句`file.remove()`根本不起作用。我猜 input:file 是只读的。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:47:07.033

您可以设置`input.files`为 a `FileList`（例如通过拖放获得），但您不能创建/修改`FileList`. 因此，您不能将输入文件修改为仅包含图像。

但是，您可以做的是手动上传（通过 ajax），并且只发送类型以`"image/"`. 请参阅[http://jsfiddle.net/WM6Sh/1/](http://jsfiddle.net/WM6Sh/1/)。

```
$("form").on("submit", function(e) {
    e.preventDefault();

    var files = $(this).find("input").prop("files");
    var images = $.grep(files, function(file) {
        return file.type.indexOf("image/") === 0;  // filter out images
    });

    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/", true);

    $(xhr).on("readystatechange", function(e) {
        if(xhr.readyState === 4) {
            console.log("Done");
        }
    });

    var data = new FormData();
    $.each(images, function(i) {
        data.append(i, this);  // append each image file to the data to be sent
    });

    console.log(
        "Sending %d images instead of all %d files...",
        images.length,
        files.length
    );
    xhr.send(data);
}); 
```

# shell - 如何在 Emacs 中打开远程 shell

> ID：13544074
> 
> 赞同：0
> 
> 时间：2012-11-24T18:11:17.800
> 
> 标签：shell, emacs

我想知道是否可以打开 ssh 可访问的机器外壳。如果我执行 Mx 远程 shell，我会被带到当前机器上的 shell。就我而言，我在 windows XP 上运行 emacs，因此它需要我进入 windows shell

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:22:24.220

让我知道[ssh.el](http://www.splode.com/~friedman/software/emacs-lisp/src/ssh.el)是否适合您？

# python - Python：如何创建函数？例如 f(x) = ax^2

> ID：13544078
> 
> 赞同：8
> 
> 时间：2012-11-24T18:12:08.467
> 
> 标签：python, function, lambda

我想对某个函数进行某种引用，但我不知道是否需要使用某种类型的 a`def f(x)`或 a 。`lambda`

例如，我想让`print f(3)`它输出`9a`，或者这不是 python 的工作方式？

**第二个问题**：假设我有一个工作功能，我该如何返回`degree`它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:21:13.347

要创建一个函数，您需要定义它。函数可以做任何事情，但它们的主要使用模式是获取参数和返回值。您必须决定它如何将参数转换为返回值。

例如，如果你想`f(x)`返回一个数字，那么`a`也应该是一个全局或函数内部定义的数字变量：

```
In [1]: def f(x):
   ...:     a = 2.5
   ...:     return a * x**2
   ...: 

In [2]: f(3)
Out[2]: 22.5 
```

或者，也许您希望它返回如下字符串：

```
In [3]: def f(x):
   ...:     return str(x**2) + 'a'
   ...: 

In [4]: f(3)
Out[4]: '9a' 
```

如果您需要更多帮助，则必须说明您的需求。

* * *

**编辑：**事实证明，您想使用多项式或代数函数作为对象，并用它们做一些代数的东西。Python 将允许这样做，但不允许使用标准数据类型。您可以为多项式**定义一个类**，然后定义任何方法或函数以获得最高幂或其他任何内容。但`Polynomial`不是内置数据类型。不过，可能有一些很好的库定义了这样的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:31:55.413

Python（和大多数其他计算机语言）不做代数，如果你想要这样的*符号*输出，这就是你所需要的。但是你可以有一个函数`f(a,x)`返回特定（数字）值的结果`a`：

```
def f(a, x):
   return a*x*x 
```

但是如果你想要一个真正为你做代数的程序或语言，请查看像 Mathematica 这样的[sympy](http://sympy.org/en/index.html)或商业程序。

如果您只是使用多项式，并且只需要一个可以很好地处理它们的数据结构，请查看[numpy 及其多项式类](http://docs.scipy.org/doc/numpy/reference/routines.poly.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-04T09:49:32.310

我通常将 lambda 用于简短的函数：

```
f = lambda a, x: a * x**2 
```

这里 a 和 x 是我的函数的参数。您需要输入 a 和 x

```
f(2,4) 
```

如果您想要 a 作为常量参数，例如。a=2：

```
f = lambda x: 2 * x**2
f(5) 
```

如果您有 x 的输入值列表，则可以将 map 与 lambda 结合使用。它直截了当且易于阅读。

```
(*map(lambda x: 3 * x**2, [1,2,3,4]),) 
```

或者

```
list(map(lambda x: 3 * x**2, [1,2,3,4]) 
```

干杯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T01:25:41.213

```
def func():
    print "F(x) = 2x + 3"
    x = int(raw_input('Enter an integer value for x: '))
    Fx = 2 * x + 3
    return Fx

print func() 
```

玩得开心 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-19T18:59:18.793

起司，

你可以使用`def`Python 中的函数来创建一个数学函数，你可以输入：

```
def f(x):
    return(2x + (3 + 3) * 11 + 88) # <- you could make your own function.

print(f(3)) 
```

日志：

```
220 
```

像**那样**

或者在这个：

```
def f(a, x):
    return((a + x) ** (a * x)) 
```

然后...

```
print(f(1, 2)) 
```

日志...

```
6 
```

# tomcat - 如何将没有端口号的 URL 重定向到 tomcat 网络服务器

> ID：13544081
> 
> 赞同：5
> 
> 时间：2012-11-24T18:12:11.960
> 
> 标签：tomcat

我正在使用 tomcat 版本 7，并在`webapp`. 现在，我通过输入 URL 来访问我的资源文件`http://dcdvdvdsv.com:8080/resourcefilename`。

我已经在我的主机文件中映射了我的 IP。

我想去掉 URL 中的端口号。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T18:23:52.377

每当您输入没有端口的 URL 时，它默认为端口 80，即标准 http 端口。

[将 Tomcat 的侦听端口](http://www.mkyong.com/tomcat/how-to-change-tomcat-default-port/)从更改`8080`为`80`，您就完成了。

# c++ - 带字符串的 Scanf 函数

> ID：13544082
> 
> 赞同：2
> 
> 时间：2012-11-24T18:12:18.610
> 
> 标签：c++, scanf

我需要读取用户的输入。输入值可以是字符串类型或`int`类型。如果值是`int`那么程序将值插入到我的对象中。否则，如果值是字符串，那么它应该检查该字符串的值，如果它是“结束”，那么程序结束。

```
Halda h; //my object
string t;
int tint;
bool end=false;

while(end!=true)
{
    if(scanf("%d",&tint)==1)
    {
        h.insert(tint);
    }
    else if(scanf("%s",t)==1)
    {
      if(t=="end")
          end=true;
      else if(t=="next")
          if(h.empty()==false) 
              printf("%d\n",h.pop());
          else 
              printf("-1\n");
    }
} 
```

问题是扫描字符串似乎无法正常工作。我试图将其更改为：`if(cin>>t)`并且效果很好。我需要让它与`scanf`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:20:55.000

格式`%s`中的说明符需要 a ，而不是 a 。`scanf()``char*``std::string`

来自 C11 标准（C++ 标准参考它关于 C 标准库）：

> 除了 % 说明符的情况外，输入项（或者，在 %n 指令的情况下，输入字符的计数）被转换为适合转换说明符的类型。如果输入项不是匹配序列，则指令执行失败：此条件为匹配失败。除非用 * 指示分配抑制，否则转换结果将放置在尚未收到转换结果的**格式**参数之后的第一个参数所指向的对象中。**如果此对象没有适当的类型，或者转换的结果无法在对象中表示，则行为是 undefined**。

无论如何，这里没有真正的理由更喜欢 C 方式，使用 C++ 工具。并且当您使用 C 库时，请使用仅读取到给定限制的字符（就像[`fgets`](http://en.cppreference.com/w/c/io/fgets)，或`scanf`使用宽度说明符）的安全函数，否则您可能会溢出，这会再次导致未定义的行为，如果您'重新运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:20:53.587

这是检查输入结束的一种非常糟糕的方法。使用整数或使用字符串。

如果您选择字符串，请准备好从**转换**`string`为`int`.

我的逻辑是首先检查它是否可以转换为整数。如果可以，那么继续逻辑。如果不能（例如它是 a `float`or`double`或 some other `string`），则忽略并继续。如果可以，则将其插入到`Halda`'s 对象中。

旁注：不要在使用 C++ 时使用`scanf()`and 。`printf()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:21:26.840

假设`string`指的是`std::sring`这个程序没有定义的行为。你不能真正使用`std::string`with`sscanf()`你可以在里面设置一个缓冲区`std::string`并读入它，但字符串不会改变它的大小。你可能最好使用流`std::string`（嗯，在我看来你总是最好使用流）。

# c# - 为什么从 IList 中按索引删除比从 ISet 中按项目删除要差得多？

> ID：13544089
> 
> 赞同：0
> 
> 时间：2012-11-24T18:13:02.553
> 
> 标签：c#, performance, list, collections, hashset

***编辑：****我将添加一些基准测试结果。列表中大约有 1000 - 5000 个项目，`IList`并且`RemoveAt`节拍`ISet`和`Remove`，但这并不值得担心，因为差异很小。当收藏规模扩大到 10000 或更多时，真正的乐趣就开始了。我只发布那些数据*

昨晚我在这里回答[了一个问题](https://stackoverflow.com/questions/48087/select-a-random-n-elements-from-listt-in-c-sharp)，遇到了一个奇怪的情况。

首先是一组简单的方法：

```
static Random rnd = new Random();
public static int GetRandomIndex<T>(this ICollection<T> source)
{
    return rnd.Next(source.Count);
}

public static T GetRandom<T>(this IList<T> source)
{
    return source[source.GetRandomIndex()];
} 
```

**-------------------------------------------------- -------------------------------------------------- --------------------------------**

假设我从集合中随机删除 N 个项目。我会写这个函数：

```
public static void RemoveRandomly1<T>(this ISet<T> source, int countToRemove)
{
    int countToRemain = source.Count - countToRemove; 
    var inList = source.ToList();

    int i = 0;
    while (source.Count > countToRemain)
    {
        source.Remove(inList.GetRandom()); 
        i++;
    }
} 
```

或者

```
public static void RemoveRandomly2<T>(this IList<T> source, int countToRemove)
{
    int countToRemain = source.Count - countToRemove;

    int j = 0;
    while (source.Count > countToRemain)
    {
        source.RemoveAt(source.GetRandomIndex()); 
        j++; 
    }
} 
```

如您所见，第一个函数是为 an 编写的`ISet`，第二个函数是为 normal编写的`IList`。在第一个函数中，我从中**按项目**`ISet`和按索引删除`IList`，我相信这两者都是`O(1)`. 为什么第二个函数的性能比第一个差很多，尤其是当列表变大的时候？

**赔率（我的看法）：**

1) 在第一个函数中，`ISet`将转换为一个`IList`（从 中获取随机项`IList`），因为在第二个函数中没有执行这样的事情。

> 优势 IList。

2）在第一个函数中调用`GetRandomItem`了，而在第二个函数中，调用`GetRandomIndex`了，这又少了一步。

> 虽然微不足道，但优势 IList。

3）在第一个函数中，随机项是从一个单独的列表中获得的，因此获得的项可能已经从`ISet`. 这导致在`while`第一个函数的循环中进行更多的迭代。在第二个函数中，随机索引是从正在迭代的源中获取的，因此永远不会重复迭代。**我已经对此进行了测试并验证了这一点。**

> i > j 总是，优势`IList`。

我认为这种行为的原因是`List`在添加或删除项目时需要不断调整大小。但显然在其他一些测试中没有。我跑了：

```
public static void Remove1(this ISet<int> set)
{
    int count = set.Count;
    for (int i = 0; i < count; i++)
    {
        set.Remove(i + 1);
    }
}

public static void Remove2(this IList<int> lst)
{
    for (int i = lst.Count - 1; i >= 0; i--)
    {
        lst.RemoveAt(i);
    }
} 
```

发现第二个函数运行得更快。

**试验台：**

```
var f = Enumerable.Range(1, 100000);

var s = new HashSet<int>(f);
var l = new List<int>(f);

Benchmark(() =>
{
    //some examples...

    s.RemoveRandomly1(2500);
    l.RemoveRandomly2(2500);

    s.Remove1();
    l.Remove2();

}, 1);

public static void Benchmark(Action method, int iterations = 10000)
{
    Stopwatch sw = new Stopwatch();
    sw.Start();
    for (int i = 0; i < iterations; i++)
        method();

    sw.Stop();
    MsgBox.ShowDialog(sw.Elapsed.TotalMilliseconds.ToString());
} 
```

只是想知道这两种结构是什么..谢谢..

**结果：**

```
var f = Enumerable.Range(1, 10000);

s.RemoveRandomly1(7500); => 5ms
l.RemoveRandomly2(7500); => 20ms

var f = Enumerable.Range(1, 100000);

s.RemoveRandomly1(7500); => 7ms
l.RemoveRandomly2(7500); => 275ms

var f = Enumerable.Range(1, 1000000);

s.RemoveRandomly1(75000); => 50ms
l.RemoveRandomly2(75000); => 925000ms 
```

**对于大多数典型的需求，一个列表会做..！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:21:32.160

首先，IList 和 ISet 不是任何东西的实现。我可以编写一个运行方式非常不同的 IList 或 ISet 实现，因此具体实现是重要的（在您的情况下为 List 和 HashSet）。

[按索引访问列表项是 O(1)](https://stackoverflow.com/questions/3666731/in-an-object-of-type-listt-does-accessing-an-object-by-index-run-through-each)但不**删除[`RemoveAt`是 O(n)](http://msdn.microsoft.com/en-us/library/5cw9x18z.aspx)**。

从末尾删除列表会很快，因为它不需要复制任何东西，它只是递减它的内部计数器，该计数器存储它有多少项目，直到底层数组中的空点数量低于阈值，此时它会将数组复制到较小的数组。一旦达到底层数组的最大容量，它就会创建一个两倍大小的新数组并复制元素。如果您低于某个阈值，它将创建一个大小为一半的数组并复制元素。它使用长度属性跟踪它有多大，因此未使用的插槽看起来就像它们不存在一样。

从列表中随机删除意味着它必须复制索引之后的所有数组条目，以便它们向下滑动一个位置，这本质上非常慢，特别是当列表的大小变大时。如果您有一个包含 100 万个条目的列表，并且您删除了索引 500,000 处的某些内容，则它必须将数组的后半部分复制到一个位置。

# drupal-7 - Drupal 7 - Views.css 和 CTools.css 未加载

> ID：13544090
> 
> 赞同：0
> 
> 时间：2012-11-24T18:13:12.037
> 
> 标签：drupal-7, drupal-views

使用 Views 管理面板时，它看起来完全不正确。查看正在访问的文件，原来需要的 css 文件没有加载。我的 Drupal 安装在*/drupal/*子文件夹中，当模块尝试访问时`domain.com/sites/all/modules/views/css/views.css`收到 404。我尝试手动浏览`domain.com/drupal/sites/all/modules/views/css/views.css`它并且它可以工作，因此该文件在那里并且可以从网络访问。

奇怪的是，对于其他文件夹没有问题，例如都`domain.com/modules/user/user.css`和`domain.com/drupal/modules/user/user.css`工作。这似乎是*网站的问题/*只有......

我没有启用 CSS 优化，*sites/*中的所有文件夹都有 755 权限。我缺少一些配置设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:27:09.420

显然，我关心的域是另一个域的停放域（或任何名称），并包含在 public_html 的子文件夹中。因此，Drupal 安装是该子文件夹的子文件夹（例如，/home/user/public_html/my_domain/drupal），并且对我的域的所有请求都通过一个`.htaccess`和 MOD_REWRITE 重定向到 Drupal 子文件夹。由于某种原因，它的正则表达式中没有*站点/ （**模块/*和*主题/*是...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:55:59.793

您可能有不正确的虚拟主机配置。为了检查这是否是原因，请尝试在没有虚拟主机 ie 的情况下访问该站点`localhost/drupal`，看看这是否有效。如果加载正确，那么您需要设置正确的文档根目录：

```
<VirtualHost *:80>
 DocumentRoot /www/drupal
 ServerName domain.com
</VirtualHost> 
```

然后重启apache。有关如何设置 vhost 的更多信息，请访问[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

# entity-framework - 如何在 Where 子句中使用“或”？

> ID：13544096
> 
> 赞同：0
> 
> 时间：2012-11-24T18:13:46.300
> 
> 标签：entity-framework

我需要这样的东西：`Select name from users where id = 1 or id = 2`。我知道我可以这样做：

```
_db.Users
.Where(u => u.Id == 1 || u.Id == 2); 
```

但是有什么替代方法吗？有没有这样的东西：

```
_db.User
.Where(u => u.Id == 1)
.Or
.Where(u => u.Id == 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:20:51.947

不是直接的。请记住，`_db.Users.Where(u => u.Id == 1)`是 id 为 1 的用户。您无法从中获取 id 为 2 的用户，因为它不存在。

您可以使用其他方法，例如

```
var user1 = _db.Users.Where(u => u.Id == 1);
var user2 = _db.Users.Where(u => u.Id == 2);
var users = user1.Union(user2); 
```

或者

```
var userids = new int[] { 1, 2 };
var users = _db.Users.Where(u => userids.Contains(u.Id)); 
```

尽管。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:23:11.570

我通常使用下一个表单来构建带有 OR 和 AND 的动态 linq。

```
public class Linq
{
 public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expression1,
                                                        Expression<Func<T, bool>> expression2)
{
        if (expression1 == null) throw new ArgumentNullException("expression1", "Consider setting expression1 to Linq.True<T>() or Linq.False<T>()");
        var invokedExpr = Expression.Invoke(expression2, expression1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, bool>>
              (Expression.OrElse(expression1.Body, invokedExpr), expression1.Parameters);
}

public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> expression1,
                                                         Expression<Func<T, bool>> expression2)
    {
        if (expression1 == null) throw new ArgumentNullException("expression1", "Consider setting expression1 to Linq.True<T>() or Linq.False<T>()");
        var invokedExpr = Expression.Invoke(expression2, expression1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, bool>>
              (Expression.AndAlso(expression1.Body, invokedExpr), expression1.Parameters);
    }

public static Expression<Func<T, bool>> True<T>() { return f => true; }
public static Expression<Func<T, bool>> False<T>() { return f => false; }
} 
```

然后在您的代码中使用它：

```
Expression<Func<User, bool>> searchExpression = Linq.False<User>();

searchExpression = Linq.Or<User>(searchExpression, b => b.Id==1);
searchExpression = Linq.Or<User>(searchExpression, b => b.Id==2); 
```

然后你使用这个 searchExpression 作为

```
_db.Users.Where(searchExpression); 
```

使用这种形式很容易构建动态查询，例如：

```
Expression<Func<User, bool>> searchExpression = Linq.False<User>();
searchExpression = Linq.Or<User>(searchExpression, b => b.Id==1);
if (!String.IsNullOrEmpty(name))
    searchExpression = Linq.Or<User>(searchExpression, b => b.Name.StartsWith(name));
//combine with OR / AND as much as you need 
```

它只会生成一个对数据库的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:53:18.563

你只想：

```
_db.Users.Where(u => (u.Id == 1 || u.Id == 2)); 
```

# javascript - 禁用滚动条上的 mousedown 绑定事件

> ID：13544097
> 
> 赞同：1
> 
> 时间：2012-11-24T18:13:47.577
> 
> 标签：javascript, jquery

在[http://www.associationtsunami.org/](http://www.associationtsunami.org/)网站上，如果我在文档上按下鼠标，立方体会根据用户移动鼠标的方向旋转。

代码是：

```
key code ...
).bind('mousedown touchstart', function (evt) {
        delete mouse.last;
        if ($(evt.target).is('a, iframe')) {
          return true;
        }
        evt.originalEvent.touches ? evt = evt.originalEvent.touches[0] : null;
        mouse.start.x = evt.pageX;
        mouse.start.y = evt.pageY;
        $(document).bind('mousemove touchmove', function (event) {
          dragging = 1;
          // Only perform rotation if one touch or mouse (e.g. still scale with pinch and zoom)
          if (!touch || !(event.originalEvent && event.originalEvent.touches.length > 1)) {
            event.preventDefault();
            // Get touch co-ords
            event.originalEvent.touches ? event = event.originalEvent.touches[0] : null;
            $('.viewport').trigger('move-viewport', { x: event.pageX, y: event.pageY });
          }
        });
        $(document).bind('mouseup touchend', function () {
          dragging = 0;
          $(document).unbind('mousemove touchmove');
        });
      }); 
```

完整代码[https://github.com/AssociationTsunami/tsunami/blob/gh-pages/js/cube.js#L72](https://github.com/AssociationTsunami/tsunami/blob/gh-pages/js/cube.js#L72)

如果用户在滚动条上按下鼠标，我想禁用此事件 - 例如，在“ONSONPARLA”页面上有一个带有 ACCORDIONS 的选项卡，如果您打开任何手风琴内容，您会在边缘或内部获得滚动条手风琴，如果您尝试移动滚动条，这也会移动立方体。

在 cube.js 中覆盖它的正确方法是什么，以便在事件位于滚动条元素上时立方体不会转动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:35:57.700

不能以这种方式进行。

但是有一个替代解决方案。使用一些自定义滚动条插件来替换经典滚动条。您将能够阻止他发生的事件。我知道这不是一个很好的解决方案，但根据您的网页，您喜欢尝试一下。:)

[在这里](http://www.codeinsects.com/7-beautiful-custom-scrollbar-jquery-plugins.html)你可以找到一些不错的插件。

好的插件示例在[这里](http://www.minimal.com.hr/#/resume)。

# python - 如何根据 GET 参数在 Web 应用程序中显示不同的表单？

> ID：13544099
> 
> 赞同：1
> 
> 时间：2012-11-24T18:14:00.897
> 
> 标签：python, google-app-engine, web

在网页的链接中，我想将 GET 参数传递给 Python 中的 GAE Web 应用程序。因此，如果有人通过此链接访问 Web 应用程序，则会显示一个带有一些输入字段的表单。如果有人访问网络应用程序，即通过键入网络应用程序 url，将显示另一个具有更多输入字段的表单。有人知道最好的方法吗？我尝试了以下但没有奏效：

```
 def get(self): 
    q=self.request.get("q") 
    if q is None: 
     #show form with all fields 
    else: 
     #show form without all fields 
  def post(self): 
     #here I care about the added fields only if nothing was passed as a GET parameter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:19:48.637

默认情况下，如果请求的参数不在请求中，则 get() 返回空字符串 ('')（[请参阅文档](http://webapp-improved.appspot.com/guide/request.html)）。

因此，要检查是否缺少参数，请使用

```
if q == '': 
```

或者

```
if len(q) == 0: 
```

# c++ - 使用 noweb 和 LaTeX 记录 C 或 C++ 代码

> ID：13544101
> 
> 赞同：6
> 
> 时间：2012-11-24T18:14:15.270
> 
> 标签：c++, latex, noweb

我正在使用 noweb 来记录我的 C++ 和 C 代码。在 pdf 文件中（在编织和使用 pdflatex 后生成）中的一些代码略有不同：

*   `>>`并`<<`变成适当的打开和关闭guillemets；
*   `--`变成一个 n 破折号。

我的编织命令是：

```
noweave -latex -delay -x foo.nw > foo.tex 
```

编辑：所以我可能需要使用漂亮的打印机。那些可用的东西太多了。我会调查它，如果我找到一个直接的解决方案，我会分享它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:48:11.077

作为 sed 脚本实现的过滤器`noweave`，编织命令是：

```
noweave -x -delay -latex -filter c2nwtex foo.nw > foo.tex 
```

而 c2nwtex 是这样的：

```
#!/bin/sed -f
/^@begin code/ , /^@end code/ {
/^@text/ {
s/--/-\
@literal {}\
@text -/g
s/>>/>\
@literal {}\
@text >/g
s/<</<\
@literal {}\
@text </g
}
} 
```

请注意，这适用于 C、递减和移位运算符。C++11 现在允许带有右尖括号的模板声明，它们之间没有空格。您需要`>>`两次运行替换命令来分解`>`超过两个的序列。

# scala - 从 RAM 磁盘运行所有内容会加快 scala 编译时间吗？

> ID：13544113
> 
> 赞同：11
> 
> 时间：2012-11-24T18:16:29.460
> 
> 标签：scala, jvm, sbt, jrebel

设想：

我用于开发的机器有 32Gb 的 DDR3 RAM、i7 3770、SSD。该项目很大，Scala 在增量编译期间大部分时间编译速度很快，但有时单个更改会导致重新编译数百个文件，然后需要一些时间来编译所有文件，并且 jrebel 需要一些好时间重新加载所有更改的文件。

问题：

将所有内容放在 RAMFS (Mac) 上会使编译和 jrebel 重新加载显着更快吗？

我的计划是将与项目直接相关的所有内容放在 RAMFS 分区中（.ivy、项目源、.sbt，甚至可能复制 JDK 等）。我会创建一个脚本来在启动时或手动执行所有这些操作，这不是问题。此外，我会设置文件同步任务，因此在操作系统失败的情况下丢失更改不会成为问题。

更新：

1.  日志说 java 和 scala 源代码中约有 400 个是在清理后编译的。
2.  在核心模块中更改一个文件后，它会在 50 秒内重新编译 130 个文件。
3.  jrebel 在 #1 之后需要 72 秒重新加载，在 #2 之后需要 50 秒
4.  添加 -Drebel.check_class_hash=true 使 jrebel 在 #2 之后立即重新加载。

我对这些结果非常满意，但仍然对如何使 scala 编译更快感兴趣，因为在需要 170 秒的编译过程中，cpu 使用率最多只有 70%，只需大约 5 秒，编译期间的总体 cpu 使用率是 20%。

更新：

将 JVM、源代码、.ivy2 和 .sbt 文件夹放在 RAMDISK 上后，我注意到仅编译时间略有改进：从 132 秒到 122 秒（清理后）。所以，不值得麻烦。

笔记：

这不包括依赖解析，因为我使用[这种方法](https://stackoverflow.com/questions/17190755/why-sbt-runs-dependency-resolution-every-time-after-clean)来避免在清理后丢失依赖解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T22:28:12.077

您可以尝试设置一个 VM 参数**-Drebel.check_class_hash=true**，它将在重新加载类之前检查校验和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T14:41:24.077

我不知道在 Mac 上你可以期待什么加速，但我已经看到 Linux 编译 Scala 编译器本身的加速，这足以鼓励尝试。我的报告（警告：非常特定于 Linux）在[那里](http://blog.garillot.net/post/43139769034/how-a-ram-disk-saved-my-life)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-02T16:40:23.690

如果您在 Linux 或 OSX 上工作，RAM 磁盘通常没有什么意义。无论如何，那些操作系统会缓存文件。

[https://unix.stackexchange.com/a/66402/141286](https://unix.stackexchange.com/a/66402/141286)

# css - Twitter Bootstrap - 使 CSS 图标更大

> ID：13544114
> 
> 赞同：19
> 
> 时间：2012-11-24T18:16:35.413
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap，`<i class="icon-flag"></i>`如果我想使用他们的 CSS sprite 中的图标，它会说使用。

如何添加我自己的名为的 css 类，该类`.logo-icon`将采用他们的图标之一但使其更大？

我的班级目前看起来像：

```
.logo-icon {
    background-image: url("../img/glyphicons-halflings-white.png");
    background-position: -312px -24px;
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-08-11T08:56:02.470

# 最好和最简单的

是改变`span`标签的字体大小

```
span.glyphicon {
    font-size: 8px;  
} 
```

或者

```
<span class="glyphicon glyphicon-check" style="font-size: 1.2em"></span> 
```

## 使用 FontAwesome？

如果像我一样你也使用 FontAwesome，你可以**混合**使用；）使用这些类

```
<span class="glyphicon glyphicon-check fa-lg"></span>
<span class="glyphicon glyphicon-check fa-2x"></span>
<span class="glyphicon glyphicon-check fa-3x"></span>
<span class="glyphicon glyphicon-check fa-4x"></span> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-05T17:56:50.177

如果你使用 scale() 会怎样？？？

```
.logo-icon {
    transform:scale(2.0,2.0);
    -ms-transform:scale(2.0,2.0); /* IE 9 */
    -moz-transform:scale(2.0,2.0); /* Firefox */
    -webkit-transform:scale(2.0,2.0); /* Safari and Chrome */
    -o-transform:scale(2.0,2.0); /* Opera */
} 
```

使用和维护不是更容易吗？您可以缩放到您想要的任何大小，而无需重新计算背景大小和位置。

我正在使用它来减小系统某些部分的图标大小。我花了大约 1 小时寻找减少的解决方案，几乎忘记了 scale()。因此，只是分享以帮助他人。=D

但是，当然，如果你把它们做得更大，你就不会得到一个完美好看的图标。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-24T19:16:43.913

它看起来不像使用 FontAwesome（这是一种实际字体）那么好，但您可以使用**background-size**属性缩放字形图标。这也需要将所有其他值缩放一个相同的因子，这意味着您不能只是一般地这样做，而是需要一次对单个图标执行此操作。

例如，将标志图标加倍将是：

```
.icon-flag.logo-icon {
  width: 28px;  // 14px * 2
  height: 28px; // 14px * 2
  background-size: 938px 318px;  // original dimensions * 2
  background-position: -624px -48px;  // original position * 2
} 
```

如果您确实想对任意图标执行此操作，则最好使用 LESS，您可能会以编程方式生成它。就个人而言，我认为切换到 FontAwesome 是更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T00:26:56.203

我更喜欢简单地更改字体大小：

```
.large-icon {
  padding: 11px 15px;
  font-size: 40px;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
} 
```

# css - 相同的 CSS 样式在同一广告上呈现不同的位置

> ID：13544118
> 
> 赞同：0
> 
> 时间：2012-11-24T18:17:02.273
> 
> 标签：css, css-float

此页面上的广告（[灯具信息](http://oursportsplace.com/groups/afl-sample/?page=fixture_info)）与此（[主页](http://oursportsplace.com/groups/afl-sample/)）的位置不同。两者都将广告放置在 中`<div class="right-ad">`，并使用相同的样式规则。

知道如何修复此问题并在与[主页](http://oursportsplace.com/groups/afl-sample/)相同位置的[灯具信息](http://oursportsplace.com/groups/afl-sample/?page=fixture_info)上显示广告吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:22:20.077

你应该在你的问题中添加更多细节，而不是真的期望人们去你的网站并分析你的代码。

尽管如此..

检查您的代码，您会注意到在您的[主页](http://oursportsplace.com/groups/afl-sample/)上`<div class="right-ad">`的父级是`<div class="main">`。而在[Fixture Info](http://oursportsplace.com/groups/afl-sample/?page=fixture_info)上，`<div class="right-ad">`的父级是`<div class="container">`.

我认为这是您的问题的原因。查看您的代码，您可能会在“[夹具信息](http://oursportsplace.com/groups/afl-sample/?page=fixture_info)”页面上找到它，将广告放入`<div>`将`<div class="main">`解决它。

**IE：**

您的**主页**：

![在此处输入图像描述](../Images/8012a436de624e776d0856d44650e562.png)

您的**灯具页面**：

![在此处输入图像描述](../Images/c88ff2ef75a179ef762ee849b6e3d0d1.png)

# c++ - 在我的 C++/STL/MFC 应用程序启动早期发生的致命异常中，我可以信任堆栈回溯符号名称吗？

> ID：13544119
> 
> 赞同：1
> 
> 时间：2012-11-24T18:17:09.083
> 
> 标签：c++, visual-studio-2008, visual-c++

我在`mfc90d.dll`in 中遇到访问冲突`CObject:IsKindOf`，这是调用堆栈上最深的项目，实际上显然很久以前运行过`WinMainCRTStartup`，并且可能在我的应用程序中，因为我为我的应用程序的一些模型对象编写了一个标准容器； `std::map<int, CDevice*>`某处，导致以下模板化容器 C++ 类型存在，然后出现在我的调用堆栈中：

```
myapp.exe!std::_Tree<std::_Tmap_traits<int,CDevice   
         *,std::less<int>,std::allocator<std::pair<int const ,CDevice *> >,0> 
          >::_Copy(const std::_Tree<std::_Tmap_traits<int,CDevice 
         *,std::less<int>,std::allocator<std::pair<int const ,CDevice *> >,0> > &                     
         _Right={...})  Line 1067 + 0x1d bytes  C++ 
```

我不是 100% 确定这`std::map<int, CDevice*>`是原因，但它是我能找到的唯一涉及“CDevice*”的模板参考。

整个调用堆栈，稍微简化（省略号`...`表示省略了函数签名的一些细节）。

```
mfc90d.dll!CObject::IsKindOf(const CRuntimeClass * pClass=0x691a09ec)  
mfc90d.dll!CDocManager::OpenDocumentFile(const char * lpszFileName=0x007783e8)  
mfc90d.dll!CWinApp::OpenDocumentFile(const char * lpszFileName=0x007783e8)  
myapp.exe!CServerApp::InitInstance()  
mfc90d.dll!AfxWinMain(HINSTANCE__ * hInstance=0x00400000, HINSTANCE__ * ...            
    myapp.exe!__tmainCRTStartup()  Line 574 + 0x35 bytes    C
myapp.exe!WinMainCRTStartup()  Line 399 C
kernel32.dll!762033aa()     
ntdll.dll!77369ef2()    
ntdll.dll!77369ec5()    
myapp.exe!std::_Tree<std::_Tmap_traits<int,CDevice .......... 
```

问题：

1.  我对如何`std::_Tree<...>::_Copy`执行这么多层的东西感到有点困惑，上面有四个完整的调用层`myapp.exe!WinMainCRTStartup`。我应该怀疑上面的调用堆栈不正确吗？

2.  什么是像上面那样的 std::_Tree<...> 混乱，为什么要调用它`CObject:IsKindOf`？我的代码使用这样的 STL： `std::map<int, CDevice*>`.
    我的猜测是，如果我删除所有引用，`std::map<int, CDevice*>`那么上面的`std::_Tree`内部实现代码就会消失。

3.  之前运行这么远`WinMainCRTStartup`向我表明，这段代码实际上是在`mfc90d.dll`加载时运行的。大概是这样吗？我可以在 VC++2008 调试器中做些什么来更清楚地了解“这段代码什么时候运行？”

4.  在我的应用程序生命周期的早期，让某人为我猜测到底是如何发生崩溃是不合理的。不过，我对您如何调试此类问题很感兴趣，因此，如果其中任何一个对您敲响了警钟，我将不胜感激您的想法和想法，但是让任何人猜测真正发生的事情太过分了。让我们说这是随机堆损坏，不知何故。但是，如果您对“从在 dll 中使用 MFC 切换到静态链接 MFC”的顺序有提示，我想听听这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:38:12.247

根据我的经验，ntdll.DLL 以下的任何内容都是红鲱鱼。您的标准映射没有调用 ntdll 中调用 win main 的代码。调试器正在解释废话并试图理解它，并且一些半随机二进制数据的地址与您的一个函数对齐。假装它不存在。

# neo4j - Neo4j 服务器插件开发的最佳实践是什么？

> ID：13544120
> 
> 赞同：3
> 
> 时间：2012-11-24T18:17:15.670
> 
> 标签：neo4j

我能够使用这些文档在我的服务器上安装示例插件：http: [//docs.neo4j.org/chunked/milestone/server-plugins.html](http://docs.neo4j.org/chunked/milestone/server-plugins.html)

现在我想开发自己的插件，但我不确定如何调试和单元测试它们。我在哪里可以阅读更多关于此和服务器插件开发的最佳实践的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:19:08.397

my plugin:

```
package ru.a360.neo4j.plugins;

import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Relationship;
import org.neo4j.server.plugins.*;
import org.neo4j.server.rest.repr.Representation;
import org.neo4j.server.rest.repr.ValueRepresentation;
import org.neo4j.tooling.GlobalGraphOperations;

import java.util.logging.Logger;

@Description("An extension to the Neo4j Server for find routes between two nodes")
public class WarmUp extends ServerPlugin
{
    private Logger logger = Logger.getLogger(WarmUp.class.getName());

    public WarmUp()
    {
    }

    @Name("warm_up")
    @Description("Warm up all nodes and relationships")
    @PluginTarget(GraphDatabaseService.class)
    public Representation warmUp(@Source GraphDatabaseService graphDb)
    {
        long t0 = System.currentTimeMillis();
        int relCount = 0;
        int nodesCount = 0;
        GlobalGraphOperations ggo = GlobalGraphOperations.at(graphDb);
        for (Node n: ggo.getAllNodes())
        {
            for (String prop: n.getPropertyKeys())
            {
                n.getProperty(prop);
            }
            nodesCount++;
        }
        for (Relationship rel: ggo.getAllRelationships())
        {
            for (String prop: rel.getPropertyKeys())
            {
                rel.getProperty(prop);
            }
            relCount++;
        }
        logger.info("warmup;" + (System.currentTimeMillis() - t0) / 1000.0 );
        return ValueRepresentation.string("WARMED UP " + nodesCount + " NODES AND " + relCount + " RELATIONSHIPS");
    }
} 
```

There is new string in main/java/META-INF/services/org.neo4j.server.plugins.ServerPlugin:

```
ru.a360.neo4j.plugins.WarmUp 
```

I want to write test (test/java/ru/a360/neo4j/plugins/TestNeo.java) like this:

```
package ru.a360.neo4j.plugins;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class TestNeo {

    @Before
    public void prepareTestData()
    {
    }

    @After
    public void destroyTestDatabase()
    {
    }

    @Test
    public void myTest1()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:41:31.850

您可以像简单的 java 项目一样开发插件，测试插件很容易，只需在单元测试中实例化它们并将 Node、GraphDatabaseService 和参数传递给插件方法并检查结果。

# python - 在 html 上循环一次作为字符串

> ID：13544121
> 
> 赞同：1
> 
> 时间：2012-11-24T18:17:24.463
> 
> 标签：python, loops, while-loop

我尝试从 html 中的表中读取数据。我定期阅读，表格长度总是变化，我不知道它的长度。但是表格总是采用相同的格式，所以我尝试识别一些模式并根据它的位置读取数据。html 的格式为：

```
<head>
<title>Some webside</title>
</head>
<body 
<tr><td> There are some information coming here</td></tr>
<tbody><table>
<tr><td><a href="d?k=101">First</a></td><td>London</td><td>24</td><td>3</td><td>19:00</td><td align="center"></td></tr>
<tr bgcolor="#cccccc"><td><a href="d?k=102">Second</a></td><td>NewYork</td><td>24</td><td>4</td><td>20:13</td><td align="center"></td></tr>
<tr><td><a href="d?k=201">Some surprise</a></td><td>Swindon</td><td>25</td><td>5</td><td>20:29</td><td align="center"></td></tr>
<tr bgcolor="#cccccc"><td><a href="d?k=202">Third</a></td><td>Swindon</td><td>24</td><td>6</td><td>20:45</td><td align="center"></td></tr>
</tbody></table>
<tr><td> There are some information coming here</td></tr>
</body> 
```

我将 html 转换为字符串并通过它来读取数据，但我只想读取一次。我的代码是：

```
def ReadTable(m):
    refList = []
    firstId = 1
    nextId = 2
    k = 1
    helper = 1
    while firstId != nextId:
        row = []
        helper = m.find('<td><a href="d?k=', helper) + 17
        end_helper = m.find('">', helper)
        rowId = m[helper : end_helper]
        if k == 1:          # to check if looped again
            firstId = rowId
        else:
            nextId = rowId      
        row.append(rowId)
        helper = end_helper + 2
        end_helper = m.find('</a></td><td>', helper)
        rowPlace = m[helper : end_helper]
        row.append(rowPlace)
        helper = m.find('</a></td><td>', end_helper) + 13
        end_helper = m.find('</td><td>', helper)
        rowCity = m[helper : end_helper]
        row.append(rowCity)
        helper = end_helper + 9
        end_helper = m.find('</td><td>', helper)
        rowDay = m[helper : end_helper]
        row.append(rowDay)
        helper = end_helper + 9
        end_helper = m.find('</td><td>', helper)
        rowNumber = m[helper : end_helper]
        row.append(rowNumber)
        helper = end_helper + 9
        end_helper = m.find('</td>', helper)
        rowTime = m[helper : end_helper]
        row.append(rowTime)
        refList.append(row)
        k +=1
    return refList

if __name__ == '__main__':
    filePath = '/home/m/workspace/Tests/mainP.html'
    fileRead = open(filePath)
    myString = fileRead.read()
    print myString
    refList = ReadTable(myString)
    print 'Final List = %s' % refList 
```

我希望结果是一个包含 4 个列表的列表，如下所示：

`Final List = [['101', 'First', 'London', '24', '3', '19:00'], ['102', 'Second', 'NewYork', '24', '4', '20:13'], ['201', 'Some surprise', 'Swindon', '25', '5', '20:29'], ['202', 'Third', 'Swindon', '24', '6', '20:45']]`

我希望在第一次循环之后再次读取字符串并再次`firstId`找到并且我`while-loop`将终止。相反，我有无限循环，我的列表开始看起来像这样：

`Final List = [['101', 'First', 'London', '24', '3', '19:00'], ['102', 'Second', 'NewYork', '24', '4', '20:13'], ['201', 'Some surprise', 'Swindon', '25', '5', '20:29'], ['202', 'Third', 'Swindon', '24', '6', '20:45'], ['me webside</title>\n</head>\n<body \n<tr><td> There are some information coming here</td></tr>\n<tbody><table>\n<tr><td><a href="d?k=101', 'First', 'London', '24', '3', '19:00'], ['102', 'Second', 'NewYork', '24', '4', '20:13']...`

我不明白为什么我`helper`开始这样做，我不知道应该如何编写这样的程序。你能建议一个好的/有效的方法来编写它或修复我的循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:21:45.217

我建议您花一些时间来研究[LXML](http://lxml.de)。它允许您查看 html 文件中的所有表格并使用组成表格的事物的子元素（如行和单元格）

LXML 不难使用，它允许你输入一个字符串

```
html.fromstring(somestring) 
```

此外，在 SO 上已经提出并回答了很多 lxml 问题，因此不难找到可以工作的好例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:43:12.910

您没有检查 find 的返回值，并且在找不到匹配项时返回 -1。 [http://docs.python.org/2/library/string.html#string.find](http://docs.python.org/2/library/string.html#string.find%20Return%20-1%20on%20failure) 失败返回 -1

我更新了这部分代码，它现在按预期返回。下面的第一行和最后一行与您上面的内容相匹配，因此您可以找到替代品。

```
 row = []
    helper = m.find('<td><a href="d?k=', helper)
    if helper == -1:
        break
    helper += 17
    end_helper = m.find('">', helper) 
```

# android - 布局桶和密度混乱

> ID：13544122
> 
> 赞同：0
> 
> 时间：2012-11-24T18:17:25.613
> 
> 标签：android, android-layout

我浏览[了官方教程](http://developer.android.com/guide/practices/screens_support.html)和支持多屏[的博客条目](http://android-developers.blogspot.ru/2011/07/new-tools-for-managing-screen-sizes.html)。如果我错了，请纠正我 - 这种分离完全与设备尺寸有关。如果是这样 - 你能否阐明为什么桶修饰符（小，正常，大，xlarge）与“dp”单位相关：

> 超大屏幕至少为 960dp x 720dp
> 
> 大屏幕至少为 640dp x 480dp

因此，如果我没记错的话，“dp”是给定物理平方 - 英寸平方上的像素数量。因此，手机设备是否可能包含等于由 xlarge bucket 表示的密度的像素数量 - 960dp x 720dp。我的意思是 - 如果将 dp 转换为像素 - 可能有一个设备的尺寸和分辨率等于 960dp 中包含的像素数量，因此将选择专用于平板电脑的模板而不是手机模板。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T10:06:41.040

dp 单位并没有说某物是多少像素，而是说某物是多少英寸/毫米。

[文档](http://developer.android.com/guide/practices/screens_support.html#terms)说您可以使用以下公式将 dp 转换为像素：

```
px = dp * (dpi / 160) 
```

要获得 dp 而不是像素，您可以按如下方式重写表达式：

```
dp = px / (dpi * 160) 
```

如果你只看一下这个公式中的单位，你会得到：

```
dp = pixels / (pixels / inch) <==> dp = (pixels / pixels) * inch 
```

在这里您可以看到 dp 的单位实际上是英寸。160 dp 也大约是 1 英寸，所以当你有一个大小为 960 dp x 720 dp 的桶时，它实际上与 6 英寸 x 4.5 英寸相同。

所以不管3英寸宽屏手机的分辨率是多少，屏幕都会保持在3英寸，永远不会变成6英寸，只是屏幕的dpi发生了变化。因此，手机不可能被放入错误的屏幕尺寸桶中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:25:45.030

屏幕不只是`big`或`small`已经以更物理的方式使用像素和密度来描述，因此能够将任何屏幕归类为`large`或者`normal`您必须“标准化”所有这些硬件参数。并且`dp`完美地服务于这个目的。如果您只需要知道屏幕是否大于`normal`但精确的像素或密度是您不感兴趣的，那么您可以使用它。如果您关心像素或密度，则可以使用其他修饰符。这只是您需要什么的问题，能够有这么多选项可供选择是件好事。

# maven - 在我的 Maven 项目中没有任何“插件描述符”

> ID：13544124
> 
> 赞同：0
> 
> 时间：2012-11-24T18:17:26.943
> 
> 标签：maven, maven-plugin, qt-jambi

我想用 qt-jambi 创建 UI，但我有一个问题。我在 Eclipse 中使用 maven，并创建了一个 maven 项目，我从这里下载并安装了第 3 方 qt-jambi jar 文件到我的本地存储库中：http: [//old.qt-jambi.org/maven2/net/sf/ qtjambi/](http://old.qt-jambi.org/maven2/net/sf/qtjambi/) 及以下文件：

(1) [qtjambi-maven-plugin-linux32-4.5.2_01.jar](http://old.qt-jambi.org/maven2/net/sf/qtjambi/qtjambi-maven-plugin-linux32/4.5.2_01/)

(2) [qtjambi-platform-linux32-4.5.2_01.jar](http://old.qt-jambi.org/maven2/net/sf/qtjambi/qtjambi-platform-linux32/4.5.2_01/)

我正在使用 ubuntu 12.10(32bit) 和 Maven 3.0.4。

我的 qt-jambi 的 maven 存储库（m2 home）路径如下：

```
/home/mehdi/.m2/repository/net/sf/qtjambi/qtjambi/4.5.2_01/qtjambi-4.5.2_01.jar
/home/mehdi/.m2/repository/net/sf/qtjambi/qtjambi-maven-plugin-linux32/4.5.2_01/qtjambi-maven-plugin-linux32-4.5.2_01.jar 
```

所以我将此行添加到我的 pom.xml： http: [//old.qt-jambi.org/users/maven-repository/](http://old.qt-jambi.org/users/maven-repository/)

我的 pom.xml 文件是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.iyasin</groupId>
  <artifactId>iycTest</artifactId>
  <version>2.0</version>
  <packaging>jar</packaging>

  <name>iycTest</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
  <dependency>
        <groupId>net.sf.qtjambi</groupId>
        <artifactId>qtjambi</artifactId>
        <version>4.5.2_01</version>
    </dependency>
  </dependencies>

  <build>
  <plugins>
  <plugin>
            <groupId>net.sf.qtjambi</groupId>
            <artifactId>qtjambi-maven-plugin-linux32</artifactId>
            <executions>
                <execution>
                    <id>qtjambi</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <sourcesDir>src/main/java</sourcesDir>
                <noObsoleteTranslations>true</noObsoleteTranslations>
            </configuration>
        </plugin>
  </plugins>
  </build>
</project> 
```

当运行`mvn test`或`mvn compile`返回以下错误时：

```
 Failed to parse plugin descriptor for net.sf.qtjambi:qtjambi-maven-plugin-linux32:4.5.2_01 (/home/mehdi/.m2/repository/net/sf/qtjambi/qtjambi-maven-plugin-linux32/4.5.2_01/qtjambi-maven-plugin-linux32-4.5.2_01.jar): No plugin descriptor found at META-INF/maven/plugin.xml -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:50:26.257

您需要添加到您的 POM 的相关部分：

```
<pluginRepositories>
    <pluginRepository>
        <id>qtjambi-releases-before-2011</id>
        <name>QtJambi (Releases Before 2011)</name>
        <url>http://repository.qt-jambi.org/nexus/content/repositories/releases-before-2011</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories> 
```

以上可以放入你的 settings.xml 或项目 POM 中。

您应该真正运行本地存储库代理（例如 Nexus 或 Artifactory）。然后将您的 settings.xml 设置为指向该本地存储库。然后将其配置为缓存中央和 qtjambi 以及您使用的其他存储库。不过这个好处太长了，这里就不赘述了，最好用google研究一下这个话题。

# php - SQLite 作为会话存储

> ID：13544125
> 
> 赞同：6
> 
> 时间：2012-11-24T18:17:31.290
> 
> 标签：php, sqlite, model-view-controller, memcached, session-cookies

我想知道将 SQLite 用作主会话存储或至少用作主 memcached 的备份会话存储是一种好习惯吗？

你能给我一些优点和缺点吗？

*（我正在构建一个用于教育目的的 MVC 框架，并且正在考虑不同的可能性和实现）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:31:30.943

**SQLite 优点**

*   比基于文件的会话更快
*   可以分布在基于文件的会话更尴尬的地方

**SQLite 缺点**

*   需要 SQLite 来创建依赖项和其他要监视的东西
*   更难实现基于本机文件的会话
*   大型应用程序可以通过如此多的读写请求、碎片、索引更新等快速杀死 sql 表，尤其是几乎每个页面都命中该特定表

**更好的解决方案 - Memcache**

由于会话通常在每个页面命中时访问，因此使用尽可能快的机制而不需要数据库层的所有开销同时仍然允许它在分布式系统中工作（例如多个 PHP 服务器）是有意义的。

使用经过 PHP 良好测试的 Memcache，您甚至可以通过修改一些 php.ini 设置来集成 memcache 会话，或者为了更细粒度的控制（或使用其他软件，如 redis），您可以创建自己的自定义会话处理程序。

这有不同的优点和缺点

**内存缓存优点**

*   非常非常快
*   很好地扩展
*   易于通过 PHP.INI 实现

**内存缓存缺点**

*   另一个有可能崩溃并需要监控的服务
*   使用 RAM，与 HDD 空间相比，它通常是有限的资源，并且还需要监控

*尽管您应该使用其他软件来监视这两个东西，或者编写一个检查 memcache 服务是否仍在运行的 cron 作业脚本 - 但那是另一天的另一个问题和答案。关键是，这些缺点可以在一定程度上减少。*

**进一步阅读所涵盖的主题**

*   [使用 PHP.INI 的 Memcache 会话](http://php.net/manual/en/memcached.sessions.php)
*   [雷迪斯](http://redis.io/)
*   [自定义 PHP 会话处理程序](http://php.net/manual/en/class.sessionhandler.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:31:59.033

基于文件的会话是一个坏主意，因为如果您不关闭对会话的写访问（ session_write_close(); ），文件将被锁定。但是，当您只需要使用 sqlite 来避免这个问题时，为什么还要限制自己/服务器呢？

所以 sqlite pro： - 易于使用（更改 php.ini 配置）：

```
session.save_handler = sqlite
session.save_path = "/path/sessions.db" 
```

*   更快地加载页面（会话现在可以并行工作）
*   使用 ajax 更快
*   内置功能

sqlite con

*   写入会话较慢

我想使用 apc，但后来我需要实施，我担心它可能会导致安全问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:27:01.037

PHP 的基于文件的会话非常好而且很快，使用 SQLite 存储会话只会增加会话管理的开销。

# string - 如何将 Array1[x] 处的字符串分配给 Array2[x] 处的 int？

> ID：13544131
> 
> 赞同：0
> 
> 时间：2012-11-24T18:18:21.383
> 
> 标签：string, file, parsing, sorting, object

我正在尝试组织从文本文件中获得的数据，每行有 4 条信息（城市、国家、人口和日期）。我想为每个数组创建一个数组，所以我首先将它们全部放入一个大字符串数组中，然后开始将它们分成 4 个数组，但我需要将 Population 信息更改为一个 int 数组，但它显示 *

> “类型不匹配：无法从元素类型 int 转换为 String”

```
//Separate the information by commas
    while(sc.hasNextLine()){
        String line = sc.nextLine();
        input = line.split(",");
            //Organize the data into 4 seperate arrays
            for(int x=0; x<input.length;x++){

                if(x%4==0){
                    cities[x] = input[x];
                }
                if(x%4==1){
                    countries[x] = input[x];    
                }
                if(x%4==2){
                    population[x] = Integer.parseInt(input[x]); 
                }
                if(x%4==3){
                    dates[x] = input[x];
                }

            }
    } 
```

当我打印出数组时，它们在每个数据之间都有一堆空值。我计划创建具有 4 条数据的对象，以便我可以按人口、日期等对它们进行排序......我对使用对象非常陌生，所以如果有人有更好的方法来获得 4 条数据将数据放入对象中，因为我还没有想出办法：/我的最终目标是拥有这些对象的数组，我可以对它们使用不同的排序方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:44:13.250

我建议做这样的事情：

```
public class MyData {
    private String city;
    private String country;
    private Integer population;
    private String date;

    public MyData(String city, String, country, Integer population, String date) {
        this.city = city;
        this.country = country;
        this.population = population;
        this.date = date;
    }

    // Add getters and setters here
} 
```

然后在您发布的文件中：

```
...

ArrayList<MyData> allData = new ArrayList<MyData>();

while(sc.hasNextLine()) {
    String[] values = sc.nextLine().split(",");
    allData.add(new MyData(values[0], values[1], Integer.parseInt(values[2]), values[3]));
}

... 
```

您需要一个对象来存储数据，以便保持每列中的值之间的关系。

另外，我只是假设您在这里使用 Java。我们正在谈论的语言是您应该包含在您的问题中或作为标签的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:24:56.980

问题出在您的 x 索引上。如果您仔细查看“for”，您会发现它将在每 3 个位置插入一个值。

尝试

```
int index = 0;
 while(sc.hasNextLine()){
        String line = sc.nextLine();
        input = line.split(",");
            //Organize the data into 4 seperate arrays
            for(int x=0; x<input.length;x++){

                if(x%4==0){
                    cities[index] = input[x];
                }
                if(x%4==1){
                    countries[index] = input[x];    
                }
                if(x%4==2){
                    population[index] = Integer.parseInt(input[x]); 
                }
                if(x%4==3){
                    dates[index] = input[x];
                }

            }
          ++index;
    } 
```

# c - 具有 C 或 D 浮点语义的整数类型

> ID：13544136
> 
> 赞同：9
> 
> 时间：2012-11-24T18:18:52.997
> 
> 标签：c, floating-point, int, d, fixed-point

我正在寻找**C**或**D**的现有实现，或在实现具有**浮点语义**的有符号和/或无符号**整数类型**方面的建议。

 **也就是说，一个整数类型在做算术时表现得像浮点类型：**溢出产生*无穷大***（*-infinity*表示有符号下溢）而不是环绕或具有未定义的行为，**未定义的操作产生*NaN***等。

本质上，一种浮点版本，可呈现数字的分布均匀地落在数轴上，而不是聚集在 0 附近。

此外，所有操作都应该是**确定性**的；任何给定的二进制补码 32 位架构都应该为相同的计算产生完全相同的结果，而不管其实现如何（而浮点可能并且通常会产生略有不同的结果）。

最后，**性能是一个问题**，这让我担心潜在的“bignum”（任意精度）解决方案。

另请参阅：*定点*和*饱和算法*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:24:20.583

我不知道任何现有的实现。

但我想实现它将是（在 D 中）的问题：

```
enum CheckedIntState : ubyte
{
    ok,
    overflow,
    underflow,
    nan,
}

struct CheckedInt(T)
    if (isIntegral!T)
{
    private T _value;
    private CheckedIntState _state;

    // Constructors, getters, conversion helper methods, etc.

    // And a bunch of operator overloads that check the
    // result on every operation and yield a CheckedInt!T
    // with an appropriate state.

    // You'll also want to overload opEquals and opCmp and
    // make them check the state of the operands so that
    // NaNs compare equal and so on.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T23:09:38.007

一种解决方案可能是使用抽象数据类型实现多精度算术。David Hanson的《*C Interfaces and Implementations 》一书有一章（接口和实现）介绍了 MP 算术。*

使用缩放整数进行计算也是一种可能。您也许可以使用他的任意精度算术，尽管我*相信*这个实现不会溢出。您可能会耗尽内存，但这是另一个问题。

在任何一种情况下，您都可能需要调整代码以准确返回您想要的溢出等。

[源代码](http://code.google.com/p/cii/)（MIT 许可证）

该页面还有一个从 amazon.com 购买该书的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T18:26:34.710

除了未定义的操作产生 NaN 的部分之外，饱和算术可以满足您的需求；这将是有问题的，因为大多数饱和实现使用完整的数字范围，因此没有剩余的值可以为 NaN 保留。因此，除非您有一个额外的“此值是否为 NaN”字段，否则您可能无法轻松地在饱和硬件指令的背面构建它，这是相当浪费的。

假设您对 NaN 值的想法深信不疑，那么所有边缘情况检测可能都需要在软件中进行。对于大多数整数运算，这非常简单，特别是如果您有更广泛的可用类型（假设`long long`严格大于任何整数类型`myType`）：

```
myType add(myType x, myType y) {
    if (x == positiveInfinity && y == negativeInfinity ||
        x == negativeInfinity && y == positiveInfinity)
        return notANumber;
    long long wideResult = x + y;
    if (wideResult >= positiveInfinity) return positiveInfinity;
    if (wideResult <= negativeInfinity) return negativeInfinity;
    return (myType)wideResult;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T18:24:52.130

饱和算术满足了一半的要求，例如 ARM 指令、MMX 和 SSE。

正如斯蒂芬佳能所指出的，需要额外的元素来检查溢出/NaN。一些指令集（至少是 Atmel）btw 有一个标记来测试溢出（可用于区分 inf 和 max_int）。也许“Q”+ 0 可以标记为 NaN。**

# c# - 使用 vigenere cipher 加密文档

> ID：13544138
> 
> 赞同：0
> 
> 时间：2012-11-24T18:19:07.717
> 
> 标签：c#, encryption, encryption-symmetric, vigenere

我有兴趣了解不同的加密技术，并开始在 c# 中实现 vigenere 密码。我可以实现一个 Windows 窗体，它允许我加密和解密类似于以下链接的字符串。

[https://stackoverflow.com/questions/13533269/c-sharp-vigenere-cipher-to-encrypt-an-text-file](https://stackoverflow.com/questions/13533269/c-sharp-vigenere-cipher-to-encrypt-an-text-file)

我的问题是如何使用 vigenere 来加密 word 文档或图像文件而不是字符串？我已经创建了一个按钮，它打开一个对话框让我选择一个文件，我现在被困在如何加密所选文件上。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:24:21.683

将文件读入字节数组

```
byte[] bytes = File.ReadAllBytes("C:\folder\myfile"); 
```

然后将其输入到您的加密例程中以生成不同的 byte[] 数组以写回磁盘

```
bytesEncrypted = MyEncryptFunction(bytes);
File.WriteAllBytes("C:\folder\myfile.encrypted", bytesEncrypted) 
```

# java - 使用 GSON 反序列化子节点

> ID：13544139
> 
> 赞同：0
> 
> 时间：2012-11-24T18:19:10.953
> 
> 标签：java, json, gson

如果我想反序列化以下 JSON 格式，我的 POJO 声明应该是什么：

```
{
"id":2,
"content":"skfdjhsfjhsfjkshdkjfhskdjf",
"created_at":"2012-11-14T00:10:59Z",
"feeds":
 [
   {
     "feed":{"name":"twitter"}
   } 
 ]
} 
```

目前我的 POJO 是这样的：

Broadcast.java - 最外层的对象

```
public class Broadcast {

    private String content;
    private String created_at;
    private Feeds feed[];
    private int id;

    public Broadcast() { }

    public int getId() { return id; }

    public String getContent() { return content; }

    public String getCreatedAt() { return created_at; }    
} 
```

Feed.java - Broadcast 的内部子节点，可以是一个数组，每个 feed 都有一个 name 属性：

```
public class Feeds {

    private String name;

    public Feeds() {}

    public String getName() {
        return name;
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:38:53.760

`private Feeds feed[];`

应该

`private Feeds[] feeds;`.

实际上，位置`[]`无关紧要，但建议放在字体旁边，这样可以更清晰地阅读。这里的问题是不正确的变量名。

* * *

另外，如果你仔细看看：

```
 "feeds":
  [
      {
          "feed":{"name":"twitter"}
      } 
  ] 
```

您会注意到它`feeds`确实是一个数组，但它`"feed":{"name":"twitter"}`代表一个变量 ( `feed`)，其中包含一个键值对 ( `{"name":"twitter"}`)，因此您的`Feeds`类应该如下所示：

```
class Feeds {
    private Map<String, String> feed;

    public Feeds() {}

    public String getName() {
        return feed.get("name");
    }
} 
```

# c++ - qmake 到 cmake 的转换和链接错误

> ID：13544140
> 
> 赞同：1
> 
> 时间：2012-11-24T18:19:21.793
> 
> 标签：c++, qt, linker, cmake, qmake

我将一个项目从 qmake（最初我使用 qt-creator 在 mac/linux/win 上构建它）转换为 cmake，我得到了很多链接错误。

例如：

架构 x86_64 的未定义符号：“runion(QtRegion const&, QtRegion const&)”，引用自：3DView.cpp.o 中的 Q3DView::ReloadLineData() “pafrand(int)”，引用自：

我的简历：

```
CONFIG += debug_and_release
QT            += core gui opengl
DEFINES       += _TEST1
TEMPLATE      = app
TARGET        = test
HEADERS       = xxx.h \
                xxxxxx.h \
                etc.h
    Libs/include/generic/xxxxxx.h

SOURCES       = xxxx.cpp \
                xxx.cpp \
                xxxx.cpp 

INCLUDEPATH   += Libs/include
INCLUDEPATH   += ../plugin/srv

RESOURCES     = resource.qrc

##### LINUX
unix:!macx:INCLUDEPATH += . /usr/local/include/boost  
unix:!macx:LIBS += -L/usr/local/lib
unix:!macx:LIBS += -lboost_system -lboost_thread
!win32:!macx: LIBS = -lGL -lGLU
########

#### MAC
macx:INCLUDEPATH += . /usr/local/include/boost
macx:LIBS += -L/usr/local/lib
macx:LIBS += -lboost_system-mt -lboost_thread-mt
macx:QMAKE_LFLAGS_RPATH += /usr/local/lib
####

QMAKE_CXXFLAGS_WARN_ON =

FORMS += \
    UI/xxx.ui \
    UI/xx.ui 
```

还有我的cmake文件版本：

```
project( test )

cmake_minimum_required( VERSION 2.6 )

if(APPLE)
set(CMAKE_OSX_ARCHITECTURES x86_64)
ENDIF()

set ( CMAKE_BUILD_TYPE Debug )

add_definitions ( -Wall )

find_package ( Qt4 REQUIRED )

FIND_PACKAGE(Boost)
IF (Boost_FOUND)
    INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIR})
    ADD_DEFINITIONS( "-DHAS_BOOST" )
ENDIF()

find_package(GLUT)
find_package(OpenGL)
IF(APPLE)
SET(CMAKE_CXX_LINK_FLAGS "-framework OpenGL -framework GLUT")
ENDIF(APPLE)

set ( test_HDRS
    xxxx.h
    xxxxxx.h
    xxxx.h
    )

set ( test_SRCS
    xxxxx.cpp
    xxx.cpp
    xxxxx.cpp
    )

set ( test_UIS
    UI/xx.ui
    UI/xxxx.ui
    )
QT4_WRAP_UI(UIS ${test_UIS})

set ( test_RSCS
    resource.qrc
    )

QT4_ADD_RESOURCES(RSCS ${test_RSCS})

QT4_WRAP_CPP(MOCS ${test_HDRS})

INCLUDE(${QT_USE_FILE})
ADD_DEFINITIONS(${QT_DEFINITIONS})

include_directories (
    ${CMAKE_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}
    ${QT_QTCORE_INCLUDE_DIR} ${QT_QTGUI_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR} ${QT_QTGUI_INCLUDE_DIR} ${QT_QTOPENGL_INCLUDE_DIR}
    Libs/include
    /usr/local/include/boost
    ../plugin/srv)

link_directories (
        /usr/local/lib
    )

add_executable ( test ${test_SRCS} ${UIS} ${RSCS} ${TRS} ${MOCS} )

target_link_libraries ( test  ${QT_LIBRARIES} ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTOPENGL_LIBRARY} ) 
```

我尝试了很多我在网上找到的不同的东西，但总是同样的问题。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:15:42.393

你没有`-lqgis_core -lqgis_gui`在你的`CMakeLists.txt`. 添加`qgis_core`并`qgis_gui`调用`target_link_libraries()`。

# django - 如何使用 Django 从模板生成 pdf？

> ID：13544145
> 
> 赞同：0
> 
> 时间：2012-11-24T18:20:13.737
> 
> 标签：django, django-templates

我想从我的模板生成一个 PDF，其中包含一些计算和操作生成的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:40:02.030

从这里开始： [https ://docs.djangoproject.com/en/dev/howto/outputting-pdf/](https://docs.djangoproject.com/en/dev/howto/outputting-pdf/)

如果您需要更多文档，请看这里： [http ://www.reportlab.com/](http://www.reportlab.com/)

如果您的目标是将 html 本身输出到 PDF 中，您可能会遇到重大问题。使用 reportlab 模板化 PDF 与 HTML/CSS 非常不同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:06:09.897

根据您的需要，您可能只想使用 wkhtmltopdf ( [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/) ) - 或类似的 - 将网页转换为 PDF，因为 HTML 模板很容易。另一方面，reportlab 是唯一允许您在 python ( AFAIK ) 中生成 PDF 的库，它非常无聊和过时。公平地说，reportlab 的付费版本有望更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T03:13:29.687

根据经验，我会说渲染 PDF 的最佳方法是将乳胶模板渲染到文件中，然后 Popen`pdfTeX`或您喜欢的任何其他内容。

# fortran - 具有现代等效 sfir1d 函数的跨平台 Fortran 库

> ID：13544155
> 
> 赞同：0
> 
> 时间：2012-11-24T18:20:54.967
> 
> 标签：fortran, fft, convolution

我正在使用一些调用 subroutine 的遗留 Fortran 代码`sfir1d`。谷歌搜索子程序名称，我发现 SGI 曾经在一个`SCSL`库中提供了一些这样的代码。

[http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=man&fname=/usr/share/catman/p_man/cat3/SCSL/zfir1d.z](http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=man&fname=/usr/share/catman/p_man/cat3/SCSL/zfir1d.z)

我想知道该功能是否有现代的、跨平台的等价物`sfir1d`。这是`BLAS`图书馆的一部分吗？

此外，如上面网页链接中所列，该库在时域中实现的卷积似乎非常慢，在频域中使用 FFT 会更有意义。

是否有可以以完全相同的方式执行一维卷积的加速跨平台库？或者简单地编写我自己的版本可能会更好（使用加速的 FFT 库不太难）。

# php - PHP SQL 多品类更新产品

> ID：13544157
> 
> 赞同：0
> 
> 时间：2012-11-24T18:21:20.520
> 
> 标签：php, sql, sql-update

我想在 php.ini 中添加多个类别的产品。经过大量搜索/研究后，我可以在多个类别中添加产品，但在更新页面上更新/更改产品类别时它不起作用。

我的数据库结构如下：

```
PRODUCTTABLE
 _____________________________________________
|    pid    |      pname   | price | pdetails |
-----------+---------------+-------+----------+

CATEGORYTABLE
 ______________________________________
|    id    |      catname   | catslug |
-----------+---------------+----------+

PRODUCT2CAT
 ____________________________
|  product_id   |   cat_id  |
-----------+----------------+ 
```

添加产品页面上使用的代码：（仅与问题相关）

```
<form method="post">
...........
echo "<input type=\"checkbox\" name=\"pcateg[]\" value=\"$catid\" /> $catnm<br />";
...........

if(isset($_POST["submit"])) {
.........
.............
$pc2=$_POST["pcateg"];

$query1 = "insert into producttable(pname,price,image,pdetails) values('$pn','$p','$img','$pd')";
mysql_query($query1);
$prdid = mysql_insert_id();

foreach($pc2 as $key=>$values)
{
$query2 = "INSERT INTO product2cat(product_id,cat_id) VALUES('$prdid','$values') ";
$result2 = mysql_query($query2);
}

} 
```

当我添加产品时，代码运行良好并在 PRODUCT2CAT 表中插入选定的类别 ID。

更新产品页面上使用的代码是：

```
<form method="post">
...........
    while($ans=mysql_fetch_array($cresult))
    {
        $selected = "";
        $catId = $ans['id'];
        $catNm = $ans['catname'];

        if ($catId == $categ) {
        $selected = "checked";
        }

    echo "<input type=\"checkbox\" name=\"pcateg[]\" value=\"$catId\" $selected /> $catNm<br />";
    }
........
    if(isset($_POST["submit"])) {
    .........
    .............
    $query1="UPDATE producttable SET pname='$pn', price='$p', image='$img', pdetails='$pd' WHERE pid=$prid";
    mysql_query($query1);

    foreach($pc2 as $key=>$values)
    {
    $query2 = "UPDATE product2cat SET cat_id='$values' WHERE product_id=$prid";
    $result2 = mysql_query($query2);
    }
  } 
```

更新 $query2 不起作用。
或者我必须首先使用 2 个查询来删除旧记录，然后插入新记录。如何在这种情况下使用查询，以便在产品更新时删除/更新所选类别。

我还想在更新页面上将旧类别显示为预选复选框。$selected = "checked" 它适用于单个类别但是如何在多个检查中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:33:39.287

1.  不要使用 mysql_* 它已被弃用
2.  `INSERT INTO table_name ('col1', 'col2') VALUES (1, 2), (2, 3), (3, 4)` 将插入 3 行

类似的东西可能会起作用：

```
$queryu = "INSERT INTO product2cat(product_id,cat_id) VALUES ";
$insertValues = array();
foreach($pc2 as $key=>$values) {
    $insertValues[]= "('$prid','$values')"; 
} 

$queryu .= implode(',', $insertValues); 
```

# objective-c - 如何根据已经移动的另一个形状的位置在不同时间启动 ios 形状动画

> ID：13544163
> 
> 赞同：0
> 
> 时间：2012-11-24T18:21:56.187
> 
> 标签：objective-c, ios, animation, caanimation, cashapelayer

我正在尝试为我的 iPhone 应用程序制作以下动画。我目前的想法是从 CAShapeLayer 继承并构建一个包含 3 个动画组件的形状。即黄色矩形、绿线和红色指针。我有一个基本的动画工作，我在其中为黄色框设置动画，但现在我想知道如何在正确的时间启动红色指针的动画。只有当矩形的左上角越过蓝点时，红色指针才会变得可见。

有没有办法在动画期间获取黄色矩形的位置。这样我就可以检查位置并开始绘制红色指针和绿线并为其设置动画。

还是我应该研究一种完全不同的方法？

![动画帧](../Images/cc3b43e00063d52f240075f813e1d35c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:45:35.270

看看黄色层的`presentationLayer`。PresentationLayer 表示图层当前显示的状态，包括动画。

# ruby-on-rails - 让 Ajax 将方法传递给响应

> ID：13544164
> 
> 赞同：0
> 
> 时间：2012-11-24T18:21:57.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图让我的表单在不使用 Ajax 刷新页面的情况下提交和显示结果。问题是方法似乎没有被返回，一旦提交，它们都会出现未定义。

**_micropost.html.erb**

```
 <li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method: :delete,
                                     data: { confirm: 'You sure?' },
                                     title: micropost.content %>
  <% end %>
</li> 
```

**创建.js.erb**

```
$(".microposts").append("<%= escape_javascript(render('shared/feed')) %>") 
```

**microposts_controller.rb**

```
class MicropostsController < ApplicationController

  before_filter :authenticate
  before_filter :authroized_user, :only => :destroy
  def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save!
      respond_to do |format|
        format.html { redirect_to @user }
        format.js
      end
  end
end

  def destroy
    @micropost.destroy
    redirect_to root_path, :flash => { :success => "Micropost deleted!" }
  end

  private
  def authroized_user
    @micropost = Micropost.find(params[:id])
    redirect_to root_path unless !current_user?(@micropost.user)    
  end

end 
```

**_feed.html.erb**

```
<% if @feed_items.any? %>
  <ol class="microposts">
    <%= render partial: 'shared/feed_item', collection: @feed_items %>
  </ol>
  <%= will_paginate @feed_items %>
<% end %> 
```

**_feed_item.html.erb**

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
  <% if !current_user?(feed_item.user) %>
    <%= link_to "delete", feed_item, method: :delete,
                                     data: { confirm: "You sure?" },
                                     title: feed_item.content %>
  <% end %>
</li> 
```

**帖子上的错误日志**

```
 Started POST "/microposts" for 127.0.0.1 at 2012-11-24 10:20:26 -0800
Processing by MicropostsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+x5dhM0t5pZzB0flEo46n+Rr8OKcxNdgaAgvkh46dek=", "micropost"=>{"content"=>"Please work"}, "commit"=>"Post"}
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 103 LIMIT 1
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 103 LIMIT 1
   (0.1ms)  BEGIN
  SQL (0.6ms)  INSERT INTO "microposts" ("content", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["content", "Please work"], ["created_at", Sat, 24 Nov 2012 18:20:26 UTC +00:00], ["updated_at", Sat, 24 Nov 2012 18:20:26 UTC +00:00], ["user_id", 103]]
   (1.7ms)  COMMIT
  Rendered shared/_feed.html.erb (2.2ms)
  Rendered microposts/create.js.erb (4.1ms)
Completed 500 Internal Server Error in 14ms

ActionView::Template::Error (undefined method `any?' for nil:NilClass):
    1: <% if @feed_items.any? %>
    2:   <ol class="microposts">
    3:     <%= render partial: 'shared/feed_item', collection: @feed_items %>
    4:   </ol>
  app/views/shared/_feed.html.erb:1:in `_app_views_shared__feed_html_erb___3604038303202035148_70347748984380'
  app/views/microposts/create.js.erb:1:in `_app_views_microposts_create_js_erb__2642480281700969603_70347793753860'
  app/controllers/microposts_controller.rb:8:in `create'

  Rendered /usr/local/rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (11.6ms) 
```

**链接到 github** [https://github.com/thebusiness11/appsample](https://github.com/thebusiness11/appsample)

**错误渲染微博/微博部分**

```
Started POST "/microposts" for 127.0.0.1 at 2012-11-24 12:23:25 -0800
Processing by MicropostsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+x5dhM0t5pZzB0flEo46n+Rr8OKcxNdgaAgvkh46dek=", "micropost"=>{"content"=>"rendering microposts/micropost partial\r\n"}, "commit"=>"Post"}
  User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 103 LIMIT 1
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 103 LIMIT 1
   (0.2ms)  BEGIN
  SQL (5.5ms)  INSERT INTO "microposts" ("content", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["content", "rendering microposts/micropost partial\r\n"], ["created_at", Sat, 24 Nov 2012 20:23:25 UTC +00:00], ["updated_at", Sat, 24 Nov 2012 20:23:25 UTC +00:00], ["user_id", 103]]
   (2.2ms)  COMMIT
  Rendered microposts/_micropost.html.erb (26.8ms)
  Rendered microposts/create.js.erb (32.4ms)
Completed 500 Internal Server Error in 140ms

ActionView::Template::Error (undefined method `content' for nil:NilClass):
    1: <li>
    2:   <span class="content"><%= micropost.content %></span>
    3:   <span class="timestamp">
    4:     Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    5:   </span>
  app/views/microposts/_micropost.html.erb:2:in `_app_views_microposts__micropost_html_erb__2883653912254136485_70298849712020'
  app/views/microposts/create.js.erb:1:in `_app_views_microposts_create_js_erb__910732530435705121_70298849590600'
  app/controllers/microposts_controller.rb:8:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:08:11.033

所以事实证明我需要做的就是传递对象@micropost

```
$(".microposts").prepend("<%= escape_javascript(render(:partial => 'shared/feed_item', :object => @micropost)) %>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:03:51.003

您正在尝试渲染“shared/feed”，它会立即查看 @feed_items 实例变量，该变量未在您的创建操作中设置。你的意思是渲染“共享/微博”吗？

# express - Express + Mocha：如何获取端口号？

> ID：13544166
> 
> 赞同：2
> 
> 时间：2012-11-24T18:22:13.113
> 
> 标签：express, mocha.js

我正在尝试使用 CoffeeScript 学习 node 和 Express 3。我正在使用 Mocha 进行测试并尝试引用端口号：

```
describe "authentication", ->
  describe "GET /login", ->
    body = null
    before (done) ->
      options =
        uri: "http://localhost:#{app.get('port')}/login"
      request options, (err, response, _body) ->
        body = _body
        done()
    it "has title", ->
      assert.hasTag body, '//head/title', 'Demo app - Login' 
```

我正在使用它，因为它也是 app.js 文件中使用的内容：

```
require('coffee-script');

var express = require('express')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.set('view options',{layout:false});
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
  app.locals.pretty = true;
});

app.configure('test', function(){
  app.set('port', 3001);
});

require('./apps/authentication/routes')(app)

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

但是，当我运行此测试时，出现错误：

```
TypeError: Object #<Object> has no method 'get' 
```

有人可以解释为什么它在测试中不起作用以及我可以做些什么作为替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:18:53.807

您会感到困惑，因为您`app.js`在该模块中有一个文件和一个变量，也称为`app`，但您实际上并没有设置将`app`变量公开为模块导出。你可以这样做：

```
var app = exports.app = express(); 
```

然后在你的测试中你可以拥有`require('../app').app.get('port')`（假设你的测试在一个子目录中。根据需要调整相对路径）。您可能希望重命名`app.js`为`server.js`在那里不那么混乱。

但是，我建议使用一个专门的`config.js`模块来保存这种类型的配置数据。

# c - 控制到达非空函数 c 的末尾

> ID：13544172
> 
> 赞同：0
> 
> 时间：2012-11-24T18:22:44.330
> 
> 标签：c

即使我的功能无效，我也会收到此错误？我认为错误只发生在非空函数上。提前致谢。

```
void scramble(void)
{
 char newgrid[DIMENSION][DIMENSION];
  for(int i=0; i<DIMENSION; i++){
    for(int j=0; j<DIMENSION; j++){
      newgrid[i][j] = grid[i][j];
    }
  }
  for(int i = DIMENSION-1; i>=0; i--){
    for(int j = 0; j<DIMENSION; i++){
      printf("%c", newgrid[i][j]);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T18:25:07.667

```
for(int i = DIMENSION-1; i>=0; i--){
    for(int j = 0; j<DIMENSION; i++){
      printf("%c", newgrid[i][j]); 
```

在内部“for”循环中，不应该是 j++ 吗？你做了一个无限循环。

# google-app-engine - Twitter4j 在 appengine 中抛出 NoClassDefFoundError

> ID：13544177
> 
> 赞同：1
> 
> 时间：2012-11-24T18:23:17.683
> 
> 标签：google-app-engine, twitter, twitter-oauth, twitter4j

我已经从[http://twitter4j.org](http://twitter4j.org)下载了 Twitter4j 3.0.1 。然后我在 Eclipse appengine 1.7.0 中添加了以下 jars。

```
twitter4j-appengine-3.0.1.jar
twitter4j-async-3.0.1.jar
twitter4j-core-3.0.1.jar
twitter4j-examples-3.0.1.jar
twitter4j-media-support-3.0.1.jar
twitter4j-stream-3.0.1.jar 
```

代码

```
twitter4j.Twitter twitter = new twitter4j.TwitterFactory().getInstance();
twitter.setOAuthConsumer("xxxxxxxxxxxxxxx","xxxxxxxxxxxxx");
twitter4j.auth.RequestToken requestToken  = twitter.getOAuthRequestToken(); 
```

它成功编译，但在运行时出现以下错误。

```
java.lang.NoClassDefFoundError: twitter4j/Twitter. 
```

但是如果我创建一个新的 Java 控制台项目而不是 appengine，那么相同的代码可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T10:38:17.683

现在 Twitter4j 发布了具有以下功能的新版本，

Twitter4J 的特点是： ✔ 100% 纯 Java - 适用于任何 Java 平台版本 5 或更高版本✔ Android 平台和 Google App Engine 就绪✔ 零依赖：无需额外的 jars ✔ 内置 OAuth 支持✔ 开箱即用的 gzip支持✔ 100% Twitter API 1.1 兼容

下载其支持的 Appengine 3.0.3。[http://twitter4j.org/en/](http://twitter4j.org/en/)。谢谢。

# node.js - jsdom - document.querySelector 已启用，但文档中缺少

> ID：13544179
> 
> 赞同：9
> 
> 时间：2012-11-24T18:23:35.773
> 
> 标签：node.js, jsdom, native-methods

我想使用 JSDo 来执行一些基于服务器的 DOM 操作。但是，尽管明确启用了 querySelector，但它在创建的文档中是未定义的：

```
var jsdom = require('jsdom');

// Yep, we've got QuerySelector turned on
jsdom.defaultDocumentFeatures = {
  QuerySelector: true
};

var dom = jsdom.defaultLevel;

var document = jsdom.jsdom("<html><body><h1>Hello StackOverflow</h1></body></html>"),
window = document.createWindow(); 
```

然而：

```
console.log(document.querySelector) 
```

退货

```
undefined 
```

如何使用 jsdom 使 document.querySelector 正常工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T18:50:54.903

自己找到了这个问题的答案。

JSDom 有一个“默认文档”以及对多个附加文档的支持。

我最初的理解是在默认文档上启用 QuerySelector 将在所有文档上启用它。这是不正确的。

我需要在我正在创建的（非默认）文档上启用 QuerySelector。

下面的工作代码：

```
var jsdom = require('jsdom');

var dom = jsdom.defaultLevel;

// QuerySelector must be turned on on the specificdocument we're creating
var document = jsdom.jsdom("<html><body><h1>Hello</h1></body></html>", null, {
  features: {
    QuerySelector: true
  }
}),
window = document.createWindow(); 
```

跑步

```
console.log(document.querySelector) 
```

现在显示该功能存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-28T18:50:40.677

在[JSDOM](https://github.com/jsdom/jsdom)文档之后，这里是 16.6.0 版本的更新代码：

```
const { JSDOM } = require("jsdom");

const dom = new JSDOM("<html><body><h1>Hello</h1></body></html>");
const document = dom.window.document;

console.log(document.querySelector); 
```

# susy-compass - 有没有办法生成直接在标记上使用的网格类

> ID：13544180
> 
> 赞同：4
> 
> 时间：2012-11-24T18:23:38.177
> 
> 标签：susy-compass

虽然我更喜欢`susy`在我的 css 上使用 mixins，但在某些情况下，拥有通用网格类很有用，例如在将这些声明内联的情况下用于 web 表单。

有什么办法吗？

目前我正在手动生成这些类，如下所示：

```
.grid-1{
    @include span-columns(1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:40:56.723

网格类在像 Susy 这样的流体系统中会变得非常复杂，因为上下文很重要。我们默认不提供它（还）。我很快就把它搞定了，它应该能让你接近：

```
@mixin susy-classes($silent: false) {
  $base: if($silent, '%', '.');
  $selector: '#{$base}span';

  @if $silent { #{$selector} { @include span-columns(1); } }
  @else { [class^="span-"] { @include span-columns(1); } }

  #{$base}full { clear: both; }
  #{$base}omega { @include omega; }

  @for $span from 1 through $total-columns {
    $span-selector: '#{$selector}-#{$span}';
    @for $context from 1 through $total-columns {
      $total-selector: '#{$span-selector}-#{$context}';
      $total-selector: if($context == $total-columns, '#{$span-selector}, #{$total-selector}', $total-selector);
      @if $context != $span {
        #{$total-selector} {
          @if $silent { @extend #{$selector}; }
          width: columns($span, $context);
        }
      } @else {
        #{$total-selector} { clear: both; }
      }
    }
  }
}

@include susy-classes; 
```

如果将其添加到 Susy 核心中，它可能会变得更清晰，但现在它应该可以满足您的需求。它将输出要扩展的静默类或标准类。让我知道它是如何为您工作的，并随时在 github 上提出问题以考虑将其移至核心。

# opengl - OpenGL md3 模型和着色器

> ID：13544185
> 
> 赞同：0
> 
> 时间：2012-11-24T18:23:58.917
> 
> 标签：opengl, model, shader

我尝试将一些树加载到我的游戏中。

我已经在使用 md3 模型，所以我在这里找到了一些 md3 树模型：[http ://www.custommapmakers.org/wiki/index.php/Models:GR_Trees_set](http://www.custommapmakers.org/wiki/index.php/Models:GR_Trees_set)

单独加载简单模型模型（无纹理）很容易，但是有着色器文件，我不知道应该如何使用它。

我可以得到一些建议如何编写着色器加载器并将纹理分配给树吗？

# java - 编译 Java 连接池类时收到错误消息

> ID：13544190
> 
> 赞同：0
> 
> 时间：2012-11-24T18:24:37.657
> 
> 标签：java, connection-pooling

我做了一个包名**mybundle**。在这里面，我有一个名为**DBConnectionManager.java**的 java 文件。我正在尝试编译此文件，但它给出了错误消息。

**DBConnectionManager.java**

```
package mybundle;

import java.sql.*;
import java.util.*;

public class DBConnectionManager{

private String qry, driver, db, msg;

private Vector connectionPool; 

public DBConnectionManager(){

    this.connectionPool = new Vector();

    driver = "sun.jdbc.odbc.JdbcOdbcDriver";
    db = "jdbc:odbc:db";
    initialize();
}
private void initialize(){
    initializeConnectionPool();
}
private String initializeConnectionPool(){
    while(!checkIfConnectionPoolIsFull()){
        connectionPool.addElement(createNewConnectionForPool());
    }
    msg = "Connection Pool is full..";
    return msg;
}
private boolean checkIfConnectionPoolIsFull(){
    final int MAX_POOL_SIZE = 5;

    if(connectionPool.size() < 5){
        return false;
    }
    return true;
} 
private Connection createNewConnectionForPool(){
    Connection connection = null;
    try{
        Class.forName(driver);
        connection = DriverManager.getConnection(db);
    }catch(Exception ex){}
    return connection;
}
public Connection getConnectionFromPool(){
    Connection connection = null;
    if(connectionPool.size() > 0){
        connection = (Connection)connectionPool.firstElement();
        connectionPool.removeElementAt(0); 
    }
    return connection;
}
public void returnConnectionToPool(Connection connection){
    connectionPool.addElement(connection);

}} 
```

**这是我放置 Tomcat、JDK1.5 和我的包 mybndle 的地方**

我的jdk1.5和tomcat在：

D:\java\jdk1.5

D:\java\tomcat

D:\java\mybundle

**这就是我编译 DBConnectionManager.java 文件的方式**

D:\java\mybundle>设置路径=d:\java\jdk1.5\bin

D:\java\mybundle>javac DBConnectionManager.java

**我收到此错误消息**

```
D:\>cd java

D:\Java>cd mybundle

D:\Java\mybundle>set path=d:\java\jdk1.5\bin

D:\Java\mybundle>javac DBConnectionManager.java

Note: DBConnectionManager.java uses unchecked or unsafe operations.

Note: Recompile with -Xlint:unchecked for details.

D:\Java\mybundle> 
```

我太努力找出问题所在，但徒劳无功。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:27:40.207

您正在使用`Vector`(ew)，它是泛型的，但不提供类型。

如果您`Vector<Connection>`坚持使用`Vector`.

[http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)

也就是说，为什么要编写自己的连接池？

# mysql - 使用连接表中的两个计数编写一个 JOIN 查询

> ID：13544192
> 
> 赞同：3
> 
> 时间：2012-11-24T18:24:49.503
> 
> 标签：mysql, sql

我已经花了几个小时来解决这个问题，但我无法让计数起作用。希望有人能帮忙？！

我有一个项目表和任务表，链接在 project_id 上。我可以通过以下查询获取 project_id、project_name 和 status_id：

```
SELECT 
    a.project_id, 
    a.project_name,
    b.status_id
FROM project_list as a
INNER JOIN task_list as b
ON a.project_id=b.project_id 
```

我想为每个项目选择一条记录，并根据 status_id 添加两个计数字段。在伪代码中：

```
SELECT 
    a.project_id, 
    a.project_name,
    (SELECT COUNT(*) FROM task_list WHERE status_id < 3) as not_completed,
    (SELECT COUNT(*) FROM task_list WHERE status_id = 3) as completed
FROM project_list as a
INNER JOIN task_list as b
ON a.project_id=b.project_id
GROUP BY project_id 
```

我的创建表脚本如下：

```
CREATE TABLE `project_list` (
  `project_id` int(11) NOT NULL AUTO_INCREMENT,
  `topic_id` int(11) DEFAULT NULL,
  `project_name` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`project_id`)
)

CREATE TABLE `task_list` (
  `task_id` int(11) NOT NULL AUTO_INCREMENT,
  `project_id` int(11) DEFAULT NULL,
  `task_name` varchar(45) DEFAULT NULL,
  `status_id` int(11) DEFAULT '0',
  PRIMARY KEY (`task_id`)
) 
```

任何帮助深表感谢。谢谢！

编辑： 答案：

```
SELECT 
    a.project_id, 
    project_name,
    SUM(status_id != 3) AS not_completed,
    SUM(status_id = 3) AS completed,
    SUM(status_id IS NOT NULL) as total
FROM tasks.project_list as a
INNER JOIN tasks.task_list as b
ON a.project_id=b.project_id
GROUP BY a.project_id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:27:54.140

问题在于，在您的子查询中，您正在计算整个表中的所有行，而不仅仅是具有正确`project_id`. 您可以通过修改`WHERE`每个子查询中的子句来解决此问题。

```
(SELECT COUNT(*)
 FROM task_list AS c
 WHERE c.status_id < 3
 AND a.project_id = c.project_id) 
```

然而，更简单的方法是使用`SUM`布尔条件而不是`COUNT`计算匹配条件的行：

```
SELECT 
    a.project_id, 
    a.project_name,
    SUM(b.status_id < 3) AS not_completed,
    SUM(b.status_id = 3) AS completed,
FROM project_list as a
INNER JOIN task_list as b
ON a.project_id = b.project_id
GROUP BY project_id 
```

这是有效的，因为`TRUE`评估为`1`并`FALSE`评估为`0`。

# npoi - NPOI 不评估 3d 公式

> ID：13544193
> 
> 赞同：2
> 
> 时间：2012-11-24T18:24:51.797
> 
> 标签：npoi

我正在使用 NPOI 从 Excel 2003 文件中读取数据。这些文件包含像这样的公式**SUM('1:2'!$C$17)**。NPOI 识别此类公式，例如**SUM('1'!$C$17)**（不带表 2）并评估无效结果。我正在使用 NPOI 示例中的常规代码，例如

```
 foreach (var row in docRows)
            {
                sb.AppendFormat("{0}\t", SomeCode);
                rowCounter += 1;
                sb.AppendFormat("{0}\t", rowCounter);
                foreach (var col in docColumns)
                {
                    ICell cell = sheet.GetRow(row).GetCell(col);

                    sb.AppendFormat("{0}\t", GetExcelCellValue(cell));
                }
                sb.AppendLine();
            }
private string GetExcelCellValue(ICell cell)
        {
            string cellValue = string.Empty;
            IFormulaEvaluator evaluator = _hssfworkbook.GetCreationHelper().CreateFormulaEvaluator();
            evaluator.Evaluate(cell);

            switch (evaluator.EvaluateInCell(cell).CellType)
            {
                case CellType.BLANK:
                    cellValue = string.Empty;
                    break;
                case CellType.BOOLEAN:
                    cellValue = string.Empty;
                    break;
                case CellType.NUMERIC:
                    cellValue = Convert.ToString(cell.NumericCellValue);    //This is a trick to get the correct value of the cell. NumericCellValue will return a numeric value no matter the cell value is a date or a number.
                    break;
                case CellType.STRING:
                    throw new ArgumentNullException();
                    cellValue = cell.StringCellValue;
                    break;
                case CellType.ERROR:
                    cellValue = string.Empty;
                    break;
                case CellType.FORMULA:

                    break;

            }
            return cellValue;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-26T12:54:03.793

我刚刚遇到这个问题，我解决了

```
switch (cell.CellType)
                {
                    case CellType.Blank:
                        cellValue = "";
                        break;
                    case CellType.Boolean:
                        cellValue = cell.BooleanCellValue.ToString();
                        break;
                    case CellType.Formula:

                        cellValue = cell.NumericCellValue.ToString();
                        break;
                    case CellType.Numeric:
                        cellValue = cell.NumericCellValue.ToString();
                        break;
                    case CellType.String:
                        cellValue = cell.StringCellValue;
                        break;
                } 
```

# eclipse - JRE系统库缺少tools.jar

> ID：13544196
> 
> 赞同：6
> 
> 时间：2012-11-24T18:24:54.753
> 
> 标签：eclipse, classpath, java

我正在使用 Ubuntu 12.04（LTS）。在我的 Eclipse 项目中，我需要使用 com.sun.tools.attach 包。但是，我的 JRE 系统库不包含包含该包的 tools.jar 文件。

我尝试为 Java 6 和 7 安装不同的 JRE 和 JDK。我注意到其中一些在他们的 libs 文件夹中有提到的 jar 文件，但是在选择 JRE 时 Eclipse 仍然无法将它包含在我的类路径中。引用 tools.jar 直接解决了这个问题，但由于这是一个共享项目，我不允许修改类路径，因此这对我来说不是一个可行的解决方案。

我的朋友正在使用具有相同版本的 Eclipse 和默认 JRE 的 MAC，并且没有这个问题。我们发现，对他来说，tools.jar 是 classes.jar 的一部分，而我的设置中并非如此（我没有 classes.jar）。

您认为这个问题的根源可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:32:23.590

**问题是 JDK 包含 tools.jar 文件（JRE 都不包含）。**

解决这个问题很容易，您必须为项目或整个工作区指定默认的运行时环境。将其更改为任何已安装的 JDK。

最简单的方法可能是转到*Window --> Preferences --> Java --> Installed JREs*，然后选择 JDK 而不是 JRE。默认情况下，所有项目都使用此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:03:27.880

我在 Ubuntu 12.10 上遇到了完全相同的问题，在我的情况下，通过向我的`PATH`变量添加对当前 Java 二进制文件夹的引用来解决它。

```
PATH="$PATH:/usr/local/java/current/bin" 
```

或者

```
PATH="$PATH:$JAVA_HOME/bin" 
```

只需编辑其中一个`.profile`或`.bash_profile`在您的`/home/<user>`文件夹中进行编辑，就可以了。如果这些文件不存在，只需创建其中一个。

注意：确保您使用的是 JDK 而不是 JRE

# java - 阻止用户返回，但过滤器不起作用

> ID：13544199
> 
> 赞同：3
> 
> 时间：2012-11-24T18:25:04.110
> 
> 标签：java, spring-mvc, back-button

我有一张付款表格。当用户提交表单时，支付过程成功运行，但单击后退按钮会将用户带到相同的表单。我想在成功提交后使表单过期，以防止用户多次付款（以防用户返回并提交表单）。在[阻止用户返回](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)教程之后，我添加了过滤器，但它对我不起作用。我究竟做错了什么？这是我为过滤添加的内容。

```
<filter>
    <filter-name>paymentFilter</filter-name>
    <filter-class>path to PaymentFilter class</filter-class>
</filter>
<filter-mapping>
    <filter-name>paymentFilter</filter-name>
    <url-pattern>/order/*/payment</url-pattern>
</filter-mapping> 
```

我的过滤器类是

```
public class PaymentFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        // TODO Auto-generated method stub          
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        HttpServletResponse httpServletResponse = (HttpServletResponse) response;
        httpServletResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        httpServletResponse.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        httpServletResponse.setDateHeader("Expires", 0); // Proxies.
        System.out.println("In filter");            
    }

    @Override
    public void destroy() {
        // TODO Auto-generated method stub          
    }

} 
```

我添加了一个`System.out.println("In filter")`，但运行页面后在控制台上看不到它的输出（“在过滤器中”）。

当我使用 URL 模式作为控制台上`/*`的打印时，`System.out`

```
<url-pattern>/*</url-pattern> (it works as expected) 
```

但是当我将 URL 模式更改为`/order/*/payment`（* 是订单 ID 时，每个订单会发生什么变化）。然后`System.out`不在控制台上打印任何内容。

```
<url-pattern>/order/*/payment</url-pattern> (it doesn't work) 
```

我正在使用spring mvc、apache、tomcat7.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:20:25.937

正如您已经发现的那样， * 只能是 url 模式的前缀或后缀。这样做的原因是，如果以其他方式定义，则会出现很多歧义。

此外，如果您使用 GET 提交表单，用户总是可以通过点击后退按钮进入结果屏幕。如果您使用 POST，浏览器会说这可能是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:20:17.760

对于您的问题，我有一个替代解决方案。您可以尝试使用 javascript 或 jquery 来禁用后退或前进按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T18:45:19.860

尝试添加

```
chain.doFilter(request, response); 
```

作为 doFilter 方法的最后一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T07:38:59.900

是什么给了我解决问题的方法是我“不能”在我的 url-patter 中使用用户正则表达式进行过滤器映射。* 只能用作后缀或前缀。

# opengl - OpenGL平面未显示

> ID：13544208
> 
> 赞同：2
> 
> 时间：2012-11-24T18:26:01.130
> 
> 标签：opengl, glut

我正在openGL中制作一个粒子喷泉，我的粒子功能正常。我决定添加一架飞机，让它看起来像是从飞机上弹起。我想要得到的是这样的 ![在此处输入图像描述](../Images/83b2f9660f3640293486bd2faa92e34b.png)

不幸的是，我得到的是这个

![在此处输入图像描述](../Images/2feb68a06cf48a45859c2c86efdf7ae3.png)

平原似乎根本没有出现。我尝试弄乱坐标，但这似乎没有任何作用。[这](https://i.imgur.com/kFEkn.png)是我用作纹理的图像，它是 256 X 256 24 位 bmp。

我在 init 函数中加载纹理，然后在渲染粒子之前在以下函数中调用它

```
void Load_Plane(){
    glEnable(GL_BLEND);
    glBlendFunc(GL_ONE_MINUS_SRC_ALPHA, GL_SRC_ALPHA);
    glColor4f(0.0f, 0.2f, 0.2f, 0.5f);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, txPlane);
    glBegin(GL_QUADS);
        glNormal3f(-10.0f, 0.0f, -10.0f);
        glTexCoord2f(0.0f, 0.0f);
        glVertex3f(-10.0f, 0.0f, 10.0f);
        glTexCoord2f(1.0f, 0.0f);
        glVertex3f( 10.0f, 0.0f, 10.0f);
        glTexCoord2f(1.0f, 1.0f);
        glVertex3f( 10.0f, 0.0f, -10.0f);
        glTexCoord2f(0.0f, 1.0f);
        glVertex3f(-10.0f, 0.0f, -10.0f);
    glEnd();
} 
```

完整代码

```
// particle_fountain.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<stdlib.h>
#include <stdio.h>
#include<Windows.h>
#include <time.h>
#include <GL\glut.h>
#include<GL\GLU.h>

#define MAX_PARTICLES 200 //max number of particles
#define MAX_BOUNCE_COUNT 5 //number of times a particle should bounce 
#define MAX_PARTICLE_AGE 95

//Colours
float R = 0.8f;
float G = 0.2f;
float B = 0.0f;
float cR = 0.001f;
float cG = 0.002f;
float cB = 0.003f;
float Size = 0.02f; //size for points
GLuint txParticle;
GLuint txPlane;

struct PARTICLE {
    float X,Y,Z; // Current position
    float sX,sY,sZ; // Current Speed/Movement
    float tX,tY,tZ; // Target Speed/Movement
    float R,B,G; // Particle Colour
    bool Active; // Is particle Active
    int Age; // Age of the particle
    int MaxAge; // Maximum Age before particle dies
    int BounceCount;
} Particles[MAX_PARTICLES];

void Init_Particles();
void Activate_Particles();
void Adjust_Particles();
void Render_Particles();
bool LoadBitmapTexture(char * FileName, GLuint &texid);
void timer(int extra);
void Load_Plane();
void DrawGLscene();
void Reshape(GLsizei w, GLsizei h);

int main(int argc, char** argv){
     glutInit(&argc,argv);
    glutInitDisplayMode( GLUT_RGBA| GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );    
    glutCreateWindow("Particle fountain");

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(-1.0, 1.0, -1.0, 1.0, 1.0, 10.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glTranslatef(0.0, -0.9, -3.0); 

    Init_Particles();
    glutDisplayFunc(DrawGLscene);
    glutTimerFunc(0, timer, 0);
    glutMainLoop();

}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(20, timer, 0);
}

void Load_Plane(){
    glEnable(GL_BLEND);
    glBlendFunc(GL_ONE_MINUS_SRC_ALPHA, GL_SRC_ALPHA);
    glColor4f(0.0f, 0.2f, 0.2f, 0.5f);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, txPlane);
    glBegin(GL_QUADS);
        glNormal3f(-10.0f, 0.0f, -10.0f);
        glTexCoord2f(0.0f, 0.0f);
        glVertex3f(-10.0f, 0.0f, 10.0f);
        glTexCoord2f(1.0f, 0.0f);
        glVertex3f( 10.0f, 0.0f, 10.0f);
        glTexCoord2f(1.0f, 1.0f);
        glVertex3f( 10.0f, 0.0f, -10.0f);
        glTexCoord2f(0.0f, 1.0f);
        glVertex3f(-10.0f, 0.0f, -10.0f);
    glEnd();
}
void DrawGLscene(){
    Load_Plane();
    glPushMatrix();
    glScalef(1.0f, -1.0f, 1.0f);
    Render_Particles();
    glPopMatrix();
    Render_Particles();

}

void Init_Particles(){
    LoadBitmapTexture("./Particle.bmp", txParticle); //load the particle texture 
    LoadBitmapTexture("./Plain.bmp",txPlane); //load the plain texture

    int p;
    srand((int)time(NULL));
    for(p=0; p<MAX_PARTICLES; p++){
        Particles[p].Active = FALSE;
        Particles[p].tX = 0.0f;
        Particles[p].tY = -0.1f;
        Particles[p].tZ = 0.0f;
    }
}

void Activate_Particles(){
    int p;
    for(p=0; p<MAX_PARTICLES; p++){
        if(!Particles[p].Active){
            // Start the particle at 0,0,0 origin
            Particles[p].X = 0.0f;
            Particles[p].Y = 0.0f;
            Particles[p].Z = 0.0f;
            // The following lines set a random speed value
            Particles[p].sX = (((float)((rand() % 100) + 1)) /
                1000.0f) - 0.05f;
            Particles[p].sY = (((float)((rand() % 100) + 50)) /
                500.0f);
            Particles[p].sZ = (((float)((rand() % 100) + 1)) /
                1000.0f) - 0.05f;
            // We also activate the particle
            Particles[p].Active = true;
            // Set it's Age to zero
            Particles[p].Age = 0;
            // We also assign a max age to the particles
            Particles[p].MaxAge = MAX_PARTICLE_AGE;
            // We Also reset the bouncecount to zero
            Particles[p].BounceCount = 0;

            //Adding the colours
            Particles[p].R = R;
            Particles[p].G = G;
            Particles[p].B = B;
            R+=cR;
            G+=cG;
            B+=cB;
            if(R>1.0f){R=1.0f; cR=-cR;}
            if(R<0.0f){R=0.0f; cR=-cR;}
            if(G>1.0f){G=1.0f; cG=-cG;}
            if(G<0.0f){G=0.0f; cG=-cG;}
            if(B>1.0f){B=1.0f; cB=-cB;}
            if(B<0.0f){B=0.0f; cB=-cB;}
            return;
        }
}
}

void Adjust_Particles(){
    int p;
    for(p=0; p<MAX_PARTICLES; p++){
        // We move the speed towards the target speed by 1/20 (5%)
        Particles[p].sX+= (Particles[p].tX - Particles[p].sX) / 20.0f;
        Particles[p].sY+= (Particles[p].tY - Particles[p].sY) / 20.0f;
        Particles[p].sZ+= (Particles[p].tZ - Particles[p].sZ) / 20.0f;
        // Then we adjust the position of
        // the particle by the new speed
        Particles[p].X+= Particles[p].sX;
        Particles[p].Y+= Particles[p].sY;
        Particles[p].Z+= Particles[p].sZ;
        // Now for the bounce code.
        if(Particles[p].Y < 0.0f){
            Particles[p].Y = 0.0f;
            Particles[p].sY = -Particles[p].sY;
            Particles[p].BounceCount++;
            if(Particles[p].BounceCount > MAX_BOUNCE_COUNT){
                Particles[p].Active = FALSE;
            }
        }
        // And finally the age check
        Particles[p].Age++;
        if(Particles[p].Age > Particles[p].MaxAge){
            Particles[p].Active = FALSE;
        }
    }

}

void Render_Particles(){
    Activate_Particles();
    Adjust_Particles();

    glClear( GL_COLOR_BUFFER_BIT );

    int p;
    // Enable textures and bind our particle texture
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, txParticle);
    // Disable Depth testing.
    glDisable(GL_DEPTH_TEST);
    // Enable blending
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_COLOR,GL_ONE);
    for(p=0; p<MAX_PARTICLES; p++){
        if(Particles[p].Active){
            glColor4f(Particles[p].R,
                Particles[p].G,
                Particles[p].B, 1.0f);
            glPushMatrix();
            glTranslatef(Particles[p].X,
                Particles[p].Y,
                Particles[p].Z);
            glBegin(GL_QUADS);
            glNormal3f(0.0f, 0.0f, 1.0f);
            glTexCoord2f(0.0f, 0.0f);
            glVertex3f(-Size, -Size, 0.0f);
            glTexCoord2f(1.0f, 0.0f);
            glVertex3f(Size, -Size, 0.0f);
            glTexCoord2f(1.0f, 1.0f);
            glVertex3f(Size, Size, 0.0f);
            glTexCoord2f(0.0f, 1.0f);
            glVertex3f(-Size, Size, 0.0f);
            glEnd();
            glPopMatrix();

        }
    }
     glEnable(GL_DEPTH_TEST);
     glutSwapBuffers();
}

bool LoadBitmapTexture(char * FileName, GLuint &texid){
    HBITMAP hBMP; // Handle Of The Bitmap
    BITMAP BMP; // Bitmap Structure
    glGenTextures(1, &texid); // Create The Texture
    hBMP=(HBITMAP)LoadImage(GetModuleHandle(NULL),
        FileName,
        IMAGE_BITMAP, 0, 0,
        LR_CREATEDIBSECTION | LR_LOADFROMFILE
        );

    if (!hBMP) // Does The Bitmap Exist?
        return FALSE; // If Not Return False
    GetObject(hBMP, sizeof(BMP), &BMP); // Get The Object
    // hBMP: Handle To Graphics Object
    // sizeof(BMP): Size Of Buffer For Object Information
    // &BMP: Buffer For Object Information
    glPixelStorei(GL_UNPACK_ALIGNMENT, 4);
    // Pixel Storage Mode (Word Alignment / 4 Bytes)
    // Typical Texture Generation Using Data From The Bitmap
    glBindTexture(GL_TEXTURE_2D, texid);// Bind To The Texture ID
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
        GL_LINEAR); // Linear Min Filter
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
        GL_LINEAR); // Linear Mag Filter
    glTexImage2D(GL_TEXTURE_2D, 0, 3, BMP.bmWidth, BMP.bmHeight,
        0, GL_BGR_EXT, GL_UNSIGNED_BYTE, BMP.bmBits);
    DeleteObject(hBMP); // Delete The Object
    return TRUE; // Loading Was Successful
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:37:02.477

可能是您没有清除深度缓冲区。

它不会影响任何粒子，因为您在渲染它们时禁用了深度测试，但是当您渲染平面时，深度测试已启用，并且由于尚未清除深度缓冲区，因此它有一个 spaz 并且不渲染飞机。

做

```
glClear(GL_DEPTH_BUFFER_BIT); 
```

在渲染平面以清除深度缓冲区之前。

编辑：这一定是它-

你在打电话

```
glClear(GL_COLOR_BUFFER_BIT); 
```

*渲染飞机*后。*看看你的 DrawGLScene 函数：*

 *```
Load_Plane(); // you are drawing the plane here
glPushMatrix();
glScalef(1.0f, -1.0f, 1.0f);
Render_Particles(); // this function calls "glClear( GL_COLOR_BUFFER_BIT );"
// so anything that you rendered before is now removed.
glPopMatrix();
Render_Particles(); // same goes for here. 
```

解决方案是从 Render_Particles 函数中删除对 glClear 的调用，并将其添加到 DrawGLScene 的顶部：

（新的 DrawGLScene 代码）

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
Load_Plane();
glPushMatrix();
glScalef(1.0f, -1.0f, 1.0f);
Render_Particles();
glPopMatrix();
Render_Particles(); 
```

编辑＃2：

您在 Render_Particles 函数中调用 glutSwapBuffers。不要在那里调用它。在 DrawGLScene 结束时调用它：*

# ruby-on-rails - 使用 has_secure_password 进行 Rails 身份验证

> ID：13544209
> 
> 赞同：2
> 
> 时间：2012-11-24T18:26:03.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

如何使用 rails 3 has_secure_password 创建会话？我已经查看了[http://guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)。

而且没有一个是真正具体的。我必须使用会话方法吗？什么是社区标准？我不想使用 Devise/Cancan。我只需要基于 cookie 的简单授权/身份验证。

我应该将用户对象存储在 cookie 中吗？
密码会容易受到攻击吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:39:28.893

查看 Michael Hartl 在第 8 章的教程。他很好地解释了使用 has_secured 的实现

[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

基本上，您的用户模型中需要一个密码字段和一个密码确认字段和一个密码摘要字段。通过在模型中调用 has_secure_password，只要密码确认有效，就会生成一个 password_digest。您可以通过检查在会话控制器中登录用户：

```
if user and user.authenticate(password)
  // sign_in_user
else
  // return error message
end 
```

在您的模型字段中还需要一个 remember_token 来识别 cookie 中的用户。您可以在身份验证时返回 remember_token 并将其设置为 rails 中的会话函数，例如：

```
user = User.find_by_email(email)
session[:remember_token] = user.remember_token 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:46:49.010

如果你有钱可以花钱，Railscasts Pro 在第 250 集修订版中使用 has_secure_password 详细介绍了这一点，[从头开始验证（修订版）](http://railscasts.com/episodes/250-authentication-from-scratch-revised)

* * *

还有一个稍旧的免费截屏视频版本，包括详细的[ASCIIcast](http://railscasts.com/episodes/250-authentication-from-scratch?view=asciicast)。会话部分可能对您阅读或观看有用。

# python - mod_wsgi 配置问题

> ID：13544210
> 
> 赞同：4
> 
> 时间：2012-11-24T18:26:14.647
> 
> 标签：python, windows, apache, wamp, mod-wsgi

`mod_wsgi`在 WAMP Server w/Apache 2.2 中设置模块时，我遇到了一些问题。`mod_wsgi-win32-ap22py27-3.3.so`我从[官方谷歌代码页](http://code.google.com/p/modwsgi/downloads/list)下载了这个文件。

在`C:\wamp\bin\apache\apache2.2.22\modules`将文件重命名为`mod_wsgi.so`.

然后我在加载模块部分中添加了以下行：

```
LoadModule wsgi_module modules/mod_wsgi.so 
```

当我重新启动 Apache 服务器时，它没有运行。当我检查windows服务事件日志时，我发现了以下错误。

```
The Apache service named  reported the following error:
>>> httpd.exe: Syntax error on line 128 of C:/wamp/bin/apache/apache2.2.22/conf/httpd.conf: Cannot load C:/wamp/bin/apache/apache2.2.22/modules/mod_wsgi.so into server: The Apache service named is not a valid Win32 application. 
```

我正在使用带有 Python 2.7 和 Apache 2.2 的 Windows 7 Premium。

请告诉我我可能会出错的地方。

# xcode - 在 Mac 上编译 OpenGL 错误：架构 x86_64 的未定义符号：

> ID：13544211
> 
> 赞同：1
> 
> 时间：2012-11-24T18:26:32.323
> 
> 标签：xcode, opengl, compilation

我正在尝试使用 Xcode 在 Mac 上编译一个简单的 OpenGL 代码。以前我用过Windows。我遇到了一些我真的不知道的错误。有人可以帮助解决。

```
#include <iostream>
#include <vector>
#include <math.h>
using namespace std;
#include <OpenGL/gl.h>
#include <OpenGL/glu.h>
#include <OpenGL/OpenGL.h>
#include <GLUT/glut.h>

void display (void)
{
    glColor3f ( 1.0, 1.0, 1.0 );

    float angles[20] = {     30.0,45.0,60.0,75.0,90.0,105.0,120.0,135.0,150.0,165.0,180.0,195.0,210.0,225.0,240.0,255.0,270.0,285.0,300.0 };

int i; float xOut, yOut, xIn, yIn; const float pi = 3.141592;
for ( i = 0; i == 19; i++ )
{
    float angle = angles[i]*pi/180.0;
    glBegin ( GL_LINE );
    xOut = 12 * sinf(angle);
    yOut = 12 * cosf(angle);
    xIn  =  9 * sinf(angle);
    yIn  =  9 * cosf(angle);
    glVertex3f ( xOut, yOut, 0.0);
    glVertex3f (  xIn,  yIn, 0.0);
    glEnd();

}

glutSwapBuffers();
}

void initializeWindow (void)
{

glClearColor (0.0, 0.0, 0.0, 0.0);
glClear (GL_COLOR_BUFFER_BIT);

glMatrixMode ( GL_PROJECTION );
glLoadIdentity ( );
glOrtho ( -100.0, 100.0, -100.0, 100.0, -1.0, 1.0);

}

int main(int argc, char** argv)
{
glutInit ( &argc, argv );
glutInitDisplayMode ( GLUT_DOUBLE | GLUT_RGB );
glutInitWindowSize ( 500, 500 );
glutInitWindowPosition ( 100, 100 );
glutCreateWindow ( "PrimaryFlightDisplay" );

initializeWindow ();

glutDisplayFunc ( display );

glutMainLoop ();

return 0;

} 
```

当我在终端中使用编译时出现这些错误

```
gcc -o main main.cpp -framework GLUT -framework OpenGL

"std::ios_base::Init::Init()", referenced from:
__static_initialization_and_destruction_0(int, int)in cczuL03z.o
"std::ios_base::Init::~Init()", referenced from:
___tcf_0 in cczuL03z.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:55:20.457

使用“g++”而不是“gcc”。这将链接到 C++ 运行时。

# c++ - 头文件中的静态数组 - C++

> ID：13544213
> 
> 赞同：2
> 
> 时间：2012-11-24T18:26:34.937
> 
> 标签：c++

如何在我的头文件中创建一个静态数组？我查看了一些关于 stackoverflow 的示例，但无法让它们工作。

谢谢！

```
#ifndef DRUMKITLIBRARY_H_
#define DRUMKITLIBRARY_H_

class DrumKitLibrary
{
public:
    static const char* const list[] = {"zip", "zam", "bam"};
};

#endif /* DRUMKITLIBRARY_H_ */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:35:23.270

您的编译器错误正在发生，因为这不是您初始化静态数据的方式（好吧，静态 const 整数类型可以这样初始化，仅此而已）。你只在类定义中声明你的静态数据，你在类之外定义它。但是，您仍然有一个可能的问题。

在头文件中定义静态数据的问题是每个包含该头文件的文件都有自己的数组副本。通过在标头中*声明*它并在实现文件中*定义*它会更好地为您服务。

```
// A.h
class A {
public:
    static const char *f[];
};

// A.cpp
#include "A.h"

const char *A::f[] = { "one", "two" }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:28:33.927

你没有。

您在标头中声明它并在源中定义它。

# spring-mvc - Spring-mvc 组件扫描和视图控制器一起不起作用

> ID：13544217
> 
> 赞同：2
> 
> 时间：2012-11-24T18:27:20.347
> 
> 标签：spring-mvc

以下是我的**application-context.xml**

```
<context:component-scan base-package="org.godfather"></context:component-scan>
<mvc:view-controller path="/main.do" />
<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
      <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
      <property name="prefix" value="/WEB-INF/" />
      <property name="suffix" value=".jsp" />
</bean> 
```

问题：如果我注释掉，`<mvc:view-controller path="/main.do" />`则`http://localhost:8181/tiles-app-1.1.1/header.do`url 有效，但如果没有注释掉，则 url 无效，`No mapping found for HTTP request with URI [/tiles-app-1.1.1/header.do] in DispatcherServlet with name 'mytiles'`为什么会这样？

**Web.xml**

```
 <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/application-context.xml
    </param-value>
</context-param>  

<servlet>
    <servlet-name>mytiles</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/application-context.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>mytiles</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

**控制器**

```
package org.godfather;
@Controller
public class AppointmentController {

@RequestMapping("/header")
public void get() {
    System.out.println("get()");
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:28:15.017

您将相同的 Spring Bean 定义文件 ( `/WEB-INF/application-context.xml`) 传递给`ContextLoaderListener`和`DispatcherServlet`.

`DispatcherServlet`应该有自己的 Spring Bean 定义文件

看到[这个问题](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)。所有 Spring MVC 控制器和特定的 MVC xml 都应该在不同的文件中。

# php - vBulletin：检查用户是否从外部读取线程

> ID：13544221
> 
> 赞同：0
> 
> 时间：2012-11-24T18:27:45.587
> 
> 标签：php, vbulletin

有什么方法可以检查登录的用户是否阅读了某个线程？我目前正在使用一个单独的网页（在论坛软件之外），我需要在其中检查用户是否已登录以及该用户是否已阅读某个主题。我已经通过要求 global.php 来检查用户是否登录，但我不确定如何检查用户是否阅读了该线程。

我在这个网页上使用 PHP，最好坚持使用它（这应该不难，因为 vBulletin 是用 PHP 构建的）

编辑：使用 vBulletin 4.2.0

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:08:39.617

我设法通过使用and`contentread`的双 WHERE 子句读取表来做到这一点。`userid``contentid`

```
$userid = $vbulletin->userinfo[userid];
$chkthread = mysql_query("SELECT * FROM contentread WHERE userid = '$userid' AND contentid = 1");
$chkthr = mysql_num_rows($chkthread);
if($chkthr < 1){
} 
```

# language-agnostic - 你怎么能处理荒谬的大数字？

> ID：13544225
> 
> 赞同：4
> 
> 时间：2012-11-24T18:28:03.660
> 
> 标签：language-agnostic, bigdata, largenumber

在某些情况下，程序员需要或想要找到非常大的数字。它们通常很大，以至于无法理解程序员的理解。我说[的是最大的已知素数](http://primes.utm.edu/largest.html#largest)（有 12978189*位*）和最近计算的[10 万亿位 pi](http://www.numberworld.org/misc_runs/pi-10t/details.html)。

您如何创建处理这些问题的程序？这远远超过了整数、long、double、BigInteger、BigDecimal 或任何类似的东西。这些用于发现这些数字的程序是如何创建的？当不存在合适的数据类型时，你怎么能将它们存储在内存中，并且它们每个都可能消耗*千兆字节*的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:35:13.950

要解决您的具体示例：

*   对于一个典型的“大整数”类来说，一个 1200 万位的整数并不是特别大。这应该能够存储在内存中。

*   要存储 10 万亿位的 π，您可以使用磁盘文件并对其进行*内存映射*。你需要一个 64 位操作系统和应用程序，但你可以简单地在磁盘上创建一个 10 TB 的文件（你可能需要一些磁盘和像[ZFS](https://en.wikipedia.org/wiki/ZFS)这样可以跨磁盘存储它的文件系统），并将其映射到 CPU 地址空间。计算 π 的算法（例如[BBP](https://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)）方便地一次计算一个十六进制数字，这很适合半字节的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T05:42:41.850

（抽象的）答案是使用机器的本机类型编写算法，以产生您想要的结果。例如，当您在纸上对两个非常大的整数进行手动加法时，您需要的最大实际计算量仅为 9+9+1（进位为 9 加 9 加 1）。当然，你需要足够大的纸来首先写下这两个数字，然后再写下答案。因此，只要两个数字和答案可以存储在计算机的硬盘（论文）中，就可以编写一个算法来处理只需要一个高达 19 的值的变量；因此，即使是`char`变量也能够处理这个问题，更不用说`int`变量了。

（具体的）答案是，真正优秀的程序员已经这样做了，甚至还有 FOSS 库。一个很好的是 GNU 项目的[GMP 库](https://gmplib.org/)，它有很多函数来处理任意大小的整数运算和任意精度的浮点运算。所以只要你的电脑能存储计算时需要的信息，就可以完成。当然，您需要花时间阅读文档。

# iphone - UITableViewController 拉动以冻结标题刷新

> ID：13544226
> 
> 赞同：4
> 
> 时间：2012-11-24T18:28:08.090
> 
> 标签：iphone, ios, objective-c, uitableview, pull-to-refresh

我有一个看起来像这样的模型：

![样机1](../Images/1710bf002e94d90ab5f2cf474a72f895.png)

这是一个可以滚动的大表格控制器。

当节标题到达页面顶部时，它会沿顶部冻结，如下所示：

![样机2](../Images/a5ea27c36a409eaa8b070b607555c70a.png)

哪个工作正常。但是，当您返回顶部并拉动刷新时，我希望它这样做：

![在此处输入图像描述](../Images/246c2e6b02996940ca0a7766fc21ef49.png)

因此，在顶部表格标题单元格和部分标题（不再冻结）之间出现了拉动刷新对话框。

这可能吗？我在搜索中没有找到这样的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:10:33.843

您可以执行以下操作来实现此目的，

1.  添加一个`UIScrollView`作为视图的子`UIViewController's`视图。
2.  添加一个`UIView`and`UITableView`作为这个滚动视图的子视图
3.  `UIView`内部滚动视图代表表格标题单元格。
4.  部分标题可以是标题，`UITableview`表格内容代表`UITableView's`单元格。
5.  添加`UIRefreshControl`为子视图`UITableView`并设置其目标方法。
6.  `- (void)scrollViewDidScroll:(UIScrollView *)scrollView`为`UITableview`和实现滚动视图委托`UIScrollview`。
7.  当您滚动表格视图时，只要表格视图标题向上移动，直到标题到达顶部，就移动父滚动视图。在滚动视图委托中添加一个 if 条件来检查这一点。
8.  当表格视图向下移动时，移动父滚动视图直到`UIView`表格单元格标题在此停止滚动后可见，`UIScrollview`并允许表格视图滚动。这将启用`UIRefreshControl`.

这里的关键是`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`方法以及如何实现滚动。您可以添加一个检查`contentOffset`以确定滚动了多少表视图和滚动视图。为了限制滚动，您可以在此委托方法中手动将此值设置为特定值，之后它将不会滚动。

# vb.net - 为什么我为 Xbox 360 控制器的一个轴都进行了编码时，只有一个轴可以工作？(VB.Net)

> ID：13544233
> 
> 赞同：1
> 
> 时间：2012-11-24T18:28:46.950
> 
> 标签：vb.net, xna, joystick, gamepad

首先，我想指出我是一个极端的新手，我担心我可能会在这里不知所措。我的问题在于试图让 Xbox 360 控制器的左操纵杆控制每个轴上的单独功能。目前我正在尝试对控制器进行编码，以便它将以变速控制 Phidg​​et 电机控制器的输出。我已经设法构建了我的代码，以便 Y 轴可以毫无问题地控制前进速度，但是如果我尝试单独编写 X 轴代码，以不同的方式移动电机，它就不起作用了。没有错误，只是没有发送到 Phidg​​et。

我发现我可以让 X 轴按我的意愿工作，但只有当我删除 Y 轴的代码时。似乎一个在那里，另一个不想，好像它一次只注册一个轴。除此之外，我发现它工作正常并且没有任何问题。我还应该提到，我有一些标签可以显示两根棍子的当前位置，它们可以完美地工作，没有任何障碍。任何帮助将不胜感激！谢谢！

```
Imports Microsoft.Xna.Framework
Imports Microsoft.Xna.Framework.Input
Public Class Form1
Dim WithEvents MC1 As Phidget21COM.PhidgetMotorControl

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    MC1 = New Phidget21COM.PhidgetMotorControl
    MC1.Open(15100)
    MC1.WaitForAttachment(3000)

    If MC1.IsAttached = True Then
        PhidStat.Text = "Phidget Attached!"
    Else
        PhidStat.Text = "No Phidget Found"
    End If

    JoyConnect.Text = ""
    Threading.Thread.Sleep(1000)
    If GamePad.GetState(PlayerIndex.One).IsConnected = True Then
        JoyConnect.Text = "Controller Connected!"
    Else
        JoyConnect.Text = "Not Connected. :("
    End If

End Sub

Private Sub Controller()
    Dim LX As String
    Dim RX As String
    Dim LY As String
    Dim RY As String

    'Left Joystick
    LX = GamePad.GetState(PlayerIndex.One).ThumbSticks.Left.X * 100 'Negetive value = Left, Positive = Right
    LX1.Text = LX
    If LX < 0 Then
        MC1.Velocity(0) = LX
        MC1.Velocity(1) = -1 * LX
    End If
    If LX > 0 Then
        MC1.Velocity(0) = LX
        MC1.Velocity(0) = -1 * LX
    End If

    LY = GamePad.GetState(PlayerIndex.One).ThumbSticks.Left.Y * 100
    LY1.Text = LY
    MC1.Velocity(0) = LX
    MC1.Velocity(1) = LX

    'Right Joystick
    RX = GamePad.GetState(PlayerIndex.One).ThumbSticks.Right.X * 100
    RX1.Text = RX

    RY = GamePad.GetState(PlayerIndex.One).ThumbSticks.Right.Y * 100
    RY1.Text = RY

End Sub

Private Sub Timer1_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Controller()
End Sub
End Class 
```

还有一件事。电机控制器旨在控制用于飞行 ROV 的电机。当左摇杆向左移动时（负值），电机 0 反向移动，电机 1 向前移动做一种“点转”，反之亦然，左摇杆向右移动。此外，y 轴同时控制正向或反向。

# php - 使用 PDO 将数据插入 mysql 数据库表 - 不插入数据

> ID：13544235
> 
> 赞同：0
> 
> 时间：2012-11-24T18:29:14.657
> 
> 标签：php, mysql, insert, pdo

我'连接到数据库'。表中没有数据，并且 $result 没有回显任何内容。即使我'连接到数据库'，错误如下：

```
SQLSTATE[3D000]: Invalid catalog name: 1046 No database selected 
```

我已经阅读了相关的帖子，没有运气。

```
<?php
include("/directory outside of html/db.php");

try {
    $dbh = new PDO("mysql:host=$host;database=$database", $username, $password);
    /*** echo a message saying we have connected ***/
    echo 'Connected to database';
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
//try to insert data
$fname = 'BOB';
$lname = 'JONES';
$email = 'me@mymail.com';
$phone = '410-310-3456';
$resident = TRUE;
$age = '25=30';
$zip = '23456';
$result = FALSE;

  $stmt = $dbh->prepare('INSERT INTO volunteers
  (
   lname,
   fname,
   email,
  )

VALUES
  (
    :lname,
    :fname,
    :email,
  )');

 $result = $stmt->execute(array(
    ':lname' => $lname,
    ':fname' => $fname,
    ':email' => $email,
  ));

echo $result;   

//catch any errors from try()
    }
    catch(PDOException $e)
    {
    echo $e->getMessage();
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:32:27.530

使用`dbname=`代替`database=`，像这样：

```
$dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password); 
```

或者，您可以稍后使用 选择不同的数据库`USE`，如下所示：

```
$dbh->query("use newdatabase"); 
```

# c# - 使用 C# 在表单之间传递数据的最佳方式

> ID：13544236
> 
> 赞同：1
> 
> 时间：2012-11-24T18:29:21.480
> 
> 标签：c#, winforms, global-variables, parameter-passing

这更像是一个基于理论的问题。我正在为我的最后一个 C# 项目进行设计，即创建 Jeopardy。我的问题是，在它们之间传递数据的最佳方式是什么？例如，规则要求游戏在启动画面显示后打开一个选项屏幕。在这里，他们将选择玩家的数量和他们的名字。我知道在我的游戏表单加载事件中，我可以将这些东西指定为参数并将它们作为参数从选项表单传递。不过，这似乎很混乱，是否有一种更有效的方法来创建项目范围的变量，无论我当前使用的形式如何，我都可以引用这些变量？

感谢您的任何答案，它总是很感激！

-- 年轻学徒编码员

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T19:15:50.543

如何使用静态属性或单例模式创建一个单独的业务对象（即类）。然后，您可以将所有应用程序值存储在那里，您可以从应用程序中的任何位置引用它们，而无需在各处传递变量的繁琐工作。

# actionscript-3 - AS3 以模式生成敌人

> ID：13544237
> 
> 赞同：0
> 
> 时间：2012-11-24T18:29:27.493
> 
> 标签：actionscript-3, flash

我正在用 Flash 制作游戏，但我遇到了一些我无法解决的问题：S

假设敌人从左到右生成，假设我们有 3 种类型的敌人。

现在我只写了一个 for 循环来生成每种类型的敌人数量并将它们放置在垂直尺度上的随机位置 (Math.random()*stage.stageWidth)

现在，如果您重新开始游戏，有时会发生相互交叉的敌人加上波浪永远不会相同的情况。

我正在考虑制作像 EnemyContainer 这样的 MovieClip 并手动将敌人放置在编队或图案中然后控制它们的方法。

问题是我的 Enemy 类构造函数使用了对舞台和速度等的引用等参数，如果我只是将我的对象放在影片剪辑中，我会得到错误，因为那时我无法定义舞台。

有谁知道如何用图案制作敌人的波浪？

这是 Enemy 的构造函数：

```
public function Enemy(stageRef:Stage, firerate:Number=1000, speed:Number=1) { 
```

如您所见，它需要 3 个 args，但是当在 EnemyContainer 影片剪辑中放置敌人的影片剪辑时，我有一个错误，因为您无法定义舞台。

此外，我不确定制作一个带有敌人图案的巨型电影剪辑的想法是否是正确的方法。

另一件事是我的不同敌人类型在不同帧上的一个 MovieClip 敌人中，如果我将它们放在一个影片剪辑中，我也无法控制它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:05:56.790

没关系，我认为我找到了正确的方法。

问题是我将敌人的对象添加到 EnemyContainer 中。

现在我只需添加一些虚拟 MovieClip 并使用 for 循环遍历 EnemyContainer 的所有子项，并使用子项的位置创建 Enemy。

像这样：

```
public function createEnemyFromContainer():void {
        enemyContainer = new EnemyContainer();
        //stage.addChild(enemyContainer);
        for (var i=0; i<enemyContainer.numChildren; i++) {
            var _tempEnemy_mc:Enemy = new Enemy(stage,1000,0.2+Math.random()*0.3);;

            stage.addChild(_tempEnemy_mc);

            _tempEnemy_mc.x = enemyContainer.getChildAt(i).x;
            _tempEnemy_mc.y = enemyContainer.getChildAt(i).y;
            _tempEnemy_mc.gotoAndStop("tank");
            _tempEnemy_mc.enemyCanon.gotoAndStop("tank");

            enemyObjectsArray.push(_tempEnemy_mc);
        }
    } 
```

# azure - 为什么我的 Azure 站点不断下降？

> ID：13544238
> 
> 赞同：7
> 
> 时间：2012-11-24T18:29:37.463
> 
> 标签：azure, cloud-hosting

我正在测试 Microsoft 的 Azure 云平台并托管两个要求非常低的网站。一个是简单的单一表单 MVC 网站，它简单地接受用户的一些输入，执行一些计算，然后输出一个输出。第二个类似，但它对 Azure SQL Server 实例执行简单查询。

这两个网站都在不断地下降。似乎正在发生的事情是，如果我有一段时间（可能一个小时左右）没有访问该网站，GET 请求就会失败。服务器不会返回任何内容。如果我等一两分钟再试一次，该网站运行良好。

任何人都知道发生了什么或我该如何解决？如果可靠性这么低，我显然无法在这个平台上托管网站......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T20:52:35.583

Windows Azure 网站使用冷（非活动）和热（活动）站点的概念，这意味着只要网站具有活动连接，它就会是热或活动的，并且在一些默认时间之后，当网站没有任何活动连接时，它就会进入冷或非活动站点模式。与同一站点建立新连接后，站点将从非活动（冷）模式唤醒到活动（暖）模式，并取决于需要在网站上呈现什么样的内容，可能需要几秒钟才能完成启动过程。**[这里](http://channel9.msdn.com/Events/TechEd/Europe/2012/AZR305)**描述了温暖和寒冷站点的概念。

从技术上讲，如果第一个 GET 请求立即返回一个冷网站，它将失败，但是此调用确实使该站点处于活动状态，并且下一个请求将导致成功。

有一个 SO 讨论，其中索引页面必须连接到 DB 以获取数据，并且因为到 DB 的连接时间更长，这导致整体启动时间比预期的要长。因此，从寒冷到温暖的过渡可能有多种原因，您可以**[联系 Windows Azure 网站团队](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/threads)**来检查为什么会出现这种情况。

# algorithm - 在树中找到最大独立集的算法

> ID：13544240
> 
> 赞同：15
> 
> 时间：2012-11-24T18:29:53.620
> 
> 标签：algorithm, tree, independent-set

我需要一种算法来找到树中的最大独立集。我想从所有叶子节点开始，然后删除这些叶子节点的直接父节点，然后选择我们删除的父节点的父节点，递归地重复这个过程，直到我们到达根节点。这是在 O(n) 时间内完成的吗？任何答复表示赞赏。谢谢。

谁能给我一个算法来找到树中的最大支配集。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-24T19:52:58.543

## 最大独立集

您可以通过深度优先搜索树来计算最大独立集。

搜索将为图中的每个子树计算两个值：

1.  A(i) = 以 i 为根的子树中最大独立集的大小，约束条件是节点 i 必须包含在集合中。
2.  B(i) = 以 i 为根的子树中最大独立集的大小，限制为节点 i 不得包含在集合中。

这些可以通过考虑两种情况递归计算：

1.  不包括子树的根。

    B(i) = sum(max(A(j),B(j)) for j in children(i))

2.  包括子树的根。

    A(i) = 1 + sum(B(j) for j in children(i))

整棵树中最大独立集的大小为max(A(root),B(root))。

## 最大支配集

根据[维基百科中支配集的定义，](http://en.wikipedia.org/wiki/Dominating_set)最大支配集总是微不足道地等于包括图中的每个节点——但这可能不是你的意思？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-05T13:06:26.853

简单快速的方法：

只要图不为空，就迭代地将一个叶子 v（度数为 1）添加到独立集 V 中，并删除 v 及其邻居。

这应该有效，因为

*   一棵树总是有一个度为 1 的顶点，

*   向 V 添加一个度数为 1 的顶点可以保持最优性，并且

*   这一步骤的结果再次给出了一棵树或一片森林，它是树木的联合体。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-19T04:33:59.507

*   为了找到最大的独立顶点集，我们可以使用树的一个重要属性：每棵树都是二分树，即我们可以只使用两种颜色为树的顶点着色，这样没有两个相邻的顶点具有相同的颜色。

*   进行 DFS 遍历并开始用黑色和白色为顶点着色。

*   选择数量更多的一组顶点（黑色或白色）。这将为您提供树的最大独立顶点集。

为什么这个算法有效背后的一些直觉：

*   让我们首先重新审视最大独立顶点集的定义。我们必须只选择一条边的一个端点，并且我们必须覆盖满足这个属性的树的每一条边。我们不允许选择边的两个端点。

*   现在图的双色有什么作用？它只是将一组顶点分成两个子集（WHITE 和 BLACK），而 WHITE 彩色顶点直接连接到 BLACK 顶点。因此，如果我们选择全白或全黑，我们本质上是在选择一组独立的顶点。因此要选择最大独立集，请选择大小较大的子集。

# ruby - 无需插件即可在 Jekyll 中生成站点地图

> ID：13544241
> 
> 赞同：15
> 
> 时间：2012-11-24T18:29:53.797
> 
> 标签：ruby, jekyll, github-pages

我刚刚把我的整个博客从 WordPress 转移到了 Jekyll。仍然有一些需要修复的部分，但我现在正面临这个问题。我无法在 Jekyll 中生成站点地图。我看到有几个插件可以为我完成工作。

网站信息：

*   通过 Github 页面托管的网站
*   整个网站手工编码 - 不使用 JB 或 Octopress

如果你能得到一些关于如何做所需的指示，那就太好了。

*注意：这个问题与它的前辈不同。我不是在寻找使用`_site`.*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-26T14:03:20.680

正如[本文中](http://lucidservices.com/2013/09/19/jekyll-generate-sitemap-without-plugin/)[John Day](https://plus.google.com/101564944126670501886/posts)所解释的，您可以使用以下内容在站点的根目录中创建一个文件：`sitemap.xml`

```
---
layout: nil
title : "Sitemap"
sitemap_exclude: y
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    {% for post in site.posts %}
    <url>
        <loc>{{site.production_url}}{{ post.url | remove: 'index.html' }}</loc>
    </url>
    {% endfor %}

    {% for page in site.pages %}
    {% if page.sitemap_exclude != 'y' %}
    <url>
        <loc>{{site.production_url}}{{ page.url | remove: 'index.html' }}</loc>
    </url>
    {% endif %}
    {% endfor %}
</urlset> 
```

在中，定义一个以站点的完整基本 URL`_config.yml`命名的变量（例如）。`production_url``http://example.com`

如果您想从站点地图中排除任何链接，请`sitemap_exclude: y`在页面或帖子的前面添加。

有关更高级的示例，请参阅这篇文章：[使用 Jekyll 构建更好的 Sitemap.xml](http://davidensinger.com/2013/11/building-a-better-sitemap-xml-with-jekyll/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-28T03:23:37.957

您可以在站点根目录中创建一个名为“sitemap.xml”的新文件，并在该页面中使用流动标签来遍历所有页面并发布提取必要数据的帖子。假设您只想生成一个页面，该页面以符合适当标准的 xml 格式列出站点上的每个页面，这似乎很容易完成这项工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-24T18:17:23.393

刚刚遇到这个是因为我的网站托管在 github-pages 上。似乎github页面现在支持这一点。

只需添加到 _config.yml：

```
gems:
  - jekyll-sitemap 
```

（您可以选择添加到您的 Gemfile 中，但我的已通过依赖项包含在内）

（有趣的事实：github页面也支持jekyll-redirect-from）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T13:44:32.537

如果不使用插件，您无法在 jekyll 中自动生成完整的站点地图。

您可以做的是制作自己的 ruby​​（或其他）脚本，将站点地图生成为 JSON 数据，然后将其插入到您的 config.yml 中。从那里您可以从 jekyll 访问该数据并显示它。

但是没有内置的方法可以仅使用 jekyll 来做到这一点。

# struts2 - Struts 2 Xml 验证：对多个字段进行一组验证

> ID：13544242
> 
> 赞同：0
> 
> 时间：2012-11-24T18:30:09.300
> 
> 标签：struts2, struts, struts-validation

我有很多数字字段，比如说 num1、num2 ... 现在我正在寻找可以在所有字段上应用一组验证的方法，而不是多次编写相同的验证。

这是 requiredString 和 Number 检查的两个验证集

```
<validators>
        <field name="num1">
            <field-validator type="requiredstring">
                <message>Field cannot be left blank</message>
            </field-validator>

            <field-validator type="regex" short-circuit="true">
                <param name="expression"><![CDATA[^[0-9]+$]]></param>
                     <message>Not a valid Number</message>
             </field-validator>
        </field>

</validators> 
```

蒂亚

# c++ - 在 C++ 中读取直到文件末尾

> ID：13544245
> 
> 赞同：5
> 
> 时间：2012-11-24T18:30:48.600
> 
> 标签：c++, file

我正在尝试读取从 C 转换为 C++ 的电话簿应用程序的文件末尾。当我从文件中打印结果时，我得到了这个：

```
johnny smith
(Home)3
(Cell)4
x☺&gt; x☺&gt;
(Home)4
(Cell)4 
```

它应该打印：

```
johnny smith
(Home)3
(Cell)4 
```

现在我正在使用`while(!infile.eof())`我读过的一个不好的做法，但是当我使用时，`infile.getline()`我会重复名字和姓氏，并且格式都被抬高了。无论如何（或另一种方式）来摆脱输入末尾的垃圾或另一种在 C++ 中读取到文件末尾的方式来解决这个问题。我一直在阅读不同的解决方案，但很多网站似乎都同意的是`fgets`，这是我在原始 C 版本中所拥有的，但显然`fgets`不适`ifstream`用于我正在使用的。这是代码：

```
void contacts:: readfile(contacts*friends ,int* counter, int i,char buffer[],char    user_entry3[])
{
   ifstream read;
   read.open(user_entry3,ios::in);
   int len;
   contacts temp;
   *counter=0;
   i=0; 

     while (!read.eof()) { 
       temp.First_Name=(char*)malloc(36); 
       temp.Last_Name=(char*)malloc(36); 

       read>>temp.First_Name>>temp.Last_Name;

       read>>buffer;
       len=strlen(buffer);
       if(buffer[len-1]=='\n')
          buffer[len-1]='\0';

       temp.home=(char*)malloc(20); 
       strcpy(temp.home, buffer);

       read>>buffer;
       len=strlen(buffer);
       if(buffer[len-1]=='\n')
       buffer[len-1]='\0';

       temp.cell=(char*)malloc(20); 
       strcpy(temp.cell, buffer); 

      friends[i].First_Name=(char*)malloc(MAXNAME);
      friends[i].Last_Name=(char*)malloc(MAXNAME);
      friends[i].home=(char*)malloc(MAXPHONE);
      friends[i].cell=(char*)malloc(MAXPHONE);

  //adds file content to the structure
      strcpy(friends[*counter].First_Name,temp.First_Name);
      strcpy(friends[*counter].Last_Name,temp.Last_Name);
      strcpy(friends[*counter].home,temp.home);
      strcpy(friends[*counter].cell,temp.cell);

     (*counter)++;
     i++; 

   }
   //closes file and frees memory
    read.close();
    free(temp.Last_Name);
    free(temp.First_Name);
    free(temp.home);
    free(temp.cell);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:36:37.053

不要用于确定您是否到达文件末尾**。**`eof()`相反，阅读您想要阅读的内容，**然后**检查您是否成功读取数据。Obce reading failed 您可以`eof()`在生成有关格式错误的错误报告之前确定错误是否已到达文件末尾。

既然你提到你读到使用`!infile.eof()`是一种很好的做法：你能指出这个错误信息的来源吗？此信息需要更正。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-24T18:40:33.747

1.  不要使用`!eof()`. 它检查*最后一次*读取失败是否是由于到达文件末尾。它不能预测未来。

2.  不要`malloc`在 C++ 中使用。如果这样做，请检查返回值是否有错误！

3.  不要`operator>>`用于`char *`. 没有大小检查，所以只是要求缓冲区溢出。

4.  `'\n'`对缓冲区的检查是无用的。`operator>>`对于字符串在空格处停止。

5.  你盲目地`strcpy`将一个长度未知的字符串插入`temp.home`大小为 20 的字符串。这是另一个缓冲区溢出。

6.  ...我有点停止阅读那里。如果您想从文件中读取内容但在 eof/error 上停止，您可以执行以下操作：

.

```
string a, b, c;
while (true) {
    if (!(in >> a)) break;
    if (!(in >> b)) break;
    if (!(in >> c)) break;
    do_stuff_with(a, b, c);
} 
```

# r - 如何在列表中应用到列表的子元素

> ID：13544249
> 
> 赞同：7
> 
> 时间：2012-11-24T18:31:30.877
> 
> 标签：r, apply, lapply

假设我有一个**嵌套在列表中的列表**，并且我有一些仅适用于向量的函数（例如 stringr 包中的 str_replace ）。该**功能应该对**实际需要信息的每个元素进行工作，...

**问题1：**我的问题有具体的解决方案吗？
**问题2：**有没有通用的解决方案？

应该有一个使用循环的解决方案，但这几乎是优雅的并且可能非常缓慢 - 效率确实在这里发挥了作用。

让我们举个**例子**：

```
# let's start easy:
test1 <- list(c("a","d"),c("b","d"),c("c","d"))

# does not work:
str_replace(test1,"d","changed")

# but this does:
lapply(test1,str_replace,"d","changed")

# but what now ?
test2 <- list(c(list("a"),"d"),c("b","d"),c("c","d"))

# does not work! :-(
lapply(test2,str_replace,"d","changed") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:57:29.703

以下是如何使用 rapply 来实现这一点。注意 ... 在 rapply 的定义中的位置 - 这是在`dflt`and之后`how`。因此，我们将参数命名为 str_replace：

```
rapply(test,str_replace,pattern="d",replacement="changed",how='replace')

[[1]]
[[1]][[1]]
[1] "a"

[[1]][[2]]
[1] "changed"

[[2]]
[1] "b"       "changed"

[[3]]
[1] "c"       "changed" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T18:57:00.473

您可以使用`unlist`/ `relist`：

```
library(stringr)
test <- list(c(list("a"),"d"),c("b","d"),c("c","d"))
test2 <- unlist(test)
test2 <- str_replace(test2,"d","changed")
relist(test2,test)

[[1]]
[[1]][[1]]
[1] "a"

[[1]][[2]]
[1] "changed"

[[2]]
[1] "b"       "changed"

[[3]]
[1] "c"       "changed" 
```

我相信这是非常有效的，但尚未测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T18:53:06.203

`rapply`递归地将函数应用于每个列表元素。您可能必须尝试使用​​该参数`how`才能获得正确的输出，但它应该可以满足您的需求。

`rapply`文档在[这里](http://stat.ethz.ch/R-manual/R-patched/library/base/html/rapply.html)。

# mysql - 如何从多个返回值中找到 MAX

> ID：13544251
> 
> 赞同：0
> 
> 时间：2012-11-24T18:31:51.427
> 
> 标签：mysql

下面是我的 sql 语句，一切正常，只是我不知道如何从多个返回值中找到 MAX。无论如何，这是我的代码，我有问题的部分用 [] 标记。

```
SELECT 
(product1.CNT+product2.CNT+product3.CNT)AS CNT,
(
 IFNULL(product1.SUMAMT,0)+
 IFNULL(product2.SUMAMT,0)+
 IFNULL(product3.SUMAMT,0)
)AS AMTAMT, 
```

**[ MAX(product1.MXDT, product2.MXDT, product3.MXDT)AS MAXDT]**

```
FROM 

(SELECT 
 SUM(LAMT)AS SUMAMT, 
 COUNT(LAMT)AS CNT,
 IFNULL(LSUBDT,(CURDATE()-INTERVAL 9999 DAY))AS MXDT
 FROM product1 WHERE LSUBBY=1 AND RECST=1
)product1 

CROSS JOIN 
(SELECT 
 SUM(LAMT)AS SUMAMT, 
 COUNT(LAMT)AS CNT,
 IFNULL(LSUBDT,(CURDATE()-INTERVAL 9999 DAY))AS MXDT
 FROM product2 WHERE LSUBBY=1 AND RECST=1
)product2

CROSS JOIN 
(SELECT 
 SUM(LAMT)AS SUMAMT, 
 COUNT(LAMT)AS CNT,
 IFNULL(LSUBDT,(CURDATE()-INTERVAL 9999 DAY))AS MXDT
 FROM product3 WHERE LSUBBY=1 AND RECST=1
)product3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:03:39.787

您正在寻找的功能称为[GREATEST](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_greatest)：

```
...
GREATEST(product1.MXDT, product2.MXDT, product3.MXDT) AS MAXDT
.... 
```

# c++ - 如何在win32中的WM_CREATE消息之外创建一个按钮？

> ID：13544253
> 
> 赞同：2
> 
> 时间：2012-11-24T18:31:55.490
> 
> 标签：c++, winapi, gdi+

我将 c++ 与 win32 和 gdi+ 一起用于图形。
当我在 WM_CREATE 之外初始化一个按钮时，特别是在 WM_TIMER 消息中，在绘制一帧之后，我无法绘制任何其他内容。这是代码片段：

```
case WM_TIMER:
    RECT client;
    GetClientRect(hWnd, &client);
    client.bottom-=100; //The bottom hundred pixels are static after I draw the first frame, so I never update them
    if(starting==true)
    {
        starting=false;
        hdc = GetDC(hWnd);
        hdcBuf = CreateCompatibleDC(hdc);
        hdcMem = CreateCompatibleDC(hdcBuf);
        hbmBackBM = CreateCompatibleBitmap(hdc, client.right, client.bottom );
        hbmOldBackBM = (HBITMAP)SelectObject(hdcBuf, hbmBackBM);

        Graphics temp(hdc);
        SolidBrush yelloworange(Color(250,225,65));
        temp.FillRectangle(&yelloworange,0,client.bottom,client.right,100); //Fill the bottom with yellow
        buttons[0]=CreateWindow("button","makereg", WS_VISIBLE | WS_CHILD | BS_DEFPUSHBUTTON, 100, 630, 60, 20, hWnd, HMENU(IDB_MAKEREG), NULL, NULL);
        //buttons[1]=CreateWindow("button","destroyreg", WS_VISIBLE | WS_CHILD | BS_DEFPUSHBUTTON, 100, 670, 80, 20, hWnd, HMENU(IDB_MAKEREG+1), NULL, NULL);
    }
    Graphics g(hdcBuf); 
```

第一部分用于双缓冲，我实例化的变量是全局的。我删除了 WM_DESTROY 中的 HDC 和 HBITMAP。开始是一个全局布尔值，被实例化为真。我在这条 WM_TIMER 消息中完成了我所有的绘图。如果我只注释掉创建按钮的两行，一切都会正常运行。有了它们，它只画出这个 WM_TIMER 中剩下的东西，而不画下一个。所有其他绘图代码都对 hdcBuf 或 g 完成，然后 hdcBuf 被 BitBlt'd 到 hdc 上。

我尝试在 WM_CREATE 中创建按钮，然后在 WM_TIMER 中显示它，但这导致了同样的问题。我无法在 WM_CREATE 中创建和显示窗口，否则当我用黄色填充底部 100 个像素时，它会被覆盖。

有没有办法在 WM_CREATE 和 WM_PAINT 之外创建和显示一个按钮而不会使其余代码崩溃？

编辑：这是一些在 WM_TIMER 中停止工作的代码：

```
if(mousex!=uptomousex && mousey!=uptomousey && lbuttondown==true) // this code draws a rectangle between the point where the user begins holding the left mousebutton, and where the mouse is right now.
{
    if(uptomousex-mousex>0 && uptomousey-mousey>0)
        g.DrawRectangle(&(p[0]), mousex, mousey, uptomousex-mousex, uptomousey-mousey);
    else if(uptomousex-mousex<0 && uptomousey-mousey>0)
        g.DrawRectangle((&p[0]), uptomousex, mousey, mousex-uptomousex, uptomousey-mousey);
    else if(uptomousex-mousex>0 && uptomousey-mousey<0)
        g.DrawRectangle((&p[0]), mousex, uptomousey, uptomousex-mousex, mousey-uptomousey);
    else if(uptomousex-mousex<0 && uptomousey-mousey<0)
        g.DrawRectangle(&(p[0]), uptomousex, uptomousey, mousex-uptomousex, mousey-uptomousey);
} 
```

一些全局变量：

```
bool lbuttondown=false;
float mousex=0;
float mousey=0;
float uptomousex=0;
float uptomousey=0; 
```

在 WndProc 的其他地方...

```
case WM_LBUTTONDOWN:
    lbuttondown=true;
    mousex=(float)GET_X_LPARAM(lParam);
    mousey=(float)GET_Y_LPARAM(lParam);
    uptomousex=mousex;
    uptomousey=mousey;
    break;
case WM_MOUSEMOVE:
    if(mousex!=GET_X_LPARAM(lParam) && mousey!=GET_Y_LPARAM(lParam))
    {
        uptomousex=(float)GET_X_LPARAM(lParam);
        uptomousey=(float)GET_Y_LPARAM(lParam);
    }
    break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:42:50.990

您在每个计时器调用上创建/获取至少 3 个设备上下文实例，并且您永远不会删除/释放它们（至少在您发布的示例中），因此您以粉碎整个 GDI 系统而告终也就不足为奇了。

对于每个 GetDC() 调用，应该调用 ReleaseDC()，

对于每个 CreateCompatibleDC() 调用，都应该调用 DeleteObject()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:22:01.140

我还没有弄清楚为什么会发生这种情况，但我创建了一个简单的补丁：我自己的按钮类，我将在这里分享：

```
class button
{
public:
    int x;
    int y;
    int width;
    int height;
    string text;
    void (*func)(short);
    button(int px, int py, int w, int h, string txt, void (*f)(short))
    {
        x=px;
        y=py;
        width=w;
        height=h;
        text=txt;
        func=*f;
    }
}; 
```

然后，有一个全局的按钮向量，allbuttons，在 WM_LBUTTONUP 消息中，我循环遍历所有按钮并检查单击是否在按钮中，如果是，我调用 func。

它简单，更灵活，并且确实有效。但是，图形更糟，出于好奇，我仍然想找出Windows按钮功能失调的原因。

# php - 使用php替换css中的前导点和斜杠

> ID：13544254
> 
> 赞同：2
> 
> 时间：2012-11-24T18:31:58.360
> 
> 标签：php, regex, replace

如果我有以下任何一条路径

```
../../../filename.txt
../../filename.txt
../filename.txt 
```

我怎样才能用一个“../”替换任意数量的“../”，例如

```
../../../filename.txt
or
../../filename.txt 
```

变成

```
../filename.txt 
```

然而，这些路径位于 css 字符串内，我不想将字符串分开来执行此操作，我只想替换它们所在的 '../' 。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:33:46.480

`preg_replace`如果您记得转义句点，这应该很容易：

```
$result = preg_replace('~(?:\.\./)+~', '../', $input); 
```

这匹配一个或多个连续出现的`../`并简单地写回`../`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:33:35.403

使用正则表达式

`(\.\./)+`

并将其替换为

`../`

* * *

`+`匹配前面的字符或组 1 到多次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:49:19.190

RegEx 的替代品（主要供参考，@m.buettner 有最佳答案）。

```
$fn = '../../../filename.txt';
$fn_parts = (array_reverse(explode("../", $fn)));
echo "../" . $fn_parts[0]; 
```

^([ideone](http://ideone.com/Mvevj5))

或 ./ 如果没有。

```
$fn = 'filename.txt';
$fn_parts = (array_reverse(explode("../", $fn)));
echo (count($fn_parts) > 1 ? "../" : "./") . $fn_parts[0]; 
```

^([ideone](http://ideone.com/dn1HRj))

# android - 安卓移动画布

> ID：13544257
> 
> 赞同：0
> 
> 时间：2012-11-24T18:32:17.837
> 
> 标签：android, android-canvas, move

我想在画布上绘制一个大图像，然后我想移动该画布，以便它向我展示该图像的不同部分。无需重新粉刷（或最终只重新粉刷需要的部分）。它是如何在android中完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:40:45.557

检查[此](http://developer.android.com/reference/android/graphics/Canvas.html#translate%28float,%20float%29)方法。您需要做的就是指定水平和垂直距离来移动画布。您还可以在画布上缩放、旋转甚至应用自定义矩阵。[本教程](http://developer.android.com/guide/topics/graphics/2d-graphics.html)也可能会有所帮助。

# javascript - KendoUI 网格/数据源。“创建”时，POST 请求为空，无参数

> ID：13544258
> 
> 赞同：0
> 
> 时间：2012-11-24T18:32:19.743
> 
> 标签：javascript, kendo-ui

当我在我的网格中添加一条记录时，使用 POST 命中“创建”url，但在检查 httpd 日志时，POST 参数为空。

这是我的网格和数据源定义：

```
$(function() {
            $("#grid").kendoGrid({
                dataSource: {
                    transport:{
                        read:"libyMsg.php?way=getUsrMsgList",
                        create:{
                            url :"libyMsg.php?way=createMsg",
                            type:"POST"
                        },
                        update:{
                            url :"libyMsg.php?way=updateeMsg",
                            type:"POST"
                        },
                        destroy:{
                            url :"libyMsg.php?way=destroyMsg",
                            type:"POST"
                        }
                    },
                    batch: true,
                    pageSize: 10,
                    schema: {
                        data: "data",
                        model: {
                            id: "msg_id",
                            fields: {
                                msg_id: { editable: false, nullable: true },
                                msg_title: { validation: { required: true } },
                                msg_content: {  validation: { required: true } },
                                msg_type: { type: "number", validation: { min: 0, required: true }},
                                msg_date: { type: "date", validation: { required: true } },
                                msg_status: { type: "number", validation: { min: 0, required: true } }
                            }
                        }
                    }
                },
                columns: [{ field: "msg_id", width: 40,title: "ID" },
                    { field: "msg_title",width: 230, title: "Title" },
                    { field: "msg_content", width: 370,title: "Content" },
                    { field: "msg_type", width: 40,title: "Type" },
                    { field: "msg_date", width: 300,title: "Date" }, 
                    { field: "msg_status", width: 40,title: "Status" }],
                scrollable: true,
                sortable: true,
                editable:"popup",
                pageable: {
                    refresh: true,
                    pageSizes: true
                },
                toolbar: ["create", "save", "cancel"],
            });
        }); 
```

我想知道为什么，当我添加一条新记录时，它实际上是 POST，但没有任何参数。
任何想法？谢谢/M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T23:09:21.767

您好，您粘贴的代码运行良好。[这](http://jsbin.com/edamuj/90/edit)是一个演示它的 JsBin - 我可以在浏览器的网络选项卡中看到像这样发送的值。

```
models[0][msg_id]:23
models[0][msg_title]:foo
models[0][msg_content]:bar
models[0][msg_type]:2323
models[0][msg_date]:Sun Nov 25 2012 01:05:03 GMT+0200 (FLE Standard Time)
models[0][msg_status]:563 
```

您尝试在服务器上访问这些值的方式可能不正确。我建议你分享你的服务器代码。

# css - Rails 应用程序没有在 application.css 中选择样式

> ID：13544264
> 
> 赞同：0
> 
> 时间：2012-11-24T18:32:48.213
> 
> 标签：css, ruby-on-rails, background-image, asset-pipeline, production-environment

我的 rails 应用程序目前拒绝在我的生产服务器（linode 服务器）上的 application.css 中获取 body 标签样式，但它可以在我的 localhost:3000 上运行。我的资产管道看起来像这样

```
 *= require bootstrap.min
 *= require bootstrap_customization
 *= require datepicker
 *= require select2
 *= require_self
 *= require_tree . 
```

我尝试切换 require_self 和 require_tree 的位置，但它没有改变任何东西。我想注意所有其他样式都被选中了，只是在 application.css 中没有被选中的 body 标签。这是body标签的代码

```
body{
background: transparent url('/assets/bg2.png');
font-family: 'Lucida Grande', Verdana, Helvetica, Arial;
} 
```

我已经尝试在 css 中添加类以更具体地对其范围进行调整，并且我确保图像上没有不允许访问它的权限。但它只显示一个白色背景，并使用该样式（具有背景图像的那个）上方的 body 标签的样式，但仅此而已。这仅在生产中发生，该背景图像在我的本地主机上完美显示，这很奇怪有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:48:18.070

如果您使用的是 rails 3，请尝试使用 rails 提供的资产管道功能，例如：

```
body {
  background: transparent image_url('bg2.png');
  font-family: 'Lucida Grande', Verdana, Helvetica, Arial;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:24:40.110

需要清除服务器的缓存。同时执行 a`rake assets::clean`将删除开发和生产中的所有缓存文件（无论您在哪里运行它）

# java - 通过继承和接口实现 Python 多态性

> ID：13544266
> 
> 赞同：0
> 
> 时间：2012-11-24T18:32:59.607
> 
> 标签：java, python, interface, polymorphism

我正在使用 Python 2.7（谷歌应用引擎）

学习`Python`了，弄明白了语言是如何利用继承来实现多态的。

`INHERITANCE`-基于多态性`PYTHON`：

```
class pet:
  number_of_legs = None
  age = None

  def sleep(self):
    print "zzz"

  def count_legs(self):
    print "I have %s legs." % self.number_of_legs
    return self.number_of_legs

class dog(pet):
  def bark(self):
    print "woof"

doug = dog()

doug.number_of_legs = 5;

print "Doug has %s legs." % doug.count_legs()
doug.bark() 
```

我的问题是：Python 是否具有松散耦合的多态性，即使用`interface`而不是`inheritance`. 例如，在 Java 中，没有祖先关系的类可以实现相同的接口。请参阅以下示例中的`HouseDog`和。`PetRock`

`INTERFACE`-基于多态性`JAVA`：

```
class Animal{
   int legs;
   double weight;

   public int getLegs(){return this.legs;}
   public double getWeight(){return this.weight}
}

interface Pet{
    public int getNumberOfDresses();
    public int getNumberOfToys();
}

class HouseDog extends Animal implements Pet{
   //... implementation here
}

class PetRock implements Pet{
   //a rock and a dog don't really have much in common.
   //But both can be treated as pets
} 
```

问题：

再说一遍：python 是否有一种面向对象的方式来实现多态性而不使用继承？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T18:36:33.693

是的，他们称之为[Duck Typing](http://en.wikipedia.org/wiki/Duck_typing)。无需正式实现接口。Java 风格的接口不存在，因为 Python 具有多重继承，所以如果要定义接口，只需使用常规类作为超类型。但是，一般来说，人们避免创建完全抽象的基类，并利用鸭子类型。

对于您的示例，只需省略`Pet`接口，但 let `HouseDog`and `PetRock`both have `getNumberOfDresses`and`getNumberOfToys`方法。在多态情况下，Python*仅在调用方法时*检查方法是否存在，而不是在编译时（不存在）或加载时检查类型。最大的优势是让您快速原型化，而无需担心形式，而您的实现尚未完成。

如果您确实想要正式的类型检查，您可以通过多种方式获得它，但没有一种是官方认可的。

# tcl - 比较字符串的 TCL 程序

> ID：13544270
> 
> 赞同：1
> 
> 时间：2012-11-24T18:33:36.080
> 
> 标签：tcl

我正在尝试创建一个程序，比较第一个和最后一个字符，比较倒数第二个和倒数第二个，比较倒数第三个和第三个字符，依此类推，如果这些字符中的任何一个匹配，则两者将转换为该字符的大写。

例子：

请输入文字：Hello Philippines 决赛：Hello PhIlippinEs

我无法创建任何代码，我被困住了

```
puts "Please enter text:"
set myText [gets stdin]

string index $myText 4 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:01:20.117

此过程还将`i`菲律宾语中的第一个大写，因为它与字符串的开头和结尾等距。

```
proc compare_chars {str} {
    set letters [split $str ""]
    for {set i [expr {[llength $letters] / 2}]} {$i >= 0} {incr i -1} {
        set a [lindex $letters $i]
        set b [lindex $letters end-$i]
        if {$a eq $b} {
            lset letters $i [set L [string toupper $a]]
            lset letters end-$i $L
        }
    }
    join $letters ""
}
puts [compare_chars "Hello Phillipines"]
# outputs =>  HEllo PhIllipinEs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T11:45:48.097

对此进行编码的最简单方法是使用`foreach`拆分字符。（它形式上不是最有效的，但它很容易正确编码。）

```
puts "Please enter text:"
set myText [gets stdin]

set chars [split $myText ""]
set idx 0
foreach a $chars b [lreverse $chars] {
    if {[string equals -nocase $a $b]} {
        lset chars $idx [string toupper $a]
    }
    incr idx
}
set output [join $chars ""]

puts $output 
```

请注意，`foreach`正在迭代列表的副本；并发修改没有问题。`idx`事实上，从编码的角度来看，唯一模糊的部分实际上是我们需要在上面的变量中跟踪要修改的索引。

* * *

使用 Tcl 8.6，您可以编写：

```
set chars [split $myText ""]
set output [join [lmap a $chars b [lreverse $chars] {
    expr {[string equals -nocase $a $b] ? [string toupper $a] : $a}
}] ""] 
```

不过，这确实取决于拥有新`lmap`命令。

* * *

如果你真的坚持使用 8.3（它**不受支持**并且多年来一直如此，所以你应该优先升级到更新的版本）然后试试这个：

```
set chars [split $myText ""]
set idx [llength $chars]
set output {}
foreach ch $chars {
    if {[string equals -nocase $ch [lindex $chars [incr idx -1]]]} {
        append output [string toupper $ch]
    } else {
        append output [string tolower $ch]
    }
} 
```

8.3 中存在此使用的所有功能（尽管有些功能比更高版本慢得多）。

# winforms - RichTextBox -- 保留水平间距

> ID：13544275
> 
> 赞同：1
> 
> 时间：2012-11-24T18:33:53.800
> 
> 标签：winforms, richtextbox

我想将 .txt 文件中的一些行复制到 Windows 窗体中的 RichTextBox 中。

当我在 Notepad++ 中查看这些行时，它们均匀对齐：

```
 |  a. XXXXXXXXXXXXXXXX . . .XXXXX__________  XXXXXXX__________ |      
        |  b. XXXXXXXXXXXXXXXXX . . . . . . . . . . . . . . __________ | 
```

当我将它们添加到 RichTextBox 时，对齐丢失，第二行末尾的竖线缩进了大约 20 个字符。

有没有人对我如何保留我在 Notepad++ 中看到的对齐有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:36:12.253

您必须使用固定宽度的间隔字体，例如`Courier New`或`Consolas`。

# java - 使用 String 和 Int 值配对实现列表

> ID：13544282
> 
> 赞同：-1
> 
> 时间：2012-11-24T18:34:27.183
> 
> 标签：java, arraylist

当一对元素中的一个作为空值输入时，ArrayList 会如何反应？

我的意图是创建一个课程列表和这些课程的分数，但我想知道如果我们不输入课程分数会发生什么。这会引发异常还是仅在该元素位置留下空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:41:18.673

`ArrayList` 支持 null 值，但您可以尝试 Apache 通用集合库`ListUtils#predicatedList`，其中返回由给定列表支持的谓词列表。只有通过给定谓词中的测试的对象才能添加到列表中。调用此方法后不要使用原始列表很重要，因为它是添加未验证对象（如`null`）的后门。

```
ListUtils.predicatedList(new ArrayList(), PredicateUtils.notNullPredicate()); 
```

这里返回列表将被支持`ArrayList`并且它不支持`null`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:00:15.217

列表没有“对”-我认为您的意思是`Map`，不是`List`。列表有单个值，地图有对。

对于给定的键，映射可以具有空值。

```
Map<String, Integer> coursePoints = new HashMap<String, Integer>();
coursePoints.put("ABC001", 5);
coursePoints.put("XYZ002". null); // OK 
```

# c++ - Boost::asio 不在 Debian Wheezy 上？

> ID：13544283
> 
> 赞同：3
> 
> 时间：2012-11-24T18:34:31.100
> 
> 标签：c++, boost, debian

Boost::asio 从 1.35 版开始包含在 Boost 中。但是我在 Debian Wheezy 的 boost 存储库中找不到 asio，尽管它的版本是 1.48。他们不支持吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T19:28:41.077

Debian Wheezy 使用 Boost 1.49。

该软件包[`libboost-all-dev`](http://packages.debian.org/wheezy/libboost-all-dev)将提供所有 boost 开发文件，包括 boost::asio。

**从评论编辑：**

软件包[libboost-all-dev](http://packages.debian.org/wheezy/libboost-all-dev)需要[libboost-dev](http://packages.debian.org/wheezy/libboost-dev)，这需要[libboost1.49-dev](http://packages.debian.org/wheezy/libboost1.49-dev)。Boost::asio 在那里。

它将被安装到 /usr/include/boost/

# c# - 将数据保存到数据库，然后将数据加载到列表框

> ID：13544284
> 
> 赞同：0
> 
> 时间：2012-11-24T18:34:47.293
> 
> 标签：c#, database, visual-studio-2010

我有 2 个添加到`CheckListBox`. 第一个按钮添加带有客户姓名、地址和到达时间的交货。

第二个按钮添加一个带有送货名称和送货地址的取件

我还有一个名为客户的数据库表，其中包含以下列：ID、描述、客户名称、客户地址、到达时间、交货名称、交货地址

我目前在数据库中存储了大约 10 条记录

我的问题 - 我如何对其进行编码，以便在我的程序启动时将存储在我的数据库中的记录加载到数据库中`CheckListBox`，当我添加新的交付或新的取货时，它会将其保存在我数据库的客户表中？此外，如果我在其中编辑或删除，`CheckListBox`我希望它相应地更新我的数据库表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:15:08.540

从视频的外观来看，您使用的是 SQL Server。您需要做一些事情才能让您的程序到达您想要的位置。我会尽力让你到达那里，提供的信息（这假设你正在学习并且会保持基本的东西）：

“我如何对其进行编码，以便在我的程序启动时将存储在我的数据库中的记录加载到 CheckListBox 中”

您需要在 windows 窗体类的顶部添加此 using 语句：

```
using System.Data.SqlClient; 
```

然后，在 form_Load 事件中，连接到您的数据库并从客户表中检索行（未测试）：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        //Setup connection to your database.
        SqlConnection myConnection = new SqlConnection("user id=sql_userID;" +
                                   "password=password;server=server_url;" +
                                   "Trusted_Connection=yes;" +
                                   "database=databaseName; " +
                                   "connection timeout=30");

        //Open connection.
        myConnection.Open();

        //Create dataset to store information.
        DataSet ds = new DataSet();

        //Create command object and adapter to retrieve information.
        SqlCommand  myCommand = new SqlCommand("SELECT * FROM Customers", myConnection);
        SqlDataAdapter adapter = new SqlDataAdapter(myCommand);
        adapter.Fill(ds);          

        //Loop through each row and display whichever column you wish to show in the CheckListBox.
        foreach (DataRow row in ds.Tables)
            checkedListBox1.Items.Add(row["ColumnNameToShow"]);
    } 
```

您的问题的其余部分有点模糊，因为您没有解释如何保存“新”记录（使用按钮，需要哪些数据，用户实际输入的数据，输入类型等）或您如何“删除”记录。不过，这应该会让您走上正确的道路并帮助您入门。

# regex - 正则表达式匹配 R 中的处理

> ID：13544285
> 
> 赞同：0
> 
> 时间：2012-11-24T18:34:53.643
> 
> 标签：regex, r

我想使用 R 提取 2 个匹配组。现在我有了这个，但效果不佳：

代码：

```
str = '123abc'
vector <- gregexpr('(?<first>\\d+)(?<second>\\w+)', str, perl=TRUE)
regmatches(str, vector) 
```

结果：

```
[[1]]
[1] "123abc" 
```

我希望结果是这样的：

```
[1] "123"
[2] "abc" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:38:16.593

我不确定您是否有使用 的特定原因`regmatches`，除非您以该格式导入表达式。如果定义明确的组对您的所有条目都是通用的，您可以通过以下方式匹配它们：

```
x <- "123abc"
sub("([[:digit:]]+)[[:alpha:]]+","\\1",x)
sub("[[:digit:]]+([[:alpha:]]+)","\\1",x) 
```

结果

```
[1] "123"
[1] "abc" 
```

即，匹配字符串的整个结构，然后将其替换为要保留的部分，方法是将其括在圆括号中并用反向引用（“\\1”）引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:26:46.080

我已重命名您的字符串`s`以避免破坏`str`。这是一种方法：

```
library(stringr)
s <- '123abc'
reg <- '([[:digit:]]+)([[:alpha:]]+)'

complete <- unlist(str_extract_all(s, reg))
partials <- unlist(str_match_all(s, reg))
partials <- partials[!(partials %in% complete)]

partials
[1] "123" "abc" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:23:24.350

尝试这个：

```
> library(gsubfn)
> strapplyc("123abc", '(\\d+)(\\w+)')[[1]]
[1] "123" "abc" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T18:55:26.440

根据输入的结构如何，您可能希望使用它`strsplit`来拆分字符串。

文档[在这里](http://stat.ethz.ch/R-manual/R-devel/library/base/html/strsplit.html)。

# game-physics - N-Rooks 采样是否对每个像素使用相同的模式？

> ID：13544287
> 
> 赞同：1
> 
> 时间：2012-11-24T18:35:04.483
> 
> 标签：game-physics, raytracing

我正在研究光线追踪器，现在我使用 N-Rooks 方法实现抗锯齿。我不确定是否应该为每个像素使用相同的图案，还是应该为每个像素生成一个新图案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:44:33.850

每个像素生成一个新图案。一般来说，采样越随机，图像中的混叠就越少。

# php - 需要帮助重构我的冗余代码（使用 MySQL/PHP 填充/构建 3 个选择列表）

> ID：13544296
> 
> 赞同：1
> 
> 时间：2012-11-24T18:36:03.207
> 
> 标签：php, mysql, sql, database, refactoring

我有一个膳食/食谱数据库，用于创建每日膳食计划。我需要为每个**meal_name**创建 3 个不同的选择列表（早餐、午餐、晚餐）来显示可用的食谱选项。

到目前为止，我对上述每个都使用单独的查询，并使用单独的构建来显示每个列表的结果。

**午餐查询：**

```
 // Lunch options
  $sql = "SELECT plan_date,
    plan_meal,
    plan_recipe,
    recipe_name,
    recipe_serving_size
    FROM recipe_plans
    LEFT JOIN $table_meals ON meal_id = plan_meal    
    LEFT JOIN $table_recipes ON recipe_id = plan_recipe
    WHERE plan_date = '".$date."'
    AND meal_name = 'Lunch'
    AND plan_owner = '".$user_name."'
    ORDER BY recipe_name";
    $rc = $DB_LINK->Execute($sql);
    DBUtils::checkResult($rc, NULL, NULL, $sql);

  // Scan the rows of the SQL result
  while (!$rc->EOF) {
    $recipeList[($rc->fields['plan_recipe'])] = $rc->fields['recipe_name'] . " (" . $rc->fields['recipe_serving_size'] . ")";
    $rc->MoveNext();
  } 
```

**和构建：**

```
// Scan the fields in the SQL result row
// Print all existing Meals, and some new ones
$minShow = 1;
$maxShow = 1;  // only build 1 while testing
for ($i = 0; $i < (isset($MealPlanObj->mealplanItems[$date]) && ($i < $maxShow) ? count($MealPlanObj->mealplanItems[$date]) : 0) + $minShow; $i++) {
  if ($i < (isset($MealPlanObj->mealplanItems[$date]) ? count($MealPlanObj->mealplanItems[$date]) : 0)) {
    // If it is an existing meal item, then set it
    $meal = $MealPlanObj->mealplanItems[$date][$i]['meal']; // meal_id
    $servings = $MealPlanObj->mealplanItems[$date][$i]['servings'];
    $recipe = $MealPlanObj->mealplanItems[$date][$i]['id']; // recipe_id
  } else {
    // It is a new one, give it blank values
    $meal = NULL;
    $servings = $defaultServings;
    $recipe = NULL;
  }
  // The HTML Code to build the select list for 'Lunch'
} 
```

上面的代码已经为每个餐名重复了，因为那是我有限的技能离开我的地方，哈哈。

***问题是**：与其为 3 个条件（早餐、午餐、晚餐）中的每一个都编写单独的选择和构建语句，不如只写 1 个来输出它们？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:25:11.253

您已经使用变量来构建 SQL 查询，因此您可以只引入另一个变量，例如`$meal_name`. 您可以将此变量应用于您的 SQL 语句。代替：

```
$sql = "SELECT mplan_date,
  ...
  AND meal_name = 'Lunch'
  ... 
```

然后你会写：

```
$meal_name = 'Lunch';
...
$sql = "SELECT mplan_date,
  ...
  AND meal_name = '" . mysqli_real_escape_string($meal_name) . "'
  ... 
```

请注意 function 的使用`mysqli_real_escape_string()`，尽管在本示例中不是绝对必要的，但如果您不确定变量中的内容，则转义添加到 SQL 语句中的所有变量非常重要。您的示例代码易受 SQL 注入攻击。

之后，您可以更进一步，将代码打包到一个函数中：

```
function buildSqlQuery($meal_name, $date, $user_name)
{
  $sql = "SELECT mplan_date,
    ...
    ORDER BY recipe_name";
  return $sql;
}

$sqlForBreakfast = buildSqlQuery('Breakfast', '2000-01-01', 'teddy');
$sqlForLunch = buildSqlQuery('Lunch', '2000-01-01', 'teddy');
$sqlForDinner = buildSqlQuery('Dinner', '2000-01-01', 'teddy'); 
```

# objective-c - UITableViewCell 底部信息文本

> ID：13544300
> 
> 赞同：0
> 
> 时间：2012-11-24T18:36:25.220
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

如何将一些信息文本（'请注意...'）添加到 uitableviewcell 的底部，就像在这张图片中一样：

![在此处输入图像描述](../Images/f372b8a93103d6812abd6560a0a44a27.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:39:09.593

你应该`- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section`试一试：

```
- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section {
    if (section == 0) {
        return @"This text is below the TableView!";
    }
    return nil;
} 
```

可以在[此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3atitleForFooterInSection%3a)找到其他文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:39:22.590

您在该屏幕截图中看到的内容不是任何 UITableViewCell 的一部分。它是表格的页脚（表格的一个特征）。尝试制作一个包含所需内容的 UILabel 并将其设置为表格的`tableFooterView`.

# python - numpy 仅对非零部分执行功能，同时保留数组的结构

> ID：13544301
> 
> 赞同：5
> 
> 时间：2012-11-24T18:36:28.683
> 
> 标签：python, numpy

在 numpy 中：

```
Foo = 
array([[ 3.5,  0\. ,  2.5,  2\. ,  0\. ,  1\. ,  0\. ],
       [ 0\. ,  3\. ,  2.5,  2\. ,  0\. ,  0\. ,  0.5],
       [ 3.5,  0\. ,  0\. ,  0\. ,  1.5,  0\. ,  0.5]]) 
```

我想在 Foo 上执行一个函数，以便仅更改非零元素，即对于 f(x) = x(nonzero)+5：

```
array([[ 8.5,  0\. ,  7.5,  7\. ,  0\. ,  6\. ,  0\. ],
       [ 0\. ,  8\. ,  8.5,  7\. ,  0\. ,  0\. ,  5.5],
       [ 8.5,  0\. ,  0\. ,  0\. ,  6.5,  0\. ,  5.5]]) 
```

另外我希望数组的形状/结构保持不变，所以我不认为 Foo[np.nonzero(Foo)] 会起作用......

我如何在 numpy 中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T18:41:36.067

```
In [138]: foo = np.array([[ 3.5,  0\. ,  2.5,  2\. ,  0\. ,  1\. ,  0\. ],
                          [ 0\. ,  3\. ,  2.5,  2\. ,  0\. ,  0\. ,  0.5],
                          [ 3.5,  0\. ,  0\. ,  0\. ,  1.5,  0\. ,  0.5]])
In [141]: mask = foo != 0

In [142]: foo[mask] = foo[mask]+5

In [143]: foo
Out[143]: 
array([[ 8.5,  0\. ,  7.5,  7\. ,  0\. ,  6\. ,  0\. ],
       [ 0\. ,  8\. ,  7.5,  7\. ,  0\. ,  0\. ,  5.5],
       [ 8.5,  0\. ,  0\. ,  0\. ,  6.5,  0\. ,  5.5]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:49:28.797

您也可以按如下方式进行

```
>>> import numpy as np
>>> foo = np.array([[ 3.5,  0\. ,  2.5,  2\. ,  0\. ,  1\. ,  0\. ],
...                           [ 0\. ,  3\. ,  2.5,  2\. ,  0\. ,  0\. ,  0.5],
...                           [ 3.5,  0\. ,  0\. ,  0\. ,  1.5,  0\. ,  0.5]])
>>> foo[foo!=0] += 5
>>> foo
array([[ 8.5,  0\. ,  7.5,  7\. ,  0\. ,  6\. ,  0\. ],
       [ 0\. ,  8\. ,  7.5,  7\. ,  0\. ,  0\. ,  5.5],
       [ 8.5,  0\. ,  0\. ,  0\. ,  6.5,  0\. ,  5.5]])
>>> 
```

# c# - 连接到 PostgreSQL

> ID：13544305
> 
> 赞同：3
> 
> 时间：2012-11-24T18:36:52.590
> 
> 标签：c#, database, postgresql, npgsql

我习惯使用 C#`Npgsql`来处理。`PostgreSQL`为了连接到我写的数据库：

```
NpgsqlConnection conn = new NpgsqlConnection(connstring);
conn.Open(); 
```

Open() 是一种`void`方法。它不返回任何指示它是否连接到数据库的值。我需要显示状态`connected`或`not connected`在我的客户端应用程序中。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:51:04.947

您可以检查`State`财产的价值：

```
NpgsqlConnection conn = new NpgsqlConnection(connString); 
conn.Open(); 
if (conn.State == System.Data.ConnectionState.Open) 
       Console.WriteLine("Success open postgreSQL connection."); 
conn.Close(); 
```

`StateChange`此提供程序的 2.0 以上版本也提供事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T13:47:43.060

迭代 kmatyaszek 的答案和 Damyan Bogoev 的评论，这就是我所做的：

```
public async Task<bool> TestConnection()
    {
        await using (NpgsqlConnection conn = new NpgsqlConnection(ConnectionString))
        {
            await conn.OpenAsync();
            if (conn.State == System.Data.ConnectionState.Open)
                return true;
            else return false;
        }
    } 
```

# c# - 如何管理唱片之间的竞争？

> ID：13544308
> 
> 赞同：0
> 
> 时间：2012-11-24T18:37:11.363
> 
> 标签：c#, mysql, transactions, record, database

对不起，我的英语不好。我最近接触了 Visual C# 编程，但我不是专家级的程序员。在这个简短的介绍之后，重要的是我需要在编辑操作期间对记录进行管理竞赛。这意味着同时使用该软件的两台计算机，第一台开始编辑记录的计算机必须“锁定”该记录，因此在程序的第二个实例中，何时以及如果尝试更改同一记录，将显示一条标准消息并中断该过程。我实际上使用 MySQL DBMS，我唯一能做的就是用“START TRANSACTION”锁定记录，直到我提交或关闭连接。问题是我不 不知道如何检查是否有活动事务或某种阻塞来停止过程，这意味着程序的第二个实例完全被阻塞，直到他们从第一个实例释放记录。解决方案？感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:10:34.827

好吧，一般来说，在用户处理记录时物理锁定记录是一个糟糕的设计。数据库锁应该很短。在开始事务和提交事务之间应该只有代码执行，但绝对没有用户交互。

您可以谷歌“乐观锁定与悲观锁定”以了解有关该主题的更多信息。

如果你必须使用悲观锁，你将不得不实现某种智能软件锁而不是数据库锁。例如，您可以为 Current_Edit_By 和 Current_Edit_Time 添加两个字段。当用户开始编辑记录时，您使用用户 ID 和当前日期时间填写这些字段。当另一个用户尝试编辑同一记录时，您检查这两个字段，如果那里有值，则显示错误。

当然，如果用户在未提交记录的情况下从数据库断开连接，您将需要实现自动清除锁定记录的机制。因此，日期时间字段（例如，只要连接不再存在，就可以清除超过 30 分钟的锁）。

# jfreechart - JFreeChart BarChart - CategoryDataset - 一个类别中一个系列的多个值

> ID：13544310
> 
> 赞同：1
> 
> 时间：2012-11-24T18:37:17.337
> 
> 标签：jfreechart, categories, bar-chart, series

你知道是否有可能有一个类似于下图的条形图，但在每个类别中都有几个相同系列的条形图？

我的意思是，例如，每个类别中有 3 个“第一”、3 个“第二”和 3 个“第三”条，每个条都有不同的值。

使用`DefaultCategoryDataset`，这是不可能的：如果您为特定类别中的系列添加多个值，则仅考虑最后一个值。

我还尝试为`DefaultMultiValueCategoryDataset`该类的系列添加多个值，但这并没有达到我想要的效果。例如，如果您这样做：

```
DefaultMultiValueCategoryDataset defaultMultiValueCategoryDataset = new
DefaultMultiValueCategoryDataset();

List<Double> vals11 = Arrays.asList(8.5D, 10.9D, 12.2D);
defaultMultiValueCategoryDataset.add(vals11, "First", "Category 1"); 
```

您将进入“First”系列的第一个类别，其值实际上是三个值 8.5、10.9 和 12.2 的平均值。我想要三个单独的酒吧。

我已经搜索了几个小时并在 JFreeChart 的论坛上提问，但不幸的是，它们不是很活跃。谢谢

[![JFreeChart 条形图演示](../Images/12aea9ececbe76fd065819fdac683452.png)](https://i.stack.imgur.com/nqQLa.png)
[（来源：[java2s.com](http://www.java2s.com/Code/JavaImages/JFreeChartBarChartDemo.PNG)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-04T12:08:50.340

你在使用 Java 持久性吗？我通过在两个字段上的 Java 类中设置 @ID 注释来解决这个问题。这允许 JFreeChart 确定产品名称相同但大小不同，因此将它们视为两个单独的条目。抱歉，我没有任何示例可向您展示，数据有些机密。

# java - Java - 使用 SpringLayout 的 JScrollPane 视图布局

> ID：13544311
> 
> 赞同：3
> 
> 时间：2012-11-24T18:37:30.530
> 
> 标签：java, swing, jscrollpane, springlayout

我有`JScrollPane`一个视图组件，它使用`SpringLayout`.

```
final JPanel panel = new JPanel(new SpringLayout());
// add stuff to panel here
final JScrollPane scrollPane = new JScrollPane(panel, JScrollPane.VERTICAL_SCROLLBAR_NEVER, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
getContentPane().add(scrollPane); 
```

`JScrollPane`似乎不起作用，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:53:24.973

引用[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#sizing)

*除非您明确设置滚动窗格的首选大小，否则滚动窗格会根据其九个组件（视口，如果存在，两个滚动条，行和列标题以及四个角）的首选大小来计算它。最大的因素，也是大多数程序员关心的一个因素，是用于显示客户端的视口的大小。*

*   所以你必须要么`setPreferedSize(Dimension d)`调用`JScrollPane`实例

    ```
    final JPanel panel = new JPanel(new SpringLayout());
    // add stuff to panel here
    final JScrollPane scrollPane = new JScrollPane(panel, JScrollPane.VERTICAL_SCROLLBAR_NEVER, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    scrollPane.setPreferredSize(new Dimension(300, 300));
    add(scrollPane); 
    ```

*   或覆盖用作*视口*`getPreferredSize()`的/ 组件`JPanel`

     *```
    final JPanel panel = new JPanel(new SpringLayout()) {

        @Override
        public Dimension getPreferredSize() {
             return new Dimension(300, 300);
         }
     };
     // add stuff to panel here
     final JScrollPane scrollPane = new JScrollPane(panel, JScrollPane.VERTICAL_SCROLLBAR_NEVER, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    add(scrollPane); 
    ```* 

 *其他注意事项：

*   不要`JFrame`不必要地扩展课程。

*   只需调用`add(..)`实例`JFrame`，因为调用被转发到*contentPane*。*

# jquery - jquery Slider 不能在 Firefox 上运行，但是它可以在 chrome 上运行

> ID：13544312
> 
> 赞同：1
> 
> 时间：2012-11-24T18:37:35.660
> 
> 标签：jquery, jquery-plugins

我在下面提到的页面链接上使用了 jquery 滑块，但是滑块在 firfox 上不起作用..但是它在 chrome 和 IE 上运行良好。

我在firefox上发现了下面提到的错误，

> ## PreloadCSSimages.js 第 88 行
> 
> SecurityError：操作不安全。[打破这个错误]
> 
> if(sheets[sheetIndex].cssRules || sheet[sheetIndex].rules){

**这是第 88 行的代码，firefox 显示错误：**

> if(sheets[sheetIndex].cssRules || sheet[sheetIndex].rules){

***链接：*** [http: //www.virtualmob.co.uk/products/test_landing_pages/PAM/](http://www.virtualmob.co.uk/products/test_landing_pages/PAM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:20:20.900

我删除了有冲突的general.js..现在它在firefox上也可以正常工作

# jquery - 使用jQuery的切换时主复选框不会改变视觉状态

> ID：13544316
> 
> 赞同：1
> 
> 时间：2012-11-24T18:37:53.133
> 
> 标签：jquery, checkbox, toggle

我正在使用 jQuery 检查/取消选中 div 中的所有复选框，它工作正常，但主复选框似乎没有被点击（即我看不到复选标记打开和关闭），我怎么能解决这个问题？

这是我到目前为止的代码：

```
jQuery(function () {
jQuery('#select_all').toggle(
    function() {
        jQuery('#elementos .c_e').prop('checked', true);
    },
    function() {
        jQuery('#elementos .c_e').prop('checked', false);

    }
);}); 
```

谢谢。

这是一个现场版本：http: [//jsfiddle.net/L8DVu/](http://jsfiddle.net/L8DVu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:52:33.307

您正在变得复杂，您可以使用单个语句来完成，

**[现场演示](http://jsfiddle.net/L8DVu/1/)**

```
jQuery('#select_all').click(function() {

    jQuery('#elementos .c_e').prop('checked', this.checked);

});​ 
```

# sql-server - 胖客户端应用程序中的 SQL Server Express

> ID：13544317
> 
> 赞同：1
> 
> 时间：2012-11-24T18:38:33.370
> 
> 标签：sql-server, winforms, sql-server-express, smartclient

我正在开发一个胖客户端应用程序。此应用程序在本地存储数据，然后从中央存储库更新信息。此客户端应用程序存储在多个工作站上。我使用过 SQL Server CE，但发现它在性能方面有点慢。我测试了 SQL Express，性能有了很大的提升。

可以在客户端计算机上安装 SQL Server Express 吗？还是这更适用于服务器环境。我可以将 SQL Server Express 打包为安装过程的一部分吗？

# android - eclipse中文件过早结束

> ID：13544318
> 
> 赞同：1
> 
> 时间：2012-11-24T18:38:41.593
> 
> 标签：android, eclipse

**Eclipse（android）中所有xml文件中的文件过早结束错误**

我的所有 xml 文件（包括清单文件）都有错误。它是“文件过早结束”。现在我所有的 xml 文件都是空白的......我不知道这些文件发生了什么。请知道为什么会发生此问题的任何人请帮助我。我会非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:42:45.400

在项目检查器中突出显示您的项目名称，然后按 F5 刷新。转到项目菜单并执行“清理...”并尝试重建/打开。如果问题仍然存在，请使用任何其他应用程序（Total Commander、Dopus 等）浏览到您的项目文件所在的文件夹，然后自己检查文件。在文本编辑器中打开 XML 文件并检查它们是否看起来已损坏。如果是，请尝试找出发生这种情况的原因。也许你的硬盘快要死了？

# java - Android 中的 Java Protobuf - NoClassDefFoundError

> ID：13544319
> 
> 赞同：6
> 
> 时间：2012-11-24T18:38:41.853
> 
> 标签：java, android, protocol-buffers

我正在 ADT v21.0.0 中构建一个 Android 应用程序。这个应用程序需要使用我编译成 jar 的 protobuf 库。

通过将这个 jar 以及 protobuf-java-2.4.1.jar 放在我的 libs/ 文件夹中，Eclipse 在构建时识别它，但是每当我尝试在我的 Android 模拟器中运行应用程序时，我在尝试实例化 protobuf 编译器生成的我自动生成的自定义类之一。

我已经看到了很多关于 libs/ 文件夹命名的提示（显然之前的 ADT 更新通过要求 /lib 文件夹为 /libs 来打破这一点），以及从“Java 构建路径”显式添加 .jars设置窗口（并在 Order and Export 窗格中检查 jars）。

然而，这些都没有帮助，我想知道是否有更根本的原因阻止我的 protobuf 类在运行时被识别。

注意：如果我在 Eclipse 中创建一个标准的 Java 应用程序，我就可以很好地使用我的原型类。这只是运行 Android 应用程序时的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:42:52.203

似乎您的项目导入了一些您自动生成的 jar 所依赖的库..并且不在设备或模拟器上..

# c# - WCF JSON 服务有 2 个通过 jquery 调用的方法。GET 方法有效，POST 方法返回 404 错误

> ID：13544326
> 
> 赞同：0
> 
> 时间：2012-11-24T18:39:54.710
> 
> 标签：c#, jquery, json, wcf

我有一个简单的 WCF 服务，其接口如下：

```
[ServiceContract]
public interface IPageService {

    [OperationContract]
    [WebGet(UriTemplate = "/GetPage/{pageNumber}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    Page GetPage(string pageNumber);

    [OperationContract]
    [WebInvoke(UriTemplate = "/SetPages", Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string SetPages(Page[] pages);
} 
```

配置文件的 system.serviceModel 部分如下：

```
<system.serviceModel>
  <protocolMapping>
    <add scheme="http" binding="webHttpBinding"/>
  </protocolMapping>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
    <endpointBehaviors>
      <behavior>
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

使用以下 JavaScript 调用 GetPage 方法有效：

```
$.ajax({
    cache: false,
    url: 'http://localhost/Test/PageService.svc/GetPage/1', 
    type: 'GET',
    success: function(result) {
        // do success stuff 
    }, 
    error: function(req, status, error) { 
        // do error stuff
    } 
}); 
```

使用以下 JavaScript 调用 SetPages 方法会返回 404 错误：

```
$.ajax({
    cache: false,
    url: 'http://localhost/Test/PageService.svc/SavePages', 
    type: 'POST',
    data: '[{...}]', 
    dateType: 'json',
    contentType: 'application/json',
    processData: false,
    success: function(result) { 
        // do success stuff 
    }, 
    error: function(req, status, error) { 
        // do error stuff 
    } 
}); 
```

我已经尝试了 ajax 调用中的几乎所有参数组合，但没有任何区别。我玩过配置文件并尝试了此处和各种博客中建议的各种配置，但所做的只是使这两种方法都返回 AddressFilter 或 ContractFilter 不匹配。我错过了什么？使这两种方法都起作用的最快/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:33:32.143

根据您发布的代码，jscript 调用 SavePages 方法，但在服务器端，post 方法的名称为 SetPages。

# actionscript-3 - AS3：检查List组件中是否有选中项？

> ID：13544328
> 
> 赞同：1
> 
> 时间：2012-11-24T18:40:08.113
> 
> 标签：actionscript-3

我用 AS3 在 flash 中创建了一个列表组件，我想检查是否有一个项目被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:53:13.773

如果是`fl.controls.List`那么`if(list.selectedIndex != -1)`

# javascript - 如何在 Meteor 中跟踪服务器端匿名用户的数量？

> ID：13544333
> 
> 赞同：10
> 
> 时间：2012-11-24T18:40:28.453
> 
> 标签：javascript, meteor

我正在 Meteor 中编写一个数据敏感的应用程序，并试图限制客户端访问尽可能多的信息。因此，我想在服务器端实现一种计算登录和匿名用户数量的方法。

我尝试了多种方法。第一个是在这个问题[Server cleanup after a client disconnects](https://stackoverflow.com/questions/10257958/server-cleanup-after-a-client-disconnects)中概述，这表明挂钩：

```
this.session.socket.on("close") 
```

但是，当我这样做并尝试更改集合时，它抛出了“Meteor 代码必须始终在 Fiber 中运行”错误。我认为这个问题是因为一旦套接字关闭，Fiber 就会被杀死，所以访问数据库是不可能的。当在服务器上调用 Collection.insert 作为可能的解决方案时， OP 指出[“流星代码必须始终在 Fiber 中运行”](https://stackoverflow.com/questions/10192938/meteor-code-must-always-run-within-a-fiber-when-calling-collection-insert-on-s)，但根据对答案的评论，我不确定这是否是最好的方法。

然后我尝试在变量上自动运行：

```
Meteor.default_server.stream_server.all_sockets().length 
```

但是似乎从未调用过自动运行，因此我假设该变量不是反应性上下文，并且我不确定如何使其成为一个。

最后一个想法是做一个keepalive风格的事情，但这似乎完全违背了Meteor哲学的本质，我认为我只会作为绝对的最后手段使用。

我在`console.log`上做了一个函数`this.session.socket`，唯一可能的其他函数是`.on("data")`，但是当套接字关闭时不会调用它。

我在这里有点茫然，所以任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-21T20:02:02.223

为了完整起见，最好将上面的两个答案结合起来。换句话说，请执行以下操作：

*   保持在线状态`Meteor.users`，而不是单独的集合，如[https://github.com/erundook/meteor-profile-online](https://github.com/erundook/meteor-profile-online)
*   通过回调而不是心跳来跟踪断开连接，如[https://github.com/murilopolese/howmanypeoplearelooking](https://github.com/murilopolese/howmanypeoplearelooking)

这可能是在 Meteor 中实现这一点的规范方式。我已经将它创建为一个智能包，您可以使用 Meteorite 安装它：[https ://github.com/mizzao/meteor-user-status](https://github.com/mizzao/meteor-user-status)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T18:27:29.253

感谢 Sorhus 的提示，我设法解决了这个问题。他的回答包含心跳，我很想避免。然而，它包含了使用 Meteor 的“bindEnvironment”的技巧。这允许访问集合，否则将无法访问。

```
Meteor.publish("whatever", function() {
  userId = this.userId;
  if(userId) Stats.update({}, {$addToSet: {users: userId}});
  else Stats.update({}, {$inc: {users_anon: 1}});

  // This is required, because otherwise each time the publish function is called,
  // the events re-bind and the counts will start becoming ridiculous as the functions
  // are called multiple times!
  if(this.session.socket._events.data.length === 1) {

    this.session.socket.on("data", Meteor.bindEnvironment(function(data) {
      var method = JSON.parse(data).method;

      // If a user is logging in, dec anon. Don't need to add user to set,
      // because when a user logs in, they are re-subscribed to the collection,
      // so the publish function will be called again.
      // Similarly, if they logout, they re-subscribe, and so the anon count
      // will be handled when the publish function is called again - need only
      // to take out the user ID from the users array.
      if(method === 'login')
        Stats.update({}, {$inc: {users_anon: -1}});

      // If a user is logging out, remove from set
      else if(method === 'logout')
        Stats.update({}, {$pull: {users: userId}});

    }, function(e) {
      console.log(e);
    }));

    this.session.socket.on("close", Meteor.bindEnvironment(function() {
      if(userId === null || userId === undefined) 
        Stats.update({}, {$inc: {users_anon: -1}});
      else
        Stats.update({}, {$pull: {users: userId}});
    }, function(e) {
      console.log("close error", e);
    }));
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T03:03:53.193

查看 GitHub 项目[howmanypeoplearelooking](https://github.com/murilopolese/howmanypeoplearelooking)

> Meteor 应用程序测试以显示当前有多少用户在线。

# objective-c - 从 XCode 中的调试器获取更好的描述性数据

> ID：13544335
> 
> 赞同：2
> 
> 时间：2012-11-24T18:40:40.610
> 
> 标签：objective-c, ios, xcode, ios6, xcode4.5

我正在开发一个具有多个 UIViews 的密集 iPhone 应用程序，其中发生了一些时髦的事情，并且很多视图被添加到子视图等等。

出于调试目的，我将断点放在我认为相关的地方，然后是 po 对象（即：

po [ [ self.view superview ] subviews ]) 现在这个命令确实给了我一些信息，但它没有告诉我 UIView 的名称（设计师给它的名称）它会告诉我它是一个 UIView 或 UIImageView .

我想我会问是否有人知道我可以在运行时与调试器一起使用的任何好命令以获得更多有见地的信息。

我也知道 po [self.view recursiveDescription] 顺便说一句。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:52:34.160

当您说“设计者给它的名称”时，您是在谈论Objective-C变量名称吗？我不知道有什么方法可以做到这一点。

您显然可以设置控件的数字[`tag`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/tag)属性（您可以通过 IB 以及通过代码为那些以编程方式创建的控件设置）。`NSLog`语句和调试器显示该属性`tag`。因此，您可以通过这种方式识别视图。它只是不是很用户友好。但是，如果您想查看文本名称，您可能必须在数字标签和对您有意义的描述性名称之间建立自己的映射，然后编写您自己的方法来遍历视图，解密标签是否可以，展示更有意义的东西。

似乎您也可以使用用户定义的运行时属性来做一些事情，但我也打赌这也会是很多子类化。

# jquery - 伪 a:hover, a:link a:active 等类覆盖 .class

> ID：13544339
> 
> 赞同：0
> 
> 时间：2012-11-24T18:41:20.533
> 
> 标签：jquery, css, jquery-tools

嗨人们在使用 jquery 工具选项卡时遇到问题 [http://jquerytools.org/documentation/tabs/index.html][1]

我已经设置了所有选项卡，以便它们具有正确的悬停、活动、访问、链接状态

jQuery 工具将 .current 类应用于当前选定的选项卡。

当我查看萤火虫时，当前选项卡确实具有当前类，但它似乎继续使用伪类而不是我为它定义的当前类。

我的CSS代码是：HTML：

```
<div id="TMSEMenu">

    <ul id="TMSEtabs">
        <ul id="TMSEtabs">
            <li><a href="#Home">Home</a></li>
            <li><a href="#Together">Together</a></li>
            <li><a href="#Make">Make</a></li>
            <li><a href="#Share">Share</a></li>
            <li><a href="#Experience">Experience</a></li>
        </ul>
    </div> 
```

我的CSS是：

```
ul#TMSEtabs {
  cursor: default;
  list-style-type: none;
  margin: 0 0 0 0;
  padding: 0 0 0 0;
  z-index:5000;
}
ul#TMSEtabs ul {
  cursor: default;
  list-style-type: none;
  margin: 0 0 0 0;
  padding: 0 0 0 0;
}
ul#TMSEtabs ul li {
  background-image: none;
  float: none;
}
ul#TMSEtabs li {
  background-image: none;
  float: left;
  padding: 0 0 0 0;
  position: relative;
  white-space: nowrap;
  z-index: 100;
}
ul#TMSEtabs li ul {
  display: none;
  top: 0;
}
ul#TMSEtabs li:hover > ul {
  display: block;
  position: absolute;
}

ul#TMSEtabs li.hover > ul {
  display: block;
  position: absolute;
}

ul#TMSEtabs li.current > ul {
  position: absolute;
}
ul#TMSEtabs > li {
  background-image: none;
}
/* currently selected tabs */
ul#TMSEtabs .current a:link{
    background-color: #FFFFFF;
    color: #FFDD38;
    font-weight: normal;
    text-decoration: none;
    outline-style: none;
}
ul#TMSEtabs a:link {
    background-color: #FFFFFF;
    background-image: none;
    color: #BC1F5D;
    display: block;
    font: normal normal bold 14px Arial, Helvetica, sans-serif;
    height: auto;
    line-height: normal;
    margin: 0 0 0 50px;
    padding: 0px 5px 0px 5px;
    text-align: left;
    text-decoration: none;
    text-transform: uppercase;
    width: auto;
    outline-style: none;
}
ul#TMSEtabs a:visited {
    background-color: #FFFFFF;
    color: #BC1F5D;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-style: normal;
    font-weight: bold;
    line-height: normal;
    text-align: left;
    text-transform: capitalize;
    outline-style: none;
}
ul#TMSEtabs a:hover{
    background-color: #FFFFFF;
    color: #FECC38;
    font: normal normal bold 14px Arial, Helvetica, sans-serif;
    line-height: normal;
    text-align: left;
    text-decoration: none;
    text-transform: uppercase;
    outline-style: none;
}
ul#TMSEtabs a:active{
    background-color: #FFFFFF;
    color: #FECC38;
    font: normal normal bold 14px Arial, Helvetica, sans-serif;
    line-height: normal;
    text-align: left;
    text-decoration: none;
    text-transform: uppercase;
    outline-style: none;
} 
```

我的js是：

```
// tabs

  $("#TMSEtabs").tabs("#tabPanes > div", {
      event: 'click',
      effect: 'dizzySlide',
      rotate: true,
      current: 'çurrent'
  });
  var w;
  $.tools.tabs.addEffect("dizzySlide", function(i, done) {

        // store original width of a pane into memory
        if (!w) { w = this.getPanes().eq(0).width(); }

        // set current pane's width to zero
        this.getCurrentPane().animate({width: 0},1000, function() { $(this).hide(); });

        // grow opened pane to it's original width
        this.getPanes().eq(i).animate({width: w},1000, function() { 
            $(this).show();
            done.call();
        });

    }); 
  var api = $("#TMSEtabs").data("tabs");
    $('#nextTab').click(function() {
        api.next();
    });
    $('#prevTab').click(function() {
        api.prev();
    }); 
```

我的页面可以在这里找到：[JSFiddle][2]

更新：

我已经按照下面的答案进行了更改。

我可以让 .current 类显示的唯一方法是删除 :visited 和 :active 状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:50:35.220

解决这个问题很简单，需要对 CSS 规则排名进行一些研究。你可以在谷歌快速搜索中找到大量关于 CSS 排名的研究资源。

不幸的是`a:link`，它的排名非常高......我讨厌仅仅因为这个原因而使用它。

要覆盖，您需要向选项卡规则添加额外的选择器，例如更改：

```
.tabsClass a.current{ /* properties*/}/* class made up for example only*/ 
```

至

```
.tabsClass a.current, .tabsClass a:link.current { /* properties*/} 
```

或者简单地为此添加额外的规则`.tabsClass a:link.current`，包括与插件 css 规则匹配的所有属性并覆盖`a:link`您要更改的当前属性

使用浏览器控制台检查规则排名会有所帮助，您可以在控制台中编辑规则以提高特异性和排名

**编辑：更简单的解决方案是摆脱`:link`你的 css**

# java - 为什么浮点数有符号零？

> ID：13544342
> 
> 赞同：77
> 
> 时间：2012-11-24T18:42:07.367
> 
> 标签：java, floating-point, zero

为什么双打有`-0`以及`+0`？有什么背景和意义？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-24T18:46:40.370

`-0`（通常）被视为`0`*******。当*负*浮点数非常接近于零以至于可以考虑时，它可能会导致`0`（要清楚，我指的是[算术下溢](http://en.wikipedia.org/wiki/Arithmetic_underflow)，并且以下计算的结果被解释为*精确* `±0`，而不仅仅是非常小数）。例如

```
System.out.println(-1 / Float.POSITIVE_INFINITY); 
```

```
-0.0

```

如果我们用*正*数考虑相同的情况，我们将收到我们的好旧的`0`：

```
System.out.println(1 / Float.POSITIVE_INFINITY); 
```

```
0.0

```

* * *

******* 以下是 using`-0.0`导致的结果与 using 不同的情况`0.0`：

```
System.out.println(1 / 0.0);
System.out.println(1 / -0.0); 
```

```
无穷
-无穷

```

如果我们考虑函数，这是有道理的*`1 / x`*。当从-side*`x`*接近时，我们应该得到*正*无穷大，但是当它从-side 接近时，我们应该得到*负*无穷大。函数图应该清楚地说明这一点：`0`*`+`***`-`**

 **![](../Images/c1f7106002027be0cf4be314b5aa961e.png)

（[来源](http://www.sagemath.org/calctut/onesided.html)）

在数学方面：

![在此处输入图像描述](../Images/11bd9d08796ef90b67f3b1dfb1a35284.png)

![在此处输入图像描述](../Images/8e578f6098b625b063a793ef9e7321e0.png)

`0`这说明了计算意义上的一个显着差异`-0`。

* * *

以下是一些相关资源，其中一些已经提出。为了完整起见，我将它们包括在内：

*   [关于签名零的维基百科文章](http://en.wikipedia.org/wiki/Signed_zero)
*   [“每个计算机科学家都应该知道的关于浮点运算的知识”](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)（参见有符号零部分）
*   (PDF) [“Much Ado About Nothing's Sign Bit”](http://people.freebsd.org/~das/kahan86branch.pdf) ——W. Kahan 的一篇有趣的论文。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-24T18:43:35.963

来自维基百科

> 带符号的零是带有关联符号的零。在普通算术中， `−0 = +0 = 0`. 在计算中，存在一些数字表示中**存在两个零**的概念，通常用 `−0` 和'+0'表示，分别表示 **负零**和`+0` **正零**（[来源](http://en.wikipedia.org/wiki/Signed_zero)）。

> 这发生在整数的符号和幅度以及一个补码的有[符号数表示](http://en.wikipedia.org/wiki/Signed_number_representations)中，以及大多数浮点数表示中。数字 0 通常编码为 +0，但可以用 +0 或 -0 表示。
> 
> 根据`IEEE 754 standard`，负零和正零应该与通常的（数字）比较运算符**相等，例如 C 和 Java 的 == 运算符。**（[来源](http://en.wikipedia.org/wiki/Signed_zero)）。

当您的**浮点运算**产生的结果是**接近零**的**负浮点数**，但**不能**（由计算机）表示时，它会产生“-0.0”。例如 - 。****`5.0 / Float.POSITIVE_INFINITY -> -0.0`****

 ****`-0.0`和之间的这种区别`+0.0`为最终用户提供了更多信息，而不仅仅是显示最终结果`0`。自然，这样的概念实际上*只*在具有有限数值表示限制的系统中有用，例如计算机。在数学中，一个可以表示任何数字，无论它有多接近于零。

`−0`和`+0`是 由 计算机 执行 的 导致**[下溢](http://en.wikipedia.org/wiki/Arithmetic_underflow)**`−00`的 数学 运算 的 结果,类似于`+00`导致**[溢出](http://en.wikipedia.org/wiki/Arithmetic_overflow)**的 运算 的 结果. 对于导致数学**不确定**的运算，结果为**NaN**（*例如，* 0/ 0）。

**-0.0 和 0.0 有什么区别？**

实际上，两者都代表`0`. 此外， (-0.0 == 0.0) 返回**true**。尽管如此：

1.  `1/-0.0`产生**-Infinity**而`1/0.0`产生**Infinity**。

2.  `3 * (+0)`= **+0**和`+0/-3`= **-0**。**符号规则**适用于对有符号零执行乘法或除法。

必读“[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html#924)”。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-24T18:51:08.423

[请参阅每个计算机科学家应该了解的浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)中的“有符号零”部分

Java float 和 double 中的零不仅代表真正的零。它们也被用作任何计算的结果，其精确结果的幅度太小而无法表示。在许多情况下，负数下溢和正数下溢之间存在很大差异。例如，如果`x`是一个非常小的量级正数，`1/x`应该是正无穷大，`1/(-x)`应该是负无穷大。有符号零保留下溢结果的符号。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-25T19:22:30.463

浮点中带符号零的用处的规范参考是 Kahan 的论文“[复杂基本函数的分支切割，或无事生非的符号位](http://port70.net/~nsz/articles/float/kahan_branch_cuts_complex_elementary_functions_1987.pdf)”（以及他关于该主题的一些演讲）。

简短的版本是，在相当常见的工程应用中，通过零符号保留的符号信息对于从数值方法中获得正确的解决方案是必要的。零的符号对于大多数*实际*运算几乎没有意义，但是当考虑复值函数或使用保形映射时，零的符号可能会突然变得非常关键。

还值得注意的是，最初的（1985 年）`IEEE-754`委员会考虑并拒绝了支持浮点运算的*投影*模式，在这种模式下，只有一个无符号无穷大（在这种模式下，+/-0 在语义上是相同的，所以即使仍然有两个编码，也只有一个零）。******

# c++ - 控制台应用程序可以自己创建窗口吗？

> ID：13544345
> 
> 赞同：0
> 
> 时间：2012-11-24T18:42:26.680
> 
> 标签：c++, winapi

假设我有纯命令行应用程序，但我想添加一种方法来在用户按键时创建的弹出窗口中显示一些信息。所以窗口从一开始就不会可见，而只是作为用户的一个选项。使用什么功能来实现 - `CreateWindowEx`？有没有我可以在 MinGW 中编译的工作示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:53:26.573

控制台应用程序与任何其他应用程序一样是普通的 Win32/64 进程，它只是默认使用不同的 UI 模型。它具有对整个 Win32 API 的完全访问权限，因此没有什么可以阻止控制台应用程序显示 GUI 窗口。

# xcode - 粘贴数据或替代 CMD V 模拟

> ID：13544346
> 
> 赞同：4
> 
> 时间：2012-11-24T18:42:29.987
> 
> 标签：xcode, macos, cocoa

我曾经模拟 CMD V 事件将数据从我的应用程序粘贴到活动应用程序。但是，似乎有了新的沙盒限制，这不再被允许了。

有人知道另一种调用粘贴的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:16:12.780

您可以使用 AppleScript 做到这一点：

```
set the clipboard to "MyString"
tell application "System Events"
    keystroke "v" using {command down}
end tell 
```

在可可应用程序中，您可以使用`NSAppleScript`. 假设您的应用程序资源文件夹中有一个名为 Script.txt 的文件，如下所示：

```
tell application "System Events"
    keystroke "v" using {command down}
end tell 
```

然后，您可以使用以下代码：

```
- (void)pasteInActiveApp:(NSData *)data type:(NSString *)type
{
    NSPasteboardItem *item = [[NSPasteboardItem alloc] init];
    [item setData:data forType:type];

    NSPasteboard *pboard = [NSPasteboard generalPasteboard];
    [pboard clearContents];
    [pboard writeObjects:@[item]];

    NSDictionary *errorDict = nil;
    NSAppleScript *script = [[NSAppleScript alloc] initWithSource:[self pasteScript]];
    NSAppleEventDescriptor *result = [script executeAndReturnError:&errorDict];
    // Handle result
}

- (NSString *)pasteScript
{
    static NSString *script;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSError *error;
        script = [NSString stringWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"Script" withExtension:@"txt"] encoding:NSUTF8StringEncoding error:&error];
        if (error) {
            // Handle error
        }
    });

    return script;
} 
```

现在，您需要做的就是`pasteInActiveApp:type:`使用要粘贴的数据和粘贴板类型调用该方法。

顺便说一句，我认为将后台运行的应用程序中的内容粘贴到前台的应用程序中并不是一个好主意。首先，您不知道将其粘贴到哪个应用程序中，即使您知道，您也永远不知道将其粘贴到哪里。用户可能有一个带有多个输入字段（或类似字段）的表单的浏览器。此外，用户可能不*希望*您这样做。

编辑：更改了代码，以便在 Objective-C 代码而不是苹果脚本中设置数据。

# android - BillingSecurity.verifyPurchase - 什么是签名数据和签名？

> ID：13544347
> 
> 赞同：2
> 
> 时间：2012-11-24T18:42:32.530
> 
> 标签：android

我想检查 android inapp billing 是否已购买。我找到了这个方法...

```
protected static void verifyPurchase(String signedData, String signature) {
    ArrayList<VerifiedPurchase> purchases = BillingSecurity.verifyPurchase(signedData, signature);
    Log.e("IN APP","purchases: " + purchases.toString());
} 
```

但是我不知道我应该放入签名数据和签名中吗？试过 itemid 和 base64EncodedPublicKey，不起作用...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:24:08.477

要检查购买结果，您应该使用**BillingPurchaseObserver**类的另一种方法：

```
@Override
public void onRequestPurchaseResponse(RequestPurchase request,
        ResponseCode responseCode)
{
    Log.d("TAG", "onRequestPurchaseResponse");
    if (Consts.DEBUG)
    {
        Log.d("TAG", request.mProductId + ": " + responseCode);
    }
    if (responseCode == ResponseCode.RESULT_OK)
    {
        if (Consts.DEBUG)
        {
            Log.i("TAG", "purchase was successfully sent to server");
        }
    }
    else if (responseCode == ResponseCode.RESULT_USER_CANCELED)
    {
        if (Consts.DEBUG)
        {
            Log.i("TAG", "user canceled purchase");
        }
    }
    else
    {
        if (Consts.DEBUG)
        {
            Log.i("TAG", "purchase failed");
        }
    }
} 
```

BillingService 中的 purchaseStateChanged 方法不应该修改。

```
/**
     * Verifies that the data was signed with the given signature, and calls
     * {@link ResponseHandler#purchaseResponse(Context, PurchaseState, String, String, long)}
     * for each verified purchase.
     * 
     * @param startId
     *           an identifier for the invocation instance of this service
     * @param signedData
     *           the signed JSON string (signed, not encrypted)
     * @param signature
     *           the signature for the data, signed with the private key
     */
    private void purchaseStateChanged(int startId, String signedData,
            String signature)
    {
            //...
    } 
```

# android - 创建游戏用户界面。像素问题

> ID：13544350
> 
> 赞同：-5
> 
> 时间：2012-11-24T18:43:08.390
> 
> 标签：android, user-interface

我应该如何为安卓游戏创建用户界面？我应该使用布局 XML 文件吗？

我在我制作的几个应用程序中使用了 html，它是创建可扩展 UI 的更简单方法（但那不是游戏）。如何在不使用 HTML 的情况下使 UI 可扩展？

像素也有问题：每部手机上的每个画布的宽度 X 高度都不同，所以如果我在 [100,100] (px) 位置放一些东西，它不必在同一位置（取决于手机到手机），如果我在手机上创建程序在平板电脑或分辨率更高的手机上会发生什么？

有没有办法绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:47:17.650

您的问题很混乱，但至于像素 - 您需要在[此处阅读，](http://developer.android.com/guide/practices/screens_support.html)因为屏幕**密度**是您在计算中需要考虑的。您可以（取决于您的代码）使用维度资源或自己计算（设备的屏幕密度可以从[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html#densityDpi)的 densityDpi 字段中读取：

```
DisplayMetrics dm = context.getResources().getDisplayMetrics(); 
```

# php - 选择后我无法向 mysql 数据库添加事件

> ID：13544351
> 
> 赞同：0
> 
> 时间：2012-11-24T18:43:29.443
> 
> 标签：php, javascript

我正在为一个项目使用全日历。我无法将新事件插入 mysql 数据库。

它可以使用 AJAX 完成，但我无法将变量从 JS 传递到 php 代码。

这是我的代码：

```
$(document).ready(function() {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var calendar = $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            } ,
            defaultView: 'month',
            weekends: true,
            selectable: true,
            selectHelper: false,
            allDayText: 'ore di lavoro',
            editable: true,
            theme: true,

            select: function(start, end, allDay,jsEvent,view) {

             if (view.name === "month") {

                $('#calendar').fullCalendar('gotoDate', start);
                $('#calendar').fullCalendar('changeView', 'agendaDay');

            } else {

                var title = prompt('Riparazione racchetta da tennis:');
                if (title) {  
                    calendar.fullCalendar('renderEvent',
                        {
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                        true // make the event "stick"

                    );
                   $.ajax({

                      type: "POST",
                      url: "kot.php",
                      data: "title=" + title + "&start=" + start + "&end=" + end,

                   });
                $('#calendar').fullCalendar('refetchEvents');   
                }
                calendar.fullCalendar('unselect');
            }
            },

             eventSources: [

        // your event source
        {
            url: 'json-events.php',
            type: 'POST',

            error: function() {
                alert('there was an error while fetching events!');
            },
            //color: 'blue',   // a non-ajax option
            //textColor: 'black' // a non-ajax option
        },

        // any other sources...
      {
            url: 'kot.php',
            type: 'POST',
            data: {
                custom_param1: 'something',
                custom_param2: 'somethingelse',
                custom_param3: 'somethingelsee'

            },
            error: function() {
                alert('there was an error while fetching events!');
            },
            color: 'yellow',   // a non-ajax option
            textColor: 'black' // a non-ajax option
        }
    ]               
        });
    });
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:29:20.550

在您的 fullCalendar 初始化中，作为组织问题，您可能需要考虑将函数调用放在初始化参数与内联 js 代码中。

像这样：

```
 function dayClickEvent(date, allday, jsEvent, view){
       //do something with date, allday, jsEvent, view 
  }
  function eventClickEvent(event, jsEvent, view){
       //do something with event, jsEvent, view
  }
  function eventAfterRenderEvent(event, element, view){
       //do something with event, element, view
  }
  function eventMouseoverEvent(event, jsEvent, view){
       //do something with event, element, view
  }
  function eventMouseoutEvent(event, jsEvent, view){
       //do something with event, element, view
  }
  function viewDisplayEvent(view){
       //do something with view
  }
  function loadingEvent(bool){
       //do something with bool
  } 
```

然后当你初始化：

```
 $('#fullcalendar').fullCalendar({
    theme: true,
    header: {
        theme: true,
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    editable: true,
    eventSources: [
        {
            url: 'my/calender/data/url',
            cache: false,
            type: 'POST',

            data: {
                ourl: 'my/actionable/url',
                myProperty: $("#foo").data("val") || ''
            },

            error: function (prob) {
                //handle ajax error for event load
            }
        }
    ],
    dayClick: function (theDate, allDay, jsEvent, view) {
        dayClickEvent(theDate, allDay, jsEvent, view);
    },
    eventClick: function (event, jsEvent, view) {
        eventClickEvent(event, jsEvent, view);
    },
    eventAfterRender: function (event, element, view) {
        eventAfterRenderEvent(event, element, view);
    },
    eventMouseover: function (event, jsEvent, view) {
        eventMouseoverEvent(event, jsEvent, view);
    },
    eventMouseout: function (event, jsEvent, view) {
        eventMouseoutEvent(event, jsEvent, view);
    },
    viewDisplay: function (view) {
        viewDisplayEvent(view)
    },
    loading: function (bool) {
        loadingEvent(bool)
    }
}); 
```

至于您的 ajax 问题...在不知道您的端点（服务器/应用程序/页面）是如何配置的情况下，这是一个带有花里胡哨的示例 ajax 调用（您的 ajax 调用似乎缺少一些属性）：

```
 $.ajax({
    type: 'POST',
    url: "my/Url/Here",
    dataType: "json",
    data: JSON.stringify({myProperty:"myValue"}),
    cache: false,
    contentType: "application/json; charset=utf-8",
    traditional: true,
    success: function (returnObject) {
        ///do something with returnObject
    },
    error: function (exception) {
        ///exception.responseText will contain any pertinent errors returned from server.
    }
}); 
```

您可以[在此处查看有关 jQuery $.ajax() 方法的更多信息。](http://api.jquery.com/jQuery.ajax/ "jQuery ajax")

我想说 - 检查您的端点（服务器/应用程序/页面）是如何配置的（例如 - 它希望从要处理的请求中接受/查找什么），并相应地参数化/调整您的 ajax 调用。

# php - Zend Framework 2 Architecture（如何减少模块之间的耦合）？

> ID：13544353
> 
> 赞同：4
> 
> 时间：2012-11-24T18:43:40.717
> 
> 标签：php, architecture, zend-framework2, software-design

一个 ZF2 系统中有许多组件。每个组件都有自己的表示层、业务层和数据层。问题是当组件 Foo 有一个使用组件 Bar 的数据层的控制器时。

例子：

```
<inside modules, each module can be individually deployed or removed>
\modules
   \Foo                  ; one module (this directory) can be added or removed
     \view               ; presentation layer (view) for all subcomponents
        \Subcomponent1
            \Action1
        \Subcomponent2
            \Action2
        ...
     \src
        \Subcomponent1
            \Entity      ; data layer     (model)
            \Controller  ; business layer (controller)
            \Service     ; service layer  (service)
        \Subcomponent2
            \Entity
            \Controller
            \Service
        \Subcomponent3
            ...
  \Bar
     \view
         ...
     \src
         \Subcomponent1
            ...
  \Baz
     \src
         \Subcomponent1
            ... 
```

**子组件与来自其他子组件的实体强耦合，通常来自完全不同的组件。控制器和服务就是这种情况。这可以解决吗？**

Foo\Subcomponent1 有一个 FooSub1Service，它使用 Bar\Subcomponent1 中的实体来处理传递的数据并将它们导入数据库。Baz\Subcomponent1 有一个 AuthenticationService，它使用 Bar\Subcomponent1 实体通过 ID 等查找用户。

我知道依赖注入，但在这种情况下，每个子组件中都有 EntityManager，它被指示按名称和 PK 查找实体，即 find("Bar\Subcomponent1\Entity\User", 123)。而且，在持久化实体时，我必须实例化任何具有外键的东西，即 UserAddress 并将其添加到 User。每次我调用 x = new NameOfEntity() 时，我都会将子组件与子组件中的某个实体紧密耦合，通常来自不同的系统模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T09:48:13.500

在 ZF2 中，可以使用 减少模块之间的耦合[`EventManager`](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.event-manager.event-manager.html?highlight=eventmanager)，另请参见[此处](http://akrabat.com/zend-framework-2/an-introduction-to-zendeventmanager/)。

此外，`module/config/module.config.php`用作[Facade](http://en.wikipedia.org/wiki/Facade_pattern)。

所有实体都可以在任何模块的文件中定义*一次。*`module/config/module.config.php`然后其他模块可以使用[`ServiceManager`](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.service-manager.quick-start.html)来解决它们的依赖关系。

`ServiceManager`实现了服务定位器[模式](http://en.wikipedia.org/wiki/Service_locator_pattern)。

使用 Facade ( `module.config.php`) 和`EventManager`，成功地减少了模块之间的耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:53:33.153

您不能总是删除所有依赖项。例如，身份验证模块通常依赖于某种形式的用户凭据。

减少与特定类耦合的一种方法是允许使用适配器替换依赖项。

例如，如果您希望能够在身份验证模块中使用不同类型的用户模块，您可以在身份验证模块中定义一个接口，该接口必须由用户模块中的适配器实现，以便与它。然后，向您的 auth 模块添加一个配置选项，该选项允许用户更改使用的用户适配器实现。

根据复杂性，您还可以简单地为对象本身定义特定接口，而不是使用适配器。但是，这有时可能会在对象中添加不相关的功能等，可能会使它们的实现更难理解。

最后，我建议不要尝试在您的代码中实现过多的灵活性。除非您计划与世界共享您的模块，否则您不太可能需要它，因为只需更改模块中具有硬依赖的几行代码通常会简单得多，而不是编写全新的接口和类. 这显然是您需要根据您计划如何使用这些模块来评估自己的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T17:37:07.480

不要直接访问实体或存储库。每个模块实现一个或多个服务，你可以给他们一个接口来清楚地说明这一点。

如果您像 ORM Doctrine 2 一样使用数据层，那么每个模块中的每个 /entity 文件夹无论如何都是共享的。这使得可以在一个存储库中进行连接并获取连接的实体。这还不错。

不要仅仅为了减少依赖而滥用事件管理器。使用共享服务并仅使用这些服务。

当您想要调用整个应用程序并收集东西或需要答案时，请使用事件管理器。

# android - 在 JB 4.2 上的 onResume 之后调用 onCreateOptionsMenu

> ID：13544355
> 
> 赞同：22
> 
> 时间：2012-11-24T18:43:49.587
> 
> 标签：android, android-fragments, android-actionbar, android-4.2-jelly-bean

我的应用程序中有以下片段：

```
public class MyFragment extends SherlockListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
  private MenuItem refresh = null;

  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setHasOptionsMenu(true);

    //.....

    // NPE here
    refresh.setActionView(R.layout.indeterminate_progress_action);
    getActivity().getSupportLoaderManager().initLoader(0, null, this);
  }

  @Override
  public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.refresh_menu, menu);
    refresh = (MenuItem) menu.findItem(R.id.menu_item_refresh);
  }

  @Override
  public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    mAdapter.swapCursor(data);
    refresh.setActionView(null);
  }
} 
```

基本上，当用户启动 Activity 时，我想在操作栏中显示一个进度微调器，直到加载器完成。在 Android 4.2 之前一切正常。在 Android 4.2 上，我收到以下错误：

```
11-24 13:37:14.811: E/AndroidRuntime(17850): Caused by: java.lang.NullPointerException
11-24 13:37:14.811: E/AndroidRuntime(17850):    at com.MyApp.library.fragments.MyFragment.onActivityCreated(TabFragment.java:65) 
```

添加一些断点后，我意识到 onCreateOptionsMenu 在 onActivityCreated 之后被调用。我可以使用另一个生命周期事件吗？有没有更好的方法来达到预期的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T17:46:57.043

我用`onPrepareOptionsMenu`这种方式来实现你想要做的事情。（未经测试，但应该给你一个想法。）

```
private boolean mIsLoading = true;

@Override
public void onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    refresh = (MenuItem) menu.findItem(R.id.menu_item_refresh);
    if (!mIsLoading) {
        refresh.setActionView(null);
    }
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    mAdapter.swapCursor(data);
    mIsLoading = false;
    getActivity().invalidateOptionsMenu();
} 
```

# apache-zookeeper - zookeeper 检查特定服务器是否是领导者

> ID：13544359
> 
> 赞同：3
> 
> 时间：2012-11-24T18:44:01.557
> 
> 标签：apache-zookeeper

使用 Zookeeper API，是否可以知道当前服务器是否是 Zookeeper 集群的领导者？

文档提到**领导者已经看到了所有追随者中最高的 zxid。**. 有可能以某种方式检查吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-11-01T10:12:06.940

您可以从不同的位置找到此信息。最简单的方法是从每个 Zookeeper 机器上运行脚本`./bin/zkServer.sh status`。您将得到以下形式的答案：

> ZooKeeper JMX 默认启用
> 使用配置：/path/to/conf/zoo.cfg
> 模式：follower

对于领导节点，最后一行将相应地显示。

如果您想从导入 ZK 客户端库的 Java 代码中实现这一点，您可以使用如下类`FourLetterWordMain`：

```
String zkAnswer = FourLetterWordMain.send4LetterWord ("<zk-address>", <zk-port>, "srvr"); 
```

答案字符串如下所示：

> Zookeeper 版本：3.4.10-39d3a4f269333c922ed3db283be479f9deacaa0f，构建于 2017 年 3 月 23 日 10:13 GMT
> 延迟最小/平均/最大：0/0/6
> 接收：18893
> 发送：18957
> 连接：2
> 未完成：0 Zxid：0x280000016
> 领导者
> 节点数：337

这段代码基本上也被`zkServer.sh`脚本使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:31:05.207

您必须向每个实例发送一个 stat/srvr 4 字母单词，然后解析结果。领导者将是具有“模式：领导者”的那个。但是，这不是非常有用的信息。领导者可以随时更换。为什么需要这些信息？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T07:57:54.783

不，这是明确隐藏的。您可以使用 JMX 或四个字母词之一，但这在客户端 API 之外。

# android - multiple textview in a row

> ID：13544363
> 
> 赞同：4
> 
> 时间：2012-11-24T18:44:19.667
> 
> 标签：android, android-layout, textview, row

It's a very simple question but I dont get how to do it. I have a listview adapter and a xml row to display each row. I want to display 3 textview in a single row. This is my XML code:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/txtElement"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="24px"
        android:textColor="#000000">
    </TextView>
      <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/txtElement2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="24px"
        android:textColor="#000000">
    </TextView>
      <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/txtElement3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="24px"
        android:textColor="#000000">
    </TextView>

</LinearLayout> 
```

I want the text to be displayed like this:

txt1 txt2 txt3

And this is my adapter code (but I guess the problem is in the XML):

```
 TextView tv = (TextView) row.findViewById(R.id.txtElement);
    tv.setText(currentElement.getTitle());          

    TextView tv2 = (TextView) row.findViewById(R.id.txtElement2);
    tv2.setText(currentElement.getAuthor());            

    TextView tv3 = (TextView) row.findViewById(R.id.txtElement3);
    tv3.setText(""+currentElement.getNumPost()); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:46:40.553

Change orientation `android:orientation="horizontal"` of LinearLayout.

**EDIT**

***And how if I would like to display it like: txt1 in one line and txt2 txt3 in a second line?***

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:text="1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:text="2" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@+id/textView2"
        android:text="3" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:47:01.433

What you need to do is to only change the orientation from vertical to horizontal.

# c++ - 重载 * 运算符 - 必须接受零个或一个参数

> ID：13544364
> 
> 赞同：13
> 
> 时间：2012-11-24T18:44:41.257
> 
> 标签：c++, operator-overloading

我是重载运算符的新手，我进行了一些搜索，发现[这篇有用的文章](http://www.learncpp.com/cpp-tutorial/92-overloading-the-arithmetic-operators/)，我像作者一样编写了自己的代码，但`vector vector::operator*(float, vector) must take either zero or one argument`出现错误。

这是我的代码：

```
class vector
{
      public:
       float x;
       float y;

      vector(float, float);
      float operator$ (vector, vector);
      vector operator* (float, vector);
      vector operator* (vector, float);
};

vector::vector(float _x = 0, float _y = 0)
{
   x = _x;
   y = _y;     
}
const float vector::operator$ (const vector &v1, const vector &v2)
{
    return (v1.x * v2.x) + (v1.y * v2.y);
}

const vector vector::operator* (const float &m, const vector &v)
{
    vector ret_val = v;
    ret_val.x *= m;
    ret_val.y *= m;
    return ret_val;
}

const vector vector::operator* (const vector &v, const float &m)
{
      return m * vector;     
} 
```

我的操作系统`kubuntu 12.04`和我的 IDE`dev-C++`使用 wine windows 程序加载器在 linux 上运行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-24T18:47:12.933

因为您定义`operator*()`为成员函数，所以已经有一个隐式参数：调用方法的对象！因此，成员函数采用一个显式参数，而不是两个。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-23T18:11:43.040

只需在类之外声明您的运算符重载函数。此外，您返回的 const 可能不是您想要的。

```
class foo {
  //code
};

foo operator*(foo& lhs, bar& rhs) const;
foo operator*(bar& lhs, foo& rhs) const; 
```

# zend-framework2 - ZF2 库中没有 Zend\Validator\Alnum。我在哪里可以找到它？

> ID：13544365
> 
> 赞同：0
> 
> 时间：2012-11-24T18:44:44.830
> 
> 标签：zend-framework2, zend-validate

我已经下载了 ZF2 框架，但目录中没有`Zend\Validator\Alnum`类`\library\Zend\Validator`。但是手册说它必须在那里：

```
// Basic usage
// A basic example is the following one:

$validator = new Zend\Validator\Alnum();
if ($validator->isValid('Abcd12')) {
    // value contains only allowed chars
} else {
    // false
} 
```

这是正常的还是他们已经改变了他们的框架但忘记了改变手册？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T00:20:24.867

您可以在 i18n 组件中找到 alnum 验证器：

```
new Zend\I18n\Validator\Alnum(): 
```

# iphone - 如何创建与越狱 iOS 上的守护进程通信的应用程序 GUI？

> ID：13544366
> 
> 赞同：1
> 
> 时间：2012-11-24T18:44:53.363
> 
> 标签：iphone, objective-c, ios, xcode, jailbreak

我正在为越狱的 iOS 编写一个守护进程，我想使用 GUI 为其设置某些设置。是否可以为守护程序提供 GUI？如果没有，我如何编写一个可以与守护进程通信的应用程序，以便我可以通过应用程序控制守护进程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T00:51:52.740

是的，你可以这样做。我有多个应用程序，其中包含一个 normal `UIApplication`，然后是一个一直运行的后台**Launch Daemon**。

这取决于你想在两者之间交流什么样的信息。我使用的一种模式（也有许多其他方法）是拥有一个共享的首选项文件。我可能会将这个文件存储在`/var/mobile/Library/MyAppName/user_preferences.plist`. 启动守护进程会读取这个文件，而 UI 可以写入它。

`writeToFile:atomically:`当用户通过 UI 更改某些设置时，您的 UI 可以用in写出 plist 文件`NSDictionary`。然后它需要告诉守护程序是时候重新读取首选项文件了。您可以通过通知来做到这一点。在 UI 应用程序中：

```
#import <notify.h>

notify_post("com.mycompany.settings_changed"); 
```

`com.mycompany.settings_changed`然后，在您的守护程序中，您将注册一个回调方法或块，当通知发布 时将由 iOS 调用。

```
int status = notify_register_dispatch("com.mycompany.settings_changed",
                                      &notifyToken,
                                      dispatch_get_main_queue(), ^(int t) {
                                          NSLog(@"settings notification received");
                                          [self loadSettings];
                                      }); 
```

然后，守护程序的`loadSettings`方法可以使用`dictionaryWithContentsOfFile:`.

如果以后有更多时间，我会尝试添加更多描述（和代码）。

# c++ - 找不到用于 DirectX 编程的 d3dcompiler_43.dll

> ID：13544367
> 
> 赞同：16
> 
> 时间：2012-11-24T18:44:59.527
> 
> 标签：c++, windows-8, visual-studio-2012, directx, windows-runtime

我正在尝试学习 DirectX 编程。但我遇到了一个障碍。

**我似乎缺少这个文件：d3dcompiler_43.dll**

我已经安装（按此顺序）：

1.  视觉工作室 2012
2.  视窗 8
3.  视窗电话 8 SDK
4.  视窗 8 SDK

我想我需要一个 DirectX SDK，但这个[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275%28v=vs.85%29.aspx)说我不需要：

> 从 Windows 8 开始，DirectX SDK 包含在 Windows SDK 中。

我应该只安装 DirectX Distributable 吗？我担心这会给我dll，但我也会错过其他东西......

这是我得到的确切错误：

> 无法加载 DLL 'd3dcompiler_43.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

**更新：** 我跑了`dxdiag`，它说我安装了 DirectX 11……不知道为什么我不能让它工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T22:26:49.793

我在这里找到了答案：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx)

它说：

> 任何使用运行时着色器编译的项目都必须将 D3DCOMPILER_46.DLL 复制到项目的本地可执行路径。此 DLL 位于 %ProgramFiles(x86)%\Windows Kits\8.0\Redist\D3D\arch 下 Windows SDK 安装的此子目录中，其中 arch 为 x86 和 x64。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-26T08:07:46.200

有关 D3DCompile 以及如何分发它的各种版本的详细信息，请参阅此[博客文章...](http://blogs.msdn.com/b/chuckw/archive/2012/05/07/hlsl-fxc-and-d3dcompile.aspx)

简而言之：

*   #43 和之前的版本由旧版 DirectX 最终用户运行时 Redist（又名 DirectSetup）部署。
*   #46 由 VS 2012 / Windows 8.0 SDK 安装，并与您的 Win32 桌面应用程序“并行”部署
*   #47 由 VS 2013 / Windows 8.1 SDK 安装，可以与您的 Win32 桌面应用程序“并行”部署，但它也包含在 Windows 8.1 操作系统中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-13T16:21:41.447

如果您安装了 Chrome，那么这里值得屠夫：

```
C:\Users\<USER>\AppData\Local\Google\Chrome\Application\26.0.1410.64 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-05T05:25:08.957

您需要安装最新的 DirectX [http://www.microsoft.com/en-us/download/confirmation.aspx?id=35](http://www.microsoft.com/en-us/download/confirmation.aspx?id=35)

# objective-c - 在按钮触摸时播放声音

> ID：13544368
> 
> 赞同：0
> 
> 时间：2012-11-24T18:45:00.287
> 
> 标签：objective-c, ios, xcode

我想创建一个喊叫游戏。当用户按下喊按钮时，应该播放声音。我有密码。但我的问题是：如果用户触摸按钮，声音播放良好，但如果我非常快地按下按钮，按钮将突出显示的图像变慢。如果我在 ViewDidLoad 中使用我的代码，按钮图像会很好，非常快，但声音播放速度很慢，延迟。

这是我的代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"tap" ofType:@"mp3"];
    AVAudioPlayer *playOn =[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

    playOn.delegate=self;

    [playOn play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:03:27.390

正如您所说，您需要在单击按钮时播放文件，所以在这里您应该在单击按钮时使用小音频文件

这里假设在按钮单击时调用下面的方法。

```
- (void)playAudio{

  if([player isPlaying])
            {

             [self stopAudio];
            }
   } 
    /* Use this code to play an audio file */
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:pathOfFile ofType:@"mp3"];
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
    player.numberOfLoops = 0; //o for play only once that file.
    player.delegate= self;
    isAudioPlaying = YES;
    [player play];
    //player is instance of AvAudioPlayer.
   //here write code for setting aND CHANging the image.
}

- (void)stopAudio
 {
 if (player!= nil) {
    [player stop];
 //do some task for changing the Image i.e setting the default image
 }

 } 
```

# javascript - 在没有长度属性的变量上使用 .length 会导致崩溃

> ID：13544371
> 
> 赞同：0
> 
> 时间：2012-11-24T18:45:26.560
> 
> 标签：javascript, crash, variable-length

我有一个包含各种类型（布尔值、数组、null、...）的大数组，我正在尝试访问它们的属性`arr[i].length`，但其中一些显然没有长度。

我不介意那些缺少长度的人是否返回`undefined`（我可以简单地使用`arr[i].length||0`或类似的东西），但事实并非如此，整个事情会因某些值（`null`或`undefined`例如）而崩溃。

```
var i, len, arr;

arr = [true, ["elm_0"], 99, "abc"]; //crashes if you add 'null' or 'undefined'

for(i = 0, len = arr.length ; i<len ; i++){
    document.write(arr[i].length + "<br>");
}

document.write("I was executed"); 
```

*   `null`除了and之外，还有哪些其他 var 会崩溃`undefined`？
*   如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:50:42.897

你会得到一个没有属性的`TypeError`声明。`undefined`除了将它包装在 s 的 try catch 中，您无能为力`TypeError`。

请注意，这与在评估为 undefined 的事物上引用属性将返回`ReferenceError`:`undefined`永远不应该具有属性的原因相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:52:41.213

您可以只检查 null 而不进行特定于类型的检查，这也会捕获未定义的值。

```
var i, len, arr;
arr = [true, ["elm_0"], 99, "abc", null, undefined];
for (i = 0, len = arr.length; i < len; i++) {
    if (arr[i] != null) {
        console.log(arr[i].length);
    }
}
console.log("I was executed"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T18:54:07.217

检查`arr[i]`之前`arr[i].length`

```
var i, len, arr;

arr = [true, ["elm_0"], 99, "abc"];

if(arr) for(i = 0, len = arr.length || 0 ; i<len ; i++){
    if(arr[i]) document.write((arr[i].length || 0) + "<br>");
    else document.write(0 + "<br>"); // what to do if no arr[i]
}

document.write("I was executed"); 
```

您也可以使用三元运算符`(arr[i]?arr[i].length||0:0)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T18:49:29.363

尝试这个：

```
var i, len, arr;

arr = [true, ["elm_0"], 99, "abc"]; //crashes if you add 'null' or 'undefined'

for(i = 0, len = arr.length ; i<len ; i++){

try{
console.log(arr[i].length);
}Catch(e){console.log(0);}
}

console.log("I was executed"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-24T18:49:06.897

如果您的唯一目标是确定这些对象之一是否为数组，则不要：

```
for(i = 0, len = arr.length ; i<len ; i++){
    console.log(arr[i].length);
} 
```

你应该试试这个：

```
for(i = 0, len = arr.length ; i<len ; i++){
    if (arr[i] instanceof Array)
        console.log(arr[i].length);
} 
```

# go - Go中惯用的切片拼接？

> ID：13544374
> 
> 赞同：4
> 
> 时间：2012-11-24T18:45:40.100
> 
> 标签：go

我有以下用于实现拼接的代码（即，给定一个完整的字节切片、另一个字节切片部分和一个表示我想用部分覆盖的完整位置的 int pos）：

```
package main

import (
    "fmt"
    "bytes"
)

func main() {
    full := []byte{0,0,0,0,0,0,0}
    part := []byte{1,1,1}

    newFull1 := splice(full, part, 2)
    fmt.Println(newFull1)
    // [0 0 1 1 1 0 0]

    newFull2 := splice(full, part, 3)
    fmt.Println(newFull2)
    // [0 0 0 1 1 1 0]
}

func splice(full []byte, part []byte, pos int) []byte {
    return bytes.Join([][]byte{full[:pos], part, full[len(full[:pos])+len(part):]}, []byte{})
} 
```

基本上，我的方法执行 3 字节切片的连接：完整的第一部分不会被部分覆盖，全部部分，然后是完整的剩余部分。有没有更好/更惯用的方法来做到这一点？我无法在标准库中找到实现此功能的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T19:10:59.793

如果您知道部分完全在完整范围内，则可以使用复制功能。

```
func main() {
    full := []byte{0, 0, 0, 0, 0, 0, 0}
    part := []byte{1, 1, 1}

    copy(full[2:], part)
    fmt.Println(full)
} 
```

[操场](http://play.golang.org/p/toFIvcYFW-)

这会覆盖完整的。如果您想保留原件，您可以先使用附加功能进行复制。

```
func main() {
    full := []byte{0, 0, 0, 0, 0, 0, 0}
    part := []byte{1, 1, 1}

    newFull := append([]byte{}, full...)
    copy(newFull[2:], part)
    fmt.Println("newFull:      ", newFull)
    fmt.Println("original full:", full)
} 
```

[操场](http://play.golang.org/p/xrqJwz5Pvj)

请注意，这仍然具有原始代码的限制，该部分必须适合完整的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-11T05:15:25.497

这是拼接字节切片的另一种变体。该算法类似于 Anton Litvinov 的 stringSplice()。因为 append 函数与输入共享相同的切片，所以必须使用与输入相同长度的副本。这不是由上一个答案中的“beatgammit”完成的，它无法正常工作。

```
package main

import "fmt"

func sliceSplice(input []byte, start, deleteCount int, item []byte) ([]byte) {
    fmt.Printf("input:      %v start = %d deleteCount = %d item: %v\n", input, start, deleteCount, item)
    cpy := make([]byte, len(input))
    copy(cpy, input)
    fmt.Println("cpy:       ", cpy)
    if start > len(cpy) {
        return append(cpy, item...)
    }
    ret := append(cpy[:start], item...)
    fmt.Println("ret:       ", ret)

    if start+deleteCount > len(cpy) {
        return ret
    }
    fmt.Println("cpy:       ", cpy, "       modified by shared slice 'ret'")
    fmt.Println("input[s+d] ", input[start+deleteCount:], "         not modified")
    return append(ret, input[start+deleteCount:]...)
}

func main() {
    oldFull := []byte{0, 0, 1, 1, 1, 0, 0}
    fmt.Println("oldFull:      ", oldFull, "\n")
    myFull := sliceSplice(oldFull, 3, 0, []byte{2, 2})
    fmt.Println("myFull:       ", myFull, "\n")
    myFull = sliceSplice(oldFull, 3, 1, []byte{2, 2})
    fmt.Println("myFull:       ", myFull, "\n")
    myFull = sliceSplice(oldFull, 3, 4, []byte{2, 2})
    fmt.Println("myFull:       ", myFull, "\n")
    myFull = sliceSplice(oldFull, 3, 6, []byte{2, 2})
    fmt.Println("myFull:       ", myFull, "\n")
    myFull = sliceSplice(oldFull, 7, 0, []byte{2, 2})
    fmt.Println("myFull:       ", myFull, "\n")
    myFull = sliceSplice(oldFull, 9, 6, []byte{2, 2})
    fmt.Println("myFull:       ", myFull, "\n")
} 
```

我还包括了一组测试用例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:57:10.610

为什么不使用`append`内置？

```
func splice(full, part []byte, pos int) (ret []byte) {
    ret = append(full[:pos], part...)
    return append(ret, full[pos:]...)
} 
```

这可能不是很快（大量复制），但它非常易读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-23T08:26:30.297

字符串的变体（拆分/拼接/连接）。

```
func stringSplice(full string, start, deleteCount int, item string) (ret string) {
    if start > len(full) {
        return full + item
    }
    ret = full[:start] + item

    if start+deleteCount > len(full) {
        return ret
    }
    return ret + full[start+deleteCount:]
} 
```

# ios - 设置作为子视图控制器添加的导航控制器的框架

> ID：13544375
> 
> 赞同：6
> 
> 时间：2012-11-24T18:45:42.997
> 
> 标签：ios, uinavigationcontroller, childviewcontroller

我试图添加一个`UINavigationController`作为子视图控制器，然后给它一个比它的父级更小的框架。但是，更改导航控制器的框架并*不能*正确更改导航控制器的根视图控制器的框架。

在`viewDidLoad`

```
RootController *rootController = [[RootController alloc] init];
_navController = [[UINavigationController alloc] initWithRootViewController:rootController];
[rootController release];

[self addChildViewController:_navController];
[self.view addSubview:_navController.view];
[_navController didMoveToParentViewController:self]; 
```

然后，在`viewWillAppear:`：

```
CGRect bounds = self.view.bounds;
bounds.origin.x = 20;
bounds.origin.y = 20;
bounds.size.width = bounds.size.width - 20;
bounds.size.height = bounds.size.height - 20;
_navController.view.bounds = bounds; 
```

虽然导航栏放置正确，但根视图控制器的白色背景却没有。我到底在做什么错？谢谢你的帮助。 ![在此处输入图像描述](../Images/19e2edffb9caae75413d28778fc664ac.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T22:56:55.680

`viewDidLoad`如果您在将子视图控制器添加到父视图控制器后立即执行此操作，它实际上会起作用：

```
_navController.view.frame = CGRectInset(self.view.bounds, 20, 20); 
```

# android - 如何将现有的全屏面板放入普通 Activity 的 SurfaceView 元素中

> ID：13544377
> 
> 赞同：2
> 
> 时间：2012-11-24T18:46:05.393
> 
> 标签：android, android-canvas, panel, surfaceview

我有一个用于以全屏模式显示地图的地图活动：

```
public class MapActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(new Panel(this));
}

public class Panel extends SurfaceView implements SurfaceHolder.Callback {

public Panel(Context context) {
        super(context);
        getHolder().addCallback(this);

        // initiate new thread for drawing
        _thread = new CanvasThread(getHolder(), this);
}

// start thread 
@Override
public void surfaceCreated(SurfaceHolder holder) {
        CanvasThread.setRunning(true);
        _thread.start();
}

// start drawing objects on canvas
@Override
public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
     /* several canvas operations ...
     */
}

// Thread specific class
static class CanvasThread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private Panel _panel;
    private static boolean _run = false;

    public CanvasThread(SurfaceHolder surfaceHolder, Panel panel) {
        _surfaceHolder = surfaceHolder;
        _panel = panel;
    }

    public static void setRunning(boolean run) {
        _run = run;
    }

    @Override
    public void run() {
        Canvas c;
        Log.d("Thread", "start");
        while (_run) {
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    Log.d("Thread", "Canvas c init");
                    _panel.onDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
}
} 
```

现在，我想使用同一个类在 SurfaceView 元素内的其他活动中显示我的地图。因此，我尝试在新的 Activity 中使用 SurfaceView 元素，如下所示：

```
....
Panel surface = new KarteActivity().new Panel(this);
    surface._thread.start();
    CanvasThread.setRunning(true);
    LinearLayout midLL = new LinearLayout(this);

    midLL.findViewById(R.id.surfaceView1);
    midLL.addView(surface); 
```

这会导致空指针异常，因为画布为空。在全屏模式下我没有错误。我的错误是什么？

解决此类问题的通常方法是如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:08:53.277

好的，最后我自己得到了答案:) 这是解决方案：

1.  包含 SurfaceView 元素的活动必须交出 SurfaceHolder

    ```
    SurfaceView surface = (SurfaceView) findViewById(R.id.surfaceView1);
    SurfaceHolder surfaceHolder = surface.getHolder();
    Panel panel = new Panel(this,surfaceHolder); 
    ```

2.  表面类必须在其构造函数中初始化表面，并且在创建表面时线程将启动。

    ```
    public class Panel extends SurfaceView implements SurfaceHolder.Callback {

    public Panel(Context context, SurfaceHolder surfaceHolder) {
        super(context);
        surfaceHolder.addCallback(this);
    }

    // start thread 
    @Override
    public void surfaceCreated(SurfaceHolder surfaceHolder) {
        // initiate new thread for drawing
        _thread = new CanvasThread(surfaceHolder, this);
        _thread.setRunning(true);
        _thread.start();
    }

    // start drawing objects on canvas
    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
     /* several canvas operations ...
     */
    }

    // Thread specific class
    class CanvasThread extends Thread {
        private SurfaceHolder _surfaceHolder;
        private Panel _panel;
        private boolean _run = false;

        public CanvasThread(SurfaceHolder surfaceHolder, Panel panel) {
            _surfaceHolder = surfaceHolder;
            _panel = panel;
        }

        public void setRunning(boolean run) {
            _run = run;
        }

        @Override
        public void run() {
            Canvas c;
            Log.d("Thread", "start");
            while (_run) {
                c = null;
                try {
                    c = _surfaceHolder.lockCanvas(null);
                    synchronized (_surfaceHolder) {
                        Log.d("Thread", "Canvas c init");
                        _panel.onDraw(c);
                    }
                } finally {
                    // do this in a finally so that if an exception is thrown
                    // during the above, we don't leave the Surface in an
                    // inconsistent state
                    if (c != null) {
                        _surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
    }
    } 
    ```

这对我有用，但我决定将类 Panel 与类 MapActivity 分开（如我的问题所示）

# git - 我可以影响 gitk 和 Eclipse Egit 中显示的分支的顺序/列吗

> ID：13544378
> 
> 赞同：8
> 
> 时间：2012-11-24T18:46:16.273
> 
> 标签：git, egit, git-log, gitk, revision-history

这样做时，`gitk --all`我会得到一个关于整个仓库的提交/分支/标签的很好的总结。

但是，分支的显示方式并不总是一致的，而且它也与 Egit 在 Eclipse 的 History 窗格中使用的方法不同。

**有没有办法控制**gitk 和 egit 的列的顺序？

具体来说，我希望始终在第一列（最左侧）中对 master 进行提交。

（如果可能的话，我希望将[nvie 模型的图表](http://nvie.com/posts/a-successful-git-branching-model/)旋转 180 度，但只需与左侧的 master 保持一致的顺序就足够了。）

我读到 gitk 接受大多数[git-log](http://git-scm.com/docs/git-log)参数，所以我检查了它的手册页，但无法弄清楚这些选项是什么（如果有的话）。（如果那是正确的路线，我将如何让 egit 使用这些选项？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-03T13:10:00.867

`git`不会将“分支名称”作为元数据存储在提交中，因此它真的不知道任何旧提交的分支。如果您从我开始，`--all`恐怕不支持为 UI 中的任何给定顺序获取不同的分支。然而，理论上，至少对于给定分支在渲染显示中的指定列中渲染的部分可以这样做。当前的行为似乎总是首先从最近的提交开始，并将其放在显示屏的左上角。如果您选择了所有分支，则将是任何恰好到达那里的分支。

# java - Android API 平移/缩放覆盖精灵的 ImageView

> ID：13544384
> 
> 赞同：0
> 
> 时间：2012-11-24T18:47:02.940
> 
> 标签：java, android, android-imageview

我一直在阅读有关创建 3D 应用程序的 Android 教程和示例。我的目标是创建一个可以显示 2D 图像的应用程序，我可以使用覆盖的节点进行缩放/平移，这些节点可以被触摸以获取上下文菜单。

我从实现 GLSurfaceView 开始，但切换到实现捏合缩放和平移触摸侦听器的自定义 ImageView。它适用于显示、平移和缩放我的图像。

我现在需要弄清楚如何在图像上的特定坐标处显示节点（可能是图像或精灵），并且当图像被平移/缩放时，让节点相应地移动和缩放。

这是否应该作为主 ImageView 之上的另一个视图来实现？我假设我必须在操作 ImageView 的同时操作节点。

我也坚持使用 API 10。任何想法都将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:07:22.253

我相信您将不得不操纵与图像对齐的节点位置。

您可以使用下面的代码以编程方式`ImageView`在布局中的特定位置添加 an（如果需要，还可以强制大小）。

这只是一个示例，并且正在使用固定的可绘制对象（您应该将其更改为作为参数传递给方法）。您还可以更改它移动已经存在的视图而不是添加。

```
private ImageView addImageView(RelativeLayout mainLayout, int x, int y, int width, int height, OnClickListener onClickListener){
    ImageView imageView = new ImageView(this);
    imageView.setAdjustViewBounds(false);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.height = height;
    params.width = width;
    imageView.setLayoutParams(params);
    imageView.setScaleType(ImageView.ScaleType.FIT_XY);
    imageView.setImageDrawable(getResources().getDrawable(R.drawable.marker_red));
    //imageView.setBackgroundColor(Color.BLUE);
    params.leftMargin = x - width/2;
    params.topMargin = y - height/2;
    imageView.setOnClickListener(onClickListener);
    mainLayout.addView(imageView);
    return imageView;
} 
```

如果您需要更多详细信息，请告诉我。

--已编辑--

要在父布局中获得位置，您可以使用`getX()`并且`getY()`如果您使用的是 API 11 或更高版本。

如果您使用的是 API < 11，那么您可以使用以下方法获取原始位置（在屏幕内）：

```
private boolean inViewBounds(View view, int x, int y){
    view.getDrawingRect(outRect);
    view.getLocationOnScreen(location);
    outRect.offset(location[0], location[1]);
    return outRect.contains(x, y);
} 
```

并且您需要将父布局原始坐标减去相对于父级的 obation 坐标。

希望能帮助到你。

问候。

# python - Python中的关键错误4

> ID：13544393
> 
> 赞同：7
> 
> 时间：2012-11-24T18:48:00.060
> 
> 标签：python, dictionary, key

每当我在 python 中删除字典的一部分时，我都会收到此错误。早期我有

```
del the_dict[1] 
```

然后当我浏览字典时，我立即得到错误

```
test_self = the_dict[element_x] 
```

关键错误：4

有谁知道那个错误是什么。一切都从字典中正确删除，但是当我回去搜索它时，我得到了这个错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T18:52:05.913

您似乎错误地尝试访问索引上的字典元素。你不能那样做。您需要访问键上的 dict 值。由于字典没有排序。

例如：-

```
>>> my_dict = {1:2, 3:4}
>>> my_dict
{1: 2, 3: 4}
>>> 
>>> del my_dict[0]  # try to delete `key: 1`

Traceback (most recent call last):
  File "<pyshell#18>", line 1, in <module>
    del my_dict[0]
KeyError: 0
>>> del my_dict[1]  # Access by key value.
>>> my_dict   # dict after deleting key 
{3: 4}
>>> my_dict[1]   # Trying to access deleted key.

Traceback (most recent call last):
  File "<pyshell#26>", line 1, in <module>
    my_dict[1]
KeyError: 1 
```

> 一切都从字典中正确删除，但是当我回去搜索它时

您当然无法获得已删除的键值。那会给你`KeyError`。你为什么想做这样的事情？我的意思是，你为什么要访问你知道不存在的东西？

或者，您可以使用`in`运算符来检查字典中是否存在键：-

```
>>> my_dict = {1:2 , 3:4}
>>> 4 in my_dict
False
>>> 1 in my_dict
True 
```

# drools - Drools Fusion + Mule 抛出空指针异常

> ID：13544397
> 
> 赞同：2
> 
> 时间：2012-11-24T18:48:18.410
> 
> 标签：drools, mule, complex-event-processing

我正在尝试使用 mule+drools fusion 制作一个 twitter 应用程序，但是我在一个特定规则“Tweet a caso sospechoso”的 rhs 中得到了一个空指针异常。我想不通。

我认为 drools 引擎正在提早撤回推文事件。当我需要在 rhs 中使用 tweet 事件时，该事件不再存在。

```
import java.util.ArrayList;
import org.mule.MessageExchangePattern;
import clases.*;
global org.mule.module.bpm.MessageService mule;
declare Tweet
    @role ( event )                 
end

declare Gripe
    @role ( event )                 
end

declare Sospechoso
    @role ( event )                 
end

rule "Tweet a Gripe"
    when
        $t:Tweet($us:usuario, texto matches "\.*gripe.*") from entry-point "Flujo Tweets"
        not (Gripe(usuario==$us) from entry-point "Casos Confirmados")
    then
        Sospechoso s = new Sospechoso(TiposSintomas.GRIPE,$t);        
        Gripe g = new Gripe(s);        
        entryPoints["Casos Confirmados"].insert(g);
        mule.generateMessage("mensajes",g, null, MessageExchangePattern.ONE_WAY); 
end

rule "Tweet a caso sospechoso"
    when        
        $t:Tweet(texto not matches "\.*gripe.*",$us:usuario) from entry-point "Flujo Tweets"        
        $s:SintomaGripe($t.texto matches regexp,$tip:tipo)
        not (Sospechoso(usuario==$us,tipo==$tip) from entry-point "Casos Sospechosos")
        not (Gripe(usuario==$us) from entry-point "Casos Confirmados")              
    then
        Sospechoso s = new Sospechoso($s.getTipo(),$t);                     
        entryPoints["Casos Sospechosos"].insert(s); 
        mule.generateMessage("mensajes",s, null, MessageExchangePattern.ONE_WAY);       
end

rule "Sospechosos a Gripe"
    when
        $s:Sospechoso($us:usuario) from entry-point "Casos Sospechosos"
        not(Gripe(usuario==$us) from entry-point "Casos Confirmados")
        $casos:ArrayList(size >= 3)
               from collect (Sospechoso(usuario==$us) from entry-point "Casos Sospechosos")         
    then
        Gripe g = new Gripe($casos);        
        entryPoints["Casos Confirmados"].insert(g); 
        mule.generateMessage("mensajes",g, null, MessageExchangePattern.ONE_WAY);   
end 
```

**堆栈跟踪**

```
ERROR 2012-11-24 22:15:09,051 [[ceptwitter].Flujo1.stage2.02] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Failed to invoke RulesComponent{Flujo1.commponent.24742184}. Component that caused exception is: RulesComponent{Flujo1.commponent.24742184}. Message payload is of type: Tweet
Type                  : org.mule.component.ComponentException
Code                  : MULE_ERROR--2
Payload               : clases.Tweet@1e5627c
JavaDoc               : http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html
********************************************************************************
Exception stack is:
1\. null (java.lang.NullPointerException)
  clases.Tweet:8 (null)
2\. java.lang.NullPointerException (org.drools.runtime.rule.ConsequenceException)
  org.drools.runtime.rule.impl.DefaultConsequenceExceptionHandler:23 (null)
3\. Failed to invoke RulesComponent{Flujo1.commponent.24742184}. Component that caused exception is: RulesComponent{Flujo1.commponent.24742184}. Message payload is of type: Tweet (org.mule.component.ComponentException)
  org.mule.component.AbstractComponent:148 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
********************************************************************************
Root Exception stack trace:
java.lang.NullPointerException
    at clases.Tweet.<init>(Tweet.java:8)
    at clases.Sospechoso.<init>(Sospechoso.java:9)
    at defaultpkg.Rule_Tweet_a_caso_sospechoso_0.consequence(Rule_Tweet_a_caso_sospechoso_0.java:7)
    at defaultpkg.Rule_Tweet_a_caso_sospechoso_0ConsequenceInvoker.evaluate(Rule_Tweet_a_caso_sospechoso_0ConsequenceInvoker.java:29)
    at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:934)
    at org.drools.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:885)
    at org.drools.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1086)
    at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:660)
    at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:627)
    at org.drools.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:183)
    at org.mule.module.drools.Drools.assertEvent(Drools.java:167)
    at org.mule.module.bpm.Rules.handleEvent(Rules.java:131)
    at org.mule.module.bpm.RulesComponent.doInvoke(RulesComponent.java:84)
    at org.mule.component.AbstractComponent.invokeInternal(AbstractComponent.java:126)
    at org.mule.component.AbstractComponent.access$000(AbstractComponent.java:61)
    at org.mule.component.AbstractComponent$1$1.process(AbstractComponent.java:242)
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
    at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
    at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
    at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
    at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
    at org.mule.component.AbstractComponent.process(AbstractComponent.java:160)
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
    at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
    at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
    at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
    at org.mule.interceptor.AbstractEnvelopeInterceptor.process(AbstractEnvelopeInterceptor.java:55)
    at org.mule.processor.AsyncInterceptingMessageProcessor.processNextTimed(AsyncInterceptingMessageProcessor.java:116)
    at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker$1.process(AsyncInterceptingMessageProcessor.java:171)
    at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker$1.process(AsyncInterceptingMessageProcessor.java:165)
    at org.mule.execution.ExecuteCallbackInterceptor.execute(ExecuteCallbackInterceptor.java:20)
    at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:34)
    at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:18)
    at org.mule.execution.BeginAndResolveTransactionInterceptor.execute(BeginAndResolveTransactionInterceptor.java:58)
    at org.mule.execution.ResolvePreviousTransactionInterceptor.execute(ResolvePreviousTransactionInterceptor.java:48)
    at org.mule.execution.SuspendXaTransactionInterceptor.execute(SuspendXaTransactionInterceptor.java:54)
    at org.mule.execution.ValidateTransactionalStateInterceptor.execute(ValidateTransactionalStateInterceptor.java:44)
    at org.mule.execution.IsolateCurrentTransactionInterceptor.execute(IsolateCurrentTransactionInterceptor.java:44)
    at org.mule.execution.ExternalTransactionInterceptor.execute(ExternalTransactionInterceptor.java:52)
    at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:32)
    at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:17)
    at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:113)
    at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:34)
    at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker.doRun(AsyncInterceptingMessageProcessor.java:164)
    at org.mule.work.AbstractMuleEventWork.run(AbstractMuleEventWork.java:43)
    at org.mule.work.WorkerContext.run(WorkerContext.java:311)
    at java.util.concu...
******************************************************************************** 
```

如果它有帮助，骡子流动：

```
<mule xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:bpm="http://www.mulesoft.org/schema/mule/bpm" xmlns:twitter="http://www.mulesoft.org/schema/mule/twitter" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
http://www.mulesoft.org/schema/mule/twitter http://www.mulesoft.org/schema/mule/twitter/2.4/mule-twitter.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
http://www.mulesoft.org/schema/mule/bpm http://www.mulesoft.org/schema/mule/bpm/3.2/mule-bpm.xsd ">
    <spring:beans>
        <spring:bean id="Eventos2" name="eventos" class="clases.Inicial" factory-method="getVacia"/>
    </spring:beans>
  <twitter:config name="Pablo" accessKey="***" accessSecret="***" consumerKey="***" consumerSecret="***" doc:name="Twitter"/>    
  <bpm:drools/>  
  <vm:endpoint name="alerts" path="stock.alerts" doc:name="VM"/>
    <flow name="Flujo1" doc:name="Flujo1" processingStrategy="thread-per-processor">
        <twitter:filtered-stream config-ref="Pablo" doc:name="Twitter (Streaming)">            
            <twitter:keywords>                           
                //KeyWords                               
            </twitter:keywords>
        </twitter:filtered-stream>
        <expression-transformer expression="return new clases.Tweet(payload.getText(),payload.getUser().getScreenName());" doc:name="Expression"/> 
        <bpm:rules rulesDefinition="reglas.drl" initialFacts-ref="eventos" cepMode="true" entryPoint="Flujo Tweets"/>                                              
    </flow>
    <flow name="ceptwitterFlow1" doc:name="ceptwitterFlow1">
        <vm:inbound-endpoint exchange-pattern="one-way" ref="alerts" doc:name="VM"/>
        <echo-component doc:name="Echo"/>
    </flow>

</mule> 
```

涉及的两个构造函数

```
public Tweet(Tweet t){texto=t.texto;usuario=t.usuario;}

public Sospechoso(TiposSintomas tip,Tweet t){
        tipo=tip;
        tweet = new Tweet(t);
    } 
```

# javascript - 拉斐尔如何移动曲线形状

> ID：13544398
> 
> 赞同：0
> 
> 时间：2012-11-24T18:48:22.477
> 
> 标签：javascript, text, raphael

我只是想问我有一条曲线，我想把它向上移动，但不确定我是否正确地做。我在下面做了它并将颜色设置为橙色。

```
 var curvePath = paper.path("M690,124s20,15 10,19Z");
    curvePath.attr({fill:"orange"}); 
```

在这里，我试图让它向上移动，但我不确定我是否应该使用 m 或 z。

```
 var anim = Raphael.animation({y: 10 , x: 700}, 10000)
    curvePath.animate(anim.delay(5000)); 
```

再次感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:52:38.480

试试这样的，

```
var c = paper.path("M10 10L90 90");
c.attr({fill:"orange"}); 
c.animate({'path' : {M: 10 , Z: 700}}, 10000); 
```

您不会在`x`,上移动路径`y`。你沿着一条路径对它们进行建模。

***编辑：（评论后）***

```
var curvePath = paper.path("M320,124s20,15 10,19Z"); 
curvePath.attr({fill:"orange"});
curvePath.animate({'path' : "M320,24s20,15 10,19Z"}, 10000); 
```

# python - 如何检查 Django 模板中的多重性

> ID：13544399
> 
> 赞同：1
> 
> 时间：2012-11-24T18:48:56.657
> 
> 标签：python, django, templates, multiplicity

有人知道答案吗？例如，我有一个 div 容器和其中的几个项目：

```
<div class="row">
  {% for item in filtered %}
    <img src="..."/>
    <img src="..."/>
    <img src="..."/>
  {% endfor %}
</div> 
```

在上面的代码中，我只需要 3 个图像，因此对于循环中的下一个图像，它应该创建新的 DIV，如下所示：

```
<div class="row">
    <img src="..."/>
    <img src="..."/>
    <img src="..."/>
</div>
<div class="row">
    <img src="..."/>
    <img src="..."/>
    <img src="..."/>
</div> 
```

问题是：我有迭代图像，也应该有迭代 div.row，因为每个 div 只需要 3 个图像。我到处寻找答案，但没有运气。所以基本上我需要检查 {{ forloop.counter }} 我认为的多重性。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:04:12.730

被过滤器整除可能会有所帮助或循环过滤器

[https://docs.djangoproject.com/en/dev/ref/templates/builtins](https://docs.djangoproject.com/en/dev/ref/templates/builtins)

# jquery-mobile - 带有字段集全宽按钮的 Jquery 移动搜索框

> ID：13544401
> 
> 赞同：2
> 
> 时间：2012-11-24T18:49:06.583
> 
> 标签：jquery-mobile, fieldset

为了在搜索字段的右侧放置一个搜索按钮，我进行了很多搜索。如果没有这么多的黑客攻击，很难找到一些好的解决方案。

我见过的唯一一个好的解决方案是在一个包含 2 列的字段集中：

[http://jsfiddle.net/nXHNg/1/](http://jsfiddle.net/nXHNg/1/)

```
<fieldset class="ui-grid-a">
    <div class="ui-block-a"><input type="search" id="searchField" data-inline="true" placeholder="Search"></div>
    <div class="ui-block-b"><input id="btnUpdateWhat" type="button" data-inline="true" value="OK" data-mini="true"></div>       
</fieldset> 
```

这里的问题是文件集的宽度不全。此时它不像列表视图中的以下元素那样全宽到 100%。是否可以优雅地处理这个问题而无需在所有浏览器上使用黑客？我的意思是当我用 Ipad 打开它时，它应该将屏幕的整个宽度填充到 100%。

如果您有其他建议将按钮放置在搜索字段的右侧，请放置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:57:30.107

有一个解决方案给你。

看看[这个](http://jeromeetienne.github.com/jquery-mobile-960/)JQM 插件。

我更喜欢直接更改 css，不幸的是，这在复杂的 JQM 移动应用程序中不是一个有效的选项。

# jquery - 什么应该是安全、可靠、正确的服务器端密码验证响应？

> ID：13544402
> 
> 赞同：0
> 
> 时间：2012-11-24T18:49:10.793
> 
> 标签：jquery, mysql, ajax, security, response

我正在尝试实现一个页面，员工可以在其中登录并添加、修改、更新工作案例。

我有一个选择列表，其中包含从数据库加载的数据（员工姓名）。在这个数据库中，我有基础知识、用户名、ID、密码、电子邮件。

选择列表/框的默认值为“-”；当它发生变化时，会弹出一个表单，要求输入选定员工的密码。

使用 jQuery，我将 id、用户和密码（纯文本）发送到服务器。在 php 文件中，我转义 ( `mysqli_real_escape_string`) 所有三个变量并散列 ( `md5($salt.$varname)`) 密码。

我用`SELECT * FROM table WHERE id='".$escapedId."' AND name='".$escapedName."'`.

检查我是否`num_rows==1`以及是否`$hashedPasswd==$mysqlresult['passwd']`这样做后：

```
$serverResponse->reponses['passwdOK']=true;
echo json_encode($serverResponse); 
```

所以，我的两个问题是：我是否应该更改查询以包含密码 (... `WHERE passwd=$hashedPasswd...`) 以及我发送/返回到 JS 文件的响应是否正常（我的意思是它是否安全、可靠）。如果响应不安全/不安全，那么正确的服务器响应是什么。

PS我不想重新加载或重定向到另一个页面，事实上，如果密码OK我想解锁/启用已经加载页面上的一些控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:10:09.493

您的方法存在一些问题：

*   如今，MD5 完全不适合密码散列，因为它太快了，因此很容易被暴力破解。请改用 bcrypt、scrypt 或 PBKDF。
*   我假设您对所有密码都使用全局盐？如果是这样，这会使您的散列密码容易受到彩虹表攻击。相反，您应该为每个单独的用户随机生成一个盐并将它们存储在您的数据库中。实现 bcrypt 或类似的库通常已经为您完成了加盐处理。
*   手动转义每个查询参数，然后将它们与部分查询连接起来，对于可能导致 SQL 注入漏洞的错误非常敏感。强烈建议改用[Prepared 语句](http://en.wikipedia.org/wiki/Prepared_statements)。在 PHP 中，这通常是通过 PDO 框架完成的。
*   通过明文发送密码很危险，因此您确实应该使用 HTTPS，以便加密用户和服务器之间的流量。但是，这将要求您拥有证书。您可以使用自签名证书，在这种情况下，每个可以访问您的应用程序的客户端都需要配置为接受它，或者让它由[证书颁发机构签名](http://en.wikipedia.org/wiki/Certificate_Authority)，您需要为此付费。如果您不想或根本不能使用 HTTPS，建议您的用户不要从开放的 wi-fi 网络登录，并且不要为您的应用使用与他们用于其他用途的密码相同的密码，例如他们的电子邮件帐户。您还可以尝试在客户端（并在服务器端再次使用哈希密码；不要忘记在这里也使用随机盐）；这不会保护您免受中间人攻击，但可以防止被动侦听器（更常见）窥探密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:07:07.867

它看起来不错，但您应该记住，浏览器和服务器之间的任何通信都应该加密（https）。如果没有，服务器和浏览器之间的任何人都可以读取用户提供的所有数据（登录名、密码）。

我不认为您的查询是性能的最佳选择。如果密码与数据库中的密码不匹配，选择数据的目的是什么？查询应该是“WHERE `id`= id AND `password`= 'hash'。

如果密码正确，数据库将向您发送用户数据，如果不是，您将不会得到除 FALSE 之外的任何信息。我不是专业技能 mysql 专家，但据我所知，这是更好的解决方案。

而且，更重要的是。您不需要转义哈希。如果你从 md5() 函数中得到任何东西，它已经被“转义”了。

无论如何，我会这样做：

```
$id = (int) $_POST['id'];
$pass = md5(SALT.$_POST['pass']);
$query = 'SELECT * FROM `user_table` WHERE `id` = $id AND `password` = $pass; 
```

# batch-file - 脚本练习

> ID：13544406
> 
> 赞同：2
> 
> 时间：2012-11-24T18:49:27.420
> 
> 标签：batch-file, cmd

我正在尝试完成一项家庭作业脚本作业，我基本上对此一无所知，需要找到/研究脚本的修复程序。我需要运行的脚本查看一个三列（名称、ID、部门）文件（我得到的），并且应该创建新的组和用户并将用户分配给正确的组。每个组只能创建一次。我的问题是使用带有令牌的 FOR /f 命令。

文件 1

```
@ECHO OFF

SET /p userfFile="what is the file that contains new hires: "

REM Loop through the lines of the file
REM and copy the the department names to a new file
FOR /f "tokens=3 skip=4" %%b IN (%userfFile%) DO ECHO %%b >> Department.txt

REM sort the file back into itself
sort Department.txt /0 Department.txt

REM a variable to keep track of the groups that have neen created 
SET LastGroupCreated=None

FOR /f %%a IN (Department.txt) DO CALL CUG

FOR /f "tokens=2,3 skip=4" %%A IN (%userfFile%) DO CALL

REM Clean Up
DEL Department.txt
SET userfFile= 
```

文件 2“CUG”

```
REM Have we already processed this name (%1) ?
IF "%LastGroupCreated%"=="%1" GOTO :EOF

REM Not Processed, so create and update the variable
NET LOCALGROUP /ADD %1
SET LastGroupCreated=%1 
```

我相信文件 CUG 很好，但文件一总是给我错误。如果有人可以帮助我，我将不胜感激。我已经尝试了所有我能想到的并且被卡住了

干杯

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:00:00.567

几个错误：

`FOR /f %%a IN (Department.txt) DO CALL CUG`

1.  在这个为你调用`CUG`不带参数，但你确实使用`%1`. 您应该创建`CUG`一个子例程而不是另一个文件并将参数传递给`CUG`.
2.  在`CUG`您重用的文件中，`%LastGroupCreated%`您需要在文件`SETLOCAL NABLEDELAYEDEXPANSION`的开头。
3.  `FOR /f "tokens=2,3 skip=4" %%A IN (%userfFile%) DO CALL`- 叫什么？

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
...
FOR /f %%a IN (Department.txt) DO CALL :CUG %%a
...
goto :eof

:CUG
REM Have we already processed this name (%1) ?
IF "!LastGroupCreated!"=="%1" GOTO :EOF

REM Not Processed, so create and update the variable
NET LOCALGROUP /ADD %1
SET LastGroupCreated=%1
goto :eof 
```

# html - 如何在 CSS 中设置 textarea 行的高度？

> ID：13544411
> 
> 赞同：0
> 
> 时间：2012-11-24T18:49:35.033
> 
> 标签：html, css, forms, textarea

我想改变文本区域中单行的高度。所以我正在寻找类似`row-height:20px;`If that exists 的东西，那就太好了。正如我猜测它没有，我该怎么办？提前致谢。

我想要一个单行但高度为 20 像素的文本区域。我不能使用 css 高度函数来设置它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:51:28.607

你想要`line-height`：

```
textarea { line-height: 2em; } 
```

# python - 需要帮助覆盖一个函数 QWebPage.userAgentForUrl()

> ID：13544413
> 
> 赞同：1
> 
> 时间：2012-11-24T18:49:56.327
> 
> 标签：python, qt, inheritance, pyqt4

我想重写QWebPage类的userAgentForUrl函数，但是我做错了，用户代理还是默认的。

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
import sys
from bs4 import BeautifulSoup

class Browser(QWebView, QWebPage):

    def __init__(self):
        QWebView.__init__(self)
        QWebPage.__init__(self)
        self.frame = self.page().mainFrame()
        self.loadFinished.connect(self.print_html)
        self.loadProgress.connect(self.print_progress)

    def userAgentForUrl(self, url):
        return "Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1"

    def print_progress(self, percent):
        print percent

    def print_html(self):
        print "Done"
        self.fill_form()
        html = unicode(self.frame.toHtml()).encode('utf-8')
        soup = BeautifulSoup(html)
        print soup.prettify()

if __name__ == '__main__':
    app = QApplication(sys.argv)
    br = Browser()
    br.load(QUrl('http://www.useragentstring.com/'))
    br.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:37:12.313

在 PyQt 中，从多个 Qt 类继承通常是行不通的。因此，您将需要一个单独的 QWebPage 子类来覆盖虚拟[userAgentForUrl](http://qt-project.org/doc/qt-4.8/qwebpage.html#userAgentForUrl)函数。

尝试这样的事情：

```
class WebPage(QWebPage):
    def userAgentForUrl(self, url):
        return "Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1"

class Browser(QWebView):
    def __init__(self):
        QWebView.__init__(self)
        self.setPage(WebPage()) 
```

# android - Android，列出 5 个最强 wifi 网络的 rssi 值

> ID：13544414
> 
> 赞同：5
> 
> 时间：2012-11-24T18:49:57.243
> 
> 标签：android, android-wifi, rssi

我正在尝试制作一个简单的应用程序，告诉我 5 个最强 wifi 网络的 rssi 值。我不需要连接到任何网络，只想知道 rssi 的。目前我正在使用以下代码：

```
wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
int info = wifi.getConnectionInfo().getRssi();
textStatus.setText("WiFi Rssi: " + info); 
```

但是，这仅显示我连接到的网络的 rssi 值。

有没有办法为其他网络获取这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:09:28.587

我想我明白了：

```
ScanResult result0 = wifi.getScanResults().get(0);
String ssid0 = result0.SSID;
int rssi0 = result0.level;
String rssiString0 = String.valueOf(rssi0);
textStatus.append("\n" + ssid0 + "   " + rssiString0); 
```

然后 get(1), get(2) 等等，不管你喜欢多少

# .net - TPL Parallel.For 具有长时间运行的任务

> ID：13544417
> 
> 赞同：7
> 
> 时间：2012-11-24T18:50:11.930
> 
> 标签：.net, f#, parallel-processing, task-parallel-library

我想使用 F# 中的任务并行库 (TPL) 来执行许多 (>1000) 长时间运行的任务。这是我当前的代码：

```
Parallel.For(1, numberOfSets, fun j ->
    //Long running task here
    ) 
```

当我开始这个时，似乎 .NET 会立即启动所有任务并不断在它们之间反弹。更好的是，如果它一直执行一项任务，直到它完成，然后再进行下一个任务。这将最小化上下文切换。

有没有办法向调度程序提供提示？我知道可以提供提示，但是我找不到明确的示例，或者调度程序对此是否已经很聪明，这只是我的看法，即发生了太多的上下文切换。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T18:56:15.583

我们遇到了类似的问题 - 使用 C# 而不是 F#，但库是相同的。解决方案是限制并行度：

```
ParallelOptions parallelOptions = new ParallelOptions();
parallelOptions.MaxDegreeOfParallelism = 16;
Parallel.For(0, n, parallelOptions, i => {
   . . . 
}); 
```

16 对我们的任务很有效——你应该尝试看看哪个值更适合你的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T01:48:50.767

根据我的经验，对于大量任务，最好`MaxDegreeOfParallelism`线性绑定到`Environment.ProcessorCount`.

这是与@Mimo 的 F# 语法类似的代码片段：

```
let options = ParallelOptions()
options.MaxDegreeOfParallelism <- Environment.ProcessorCount * 2

Parallel.For(0, n, options, 
             (fun i -> (* Long running task here *))) |> ignore 
```

由于您正在使用 F# 进行并行编程，请查看优秀的书籍[“使用 Microsoft .NET 进行并行编程”](http://msdn.microsoft.com/en-us/library/ff963553.aspx)，尤其是[“并行循环”](http://msdn.microsoft.com/en-us/library/ff963552.aspx)一章。@Tomas 已将其示例翻译为 F#，可[在此处](http://parallelpatterns.codeplex.com/SourceControl/changeset/view/69940#814163)获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:38:32.110

查看参考源，似乎以下代码决定了工人的数量：

```
// initialize ranges with passed in loop arguments and expected number of workers 
int numExpectedWorkers = (parallelOptions.EffectiveMaxConcurrencyLevel == -1) ?
    Environment.ProcessorCount : 
    parallelOptions.EffectiveMaxConcurrencyLevel; 
```

据我所知，使用默认的任务调度程序和默认的 ParallelOptions 计算结果为，因此通过自己指定处理器计数`Environment.ProcessorCount`得到不同的行为是很奇怪的。`MaxDegreeOfParallelism`我建议您进行调试以确保确实存在差异（您可以打印`Thread.ManagedThreadId`内部长时间运行的任务）。

# css - joomla 插件扩展在每个页面上加载 css 文件

> ID：13544421
> 
> 赞同：5
> 
> 时间：2012-11-24T18:50:48.673
> 
> 标签：css, joomla, joomla2.5

我正在使用 Joomla 2.5 的自定义插件扩展。此插件针对我网站上的单个页面。但由于某种原因，我注意到它会在每一页上加载 css 文件。

插件的代码会加载这个 css 文件：

```
$doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css'); 
```

我不认为这很常见，但我不确定插件。我可以让它只应用我想要的页面而不是每个页面。任何有关如何调试的想法将不胜感激。

该插件在文章页面上打印一个简单的表格并使用插件功能`onContentPrepare`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:04:37.400

使用这些片段来管理您的问题：

1) 通过检查活动菜单项来加载 CSS

```
$menu = &JSite::getMenu();
$menuItem = $menu->getActive();
$Itemid = $menuItem->id;
if($Itemid!=1)
{
 $doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
} 
```

2) 在组件上加载 CSS

```
if (JRequest::getCmd( 'option' ) == 'com_k2'){
        $doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
} 
```

3) 仅在主页加载 CSS

```
<?php if(JRequest::getInt('Itemid') == $menu->getDefault()) {
   $doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
}?> 
```

4) 在活动菜单 id 上加载 CSS

```
<?php
$menuID = JSite::getMenu()->getActive()->id ;
  if ($menuID == '6')
  {
   $doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
  }
?> 
```

5）在活动语言上加载 CSS：

```
$lang =& JFactory::getLanguage();
switch ($lang) {
case 'en-gb':
$doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
break;
} 
```

6）在用户身上加载CSS

```
$user =& JFactory::getUser();
if($user->get('id')==0){
//user is logged in
 $doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
} 
```

7) 在 URL 上加载 CSS

```
$u =& JFactory::getURI();
if($u=="http://www.example.com/joomla/index.php?task=view&id=12&Itemid=29")
{
$doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:25:41.613

尝试使用以下内容：

```
$application = JFactory::getApplication();
$menu = $application->getMenu();
$item = $menu->getItem(1);
if ($item == 1){
    $doc = JFactory::getDocument(); //Remove it you already have this line
    $doc->addStyleSheet($pluginAssetsUrl . '/css/aecuserpage.css');
} 
```

将数字“1”更改为页面所属的任何菜单项。

请注意，我没有对此进行测试，因此请告诉我它是否有效。如果没有，我会看看我能挖出什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:22:18.653

我不认为进入`Itemid`内部`plugin`会起作用。我建议您在模板 index.php 中移动 css 代码并检查它会在那里工作的 itemid 条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T06:40:07.940

插件响应什么事件？它在哪个组？对于许多事件，您可以检查页面的 $context。如果您知道它只会在某个页面上加载，请使用这些标识符。

例如，这是分页插件中的一行：

if ($params->get('show_item_navigation') && ($context == 'com_content.article') && ($view == 'article')) {

或者这个来自 loadmodule

```
 $canProceed = $context == 'com_content.article';
    if (!$canProceed) {
        return;
    } 
```

# api - 在 Google Appengine 上暂时阻止远程 IP

> ID：13544423
> 
> 赞同：2
> 
> 时间：2012-11-24T18:50:54.997
> 
> 标签：api, google-app-engine, request, ip, blacklist

我想在我的 AppEngine 服务器中实现一项功能，以防止人们快速连续猜测密码或用随机请求（DoS 等）敲打我。为此，我正在寻找一种方法来阻止来自某个远程 IP 的请求，比如说，接下来的 5 分钟左右。

显然，我可以简单地检查每个请求的传入 IP 并自己返回一个错误页面，但是如果我可以简单地将这个远程 IP 以编程方式添加到由 AppEngine 维护的黑名单中，那么它会更加注重资源，最好是超时，这样这些请求就会在负载均衡器上被杀死。基本上，我正在寻找一种方法来动态更新我可以通过 dos.xml 定义的黑名单。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:26:30.917

根据 Google App Engine 文档，dos.xml 每次有新信息都需要重新上传到服务器。因此，目前无法通过应用程序中的智能自动修改应用程序的 dos 配置。

# c# - 如何在 C# 中替换 txt 文件中的单词

> ID：13544425
> 
> 赞同：0
> 
> 时间：2012-11-24T18:50:57.223
> 
> 标签：c#, methods, replace, streamreader

我正在尝试打开一个 .txt 文件，搜索一个单词并在它出现的任何地方用另一个单词替换它。我可以做到这一点，但不能使用 .txt 文件，仅使用我自己在文件中编写的字符串。这`.cs`是我到目前为止的方法：

```
public void EditorialControl(string fileName, string word, string replacement)
    {            
        List<string> list = new List<string>();
        using (StreamReader reader = new StreamReader(directory + fileName))
        {
            string line;
            while ((line = reader.ReadLine()) != null)
            {                   
                Console.WriteLine(line);
                list.Add(line);
            }
            reader.Close();
        }
     } 
```

当我在 中调用该方法时`Main()`，它应该接受参数`word`并将其替换为我选择的替换词。

你们能帮我用代码替换方法中的单词吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T18:55:22.790

它比您想象的要简单得多：

```
File.WriteAllText(fileName, File.ReadAllText(fileName).Replace(word1, word2)); 
```

就是这样！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:55:55.340

您可以使用`regex`

```
string target=System.IO.File.ReadAllText(directory + fileName);
Regex.Replace(target,@"\b"+word+@"\b",replacement); 
```

# c++ - Botan AES-256，32 位 InitialVector

> ID：13544426
> 
> 赞同：1
> 
> 时间：2012-11-24T18:51:00.377
> 
> 标签：c++, aes, botan

我目前有一些代码可以与 LibTomCrypt 库一起正常工作，但不能与 Botan 一起使用（我正在尝试将其转换为 Botan）。

我的（工作）LibTomCrypt 代码：

```
 // read the initial vector
    unsigned char iv[0x20];
    fseek(inputFile, 0x20, SEEK_SET);
    fread(iv, 0x20, 1, inputFile);

    // call ctr_start
    res = ctr_start(0, iv, key, 0x20, 0, 0, &ctr);

    if (res == 0)
    {
        printf("decrypting data...\n");

        // read the encrypyted data
        unsigned char cipheredText[0x3A8];
        fread(cipheredText, 0x3A8, 1, inputFile);

        // decrypt the data
        unsigned char uncipheredText[0x3A8];
        if (ctr_decrypt(cipheredText, uncipheredText, 0x3A8, &ctr) != 0)
        {
            fclose(inputFile);
            printf("ERROR: ctr_decrypt did not return 0\n");
            return -1;
        }
        if (ctr_done(&ctr) != 0)
        {
            fclose(inputFile);
            printf("ERROR: ctr_done did not return 0\n");
            return -1;
        }

        printf("writing decrypted data...\n");

        // get the decrypted path
        char *decPath = concat(fileName, ".dec", 4);

        // write the decrypted data to disk
        FILE *outFile = fopen(decPath, "w");
        fwrite(uncipheredText, 0x3A8, 1, outFile);
        fclose(outFile);
    }
    else
    {
        printf("ERROR: ctr_start did not return 0\n");
    } 
```

如您所见，我的初始向量 (IV) 的大小是 0x20 (32)。我不知道为什么这会与这个库一起工作，但我去了这个方法，它似乎与 LibTomCrypt 中的“blocklen”有关。

无论如何，这就是我试图用 Botan 库做的事情：

```
// get the iv
t1Stream->setPosition(0x20);
BYTE rawIV[0x20];
t1Stream->readBytes(rawIV, 0x20);

// get the encrypted data
t1Stream->setPosition(0x40);
BYTE cipheredText[0x3A8];
t1Stream->readBytes(cipheredText, 0x3A8);

// setup the keys & IV
Botan::SymmetricKey symKey(key, 0x20);
Botan::InitializationVector IV(rawIV, 0x20);

// setup the 'pipe' ?
Botan::Pipe pipe(Botan::get_cipher("AES-256/CBC/NoPadding", symKey, IV, Botan::DECRYPTION)); 
```

但它一直在调用“get_cipher”：

```
terminate called after throwing an instance of 'Botan::Invalid_Key_Length'
  what():  Botan: AES-256 cannot accept a key of length 32 
```

如果我确实将 IV 大小更改为 16，则它确实可以正常工作，但由于 IV 不正确，因此无法处理内容。

此外，**更改我的加密代码中的 IV 大小不是一种选择。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T00:02:33.787

我们无法真正看到您使用的是什么密码模式。如果是 Rijndael-256，那么块大小将为 256 位。如果不是，那么随机数很可能会被库剪切到某个地方——在这种情况下，很可能只使用了前 128 位。

也就是说，代码永远不会起作用，因为您在第一个示例中使用计数器模式加密，而在另一个示例中使用 CBC 模式加密。

# php - PDO 查询后返回 500 错误（查询有效）

> ID：13544430
> 
> 赞同：2
> 
> 时间：2012-11-24T18:51:38.137
> 
> 标签：php, mysql, pdo

我有一个非常奇怪的问题。

我正在对服务器进行 ajax 调用，将表单详细信息发送到 php 脚本。然后使用 PDO 将值插入数据库。Firebug 返回 500 错误，但值已插入数据库。我在错误日志中找不到任何内容（我查看了 apache 错误日志和 mysql 错误日志）

我正在运行 centos 6、php 5.3.3 和 mysql 5.1。

我查看了 php sysinfo 并在 apache 配置中看到了这一点：

'--禁用-pdo'

不知道这是否与它有关，但是嘿..

这是我正在使用的代码：

```
try {
    $conn = new PDO('mysql:dbname=dbname;host=localhost', 'username', 'password');
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $query = $conn->prepare('INSERT INTO sometable (naam, beroep, telefoon, emailadres, bericht, ismedical) 
        VALUES(:naam, :beroep, :telefoon, :emailadres, :bericht, :ismedical)');
    $query->execute(array(
        ':naam' => $naam,
        ':beroep' => $beroep,
        ':telefoon' => $telefoon,
        ':emailadres' => $emailadres,
        ':bericht' => $bericht,
        ':ismedical' => $ismedical
    ));
    echo $stmt->rowCount(); // should be 1
} catch (PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:28:46.420

PDO 默认使用无缓冲模式，这会降低页面加载时间的延迟，这通常是您想要的。权衡是 rowCount() 在获取整个数据集之前不会返回有效信息。

# php - 保存 PHP 会话信息

> ID：13544433
> 
> 赞同：0
> 
> 时间：2012-11-24T18:51:51.460
> 
> 标签：php, session

我正在遭受下一个奇怪的问题。

```
if (isset($_GET["invdata"])) {
    $_SESSION["invdata"] == "aaa";
    print_r($_SESSION);
} 
```

print_r 显示 SESSION 信息，但我看不到 invdata 信息，可能是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:53:49.197

尝试改变

```
$_SESSION["invdata"] == "aaa"; 
```

和

```
$_SESSION["invdata"] = "aaa"; 
```

（注意单=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:53:34.440

那么双等号没有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:54:21.837

代替

```
$_SESSION["invdata"] == "aaa"; 
```

和

```
$_SESSION["invdata"] = "aaa"; 
```

你现在不能设置变量了`==`。

# perl - 模块（不是？）正在安装，因为它是最新的（是吗？）

> ID：13544434
> 
> 赞同：4
> 
> 时间：2012-11-24T18:51:53.153
> 
> 标签：perl, uri, cpan, dotcloud

我正在尝试部署到 dotcloud。我的 Makefile.PL 指出我需要 URI 1.60。development.yml 文件也这么说。构建器声称已安装该模块。

```
18:38:39: [www] I am snapshotsworker_02/bob-3, and I will be your builder today.
18:38:55: [www] URI is up to date. (1.60) 
```

如果我跑

```
dotcloud run www -- perl -MURI -e '1' 
```

它失败了

```
Can't locate URI.pm in @INC (@INC contains: /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .).
BEGIN failed--compilation aborted. 
```

这可能是正确的，因为通常模块安装在 ~/perl5 下。所以，我尝试了：

```
$ dotcloud run www -- perl -I /home/dotcloud/perl5/lib/perl5 -MURI -e '1'
==> Executing "perl -I /home/dotcloud/perl5/lib/perl5 -MURI -e 1" on service (www) instance #0 (application XXXX)
Can't locate URI.pm in @INC (@INC contains: /home/dotcloud/perl5/lib/perl5 /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .).
BEGIN failed--compilation aborted. 
```

同样奇怪的是 cpanm 不可用，尽管文档说我们可以使用它：

```
$ dotcloud run www -- cpanm URI
==> Executing "cpanm URI" on service (www) instance #0 (application XXXX)
bash: cpanm: command not found 
```

有什么提示吗？

编辑：这似乎不是这个模块的问题。LWP 也有同样的情况。然后，更奇怪的是，HTTP::Date 依赖于 LWP。某些模块依赖项无法正常工作。旧版本的 dotcloud 客户端我从来没有遇到过这个问题。

谢谢你，阿尔贝托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:20:32.297

这种行为的原因很简单，但也很愚蠢。在这里，dotcloud 的人可能更专业，并且可以更好地配置 Perl 堆栈。

因此，在我的 dotcloud.yaml 文件中，我请求安装 perl 5.14.x。这是通过在 /opt/perl5/perls/current 中添加一个指向我想要的版本的符号链接来完成的（在我的例子中，/opt/perl5/perls/perl5.14.x/）。对于 Perl Web 堆栈，环境设置为首先搜索此 perl。

当我通过 cron 作业或通过 dotcloud 客户端的运行选项运行 perl 时，回答的 perl 是系统中的 perl (/usr/bin/perl)，即 perl 版本 5.10.x。因此，在 perl 5.14.x 版本中安装的系统范围内的模块不可用（当我强制它们安装到 perl5 主目录时，它们对两个版本都可用）。

解决办法是用正确的路径调用 perl 二进制文件，或者为标准 shell 环境（这似乎与 web 环境不同）正确配置 PATH 环境变量。

如果 dotcloud 的人让这更透明，那就太好了。一种选择是记录这个问题，另一种选择是将 shell 环境设置为使用与 web 环境相同的 perl。这不应该那么难。

阿尔贝托

# javascript - 获取 iFrame 的当前 URL

> ID：13544435
> 
> 赞同：2
> 
> 时间：2012-11-24T18:51:56.593
> 
> 标签：javascript, url, iframe, dns, postmessage

我试图在 iframe 的 onload 事件中使用代码“this.contentWindow.location.href”发出警报消息，但由于 Javascript 的同源策略，我收到“未定义”的警报消息。我正在尝试使用 window.postmessage 来解决这个障碍，目的是了解 iframe onload 的当前 URL。无论是否有postmessage，朝着正确方向迈出的任何一步都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:19:00.557

如果在 iframe 中加载的页面托管在不同的域上，则无法获取其 href。您唯一可以获得的是 iframe 的原始 src 属性。

# c# - WPF应用程序未安装

> ID：13544436
> 
> 赞同：0
> 
> 时间：2012-11-24T18:52:00.697
> 
> 标签：c#, wpf, .net-4.0, oracle11g

我目前正在尝试安装我为我的团队创建的 WPF 应用程序。我使用 Visual Studio 2010 开发了这个应用程序，并连接到 Oracle DB 版本 11.2.0.3.0。我有一台 Windows XP 机器，我正在尝试将它安装在 Windows 7 机器上。我已在两台 Windows 7 机器上成功安装此应用程序，但其他机器收到错误消息：

问题事件名称：CLR20r3

显示了问题签名，其中之一显示 Oracle.DataAccess

安装此应用程序有问题的机器也有 Oracle 11.2.0.3.0。他们是否还需要以某种方式升级他们的 ODAC？或者那是那个版本的一部分？我也不确定他们是否有 .Net 4 Framework。如果他们没有这个，那可能是一个问题吗？

# c - 创建一个复杂的循环

> ID：13544438
> 
> 赞同：1
> 
> 时间：2012-11-24T18:52:16.580
> 
> 标签：c, algorithm

我试图弄清楚如何创建一个复杂的循环，但我没有找到任何解决方案。

我有 2 张桌子，每张桌子都可以容纳任意数量的人。
我想创建一个循环来获得我可以放置人员的所有可能性！
每个人都由一个 ID 表示，例如 5 个人。每个数字都是人的身份证。
我需要知道让人们坐下的可能方法是什么！

```
table1   table2

(nobody) 12345
1        2345
2        1345
3        1245
4        1235
5        1234
12       345
13       245
14       235
15       234
23       145
24       135
25       134
34       125
35       124
45       123 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:19:03.817

```
#include <stdio.h>

int main(void) {
    unsigned people = 5;

    printf("There are %u lights.\n", people);

    for (unsigned i = 0; i < 1u << people; i++) {
        for (unsigned p = 0; p < people; p++) {
            if (i >> p & 1u) {
                printf("%u", p + 1);
            }
        }
        fputs("\t|\t", stdout);
        for (unsigned p = 0; p < people; p++) {
            if (!(i >> p & 1u)) {
                printf("%u", p + 1);
            }
        }
        putchar('\n');
    }

    return 0;
} 
```

# java - 使用 lwjgl 进行文本渲染

> ID：13544440
> 
> 赞同：0
> 
> 时间：2012-11-24T18:52:25.720
> 
> 标签：java, text, render, lwjgl

我有一个 png 字体，我可以正确地获取每个字母的行/列问题是如何处理这些信息。每个字符是 8 x 8。这是我到目前为止的代码。如果有人能给我一些帮助，甚至只是一些建议，将不胜感激。

```
private double xsize, ysize, x, y, rotate, xh, yh;
private int lxpos, lypos;
private Texture texture;
String text;

public TextRenderer(int fontsize, int xlocation, int ylocation,
        int rotates, String path, String Text) {

    text = Text;

    rotate = rotates;
    setXsize(fontsize);
    ysize = fontsize;
    x = xlocation;
    y = ylocation;
    setXh(getXsize() / 2);
    yh = ysize / 2;

    try {
        texture = TextureLoader.getTexture(".PNG", new FileInputStream(
                new File(path)));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    texture.bind();
    update();
}

public void update() {

    char[] c = text.toCharArray();

    int letter;
    // 16 collumns 16 rows
    for (int i = 0; i < c.length; i++) {
        letter = c[i];
        System.out.println(c[i]);
        lypos = letter % 16;
        lypos++;
        System.out.println("Collumn :" + lypos);
        lxpos = letter / 16;
        System.out.println("Row :" + lxpos);

        GL11.glEnable(GL11.GL_TEXTURE_2D);
        GL11.glPushMatrix();
        GL11.glTranslated(x, y, 0);
        GL11.glTranslatef(10.0f, 10.5f, -0.0f); // back to previous position
        GL11.glRotated(rotate, 0.0f, 0.0f, -1.0f); // rotate
        GL11.glTranslatef(-10.0f, -10.5f, 0.0f); // to the origin
        GL11.glTranslated(-x, -y, 0);
        // above is for movement/rotation of text

        // 128 px total

        lxpos = lxpos * 8;
        lxpos = lxpos * 8;

        int startx = lxpos * 8;
        int starty = lypos * 8;
        double endx = startx + 8;
        double endy = starty + 8;
        GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2d(startx, starty);
        GL11.glVertex2d(x - getXh(), y - yh);
        GL11.glTexCoord2d(startx, endy);
        GL11.glVertex2d(x - getXh(), y + yh);
        GL11.glTexCoord2d(endx, endy);
        GL11.glVertex2d(x + getXh(), y + yh);

        GL11.glTexCoord2d(endx, starty);
        GL11.glVertex2d(x + getXh(), y - yh);
        GL11.glEnd();
        GL11.glPopMatrix();
        GL11.glDisable(GL11.GL_TEXTURE_2D); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:52:14.933

这是我所做的：

```
public class Fsc {

public static Fsc cA = new Fsc((XCOORDINSHEET), (XCOORDINSHEET), (WIDTHOFCHAR), (HEIGHTOFCHAR));
etc...

public int ix, iy, width, height;

public Fsc(int ixa, int iya, int widtha, int heighta) {

ix = ixa;

iy = iya;

width = widtha;

height = heighta;

}

public void render(int xa, int ya, float scale) {

int x2 = ix + width;

int y2 = iy + height;

glBegin(GL_QUADS);

glTexCoord2f(ix, iy);

glVertex2f(xa, ya);

glTexCoord2f(x2, iy);

glVertex2f(xa + width * scale, ya);

glTexCoord2f(x2, y2);

glVertex2f(xa + width * scale, ya + height * scale);

glTexCoord2f(ix, y2);

glVertex2f(xa, ya + height * scale);

glEnd();

}

}

public class Fontsheet {

public int sheet;

public Fontsheet(String location) {

sheet = ImagingTools.glLoadTextureLinear(location);

}

public void render(int x, int y, float scale, String text) {

glEnable(GL_TEXTURE_RECTANGLE_ARB);

glBindTexture(GL_TEXTURE_RECTANGLE_ARB, sheet);

float lwidth = 0;

int x2 = x;

for(int i = 0; i < text.length(); i++) {

char c = text.charAt(i);

x2 += lwidth;

switch(c) {

case 'A':

Fsc.cA.render(x2, y2, scale);lwidth = Fsc.cA.width * scale;

break;

case 'B': etc...

}

}

glBindTexture(GL_TEXTURE_RECTANGLE_ARB, 0);

glDisable(GL_TEXTURE_RECTANGLE_ARB);

}

} 
```

对不起，它没有被格式化。我知道它有效是因为我积极使用它。复制它时我可能忘记了一些代码。如果它不适合你，请告诉我。希望它可以帮助你。

# php - PHP imagecopyresampled 用于大图像非常慢

> ID：13544445
> 
> 赞同：0
> 
> 时间：2012-11-24T18:52:44.677
> 
> 标签：php, gd

我正在使用 PHP 函数 imagecopyresample 和 imagecopy 来旋转和合并两个图像。两张图片的大小约为 2480 像素 x 3508 像素，大小在 3MB 到 10MB 之间。目前合并两者大约需要 30 秒，下面是我的代码。

我只是想知道是否有更好的方法来做到这一点？我不需要屏幕上显示的图像，实际上可以在用户仍在浏览网站时在后台完成。

提前致谢

```
 $photoFrame    = imagecreatetruecolor(3508,2480);

        $trans_colour   = imagecolorallocate($photoFrame, 255, 255, 255);
        imagefill($photoFrame, 0, 0, $trans_colour);

        for($i = 0; $i < $count_images; ++$i){
            $insert         = $res['images'][$i]['src'];
            $extension      = substr(strrchr($insert,'.'),1);
            $photoFrame2Rotation = (180-$res['images'][$i]['rotation']) + 180;

            $photo2         = imagecreatefrompng($insert);}
            $foto2W         = imagesx($photo2);
            $foto2H         = imagesy($photo2);
            $photoFrame2W   = $res['images'][$i]['width'];
            $photoFrame2H   = $res['images'][$i]['height'];

            $photoFrame2TOP = $res['images'][$i]['top'];
            $photoFrame2LEFT= $res['images'][$i]['left'];

            $photoFrame2    = imagecreatetruecolor($photoFrame2W,$photoFrame2H);
            $trans_colour   = imagecolorallocatealpha($photoFrame2, 0, 0, 0, 127);
            imagefill($photoFrame2, 0, 0, $trans_colour);

            imagecopyresampled($photoFrame2, $photo2, 0, 0, 0, 0, $photoFrame2W, $photoFrame2H, $foto2W, $foto2H);

            imagesavealpha($photoFrame2, true);

            $blue = imagecolorallocate($photoFrame2, 0, 0,255);
            imagecolortransparent($photoFrame2, $blue);

            imagecopy($photoFrame, $photoFrame2,$photoFrame2LEFT, $photoFrame2TOP, 0, 0, imagesx($photoFrame2), imagesy($photoFrame2));
        }

    $cachefile = "userdir/".$value.".png"; 

    imagepng($photoFrame, $cachefile, 1);
    imagedestroy($photoFrame); 
```

# eclipse - 序言求解（X）

> ID：13544454
> 
> 赞同：1
> 
> 时间：2012-11-24T18:53:25.960
> 
> 标签：eclipse, prolog

我是新用户，我需要你的 prolog 程序帮助。

帆船俱乐部“Thalassa”最近举办了一场针对年轻水手的比赛，两人的船。每艘船的船员都是一男一女。

1.  “Ostria”号船的一名船员是“Argiris”。
2.  玛格达既没有和“Miltos”在一起，也没有和“Taki”在一起。“Xronis”和“Maro”不在“信天翁”中，也没有在 24 分钟内完成。
3.  “Olga”登上“Batis”，而“Aetos”没有在 27 分钟内完成。
4.  在“Thiella”或“Miltos”或“Takis”中，没有登上“Basia”。
5.  “Xara”在 16 分钟内完成。“奥尔加”比“玛格达”花费了更多的时间来完成。
6.  “塔基斯”与搭档用时21分钟完成比赛。

船只：“Aetos”、“Ostria”、“Batis”、“Albantros”、“Thiella” 男性：“Miltos”、“Takis”、“Argiris”、“Xronis”、“Foibos” 女性：“Maro”、“Olga” 、“Basia”、“Magda”、“Xara”次：“16”、“19”、“21”、“24”、“27”

我需要一个程序来问？solve(X) 并给我一个正确组合的列表，例如 X=Aetos, Takis, Maro, 16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:35:11.573

*编辑：*我错过了“eclipse”标签，所以也许这不是你要找的答案。它可以在普通的 Prolog 中工作，即 SWI。

* * *

所以你确实有参与者的枚举，至少我们不需要*推断*。从它开始：

*   船只：“Aetos”、“Ostria”、“Batis”、“Albatross”、“Thiella”
*   男子：“Miltos”、“Takis”、“Argiris”、“Xronis”、“Foibos”
*   女性：“Maro”、“Olga”、“Basia”、“Magda”、“Xara”
*   次：“16”、“19”、“21”、“24”、“27”

规则：**以时间为价值！**：

```
1  Argiris = Ostria,
2  Magda \= Miltos, Magda \= Takis,     
   Xronis \= Albatross, Maro \= Albatross, Xronis \= 24, Maro \= 24, 
     %% does that mean they were together in one boat??
3  Olga = Batis, Aetos \= 27,  
4  ( Thiella = Miltos  ;  Thiella = Takis) ,  Thiella \= Basia,
5  Xara = 16, Olga > Magda,
6  Takis = 21 
```

## **用于`select/2`域选择：**

```
select([A|B], C):- select(A,C,C2), select(B,C2).
select([],_). 
```

我们准备开始编码。最明确的陈述首先出现。在定义之前不要测试任何变量，这一点很重要：

```
sailing(_Vars):-
  Dom = [16,19,21,24,27],     %% the domain
  Takis = 21, 
  select( [Takis, Miltos, Argiris, Xronis, Foibos], Dom), Xronis \= 24, 
  Xara = 16,  
  select( [Xara,  Maro,   Magda,   Olga,   Basia],  Dom), Maro \= 24,
  Magda \= Takis, Magda \= Miltos, Olga > Magda, 
  Olga = Batis, Argiris = Ostria, 
  select( [Batis, Ostria, Aetos, Albatross, Thiella], Dom), Aetos \= 27,
  Thiella \= Basia, 
  (Thiella = Miltos  ;  Thiella = Takis),
  Xronis \= Albatross, Maro \= Albatross. 
```

这给了我 57 个解决方案。所以也许`Xronis`并且`Maro`确实需要放在同一条船上。试试看。

* * *

如何报告您的答案是另一个问题。上面显示了求解器。

一种方法是调整上面的代码，例如

```
solve([Takis, Miltos, Argiris, Xronis, Foibos]) :- ... . 
```

并将其称为`?- solve(Men)`，以查看每个 的时间分配`Men`。另一种是将代码更改为例如

```
pair( A-B, A, B).

solve(Result) :-
  ... ,
  keysort( [Takis-'Takis', Miltos-'Miltos', Argiris-'Argiris',
                          Xronis-'Xronis', Foibos-'Foibos'], TM),
  maplist( pair,TM,Times,Men),
  keysort( [Xara-'Xara',  Maro-'Maro',   Magda-'Magda',   
                         Olga-'Olga',   Basia-'Basia'], TW),
  maplist( pair,TW,Times,Women),
  ... ,
  maplist( pair,TV,Times,Vessels),
  Result = [Vessels,Men,Women,Times],
  maplist( writeln, Result). 
```

如果您还想将四个列表转换`Result`为一个组合数据的转置列表，您也可以通过更多[`maplist/4`](http://www.swi-prolog.org/pldoc/doc_for?object=maplist/4)调用来完成此操作，例如

```
maplist( pair,VM,Vessels,Men), maplist( pair,WT,Women,Times),
maplist( quad,Result,VM,WT).

quad( (A,B,C,D), A-B, ... ). 
```

# javascript - 如果添加了 Javascript 功能，则 HTML 不会加载

> ID：13544455
> 
> 赞同：0
> 
> 时间：2012-11-24T18:53:27.967
> 
> 标签：javascript, html, jsp

我有一个 jsp 页面，它面临一个奇怪的问题。当我添加任何 javascript 函数时，html 的一部分正在消失。Eq 如果我删除 setRent() 函数，它即将到来的罚款即将到来。但是如果我添加它，完整的 html 不会加载即将到来。有人可以解决这个问题吗？提前致谢。

可见部分如下：

ROOMNO: 110 ROOMTYPE : AC/NONAC (Drop Down) ROOMRENT : 1000

如果我包含 javascript 函数，它不会完全加载 html（我可以从 html 的视图源中看到）。及其显示：

房间:(

即（000" td> 未加载）

我的java脚本：

```
 <script type="text/javascript">
    function setRent(){
        alert(">>>>");
    }

</script> 
```

我的jsp代码：

```
 <table class=green width="200" border="1" class="roomDetails" >

  <tr>
    <td width="94" class="bluebtn">ROOM NO</td>
    <td ><bean:write name="occupant" property="roomNo"/>  </td>
  </tr>
   <% if(occ.getOccupancyId()!=null){ %>
  <tr>
    <td class="bluebtn">ROOM TYPE</td>
    <td><bean:write name="occupant" property="roomType"/></td>
  </tr>
  <tr>
    <td class="bluebtn">ROOM RENT</td>
    <td><bean:write name="occupant" property="roomRent"/></td>
  </tr>
  <% } else{          
      ArrayList<String> list=occ.getRoomlist();

      %>

      <tr>
      <td class="bluebtn">ROOM TYPE</td>
      <td>
      <select name="roomType" id="roomType" onchange="setRent()">
      <%  for(String s: list){
          String [] room=s.split("~~~~~"); %>
        <option value="<%= room[0] %>"><%= room[0] %></option>
      <%   } %>
      </select>
      </td>
      </tr>
      <tr>
    <td class="bluebtn">ROOM RENT</td>
    <td><input type="text" name="roomRent" id="roomRent" value="<%= occ.getRoomRent() %>"  disabled="disabled"/></td>
    </tr>

      <%
  } %>

  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:08:27.713

您的服务器脚本似乎被函数中的代码弄糊涂了。

尝试避免`>`脚本中的字符是否有帮助：

```
<script type="text/javascript">
function setRent(){
  alert("\x3e\x3e\x3e\x3e");
}
</script> 
```

# javascript - html5 视频的静音图标在 Chrome 或 Safari 上不起作用

> ID：13544456
> 
> 赞同：2
> 
> 时间：2012-11-24T18:53:29.800
> 
> 标签：javascript, html, video, image, src

我遇到了一个我不明白其起源的问题：我有一个使用`<video>`标签在网站上播放的视频。客户要求仅添加一个图标形状的“静音”按钮，该图标在单击时会发生变化。

所以我试过这个：这是我放在视频上的图标

```
<img src="mute0.png" id="mutebutton" onclick="javascript:muteUnmute()" /> 
```

这是javascript：

```
var mutebutton = document.getElementById('mutebutton');

function muteUnmute() {
    video.muted = !video.muted;
}
video.onvolumechange = function(e) {
    mutebutton.src = video.muted ? "mute1.png" : "mute0.png";
} 
```

这在 Firefox 和 Opera 上运行良好，但 img src 在 Chrome 或 Safari 中没有改变！

我也试过这个：

```
video.onvolumechange = function(e) {
    if (video.muted) {
        mutebutton.src = "mute1.png"
    } else {
        mutebutton.src = "mute0.png"
    }
} 
```

但仍然没有结果。

有人知道为什么 Chrome 和 Safari 不允许我以这种方式更改 img src 吗？你能提出解决这个问题的方法吗？

谢谢！

**编辑：**

**解决了！**这可能对某人有用：

问题出在`video.onvolumechange`事件上，Chrome和Safari似乎不明白

所以我已经这样做了，它现在可以工作了：

```
var mutebutton = document.getElementById('mutebutton');
function muteUnmute() {
    video.muted = !video.muted;
    mutebutton.src = video.muted ? "mute1.png" : "mute0.png";
} 
```

# django - Django 和动态示例数据

> ID：13544461
> 
> 赞同：0
> 
> 时间：2012-11-24T18:54:12.187
> 
> 标签：django, json, django-fixtures

`initial_data.json`我正在尝试找到一种方法来轻松地从Django 中生成示例/演示数据集。

从本质上讲，夹具和`initial_data.json`做我需要的，除了日期是静态的......

我的应用程序使用日期来显示/排序其他容易生成的信息（评论、分数等），我想创建一个完整的数据集，以便能够向潜在客户展示应用程序的功能；问题出现在日期上。即使我运行`syncdb`（自动包括 my `initial_data.json`），日期也是静态的，因此所有信息都将与这些特定日期相关，而不是与今天相关。随着时间的推移，这些数据将在应用程序中变得不那么明显，因此无法向潜在客户充分展示其能力。

有没有一种简单的方法来更新日期信息，`initial_data.json`以便日期与当前的实际日期保持相关，然后我可以使用这些新日期再次运行 syncdb？（假设这一切都在本地机器上，只是为了向客户演示......而不是在服务器、生产或其他地方）。

我希望这是有道理的？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:19:38.880

您最好编写一个函数（可能是一个管理命令）来生成一些虚拟数据并保存到您的（临时？）数据库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:22:02.463

好的，我的解决方案是使用 django-mockups：[https ://github.com/sorl/django-mockups](https://github.com/sorl/django-mockups)

它通过遵守字段类型（文本、电子邮件、url 等）和这些字段中指定的 max_length 将随机数据添加到您的表（全部或仅由用户指定的那些）。插入 Lorem Ipsum 并插入格式正确的电子邮件地址等

非常易于使用，可以设置为通过 cron 作业运行，也可以在需要时手动运行。完美的。

# vb.net - 使用数据集以编程方式在 VB.NET 中加载 datagridview

> ID：13544462
> 
> 赞同：3
> 
> 时间：2012-11-24T18:54:13.300
> 
> 标签：vb.net, datagridview, dataset, populate

我在`dataGridReport`VB 2010 的设计器视图中创建了一个 datagridview。然后我使用查询来填充数据集，并且我希望这个数据集填充 datagridview ......但它似乎不起作用。

这是我的代码：

```
Dim con As New OleDb.OleDbConnection
con.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;
                         Data Source=C:\Users\Administrator\Documents\MenuDB.accdb"
con.Open()
Dim ds As DataSet = New DataSet
Dim adapter As New OleDb.OleDbDataAdapter
Dim sql As String

sql = @"SELECT OrderDate, MenuItem 
        FROM   MenuItems, Orders 
        WHERE  Orders.itemID = MenuItems.ID 
           AND Format(Orders.OrderDate,'mm/dd/yyyy') >= #" + fromDate + "# 
           AND Format(Orders.OrderDate,'mm/dd/yyyy') <= #" + toDate + "#"

adapter.SelectCommand = New OleDb.OleDbCommand(sql, con)
adapter.Fill(ds)
dataGridReport.DataSource = ds 
```

我知道现在缺少一些东西-我环顾四周，大多数人似乎都在使用类似的东西`dataGridReport.DataSource = ds.Tables('somereference')`

但我的数据集是从连接两个表的查询中动态创建的数据集，它不是存储在项目数据源中的东西。我也没有通过其属性将 datagridview 绑定到任何数据源。我错过了什么？

（顺便说一句，sql查询是正确的，我已经测试过了，返回了预期的结果）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T19:00:15.773

您可以通过索引从数据源中获取表：

```
dataGridReport.DataSource = ds.Tables(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-20T14:12:23.753

```
dataGridReport.DataSource = ds.Tables("Tablename") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-16T23:08:14.127

```
Dim con As New OleDb.OleDbConnection
con.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;
DataSource=C:\Users\Administrator\Documents\MenuDB.accdb"
con.Open()
Dim ds As DataSet = New DataSet
Dim adapter As New OleDb.OleDbDataAdapter
Dim sql As String

sql = @"SELECT OrderDate, MenuItem 
      FROM   MenuItems, Orders 
      WHERE  Orders.itemID = MenuItems.ID 
      AND Format(Orders.OrderDate,'mm/dd/yyyy') >= #" + fromDate + "# 
      AND Format(Orders.OrderDate,'mm/dd/yyyy') <= #" + toDate + "#"

adapter.SelectCommand = New OleDb.OleDbCommand(sql, con)
adapter.Fill(ds,sql)
dataGridReport.DataSource = ds.tables(sql) 
```

# c++ - 以结构为键的 std::map 未按预期工作

> ID：13544466
> 
> 赞同：1
> 
> 时间：2012-11-24T18:54:53.337
> 
> 标签：c++, struct, stdmap

我有两个映射来将用户对象列表存储为值。这些值的键是 uint32_t 和 SocketAddress 结构，如下定义。

第一张地图插入值很好，但在调试时查看本地人，我可以看到第二张地图似乎根本没有插入值。以下是相关代码：

套接字地址：

```
struct SocketAddress {
    sockaddr from;
    socklen_t fromlen;
    SocketAddress& operator=(const SocketAddress &source);
    bool operator==(const SocketAddress &source) const;
    bool operator!=(const SocketAddress &source) const;
    bool operator<(const SocketAddress &source) const;
    bool operator>(const SocketAddress &source) const;
    bool operator<=(const SocketAddress &source) const;
    bool operator>=(const SocketAddress &source) const;
};

Socket::SocketAddress& Socket::SocketAddress::operator=(const SocketAddress &source) {
    memcpy(&from, &source.from, source.fromlen);
    fromlen = source.fromlen;
    return *this;
}

bool Socket::SocketAddress::operator==(const SocketAddress &source) const {
    return (fromlen == source.fromlen && memcmp(&from, &source.from, fromlen) == 0);
}
bool Socket::SocketAddress::operator!=(const SocketAddress &source) const {
    return !this->operator==(source);
}
bool Socket::SocketAddress::operator<(const SocketAddress &source) const {
    return (fromlen < source.fromlen || memcmp(&from, &source.from, fromlen) < 0);
}
bool Socket::SocketAddress::operator>(const SocketAddress &source) const {
    return (fromlen > source.fromlen || memcmp(&from, &source.from, source.fromlen) > 0);
}
bool Socket::SocketAddress::operator<=(const SocketAddress &source) const {
    return !this->operator>(source);
}
bool Socket::SocketAddress::operator>=(const SocketAddress &source) const {
    return !this->operator<(source);
} 
```

用户构造函数和相关变量：

```
std::map<uint32_t, std::shared_ptr<User>> User::_usersListBySession;
std::map<Socket::SocketAddress, std::shared_ptr<User>> User::_userListByAddress;
std::atomic<unsigned int> User::_nextSessionID = 0;

User::User(const Socket::SocketAddress& addr) {
    address = addr;

    sessionID = ++_nextSessionID;

            // This seems to work just fine
    _usersListBySession.insert(std::pair<uint32_t, std::shared_ptr<User>>(sessionID, std::shared_ptr<User>(this)));
            // This does not
    _userListByAddress.insert(std::pair<Socket::SocketAddress, std::shared_ptr<User>>(addr, std::shared_ptr<User>(this)));
} 
```

地址定义：

```
 const Socket::SocketAddress& address 
```

未按预期运行的代码段。

```
 std::shared_ptr<User> user = User::getUserWithAddress(address);
    if (!user) {
        user = std::shared_ptr<User>(new User(address));
    } 
```

地图搜索功能：

```
std::shared_ptr<User> User::getUserWithAddress(const Socket::SocketAddress& addr) {
    return _userListByAddress[addr];
}

std::shared_ptr<User> User::getUserWithSessionID(uint32_t sessionid) {
    return _usersListBySession[sessionid];
} 
```

调用 User::getUserWithAddress(address) 时，返回的用户没有用户！查看内存中的这对，看起来地址存储为键，但没有存储指向用户的指针。我不知道该怎么想！有人有想法么？

* * *

编辑：看起来下面的用户发现了一些问题，尽管看起来这不是我的问题的原因。

修复运算符后，我将问题隔离为以下几行：

```
assert(this->address == addr);
_userListByAddress.insert(std::pair<Socket::SocketAddress, std::shared_ptr<User>>(addr, std::shared_ptr<User>(this)));
assert(this->address == addr); 
```

第一个断言通过，第二个断言失败。

* * *

编辑#2：

看起来我已经通过这样做解决了这个问题：

```
std::shared_ptr<User> user(this);
_usersListBySession.insert(std::pair<uint32_t, std::shared_ptr<User>>(sessionID, user));
assert(this->address == addr); // works
_userListByAddress.insert(std::pair<Socket::SocketAddress, std::shared_ptr<User>>(addr, user));
assert(this->address == addr); // works 
```

我不知道为什么。听起来像是另一个问题的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T19:01:27.777

这个实现是不正确的：

```
bool Socket::SocketAddress::operator<(const SocketAddress &source) const {
    return (fromlen < source.fromlen || memcmp(&from, &source.from, fromlen) < 0);
} 
```

一种可能的正确方法是：

```
bool Socket::SocketAddress::operator<(const SocketAddress &source) const {
    if (fromlen < source.fromlen) return true;
    else if (fromlen > source.fromlen) return false;
    //else: fromlen == source.fromlen
    return (memcmp(&from, &source.from, fromlen) < 0);
} 
```

您的实现不正确，因为它并不意味着强排序，您可以轻松找到同时存在的两个`SockedAddr`对象`a, b`：`a < b`并且`b < a`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:03:34.583

你`operator<`错了。如果长度相等，您应该只 compare.contents 以保持严格的弱排序。如所写，您可以有两个具有 A 的类的实例

使用该`if a not equal b return a less than b`模式编写脑死亡运算符 <。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:04:45.273

您对运算符的实现`<`可能会比较超出长度的地址组件：

```
bool Socket::SocketAddress::operator<(const SocketAddress &source) const {
    return (fromlen < source.fromlen || memcmp(&from, &source.from, fromlen) < 0);
} 
```

由于`||`使评估短路，因此只有在评估为`memcmp`时才会调用，这意味着.`fromlen < source.fromlen``false``fromlen >= source.fromlen`

结果，调用`memcmp`将传递两个长度中*较大*的一个，这意味着当两个地址的前缀`source.fromlen`匹配时，`memcmp`将比较地址有效部分之外的字节。

要解决此问题，您应该传递`source.fromlen`to`memcmp`而不是`fromlen`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T23:18:24.287

看起来我已经通过这样做解决了这个问题（除了上面的其他有用的评论）：

```
std::shared_ptr<User> user(this);
_usersListBySession.insert(std::pair<uint32_t, std::shared_ptr<User>>(sessionID, user));
assert(this->address == addr); // previously works, still works
_userListByAddress.insert(std::pair<Socket::SocketAddress, std::shared_ptr<User>>(addr, user));
assert(this->address == addr); // previously fails, now works 
```

# java - mysql java注册

> ID：13544468
> 
> 赞同：-5
> 
> 时间：2012-11-24T18:55:11.117
> 
> 标签：java, mysql, user-interface, login, registration

我们正在制作简单的java项目。程序将是一个独立的 . 我已经搜索过，但找不到任何有关如何注册的示例源代码。

我想使用 Mysql 作为数据库，我将我的项目连接到数据库。现在我要做的是有任何示例源代码来进行注册并将此信息用作登录信息。注意：我对我正在努力学习以完成项目的 Mysql 一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:16:35.647

请按照以下步骤操作： 1\. 下载 Mysql 并安装+ 下载 mysql-connector jar 文件。
2.在mysql（你可以使用mysql命令行客户端连接）提供你的密码并准备好。
输入以下代码：
3\. `create database TEST`
4\. `use TEST.`
5.`CREATE TABLE USER_DTLS (USERNAME VARCHAR2(100), PASS VARCHAR2(100));` 创建表
6.`INSERT INTO USER_DTLS('user1', 'user1234');INSERT INTO USER_DTLS('user2', 'user1234');` 创建用户
7\. 连接到 mysql：

```
public Connection getConnection(){
    Connection con=null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "TEST";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root"; 
    String password = "password";

    try {
        Class.forName(driver).newInstance();
        con = DriverManager.getConnection(url+dbName,userName,password);
        System.out.println("CONNECTION ESTABLISHED.");

    } catch (Exception e) {
        System.out.println("CONNECTION COULD NOT BE ESTABLISHED.");
        e.printStackTrace();
    }

    return con;

} 
```

在 JAVA 中：

```
Connection conn=getConnection();
PreparedStatement pst=conn.prepareStatement("select * from user_dtls where USERNAME =? and PASS=?");
pst.setString(username,1);
pst.setString(passwrd,2);
rs=pst.executeQuery();
if(rs.next()){
// HE is valid user
}else{
// INVALID
} 
```

希望这可以帮助。

# joomla - 如何在joomla 2.5的弹出模式窗口中显示模块

> ID：13544475
> 
> 赞同：0
> 
> 时间：2012-11-24T18:55:34.247
> 
> 标签：joomla, popup, modal-dialog, joomla2.5, joomla-module

我有一个时事通讯订阅模块。我想在弹出窗口中自动显示它（当用户查看页面时，无需任何点击）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:28:11.250

使用模态窗口。您可以创建一个新的自定义 html 模块并加载 javascript 来执行此操作。

这只是一种解决方案，可能不是最好的。

# arrays - 如何找到最大值。和分钟。在数组中使用最小比较？

> ID：13544476
> 
> 赞同：47
> 
> 时间：2012-11-24T18:55:47.513
> 
> 标签：arrays, algorithm, language-agnostic

这是一个面试问题：给定一个整数数组，找到最大值。和分钟。使用最小比较。

显然，我可以循环两次数组并`~2n`在最坏的情况下使用比较，但我想做得更好。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-24T19:07:41.170

```
1\. Pick 2 elements(a, b), compare them. (say a > b)
2\. Update min by comparing (min, b)
3\. Update max by comparing (max, a) 
```

这样，您将对 2 个元素进行 3 次比较，相当于元素的`3N/2`总比较`N`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-24T22:59:08.760

试图通过 srbh.kmr 改进答案。假设我们有序列：

```
A = [a1, a2, a3, a4, a5] 
```

比较`a1`&`a2`并计算`min12`, `max12`:

```
if (a1 > a2)
  min12 = a2
  max12 = a1
else
  min12 = a1
  max12 = a2 
```

同样计算`min34`, `max34`。既然`a5`是一个人，就保持原样吧……

现在比较`min12`&`min34`和计算`min14`，同样计算`max14`。最后比较`min14`&`a5`来计算`min15`。同样计算`max15`。

总共只有6个比较！

该解决方案可以扩展到任意长度的数组。可能可以通过类似于合并排序的方法来实现（将数组分成两半并计算`min` `max`每一半）。

**更新：**这是 C 中的递归代码：

```
#include <stdio.h>

void minmax (int* a, int i, int j, int* min, int* max) {
  int lmin, lmax, rmin, rmax, mid;
  if (i == j) {
    *min = a[i];
    *max = a[j];
  } else if (j == i + 1) {
    if (a[i] > a[j]) {
      *min = a[j];
      *max = a[i];
    } else {
      *min = a[i];
      *max = a[j];
    }
  } else {
    mid = (i + j) / 2;
    minmax(a, i, mid, &lmin, &lmax);
    minmax(a, mid + 1, j, &rmin, &rmax);
    *min = (lmin > rmin) ? rmin : lmin;
    *max = (lmax > rmax) ? lmax : rmax;
  }
}

void main () {
  int a [] = {3, 4, 2, 6, 8, 1, 9, 12, 15, 11};
  int min, max;
  minmax (a, 0, 9, &min, &max);
  printf ("Min : %d, Max: %d\n", min, max);
} 
```

现在我无法根据`N`（数组中的元素数量）确定确切的比较次数。但是很难看出一个人怎么能低于这么多的比较。

**更新：**我们可以计算出如下比较的数量：

在这棵计算树的底部，我们从原始数组中形成整数对。所以我们有`N / 2`叶子节点。对于这些叶节点中的每一个，我们只进行 1 次比较。

通过参考[*完美二叉树*](http://en.wikipedia.org/wiki/Binary_tree#Properties_of_binary_trees)的属性，我们有：

```
leaf nodes (L) = N / 2 // known
total nodes (n) = 2L - 1 = N - 1
internal nodes = n - L = N / 2 - 1 
```

对于每个内部节点，我们进行 2 次比较。因此，我们有`N - 2`比较。除了`N / 2`叶节点的比较之外，我们还有`(3N / 2) - 2`总比较。

所以，这可能是他的答案中暗示的解决方案 srbh.kmr。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-11T06:07:44.873

分而治之！

1,3,2,5

对于这个发现 min,max 将进行 6 次比较

但把它们分开

```
1,3 ---> will give min 1 and max 3 in one comparison
2,5 ---> will give min 2 and max 5 in one comparison 
```

现在我们可以比较两个最小值和最大值

```
min(1,2) --> will give the final min as 1 (one comparison)
max(3,5) ---> will give the final max as 5 (one comparison) 
```

所以总共有四个比较来找到最小值和最大值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-07T14:59:41.817

一种稍微不同的方法，它使用整数算术而不是比较（没有明确禁止）

```
for(int i=0;i<N;i++) {
  xmin += x[i]-xmin & x[i]-xmin>>31;
  xmax += x[i]-xmax & xmax-x[i]>>31;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-01T16:22:12.143

蛮力更快！

我希望有人能告诉我我的方式的错误，在这里，但是，......</p>

我比较了蛮力方法与（更漂亮的）递归分而治之的实际运行时间。典型结果（每个函数调用 10,000,000 次）：

```
Brute force :
  0.657 seconds 10 values => 16 comparisons.  Min @ 8, Max @ 10
  0.604 seconds 1000000 values => 1999985 comparisons.  Min @ 983277, Max @ 794659
Recursive :
  1.879 seconds 10 values => 13 comparisons.  Min @ 8, Max @ 10
  2.041 seconds 1000000 values => 1499998 comparisons.  Min @ 983277, Max @ 794659 
```

令人惊讶的是，对于 10 个项目的数组，蛮力方法的速度大约快 2.9 倍，而对于 1,000,000 个项目的数组，则快 3.4 倍。

显然，比较的次数不是问题，而可能是重新分配的次数，以及调用递归函数的开销（我不知道为什么 1,000,000 个值比 10 个值运行得快，但确实如此！）。

警告：我在 VBA 中而不是 C 中执行此操作，并且我正在比较双精度数字并将索引返回到 Min 和 Max 值的数组中。

这是我使用的代码（此处不包括类 cPerformanceCounter，但使用 QueryPerformanceCounter 进行高分辨率计时）：

```
Option Explicit

'2021-02-17

Private Const MIN_LONG As Long = -2147483648#

Private m_l_NumberOfComparisons As Long

Sub Time_MinMax()

   Const LBOUND_VALUES As Long = 1

   Dim l_pcOverall As cPerformanceCounter
   Dim l_d_Values() As Double
   Dim i As Long, _
       k As Long, _
       l_l_UBoundValues As Long, _
       l_l_NumberOfIterations As Long, _
       l_l_IndexOfMin As Long, _
       l_l_IndexOfMax As Long

   Set l_pcOverall = New cPerformanceCounter

   For k = 1 To 2

      l_l_UBoundValues = IIf(k = 1, 10, 1000000)

      ReDim l_d_Values(LBOUND_VALUES To l_l_UBoundValues)

      'Assign random values
      Randomize '1 '1 => the same random values to be used each time
      For i = LBOUND_VALUES To l_l_UBoundValues
         l_d_Values(i) = Rnd
      Next i
      For i = LBOUND_VALUES To l_l_UBoundValues
         l_d_Values(i) = Rnd
      Next i

      'This keeps the total run time in the one-second neighborhood
      l_l_NumberOfIterations = 10000000 / l_l_UBoundValues

      '——————— Time Brute Force Method —————————————————————————————————————————
      l_pcOverall.RestartTimer

      For i = 1 To l_l_NumberOfIterations

         m_l_NumberOfComparisons = 0

         IndexOfMinAndMaxDoubleBruteForce _
               l_d_Values, _
               LBOUND_VALUES, _
               l_l_UBoundValues, _
               l_l_IndexOfMin, _
               l_l_IndexOfMax

      Next

      l_pcOverall.ElapsedSecondsDebugPrint _
            3.3, , _
            " seconds Brute-Force " & l_l_UBoundValues & " values => " _
            & m_l_NumberOfComparisons & " comparisons. " _
            & " Min @ " & l_l_IndexOfMin _
            & ", Max @ " & l_l_IndexOfMax, _
            True
      '——————— End Time Brute Force Method —————————————————————————————————————

      '——————— Time Brute Force Using Individual Calls —————————————————————————
      l_pcOverall.RestartTimer

      For i = 1 To l_l_NumberOfIterations

         m_l_NumberOfComparisons = 0

         l_l_IndexOfMin = IndexOfMinDouble(l_d_Values)
         l_l_IndexOfMax = IndexOfMaxDouble(l_d_Values)

      Next

      l_pcOverall.ElapsedSecondsDebugPrint _
            3.3, , _
            " seconds Individual  " & l_l_UBoundValues & " values => " _
            & m_l_NumberOfComparisons & " comparisons. " _
            & " Min @ " & l_l_IndexOfMin _
            & ", Max @ " & l_l_IndexOfMax, _
            True
      '——————— End Time Brute Force Using Individual Calls —————————————————————

      '——————— Time Recursive Divide and Conquer Method ————————————————————————
      l_pcOverall.RestartTimer

      For i = 1 To l_l_NumberOfIterations

         m_l_NumberOfComparisons = 0

         IndexOfMinAndMaxDoubleRecursiveDivideAndConquer _
               l_d_Values, _
               LBOUND_VALUES, _
               l_l_UBoundValues, _
               l_l_IndexOfMin, l_l_IndexOfMax

      Next

      l_pcOverall.ElapsedSecondsDebugPrint _
            3.3, , _
            " seconds Recursive   " & l_l_UBoundValues & " values => " _
            & m_l_NumberOfComparisons & " comparisons. " _
            & " Min @ " & l_l_IndexOfMin _
            & ", Max @ " & l_l_IndexOfMax, _
            True
      '——————— End Time Recursive Divide and Conquer Method ————————————————————

   Next k

End Sub

'Recursive divide and conquer
Sub IndexOfMinAndMaxDoubleRecursiveDivideAndConquer( _
      i_dArray() As Double, _
      i_l_LBound As Long, _
      i_l_UBound As Long, _
      o_l_IndexOfMin As Long, _
      o_l_IndexOfMax As Long)

   Dim l_l_IndexOfLeftMin As Long, _
       l_l_IndexOfLeftMax As Long, _
       l_l_IndexOfRightMin As Long, _
       l_l_IndexOfRightMax As Long, _
       l_l_IndexOfMidPoint As Long

   If (i_l_LBound = i_l_UBound) Then 'Only one element

      o_l_IndexOfMin = i_l_LBound
      o_l_IndexOfMax = i_l_LBound

   ElseIf (i_l_UBound = (i_l_LBound + 1)) Then 'Only two elements

      If (i_dArray(i_l_LBound) > i_dArray(i_l_UBound)) Then
         o_l_IndexOfMin = i_l_UBound
         o_l_IndexOfMax = i_l_LBound
      Else
         o_l_IndexOfMin = i_l_LBound
         o_l_IndexOfMax = i_l_UBound
      End If

      m_l_NumberOfComparisons = m_l_NumberOfComparisons + 1

   Else 'More than two elements => recurse

      l_l_IndexOfMidPoint = (i_l_LBound + i_l_UBound) / 2

      'Find the min of the elements in the left half
      IndexOfMinAndMaxDoubleRecursiveDivideAndConquer _
            i_dArray, _
            i_l_LBound, _
            l_l_IndexOfMidPoint, _
            l_l_IndexOfLeftMin, _
            l_l_IndexOfLeftMax

      'Find the min of the elements in the right half
      IndexOfMinAndMaxDoubleRecursiveDivideAndConquer i_dArray, _
            l_l_IndexOfMidPoint + 1, _
            i_l_UBound, _
            l_l_IndexOfRightMin, _
            l_l_IndexOfRightMax

      'Return the index of the lower of the two values returned
      If (i_dArray(l_l_IndexOfLeftMin) > i_dArray(l_l_IndexOfRightMin)) Then
         o_l_IndexOfMin = l_l_IndexOfRightMin
      Else
         o_l_IndexOfMin = l_l_IndexOfLeftMin
      End If

      m_l_NumberOfComparisons = m_l_NumberOfComparisons + 1

      'Return the index of the lower of the two values returned
      If (i_dArray(l_l_IndexOfLeftMax) > i_dArray(l_l_IndexOfRightMax)) Then
         o_l_IndexOfMax = l_l_IndexOfLeftMax
      Else
         o_l_IndexOfMax = l_l_IndexOfRightMax
      End If

      m_l_NumberOfComparisons = m_l_NumberOfComparisons + 1

   End If

End Sub

Sub IndexOfMinAndMaxDoubleBruteForce( _
      i_dArray() As Double, _
      i_l_LBound As Long, _
      i_l_UBound As Long, _
      o_l_IndexOfMin As Long, _
      o_l_IndexOfMax As Long)

   Dim i As Long

   o_l_IndexOfMin = i_l_LBound
   o_l_IndexOfMax = o_l_IndexOfMin

   For i = i_l_LBound + 1 To i_l_UBound

      'Usually we will do two comparisons
      m_l_NumberOfComparisons = m_l_NumberOfComparisons + 2

      If (i_dArray(i) < i_dArray(o_l_IndexOfMin)) Then

         o_l_IndexOfMin = i

         'We don't need to do the ElseIf comparison
         m_l_NumberOfComparisons = m_l_NumberOfComparisons - 1

      ElseIf (i_dArray(i) > i_dArray(o_l_IndexOfMax)) Then

         o_l_IndexOfMax = i

      End If
   Next i

End Sub

Function IndexOfMinDouble( _
      i_dArray() As Double _
      ) As Long

   Dim i As Long

   On Error GoTo EWE

   IndexOfMinDouble = LBound(i_dArray)

   For i = IndexOfMinDouble + 1 To UBound(i_dArray)

      If (i_dArray(i) < i_dArray(IndexOfMinDouble)) Then
         IndexOfMinDouble = i
      End If

      m_l_NumberOfComparisons = m_l_NumberOfComparisons + 1

   Next i

   On Error GoTo 0
   Exit Function
EWE:
   On Error GoTo 0
   IndexOfMinDouble = MIN_LONG
End Function

Function IndexOfMaxDouble( _
      i_dArray() As Double _
      ) As Long

   Dim i As Long

   On Error GoTo EWE

   IndexOfMaxDouble = LBound(i_dArray)

   For i = IndexOfMaxDouble + 1 To UBound(i_dArray)

      If (i_dArray(i) > i_dArray(IndexOfMaxDouble)) Then
         IndexOfMaxDouble = i
      End If

      m_l_NumberOfComparisons = m_l_NumberOfComparisons + 1

   Next i

   On Error GoTo 0
   Exit Function
EWE:
   On Error GoTo 0
   IndexOfMaxDouble = MIN_LONG
End Function 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-13T11:34:55.123

阅读问题和答案后，我决定尝试几个版本（在 C# 中）。
我认为最快的是 Anton Knyazyev 的（无分支），它不是（在我的盒子上）。
结果：

```
/*                comp.  time(ns)
      minmax0     3n/2    855
      minmax1     2n      805
      minmax2     2n     1315 
      minmax3     2n      685          */ 
```

为什么 minmax1 和 minmax3 更快？可能是因为“分支预测器”做得很好，每次迭代发现新的最小值（或最大值）的机会都会减少，因此预测会变得更好。
总而言之，这是一个简单的测试。我确实意识到我的结论可能是：-
为时过早。
- 不适用于不同的平台。
假设它们是指示性的。
编辑：盈亏平衡点 minmax0，minmax3：~100 个项目，
10,000 个项目：minmax3 比 minmax0 快 ~3.5 倍。

```
using System;
using sw = System.Diagnostics.Stopwatch;
class Program
{
    static void Main()
    {
        int n = 1000;
        int[] a = buildA(n);
        sw sw = new sw();
        sw.Start();
        for (int i = 1000000; i > 0; i--) minMax3(a);
        sw.Stop();
        Console.Write(sw.ElapsedMilliseconds);
        Console.Read();
    }

    static int[] minMax0(int[] a)  // ~3j/2 comp.
    {
        int j = a.Length - 1;
        if (j < 2) return j < 0 ? null :
            j < 1 ? new int[] { a[0], a[0] } :
            a[0] < a[1] ? new int[] { a[0], a[1] } :
                          new int[] { a[1], a[0] };
        int a0 = a[0], a1 = a[1], ai = a0;
        if (a1 < a0) { a0 = a1; a1 = ai; }
        int i = 2;
        for (int aj; i < j; i += 2)
        {
            if ((ai = a[i]) < (aj = a[i + 1]))  // hard to predict
            { if (ai < a0) a0 = ai; if (aj > a1) a1 = aj; }
            else
            { if (aj < a0) a0 = aj; if (ai > a1) a1 = ai; }
        }
        if (i <= j)
        { if ((ai = a[i]) < a0) a0 = ai; else if (ai > a1) a1 = ai; }
        return new int[] { a0, a1 };
    }

    static int[] minMax1(int[] a)  // ~2j comp.  
    {
        int j = a.Length;
        if (j < 3) return j < 1 ? null :
            j < 2 ? new int[] { a[0], a[0] } :
            a[0] < a[1] ? new int[] { a[0], a[1] } :
                          new int[] { a[1], a[0] };
        int a0 = a[0], a1 = a0, ai = a0;
        for (int i = 1; i < j; i++)
        {
            if ((ai = a[i]) < a0) a0 = ai;
            else if (ai > a1) a1 = ai;
        }
        return new int[] { a0, a1 };
    }

    static int[] minMax2(int[] a)  // ~2j comp.  
    {
        int j = a.Length;
        if (j < 2) return j == 0 ? null : new int[] { a[0], a[0] };
        int a0 = a[0], a1 = a0;
        for (int i = 1, ai = a[1], aj = ai; ; aj = ai = a[i])
        {
            ai -= a0; a0 += ai & ai >> 31;
            aj -= a1; a1 += aj & -aj >> 31;
            i++; if (i >= j) break;
        }
        return new int[] { a0, a1 };
    }

    static int[] minMax3(int[] a)  // ~2j comp.
    {
        int j = a.Length - 1;
        if (j < 2) return j < 0 ? null :
            j < 1 ? new int[] { a[0], a[0] } :
            a[0] < a[1] ? new int[] { a[0], a[1] } :
                          new int[] { a[1], a[0] };
        int a0 = a[0], a1 = a[1], ai = a0;
        if (a1 < a0) { a0 = a1; a1 = ai; }
        int i = 2;
        for (j -= 2; i < j; i += 3)
        {
            ai = a[i + 0]; if (ai < a0) a0 = ai; if (ai > a1) a1 = ai;
            ai = a[i + 1]; if (ai < a0) a0 = ai; if (ai > a1) a1 = ai;
            ai = a[i + 2]; if (ai < a0) a0 = ai; if (ai > a1) a1 = ai;
        }
        for (j += 2; i <= j; i++)
        { if ((ai = a[i]) < a0) a0 = ai; else if (ai > a1) a1 = ai; }
        return new int[] { a0, a1 };
    }

    static int[] buildA(int n)
    {
        int[] a = new int[n--]; Random rand = new Random(0);
        for (int j = n; n >= 0; n--) a[n] = rand.Next(-1 * j, 1 * j);
        return a;
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-16T06:06:24.653

递归算法的简单伪代码：

```
Function MAXMIN (A, low, high)
    if (high − low + 1 = 2) then 
      if (A[low] < A[high]) then
         max = A[high]; min = A[low].
         return((max, min)).
      else
         max = A[low]; min = A[high].
         return((max, min)).
      end if
   else
      mid = low+high/2
      (max_l , min_l ) = MAXMIN(A, low, mid).
      (max_r , min_r ) =MAXMIN(A, mid + 1, high).
   end if

   Set max to the larger of max_l and max_r ; 
   likewise, set min to the smaller of min_l and min_r .

   return((max, min)). 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-07T07:25:33.343

```
import java.util.*;
class Maxmin
{
    public static void main(String args[])
    {
        int[] arr = new int[10];
        Scanner in = new Scanner(System.in);
        int i, min=0, max=0;
        for(i=0; i<=9; i++)
        {
            System.out.print("Enter any number: ");
            arr[i] = in.nextInt();          
        }
        min = arr[0];
        for(i=0; i<=9; i++)
        {
            if(arr[i] > max)
            {
                max = arr[i];
            }
            if(arr[i] < min)
            {
                min = arr[i];
            }
        }
        System.out.println("Maximum is: " + max);
        System.out.println("Minimum is: " + min);
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-10-31T08:57:07.300

到目前为止，我使用 java 的分而治之方法：

```
 public class code {    
    static int[] A = {444,9,8,6,199,3,0,5,3,200};
    static int min = A[0], max = A[1];
    static int count = 0;

    public void minMax(int[] A, int i, int j) {     
        if(i==j) {
            count = count + 2;
            min = Math.min(min, A[i]);
            max = Math.max(max, A[i]);
        }

        else if(j == i+1) {
            if(A[i] > A[j]) {
                count = count + 3;
                min = Math.min(min, A[j]);
                max = Math.max(max, A[i]);
            }
            else {
                count = count + 3;
                min = Math.min(min, A[i]);
                max = Math.max(max, A[j]);
            }
        }

        else {
            minMax(A,i,(i+j)/2);
            minMax(A,(i+j)/2+1,j);
        }
    }

    public static void main(String[] args) {
        code c = new code();
        if(Math.min(A[0], A[1]) == A[0]) {
            count++;
            min = A[0];
            max = A[1];
        }
        else {
            count++;
            min = A[1];
            max = A[0];
        }
        c.minMax(A,2,A.length-1);
        System.out.println("Min: "+min+" Max: "+max);
        System.out.println("Total comparisons: " + count);
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-05T23:47:21.003

```
public static int[] minMax(int[] array){
    int [] empty = {-1,-1};
    if(array==null || array.length==0){
        return empty;
    }

    int lo =0, hi = array.length-1;
    return minMax(array,lo, hi); 

}

private static int[] minMax(int []array, int lo, int hi){

    if(lo==hi){
        int [] result = {array[lo], array[hi]}; 
        return result;
    }else if(lo+1==hi){
        int [] result = new int[2];
        result[0] = Math.min(array[lo], array[hi]);
        result[1] = Math.max(array[lo], array[hi]);
        return result;
    }else{
        int mid = lo+(hi-lo)/2;          
        int [] left = minMax(array, lo, mid);
        int [] right = minMax(array, mid+1, hi);
        int []result = new int[2];          
        result[0] = Math.min(left[0], right[0]);
        result[1] = Math.max(left[1], right[1]);             
        return result;
    }

}

public static void main(String[] args) {

    int []array = {1,2,3,4,100};
    System.out.println("min and max values are "+Arrays.toString(minMax(array)));
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-11T05:05:01.090

```
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int n;
    cin>>n;
    set<int> t;
    for(int i=0;i<n;i++)
    {

        int x;
        cin>>x;
        t.insert(x);
    }
    set<int>::iterator s,b;
    s=t.begin();
    b=--t.end();
    cout<< *s<<" "<<*b<<endl;

    enter code here

    return 0;
} 
```

// 这可以在 log(n) 复杂度中完成！！！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-11-06T20:14:42.970

```
if (numbers.Length <= 0)
{
    Console.WriteLine("There are no elements");
    return;
}

if (numbers.Length == 1)
{
    Console.WriteLine($"There is only one element. So min and max of this 
                        array is: {numbers[0]}");
    return;
}

if (numbers.Length == 2)
{
    if (numbers[0] > numbers[1])
    {
        Console.WriteLine($"min = {numbers[1]}, max = {numbers[0]}");
        return;
    }

    Console.WriteLine($"min = {numbers[0]}, max = {numbers[1]}");
    return;
}

int i = 0;
int j = numbers.Length - 1;

int min = numbers[i];
int max = numbers[j];
i++;
j--;

while (i <= j)
{
    if(numbers[i] > numbers[j])
    {
        if (numbers[j] < min) min = numbers[j];
        if (numbers[i] > max) max = numbers[i];
    }
    else
    {
        if (numbers[i] < min) min = numbers[i];
        if (numbers[j] > max) max = numbers[j];
    }
    i++;
    j--;
} 
```

这是一个用 C# 编写的解决方案。我发现这种在两端燃烧蜡烛的方法是一个很好的解决方案。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-10-17T02:03:57.407

**成对比较**最适合最少的比较

```
# Initialization # 
- if len(arr) is even, min = min(arr[0], arr[1]), max = max(arr[0], arr[1])
- if len(arr) is odd, min = min = arr[0], max = arr[0]

# Loop over pairs # 
- Compare bigger of the element with the max, and smaller with min,
- if smaller element less than min, update min, similarly with max. 
```

比较总数 -

*   对于 size = 奇数，3(n - 1) / 2 其中 n 是数组的大小
*   对于大小 = 偶数，1 + 3*(n - 2)/2 = 3n/2 - 2

下面是上述伪代码的python代码

```
class Solution(object):
    def min_max(self, arr):
        size = len(arr)
        if size == 1:
            return arr[0], arr[0]

        if size == 2:
            return arr[0], arr[1]

        min_n = None
        max_n = None
        index = None
        if size % 2 == 0:       # One comparison
            min_n = min(arr[0], arr[1])
            max_n = max(arr[0], arr[1])
            st_index = 2

        else:
            min_n = arr[0]
            max_n = arr[0]
            st_index = 1
        for index in range(st_index, size, 2):
            if arr[index] < arr[index + 1]:
                min_n = min(arr[index], min_n)
                max_n = max(arr[index + 1], max_n)
            else:
                min_n = min(arr[index + 1], min_n)
                max_n = max(arr[index], max_n)

        return min_n, max_n 
```

* * *

## 回答 #14

> 赞同：-5
> 
> 时间：2012-11-24T18:58:37.180

只需循环一次数组，跟踪到目前为止的最大值和最小值。

# android - 如何为每个项目构建关闭 c++ 编译器

> ID：13544478
> 
> 赞同：2
> 
> 时间：2012-11-24T18:56:00.663
> 
> 标签：android, c++, eclipse, android-ndk

My Android - 项目内容超过 20 个 C++ 和 C 库。当我编译我的项目时，我编译了所有这些库。但我不更改 C 代码 - 我只更改 java - 代码。也许有一种方法可以避免每次都编译库？我使用 Eclipse（Java 和 NDK）和 ant。提前致谢！

编辑1：

安卓.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE                  := DeflatingDecompressor-v3
LOCAL_SRC_FILES               := DeflatingDecompressor/DeflatingDecompressor.cpp
LOCAL_LDLIBS                  := -lz

include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE                  := LineBreak-v2
LOCAL_SRC_FILES               := LineBreak/LineBreaker.cpp LineBreak/liblinebreak-  2.0/linebreak.c LineBreak/liblinebreak-2.0/linebreakdata.c LineBreak/liblinebreak-  2.0/linebreakdef.c

include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)

EXPAT_DIR                     := expat-2.0.1

LOCAL_MODULE                  := expat
LOCAL_SRC_FILES               := $(EXPAT_DIR)/lib/xmlparse.c $(EXPAT_DIR)/lib/xmlrole.c      $(EXPAT_DIR)/lib/xmltok.c
LOCAL_CFLAGS                  := -DHAVE_EXPAT_CONFIG_H
LOCAL_C_INCLUDES              := $(LOCAL_PATH)/$(EXPAT_DIR)
LOCAL_EXPORT_C_INCLUDES       := $(LOCAL_PATH)/$(EXPAT_DIR)/lib

include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE                  := NativeFormats-v2
LOCAL_CFLAGS                  := -Wall
LOCAL_LDLIBS                  := -lz -llog
LOCAL_STATIC_LIBRARIES        := expat

LOCAL_SRC_FILES               := \
NativeFormats/main.cpp \
NativeFormats/JavaNativeFormatPlugin.cpp \
NativeFormats/JavaPluginCollection.cpp \
NativeFormats/util/AndroidUtil.cpp \
NativeFormats/util/JniEnvelope.cpp \
NativeFormats/zlibrary/core/src/constants/ZLXMLNamespace.cpp \
NativeFormats/zlibrary/core/src/encoding/DummyEncodingConverter.cpp \
NativeFormats/zlibrary/core/src/encoding/Utf16EncodingConverters.cpp \
NativeFormats/zlibrary/core/src/encoding/Utf8EncodingConverter.cpp \
NativeFormats/zlibrary/core/src/encoding/JavaEncodingConverter.cpp \
NativeFormats/zlibrary/core/src/encoding/ZLEncodingCollection.cpp \
NativeFormats/zlibrary/core/src/encoding/ZLEncodingConverter.cpp \
NativeFormats/zlibrary/core/src/filesystem/ZLDir.cpp \
NativeFormats/zlibrary/core/src/filesystem/ZLFSManager.cpp \
NativeFormats/zlibrary/core/src/filesystem/ZLFile.cpp \
NativeFormats/zlibrary/core/src/filesystem/ZLInputStreamDecorator.cpp \
NativeFormats/zlibrary/core/src/filesystem/zip/ZLGzipInputStream.cpp \
NativeFormats/zlibrary/core/src/filesystem/zip/ZLZDecompressor.cpp \
NativeFormats/zlibrary/core/src/filesystem/zip/ZLZipDir.cpp \
NativeFormats/zlibrary/core/src/filesystem/zip/ZLZipEntryCache.cpp \
NativeFormats/zlibrary/core/src/filesystem/zip/ZLZipHeader.cpp \
NativeFormats/zlibrary/core/src/filesystem/zip/ZLZipInputStream.cpp \
NativeFormats/zlibrary/core/src/language/ZLCharSequence.cpp \
NativeFormats/zlibrary/core/src/language/ZLLanguageDetector.cpp \
NativeFormats/zlibrary/core/src/language/ZLLanguageList.cpp \
NativeFormats/zlibrary/core/src/language/ZLLanguageMatcher.cpp \
NativeFormats/zlibrary/core/src/language/ZLStatistics.cpp \
NativeFormats/zlibrary/core/src/language/ZLStatisticsGenerator.cpp \
NativeFormats/zlibrary/core/src/language/ZLStatisticsItem.cpp \
NativeFormats/zlibrary/core/src/language/ZLStatisticsXMLReader.cpp \
NativeFormats/zlibrary/core/src/library/ZLibrary.cpp \
NativeFormats/zlibrary/core/src/logger/ZLLogger.cpp \
NativeFormats/zlibrary/core/src/util/ZLFileUtil.cpp \
NativeFormats/zlibrary/core/src/util/ZLStringUtil.cpp \
NativeFormats/zlibrary/core/src/util/ZLUnicodeUtil.cpp \
NativeFormats/zlibrary/core/src/xml/ZLAsynchronousInputStream.cpp \
NativeFormats/zlibrary/core/src/xml/ZLPlainAsynchronousInputStream.cpp \
NativeFormats/zlibrary/core/src/xml/ZLXMLReader.cpp \
NativeFormats/zlibrary/core/src/xml/expat/ZLXMLReaderInternal.cpp \
NativeFormats/zlibrary/core/src/unix/filesystem/ZLUnixFSDir.cpp \
NativeFormats/zlibrary/core/src/unix/filesystem/ZLUnixFSManager.cpp \
NativeFormats/zlibrary/core/src/unix/filesystem/ZLUnixFileInputStream.cpp \
NativeFormats/zlibrary/core/src/unix/filesystem/ZLUnixFileOutputStream.cpp \
NativeFormats/zlibrary/core/src/unix/library/ZLUnixLibrary.cpp \
NativeFormats/zlibrary/text/src/model/ZLCachedMemoryAllocator.cpp \
NativeFormats/zlibrary/text/src/model/ZLTextModel.cpp \
NativeFormats/zlibrary/text/src/model/ZLTextParagraph.cpp \
NativeFormats/zlibrary/ui/src/android/filesystem/JavaFSDir.cpp \
NativeFormats/zlibrary/ui/src/android/filesystem/JavaInputStream.cpp \
NativeFormats/zlibrary/ui/src/android/filesystem/ZLAndroidFSManager.cpp \
NativeFormats/zlibrary/ui/src/android/library/ZLAndroidLibraryImplementation.cpp \
NativeFormats/fbreader/src/bookmodel/BookModel.cpp \
NativeFormats/fbreader/src/bookmodel/BookReader.cpp \
NativeFormats/fbreader/src/formats/EncodedTextReader.cpp \
NativeFormats/fbreader/src/formats/FormatPlugin.cpp \
NativeFormats/fbreader/src/formats/PluginCollection.cpp \
NativeFormats/fbreader/src/formats/fb2/FB2BookReader.cpp \
NativeFormats/fbreader/src/formats/fb2/FB2CoverReader.cpp \
NativeFormats/fbreader/src/formats/fb2/FB2MetaInfoReader.cpp \
NativeFormats/fbreader/src/formats/fb2/FB2Plugin.cpp \
NativeFormats/fbreader/src/formats/fb2/FB2Reader.cpp \
NativeFormats/fbreader/src/formats/fb2/FB2TagManager.cpp \
NativeFormats/fbreader/src/formats/css/StyleSheetParser.cpp \
NativeFormats/fbreader/src/formats/css/StyleSheetTable.cpp \
NativeFormats/fbreader/src/formats/html/HtmlBookReader.cpp \
NativeFormats/fbreader/src/formats/html/HtmlDescriptionReader.cpp \
NativeFormats/fbreader/src/formats/html/HtmlEntityCollection.cpp \
NativeFormats/fbreader/src/formats/html/HtmlPlugin.cpp \
NativeFormats/fbreader/src/formats/html/HtmlReader.cpp \
NativeFormats/fbreader/src/formats/html/HtmlReaderStream.cpp \
NativeFormats/fbreader/src/formats/oeb/NCXReader.cpp \
NativeFormats/fbreader/src/formats/oeb/OEBBookReader.cpp \
NativeFormats/fbreader/src/formats/oeb/OEBCoverReader.cpp \
NativeFormats/fbreader/src/formats/oeb/OEBMetaInfoReader.cpp \
NativeFormats/fbreader/src/formats/oeb/OEBPlugin.cpp \
NativeFormats/fbreader/src/formats/oeb/OEBTextStream.cpp \
NativeFormats/fbreader/src/formats/oeb/XHTMLImageFinder.cpp \
NativeFormats/fbreader/src/formats/rtf/RtfBookReader.cpp \
NativeFormats/fbreader/src/formats/rtf/RtfDescriptionReader.cpp \
NativeFormats/fbreader/src/formats/rtf/RtfPlugin.cpp \
NativeFormats/fbreader/src/formats/rtf/RtfReader.cpp \
NativeFormats/fbreader/src/formats/rtf/RtfReaderStream.cpp \
NativeFormats/fbreader/src/formats/txt/PlainTextFormat.cpp \
NativeFormats/fbreader/src/formats/txt/TxtBookReader.cpp \
NativeFormats/fbreader/src/formats/txt/TxtPlugin.cpp \
NativeFormats/fbreader/src/formats/txt/TxtReader.cpp \
NativeFormats/fbreader/src/formats/util/EntityFilesCollector.cpp \
NativeFormats/fbreader/src/formats/util/MergedStream.cpp \
NativeFormats/fbreader/src/formats/util/MiscUtil.cpp \
NativeFormats/fbreader/src/formats/util/XMLTextStream.cpp \
NativeFormats/fbreader/src/formats/xhtml/XHTMLReader.cpp \
NativeFormats/fbreader/src/formats/doc/DocBookReader.cpp \
NativeFormats/fbreader/src/formats/doc/DocMetaInfoReader.cpp \
NativeFormats/fbreader/src/formats/doc/DocPlugin.cpp \
NativeFormats/fbreader/src/formats/doc/DocStreams.cpp \
NativeFormats/fbreader/src/formats/doc/OleMainStream.cpp \
NativeFormats/fbreader/src/formats/doc/OleStorage.cpp \
NativeFormats/fbreader/src/formats/doc/OleStream.cpp \
NativeFormats/fbreader/src/formats/doc/OleStreamParser.cpp \
NativeFormats/fbreader/src/formats/doc/OleStreamReader.cpp \
NativeFormats/fbreader/src/formats/doc/OleUtil.cpp \
NativeFormats/fbreader/src/formats/doc/DocInlineImageReader.cpp \
NativeFormats/fbreader/src/formats/doc/DocFloatImageReader.cpp \
NativeFormats/fbreader/src/library/Author.cpp \
NativeFormats/fbreader/src/library/Book.cpp \
NativeFormats/fbreader/src/library/Comparators.cpp \
NativeFormats/fbreader/src/library/Library.cpp \
NativeFormats/fbreader/src/library/Tag.cpp

LOCAL_C_INCLUDES              := \
$(LOCAL_PATH)/NativeFormats/util \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/constants \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/encoding \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/filesystem \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/image \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/language \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/library \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/logger \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/util \
$(LOCAL_PATH)/NativeFormats/zlibrary/core/src/xml \
$(LOCAL_PATH)/NativeFormats/zlibrary/text/src/model

include $(BUILD_SHARED_LIBRARY) 
```

编辑2：

构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="FBReaderJ" default="help">
<loadproperties srcFile="local.properties" />
<property file="ant.properties" />
<loadproperties srcFile="project.properties" />

<!-- quick check on sdk.dir -->
<fail
  message="sdk.dir is missing. Make sure to generate local.properties using 'android      update project'"
unless="sdk.dir"
/>

<target name="init" description="Initialization...">
    <fail message="Ant 1.7.0 or higher is required. Please upgrade your ant.">
        <condition>
            <not>
                <antversion property="ant.version"   atleast="1.7.0"/>
            </not>
        </condition>
    </fail>
</target>

<target name="native" unless="native.libraries.are.uptodate">
    <fail message="Native libraries are not up-to-date. Please run ndk-build     manually.">
        <condition>
            <os family="windows" />
        </condition>
    </fail>
    <echo message="Building native libraries..."/>
    <exec executable="${ndk.dir}/ndk-build" />
    <echo message="DONE (Building native libraries)"/>
</target>

<target name="check.native.libraries" depends="init">
    <echo message="Checking if native libraries are up-to-date..."/>
    <condition property="native.libraries.are.uptodate" value="true">
        <and>
            <!-- Check if libDeflatingDecompressor exists and is up to   date -->
            <available file="./libs/armeabi/libDeflatingDecompressor-  v3.so" />
            <uptodate   targetfile="libs/armeabi/libDeflatingDecompressor-v3.so">
                <srcfiles dir="jni/DeflatingDecompressor" includes="**/*.cpp"/>
            </uptodate>
            <!-- Check if libLineBreak exists and is up to date -->
            <available file="./libs/armeabi/libLineBreak-v2.so" />
            <uptodate property="libLineBreak-build-is-not-required"   targetfile="libs/armeabi/libLineBreak-v2.so">
                <srcfiles dir="jni/LineBreak"   includes="**/*.cpp,**/*.c,**/*.h"/>
            </uptodate>
            <!-- Check if libNativeFormats exists and is up to date -->
            <available file="./libs/armeabi/libNativeFormats-v2.so" />
            <uptodate property="libNativeFormats-build-is-not-required"   targetfile="libs/armeabi/libNativeFormats-v2.so">
                <srcfiles dir="jni/NativeFormats" includes="**/*.cpp,**/*.c,**/*.h"/>
            </uptodate>
        </and>
    </condition>
    <echo message="DONE (Checking if native libraries are up-to-date)"/>
</target>

<target name="resources" depends="init, check.native.libraries">
    <echo message="Cleaning up the 'res/drawable' folder..." />
    <delete dir="res/drawable/">
        <files includes="**"/>
    </delete>
    <echo message="DONE (Cleaning up the 'res/drawable' folder)" />

    <echo message="Copying icons files to 'res/drawable/' folder..." />
    <copy todir="res/drawable" verbose="false" overwrite="true" flatten="true">
        <fileset file="icons/fbreader.png" />
        <fileset dir="icons/" includes="*/*" />
    </copy>
    <echo message="DONE (Copying icons files to 'res/drawable/' folder)" />
</target>

<target name="-pre-build" depends="init, resources, native">
</target>
<!--
<target name="-pre-compile">
</target>

<target name="-post-compile">
</target>
-->
<target name="clean">
    <echo message="Deleting temporary files..." />
    <delete dir="gen" />
    <delete dir="bin" />
    <delete dir="res/drawable" />
    <delete dir="out" />
    <delete dir="obj" />
    <echo message="DONE (Deleting temporary files)" />
</target>

<target name="distclean" depends="clean">
    <echo message="Deleting native libraries..." />
    <delete dir="libs/armeabi" />
    <delete dir="libs/armeabi-v7a" />
    <delete dir="libs/x86" />
    <delete dir="libs/mips" />
    <delete dir="libs/mips-r2" />
    <delete dir="libs/mips-r2-sf" />
    <echo message="DONE (Deleting native libraries)" />
</target>

<import file="${sdk.dir}/tools/ant/build.xml" />
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:08:43.813

在您的 ant`build.xml`中，您有一个检查`<available file="./libs/armeabi/libDeflatingDecompressor- v3.so" />`。从下一行看来，这个文件应该没有空格，所以 ant 永远不会找到该库并总是尝试通过调用 ndk-build 来重建。

在您`<uptodate targetfile="libs/armeabi/libDeflatingDecompressor-v3.so">`中，您没有`property`定义属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T08:37:10.543

除非您使用 NDK **r8c**，否则您可以无条件地调用`ndk-build`您的项目。它只会将`libDeflatingDecompressor-v3.so`文件从复制`obj/local/armeabi`到`libs/armeabi`，剥离符号信息并处理所有依赖项和设置。

但是在最新的**r8c**版本中，存在一个导致无条件完全重建的错误。我最近发布了针对此错误[的修复程序。](https://groups.google.com/d/msg/android-ndk/EFA21mVVqH0/7gIJrmzK41EJ)

# datetimepicker - dd/mm/yy 的 jquery DateTimePicker 验证无法正常工作

> ID：13544482
> 
> 赞同：2
> 
> 时间：2012-11-24T18:56:17.900
> 
> 标签：datetimepicker, date-format, jquery-validate

我是 jquery 的新手。在我的 MVC 项目中，大多数验证都是在 jquery 中完成的。期待这个日期字段，一切正常。让我描述一下我的问题。

我有一个日期文本框，它附加到 datetimepicker。我的代码如下。

$("#DateTimeTextBox").datetimepicker({ dateFormat: 'dd/mm/yy', timeFormat: 'hh:mm' });

为了验证此字段，我正在使用此代码

'DateTimeTextBox'：{ 必需：真，日期：真}，

在这里，如果我们为 datetimepicker 指定日期格式为“mm/dd/yy”，则验证显示正确。如果我们给出这样的日期格式“dd/mm/yy”，总是显示验证错误消息“请输入有效日期”。但我给出了正确的日期，例如“25/11/2012”。

是否有任何地方需要设置验证的日期格式。

谢谢

梭宾保洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:44:05.080

[additional-methods.js](https://github.com/jzaefferer/jquery-validation/blob/master/additional-methods.js)文件与 jquery validate 捆绑在一起，并具有许多有用的方法，包括方法“dateITA”，您可以使用它来验证 dd/mm/yyy 格式的日期。在此处下载最新的查询验证代码。

[https://github.com/jzaefferer/jquery-validation](https://github.com/jzaefferer/jquery-validation/)

在您的页面中添加对 additional-methods.js 的引用，并使用规则“dateITA”而不是“日期”。

# jquery - jquery Mobile - 导航其他页面后javascript停止工作

> ID：13544483
> 
> 赞同：2
> 
> 时间：2012-11-24T18:56:40.590
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 最新版本。一切正常。我有一些自定义的外部和内部 JS 脚本。主页中有一个 jquery 幻灯片，效果很好，但是当我导航到另一个页面并按返回主页时后退按钮或单击任何链接，幻灯片停止工作。

如果我添加这些链接`data-ajax="false"`，那么幻灯片在每种情况下都能正常工作。但我不想`data-ajax="false"`用于快速响应。我怎么解决这个问题？我对 jquery mobile 有点陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:05:03.777

尝试在页面加载时执行此操作：

```
$(document).ready(function(){
    $('div[data-role=page]').page('destroy').page();
}); 
```

它应该刷新您的页面并让一切重新运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T19:07:05.510

根据[文档](http://jquerymobile.com/demos/1.0/docs/api/events.html)，当您在 jQuery Mobile 中的页面之间导航时，默认情况下会重新加载内容。当您使用`data-ajax="false"`它时，它会强制 jQuery Mobile 完全重新加载页面，因此您的脚本可以正常工作。

您似乎有以下幻灯片调用：

```
$(function(){
     // init gallery on DOM ready
     $('.gallery').slideshow();
}); 
```

但是当您使用 jQuery Mobile 在页面之间导航时，您需要在重新加载某些页面时重新初始化您的图库，因此通用代码将如下所示：

```
$(document).bind('pageinit', function() {
     // init gallery when current page loaded
     $('.gallery').slideshow();
}); 
```

# c# - 如何使用图形 api 在 facebook 上上传图像？

> ID：13544485
> 
> 赞同：1
> 
> 时间：2012-11-24T18:56:58.767
> 
> 标签：c#, asp.net, facebook-graph-api, facebook-c#-sdk

我想在用户个人资料上上传图片。我有一个`Bitmap`形式的图像。我正在使用此代码...

```
 Bitmap bit = new Bitmap("E:\\abc.jpg");
        MemoryStream ms = new MemoryStream();

        bit.Save(ms, ImageFormat.Jpeg);

        byte[] buffer = ms.ToArray();

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create("https://graph.facebook.com/me/photos?access_token=" + acc_token);

        req.Method = "POST";
        req.ContentLength = buffer.Length;
        //req.ContentType = "application/x-www-form-urlencoded";
        req.ContentType = "image/jpeg";                       

        Stream rq_strm = req.GetRequestStream();
        rq_strm.Write(buffer, 0, buffer.Length);
        rq_strm.Close();

        HttpWebResponse res = (HttpWebResponse)req.GetResponse();     //got error here
        Response.Write("RESPONSE: " + res.StatusDescription); 
```

我收到错误`The remote server returned an error: (400) Bad Request.`我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:10:04.203

基本上，这意味着服务器无法识别您的请求。通常对于 API，这意味着 API 无法破译某些内容，或者它缺少一个重要功能。在这种情况下，它确定您没有包含任何`source`标签。通常，这是通过带有`<input type='file'>`标签的 HTML 表单发送的。模拟这个的方法相当复杂，但 [这个问题](https://stackoverflow.com/a/567460/544198)会为你指明正确的方向。

# objective-c - Objective-C 在方法中更改实例变量的值

> ID：13544489
> 
> 赞同：0
> 
> 时间：2012-11-24T18:57:27.490
> 
> 标签：objective-c, xcode4

我在 XCode 4.4 上编写了一个 Objective-C 代码。我有一个 NSMutableArray 作为我的类 k_info 的实例变量，我也以 oneplaces 的名称定义和合成（非原子，保留）属性。我无法在 NSMutableArray 个位中添加 NSMUtableString 对象。当我尝试添加它时。onesplaces 的大小保持为 0，并且零索引处的对象显然保持为空。我尝试使用和不使用“self”关键字来执行此操作，但在任何一种情况下都不起作用。我添加对象并打印它的语法是正确的，因为当我创建一个新的 NSMutableArray 测试并尝试做同样的事情时，它适用于它，但不适用于实例变量 oneplaces。如果不解决此问题，我将无法在我的项目中继续进行。请告诉我为什么会发生这种情况以及我应该如何解决这个问题。

-(void)createinfo:(NSMutableArray *)al varsis:(int)vars { NSMutableString* stes=[[NSMutableString alloc]init]; stes=(NSMutableString*)@"string0";

```
 [ onesplaces addObject:stes];
  NSLog(@"%u",[onesplaces count]);
  NSLog(@"value is: %@ ",[ onesplaces objectAtIndex:0]);

  [ self.onesplaces addObject:stes];
   NSLog(@"%u",[onesplaces count]);
   NSLog(@"value is: %@ ",[self.onesplaces objectAtIndex:0]);

  NSMutableArray* test=[[NSMutableArray alloc]init];
  [ test addObject:stes];
   NSLog(@"%u",[test count]);
  NSLog(@"value is: %@ ",[test objectAtIndex:0]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:07:16.570

您可能忘记创建数组了。在您的代码中的某处，可能在您的`init`方法中，您需要在使用它之前创建数组。

```
self.onesplaces = [[NSMutableArray alloc] init]; 
```

你得到`nil`的不是错误消息，因为 Objective-C 允许你向 nil 发送消息，它总是返回 nil。

# php - htaccess：如何隐藏部分链接？

> ID：13544492
> 
> 赞同：-1
> 
> 时间：2012-11-24T18:57:30.780
> 
> 标签：php, linux, apache, .htaccess

是否可以使用 .htaccess 重写规则隐藏部分链接？我正在研究热链接保护。播放列表通过以下链接生成：`http://site.com/get.playlist.php?`

完整链接：

```
http://site.com/get.playlist.php?playlist=http://site.com/video/34141ce7760f58f0c3eb5e0c758afb69/pl/playlist.txt&hash=34141ce7760f58f0c3eb5e0c758afb69 
```

我想显示没有`&hash=`和的链接`http://site.com/get.playlist.php?playlist=`

像这样：

```
http://site.com/video/34141ce7760f58f0c3eb5e0c758afb69/pl/playlist.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:04:32.917

不幸的是，这是不可能的（至少，不是以任何合理的方式）使用`.htaccess`.

无法更改浏览器显示的 URL - 但是，您*可以*做相反的事情 -`.htaccess`确实有能力保持 URL 相同，但在服务器上显示不同的页面。

这会有点难以设置（特别是因为`hash`参数），但可能需要您考虑。

# php - Five9 的 API：如何使用 SOAP API 和基本身份验证提取报告

> ID：13544495
> 
> 赞同：7
> 
> 时间：2012-11-24T18:57:51.660
> 
> 标签：php, xml, api, soap

我们正在尝试使用报告 API 从 Five9 的服务器访问数据。我们在下面编写了代码，但没有得到任何结果。对我来说，问题似乎与对 Five9 服务器的身份验证有关。请检查帮助我们了解如何定期提取特定活动的数据并将其存储在数据仓库中。

```
<?php
$soapUser = "USERNAME";  //  username
$soapPassword = "DEMOPASSWORD"; // password

$soap_options   = array( 'login' => $soapUser, 'password' => $soapPassword );
$auth_details   = base64_encode($soapUser.":".$soapPassword);

$client = new SoapClient("https://api.five9.com/wsadmin/v2/AdminWebService?wsdl",       $soap_options);
$header = new SoapHeader("https://api.five9.com/wsadmin/v2/AdminWebService/getCallLogReport", "authentication", "Basic $auth_details"); 
//echo "Response:\n" . $client->__getLastResponse() . "\n";
$client->__setSoapHeaders($header);

$xml_data = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v2="http://service.admin.ws.five9.com/v2/AdminWebService/getCallLogReport">
<soapenv:Header/>
<soapenv:Body>
  <v2:getCallLogReport>
        <campaigns>Campaign1</campaigns>
  </v2:getCallLogReport>
</soapenv:Body>
</soapenv:Envelope>';

echo $result = $client->getCallLogReport($xml_data,   "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl", "https://api.five9.com/wsadmin/v2/AdminWebService/getCallLogReport",0); 

?> 
```

示例 XML

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:v2="http://service.admin.ws.five9.com/v2/">
<soapenv:Header/>
<soapenv:Body>
  <v2:getCallLogReport>
     <!--Optional:-->
     <time>
        <!--Optional:-->
        <end>?</end>
        <!--Optional:-->
        <start>?</start>
     </time>
     <!--Optional:-->
     <criteria>
        <!--Optional:-->
        <ANI>?</ANI>
        <!--Zero or more repetitions:-->
        <agents>?</agents>
        <!--Zero or more repetitions:-->
        <callTypes>?</callTypes>
        <!--Zero or more repetitions:-->
        <campaigns>?</campaigns>
        <!--Optional:-->
        <DNIS>?</DNIS>
        <!--Zero or more repetitions:-->
        <dispositions>?</dispositions>
        <!--Zero or more repetitions:-->
        <lists>?</lists>
        <!--Zero or more repetitions:-->
        <skillGroups>?</skillGroups>
     </criteria>
  </v2:getCallLogReport>
  </soapenv:Body>
 </soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T18:12:20.427

我知道这是一个老问题，但我们最近切换到使用 Five9，但我找不到任何 PHP 示例可以使用。下面说明如何使用标准凭据进行连接，并执行呼叫列表。我已经包含了整个选择标准结构（已注释掉）供您参考。如果包含选择属性，则必须指定相应的条件。

```
$soap = null;
$wsdl = "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl";

$user = "yourloginid";
$pass = "yourpassword";

$soap_options = array("login" => $user, "password" => $pass);

$soap = new SoapClient($wsdl, $soap_options);

/* create the callLogReportCriteria data selection structure */
$arryParams['time']  = array("start" => "2013-05-05T00:00:01",
                             "end" => "2013-05-05T09:00:00");
$arryParams['criteria'] = array("callTypes" =>  array("INBOUND","OUTBOUND"));

/************ Entire Structure for selection criteria *************/
/*$arryParams['criteria'] = array("ANI" =>  "6178752803",
                                "Agents" => "",
                                "callTypes" =>  array("INBOUND","OUTBOUND"),
                                "campaigns" =>  "",
                                "dispositions" => "",
                                "Lists" =>  "",
                                "skillGroups" => ""
                               );*/

$result = $soap->getCallLogReport($arryParams);

if(isset($result->return->records)) {
    /* you have records returned */
    $objRecords = $result->return->records;

    for($i=0 ; $i < sizeof($objRecords) ; $i++) {
        /* do your processing */
        printf("ANI: %s<br />", $objRecords[$i]->values->data[3]); //4th element has ANI
    }

} 
```

某些代码行可以组合，但为了便于理解，我将它们分开。您还需要在实际 SOAP 调用周围使用 try/catch 来处理错误。

希望这将有助于缩短某人的学习曲线。我知道我很想在一个月前拥有这个！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T19:17:13.010

看起来您的问题是您在soap标头中发送了base64编码的用户名/密码。它实际上需要包含在 http 标头中。我的解决方案是红宝石，但希望它可以帮助你。

```
soap_client = Savon.client(
  endpoint: "https://api.five9.com/wsadmin/AdminWebService/", 
  namespace: "http://service.admin.ws.five9.com/", 
  headers: { "Authorization" => "Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==" }, 
  env_namespace: :soapenv, 
  namespace_identifier: :ser, 
  ssl_verify_mode: :none
)

message = { 
  "lookupCriteria" => {
"criteria" => {
      "field" => "email_address",
      "value" => "something@example.com"
    }
  }
}

response = soap_client.call(:getContactRecords, message: message)
p response.body 
```

所以你的 XML 最终看起来像这样。

```
SOAP request: https://api.five9.com/wsadmin/AdminWebService/
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==, SOAPAction: "getContactRecords",
Content-Type: text/xml;charset=UTF-8, Content-Length: 471

<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ser="http://service.admin.ws.five9.com/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <ser:getContactRecords>
      <lookupCriteria>
        <criteria>
          <field>email_address</field>
          <value>something@example.com</value>
        </criteria>
      </lookupCriteria>
    </ser:getContactRecords>
  </soapenv:Body>
</soapenv:Envelope>

HTTPI POST request to api.five9.com (httpclient)
SOAP response (status 200)

<env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'>
  <env:Header></env:Header>
  <env:Body>
    <ns2:getContactRecordsResponse xmlns:ns2="http://service.admin.ws.five9.com/" xmlns:ns3="http://service.admin.ws.five9.com/v1/">
      <return>
        <fields>number1</fields>
        <fields>email_address</fields>
        <records>
          <values>
            <data>5555555555</data>
            <data>something@example.com</data>
          </values>
        </records>
      </return>
    </ns2:getContactRecordsResponse>
  </env:Body>
</env:Envelope> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-24T16:05:24.120

@JesseQ 很好的例子！帮了我很多。以下是我如何设置它以在他们的武器库中运行任何 Five9 报告，包括您自己创建的报告。对于自定义报告，您需要创建一个新文件夹/报告并将其放置在 Five9 门户网站的“自定义报告”部分。希望这可以帮助。

**MySQL 数据库连接**(dbConnect.php)

```
<?php
    $mysqli = new mysqli("your db's IP address", "your db user", "your db password", "your db");
    if ($mysqli->connect_error) {
        die('Connect Error: (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);
    }
?> 
```

**Five9/MySQL 数据库导入**

```
<?php
    require_once("../include/dbConnect.php");
    $startDate = new DateTime();
    $endDate = new DateTime();
    $startDate->setDate(2015, 07, 22);
    $endDate->setDate(2015, 07, 22);
    $five9 = "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl";
    $five9Credentials = array("login" => "your Five9 username", "password" => "your Five9 password");
    $soap = new SoapClient($five9, $five9Credentials);
    $runReportParam["criteria"]["time"] = array("start" => $startDate->format("Y-m-d\T00:00:00"), "end" => $endDate->format("Y-m-d\T23:59:59"));
    $runReportParam["folderName"] = "My Custom Reports";
    $runReportParam["reportName"] = "My First Report";
    $runReportResult = $soap->runReport($runReportParam);
    if(isset($runReportResult->return)){
        $runReportData = $runReportResult->return;
        $isReportRunningParam["identifier"] = $runReportData;
        $isReportRunningParam["timeout"] = 10;
        $isReportRunningResult = $soap->isReportRunning($isReportRunningParam);
        if(empty($isReportRunningResult->return)){
            $getReportResultParam["identifier"] = $runReportData;
            $getReportResult = $soap->getReportResult($getReportResultParam);
            if(isset($getReportResult->return->records)){                
                $getReportResultData = $getReportResult->return->records;
                echo "[" . date("Y-m-d h:i:s") . "] " . $runReportData . "\n";
                for($x = 0; $x < $xx = count($getReportResultData); $x++){
                    $query = "REPLACE INTO MyTable(
                        CallDate, CallTime, DNIS, Disposition, Zip, AreaCode, ANI)
                        VALUES (?,?,?,?,?,?,?)";
                    $result = $mysqli->prepare($query);
                    $result->bind_param("sssssss", 
                        $getReportResultData[$x]->values->data[0],
                        $getReportResultData[$x]->values->data[1],
                        $getReportResultData[$x]->values->data[2],
                        $getReportResultData[$x]->values->data[3],
                        $getReportResultData[$x]->values->data[4],
                        $getReportResultData[$x]->values->data[5],
                        $getReportResultData[$x]->values->data[6]
                    );
                    $result->execute();
                    $result->store_result();
                    if ($result->error){
                        die('Connect Error: (' . $result->errno . ') ' . $result->error);
                    }
                    echo "[" . date("Y-m-d h:i:s") . "] " . $x . "\n";
                }
            } else {
                echo "Error: " . $runReportData . " returned no data";
            }
        } else {
            echo "Error: " . $runReportData . " exceeded the report runtime limit";
        }
    } else {
        echo "Error: " . $runReportParam["reportName"] . " wasn't found";
    }
    $mysqli->close();
?> 
```

# oop - 这是一个明智的面向对象设计吗？

> ID：13544496
> 
> 赞同：0
> 
> 时间：2012-11-24T18:58:09.350
> 
> 标签：oop

```
---------------------
| AbstractPersister |
---------------------
         ^
        / \
        ---
         |
------------------
| OrderPersister |
------------------
         ^
        / \
        ---
         |
    ---------     ---------
    | Offer |<>---| Item  |
    ---------     --------- 
```

以上是 UML 类图的 ascii 艺术。我有一个名为“offer”的域类，其中包含项目。例如，一份费用为 500 美元的旅行优惠，其中包含一张巴士票、在汽车旅馆的一晚住宿和一场演出。

当客户从商店结账时，报价将作为包含订单项目的订单保存到数据库中。

在纯面向对象的设计中，让 offer 继承自 是否有意义`OrderPersister`？`OrderPersister`可以使用其超类`AbstractPersister`. 我想添加一个方法来`OrderPersister`调用`Book`，它将在数据库中创建订单及其项目。

如果这是一个糟糕的设计，还有什么替代方案？我希望它尽可能面向对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:26:57.450

在扩展一个类之前，你应该问这个问题：是一个？

报价是 OrderPersister 吗？我说不是。

您应该看一下 Data Mapper 模式。它将让您使用对持久性一无所知的域对象，并且仍然能够持久化它们。

# python - django 表单为关键字参数获取了多个值

> ID：13544504
> 
> 赞同：36
> 
> 时间：2012-11-24T18:59:10.800
> 
> 标签：python, django, django-forms, django-views, django-urls

我有一个简单的模型如下：

```
RATING_CHOICES = zip(range(1, 6), range(1, 6))
class Rating(models.Model):

    value = models.IntegerField(choices=RATING_CHOICES)
    additional_note = models.TextField(null=True, blank=True)
    from_user = models.ForeignKey(User, related_name='from_user')
    to_user = models.ForeignKey(User, related_name='to_user')
    shared_object = models.ForeignKey(ObjectDetail, null=True, blank=True)
    dtobject = models.DateTimeField(auto_now_add=True) 
```

从上面的模型中，我生成了一个模型表单，在我的 forms.py 中如下：

```
class RatingForm(ModelForm):

     class Meta:
          model = Rating
          exclude = ('from_user', 'dtobject',
                     'shared_object') 
```

在我的网址中，我尝试以下操作：

```
url(r'^rate/(?P<form_type>[\w]+)/(?P<oid>\d+)/(?P<oslug>[\w-]+)/$', 'rating_form', name='rating_form'), 
```

在我看来，以下几点：

```
def rating_form(form_type = None, oid = None, oslug=None):

    print form_type
    form = RatingForm(data=request.POST or None)

    if request.POST and form.is_valid():
           form.save()
        return HttpResponseRedirect("/")
    else:
        return render(request, "share.html", {'form' : form }) 
```

这样做会给我以下错误：

**rating_form() 为关键字参数“form_type”获得了多个值**

额外细节：

```
Request Method: GET
Request URL:    http://127.0.0.1:8000/rate/lending/3/random-stuff/
Django Version: 1.4.1
Exception Type: TypeError
Exception Value:    
rating_form() got multiple values for keyword argument 'form_type'
Exception Location: /Library/Python/2.7/site-packages/django/contrib/auth/decorators.py in _wrapped_view, line 20
Python Executable:  /usr/bin/python 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-24T19:17:32.497

你的观点的第一个论点应该是`request`

# php - 向大型 mysql 查询添加过滤器

> ID：13544506
> 
> 赞同：0
> 
> 时间：2012-11-24T18:59:27.260
> 
> 标签：php, mysql

我有这个大查询，我只需要过滤掉`tbl_dealinterest.Active` =的任何结果`'n'`。有时该表中没有该产品的条目，有时可能存在条目并设置为 y。

这是一个丑陋的大查询：

```
SELECT tbl_product.id, tbl_productspecification.id AS specificationId,
                        tbl_product.ProductId, tbl_seller.CompanyName, tbl_product.ProductName, tbl_product.Description, mst_Categories.id AS 'Category',
                        tbl_productspecification.RetailPrice, tbl_productspecification.SalePrice,
                        tbl_product.image, tbl_productspecification.Discount, tbl_product.EndTime, tbl_product.Seller_Id, tbl_dealinterest.Active AS thumbsActive
                        FROM tbl_product
                        LEFT OUTER JOIN tbl_seller ON tbl_seller.SelId = tbl_product.Seller_Id
                        LEFT OUTER JOIN mst_Categories ON (mst_Categories.id = tbl_product.Category OR mst_Categories.id = tbl_product.SubCategory)
                        LEFT OUTER JOIN tbl_productspecification ON tbl_productspecification.ProductId = tbl_product.ProductId
                        LEFT OUTER JOIN mst_image ON mst_image.Product = tbl_product.ProductId
                        LEFT OUTER JOIN tbl_dealinterest ON tbl_dealinterest.ProductId = tbl_product.ProductId AND tbl_dealinterest.BuyerId = '$token' 
                        WHERE tbl_product.Active='y'
                        AND tbl_product.StartTime <= '".date("Y-m-d H:i:s")."'
                        AND tbl_product.EndTime > '".date("Y-m-d")." 06:00:00'
                        ".$subquery."
                        GROUP BY tbl_productspecification.ProductId"; 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:01:47.530

```
LEFT OUTER JOIN tbl_dealinterest ON (tbl_dealinterest.ProductId = tbl_product.ProductId 
    AND tbl_dealinterest.BuyerId = '$token' 
    AND tbl_dealinterest.Active<>'n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:17:49.330

```
SELECT ...
WHERE tbl_product.Active='y'
AND (tbl_dealinterest.Active <> 'n' OR tbl_dealinterest.Active IS NULL)
... 
```

# php - 类从另一个类创建对象，但开销较小

> ID：13544510
> 
> 赞同：1
> 
> 时间：2012-11-24T18:59:57.240
> 
> 标签：php, class, object

我想做的是编写一个“搜索”类，它可以搜索产品列表并将它们存储在一个数组中。

我已经有一个“产品”类，可用于获取特定产品的详细信息。

这是我的代码：

```
class Product {

    public $name;
    public $price;
    public $description;

    public function getProductById ($id) {

        $sql = 'SELECT name, price, description FROM product WHERE id = ' . $id;

        $row = /* MySQL functions here to execute SQL statement and get a matching row */

        $this->name = $row['name'];
        $this->price = $row['price'];
        $this->description = $row['description'];
        return TRUE;
    }
}

class Search {

    public $results;
    public $totalResults;

    function __construct() {
        $this->results = array ();
        $this->totalResults = 0;
    }

    public function doSearch ($name) {

        $sql = 'SELECT id FROM product WHERE name LIKE "%' . $name . '%"';

        $rows = /* MySQL functions here to execute SQL statement and get a list of matching product ID's */

        foreach ($rows as $row) {
            $product = new Product;
            $product->getProductById ($row['productid']);
            $this->results[] = $product;
        }
        return TRUE;
    }
}

$search = new Search;
$search->doSearch ('Fresh Flowers'); 
```

上面的问题是doSearch方法中每一条匹配的记录都会在getProductById方法中执行一次查询。如果有 100 个匹配的产品，将在 Product 类中执行 100 个单独的查询。

但是，如果我使用单个查询直接在 doSearch 方法中获取产品，那么这将完全绕过 Product 类。

当“产品”是一个对象时，编写一个可以返回“产品”对象列表的搜索类最合适的方法是什么，而不会产生我上面所做的开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:04:25.817

`Product`向将名称、价格和描述作为参数（或关联数组）的类添加一个构造函数，以使用必要的值填充对象，与数据库查询分离。

在`doSearch`中，您可以创建一个`SELECT`，它不仅从 products 表中获取 ID，还获取所有相关字段，并立即使用`new Product($name, $price, $description)`or创建填充的产品对象`new Product($row)`，而无需调用`getProductById`每个产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:54:46.733

您的 Product 类不应该对数据库一无所知。它应该包含代表产品的值，仅此而已。从这个类中提取所有处理数据库的东西。

搜索产品是访问产品列表的一种方式。你的下一节课应该是产品列表。只有在访问单个产品时，您才不必处理列表，但这可能比您想象的要少。

好的，您已经有了产品和产品列表，您现在可以向前迈出一步并添加数据库访问权限。你需要一个类来处理给你一个产品（当通过 id 搜索时）和产品列表（当通过一些文本或其他东西搜索时）。只有这个类允许您处理访问数据库所需的查询。每个查询的结果集可以直接在“产品列表”类中使用，可能通过继承通用“产品列表”类中定义的所有内容并添加处理数据库结果。

所以最终你会得到：

`Product -> ListOfProducts -> ProductDatabase -> DatabaseAccessLayer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:02:09.467

`Product`创建一个使用数据库中的数据填充实例的类。

然后，该类可以`Product`根据获取的数据量创建该类的一个或多个实例。

结论：`getProductById`从您的`Product`课程中提取并将其放在其他地方。这是一种仅填充*一个*实例的专用方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T19:19:23.277

首先抓住你想要的东西。

```
public function doSearch ($name) {

        $sql = 'SELECT id, name, price, description FROM product 
           WHERE name LIKE "%' . $name . '%"';

// now just return the array    

} 
```

或者使用 PDO 将结果集作为对象返回。

```
$result->setFetchMode(PDO::FETCH_INTO, new animals); 
```

正如这里所讨论的：[如何在 PDO 中简单地返回对象？](https://stackoverflow.com/questions/747847/how-can-i-simply-return-objects-in-pdo)

# c++ - GCC 编译 C/C++ 的最强化的一组选项是什么？

> ID：13544512
> 
> 赞同：10
> 
> 时间：2012-11-24T19:00:05.437
> 
> 标签：c++, security, gcc, buffer-overflow, dangling-pointer

哪组 GCC 选项可针对内存损坏漏洞（如缓冲区溢出和悬空指针）提供最佳保护？GCC 是否提供任何类型的 ROP 链缓解？是否存在性能问题或其他问题会阻止此 GCC 选项用于生产中的关键任务应用程序？

我正在查看[Debian Hardening Guide](http://wiki.debian.org/Hardening)和[GCC Mudflap](http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging)。以下是我正在考虑的配置：

```
-D_FORTIFY_SOURCE=2
-fstack-protector --param ssp-buffer-size=4
-fPIE -pie
-Wl,-z,relro,-z,now (ld -z relro and ld -z now) 
```

可以对这组选项进行任何改进吗？假设是最新版本的 GCC，如果您知道即将推出的任何酷炫功能，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:05:59.863

不是 GCC 选项，但与 GCC 兼容。请参阅我们的[CheckPointer](http://www.semdesigns.com/Products/MemorySafety)工具，该工具可检测大多数内存管理错误。

执行速度明显放缓；该工具必须跟踪指针和分配存储的有效性，这会增加开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-16T06:59:08.207

请参阅**[GCC 编译 C/C++ 的最强化选项集是什么](https://security.stackexchange.com/questions/24444/what-is-the-most-hardened-set-of-options-for-gcc-compiling-c-c)。**

因此，下面提供了合理的选择。

警告：

```
-Wall -Wextra -Wformat-security -Werror 
```

硬化：

```
-mmitigate-rop -Wstack-protector -fstack-protector-strong -fstack-clash-protection -pie -fPIE -D_FORTIFY_SOURCE=2 -Wl,-z,rel -Wl,dynamicbase -Wl,nxcompat 
```

适合打补丁：

```
-fvtable-verify=std 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-09T15:24:20.610

这不是一个`CFLAGS`或`LDFLAGS`答案，所以可能不是您要特别寻找的，但您还应该查看为强化目的而编写的 gcc 插件。这些用于强化内核构建并捕获大量错误代码。您可能需要一个 gcc 插件包来安装您的发行版，`apt-cache search gcc | grep plugin`或者等效于查找包名称。如果您愿意考虑使用他们的 clang 编译器，我相信 llvm 编译器套件具有类似的插件（它主要与 gcc 兼容）

# php - Ajax 得到响应 undefined 和 Uncaught ReferenceError

> ID：13544513
> 
> 赞同：1
> 
> 时间：2012-11-24T19:00:13.393
> 
> 标签：php, jquery

代码：

```
query = "http://localhost:8080/working_login.php?name=" + name + "&password=" + pass;
console.log(query);

   $.ajax({
    type: "GET",
    url: query,
 dataType: "script",
 success: function(data){
            console.log(data);
            console.log("success");
        },
error:function (msg) {
            console.log("error on page");
        }           
    }); 
```

我的数据未定义，当我从 php 中的服务器端返回“valid_user”时，出现错误。

```
Uncaught ReferenceError: valid_user is not defined
 (anonymous function) 
```

php服务器端代码：

```
$sql = "SELECT id FROM users WHERE name ='$name' AND password = '$password';"; 
$result = mysql_query($sql) or die('Can not Register user' . $sql );
$rows = mysql_num_rows($result);
if($rows > 0)
{ 
echo("valid_user");
exit();
}
else
{exit("not valid user");} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:09:28.087

在 jquery ajax reqeust 中使用脚本 dataType 时，返回的结果被解释为 javascript 代码，但您返回纯文本

只需更改`dataType: "script"`为`dataType: "text"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:10:35.963

你可能不是有意告诉 jQuery 你期待一个脚本作为回报。返回的不是格式正确的脚本，因此当浏览器解析为脚本时会出现错误。

您可以执行以下操作：

```
$.get("http://localhost:8080/working_login.php?name=" + name + "&password=" + pass, function(data) {
    if(data == 'success')
    {
        alert("Success");
    }
    else
    {
        alert("Failed");
    }
}); 
```

# scala - 具有最大元素的序列

> ID：13544514
> 
> 赞同：2
> 
> 时间：2012-11-24T19:00:13.887
> 
> 标签：scala, mapping

我有一个 Seq 和函数 Int => Int。我需要实现的是从原始 Seq 中只取那些等于结果序列最大值的元素（那个，我将在应用给定函数后得到）：

```
def mapper:Int=>Int= x=>x*x
val s= Seq( -2,-2,2,2 )
val themax= s.map(mapper).max
s.filter( mapper(_)==themax) 
```

但这似乎很浪费，因为它必须映射两次（一次用于过滤器，另一次用于最大值）。有一个更好的方法吗？（希望不使用循环）

**编辑** 代码已被编辑；在最初，这是过滤器行：`s.filter( mapper(_)==s.map(mapper).max)`. 正如[om-nom-nom](https://chat.stackoverflow.com/users/298389)所指出的，这会评估 `s.map(mapper).max 每次（过滤器）迭代，从而导致二次复杂度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:15:47.673

这是一个只进行一次映射并使用“foldLeft”函数的解决方案：

原则是遍历 seq，并且对于每个映射元素，如果它大于之前映射的所有元素，则使用它开始一个新序列，否则，如果它相等，则返回所有最大值的列表和新映射的最大值。最后，如果小于则返回先前计算的最大值 Seq。

```
def getMaxElems1(s:Seq[Int])(mapper:Int=>Int):Seq[Int] = s.foldLeft(Seq[(Int,Int)]())((res, elem) => {
  val e2 = mapper(elem)
  if(res.isEmpty || e2>res.head._2) 
    Seq((elem,e2)) 
  else if (e2==res.head._2) 
    res++Seq((elem,e2)) 
  else res 
}).map(_._1) // keep only original elements

// test with your list
scala> getMaxElems1(s)(mapper)
res14: Seq[Int] = List(-2, -2, 2, 2)

//test with a list containing also non maximal elements
scala> getMaxElems1(Seq(-1, 2,0, -2, 1,-2))(mapper)
res15: Seq[Int] = List(2, -2, -2) 
```

**备注：**关于复杂度

我上面介绍的算法对于具有 N 个元素的列表具有 O(N) 的复杂度。然而：

*   映射所有元素的操作复杂度为 O(N)
*   计算最大值的操作复杂度为 O(N)
*   压缩操作的复杂度为 O(N)
*   根据最大值过滤列表的操作也是复杂度O(N)
*   映射所有元素的操作复杂度为 O(M)，其中 M 是最终元素的数量

因此，最后您在问题中提出的算法与我的答案具有相同的复杂性（质量），而且您提出的解决方案比我的更清楚。因此，即使“foldLeft”功能更强大，对于此操作，我也会推荐您的想法，但压缩原始列表并仅计算一次地图（特别是如果您的地图比简单的正方形更复杂）。这是在问题/聊天/评论中借助 *scala_newbie* 计算的解决方案。

```
def getMaxElems2(s:Seq[Int])(mapper:Int=>Int):Seq[Int] = {
  val mappedS = s.map(mapper) //map done only once 
  val m = mappedS.max         // find the max
  s.zip(mappedS).filter(_._2==themax).unzip._1
}

// test with your list
scala> getMaxElems2(s)(mapper)
res16: Seq[Int] = List(-2, -2, 2, 2)

//test with a list containing also non maximal elements
scala> getMaxElems2(Seq(-1, 2,0, -2, 1,-2))(mapper)
res17: Seq[Int] = List(2, -2, -2) 
```

# c - 有符号类型的按位移位运算符

> ID：13544519
> 
> 赞同：7
> 
> 时间：2012-11-24T19:01:04.827
> 
> 标签：c, bit-manipulation, bitwise-operators, iso, bit-shift

我试图了解按位运算符对有符号和无符号类型的行为。根据 ISO/IEC 文件，以下是我的理解。

### 左移运算符

*   的结果`E1 << E2`是 E1 左移 E2 位位置

*   由于左移而空出的位将用零填充。

*   **E1 有符号非负：** `E1 << E2`如果该值可以由结果类型表示，则将得出 E1 乘以 E2 的 2 次方。

*   **Q1：签名底片呢？**

*   **Q2：我无法理解以下上下文中“减少模数”的含义。“如果 E1 具有无符号类型，则结果的值为 E1 × 2E2 ，比结果类型中可表示的最大值多模一减少”**。

### 右移运算符

*   结果`E1 >> E2`是 E1 右移 E2 位位置。

*   **E1 as signed non-negative/unsigned** : 结果的值是 E1 / 2E2 商的整数部分

*   **Q3：我看到的有符号负整数，有些书定义空位将被填充。请`1`详细说明在有符号负整数上使用右移运算符。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T19:11:08.513

Q1：左移运算符对有符号整数类型的负值的行为未定义，当结果`E1 * 2^E2`在类型中不可表示时，有符号整数类型的正值的行为也是如此。

这在标准（n1570 草案）的第 6.5.7 节第 4 和第 5 段中明确提到：

> 4 的结果`E1 << E2`是`E1`左移的`E2`位位置；空出的位用零填充。如果`E1`具有无符号类型，则结果的值为 ，以`E1 × 2^E2`比结果类型中可表示的最大值大一为模减少。如果`E1`具有带符号类型和非负值，**并且`E1 × 2^E2`可以在结果类型中表示，那么这就是结果值；否则，行为未定义。**

Q2：比无符号整数类型中可表示的最大值多一模的归约意味着在左侧移出的位被简单地丢弃。

在数学上，如果无符号类型的最大值是`2^n - 1`（并且它始终是这种形式），则`E1`左移一位的结果是从 0 到差的范围内`E2`的值`V``2^n - 1`

```
(E1 * 2^E2 - V) 
```

能被 整除`2^n`，也就是说，它是除以 时得到的余`E1 * 2^E2`数`2^n`。

Q3：右移有符号整数类型的负值的行为是实现定义的。最常见的行为（至少在二进制补码机器上）是算术移位，也就是说，结果是四舍五入的商（向负无穷大）。

> 5 结果`E1 >> E2`是`E1`右移的`E2`位位置。如果`E1`有无符号类型或`E1`有符号类型和非负值，则结果的值是 的商的整数部分`E1 / 2^E2`。**如果`E1`具有带符号类型和负值，则结果值是实现定义的。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T19:10:37.000

*   回复：Q1
    如果 E1 为负数，则行为未定义。

*   回复：Q2无符号算术是“循环的”，也就是说，它再次
    环绕。就好像每个计算都是以 UINT_MAX+1 为模完成的。另一种思考方式是简单地丢弃不适合左侧的多余位。`UINT_MAX + 1``0`

*   回复：Q3
    如果 E1 为负，则结果是实现定义的。也就是说，它取决于您的机器/编译器/选项，但必须在某处记录（“定义”）行为，通常是编译器手册。两种流行的选择是用 1（算术移位）或 0（逻辑移位）填充左侧的输入位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T19:28:44.767

如果您真的想了解按位移位运算符。看看这些简单的规则：

1）左移时，E1 << E2，右边所有的空位都用零填充，不管数字是有符号还是无符号，总是会移入零。

2) 在左移时，E1 >> E2，左侧所有的空位，如果数字为正数将为 0，如果数字为负数则为 1。请记住，无符号数永远不会是负数。即使数字是负数，某些实现也可能在某些机器上用 0 填充它们，所以永远不要依赖它。

所有其他情况都可以用这两个简单的规则来解释。现在如果你想知道移位后结果的值，只需在纸上手动写数字和移位的位表示，并使用这两个规则在空白处输入位。然后您将能够更好地理解位移是如何工作的。

```
For example lets take int i = 7;
i<<2
now i = 0000 0000 0000 0000 0000 0000 0000 0111
perform two left shits according to rule 1 would be:

0000 0000 0000 0000 0000 0000 0001 1100 
```

这将使其值为 28 ( E1 * 2E2 = 7 *2*2 = 28)，这与位模式表示的相同。

现在让我解释一下“减少模”的事情，如果你移动一个大数字，那么左边的位会丢失，“减少模”会补偿它，所以如果你的结果值大于最大值数据类型可以保持，左边的位将丢失，然后：结果 = (E1*2*E2) % (maximumValue + 1)。

对于其他各种情况，请牢记上述规则，你很好:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T19:10:48.007

Q2：“value reduce modulo X”在数学中的意思是“value mod X”，在C中可以写成“value % X”。这部分只是解释了整数溢出是如何工作的。

# java - 将形状连接在一起并追踪它们的轮廓

> ID：13544520
> 
> 赞同：-3
> 
> 时间：2012-11-24T19:01:19.370
> 
> 标签：java, android

编辑：找到解决方案。我在问题之后添加了它。

我正在为 Android 设计一款游戏，并试图想出一些方法来减少渲染阶段的计算。目前我有一个方法，它获取关卡中的所有金属和橡胶块并将纹理 id 存储到 int[][] 网格中，以便渲染器只读取它而不是计算每个块的平铺纹理每一帧。

这工作正常，但现在我正在尝试为关卡边缘和关卡中的激光块创建一个角和直片列表。使用一组直线激光纹理和角纹理绘制关卡边界和激光块。我不确定如何最好地解决在块与其他块和水平边缘重叠的地方不渲染激光的问题。下面的图片显示了我的意思：

[绘画](https://dl.dropbox.com/u/48542022/DRAWING.jpg)

[在游戏中](https://dl.dropbox.com/u/48542022/INGAME.jpg)

在这里您可以看到水平边缘（L 形激光路径延伸到图片边缘之外）和三个/两个内部激光块（分别按图片顺序）。据我所知，我应该创建一个与上面类似的网格，但使用布尔值，因此任何在触摸时杀死玩家的方块（以红色突出显示）都是真的，而安全方块是假的。

然后我首先想到遍历网格中的所有真实（红色）单元格，并使用它们相邻的网格单元格计算出激光轮廓的外观，但我意识到这可能非常困难，所以我现在确定我使用了错误的方格找出来。我确信我可以通过从关卡边界的左下角开始并遍历网格直到找到错误的瓷砖（除非第一个正方形是错误的）然后通过网格向右移动直到我到达右边的一个真正的单元格，所以我会向左转并继续向上穿过网格，直到在上面找到一个 true 向左转，或者在右边找到一个 false 向右转。我会重复这个过程，直到我到达我的起始假细胞。

我在写这个问题的时候想出了这个，哈哈。这似乎是最简单的方法，所以我想我的问题是这是一种很好的方法，我将如何计算出相互接触但不接触水平边界的激光块，因为上述方法只会追踪最外面的激光小路。

感谢您花时间阅读本文。我希望我已经解释得足够好，我期待任何关于这个主题的启示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:15:42.880

解决方案：

```
 public static boolean[][] laserField = new boolean[(int) Static.WORLD_SIZE][(int)Static.WORLD_SIZE];
    public static List<LaserData> laserData = new ArrayList<LaserData>();
    public static void calcLaserBoundryAreas() {
        laserField = new boolean[(int) Level.levelBounds.bounds.width+5][(int) Level.levelBounds.bounds.height+5];
        for (int i=0;i<laserField.length;i++) {
            for (int j=0;j<laserField[i].length;j++) {
                if(i==0 || i==laserField.length-1 || j==0 || j==laserField[i].length-1)
                    laserField[i][j] = true;
                else
                    laserField[i][j] = false;
            }
        }
        for (LaserBlock lBlock : lBlocks) {
            int cols = (int)lBlock.bounds.width;
            int rows = (int)lBlock.bounds.height;
            float startX = lBlock.position.x - (cols-1f)/2f;
            float startY = lBlock.position.y - (rows-1f)/2f;
            for (int i=0;i<cols;i++) {
                for (int j=0;j<rows;j++) {
                    addLaserCell(startX+i, startY+j);
                }
            }
        }
        addLaserData();
    }

private static void addLaserCell(float x, float y) {
    int cellX = (int)(x- Level.levelBounds.bounds.lowerLeft.x+2);
    int cellY = (int)(y- Level.levelBounds.bounds.lowerLeft.y+2);
    if (cellX < 0 || cellX > laserField.length-1)           return;
    if (cellY < 0 || cellY > laserField[cellX].length-1)    return;
    laserField[cellX][cellY] = true;
}

private static void addLaserData() {
    laserData = new ArrayList<LaserData>();
    for (int i=1;i<laserField.length-1;i++) {
        for (int j=1;j<laserField[i].length-1;j++) {
            if (!laserField[i][j]) {
                checkNeighbours(i,j);
            }   
        }
    }
    optimiseLaserData();
}

private static void checkNeighbours(int x, int y) {
    boolean u = laserField[x][y+1];
    boolean ul = laserField[x-1][y+1];
    boolean l = laserField[x-1][y];
    boolean bl = laserField[x-1][y-1];
    boolean b = laserField[x][y-1];
    boolean br = laserField[x+1][y-1];
    boolean r = laserField[x+1][y];
    boolean ur = laserField[x+1][y+1];

    /*
     *  TOP LEFT CORNER 
     */
    float posX, posY;
    posX = Level.levelBounds.bounds.lowerLeft.x+x-2.5f;
    posY = Level.levelBounds.bounds.lowerLeft.y+y-1.5f;
    if(u && ul && l)
        laserData.add(new LaserData(posX, posY, true, 0, 0));
    else if(!u && ul && l)
        laserData.add(new LaserData(posX, posY, false, 1, 0));
    else if(!u && ul && !l)
        laserData.add(new LaserData(posX, posY, true, 0, 2));

    /*
     *  BOTTOM LEFT CORNER 
     */
    posX = Level.levelBounds.bounds.lowerLeft.x+x-2.5f;
    posY = Level.levelBounds.bounds.lowerLeft.y+y-2.5f;
    if(l && bl && b)
        laserData.add(new LaserData(posX, posY, true, 0, 1));
    else if(!l && bl && b)
        laserData.add(new LaserData(posX, posY, false, 1, 1));
    else if(!l && bl && !b)
        laserData.add(new LaserData(posX, posY, true, 0, 3));

    /*
     *  BOTTOM RIGHT CORNER 
     */
    posX = Level.levelBounds.bounds.lowerLeft.x+x-1.5f;
    posY = Level.levelBounds.bounds.lowerLeft.y+y-2.5f;
    if(b && br && r)
        laserData.add(new LaserData(posX, posY, true, 0, 2));
    else if(!b && br && r)
        laserData.add(new LaserData(posX, posY, false, 1, 2));
    else if(!b && br && !r)
        laserData.add(new LaserData(posX, posY, true, 0, 0));

    /*
     *  TOP RIGHT CORNER 
     */
    posX = Level.levelBounds.bounds.lowerLeft.x+x-1.5f;
    posY = Level.levelBounds.bounds.lowerLeft.y+y-1.5f;
    if(r && ur && u)
        laserData.add(new LaserData(posX, posY, true, 0, 3));
    else if(!r && ur && u)
        laserData.add(new LaserData(posX, posY, false, 1, 3));
    else if(!r && ur && !u)
        laserData.add(new LaserData(posX, posY, true, 0, 1));

}

private static void optimiseLaserData() {
    List<LaserData> optiLaserData = new ArrayList<LaserData>();
    for(LaserData ld : laserData) {
        if(ld.cornerPiece)
            optiLaserData.add(ld);
        else if(ld.dir == 0 || ld.dir == 2){
            float x = ld.x;
            float bottomY = ld.y;
            float topY = ld.y;
            float count = 1;
            while (searchStraightLaserData(laserData, x, topY+1, ld.dir)) {
                count++;
                topY++;
            }
            while (searchStraightLaserData(laserData, x, bottomY-1, ld.dir)) {
                count++;
                bottomY--;
            }
            float centerY = bottomY + (topY-bottomY)/2;
            if(!searchStraightLaserData(optiLaserData, x, centerY, ld.dir))
                optiLaserData.add(new LaserData(x, centerY, false, count, ld.dir));
        } else {
            float y = ld.y;
            float leftX = ld.x;
            float rightX = ld.x;
            float count = 1;
            while (searchStraightLaserData(laserData, rightX+1, y, ld.dir)) {
                count++;
                rightX++;
            }
            while (searchStraightLaserData(laserData, leftX-1, y, ld.dir)) {
                count++;
                leftX--;
            }
            float centerX = leftX + (rightX-leftX)/2;
            if(!searchStraightLaserData(optiLaserData, centerX, y, ld.dir))
                optiLaserData.add(new LaserData(centerX, y, false, count, ld.dir));
        }
    }
    laserData = optiLaserData;
}

private static boolean searchStraightLaserData(List<LaserData> data, float x, float y, int dir) {
    for(LaserData ld : data)
        if(ld.x == x && ld.y == y && ld.dir == dir && !ld.cornerPiece)
            return true;
    return false;
} 
```

这些方法首先创建一个布尔网格，该网格是水平边缘边界的大小，每边有一个 1 平方的额外边缘。这被初始化为 false 以表示安全区域，并且额外的边缘设置为 true 以便我们有一种空心盒子。额外的边缘通过消除在laserField上检查不正确索引的需要来帮助以后。

在将关卡范围映射到网格后，单个单元格会在被激光块覆盖的地方更改为真。

一旦布尔网格被完全映射，它就会遍历每个网格单元，当它找到一个错误的单元时，它将网格坐标传递给下一个方法，该方法查看 12 个不同的相邻模式以确定是否应该在该单元周围渲染任何激光. LaserData 构造函数采用以下参数（float x、float y、booleancornerPiece、float length、int 方向）

最后一部分进行了蛮力搜索，以检查是否任何相邻的直线段可以被单个较长的直线段替换，以节省渲染额外的精灵。

然后渲染器可以只读取每帧的laserData列表，它拥有渲染正确纹理、位置、长度等所需的所有信息……

注意：关卡边界的宽度和高度比实际游戏区域小 3 个单位，以考虑玩家在边界外的宽度。这就是 levelBounds.lowerleft+5、+2 和 +1.5f 等...的来源。我知道这有点 hacky，但它是旧代码，我不敢碰它 xD

# javascript - 可调整大小的jQuery插件缩放问题

> ID：13544526
> 
> 赞同：3
> 
> 时间：2012-11-24T19:01:48.877
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在创建一个表单所见即所得的构建器，但我在使用可调整大小的 jquery 插件时遇到了问题。似乎当我调整页面上任何项目的大小时，缩放会失控。我在这里找到了可拖动的解决方法：[Jquery draggable with zoom problem](http://stackoverflow.com/questions/2930092/jquery-draggable-with-zoom-problem)

但我找不到可调整大小的相同解决方法。场景是当我创建一个可调整大小和可拖动的项目时，我放大或缩小该项目似乎漂移到其包含的父项之外。您可以在这里看到： [http](http://drniermanoptometry.cu.cc/Main/Forms_Module/editForm.php/?name=horizontal-clickersearch.html) ://drniermanoptometry.cu.cc/Main/Forms_Module/editForm.php/?name=horizo​​ntal-clickersearch.html 注意：单击分配“否”按钮以创建可调整大小的可拖动项目。然后使用 control++ 缩小

我已将遏制设置为父级并将css位置设置为相对无济于事。

可调整大小还有一些其他问题。当我调整项目大小时，它不允许我将项目一直拖到右侧，并且可拖动在 FF 中不起作用。可能有关系？ **更新：** 我发现边距设置为自动存在问题，因此我修复了可调整大小容器的左侧以避免该问题。但我仍然想知道是否有自动保证金的解决方法。这家伙有同样的问题...... [http://www.webdeveloper.com/forum/showthread.php?236987-jQuery-resizable-with-margin-0-auto](http://www.webdeveloper.com/forum/showthread.php?236987-jQuery-resizable-with-margin-0-auto)

下面的代码：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
<script language="javascript" type="text/javascript">

    $(document).ready(function(){
        $('.create').click(function(){
                var jquerybox = $('<div/>' , {class: 'blocked form-item' , width: '100px', height: '20px' , background: 'red'} );
                var zoom = $('#form-preview').css('zoom');
                var canvasHeight = $('#form-preview').height();
                var canvasWidth = $('#form-preview').width();
                jquerybox.resizable({
                    containment: 'parent'
                });

                jquerybox.draggable({
                    containment: 'parent',
                    drag: function(evt,ui)
                    {
                        // zoom fix
                        ui.position.top = Math.round(ui.position.top / zoom);
                        ui.position.left = Math.round(ui.position.left / zoom);

                        // don't let draggable to get outside of the canvas
                        if (ui.position.left < 0) 
                            ui.position.left = 0;
                        if (ui.position.left + $(this).width() > canvasWidth)
                            ui.position.left = canvasWidth - $(this).width();  
                        if (ui.position.top < 0)
                            ui.position.top = 0;
                        if (ui.position.top + $(this).height() > canvasHeight)
                            ui.position.top = canvasHeight - $(this).height();  

                    }                 
                });
                $('#form-preview').append(jquerybox);
        }); 
    });
    function updateItem(Item){
        //ajax call to update script
        }
</script>

<style>
.blocked{
    display:block;
    background: red;}
#form-preview{
    height: 550px;
    width: 600px;
    border: 2px solid black;
    margin-left: auto;
    margin-right: auto;
    }
.centered{
    margin-right: auto;
    margin-left: auto;
    }
</style>

</head>
<body>
<div id = "editbar">
<form action="Idkyet" method = "POST">
<table>
<tr>
    <th>Type</th>
    <th>Allocated</th>
</tr>
<?

    error_reporting(E_ALL);
    ini_set('display_errors', '1');
    if(isset($_GET['name'])){
        require_once '../../db_connect.php';
        $sqlpre = 'SELECT id FROM forms WHERE name = "' . $_GET['name'] . '";';
        $res = $mysqli->query($sqlpre);
        $rds = $res->fetch_array();
        $id = $rds['id'];
        $res->free();

        $sql = 'SELECT * FROM form_fields WHERE form_id = ' . $id ;
        $res = $mysqli->query($sql);
        if($res){
            while($rds = $res->fetch_assoc()){
                echo '<tr>';
                echo '<td><input value = " ' .  $rds['type'] . ' "type="textarea"></td>';
                echo '<td><input class = "create centered" type="button" value = ' . (($rds['allocated'] == 1) ? 'Yes' : 'NO') . '></td>';
                echo '</tr>';
            }
        }
    }
?>
</table>
</form>
<div id = "form-preview">
    <div class = "blocked"height = "20px"></div>
</div>
</div>
</body>
</html> 
```

# mac-app-store - 在 Mac App Store 中更改语言

> ID：13544530
> 
> 赞同：1
> 
> 时间：2012-11-24T19:02:15.003
> 
> 标签：mac-app-store

我的 Mac 应用程序只有中文本地化（由于其特殊用途）。目前“语言：英语”显示在其 Mac App Store 页面的信息栏中（见下面的截图）。如何将此语言更改为中文（或其他一些语言）？

![在此处输入图像描述](../Images/9bcd2413cdf73c2e8e3b440bda62f961.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:19:58.267

打开 App Store，然后向下滚动。在右下角，单击一个标志 - 您会在那里找到国家/语言选项！:)

# sql-server-2008-r2 - SQL Server 是否优化此示例查询中的重复聚合计算？

> ID：13544534
> 
> 赞同：1
> 
> 时间：2012-11-24T19:03:19.670
> 
> 标签：sql-server-2008-r2, query-optimization

如果我在 SQL Server 2008 R2 中执行以下查询，`count(*)`是否只会为 OUTER SELECT 查询确定一次聚合，还是会为 OUTER SELECT 中的每条记录重复一次？

我猜测 SQL Server 会很聪明地看到正在重复相同的计算，因此它只会为了优化目的进行一次计算。`TotalCount`对于外部查询中的所有行，下面查询中的值将是相同的。

```
SELECT 
    p.ProductId, p.ProductName,
    (select count(*) from Products p1) as TotalCount 
FROM Products p 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:15:05.597

不，您对 SQL Server 的期望过高。另外：查询处理器真的不能确定这个值不会随着时间的推移而改变——所以它不能真正为你“优化”这个。

对于每一行，此子查询将执行一次。

因此，如果您的`SELECT`语句将返回 1000 万行，则此计数将确定 1000 万次。

如果您不希望这样，您始终可以`select count(*)..`在查询之前运行一次并将值存储到 SQL 变量中，然后在查询中选择该变量：

```
DECLARE @TableCount INT

SELECT @TableCount = COUNT(*) FROM Products

SELECT 
    p.ProductId, p.ProductName, @TableCount
FROM 
    Products p 
```

# android - 是否可以在相机背景前创建移动对象？

> ID：13544541
> 
> 赞同：1
> 
> 时间：2012-11-24T19:04:03.477
> 
> 标签：android, drawable, android-camera

我想做的只是一个简单的应用程序，其中会有一些以相机为背景移动的可绘制图像。起初我以为我可以使用带有 2 个表面视图的框架布局，但在尝试搜索后我发现它没用。所以我想将相机视图与移动的drawable结合起来，但我找不到如何结合，我不知道它是否可能。所以我只想知道有没有办法做到这一点？

# mysql - PHP、mysql 和并发更新

> ID：13544542
> 
> 赞同：0
> 
> 时间：2012-11-24T19:04:11.573
> 
> 标签：mysql, concurrency, innodb

您好，我有一个浏览器游戏，其中各种玩家安排的动作可以持续一到两个小时。cronjob 每分钟检查所有已完成的操作（endtime <= unixtime() ）并完成它们（向相关玩家提供奖励等）；

最近发生了 - 比如说 - 100 个动作要完成，而 cronjob 任务 1 没有在一分钟内完成，所以 cronjob 任务 2 被触发，结果是所有动作都完成了两次。

我怎样才能避免这种情况再次发生？我必须为会话使用特定的事务隔离代码并保留要更新的行吗？

PHP 5.3.18 mysql 是 5.5.27 表引擎是 INNODB

当前每分钟调用一次的代码是这样的：

```
public function complete_expired_actions ( $charflag = false )
{       
    // Verifying if there are actions to complete...

    $db = Database::instance();
    $db -> query("set autocommit = 0");
    $db -> query("begin");

    $sql = "select * from 
        character_actions
        where status = 'running' 
        and endtime <= unix_timestamp()"; 

    $result = $db -> query ( $sql ) ;               

    // try-catch. Se si verifica un errore, l' azione che commette l' errore viene rollbackata

    foreach ( $result as $row )
    {
        try 
        {

            $o = $this->factory( $row -> action );
            $o -> complete_action ( $row );

            if ($row -> cycle_flag == FALSE)
            { 
                // non aperta ad attacchi SQl-injection perchè i parametri non sono passati via request
            if ( $charflag == true )
                    kohana::log( 'info', "-> Completing action: " . $row -> id . ' - ' . $row -> action . " for char: " . $row->character_id );

                $db->query( "update character_actions set status = 'completed' where id = " . $row->id ); 
                // in ogni caso invalida la sessione!
                Cache_Model::invalidate( $row -> character_id );                                                                    
            }

            $db->query('commit');

            } catch (Kohana_Database_Exception $e)
            {
                kohana::log('error', kohana::debug( $e->getMessage() ));
                kohana::log('error', 'An error occurred, rollbacking action:' .  $row->action . '-' . $row->character_id );
                $db->query("rollback");         
            }   

    }       

    $db->query("set autocommit = 1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:11:48.670

在这种情况下，我使用一个新列，例如：标记到表 character_actions

然后在工作开始时我调用这个查询：

```
$uniqueid = time();
$sql="update character_actions set mark = '$uniqueid' where status = 'running' and endtime <= unix_timestamp() AND mark is NULL "; 
```

那么你的代码可以是

```
$sql = "select * from 
        character_actions
        where status = 'running' 
        and mark = '$uniqueid'"; 

    $result = $db -> query ( $sql ) ; 
```

这种方法有一个限制，它会启动不同的并行工作，这会降低机器的速度，从而导致更多的延迟和更多的并行工作......

可以通过引入限制来解决：

```
$lim= 100 ; // tune to finish the job in 60 seconds
$sql="update character_actions set mark = '$uniqueid' where status = 'running' and endtime <= unix_timestamp() AND mark is NULL limit $lim  "; 
```

当然会导致积分归属延迟。

# javascript - 如何遍历 json 对象？

> ID：13544551
> 
> 赞同：4
> 
> 时间：2012-11-24T19:05:14.590
> 
> 标签：javascript, jquery

> **可能重复：**
> [我有一个嵌套数据结构/JSON，如何访问特定值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-access-a-specific-value)

我想遍历一个二维的 json 对象......对于一个一维的 json 对象，我这样做

```
for (key in data) {
alert(data[key]);
} 
```

我该怎么做一个二维的？？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T19:17:43.090

Javascript 中没有二维数据，所以您拥有的是嵌套对象，或锯齿状数组（数组数组），或组合（具有数组属性的对象，或对象数组）。只需遍历子项目：

```
for (var key in data) {
  var item = data[key];
  for (var key2 in item) {
    alert(item[key2]);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T19:16:53.083

也许你想要

```
for(var i in data){
  for(var j in data[i]){
    alert(data[i][j]);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:16:42.940

尝试：

```
for (var key in data) {
   for (var key2 in data[key]){
      alert(data[key][key2]);
   }
} 
```

# mongodb - 我可以启动 MongoDB shell，但不能启动 Mongo Daemon

> ID：13544554
> 
> 赞同：2
> 
> 时间：2012-11-24T19:05:48.460
> 
> 标签：mongodb

我是 MongoDB 新手，我正在尝试运行`mongod`. 如果我输入`mongo`，我可以运行 shell（然后我用 ^C 很好地退出），但是当我尝试输入 时`mongod`，我得到了这个：

```
mongod --help for help and startup options
Sat Nov 24 13:42:34 [initandlisten] MongoDB starting : pid=99910 port=27017 dbpath=/data/db/ 64-bit host=Macbook-err.local
Sat Nov 24 13:42:34 [initandlisten] 
Sat Nov 24 13:42:34 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Sat Nov 24 13:42:34 [initandlisten] db version v2.2.1, pdfile version 4.5
Sat Nov 24 13:42:34 [initandlisten] git version: nogitversion
Sat Nov 24 13:42:34 [initandlisten] build info: Darwin 172-26-13-128.dynapool.nyu.edu 12.2.0 Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 BOOST_LIB_VERSION=1_49
Sat Nov 24 13:42:34 [initandlisten] options: {}
Sat Nov 24 13:42:34 [initandlisten] journal dir=/data/db/journal
Sat Nov 24 13:42:34 [initandlisten] recover : no journal files present, no recovery needed
Sat Nov 24 13:42:34 [websvr] ERROR: listen(): bind() failed errno:48 Address already in use for socket: 0.0.0.0:28017
Sat Nov 24 13:42:34 [websvr] ERROR:   addr already in use
Sat Nov 24 13:42:34 [initandlisten] ERROR: listen(): bind() failed errno:48 Address already in use for socket: 0.0.0.0:27017
Sat Nov 24 13:42:34 [initandlisten] ERROR:   addr already in use
Sat Nov 24 13:42:34 [initandlisten] now exiting
Sat Nov 24 13:42:34 dbexit: 
Sat Nov 24 13:42:34 [initandlisten] shutdown: going to close listening sockets...
Sat Nov 24 13:42:34 [initandlisten] shutdown: going to flush diaglog...
Sat Nov 24 13:42:34 [initandlisten] shutdown: going to close sockets...
Sat Nov 24 13:42:34 [initandlisten] shutdown: waiting for fs preallocator...
Sat Nov 24 13:42:34 [initandlisten] shutdown: lock for final commit...
Sat Nov 24 13:42:34 [initandlisten] shutdown: final commit...
Sat Nov 24 13:42:34 [initandlisten] shutdown: closing all files...
Sat Nov 24 13:42:34 [initandlisten] closeAllFiles() finished
Sat Nov 24 13:42:34 [initandlisten] journalCleanup...
Sat Nov 24 13:42:34 [initandlisten] removeJournalFiles
Sat Nov 24 13:42:34 [initandlisten] shutdown: removing fs lock...
Sat Nov 24 13:42:34 dbexit: really exiting now 
```

这似乎是这里的一个常见问题，我尝试过：
删除 mongod.lock 文件`rm /data/db/mongod.lock`
修复：`mongod --repair`
杀死进程： 我尝试更改权限：`killall -15 mongod`和`killall -9 mongod`
`sudo chmod 0755 /data/db``sudo chown $USER /data/db`

我的权限似乎正确：

```
drwxr-xr-x  4 slaffont  wheel  136 Nov 24 13:28 /data/db/ 
```

我已经没有想法了。有没有其他人有这个问题？我该怎么办？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:25:37.410

从您的主要评论来看，您似乎通过 macports 安装了 MongoDB（给定 /opt 安装位置）。我认为可能发生的事情是 macports 的配方将 MongoDB 安装为启动服务。

检查此位置是否有与 mongodb 相关的 plist 文件：`/Library/LaunchDaemons`
如果找到它，则意味着您的系统将自动保持此服务运行。如果您只想手动运行 mongod，请删除此 plist 并重新启动。或者你可以试试这个命令：
`launchctl unload /Library/LaunchDaemons/path.to.mongo.plist`

否则，在不同的端口上运行另一个 mongod 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:59:52.090

sudo rm /var/lib/mongodb/mongod.lock
sudo chown -R mongodb:mongodb /var/lib/mongodb/
sudo -u mongodb mongod -f /etc/mongodb.conf --repair
sudo service mongodb start
或者代替最后一次尝试：sudo mongod

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T00:12:22.663

“地址已用于套接字：0.0.0.0:28017”

看起来 mongo 已经在运行或另一个进程正在使用端口 27017

在这种情况下，键入以下命令

```
ps wuax | grep mongo 
```

你应该看到像这样的东西

```
User           31936   0.5 0.4 2719784 35624   ?? S     7:34pm   0:09.98 mongod
User           31945   0.0 0.0 2423368   184 s000 R+   8:24pm   0:00.00 grep mongo 
```

现在输入 mongod 实例的 kill 命令（在本例中为 31936）：

```
kill 31936 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T19:13:21.007

看起来有些东西已经绑定到端口 27017，看起来好像另一个`mongod`正在运行（在 上没有被杀死`killall`）。是否输出`ps aux`或`lsof -i :27017`显示任何正在运行的 mongod 进程？

如果这被证明完全没有结果，您总是可以通过命令行将该`--port <portnum>`选项传递给`mongod`进程，告诉它在不同的端口上侦听（对`mongo`shell 使用相同的选项来告诉它在不同于 27017 的端口上连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T22:15:52.557

正如@shelman 所说，您已经拥有使用该端口的东西，但是您要了解是否正在运行的命令有误，请尝试：

```
sudo netstat -lpn |grep :27017 
```

我也注意到了：

```
Sat Nov 24 13:42:34 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000 
```

这更像是一个警告，但您仍然应该注意。我向最近遇到此问题的人回答了一个问题：[Mongod 运行，但 Mongo 返回一个](https://stackoverflow.com/questions/13420073/mongod-runs-but-mongo-returns-an-error/13420338#13420338)应该有帮助的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-26T01:47:43.573

因为这似乎是一个常见的问题：

作为刚刚解决/解决此问题的人，您可能遇到的是这个。当你第一次安装 Mongo（比如，通过 apt-get）时，Mongod 进程会自动开始运行。例如：

**terekhov / $** sudo apt-get install mongodb-10gen
--Snip 安装过程--
完成。mongodb
启动/运行，进程 4467
处理 ureadahead 的触发器 ...
**terekhov / $** service mongodb start start: Job is already running: mongodb

因此，如果您不需要[分叉守护程序](http://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/)等，则只需键入`mongo`以启动命令外壳；它会自动在端口 27017 上搜索 MongoDB 守护进程。幸运的是，这就是我们的守护进程。

您可以使用以下命令[启动/停止/重新启动](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)mongod 进程：`sudo service mongodb stop`

# android - 无法在一个项目上重命名应用程序包而没有错误消息

> ID：13544558
> 
> 赞同：1
> 
> 时间：2012-11-24T19:06:08.700
> 
> 标签：android, eclipse

============更新==============

我能够一次手动编辑我的应用程序中的所有 18 个类，并以新名称发布它，但这并不是一个真正可接受的长期解决方案。我仍然想知道如何解决这个问题。正如我所说，我可以更改其他应用程序的包名称，而不是我关心的那个。

艾伦

* * *

我转到“应用程序工具”，然后“重命名应用程序项目”，我可以重命名一个包，除了我要重命名的包。在这种情况下，我得到一个例外：

弹出的框叫**Refactoring**

框中的标题是**执行重构时发生致命错误**。

错误信息是：

**“创建更改对象时发生意外异常。有关详细信息，请参阅错误日志。”**

错误日志中没有显示任何内容，我不知道该怎么做。我可以轻松地重命名其他项目，所以我想我知道这个过程。该应用程序运行良好，实际上已在 Google Play 上发布。我想创建第二个版本进行测试，该版本会在 10 天内超时，以便人们尝试，因此它需要一个不同的名称。仅更改字符串文件中的名称不足以让 Google Play 认为它是一个不同的项目。

几乎任何可以在 Google Play 上作为不同应用程序的工作都可以。

任何帮助将不胜感激，因为大多数帖子都涉及如何在没有错误的情况下更改名称，我可以这样做。

艾伦

---------------更新--------我在这里找到了错误文件：

```
java.lang.reflect.InvocationTargetException
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421)
    at org.eclipse.ui.internal.WorkbenchWindow$13.run(WorkbenchWindow.java:1666)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:1663)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:663)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:502)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizard.getStartingPage(RefactoringWizard.java:472)
    at org.eclipse.jface.wizard.WizardDialog.showStartingPage(WizardDialog.java:1271)
    at org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:610)
    at org.eclipse.jface.window.Window.create(Window.java:431)
    at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:178)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:202)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:122)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.RenamePackageAction.initiateAndroidPackageRefactoring(RenamePackageAction.java:168)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.RenamePackageAction.promptNewName(RenamePackageAction.java:151)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.RenamePackageAction.run(RenamePackageAction.java:106)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring.updateJavaFileImports(ApplicationPackageNameRefactoring.java:149)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring$JavaFileVisitor.visit(ApplicationPackageNameRefactoring.java:426)
    at org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:126)
    at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:85)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:127)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:95)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:52)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:124)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:108)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring.createChange(ApplicationPackageNameRefactoring.java:126)
    at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:124)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Root exception:
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring.updateJavaFileImports(ApplicationPackageNameRefactoring.java:149)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring$JavaFileVisitor.visit(ApplicationPackageNameRefactoring.java:426)
    at org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:126)
    at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:85)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:127)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:95)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:52)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:124)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:108)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring.createChange(ApplicationPackageNameRefactoring.java:126)
    at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:124)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-23T01:24:08.033

我的问题是因为我有一个完全被注释掉的代码文件，当重构工具扫描我的包下的文件时它无法读取它。检查您的代码，确保 .java 文件都是有效的 java 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:55:56.103

重新安装 Eclipse。没有其他工作。

# bash - 我应该如何在 bash 环境中减去两个不同的时间

> ID：13544559
> 
> 赞同：1
> 
> 时间：2012-11-24T19:06:10.617
> 
> 标签：bash, math, time

我目前正在处理一个处理和组合几个不同文件的脚本，一方面，我有必要找到两个不同时间之间的差异，以确定某人工作的“总”时间。时间本身采用以下格式

```
 34:18:00,40:26:00,06:08:00 
```

第一个是开始时间，第二个结束时间，第三个总时间。虽然这一项显示正确，但有一些条目需要仔细检查和更正（根据开始/结束时间，总时间不正确）。我在其他帖子中找到了几种不同的解决方案，但其中大多数还包括日期等（其中大多数使用 awk），我对 awk 没有经验，所以不知道如何从这些示例中删除日期部分。我也听说我可以将时间转换为 unix 纪元时间，但我只是好奇是否还有其他方法可以做到这一点，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T19:22:22.933

这样的事情可能会帮助你：

```
#!/bin/bash

time2seconds() {
   a=( ${1//:/ } )
   echo $((${a[0]}*3600+${a[1]}*60+${a[2]}))
}
seconds2time() {
   printf "%.2d:%.2d:%.2d" $(($1/3600)) $((($1/60)%60)) $(($1%60))
}

IFS=, read start stop difference <<< "34:18:00,40:26:00,06:08:00"

printf "Start=%s\n" "$start"
printf "Stop=%s\n" "$stop"
printf "Difference=%s (given in file: %s)\n" $(seconds2time $(($(time2seconds $stop)-$(time2seconds $start)))) "$difference" 
```

输出是：

```
Start=34:18:00
Stop=40:26:00
Difference=06:08:00 (given in file: 06:08:00) 
```

注意：没有任何东西可以检查时间是否采用有效格式，我不知道您的数据有多可靠。

# php - 基于类别的产品兴趣电子邮件

> ID：13544560
> 
> 赞同：0
> 
> 时间：2012-11-24T19:06:12.343
> 
> 标签：php, mysql

我正在尝试设计一个电子邮件摘要系统，它将发送任何用户可能感兴趣的产品列表。这是我到目前为止所拥有的：

*   Cronjob 运行 cron.php - 抓取所有用户，然后遍历它们以查找匹配项。
*   如果找到任何匹配项，则会在 email_queue 表中创建并设置电子邮件。
*   一个单独的 cron 将检查队列表，并在需要时发送电子邮件。

我的问题是是否有更好的方法来设置产品兴趣，可能是在不同的时间或其他时间。我只是在想，如果有成千上万的用户和成千上万的产品，这可能是一种非常低效的设计方式。

谢谢

# xml - 如果包含“XYZ”，则仅使用 PERL 删除 XML 文件的第一行

> ID：13544572
> 
> 赞同：0
> 
> 时间：2012-11-24T19:07:25.057
> 
> 标签：xml, perl

我正在使用 wget 下载一个 XML 文件，但有时该文件的第一行中有我需要删除的文本。

它目前在第一行有“131”，在最后一行有“0”。

如果它包含这些信息，我需要一种删除这些行的方法。我无法进行 perl 查找和替换，以防它不存在但正确的第一行包含“131”。

这有意义吗？

有任何想法吗？

谢谢

例如，有时是这样的：

```
131
<element>
<example>content</example>
<example>content</example>
<example>content</example>
<example>content</example>
</element>
0 
```

有时是这样的（正确）

```
<element>
<example>content</example>
<example>content</example>
<example>content</example>
<example>content</example>
</element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:06:58.740

我认为这可能会让你到达你想去的地方。

假设您刚刚为 sample.xml 做了一个 wget，那么：

```
perl -pi -e '$/ = undef; s{(?: \A [^<]* | [^>]* \z )}{}xmsg;' sample.xml 
```

这会从文件的开头删除非 < 的任何内容，以及从文件末尾删除任何非 > 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:19:46.083

**那是一份工作`sed`！**您不会找到更快或更简单的方法：

如果您确定这两个值，您可以简单地：

```
sed -e  '1{/^131$/d};${/^0$/d}' -i mybrokenfile 
```

但是使用以下命令，`sed`同时**删除**任何仅包含数字的第一行和/或最后一行：

```
sed -e '1{/^[0-9]\+$/d};${/^[0-9]\+$/d}' 
```

这可以通过将文件作为参数运行并自动生成备份文件：

```
sed -e '1{/^[0-9]\+$/d};${/^[0-9]\+$/d}' -i.bak files* 
```

解释：

*   有两部分，`1`分别`$`是*地址*：`1`第一行和`$`最后一行。
*   下面的块呈现另一种形式的按条件寻址：`/^[0-9]\+$/`表示 * 行以一个或多个字符开头，`0`并且`9`紧跟其后。
*   在此匹配行（第一行或最后一行）处，要执行的命令是`d`删除*行*。

这可以写成：

```
sed -e '1{
            /^[0-9]\+$/d
        }
        ${
            /^[0-9]\+$/d
        }' -i.bak files* 
```

也是。

**编辑**：

因为我讨厌写不止一次……大约任何东西；

有一种方法可以做一些棘手的事情，但仅限于第一行和最后一行。

首先，相同的样本可以写成：

```
sed -e '1ba;$ba;bb;:a;/^[0-9]\+$/d;:b;' -i.bak files* 
```

所以这短了**1个字节！**但特别是*操作*只写一次：

解释：

*   `:a`并且`:b`是分支（跳转）到的标签
*   `ba`和`bb`分别是 和 的分支`:a`指令`:b`。
*   `1`并且`$`是如前所述的地址
*   `/.../d`前面也描述过，意思是*删除匹配正则表达式的行*

并且可以写成：

```
sed -e '
    1ba;
    $ba;
    bb;
   :a;
    /^[0-9]\+$/d;
   :b;
  ' -i.bak files* 
```

应用程序示例，`s/../../`而不是仅使用`d`：仅在第一行或最后一行出现时修改版本信息：

```
 sed -e '1ba;$ba;bb;:a;s/\(Id: .*,v\).*\(Exp\)/\1'"$(
             date +" $VER %F %T $USER ")"'\2/;b;' -i files* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:35:33.003

根据评论，您想使用`wget --save-headers`和使用适当的 HTTP 响应解析器。这实际上很简单：

```
use HTTP::Response qw( );
my $response = HTTP::Response->parse($raw_response);
my $body = $response->decoded_content( charset => 'none' ); 
```

给定包含标题的响应 via `$raw_response`，上面的代码将返回传输的 XML（或其他）文档`$body`。

* * *

原始回复：

这是一个 HTTP 分块响应。

```
if ($file =~ /^[0-9]+\r?\n/) {
   my $chunked = substr($file, 0, length($file), '');
   for (;;) {
      $chunked =~ s/^([0-9]+)\r?\n//
         or die;

      my $chunk_len = $1
         or last;

      length($file) >= $chunk_len
         or die;

      $file .= substr($chunked, 0, $chunk_len, '');
   }
} 
```

# c# - 在 Windows Phone 上处理代表

> ID：13544574
> 
> 赞同：1
> 
> 时间：2012-11-24T19:07:28.020
> 
> 标签：c#, windows-phone-7

我的应用程序中的 QueryString 有问题。我的主页中有两个按钮，当用户单击一个按钮时，应用程序导航到第二页并将按钮 ID 存储在 Querystring 上。

现在，我遇到的问题是，如果用户单击按钮，则查询字符串“ID”键设置为相应的 ID 值，但该 ID 值将变为持久性。

IE

点击 Button1 => NavigationService("/Page2.xaml?ID=1",UriKind.Relative) => 检查 page2 的 onNavigated 事件中传入的 ID 值，您会发现 Querystring 在第二页中成功设置为 ID。

但是如果你点击后退按钮然后按button2

点击 Button2 => NavigationService("/Page2.xaml?ID=2",UriKind.Relative) => Check QueryString value in on Navidated event on page2，你发现ID键还是1的值。

如果我是通过按 button2 开始的，那么 ID 键的持久值将为 2。

我完全不知道会发生什么。我在页面之间进行了动画页面转换，但我不知道这会如何影响事情。有人知道会发生什么吗？如果我导航回主页，有没有办法重置整个应用程序？

在主页中

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            animation1.Stop();
            animation2.Stop();
            animation1.Begin();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {          
            animation2.Begin();
            animation2.Completed += (x, y) => NavigationService.Navigate(new Uri("/fooApp;component/Page2.xaml?id=1", UriKind.Relative));                           
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            animation2.Begin();
            animation2.Completed += (x, y) => NavigationService.Navigate(new Uri("/fooApp;component/Page2.xaml?id=2", UriKind.Relative));          
        }

        private void button3_Click(object sender, RoutedEventArgs e)
        {
            animation2.Begin();
            animation2.Completed += (x, y) =>   NavigationService.Navigate(new Uri("/fooApp;component/Page2.xaml?id=3", UriKind.Relative));      
        } 
```

在第 2 页

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e )
    {

       base.OnNavigatedTo(e);

       animation1.Stop();
       animation2.Stop();
       animation1.Begin();

    } 
```

顺便说一句，我已经注释掉了整个 Page2 Page Loaded 事件。

**更新**

我注意到的一件事是程序甚至不运行第二个导航调用，它只运行第一个，我知道这是因为如果我将 button2 中的 Uri 源更改为空字符串并以 button1 为按钮运行程序即首先按下，无论我返回并按下哪个按钮，我都会使查询字符串值停留在 1。当我查看 page2 中 OnNavigatedTo 事件中的 NavigationEventArgs e 对象时，它的 URI 源将始终是第一个 uri 源。

我现在的猜测是，animation2.Completed 事件正在充当某种多播委托，无论首先放入其中的内容都会运行。此外，我删除了动画并且只有 Navigation 语句，程序工作很好，但没有动画。有人知道我如何清除动画2.完成事件吗？或者对替代实现有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:48:18.767

基本上，您正在向`Completed`情节提要添加处理程序。处理程序导航到第`Completed`2 页。然后您返回并按下第二个按钮。由于您返回上一页，因此您正在重新使用相同的页面实例，因此也是相同的`Storyboard`实例。**现在您正在向`Completed`您的`Storyboard`**. 因此，当动画结束时，`Storyboard`有两个`Completed`处理程序，第一个首先执行，因此使用第一个参数导航到 Page2。

而不是每次都添加一个`Completed`处理程序，只做一次，并将 URL 存储在一个属性中：

在您的 XAML 中：

```
<Storyboard x:Key="Animation2" Completed="Storyboard_Completed">
    <!-- whatever-->
</Storyboard> 
```

然后在您的 C# 代码中：

```
protected string Uri { get; set; }

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    animation1.Stop();
    animation2.Stop();
    animation1.Begin();
}

private void button1_Click(object sender, RoutedEventArgs e)
{          
    this.Uri = "/fooApp;component/Page2.xaml?id=1";
    animation2.Begin();                       
}

private void button2_Click(object sender, RoutedEventArgs e)
{
    this.Uri = "/fooApp;component/Page2.xaml?id=2";
    animation2.Begin();          
}

private void button3_Click(object sender, RoutedEventArgs e)
{
    this.Uri = "/fooApp;component/Page2.xaml?id=3";
    animation2.Begin();              
}

private void Storyboard_Completed(object sender, EventArgs e)
{
    this.NavigationService.Navigate(new Uri(this.Uri, UriKind.Relative));      
} 
```

**奖金：**

*删除事件处理程序*

如果要删除事件处理程序，只需使用`-=`运算符。但是你不能使用 lambda，你必须使用“经典”方法：

```
// Good
this.animation2.Completed -= Storyboard_Completed;

// Wrong
this.animation2.Completed -= (sender, e) => NavigationService.Navigate(new Uri("RandomText_JustWantCompletedEventToBeHit", UriKind.Relative)); 
```

*替代实施*

如果您的所有按钮都是触发动画并重定向到 Page2，那么您可以`Tag`通过控件的属性以更通用的方式处理它。该`Tag`属性允许您存储要标识控件的任何对象。

XAML：

```
<Button Click="Button_Click" Content="Button 1" Tag="1" />
<Button Click="Button_Click" Content="Button 2" Tag="2" />
<Button Click="Button_Click" Content="Button 3" Tag="3" /> 
```

C＃：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
     var element = (FrameworkElement)sender;
     this.Url = "/fooApp;component/Page2.xaml?id=" + element.Tag.ToString();

     animation2.Begin();
} 
```

# google-chrome - 为什么页面加载时地址栏中出现“swappedout://”文字？

> ID：13544575
> 
> 赞同：11
> 
> 时间：2012-11-24T19:07:39.690
> 
> 标签：google-chrome

当我的互联网连接突然断开时，我正在浏览。当它恢复正在重新加载的页面然后停止加载时，我在地址栏和浏览器的标题栏中得到了一个空白页面，其中包含文本“swappedout://”。有人可以解释原因吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:21:15.500

刚刚和以前发生在我身上。我很少遇到这种情况，但不知何故它与以下有关：

*   当您的 IP 地址更改时
*   你发布/更新IP

我认为这没什么好担心的。只需刷新页面。

[与此换出的事情相关的一些链接： http](http://code.google.com/p/chromium/issues/detail?id=143445) ://code.google.com/p/chromium/issues/detail ?id=143445

# arrays - Bash 将数组传递给 expr

> ID：13544589
> 
> 赞同：0
> 
> 时间：2012-11-24T19:09:51.100
> 
> 标签：arrays, bash

我正在用 BASH 编写一个简单的计算器。它的目的是遍历给定的参数，检查它们是否正确，执行幂函数并将其余的传递给 expr 进行计算。除了乘法之外的一切都有效。
当我做类似的事情时

```
my_script.sh 2 \* 2 
```

我从 expr 得到语法错误。检查 bash -x 让我知道

```
expr 2 '\*' 2 
```

* 在撇号中。我不知道如何摆脱它，以便 expr 可以正确解析它。

```
if [ $# -le 0 ]
then
    usage
    exit 1
fi

ARGS=("${@}")

while [ $# -gt 0 ]
do
    if [ $OP -eq 0 ]
    then
        if [[ $1 =~ ^[-]{0,1}[0-9]+$ ]]
        then
            ELEMS[$J]=$1
            shift
            let OP=1
            let J=$J+1
        else
            echo $1' is not a number'
            usage
            exit 3
        fi
    else
        if [[ $1 =~ ^[-+/\^\*]{1}$ ]]
        then
            if [[ $1 =~ ^[\^]{1}$ ]]
            then
                if ! [[ $2 =~ ^[0-9]+$ ]]
                then
                    echo 'Bad power exponent'
                    usage
                    exit 3
                fi
                let BASE=${ELEMS[$J-1]}
                let EX=$2
                pow $BASE $EX
                let ELEMS[$J-1]=$RES
                shift 2
            else
                if [[ $1 =~ [\*]{1} ]]
                then
                    ELEMS[$J]=\\*
                else
                ELEMS[$J]=$1
                fi
                let J=$J+1
                shift
                let OP=0
            fi
        else
            echo $1' is not an operator'
            if [[ $1 =~ ^[0-9]+$ ]]
            then
                let TMP=${ELEMS[$J-1]}
                echo "Are you missing an operator beetwen $TMP and $1?"
            fi
            usage
            exit 3
        fi
    fi    
done

if [ $OP -eq 0 ]
then
    echo 'Missing argument after last operator'
    usage
    exit 3
fi
echo "Calculation: ${ARGS[*]}"
echo -n 'Result: '
expr ${ELEMS[*]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:22:09.347

更改`ELEMS[$J]=\\*`为`ELEMS[$J]="*"`（或`ELEMS[$J]=\*`）并使用：

```
expr "${ELEMS[@]}" 
```

关键是在数组中使用`@`而不是`*`取消引用，它允许您使用双引号。这相当于`expr "2" "*" "2"`, 而不是`expr "2 * 2"`你在使用时得到的`expr "${ELEMS[*]}"`

# php - php 中的 $_POST 不返回任何数据

> ID：13544590
> 
> 赞同：-1
> 
> 时间：2012-11-24T19:09:53.733
> 
> 标签：php, post

我写了以下名为`fetchdetails.php`

```
<?php
$db ="fb"; 
$con = mysql_connect("host","user","paswd") or die ("hi ".mysql_error());
mysql_select_db($db) or die("helo".mysql_error());

$id = $_POST["id"];
echo $id;
$id = (string)$id;
echo $id."hi"; 
```

当我使用`www.anyaddress.com/fetchdetails.php?id=1722315`但 echo $id 调用它时没有显示任何内容。需要尽快帮助。实际上，我之前在其他一些代码中做了同样的事情，它工作正常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T19:11:22.910

如果想从 URL 查询中获取值，例如`id`来自的部分

> `http://example.com?id=42`

您应该**始终**使用**`$_GET`**超全局数组，如下所示：

```
$id = $_GET['id'];
echo $id; // 42 
```

另一方面，您应该使用**`$_POST`**来获取通过 HTML 表单提交的任何数据。`$_POST["id"];`仅当您希望通过表单提交查询时使用

不管是什么情况，你都不应该相信任何一个 POST/GET 传递的数据。因此，在将其放入 mysql 查询之前，您应该对其进行清理/转义。

像这样： `$id = mysql_real_escape_string($_GET['id']),`

*笔记。*以 depredicated 开头的每个函数`mysql_`都无法安全使用，因此您必须了解 PDO 或 MySQLi

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:14:30.917

删除此行

```
$db ="fb"; 

$con = mysql_connect("host","user","paswd") or die ("hi ".mysql_error());

mysql_select_db($db) or die("helo".mysql_error()); 
```

然后检查它是否有效。如果有，那么您在建立连接时遇到问题。

如果没有检查您是否发送**POST**或**GET**请求，是否已**发送**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:19:35.693

您也可以使用`$_REQUEST`变量，如果值可以来自以下任何一个 `$_GET`，`$_POST`或者`$_COOKIE`

# r - 从 R 中的标量函数创建向量函数

> ID：13544594
> 
> 赞同：3
> 
> 时间：2012-11-24T19:10:26.400
> 
> 标签：r

这是我的功能。它在 [-5,-3] 和 [3,5] 和 0 其他地方取某些值。该函数围绕原点对称。

```
f<-function(x){
    y=0 
    if (x>=-5 && x<=-3){
        y=3*(1-(x+4)^2)/8
    }
    if (x>=3 && x<=5){
        y=3*(1-(x-4)^2)/8
    }
    return(y)
} 
```

好的，所以我使用了该功能`sapply (bins, f)`

哪里`bins = seq(-5,5,by=0.05)`。这很好用！

但是当我尝试做 f(bins) 时，我得到了这个荒谬的答案。在 [-5,-3] 范围内是正确的。

我对此的猜测是，当函数 f 检查第一个 if 条件时，它仅检查 bins 向量的第一个值，因此对于 (-3,5] 范围，它错误地使用了仅适用于 [-5 ,-3]。

我试图找到一种为这些点绘制曲线的方法，但是当我使用曲线函数时，曲线是使用我们使用 f(bins) 获得的错误值绘制的

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T19:14:40.247

您必须对函数进行向[量化](http://stat.ethz.ch/R-manual/R-devel/library/base/html/Vectorize.html)`f`以使其应用于向量：

```
f = Vectorize(f)
print(f(bins)) 
```

请注意，您也可以只使用`curve`with `sapply`：

```
curve(sapply(x, f), from=-5, to=5) 
```

最后，如果你`ifelse`这样写函数：

```
f = function(x) {
    ifelse(x >= -5 & x <= -3, 3*(1-(x+4)^2)/8, ifelse(x>=3 & x<=5, 3*(1-(x-4)^2)/8, 0))
} 
```

这将允许它在不需要`Vectorize`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T23:56:04.527

编写函数会快得多，因此它是完全向量化的：

```
f <- function(x){  0 + (x >=-5 & x <= -3)*(3*(1-(x+4)^2)/8) +
                   + (x >= 3 & x <= 5)*( 3*(1-(x-4)^2)/8) } 
```

并且从对称性进一步简化是可能的（我认为）：

```
f <- function(x){  0 + ( abs(x) <= 5 & abs(x) >= 3)*( 3*(1-(abs(x) -4)^2)/8) } 
```

# android - 如何使用 xmlSerializer 在 xml 文件中创建/写入并存储在内部存储 android 中？

> ID：13544595
> 
> 赞同：1
> 
> 时间：2012-11-24T19:10:26.577
> 
> 标签：android, xml-parsing, xml-serialization

我正在开发一个 android 应用程序，并希望使用 xmlSerializer 创建一些数据并将其存储到一个 xml 文件中，并且该文件应该保存在 android 内部存储中，....这是我不知道它有什么问题，当我运行应用程序它会给我一个错误“不幸的是项目已停止”..请帮助我！

```
package com.example.xmlnizam;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.util.Xml;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String Filename = "xmlfile.xml"; 
        FileOutputStream fos = null; 
        try 
        {
            fos = openFileOutput(Filename, Context.MODE_PRIVATE);  
            //File path = getFileStreamPath(Filename);  
            //Toast.makeText(MainActivity.this, "File has been created", Toast.LENGTH_LONG).show();     
        } 
        catch (FileNotFoundException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(MainActivity.this, "Error Creating FIle", Toast.LENGTH_LONG).show(); 
        }

        //XmlSerializer to write into Xml file 
        XmlSerializer xmlSerializer = Xml.newSerializer();  
        try
        {
            xmlSerializer.setOutput(fos, "UTF-8");
            xmlSerializer.startDocument(null, Boolean.valueOf(true));
            xmlSerializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true);
            xmlSerializer.startTag("", "AllData");
                xmlSerializer.startTag("", "Person");
                xmlSerializer.attribute(null, "id", "1");
                    xmlSerializer.startTag("", "Name");
                    xmlSerializer.text("nomi");
                    xmlSerializer.endTag(null, "Name");

                    xmlSerializer.startTag("", "Age");
                    xmlSerializer.text("21");
                    xmlSerializer.endTag(null, "Name");

                    xmlSerializer.startTag("", "Sex");
                    xmlSerializer.text("male");
                    xmlSerializer.endTag(null, "Name");
                xmlSerializer.endTag(null, "Person");
            xmlSerializer.endTag(null, "AllData");
            xmlSerializer.endDocument();
            xmlSerializer.flush(); 
            fos.close(); 
            Toast.makeText(MainActivity.this, "Successfully Inserted", Toast.LENGTH_LONG).show(); 
        }
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(MainActivity.this, "Error Inserting", Toast.LENGTH_LONG).show(); 
        } 

    }
} 
```

# c# - Windows 8 上 VS2012 中的依赖关系参考问题

> ID：13544600
> 
> 赞同：6
> 
> 时间：2012-11-24T19:10:47.147
> 
> 标签：c#, .net, windows-8, visual-studio-2012, log4net

我有几个项目的解决方案，其中许多引用了 Apache 的 log4net。我目前正在尝试仅构建其中一个项目（类库）来解决我遇到的参考问题，但还没有运气。

只有在 Windows 8 上的 VS2012 中构建时才会出现警告和错误，而不是在 Windows 7 上的 VS2010 中。

任何人有任何想法我可以如何解决这个问题？这是警告信息；

`The primary reference "log4net" could not be resolved because it was built against the ".NETFramework,Version=v4.0.1,Profile=Client" framework. This is a higher version than the currently targeted framework ".NETFramework,Version=v4.0,Profile=Client".`

这是错误消息：

`The type or namespace name 'log4net' could not be found (are you missing a using directive or an assembly reference?) C:\Users\Rune\Documents\Team Foundation Server\noOdin\Yggdrasil\OdinLib\Common.cs`

`The type or namespace name 'ILog' could not be found (are you missing a using directive or an assembly reference?) C:\Users\Rune\Documents\Team Foundation Server\noOdin\Yggdrasil\OdinLib\Common.cs`

我现在忽略错误，因为它们是 log4net 引用未加载的结果。

参考包含在我的 .csproj 文件中，如下所示：

`<Reference Include="log4net"><HintPath>..\..\Dependencies\log4net.dll</HintPath></Reference>`

因此，问题确实是我得到的警告，因为它似乎在我的 Dependencies 文件夹中找到了我的 log4net.dll 文件。

有谁知道我怎么解决这个问题？

请询问您是否需要更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:47:24.490

csproj 文件中缺少该`<SpecificVersion>False</SpecificVersion>`文件，该文件强制使用特定版本的`log4net`-library。

添加此答案以解决未回答列表中的问题:)

# iphone - 如何在视图 iphone sdk 中管理对象计划

> ID：13544609
> 
> 赞同：0
> 
> 时间：2012-11-24T19:11:52.100
> 
> 标签：iphone, object, sdk, position

我想知道如何管理对象计划。我解释了我的问题：我有一个 UITextField 和一个标签，我试图将标签放在视图中 TextField 后面，但无论如何，标签保持可见并在 TextField 前面，如何更改计划对象在视图中的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:18:48.500

UIView 中的每个可见对象都是 UIView 的子类，所有 UIView 都具有 brigSubviewtoFront 方法，因为这样：

```
[self.view bringSubviewToFront:textField]; 
```

# c++ - 朋友班之间如何互动

> ID：13544610
> 
> 赞同：2
> 
> 时间：2012-11-24T19:11:57.310
> 
> 标签：c++

我做了两个简单的类，只是为了了解朋友类的工作原理。我很困惑为什么这不能编译，Linear 类也可以访问 Queues 类中的结构吗？

线性.h

```
template<typename k, typename v >
 class Linear
 {
    public:
    //Can I create a instance of Queues here if the code did compile? 

    private:
  }; 
```

线性.cpp

```
#include "Linear.h" 
```

队列.h

```
 #include "Linear.h"

 template<typename k, typename v >
 class Linear;

  template<typename x>
  class Queues
  {
    public:

    private:
        struct Nodes{
            int n;
        };
    //Does this mean I am giving Linear class access to all of my Queues class variable or    is it the opposite ? 
    friend class Linear<k,v>;
    }; 
```

队列.cpp

```
 #include"Queues.h" 
```

我的错误是

```
Queues.h:15: error: `k' was not declared in this scope
Queues.h:15: error: `v' was not declared in this scope
Queues.h:15: error: template argument 1 is invalid
Queues.h:15: error: template argument 2 is invalid
Queues.h:15: error: friend declaration does not name a class or function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:56:38.697

要回答您最初的问题：

类中的`friend`关键字允许友元函数或类访问声明友元约束的类的私有字段。有关此语言功能的详细说明，请参阅此[页面](http://www.cplusplus.com/doc/tutorial/inheritance/)。

关于代码中的编译错误：在这一行中：

```
friend class Linear<k,v>; 
```

问问自己，什么是`k`，它在哪里定义？对`v`.

基本上，模板不是一个类，它是一个语法结构，让您定义一个“类的类”，这意味着对于模板：

```
template <typename T>
class C { /* ... */ }; 
```

你还没有一个类，但是如果你提供一个正确的类型名，它可以让你定义类。在模板中定义了类型名 T，并且可以在适当的位置使用它，就好像它是一个真正的类型一样。

在以下代码片段中：

```
template <typename U> 
class C2 {
   C<U> x;
   /* ... */
}; 
```

你定义了另一个模板，当用给定的类型名实例化时，它将包含一个具有相同类型名的模板 C 的实例。上面代码`U`行中的类型名由包含模板*定义。*但是，在您的代码中，并没有这样的定义，无论是在使用它们的模板中，还是在顶层。`C<U> x;`*`k``v`*

 *本着同样的精神，以下模板：

```
template <typename U> 
class C2 {
   friend class C<U>;
   /* ... */
}; 
```

*实例化*时，将类模板 C 的实例（同样具有相同的参数**）**`U`作为朋友。据我所知，对于所有可能的参数组合，类模板实例不可能与给定类成为朋友（C++ 语言还不支持存在类型）。

例如，您可以编写如下内容：

```
template<typename x>
class Queues
{
  public:

  private:
     struct Nodes{
        int x;
     };

  friend class Linear<x,x>;
}; 
```

将友好性限制为仅使用and`Linear`的该模板的实例，或类似的东西：`x``x`

```
template<typename x,typename k, typename v>
class Queues
{
  public:

  private:
     struct Nodes{
        int x;
     };

  friend class Linear<k,v>;
}; 
```

如果你想允许`k`并被`v`随意定义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T19:17:57.403

您的问题在于该代码中没有朋友类的模板。

朋友只是意味着该类对访问私有和受保护的限制已被删除。基本上，好像课堂上的私人这个词是公共的。

一定要尝试提交有一个问题的代码，并且除了一件事之外你都理解。*

# c# - 无法让 TcpClient 连接到 gmail

> ID：13544611
> 
> 赞同：4
> 
> 时间：2012-11-24T19:12:20.797
> 
> 标签：c#, tcp, gmail, imap, ioexception

我正在尝试制作可以阅读电子邮件的东西，但我无法正常工作。这段代码：

```
TcpClient c = new TcpClient();
c.Connect("imap.gmail.com", 993);
NetworkStream stream = c.GetStream();
stream.ReadTimeout = 1000;
stream.ReadByte(); 
```

接缝是我下载的任何代码中断的地方。最后一行抛出一个 IOException 消息：“无法从传输连接中读取数据：连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应。 "

我会满足于第三方程序，它会以我可以阅读的格式自动下载电子邮件。我已经让 Thunderbird 连接到 gmail，所以问题肯定在我这边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:45:36.663

使用 openssl 连接到 gmail。这是完成您的事情的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:24:16.153

该消息表明远程服务器没有响应。它没有说“此端口上不允许连接”。它没有说“我关闭连接”。它什么也没说。

这意味着您甚至无法在 TCP 级别上创建连接。尝试这个：

```
telnet imap.gmail.com 993 
```

它会失败。所以它与你的应用程序无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:07:44.587

Gmail IMAP 使用 SSL，因此您需要使用`SslStream`和调用`AuthenticateAsClient`方法包装您的网络流（以便它执行 SSL 握手/服务器身份验证魔术）。之后，您与它进行交互，就好像它是正常的（非 SSL）流一样：

```
TcpClient c = new TcpClient();
c.Connect("imap.gmail.com", 993);
SslStream sslStream = new SslStream(c.GetStream());
sslStream.ReadTimeout = 1000;
sslStream.AuthenticateAsClient("imap.gmail.com");
sslStream.ReadByte(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T21:54:56.817

您正在 SSL 端口上进行连接。如果您没有进行正确的 SSL 握手，它将在不久之后关闭连接，而不会向您发送任何数据。

# java - 创建一个 2D 面板数组，每个面板都根据之前设计的类绘制自己的形状

> ID：13544612
> 
> 赞同：2
> 
> 时间：2012-11-24T19:12:25.193
> 
> 标签：java, swing, user-interface, layout

我正在创建一个游戏，允许一个玩家通过键盘上的箭头键在用户输入的情况下在棋盘上移动。目标是收集板上的宝石并避免随机移动的怪物。我在让我的板子在 GUI 中绘制时遇到了问题。每个“tile”、“item”和“character”都是使用简单的通用绘制方法绘制的，例如 drawRect 和 drawOval。但是，我不知道如何将这些绘制在一组面板中。

我的问题是在构造函数中还是在绘制方法中？帮助！

```
public class LevelPanel extends JPanel {
    private static Player player;
    private Level level;
    private JLabel gemLabel, scoreLabel, healthLabel;
    private JPanel[][] squares;
    private JPanel boardPanel;
    private JOptionPane optionPane = new JOptionPane();

    public LevelPanel() {
        this.player = player;
        setPreferredSize(new Dimension(300,300));
    setBackground(Color.white);
    setLayout(new GridLayout(10,10));

    gemLabel = new JLabel("Gems Left: 0");
    scoreLabel = new JLabel("Score: 0");
    healthLabel = new JLabel("Health: 100");

    for(int i = 0; i < 10; i++) {
        for(int j = 0; j < 10; j++) {
        squares[i][j] = new JPanel();
        squares[i][j].setBackground(Color.white);
        boardPanel.add(squares[i][j]);
        }
    }

    add(gemLabel);
    add(scoreLabel);
    add(healthLabel);
    add(boardPanel);
    }

    public void paint(Graphics g) {
        super.paint(g);
    level.draw(g);
    }

    private class KeyHandler extends KeyAdapter {
        public void keyPressed (KeyEvent e) {
        int keyCode = e.getKeyCode();
        switch(keyCode) { 
            case KeyEvent.VK_UP:
            player.move(-1,0);
            break;
            case KeyEvent.VK_DOWN:
            player.move(1,0);
            break;
            case KeyEvent.VK_LEFT:
            player.move(0,-1);
            break;
            case KeyEvent.VK_RIGHT: 
            player.move(0,1);
            break;
        }
        gemLabel.setText("Gems Left: " + level.getNumGems());
        scoreLabel.setText("Score: " + player.getScore());
        healthLabel.setText("Health: " + player.getHealth());
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:33:11.663

你永远不会实例化`squares`or `boardPanel`：

```
private JPanel[][] squares = new JPanel[10][10];
private JPanel boardPanel = new JPanel(); 
```

同样`level`在课堂`LevelPanel`上似乎没有被实例化。同样在这个类中，您正在分配一个未定义的引用`player`

```
public LevelPanel() {
    this.player = player; 
```

你可以传入一个`Player`参考：

```
public LevelPanel(Player player) {
    this.player = player; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:24:17.383

而不是让`JPanel[]`你可以使用`JButton[]`没有任何名称的背景颜色。

这是一个游戏示例，类似于您的 2D 数组需要 [在 CardLayout 中洗牌 JButton](http://javabeginner.com/java-swing/java-swing-shuffle-game)

# javascript - D3js 代码在调用两次时会复制图形而不是刷新

> ID：13544618
> 
> 赞同：2
> 
> 时间：2012-11-24T19:13:06.410
> 
> 标签：javascript, canvas, graph, svg, d3.js

这是我的 D3js 代码

```
 function ShowGraph(data)
{

    var w = 600,
                h = 600,
                padding = 36,
                p = 31,
                barwidth = 1;

            var bar_height = d3.scale.linear()
                            .domain([d3.max(data, function(d) { return d.count; }), 0] )  // min max of count
                            .range([p, h-p]);

            var bar_xpos = d3.scale.linear()
                            .domain([1580, d3.max(data, function(d) { return d.year; })] )  // min max of year
                            .range([p,w-p]);

            var xAxis = d3.svg.axis()
                        .scale(bar_xpos)
                        .orient("bottom")
                        .ticks(5);  //Set rough # of ticks

            var yAxis = d3.svg.axis()
                        .scale(bar_height)
                        .orient("left")
                        .ticks(5);

            var svg = d3.select("#D3line").append("svg")
                        .attr("width", w)
                        .attr("height", h);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (h - padding) + ")")
                .call(xAxis);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + padding + ",0)")
                .call(yAxis);

            svg.selectAll("rect")
                .data(data)
                .enter().append("rect")
                .attr("class","bar")
                .attr("x", function(d) {
                    return bar_xpos(d.year); })
                .attr("y", function(d) { 
                    return bar_height(d.count); })
                .attr("width", barwidth)
                .attr("height", function(d) {return h - bar_height(d.count) - padding; })
                .attr("fill", "steelblue")  
} 
```

我在单击按钮时运行上面的代码。当我单击该按钮时，一旦图形显示，但如果再次单击它，它会显示另一个图形。所以现在我得到 2 个图形。如果我再次单击，我得到 3.All i想要更新现有图表而不是复制图表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T19:17:42.857

在这里，您总是附加一个新的 SVG 元素 ( `.append('svg')`)：

```
var svg = d3.select("#D3line").append("svg")
                        .attr("width", w)
                        .attr("height", h); 
```

因此，不要使用新的 SVG 元素（因此是新的图形），只需维护指向第一个选定图形的链接并覆盖它或再次选择 SVG：

```
 var svg = d3.select( '#D3line svg' );
   if ( !svg ) {

      svg = d3.select("#D3line").append("svg")
                                      .attr("width", w)
                                      .attr("height", h);
   } 
```

或者您清除 SVG 所在元素的所有内容：

```
document.querySelector( '#D3line' ).innerHTML = ''; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T04:35:59.873

您还可以在添加新的 svg 之前删除旧的 svg..

```
 d3.select("#D3line").selectAll("svg").remove();
 var svg = d3.select("#D3line").append("svg")
                    .attr("width", w)
                    .attr("height", h); 
```

# multithreading - WinPcap 中的离线过滤是线程安全的吗？

> ID：13544621
> 
> 赞同：1
> 
> 时间：2012-11-24T19:13:28.450
> 
> 标签：multithreading, thread-safety, pcap, libpcap, winpcap

使用 WinPcap 4.1.2，我需要在给定接口上收集所有基于 IP 的流量，然后过滤用户选择的基于 TCP 和 UDP 的“对话”以进行第 7 层处理。由于同时需要对每个传入帧进行唯一标记一次，我不能使用明显的解决方案，即让多个`pcap_t`设备为每个设备配备一个唯一的过滤器。相反，我使用单个`pcap_t`设备收集数据，标记每个帧，然后利用`pcap_offline_filter`API 在单独的线程中过滤每个选定的“对话”（即，X 对话将在 X 个不同的线程中过滤）以充分利用此应用程序将在其上运行的多核系统。

问题很简单。`pcap_offline_filter`API 线程安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:19:18.660

`pcap_offline_filter()`没有将由多个实例共享的全局数据，因此，只要您不在其他线程中修改其*参数*（没有理由这样做 - 例如，您不应该更改编译的过滤器结构，而在过滤过程中，或在过滤时更改数据包头或数据），它是线程安全的。

(`pcap_compile()`然而，它本身不是线程安全的；它基于 YACC 解析器和 Lex 词法分析器，我不认为 yacc 或 Bison，或 Lex 或 Flex 默认生成线程安全代码，代码生成器也具有全局变量。只需确保在同一个线程中编译过滤器表达式；然后您可以让多个线程*使用*这些表达式。我已经检查了 libpcap 主干的更改以将第一个参数设置为`pcap_offline_filter()`a `const struct bpf_program *`，以澄清它读取但不修改过滤器。这适用于该结构指向`struct bpf_program`的数组和数组。）`struct bpf_insns`

# node.js - nodejs中循环中的同步流

> ID：13544625
> 
> 赞同：1
> 
> 时间：2012-11-24T19:13:58.190
> 
> 标签：node.js, prompt

我有以下代码用于在 nodejs 中接受来自命令行的输入

```
for(i=0; i<2;i++)
{
    for(j=0; j<2; j++)
    {
        console.log("Enter data for "+i+"th row and "+j+"th column");
        prompt.get(['var1', 'var2'], function (error, result) {
             console.log("var1 is "+result.var1);
             console.log("var2 is "+result.var2);
        });
    }
} 
```

我得到的输出为

```
Enter data for 0th row and 0th column
prompt: var1:  
Enter data for 0th row and 1th column
prompt: var1:  
Enter data for 1th row and 0th column
prompt: var1:
Enter data for 1th row and 1th column
prompt: var1: 
```

如您所见，第一个迭代器的 var1 和 var2 的流程正在同步，但在第一个迭代器的 var2 和第二个迭代器的 var1 之间不同步

我需要以下输出序列，其中第一个迭代器的 var2 和第二个迭代器的 var1 也是同步的，依此类推。

```
Enter data for 0th row and 0th column
prompt: var1:  10
prompt: var2:  100
Enter data for 0th row and 1th column
prompt: var1:  20
prompt: var2:  100
Enter data for 1th row and 0th column
prompt: var1:  30
prompt: var2:  100
Enter data for 1th row and 1th column
prompt: var1:  40
prompt: var2:  100 
```

有没有办法在 nodejs 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:30:29.000

完全披露，我个人认识`futures`.

看看[futures](https://github.com/coolaj86/futures)或[async](https://github.com/caolan/async)。就个人而言，对于某些事情，我更喜欢期货的风格。

例如，要将您的同步 for 循环转换为异步 for 循环（以便使用 asynchronous `prompt.get`），请尝试以下操作：

```
var forEachAsync = require('forEachAsync');

forEachAsync([0, 1], function (next, _, i) {
    forEachAsync([0, 1], function (next, _, j) {
        console.log("Enter data for "+i+"th row and "+j+"th column");
        prompt.get(['var1', 'var2'], function (error, result) {
            console.log("var1 is "+result.var1);
            console.log("var2 is "+result.var2);
            next();
        });
    }).then(next);
}); 
```

在`futures`, next 是当您准备好循环中的下一次迭代时调用的回调。我们创建了一个嵌套的异步 forEach。内部 forEach 完成时外部 forEach 继续，调用提示回调时内部 forEach 继续。

回调的签名与 的签名相同`Array.prototype.forEach`，只是它添加了一个回调作为第一个参数。

**编辑：**

不相关，但考虑使用[printf 风格的 console.log](http://nodejs.org/api/stdio.html#stdio_console_log_data)：

```
console.log("Enter data for %dth row and %jth column", i, j); 
```

这适用于节点，但不适用于浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T02:46:54.207

您可以了解 Flow Control 的基础知识并实现自己的系列功能，如 Mixus 在线书籍中所述。我发现它对 Nodejs 异步初学者非常有用。书籍：[http](http://book.mixu.net/node/single.html) ://book.mixu.net/node/single.html 章节：7 控制流

# java - primefaces barChart 服装 x 轴

> ID：13544626
> 
> 赞同：3
> 
> 时间：2012-11-24T19:14:04.960
> 
> 标签：java, xhtml, primefaces, integer

我的应用程序中有 p:barchart 图表，类似于 showCase 上的第二个条形图：http: [//www.primefaces.org/showcase/ui/barChart.jsf](http://www.primefaces.org/showcase/ui/barChart.jsf)

```
<p:barChart id="horizontal" value="#{chartBean.categoryModel}" legendPosition="se" style="height:300px"  
            title="Horizontal Bar Chart" orientation="horizontal" min="0" max="200"/> 
```

如何自定义 X 轴上的数字。我想格式化 x 轴以仅使用整数。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T10:12:55.353

试试这个**（未测试）**：

```
<p:barChart extender="ext" id="horizontal" value="#{chartBean.categoryModel}" legendPosition="se" style="height:300px"  
    title="Horizontal Bar Chart" orientation="horizontal"/> 
```

在你的js中添加这个

```
function ext() {
   this.cfg.seriesDefaults = { 
       useSeriesColor: true, 
       min: 0, 
       max: 200, 
       tickInterval: 20, 
       tickOptions: { 
           formatString: '%d' 
       } 
   };
} 
```

或仅此 x 轴：

```
function ext() {
   this.cfg.axes = {
       xaxis:
       {
           tickInterval: 20,
           tickOptions: { 
               formatString: '%d' 
           } 
       }
   };
} 
```

你可以试试玩 `tickInterval`...

* * *

直接来自[PrimeFaces 用户指南](http://primefaces.org/documentation.html)

**扩展器**

图表提供了对常用 jqplot 选项的高级访问，但是 jqplot 中提供了更多自定义选项。扩展器功能通过增强 this.cfg 对象提供对低级 API 的访问以进行高级定制，这里是增加线条系列阴影深度的示例；

```
<p:lineChart value="#{bean.model}" extender="ext" />

function ext() {
    //this = chart widget instance
    //this.cfg = options
    this.cfg.seriesDefaults = {
        shadowDepth: 5
    };
} 
```

有关可用选项的文档，请参阅 jqPlot 文档； [http://www.jqplot.com/docs/files/jqPlotOptions-txt.html](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html) 转换器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:56:22.407

你的扩展功能可能是这样的

```
 function customExtender() {
        this.cfg.axes.xaxis.tickOptions = {
            formatString : '%d'
        };
        this.cfg.axes.xaxis.tickInterval = 1;
    } 
```

我有同样的问题，这很好用，我基于 Daniel's Answer 和其他一些代码。这样，它只是格式化所需的轴，而不是两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:03:09.323

在你的js中添加这个

```
function ext() {
    this.cfg.axes.xaxis.tickOptions.formatString = '%d';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-27T10:18:57.873

您可以使用以下代码从 @ManagedBean 类将格式设置为轴：

```
Axis xAxis = categoryModel.getAxis(AxisType.X);
xAxis.setTickFormat("%.0f"); 
```

# java - 如何在 Spring MVC 中管理对同一个文件夹但具有不同 HTTP 参数的两个 HTTP 请求？

> ID：13544628
> 
> 赞同：3
> 
> 时间：2012-11-24T19:14:15.880
> 
> 标签：java, spring, spring-mvc, parameters, httprequest

我正在研究 Spring MVC 展示示例，并要求您对请求映射主题进行一些简单的解释。

在实践中，我认为我有以下两个链接：

```
 <li>
            <a id="byParameter" class="textLink" href="<c:url value="/mapping/parameter?foo=bar" />">By path, method, and presence of parameter</a>
        </li>

        <!-- PERSONALE -->
        <li>
            <a id="byParameter2" class="textLink" href="<c:url value="/mapping/parameter?foo2=blabla" />">(PERSONALE) By path, method, and presence of parameter with value="blabla"</a>
        </li> 
```

向“/mapping/parameter/”文件夹生成 HTTP 请求，但它们具有不同的参数

第一个有一个名为 foo 的参数，第二个有一个名为 foo2 的参数

好的...现在我会这样：由第一个链接（参数名为“foo”的链接）生成的 HTTP 请求由方法处理，第二个链接生成的 HTTP 请求（参数名为“foo2”的链接） ) 由其他方法处理

所以，在我的控制器类中，我想以这种方式添加以下两种方法：

```
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="foo")
public @ResponseBody String byParameter() {
    return "Mapped by path + method + presence of query parameter!";
}

@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="foo2")
public @ResponseBody String byParameter(@RequestParam("foo2") String foo2) {
    return "Mapped by path + method + presence of query parameter! (MappingController). Parameter value = " + foo2;
    } 
```

（其代码中的第二个也是参数值，但我认为这并不重要）

问题是，当我单击第二个链接时，我收到一个错误，并且在堆栈跟踪中我有以下错误消息：

**2012 年 11 月 24 日下午 7:56:42 org.apache.catalina.core.StandardWrapperValve 调用严重：servlet [appServlet] 在路径 [/spring-mvc-showcase] 的上下文中的 Servlet.service() 引发异常 [请求处理失败; 嵌套异常是 java.lang.IllegalStateException：映射为 HTTP 路径“http://localhost:8080/spring-mvc-showcase/mapping/parameter”的不明确处理程序方法：{public java.lang.String org.springframework.samples.mvc .mapping.MappingController.byParameter(java.lang.String), public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameterNegation()}] 与根本原因 java.lang.IllegalStateException：映射的不明确的处理程序方法对于 HTTP 路径“http://localhost:8080/spring-mvc-showcase/mapping/parameter”：{public java.lang.String org.springframework.samples.mvc.mapping.MappingController.**

应用程序似乎无法理解路径**“/mapping/parameter”**使用哪种方法，但为什么呢？

第一种方法带有 @RequestMapping 注释，明确指定必须处理对“/mapping/parameter”文件夹的 HTTP 请求并具有名为**foo**的参数，第二个方法是带有 @RequestMapping 的注释，表示必须处理 HTTP 请求“/mapping/parameter”文件夹并具有名为**foo2**的参数...我不认为这是一个模棱两可的情况

我认为问题不在于这两种方法具有相同的名称，因为它们具有不同的签名，所以它们是两种不同的方法......（我也尝试过重命名第二种方法，但问题仍然存在）

另外，一个奇怪的想法是，如果我单击第一个链接（生成带有名为“foo”的参数的 HTTP 请求的链接），它会被第一种方法正确处理......为什么这不是模棱两可？！？！

我该如何解决？

非常感谢

安德烈亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T11:14:19.577

您的代码是正确的！问题必须在代码中的其他地方。我已经构建了一个简单的项目并复制了您的代码片段，并且它没有任何问题！

[您可以从这里](http://www.4shared.com/zip/47MJG-q7/MvcParamTest.html)下载我的示例（它是一个 Eclipse Maven 项目）。

*我认为您的问题是您可能忽略了第三种方法或第二个控制器。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T15:04:57.983

[这看起来像stackoverflow.com/questions/8954426](https://stackoverflow.com/q/8954426/3271406)的副本。

您的案例的解决方案：

```
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params={"foo", "!foo2"})
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params={"foo2", "!foo"}) 
```

请参阅[我的完整答案以获取解释](https://stackoverflow.com/a/24084695/3271406)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:37:35.037

检查有关使用“参数”的 api。

> 在 Servlet 环境中，参数映射被视为在类型级别强制执行的限制。**主路径映射（即指定的 URI 值）仍然必须唯一标识目标处理程序**，参数映射仅表示调用处理程序的先决条件。

# objective-c - objectForKeyedSubscript：在 iOS 5.1 上崩溃

> ID：13544629
> 
> 赞同：0
> 
> 时间：2012-11-24T19:14:22.183
> 
> 标签：objective-c, ios5, ios6

我正在运行一些执行 [NSDictionary objectForKeyedSubscript:] 的代码，它在 iOS 5 上崩溃，但在 iOS 6 上没有崩溃。我正在使用 xcode 4.5.2 并针对 iOS 6.0 SDK 进行编译。

我认为这可以在 iOS 5 上运行，因为它只是一个编译器功能？我错了吗？我可以编写我自己的这些函数版本，但我担心其他地方出了问题，因为我希望它能够工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:25:10.107

好的，我将回答我自己的问题，尽管我不完全理解它失败的原因。

使用`objectForKeyedSubscript:`等在 iOS 5 中运行良好（只要它是针对 iOS 6 SDK 编译的）。

问题是我命名了一个函数，并且由于找不到该方法而在该函数中 `+(void)load`进行调用会导致断言。`objectForKeyedSubscript:`

这是我的命名错误，因为在应用程序完全运行之前调用了加载方法。我已经更改了函数的名称，一切都很好。

我假设 +load 在完全启动 NSDictionary 之前被调用。奇怪的是它在 iOS 6 下工作，而不是在 iOS 5 下工作。

也许这并不奇怪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T19:24:15.547

[Apple 开发人员中 IOS 的 NSDictionary 参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

在 iOS 6.0 及更高版本中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T04:22:12.323

iOS6 之前的 SDK 有一个解决方法

在这里结帐问题：[有什么方法可以在 Xcode 4.4 中获得简洁的 Objective-C 文字索引功能？](https://stackoverflow.com/questions/11694877/is-there-any-way-to-get-the-neat-objective-c-literal-indexing-feature-in-xcode-4)

# ios - UIKeyboard 的 Frame 偏移 20 像素

> ID：13544632
> 
> 赞同：0
> 
> 时间：2012-11-24T19:14:38.830
> 
> 标签：ios, uikeyboard

我需要有人向我解释这一点，因为这没有任何意义。

`userInfo`从使用中获取 UIKeyboards 框架`UIKeyboardFrameEndUserInfoKey`并进行数学运算以使视图看起来像是堆叠在键盘顶部时，我需要相差 20 像素。

数学：

```
CGRect frame = view.frame;
CGPoint origin = frame.origin;
origin.x = kbFrame.origin.x;
origin.y = kbFrame.origin.y - view.frame.size.height - 20;
frame.origin = origin;
view.frame = frame; 
```

我认为它一定是状态栏，但这是踢球者，我正在视网膜显示器上开发，所以状态栏的高度是 40 像素而不是 20。

然后我添加了从视图到视图的转换

```
CGRect kbFrame = [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];

UIWindow * window = [UIApplication sharedApplication].windows[0];

kbFrame = [self.view convertRect:kbFrame fromView:window]; 
```

这似乎是固定的；也就是说，我可以消除 20 像素的差异。

真正让我震惊的是，在使用时`UIKeyboardFrameBeginUserInfoKey`，键盘的框架位于屏幕底部，这是正确的，但结束框架导致我编码了 20 像素的差异。当我添加转换代码时，它会将键盘向上 20 像素，从而消除差异。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:26:33.953

您所描述的是自然和想要的行为。
问题是键盘坐标在窗口坐标系中。
您的视图可能不在窗口坐标系中。所以你总是需要在坐标系之间进行转换才能正确使用它。

> 真正让我震惊的是，当使用 UIKeyboardFrameBeginUserInfoKey 时，键盘的框架位于屏幕底部，这是正确的，

我不同意，您可能比您认为的低 20 点（如果您在视图坐标系中设置它），但由于它不在屏幕上，您不会注意到偏移量。

每个视图都有自己的坐标系，位于其范围内。并且视图的框架在其父坐标系中表示。如果我们不理解这种差异的原因和必要性，这也会导致一些混乱。

我希望这能帮到您。

**关于 Retina 显示和测量的注意事项：**
在 iOS 上，您永远不会在代码中处理 Pixel（仅在准备资产时），您总是处理 Point。所以状态栏总是 20 点，无论是否在 Retina 上。

# javascript - 使用 JavaScript 禁用表单元素

> ID：13544636
> 
> 赞同：1
> 
> 时间：2012-11-24T19:15:00.310
> 
> 标签：javascript, html

我有这样的表格： -

```
<form id="form" name="form" action="banner_ad_post.php" method="post" enctype="multipart/form-data">
                <p>
                  <label for="banner_name"><font color="#FF0000"> * </font>Banner Name: </label>
                  <input type="text" name="banner_name" id="banner_name" value="" maxlength="100" required="required"/>
                </p>
                <p>
                  <label for="Banner_website_url"><font color="#FF0000"> * </font>Banner website Url: </label>
                  <input type="url" name="banner_site_url" id="banner_site_url" value="" maxlength="100" required="required"/>
                </p>

                <p>
                  <label for="banner_image_url">Banner Image Url: </label>
                  <input type="file" name="file" id="file" value="" accept="image" placeholder="Browse from hard disk" onchange="img_path()"/> &nbsp;
                   <font color="#FF0000"> OR</font> &nbsp;
                  <input type="url" name="banner_image_url" id="banner_image_url" value="" maxlength="100" placeholder="Enter the url from website." onchange="validate()"/> &nbsp; 

                </p>
                <p>
                <label for="submit"> </label>
                  <input type="submit" id="submit" name="submit" value="Submit" />
                </p>
              </form> 
```

JavaScript 代码如下： -

```
<script>

    function validate()
    {
    var banner_name=document.getElementById("banner_name");
    var banner_site_url=document.getElementById("banner_site_url");
    var banner_file=document.getElementById("file");
    var banner_image_url=document.getElementById("banner_image_url");
    //var x=banner_file.value;
    //var y=banner_image_url.value;
    if((banner_file.value=true) && (banner_image_url.value=true))
        {
        alert("Please choose only one field either url or image uploading.");
        document.getElementById("form").reset();

        }
    }

    function img_path()
    {
    var file_path=document.getElementById('file').value;
    if(file_path.match(".jpeg$")==".jpeg" || file_path.match(".gif$")==".gif" || file_path.match(".GIF$")==".GIF" || file_path.match(".JPEG$")  ==".JPEG" || file_path.match(".JPG$")==".JPG" ||file_path.match(".jpg$")==".jpg" || file_path.match(".png$")==".png" || file_path.match(".PNG$")==".PNG")
    {
      return true;
    }
   else
   {
   alert("Upload  .jpg/.gif/png  file olny");
   document.getElementById("form").reset();
   return false;
   }

}
</script> 
```

现在，问题是，每当我尝试在表单中输入唯一的图像 url 时。它会生成一条警告消息，说明“（请仅选择一个字段，网址或图片上传）”。但是根据我的定义，只有在归档的banner_image_url和文件都设置为true时才应该显示消息。

任何帮助将不胜感激......
提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:19:55.130

您需要使用 == 而不是 =

```
if((banner_file.value==true) && (banner_image_url.value==true)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:20:21.593

这样做：

```
banner_file.value=true 
```

设置 的值，`banner_file.value`并**无条件**返回。`true`

 **这不是您想要的，因为您想检查`banner_file.value`.

另一方面，这样做：

```
banner_file.value==true 
```

`true`仅当 的值`banner_file.value`计算为时才返回`true`。这*就是*你想要做的。

尝试以下更改：

```
if((banner_file.value) && (banner_image_url.value)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:20:58.630

这个：

```
if((banner_file.value=true) && (banner_image_url.value=true)) 
```

应该：

```
if((banner_file.value == true) && (banner_image_url.value == true)) 
```

因为，在您的代码中，您将变量设置为 true 而不是检查它是否为 true。但是，如果您想要尽可能少的代码，您可以编写：

```
if(banner_file.value && banner_image_url.value) 
```

显式测试`== true`是多余的 - 但它可以使代码对某些人来说更具可读性。只是想我会提到它，以防你发现最后一个例子更干净:)**

# python - 如何检查数组是否是二维的

> ID：13544639
> 
> 赞同：13
> 
> 时间：2012-11-24T19:15:14.617
> 
> 标签：python, numpy

我从这样的文件中`loadtxt`读取

```
data = loadtxt(filename) # id x1 y1 x2 y2 
```

`data`可能看起来像

```
array([[   4\.      ,  104.442848, -130.422137,  104.442848,  130.422137],
   [   5\.      ,    1\.      ,    2\.      ,    3\.      ,    4\.      ]]) 
```

然后我可以减少`data`到属于某个`id`数字的行：

```
d = data [ data[:,0] == id] 
```

这里的问题是数据只包含一行。

所以我的问题是如何检查我的数组的二维`data`？

我试着检查

```
data.shape[0]  # num of lines 
```

但对于单线我得到类似的东西`(n, )`，所以这不起作用。

任何想法如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T19:16:29.280

[data.ndim](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ndim.html)给出了数组的维度（numpy 称之为的数量`axes`）。

* * *

正如您已经观察到的，当数据文件只有一行时，`np.loadtxt` 返回一维数组。当数据文件超过一行时，`np.loadtxt` 返回一个二维数组。

确保`data`2D 的最简单方法是传递`ndmin=2`给`loadtxt`：

```
data = np.loadtxt(filename, ndmin=2) 
```

该`ndmin`参数是在 NumPy 版本 1.6.0 中添加的。对于旧版本，您可以使用[np.atleast_2d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.atleast_2d.html)：

```
data = np.atleast_2d(np.loadtxt(filename)) 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-06T03:02:51.730

您始终可以使用`len(array)`函数检查数组的维度。

**示例 1：**

```
data = [[1,2],[3,4]]
if len(data) == 1:
   print('1-D array')
if len(data) == 2:
   print('2-D array')
if len(data) == 3:
   print('3-D array') 
```

**输出：**

```
2-D array 
```

如果您的数组是**Numpy 数组**，您可以使用`len(array.shape)`.

**示例 2：**

```
import Numpy as np
data = np.asarray([[1,2],[3,4]])
if len(data.shape) == 1:
   print('1-D array')
if len(data.shape) == 2:
   print('2-D array')
if len(data.shape) == 3:
   print('3-D array') 
```

**输出：**

```
2-D array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T06:03:37.760

另一种方式：

寻找array.shape：

如果它像 (2,) 表示首先是数字，但在逗号之后什么都没有，它的 1D。否则，如果它像 (2,10) 表示两位带逗号的数字，它是 2D。同样，逗号有多少位可用，它是多维数组。

简单的“array.shape”将帮助您了解这一点。

# vim - Vim: 状态栏 '%V' 是如何工作的？

> ID：13544640
> 
> 赞同：10
> 
> 时间：2012-11-24T19:15:26.617
> 
> 标签：vim, statusline

这是一个我无法找到答案的 Vim 问题。statusline 变量有什么作用`%V`？

我检查了我能找到的文档，但不是很清楚，我知道它显示了虚拟列，但是前面的数字/字母`-`是什么意思？

例如，以下各项的含义是什么？

```
0-1
17-18 
```

等等。在我能管理的范围内，同时找到这些例子。之前的数字`-`是最后一个实心列，换句话说就是实列。这个对吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T19:41:29.113

在 Vim`statusline`中，您可以设置许多标志，其中存在：

*   `%c`-- 列号，即字节数。
*   `%v`和`%V`-- 虚拟列号，即屏幕上的列号。

那么实际列号和虚拟列号有什么区别呢？答案是，当使用制表符时，虚拟列号是您当前列号的近似值，*就好像*您使用的是空格而不是制表符一样。

例子。Vim 状态行中一个有用的组合是：

```
%c%V 
```

正如它在帮助中所说，显示*虚拟*列号的 %V 标志只会在它与实际列号不同时打印（带有前面的破折号）。因此，通常您的状态行将只显示实际的列号（例如，`8`），但如果您位于带有制表符或多字节字符的行上，您将看到两个数字（例如`1-8`）。

例如，试试这个：

```
echo -e "\tHello world." > /tmp/test 
```

然后，`/tmp/test`在 Vim 中打开并注意您的状态行，指示实际列和虚拟列之间的差异。如果将`tabstop`设置更改为不同的值，则虚拟列将更改。

最后，如果你`:set expandtab`和 do `:retab`，那么虚拟列指示器将被隐藏。

# php - 像在我的网站上一样在 Facebook 上增加 PHP 变量

> ID：13544641
> 
> 赞同：1
> 
> 时间：2012-11-24T19:15:36.767
> 
> 标签：php, facebook-graph-api, facebook-like

> **可能重复：**
> [单击 facebook like 按钮后如何重定向？](https://stackoverflow.com/questions/6886102/how-can-i-redirect-once-facebook-like-button-is-clicked)

我的网站上有很多 facebook 的粉丝页面，例如按钮，当有人喜欢我网页上的任何特定粉丝页面时，我想增加一个 php 变量 $counter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:21:09.027

您应该创建一个 Facebook APP，然后使用 Javscript SDK：[https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

`edge.create`导入 SDK 后，您应该使用此代码订阅以下事件：

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

这将在用户按下类似按钮之一时执行。如您所见，该`response`变量包含“*喜欢*”的 url，您应该通过 AJAX 调用将其传递给 PHP 脚本，如果该 URL 是您页面的有效 URL，您可以增加您的 PHP 变量。

您可以在此处查看所有 Facebook 事件[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# haskell - 阴谋集团 FFI 依赖

> ID：13544642
> 
> 赞同：15
> 
> 时间：2012-11-24T19:15:45.957
> 
> 标签：haskell, cabal, ffi, conio

我正在 Windows 中制作一个小型 Haskell 游戏，我想在用户每次按键时做出响应。因为在 Windows 上的`getChar` [行为很奇怪](http://hackage.haskell.org/trac/ghc/ticket/2189)，所以我使用 FFI 来访问`getch`in ，如此[处](https://stackoverflow.com/questions/2983974/haskell-read-input-character-from-console-immediately-not-after-newline)`conio.h`所述。相关代码为：

```
foreign import ccall unsafe "conio.h getch" c_getch :: IO CInt 
```

当我在 ghci 中运行它或用 ghc 编译它时，这很好用。我也想尝试用它制作一个 cabal 包，所以从[这个](https://stackoverflow.com/questions/4959802/how-to-specify-dependency-on-external-c-library-in-cabal)问题扩展，我在我的 cabal 文件中包含以下内容：

```
...
executable noughts
  Includes:          conio.h
  Extra-libraries    conio
... 
```

但是当我运行时`cabal configure`，它告诉我：

```
cabal: Missing dependency on a foreign library:
* Missing C library: conio 
```

这是有道理的，因为在我的haskell平台目录下，该目录下`...\Haskell Platform\2012.4.0.0\mingw`有一个`conio.h`文件`include`，但没有其他`conio`文件提供目标代码。

我这样做的方式是否正确，如果是这样，我怎样才能找出要包含在我的 cabal 文件中的库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T11:13:29.410

首先，C 头文件和库之间并不总是存在一对一的映射。在这种情况下，`conio.h`可以在各种运行时库中找到其中声明的函数，例如`crtdll`(deprecated) 或`msvcrt`(preferred, I guess)。

使用 Windows 上的 Haskell 平台，Cabal 将在（在您的 Haskell 平台目录下）查找这些库`.\mingw\lib`：如果您要求`msvcrt`，它会查找`.\mingw\lib\libmsvcrt.a`. 这个特定的库应该已经随您的 Haskell 平台一起提供。（如果你想用文件指向其他目录`lib*.a`，你可以使用 Cabal 的`--extra-lib-dirs`选项。）

一个小例子如下；这是`Main.hs`：

```
{-# LANGUAGE ForeignFunctionInterface #-}
import Foreign.C.Types
foreign import ccall unsafe "conio.h _putch" c_putch :: CInt -> IO ()

main :: IO ()
main = do
    c_putch . toEnum . fromEnum $ '!'
    c_putch . toEnum . fromEnum $ '\n' 
```

这将是`something-awesome.cabal`：

```
name:                something-awesome
version:             0.1.0.0
build-type:          Simple
cabal-version:       >=1.8

executable yay
  main-is:             Main.hs
  build-depends:       base ==4.5.*

  includes:            conio.h
  extra-libraries:     msvcrt 
```

这应该可以正常工作：

```
c:\tmp\something-awesome> dir /B
Main.hs
something-awesome.cabal

c:\tmp\something-awesome> cabal configure
Resolving dependencies...
Configuring something-awesome-0.1.0.0...

c:\tmp\something-awesome> cabal build
Building something-awesome-0.1.0.0...
Preprocessing executable 'yay' for something-awesome-0.1.0.0...
[1 of 1] Compiling Main             ( Main.hs, dist\build\yay\yay-tmp\Main.o )
Linking dist\build\yay\yay.exe ...

c:\tmp\something-awesome> dist\build\yay\yay.exe
! 
```

# php - wordpress 分页地址

> ID：13544643
> 
> 赞同：0
> 
> 时间：2012-11-24T19:15:46.363
> 
> 标签：php, wordpress, pagination

我为 wordpress 进行了分页，网址类似于`Address.com/page/1` `Address.com/page/2`，但是当我单击要转移到的链接时`404.php`，我的永久链接设置为：`/%postname%/`。我认为该错误位于永久链接中，也许有人知道出了什么问题。

分页代码：

```
function pagination( $query, $baseURL = '' ) {  
    if ( ! $baseURL ) $baseURL = get_bloginfo( 'url' );  
    $page = $query->query_vars["paged"];  
    if ( !$page ) $page = 1;  
    $qs = $_SERVER["QUERY_STRING"] ? "?".$_SERVER["QUERY_STRING"] : "";  
    // Only necessary if there's more posts than posts-per-page  
    if ( $query->found_posts > $query->query_vars["posts_per_page"] ) {  

        echo '<ul class="paging">'; 
        // Previous link? 
        if ( $page > 1 ) { 
            echo '<li class="previous"><a href="'.$baseURL.'/page/'.($page-1).'/'.$qs.'">ˠprevious</a></li>'; 
        } 
        // Loop through pages 
        for ( $i=1; $i <= $query->max_num_pages; $i++ ) { 
            // Current page or linked page? 
            if ( $i == $page ) { 
                echo '<li class="active">'.$i.'</li>'; 
            } else { 
                echo '<li><a href="'.$baseURL.'/page/'.$i.'/'.$qs.'">'.$i.'</a></li>'; 
            } 
        } 
        // Next link? 
        if ( $page < $query->max_num_pages ) { 
            echo '<li><a href="'.$baseURL.'/page/'.($page+1).'/'.$qs.'">next</a></li>';
        } 
        echo '</ul>';  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:13:11.983

这是一个使用 WP 函数的示例。您可以将其设为函数或在每页末尾尝试以替换问题中的函数：

```
global $wp_query;
$big = 999999999; // need an unlikely integer
echo paginate_links( array( 'base'    => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
                            'format'  => '?paged=%#%',
                            'current' => max( 1, get_query_var( 'paged' ) ),
                            'total'   => $wp_query->max_num_pages,
                            'end_size'=> 1,
                            'mid_size'=> 10 ) ); 
```

# cakephp - cakephp 模型关联 - 查找父模型的其他子模型

> ID：13544644
> 
> 赞同：1
> 
> 时间：2012-11-24T19:15:46.923
> 
> 标签：cakephp

我有关联：

*   产品 -> hasMany -> ProductOption
*   产品 -> hasMany -> ProductImage

我想用 ProductOption.id 找到包括 ProductImage 在内的产品数据

当我这样做时：

```
$this->Basket->Product->ProductOption->find('first',array(
    'contain' => array(
        'Product' => array(
            'ProductOption' => array(
                'conditions' => array('ProductOption.id = '.$id)
            ),
            'ProductImage'
        )
    )
)); 
```

我明白了：

```
array(
    'ProductOption' => array(
        'id' => '46',
        'product_id' => '9',
    ),
    'Product' => array(
        'id' => '9',
        'name' => 'Some product',
    )
) 
```

这是我想要的大部分内容，但没有包含“ProductImage”。我如何在数组中得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:25:10.310

我认为你使用了太多的递归。如果您在 Product 上使用 Containable，请对其进行查询，而不是 ProductOption，如下所示：

```
$this->Basket->Product->find('first',array(
  'contain' => array(        
    'ProductOption' => array(
            'conditions' => array('ProductOption.id = '.$id)
    ),
    'ProductImage'
  )    
)); 
```

并且不需要在“包含”数组上使用 Product，它已经被猜到了。

（我没有尝试过，但几乎可以肯定）

# ruby-on-rails-3 - Twitter-bootstrap 侧边栏 (span4) 位于主要元素 (span8) 下

> ID：13544658
> 
> 赞同：0
> 
> 时间：2012-11-24T19:17:00.717
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, responsive-design, sidebar

我在我的 Rails 应用程序中使用 twitter-bootstrap

我正在关注本教程：[http ://untame.net/2012/08/twitter-bootstrap-build-a-stunning-two-column-blog/](http://untame.net/2012/08/twitter-bootstrap-build-a-stunning-two-column-blog/)

我有一个`span 8`带有`span4`小部件侧边栏 的相同主要元素

但由于某些原因，它看起来像这样：[http ://s11.postimage.org/y2cf9wlrn/Bootstrap_Sidebar_fail.png](http://s11.postimage.org/y2cf9wlrn/Bootstrap_Sidebar_fail.png)

有谁知道发生了什么？我试图增加容器大小并降低主要元素跨度大小，但这无济于事

顺便说一句，该应用程序是响应式的

这是我的布局文件的外观

```
<div class="navbar navbar-inverse navbar-fixed-top">
  #navbar removed for clearer code
</div><!-- end of Navbar -->

<div class="container">

  <div id="myCarousel" class="carousel slide">
     #carousel removed for clearer code
  </div> <!-- Carousel items -->

<div id="user_nav" float="left">      
 #removed for clearer code
</div><!-- Flash messages-->

<div class="row">   
  <div class="span8">

    <div class="hero-unit">
      <!-- page specific content is loaded here -->
      <%= yield %>
    </div>

  </div><!-- end main area -->

  <aside class="span4"><!-- Sidebar starts here  -->    
    <div class="row">

        <div class="widget span4">
           #widget removed
        </div><!-- end widget -->

      </div><!-- end widget row -->
    </aside><!-- end sidebar -->
  </div><!-- end row -->
  #footer removed
</div><!-- end container --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:11:07.543

it seemed like you had some opened div tags that werent closed.. so checking your source for that would help it as the layout you posted seems to be correct

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:00:23.203

你确定你的“.span8”和“.span4”元素在“.container > .row”里面吗？

```
<div class="container">
   <div class="row">
       <div class="span8">...</div>
       <div class="span4">...</div>
   </div>
</div> 
```

# mobile - 最适合开发者的移动生态圈

> ID：13544659
> 
> 赞同：1
> 
> 时间：2012-11-24T19:17:00.903
> 
> 标签：mobile

现在有了Windows 8开发环境，我感兴趣的是对三大移动生态圈的实际比较；从开发的角度来看，Windows Phone、IOS 和 Android。

要考虑的客观事物是...

*   购买成本（Visual Studio、Apple Developers group 等的价格）。
*   每个领域的应用程序实际花费的百分比。
*   支付给 App Store 的销售额百分比。
*   开发语言的实际功能，例如实现类似功能的代码行数和类数。
*   软件从操作系统发布到发布的可维护性（例如适应新屏幕分辨率的难易程度）。
*   模拟和测试框架库和 IDE 集成的可用性和完整性。

基于可衡量的事实，每个人对开发人员的友好程度如何？以何种方式？

# wordpress - 如何在 $.ajax 函数中使用 backstretch 插件方法

> ID：13544664
> 
> 赞同：2
> 
> 时间：2012-11-24T19:17:45.757
> 
> 标签：wordpress, jquery, responsive-design, jquery-backstretch

我正在开发一个响应式 Wordpress 主题的 Instagram 画廊，并发现了一些我需要帮助的问题。

我正在使用 ajax 和 jsonp 获取 Instagram 提要，并将结果附加到几个空 div 中。我正在使用的简化代码是：

```
 $.ajax({
      type: "GET",
      dataType: "jsonp",
      cache: false,
      url: "https://api.instagram.com/accesstoken",
      success: function(data) {
          for (var i = 0; i < 7; i++) {
                          var boxitem = "#instabox" + i;
              $(boxitem).append("<a target='_blank' href='" + data.data[i].link +"'><img src='" + data.data[i].images.low_resolution.url +"'/></a>");
    }
    } 
```

此脚本将每张 Instagram 图片分配给特定的 div（“id=instabox1”、“id=instabox2”等）。这段代码运行良好。

现在我想使用 jQuery [Backstretch 插件](http://srobbin.com/jquery-plugins/backstretch/)使图片具有响应性。为了使它工作，我只需要使用代码：

```
 $("#instabox0").backstretch("http://server/instagrampicture.jpg"); 
```

这行代码工作正常，以便 backstretch.js 正确加载并正常工作。

所以这是我遇到的问题。我想从 Instagram 获取最新照片，并通过将它们动态分配给 backstretch 插件来使它们具有响应性。我尝试的第一件事是在成功部分中调用 ajax 函数中的 backstretch 方法：

```
 $.ajax({
      type: "GET",
      dataType: "jsonp",
      cache: false,
      url: "https://api.instagram.com/accesstoken",
      success: function(data) {
          for (var i = 0; i < 7; i++) {
                      var boxitem = "#instabox" + i;
          $(boxitem).backstretch(data.data[i].images.low_resolution.url);             
    } } 
```

鉴于 data.data[i].images.low_resolution.url 给出了图像的正确路径，我认为这会将 backstretch 方法应用于 boxitem (#instabox0, #instabox1, ...) 定义的 id，以便div 将按顺序填充。

那是不起作用的部分，给出错误： Uncaught TypeError: Object [object Object] has no method 'backstretch'

因此，如果我在 $.ajax 函数之外使用 .backstretch 方法，它可以正常工作（但是我没有得到 Instagram 图片的动态路径）。

如果我在 $.ajax 函数中使用 .backstretch 方法，它会给出提到的错误。

我已经尝试了很多事情，比如动态地将后伸图像的代码行编写为字符串，将它们存储在数组中并在 ajax 函数之外，对其进行评估：

```
 strScript = '$("#instabox' + i + '").backstretch("' + data.data[i].images.low_resolution.url + '");';
    eval(strScript); 
```

但我总是收到“没有方法'backstretch'”错误消息。

我还创建了一个脚本部分，并使用适当的后伸动态生成的代码填充它，例如：

```
 <script>
    $("#instabox0").backstretch("http://server/instagrampicture0.jpg");
    $("#instabox1").backstretch("http://server/instagrampicture1.jpg");
    </script> 
```

但是当页面加载时它不会执行。

有什么帮助吗？如何在 Ajax jsonp 函数中使用 .backstretch 方法？如果我使用不同的方法来获取 Instagram 照片会更容易吗？我可以创建脚本部分，但是，当页面已经加载时，如何执行它？

非常感谢，我不是专业的程序员，所以我有点卡在这个问题上。我可能忽略了一些对你们来说显而易见的事情，但我已经尝试解决它好几天了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:10:31.933

我要做的是在 Ajax 循环内构建一个图像 URL 数组，您可以在调用时在 .backstretch() 工作的外部使用这些 URL。

```
var images = [];
success: function(data) {
    for (var i = 0; i < 7; i++) {
        images.push(data.data[i].images.low_resolution.url); 
    }            
}
$.each(images, function(index, value) {
    var boxitem = "#instabox" + index;
    $(boxitem).backstretch(value);
}); 
```

# java - Web Java 变量重置

> ID：13544667
> 
> 赞同：2
> 
> 时间：2012-11-24T19:18:02.793
> 
> 标签：java, ajax, hibernate, jsp, struts2

我用 Hibernate 和 Struts 2 在 Java 中使用 Ajax 制作了网站。基本上，当我创建时，修改任何本地内容（在 .java 中），例如将值分配给`int`，在下次检查时对其`null`. 每次都会发生这种情况。

这是`struts.xml`我的大部分页面都是这样出价的：

```
<action name="showclient" class="modelClass.LogInObject" method="show">
    <result name="success" >/MyAccount.jsp</result>
</action> 
```

Client 只是一个实现了 CRUD 的 bin 类：

```
public class Client extends ActionSupport   {

private static final long serialVersionUID = 1L;
private Long idClient;
private String login;
private String password;
private String nom;
private String prenom;
private String adresse;
private String ville;
private int cPostal;
private String email;
private Set<Commande> panier = new HashSet<Commande>(0);
//  private static final Logger logger = Logger.getLogger(Client.class.getName());

public static Client logIn(String login, String password)
{
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    String qstr = "SELECT * FROM client";
    Query query = session.createSQLQuery(qstr).addEntity(Client.class);
    List<Client> list = (List<Client>)query.list();
    Iterator<Client> it = list.iterator();
    while (it.hasNext())
    {
        Client client = it.next();
        if (client.getLogin().compareTo(login) == 0 &&
            client.getPassword().compareTo(password) == 0)
            return client;
    }
    return null;
} 
```

`LogInObject`: _

```
public class LogInObject extends ActionSupport   {
private static final long serialVersionUID = 1L;
private Long    loggedInId;
private String  login;
private String  password;
private String  confirmPassword;
private String  error;
public Client   client;

public  String login()
{
    Client client = null;
    if ((client = Client.read(Client.logIn(this.login, this.password).getIdClient())) != null)
    {
        this.client = client;
        return SUCCESS;
    }
    this.login = "";
    this.password = "";
    this.error = "Bad login or password";
    return ERROR;
}

public  String  show()
{
    System.out.println(this.getClient().getIdClient());
    return SUCCESS;
} 
```

最后是主要课程：

```
public class MainActionObject extends ActionSupport   {
private static final long serialVersionUID = 1L;
private boolean logged;
private String  search;

List<Produit>   listProduit;

LogInObject     loginObject;

public String login()
{
    if (this.loginObject.login() == SUCCESS)
    {
        this.setLogged(true);
        return SUCCESS;
    }
    return ERROR;
}
} 
```

因此，在初始化时从 SQL 库读取的客户端的`show()`in prints id 我将它打印到页面上的所有信息 r 那里，毕竟它不再存在。即使我以任何可能的方式备份 id 。我知道 CRUD 的含义，所以不要告诉我它是正常的。`loginobject``.jsp`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:13:16.943

好的，您的操作需要`extends ActionSupport implements ServletRequestAware`

当您的客户成功登录时

```
public  String login()
{
  ...
  getServletRequest().getSession().setAttribute("idClient", client.getIdClient()); 

public  String  show()
{
  System.out.println(getServletRequest().getSession().getAttribute("idClient")); 
```

# java - 如何在 Java 的一个包中使用多个类？

> ID：13544677
> 
> 赞同：2
> 
> 时间：2012-11-24T19:19:39.687
> 
> 标签：java

说我有以下两个课程：

```
package MyShape;

public abstract class Shapeclass {
    public abstract double area(double radius);

    protected void print(double area) {
        System.out.print("Area is:" + area);
    }
} 
```

还有另一个类 Triangle ；

```
package MyShape;

public class Triangle extends Shapeclass {
    double area;

    public double area(double radius) {
        return radius * radius;
    }

    public void print() {
        super.print(area);
    }
} 
```

我已将两个类放在名为 MyShape 的同一文件夹中但是当我尝试编译 Triangle 类编译器时显示以下错误；

```
C:\Users\Desktop\MyShape\Triangle.java:3: error: cannot find symbol
public class Triangle extends Shapeclass
                              ^
  symbol: class Shapeclass
C:\Users\Desktop\MyShape\Triangle.java:13: error: cannot find symbol
super.print(area);
^
  symbol:   variable super
  location: class Triangle 
```

请帮我解决？从过去的几个小时开始我就一直在想它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:54:18.280

只要它们在同一个文件夹和包中，就可以了。

但是，我将对您的课程进行以下更改：

1.  重命名`Shapeclass`为`Shape`... 我们*知道*它已经是一个类了。将“类”放在类名中不会增加任何价值
2.  由于您需要子类来声明一个方法，请从您的方法`area()`中调用*它*`print()`
3.  如果需要，不要将`area`值存储在area()` 方法中`your shape - just call the`

进行这些更改可以大大简化您的代码：

```
public abstract class Shape {
    public abstract double area(double radius);

    protected void print() { // don't pass anything in!
        System.out.print("Area is:" + area()); // call the area() method
    }
}

public class Triangle extends Shape {
    double radius; // triangles don't have radii, you'll need to store something else

    public double area() {
        return radius * radius; // This is a questionable calculation. fix it
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:20:52.627

**从 C:\Users\Desktop ...**

```
javac -cp . MyShape\Triangle.java 
```

**或者，如果您不在 C:\Users\Desktop ...**

```
javac -cp C:\Users\Desktop C:\Users\Desktop\MyShape\Triangle.java 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:43:11.263

1.  验证*文件名与**类*名匹配，每个字母的大小写完全一致。

2.  验证您*当前的工作目录 (CWD)*是否位于包层次结构的根目录；根据您的编译器输出，即“C:\Users\Desktop”。这样编译器就可以找到包路径“MyShape”作为直接子目录。

3.  指定完全限定的包\类名 (MyShape\Triangle) 作为要编译的文件名。

因此，将 CWD 显示为提示符和 javac 命令的命令行可能如下所示：

> C:\Users\Desktop> javac MyShape\Triangle

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T05:16:55.433

从终端编译软件包时，您的工作目录应该是制作软件包的目录。（在这种情况下是桌面）

因此，当您在**C:\Users\Desktop**`javac MyShape.*.java`中时，请使用 类似的方式编译代码并运行代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T19:21:49.077

你提到过

> 我已将这两个类放在名为 MyShape 的单独文件夹中

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html)，将两个类都放在同一个文件夹中是必需的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T19:24:24.083

如果您使用基本的 javac，ShapeClass 和 Triangle 类都需要在同一个文件夹中

如果您将它们放在不同的文件夹中，则需要使用`-d`javac 选项来指定目录。有关详细信息，请参阅此处：[javac](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)

因此，建议将两个文件保存在同一个文件夹 MyShape 中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-22T16:21:28.270

单个包中的两个类的程序这是具有两个类的包的代码：-

```
package pack;

class pack_add_sub
{
        public void ad (int x , int y)
              {
              System.out.println("The Add of  "+x+" & "+y+" is :- "+(x+y));
              }
} 

public class pack_add_subb extends pack_add_sub
{
         public void su (int x, int y) 
               {
               super.ad(x,y);
               System.out.println("The Sub of  "+x+" & "+y+" is :- "+(x-y));
               }
} 
```

现在我们编译它并将类文件保存在包名文件夹中。在 bin 文件夹中创建。

现在，这是调用在包中创建的两个类的代码：-

```
import java.io.*;
import java.util.*;
import pack.pack_add_subb;

class calling_pack_add_subb
{
     public static void main (String arr[])
         {
             int a,b;
             Scanner ob = new Scanner (System.in); 
             System.out.println("Enter the same value for add and sub :-");
             a=ob.nextInt();
             b=ob.nextInt();

             pack_add_subb ob1 = new pack_add_subb ();
             ob1.su(a,b);
         }
} 
```

# c++ - directxtutorial.com 教程不会在 g++ 中编译

> ID：13544678
> 
> 赞同：1
> 
> 时间：2012-11-24T19:19:49.017
> 
> 标签：c++, compiler-construction, compiler-errors

我希望我可以在某处调整编译器设置。我尝试在这里编译源代码：[http ://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-1](http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-1)

它将在 Visual Studio 2010 中编译，但是当我尝试通过 netbeans 在 g++ 中编译时，它给了我这些错误

```
"/usr/bin/make" -f nbproject/Makefile-Release.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/c/Users/Stephen/Documents/Projects/C++/test'
"/usr/bin/make"  -f nbproject/Makefile-Release.mk dist/Release/Cygwin-Windows/test.exe
make[2]: Entering directory `/cygdrive/c/Users/Stephen/Documents/Projects/C++/test'
mkdir -p build/Release/Cygwin-Windows
rm -f build/Release/Cygwin-Windows/main.o.d
g++.exe    -c -g -MMD -MP -MF build/Release/Cygwin-Windows/main.o.d -o build/Release/Cygwin-Windows/main.o main.cpp
main.cpp: In function `int WinMain(HINSTANCE__*, HINSTANCE__*, CHAR*, int)':
main.cpp:39: error: cannot convert `const wchar_t[12]' to `const CHAR*' in assignment
main.cpp:52: warning: converting to non-pointer type `DWORD' from NULL
main.cpp:52: error: cannot convert `const wchar_t*' to `const CHAR*' for argument `2' to `HWND__* CreateWindowExA(DWORD, const CHAR*, const CHAR*, DWORD, int, int, int, int, HWND__*, HMENU__*, HINSTANCE__*, void*)'
nbproject/Makefile-Release.mk:66: recipe for target `build/Release/Cygwin-Windows/main.o' failed
make[2]: *** [build/Release/Cygwin-Windows/main.o] Error 1
make[2]: Leaving directory `/cygdrive/c/Users/Stephen/Documents/Projects/C++/test'
make[1]: *** [.build-conf] Error 2
nbproject/Makefile-Release.mk:59: recipe for target `.build-conf' failed
make: *** [.build-impl] Error 2
make[1]: Leaving directory `/cygdrive/c/Users/Stephen/Documents/Projects/C++/test'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed

BUILD FAILED (exit value 2, total time: 1s) 
```

我可以轻松摆脱 main.cpp: 39 和 52 错误，其余的不会通过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:23:16.343

将 MinGW 用于 WIN32 源，而不是 Cygwin。

# raphael - 拉斐尔的变换与翻译

> ID：13544681
> 
> 赞同：0
> 
> 时间：2012-11-24T19:19:56.877
> 
> 标签：raphael

我在 raphael 文档中看到 translate 已被贬值并建议改用 transform 。但我的要求是，当我移动一个对象时，我需要将 x、y 或 cx、cy 更新到具有最新值的服务器。这可以使用翻译轻松完成。但如果我使用转换它存储为`Tx,y`. 使用变换时如何获得修改后的x和y？

**例子**

```
console.dir(page1);
var c1 = paper.circle(50,50,3);
c1.transform("T100,100"); 
```

这里的 cx 和 cy 仍然是 50,50 但我需要的值为 100,100

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:24:16.127

transform() 将改变坐标系。如果您只需要“移动”一个形状，那么您只需根据形状更改其位置属性，可以是 cx、cy、x、y。以下是一个 raphael 扩展，它将方法 nt_translate() 和 nt_scale() 添加到形状和集合，并添加了两个自定义属性 translateNT 和 scaleNT 到形状。因此，如果您执行 aCircle.nt_translate(10,10)，则圆的 cx 和 cy 属性将发生变化，并且将在没有 transform() 的情况下进行翻译。希望有帮助！

# php - 使用 smarty 对数组进行排序

> ID：13544683
> 
> 赞同：4
> 
> 时间：2012-11-24T19:20:17.103
> 
> 标签：php, smarty

我需要用 smarty 对数组进行排序。我尝试使用[此代码](http://www.smarty.net/forums/viewtopic.php?p=23628#23628)：

我的前锋：

```
 {foreach $hooks->addblock as $addblock}
  <ul>
  {foreach $addblock|@sortby:"prio" as $value}
    {$value@key}: {$value}
  {/foreach}
  </ul>
 {/foreach} 
```

的 var_dump `$hooks->addblock`：

```
array(5) {
  ["filed_1"]=>
  array(5) {
    ["id"]=>
    string(7) "filed_1"
    ["title"]=>
    string(6) "filed1"
    ["field"]=>
    string(20) "This is test filed 1"
    ["size"]=>
    int(740)
    ["prio"]=>
    int(7)
  }
  ["filed_2"]=>
  array(5) {
    ["id"]=>
    string(7) "filed_2"
    ["title"]=>
    string(6) "filed2"
    ["field"]=>
    string(20) "This is test filed 2"
    ["size"]=>
    int(740)
    ["prio"]=>
    int(6)
  } 
```

所以，我想按值`prio`（num）升序对数组进行排序，但结果不正确！
结果如下：
![输出聪明](../Images/b60a93ec47e37f4b0e448b84508bf60d.png)

我希望“field_2”行是第一个。但我没有找到解决方案。

这是修饰符（modifier.sortby.php）：[http](http://www.smarty.net/forums/viewtopic.php?p=23628#23628) ://www.smarty.net/forums/viewtopic.php?p=23628#23628 我也有一个反复出现的错误：

> [2012 年 11 月 24 日星期六 20:04:52] [错误] [客户端 127.0.0.1] PHP 注意：未初始化的字符串偏移量：/var/www/libs/plugins/modifier.sortby.php(33) 中的 0 ：运行时创建第 1 行的函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T22:23:33.433

> PHP 注意：未初始化的字符串偏移量：/var/www/libs/plugins/modifier.sortby.php(33) 中的 0 ：第 1 行运行时创建的函数

这提供了有关*sortby*修饰符如何工作的线索。

您链接到的文档说：

> '-' 让您以相反的顺序排序，而**# 让您以数字而非字符串排序**（您也可以使用 '-#age' 以相反的顺序以数字排序）

您的`prio`字段是一个整数，尽管在 PHP 中您可以透明地跨整数和字符串执行许多操作，但该通知表明*sortby*已通过单独访问每个字符来实现字符串排序。这不可能与整数一起使用。

所以，你应该使用`#`修饰符：

```
{foreach $addblock|@sortby:"#prio" as $value}
                            ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:34:47.230

不要这样做。排序不是模板引擎应该做的任务。这显然是业务逻辑，需要进入控制器。

# c++ - 在 Dev C++ 中运行项目

> ID：13544684
> 
> 赞同：5
> 
> 时间：2012-11-24T19:20:18.220
> 
> 标签：c++, makefile, dev-c++

我有一个文件夹，其中包含一些 .h 和 .cpp 文件以及一个 makefile。我如何在开发 C++ 中运行它们。我刚刚开始使用 dev C++，因此对此有点无能为力。制作文件是

```
 CC=g++
 CV=-I/usr/include/opencv
 CV2=-lml -lcvaux -lhighgui -lcv -lcxcore

 all:
    $(CC) main.cpp HOG.cpp HOGFeaturesOfBlock.cpp $(CV) $(CV2) -o featureExtractor 
```

我收到错误 main.cpp, hog.cpp: no such file or directory。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T19:23:44.643

*   使用文件>>新建项目创建一个新项目。如果您使用自定义 makefile，则可以忽略 C/C++ 选项。此外，一个空项目也可以。
*   使用 Project >> Add to Project 或顶部工具栏中间的“+”号将源文件和头文件添加到新项目。
*   转到项目 >> 项目选项 (Alt+P) >> Makefile 并勾选“使用自定义 makefile”选项。然后将 Dev-C++ 指向下面的自定义 makefile。

此外，请务必将您的 IDE 更新到以下版本，与古老的 4.9.9.2 版本相比，该版本修复了大量错误，随 GCC 4.6.1 或 4.7.0 一起提供，并且完全可移植：[http://sourceforge .net/projects/orwelldevcpp/](http://sourceforge.net/projects/orwelldevcpp/)

# ruby-on-rails - URL 获取响应错误

> ID：13544690
> 
> 赞同：0
> 
> 时间：2012-11-24T19:20:29.067
> 
> 标签：ruby-on-rails, url

我的 Rails 控制器代码中有以下几行

```
url_parsed = URI.parse(url)
response = Net::HTTP.get_response(url_parsed) 
```

当我通过`www.google.com`as`url`时，它给了

```
undefined method `request_uri' for #<URI::Generic:0x00000002e07908 URL:www.google.com> 
```

在第二行，即使我没有在`request_uri`任何地方调用该方法。

在这种情况下，我希望它显示我漂亮的错误页面，而不是这个丑陋的错误。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:29:20.587

您的`url`字符串缺少协议：`url="http://www.google.com"`

然后您的代码将返回`Net::HTTPOK`- 请参阅此[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPOK.html)

# mysql - PHPMyAdmin 工作但无法接收“用户''@'localhost' 的访问被拒绝（使用密码：否）”错误

> ID：13544691
> 
> 赞同：1
> 
> 时间：2012-11-24T19:20:31.437
> 
> 标签：mysql, phpmyadmin

我将 IIS 与 PHP、PHPMyAdmin 和 mysql 一起使用。它们是分开安装的。安装 mysql 后，我可以选择并继续设置密码。我可以使用相同的密码来使用 phpmyadmin，但是当我测试我的数据库连接时，我收到了错误`Access denied for user ''@'localhost' (using password: NO)`。

我一直在论坛和 youtube 上寻找可能的解决方案，但无法到达任何地方。我已经禁用了我的防火墙并试图允许 mysqld 单独通过它，但仍然没有结果。

PHPMyAdmin 位于我的 IIS 的*wwwroot*文件夹中，而 mysql 位于我的*C:/Progam Files 文件*夹中。这是可能的问题还是设置好？

此外，我查看了我的配置文件并且都具有相同的匹配密码。我的用户是`root`，所有配置文件也都有。PHPMyAdmin 作为用户接受它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:48:40.500

对我来说，它接缝的是您的 phpMyAdmin 配置不正确。您缺少用户名和密码选项，因此无法连接。您应该查看：[http](http://docs.phpmyadmin.net/en/latest/config.html#basic-settings) : //docs.phpmyadmin.net/en/latest/config.html#basic-settings 并查找 $cfg['Servers'][$i]['nopassword'] 选项。它应该被禁用。PS：您是否从 phpmyAdmin 获得用户名/密码提示？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:16:30.063

看起来您在*config.inc.php*`user`下提供的用户名没有任何密码..

 *您可以为用户名提供正确的密码`user`

或者

您可以提供相同的用户名和密码，让您从命令提示符登录到*mysql ..**

# c - libcurl 库是否提供任何方法来确定哪个响应标头来自哪个命令？

> ID：13544692
> 
> 赞同：2
> 
> 时间：2012-11-24T19:20:38.787
> 
> 标签：c, multithreading, curl, libcurl

**背景：**

我正在使用该库编写我的第一个 C 程序，我需要从发送到 SMTP 服务器的每个命令中收集响应。

我已经将命令发送到 SMTP 服务器并使用 打印响应标头`curl_easy_setopt(curl_handle, CURLOPT_HEADERFUNCTION, parse_head)`，但我使用的是多线程选项。当我得到响应时，根本不清楚它是由哪个命令引起的。我假设它们不一定会以发送的相同顺序收到。那是对的吗？

让它变得更加困难，因为库在没有我明确请求的情况下处理一些调用（比如设置初始连接），所以我需要处理比明确请求更多的标头。这将是可预测和可重复的，但肯定会增加额外的复杂性。

**问题：**

有没有一种“好”的方法来确定哪个命令使用多线程导致哪个响应标头？

另外，适度相关，库是否支持返回数字返回码，还是我必须手动解析出来？翻阅图书馆，似乎没有。我只是想确定一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:30:28.580

> 我假设它们不一定会以发送的相同顺序收到。那是对的吗？

是的。这就是多线程的工作原理。

> 有没有一种“好”的方法来确定哪个命令使用多线程导致哪个响应标头？

是的。您可以使用该选项设置用户数据（上下文信息，无论您如何称呼它）`CURLOPT_HEADERDATA`- 这将作为标题函数的第四个参数传入。所以你可以这样写代码：

```
CURL *hndl = curl_easy_init();
// ... 
curl_easy_setopt(hndl, CURLOPT_HEADERFUNCTION, parse_head);
curl_easy_setopt(hndl, CURLOPT_HEADERDATA, some_pointer_that_identifies_the_thread);
// ...

size_t parse_head(void *buf, void *size_t sz, size_t nmemb, void *context)
{
    // context will be the pointer identifying the thread
} 
```

> 库是否支持返回数字返回码，还是我必须手动解析出来？

是的，它确实：

```
long httpStatus;
curl_easy_getinfo(hndl, CURLINFO_RESPONSE_CODE, &httpStatus);
if (200 <= httpStatus && httpStatus < 300) {
    // HTTP 2XX OK
} else {
    // Error (4XX, 5XX) or redirect (3XX)
} 
```

# android - Android 开发：api 14 与 api 15

> ID：13544696
> 
> 赞同：26
> 
> 时间：2012-11-24T19:21:00.840
> 
> 标签：android, android-api-levels

我想为安卓冰淇淋三明治及以上版本开发一个应用程序。所以，我发现 android 4.0 支持 api 14 和 android 4.0.3 api 15。查看仪表板[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)。似乎没有人拥有 android ics 4.0 但只有 4.0.3 或 4.0.4 。这很重要，因为如果看起来如此，我将使用 api 15 而不是 14 开发应用程序。但是我确信没有人在他的 4.0.0 版本中使用 android。你能确认仪表板中的数据吗？我的意思是，您能否确认只有 4.0.3 和 4.0.4 版本的设备上存在安卓冰淇淋三明治？谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-24T19:52:08.343

不到 0.05% 的设备在 4.0、4.0.1 或 4.0.2 上，这就是它没有显示在[仪表板上的](http://developer.android.com/about/dashboards/index.html)原因。同样，只有不到 0.05% 的设备使用 2.0 或 2.0.1，与 3.0 相同。

您可以安全地为**API 8、10、13、15、16、17、18 和 19**（*截至 2013 年 12 月 28 日*）进行开发，并放弃剩余的九个 API 级别（尽管很少有理由这样做）。如果可能，您可能还希望继续支持 API 7，因为它最近才从仪表板中删除。（十亿台设备中的 0.05% 仍然不少！）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-24T19:36:44.427

谷歌已向制造商表明应使用 android 4.0.3 作为 ics 的基础版本。它还建议所有制造商提供 4.0.3 的自动更新。

我不知道运行 4.0.3 之前版本的设备的使用统计信息，但我想这将是少数设备。

# wpf - 来自 Caliburn.Micro.Bootstrapper 的自定义引导程序，什么是引导程序 为了？

> ID：13544701
> 
> 赞同：0
> 
> 时间：2012-11-24T19:21:12.883
> 
> 标签：wpf, caliburn.micro

我从 Caliburn.Micro.Bootstrapper 派生了一个自定义引导程序，我注意到它可以采用泛型类型参数 - 这是为了什么？

```
public class SimpleInjectorBootstrapper : Caliburn.Micro.Bootstrapper
{
    private Container container;

    public SimpleInjectorBootstrapper()
    {
    }

    protected override void Configure()
    {
        this.container = new Container();
        this.container.Register<IWindowManager, WindowManager>();
        this.container.Register<IEventAggregator, EventAggregator>();
        this.container.Register<IAppViewModel, AppViewModel>();
    }

    protected override object GetInstance(Type serviceType, string key)
    {
        return this.container.GetInstance(serviceType);
    }

    protected override IEnumerable<object> GetAllInstances(Type serviceType)
    {
        return this.container.GetAllInstances(serviceType);
    }

    protected override void OnStartup(object sender, System.Windows.StartupEventArgs e)
    {
        base.OnStartup(sender, e);
        var appViewModel = this.container.GetInstance<IAppViewModel>();
        var windowManager = this.container.GetInstance<IWindowManager>();
        windowManager.ShowWindow(appViewModel);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:06:09.827

它是一种用作起始视图模型的视图模型类型。Caliburn.Micro 将从 IoC 容器中解析类型，并在 WPF 中使用`WindowManager`来显示根视图。基本上你在`OnStartup`覆盖中所做的事情。

# java - 如何在 Android 中为 Drawable 设置动画？

> ID：13544702
> 
> 赞同：0
> 
> 时间：2012-11-24T19:21:13.507
> 
> 标签：java, android, animation

我的应用程序中有一个`Drawable`对象正在屏幕上移动：

```
public class MyDrawable extends Drawable {

    @Override
    public void draw(Canvas canvas) {
        // ...
    }
    // ...
} 
```

到目前为止它工作得很好，但现在我必须为它制作动画`Drawable`。我查看了文档，看起来对我来说最好的选择是使用`AnimationDrawable`.

我做了这样的事情：

```
public void addAnimation() {
    animation = new AnimationDrawable();
    animation.addFrame(resources.getDrawable(R.drawable.anim_0), 100);
    animation.addFrame(resources.getDrawable(R.drawable.anim_1), 100);
    animation.addFrame(resources.getDrawable(R.drawable.anim_2), 100);
    animation.addFrame(resources.getDrawable(R.drawable.anim_3), 100);
    animation.setOneShot(false);
    refreshAnimationBounds();
    animation.start();
}

@Override
public void draw(Canvas canvas) {
    refreshAnimationBounds();
    animation.draw(canvas);
} 
```

发生的情况是我的原件`Drawable`正在按预期移动，但我只看到第一帧。可能是什么问题呢？

`refreshAnimationBounds();`只是刷新我的`Drawable`对象的边界（重新定位它）。

编辑：

常见的：

```
public void onWindowFocusChanged(boolean hasFocus) {
    if (hasFocus) {
        animation.start();
    } else {   
        animation.stop();
    }
} 
```

解决方案不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:26:28.930

一般来说，动画包是相当错误的。我记得我在动画无法启动时遇到了同样的问题，我提出的解决方案不是`onCreate()`像以前那样启动它，而是`onWindowFocusChanged()`在设置所有视图内容后启动它。我自己并没有扩展 AnimationDrawable ，但在您的情况下它可能是相同的来源。

# mysql - Mysql选择所有匹配字符串中的数字

> ID：13544709
> 
> 赞同：0
> 
> 时间：2012-11-24T19:22:19.607
> 
> 标签：mysql, sql, database, wildcard

假设我的表列包含以下 2 个字符串行：

```
 1, 5, 2, 31, 12, 1212, 111
       21, 25, 32, 43, 112, 212, 311 
```

我需要一个查询来选择包含数字`1`和包含数字的行`2`

我的查询是：

```
 SELECT *
      FROM MyTable
      WHERE My_String LIKE '%1%' AND My_String LIKE '%2%' 
```

现在，当我希望它只返回第一行时，它会返回两行。

它选择第二行，因为 numbers`21, 25, 32, 112, 212, 311`还包含 number`1`和`2`。

我的问题是如何选择所有那些数字`1`和`2`包含在字符串中但不包含在 2-3 位数字中的行。我希望它严格匹配那些`1`和`2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:57:09.037

[http://www.sqlfiddle.com/#!2/b082d/5](http://www.sqlfiddle.com/#!2/b082d/5)

```
select * from testtable
where instr(concat(', ', longstring, ', '), ', 2,') >0;

select * from testtable
where instr(concat(', ', longstring, ', '), ', 1,') >0 
and  instr(concat(', ', longstring, ', '), ', 2,') >0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:30:06.573

您可以使用正则表达式。[[:<:]] 是开始字边界， [[:>:]] 是结束字边界。

```
SELECT * FROM MyTable
WHERE My_String RLIKE '[[:<:]]1[[:>:]]'
AND   My_String RLIKE '[[:<:]]2[[:>:]]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:57:23.857

你有几个选择：

1-如主帖评论中所述，更改结构并且不存储连接字符串

2-编写一个拆分字符串的函数，并检查拆分后数字1和2是否出现在标记中。

3-编写“where”子句来捕获字符串出现的每一种可能性：字符串可以出现在列表的开头、中间、结尾，或者是列表中的唯一元素。最后一个并不重要，因为您需要 1 和 2 连续出现，因此应该消除包含单个元素的列表字符串。所以：

```
select *
from MyTable
where (My_String like '1,%'  or My_String like '%, 1,%' or My_String like '%, 1') 
and (My_String like '2,%'  or My_String like '%, 2,%' or My_String like '%, 2') 
```

# bash - 找出 PHP 正在使用哪个 shell

> ID：13544711
> 
> 赞同：1
> 
> 时间：2012-11-24T19:22:23.573
> 
> 标签：bash, shell, command-line, php

我正在尝试执行这样的管道 shell 命令

> set -o pipefail && command1 | 命令2 | 命令3

来自 PHP 脚本。部分是在`set -o pipefail`任何命令失败时立即使管道中断。但是命令会导致：

> sh：1：设置：非法选项-o pipefail

而它从终端运行良好。也许在执行 shell 命令时明确指定应该使用哪个 shell PHP CLI（即`bin/bash`）可以解决问题，或者有更好的出路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:27:11.867

您可以随时运行`bash -c 'set -o pipefail && command1 | command2 | command3'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:25:12.667

你可以通过做找到它

```
echo `echo $SHELL`; 
```

# ruby-on-rails - Rails：AJAX 和 .js.rjs 文件时缺少模板

> ID：13544713
> 
> 赞同：0
> 
> 时间：2012-11-24T19:23:35.930
> 
> 标签：ruby-on-rails, ruby, runtime-error

我正在尝试使用rails执行AJAX例程，代码运行正常，但响应没有..

我收到这个错误

模板丢失

```
Missing template line_items/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "D:/ruby/depot/app/views" 
```

我在 line_items 目录中创建了 create.js.rjs ，就像敏捷 Web 开发一书所说的那样，但错误仍然存​​在。

```
#file line_items_controller.rb

def create
    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = add_product(@cart, product.id)

    respond_to do |format|
       if @line_item.save
        format.html { redirect_to store_url }
        format.js 
        format.json { render json: @line_item, status: :created, location: @line_item }
        #...
      end
    end
  end 
```

在我的 create.js.rjs 里面我得到了这个

```
page.replace_html('cart', render(@cart)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:34:03.790

我猜 Rjs 不再是一种有效的格式。请改用 js.erb。您所遵循的手册也已过时，因为不再使用原型。

# python - Web2py 无法访问互联网 [连接被拒绝]

> ID：13544715
> 
> 赞同：0
> 
> 时间：2012-11-24T19:23:38.357
> 
> 标签：python, linux, apache, web2py

我在 Apache Web 服务器上运行的服务器上部署了一个 web2py 应用程序。除了 web2py 模块无法连接到外部网站之外，一切似乎都运行良好。在 web2py 管理页面中，我收到以下错误：1\. 无法检查升级 2\. 无法下载，因为：

我正在使用 web2py 1.9.9，CentOS 5 我也在研究所代理后面。我猜这个问题与代理配置有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:43:22.723

尝试通过 ssh -D 隧道连接到代理外部的服务器来测试代理理论，看看这是否适合您。

# javascript - JS：为 window.replace 增加页面（page1.html、page2.html、page3.html...）

> ID：13544716
> 
> 赞同：0
> 
> 时间：2012-11-24T19:23:39.783
> 
> 标签：javascript, jquery, increment

这种情况应该采用什么方法。我希望页面在完成所需的所有功能后转到下一页。

所以，例如。**完成page1.html**的所有函数后，它将调用函数**next_page()**。

**next_page()**函数将评估当前页面并添加“ **1** ”。所以从**page2.html**现在它将是**page3.html**。**page3.html**还将包含与前一个 html 相同的函数，在完成所有函数之后，它将调用**next_page()**函数，该函数也将评估当前并递增它。

```
//current_url = "mysite.com/page1.html"
var current_url = window.location;
var end_page = "mysite.com/page12.html"

var increment_url = eval(current_ur + 1 );

    if(current_url != end_page ) {
        setTimeout(next_page,2000)
    }
    else {
        alert("this is the last page!")                    
    }

function next_page() {
    window.location.replace(increment_url);       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:40:59.423

```
var increment_url = addone('mysite.com/page1.html'); 
```

返回`mysite.com/page2.htm`

```
function addone(url) {
    var pattern=new RegExp("(.*)([0-9+])(\..*)");
    var match=pattern.exec(url);
    return match[1] + (parseInt(match[2]) + 1 ) + match[3];
}
​ 
```

因此，假设您提供的示例 URL 足够准确，可以使用正则表达式

```
var increment_url = addone(current_url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:29:08.823

最简单的做法是在每个具有下一页 url 值的页面上都有一个隐藏的输入。这将允许您使用任意页面 url 并且仍然能够获得您想要的效果。

使用 jQuery

```
 $(function() {
     setTimeout(function() {
          var url = $('#next_page_url').val();
          window.location.replace(url);
     }, 2000);
 });

 <input type="hidden" id="next_page_url" value="http://mysite.com/page2.html" /> 
```

# java - 如何将变量从 SPAppToken 映射到 AuthorizationCodeTokenRequest

> ID：13544723
> 
> 赞同：0
> 
> 时间：2012-11-24T19:24:48.127
> 
> 标签：java, google-app-engine, oauth-2.0

我已经在我的 Office 365 环境中注册了我的应用引擎应用，并且回调 URL 正常工作，我收到了一个 SPAppToken。

我想使用这个 java 类获得一个访问令牌：

[http://javadoc.google-oauth-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/auth/oauth2/AuthorizationCodeTokenRequest.html](http://javadoc.google-oauth-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/auth/oauth2/AuthorizationCodeTokenRequest.html)

我的问题是下面哪些值映射到我在 SPAppToken 中找到的值？ClientAuthentication 中的凭据是我假设的 applicationId 和 applicationSecret。redirectURI 是为了返回我的应用程序。我认为应该用*https://accounts.accesscontrol.windows.net/tokens/OAuth/2填充 GenericURL*

但我不断收到：错误：invalid_request ACS90019：无法从请求中确定租户标识符。

下面是代码**xx**表示我需要替换的变量，并且在 SPAppToken 下方（从 base64 解码）

```
try {TokenResponse response = new AuthorizationCodeTokenRequest(new NetHttpTransport(), new JacksonFactory(), new GenericUrl(**"https://server.example.com/token"**), **"SplxlOBeZQQYbYS6WxSbIA"**).setRedirectUri("https://client.example.com/rd") .setClientAuthentication(new BasicAuthentication(**"s6BhdRkqt3"**, **"7Fjfp0ZBr1KtDRbnfVdmIw"**)).execute();
  System.out.println("Access token: " + response.getAccessToken());
} catch (TokenResponseException e) {
  if (e.getDetails() != null) {
    System.err.println("Error: " + e.getDetails().getError());
    if (e.getDetails().getErrorDescription() != null) {
      System.err.println(e.getDetails().getErrorDescription());
    }
    if (e.getDetails().getErrorUri() != null) {
      System.err.println(e.getDetails().getErrorUri());
    }
  } else {
    System.err.println(e.getMessage());
  }
} 
```

SPAppToken 解码：

```
{"typ":"JWT","alg":"HS256"}{"aud":"e9e91cd9-0d95-46b7-8a05-f614a683e35d/eog-fire-ice.appspot.com@19d9feae-ba24-4c9e-831c-3132f2ea3974","iss":"00000001-0000-0000-c000-000000000000@19d9feae-ba24-4c9e-831c-3132f2ea3974","nbf":1353777617,"exp":1353820817,"appctxsender":"00000003-0000-0ff1-ce00-000000000000@19d9feae-ba24-4c9e-831c-3132f2ea3974","appctx":"{\"CacheKey\":\"hwqDPFbKDL9mIYpbReWYHeez1uES77UqEsxwienRA9g=\",\"SecurityTokenServiceUri\":\"https://accounts.accesscontrol.windows.net/tokens/OAuth/2\"}","refreshtoken":"IAAAAAi52NL58kY1UUpnmUJ9TPO7BpDSd6NqQGHbdfAEnOgioNbG8AwTGgf-3HPSNrdDexk5UUA3QFox_sky4_uon0XmLl6EfpqsC6RTpiatjJxXzB7EFJrqsiYI98MULyCubxjR5UyQwFzLvEjljEom7XcEXB2YCCWJQQdSRvFU4xo4NIPoUObhyjTK58TaCipUU3D4EiLJRSlkbcm_Y3VrVd8GMoQ8kx6BmJjeaGKZsJXWb7UJ8YTg6L4-HOoAiU3MymJl3oBxv_9rvHDmKb4FJ7vrN8AhJYUqlr9rZxOtG_BVeUX05E-umfoUU4PL2Cj-p7u4YOPo6rqVahovwGwYPn-pZbPfIcTj3TzKZdIk7OLemdR_S8_v0gASEM1Y_KTHsoQ6k-uZaa3QGZN4icu-Jp6Jh4UTRZuomLtkLmg7VVZL6VKpXUVW7RjUopoSEffb5RVmMVNOkNV4_r5NT7pjL0pWAk-uipTF0qLAMzEfr5M9YKNgBlbRbvjlePFz6co5_uOyY8VbfJsIqGhTr1dvW6o","isbrowserhostedapp":"true"}R?????XE??j?2??pZ?????0jLk 
```

----- 新信息 2012-26-11 ------ 在更改“代码”字段以包含刷新令牌并使用 aud 整个值而不是仅 applicationID 后，我收到以下消息：

```
ACS50001: The required field 'resource' is missing. 
```

问题是：我是不是越来越近了？

我也在这里问过这个问题：[https ://groups.google.com/d/topic/google-oauth-java-client/EZtlwDbY_wk/discussion](https://groups.google.com/d/topic/google-oauth-java-client/EZtlwDbY_wk/discussion)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:12:10.453

我修改了 com.google.api.client.json.JSONParser.java 并将这段代码放在我的 servlet 中：

```
 JsonWebSignature jws = JsonWebSignature.parse(new JacksonFactory(), req.getParameter("SPAppToken"));

    JsonParser jsonParser = new JacksonFactory().createJsonParser(jws.getPayload().get("appctx").toString());

    //Create my own AppTxc that extends GenericJSON
    AppCtx appCtx = jsonParser.parse(AppCtx.class, new CustomizeJsonParser());

    String appctxsender=jws.getPayload().get("appctxsender").toString();
    String[] splitApptxSender = appctxsender.split("@");

    //sharepointhost name is part of the resource field
    String sharepointServerHostName = new URL(req.getParameter("SPHostUrl")).getHost();

    // create the resource field        
    String resource = splitApptxSender[0]+"/"+sharepointServerHostName+"@"+splitApptxSender[1];

    try {

        AuthorizationCodeTokenRequest tokenRequest =    new AuthorizationCodeTokenRequest(new NetHttpTransport(), new JacksonFactory(),
                  new GenericUrl(appCtx.getSecurityTokenServiceUri()), jws.getPayload().get("refreshtoken").toString());

        tokenRequest.setRedirectUri("https://eog-fire-ice.appspot.com/callback4fireandice");
        tokenRequest.setClientAuthentication(
                    new ClientParametersAuthentication(jws.getPayload().getAudience(), SharePointAppSecret));
        tokenRequest.setGrantType("refresh_token");
        tokenRequest.set("resource", resource);
        tokenRequest.set("refresh_token", jws.getPayload().get("refreshtoken").toString());
        TokenResponse response =tokenRequest.execute();

        String accesstoken=response.getAccessToken();

    } catch (TokenResponseException e) {
        if (e.getDetails() != null) {
            pw.println("Error: " + e.getDetails().getError());
            if (e.getDetails().getErrorDescription() != null) {
              pw.println(e.getDetails().getErrorDescription());
            }
            if (e.getDetails().getErrorUri() != null) {
              pw.println(e.getDetails().getErrorUri());
            }
          } else {
            pw.println(e.getMessage());
          }
    } 
```

我不确定是否所有信息（如重定向 URL）都是必需的，但现在我从 Azure ACS 获得了一个访问令牌。

感谢 Nick Swan (lightningtools.com) 对基于 Ruby on Rails 的初步帮助。

当然感谢 Yaniv Inbar (https://plus.google.com/+YanivInbar/) 提供了 google oauth java 客户端库。

我不得不提出一个错误报告： http://code.google.com/p/google-oauth-java-client/issues/detail?id=62&q=Type%3DDefect&sort=priority&colspec= [ID%20Milestone%20Summary](http://code.google.com/p/google-oauth-java-client/issues/detail?id=62&q=Type%3DDefect&sort=priority&colspec=ID%20Milestone%20Summary)

# javascript - 如何使用 JavaScript / jQuery 安排函数调用

> ID：13544728
> 
> 赞同：-1
> 
> 时间：2012-11-24T19:25:23.337
> 
> 标签：javascript, jquery

我有一个 Web 应用程序，它从另一个域的页面中抓取数据。该数据每周在特定时间更新几次，比如周三和周五的下午 2 点。

我有一个 JS 函数，它从该页面中抓取特定数据并将其存储在数据库中。如何安排在特定时间调用此函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T19:27:25.890

您使用该`setTimeout()`功能。它需要两个参数，一个要调用的函数和从现在开始的毫秒数。

```
setTimeout(myFunction, 10 * 60 * 60 * 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T19:34:07.250

我会使用`crontab -e`（在 OSX 上）设置一个 cron 作业：

```
* 14 * * 4,6 /usr/local/bin/node /path/to/script.js 
```

`node`这将在每周三和周五下午 2 点使用（无论您碰巧安装在哪里）运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:31:33.207

Nodejs 有一个模块`node-cron`，用于`setTimeout`在完成当前作业后安排作业的下一次运行。您可以查找它的源代码并将其移植到您的应用程序中。

# android - 收到 gcm 通知时如何启动对话框？

> ID：13544729
> 
> 赞同：1
> 
> 时间：2012-11-24T19:25:33.360
> 
> 标签：android, notifications, google-cloud-messaging

当应用程序收到推送消息时，我编写了 onMessage 代码以启动 MainActivity，并带有一个弹出消息的警报对话框。到目前为止，一切都很好。

我真正想要的只是弹出窗口！因此，当用户忙于另一个应用程序时，它只会显示一个对话框，其中包含取消或启动应用程序的选项...

GCMIntentService 部分

```
@Override
    protected void onMessage(Context context, Intent intent) {
        Log.d(TAG, "Received a message");
        String message = intent.getExtras().getString("price");
        displayMessage(context, message);
        generateNotification(context, message);
        //Launch a activity
        Intent i = new Intent();
        i.putExtra("message", message);
        i.setClassName("nl.easy.winkel", "nl.easy.winkel.MainActivity");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:31:33.900

[您可以做的一件事是使用本文](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)中定义的方法使`MainActivity`背景透明（在下面复制以供快速参考），以便用户会觉得弹出窗口超出了她正在使用的当前活动以及用户选择取消时的活动。 .`finish()`

**使活动背景透明：**

在您的文件中添加以下样式`res/values/styles.xml`（如果没有，请创建它。）这是一个完整的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
  </style>
</resources> 
```

（值是我放在文件`@color/transparent`中的颜色值。你也可以在以后的Android版本中使用）`#00000000``res/values/color.xml``@android:color/transparent`

然后将样式应用于您的活动，例如：

```
<activity android:name=".SampleActivity" android:theme="@style/Theme.Transparent">
...
</activity> 
```

# mysql - 如何从计数中选择具有最大产生值的行

> ID：13544733
> 
> 赞同：1
> 
> 时间：2012-11-24T19:26:00.917
> 
> 标签：mysql, sql, mysql-workbench

我对mysql有点陌生，所以我被困在一个查询上。我有一个名为歌曲的数据库中的表（我只能在这个数据库中读取）：

```
table name:cd_production

code_cd  etaireia  etos
______________________
400400  ODEON     1987
400401  ODEON     1986
400412  COLUMBIA  1990
400420  COLUMBIA  1990
400657  LYRA      1965
410000  COLUMBIA  1962
410001  COLUMBIA  1964
410003  PHILIPS   1979
410005  PHILIPS   1971
420430  ODEON     2002
420440  LYRA      2005
420450  COLUMBIA  2009
420460  ODEON     2007
420470  PHILIPS   2008
420480  ODEON     2002
420490  COLUMBIA  2010
500500  SONY      1968
500510  SONY      1972
600601  COLUMBIA  1962
600602  COLUMBIA  1963
600603  ODEON     1964
670670  PHILIPS   1983 
```

我想找到生产 cd 数量最多的 etaireia（意味着每个 etaireia 的 code_cd 不同）。我问

```
select etaireia ,count(all code_cd) as cds
from cd_production
group by etaireia 
```

我得到一个返回列的列表

```
etaireia  cds
________________    
COLUMBIA   8
LYRA       2
ODEON      6
PHILIPS    4
SONY       2 
```

这有点正确，但我不知道如何只获得具有最大 cd 的 etaireia

```
 etaireia  cds
    ________________    
    COLUMBIA   8 
```

这里有什么诀窍？**我不想使用 LIMIT 1 方法，因为它不是通用的。** 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:30:15.203

如果您希望查找具有最大计数的所有记录及其计数，您可以在子句中使用子查询来`HAVING`确定.`MAX()``COUNT()`

```
SELECT 
  etaireia,
  COUNT(*) AS cds
FROM
  cd_production
GROUP BY etaireia
HAVING cds = (
   SELECT MAX(cds) 
   FROM (SELECT etaireia, COUNT(*) as cds
         FROM cd_production 
         GROUP BY etaireia) subq
   ) 
```

[http://sqlfiddle.com/#!2/869b4/4](http://sqlfiddle.com/#!2/869b4/4)

限制为单行的方法因 RDBMS 而异。MySQL 使用`LIMIT`，MSSQL 使用`TOP`，Oracle 使用`ROWNUM`……使用 RDBMS 特定的方法使这变得简单多了，因为您不需要在`HAVING`子句中嵌套子查询。相反，您可以`LIMIT`在`HAVING`子查询中使用只返回一个最大的`COUNT()`而不需要包装另一个查询来获取`MAX()`.

```
SELECT 
  etaireia,
  COUNT(*) AS cds
FROM
  cd_production
GROUP BY etaireia
HAVING cds = (
   SELECT COUNT(*)
   FROM cd_production 
   GROUP BY etaireia
   ORDER BY COUNT(*) DESC 
   LIMIT 1
) 
```

[这是特定于 MySQL 的版本](http://sqlfiddle.com/#!2/869b4/5)...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:44:34.900

其他应该在大多数 DBMS 中运行的“通用”方式（并且不要使用 MYSQL 特定`LIMIT`关键字）：

```
SELECT 
    etaireia,
    COUNT(*) AS cds
FROM
    cd_production c
GROUP BY 
    etaireia
HAVING 
    COUNT(*) >= ALL 
        ( SELECT COUNT(*) 
          FROM cd_production cc
          GROUP BY cc.etaireia
        ) ; 
```

还有这个：

```
SELECT 
    etaireia,
    COUNT(*) AS cds
FROM
    cd_production  c
GROUP BY 
    etaireia
HAVING 
    NOT EXISTS
        ( SELECT * 
          FROM cd_production  cc
          GROUP BY cc.etaireia
          HAVING COUNT(*) > COUNT(DISTINCT c.code_cd)
        ) ; 
```

两者都在 SQL-Fiddle 中进行了测试：**[test-1](http://sqlfiddle.com/#!4/15ae8/12)**（适用于所有 4 个：Postgres、SQL-Server、Oracle、MySQL，除了不在 Postgres 中运行的第二个查询）。

* * *

对于那些具有窗口函数（和`OVER`子句）的 DBMS，还有另一种方法（适用于 Postgres、Oracle、SQL-Server 2012）：

```
SELECT etaireia, cds
FROM
  ( SELECT 
        etaireia, cds,
        RANK() OVER (ORDER BY cds DESC) AS rnk
    FROM
      ( SELECT 
            etaireia,
            COUNT(*) AS cds 
        FROM
            cd_production  c
        GROUP BY 
            etaireia
      ) tmp
  ) tmp2
WHERE rnk = 1 ; 
```

以下是“标准”方式。它应该在支持标准 SQL 语法的 Postgres 和 SQL-Server 中工作`FETCH ... OFFSET`（相当于供应商特定的`LIMIT`and `TOP`）：

```
SELECT 
    etaireia,
    COUNT(*) AS cds
FROM
    cd_production AS c
GROUP BY 
    etaireia
ORDER BY
    cds DESC
OFFSET 0 ROWS
FETCH FIRST 1 ROWS ONLY ; 
```

两者都在 SQL-Fiddle 中进行了测试：**[test-3](http://sqlfiddle.com/#!6/15ae8/2)**（Q4 在 Postgres 和 SQL-Server 2012 中工作）。请注意，这将给出与前 3 个查询不同的结果，因为`FETCH`语法不解析关系，只返回来自被绑定的行的一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:32:36.777

那么只选择第一个：

```
select Top 1 etaireia ,count(all code_cd) as cds
from cd_production
group by etaireia 
```

忽略，因为您不想使用限制。

# c++ - windows下的dll

> ID：13544735
> 
> 赞同：0
> 
> 时间：2012-11-24T19:26:11.270
> 
> 标签：c++, dll, managed

我需要从托管的 c++ 代码动态加载 .dll。下面的代码做到了这一点

```
[DllImport("kernel32.dll", SetLastError = true,
        CharSet = CharSet::Unicode, ExactSpelling = true,
        CallingConvention = CallingConvention::StdCall)]
    static HMODULE LoadLibrary(LPCTSTR lpFileName);

    [DllImport("kernel32.dll", SetLastError = true,
        CharSet = CharSet::Unicode, ExactSpelling = true,
        CallingConvention = CallingConvention::StdCall)]
    static BOOL FreeLibrary(HMODULE hModule);

    [DllImport("kernel32.dll", SetLastError = true,
        CharSet = CharSet::Unicode, ExactSpelling = true,
        CallingConvention = CallingConvention::StdCall)]
    static FARPROC GetProcAddress(HMODULE hModule, LPCSTR lpProcName);

    typedef int (*CFunction)();

    int _tmain()
    {
        HMODULE pLib = LoadLibrary(TEXT("FunctionDLL.dll"));
        if(pLib != 0)
        {
            FARPROC function = GetProcAddress(pLib, "QFunction");
            if (function != 0)
                MessageBox::Show(Convert::ToString(function()));

            FreeLibrary(pLib);
        }
        else
        {
            MessageBox::Show(L"Error", L"Couldn't load ell");
            Close();
        }

        return 0;
    } 
```

但函数始终为空。我认为 dll 我们错了。下面是dll的代码：

.h 文件

```
#ifdef __FUNCTIONDLL__
#define __FUNCTIONDLL__

#ifdef FUNCTIONDLL_EXPORTS
    #define FUNCTIONDLL_API __declspec(dllexport)
#else
    #define FUNCTIONDLL_API __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C"
{
#endif

FUNCTIONDLL_API int QFunction();

#ifdef __cplusplus
}
#endif // __cplusplus

#endif // __FUNCTIONDLL__ 
```

.cpp 文件

```
#include "FunctionDLL.h"

int QFunction()
{
    return 42;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:01:59.477

你的 C++ 项目中有 .def 吗？如果不只是添加一个 .def 与

```
LIBRARY   FunctionDLL
EXPORTS
  QFunction   @1 
```

# c++ - 谐波级数和 c++ MPI 和 OpenMP

> ID：13544743
> 
> 赞同：6
> 
> 时间：2012-11-24T19:27:15.673
> 
> 标签：c++, multithreading, parallel-processing, mpi, openmp

我正在尝试同时使用 MPI 和 opemMP 来制作“谐波级数和”问题的并行版本。但是输出是彼此不同的过程。

有人可以帮我完成这个问题吗？

**并行程序：**（MPI 和 OpenMP）

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <time.h>
#include <omp.h>
#include <mpi.h>

#define d 10    //Numbers of Digits (Example: 5 => 0,xxxxx)
#define n 1000  //Value of N (Example: 5 => 1/1 + 1/2 + 1/3 + 1/4 + 1/5)

using namespace std;

double t_ini, t_fim, t_tot;

int getProcessId(){
    int rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    return rank;
}

int numberProcess(){
    int numProc;
    MPI_Comm_size(MPI_COMM_WORLD, &numProc);
    return numProc;
}

void reduce(long unsigned int digits1 [])
{
    long unsigned int digits2[d + 11];
    int i = 0;
    for(i = 0; i < d + 11; i++) digits2[i] = 0;

    MPI_Allreduce(digits1, digits2,(d+11),MPI_INT,MPI_SUM,MPI_COMM_WORLD);

    for(i = 0; i < d + 11; i++) digits1[i] = digits2[i];

}

void slave(long unsigned int *digits)
{
    int idP = getProcessId(), numP = numberProcess();

    int i;
    long unsigned int digit;
    long unsigned int remainder;

    #pragma omp parallel for private(i, remainder, digit)
    for (i = idP+1; i <= n; i+=numP){
        remainder = 1;
        for (digit = 0; digit < d + 11 && remainder; ++digit) {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            #pragma omp atomic
            digits[digit] += div;
            remainder = mod * 10;
        }
    }
}

void HPS(char* output) {
    long unsigned int digits[d + 11];

    for (int digit = 0; digit < d + 11; ++digit)
        digits[digit] = 0;

    reduce(digits);
    slave(digits);

    for (int i = d + 11 - 1; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }

    if (digits[d + 1] >= 5) ++digits[d];

    for (int i = d; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    stringstream stringstreamA;
    stringstreamA << digits[0] << ",";

    for (int i = 1; i <= d; ++i) stringstreamA << digits[i];

    string stringA = stringstreamA.str();
    stringA.copy(output, stringA.size());
}

int main(int argc, char **argv) {
    MPI_Init(&argc,&argv);

    t_ini = clock();

    //Parallel MPI com OpenMP Method
    cout << "Parallel MPI com OpenMP Method: " << endl;
    char output[d + 10];
    HPS(output);

    t_fim = clock();
    t_tot = t_fim-t_ini;

    cout << "Parallel MPI with OpenMP Method: " << (t_tot / 1000) << endl;
    cout << output << endl;

    MPI_Finalize();

    system("PAUSE");
    return 0;
} 
```

**例子：**

***输入：***

```
#define d 10
#define n 1000 
```

***输出：***

```
7,4854708606 
```

***输入：***

```
#define d 12
#define n 7 
```

***输出：***

```
2,592857142857 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T21:09:57.580

你在这里有一个错误：

```
void HPS(char* output) {
    ...
    reduce(digits);
    slave(digits);

    ...
} 
```

您应该首先计算然后执行减少而不是相反。改成：

```
void HPS(char* output) {
    ...

    slave(digits);
    reduce(digits);
    ...
} 
```

既然你想使用 MPI + OpenMP，你也可以离开这个：

```
for (i = idP+1; i <= n; i+=numP) 
```

在进程之间进行划分。并且内部循环在线程之间划分：

```
 #pragma omp parallel for private(remainder)
 for (digit = 0; digit < d + 11 && remainder; ++digit) 
```

因此有这样的事情：

```
 for (i = idP+1; i <= n; i+=numP){
        remainder = 1;
        #pragma omp parallel for private(i, remainder, digit)
        for (digit = 0; digit < d + 11 && remainder; ++digit) {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            #pragma omp atomic
            digits[digit] += div;
            remainder = mod * 10;
        }
    } 
```

如果您愿意（与您所做的类似），您还可以通过所有并行任务（线程/进程）划分外循环的工作数量，如下所示：

```
int idT = omp_get_thread_num();      // Get the thread id
int numT = omp_get_num_threads();    // Get the number of threads.
int numParallelTask = numT * numP;   // Number of parallel task
int start = (idP+1) + (idT*numParallelTask); // The first position here each thread will work

#pragma omp parallel
{

for (i = start; i <= n; i+=numParallelTask)

...
} 
```

请注意，我并不是说这会给您带来最佳性能，但这是一个开始。在您的算法在 MPI+OpenMP 中正常工作后，您可以继续使用更复杂的方法。

# php - 避免 PHP 中未定义的索引

> ID：13544744
> 
> 赞同：-6
> 
> 时间：2012-11-24T19:27:15.710
> 
> 标签：php, html

我试图避免未定义的索引。我也使用过 isset，但我无法获得预期的结果。

```
<body>

    <FORM NAME ="form1" METHOD ="POST" ACTION = "test.php">

<INPUT NAME = "search" size="74">
<INPUT TYPE = "Submit" Name = "SearchButton" VALUE = "Search">
</FORM> 

<?php  
    $search =  isset($_POST['search']);
    //$search = $_POST['search'];
if (!isset($_GET[$search])) {
    // category isn't set
    echo 'not set';

} 
 else {

    echo 'set';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:29:49.237

我想你想要

```
$search =  isset($_POST['search']) ? $_POST['search']  : 'some default';      
$search =  isset($_GET['search']) ? $_GET['search']  : 'some default'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:32:09.757

当您执行 $_GET[$search] 时，这将评估为 $_GET[0] 或 $_GET[1]，具体取决于参数 'search' 是否设置为 post 变量。我想你会需要类似的东西

```
if( isset($_POST['search']) ) {
  //do something with the variable
} 
```

# php - PHP mysql_real_escape_string(); 使用mysqli的正确方法是什么？

> ID：13544746
> 
> 赞同：0
> 
> 时间：2012-11-24T19:27:24.413
> 
> 标签：php, mysql, mysqli

它有点难以解释。我已经构建了运行良好的 mysql 函数，并且随着 mysql 的贬值，我需要更改此函数以使用 mysqli 而不是 mysql 方法。我目前有：

```
$con = mysql_connect("host", "username", "pass");
mysql_select_db("db", $con);
$Username = mysql_real_escape_string($_POST['user']);
$Password = hash_hmac('sha512', $_POST['pass'], '&R4nD0m^');
$Query = mysql_query("SELECT COUNT(*) FROM users WHERE username = '{$Username}' AND password = '{$Password}'") or die(mysql_error());
    $Query_Res = mysql_fetch_array($Query, MYSQL_NUM);
    if($Query_Res[0] === '1')
    {
        //add session
        header('Location: newpage.php');
    }
            else {
                echo 'failed login';
            } 
```

现在我已经将 mysqli 应用于此，它没有返回任何数据或错误，但该函数仍然符合要求。

```
$log = new mysqli("host", "user", "pass");
$log->select_db("db");
$Username = $log->real_escape_string($_POST['user']);
$Password = hash_hmac('sha512', $_POST['pass'], '&R4nD0m^');
$qu = $log->query("SELECT COUNT(*) FROM users WHERE username = '{$Username}' AND password = '{$Password}'");
    $res = $qu->fetch_array();
    if($res[0] === '1'){
        //add session
        header('Location: newpage.php');
    }
    else {
        $Error = 'Failed login';
        sleep(0.5);
    }
    echo $res['username'].'              hello';
} 
```

但我不确定为什么这是错误的。我知道这可能是一个简单的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:50:32.040

只是将其作为答案：

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php) http://php.net/manual/en/pdo.prepare.php

例如

```
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:31:03.860

您可以在使用前检查连接是否正在建立`real_escape_string()`

```
if ($log->connect_errno) {
echo "Failed to connect to MySQL: (".$log->connect_errno.")".$log->connect_error;
} 
```

afaik，没有问题`$log->real_escape_string($_POST['user']);`

# mysql - Rails：实现表插入/更新的审计

> ID：13544749
> 
> 赞同：3
> 
> 时间：2012-11-24T19:27:29.623
> 
> 标签：mysql, ruby-on-rails, logging, transactions, audit

我对 ROR 相当陌生，正在从事货物跟踪项目。这个想法是记录对发货位置的所有更改，以便当用户使用跟踪号跟踪他们的发货时，他们会看到当前位置和经过的位置历史记录。

我有一个 shipping 表和一个 shipping_locations 表。

1.  出货量

    ```
    +--------------------------+--------------+------+-----+---------+----------------+
    | Field                    | Type         | Null | Key | Default | Extra          |
    +--------------------------+--------------+------+-----+---------+----------------+
    | id                       | int(11)      | NO   | PRI | NULL    | auto_increment |
    | start_address_id         | int(11)      | YES  |     | NULL    |                |
    | end_address_id           | int(11)      | YES  |     | NULL    |                |
    | transportation_agency_id | int(11)      | YES  | MUL | NULL    |                |
    | customer_id              | int(11)      | NO   | MUL | NULL    |                |
    | status_id                | int(11)      | NO   | MUL | NULL    |                |
    | cargo_id                 | int(11)      | YES  | MUL | NULL    |                |
    | tracking_number          | varchar(255) | NO   | MUL | NULL    |                |
    | mode_of_transport_id     | int(11)      | YES  | MUL | NULL    |                |
    | expected_start_date      | date         | YES  |     | NULL    |                |
    | actual_start_date        | date         | YES  |     | NULL    |                |
    | expected_end_date        | date         | YES  |     | NULL    |                |
    | actual_end_date          | date         | YES  |     | NULL    |                |
    | created_at               | datetime     | NO   |     | NULL    |                |
    | updated_at               | datetime     | NO   |     | NULL    |                |
    | admin_user_id            | int(11)      | YES  | MUL | NULL    |                |
    +--------------------------+--------------+------+-----+---------+----------------+ 
    ```

2.  ship_locations：（位置更新在此表上完成，位于（current_location）下）

    ```
    +------------------+--------------+------+-----+---------+----------------+
    | Field            | Type         | Null | Key | Default | Extra          |
    +------------------+--------------+------+-----+---------+----------------+
    | id               | int(11)      | NO   | PRI | NULL    | auto_increment |
    | shipment_id      | int(11)      | NO   | MUL | NULL    |                |
    | current_location | varchar(255) | YES  |     | NULL    |                |
    | final_location   | text         | YES  |     | NULL    |                |
    | created_at       | datetime     | NO   |     | NULL    |                |
    | updated_at       | datetime     | NO   |     | NULL    |                |
    +------------------+--------------+------+-----+---------+----------------+ 
    ```

3.  Shipment_history（建议）

    领域：

    *   ID
    *   装运编号
    *   当前位置
    *   created_at
    *   更新时间

我想将 shipping_locations 表中的所有更新存储到这个历史表中，以便用户可以获得：

```
Time (Updated_at):----------------------------> Location:(current_location)
1/12/2012 11:30                                  222 John st.
1/12/2012 13:00                                  555 Paul st.
1/13/2012 07:30                                  final_location 
```

如何从控制器实现这一点，以便只有一个更新操作保存到历史表？

更新：

我能够使用此触发器获得货运跟踪日志，谢谢 vladr

分隔符 $$

掉落触发器`shipment_after_update`$$

CREATE TRIGGER `shipment_after_update`AFTER AFTER UPDATE on `shipments` FOR EACH BEGIN INSERT INTO cargo_transit_histories ( `shipment_id`, `current_location`, `final_location`, `updated_at`) 值 (NEW.id, NEW.current_location, NEW.final_location, NOW()); 结束$$

分隔符；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:07:43.613

我不确定我是否正确，如果这是一个好方法，但我会尝试。我建议你让 shipping_history 属于 shipping_locations。

因此，如果 shipping_history 具有 shipping_locations_id 您可以使用 after_update 回调来设置您需要的内容。

ShipmentLocations.model:

```
 #your other code
    after_update :track_changes_in_history

    def track_changes_in_history 
           @shipment_history=Shipment_history.where(:shipment_locations_id=>self.id).first_or_create!
@shipment_history.current_location = self.current_location
#so on
     end 
```

但是在这里，由于您的模型属性，我看不到及时显示其状态的方法。为此，您可能最好单独设置例如`Map location:string`模型，它通过 has_many 声明属于所有其他模型，而不是您可以通过订购位置来显示它在历史中的状态，这属于这批货物。

# javascript - 创建图像云

> ID：13544751
> 
> 赞同：0
> 
> 时间：2012-11-24T19:28:03.173
> 
> 标签：javascript, jquery

我想创建一个图像云，其中图像相互堆叠并根据图像被看到的次数调整大小。

云可能也占用了预定义的空间。是否可以使用 javascript 或者我需要使用 SVG/Canvas？

类似的东西：[hitlantis](http://hitlantis.com/)

任何指针/引用都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:05:00.610

有些东西让你看看：

*   [javascript Image Resize](https://stackoverflow.com/questions/170624/javascript-image-resize) - 您可能需要移动元素以使其看起来正确，但这可能可以在 CSS 中完成
*   [CSS 过渡](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)
*   jQuery [mouseenter](http://api.jquery.com/mouseenter/)和[mouseleave](http://api.jquery.com/mouseleave/)
*   [CSS：悬停](https://developer.mozilla.org/en-US/docs/CSS/:hover)

`:hover`如果您使用正确的过渡/样式，甚至可能不需要 Javascript 。

**编辑：**

对于分层，使用`z-index`. 我不确定你想如何定位你的元素，所以想出一个算法来放置它们（随机可能会很好）。完成后，只需使用`position: absolute`, 设置`top`和`right`到您生成的位置。

可能的放置算法：

*   随机 (easy peasy: `x = Math.random() * maxWidth - radius + centerX`)，与 y 类似
*   [使用 Vogel 模型基于斐波那契](http://en.wikipedia.org/wiki/Fibonacci_number#In_nature)- 确保轻松分发
*   聚类相似图像-这有点困难，取决于您的聚类逻辑

我确定还有其他人。我建议做一个简单的（随机），让一切正常，然后如果你愿意，稍后创建一个更有趣的算法。

# android - 如何使用字符串变量按 id 查找视图？

> ID：13544754
> 
> 赞同：2
> 
> 时间：2012-11-24T19:28:37.860
> 
> 标签：android, findviewbyid

我正在编写一个 android 应用程序，我正在尝试使用嵌套循环初始化一个按钮网格。

我最初通过研究找到了这个当前的解决方案，但我无法弄清楚出了什么问题。

```
for (int i = 0; i < piles.length; i++)
  for (int j = 0; j < piles[0].length; j++) {

        id = getResources().getIdentifier("R.id." + "b" + numplayaz + Integer.toString(i) + Integer.toString(j), "id","app.dj");
        bpiles[i][j] = ((Button) this.findViewById(id));
        bpiles[i][j].setOnClickListener(this);
   }
 } 
```

由于某种原因，当 id 始终设置为 0 并因此将 bpiles[0][0] 设置为空时，然后得到空指针异常。

我尝试了很多小解决方案，但没有任何效果。

有没有人看到我的问题是什么或者有更好的解决方案。

哦，当我看到这篇文章时，我想出了这个。 [带有变体字符串的 Android findViewbyId](https://stackoverflow.com/questions/6679434/android-findviewbyid-with-a-variant-string)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:21:58.927

看起来第一个参数`getIdentifier()`是错误的：

```
id = getResources().getIdentifier("R.id." + "b" + numplayaz + Integer.toString(i) + Integer.toString(j), "id","app.dj");
//             Do not use "R.id." ^^^^^^^ 
```

我们已经知道您正在尝试引用`R`，并且第二个参数指定了 type `"id"`。也改一下：

```
id = getResources().getIdentifier("b" + numplayaz + Integer.toString(i) + Integer.toString(j), "id", "app.dj"); 
```

* * *

字符串的`+`运算符也应该优先，所以你可以`"b" + numplayaz + i + j`. 但是 StringBuilder 可能是您最快的方法并且更易于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:58:23.373

0 表示找不到 id。

1.  您是否检查过您引用的所有 id 是否存在？

2.  使用 getPackageName() 而不是“app.dj”。也许是不完整的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:01:02.987

一旦你建立了你的可绘制名称，你可以使用这个函数来获取它的 ID：

```
public static int getDrawableByName( String name ) {
    int drawableId = 0;

    try {
         Class res = R.drawable.class;
         Field field = res.getField( name );
         drawableId = field.getInt(null);
    }
    catch (Exception e) {
        e.printStackTrace();
    }

    return drawableId;
} 
```

# c++ - 我需要尽可能轻的可复制缓冲区（例如不是零初始化）？

> ID：13544762
> 
> 赞同：2
> 
> 时间：2012-11-24T19:29:05.957
> 
> 标签：c++, stl, buffer

我需要尽可能轻的非常大的原始缓冲区（比方说 MB 多于 KB）。我想让它把数据保存在动态区域中，不一定是可增长的，我会在构建时设置大小。

我想过`std::vector<unsigned char>`但是：

```
std::vector<unsigned char>  a(VERY_BIG_SIZE); 
```

已将数据初始化为`0`- 我不需要这个，我不想为此付费...这是嵌入式系统，CPU/RAM 的使用率已经很高，我想从内存分配但未分配的事实中受益used 只是虚拟分配的（我的意思是它需要一些地址空间，但除非使用它，否则它不会映射到实际内存）。

我也想过：

```
std::vector<unsigned char> a;
a.reserve(VERY_BIG_SIZE);
std::copy(someData..., a.begin()); 
```

它出人意料地按预期工作（我猜这个 UB 不知何故） -`a`整个内存没有初始化，但正如你已经注意到的那样，我无法复制`a`到其他向量，因为`(a.begin()== a.end())`......

* * *

我需要以某种方式解释为什么我没有`push_back(...)/insert(a.end(), ...)/assign(...)`采用第二种方法。

我已经有固定大小的模板类缓冲区：

```
template <size_t SIZE>
class Buffer {
public: 
// this "dirty" solution works, but I would need to add copy stuff by myself...
  Buffer()  { data.reserve(SIZE); }
// this "correct" solution is too heavy:
  Buffer() : data(SIZE) { }

  unsigned char* data() const { return &data[0]; }
private:
  std::vector<unsigned char> data;
  // unsigned char data[SIZE]; // this is not an option because it is not dynamic memory
}; 
```

有什么我可以放在私有部分的东西`Buffer`来处理内存管理，它将是可复制的而不是初始化的......并且内存将是动态分配的（就像 std::Vector 一样），这就是为什么`unsigned char data[SIZE];`不是一个选项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:31:46.337

打包为 1 个字节且其默认构造函数使内容未初始化（即什么也不做）的结构的标准向量应该可以工作。

请注意，您可以对空向量进行批量插入，唯一的初始化将来自传入的数据。即，`vect.insert( vect.end(), random_access_iterator_begin, blah_end )`可能具有您想要的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T19:32:37.623

你几乎走上了正确的轨道`vector::reserve`。

我建议将 reserve 与`vector::assign`and结合使用`vector::push_back`。这正是你想要的。

```
std::vector<unsigned char> a;
a.reserve(VERY_BIG); // check capacity to see how much memory was reserved
std::copy(someData.begin(), someData.end(), 
          std::back_inserter(a)); // allocation free copy
// or
a.assign(someData.begin(), someData.end()); 
```

更新后，我会实现自己的缓冲区。

```
template<std::size_t Size>
class buffer {
public:
  buffer() : b_(new unsigned char[Size]) {}
  buffer(const buffer& other) {
    std::copy(other.begin(), other.end(), this->begin());
  }
  buffer& operator=(const buffer& other) { 
    // intentionally no protection against self assignment
    std::copy(other.begin(), other.end(), this->begin());
    return *this;
  }
  ~buffer() { delete [] b_; }
  // move operations, if desired

  unsigned char* begin() { return b_; }
  unsigned char* end() { return b_ + Size; }
  // const versions...

private:
  unsigned char* b_;
}; 
```

这应该具有您想要的所有特性（堆分配、深度可复制、创建时未初始化）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:47:49.480

所有标准容器都会初始化所有请求的内存。不过，使用`std::vector<unsigned char>`带有保留内存的 a 似乎是一种选择：您始终可以使用添加元素

```
std::vector<unsigned char> a;
a.reserve(VERY_BIG_SIZE);
a.insert(a.end(), new_data.begin(), new_data.end()); 
```

将数据直接放入适当的位置，无需额外初始化。当然，这意味着您实际存储在容器中的数据在容器开始时是连续的。如果您需要访问大缓冲区中的随机位置并且希望能够只复制相应的部分，那么事情就会变得更加复杂，并且标准 C++ 库中没有任何东西可以轻松地做到这一点。

顺便说一句，因为您通过使用流缓冲区将数据写入区域的方法链接到这个问题：可以组合该方法，但它比使用向量的存储作为流的输出缓冲区更复杂：因为你d 需要跟踪使可用缓冲区为空所需的向量的大小，并为每个字符递增。这在技术上可行，但会很慢。相反，您将给流缓冲区一个缓冲区并将其传输到您的`std::vector<unsigned char>`on`overflow()`或 when `pubsync()`ing 流缓冲区的末尾（这是`std::flush`触发的原因）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T19:32:55.603

你总是可以做到`unsigned char *a = new unsigned char[n];`的。

# php - .htaccess：如何保持相同的 URL，但在服务器上显示不同的页面

> ID：13544765
> 
> 赞同：-1
> 
> 时间：2012-11-24T19:29:09.213
> 
> 标签：php, linux, apache, .htaccess, nginx

如何保持相同的 URL，但使用 .htaccess 重写规则在服务器上显示不同的页面？我正在研究热链接保护。播放列表通过以下链接生成：`http://site.com/get.playlist.php?`

完整链接：

```
http://site-1.com/get.playlist.php?playlist=http://site.com/video/34141ce7760f58f0c3eb5e0c758afb69/pl/playlist.txt&hash=34141ce7760f58f0c3eb5e0c758afb69 
```

我想重定向链接

```
http://site-2.com/video/34141ce7760f58f0c3eb5e0c758afb69/pl/playlist.txt 
```

到

```
http://site-1.com/get.playlist.php?playlist=http://site.com/video/34141ce7760f58f0c3eb5e0c758afb69/pl/playlist.txt&hash=34141ce7760f58f0c3eb5e0c758afb69 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:17:59.037

那将是这样的：

```
 RewriteRule ^video/(\w+)/(\w+)/(\w+)$ http://site-1.com/get.playlist.php?playlist=http://site.com/video/$1/$2/$3&hash=$1 
```

尽管这可能会导致 url 无效，但您需要对查询字符串中的`:`和等字符进行 url 编码。`/`

另一个问题是重定向到不同的域，因此浏览器地址栏中的 url 可能会发生变化。

它是否真的在不同的域上，因为您的问题标题似乎暗示了其他方面？

如果没有，您可以将其更改为：

```
 RewriteRule ^video/(\w+)/(\w+)/(\w+)$ /get.playlist.php?playlist=http://site.com/video/$1/$2/$3&hash=$1 
```

# php - 如何删除所有不在 MySQL 时间范围内的条目？

> ID：13544766
> 
> 赞同：0
> 
> 时间：2012-11-24T19:29:13.777
> 
> 标签：php, mysql, sql

我有一个具有以下结构的连接表：

```
->ip
->first (datetime of the entry creation)
->last (datetime of last update to the entry) 
```

日期时间的格式为`Y-m-d H:i:s`.

现在我想删除每个具有`last - first > 5 minutes`as 的条目`true`。如何在 SQL 查询中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:30:44.217

只需将其添加为 where 条件

```
DELETE FROM `table` WHERE `last` - `first` > 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:24:26.150

使用[TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

```
DELETE FROM `tableName` WHERE TIMESTAMPDIFF(MINUTE,`first`,`last`) > 5 
```

# orchardcms - Orchard 中的 ParentPath 令牌是什么以及如何使用它？

> ID：13544771
> 
> 赞同：1
> 
> 时间：2012-11-24T19:29:20.540
> 
> 标签：orchardcms

在阅读源代码以了解[如何在 Orchard 中执行分层 URL 时](https://stackoverflow.com/questions/13540933/whats-the-recommended-approach-for-hierarchical-urls-in-orchard)，我在以下位置遇到了这个问题`SlugTokens.cs`：

```
// /path/to/parent-item/
.Token("ParentPath", T("Parent Path"), T("The parent item's path and slug with an appended forward slash if non-empty")); 
```

这是在哪里使用的？内容类型是否具有可以用来创建层次结构的父属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:47:01.963

是的，如果您的内容类型有 Common 部分（大多数应该有），那么就有一个 Container 属性。它也可以从令牌中获得：`{Content.Container.Path}/{Content.Slug}`例如，博客文章的自动路由模式。我认为它相当于`{Content.ParentPath}/{Content.Slug}`.

# php - PHP/WSO2：收到错误：缺少带有仅签名选项的 SOAP 标头

> ID：13544772
> 
> 赞同：2
> 
> 时间：2012-11-24T19:29:37.207
> 
> 标签：php, wso2

我坚持为我的客户开发 WSDL 客户端。我是 PHP/WSO2 的新手，所以请耐心等待我的差距 :) 问题是什么：客户端可以连接到服务器，但接收

```
wso2-wsf-php-src-2.1.0/src/wsf_wsdl.c(1073) [wsf_wsdl]Fault payload is <soap:Faulxmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><faultcode xmlns:ns1="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">ns1:InvalidSecurity</faultcode><faultstring>An error was discovered processing the &lt;wsse:Security&gt; header</faultstring></soap:Fault> 
```

我无法更改服务器配置，也无法获取有关如何配置服务器的信息（WSPolicy 等）。WSDL 服务提供商告诉我，服务器端使用了以下属性：签名、无加密、issuerSerial 就是这样。同样，客户端可以连接到服务器（证书正确），但响应时出现错误。

```
<wsp:Policy xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
<wsp:ExactlyOne>
    <wsp:All>
        <sp:AsymmetricBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
            <wsp:Policy>
                <sp:InitiatorToken>
                    <wsp:Policy>
                        <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                            <wsp:Policy>
                                <sp:WssX509V3Token10/>
                            </wsp:Policy>
                        </sp:X509Token>
                    </wsp:Policy>
                </sp:InitiatorToken>
                <sp:RecipientToken>
                    <wsp:Policy>
                        <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Never">
                            <wsp:Policy>
                                <sp:WssX509V3Token10/>
                            </wsp:Policy>
                        </sp:X509Token>
                    </wsp:Policy>
                </sp:RecipientToken>
                <sp:AlgorithmSuite>
                    <wsp:Policy>
                        <sp:Basic256Rsa15/>
                    </wsp:Policy>
                </sp:AlgorithmSuite>
                <sp:Layout>
                    <wsp:Policy>
                        <sp:Strict/>
                    </wsp:Policy>
                </sp:Layout>
            </wsp:Policy>
        </sp:AsymmetricBinding>
        <sp:Wss10 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
            <wsp:Policy>
                <sp:MustSupportRefIssuerSerial/>
            </wsp:Policy>
        </sp:Wss10>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
            <sp:Body/>
            <sp:Header Namespace="http://www.w3.org/2005/08/addressing"/>
        </sp:SignedParts>
    </wsp:All>
</wsp:ExactlyOne> 
```

还有来自客户的一些代码：

```
private function getWSPolicy() {
    $policyXML = file_get_contents("signp.xml");
    $policy = new WSPolicy(array("security"=>$policyXML));
    return $policy;
} 

private function getWSSecurityToken() {
    $clientPrivateKeyPath = 'ssl/key.pem';
    $clientCertificate = 'ssl/cert-only.pem';
    $serverPem = 'ssl/server.pem';

    $pvt_key = ws_get_key_from_file($clientPrivateKeyPath);
    $pvt_cert = ws_get_cert_from_file($clientCertificate);
    $rec_cert =  ws_get_cert_from_file($serverPem);

    $sec_token = new WSSecurityToken(array("privateKey" => $pvt_key,
                    "certificate" => $pvt_cert,
                                            "receiverCertificate" => $rec_cert
                                     ));
    return $sec_token;
}

public function getClient() {
    if ($this->webpay_client == null) {
    $serverPem = 'ssl/newcert.pem';
    $wsdl_xml = "service.wsdl";
        $this->webpay_client = new WSClient
                (
                    array ("wsdl" => $wsdl_xml,
                        "classmap" => $this->getClassMap(),
            "policy" => $this->getWSPolicy(),
                        "securityToken" => $this->getWSSecurityToken(),
            "HTTPMethod" => "post",
            "useSOAP" => 1.1,
            "CACert" => $serverPem,
                        )
                );
    }
    return $this->webpay_client;
} 
```

也许有人可以帮助/指出我如何解决这个问题？或者如何调试以设置其他一些选项？（Tcpdump 显示消息并提到响应）。

编辑：我在 wsf 日志中发现 WSPolicy 中的其他策略已发送到服务器：

```
wso2-wsf-php-src-2.1.0/src/wsf_policy.c(221) [WSF/PHP] creating rampart client outgoing policy node 
     <wsp:Policy xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy"><wsp:ExactlyOne><wsp:All><sp:AsymmetricBinding xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702"><wsp:Policy><sp:InitiatorToken><wsp:Policy><sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient"><wsp:Policy><sp:WssX509V3Token10></sp:WssX509V3Token10></wsp:Policy></sp:X509Token></wsp:Policy></sp:InitiatorToken><sp:RecipientToken><wsp:Policy><sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Never"><wsp:Policy><sp:WssX509V3Token10></sp:WssX509V3Token10></wsp:Policy></sp:X509Token></wsp:Policy></sp:RecipientToken><sp:AlgorithmSuite><wsp:Policy><sp:Basic256Rsa15></sp:Basic256Rsa15></wsp:Policy></sp:AlgorithmSuite><sp:Layout><wsp:Policy><sp:Strict></sp:Strict></wsp:Policy></sp:Layout></wsp:Policy></sp:AsymmetricBinding><sp:Wss10 xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702"><wsp:Policy><sp:MustSupportRefKeyIdentifier></sp:MustSupportRefKeyIdentifier><sp:MustSupportRefIssuerSerial></sp:MustSupportRefIssuerSerial><sp:MustSupportRefEmbeddedToken></sp:MustSupportRefEmbeddedToken></wsp:Policy></sp:Wss10></wsp:All></wsp:ExactlyOne></wsp:Policy> 
```

这会产生这样的错误吗？

# javascript - 是否可以用easeljs 创造出不断生长的花朵效果？

> ID：13544781
> 
> 赞同：0
> 
> 时间：2012-11-24T19:30:30.333
> 
> 标签：javascript, canvas, html5-canvas, easeljs

我正在尝试使用easeljs 为触摸设备创建一个html5 游戏。我想要实现的效果之一是当玩家在屏幕上向上滑动时，一朵花会动态（随机）生长，让蝴蝶休息​​。

可以用easeljs做到这一点吗？谢谢。

例子：

[http://onecm.com/projects/canopy/](http://onecm.com/projects/canopy/)

[http://www.openrise.com/lab/FlowerPower/](http://www.openrise.com/lab/FlowerPower/)

# ms-access - 如何确保将空文本框文本作为 DBNull 输入到数据库中？

> ID：13544785
> 
> 赞同：1
> 
> 时间：2012-11-24T19:31:00.110
> 
> 标签：ms-access, parameters, textbox, oledb, dbnull

我有一个包含 18 个文本框的数组，如何指定哪个文本框为空，以便我可以将`DBNull`参数传递给我的数据库访问层？我正在使用带有 Ms Access 的 OleDb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:57:52.310

这是一种允许从零长度字符串往返 NULL 的解决方案。

```
// <custom:NullableTextBox runat="server" id="Field1" />
// In code behind bind & unbind using Field1.NullableValue instead of Field1.Text
// In web config, update pages/controls as such with MyApp replaced with the 
// assembly name of your app
// <pages>
//      <controls>
//          <add  tagPrefix="custom" namespace="Custom" assembly="MyApp"/>
//     </controls>
//  </pages>
public class NullableTextBox :TextBox
{
    public object NullableValue
    {
        set
        {
            ViewState["IsDbNull"] = DBNull.Value==value;
            Text = value.ToString();
        }
        get
        {
            bool isNull = false;
            if (ViewState["IsDbNull"] != null)
            {
                isNull = Convert.ToBoolean(ViewState["IsDbNull"]);
            }

            if (isNull
                    && string.IsNullOrEmpty(Text.Trim()))
            {
                return DBNull.Value;
            }
            else
            {
                return Text;
            }
        }
    }
} 
```

# sql - Single Row Subquery (Oracle SQL)

> ID：13544787
> 
> 赞同：0
> 
> 时间：2012-11-24T19:31:08.617
> 
> 标签：sql, oracle

```
SELECT name from SUPPLIER
WHERE code =
(SELECT code FROM STOCK GROUP BY code HAVING COUNT(DISTINCT code)>=3); 
```

I am using SQLPLUS. When the query returns a single result I get the answer I am looking for. However, when it returns more than one row I get this error message:

> ORA-01427: single-row subquery returns more than one row

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:49:27.100

there are two possibilities: one thing is to repair the sub-query so that it would always return only one row, other possibility is to use `IN` or `ANY` :

```
SELECT name from SUPPLIER
WHERE code in (SELECT code FROM STOCK GROUP BY code HAVING COUNT(DISTINCT code)>=3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:54:12.040

In your subquery for a single row operation, multiple rows are being returned which won't be `true` (i.e `=` can only compare one value).

Using the `group by` keyword, multiple rows are being returned and that's why the error will occur.

The solution is to use `IN`.

# c++ - 拆分包含逗号分隔条目的字符串流

> ID：13544788
> 
> 赞同：3
> 
> 时间：2012-11-24T19:31:17.277
> 
> 标签：c++, string, stream, operator-overloading, stringstream

我有两个字符串，如下所示：

```
string text1 = "you,are,good";
string text2 = "1,2,3,4,5";
stringstream t1(text1);
stringstream t2(text2); 
```

我正在使用以下代码将其解析为逗号分隔的数据

```
template <typename T>
std::istream &operator>>(std::istream &is, Array<T> &t)
{
    T i;
    while (is >> i)
    {
        t.push_back(i);

        if (is.peek() == ',')
            is.ignore();
    }
    return is;
} 
```

其中“是”是 t1 或 t2。这将 text2 分开，但使用 text1 失败。你们能帮我解决这个问题并告诉我为什么它不适用于字符串吗？我需要一个可以解析字符串和数字的通用代码。

感谢您的任何努力:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:37:08.497

如果您需要以逗号精确拆分字符串，我知道的最简单的方法是重新定义流空间的含义。这很容易更换`std::ctype<char>`刻面。这是我之前发布的版本...

```
#include <iostream>
#include <iterator>
#include <string>
#include <set>
#include <algorithm>

using namespace std;

typedef string T; // to simplify, always consider T as string

template<typename input_iterator>
void do_something(const input_iterator& first, const input_iterator& last) {
    const ostream_iterator<T> os(cout, "\n");
    const set<T> words(first, last);
    copy(words.begin(), words.end(), os);
}

#include <locale>
template <char S0, char S1>
struct commactype_base {
    commactype_base(): table_() {
        std::transform(std::ctype<char>::classic_table(),
                       std::ctype<char>::classic_table() + std::ctype<char>::table_size,
                       this->table_, 
                       [](std::ctype_base::mask m) -> std::ctype_base::mask {
                           return m & ~(std::ctype_base::space);
                       });
        this->table_[static_cast<unsigned char>(S0)] |= std::ctype_base::space;
        this->table_[static_cast<unsigned char>(S1)] |= std::ctype_base::space;
    }
    std::ctype<char>::mask table_[std::ctype<char>::table_size];
    static std::ctype_base::mask clear_space(std::ctype_base::mask m) {
        return m & ~(std::ctype_base::space);
    }
};
template <char S0, char S1 = S0>
struct ctype:
    commactype_base<S0, S1>,
    std::ctype<char>
{
    ctype(): std::ctype<char>(this->table_, false) {}
};

int main() {
    std::cin.imbue(std::locale(std::locale(), new ::ctype<',', '\n'>));
    const istream_iterator<T> is(cin), eof;
    do_something(is, eof);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T19:45:03.087

istream`>>`运算符在应用于字符串时会丢弃最终的初始空格并读取到第一个“空格”。

它适用于任何类型（包括 int）。它在您的代码中有效，因为在“，”“int reader”失败，并假设以下是其他内容。

读取逗号分隔字符串的最简单方法是使用`std::getline`函数，将 a`','`作为分隔符。

在您的情况下，您的模板功能

```
template <typename T>
std::istream &operator>>(std::istream &is, Array<T> &t)
{ ...... } 
```

仍然有效，但需要专业化

```
std::istream &operator>>(std::istream &is, Array<std::string> &t)
{
    std::string r;
    while(std::getline(is,r,','))
        t.push_back(r);
    return is;
} 
```

# scala - unfiltered：什么时候选择netty

> ID：13544792
> 
> 赞同：7
> 
> 时间：2012-11-24T19:31:28.980
> 
> 标签：scala, jetty, netty, unfiltered

我在 unfiltered 中做了一个快速测试，比较了 jetty 和 netty 作为底层连接处理程序的吞吐量。只需提供（内存缓存的）图像并对其进行负载测试。我的发现是性能没有显着差异。

除此之外，我的印象是两者都具有相似的缩放功能，例如暂停连接。

此外，unfiltered 足以为我们提供与两个框架非常相似（如果不相同）的接口，因此您不能真正说一个更容易使用另一个。

所以我想知道，为什么 unfiltered 会给我们这两个选择？是否有任何情况下您会选择 netty 而不是 jetty（或相反）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T05:35:17.843

我个人的想法：我只使用嵌入式码头作为 servlet 容器。使用netty我可以一一处理http包，自定义我自己的http post数据存储。IMO，我认为它们都是锋利的刀，但如果你愿意，网状可以变成针。

# php - 简单 XML 元素无法解析 .atom 文件中的字符串

> ID：13544796
> 
> 赞同：0
> 
> 时间：2012-11-24T19:31:40.723
> 
> 标签：php, xml, parsing, simplexml, atom-feed

我的这段代码由一个用 file_get_contents 包裹的 .atom 文档获取：

```
<entry>
    <link type="text/html" rel="alternate" href="..."/>
</entry> 
```

我的目标是将第一个 URL 提取到 entry 标记中的 href 属性中，我尝试解析：

```
$xml = new SimpleXMLElement($XML_file);
$link = $xml->entry[0]->link;
print $link; 
```

但是 shell 没有给我任何输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:39:04.973

你试过了吗？由于您的链接元素看起来是空的。

```
<entry>
    <link type="text/html" rel="alternate" href="...">Something</link>
</entry> 
```

而不是你的PHP？

这就是我的观点，这正是你试图回应的。获取属性

[http://www.php.net/manual/en/simplexmlelement.attributes.php](http://www.php.net/manual/en/simplexmlelement.attributes.php)

```
$text = '<entry><link type="text/html" rel="alternate" href="..." /></entry>';
$xml = simplexml_load_string($text);
$linkAttributes = $xml->link->attributes();
foreach ($linkAttributes as $key => $value)  {
    echo $key . '::' . $value . PHP_EOL;
} 
```

输出：

```
type::text/html
rel::alternate
href::... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:40:56.007

当您加载一个 xml 文档时，该文档*是*根元素（在本例中`<entry>`）。因此，您想要：

```
$xml = new SimpleXMLElement($XML_file);
$link = $xml->link;
print $link; 
```

# css - 标签掉落 标记内联块 IE 8

> ID：13544797
> 
> 赞同：0
> 
> 时间：2012-11-24T19:31:42.107
> 
> 标签：css, layout, internet-explorer-8

我有一个包含三个子节点的 div

和另一个

在 chrome 中，所有三个 div 都内联显示，父 div 高度为 25px

在 IE 中，div 标签下拉是因为

下面的标签我有复制可粘贴代码，将为您重现问题

```
 <style>
        .left{
        float:left;
        }

        .right{
        float:right;
        }

        .grippie{
            width:2px;
            background:black;
            display:inline-block;
            z-index:200;
            height:100%;
            zoom:1;
            z-index:200;
            *display:inline;
        }

        .task P{
        width:90%;
        display:inline;
        }
        .task{
            position:absolute;
            z-index:50;
            text-align:center;
            vertical-align:center;
            overflow:hiddesn;
        }

        /* task rag */
        .task.red{
            background: rgb(242,55,55); /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIxJSIgc3RvcC1jb2xvcj0iI2YyMzczNyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZjNhM2EiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
            background: -moz-linear-gradient(top,  rgba(242,55,55,1) 1%, rgba(255,58,58,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,rgba(242,55,55,1)), color-stop(100%,rgba(255,58,58,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(242,55,55,1) 1%,rgba(255,58,58,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(242,55,55,1) 1%,rgba(255,58,58,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(242,55,55,1) 1%,rgba(255,58,58,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(242,55,55,1) 1%,rgba(255,58,58,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f23737', endColorstr='#ff3a3a',GradientType=0 ); /* IE6-8 */
        }

        .task.green{
            background: rgb(168,220,24); /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2E4ZGMxOCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM4ZmMzMDAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
            background: -moz-linear-gradient(top,  rgba(168,220,24,1) 0%, rgba(143,195,0,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(168,220,24,1)), color-stop(100%,rgba(143,195,0,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(168,220,24,1) 0%,rgba(143,195,0,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(168,220,24,1) 0%,rgba(143,195,0,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(168,220,24,1) 0%,rgba(143,195,0,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(168,220,24,1) 0%,rgba(143,195,0,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a8dc18', endColorstr='#8fc300',GradientType=0 ); /* IE6-8 */

        }

        .task.amber{
            background: rgb(241,218,54); /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2YxZGEzNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlZmRjNWYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
            background: -moz-linear-gradient(top,  rgba(241,218,54,1) 0%, rgba(239,220,95,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(241,218,54,1)), color-stop(100%,rgba(239,220,95,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(241,218,54,1) 0%,rgba(239,220,95,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(241,218,54,1) 0%,rgba(239,220,95,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(241,218,54,1) 0%,rgba(239,220,95,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(241,218,54,1) 0%,rgba(239,220,95,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f1da36', endColorstr='#efdc5f',GradientType=0 ); /* IE6-8 */
        }

        </style>

<div id="AEW1T3Task" class="task amber" style="height: 25px; width: 103px; top: 101px; left: 312px;">
    <p>Style IT<p/>
    <div id="AEW1T3Taskgrippie" class="grippie right"></div>
    <div class="grippie left"></div>
</div> 
```

**编辑：**

这是上面代码的 jsFiddle：http: [//jsfiddle.net/7R2uy/](http://jsfiddle.net/7R2uy/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T19:42:37.163

这将解决您的问题，将此代码放在 html 文件的顶部：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

由于 DOCTYPE div-s 与 p 内联正确呈现。

为了证明我的观点，请看[这里](http://www.fajrunt.com/test/index.html)。

还要注意 inline-block 有一些宽度[问题](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)。如果可能的话，使用 display: block; 和浮动：左（右）。

# objective-c - UITextAttributeFont 在设备上导致 NSInvalidArgumentException 但在模拟器中没有

> ID：13544801
> 
> 赞同：1
> 
> 时间：2012-11-24T19:31:48.327
> 
> 标签：objective-c, ios6, uinavigationbar

我正在自定义`UINavigationBar`iOS 6 下的 iOS 应用程序。因此，我正在使用`setTitleTextAttributes`来执行此操作。

不过具体设置

```
NSDictionary *attribute = @{UITextAttributeFont : [UIFont fontWithName:@"Bernard MT Condensed" size:21.0]}; 
```

导致应用程序在设备上崩溃，但*不在*模拟器中崩溃，以下情况除外：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: 
attempt to insert nil object from objects[0]' 
```

我发现这个[问题](https://stackoverflow.com/a/5499925/746968)似乎属于同一类型，但我的设备*和*模拟器都设置为*完全相同的*区域设置（语言、区域格式）。

值得注意的一个事实是，在这两种环境中，区域设置都设置为美式英语，但我显示的是带有丹麦特殊字符的丹麦区域格式的文本，但是，如前所述，它*确实在模拟器上工作。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:09:58.543

您使用的字体是自定义字体，需要将字体文件添加到应用程序的资源和 Info.plist 中的条目。

文件名大小写在真实设备上很重要，但在模拟器上不重要。您需要确保 Info.plist 中的条目与实际字体文件的真实文件名（包括大小写）匹配。

对于那些认为使用模拟器就足够了的人来说，这是在真实设备上进行测试至关重要的众多原因之一。

# mysql - 连接没有中央键源表的列

> ID：13544803
> 
> 赞同：1
> 
> 时间：2012-11-24T19:31:59.113
> 
> 标签：mysql, sql

假设我有以下表格：

```
+---------------------+
|   Item_Color_Meta   |
+---------------------+
| ID      |   value   |
+---------------------+
|   1     |   'red'   |
|   4     |   'blue'  |
+---------------------+

+---------------------+
|   Item_Height_Meta  |
+---------------------+
| ID      |   value   |
+---------------------+
|   1     |   '2inch' |
|   2     |   '7inch' |
|   6     |   '12inch'|
+---------------------+ 
```

我有许多这样的表，其中包含 ID 和值。我想创建一个结果集，它为所有 Id 返回一行，每个表都有一列，因此在上述情况下，结果如下所示：

```
ID               Color_Meta                Height_Meta
1                  'red'                     '2inch'
2                   NULL                     '7inch'
4                  'blue'                    NULL
6                   NULL                     '12inch' 
```

我遇到的问题是加入语句，最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:35:00.040

你需要`full outer join`

```
select
    isnull(ICM.ID, IHM.ID) as ID, ICM.Color_Meta, IHM.Height_Meta
from Item_Color_Meta as ICM
    full outer join Item_Height_Meta as IHM on IHM.ID = ICM.ID 
```

如果你有超过 2 张桌子，你可以考虑这样

**更新**是的，我忘记了 MySQL 不支持`full outer join`，所以这个无论如何都可以工作:)

```
select
    A.ID, T1.Column1, T2.Column2, T3.Column3
from 
(
    select TT1.ID from Table1 as TT1 union
    select TT2.ID from Table2 as TT2 union
    select TT3.ID from Table3 as TT3
) as A
    left outer join Table1 as T1 on T1.ID = A.ID
    left outer join Table2 as T2 on T2.ID = A.ID
    left outer join Table3 as T3 on T3.ID = A.ID 
```

这种语法很容易修改，你可以添加额外的表

检查[**SQL 小提琴示例**](http://sqlfiddle.com/#!2/fae7f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:37:15.397

```
select  id
,       min(Color_Meta)
,       min(Height_Meta)
from    (
        select  id
        ,       value as Color_Meta
        ,       null as Height_Meta
        from    Item_Color_Meta 
        union all
        select  id
        ,       null
        ,       value
        from    Item_Height_Meta
        ) as SubQueryAlias
group by
        id 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/21356/2/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:11:27.250

```
 select c.id, c.val Color_Meta, h.val Height_Meta
    from Item_Color_Meta c
    left outer join Item_Height_Meta h on c.id = h.id

    UNION

    select h.id, c.val Color_Meta, h.val Height_Meta
    from Item_Height_Meta h
    left outer join Item_Color_Meta c on c.id = h.id 
```

# java - 柏林噪音不起作用

> ID：13544805
> 
> 赞同：2
> 
> 时间：2012-11-24T19:32:16.340
> 
> 标签：java, random, blur, noise, perlin-noise

我的 Perlin Noise 生成器（再次）有点问题。我已经阅读了多篇关于它如何工作的文章。我用以下代码实现了它：

```
package PerlinNoise;
import java.util.Random;

public class PerlinNoise {

private long seed;
private Random rand;
private float f;

public PerlinNoise(long seed, float f) {
    this.seed = seed;
    this.f = f;
    rand = new Random();
}

//interpolates generated noise
public float getInterpolatedNoise(float x, float y) {
    float a = (int) Math.floor((double) x / f);
    float A = a + 1;
    float b = (int) Math.floor((double) y / f);  //<-- define the points around the point
    float B = b + 1;
    return cosineInterpolate(
            cosineInterpolate((float) getNoise(a, b), (float) getNoise(A, b), (float) (x - a * f) / f),
            cosineInterpolate((float) getNoise(a, B), (float) getNoise(A, B), (float) (x - a * f) / f),
            (float) (y - b * f) / f); //<-- interpolates everything 
}

//cosine interpolation
private float cosineInterpolate(float a, float b, float x) {
    float f = (float) ((1f - Math.cos(x * Math.PI)) * .5f);
    return a * (1f - f) + b * f;
}

//generates random noise value between -1.0 and 1.0
private float getNoise(float x, float y) {
    if(y < 0) {
        rand.setSeed((long) (332423 * (Math.sin(Math.cos(x) * x) + Math.cos(Math.sin(y) * y) + Math.tan(seed))));
    }else{
        rand.setSeed((long) (432423 * (Math.sin(x) + Math.cos(y) + Math.tan(seed))));
    }
    float n = (float)(((float)rand.nextInt(255) - (float)rand.nextInt(255)) / 255.0f);
    return n;
} 
```

这是我将所有八度音阶加在一起的时候：

```
 //performs perlin noise function
public static float[][] getPerlinNoise(int octaves, long seed) {
    float[][] noise = new float[Main.csX][Main.csY];
    for(int z = 0; z < octaves; z++) {
        float f = (float)Math.pow(2, z);
        PerlinNoise oct = new PerlinNoise(seed, f);
        for(int y = 0; y < Main.csY; y++) {
            for(int x = 0; x < Main.csX; x++) {
                noise[x][y] = (noise[x][y] + oct.getInterpolatedNoise(x * f, y * f)) * (float)Math.pow(p, z); //<- pumps out numbers between -1.0 and 1.0
            }
        }
    }
    return noise;
} 
```

抱歉那里有巨大的代码转储。当我运行它时，代码一切正常，但我没有得到 Perlin 噪音。我只是得到这个：

![绝对不是柏林噪音..](../Images/d4b75b9ef4fa3b8d0c90da0e8fb7c5a2.png)

这比其他任何东西都更模糊，混合的噪音。即使我添加更多八度音阶和/或增加持久性，我也会得到非常相似的结果。我使用[这篇](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)文章作为构建代码的参考（也是[这篇](http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html)文章）。因此，如果有人对为什么这不起作用有任何想法，请发表评论/回答。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:11:21.343

我遇到了这个问题，对于刚开始使用 Perlin Noise 的人来说，这很常见。我相信正在发生的事情是您在相距太远的点对柏林噪声进行采样。尝试将 f 乘以 0.1，看看是否有帮助。另外，首先尝试只使用一个八度音程，它会帮助您调试。

# scala - Scala 的快速文本编辑器 - Windows

> ID：13544807
> 
> 赞同：3
> 
> 时间：2012-11-24T19:32:30.910
> 
> 标签：scala, editor

我通常`eclipse`用于我的 Scala 项目。但是对于即时和快速的脚本，我需要一个简单的文本编辑器来编写快速的 Scala scipts。哪个是 Scala 最好的编辑器？

Notepad++ 仍然不符合 Scala。他们确实有插件，但不完整。

PS：我的操作系统是windows。此[链接](https://stackoverflow.com/questions/3626203/text-editor-for-scala)存在，但提供的选项适用于 Linux，我需要适用于 windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:44:44.530

[Sublime text 2](http://www.sublimetext.com/)在所有平台上都是非常流行的选择。乍一看很简单，但非常强大且可通过插件扩展。Scala 语法高亮是开箱即用的。

经典的 VIM (gvim) 和 emacs 在 Windows 上也可用。他们有一定的学习曲线，但时间投入得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:15:13.053

试试[Scala WorkSheet](https://github.com/scala-ide/scala-worksheet/)，它是官方[Scala-IDE](http://www.scala-ide.org)的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T22:09:57.193

尝试[scala 编辑](https://code.google.com/p/scala-edit/)

非常简单的 scala 文本编辑器。

# python - python - 为什么可以扩展修改没有全局指定的值？

> ID：13544811
> 
> 赞同：2
> 
> 时间：2012-11-24T19:32:37.993
> 
> 标签：python

```
>>> x = []
>>> y = [1,2,3]
>>> def func1(L):
...     x+=L
... 
>>> def func2(L):
...     x.extend(L)
... 
>>> func1(y)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in func1
UnboundLocalError: local variable 'x' referenced before assignment
>>> func2(y)
>>> x
[1, 2, 3] 
```

为什么 list extend() 方法可以改变非全局变量，而 += 运算符不能？据我了解，只要函数不分配变量，它就可以在没有全局指定的情况下读取它。但在这种情况下，函数确实设置了值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T19:36:33.100

它不设置值，它修改现有值。在 Python 中，将名称绑定到值是一回事，而修改（或改变）值是另一回事。

真正的问题是为什么`+=` *不起作用*，因为对于列表，此操作被定义为还就地修改列表。答案就是，因为那个操作符看起来像赋值，所以为了范围和绑定的目的，决定让它像赋值一样。 [文档](http://docs.python.org/2/reference/simple_stmts.html#augmented-assignment-statements)说（强调）：

> 扩充赋值*计算目标*（与普通赋值语句不同，不能解包）和表达式列表，对两个操作数执行特定于赋值类型的二元运算，*并将结果分配给原始目标*。

换句话说，增强赋值包括作为操作一部分的赋值，因此适用正常的范围/绑定规则。由于目标被评估为目标，如果它是一个函数，它被视为一个局部变量。所以当`x`是一个列表时，`x += newList`实际上就像：

```
x.extend(newList)
x = x 
```

更一般地说，增强赋值可以就地修改操作数，但它仍然会尝试将结果值重新绑定到原始变量。所以`x += other`本质上是这样的：

```
y = x.__iadd__(other)
x = y 
```

# objective-c - 使 UIImage 小于 UIImageView 以查看背景

> ID：13544818
> 
> 赞同：0
> 
> 时间：2012-11-24T19:33:45.183
> 
> 标签：objective-c, ios, uiimageview, uiimage

我正在尝试这样做，以便我有一个带有图像的 UIImageView，而不管它的大小，以便 UIImageView 的背景颜色显示为 UIImage 周围的边框。

我尝试使用图像制作 UIImageView 然后缩小边界，但这没有用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:37:10.280

一个更简单的方法是在图像视图的图层上设置边框：

```
UIImageView *imageView = ... // create image view with image
imageView.layer.borderWidth = 1; // Size as desired
imageView.layer.borderColor = [[UIColor blackColor] CGColor]; // use your own color 
```

您需要导入`<QuartzCore/QuartzCore.h>`才能使这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:40:56.647

Rmaddys 建议创建 amd 颜色的边框还不错。但是，这只有在背景整体颜色相同的情况下才有效。

我能想到的更多选择：1）让你的图像更小。我说的是png（或其他）文件。但是为 UIImageView 选择适当的模式，这样图像就不会被拉伸。2) 在图像文件中包含 alpha 0.0 的边框。3）将您的 UIImageView 嵌入另一个具有空白背景的 UIView 中。这样 UIImage 像往常一样嵌套在 UIImageView 中，但现在 UIImageView 更小了。将它放在一个新 UIView 的中心，该 UIView 的大小与您的 UIImageView 曾经拥有的一样大。

# python - 从python中的列表中排序和检索项目

> ID：13544819
> 
> 赞同：1
> 
> 时间：2012-11-24T19:33:47.113
> 
> 标签：python, list

考虑以下列表：

```
alist = [[1, 'AAA0'], [2, 'AAAA1'], [3, 'BB2BB2'], [4, 'A3A3'], [5, 'A3A3']] 
```

那么如果我想根据第二个插槽对列表进行排序，但同时只获取我使用的内部有“A”的项目：

```
 from operator import itemgetter
 print str([pt for pt in sorted(alist, key=itemgetter(1)) if 'A' in pt[1]]) 
```

我的问题是如何按字母顺序对它们进行排序后，如何先按字符串长度对它们进行分组，然后再对相同的进行分组。就像只能检索 2 'A3A3'。

这

```
if 'A' in pt[1] 
```

正在返回所有包含“A”的项目，而不是包含 1 个“A”的项目。

那么我如何将那些有 1 个“A”、那些有 2 个“A”等的人分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:47:45.657

您可以通过自定义键功能对可迭代的元素进行分组[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
In [1]: from itertools import groupby
In [2]: alist = [[1, 'AAA0'], [2, 'AAAA1'], [3, 'BB2BB2'],
   ...: [4, 'A3A3'], [5, 'A3A3']]
In [3]: key = lambda x: x[1].count('A')
In [4]: for k, g in groupby(sorted(alist, key=key), key=key):
    print k, tuple(g)
   ...:     
0 ([3, 'BB2BB2'],)
2 ([4, 'A3A3'], [5, 'A3A3'])
3 ([1, 'AAA0'],)
4 ([2, 'AAAA1'],) 
```

# ruby-on-rails - RoR 测试驱动开发 - `require'：无法加载此类文件——nokogiri (LoadError)

> ID：13544821
> 
> 赞同：2
> 
> 时间：2012-11-24T19:33:57.150
> 
> 标签：ruby-on-rails, tdd, capybara, ubuntu-12.04

我正在按照本教程开发一些 Ruby on Rails 应用程序。[http://ruby.railstutorial.org/chapters/static-pages#sec-TDD](http://ruby.railstutorial.org/chapters/static-pages#sec-TDD)

我已经创建了`..._spec.rb`文件。

但是当我运行命令时-`bundle exec rspec spec/requests/static_pages_spec.rb`

有一个错误 -`require: cannot load such file -- nokogiri (LoadError).`

谁能帮我？

完整的错误信息：

```
/home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/capybara-2.0.1/lib/capybara.rb:2:in `require': cannot load such file -- nokogiri (LoadError)
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/capybara-2.0.1/lib/capybara.rb:2:in `<top (required)>'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
from /home/karlis/workspace/sample_app/config/application.rb:13:in `<top (required)>'
from /home/karlis/workspace/sample_app/config/environment.rb:2:in `require'
from /home/karlis/workspace/sample_app/config/environment.rb:2:in `<top (required)>'
from /home/karlis/workspace/sample_app/spec/spec_helper.rb:3:in `require'
from /home/karlis/workspace/sample_app/spec/spec_helper.rb:3:in `<top (required)>'
from /home/karlis/workspace/sample_app/spec/requests/static_pages_spec.rb:1:in `require'
from /home/karlis/workspace/sample_app/spec/requests/static_pages_spec.rb:1:in `<top (required)>'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/configuration.rb:784:in `load'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/configuration.rb:784:in `block in load_spec_files'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/configuration.rb:784:in `each'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/configuration.rb:784:in `load_spec_files'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:22:in `run'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:69:in `run'
from /home/karlis/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:07:25.057

解决这个问题的最简单方法是手动更新 capybara 包，它解决了我的问题。“捆绑更新水豚”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T19:27:47.040

就我而言，如果我没有 Gemfile，则会自动定位 gem，但是一旦我创建了一个空文件，我就需要包含 nokogiri 和其他 gem。希望这可以帮助。

# python - 使用自定义字典时如何修复键错误

> ID：13544822
> 
> 赞同：0
> 
> 时间：2012-11-24T19:34:00.853
> 
> 标签：python, dictionary

我正在尝试做以下事情：解析我的音乐文件夹中的所有文件，如果它们是我的最爱，请将它们复制到单独的文件夹中。

为了实现这一点，我正在用我喜欢的曲目解析一个 xml，并使用这些信息来创建一个像这样结构的自定义字典

```
lovedSongs[artist][title] = 1 
```

当我从我的文件夹中解析文件时，我从 id3 标签中读取了歌曲标题和艺术家，理论上，我尝试查看是否`lovedSongs[tagArtist][tagTitle]`为 1

```
for filename in filelist:     
        if filename[-4:] == ".mp3":
            try:
                id3r = id3reader.Reader(filename)
            except UnicodeDecodeError:
                artist = "None"
                title = "None"
            except IOError:
                artist = "None"
                title = "None"
            else:
                artist = ensureutf8andstring(id3r.getValue('performer'))
                title = ensureutf8andstring(id3r.getValue('title'))

            if artist != "None" or title != "None":
                if lovedSongs[artist][title] == 1:
                    print artist + ' - ' + title 
```

当我尝试运行 .py 文件时，我得到一个[字典 Key Error](http://wiki.python.org/moin/KeyError)。我在这里找到了一个潜在的答案：[How to make a python dictionary that return key for keys missing from the dictionary 而不是引发 KeyError？](https://stackoverflow.com/questions/6229073/how-to-make-a-python-dictionary-that-returns-key-for-keys-missing-from-the-dicti)并像下面一样应用它，但我仍然得到关键错误

```
class SongDict(dict):
    def __init__(self, default=None):
        self.default = default

    def __getitem__(self, key):
        if not self.has_key(key):
            self[key] = self.default()
        return dict.__getitem__(self, key)

    def __missing__(self, key):
        return 0 
```

最好的解决方案是什么？使用 try/except 来代替简单的 if?

PS我想我应该提到我是python的新手，只有几个小时的“经验”，这是我尝试学习语言的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:39:57.520

听起来你真正想要的是一个简单的`set`

```
for filename in filelist:     
    if filename.endswith(".mp3"):
        try:
            id3r = id3reader.Reader(filename)
        except (UnicodeDecodeError, IOError):
            pass
        else:
            artist = ensureutf8andstring(id3r.getValue('performer'))
            title = ensureutf8andstring(id3r.getValue('title'))

            if artist != "None" or title != "None":
                if (artist, title) in lovedSongs:
                    print artist + ' - ' + title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:41:42.593

您可以尝试的一件事是使用 a `defaultdict`，参数是 a `defaultdict(dict)`。每当您尝试引用不存在的值时，它都不会引发错误，而是会返回您指定的默认 null 值：

```
In [7]: from collections import defaultdict

In [8]: lovedsongs = defaultdict(lambda: defaultdict(dict))

In [9]: lovedsongs['OAR']['Blackrock'] = 1

In [10]: lovedsongs['Timati']['Moj Put'] = 1

In [11]: lovedsongs
Out[11]: defaultdict(<function <lambda> at 0x24e5ed8>, {'Timati': defaultdict(<type 'dict'>, {'Moj Put': 1}), 'OAR': defaultdict(<type 'dict'>, {'Blackrock': 1})})

In [12]: lovedsongs['Not']['Found']
Out[12]: {}

In [13]: if lovedsongs['Not']['Found'] == 1:
   ....:     print 'Found it'
   ....:
   ....:

In [14]: if lovedsongs['OAR']['Blackrock'] == 1:
   ....:     print 'Found it'
   ....:
   ....:
Found it 
```

通过`defaultdict(lambda: defaultdict(dict))`查看单级（即“更常规”）的`defaultdict`工作方式，可能会更好地理解语法：

```
In [1]: from collections import defaultdict

In [2]: d = defaultdict(int)

In [3]: d['one'] = 1

In [4]: d['two'] = 2

In [5]: d
Out[5]: defaultdict(<type 'int'>, {'two': 2, 'one': 1})

In [6]: d['one']
Out[6]: 1

In [7]: d['three']
Out[7]: 0 
```

我们`defaultdict`用参数声明了`int`- 这意味着如果没有找到一个值，而不是抛出错误，我们只会`0`返回（因为`0`是整数的空值）。如果我们使用`str`，我们会`''`回来，如果我们使用`dict`，我们会得到一本字典。然而，在这种情况下，棘手的部分是您有一个嵌套字典 ( `defaultdict(dict)`)，如果您尝试引用嵌套字典中不存在的键，则会遇到同样的问题：

```
In [13]: d = defaultdict(dict)

In [14]: d['three']['more']
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)

/path/<ipython console> in <module>()

KeyError: 'more' 
```

所以为了让我们的嵌套字典也变成 a `defaultdict`，我们必须做一些小把戏：因为 to 的参数`defaultdict`是需要可调用的（但尚未调用 -> 参见`int`vs. `int()`），我们使用一个`lambda`函数在某种程度上模拟这种行为。在一个非常简单的级别上，将`lambda`视为防止在`defaultdict(dict)`需要时调用 。现在您将拥有一个字典（带有嵌套字典），它将处理两级深度的缺失键而不会引发错误。希望能解释一下。

# python - Python CPU Count 可以在一台 Windows 服务器上工作，但不能在另一台服务器上工作？

> ID：13544826
> 
> 赞同：5
> 
> 时间：2012-11-24T19:34:34.960
> 
> 标签：python, multiprocessing, cpu

我编写了可在 Windows XP 和 Windows Server 2008 64 位上运行的代码。但是我刚刚启动了一个 Amazon Windows 64 位实例并且代码失败了。

很简单，看起来像这样

```
import multiprocessing

processors = multiprocessing.cpu_count()
print processors 
```

我收到一个我不理解的 NotImplementedError 并且文档对解释没有帮助。

我只是不明白为什么它会在一台服务器上运行，而不是在另一个安装相同 Python 2.7 的服务器上运行

还有其他人遇到这个问题/错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T19:43:08.800

它可能只是多处理模块，尝试使用它可能工作的[psutil模块。](https://github.com/giampaolo/psutil)所以在你的情况下，只需这样做：

```
import psutil
processors = psutil.cpu_count()
print processors
>>> 4 
```

我在 Amazon Windows 64 位上试过这个，效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:54:21.343

如果您只需要获取 CPU 计数`psutil`，则可以`ctypes`改用：

```
import ctypes
from ctypes import wintypes

class SYSTEM_INFO(ctypes.Structure):
    _fields_ = [
        ('wProcessorArchitecture', wintypes.WORD),
        ('wReserved', wintypes.WORD),
        ('dwPageSize', wintypes.DWORD),
        ('lpMinimumApplicationAddress', wintypes.LPVOID),
        ('lpMaximumApplicationAddress', wintypes.LPVOID),
        ('dwActiveProcessorMask', ctypes.c_size_t),
        ('dwNumberOfProcessors', wintypes.DWORD),
        ('dwProcessorType', wintypes.DWORD),
        ('dwAllocationGranularity', wintypes.DWORD),
        ('wProcessorLevel', wintypes.WORD),
        ('wProcessorRevision', wintypes.WORD),
    ]

GetSystemInfo = ctypes.windll.kernel32.GetSystemInfo
GetSystemInfo.restype = None
GetSystemInfo.argtypes = [ctypes.POINTER(SYSTEM_INFO)]

def cpu_count():
    sysinfo = SYSTEM_INFO()
    GetSystemInfo(sysinfo)
    num = sysinfo.dwNumberOfProcessors
    if num == 0:
        raise NotImplementedError('cannot determine number of cpus')
    return num 
```

**编辑**：

`NUMBER_OF_PROCESSORS`这是尝试的替代方法，它可能返回与环境变量相同的值。请注意，文档说要使用`GetSystemInfo`，这是 psutil 使用的。这也是使用本机 NT API，通常不鼓励这样做。

```
import ctypes
from ctypes import wintypes

SystemBasicInformation = 0

class SYSTEM_INFORMATION(ctypes.Structure): pass
PSYSTEM_INFORMATION = ctypes.POINTER(SYSTEM_INFORMATION)

class SYSTEM_BASIC_INFORMATION(SYSTEM_INFORMATION):
    _fields_ = [
        ('Reserved1', wintypes.BYTE * 24),
        ('Reserved2', wintypes.LPVOID * 4),
        ('NumberOfProcessors', ctypes.c_ubyte),
    ]

ntdll = ctypes.windll.ntdll
NtQuerySystemInformation = ntdll.NtQuerySystemInformation
NtQuerySystemInformation.argtypes = [
    wintypes.LONG,       # SystemInformationClass
    PSYSTEM_INFORMATION, # SystemInformation
    wintypes.ULONG,      # SystemInformationLength
    wintypes.PULONG]     # ReturnLength

def cpu_count():
    info = SYSTEM_BASIC_INFORMATION()
    retlen = wintypes.ULONG()
    status = NtQuerySystemInformation(SystemBasicInformation,
                                      info, 
                                      ctypes.sizeof(info), 
                                      retlen)
    num = info.NumberOfProcessors
    if status < 0 or num == 0:
        raise NotImplementedError('cannot determine number of cpus')
    return num 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T13:29:42.383

失败是由于 multiprocessing.cpu_count() 依赖于 Windows 上的 NUMBER_OF_PROCESSORS 环境变量，有时可能会丢失。使用 wmi 作为替代品。感谢您的建议[eryksun](https://stackoverflow.com/users/205580/eryksun)。

```
if sys.platform == 'win32':
    import wmi
    c = wmi.WMI(find_classes=False)
    return sum(x.NumberOfLogicalProcessors for x in c.Win32_Processor())
else:
    return multiprocessing.cpu_count() 
```

# jquery - 倒置的 slideDown 向上推东西

> ID：13544830
> 
> 赞同：2
> 
> 时间：2012-11-24T19:35:07.540
> 
> 标签：jquery, slidedown

我知道关于如何制作一个倒置的 slideDown 已经有类似的问题，但他们都没有问如何真正将元素上方的所有东西向上推。我需要的是，当 slideDown 元素向上展开时，该元素的底部（以及下面的所有元素）保持在原位，并且上面的所有元素都向上移动。

我希望你明白我的意思。

这样的事情甚至可能吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:51:53.800

这是相当 CSS 的问题。jQuery`slideDown`只是动画`height`属性，所以如果你想让元素向上收缩，你可以使用以下样式组合：

```
.box {
    position: relative;
}
.box .drop {
    position: absolute;
    bottom: 40px;
}​ 
```

当使用 CSS 属性定位元素时`bottom`，它将向上扩展。[你可以在这里](http://jsfiddle.net/YDedH/)寻找工作示例。

# android - 在 Android 游戏中显示文本

> ID：13544832
> 
> 赞同：1
> 
> 时间：2012-11-24T19:35:24.003
> 
> 标签：android, text, label

这是一个非常简单的问题，我在任何地方都找不到它，也许我没有正确地问它。

我一直在搜索与 Google 和 stackOverflow 上的 TextView 和可变文本有关的内容

我使用andengine 制作了一个游戏，很像俄罗斯方块/宝石迷阵，游戏运行良好，我需要添加一个评分系统并希望将分数输出到屏幕上。

许多与 android 中的文本相关的问题都在谈论 TextView，但是当我使用它时，我会看到一个空白的白色屏幕，上面有我的文本。

我希望能够在整个游戏过程中创建标签、定位并定期更改文本。

我希望能够在不更改 xml 文件的情况下做到这一点，因为我不太擅长。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:01:32.513

在朋友的帮助下，我想出了如何做到这一点。我确信这是非常基本的，但这是我想要的方式，不使用 XML 文件，也没有可以随时更改的文本。

```
// Text related fields.
private ChangeableText mText;
private Font mFont; 
```

在 OnLoadResources

```
public void onLoadResources() {

this.mFontTexture = new BitmapTextureAtlas(256, 256, TextureOptions.BILINEAR);
this.mFont = new Font(this.mFontTexture, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32, true, Color.BLACK);

//Don't forget to load the font (along with other images)
this.mEngine.getTextureManager().loadTextures(this.mTimerImage, this.mbackgroundImage,  this.mFontTexture);
this.mEngine.getFontManager().loadFont(this.mFont); 
```

在 OnLoadScene 中

```
public Scene onLoadScene() 
{   

final Scene scene = new Scene();

//Initialise your other variables...

//Give your text a position on screen, font, and fill it with some text and character count
//I used it for a score to be shown.
mText = new ChangeableText(490, 800, GameActivity.this.mFont, "", 20);

scene.attachChild(mText);
return scene;
} 
```

我将我的文本用于稍后在游戏中显示的可变分数，并且每次玩家的分数增加时，我都会调用 Score 方法。

```
private void Score(int value)
{
    playerScore += value;

    mText.setText(String.valueOf(playerScore));
} 
```

这更新了每一帧的分数，因为我从我的更新方法中调用它。

# objective-c - CoreData 是否适合搜索大量数据？

> ID：13544835
> 
> 赞同：2
> 
> 时间：2012-11-24T19:35:43.763
> 
> 标签：objective-c, ipad, core-data

在我的 iPad 应用程序中，我下载了大量的客户和订单历史信息，我将这些信息保存在内存中并在整个应用程序中使用。然而，对于一些用户来说，下载的数据量变得如此之大，以至于应用程序崩溃。

我刚刚建立了一个 CoreData 存储来将所有客户和订单数据写入磁盘。不过，在我进一步讨论之前，CoreData 是解决此问题的最佳方法吗？我需要能够通过一些参数对这些数据集进行排序并使用它们驱动表视图（CoreData 似乎非常适合），但我还需要查看整个数据集以驱动其他视图。例如，一个字母过滤器，它只显示我有结果的字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T22:40:12.320

Core Data 绝对是首选技术。您会发现您可以非常轻松地解决所有问题并实现您提到的所有功能。

就 iOS 上的数据操作优化（性能和内存）而言，Core Data 确实是一个非常健壮且经过良好测试的框架。如果您想最大限度地发挥 iOS 设备的容量，几乎没有比这更好的了。

例如，最近我参与了一个项目（也涉及大量客户数据），该项目已有几年历史，在管理内存、速度和复杂性时简直碰壁了。对 Core Data 进行重构是轻而易举的事，而且性能提升是巨大的。

Core Data 成功的原因在于它完全隐藏了数据库层并专注于对象图。这导致代码更具可读性和可维护性（与 SQL 语句相反）。虽然理论上您可以在 Core Data 中使用多种存储，但最常见的一种是 SQLite，它是*世界上安装数量最多*的数据库。由于它的速度和占用空间小，它在移动设备上无处不在。

这使我得出结论，Core Data 是适合您的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T01:44:27.887

我最近使用 sqlite 后备存储将我的应用程序从直接的 sqlite 移植到核心数据。我有一个大约 100,000 条记录的合理大小的数据库。我也花了很多时间优化它

尽管所有的苹果文档和公关都说它高效、快速等，但我发现，与直接的 sqlite 相比，对于大量数据，它确实有更高的内存要求并且速度明显慢。快速搜索堆栈溢出将证实这一点。关于速度，内存要求等有很多未解决的问题。

特别是，插入和删除要慢几个数量级。提取通常比直接 sqlite 使用更多的内存。在大多数情况下，核心数据会提取更多数据。例如，在直接 sqlite 中，您可以提取一个整数 id，然后在需要时提取其余数据。coredata 会提取更多数据来做到这一点。删除要求您在删除数据之前先将数据拉下来等。

如果您需要加密您的数据。这是核心数据中的一个挑战，没有人能够真正提供可靠的加密，同时又不破坏诸如 nspredicates 之类的东西。它是否需要编写更少的代码是有争议的。肯定有一个陡峭的学习曲线。核心数据的思维方式与关系数据库的思维方式非常不同。

so why would you use core data? its the additional features, support for undo, batch fetching, manages object updates for you and syncing to iCloud (though this is very buggy to the point that its unusable right now) etc etc. Some things it does for you. you don't need to manage primary keys, relationships etc etc. In the apple ecosystem it seems future proof given new features such as icloud support are being built into core data. Though it does kill your portability if you want to go to android etc.

# android - 使用 android sdk 从 Graph API 获取用户 zip？

> ID：13544836
> 
> 赞同：0
> 
> 时间：2012-11-24T19:36:12.303
> 
> 标签：android, facebook-graph-api, facebook-android-sdk, reverse-geocoding

是否可以从 Facebook sdk for android 获取用户（当前 facebook 认证用户）的邮政编码？我可以回到城市，州。这很好，但我不想为了得到一个简单的城市状态到 zip 的翻译而添加一个完整的地图 api。有什么建议么？我看到这曾经可以通过 Rest api 实现，但不再受支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:37:35.600

不，这是不可能的，因为一个城市/州可以有多个与之关联的邮政编码。您需要他们的具体地址来确定他们的邮政编码，而 Facebook 没有。

# android - 将一个 ID 拆分为两种字体类型

> ID：13544838
> 
> 赞同：1
> 
> 时间：2012-11-24T19:36:34.393
> 
> 标签：android, layout

我在反编译的 android .apk 的布局文件夹中有一个 .xml。有一个 TextView 元素，它有一个 ID ( `android:id="@+id/x"`) 在 ID 中是文本。但我想以粗体字体显示 ID 的前两个字母，并以普通字体显示文本。那么，有没有人知道，我能做些什么来解决这个问题而无需接触 ID。一个答案会很好。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:53:53.667

使用 SpannableString 来实现这一点：

```
SpannableString str = new SpannableString( "abcdefg" );
str.setSpan( new StyleSpan(Typeface.BOLD), 0, 1, 0 );

textView.setText( str ); 
```

它应该给你“ab”加粗，其余文本不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:44:26.967

你的问题有点不清楚。要以不同格式显示 TextView 的各个部分，您需要[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)。就像是：

```
Spannable text = new SpannableString("bold, normal");    
text.setSpan(new TypefaceSpan("bold"), 0, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(text, BufferType.SPANNABLE); 
```

id 就是您引用 TextView 的方式。显示的文本由“android:text”属性引用。

# android - 广播接收器和 PROCESS_OUTGOING_CALLS

> ID：13544844
> 
> 赞同：0
> 
> 时间：2012-11-24T19:36:53.543
> 
> 标签：android, broadcastreceiver

我正在尝试实现一个 BroadcastReceiver 但它不起作用。在虚拟设备上，此应用程序运行良好。在我的真实设备上（Galaxy Nexus - Android 4.1.2）它什么也没做！在真实设备的日志中没有关于应用程序的错误。有任何想法吗？

传出呼叫拦截器.java

```
package com.scoutman.lcr;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class Outgoingcallinterceptor extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {       
        if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) 
        {
            Log.d("INFO","HELLO!!!");
            Toast.makeText(context, "Hello!!!", Toast.LENGTH_LONG).show();
        }          
    }
} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"    package="com.scoutman.lcr" android:versionCode="1" android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">

    <receiver android:name="Outgoingcallinterceptor">
        <intent-filter >
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver>

</application>

</manifest> 
```

日志：

```
11-24 20:18:39.077: I/ActivityManager(306): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.contacts/.activities.DialtactsActivity bnds=[40,1040][168,1168] u=0} from pid 500
11-24 20:18:40.295: D/dalvikvm(306): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-24 20:18:40.311: D/dalvikvm(1173): GC_CONCURRENT freed 295K, 6% free 12162K/12807K, paused 15ms+4ms, total 55ms
11-24 20:18:40.381: D/dalvikvm(306): GC_EXPLICIT freed 761K, 24% free 20098K/26183K, paused 3ms+9ms, total 89ms
11-24 20:18:43.412: I/ActivityManager(306): START {act=android.intent.action.CALL_PRIVILEGED dat=tel:xxxxxxxxxxxxx flg=0x10000000 cmp=com.android.phone/.PrivilegedOutgoingCallBroadcaster (has extras) u=0} from pid 11614
11-24 20:18:43.506: D/PhoneUtils(483): checkAndCopyPhoneProviderExtras: some or all extras are missing.
11-24 20:18:43.522: D/PhoneUtils(483): checkAndCopyPhoneProviderExtras: some or all extras are missing.
11-24 20:18:43.522: I/ActivityManager(306): START {act=com.android.phone.SIP_SELECT_PHONE dat=tel:xxxxxxxxxxxxx flg=0x10000000 cmp=com.android.phone/.SipCallOptionHandler (has extras) u=0} from pid 483
11-24 20:18:43.655: D/CallController(483): placeCall()...  intent = Intent { act=android.intent.action.CALL dat=tel:xxxxxxxxxxxxx (has extras) }
11-24 20:18:43.655: D/PhoneUtils(483): placeCall()... number: xxxxxxxxxxxx, GW: null, emergency? false
11-24 20:18:43.662: I/AudioService(306):  AudioFocus  requestAudioFocus() from AudioFocus_For_Phone_Ring_And_Calls
11-24 20:18:43.662: E/audio_hw_primary(131): Entering IN_CALL state, in_call=0
11-24 20:18:43.678: E/audio_hw_primary(131): Opening modem PCMs
11-24 20:18:43.952: I/ActivityManager(306): START {act=android.intent.action.MAIN flg=0x10840000 cmp=com.android.phone/.InCallScreen u=0} from pid 483
11-24 20:18:43.998: D/dalvikvm(483): GC_CONCURRENT freed 981K, 11% free 14039K/15687K, paused 14ms+4ms, total 61ms
11-24 20:18:44.037: D/PhoneStatusBar(387): disable: < expand icons ALERTS* ticker system_info back home recent clock >
11-24 20:18:44.045: D/AccelerometerListener(483): enable(true)
11-24 20:18:44.061: D/InCallScreen(483): onNewIntent: intent = Intent { act=android.intent.action.MAIN flg=0x10c40000 cmp=com.android.phone/.InCallScreen }, phone state = OFFHOOK
11-24 20:18:44.116: W/IInputConnectionWrapper(11614): showStatusIcon on inactive InputConnection
11-24 20:18:44.514: I/ActivityManager(306): No longer want com.android.settings (pid 12419): hidden #16
11-24 20:18:44.561: I/WindowState(306): WIN DEATH: Window{41e9b4d8 com.android.settings/com.android.settings.Settings paused=false}
11-24 20:18:44.616: D/AccelerometerListener(483): orientation: horizontal
11-24 20:18:47.475: D/InCallScreen(483): internalHangup()...  phone state = OFFHOOK
11-24 20:18:47.475: D/PhoneUtils(483): hangup(): hanging up foreground call
11-24 20:18:47.475: D/PhoneUtils(483): - hangup(Call): regular hangup()...
11-24 20:18:47.811: D/CallNotifier(483): onDisconnect: cause = LOCAL, incoming = false, date = 1353784723664
11-24 20:18:47.819: D/CallNotifier(483): SignalInfoTonePlayer.run(toneId = 98)...
11-24 20:18:47.819: I/PowerManagerService(306): clearUserActivity for 10000ms from now
11-24 20:18:47.827: D/CallNotifier(483): InCallTonePlayer.run(toneId = 4)...
11-24 20:18:48.030: I/ActivityManager(306): START {cmp=com.android.contacts/.activities.DialtactsActivity u=0} from pid 483
11-24 20:18:48.131: D/dalvikvm(306): GC_FOR_ALLOC freed 1209K, 23% free 20211K/26183K, paused 74ms, total 74ms
11-24 20:18:48.139: E/audio_hw_primary(131): Leaving IN_CALL state, in_call=1, mode=0
11-24 20:18:48.139: E/audio_hw_primary(131): Closing modem PCMs
11-24 20:18:48.155: I/ActivityManager(306): moveTaskToBack: 5
11-24 20:18:48.194: D/AccelerometerListener(483): enable(false)
11-24 20:18:48.194: D/PhoneStatusBar(387): disable: < expand icons alerts* ticker system_info back home recent clock >
11-24 20:18:48.311: I/AudioService(306):  AudioFocus  abandonAudioFocus() from AudioFocus_For_Phone_Ring_And_Calls
11-24 20:18:48.311: V/DialpadFragment(11614): Dialpad.onResume,66: qloc,4 dtwd,3 hptc,0 tg,56 fdin,0 tm,1 hnt,1 bes,1 ,0 
11-24 20:18:48.428: D/dalvikvm(1173): GC_CONCURRENT freed 383K, 5% free 12177K/12807K, paused 15ms+4ms, total 45ms
11-24 20:18:48.491: I/ActivityManager(306): Displayed com.android.contacts/.activities.DialtactsActivity: +329ms (total +5s6ms)
11-24 20:18:48.623: D/dalvikvm(1173): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-24 20:18:48.662: D/dalvikvm(1173): GC_EXPLICIT freed 185K, 6% free 12063K/12807K, paused 2ms+2ms, total 39ms
11-24 20:18:49.225: D/dalvikvm(11614): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-24 20:18:49.295: D/dalvikvm(11614): GC_EXPLICIT freed 1248K, 10% free 15160K/16775K, paused 3ms+17ms, total 65ms
11-24 20:18:49.303: I/ActivityManager(306): moveTaskToBack: 110
11-24 20:18:49.412: W/IInputConnectionWrapper(11614): showStatusIcon on inactive InputConnection
11-24 20:18:49.452: D/dalvikvm(306): GC_CONCURRENT freed 993K, 20% free 21179K/26183K, paused 5ms+11ms, total 111ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:39:33.557

尝试将意图过滤器更改为以下内容：

```
<intent-filter android:priority="-1" >
                <action android:name="android.intent.action.NEW_OUTGOING_CALL" />

                <category android:name="android.intent.category.DEFAULT" />
  </intent-filter> 
```

# jquery - 最佳方法灯箱视频和图像

> ID：13544854
> 
> 赞同：0
> 
> 时间：2012-11-24T19:38:22.630
> 
> 标签：jquery, image, video, prototype, lightbox

我正在开发的网页中使用 JQuery 和 Prototype。我正在寻找一种使用 Lightbox 播放 Flash 电影的方法，但由于我已经使用 Lightbox 来显示图片，所以它不起作用。如何使用 Lightbox 在同一页面上显示图像和视频？如果没有，还有什么其他方式存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:05:55.763

[PrettyPhoto (jQuery Lightbox)](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)正是您正在寻找的。有很多使用示例，包括在同一页面中包含照片和视频的画廊。

# c++ - C++：查找和擦除集合元素

> ID：13544855
> 
> 赞同：2
> 
> 时间：2012-11-24T19:38:23.817
> 
> 标签：c++, stl, find, set, erase

我无法理解使用带有 STL 集的查找和擦除。我有这个：

```
struct NotMemberFound : exception {};

class FriendGroup
{
private:
    set<Person, ClassComp> members;
public:
    FriendGroup(): {}

    virtual void add_member(const Person& person)
    {
        members.insert(person);
        n_members = members.size();
    }

    virtual void remove_member(const Person& person)
    {
        const set<Person, ClassComp>::iterator it = members.find(person);

        if (it == members.end())
            throw NotMemberFound();
        else
        {
            members.erase(it);
        }
    }
} 
```

人有一个属性（字符串名称）和返回他唯一属性的方法 get_name()。ClassComp 的定义如下：

```
struct ClassComp
{
    bool operator() (const Person& a, const Person& b) const
    {
        return a.get_name() != b.get_name();
    }
}; 
```

好吧，当我尝试像这样使用它时：

```
int main(void)
{
    Person messi("Messi");
    Person xavi("Xavi");
    Person iniesta("Iniesta");

    FriendGroup barcelona;

    barcelona.add_member(messi);
    barcelona.add_member(xavi);
    barcelona.add_member(iniesta);

    barcelona.remove_member(iniesta);

    return 0;
} 
```

当我在添加最后一个元素的情况下调用 remove_member 时，程序抛出异常 (NotMemberFound)。但是，如果我尝试删除任何其他成员，我就没有这个问题。

我的代码有什么问题？

// 对不起我糟糕的英语：S //

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T19:42:26.540

你的比较器应该是

```
struct ClassComp {
    bool operator() (const Person& a, const Person& b) const {
        return a.get_name() < b.get_name();
    }
}; 
```

比较器应该说明一个元素是否不如另一个元素。就您而言，就像您对`std::set`that`messi < xavi`和 that说的那样`xavi < messi`。在查找元素时，它找不到它，因为它假定它们已排序并使用二进制搜索来查找它们。

# telnet - 如何使用命令提示符远程登录谷歌？

> ID：13544857
> 
> 赞同：10
> 
> 时间：2012-11-24T19:38:38.013
> 
> 标签：telnet

这是我尝试过的

```
telnet www.google.com 80

Get   HTTP/1.1  Host:www.google.com 
```

这是我收到的

```
HTTP/1.0 400 Bad Request
Content-Type: text/html; charset=UTF-8
Content-Length: 925
Date: Sat, 24 Nov 2012 19:37:42 GMT
Server: GFE/2.0 
```

我该如何进行这项工作？我尝试使用 telnet 访问 www.google.com

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T19:43:08.490

```
$ telnet www.google.com 80
Trying 173.194.38.82...
Connected to www.google.com.
Escape character is '^]'.
GET / HTTP/1.1

HTTP/1.1 302 Found
Location: http://www.google.co.jp/
Cache-Control: private
Content-Type: text/html; charset=UTF-8
[.... skipped ....] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-27T02:53:24.120

发出请求后：

```
GET / HTTP/1.1 
```

您还需要输入**一个空行**以表明您的请求已结束，否则将不会返回任何内容。

参考： http: [//blog.nullspace.io/day-208.html](http://blog.nullspace.io/day-208.html)

# java - 递归和记忆

> ID：13544862
> 
> 赞同：9
> 
> 时间：2012-11-24T19:39:06.013
> 
> 标签：java, memory-management, recursion

我有一个程序通过递归传递大量数据，比如 1000 个变量。递归将运行至少 50 或 60 次。我担心的是，是否有可能因为没有太多空间而在内存位置上覆盖数据，或者如果没有内存，我会得到程序内存的一些异常已经用完了（我没有收到这样的错误）？

是否有可能因为程序没有更多内存并且在现有位置上覆盖而得到错误的解决方案？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-24T20:30:00.210

涉及两个存储区域：[堆栈](http://en.wikipedia.org/wiki/Call_stack)和堆。栈是保存方法调用的当前*状态*（即局部变量和引用）的地方，而堆是存储对象的地方。[Hotspot 文档](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html)说，在 Linux 64 位上，默认情况下每个线程都有一个 1024kB 的堆栈。堆可以任意大，今天是GB的顺序。

递归方法同时使用堆栈和堆。您首先用完哪个取决于实施。例如，考虑一个需要数千个整数的方法：如果它们被声明为局部变量，即：

```
public void stackOverflow() {
  int a_1;
  int a_2;
  int a_3;
  // ...
  int a_10_000_000;
} 
```

您的程序将使用`StackOverflowError`. 另一方面，如果您将整数组织在一个数组中，例如：

```
public void outOfMemory() {
  int[] integers = new int[10 * 1000 * 1000];
} 
```

堆很快就会被填满，程序将以`OutOfMemoryError`. 在这两种情况下，内存都已损坏或数据被覆盖。然而，在这两种情况下，代码都是**错误**的，必须以某种方式修复——但要告诉你我们需要*如何*更多地了解你的程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T19:51:37.270

> 是否有可能因为没有太多空间而在内存位置上覆盖数据

Java 将对象存储在堆空间中，这些值仅由垃圾收集器回收。这意味着您传递的是引用而不是函数的值，这不会消耗内存，因为您没有复制变量（但通过增加堆栈帧来增加内存）。如果您的对象在线程堆栈中被引用，那么它就不会被覆盖。

> [...]或者如果情况是没有内存，我会得到一些程序内存已用完的异常

如果 JVM 耗尽了它的内存，你会得到一个[异步异常](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.3)( [OutOfMemoryError](http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html) )，但是如果你的递归函数大量调用自身，你会得到的唯一异常是[StackOverflowError 。](http://docs.oracle.com/javase/7/docs/api/java/lang/StackOverflowError.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T19:43:25.150

没有机会得到错误的结果：如果发生 stackoverflow，您的程序将因[StackOverflowError](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StackOverflowError.html)过早**终止**。

存储数据的内存位置不能被其他任何东西覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T19:46:00.710

Java 甚至 C 语言，你的程序内存永远不会改变无关内存的状态。

虽然 JVM 不支持尾递归。因此，当没有更多可用空间时，您最多会收到[StackOverFlowError 。](http://docs.oracle.com/javase/7/docs/api/java/lang/StackOverflowError.html)你不应该担心数据损坏，而是看看递归堆栈是否太高（比如高于 2000）。如果是这样，请继续努力

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T19:49:04.893

可能有两种情况

1.  足够的内存，递归完成，你得到结果。

2.  没有足够的内存并得到 StackOverFlowError 和程序退出

由于不会发生内存覆盖，您不会得到错误的结果

# opencv - 使用和编译 cvlink 模块集

> ID：13544867
> 
> 赞同：1
> 
> 时间：2012-11-24T19:39:23.930
> 
> 标签：opencv, simulink

关于 cvlink 的一些信息：

cvLink 是用于 simulink 的高效且免费的计算机视觉模块集。cvLink 是在 openCV 库上开发的，这是一个很棒的计算机视觉开源项目。

该库有超过 60 个优化块。它的运行速度比 Mathworks 的官方视频和图像处理模块组快约三倍，并且在 Simulink 下可实现高达每秒 60 帧的（软）实时视觉。

* * *

我下载了cvlink，按照这个网站的说明[http://www.lab.cnrs.fr/openblockslib/cvLink.html](http://www.lab.cnrs.fr/openblockslib/cvLink.html)

当我尝试在 simulink 中运行演示时，每个 s-function 都出现错误，它说 s-function 不存在。我认为我应该重新编译 cvlink，所以我再次按照网站的说明进行编译。我配置了 Visual C++ 并键入 mex-setup，显然至少它运行良好。所以我在 matlab 中输入 cvbuildall 并得到：

matlab 7.7、opencv 2.2、cvlink 1.2b 版本

```
 >> cvbuildall
*** Building  cvLinkArithmeticOperation  library ***
Building  cvabsdiff.cpp...
Creating  library  C:\USERS\MRMEAN\APPDATA\LOCAL\TEMP\MEX_BF~1\templib.x and object     
 C:\USERS\MRMEAN\APPDATA\LOCAL\TEMP\MEX_BF~1\templib.exp 

 cvabsdiff.obj  :  error  LNK2019: unresolved external symbol cvAbsDiff referenced in function "void     __cdecl mdlOutputs(struct SimStruct_tag *,int)" (?mdlOutputs@@YAXPEAUSimStruct_tag@@H@Z) 

 cvabsdiff.obj : error LNK2019: unresolved external symbol cvResetImageROI referenced in function "void    __cdecl mdlOutputs(struct SimStruct_tag *,int)" (?mdlOutputs@@YAXPEAUSimStruct_tag@@H@Z) 

cvabsdiff.obj : error LNK2019: unresolved external symbol cvSetImageROI referenced in   function "void __cdecl mdlOutputs(struct SimStruct_tag *,int)" (?mdlOutputs@@YAXPEAUSimStruct_tag@@H@Z) 

cvabsdiff.obj : error LNK2019: unresolved external symbol cvGetImageROI referenced in function "void __cdecl mdlOutputs(struct SimStruct_tag *,int)" (?mdlOutputs@@YAXPEAUSimStruct_tag@@H@Z) 

 cvabsdiff.obj : error LNK2019: unresolved external symbol cvCloneImage referenced in function "void __cdecl mdlOutputs(struct SimStruct_tag *,int)" (?mdlOutputs@@YAXPEAUSimStruct_tag@@H@Z) 

 cvabsdiff.obj : error LNK2019: unresolved external symbol cvReleaseImage referenced in function "void __cdecl mdlTerminate(struct SimStruct_tag *)" (?mdlTerminate@@YAXPEAUSimStruct_tag@@@Z) 

 cvinterface.obj : error LNK2019: unresolved external symbol cvSetErrStatus referenced in function "int __cdecl cvLinkErr(int,char const *,char const *,char const *,int,void *)" (?cvLinkErr@@YAHHPEBD00HPEAX@Z) 

 cvabsdiff.mexw64 : fatal error LNK1120: 7 unresolved externals 

 C:\PROGRA~1\MATLAB\R2008B\BIN\MEX.PL: Error: Link of 'cvabsdiff.mexw64' failed. 

??? Error using ==> mex at 213
Unable to complete successfully.

Error in ==> cvbuild at 25
eval(P);
Error in ==> cvbuildall at 7
cvbuild cvabsdiff.cpp 
```

* * *

我试图修改 cvbuild 但没有奏效。

有什么建议吗？提前致谢。

# java - 即使在使用 java 中的 try 和 catch 处理异常后如何恢复代码

> ID：13544871
> 
> 赞同：2
> 
> 时间：2012-11-24T19:39:33.600
> 
> 标签：java, try-catch

我的程序实际上有问题。实际上我在学校学习（11年级 - 大专）所以请用非常简单的语言解释我。我正在开发一个测验，非常基本的学校项目，所以程序像这样继续......我希望用户通过输入 1-4 的数字来输入他/她的选择。我不希望用户输入字母、字母或特殊字符或任何其他号码。除了1-4。我尝试使用 try 和 catch，但我的程序在抛出异常后停止。我希望程序代码即使在显示错误消息 System.out.println(" Invalid input. Please enter a number between 1-4"); 后也能运行。 **示例程序**

```
import java.io.*;
  import java.lang;
  public class
  { 
   public static void main()throws IOException
   { 
     InputStreamReader read =new InputStreamReader (System.in);
     BufferedReader in =new BufferedReader (read);
     System.out.println(" Select your category");
     System.out.println(" 1\. Food");
     System.out.println(" 2\. National");
     System.out.println("");
     System.out.println(" Enter your choice"); 
     int choice=Integer.parseInt(in.readLine());
     if(choice==1)//food category
     { 
       int score = 0;
       System.out.println("what are dynamites made?");
       System.out.println("1\. peanuts");System.out.println("2\. grapes");
       System.out.println("3\. flaxseeds");System.out.println("4\. fish");
       System.out.println(" Enter your choice");
       int food1= Integer.parseInt(in.readline()); 
      if(c1=1)
      { System.out.println(" Correct answer");
        score=score+10
      }
       else
      { 
      System.out.println(" Wronge answer");
        score=score+0
      }
      //then i have the second question with the same format
     } 
      if(choice==2)//natioanl category with the same format as above
      {//two question with if else statements in them }
     }
}// also help me where to add the try and catch statements 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:30:20.103

您的程序崩溃的地方在这里：

```
int food1= Integer.parseInt(in.readline()); 
if(c1=1)
{ System.out.println(" Correct answer");
  score=score+10
} 
```

“c1”不是一个定义的变量，所以无论用户输入什么，使用它都会导致程序崩溃。您应该将“c1”替换为“food1”。此外，赋值运算符“=”应替换为比较运算符“==”。

查看 Integer 的 javadoc（谷歌“Integer javadoc”），你会发现

```
public static int parseInt(String s)
                throws NumberFormatException 
```

所以 NumberFormatException 是我们需要捕捉的。您还可以通过在运行程序时查看堆栈跟踪来找出引发了哪些异常以及在哪里引发了异常。

每当抛出异常时，都会跳过错误之后和下一个“}”之前的所有内容。由于您的大部分代码在错误后应该可以正常执行，我们希望保持我们的 try-catch 小，即

```
try {
    int choice=Integer.parseInt(in.readLine());
} catch (NumberFormatException ex) {
    //Not a number
} 
```

我们需要变量 "choice" 在 try 之外可以访问，所以我们将在 try 之外声明它。

```
int choice;

try {
    choice=Integer.parseInt(in.readLine());
} catch (NumberFormatException ex) {
    //Not a number
} 
```

但是，NumberFormatException 不会告诉您用户是否输入了 1-4 以外的数字。所以你必须添加你自己的验证。

```
int choice;

try {
    choice=Integer.parseInt(in.readLine());
    if(choice<1 || choice>4) ; //Not 1-4
} catch (NumberFormatException ex) {
    //Not a number
} 
```

最后，我们需要跟踪我们的输入是否有效，并在需要时循环。

```
boolean valid=false;

while(!valid) {

    int choice;

    try {
        choice=Integer.parseInt(in.readLine());
        if(choice<1 || choice>4) valid=false; //Not 1-4
        else valid=true;
    } catch (NumberFormatException ex) {
        //Not a number
        valid=false;
    }

    if(valid) {
         //Handle valid response here
    } else {
         System.out.println(" Invalid input. Please enter a number between 1-4");
    }
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:18:21.990

嘿，这是您可以运行的代码。

```
import java.io.*;

import java.lang.*;

public class TestTryCatch
{ 

public static void main(String args[])
{
    try
    {
        InputStreamReader read =new InputStreamReader (System.in);
        BufferedReader in =new BufferedReader (read);
        System.out.println(" Select your category");
        System.out.println(" 1\. Food");
        System.out.println(" 2\. National");
        System.out.println("");
        System.out.println(" Enter your choice"); 
        int choice=0;
        try
        {
            choice =  Integer.parseInt(in.readLine());
        }
        catch(Exception e)
        {
            choice=0;
        }
        if(choice==0)
        {
            System.out.println("Invalid Input");         
        }
        if(choice==1)//food category
        { 
            int score = 0;
            System.out.println("what are dynamites made?");
            System.out.println("1\. peanuts");System.out.println("2\. grapes");
            System.out.println("3\. flaxseeds");System.out.println("4\. fish");
            System.out.println(" Enter your choice");
            int food1= Integer.parseInt(in.readLine()); 
            if(food1==1)
            { System.out.println(" Correct answer");
            score=score+10;
            }
            else
            { 
                System.out.println(" Wronge answer");
                score=score+0;
            }

        } 
        if(choice==2)
        {
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();   
    }
}
} 
```

在您要转换为整数的地方试一下。如果您的代码给出异常，它将进入异常块并处理您希望的值。在这里，我将其设置为 0，您也可以将其设置为 -1。

如果此代码有用或没有帮助，请恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:03:35.480

这是解决此问题的更优雅的解决方案。不涉及尝试捕获。

```
import java.io.*;
  import java.lang;
  public class
  { 
     //Compares response to the string representations of all numbers between 1 and numOptions, inclusive. 
     //Returns the matching integer or -1 otherwise.
     public static int parseResponse(String response, int numOptions) 
     {
          for(int i=1;i<=numOptions;i++) {
              if(response.equals(Integer.toString(i))) return i;
          }
          return -1;
     }

     public static void main()throws IOException
     { 
         InputStreamReader read =new InputStreamReader (System.in);
         BufferedReader in =new BufferedReader (read);
         System.out.println(" Select your category");
         System.out.println(" 1\. Food");
         System.out.println(" 2\. National");
         System.out.println("");
         System.out.println(" Enter your choice");

         //New code
         int choice=-1;
         while(choice==-1) {
             choice=parseResponse(in.readLine(),2);
             if(choice==-1)
             {
                 System.out.println(" Invalid input. Please enter a number between 1-2");
             }
         }

         if(choice==1)//food category
         { 
             int score = 0;
             System.out.println("what are dynamites made?");
             System.out.println("1\. peanuts");System.out.println("2\. grapes");
             System.out.println("3\. flaxseeds");System.out.println("4\. fish");
             System.out.println(" Enter your choice");

             //New code
             int food1=-1;
             while(food1==-1) {
                 food1=parseResponse(in.readLine(),4);
                 if(food1==-1)
                 {
                     System.out.println(" Invalid input. Please enter a number between 1-4");
                 }
             }

             if(food1==1)
             { System.out.println(" Correct answer");
               score=score+10
             }
             else
             { 
               System.out.println(" Wronge answer");
               score=score+0
             }
             //then i have the second question with the same format
        } 
        if(choice==2)//natioanl category with the same format as above
        {//two question with if else statements in them 
        }
    }
}// also help me where to add the try and catch statements 
```

如果你不知道：

```
 if(response.equals(Integer.toString(i))) return i; 
```

是相同的

```
 if(response.equals(Integer.toString(i)))
 {
      return i;
 } 
```

# asp.net-mvc - ASP MVC Init 模型的外部数据

> ID：13544872
> 
> 赞同：0
> 
> 时间：2012-11-24T19:39:40.397
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我有以下模型，其中“位置”作为表位置的**外键**

```
 public class Restaurant
{
    public int id{ get; set; }
    public string  name{ get; set; }
    public ICollection<Locations> locations { get; set; }
} 
```

为什么当我初始化我的模型餐厅时，位置设置为`null`除非我在调用属性示例之前调用了位置数据库上下文：

```
 var t = db.Restaurant.First(); // the locations attribute is null
 db.Locations.First(); // calling the locations db context
 t; // now t.locations has one record without adding anything just loading the DB 
```

每当我调用位置时，我怎么能做到它会自动启动查询...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:49:19.593

使用以下代码：

```
public class Restaurant
{
    public Restaurant()
    {
        locations = new List<Locations>();
    }

    public int id{ get; set; }
    public string  name{ get; set; }
    public ICollection<Locations> locations { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:49:27.693

修改您的获取访问器。

```
get
{
  if(!_locations.Any()
  _locations.Add(db.Locations.First();
  return _locations;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:19:29.920

您要的是延迟加载功能。你用什么来访问数据（我猜是 EF）。如果你使用 EF，你应该启用延迟加载。但要小心，由于延迟加载可能是邪恶的功能。

到目前为止，如果您希望将位置与餐厅对象一起使用，您可以在餐厅构造函数中自动填充您的位置：

```
public class Restaurant
{
    public Restaurant() {
       // fill locations
    }

    public int id{ get; set; }
    public string  name{ get; set; }
    public ICollection<Locations> locations { get; set; }
} 
```

# c++ - 将字符数组的值移动到寄存器 x86 内联汇编

> ID：13544874
> 
> 赞同：2
> 
> 时间：2012-11-24T19:40:21.403
> 
> 标签：c++, assembly, x86

我正在使用 Microsoft Visual C++ 2010 Express 进行内联汇编编码。

我有这种代码。要点是我需要访问字符数组的每个单个字符。下面只是一个不相关的示例，当它到达字符串的末尾（终止空字符）时，它将跳转到完成，否则它将用新行分隔字符串的每个字符。

```
line[10] = "I am Kevin";
format[] = "%c\n";

_asm {
  mov  ebx,0
loop:
  cmp  line[ebx],0
  jz   finish
  mov  eax, line[ebx]
  push eax
  lea  eax, format
  push eax
  call printf
  jmp  loop

finish:
  ....
} 
```

不知何故，我一直有这条线的错误：

```
mov  eax, line[ebx] 
```

它一直在说`error C2443: operand size conflict`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:52:41.840

" `eax`" 描述 32 位寄存器`a`。

寄存器的低 8 位`a`是`al`. 这将移动 8 位：

```
mov  al, line[ebx] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:52:58.060

使用零扩展字节加载 insn `movzx`：

```
 movzx  eax, line[ebx] 
```

# php - 在 localhost 上连接到 mySQL

> ID：13544880
> 
> 赞同：2
> 
> 时间：2012-11-24T19:41:03.337
> 
> 标签：php, mysql, xampp

所以我在连接到我使用 XAMPP 在本地主机上创建的 mySQL 数据库时遇到问题。DB 本身在 127.0.0.1 上设置良好，但我必须使用端口 8000（而不是 80）才能在 XAMPP 中启动它。

```
 $con = mysql_connect("localhost:8000","","");
 if (!$con) {
   die('Connection failed.' . mysql_error());
 } 
```

以上不起作用，浏览器在几秒钟后超时，说它无法显示网页（注意它没有给出死亡消息）。我也试过 127.0.0.1:8000 但没有运气。在 phpMyAdmin 中创建用户并输入凭据也没有任何效果。

如果我取出端口并使用：

```
$con = mysql_connect("localhost","",""); 
```

这可以连接，但我似乎无法选择我的数据库，因为我认为它没有连接到正确的服务器！

有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:44:16.120

1.  不要使用 mysql_* 它已被弃用
2.  端口 8000 用于您的服务器而不是 mysql。默认mysql端口3306

你最好使用 PDO

[http://www.php.net/manual/en/pdo.construct.php](http://www.php.net/manual/en/pdo.construct.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:53:56.087

删除端口 8000 。这不是 mysql 端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:54:55.423

你也可以使用*mysqli*

```
<?php $con = new mysqli("localhost", "username", "password", "dbName");
if ($con->connect_errno) {
echo "Failed to connect to MySQL: (".$con->connect_errno.")".$con->connect_error;
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T19:47:33.037

MySQL 的端口是 3306。但您不必在 php 代码中使用它。

您无法选择数据库的原因是您从未在脚本中指定它。因此，请尝试 mysql_select_db 函数。

像这样：

```
mysql_connect('localhost','user', 'pass');
mysql_select_db('database_name'); 
```

如果您打算将此代码用于更大的系统，最好使用 madara-uchiha 建议的准备好的语句。这些功能很快就会在您的应用程序中打印折旧通知；）

# c++ - 命令行选项

> ID：13544882
> 
> 赞同：1
> 
> 时间：2012-11-24T19:41:14.637
> 
> 标签：c++, command-line-arguments

```
#include <iostream>
#include <cstdlib>
#include <sstream>
#include <fstream>
using namespace std;

    int main(int argc, char* argv[]) 
    {
    cout << argv[1] << endl;
    if (argv[1]=="-r") cout << "success\n";
    } 
```

“成功”不会打印出来。当我运行时： $ ./hearts -r 唯一出现的是：

-r

这让我很困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:54:01.360

我要继续告诉你，你不想要`strcmp`。C++ 处理命令行参数的方式是尽快把它们变成`std::string`s：

```
int main(int argc, const char* argv[])
{
  // Make a vector of all command-line arguments
  std::vector<std::string> args(argv, argv+argc);
  // Now we can use std::string's operator==
  if (args.size() > 1 && args[1] == "-r") {
    std::cout << "Success" << std::endl;
  }
  return 0;
} 
```

您可以将两个`std::string`s 与`==`运算符进行比较。在 的情况下`args[1] == "-r"`，`const char[]`字符串文字被转换为 a`std::string`以进行比较。在您的代码中，`argv[1]=="-r"`比较两个不相等的独立指针 - 它不比较 C 样式字符串的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T19:44:17.217

那是因为您使用`==`的是两个指针。它将检查指针是否相等，而不是检查指向的数据是否相同。

要比较两个 C 字符串，请`strcmp`像这样使用：

```
if (strcmp(argv[1], "-r") == 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:44:09.940

您可能想要`strcmp`比较这两个字符串。确实，您`==`的两个字符串必须引用相同的内存位置，这是不可能发生的，就像`"-r"`编译时常量一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T19:44:19.093

您应该使用`strcmp()`它，它会按预期工作。使用`==`时比较指针，它们不能相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T19:44:20.113

您应该尝试使用：

```
if (strcmp(argv[1],"-r")==0) cout << "success\n"; 
```

将参数与字符串文字进行比较。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T19:51:18.157

在 C 中，字符串是字符数组（指向字符序列的指针）。在您的代码中，相等运算符只是比较两个指针值，它们是完全不同的。您应该使用`strcmp`函数或使用`string`类：

```
#include <iostream>
#include <cstdlib>
#include <sstream>
#include <fstream>
#include <cstring> // <-- here

using namespace std;

int main(int argc, char* argv[]) 
{
    cout << argv[1] << endl;
    if (strcmp(argv[1], "-r") == 0) // <-- and here
        cout << "success\n";
} 
```

或者

```
#include <iostream>
#include <cstdlib>
#include <sstream>
#include <fstream>
#include <string> // <-- here

using namespace std;

int main(int argc, char* argv[]) 
{
    cout << argv[1] << endl;
    if (string(argv[1]) == "-r") // <-- and here
        cout << "success\n";
} 
```

# javascript - 可用于连接 RaphaelJS 2 中的圆对的方法？

> ID：13544884
> 
> 赞同：1
> 
> 时间：2012-11-24T19:41:28.520
> 
> 标签：javascript, svg, raphael

简而言之`svg`，`<line>`标签似乎做得很好，例如

```
<g>
    <line class="link" x1="180" y1="280" x2="560" y2="280"></line>
</g>
<g>
    <circle class="node" cx="180" cy="280" id="n1" r="18"></circle>
    <circle class="node" cx="560" cy="280" id="n2" r="18"></circle>
</g> 
```

在这里，`line`元素绘制一条连接两个已定义节点的线。

在`RaphaelJS 2`，有没有办法做到这一点？似乎最有可能的是`path`，但是当我尝试时：

```
var paper = Raphael(document.getElementById("raphael-test"), 600, 600);
var c1 = paper.circle(180, 280, 18);
var c2 = paper.circle(560, 280, 18);
var edge = paper.path("M180,280L560,280"); 
```

这条线*延伸到*两个圆圈中，到达圆圈的中心。从视觉上看，我希望这条线刚好接触到圆线。当然，我可以计算出几何形状并在给定对坐标的情况下减去每一端的圆的半径。但我想知道某些方法是否已经可用`RaphaelJS 2`，因为这似乎是一个非常常见的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:53:47.047

不。虽然这对您来说似乎是常见的功能，但这实际上是 SVG 抽象的一种非常定制的用法。如果 Raphael 支持这样的事情，那么您可以想象功能请求将扩展到诸如在不重叠的任意形状之间进行绘制之类的事情。

但是，Raphael 可以帮助您进行计算，因为它能够计算路径交叉点。当您有一个路径字符串来表示您的几何图形时，这将起作用。

[http://raphaeljs.com/reference.html#Raphael.pathIntersection](http://raphaeljs.com/reference.html#Raphael.pathIntersection)

见：http: [//jsfiddle.net/sDNMv/](http://jsfiddle.net/sDNMv/)

```
// Computes a path string for a circle
Raphael.fn.circlePath = function(x , y, r) {      
  return "M" + x + "," + (y-r) + "A"+r+","+r+",0,1,1,"+(x - 0.1)+","+(y-r)+" z";
} 

// Computes a path string for a line
Raphael.fn.linePath = function(x1, y1, x2, y2) {
    return "M" + x1 + "," + y1 + "L" + x2 + "," + y2;
}

var x1 = 180,
    y1 = 280,
    r1 = 18,

    x2 = 400,
    y2 = 280,
    r2 = 18,

    paper = Raphael(document.getElementById("raphael-test"), 600, 600),
    c1 = paper.circle(x1, y1, r1),
    c2 = paper.circle(x2, y2, r2),

    // Compute the path strings
    c1path = paper.circlePath(x1, y1, r1),
    c2path = paper.circlePath(x2, y2, r2),
    linePath = paper.linePath(x1, y1, x2, y2),

    // Get the path intersections
    // In this case we are guaranteed 1 intersection, but you could find any intersection of interest
    c1i = Raphael.pathIntersection(linePath, c1path)[0],
    c2i = Raphael.pathIntersection(linePath, c2path)[0],

    line = paper.path(paper.linePath(c1i.x, c1i.y, c2i.x, c2i.y));​ 
```

您也可以考虑使用 getPointAtLength

[http://raphaeljs.com/reference.html#Raphael.getPointAtLength](http://raphaeljs.com/reference.html#Raphael.getPointAtLength)

因为对于圆，交点是它们之间的直线上的点，长度为 r 和（之间的距离 - r）

# java - 在客户端和服务器之间共享 JUnit 测试

> ID：13544887
> 
> 赞同：2
> 
> 时间：2012-11-24T19:41:42.963
> 
> 标签：java, gwt, junit, gwttestcase

你好很棒的人！

我正在开发一个将在服务器和客户端（GWT）上使用的 java 模块。

我想编写一个单元测试库，然后简单地创建包装器来在客户端和服务器上运行测试。这样，我可以保证代码在两者上都正确运行，而不必为每个代码编写单独的单元测试。

但是，我看到 GWT 中没有对 JUnit 的本机支持，并且必须使用 GWTTestCase。

我希望有人可能有一个聪明的解决方案，可以让我做到这一点。

谢谢，

凯西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T23:48:23.593

如果您从中`GWTTestCase`返回，它将作为简单的 JUnit 测试运行。因此，这个想法是有 2 个类，一个扩展另一个并覆盖.`null``getModuleName()``getModuleName()`

仅供参考，这是 GWT 本身在其单元测试中使用的确切技术；例如 RequestFactory 或 AutoBeans；例如[`RequestFactoryTest`](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/web/bindery/requestfactory/gwt/client/RequestFactoryTest.java#223)which extends`GWTTestCase`和[`RequestFactoryJreTest`](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/web/bindery/requestfactory/server/RequestFactoryJreTest.java)which extends `RequestFactoryTest`，覆盖`getModuleName()`返回`null`以及设置测试的方式。

# string - 如何编写一个不使用文件而使用一对单词的常量列表的函数？

> ID：13544893
> 
> 赞同：0
> 
> 时间：2012-11-24T19:42:45.570
> 
> 标签：string, list

在 C++ 中，我有一个单词对的常量列表，我需要一个函数，如果在其中一列中找到给定的单词，它必须从另一列返回相应的单词。如何在不使用文件的情况下正确执行此操作？我没有类型“constlist”或任何东西；这是一个永远不会改变的常量列表，我只需要程序将其存储在其中，而不是存储在文件中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:54:11.370

```
findWord w xs = head [s | (p, q) <- xs, s <- if p == w then [q] else if q == w then [p] else []] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:14:14.223

这是一些斯卡拉。

```
val words = """
  one    two
  three  four
  five   six
"""

def find(x: String): Option[String] = 
  words.trim.lines.
    map(line => line.trim.split("\\s+")).
    find(pair => pair.contains(x)).
    map(pair => pair((pair.indexOf(x)+1) % 2))

find("three") // Some(four)
find("six")   // Some(five)
find("seven") // None 
```

# cakephp - CakePHP 2.3 文件上传？

> ID：13544901
> 
> 赞同：0
> 
> 时间：2012-11-24T19:43:41.190
> 
> 标签：cakephp, file-upload

我将如何在 CakePHP v2.3 中上传文件？我尝试了许多插件，都给出了不同的错误，因为它们不适合 2.3 MVC。我有一些粗略的想法，因为我可以使用`debug($this->data);`. 我是否只需检查文件类型并使用该`copy()`函数将其移动到目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:56:21.577

是的，您可以使用自己的代码或使用任何其他 PHP 外部代码，例如： [http ://www.phpf1.com/product/image-upload-script.html](http://www.phpf1.com/product/image-upload-script.html)

外部代码放在*app/Vendor*中。

那是我用一些修改的那个。

无论如何，不​​要忘记阅读如何创建安全上传： [http ://blog.insicdesigns.com/2009/01/secure-file-upload-in-php-web-applications/](http://blog.insicdesigns.com/2009/01/secure-file-upload-in-php-web-applications/)

# javascript - 在 Javascript 对象中使用“this”

> ID：13544913
> 
> 赞同：2
> 
> 时间：2012-11-24T19:44:52.267
> 
> 标签：javascript, arrays, object, indexing

让“这个”表现得像我预期的那样有些困难——

基本上，我有一个对象，我无法从同一个对象中的函数访问对象中的数组 -

它看起来像这样：

```
var articles = {
    article : {
        1: {
            title : 'This is a Title',
            content : 'This is the content of the article'
        },
        2: {
            title : 'This is the second article',
            content : 'This is the second article content'   
        },
        3: {
            title : 'This is the third article',
            content : 'Making information transferrable. Identifiable. Manipulatable.'   
        }
    },
    numArticles : function(){
        var size = 0, key;
        for (key in this.article){
            if(this.article.hasOwnProperty(key)) size++;               
        }
        return size;
    },
    buildInterface : function(){
        var aSize = this.numArticles();
        for(var i = 0; i < aSize; i++){
            $('body').append('<article><h2>' + this.article[i].title + '</h2></article>');               
        }
    }
} 
```

在这种情况下，buildInterface() 函数无法访问“文章”数组。

这是一个正在进行的示例：

[http://jsfiddle.net/merk/xV2n6/41/](http://jsfiddle.net/merk/xV2n6/41/)

任何帮助将不胜感激 -

我有一种预感，这可能是一个范围界定问题——希望它与 JSFiddle 无关——

万分感谢 -

和平

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:49:06.497

您的`article`变量索引不一致：属性是从 开始定义的，`1`但您从方法循环开始。你可以用...解决这个问题`0``buildArticles``for`

```
for(var i = 1; i <= aSize; i++){
  $('body').append('<article><h2>' + this.article[i].title + '</h2></article>');               
}; 
```

...或者（这对我来说更好，因为您基本上是在尝试使用 Object 来完成数组的工作）将`article`定义重写为适当的数组：

```
article : [{
        title : 'This is a Title',
        content : 'This is the content of the article'
    }, {
    title : 'This is the second article',
    content : 'This is the second article content'   
    }, {
    title : 'This is the third article',
    content : 'Making information transferrable. Identifiable. Manipulatable.'   
    }],
... 
```

... 让您的 buildArticles`for`循环保持原样（因为索引现在正确地从 0 开始）。

顺便说一句，这样你甚至不必创建一个特殊的功能来计算你的文章：`article.length`就足够了。

这是带有这种方法的插图的[**JS Fiddle 。**](http://jsfiddle.net/xV2n6/53/)

* * *

作为旁注，如果您实际上检查了调试器，您会注意到它`this.articles[0]`就是`undefined`（因此试图`title`摆脱它是错误的），而不是`this.articles`. 因此，这绝对不是范围的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:53:45.227

这应该有效：

```
var articles = {
    article : {
        1: {
            title : 'This is a Title',
            content : 'This is the content of the article'
        },
        2: {
        title : 'This is the second article',
        content : 'This is the second article content'   
        },
        3: {
        title : 'This is the third article',
        content : 'Making information transferrable. Identifiable. Manipulatable.'   
        }
    },
    numArticles : function(){
        var size = 0, key;
        for (key in this.article){
            if(this.article.hasOwnProperty(key)) size++;               
        }
        return size;
    },
    buildInterface : function(){
        var aSize = this.numArticles();
        for(var i = 1; i <= aSize; i++){
            console.log( '<article><h2>' + this.article[i]['title'] + '</h2></article>');               
        };
    }
} 
```

您的问题是，您从数组中零位置的元素开始。但是你没有 0 元素。所以它会给你一个错误。这正在按预期工作。

# jquery - 如何在 Jquery Mobile onclick 中添加文本输入？

> ID：13544916
> 
> 赞同：0
> 
> 时间：2012-11-24T19:45:39.150
> 
> 标签：jquery, jquery-mobile

以下代码在没有 Jquery Mobile 的情况下工作正常：

```
$('#addfield').click(function() {
    $('<input type="text" value="" />').appendTo('form');
}); 
```

但是，如果我通过在 head 标记中添加这个来开始使用 Jquery Mobile：

`<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>`

它不再起作用了。（它适用于桌面浏览器，但不适用于真正的移动浏览器（即 Android 默认浏览器）

你知道上面代码的 Jquery Mobile 等价物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:51:32.500

您需要告诉 jquerymobile 使用以下命令初始化添加的代码：

```
$('input').textinput(); 
// or, in your case 
$('<input type="text" value="" />').appendTo('form').textinput(); 
```

# unit-testing - 如何使用 Visual Studio 2012 中的 runsettings 文件从代码覆盖范围中排除服务引用？

> ID：13544918
> 
> 赞同：13
> 
> 时间：2012-11-24T19:46:09.123
> 
> 标签：unit-testing, visual-studio-2012, mstest, code-coverage, visual-studio-test-runner

我正在使用自定义运行设置文件来控制检查哪些项目的代码覆盖率。我使用了微软提供的默认模板，到目前为止，我已经能够毫无问题地排除我想要的项目。我的下一步行动是从代码覆盖范围中排除添加服务引用时由 Visual Studio 创建的自动生成的 Web 代理类。

这似乎应该与默认的 runsettings 模板一起使用，因为它有一个看起来像这样的部分：

```
<Attributes>
    <Exclude>
        <!-- Don’t forget "Attribute" at the end of the name -->
        <Attribute>^System.Diagnostics.DebuggerHiddenAttribute$</Attribute>
        <Attribute>^System.Diagnostics.DebuggerNonUserCodeAttribute$</Attribute>
        <Attribute>^System.Runtime.CompilerServices.CompilerGeneratedAttribute$</Attribute>
        <Attribute>^System.CodeDom.Compiler.GeneratedCodeAttribute$</Attribute>
        <Attribute>^System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute$</Attribute>
    </Exclude>
</Attributes> 
```

添加服务引用时创建的所有类都使用 GeneratedCodeAttribute 修饰，因此应将它们全部排除。但是，当我运行代码覆盖率时，它们不会被忽略，因此代码覆盖率会报告一大块未覆盖的代码。我已经多次尝试使用正则表达式，试图让它正确选择属性，但无济于事。

我很感激有关如何： - 让这个属性排除工作 - 一个不需要我排除整个项目或使 runsettings 文件非通用的替代方案（我们想重新使用这个基本文件跨所有项目，无需特定编辑）

仅供参考 - 虽然我了解还有其他代码覆盖工具，但我的目标是让 Visual Studio 能够正常工作，因此在这种情况下，关于切换到另一种工具的建议对我没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-17T19:32:10.753

看来问题是正则表达式中的句点。如果你在`\.`它开始工作时逃脱它们。不知道为什么这很重要，因为如果它真的是正则表达式，句点应该匹配[任何字符](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#AnyCharacter)，包括句点。

因此，要使原始模板正常工作，您需要将其更改为以下内容：

```
<Attributes>
    <Exclude>
        <Attribute>^System\.Diagnostics\.DebuggerHiddenAttribute$</Attribute>
        <Attribute>^System\.Diagnostics\.DebuggerNonUserCodeAttribute$</Attribute>
        <Attribute>^System\.Runtime\.CompilerServices\.CompilerGeneratedAttribute$</Attribute>
        <Attribute>^System\.CodeDom\.Compiler\.GeneratedCodeAttribute$</Attribute>
        <Attribute>^System\.Diagnostics\.CodeAnalysis\.ExcludeFromCodeCoverageAttribute$</Attribute>
    </Exclude>
</Attributes> 
```

也只是为了让您知道，`<ModulePaths>`过滤器具有您可以使用的相同问题：

```
<ModulePaths>
    <Include>
        <ModulePath>.*MyCompany\.Namespace\.Project\.dll$</ModulePath>
    </Include>
    <Exclude>
        <ModulePath>.*ThirdParty\.Namespace\.Project\.dll$</ModulePath>
    </Exclude>
</ModulePaths> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T06:21:01.447

谢谢你的主意。我最终添加了这些行：

```
<Source>.*\\Service References\\.*</Source>
<Source>.*\\*.designer.cs*</Source> 
```

并得到了我需要的结果。我仍然很沮丧，我不知道为什么这个文件的其他部分没有被接受。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-24T21:22:32.523

MSDN 有一个页面描述了如何在[此处](http://msdn.microsoft.com/en-us/library/jj159530.aspx)自定义代码覆盖率分析。

在页面底部有一个示例设置文件，它显示了如何排除属性，这与您上面的内容相匹配。

您可以尝试他们提到的其他一些排除方法，例如按路径排除：

```
<!-- Match the path of the source files in which each method is defined: -->
<Sources>
    <Exclude>
        <Source>.*\\atlmfc\\.*</Source>
        <Source>.*\\vctools\\.*</Source>
        <Source>.*\\public\\sdk\\.*</Source>
        <Source>.*\\microsoft sdks\\.*</Source>
        <Source>.*\\vc\\include\\.*</Source>
    </Exclude>
</Sources> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T13:38:31.210

我可以通过将属性命名设置为：

```
<Attributes>
  <Exclude>
    <Attribute>.*GeneratedCodeAttribute$</Attribute>
  </Exclude>
</Attributes> 
```

不知道为什么，但必须有一部分完整的属性名称与正则表达式不匹配。

# performance - 编写一个简单的 JMeter 脚本

> ID：13544919
> 
> 赞同：8
> 
> 时间：2012-11-24T19:46:11.073
> 
> 标签：performance, http, automation, load, jmeter

我需要编写一个执行以下操作的脚本（与哪个网站无关，我这样做只是为了学习和练习）：

1.  模拟 HTTP 请求（方法：get）
2.  从文档中读取参数并在脚本中使用它们
3.  从请求的响应中保存一个表达式，并将其用作下一个请求中的参数
4.  将输出保存到文件

在阅读文档和观看一些视频教程几个小时后，我可以轻松管理第 1 步。我对如何执行步骤 2 和 4 有一点想法，尽管我可能没有有效地执行它们。不幸的是，我不知道如何执行第 3 步。

有人可以帮我完成这些步骤吗，或者至少给我一些可以帮助我的教程的好链接（我发现官方手册太混乱了）？

以下是我用来学习此工具的一些链接：[对于第 1 步](http://www.youtube.com/watch?v=ovzybIDwn_k)和[第 2 步](http://ivetetecedor.com/192/how-to-use-a-csv-file-with-jmeter)，他们提供了一些帮助，但欢迎提供更多指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T20:15:09.927

我所知道的 Jmeter 文档的最佳来源在 JMeter 网站的文档部分：[用户手册](http://jmeter.apache.org/usermanual/index.html)和[最佳实践](http://jmeter.apache.org/usermanual/best-practices.html)（针对初学者）、[组件参考](http://jmeter.apache.org/usermanual/component_reference.html)和[功能参考](http://jmeter.apache.org/usermanual/functions.html)（一旦您熟悉了基本的 Jmeter 功能）。

尤其是您应该阅读用户手册的[第](http://jmeter.apache.org/usermanual/test_plan.html)[4、5](http://jmeter.apache.org/usermanual/build-web-test-plan.html)和[6](http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html)部分，这些部分将为您提供这些以及您将遇到的许多其他问题的答案。

不过，我应该自己给出答案：

1.  使用 HTTP 请求采样器
2.  使用 CSV 数据集配置
3.  使用后处理器。我想最有用的是正则表达式提取器，它将数据提取到变量中，然后您可以`${variable}`在测试中使用此变量
4.  我猜你的意思是输出的测试结果。如果是这种情况，请使用侦听器。根据我的经验，最有用的监听器是简单数据编写器、查看结果树（仅用于调试）、来自 Jmeter 插件[的随时间变化的响应延迟。](http://code.google.com/p/jmeter-plugins/wiki/LatenciesOverTime)请注意，当您最终针对 SUT 运行测试时，应仅启用 Simple Data Writer 以最大程度地减少资源使用。

* * *

一旦您对 JMeter 功能感到满意，请注意其中缺少一些有用的功能，但存在于[JMeter 插件](http://code.google.com/p/jmeter-plugins/)中：

*   [随时间变化的响应延迟](http://code.google.com/p/jmeter-plugins/wiki/LatenciesOverTime)侦听器
*   线程组以获得更好的控制
*   [非 GUI 控制台状态记录器](http://code.google.com/p/jmeter-plugins/wiki/ConsoleStatusLogger)（在运行测试时很有帮助）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-05T09:17:13.800

使用正则表达式提取器、JSON 提取器等后处理器来提取任何值。

添加这些后处理器作为 http 采样器和名称的子级，输入正则表达式，模板...

[http://regex101.com/](http://regex101.com/)是测试正则表达式的最佳站点

要在脚本中进一步使用提取的值，请使用 ${variable_name}

欲了解更多信息，请阅读[这篇文章](https://www.redline13.com/blog/2018/09/jmeter-extract-and-re-use-as-variable/)

# parsing - 在 Backbone 中，使用“create”函数将对象添加到 Parse 后无法获取对象的 id 或 cid

> ID：13544928
> 
> 赞同：0
> 
> 时间：2012-11-24T19:47:39.947
> 
> 标签：parsing, backbone.js

我正在使用 Backbone 和 Parse 构建一个调查网站。我模仿了待办事项列表示例，在页面中添加了一个问题。与待办事项列表示例一样，我有“createOnEnter”和“addOne”。获取 id 对我来说很重要，因为我需要将问题的 id 设置为与其在 Parse 中的 id 相同。

```
 addOne: function(question) {
    alert(question.get("content"));
    alert(question.id);
    var view = new QuestionView({model: question});
    this.$("#questions").append(view.render().el);
},

    createOnEnter: function(e) {
    if (e.keyCode != 13) {
        return;
    }

    this.survey.create({
        content: $("#new-question").val(),
        type: $("#choose-type").val(),
        order: this.survey.nextOrder(),
        user: Parse.User.current(),
        ACL: new Parse.ACL(Parse.User.current())
    }, {wait: true});
        $("#new-question").val('');
    } 
```

所以 alert(question.get("content")) 确实会给我预期的内容，但 alert(question.id) 显示未定义。但是我相信保存到 Parse 的每个条目都会获得一个唯一的 id，所以我不明白为什么 question.id 是未定义的。更糟糕的是， alert(question.get("cid")) 也是未定义的......这让我很困惑。非常感谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:52:08.540

`ids`由服务器给出（当你`fetch`和服务器返回一个`id`字段时）。如果您在创建模型时手动添加一个`id`字段，也可以添加它 - 但关键是这不是自动完成的。**是服务器上**`id`资源的唯一标识符。

 **当您在前端创建问题时，您需要使用唯一 ID Backbone create who's called `cid`。[http://backbonejs.org/#Model-cid](http://backbonejs.org/#Model-cid)**

# .net - 重定向到特定子域

> ID：13544932
> 
> 赞同：0
> 
> 时间：2012-11-24T19:47:49.747
> 
> 标签：.net, asp.net-mvc

我不太确定如何问这个，但这里是。

我买了一个域名，让我们调用`foo.com`，我开发了一个应用程序，我的服务器中还有一个 Thawthe 受信任的 ssl，但只能`.net`与. 现在我想要它总是将我的所有用户从 foo.com 重定向到.`mvc3 framework``www.foo.com``www.foo.com`

我怎样才能做到这一点？用 dns 输入？如果这是答案，您能举个例子吗？

或者我是否需要添加一些代码，比如在`global.asax`用户请求中提供的一些 evet 检查 url 中，重定向到我想要的？

可以是可以添加到 web.config 中的配置吗？

我的应用程序由主机卖家提供的点网面板管理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:34:01.387

这是一个给你的例子。您可以将以下内容添加到 Global.asax 中，它应该可以解决问题：

```
void Application_BeginRequest(object sender, EventArgs e)
    {
        if (HttpContext.Current.Request.Url.ToString().ToLower().Contains
          ("http://foo.com"))
        {
            HttpContext.Current.Response.Status = "301 Moved Permanently";
            HttpContext.Current.Response.AddHeader("Location", Request.Url.ToString()
              .ToLower().Replace("http://foo.com",
              "http://www.foo.com"));
        }
    } 
```

您可以参考[http://blueonionsoftware.com/blog.aspx?p=69139a7a-f47d-47c0-9f8e-9112b4131006](http://blueonionsoftware.com/blog.aspx?p=69139a7a-f47d-47c0-9f8e-9112b4131006)了解更多信息。

# c - 执行功能。有没有办法回到主程序？

> ID：13544933
> 
> 赞同：5
> 
> 时间：2012-11-24T19:47:55.457
> 
> 标签：c, linux, exec

我在 ubuntu 下的 exec() 函数有问题。有没有可能回到主程序？

例子：

```
printf("Some instructions at beginning\n");
execlp("ls","ls", "-l", NULL);

// i want to continue this program after exec and see the text below
printf("Other instructions\n"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T19:49:53.127

不会。成功的`exec`调用会用另一个程序*替换*当前程序。如果您希望父母和孩子都留下来，您需要在[`fork(2)`](http://linux.die.net/man/2/fork)之前调用`exec`：

```
pid_t childpid = fork();
if(childpid < 0)
{
    // Handle error
}
else if(childpid == 0)
{
    // We are the child
    exec(...);
}
else
{
    // We are the parent: interact with the child, wait for it, etc.
} 
```

请注意，失败的`exec`调用（例如，给定的可执行文件不存在）会返回。如果`exec`返回，总是因为错误，所以要准备好处理错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T19:51:49.057

`exec`替换可执行文件映像。没有退路。一个不错的选择是`vfork() exec`. `vfork`复制流程，继续复制，当它完成执行时，继续主流程。副本可以`exec`是所需的文件。例子：

```
printf("Some instructions at beginning\n");
if(!vfork()){
    // child
    execlp("ls","ls", "-l", NULL); // child is replaced
}
// parent continues after child is gone
printf("Other instructions\n"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-20T15:34:07.120

**不，不可能使用 exec 系列函数**，因为由您以前的代码生成的可执行文件，即包含***execlp("ls","ls","-l",NULL)*** 函数的代码，被您的可执行文件替换将由***execlp()***函数运行，即**ls**。因此，当此函数成功执行时，您将不再拥有包含***execlp()***函数的旧可执行文件。

Use **system("ls -l");** function if you want to run any other process and want to return to current process.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T19:49:38.343

**[`exec`](http://linux.die.net/man/3/exec)** *用新的过程映像替换*当前的过程映像，所以，**不**，这是不可能的。

如果您想恢复之前所做的事情，您可以执行 fork 并从子进程中调用 exec。

```
if (fork() == 0){ //this part will only be executed by the child process
        execlp("ls","ls", "-l", NULL);
        wait((int*)0);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T19:50:29.473

不会`exec`。函数族用新的过程映像**替换当前过程。**如果您不想这样做，则需要`fork`在调用之前执行此操作`exec`，以便替换进程的新分叉副本（而不是替换原始副本）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T19:50:47.267

实际上`exec()`或者它的函数族替换当前进程并执行

所以尝试`exec()`在子进程中分叉和使用，并在父进程中等待子进程终止。

像这样 ：

```
if(!fork())
 {
  // In child
  execlp("ls","ls","-l",NULL);
 }
 wait(NULL);
  // In parent 
 //rest of code 
```

# asp.net-mvc - robots.txt IISExpress 动态文件给出 404

> ID：13544935
> 
> 赞同：1
> 
> 时间：2012-11-24T19:48:08.767
> 
> 标签：asp.net-mvc

我将 iisexpress 与 ASP.NET MVC 4 一起使用，并将 robots.txt 映射到自定义操作，如下所示：

```
 routes.MapRoute("Robots.txt",
            "robots.txt",
            new { controller = "Home", action = "Robots" }); 
```

当我将开发服务器设置为使用 IISExpress 时，我收到标准的 IIS 404 错误页面：

```
Detailed Error Information:
Module     IIS Web Core
Notification       MapRequestHandler
Handler    StaticFile
Error Code     0x80070002
Requested URL      http://localhost:25315/robots.txt
Physical Path      c:\dev\myapp\myapp\robots.txt
Logon Method       Anonymous
Logon User     Anonymous 
```

当我使用 Visual Studio 开发服务器时，这似乎工作正常并且路由正确。

是否需要特别设置 web.config 或其他设置才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:11:58.647

原来你需要 runAllManagedModulesForAllRequests="true" 在模块上的 web.config 中才能在 IIS 或 IIS Express 中工作。这不是新的 asp.net mvc 4 项目的默认设置

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
    </modules>
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T13:06:50.750

值得检查您的文件是否未命名为 robots.txt.txt

# python - 如何将python脚本转换为Web界面

> ID：13544936
> 
> 赞同：2
> 
> 时间：2012-11-24T19:48:11.117
> 
> 标签：python, html

我正在尝试转换这个 python 脚本（diff.py）

```
http://www.aaronsw.com/2002/diff/ 
```

在我的网站上进入完全相同的东西，即网络界面。他提供了您可以下载的脚本，我通过命令行让它在我的 Windows 计算机上运行，​​但我希望它也能在我的服务器上运行。我是如此接近。这是我到目前为止所拥有的。

这是我的html文档-

```
<form action="/cgi-bin/diff.py" method="get"><p>
<strong>Old URL:</strong> <input name="old" type="text"><br>
<strong>New URL:</strong> <input name="new" type="text"><br>
<input value="Diff!" type="submit">
</p></form> 
```

这是我编辑的 diff.py 脚本，它几乎可以工作了 -

```
#!G:\Program Files\Python25\python.exe
"""HTML Diff: http://www.aaronsw.com/2002/diff
Rough code, badly documented. Send me comments and patches.

__author__ = 'Aaron Swartz <me@aaronsw.com>'
__copyright__ = '(C) 2003 Aaron Swartz. GNU GPL 2 or 3.'
__version__ = '0.22' """

import cgi
import cgitb; cgitb.enable()
form = cgi.FieldStorage()
reshtml = """Content-Type: text/html\n
<html>
<head><title>Test</title></head>
<body>
"""
print reshtml
a = form['old'].value
b = form['new'].value

import difflib, string

def isTag(x): return x[0] == "<" and x[-1] == ">"

def textDiff(a, b):
    """Takes in strings a and b and returns a human-readable HTML diff."""

    out = []
    a, b = html2list(a), html2list(b)
    s = difflib.SequenceMatcher(None, a, b)
    for e in s.get_opcodes():
        if e[0] == "replace":
            # @@ need to do something more complicated here
            # call textDiff but not for html, but for some html... ugh
            # gonna cop-out for now
            out.append('<del class="diff modified">'+''.join(a[e[1]:e[2]]) +   '</del><ins class="diff modified">'+''.join(b[e[3]:e[4]])+"</ins>")
        elif e[0] == "delete":
            out.append('<del class="diff">'+ ''.join(a[e[1]:e[2]]) + "</del>")
        elif e[0] == "insert":
            out.append('<ins class="diff">'+''.join(b[e[3]:e[4]]) + "</ins>")
        elif e[0] == "equal":
            out.append(''.join(b[e[3]:e[4]]))
        else: 
            raise "Um, something's broken. I didn't expect a '" + `e[0]` + "'."
    return ''.join(out)

def html2list(x, b=0):
    mode = 'char'
    cur = ''
    out = []
    for c in x:
        if mode == 'tag':
            if c == '>': 
                if b: cur += ']'
                else: cur += c
                out.append(cur); cur = ''; mode = 'char'
            else: cur += c
        elif mode == 'char':
            if c == '<': 
                out.append(cur)
                if b: cur = '['
                else: cur = c
                mode = 'tag'
            elif c in string.whitespace: out.append(cur+c); cur = ''
            else: cur += c
    out.append(cur)
    return filter(lambda x: x is not '', out)

if __name__ == '__main__':
    import sys
    try:
        a, b = sys.argv[1:3]
    except ValueError:
        print "htmldiff: highlight the differences between two html files"
        print "usage: " + sys.argv[0] + " a b"
        sys.exit(1)
    print textDiff(open(a).read(), open(b).read())

print '</body>'
print '</html>' 
```

这是我在浏览器中得到的结果 -

```
htmldiff: highlight the differences between two html files usage: E:/xampp/cgi-bin/diff.py a b 
```

任何人都可以看到有什么问题吗？

好的，这是我使用 print open(a).read() 时的错误 ---

```
A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.
 E:\xampp\cgi-bin\diff2.py in ()
   19 b = form['new'].value
   20 
   21 print open(a).read()
   22 
   23 
builtin open = <built-in function open>, a = 'http://www.google.com', ).read undefined

<type 'exceptions.IOError'>: [Errno 2] No such file or directory: 'http://www.google.com'
    args = (2, 'No such file or directory')
    errno = 2
    filename = 'http://www.google.com'
    message = ''
    strerror = 'No such file or directory' 
```

好吧，我想我实际上是自己想出来的。以下是必要的更改。我在原始代码的开头停了下来-

```
#!G:\Program Files\Python25\python.exe
"""HTML Diff: http://www.aaronsw.com/2002/diff
Rough code, badly documented. Send me comments and patches.

__author__ = 'Aaron Swartz <me@aaronsw.com>'
__copyright__ = '(C) 2003 Aaron Swartz. GNU GPL 2 or 3.'
__version__ = '0.22' """

import cgi
import cgitb; cgitb.enable()
form = cgi.FieldStorage()
reshtml = """Content-Type: text/html\n
<html>
<head><title>Tonys Test</title></head>
<body>
"""
print reshtml
old2 = form['old'].value
new2 = form['new'].value

import urllib2

a = urllib2.urlopen(old2).read()
b = urllib2.urlopen(new2).read()

#print a
#print b

import difflib, string 
```

好吧，我说得太早了。它有效，但没有突出差异。我只有旧版本的删除线。我尝试添加我剪下的那部分，据说它会突出显示，但它不起作用。我得到了我原来的错误声明。我会继续努力的。

好的，终于工作了。我不得不在最后添加这段代码 -

```
def htmlDiff(a, b):
    f1, f2 = a.find('</head>'), a.find('</body>')
    ca = a[f1+len('</head>'):f2]

    f1, f2 = b.find('</head>'), b.find('</body>')
    cb = b[f1+len('</head>'):f2]

    r = textDiff(ca, cb)
    hdr = '<style type="text/css"><!-- ins{background-color: #bbffbb} del{background-color: #ffcccc}--></style></head>'
    return b[:f1] + hdr + r + b[f2:]

print htmlDiff(a, b)
print '</body>'
print '</html>' 
```

我在 0.1 版本下载中找到了这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:27:04.380

这个块是问题：

```
if __name__ == '__main__':
    import sys
    try:
        a, b = sys.argv[1:3]
    except ValueError:
        print "htmldiff: highlight the differences between two html files"
        print "usage: " + sys.argv[0] + " a b"
        sys.exit(1) 
```

去掉它。

而这一行：

```
print textDiff(open(a).read(), open(b).read()) 
```

应该成为

```
print textDiff(a, b) 
```

# c++ - 为什么 *pointer+offset 不能用作左值？（“错误：赋值中的非左值”）

> ID：13544938
> 
> 赞同：1
> 
> 时间：2012-11-24T19:48:44.713
> 
> 标签：c++, arrays, pointers, syntax

这是我的代码：

```
void doubleValuesInArray(int *pointer) {
    for (int n = 0; n < 2; n++) {
        int a = (*pointer+n);
        a = a * 2;
        *pointer+n = a;
    }
}

int main(int argc, char** argv) {
    int myArray[] = {1,2};
    doubleValuesInArray(myArray);
    cout<<myArray[0]<<endl;
    return 0;
} 
```

输出是：

main.cpp：在函数'void doubleValuesInArray（int *）'中：main.cpp：19：错误：赋值make [2]中的非左值：*** [build/Debug/Cygwin-Windows/main.o]错误1 make [1]：****[.build-conf] 错误 2 make: ** * [.build-impl] 错误 2*

 *我的问题是：

```
int a = (*pointer+n); 
```

工作得很好。变量 'a' 通过使用 *pointer + n 从数组中获取值 0 和 1。

然而

```
 *pointer+n = a; 
```

似乎不起作用。

如果我使用指针[n] = a; 它也可以。

为什么我的第一种方法不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T19:50:58.883

您没有正确地为指针表达式加上括号：`*`具有更高的优先级，因此您应该在加法周围添加括号：

```
int a = *(pointer+n);
a = a * 2;
*(pointer+n) = a; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T19:50:05.217

很清楚 -`*pointer+n`是一个 r 值 - 意味着你不能分配给它。

你的意思是

```
*(pointer+n) = a; 
```

因为两者不同。`*pointer+n`简单地返回数组的第一个元素并添加`n`到它（结果是一个 r 值）。`*(pointer+n)`是第 n 个元素（l 值）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T19:50:49.313

你在做什么是完全错误的。取消引用运算符`*`具有比 更高的优先级（优先级）`+`，因此`*pointer + n`增加了`n`指向的值`pointer`。更正：

```
void doubleValuesInArray(int *pointer) {
    for (int n = 0; n < 2; n++) {
        int a = *(pointer+n);
        a = a * 2;
        *(pointer+n) = a;
    }
} 
```*

# ruby-on-rails - sudo: rvm: command not found - RVM MultiUser 安装在 Ubuntu 12.04 服务器上

> ID：13544939
> 
> 赞同：4
> 
> 时间：2012-11-24T19:48:46.420
> 
> 标签：ruby-on-rails, ruby, nginx, rvm, passenger

我正在设置一个服务器，它是一个 Ubuntu 12.04

首先我安装了 RVM 多用户：

`me@ubuntu$ \curl -L https://get.rvm.io | sudo bash -s stable`

然后在安装 RVM 之后，正如安装所暗示的那样，我将自己添加到 RVM 组

`usermod -a -G me rvm`

安装红宝石 `rvm insall 1.9.3 --default`

然后我尝试安装系统范围的 gem 乘客，我得到了这个：

```
me@ubuntu:~$ rvmsudo gem install passenger
sudo: gem: command not found 
```

事实上，任何运行的命令都`rvmsudo`只是说`sudo : {command}: not found`

我需要在系统范围内安装 gems，因为它是一个生产服务器设置，`passenger-install-nginx-module`安装 int 时也需要 root 权限`/opt/nginx/`

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:32:38.783

也许[这个](https://github.com/wayneeseguin/rvm/issues/1329)错误会影响你。
您可以安装旧版本的 rvm，而不是等待固定版本：

```
\curl -L https://get.rvm.io | sudo bash -s -- --version 1.16.20 
```

有关详细信息，请参阅[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)。

编辑：这个问题现在已经解决了。`rvmsudo`正在为我工​​作（Ubuntu 12.04）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T01:15:22.253

我今天也遇到了同样的问题，我没有等待修复或安装旧版本的 rvm，而是将我的 rvmsudo 文件修补回 1.16.x 并保留 rvm 的其余部分。

首先仔细检查 rvmsudo 在系统上的位置：

```
> which rvmsudo
/usr/local/rvm/bin/rvmsudo 
```

然后将其替换为 1.16.x 的版本

```
curl https://raw.github.com/wayneeseguin/rvm/eef67d80409ee3291de83ec4f070bed5aaca6d41/binscripts/rvmsudo > /path/to/rvmsudo 
```

注意：我实际上尝试首先更新到最新版本的rvm，因为@trobter在rvm的github帐户中链接到上面的问题被标记为已修复，但修复并没有完全解决问题，所以我搜索了他们的github从 1.16.x 开始考虑 rvmsudo 的版本，它确实有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T10:33:03.407

我认为这可能是因为您没有将自己添加到 rvm 组。你说：

```
usermod -a -G me rvm 
```

它*应该*是：

```
usermod -a -G rvm me 
```

此外，我需要将以下行添加到我的末尾`.bashrc`：

```
[[ -s "/usr/local/rvm/scripts/rvm" ]] && source "/usr/local/rvm/scripts/rvm"  # This loads RVM into a shell session. 
```

之后，只需再次登录到您的 shell。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T20:05:07.917

给 rvmsudo 提供 gem 命令的完整路径？

# jquery - jQuery 验证成功指示器

> ID：13544944
> 
> 赞同：5
> 
> 时间：2012-11-24T19:49:08.267
> 
> 标签：jquery, jquery-validate

好的，我想我错了……但我似乎无法得到答案。我只是想创建一个成功复选标记或指示用户在输入表单中输入的内容是有效的。脚本的注释掉部分是我试图实现的想法。这是脚本：

```
$('document').ready(function(){
    $('form').validate({
        rules: {
           a: {required:true, minlength:2},
           b: {required:true}
        },      
        messages: {
           a: {required: "enter your name!"},
           b: {required: "enter the date!"}                        
        },
        errorPlacement: function(error, element) {
        if(element.attr('name') == 'a'){
             $('#name').html(error);                
         }
         if(element.attr('name') == 'b'){
             $('#date').html(error);                
         }
        },
        success: function(error){
            //a: {$('#name').html('nice name!');},
            //b: {$('#date').html('nice date!');}                           
        },
        debug:true
    });
    $('#a').blur(function(){
        $("form").validate().element("#a");
    });
}); 
```

这是html：

```
<form action="#" id='commentForm'>
    <input type="text" name="a" id="a">
    <input type="text" name="b" id="b">
    <button type="submit">Validate!</button>
<div id="date" style="border:1px solid blue;"></div>
<div id="name" style="border:1px solid red;"></div>
</form> 
```

最后但同样重要的是，这里是 jsfiddle：

[http://jsfiddle.net/mmw562/wQxQ8/8/](http://jsfiddle.net/mmw562/wQxQ8/8/)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T19:58:14.403

里面的部分`success:`可能是一个类名或一个 JavaScript 回调函数，它看起来就像任何其他函数一样。但是，相反，您将其编写为一组插件选项。还有，既然叫“成功”，为什么`error`没有的时候还要传进去呢？ [根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，它应该看起来像这样......

```
success: function(label){
    label.addClass("valid").text("Ok!");                        
}, 
```

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

> 如果指定，则显示错误标签以显示有效元素。如果给定一个字符串，则将其作为一个类添加到标签中。如果给定了一个函数，则使用标签（作为 jQuery 对象）作为其唯一参数调用它。这可用于添加诸如“ok！”之类的文本。

这是您的 jsFiddle 稍作修改以显示基本概念。也许您可以`background-image`在`.valid` `class`.

[http://jsfiddle.net/wQxQ8/12/](http://jsfiddle.net/wQxQ8/12/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T20:05:26.670

这是一个可能的解决方案：

```
$('document').ready(function(){
    $('form').validate({
        rules: {
           a: {required:true, minlength:2},
           b: {required:true}
        },      
        messages: {
           a: {required: "enter your name!"},
           b: {required: "enter the date!"}                        
        },
        errorPlacement: function(error, element) {
        if(element.attr('name') == 'a'){
             $('#name').html(error);                
         }
         if(element.attr('name') == 'b'){
             $('#date').html(error);                
         }
        },
        success: function(label) {
            var parentId = $(label).parent().attr("id");
            switch(parentId) {
                case "name":
                    $(label).html("nice name");
                    break;
                case "date":
                    $(label).html("nice date");
                    break;
            }                    
        },
        debug:true
    });
    $('#a').blur(function(){
        $("form").validate().element("#a");
    });
}); 
```

更新小提琴：http: [//jsfiddle.net/wQxQ8/13/](http://jsfiddle.net/wQxQ8/13/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-09T18:24:05.103

要回答标题，而不是您的实际问题：

这是检查某个输入的 JQuery 验证是成功还是失败的方法，它返回 true / false 布尔值：

```
$("[name='ConfirmCode']").valid(); // RETURNS true/false 
```

例子：

```
if (!$("[name='ConfirmCode']").valid())
   return; 
```

要检查整个表单的验证状态，请使用：

```
$('form').valid(); // RETURNS true/false 
```

要在验证过程结果中包含隐藏输入：

```
$('form').validate({
   ignore: []
}); 
```

# jquery - 样式标签中类的位置变化对页面有影响，为什么？

> ID：13544950
> 
> 赞同：3
> 
> 时间：2012-11-24T19:49:45.113
> 
> 标签：jquery, html, css

我对 CSS 的工作不是很好，所以在这里发布这个来获取一些信息。

请查看下面的代码，在哪里显示表格，每当鼠标在一行上移动时，该行就会突出显示。使用下面的代码，我只会突出显示偶数行。但是，如果您将类“highlight”移动到类“stripe2”下方，那么一旦鼠标在其上移动，每一行都会突出显示。有人可以解释一下为什么类定义的位置会影响显示吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Striping/Hover Highlighting a Table</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#theList tr:even").addClass("stripe1");
        $("#theList tr:odd").addClass("stripe2");

        $("#theList tr").hover(
            function () {
                $(this).toggleClass("highlight");
            },
            function () {
                $(this).toggleClass("highlight");
            }
        );
    });
</script>
<style type="text/css">
th,td {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
    color: #000000;
}
tr {
    border: 1px solid gray;
}
td {
    width:200px;
    padding:3px;
}
th {
    background-color:#D2E0E8;
    color:#003366
}
table {
    border: 1pt solid gray;
}
.clickable {
    cursor:pointer;
}
.stripe1 {
    background-color:#0f0;
}
.highlight {
    background-color: #ffcc00;
    font-weight:bold;
}
.stripe2 {
    background-color:#afa;
}

</style>
</head>
<body>
<h1>Using jQuery to stripe and hover-highlight a table</h1>
<table id="theList">
    <thead>
    <tr>
      <th>Item</th>
      <th>Price</th>
  </tr>
  </thead>
  <tbody>
  <tr>
      <td>Milk</td>
      <td>1.99</td>
  </tr>
  <tr>
      <td>Eggs</td>
      <td>2.29</td>
  </tr>
  <tr>
      <td>Butter</td>
      <td>3.49</td>
  </tr>
  <tr>
      <td>Bread</td>
      <td>0.99</td>
  </tr>
  <tr>
      <td>Pasta</td>
      <td>1.19</td>
  </tr>
  <tr>
      <td>Honey</td>
      <td>4.39</td>
  </tr>
  <tr>
      <td>Cookies</td>
      <td>2.99</td>
  </tr>
  <tr>
      <td>Apples</td>
      <td>0.59</td>
  </tr>
  <tr>
      <td>Sugar</td>
      <td>1.78</td>
  </tr>
  <tr>
      <td>Pepper</td>
      <td>1.56</td>
  </tr>
  </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:03:50.900

问题是类`.highlight`和`.stripe2`具有相同的特异性，所以在你的 CSS 中最后出现的优先。您可以增加突出显示的特殊性，使其独立于 CSS 中的顺序。例如通过包含`tr`标签。

`.highlight`, 特异性 = 10

`tr.highlight`, 特异性 = 11

# c# - 我应该使用 CLI 将 C# 项目转移到 C++ 和 Linux 吗？

> ID：13544952
> 
> 赞同：-1
> 
> 时间：2012-11-24T19:50:01.243
> 
> 标签：c#, c++, c++-cli

我的解决方案包含许多项目，它们都是用 C# 编写的。我需要将整个解决方案转移到 C++ 和 Linux。重写所有项目会花费很多时间，所以我想一个一个地做。我想从最基本的类最“常见”的项目开始。

我正在考虑从最“常见”的项目（具有其他项目使用的基本类的基本项目）开始在 C++-CLI 上一一重写项目。

但是一切都会完成，似乎我会有很多我认为不能移植到 Linux 的 CLI 代码？

所以主要问题是考虑到我需要在 Linux 上运行解决方案，我应该使用 CLI 的强度如何？

我可以避免 CLI 并用 zeromq 替换它，如果它会更好的话。

**upd**这是高频交易应用程序，所以单声道是不可接受的。我想拥有纯 C++、无 gc 语言，因为我计划进行大量优化（无锁代码、自旋锁，可能使用 AVX 和 NUMA 等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:16:32.713

c++/CLI 是 Microsoft 特定的。它不会是便携式的。此外，您不会摆脱 GC，因为 GC 是框架的功能而不是语言。C++/CLI 只是另一种结合了本机代码的 .net 语言。

如果你真的不能使用单声道，那么运气不好。您将不得不重写所有内容。

# ruby-on-rails - Ruby On Rails 将歌曲上传到 Rackspace Cloud Files 容器

> ID：13544954
> 
> 赞同：2
> 
> 时间：2012-11-24T19:50:08.250
> 
> 标签：ruby-on-rails, ruby, rackspace-cloud

好的，这就是交易，我正在创建一个网络应用程序，并且我正在添加将音乐上传到用户个人资料的功能。我正在使用 Rackspace 云文件进行存储，但在完成两项任务时遇到了一些麻烦。首先，我无法编写将文件上传到容器的代码。其次，我需要生成要存储在数据库中的文件的 url。我对集成 API 很陌生，所以我没有很多知识。

```
object = container.create_object 'filename', false
object.write file 
```

此代码对于上传文件是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T16:03:45.267

# 直接使用雾

首先，如果您还没有使用它，官方支持的用于直接与来自 Ruby 的 Cloud Files 交互的 Ruby 库是[fog](http://fog.io/)。首先，将其添加到您的`Gemfile`：

```
gem 'fog' 
```

然后运行`bundle install`安装它。

要上传文件并获取其公共 url，直接使用雾：

```
# Use your Rackspace API key, not your password; you can find your API key by logging
# in to the control panel, clicking on your name in the top-right, and choosing
# "account settings".

service = Fog::Storage.new(
  provider: 'rackspace',
  rackspace_username: ENV['RACKSPACE_USERNAME'],
  rackspace_api_key: ENV['RACKSPACE_API_KEY']
)

dir = service.directories.create key: 'directory-name', public: true

files_to_upload.each do |path|
  file = dir.files.create key: File.basename(path), body: File.open(path, 'r')
  puts "public URL for #{file} is #{file.public_url}"
end 
```

# 使用载波

然而！你正在做的是 Rails 中一个非常常见的用例，所以它有一个宝石：[CarrierWave](https://github.com/carrierwaveuploader/carrierwave)。将以下行添加到您的 Gemfile：

```
gem 'fog'
gem 'carrierwave' 
```

并运行`bundle install`安装它。现在配置 CarrierWave 以使用云文件：

```
# config/initializers/carrierwave.rb

CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider           => 'rackspace',
    :rackspace_username => 'xxxxxx',
    :rackspace_api_key  => 'yyyyyy'
  }
  config.fog_directory = 'name_of_directory'
end 
```

接下来生成一个*上传*器：

```
rails g uploader Song 
```

现在您可以使用`SongUploader`来存储和检索乐曲数据。有关更多详细信息，请参阅生成的代码或[CarrierWave 文档](https://github.com/carrierwaveuploader/carrierwave)。

# django - 在数据库中存储表单数据

> ID：13544956
> 
> 赞同：0
> 
> 时间：2012-11-24T19:50:27.797
> 
> 标签：django, django-views

我不知道如何在数据库中存储一个简单的表单。我想我已经很接近了，但是我的views.py中可能有问题。这是我的代码，有什么想法我做错了吗？（也在[dpaste](http://dpaste.com/836003/)上）

```
# models.py
class IngredienceCategory(models.Model):
    name = models.CharField(max_length=30, unique=True)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
    verbose_name_plural = "Ingredience Categories"

    def __unicode__(self):
        return self.name

# forms.py
class CategoryForm(forms.Form):
    name = forms.CharField(max_length=30)

# views.py
@login_required
def newCategory(request):
    if request.method == 'POST':
        username = request.user.username
        cform = CategoryForm(request.POST)
        if cform.is_valid():
            formInstance = cform.save(commit = False)
            formInstance.user = username
            formInstance.name = cform.cleaned_data['name']
            formInstance =  IngredienceCategory.objects.filter(name=formInstance.name, user=formInstance.user)
            formInstance.save()
            # return HttpResponseRedirect('new-category/')
    else:
        form = CategoryForm()

    context = {'form': form}

    return render_to_response('new-category.html', context, context_instance=RequestContext(request))

# new-category.html
<h3>Insert New Category</h3>
<form action="/" method="post" id="food-form">{% csrf_token %} 
{{ form.as_p }}
<input type="submit" name="foodForm" value="Save" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:44:08.247

下面的行在当前位置没有用。在您保存表单数据之前，该命令将执行数据库查询并将结果分配为查询集。

```
formInstance =  IngredienceCategory.objects.filter(name=formInstance.name, user=formInstance.user) 
```

**这应该有效：**

使用 cform 作为正常形式：

```
if cform.is_valid():
    formInstance = IngredienceCategory(user=request.user, cform.cleaned_data['name'])
    formInstance.save() 
```

如果 cform 是 ModelForm 你可以这样做：

```
if cform.is_valid():
    formInstance = cform.save(commit=False)
    formInstance.user = request.user
    formInstance.save() 
```

我建议您查看[ModelForms](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#modelform)，因为它会根据您的模型构建清洁功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:20:20.090

您应该从 ModelForm 继承

from django.forms import ModelForm class CategoryForm(ModelForm): class Meta: model = IngredienceCategory

有关如何呈现表单并将其保存到数据库的信息，请参阅[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/ 。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

# c - FIFO 队列头指针不正确

> ID：13544961
> 
> 赞同：1
> 
> 时间：2012-11-24T19:50:57.260
> 
> 标签：c, pointers, data-structures, queue, fifo

我需要在 C 中为家庭作业项目的一小部分实现一个队列。几年来我一直在用各种语言做这件事，所以我很惊讶我遇到了这么多麻烦。我的问题是 Head 的值不断更改为最近的附加值。

到目前为止，这是我的代码：

```
void Enqueue( fifo* queue, int customerData)
{
//Determine if a head or tail exists
int tailExists = 0;

if(queue->tail->customerId >= 0){
    tailExists = 1;
}

//Create new elements

struct fifo_element a, *element;
element = &a;

if(tailExists == 1)
    printf("test2 the head is %d\t", queue->head->customerId);

element->customerId = customerData;

if(tailExists == 1)
    printf("test3 the head is %d\t", queue->head->customerId);

//Set the next element to the current tail
if(tailExists == 1)
    element->next = queue->tail;
else
    element->next = NULL;

//Set the prev element to null
element->prev = NULL;

//Set the last element's previous to the new element
if(tailExists == 1){
    queue->tail->prev = element;
}

//Set the tail to the new element
queue->tail = element;
if(tailExists == 0){
    queue->head = element;
}

printf("the head is %d\t", queue->head->customerId);
printf("the tail is %d\t", queue->tail->customerId);

} 
```

根据 printf 行，该行`element->customerId = customerData;`导致 Head 值发生变化。但是，我不明白这怎么可能……为什么会这样？

（我的测试程序只是从 0->4 运行一个 for 循环，使用 customerData 值 i 调用 enqueue）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:10:41.007

```
element = &a; 
```

您在队列中插入指向局部变量的指针，函数返回后，局部变量不再存在，并且队列包含一个悬空指针。

`malloc()`记忆：

```
struct fifo_element *element = malloc(sizeof *element); 
```

# mvvm - 具有自包含客户端-服务器代码和 IoC 容器的有状态 MVVM 应用程序架构

> ID：13544963
> 
> 赞同：1
> 
> 时间：2012-11-24T19:51:07.457
> 
> 标签：mvvm, architecture, caliburn.micro, simple-injector

我有一个具有多个屏幕并与 WCF Web 服务对话的应用程序。我将 SimpleInjector 用于我最喜欢的 IoC 容器，将 Caliburn Micro 用于带有 WPF 的 MMVM。

我有一个单独的类实现，`ITransportClient`它控制与 Web 服务的连接并发送和接收消息。

该应用程序具有以下状态：

1.  启动和初始化应用程序。
2.  显示登录表单。
3.  登录表单执行与聊天服务器的连接`ITransportClient.Login(username, password)`。
4.  如果登录成功，则显示一个新的 MainWindow 视图，如果登录失败，则再次提示用户输入凭据。
5.  登录后，MainWindow 控制发送和接收到 WCF 服务的消息。
6.  当与服务器失去连接时（由 通知`ITransportClientCallback.OnTransportDisconnected`），或者当用户单击注销时，登录表单会再次显示。

凭借我现有的技术，这是我的第一个 MVVM 项目，我有以下架构和设计问题：

1.  我应该使用什么设计模式来控制显示单独的登录屏幕，然后在连接时显示主屏幕，并在连接丢失时恢复到登录屏幕？
2.  谁应该控制聊天应用程序的连接状态，这段代码应该放在哪里？这个状态会属于引导程序类吗？
3.  我是否可以将 ITransportClient 注册为持久性实例范围，并在需要时通过注入需要它的 ViewModel 来控制多个表单（即登录表单和主窗口表单）？

`ITransportClient`界面如下：

```
public interface ITransportClientCallback
{
    string OnReceivedMessage();
    void OnTransportDisconnected();
}

// transport interface that client calls
public interface ITransportClient
{
    bool SendLogin(string username, string password);
    void SendLogout();
    void SendMessage();
    void RegisterCallback(ITransportClientCallback applicationHostCallback);
} 
```

连同使用 SimpleInjector 的 Caliburn.Micro 引导程序代码：

```
public class SimpleInjectorBootstrapper : Caliburn.Micro.Bootstrapper
{
    private Container container;

    protected override void Configure()
    {
        this.container = new Container();
        this.container.Register<IWindowManager, WindowManager>();
        this.container.Register<IEventAggregator, EventAggregator>();
        this.container.Register<IAppViewModel, AppViewModel>();
        this.container.RegisterSingle<ITransportClient, Transport.WCF.TransportClient>();
    }

    protected override object GetInstance(Type serviceType, string key)
    {
        return this.container.GetInstance(serviceType);
    }

    protected override IEnumerable<object> GetAllInstances(Type serviceType)
    {
        return this.container.GetAllInstances(serviceType);
    }

    protected override void OnStartup(object sender, System.Windows.StartupEventArgs e)
    {
        base.OnStartup(sender, e);
        var appViewModel = this.container.GetInstance<IAppViewModel>();
        var windowManager = this.container.GetInstance<IWindowManager>();
        windowManager.ShowWindow(appViewModel);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:56:46.940

> 我应该使用什么设计模式来控制显示单独的登录屏幕，然后在连接时显示主屏幕，并在连接丢失时恢复到登录屏幕？

在很多情况下，MVVM 项目伴随着一个“中介”或“信使”。所有的 View Model 都可以通过这种机制，通过订阅和发布消息的方式相互交互。所有虚拟机都会订阅“UserLoggedOutMessage”并做出必要的响应（即将其视觉状态更改为只读，或者根本不显示任何内容）。单独的引导程序还可以将用户“重定向”到登录屏幕。

> 谁应该控制聊天应用程序的连接状态，这段代码应该放在哪里？这个状态会属于引导程序类吗？

一种方法是对应用程序的状态进行抽象 - 这等效于 asp.net 中的 HTTPContext.Current 变量。你可以有一个 Session 对象，它有一个 CurrentState 只读属性，对应的 Login()、Logout()、SendMessage() 方法充当状态机。一旦应用程序的状态发生变化，所有视图模型都会订阅事件 - 再次通过中介。Session 对象可以是引导程序上的静态变量，也可以是通过 IoC 注入到所有 VM 的单例。

> 我是否可以将 ITransportClient 注册为持久性实例范围，并在需要时通过注入需要它的 ViewModel 来控制多个表单（即登录表单和主窗口表单）？

这绝对是这个想法。在大多数 MVVM 项目中，您可能希望将依赖项的单个实例注入到 VM 中。这允许更有效的内存使用，还允许一个干净的面向对象模型（与过程不可变事务脚本相反）。

话虽如此，如果这是尝试检查“应用程序状态”，我会将抽象级别更改为更高的级别，例如 IApplicationStateMachine 或 IUserSession。这样，如果您想在一个应用程序实例中支持多个用户，理论上您可以拥有多个 IUserSession 对象实例。

# python - Python Matplotlib 交互式绘图 - 几帧后冻结

> ID：13544965
> 
> 赞同：2
> 
> 时间：2012-11-24T19:51:26.893
> 
> 标签：python, matplotlib, plot, interactive, pythonxy

我在让 matplotlib 与交互式绘图很好地配合使用时遇到问题……我看到的是，在显示我的模拟数据的几帧之后，matplotlib 挂起并且不再显示。

基本上我一直在玩一些科学模拟 - 并且希望能够在制作结果时绘制我的结果 - 而不是在最后 - 使用 pylab.show()。

我从不久前发现了一个食谱示例，它似乎可以满足我的要求-简单来说（尽管数据不同）。食谱在这里... [http://www.scipy.org/Cookbook/Matplotlib/Animations#head-2f6224cc0c133b6e35c95f4b74b1b6fc7d3edca4](http://www.scipy.org/Cookbook/Matplotlib/Animations#head-2f6224cc0c133b6e35c95f4b74b1b6fc7d3edca4)

我搜索了一下，我知道有些人之前遇到过这些问题 - [Matplotlib 动画要么在几帧后冻结，要么只是不起作用，](https://stackoverflow.com/questions/3441874/matplotlib-animation-either-freezes-after-a-few-frames-or-just-doesnt-work)但当时似乎没有好的解决方案。我想知道是否有人在这里找到了一个好的解决方案。

我在 matplotlib 上尝试了一些“后端”......TkAgg 似乎适用于几帧...... qt4agg 不显示帧。我还没有正确安装 GTK。

我正在运行最新的 pythonxy(2.7.3)。

有人有什么建议吗？

```
import matplotlib
matplotlib.use('TkAgg') # 'Normal' Interactive backend. - works for several frames
#matplotlib.use('qt4agg') # 'QT' Interactive backend. - doesn't seem to work at all
#matplotlib.use('GTKAgg') # 'GTK' backend - can't seem to get this to work.... -

import matplotlib.pyplot as plt
import time
import numpy as np

plt.ion()

tstart = time.time()                     # for profiling
x = np.arange(0,2*np.pi,0.01)            # x-array
line, = plt.plot(x,np.sin(x))

#plt.ioff()

for i in np.arange(1,200):

    line.set_ydata(np.sin(x+i/10.0))  # update the data
    line.axes.set_title('frame number {0}'.format(i))

    plt.draw()                         # redraw the canvas

print 'FPS:' , 200/(time.time()-tstart) 
```

**编辑**：

编辑代码 - 摆脱一些风格问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:11:05.727

好的......所以我把一些可能对我有用的东西拼凑在一起......

基本上它就像一个淡化的gui - 但我希望它是一个我可以导入的类并且基本上忘记了（这里希望）的细节。

不过我应该说——这是我第一次尝试在 python 中线程化 OR guis——所以这段代码带有一个健康警告。

** 我不会将问题标记为已回答 - 因为我相信更有经验的人会有更好的解决方案。

```
'''

JP

Attempt to get multiple updating of matplotlibs working.
Uses WX to create an 'almost' gui with a mpl in the middle of it.
Data can be queued to this object - or you can directly plot to it.

Probably will have some limitations atm
- only really thinking about 2d plots for now -
but presumably can work around this for other implimentations.
- the working code seems to need to be put into another thread.
Tried to put the wx mainloop into another thread,
but it seemed unhappy. :(

Classes of Interest :
    GraphData - A silly class that holds data to be plotted.
    PlotFigure - Class of wx frame type.
        Holds a mpl figure in it + queue to queue data to.
        The frame will plot the data when it refreshes it's canvas

    ThreadSimulation - This is not to do with the plotting
                        it is a test program.

Modified version of:

Copyright (C) 2003-2005 Jeremy O'Donoghue and others

License: This work is licensed under the PSF. A copy should be included
with this source code, and is also available at
http://www.python.org/psf/license.html

'''
import threading
import collections
import time

import numpy as np

import matplotlib
matplotlib.use('WXAgg')

from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg
from matplotlib.backends.backend_wx import NavigationToolbar2Wx

from matplotlib.figure import Figure

import wx

class GraphData(object):
    '''
        A silly class that holds data to be plotted.
    '''
    def __init__(self, xdatainit, ydatainit):

        self.xdata = xdatainit
        self.ydata = ydatainit

class PlotFigure(wx.Frame):

    def __init__(self ):
        '''
            Initialises the frame.
        '''
        wx.Frame.__init__(self, None, -1, "Test embedded wxFigure")

        self.timerid = wx.NewId()

        self.fig = Figure((5,4), 75)
        self.canvas = FigureCanvasWxAgg(self, -1, self.fig)
        self.toolbar = NavigationToolbar2Wx(self.canvas)
        self.toolbar.Realize()

        # On Windows, default frame size behaviour is incorrect
        # you don't need this under Linux
        tw, th = self.toolbar.GetSizeTuple()
        fw, fh = self.canvas.GetSizeTuple()
        self.toolbar.SetSize(wx.Size(fw, th))

        # Now put all into a sizer
        sizer = wx.BoxSizer(wx.VERTICAL)
        # This way of adding to sizer allows resizing
        sizer.Add(self.canvas, 1, wx.LEFT|wx.TOP|wx.GROW)
        # Best to allow the toolbar to resize!
        sizer.Add(self.toolbar, 0, wx.GROW)
        self.SetSizer(sizer)
        self.Fit()
        wx.EVT_TIMER(self, self.timerid, self.onTimer)

        self.dataqueue = collections.deque()

        # Add an axes and a line to the figure.
        self.axes = self.fig.add_subplot(111)
        self.line, = self.axes.plot([],[])

    def GetToolBar(self):
        '''
            returns default toolbar.
        '''
        return self.toolbar

    def onTimer(self, evt):
        '''
            Every timer period this is called.

            Want to redraw the canvas.
        '''
        #print "onTimer"
        if len(self.dataqueue) > 0 :
            data = self.dataqueue.pop()

            x = data.xdata
            y = data.ydata

            xmax = max(x)
            xmin = min(x)

            ymin = round(min(y), 0) - 1
            ymax = round(max(y), 0) + 1

            self.axes.set_xbound(lower=xmin, upper=xmax)
            self.axes.set_ybound(lower=ymin, upper=ymax)

            self.line.set_xdata(x)
            self.line.set_ydata(y)

        # Redraws the canvas - does this even if the data isn't updated...
        self.canvas.draw()

    def onEraseBackground(self, evt):
        '''
        this is supposed to prevent redraw flicker on some X servers...
        '''
        pass

class ThreadSimulation(threading.Thread):
    '''
    Simulation Thread - produces data to be displayed in the other thread.
    '''

    def __init__(self,  nsimloops, datastep, pltframe, slowloop = 0):
        threading.Thread.__init__(self)

        self.nsimloops = nsimloops
        self.datastep = datastep
        self.pltframe = pltframe
        self.slowloop=slowloop

    def run(self):
        '''
        This is the simulation function.
        '''
        nsimloops = self.nsimloops
        datastep = self.datastep
        pltframe = self.pltframe

        print 'Sim Thread: Starting.'
        tstart = time.time()               # for profiling

        # Define Data to share between threads.
        x  = np.arange(0,2*np.pi,datastep)            # x-array
        y  = np.sin(x )

        # Queues up the data and removes previous versions.
        pltframe.dataqueue.append(GraphData(x,y))
        for i in range(len(pltframe.dataqueue)-1):
            pltframe.dataqueue.popleft()
        pltframe.dataqueue

        for i in np.arange(1, nsimloops):

            x = x + datastep
            y = np.sin(x)

            # Queues up the data and removes previous versions.
            pltframe.dataqueue.append(GraphData(x,y))
            for i in range(len(pltframe.dataqueue)-1):
                pltframe.dataqueue.popleft()
            #pltframe.dataqueue

            if self.slowloop > 0 :
                time.sleep(self.slowloop)

        tstop= time.time()
        print 'Sim Thread: Complete.'
        print 'Av Loop Time:' , (tstop-tstart)/ nsimloops

if __name__ == '__main__':

    # Create the wx application.
    app = wx.PySimpleApp()

    # Create a frame with a plot inside it.
    pltframe = PlotFigure()
    pltframe1 = PlotFigure()

    # Initialise the timer - wxPython requires this to be connected to
    # the receiving event handler

    t = wx.Timer(pltframe, pltframe.timerid)
    t.Start(100)

    pltframe.Show()
    pltframe1.Show()

    npoints = 100
    nsimloops = 20000
    datastep = 2 * np.pi/ npoints
    slowloop = .1

    #Define and start application thread
    thrd = ThreadSimulation(nsimloops, datastep, pltframe,slowloop)
    thrd.setDaemon(True)
    thrd.start()

    pltframe1.axes.plot(np.random.rand(10),np.random.rand(10))

    app.MainLoop() 
```

# url - 如何使我本地磁盘中的小程序可以从 Internet 的 URL 访问？

> ID：13544970
> 
> 赞同：0
> 
> 时间：2012-11-24T19:51:47.853
> 
> 标签：url, web, applet

这一定是一个非常愚蠢的问题，但我真的无法在任何地方找到答案......

**如何使我本地磁盘中的小程序可以从 Internet 的 URL 访问？**

我正在学习如何部署小程序。大多数教程告诉你如何编写 Java 代码，一个 html 页面，然后它们显示你可以通过一个网页访问启动小程序，这实际上是一个以 file::// 开头的本地 URL ...

我想将我的小程序推送到 Internet，以便地球另一端的人可以通过以 http:://... 开头的 URL 看到它

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:54:02.070

将小程序视为特殊的 HTML 标记（我希望它会更容易理解；）），为了使其可访问，它必须在 Internet 上托管一些软件（简单的托管就足够了）。所以你必须写一个带有applet标签的html页面，将它和applet类上传到你的托管服务器，瞧:)

# kinect - 更新 Kinect 关节位置时理解异常

> ID：13544978
> 
> 赞同：1
> 
> 时间：2012-11-24T19:52:30.593
> 
> 标签：kinect, kinect-sdk

我正在做一个非常简单的事情，我的目标是根据另一个骨架的位置移动一个骨架，为此我基于 HipCenter 位置。（这个算法可能是错误的，这个问题是关于 foreach 循环中发生的异常）

这是我的实际代码：

```
public static Skeleton MoveTo(this Skeleton skOrigin, Skeleton skDestiny)
{
     Skeleton skReturn = skOrigin; // just making a copy

        // find the factor to move, based on the HipCenter.
        float whatToMultiplyX = skOrigin.Joints[JointType.HipCenter].Position.X / skDestiny.Joints[JointType.HipCenter].Position.X;
        float whatToMultiplyY = skOrigin.Joints[JointType.HipCenter].Position.Y / skDestiny.Joints[JointType.HipCenter].Position.Y;
        float whatToMultiplyZ = skOrigin.Joints[JointType.HipCenter].Position.Z / skDestiny.Joints[JointType.HipCenter].Position.Z;

        SkeletonPoint movedPosition = new SkeletonPoint();
        Joint movedJoint = new Joint();
        foreach (JointType item in Enum.GetValues(typeof(JointType)))
        {
            // Updating the position
            movedPosition.X = skOrigin.Joints[item].Position.X * whatToMultiplyX;
            movedPosition.Y = skOrigin.Joints[item].Position.Y * whatToMultiplyY;
            movedPosition.Z = skOrigin.Joints[item].Position.Z * whatToMultiplyZ;

            // Setting the updated position to the skeleton that will be returned.
            movedJoint.Position = movedPosition;
            skReturn.Joints[item] = movedJoint;
        }

        return skReturn;
    } 
```

使用 F10 调试一切正常，直到 foreach 循环的第二遍。当我在 foreach 中第二次通过时，我在这条线上遇到了异常

```
skReturn.Joints[item] = movedJoint; 
```

异常说：

```
JointType index value must match Joint.JointType 
```

但价值实际上是脊椎。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:30:17.623

**解决了，这里是解决方案**

```
 Joint newJoint = new Joint(); // declare a new Joint

// Iterate in the 20 Joints
foreach (JointType item in Enum.GetValues(typeof(JointType)))
{
    newJoint = skToBeMoved.Joints[item];

            // applying the new values to the joint
            SkeletonPoint pos = new SkeletonPoint()
            {
                X = (float)(newJoint.Position.X + (someNumber)),
                Y = (float)(newJoint.Position.Y + (someNumber)),
                Z = (float)(newJoint.Position.Z + (someNumber))
            };

            newJoint.Position = pos;
            skToBeChanged.Joints[item] = newJoint;
        } 
```

这将起作用。

# javascript - 使用正则表达式提取数据

> ID：13544981
> 
> 赞同：0
> 
> 时间：2012-11-24T19:52:55.490
> 
> 标签：javascript, regex

给定以下字符串，我将如何提取数据选择（即 THIS-DATA）后面的引号之间的字符串。无论是使用单引号还是双引号，或者等号之前或之后是否有任何空格，我都希望它能够工作。谢谢

```
<td><img alt="abc" src="lib/templates/administrator/images/star.png" data-selected="THIS_DATA" title="None" class="vtip"></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:54:46.437

可以使用 jQuery 吗？不知道为什么需要使用正则表达式。

```
var $el = $(".vtip");
var data = $el.attr('data-selected'); 
```

或本机javascript：

```
var el = document.querySelector(".vtip");
var data = el.getAttribute('data-selected'); 
```

或带有数据集的本机javascript：

```
var el = document.querySelector(".vtip");
var data = el.dataset.selected; 
```

使用数据集的更多信息： [https ://developer.mozilla.org/en-US/docs/DOM/element.dataset](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:11:36.503

简单的正则表达式，假设`THIS_DATA`不包含引号：

```
var reg = /data-selected\s*=\s*["']([^"']*)["']/; 
```

要使用：

```
function extractData(yourString) {
    var match = str.match(yourString);
    return match ? match[1] : "";
} 
```

**编辑：**

或者更简单：

```
var data = str.replace(/.*data-selected\s*=\s*["']([^"']*)["'].*/, "$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:04:33.297

您可以将字符串解析为 dom

```
var xmlStr = '<td><img alt="abc" src="lib/templates/administrator/images/star.png" data-selected="THIS_DATA" title="None" class="vtip"></td>';
var parser = new DOMParser();
var xmlDoc = parser.parseFromString(xmlStr, "text/xml");

var path = 'img/@data-selected';

var nodes = xmlDoc.evaluate(path, xmlDoc, null, XPathResult.ANY_TYPE, null);

var result = nodes.iterateNext();
var data-selected  = result.textContent; 
```

# javascript - 尝试在手机应用程序和网站之间创建 websocket 链接

> ID：13544984
> 
> 赞同：0
> 
> 时间：2012-11-24T19:53:09.720
> 
> 标签：javascript, html, node.js, mongodb, socket.io

我正在为我在大学的顶点项目创建一个应用程序。该应用程序将用作签到应用程序，让用户可以跟踪约会并使用手机实际签到他们的约会。

我正在使用 node 和 mongodb 创建约会，并让用户使用该应用程序查找业务。我目前唯一遇到的问题是在应用程序和企业用于监控签到的网站之间建立链接。我想我可能会为此使用 socket.io。我还没有在应用程序中实现 socket.io，因为我仍在努力思考如何实现这个连接。

我想做的是在应用程序的签到按钮上有一个事件处理程序，当用户尝试签到时，让它向网站发送“通知”。有没有人有关于我将如何实现这一点的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:57:24.143

Socket.IO 正是您这样做的方式。你真的应该[在 Socket.IO 主页上做演示应用程序](http://socket.io/)，因为它正是你要找的。

基本上，当按下签入按钮时，只需执行以下操作：

```
socket.emit('checkin', { /* put data, like an ID, in this object */ }); 
```

在服务器上：

```
socket.on('checkin', function (data) {
    // Your data passed will be in the data var
}); 
```

Socket.IO 会序列化所有数据以及不适合您的数据。只是发射。这里的所有都是它的。

# php - 从一个数组合并多个数组

> ID：13544985
> 
> 赞同：7
> 
> 时间：2012-11-24T19:53:20.773
> 
> 标签：php, arrays, function, merge

如何从单个数组变量合并多个数组？假设我在**一个**数组变量中有这个

**这些都在一个变量中..**
`$array = array(array(1), array(2));`

```
Array
(
    [0] => 1
)
Array
(
    [0] => 2
) 
```

如何结束这个

```
Array
(
   [0] => 1
   [1] => 2
) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T20:08:27.423

这是 javascript 的 PHP 等价物`Function#apply`（从数组生成参数列表）：

```
$result = call_user_func_array("array_merge", $input); 
```

演示：http: [//3v4l.org/nKfjp](http://3v4l.org/nKfjp)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-26T05:50:06.273

这可能有效：

```
$array1 = array("item1" => "orange", "item2" => "apple", "item3" => "grape");
$array2 = array("key1" => "peach", "key2" => "apple", "key3" => "plumb");
$array3 = array("val1" => "lemon");

$newArray = array_merge($array1, $array2, $array3);

foreach ($newArray as $key => $value) {
  echo "$key - <strong>$value</strong> <br />"; 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-27T21:40:32.137

自**PHP 5.6**起，您可以使用[可变参数](http://php.net/manual/en/migration56.new-features.php#migration56.new-features.variadics)和**参数解包**。

```
$result = array_merge(...$input); 
```

它的速度比`call_user_func_array`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-24T19:58:45.090

array_merge 可以完成这项工作

```
$array_meged = array_merge($a, $b); 
```

**评论后**

如果固定索引，您可以使用：

```
$array_meged = array_merge($a[0], $a[1]); 
```

更通用的解决方案：

```
$array_meged=array();
  foreach($a as $child){
  $array_meged += $child;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-24T19:57:57.870

`$resultArray = array_merge ($array1, $array1);`

```
$result = array();
foreach ($array1 as $subarray) {
    $result = array_merge($result, $subarray);
}

// Here it is done 
```

好读的东西： http: [//ca2.php.net/manual/en/function.array-merge.php](http://ca2.php.net/manual/en/function.array-merge.php)

递归：

[http://ca2.php.net/manual/en/function.array-merge-recursive.php](http://ca2.php.net/manual/en/function.array-merge-recursive.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T19:58:24.030

```
$arr1 = array(0=>1);
$arr2 = array(0=>2);

$merged = array_merge($arr1,$arr2);
print_r($merged); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-24T19:58:00.150

[`array_merge`](http://php.net/manual/en/function.array-merge.php)是你需要的。

```
$arr = array_merge($arr1, $arr2); 
```

编辑：

```
$arr = array_merge($arr1[0], $arr1[1]); 
```

# windows-8 - 安装 Windows 8 SDK 后 DirectX 的东西应该在哪里？

> ID：13544992
> 
> 赞同：0
> 
> 时间：2012-11-24T19:53:59.373
> 
> 标签：windows-8, visual-studio-2012, directx, directx-11, winapi

我安装了 Windows 8 SDK（应该包括 DirectX SDK）。

但是我的 directX 东西不起作用（请参阅这个[问题](https://stackoverflow.com/questions/13544367/cant-find-d3dcompiler-43-dll-for-directx-programming#comment18549503_13544367)）。

但是在一个单独的问题上，我想问一下，在您安装 Windows 8 SDK 之后，所有 DirectX SDK 的东西应该在哪里。

如果答案是“很多地方”，那么让我们使用这个文件：`d3dcompiler_43.dll`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:26:24.160

我在这里找到了答案：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx)

它说：

> 任何使用运行时着色器编译的项目都必须将 D3DCOMPILER_46.DLL 复制到项目的本地可执行路径。此 DLL 位于 Windows SDK 安装的此子目录中，位于 %ProgramFiles(x86)%\Windows Kits\8.0\Redist\D3D\ 下，其中 x86 和 x64。