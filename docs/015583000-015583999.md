# StackOverflow 问答 15583000-15583999

# php - json数组到标准数组

> ID：15583000
> 
> 赞同：1
> 
> 时间：2013-03-23T03:24:51.377
> 
> 标签：php, arrays, json, forms, decode

让我解释一下我的问题，我应该在显示联系表单之前调用 Web 服务，Web 服务的返回是：

```
$items = json_decode('[{"location":[{"building":["Building1"],"name":"Location1"}],"name":"Organization1"},{"location":[{"building":["Building2"],"name":"location2"}],"name":"Organisation2"},{"location":[{"building":["Building3"],"name":"Location3"}],"name":"Organization3"}]'); 
```

在这里，我使用以下代码仅提取了组织、位置和建筑物：

```
foreach( $items as $each ){
    echo $each->location[0]->building[0];
    echo $each->location[0]->name;
    echo $each->name;
} 
```

我想以这种格式获取不同数组中的组织、建筑物和位置的值：

```
("building1", "building2", "building3")
("organisation1", "organisation2", "organisation3")
("location1", "location2", "location3") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:28:06.483

获取您现有的代码并对其进行一点点修改；

```
$buildings = array( );
$organisations = array( );
$locations = array( );
foreach( $items as $each ){
    $buildings[] = $each->location[0]->building[0];
    $organisations[] = $each->location[0]->name;
    $locations[] = $each->name;
} 
```

结果现在位于顶部定义的变量中。`[]`只是告诉它在数组末尾附加一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:29:10.973

这是你如何做到的：

```
$arrays = array();
$arrays['buildings'] = array(); // buildings
$arrays['organisations'] = array();
$arrays['locations'] = array();
foreach( $items as $each ){
    $arrays['buildings'][] = $each->location[0]->building[0];
    $arrays['organisations'][] = $each->location[0]->name;
    $arrays['locations'][] = $each->name;
} 
```

# android - 无法在 Galaxy Stellar 上运行 Android 应用程序

> ID：15583011
> 
> 赞同：1
> 
> 时间：2013-03-23T03:26:26.900
> 
> 标签：android, eclipse

我无法让我的 android 应用程序在 Windows 7 上的 Eclipse 的 Galaxy Stellar 手机 4.12 操作系统上运行。当我插入手机时，它显示它正在安装驱动程序，并且它还在目录窗口中显示手机数据。我将运行配置设置为查找所有可用设备，但无法识别设备并显示“未找到活动的兼容 AVD 或设备”。我知道其他人有这个问题，我已经研究过了，但我仍然无法让我的应用程序在模拟器以外的任何东西上运行。我根据我的 SDK 管理器安装了 Google USB 驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:37:08.010

您是否尝试过使用三星的驱动程序？ [http://www.samsung.com/us/support/owners/product/SCH-I200ZKAVZW](http://www.samsung.com/us/support/owners/product/SCH-I200ZKAVZW)

# angularjs - 如何从angularjs中的选择更新属性

> ID：15583012
> 
> 赞同：0
> 
> 时间：2013-03-23T03:26:28.117
> 
> 标签：angularjs, angularjs-ng-repeat

我正在使用 Angularjs 和 rails 来构建网站。该页面正在管理一个 Foo 对象，而 Foo 有一个名称字段和一个定义字段。

在我的编辑页面中，我正在处理 Foo 对象 1，并且我有一个选择（下拉）控件，其中包含可供选择的现有 Foo 对象的列表（过滤掉当前的 Foo 对象是有意义的）

如果用户从选择中选择了一个现有的 Foo 对象，我不想更改我正在编辑的 Foo 对象，我只希望当前 Foo 对象的定义字段使用来自所选 Foo 对象的定义字段内容进行更新（来自选择框）。

我目前有一个这样定义的选择：（并且 obj 是我正在处理的 Foo 对象）

```
<select id="foo_list{{obj.id}}" ng-model="obj.definition"
      ng-options="d.name for d in existing_foos | orderBy:'name'" 
      ng-change="changeFooDefinition()">
</select> 
```

在 changeFooDefinition() 方法中，我想用所选的 Foo 对象的定义更新当前的 obj.definition。

当前代码所做的是更改整个表单中我正在处理的 Foo 对象。我只想将选定的定义复制到当前的对象定义中。我怎样才能做到这一点？

提前致谢，

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:13:44.467

当前，您将 $scope.obj.definition 绑定到 Foo 对象，而不仅仅是 foo 对象的定义。您需要做的是将选定的 Foo 对象绑定到另一个范围变量，然后设置 obj.definition 等于这个新变量的定义（应该是 Foo 对象）。

HTML：

```
<select id="foo_list{{obj.id}}" ng-model="selectedFoo" 
    ng options="d.name for d in existing_foos | orderBy:'name'" 
    ng-change="changeFooDefinition()">
</select> 
```

JS：

```
myApp.controller('Ctrl', ['$scope, function($scope) {
    $scope.obj = { name: 'currFoo', definition: 'changePls', id: 333 };

    $scope.existing_foos = [ 
        { name: 'foo1', definition: 'first foo', id: 1 },
        { name: 'foo2', definition: '2nd foo', id: 2 },
        {name: 'foo3', definition: '3rd foo', id: 3 }
    ];

    $scope.changeFooDefinition() {
        obj.definition = selectedFoo.definition;
    }
}]); 
```

看到它在这里工作：http: [//jsfiddle.net/ADukg/2120/](http://jsfiddle.net/ADukg/2120/)

如果我误解了你的要求，请告诉我，如果是这样，希望我能相应地修正我的答案。

# c++ - C++11嵌套宏调用？

> ID：15583021
> 
> 赞同：16
> 
> 时间：2013-03-23T03:28:23.937
> 
> 标签：c++, c, c++11, macros

它在 C++ std 16.3.4 中说：

> 重新扫描生成的预处理标记序列 [来自宏调用替换]，以及源文件的所有后续预处理标记，以替换更多宏名称。
> 
> 如果在替换列表的扫描过程中找到被替换的宏的名称（不包括源文件的其余预处理标记），则不会替换它。
> 
> 此外，如果**任何嵌套替换**遇到被替换的宏的名称，它不会被替换。
> 
> 这些未替换的宏名称预处理标记不再可用于进一步替换，即使它们稍后在该宏名称预处理标记将被替换的上下文中进行（重新）检查。

**嵌套宏替换到底是什么？**

具体考虑：

```
#define f(x) 1 x
#define g(x) 2 x

g(f)(g)(3) 
```

我本来期望以下内容：

```
g(f)(g)(3)    <-- first replacement of g, ok
2 f(g)(3)     <-- nested replacement of f, ok
2 1 g(3)      <-- second nested replacement of g, don't replace, stop 
```

然而 gcc 出人意料地进行了 g 的第二次替换，产生：

```
2 1 2 3 
```

有任何想法吗？

**更新：**

经过大量研究，让我用一个更简单的例子来澄清这个问题：

```
#define A(x) B
#define B(x) A(x)

A(i)(j) 
```

这扩展如下：

```
A(i)(j)
B(j)
A(j) 
```

该标准没有规定是否`A(j)`应扩展为`B`。委员会决定以这种方式保留它，因为不期望现实世界的程序依赖于这种行为，因此`A(j)`未扩展和扩展`A(j)`都`B`被认为是一致的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T00:45:11.890

这解释了最初的意图，以及为什么没有在标准中添加关于此主题的说明：

[http://open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#268](http://open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#268)

* * *

> ## 268\. 重新扫描替换文本中的宏名称抑制
> 
> **部分**：16.3.4 [cpp.rescan]     **状态**：打开     **提交者**：Bjarne Stroustrup     **日期**：2001 年 1 月 18 日
> 
> 从标准中不清楚以下示例的结果应该是什么：
> 
> ```
> #define NIL(xxx) xxx
> #define G_0(arg) NIL(G_1)(arg)
> #define G_1(arg) NIL(arg)
> G_0(42) 
> ```
> 
> 标准中的相关文本可在 16.3.4 [cpp.rescan] 第 2 段中找到：
> 
> > [剪断]
> 
> 的展开顺序`G0(42)`如下：
> 
> ```
> G0(42)
> NIL(G_1)(42)
> G_1(42)
> NIL(42) 
> ```
> 
> 问题是`NIL`在该序列的最后一行中的使用是否符合引用文本下的非替换条件。如果是这样，结果将是`NIL(42)`。如果没有，结果将是简单的`42`。
> 
> **本文中 J11 委员会的初衷是结果应该是`42`，正如其作者 Dave Prosser 提供的替换算法的原始伪代码描述所证明的那样。**然而，英文描述省略了伪代码的一些微妙之处，因此可以说对这种情况给出了错误的答案。
> 
> *建议的解决方案（迈克米勒）*：[剪断]
> 
> ### 2004 年 4 月 WG14 会议的笔记（来自 Tom Plum）：
> 
> 早在 1980 年代，几位 WG14 人员就明白，“不可替代”的措辞与产生伪代码的尝试之间存在微小差异。**委员会的决定是，没有任何现实的程序“在野外”会冒险进入这个领域，并且试图减少不确定性是不值得冒改变实现或程序的一致性状态的风险。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:43:32.640

`g(x)` is always replaced by `2 x`. In the second nested replacement of g, you call `g(x)` with `x=3`, so this produces the result `2 3`. My understanding is that the compiler doesn't replace the macro with it's value, in case this produces an infinite loop:

```
#define g( x ) f( x )
#define f( x ) g( x )

g( 1 ) -- > f( 1 ) --> stop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T08:26:26.027

因为它提到“（不包括源文件的其余预处理标记）。” `g`only sees的第一个替换`f`。现在`f`有资格用取自文件其余部分的预处理标记替换，但`f`由`g`. 替换`f(g)`产生 a`g`同样不受递归污染。

嵌套替换是由另一个替换包围的替换，而不是其令牌来自另一个替换的替换。根据后一种定义，一个替换可以有几个互斥的嵌套父母。

# javascript - 如何在文档中嵌入 HTML 元素

> ID：15583024
> 
> 赞同：3
> 
> 时间：2013-03-23T03:29:14.083
> 
> 标签：javascript, html, transclusion

是否可以像在 MediaWiki 中那样将一个 HTML 元素嵌入到文档的多个位置？我想在其他元素中包含元素，而不复制和粘贴它们的内容。我知道可以使用 iframe 将网页嵌入到其他网页中，但是是否有任何可靠的方法可以将 HTML 元素嵌入到同一页面上的其他 HTML 元素中？

```
<p id = "p1">This is paragraph 1\. </p>
<p id = "p2">
    This is paragraph 2.
    </p>
<p id = "p3">This is paragraph 3\. It should contain paragraphs 1 and 2.
    <!-- {{p1}} {{p2}} -->
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:47:36.937

这有点小技巧，但它适用于 Firefox、Chrome 和 Opera。没有在 IE 中测试，这台笔记本电脑上没有它...如果你有机会测试，请告诉我它是否在 IE 中工作。

将其放在文档的`head`,`script`标记中：

```
function transclude(elementId) {
    var clone = document.getElementById(elementId).cloneNode(true),
        placeholder;
    clone.id = null;
    document.write('<br id="__placeholder__">');
    placeholder = document.getElementById('__placeholder__');
    placeholder.parentNode.insertBefore(clone, placeholder);
    placeholder.parentNode.removeChild(placeholder);
    return transclude;
} 
```

要嵌入元素，请使用以下命令：

```
<p id="p1">This is paragraph 1\. </p>
<p id="p2">
    This is paragraph 2.
</p>
<p id="p3">This is paragraph 3\. It should contain paragraphs 1 and 2.
    <script>transclude("p1")("p2")</script>
</p> 
```

笔记：

*   ID 属性已从克隆元素中移除。

*   一旦包含调用的脚本`transclude`运行，元素就会被嵌入，无需等待文档加载。由于使用了`document.write`，因此在加载文档后这将不起作用。

*   我们使用虚拟占位符元素 a`<br>`来防止 的副作用`document.write`，例如在已打开但未终止的a`<p>`之后写入 a 会导致第一个标签过早终止。`<p>`

    换句话说，占位符元素的标签名称应该不同于任何未终止的外部标签的名称，因此是自终止`<br>`标签。

*   嵌入函数返回自身以进行链接。

[http://jsfiddle.net/bcWjE/1](http://jsfiddle.net/bcWjE/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:52:45.200

使用 jQuery：

```
$(document).ready(function(){
  $('#p3').html($('#p1').html()+$('#p2').html())
}); 
```

[提琴手](http://jsfiddle.net/N7wKv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:02:12.077

[使用jQuery 的 .clone() 方法](http://api.jquery.com/clone/)可能更合适，该方法执行 DOM 节点的深层复制，保留诸如绑定方法之类的东西。

`$('.hello').clone().appendTo('.goodbye');`适用于的简单示例（来自文档）

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">Goodbye</div>
</div> 
```

结果是

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">
    Goodbye
    <div class="hello">Hello</div>
  </div>
</div> 
```

# android - SpeechRecognizer CALLING_PACKAGE

> ID：15583026
> 
> 赞同：1
> 
> 时间：2013-03-23T03:29:22.670
> 
> 标签：android

我开发了一个使用 RecognitionService 的应用程序，如何从 RecognizerIntent 或回调中知道 CALLING_PACKAGE `mSpeech.setRecognitionListener(mRecognitionListener); Intent intent = new Intent(); intent.putExtra("partial_result", true); mSpeech.startListening(intent);`

# sql - 在sql中获取查询计数

> ID：15583027
> 
> 赞同：5
> 
> 时间：2013-03-23T03:29:26.160
> 
> 标签：sql, sql-server

我有一个查询如下：

```
SELECT TOP 100 *
FROM   TABLE1 T1
INNER JOIN TABLE2 T2 ON T1.ID = T2.ID
WHERE  T1......... 
```

如何检索查询返回的行数，不包括前 100 行。我想返回 100 条记录以及受影响的记录总数。有没有更简单的方法，而不是在没有 top 关键字并包括计数的情况下再次编写整个查询？例如：

```
SELECT COUNT(1) AS TableCount
FROM   TABLE1 T1
INNER JOIN TABLE2 T2 ON T1.ID = T2.ID
WHERE  T1......... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:44:27.130

使用 COUNT(1) OVER() 您将在 Total_Count 列中获得表中的记录数。

```
SELECT TOP 100 *, COUNT(1) OVER() as 'Total_Count'
FROM   TABLE1 T1
INNER JOIN TABLE2 T2 ON T1.ID = T2.ID
WHERE  T1......... 
```

# elasticsearch - Elasticsearch 中的嵌套文档

> ID：15583032
> 
> 赞同：23
> 
> 时间：2013-03-23T03:29:55.740
> 
> 标签：elasticsearch

我正在编写一个资产管理应用程序。它允许用户通过向资产添加 html 控件（例如文本字段、选择菜单等）来存储任意资产属性。然后，属性的 JSON 表示将成为存储在 couchdb 中的资产 JSON 文档的一部分。资产在 couchdb 中具有以下结构：

```
{
   "_id": "9399fb27448b1e5dfdca0181620418d4",
   "_rev": "12-fa50eae8b50f745f9852e9fab30ef5d9",
   "type": "asset",
   "attributes": [
       {
           "id": "9399fb27448b1e5dfdca01816203d609",
           "type": "text",
           "heading": "Brand",
           "data": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203e68e",
           "type": "userSelectMenu",
           "heading": "Assigned To",
           "data": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203e9c9",
           "type": "categories",
           "heading": "Categories",
           "data": [
               "0d7e6233e5f48b4f55c5376bf00b1be5",
               "0d7e6233e5f48b4f55c5376bf00d94cf"
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816207uy5a",
           "type": "radio",
           "heading": "Radio Buttons",
           "data": [
               {
                   "text": "Button 1",
                   "checked": false
               },
               {
                   "text": "Button 2",
                   "checked": true
               }
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816205tgh6",
           "type": "checkboxes",
           "heading": "Checkboxes",
           "data": [
             {
                 "text": "Box 1",
                 "checked": false
             },
             {
                 "text": "Box 2",
                 "checked": true
             }
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca0181620k81gt",
           "type": "select",
           "heading": "Select Menu",
           "data": [
               {
                   "text": "Option 1",
                   "checked": false
               },
               {
                   "text": "Option 2",
                   "checked": true
               }
           ],
           "requiredBySystem": true
       }
   ]
} 
```

我不确定将属性放入数组是否是允许基于属性值搜索资产的最佳方式。将属性作为属性直接附加到资产会更好吗？我现在正在弹性搜索中进行试验。如果我尝试按原样存储文档，elasticsearch 会返回错误：

“错误”：“MapperParsingException [无法解析 [attributes.data]]；嵌套：ElasticSearchIllegalArgumentException [未知属性 [文本]]；”

我正在使用以下映射：

```
"mappings" : {
    "asset" : {
      "properties" : {
        "_id": {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "_rev": {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "type": {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "attributes": {
          "properties" : {
            "id" : {
              "type" : "string"
            },
            "type" : {
              "type" : "string",
              "index" : "not_analyzed"
            },
            "heading" : {
              "type" : "string"
            },
            "data" : {
              "type" : "string"
            }
          }
        }
      }
    }
  } 
```

不知道我要去哪里错了。谢谢你的帮助！

特洛伊

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-23T12:38:48.750

问题出在文档的结构方式上。 `attribute.data`既是字符串/字符串数组，又是完整的内部对象。ES 不允许更改属性的“类型”。

基本上，你不能有这个：

```
`"data": [
  "0d7e6233e5f48b4f55c5376bf00b1be5",
  "0d7e6233e5f48b4f55c5376bf00d94cf"
],` 
```

`还有这个：`

 ````
 "data":[
  {
    "text":"Button 1",
    "checked":false
  },
  {
    "text":"Button 2",
    "checked":true
  }
], 
```

在同一份文件中。第一个实例`data`告诉 ES “数据是一个字符串数组”。但是第二个实例`data`说“嘿，我是一个对象！”，这就是 ES 抛出错误的原因。

您可以通过显式声明`data`为对象并设置**enabled: false**来回避此问题，但这可能不是您想要的解决方案（因为这只是告诉 ES 存储`data`为文本字段，无需解析。

另一种选择是重组您的数据，或拆分`data`为它的文档（例如父/子映射）`

# sql - 在具有日期或日期时间值的列上使用 PIVOT

> ID：15583033
> 
> 赞同：0
> 
> 时间：2013-03-23T03:30:00.313
> 
> 标签：sql, sql-server, pivot

这是我的 PIVOT 查询：

```
select * from t_interview_data
pivot (avg (widgets) for 
datestamp in ( [2009-11-01],[2009-11-02],[2009-11-03],[2009-11-04],[2009-11-05],[2009-11-06],[2009-          11-07]
,[2009-11-08],[2009-11-09],[2009-11-10],[2009-11-11],[2009-11-12],[2009-11-13],[2009-11-14],[2009-    11-15]
,[2009-11-16],[2009-11-17],[2009-11-18],[2009-11-19],[2009-11-20],[2009-11-21],[2009-11-22],[2009-11-23]
,[2009-11-24],[2009-11-25],[2009-11-26],[2009-11-27],[2009-11-28],[2009-11-29],[2009-11-30],[2009-12-01]
,[2009-12-02])) as AvgWidgetsPerDayPerEmp 
```

我的问题是：虽然这个查询有效，但是否有更简单、更简单、更优雅的方式来编写它？

样本输出：

![](../Images/058512cf6383ff3b7308b5a7ca0ef279.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:44:50.600

您可以构建查询并执行。请检查：

```
DECLARE @startdt DATETIME, @enddt DATETIME, @QueryCol NVARCHAR(MAX)

SET @startdt = '2009-11-01'
SET @enddt = '2009-12-02'

WHILE @startdt <= @enddt
BEGIN
    SET @QueryCol=isnull(@QueryCol, '')+QUOTENAME(convert(nvarchar(20), @startdt, 101))+(CASE WHEN @startdt<>@enddt THEN ',' ELSE '' END)
    SET @startdt =  @startdt + 1
END

if(ISNULL(@QueryCol, '')<>'')
begin
    set @QueryCol='select * from t_interview_data
                    pivot (avg (widgets) for 
                    datestamp in ('+@QueryCol+')) as AvgWidgetsPerDayPerEmp'

    exec (@QueryCol)
end 
```

# scala - 从 Play Framework 2.0.x 迁移到 2.1，如何调度任务？

> ID：15583035
> 
> 赞同：0
> 
> 时间：2013-03-23T03:30:23.473
> 
> 标签：scala, migration, playframework-2.0, akka, schedule

我的问题与此类似：[play framework 2.1 - scheduling async tasks](https://stackoverflow.com/questions/13466047/play-framework-2-1-scheduling-async-tasks)。

但我有点 scala noob，我想知道如何通过 java 代码来完成任务。我在 2.0.x 中的 java 代码是：

```
 Akka.system().scheduler().schedule(
                Duration.Zero(),
                Duration.create(10, TimeUnit.MINUTES),
                arf, "TICK_TICK"
                ); 
```

它在 play 2.0.x 中运行良好，但在 2.1 中，函数 schedule() 需要另一个 arg。我在 Akk API 中搜索过，它是：

```
 Cancellable schedule(scala.concurrent.duration.FiniteDuration initialDelay,
                 scala.concurrent.duration.FiniteDuration interval,
                 ActorRef receiver,
                 java.lang.Object message,
                 scala.concurrent.ExecutionContext executor) 
```

现在，我认为需要添加一个执行器，但我不知道如何填写第五个参数。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T04:33:26.880

您正在寻找的答案可在Play的[此页面中找到！](http://www.playframework.com/documentation/2.1.0/JavaAkka)框架文档。

# javascript - 使用 jQuery 获取元素的父级

> ID：15583037
> 
> 赞同：0
> 
> 时间：2013-03-23T03:31:37.347
> 
> 标签：javascript, jquery, asp.net

我正在学习 jQuery，所以这可能是某种误解。

考虑javascript：

```
var controls = $("#" + val.controltovalidate);
var input = controls[0];
var parent = input.parent();                
var pos = parent.position; 
```

首先，我得到具有特定 ID 的元素列表，因为它在 ASP.NET 中，我知道它只是一个元素，但我使用的是 jQuery，它给了我列表。我还在前面加上“#”以使其正常工作。有更好的办法吗？

其次，我得到实际元素（0 处的数组）`HtmlInput` 第三，我想找到它的容器，我正在做`input.parent()`。此调用为我返回 NULL。为什么？我知道有`P`这个家长`input`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:44:13.720

`$("#" + val.controltovalidate).parent()`如果要查找直接父级并且要查找祖先层次结构中`$("#" + val.controltovalidate).closest('p')`的第一个元素，则应该这样做。`<p>`

每个 jQuery 对象都是一个集合，所以不要担心这个事实并做任何你需要的事情。它只会影响一个 DOM 元素。

对于您的第二个问题：当您通过 jQuery 集合中的索引访问元素时，它将返回您的 DOM 元素。这就是为什么你得到`HTMLInputElement`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:33:58.827

利用`closest();`

```
var parent = $(input).closest('p'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:44:48.327

尝试像这样的最后两行：

```
 var pos = $(input).parent().position(); 
```

# javascript - 在 grunt 插件中，如何获得作为数组的全局和目标特定选项的组合？

> ID：15583038
> 
> 赞同：3
> 
> 时间：2013-03-23T03:31:44.400
> 
> 标签：javascript, node.js, plugins, gruntjs

我正在编写一个 grunt 插件，它具有可以是值数组的选项。这些值具体是文件（与任务本身的 files 属性中指定的文件不同）。我的任务设置如下所示：

```
grunt.initConfig({
    assemble: {
      options: {
        data: ['test/common/data/common1.json', 'test/common/data/common2.json']
      },
      dev: {
        options: {
          data: ['test/dev/data/dev.json']
        },
        files: {
          'test/actual': ['test/files/dev.hbs']
        }
      },
      prod: {
        options: {
          data: ['test/prod/data/prod.json']
        },
        files: {
          'test/actual': ['test/files/prod.hbs']
        }
      },
    }

}); 
```

在我的插件中，我希望能够使用全局选项和目标选项中指定的所有文件的列表来获取数据选项。

对于开发目标`grunt assemble:dev`，我会在`this.options.data`

```
['test/common/data/common1.json',
 'test/common/data/common2.json',
 'test/dev/data/dev.json'] 
```

对于 prod 目标`grunt assemble:prod`，我会在`this.options.data`

```
['test/common/data/common1.json',
 'test/common/data/common2.json',
 'test/prod/data/prod.json'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:31:44.400

我找到了解决这个问题的方法，但我不确定它是否是最佳选择。

在我的插件中，我可以通过该`grunt.config`方法访问全局和目标特定选项。

```
var globalDataFiles = grunt.config(['assemble', 'options', 'data']) || [];
var targetDataFiles = grunt.config(['assemble', this.target, 'options', 'data']) || []; 
```

使用 lodash...`var _ = require('lodash');`

我可以合并数组：

```
var data = _.union(globalDataFiles, targetDataFiles); 
```

我在我的插件中做了更多的事情，但这就是我最初解决这个问题的方式。

请查看[https://github.com/assemble/assemble/blob/master/tasks/assemble.js](https://github.com/assemble/assemble/blob/master/tasks/assemble.js)以查看所有代码。

# java - 不确定该 java/MySQL 数据库程序使用哪个连接池 Api

> ID：15583042
> 
> 赞同：1
> 
> 时间：2013-03-23T03:31:59.107
> 
> 标签：java, mysql, jdbc, connection-pooling

我听说 jbdc 在多线程访问方面存在问题。我还在另一篇文章中听说过 boneCP 推荐，但我想知道是否有其他人使用过另一个他们发现异步内容简单且高性能的

Apache 版本也表示它可能无法在 java 1.6 以上运行，我正在使用 java.runtime.version: 1.7.0_07-b11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:54:10.450

在实践中尝试了其他一些 API 后，我最终选择了 BoneCP。我在 Java 1.7 中使用它，即使在高并发情况下也能很好地工作。此外，开发人员在报告问题时会做出响应。

我以前使用过 C3P0，但在我切换到 BoneCP 后，它有一些非常奇怪的错误消失了。如果您对 C3P0 进行一些挖掘，您会发现它已经好几年没有受到影响，并且刚刚恢复开发。它在我的应用程序中出现了奇怪的问题。

我使用`MysqlConnectionPoolDataSource`来自普通 Mysql JDBC 包的。然后我只是设置如下（您可以根据需要调整设置）：

```
pbds = new BoneCPDataSource();      
pbds.setDatasourceBean(mysqlcpds);
pbds.setMinConnectionsPerPartition(1);              
pbds.setMaxConnectionsPerPartition(10);    
pbds.setIdleConnectionTestPeriodInMinutes(60);
pbds.setIdleMaxAgeInMinutes(240);
pbds.setPartitionCount(1); 
```

然后，您只需`Connection`从该对象中获取 s（它是线程安全的。）我使用来自多个线程的相同代码；Java 7 **try-with-resources**块特别方便，避免了很多样板文件（`finally`不需要并且保证关闭连接）：

```
try( Connection conn = pbds.getConnection() ) { 

    ... do stuff with conn

} catch (SQLException e) {          
    e.printStackTrace();
} 
```

# unix - 使用 awk 删除以某个字符结尾的字段

> ID：15583045
> 
> 赞同：1
> 
> 时间：2013-03-23T03:33:00.693
> 
> 标签：unix, awk

总的来说，我在 unix 上还是个新手，我很难弄清楚如何完成我想做的事情。对于看起来像这样的记录：

```
 Name:Alice,ID:2368, Hometown:columbus,bithday:03/11/1988
Name:Bob,ID:2568,Hometown:New York,bithday:04-24-1985
Name:Ted,ID:2368, Hometown:Portland,bithday:06-11-1992
Name:Mark,        ID:2218, Hometown:Palo Alto,bithday:04-23-1984
Name:Xiao,      ID:2571, hometown:Carson,bithday:07/06/1975
Name:Rain,  ID:0264, hometown:little stone,bithday:11-09-1982
Name:Susuan, ID:1261, Hometown:Menlo park,bithday:12-13-1989
Name:Zack,  ID:1594, Hometown:columbus,bithday:02-04-1984 
```

我想删除任何以冒号结尾的列，同时不带逗号。

所以某行可能看起来像这样：

```
Mark 2218 Palo Alto 04-23-1984 
```

我已经查看了一些使用 awk 的示例，到目前为止，这是我的想法：

```
awk 'BEGIN {FS=":"} ; {for (i=1; i<=NF; i++) 
```

我的思考过程基本上是遍历每一行并说：“如果该字段以冒号结尾，则将其删除并查找以冒号结尾的下一个字段，转到下一行等等。我只是不确定如何要做到这一点，我正在努力，因为到目前为止我看到的所有教程都没有做任何类似的事情。如果有人可以帮助我，我将真诚地感激它！我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:42:06.357

```
$ cat file
Name:Mark,        ID:2218, Hometown:Palo Alto,bithday:04-23-1984

$ awk '{sub(/^[^:]*:/,""); gsub(/,[^:]+:/," ")}1' file
Mark 2218 Palo Alto 04-23-1984

$ sed -e 's/^[^:]*://' -e 's/,[^:][^:]*:/ /g' file
Mark 2218 Palo Alto 04-23-1984 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:11:42.607

awk 字段分隔符可以是正则表达式（无论如何在 GNU awk 中），因此将 FS 设置为逗号或冒号，然后打印所有其他字段：

```
awk -v FS='[,:]' '{for(i=2; i<=NF; i+=2) {printf "%s ", $i}; print ""}' 
```

给定您的样本输入，您将获得：

```
Alice 2368 columbus 03/11/1988 
Bob 2568 New York 04-24-1985 
Ted 2368 Portland 06-11-1992 
Mark 2218 Palo Alto 04-23-1984 
Xiao 2571 Carson 07/06/1975 
Rain 0264 little stone 11-09-1982 
Susuan 1261 Menlo park 12-13-1989 
Zack 1594 columbus 02-04-1984 
```

# javascript - node.js 使用哪种线程模型？

> ID：15583046
> 
> 赞同：-3
> 
> 时间：2013-03-23T03:33:03.310
> 
> 标签：javascript, node.js, linux, multithreading

当新客户端连接到运行 node.js 的服务器时，它是否使用

*   每个进程的连接
*   每个线程的连接
*   每个线程的请求

或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:42:06.033

Node.js 是一个单线程服务器应用程序。

# java - 使用被黑的 cookiemanager 允许 2 个具有不同 cookie 存储的不同 webview 实例

> ID：15583057
> 
> 赞同：2
> 
> 时间：2013-03-23T03:34:51.343
> 
> 标签：java, webview, javafx-2, cookiestore, cookiemanager

所以我的问题是我想在不同的容器（JFrame）中同时使用 2 个 javafx2.2.5 webview 实例。

我发现这个 hack 允许在不同的线程中使用不同的 cookiesstore。 [如何使用 HttpURLConnection 和 Java 中的 CookieManager 为每个连接使用不同的 cookie](https://stackoverflow.com/questions/10967883/how-to-use-different-cookies-for-each-connection-using-httpurlconnection-and-the) 我无法使其工作，似乎 webview 创建了许多线程来加载页面，并且该线程请求默认的 cookie 处理程序，所以我最终得到 20不同的cookiestores（InMemoryStore）。此代码用于在javafx webview中自动登录ebay。

所以我为此使用的所有代码：

```
public class MySessionManager extends CookieHandler{
private final static MySessionManager ms_instance = new MySessionManager();
public static MySessionManager getInstance(){
  return ms_instance;
}

private final static ThreadLocal<CookieStore> ms_cookieJars = new ThreadLocal<CookieStore>() {
    @Override
    protected synchronized CookieStore initialValue() { return new InMemoryStore(); }
};

public void clear()
{
    getCookieStore().removeAll();
}

public CookieStore getCookieStore() {
   return ms_cookieJars.get();      
}    

private CookiePolicy policyCallback;    

public MySessionManager() {
    this(null, null);
}

public MySessionManager(CookieStore store,CookiePolicy cookiePolicy)   {
    // use default cookie policy if not specify one
    policyCallback = (cookiePolicy == null) ? CookiePolicy.ACCEPT_ORIGINAL_SERVER
                                            : cookiePolicy;
    // if not specify CookieStore to use, use default one
}

public void setCookiePolicy(CookiePolicy cookiePolicy) {
    if (cookiePolicy != null) policyCallback = cookiePolicy;
}
public Map<String, List<String>>
    get(URI uri, Map<String, List<String>> requestHeaders)
    throws IOException
{
    // pre-condition check
    if (uri == null || requestHeaders == null) {
        throw new IllegalArgumentException("Argument is null");
    }
    Map<String, List<String>> cookieMap =
                    new java.util.HashMap<String, List<String>>();
    // if there's no default CookieStore, no way for us to get any cookie
    if (getCookieStore() == null)
        return Collections.unmodifiableMap(cookieMap);

    boolean secureLink = "https".equalsIgnoreCase(uri.getScheme());
    List<HttpCookie> cookies = new java.util.ArrayList<HttpCookie>();
    String path = uri.getPath();
    if (path == null || path.isEmpty()) {
        path = "/";
    }
    for (HttpCookie cookie : getCookieStore().get(uri)) {
        // apply path-matches rule (RFC 2965 sec. 3.3.4)
        // and check for the possible "secure" tag (i.e. don't send
        // 'secure' cookies over unsecure links)
        if (pathMatches(path, cookie.getPath()) &&
                (secureLink || !cookie.getSecure())) {
            // Enforce httponly attribute
            if (cookie.isHttpOnly()) {
                String s = uri.getScheme();
                if (!"http".equalsIgnoreCase(s) && !"https".equalsIgnoreCase(s)) {
                    continue;
                }
            }
            // Let's check the authorize port list if it exists
            String ports = cookie.getPortlist();
            if (ports != null && !ports.isEmpty()) {
                int port = uri.getPort();
                if (port == -1) {
                    port = "https".equals(uri.getScheme()) ? 443 : 80;
                }
                if (isInPortList(ports, port)) {
                    cookies.add(cookie);
                }
            } else {
                cookies.add(cookie);
            }
        }
    }        // apply sort rule (RFC 2965 sec. 3.3.4)
    List<String> cookieHeader = sortByPath(cookies);

    cookieMap.put("Cookie", cookieHeader);
    return Collections.unmodifiableMap(cookieMap);
}
public void
    put(URI uri, Map<String, List<String>> responseHeaders)
    throws IOException
{
    // pre-condition check
    if (uri == null || responseHeaders == null) {
        throw new IllegalArgumentException("Argument is null");
    }
    // if there's no default CookieStore, no need to remember any cookie
    if (getCookieStore() == null)
        return;
//PlatformLogger logger = PlatformLogger.getLogger("java.net.MySessionManager");
    for (String headerKey : responseHeaders.keySet()) {
        // RFC 2965 3.2.2, key must be 'Set-Cookie2'
        // we also accept 'Set-Cookie' here for backward compatibility
        if (headerKey == null
            || !(headerKey.equalsIgnoreCase("Set-Cookie2")
                 || headerKey.equalsIgnoreCase("Set-Cookie")
                )
            )
        {
            continue;
        }

        for (String headerValue : responseHeaders.get(headerKey)) {
            try {
                List<HttpCookie> cookies;
                try {
                    cookies = HttpCookie.parse(headerValue);
                } catch (IllegalArgumentException e) {
                    // Bogus header, make an empty list and log the error
                    cookies = java.util.Collections.EMPTY_LIST;
                  /*  if (logger.isLoggable(PlatformLogger.SEVERE)) {
                        logger.severe("Invalid cookie for " + uri + ": " + headerValue);
                    }*/
                }
                for (HttpCookie cookie : cookies) {
                    if (cookie.getPath() == null) {
                        // If no path is specified, then by default
                        // the path is the directory of the page/doc
                        String path = uri.getPath();
                        if (!path.endsWith("/")) {
                            int i = path.lastIndexOf("/");
                            if (i > 0) {
                                path = path.substring(0, i + 1);
                            } else {
                                path = "/";
                            }
                        }
                        cookie.setPath(path);
                    }

                    // As per RFC 2965, section 3.3.1:
                    // Domain  Defaults to the effective request-host.  (Note that because
                    // there is no dot at the beginning of effective request-host,
                    // the default Domain can only domain-match itself.)
                    if (cookie.getDomain() == null) {
                        cookie.setDomain(uri.getHost());
                    }
                    String ports = cookie.getPortlist();
                    if (ports != null) {
                        int port = uri.getPort();
                        if (port == -1) {
                            port = "https".equals(uri.getScheme()) ? 443 : 80;
                        }
                        if (ports.isEmpty()) {
                            // Empty port list means this should be restricted
                            // to the incoming URI port
                            cookie.setPortlist("" + port );
                            if (shouldAcceptInternal(uri, cookie)) {
                                getCookieStore().add(uri, cookie);
                            }
                        } else {
                            // Only store cookies with a port list
                            // IF the URI port is in that list, as per
                            // RFC 2965 section 3.3.2
                            if (isInPortList(ports, port) &&
                                    shouldAcceptInternal(uri, cookie)) {
                                getCookieStore().add(uri, cookie);
                            }
                        }
                    } else {
                        if (shouldAcceptInternal(uri, cookie)) {
                            getCookieStore().add(uri, cookie);
                        }
                    }
                }
            } catch (IllegalArgumentException e) {
                // invalid set-cookie header string
                // no-op
            }
        }
    }
}
/* ---------------- Private operations -------------- */
// to determine whether or not accept this cookie
private boolean shouldAcceptInternal(URI uri, HttpCookie cookie) {
    try {
        return policyCallback.shouldAccept(uri, cookie);
    } catch (Exception ignored) { // pretect against malicious callback
        return false;
    }
}
static private boolean isInPortList(String lst, int port) {
    int i = lst.indexOf(",");
    int val = -1;
    while (i > 0) {
        try {
            val = Integer.parseInt(lst.substring(0, i));
            if (val == port) {
                return true;
            }
        } catch (NumberFormatException numberFormatException) {
        }
        lst = lst.substring(i+1);
        i = lst.indexOf(",");
    }
    if (!lst.isEmpty()) {
        try {
            val = Integer.parseInt(lst);
            if (val == port) {
                return true;
            }
        } catch (NumberFormatException numberFormatException) {
        }
    }
    return false;
}

/*
 * path-matches algorithm, as defined by RFC 2965
 */
private boolean pathMatches(String path, String pathToMatchWith) {
    if (path == pathToMatchWith)
        return true;
    if (path == null || pathToMatchWith == null)
        return false;
    if (path.startsWith(pathToMatchWith))
        return true;

    return false;
}
/*
 * sort cookies with respect to their path: those with more specific Path attributes
 * precede those with less specific, as defined in RFC 2965 sec. 3.3.4
 */
private List<String> sortByPath(List<HttpCookie> cookies) {
    Collections.sort(cookies, new MySessionManager.CookiePathComparator());

    List<String> cookieHeader = new java.util.ArrayList<String>();
    for (HttpCookie cookie : cookies) {
        // Netscape cookie spec and RFC 2965 have different format of Cookie
        // header; RFC 2965 requires a leading $Version="1" string while Netscape
        // does not.
        // The workaround here is to add a $Version="1" string in advance
        if (cookies.indexOf(cookie) == 0 && cookie.getVersion() > 0) {
            cookieHeader.add("$Version=\"1\"");
        }

        cookieHeader.add(cookie.toString());
    }
    return cookieHeader;
}
static class CookiePathComparator implements Comparator<HttpCookie> {
    public int compare(HttpCookie c1, HttpCookie c2) {
        if (c1 == c2) return 0;
        if (c1 == null) return -1;
        if (c2 == null) return 1;

        // path rule only applies to the cookies with same name
        if (!c1.getName().equals(c2.getName())) return 0;

        // those with more specific Path attributes precede those with less specific
        if (c1.getPath().startsWith(c2.getPath()))
            return -1;
        else if (c2.getPath().startsWith(c1.getPath()))
            return 1;
        else
            return 0;
    }
}    
} 
```

CookieStore 实现：

```
 public class InMemoryStore  implements CookieStore {    
private static int count=0;
public int id;
// the in-memory representation of cookies
private List<HttpCookie> cookieJar = null;
// the cookies are indexed by its domain and associated uri (if present)
// CAUTION: when a cookie removed from main data structure (i.e. cookieJar),
//          it won't be cleared in domainIndex & uriIndex. Double-check the
//          presence of cookie when retrieve one form index store.
private Map<String, List<HttpCookie>> domainIndex = null;
private Map<URI, List<HttpCookie>> uriIndex = null;
// use ReentrantLock instead of syncronized for scalability
private ReentrantLock lock = null;
/**
 * The default ctor
 */
public InMemoryStore() {
    cookieJar = new ArrayList<HttpCookie>();
    domainIndex = new HashMap<String, List<HttpCookie>>();
    uriIndex = new HashMap<URI, List<HttpCookie>>();

    lock = new ReentrantLock(false);
    id=count;
    count++;
    System.out.println("New Memory Store "+id);
}
/**
 * Add one cookie into cookie store.
 */
public void add(URI uri, HttpCookie cookie) {
    // pre-condition : argument can't be null
    if (cookie == null) {
        throw new NullPointerException("cookie is null");
    }
    lock.lock();
    try {
        // remove the ole cookie if there has had one
        cookieJar.remove(cookie);
        // add new cookie if it has a non-zero max-age
        if (cookie.getMaxAge() != 0) {
            cookieJar.add(cookie);
            // and add it to domain index
            if (cookie.getDomain() != null) {
                addIndex(domainIndex, cookie.getDomain(), cookie);
            }
            // add it to uri index, too
            addIndex(uriIndex, getEffectiveURI(uri), cookie);
        }
    } finally {
        lock.unlock();
    }
}
/**
 * Get all cookies, which:
 *  1) given uri domain-matches with, or, associated with
 *     given uri when added to the cookie store.
 *  3) not expired.
 * See RFC 2965 sec. 3.3.4 for more detail.
 */
public List<HttpCookie> get(URI uri) {
    // argument can't be null
    if (uri == null) {
        throw new NullPointerException("uri is null");
    }
    List<HttpCookie> cookies = new ArrayList<HttpCookie>();
    boolean secureLink = "https".equalsIgnoreCase(uri.getScheme());
    lock.lock();
    try {
        // check domainIndex first
        getInternal1(cookies, domainIndex, uri.getHost(), secureLink);
        // check uriIndex then
        getInternal2(cookies, uriIndex, getEffectiveURI(uri), secureLink);
    } finally {
        lock.unlock();
    }
    return cookies;
}

/**
 * Get all cookies in cookie store, except those have expired
 */
public List<HttpCookie> getCookies() {
    List<HttpCookie> rt;

    lock.lock();
    try {
        Iterator<HttpCookie> it = cookieJar.iterator();
        while (it.hasNext()) {
            if (it.next().hasExpired()) {
                it.remove();
            }
        }
    } finally {
        rt = Collections.unmodifiableList(cookieJar);
        lock.unlock();
    }
    return rt;
}
/**
 * Get all URIs, which are associated with at least one cookie
 * of this cookie store.
 */
public List<URI> getURIs() {
    List<URI> uris = new ArrayList<URI>();
    lock.lock();
    try {
        Iterator<URI> it = uriIndex.keySet().iterator();
        while (it.hasNext()) {
            URI uri = it.next();
            List<HttpCookie> cookies = uriIndex.get(uri);
            if (cookies == null || cookies.size() == 0) {
                // no cookies list or an empty list associated with
                // this uri entry, delete it
                it.remove();
            }
        }
    } finally {
        uris.addAll(uriIndex.keySet());
        lock.unlock();
    }
    return uris;
}
/**
 * Remove a cookie from store
 */
public boolean remove(URI uri, HttpCookie ck) {
    // argument can't be null
    if (ck == null) {
        throw new NullPointerException("cookie is null");
    }
    boolean modified = false;
    lock.lock();
    try {
        modified = cookieJar.remove(ck);
    } finally {
        lock.unlock();
    }

    return modified;
}
/**
 * Remove all cookies in this cookie store.
 */
public boolean removeAll() {
    lock.lock();
    try {
        cookieJar.clear();
        domainIndex.clear();
        uriIndex.clear();
    } finally {
        lock.unlock();
    }
    return true;
}
/* ---------------- Private operations -------------- */
/*
 * This is almost the same as HttpCookie.domainMatches except for
 * one difference: It won't reject cookies when the 'H' part of the
 * domain contains a dot ('.').
 * I.E.: RFC 2965 section 3.3.2 says that if host is x.y.domain.com
 * and the cookie domain is .domain.com, then it should be rejected.
 * However that's not how the real world works. Browsers don't reject and
 * some sites, like yahoo.com do actually expect these cookies to be
 * passed along.
 * And should be used for 'old' style cookies (aka Netscape type of cookies)
 */
private boolean netscapeDomainMatches(String domain, String host)
{
    if (domain == null || host == null) {
        return false;
    }
    // if there's no embedded dot in domain and domain is not .local
    boolean isLocalDomain = ".local".equalsIgnoreCase(domain);
    int embeddedDotInDomain = domain.indexOf('.');
    if (embeddedDotInDomain == 0) {
        embeddedDotInDomain = domain.indexOf('.', 1);
    }
    if (!isLocalDomain && (embeddedDotInDomain == -1 || embeddedDotInDomain == domain.length() - 1)) {
        return false;
    }
    // if the host name contains no dot and the domain name is .local
    int firstDotInHost = host.indexOf('.');
    if (firstDotInHost == -1 && isLocalDomain) {
        return true;
    }
    int domainLength = domain.length();
    int lengthDiff = host.length() - domainLength;
    if (lengthDiff == 0) {
        // if the host name and the domain name are just string-compare euqal
        return host.equalsIgnoreCase(domain);
    } else if (lengthDiff > 0) {
        // need to check H & D component
        String H = host.substring(0, lengthDiff);
        String D = host.substring(lengthDiff);

        return (D.equalsIgnoreCase(domain));
    } else if (lengthDiff == -1) {
        // if domain is actually .host
        return (domain.charAt(0) == '.' &&
                host.equalsIgnoreCase(domain.substring(1)));
    }
    return false;
}
private void getInternal1(List<HttpCookie> cookies, Map<String, List<HttpCookie>> cookieIndex,
        String host, boolean secureLink) {
    // Use a separate list to handle cookies that need to be removed so
    // that there is no conflict with iterators.
    ArrayList<HttpCookie> toRemove = new ArrayList<HttpCookie>();
    for (Map.Entry<String, List<HttpCookie>> entry : cookieIndex.entrySet()) {
        String domain = entry.getKey();
        List<HttpCookie> lst = entry.getValue();
        for (HttpCookie c : lst) {
            if ((c.getVersion() == 0 && netscapeDomainMatches(domain, host)) ||
                    (c.getVersion() == 1 && HttpCookie.domainMatches(domain, host))) {
                if ((cookieJar.indexOf(c) != -1)) {
                    // the cookie still in main cookie store
                    if (!c.hasExpired()) {
                        // don't add twice and make sure it's the proper
                        // security level
                        if ((secureLink || !c.getSecure()) &&
                                !cookies.contains(c)) {
                            cookies.add(c);
                        }
                    } else {
                        toRemove.add(c);
                    }
                } else {
                    // the cookie has beed removed from main store,
                    // so also remove it from domain indexed store
                    toRemove.add(c);
                }
            }
        }
        // Clear up the cookies that need to be removed
        for (HttpCookie c : toRemove) {
            lst.remove(c);
            cookieJar.remove(c);
        }
        toRemove.clear();
    }
}
// @param cookies           [OUT] contains the found cookies
// @param cookieIndex       the index
// @param comparator        the prediction to decide whether or not
//                          a cookie in index should be returned
private <T> void getInternal2(List<HttpCookie> cookies,
                            Map<T, List<HttpCookie>> cookieIndex,
                            Comparable<T> comparator, boolean secureLink)
{
    for (T index : cookieIndex.keySet()) {
        if (comparator.compareTo(index) == 0) {
            List<HttpCookie> indexedCookies = cookieIndex.get(index);
            // check the list of cookies associated with this domain
            if (indexedCookies != null) {
                Iterator<HttpCookie> it = indexedCookies.iterator();
                while (it.hasNext()) {
                    HttpCookie ck = it.next();
                    if (cookieJar.indexOf(ck) != -1) {
                        // the cookie still in main cookie store
                        if (!ck.hasExpired()) {
                            // don't add twice
                            if ((secureLink || !ck.getSecure()) &&
                                    !cookies.contains(ck))
                                cookies.add(ck);
                        } else {
                            it.remove();
                            cookieJar.remove(ck);
                        }
                    } else {
                        // the cookie has beed removed from main store,
                        // so also remove it from domain indexed store
                        it.remove();
                    }
                }
            } // end of indexedCookies != null
        } // end of comparator.compareTo(index) == 0
    } // end of cookieIndex iteration
}
// add 'cookie' indexed by 'index' into 'indexStore'
private <T> void addIndex(Map<T, List<HttpCookie>> indexStore,
                          T index,
                          HttpCookie cookie)
{
    if (index != null) {
        List<HttpCookie> cookies = indexStore.get(index);
        if (cookies != null) {
            // there may already have the same cookie, so remove it first
            cookies.remove(cookie);
            cookies.add(cookie);
        } else {
            cookies = new ArrayList<HttpCookie>();
            cookies.add(cookie);
            indexStore.put(index, cookies);
        }
    }
}
//
// for cookie purpose, the effective uri should only be http://host
// the path will be taken into account when path-match algorithm applied
//
private URI getEffectiveURI(URI uri) {
    URI effectiveURI = null;
    try {
        effectiveURI = new URI("http",
                               uri.getHost(),
                               null,  // path component
                               null,  // query component
                               null   // fragment component
                              );
    } catch (URISyntaxException ignored) {
        effectiveURI = uri;
    }
    return effectiveURI;
}
} 
```

测试浏览器：

```
public class TestBrowsers extends javax.swing.JFrame { 
private static final String ebaySignInUrl="https://signin.ebay.co.uk/ws/eBayISAPI.dll?SignIn";      
private JFXPanel fxPanel;
private WebEngine webEngine;          
private String username;
private String pass;    
private boolean loginPage =false;  
public TestBrowsers(String username,String pass) {
    initComponents();
    System.out.println("Threads "+Thread.activeCount());
    System.out.println("Thread "+Thread.currentThread().toString());       
    this.username=username;
    this.pass=pass;      
    initComponents();       
    fxPanel = new JFXPanel();         
    Platform.runLater(new Runnable() {           
        @Override
        public void run() {
            initFxComponents();            
        }
   });             
   this.setSize(850, 650);
}    
  private void initFxComponents(){
      // This method is invoked on the JavaFX thread
      createScene();            
}

private void createScene(){        
    final StackPane root = new StackPane();
    CookieHandler.setDefault(MySessionManager.getInstance());
    final WebView browser = new WebView();   
    System.out.println("Thread count:: "+Thread.activeCount());        
    webEngine = browser.getEngine();    
    webEngine.load(ebaySignInUrl);
    final Scene scene = new Scene(root, 500, 400);
   // System.out.println("Browser loading..");
    //make visible
    setScene(scene);
    root.getChildren().add(browser);
    webEngine.getLoadWorker().stateProperty().addListener(new ChangeListener() {

        @Override
        public void changed(ObservableValue ov, Object t, Object t1) {
            setTitle(webEngine.getLocation());
            Worker.State state = (Worker.State)t1;
            if(state==Worker.State.SUCCEEDED){                
                 if(!loginPage){
                     System.out.println("Login in.. "+webEngine.getLocation());                 
                         Document doc = webEngine.getDocument();
                         Element u = (Element) doc.getElementById("userid");
                         u.setAttribute("value", username);
                         Element p = (Element)doc.getElementById("pass");
                         p.setAttribute("value", pass);

                  try{
                     webEngine.executeScript("document.getElementById('sgnBt').click()");
                   loginPage=true;
                   //show threads
                      System.out.println(Thread.currentThread().getName());
                      System.out.println(Thread.currentThread().getId());
                      }catch(Exception ex){
                          ex.printStackTrace();                          
                     }                   
                 }

            }
        } 
     });

}   

private void setScene(Scene scene){
    System.out.println("Displaying..");  
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.fill=GridBagConstraints.BOTH;
    gbc.weightx=1.0;
    gbc.weighty=1.0;      
    fxPanel.setScene(scene);       
    this.add(fxPanel,gbc);
    this.revalidate();
    this.setTitle(webEngine.getLocation());    
}   
 private void initComponents() {
    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    getContentPane().setLayout(new java.awt.GridBagLayout());        pack();
} 
public static void main(String args[]) {     
   java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {              
            new TestBrowsers("username","password").setVisible(true);             
        }
    });
}

} 
```

# magento - Magento jQuery 灯箱从更多视图中调用所有拇指

> ID：15583059
> 
> 赞同：0
> 
> 时间：2013-03-23T03:35:26.923
> 
> 标签：magento, lightbox

目前我正在使用来自 MagePsycho jquery 灯箱的扩展。此扩展程序在前端调用所有缩略图并显示为“更多视图”缩略图，我想限制它们。media.phtml 中的代码是：

```
`<div class="more-views">
<h2><?php echo $helper->getConfig('more_views_label') ?></h2>
<ul>
<?php foreach ($this->getGalleryImages() as $_image):
        if(empty($popUpImageSize[0]) || empty($popUpImageSize[0])):
            $popUpImage = $this->helper('catalog/image')->init($this->getProduct(),           'image', $_image->getFile());
        else:
            $popUpImage = $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile())->resize($popUpImageSize[0], $popUpImageSize[1]);
        endif;
?>
    <li>
        <a href="<?php echo $popUpImage; ?>" rel="<?php echo $rel; ?>" class="<?php echo  $class; ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>"><img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize($thumbnailSize[0], $thumbnailSize[1]); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /></a>
    </li>
<?php endforeach; ?>
</ul> 
```

`

并附上描述问题的图像。谢谢![在此处输入图像描述](../Images/59a6c7b029b9d991e9a7e86b55da3bf0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:35:58.450

看起来您已经拥有所需的所有信息。

你有一个循环遍历每个图像

```
<?php foreach ($this->getGalleryImages() as $_image):
    //output thumbnail code snipped
<?php endforeach; ?> 
```

而不是循环每个项目，您只想循环四次。有很多不同的方法可以实现这一目标。这是使用哨兵值的一个

```
<?php $c = 0; ?> //define a counter
<?php foreach ($this->getGalleryImages() as $_image):
    //output thumbnail code snipped
    <?php if($c > 3) { break; } ?> //break if we've looped four times 
    <?php $c++?>                   //increment the counter
<?php endforeach; ?> 
```

# c# - c# 用函数调用中指定的对象填充列表

> ID：15583064
> 
> 赞同：1
> 
> 时间：2013-03-23T03:37:03.583
> 
> 标签：c#

我有一个从我的数据库加载数据的类。在这个类中，我有一个函数，它实际加载数据并将其以 DataTable 的形式返回给调用函数。

然后我遍历 DataTable 并根据每一行创建各种类的对象。

我想做的是改变流程，这样我就可以调用加载数据的函数，它可以确定应该创建的对象的类型。这里有 2 个伪调用来显示我想要进行的调用类型：

```
List<Teacher> =this.loadData(String sql, Hashtable data, {teachers class});
List<Student> = this.loadData(String sql, Hashtable data, {students class}); 
```

现在，教师和学生类不扩展公共类。但是，如果它有帮助，我可以做出这样的改变。

李

更新：

感谢到目前为止所有给出答案的人。似乎没有一个解决方案能真正改进我拥有或超出我的编程技能的代码。

我确实找到了这篇文章：[Create an instance of a class from a string](https://stackoverflow.com/questions/223952/c-sharp-create-an-instance-of-a-class-from-a-string)

在那里有人提到了以下从字符串创建类的技术： System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(string className)

但是，他们还说必须将生成的对象转换为实际的类。所以这让我想知道我是否将生成的类（在转换之前）放入一个列表中，这样做会自动转换对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:54:30.423

如果没有，请尝试将检索数据库数据的代码包装到一个类中。然后添加两个方法来返回特定类型的对象。

```
public class MyDataProvider
{
    bool isDataLoaded = false;

    public void LoadData(String sql, Hashtable data)
    {
        // Load data.
        isDataLoaded = true; // Or whatever mechanism you want to use to ensure data is loaded.
    }

    public IEnumerable<Student> GetStudents()
    {
        // Process student data if isDataLoaded.    
    }

    public IEnumerable<Teacher> GetTeachers()
    {
        // Process teacher data if isDataLoaded.
    }
} 
```

然后按照您的描述使用您的列表。

```
MyDataProvider dp = new MyDataProvider("abc", data);

List<Student> students = new List<Student>();
students.AddRange(dp.GetStudents());

List<Teacher> teachers = new List<Teacher>();
teachers.AddRange(dp.GetTeachers()); 
```

当然这只是一种方法，但我认为它会让事情比你描述的更干净。您也可以使用泛型，但您需要为学生和教师提供一个通用接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T04:05:43.457

Not that I'd recommend it, but to strictly answer the question, you could do the following:

```
public List<T> loadData<T>(String sql, Hashtable data)
{
    var type = typeof(T);

    if (type == typeof(Teacher))
    {
        // replace with code that builds Teacher list...
        return List<Teacher>() as List<T>;
    }
    else if (type == typeof(Student))
    {
        // replace with code that builds Student list...
        return List<Student>() as List<T>;
    }
    else
    {
        throw new NotImplementedException();
    }
} 
```

To call it, do the following:

```
var teachers = loadData<Teacher>(sqlString, dataTable);
var students = loadData<Student>(sqlString, dataTable); 
```

Of course, this approach has maintenance issues as the number of types grow. There may be other approaches, but the one suggested by @Inisheer is a solid one.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:47:27.533

您可以使用枚举来枚举您的类并将这种类型的变量传递给您的函数。但是我认为使用一个函数来加载所有列表并不是一个好主意，因为如果要加载许多类，最终会得到混乱的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T03:57:50.160

听起来您想编写一个简单的[ORM（对象关系映射）](http://en.wikipedia.org/wiki/Object-relational_mapping)组件。我不会自己实现它，而是研究[Microsoft 的 Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)或[NHibernate](http://nhforge.org/)。这些将从数据库加载和保存对象，并根据需要对序列化进行尽可能多的细粒度控制。

但是，专注于您遇到的问题，我建议将数据加载拆分到每个对象的单独类中，有效地[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。这样，当您的产品添加或删除类时，您不会将更改集中在单个类上。存储库类可以共享一个公共基类以避免代码重复。

# java - 使用java激活一个html按钮

> ID：15583066
> 
> 赞同：0
> 
> 时间：2013-03-23T03:37:38.497
> 
> 标签：java, oop, web

java中有没有办法“单击”特定url的html按钮？我不想通过设计 GUI 或打开浏览器，我只想编写一个程序来“单击”按钮，就像用户在特定网站的 Web 浏览器中那样。java程序可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:48:55.250

如果我理解正确....您想以编程方式模拟与浏览器的交互。用java是可行的。您只需要打开一个到您想要访问的页面 url 的 http 连接，并设置好预期的表单参数。由于它是一种形式，因此可以更轻松、更简洁地处理发布请求。

如果您不想使用低级 java api，可以使用此[库。](http://hc.apache.org/httpclient-3.x/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T03:56:48.043

[HtmlUnit](http://htmlunit.sourceforge.net/)是一个提供此类功能的出色库，仅其项目页面就使用了与您的问题完全匹配的描述：

> HtmlUnit 是“Java 程序的无 GUI 浏览器”。它对 HTML 文档进行建模并提供一个 API，允许您调用页面、填写表单、单击链接等……就像您在“普通”浏览器中所做的一样。
> 
> 它专门是一种模拟浏览器以进行测试的方法...

它甚至支持 JavaScript。如果这是您项目的要求，那么 HtmlUnit 值得研究。

# c++ - 在 C++ 中为 char* 分配内存时遇到问题

> ID：15583068
> 
> 赞同：1
> 
> 时间：2013-03-23T03:38:17.203
> 
> 标签：c++, memory-management

因此，我在为传递给我的 shape 类的构造函数的 char* 分配内存时遇到问题，我不断收到错误消息“malloc：***对象 0x1001000e0 的错误：未分配指针被释放”。我做了很多谷歌搜索，我找到了答案，但它们没有意义，我不明白出了什么问题。shapeName 是 shape 的受保护 char* 成员。方形是形状的孩子。如果有人能解释什么是错误的，将不胜感激，谢谢。

我的构造函数：

```
Shape::Shape(Point* origin,char* name) {
   this->origin = origin;
   this->shapeName = (char*) new char(strlen(name)+1);
   strcpy(shapeName, name);
} 
```

我的析构函数：

```
Shape::~Shape() {
   delete shapeName;
   delete origin;
} 
```

Square的构造函数：

```
Square::Square(Point* origin, char* squareName, double side) 
: Shape(origin, squareName){
   side_a = side;
} 
```

我的电话：

```
Square s(new Point(5,7),"Square - S", 12);
s.display();

cout << "The area of " << s.getName() << " is: " << s.area() << endl;
cout << "The perimeter of " << s.getName() << " is: " << s.perimeter(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T03:42:29.027

这是你的问题：

```
this->shapeName = (char*) new char(strlen(name)+1); 
```

您正在制作一个字符，并将其值设置为 strlen(name)+1。然后 strcpy() 超出（单字节）分配的末尾，并且尝试操作的堆结构“删除”被破坏。

这就是您想要的（不同的括号）：

```
this->shapeName = new char[strlen(name)+1]; 
```

此外，如果您想正确，则必须使用一个特殊的“数组删除”：

```
delete[] shapeName; 
```

# c - strtok 的段错误

> ID：15583069
> 
> 赞同：0
> 
> 时间：2013-03-23T03:38:18.133
> 
> 标签：c, linux, segmentation-fault, strtok

嘿伙计们，我遇到了 strtok 的段错误，只需要一点帮助！

```
char s[1024];
char *token[2];
while(fgets(s, sizeof(s), fp) != NULL) // Read line from file fp until end
{
    token[0] = strtok(s, "\t\n");
    token[1] = strtok(NULL, "\t\n");
    token[2] = strtok(NULL, "\t\n");
    printf("%d:%s:%d", atoi(token[0]), token[1], atoi(token[2]));
} 
```

但是在循环的第一次逾越节后我得到了一个段错误。输入文件内容如下：

```
102910319    code    mark
.
.
.
104981851    code    mark 
```

但是 while 循环仅正确打印第一行并在第二行上显示段错误。

任何想法为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:45:22.163

数组索引问题。

您应该如下声明指针数组，

```
char *token[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:56:43.157

正如杰克所说，令牌被声明为存储两个`char *`s:`token[0]`和`token[1]`。`token[2]`超出范围。解决方案是更改您的令牌声明：`char *token[3];`。

此外，可能是您在某处提供了少于三个“单词”的输入，其中`%s`将告诉 printf 打印由空指针指向的字符串，或者第二次`atoi`调用将尝试取消引用空指针。`token[1]`解决方案是在将其传递给 printf 之前进行检查，然后再将其`token[2]`传递给`atoi`：`printf("%d:%s:%d", atoi(token[0]), token[1] ? token[1] : "null", token[2] ? atoi(token[2]) : 0);`

或者，看起来 scanf 可能更适合这个：

```
int x, y;
char str[1024];
while (scanf("%d %1023s %d", &x, str, &y) == 3) {
    printf("%d:%s:%d\n", x, str, y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:02:32.377

你来做

```
char *token[2] 
```

它只能分配两个字符指针而不是三个。

# html - 为什么要添加 CSS 属性 display:table？

> ID：15583071
> 
> 赞同：4
> 
> 时间：2013-03-23T03:38:26.210
> 
> 标签：html, css

任何人都可以向 css/html 学习者解释为什么我会`<div>`使用 display:table 而不是简单地使用 HTML table 标记来设置通用 html 元素（例如）的样式吗？在我看来，后者是可以选择的，因为它是专门为呈现表格数据而实施的，但我知道没有充分的理由就不会出现前者。我只是无法找到一个体面的解释。我通常相当可靠的朋友，谷歌在这方面无法为我提供太多帮助。

先感谢您！尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:41:22.830

`display:table`,`display:table-row`并被添加为分别用作,和`display:table-cell`的默认`display`属性。`<table>``<tr>``<td>`

在它们的默认值之外，它们通常用于诸如[垂直居中文本](https://stackoverflow.com/questions/4005309/div-table-cell-vertical-align-not-working)或[伪元素 clearfixing 之类](http://nicolasgallagher.com/micro-clearfix-hack/)的 hack 。除非您需要其中一种技巧，否则基本上不要这样做，尤其是如果您想实现一个表，则不要这样做，因为它在语义上不正确，会导致可访问性问题。

警告一句，[使用 display:table 在某些屏幕阅读器中具有语义效果](http://www.456bereastreet.com/archive/201110/using_displaytable_has_semantic_effects_in_some_screen_readers/)。这可能会导致您网站中的某个部分对使用辅助技术的用户具有多种含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:46:31.587

不使用 HTML 表格而是构建 CSS 表格的原因有很多。但首先，请查看您网站的统计信息以及您需要支持的浏览器。您可能需要支持使用不支持 display:table 的旧浏览器的访问者 - 例如 IE7 [http://caniuse.com/#search=display%3Atable](http://caniuse.com/#search=display%3Atable)

使用 CSS 表格的一个原因是将格式与内容分开。如果您想在以后将数据操作到另一个结构中，则必须替换所有表格代码，而不仅仅是调整 CSS。

另一个原因是使表格数据具有响应性。如果它是 div 比它是一个 HTML 表格，你可以对数据有更多的控制。您可以选择将内容重新包装为列表，或者隐藏、显示、滚动、截断...您认为合适的内容。虽然 HTML 表格仍然可以实现其中的一些，但并非全部都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T06:44:28.323

有几个原因，包括以下几点：

1.  使使用表格布局设置 XML 文档的样式成为可能。CSS 不仅仅适用于 HTML。
2.  `table`以CSS 术语记录 HTML 元素的默认呈现。
3.  使使用例如`div`元素标记的数据可以使用（简单）表格布局。

# android - 由片段事务竞争条件导致的容器中的Android重复视图？

> ID：15583074
> 
> 赞同：3
> 
> 时间：2013-03-23T03:38:49.257
> 
> 标签：android, race-condition, fragmenttransaction

我在这里有一个简单的程序。当您点击“+”时，它会在列表中添加一个新数字。该列表在屏幕上表示为`LinearLayout`包含每个数字标记的按钮。每次按“+”时，我都会清除`LinearLayout`，然后将每个按钮添加到片段事务并提交。

所以如果你在程序启动后按“+”3次，它通常看起来像这样：

![没有损坏](../Images/88ef40416fa039ac93671e42b205746d.png)

问题是有时似乎下一个片段事务与前一个事务同时运行。如果你按“+”太快，你会得到一个数字的多个按钮。这是它的样子：

![破碎的](../Images/6bc2ca61a6f7d64725ce438d0d7d63d6.png)

这是我的代码的主要部分：

```
package com.example.kore.ui;

import java.util.LinkedList;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import com.example.kore.R;

public class CodeEditor extends Fragment {
  private LinearLayout fields;
  private final LinkedList<String> list = new LinkedList<String>();
  private int x;
  private boolean sleep;
  private int inits;

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.code_editor, container, false);
    fields = (LinearLayout) v.findViewById(R.id.layout_fields);
    ((Button) v.findViewById(R.id.button_clear))
        .setOnClickListener(new OnClickListener() {
          @Override
          public void onClick(View v) {
            list.clear();
            init();
          }
        });
    ((Button) v.findViewById(R.id.button_new_field))
        .setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {
            list.add("" + x++);
            init();
          }
        });
    init();
    sleep = true;
    return v;
  }

  private void init() {
    String prefix = "" + inits++;
    fields.removeAllViews();
    FragmentTransaction fragmentTransaction =
        getFragmentManager().beginTransaction();
    for (String s : list) {
      Field f = new Field();
      Bundle b = new Bundle();
      b.putString("X", prefix + " - " + s);
      f.setArguments(b);
      fragmentTransaction.add(R.id.layout_fields, f);
    }
    Log.d("WTF", prefix + " zzzz..");
    if (sleep) {
      try {
        Thread.sleep(2000);
      } catch (InterruptedException e) {
        throw new RuntimeException(e);
      }
    }
    sleep = !sleep;
    fragmentTransaction.commit();

  }

} 
```

我把这个 sleep 每隔一秒`init`调用一次，它让它更容易重现。

`Field`只是一个带有按钮的片段。主要活动只是启动`CodeEditor`片段。

我刚开始编写android。也许有一些我不明白的基础知识。也许事务意味着某种并发，尽管据我所知，任何地方都不应该有并发。这种类似比赛条件的行为怎么会发生？我究竟做错了什么？我将按钮包裹在片段中，这些片段被添加到`CodeEditor`片段中，因为我的真实程序更复杂（这是一个精简的示例），所以嵌套片段有点意义。

完整的代码在[这里](https://github.com/andrew-miller/kore/tree/fragment_transaction_race_condition)。

# ios - Scrollview 如何与 Autolayout 一起工作，为什么设置底部垂直空间约束使其工作？

> ID：15583077
> 
> 赞同：11
> 
> 时间：2013-03-23T03:39:05.220
> 
> 标签：ios, xcode, uiscrollview, autolayout

我试图了解 UIScrollView 在自动布局环境中的工作原理。到目前为止，我已经尝试阅读 Apple 文档、Stack Overflow 研究、Google 研究，并研究了 Matt Neuberg 的工作示例。

Apple 6.1 文档说：

> UIScrollView 对象（或者简单地说，滚动视图）的核心概念是它是一个视图，其原点可在内容视图上调整。它将内容剪辑到其框架中，通常（但不一定）与应用程序主窗口的内容一致。滚动视图跟踪手指的移动并相应地调整原点。“通过”滚动视图显示其内容的视图根据新原点绘制自身的该部分，该原点固定到内容视图中的偏移量。除了显示垂直和水平滚动指示器外，滚动视图本身不绘图。滚动视图必须知道内容视图的大小，以便知道何时停止滚动；默认情况下，当滚动超出内容范围时，它会“弹回”。

基于此，让我们来看看应该如何设置约束。

为了更容易讨论，假设我们有 3 个视图作为一般情况 - 默认的主视图控制器视图 (A)，它的子视图是 UIScrollview (B)，而 UIScrollview 有一个子视图，它是 UIView (C ）。假设我们希望 (C) 高 1000 个单位。

所以我们进入界面构建器，在故事板中选择视图控制器，然后在属性检查器选项卡上将大小更改为自由格式。对于视图 (A)、(B) 和 (C)，我们在尺寸检查器选项卡上将高度更改为 1000。

**(A) 和主窗口之间的约束**

是时候设置约束了。该文档明确指出“（滚动视图）将内容剪辑到其框架中，通常（...）与应用程序主窗口的内容一致”。在我们的示例中，(A) 将与应用程序主窗口重合，并且对此不需要任何约束。

**(A) 和 (B) 之间的约束**

现在文档清楚地表明 (B) 与 (A) 完全一致，因此我们将在它们之间设置 4 个约束，前导空格、尾随空格、顶部空间和底部空间以超级查看所有常量为 0。

**(B) 和 (C) 之间的约束**

文档在这里不是那么简单。它说（B）的原点可以在（C）上调整，所以（B）肯定应该小于（C）。由于我们知道滚动只会上下滚动，因此我们可以将 (B) 和 (C) 之间的左右边缘限制为零，并且我们始终希望它位于中间，因此我们将添加一个中心x 对齐。我们将在它们之间添加 3 个约束，前导空格和尾随空格以常量 0 和中心 x 对齐到超级视图。为了定位视图，我们需要顶部和底部的东西，老实说，我不确定应该如何根据文档设置这些约束。基于模仿马特纽伯格的[例子](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch20p573scrollViewAutoLayout2)我让它们的顶部空间以常数为零进行超级视图，底部空间以默认情况下生成的任何常数进行超级视图。这个到superview约束的底部空间是特殊的（显然），从现在开始它应该被称为“specialConstraint”。

所以呢？！我们从说 (B) 绝对应该小于 (C) 开始这一段，并通过设置约束以使它们的大小完全相同来结束它。*问题 1 - 为什么会这样？*

**(C) 本身的约束**

我们知道 (C) 必须大于 (B) 以便 (B) 有东西可以滚动，并且 (C) 应该根据自己的约束来确定它的大小。很简单，我们设置了 1 个约束，高度 = 1000。

**特殊约束**

现在我们在视图控制器中为 specialConstraint 创建一个 outlet，并在 viewDidLoad 方法中设置 self.specialConstraint.constant = 0; 这意味着内容视图的底部应该完全固定在滚动视图的底部，这样您就不会向下滚动。但这在 Matt Neuberg 的例子中是有效的。*问题 2 - 为什么会这样？*

**当 Scrollview 滚动时真正发生了什么**

我认为合乎逻辑的做法是固定滚动视图的框架，并且内容视图的原点（或内容偏移量）随着滚动而移动，并且内容像窗口一样显示滚动视图。类似于通过滑动纸张通过墙上的孔查看纸张。

但是，根据我的阅读，滚动视图的框架实际上是在移动，就像固定页面上的放大镜一样。

*问题 3 - 有人可以解释一下滚动视图滚动时发生了什么，哪个对象的框架原点实际上正在改变，为什么会这样？*

*问题 4 - 谁能用简单的英语解释如何在 (A)、(B) 和 (C) 之间设置约束？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T13:36:35.460

## Working example

Hi. At first, here is working code scroll view example writed couple of days ago.

```
[self addSubview:scrollView];

id views = NSDictionaryOfVariableBindings(scrollView);
[self addConstraints:PVVFL(@"H:|[scrollView]|").withViews(views).asArray];
[self addConstraints:PVVFL(@"V:|[scrollView]|").withViews(views).asArray]; 
```

Constraints writed in code and with help of [Parus](https://github.com/DAlOG/Parus) lib.

As you can mention, scroll view is tied to it's superview. In another words, it fill it completely.

Couple of lines earlier i setup an `scrollView` tree.

```
id views = NSDictionaryOfVariableBindings(photoView, storeNameLabel, selectStoreButton, tagsLabel, tagsContainer, editTagsButton, commentView, sendButton, cancelButton);
[scrollView addConstraints:PVVFL(@"V:|-15-[photoView(150)]").withViews(views).asArray];
[scrollView addConstraints:PVVFL(@"|-15-[photoView]-15-|").withViews(views).asArray];
[scrollView addConstraint:PVCenterXOf(photoView).equalTo.centerXOf(scrollView).asConstraint];

[scrollView addConstraint:PVTopOf(storeNameLabel).equalTo.bottomOf(photoView).plus(20).asConstraint];
[scrollView addConstraints:
 PVVFL(@"|-15-[storeNameLabel]-(>=15)-[selectStoreButton]-15-|")
 .alignAllBaseline.withViews(views).asArray];
[selectStoreButton setContentCompressionResistancePriority:UILayoutPriorityRequired
                                                   forAxis:UILayoutConstraintAxisHorizontal];

[scrollView addConstraints:
 PVVFL(@"V:[storeNameLabel]-15-[tagsLabel][tagsContainer]").alignAllLeft.withViews(views).asArray];
[scrollView addConstraint:PVRightOf(tagsContainer).equalTo.rightOf(selectStoreButton).asConstraint];
[scrollView addConstraint:PVTopOf(editTagsButton).equalTo.bottomOf(tagsContainer).plus(10).asConstraint];
[scrollView addConstraint:PVWidthOf(editTagsButton).equalTo.widthOf(tagsContainer).asConstraint];
[scrollView addConstraint:PVLeftOf(editTagsButton).equalTo.leftOf(tagsContainer).asConstraint];

[scrollView addConstraint:PVTopOf(commentView).equalTo.bottomOf(editTagsButton).plus(10).asConstraint];
[scrollView addConstraint:PVWidthOf(commentView).equalTo.widthOf(editTagsButton).asConstraint];
[scrollView addConstraint:PVLeftOf(commentView).equalTo.leftOf(editTagsButton).asConstraint];
[scrollView addConstraint:PVHeightOf(commentView).moreThan.constant(100).asConstraint];
[scrollView addConstraint:PVLeftOf(cancelButton).equalTo.leftOf(commentView).asConstraint];
[scrollView addConstraints:PVVFL(@"[cancelButton]-(>=15)-[sendButton(==cancelButton)]").alignAllBaseline.withViews(views).asArray];
[scrollView addConstraint:PVRightOf(sendButton).equalTo.rightOf(commentView).asConstraint];
[scrollView addConstraints:PVVFL(@"V:[commentView]-10-[cancelButton]-10-|").withViews(views).asArray]; 
```

How you can see, this is pretty complicated layout. But key points of it: Internal views have fixed heights, provided by theirs intrinsic content sizes. Combined all together they tried to increase height of `scrollView`. **But `scrollView` height is fixed by `self.view`**!!! Constraint solver must generate error. But,

## Theory

Apple has special [Tech note](https://developer.apple.com/library/ios/technotes/tn2154/_index.html) for this case. And there is some interesting moment:

> To make this work with Auto Layout, the top, left, bottom, and right edges within a scroll view now mean the **edges of its content view**.

Also this note provide some examples of different approaches when working with scroll views and auto-layouts.

Now i will try to answer your questions.

## Answers

> *Question 1 - Why is this?*

As you can read above, this is because auto-layout for scroll view setup content view sizes and not frame sizes.

> *Question 2 - why is this?*

Again, thing is in content size. *Special constraint* approach looks like hack over interface builder. At xib you have normal size view, and after nib-file instantiating you just back things to normal, fixing this constraint to 0, which mean that **content size** of scroll view will be equal to C view.

> *Question 3 - Can someone please explain what's happening when a scrollview scrolls, which object's frame origin is actually changing, and why is it done this way?*

Great explanation of this process you can find at this article: [Understanding Scroll Views](http://www.objc.io/issue-3/scroll-view.html), but short answer is: *UIScroll view perform scrolling by changing `self.bounds.origin` point.*

> *Question 4 - Can anyone explain how the constraints should be set between (A), (B), and (C) in plain English?*

You should set constraints inside the scroll view by fixing all edges to internal view. In another words, all edges of scroll view must be fixed twice: By internal views and by superview.

If answer on this question are not clear yet, you can read this answer from very beginning.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T18:03:05.687

我发现了很多如何做到这一点的例子，但没有一个解释如何在运行时设置 contensize。所以用一个按钮。

实际上，这一切都归结为您的滚动视图内容和滚动视图之间的关系。

现在，您无需代码即可在情节提要中进行滚动视图滚动和调整大小。只有你必须做对。

要使用按钮（在运行时）调整 contensize，您需要调整内容的约束。

这很难理解。我已将代码放在 github [http://goo.gl/qrXANp](http://goo.gl/qrXANp)上，您可以在这里找到有关它的视频... [https://www.youtube.com/watch?v=4oCWxHLBQ-A](https://www.youtube.com/watch?v=4oCWxHLBQ-A)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T12:55:57.543

> 解决这个神秘问题的基本技巧是......在滚动视图中嵌入另一个视图并设置如下约束
> 
> UIView --> UIScrollView -->ContentView

并且您可以在运行时继续向 contentView 添加子视图，并且 uiscrollview 内容大小将自动增加

```
 self.ContentView = [[UIView alloc] initWithFrame:CGRectZero];
    self.ContentView.translatesAutoresizingMaskIntoConstraints = NO;
    self.scrollview = [[UIScrollView alloc] initWithFrame:CGRectZero];
    self.scrollview.translatesAutoresizingMaskIntoConstraints = NO;
    [self.scrollview sizeToFit];

    [self.scrollview addSubview:self.ContentView];
    [self.view addSubview:self.scrollview];

    NSMutableDictionary *views = [[NSMutableDictionary alloc] init];

    [views setValue:self.ContentView forKey:@"ContentView"];
    [views setValue:self.scrollview forKey:@"scrollview"];
    [views setValue:self.view forKey:@"mainView"];

    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[scrollview]-0-|"
                                                                             options:0
                                                                             metrics:nil
                                                                               views:views]];

    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[scrollview]-0-|"
                                                                             options:0
                                                                             metrics:nil
                                                                               views:views]];

    [self.scrollview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[ContentView]|"
                                                                             options:0
                                                                             metrics:nil
                                                                               views:views]];

    [self.scrollview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[ContentView]|"
                                                                             options:0
                                                                             metrics:nil
                                                                               views:views]];

    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[ContentView(==mainView)]"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:views]];

    self.view.contentMode = UIViewContentModeRedraw;

    [self.view setNeedsUpdateConstraints]; 
```

# ruby-on-rails - 在 Capybara 中找不到元素

> ID：15583078
> 
> 赞同：2
> 
> 时间：2013-03-23T03:39:05.280
> 
> 标签：ruby-on-rails, rspec, capybara

我不断收到此错误：

```
Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Morning' found. 
```

我已经重置了 spork，完成了完整的数据库重置，尝试为表单元素分配一个 ID，等等。这可能是什么问题？

**`days_controller_spec.rb`**

```
require 'spec_helper'

describe DaysController do

  describe "New" do

    describe "with valid information" do

      it "should create a new entry" do
        visit 'days#new'
        fill_in "Morning", with: "Test"
        click_button "Submit"
      end
    end
  end
end 
```

**`days_controller.rb`**

```
<%= form_for @day do |f| %>

  <%= f.label :morning %>
  <%= f.text_field :morning %>

  <%= f.button :submit %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:54:58.303

看起来您的应用正在使用 JavaScript。使用 capybara，您需要向`:js => true`处理 JS 页面的块添加选项。

尝试：

```
it "should create a new entry", :js => true do 
```

`fill_in`在尝试使用该字段之前，您可能还需要先呈现表单。

另外，我建议您查看 capybara 的集成 DSL。[在此处](https://github.com/jnicklas/capybara)阅读有关它的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:08:37.060

结果证明语法都是正确的，但问题是测试在错误的 RSpec 规范文件中。当我将此测试交换到一个 integration_test 文件时，它工作得很好。

# database - 数据库：带有动态标签的设计表

> ID：15583079
> 
> 赞同：0
> 
> 时间：2013-03-23T03:40:07.080
> 
> 标签：database

在我的表中，有一个项目列表，这些项目具有一些动态的属性。这意味着它可以通过运行时更改，而不是设计时。

例如，菜肴列表。因此，一道菜可以是鱼/甜点/饮料/.... 这些属性将帮助我的应用程序稍后根据用户对其进行过滤。这些属性是由经理通过运行时输入的。

所以，我不知道如何设计一个像这样具有动态属性的表。谁有什么想法，请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:54:47.550

您可以在表格中添加一个类型列。

另一种方法是使用类似标签的东西。你的项目有很多标签。

但是，为了给出更好的答案，需要更多关于您要完成的工作的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:56:14.883

您是数据库设计的新手吗？你可能应该看看一些数据库设计教程：

[http://www.ntu.edu.sg/home/ehchua/programming/sql/Relational_Database_Design.html](http://www.ntu.edu.sg/home/ehchua/programming/sql/Relational_Database_Design.html) [http://www.databaseanswers.org/tutorial4_getting_started_with_db_design/index.htm](http://www.databaseanswers.org/tutorial4_getting_started_with_db_design/index.htm)

您提到的属性可以作为数据存储在某些数据库表中的菜肴列下。然后您可以将这些菜肴与您的用户联系起来。

# python - 排序字典值：错误 lambda

> ID：15583081
> 
> 赞同：2
> 
> 时间：2013-03-23T03:40:12.440
> 
> 标签：python, lambda, key

大家好，我有一个问题我正在尝试按字典的值对字典进行排序，但我不断收到

```
Invalid Syntax Error 
```

错误出现在周围`lambda`并且`(k`

这是我所拥有的：

```
import string

my_dict = {'a' : 15, 'c' : 35, 'b' : 20}

for key, value in sorted(my_dict.iteritems(), key=lambda (k,v): (v,k)):

    print("%s: %s" % (key, value)) 
```

我在 python 方面几乎不是最好的，但我认为一切看起来都不错。

有谁知道为什么会这样？

**更新！！！！！！！！！**

正如我所建议的那样，我删除了括号，但现在我遇到了错误

```
 for key, value in sorted(my_dict.iteritems(), key=lambda k,v: v,k):
       print("%s: %s" % (key, value)) 
```

我不知道这是什么意思：

```
SyntaxError: non-keyword arg after arg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:58:46.210

详细说明 jamylak 的答案，由于 Python 3 没有参数解包，因此您需要使用：

```
key=lambda item: (item[1], item[0]) 
```

至于为什么

```
for key, value in sorted(my_dict.iteritems(), key=lambda k,v: v,k): 
```

失败了

```
SyntaxError: non-keyword arg after arg 
```

这是因为最后一个`k`被解释为`sorted()`. 您的第一次尝试`key=lambda (k,v): (v,k)`很好，但不幸的是仅适用于 Python 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:46:06.997

Python 3.0 不支持 lambda 参数解包。

例如。你需要

```
lambda x: x[0] 
```

访问第一个参数

也只是`my_dict.items()`

# mysql - 减去和比较 SQL

> ID：15583084
> 
> 赞同：0
> 
> 时间：2013-03-23T03:41:27.587
> 
> 标签：mysql, sql

大家好，我有这个问题

```
UPDATE `account`.`account` SET `status` = 'Admin' 
WHERE `status` = 'User' AND `last_online` 
```

我想做的是检查上次在线时间，并确保距离上次在线时间已经过去了 10 分钟。任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:51:04.310

尝试这个：：

```
UPDATE `account`.`account` SET `status` = 'Admin' 
WHERE `status` = 'User' AND TIMEDIFF(now(),`last_online`)>600 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:46:01.717

在数据库中查询最近的活动，然后在选择插入之前比较日期。

# jquery - jquery禁用某些元素的下降

> ID：15583094
> 
> 赞同：0
> 
> 时间：2013-03-23T03:42:39.210
> 
> 标签：jquery, drag-and-drop

我正在尝试禁用在“.buildingWrapper”div 上放置元素，但放置必须在“.starWrapper”div 内！

```
$( ".menuBuilding" ).draggable({ 
    containment: ".gameWrapper",
    drag: function( event, ui ) {

    },
});

$(".buildingWrapper").droppable({
    drop: function( event, ui ) {
        var elm = ui.draggable;

        if ($(this).attr("class") == 'buildingWrapper') {
            ui.draggable = $("<div style='background: blue; height: 100px; width: 100px;'></div>");
        } else {
            ui.draggable = $(elm);
        }
    }
}); 
```

# javascript - JS - 删除字符串之前/之后的所有字符（并保留该字符串）？

> ID：15583101
> 
> 赞同：0
> 
> 时间：2013-03-23T03:44:17.787
> 
> 标签：javascript, split, substring

我已经看到了在特定字符之后删除字符的几个结果 - 我的问题是如何使用字符串执行此操作？

基本上，这适用于任何给定的数据字符串，但让我们使用一个 URL：*stackoverflow.com/question*

使用给定的字符串，在 JS 中，我想删除“.com”之后的所有内容，将“.com”分配给一个变量，并将“.com”之前的文本分配给一个单独的变量。

所以，最终结果： `var x = "stackoverlow" var y = ".com"`

* * *

到目前为止我所做的：1）使用拆分、子字符串等的组合。我可以让它删除片段，但不能不删除“.com”字符串的一部分。我很确定我可以用 substring 和 split 做我想做的事，我想我只是不正确地实现它。2）我正在使用 indexOf 在完整字符串中查找字符串“.com”

有小费吗？我没有发布我的实际代码，因为我尝试过的所有不同的东西都变得如此混乱（如果有必要，我可以继续这样做）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:47:53.823

使用正则表达式。

```
"stackoverflow.com".match(/(.+)(\.com)/) 
```

结果是

```
["stackoverflow.com", "stackoverflow", ".com"] 
```

（但是，为什么要分配`.com`给变量？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:02:27.107

你真的应该研究正则表达式。

这里有一些代码可以得到你想要做的事情：

```
var s = 'stackoverflow.com/question';

var re = /(.+)(\.com)(.+)/;

var result = s.match(re); 

if (result && result.length >= 3) {

    var x = result[1], //"stackoverlow"
        y = result[2]; //".com"

    console.log('x: ' + x);
    console.log('y: ' + y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:50:23.240

`"stackoverflow.com".split(/\b(?=\.)/)`=>`["stackoverflow", ".com"]`

或者，

`"stackoverflow.com/question".split(/\b(?=\.)|(?=\/)/)`
=>`["stackoverflow", ".com", "/question"]`

# windows - 批处理文件跳过 If 语句

> ID：15583104
> 
> 赞同：1
> 
> 时间：2013-03-23T03:44:28.030
> 
> 标签：windows, batch-file

似乎每当我运行我的批处理文件时，一切都会运行，它会进入`checkfiles`，但它不运行 if 语句。没有返回任何内容，它只是直接跳到代码的最后一部分。

```
:file_check
if exist "%psychedelia%\nhc.exe" (goto file_exists) else (timeout /t 1 /nobreak > output)
goto file_check

:file_exists
copy /Y "%~dp0version.txt" "%psychedelia%"

:checkfiles
echo in checkfiles
if exist "%psychedelia%\wa.exe" if exist "%psychedelia%\readme.txt" if exist "%psychedelia%\HD.BLB" if exist "%psychedelia%\smackw32.dll" if exist "%psychedelia%\setup95.exe" if exist "%psychedelia%\WAVistaWin7.exe" (
    echo MSGBOX "Thank you for installing the Neverhood. You may now go to your desktop and click on the Orpheus shortcut to play!" > %temp%\TEMPxmessage.vbs
    call %temp%\TEMPxmessage.vbs
    del %temp%\TEMPxmessage.vbs /f /q
    rename "%psychedelia%\nhc.exe" wa.exe
    timeout /t 1 /nobreak > output
    taskkill.exe /F /IM setup95.exe /T
) else ( 
    echo nonexistent
    pause
    timeout /t 1 /nobreak > output
    goto checkfiles
) 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T03:50:06.500

只有该`if exist`行的最后一个有括号，所以`else`only 适用于最后一个。如果第一个评估为假，它将跳过整个事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:34:37.550

尝试：

```
...
echo in checkfiles
for %%f in (wa.exe 
            readme.txt 
            HD.BLB 
            smackw32.dll 
            setup95.exe 
            WAVistaWin7.exe
           ) do if not exist "%psychedelia%\%%f" (
    echo %%f nonexistent
    pause
    timeout /t 1 /nobreak > output
    goto checkfiles
   )

:: all required files found

echo MSGBOX "Thank you for installing the Neverhood. You may now go to your desktop and click on the Orpheus shortcut to play!" > %temp%\TEMPxmessage.vbs
call %temp%\TEMPxmessage.vbs
del %temp%\TEMPxmessage.vbs /f /q
rename "%psychedelia%\nhc.exe" wa.exe
timeout /t 1 /nobreak > output
taskkill.exe /F /IM setup95.exe /T 
```

它可能更容易维护。

事实上，你甚至可以写

```
set requiredfiles=wa.exe readme.txt HD.BLB smackw32.dll setup95.exe WAVistaWin7.exe
for %%f in (%requiredfiles%) do if not exist "%psychedelia%\%%f" (
... 
```

这会更容易。

**但请接受`Nate Hekman`的回答 - 这只是一个顺便说一句***

# mongodb - Meteor 应用程序 — 重置已部署应用程序的数据库

> ID：15583107
> 
> 赞同：82
> 
> 时间：2013-03-23T03:45:04.690
> 
> 标签：mongodb, meteor

有没有一种简单的方法可以从流星部署的应用程序中重置数据？

因此，例如，如果我部署了一个名为`test.meteor.com`— 的应用程序，我如何轻松重置该应用程序收集的数据？

我在本地运行`meteor reset`，但我不确定在生产中要做什么。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-03-23T05:38:13.467

如果你有你的应用程序，你可以在你的项目目录中执行此操作

```
meteor deploy test.meteor.com --delete
meteor deploy test.meteor.com 
```

第一个删除应用程序，使其全部空白。第二个部署它的新实例。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-10-29T00:25:19.123

一种方法是自己登录 mongo 实例并删除相关数据，例如每个集合：

```
$ meteor mongo APP.meteor.com
> db.users.drop()
> db.xxx.drop() 
```

您可以只删除整个数据库，但这会混淆他们的环境，并且您必须`--delete`重新部署应用程序并重新部署。

```
> db.dropDatabase() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-09T02:38:43.667

我知道这有点旧，但我只是更改了我的收藏名称。所以在你的`/lib/collections.js`文件中，

```
someCollection = new Mongo.Collection("originalcollection"); 
```

变成

```
someCollection = new Mongo.Collection("newcollectionname"); 
```

这当然是假设您的应用程序为数据库生成数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-26T17:02:32.467

只需您可以访问您的流星数据库

> **生产-db-d2.meteor.io:27017/XYZ_meteor_com**
> 
> 其中 XYZ = 您的子域

用于身份验证使用流星身份验证（用户名和密码）

您可以从**rockmongo**、**robomogo**、**mongoui**等工具访问它。

从命令行访问

首先通过输入流星的用户名，密码进行身份验证

> **$流星登录**

然后

> **$流星mongo XYZ.meteor.com**

# python - 被python3闭包弄糊涂了

> ID：15583110
> 
> 赞同：0
> 
> 时间：2013-03-23T03:45:52.723
> 
> 标签：python, python-3.x, closures

这段代码

```
def gen(x):
    def f():
        return x

    return f

print(gen(1)()) 
```

效果很好。

但是当我运行这段代码时，

```
def gen(x):
    def f():
        x += 1
        return x

    return f

print(gen(1)()) 
```

我得到一个错误表明

> UnboundLocalError：分配前引用的局部变量“x”

这是怎么回事？以及如何理解 python3 的关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:50:14.473

```
def gen(x):
    def f():
        nonlocal x # add this line
        x += 1
        return x

    return f

print(gen(1)()) 
```

# ruby - QtRuby 发射不起作用

> ID：15583114
> 
> 赞同：13
> 
> 时间：2013-03-23T03:46:24.797
> 
> 标签：ruby, qt, signals, slot, emit

**平台**：

> 达尔文***-** *s-MacBook-Pro.local 11.4.2 达尔文内核版本 11.4.2：2012 年 8 月 23 日星期四 16:25:48 PDT；根：xnu-1699.32.7~1/RELEASE_X86_64 x86_64

**红宝石**：

> ruby 2.0.0p0（2013-02-24 修订版 39474）[x86_64-darwin11.4.2]（由 rvm 安装）

**qt**：

> qt：稳定 4.8.4（瓶装），HEAD

**代码**：

```
require 'Qt'

class Foo < Qt::Object

    signals :my_signal #also tried 'my_signal()'
    slots 'my_slot()'

    def initialize(parent = nil)
        super(parent)

        puts "connecting signal and slot"
        Qt::Object.connect(self, SIGNAL('my_signal()'), self, SLOT('my_slot()'))
        # also tried => connect(self, SIGNAL('my_signal()'), self, SLOT('my_slot()'))

    end

    def emit_my_signal
        puts "sending signal"
        emit my_signal
    end

    def my_slot
        puts "received message from signal"
    end
end

o = Foo.new
o.emit_my_signal 
```

**输出**：

```
connecting signal and slot
sending signal 
```

输出 Qt.debug_level = Qt::DebugLevel::High

```
Munged method names:
        QObject$
        QObject?
        QObject#
candidate list:
    QObject* QObject::QObject(QObject*)  (smoke: 0 index: 3804)
matching => smoke: 0 index: 3804
        QObject* (u) score: 2
        match => smoke: 0 index: 3804 score: 2 chosen: 3804
setCurrentMethod(smokeList index: 0, meth index: 3804)
connecting signal and slot
Searching for QObject#connect
Munged method names:
        connect#$#$
candidate list:
    static bool QObject::connect(const QObject*, const char*, const QObject*, const char*)  (smoke: 0 index: 3850)
matching => smoke: 0 index: 3850
        const QObject* (QObject) score: 3
        const char* (s) score: 1
        const QObject* (QObject) score: 3
        const char* (s) score: 1
        match => smoke: 0 index: 3850 score: 8 chosen: 3850
setCurrentMethod(smokeList index: 0, meth index: 3850)
sending signal 
```

似乎发射没有做任何事情。我也试过重新安装qt和qtbindings，但问题依然存在。我还在同一台机器上尝试了带有信号和插槽的 PyQt，它就像一个魅力。

有人对此有任何想法吗？是 ruby​​ qtbindings 的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-19T19:32:35.077

通常，需要在可靠地传递任何信号之前启动 Qt 的事件循环。我在你的代码中没有看到。更具体地说，我缺少的是：

```
app = Qt::Application.new(ARGV)
app.exec 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T09:09:08.447

代码似乎是正确的。该问题仅在 ruby​​ 和 qtbindings 版本的特定组合中出现，这些版本现已过时。

# php - 虽然mail()返回true，但是没有收到邮件。是不是配置有问题？

> ID：15583124
> 
> 赞同：-1
> 
> 时间：2013-03-23T03:48:34.263
> 
> 标签：php, windows, email, xampp

以下分别是`php.ini`和中的配置`sendmail.ini`：

```
[mail function]
sendmail_path = ""\"E:\Installed_Apps\xampp\sendmail\sendmail.exe\" -t""
mail.add_x_header = Off

[sendmail]
SMTP = localhost
smtp_port = 25
smtp_server=smtp.gmail.com
smtp_port=587
smtp_ssl=auto
error_logfile=error.log
auth_username=my_gmail_address
auth_password=my_xxxxxx
pop3_server=
pop3_username= 
pop3_password=
force_recipient=
hostname= 
```

我尝试将电子邮件发送为：

```
<?php
$sent = mail('to_someone@hotmail.com','Message sent from XAMPP','Hey ! I just sent you a message using XAMPP');
if($sent) {
    echo "Mail sent successfully";
}else {
    echo "Sending failed";
} 
```

我总是收到`true`，`$sent`但上述地址没有收到电子邮件。这可能是什么原因？配置文件有什么问题吗？

***注意：*** *我上传`php.ini`和`sendmail.ini`@github ，我在 25 日运行[水星](https://github.com/suhailgupta03/php.git)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:23:20.020

您正在积极将其设置为使用`mailtodisk.exe`该程序，该程序只需接收电子邮件并将其保存到文件夹中 - 它根本不会尝试发送电子邮件，它只是一个检查您的电子邮件外观的工具正确的。

从有关以下文档的文档中`sendmail_path`：

> 如果设置，则忽略 smtp、smtp_port 和 sendmail_from 并执行指定的命令。

尝试注释掉`sendmail_path`并检查您的计算机上是否在端口 25 上运行了 SMTP 服务器。

# python - 为什么我的 python 格式 %s 没有空间？

> ID：15583127
> 
> 赞同：11
> 
> 时间：2013-03-23T03:49:23.913
> 
> 标签：python

我正在使用 PyCrypto，我似乎成功地解密了我的数据。但是，我收到的字符串似乎表现得很奇怪：

```
...
plaintext = cipher.decrypt(encrypted)
print 'plaintext length is %u' % len(plaintext)
print 'plaintext: %s' % plaintext
print 'plaintext is "%s"' % plaintext 
```

明文有我期望的字符串（“POEorOPE”），但输出看起来很奇怪：

```
plaintext length is 16
plaintext: POEorOPE
plaintext is ""OEorOPE 
```

为什么第三个打印语句中的字符串似乎占用了零空间，因此它的第一个字符被我认为是结束引号的内容覆盖了？我现在以明文形式存储的内容是否还有其他事情发生？

**编辑：**

感谢您的评论，我知道发生了什么。（虽然我不知道为什么我的字符串中有退格字符。）

```
print repr(plaintext)

'POEorOPE\x08\x08\x08\x08\x08\x08\x08\x08' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:42:19.320

一些（非常老的）软件使用了一个巧妙的技巧，通过“加倍一个字符”来模拟粗体文本：打印字符，退格，然后再次打印字符。复制会产生更大、更暗的字形。

您的字符串应该是 8 个字符，但显示的 len 为 16。那是因为添加了 8 个 unicode 代码点（“\x08”）（可能作为解密过程的一部分）。

unicode 点“\x08”确实代表退格。为了说明这些只是无意义的 unicode 点：

```
>>> u = u'POEorOPE\x08\x08\x08\x08\x08\x08\x08\x08'
>>> print u.encode()
POEorOPE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:32:23.453

原来这些退格字符是Perl 的 Crypt::CBC 模块添加的[字节填充。](http://search.cpan.org/~lds/Crypt-CBC-2.32/CBC.pm#Padding_methods)在这种特殊情况下，填充字节都是“08”，表示有 8 个字节的填充应该被删除。PyCrypto 在解密或加密期间不处理填充。我可以像这样剥离填充字节：

```
text_bytes = bytearray(plaintext,'utf-8')
num_bytes_padding = text_bytes[len(text_bytes) - 1]
text_bytes[-1 * num_bytes_padding:] = []
plaintext = text_bytes.decode('utf-8') 
```

# python - 请对我的程序提供一点帮助（初学者）

> ID：15583134
> 
> 赞同：0
> 
> 时间：2013-03-23T03:49:53.927
> 
> 标签：python, python-2.7

我需要编写一个加密程序，而我正在完成作业。下面列出了这部分的说明。如果他们不输入 e、d 或 q，我如何告诉 python 重做 while 循环？我的 q 条目工作正常，但如您所见，我需要帮助来尝试创建用户输入另一个字符的情况。

**确保用户使用 while 循环输入“e”或“d”或“q”，以使他们重做任何错误的输入。然后 StartMenu() 应该将他们的选择返回给 main() 函数，其中 main() 的变量应该捕获该返回值。**

```
 def PrintDescription():
    print 'This program encrypts and descrypts messages using multiple \
encryption methods.\nInput files must be in the same directory as this program.\
\nOutput files will be created in this same directory.'

def StartMenu():
    print 'Do you wish to encrypt or decrypt?'
    print '<e>ncrypt'
    print '<d>ecrypt'
    print '<q>uit'

def main():
    alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,.?! \t\n\r"
    PrintDescription()
    while True:
        StartMenu()
        a = raw_input("")
        if a!='e' and a!='d' and a!='q':
          print 'You must enter e, d or q'
          False
          break
        if a == 'q':
         break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:04:07.853

只是为了放弃评论中的扩展对话，这应该满足您的所有要求：

```
def main():
    alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,.?! \t\n\r"
    PrintDescription()
    a = None
    while a not in ('e', 'd', 'q'):
        if a:
            print "Try again!"
        else:
            StartMenu()
        a = raw_input("")
    if a == 'q':
        sys.exit(0) 
```

发生了什么...

第一次通过 main 函数时，a 将被设置为 None。然后将开始一个 while 循环，表示继续运行，直到 a 是三个必需字母之一。当然第一次通过a是None，所以会进入while循环。由于 a 为无，因此`if a:`计算结果为`False`。所以该块将被跳过。但是，else 将被执行并打印 StartMenu。然后，您将阅读用户输入并决定循环重新开始时要做什么。如果满足条件（即 a 是 'e'、'd' 或 'q' 之一，则它不会再次迭代循环。但是，如果 a 不在三个字母中，则再次迭代循环将开始。然而，这一次，a 是这样`if a:`计算的`True`. 现在它打印“再试一次！” 并且不打印 StartMenu。从现在开始，这将一直持续到输入三个字母之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:53:00.740

```
while raw_input("") not in ['e', 'd', 'q']:
   berate_user() 
```

# ios - 为什么我不能从 UITableViewCell 的子类初始化 UITextField？

> ID：15583138
> 
> 赞同：0
> 
> 时间：2013-03-23T03:50:21.677
> 
> 标签：ios, objective-c, storyboard, uitableview

我`UITableViewCell`为 iPad 应用程序创建了一个子类。我需要动态生成文本字段，从用户那里获取输入，然后将该信息存储在一个数组中。我想询问对象，它将保存用户在我的视图控制器的 segue 之前写`UITableViewCell`的`UITextField.text`任何内容（我在`NSString`调用 segue 时保存对象）。所以我有一组 UITableViewCells 我要求`UITextField`.text 对象。但是由于某种原因，`UITableViewCell`在创建我的子类时，我`UITextField`的不是。我可以打电话`UITableViewSubclass`，它已初始化，但`UITableViewSubclass.UITextField`为零。

这是我的`UITableViewCell`子类标题（是的，`UITextField`故事板中已连接）：

```
#import <UIKit/UIKit.h>

@interface ConditionCell : UITableViewCell 

@property (strong, nonatomic) IBOutlet UITextField *condition;

@end 
```

这是我的实现文件：

```
#import "ConditionCell.h"

@implementation ConditionCell
@synthesize condition;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.condition = (UITextField *)[self viewWithTag:10];
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

这是处理包含单元格的表格的表格视图控制器：

.h 文件：

```
#import <UIKit/UIKit.h>
#import "ConditionCell.h"

@interface ConditionsTableViewController : UITableViewController

@property (strong, nonatomic) NSMutableArray *conditionCellArray;

- (void)addNewConditionCell;

@end 
```

.m 文件：

```
#import "ConditionsTableViewController.h"

@interface ConditionsTableViewController ()

@end

@implementation ConditionsTableViewController

@synthesize conditionCellArray = _conditionCellArray;

- (NSMutableArray *)conditionCellArray
{
    if (_conditionCellArray == nil) {
        // Create the array object
        _conditionCellArray = [[NSMutableArray alloc] init];
    }

    return _conditionCellArray;
}

- (void)addNewConditionCell
{
    ConditionCell *condCell = [[ConditionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"conditionCell"];

    [self.conditionCellArray addObject:condCell];

    [self.tableView beginUpdates];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:self.conditionCellArray.count-1 inSection:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationTop];

    [self.tableView endUpdates];
    [self.tableView reloadData];
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.conditionCellArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"conditionCell";
    ConditionCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[ConditionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // Configure the cell...
    //cell.condition = (UITextField *)[cell viewWithTag:1];

    return cell;
}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

这个表视图控制器位于 UIView 控制器中，因为表视图不占据整个屏幕。当用户按下“确定”按钮时，会触发一个 segue，在这里我向这个 Table View Controller 询问包含`UITableViewCells`. 不幸的是，我似乎无法在文本字段中输入任何内容，因此 .text 始终为零。如果有人可以帮助我解决这个问题，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:55:33.823

我想出了一个更好的方法来做我想做的事情。事实证明，iOS 的 UITableView 的工作方式与我想要做的完全不同。UITableView 通过查看您的故事板并给定单元格的标识符来工作，它会创建它们并允许您在 cellForRowAtIndexPath 方法中设置它们的属性。但是，当单元格离开屏幕时，它不会保留为它自己的单独对象；它被重复使用。所以，你可以把它想象成当你滚动一个表格视图时，从一端消失的单元格在另一端重新出现，并带有新的信息。这是关键 - UITableView 希望您提供单元格的信息。它不是为了直接在 UITableViewCell 上输入信息而设计的，而这正是我想要做的。

所以我最终做的是将我的单元格复制粘贴到他们自己的 .xib 文件中，并在子类 initWithStyle:reuseIdentifier 方法中，执行：

```
NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"ConditionCell" owner:self options:nil];
        self = [nibArray objectAtIndex:0]; 
```

这将创建具有任何样式的单元格 - 设置 - 你想要的 UI 元素。

接下来，我想保留对单元格的引用，因为该单元格有一个文本框，当用户按下“完成”按钮时，我需要保存文本框上的内容。然而，测试揭示了我上面解释的重用问题。那么如何做到这一点呢？在我的表的视图控制器中，每当用户想要添加一个新的文本框（并按下按钮这样做）我有一个方法

```
[self.conditionCellArray insertObject:[[ConditionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"conditionCell"] atIndex:0]; 
```

这会在数组中添加一个新单元格 - 这很重要，因为我需要始终引用所有单元格。（它在索引 0 处添加单元格，因为我想将它插入到顶部）。然后，在 cellForRowAtIndexPath 方法中，我做了

```
return [self.conditionCellArray objectAtIndex:indexPath.row]; 
```

这将返回相应的单元格。请记住，从我所读到的关于保持对表中每个单元格的引用的整个内容，这与 Apple 在使用 UITableView 时声明的最佳实践相反。然而，正如我之前所说，UITableView 旨在显示信息，而不是从用户输入中收集信息。所以这就是为什么我必须打破规则，如果你愿意的话，以达到预期的效果（我想要的）。我希望这可以帮助其他想要做同样事情的人；如果有更好的方法，请不要羞于告诉我。

编辑：哦，顺便说一句，当您将故事板中创建的单元格复制粘贴到它们自己的 .xib 文件时，请确保断开任何 IBOutlets 并将它们的类更改回 UITableViewCell。这样，当您连接您的 .xib 文件单元时，就不会有任何问题或冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:58:04.687

您可能会发现使用免费的 Sensible TableView 框架更容易做到这一点。该框架具有开箱即用的这些文本字段单元格，甚至可以从您的数组中自动创建它们。

# html - 跨度文本神秘地对齐到顶部

> ID：15583143
> 
> 赞同：1
> 
> 时间：2013-03-23T03:51:21.740
> 
> 标签：html, css

我已经为此奋斗了几个小时。这个跨度中的文本神秘地与跨度的顶部对齐。这是 Firebug 的屏幕截图：

![在此处输入图像描述](../Images/e02f7ec069bd7cc627656aee2a54af81.png)

这是我相关的 CSS 块：

```
.skills {
    overflow:hidden;
    height:100%;
}

.skills li{
    border-bottom:1px dotted black;
    position:relative;
    width:200px;
    height:18px;
    margin-left:13px;
}

.skills li span{
    display:inline-block;
    position:relative;
    background:white;
    bottom:0px;
    height:100%;
    padding:0 5px; 
} 
```

这是HTML：

```
<h4 class="main-heading"><span>Data Exchange</span></h4>
<ul class="skills">
    <li>
        <span>SOAP/Axis2</h4>
    </li>
</ul> 
```

你能说出为什么这与顶部对齐吗？我想要它在中心。

这里[是](http://jsfiddle.net/4arpZ/)jsFiddle，相同的代码导致文本位于中心。这是否意味着层次结构中较高的 CSS 元素可能会导致它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:01:58.023

> ...相同的代码导致文本位于中心。这是否意味着层次结构中较高的 CSS 元素可能会导致它？

我想您实际样式表中的祖先`line-height`设置为小于 18px。您可以在您的实际样式表中查看该元素的计算行高，以查看正在应用的值。

的默认值`line-height` [大约是 1.2 倍](https://developer.mozilla.org/en-US/docs/CSS/line-height)（取决于浏览器）。

将 设置`line-height`为等于包含元素的非填充高度以垂直对齐单行文本（在本例中为 18 像素）。

小提琴示例：http: [//jsfiddle.net/4vq42/](http://jsfiddle.net/4vq42/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:57:31.190

没有行高。使其与高度相同，18px 或 100%。

```
.skills li span{
    display:inline-block;
    position:relative;
    background:white;
    bottom:0px;
    height:100%;
    line-height:18px;
    padding:0 5px; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T03:58:20.410

尝试添加`line-height: 18px`到`.skills li span`CSS。

编辑：刚刚意识到蒂姆梅多拉已经说过了。不理我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T03:59:07.580

设置`line-height`元素的值`height`是垂直对齐文本的最简单方法。

```
.skills li {
    height:18px;
    line-height:18px;
} 
```

# css - jquerymobile 1.3按钮输入中的css边距

> ID：15583147
> 
> 赞同：2
> 
> 时间：2013-03-23T03:51:59.043
> 
> 标签：css, jquery-mobile

[http://jsbin.com/olecad/3/edit](http://jsbin.com/olecad/3/edit)

我正在尝试通过 css margin-left:50% 移动输入按钮

但是按钮没有移动，背景移动了。

请帮助指导我如何移动输入按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:02:40.723

从 中删除 css`input`并在下面添加`css`。

```
.ui-btn-left, .ui-btn-right, .ui-input-clear, .ui-btn-inline, .ui-grid-a .ui-btn, .ui-grid-b .ui-btn, .ui-grid-c .ui-btn, .ui-grid-d .ui-btn, .ui-grid-e .ui-btn, .ui-grid-solo .ui-btn {
    margin-left: 20%;
    margin-right: 5px;
} 
```

`jquery.mobile.css`在行号`2177`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:03:18.320

试试这个 CSS：添加CSS`text-align:center`并从中`button3`删除`margin-left:50%``input`

```
#buttons_1{
  background:red;
}
#buttons_2{
  background:green;
}
#buttons_3{
  background:blue;
  text-align:center;
}
#input{
        margin-top:0px;
        background:red;
    } 
```

# php - 卷曲登录Joomla 1.6/3.0

> ID：15583153
> 
> 赞同：3
> 
> 时间：2013-03-23T03:53:42.483
> 
> 标签：php, curl, joomla

我正在尝试通过 curl 在 PHP 中登录 Joomla 1.6/3.0，但没有成功。

我尝试了 joomla 1.5 的方法

```
$uname = "id";
$upswd = "pswd";
$url = "http://www.somewebpage.com";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );
curl_setopt($ch, CURLOPT_COOKIEJAR, './cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, './cookie.txt');
curl_setopt($ch, CURLOPT_HEADER, FALSE );
$ret = curl_exec($ch);
if (!preg_match('/name="([a-zA-z0-9]{32})"/', $ret, $spoof)) {
    preg_match("/name='([a-zA-z0-9]{32})'/", $ret, $spoof);
}

// POST fields
$postfields = array();
$postfields['username'] = urlencode($uname);
$postfields['passwd'] = urlencode($upswd);
$postfields['lang'] = '';
$postfields['option'] = 'com_login';
$postfields['task'] = 'login';
$postfields[$spoof[1]] = '1';
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
$ret = curl_exec($ch); 
```

但它是禁止展示的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:37:47.953

Joomla！通常从网络浏览器将发送一个令牌，以确保表单是从浏览器发布的（而不是像您尝试做的那样从外部某个地方发布）。

如果它不是从浏览器发布的，则会出现类似“最近的请求被拒绝，因为它包含无效的安全令牌”之类的错误。请刷新页面并重试。

您可能想寻找一个支持您正在尝试做的事情的认证插件。例如[自动登录插件](http://extensions.joomla.org/extensions/access-a-security/site-access/authentication-cloud-based/10508)。

# google-app-engine - 降低谷歌数据存储读取操作费用

> ID：15583154
> 
> 赞同：2
> 
> 时间：2013-03-23T03:53:56.207
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个拥有 1000 个实体的 Kind XXX_account。Kind 文件大小为 3 mb。每当我发送请求时，都需要调用 Query 来查找 Kind 中的某个实体。因此，我认为 google 费用在 20 小时内几乎是 4 美元。

有没有办法减少数据存储读取操作？我计划在 txt 文件中存储 1000 个实体，以便我每次都需要读取数据存储。

```
Datastore Read Operations       5.01 Million Ops    4.96    $0.70/ Million Ops  $3.48 
```

我的模型.py

```
class MyUser(DatastoreUser):
    pass

class XXXAccount(db.Model):
    user = db.ReferenceProperty(MyUser,
                                   collection_name='xxx_accounts')

    id = db.StringProperty(required=True)
    created = db.DateTimeProperty(auto_now_add=True)
    updated = db.DateTimeProperty(auto_now=True)
    name = db.StringProperty(required=True)
    username = db.StringProperty(required=True)
    profile_url = db.StringProperty(required=True)
    aaa = db.StringProperty(required=True)
    bbb = db.StringProperty(required=True) 
```

视图.py

```
@login_required
def updateprofile(request):
    number_form = NumberForm()
    if request.method =="POST" and number_form.validate(request.form):
        acc_num_str = number_form['nb']  
        acc_num = int(acc_num_str)

        current_user = request.user
        xxx_account = current_user.xxx_accounts[acc_num] #Query
        DO SOME THING WHICH DOES NOT RELATED TO READ AND WRITE DATASTORE OPERATION
return...... 
```

更新：

*   代码已发布

*   OMG，仅 1000 个请求 0.32 美元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:24:08.130

您应该在查询实体的地方发布模型定义和代码。

常见建议：

如果您想找到*某个*实体，只有一种正确的方法 - 使用实体键（`id`数字或`key_name`字符串）来获取它。Datastore 在保存实体时会自动为实体分配一些 ID，或者您可以在创建实体时手动设置一些不错的 key_name。

要获取实体的 id 或 key_name，请使用 DB 中的 Model.key().id() 或 Model.key().name() 或 NDB 中的 Model.key.id()。

[然后，如果您使用旧的 DB API，则可以使用Model.get_by_id()](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_id)或 Model.get_by_key_name() 方法通过 id 或 key_name 获取实体；如果使用新的 NDB API，则可以使用[Key.get()方法。](https://developers.google.com/appengine/docs/python/ndb/entities#retrieving_entities)您可以将 id 或 key_name 传递给 URL - http://example.com/getentity/[id]。

此外，使用 Memcache 缓存实体。缓存可以极大地减少数据存储的使用。顺便说一句，NDB 自动使用缓存。

ps 抱歉，我不能发布超过 2 个链接。

# vba - 对象_worksheet的方法范围失败命名范围

> ID：15583159
> 
> 赞同：1
> 
> 时间：2013-03-23T03:55:13.963
> 
> 标签：vba, excel

```
Private Sub Submit_Click()
Application.ScreenUpdating = False

Dim rangeForCode As range, rngLookupRange As range

Dim row As Integer, stock As Integer
Dim result As Integer
Dim drugCodePC As Integer
Dim qty As Integer
Dim ws As Worksheet

drugCodePC = CInt(DrugCode2.Value)
qty = CInt(Quantity.Value)

'Populating the drug name
Set ws = Worksheets("Drug Record")
ws.Select

*Set rangeForCode = ws.range("DrugCodeInventory")*
row = Application.WorksheetFunction.Match(drugCodePC, rangeForCode, 1)
Set rngLookupRange = ws.range("Inventory")
stock = Application.WorksheetFunction.VLookup(drugCodePC, rngLookupRange, 3, False)
result = stock + qty
'MsgBox (row)
ws.Cells(row + 1, 3).Value = result

Application.ScreenUpdating = True
Unload PurchaseForm 
End Sub 
```

这不断抛出错误“对象_worksheet的方法范围失败命名范围”。错误发生在**。我知道这与命名的范围有关，因为以前，当我编写单元格范围时，即。“A1：A215”它有效。我检查了名称范围，它看起来正确。命名范围的名称也是正确的。我尝试先激活工作簿，但仍然抛出错误。

命名的范围是：

```
= OFFSET(DrugCodeInventory!$A$2, 0, 0, COUNTA(DrugCodeInventory!$A:$A)-1,1) 
```

我只想动态选择工作表中的第一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:03:57.023

如果您在“立即”窗口中运行它，它会起作用吗？

```
application.Goto Worksheets("Drug Record").range("DrugCodeInventory") 
```

如果它没有运行，请尝试删除命名范围并创建一个新范围。

还请尝试明确限定代码的这一部分：

```
Dim ws As Excel.Worksheet '<added full qualification here

drugCodePC = CInt(DrugCode2.Value)
qty = CInt(Quantity.Value)

'Populating the drug name
Set ws = Excel.thisworkbook.Worksheets("Drug Record") '<added full qualification here
ws.Select

*Set rangeForCode = ws.range("DrugCodeInventory")* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:42:48.050

请使用以下**isNameRngExist**函数，当名称范围**“DrugCodeInventory”**存在时，该函数将返回 true，然后您可以继续进行进一步操作。

```
Function isNameRngExist(myRng As String) As Boolean
    On Error Resume Next
    isNameRngExist = Len(ThisWorkbook.Names(TheName).Name) <> 0
End Function 
```

# windows - 为什么堆栈比内存中的文本低？

> ID：15583163
> 
> 赞同：2
> 
> 时间：2013-03-23T03:56:16.057
> 
> 标签：windows, memory-management, process, stack, windbg

我正在使用 Windbg 来研究进程内存，并且不禁注意到人们刚刚接受的一些东西。当您打印出寄存器时：

```
eax=00000000 ebx=008b6f00 ecx=01010101 edx=ffffffff esi=00000000 edi=00465000
eip=77f9d022 esp=05cffc48 ebp=05cffc54 iopl=0         nv up ei ng nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000286 
```

请注意，ESP 和 EBP 的值低于 EIP，这意味着堆栈比进程的文本部分低（！？）。为什么是这样？据我所知（我在 Linux 中也用 gdb 做过同样的事情），堆栈应该在高内存和低文本 - 就像许多书中所说的那样。

有什么我不知道的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T07:54:04.327

[线程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681917(v=vs.85).aspx)堆栈可以位于用户模式[虚拟地址空间](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439648(v=vs.85).aspx)内的任何地址范围。[VMMap](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx)显示进程已提交的虚拟内存类型的细分。 ![在此处输入图像描述](../Images/c60fa38fb728aa006bbcfd8e9b7b7024.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T07:51:48.207

> 堆栈应该在高内存和低文本

这是一种误解。完全由操作系统来选择如何在进程的虚拟内存中布局。

特别值得注意的是：

*   没有一个单独的代码段：可执行文件和 DLL 可以在不相邻的地址范围加载。
*   没有一个单一的进程堆栈：每个线程都有自己独立的堆栈。同样，没有理由期望它们在内存中彼此相邻。

此外，随机化内存中事物的位置被认为是良好的安全实践。请参阅[地址空间布局随机化](http://en.wikipedia.org/wiki/Address_space_layout_randomization)。

# bash - Bash-script 文件创建和填充

> ID：15583168
> 
> 赞同：0
> 
> 时间：2013-03-23T03:56:58.250
> 
> 标签：bash, file, loops, creation

我正在尝试编写一个 bash 脚本，它将创建一定数量的文件，这些文件将传递给一个参数，并用相关信息填充该文件。但是，由于某种原因，我无法让它正常工作，谷歌搜索什么也没找到。

我希望它创建如下文件：文件名：

```
Prob_3_ch_17.cpp 
```

填写如下：

```
/*
User: Johnny Smith
Prob: 3
Output: 
*/ 
```

其中第一个命令行参数是章节号。第二个是起始编号，第三个是结束编号。因此，如果运行以下内容

```
sh ../FileMaker.sh 17 1 10 
```

它将为第 17 章创建 10 个文件，每个文件都填充适当的数据和适当的文件名。这是我想出的脚本。

```
#!/bin/bash

# Syntax:
# $1 = Chapter Number
# $2 = Starting Number
# $3 = Ending Number

CHAPTER=$1
FIRST=$2
LAST=$3
U_NAME="Johnny Smith"

# Name: Prob_$NUMBER_Ch_$1.cpp

for ((NUMBER=$FIRST; $NUMBER<=$LAST; $NUMBER++));
   do
      if [ -e "Prob_$NUMBER_Ch_$CHAPTER.cpp" ]; then
         echo "File Prob_$NUMBER_Ch_$CHAPTER.cpp already exists!"
      else
         echo "/* \n User: $U_NAME \n Problem: $NUMBER \n Output: \n */" >> "Prob_$NUMBER_Ch_$CHAPTER.cpp"
   done 
```

但是，它不运行。我收到以下错误：

```
../FileMaker.sh: line 21: syntax error near unexpected token `done'
../FileMaker.sh: line 21: `done' 
```

我用谷歌搜索并发现其他人也有同样的问题，但我并不完全理解解决方案中的含义。有人可以帮帮我吗？我不是最擅长编写 shell 脚本，我正在尝试通过制作这样的脚本来学习。

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:36:34.850

if 块和 for 循环的语法错误。正确的语法是 -

```
 for ((NUMBER=FIRST; NUMBER<=LAST; NUMBER++));
   do
      if [ -e "Prob_$NUMBER_Ch_$CHAPTER.cpp" ]; then
         echo "File Prob_$NUMBER_Ch_$CHAPTER.cpp already exists!"
      else
         echo "/* \n User: $U_NAME \n Problem: $NUMBER \n Output: \n */" >> "Prob_$NUMBER_Ch_$CHAPTER.cpp"
      fi
   done 
```

有关c 样式的 for 循环，请参见[示例 11.12 。](http://tldp.org/LDP/abs/html/loops1.html)

要创建文件，请在所有位置使用 "Prob_"$NUMBER" *Ch* "$CHAPTER".cpp"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:58:56.380

大多数外壳都允许`set -x`在顶部。这显示了脚本在执行时的跟踪。

1.  您需要一个尾随`fi`来关闭该`if`语句。
2.  Shell数学需要`NUMBER=$(expr $NUMBER + 1)`，它不懂`$NUMBER++`。
3.  您可能会发现该`printf`命令比`echo`.

您仍然会在循环中使用错误的变量，并且只创建一个文件。我希望你能弄清楚这一点，因为这看起来像是家庭作业。

# java - 如何从 java 中查询 eXist db

> ID：15583170
> 
> 赞同：0
> 
> 时间：2013-03-23T03:57:22.907
> 
> 标签：java, xml, xquery, xml-rpc, exist-db

我正在尝试基于 eXist 数据库查询文件。
通过一个简单的函数来显示文件的内容，没问题：

```
XMLResource res = (XMLResource) col.getResource(resourceName); 
System.out.println(res.getContent()); 
```

但是当我试图反对使请求变得不可能时。

```
String xQuery = "for $x in doc(\"" + resourceName + "\")." + "return data($x).";
ResourceSet result = service.query(xQuery); 
ResourceIterator i = result.getIterator(); 
```

我有以下错误：

```
Exception in thread "main" org.xmldb.api.base.XMLDBException: Failed to invoke method queryP in class org.exist.xmlrpc.RpcConnection: org.exist.xquery.StaticXQueryException: exerr:ERROR org.exist.xquery.XPathException: exerr:ERROR err:XPST0003 in line 1, column 58: unexpected token: .

at org.exist.xmldb.RemoteXPathQueryService.query(RemoteXPathQueryService.java:114)
at org.exist.xmldb.RemoteXPathQueryService.query(RemoteXPathQueryService.java:71)
at ExistAccess.main(ExistAccess.java:45)
Caused by: org.apache.xmlrpc.XmlRpcException: Failed to invoke method queryP in class org.exist.xmlrpc.RpcConnection: org.exist.xquery.StaticXQueryException: exerr:ERROR org.exist.xquery.XPathException: exerr:ERROR err:XPST0003 in line 1, column 58: unexpected token: .

at org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse(XmlRpcStreamTransport.java:197)
at org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:156)
at org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:143)
at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:69)
at org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:56)
at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:167)
at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:158)
at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:147)
at org.exist.xmldb.RemoteXPathQueryService.query(RemoteXPathQueryService.java:99)
... 2 more
[B@105081caorg.apache.xmlrpc.XmlRpcException: Failed to invoke method queryP in class org.exist.xmlrpc.RpcConnection: org.exist.xquery.StaticXQueryException: exerr:ERROR org.exist.xquery.XPathException: exerr:ERROR err:XPST0003 in line 1, column 58: unexpected token: . 
```

我检查了我所有的 .jar 文件，它们都存在……我真的需要帮助！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:21:21.310

您的查询：

> ```
> String xQuery = "for $x in doc(\"" + resourceName + "\")." + "return data($x)."; 
> ```

错误的核心：

> ```
> err:XPST0003 in line 1, column 58: unexpected token: . 
> ```

如错误消息所述，eXist-db 使用“.”识别错误；这个句点/点是无效的 XQuery。从查询中删除点，你应该没问题。查询文本本身应如下所示：

```
for $x in doc("/db/mycollection/mydocument.xml") return data($x) 
```

此外，您的 FLWOR 循环似乎正在迭代单个项目 - 资源。因此，FLWOR 是无关的。您可以将其重构为：

```
data(doc("/db/mycollection/mydocument.xml")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:34:05.137

我认为您的字符串 concat 会导致此问题，为什么不尝试在“。”之后添加一个空格。更改您的代码，例如

```
 String xQuery = "for $x in doc(\"" + resourceName + "\"). " + "return data($x)."; 
```

# c# - 在调试会话之间保留 app.config 中的数据

> ID：15583172
> 
> 赞同：7
> 
> 时间：2013-03-23T03:57:31.860
> 
> 标签：c#, visual-studio, app-config

所以，长话短说，我正在开发一个应用程序，它将利用一些配置信息，这些配置信息可能会在运行时通过应用程序本身进行更改。出于我考虑使用`Settings`该类的目的。

问题在于，应用程序的不同运行之间没有持久化信息：

运行 1)

```
Console.WriteLine(Settings.Default["User"]); //prints "Default user"
Settings.Default["User"] = "abc";
Console.WriteLine(Settings.Default["User"]); //prints "abc" 
```

运行 2)

```
Console.WriteLine(Settings.Default["User"]); //prints "Default user"
Settings.Default["User"] = "abc";
Console.WriteLine(Settings.Default["User"]); //prints "abc" 
```

（*两者都打印完全相同的输出*）

两次运行都显示相同的第一个打印“默认用户”，尽管在第二次运行时我想获得“abc”，这表明信息没有在不同的应用程序执行之间保留。

我承认这一定与 Visual Studio 处理 .config 文件的方式有关，但即便如此我想知道如何纠正这种（讨厌的）行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T08:51:55.470

默认情况下，App.config 不会直接复制，而是将其内容放在`<assembly-name>.config`输出文件夹中的文件中。复印设置不适用于此操作。

通常，应用程序更改自己的 app.config 并不是一个好习惯。如果您正在开发可能由同一台 PC 上的多个用户使用的应用程序，请[改用“设置”](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)。这样每个用户都可以有自己的设置。

对于服务和系统范围的设置，请考虑使用其他存储，例如单独的配置文件、注册表或数据库。

**编辑关于保存设置：**

使用设置类时，应调用 Save() 将其写入文件，否则关闭应用程序时将丢弃设置更改。如果您在开发过程中经常终止您的应用程序，并且它没有到达它的结束代码（您通常会调用 Save()），那么您有几个选择：

1.  使用调试器监视窗口调用 Save()。为此，请`Settings.Default.Save()`在监视窗口中放置一个表达式，并在每次要保存时刷新它。
2.  您可以尝试使用计时器每秒调用 Save。
3.  设置更改后，您可以在代码中插入 Save() 调用。
4.  您可以编写自定义设置提供程序或包装器，在每次更改后立即保存设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:52:23.213

以下是我用来将某些内容保存回 app.config 文件的内容。

```
//write the last run time to config
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

if (config.AppSettings.Settings["LastRunTime"] == null)
{
    config.AppSettings.Settings.Add("LastRunTime", DateTime.UtcNow.ToString());
}
else
{
    config.AppSettings.Settings["LastRunTime"].Value = DateTime.UtcNow.ToString();
}
config.Save(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T04:16:53.430

此代码的 User 属性设置为`User`范围：

```
namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(ConsoleApplication4.Settings1.Default["User"]); //prints "DefaultUser"
            ConsoleApplication4.Settings1.Default["User"] = "abc";
            Console.WriteLine(ConsoleApplication4.Settings1.Default["User"]);
            ConsoleApplication4.Settings1.Default.Save();
            Console.Read();
        }
    }
} 
```

将设置保存到一个不起眼的位置：

C:\Users\用户名\AppData\Local\ConsoleApplication4\ConsoleApplication4.exe_Url_acauylh2btl2j4ed0ilz0mujq5aomfmu\1.0.0.0

因此，即使在您的**app.config**中，您在多次运行应用程序后仍会看到“默认用户”：

```
<userSettings>
    <ConsoleApplication4.Settings1>
        <setting name="User" serializeAs="String">
            <value>Default User</value>
        </setting>
    </ConsoleApplication4.Settings1>
</userSettings> 
```

在**User.Config**中，它将是用户的最后一个设置值。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <userSettings>
        <ConsoleApplication4.Settings1>
            <setting name="User" serializeAs="String">
                <value>abc</value>
            </setting>
        </ConsoleApplication4.Settings1>
    </userSettings>
</configuration> 
```

当我第一次运行此代码时，输​​出是“默认用户”，“abc”，第二次运行输出是“abc”“abc”

也许这正是`Save();`你所缺少的。

*如果您的 App.Config 文件与程序一起存储在某处的 Program Files 下，则普通用户（非管理员、非超级用户）将无法写入该文件。*

## 在调试会话之间保留 app.config 中的数据

您必须编写从 PreBuild 事件触发的 exe 或脚本，该事件将 User.Config 设置写回 settings1.settings 文件，然后内置到 App.Config 中。

我不认为你想这样做，因为 User.config 会覆盖 App.Config 并且第二次调试代码时你会得到“abc”“abc”。

我非常有信心这只是`Save()`缺少的。或者应用程序范围设置应该是只读的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T20:35:48.590

我不确定这与您的方法有何不同，但我使用设置文件解决了这个问题。

首先，从项目的“属性”菜单创建设置文件。右键单击解决方案资源管理器中的项目，然后选择“属性”。转到设置选项卡并创建设置文件。创建文件后，您应该会看到一个数据网格，您可以在其中输入名称/类型/范围/值。在此处设置您要使用的所有变量（我不确定您是否可以在运行时创建更多变量，但我不这么认为）。

现在，在代码中，您可以使用位于项目默认命名空间中的 Properties 类。

要读取设置：

```
Properties.Settings.Default.SrcDir; 
```

并保存设置：

```
Properties.Settings.Default.SrcDir = src;
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-04T14:17:30.137

也许您可以使用文件系统在两个文件之间创建符号链接，以便它实际编辑源中的文件。但是我想不出编译器不覆盖配置文件（从而删除链接）的快速解决方案。

至少这种方法不需要您编写解决方法。它也不会影响您要保存设置的方式（例如从默认范围更改为用户范围）。所以只有*在开发*时才有效。

# c++ - 在 C++ 中读取多个 .dat 文件

> ID：15583173
> 
> 赞同：0
> 
> 时间：2013-03-23T03:57:43.797
> 
> 标签：c++

我使用下面的代码读取了一个 .dat 文件并找到了执行时间，效果很好。我尝试构建一个循环来读取多个文件，因为我有 20 多个不同名称的文件（我需要保留它们的名称），但它不起作用。如何开发此代码以读取位于某个文件夹中的所有文件，无论它们有多少？（基于以下代码）

```
#include <Windows.h>
#include <ctime>
#include <stdint.h>
#include <iostream>
using std::cout;
using std::endl;
#include <fstream>
using std::ifstream;

#include <cstring>

/* Returns the amount of milliseconds elapsed since the UNIX epoch. Works on both
 * windows and linux. */

uint64_t GetTimeMs64()
{

 FILETIME ft;
 LARGE_INTEGER li;

 /* Get the amount of 100 nano seconds intervals elapsed since January 1, 1601 (UTC) and copy it
  * to a LARGE_INTEGER structure. */
 GetSystemTimeAsFileTime(&ft);
 li.LowPart = ft.dwLowDateTime;
 li.HighPart = ft.dwHighDateTime;

 uint64_t ret;
 ret = li.QuadPart;
 ret -= 116444736000000000LL; /* Convert from file time to UNIX epoch time. */
 ret /= 10000; /* From 100 nano seconds (10^-7) to 1 millisecond (10^-3) intervals */

 return ret;

}

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = "|";

int main()
{
  // create a file-reading object
  ifstream fin;
  fin.open("promotion.txt"); // open a file
  if (!fin.good()) 
    return 1; // exit if file not found

  // read each line of the file
  while (!fin.eof())
  {
    // read an entire line into memory
    char buf[MAX_CHARS_PER_LINE];
    fin.getline(buf, MAX_CHARS_PER_LINE);

    // parse the line into blank-delimited tokens
    int n = 0; // a for-loop index

    // array to store memory addresses of the tokens in buf
    const char* token[MAX_TOKENS_PER_LINE] = {}; // initialize to 0

    // parse the line
    token[0] = strtok(buf, DELIMITER); // first token
    if (token[0]) // zero if line is blank
    {
      for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
      {
    token[n] = strtok(0, DELIMITER); // subsequent tokens
        if (!token[n]) break; // no more tokens
  }
}

    // process (print) the tokens
    for (int i = 0; i < n; i++) // n = #of tokens
      cout << "Token[" << i << "] = " << token[i] << endl;
    cout << endl;
  }
  uint64_t z = GetTimeMs64();
  cout << z << endl;
  system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:10:18.653

我认为这更容易：

1-如果您将读取文件并将其内容处理到自己的函数中的代码分解出来：
`void process_file( char* filename );`
2-添加一个新函数以列出目录的内容：`char** list_dir( char* dir );`
3-在您的 main() 中组合这两个函数

这使得代码更清晰、更可测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:08:51.723

要在 Windows 上列出目录中的文件，请参阅此链接：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365200(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365200(v=vs.85).aspx)

关于您的代码的注释：

1.  不要`fin.eof()`用来测试输入的结束，看看为什么：[eof of istream in C++](https://stackoverflow.com/questions/8815679/eof-of-istream-in-c)

2.  要读取多个文件，请记住`fin.clear()`之前`fin.close`是否使用相同`fin`来读取多个文件。

更新：

下面的代码打印出目录中的文件名`D:\\Test`。如果您需要子文件夹中的每个文件或文件的绝对路径，请更改`GetFiles`以执行此操作。根据我提供的链接，这非常简单。该代码是在 VS2012 Win7 Pro 上测试的。

```
#include <windows.h>
#include <Shlwapi.h>

#include <iostream>
#include <fstream>
#include <string>
#include <vector>
using namespace std;

#pragma comment(lib, "Shlwapi.lib")

int GetFiles(const string &path, vector<string> &files, const string &wildcard = "\\*")
{
    wstring basepath(path.begin(), path.end());
    wstring wpath = basepath + wstring(wildcard.begin(), wildcard.end());

    WIN32_FIND_DATA ffd;
    HANDLE hFind = INVALID_HANDLE_VALUE;
    DWORD dwError = 0;

    hFind = FindFirstFile(wpath.c_str(), &ffd);

    if (INVALID_HANDLE_VALUE == hFind) {
        // display error messages
        return dwError;
    }

    TCHAR buf[MAX_PATH];
    do {
        if (ffd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) {
            // directory
        } else {
            PathCombine(buf, basepath.c_str(), ffd.cFileName);
            wstring tmp(buf);
            files.push_back(string(tmp.begin(), tmp.end()));
        }
    } while (FindNextFile(hFind, &ffd));

    dwError = GetLastError();
    if (ERROR_NO_MORE_FILES != dwError) {
        // some errors
    }
    FindClose(hFind);
    return dwError;
}

int main()
{
    string path("D:\\Documents\\Visual Studio 2012\\Projects\\SigSpatial2013");
    vector<string> files;
    GetFiles(path, files);
    string line;
    ifstream fin;
    for (int i = 0; i < files.size(); ++i) {
        cout << files[i] << endl;

        fin.open(files[i].c_str());
        if (!fin.is_open()) {
            // error occurs!!
            // break or exit according to your needs
        }

        while (getline(fin, line)) {
            // now process every line
        }

        fin.clear();
        fin.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:17:55.293

我同意封装这一点的建议。在 Windows 上，代码如下所示

```
HANDLE h;
WIN32_FIND_DATA find_data;
h = FindFirstFile( "*.dat", & find_data );
if( h == INVALID_HANDLE_VALUE ) {
    // Error
    return;
}
do {
    char * s = find_data.cFileName;
            // Your code here
} while( FindNextFile( h, & find_data ) );
FindClose( h ); 
```

# javascript - DOM1 Javascript 不工作

> ID：15583176
> 
> 赞同：1
> 
> 时间：2013-03-23T03:58:01.530
> 
> 标签：javascript

我可能这样做是错误的，我首先学习了 Jquery 和简单的东西。参加 javascript 学习 DOM0 和 DOM1 的课程，但无法让它发挥作用。

```
<!DOCTYPE html>

<html lang="en">

<head>
<script type="text/javascript">
     function addBorder(){
          for var i=0; i<document.getElementsByTagName('img').length; i++) {
               document.getElementsByTagName('img')[i].style.border="3px solid red");
          }
     }
</script>
<script type="text/javascript">
     window.onload=addBorder;
</script>
</head>

<body>
<img src="image1.jpg" />
<img src="image2.jpg" />

</body>

</html> 
```

快速输入，如果有任何错别字，请忽略。结果没有错误，也没有活动。

尝试了所有不同的方式，DOM0 document.images...，window.onload=function(){....

总是什么都没有。了解图像在脚本之后加载的基本概念，如果放置在正文中它可以正常工作。但是为什么它不能在 window.onload=? 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:14:31.210

正如 Ryan 指出的那样，您的源代码中有错字（您需要在`var`和之间留一个空格`i`）。

即使这是一门初学者课程，您也可能希望从一开始就养成良好的习惯。通常，应尽可能少地查看 DOM。*每次*调用时，您的函数都会转到 DOM `document.getElementsByTagName('img')`。由于它在 for 循环中，因此可能*很多*。当然，在您的示例中只有两个 img 标签，但请考虑将此脚本应用于真实页面。

触摸 DOM 一次并将结果缓存在变量中通常是个好主意，如下所示：

```
function addBorder() {
      var images = document.getElementsByTagName('img');
      for (var i=0; i < images.length; i++) {
           images[i].style.border = "3px solid red";
      }
} 
```

这样，您只需访问 DOM 一次，然后使用变量`images`（作用域为您的函数）。

此外，您可以（应该）将它们放在 HTML 文档中的相同脚本标记中（因为它们是内联脚本）。而且由于您只调用一个函数，并且在 window.onload 上调用它，因此您可以简化它并将其包装在[立即调用的函数表达式](http://en.wikipedia.org/wiki/Immediately-invoked_function_expression)中（[进一步阅读](https://stackoverflow.com/questions/939386/immediate-function-invocation-syntax)），如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript">

    (function () {
          var images = document.getElementsByTagName('img');
          for (var i=0; i < images.length; i++) {
               images[i].style.border = "3px solid red";
          }
    })();

</script>
</head>

<body>
  <img src="image1.jpg" />
  <img src="image2.jpg" />
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:03:24.050

一旦我正确修复了代码的语法，我就看到了图像上的红色边框：

```
 function addBorder() {
      for (var i=0; i < document.getElementsByTagName('img').length; i++) {
           document.getElementsByTagName('img')[i].style.border = "3px solid red";
      }
 } 
```

# java - junit 测试 Iterable 的相等性

> ID：15583186
> 
> 赞同：5
> 
> 时间：2013-03-23T03:59:10.053
> 
> 标签：java, unit-testing, queue, iterable

我正在尝试为一个`BinarySearchTree`类编写单元测试`keys()`返回一个。`Iterable`它使用另一个名为`Queue`的类，其中键被排队并返回..

然而，队列（第三方类）没有定义任何 equals()。

```
public class BinarySearchTree<Key extends Comparable<Key>,Value> {
    Node root ;

    private class Node{
        private Key key;
        private Value val;
        private Node left;
        private Node right;
        private int N;
        public Node(Key k, Value v,int N) {
            super();
            this.key = k;
            this.val = v;
            this.N = N;
        }
    }

        public Iterable<Key> keys(){
           Queue<Key> q = new Queue<Key>();
           inOrder(root,q);
           return q;
        }
        private void inOrder(Node x,Queue q){
            if(x == null)return;
            inOrder(x.left,q);
            q.enqueue(x.key);
            inOrder(x.right,q);
        }
  ...
} 
```

尝试编写单元测试

```
@Test
public void testKeys(){
    MyBST<String, Integer> st = new MyBST<String, Integer>();
    st.put("S",7);
    st.put("E",2);
    st.put("X",8);

    st.put("A",3);
    st.put("R",4);

    st.put("C",1);

    st.put("H",5);
    st.put("M",6);

    Queue<String> q = new Queue<String>();
    q.enqueue("A");
    q.enqueue("C");
    q.enqueue("E");
    q.enqueue("H");
    q.enqueue("M");
    q.enqueue("R");
    q.enqueue("S");
    q.enqueue("X");

    Iterable<String> actual = st.keys();
    assertEquals(q,actual);
     } 
```

这失败了

```
java.lang.AssertionError: expected: std.Queue<A C E H M R S X > but was: std.Queue<A C E H M R S X >
    at org.junit.Assert.fail(Assert.java:93)
    at org.junit.Assert.failNotEquals(Assert.java:647)
    at org.junit.Assert.assertEquals(Assert.java:128)
    at org.junit.Assert.assertEquals(Assert.java:147)
    at week4.MyBSTTests.testKeys(BSTTests.java:304) 
```

我必须在第三方类中实现 equals() 还是有其他方法可以检查相等性？我能想到的只是从队列 q 中运行一个循环出队并将其与迭代器返回的内容进行比较。我不确定是否有更好的方法..请告知..

```
Iterable<String> actual = st.keys();
Iterator<String> actualit = actual.iterator();
while(actualit.hasNext()){
    String actualkey = actualit.next();
    String exp = q.dequeue();
    assertEquals(actualkey,exp);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:54:48.430

使用 Hamcrest `Matchers.contains`（[在此处](http://marxsoftware.blogspot.com/2013/01/hamcrest-containing-matchers.html)描述）。例如：

```
assertThat(queue1.keys(), Matchers.contains("A", "C", "E", "H", "M", "R", "S", "X")); 
```

这将检查`Iterable`返回的元素，而无需在队列类上实现相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:25:48.250

您可以使用实用程序类 java.util.Arrays。据我所知，Queue 接口有一个 toArray 方法。所以它会是这样的：

```
 assertTrue(Arrays.equals(queue1.toArray(),queue2.toArray())); 
```

由于它是第三方库，您可以使用 apache commons：

```
Object[] o = IteratorUtils.toArray(queue1.iterator());
Object[] o2 = IteratorUtils.toArray(queue1.iterator());
assertTrue(Arrays.equals(o,o2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T00:58:29.557

我就是这样做的。

我将 Iterable 转换为 ArrayList。然后我制作了另一个预期键值的数组列表。这样我就可以使用 assertEquals(arrayList1, arrayList2) 检查两个 arrayLists 是否相等。这是我为测试 preOrder 遍历方法而编写的代码。

```
import static org.junit.Assert.*;
import java.util.ArrayList;

import org.junit.Test;

 public class BSTTest
 {
    BST<Integer, String> binaryTree = new BST<Integer, String>();

   @Test
   public void preOrdertest()
   {
       binaryTree.put(87, "Orange");
       binaryTree.put(77, "Black");
       binaryTree.put(81, "Green");
       binaryTree.put(89, "Blue");
       binaryTree.put(4, "Yellow");
       binaryTree.put(26, "white");
       binaryTree.put(23, "Purple");
       binaryTree.put(27, "Violet");
       binaryTree.put(57, "red");
       binaryTree.put(1, "crimson");

       ArrayList<Integer> testList = new ArrayList<>();

       testList.add(87);
       testList.add(77);
       testList.add(4);
       testList.add(1);
       testList.add(26);
       testList.add(23);
       testList.add(27);
       testList.add(57);
       testList.add(81);
       testList.add(89);

       Iterable<Integer> actual = binaryTree.preOrder();

       ArrayList<Integer> actualList = new ArrayList<>();

       if (actual != null)
       {
            for (Integer e : actual)
            actualList.add(e);
       }

        assertEquals(testList, actualList);

   }

  } 
```

# android - Android TextView 与 WebView 字体渲染

> ID：15583188
> 
> 赞同：5
> 
> 时间：2013-03-23T04:00:35.843
> 
> 标签：android, fonts, webview, textview

我有一个 TextView 直接放在 WebView 上方。我正在尝试使 WebView 中的字体样式与 TextView 中的字体样式相匹配。

我能够使字体大小相同，但字体渲染之间仍然存在细微差别（参见屏幕截图比较）。现在我认为这非常小，但我们的客户能够看到差异并提出质疑。

有什么办法可以消除 TextView 和 WebView 之间的这些渲染差异？如果没有，有人可以解释差异的原因吗？这些差异是否仅仅是因为 WebView 使用了 WebKit，它有自己的字体渲染引擎，与 Android 平台的其余部分分开？

![截图对比](../Images/49b9903066010946a91f87ffce781ebb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:17:20.017

我不确定 TextView，但我知道 WebView 能够在非像素对齐的边界上定位文本，我认为这就是您所看到的。WebView 和 TextView 输出看起来不同，因为它们的位置偏离了小于一个像素的量。

我假设您的客户使用的是低密度设备或眼睛非常敏锐 = )

如果你稍微调整一下文本的位置，它最终应该看起来是一样的。就 WebView 而言，它可能有助于确保关闭所有缩放和重新格式化功能。

# php - 发送邮件并在 24 小时内过期帐户进行注册

> ID：15583189
> 
> 赞同：-1
> 
> 时间：2013-03-23T04:00:38.047
> 
> 标签：php, mysql, cron

我想要这样的功能，

用户将注册到站点并可以访问 24 小时，然后我需要使他们的帐户过期并发送邮件，因为您无法访问更长时间。

是否可以使用 cron 或没有 cron？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:05:38.313

Write the portion of your app that would allow users to register. Once they register, track the date they registered in your MySQL DB. Have a cronjob running every hour to check for accounts that have been registered for 24 hours.

Every account that you find in the DB that has been registered for 24 hours should receive the email you mention via the mail() function.

Once you send the email, set a flag on the account so the next time they attempt to login, they get an error message rather than being able to access the account.

# php - 数据库类，数据访问对象不能使用数据库类的方法

> ID：15583190
> 
> 赞同：0
> 
> 时间：2013-03-23T04:00:52.450
> 
> 标签：php, database, function, database-connection

我创建了数据库类和数据库访问对象，因此我可以以某种方式实现值对象模式。

这是数据库类的一部分及其功能：

```
class Database {

    protected $conn = null;
    private $stmt;

    // create a connection
    public function __construct($dsn, $username, $passwd) {
        try {
            // mysql and pdo
            $this->conn = new PDO($dsn, $username, $passwd); 
            $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  
        } catch (PDOException $e) {
            $this->get_error($e);
        }
    }
} 
```

这个 db 类的一部分是我创建的函数，称为`num_rows`

```
public function num_rows($query) {
    $this->stmt = $this->conn->prepare($query);
    if ($this->stmt) {
        $this->stmt->execute();
        return $this->stmt->rowCount();
    }
} 
```

我也有这个 DAO 类，它可以做你实际看到的事情。

```
class Dao {
    protected $db = null;

    public function __construct() {
        $dbh = new Database('mysql:host=localhost;dbname=doorche', 'root', '');
         $this->db = $dbh->getConnection();
    }
//put your code here
} 
```

例如，当我在另一个类中扩展 DAO 类时，`loginDao`我无法以某种方式访问​​ *num_rows*

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:18:50.547

你需要`inherit Dao`按如下方式上课。

```
class Dao extends Database { 
```

然后在`loginDao`.

```
class loginDao extends Dao { 
```

现在`loginDao`也可以访问`Database`方法，

# javascript - 如何从数组淘汰赛中删除项目

> ID：15583191
> 
> 赞同：2
> 
> 时间：2013-03-23T04:00:53.167
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js 库。我正在尝试使用敲除`arrayRemoveItem`实用程序功能，但它似乎不起作用。这是我的代码：

**JS**

```
function VM()
{
  this.Items = [{id:'1', name:'A'}, 
                {id:'2', name:'B'}, 
                {id:'3', name:'C'}, 
                {id:'4', name:'D'}
               ];

  this.Delete = function(){
    console.log(this.Items);          //before removing

    ko.utils.arrayRemoveItem(this.Items, function(item){
      return item.id == '3';
    });

    console.log(this.Items);          //after removing
  };
} 
```

[**小提琴**](http://jsbin.com/emiqej/1/edit)

如果您在按下删除按钮后检查控制台，则项目 3 不会从阵列中删除。我在这里缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T04:11:45.873

将`arrayRemoveItem`要删除的项目作为第二个参数`ko.utils.arrayRemoveItem(array, itemToRemove)`，因此您需要首先找到对象并将其传递给`arrayRemoveItem`.

尝试

```
function VM()
{
  this.Items = [{id:'1', name:'A'}, 
                {id:'2', name:'B'}, 
                {id:'3', name:'C'}, 
                {id:'4', name:'D'}
               ];

  this.Delete = function(){

    var item;
    ko.utils.arrayForEach(this.Items, function(v) {
      if(v.id == '3'){
        item = v;
      }
    });

    console.log(this.Items);
    ko.utils.arrayRemoveItem(this.Items, item);
    console.log(this.Items);
  };
}

ko.applyBindings(new VM()); 
```

演示：[小提琴](http://jsbin.com/emiqej/2/edit)

# iphone - 难以解析 RSS 提要

> ID：15583194
> 
> 赞同：1
> 
> 时间：2013-03-23T04:01:37.660
> 
> 标签：iphone, ios, objective-c, ipad, cocoa

我正在尝试[使用](http://www.themostunrealbeats.com/?feed=rss2). `NSXMLParser`我很难在文章中找到图片。这是图片在 RSS 提要中的位置。

```
<media:content url="http://themostunrealbeats.files.wordpress.com/2012/03/madeon.png?w=400" medium="image">
    <media:title type="html">madeon</media:title>
</media:content> 
```

具体来说，我想要`http://themostunrealbeats.files.wordpress.com/2012/03/madeon.png`. 然而，在委托方法中`NSXMLParser`，我什么也没找到。

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    if ([element isEqualToString:@"media:content"]) {

        NSLog(@"%@", string);
        [content appendString:string];

    }

} 
```

`string`没有价值。我该如何解析这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T04:26:17.917

```
// NSXMLParser has a following method
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict

// In this method parameter 'attributeDict' will return you all the sub attributes of main attribute.
// In your case its 'url' of Picture.

// I hope this will help you. Check this out. 
```

# iphone - ios中的过滤器数组检查多个属性

> ID：15583195
> 
> 赞同：7
> 
> 时间：2013-03-23T04:01:44.647
> 
> 标签：iphone, ios, search, uisearchbar, nspredicate

我有一组自定义对象。自定义对象如下所示

```
@interface User : NSObject
@property(nonatomic, strong)NSString *user_Id;
@property(nonatomic, strong)NSString *user_Name;
@property(nonatomic, strong)NSString *user_UserName;
@end 
```

我必须过滤检查 2 个属性的数组。也就是说，如果我搜索`a`，那么它应该得到从数组中过滤的用户列表，包含`a`在`user_Name`或中。`user_Id`我怎样才能做到这一点？对于我知道的单个属性[user_Name]

```
NSString *predicateString = @"user_Name MATCHES[c] %@";
NSString *matchString =  [NSString stringWithFormat: @".*%@.*",searchText];
NSPredicate *predicate =[NSPredicate predicateWithFormat:predicateString, matchString];
self.searchResults = [userArray filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:06:31.123

[You can join predicate conditions with `OR`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795), such as:

```
NSString *predicateString = @"(user_Name MATCHES[c] %@) OR (user_Id MATCHES[c] %@)"; 
```

Alternately, you could filter the array by using `indexesOfObjectsPassingTest:` with an appropriate test block and then `objectsAtIndexes:` to get an array of the objects passing the test.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:07:08.463

尝试使用这个谓词字符串

```
NSString *predicateString = @"user_Name MATCHES[c] %@ OR user_Id MATCHES[c] %@"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:06:49.807

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(user_Name== %@) || (user_Id== %@), <name>,  <id>]; 
```

# mysql - 从 MySQL 数据库中删除 ID

> ID：15583198
> 
> 赞同：0
> 
> 时间：2013-03-23T04:02:11.393
> 
> 标签：mysql, database, vb.net

我试图在他/她注销时从数据库中删除用户名。我的代码如下，它不起作用。我认为它可能与连接字符串（数据库，密码）有关

```
Private Sub Button1_Click_1(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Dim Query As String
    Dim con As MySqlConnection = New MySqlConnection("Server=localhost;User ID=root;Password=*Mypassword*;Database=myusers")
    con.Open()
    Query = "Delete FROM users WHERE name  =" + loginuser.Text
    'Table = users
    'Name = Varchar(20)
    'loginuser.text = Name (username)
    Dim cmd As MySqlCommand = New MySqlCommand(Query, con)
    MsgBox(Query)
    Dim i As Integer = cmd.ExecuteNonQuery()
    If (i > 0) Then
        MsgBox("Record is Successfully Deleted")
    Else
        MsgBox("Record is not Deleted")
    End If
    con.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:10:16.127

您没有在 sql 字符串中用引号将名称值括起来，例如：`Delete FROM users WHERE name = 'abcname'`

更改您的代码以使用参数，这是一种干净且安全的方式来传递值，并且在使用字符串参数时您不必担心引号

```
Query = "Delete FROM users WHERE name  = @name"
Dim cmd As MySqlCommand = New MySqlCommand(Query, con)
MySqlCommand.Parameters.AddWithValue("@name",loginuser.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:07:22.610

字符串文字需要用单引号括起来，因此您的查询应该是：

```
Query = "Delete FROM users WHERE name  = '" + loginuser.Text + "'" 
```

将字符串连接到 SQL 语句中也会使您面临 SQL 注入攻击（或者甚至只是考虑有人将“O'Brien”作为登录名）。您应该始终使用参数。

# c# - 为什么我在 Request.Url.PathAndQuery 中收到此错误？

> ID：15583204
> 
> 赞同：0
> 
> 时间：2013-03-23T04:02:56.240
> 
> 标签：c#, asp.net, antixsslibrary

由于我的导师要求我在我的高级项目开发中使用 AntiXss 库，由于网络上缺乏资源，我在使用这个库时遇到了很多困难。我项目的一部分我有一个上传文件功能，用户可以上传文件，上传文件后，他将被重定向到同一页面以查看其他信息。一切正常，但是当我添加 AntiXss 库并仅将其与以下行一起使用时，出现此错误

**（HTTP 400 错误 - 错误请求）**

我不知道为什么。**谁能告诉我为什么我会收到这个错误？以及如何解决？**

**C#代码：**

```
Response.Redirect(Encoder.HtmlFormUrlEncode(Request.Url.PathAndQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:16:11.377

分解您的代码并查看每个步骤：

*   获取传入请求的 URL，并提取路径和查询。
*   通过基于**表单的**编码器运行它
*   重定向到该字符串

你认为基于表单的编码器会做什么来防止 XSS 攻击？

尝试这个：

```
Response.Write(Encoder.HtmlFormUrlEncode("http://www.stackoverflow.com")); 
```

写出什么？尝试将其放在网络浏览器中，您可能会收到 400（或 502）错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:49:08.860

Request.Url.PathAndQuery

```
The above syntax returns `/Cambia3/Temp/Test.aspx?query=arg` 
```

有关更多网址参考，请检查[此](http://www.cambiaresearch.com/articles/53/how-do-i-get-paths-and-url-fragments-from-the-httprequest-object)

HtmlFormUrlEncode 获取字符串并编码为参数。有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.security.antixss.antixssencoder.htmlformurlencode.aspx)

# ruby-on-rails - 如何在 Rails 中调用具有模型范围的静态函数？

> ID：15583209
> 
> 赞同：0
> 
> 时间：2013-03-23T04:03:30.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我不确定如何让它在语法上正常工作。我确实让它像下面这样工作：

```
 scope :out_of_stock, lambda{ |company| get_inventory(company, 'out_of_stock') }
  scope :in_stock, lambda{ |company| get_inventory(company, 'in_stock') }

  def self.get_inventory(company, stock_status)
    StockInventory.find_all_by_....
  end 
```

但是，有没有办法在没有匿名函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:36:14.073

首先，Ruby 中没有静态函数。这`self.get_inventory`是一个类方法，它实际上是`Company`类上的单例实例方法。该`scope`调用本身是一个类方法，它动态定义其他类方法，在本例中为`out_of_stock`和`in_stock`。

其次，很难说出您要做什么，因为您没有包含整个方法，但我假设您正在尝试获取`StockInventory`具有特定公司 ID 和库存状态的实例。

ActiveRecord 允许您使用**finders**，就像您在这里所做的那样，或者更灵活的**关系**，因为它们通常是可链接的，并且因为它们的执行被延迟到绝对必要时，这意味着您可以将它们传递给不同的方法而不打数据库。除非我正在查找具有已知 id 的单个对象，否则我通常会因此而坚持使用关系。

我将做一些假设，因为你的问题不是特别清楚。`Company`如果你定义了and之间的关系`StockInventory`（比如`has_many :stock_inventories`and `belongs_to :company`），你可以使用这个关系作为起点，在`StockInventory`类上定义一个这样的方法：

```
def self.in_stock
  where(stock_status: "in stock") # or whatever
end 
```

请注意，不是将`Company`实例作为参数传递给`Company`最终加载其他类的类方法（这应该是一个危险信号），而是直接在`StockInventory`类或任何`StockInventory`关系上调用它。另外，由于它是一个关系，您可以将其他 ActiveRecord 方法链接到它，即`my_company.stock_inventories.in_stock.limit(10)`.

您需要更改此方法以适合您的特定数据库列和状态，但这很复杂，因为它需要得到。

无论如何，我建议你阅读[Active Record Query Interface](http://guides.rubyonrails.org/active_record_querying.html)指南——一旦你了解了它的工作原理，你可以用它做很多事情。

# jquery - jquery翻转多张图片

> ID：15583211
> 
> 赞同：1
> 
> 时间：2013-03-23T04:03:49.377
> 
> 标签：jquery, html

我正在尝试创建一个函数，我可以调用它来一个接一个地翻转多个图像。关于我做错了什么的想法？提前致谢

```
function flipImage(totCount, flipCount) {

    totCount--;
    var cnt = flipCount;
    cnt++;
    var id = '#flip'+cnt;

    $(id).flip({
        speed:400,
        color: 'red',
        direction: 'rl',
        onAnimation: if (cnt > 0){flipImage(totCount, cnt)},
        onEnd: function () {

            $(id).show(400);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:12:06.280

您不能那样使用`conditions`，而是使用。

```
onAnimation: function(){ 
   if (cnt > 0){flipImage(totCount, cnt)}
}, 
```

# android - android设备没有从本地服务器获取数据

> ID：15583215
> 
> 赞同：1
> 
> 时间：2013-03-23T04:04:35.357
> 
> 标签：android, mysql, httpconnection

在模拟器上测试我的 android 应用程序时，我可以使用 httpconnection 从本地 MySQL 服务器数据库获取数据。但是，在我的三星手机上测试该应用程序时，我无法从我的数据库中获取数据。我的清单文件中是否需要一些参数，或者有人知道我需要做什么才能将数据从本地服务器获取到我的三星手机上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:17:05.163

好吧，我认为您无法从设备访问本地数据库。

如果您想在设备上访问，您应该在线托管您的数据库，并且应该连接互联网以访问该 URL，然后您可能可以访问它。

# javascript - Rails + Javascript + 未捕获的类型错误：对象# has no method I'm using a template that I bought and I'm having this issue: Uncaught TypeError: Object # has no method 'peity' in unicorn.dashboard.js:11 问问题 问问题 2013-03-23T04:04:41.780 605 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm using a template that I bought and I'm having this issue: Uncaught TypeError: Object # has no method 'peity' in unicorn.dashboard.js:11 and this is line 11: unicorn.peity(); On my manifest file I got this: //= require admins/cms/excanvas.min //= require admins/cms/jquery.min //= require admins/cms/jquery.ui.custom //= require admins/cms/jquery.uniform //= require admins/cms/jquery.flot.min //= require admins/cms/jquery.flot.resize.min //= require admins/cms/jquery.dataTables.min //= require admins/cms/jquery.gritter.min //= require admins/cms/jquery.validate //= require admins/cms/jquery.peity //= require admins/cms/jquery.wizard //= require admins/cms/select2.min //= require admins/cms/fullcalendar.min //= require admins/cms/bootstrap.min //= require admins/cms/bootstrap-colorpicker //= require admins/cms/bootstrap-datepicker //= require admins/cms/unicorn //= require admins/cms/unicorn.dashboard //= require admins/cms/unicorn.form_common //= require admins/cms/unicorn.form_validation //= require admins/cms/unicorn.wizard //= require admins/cms/unicorn.interface //= require admins/cms/unicorn.tables //= require admins/cms/unicorn.charts //= require admins/cms/unicorn.calendar This is how the scripts are loaded in the static index.html that came with the template: And this is how my dashboard index scripts are loaded: The weird thing is that unicorn.dashboard is getting loaded after jquery.peity. Another extrange thing is that when I open the index.html that came with the template it doesn't get this error at all. I'm not sure what the problem could be. I been trying for hours to figure this out but I had no luck at all. It would be so helpful if someone could help me out with this. Thanks in advance. I'm not sure whether this will help clarify things, because I'm not sure what you consider to be the problem. Here is a test program that uses BigDecimal, as previously suggested, to display the values of the intermediate answers. At the final step, adding the third copy of 1.0/3 to the sum of two copies, the exact answer is half way between 1.0 and the next double lower than it. In that situation the round-to-even rounding rule picks 1.0. Given that, I think it should round to 1.0, contradicting the question title. Test program: import java.math.BigDecimal; public class Test { public static void main(String[] args) { final double oneThirdD = 1.0/3; final BigDecimal oneThirdBD = new BigDecimal(oneThirdD); final double twoThirdsD = oneThirdD + oneThirdD; final BigDecimal twoThirdsBD = new BigDecimal(twoThirdsD); final BigDecimal exact = twoThirdsBD.add(oneThirdBD); final double nextLowerD = Math.nextAfter(1.0, 0); final BigDecimal nextLowerBD = new BigDecimal(nextLowerD); System.out.println("1.0/3: "+oneThirdBD); System.out.println("1.0/3+1.0/3: "+twoThirdsBD); System.out.println("Exact sum: "+exact); System.out.println("Rounding error rounding up to 1.0: "+BigDecimal.ONE.subtract(exact)); System.out.println("Largest double that is less than 1.0: "+nextLowerBD); System.out.println("Rounding error rounding down to next lower double: "+exact.subtract(nextLowerBD)); } } Output: 1.0/3: 0.333333333333333314829616256247390992939472198486328125 1.0/3+1.0/3: 0.66666666666666662965923251249478198587894439697265625 Exact sum: 0.999999999999999944488848768742172978818416595458984375 Rounding error rounding up to 1.0: 5.5511151231257827021181583404541015625E-17 Largest double that is less than 1.0: 0.99999999999999988897769753748434595763683319091796875 Rounding error rounding down to next lower double: 5.5511151231257827021181583404541015625E-17 javascriptjqueryruby-on-railsruby-on-rails-3.2asset-pipeline 4 1 回答 1 This answer is useful 0 如果您（临时）更改您的清单以完全匹配 index.html 文件，那么一切正常吗？ 如果是这样，我怀疑 peity、独角兽和其他包含的东西（可能是 explorecanvas）之间存在冲突。 于 2013-03-24T20:38:20.107 回答 Related 1 sql - 数据库关系事务和引用表 2 jquery - jquery表单更改，功能无法识别单击事件 1 php - Zend 2，Doctrine 2 实体验证器 1 wpf - 如何根据另一个样式属性设置样式属性值？ 5 javascript - 在 jquery.event.drag 中触发 dragstart 后更新可用的放置目标 0 xcode4 - 打开文件时默认打开XCode 4“隐藏所有问题” 2 php - JavaScript验证后PHP函数不起作用 4 ios - Apple 推荐的哪种方法允许我在 Interface Builder 中连接插座？ 1 mysql - SQL：使用 where 使用参数搜索当前查询 2 c# - 绑定运行次数可变的 RichTextBox Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15583216
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3.2, asset-pipeline

I'm using a template that I bought and I'm having this issue:

```
Uncaught TypeError: Object #<Object> has no method 'peity' in unicorn.dashboard.js:11 
```

and this is line 11:

```
unicorn.peity(); 
```

On my manifest file I got this:

```
//= require admins/cms/excanvas.min
//= require admins/cms/jquery.min
//= require admins/cms/jquery.ui.custom
//= require admins/cms/jquery.uniform
//= require admins/cms/jquery.flot.min
//= require admins/cms/jquery.flot.resize.min
//= require admins/cms/jquery.dataTables.min
//= require admins/cms/jquery.gritter.min
//= require admins/cms/jquery.validate

//= require admins/cms/jquery.peity

//= require admins/cms/jquery.wizard
//= require admins/cms/select2.min
//= require admins/cms/fullcalendar.min
//= require admins/cms/bootstrap.min
//= require admins/cms/bootstrap-colorpicker
//= require admins/cms/bootstrap-datepicker
//= require admins/cms/unicorn

//= require admins/cms/unicorn.dashboard

//= require admins/cms/unicorn.form_common
//= require admins/cms/unicorn.form_validation
//= require admins/cms/unicorn.wizard
//= require admins/cms/unicorn.interface
//= require admins/cms/unicorn.tables
//= require admins/cms/unicorn.charts
//= require admins/cms/unicorn.calendar 
```

This is how the scripts are loaded in the static index.html that came with the template:

```
<script src="js/jquery.min.js"></script>
<script src="js/jquery.ui.custom.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-colorpicker.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/jquery.uniform.js"></script>
<script src="js/select2.min.js"></script>
<script src="js/unicorn.js"></script>
<script src="js/unicorn.form_common.js"></script> 
```

And this is how my dashboard index scripts are loaded:

```
<script src="/assets/admins/cms/excanvas.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.ui.custom.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.uniform.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.flot.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.flot.resize.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.dataTables.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.gritter.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.validate.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.peity.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/jquery.wizard.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/select2.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/fullcalendar.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/bootstrap.min.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/bootstrap-colorpicker.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/bootstrap-datepicker.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.dashboard.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.form_common.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.form_validation.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.wizard.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.interface.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.tables.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.charts.js?body=1" type="text/javascript"></script>
<script src="/assets/admins/cms/unicorn.calendar.js?body=1" type="text/javascript"></script> 
```

The weird thing is that unicorn.dashboard is getting loaded after jquery.peity. Another extrange thing is that when I open the index.html that came with the template it doesn't get this error at all. I'm not sure what the problem could be. I been trying for hours to figure this out but I had no luck at all.

It would be so helpful if someone could help me out with this. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:38:20.107

如果您（临时）更改您的清单以完全匹配 index.html 文件，那么一切正常吗？

如果是这样，我怀疑 peity、独角兽和其他包含的东西（可能是 explorecanvas）之间存在冲突。

# php - 表单动作属性设置为？

> ID：15583227
> 
> 赞同：0
> 
> 时间：2013-03-23T04:07:14.723
> 
> 标签：php, html

什么时候需要从动作属性设置为？像这样

```
<head>
<title></title>
</head>
<body>
<form action="?" method="post">
<div>
<label for="joketext">Type your joke here:</label>
<textarea id="joketext" name="joketext" rows="3" cols="40"></textarea>
</div>
<div><input type="submit" value="Add"/></div>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:15:50.147

设置表单操作的需​​要是，表单可以提交给您指定的任何操作，如果您将操作留空，则表单将提交给自己（它所在的页面）

如果您有一个不可见但处理所有处理的表单处理程序，那么您可以在表单操作中定义处理程序地址 (url)，或者如果您愿意，甚至可以将数据发送到另一个页面。

无论您将其发送到何处，表单处理程序或其本身或其他页面都会处理数据并根据您的选择进行相应处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:21:08.953

如果您使用：

```
<form action="myform.php" method="post"> 
```

然后表单重定向到`myform.php`并且在这个文件中有检查表单的代码。

如果您使用：

```
<form action="myform.php?check" method="post"> 
```

然后表单重定向到，`myform.php`但它也会向`$_GET`数组添加检查。

因此，您可以编写一段仅在数组中有`check`元素时才有效的代码。`$_GET`

```
if(isset($_GET['check']))
{
    // your code here
} 
```

在 PHP 中，后面的每个元素`?`都是数组的成员`$_GET`例如：`http://www.example.com?product_id=1&product_name=acme`表示 $_GET 数组当前有两个元素：

```
product_id
product_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:16:08.230

我想下面的链接应该会有所帮助。 [http://www.w3schools.com/tags/att_form_action.asp](http://www.w3schools.com/tags/att_form_action.asp)

它允许您指定要发布表单数据的位置

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T04:10:35.447

当您希望存储表单数据时，可以将其设置为 php 文件并将数据保存到数据库、文本文件或 xml。

# regex - perl 正则表达式匹配一个固定关键字和另外两个变量关键字

> ID：15583230
> 
> 赞同：1
> 
> 时间：2013-03-23T04:07:54.853
> 
> 标签：regex, perl

我需要在 perl 中编写一个正则表达式来执行以下操作。

起始行是关键字 1（如“这是关键字 1”），结束行是关键字 2（如“此处的结束 1”）或关键字 3（如“此处的结束 2”）。例如，文本文件可能如下所示：

```
*********** this is keyword1***********
*****
..
*******apple***********
******
..
*********** this is keyword1***********
*****
..
*******orange***********
******
..
*********** this is keyword1***********
*****
..
*******orange***********
******
.. 
```

我的任务是匹配那些块

```
*********** this is keyword1***********
*****
..(comment: no "this is keyword1" here)
*******apple*********** 
```

或者

```
*********** this is keyword1***********
*****
.. (comment: no "this is keyword1" here)
*******orange*********** 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:23:47.383

### 原始建议解决方案

请注意，最初的“apple”拼写为“end1 here”，而“orange”最初的拼写为“end2 here”。

```
#!/usr/bin/env perl
use strict;
use warnings;

my $printing = 0;

while (<>)
{
    $printing = 1 if m/this is keyword1/;
    print if $printing;
    $printing = 0 if m/end[12] here/;
} 
```

如果要从输出中排除结束行，则将该测试移到打印上方。如果要从输出中排除开头行，请将该测试移到打印下方。显然，如果您不能像示例中那样轻松组合两个端部模式，则可以简单地使用两行：

```
 $printing = 0 if m/the first end pattern/;
    $printing = 0 if m/a radically different end marker/; 
```

对于样本数据，输出为：

```
*********** this is keyword1***********
*****
..
*******end1 here***********
*********** this is keyword1***********
*****
..
*******end1 here***********
*********** this is keyword1***********
*****
..
*******end2 here*********** 
```

* * *

### 修订要求——修订程序

满足修改后的输出要求的一种简单方法是在 时简单地将行累积到一个字符串中`$printing = 1`：

```
my $saving = 0;
my $result;

while (<>)
{
    $saving  = 1  if m/this is keyword1/;
    $result .= $_ if $saving;
    $saving  = 0  if m/end[12] here/;
} 
```

但是，这不会将整个文件吞入内存，也不会使用`m//g`，因此它不符合为修改后的要求定义的机制。

有了修改后的要求，我认为这段代码或多或少地做了你想要的：

```
#!/usr/bin/env perl
use strict;
use warnings;

my $file;
{
    local $/;
    $file = <>;
}

my $result;
while ($file =~ m/(^[^\n]*this is keyword1.*?end[12] here[^\n]*$)/gms)
{
    print "Found: $1\n";
    $result .= "$1\n";
}

print "Overall set of matched material:\n";
print $result; 
```

显然，如果您不希望找到每个段落，则可以省略循环中的打印。注意使用 non-greedy`.*?`在中间停止扫描，以及使用`^`and`$`与`/m`(multi-line) 修饰符一起拾取整行。

样本数据的输出为：

```
Found: *********** this is keyword1***********
*****
..
*******end1 here***********
Found: *********** this is keyword1***********
*****
..
*******end1 here***********
Found: *********** this is keyword1***********
*****
..
*******end2 here***********
Overall set of matched material:
*********** this is keyword1***********
*****
..
*******end1 here***********
*********** this is keyword1***********
*****
..
*******end1 here***********
*********** this is keyword1***********
*****
..
*******end2 here*********** 
```

* * *

### 重新修订的要求 - 重新修订的解决方案

```
#!/usr/bin/env perl
use strict;
use warnings;

my $file;
{
    local $/;
    $file = <>;
}

my $result;
while ($file =~ m/(^[^\n]*this is keyword1.*?(apple|orange)[^\n]*$)/gms)
{
    print "Found: $1\n";
    $result .= "$1\n";
}

print "Overall set of matched material:\n";
print $result; 
```

样本数据

```
*********** this is keyword1***********
*****
..
*******orange***********
******
..
*********** this is keyword1***********
*****
..
*******orange***********
******
..
*********** this is keyword1***********
*****
..
*******apple***********
****** 
```

样本输出

```
Found: *********** this is keyword1***********
*****
..
*******orange***********
Found: *********** this is keyword1***********
*****
..
*******orange***********
Found: *********** this is keyword1***********
*****
..
*******apple***********
Overall set of matched material:
*********** this is keyword1***********
*****
..
*******orange***********
*********** this is keyword1***********
*****
..
*******orange***********
*********** this is keyword1***********
*****
..
*******apple***********
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:07:04.303

我之前的回答错过了您修改后的要求。这是更新的代码：

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

my $text = do { local $/; <DATA> };
my $pat = qr{
    (
        [^\n]*?
        keyword1
        .*?
        (?:apple|orange)
        [^\n]*?
        \n
    )
}sx;

my $result;

while ($text =~ /$pat/g) {
    $result .= "[[[\n$1]]]\n";
}

say $result;

__DATA__
*********** this is keyword1***********
*****
..(comment: no "this is keyword1" here)
*******apple***********
*****
..
*********** this is keyword1***********
*****
..
*******apple***********
******
..
*********** this is keyword1***********
*****
.. (comment: no "this is keyword1" here)
*******orange***********
*****
..
*********** this is keyword1***********
*****
..
*******orange***********
******
..
*********** this is keyword1***********
*****
..
*******orange***********
******
.. 
```

输出：

```
[[[
***********这是关键字1***********
*****
..（评论：这里没有“这是关键字1”）
*******苹果***********
]]]
[[[
***********这是关键字1***********
*****
..
*******苹果***********
]]]
[[[
***********这是关键字1***********
*****
..（注释：这里没有“这是关键字 1”）
*******橙***********
]]]
[[[
***********这是关键字1***********
*****
..
*******橙***********
]]]
[[[
***********这是关键字1***********
*****
..
*******橙***********
]]]
```

括号用于直观地验证是否匹配了正确的块。

# c# - 更改系统音量

> ID：15583232
> 
> 赞同：2
> 
> 时间：2013-03-23T04:08:08.077
> 
> 标签：c#, wpf, vb.net

我正在尝试从我的 WPF 应用程序控制系统音量，但没有任何变化。我搜索了一些示例，并从以下位置找到了一个示例：[PCVolumeControl](http://www.dreamincode.net/forums/topic/45693-controlling-sound-volume-in-c#/)。

如果我尝试`GetVolume()`它会给我 0 到 100 之间的值。如果我使用`SetVolume(80)`PC 声音不会改变。如果我再试一次，`GetVolume()`它会返回 80。

我不确定这里有什么问题。根据网站，它可能不适用于 64 位，但我在那里没有看到明确的答案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:49:15.520

我`snippet`从[**这个**](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/8308f020-b9e6-472c-aaac-93619a8a5a7d/)链接得到了以下内容，我`tested`在我的本地系统中得到了它，它工作正常，但我不确定它是否适合`WPF`。

问题标记：`VB.NET`

```
Imports System.Runtime.InteropServices
Public Class Form1
            <DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> Private Shared Function SendMessage(ByVal hWnd As IntPtr, ByVal Msg As UInteger, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As IntPtr
            End Function

            Const WM_APPCOMMAND As UInteger = &H319
            Const APPCOMMAND_VOLUME_UP As UInteger = &HA
            Const APPCOMMAND_VOLUME_DOWN As UInteger = &H9
            Const APPCOMMAND_VOLUME_MUTE As UInteger = &H8

            Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
                SendMessage(Me.Handle, WM_APPCOMMAND, &H30292, APPCOMMAND_VOLUME_UP * &H10000)
            End Sub
            Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
                SendMessage(Me.Handle, WM_APPCOMMAND, &H30292, APPCOMMAND_VOLUME_DOWN * &H10000)
            End Sub
            Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
                SendMessage(Me.Handle, WM_APPCOMMAND, &H200EB0, APPCOMMAND_VOLUME_MUTE * &H10000)
            End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T04:35:54.263

了解 MediaElement 属性。

以下是它的链接。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.volume.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.volume.aspx)

改变音量是这样的>>

```
<Slider Minimum="0" Maximum="1" ValueChanged="ValueChanged"/>

private void ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    media.Volume = e.NewValue;
} 
```

希望它有帮助。

# python - python写入错误

> ID：15583236
> 
> 赞同：1
> 
> 时间：2013-03-23T04:08:53.203
> 
> 标签：python, join, for-loop, overwrite

```
def save_friend(filename, friends_list):
    rows = ''
    strings = open(filename, 'Ur')
    for c in strings:
        rows += ','.join(c)
        rows += '\n'

    return strings.write(rows) 
```

试图将列表覆盖`(friends_list)`到文件`(filename)`中。测试时不断收到此错误消息`IOError: File not open for writing`。但是我以前的功能可以很好地打开文件..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T04:13:08.220

`'w'`如果要打开文件进行写入，则必须使用该模式。由于您已经使用 '\n' 作为换行符，因此您可以摆脱该`'U'`模式。

# node.js - express.js + mongodb 服务器的干净关闭（使用 node.js）

> ID：15583237
> 
> 赞同：2
> 
> 时间：2013-03-23T04:08:57.813
> 
> 标签：node.js, mongodb, express, shutdown

我有使用 express.js 和 mongodb 作为数据存储的 node.js 网络服务器。此服务器由 控制`runit`，我正在尝试实现一种优雅关闭服务器的方法。

我正在为 and 实现信号处理程序`SIGINT`，`SIGTERM`并且我知道您可以通过调用`.close()`由`createServer()`. 到目前为止，一切都很好。

但是，即使没有更多请求即将出现，系统中可能已经有许多请求需要完成，然后我才能关闭数据库。

我正在使用 mongodb ReplicaSet，我认为如果我立即调用`db.close()`，其中一些请求可能会以某种方式失败。是否有某种方法可以以允许挂起的数据库查询完成的方式关闭数据库，或者我是否必须手动设置一个 +/- 计数器来查看有多少“活动”查询处于挂起状态，然后等待关闭直到它达到 0 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T16:41:34.507

您必须手动确保您处于干净状态才能关闭，因为驱动程序不会在关闭之前等待清除剩余操作。

随时为该功能登记一张票

[https://github.com/mongodb/node-mongodb-native/issues/](https://github.com/mongodb/node-mongodb-native/issues/)

# c++ - QString 和 stdstring 组合在 std::stringstream 中不起作用 - 编译错误

> ID：15583239
> 
> 赞同：1
> 
> 时间：2013-03-23T04:10:08.053
> 
> 标签：c++, stringstream, stdstring, qstring, ostringstream

```

```
#include <iostream>
#include <sstream>
#include <QString>
class Printer {
public:
    inline std::ostream& operator<<(const std::string& str) {
    stream << str;
    return stream;
    }
    inline std::ostream& operator<<(int numb) {
    stream << numb;
    return stream;
    }
    inline std::ostream& operator<<(const QString& str) {
    stream << str.toStdString();
    return stream;
    }
    virtual ~Printer(void) {
    std::cout << stream.str();
    }

private:
    std::stringstream stream;
};

int main(void)
{
    QString qstring("qstring");
    std::string stdstring("std::string");

    Printer() << qstring << stdstring << 1;   // Works like charm
    Printer() << stdstring << qstring << 1;   // Doesnt work :(

    return 0;
} 
```

```

任何人都可以看看上面的代码并告诉我主要方法中的问题是什么我有评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:52:10.080

对于您的原始代码

```
Printer() << stdstring << qstring 
```

等于

```
(Printer().operator<<(stdstring)).operator<<(qstring) 
```

你可以在这里看到问题，

```
Printer() << stdstring 
```

将返回 a `ostream &`，然后您传递`QString`给`ostream`. 我认为您应该返回`Printer`流以外的内容。

```
class Printer {
public:

    virtual ~Printer(void) {
        std::cout << o.str();
    }

    std::stringstream o;
};

Printer &operator<<(Printer &p, const std::string &s)
{
    p.o << s;
    return p;
}

Printer &operator<<(Printer &p, const QString &s)
{
    p.o << s.toStdString();
    return p;
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QString qstring("qstring");
    std::string stdstring("std::string");
    Printer p;

    p << stdstring << qstring;

    return a.exec();
} 
```

# jquery - 在此函数中使用带有数据属性的 jQuery.contains() 方法而不是 find()

> ID：15583245
> 
> 赞同：3
> 
> 时间：2013-03-23T04:10:59.983
> 
> 标签：jquery, contains, custom-data-attribute

如何更改此功能以使用该`jQuery.contains()`方法而不是`find()`？

我正在使用该函数按各种属性（即颜色、产品类别、场合等）过滤服装，而该函数目前仅返回完全匹配。由于项目通常具有多个属性值（即不止一种颜色），因此我想使用`contains()`而不是`find()`，但我无法弄清楚`contains()`与 data-attributes一起使用的正确语法

我在这里发布了一个简单的函数示例：http: [//jsfiddle.net/chayacooper/WZpMh/5/](http://jsfiddle.net/chayacooper/WZpMh/5/)

```
 $('#filterStyleOptions li a').click(function () {
        var attrStyle = $(this).data('style');
        $('#filterStyleOptions li').removeClass('active');
        $(this).parent().addClass('active');
        if (attrStyle == 'All') {
            $('#content').find('li').show();
        } else {
            // $('#content').find('li').hide();
            $('#content').find('li:not([data-style="' + attrStyle + '"])').hide();
            $('#content').find('li[data-style="' + attrStyle + '"]').show();
        }
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T04:14:12.600

`jQuery.contains`您对包含*选择器语法*感到困惑：

```
$('#content').find('li[data-style*="' + attrStyle + '"]').show(); 
```

而`*=`不是`=`意味着包含。您也可以使用`~=`仅查找整个单词，这更有可能是您想要的。所有这些的文档都在这里：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# android - 适用于 Android 的 Canny 边缘检测器

> ID：15583248
> 
> 赞同：1
> 
> 时间：2013-03-23T04:11:23.190
> 
> 标签：android

我正在尝试在我的 Android 应用程序中使用 Tom Gibaras 实现（已更改为 Android）来实现精明的边缘检测算法。该应用程序使用相机拍摄照片，相机工作正常并拍摄照片，问题出在我想将它传递给算法并显示结果时。而不是处理图像并检测边缘然后显示，应用程序返回到主屏幕 下面的代码是我到目前为止的活动。我可以提供任何需要的额外代码，你能帮我吗？

```
/**
 * ShootActivity demonstrates capturing camera images
 * - user presses button to capture an image using the device camera
 */
public class ShootActivity extends Activity {
public static final int ACTION_TAKE_PHOTO_B = 1;

public String mCurrentPhotoPath;
public static final String BITMAP_STORAGE_KEY = "viewbitmap";
public static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY = "imageviewvisibility";
public ImageView mImageView;
public Bitmap mImageBitmap;
public static final String JPEG_FILE_PREFIX = "IMG_";
public static final String JPEG_FILE_SUFFIX = ".jpg";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mImageView = (ImageView) findViewById(R.id.imageView1);
    mImageBitmap = null;

    Button picBtn = (Button) findViewById(R.id.btnIntend);
    setBtnListenerOrDisable( 
            picBtn, 
            mTakePicOnClickListener,
            MediaStore.ACTION_IMAGE_CAPTURE
    );

}
/**
 * Click method to handle user pressing button to launch camera
 */

Button.OnClickListener mTakePicOnClickListener = 
        new Button.OnClickListener() {
        public void onClick(View v) {
            dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
        }
    };

public File createImageFile() throws IOException {
    // Create an image file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
    //File albumF = getAlbumDir();
    File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX);
    return imageF;
}

public File setUpPhotoFile() throws IOException {

    File f = createImageFile();
    mCurrentPhotoPath = f.getAbsolutePath();

    return f;
}

public void setPic() {

    /* There isn't enough memory to open up more than a couple camera photos */
    /* So pre-scale the target bitmap into which the file is decoded */

    /* Get the size of the ImageView */
    int targetW = mImageView.getWidth();
    int targetH = mImageView.getHeight();

    /* Get the size of the image */
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    /* Figure out which way needs to be reduced less */
    int scaleFactor = 2;
    if ((targetW > 0) || (targetH > 0)) {
        scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
    }

    /* Set bitmap options to scale the image decode target */
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    /* Decode the JPEG file into a Bitmap */
    mImageBitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    CannyEdgeDetection detector = new CannyEdgeDetection();
    detector.setLowThreshold(0.5f);
    detector.setHighThreshold(1f);
    detector.setSourceImage(mImageBitmap);
    detector.process();
    Bitmap edges = detector.getEdgesImage();
    /* Associate the Bitmap to the ImageView */
    mImageView.setImageBitmap(edges);
    mImageView.setVisibility(View.VISIBLE);
}

public void galleryAddPic() {
        Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
        File f = new File(mCurrentPhotoPath);
        Uri contentUri = Uri.fromFile(f);
        mediaScanIntent.setData(contentUri);
        this.sendBroadcast(mediaScanIntent);
}

public void dispatchTakePictureIntent(int actionCode) {

    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

        File f = null;

        try {
            f = setUpPhotoFile();
            mCurrentPhotoPath = f.getAbsolutePath();
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
        } catch (IOException e) {
            e.printStackTrace();
            f = null;
            mCurrentPhotoPath = null;
        }

    startActivityForResult(takePictureIntent, 1102);
}
public void handleBigCameraPhoto()
{
    if (mCurrentPhotoPath != null) 
    {
        setPic();
        galleryAddPic();
        mCurrentPhotoPath = null;
    }
}
/**
 * Handle user returning from capturing the image
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if(requestCode == 1102 && resultCode == Activity.RESULT_OK)
    {
        if(data != null)
        {
        handleBigCameraPhoto();
        }
    }

}
@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);
    outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);
    mImageView.setImageBitmap(mImageBitmap);
    mImageView.setVisibility(savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? ImageView.VISIBLE : ImageView.INVISIBLE);
}
public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
        packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
}

public void setBtnListenerOrDisable( 
        Button btn, 
        Button.OnClickListener onClickListener,
        String intentName
) {
    if (isIntentAvailable(this, intentName)) {
        btn.setOnClickListener(onClickListener);            
    } else {
        btn.setText( 
            getText(R.string.cannot).toString() + " " + btn.getText());
        btn.setClickable(false);
    }
} 
```

}

```
03-27 02:47:37.310: E/AndroidRuntime(6513): FATAL EXCEPTION: main
03-27 02:47:37.310: E/AndroidRuntime(6513): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1102, result=-1, data=null} to activity {com.example.f_y_p/com.example.f_y_p.ShootActivity}: java.lang.NullPointerException
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3182)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3225)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.app.ActivityThread.access$1100(ActivityThread.java:140)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1275)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.os.Looper.loop(Looper.java:137)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at dalvik.system.NativeStart.main(Native Method)
03-27 02:47:37.310: E/AndroidRuntime(6513): Caused by: java.lang.NullPointerException
03-27 02:47:37.310: E/AndroidRuntime(6513):     at com.example.f_y_p.CannyEdgeDetection.setSourceImage(CannyEdgeDetection.java:75)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at com.example.f_y_p.ShootActivity.setPic(ShootActivity.java:114)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at com.example.f_y_p.ShootActivity.handleBigCameraPhoto(ShootActivity.java:153)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at com.example.f_y_p.ShootActivity.onActivityResult(ShootActivity.java:166)
03-27 02:47:37.310: E/AndroidRuntime(6513):     at android.app.Activity.dispatchActivityResult(Activity.java:5390)    
 032702:47:37.310:E/AndroidRuntime(6513):atandroid.app.ActivityThread.deliverResults(ActivityThread.java:3178)
03-27 02:47:37.310: E/AndroidRuntime(6513):     ... 11 more 
```

03-27 02:47:48.535: I/Process(6513): 发送信号。PID：6513 SIG：9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:10:40.827

**崩溃**：

由于发生崩溃，您的应用程序返回主屏幕。崩溃可能是由于`NullPointerException`.

可能是因为这条线：

```
Bitmap mBitmap = (Bitmap) data.getExtras().get("data"); 
```

**日志猫**：

您可以通过查看 LogCat 输出来准确确定崩溃发生的位置。请发布 LogCat 输出或只是扫描它并确定应用程序崩溃的位置。

**照片位置**：

现在是坏消息。您无法`Extras` `Bundle`以您尝试的方式获取从相机拍摄的照片。此函数最多会返回一个不适合您的图像处理算法的小缩略图。您的图像更有可能位于您指定的位置`outputFileUri`。

**如何捕获和可选地从图库中选择**：

请参阅此帖子：[允许用户为图像选择相机或图库](https://stackoverflow.com/questions/4455558/allow-user-to-select-camera-or-gallery-for-image/12347567#12347567)。寻找标题为：“*如何启动单个 Intent 以从画廊或相机中选择图像，或任何注册浏览文件系统的应用程序*”的答案。您将不得不使用此方法或类似方法从相机获取图像的路径。

**规模**：

此外，您还必须处理另一个问题。很可能无法打开`Bitmap`图像的单个全尺寸表示。它太大了，无法放入 Android 设备的可用堆内存中。因此，您必须打开图像的缩小版本。[幸运的是，使用BitmapFactory.decodeFile(String pathName, BitmapFactory.Options opts)](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String)做到这一点并不难。

例子：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 4; // Arbitrary, your mileage may vary.
return BitmapFactory.decodeFile(path, options); 
```

您可以使用 将图像缩小 1、2、3 等倍`inSampleSize`。甚至还有一些计算方法，`inSampleSize`例如将`Bitmap`以下内容保持在特定的字节大小。

# actionscript-3 - ActionScript 3 中的 hitTestObject 问题

> ID：15583250
> 
> 赞同：0
> 
> 时间：2013-03-23T04:11:35.040
> 
> 标签：actionscript-3, flash, actionscript, action

我只是试图遍历子弹和敌人数组的两个数组，然后我对两者都执行 hitTestObject 但它似乎不起作用，直到敌人真正靠近玩家或子弹。这是我的代码对不起我的代码很草率`

```
// ******* IMPORTS *****
import flash.events.MouseEvent;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.events.MouseEvent;
import flash.display.MovieClip;
import flash.events.KeyboardEvent;

//*****VARIABLES****

var leftPressed:Boolean = false;
var rightPressed:Boolean = false;
var upPressed:Boolean = false;
var shootDown:Boolean = false;

var ySpeed:int = 0;
var xSpeed:int = 0;

var scrollX:int = 0;
var scrollY:int = 0;

var speedConstant:int = 5;

var friction:Number = 0.6;

var level:Number = 1;

var bullets:Array;
var container_mc:MovieClip; 
var enemies:Array;
var tempEnemy:MovieClip;

// BUTTON EVENTS EITHER CLICKED OR NOT

left_btn.addEventListener(MouseEvent.MOUSE_DOWN, moveLeft);
right_btn.addEventListener(MouseEvent.MOUSE_DOWN, moveRight);
up_btn.addEventListener(MouseEvent.MOUSE_DOWN, moveUp);
shoot_btn.addEventListener(MouseEvent.MOUSE_DOWN, shootPressed);

left_btn.addEventListener(MouseEvent.MOUSE_UP, leftUp);
right_btn.addEventListener(MouseEvent.MOUSE_UP, rightUp);
up_btn.addEventListener(MouseEvent.MOUSE_UP, upUp);

stage.addEventListener(Event.ENTER_FRAME, makeEnemies);

player.gotoAndStop('still');

stage.addEventListener(Event.ENTER_FRAME,onenter);

function onenter(e:Event):void{
    if (rightPressed == true && leftPressed == false){
        player.x += 8;
        player.scaleX = 1;
        player.gotoAndStop("walking");
        cloud.x -= 8;

    } else if (leftPressed == true && rightPressed == false){
        player.x -= 8;
        player.scaleX = -1;
        player.gotoAndStop('walking');
        cloud.x += 8;

   } else if(upPressed == true && leftPressed == false && rightPressed == false){

       }
        else{  
        rightPressed = false;
        leftPressed = false;
        player.gotoAndStop('still')}

}
// **** MOVEMENT CONTROLS *********

function shootPressed(e:MouseEvent):void{
    shootDown = true;
    if(shootDown == true){
        fireBullet();
        testCollisions();
        }

    }

function fireBullet():void
{
    var playerDirection:String;
    if(player.scaleX < 0){
        playerDirection = "left";
    } else if(player.scaleX > 0){
        playerDirection = "right";
    }
    var bullet:Bullet = new Bullet(player.x, player.y, playerDirection);
    bullets = new Array();
    bullet.y = 288;
    stage.addChild(bullet);
    bullets.push(bullet);
    trace(bullets);

}

// BUTTON FUNCTIONS

function moveLeft(e:MouseEvent):void
{
    if(MouseEvent.MOUSE_DOWN){
    leftPressed = true;
    }else if (MouseEvent.MOUSE_UP) {
        leftPressed = false;
        }

}
function moveRight(e:MouseEvent):void
{
    if (MouseEvent.MOUSE_DOWN){
    rightPressed = true;
    }else if (MouseEvent.MOUSE_UP){
        rightPressed = false;
        }

}
function moveUp(e:MouseEvent):void
{
    if(MouseEvent.MOUSE_DOWN){
        upPressed = true;
        } else if (MouseEvent.MOUSE_UP) {
            upPressed = false;
            }

}

function leftUp(e:MouseEvent):void
{
    leftPressed = false;
}
function rightUp(e:MouseEvent):void
{
    rightPressed = false;
}
function upUp(e:MouseEvent):void
{
    upPressed = false;
}

enemies = new Array();

//Call this function for how many enemies you want to make...
function makeEnemies(e:Event):void
{
    var chance:Number = Math.floor(Math.random() * 60);
if (chance <= 2){

    //Make sure a Library item linkage is set to Enemy...
    tempEnemy = new enemy();
    tempEnemy.speed = 80;
    tempEnemy.x = Math.round(Math.random() * stage.stageWidth) * -10;
    addChild(tempEnemy);
    enemies.push(tempEnemy);
    moveEnemies();
    }
}

function moveEnemies():void
{
    var tempEnemy:MovieClip;
    for (var i:int =enemies.length-1; i>=0; i--)
    {
        tempEnemy = enemies[i];
        tempEnemy.x += tempEnemy.speed;
        tempEnemy.y = 285;
    }
}

//Check for collisions between an enemies array and a Lasers array
function testCollisions():void
{

    var tempEnemy:MovieClip;
    var tempLaser:MovieClip;

    Enemy:for (var i:int=enemies.length-1; i >= 0; i--)
    {
        tempEnemy = enemies[i];
        for (var j:int=bullets.length-1; j>=0; j--)
        {
            tempLaser = bullets[j];
            if (tempLaser.hitTestObject(tempEnemy))
            {
                removeChild(tempEnemy);
                trace("BULLET HIT");
                break Enemy;
            } else if(tempEnemy.hitTestObject(player)){
                removeChild(tempEnemy);
                trace("HIT PLAYER");
                }
        }
    }
} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:27:34.620

看起来好像您只是在按下拍摄按钮时检查碰撞，这可以解释为什么它没有快速发生。我怀疑您想改为运行`testCollisions`每一帧：

```
stage.addEventListener(Event.ENTER_FRAME, testCollisions); 
```

# primefaces - Primefaces p：动态加载时的树

> ID：15583253
> 
> 赞同：0
> 
> 时间：2013-03-23T04:12:03.357
> 
> 标签：primefaces

我在一个 xhtml 中使用 p:tree，它动态地包含在另一个 xhtml 的 tabview 中。当我们交替更改选项卡时，树扩展不起作用。我无法通过单击节点旁边的图标来展开树。

**注意：**或者它不起作用。仅当 index.xhtml 中的 tabview 的 dynamic="true" 和 cache="false" 时才会出现问题。下面是完整的代码，使用该代码可以轻松重现该场景。

当我在项目的许多地方使用 p:tree 时，如果这是一个错误，我要求任何人至少提供一个临时解决方法。我已经在 primefaces 论坛上发布了这个。我在 Tomcat 7.0 上使用 Primefaces 3.5 和 JSF

**索引.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui">
   <h:head></h:head>
   <h:body>
      <p:tabView dynamic="true" cache="false">
         <p:tab title="One">
            <ui:include src="/one.xhtml" />
         </p:tab>
         <p:tab title="two" />
      </p:tabView>
   </h:body>
</html> 
```

**一个.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui">
   <h:head>
   </h:head>
   <h:body>
       <p:tree widgetVar="treeStructure" value="#{treeBean.root}" var="node" selectionMode="single" id="tree">
           <p:treeNode>
               <h:outputText value="#{node}" />
           </p:treeNode>
       </p:tree>
   </h:body>
</html> 
```

**树豆.java**

```
@ManagedBean
@SessionScoped
public class TreeBean {
   private TreeNode root;

   public TreeNode getRoot() {
      return root;
   }
   public void setRoot(TreeNode root) {
      this.root = root;
   }
   public TreeBean() {
      root = new DefaultTreeNode("Root", null);
      TreeNode node0 = new DefaultTreeNode("Node 0", root);
      TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:24:17.770

找到了解决方案。这很简单，但很困难。删除**one.xhtml**`<h:head></h:head>`中不必要的标签，它正在重新加载已加载且非常可用的所需 js 文件。只需将标签始终保留在主页中。这里是**index.xhtml**。**`<h:head></h:head>`**

# javascript - 在 javascript 中替换 TextBox 值

> ID：15583255
> 
> 赞同：0
> 
> 时间：2013-03-23T04:12:15.313
> 
> 标签：javascript, asp.net

我遇到了一个场景，我需要将 Textbox 的值存储在 TextBox1 的 OnChange 事件中的会话变量中。

如何将 x 的内容存储在 Session Variable 中。

//JavaScript 函数 TextBox1_TextChanged() {

```
 var x = document.getElementById("TextBox1").value;

     var SesVar = "'<%= Session["HitCount"] = x  %>'";

     alert(SesVar); 
```

// HTML

```
 <asp:TextBox ID="TextBox1"  Name="TextBox1"  runat="server"    
  onchange="TextBox1_TextChanged()"></asp:TextBox> 
```

请建议如何解决上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:17:17.730

你不能这样做。由于页面来自服务器，因此首先执行服务器代码，然后客户端代码负责其余的工作。如果您需要做您打算做的事情，那么在表单中创建一个具有该值的隐藏元素并通过 GET 或 POST 全局变量获取该元素并将它们存储在会话中。

```
<form method="get" action="destination.asp">
    <input id="tb1value" name="test" visibility="hidden"></input>
</form> 
```

一旦您提交，我们使用*javascript（或 js 库的 jquery）*通常我们将所需的值放入该隐藏值并发送到服务器。

在您的情况下，您只需要直接使用文本框，表单就可以完成这项工作。

[本](http://www.tizag.com/aspTutorial/aspForms.php)教程可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:23:22.143

你不能直接设置它。
有两种方法可以做到这一点。

## 第一组`AutoPostBack to true`

如下

```
<asp:TextBox ID="TextBox1"  Name="TextBox1"  runat="server" AutoPostBack='true'    
 onchange="TextBox1_TextChanged"></asp:TextBox> 
```

并在 C#（后面`TextBox1_TextChanged`的代码）中编写代码以在会话中设置它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:32:29.877

我找到了我的问题的解决方案。

```
 function TextBox1_TextChanged() {
       <%
          // c# code to store value runtime in session variable . 

          Session["HitCount1"] = TextBox1.Text ;

       %>

     }

   <body>
    <form id="form1" runat="server">
    <div>
         <%
  // C# code to retrieve session variable value .

    string x = null;
    x = Session["HitCount1"].ToString().Trim();

  if ((x.Equals(null)) || (x.Equals("")))
   { 
     // Session Variable is either empty or null .
     TextBox1.Text = ""; 

   } 
   else 
   {
     TextBox1.Text = Session["HitCount1"].ToString();
   }

          %>

<asp:TextBox ID="TextBox1"  Name="TextBox1"  runat="server" 
 AutoPostBack='true'  onchange="TextBox1_TextChanged()"></asp:TextBox>

 </form>
  </body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T06:36:06.297

// 我找到了另一个使用 cookie 的解决方案。

// test.aspx 代码

```
 <script language="javascript" type="text/javascript">

function writeCookie(name,value,days) {
    var date, expires;
    if (days) {
        date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires=" + date.toGMTString();
            }else{
        expires = "";
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var i, c, ca, nameEQ = name + "=";
    ca = document.cookie.split(';');
    for (i = 0; i < ca.length; i++) 
       {
            c = ca[i];
            while (c.charAt(0)==' ') {
                c = c.substring(1,c.length);
            }
            if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length,c.length);
            }
       }
    return '';
}

function restore(){
    var sId = readCookie('sessionId');
    document.getElementById("TextBox1").value = sId ;
}

function backup() {

      var sId = document.getElementById("TextBox1").value;
      writeCookie('sessionId', sId, 3);
}

function getMyvalSession() {
            var ff = "Loading Value";
           return ff;
}

function TextBox1_TextChanged() {
          backup();
}

</script>

<body onload="restore()">

    <form id="form1" runat="server">
    <div>

         <asp:TextBox ID="TextBox1" Name="TextBox1" runat="server" 
          AutoPostBack="True" onchange="TextBox1_TextChanged()" ></asp:TextBox>

    </div>
    </form>
</body> 
```

// test.aspx.cs 代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
         Loading();
    }

    void Loading (){

        String csname = "OnSubmitScript";
        Type cstype = this.GetType();

        // Get a ClientScriptManager reference from the Page class.
        ClientScriptManager cs = Page.ClientScript;

        // Check to see if the OnSubmit statement is already registered.
        if (!cs.IsOnSubmitStatementRegistered(cstype, csname))
        {
            string cstext = " document.getElementById(\"TextBox1\").value = getMyvalSession()  ; ";
            cs.RegisterOnSubmitStatement(cstype, csname, cstext);
        }

       } 
```

# javascript - 正则表达式如果存在子字符串则匹配字符串的另一部分

> ID：15583257
> 
> 赞同：2
> 
> 时间：2013-03-23T04:12:59.293
> 
> 标签：javascript, regex, yui, yui3

我正在使用[YUI3 库](http://yuilibrary.com)并使用[过滤器](http://yuilibrary.com/yui/docs/api/classes/config.html#property_filter)来匹配和替换部分 URL。

因为过滤器不是很灵活，我只能提供一个正则表达式进行搜索，然后提供一个字符串来替换匹配项：

```
filter: {
    searchExp : "-min\\.js",
    replaceStr: "-debug.js"
} 
```

就我而言，我有一个如下所示的 URL：

```
http://site.com/assets/js?yui-3.9.0/widget-base/assets/skins/sam/widget-base.css&yui-3.9.0/cssbutton/cssbutton-min.css 
```

`/assets/js`如果有`.css`文件，我想匹配。如果参数包含 CSS 文件，那么它将始终只包含 CSS 文件。

到目前为止，我已经写了一个小正则表达式来检查最后是否存在`.css`：

```
.*\.css$ 
```

但是，现在，如果我们有匹配，我想`/assets/js`作为匹配返回。这是正则表达式可行的吗？

就个人而言，我宁愿用一个简单的函数和一个简单的 if/else 来完成，但由于限制（我只能使用正则表达式），我需要找到一个正则表达式解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:38:16.163

这有点被破解了，但应该可以完成这项工作：

```
var t = new RegExp( "/assets/js(([^\\.]*\\.)*[^\\.]*\\.css)$" )

document.write( "http://site.com/assets/js?yui-3.9.0/widget-base/assets/skins/sam/widget-base.css&yui-3.9.0/cssbutton/cssbutton-min.css".replace( t, "/newthing/$1" ) ); 
```

本质上，它搜索`/assets/js`，然后是任何字符，然后是`.css`. 如果整个内容匹配，它将用新文本替换它，并在其后包含匹配的模式（从第一个括号开始）。之前的所有`/assets`内容都不包含在匹配中，因此不需要包含在内。

我想你的图书馆在`replace`内部使用，所以这些字符串应该可以工作。具体来说，

```
"/assets/js(([^\\.]*\\.)*[^\\.]*\\.css)$"
"/newthing/$1" 
```

我不太确定你想对结果做什么，但这允许你更改文件夹并添加后缀（以及首先检查两个标记的存在）。要添加后缀，请将替换更改为：

```
"/assets/js$1-mysuffix" 
```

# c# - 排序下拉列表集合视图 wpf

> ID：15583265
> 
> 赞同：0
> 
> 时间：2013-03-23T04:14:58.907
> 
> 标签：c#, wpf

有一个数据绑定到 ObservableCollection 的 ComboBox。一切都很好，直到人们想要对内容进行分类。我曾尝试使用 sortdescription，但这里出了点问题。请帮助 XAML

```
<ComboBox Margin="10,0,0,0" FontSize="16" Height="30" Width="200" 
                                        ItemsSource="{Binding Path=NationalityDropDownList}" 
                                        DisplayMemberPath="Description"
                                        SelectedValuePath="Code" 
                                        SelectedIndex="{Binding Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Path=SelectedIndex}"
                                        SelectedValue="{Binding Path=SelectedNationality, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Text="0">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="SelectionChanged">
                                        <i:InvokeCommandAction Command="{Binding UpdateNationalityCodeCommand}" 
                                                CommandParameter="{Binding Path=SelectedIndex}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>

CODE BEHIND

/// <summary>
        /// NationalityDropDownList 
        /// </summary>
        private CollectionView nationalityDropDownList;

        /// <summary>
        /// Gets or Sets the NationalityDropDownList
        /// </summary>
        public CollectionView NationalityDropDownList
        {
            get
            {
                SortDescription sd = new SortDescription("Description", ListSortDirection.Ascending);

                nationalityDropDownList.SortDescriptions.Add(sd);

                return nationalityDropDownList;
            }

            set
            {
                if (NationalityDropDownList != value)
                {

                    nationalityDropDownList = value;
                    RaisePropertyChanged(() => NationalityDropDownList);
                }

            }
        }

        /// <summary>
    /// Updates the Nationality Drop Down List information
    /// </summary>
    private void UpdateNationalityDropDownList()
    {
        // TODO: Currently hardcoded for Focus Group
        IList<Nationality> list = new List<Nationality>();
        Nationality nationality = new Nationality();
        // TODO : This code should go through the hibernate Code table to read the list of Nationality.
        IEnumerable<Code> nationalityList = localCodeLibrary.FindAllNationalities();

        nationality.Code = string.Empty;
        nationality.Description = "";
        list.Add(nationality);

        foreach (Code national in nationalityList)
        {
            nationality.Code = national.Id.Code;
            nationality.Description = national.Description;
            list.Add(nationality);
        }
        //nationalityDropDownList.SortDescriptions.Add(new SortDescription(nationality.Description, ListSortDirection.Ascending));
        NationalityDropDownList = new CollectionView(list);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:23:19.060

您`Items`在添加时丢失了`SortDescription`，试试这个：

```
 SortDescription sd = new SortDescription("Description", ListSortDirection.Ascending);
 nationalityDropDownList.Items.SortDescriptions.Add(sd); 
```

并确保您要根据`Description`或对项目进行排序`Content`

# c# - XNA 模拟试用模式不工作

> ID：15583267
> 
> 赞同：0
> 
> 时间：2013-03-23T04:15:24.103
> 
> 标签：c#, windows-phone-7, xna, windows-phone, trial

由于某种原因，XNA 中的模拟试用模式功能没有抛出任何错误，但绝对没有任何效果。

我在构造函数中这样调用它：

```
 public Game1()
        {
#if DEBUG
            Guide.SimulateTrialMode = true;
            Debug.WriteLine("Set trial mode");
#endif
... 
```

然后我尝试从这样的初始化函数中读取它，以便我最终可以告诉它是否创建一个广告组件：

```
 protected override void Initialize()
    {
        Debug.WriteLine("Is trial: " + Guide.IsTrialMode);
    ... 
```

然后，在我的调试控制台中，我收到一条奇怪的消息，即 DEBUG 中的代码块确实运行了，但由于某种原因，没有模拟 tiral 模式。这是两条重要的线：

```
Set trial mode
Is trial: False 
```

你们中的任何人都知道可能导致这种情况的原因吗，谢谢。

PS。这是一个 Windows Phone 7 XNA 项目。

编辑：

此外，即使它是一个 WP 7 项目，旨在能够在 Wp 7 和 WP 8 上运行。我现在也注意到它在 WP 7 模拟器上工作，但不是我正在测试的 WP 8 模拟器在。这是否仅在 WP 8 上的模拟存在问题，并且一旦它以真实许可证在商店中运行，还是整个许可系统存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:23:05.570

这是 WP8 模拟器中的一个已知错误，SimulateTrialMode 只是不起作用。
对于调试，您应该实现自己的包装器以获取 IsTrial 值并在代码中手动定义或使用构建配置。

# php - 将json中的值转换为下拉

> ID：15583268
> 
> 赞同：1
> 
> 时间：2013-03-23T04:15:36.110
> 
> 标签：php, json, forms, decode

我想提取与组织相对应的所有值作为组织选项在下拉菜单下，但现在只有组织的最后一个值作为选项显示在下拉菜单中这是我的代码

```
<?php
$items = json_decode('[{"location":[{"building":   ["Building1"],"name":"Location1"}],"name":"Organization1"},{"location":[{"building":["Building2"],"name":"location2"}],"name":"Organisation2"},{"location":[{"building":["Building3"],"name":"Location3"}],"name":"Organization3"}]');
foreach( $items as $each ){
echo $each->location[0]->building[0];
echo $each->location[0]->name;
echo $each->name;
}
$org=$each->name;
$arr=array($org);
reset($arr);
//print_r($org); 
//$result = count($org);
//echo $result;
while(list(,$value)=each($arr)){
//echo "value:$value<br/>\n";
//$_SESSION['organisation']=$value;
//echo $_SESSION['organisation'];

}?>
<select name="category_id">
<option value=""></option>
<?php
$keys = array_keys($arr);
$count1=count($keys);
echo $count1;
for($i=0; $i<count($arr); $i++)
{?>
<option value="<?php echo $keys[$i]; ?>"><?php echo $arr[$i]; ?></option>
<?php
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:25:48.700

利用第一个 foreach 而不是开始一个全新的循环。经过测试，这有效：

```
<?php
    $items = json_decode('[{"location":[{"building":   ["Building1"],"name":"Location1"}],"name":"Organization1"},{"location":[{"building":["Building2"],"name":"location2"}],"name":"Organisation2"},{"location":[{"building":["Building3"],"name":"Location3"}],"name":"Organization3"}]');
    echo '<select name="category_id"><option value=""></option>';
    $stepper = 0;
    foreach($items as $each) {
        $building = $each->location[0]->building[0];
        $name = $each->location[0]->name;
        $final_name = $each->name;
        echo '<option value="'.$stepper.'">'.$final_name.'</option>';
        $stepper++;
    }
    echo '</select>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:25:28.907

使用此代码

```
<?php
$org = array();
$items = json_decode('[{"location":[{"building":   ["Building1"],"name":"Location1"}],"name":"Organization1"},{"location":[{"building":["Building2"],"name":"location2"}],"name":"Organisation2"},{"location":[{"building":["Building3"],"name":"Location3"}],"name":"Organization3"}]');
foreach( $items as $each ){
$org[]=$each->name;
}
?>
<select name="category_id">
<option value=""></option>
<?php
foreach($org as $key=>$val)
{?>
<option value="<?php echo $key; ?>"><?php echo $val; ?></option>
<?php
}
?>
</select> 
```

# ios - 从 plist 中检索数据

> ID：15583275
> 
> 赞同：7
> 
> 时间：2013-03-23T04:16:51.793
> 
> 标签：ios, xcode, nsarray, plist, nsdictionary

我有一个 plist，里面有一个数组，然后是一组字典元素？如何将数据从 plist 检索到我的数组？

![列表](../Images/fba44e15b145d368c80a9b774e83f761.png)

如何在一个数组中获取类别名称？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-23T04:22:10.233

**Objective-C**

```
// Read plist from bundle and get Root Dictionary out of it
NSDictionary *dictRoot = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"]];

// Your dictionary contains an array of dictionary
// Now pull an Array out of it.
NSArray *arrayList = [NSArray arrayWithArray:[dictRoot objectForKey:@"catlist"]];

// Now a loop through Array to fetch single Item from catList which is Dictionary
[arrayList enumerateObjectsUsingBlock:^(id obj, NSUInteger index, BOOL *stop) {
    // Fetch Single Item
    // Here obj will return a dictionary
    NSLog(@"Category name : %@",[obj valueForKey:@"category_name"]);
    NSLog(@"Category id   : %@",[obj valueForKey:@"cid"]);
}]; 
```

**迅速**

```
// Read plist from bundle and get Root Dictionary out of it
var dictRoot: [NSObject : AnyObject] = [NSObject : AnyObject].dictionaryWithContentsOfFile(NSBundle.mainBundle().pathForResource("data", ofType: "plist"))
// Your dictionary contains an array of dictionary
// Now pull an Array out of it.
var arrayList: [AnyObject] = [AnyObject].arrayWithArray((dictRoot["catlist"] as! String))
// Now a loop through Array to fetch single Item from catList which is Dictionary
arrayList.enumerateObjectsUsingBlock({(obj: AnyObject, index: UInt, stop: Bool) -> Void in
    // Fetch Single Item
    // Here obj will return a dictionary
    NSLog("Category name : %@", obj["category_name"])
    NSLog("Category id   : %@", obj["cid"])
}) 
```

**斯威夫特 2.0 代码**

```
var myDict: NSDictionary?
    if let path = NSBundle.mainBundle().pathForResource("data", ofType: "plist") {
        myDict = NSDictionary(contentsOfFile: path)
    }
    let arrayList:Array = myDict?.valueForKey("catlist") as! Array<NSDictionary>
    print(arrayList)

    // Enumerating through the list
    for item in arrayList  {
        print(item)

    } 
```

**斯威夫特 3.0**

```
// Read plist from bundle and get Root Dictionary out of it
var dictRoot: NSDictionary?
if let path = Bundle.main.path(forResource: "data", ofType: "plist") {
    dictRoot = NSDictionary(contentsOfFile: path)
}

if let dict = dictRoot
{
    // Your dictionary contains an array of dictionary
    // Now pull an Array out of it.
    var arrayList:[NSDictionary] = dictRoot?["catlist"] as! Array
    // Now a loop through Array to fetch single Item from catList which is Dictionary
    arrayList.forEach({ (dict) in
        print("Category Name \(dict["category_name"]!)")
        print("Category Id \(dict["cid"])")
    })
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T04:22:17.750

1.  从捆绑包或任何目录获取文件路径
2.  从从 plist 检索的字典中获取数组
3.  获取存储在数组中的字典

    ```
    NSString *plistFilePath  = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"test.plist"];

    NSDictionary *list = [NSDictionary dictionaryWithContentsOfFile:plistFilePath];
    NSLog(@"%@",list);
    NSArray      *data = [list objectForKey:@"catlist"];
    for(int i=0; i< [data count]; i++)
    {
        NSMutableDictionary *details=[data objectAtIndex:i];
        NSLog(@"%@",[details objectForKey:@"category_name"]);
        NSLog(@"%@",[details objectForKey:@"cid"]);

    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T07:09:51.663

**PropertyListDecoder**可用于将 plist 文件直接解码为对象。有关详细信息，请参阅此答案[https://stackoverflow.com/a/60389142/5662893](https://stackoverflow.com/a/60389142/5662893)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-15T09:39:58.310

do add .plist file in **Targets => Copy bundle resource** With the above in reply

# javascript - 如何使用 javascript/jquery 跟踪修饰键？

> ID：15583282
> 
> 赞同：5
> 
> 时间：2013-03-23T04:17:29.830
> 
> 标签：javascript, jquery, keyboard-shortcuts

我的要求很简单：用户按下 Ctrl 键，我的页面上会出现一些通知，当释放通知时，通知就会消失，所以我需要跟踪 Ctrl 等修饰键。不幸的是，我谷歌并没有找到任何线索，一些著名的键盘库，如[Mousetrap](http://craig.is/killing/mice)和`keymaster`似乎也没有涵盖这个主题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T04:22:20.210

修饰键触发`keydown`（但不是`keypress`）。然后您可以简单地检查事件对象上定义的标志。`shiftKey`, `altKey`, `ctrlKey`,`metaKey`等

完整列表在这里：[http ://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:24:45.143

尝试这个-

```
var ctrlKey = false;
window.onkeydown = function(e) {
    if(e.keyCode == 17) {
        ctrlKey = true;
    }
};
window.onkeyup = function(e) {
    if(e.keyCode == 17) {
        ctrlKey = false;
    }
};
function notify() {
    if(ctrlKey) {
        $('#notification').show();
    } else {
        $('#notification').hide();
    }
}
function main() {
    var _inter = setInterval(notify, 100);
}

main(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:21:53.230

使用 jQuery，您可以只使用 keydown 和 keyup 事件处理程序，您将看到 Ctrl 键上下移动。如果您想跟踪它是向下还是向上，那么只需在它下降时设置一个全局标志，并在它上升时清除该标志。

示例代码：

```
$(document).keydown(function(e) {
    if (e.which == 17) {
        $("#result").append("ctrl key pressed<br>");
    }
}); 
```

关于 e.which 的 JQuery 文档：http: [//api.jquery.com/event.which/](http://api.jquery.com/event.which/)

工作演示：http: [//jsfiddle.net/jfriend00/mezwF/](http://jsfiddle.net/jfriend00/mezwF/)

# artificial-intelligence - 最适合参数加权的人工智能？

> ID：15583285
> 
> 赞同：0
> 
> 时间：2013-03-23T04:18:41.763
> 
> 标签：artificial-intelligence

我有这种形式的数据：

```
[(v1, A1, B1), (v2, A2, B2), (v3, A3, B3), ...] 
```

`v`s 对应于数据元素，s`A`和`B`s 对应于表征 s 的数值`v`。

查看此数据的人可以查看它并根据`A`和`B`值查看哪个元组看起来是最佳“匹配”。我想要一种 AI 形式，我可以通过选择其中一个元组作为最佳来进行训练，并且可以调整赋予`A`和的权重`B`。

基本上，每个元组代表一个值的近似值。`A`表示一个误差并`B`表示每个近似值的复杂度。我希望通过为它们分配不同的权重来在错误和复杂性之间做出一些妥协。我想用不同值的近似值进行几次试验，然后选择我认为看起来最好的一个，并让 AI 相应地调整权重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:57:11.060

您所描述的也称为[模型选择](http://en.wikipedia.org/wiki/Model_selection)问题，这是机器学习和统计中经常遇到的问题。您基本上有一些模型可以通过某种优度（通常测量为错误或对数似然度）来拟合您的数据，并且这些模型具有一些复杂性测量（通常是模型中的参数数量）。您想选择最佳拟合模型并惩罚其复杂性，因为这可能是[过度拟合](http://en.wikipedia.org/wiki/Overfitting)的标志。

通常，过度拟合对您的影响程度取决于数据的大小。但是有一些措施明确允许您权衡模型的适应度和复杂性：

*   [赤池信息准则](http://en.wikipedia.org/wiki/Akaike_information_criterion)
*   [贝叶斯信息准则](http://en.wikipedia.org/wiki/Bayesian_information_criterion)
*   [正则化](http://en.wikipedia.org/wiki/Regularization_%28mathematics%29)

如上所述，根据您的数据选择模型会使模型选择偏向于数据。因此，这通常使用[验证集完成，然后在测试集上进行评估](http://en.wikipedia.org/wiki/Test_set)。

我不知道你用算法解决这个问题的方法是否很好。通常它取决于您的数据和一定程度的直觉。在我看来，您描述的元机器学习技术可能不会太可靠。最好先从一些更有原则和更简单的想法开始。

# module - 使用angularjs在一页中的多个模块

> ID：15583289
> 
> 赞同：4
> 
> 时间：2013-03-23T04:19:09.533
> 
> 标签：module, angularjs

如何在一个页面中以角度使用多个模块？

我阅读了一些文档，他们说我不能使用`ngApp`指令，应该使用`angular.bootstrap`.

我的 HTML 代码：

```
<div id="M1">
  <div ng-controller="Ctrl">
     <h1>Hello {{name}}</h1>
  </div>
</div>
<div id="M2">
  <div ng-controller="Ctrl">
    [{{name}}]
  </div>
</div> 
```

我的角度代码：

```
var m1 = angular.module('M1', []);

m1.controller('Ctrl', function($scope) {
  $scope.name = 'M1';
});

var module2 = angular.module('M2', []);
module2.controller('Ctrl', function($scope){
$scope.name = 'M2';
})

angular.bootstrap(document.getElementById('M1'), ['M1']);
angular.bootstrap(document.getElementById('M2'), ['M2']); 
```

但它不起作用。

这是一个现场演示：[http ://plnkr.co/edit/dkyL8eacoC5ZohfwSWz1?p=preview](http://plnkr.co/edit/dkyL8eacoC5ZohfwSWz1?p=preview)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T04:36:26.850

似乎引导发生得太快了。修改两个 boostrap 行以在文档准备好时发生：

```
angular.element(document).ready(function() { 
    angular.bootstrap(document.getElementById('M1'), ['M1']);
    angular.bootstrap(document.getElementById('M2'), ['M2']);
}); 
```

以这种方式修改您的 plnkr 时，两个应用程序都开始正常工作。

现场演示：[http ://plnkr.co/edit/Of0PYWR5ZEGT5BK4sfhI?p=preview](http://plnkr.co/edit/Of0PYWR5ZEGT5BK4sfhI?p=preview)

# node.js - 获取一个集合并为响应添加一个值

> ID：15583290
> 
> 赞同：3
> 
> 时间：2013-03-23T04:19:31.257
> 
> 标签：node.js, mongodb, meteor

我想在服务器脚本中创建一个可以返回集合加上一些额外值的函数。例如：

```
Meteor.publish("users", function () {
    var users;
    users = Meteor.users.find();
    users.forEach(function (user){
        user.profile.image = "some-url";
    });
    return users;
}); 
```

但这不能正常工作。**我的问题是**：在发布函数中向集合响应添加值的正确方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-08T09:18:46.553

有两种方法可以实现发布功能：

1.  通过返回一个游标（或游标数组）
2.  通过使用 this.added()、this.changed() 和 this.removed()。

只有方法 2 允许修改返回的文档。

[请在此处](http://docs.meteor.com/#/full/meteor_publish)参考 Meteor 文档。但是，由于提供的示例代码可能看起来很复杂，这里是另一个：

```
// server: publish the rooms collection
Meteor.publish("rooms", function () {
  return Rooms.find({});
}); 
```

相当于：

```
// server: publish the rooms collection
Meteor.publish("rooms", function () {
  var self = this;
  var handle = Rooms.find({}).observeChanges({
    added:   function(id, fields) { self.added("rooms", id, fields); },
    changed: function(id, fields) { self.changed("rooms", id, fields); },
    removed: function(id)         { self.added("rooms", id); },
    }
  });
  self.ready();
  self.onStop(function () { handle.stop(); });
}); 
```

在第二个示例中，您可以在发送发布之前修改“字段”参数，如下所示：

```
added: function(id, fields) { 
    fields.newField = 12;
    self.added("rooms", id, fields); 
}, 
```

来源：[这篇文章](https://groups.google.com/forum/#!msg/meteor-talk/EgOPlR8ilZo/V-XvMRg0xDUJ)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T05:34:53.753

这对服务器很重要吗？您可以在客户端上使用转换功能：

**客户端JS**

```
//Somewhere where it can run before anything else (make sure you have access to the other bits of the document i.e services.facebook.id otherwise you'll get a services is undefined 

Meteor.users._transform = function(doc) {
    doc.profile.image = "http://graph.facebook.com/" + doc.services.facebook.id + "/picture";
    return doc;
} 
```

现在当你这样做时：

```
Meteor.user().profile.image
=> "http://graph.facebook.com/55592/picture" 
```

我之前已经打开了一个关于将转换共享到客户端的问题：[https ://github.com/meteor/meteor/issues/821](https://github.com/meteor/meteor/issues/821)

# php - KML 数据未显示在地图上？

> ID：15583292
> 
> 赞同：0
> 
> 时间：2013-03-23T04:19:33.947
> 
> 标签：php, html, xml, kml

恐怕要通读大量教程以及彻底搜索相关文档。

我在我的网站上使用诺基亚地图，并动态生成包含与个人用户相关的位置数据的 kml 文件。

KML 文件生成并成功保存。

但是，数据不会显示在地图上（不会出现错误）。

这是查询数据库并生成 KML 的文件。

```
 <?php

session_start();
if(isset($_SESSION['login'])){

$userID = ($_SESSION['login']);

header("Content-type: application/vnd.google-earth.kml+xml");
header("Content-disposition: inline; filename=$userID.kml");
$con=mysql_connect("****", "****", "****");

mysql_select_db("****");

if ($userID!=null){

$sql1="SELECT * FROM user WHERE userID='$userID'";

$result1 = mysql_query($sql1, $con);
}
    if (!$result1){
        die ('Invalid Query: ' . mysql_error());
    }

$devIDrow = mysql_fetch_assoc($result1);
$devIDquery = $devIDrow['uuid'];
$name = $devIDrow['name'];

$sql2="SELECT * FROM gps WHERE devID='$devIDquery'";

$result2 = mysql_query($sql2, $con);

    if (!$result2)
        {
            die ('Invalid Query: ' . mysql_error());
        }

$dom = new DOMDocument('1.0', 'UTF-8');
$dom->formatOutput = true;
// Iterate through the rows, adding KML nodes for each
// Creates the root KML element and appends it to the root document.
$node = $dom->createElementNS('http://www.opengis.net/kml/2.2', 'kml');
$parNode = $dom->appendChild($node);

// Creates a KML Document element and append it to the KML element.
$dnode = $dom->createElement('Document');
$docNode = $parNode->appendChild($dnode);

while ($row = mysql_fetch_assoc($result2)){
    $dnode = $dom->createElement("Placemark");
    $newnode = $docNode->appendChild($dnode);

    $newnode = $dom->createElement("displayName");
    $newnode->nodeValue = $name;
    $dnode->appendChild($newnode);

    $newnode = $dom->createElement("Description");  
    $newnode->nodeValue = $row['logTime'];
    $dnode->appendChild($newnode);

    //Coordinates are a child node of the 'Point' node       
    $pointnode = $dom->createElement("Point");
    $dnode->appendChild($pointnode);

    $coordsnode = $dom->createElement("Coordinates");
    $coordsnode->nodeValue = $row['latitude'].",".$row['longitude'];
    $pointnode->appendChild($coordsnode);
}
}

$filename = $userID.".kml";
$dom->save($filename);

mysql_close($con2);
header("location:mapsNokia.php");

?> 
```

以下是加载地图的页面

```
<?php
session_start();
$userID = $_SESSION['login'];
header('Access-Control-Allow-Origin: *');

?>

<!DOCTYPE html>
<html xmlns ="http://www.w3.org/1999/xhtml">  
<head>
    <title>3D Protect - Map</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=7" ; IE=EmulateIE9/>
</head>
<body>
    <nav>
            <ul class="fancyNav">
                <li id="home"><a href="http://www.3dprotectsoftware.com/index" class="homeIcon">Home</a></li>
                <li id="login"><a href="http://www.3dprotectsoftware.com/login">Login</a></li>
                <li id="store"><a href="http://www.store.3dprotectsoftware.co.uk/index.php?route=product/product&filter_name=nfc&product_id=50">Store</a></li>
                <li id="about"><a href="http://www.3dprotectsoftware.com/aboutus">About Us</a></li>
                <li id="contact"><a href="http://www.3dprotectsoftware.com/contact">Contact Us</a></li>
            </ul>
        </nav>
    </ul>

<script type="text/javascript" src="http://api.maps.nokia.com/2.2.4/jsl.js?with=all" charset="utf-8"></script>

<div id="map" style="z-index: -1; left:25%; right: 25%; top:25%; bottom: 25%; width: 50%; height: 50%; position: absolute;"></div>

<script type="text/javascript">

/*<![CDATA[*/
/////////////////////////////////////////////////////////////////////////////////////
// Don't forget to set your API credentials
//
// Replace with your appId and token which you can obtain when you 
// register on http://api.developer.nokia.com/ 
//
            nokia.Settings.set( "", ""); 
            nokia.Settings.set( "", "");

//          
/////////////////////////////////////////////////////////////////////////////////////

var map = new nokia.maps.map.Display(document.getElementById("map"),   
                    { components: [ new nokia.maps.map.component.Behavior(),                
                      new nokia.maps.map.component.ZoomBar(),                
                      new nokia.maps.map.component.Overview(),                                             
                      new nokia.maps.map.component.TypeSelector(),                     
                      new nokia.maps.map.component.ScaleBar(),                
                      new nokia.maps.map.component.InfoBubbles() ],                               
                    'zoomLevel': 15,    
                    'center': [54.04541,-2.79916]
                    });

    var kml = new nokia.maps.kml.Manager();
        // We define a callback function for parsing kml file,
        // and then push the parsing result to map display
        var onParsed = function (kmlManager) {
                var resultSet;
                // KML file was successfully loaded
                if (kmlManager.state == "finished") {
                        // KML file was successfully parsed
                        resultSet = new nokia.maps.kml.component.KMLResultSet(kmlManager.kmlDocument, map);
                        resultSet.addObserver("state", function (resultSet) {
                                if (resultSet.state == "finished") {
                                        // Retrieve map objects container from KML resultSet
                                        container = resultSet.container;

                                        // Add the container to the map's object collection so they will be rendered onto the map.
                                        map.objects.add(container);

                                        // Switch the viewport of the map do show all KML map objects within the container
                                        map.zoomTo(container.getBoundingBox());
                                }
                        });
                        resultSet.create();                     
                }
        };
        // Add an observer to kml manager
        kml.addObserver("state", onParsed);

kml.parseKML("http://www.3dprotectsoftware.com/"+'<?php $userID = $_SESSION['login']; echo $userID;?>.kml');

</script>
</body>
</html> 
```

我不知道为什么没有显示数据。

下面是一个示例 kml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <Placemark>
      <Name>Antwan</Name>
      <Description>2013-03-18 

20:56:39</Description>
      <Point>
        <Coordinates>54.04541,-2.79916</Coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <Name>Antwan</Name>

<Description>2013-03-18 21:01:42</Description>
      <Point>
        <Coordinates>54.04541,-2.79916</Coordinates>
      </Point>
    </Placemark>
</Document>
</kml> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:33:18.647

您的 KML 无效（KML/XML 区分大小写）：

[http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FSO_Nokia.kml](http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FSO_Nokia.kml)

```
<Description> should be <description>
<Name> should be <name>
<Coordinates> should be <coordinates> 
```

如果我解决了这些问题，它对我有用：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_Nokia_correctCase.kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_Nokia_correctCase.kml)

# windows - 如何在 DXGI 中获取监视器/输出的当前显示模式（分辨率、刷新率）？

> ID：15583294
> 
> 赞同：13
> 
> 时间：2013-03-23T04:19:58.197
> 
> 标签：windows, fullscreen, direct3d, dxgi

我正在创建一个多显示器全屏 DXGI/D3D 应用程序。我正在枚举可用的输出和适配器，以准备创建它们的交换链。

使用 DXGI 的[IDXGIFactory::CreateSwapChain](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174537%28v=vs.85%29.aspx)方法创建交换链时，我需要提供交换链描述，其中包括[DXGI_MODE_DESC](http://msdn.microsoft.com/en-us/library/windows/desktop/bb173064%28v=vs.85%29.aspx)类型的缓冲区描述，详细说明宽度、高度、刷新率等。如何找出输出是什么当前设置为（或者我如何找出当前输出的显示模式是什么）？当我使用此交换链进入全屏时，我不想更改用户的分辨率或刷新率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:27:30.900

环顾四周后，我偶然发现了`EnumDisplaySettings`旧版 GDI 功能，它允许我访问当前的分辨率和刷新率。结合这个`IDXGIOutput::FindClosestMatchingMode`功能，我可以非常接近当前的显示模式：

```
void getClosestDisplayModeToCurrent(IDXGIOutput* output, DXGI_MODE_DESC* outCurrentDisplayMode)
{
  DXGI_OUTPUT_DESC outputDesc;
  output->GetDesc(&outputDesc);
  HMONITOR hMonitor = outputDesc.Monitor;
  MONITORINFOEX monitorInfo;
  monitorInfo.cbSize = sizeof(MONITORINFOEX);
  GetMonitorInfo(hMonitor, &monitorInfo);
  DEVMODE devMode;
  devMode.dmSize = sizeof(DEVMODE);
  devMode.dmDriverExtra = 0;
  EnumDisplaySettings(monitorInfo.szDevice, ENUM_CURRENT_SETTINGS, &devMode);

  DXGI_MODE_DESC current;
  current.Width = devMode.dmPelsWidth;
  current.Height = devMode.dmPelsHeight;
  bool useDefaultRefreshRate = 1 == devMode.dmDisplayFrequency || 0 == devMode.dmDisplayFrequency;
  current.RefreshRate.Numerator = useDefaultRefreshRate ? 0 : devMode.dmDisplayFrequency;
  current.RefreshRate.Denominator = useDefaultRefreshRate ? 0 : 1;
  current.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
  current.ScanlineOrdering = DXGI_MODE_SCANLINE_ORDER_UNSPECIFIED;
  current.Scaling = DXGI_MODE_SCALING_UNSPECIFIED;

  output->FindClosestMatchingMode(&current, outCurrentDisplayMode, NULL);
} 
```

...但我不认为这真的是正确的答案，因为我需要使用遗留功能。有没有办法用 DXGI 来获得确切的当前显示模式而不是使用这种方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:41:47.513

我在这里看到了解决方案： [http ://www.rastertek.com/dx11tut03.html](http://www.rastertek.com/dx11tut03.html)

在以下部分：

```
 // Now go through all the display modes and find the one that matches the screen width and height.
    // When a match is found store the numerator and denominator of the refresh rate for that monitor.
    for(i=0; i<numModes; i++)
    {
        if(displayModeList[i].Width == (unsigned int)screenWidth)
        {
            if(displayModeList[i].Height == (unsigned int)screenHeight)
            {
                numerator = displayModeList[i].RefreshRate.Numerator;
                denominator = displayModeList[i].RefreshRate.Denominator;
            }
        }
    } 
```

我的理解是否正确，可用的分辨率在 displayModeList 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T12:08:29.103

```
This might be what you are looking for:

            // Get display mode list
            std::vector<DXGI_MODE_DESC*> modeList = GetDisplayModeList(*outputItor);
            for(std::vector<DXGI_MODE_DESC*>::iterator modeItor = modeList.begin(); modeItor != modeList.end(); ++modeItor)
            {
            //  PrintDisplayModeInfo(*modeItor);
            }
        }

std::vector<DXGI_MODE_DESC*> GetDisplayModeList(IDXGIOutput* output)
{
    UINT num = 0;
    DXGI_FORMAT format = DXGI_FORMAT_R32G32B32A32_TYPELESS;
    UINT flags = DXGI_ENUM_MODES_INTERLACED | DXGI_ENUM_MODES_SCALING;

    // Get number of display modes
    output->GetDisplayModeList(format, flags, &num, 0);

    // Get display mode list
    DXGI_MODE_DESC * pDescs = new DXGI_MODE_DESC[num];
    output->GetDisplayModeList(format, flags, &num, pDescs);

    std::vector<DXGI_MODE_DESC*> displayList;
    for(int i = 0; i < num; ++i)
    {
        displayList.push_back(&pDescs[i]);
    }

    return displayList;
} 
```

# objective-c - 使用ARC在self.managedObjectContext上调用perfromBlock时保持循环？

> ID：15583295
> 
> 赞同：4
> 
> 时间：2013-03-23T04:20:36.290
> 
> 标签：objective-c, memory-management, automatic-ref-counting, retain-cycle

在下面的代码中，我是否正确理解了保留周期问题，是否会有保留周期？

```
- (NSError *)importRoute:(NSDictionary *)route {
    [self.importContext performBlockAndWait:^{
        [NSEntityDescription insertNewObjectForEntityForName:@"Entity" inManagedObjectContext:self.importContext];
        //do I get a retain cycle here?
    }];
    ...
}

- (NSManagedObjectContext *)importContext {
    if (!_importContext) {
        id appDelegate = [[UIApplication sharedApplication] delegate];
        _importContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        _importContext.parentContext = [appDelegate managedObjectContext];
    }
    return _importContext;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T05:18:28.940

有一个保留周期，但它是暂时的。这是保留周期：

*   `self`保留`importContext`
*   `importContext`保留块
*   该块保留`self`

一旦块完成执行，`importContext`就释放它。此时块的保留计数变为零并被释放。当它被释放时，它会释放`self`.

通常，涉及块的保留周期仅在无限期保留块时才会出现问题，例如因为您将其存储在属性、实​​例变量或容器中。如果您只是将一个块传递给将在不久的将来执行该块一次的函数，那么您通常不必担心保留周期。

# java - 手动单击添加新按钮时如何在rich：datatable中添加多行？

> ID：15583298
> 
> 赞同：0
> 
> 时间：2013-03-23T04:21:04.810
> 
> 标签：java, jsf, jsf-2, richfaces

我正在设计一个网页，其中有一个 rich:DataTable 我用来在 Database 中添加新的客户信息。

因此，每次单击“添加新”按钮时，丰富的数据表中应该会出现一个新行，其中包含空白输入文本字段。

问题：即使我单击“添加新”按钮多少次，表格中也只剩下一行。

以下是我的网页代码：

```
<a4j:outputPanel id="rep" rendered="#{adminBean.currentItem == 'Participant' || adminBean.currentItem == 'Administrator'}">
    <rich:panel rendered="#{not empty adminBean.currentItem}" header="Add Customer" id="out">
        <h:panelGrid columns="2">
            <h:commandButton value="Add New" type="button" style="width: 70px" actionListener="#{adminBean.addCustAction}">
                <a4j:ajax  render="out"/>
            </h:commandButton>
            <a4j:commandButton value="Delete" style="margin-left: 10px; width: 70px"></a4j:commandButton>
        </h:panelGrid>

        <rich:dataScroller for="setcust" style="margin-top: 17px"></rich:dataScroller>
        <rich:dataTable id="setcust" value="#{adminBean.customerList}" var="custl" rows="10" style="width: 900px;margin-top: 5px">

            <rich:column id="col1">
                <f:facet name="header">
                    <h:outputText value="Customer ID" style="font-size: smaller; font-weight: bolder; "/>
                </f:facet>
                <h:inputText value="#{custl.Id}"></h:inputText>
            </rich:column>
            <rich:column id="col2">
                <f:facet name="header">
                    <h:outputText value="First Name" style="font-size: smaller; font-weight: bolder;"/>
                </f:facet>
                <h:inputText value="#{custl.FirstName}"></h:inputText>
            </rich:column>
            <rich:column id="col3">
                <f:facet name="header">
                    <h:outputText value="Last Name" style="font-size: smaller; font-weight: bolder;"/>
                </f:facet>
                <h:inputText value="#{custl.lastName}"></h:inputText>
            </rich:column>
            <rich:column id="col4">
                <f:facet name="header">
                    <h:outputText value="Phone" style="font-size: smaller; font-weight: bolder;"/>
                </f:facet>
                <h:inputText value="#{custl.phoneNo}"></h:inputText>
            </rich:column>
            <rich:column id="col5">
                <f:facet name="header">
                    <h:outputText value="Address" style="font-size: smaller; font-weight: bolder;"/>
                </f:facet>
                <h:inputText value="#{custl.address}"></h:inputText>
            </rich:column>
            <rich:column id="col6">
                <f:facet name="header">
                    <h:outputText value="City" style="font-size: smaller; font-weight: bolder;"/>
                </f:facet>
                <h:inputText value="#{custl.city}"></h:inputText>
            </rich:column>
            <rich:column id="col7">
                <f:facet name="header">
                    <h:outputText value="Email" style="font-size: smaller; font-weight: bolder;"/>
                </f:facet>
                <h:inputText value="#{custl.email}"></h:inputText>
            </rich:column>
        </rich:dataTable>
    </rich:panel>
</a4j:outputPanel> 
```

以下是 AdminBean 的代码：

```
@ManagedBean
@ViewScoped
public class AdminBean {

    private String currentType;
    private String currentItem;
    private List<Customer> customerList = new ArrayList<Customer>();
    private List<Account> accountList;
    private List optionList;

    public List getOptionList() {
        optionList = new ArrayList<String>();
        if (currentType.equals("Add New User")) {
            optionList.add("Participant");
            optionList.add("Administrator");
        } else if (currentType.equalsIgnoreCase("Manage Balance")) {
            optionList.add("Withdrawl");
            optionList.add("Deposit");
        }
        return optionList;
    }

    public void setOptionList(List optionList) {
        this.optionList = optionList;
    }

    public List<Account> getAccountList() {
        return accountList;
    }

    public void setAccountList(List<Account> accountList) {
        this.accountList = accountList;
    }

    public List<Customer> getCustomerList() {
        System.out.println("got list..................");
        return customerList;
    }

    public void setCustomerList(List<Customer> customerList) {
        this.customerList = customerList;
    }

    public String getCurrentItem() {
        return currentItem;
    }

    public void setCurrentItem(String currentItem) {
        this.currentItem = currentItem;
    }

    public String getCurrentType() {
        return currentType;
    }

    public void setCurrentType(String currentType) {

        this.currentType = currentType;
    }

    public void addCustAction(){
        System.out.println("kshitij jain.......actionListener"+customerList.size());

        Customer cust = new Customer();
        customerList.add(cust);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:05:19.843

您的代码中有一些问题：

*   每个`UICommand`都应该包裹在 a`<h:form>`中才能工作。请参阅[commandButton/commandLink/ajax action/listener 方法未调用或输入值未更新](https://stackoverflow.com/q/2118656/1065197)，第 1 节。
*   您没有`actionListener`以正确的方式声明该方法，该方法需要一个`ActionEvent event`参数。看起来您想`action`改用它。有关详细信息，请参阅[action 和 actionListener 之间的差异](https://stackoverflow.com/q/3909267/1065197)。
*   在 RichFaces 4 中，不需要和`<h:commandButon>`一起使用`<a4j:ajax>`，这就是`<a4j:commandButton>`. 从文档中：

    > 该组件类似于 JavaServer Faces (JSF) 组件，但还包括 Ajax 支持。

将所有这些建议结合在一起，您的 JSF 代码应该是（我省略了不必要的代码来测试样式和渲染条件等结果）

```
<a4j:outputPanel id="rep" >
    <rich:panel id="out">
        <h:form id="frmCustomerData">
            <h:panelGrid columns="2">
                <a4j:commandButton value="Add New"
                    action="#{adminBean.addCustAction}"
                    render="setcust" />
                <a4j:commandButton value="Delete" />
            </h:panelGrid>
            <rich:dataScroller for="setcust" style="margin-top: 17px"></rich:dataScroller>
            <rich:dataTable id="setcust" value="adminBean.customerList" var="custl" rows="10" style="width: 900px;margin-top: 5px">
                <!-- datatable content... -->
            </rich:dataTable>
        </h:form>
    </rich:panel>
</a4j:outputPanel> 
```

无需对托管 bean 进行任何更改。

# java - JBoss 的 Gradle

> ID：15583301
> 
> 赞同：3
> 
> 时间：2013-03-23T04:21:09.740
> 
> 标签：java, jboss, gradle

是否有适用于 JBoss 7 部署的 gradle 插件？找到了一个6个月没有提交的github项目，说明已经关闭了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:54:31.467

[Gradle Cargo 插件为](https://github.com/bmuschko/gradle-cargo-plugin)[JBoss 7 部署](http://cargo.codehaus.org/JBoss+7.x)提供支持。

**编辑：**

Gradle 是一个通用的构建自动化工具。因此，您可以自动化的内容没有任何限制。虽然 Cargo 可以很好地将 Web 应用程序部署到测试环境，但我不会将 Cargo 用于生产部署。对于生产部署，您可能需要更复杂的行为，例如关闭服务器、归档现有工件、复制新工件和启动服务器。此外，您可能希望查看滚动部署和版本回滚。[Capistrano](https://github.com/capistrano/capistrano)是一个提供部署功能的工具。

# php - 为什么要将操作打印代码作为打印字符串而不是结果发布？(php)

> ID：15583302
> 
> 赞同：0
> 
> 时间：2013-03-23T04:21:09.890
> 
> 标签：php, output

这*是*给学校的，所以如果你不想帮助我——我会提前警告你。

我在一个 html 页面中有这段代码，它引用了一个名为 dieRoller.php 的页面：

```
<form method="post" action="dieRoller.php">
<label>Input how many sides your die has:</label>
<input type="numberInput" id="numberInput" name="numberInput" /><br />
<input type="submit" value="submit" name="submit" />
</form> 
```

这是 dieRoller.php：

```
<?php

$numberInput = filter_input(INPUT_POST, "numberInput");
$answerNum = rand(1,numberInput);

print " You've rolled a: " $answerNum;

?> 
```

这可能是地球上最愚蠢的问题，但我不知道为什么，当我提交此表单时，我的结果实际上是 dieRoller.php 的文本文件，而不是打印输出？我搜过了 我不明白。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T04:28:11.387

你有以下错误。

您忘记在函数`$`内为 php 变量添加符号。`rand`

**代替**

```
$answerNum = rand(1,numberInput); 
```

**和**

```
$answerNum = rand(1,$numberInput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:28:26.293

你的 dieRoller 应该是这样的：

```
<?php
if(isset($_POST['numberInput'])){
echo rand(1,$_POST['numberInput']);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:02:45.420

您的代码中的两个拼写错误在下面得到更正，更正后的代码在测试时有效：

```
 $answerNum = rand(1,$numberInput);

print " You've rolled a: " .$answerNum; 
```

# android - Android - 相机预览不起作用

> ID：15583303
> 
> 赞同：1
> 
> 时间：2013-03-23T04:21:12.877
> 
> 标签：android, camera, preview

我正在尝试为 android 编写相机应用程序，但无法让预览正常工作。我尝试按照 android 在[此处](http://developer.android.com/guide/topics/media/camera.html#custom-camera)提供的步骤进行操作，但它不起作用，应用程序不断崩溃。我不确定我做错了什么，但我很确定我遵循了正确的步骤。

这是我到目前为止所拥有的：Camera Activity 类

```
public class CameraActivity extends Activity
{
    private CameraPreview mPreview = null;
    private Camera mCamera = null;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);

        mCamera = getCameraInstance();

        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);

    }
    public static Camera getCameraInstance()
    {
        Camera c = null;

        try
        {
            //attempt to get a Camera instance
            c = Camera.open();
        }
        catch(Exception e)
        {
            //Camera is not available(in use or does not exist)
        }
        return c;//returns null if camera is unavailable
    }

    public void onPause()
    {
        super.onPause();
        mCamera.stopPreview();
        releaseCamera();
    }

    private void releaseCamera()
    {
        if(mCamera != null)
        {
            mCamera.release();
            mCamera = null;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.camera, menu);
        return true;
    }
} 
```

相机预览类

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback
{
    private final String TAG = "CameraPreview";
    private SurfaceHolder mHolder;
    private Camera mCamera;

    public CameraPreview(Context context, Camera camera)
    {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        //deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder)
    {
        //the Surface has been created, now tell the camera where to draw the preview
            try
            {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }
            catch(IOException e)
            {
                Log.d(TAG, "Error setting camera preview: " + e.getMessage());  
            }
    }

    public void surfaceDestroyed(SurfaceHolder holder)
    {
        //empty. take care of releasing the Camera preview in your activity
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {
        //if your preview can change or rotate, take care of those events here.
        //make sure to stop the preview before resizing of reformatting it.
        if(mHolder.getSurface() == null)
        {
            //preview surface does not exist
            return;
        }

        //stop preview before making changes
        try
        {
            mCamera.stopPreview();
        }
        catch(Exception e)
        {
            //ignore: tried to stop a non-existent preview
        }

        //set preview size and make any resize, rotate or
        //reformatting changes here
        try
        {
            //start preview with new settings
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();
        }
        catch(Exception e)
        {
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    }
} 
```

这是我用于相机活动的 .xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        />

    <Button
        android:id="@+id/button_capture"
        android:text="Capture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        />
</LinearLayout> 
```

据我所知，我正确地遵循了指南，它应该可以工作。由于下一部分与录制有关，我认为在此之前的所有步骤都应该产生一个工作预览，但它不起作用。任何人都可以看到我需要更改的错误吗？谢谢

编辑：添加了我的清单 manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ics466.project.warpwalker"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.ics466.project.warpwalker.WarpIntro"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
            </activity>
            <activity
            android:name="com.ics466.project.warpwalker.CameraActivity"
            android:label="@string/title_activity_camera" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:51:39.360

在大多数设备上，相机预览的默认方向是横向。

尝试添加`android:orientation="horizontal"`到您的 .xml 文件的 LinearLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T05:33:05.277

试试这个
给CameraId作为整数
`Camera.open(0);`
[http://developer.android.com/reference/android/hardware/Camera.html#open(int)](http://developer.android.com/reference/android/hardware/Camera.html#open%28int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:43:42.657

`android:minSdkVersion="8"`应该 `android:minSdkVersion="9"`

如果您使用了 API 9 中添加的一些功能

并阅读此链接[How To Enable Camera in Android Emulator](http://viralpatel.net/blogs/enable-camera-in-android-emulator/)

或者在带有摄像头的真实设备中测试这个应用程序。

# python - Django 找不到正确的查询集

> ID：15583305
> 
> 赞同：0
> 
> 时间：2013-03-23T04:21:32.007
> 
> 标签：python, django

```
class TimeStampedModel(models.Model):
    created = DateTimeField(_('created'), auto_now=False, auto_now_add=True)
    modified = DateTimeField(_('modified'), auto_now=True, auto_now_add=False)

    class Meta:
        abstract = True

class TimeFramedModel(models.Model):
    start = models.DateTimeField(_('start'), null=True, blank=True)
    end = models.DateTimeField(_('end'), null=True, blank=True)

    class Meta:
        abstract = True

class EntryQueryset(QuerySet):

    def published(self):
        return self.filter(self.status == 'published')

class EntryManger(models.Manager):

    def get_query_set(self):
        print 'using right custom manager'
        return EntryQueryset(self.model, using=self._db)

class Entry(TimeStampedModel, TimeFramedModel):

    status = models.CharField(
        _('status'), choices=STATUS_CHOICES, max_length=16,
        default='draft')
    objects = EntryManger() 
```

当我这样做`Entry.objects.published()`时，错误就会出现。它抱怨“EntryManger”对象没有“已发布”属性，

未打印“使用正确的自定义管理器”的文本。

什么可能导致此错误？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:43:26.487

`Entry.objects`是经理，而不是查询集。你把`published`你的自定义查询集中，所以你需要做`Entry.objects.all().published()`或`Entry.objects.get_queryset().published()`

您也没有`published`正确实施。它应该更像：

```
class EntryQueryset(QuerySet):

    def published(self):
        return self.filter(status='published') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:29:37.367

您的方法`published()`应该在 EntryManager 类上，不需要创建新的 QuerySet 类（通常只有当您想更深入地研究如何从数据库中获取数据时）。

正确的解决方案是：

```
class EntryManger(models.Manager):
    def published(self):
        print 'using right custom manager'
        return self.filter(self.status == 'published') 
```

您可以完全删除该`EntryQuerySet`课程。

# ruby-on-rails - HABTM 关系，如何为 id 输入多个值？

> ID：15583313
> 
> 赞同：0
> 
> 时间：2013-03-23T04:22:42.590
> 
> 标签：ruby-on-rails

我有一个用户模型，它有_many 投资组合，它有_many 资产，它有_and_belongs_to_many AssetHistories。

基本上，用户 1 的投资组合中可能有 Google，而用户 2 的投资组合中可能也有 Google。当我可以拥有多对多 (HABTM) 关系时，为什么要使用重复的 Google 股票价格历史行填充数据库。然而，让我失望的是当asset_id 是多个值时，在 AssetHistory 模型中放置什么。即它需要同时引用用户1 和用户2。用户1 的Google 可能是asset.id 1，用户2 的Google 可能是asset.id 2。因此，AssetHistory 模型中的条目如何引用这两个ID？

很明显，asset_id 不能同时为 2 个值，但我无法理解这一点。我应该使用 a`foreign_key`并使 Google 成为密钥吗？如果是这样，我的资产模型中仍然存在问题，即为 Asset_History_id 放置什么条目，因为资产 Google 可能有 30 行股票价格历史记录。每个股票价格历史都是不同的 Asset_History_id。

有人可以帮助解释我做错了什么吗？

请注意，我在资产模型中使用 after_save 来填充资产价格历史记录。即当有人添加资产时，它会填充asset_history，但它不会填充Asset 模型中的asset_history_id 字段，也不会填充AssetHistory 模型中的asset_id，因为我不知道在那里做什么。

我的资产模型有：

```
class Asset < ActiveRecord::Base
attr_accessible :asset_symbol, :shares, :cost, :date_purchased, :asset_history_id 
belongs_to :portfolio    
has_and_belongs_to_many :asset_histories

after_save populatepricehistory

private
   def populatepricehistory
         #uses an api to download price data as an array and imports it to AssetHistory...
         #I expect something should go here to fill out the asset_history_id field in the Asset Model
         #while simultaneously filling out the asset_id in the AssetHistory model

   end
end 
```

资产历史模型

```
class AssetHistory < ActiveRecord::Base
    attr_accessible :close, :date, :asset_id, :asset_symbol
    has_and_belongs_to_many :assets
end 
```

AssetHistoryAsset 连接表的迁移

```
class AssetHistoryAssetJoinTable < ActiveRecord::Migration
  def up
    create_table :asset_histories_assets, :id=> false do |t|
        t.integer :asset_id
        t.integer :asset_history_id
    end
  end

  def down
    drop_table :asset_histories_assets
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:32:20.920

我的建议是这样的：

```
class User < ActiveRecord::Base
  has_many :assets, :through => :porfolios
  has_many :porfolios
end

class Porfolio < ActiveRecord::Base
  has_many :assets
  has_many :users
end

class Asset < ActiveRecord::Base
  has_many :users, :through => :portfolios
  has_many :portfolios
  has_and_belongs_to_many :asset_histories
end 
```

`Asset`顺便说一句，你真的需要和之间的多对多关系`AssetHistory`吗？我会想象每个实例`AssetHistory`只引用一个`Asset`，可能是`belongs_to :asset`/ `has_one :asset_history`。

# ruby-on-rails - 使用 RSpec 和 Capybara 检查图像和网站图标是否存在

> ID：15583316
> 
> 赞同：7
> 
> 时间：2013-03-23T04:23:02.490
> 
> 标签：ruby-on-rails, rspec, capybara

有没有使用 rspec 和 capybara 检查图像和网站图标是否存在的好方法？

我可以检查网站图标和图像的 DOM，但我希望能够检查这些图像是否也加载了。rspec 和 capybara 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T05:47:55.307

```
describe "check images and favicon" do
  before { visit "url/to/check")

  it "should have the images" do
    page.should have_css('img', text: "image1.jpg")

  it "should have the favicon" do
    page.should have_xpath("/html/head/link[@href='favicon.ico']"
  end 
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-12T01:44:12.880

```
# frozen_string_literal: true

module Capybara
  module CustomMatchers
    include Capybara::DSL

    class Asset
      def asset_exists?(actual, src)
        js_script = <<JSS
xhr = new XMLHttpRequest();
xhr.open('GET', '#{src}', true);
xhr.send();
JSS
        actual.execute_script(js_script)
        status = actual.evaluate_script('xhr.status') # get js variable value
        status == 200 || status == 302
      end
    end

    class LoadImage < Asset
      def initialize(*args)
        @args = args
        @src = args.first
      end

      def matches?(actual)
        is_present = actual.has_selector?("img[src='#{@src}']")
        is_present && asset_exists?(actual, @src)
      end

      def does_not_match?(actual)
        actual.has_no_selector?("img[src='#{@src}']")
      end

      def failure_message
        "No image loaded with source: '#{@src}'"
      end

      def failure_message_when_negated
        "Image loaded with source: '#{@src}'"
      end

      def description
        "Verify if image with source: '#{@src}' is loaded"
      end
    end

    class LoadFavicon < Asset
      def initialize(*args)
        @args = args
        @rel = args.first
        @href = args.second
      end

      def matches?(actual)
        is_present = actual.has_selector?("link[rel='#{@rel}'][href='#{@href}']", visible: false)
        is_present && asset_exists?(actual, @href)
      end

      def does_not_match?(actual)
        actual.has_no_selector?("link[rel='#{@rel}'][href='#{@href}']", visible: false)
      end

      def failure_message
        "No favicon loaded with rel: '#{@rel}' and href: '#{@href}'"
      end

      def failure_message_when_negated
        "Favicon loaded with rel: '#{@rel}' and href: '#{@href}'"
      end

      def description
        "Verify if favicon with rel: '#{@rel}' and href: '#{@href}' is loaded"
      end
    end

    def load_image(*args)
      LoadImage.new(*args)
    end

    def load_favicon(*args)
      LoadFavicon.new(*args)
    end
  end
end

RSpec.configure do |config|
  config.include Capybara::CustomMatchers
end 
```

勾选[https://gist.github.com/yovasx2/1c767114f2e003474a546c89ab4f90db](https://gist.github.com/yovasx2/1c767114f2e003474a546c89ab4f90db)加星并下载

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-22T15:57:35.457

问题是找出实际的 img 和 favicon 是否存在。这是检查滑块的所有图像是否存在的代码。

```
page.all('#carousel img').each do |img|
  visit img[:src]
  page.status_code.should be 200
end 
```

对于带有 id myimage 的单个图像，请使用

```
visit page.find('img#myimage')[:src]
page.status_code.should be 200 
```

而对于 favicon 最简单的是运行以下命令

```
page.all('link[rel~="icon"]', visible: :any).each do |fav|
  visit fav[:href]
  page.status_code.should be 200
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-22T18:45:45.273

为了测试页面上所有**损坏**的图像，

*   特定的图像，
*   选择器的存在，或
*   管道中的图像可用性

我收集所有图像并使用以下命令检查“获取”响应：

```
 describe "Check for Images" do
        before { visit page_path }

        it "should not have broken images" do
          all_images = page.all('img')
          all_images.each do |img|
            get img[:src]
            expect(response).to be_successful
          end
        end  
    end 
```

希望有帮助。

# c - 我写入寄存器的代码是否需要更正？

> ID：15583320
> 
> 赞同：0
> 
> 时间：2013-03-23T04:23:28.953
> 
> 标签：c, embedded

我的问题是通用的，与任何特定的微控制器无关。下面是写入硬件寄存器地址的代码。在这段代码中，我试图写几个值，一个接一个。

```
unsigned int *p;  //declare a pointer

p = (int *) 0x200;  //point to hardware register address

*p = 0x12;  // write to hardware register address

*p = 0xA5;  // write to hardware register address

*p = 0xff;  // write to hardware register address 
```

以上需要更正吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T04:59:36.143

如果要写入硬件寄存器，通常需要使用`volatile`关键字：

```
volatile unsigned int *p; 
```

如果没有`volatile`，优化编译器可能会断定前两次写入是不必要的（因为该值会立即被覆盖）并将它们优化掉。

这篇[Wikipedia 文章](http://en.wikipedia.org/wiki/Volatile_variable#In_C_and_C.2B.2B)有更多关于`volatile`.

# language-agnostic - 如何获得k个素数？

> ID：15583325
> 
> 赞同：0
> 
> 时间：2013-03-23T04:24:27.120
> 
> 标签：language-agnostic

有没有一种算法可以取一个数 k，并返回一个数 j，使得 j 有 k 个素因数？注意：算法应该在多项式时间内运行。

假设您没有质数表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T04:26:02.853

显而易见的答案：从素数表开始，给定一个 number `k`，将`k`这些素数相乘并返回结果。假设`k`足够小以使乘法时间保持恒定，则应该以线性时间运行。

如果你需要计算找到素数的时间，它应该仍然是多项式时间，使用埃拉托色尼的筛子来找到素数表。

# objective-c - Xcode Cocos 2D 如何使用多参数选择器

> ID：15583330
> 
> 赞同：2
> 
> 时间：2013-03-23T04:25:37.360
> 
> 标签：objective-c, cocos2d-iphone, selector

我正在尝试做这样的事情：

```
CCMenuItemImage *BuyButton = [CCMenuItemImage itemWithNormalImage:@"Buy.jpg" selectedImage:@"Buy.jpg" target:self selector:@selector(Function:cnt)]; 
```

出于某种原因，我无法将任何参数传递给函数'Function'。我花了很多时间研究这个，但我发现的唯一解决方案是使用对象 ID，我宁愿不参与。这个按钮在一个循环中，所以我不能只使用另一个函数，即从其他地方获取参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:02:32.247

`+ (id)itemWithNormalImage:selectedImage:target:selector:`不支持带参数的选择器。如果要执行带参数的选择器，则可以`+ (id)itemWithNormalImage:selectedImage:block:`改用。在块中只需运行您想要的任何代码：

```
__weak typeof(self) weakSelf = self;
[CCMenuItemImage itemWithNormalImage:@"Buy.jpg" selectedImage:@"Buy.jpg" block:^(id sender) {
    [weakSelf methodWithParameterOne:one two:two];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:29:27.553

您不能通过`selectors`冒号发送参数。

典型的例子是：

```
[self performSelector:@selector(myMethodWithObject:) withObject:myObject]; 
```

哪个电话

```
- (void)myMethodWithObject:(id)object; 
```

同样，您需要像上面那样做，可能是：

```
CCMenuItemImage *BuyButton = [CCMenuItemImage itemWithNormalImage:@"Buy.jpg" selectedImage:@"Buy.jpg" target:self selector:@selector(Function:) withObject:cnt]; 
```

您需要通过以下方式更改功能：

```
-(void)FunctionWithCnt:(<type>)cntObject; 
```

然后使用`@selector(FunctionWithCnt:)`

# mysql - MySQL 嵌套块错误 1064

> ID：15583332
> 
> 赞同：1
> 
> 时间：2013-03-23T04:25:47.423
> 
> 标签：mysql, delimiter

谁能明白我为什么会得到：

```
[Err] 1064 - You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version 
for the right syntax to use near '//

DELIMITER' at line 11
```

对于以下代码段：

```
DELIMITER //

DROP PROCEDURE 
IF EXISTS nested_test//
CREATE PROCEDURE nested_test()
BEGIN
    DECLARE a INT;
    SET a = 1;
    SELECT a;
    BEGIN
        DECLARE b INT;
        SET b = 2;
        SELECT b;
    END;
END//

DELIMITER;
```

这是我实际编写的内容的简化版本，它带来了完全相同的错误。在我添加嵌套的 BEGIN END 块之前，一切都很好。它在 phpMyAdmin 上运行良好，但在 Navicat 9 上失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:29:46.847

后面应该有一个空格`DELIMITER`。

```
DELIMITER ; 
```

像那样。

* * *

```
DELIMITER //

DROP PROCEDURE 
IF EXISTS nested_test//
CREATE PROCEDURE nested_test()
BEGIN
    DECLARE a INT;
    SET a = 1;
    SELECT a;
    BEGIN
        DECLARE b INT;
        SET b = 2;
        SELECT b;
     END;
END //

DELIMITER ; 
```

在执行时，它会生成：

> 0 行受影响，0 行找到。2 个查询的持续时间：0.000 秒。

# math - 这些函数是列优先还是行优先？

> ID：15583343
> 
> 赞同：1
> 
> 时间：2013-03-23T04:26:55.423
> 
> 标签：math, graphics, 3d, transformation, linear-algebra

我正在使用矩阵比较两个不同的 3D 图形线性数学库。以下是两个库中的两个类似的翻译函数：

```
static Matrix4<T> Translate(T x, T y, T z)
{
    Matrix4 m;
    m.x.x = 1; m.x.y = 0; m.x.z = 0; m.x.w = 0;
    m.y.x = 0; m.y.y = 1; m.y.z = 0; m.y.w = 0;
    m.z.x = 0; m.z.y = 0; m.z.z = 1; m.z.w = 0;
    m.w.x = x; m.w.y = y; m.w.z = z; m.w.w = 1;
    return m;
} 
```

（来自 SO 用户的 c++ 库）

```
static inline void mat4x4_translate(mat4x4 T, float x, float y, float z)
{    
mat4x4_identity(T);
T[3][0] = x;
T[3][1] = y;
T[3][2] = z;
 } 
```

（来自 SO 用户 datenwolf 的 linmath c 库）

我是新手，但我知道矩阵乘法的顺序很大程度上取决于您使用的是列优先格式还是行优先格式。

在我看来，这两个使用相同的格式，因为第一个索引被视为行，第二个索引是列。也就是说，两者`x y z`都应用于相同的第一个索引。这对我来说意味着行优先，因此矩阵乘法是左关联的（例如，您通常会`rotate * translate`按该顺序执行 a ）。

我在左关联上下文中多次使用了第一个示例，并且它一直按预期工作。虽然我没有使用过第二种，但作者说它是右关联的，但我无法看到两者格式之间的差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T11:25:51.233

> 在我看来，这两个使用相同的格式，因为第一个索引被视为行，第二个索引是列。

外观可能具有欺骗性，但实际上 linmath.h 中的第一个索引是列。C 和 C++ 指定在这样定义的多维数组中

```
sometype a[n][m]; 
```

连续有*n*次*m个**某种*类型的元素。如果它是行或列主要顺序仅取决于您如何解释索引。现在 OpenGL 定义了 4×4 矩阵，以下面的线性方案进行索引

```
0 4 8 c
1 5 9 d
2 6 a e
3 7 b f 
```

如果您应用 C++ 多维数组的规则，您将添加以下列行指定

```
 ----> n

|  0 4 8 c
|  1 5 9 d
V  2 6 a e
m  3 7 b f 
```

它将线性索引重新映射为 2 元组

```
0 -> 0,0
1 -> 0,1
2 -> 0,2
3 -> 0,3
4 -> 1,0
5 -> 1,1
6 -> 1,2
7 -> 1,3
8 -> 2,0
9 -> 2,1
a -> 2,2
b -> 2,3
c -> 3,0
d -> 3,1
e -> 3,2
f -> 3,3 
```

好的，OpenGL 和一些数学库使用列主排序，很好。但是为什么要这样做并打破通常的数学惯例，即在*M [i,j]*中索引*i*指定行而*j*指定列？因为它让事情看起来更好。你看，矩阵只是一堆向量。可以并且通常确实形成坐标基系统的向量。

看看这张照片：

![具有右手基向量的 3 维笛卡尔坐标系](../Images/93aeb5e403d1fe53133e652839835ac3.png)

X、Y 和 Z 轴本质上是向量。它们被定义为

```
X = (1,0,0)
Y = (0,1,0)
Z = (0,0,1) 
```

片刻，上面看起来不像一个单位矩阵吗？确实如此，而且确实*如此*！

然而，按原样写成矩阵是通过堆叠行向量形成的。矩阵乘法的规则本质上告诉我们，由行向量形成的矩阵，通过左关联乘法将行向量转换为行向量。列主矩阵通过右关联乘法将列向量转换为列向量。

现在这不是一个真正的问题，因为左关联可以做与右关联可以做的相同的事情，您只需将行交换为列（即转置）所有内容并反转操作数的顺序。然而，左<>右行<>列只是我们写东西的符号约定。

典型的数学符号是（例如）

```
v_clip = P · V · M · v_local 
```

这种符号可以直观地看到正在发生的事情。此外，在编程中，关键字符`=`通常指定从右到左的分配。一些编程语言在数学上的影响更大，比如 Pascal 或 Delphi 并编写它`:=`。无论如何，对于行主要排序，我们必须编写它

```
v_clip = v_local · M · V · P 
```

对于大多数数学家来说，这看起来很不自然。因为，从技术上讲，M、V 和 P 实际上是线性运算符（是的，它们也是矩阵和线性变换），运算符总是介于等式/赋值和变量之间。

所以这就是我们使用列主要格式的原因：它看起来更好。从技术上讲，它也可以使用行主要格式来完成。这与矩阵的内存布局有什么关系？好吧，当您想使用列主要顺序表示法时，您希望直接访问变换矩阵的基向量，而不需要它们逐个元素地提取它们。通过以列主要格式存储数字，访问矩阵的某个基向量所需要的只是线性内存中的简单偏移量。

我不能说另一个库的代码示例，但我强烈假设它也将第一个索引视为较慢的递增索引，如果受 OpenGL 的表示法影响，这使得它可以在主要列中工作。请记住：列主要和右关联性 == 行主要和左关联性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:16:41.397

张贴的片段不足以回答这个问题。它们可以是按行顺序存储的行优先矩阵，也可以是按列顺序存储的列优先矩阵。

如果您查看与适当矩阵相乘时如何处理向量，则可能会更明显。在行优先系统中，您会期望向量被视为单行矩阵，而在列优先系统中，它同样会是单列矩阵。然后，这决定了如何将向量和矩阵相乘。您只能将向量与矩阵相乘作为右侧的单列或左侧的单行。

GL 约定是列优先的，因此向量向右相乘。D3D 是行优先的，所以向量是行并且向左相乘。

在连接转换时需要考虑到这一点，以便以正确的顺序应用它们。

IE：

```
GL:
    V' = CAMERA * WORLD * LOCAL * V
D3D:
    V' = V * LOCAL * WORLD * CAMERA 
```

然而，他们选择存储他们的矩阵，使得内存中的表示实际上是相同的（直到我们进入着色器并且需要转置一些表示......）

# vim - 如何临时使我正在处理的窗口在 vim 中全屏显示？

> ID：15583346
> 
> 赞同：82
> 
> 时间：2013-03-23T04:27:38.437
> 
> 标签：vim

我使用 vim，通常打开多个垂直/水平窗口，通常在 cpp 文件旁边编辑 c++ 头文件。如何暂时将我正在处理的窗口设为全屏，编辑我想要的内容，然后退出全屏？

全屏我的意思是只适合 vim 窗口，而不是我的总显示屏幕。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-23T04:38:33.697

`Ctrl+W``_`将垂直最大化一个窗口。

`Ctrl+W``|`将水平最大化一个窗口。

据我所知，在这些操作之后无法恢复以前的布局，但`Ctrl+W``=`会将所有窗口的大小调整为相同的大小。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-03-23T08:40:46.240

一个选项可能是在新选项卡中进行编辑。以下命令将活动缓冲区打开到一个新选项卡中，允许您在 hole vim 窗口中查看缓冲区。

```
:tab split 
```

完成后关闭选项卡：

```
:tabc 
```

**编辑：**

您始终可以使用以下命令`tt`用作快捷方式（或更好地将其添加到您的`.vimrc`）：

```
:noremap tt :tab split<CR> 
```

完成后关闭：

```
:wq 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-23T05:13:29.790

如果我理解您的要求，我想您会发现[ZoomWin](http://www.vim.org/scripts/script.php?script_id=508)插件很有帮助 ( [GitHub](https://github.com/vim-scripts/ZoomWin) )。如果您有一堆拆分窗口，并且您想暂时使当前窗口成为唯一可见的窗口，您可以点击`<C-w>o`. 当你想恢复到之前的分裂状态时，`<C-w>o`再次点击。

**[编辑] 键映射注意事项：**

这个插件的默认键映射是`<C-w>o`，但这与默认的 Vim 键映射冲突。默认情况下，这样做`:only`会使当前窗口成为唯一的窗口。如果您想保留该功能，可以将 ZoomWin 重新映射到另一个键。我将它重新映射到`<C-w>w`，因为我也喜欢使用该`:only`选项。这是我的映射：

```
nnoremap <silent> <C-w>w :ZoomWin<CR> 
```

请注意，这也覆盖了与移动到其他可见窗口（`:help CTRL-W_w`）相关的默认 Vim 映射，但我从来没有使用过那个。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-04T08:15:02.277

ctrl-w_ - 最大化当前窗口

希望这可以帮助你。:)

这些是可以使用 VIM 编辑器实现的一些有用的命令

**:e 文件名** -*编辑另一个文件*

**:split filename** -*分割窗口并加载另一个文件*

**ctrl-w 向上箭头** -*将光标向上移动一个窗口*

**ctrl-w ctrl-w** -*将光标移动到另一个窗口（循环）*

**ctrl-w=** -*使所有大小相等*

**10 ctrl-w+** -*将窗口大小增加 10 行*

**:vsplit 文件** -*垂直分割*

**:sview 文件** -*与拆分相同，但只读*

**:hide** -*关闭当前窗口*

**:only** -*只保持这个窗口打开*

**:ls** -*显示当前缓冲区*

**:b 2** -*在此窗口中打开缓冲区 #2*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-05T23:36:44.670

[**vim-maximizer**](https://github.com/szw/vim-maximizer)是一个用于切换窗口全屏的很棒的插件。

安装后，您可以简单地使用`<F3>`（默认快捷方式）在窗口上切换全屏。

您还可以自定义快捷键，例如如果您想使用`<C-w> z`（类似于 tmux 快捷键）：

```
nnoremap <silent><C-w>z :MaximizerToggle<CR>
vnoremap <silent><C-w>z :MaximizerToggle<CR>gv
inoremap <silent><C-w>z <C-o>:MaximizerToggle<CR> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-12T14:25:39.713

我已经尝试过 ZoomWin 和其他一些。问题是，它们都破坏并尝试重新创建窗户。对于 NERDTree、Tagbar 和其他一些自定义插件，这尤其成问题。图标和字体未正确绘制，大小混乱等。

zoomwintab.vim 是一个简单的缩放窗口插件，它使用 vim 的选项卡功能以非破坏性方式放大受 ZoomWin 插件启发的窗口。

[https://github.com/troydm/zoomwintab.vim](https://github.com/troydm/zoomwintab.vim)

我使用 Tmux，所以我将它映射到`<leader> z`与 tmux 保持同步`<prefix> z`

```
nnoremap <leader>z :ZoomWinTabToggle<CR> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-11T15:42:57.707

不知何故，ZoomWin 插件对我来说根本不起作用，我的经历就像 arithran 所说的那样。我找不到其他插件所以我写了这个：

```
function! ToggleZoom(zoom)
  if exists("t:restore_zoom") && (a:zoom == v:true || t:restore_zoom.win != winnr())
      exec t:restore_zoom.cmd
      unlet t:restore_zoom
  elseif a:zoom
      let t:restore_zoom = { 'win': winnr(), 'cmd': winrestcmd() }
      exec "normal \<C-W>\|\<C-W>_"
  endif
endfunction

augroup restorezoom
    au WinEnter * silent! :call ToggleZoom(v:false)
augroup END
nnoremap <silent> <Leader>+ :call ToggleZoom(v:true)<CR> 
```

它创造了效果。您使用映射键（在我的情况下为 Leader 和 +）在最大化/以前的布局之间切换。如果您在同一选项卡中更改为另一个拆分，则最大化将关闭。

~~如果您更改选项卡，则拆分将保持最大化，尽管它不会再覆盖整个宽度，宽度最小化的窗口会重新获得大约 4 列或其他内容。无论如何，即使有那个小怪癖，它对我来说也是可以接受的。~~

**编辑：**不知何故它现在工作正常，以前一定是搞砸了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-20T17:37:27.643

Manoj 在某种程度上回答了更多有用的信息，但作为第一步，这对我有用：

`:hide`: 隐藏当前缓冲区 - 使用两个缓冲区拆分，这会使另一个缓冲区全屏。与 不同`:only`的是，此命令*不会*关闭未修改的缓冲区，因此您可以*取消隐藏*它们。

`:unhide`：为每个打开的缓冲区重新创建拆分

*取消隐藏*命令不会恢复以前的布局，因此如果需要，您必须手动重新排列窗口。使用其中之一进行简单的垂直/水平分割：

`CTRL-W H`: 将窗口移至最左侧
`CTRL-W J`: 将窗口移至最底部
`CTRL-W K`: 将窗口移至最顶部
`CTRL-W L`: 将窗口移至最右侧

这些是用于导航的相同键（单独使用时的光标，以及在窗口之间移动的`CTRL-W`+*小写字母*- 箭头键也可以用于导航）。`CTRL-W`+*大写*的会移动当前窗口。

# ios - ViewController 访问 CocosBuilder 创建的 CCScene 中的实例方法？

> ID：15583352
> 
> 赞同：0
> 
> 时间：2013-03-23T04:28:17.763
> 
> 标签：ios, cocos2d-iphone, cocosbuilder, ccscene

我举个例子来说明：

例如在 CocosBuilder 中，我创建了一个**Scene.ccbi** 及其自定义类**Scene**类

在**Scene header**中，我定义了一个方法：

```
-(void) doSomething; 
```

在**AppDelegate/ViewController**中，我调用 CCBReader 来创建 CCScene：

```
CCScene* myScene = [CCBReader sceneWithNodeGraphFromFile:@"Scene.ccbi"]; 
```

即 Scene.m 现在有它的实例。

至此，AppDelegate/ViewController 如何访问 Scene 的**实例方法**呢？例如，在 ViewController 内部：

```
Scene *ccbinstrance; // this is the part I don't know to link Scene*
[cbbinstance doSomething]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:08:13.700

似乎没有人对此有很好的答案。我有一个肮脏的方法来解决这个问题。我创建了一个静态单例对象并存储了 Scene 的这个引用。然后它可以被另一个 viewController 使用该单例对象调用。

这有点脏，但目前为我工作......

# sip - 为出站 SIP 配置 Kamailio/OpenSER 注册器/代理？

> ID：15583360
> 
> 赞同：1
> 
> 时间：2013-03-23T04:29:03.350
> 
> 标签：sip, voip, kamailio, openser, opensips

我已经为 SIP over websockets 设置了 Kamailio v4.0 SIP 注册器和代理，除了发送出站消息或对外部域上的 SIP 地址进行出站呼叫外，一切正常。我可以*接收*来自非本地 SIP 地址的消息和呼叫，但不能发出任何消息。

我试图理解各种模块的文档，比如`domain`and`outbound`我仍然很难过。我的配置文件与[这个](https://gist.github.com/jesusprubio/4066845)基本相同。

这感觉不像是配置，更像是学习一种新的编程语言。关于如何进行的任何想法？

编辑：在日志文件中发现以下内容：

```
INFO: rr [../outbound/api.h:49]: Failed to import bind_ob
INFO: rr [rr_mod.c:159]: outbound module not available 
```

重新编译`STUN=1`并加载`outbound.so`到配置中（这是在吠叫错误的树吗？）。现在日志说：

```
INFO: rr [rr_mod.c:156]: Bound rr module to outbound module
[...]
WARNING: <core> [msg_translator.c:2499]: TCP/TLS connection (id: 0) for WebSocket could not be found
ERROR: <core> [msg_translator.c:1725]: could not create Via header
ERROR: tm [t_fwd.c:435]: could not build request 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T16:31:59.437

日志表明找不到与 WebSocket 客户端的连接。Kamailio 无法打开与 WebSocket (webrtc) 软件电话的连接，如果不存在，则无法传递 SIP 消息。

您可以使用 kamcmd 工具列出活动的 TCP 连接：

```
kamcmd core.tcp_list 
```

如果您使用基于 TLS 的 WebSockets：

```
kamcmd tls.list 
```

在这种情况下应该使用一个配置函数 - **set_forward_no_connect()** - 以避免在处理过程中走得太远。

# perl - 读取增量然后写入 perl 中的文本文件

> ID：15583362
> 
> 赞同：1
> 
> 时间：2013-03-23T04:29:25.803
> 
> 标签：perl, file-io, increment

我有这个小 perl 脚本，它打开一个 txt 文件，读取其中的数字，然后用递增 1 的数字覆盖文件。我可以打开和读取文件，我可以写入文件，但我有问题覆盖。此外，我想知道是否有办法在不打开文件两次的情况下做到这一点。这是我的代码：

```
#!/usr/bin/perl

open (FILE, "<", "data.txt") or die "$! error trying to a\
ppend";

 undef $/;

$number = <FILE>;
$number = int($number);
$myNumber = $number++;
print $myNumber+'\n';
close(FILE);

open(FILE, ">data.txt") or die "$! error";
print FILE $myNumber;
close(FILE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:12:57.937

很高兴您使用了`open`第一次的三参数形式。您还需要在第二个`open`. 此外，您应该在脚本中使用词法变量，即以 . 开头的变量`my`——甚至用于文件句柄。

您可以只增加保存数字的变量，而不是将其传递给新变量。此外，使用`chomp`. 话虽如此，请考虑以下选项：

```
#!/usr/bin/env perl

use strict;
use warnings;

undef $/;

open my $fhIN, "<", "data.txt" or die "Error trying to open for reading: $!";
chomp( my $number = <$fhIN> );
close $fhIN;

$number++;

open my $fhOUT, ">", "data.txt" or die "Error trying to open for writing: $!";
print $fhOUT $number;
close $fhOUT; 
```

另一种选择是使用 Module [File::Slurp](http://search.cpan.org/~uri/File-Slurp-9999.19/lib/File/Slurp.pm)，让它处理所有 I/O 操作：

```
#!/usr/bin/env perl
use strict;
use warnings;
use File::Slurp qw/edit_file/;

edit_file { chomp; $_++ } 'data.txt'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T04:38:44.257

换行

```
$myNumber = $number++;
to 
$myNumber = $number+1; 
```

那应该可以解决问题。

以下是您只需打开文件一次的方法：

```
 open(FILE, "+<data.txt") or die "$! error";
 undef $/; 

 $number = <FILE>;
 $number = int($number);
 $myNumber = $number+1;
 seek(FILE, 0, 0); 
 truncate(FILE, tell FILE);
 print $myNumber+"\n";

 print FILE $myNumber;
 close(FILE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:33:53.693

尝试这个：

```
#!/usr/bin/perl
use strict;
use warnings;
my $file = "data.txt";
my $number = 0;
my $fh;
if( -e $file ) {
    open $fh, "+<", $file or die "Opening '$file' failed, because $!\n";
    $number = <$fh>;
    seek( $fh, 0, 0 );
} else {                  # if no data.txt exists - yet
    open $fh, ">", $file or die "Creating '$file' failed, because $!\n";
}
$number++;
print "$number\n";
print $fh $number;
close( $fh ); 
```

如果您使用的是 bash shell，并将代码保存到 test.pl，则可以使用以下命令对其进行测试：

```
for i in {1..10}; do ./test.pl; done 
```

然后'cat data.txt'，应该显示一个 10。

# ios - iOS 中的 TCP 套接字编程。服务器客户端响应

> ID：15583366
> 
> 赞同：0
> 
> 时间：2013-03-23T04:29:53.470
> 
> 标签：ios, objective-c, xcode, tcpclient, tcpsocket

我几乎完成了这项任务，但我陷入了困境，因为我得到了部分结果。我有服务器（linux 或 windows）和客户端（iOS），它们之间存在 TCP IP 套接字连接。我在我的 iphone 模拟器中使用了表单加载，其中服务器和 iphone 之间的连接在应用程序打开时自动发生。服务器将我在模拟器上发送的数据发回并在日志中打印。但我无法准确地收到整个回复。对于“创新”，我收到的可能只是“in”或“Innova”等。下面是代码片段。

```
void TCPClient()
{

    CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, host, port, &readStream, &writeStream);
    [NSThread sleepForTimeInterval:2]; //Delay

    CFWriteStreamSetProperty(writeStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);
    if(!CFWriteStreamOpen(writeStream))
    {
        NSLog(@"Error Opening Socket");
    }
    else
    {
        UInt8 buf[] = "Innovations";
        int bytesWritten = CFWriteStreamWrite(writeStream, buf, strlen((char*)buf));
        NSLog(@"Written: %d", bytesWritten);
    }
    CFReadStreamSetProperty(readStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);
    if(!CFReadStreamOpen(readStream))
    {
        NSLog(@"Error reading");
    }
    else
    {
        UInt8 bufr[15];
        int bytesRead  = CFReadStreamRead(readStream, bufr,strlen((char*)bufr));
        NSLog(@"Read: %d", bytesRead);
        NSLog(@"buffer: %s", bufr);
    }
} 
```

请注意，在阅读中我确实更改了数组大小。但我仍然得到错误。在按钮的 IBAction 的情况下也是如此。即使每次点击我都会发送数据并且我没有得到相同数据的响应。

可以提出宝贵的建议？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:08:04.250

一个错误是

```
int bytesRead  = CFReadStreamRead(readStream, bufr,strlen((char*)bufr)); 
```

应该

```
int bytesRead  = CFReadStreamRead(readStream, bufr, sizeof(bufr)); 
```

的最后一个参数`CFReadStreamRead`是读取缓冲区的*容量*，决定了读取的最大字节数。`strlen((char*)bufr)`是当前在缓冲区中的字符串的*长度。*您还应该`bufr`在打印之前对字符串进行 NULL 终止。

通过此修改，您的程序可能会使用短字符串。但是，一旦您尝试发送/接收大量数据，就会出现问题。

套接字写入可以写入的字节数少于您要求的字节数，而套接字读取可以返回的字节数少于您请求的字节数。

查看[Stream Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Streams/Streams.html#//apple_ref/doc/uid/10000188-SW1)，它描述了如何使用 runloop 注册套接字流并异步处理流事件。

# mysql - 将mysql数据添加到VB.NET中的列表框

> ID：15583370
> 
> 赞同：-3
> 
> 时间：2013-03-23T04:30:34.117
> 
> 标签：mysql, vb.net, listbox

我需要让 VB 从我的 MySQL 数据库中获取信息并将其放在列表框中。所以请你帮帮我。我似乎无法理解如何将其插入列表框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:34:33.793

我希望这段代码能帮助你了解你在寻找什么。

```
Private sub FillListBox

    Dim stringConn As String
    Dim stringCmd As String
    Dim myConn As MySqlConnection
    Dim myCmd As MySqlCommand

    'Frame your query here.
    stringCmd = "SELECT yourData FROM yourTable"

    'Frame your connection string here.
    stringConn = "SERVER=localhost;DATABASE=DBName;UID=root;PASSWORD=;"

    'Get your connection here.
    myConn = New MySqlConnection(stringConn)

    'Get a command by using your connection and query.
    myCmd = New MySqlCommand(stringCmd, myConn)

    'Open the connection.
    myConn.Open()

    'create a reader to store the datum which will be returned from the DB
    Dim myReader As MySqlDataReader

    'Execute your query using .ExecuteReader()
    myReader = myCmd.ExecuteReader()

    'Reset your List box here.
    ListBox1.items.clear()

    While (myReader.Read())
            'Add the items from db one by one into the list box.
        ListBox1.items.add(myReader.GetString(1))
    End While

    'Close the reader and the connection.
    myReader.Close()
    myConn.Close()

End Sub 
```

# matlab - 了解线的霍夫变换

> ID：15583372
> 
> 赞同：0
> 
> 时间：2013-03-23T04:30:39.253
> 
> 标签：matlab, line, hough-transform

我试图确切地了解它是如何工作的。我相信我理解这个概念：

对于所有边缘像素，找到所有穿过它的线，并且对于这些线中的每一条，将累加器数组值（对应于斜率和 y 截距）加 1。穿过许多边缘点的线将有很多票累加器数组。

我不明白的是我为实现它找到的代码。首先，我相信我们可以假设，在应用边缘检测器之后，边缘像素具有非零值，而非边缘为 0。在我教科书的代码中，程序搜索具有零值的所有点，并且，对于所有通过的线，将相应的累加器值增加 1。我认为它会寻找通过边缘点（非零）的线，而不是空白空间？有人可以向我解释这部分吗？

以下是我在一本图像处理教科书中找到的 Matlab 代码。我没有测试它，因为我正在使用 C++。%messages 是我对特定行的作用的理解：

```
function HTline(inputimage)

[rows,columns] = size(inputimage);

acc1 = zeros(rows,91);
acc2 = zeros(columns,91);

for x = 1:columns
  for y = 1:rows
    if(inputimage(x,y)==0                  %If pixel=0, i.e., non-edge
      for m = -45:45                       %For a certain range of slope values
        b = round(y-tan((m*pi)/180)*x);    %Calculate y-intercept for slope values
        if (b<rows & b>0)                  %If y-intercept is within the image height
          acc1(b,m+45+1)=acc1(b,m+45+1)+1; %Increase accumulator values. What?
        end
      end
      for m=45:135                         %etc
        b=round(x-y/tan((m*pi)/180));
        if(b<columns & b>0)
          acc2(b,m-45+1)=acc2(b,m-45+1)+1;
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:05:17.813

威廉，这取决于你如何定义优势所在。通常，图像被转换为​​一些二进制掩码，边缘值存储为 true (1s)，而非边缘值存储为 false (0s)，因此您的担忧似乎是正确的。也许如果你可以从你的书中添加一些上下文或一些释义，那么也许他们可以为他们为什么使用假（0）作为边缘值提供理由，但是任何一种表示都不能提供优于另一种的优势；这只是惯例。

请注意，您进行霍夫变换的方式是一种较旧的技术。大多数现代技术使用“正常脚”参数化（rho/theta）来解释直线垂直的情况。此外，有些人会使用sobel滤波器直接计算边缘点的梯度向量，这些点指向直线的法线方向。这允许您直接计算边缘点的单个 rho/theta 值，而不是计算通过这些点的线的所有可能性（如您的代码中所做的那样）。

但无论如何，对于您的情况，斜率和截距用于参数化线。这些值被分箱，然后放入累加器中，如代码所示。对于单个边缘点，有无数条线可以通过它，但这些线是通过仅使用斜率和截距的分箱值而变得有限的。在您的情况下，您使用 91 个可能的斜率值。共线的点将导致某些“箱”比其他“箱”积累更多的值。累加器中的这些局部峰值指示线（或更具体地说，如果使用边缘检测器，则更具体地说是边缘）在图像中的位置。[wikipedia article for the hough transform](http://en.wikipedia.org/wiki/Hough_transform)中给出了一个很好的例子。希望这对您的问题有所帮助。

# cocos2d-iphone - 将 Cocos2d 1.0 移植到 Cocos2d 2.0

> ID：15583378
> 
> 赞同：0
> 
> 时间：2013-03-23T04:32:30.947
> 
> 标签：cocos2d-iphone, box2d-iphone

我有一个旧游戏，我绑定更新 Cocos2d 2.0 SDK。我得到了一些编译错误。

```
b2Vec2 gravity;
gravity.Set(0.0f, -10.0f);
self.world = new b2World(gravity, true); 
```

> 错误：“b2World”的初始化没有匹配的构造函数

当我将其更改为下面的代码时，它可以工作，但不会绘制 Box2D 调试形状。

```
self.world = new b2World(gravity); 
```

如何以正确的方式初始化 Box2d 世界以显示调试形状？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:52:52.827

将 GLESDebugDraw 文件替换为新创建的 cocos2d 2.0 + Box2D 项目中的文件。您的版本仍在使用在 cocos2d 2.x 中不起作用的 GL ES 1.1 命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:28:22.963

最后我通过替换这个绘图函数和 GLESDebugDraw 文件得到了调试形状。

```
-(void) draw
{
    [super draw];
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();
    self.world->DrawDebugData();
    kmGLPopMatrix();
} 
```

# groovy - Griffon：为 JInternalFrame 执行代码时出错

> ID：15583379
> 
> 赞同：0
> 
> 时间：2013-03-23T04:32:34.260
> 
> 标签：groovy, griffon

我最近只是在谷歌搜索，想尝试下面的代码在 Griffon 1.2.0 中工作，但是当我运行它时，它给了我这样的错误：

```
2013-03-23 12:13:01,877 [main] DEBUG griffon.plugins.i18n.I18nEnhancer - Enhancing org.codehaus.groovy.runtime.HandleMetaClass@b7ea5c[groovy.lang.ExpandoMetaClass@b7ea5c[class griffon.swing.SwingApplication]] with griffon.plugins.i18n.MessageSourceHolder@7b7bee
2013-03-23 12:13:01,909 [main] ERROR griffon.util.GriffonExceptionHandler - Uncaught Exception
groovy.lang.GroovyRuntimeException: Cannot add new method [getMessage] for arguments [[class java.lang.String, class java.util.Locale]]. It already exists!
    at griffon.plugins.i18n.I18nEnhancer.enhance(I18nEnhancer.groovy:34)
    at griffon.plugins.i18n.I18nEnhancer.enhance(I18nEnhancer.groovy)
    at griffon.plugins.i18n.I18nEnhancer$enhance.call(Unknown Source)
    at I18nSupportGriffonAddon.addonPostInit(I18nSupportGriffonAddon.groovy:40)
    at griffon.core.GriffonAddon$addonPostInit.call(Unknown Source)
    at griffon.core.GriffonAddon$addonPostInit.call(Unknown Source)
    at org.codehaus.griffon.runtime.util.AddonHelper$_handleAddonsAtStartup_closure3.doCall(AddonHelper.groovy:110)
    at org.codehaus.griffon.runtime.util.AddonHelper.handleAddonsAtStartup(AddonHelper.groovy:108)
    at org.codehaus.griffon.runtime.core.DefaultAddonManager.doInitialize(DefaultAddonManager.java:33)
    at org.codehaus.griffon.runtime.core.AbstractAddonManager.initialize(AbstractAddonManager.java:101)
    at org.codehaus.griffon.runtime.util.GriffonApplicationHelper.initializeAddonManager(GriffonApplicationHelper.java:394)
    at org.codehaus.griffon.runtime.util.GriffonApplicationHelper.prepare(GriffonApplicationHelper.java:149)
    at org.codehaus.griffon.runtime.core.AbstractGriffonApplication.initialize(AbstractGriffonApplication.java:231)
    at griffon.swing.AbstractSwingGriffonApplication.bootstrap(AbstractSwingGriffonApplication.java:75)
    at griffon.swing.AbstractSwingGriffonApplication.run(AbstractSwingGriffonApplication.java:132)
    at griffon.swing.SwingApplication.run(SwingApplication.java:45)
    at griffon.swing.SwingApplication.main(SwingApplication.java:37)
   [delete] Deleting directory G:\latihan\outer\staging\windows 
```

这是代码，这是最初由 aalmiray 制作的

```
--- OuterController ---
package outer

class OuterController {
    def model
    def view
    def builder

    def newFrame = {
        String id = 'inner-' + System.currentTimeMillis()
        def (m, v, c) = createMVCGroup('inner', id, title: "Frame ${model.count++}")
        builder.desktopPane(view.desktop) {
            widget(v.innerFrame)
        }
    }
}

--- OuterModel ---
package outer

class OuterModel {
    int count = 1
}

--- OuterView ---
package outer

application(title: 'outer',
  preferredSize: [320, 240],
  pack: true,
  locationByPlatform:true,
  iconImage: imageIcon('/griffon-icon-48x48.png').image,
  iconImages: [imageIcon('/griffon-icon-48x48.png').image,
               imageIcon('/griffon-icon-32x32.png').image,
               imageIcon('/griffon-icon-16x16.png').image]) {
    borderLayout()
    button(newFrameAction, constraints: NORTH)
    desktopPane(id: 'desktop', constraints: CENTER)
}

--- InnerController ---
package outer

class InnerController {
    private String id
    def view

    void mvcGroupInit(Map args) {
        id = args.mvcName
    }

    void mvcGroupDestroy() {      
        execAsync {
            def desktop = view.innerFrame.parent
            desktop.remove view.innerFrame
            desktop.invalidate()
            desktop.repaint()
        }
    }

    def close = {
        destroyMVCGroup id
    }
}

--- InnerView ---
package outer

internalFrame(title: title, size: [200, 200], id: 'innerFrame',
    visible: true, iconifiable: true, maximizable: true,
    resizable: true, closable: true) {
    gridLayout(cols: 1, rows: 2)
    label 'Content goes here'
    button closeAction    
} 
```

我需要你的帮助。

问候，亨德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:45:16.490

Gievn 错误消息我会说你安装了 i18n 和 i18n-support 插件。自 Griffon 1.1.0 起不再需要这些插件。卸载插件将解决您的问题。

原因是这些插件提供的功能从 1.1.0 开始在 Griffon 核心中可用，因此这些插件会产生冲突。

# php - 如果 php 登录检查失败，则运行 Jquery 登录表单

> ID：15583380
> 
> 赞同：0
> 
> 时间：2013-03-23T04:32:41.913
> 
> 标签：php, javascript, jquery, html

如果登录检查失败，我不想重定向到新页面，而是想留在页面上并模拟单击登录按钮，这会弹出登录表单。有任何想法吗？

使用 php 重定向的蹩脚尝试没有做任何想做的事情：

```
function logincheck($redirect='')
{
if(!isset($_SESSION['duser']['id']))
{
    if($redirect)
    {
        header("Location: ".$config['site_url']."index.php? redirect=".urlencode($redirect));
    }
    else
    {
        header("Location: ".$config['site_url']."index.php#login-box");

    }
    exit;
}
} 
```

HTML 按钮：

```
<li><a class="log" href="#login-box"></a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:16:12.963

如果用户登录或未登录，则在您`<head></head>` 定义一个 javascript 变量，例如

```
<script type="text/javascript" />
var logged_in = <?  if(!isset($_SESSION['duser']['id'])){ 
                       echo "FALSE";
                    }else{
                       echo "TRUE";
                    }
                ?>
</script> 
```

现在，当您使用 javascript 加载页面检查时，如果 logged_in 为 TRUE 或 FALSE，并基于此运行 javascript 以弹出登录面板

希望能帮助到你 ：）

# jquery-ui - jQuery 菜单用户界面。如何在指定中显示选择值

> ID：15583387
> 
> 赞同：0
> 
> 时间：2013-03-23T04:34:25.123
> 
> 标签：jquery-ui

我嵌套了无序列表来创建一个 Jquery UI 菜单，当您将鼠标悬停在第一个菜单选项上时它会展开。我想要发生的是菜单选择显示在您选择后看到的第一个菜单选项的位置。出于某种原因，使用 .val 或 .html 对我不起作用。这是我的代码。

```
//this is where I try to take the selection and put it in in the <li> with the id 'input'.

<script>
 $(function() {
$( "#menu" ).menu({
select: function( event, ui ) {
    var selection = ui.item.text();
    $("#input").html() = selection;
}
});
}); 
</script>

// the options below "Choose Activity" expand when you hover over "Choose Activity". 
```

我希望其中一个选项在被选中后取代“选择活动”。

```
<ul id="menu">
   <li>
        <a href="#" id="input">Choose Activity?</a> 

          <ul>
            <li><a href="#">Run Marathon</a></li>
            <li><a href="#">Weight lifting</a></li>
            <li><a href="#">Swimming</a></li>
            <li><a href="#">Boxing</a></li>
          </ul>
   </li>
   <li>
         //another line item
   </li>

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:35:56.390

[.html()](http://api.jquery.com/html/)是一个获取/设置给定元素的 innerHTML 的函数。由于它是一个函数，因此您需要将内容作为参数传递给函数调用。

应该`$("#input").html(selection);`不是`$("#input").html() = selection;`

# javascript - Document.body 不存在。Modernizr 连字符测试需要它

> ID：15583390
> 
> 赞同：2
> 
> 时间：2013-03-23T04:34:49.250
> 
> 标签：javascript, jquery, modernizr

我希望我能解释导致这个问题的原因。我已经搜索过了，根本不知道。当我在项目之间移动这个 Foundations、Red 等框架时，它往往会遵循。任何建议都会很有用。

[http://goo.gl/HbTUL](http://goo.gl/HbTUL)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T06:49:14.707

您正在加载自定义的 Modernizr 库（使用导致问题的连字符），`<head>`此时该库`<body>`尚不存在，因此出现错误。

一个明显的解决方案是将 Modernizr 库的加载移动到页面底部（在或之后`<body>`），尽管[这](http://modernizr.com/docs/#installing)表明这样做可能会导致一些问题。如果是这样，请尝试将 Hyphenator 与 Modernizr 库分开并单独加载。

# php - 如何回显错误类以标记和形成有错误的元素？

> ID：15583391
> 
> 赞同：0
> 
> 时间：2013-03-23T04:35:02.303
> 
> 标签：php, arrays, validation, multidimensional-array, error-handling

我正在使用 PHP 验证库。它仅附带一个示例，说明如何在表单顶部显示错误列表。

我怎样才能做到这一点，以便它会在标签和表单元素中为当前错误的每个字段回显'class =“error”'？

**表单 HTML：**

```
<table>
  <tr>
    <td align="right"><label for="first_name">First Name</label></td>
    <td>:</td>
    <td><input type="text" name="first_name" id="first_name"></td>
  </tr>
  <tr>
    <td align="right"><label for="last_name">Last name</label></td>
    <td>:</td>
    <td><input type="text" name="last_name" id="last_name"></td>
  </tr>
  <tr>
    <td align="right"><label for="phone">Phone</label></td>
    <td>:</td>
    <td><input type="text" name="phone" id="phone"></td>
  </tr>
  <tr>
    <td align="right"><label for="email">Email</label></td>
    <td>:</td>
    <td><input type="text" name="email" id="email"></td>
  </tr>
  <tr>
    <td align="right"><label for="state">State</label></td>
    <td>:</td>
    <td>
      <select name="state">
        <option value="">Select</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
      </select>
    </td>
  </tr>
</table> 
```

**PHP 错误数组转储：**

```
array(5) {
  ["first_name"]=>
  string(30) "First Name is a required field"
  ["last_name"]=>
  string(29) "Last Name is a required field"
  ["phone"]=>
  string(25) "Phone is a required field"
  ["email"]=>
  string(25) "Email is a required field"
  ["state"]=>
  string(21) "Please select a state"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:49:48.117

像这样的东西

```
 <?php

    foreach($errorArray as $key=>$value)
    {
        $class = "$key_error";
        $$class = "class=error";
    }

?>

<table>
<tr>
<td align="right"><label for="first_name" <?php echo $first_name_error?>>First Name</label>      </td>
<td>:</td>
<td><input type="text" <?php echo $first_name_error?> name="first_name" id="first_name"></td>
</tr>
<tr>
<td align="right"><label <?php echo $last_name_error?> for="last_name">Last name</label></td>
<td>:</td>
<td><input type="text" <?php echo $last_name_error?> name="last_name" id="last_name"></td>
</tr>
   -------------
  </tr>
</table> 
```

# javascript - $.getJSON 数据未定义

> ID：15583400
> 
> 赞同：-1
> 
> 时间：2013-03-23T04:36:11.660
> 
> 标签：javascript, jquery, json, foreach, getjson

我从 iTunes API 获取 JSON 数据，但是当我 console.log 我的数据时，它说它未定义，我做错了什么吗？

jQuery

```
$(document).ready(function() {
    $.getJSON("http://itunes.apple.com/search?term=angry&limit=4&media=software&callback=?",function(data) {

        $.each(data, function(index, element) {
            console.log(element.artistName);
        });
    }); 
}); 
```

JSON

```
jQuery19108565351243602318_1364012908350(
{
 "resultCount":1,
 "results": [
{"kind":"software", "features":["gameCenter"], "supportedDevices":["iPad3G", "iPodTouchourthGen", "iPhone-3GS", "iPodTouchThirdGen", "iPad23G", "iPhone4", "iPadWifi", "iPad2Wifi"], "isGameCenterEnabled":true, 
"screenshotUrls":["http://a786.phobos.apple.com/us/r1000/069/Purple2/v4/61/c6/55/61c655ac-5c32-c9d6-61c1-d4025c5822ed/mzl.babhynjf.png", "http://a1425.phobos.apple.com/us/r1000/061/Purple/v4/c1/f3/51/c1f35156-fc04-bd31-bb92-b695043e922c/mzl.vzvfrzpz.png", "http://a712.phobos.apple.com/us/r1000/068/Purple2/v4/ea/40/5a/ea405a80-c31d-6061-cc7c-3f88d4d80659/mzl.zmdognad.png", "http://a1974.phobos.apple.com/us/r1000/063/Purple/v4/c1/b1/53/c1b153df-3657-1b84-350d-257201dab7b2/mzl.qwyhrzas.png", "http://a294.phobos.apple.com/us/r1000/061/Purple2/v4/c2/b0/d2/c2b0d22c-a3fe-0afc-8766-3def3d3bac57/mzl.szsfyhqo.png"], "ipadScreenshotUrls":[], "artworkUrl60":"http://a1102.phobos.apple.com/us/r1000/061/Purple2/v4/49/b6/7d/49b67d81-a95a-bbee-fc02-486f8ee174d8/Icon.png", "artworkUrl512":"http://a141.phobos.apple.com/us/r1000/105/Purple2/v4/9a/2a/1e/9a2a1e43-fbd5-32d7-53c7-9490d77ce891/mzl.wepjpyjw.png", "artistViewUrl":"https://itunes.apple.com/us/artist/rovio-entertainment-ltd/id298910979?uo=4", "artistId":298910979, "artistName":"Rovio Entertainment Ltd", "price":0.99, "version":"3.1.0", 
"description":"Use the unique powers of the Angry Birds to destroy the greedy pigs' defenses!\u2028\u2028\n\nThe survival of the Angry Birds is at stake. Dish out revenge on the greedy pigs who stole their eggs. Use the unique powers of each bird to destroy the pigs\u2019 defenses. Angry Birds features challenging physics-based gameplay and hours of replay value. Each level requires logic, skill and force to solve.\u2028\u2028\n\nIf you get stuck in the game, you can purchase the Mighty Eagle! Mighty Eagle is a one-time in-app purchase in Angry Birds that gives unlimited use. This phenomenal creature will soar from the skies to wreak havoc and smash the pesky pigs into oblivion. There\u2019s just one catch: you can only use the aid of Mighty Eagle to pass a level once per hour. Mighty Eagle also includes all new gameplay goals and achievements!\u2028\u2028\n\nIn addition to the Mighty Eagle, Angry Birds now has power-ups! Boost your birds\u2019 abilities and three-star levels to unlock secret content! Angry Birds now has the following amazing power-ups: Sling Scope for laser targeting, King Sling for maximum flinging power, Super Seeds to supersize your birds, and Birdquake to shake pigs\u2019 defenses to the ground!\u2028\u2028\n\n#1 IPHONE PAID APP in US, UK, Canada, Italy, Germany, Russia, Sweden, Denmark, Finland, Singapore, Poland, France, Netherlands, Malta, Greece, Austria, Australia, Turkey, UAE, Saudi Arabia, Israel, Belgium, Norway, Hungary, Malaysia, Luxembourg, Portugal, Czech Republic, Spain, Ireland, Romania, New Zealand, Latvia, Lithuania, Estonia, Nicaragua, Kazakhstan, Argentina, Bulgaria, Slovakia, Slovenia, Mauritius, Chile, Hong Kong, Pakistan, Taiwan, Colombia, Indonesia, Thailand, India, Kenya, Macedonia, Croatia, Macau, Paraguay, Peru, Armenia, Philippines, Vietnam, Jordan and Kuwait. \u2028\u2028\n\nNote: if you are having a problem with your device crashing after installing the update, try shutting down and restarting the device. If you are still having problems, contact support@rovio.com.\n\n#1 IPHONE PAID GAME in more countries than we can count!\n\nTerms of Use: http://www.rovio.com/eula\u2028\nPrivacy Policy: http://www.rovio.com/privacy\u2028\n\nThis application may require internet connectivity and subsequent data transfer charges may apply.", "currency":"USD", "genres":["Games", "Entertainment", "Action", "Arcade"], "genreIds":["6014", "6016", "7001", "7003"], "releaseDate":"2009-12-11T08:00:00Z", "sellerName":"Rovio Entertainment Ltd", "bundleId":"com.clickgamer.AngryBirds", "trackId":343200656, "trackName":"Angry Birds", "primaryGenreName":"Games", "primaryGenreId":6014, "releaseNotes":"Check out 15 fantastic new levels for the Bad Piggies episode! OINK!", "formattedPrice":"$0.99", "wrapperType":"software", "trackCensoredName":"Angry Birds", "languageCodesISO2A":["EN"], "fileSizeBytes":"35746968", "sellerUrl":"http://www.angrybirds.com/", "contentAdvisoryRating":"4+", "averageUserRatingForCurrentVersion":4.5, "userRatingCountForCurrentVersion":1302, "artworkUrl100":"http://a141.phobos.apple.com/us/r1000/105/Purple2/v4/9a/2a/1e/9a2a1e43-fbd5-32d7-53c7-9490d77ce891/mzl.wepjpyjw.png", "trackViewUrl":"https://itunes.apple.com/us/app/angry-birds/id343200656?mt=8&uo=4", "trackContentRating":"4+", "averageUserRating":4.5, "userRatingCount":821819}]
}
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:40:44.773

它应该是

```
$.each(data.results, function(index, element) {
    console.log(element.artistName);
}); 
```

`data`是一个有两个属性`resultCount`和的对象`results`，实际的数据数组存储在 中`results`，所以你需要遍历`data.results`而不是`data`。

# angularjs - angularjs中的CacheFactory是单例吗？

> ID：15583403
> 
> 赞同：6
> 
> 时间：2013-03-23T04:36:14.913
> 
> 标签：angularjs, angularjs-service

我已经使用 CacheFactory 创建了一个服务。我期待它是一个单身人士。我将它注入我的控制器，它在控制器的范围内工作正常。但是，一旦我转到具有不同范围的不同页面，我似乎没有缓存中的值，这些值存储在不同范围的同一控制器中。CacheFactory 的行为不应该是一个单例，在我注入 CacheService 的任何地方都有相同的缓存对象吗？

以我的服务为例：

```
angular.module('MyService', []).factory('CacheService', function($cacheFactory) {
        return $cacheFactory('cacheService', {
            capacity: 3 // optional - turns the cache into LRU cache
        })
    }); 
```

然后在我的控制器中：

```
function MyController($scope, CacheService) {
   var results= CacheService.get('storedvalue');
   if(!results){
       CacheService.put('storedvalue', results);
      alert('results not stored');
   }
   else
      alert('results stored');
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-23T05:04:08.123

`$cacheFactory`实际上不是您要使用的服务 - 它是您用来*创建*要使用的单例服务的工厂。观察您的代码，它似乎应该可以工作。但我继续创建了一个演示来证明它确实如此。这是服务：

```
.factory('CacheService', function($cacheFactory) {
   var cache = $cacheFactory('cacheService', {
     capacity: 3 // optional - turns the cache into LRU cache
   });

   return cache;
}); 
```

在此示例中，`CacheService` *是*具有使用 创建的本地缓存的单例`$cacheFactory`，这是我们从服务返回的内容。我们可以将它注入到我们想要的任何控制器中，它总是会返回相同的值。

这是一个工作 Plunker：[http ://plnkr.co/edit/loKWGms1lMCnmiWa1QA7?p=preview](http://plnkr.co/edit/loKWGms1lMCnmiWa1QA7?p=preview)

* * *

如果由于某种原因您的帖子不包含破坏代码的内容，请随时更新我的​​ Plunker 以破坏它，我们可以从那里开始。

# javascript - 使用 Javascript on Rails 应用程序进行客户端地理编码

> ID：15583404
> 
> 赞同：0
> 
> 时间：2013-03-23T04:36:22.663
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, google-maps-api-3, heroku

由于我遇到的这个问题（超过 Heroku 的查询限制），我正在尝试客户端地理编码：[https](https://github.com/alexreisner/geocoder/issues/222) ://github.com/alexreisner/geocoder/issues/222 。

我的网址中的纬度/经度显示但是我无法显示我的搜索结果。

我认为问题出在第 10 行附近的 index.html.erb 中：<% if params[:search].present? %>

B/c 在我的浏览器中执行搜索查询时，调试参数显示参数，它绕过“if”语句并执行“else”，推断不存在搜索参数或者我是没有正确说明“if”语句。

示例搜索：

**网址：**`http://localhost:3000/places?utf8=✓&amp;q=hoover%2C+alabama&c=%2833.4053867%2C+-86.81137810000001%29`

**调试参数：** Hello --- !ruby/hash:ActiveSupport::HashWithIndifferentAccess utf8: ✓ q: hoover, alabama c: (33.4053867, -86.81137810000001) action: index controller: places

关于为什么我的搜索结果没有显示的想法？请查看我在这篇文章下方的评论，以获取我的相关代码的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:31:48.780

嗯，我认为你的 form_tag 方法应该是 post 而不是 get？

# c# - 提供的 URI 方案“http”无效；预期的“https”。参数名称：via

> ID：15583413
> 
> 赞同：0
> 
> 时间：2013-03-23T04:37:34.943
> 
> 标签：c#, .net, wcf, iis, deployment

我认为我创建了一个新问题，因为我[之前的问题](https://stackoverflow.com/questions/15582721/the-server-was-unable-to-process-the-request-due-to-an-internal-error-wcf-ser)充满了噪音。无论如何，我在那里完成了建议，现在当我尝试访问客户端时出现以下错误。

堆栈跟踪：

```
[ArgumentException: The provided URI scheme 'http' is invalid; expected 'https'.
Parameter name: via]
   System.ServiceModel.Channels.TransportChannelFactory`1.ValidateScheme(Uri via) +12692384
   System.ServiceModel.Channels.HttpChannelFactory`1.ValidateCreateChannelParameters(EndpointAddress remoteAddress, Uri via) +24
   System.ServiceModel.Channels.HttpsChannelFactory`1.ValidateCreateChannelParameters(EndpointAddress remoteAddress, Uri via) +276
   System.ServiceModel.Channels.HttpsChannelFactory`1.OnCreateChannelCore(EndpointAddress address, Uri via) +29
   System.ServiceModel.Channels.HttpChannelFactory`1.OnCreateChannel(EndpointAddress remoteAddress, Uri via) +71
   System.ServiceModel.Channels.ChannelFactoryBase`1.InternalCreateChannel(EndpointAddress address, Uri via) +52
   System.ServiceModel.Channels.ChannelFactoryBase`1.CreateChannel(EndpointAddress address, Uri via) +55
   System.ServiceModel.Channels.ServiceChannelFactoryOverRequest.CreateInnerChannelBinder(EndpointAddress to, Uri via) +35
   System.ServiceModel.Channels.ServiceChannelFactory.CreateServiceChannel(EndpointAddress address, Uri via) +23
   System.ServiceModel.Channels.ServiceChannelFactory.CreateChannel(Type channelType, EndpointAddress address, Uri via) +71
   System.ServiceModel.ChannelFactory`1.CreateChannel(EndpointAddress address, Uri via) +468
   System.ServiceModel.ChannelFactory`1.CreateChannel() +29
   System.ServiceModel.ClientBase`1.CreateChannel() +95
   System.ServiceModel.ClientBase`1.CreateChannelInternal() +23
   System.ServiceModel.ClientBase`1.get_Channel() +281
   _Default.btSubmit_click(Object sender, EventArgs e) +73
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +9553178
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +103
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

这是 web.config（用于客户端应用程序）：

```
<configuration>
    <connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
    </connectionStrings>
    <system.web>
        <compilation debug="false" targetFramework="4.0">
            <assemblies>
                <add assembly="mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies></compilation>
        <authentication mode="Forms">
            <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
        </authentication>
        <membership>
            <providers>
                <clear/>
                <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
            </providers>
        </membership>
        <profile>
            <providers>
                <clear/>
                <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
            </providers>
        </profile>
        <roleManager enabled="false">
            <providers>
                <clear/>
                <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/"/>
                <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/"/>
            </providers>
        </roleManager>
    </system.web>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
        <binding name="BasicHttpBinding_IService">
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="Certificate" algorithmSuite="Default" />

           </security>
        </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://10.0.2.141/Services/SunSetSunRiseService/Service.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService" contract="ServiceReference1.IService" name="BasicHttpBinding_IService"/>
        </client>
    </system.serviceModel>
</configuration> 
```

我已尝试在相关问题中实施建议，但尚未找到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T12:24:32.077

在您的 web.config 中，将端点 URL 更改为 https://...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:42:07.633

你可以用`Mex binding`这个来代替。

除了 mex 绑定之外，还有其他几种选择。

结帐以下链接>>

[http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi](http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi)

# boost - 用 boost 替换 Poco::AutoPtr

> ID：15583414
> 
> 赞同：1
> 
> 时间：2013-03-23T04:37:37.570
> 
> 标签：boost, shared-ptr, smart-pointers, poco-libraries

我正在尝试`Poco::AutoPtr`用 boost 中的一些替代方法来代替。这是我迄今为止发现的：

我所拥有的：以下类正在与`Poco::AutoPtr`. 他们需要使用实现`duplicate()`和方法来实现引用计数`release()`方法。

我在上面`referece_counted.h`和`Poco::AutoPtr`复杂的类层次结构中使用多重继承和 C++ 菱形问题。

类的简化版本看起来像这样

```
class A : virtual public ReferenceCounted
{
...
}

class B : public A
{
...
}

class C : public A
{
...
}

class D : public A, B
{
...
} 
```

并且列表继续深入几个层次。我知道这需要使用简化的层次结构进行重构，但我想`Poco::AutoPtr`首先在 boost 中通过适当的替换来删除：

到目前为止我发现了什么：我发现[boost::intrusive_ptr](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/intrusive_ptr.html)是最接近的智能指针，可以很好地替代`Poco::AutoPtr`.

然而，我无法用这个实现正确的解决方案，因为 intrusive_ptr 需要专门为每个需要使用指针的类创建的 intrusive_ptr_add_ref 和 intrusive_ptr_release 方法。我尝试使用模板，但手头仍然没有合适的解决方案。

还有一个问题是我需要多次从基类转换为派生类。

intrusive_ptr 是这种用法的正确智能指针吗？如果是的话..有人可以给我关于如何使用它的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:50:01.573

> 然而，我无法用这个实现正确的解决方案，因为 intrusive_ptr 需要专门为每个需要使用指针的类创建的 intrusive_ptr_add_ref 和 intrusive_ptr_release 方法。

不，不。这应该不难。正如[Boost 文档](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/intrusive_ptr.html)所说：

> 在支持依赖参数查找的编译器上，intrusive_ptr_add_ref 和 intrusive_ptr_release 应该定义在与其参数对应的命名空间中；否则，**定义需要进入命名空间 boost**。

试试这个：main.cpp（用“g++ main.cpp -o main -lboost_system”构建好）

```
#include <boost/intrusive_ptr.hpp>  

class MyObject
{
  public:
    void duplicate(){ 
       // ...
    }
    void release(){
       // ...
    }
};

namespace boost {

template <class T>
void intrusive_ptr_add_ref( T * po ) {
    po->duplicate(); // your internal realization
}

template <class T>
void intrusive_ptr_release( T * po ) {
    po->release(); 
}

}        

int main(int argc, char **argv)
{
    // ...
    boost::intrusive_ptr<MyObject> ptr( new MyObject );
    boost::intrusive_ptr<MyObject> ptr2 = ptr; // should work
} 
```

# java - “使用布尔文字进行相等性测试” - 测试布尔值和使用 == 之间的区别

> ID：15583415
> 
> 赞同：3
> 
> 时间：2013-03-23T04:37:59.767
> 
> 标签：java, coding-style, codepro

我正在使用[Code Pro](https://developers.google.com/java-dev-tools/download-codepro)查看我的应用程序代码，并且该工具报告了以下消息：

> 警告：使用布尔文字进行相等性测试

对于此代码：

```
boolean valid;
if(valid == true) 
```

可以使用以下方法修复：

```
if(valid) 
```

我有两个问题：

1.  这只是一个好的编码习惯吗？
2.  在内存优化或性能优化方面还有其他好处吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T04:49:16.613

对于更直接的布尔表达式：

```
boolean valid = true;

if(valid) {
} 
```

生成以下字节码：

```
0: iconst_1      
1: istore_1      
2: iload_1       
3: ifeq          6
6: return 
```

而通过扩展比较：

```
boolean valid = true;

if(valid == true) {
} 
```

生成以下字节码：

```
0: iconst_1      
1: istore_1      
2: iload_1       
3: iconst_1      
4: if_icmpne     7
7: return 
```

我怀疑`ifeq`和`if_icmpne`不同的执行速度，所以额外的成本`if(valid == true)`实际上只是额外的常数值，可以忽略不计。

总而言之，实际上没有性能差异，并且 CodePro 仅将您的代码标记为最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:43:24.597

我会说这更像是一种很好的做法。一、代码更紧凑。第二，代码读起来更像自然语言。

我不知道一种或另一种方式是否有任何好处。我的猜测是 Java 编译器非常成熟，两个选项的性能大致相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T06:05:20.217

> 这只是一个好的编码习惯吗？

是的。两个原因：

*   这个`b == true`成语冗长且语言丑陋。（你会问，“教皇是天主教徒是真的吗？”或“教皇是天主教徒吗？”......？）

*   该`b == true`成语是 Java 中唯一一种可能被误写为`b = true`.

> 在内存优化或性能优化方面还有其他好处吗？

几乎可以肯定不是。

当这两位代码产生不同的字节码时，JIT 编译器很可能会将它们转换为相同的本机指令序列，或者具有相同性能的序列。（如果不是，那么优化器“错过了一个技巧”）。

无论哪种方式，差异都可能太小而不能太小而不能显着。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T04:41:02.200

行为没有区别，虽然我不能对每个 JVM 发表权威的看法，但很难想象会有任何性能差异可言。

# flash - Actionscript 2 基于图块的大型地图创建滞后

> ID：15583420
> 
> 赞同：2
> 
> 时间：2013-03-23T04:38:21.640
> 
> 标签：flash, actionscript, actionscript-2, lag, tile

我想知道使用 actionscript 2 在 Flash 中创建大型、基于图块的地图的最佳方法是什么。

使用我当前的代码，任何超过 35x35（1225 个影片剪辑）的地图都会开始滞后。这些地图是从一个简单的多维数组创建的，例如。

```
var map = [[95,23,25,23,16,25],[95,23,25,23,16,25],[95,23,25,23,16,25]]; 
```

该程序简单地创建一个瓦片的电影剪辑，转到适当的帧并相对于玩家的位置放置瓦片。每个图块都有一个属性，即“可行走”，它是真还是假，它决定了玩家是否可以在上面行走。这些图块是持有人影片剪辑的子项。当玩家移动时，持有者影片剪辑被移动（无论其中包含多少瓷砖）。

减少大比例地图滞后的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:57:10.787

如果一次只能看到大地图的一小部分，我只会为当前可见的图块创建子影片剪辑图块，然后在视口移动时添加/删除它们。

另一方面，如果您要一次显示整个内容，您可能需要使用`BitmapData`该类以图形方式将所有图块复制到单个大型影片剪辑中。然后您可以删除影片剪辑图块，以便 Flash 只需滚动一个大影片剪辑。

根据您的瓷砖是什么，您还可以尝试设置`cacheAsBitmap`为 true 以及分配`opaqueBackground`所有涉及的动画剪辑。

# javascript - 如何将 javascript onSubmit 与 jQuery 提交匹配？

> ID：15583423
> 
> 赞同：0
> 
> 时间：2013-03-23T04:39:05.363
> 
> 标签：javascript, jquery, forms, onsubmit, form-submit

我有一个表格

```
<form id="add_list_form">
    ...
</form> 
```

然后使用 jQuery 我可以做到：

```
$("#add_list_form").submit(function(){
    $(this).serializeArray()
}); 
```

这将起作用。

但如果我使用`onSubmit`：

```
<form onsubmit="addListForm(event);">
    ...
</form>

function addListForm(e)
{
    $(this).serializeArray()
} 
```

它似乎不起作用，在我的情况下，我从我的页面女巫获得了一些其他形式的序列化，我认为这是一个错误

有什么想法可以实现像 jQuery`submit`事件一样的效果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:46:56.203

您无法访问`this`using `onsubmmit`，将源对象 ( `form`) using`this`传递给`addListForm`

```
<form onsubmit="addListForm(this, event);">
    ...
</form>

function addListForm(form, e)
{
    $(form).serializeArray()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:46:49.113

你没有经过`FORM object`里面`function`，所以怎么`$(this)`会得到想要`FORM`的。

尝试

```
<form onsubmit="addListForm(this.form);">
    ...
</form>

function addListForm(form)
{
    $(form).serializeArray()
} 
```

`argument`你里面送的不止一个`function`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:47:33.503

尝试这个...

```
 <form onsubmit="addListForm(this);">
        ...
    </form> 
```

或者

```
<form action="addListForm(this);">
            ...
        </form> 
```

# c++ - 操作员无法正常工作需要帮助

> ID：15583424
> 
> 赞同：1
> 
> 时间：2013-03-23T04:39:14.213
> 
> 标签：c++, arrays, debugging, operators, output

我的程序快完成了，但是输出没有得到正确的数字。

```
Baby names: 
 1\. Reading file: "src/people.txt" ... Number of lines in text file: 258000 number of lines in file is: 15 file has been read!
 2\. Sorted by popularity:
  BabyNames object 
    1:  John 1880 0.081541 0
    2:   0 0 0
    3:   0 0 0
    4:   0 0 0
    5:   0 0 0
    6:   0 0 0
    7:   0 0 0
    8:   0 0 0
    9:   0 0 0
    10:   0 0 0
    11:   0 0 0
    12:   0 0 0
    13:   0 0 0
    14:   0 0 0
    15:   0 0 0
 3\. Sorted by name:
  BabyNames object 
    1:  John 1880 0.081541 0
    2:   0 0 0
    3:   0 0 0
    4:   0 0 0
    5:   0 0 0
    6:   0 0 0
    7:   0 0 0
    8:   0 0 0
    9:   0 0 0
    10:   0 0 0
    11:   0 0 0
    12:   0 0 0
    13:   0 0 0
    14:   0 0 0
    15:   0 0 0
 4\. Sorted by year:
  BabyNames object 
    1:  John 1880 0.081541 0
    2:   0 0 0
    3:   0 0 0
    4:   0 0 0
    5:   0 0 0
    6:   0 0 0
    7:   0 0 0
    8:   0 0 0
    9:   0 0 0
    10:   0 0 0
    11:   0 0 0
    12:   0 0 0
    13:   0 0 0
    14:   0 0 0
    15:   0 0 0
 5\. Original names:
  BabyNames object 
    1:  John 1880 0.081541 0
    2:   0 0 0
    3:   0 0 0
    4:   0 0 0
    5:   0 0 0
    6:   0 0 0
    7:   0 0 0
    8:   0 0 0
    9:   0 0 0
    10:   0 0 0
    11:   0 0 0
    12:   0 0 0
    13:   0 0 0
    14:   0 0 0
    15:   0 0 0
Destructor to deallocate memory... Done!
Destructor to deallocate memory... Done!
Destructor to deallocate memory... Done!
Destructor to deallocate memory... Done!
... all done! 
```

这就是它打印的内容。所有的 2-15 都应该有名字和统计数据，但由于某种原因，它都是 0。

这是我的代码

宝贝名字.h

```
#ifndef BABYNAMES_H_
#define BABYNAMES_H_
#include <string>
#include <fstream>
using namespace std;

/**
 * gender: an enum to hold types boy and girl
 */
enum gender {boy, girl};

/**
 * PeopleStats: a data struct to hold year, name, double, and the enum type
 * gender
 */
struct PeopleStats {
    short year;
    string name;
    double percent;
    gender sex;
};

/**
 * Names: A class that reads data from a file into a PeopleStats Array
 * and is capable of sorting them by name and by popularity percentage
 */
class BabyNames {

public:

    BabyNames(const BabyNames& bn);
    BabyNames( const int numLines);
    ~BabyNames();
    const gender parseSex(string s);
    void swap(int i);
    const int getCapacity();//getter for dataSize
    const PeopleStats& get(int i) const; //getter for objects of the data array
    void sortByName();      //Sorts the names alphabetically
    void sortByPopularity();//Sorts the names by popularity
    void sortByYear();
    void addArrayFillCount();
    friend std::ostream& operator << (std::ostream& os, const PeopleStats& d);
    friend std::ostream& operator << (std::ostream& os, const BabyNames& bn);
    //friend std::istream& operator >> (std::istream& in, const PeopleStats& ac);
    friend std::istream& operator >> (std::istream& in, const BabyNames& ac);
private:

    PeopleStats* people;
    int capacity;
    int arrayFillCount; // to keep track of how many array locations have data objects in them
    static const int OUT_OF_BOUNDS = -1;

};//end of class

#endif  /* BABYNAMES_H */ 
```

宝贝名字.cpp

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;
#include "BabyNames.h"

/**
 * BabyNames: A class that reads data from a file into a PeopleStats Array
 * and is capable of sorting them by name and by popularity percentage
 */

BabyNames::BabyNames(const int numberOfLines) {
    people = new PeopleStats[numberOfLines];
    capacity = numberOfLines;
    arrayFillCount = 0;

    for (int i=0 ; i<capacity; i++){
        people[i].year = 0;
        people[i].name = "";
        people[i].percent = 0;
        people[i].sex = boy;
    }
}

//Copy Constructor
BabyNames::BabyNames(const BabyNames& bn){
    capacity = bn.capacity;
        arrayFillCount = bn.arrayFillCount;
        people = new PeopleStats[ bn.capacity ];
    for (int i=0; i< bn.capacity ;i++)
        people[i] = bn.people[i];
}

BabyNames::~BabyNames(){
    cout << "Destructor to deallocate memory... Done!" << endl;
    delete[]people;
}

/*
 * sortByName - Sorts the entire array of people by name using the bubble
 * sort algorithm. Array is sorted according to name, within the structure
 * Algorithm becomes extremely slow if capacity > 3000
 */
void BabyNames::sortByName(){
    //sorted is set to true if no changes were made
    bool sorted = false;
    //change tells the loop if we made a swap or not
    bool change = false;
    while (!sorted) {
        for (int i = 0; i < capacity - 1; i++) {
            int compare = people[i].name.compare(people[i + 1].name);
            if (compare == 1) {
                swap(i);
                change = true;
            }
        }
        //if the array was not changed,
        //changed sorted to true and exit loop
        if (change == false)
            sorted = true;
        //otherwise reset change and repeat the loop
        else
            change = false;
    }
}

/**
 * sortByPopularity - sorts the entire array using the bubble sort algorithm
 * Method is almost exactly the same as sortByName, except the compare
 * variable is a double consisting of the difference of the two popularity
 * percentages.
 * Algorithm becomes extremely slow if capacity > 3000
 */
void BabyNames::sortByPopularity(){
    bool sorted = false;
    bool change = false;
    while (!sorted) {
        for (int i = 0; i < capacity - 1; i++) {
            double compare = people[i].percent - people[i + 1].percent;
            if (compare < 0) {
                swap(i);
                change = true;
                break;
            }
        }
        if (change == false)
            sorted = true;
        change = false;
    }
}

void BabyNames::sortByYear(){
    bool sorted = false;
    bool change = false;
    while (!sorted) {
        for (int i = 0; i < capacity - 1; i++) {
            double compare = people[i].year - people[i + 1].year;
            if (compare < 0) {
                swap(i);
                change = true;
                break;
            }
        }
        if (change == false)
            sorted = true;
        change = false;
    }
}
/**
 * swap - swaps the positions of people[i] and people[i + 1]
 * @param i - index of the people array that will get swapped with i + 1
 */
void BabyNames::swap(int i) {
    PeopleStats temp = people[i + 1];
    people[i + 1] = people[i];
    people[i] = temp;
}

/**
 * getCapacity: returns the number of data entries stored.
 * @return size of the data
 */
const int BabyNames::getCapacity(){
    return capacity;
}

/**
 * get: returns one PeopleStat Object
 * @param i
 * @require: i < capacity
 * @return PeopleStat object
 */
const PeopleStats& BabyNames::get(int i) const {
    if (i>=0 && i < capacity)
        return people[i];
    throw OUT_OF_BOUNDS;
}
/**
 * << - overloads the outstream operator for PeopleStats object
 * @param os
 * @param d
 * @return os : output stream
 */
std::ostream & operator << (std::ostream& os, const PeopleStats& d){
    os << d.name << " " << d.year << " " << d.percent << " " << d.sex;
    return os;
}

/**
 * <<: overloads the outstream operator for the BabyNames object
 * @param os
 * @param bn
 * @return
 */
std::ostream& operator << (std::ostream& os, const BabyNames& bn) {
    os << "  BabyNames object " << std::endl;
    for (int i=0; i < bn.capacity; i++ )
        os << "    " << (i+1) <<":  " << bn.get( i ) << std::endl;
    return os;
}//end of operator

/*std::istream& operator >> (std::istream& in, const PeopleStats& ac){
    in>>ac.year>>ac.name>>ac.percent>>ac.sex;
    //struct doesnt need a loop in the operator
    return in;
}*/

std::istream& operator >> (std::istream& in, const BabyNames& ac){

    short tempYear;
    string tempName;
    double tempPercent;
    string  tempSex;
    int arrayLocation = ac.arrayFillCount;
    in >> tempYear;
    in >> tempName;
    in >> tempPercent;
    in >> tempSex;
    //gender tempGender = parseSex(tempSex);
    ac.people[ arrayLocation ].year = tempYear;
    ac.people[ arrayLocation ].name = tempName;
    ac.people[ arrayLocation ].percent = tempPercent;

    if( tempSex.compare( "boy" ) == 0 )
        ac.people[ arrayLocation ].sex = boy;
    else if ( tempSex.compare( "girl" ) == 0 )
        ac.people[ arrayLocation ].sex = girl;
    else
        throw "invalid Gender";
    //addArrayFillCount();

    return in;
}
//Baby names extraction operator does need a loop

void BabyNames::addArrayFillCount(){
    arrayFillCount++;
} 
```

主要的

```
#include <iostream>
#include "BabyNames.h"

/**
 * main: The client function that controls the server, BabyNames
 * For reasons currently unknown, the program will take forever
 * to run after the  * 3000-5000 line mark.
 * @return 0 if successful
 */

int checkLines(string fn){
    int numberOfLines = 0;
    string temp;
    ifstream myfile( fn.c_str(), ios::in );
    while( getline( myfile, temp ) )
        numberOfLines++;
    std::cout << "Number of lines in text file: " << numberOfLines;
    return 15;
}//make a stand alone function

int main(void) {

    cout << "Baby names: " << endl;

    const char filename[] = "src/people.txt";
    cout << " 1\. Reading file: \"" << filename << "\" ... ";
    int numberOfNames = checkLines(filename);
    cout << " number of lines in file is: " << numberOfNames;
    BabyNames* names = new BabyNames( numberOfNames );

    // read the contents of a file into names and print them
    ifstream myFile( filename, ios::in );
    //myfile.open(fn);
    myFile >> *names;
    cout << " file has been read!" << endl;

    // Sort and print
    cout << " 2\. Sorted by popularity:" << endl;
    BabyNames* namesByPop = new BabyNames( *names );
    namesByPop->sortByPopularity();
    cout << *namesByPop;

    // Sort and print
    cout << " 3\. Sorted by name:" << endl;
    BabyNames* namesByName = new BabyNames( *names );
    namesByName->sortByName();
    cout << *namesByName;

    // Sort and print
    cout << " 4\. Sorted by year:" << endl;
    BabyNames* namesByYear = new BabyNames( *names );
    namesByYear->sortByYear();
    cout << *namesByYear;

    cout << " 5\. Original names:" << endl;
    cout << *names;

    delete names;
    delete namesByYear;
    delete namesByName;
    delete namesByPop;

    cout << "... all done!" << endl;
} 
```

文本文件看起来像这样，但有 250000+ 行

```
1880 Henry 0.020641 boy
1880 Robert 0.020404 boy
1880 Edward 0.019965 boy
1880 Harry 0.018175 boy
1880 Walter 0.014822 boy
1880 Arthur 0.013504 boy
1880 Fred 0.013251 boy
1880 Albert 0.012609 boy 
```

如何让 arrayFillCount 在 >> 运算符中上升？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:43:22.977

在`myFile >> *names;`您调用`std::istream& operator >> (std::istream&, const BabyNames&)`时，它将执行以下代码：

```
[...] // var declarations

in >> tempYear;
in >> tempName;
in >> tempPercent;
in >> tempSex;

ac.people[ arrayLocation ].year = tempYear;
ac.people[ arrayLocation ].name = tempName;
ac.people[ arrayLocation ].percent = tempPercent;

[...] // other checks and return 
```

这将仅正确读取文件的第一行并仅填充对象`people`内部的第一行`BabyNames`（第一次`arrayLocation`= 0）。

您应该执行`myFile >> *names;`要填充的行数`*names`。

* * *

> 我需要让 arrayFillCount 与我的 >> 运算符一起使用。我该怎么做呢？

您应该`arrayFillCount++;`在填写`ac.people[ arrayLocation ]`数据后立即添加。

# android - 在后台android中每10分钟使用gps获取纬度和经度

> ID：15583426
> 
> 赞同：5
> 
> 时间：2013-03-23T04:40:10.640
> 
> 标签：android, google-maps, google-maps-api-3, gps

我已经完成了使用`LocationManager`和正常工作的纬度和经度。

**要求：**

如果应用程序关闭与否，每 10 分钟获取一次纬度和经度。

我正在尝试服务、线程、AlarmManager 等。

我的应用程序可以正常工作 1-2 小时，然后自动获取不到纬度和经度，但我的服务仍在运行。

如果有人知道，请给我指导如何在后台每 10 分钟获取一次纬度和经度。

**LocationActivity.java**

当用户单击开始按钮时。

```
Intent i=new Intent(context, OnAlarmReceiver.class);
    PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);
    alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
         SystemClock.elapsedRealtime()+60000,PERIOD,pi); 
```

**OnAlarmReceiver.java**

我开始我的服务。

```
public class OnAlarmReceiver extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
       context.startService(new Intent(context, MyService.class));
  }
} 
```

**我的服务.java**

```
@Override
    public void onStart(Intent intent, int startId) {
        // super.onStart(intent, startId);
        new MyTime(mContext);
    } 
```

**我的时间.java**

获取纬度和经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:47:48.943

您的位置实际上不会保存在数据库中，因为每次更新您的位置`(via onLocationChanged(Location location))`

您应该做的是在您的方法中进行`timer`初始化。`OnCreate()`然后声明这些变量。

```
double lat = location.getLatitude();
double lng = location.getLongitude();
double alt = location.getAltitude(); 
```

作为全局并在`onLocationChanged(Location location)`方法中更新它们。这样，每当计时器调用数据库中的持久性时，lat、lng、alt 值将可用并根据您的最新位置进行更新。

```
//decalred as global variables
String curTime;
double lat;
double lng;
double alt;

 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
LocationManager locationManager;
String context = Context.LOCATION_SERVICE;
locationManager = (LocationManager)getSystemService(context);

Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(false);
criteria.setCostAllowed(true);
criteria.setPowerRequirement(Criteria.POWER_LOW);
String provider = locationManager.getBestProvider(criteria, true);

    //Initialize timer
    Timer timer = new Timer();
        timer.schedule(new TimerTask(){
            @Override
            public void run(){
                db.execSQL("INSERT INTO location (longitude,latitude,altitude,tgl_buat) VALUES " +
                        "('"+lng+"','"+lat+"','"+alt+"','"+curTime+"')");
                db.close();
            }
        }, 10*60*1000, 10*60*1000);

updateWithNewLocation(null);

locationManager.requestLocationUpdates(provider, (10*60*1000), 10,
                                       locationListener);
   }
   private final LocationListener locationListener = new LocationListener() {
   public void onLocationChanged(Location location) {
   updateWithNewLocation(location);
}

public void onProviderDisabled(String provider){
  updateWithNewLocation(null);
}

public void onProviderEnabled(String provider){ }
public void onStatusChanged(String provider, int status, 
                            Bundle extras){ }
 };
 public void updateWithNewLocation(Location location) {

    if (location != null) {
        Dbhelper helper = new Dbhelper(this);
        final SQLiteDatabase db = helper.getWritableDatabase();
        long time = System.currentTimeMillis();
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
        curTime = df.format(time);
        lat = location.getLatitude();
        lng = location.getLongitude();
        alt = location.getAltitude();
        System.out.println(lat);
        System.out.println(lng);
        System.out.println(alt);

    } 

  } 
```

添加：-如果您绘制路径，则使用此代码

```
/** Called when the activity is first created. */
private List<Overlay> mapOverlays;

  private Projection projection;  

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

linearLayout = (LinearLayout) findViewById(R.id.zoomview);
mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);

mapOverlays = mapView.getOverlays();        
projection = mapView.getProjection();
mapOverlays.add(new MyOverlay());        

}

  @Override
  protected boolean isRouteDisplayed() {
  return false;
  }

 class MyOverlay extends Overlay{

  public MyOverlay(){

  }   

public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);

    Paint   mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    GeoPoint gP1 = new GeoPoint(19240000,-99120000);
    GeoPoint gP2 = new GeoPoint(37423157, -122085008);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();

    projection.toPixels(gP1, p1);
    projection.toPixels(gP2, p2);

    path.moveTo(p2.x, p2.y);
    path.lineTo(p1.x,p1.y);

    canvas.drawPath(path, mPaint);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:56:47.853

试试这个方法

而不是这条线

```
alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
         SystemClock.elapsedRealtime()+60000,PERIOD,pi); 
```

试试我的逻辑

```
alarmManager.set(AlarmManager.RTC_WAKEUP, 60 * 1000, pi); 
```

您还可以看到一个非常好的[AlarmManager](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T07:39:08.303

```
Try By this one :

private void doSomethingRepeatedly() {
      timer.scheduleAtFixedRate( new TimerTask() {
            public void run() {

                  try{

            //Do your work here

                  }
                  catch (Exception e) {
                      // TODO: handle exception
                  }

             }
            }, 0, 10000);
                     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T09:59:51.437

我没有看到任何服务完成命令，而您试图仅在启动命令上获得位置。

一般来说 - 这是一个相当复杂的问题：10 分钟的时间建议使用 AlarmManager - 没关系，但是......获得位置有时会持续超过 10 分钟。GPS 接收器在尝试定位时会消耗大量电池，因此在某些情况下，周期性地打开/关闭 GPS 会比打开时消耗更多的电池。考虑一些“松散压缩”——结合不同的位置提供者，仅在真正需要时调用 GPS（即时间、粗略位置改变等）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T05:08:26.327

我正在使用这种方式并解决我的问题。

```
PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), PERIOD , pi); 
```

我不知道这是对还是错。但为我工作。感谢@Lucifer、@Maya mAku 和@piotrpo 的指导。

# java - 使用 RowFilter 删除 JTable 中的一行

> ID：15583427
> 
> 赞同：3
> 
> 时间：2013-03-23T04:40:40.790
> 
> 标签：java, swing, jtable, rowfilter, tablerowsorter

我有一个带有 JTable 的 Swing 桌面应用程序。向 JTable 添加行时没有问题。我也可以排序（使用`JTable.autoCreateRowSorter`）然后`convertRowIndexToModel`顺利删除行（使用）。

当我在 JTable 更新以仅显示包含查询的行的文本框中进行搜索时，我确实遇到了问题。当我在输入搜索词后尝试删除一行时，奇怪的事情开始发生：

```
public class EmployeeRecords extends javax.swing.JFrame {

ArrayList<Employee> employees = new ArrayList <Employee> ();

...
private void search(String query) {
    //Create new table sorter for the table
    TableRowSorter sorter = new TableRowSorter(employeeTable.getModel());
    //Add row filter to the tablerowsorter (regex)
    sorter.setRowFilter(RowFilter.regexFilter("(?i).*\\Q"+query+"\\E.*") );
    //Apply the results to the output table
    employeeTable.setRowSorter(sorter);
}

private void deleteButtonActionPerformed() {
    //Get the index of the employee to delete
    int employee = employeeTable.convertRowIndexToModel(
            employeeTable.getSelectedRow());

    employees.remove(employee); //This is where the IndexOutOfBoundsException occurs

    refreshTable();
}

/**
 * Refreshes the employee table. Uses the "employees" class array list to
 * populate the rows.
 */
private void refreshTable() {
    //Delete all the rows in the table
    DefaultTableModel tbm = (DefaultTableModel) employeeTable.getModel();
    for (int i=employeeTable.getRowCount()-1; i >= 0; i--) {
        tbm.removeRow(i);
    }

    //For every employee
    for (int i=0; i < employees.size(); i++) {
        //Add the employee's data to a table row
        tbm.addRow(employees.get(i).getData());
    }
}
} 
```

我会尝试删除一行，有时它会复制我想要删除的行。其他时候我得到一个 IndexOutOfBoundsException，可能是因为索引被搞砸了。

我不理解遇到[同样问题的人](https://stackoverflow.com/questions/15030084/removing-jtable-row-when-sorter-is-applied-causes-indexoutofboundsexception)的解决方案，因为我对 Swing Timers 等知之甚少。

我还确保按照[此问题中的建议将行索引转换为模型。](https://stackoverflow.com/questions/1316388/jtable-rowfilter)

关于如何解决这个问题的任何想法？

更新：这是正在发生的事情的基本屏幕截图。 ![在此处输入图像描述](../Images/01dd0264f9bc16b457d919918df42e00.png) 搜索“a”和“a”和“aa”出现： ![在此处输入图像描述](../Images/1943b765feddeaa7fc6275cd25602b18.png)

当我选择“a”并单击 Delete Selected 时，结果如下： ![在此处输入图像描述](../Images/ccb850d3b06b2015174f632f4396e582.png)

现在，如果我尝试继续删除“aa”，那么我最终会得到一个 IndexOutOfBoundsException。

更新2：这是员工类：

```
public class Employee {

//Class fields
Integer employeeIdNumber;
String firstName, lastName, startDate;
Double annualSalary;

/* Constructor for the Employee object */
public Employee(Integer employeeIdNumber, String firstName, String lastName, 
        Double annualSalary, String startDate) {

    //Assign paramters to class fields
    this.employeeIdNumber = employeeIdNumber;
    this.firstName = firstName;
    this.lastName = lastName;
    this.annualSalary = annualSalary;
    this.startDate = startDate;
}

/**
 * Gets the data for the employee (ID, firstname, lastname, annual salary,
 * and start date, in that order)
 * 
 * @return an Object[] of the abovementioned employee data.
 */
public Object[] getData() {
    return new Object[] {
        employeeIdNumber,
        firstName,
        lastName,
        annualSalary,
        startDate
    };
}
} 
```

FIX（感谢 camickr）：我更改了删除按钮的以下代码

```
private void deleteButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             

    DefaultTableModel tbm = (DefaultTableModel) employeeTable.getModel();
    //Get the index of the employee to delete
    int employee = employeeTable.convertRowIndexToModel(
            employeeTable.getSelectedRow());

    //Delete the row directly
    tbm.removeRow(employee);
    //as well as delete the employee from the array
    employees.remove(employee);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:00:55.947

不确定我是否理解您的设计。您有一个 DefaultTableModel，并且您还有一个包含您的员工的 ArrayList。

员工数据应存储在 TableModel 中。无需重新创建 TableModel，因为您只需从模型中删除行，表格将自行重新绘制。

此外，作为使用 DefaultTableModel 时的注意事项，您只需使用以下内容删除所有行：

```
model.setRowCount(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:57:27.840

删除`refreshTable`方法中的所有行时，尝试更改逻辑

```
while(employeeTable.getRowCount() > 0) {
    tbm.removeRow(0);
} 
```

这样可以确保您不会获得`IndexOutOfBoundsException`. 也可以解决重复行显示的其他问题。

# html - 对齐响应式 div 中心

> ID：15583430
> 
> 赞同：4
> 
> 时间：2013-03-23T04:40:47.567
> 
> 标签：html, css, responsive-design

在下面的结构中，只有非移动设备才能将 div 对齐`div#logo`到 div 中间的最佳方式是什么。`grid_12 visible`

我可以创建一段自定义代码来覆盖上述类吗？

我用我的代码创建了一个 Plunker - [http://plnkr.co/edit/lrRm0nXdYaz5g7dYe4DS](http://plnkr.co/edit/lrRm0nXdYaz5g7dYe4DS)

**HTML：**

```
<header class="row visible">

    <div class="grid_12 visible">
        <div class="row logo-wrap">

            <!-- logo -->
                        <div class="grid_6">
                <div id="logo">
                    <a href="http://dev.jzm.co.nz/mytime/"><img src="http://dev.jzm.co.nz/mytime/image/data/logo-black-web.png" title="My Time Candles" alt="My Time Candles" /></a>
                </div>
            </div>

            <!-- search -->
            <div class="grid_6 visible">
                <div id="search">
                    <div class="button-search">Search</div>
                                        <input type="text" name="filter_name" value="Search ... " onclick="this.value = '';" onkeydown="this.style.color = '#000000';" />
                                    </div><!--/search-->
            </div>

        </div><!--/row-->  
    </div><!--/grid_12-->
</header><!--End Header--> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T04:56:39.660

给标识为 id 的 div 一个宽度，并将其 margin-left 和 margin-right css 属性设置为 auto.. 还将 max-width 设置为 100% 将确保响应行为..

```
#logo{
  width: 100%;
  max-width: 300px; /* Original width of the logo image */ 
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  float: left;
} 
```

我希望你已经这样做了，但是..

```
#logo img{ 
   max-width: 100%;
   height: auto;
} 
```

更新：

像这样修改你的标记

```
<div id="container-top">
    <div id="logo">
        <a href="http://dev.jzm.co.nz/mytime/"><img src="http://dev.jzm.co.nz/mytime/image/data/logo-black-web.png" title="My Time Candles" alt="My Time Candles"></a>
    </div>
<!-- search -->
    <div id="search" class="visible">
        <div class="button-search">Search</div>
        <input type="text" name="filter_name" value="Search ... " onclick="this.value = '';" onkeydown="this.style.color = '#000000';">
    </div>
<!--/search-->
</div>

#container-top{
    position: relative;
}

#search{
    top: 15%;
    right: 0;
} 
```

但是你必须使用媒体查询来调整你的#search css作为布局更改..我也在上面做了一些CSS更改（在更新部分之前）..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T13:20:29.297

只有你必须写一行`margin: 0 auto;`

```
#logo
{
    margin:0 auto;
} 
```

# regex - 使用 RegEx 拆分字符串

> ID：15583437
> 
> 赞同：0
> 
> 时间：2013-03-23T04:42:20.807
> 
> 标签：regex

我有一个像 '[1]-[2]-[3],[4]-[5],[6,7,8],[9]' 或 '[Computers]-[Apple]-[Laptop] 这样的字符串],[Cables]-[Cables,Connectors],[Adapters]'，我希望 Pattern 得到列表结果，但不知道如何找出模式。基本上逗号是拆分，但 [6,7,8] 本身也包含逗号。

```
the string: [1]-[2]-[3],[4]-[5],[6,7,8],[9]
the result:
[1]-[2]-[3]
[4]-[5]
[6,7,8]
[9]

or

the string: [Computers]-[Apple]-[Laptop],[Cables]-[Cables,Connectors],[Adapters]
the result:
[Computers]-[Apple]-[Laptop]
[Cables]-[Cables,Connectors]
[Adapters] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:47:13.657

```
,(?=\[) 
```

此模式在任何后面跟括号的逗号上拆分，但将括号保留在结果文本中。

这`(?=*stuff*)`被称为“前瞻断言”。它充当匹配的条件，但它本身不是匹配的一部分。

在 C# 代码中：

```
String inputstring = "[Computers]-[Apple]-[Laptop],[Cables]-[Cables,Connectors],[Adapters]";
foreach(String s in Regex.Split(inputstring, @",(?=\[)"))
    System.Console.Out.WriteLine(s); 
```

在 Java 代码中：

```
String inputstring = "[Computers]-[Apple]-[Laptop],[Cables]-[Cables,Connectors],[Adapters]";
Pattern p = Pattern.compile(",(?=\\[)"));
for(String s : p.split(inputstring))
    System.out.println(s); 
```

要么产生：

```
[Computers]-[Apple]-[Laptop]
[Cables]-[Cables,Connectors]
[Adapters] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:53:13.643

一个不使用正则表达式的答案（如果这有助于理解正在发生的事情）是：

1.  替代品 ”]，[”
2.  在“@”上拆分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:51:48.107

尽管我认为这里最好的方法是使用拆分（如@j__m 的回答所提出），但这是一种使用匹配而不是拆分的方法。

正则表达式：

```
(\[.*?\](?!-)) 
```

示例用法：

```
String input = "[Computers]-[Apple]-[Laptop],[Cables]-[Cables,Connectors],[Adapters]";
Pattern p = Pattern.compile("(\\[.*?\\](?!-))");
Matcher m = p.matcher(input);
while (m.find()) {
    System.out.println(m.group(1));
} 
```

结果输出：

```
[Computers]-[Apple]-[Laptop]
[Cables]-[Cables,Connectors]
[Adapters] 
```

# node.js - 2013 Meteor NPM 包

> ID：15583438
> 
> 赞同：21
> 
> 时间：2013-03-23T04:43:03.080
> 
> 标签：node.js, meteor, npm

**更新** [这个解决方案](https://stackoverflow.com/a/15351543/431369)描述了如何在 Meteor 中有效地使用新的 Npm 系统。

* * *

**目前在 Meteor 中使用 NPM 包的方法是什么？**

[截至 2013 年 3 月 22 日，没有关于此的官方文档。]

关于这个有几个问题，特别是[这个](https://stackoverflow.com/questions/10165978/how-do-we-or-can-we-use-node-modules-via-npm-with-meteor)`Npm.require`，但是解决方案似乎已经过时了：引擎分支不再存在，而且我在 Meteor中找不到任何东西。

[此处发布](https://coderwall.com/p/2fveyq)的另一个解决方案指示安装到`.meteor/`构建文件夹中。当我安装到 Heroku 时，这似乎不是一个有效的解决方案，因为 buildpack`meteor bundle`在运行程序之前使用它来捆绑程序。因此，临时构建文件夹似乎不是一个有效的选项。

流星中的Npm发生了什么？使用 Npm 包的最新方法是什么？

*在相关说明中，我正在尝试使用 Amazon SDK（用于 s3） - 将其打包为 Meteorite 包会更好吗？*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-18T22:26:27.770

Arunoda[创建了一个 NPM Atmosphere 包](https://github.com/arunoda/meteor-npm)，允许您像以前一样使用任何 NPM 模块。这很简单。

首先，`mrt add npm`。

您还可以使用`meteor-npm`来自 的命令安装包`npm install -g meteor-npm`。

接下来，`packages.json`在您的根项目目录中创建一个文件，其中包含包名称和版本：

```
{
    "foobar": "0.3.5",
    "loremipsum": "2.1.4"
} 
```

最后，将它们与 一起使用`Meteor.require`，如下所示：`var FooBar = Meteor.require('foobar');`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-30T06:07:09.140

目前在 Meteor 中使用 NPM 的方式

1.  将下面的 x 替换为 NPM 名称
2.  将下面的文件大纲放在 /meteor-project-root/packages/x/
3.  流星加 x
4.  要使用它，只需在代码中调用 X (X.function())

x.js --------

```
X = Npm.require('x'); 
```

包.js --------

```
Package.describe({
  summary: "Meteor smart package for x node.js package"
});

Npm.depends({
  "x": "0.1.1"
});

Package.on_use(function (api) {
  api.add_files("x.js", ["client", "server"]);
}); 
```

注意：某些软件包只能在客户端或服务器上运行，如果您遇到问题，请尝试仅包含您要使用它的一侧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-11T17:48:56.907

我一直在使用神奇的“ [browserify](http://browserify.org/) ”，它就像一个魅力。这是使用 Arunda[的 NPM Atmosphere package](https://github.com/arunoda/meteor-npm)或[将 Npm.require 与 package.js](https://stackoverflow.com/a/16829068/2573589)一起使用的替代方案，可以说具有一些优势：

1.  我的代码可以使用普通的旧“require”而不是 Npm.require 或 Meteor.require。显然这不是什么大问题，但如果我想在 Meteor 之外使用这段代码，感觉它不依赖于 Meteor 是件好事。
2.  我不必担心 Meteor 是否会再次改变它对 Npm 集成的看法。
3.  它允许我使用 npm 链接使用我自己的 npm 模块的本地开发版本。

以下是它的工作原理：

1.  我在隐藏的 .npm 文件夹中为 npm 依赖项创建了一个单独的项目
2.  我使用 browserify 创建一个 bundle.js 将由流星加载
3.  我使用 grunt watch 确保每次安装新的 npm 包时，bundle.js 都会更新

这是我的目录结构：

```
my_meteor_project/
    lib/
        bundle.js

    .npm/
        node_modules
        README.md
        Gruntfile.js
        entrypoint.js
        package.json 
```

这是 entrypoint.js 的示例（不幸的是，我必须使用全局变量，以便在 Meteor 代码中使用 assert、url 和 _）

```
assert = require('assert');
url = require("url");
_ = require('underscore'); 
```

这是 grunt 文件：

```
module.exports = function(grunt) {
  grunt.initConfig({
    watch: {
      build: {
          files: ['./entrypoint.js', './package.json'],
          tasks: ['browserify2'],
          options: {
          }
      }
    },
    browserify2: {
      compile: {
        entry: './entrypoint.js',
        compile: '../lib/bundle.js'
      }
    },
  });

  grunt.loadNpmTasks('grunt-browserify2');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.registerTask('build', ['browserify2']);
}; 
```

然后我使用 grunt watch 来观察 entry.js 的变化或新的 NPM 安装

```
$ cd .npm
$ grunt watch:build &
[2] 44617
$ Running "watch:build" (watch) task
Waiting... 
```

然后如果我安装一个 npm 模块，或者修改 entrypoint.js，bundle.js 会更新：

```
$ npm install url -save
npm http GET https://registry.npmjs.org/punycode
npm http GET https://registry.npmjs.org/querystring
npm http 304 https://registry.npmjs.org/punycode
npm http 304 https://registry.npmjs.org/querystring
url@0.7.9 node_modules/url
├── querystring@0.1.0
└── punycode@1.0.0
$ OK
>> File "package.json" changed.

Running "browserify2:compile" (browserify2) task
File written to: ../lib/bundle.js

Done, without errors.
Completed in 1.256s at Thu Jul 11 2013 11:36:22 GMT-0600 (MDT) - Waiting... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T07:24:00.423

您可以使用[https://atmospherejs.com/meteorhacks/npm](https://atmospherejs.com/meteorhacks/npm)

```
meteor add meteorhacks:npm 
```

然后你可以设置你的 package.json 文件：

```
{
  "redis": "0.8.2",
  "github": "0.1.8"
} 
```

并使用这些包：

```
var GithubApi = Meteor.npmRequire('github'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-24T19:16:49.297

当您使用陨石时，当您安装节点模块时，`.meteor/local/build/server/`您实际安装到

```
~/.meteorite/meteors/meteor/meteor/f07715dc70de16a7aab84e56ab0c6cbd9c1f9dc6/dev_bundle/lib/node_modules 
```

当您用于`mrt bundle`创建部署包时，其他包也会被捆绑。

我没有在 Heroku 上尝试过，但我检查了使用 mrt 包时节点模块是否被打包。

# android - Android：与真实设备的客户端-服务器通信

> ID：15583440
> 
> 赞同：1
> 
> 时间：2013-03-23T04:43:18.747
> 
> 标签：android, client-server

我有一个与[RabbitMQ](http://www.rabbitmq.com/)`application(client)`通信和接收消息的。我可以通过模拟器进行通信，但是当我连接平板电脑时，通信失败。我不明白为什么设备不使用相同的本地主机地址进行通信。`Server(TCP connection)`

需要一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:38:26.060

模拟器与您的服务器在同一台计算机上运行？然后模拟器可以使用 localhost IP，如 127.0.0.1 或 10.0.0。但是您的平板电脑不是您的计算机。首先，您的平板电脑应与您的计算机在同一网络 (LAN) 中，其次平板电脑上的应用程序应使用计算机的 LAN ip。

# sql - 'this' ABL 语句的 SQL 等效项

> ID：15583443
> 
> 赞同：0
> 
> 时间：2013-03-23T04:43:36.207
> 
> 标签：sql, vba, aggregate, progress-4gl

有人可能会理解这个 ABL 声明......

```
FOR EACH <table> BREAK BY <field as breakgroup>: 
   ....
   IF FIRST-OF(<breakgroup>) THEN DO:
       ....
   END.
   ....
   IF LAST-OF(<breakgroup>) THEN DO:
       ....
   END.
   ....
END. 
```

上面的代码基本上循环遍历表中的各个记录，然后在执行的特定部分运行一些代码（....）。值得注意的是 FIRST-OF 和 LAST-OF 语句，其中的`<breakgroup>`值会发生变化，并且对数据聚合很有用。

有人知道如何使用 SQL 实现/复制相同的逻辑，也许还有一些 VBA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:24:23.077

首先，值得注意的是，与 OpenEdge ABL 不同，SQL 不是 4GL。它本身不应该“执行代码”，因此您将不得不使用另一种编程语言对数据库执行 SQL 语句，检索选定的记录，然后使用您可能使用的任何语言操作它们。

要获得等效的 ABL FIRST-OF 或 LAST-OF 语句，SQL FIRST() 和 LAST() 函数将派上用场（[First()](http://www.w3schools.com/sql/sql_func_first.asp)和[Last()](http://www.w3schools.com/sql/sql_func_last.asp)解释了这些。）

基本上，这意味着我认为您将必须执行至少三个不同的 SQL Select 语句，以选择您想要的所有表条目，一个选择给定“组”中的第一个（毕竟，一个组是只是满足某些条件的条目的子选择）和一个​​选择此类组中的最后一个。例如

```
SELECT LAST(CustomerType) WHERE CustomerType = "ValuedCustomer" 
```

现在，如果您想使用 VBA 作为您的编程语言，您可以使用如下命令执行 SQL 语句：

```
DoCmd.RunSQL "SELECT LAST(CustomerType) WHERE CustomerType = 'ValuedCustomer'" 
```

[这](http://msdn.microsoft.com/library/office/ff194626.aspx)是该命令的 MSDN 条目！

希望有帮助！

# v8 - v8::ResourceConstraints 的语义？

> ID：15583446
> 
> 赞同：1
> 
> 时间：2013-03-23T04:44:26.883
> 
> 标签：v8, embedded-v8

该类`v8::ResourceConstraints`定义如下：

```
class V8EXPORT ResourceConstraints {
 public:
  ResourceConstraints();
  int max_young_space_size() const { return max_young_space_size_; }
  void set_max_young_space_size(int value) { max_young_space_size_ = value; }
  int max_old_space_size() const { return max_old_space_size_; }
  void set_max_old_space_size(int value) { max_old_space_size_ = value; }
  int max_executable_size() { return max_executable_size_; }
  void set_max_executable_size(int value) { max_executable_size_ = value; }
  uint32_t* stack_limit() const { return stack_limit_; }
  // Sets an address beyond which the VM's stack may not grow.
  void set_stack_limit(uint32_t* value) { stack_limit_ = value; }
 private:
  int max_young_space_size_;
  int max_old_space_size_;
  int max_executable_size_;
  uint32_t* stack_limit_;
}; 
```

谁能告诉我`young_space_size`,`old_space_size`和`max_executable_size`是什么？它们的单位是什么，它们是如何相关的，等等？似乎没有太多文档。

另外，如何使用该`stack_limit`物业？例如，如果我希望我的 V8 隔离使用不超过 1MB 的堆栈空间，我将如何计算指针值`stack_limit`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T00:44:17.967

v8/test/cctest/test-api.cc 使用这个函数来计算限制：

```
// Uses the address of a local variable to determine the stack top now.
// Given a size, returns an address that is that far from the current
// top of stack.
static uint32_t* ComputeStackLimit(uint32_t size) {
  uint32_t* answer = &size - (size / sizeof(size));
  // If the size is very large and the stack is very near the bottom of
  // memory then the calculation above may wrap around and give an address
  // that is above the (downwards-growing) stack.  In that case we return
  // a very low address.
  if (answer > &size) return reinterpret_cast<uint32_t*>(sizeof(size));
  return answer;
} 
```

# c# - 用文件 C# 填充锯齿状数组

> ID：15583452
> 
> 赞同：1
> 
> 时间：2013-03-23T04:45:20.850
> 
> 标签：c#, file, jagged-arrays

我似乎无法弄清楚如何使用锯齿状数组和文件。我有三个带有数字的文件，并且想将每个文件读入它自己的数组中。这就是我到目前为止所拥有的。试图填充 [0] 数组但无济于事。任何帮助表示赞赏。也找不到任何关于这样做的教程。

```
private void button1_Click(object sender, EventArgs e)
{
    StreamWriter section1;
    StreamWriter section2;
    StreamWriter section3;
    StreamReader section1read;
    StreamReader section2read;
    StreamReader section3read;

    section1 = File.CreateText("Section1.txt");
    section2 = File.CreateText("Section2.txt");
    section3 = File.CreateText("Section3.txt");

    int[][] Scores = new int[3][];

    Random randnum = new Random();

    for (int i = 0; i < 12; ++i)
    {
        int num = randnum.Next(55, 99);
        section1.WriteLine(num);
    }

    for (int j = 0; j < 8; ++j)
    {
        int num1 = randnum.Next(55, 99);
        section2.WriteLine(num1);
    }

    for (int k = 0; k < 10; ++k)
    {
        int num3 = randnum.Next(55, 99);
        section3.WriteLine(num3);
    }

    section1.Close();
    section2.Close();
    section3.Close();

    section1read = File.OpenText("Section1.txt");

    int nums = 0;
    while (!section1read.EndOfStream)
    {
        Scores[0][nums] = int.Parse(section1read.ReadLine());
        ++nums;
    }
    for (int i = 0; i < Scores.Length; ++i)
    {
        listBox1.Items.Add(Scores[0][i]);
    }
    section1read.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:00:07.783

锯齿状数组应该分两步初始化：

1.  数组本身：

    ```
    int[][] Scores = new int[3][]; 
    ```

2.  子数组：

    ```
    Scores[0] = new int[12];
    Scores[1] = new int[8];
    Scores[2] = new int[10]; 
    ```

数组是固定长度的数据结构。如果事先不知道大小，就得使用动态长度结构。最好的选择是[`List<>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)类：

```
List<List<int>> scores = new List<List<int>>();

scores.Add( new List<int>() );

using( StreamReader section1read = File.OpenText("Section1.txt"))
{
    string line;
    while ((line = section1read.ReadLine()) != null)
    {
        scores[0].Add(int.Parse(line));
    }
} 
```

以下是需要考虑的其他事项：

*   使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块确保与文件关联的任何非托管资源都已释放。
*   您可以检查返回值[`StreamReader.ReadLine()`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)以确定文件的结尾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T05:00:27.423

[http://msdn.microsoft.com/en-us/library/2s05feca.aspx](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)

引用：

“在你可以使用 jaggedArray 之前，它的元素必须被初始化。你可以像这样初始化元素：

jaggedArray[0] = 新的 int[5];

jaggedArray[1] = new int[4];

jaggedArray[2] = 新的 int[2];"

因此，您在代码中所做的是初始化一个由三个 int[] 组成的锯齿状数组，这些数组都设置为 null。如果在尝试分配给它之前没有在每个索引处创建数组，那么什么都没有。

不过，您似乎想要的是动态分配——您不知道在编写程序时需要存储多少整数。在这种情况下，您应该了解该类`List<>`。就像一个数组，除了你可以在运行时添加和删除它拥有的元素数量，而不是使用and`List<>`声明它具有固定大小。[http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)`Add``Remove`

# printing - 在 Python 中的文本文件中打印输出 - 换行问题

> ID：15583453
> 
> 赞同：0
> 
> 时间：2013-03-23T04:45:21.523
> 
> 标签：printing, python-2.7

嗨，我在文本文件中打印输出时遇到问题。假设，我有一个数组

> A=[ [1,2,3],
> [4,5,6],
> [7,8,9] ]

我有代码：

```
 for i in A:
         for j in i:              
            print(j),
         print "" 
```

它会打印

```
 1 2 3
      4 5 6
      7 8 9 
```

现在我有了在文本文件中打印相同输出的代码

```
 for i in A:
    for j in i:
        print >> file,j
        print(j),

    print ""
    print >> file,"" 
```

但这不是在文件中写入相同的先前控制台输出。我怎样才能写出相同的输出？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:59:24.940

你能试试下面的代码吗？它应该可以按您的意愿工作

```
A=[ [1,2,3],
    [4,5,6],
    [7,8,9] ]

f = open('myfile','w')

for i in A:
    for j in i:    
        print(j),
        f.write(str(j) + ' ')
    f.write("\n")

f.close() 
```

# php - SwiftMailer 发送邮件非常缓慢

> ID：15583463
> 
> 赞同：1
> 
> 时间：2013-03-23T04:47:26.280
> 
> 标签：php, email, swiftmailer

我正在使用 WAMP 服务器在我自己的计算机上开发我的 php 网站。我正在使用 Swiftmailer 发送邮件。它发送邮件，但它的工作非常缓慢。它在大约 8-12 秒内发送一封邮件。我正在使用以下代码

```
 $transport = Swift_SmtpTransport::newInstance('smtp.gmail.com',465, 'ssl');
    $transport->setUsername('xyzmail@gmail.com');
    $transport->setPassword('xyz12345');

    $message = Swift_Message::newInstance();
    $message->setTo("myownemail@gmail.com");
    $message->setSubject("Test Mail from News Page");
    $message->setFrom("xyzmail@gmail.com");
    $message->setBody("This is the Message Body");

    $mailer = Swift_Mailer::newInstance($transport);

    if($mailer->send($message))
    {
        $output_msg = "Message Has been Sent Successfully!";
    }
    else
    {
        $output_msg = "Could Not Sent Message!";
    } 
```

我在这里提到的一件事是，我没有在消息正文中发送太多文本，而是发送与上面示例中相同的单行文本。

为什么它工作这么慢，我有什么问题吗？还是我需要使用任何其他邮件发送工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:15:45.363

不确定 SwiftMail 是否是这里的问题。

也许服务器配置不允许更快地发送电子邮件。当我在共享服务器中时，我遇到了这样的问题。

因为快速发送电子邮件（即每 0.5 秒）会使服务器过载，所以服务器管理员已配置为每 10 秒发送一封电子邮件。

另一个原因可能是垃圾邮件安全。

# r - R中的动态数据操作

> ID：15583464
> 
> 赞同：0
> 
> 时间：2013-03-23T04:47:29.870
> 
> 标签：r, dynamic, replace

假设我有一个单位数据集，这些单位可以随时间将活动状态从活动状态更改为非活动状态。我想记录每次单位更改活动时从活动到非活动的切换。一个可重现的例子：

```
UNIT <- c(100,100, 200, 200, 200, 200, 200, 300, 300, 300,300)
STATUS <- c('ACTIVE','INACTIVE','ACTIVE','ACTIVE','INACTIVE','ACTIVE','INACTIVE','ACTIVE','ACTIVE',
        'ACTIVE','INACTIVE') 
TERMINATED <- c('1999-07-06' , '2008-12-05' , '2000-08-18' , '2000-08-18' ,'2000-08-18' ,'2008-08-18',
            '2008-08-18','2006-09-19','2006-09-19' ,'2006-09-19' ,'1999-03-15') 
START <- c('2007-04-23','2008-12-06','2004-06-01','2007-02-01','2008-04-19','2010-11-29','2010-12-30',
       '2007-10-29','2008-02-05','2008-06-30','2009-02-07')
STOP <- c('2008-12-05','4712-12-31','2007-01-31','2008-04-18','2010-11-28','2010-12-29','4712-12-31',
      '2008-02-04','2008-06-29','2009-02-06','4712-12-31')
DAT <- data.frame(UNIT,STATUS,TERMINATED,START,STOP)
DAT            
UNIT   STATUS TERMINATED      START       STOP
1   100   ACTIVE 1999-07-06 2007-04-23 2008-12-05
2   100 INACTIVE 2008-12-05 2008-12-06 4712-12-31
3   200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
4   200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
5   200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
6   200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
7   200 INACTIVE 2008-08-18 2010-12-30 4712-12-31
8   300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
9   300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
10  300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
11  300 INACTIVE 1999-03-15 2009-02-07 4712-12-31 
```

当一个单元的状态从 ACTIVE 变为 INACTIVE 时，这意味着该单元已被终止。不幸的是，记录的终止日期 (TERMINATED) 无效。有效的终止日期是从活动切换到非活动后的有效开始日期（当 STATUS == INACTIVE 时）减去 1 天。换句话说，先前活动记录的结束日期。例如，在单元 100 的情况下，第 3 行中的 TERMINATED 日期是正确的。然而，单元 300 的终止日期应为“2009-02-06”。该解决方案应该足够健壮，以便它了解单元 200 具有两个不活动状态并相应地进行填充。

我什至不知道在 R 中从哪里开始这样的事情

最终结果应如下所示：

```
 UNIT   STATUS TERMINATED      START       STOP
1   100   ACTIVE 2008-12-05 2007-04-23 2008-12-05
2   100 INACTIVE 2008-12-05 2008-12-06 4712-12-31
3   200   ACTIVE 2008-04-18 2004-06-01 2007-01-31
4   200   ACTIVE 2008-04-18 2007-02-01 2008-04-18
5   200 INACTIVE 2008-04-18 2008-04-19 2010-11-28
6   200   ACTIVE 2010-12-29 2010-11-29 2010-12-29
7   200 INACTIVE 2010-12-29 2010-12-30 4712-12-31
8   300   ACTIVE 2009-02-06 2007-10-29 2008-02-04
9   300   ACTIVE 2009-02-06 2008-02-05 2008-06-29
10  300   ACTIVE 2009-02-06 2008-06-30 2009-02-06
11  300 INACTIVE 2009-02-06 2009-02-07 4712-12-31 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T07:38:14.413

我没有花太多时间在这上面，但我认为你应该能够通过以下方式做你需要的事情。

1.  ***将您的日期转换为实际的日期格式。***

    ```
    ## Use a real date format
    DAT[-c(1, 2)] <- lapply(DAT[-c(1, 2)], as.Date) 
    ```

2.  ***根据 UNIT 的组​​合和 STATUS 列发生变化时创建“组”。***

    ```
    ## Identify the "groups" of "ACTIVE" and "INACTIVE"
    ##    by a combination of the first two columns
    RLE <- rle(do.call(paste, DAT[1:2]))$lengths
    RLES <- rep(seq_along(RLE), RLE)
    RLES
    # [1] 1 2 3 3 4 5 6 7 7 7 8 
    ```

    您可以在这里看到第 1 行来自第一个“组”，第 2 行来自第二个“组”，第三行和第四行来自第三个，依此类推。

3.  ***替换当前的 TERMINATED 列。***

    通过使用存储在 中的结果`RLES`，我们可以使用`ave`创建一个与包含最后一个 STOP 日期的行数相同长度的向量。

    ```
    ## Use that grouping to create a partially corrected
    ##   "TERMINATED" column
    DAT$TERMINATED <- ave(DAT$STOP, RLES, FUN = max) 
    ```

4.  ***修复 STATUS == "INACTIVE" 时的 TERMINATED 值。***

    根据您的描述，此处的值应等于“开始”列中的值减去 1。

    ```
    ## Identify the rows where STATUS == "INACTIVE"
    IRows <- which(DAT$STATUS == "INACTIVE")
    ## Since you have a real date format, you can
    ##    simply use "-1" to adjust the TERMINATED date
    ##    using the value from the "START" date
    DAT[IRows, "TERMINATED"] <- DAT[IRows, "START"] - 1 
    ```

5.  ***检查结果。***

    ```
    DAT
    #    UNIT   STATUS TERMINATED      START       STOP
    # 1   100   ACTIVE 2008-12-05 2007-04-23 2008-12-05
    # 2   100 INACTIVE 2008-12-05 2008-12-06 4712-12-31
    # 3   200   ACTIVE 2008-04-18 2004-06-01 2007-01-31
    # 4   200   ACTIVE 2008-04-18 2007-02-01 2008-04-18
    # 5   200 INACTIVE 2008-04-18 2008-04-19 2010-11-28
    # 6   200   ACTIVE 2010-12-29 2010-11-29 2010-12-29
    # 7   200 INACTIVE 2010-12-29 2010-12-30 4712-12-31
    # 8   300   ACTIVE 2009-02-06 2007-10-29 2008-02-04
    # 9   300   ACTIVE 2009-02-06 2008-02-05 2008-06-29
    # 10  300   ACTIVE 2009-02-06 2008-06-30 2009-02-06
    # 11  300 INACTIVE 2009-02-06 2009-02-07 4712-12-31 
    ```

# css - 如何在网页中允许水平滚动

> ID：15583467
> 
> 赞同：2
> 
> 时间：2013-03-23T04:47:50.453
> 
> 标签：css, asp.net-mvc-3, html, razor, asp.net-mvc-4

我打算显示一个宽度很大的表格，所以我还没有创建一个 CSS o HTML 代码来显示这个表格并且可以水平移动

![在此处输入图像描述](../Images/79b44bb76a2abf5567f04cafd4580cdc.png)

唯一应该水平滚动的部分是在中心（白色）。这是我的默认剃须刀视图。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />
        @Styles.Render("~/Content/css")
        @Styles.Render("~/Content/themes/base/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-left">
                    <p class="site-title">@Html.ActionLink("MS. GARCIA MATH 7TH", "Index", "Home")</p>
                </div>
                <div class="float-right">
                    <section id="login">
                        @Html.Partial("_LoginPartial")
                    </section>
                    <nav>...</nav>
                </div>
            </div>
        </header>
        <div id="body">
            @RenderSection("featured", required: false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>
            ...
        </footer>

        @Scripts.Render("~/bundles/otf")

        @RenderSection("scripts", required: false)
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T05:08:02.710

设置溢出滚动

```
#body{
  overflow-x: scroll;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:56:36.193

尝试溢出滚动

```
table
{
 overflow: scroll;
} 
```

# ruby-on-rails - 将类添加到 Rails 选择

> ID：15583469
> 
> 赞同：0
> 
> 时间：2013-03-23T04:48:01.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, select

我需要在我的选择中添加一个类。这似乎很容易，但我无法弄清楚。

我正在尝试这个，但课程没有出现：

```
<%= f.select :dr_state, us_states ,:selected=>cr_dovi.try(:dr_state),:class=>"dr_state"  %> 
```

当我不需要使该选择自动选择时，它以这种方式工作：

```
 <%= f.select :dr_state, us_states ,{},:class=>"dr_state" %> 
```

我一直在试图弄清楚大约一个小时，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:00:33.727

尝试以下操作，我认为 Ruby 可能会将您的两个最终参数解析为相同的哈希：

```
<%= f.select :dr_state, us_states , { :selected=>cr_dovi.try(:dr_state) }, :class=>"dr_state" %> 
```

# c - 客户端不接收消息表单服务器

> ID：15583477
> 
> 赞同：0
> 
> 时间：2013-03-23T04:49:05.817
> 
> 标签：c, sockets

我正在从服务器向客户端发送消息（问候语）。服务器发送数据但客户端没有收到它，然后服务器跳转到读取，因为客户端必须回复用户的输入。你能告诉我为什么我从来没有收到问候信息吗？

服务器：

```
int
main(int argc, char **argv)
{
    int                 listenfd, connfd;
    socklen_t           len;
    struct sockaddr_in  servaddr, cliaddr;
    char                buff[MAXLINE];
    time_t              ticks;
    char                message[50];
    char                temp_scale[2];
    char                recvdata[MAXLINE + 1];

    listenfd = Socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*----------------------------------------------------*/
    servaddr.sin_port        = htons(5678); 

    Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));
    Listen(listenfd, LISTENQ);
    printf("Listening on port 5678...Press Ctrl+C to end server\n");
    printf("Waiting for incoming connections...\n");

    for ( ; ; )
    {
        len = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &len);

        /*Client connects to server*/
        printf("Connection from %s, port %d\n",
               Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
               ntohs(cliaddr.sin_port));

        snprintf(message, sizeof(message), "%s\r\n", "Welcome!");
        Writen(connfd, message, strlen(message));
        while ( (n = read(connfd, recvdata, MAXLINE)) > 0)
            {
             recvdata[n] = 0;   /* null terminate*/
             if (fputs(recvdata, stdout) == EOF)
                 err_sys("fputs error");
            }
        if (n < 0)
         err_sys("read error");

    Close(connfd);
    }
} 
```

客户：

```
int
main(int argc, char **argv)
{
    int                 sockfd, n;
    socklen_t           len;
    char                recvline[MAXLINE + 1];
    struct sockaddr_in  servaddr, cliaddr;
    char  scale[2];

    /*if (argc != 2)
        err_quit("usage: a.out <IPaddress>");*/

    if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        err_sys("socket error");

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port   = htons(atoi(argv[2])); /*port passed through command line*/
    if (inet_pton(AF_INET, argv[1], &servaddr.sin_addr) <= 0) /*The client translates the server address, passed on the command line*/
        err_quit("inet_pton error for %s", argv[1]);

    printf("Connect...\n");
    if (connect(sockfd, (SA *) &servaddr, sizeof(servaddr)) < 0)
        err_sys("connect error");

    len = sizeof(cliaddr);
    Getsockname(sockfd, (SA *) &cliaddr, &len);
    printf("Local Address is: %s\n",
           Sock_ntop((SA *) &cliaddr, sizeof(cliaddr))); 

    while ( (n = read(sockfd, recvline, MAXLINE)) > 0) {
        recvline[n] = 0;    /* null terminate */
        if (fputs(recvline, stdout) == EOF)
            err_sys("fputs error");
    }
    if (n < 0)
     err_sys("read error");

    printf("Enter the thermal Unit ('C' Celsius, 'F' Farehnheit: ");
    send_data(sockfd);

    exit(0);
} 
```

谢谢！

# ruby-on-rails - 从字符串中删除元素

> ID：15583482
> 
> 赞同：0
> 
> 时间：2013-03-23T04:49:50.857
> 
> 标签：ruby-on-rails, arrays, string

我的代码在这里

```
str= "In 2004, Obama received national attention during his campaign to represent Illinois in the United States Senate"
 arr =str.scan(/\S+(?:\s+\S+)?/)
 it gives
 arr=["In 2004,", "Obama received", "national attention", "during his", "campaign to", "represent Illinois", "in the", "United States", "Senate"]
   fresh_arr=[]
   arr.each do |el|
     if !arr.match(/is|am|are|this|his/)
        fresh_arr << el
     end
   end 
```

现在我想删除包含 (is,am,are,this,his) 类型字符串的元素，然后得到类似这样的结果

```
arr=["Obama received", "national attention","represent Illinois","United States", "Senate"] 
```

我有非常大的数据，需要 6 秒我可以用其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:08:05.437

简单的方法来做到这一点。但我不知道性能。因为`map`仍然运行您正在运行的循环。

```
 arr.map{|x| x unless x =~ /\b(in|am|are|his|this)\b/i}.compact 
```

基准：

```
> my_bm(500000){arr.map{|x| x unless x =~ /\b(in|am|are|his|this)\b/i}.compact}
      user     system      total        real
  7.430000   0.000000   7.430000 (  7.451064)
 => nil 

> my_bm(500000){arr.reject! { |e| e =~ /\b(in|am|are|his|this)\b/i }}
      user     system      total        real
  4.620000   0.000000   4.620000 (  4.623782)

> my_bm(5000000){arr.map{|x| x unless x =~ /\b(in|am|are|his|this)\b/i}.compact}
      user     system      total        real
 50.790000   0.010000  50.800000 ( 50.840533)

> my_bm(5000000){arr.reject! { |e| e =~ /\b(in|am|are|his|this)\b/i }}
      user     system      total        real
 46.140000   0.010000  46.150000 ( 46.198752)
 => nil 
```

# joomla - Joomla 限制自定义分页

> ID：15583486
> 
> 赞同：-1
> 
> 时间：2013-03-23T04:50:02.357
> 
> 标签：joomla, joomla2.5, paging

在用于分页的 Joomla 2.5 中，我们有 getPagesLinks() 函数。

如果我有超过 100 条记录，那么它会给出 Start Prev 1 2 3 4 5 6 7 8 9 10 Next End。

我想要开始 Prev 1 2 Next End。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:56:56.027

您可以覆盖模板中的输出：http: [//docs.joomla.org/Understanding_Output_Overrides#Pagination_Links_Overrides](http://docs.joomla.org/Understanding_Output_Overrides#Pagination_Links_Overrides)

分页对象也有一些有趣的属性：

*   页当前
*   页面开始
*   页面停止
*   页总数

这应该可以让你创造你想要的东西。根据 Current 和 Total 设置 Start 和 Stop。

# wpf - WPF AutoCompleteBox 动态排序

> ID：15583487
> 
> 赞同：1
> 
> 时间：2013-03-23T04:50:08.177
> 
> 标签：wpf, autocomplete, wpf-controls, observablecollection, wpftoolkit

我正在使用 WPF AutoCompleteBox，它运行良好，但我想做的一件事是在将每个字母输入到主 TextBox 后即时对建议列表进行排序。有谁知道如何做到这一点？我尝试将 ICollectionView 属性与 DefaultView 逻辑一起使用并添加 SortDescriptions，但它似乎没有分阶段建议列表。为了确保我的集合视图排序正常工作，我将一个普通的 ListBox 控件和一个 AutoCompleteBox 控件放在同一个窗口上，并将两个控件绑定到具有相同集合视图的同一个可观察集合，并且普通的 ListBox 控件显示使用 SortDescriptions 正确排序的项目，但 AutoCompleteBox 列表没有对项目进行排序。它按照它们添加到集合中的顺序排列它们。

想法？建议？有人做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T23:31:12.930

我不知道@user1089031 是如何做到这一点的，但这里是任何可能感兴趣的人的工作示例（**更新为@adabyron 的评论！**）：

**视图模型.cs**

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Windows.Data;

namespace WpfApplication12
{
    public class Item
    {
        public string Name { get; set; }

        public override string ToString()
        {
            return Name;
        }
    }

    public class ViewModel: INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged = delegate {};

        private readonly ObservableCollection<Item> source;
        private readonly ICollectionView items;
        private string searchText;

        public ViewModel()
        {
            source = new ObservableCollection<Item>
                         {
                             new Item {Name = "111111111 Test abb - (1)"},
                             new Item {Name = "22222 Test - (2)"},
                             new Item {Name = "333 Test - (3)"},
                             new Item {Name = "44444 Test abc - (4)"},
                             new Item {Name = "555555 Test cde - (5)"},
                             new Item {Name = "66 Test - bbcd (6)"},
                             new Item {Name = "7 Test - cd (7)"},
                             new Item {Name = "Test - ab (8)"},
                         };

            items = new ListCollectionView(source);
        }

        public ICollectionView Items
        {
            get { return items; }
        }

        public IEnumerable<Item> ItemsSorted
        {
            get 
            {
                return string.IsNullOrEmpty(SearchText)
                        ? source
                        : (IEnumerable<Item>)source
                            .OrderBy(item => item.Name.IndexOf(SearchText,
                                StringComparison.InvariantCultureIgnoreCase));
            }
        }

        public Item Selected { get; set; }

        public string SearchText
        {
            get { return searchText; }
            set
            {
                searchText = value;
                PropertyChanged(this,
                            new PropertyChangedEventArgs("SearchText"));
                PropertyChanged(this,
                            new PropertyChangedEventArgs("ItemsSorted"));
            }
        }
    }
} 
```

**MainWindow.xaml**：

```
<Window x:Class="WpfApplication12.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
        xmlns:wpfApplication2="clr-namespace:WpfApplication12"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        Title="MainWindow" Height="200" Width="500"
        DataContext="{DynamicResource viewModel}">

    <Window.Resources>

        <wpfApplication2:ViewModel x:Key="viewModel" />

        <DataTemplate DataType="{x:Type wpfApplication2:Item}">
            <TextBlock Text="{Binding Name}" FontFamily="Courier New" />
        </DataTemplate>

    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <controls:AutoCompleteBox
            ItemsSource="{Binding ItemsSorted}"
            FilterMode="ContainsOrdinal"
            SelectedItem="{Binding Selected, Mode=TwoWay}"
            MinimumPrefixLength="0" 
            VerticalAlignment="Top" Margin="5">

            <i:Interaction.Behaviors>
                <wpfApplication2:SearchTextBindBehavior
                            BoundSearchText="{Binding SearchText,
                                                      Mode=OneWayToSource}" />
            </i:Interaction.Behaviors>

        </controls:AutoCompleteBox>

        <ListBox Grid.Column="1"
                 ItemsSource="{Binding Items}" Margin="5" />

    </Grid>
</Window> 
```

正如您可能注意到的，我添加了一种自定义行为来`AutoCompleteBox`控制：

```
<i:Interaction.Behaviors>
    <wpfApplication2:SearchTextBindBehavior
            BoundSearchText="{Binding SearchText,
                                      Mode=OneWayToSource}" />
</i:Interaction.Behaviors> 
```

这是因为`AutoCompleteBox`' 自己的`SearchText`属性是只读的。所以这里是这种行为的代码：

**SearchTextBindBehavior.cs**（**更新**）

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;

namespace WpfApplication12
{
    public class SearchTextBindBehavior : Behavior<AutoCompleteBox>
    {
        public static readonly DependencyProperty BoundSearchTextProperty =
                            DependencyProperty.Register("BoundSearchText",
                            typeof(string), typeof(SearchTextBindBehavior));

        public string BoundSearchText
        {
            get { return (string)GetValue(BoundSearchTextProperty); }
            set { SetValue(BoundSearchTextProperty, value); }
        }

        protected override void OnAttached()
        {
            base.OnAttached();
            AssociatedObject.TextChanged += OnTextChanged;
        }

        protected override void OnDetaching()
        {
            base.OnDetaching();
            AssociatedObject.TextChanged -= OnTextChanged;
        }

        private void OnTextChanged(object sender, RoutedEventArgs args)
        {
            if(AssociatedObject.Text.Length == 0)
            {
                BoundSearchText = string.Empty;
                return;
            }

            if(AssociatedObject.SearchText ==
                AssociatedObject.Text.Substring(0,
                                           AssociatedObject.Text.Length - 1))
            {
                BoundSearchText = AssociatedObject.Text;
            }
        }
    }
} 
```

注意：要使这一切正常工作，您需要从[Expression Blend 4 SDK添加对](http://www.microsoft.com/en-us/download/details.aspx?id=10801)**System.Windows.Interactivity.dll**的引用。这只是它的几个朋友住的地方。`Behavior<T>`

如果您已经安装了 Expression Blend，那么您已经拥有了所有 SDK，无需下载任何东西。以防万一-在我的机器上，组件位于此处：

C:\Program Files\Microsoft SDKs\Expression\Blend.NETFramework\v4.0\Libraries\System.Windows.Interactivity.dll

最后，如果您有充分的理由不添加对这个流行的官方库的引用，请随时通过普通的旧附加属性以“旧方式”重新实现此自定义行为。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T14:28:55.520

这就是我最终得到的结果，对 Sevenate 的回答稍作改编，所以如果你想投票，请对他的帖子进行投票。

我使用了一个子类（`AutoCompleteBox`由于其他原因，我已经有了子类），它允许我创建一个包装器依赖属性来将只读`SearchText`（=用户通过键盘输入的内容）获取到 ViewModel - 而不是混合行为，这是一个也是完全有效的方式。

问题的症结在于，您应该只在 SearchText 更改时应用动态排序，而不是`Text`（= 中显示的内容`AutoCompleteBox`，如果在下拉列表中选择建议也会更改）。Sevenate 引发只读 ItemsSource ( `ItemsSorted`) 的 PropertyChanged 事件的方法是一种应用排序的好方法。

视图模型：

```
public class Item
{
    public string Name { get; set; }

    public override string ToString()
    {
        return Name;
    }
}

public class AutoCompleteBoxDynamicSortingVM : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private readonly ObservableCollection<Item> source;

    public AutoCompleteBoxDynamicSortingVM()
    {
        source = new ObservableCollection<Item>
                     {
                         new Item {Name = "111111111 Test abb - (1)"},
                         new Item {Name = "22222 Test - (2)"},
                         new Item {Name = "333 Test - (3)"},
                         new Item {Name = "44444 Test abc - (4)"},
                         new Item {Name = "555555 Test cde - (5)"},
                         new Item {Name = "66 Test - bbcd (6)"},
                         new Item {Name = "7 Test - cd (7)"},
                         new Item {Name = "Test - ab (8)"},
                     };
    }

    public IEnumerable<Item> ItemsSorted
    {
        get
        {
            return string.IsNullOrEmpty(Text) ? (IEnumerable<Item>)source :
                    source.OrderBy(item => item.Name.IndexOf(Text, StringComparison.OrdinalIgnoreCase));
        }
    }

    public Item Selected { get; set; }

    // Text that is shown in AutoCompleteBox
    private string text;
    public string Text
    {
        get { return text; }
        set { text = value; OnPropertyChanged("Text"); }
    }

    // Text that was entered by user (cannot be changed from viewmodel)
    private string searchText;
    public string SearchText
    {
        get { return searchText; }
        set
        {
            searchText = value;
            OnPropertyChanged("SearchText");
            OnPropertyChanged("ItemsSorted");
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

AutoCompleteBox 的子类：

```
public class MyAutoCompleteBox : AutoCompleteBox
{
    /// <summary>
    /// Bindable property that encapsulates the readonly property SearchText.
    /// When the viewmodel tries to set SearchText by way of EnteredText, it will fail without an exception.
    /// </summary>
    public string EnteredText
    {
        get { return (string)GetValue(EnteredTextProperty); }
        set { SetValue(EnteredTextProperty, value); } 
    }
    public static readonly DependencyProperty EnteredTextProperty = DependencyProperty.Register("EnteredText", typeof(string), typeof(MyAutoCompleteBox), new PropertyMetadata(null));

    protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        // synchronize SearchText and EnteredText (only one-way)
        if (e.Property == AutoCompleteBox.SearchTextProperty && this.EnteredText != this.SearchText)
            EnteredText = SearchText;

        base.OnPropertyChanged(e);
    }
} 
```

xml:

```
<UserControl x:Class="WpfApplication1.Controls.AutoCompleteBoxDynamicSorting"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:myctrls="clr-namespace:WpfApplication1.Controls"
        xmlns:models="clr-namespace:WpfApplication1.ViewModels"
        Height="350" Width="525"
        DataContext="{DynamicResource viewModel}">

    <UserControl.Resources>

        <models:AutoCompleteBoxDynamicSortingVM x:Key="viewModel" />

        <DataTemplate DataType="{x:Type models:Item}">
            <TextBlock Text="{Binding Path=Name}" />
        </DataTemplate>

    </UserControl.Resources>

    <Grid>
        <myctrls:MyAutoCompleteBox
            ItemsSource="{Binding ItemsSorted}"
            Text="{Binding Text, Mode=TwoWay}"
            EnteredText="{Binding SearchText, Mode=OneWayToSource}"
            FilterMode="ContainsOrdinal"
            VerticalAlignment="Top" Margin="5" />
    </Grid>
</UserControl> 
```

# c# - 主菜单导航/键盘输入速度太快

> ID：15583491
> 
> 赞同：5
> 
> 时间：2013-03-23T04:50:52.470
> 
> 标签：c#, input, keyboard, xna-4.0

我最近开始使用 XNA 游戏工作室 4.0 制作视频游戏。我使用按钮列表制作了一个包含 4 种精灵字体的主菜单。当我按下向上和向下箭头时，它们的颜色会从白色变为黄色。

我的问题是，当我滚动浏览它时，它会非常快地从顶部字体转到底部字体，然后直接转到最后一个字体。我不确定这是为什么？是因为我将它放在更新方法中并且它每 60 秒左右调用一次吗？

这是我按下箭头键时的代码。

```
 public void Update(GameTime gameTime)
    {
        keyboard = Keyboard.GetState();

        if (CheckKeyboard(Keys.Up))
        {
            if (selected > 0)
            {
                selected--;
            }
        }
        if (CheckKeyboard(Keys.Down))
        {
            if (selected < buttonList.Count - 1)
            {
                selected++;
            }
        }

        keyboard = prevKeyboard;
    }

    public bool CheckKeyboard(Keys key)
    {
        return (keyboard.IsKeyDown(key) && prevKeyboard.IsKeyUp(key));
    } 
```

我需要有人帮我把它放慢到合理的速度。

如果您能帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:21:03.013

我认为问题是因为您没有`prevKeyboard`正确设置。

试试这个：

```
public void Update(GameTime gameTime)
{
    keyboard = Keyboard.GetState();

    if (CheckKeyboard(Keys.Up))
    {
        if (selected > 0)
        {
            selected--;
        }
    }
    if (CheckKeyboard(Keys.Down))
    {
        if (selected < buttonList.Count - 1)
        {
            selected++;
        }
    }

    prevKeyboard = keyboard; // <=========== CHANGE MADE HERE
}

public bool CheckKeyboard(Keys key)
{
    return (keyboard.IsKeyDown(key) && prevKeyboard.IsKeyUp(key));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T05:35:45.527

我认为是因为

```
 if (CheckKeyboard(Keys.Up))
    {
        if (selected > 0)
        {
            selected--;
            // This loops executes so quick before you release button.
            // Make changes here to stop the loop if the button is pressed and loop
            // executed once.(May be) just **return;** would do ?
        }
    }
    if (CheckKeyboard(Keys.Down))
    {
        if (selected < buttonList.Count - 1)
        {
            selected++;
            // This loops executes so quick before you release button.
            // Make changes here to stop the loop if the button is pressed and loop
            // executed once.(May be) just **return;** would do ?
        }
    } 
```

# gstreamer - 在带有 GStreamer 的 Python 中，如何使用文件对象作为输入源？

> ID：15583492
> 
> 赞同：3
> 
> 时间：2013-03-23T04:51:01.803
> 
> 标签：gstreamer, python-gstreamer, gobject-introspection

我目前正在做：

```
source_path = 'file:///home/raj/videos/sample.mpg'
descr = 'uridecodebin uri=%s ! videoconvert ! gdkpixbufsink name=sink' % (source_path)
pipeline = Gst.parse_launch(descr) 
```

但是`uri`，我如何使用原始文件源而不是使用`source_file = request.POST['file'].file`. （也许这会从字符串加载视频文件？）

到目前为止，我的研究使我找到了`appsrc`（[http://ingo.fargonauten.de/node/447](http://ingo.fargonauten.de/node/447)），但我不确定如何将它与**GStreamer 1.0**一起使用，因为我无法弄清楚如何将文件加载到缓冲区中：

```
raw_src = request.POST['files[]'].file
descr = 'appsrc name=vidsrc ! videoconvert ! gdkpixbufsink name=sink'
pipeline = Gst.parse_launch(descr)
appsrc = pipeline.get_by_name('vidsrc')
appsrc.emit('push-buffer', Gst.Buffer(raw_src.read()) ##I am not creating the buffer correctly for GStreamer 1.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:55:29.053

您可以使用几个选项：

1.  管道，创建一组管道，将文件内容写入写入管道并使用 fd 属性将读取管道传递给 fdsrc。

2.  使用 tempfile 模块创建一个临时文件，写入内容并使用 filename 属性将文件传递给 filesink。

3.  Appsrc，但您需要连接到 push-buffer 和 end-of-stream 信号，从数据创建缓冲区。最好避免使用此选项，因为您必须在 python 中进行读取，使用 fdsrc/filesink 更有效，因为部分处理是在 C 中完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:10:11.663

如果您有一个真实的文件对象而不仅仅是类似文件，您可以直接使用 fdsrc 而不是在两者之间使用管道。

为了适应问题中的代码，这样的事情应该可以工作：

```
descr = 'fdsrc name=vidsrc ! decodebin ! videoconvert ! gdkpixbufsink name=sink'
pipeline = Gst.parse_launch(descr)

src = pipeline.get_by_name('vidsrc')
src.props.fd = source_file.fileno() 
```

您想添加 decodebin，因为您是从 uridecodebin 切换的，fd source 不太可能提供 videoconvert/pixbufsink 需要的那种输入。

# big-o - 这些简单循环的时间复杂度是如何计算的？

> ID：15583493
> 
> 赞同：3
> 
> 时间：2013-03-23T04:51:23.840
> 
> 标签：big-o, time-complexity

我了解如何：

```
for (int i=0; i<n; i++) 
```

这个时间复杂度是`O(n)`。

```
for (int i=0; i<n; i++)
    for (int j=0; j<n; j++)
        for (k=0; k<n; k++) 
```

这是`O(n^3)`对的吗？

```
i=1
do
    //......
    i++
while (i*2 <n) 
```

这是`O(n)`吗？或者是这样`O(n/2)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:54:07.980

`O(n/2)` *仅* `O(n)`具有 1/2 的常数系数。系数可以是 100 亿，它仍然是`O(n)`，而不是例如`O(n^(1.0001))`哪个是不同的复杂度类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:54:40.367

*O(n ³ )*的第一个，你是对的。

您的第二个算法是*O(n/2)* = *O(Cn)* = *O(n)*。*1/2*是一个常数，所以我们可以安全地丢弃它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:59:02.990

第一个复杂度 O(n^3)，正确。第二个，O(cn)，c 常数。不管c有多大，按照big-O的定义，复杂度还是O(n)。

然而，O-notation 被认为是有害的。见[这里](http://jng.imagine27.com/index.php/2013-02-10-121226_analytic-combinatorics-is-better-o-nation-considered-harmful.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T11:57:33.993

这段代码：

```
i=1
do
    //......
    i++
while (i*2 < n); 
```

相当于那个：

```
for ( i = 1; i < n / 2 ; ++ i ); 
```

从表面上看，这是`O(n)`.

# c - 单链表似乎不起作用

> ID：15583498
> 
> 赞同：-1
> 
> 时间：2013-03-23T04:52:39.117
> 
> 标签：c, list, linked-list

我正在玩链接列表以适应它，但我无法让这个小程序工作。我不知道这里有什么问题，求助。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
//Struct
struct Node {
    int value;
    struct Node *next;
};
typedef struct Node NODE;

//Function Declaration
NODE* addNode (NODE* pList, NODE* pPre, int data);
void printList (NODE* pList);

int main (void)
{
    //Local Declaration
    NODE *pPre;
    NODE *pList;

    //Statement
    pList = addNode (pList, pPre, 10);
    pList = addNode (pList, pPre, 20);
    pList = addNode (pList, pPre, 30);

    printList (pList);
    return 0;
}

NODE* addNode (NODE* pList, NODE* pPre, int data)
{
    //Local Declaration
    NODE* pNew;

    //Statement
    if (!(pNew = (NODE*)malloc(sizeof(NODE))))
    {
        printf("\aMemory overflow in insert\n");
        exit(1);
    }

    pNew->value = data;
    if (pPre == NULL)
    {
        //Inserting before first node or to empty list.
        pNew->next = pList;
        pList = pNew;
    }
    else
    {
        pNew->next = pPre->next;
        pPre->next = pNew;
    }
    return pList;
}
void printList (NODE* pList)
{
    //Local Declaration
    NODE* pNew;

    //Statement

    pNew = pList;
    while(pNew)
    {
        printf("%d", pNew->value);
        pNew = pNew->next;

    }
    return;
} 
```

pPre 是前驱节点，pList 是指向列表的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:12:20.187

您尚未将 NULL 分配给指针**pPre**和**PList**，请尝试以下代码，它现在运行正常，

```
NODE *pPre=NULL;
NODE *pList=NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:55:52.923

根据您的代码逻辑，您希望 addNode() 修改 pPre。所以你需要将 pPre 定义为 Node * 的指针。

```
Node * addNode(Node *pList, Node **pPre, int data) 
```

addNode() 应该返回 pList，你可能会错过它。

# memory-management - 清除内核中进程 PTE 的 RW（写保护）标志，但写入时没有分段错误

> ID：15583499
> 
> 赞同：1
> 
> 时间：2013-03-23T04:52:50.053
> 
> 标签：memory-management, linux-kernel

我在页面级别实现了增量进程检查点（我只是将数据从进程地址空间转储到文件中）。

我使用的方法如下。我使用了两个系统调用：

1.  完成检查点：复制整个地址空间。此外，如果为页面设置了写位，请将其清除。

2.  增量检查点：仅在设置写入位并再次清除时转储数据。所以基本上，我检查是否为增量检查点设置了写入位。如果是，则转储页面数据。

测试程序：

```
char a[10000];
sys_cp_range(a,a+10000);
a[3]='A'; 
sys_incr_cp_range(a,a+10000); 
```

据我所知，内核应该通过使用 SIGSEGV 终止进程来进行页面错误并处理非法写入情况。然而，该程序已成功检查点。这里到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:57:22.397

如果您在 PTE 仍缓存在 TLB 中时对其进行修改，则修改的效果可能会暂时看不到（直到 PTE 从 TLB 中被逐出并且必须从页表中重新读取）。

您需要`invlpg`在 PTE 修改后使用（我假设是 x86）指令使 TLB 中的 PTE 无效。它必须在所有 CPU 上完成。内核中必须有一个专门用于此目的的函数。

此外，仔细检查编译器是否没有重新排序或丢弃上述代码中的任何内容也没有什么坏处。

# ruby-on-rails - 片段缓存和用户头像/图像

> ID：15583504
> 
> 赞同：3
> 
> 时间：2013-03-23T04:53:31.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, gravatar

我们在我们的网站上使用 Gravatar，但我们希望让用户直接上传他们的个人资料图片，以改善用户体验，类似于[Stackexchange 一直在做](https://blog.stackoverflow.com/2013/01/announcing-a-new-way-to-change-your-profile-picture/)的事情。

在我们的网站上，用户可以相互关注、评论、“喜欢”并以直接和间接生成内容的方式进行互动。这意味着带有用户头像的缓存片段分散在各处，我们无法找到合理的方法来使其无效而不会对渲染性能产生负面影响。

以下是我们研究过的可能解决方案：

**选项 1)**采用 Gravatar 方法并设置非常短`Expires/Cache-Control max-age`的标题并回收相同的图像文件名。

**选项 2)**为所有用户使用占位符图像，其数据属性包含由 JavaScript 读取的用户 ID，并用于发出第二个 Ajax 请求，请求服务器提供最新数据头像。

有没有更好的方法来解决这个问题？我们是否忽略了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T00:33:22.487

我想我理解你的问题，但我不确定我是否理解选项 2 作为解决方案，这可能表明它不是一个很好的解决方案。如果是我，我只会将正在重用的用户 gravatar 周围的 html 缓存在由用户 ID 键入的顶级缓存键中。IE

```
<% cache("user_#{user.id}_profile_image") do %>
  <img src="blahblahblah or gravatar helper code or whatev">
<% end %> 
```

如果您担心用户上传 gravatar 并随后缓存了默认的 gravatar 图片，我会说您最好的选择是：

1) 在您发送他们上传 gravatar 的用户个人资料区域中，有一个刷新链接，该链接指向一个刷新操作，该操作实际上使用户缓存片段无效。IE

```
expire_fragment "user_#{user.id}_profile_image" 
```

( [http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html) )

2）您可以不使用默认的 gravatar 重定向来上传图像，而是可以拦截点击，将其发送到您自己的控制器，安排后台任务在 15 分钟左右运行，然后呈现重定向的 javascript 响应他们到实际的 gravatar 页面上传他们的照片。然后，后台工作人员将在稍后运行时清除该片段。这假设他们实际上上传了他们的图像，并且总的来说我会说一个糟糕的想法。

不过老实说，我不知道你为什么一开始就担心缓存 gravatar。它击中了 gravatars 服务器，因此它不会在您的服务器上造成任何负载，自己存储它似乎有点自我挫败到使用 gravatar 的地步。希望您的问题更简单（并且只是：如何在用户上传自己的图像时清除默认缓存的 gravatar 图像），这可以通过 #1 解决），这将允许您使缓存的 gravatar 图像过期并使用您自己的重新缓存它图片，在用户上传他们的图片后。（其中，下次呈现页面时会重新缓存图像，因为您有一些逻辑，例如：

```
<% cache("user_#{user.id}_profile_image") do %>
  <% if user.has_uploaded_image? %>
     <%= display_profile_image %>
  <% else %>
    <%= display_gravatar_image %>
  <% end %>
<% end %> 
```

# ios - 无法在 iOS UIWebView 中加载完整的 Facebook 评论插件

> ID：15583510
> 
> 赞同：4
> 
> 时间：2013-03-23T04:54:57.210
> 
> 标签：ios, objective-c, uiwebview, facebook-javascript-sdk, facebook-comments

我有一个简单`ViewController`的在 UIWebView 中加载 FB 评论插件

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIWebView * webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320.0f, 1505.0f)];

    NSString * html = @"\
    <!DOCTYPE html>\
    <html xmlns:fb='http://ogp.me/ns/fb#'>\
    <head>\
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>\
    </head>\
    <body style='background-color:red;'>\
    \
    <div id='fb-root'></div>\
    <script>(function(d, s, id) {\
    var js, fjs = d.getElementsByTagName(s)[0];\
    if (d.getElementById(id)) return;\
    js = d.createElement(s); js.id = id;\
    js.src = 'http://connect.facebook.net/en_US/all.js#xfbml=1&appId=xxx';\
    fjs.parentNode.insertBefore(js, fjs);\
    }(document, 'script', 'facebook-jssdk'));</script>\
    \
    <fb:comments href='http://example.com' num_posts='10'></fb:comments>\
    \
    </body>\
    </html>\
    ";

    [webView loadHTMLString:html baseURL:nil];
    [self.view addSubview:webView]; 
```

我可以看到正在加载的评论，但只是高度很奇怪，似乎自动调整大小失败了？如果我使用移动 Safari，我可以查看全部评论。

![模拟器截图](../Images/a181026aa98c78582f3c6c88324d95bf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T04:05:15.723

您可以使用此代码在 iOS UIWebview 中显示 fb 评论

```
 UIWebView *fbWebview=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 1505)];
  [fbWebview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.facebook.com/Levis"]]];

CGRect scrollViewFrame = CGRectMake(0, 0, 320, 1024);
UIScrollView  *scrollViewMain = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
CGSize scrollViewContentSize = CGSizeMake(320, 1505);
[scrollViewMain setContentSize:scrollViewContentSize];
[scrollViewMain setBounces:NO];
[scrollViewMain setScrollEnabled:YES];
[scrollViewMain setShowsVerticalScrollIndicator:YES];

[scrollViewMain setBackgroundColor:[UIColor redColor]];
[scrollViewMain addSubview:fbWebview];

[self.view addSubview:scrollViewMain]; 
```

而不是“ [https://www.facebook.com/Levis](https://www.facebook.com/Levis) ”使用您的 FB URL

这可能会帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:10:05.803

您需要指定一个 baseURL

```
[webView loadHTMLString:html baseURL:[NSURL URLWithString:@"http://www.example.com"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T11:42:38.570

@Howard 你可以使用 http://www.facebook.com/plugins/comments.php?href=http://www.google.com' scrolling='yes' profile='yes' frameborder='0' style= '边界：无；溢出：隐藏；宽度：300 像素；高度：30 像素；' data-href=' [http](http://www.google.com) ://www.google.com'allowTransparency='true'>"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T18:49:25.237

这里同样的问题。解决方案是不使用本地 HTML 文件（或 HTML 字符串）。将 HTML 文件上传到服务器并使用：

```
NSURL *url = [NSURL URLWithString:@"http://www.blablblab.com/yourfile.html"]; 
[self.webview loadRequest:[NSURLRequest requestWithURL:url]]; 
```

代替：

```
[self.webview loadHTMLString:localString baseURL:nil]; 
```

我还没有发现为什么文件在服务器上时布局会有所不同，但是当它是本地文件时，我的 Facebook 评论视图的高度总是降低到“height:160”。显然这是因为“all.js” facebook 脚本（根据[这个问题](https://stackoverflow.com/questions/18775771/facebook-comment-box-inside-uiwebview-doesnt-have-the-right-height)）。

# html - 日期的静态值在 html 中的 type="date" 中不起作用？

> ID：15583511
> 
> 赞同：1
> 
> 时间：2013-03-23T04:55:04.953
> 
> 标签：html, input

我有一个这样的输入标签：

```
<input class="span2" type="date" name="date" value="01/12/2012"> 
```

模板中的输入表单显示为 mm/dd/yyyy。我提供的静态值不起作用。但是，当我将类型更改为 date 时，它​​可以工作。html不允许这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T05:02:43.377

带有的`input`标签`type="date"`应该接受格式为的日期，`YYYY-MM-DD`而不是`mm/dd/yyyy`您尝试传递的日期。

[在w3.org](http://www.w3.org/TR/html-markup/input.date.html)上阅读有关它的更多信息，有效性根据[RFC 3339](https://www.rfc-editor.org/rfc/rfc3339)定义。

* * *

因此，该值应作为

```
value="2012-01-12" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T05:04:11.177

您不符合 HTML5 规范：[http ://www.w3.org/TR/html5/forms.html#input-author-notes](http://www.w3.org/TR/html5/forms.html#input-author-notes)

该规范要求所有文字日期值都以 ISO 8601 格式编写`yyyy-MM-dd`：

> “在线”使用的格式，即在 HTML 标记和表单提交中，旨在实现计算机可读和一致，而与用户的区域设置无关。例如，日期总是以“YYYY-MM-DD”的格式书写，如“2003-02-01”。预计用户永远不会看到这种格式。

# android - 与模拟器相比，android 键盘在设备上的作用不同

> ID：15583512
> 
> 赞同：1
> 
> 时间：2013-03-23T04:55:20.563
> 
> 标签：android, keyboard, emulation

在模拟器上测试 android 项目时，键盘似乎工作正常。但是，当我在三星手机上进行测试时，键盘工作不正常。一个问题是，当我的第一个显示器出现时，键盘会自动出现，尽管它不在模拟器中。其次，如果我输入一些东西并按回车键或回车键，键盘不会在我的手机上消失。关闭键盘是否需要单独的步骤？第三，有时当我按下回车键时，它会导致光标转到新行而不是提交数据。同样，这些都不是模拟器的问题。那么我该怎么做才能让键盘在我的手机设备上正常工作呢？

下面是我使用 AutocompleteText 视图接收和提交数据的代码。

```
 autoComplete = (AutoCompleteTextView) findViewById(R.id.suggest);
        autoComplete.addTextChangedListener(new TextWatcher(){

            public void afterTextChanged(Editable editable) {
                // TODO Auto-generated method stub

            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // TODO Auto-generated method stub

            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                String newText = s.toString();
                int len = newText.length();
           //     Toast.makeText(getApplicationContext(), "Text changed count = " + String.valueOf(len), Toast.LENGTH_LONG).show();
                if(len > 1)
                    new getData().execute(newText);
            }

        }); 
```

有时当我按下回车键时，它会转到另一行而不是执行我的异步任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:28:05.683

您需要根据您的要求**强制打开和关闭****软键盘**。

对于**打开** *软键盘*：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(your_edit_text, InputMethodManager.SHOW_FORCED); 
```

关闭**软** *键盘*：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
                      Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(your_edit_text.getWindowToken(), 0); 
```

要获得正确的工作**完成（Enter）**键，您应该将以下*属性放入***.XML**文件中的**编辑文本**中。

 **```
android:singleLine="true"
android:imeOptions="actionDone" 
```**

# c++ - 使用 C++ 和 openframeworks 的 Web Color 图像检索系统

> ID：15583514
> 
> 赞同：1
> 
> 时间：2013-03-23T04:55:35.957
> 
> 标签：c++, database, information-retrieval, openframeworks

我正在用 C++ 和 openFrameworks 编写一个程序，希望通过颜色匹配来实现图像检索系统。我有一个算法可以通过 rgb 值在数据库中找到匹配项。例如，如果我的计算机上有一个包含 1000 张图片的数据库，并且我的查询 rgb 值为 255,0,0，则程序将查看 1000 张图片并找到最接近的匹配项。但是，我的问题是我希望它也可以在网络上查找匹配项。我一直在尝试寻找如何从网站获取图片，但是，如果您不知道图片的具体 url，就很难掌握数据。也许有人对如何获取网站上的图像有所了解？理想情况下，该程序会在指定的网站上搜索图像的每个网页，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:38:49.927

正如我在评论中提到的，这是从 RGB 颜色空间转换为 L *a* b* 颜色空间并使用欧几里德距离与数据库中图像的平均颜色的问题。

这是一个基本的演示： ![按颜色搜索图像](../Images/dce6c5dcdc06ed4420c7f67136023540.png)

```
#include "testApp.h"

//ported from http://cookbooks.adobe.com/post_Useful_color_equations__RGB_to_LAB_converter-14227.html
struct Color{
    float R,G,B,X,Y,Z,L,a,b;
};

#define REF_X 95.047; // Observer= 2°, Illuminant= D65
#define REF_Y 100.000;
#define REF_Z 108.883;

Color rgb2xyz(int R,int G,int B){
    float r = R / 255.0;
    float g = G / 255.0;
    float b = B / 255.0;

    if (r > 0.04045){ r = pow((r + 0.055) / 1.055, 2.4); }
    else { r = r / 12.92; }
    if ( g > 0.04045){ g = pow((g + 0.055) / 1.055, 2.4); }
    else { g = g / 12.92; }
    if (b > 0.04045){ b = pow((b + 0.055) / 1.055, 2.4); }
    else {  b = b / 12.92; }

    r = r * 100;
    g = g * 100;
    b = b * 100;
    //Observer. = 2°, Illuminant = D65
    Color xyz;
    xyz.X = r * 0.4124 + g * 0.3576 + b * 0.1805;
    xyz.Y = r * 0.2126 + g * 0.7152 + b * 0.0722;
    xyz.Z = r * 0.0193 + g * 0.1192 + b * 0.9505;
    return xyz;
}
Color xyz2lab(float X,float Y, float Z){
    float x = X / REF_X;
    float y = Y / REF_X;
    float z = Z / REF_X;

    if ( x > 0.008856 ) { x = pow( x , .3333333333f ); }
    else { x = ( 7.787 * x ) + ( 16/116.0 ); }
    if ( y > 0.008856 ) { y = pow( y , .3333333333f ); }
    else { y = ( 7.787 * y ) + ( 16/116.0 ); }
    if ( z > 0.008856 ) { z = pow( z , .3333333333f ); }
    else { z = ( 7.787 * z ) + ( 16/116.0 ); }

    Color lab;
    lab.L = ( 116 * y ) - 16;
    lab.a = 500 * ( x - y );
    lab.b = 200 * ( y - z );
    return lab;
}
Color lab2xyz(float l, float a, float b){
    float y = (l + 16) / 116;
    float x = a / 500 + y;
    float z = y - b / 200;

    if ( pow( y , 3 ) > 0.008856 ) { y = pow( y , 3 ); }
    else { y = ( y - 16 / 116 ) / 7.787; }
    if ( pow( x , 3 ) > 0.008856 ) { x = pow( x , 3 ); }
    else { x = ( x - 16 / 116 ) / 7.787; }
    if ( pow( z , 3 ) > 0.008856 ) { z = pow( z , 3 ); }
    else { z = ( z - 16 / 116 ) / 7.787; }

    Color xyz;
    xyz.X = x * REF_X;
    xyz.Y = y * REF_Y;
    xyz.Z = z * REF_Z;
    return xyz;
}
Color xyz2rgb(float X,float Y,float Z){
    //X from 0 to  95.047      (Observer = 2°, Illuminant = D65)
    //Y from 0 to 100.000
    //Z from 0 to 108.883
    X = ofClamp(X, 0, 95.047);

    float x = X * .01;
    float y = Y * .01;
    float z = Z * .01;

    float r = x * 3.2406 + y * -1.5372 + z * -0.4986;
    float g = x * -0.9689 + y * 1.8758 + z * 0.0415;
    float b = x * 0.0557 + y * -0.2040 + z * 1.0570;

    if ( r > 0.0031308 ) { r = 1.055 * pow( r , ( 1 / 2.4f ) ) - 0.055; }
    else { r = 12.92 * r; }
    if ( g > 0.0031308 ) { g = 1.055 * pow( g , ( 1 / 2.4f ) ) - 0.055; }
    else { g = 12.92 * g; }
    if ( b > 0.0031308 ) { b = 1.055 * pow( b , ( 1 / 2.4f ) ) - 0.055; }
    else { b = 12.92 * b; }

    Color rgb;
    rgb.R = round( r * 255 );
    rgb.G = round( g * 255 );
    rgb.B = round( b * 255 );
    return rgb;
}
Color rgb2lab(int R,int G,int B){
    Color xyz = rgb2xyz(R, G, B);
    return xyz2lab(xyz.X, xyz.Y, xyz.Z);
}
Color lab2rgb(int L,int a,int b){
    Color xyz = lab2xyz(L, a, b);
    return xyz2rgb(xyz.X, xyz.Y, xyz.Z);
}

Color getAverage(ofImage img){
    Color avg;
    avg.L = avg.a = avg.b = 0;

    int total = img.width * img.height;
    for(int y = 0 ; y < img.height; y++){
        for(int x = 0 ; x < img.width; x++){
            ofColor c = img.getColor(x, y);
            Color lab = rgb2lab(c.r,c.g,c.b);
            avg.L += lab.L;
            avg.a += lab.a;
            avg.b += lab.b;
        }
    }

    avg.L /= total;
    avg.a /= total;
    avg.b /= total;
    return avg;
}
ofImage images[6];
Color   averages[6];
ofColor averagesRGB[6];

ofImage colorPicker;
ofColor searchClr;

int closestId = -1;

//--------------------------------------------------------------
void testApp::setup(){
    colorPicker.loadImage("colormap.gif");

    images[0].loadImage("red.jpg");
    images[1].loadImage("green.jpg");
    images[2].loadImage("blue.jpg");
    images[3].loadImage("cyan.jpg");
    images[4].loadImage("magenta.jpg");
    images[5].loadImage("yellow.jpg");

    for(int i = 0 ;  i < 6; i++){
        averages[i] = getAverage(images[i]);
        Color avgRGB = lab2rgb(averages[i].L, averages[i].a, averages[i].b);
        averagesRGB[i] = ofColor(avgRGB.R,avgRGB.G,avgRGB.B);
    }

}

//--------------------------------------------------------------
void testApp::update(){
    //pick a colour
    searchClr = colorPicker.getColor(mouseX,mouseY-500);
    //find closest - might want to that on an event
    Color searchLab = rgb2lab(searchClr.r, searchClr.g, searchClr.b);
    float minDist = 10000000;
    for(int i = 0 ; i < 6; i++){
        Color Lab = averages[i];
        float dL = Lab.L - searchLab.L;
        float da = Lab.a - searchLab.a;
        float db = Lab.b - searchLab.b;
        float dist = sqrt(dL*dL + da*da + db*db);
        if(dist < minDist){
            minDist = dist;
            closestId = i;
        }
    }
}

//--------------------------------------------------------------
void testApp::draw(){
    for(int i = 0 ;  i < 6; i++){
        //indexed image
        images[i].draw(images[i].width * i, 0);
        //average colour
        ofPushStyle();
        ofSetColor(averagesRGB[i]);
        ofRect(images[i].width * i, images[i].height, images[i].width, images[i].width);
        ofPopStyle();
    }
    ofPushStyle();
    ofSetColor(searchClr);
    ofRect(200,500,200,200);
    ofPopStyle();
    colorPicker.draw(0,500);
    if(closestId >= 0){
        images[closestId].draw(400, 500);
    }
}

//--------------------------------------------------------------
void testApp::keyPressed(int key){

}

//--------------------------------------------------------------
void testApp::keyReleased(int key){

}

//--------------------------------------------------------------
void testApp::mouseMoved(int x, int y){

}

//--------------------------------------------------------------
void testApp::mouseDragged(int x, int y, int button){

}

//--------------------------------------------------------------
void testApp::mousePressed(int x, int y, int button){

}

//--------------------------------------------------------------
void testApp::mouseReleased(int x, int y, int button){

}

//--------------------------------------------------------------
void testApp::windowResized(int w, int h){

}

//--------------------------------------------------------------
void testApp::gotMessage(ofMessage msg){

}

//--------------------------------------------------------------
void testApp::dragEvent(ofDragInfo dragInfo){ 

} 
```

编码风格并不出色，但这只是为了说明这个想法。当然，您需要先从 url 加载图像，并为数据库中的每个（运行时的向量或其他情况下的向量）索引 L *a b* 中的平均颜色。*上面的代码也可以作为[Xcode 项目使用](http://lifesine.eu/so/LABTest.zip)

# ios - 如何使用 contentOffset 在 UIScrollView 中居中内容

> ID：15583515
> 
> 赞同：24
> 
> 时间：2013-03-23T04:55:43.940
> 
> 标签：ios, objective-c, uiscrollview

这应该是一个非常简单的问题，但我无法获得想要的结果。我水平滚动 UIScrollView 宽度为 320。其内容的宽度为 5000。我试图将内容居中：

```
// 'self' is the UIScrollView
CGFloat newContentOffsetX = (self.width/2) + (self.contentSize.width/2);
self.contentOffset = CGPointMake(newContentOffsetX, 0); 
```

我不明白为什么这不是以内容为中心。你能看出计算有什么问题吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-23T04:57:39.017

我想你想要：

```
CGFloat newContentOffsetX = (self.contentSize.width/2) - (self.bounds.size.width/2); 
```

图表：

```
|------------------------self.contentSize.width------------------------|
                         |-----self.width-----|
|-------- offset --------|
                                    ^ center 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-23T05:02:05.390

使用以下代码：

```
CGFloat newContentOffsetX = (scrollView.contentSize.width - scrollView.frame.size.width) / 2;
scrollView.contentOffset = CGPointMake(newContentOffsetX, 0); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-01-29T12:41:52.767

**斯威夫特 4**

滚动到内容的中心`ScrollView`

```
let centerOffsetX = (scrollView.contentSize.width - scrollView.frame.size.width) / 2
let centerOffsetY = (scrollView.contentSize.height - scrollView.frame.size.height) / 2
let centerPoint = CGPoint(x: centerOffsetX, y: centerOffsetY)
scrollView.setContentOffset(centerPoint, animated: true) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-27T17:08:04.380

我创建了一个带有 IBInspectable 属性的简单 UIScrollView 扩展，以水平和/或垂直居中内容。它仅在滚动视图内容大小小于滚动视图大小时起作用。

这是 Swift 5.2 代码：

```
import UIKit

@IBDesignable class CenteredScrollView: UIScrollView {
    @IBInspectable var verticallyCentered: Bool = false
    @IBInspectable var horizontallyCentered: Bool = false

    override var contentSize: CGSize {
        didSet {
            if contentSize.height <= bounds.height && verticallyCentered {
                centerVertically()
            }

            if contentSize.width <= bounds.width && horizontallyCentered {
                centerHorizontally()
            }
        }
    }

    private func centerVertically() {
        let yContentOffset = (contentSize.height / 2) - (bounds.size.height / 2)
        contentOffset = CGPoint(x: contentOffset.x, y: yContentOffset)
    }

    private func centerHorizontally() {
        let xContentOffset = (contentSize.width / 2) - (bounds.size.width / 2)
        contentOffset = CGPoint(x: xContentOffset, y: contentOffset.y)
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-23T08:13:43.010

不是最好的解决方案，但可能对您有用

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    [self centerScrollViewAnimated:NO];
}

- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(CGFloat)scale {
    [self centerScrollViewAnimated:YES];
}

- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
    *targetContentOffset = [self suggestedCenteredContentOffset];
}

- (CGPoint)suggestedCenteredContentOffset {
    CGSize imageSize = self.pickedImage.size;
    CGSize containerSize = self.zoomingScrollView.bounds.size;
    CGPoint result = self.zoomingScrollView.contentOffset;

    if ( self.zoomingScrollView.zoomScale * imageSize.width < containerSize.width )
        result.x = MIN((self.zoomingScrollView.zoomScale * imageSize.width - containerSize.width)/2, 0);

    if ( self.zoomingScrollView.zoomScale * imageSize.height < containerSize.height )
        result.y = MIN((self.zoomingScrollView.zoomScale * imageSize.height - containerSize.height)/2, 0);

    return result;
}

- (void)centerScrollViewAnimated:(BOOL)animated {
    [self.zoomingScrollView setContentOffset:[self suggestedCenteredContentOffset] animated:animated];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-02T10:03:11.417

斯威夫特 5+

```
@IBDesignable class CenteredScrollView: UIScrollView {

    @IBInspectable var isVerticallyCentered: Bool = false
    @IBInspectable var isHorizontallyCentered: Bool = false

    public func center(vertically: Bool, horizontally:Bool, animated: Bool) {

        guard vertically || horizontally else {
            return
        }

        var offset = contentOffset
        if vertically && contentSize.height <= bounds.height {
            offset.y = (contentSize.height / 2) - (bounds.size.height / 2)
        }

        if horizontally && contentSize.width <= bounds.width {
            offset.x = (contentSize.width / 2) - (bounds.size.width / 2)
        }
        setContentOffset(offset, animated: animated)

    }

    override func layoutSubviews() {
        super.layoutSubviews()
        center(vertically: isVerticallyCentered, horizontally: isHorizontallyCentered, animated: false)
    }

} 
```

# php - 根据距离公式对 SQL 结果排序

> ID：15583520
> 
> 赞同：0
> 
> 时间：2013-03-23T04:56:31.273
> 
> 标签：php, sql, distance, formula

不确定该主题是否恰当地描述了我正在尝试的内容，但情况就是这样。我有一个 x、y 坐标和与之关联的位置的数据库。我想让用户提交带有 x 和 y 坐标的表单数据，并按接近 sqrt((x1-x2)^2 + (y1-y2)^2) 的顺序返回结果。我不确定如何将距离公式应用于要显示的结果集。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:03:16.253

平方根函数是单调递增的，所以如果 sqrt(a) 大于 sqrt(b)，则 a 大于 b。因此，如果 SQRT 在您的 SQL 方言中不可用，您可以跳过它：

```
ORDER BY (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2) 
```

将其添加到 SQL 查询的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:10:06.413

它真的没有那么难。只需将邻近度计算放入 order by 子句中即可。您的 SQL 需要是动态的，以便您可以替换 x 和 y 输入值。我继续并选择了邻近度计算，以便您可以看到排序中使用的值。

选择位置， sqrt((x-{x 输入值})^2 + (y-{y 输入值})^2) 作为
位置的接近度
按 sqrt((x-{x 输入值})^2 + ( y-{y 输入值})^2)

# actionscript-3 - 为影片剪辑制作函数

> ID：15583526
> 
> 赞同：0
> 
> 时间：2013-03-23T04:56:49.450
> 
> 标签：actionscript-3, function, movieclip

我正在尝试创建一个修改我所有`movieclips`.

这是我尝试过的，但它不起作用：

```
for (var i:Number = 0; i<50;i++) {

checkLine(this["line" + i + "_mc"]);

} 
```

我的电影剪辑都在舞台上，实例名称为 line0_mc、line1_mc，直到 line_49mc。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:44:26.010

我认为最好的解决方案是将每个 MovieClip 放在一个数组中以便更好地访问。

# javascript - 如何允许在触摸设备上拖动音频进度条

> ID：15583527
> 
> 赞同：1
> 
> 时间：2013-03-23T04:56:57.177
> 
> 标签：javascript, css, ipad, mediaelement.js

我正在使用 mediaelement.js 提供音频文件。在浏览器中，我可以单击歌曲播放的进度条，然后用鼠标将其拖动到歌曲的不同部分，从该点开始播放。

在 ipad 和 iphone（可能还有其他触摸屏设备）上，我无法单击并拖动栏；当我触摸并按住并拖动时，整个浏览器都会移动。我可以单击进度部分的不同部分来更改歌曲的播放位置，但我喜欢拖动进度条的感觉，并希望在触摸设备上重现这种行为。

有没有办法做到这一点？可能修改触摸的“焦点”？另外，如果有不同的库可以实现这一点，我也没有附加到 mediaelement.js。

# ios - AudioQueue 的 Peak Power Progression 过于渐进

> ID：15583528
> 
> 赞同：3
> 
> 时间：2013-03-23T04:57:00.227
> 
> 标签：ios, objective-c, core-audio, audioqueue

我正在使用 AudioToolBox 库中的标准 Apple [AudioQueue 服务](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)来使用我设备的麦克风。我正在实时跟踪峰值音频电平，这运行良好，只是它没有像预期的那样对音量的*不均匀*变化做出响应。mPeakPower 会在音量突然增加时适当跳高（那里没问题），但它只会逐渐减小：如果我给我的设备一个响亮的拍手然后是静音它会跳得很高，然后立即开始*稳定*减少，直到达到实际的当前音量（此减少最多可能需要 2 秒）。理想情况下，一个响亮的声音然后是静音应该会导致一个尖峰，该尖峰会立即回落到环境音量。我需要快速响应音量的增加和减少。有什么见解吗？我认为这是由于平滑算法而发生的，但是我该如何解决呢？我应该使用不同的库吗？

这是我在 AudioQueueInputCallback 方法中的代码片段。

```
AudioQueueLevelMeterState meters[2];
UInt32 dlen = sizeof(meters);
AudioQueueGetProperty(myQueue,kAudioQueueProperty_CurrentLevelMeterDB,meters,&dlen);
NSNumber *ambientVolume = [NSNumber numberWithFloat:meters[0].mPeakPower]; 
```

谢谢！

# python - 如何在 Python 中从 PDF 文件中提取文本？

> ID：15583535
> 
> 赞同：20
> 
> 时间：2013-03-23T04:57:35.937
> 
> 标签：python, pypdf

如何在 Python 中从 PDF 文件中提取文本？

我尝试了以下方法：

```
import sys
import pyPdf

def convertPdf2String(path):
      content = ""
      pdf = pyPdf.PdfFileReader(file(path, "rb"))
      for i in range(0, pdf.getNumPages()):
          content += pdf.getPage(i).extractText() + " \n"
          content = " ".join(content.replace(u"\xa0", u" ").strip().split())
      return content

f = open('a.txt','w+')

f.write(convertPdf2String(sys.argv[1]).encode("ascii","xmlcharrefreplace"))
f.close() 
```

但结果如下，而不是可读的文本：

> # 728;ˇ^~ ˚ˇˇ!""˘ˇ^˙^˝˛˛˛˛^~^^ ^˘^˛˙^"^˘"^^^#$˙^^^ %&^ ˘˛^~'˙˙% * *_* _ ˝+,-3˙^/0245)6#57+82,55)6#57+,+2,+ /!#!!&˘˘1"%˘20˛˛3^07%4!˘"6 ˛ ^ ˝^ ^˘&/&4"9^ %6ˇ%4%4&5˘2)˘˘˛%:6(

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-23T15:19:17.430

如果您运行的是 linux 或 mac，您可以在代码中使用**ps2ascii**命令：

```
import os

input="someFile.pdf"
output="out.txt"
os.system(("ps2ascii %s %s") %( input , output)) 
```

# android - 通过电子邮件意图传递来自edittext的信息

> ID：15583539
> 
> 赞同：0
> 
> 时间：2013-03-23T04:57:46.313
> 
> 标签：android, email, android-intent, android-edittext

我有两个文本框：一个用于主题，另一个用于实际消息。不幸的是，当我在运行 android 4.2.2 和最新 gmail 应用程序的手机上测试时，我使用的代码没有传递任何信息。

更新方法。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setContentView(R.layout.tipus);
findViewById(R.id.sendemailbutton).setOnClickListener(emailclick);
findViewById(R.id.cancelbtn).setOnClickListener(myclick);
subjectline = (EditText) findViewById(R.layout.tipus);
emailcontent = (EditText) findViewById(R.layout.tipus);

}

public final Button.OnClickListener emailclick = new Button.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);  

        String aEmailList[] = { oliuremail, vikemail };   
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);  //supposed to pass info of the emails to the email app
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subjectline.getText().toString());  //not taking stuff from an edittext, only things in quotes. 
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailcontent.getText().toString());  //won't accept anything from an edittext.
        emailIntent.setType("plain/text");
        startActivity(Intent.createChooser(emailIntent, "Send Email Using...")); 
    }

}; 
```

tipus.xml（更新）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/messagetitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/emailmessage"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="46dp"
    android:text="Message:" />

<EditText
    android:id="@+id/emailmessage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="122dp"
    android:ems="10"
    android:hint="Write your message here."
    android:inputType="textMultiLine" />

<Button
    android:id="@+id/cancelbtn"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/arrowrightblack" />

<Button
    android:id="@+id/sendemailbutton"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Send" />

<EditText
    android:id="@+id/subjectline"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/subjectdenoter"
    android:layout_alignBottom="@+id/subjectdenoter"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:hint="Please Add a Subject." />

<TextView
    android:id="@+id/subjecttitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView3"
    android:layout_alignRight="@+id/textView3"
    android:layout_marginBottom="82dp"
    android:text="Subject:" /> 
```

当我使用此代码时，信息会传递到电子邮件应用程序。但是，我有两个文本框，用户将在其中输入主题，然后输入电子邮件的实际文本。我需要从两个文本框中传递的信息发送到电子邮件应用程序。我查看了 stackoverflow 和 tutsplus，他们有一些信息，但是那些谈论从文本框中传递数据的信息不是很丰富。提前致谢。

编辑：

我终于找到了答案。您必须创建一个私有字符串，例如：

```
private String getSubjectContent() {
    String text = "";

    text += yourtexteditname.getText().toString() + "\n";

    return text;
} 
```

注意：您可以在类中创建尽可能多的这些方法。在每种方法中，只需将“yourtexteditname”替换为 textEdit 的名称即可。如果您想从多个 textEdits 获取信息并将它们放在电子邮件中的一个位置（主题行、消息正文等），您也可以将多个 textEdits 放入一个方法中

然后，您所要做的就是添加普通代码来启动意图。像这样：

```
public final Button.OnClickListener emailclick = new Button.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        variablename = (EditText) findViewById(R.id.textviewname); //defining the textedit you want to get info from. 
        variablename = (EditText) findViewById(R.id.othertextviewname); //defining the textEdit you want to get info from.
        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("message/rfc822"); //specifies message for email app.
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, getEmailContent()); //adds the actual content of the email by calling the method previously defined
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, getSubjectContent()); //adds the subject by calling the method previously defined.
        startActivity(Intent.createChooser(emailIntent, "Title of the dialog chooser"));

    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:00:07.510

您可以通过使用 String 变量来使用它。像..

```
String subjectdata = edittext.getText().toString();
String sharedata = edittext1.getText().toString();

Intent email = new Intent(Intent.ACTION_SEND);
email.putExtra(Intent.EXTRA_SUBJECT, subjectdata);
email.putExtra(Intent.EXTRA_EMAIL, new String[]{"abc@gmail.com"});
email.putExtra(Intent.EXTRA_TEXT, shareddata);
email.setType("message/rfc822");
startActivity(Intent.createChooser(email, "Send Mail :")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:33:38.743

因为您要发送给多个电子邮件收件人，我相信您需要使用`Intent.ACTION_SEND_MULTIPLE`而不是`Intent.ACTION_SEND`：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE); 
```

一些实现也更喜欢`Intent.ACTION_SENDTO`.

（可选）您可能想使用这个：

```
emailIntent.setType("message/rfc822"); 
```

而不是这个：

```
emailIntent.setType("plain/text"); 
```

`EditText`最后，从这样的字段中检索用户的文本条目：

```
String <body-or-subject-text> = editText.getText().toString(); 
```

# php - 如何从控制器调用视图文件（cakePHP）

> ID：15583541
> 
> 赞同：2
> 
> 时间：2013-03-23T04:58:13.737
> 
> 标签：php, cakephp, cakephp-2.1

我从几天开始学习 cakephp ......所以请帮忙一点，谢谢。

我做了一个控制器——

```
class PostController extends AppController {
var $name='Posts';

function index(){
    $posts=$this->Post->find('all');

    $this->set(compact('posts'));

} 
```

视图中有带有 index.ctp 文件的 post 文件夹。我想问一下它从哪里获得“CakePHP：快速开发php框架”以及从哪里获取内容。我从控制器发送这些数据，所以它只打印`var_dump($posts);`......在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:10:23.783

cake php 在文件夹“app/view/Layout”中有默认布局文件.. 此文件夹中的文件名 default.ctp 将被视为默认..

如果你在布局中打开 default.ctp 你会看到类似

```
<h1><?php echo $this->Html->link($cakeDescription, 'http://cakephp.org'); ?></h1> 
```

和其他定义的链接..您可以评论并检查您看到的更改。

这是视图从哪里得到“”CakePHP：快速开发的php框架“

这条线

```
<?php echo $this->fetch('content'); ?> 
```

在布局中从控制器中获取数据以显示在我们在控制器中使用 $this->set() 设置的视图中

如果您想更改布局，请在布局文件夹中创建自己的布局并在控制器中使用，例如

```
class PostController extends AppController {
var $name='Posts';

function index(){
$posts=$this->Post->find('all');

$this->set(compact('posts'));
$this->layout = false; // ot you can set ypur own file like 'xyz' for 'xyz.ctp'
} 
```

为控制器使用中的每个操作设置布局

```
 function beforeFilter() {
    parent::beforeFilter();
    $this->layout = 'layout';
 } 
```

要了解有关布局的更多信息，请参阅[http://book.cakephp.org/2.0/en/views.html#layouts](http://book.cakephp.org/2.0/en/views.html#layouts)

希望你得到我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:01:31.400

**《CakePHP：快速开发的php框架》**

对于上面看里面的`views -> layout -> default.ctp`文件。

还要更改默认值`cakephp routing`，以便在 URL 中有帖子时可以看到帖子索引操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T08:44:51.850

从控制器调用布局的最佳方法是

```
$this->layout = 'Your layout page name'; 
```

# php - 如何更新此 PHP 验证案例以支持多维数组？

> ID：15583542
> 
> 赞同：0
> 
> 时间：2013-03-23T04:58:43.997
> 
> 标签：php, validation, multidimensional-array

我正在使用仅支持一维数组的 PHP 验证脚本。

如何修改此 switch case 以使多维数组起作用？

目前，它只是将一个选择字段显示为空，而实际上它有一个选定的值。

**开关盒：**

```
case 'in-array' :
    if (!(in_array($value, $rule->criteria))) {
        $this->_errors[$rule->fieldname] = $rule->message;
        return;
    }
    break; 
```

**调用要求对 State 字段进行验证：**

```
$validator->addRule('state', 'Please select a state', 'in-array', $states);

$validator->addEntries($_POST);
$validator->validate();

$entries = $validator->getEntries();

foreach ($entries as $key => $value) {
  ${$key} = $value;
} 
```

**状态数组：**

```
$states = array('AL' => 'Alabama',
                'AK' => 'Alaska',
                'AZ' => 'Arizona',
                'AR' => 'Arkansas',
                'CA' => 'California',
                'CO' => 'Colorado',
                'CT' => 'Connecticut',
                'DE' => 'Delaware',
                'DC' => 'District Of Columbia',
                'FL' => 'Florida',
                'GA' => 'Georgia',
                'HI' => 'Hawaii',
                'ID' => 'Idaho'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:12:30.107

看起来你`$value`是数组键，而不是数组值。尝试添加[`array_key_exists`](http://www.php.net/manual/en/function.array-key-exists.php)到您的`case 'in-array'`if -

```
if (!(in_array($value, $rule->criteria)) && !(array_key_exists($value, $rule->criteria))) 
```

# scala - Scala REPL 中的类型信息

> ID：15583551
> 
> 赞同：1
> 
> 时间：2013-03-23T04:59:41.580
> 
> 标签：scala, f#

如果我使用 F# 解释器，我可以定义一个简单的函数，如下所示：

```
> // Function to check if x is an integer multiple of y
> let multipleOf x y = (x % y = 0);;

val multipleOf : x:int -> y:int -> bool 
```

如果我知道 F# 解释器会话中存在一个函数，但我不确定它的精确类型，我可以通过键入函数的名称让解释器给我它的类型：

```
> // I can't remember the type of the function multipleOf!
> multipleOf;;

val it : (int -> int -> bool) = <fun:it@12-1> 
```

显然，这告诉我该函数`multipleOf`是 type `int->int->bool`。在 F# 解释器中工作时，我发现这非常有用，可以作为记忆记忆的工具。

但是，我似乎在 Scala 的 REPL 中找不到类似的功能。当然，我可以很容易地在 Scala 中定义一个等效函数：

```
def multipleOf(x: Int, y: Int) = x % y == 0 
```

但是，如果我在 Scala REPL 会话中进行了十分钟并且不记得函数的类型，则键入`multipleOf`不会提供有关类型的信息（实际上，它会给出错误）。同样，`:type multipleOf`告诉我没有任何用处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:26:29.813

```
scala> val f = (i: Int, j: Int) => i % j == 0
f: (Int, Int) => Boolean = <function2>

scala> f
res2: (Int, Int) => Boolean = <function2>

scala> def multipleOf(x: Int, y: Int) = x % y == 0
multipleOf: (x: Int, y: Int)Boolean

scala> :type multipleOf(_, _)
(Int, Int) => Boolean 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:59:41.580

呸！这是在您即将向 StackOverflow 提交问题时出现问题解决方案的情况之一。如果我自己在这里回答，希望有人会发现它有用。

事实证明，只要您告诉 Scala 将函数评估为部分评估的函数，Scala 就会在为函数提供类型信息方面发挥作用！换句话说，以下方法可以解决问题：

```
scala> multipleOf _
res0: (Int, Int) => Boolean = <function2> 
```

换句话说，只有当您将函数重新评估为自身的部分评估版本时，REPL 才会为您提供有关函数类型的信息。这似乎远不如最优。;-)

也许有人可以在评论中提到为什么 Scala 以这种方式处理事情是明​​智的？

# javascript - 在 JavaScript 中对字符串使用 split() 的替代方法是什么？

> ID：15583557
> 
> 赞同：0
> 
> 时间：2013-03-23T05:00:21.223
> 
> 标签：javascript, html, meta-tags

我在元标记中有内容。

```
<meta property="video" content="initialver=1.0" /> 
```

我使用`getAttribute("content")`. 然后我有一个字符串：`initialver=1.0`. 我需要得到“1.0”。我怎么能不使用来做到这一点`split()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:07:39.653

您可以使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)和[匹配](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)来做到这一点

```
var x = "initialver=1.0".match(/\d+$|\d+\.\d+$/)[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:12:15.530

```
var str = "initialver=1.0";
var result = str.substring(11); 
```

# html - 为什么 38px x 38px 比画布矩形 38 x 38 大，尽管尺寸相同 >

> ID：15583558
> 
> 赞同：6
> 
> 时间：2013-03-23T05:00:21.657
> 
> 标签：html, canvas, html5-canvas, pixel

我正在尝试绘制一个 38 像素宽和 38 像素长的矩形。

```
<div id="dpi1" style="height: 38px ; width: 38px;background-color: red"></div> 
```

这按预期工作。但是，当我尝试使用此代码在画布上绘制矩形时

```
var cxt=canvas.getContext("2d");
     cxt.beginPath();
     cxt.rect(0, 0, 38, 38);
     cxt.fillStyle = 'yellow';
     cxt.fill();

     cxt.stroke(); 
```

我得到一个较小的矩形。为什么会这样？这是否意味着画布（x，y 坐标）中的网格小于 1 像素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T05:10:33.230

你有没有`canvas`明确设置你的宽度和高度？如果没有，您可能会在浏览器上获得奇怪的默认缩放设置。IE：

```
<canvas width="640" height="480"></canvas> 
```

此外，为了确保您获得的是逐像素画布，请仅将`width`and设置`height`为属性，而不是在 CSS 中。这可能会导致您的画布在一个系统中绘制，但在另一个系统中显示。即，以下将使画布显示为其一半大小：

```
<canvas width="640" height="480" style="width: 320px; height: 240px"></canvas> 
```

相关：[使用 CSS 时画布被拉伸，但“宽度”/“高度”属性正常](https://stackoverflow.com/q/2588181/586086)

# c - 如何以编程方式获取 OS X 上给定 PID 的打开文件描述符列表？

> ID：15583563
> 
> 赞同：6
> 
> 时间：2013-03-23T05:01:20.117
> 
> 标签：c, macos, pid, file-descriptor

我所看到的一切都说要使用`lsof -p`，但我正在寻找不需要 fork/exec 的东西。

例如在 Linux 上可以简单地走路`/proc/{pid}/fd`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T06:11:37.853

您可以[使用`proc_pidinfo`](http://blog.palominolabs.com/2012/06/19/getting-the-files-being-used-by-a-process-on-mac-os-x/)`PROC_PIDLISTFDS`选项来枚举给定进程使用的文件。然后，您可以依次`proc_pidfdinfo`在每个文件上使用`PROC_PIDFDVNODEPATHINFO`获取其路径的选项。

# java - Java：使用类作为哈希图中的值

> ID：15583567
> 
> 赞同：1
> 
> 时间：2013-03-23T05:02:06.637
> 
> 标签：java, class, hashmap, syntax-error

我正在尝试使用自定义类作为`Map<String, Class<?>>`. 以下是代码的相关部分：

以下是 Map 的声明和初始化`main()`：

```
public static Map<String, Class<?>> mapQuery2ResponseType = new HashMap<String, Class<?>>();
static {
    mapQuery2ResponseType.put("string1", CustomClass1.class);
    mapQuery2ResponseType.put("string2", CustomClass2.class);
    mapQuery2ResponseType.put("string3", CustomClass3.class);
} 
```

现在我正在使用此映射将对象类型转换为这些类之一：（假设所有类都包含一个`getName()`返回 a的方法`String`）

```
String name = (
                  (
                       mapQuery2ResponseType.get("string1")
                  )obj1
              ).getName(); 
```

其中，`obj1`是泛型类型`T`，

但它不允许我这样做并说：`Syntax error on token "obj1", delete this token`。

请帮助我了解我在哪里做错了？

`Edit:`

当我使用以下代码时，它完美地给了我预期的结果，

```
String name = (
                  (
                       CustomClass1
                  )obj1
              ).getName(); 
```

并且与返回的`obj1` **类型相同**`mapQuery2ResponseType.put("string1", CustomClass1.class);`。

在这里我可以看到一件事......如果我直接使用 use 它，我将它用作`"CustomClass1"`，而如果我从 map by 获取它`mapQuery2ResponseType.get("string1")`，它会返回`"CustomClass1.class"`。我不确定这两种方法是否有区别？如果有，它是什么？

所以实际上不会有任何转换，只是我将它用于**大量类**，因此尝试使用通用方法。

`Edit2:`

正如这个问题中给出的：[Java：“CustomClass1”和“CustomClass1.class”之间的区别？](https://stackoverflow.com/questions/15583978/java-difference-between-customclass1-and-customclass1-class?noredirect=1#comment22094692_15583978)，我认为，反射是这项任务的唯一解决方案。但是任何人都可以解释如何使用反射来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T05:08:50.317

简而言之，这是语法无效的代码。并非巧合的是，编译器会***准确地****告诉您问题所在。*

 **删除`ob1`. 我不知道它是什么，或者你认为它应该做什么，但它在那里没有任何意义。为了解释这一点，我将稍微调整一下您的代码：

原代码：

```
String name = ((mapQuery2ResponseType.get("string1"))obj1).getName(); 
```

现在有一个局部变量：

```
Class<?> clazz = mapQuery2ResponseType.get("string1");
String name = ((clazz) obj1).getName(); 
```

好的，现在我想我明白了：您正在尝试使用`Class`实例来投射对象。你不能这样做[——Java 的语法根本不允许这样做。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16)以下是演员表通常的样子：

```
Object foo = "bar";
String baz = (String) foo; 
```

请注意强制转换表达式的标记是`String`，而不是`String.class`。

[`Class#cast()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)可能看起来是一个有用的替代方案，但这在这里没有任何用处，因为你只有`Class<?>`，而没有`Class<T>`。

忘记`Map`. 我建议您**完全重构您的代码，以便`getName()`在一个接口上定义该方法，该接口`obj1`和所有类似**的对象都实现（假设各种对象具有异构类型）。

例如：

```
interface MyCommonInterface {
    String getName();
}

class MyClass implements MyCommonInterface {
    public String getName() {
        // snip
    }
}

// ...
MyClass obj1 = /* ... */
String name = obj1.getName(); 
```

没有强制转换，没有花哨`Map`的 s 或`Class`实例。正确、简单地使用语言的正确部分。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-23T05:17:17.997

我认为最好使用[JAVA Reflection](http://tutorials.jenkov.com/java-reflection/index.html)来做到这一点。

Typecast 需要在要转换的对象之前使用 Type 语法，所以你可以这样做 (CustomClass1.class)obj1，但你不能像 (mapQuery2ResponseType.get("string1"))obj1 那样做，因为编译器不能接受运行时环境中的演员表。

编译代码时，您的映射值被视为无效类型的值，因此您不能像您展示的那样进行强制转换。**

# php - 将下拉菜单带到另一个页面

> ID：15583573
> 
> 赞同：0
> 
> 时间：2013-03-23T05:03:06.707
> 
> 标签：php, forms, drop-down-menu

在加载添加运算符的表单之前，我必须使用 php 文件 addoperator.php 调用 Web 服务，该文件返回给我一个包含组织、位置、建筑值的 json，我已将该 json 值转换为下拉列表，现在这些下拉菜单必须在添加操作员表单中的字段组织、位置和建筑物下。

她是 addoperator.php 的代码

```
<?php
session_start();
$url='webservice url';
$ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($useridofuser));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
    $response=  curl_exec($ch);
    echo('\n'."Server response : \n \n".$response);
    curl_close($ch);
    //parsing the json response from server
    $jsonde="$response";
$org = array();
$loc = array();
$bui = array();
$items = json_decode($response);
foreach( $items as $each ){
$loc[]=$each->location[0]->name;
$bui[]=$each->location[0]->building[0];
$org[]=$each->name;
}
?>
<select name="category_id">
<option value=""></option>
<?php
foreach($org as $key=>$val)
{?>
<option value="<?php echo $key; ?>"><?php echo $val; ?></option>
<?php
}
?>
</select>
<select name="category_id">
<option value=""></option>
<?php
foreach($loc as $key=>$val)
{?>
<option value="<?php echo $key; ?>"><?php echo $val; ?></option>
<?php
}
?>
</select>
<select name="category_id">
<option value=""></option>
<?php
foreach($bui as $key=>$val)
{?>
 <option value="<?php echo $key; ?>"><?php echo $val; ?></option>
 <?php
}
?>
</select> 
```

addoperatorui.php 的用户界面是 addoperatorui.php（如何将 addoperatorui.php 的下拉菜单带到 addoperatorui.php

```
<h3>ADD ROUTER </h3>
    </div>
        <form method="post" action="login.php" >
         <table border="0" >
         <tr><td>Username</td>
          <td><input type="text" name="userid"></td></tr>
                <tr><td>Password</td>
                    <td><input name="password" type="password"></td></tr>
                <tr><td>Confirm Password</td>
                    <td><input name="password1" type="password"></td></tr>
                <tr><td>Email</td>
                    <td><input name="email" type="email"></td></tr>
                <tr><td>Organisation Name</td>
                    <td><input name="orgname" type="text"></td></tr>
                <tr><td>Location</td>
                    <td><input name="location" type="text"></td></tr>
                <tr><td>Building</td>
                    <td><input name="building" type="text"></td></tr>
                <tr><td>Department</td>
                    <td><input name="department" type="text"></td></tr>
<?php
$oneYearOn = date('Y-m-d',strtotime(date("Y-m-d", mktime()) . " + 7300 day"));
//echo $oneYearOn;
$oneYearOn1=date('Y-m-d',strtotime(date("Y-m-d", mktime()) . " + 40day"));
//echo $oneYearOn1;
?>
  <tr><td>Sub Category</td>
  <td>
  <select id="Ultra" onchange="run()">  <!--Call run() function-->
 <option value="0">Select</option>
 <option value="<?=$oneYearOn?>">Employee</option>
 <option value="<?=$oneYearOn1?>">Temporary</option>
 </select>  
 </td>
</tr> <tr><td>First Name</td>
                    <td><input name="firstname" type="text"></td></tr>
                <tr><td>Last Name</td>
                    <td><input name="lastname" type="text"></td></tr>
                <tr><td>Land Phone</td>
                    <td><input name="landphone" type="number"></td></tr>
                <tr><td>Mobile</td>
                    <td><input name="mobile" type="number"></td></tr>
                <tr><td>Expiry date</td>
                    <?php
                    ?>
 <td><input type="text" id="srt" placeholder="get value on option select"><br></td></tr>
                <tr><td>Opcode</td>
                    <td><input name="opcode" type="text"></td></tr>
                <tr><td>Expiry date</td>
                    <td><input name="expirydate" type="date"></td></tr>
                <tr><td>Image</label></td>
                      <td><input type="file" name="image"></td></tr>

                <tr><td><input type="submit" value="Submit"/></td></tr>
            </table>
        </form> 
```

# xml - 什么是 DOCTYPE ex SYSTEM "ex.dtd"

> ID：15583574
> 
> 赞同：0
> 
> 时间：2013-03-23T05:03:08.220
> 
> 标签：xml, doctype

因此，在阅读[DOM 2 级规范时发现](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-412266927)我遇到了以下代码

```
<!DOCTYPE ex SYSTEM "ex.dtd" [
  <!ENTITY foo "foo">
  <!ENTITY bar "bar">
  <!ENTITY bar "bar2">
  <!ENTITY % baz "baz">
]>
<ex/> 
```

虽然我理解为什么在将其粘贴到 html 时它会如此损坏，但为什么它仍然显示`]>`但解析出`<ex/>`html 中的结束标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:37:02.533

它根本不是 HTML。这是一段相当简单的通用 XML。形式上，“ex.dtd”是指应该包含文档类型定义 (DTD) 的外部资源（例如另一个文件）。

当您将通用 XML 扔给作为 HTML 服务的浏览器时（例如，在 HTTP 标头中指定 Content-Type: text/html），可能会发生有趣的事情。浏览器尝试将其解析为 HTML。

特别是，浏览器不读取 DTD，也不通过正式规范解析文档类型声明（DOCTYPE 声明）——它们只识别一组有限的特定文档类型字符串。他们不认识 [...] 事物，它是一个包含 DTD 的“内部子集”的 XML（和 SGML）构造，即一种通过附加声明（如此处的实体声明）来扩充外部 DTD 的方法。当他们看到“<”时，他们希望 doctype 字符串结束 在第一个 ENTITY 声明中，忽略这些声明，然后将“]>”视为字符数据。

# facebook - 基本的facebook图返回错误

> ID：15583578
> 
> 赞同：1
> 
> 时间：2013-03-23T05:03:17.970
> 
> 标签：facebook, facebook-graph-api

好的，这不完全是编程或编码问题，但我需要在进入代码之前先对其进行排序。

因此，为了获取提要，我需要获取 page_id 但在访问 [http://graph.facebook.com/dantruat时](http://graph.facebook.com/dantruat)

对于此页面[https://www.facebook.com/dantruat](https://www.facebook.com/dantruat)它返回错误

但对于其他页面，例如[http://graph.facebook.com/notebookspec/](http://graph.facebook.com/notebookspec/) ( [https://www.facebook.com/notebookspec](https://www.facebook.com/notebookspec) ) 它运作良好。

**那么这是否意味着页面所有者可以为他的页面禁用图表或提要？
我应该怎么做才能从那些禁用（如果所有者可以）页面获取提要。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:20:43.817

该错误可能是因为页面名称是泰语而不是英语。您应该向 Facebook 报告错误，看看他们是否可以帮助您。

# java - 如何从连接 mysql 中的两个表中选择特定范围的值？

> ID：15583580
> 
> 赞同：0
> 
> 时间：2013-03-23T05:03:28.720
> 
> 标签：java, mysql, sqlanywhere

我有两个表，我必须根据查询从两个表中选择值

我有两个表`tab1,tab2`，每个表都有相同的列`name,age,job,gender`。在`tab 2`我有额外的专栏`place`

我必须从性别为男性的 tab1 和 tab2 中选择所有值

怎么做？

```
SELECT tab1.name,tab1.gender,tab1.age,tab2.place FROM tab1 INNER JOIN tab2 ON tab1.gender=mhdetail.gender where gender='male'; 
```

它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:13:21.527

您需要更具体地了解`JOIN`条件。如果您在两个表中都没有 id，但是姓名、性别、年龄的组合是唯一的，那么您可以这样做

```
SELECT t1.name,
       t1.gender,
       t1.age,
       t2.place 
  FROM tab1 t1 LEFT JOIN 
       tab2 t2 ON t1.gender = t2.gender AND
                  t1.name = t2.name AND
                  t1.age = t2.age    
 WHERE t1.gender='male'; 
```

这是**[SQLFiddle](http://sqlfiddle.com/#!2/e2839/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:08:20.703

你不是在寻找加盟。你想要一个`Union`：

```
SELECT *
FROM MyTable1
WHERE Gender = 'Male'

UNION -- Or 'UNION ALL' if you want duplicates.

SELECT *
FROM MyTable2
WHERE Gender = 'Male' 
```

如果您有 2 个表，并且想要从 2 个表中获取信息，则将使用连接，但只有一个表将包含性别：

```
SELECT *
FROM   MyTable1
JOIN   MyTable2 ON MyTable1.ID = MyTable1.ID
WHERE  MyTable1.Gender = 'Male' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:11:52.440

您的查询将导致许多重复的行。因为它会变成多对多的关系。如果这两个表通过主键和外键关系等任何方式相关，则使用这些键连接。否则使用上述答案中发布的联合。

# actionscript-3 - 如何在舞台的最左侧或最右侧生成 Enemy 并让他们移动到中心？

> ID：15583584
> 
> 赞同：0
> 
> 时间：2013-03-23T05:05:04.120
> 
> 标签：actionscript-3, flash, actionscript, game-development

首先我得到这个错误

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
    at flash.display::DisplayObjectContainer/removeChild()
    at Game_fla::MainTimeline/testCollisions()[Game_fla.MainTimeline::frame1:205] 
```

这是我的代码

```
 // ******* IMPORTS *****
import flash.events.MouseEvent;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.events.MouseEvent;
import flash.display.MovieClip;
import flash.events.KeyboardEvent;

//*****VARIABLES****

var leftPressed:Boolean = false;
var rightPressed:Boolean = false;
var upPressed:Boolean = false;
var shootDown:Boolean = false;

var ySpeed:int = 0;
var xSpeed:int = 0;

var scrollX:int = 0;
var scrollY:int = 0;

var speedConstant:int = 5;

var friction:Number = 0.6;

var level:Number = 1;

var bullets:Array = new Array();
var container_mc:MovieClip; 
var enemies:Array;
var tempEnemy:MovieClip;

// BUTTON EVENTS EITHER CLICKED OR NOT

left_btn.addEventListener(MouseEvent.MOUSE_DOWN, moveLeft);
right_btn.addEventListener(MouseEvent.MOUSE_DOWN, moveRight);
up_btn.addEventListener(MouseEvent.MOUSE_DOWN, moveUp);
shoot_btn.addEventListener(MouseEvent.MOUSE_DOWN, shootPressed);

left_btn.addEventListener(MouseEvent.MOUSE_UP, leftUp);
right_btn.addEventListener(MouseEvent.MOUSE_UP, rightUp);
up_btn.addEventListener(MouseEvent.MOUSE_UP, upUp);

stage.addEventListener(Event.ENTER_FRAME, makeEnemies);

player.gotoAndStop('still');

stage.addEventListener(Event.ENTER_FRAME,onenter);

function onenter(e:Event):void{
    if (rightPressed == true && leftPressed == false){
        player.x += 8;
        player.scaleX = 1;
        player.gotoAndStop("walking");
        cloud.x -= 8;

    } else if (leftPressed == true && rightPressed == false){
        player.x -= 8;
        player.scaleX = -1;
        player.gotoAndStop('walking');
        cloud.x += 8;

   } else if(upPressed == true && leftPressed == false && rightPressed == false){

       }
        else{  
        rightPressed = false;
        leftPressed = false;
        player.gotoAndStop('still')}

}
// **** MOVEMENT CONTROLS *********

function shootPressed(e:MouseEvent):void{
    shootDown = true;
    if(shootDown == true){
        fireBullet();
        }

    }

function fireBullet():void
{
    var playerDirection:String;
    if(player.scaleX < 0){
        playerDirection = "left";
    } else if(player.scaleX > 0){
        playerDirection = "right";
    }
    var bullet:Bullet = new Bullet(player.x, player.y, playerDirection);
    //bullets = new Array();
    bullet.y = player.y + 8;
    stage.addChild(bullet);
    bullets.push(bullet);
    trace(bullets);

}

// BUTTON FUNCTIONS

function moveLeft(e:MouseEvent):void
{
    if(MouseEvent.MOUSE_DOWN){
    leftPressed = true;
    }else if (MouseEvent.MOUSE_UP) {
        leftPressed = false;
        }

}
function moveRight(e:MouseEvent):void
{
    if (MouseEvent.MOUSE_DOWN){
    rightPressed = true;
    }else if (MouseEvent.MOUSE_UP){
        rightPressed = false;
        }

}
function moveUp(e:MouseEvent):void
{
    if(MouseEvent.MOUSE_DOWN){
        upPressed = true;
        } else if (MouseEvent.MOUSE_UP) {
            upPressed = false;
            }

}

function leftUp(e:MouseEvent):void
{
    leftPressed = false;
}
function rightUp(e:MouseEvent):void
{
    rightPressed = false;
}
function upUp(e:MouseEvent):void
{
    upPressed = false;
}

enemies = new Array();

//Call this function for how many enemies you want to make...
function makeEnemies(e:Event):void
{
    var chance:Number = Math.floor(Math.random() * 60);
if (chance <= 2){

    //Make sure a Library item linkage is set to Enemy...
    tempEnemy = new enemy();
    tempEnemy.speed = 80;
    tempEnemy.x = Math.round(Math.random() * stage.stageWidth) * -10;
    addChild(tempEnemy);
    enemies.push(tempEnemy);
    moveEnemies();
    }
}

function moveEnemies():void
{
    var tempEnemy:MovieClip;
    for (var i:int =enemies.length-1; i>=0; i--)
    {
        tempEnemy = enemies[i];
        tempEnemy.x += tempEnemy.speed;
        tempEnemy.y = 285;
    }
}

stage.addEventListener(Event.ENTER_FRAME, testCollisions);

//Check for collisions between an enemies array and a Lasers array
function testCollisions(e:Event):void
{

    var tempEnemy:MovieClip;
    var tempLaser:MovieClip;

    for (var i:int=enemies.length-1; i >= 0; i--)
    {
        tempEnemy = enemies[i];
        for (var j:int=bullets.length-1; j>=0; j--)
        {
            tempLaser = bullets[j];
            if (tempLaser.hitTestObject(tempEnemy))
            {
                removeChild(tempEnemy);
                removeChild(tempLaser);
                trace("BULLET HIT");
                stage.addEventListener(Event.ENTER_FRAME, testCollisions);

            } 
        }
    }
} 
```

`removeChild`我知道每当我在函数中时我都需要引用父级，`testCollision`但我不知道在哪里。

此外，我希望僵尸从舞台中生成，并使用我拥有的代码以平稳的速度向中心移动，它们似乎只是在舞台的后方并且总是在舞台的左侧生成。所以我需要将它们从舞台上生成并让它们移动到中心并改变它们的 ScaleX 位置以改变它们的方向，但我不知道该怎么做请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:21:50.373

`removeChild(tempLaser)`我认为您可以通过更改来修复您列出的错误，`stage.removeChild(tempLaser)`因为该阶段是您添加项目符号的位置，因此您需要从中删除它们。

我会给你一个关于僵尸运动的提示，但你可能想找一个编程论坛/朋友/教授来帮助解决像这样的一般代码设计问题。在`moveEnemies`中，您需要决定僵尸应该向左/向右移动（基于它们的 x 位置是否大于或小于玩家的位置），以及它们是否应该向上/向下移动（基于它们的 y 位置是更大还是小于玩家的）。

例如，如果他们的 x 位置大于玩家的，你会做`tempEnemy.x -= tempEnemy.speed`，如果更小，你会做`tempEnemy.x += tempEnemy.speed`。但正如我所说，这个网站并不是真正为这些类型的设计问题而设计的。

# php - PHP，SESSION 数组未正确更新

> ID：15583595
> 
> 赞同：0
> 
> 时间：2013-03-23T05:07:27.597
> 
> 标签：php, session, get

`shoppingcart.php`好的，我在尝试编写这段代码时遇到了很大的困难。我将尝试将其分解，以便于理解：

*   首先我用来从一个单独的 文件`$_GET`中获取一个和数量。`itemID``store.php`
*   我像这样初始化一个`SESSION`数组：`$_SESSION['cart'] = array();`
*   我检查数量`itemID`是否有效，如果有效，我将它们添加到会话数组中。
*   我在表格中显示会话数组中的所有内容。

我有两个问题。

**首先，**如果我返回并选择其他项目，会话数组不会保存旧项目。**

**其次，**如果我直接`cart.php`查看文件，`"view my cart"`它会说那里什么都没有。如果我填写表格`store.php`并点击提交，它只会显示一些内容。然后它只显示一件事。

这是**[代码](https://gist.github.com/anonymous/5226210)**（**cart.php 和 store.php**）：

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:19:23.323

*我想调查一下，可能会有所帮助：*

```
$product_id = $_GET['id']; //the product id from the URL
$action = $_GET['action']; //the action from the URL

//if there is an product_id and that product_id doesn't exist display an error message
if($product_id && !productExists($product_id)) {
    die("Error. Product Doesn't Exist");
}

switch($action) { //decide what to do

    case "add":
        $_SESSION['cart'][$product_id]++; //add one to the quantity of the product with id $product_id
    break;

    case "remove":
        $_SESSION['cart'][$product_id]--; //remove one from the quantity of the product with id $product_id
        if($_SESSION['cart'][$product_id] == 0) unset($_SESSION['cart'][$product_id]); //if the quantity is zero, remove it completely (using the 'unset' function) - otherwise is will show zero, then -1, -2 etc when the user keeps removing items.
    break;

    case "empty":
        unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart.
    break;

}

?> 
```

从[这里](http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:19:37.557

您的问题的可能答案

首先：要保留所有值，请使用 $_SESSION['cart'][] 而不是 $_SESSION['cart'] ；使其成为多维的，否则它将覆盖您的值

第二：cart.php 将如何显示商品？您正在初始化 $_SESSION['cart'] = array(); 在页面的开头..它正在清空你的旧值..如果你直接来到 cart.php

希望对你有帮助

# javascript - 删除 slides.js 中的停止按钮？

> ID：15583601
> 
> 赞同：2
> 
> 时间：2013-03-23T05:08:19.390
> 
> 标签：javascript, jquery, slideshow

slides.js 几乎没有文档。我已将其设置为自动更改幻灯片，并隐藏上一个/下一个按钮。有没有办法隐藏“停止/播放”按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-10T19:03:54.237

```
$(function () {
    $("#slides").slidesjs({
        play: {
            active: false, /* this hides the stop/play button */
            auto: true,
            interval: 5000,
            swap: true
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:18:17.347

使用 css 的 display none 属性

例如，如果您的播放按钮类`".play"`然后放入 css

```
.play
{
 display:none;
} 
```

# c++ - 未定义模板的隐式实例化

> ID：15583604
> 
> 赞同：1
> 
> 时间：2013-03-23T05:08:27.723
> 
> 标签：c++, templates

这是我正在尝试编写的模板（队列）：

```
#include <iostream>

using namespace std;

template <typename T>
class Queue
{
    friend ostream& operator<< (ostream &, const Queue<T> & );
private:
    template<class> class Node;
    Node<T> *front;
    Node<T> *back;
public:
    Queue() : front(0), back(0) {}
    ~Queue();
    bool Empty()
    {
        return front == 0;
    }
    void Push(const T& NewEl)
    {
        Node<T&> *El = new Node<T> (NewEl);
        if (Empty())
            front=back=El;
        else
        {
            back-> next = El;
            back = El;
        }
    }
    void Pop()
    {
        if (Empty())
            cout << "Очередь пуста." << endl;
        else
        {
            Node<T> *El = front;
            front = front -> next;
            delete El;
        }
    }
    void Clear()
    {
        while (! Empty())
            Pop();
    }
};

template <typename T>
class Node
{
    friend class Queue<T>;
public:
    Node() {next = 0;}
    Node(T nd) {nd=node; next=0;}
    T& getsetnode(){return node;}
    Node<T>*& getsetnext(){return next;}
private:
    T front;
    T back;
    T node;
    Node<T> *next;
};

template <class T> ostream& operator<< (ostream &, const Queue<T> & );

int main()
{
    Queue<int> *queueInt = new Queue<int>;
    for (int i = 0; i<10; i++)
    {
        queueInt->Push(i);
        cout << "Pushed " << i << endl;
    }
    if (!queueInt->Empty())
    {
        queueInt->Pop();
        cout << "Pop" << endl;
    }
    queueInt->Front();
    queueInt->Back();
    queueInt->Clear();
    cout << "Clear" << endl;
    return 0;
} 
```

在这些行：

```
 Node<T&> *El = new Node<T> (NewEl);

    front = front -> next;
    delete El; 
```

我明白了`Implicit instantiation of undefined template 'Queue<int>::Node<int>'`。我究竟做错了什么？阅读[这篇文章后](https://stackoverflow.com/questions/14626033/implicit-instantiation-of-undefined-template-class)，我尝试更改`int`以`const int`查看是否是问题所在，但显然不是，因为我遇到了同样的错误。

我将 XCode 与 LLVM 编译器 4.2 一起使用。当我切换到 GCC 时，我收到更多错误：

`template<class> class Node;`gets `Declaration of 'struct Queue<int>::Node<int>'`、 `Node<T&> *El = new Node<T> (NewEl);`gets`Invalid use of incomplete type`和任何处理分配给 El 的任何东西都不能转换`<int&>*`为`<int>*`（但删除引用不会改变 LLVM 的任何东西）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T05:13:35.530

```
template <typename T>
class Queue
{
private:
    template<class> class Node;
/* ... */ 
```

这是 的前向声明`Queue::Node`。后者定义`class Node`在全局命名空间中，因此它们不一样，任何使用`Queue::Node`都会导致不完整类型错误。由于您无论如何都不提供内部节点的接口，所以只需废弃全局定义`Node`并将其粘贴到`Queue`：

```
template <typename T>
class Queue
{
private:
    class Node
    {
    public:
    Node() {next = 0;}
    /* ... */
     };
/* ... */
}; 
```

# ruby-on-rails - 使rails 3 jquery自动完成适用于整数列

> ID：15583606
> 
> 赞同：1
> 
> 时间：2013-03-23T05:08:55.927
> 
> 标签：ruby-on-rails, postgresql, autocomplete

我想知道为什么 rails 3 jquery autocomplete gem 在整数类型的列中不起作用。

我有一个列名代码顺便说一句。

```
autocomplete :category, :code 
```

代码是整数，但每当我尝试实现自动完成时，它都不起作用。

问题参与者尝试`cast_to_text`解决：[https ://github.com/greg-barnett/rails3-jquery-autocomplete/blob/13d20b087f261690553dff268ff39bb6893ddaa3/lib/rails3-jquery-autocomplete/orm/active_record.rb](https://github.com/greg-barnett/rails3-jquery-autocomplete/blob/13d20b087f261690553dff268ff39bb6893ddaa3/lib/rails3-jquery-autocomplete/orm/active_record.rb)

但我不明白如何真正使用它，因为它也不起作用。

看法：

```
<%=f.autocomplete_field :category_id, autocomplete_category_code_project_procurement_management_plans_path, class:'cat-code',:full => true%> 
```

PS：代码是我自己声明的主键。

```
set_primary_key "code" 
```

这就是为什么，我真的需要将代码更改为整数，但似乎自动完成与它不兼容。

根据 Chrome 的“检查元素”功能。

网络日志：

> ActiveRecord::StatementInvalid 在 /project_procurement_management_plans/autocomplete_category_code========================================= ==================================================== =======> PG::Error: ERROR: function lower(integer) does not existLINE 1: SELECT categories.code FROM "categories" WHERE (LOWER(cate...
> ^HINT: 没有函数匹配给定的名称和参数类型。您可能需要添加显式类型转换。：SELECT categories.code FROM "categories" WHERE (LOWER(categories.code) ILIKE '100%') ORDER BY categories.code ASC LIMIT 10(gem) activerecord-3.2 .11/lib/active_record/connection_adapters/abstract_adapter.rb，第 291 行------------------------------------------------ -------------------------------------------------- --------`ruby 286 raise exception 287 end 288 289 def translate_exception(e, message) 290 # override in derived class> 291
> ActiveRecord::StatementInvalid.new(message) 292 end 293
> 294 end 295 end 296 end`应用程序回溯-------------完整回溯-------------- - (gem) activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb :291:in `translate_exception' - (gem) activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1145:in` translate_exception' - (gem) activerecord-3.2.11/lib/active_record/connection_adapter/abstract_adapter.rb:284:in `rescue in log' - (gem) activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb:275:in` log' - (gem) activerecord-3.2.11/lib/active_record/connection_adapter/postgresql_adapter.rb :661:in `exec_query' - (gem) activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1248:in` select' - (gem)

等等。

任何解决方法将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:06:14.507

如果您仔细查看错误消息，您会发现问题出在以下 SQL 中：

```
SELECT categories.code
FROM "categories"
WHERE (LOWER(categories.code) ILIKE '100%')
ORDER BY categories.code ASC
LIMIT 10 
```

特别是，PostgreSQL 不喜欢 LOWER 调用：

> 函数 lower(integer) 不存在

`categories.code`如果是数字，则生成的 SQL 有两个问题：

1.  你不能降低一个数字，降低一个数字没有任何意义。
2.  您不能对数字进行 ILIKE，LIKE 和 ILIKE 用于字符串。

阅读[代码](https://github.com/greg-barnett/rails3-jquery-autocomplete/blob/13d20b087f261690553dff268ff39bb6893ddaa3/lib/rails3-jquery-autocomplete/orm/active_record.rb)表明使用该`:cast_to_text`选项将导致如下查询：

```
SELECT categories.code
FROM "categories"
WHERE (LOWER(CAST(categories.code AS TEXT)) ILIKE '100%')
ORDER BY categories.code ASC
LIMIT 10 
```

这会将`code`数字值转换为字符串，您可以根据自己的意愿降低和喜欢字符串。

那么我们如何使用`:cast_to_text`呢？[精美的手册](https://github.com/greg-barnett/rails3-jquery-autocomplete#options)包括该选项的此示例`:full`：

```
class ProductsController < Admin::BaseController
  autocomplete :brand, :name, :full => true
end 
```

所以大概你可以：

```
autocomplete :category
autocomplete :code, :cast_to_text => true 
```

事情会奏效。您可能还会注意到该手册没有提及`:cast_to_text`其他选项，因此您可能需要自己修补它。

我自己不使用这个宝石，所以这里有一些猜测。

* * *

为什么自动完成 gem 会缩小列**并**执行不区分大小写的模式匹配是一个谜。我们可以放心地对这一切的陌生摇摇头，假装我们没有看到它。

# php - 按值排序数组并存储在变量中

> ID：15583611
> 
> 赞同：5
> 
> 时间：2013-03-23T05:09:44.267
> 
> 标签：php, arrays, sorting

```
$array = array(5,4,6,8,5,3,4,6,1); 
```

`$array`我想排序`asort`，但问题是它`asort`是一个函数，它的产品不能存储在变量中。

我该怎么做这样的事情？：

```
$array = array(5,4,6,8,5,3,4,6,1);
$sorted_array = asort($array); 
```

**编辑：**我也想`$array`保持原来的顺序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T05:15:25.317

这样做是为了保持`$array`其原始顺序

```
$array = array(5,4,6,8,5,3,4,6,1);
$sorted_array = $array;
asort($sorted_array); 
```

输出

[http://codepad.viper-7.com/8E78Fo](http://codepad.viper-7.com/8E78Fo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T05:11:25.220

```
 $orignal_array = array(5,4,6,8,5,3,4,6,1);
 $copied_array = $orignal_array;

 asort($copied_array);
 $sorted_array = $copied_array;

 not the most efficient way to do it though :( 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:13:57.627

先排序再赋值

```
asort($array);
$sorted_array = $array 
```

# jquery - Jquery动态插入文本区域并检测输入的新字母

> ID：15583612
> 
> 赞同：0
> 
> 时间：2013-03-23T05:10:01.133
> 
> 标签：jquery

我正在动态插入一个文本区域，它有一个内容，现在如果用户输入新内容，我必须将新 + 旧内容存储到隐藏字段中。

我使用了一个`.live('change',function() { } });`，但这不起作用。我应该使用哪个事件来触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:10:43.497

使用`keyup`代替`change`，当焦点离开文本框时将触发更改。`live`已弃用，您最好`on`改用。

```
.live('keyup',function() { } }); 
```

> 当元素的值改变时，change 事件被发送到元素。此事件仅限于元素、框和元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发该事件，但对于其他元素类型，该事件会延迟到元素失去焦点为止。[参考](http://api.jquery.com/change/)

使用 on 绑定动态添加的 textarea。

```
$(document).on("keyup", ".textAreaClass", function(){
   alert("");
}); 
```

`document`in 选择器可以被`parent`元素选择器替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:15:21.393

您需要使用`keyup`事件，因为它是在用户释放键时生成的，在该键的默认操作执行后。

并且还使用`.on()`因为`.live()`从新版本的`jQuery`.

```
.on('keyup',function() { } }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:16:23.023

试试这个..

```
 <textarea rows="3" cols="50"  name="" id="qcnotes" class="input-xlarge focused" style="width:100%" placeholder="Enter Notes" onkeyup="functionname(this.value)"></textarea> 
```

# javascript - 如何根据互联网连接可用性切换基础层

> ID：15583620
> 
> 赞同：1
> 
> 时间：2013-03-23T05:10:56.233
> 
> 标签：javascript, google-maps, openlayers

我的应用程序（html+ JavaScript）使用谷歌地图作为基础层。我还将 OSM 设置为离线基础层，以便在没有互联网连接时使用。

现在我正在锁定一种让应用程序检查互联网连接的方法，如果有，那么使用谷歌地图作为基础层。如果没有，则使用 OSM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:44:42.287

您需要一个只有在您有连接时才能成功的测试，因此一种测试方法是请求一个已知良好的 Internet 资源。如果测试失败，则您没有连接。

由于跨域限制，XMLHttpRequest 不起作用。什么可以绕过跨域限制？图片！

例如：

```
var test = new Image();
test.onload = function() { console.log('loaded')};
test.onerror = function() { console.log('error')};
test.src = "http://ds9.ssl.berkeley.edu/imageviewer/images/images2/latest_eit_284_full.jpg"; 
```

# iphone - MkAnnotation 放置动画 iOS 6

> ID：15583622
> 
> 赞同：0
> 
> 时间：2013-03-23T05:11:08.663
> 
> 标签：iphone, ios, objective-c, ios5, ios6

我尝试为我的自定义 MkAnnotation 设置动画，它在 iOS 5 上运行良好，但在 iOS 6 上运行良好。这是我的 didAddAnnotationViews 方法：

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)annotationViews
{
    NSTimeInterval delayInterval = 0;

    for (MKAnnotationView *annView in annotationViews)
    {
        // Don't pin drop if annotation is user location
        if ([annView.annotation isKindOfClass:[MKUserLocation class]]) {
            continue;
        }

        // Check if current annotation is inside visible map rect, else go to next one
        MKMapPoint point =  MKMapPointForCoordinate(annView.annotation.coordinate);
        if (!MKMapRectContainsPoint(self.mapView.visibleMapRect, point)) {
            continue;
        }

        CGRect endFrame = annView.frame;

        // Move annotation out of view
        annView.frame = CGRectMake(annView.frame.origin.x, annView.frame.origin.y - self.view.frame.size.height, annView.frame.size.width, annView.frame.size.height);

        [UIView animateWithDuration:1
                          delay:delayInterval
                        options:UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         annView.frame = endFrame;
                     }
                     completion:^(BOOL finished){
                             if (isModal)
                                 [self.mapView selectAnnotation:[[self.mapView annotations]     objectAtIndex:0] animated:YES];
                         }];

        delayInterval += 0.0625;
    }
} 
```

我用我在互联网上找到的部分代码制作了这个方法。在 iOS 5 上，动画是完美的，但在 iOS 6 上，pin 只是出现，没有任何动画。设置 mapView 委托是我在 viewDidLoad 上做的第一件事，我还尝试从 viewDidAppear 方法生成注释，但没有成功。

任何的想法 ？

谢谢。

**编辑：找到解决方案，我使用 perform:withObject:afterDelay: 方法，它似乎工作。**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    mapView.delegate = self;
    [self performSelector:@selector(addAnnotation) withObject:nil afterDelay:0.0];
}

- (void)addAnnotation
{
    MapViewAnnotation *annotation = [[MapViewAnnotation alloc] initWithTitle:@"test" andCoordinate:CLLocationCoordinate2DMake(49.6, 6.2)];
    [mapView addAnnotation:annotation];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:23:31.113

我找到了解决方案，请查看编辑部分。

# python - 我的加密程序需要帮助

> ID：15583625
> 
> 赞同：1
> 
> 时间：2013-03-23T05:11:25.543
> 
> 标签：python, python-2.7

指示：

编辑：我只需要方法菜单返回“即将推出”，因为 - 就目前而言，如果用户输入 c、p 或 s，它什么也不返回。我看不出有什么合乎逻辑的原因。

```
def PrintDescription():
    print 'This program encrypts and descrypts messages using multiple \
encryption methods.\nInput files must be in the same directory as this program.\
\nOutput files will be created in this same directory.'

def StartMenu():
    print 'Do you wish to encrypt or decrypt?'
    print '<e>ncrypt'
    print '<d>ecrypt'
    print '<q>uit'

def MethodMenu():
  print 'Which method would you like to use?'
  print '<c>aesarian fixed offset'
  print '<p>seudo-random offset'
  print '<s>ubstitution cipher'
  a = raw_input("")
  while a not in ('c', 'p', 's'):
    if a:
      print "Error: You must type c, p, or s"
      a = raw_input("")
    if a == 'c' or a=='p' or a=='s':
      print 'Coming Soon'         

def main():
    alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,.?! \t\n\r"
    PrintDescription()
    a = None
    while a not in ('e', 'd', 'q'):
        if a:
            print "Error: You must type e, d, or q"
        else:
            StartMenu()
        a = raw_input("")
        if a == 'e' or a=='d':
          MethodMenu()
        if a == 'q':
          break  

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:44:41.150

在我提出我的解决方案之前，这里有一些评论。

1.  MethodMenu() 函数当前不返回任何内容。我认为您的意思是返回用户的选择。
2.  我在 StartMenu() 和 MethodMenu() 之间看到了一种模式：每个都显示一个选择列表并重复获取用户的输入，直到用户输入正确的输入。但是，StartMenu() 函数不管理用户的输入，而 MethodMenu() 则在设计上 ==> 不一致。
3.  由于获取用户输入并对其进行验证的行为发生了两次，因此最好将该代码块移动到可以调用的单独函数中，而不是多次编写相同的代码块。
4.  我注意到单字母变量*a*的用户。一般来说，我建议使用更具描述性的名称，例如*user_choice*、*user_answer*或*user_input*。

事不宜迟，我的解决方案：

```
def PrintDescription():
    print 'This program encrypts and descrypts messages using multiple \
encryption methods.\nInput files must be in the same directory as this program.\
\nOutput files will be created in this same directory.'

def GetChoice(acceptable_answers):
    while True:
        user_choice = raw_input('')
        if user_choice in acceptable_answers:
            return user_choice
        else:
            print 'Please try:', ', '.join(acceptable_answers)

def StartMenu():
    print 'Do you wish to encrypt or decrypt?'
    print '<e>ncrypt'
    print '<d>ecrypt'
    print '<q>uit'
    user_choice = GetChoice('edq')
    return user_choice

def MethodMenu():
    print 'Which method would you like to use?'
    print '<c>aesarian fixed offset'
    print '<p>seudo-random offset'
    print '<s>ubstitution cipher'
    user_choice = GetChoice('cps')
    return user_choice

def main():
    alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,.?! \t\n\r"
    PrintDescription()

    while True:
        user_choice = StartMenu()
        if user_choice in ('e', 'd'):
            user_choice = MethodMenu()
            # Do something based on the user_choice
        if user_choice == 'q':
            break

main() 
```

### 更新

如果您必须知道 有什么问题`MethodMenu()`，这里是解释：用户第一次输入了正确的选择（c、p 或 s）：整个 while 循环被跳过，这意味着“即将推出”将不会被打印。您可以修改您的解决方案，或者使用*hek2mgl 的*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:45:13.667

按照您的逻辑，您应该将函数更改`MethodMenu()`为：

```
def MethodMenu():
  print 'Which method would you like to use?'
  print '<c>aesarian fixed offset'
  print '<p>seudo-random offset'
  print '<s>ubstitution cipher'
  a = None
  while a not in ('c', 'p', 's'):
    if a:
      print "Error: You must type c, p, or s"
    a = raw_input("")
    if a == 'c' or a=='p' or a=='s':
      print 'Coming Soon' 
```

但是为什么要使用`a`代替`user_input`或其他东西呢？！你应该使用富有表现力的变量名！;)

# c# - 在 iTextSharp 的 using 块中打开第二个 PdfReader

> ID：15583626
> 
> 赞同：0
> 
> 时间：2013-03-23T05:11:39.673
> 
> 标签：c#, asp.net, itextsharp

我有以下代码可以打开 PDF 并添加一些文本和图像。有一次，我打开了第二个 PDF，将其包装在图像中并将其添加到 PDF 中。操作成功完成后，我想删除第二个 PDF（我包裹在图像中的那个）。问题是文件现在被锁定，直到我重置我的 ASP.NET 应用程序。

在 GetImageFromPdf 方法中，您可以看到我正在创建第二个 PdfReader 实例。问题是，如果我关闭这个阅读器，我的 Create 方法中的阅读器也会关闭！难道我做错了什么？还有其他方法可以实现我的目标吗？

以下是相关代码：

```
public void Create(string outputFilePath, bool preview = false)
{
    using (PdfReader reader = new PdfReader(FilePath))
    {
        using (PdfStamper stamper = new PdfStamper(reader, new FileStream(outputFilePath, FileMode.Create)))
        {
            PdfContentByte canvas = stamper.GetOverContent(1);

            ...

            AddMap(canvas, stamper);
        }
    }
}

...

private void AddMap(PdfContentByte Canvas, PdfStamper stamper)
{
    Image ImageWrapper = GetImageFromPdf(stamper.Writer, _MapFilePath);

    //set the position and scale the image
    ImageWrapper.ScaleAbsolute(152.5f, 152.5f);
    ImageWrapper.SetAbsolutePosition(58.5f, 197.5f);

    Canvas.AddImage(ImageWrapper);
}

...

public Image GetImageFromPdf(PdfWriter Writer, string MapFilePath)
{
    //since vector images are not supported natively by iTextSharp
    //we have saved the location maps as PDF (originally in eps format) 
    //we use GetImportedPage to import the file, and wrap it in an Image object so we can scale it

    //If I close this reader, the reader in the Create method is closed as well
    PdfReader reader = new PdfReader(MapFilePath);
    PdfImportedPage ImportedPage = Writer.GetImportedPage(reader, 1);

    return Image.GetInstance(ImportedPage);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:06:48.633

试试这个

```
 using (PdfReader reader = new PdfReader(FilePath),PdfReader reader1 = new PdfReader(MapFilePath))
{
pass that reader1 object to AddMap method.
} 
```

# java - 如何从html标签中解析链接地址

> ID：15583634
> 
> 赞同：0
> 
> 时间：2013-03-23T05:12:44.327
> 
> 标签：java

我有以下方法：

```
public void parse(){
    String x = "<p><a href=\"http://WWW.xxxx.COM\" class=\"url\" target=\"_blank\">Website for xxxx</a></p>";
    int start = 0;
    int end = 0;
    for (int i = 0; i < x.length(); i++){
        start++;
        if (x.charAt(i) == '\"'){
            start = i;
        }            
    }
    System.out.println(x.substring(start));
} 
```

如何从字符串中删除标签，以便获得最终结果： `www.xxxx.com`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:36:38.923

如果您不想使用正则表达式，也可以这样做。

```
 String x = "<p><a href=\"http://WWW.xxxx.COM\" class=\"url\" target=\"_blank\">Website for xxxx</a></p>";
    x = x.substring(x.indexOf("/") + 2); // or x = x.substring(x.indexOf("W"));
    x = x.substring(0, x.indexOf("\""));
    System.out.println(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:21:37.703

使用这样的替换方法：

```
 String x = "<p><a href=\"http://WWW.xxxx.COM\" class=\"url\" target=\"_blank\">Website for xxxx</a></p>";
    String result = x.replaceAll(".*href=\"http://([^\"]*)\".*", "$1"); 
```

希望对你有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:49:07.813

您可以实现这一点，如下所示：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexTest {

    public static void main(String[] args) {
        String strYourText = "<p><a href=\"http://WWW.xxxx.COM\" class=\"url\" target=\"_blank\">Website for xxxx</a></p>";
        Matcher matcher = Pattern.compile("href=\"(.*?)\"").matcher(strYourText);
        while (matcher.find()) {
            System.out.println(matcher.group(1));
        }
    }
} 
```

# css - 为什么子输入字段比父 div 宽

> ID：15583639
> 
> 赞同：5
> 
> 时间：2013-03-23T05:13:28.487
> 
> 标签：css

HTML

```
<div class="wrap">
    <input class="field" type="text">
    <textarea class="field" row="10"></textarea>
</div> 
```

CSS

```
.wrap{width:300px;overflow:hidden;padding:10px;}
.field{display:block;width:100%;margin:10px 0;padding:10px;} 
```

我希望文本输入的宽度和 textarea 应该完全等于父 div。但他们不是。谁能解释为什么？

[实时代码](http://jsfiddle.net/aLz6b/1/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-23T05:20:11.573

总宽度计算为`padding`+ `width`+的总和`borderWidth`。这是盒子模型的默认行为。您可以使用`box-sizing`属性来更改它。在你的情况下：

```
.field {
    ...
    box-sizing: border-box;
} 
```

[http://jsfiddle.net/aLz6b/3/](http://jsfiddle.net/aLz6b/3/)

进一步阅读：[http ://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T05:20:31.853

这是因为您已经`padding`应用了`.field`删除填充并看到它会起作用。

```
.field{display:block;width:100%;margin:10px 0;} 
```

**或者**

你有`100%`宽度设置所以只需设置宽度如下。

```
.field {
    display: block;
    margin: 10px 0;
    padding: 10px;
    width: 280px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:17:02.423

该`width: 100%`属性适用于内容框，而不是边框​​框。如果您使用的是 CSS3，您可以设置`box-sizing: border-box`以获得预期的大小。

[http://www.w3.org/TR/css3-ui/#box-sizing0](http://www.w3.org/TR/css3-ui/#box-sizing0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T05:21:22.247

试试这个：

```
.wrap{width:300px;overflow:hidden;padding:10px 0px;} 
```

# python - 使用 python 脚本 ssh 连接到路由器

> ID：15583643
> 
> 赞同：2
> 
> 时间：2013-03-23T05:13:57.910
> 
> 标签：python, ssh, router, os.system

我想知道是否有可能使用 python 脚本连接到路由器并通过 ssh 连接控制接口（关闭、重新启动无线网络等）。

到目前为止，我写了这些行，但它仍然不起作用。当我查看终端时，我发现在我的脚本应该回显路由器的密码以完成连接时，一切都被阻止了。请问我该如何纠正？

以下是几行：

```
import os, urllib, urllib2, re

def InterfaceControl():
   #os.system("echo training")
   os.system("ssh -l root 192.168.2.1")
   os.system("echo yes")
   os.system("echo My_ROUTER_PASSWORD")
   os.system("shutdown -r")

 def main():
     InterfaceControl()

 if __name__=="__main__":
     main() 
```

非常感谢你提前

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T05:22:20.353

你可以使用`paramiko`which 是一个 python[库](http://www.lag.net/paramiko/)，它通过 ssh 抽象远程 shell 连接，有几个选项允许用户使用 rsa 密钥等进行身份验证。这是一个示例代码，你可以重复使用来解决你的问题：

```
import paramiko

ssh = paramiko.SSHClient()
ssh.connect( 'hostname', username = 'username', password = 'password' )
ssh.exec_command( 'ls -al' ) 
```

[顺便说一句，如果您从虚拟环境 ( virtualenv](http://www.virtualenv.org/en/latest/) ) 运行脚本，paramiko 可以轻松添加到您的 python 环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:35:56.903

[铅](http://plumbum.readthedocs.org)是你要找的。（[远程命令](http://plumbum.readthedocs.org/en/latest/remote.html#guide-remote-commands)）

# android-intent - 位图背景顶部的Android按钮不显示

> ID：15583645
> 
> 赞同：0
> 
> 时间：2013-03-23T05:14:24.480
> 
> 标签：android-intent, android-activity, android-view

我已经被这个愚弄了好几天，但无法让它工作，尽管它编译没有错误，并且 apk 安装在模拟器中。模拟器显示位图（res/drawable/scr0.png）正常，但没有按钮显示，点击时也没有响应。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

//public class PageOne extends Activity implements View.OnClickListener {
public class PageOne extends Activity  {

Button button;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_page_one);
    setContentView(new myView(this));
    //addListenerOnButton();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.page_one, menu);
    return true;
}

private class myView extends View {

    public myView (Context context) {
        super (context);
        //setContentView(R.layout.activity_page_one);

        addListenerOnButton();
        //button.bringToFront();
    }

    @Override
    protected void onDraw (Canvas canvas) {

        this.setBackgroundResource(R.drawable.scr0);
        button.bringToFront();

    }

}// myView

public void addListenerOnButton() {
    final Context context = this;
    button = (Button) findViewById(R.id.button1);
    //button.setBackgroundColor(Color.TRANSPARENT);
    button.bringToFront();
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent intent = new Intent(context, PageTwo.class);
                        startActivity(intent);   
        }
    });

}// addListenerOnButton()

}// PageOne

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".PageOne" >

<Button
    android:id="@+id/button1"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="42dp"
    android:text="bubkiss" />

</RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.yetanotherpageturner"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.yetanotherpageturner.PageOne"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name="com.example.yetanotherpageturner.PageTwo"
        android:label="@string/app_name"
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:43:44.907

试试这个：`button.setOnClickListener(new View().OnClickListener());` 如果有帮助，请投票。

# java - JButton 在我滚动之前不可见

> ID：15583656
> 
> 赞同：0
> 
> 时间：2013-03-23T05:15:51.503
> 
> 标签：java, swing, jframe, jbutton, visible

我刚刚开始制作一个简单的 mp3 播放器，我正在创建播放、前进、后退等... 按钮，但由于某种原因，只有第一个按钮出现并且要使第二个按钮出现，我必须去滚动它. 如果你能帮我解决这个问题，那就太好了。我正在使用两张图片，一张名为 play.jpg，另一张名为 next.png。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Graphic extends JPanel{

JFrame f = new JFrame();
JPanel p = new JPanel(new GridBagLayout());

public Graphic(){

    gui();

}

public void gui(){

    f.setVisible(true);
    f.setSize(1600,900);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.add(p);

    ppr(75,26,25,25,"pics/play.jpg");
    //above is the play button

    ppr(40,26,25,25,"pics/next.png");
// above is the button that wont appear until it is scrolled over (it is just to the      left of the button above

}

public void ppr(int x, int y, int width, int height, String file){
    p.setLayout(null);      

    Toolkit tool = Toolkit.getDefaultToolkit();
        Image player = tool.getImage(file);
            ImageIcon playbutton = new ImageIcon(player);

    JButton play = new JButton(playbutton);
        play.setBounds(x, y, width, height);
            p.add(play);

    // ********************** above is the the method that makes a button        

}

public static void main(String args[]) {
    new Graphic();

}

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:32:39.147

该`setVisible(true)`方法应该在所有组件都添加到 GUI 之后调用。

我也同意其他关于更好的 GUI 设计的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:22:37.513

在不同的线程中运行 GUI，而不是在主线程中。

[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

所有 UI 代码都应该在 Swing 的事件调度线程中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T05:25:20.633

不要使用`setBounds`. 使用您在初始化面板时指定的[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html) 并指定`GridBagConstraints`

# python - 在列表python中查找字符

> ID：15583659
> 
> 赞同：-3
> 
> 时间：2013-03-23T05:16:31.473
> 
> 标签：python, list, loops, for-loop

```
def find_friend(filename, name):
    lists = open(filename, 'Ur')
    name1 = set(lists)
    for row in lists:
        if name in name1:
            print row
        else:
            print 'friend does not exist' 
```

所以我想要的结果是打开一个列表，在该列表中搜索一个角色并返回角色详细信息。例如。搜索`a`in`[(a,b,c,d),(e,f,g,h)]`将返回`a,b,c,d`。到目前为止，它没有返回任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:29:03.877

您最大的问题是`for row in lists`实际不会遍历任何内容（您在调用时已经完成了文件的完整读取`set`）。我认为如果你摆脱那条线（并寻找`name in row`你应该做得更好。

```
def find_friend(filename, name):
    lists = open(filename, 'Ur')
    for row in lists:
        if name in row:
            print row
        else:
            print 'friend does not exist' 
```

# hadoop - Hadoop：将本地 xml 文件从共享位置加载到 Hive 的方法

> ID：15583660
> 
> 赞同：0
> 
> 时间：2013-03-23T05:16:35.857
> 
> 标签：hadoop, mapreduce, hive, sqoop

我的要求是将通过不同来源收集到网络共享文件夹中的 XML 文件加载到 Hive 中。我需要通过方法进行确认。

据我了解，我必须 1\. 首先将所有文件加载到 HDFS 2\. 然后使用 Mapreduce 或 sqoop 将 xml 文件转换为所需的表，然后我必须将它们加载到 Hive 中。

如果存在，请建议我任何更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:44:32.803

处理和读取 XML 文件

Mahout 具有 XML 输入格式，请参阅下面的博客文章以了解更多信息

[https://github.com/apache/mahout/blob/ad84344e4055b1e6adff5779339a33fa29e1265d/examples/src/main/java/org/apache/mahout/classifier/bayes/XmlInputFormat.java](https://github.com/apache/mahout/blob/ad84344e4055b1e6adff5779339a33fa29e1265d/examples/src/main/java/org/apache/mahout/classifier/bayes/XmlInputFormat.java)

[http://xmlandhadoop.blogspot.com.au/2010/08/xml-processing-in-hadoop.html](http://xmlandhadoop.blogspot.com.au/2010/08/xml-processing-in-hadoop.html)

Pig 有 XMLLoader

[http://pig.apache.org/docs/r0.7.0/api/org/apache/pig/piggybank/storage/XMLLoader.html](http://pig.apache.org/docs/r0.7.0/api/org/apache/pig/piggybank/storage/XMLLoader.html)

使用上述任何一种方法处理后，您可以将其推送到 Hive 位置。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:33:49.770

您不需要将数据复制到 HDFS 中，您可以使用命令直接将数据加载到 hive 表中，

```
LOAD DATA [LOCAL] INPATH 'filepath' [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)] 
```

文件路径可以是

1.相对路径，例如：project/data1

2.绝对路径，例如：/user/hive/project/data1

3.带有方案和（可选）权限的完整URI，例如：hdfs://namenode:9000/user/hive/project/data1

加载到的目标可以是表或分区。如果表是分区的，则必须通过指定所有分区列的值来指定表的特定分区。

filepath 可以引用一个文件（在这种情况下，hive 会将文件移动到表中）或者它可以是一个目录（在这种情况下，hive 会将该目录中的所有文件移动到表中）。在任何一种情况下，文件路径都会寻址一组文件。

如果指定关键字 LOCAL，则： 1.load 命令将在本地文件系统中查找文件路径。如果指定了相对路径 - 它将相对于用户的当前目录进行解释。用户也可以为本地文件指定完整的 URI - 例如：file:///user/hive/project/data1

2.load 命令将尝试将文件路径寻址的所有文件复制到目标文件系统。通过查看表的位置属性来推断目标文件系统。然后将复制的数据文件移动到表中。

如果未指定关键字 LOCAL，则 Hive 将使用文件路径的完整 URI（如果指定）。否则，将应用以下规则：

1.  如果未指定方案或权限，Hive 将使用 hadoop 配置变量 fs.default.name 中指定 Namenode URI 的方案和权限。
2.  如果路径不是绝对的 - 那么 Hive 将相对于 /user/ 解释它
3.  Hive 会将文件路径寻址的文件移动到表（或分区）中

如果使用了 OVERWRITE 关键字，则目标表（或分区）的内容将被删除并替换为 filepath 引用的文件。否则文件路径引用的文件将被添加到表中。

1.  请注意，如果目标表（或分区）已经有一个文件，其名称与文件路径中包含的任何文件名冲突 - 那么现有文件将被新文件替换。

# android - 以编程方式打开显示校准屏幕

> ID：15583664
> 
> 赞同：1
> 
> 时间：2013-03-23T05:17:18.657
> 
> 标签：android

我发现为了在 Android 中校准加速度计我不需要做任何特别的事情我只需要在 iCS+ 中打开 GB 和 G-Sensor 校准屏幕中的水平校准屏幕现在如何以编程方式打开这些活动?

我可以打开显示设置但无法打开校准屏幕

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_DISPLAY_SETTINGS), 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:58:18.857

> 他们真的没有这个选择吗？

我有大约 50 台 Android 设备，但大多数都没有看到校准选项。事实上，我不记得在 2009 年以来生产的设备上看到过校准选项[。AOSP 设置应用程序](https://github.com/android/platform_packages_apps_settings)中没有任何内容向我暗示这是一种校准机制。

当然，没有记录和支持的方式来启动这样的设置屏幕。

# java - 库存网格检测

> ID：15583666
> 
> 赞同：0
> 
> 时间：2013-03-23T05:17:38.993
> 
> 标签：java, math, inventory

我正在为游戏创建一个库存系统。库存系统将使用单元格和 2D 图像来表示物品，例如 Minecraft、Diablo 或 WoW。在尝试让玩家将物品放入包中时（单击并拖动样式），我遇到了一些障碍。

到目前为止，我已经成功地创建了清单网格，这确实是烟雾缭绕的：

```
public class InventoryMenu {
boolean objectSelected = false;
Item selectedItem;

public final int COLUMNS = 5;
public final int ROWS = 7;

ArrayList<Item> inv = new ArrayList<Item>((ROWS + 1) * COLUMNS);
Sprite slot;

public void render(Graphics g) {

    for (int i = 0; i < 40; i++) {
        int col = i % COLUMNS;
        int row = ROWS - i / COLUMNS;

        slot.draw(g, (Camera.width - slot.getWidth() * COLUMNS) + slot.getWidth()* col, row * slot.getHeight());

        if (inv.get(i) != null) {
            inv.get(i).render(g);
        }
    }
    if (selectedItem != null) {
        selectedItem.render(g);
    }
} 
```

基本上，我有一个可以保存项目的数组列表，它只绘制“插槽”图像 40 次，如果该“插槽”中有一个项目，它也会绘制项目图像。凉爽的？凉爽的。如果我想让玩家在他们的库存中选择一个项目并将其移动到不同的插槽，就会出现问题。我让他们捡起来没问题（我使用了一种非常原始的蛮力，但是对于任何合理大小的库存，它都可以工作）：

```
private Item grabItem(Point2D mouse) {
    for (Item i : inv) {
        if (i != null) {
            if (i.getPhysicsShape().contains(mouse)) {
                Item pick = i;
                selectedItem = pick;
                objectSelected = true;
                i = null;
                return pick;
            }
        }
    }
    return null;
} 
```

这段代码让玩家可以拿起一个物品，但放置它失败了——它很少得到正确的插槽，除非它的底行 (0-4)：

```
setDown(){
    int slotLoc = calcSlot(InputHandler.mouseCoords);
    placeItem(slotLoc);
}

private void placeItem(int loc) {
    if(loc < 0 || loc > ROWS * (COLUMNS + 1))
        return;

    int col = loc % COLUMNS;
    int row = ROWS - loc / COLUMNS;
    selectedItem.pickUp((Camera.width - slot.getWidth() * COLUMNS) + slot.getWidth() * col, row * slot.getHeight());

    inv.set(loc, selectedItem);
    selectedItem = null;
    objectSelected = false;
}

private int calcSlot(Point2D mouse){
    int colPos = (int) (COLUMNS - (Camera.width - mouse.getX()) / slot.getWidth());
    int rowPos = (int) (ROWS+1 - (mouse.getY()) / slot.getHeight());

    if (colPos > COLUMNS || colPos < 0 || rowPos < 0 || rowPos > ROWS + 1) {
        dropItem();
        return -1;
    } else {
        return colPos + 4*rowPos;
    }

} 
```

我相当有信心问题出在 calcSlot 中，但我似乎找不到在哪里。任何帮助将不胜感激，我敢肯定这是愚蠢的。

图片！！

所以，我可以毫无问题地拿起一个物品，它会自动将它放在最后一个插槽中。到目前为止，一切都是黄金。

![成功放置在插槽 39](../Images/29513d3b6a3700b5f54862a37fa22de4.png)

然后我可以单击该图像并将其从网格中取出，它会跟随我的鼠标（鼠标被 PrntScrn 隐藏，但它位于图像的左上角：

![拖动](../Images/0db2d6fa2260c70305086f17c35bc273.png)

但是，当我尝试通过单击插槽 33 的中间来放置该项目时，它会莫名其妙地将其放置在插槽 27 中。

![德普](../Images/6af258446184791847098d2aee40615f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:08:27.923

```
private int calcSlot(Point2D mouse){
    int colPos = (int) (COLUMNS - (Camera.width - mouse.getX()) / slot.getWidth());
    int rowPos = (int) (ROWS - ((mouse.getY())- slot.getHeight()) / slot.getHeight());

    if (colPos > COLUMNS || colPos < 0 || rowPos < 0 || rowPos > ROWS + 1) {
        dropItem();
        return -1;
    } else {
        return COLUMNS*rowPos + colPos;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:40:09.310

33 和 27 之间的差异百分比是“6”

因此，我建议您非常仔细地查看数字和行从下到上运行的事实，这意味着它位于“第六行上方”，因此您在该过程中的线性计算是一行，哪个是坐标结果计算过程中某处的方式（冒险猜测）。

尝试将其放置在 32 中，看看它放置的单元格会发生什么情况。

但你也在这里两次显示 calcSlot 的代码，在一个版本中它有“ROWS+1”

# c# - 如何在 c# windows form 应用程序中分隔单词的字符？

> ID：15583670
> 
> 赞同：-2
> 
> 时间：2013-03-23T05:18:24.743
> 
> 标签：c#, winforms

我有两个问题：

1.  我想在一个文件夹中获取所有文件的名称。我该怎么做？

2.  如何分隔单词的前 8 个字符？

我想制作 ac# windows form 应用程序，它能够获取文件夹地址并分隔名称相同的图片（前 8 个字符显示他们拍摄的日期）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:20:51.207

1 您可以使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)获取文件列表。

2 您可以使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)来获取文件名。

```
var files = Directory.GetFiles(@"c:\", "*.*").Select(x => x.Substring(8)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:23:55.923

给定以下文件名：

C:\folder\12345678Picture1.jpg
C:\folder\12345678Picture2.jpg
C:\folder\12345678Picture3.jpg

尝试这样的事情：

```
using System.IO;
using System.Linq;

//...

public class PictureInfo
{
    public string Date { get; set; }
    public string Name { get; set; }
}

//...

var directoryInfo = new DirectoryInfo(@"C:\folder");
var pictureInfos = directoryInfo.GetFiles().Select(x => new PictureInfo
{
    Date = x.Name.Substring(0, 8),
    Name = x.Name.Substring(8)
}).ToArray(); 
```

`pictureInfos`现在将包含以下对象：

日期：12345678，名称：Picture1.jpg
日期：12345678，名称：Picture2.jpg
日期：12345678，名称：Picture3.jpg

# python - 烧瓶：如何使用多个应用程序构建项目？

> ID：15583671
> 
> 赞同：19
> 
> 时间：2013-03-23T05:18:26.740
> 
> 标签：python, flask

假设我想建立一个项目 Facebook

我需要一个像这样的项目结构

```
facebook/
         __init__.py
         feed/
             __init__.py
             models.py
             business.py
             views.py
         chat/
             __init__.py
             models.py
             business.py
             views.py
         games/
             __init__.py
             models.py
             business.py
             views.py
         common/
             common.py

         runserver.py 
```

我怎样才能很好地构建这个结构，以便在我运行时

```
python facebook/runserver.py 
```

它会在内部加载我所有应用程序的视图吗？
我想保持这种结构，因为进一步扩展项目是更自然的方式

我正在尝试听从他们的[建议](http://flask.pocoo.org/docs/patterns/packages/)，但不太明白我需要在哪里写

```
from flask import Flask

app = Flask(__name__) 
```

以及如何在一个地方从所有应用程序中导入所有视图，请帮助

如果说我把上面的代码写在里面`facebook/__init__.py`，那么`facebook/feed/views.py`我可以怎么做

```
from facebook import app 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-23T18:37:00.540

使用[蓝图](http://flask.pocoo.org/docs/blueprints/)。您的每个子应用程序都应该是一个蓝图，并且您将每个子应用程序加载到您的主 init 文件中。

回答你的第二个问题

```
from flask import Flask
app = Flask(__name__) 
```

你应该把它放入`facebook/__init__.py`

顺便说一句，我的`runserver.py`和`settings.py`始终位于`facebook/`.

像这样：

```
facebook/
         __init__.py
         feed/
             __init__.py
             models.py
             business.py
             views.py
         chat/
             __init__.py
             models.py
             business.py
             views.py
         games/
             __init__.py
             models.py
             business.py
             views.py
         common/
             common.py

runserver.py
settings.py 
```

内容`runserver.py`：

```
from facebook import app
app.run() 
```

我想`settings.py`不应该解释的内容。

内容`facebook/__init__.py`：

```
from flask import Flask
app = Flask(__name__)
app.config.from_object('settings')
from blog.views import blog #blog is blueprint, I prefer to init them inside views.py file
app.register_blueprint(blog,url_prefix="/blog") 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-23T19:44:30.477

我已经尝试了蓝图并提出了一个适合我的解决方案，如果您有其他想法，请告诉我。

**项目结构**

```
facebook/
        runserver.py
        feed/
            __init__.py
            views.py
        chat/
            __init__.py
            views.py 
```

**代码**

```
# create blueprint in feed/__init__.py
from flask import Blueprint

feed = Blueprint('feed', __name__)
import views

# create blueprint in chat/__init__.py
from flask import Blueprint

chat = Blueprint('chat', __name__)
import views

# add views (endpoints) in feed/views.py
from . import feed

@feed.route('/feed')
def feed():
    return 'feed'

# add views (endpoints) in chat/views.py
from . import chat

@chat.route('/chat')
def chat():
    return 'chat'

# register blueprint and start flask app
from flask import Flask
from feed import feed
from chat import chat

app = Flask(__name__)
app.register_blueprint(feed)
app.register_blueprint(chat)
app.run(debug=True) 
```

**在行动**

```
 * Running on http://127.0.0.1:5000/
# Hit Urls
http://127.0.0.1:5000/feed # output feed
http://127.0.0.1:5000/chat # output chat 
```

# javascript - 在 contenteditable div 中的插入符号位置之前和之后获取节点/元素

> ID：15583673
> 
> 赞同：3
> 
> 时间：2013-03-23T05:18:38.763
> 
> 标签：javascript, gwt, contenteditable, jsni

我的 GWT 应用程序中有一个 contenteditable div，当我按退格键或删除键时，我想获取插入符号位置前后的节点并检查它是否是文本节点。

```
Element element = DOM.createDiv(); 
element.setAttribute(contenteditable, "true");
basePanel.getElement().appendChild(element); 
```

这就是我创建内容可编辑 div 的方式。

任何解决方案将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:14:27.600

深入研究选择和范围类。它们还不兼容浏览器，因此您可以使用

[https://code.google.com/p/rangy/](https://code.google.com/p/rangy/)或
jquery++

用于抽象。然后为您的 div 创建一个范围，在两端将其扩展 1。然后检查 startcontainer 和 endcontainer 以找出它们的节点类型。

选择和范围 api 并不过分漂亮，使用它们比必要的要复杂得多，但这是完成它的方法。

# java - 在 primefaces 中打开对话框时聚焦 inputText

> ID：15583674
> 
> 赞同：0
> 
> 时间：2013-03-23T05:18:50.257
> 
> 标签：java, jsf, jsf-2, primefaces

我实际上将 JSF 与 Primefaces 一起使用，我`p:inputText`在使用`p:dialog`. 实际上，当我打开对话框时，我不知道如何将焦点放在 inputText 上。

这是我的 XHTML 文件：

```
<body>
    ...
    <p:commandButton id="add-movie-button" value="Add movie" onclick="searchdlg.show()" update="movie-list,text-search" actionListener="#{layout.clearMovieList}"/>  
    <p:dialog id="search-movie" header="Add movie" widgetVar="searchdlg" modal="true" resizable="false">    
        <h:outputLabel for="text-search" value="Movie title"/>  
        <p:inputText id="text-search" autocomplete="true" size="57" value="#{layout.searchedMovie}" style="margin-bottom:10px">
            <p:ajax event="keyup" update="movie-list" listener="#{layout.searchMovie}"/>
        </p:inputText>
        ...
    </p:dialog>
    ...
</body> 
```

当keyDown时，我已经尝试过[将](https://stackoverflow.com/questions/5457292/jquery-conflicts-with-primefaces/5457378#5457378)焦点放在我的inputText上，但它不会改变任何东西。

那么，您是否有任何提示/建议/解决方案可以在打开对话框后将焦点放在对话框中的 InputText 上？

# c - 使用两个堆栈的队列实现-指针不兼容错误

> ID：15583675
> 
> 赞同：2
> 
> 时间：2013-03-23T05:18:52.713
> 
> 标签：c, pointers, compiler-errors

程序任务是使用两个栈来实现一个队列。我理解需要像这样传递指针作为参数 - `pop(**&**headA)`。但是当我这样做时，我得到一个“不兼容的指针”编译时错误。因此，当我执行如下所示的代码时，出现逻辑错误。它没有按照我想要的方式运行。

```
#include<stdio.h>

typedef struct node{
     int data;
     struct node *link;
}node;
node *headA = NULL;
node *headB = NULL;

void push(node *,int);
int pop(node *);
void display(node *);
void enQ();
void dQ();

main(){
   int choice;
         system("cls");
         printf("\n\tWelcome to Queue implementation using two stacks.\n");         
         do{

         /* Menu */      

         printf("\n\tWhat would you like with your queue?\n\n");
         printf("1\. Insert an element at the front (EnQ)\n2\. Delete the last element (DQ)\n3\. Exit program\n\nEnter your desired choice with the corresponding serial number :\n\n");
         scanf("%d",&choice);
         system("cls");
         switch(choice){

                        case 1: enQ();
                                break;
                        case 2: dQ();
                                break;
                        case 3: printf("\n\tSorry to see you go, hope to see you back soon!\n");

                                exit(0);
                        default: printf("\n\tSorry, That option is unavailable. Try again!\n\n"); 

         }
         }while (choice >= 0);
}

void enQ(){
     int add;
     int x,y;
     printf("\n\tEnter the item\n");
     scanf("%d",&add);
     if(headB == NULL){ 
       push(headA, add);
     }
     else{
          while(headB != NULL){
            x = pop(headB);
            push(headA, x);
          }
          push(headA, add);
     }
    while(headA != NULL){
              y = pop(headA);
              push(headB, y);
    }
    display(headB); 
}

void dQ(){
   int del;
   int x,y;
   if(headB == NULL){
           printf("Queue is empty.");
   }
   else{
      while(headB != NULL){
                  x = pop(headB);
                  push(headA, x);
      }
      del = pop(headA);
      printf("\n\tThe element deleted is : %d ", del);
      while(headA != NULL){
                   y = pop(headA);
                   push(headB, y);
      }
      display(headB);
   }
}

void push(node *head, int add){
   node *last_node;
   last_node = (node*)malloc(sizeof(node));
   last_node->data = add;
   last_node->link = head;
   head = last_node;
}

int pop(node *head){
   node *last_node;
   int flag = 0;
   if(head==NULL)
      return flag;
   else{
      last_node = head;
      flag = last_node->data;
      head = head->link;
      free(last_node);
      return flag;
   }
}

void display(node *head){
   node *my_stack;
   if(head == NULL)
       printf("\n\tStack is empty\n");
   else{
       my_stack = head;
       printf("\n\tThe elements of the queue are : \n\n\t");
       while(my_stack != NULL){
            printf("%d\t", my_stack->data);   
            my_stack = my_stack->link;
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:26:26.090

`int pop(node *head);`头的类型是什么？ `node *headA = NULL;`headA 的类型是什么？ `y = pop(&headA);`&headA 的类型是什么？

从这里应该清楚，如果你想将a传递`node **`给pop，你需要声明pop有一个`node **`参数：`int pop(node **head);`

```
int pop(node **head){
    node *last_node;
    int flag = 0;
    if(*head==NULL)
       return flag;
    else{
       last_node = *head;
       flag = last_node->data;
       *head = last_node->link;
       free(last_node);
       return flag;
    }
} 
```

您也需要对 进行此更改`push`，因为这会改变头部，并且您希望这些更改在 push 返回后可见：`void push(node **head, int add);`

```
void push(node **head, int add){
    node *last_node;
    last_node = malloc(sizeof *last_node); // don't cast malloc. #include <stdlib.h> and use a C compiler rather than a C++ compiler.
    last_node->data = add;
    last_node->link = *head;
    *head = last_node;
} 
```

# jquery - 需要切换才能工作

> ID：15583676
> 
> 赞同：-1
> 
> 时间：2013-03-23T05:18:54.393
> 
> 标签：jquery, slidetoggle

我希望切换中的可折叠面板在单击切换之外的任何位置时关闭并显示`+`. 这是我的代码

```
$(document).ready(function () {
  $('#toggle li').click(function () {
    var siler = $(this).children('.collapse');
    if (siler.is(':hidden')) {
      siler.slideDown('200');
      $(this).children('span').html('--');  
    } else {
      siler.slideUp('200');
      $(this).children('span').html('+');
    }
  });
});

$('#toggle li > .collapse:eq(0)').hide();

$(document).click(function(event) {
  if ( !$(event.target).hasClass('#toggle li > .collapse')) {
    $("#toggle li > .collapse").hide();
    $(this).children('span').html('+'); 
  }
}); 
```

一个小提琴供你玩

[http://jsfiddle.net/krishkam2610/Ss3xU/13/](http://jsfiddle.net/krishkam2610/Ss3xU/13/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:49:26.550

您使代码过于复杂。你为什么不尝试这样的事情：

```
$(document).ready(function () {
    $('#toggle li').click(function () {
        a = $(this).children(".plusminus");
        $(this).children(".panel").slideToggle('fast', function(){
            a.html($(this).is(":visible") ? '--' : '+');
        });
    });
    $("body").click(function(event){
        if ($(event.target).closest("ul").attr('id') != "toggle") {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
    });
}); 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/Ss3xU/20/)

* * *

根据评论更新。

```
$(document).ready(function () {
    $('#toggle li').click(function () {
        $("#toggle li > .panel").slideUp();
        $('.plusminus').html('+');
        a = $(this).children(".plusminus");
        $(this).children(".panel").slideToggle('fast', function(){
            a.html($(this).is(":visible") ? '--' : '+');
        });
    });
    $("body").click(function(event){
        if ($(event.target).closest("ul").attr('id') != "toggle") {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
    });
}); 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/Ss3xU/21/)

* * *

根据评论更新。

```
$(document).ready(function () {
    $("#toggle li > .panel").hide();
    $('.plusminus').html('+');
    $('#toggle li').click(function () {
        $("#toggle li > .panel").slideUp();
        $('.plusminus').html('+');
        a = $(this).children(".plusminus");
        $(this).children(".panel").slideToggle('fast', function(){
            a.html($(this).is(":visible") ? '--' : '+');
        });
    });
    $("body").click(function(event){
        if ($(event.target).closest("ul").attr('id') != "toggle") {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
    });
}); 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/Ss3xU/22/)

* * *

```
$(document).ready(function () {
    $("#toggle li > .panel").hide();
    $('.plusminus').html('+');
    $('#toggle li').click(function () {
        if( !$(this).children('.panel').is(":visible") ) {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
        a = $(this).children(".plusminus");
        $(this).children(".panel").slideToggle('fast', function(){
            a.html($(this).is(":visible") ? '--' : '+');
        });
    });
    $("body").click(function(event){
        if ($(event.target).closest("ul").attr('id') != "toggle") {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
    });
}); 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/Ss3xU/26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:02:33.043

看看这个。我认为这就是你想要的。 `[Fiddle](http://jsfiddle.net/Ss3xU/19/)`

```
$(document).ready(function () {

        $('#toggle li').bind('click', function(){

                $(this).children('.panel').toggle();
                var a = $(this).children('span').html()=="-"?"+":"-";
                $(this).children('span').html(a);

        });
}); 
```

# sql - How to unlock superuser 'postgres' account in postgresql

> ID：15583681
> 
> 赞同：1
> 
> 时间：2013-03-23T05:19:54.347
> 
> 标签：sql, postgresql, database

While connecting to the `pgadmin` database postgres with correct password, I'm getting the following error:

```
'Error connecting to the server:FATAL password authentication failed with user 'postgres'. 
```

After changing the method to `'trust'` instead of `'md5'` in `hba` config file, and then typed:

```
 ALTER USER POSTGRES WITH PASSWORD 'newpassword' 
```

after again changing the methods as md5 then tried connecting to database

Howerver the password changed successfully (I checked in encrypt mode and it was fine) but getting the same issue:

```
 'Error connecting to the server:FATAL password authentication failed with user 'postgres'. 
```

Kindly suggest me if there are any other solution for this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:10:24.040

This suggests to me that either you are authenticating against an outside source (not common) or somehow you have been bitten by a bug in pgAdmin that set validto to an invalid date (more common).

Try this:

```
ALTER USER postgres VALID UNTIL 'infinity'; 
```

Or you can set the valid until value to something more limited if you want to lock the account after a certain time period.

# ios - 仅显示部分记录时如何编辑 nsfetchresults 记录？

> ID：15583682
> 
> 赞同：0
> 
> 时间：2013-03-23T05:20:09.037
> 
> 标签：ios, edit, nsfetchrequest, uitableview

我正在尝试从另一个视图控制器编辑 nsfetchresults 记录，如果显示我的所有数据库条目，它工作正常。但是当我按日期过滤表格并尝试编辑它时，我收到了这个错误

> 2013-03-22 23:09:02.895 easyDB[1079:907] *** -[UITableView _endCellAnimationsWithContext:] 中的断言失败，/SourceCache/UIKit/UIKit-2380.17/UITableView.m:1070 2013-03-22 23:09： 18.865 easyDB[1079:907] 捕获异常！
> 
> NSInternalInconsistencyException
> 
> 无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (6) 必须等于更新前该节中包含的行数 (2)，加上或减去数字从该部分插入或删除的行数（0 插入，0 删除）加上或减去移入或移出该部分的行数（0 移入，0 移出）。

我发送

```
 NSIndexPath *indexpath = (NSIndexPath*)sender;
            GlucoseDetailViewController *glucoseDetailsVC = (GlucoseDetailViewController*)segue.destinationViewController;
            GlucoseRecords *rec = [self.fetchedResultsController objectAtIndexPath:indexpath];
[glucoseDetailsVC setSentRecord:rec]; 
```

在编辑视图中

```
 [self.sentRecord setGlucose:[NSNumber numberWithInt:[[txtGlucoseReading text] intValue]]];

    [self.sentRecord setDate:self.dateToAdd];
    [self.sentRecord setMealType:[NSString stringWithString:self.strMealOption]];
    [self.sentRecord setQuickNote:[NSString stringWithString:self.strQuickNote]];
    [self.sentRecord setDeleted:[NSNumber numberWithBool:NO]];
    [self.sentRecord setWhoRecorded:[self.settings currentUser]];

    NSError *error;
    if (![[self.settings managedObjectContext] save:&error])
        NSLog(@"Failed to add default user with error: %@", [error domain]); 
```

FetchedResults 控制器

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil && [self.strCurrentEntetyName isEqualToString:self.strEntetyName] &&(self.filteChanged==[NSNumber numberWithBool:NO])) {
        return _fetchedResultsController;
    }

    self.filteChanged = [NSNumber numberWithBool:NO];
    self.strCurrentEntetyName = [NSString stringWithString:self.strEntetyName];

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:[self strEntetyName]];
    //NSEntityDescription *entity = [NSEntityDescription
    //                               entityForName:@"Records" inManagedObjectContext:[self.settings managedObjectContext]];

    if (self.isDateFilterSet==[NSNumber numberWithBool:NO])
    {

    fetchRequest.predicate = [NSPredicate predicateWithFormat:@" whoRecorded.username = %@ AND deleted=0", [self.settings.currentUser username]];
    }
    else
    {
        fetchRequest.predicate = [NSPredicate predicateWithFormat:@" (whoRecorded.username = %@) AND (deleted = 0) AND (date =>%@) AND (date<=%@)", [self.settings.currentUser username],self.dateMinSetFilter ,self.dateMaxSetFilter];

    }

    NSLog(@"User:%@",[self.settings.currentUser username]);

   // [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"date" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:100];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:[self.settings managedObjectContext] sectionNameKeyPath:nil
                                                   cacheName:nil];
    self.fetchedResultsController = theFetchedResultsController;

    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;

} 
```

我了解问题所在，但我看不到任何解决问题的好方法。我可以在编辑之前重置表格以显示所有条目，但我认为这不是一个好的解决方案。有没有更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:29:46.617

你是如何“只显示一些记录”的？使用 NSPredicate 过滤结果或其他什么？

我认为您需要定位问题，是因为您从另一个视图控制器操作一个表视图吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:47:35.553

试试这个代码：

在调用解析方法之前请写：`self.fetchedResultsController = nil;`

```
- (NSFetchedResultsController *)fetchedResultsController // attaches an NSFetchRequest to this UITableViewController
{
    if (_fetchedResultsController != nil )
    {
        return _fetchedResultsController;
    }

    NSLog(@"Length:: %d",[[_fetchedResultsController mutableCopy] length]);

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"YourEntityName"];
    [fetchRequest setIncludesSubentities:YES];

    // Sort by Application name
    NSSortDescriptor* sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    //Sort by CommandNameloca
    NSArray* sortDescriptors = [[NSArray alloc] initWithObjects: sortDescriptor1, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    [fetchRequest setFetchBatchSize:100];

    tempArr=[[NSMutableArray alloc]initWithArray:sortDescriptors];

    NSLog(@"****----- tempArr Count == %d",[tempArr count]);

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"date" cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;

    if (![self.fetchedResultsController performFetch:&error])
    {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    return _fetchedResultsController;
} 
```

请在日志中查看数组计数。它将显示您获得的总记录。请分享你的结果。好运.. ！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:36:29.370

找到了答案！

```
[self.tableView updateConstraintsIfNeeded]; 
```

需要将此行添加到

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller 
```

# java - 将字符串数组转换为双精度数组

> ID：15583684
> 
> 赞同：0
> 
> 时间：2013-03-23T05:20:22.450
> 
> 标签：java, arrays, parsing

我正在尝试将 txt 文件中的数字列表转换为数字数组。有 26 个数字，每个数字位于文本文件的不同行。我的代码是

```
import java.io.*;
public class rocket {

    public static void main(String[] args) throws IOException, FileNotFoundException
    {
        BufferedReader b = new BufferedReader(new InputStreamReader(new FileInputStream("/Users/Jeremy/Documents/workspace/altitude.txt")));
        String[] stringArray = new String[25];
        double[] doubleArray = new double[stringArray.length];
        for(int i=0; i<25; i++)
        {
            stringArray[i] = b.readLine();
            doubleArray[i] = Double.parseDouble(stringArray[i]);
        }
        for(int i = 0; i<doubleArray.length; i++)
        {
            System.out.println(doubleArray[i]);
        }
    }
} 
```

但是每次我运行它时，我都会得到一个数字格式异常。如果我尝试只打印出字符串，我会得到一个 indexOutOfBounds 异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:30:51.263

有问题你提到有26个字符串所以declate

```
String[] stringArray = new String[26]; 
```

并且当 readline 与 linbreak 返回时，会发生数字格式异常。要阅读行，您可以执行以下操作

```
 public String[] readLines(String filename) throws IOException {
        FileReader fileReader = new FileReader(filename);
        BufferedReader bufferedReader = new BufferedReader(fileReader);
        List<String> lines = new ArrayList<String>();
        String line = null;
        while ((line = bufferedReader.readLine()) != null) {
            lines.add(line);
        }
        bufferedReader.close();
        return lines.toArray(new String[lines.size()]);
    } 
```

所以按照这个逻辑，你可以通过

```
public static Double[] readLines(String filename) throws IOException {
    FileReader fileReader = new FileReader(filename);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    List<Double> lines = new ArrayList<Double>();
    String line = null;
    while ((line = bufferedReader.readLine()) != null) {
        lines.add(Double.parseDouble(line));
    }
    bufferedReader.close();
    return lines.toArray(new Double[lines.size()]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:30:32.917

```
String[] stringArray = new String[26]; 
```

试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T05:36:12.880

尝试

```
 BufferedReader b = new BufferedReader(
            new InputStreamReader(
                    new FileInputStream(
                            "D:/git-repo/general/misc_test/src/java/com/greytip/cougar/module/test/v2/controller/so/dump/data.txt")));

    List<String> lines = new ArrayList<String>();

    String line = null;
    while ((line = b.readLine()) != null) {
        lines.add(line);
    }

    String[] stringArray = lines.toArray(new String[lines.size()]);
    double[] doubleArray = new double[stringArray.length];
    for (int i = 0; i < stringArray.length; i++) {
        doubleArray[i] = Double.parseDouble(stringArray[i]);
    }

    for (int i = 0; i < doubleArray.length; i++) {
        System.out.println(doubleArray[i]);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T05:30:00.400

```
 import java.io.*;
    public class Rocket {

        public static void main(String[] args) throws IOException, FileNotFoundException
        {
            BufferedReader b = new BufferedReader(new InputStreamReader(new FileInputStream("/Users/Jeremy/Documents/workspace/altitude.txt")));
            String[] stringArray = new String[25];
            double[] doubleArray = new double[stringArray.length];
            for(int i=0; i<25; i++)
            {
                stringArray[i] = b.readLine();
                try{
                    doubleArray[i] = Double.parseDouble(stringArray[i]);
                }catch(Exception e)
                {
                    e.printStackTrace();
                }
            }
            for(int i = 0; i<doubleArray.length; i++)
            {
                System.out.println(doubleArray[i]);
            }
        }
    } 
```

请在将字符串解析为双精度时处理异常。

# ef-code-first - BreezeJs 无法为具有继承类的 EF Code First Schema 加载元数据

> ID：15583685
> 
> 赞同：1
> 
> 时间：2013-03-23T05:20:24.050
> 
> 标签：ef-code-first, entity-framework-5, breeze, table-per-type

今天刚开始试用 Breeze，长期 EF 用户 - 认为我在 Breeze 中发现了一个错误，但我可能做错了什么 - 想知道它是什么：

我在 EF Code First 中有一个简单的层次结构：

```
// For testimonials about the product line in general
public class Testimonial
{
    public int Id { get; set; }

    public string Text { get; set; }
}

// For testimonials specific to a single product
[Table("ProductTestimonial")]
public class ProductTestimonial : Testimonial
{
    public Product Product { get; set; }
} 
```

所以为了清楚起见，这里有 2 个表，Testimonial 和 ProductTestimonial，它们都有一个 Id 的 PK 和一个 Text 字段，其中一个也有一个对 Product 的 FK。这只是实现 Table Per Type 的一种简单方法。

所以我通过 WebApi 设置了 BreezeController：

```
[BreezeController]
public class EFController : ApiController
{
    private readonly EFContextProvider<EfDb> _db = new EFContextProvider<EfDb>();

    [HttpGet]
    public string Metadata()
    {
        return _db.Metadata();
    } 
```

然后我将它加载到微风.js 中：

```
var manager = new breeze.EntityManager('/api/ef');
manager.executeQuery(breeze.EntityQuery.from('Product'); 
```

*卡布拉莫。*例外。它说：

> 无法获取属性“propertyRef”的值：对象为空或未定义

在：

```
function convertFromODataEntityType(... {
    . . .
    var keyNamesOnServer = toArray(odataEntityType.key.propertyRef)... 
```

在哪里`odataEntityType.name == 'ProductTestimonial'`，`.key`果然是未定义的。

这是真的。分开来看，当我调用 executeQuery() 时，Breeze 在 WebApi 上点击元数据调用，我验证了调用并成功返回。从那里返回的大量 JSON 字符串包括：

```
{
    "name": "ProductTestimonial",
    "baseType": "Self.Testimonial",
    "navigationProperty": {
        "name": "Product",
        "relationship": "Self.ProductTestimonial_Product",
        "fromRole": "ProductTestimonial_Product_Source",
        "toRole": "ProductTestimonial_Product_Target"
    }
},
{
    "name": "Testimonial",
    "key": {
        "propertyRef": {
            "name": "Id"
        }
    }, 
```

所以看起来基本问题是元数据准确地将 ProductTestimonial 描述为一个继承类，其键在其他地方定义，但是 Breeze.js - 如果我理解正确的话 - 只是天真地检查 .key 属性而不考虑超类. 但是，我可能是错的，因为我对 Breeze 还很陌生。

**附录：**

我认为它在这里不相关，但如果它出现，是的，我在 WebApi 控制器上也有一个 IQueryable：

```
[HttpGet]
public IQueryable<Product> Products()
{
    return _db.Context.Products;
} 
```

另外，我认识到这里的一个潜在解决方法可能是放弃 TPT 并为每个没有继承的实体创建完整的类，但我真的在这里精简了我的示例 - 整个 EF 模型中有很多继承必须保留。如果是继承或微风，微风正在得到斧头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T07:27:12.577

## 编辑：从 v 1.3.1 起，Breeze 现在支持继承。

继承即将到来，但我们还没有一个固定的日期。[请为Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3083057-support-inheritence-in-the-object-model)上的功能投票。我们非常重视这些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T03:06:50.730

我不认为 manager.fetchEntityByKey 与继承一起工作——任何 Breeze 家伙都可以确认这是否正确吗？它似乎是从我的基类中获取继承的字段，而不是从我的派生类中获取的字段。我可以使用 entityQuery 获取完整的对象，但是我必须命名每个字段。当我这样做时，我仍然在 ko 绑定上遇到解析错误。

# jquery - 结合几个 find() 函数来显示匹配所有指定过滤器的结果

> ID：15583695
> 
> 赞同：0
> 
> 时间：2013-03-23T05:21:48.233
> 
> 标签：jquery, find

我正在尝试组合几个`find`函数，以便按多个数据属性过滤项目。我希望它返回与任何过滤器匹配的所有项目，并在删除其中一个过滤器时恢复为其余过滤器的更严格标准*（稍后我将添加一个排名算法 - 可能是 QuickSilver，但仍在弄清楚这一点- 为了首先显示更强的匹配项）*。

我不确定如何正确组合不同的`find`功能，以便它们能够正确地协同工作。目前，过滤器一次只能工作一个（以最后触发的为准）。我在这里发布了一个简单的函数示例：http: [//jsfiddle.net/chayacooper/WZpMh/13/](http://jsfiddle.net/chayacooper/WZpMh/13/)

* * *

**更新 -** @Sergei Gorjunov 的解决方案几乎就在那里，我只需要一些帮助来修改它以使用 OR 而不是 AND，以便它显示与任一过滤器匹配的产品（替换`&&`为`||`使功能停止工作）。

我还修改了大部分代码，使其不需要指定标记元素*（即`<li>`和`<td>`）*，并相应地更新了小提琴。

```
$(document).ready(function () {
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        $('#attributes-Colors').removeClass('active');
        $(this).parent().addClass('active');
        if (attrColor == 'All') {
            $('#content').find('*').show();
        } else {
            $('#content').find('li:not([data-color="' + attrColor + '"])').hide();
            $('#content').find('td:not([data-color="' + attrColor + '"])').hide();
            $('#content').find('[data-color ~="' + attrColor + '"]').show();
        }
        return false;
    });

    $('#attributes-Silhouettes *').click(function () {
        var attrStyle = $(this).data('style');
        $('#attributes-Silhouettes').removeClass('active');
        $(this).parent().addClass('active');
        if (attrStyle == 'All') {
            $('#content').find('*').show();
        } else {
            $('#content').find('li:not([data-style="' + attrStyle + '"])').hide();
            $('#content').find('td:not([data-style="' + attrStyle + '"])').hide();
            $('#content').find('[data-style ~="' + attrStyle + '"]').show(); 
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:43:04.220

我找到了如何过滤这些项目的方法。

```
$.fn.extend({
    filterMyItems: function() {
        function filterItems() {            
            var color = $('#filterColorOptions').find('li.active a').data('color'),
                style = $('#filterStyleOptions').find('li.active a').data('style');

            if (color == "All") color = ".+";
            if (style == "All") style = ".+";

            var colorPattern = new RegExp(color, 'i'),
                stylePattern = new RegExp(style, 'i');

            return (colorPattern.test($(this).data('color')) && stylePattern.test($(this).data('style')));
        }

        $(this).filter(filterItems).show();
        $(this).not(filterItems).hide();
    }
}); 

$(document).ready(function () {
    $('.filterOptions a').click(function(e){
        e.preventDefault();
        $(this).closest('.filterOptions').find('.active').removeClass('active');
        $(this).parent().addClass('active');
        $('#content li').filterMyItems();
    });    
}); 
```

链接到 jsfiddle：http: [//jsfiddle.net/WZpMh/7/](http://jsfiddle.net/WZpMh/7/)

# javascript - 是否可以跨站点共享 cookie？

> ID：15583703
> 
> 赞同：1
> 
> 时间：2013-03-23T05:22:52.353
> 
> 标签：javascript, http, cookies

问题很简单。
例如：当您登录 mail.google.com（google.com 域），然后您转到 youtube.com 并且您的 Google 帐户已经打开时，Google 会如何做。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:30:50.910

登录 Gmail 时，重定向首先会将您带到`https://accounts.google.com.au/accounts/SetSID?...`然后再到，`https://accounts.youtube.com/accounts/SetSID?...`因此设置了两组单独的 cookie。然后另一个重定向让您回到 Gmail。注销时也会发生同样的事情。

如果您随后删除 的所有 cookie `youtube.com`，您仍将登录到 Gmail，但不会登录 Youtube。

# javascript - 如何用javascript做到这一点？这就像一个切换，但我似乎没有找到切换功能

> ID：15583704
> 
> 赞同：1
> 
> 时间：2013-03-23T05:22:53.007
> 
> 标签：javascript, image, toggle, border

我正在尝试使用 javascript 而不是 jquery 来做到这一点。我想点击一张图片，然后图片会有边框，但如果我再次点击它，边框就会消失。不太清楚它是如何完成的，任何人都可以帮帮我吗？

```
allImages = document.getElementsByTagName("img");

    for(i=0;i<allImages.length;i++)
{
    allImages[i].onclick=function()
    {
    this.style.borderColor="red";
    this.style.borderStyle="solid";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:31:13.027

要切换带有 id 的图像，请尝试此代码

```
var img = document.getElementById('image-id');

if( ! img.hasBorder ) {

     img.style.border="2px solid #f00";
     img.hasBorder = true;

} else {

     img.style.border = "";
     img.hasBorder = false;

} 
```

* * *

更新代码

```
allImages = document.getElementsByTagName("img");

for(i=0; i< allImages.length; i++ )
{
    allImages[i].onclick = function( e )
    {
           this.style.border = ( this.style.border == '')? "2px solid red":'';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:32:33.880

你可以做的是创建两个类，一个有边框，第二个没有边框。

现在，当事件触发时检查第一类是否适用，然后将其删除并应用第二类。

**例子**

```
var test = document.getElementById("test");
var testClass = test.className;

testClass = ( testClass == "first") ? "second" : "first"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:24:49.460

尝试 ：

```
document.getElementById('id').style.border 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T05:32:16.220

尝试

**// 显示**

```
document.getElementById('element').style.border = 'red'; 
```

**// 隐藏**

```
document.getElementById('element').style.border = 'none'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T06:50:06.633

```
var img = document.getElementById('image-id');
img.style.border = img.style.border ? "" : "2px solid red"; 
```

# angularjs - AngularJS不一致的数据绑定

> ID：15583705
> 
> 赞同：0
> 
> 时间：2013-03-23T05:22:53.177
> 
> 标签：angularjs

我正在学习 AngularJS，我对选择元素的数据绑定有疑问。文本框的数据绑定无需任何类型的事件处理代码即可工作。一旦设置了 ng-model 属性，文本框就会在模型属性更改时更新，反之亦然。不需要 ng-change 属性。

但是，对于选择元素，我们需要编写将通过 ng-change 属性调用的函数。

为什么 angularjs 在没有文本框的 ng-change 属性的情况下处理数据绑定，但需要通过 ng-change 属性为选择元素调用的函数？

更新：在评论部分添加了小提琴。该示例来自 AngularJS in Action 手册。单击其中一个故事，更改文本框值并更新模型。更改下拉模型中的选择不会更新。

更新：在评论中添加了一个新的小提琴。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:13:30.570

我认为您的困惑可能是由于[选择的文档](http://docs.angularjs.org/api/ng.directive%3aselect)仍然不正确。（请参阅我的[Disqus 评论](http://docs.angularjs.org/api/ng.directive%3aselect#comment-683511872)。） `ng-model`可以而且应该与`select`. `ng-change`是可选的，它只是给你一个钩子，如果你想在每次选择的选项改变时做一些事情。

通常您应该`ng-options`与 select 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:14:23.277

我创建了一个[在这里](http://jsfiddle.net/aphg8/1/)工作的小提琴 - 问题实际上只是这里的虚拟数据。在原始小提琴中，在状态数组中为 {name:'Back Log'} 和 {name:'To Do'} 创建的对象与 {name:'Back Log'} 不同（不是 ===）和在虚拟故事对象中创建的 {name:'To Do'} 对象。

为了使示例工作，我将索引状态传递给 getStories 函数。但是我认为这实际上只是演示引起的混乱。（我也一直在研究 Angular in Action 的 MEAP，我认为它可以[像这样](http://jsfiddle.net/wBzdB/1/)简化一点，它使用简单的字符串状态，可以通过 === 测试

```
var getStories = function(statusesIndex) {
    var tempArray = [
        {title:'Story 00',
         description:'Description pending.',
        status: statusesIndex['To Do']
        },
        {title:'Story 01',
         description:'Description pending.',
         status: statusesIndex['Back Log']
        }
];
    return tempArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T06:51:38.853

如果我正确理解了您的问题，那么我认为您的猜测是错误的，因为对于选择框，您不必调用 ng-change 事件来获取所选选项。

```
<select ng-model='select'>
  <option>....</option>
  <option value='one'>One</option>
  <option value='Two'>Two</option>
</select>

// Your selected option will print below... without invoking ng-change
<div>You selected: {{select}}</div> 
```

演示：http: [//jsfiddle.net/jenxu/1/](http://jsfiddle.net/jenxu/1/)

# c# - 如何在c#中识别图像是灰度图像还是彩色图像

> ID：15583706
> 
> 赞同：0
> 
> 时间：2013-03-23T05:23:16.227
> 
> 标签：c#, image, colors, grayscale

我需要验证具有高度属性的文件夹中的大量图像（jpg、tif、png）。但是彩色图像和灰度图像的验证规则不同。

但我的问题是

如何在c#中识别图像是灰度图像还是彩色图像？

至少从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:18:38.180

```
bool IsGreyScale(Bitmap YourCurrentBitmap)
{
Color c;
for(int i=0; i < YourCurrentBitmap.Width; i++)
     for(int j=0; j < YourCurrentBitmap.Height; j++)
          {
               c = YourCurrentBitmap.GetPixel(i,j);
               if(!(c.R == c.G == c.B)) return false;
          }
return true;
} 
```

但是这种方法虽然相对较慢。

# python - SQLAlchemy：相同类型的多个外键

> ID：15583707
> 
> 赞同：0
> 
> 时间：2013-03-23T05:23:33.437
> 
> 标签：python, sqlalchemy

我有一个类似的课程：

```
class Component(Base):
    __tablename__ = 'components'

    id = Column(Integer, primary_key=True)
    .
    .
    .
    .
    alternate1_id = Column(Integer, foreignkey("components.id"), nullable=True)
    alternate2_id = Column(Integer, foreignkey("components.id"), nullable=True)
    alternate3_id = Column(Integer, foreignkey("components.id"), nullable=True)

    def __init__(self, catalog_number, component_type, manufacturer_pn, description):
            self.catalog_number = catalog_number
            self.component_type = component_type
            self.manufacturer_pn = manufacturer_pn
            self.description = description

    def __repr__(self):
            return "<Component('%s', '%s', '%s', '%s')>" % (self.catalog_number,
                                                            self.component_type, 
```

Alternate1、2 和 3 是可选字段，它们指向当前实例的替代组件。

如何创建三个关系，每个关系都引用每个 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:57:19.203

请参阅处理与 的参数有关的[多个连接路径](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#handling-multiple-join-paths)的示例。`foreign_keys``relationship`

# vb.net - 获取当前 RDLC 报告的文件名

> ID：15583709
> 
> 赞同：0
> 
> 时间：2013-03-23T05:24:19.997
> 
> 标签：vb.net, reportviewer, rdlc

我需要获取当前`RDLC`显示在`ReportViewer`. 有没有类似的东西

```
Dim filename As String = Me.ReportViewer1.LocalReport.GetFilename? 
```

因为我不想做以下事情。

```
Dim path As String() = Me.ReportViewer1.LocalReport.ReportPath.Split("\")
Dim filename As String = path(path.Length - 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:18:26.753

[ReportViewer](http://msdn.microsoft.com/en-US/library/microsoft.reporting.winforms.reportviewer_members%28v=vs.100%29.aspx)或其[LocalReport](http://msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.localreport_members%28v=vs.100%29.aspx)属性中似乎没有任何成员可以让您执行此操作。

但是，您也许可以使用[Path.GetFileName 之](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)类的方法来执行以下操作：

```
Dim filename As String = Path.GetFileName(Me.ReportViewer1.LocalReport.ReportPath) 
```

所以你没有做字符串拆分操作等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:34:57.413

我完全同意，`NKVU's answer`另外，如果你想得到`filename`没有它的`extension`，你可以使用[**这个**](http://msdn.microsoft.com/en-IN/library/system.io.path.getfilenamewithoutextension.aspx)，

```
Path.GetFileNameWithoutExtension(Me.ReportViewer1.LocalReport.ReportPath) 
```

# html - 联系表格 - 回复垃圾邮件

> ID：15583713
> 
> 赞同：0
> 
> 时间：2013-03-23T05:25:02.260
> 
> 标签：html, asp.net, macos, email, dns

我的前同事在离开之前为我们的一位酒店客户写了一个基本的 aspx 联系表，一切都很好（据我所知），直到本周出现托管问题。它基本上只是将表格详细信息发送到酒店的电子邮件地址。

本周发送测试邮件时，我注意到虽然在酒店结束时收到的电子邮件没有任何问题 - 他们对我的电子邮件地址的回复通过我的 mac 邮件过滤器被标记为垃圾邮件。

我应该指出，我用来测试表单的电子邮件地址是一个雅虎地址，它被添加到我的 imacs 邮件帐户中，当检查雅虎本身时，它不在垃圾邮件文件夹中，并且被怀疑显示在收件箱中。- 它仅在 imac 上突出显示为垃圾邮件（黄色）。所以希望我担心的很少！

这是去度假前的最后一分钟担心！- 基本上我对邮件发送不太了解 - （我是一名设计师，希望他从未接受过这份工作！）我只是想确认垃圾邮件问题是否值得担心，如果是的话，它是否是一个问题酒店端还是跟表？

我希望这些表格通过将邮件发送给他们来完成它的工作，所以要么只是一个挑剔的 iMac，它的回复地址有问题，要么是与联系表格本身无关的其他东西。如果是这种情况，有没有建议我可以向他们提供他们可以添加到回复中的任何内容以阻止它被垃圾邮件发送吗？

如果有人能在离开之前提供任何快速的建议来挽救我的想法——我会非常感激的！

谢谢

更新：按照以下评论 - 澄清 - 联系表格向酒店发送一封包含客户问题和评论的电子邮件 - 收到没有问题。问题似乎是当酒店回复询问时，他们的回复向我发送了垃圾邮件（仅限 Mac）。电子邮件的 mx 记录指向以前的域，并且该站点由我们托管 - 以前的设计者具有 DN 设置的控制面板访问权限。

# objective-c - UIRefreshControl - 由于未捕获的异常而终止应用程序

> ID：15583714
> 
> 赞同：0
> 
> 时间：2013-03-23T05:25:05.823
> 
> 标签：objective-c, uirefreshcontrol

我在 UITableViewController 内的表视图上实现了 UIRefreshControl。今天我的朋友（第一个测试者）正在玩这个应用程序，他能够通过拉动刷新来使崩溃，而当它刷新时，又很快地拉动了几次。我知道这不是一件常见的事情，但我可以很容易地重新创建它。我猜我实现刷新控件的方式有问题，因为我尝试使用 Gmail 应用程序重新创建它并且它没有崩溃。

这是我得到的错误：

> [1008:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString stringByAppendingString:]: nil argument' *** First throw call stack: (0x343f32a3 0x3c08d97f 0x343f31c5 0x34c5c5e1 0x496b5 0x3624654d 0x3622b313 0x362427cf 0x361fe803 0x35fa8d8b 0x35fa8929 0x35fa985d 0x35fa9243 （0x35fa9051 0x35fa8eb1 0x343c86cd 0x343c69c1 0x343c6d17 0x34339ebd 0x34339d49 0x37efb2eb 0x3624f301 0x46da5 0x3c4c4b20）libc++abi.dylib：终止调用抛出异常

在 ViewDidLoad 下

```
// pull to refresh
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(updateTableView:) forControlEvents:UIControlEventValueChanged];
[self setRefreshControl:refreshControl]; 
```

这是 updateTableView 方法：

```
- (void)updateTableView:(id)sender {

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMM d, h:mm:ss a"];
    NSString *lastUpdated = [NSString stringWithFormat:@"Last updated on %@", [formatter stringFromDate:[NSDate date]]];

    self.refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:lastUpdated];

    if(topOptions.selectedSegmentIndex  == 0) {
        //fetch the feed
        _feed = [[FetchData alloc] initFromURLWithString:@"some json file" completion:^(JSONModel *model, JSONModelError *err) {

            [self.tableView reloadData];
            [(UIRefreshControl *)sender endRefreshing];
        }];
    } else if (topOptions.selectedSegmentIndex  == 1) {
        //fetch the feed
        _feed = [[FetchData alloc] initFromURLWithString:@"another json file" completion:^(JSONModel *model, JSONModelError *err) {

            [self.tableView reloadData];
            [(UIRefreshControl *)sender endRefreshing];
        }];

    }
} 
```

我猜测（来自 nil 参数）通过多次执行刷新请求，它会达到无法找到值的点？我对此有点陌生，所以任何想法都非常感谢。

如果您需要代码的任何其他部分，请告诉我。

# asp.net - 具有可为空参数的 MVC 操作方法

> ID：15583717
> 
> 赞同：1
> 
> 时间：2013-03-23T05:25:52.613
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, routing

我正在使用参数值调用一个动作。但它没有将参数值分配给操作方法参数。

```
 public ActionResult UserDetail(long? userId)
    {

    } 
```

> localhost/Admin/UserDetail/10 --> 10 没有传递给 userId

但

> localhost/Admin/UserDetail/?userId=10 --> 这行得通

是什么导致第一个网址不起作用？有什么帮助吗？

更新：

在 global.asax 中尝试过这个仍然无法正常工作

```
 routes.MapRoute("ExistSiteUser",
              "UserDetail/{userId}",
               new
               {
                   controller = "Admin",
                   action = "UserDetail",
                   // nothing optional 
               }
         );
        routes.MapRoute("NewSiteUser",
             "UserDetail",
              new
              {
                  controller = "Admin",
                  action = "UserDetail",
                  userId = UrlParameter.Optional 
              }
        ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:27:49.397

将参数名称更改为“id”而不是“userid”，然后尝试....它应该可以工作

```
public ActionResult UserDetail(long? id)
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T05:28:26.743

将此用户 ID 替换为 id ：-

```
public ActionResult UserDetail(long? id)
    {

    } 
```

# c# - 处理错误——我应该在“事件驱动”应用程序中使用异常或事件吗？

> ID：15583720
> 
> 赞同：0
> 
> 时间：2013-03-23T05:26:20.200
> 
> 标签：c#, oop

我正在开发一个像脚本一样工作的小型应用程序。我会给它一些网址，它会从中提取一些有用的信息。当它下载文件和解析信息时，它也会引发事件，以便有一个监听器，它将能够读取它想要的所有内容。

系统基本如下：

```
class UrlInfoExtractor {
    ...

    public void Run() {
        ...
    }

    ...
} 
```

与往常一样，存在出错的风险（即，目前没有互联网）。起初我认为让该`Run()`方法抛出我自己的一些异常（`BadLoginException`,`BadUrlException`等）是个好主意。但是由于已经有这么多已定义的事件，我开始认为将错误作为事件弹出可能会更好（我假设无论我遇到什么错误，我都会停止该过程）。整个系统的方法会更加……一致。另一方面，如果开发人员不关心错误事件，它会允许错误被忽视。

在这种情况下，我是更好地使用异常还是引发事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:34:34.873

如果它真的是一个错误，我会提出一个例外。使用事件的缺点是，如果调用者没有为异常事件添加处理程序，他们将不会收到错误通知，并且可能会假设一切正常。

如果你反对引发异常，你总是可以返回一个状态而不是你的函数是一个 void。这可能使您可以避免对控制流使用异常，但您仍然可以向调用者返回有关调用状态的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:49:43.357

如果您无论如何要停止脚本或应用程序，我建议您将异常冒泡。您可以在需要清理或保存状态的任何地方捕获并重新抛出它。将所有异常“隐藏”在事件后面并不是一个好主意。

如果您经常期待异常，如果您打算保持脚本运行，john 关于返回值而不是 void 的建议将使实现更清晰。

作为旁注，一致并不一定等同于“好”。尽可能使用语言功能来达到目的。

# javascript - JavaScript：不透明度应降低到 0，然后变为负数

> ID：15583723
> 
> 赞同：0
> 
> 时间：2013-03-23T05:26:37.133
> 
> 标签：javascript, opacity

我有一个 javaScript 函数。

JavaScript：

```
function opacZero(object){
    var presentOpacity = (object.style.opacity);
    object.style.opacity =presentOpacity-0.2;
    setTimeout( function(){opacZero(object)}, 40);
} 
```

现在，当我将一些 eobject 传递给这个函数时，它的不透明度应该减少到 0 并超过 0（因为我没有在任何地方清除超时）。但这并没有发生。不透明度降低到 0.20000000000000007 并且不再降低。但是当我减去 0.3（或更多）而不是 0.2 时，它给出了预期的结果。但为什么不使用小于 0.2 的数字。我不知道为什么会这样。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:10:16.303

这是由于 Javascript 如何处理浮点数。查看[这个 SO question](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)以获取有关如何解决它的一些建议。

**编辑**

这是一种解决方法：

```
function opacZero(object){
    var presentOpacity = Math.floor(object.style.opacity * 10);
    object.style.opacity = (presentOpacity - 2) / 10;
    setTimeout( function(){opacZero(object)}, 40);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:26:01.900

似乎更直接地检查麻烦的小值并强制它们`0`. 一旦你点击停止计时器也可能是一个好主意`0`：

```
function opacZero(object){
    var newOpacity = object.style.opacity - 0.2;
    if (newOpacity < 0.2) {
        newOpacity = 0;
    }
    object.style.opacity = newOpacity;
    if (newOpacity !== 0) {
        setTimeout(function(){opacZero(object)}, 40);
    }
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/8qkFN/](http://jsfiddle.net/jfriend00/8qkFN/)

或者，如果您想要更简短的内容：

```
function opacZero(object){
    object.style.opacity = object.style.opacity < 0.4 ? 0 : object.style.opacity - 0.2;
    if (object.style.opacity != 0) {
        setTimeout(function(){opacZero(object)}, 40);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T06:31:21.537

这是一种可能的解决方法：

```
function opacZero(object){
    curOpac = curOpac < 0.1 ? 0 : curOpac - 0.2;
    object.style.opacity = curOpac;
    setTimeout( function(){
        opacZero(object)
    }, 400);
    console.log( curOpac );
}

var test = document.getElementById( 'test' ),
    curOpac = 1;
test.style.opacity = 1;
opacZero( test ); 
```

[http://jsfiddle.net/daCrosby/bhTNC/1/](http://jsfiddle.net/daCrosby/bhTNC/1/)

# svg - 如何根据鼠标移动事件在 SVG 中绘制矩形

> ID：15583724
> 
> 赞同：2
> 
> 时间：2013-03-23T05:26:42.183
> 
> 标签：svg, jquery-svg

我已经创建了 SVG 图表。我想放大该图表。对于缩放，我需要绘制矩形，即选择标记来选择区域以放大图表。如何在鼠标移动事件中绘制矩形。

1.鼠标按下事件触发。（标记的起始位置）

2.开始拖动（触发鼠标移动事件）->在该事件中需要根据鼠标移动绘制矩形

3.  drop（触发鼠标事件）->清除矩形

请参考下面的截图。

![在此处输入图像描述](../Images/888f088d276ffe35b8e130d87bcfec8a.png)

如何根据鼠标移动绘制矩形？

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T07:37:41.587

这是一个可能的解决方案：

在你的 SVG 的末尾（通过这种方式，它将被绘制在所有元素上）添加一个像这样的矩形

```
<rect id="zoom_area" x=0 y=0 width=0 height=0 onmouseup="endDrag(evt)" style="fill: white; stroke:black; stroke-width:2px; opacity:0.5"/> 
```

在您的网格上添加事件`onmouseup="endDrag(evt)"`和`onmousemove="moveMouse(evt)"`

现在的javascript：

```
var zoom_box = {};

function startDrag(evt){
    var offset = $("#bounds_grid").offset(); // Take the offset from the grid, change the ID as you need.
    evt.stopPropagation();
    zoom_box["start_x"] = evt.clientX-offset.left;
    zoom_box["start_y"] = evt.clientY-offset.top;
    zoom_box["boxing"] = true;
    $('#zoom_area').attr("x",zoom_box["start_x"]);
    $('#zoom_area').attr("y",zoom_box["start_y"]);
}

function endDrag(evt){
    var offset = $("#bounds_grid").offset();
    evt.stopPropagation();
    zoom_box["end_x"] = evt.clientX-offset.left;
    zoom_box["end_y"] = evt.clientY-offset.top;
    zoom_box["boxing"] = false;

    $('#zoom_area').attr("width",0);
    $('#zoom_area').attr("height",0);
}

function moveMouse(evt){
    var offset = $("#bounds_grid").offset();
    evt.stopPropagation();
    if(zoom_box["boxing"]){
        zoom_box["end_x"] = evt.clientX-offset.left;
        zoom_box["end_y"] = evt.clientY-offset.top;
        $('#zoom_area').attr("width",(zoom_box["end_x"]-zoom_box["start_x"]));
        $('#zoom_area').attr("height",(zoom_box["end_y"]-zoom_box["start_y"]));
    }
} 
```

注意偏移量：这样它会从文档的边缘偏移

# eclipse - Eclipse PyDev (Jython) 是否从 M2Eclipse 中提取类路径？

> ID：15583726
> 
> 赞同：2
> 
> 时间：2013-03-23T05:27:12.147
> 
> 标签：eclipse, maven, pydev, jython, m2eclipse

在尝试使用 PyDev 在 Eclipse 中运行 Jython 脚本时，我注意到 Jython 运行配置没有从 maven/m2eclipse 中提取 java 类路径值。

有没有人配置过 eclipse 以便 PyDev 从 maven 中提取正确的类路径？

笔记：

*   我实际上可以运行 jython 脚本，并从 jre 导入类，但是在解释 Jython 脚本时，我的 maven 依赖项不会出现在类路径中
*   [我已经看到了使用 Jython 和 M2Eclipse](https://stackoverflow.com/questions/1602427/using-jython-with-m2eclipse)的问题/答案，并使用了 maven 插件来执行 jython 脚本，但这不是我感兴趣的

谢谢你们。

更新：查看扩展 PyDev 插件以使用项目类路径（容器）初始化 jython 运行配置。试图找出我必须依赖哪些扩展才能访问 .classpath 文件。

更新：想出了我需要改变什么以及如何改变。现在正在努力。

其他人似乎有同样的问题，并且可能已经解决了：[https ://github.com/Kbrowder/PyJDT](https://github.com/Kbrowder/PyJDT)

编辑：过早发布，更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:51:23.347

原来有人已经写了一个 eclipse 插件来解决这个确切的问题。

该插件名为 PyJDT：[https ://github.com/Kbrowder/PyJDT](https://github.com/Kbrowder/PyJDT)

使用 PyDev 在 Eclipse Juno 上对其进行了测试。

谢谢[K. Browder](https://github.com/Kbrowder)

# c# - 了解使用多个后台工作人员

> ID：15583727
> 
> 赞同：1
> 
> 时间：2013-03-23T05:27:15.053
> 
> 标签：c#, backgroundworker

例如，我有一个包含 3 个项目的列表视图。每个项目都包含一个文件夹路径列和一个文件夹中文件数量的列。

如果我启动一个单独的后台工作人员来计算每个文件夹中的文件，我会得到一个意想不到的结果。我想我已经找到了问题，但我不知道如何解决它。

在下面的示例中，我使用两种不同的方法计算了每个文件夹中的文件；第一种方法为每个文件夹创建一个后台工作程序，每个后台工作程序在计算文件时同时运行。第二种方法创建一个后台工作人员，该工作人员按顺序计算每个文件夹中的文件。连续计数确实有效，而同时计数则无效。

问题似乎出在 GetPicturesConcurrently() 方法中，特别是在以下行中：

```
fileCounter.DoWork += new DoWorkEventHandler((obj, e) => CountFilesInFolder(item.Text)); 
```

似乎正在发生的事情是，实际传递给 CountFilesInFolder(string) 每次调用的字符串最终会使用最后一个创建的后台工作人员的字符串到达​​方法中；好像 item.Text 中的字符串是通过引用而不是值传递的。所以我最终一遍又一遍地计算同一个文件夹中的文件。

当我在后台工作程序创建时 Break 时，我可以看到每次都传递了正确的字符串；当我在 CountFilesInFolder 上中断时，每次调用都会处理输入的最后一个字符串。

这是一个演示问题的示例：

```
public partial class Form1 : Form
{
    private ConcurrentDictionary<string, int> MyFiles;
    private List<string> Folders;

    public Form1()
    {
        MyFiles = new ConcurrentDictionary<string,int>();
        Folders = new List<string>();

        InitializeComponent();
        PopulateListview();
    }

    private void PopulateListview()
    {
        ListViewItem item1 = new ListViewItem();
        ListViewItem item2 = new ListViewItem();
        ListViewItem item3 = new ListViewItem();

        item1.Text = @"V:\";
        item2.Text = @"D:\";
        item3.Text = @"C:\";

        item1.SubItems.Add("");
        item2.SubItems.Add("");
        item3.SubItems.Add("");

        listView1.Items.Add(item1);
        listView1.Items.Add(item2);
        listView1.Items.Add(item3);
    }

    private void GetPicturesInSeries()
    {
        Reset();

        foreach (ListViewItem item in listView1.Items)
        {
            Folders.Add(item.Text);
        }

        BackgroundWorker fileCounter = new BackgroundWorker();
        fileCounter.DoWork += new DoWorkEventHandler((obj, e) => GetPictures());
        fileCounter.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, e) => UpdateCountListView());
        fileCounter.RunWorkerAsync();            
    }        

    private void GetPicturesConcurrently()
    {
        Reset();

        foreach (ListViewItem item in listView1.Items)
        {
            BackgroundWorker fileCounter = new BackgroundWorker();
            fileCounter.DoWork += new DoWorkEventHandler((obj, e) => CountFilesInFolder(item.Text));
            fileCounter.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, e) => UpdateCountListView(item.Index));
            fileCounter.RunWorkerAsync();               
        }

    }

    private void GetPictures()
    {
        foreach (string folder in Folders)
        {
            CountFilesInFolder(folder);
        }
    }

    private void CountFilesInFolder(string folder)
    {
        DirectoryInfo dirInfo = new DirectoryInfo(folder);

        IEnumerable<FileInfo> files = dirInfo.EnumerateFiles();

        int count = files.Count();

        MyFiles.AddOrUpdate(folder, count, (key, oldvalue) => files.Count());

    }

    private void UpdateCountListView(int index)
    {
        string key = listView1.Items[index].Text;

        int count;
        MyFiles.TryGetValue(key,out count);

        listView1.BeginUpdate();
        listView1.Items[index].SubItems[1].Text = count.ToString();
        listView1.EndUpdate();
        listView1.Refresh();
    }

    private void UpdateCountListView()
    {
        listView1.BeginUpdate();

        foreach (ListViewItem item in listView1.Items)
        {
            string key = item.Text;

            int count;
            MyFiles.TryGetValue(key, out count);

            listView1.Items[item.Index].SubItems[1].Text = count.ToString();
        }

        listView1.EndUpdate();
        listView1.Refresh();
    }

    private void Reset()
    {
        listView1.BeginUpdate();
        foreach (ListViewItem item in listView1.Items)
        {
            item.SubItems[1].Text = "";
        }
        listView1.EndUpdate();
        listView1.Refresh();

        Folders.Clear();
        MyFiles.Clear();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:49:41.173

我认为您可能正在修改捕获的变量，`GetPicturesConcurrently()`因此在使用它之前对其进行更改以制作变量的副本，如下所示：

```
private void GetPicturesConcurrently()
{
    Reset();

    foreach (ListViewItem item in listView1.Items)
    {
        var copy = item;
        BackgroundWorker fileCounter = new BackgroundWorker();
        fileCounter.DoWork += new DoWorkEventHandler((obj, e) => CountFilesInFolder(copy.Text));
        fileCounter.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, e) => UpdateCountListView(copy.Index));
        fileCounter.RunWorkerAsync();               
    }
} 
```

其次，您`CountFilesInFolder()`可能会两次枚举所有文件：

```
private void CountFilesInFolder(string folder)
{
    DirectoryInfo dirInfo = new DirectoryInfo(folder);

    IEnumerable<FileInfo> files = dirInfo.EnumerateFiles();

    int count = files.Count();

    MyFiles.AddOrUpdate(folder, count, (key, oldvalue) => files.Count());
} 
```

如果在您调用时`folder`已经存在，那么它将再次调用 - 这将再次枚举所有文件！`MyFiles``AddOrUpdate``files.Count()`

如果不可能`folder`已经在，`MyFiles`那么只需打电话`MyFiles.Add()`而不是`MyFiles.AddOrUpdate()`

如果可能*已经*`folder`存在，`MyFiles`则将其更改为：

`MyFiles.AddOrUpdate(folder, count, (key, oldvalue) => count);`

# c# - 单个 aspx 页面上的两个 modalpopup

> ID：15583745
> 
> 赞同：2
> 
> 时间：2013-03-23T05:29:26.093
> 
> 标签：c#, ajax

我在我的单个 .aspx 页面中使用了两个弹出扩展器，这两个都没有弹出，但是当我删除这两个中的任何一个时，一个弹出很好。

```
<asp:Button ID="btnShowPopup" runat="server" style="display:none" /> 
<asp:Button ID="btnshowpopupisbn" runat="server" style="display:none" />  

<asp:ModalPopupExtender ID="ModalPopupExtender1"     runat="server"TargetControlID="btnShowPopup" PopupControlID="pnlpopup"
CancelControlID="btnCancel" BackgroundCssClass="modalBackground"     PopupDragHandleControlID="pnlpopup" >
    </asp:ModalPopupExtender>   
 <asp:Panel ID="pnlpopup" runat="server" CssClass="popup" >
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
</ContentTemplate>
</asp:UpdatePanel>
</asp:Panel>

 <asp:ModalPopupExtender ID="ModalPopupExtender2" runat="server"       TargetControlID="btnshowpopupisbn" PopupControlID="pnlpopupisbn"   cancelControlID="btnCancel" BackgroundCssClass="modalBackground"    PopupDragHandleControlID="pnlpopup"></asp:ModalPopupExtender>
<asp:Panel ID="pnlpopupisbn" runat="server" CssClass="popup" Visible="False" >
<asp:UpdatePanel ID="UpdatePanel2" runat="server">

 <ContentTemplate>
 </ContentTemplate>
</asp:UpdatePanel> 
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:35:11.340

不要将属性 visible 设置为 false 。将其设置为 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:37:43.923

您不需要`Visible="False"`在面板上提供属性，当您使用 ModalPopupExtender 时会处理它。我刚刚尝试使用 2 个模式弹出窗口，效果很好。

 `````
<div>
        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>
        <asp:Button ID="Button1" runat="server" Text="Popup 1" />
        <asp:ModalPopupExtender ID="ModalPopupExtender2" runat="server" PopupControlID="Panel1"
            TargetControlID="Button1" OkControlID="Button2" BackgroundCssClass="ModalPopupBG">
        </asp:ModalPopupExtender>
        <asp:Panel ID="Panel1" runat="server" CssClass="popup">
            Some Content in Panel 1<br />
            <asp:Button ID="Button2" runat="server" Text="Close" />
        </asp:Panel>
        <asp:Button ID="Button3" runat="server" Text="Popup 2" />
        <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" PopupControlID="Panel2"
            TargetControlID="Button3" OkControlID="Button4" BackgroundCssClass="ModalPopupBG">
        </asp:ModalPopupExtender>
        <asp:Panel ID="Panel2" runat="server" CssClass="popup">
            Some Content in Panel 2<br />
            <asp:Button ID="Button4" runat="server" Text="Close" />
        </asp:Panel>
    </div> 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:46:13.297

你可以做 Panel Visible="False"``

# c# - 如何在一个字符串中获取所有活动形式的控件的值并将它们连接起来？

> ID：15583756
> 
> 赞同：-6
> 
> 时间：2013-03-23T05:31:26.107
> 
> 标签：c#

如何在一个字符串中获取所有活动形式控件的值并使用 C# 将它们连接起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:46:38.483

这取决于你想要什么，但它可能很简单：

```
private void button1_Click(object sender, EventArgs e)
{
    MessageBox.Show(ProcesControls(this));
}

private string ProcesControls(Control parent)
{
    string s = "";
    foreach (Control c in parent.Controls)
    {
        if (c.HasChildren)
            s+=ProcesControls(c);

        s += c.Text;
    }
    return s;
} 
```

# c# - 种子初始化具有一对多和一对一关系的实体

> ID：15583758
> 
> 赞同：3
> 
> 时间：2013-03-23T05:32:19.727
> 
> 标签：c#, entity-framework, ef-code-first, sql-server-express

我正在尝试使用属性、人员、地址和租赁四个表的种子数据初始化我的 SQL 数据库。问题是在 Person、Address 和 Lease 实体中填充种子数据。当我从包管理顾问窗口运行 update-database -force 时，我收到此错误“更新条目时发生错误。有关详细信息，请参阅内部异常”。Property 表是四个表中唯一一个在运行 update-database 后填充种子数据的表。

我假设这个问题是由于一对一和一对多的关系使这个数据库设计复杂化，并且希望任何帮助解释为什么我的种子数据无法填充租约，人员，和地址实体。

数据库图：

![在此处输入图像描述](../Images/dfbaae2d797cdfc94257cd55c4745409.png)

```
protected override void Seed(PropertyContext context)
{   
    GetProperty().ForEach(c => context.Properties.Add(c));
    context.SaveChanges();
    GetAddress().ForEach(c => context.Address.Add(c));
    context.SaveChanges();
    GetTenant().ForEach(c => context.Person.Add(c));
    context.SaveChanges();
    GetLease().ForEach(c => context.Leases.Add(c));
    context.SaveChanges();
}

private static List<Property> GetProperty()
{
    var property = new List<Property> {
        new Property
        {
            PropertyId = 1,
            PropName = "Test",
            Address = "13265 Test St.",
            Bathrooms = 3,
            Bedrooms = 2,
            Garage = 2,
            SqFeet= 1400,
            Notes = "Give me a note",
            DateCreated = DateTime.Now,
        }
    };
    return property;
}

private static List<Address> GetAddress() 
{
    var address = new List<Address>{
        new Address
        {
            AddressId = 1,
            City = "Corona",
            State = "CA",
            ZipCode = "92883"
        }
    };
    return address;
}

private static List<Person> GetTenant()
{ 
    var person = new List<Person>{
        new Person
        {
            PersonId = 1,
            FirstName = "Test",
            LastName = "Man",
            EmailAddress = "test@gmail.com",
            Employer = "Verizonwireless",
            JobTitle = "Baseline Tech",
            PropertyOwner = false,
            Notes = "None",
            DateCreated = DateTime.Now,
            LeaseId = 1
         }
    };
    return person;
}

private static List<Lease> GetLease()
{
    var lease = new List<Lease> {
        new Lease
        {
            LeaseId = 1,

            StartDate =DateTime.Today,
            EndDate = DateTime.Now.AddDays(30),
            LeaseAmount = 1550,
            SecurityDeposit = 1550,
            PetDeposit = 0.0,
            OtherDeposit = 0.0,
            Notes = "None",
            LeaseStatus = "Avialable",
            DateCreated = DateTime.Now,
            PropertyId = 1
         }
    };
    return lease;
}

public class Address
{
    [Key]
    [ForeignKey("Property")]
    public int AddressId { get; set; }

    [Required(ErrorMessage = "City name is required.")]
    [MaxLength(35)]
    public string City { get; set; }

    [Required(ErrorMessage = "State name is required.")]
    [Display(Name = "State")]
    [MaxLength(2)]
    public string State { get; set; }

    [Required(ErrorMessage = "Postal code is required.")]
    [Display(Name = "Zip/Postal Code")]
    [MaxLength(5)]
    public string ZipCode { get; set; }

    public virtual Property Property { get; set; }
} 
```

具有一对一关系的模型类：

```
public class Address
{
    [Key]
    [ForeignKey("Property")]
    public int AddressId { get; set; }

    [Required(ErrorMessage = "City name is required.")]
    [MaxLength(35)]
    public string City { get; set; }

    [Required(ErrorMessage = "State name is required.")]
    [Display(Name = "State")]
    [MaxLength(2)]
    public string State { get; set; }

    [Required(ErrorMessage = "Postal code is required.")]
    [Display(Name = "Zip/Postal Code")]
    [MaxLength(5)]
    public string ZipCode { get; set; }

    public virtual Property Property { get; set; }
}

 public class Property 
{
    public Property() 
    {
        DateCreated = DateTime.Now;
    }

    public int PropertyId { get; set; }

    [Required(ErrorMessage = "Property name is required.")]
    [Display(Name = "Property Name")]
    [MaxLength(75)]
    public string PropName { get; set; }

    [Required(ErrorMessage = "Property address is required.")]
    [MaxLength(200)]
    public string Address { get; set; }

    [Required(ErrorMessage = "Size of the property is required.")]
    [Display(Name = "SQ Feet")]
    public int SqFeet { get; set; }

    [Required(ErrorMessage = "Number of bedrooms is required. Enter zero for none.")]
    public int Bedrooms { get; set; }

    [Required(ErrorMessage = "Number of bathrooms is required.")]
    public int Bathrooms { get; set; }

    public int Garage { get; set; }   // Stores an index value for a dropdown list

    [MaxLength(500, ErrorMessage = "Max number of characters is 500.")]
    public string Notes { get; set; }

    [Required]
    public DateTime DateCreated { get; set; }

} 
```

# php - 确定PHP函数所属的扩展？

> ID：15583765
> 
> 赞同：1
> 
> 时间：2013-03-23T05:33:18.977
> 
> 标签：php, php-extension

有时我在 PHP 手册中找到一个我想使用的函数，但是当我尝试使用它时 - 它是未定义的。

我怎样才能始终如一地找到一个函数属于哪个扩展？它似乎没有写在 PHP 手册中。

例如，`mb_strlen`属于`mbstring`分机。

给定 A，我如何始终找到 B？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T05:37:17.550

它在手册中。请参阅左侧的侧边栏：

> ```
> Multibyte String
> Multibyte String Functions 
> ```

单击其中任何一个，然后转到[介绍](http://www.php.net/manual/en/intro.mbstring.php)以阅读有关扩展的信息。然后查看[安装/配置](http://www.php.net/manual/en/mbstring.setup.php)页面。

# angularjs - AngularJS ng-options 在 ng-repeat 中的自定义指令中

> ID：15583772
> 
> 赞同：1
> 
> 时间：2013-03-23T05:34:03.883
> 
> 标签：angularjs, angularjs-directive, angularjs-ng-repeat

你能帮我找到一种方法来设置和获取放置在我的自定义指令中的选择元素值吗？

这就是我所拥有的：

```
 <body ng-app="myApp">
    <div ng-controller="MyCtrl">
      <div ng-repeat="category in categories">
        {{category.Name}}: 
        <status-selector items="statuses" ng-model="selectedStates[status.Id]"></status-selector>
      </div>
    </div>
  </body> 
```

我有两个数组：类别和状态。每个类别都可以有自己的状态。选择类别的状态后，应将其保存到 selectedStatus 以最终获得类似`[{CategoryId:1,StatusId:2},{CategoryId:2,StatusId:3}]`. 如果 selectedStatus 已经初始化，我想查看相应类别的选择状态，这意味着我还需要输入值，而不仅仅是读取它们。

```
myApp
.controller("MyCtrl", function($scope) {
    $scope.categories = [{Id:1, Name: "Category1"}, {Id: 2, Name: "Category2"}];
    $scope.statuses = [{Id: 1, Name: "Low"}, {Id: 2, Name: "Normal"}, {Id: 3, Name: "High"}]
    $scope.selectedStates = {};
})
.directive('statusSelector', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: { items: '=', ngModel: '='},
        template: '<span><select class="select" ng-options="obj.Id as obj.Name for obj in items" ng-model="ngModel"></select></span>',
        link: function(scope, element, attrs) {
        }
    }
}); 
```

谢谢你。

演示：[小提琴](http://jsfiddle.net/arunpjohny/EhLE4/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:40:57.193

您应该有自己的类别模型作为`ng-model`. 它可能更有意义。

```
<status-selector items="statuses" ng-model="category.Status"></status-selector> 
```

要设置状态，只需带上`Status`填写的 JSON。

```
// ...
.controller("MyCtrl", function($scope) {
  $scope.categories = [{Id:1, Name: "Category1", Status: 1}, {Id: 2, Name: "Category2"}];
// ... 
```

显然，要获得用户的选择，只需获取`category.Status`属性即可。这是[更新的小提琴](http://jsfiddle.net/CaioToOn/EhLE4/3/)。

此外，只是一个侧面提示。您似乎来自 .Net 背景，习惯于 Pascal 案例。在 javascript 中，使用驼峰大小写是常识，所以你会`{id: ..., status: ...}`使用`{Id: ..., Status: ...}`.

# c# - Silverlight：使用 Rx 从同步方法返回值

> ID：15583781
> 
> 赞同：0
> 
> 时间：2013-03-23T05:35:14.563
> 
> 标签：c#, wcf, silverlight, asynchronous, system.reactive

我正在编写一个简单的 Silverlight 应用程序和 WCF 服务。我想创建一个返回值的同步方法。方法本身，从 WCF 服务调用异步方法。调用异步方法后，我想获取它的值，并返回给发送者。听说Rx可以解决这类问题。

这是我的代码：

```
 private void btnCreate_Click(object sender, RoutedEventArgs e)
    {
        string myResult = getMyBook(txtBookName.Text);
        MessageBox.Show("Result\n" + myResult);
        // myResult will be use for another purpose here..
    }

    // I want this method can be called anywhere, as long as the caller still in the same namespace.
    public string getMyBook(string bookName)
    {
        Servo.ServoClient svc = new ServoClient();
        string returnValue = "";

        var o = Observable.FromEventPattern<GetBookCompletedEventArgs>(svc, "GetBookCompleted");
        o.Subscribe(
            b => returnValue = b.EventArgs.Result
            );

        svc.GetBookAsync(bookName);
        return returnValue;
    } 
```

当我单击 btnCreate 时，*myResult*变量仍然为空。我的代码有问题吗？或者也许我只是不了解 Rx 的概念？我是 Rx 的新手。

**我的目标是：**我需要从异步方法中获取结果（*myResult*变量），然后在以后的代码中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:37:12.023

这比 Rx更适合`async`/关键字。`await`Rx 主要用于管理数据流，而在这种情况下，您要做的就是同步管理异步调用。您可以尝试像这样使用 Rx：

```
public string getMyBook(string bookName)
{
    Servo.ServoClient svc = new ServoClient();
    svc.GetBookAsync(bookName);

    var o = Observable.FromEventPattern<GetBookCompletedEventArgs>(svc, "GetBookCompleted");
    return o.First().EventArgs.Result;
} 
```

但是，如果 GetBookAsync 在您订阅之前引发事件，则线程将永远阻塞。你可以乱用`.Replay()`，`.Connect()`但你可能应该只使用`async`/ `await`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:25:48.477

请记住，GetBookAsync 立即返回，并将返回存储在 returnvalue 中的值。当数据到达时，返回值将超出范围，届时 btnCreate 将完成。

您可以在 GetBookAsync 上使用 await，以便它在继续之前等待数据到达。不要忘记这意味着您还需要方法上的异步。

RX 或 await 不是一个很好的例子或使用，但尝试是我们学习的方式！

# liferay-6 - 运行 portlet 时 Liferay 出错

> ID：15583782
> 
> 赞同：0
> 
> 时间：2013-03-23T05:35:15.220
> 
> 标签：liferay-6

我正在尝试运行我的 liferay `portlet`。我所有的 portlet 都成功运行，但是有两个 portlet 在我单击时会在控制台中显示以下消息：

```
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73) 
```

可能是什么问题？

# android - 在 Android 中处理大量图像的最有效方法

> ID：15583790
> 
> 赞同：2
> 
> 时间：2013-03-23T05:36:43.367
> 
> 标签：android, android-image

我正在开发适用于 android 的音乐播放器应用程序，并试图找到处理图像的最佳方式。我正在从网络加载艺术家图像，并根据情况从 MediaStore 或网络加载专辑图像。我需要在不同的时间将任意一组图像（艺术家或专辑）添加到 listViews。

将图像存储在内存 (HashTable) 中会使加载速度非常快，但如果用户拥有非常大的音乐库，则可能变得不切实际。

但是我不能在“根据需要”的基础上加载它们，因为我需要将它们绑定到 listView。此外，我有一个显示艺术家图像并提供导航控件的通知。如果我在用户单击下一步按钮时等待加载图像，则它可能不会在通知视图更新之前加载。

在第一次加载时连接到网络然后将文件保存在本地，然后根据需要加载它们的最佳方法是什么？如果我这样做，图像加载速度是否足以跟上用户快速单击下一步按钮并刷新艺术家图像视图的速度？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:53:16.423

使用列表视图或网格视图来显示图像。

您可以使用[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) Universal Image Loader 从 MediaStore 或网络加载图像。使用缓存。基于延迟加载，但具有更多配置选项。

在您的适配器构造器中

```
File cacheDir = StorageUtils.getOwnCacheDirectory(a, "UniversalImageLoader/Cache");

 // Get singletone instance of ImageLoader
   imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
              // You can pass your own memory cache implementation
             .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
             .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
             .enableLogging()
             .build();
 // Initialize ImageLoader with created configuration. Do it once.
    imageLoader.init(config);
    options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.stub_id)//dummy image
    .cacheInMemory()
    .cacheOnDisc()
    .displayer(new RoundedBitmapDisplayer(20))
    .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
      imageLoader.displayImage(imageurl, image,options); 
```

您也可以使用[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。还使用缓存。

还可以在 listview 或 grdiview 中使用 ViewHolder。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:41:19.403

从本地文件存储或`MediaStore`在`getView()`您的`ListView's` `ListAdapter`或`SimpleListAdapter`. 适配器将只`getView()`在需要时调用所需的项目`position`。您的系统将足够快以在需要时以这种方式加载图像。

您必须提前从 Web 获取所有图像并将它们存储在本地文件系统中，以便它们可供`ListView`.

# java - 如何从现有的 Web 应用程序访问 HDFS（Hadoop 文件系统）

> ID：15583792
> 
> 赞同：1
> 
> 时间：2013-03-23T05:36:55.130
> 
> 标签：java, web, hadoop, hdfs, bigdata

我已经在我的集群上安装了 hadoop 1.0.4，有 1 个主节点和 3 个从节点，现在我想通过我的 Web 应用程序访问我的 HDFS 文件系统，以存储和访问现有 Web 应用程序的数据。

由于我的 Web 应用程序当前使用 MySQL 作为数据库，我想用 HDFS 替换它。

那么可以使用什么，以便我能够通过现有的 Web 应用程序访问 HDFS？

出于后端数据迁移的目的，我使用的是 sqoop 和 flume，但我希望应用程序与 HDFS 实时同步。因为我从网页保存的应该直接去HDFS，而我想要搜索的应该直接来自HDFS。

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:21:04.040

这就像用橙子代替苹果。

你不能用 HDFS 代替 MySQL。MySQL 是数据库，而 HDFS 是类似 ext3/ext4 的文件系统。HDFS 以分布式方式运行，而 ext3/ext4 不会。

HDFS 提供高延迟和高吞吐量，而 MySQL 数据库提供低延迟和低吞吐量。考虑用 NoSQL DB（Cassandra、HBase 等）替换 RDBMS（MySQL、Oracle 等）。

有大量 NoSQL 数据库，根据需求分析，必须选择合适的数据库。

# concurrency - x86_64 内存重新排序

> ID：15583793
> 
> 赞同：3
> 
> 时间：2013-03-23T05:37:00.573
> 
> 标签：concurrency, x86-64, memory-model

在 x86_64 架构上，以下代码是否始终成立：

A=1;B=1;

线程1：存储A=2；商店 B=3；线程2：加载B==3；负载 A==2

有没有 B==3 但 A==1 的可能性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T05:56:51.677

英特尔架构手册第 3A 卷和第 3B 卷的第 8.2.3 章对此主题进行了深入探讨，但是，对于您的情况 ( `8.2.3.7 Stores Are Seen in a Consistent Order by Other Processors`)，有严格的顺序，这意味着按照编写顺序观察写入，使在仍然具有旧值的情况下无法`B`读取更新的值。`A`

`SFENCE`应该注意的是，在这种情况下，通过使用各种可用的内存隔离指令、、`LFENCE`& `MFENCE`via `_mm_sfence`、`_mm_lfence`&来提供显式屏障通常是一个好主意`_mm_mfence`。在 x64 下，您还可以选择`__faststorefence`（仅限 MSVC）。

# c++ - DirectShow RenderStream 成功，但没有视频

> ID：15583794
> 
> 赞同：0
> 
> 时间：2013-03-23T05:37:01.690
> 
> 标签：c++, visual-c++, directshow

我在 RenderStream 上使用预览图钉 (PIN_CATEGORY_PREVIEW) 来显示网络摄像头的视频，但即使函数返回 0x1，弹出的视频窗口也是空的。我可以看到网络摄像头打开（LED 变为绿色），但没有图像。这与捕获引脚相同，缓冲区永远不会被填充。

有趣的是，该程序适用于笔记本电脑内置的网络摄像头。我已经用两台单独的笔记本电脑进行了测试，并且都运行良好。网络摄像头本身功能齐全，因为我可以使用 Skype 或 MATLAB 播放视频。

有没有人知道这里可能发生的事情？

# android - 使用实体类访问google sql

> ID：15583798
> 
> 赞同：1
> 
> 时间：2013-03-23T05:37:50.260
> 
> 标签：android, google-app-engine, google-cloud-sql

我有一个带有谷歌引擎后端的安卓应用程序。为了让 android 应用程序与 google 应用程序引擎应用程序通信，我需要实体类，我将使用它生成端点类。然后在为这些端点类生成库之后，我可以将它们用作 API。我的问题是，由于端点类访问数据存储区，有没有办法让它们访问谷歌 sql 实例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T17:49:16.033

不幸的是，Google App Engine 实体专门与 GAE 数据存储一起使用。

但是，没有什么会强迫您使用实体 - 您可以创建一个 Google Cloud Endpoints API，通过直接发送 SQL 查询或使用对象关系映射 (ORM)（如[SQLAlchmey](http://www.sqlalchemy.org/) ）将数据保存到 MySQL 。

# iphone - Facebook 和 twitter 自动分享到用户帐户？

> ID：15583800
> 
> 赞同：1
> 
> 时间：2013-03-23T05:38:20.010
> 
> 标签：iphone, ios, facebook, social-media

我想从我的 iPhone 应用程序中自动共享一个社交媒体用户帐户（没有对话框、取消选项、发送选项）。我该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T06:17:00.037

而不是使用对话框，使用`doGraphPost`

使用此方法在fb上分享，无需打开对话框

```
 <FbGraphResponse_Obj> = [fbGraph doGraphPost:@"me/feed" withPostVars:<NSMutableDictionary>]; 
```

在这里详细查找：

```
// Invoke fbGraphCallback & prepare fbArray..

// preapare conent to be posted, add following snippet in same function

    NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:4];
    [variables setObject:@"Yours content to be shared" forKey:@"message"];

    // share prepared content to fb
    fb_graph_response = [fbGraph doGraphPost:@"me/feed" withPostVars:variables];
    NSLog(@"postMeFeedButtonPressed:  %@", fb_graph_response.htmlResponse);

where fb_graph_response is an instance of FbGraphResponse 
```

享受编程！！

# ajax - Jquery在Ajax成功中返回一些不需要的数据

> ID：15583803
> 
> 赞同：1
> 
> 时间：2013-03-23T05:40:17.620
> 
> 标签：ajax, ruby-on-rails-3, jquery

我有一个使用 Jquery 的 Ajax 方法。

```
 function add_item()
 {
 item_name=$("#item_names").val()
 var pars = item_name;
 $.ajax({
            url: "/billing/add_bill_detail",
            type: "get",
            dataType: "html",
            data: {"pars" : pars},
            success: function(returnData){
            alert(returnData)
            $("#aaa").append(returnData).html;
            }
        }); 
```

}

如果我对 returnData 发出警报，它会返回一些额外的数据。如下所示。

```
 <!DOCTYPE html>
 <html>
 <head>
 <title>SamplePro</title>

 <script src="/javascripts/jquery.js?1363935663" type="text/javascript"></script>
 <script src="/javascripts/jquery_ujs.js?1363935663" type="text/javascript"></script>
 <script src="/javascripts/application.js?1362549711" type="text/javascript"></script>
 <script src="/javascripts/jquery.js?1363935663" type="text/javascript"></script>
 <script src="/javascripts/application.js?1362549711" type="text/javascript"></script>
</head>
<body>

<tr class="tablehead">
 <td>
BAB-001
</td>
 <td>
BABY MASK 1
</td>
 <td>
 </td>
 <td>
     <input id="tax_rule_tax_rule" name="tax_rule[tax_rule]" size="30" type="text" value="sfdsf" />
 </td>
 </tr>
 </br>

</body>
</html> 
```

但文件 add_bill_detail actutall 包含

```
 <% if from != "reload" %>
 <tr class="tablehead">
 <td>
 <%=from ? item_details.item.item_code : ""%>
 </td>
  <td>
   <%=from ? item_details.item.name : ""%>
  </td>
 <td>
 </td>
   <td>
    <%= text_field 'tax_rule', 'tax_rule',:value => "sfdsf" %>
     </td>
  </tr>
 <%end%>
 </br> 
```

请帮我删除不需要的数据。提前致谢..

更新的问题：

我添加了以下脚本

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

因此，我的实际问题是..

![在此处输入图像描述](../Images/e0b3e1ba836254992c919b9a97927dc3.png)

这里 add_bill_detail 中的所有值都在一列下。它应该转到 4 列。 ![在此处输入图像描述](../Images/7d82da980b26d592d0ee3671b1982279.png)

更新了 add_bill_detail 代码..

```
 <table>
 <tr class="tablehead">
 <td>
 <%=from ? item_details.item.item_code : ""%>
 </td>
 <td>
 <%=from ? item_details.item.name : ""%>
 </td>
 <td>
 </td>
 <td>
    <%= text_field 'tax_rule', 'tax_rule',:value => "sfdsf" %>
</td>
<td>
    <%= text_field 'tax_rule', 'tax_rule2',:value => "vvvv" %>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:53:25.663

如果要获取`<tr class="tablehead">`标签，只需使用[.filter()](http://api.jquery.com/filter/)方法。

`alert($(returnData).filter('tr.tablehead').html())`应该管用！

**编辑：**您正在使用`tr`没有父标签的`table`标签。因此，它们在浏览器呈现的 HTML 中被忽略，浏览器剥离`tr`标签并仅显示文本。由于 jquery 在呈现的 html 上工作，它的行为是相同的。

**修复：**`tr`用父标签包装你的`table`标签，你应该很高兴。

我的意思是：

```
<table>
    <tr class="tablehead">
     <td>
    BAB-001
    </td>
     <td>
    BABY MASK 1
    </td>
     <td>
     </td>
     <td>
         <input id="tax_rule_tax_rule" name="tax_rule[tax_rule]" size="30" type="text" value="sfdsf" />
     </td>
     </tr>
</table> 
```

注意`table`包装你的标签的`tr`标签。

**以后如何避免这个问题？**

始终使用诸如Chrome中的[Inspect Element](https://developers.google.com/chrome-developer-tools/docs/elements)和Firefox中的[Firebug 之](http://getfirebug.com/)类的工具检查您呈现的 HTML 的外观。如果您为您的表格执行此操作，您会注意到 tr 标记被浏览器剥离。

# xcode - ios中的用户注释

> ID：15583805
> 
> 赞同：2
> 
> 时间：2013-03-23T05:40:49.277
> 
> 标签：xcode, storyboard, uiactionsheet, alertview, notesview

![在此处输入图像描述](../Images/1555a9bfe543de2fcc19b9515afd4385.png)我想在我的应用程序中创建一个用户注释表单，目前在一个看起来很糟糕的视图中使用一个文本视图！是否有任何其他控制套装用于此目的？主要目的是当用户单击按钮时会出现一个小文本视图，他们可以在那里添加评论并将其保存到 plist 中。 ![在此处输入图像描述](../Images/5c65a57c314ba6916773b00bea17dc8b.png) 我想要这样的东西（查看图片）

我想要那种用户注释（它是我的形象）请给我一些建议并帮助开发这个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:46:33.893

使用`UIAlertView`with`UITextView`可能对您有用。

`UIAlertViewDelegate`在 .h 文件中实现。

```
UITextView *comments;

-(IBAction)btnAddClicked:(id)sender
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Noreply Email" message:@"\n\n\n\n\n" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:@"Send", nil];
    comments = [[UITextView alloc] initWithFrame:CGRectMake(15,45, 255, 100)];
    [comments setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"mailbody.png"]]];
    [comments setFont:[UIFont fontWithName:@"Helvetica" size:15]];
    comments.scrollEnabled = YES;
    [comments becomeFirstResponder];
    [alert addSubview:comments];
    [alert show];
    [alert release];
} 
```

此处将使用小文本视图提示警报，您可以添加注释，然后像这样在委托方法中处理文本。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex==1) //Send button pressed
    {
        //handle your comment here
        NSLog(@"%@",comments.text);
    }
} 
```

# android - 如何在中心显示此按钮？

> ID：15583807
> 
> 赞同：0
> 
> 时间：2013-03-23T05:41:51.470
> 
> 标签：android, android-layout

这是我的 .xml 文件的代码，

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/submit_clip"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="@android:color/transparent"
    android:scrollbarStyle="insideOverlay"
    android:scrollbars="vertical" >

    <TableLayout
        android:id="@+id/table1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:stretchColumns="*" >

        <TableRow
            android:id="@+id/row1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center" >

            <RelativeLayout
                android:id="@+id/left_layout"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <SeekBar
                    android:id="@+id/seekBar1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"

                    android:layout_marginLeft="20dp"
                    android:layout_marginRight="20dp"
                    android:layout_marginTop="20dp" />

                <Button
                    android:id="@+id/cmdConfirm"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dp"
                    android:layout_below="@+id/seekBar1"
                    android:gravity="center"
                    android:text="Confirm and Proceed" />

                <Button
                    android:id="@+id/txtCancel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/cmdConfirm"
                    android:gravity="center"
                    android:text="Cancel" />

                </RelativeLayout>

            <RelativeLayout
                android:id="@+id/right_layout"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                 >

                <TextView
                    android:id="@+id/txtTitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                    android:text="Clip Detail"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/txtUnderline"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                    android:layout_below="@+id/txtTitle"
                    android:text="___________________"
                    android:textStyle="bold" />                

                <TextView
                    android:id="@+id/txtName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                    android:layout_below="@+id/txtUnderline"
                    android:text="Name : " />          

                <TextView
                    android:id="@+id/txtDescription"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                    android:layout_below="@+id/txtName"
                    android:text="Description : " />                

                <TextView
                    android:id="@+id/txtCategory"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                     android:layout_below="@+id/txtDescription"
                    android:text="Category : "/>                

                <TextView
                    android:id="@+id/txtClipType"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                     android:layout_below="@+id/txtCategory"
                    android:text="Clip Type : "/>                

                <TextView
                    android:id="@+id/txtDuration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                     android:layout_below="@+id/txtClipType"
                    android:text="Duration : "/>                

                <TextView
                    android:id="@+id/txtArtist"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                     android:layout_below="@+id/txtDuration"
                    android:text="Artist : "/>                

                <TextView
                    android:id="@+id/txtSoundTrack"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                     android:layout_below="@+id/txtArtist"
                    android:text="Sound Track : "/>                

                </RelativeLayout>
        </TableRow>
    </TableLayout>

</ScrollView> 
```

它显示输出如下图，

> ![在此处输入图像描述](../Images/c97311e0722b9a6065fc3562ecdafb72.png)

正如您在图像中看到的那样，两个命令按钮都位于左侧，我想将它们的位置更改为如下图所示的中心，

> ![在此处输入图像描述](../Images/7f844ad370c4d8dd9d01dfa9ac077970.png)

那么我怎样才能将他们的位置更改为 center ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:46:00.847

我已经在命令按钮和它的工作正常中添加了以下行，该行是

```
android:layout_centerHorizontal="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:58:36.073

试试这个，对每个使用线性`Button`并给它`gravity="center"

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/submit_clip"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:background="@android:color/transparent"
android:scrollbarStyle="insideOverlay"
android:scrollbars="vertical" >

<TableLayout
    android:id="@+id/table1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/row1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center" >

        <RelativeLayout
            android:id="@+id/left_layout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:orientation="vertical" >

            <SeekBar
                android:id="@+id/seekBar1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="20dp" />

            <LinearLayout
                android:id="@+id/conform_linear"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/seekBar1" >

                <Button
                    android:id="@+id/cmdConfirm"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:text="Confirm and Proceed" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/conform_linear"
                android:gravity="center" >
            </LinearLayout>

            <Button
                android:id="@+id/txtCancel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:text="Cancel" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/right_layout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <TextView
                android:id="@+id/txtTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:text="Clip Detail"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/txtUnderline"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtTitle"
                android:layout_marginLeft="20dp"
                android:text="___________________"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/txtName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtUnderline"
                android:layout_marginLeft="20dp"
                android:text="Name : " />

            <TextView
                android:id="@+id/txtDescription"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtName"
                android:layout_marginLeft="20dp"
                android:text="Description : " />

            <TextView
                android:id="@+id/txtCategory"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtDescription"
                android:layout_marginLeft="20dp"
                android:text="Category : " />

            <TextView
                android:id="@+id/txtClipType"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtCategory"
                android:layout_marginLeft="20dp"
                android:text="Clip Type : " />

            <TextView
                android:id="@+id/txtDuration"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtClipType"
                android:layout_marginLeft="20dp"
                android:text="Duration : " />

            <TextView
                android:id="@+id/txtArtist"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtDuration"
                android:layout_marginLeft="20dp"
                android:text="Artist : " />

            <TextView
                android:id="@+id/txtSoundTrack"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txtArtist"
                android:layout_marginLeft="20dp"
                android:text="Sound Track : " />
        </RelativeLayout>
    </TableRow>
</TableLayout> 
```

# mysql - 用户'myUser'@'localhost'的访问被拒绝（使用密码：是）

> ID：15583808
> 
> 赞同：0
> 
> 时间：2013-03-23T05:41:56.620
> 
> 标签：mysql, phpmyadmin, privileges, mysql-connect

这是否`(using password: YES)`意味着密码不匹配？

即使我作为 root 用户已将所有数据库的权限授予该用户，我也会收到此错误！

```
GRANT ALL PRIVILEGES ON *.* TO 'prashant'@'localhost' IDENTIFIED BY PASSWORD 'some_secure_password' WITH GRANT OPTION 
```

此外，phpmyadmin 显示`GRANT = NO`在指定用户的权限表中。

我想补充一点，有几个数据库，其中一些，我能够连接，但其中一些失败。另外，我没有向用户添加任何特定于表的权限！

**更新**

我尝试使用 root 用户 n 密码访问这些数据库，但仍然收到相同的错误:(

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:45:39.580

您几乎可以肯定输入了错误的密码。

# codeigniter - CodeIgniter 中的数据传输对象

> ID：15583812
> 
> 赞同：2
> 
> 时间：2013-03-23T05:42:58.710
> 
> 标签：codeigniter

我可以知道如何在 CodeIgnitor 中传输对象吗？下面的方法正确吗？

```
class UserLibrary{

private $username;

public getUsername() {
        return this->username;
    }
    public void setUsername(username) {
        this->username = username;
    }

} 
```

//设置值

```
$Reg = new UserLibrary;
    $Reg->setName(name); 
```

// 如何获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:05:35.840

您的 php 代码存在严重问题。

与在 CodeIgniter 中一样，您的库类应放置在您的**application/libraries**文件夹中，因为这是 CodeIgniter 在初始化时查找它们的地方。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Userlibrary {

    private $username;

    public function getUsername() {
        return $this->username;
    }
    public function setUsername($username) {
        $this->username = $username;
    }
}

/* End of file Userlibrary.php */ 
```

要加载您的库，您应该将其加载到**控制器**中，如下所示：

```
$this->load->library('userlibrary'); 
```

然后您可以按如下方式使用您的库：

```
$this->userlibrary->setUsername('your username');
echo $this->userlibrary->getUsername(); 
```

有关更多信息，请使用官方文档：[http ://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# python - 如何使用递归实现插入排序，哪个更有效？

> ID：15583815
> 
> 赞同：1
> 
> 时间：2013-03-23T05:43:49.650
> 
> 标签：python, sorting

我如何使用递归来实现这一点，它会更有效吗？

我的代码：

```
def insertionSort(array):
    '''(list) - > list
    Returns a sorted list of integers by implementing
    the insertion sort which returns numbers in array from
    least to greatest
    '''
    for i in range(1, len(array)):

        if array[i-1] > array[i]: #Finds a number out of place
            temp = array[i]
            for a in range(0,i):
                if temp < array[a]:
                    array.insert(a,temp)
                    del array[i+1]
                    break
    return array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:32:20.347

一个简单的递归版本：

```
def insertionSort(array,i=1):
  if i >= len(array):
    return array
  if array[i-1] > array[i]: 
    temp = array[i]
    for a in range(0, i): 
      if temp < array[a]:
        array.insert(a,temp)
        del array[i+1]
        break
  return insertionSort(array, i+1) 
```

通常递归对于某些数据结构（例如树和链表）更好。有时用递归来解决问题更容易思考。我不记得递归实际上用于提高效率的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:11:35.427

任何 for 循环`for x in range(a,b): Body`都可以用尾递归重新实现：

```
def rfor(b, x = a):
  if a < b:
     Body
     rfor(b, x + 1) 
```

这应该足以让您自己获得答案。在标准 Python 中，这肯定会比循环慢，并且每次迭代都会吃掉一个堆栈帧。在具有良好尾调用优化的其他语言和实现中，它们的成本是相等的。显然[Guido 说他对尾调用优化不感兴趣](http://lambda-the-ultimate.org/node/1331)。

# c# - 翻转视图中的图像叠加

> ID：15583816
> 
> 赞同：0
> 
> 时间：2013-03-23T05:43:59.110
> 
> 标签：c#, windows-8, winrt-xaml

我有这个 XAML 代码：

```
 <FlipView x:Name="models_list" Width="432" Height="286" Canvas.Left="89" Canvas.Top="80" ScrollViewer.VerticalScrollBarVisibility="Hidden" >
            <FlipView.ItemTemplate>
                <DataTemplate>
                    <Grid x:Name="imgGrid">
                        <Image x:Name="img1" Source = "{Binding}" Stretch="Fill" />
                        <Image x:Name="img2" Source = "{Binding}" Stretch="Fill" />
                    </Grid>
                </DataTemplate>
            </FlipView.ItemTemplate>
        </FlipView> 
```

我希望能够在网格“imgGrid”中的这个基本图像“img1”上叠加图像。当我通过以下代码将项目添加到翻转视图时，img1 被填充：

```
 foreach (StorageFile model in models)
        {
            models_list.Items.Add(new Uri("ms-appx:///Images/Models/" + model.Name));
        } 
```

如何绑定 img2 以获取特定事件的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:00:29.490

看来您可能问错了问题。您只需在名为 img 的图像下方键入另一行，即可在 img 上覆盖另一个图像。您也可以通过`Image`在该行下方放置一个控件来做到这一点`</FlipView>`。然后，您将使用其他项目绑定来控制该叠加图像。

如果您需要对单个文件中的内容进行更多控制`FlipViewItem`- 您可以将整个 imgGrid`Grid`放入 a`UserControl`并将其`UserControl`放入`DataTemplate`.

# eclipse - HDFS Web 界面替代方案

> ID：15583817
> 
> 赞同：1
> 
> 时间：2013-03-23T05:44:08.207
> 
> 标签：eclipse, hadoop, eclipse-plugin, hdfs

好吧，这很烦人！我是 Hadoop 新手。我正在尝试寻找基本 HDFS Web 界面的不错替代品。我尝试使用 hadoop eclipse 插件，但似乎它已经过时了，正确设置它很痛苦！我安装了 cloudera 的发行版，我听说过 cloudera 桌面，但它不再可用。谁能告诉我 HDFS Web 界面的不错替代方案，我可以通过 GUI 轻松地将文件下载和上传到 HDFS？PS我在我的本地运行所有东西，不涉及集群。尝试了很多寻找，但似乎没有任何东西指向正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:54:04.650

您可以使用 REST API 支持 HDFS 的完整文件系统接口的 webhdfs。 [http://hadoop.apache.org/docs/r1.0.4/webhdfs.html](http://hadoop.apache.org/docs/r1.0.4/webhdfs.html)

或者

您可以将hadoop与hoop（HDFS over HTTP）集成，用于通过HTTP协议访问HDFS。Hoop 通过 HTTP/S 提供对所有 Hadoop 分布式文件系统 (HDFS) 操作（读取和写入）的访问

更多详情请参考。 [http://bigobject.blogspot.in/2013/03/hoop-https-over-hdfs.html](http://bigobject.blogspot.in/2013/03/hoop-https-over-hdfs.html)

或者你也可以使用 HTTPFS 作为 Hoop 的一个选项

[http://bigobject.blogspot.in/2013/03/apache-hadoop-httpfs-service-that.html](http://bigobject.blogspot.in/2013/03/apache-hadoop-httpfs-service-that.html)

# algorithm - 模拟退火算法中的能量？

> ID：15583822
> 
> 赞同：-3
> 
> 时间：2013-03-23T05:44:42.520
> 
> 标签：algorithm, artificial-intelligence, simulated-annealing

我说模拟退火算法中的能量等于成本变化是否正确？

所以我可以用以下方法计算它：

```
energy = cost(prevSolution) - cost(currentSolution); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:09:09.017

术语“能量”可以有多种定义，但它通常表示当前的客观价值，或当前状态的成本，即`cost(currentSolution)`。

您定义的差异以及一些转换函数通常指定从一种状态到另一种状态的[转换概率。](http://en.wikipedia.org/wiki/Simulated_annealing#Acceptance_probabilities)

# java - 字符串串行通信

> ID：15583823
> 
> 赞同：1
> 
> 时间：2013-03-23T05:44:56.103
> 
> 标签：java, android, serial-port, arduino

我现在刚刚学习 Java 大约几个星期。我的最终目标是让我的 Arduino 测量一些传感器并通过 USB 电缆将结果发送到我的 android。但是，我只是想让我的 Arduino 先与计算机上的 Java 控制台通信，然后我认为它几乎是从那里复制和粘贴的。

只要是一个简单的字节，我就可以让我的 Arduino 和 Java 控制台相互通信。任何传递给我的结果都是二次方程爆炸的结果。

在我的 Arduino 串行监视器中，我得到了这个：

> 发动机温度：100
> 
> 空气温度：95
> 
> 发动机转速：10000 RPM
> 
> 轮速：30 MPH

在我的 Java 控制台中，我得到了这个：

> 正常
> 打印 [B@6f5f6479
> 
> 字符串
> €∼3Àf`Ìó€∼€
> 
> UTF
> ??3?f`??

这是我的阅读器代码：

```
@Override
public void serialEvent(SerialPortEvent arg0) {
            byte[] readBuffer = new byte[1000];
                try {
                    int availableBytes = input.available();
                    if (availableBytes > 0) {
                        // Read the serial port
                        input.read(readBuffer, 0, availableBytes);

                        // Print it out
                        System.out.println("Normal println");
                        System.out.println(readBuffer);
                        System.out.println("\nString");
                        System.out.println(new String(readBuffer, 0, availableBytes));
                        System.out.println("\nUTF");
                        System.out.println(new String(readBuffer,"UTF-8"));
                        System.out.println("\nDone");
                    }}

                 catch (IOException e) {

            }

    } 
```

输入是我的输入流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T20:44:42.267

确保Arduino和android上的串口速度一致。提供的代码未显示串行端口的定义和打开/启动方式，因此无法知道这是否是问题所在。

当串行线的两个端点配置不同时，android 上显示的字符看起来就像典型的垃圾。

看起来 Arduino 正在正确地感知引擎的动态？

# sql - 如何使用 sql 连接简化此查询？

> ID：15583824
> 
> 赞同：0
> 
> 时间：2013-03-23T05:45:00.723
> 
> 标签：sql, postgresql

my_table 有 4 列：`id integer, value integer, value2 integer, name character varying`

我想要所有的记录：

1.  与名称为“a_name”的记录具有相同的 value2
2.  具有低于名称为“a_name”的记录的字段值

通过以下查询，我得到了令人满意的结果：

```
select t.id 
from my_table as t
where  t.value < ( select value from my_table where name = 'a_name')
and s.value2 = (select value2 from my_table where name = 'a_name'); 
```

但是**是否可以使用 sql 连接来简化此查询？**

在我看来，在同一张桌子上加入仍然太复杂了。我试着用这个例子来理解。

到目前为止，我所尝试的结果是重复的：

```
select t2.id 
from my_table as t
inner join my_table as t2 on t2.value2 = t.value2
where t2.value < ( select value from my_table where name = 'a_name'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:05:02.827

我认为这将解决您的问题。

```
select t1.id
from my_table as t1
join my_table as t2 
  on t1.value2 = t2.value2
  and t2.name = 'a_name'
  and t1.value < t2.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:08:17.940

您始终可以通过调用“SELECT distinct t2.id ...”获得不同的结果

但是，这不会增强您对内部连接的理解。如果您愿意，请继续阅读。让我们首先获取 name = 'a_name' 的所有记录。

```
SELECT a.*
FROM my_table as a
WHERE a.name = 'a.name'; 
```

执行内部连接的一种更简单的方法是了解上述查询的结果是另一个表，正式称为[关系](http://en.wikipedia.org/wiki/Relation_%28database%29)。您可以将其视为连接同一张表，但更简单的方式是将其视为“连接此查询的结果”。让我们来测试一下。

```
SELECT other.id
FROM my_table as a,
INNER JOIN my_table as other ON other.value2 = a.value2
WHERE a.name = 'a_name'
AND other.value < a.value; 
```

如果第一个查询（name = 'a_name' 的所有行）有很多结果，那么第二个查询很可能有重复，因为别名 'a' 和 'other' 之间的内部连接是它们的[叉积](http://en.wikipedia.org/wiki/Cross_product)的子集.

编辑：语法，清晰度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T06:08:56.133

您应该使用自联接而不是内部联接，请参阅此 [http://msdn.microsoft.com/en-us/library/ms177490%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms177490%28v=sql.105%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T06:01:13.553

请试试这个

```
select t.id 
from my_table as t
inner join
(select value from my_table where name = 'a_name')t1 on t.value<t1.value
inner join 
(select value2 from my_table where name = 'a_name')t2 on t.value2=t2.value2 
```

# asp.net - 在按钮单击时在一页中切换两个网格

> ID：15583829
> 
> 赞同：0
> 
> 时间：2013-03-23T05:45:39.070
> 
> 标签：asp.net, c#-3.0

我是 asp.net 的新手。我从昨天开始一直在研究这个问题，但没有运气弄明白。为什么另一个网格不会出现在页面上，因为我已经在其代码后面加上了一个标志。

希望有人可以帮助我。谢谢。

```
 protected void Edit_btn_Click(object sender, EventArgs e)
    {
        if (FLAG_hiddenfield.Value == "T")
        {
            BIRPER_EDIT_grid.Visible = true;
            BIRPER_grid.Visible = false;
            Edit_btn.Text = "View";

            BIRPER_grid.DataBind();
            BIRPER_EDIT_grid.DataBind();

            FLAG_hiddenfield.Value = "F";
        }

        if (FLAG_hiddenfield.Value == "F")
        {
            BIRPER_grid.Visible = true;
            BIRPER_EDIT_grid.Visible = false;
            Edit_btn.Text = "Edit";

            BIRPER_grid.DataBind();
            BIRPER_EDIT_grid.DataBind();

            FLAG_hiddenfield.Value = "T";
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:44:23.280

看来您的条件逻辑在这里是错误的，请将两个`if`s替换为`if else`：

```
if(FLAG_hiddenfield.Value == "T"){
    ...
}
else if (FLAG_hiddenfield.Value == "F"){
    ...
} 
```

请注意，如果`GridView`不包含数据，则不会显示在网页上。

# linux - 内存访问权限，需要从堆栈执行代码。如何验证系统权限？

> ID：15583832
> 
> 赞同：3
> 
> 时间：2013-03-23T05:46:14.207
> 
> 标签：linux, command, stack, execution

问题-

Linux 系统上是否有命令查看是否允许从堆栈执行？

背景-

执行需要缓冲区溢出的作业分配，将代码注入堆栈，并覆盖将指令指针设置为注入代码的返回地址。使用 GDB 单步执行时，一切看起来都很好，但是在尝试执行堆栈中的第一行时会出现段错误。指令指针更改到正确的位置，并且该指令是用于测试目的的 NOP。我想知道系统是否阻止从堆栈执行。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:28:41.270

> 你试过 execstack 吗？=> stackoverflow.com/questions/6482759/… – 安蒂昨天

对于任何其他偶然发现这一点的人。“ps -u user”查找 PID，然后“pmap -x PID”并检查显示“stack”的行。如果缺少 x(execute)，请键入“execstack -s 文件名”

在常规执行下仍然会出现段错误，即 ./filename，但现在在 GDB 下可以正常工作

# c# - 快速加载大数据 Azure SQL

> ID：15583836
> 
> 赞同：1
> 
> 时间：2013-03-23T05:46:55.490
> 
> 标签：c#, sql-server, azure-sql-database

这儿存在一个问题。我每天都要更新和下载大量数据。约 140 mb。这些数据取自文件。这些加载时间很长的 9000 条记录加载了 10 分钟。尽管当我使用自定义 sql server 时数据加载速度更快。

下面是我加载数据的代码：

```
var InBase = FrmMain.allRecords.ToList(); 
var allcats = FrmMain.allCats;
int curCategory = 0;
            for (int jrCnt = rCnt; jrCnt <= arrayTable.GetUpperBound(0); jrCnt++)
            {
                while (operations.Count(x => x.IsAlive) >= 100) ;

                var prcI = new Price();

                if (arrayTable[jrCnt, nametov] != null)
                    prcI.name = arrayTable[jrCnt, nametov].ToString();

                if (productsInBase.FirstOrDefault(x => x.name == prcI.name) != null) 
                {
                    var finded = productsInBase.FirstOrDefault(x => x.name == prcI.name && x.company==company);
                    prcI.ID = finded.ID;
                }

                if (arrayTable[jrCnt, pricetov] != null)
                {
                    decimal parsdec;
                    if (decimal.TryParse(arrayTable[jrCnt, pricetov].ToString(), out parsdec))
                        prcI.prc = parsdec;
                }

                prcI.category = curCategory;

                if (!string.IsNullOrEmpty(prcI.name) && prcI.prc == 0)
                {
                    var cat =
                        allcats.FirstOrDefault(
                            x =>
                            x.findname != "NaN" &&
                            x.findname.ToUpper().Split(';').Any(prcI.name.ToUpper().Contains));
                    curCategory = cat == null ? 0 : cat.id;
                }

                if ((string.IsNullOrEmpty(prcI.name)) || (prcI.prc == 0)) continue;

                Products.Add(prcI);

                if (count == 0 || count % 200 != 0 && jrCnt != arrayTable.GetUpperBound(0)) continue;

                int start = count >= prodInTh ? count % prodInTh != 0 ? (count - count % prodInTh) : (count - prodInTh) : 0;
                int end = count % prodInTh != 0 ? (count % prodInTh) : prodInTh;

                var productsForThreadUpd = Products.GetRange(start, end).Where(x => x.ID != 0).ToList();

                var addprod = Products.GetRange(start, end).Where(x => x.ID == 0).ToList();

                if (productsForThreadUpd.Count > 0) 
                {
                    var newTh = new Thread(() => _mainClass.AddProductsUpdateProduct(productsForThreadUpd))
                        {
                            Name = company + start + " - " + (start + end) + " UPDATE"
                        };

                    newTh.Start();
                    operations.Add(newTh);
                }
                if (addprod.Count > 0)
                {
                    var newTh = new Thread(() => _mainClass.AddProductsUpdateProduct(addprod))
                        {
                            Name = company + start + " - " + (start + end) + " ADD"
                        };

                    newTh.Start();
                    operations.Add(newTh);
                }

            } 
```

我分担了线程的负载。在 obnom 流中，我的 200 个条目。启动代码数据：

```
public void AddProductsUpdateProduct(List<Price> price)
        {
            using (var dcupdateoradd = new PriceDataContext())
            {
                if (price.Any(x => x.ID != 0))
                {
                    var upds = price.Where(x => x.ID != 0).ToList();
                    dcupdateoradd.Price.AttachAll(upds);
                    dcupdateoradd.Refresh(RefreshMode.KeepCurrentValues, upds);
                }

                dcupdateoradd.Price.InsertAllOnSubmit(price.Where(x => x.ID == 0));

                dcupdateoradd.SubmitChanges();
            }
        } 
```

还不知道我不喜欢该程序连接数据库的程序多少次，但在您想出之前什么都没有。

![连接](../Images/8bb5f7528e5ace07e7cc446f3536681f.png)

内存负载：

![加载内存](../Images/2e62c99da78dd6bfbb7486fac79ae7e0.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:48:38.210

将大量数据插入 SQL 数据库有几种不同的方法，我最喜欢的是 SqlBulkCopy。此方法需要 DataTable 并将绕过实体框架。它允许您以非常有效的方式将记录流式传输到 SQL 数据库。我使用它每天将超过 7000 万行插入到我在 Windows Azure 上的数据库中。

您可以在以下博客中找到详细信息

*   [使用 SqlBulkCopy 将大量数据插入 Windows Azure SQL 数据库](http://alexandrebrisebois.wordpress.com/2013/02/16/using-sqlbulkcopy-to-insert-massive-amounts-of-data-into-windows-azure-sql-database/)
*   [使用 Windows Azure SQL 数据库摄取海量关系数据（每天 70 多万条记录）](http://alexandrebrisebois.wordpress.com/2013/02/18/ingesting-massive-amounts-of-relational-data-with-windows-azure-sql-database-70-million-recordsday/)

另一种解决方法是使用存储过程并使用表值参数来使用 INSERT INTO 语句。在这种情况下，您可以将 DataTable 作为参数传递给存储过程。确保 DataTable 与存储过程使用的用户定义类型 100% 匹配。

您可以在以下博客中找到有关使用此技术的详细信息

*   [将大量数据插入 Windows Azure SQL 数据库](http://alexandrebrisebois.wordpress.com/2012/10/22/inserting-large-amounts-of-data-into-windows-azure-sql-database/)

如果您正在寻找一种将超过 9000 条记录插入数据库的方法，请务必使用 SqlBulkCopy。存储过程方法确实适用于小型数据集。

# windows-runtime - BackgroundTaskCompletedEventArgs.CheckResult 什么时候抛出异常？

> ID：15583837
> 
> 赞同：0
> 
> 时间：2013-03-23T05:47:08.733
> 
> 标签：windows-runtime, windows-store-apps

的文档`BackgroundTaskCompletedEventArgs.CheckResult`说：

> 如果后台任务完成事件报告错误，则抛出异常。

我尝试制作一个在其`Run`方法中引发异常的后台任务，但是当我订阅它的`Completed`事件并`CheckResult`在它完成时调用时，不会引发异常。

什么时候`CheckResult`真正抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:30:47.713

It should work exactly as you have described: if an exception is thrown in `IBackgroundTask`'s `Run` method, then `BackgroundTaskCompletedArguments.CheckResult()` method throws an exception when you call it.

Make sure that your background task actually runs and that your app is in foreground otherwise `IBackgroundTaskRegistration.Completed` event is not raised at all.

If you want to try it out on a working exaple, download [Background task sample](http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9) and make two modifications to it:

*   In `Task\ServicingComplete.cs` add `throw new Exception();` at the very end of `Run` method.
*   In `BackgroundTask\ServicingCompleteTask.xaml.cs` add `args.CheckResult();` at the beginning of `OnCompleted` method.

If you now run the app, register the task from the UI and trigger it from Visual Studio's `Debug Location` toolbar when the app is in foreground, you will notice that the `CheckResult()` call will throw an exception as expected.

# r - 在 r 中处理文本文件以获取两个向量

> ID：15583839
> 
> 赞同：0
> 
> 时间：2013-03-23T05:47:27.873
> 
> 标签：r

我有一个文本文件，其格式如下：

```
groupA, 123
groupA, 32
groupB, 222
groupA, 212
groupB, 213
... 
```

我怎样才能轻松地形成两个向量`[123, 32, 212, ...]`并`[222, 213, ...]`分别用于 groupA 和 groupB？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:50:57.800

您可以简单地使用`split`. 这将产生一个命名列表，其中每个列表项都是您的向量之一。

```
mydf <- read.csv(header = FALSE, text = "groupA, 123
groupA, 32
groupB, 222
groupA, 212
groupB, 213")
mydf2 <- split(mydf$V2, mydf$V1)
mydf2
# $groupA
# [1] 123  32 212
# 
# $groupB
# [1] 222 213 
```

如果您不想要一个`list`（尽管我发现在我的工作区中有很多单个矢量对象更可取），您可以使用`lapply`and `assign`：

```
## Verify that there are no objects currently named `groupA` or `groupB`
ls(pattern = "group")
# character(0)

## Assign each list item to a new object, making use of the `names` of the list
invisible(lapply(names(mydf2), 
                 function(x) assign(x, mydf2[[x]], envir=.GlobalEnv)))

## Verify the presence and values of the new vectors
ls(pattern = "group")
# [1] "groupA" "groupB"
groupA
# [1] 123  32 212
groupB
# [1] 222 213 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:38:57.610

Ananda Mahto 的答案更通用（也很有趣！），但这里有一个简单的子设置方法，它也可以获取两个向量：

```
mydf <- read.csv(header = FALSE, text = "groupA, 123
groupA, 32
groupB, 222
groupA, 212
groupB, 213")

# the dataframe is automatically assigned
# column names V1 and V2...

# vector of V2 for groupA
mydf[mydf$V1 == "groupA",]$V2
[1] 123  32 212

# vector of V2 for groupB
mydf[mydf$V1 == "groupB",]$V2
[1] 222 213 
```

# python - 烧瓶：在侧面应用程序中创建应用程序说“ValueError：尝试在非包中进行相对导入”

> ID：15583841
> 
> 赞同：4
> 
> 时间：2013-03-23T05:48:26.350
> 
> 标签：python, flask

我正在开发一个应用程序，它的结构看起来与

```
facebook/
         __init__.py
         feed/
             __init__.py
             models.py
             business.py
             views.py
         chat/
             __init__.py
             models.py
             business.py
             views.py 
```

我`facebook.__init__.py`的是

```
from flask import Flask
app = Flask(__name__)
import feed.views
import chat.views 
```

我`facebook.runserver.py`的是

```
from . import app
app.run(debug=True) 
```

我`feed.views.py`的是

```
from .. import app

@app.route('/hello')
def hello():
    return 'hello world' 
```

我`chat.views.py`的是

```
from .. import app

@app.route('/chat')
def chat():
    return 'Let's chat' 
```

当我尝试运行此应用程序时`python runserver.py`，我看到错误为

```
Traceback (most recent call last):
  File "facebook/runserver.py", line 1, in <module>
    from . import app
ValueError: Attempted relative import in non-package 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T07:54:12.323

put your `runserver.py` outside of the `facebook` folder and make its content as:

```
from facebook import app
app.run(debug=True) 
```

# c++ - flex 和 bison:C++ 类

> ID：15583844
> 
> 赞同：2
> 
> 时间：2013-03-23T05:49:05.530
> 
> 标签：c++, bison

当我将 list* 指针嵌入到 bison 解析器中时，编译器会报告一个错误，即 'list' 没有命名类型。这是一些必要的部分；如果您需要，我可以发布所有代码。我正在使用最新版本的野牛和 flex。

```
parser.l
%{
#include <stdlib.h>
#include <string.h>
#include "parser.tab.h"
extern void yyerror(const char *);
extern int yylex();
char* outchar;
char* mychars;
unsigned int line_number=1;
%}
%option nounput 
%option noyywrap
%option noinput
%%
"automaton"     {return AUTOMATON;}
"var"       {return VAR;}
"synclabs"  {return SYNCLABS;}
"initially"     {return INITIALLY;}
"loc"       {return LOC;}
"while"     {return WHILE;}
"wait"      {return WAIT;}
"when"      {return WHEN;}
"do"        {return DO;}
"sync"      {return SYNC;}
"goto"      {return GOTO;}
"end"       {return END;}
"forbidden"     {return FORBIDDEN;}
"true"      {return TRUE;}
"TRUE"      {return TRUE;}
"false"     {return FALSE;}
"FALSE"     {return FALSE;}

"="         {return EQ2;}
"=="        {return EQ;}
">="        {return GE;}
"<="        {return LE;}
"'"         {return PRIM;}
":="        {return ASSIGN;}

([0-9]+)(("."[0-9]+)?)((([eE])([+-]?)([0-9]+))?)  {yylval.mystring = strdup(yytext);   return INT;}

[-+<>*/&|(){}:;,.=!]|"["|"]" {return *yytext;}

(["$""?"a-zA-Z]|[_])("$"|"?"|[a-zA-Z]|[0-9]|[_]|[~])* { yylval.mystring =   strdup(yytext); return IDENT; }

"/*"([^*]|("*"+[^*/]))*"*"+"/" /* skip comment */
"//".*                         /* skip comment XS*/
"--".*                         /* skip comment */
[\n] { ++line_number; 

}
[ \t\r]                      
%%

parser.y
%{
#include <stdio.h>
#include <stdlib.h>
#include<list>

using namespace std;

extern int yylex();
extern unsigned int line_number;
void yyerror(const char *msg)
{       
        printf("Parse error in line %d: ", line_number);
        printf("%s\n", msg);
}
Automaton *aut; 
int var_count=0;
string *s;

%}

%union{
char * mystring;
list* s;

};

%token AUTOMATON
%token VAR
%token SYNCLABS
%token INITIALLY
%token LOC
%token WHILE
%token WAIT
%token WHEN
%token DO
%token SYNC
%token GOTO
%token END
%token ASSIGN
%token FORBIDDEN
%token TRUE
%token FALSE
%token <mystring> INT
%token <mystring> IDENT

//%nonassoc '(' ')'
%left  '&'
%left GE LE EQ EQ2
%left '+' '-'
%left '!'
%left '(' ')'
%left PRIM

%%  

program:
commands
;
%%

compile result:
g++ -O2 -w -c -I .  -g -O2 -o lex.yy.o lex.yy.c
In file included from parser.l:4:0:
parser.y:23:2: error： ‘list’does not name a type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:52:59.653

很明显，您的词法分析器代码（即 parser.l）没有`#include <list>`或`using namespace std;`

顺便说一句，如果你厌倦了 flex 和 bison 的怪癖，那么看看[Lemon](http://www.hwaci.com/sw/lemon/)作为 bison 的替代品，它很简单而且非常好，它也有助于你在 '%union 中使用指针的情况'。还可以看看[Ragel](http://www.complang.org/ragel/)作为 flex 的替代品，它更复杂但更出色。

# c# - 使用定位服务时 XDE 崩溃

> ID：15583849
> 
> 赞同：0
> 
> 时间：2013-03-23T05:49:41.063
> 
> 标签：c#, geolocation, windows-phone-8

嘿家伙想知道是否有人可以阐明我的情况。

我正在编写一个应用程序，该应用程序利用位置服务访问 Yelp 并查找附近的企业。当我尝试在 XDE.exe 模拟器上进行调试时遇到了问题。

不知道如何修复它，我试图使用我的 GoogleFu 但无济于事。

```
An exception of type 'System.UnauthorizedAccessException' occurred in mscorlib.ni.dll but was not handled in user code

WinRT information: Your App does not have permission to access location data. Make sure you have defined ID_CAP_LOCATION in the application manifest and that on your phone, you have turned on location by checking Settings > Location.

If there is a handler for this exception, the program may be safely continued. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:57:10.460

那么您是否按照错误消息的说明检查了清单？如果没有该功能，您的应用程序将在尝试进行位置调用时崩溃。

# extjs - sencha touch 中的可滚动面板

> ID：15583851
> 
> 赞同：4
> 
> 时间：2013-03-23T05:50:07.403
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我做了一个面板，里面有很多按钮，就像这样，

```
Ext.define('BeLocal.view.Test', {
       extend: 'Ext.Panel',

       config: {
       fullScreen: true,
       height: 482,
       width: 324,
       scrollable: 'vertical',
       items: [
               {
               xtype: 'button',
               text: 'MyButton1'
               },
               {
               xtype: 'button',
               top: '30%',
               text: 'MyButton2'
               },
               {
               xtype: 'button',
               top: '50%',
               text: 'MyButton3'
               },
               {
               xtype: 'button',
               top: '96%',
               text: 'MyButton4'
               },
               {
               xtype: 'button',
               top: '110%',
               text: 'MyButton5'
               }
               ]
       }

       }); 
```

我现在只能显示 3 个按钮。我希望这个面板可以滚动，这样我就可以通过向下滚动来显示所有按钮，我已经设置了属性**scrollable: 'vertical'**，但它不起作用。当我删除所有按钮的位置时，**顶部：50%**滚动正常工作，但我希望所有按钮都在正确的位置。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:05:07.097

根据文档： [http ://docs.sencha.com/touch/2-1/#!/api/Ext.Button-cfg-top](http://docs.sencha.com/touch/2-1/#!/api/Ext.Button-cfg-top)

> top : Number/String 该组件的绝对顶部位置；必须是有效的 CSS 长度值，例如：300、100px、30% 等。显式设置此值将使该组件变为“浮动”，这**意味着其布局将不再受其所在的容器影响。**

尝试设置样式配置：

```
items: [{
        xtype: 'button',
        text: 'MyButton1'
    },{
        xtype: 'button',
        style:'margin-top: 10%;',
        text: 'MyButton2'
    },{
        xtype: 'button',
        style:'margin-top: 50%;',
        text: 'MyButton3'
    },{
        xtype: 'button',
        style:'margin-top: 96%;',
        text: 'MyButton4'
    },{
        xtype: 'button',
        style:'margin-top: 110%;',
        text: 'MyButton5'
    }] 
```

似乎对我有用。

# scala - scala 中的密码支持

> ID：15583852
> 
> 赞同：2
> 
> 时间：2013-03-23T05:50:07.613
> 
> 标签：scala, neo4j, cypher

Scala 中的 Cypher 是否支持在 neo4j 节点上执行插入、删除和更新等操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T10:22:06.977

我会推荐 AnormCypher：

[https://github.com/AnormCypher/AnormCypher](https://github.com/AnormCypher/AnormCypher)

这是对 Play 2.0 中 Anorm 轻量级 SQL 包装库的 Cypher 版本。您仍然必须编写 Cypher 查询（这不是一件坏事），但它会使提取结果变得非常容易。

# puppet - 无法从远程服务器检索目录：服务器上的错误 400：服务器上的错误 403：禁止请求：

> ID：15583853
> 
> 赞同：0
> 
> 时间：2013-03-23T05:50:11.737
> 
> 标签：puppet

我正在尝试遵循此链接上的文档：http: [//docs.puppetlabs.com/pe/latest/quick_start.html](http://docs.puppetlabs.com/pe/latest/quick_start.html) 当我到达运行的部分时...

```
sudo puppet agent --test 
```

我收到此错误消息...

```
err: Could not retrieve catalog from remote server: Error 400 on SERVER: 
Error 403 on SERVER: Forbidden request: red-cricket-pe-master (xxx.xxx.xxx.xx) access to /facts/red-cricket-agent [save] authenticated at line 45 
warning: Not using cache on failed catalog 
err: Could not retrieve catalog; skipping run 
```

谢谢红

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:02:38.220

在这里找到我的答案：[https ://serverfault.com/questions/491623/puppet-enterprise-2-7-error-400-on-server-error-403-on-server-cant-puppet/493085#493085](https://serverfault.com/questions/491623/puppet-enterprise-2-7-error-400-on-server-error-403-on-server-cant-puppet/493085#493085)

看起来你必须安装控制台。

# matlab - 理解语法

> ID：15583857
> 
> 赞同：1
> 
> 时间：2013-03-23T05:51:55.107
> 
> 标签：matlab, sift

我有这几行很难理解..

```
oframes1 = do_localmax(  difofg.octave{o}, 0.8*thresh, difofg.smin  ) ; 
oframes = [oframes1 , do_localmax( - difofg.octave{o}, 0.8*thresh, difofg.smin)] ; 
```

这里，

1.  do_localmax 是一个函数
2.  thresh 是一个变量
3.  diffofg 也是一个函数

我知道第一行调用函数并传递参数但很难理解第二行以及 diffofg.octave{o} 的语法类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:16:05.160

语法上：

`difofg`不是函数；它是一个变量，可能是一个[结构](http://www.mathworks.com/help/matlab/structures.html)或[类对象](http://www.mathworks.com/help/matlab/matlab_oop/begin-using-object-oriented-programming.html)。`difofg.octave`并从该结构/对象中获取名为或`difofg.smin`的元素。`octave``smin`

`difofg.octave`显然是一个[单元格数组](http://www.mathworks.com/help/matlab/cell-arrays.html)，并`difofg.octave{o}`获取该`o`单元格数组的第 th 个元素。

第二行创建一个包含两个元素的数组：第一个是`oframes1`，第二个是第二次调用的结果`do_localmax`。也许这个等效的代码会让发生的事情更清楚：

```
oframes1 = do_localmax(  difofg.octave{o}, 0.8*thresh, difofg.smin); 
oframes2 = do_localmax( -difofg.octave{o}, 0.8*thresh, difofg.smin);
oframes = [oframes1, oframes2]; 
```

# c# - 复制装箱值

> ID：15583862
> 
> 赞同：1
> 
> 时间：2013-03-23T05:53:18.363
> 
> 标签：c#, boxing

关于拳击的问题...

```
int i = 2;
int j = 3;
int k = 4;
object oi = i;
object oj = j;
object ok = k;

oi = oj;
object o = ok; 
```

最后 2 行是否会导致 2 次新的重新装箱？

将一个装箱值分配给另一个装箱值是什么意思，例如在最后一行的旁边？

像最后一行一样，将装箱的值分配给新的对象变量是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:54:54.837

```
oi = oj;
object o = ok; 
```

装箱的值是对象。只有普通的参考副本。不涉及拳击。还，

> 将一个装箱值分配给另一个装箱值是什么意思，例如在最后一行的旁边？

您没有为`another value`. 您刚刚将值分配给 "variable" `oi`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:54:56.797

好吧，您可以随时检查 IL：

```
// int i = 2;
IL_0000:  ldc.i4.2    
IL_0001:  stloc.0     // i
// int j = 3;
IL_0002:  ldc.i4.3    
IL_0003:  stloc.1     // j
// int k = 4;
IL_0004:  ldc.i4.4    
IL_0005:  stloc.2     // k
// object oi = i;
IL_0006:  ldloc.0     // i
IL_0007:  box         System.Int32
IL_000C:  stloc.3     // oi
// object oj = j;
IL_000D:  ldloc.1     // j
IL_000E:  box         System.Int32
IL_0013:  stloc.s     04 // oj
// object ok = k;
IL_0015:  ldloc.2     // k
IL_0016:  box         System.Int32
IL_001B:  stloc.s     05 // ok
// oi = oj;
IL_001D:  ldloc.s     04 // oj
IL_001F:  stloc.3     // oi
// object o = ok;
IL_0020:  ldloc.s     05 // ok
IL_0022:  stloc.s     06 // o 
```

# html - 效果永久链接 .htaccess 加载 css 文件

> ID：15583864
> 
> 赞同：0
> 
> 时间：2013-03-23T05:53:42.143
> 
> 标签：html, css, .htaccess, hyperlink, permalinks

我有

> localhost/ctr/index.php?page=reload

我使用 htaccess 将它们转换为

> 本地主机/ctr/索引/重新加载

htaccess 它是

```
RewriteEngine on

RewriteRule index/([a-z]+) index.php?page=$1 [NC] 
```

这个作品，出现了带有新格式的url的页面。

但是加载css文件有问题，如下：

```
link href="templates/plugin/bootstrap/css/bootstrap.css" type="text/css" rel="stylesheet" 
```

我认为 css 文件加载受到我在 htaccess 中所做的安排的影响。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:59:10.747

```
RewriteEngine on

RewriteCond %{DOCUMENT_ROOT} !-f
RewriteRule !\.(js|ico|gif|jpg|png|css|html|swf|flv|xml)$ index.php [QSA,L] 
```

试试这个[rewrite-all-url-to-index-php-except-from-serene-assets](https://stackoverflow.com/questions/8543423/rewrite-all-url-to-index-php-except-from-serene-assets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:54:13.417

您需要更改链接以使其绝对：

```
link href="/templates/plugin/bootstrap/css/bootstrap.css" type="text/css" rel="stylesheet" 
```

或者您需要在页眉中添加正确的 URI 基础：

```
<base href="/"> 
```

# c# - 从 Bcrypt 哈希密码中检索文本

> ID：15583865
> 
> 赞同：2
> 
> 时间：2013-03-23T05:53:49.023
> 
> 标签：c#, security, encryption, bcrypt

使用 BCrypt 技术将密码作为哈希值存储到数据库中。尽管与 MD5、SHA-1 等快速散列算法相比，它可能有点慢，但我们决定采用，因为安全性更重要。

在 .Net 中，我使用[http://bcrypt.codeplex.com/实现了](http://bcrypt.codeplex.com/)

```
BCrypt.Net.BCrypt.HashPassword("Password", BCrypt.Net.BCrypt.GenerateSalt(12)); 
```

在我们的站点中，管理员将为新用户创建用户名和密码。

存储散列密码没有问题。但如果管理员想更新密码，他需要查看旧密码。我没有看到任何方法可以对存储在 Bcrypt.Net 中的 DB 中的散列值进行解密。

**有没有办法从 Bcrypt 散列密码生成文本？**但是我同意这应该是不可能的，但是我们有一些场景可以做到这一点:(

**更新：**我决定使用存储在某个表中的默认密码作为纯文本并将该文本散列并存储为用户的密码。当用户登录网站时，他将被迫更改密码，直到他重置。这听起来不错吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T05:58:26.280

按照设计，加密散列是一种单向函数。正是哈希函数的意图是无法逆转。此外，多个输入可以散列到相同的输出。

要求访问旧密码才能设置新密码表明设计存在缺陷。为什么，确切地说，您需要以明文形式访问旧密码才能更新密码？

# java - android更改图像宽度但不保持纵横比

> ID：15583867
> 
> 赞同：1
> 
> 时间：2013-03-23T05:54:34.153
> 
> 标签：java, android, xml, resize, imageview

我需要更改图像宽度

原始图像如下第一行：

![数字](../Images/3621c71eb64705e1f8949ca6293e2615.png)

但是当我改变宽度时，它会保持比例调整原始图像的大小

我需要做一些类似第三张图片的事情

可以改变宽度，不修改原图

我如何通过 android 中的 Java 或 XML 来做到这一点？

xml代码：

```
<ImageView
    android:id="@+id/fill"
    android:layout_width="150dp"
    android:layout_height="32dp"
    android:layout_alignLeft="@+id/BGfill"
    android:layout_centerVertical="true"/> 
```

# jquery - 使用 Node.js 抓取

> ID：15583868
> 
> 赞同：0
> 
> 时间：2013-03-23T05:54:35.497
> 
> 标签：jquery, node.js, screen-scraping

我有一个奇怪的问题-

由于这个网站呈现时间数据的方式很奇怪，我想写一个小解析器。

我正在一个特定的网址上测试我的代码 -

[http://www.sfweekly.com/search/results/?keyword=*&type=events#type:events/page:57/](http://www.sfweekly.com/search/results/?keyword=%2a&type=events#type%3aevents/page:57/)

请注意，当您访问 url 时，页面首先会加载一堆条目，然后更改这些条目。那里发生的事情是它会转到第一页，然后重新定向。我该如何解决？

刮我正在使用

```
jsdom.env({
    html: url,
    scripts:['http://code.jquery.com/jquery.js'],
    done: function(errors,window){
                 //doSomething 
```

我原本以为我可以暂停一下来解决这个问题，但事实并非如此。有什么方法可以让我“监听”重定向并等到真正的页面被加载？我也有一种感觉，可以使用 jquery 替换输入新条目，但我不确定如何测试该理论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:18:59.967

像这样抓取 ajax-y 网站可能会很痛苦。在这种情况下，似乎有一种解决方法，因为您可以在您选择的浏览器中的开发人员工具中窥探并发现 ajax 端点，并直接使用它：

[http://www.sfweekly.com/search/ajaxsearch/type%3aevents/page:57/](http://www.sfweekly.com/search/ajaxsearch/type%3aevents/page:57/)

在某些情况下，故意尝试阻止爬虫的 javascript-y 站点，您必须使用某种无头或自动浏览器的情况。这很慢而且很烦人，如果可以的话，避免它。

# java - android服务器如何知道客户端断开或关闭

> ID：15583869
> 
> 赞同：2
> 
> 时间：2013-03-23T05:54:45.233
> 
> 标签：java, android, sockets, client-server

我有两个android设备，A是服务器，B是客户端，并通过套接字连接，服务器/客户端如何知道对方是断开还是关闭，

我尝试了 isconnect()，但没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T05:58:14.260

如果对端已正常断开连接：

*   `read()`将返回 -1
*   `readLine()`将返回 null
*   `readObject(),` `readUTF()`,`readXXX()`对于任何 XXX 都会抛出 `EOFException

如果对等端异常断开，连接变坏等，任何读取或写入方法都会抛出一个异常，`IOException,`除非没有读取超时的读取可能会永远阻塞：这就是为什么您应该始终使用读取时间（通过`setSoTimeout()`）。

`isConnected()`仅告诉您是否曾经连接或接受过套接字。`isClosed()`只告诉你是否曾经关闭它。这些 API 告诉您的是`Socket`，而不是*连接。*

# python - 在 argparse 中混合位置参数和可选参数

> ID：15583870
> 
> 赞同：3
> 
> 时间：2013-03-23T05:54:54.077
> 
> 标签：python, argparse

当我`argparse`混合位置参数、可选参数和`argparse.REMAINDER`

```
parser = argparse.ArgumentParser()
parser.add_argument('verbose', action="store")
parser.add_argument('--config', '-c', nargs="?", dest="config_file")
parser.add_argument('--dry-run', action="store_true", dest="dryrun")
parser.add_argument('args', nargs=argparse.REMAINDER, action="store") 
```

样品运行：

```
python test.py verose="5" --config config.xml graph --dry-run 
```

预期输出：

```
verbose = "5"
config_file = config.xml
dryrun = True
args = ['graph'] 
```

实际输出：

```
verbose = "5"
config_file = config.xml
dryrun = False
args = ['graph', '--dry-run'] 
```

我的要求是我有`verbose`, `-c`,`--config`和`--dry-run`as 命令行选项，并且命令行提供的任何其他选项都应该存储在列表中，`args`而不管命令行中参数的出现顺序如何。请帮助我做错了什么。还有其他更好的python命令行解析器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T06:03:23.053

我会说你需要的配置是这样的：

```
 parser.add_argument('--verbose', action="store")
    parser.add_argument('-c', '--config', nargs="?", dest="config_file")
    parser.add_argument('--dry-run', action="store_true", dest="dryrun")
    parser.add_argument('args', nargs='*') 
```

我认为您给出的“REMAINDER”参数专门告诉 argparse 模块在 args 中获取其余参数，当它发现第一个参数无法与其余参数匹配时。

如果你想要 0 个或多个参数来`args`使用 '*'，如果你想要至少 1 个 arg 使用 '+' 作为`nargs`参数。

除此之外，我会推荐[argparse 文档](http://docs.python.org/2/howto/argparse.html)，因为有很多可能性已经用所需的类型（例如 int 或文件参数）进行解析。此外，在免费的 Aptana Studio 中创建一个`CLI-argparse`模块为 argparse 提供了一个很好的包装器，其中已经设置了一些标准参数（如详细）。在这种情况下，详细将是一个整数级别。

# php - 当我使用codeigniter的cli时，数据库结果不返回

> ID：15583882
> 
> 赞同：1
> 
> 时间：2013-03-23T05:58:05.853
> 
> 标签：php, mysql, codeigniter

我想做点什么来阅读这个结果。但是，cmd，结果并没有正确出来。

当我使用 codeigniter + CLI

```
<?php
class Tools extends CI_Controller {
    public function message($to="World")
    {
        echo " Hello {$to}! ".PHP_EOL; 
        echo "test1".PHP_EOL;

        $this->load->database();
        echo "test2".PHP_EOL;

        $query = $this->db->query("SELECT * FROM test3");
        echo "test3".PHP_EOL;
        foreach ($query->result() as $row)
        {
            echo $row->pid.PHP_EOL;
            echo $row->mane.PHP_EOL;
            echo $row->title.PHP_EOL;
        }
    }
}
?> 
```

我想在 cmd

```
c:\>php index.php tools message world
Hello world!
test1
c:\> 
```

为什么我无法得到答案？我想

```
c:\>php index.php tools message world
Hello world!
test1
test2
test3
...
....(about database query)
c:\> 
```

# cocoa-touch - 为什么表格视图单元格中的自动布局会导致表格的内容大小被错误地更改？

> ID：15583887
> 
> 赞同：4
> 
> 时间：2013-03-23T05:58:49.840
> 
> 标签：cocoa-touch, uitableview, ios6, autolayout

我正在使用 Xcode 4.6.1，并且我有一个 iOS 6.1 应用程序。

它有一个表格视图，可以向下钻取到另一个表格视图。第二个表格视图使用自定义单元格来显示其数据。然而，第二个表格视图有一个问题：它的内容大小通常是错误的（特别是高度，要么太高要么太短）。这要么导致底部有额外的空间，要么没有足够的空间滚动到底部。

下图显示了我制作的一个测试应用程序的四个屏幕截图，它重现了该问题。我将介绍导致我的问题的步骤。

![我的测试应用程序中的四张图片](../Images/0b96afe3edb465d6ea2193d1e2265795.png)

1.  应用程序加载，并显示第一个表。它有三行向下钻取到第二个表。

2.  我选择第一行，即“列表：0 到 10”。导航控制器将第二个表格推到屏幕上。它有 11 行，并且（正确地）具有 11 行的内容大小。

3.  然后我返回并选择了下一行，即“列表：A 到 P”。第二个表格再次出现在屏幕上，现在它有 16 行。但是，它只有 11 行的内容大小。其他 5 行仍在下方，但内容大小不断反弹到第 11 行。

4.  然后我返回并选择了最后一行，即“List: a to f”。第二个表格再次出现在屏幕上，它有 6 行。但是，它仍然具有 11 行的内容大小。表格视图底部空间太大，底部显示 5 个单元格，其中没有任何内容。

这里的模式是内容大小保持在最初加载时的大小。因此，我选择的第一行将具有正确的内容大小，但所有其他行现在都将保持该大小，无论它们有多少行。这也意味着如果我首先选择了“列表：a 到 f”，它有 6 行，那么所有其他的都会有 6 行的内容大小，因为它保持在我选择的*第一行*的内容大小.

在我的代码中，我自己从不更改内容大小；这一切都是自动发生的。为了弄清楚表格视图何时以及为何改变其内容大小，我在第二个表格的“contentSize”属性上设置了一个观察者。在我这样做之后，我意识到内容大小并没有保持不变，但是当我选择一行时它实际上被更改*了两次*：首先是正确的大小（重新加载表格视图时），然后恢复到旧尺寸（当表格视图出现时）。

所以我试图弄清楚为什么它被恢复到旧的大小。为了查看幕后发生的事情，我让它在每次观察到内容大小发生变化时打印出堆栈跟踪。

在下面，您可以看到前面引导您完成的步骤的控制台日志。但是，为了节省空间并使其更具可读性，我将长堆栈跟踪替换为“（堆栈跟踪类型 A）”之类的消息。稍后我将向您展示它们的详细信息，但现在我只是将它们称为堆栈跟踪类型 A、B 或 C。

```
first table: selected row 0 (List: 0 to 10)
second table: viewDidLoad
OBSERVED CHANGE: contentSize.height = 484 (row count = 11)
(Stack Trace Type A)
OBSERVED CHANGE: contentSize.height = 484 (row count = 11)
(Stack Trace Type B)
second table: viewWillAppear
OBSERVED CHANGE: contentSize.height = 484 (row count = 11)
(Stack Trace Type C)
second table: viewDidAppear
*going back to first table*
second table: viewWillDisappear
second table: viewDidDisappear

first table: selected row 1 (List: A to P)
OBSERVED CHANGE: contentSize.height = 704 (row count = 16)
(Stack Trace Type A)
second table: viewWillAppear
OBSERVED CHANGE: contentSize.height = 484 (row count = 16)
(Stack Trace Type C)
second table: viewDidAppear
*going back to first table*
second table: viewWillDisappear
second table: viewDidDisappear

first table: selected row 2 (List: a to f)
OBSERVED CHANGE: contentSize.height = 264 (row count = 6)
(Stack Trace Type A)
second table: viewWillAppear
OBSERVED CHANGE: contentSize.height = 484 (row count = 6)
(Stack Trace Type C)
second table: viewDidAppear
*going back to first table*
second table: viewWillDisappear
second table: viewDidDisappear 
```

如您所见，它将内容大小恢复为旧大小。在这种情况下，这将是 484，这足以显示 11 个高度为 44 的单元格。如果一切正常，则观察到的与*Stack Trace Type C*相结合的变化将不会发生。所以换句话说，C 型是导致问题的原因。

现在我将向您展示堆栈跟踪的实际外观。请注意，前两个（A 和 B）与问题无关。我展示它们只是为了让您可以将它们与 C 型进行比较/对比，C 型似乎是导致问题的原因。

**（堆栈跟踪类型 A）** 当表格视图因重新加载而更改其内容大小时，堆栈跟踪看起来像这样。

```
(
    0   CustomTableCellTest   0x00002fe0 -[MasterViewController observeValueForKeyPath:ofObject:change:context:] + 320
    1   Foundation            0x00b0d417 NSKeyValueNotifyObserver + 357
    2   Foundation            0x00b26b24 NSKeyValueDidChange + 456
    3   Foundation            0x00adbd60 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 131
    4   Foundation            0x00b48b80 _NSSetSizeValueAndNotify + 185
    5   UIKit                 0x000b57ef -[UITableView(_UITableViewPrivate) _updateContentSize] + 782
    6   UIKit                 0x000c3974 -[UITableView noteNumberOfRowsChanged] + 154
    7   UIKit                 0x000c32dc -[UITableView reloadData] + 769
    8   CustomTableCellTest   0x00004d97 -[MetaMasterViewController tableView:didSelectRowAtIndexPath:] + 567
    9   UIKit                 0x000c7285 -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 1194
    10  UIKit                 0x000c74ed -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 201
    11  Foundation            0x00ad15b3 __NSFireDelayedPerform + 380
    12  CoreFoundation        0x01c55376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
    13  CoreFoundation        0x01c54e06 __CFRunLoopDoTimer + 534
    14  CoreFoundation        0x01c3ca82 __CFRunLoopRun + 1810
    15  CoreFoundation        0x01c3bf44 CFRunLoopRunSpecific + 276
    16  CoreFoundation        0x01c3be1b CFRunLoopRunInMode + 123
    17  GraphicsServices      0x01bf07e3 GSEventRunModal + 88
    18  GraphicsServices      0x01bf0668 GSEventRun + 104
    19  UIKit                 0x00017ffc UIApplicationMain + 1211
    20  CustomTableCellTest   0x000021ed main + 141
    21  CustomTableCellTest   0x00002115 start + 53
) 
```

**（堆栈跟踪类型 B）** 这仅在表视图第一次出现时发生，因此只发生一次。我相信它发生在表格最初加载其视图时。

```
(
    0   CustomTableCellTest   0x00002fe0 -[MasterViewController observeValueForKeyPath:ofObject:change:context:] + 320
    1   Foundation            0x00b0d417 NSKeyValueNotifyObserver + 357
    2   Foundation            0x00b26b24 NSKeyValueDidChange + 456
    3   Foundation            0x00adbd60 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 131
    4   Foundation            0x00b48b80 _NSSetSizeValueAndNotify + 185
    5   UIKit                 0x000b57ef -[UITableView(_UITableViewPrivate) _updateContentSize] + 782
    6   UIKit                 0x000cbc8e -[UITableView _rectChangedWithNewSize:oldSize:] + 261
    7   UIKit                 0x000cc231 -[UITableView setFrame:] + 279
    8   UIKit                 0x000f5014 +[UIViewControllerWrapperView wrapperViewForView:frame:] + 448
    9   UIKit                 0x00110e18 -[UINavigationController _startTransition:fromViewController:toViewController:] + 239
    10  UIKit                 0x0011189b -[UINavigationController _startDeferredTransitionIfNeeded:] + 386
    11  UIKit                 0x00111e93 -[UINavigationController pushViewController:transition:forceImmediate:] + 1030
    12  UIKit                 0x00111a88 -[UINavigationController pushViewController:animated:] + 62
    13  CustomTableCellTest   0x00004e21 -[MetaMasterViewController tableView:didSelectRowAtIndexPath:] + 705
    14  UIKit                 0x000c7285 -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 1194
    15  UIKit                 0x000c74ed -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 201
    16  Foundation            0x00ad15b3 __NSFireDelayedPerform + 380
    17  CoreFoundation        0x01c55376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
    18  CoreFoundation        0x01c54e06 __CFRunLoopDoTimer + 534
    19  CoreFoundation        0x01c3ca82 __CFRunLoopRun + 1810
    20  CoreFoundation        0x01c3bf44 CFRunLoopRunSpecific + 276
    21  CoreFoundation        0x01c3be1b CFRunLoopRunInMode + 123
    22  GraphicsServices      0x01bf07e3 GSEventRunModal + 88
    23  GraphicsServices      0x01bf0668 GSEventRun + 104
    24  UIKit                 0x00017ffc UIApplicationMain + 1211
    25  CustomTableCellTest   0x000021ed main + 141
    26  CustomTableCellTest   0x00002115 start + 53
) 
```

因此，当事情正常工作时，类型 A 和 B 都会发生。但是，当事情*不能*正常工作时，我*也会*得到下一个堆栈跟踪。

**（堆栈跟踪类型 C）** 这是在内容大小恢复到旧大小时发生的堆栈跟踪。

```
(
    0   CustomTableCellTest   0x00003080 -[MasterViewController observeValueForKeyPath:ofObject:change:context:] + 320
    1   Foundation            0x00b0d417 NSKeyValueNotifyObserver + 357
    2   Foundation            0x00b26b24 NSKeyValueDidChange + 456
    3   Foundation            0x00adbd60 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 131
    4   Foundation            0x00b48b80 _NSSetSizeValueAndNotify + 185
    5   UIKit                 0x0007c213 -[UIScrollView _resizeWithOldSuperviewSize:] + 161
    6   UIKit                 0x0005cf2a -[UIView(Geometry) resizeWithOldSuperviewSize:] + 72
    7   UIKit                 0x0005bb28 __46-[UIView(Geometry) resizeSubviewsWithOldSize:]_block_invoke_0 + 80
    8   CoreFoundation        0x01cb85a7 __NSArrayChunkIterate + 359
    9   CoreFoundation        0x01c9003f __NSArrayEnumerate + 1023
    10  CoreFoundation        0x01c8fa16 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
    11  UIKit                 0x0005babf -[UIView(Geometry) resizeSubviewsWithOldSize:] + 149
    12  UIKit                 0x00557dcc -[UIView(AdditionalLayoutSupport) _is_layout] + 143
    13  UIKit                 0x000607ae -[UIView(Hierarchy) layoutSubviews] + 80
    14  UIKit                 0x000682dd -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279
    15  libobjc.A.dylib       0x010e76b0 -[NSObject performSelector:withObject:] + 70
    16  QuartzCore            0x02292fc0 -[CALayer layoutSublayers] + 240
    17  QuartzCore            0x0228733c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468
    18  QuartzCore            0x02287150 _ZN2CA5Layer28layout_and_display_if_neededEPNS_11TransactionE + 26
    19  QuartzCore            0x022050bc _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 324
    20  QuartzCore            0x02206227 _ZN2CA11Transaction6commitEv + 395
    21  QuartzCore            0x022068e2 _ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv + 96
    22  CoreFoundation        0x01c5eafe __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
    23  CoreFoundation        0x01c5ea3d __CFRunLoopDoObservers + 381
    24  CoreFoundation        0x01c3c7c2 __CFRunLoopRun + 1106
    25  CoreFoundation        0x01c3bf44 CFRunLoopRunSpecific + 276
    26  CoreFoundation        0x01c3be1b CFRunLoopRunInMode + 123
    27  GraphicsServices      0x01bf07e3 GSEventRunModal + 88
    28  GraphicsServices      0x01bf0668 GSEventRun + 104
    29  UIKit                 0x00017ffc UIApplicationMain + 1211
    30  CustomTableCellTest   0x000021ed main + 141
    31  CustomTableCellTest   0x00002115 start + 53
) 
```

正如你所看到的，发生了一些 QuartzCore 的东西，这些东西在 Type A 或 B 中是不存在的。此外，在 Type C 的几行中，实际上在幕后调用了带有“OldSize”字样的方法。名字。因此，显然它*确实*将其恢复为“旧尺寸”。但是，我仍然不明白为什么首先要调用这些 QuartzCore 和“OldSize”方法。

我尝试查找“resizeSubviewsWithOldSize”，但我能找到的唯一[文档是](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/doc/uid/20000014-CJADCGFJ)*NSView*（适用于 OS X 应用程序，而不是使用 UIView 的 iOS 应用程序）。文档中的这个描述并没有真正帮助我理解*为什么*在这种情况下调用它。

*但是，即使我不知道为什么要调用它，但我对何时*调用它有一个很好的了解。通过更多的测试，我意识到它会在表格视图出现时恢复到旧的内容大小，有时当它消失时。

例如，当我让一个模态视图覆盖屏幕然后消失时，内容大小实际上改变了 3 次。日志消息看起来像这样。

```
*Modal view entering*
second table: viewWillDisappear
OBSERVED CHANGE: contentSize.height = 484 (row count = 11)
(Stack Trace Type C)
second table: viewDidDisappear

*Modal view exiting*
second table: viewWillAppear
OBSERVED CHANGE: contentSize.height = 484 (row count = 11)
(Stack Trace Type C)
second table: viewDidAppear
OBSERVED CHANGE: contentSize.height = 484 (row count = 11)
(Stack Trace Type C) 
```

因此，更改与重新加载的表视图无关：它与它的出现和消失有关。我猜视图每次出现时都会尝试布局其子视图，因此我的自定义单元格的布局方式似乎存在问题。

最初我认为问题在于我的自定义单元格的设置方式：在我的代码中或在 xib 中。这是因为当我不使用自定义单元格时问题消失了。但是有一次我在自定义单元格xib中关闭了自动布局，问题也消失了。所以显然这个问题与自动布局有关。

为了方便调试，我在xib中设置单元格的方式很简单：单元格上唯一的东西就是一个灰色背景色的UILabel。所有的自动布局约束都是 Interface Builder 的默认约束。您可以在下面看到我的自定义单元格 xib 的样子。

![MasterCell xib](../Images/e1fd5ee5e2bc3d3ada4e89caa6110628.png)

我还尝试删除 UILabel 以便单元格上没有任何内容，然后我打开了自动布局。当我这样做时，问题也消失了。所以我猜想在单元格上设置 UILabel 的方式有问题。这很奇怪，因为它是由 Interface Builder 设置的那些我无法删除的“紫色”默认约束。

在四处寻找有关表格视图单元格中自动布局的信息后，我遇到了[这个问题](https://stackoverflow.com/questions/12600214/contentview-not-indenting-in-ios-6-uitableviewcell-prototype-cell)。显然，Interface Builder 没有正确地将其约束设置为单元格的内容视图。我不确定这是否与我的问题有关，但我还是尝试了。我使用了 Adrian 发布的解决方案，看起来像这样。

```
//  MasterCell.m
//  My custom UITableViewCell subclass

- (void)awakeFromNib {
    [super awakeFromNib];

    for (NSLayoutConstraint *cellConstraint in self.constraints) {

        [self removeConstraint:cellConstraint];

        id firstItem = cellConstraint.firstItem == self ? self.contentView : cellConstraint.firstItem;
        id seccondItem = cellConstraint.secondItem == self ? self.contentView : cellConstraint.secondItem;

        NSLayoutConstraint *contentViewConstraint =
        [NSLayoutConstraint constraintWithItem:firstItem
                                     attribute:cellConstraint.firstAttribute
                                     relatedBy:cellConstraint.relation
                                        toItem:seccondItem
                                     attribute:cellConstraint.secondAttribute
                                    multiplier:cellConstraint.multiplier
                                      constant:cellConstraint.constant];

        [self.contentView addConstraint:contentViewConstraint];
    }
} 
```

然而，虽然它似乎做了它打算做的事情（即更改与内容视图相关的约束而不是单元格本身），但这仍然没有解决我的问题：内容大小仍然恢复到旧尺寸。

*总而言之*，为了澄清这个相当长的问题，这基本上就是我要问的。

为什么当我在自定义表格单元格 xib 中启用自动布局时，当表格出现在屏幕上时，表格视图的内容大小会错误地重新调整回“旧大小”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:04:22.693

您正在为“主”表重新使用相同的表视图控制器实例，但您正在以错误的顺序向它发送消息。

你像这样推动控制器：

```
if (!self.masterViewController) {
    self.masterViewController = [[MasterViewController alloc] init];
}

self.masterViewController.objects = self.masterObjects[indexPath.row];

[self.masterViewController.tableView reloadData];
[self.navigationController pushViewController:self.masterViewController animated:YES]; 
```

如果您只是交换 reloadData 和 push 行，那么您的问题就会消失。

我不完全确定这里发生了什么，但我*认为*问题在于，一旦弹出主控制器，它就没有任何参考框架（双关语！）在重新加载它时计算适当的内容大小，所以它可能没有缓存这个新高度的内容大小。

然后，当视图被推送时，滚动视图突然又有了一个上下文，它知道它已经重新计算了，所以使用缓存的内容大小。无论如何，这就是我从堆栈跟踪中得到的印象（正如你所做的那样）。您选择的第一张桌子总是很好，因为没有旧尺寸可用。如果你用故事板做这个，你每次都会实例化一个新的主控制器，你永远不会注意到问题。

至于为什么自动布局有什么不同，好吧，我只是在这里猜测和挥手，但是在自动布局下，一切都发生在视图控制器生命周期的后期，而不是在显式布局下。如果您一直有自动布局，那么在没有超级视图（因此对其大小没有限制）的视图中，自动布局无法计算出应该是什么大小。这可能是一个错误，但解决方法很简单，正如我所说，通常在将新视图控制器推送到导航堆栈时，你会初始化新的，当它们被弹出时它们会消失，所以你永远不会看到这。

# c# - 当我使用没有连接字符串的服务器资源管理器时如何在客户端系统中安装我的应用程序

> ID：15583890
> 
> 赞同：0
> 
> 时间：2013-03-23T05:59:22.147
> 
> 标签：c#, linq-to-sql, database-connection, server-explorer

我已经添加了一个 Linq to Sql 类，并且在服务器探索中我已经在我的系统中附加了我的 sql 服务器名称和数据库。app.Config 文件中自动创建了一个连接字符串。除此之外，我没有在任何地方写任何连接字符串。我正在创建 DataContext 类对象并使用我的数据库中的数据。

数据上下文类

```
 DtContext.purchasesDtlsDataContext purchasesDC = new slsandPchsLib.DtContext.purchasesDtlsDataContext(); 
```

从数据库中检索数据

```
 var goods = from gds in purchasesDC.goodsrcpts_rd(Id) select gds;
 var goodsDtls = from dtls in purchasesDC.goodsrcptsdtls_rd(Id) select dtls; 
```

因为这我在我的电脑上做得很好。现在我正在尝试在另一台（客户端）计算机上使用我的应用程序。我已将我的数据库附加到 sqlServer 并更改了 App.Config 文件 DataSource 中的服务器名称。我仍然无法连接到数据库。我收到一个错误

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

我该如何解决我的问题

我在 app.config 中的连接字符串是 ....

```
 <connectionStrings>
    <add name="slsandPchsLib.Properties.Settings.SalesPrchsConnectionString"
        connectionString="Data Source=CENSYS07\SQLEXPRESS;Initial Catalog=SalesPrchs;Integrated Security=True"          
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:02:44.403

导致此错误的原因是您的`dbml`文件中的表来自不同的数据库并且您的`connection string`in`app.config`属于不同的数据库。

请检查您的数据库归属于您的`connection string in app.config file`.

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

您可能知道发生此错误是因为系统无法找到您在 app.config 中提到的数据库名称。

# javascript - 使用java脚本在html中加载打开面板

> ID：15583893
> 
> 赞同：2
> 
> 时间：2013-03-23T06:00:21.543
> 
> 标签：javascript, html, css

我正在使用带有 java 脚本和 css 的 html 代码。我正在单击按钮打开面板。面板已打开，但我想在页面加载时打开面板。如何在html中使用页面加载时调用。因为函数是在页面加载时调用但调用不是在页面加载时调用如何转换函数中的类。如何解决这个问题

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Simple Slide Panel</title>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $(".btn-slide").click(function() {
                    $("#panel").slideToggle("slow");
                    $(this).toggleClass("active");
                    return false;
                });
            });
        </script>
        <style type="text/css">
            body {
                margin: 0 auto;
                padding: 0;
                width: 570px;
                font: 75%/120% Arial, Helvetica, sans-serif;
            }
            a:focus {
                outline: none;
            }
            #panel {
                background: #754c24;
                height: 200px;
                display: none;
            }
            .slide {
                margin: 0;
                padding: 0;
                border-top: solid 4px #422410;
                background: url(images/btn-slide.gif) no-repeat center top;
            }
            .btn-slide {
                background: url(images/white-arrow.gif) no-repeat right -50px -50px;
                text-align: center;
                width: 144px;
                height: 31px;
                padding: 10px 10px 0 0;
                margin: 0 auto;
                display: block;
                font: bold 120%/100% Arial, Helvetica, sans-serif;
                color: #fff;
                text-decoration: none;
            }
            .active {
                background-position: right 12px;
            }
        </style>
    </head>
    <body>
        <div id="panel">
            <!-- you can put content here -->
        </div>
        <p class="slide"><a href="#" class="btn-slide">Slide Panel</a>
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:04:25.277

```
$(document).ready(function(){
    $(".btn-slide").click(function(){
        $("#panel").slideToggle("slow");
        $(this).toggleClass("active"); 
        return false;
    });  

    $(".btn-slide").trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:38:58.777

```
 $(document).ready(function(){
        $(".btn-slide").click(function(){
            $("#panel").slideToggle("slow");
          $(this).toggleClass("active"); 
            return false;
        });  

        $(".btn-slide").trigger('click');
   }); 
```

# c# - 如何在新实现的接口或基类之间做出决定？

> ID：15583896
> 
> 赞同：36
> 
> 时间：2013-03-23T06:00:48.903
> 
> 标签：c#, asp.net, interface, base

在实现方面，我应该如何决定选择基本类型还是接口？我试图研究几个例子，但我没有得到完整的想法:(

关于如何和为什么的例子将不胜感激..

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-23T06:04:55.263

基类，无论是否抽象，都可以包含已实现的成员。接口不能。如果您的所有实现都将执行类似的操作，那么基类可能是可行的方法，因为您的所有子类都可以共享基类上成员的相同实现。如果他们不打算共享实现，那么接口可能是要走的路。

例子：

```
class Person
{
    string Name { get; set; }
}

class Employee : Person
{
    string Company { get; set; }
} 
```

Employee 从 Person 继承是有意义的，因为 Employee 类不必定义`Name`属性，因为它共享实现。

```
interface IPolygon
{
    double CalculateArea();
}

class Rectangle : IPolygon
{
    double Width { get; set; }
    double Height { get; set; }

    double CalculateArea()
    {
        return this.Width * this.Height;
    }
}

class Triangle : IPolygon
{
    double Base { get; set; }
    double Height { get; set; }

    double CalculateArea()
    {
        return 0.5 * this.Base * this.Height;
    }
} 
```

因为`Rectangle`和`Triangle`具有如此不同的实现`CalculateArea`，所以它们从基类继承是没有意义的。

如果你做了一个基类，发现里面*只*包含抽象成员，你还不如只用一个接口。

而且，正如 j__m 所说，您不能从多个基类继承，但可以实现多个接口。

我通常首先定义接口，如果我发现自己在我的实现中重复代码，我会创建一个实现接口的基类，并让我的实现从它继承。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-23T06:35:27.170

要决定是使用抽象类还是接口，我觉得这篇文章很有帮助[来源](http://social.msdn.microsoft.com/forums/en-US/csharplanguage/thread/8ad621b8-a915-4d7e-89c3-5dbbc47202fd/)：

> 对我来说，区分一个或另一个案例的一个好方法一直是：
> 
> 1.  是否有许多类可以“组合在一起”并由一个**名词**描述？如果是这样，则以该名词的名称创建一个抽象类，并从中继承类。（一个关键的决定因素是这些类共享功能，你永远不会只实例化一个**Animal** ......你总是会实例化某种**Animal**：你的**Animal**基类的实现） *示例*：**Cat**和**Dog**都可以从抽象继承class **Animal**，这个抽象基类将实现一个方法**void Breathe()**因此，所有动物都会以完全相同的方式做这件事。（我可能会将此方法设为虚拟，以便我可以为某些动物覆盖它，例如 Fish，它的呼吸方式与大多数动物不同）。
>     
>     
> 2.  什么样的**动词**可以应用于我的班级，通常也可以应用于其他人？为每个动词创建一个界面。 *示例*：所有动物都可以喂食，所以我将创建一个名为**IFeedable**的接口并让 Animal 实现它。只有**Dog**和**Horse**可以很好地实现**ILikeable** - 我不会在基类上实现它，因为这不适用于**Cat**。

另请查看此[接口与基类](https://stackoverflow.com/questions/56867/interface-vs-base-class)问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T10:20:14.693

使用抽象类的原因之一是我们必须强制执行一些初始化（如通过构造函数的状态）。

接口不允许您定义构造函数的合同。

在下面的示例中，每个 Animal 对象都应该有一个 NAME。这不能通过接口强制执行。

```
public abstract class Animal
{
    public Animal(string name)
    {
        this.Name = name;
    }

    public string Name 
    { 
        get; 
        private set; 
    }
}

public class Cat : Animal
{
    public Cat(string name)
        : base(name)
    {

    }

    string NoOfLegs { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Animal aCat = new Cat("a");
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-23T06:29:10.507

实际上，它们不一定是相互排斥的。您可以根据代码实现的发展方式同时使用这两种方法。

接口通常是合同的表述。它定义了实现者应该遵守的预期行为。根据**接口编写****公共 api**通常被认为是一种好习惯。这样可以减少与实现细节的耦合，并允许更轻松地重构和维护代码。现在，有资格称为公共 API 的是软件组件，它体现了您的设计中定义的高级交互，并且可以由您自己和其他人在同一项目中或在多个独立范围的项目中重用。 一个**基类** ****已经是**实施**的一部分。是否实现接口。并且它将其潜在的层次结构与特定的实现细节联系起来：对象状态、可覆盖或不可覆盖的方法等。****

 ***** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-23T06:22:06.147

接口是一种更灵活的构造。你只能有一个基类，但你可以实现许多接口。如果您需要一个对象来支持多种行为，但其中不止一种行为需要特定的基类，那么您将无法这样做。

正如 Dan 所指出的，基类在许多语言中具有方便的优势，因为您可以提供基本实现。要使用接口执行此操作，您需要创建一个提供基本实现的类，然后手动将每个接口方法的实现委托给该类 - 几乎没有那么方便。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-16T11:25:55.933

我在这里找到一个类比有帮助：

**抽象基类：-** 汽车制造商可能会开发一种汽油发动机，它有一些变体（1.6、2L 等）。发动机缸体铸造可以被认为是**抽象基类**，即它定义了发动机的基本形状和特征。2L 版本可能有更大的气缸盖等。

**接口：-** 发动机也可以使用各种现成的组件，例如交流发电机、散热器、起动马达等，因此它必须实现由这些组件定义的**接口。**这些组件通常是在不了解可能使用它们的引擎的情况下设计的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-03T08:29:05.023

如果需要，您基本上可以同时使用两者。但通常基类也可以用于继承类中使用的某些方法或属性。如果您创建一个基类，最好将其抽象化；通过在基类中使用虚方法并在继承类中覆盖它并以不同的方式使用，您将更加灵活。

使用接口，您会更加灵活。首先，您在从此接口继承的类之间进行声明。有了这个

*   你让你的代码更具可读性

*   你把你的概念分开，比如从接口A继承的一个类可以连接Mssql数据库，而另一个可以连接Mysql数据库。

*   你的代码变得更易于维护；`Interfaces helps to reduce coupling and therefore allow you to easily interchange implementations for the same concept without the underlying code being affected`

*   您可以使用[依赖注入](https://stackoverflow.com/questions/130794/what-is-dependency-injection)

*   您可以更轻松地创建单元测试。

    您可以在此处查看[此](https://stackoverflow.com/questions/1389434/benefits-of-implementing-an-interface)问题以获取更多信息。****

# javascript - Jquery 和 Jqueryui：使用可调整大小后设置宽度不起作用？

> ID：15583899
> 
> 赞同：0
> 
> 时间：2013-03-23T06:01:18.407
> 
> 标签：javascript, jquery, html, width, resizable

我正在写一个网格来显示任务持续时间。

我在 display:block 中有一组 div，当文档准备好时，我使用 javascript 和 jqueryui 来： 1）将子 div 添加到块 div 2）使子 div 可拖动和调整大小 这很好用。我还想预设 div 的宽度（任务持续时间），但是有一个奇怪的行为：加载文档后 div 不会调整大小。但是，只要我单击 div 边框来调整它的大小，宽度就会“弹出”到我在脚本中使用的值。

这是简化的 HTML

```
<div id="gridcontainer">
    <div id="railing_1" class="railing"></div>      
    <div id="railing_2" class="railing"></div> 
</div> 
```

这是 html 文档头部的 JS：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>

<script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <script type="text/javascript">

            var displayRange = { "slots": "24", "unit":"h","start":"0" };
            var taskList = {
                "tasks": [
                { "id":"1" , "line":"1", "start":"0","duration":"72" }, 
                { "id":"2" , "line":"1", "start":"73","duration":"48" }, 
                { "id":"3" , "line":"2", "start":"0","duration":"120" }
                ]
            };
    </script>
    <script type="text/javascript">
        $().ready(function(){
            var railingId;
            var taskId;
            var jTaskId;
            var oNewP;
            var oText;
            var displayRange = { "slots": "24", "unit":"h","start":"0" };
            var taskList = {
                "tasks": [
                { "id":"1" , "line":"1", "start":"0","duration":"72" }, 
                { "id":"2" , "line":"1", "start":"73","duration":"48" }, 
                { "id":"3" , "line":"2", "start":"0","duration":"120" }
                ]
            };
            //get the task list and create/append the children to each line
            for(var i = 0; i<taskList.tasks.length; i++){
                //alert(taskList.tasks[i].duration);
                railingId = "railing_" + taskList.tasks[i].line;
                taskId = "task_" + taskList.tasks[i].id;
                oNewP = document.createElement("div");
                oText = document.createTextNode(taskList.tasks[i].id);
                oNewP.setAttribute("id",taskId);
                oNewP.setAttribute("class","taskbar");
                oNewP.appendChild(oText);
                document.getElementById(railingId).appendChild(oNewP);
                jTaskId = "#" + taskId;
                $(jTaskId)
                    .draggable({ 
                                grid: [ 24, 44 ],
                                containment: "#gridcontainer",
                                axis: "x, y" 
                                })
                    .resizable({
                                grid: [ 24, 0 ],
                                handles: "e, w",
                                containment: "#gridcontainer"
                                });
            }
         });

/*
Here is where I try to preset one of the tasks as an example; I've also
tried using $('#task_2').width("100");
but didn't work
*/

             $('#task_2').css("width","100px");
     </script> 
```

我已经为这个问题设置了一个 Jsfiddle：

[http://jsfiddle.net/tPUpN/](http://jsfiddle.net/tPUpN/)

您会注意到，如果您尝试调整数字 2 的大小，它会弹出 100px，然后它能够​​根据可调整大小的网格（24px）调整大小

当然，我希望将任务 2 预设为 100...

有任何想法吗？

为混乱的代码道歉。

**编辑** 这似乎与 Jquery 没有任何关系——我尝试过简单地使用 Javascript width 和 setAttribute 方法，而不关心 JQ——但结果是没有调整大小。关于 JQ 的有趣部分是，当我单击以调整大小时，div 会弹出到尝试的大小——这似乎表明文档没有正确“重新加载”（？？）当我单击 div 时，会发生一些神奇的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:09:23.333

在此 Stackoverflow 线程上发现问题的根源：

[display:inline 重置高度和宽度](https://stackoverflow.com/questions/5759554/css-displayinline-resets-height-and-width)

内联元素没有宽度，所以这不是 Javascript 问题。问题在于 CSS 定义。删除了 display: inline 指令，它工作正常。

感谢大家在 SO 中发布一些精彩的信息。

# java - 无法在线程内更新 JDialog GUI

> ID：15583900
> 
> 赞同：1
> 
> 时间：2013-03-23T06:01:24.693
> 
> 标签：java, swing, user-interface, jdialog

请看下面的代码

```
private class EmergencyAlertNotifier implements Runnable, ActionListener
    {
        JDialog dialog = new JDialog();
        int number=0;

        JLabel message;
        JButton yes,no;

        String messageStr;

        public EmergencyAlertNotifier()
        {
            dialog.setLayout(new BorderLayout());

            //The JLabel which will display the number of seconds left
            //before alerting emergency services
            message = new JLabel();

             messageStr="number";

            yes = new JButton("OK");
            yes.addActionListener(this);
            no = new JButton("Cancel");
            no.addActionListener(this);

            JPanel btnPanel = new JPanel();
            btnPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));
            btnPanel.add(yes);
            btnPanel.add(no);

            dialog.add(message,"Center");
            dialog.add(btnPanel,"South");

            dialog.setTitle("Ready To Notify Emergency Fire Services");
            dialog.setVisible(true);
            dialog.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        }

        @Override
        public void run() 
        {
            for(int i=10;i>0;i--)
            {
                message.setText(messageStr+i+" Sec.");

                try
                {
                    Thread.sleep(1000);
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
            }

        }

        @Override
        public void actionPerformed(ActionEvent e) 
        {
            if(e.getSource()==yes)
            {

            }
            else
            {
                dialog.dispose();
            }
        }

    } 
```

线程在上述类之外启动

```
 new Thread(new EmergencyAlertNotifier()).start(); 
```

我正在尝试使用线程内不断变化的数字来更新 JLabel。但是，JLabel 并没有出现在 GUI 中。这是为什么？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T08:13:08.780

*   您的代码中有一些问题`Concurency in Swing`，

*   请我不能以某种方式发表评论，

*   直到`SwingWorker`将在官方 API 中实现，`Runnable#Thread`是标准的解决方法`Workers Thread`，

*   用于生产代码`Runnable#Thread`而不是`SwingWorker`（我的观点，不同意 API 中实现的黑洞）

*   从`Runnable#Thread`到 Swing GUI 的输出需要使用`invokeLater`, for `thread_safe`( `setText`, `append`... ，特别是与 Java6 相比，Java7 中也有更改) 方法

*   使用`util.Timer`for `count_down`，而不是`Thread.sleep()`

修改后的代码，按预期工作

```
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class EmergencyAlertNotifier implements Runnable, ActionListener {

    private JDialog dialog = new JDialog();
    private int number = 0;
    private JLabel message;
    private JButton yes, no;
    private String messageStr;
    private boolean runProcess = true;

    public EmergencyAlertNotifier() {
        dialog.setLayout(new GridLayout());
        //The JLabel which will display the number of seconds left
        //before alerting emergency services
        message = new JLabel();
        messageStr = "number";
        yes = new JButton("OK");
        yes.addActionListener(this);
        no = new JButton("Cancel");
        no.addActionListener(this);
        JPanel btnPanel = new JPanel();
        btnPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));
        btnPanel.add(yes);
        btnPanel.add(no);
        dialog.add(message, "Center");
        dialog.add(btnPanel, "South");
        dialog.setTitle("Ready To Notify Emergency Fire Services");
        dialog.pack();
        dialog.setVisible(true);
        dialog.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        new Thread(this).start();
    }

    @Override
    public void run() {
        while (runProcess) {
            for (int i = 10; i > 0; i--) {
                message.setText(messageStr + " " + i + " Sec.");
                try {
                    Thread.sleep(1000);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            runProcess = false;
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == yes) {
        } else {
            dialog.dispose();
        }
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                EmergencyAlertNotifier ean = new EmergencyAlertNotifier();
            }
        });
    }
} 
```

# php - 如何在 facebook iframe 中添加 div

> ID：15583902
> 
> 赞同：-2
> 
> 时间：2013-03-23T06:02:30.583
> 
> 标签：php, facebook-iframe

我需要像使用蓝色和白色的 facebook 弹出窗口一样更改 iframe 背景颜色。我该如何配置它，这是否可能而不是使用背景图像

在这里，我添加了代码供您查看

```
<div id="fb">
<div id="fb-close"></div>
<div id="fblike">
<div id="fbclose"></div>
<div class="eliminater"></div>
<iframe src="//www.facebook.com/plugins/likebox.php?href=<?php echo esc_url(get_option('fb_likeurl')); ?>&amp;width=402&amp;height=255&amp;colorscheme=light&amp;show_faces=true&amp;border_color=blue;&amp;stream=false&amp;header=false&amp;appId=329902783740649" scrolling="no" frameborder="1" style="border-width: medium medium 71px; border-style: none; border-color: blue; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; border-image: none; margin-top: -21px; width: 397px; height: 239px; margin-left: 8px;background-color:#fff;" allowTransparency="true"></iframe>
</div>
</div> 
```

css 文件在下面

```
#fb {
display:block;
background-color:;
width:100%;
height:100%;
position:fixed;
top:0;
left:0;
z-index:99999;
}

#fb-close {
width:100%;
height:100%
}

#fblike {
background:white;
width:420px;
height:270px;
position:absolute;
top:50%;
left:50%;
margin:-135px 0 0 -210px;
}

#fbclose {
float:right;
cursor:pointer;
background:url(../images/fanclose.png) repeat;
height:15px;
padding:20px;
position:relative;
padding-right:40px;
margin-top:-20px;
margin-right:-22px;
}

.eliminater{
height:1px;
width:366px;
margin:0 auto;
background:#fff;
margin-top:16px;
position:relative;
margin-left:20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:17:59.483

试试这个，我认为这很好。

```
var html = "<style>Background-image:(url:yoururl);</style>";

$("#frameID").contents().find("head").append(html); 
```

# asp.net-mvc - 如何将值从数据库映射到 MVC 4 中的视图模型

> ID：15583903
> 
> 赞同：1
> 
> 时间：2013-03-23T06:02:31.963
> 
> 标签：asp.net-mvc, orm, viewmodel

我在完成一项非常简单的任务时遇到了麻烦。我正在尝试将从数据库检索到的值映射到视图模型。然后我想将它作为模型传递给我的视图。

视图模型称为 EditAdminModelVM，它包含来自称为 UserProfile 的较大类的属性的较小子集。我选择使用视图模型是因为我不希望用户能够更新整个域模型，而只更新其中的一部分。

这是视图模型：

```
public class EditAdminModelVM
{
    [Required]
    [StringLength(50, ErrorMessage = "The {0} must be at least {2} characters long.")]
    [Display(Name = "First name")]
    public string FirstName { get; set; }

    [Required]
    [StringLength(50, ErrorMessage = "The {0} must be at least {2} characters long.")]
    [Display(Name = "Last name")]
    public string LastName { get; set; }

    [Required]
    [MaxLength(250)]
    [EmailAddress]
    public string Email { get; set; }

    [Required]
    //[Remote("doesUserNameExist", "Account", HttpMethod = "POST", ErrorMessage = "Username already exists. Please enter a different User Name.")] //note this checks from client-side only - server side check is built in to membership
    [Display(Name = "Username")]
    public string UserName { get; set; }

    [HiddenInput]
    public int UserId { get; set; }
} 
```

这是控制器 9 虽然它不起作用）：

```
[Authorize(Roles = "Admin")]
    public ActionResult EditAdmin(int id = 0)
    {
        PpDB db = new PpDB();

        var viewModel = new EditAdminModelVM();

        viewModel = db.UserProfiles
             .Where(x => x.UserId == id)
             .Select(x => new EditAdminModelVM
             {
                 FirstName = x.FirstName,
                 LastName = x.LastName,
                 Email = x.Email,
                 UserName = x.UserName
             });

        return View(viewModel);
    } 
```

在这种情况下，.Select 带有下划线，其中显示了有关 IQueryable 的信息。但是如果我尝试设置 var viewModel = new IQueryable; 我得到另一个错误。

我想这可能是一个语法问题。这个数据库查询应该只返回一行，所以我不认为 IQueryable 是必要的，但我不是专家。

如果你能提供一个如何构建这个代码块的工作样本，那么我可以通过例子来学习——对我疲惫的大脑更好。

非常感激！

**更新 KEN** 这是更新后的控制器：

```
 [Authorize(Roles = "Admin")]
    public ActionResult EditAdmin(int id = 0)
    {
        PpDB db = new PpDB();

        List<EditAdminModelVM> viewModel = new List<EditAdminModelVM>();

        viewModel = db.UserProfiles
             .Where(x => x.UserId == id)
             .Select(x => new EditAdminModelVM
             {
                 FirstName = x.FirstName,
                 LastName = x.LastName,
                 Email = x.Email,
                 UserName = x.UserName,
                 UserId = x.UserId
             }).ToList();

        return View(viewModel);
    } 
```

这是视图：

```
@model List<PpModels.Models.EditAdminModelVM>

@{
    ViewBag.Title = "Edit Admin";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

<fieldset>
    <legend>UserProfile</legend>

    @Html.HiddenFor(model => model.UserId)

    <div class="editor-label">
        @Html.LabelFor(model => model.UserName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.UserName)
        @Html.ValidationMessageFor(model => model.UserName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Email)
        @Html.ValidationMessageFor(model => model.Email)

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:16:13.377

更改并追加`var viewModel = new EditAdminModelVM();`到查询的末尾。现在，这个将 EditAdminModelVM 的集合传递给您的视图。在您的视图中迭代此集合以获得所需的输出。`List<EditAdminModelVM> viewModel = new List<EditAdminModelVM>();``ToList()``db.UserProfiles`

**更新：**对于单个实例：

```
[Authorize(Roles = "Admin")]
public ActionResult EditAdmin(int id = 0)
{
    PpDB db = new PpDB();

    var viewModel = new EditAdminModelVM();

    viewModel = db.UserProfiles
         .Where(x => x.UserId == id)
         .Select(x => new EditAdminModelVM
         {
             FirstName = x.FirstName,
             LastName = x.LastName,
             Email = x.Email,
             UserName = x.UserName
         }).FirstOrDefault();

    return View(viewModel);
} 
```

为此，您无需在视图中进行迭代：

`@model ProofPixModels.Models.EditAdminModelVM`在您的视图中使用。

# haskell - 如何在 Haskell 中返回布尔值

> ID：15583908
> 
> 赞同：7
> 
> 时间：2013-03-23T06:03:10.163
> 
> 标签：haskell

我一直在使用 learnyouahaskell 学习 Haskell，并且在我一直在尝试的程序上遇到了问题。我想评估代表三角形边的三个 Num 输入，并查看它们是否代表直角三角形。这是我到目前为止所拥有的：

```
isRight :: (Num a) => a -> a -> a -> Bool
isRight x y z = (x^2 + y^2) == z^2 
```

显然，该功能需要更长的时间以允许不同的边顺序，但由于 GCHI 中的此错误，目前我无法使用该功能：

```
Could not deduce (Eq a) arising from use of '==' from the context (Num a) 
    bound by the type signature for
        isRight :: Num a => a -> a -> a -> Bool
    at isRight.hs:2:1-34 
```

显然，我不明白如何在 Haskell 中返回布尔类型，并且我无法在线找到与此问题有关的任何帮助。如果有人能帮助向我解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-23T06:10:11.073

您的问题不在于返回 Bool。问题是并非类型类的所有成员也是`Num`类型类的成员`Eq`。这将修复您的代码。

```
isRight :: (Num a, Eq a) => a -> a -> a -> Bool
isRight x y z = (x^2 + y^2) == z^2 
```

您可以从您正在阅读的书的相关部分阅读更多关于类型类的信息：[Learn You a Haskell](http://learnyouahaskell.com/types-and-typeclasses#typeclasses-101)。

# database - 如何使用 php 代码将数据从 xml 加载到数据库中？

> ID：15583913
> 
> 赞同：1
> 
> 时间：2013-03-23T06:04:05.923
> 
> 标签：database, insert

我是初学者。我想将数据从 xml 加载到数据库表中。我的目标在下面指出，

1.  设置与任何预定义 MySQL 数据库的连接。
2.  从表 in_rank_raw 中删除所有已处理日期不为空的行并提交。
3.  检查 in_rank_raw 是否为空。如果是，请报告并退出。
4.  从服务器上的预定义路径中查找最新的日期 x.xml 文件。
5.  读取 x.xml 文件数据并将行插入到表 in_rank_raw 中并提交。
6.  将 x.xml 文件移动到另一个位置（预定义路径）。
7.  报告信息已成功导入并退出。

    ```
    Here is an example of xml file(name: x.xml)  :

    <?xml version="1.0" encoding="UTF-8"?>
    <data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:/C:/Program%20Files%20(x86)/Caphyon/Advanced%20Web%20Ranking/transforms/exportrank/exportrankdata.xsd">
        <header><col>Date</col><col>Search Engine</col><col>Keyword</col><col>Website</col><col>Page Rank</col><col>Alexa Rank</col><col>Position</col><col>Previous</col><col>Change</col><col>Best</col><col>Page</col><col>Result Type</col></header>
        <row><cell><val>2013-03-11</val></cell><cell><val>Bing MSN</val></cell><cell><val>latest news</val></cell><cell><val>http://www.cnn.com</val></cell><cell><googlerank><rank><position>9</position><previous>-1</previous><lastdate>-1</lastdate></rank></googlerank></cell><cell><alexarank><rank><position>31</position><previous>-1</previous><lastdate>-1</lastdate></rank></alexarank></cell><cell><val>4</val></cell><cell><val>-</val></cell><cell><val>+</val></cell><cell><val>2</val></cell><cell><val>1</val></cell></row>
        <row><cell><val>2013-03-11</val></cell><cell><val>Google</val></cell><cell><val>sport news</val></cell><cell><val>http://espn.go.com</val></cell><cell><googlerank><rank><position>8</position><previous>-1</previous><lastdate>-1</lastdate></rank></googlerank></cell><cell><alexarank><rank><position>28</position><previous>-1</previous><lastdate>-1</lastdate></rank></alexarank></cell><cell><val>6</val></cell><cell><val>-</val></cell><cell><val>+</val></cell><cell><val>1</val></cell><cell><val>1</val></cell></row>
    </data> 
    ```

    请帮助我开始分析您的代码。谢谢你。

# c++ - 错误 C2084：函数已有主体

> ID：15583918
> 
> 赞同：1
> 
> 时间：2013-03-23T06:04:45.637
> 
> 标签：c++, visual-c++

我不知道我需要做什么来修复这个错误或在这个网站上找到任何东西。基本上我得到错误 C2084：函数 'Calculator::GUI::GUI(void)' 已经有一个主体。我所拥有的只是一个名为 GUI 的 Windows 窗体，添加到 Win32 应用程序计算器中。

在 GUI.h 中：

```
#pragma once

namespace Calculator {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for GUI
/// </summary>

public ref class GUI : public System::Windows::Forms::Form
{

void AddControls();
public:
    GUI()
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //

    } 
```

并在 GUI.cpp

```
#include "GUI.h"

namespace Calculator {

GUI::GUI()
{

}

void DrawButtons();
void DrawLabels();

void GUI::AddControls()
{
    DrawButtons();
    DrawLabels();
} 
```

通过将所有内容放入 GUI.h 文件中，我得到了我想要的工作，但希望将方法的代码放在 .cpp 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:53:15.783

像这样更改标题：

```
public ref class GUI : public System::Windows::Forms::Form
{

void AddControls();
public:
    GUI();
} 
```

你看，标题应该只包含声明并将实现放入 cpp。

# wordpress - 防止 wordpress 以纯文本形式发送密码

> ID：15583920
> 
> 赞同：1
> 
> 时间：2013-03-23T06:05:02.717
> 
> 标签：wordpress

在我的 wordpress 网站上，当用户注册时，它会以纯文本形式发送他们的密码......我如何防止它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:11:52.007

有几种方法可以做到这一点：

1.  使用 SSL。使用 SSL 将对正在发送的信息进行加密，因此任何人都不会看到任何人拦截您的网络。
2.  发送前使用 javascript 加密。这将增加一个虚假的安全层。任何具有任何智能程度的黑客都可以轻松修改所服务的内容或嗅出您的算法。您可以尝试一下[http://pajhome.org.uk/crypt/md5/](http://pajhome.org.uk/crypt/md5/)在提交表单之前加密密码。请记住，这很容易受到损害

总之，使用 SSL 进行故障安全加密

# asp.net - 绑定多个下拉列表，仅更改查询

> ID：15583926
> 
> 赞同：0
> 
> 时间：2013-03-23T06:05:46.203
> 
> 标签：asp.net, data-binding, drop-down-menu

在这里，我绑定了一个 ddl 来填充如下值：Australis(+61)。在另一个地方，我想绑定另一个 ddl 来填充这样的值：澳大利亚。我可以使用相同的代码并更改查询吗？实际上，我在所需位置（不同的 aspx 页面）调用此函数（在单独的类中定义）。那么我可以避免代码冗余，否则我将不得不重复代码

```
public DataSet BindDropDownList()
    {
        DataSet ds = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();
        string strQuery = "SELECT CountryName + '(+' + CountryCode + ')' As CountryName,CountryCode from ACountry";
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds, "AUser");
        con.Close();
        return ds;
    } 
```

这就是我在其中一个 aspx 页面中调用它的方式：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        UserFunctions objBindDDL = new UserFunctions();
        ddlCountryCode.DataSource = objBindDDL.BindDropDownList().Tables["AUser"];
        ddlCountryCode.DataTextField = "CountryName";
        ddlCountryCode.DataValueField = "CountryCode";
        //ddlCountryCode.SelectedText = ddlCountryCode.Items.FindByText("India(+91)");
        ddlCountryCode.DataBind();
} 
```

@Praveen：这是我只想要国家名称的地方

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            UserFunctions objBindDDL = new UserFunctions();
            ddlCountry.DataSource = objBindDDL.BindDropDownList().Tables["AUser"];
            ddlCountry.DataTextField = "CountryName";
            //ddlCountry.DataValueField = "CountryName";
            //ddlCountryCode.SelectedText =  ddlCountryCode.Items.FindByText("India(+91)");
            ddlCountry.DataBind();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:27:48.880

考虑到您的最后一条评论，这样做非常简单：

您需要`CountryName`在您的中单独取值，`resultset`如下所示。

```
string strQuery = "SELECT CountryName,  CountryName + '(+' + CountryCode + ')' As CountryNameCode, CountryCode from ACountry"; 
```

然后每当你绑定你的`dropdownlist`，你只需要改变`DataTextField`

```
 ddlCountryCode.DataTextField = "CountryNameCode";   // For Country name and code
 ddlCountryCode.DataTextField = "CountryName";       // for just country name 
```

你的其余部分`code`将保持不变。

还有一件重要的事情要注意：
不要`dropdownlist`直接绑定你的`page load`. 采用`IsPostBack`

```
protected void Page_Load(object sender, EventArgs e)
{

    if(!IsPostBack)
    {
        // your binding here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:28:32.087

你只需要使用参数，像这样向这个函数添加新参数。

```
public DataSet BindDropDownList(Bool IsIndexPage)
    {
        DataSet ds = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();

        string strQuery = "";
if(IsIndexPage)
{
   strQuery = "SELECT CountryName + '(+' + CountryCode + ')' As CountryName,CountryCode from ACountry";
}
else
{
  strQuery = "SELECT CountryName,CountryCode from ACountry";
}
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds, "AUser");
        con.Close();
        return ds;
    } 
```

# php - 使用 php 和 mysql 显示百分比的可能性

> ID：15583929
> 
> 赞同：0
> 
> 时间：2013-03-23T06:05:57.223
> 
> 标签：php, javascript, mysql, sql, select

Hai 在我的 mysql 数据库中，我有大约 20,000 条记录。用户将提供输入以在屏幕上获得某些结果。现在，当用户提供他的输入并单击提交时，一个 GIF 图像会一直循环直到结果显示在屏幕上。

但我想显示百分比（加载 10%）而不是 GIF 图像。通常用户提供日期范围来获取数据，因此查询将选择给定日期范围内的数据。所以请给我一个想法，我怎么能对用户的百分比

谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:23:13.607

您有几个选择，我假设您只对返回数据的服务器使用一个 AJAX 请求。

1：如果您只做一个 ajax 请求，那么您可以观察的唯一状态是[AJAX 请求状态](https://stackoverflow.com/a/5344186/485048)并根据该状态更改百分比。这样做的问题是在发送请求和从服务器接收结果之间请求的时间有很大的百分比变化。

2：您可以发送多个请求并以某种方式跟踪第一个请求的数据结束位置，并且一次只发送少量数据。这样做的问题是，它会对您必须提出的请求数量征税，而且您最好只返回一次所有数据。

只要您的表得到优化，服务器就不应该花费太多时间将所有数据放在一起。我猜你的主要问题是响应很大（> 1MB）。除非数据只有 20,000 行，否则只需尝试减少您发送的不必要数据，这应该是一个非常快速的请求。

[从这个问题](https://stackoverflow.com/questions/399641/ajax-page-download-progress)的外观来看，有一种方法可以检查下载了多少字节，但它与某些浏览器不兼容。

如果用户的请求返回的结果超过 X 个，您可能最好只限制返回的数据并向用户提供分页选项。

# java - 如何从现有代码生成类图和序列图？

> ID：15583930
> 
> 赞同：3
> 
> 时间：2013-03-23T06:05:58.663
> 
> 标签：java, netbeans, reverse-engineering, class-diagram, sequence-diagram

我有一个需要生成类图和序列图的 Java 代码。我正在使用 netbeans，但代码是 100% 纯手工编码的。如何使用 netbeans 为现有代码生成类图和序列图？

代码被分成包，所以我需要明智地生成类图包。这意味着，例如，图 1 用于包 1，图 2 用于包 2 等。最后我需要将生成的 GUI 作为图像。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:02:27.303

IMO，为您自己编写的代码生成 UML 图是毫无意义的。UML 的价值是作为一种设计辅助，在较小程度上作为一种逆向工程辅助。如果您打算为现有的易于理解的代码生成代码文档，Javadoc 可能比 UML 更有价值，而且工作量要少得多。

另一个问题是生成的 UML 类图往往很丑陋，因为它们往往包含比必要更多的细节，并且因为您需要人眼才能体面地布置事物。序列图可能也是如此。

但是，如果这还没有说服您，这些链接应该可以帮助您做到这一点。

*   [NetBeans 7.0 的 UML 图](http://imagine.kicbak.com/blog/?p=58)

*   [从 NetBeans IDE 生成 UML](https://blogs.oracle.com/JavaFundamentals/entry/generating_uml_from_the_netbeans)

[（免责声明：从这个封闭的问题中抓取 - [Netbeans 7.1 的 UML 自动生成](https://stackoverflow.com/questions/11094415/uml-automated-generation-for-netbeans-7-1)）]

> 最后，我需要将生成的 GUI 作为图像。

使用操作系统提供的工具截取 GUI 屏幕截图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:08:18.930

我刚刚为我的 uni 项目创建了 UML 图。很遗憾看到 Netbeans 已停止支持其较新版本的 UML 插件。如果您也使用像我这样的较新版本（7.3），那么您可以使用第三方工具，即 yWorks UML Doclet 来生成 UML。

它的工作非常好。至少我很开心。看看如何使用它[NetBeans 7.0 和 7.1 UML 插件](http://michelelepri.blogspot.sg/2012/03/netbeans-70-and-71-uml-plugin.html)

希望这可以帮助！

# google-api - 国家特定页面排名

> ID：15583931
> 
> 赞同：0
> 
> 时间：2013-03-23T06:05:59.270
> 
> 标签：google-api, pagerank, google-ranking

Google PageRank API 允许您获取域名的 pagerank，我假设它适用于全球所有注册的域。假设我想在意大利语或西班牙语网站中获得页面排名。有没有办法可以使用 Google 功能在特定 TLD 中列出 pagerank？

如果没有可用的 API，我很难理解它拥有所有有效 TLD 的所有域列表，并且做一些缓慢的数学运算来比较全球排名和 TLD 排名，我认为这根本不是一个解决方案。

所以我的问题是： 1\. 是否有一种 API 方法可以计算特定 TLD / 国家特定域中的 pagerank 2\. 如果没有，该走哪条路？做数学还是？提出你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:51:21.050

不是谷歌，但你可以使用 alexa.com [API](http://aws.amazon.com/awis/)

然后，您可以轻松地按国家/地区获得排名：

[http://www.alexa.com/topsites/category/Top/World](http://www.alexa.com/topsites/category/Top/World)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T13:28:39.697

您可以通过[http://seotoolsforexcel.com](http://seotoolsforexcel.com)等工具获取 PR， PR 将在 2016 年消失！

# java - 如何在java中将特定点的图像旋转一定角度？

> ID：15583933
> 
> 赞同：0
> 
> 时间：2013-03-23T06:06:23.597
> 
> 标签：java, image, rotation, graphics2d

我想围绕特定像素位置而不是围绕图像中心旋转图像。我想将图像旋转小于 90 度。我使用了图形类的旋转功能，但是旋转时图像变得模糊。如何去除这种模糊？有没有特定的功能？这是我现在使用的代码：

BufferedImage oldImage = ImageIO.read(new File("C:/omr/OMR_Rotation_1.jpg"));

BufferedImage newImage = new BufferedImage(oldImage.getWidth(), oldImage.getHeight(),oldImage.getType());

```
 Graphics2D graphics = (Graphics2D) newImage.getGraphics();

            graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                    RenderingHints.VALUE_ANTIALIAS_DEFAULT);

            graphics.rotate(Math.toRadians(-2.3), newImage.getWidth() / 2, newImage.getHeight() / 2);

            graphics.translate((newImage.getWidth() - oldImage.getWidth()) / 2, (newImage.getHeight() - oldImage.getHeight()) / 2);

            //graphics.drawImage(oldImage, 0, 0, oldImage.getWidth(), oldImage.getHeight(), null);
            graphics.drawImage(oldImage, null, 0, 0);

            ImageIO.write(newImage, "JPG", new File("C:/omr/OMR_Rotation_2.jpg"));

            graphics.translate((newImage.getWidth() - oldImage.getWidth()) / 2, (newImage.getHeight() - oldImage.getHeight()) / 2); 
```

# php - 根据我的要求更改客户浏览器中的图像

> ID：15583935
> 
> 赞同：1
> 
> 时间：2013-03-23T06:06:33.940
> 
> 标签：php, mysql, ajax

我有一个朋友打电话给他的客户。他想在他的网站上展示他的产品。但为了确保他们看到他想销售的产品，他希望他们转到一个他可以根据需要更改图像的页面。就像在客户端浏览器中运行 PowerPoint 演示文稿一样。例如，如果客户需要其他功能，他可以显示另一个图像。

1.  在通话期间，客户转到我朋友网站上的特定页面。
2.  显示的图像或 html 数据根据我朋友的要求更改。

这可以通过 AJAX 轻松实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:01:55.970

当然！

客户端：

```
<script type="text/javascript">
//The first image to load
CurrentImage="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif";

//The Image, eg: <img id=imgBox src=foo.jpg>
ImgBox = document.getElementById('imgBox');

function CheckForImg()
{
    var ajaxRequest;  // The variable that makes Ajax possible! 
        try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
        } catch (e){
        try
            {
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Ajax is kinda disabled :(\n you won't be able to do some stuff around :(");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){    
    if(ajaxRequest.readyState == 4){
        var str = ajaxRequest.responseText;
        if(str != CurrentImage) // we have a new image
        {
            ImgBox.src = str;
            currentImage = str;
        }
    }
ajaxRequest.open("GET", "getCurrentImagUrl.php", true);
ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
ajaxRequest.send(null);
}
</script> 
```

现在我们需要一种方法来让客户发布消息，所以我们要么把它放在一个频率上，要么显示一个按钮来按下，这样会更好更高效：

方法1（按钮）：

```
<Button onclick="CheckForImg();">Check For Image!</button> 
```

方法二（定期检查）：

只需调用

```
SetInterval("CheckForImg", 5000); 
```

我会把服务器端留给你:)

欢迎提供任何进一步的帮助。

# ios - UITableView 框架

> ID：15583937
> 
> 赞同：-1
> 
> 时间：2013-03-23T06:06:49.060
> 
> 标签：ios, ipad, uitableview

昨天，我发现了一个奇怪的问题。

我将 a 添加`UITableView`到 a`UIView`中。我将框架设置为`UIView`具有分数的高度（例如 631.333）。我无法滚动`UIView`（在 iPad3 中）。我只是删除分数，`UITableView`可以正常滚动。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:26:51.440

使用此方法将您的分数 Rect 转换为 Integral：

```
CGRect rect = CGRectIntegral(CGRectMake(0, 0.23, 300.77, 425.87));
NSLog(@"%@",NSStringFromCGRect(rect)); 
```

# plsql - 错误：PLS-00103：在预期以下情况之一时遇到符号“END”

> ID：15583940
> 
> 赞同：1
> 
> 时间：2013-03-23T06:07:56.090
> 
> 标签：plsql, oracle10g, sqlplus

我写了以下包和包体：

```
create or replace package discounts
is
g_id number := 7839;
discount_rate number := 0.0;
procedure display_price(p_price number);
end;
/
create or replace package body discounts
is
procedure display_price(p_price number)
is
  begin
     dbms_output.put_line('Discount rate 1:'||discount_rate); 
     dbms_output.put_line('Discounted '||to_char(p_price * nvl(discount_rate,0)));
     dbms_output.put_line('Discount rate 2:'||discount_rate); 
  end;
begin
  dbms_output.put_line('Discount rate 3:'||discount_rate); 
  discount_rate := 0.10;
  dbms_output.put_line('Discount rate 4:'||discount_rate); 
end;
/ 
```

上面写着“在会话中第一次调用包时，discount_rate 的值设置为 0.10”。我没有完全理解这一点，这就是为什么我每次都检查贴现率的值。我键入以下内容来调用：

```
SQL> execute discounts.display_price(1000);
Discount rate 3:0
Discount rate 4:.1
Discount rate 1:.1
Discounted 100
Discount rate 2:.1 
```

然后我再次调用了变量：

```
 begin
    dbms_output.put_line('Discount rate :'||discounts.discount_rate);
  end;
  SQL> /
  Discount rate :.1 
```

然后我键入“exit”关闭 SQL *PLUS。我再次打开 SQL *PLUS 并输入相同的代码：

```
 begin
    dbms_output.put_line('Discount rate :'||discounts.discount_rate);
  end; 
```

我认为它不会初始化变量，但我得到了错误：

```
 ERROR at line 3:
  ORA-06550: line 3, column 1:
  PLS-00103: Encountered the symbol "END" when expecting one of the following:
  := . ( % ;
  The symbol ";" was substituted for "END" to continue. 
```

错误是什么？我是准备认证考试的 PL/SQL 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:34:52.390

抱歉，我无法重现您显示的错误：

```
C:\>sqlplus user/password

SQL*Plus: Release 11.2.0.2.0 Production on Sat Mar 23 11:31:19 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production

SQL> set serveroutput on
SQL> execute discounts.display_price(1000);
Discount rate 3:0
Discount rate 4:.1
Discount rate 1:.1
Discounted 100
Discount rate 2:.1

PL/SQL procedure successfully completed.

SQL> begin
  2    dbms_output.put_line('Discount rate :'||discounts.discount_rate);
  3  end;
  4  /
Discount rate :.1

PL/SQL procedure successfully completed.

SQL> exit
Disconnected from Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production

C:\>sqlplus user/password

SQL*Plus: Release 11.2.0.2.0 Production on Sat Mar 23 11:31:50 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production

SQL> set serveroutput on
SQL> begin
  2    dbms_output.put_line('Discount rate :'||discounts.discount_rate);
  3  end;
  4  /
Discount rate 3:0
Discount rate 4:.1
Discount rate :.1

PL/SQL procedure successfully completed.

SQL> 
```

# bash - 如何删除“查找”结果输出中的第一个和最后一个文件夹？

> ID：15583948
> 
> 赞同：2
> 
> 时间：2013-03-23T06:09:01.657
> 
> 标签：bash

我想按文件夹名称的一部分搜索文件夹，我知道这在这类文件夹中很常见。我像这样在 bash 脚本中使用了“查找”命令

```
find . -type d -name "*.hg" 
```

它只是打印出从当前目录到找到的文件夹本身的整个路径。foldr 名称有“.hg”。然后我尝试使用“sed”命令，但我无法解决路径的最后一部分。我决定让以 .hg 结尾的文件夹名称将其保存在一个变量中，然后使用“sed”命令从输出中删除最后一个目录。我用它来获取最后一部分，并尝试将结果保存到一个变量中，没有运气。

```
find . -type d -name "*.hg"|sed 's/*.hg$/ /'

find . -type d -name "*.hg"|awk -F/ '{print $NF} 
```

这只是打印出文件名，这里是最后带有 .hg 的文件夹。然后我使用不同的方法

```
for i in $(find . -type d -name '*.hg' ); 
do
    $DIR = $(dirname ${i})
    echo $DIR
done 
```

这也不起作用。谁能给我任何提示以使其有效。是的，这是家庭作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:23:33.380

您可以使用[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)：

```
d=path/to/my/dir

d="${d#*/}" # remove the first dir
d="${d%/*}" # remove the last dir
echo $d     # "to/my" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:31:43.443

您遇到的一个问题是您在 sed 脚本中使用的模式 - bash 和 find 命令都使用了不同的模式语言。

他们使用一种非常简单的正则表达式语言，其中 * 表示任意数量的任意字符，而 ? 表示任何单个字符。sed 命令使用更丰富的正则表达式语言，其中 * 表示任意数量的前一个字符，. 表示任何字符（除此之外还有很多）。

因此，要删除 find 传递的路径的最后一个组件，您需要使用以下 sed 命令： sed -e 's,/[^/].hg,,'

或者，您可以使用 dirname 命令。将 find 命令的输出通过管道传输到 xargs（它将运行一个将标准输入作为参数传递给命令的命令：

xargs -i 目录名

@Pamador - 这很奇怪。这个对我有用。只是为了解释一下： sed 命令需要用单引号引起来，以防止任何不需要的 shell 扩展。's' 后面的字符是逗号；我们在这里所做的是更改 sed 用来分隔替换命令的两个部分的字符，这意味着我们可以使用斜杠字符而不必在没有前面的反斜杠的情况下对其进行转义。下一部分匹配任何字符序列，除了斜杠后跟任何字符，然后是 hg。老实说，我应该用 $ 将模式锚定到行尾，但除此之外它很好。

我用它测试过

```
echo "./abc/xxx.hg" | sed -e 's,/[^/]\.hg$' 
```

它打印了 ./abc

我误会你想做什么了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T20:39:01.060

```
find . -type d -name "*.hg" | awk -v m=1 -v n=1 'NR<=m{};NR>n+m{print line[NR%n]};{line[NR%n]=$0}' 
```

awk 参数：

*   m = 要从输出开头删除的行数
*   n = 要从输出末尾删除的行数

奖励：如果您想从末尾删除 1 行并且安装了 coreutils，您可以这样做： `find . -type d -name "*.hg" | ghead -n -1`

# mysql - mysql查询删除where子句中的空格

> ID：15583951
> 
> 赞同：1
> 
> 时间：2013-03-23T06:09:21.747
> 
> 标签：mysql, sql

```
$query="SELECT * FROM tablename where fieldname='".$folders['name']."'"; 
```

上面的行是我的查询，其中 Where 子句中的字段包含数据之间的空格。如何删除该文件中存在的空格..例如在 where 子句中使用修剪或替换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:11:10.410

如果要删除数据中存在的所有空格，则可以`Replace()`使用空字符，例如

```
$var = $folders['name'];
$query = "SELECT * FROM tablename where REPLACE(fieldname, ' ','') = '$var'"; 
```

但请记住，它可以杀死索引，因此查询将执行全表扫描，从而导致大型数据库速度变慢。

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# qt - 测试 QT 测试项目时出错

> ID：15583960
> 
> 赞同：0
> 
> 时间：2013-03-23T06:11:35.693
> 
> 标签：qt, makefile, qmake, kubuntu

我已经开始在 Kubuntu 上使用 QT。我首先通过包管理器安装了 g++。然后我安装了 QT 5.0.1。然后我做了一个测试项目来检查一切是否正确。然后我遇到了以下问题。- 找不到 -lGL - collect2：错误：Id 返回 1 退出状态

我在编译输出中看到

```
11:32:05: Running steps for project untitled2...
11:32:05: Configuration unchanged, skipping qmake step.
11:32:05: Starting: "/usr/bin/make" -w
make: Entering directory `/home/harsh/Desktop/untitled2-build-Desktop_Qt_5_0_1_GCC_64bit-Debug'
g++ -m64 -Wl,-rpath,/home/harsh/Qt5.0.1/5.0.1/gcc_64 -Wl,-rpath,/home/harsh/Qt5.0.1/5.0.1/gcc_64/lib -o untitled2 main.o mainwindow.o moc_mainwindow. -L/usr/X11R6/lib64 -L/home/harsh/Qt5.0.1/5.0.1/gcc_64/lib -lQt5Widgets -lQt5Gui -lQt5Core -lGL -lpthread 
/usr/bin/ld: cannot find -lGL
collect2: error: ld returned 1 exit status
make: *** [untitled2] Error 1
make: Leaving directory `/home/harsh/Desktop/untitled2-build-Desktop_Qt_5_0_1_GCC_64bit-Debug'
11:32:05: The process "/usr/bin/make" exited with code 2.
Error while building/deploying project untitled2 (kit: Desktop Qt 5.0.1 GCC 64bit)
When executing step 'Make' 
```

请帮我修复这些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:00:33.470

Qt != QT

错误告诉你出了什么问题，编译器找不到`libGL.so`. 它通常在 /usr/lib64 中。

# c - C将char数组的部分转换为double

> ID：15583965
> 
> 赞同：1
> 
> 时间：2013-03-23T06:12:19.810
> 
> 标签：c, pointers, casting, char, atof

我想将 char 数组的一部分转换为 double。例如我有：

```
char in_string[] = "4014.84954"; 
```

假设我想将第`40`一个转换为带有 value 的 double `40.0`。到目前为止我的代码：

```
#include <stdio.h>
#include <stdlib.h> 

int main(int arg) {
  char in_string[] = "4014.84954";
  int i = 0;
  for(i = 0; i <= sizeof(in_string); i++) {
    printf("%c\n", in_string[i]);
    printf("%f\n", atof(&in_string[i]));
  }
} 
```

在每个循环`atof`中，它将 char 数组从我提供的起始指针一直转换到数组的末尾。输出是：

```
4
4014.849540
0
14.849540
1
14.849540
4
4.849540
.
0.849540
8
84954.000000   etc... 
```

如何将 char 数组的一部分转换为 double？这必须是模块化的，因为我真正的 input_string 要复杂得多，但我会确保 char 是数字 0-9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:26:08.610

假设以下内容应该起作用：

> 我将确保 char 是数字 0-9。

```
double toDouble(const char* s, int start, int stop) {
    unsigned long long int m = 1;
    double ret = 0;
    for (int i = stop; i >= start; i--) {
        ret += (s[i] - '0') * m;
        m *= 10;
    }
    return ret;
} 
```

例如对于字符串`23487`，该函数将执行以下计算：

```
ret = 0
ret += 7 * 1
ret += 8 * 10
ret += 4 * 100
ret += 3 * 1000
ret += 2 * 10000
ret = 23487 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:22:45.303

您可以将所需数量的字符串复制到另一个`char`数组，空终止它，然后将其转换为双精度。例如，如果您想要 2 位数字，请将您想要的 2 位数字复制到`char`长度为 3 的数组中，确保第 3 个字符是空终止符。

或者如果你不想做另一个`char`数组，你可以备份char数组的第(n+1)个char，用空终止符（即0x00）替换它，调用`atof`，然后将空终止符替换为备份值。这将`atof`停止解析您放置空终止符的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T06:28:26.637

那怎么样，`NULL`在正确的位置插入，然后将其恢复为原始字母？这意味着您将操纵 char 数组，但最终会将其恢复为原始数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T06:32:43.390

只需使用[sscanf](http://linux.die.net/man/3/scanf)。使用格式“ld”并检查返回值是否为 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T06:30:08.940

您可以创建一个函数，使工作在临时字符串中（在堆栈上）并返回结果双精度：

```
double atofn (char *src, int n) {
  char tmp[50]; // big enough to fit any double

  strncpy (tmp, src, n);
  tmp[n] = 0;
  return atof(tmp);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T06:58:59.183

它可以比[sscanf](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fscanf.html)简单多少？

```
#include <assert.h>
#include <stdio.h>

int main(void) {
    double foo;
    assert(sscanf("4014.84954", "%02lf", &foo) == 1);
    printf("Processed the first two bytes of input and got: %lf\n", foo);

    assert(sscanf("4014.84954" + 2, "%05lf", &foo) == 1);
    printf("Processed the next five bytes of input and got: %lf\n", foo);

    assert(sscanf("4014.84954" + 7, "%lf", &foo) == 1);
    printf("Processed the rest of the input and got: %lf\n", foo);
    return 0;
} 
```

# jquery - 悬停时显示元素并在悬停结束时隐藏

> ID：15583966
> 
> 赞同：2
> 
> 时间：2013-03-23T06:13:03.210
> 
> 标签：jquery

我想在#original 悬停时显示#hover，并带有淡入。当用户停止将鼠标悬停在#original 上时，#hover 应该会淡出。

我正在使用这段代码。使用它，元素在悬停时显示，但在悬停结束时它不会淡出。

```
$('#hover').hide();

$("#original").hover(function () {
$('#hover').fadeIn('');
}); 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:14:19.353

`.hover`有两个回调。

**句法**

```
.hover( handlerIn(eventObject), handlerOut(eventObject) ); 
```

> **描述：**将两个处理程序绑定到匹配的元素，在鼠标指针进入和离开元素时执行。

```
$("#original").hover(function () {
  $('#hover').fadeIn();
},function () {
  $('#hover').fadeOut();
}); 
```

### [**`Official Document`**](http://api.jquery.com/hover/)

# ruby-on-rails - 我应该将中等大小的 const Array 放在 Rails 的哪里？

> ID：15583969
> 
> 赞同：1
> 
> 时间：2013-03-23T06:13:51.540
> 
> 标签：ruby-on-rails, ruby, rubygems

我有大约50个单词，将来永远不会像这样改变。

```
FRUITS = [
  "Apple",
  "The strawberry",
  "Grapes",
  ...
  ...
  "Kiwi",
  "Grapefruit",
  "Mellon"
] 
```

当然，我可以把它放在 Class 的顶部，但是代码会太长.. 你知道管理这种中等大小的 const 数组的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:23:14.003

您可以将所有这些常量放入一个 YML 文件中。

在类的模型/顶部，像这样加载它：

```
FRUITS = YAML.load_file('path/to/file')['FRUITS'] 
```

在您的情况下，yml 文件可以包含所有这些全局常量，例如水果、蔬菜等。使维护/修改所有这些全局列表变得容易...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:21:55.590

你可以把它放在一个模块中：

```
module MyFruitsList
  FRUITS = [
    ...
  ]
end 
```

然后将其包含在您的课程中：

```
class MyClass
  include MyFruitsList
end 
```

# microsoft-metro - For循环不等待winjs承诺完成

> ID：15583972
> 
> 赞同：1
> 
> 时间：2013-03-23T06:14:23.400
> 
> 标签：microsoft-metro, winjs

## For循环不等待winjs承诺完成

```
for (var j = 0; j < magazineResult[0].data.length; j++) {
        downRequest[0].data[j].COVER_PAGE_THUMB = parentUrl + eval(JSON.stringify(downRequest[0].data[j].COVER_PAGE_THUMB));

        // Create a new download operation.
        downloadFile(eval(magazineResult[0].data[j].COVER_PAGE_THUMB),eval(JSON.stringify(magazineResult[0].data[j].COVER_PAGE_THUMB)));
        var url = downRequest[0].data[j].COVER_PAGE_THUMB;
        var imgPath = downRequest[0].data[j].ISSUE_ID;
        var imgExtension = url.substring(url.lastIndexOf('.') + 1);
        var fileName = imgPath + "." + imgExtension;
        var promise = Windows.Storage.ApplicationData.current.localFolder.createFileAsync(fileName, Windows.Storage.CreationCollisionOption.replaceExisting);
        // Assign the completion handler function.
        promise.done(function (newFile) {
            MagazineDownLoad.downloadFile(url, fileName, j, newFile);
        });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:59:22.387

如果您尝试`MagazineDownLoad.downloadFile`异步操作，则必须修改它的定义：

```
// in MagazineDownload
function downloadFile(url, filename, j, newfile){
    return new WinJS.Promise(function (complete, error, progress) {
        var returnValue;
        //do the stuff that you do and assign something to returnValue
        complete(returnValue);
    });
} 
```

然后你可以异步使用它：

```
for (var j = 0; j < magazineResult[0].data.length; j++) {
    downRequest[0].data[j].COVER_PAGE_THUMB = parentUrl + eval(JSON.stringify(downRequest[0].data[j].COVER_PAGE_THUMB));

    // Create a new download operation.
    downloadFile(eval(magazineResult[0].data[j].COVER_PAGE_THUMB),eval(JSON.stringify(magazineResult[0].data[j].COVER_PAGE_THUMB)));
    var url = downRequest[0].data[j].COVER_PAGE_THUMB;
    var imgPath = downRequest[0].data[j].ISSUE_ID;
    var imgExtension = url.substring(url.lastIndexOf('.') + 1);
    var fileName = imgPath + "." + imgExtension;
    var promise = Windows.Storage.ApplicationData.current.localFolder.createFileAsync(fileName, Windows.Storage.CreationCollisionOption.replaceExisting);
    // Assign the completion handler function.
    promise.done(function (newFile) {
        MagazineDownLoad.downloadFile(url, fileName, j, newFile).done(function(result){
            //do some more stuff with the result
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:49:31.360

异步运行，您的`WinJS.Promise()`for 循环同步运行。您正在经历的事情是意料之中的。如果你想对你的动作进行排队，你不应该执行一个循环，而是在你`done()`被调用时排队一个新的动作。像这样的东西：

```
var index = 0, data = magazineResult[0].data;
function queueDownload() {
    // Duplicate all needed logic here from your question
    var promise = Windows.Storage.ApplicationData.current.localFolder.createFileAsync(fileName, Windows.Storage.CreationCollisionOption.replaceExisting);
    // Assign the completion handler function.
    promise.done(function (newFile) {
        MagazineDownLoad.downloadFile(url, fileName, j, newFile);
        if (index < data.length) {
            queueDownload(++index);
        }
    });
}
queueDownload(index); 
```

# php - 在任何 php 页面上获取 json 值

> ID：15583973
> 
> 赞同：0
> 
> 时间：2013-03-23T06:14:34.390
> 
> 标签：php, javascript, json

我正在创建 json 对象，但无法在 php 中访问它的值。我正在尝试访问 php 中的 json 对象并将该对象分配给 php 变量。我的 js 代码是

```
var arr= [];
 var data={ "tab" : 'system' };
jObjArr = arr.push(data);
 var JSONstr = JSON.stringify(jObjArr); 
```

我错过了什么？

我尝试在 php.ini 中获取该页面上的选项卡值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:34:18.400

尝试传递简单对象而不是发送数组：

```
 function send_me() {
        //var arr = [];
        var data = { "tab": 'system' };
        //jObjArr = arr.push(data);
        //var JSONstr = JSON.stringify(data);
        $.ajax({
            url: "a_blank.php",
            type:"post",
            data: data,
            success: function (response) {
                alert(response);
            }
        });
    } 
```

在 php 页面方面，只需获取：

```
 if($_SERVER["REQUEST_METHOD"]=="POST")
     {
      print_r($_POST['tab']);
       die();
     } 
```

# three.js - Three.js SceneUtils 没有 traverseHierarchy ！！！它在哪里？

> ID：15583974
> 
> 赞同：2
> 
> 时间：2013-03-23T06:14:52.620
> 
> 标签：three.js, webgl, updates

我没有更新系统中的 three.js 库。今天更新了three.js文件。但是我遇到了这个错误：“Uncaught TypeError: Object # has no method 'traverseHierarchy'”。

我用它来检测交叉点：在线代码在这里：[https ://dl.dropbox.com/u/44791710/test/simple2.html](https://dl.dropbox.com/u/44791710/test/simple2.html)

```
function Intersect(event) {
    event.preventDefault();
    var mousex = (event.clientX / window.innerWidth) * 2 - 1;
    var mousey = -(event.clientY / window.innerHeight) * 2 + 1;
    var vector = new THREE.Vector3(mousex, mousey, 1);

    var toIntersect = [];
    THREE.SceneUtils.traverseHierarchy(scene, function (child) {
        if (child instanceof THREE.Mesh) {
            toIntersect.push(child);
        }
    });
    var projector = new THREE.Projector();
    projector.unprojectVector(vector, camera);
    var ray = new THREE.Raycaster(camera.position,vector.sub(camera.position).normalize());
    var intersects = ray.intersectObjects(toIntersect);
    if (intersects.length > 0) {
        for (var j = 0; j < intersects.length ; j++){
                target = intersects[j].object;
                console.log('Intersects at ' + mouse.x + '/' + mouse.y + ':');
                for(var i = 0, m = intersects.length; i<m; i++){
                     console.log(intersects[i].object.id, intersects[i]);
                }
        }
    }
} 
```

我需要做什么样的改变？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T20:09:12.603

您应该替换`scene.traverse(scene, function (child) {`为`scene.traverse(function (child) {`（我无法添加评论，所以我创建了一个答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:04:31.963

正如[迁移](https://github.com/mrdoob/three.js/wiki/Migration)指南所述，在 r51 -> r52 中：

> 将 SceneUtils.traverseHierarchy 替换为 object.traverse。

`object`表示任何`THREE.Object3D`实例，例如`THREE.Mesh`或`THREE.Scene`。所以，而不是`THREE.SceneUtils.traverseHierarchy`，尝试`scene.traverse`。

# list - haskell 递增对的无限列表

> ID：15583975
> 
> 赞同：4
> 
> 时间：2013-03-23T06:15:07.997
> 
> 标签：list, haskell, infinite

> `:: [(Integer, Integer)]`创建一个包含形式对的无限列表对`(m,n)`，其中 m 和 n 中的每一个都是 的成员`[0 ..]`。另一个要求是，如果`(m,n)` 是列表的合法成员，`(elem (m,n) pairs)`则应`True`在有限时间内返回。违反此要求的对的实现被视为非解决方案。

****新鲜编辑感谢您的意见，让我们看看我是否可以取得一些进展****

```
 pairs :: [(Integer, Integer)]
    pairs = [(m,n) | t <- [0..], m <- [0..], n <-[0..], m+n == t] 
```

像这样的东西？我只是不知道它会在有限的时间内返回 True 。

我觉得这个问题的措辞 elem 不一定是我回答的一部分。只要你调用`(elem (m,n) pairs)`它就应该返回true。听起来对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T06:58:42.013

忽略该`helper`方法，您拥有的列表理解*将*列出所有对，但元素的顺序是一个问题。您将拥有无限多对 like `(0, m)`，*然后是*无限多对 like `(1, m)`。当然`elem`将永远迭代所有`(0, m)`从未到达的对`(1, m)`等`(2, m)`。

我不确定你为什么有这个`helper`方法——有了它，你只是在构建一个配对列表，`[(0,0), (1,1), (2,2), ...]`因为你已经过滤了`m = n`. 那是要求的一部分吗？

就像@hammar 建议的那样，从 (m, n) 对开始`0 = m + n`并列出。然后列出对 (m, n) 其中`1 = m + n`。然后您的列表将如下所示`[(0,0), (0,1), (1,0), (0,2), (1,1), (2,0), ...]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:32:12.653

辅助函数确保pairs 是一个形式的列表`[ (0,0) , (1,1) , (2,2) ... ]`。

所以`elem ( m , n )`对可以实现为：

```
elem (m , n) _ |  m == n    = True
               |  otherwise = False 
```

这是一个恒定时间的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:45:53.090

我第一次发帖

```
Prelude> let pairs = [(m, n) | t <- [0..]
                     , let m = head $ take 1 $ drop t [0..] 
                     , let n = head $ take 1 $ drop (t + 1) [0..]] 
```

我相信这回答了教授设定的三个条件。但是hammar指出，如果我选择这个列表作为答案，即形式为(t, t+1)的对的列表，那么我还不如选择列表

```
repeat [(0,0)] 
```

好吧，这两个似乎都回答了教授的问题，考虑到似乎没有提到列表必须包含[0..] 和 [0..] 的*所有组合。*

除此之外，hammer 帮助我了解如何列出所有组合，通过从有限列表构建无限列表来促进有限时间内对 elem 的评估。这里还有另外两个有限列表——没有 Hammar 对对角线的建议那么简洁——它们似乎构建了 [0..] 和 [0..] 的所有组合：

```
edges = concat [concat [[(m,n),(n,m)] | let m = t, n <- take m [0..]] ++ [(t,t)] 
      | t <- [0..]]

*Main> take 9 edges
[(0,0),(1,0),(0,1),(1,1),(2,0),(0,2),(2,1),(1,2),(2,2)] 
```

构造边 (t, 0..t) (0..t, t) 和

```
oddSpirals size = concat [spiral m size' | m <- n] where
  size' = if size < 3 then 3 else if even size then size - 1 else size
  n = map (\y -> (fst y * size' + div size' 2, snd y * size' + div size' 2)) 
          [(x, t-x) | let size' = 5, t <- [0..], x <- [0..t]]
  spiral seed size = spiral' (size - 1) "-" 1 [seed]
  spiral' limit op count result
    | count == limit =
       let op' = if op == "-" then (-) else (+)
           m = foldl (\a b -> a ++ [(op' (fst $ last a) b, snd $ last a)]) result (replicate count 1)
           nextOp = if op == "-" then "+" else "-"
           nextOp' = if op == "-" then (+) else (-)
           n = foldl (\a b -> a ++ [(fst $ last a, nextOp' (snd $ last a) b)]) m (replicate count 1)
           n' = foldl (\a b -> a ++ [(nextOp' (fst $ last a) b, snd $ last a)]) n (replicate count 1)
       in n'
    | otherwise      =
        let op' = if op == "-" then (-) else (+)
            m = foldl (\a b -> a ++ [(op' (fst $ last a) b, snd $ last a)]) result (replicate count 1)
            nextOp = if op == "-" then "+" else "-"
            nextOp' = if op == "-" then (+) else (-)
            n = foldl (\a b -> a ++ [(fst $ last a, nextOp' (snd $ last a) b)]) m (replicate count 1)
        in spiral' limit nextOp (count + 1) n

*Main> take 9 $ oddSpirals 3
[(1,1),(0,1),(0,2),(1,2),(2,2),(2,1),(2,0),(1,0),(0,0)] 
```

它构建了长度为“大小”平方的顺时针螺旋，叠加在 hammar 的对角线算法上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-22T18:10:02.263

我相信您的任务的解决方案是：

`pairs = [(x,y) | u <- [0..], x <- [0..u], y <-[0..u] , u == x+y]`

# java - Java：“CustomClass1”和“CustomClass1.class”之间的区别？

> ID：15583978
> 
> 赞同：-1
> 
> 时间：2013-03-23T06:15:48.057
> 
> 标签：java, class, hashmap, syntax-error

这个问题是[Java 的延续：Using Classes as a value in hashmap](https://stackoverflow.com/questions/15583567/java-using-classes-as-a-value-in-hashmap)。

以下两种方法有什么区别？：

1)

```
String name = (
                  (
                       CustomClass1
                  )obj1
              ).getName(); 
```

和 2)

```
String name = (
                  (
                       mapQuery2ResponseType.get("string1")
                  )obj1
              ).getName(); 
```

其中，`mapQuery2ResponseType.get("string1")`类型的返回值`Class<?>`

第一种方法效果很好，但在第二种方法中，它给出了一个错误提示`Syntax error on token "obj1", delete this token`。

如何修改第二种方法**（使用地图）**以便像第一种情况一样工作？

我怎样才能`mapQuery2ResponseType.get("string1")`返回`CustomClass1`而不是`CustomClass1.class`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:26:56.303

Cast 是对编译器的指令，您不能等到运行时才知道要转换到哪个 Class！编译器无法知道当您调用该映射时，该映射是否实际上将具有 getName() 方法。

您需要在编译时对地图共享的所有内容进行强制转换，以使您确信它们都有一个“getName()”方法。如果那是不可能的，那么您将进入反射的世界以完善该方法，以便您可以调用它。

这是一个问题，它回答了当您在编译时不知道类时如何在任意对象上调用“getName”方法： [How do I invoke an Java method when given the method name as a string?](https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string)

如果您的方法确实是实际的 bean 属性 getter 和 setter，您还可以使用[apache BeanUtils 库](http://commons.apache.org/proper/commons-beanutils/)从对象中获取命名属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:03:03.890

> 如何使 mapQuery2ResponseType.get("string1") 返回 CustomClass1 而不是 CustomClass1.class？

你不能。Java 类型转换需要在编译时已知的类/类型。

您应该能够执行您的第二个示例似乎正在尝试执行的操作，如下所示：

1）声明一个接口：

```
 public interface Named {
        String getName();
    } 
```

2) 将请求类型映射中的所有类更改为`implements Named`.

3）将上面的“第二种方法”代码更改为：

```
 String name = ((Named) obj1).getName(); 
```

* * *

另一种选择是使用反射在 上查找`getName()`方法`obj1.getClass()`，然后使用`method.invoke(...)`来调用它。

# android - 从同一个视图动态导航到多个视图 - 调查应用

> ID：15583982
> 
> 赞同：1
> 
> 时间：2013-03-23T06:16:38.130
> 
> 标签：android

我想开发一个调查应用程序，它包含一个视图，视图的内容应该根据问题类型动态变化。它有两个按钮“后退”和“下一步”，当我点击“下一步”时，它应该移动到下一个问题并单击“上一个”按钮，它应该带我们到上一个问题。如何在 android 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:58:12.420

使用片段。 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

在单个 xml 中创建多个布局，然后您可以在布局其余隐藏中仅显示一页 .and。利用。所有页面的不同ID，以便您可以正确隐藏

# c - C语言中树的堆栈弹出函数中的分段错误

> ID：15583984
> 
> 赞同：1
> 
> 时间：2013-03-23T06:17:02.020
> 
> 标签：c, data-structures

我在 Codeblocks 上的树程序中使用此函数，它在 Pop 函数中显示分段错误，我正在释放 Tree 节点。分段错误就像程序接收信号 SIGSEGV 分段，我理解这个错误是由于`isEmptyStack()`没有得到返回曾经1（只有0）值。Pop函数似乎有错误，我需要这方面的帮助，我被困在这里很多天了，请帮助我。

// 树型节点的栈实现

```
typedef struct TreeStructure
{
    int data;
    struct TreeStructure *left;
    struct TreeStructure *right;
}Tree;

typedef struct SListNode
{
    struct TreeStructure *data;
    struct ListNode *next;
}SList;

typedef struct StackList
{
    struct ListNode *Node;
}Stack;

Stack *CreationStack()
{
    return NULL;
}

int isEmptyStack(Stack *top)
{
    return top==NULL;
}
void Push(Stack **top,Tree *data)
{
    SList *new,*tmp;
    new=malloc(sizeof *new);  // Modification here according to comments
    new->data=data;
    new->next=*top;
        *top=new;
}

Tree *Pop(Stack **top)
{   
    Tree *data;
    SList *tmp;
    if(isEmptyStack(*top))
    {
        printf("Underflow") ;return NULL;
    }
    else
    {
        tmp=*top;
        *top=tmp->next;
        data=tmp->data;
        if(tmp)            // using do not let occur case of the dangling pointer
            free(tmp);        // Showing fault here only on Debugging
        return data;
    }
} 
```

这是为了保留级别订单树的订单打印......从左到右，从下到上，

```
 #include<stdlib.h>
 typedef struct TreeStructure
 {
     int data;
     struct TreeStructure *left;
     struct TreeStructure *right;
 }Tree;
 typedef struct ListQueue
 {
     struct ListNode *Rear;
     struct ListNode *Front;
 }Queue;

typedef struct ListNode
{
    struct TreeStructure *node;
    struct Listnode *next;
}List;

typedef struct SListNode
{
    struct TreeStructure *data;
    struct ListNode *next;

}SList;

typedef struct StackList
{
    struct ListNode *Node;
}Stack;

void Reverseorder(Tree *Root)
{
     Stack *top; Queue *Q;
     Tree *tmp;
     if(!Root)
         return ;
     top=CreationStack();
     Q=Creation();
     Enqueue(Q,Root);

     while(!isEmpty(Q))
     {

         tmp=Dequeue(Q);
         Push(&top,tmp);
         if(tmp->right)
             Enqueue(Q,tmp->right);
         if(tmp->left)
             Enqueue(Q,tmp->left);
     }

     while(!isEmptyStack(top))     // Here Empty checker is going into infinite loop 
                                   // due to this error occurs
         printf("\nReverse Element is %d",Pop(&top)->data);

 } 
```

当我检查其他功能是否正常工作时，每当我尝试进一步增加我的代码时，从那里开始出现问题，请不要混淆其他功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:38:58.333

请在此处发布之前仔细检查您的代码。这是我第一眼看到的一件事，很可能还有其他事情，因为您根本没有采取足够的谨慎来使事情正确。

你的功能`Push`：

*   有一个未使用的变量`tmp`
*   一个虚假的电话`malloc`
*   使用`typedef`ed 指针
*   区分两种情况，但它们完全等价

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:05:45.927

似乎`data`是 pop 函数内的一个悬空指针。当你释放 tmp 时，你也释放了 data 指向的 TreeStructure。

# java - 如何从 ajax 网页获取所有文本内容

> ID：15583986
> 
> 赞同：2
> 
> 时间：2013-03-23T06:17:33.640
> 
> 标签：java, ajax, parsing, jsoup

如何使用 jsoup 库从此 ajax 网页获取所有文本内容。

到目前为止，我已经尝试过：

```
 String result="";
    Document doc=JSoup.connect("http://www.islamicuniversity.edu.in/Descrip?     date=SELID1").get();
    Elements allElements=doc.select("#latest_header");
    for(Element looper:allElements){
    result=looper.text();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:44:00.673

我们可以如下向wepage发出ajax xmlhttp请求

```
function getAjaxData() {
  var url = "";
  var parameters ="";
  var xmlhttp;
  if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
 }
 else {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4) {
        var ajaxText = xmlhttp.responseText
    };
};
xmlhttp.open("POST",url+"?"+parameters,true);
xmlhttp.send();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:43:53.697

通过 Jsoup 1.7.2

```
 String result="";
    Document doc=Jsoup.connect("http://www.islamicuniversity.edu.in/Descrip?date=SELID1").get();
    Elements allElements=doc.select("#latest_header");
    for(Element looper:allElements){
        result=looper.text();
        System.out.println(result);
    } 
```

# html - 如何将单选按钮与图像水平对齐

> ID：15583988
> 
> 赞同：2
> 
> 时间：2013-03-23T06:18:00.027
> 
> 标签：html, css

我无法获得带有水平图像的单选按钮，例如收音机图像、收音机图像、收音机图像等。有人可以帮帮我吗？html代码是

```
<fieldset id="CreditCard">
    <legend>Credit Card (required)</legend>
<fieldset class="optionGroup">
 <label>
          <input type="radio" name="ccard"><img src="discover.png" alt="discover card">
</label>
 <label>
   <input type="radio" name="ccard"> <img src="diners.png" alt="diners card">
    </label>
 <label>
 <input type="radio" name="ccard"><img src="master.png" alt="master card">
     </label>
<label>
   <input type="radio" name="ccard"><img src="visa.png" alt="visa card">
      </label>
</fieldset> 
```

而css代码是

```
fieldset.optionGroup
    {
    float: none;
    margin-left: 25%;
           }
fieldset.optionGroup label
    {
    display: inline;
    float: none;
    width: 100px;
    }
fieldset.optionGroup input
    {
    float:none;
    margin: 0px;
    width: 20px;
    } 
```

### [小提琴](http://jsfiddle.net/UmAJe/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T06:26:55.097

使用`position`css 规则。

```
fieldset.optionGroup input {
    float: none;
    margin: 0;
    position: relative;
    top: -16px;
    width: 20px;
} 
```

### [**`Demo`**](http://jsfiddle.net/UmAJe/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:19:47.647

给这个：

```
fieldset.optionGroup,
fieldset.optionGroup label,
fieldset.optionGroup input
{
    display: inline;
    vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T08:39:50.400

只需将这一行添加到您的 css 中，它应该可以工作：

```
fieldset img{
    vertical-align:middle;
} 
```

# matlab - 使用 MATLAB 在图中查找最大峰值的位置

> ID：15583989
> 
> 赞同：-2
> 
> 时间：2013-03-23T06:18:01.867
> 
> 标签：matlab, matrix, location, max

假设我有这样的 F 矩阵：

```
F =
0, 0, 106, 10, 14, 20, 20, 23, 27, 26, 28, 28, 28, 23
       |                        |           |
     peak                     peak         peak 
```

我正在使用命令`plot(F)`。我想获取数据中峰值的索引。

这是我到目前为止的代码，它不起作用：

```
[max_x,index_x]=max(x);
e=index_x;
for i=1:11
    index_x(i)=e;
    e=e+16;
end 
```

matlab 中是否有内置函数可以为我执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T06:26:56.967

使用[findpeaks](http://www.mathworks.com/help/signal/ref/findpeaks.html)函数（信号处理工具箱）。

```
[peakVal,peakLoc]= findpeaks(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T09:05:47.610

好吧，这是我更喜欢的：

```
[maxval maxloc] = max(A(:)); 
```

# javascript - Jquery - 尝试创建一个图像库，单击缩略图后可以滑入查看

> ID：15583990
> 
> 赞同：0
> 
> 时间：2013-03-23T06:18:03.840
> 
> 标签：javascript, jquery, gallery, thumbnails, slide

我一直试图弄清楚如何为我的投资组合网站创建自己的自定义图片库，但无济于事。

我有一个 div 用于保存不同图像的缩略图。这个 div 的 CSS 代码如下：

```
.gallery {
width: 900px;
height: 600px;
background-color: white;
margin: 50px;
float: left;
box-shadow: 3px 3px 20px #000000;
position: relative; 
```

我创建了另一个 div，它`#project_display`绝对位于画廊 div 左侧 -900px 的位置。这个 div 也设置为 width: 900px 和 height: 600px；

我正在尝试做的是获取缩略图的锚定链接（这是缩略图的较大版本图像），并在它动画时用较大的图像动态填充这个外围 div。很难解释。下面是代码，希望它更清楚：

```
$('.projects').bind('click', function(event){
    $('#project_display').animate({
        left:'0px'
        });
        event.preventDefault();

        var this_project = $('.projects').each(function(){
            $(this).children('a[href]');
        })

        $('#project_display').html('<img src="'+this_project+'"/>');
    }) 
```

大图像的锚链接没有被放入外围 div。

有人可以告诉我我做错了什么吗？因为我显然没有做正确的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:14:47.300

```
$('.projects').bind('click', function(event){
       var aHref= $(this).attr("href");
       $('#project_display').html('<img src="'+aHref+'"/>');
       $('#project_display').animate({
           left:'0px'
       });
 }); 
```

试试上面的那个。如果不起作用，请同时提供 HTML，这将增加对代码的理解。所以我会帮你解决这个问题。

# android - 活动不从最近的活动启动：- Android

> ID：15583994
> 
> 赞同：2
> 
> 时间：2013-03-23T06:18:51.983
> 
> 标签：android, admob, illegalstateexception

我正在尝试在我的 android 应用程序中实现广告。当我将广告添加到我的 xml 布局时，我怀疑内存泄漏，所以我尝试了这篇文章中描述的方法：- [Admob Memory Leak - 通过使用空活动来避免](https://stackoverflow.com/questions/9558708/admob-memory-leak-avoiding-by-using-empty-activity)

广告已呈现并且没有问题，除了如果在我的应用程序屏幕之间，如果我不小心点击了设备的主页按钮，然后如果我转到最近的应用程序并选择我的应用程序，我会收到错误消息：-

```
03-22 22:17:56.604: E/AndroidRuntime(27206): Caused by: java.lang.IllegalStateException: This activity should be created only once during the entire application life
03-22 22:17:56.604: E/AndroidRuntime(27206):    at com.xyz.watch.AdMobActivity.<init>(AdMobActivity.java:16)
03-22 22:17:56.604: E/AndroidRuntime(27206):    at java.lang.Class.newInstanceImpl(Native Method)
03-22 22:17:56.604: E/AndroidRuntime(27206):    at java.lang.Class.newInstance(Class.java:1409)
03-22 22:17:56.604: E/AndroidRuntime(27206):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-22 22:17:56.604: E/AndroidRuntime(27206):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
03-22 22:17:56.604: E/AndroidRuntime(27206):    ... 11 more
03-22 22:17:56.684: W/System.err(27206): java.io.FileNotFoundException: /data/plog.log (Permission denied) 
```

我的 AdMobActivity 的启动模式是 singleInstance 所以也许这就是原因。我应该怎么做才能工作？

更新：-我的代码

在我的第一个启动活动（MainActivity）中

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    DatabaseAdapter databaseAdapter = new DatabaseAdapter(
            getApplicationContext());
    databaseAdapter.open();
    databaseAdapter.close();
}

    @Override
protected void onResume() {
    super.onResume();

    if (AdMobActivity.AdMobMemoryLeakWorkAroundActivity == null) {
        Log.i("CHAT", "starting the AdMobActivity");
        AdMobActivity.startAdMobActivity(this);
    }
} 
```

AdMob 活动：-

```
public final class AdMobActivity extends Activity {

public static AdMobActivity AdMobMemoryLeakWorkAroundActivity;

public AdMobActivity() {
    super();
    if (AdMobMemoryLeakWorkAroundActivity != null) {
        throw new IllegalStateException("This activity should be created only once during the entire application life");
    }
    AdMobMemoryLeakWorkAroundActivity = this;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("CHAT", "in onCreate - AdMobActivity");
    finish();
}

public static final void startAdMobActivity(Activity activity) {
    Log.i("CHAT", "in startAdMobActivity");
    Intent i = new Intent();
    i.setComponent(new ComponentName(activity.getApplicationContext(), AdMobActivity.class));
    activity.startActivity(i);
} 
```

}

行号 16 是

```
 throw new IllegalStateException("This activity should be created only once during the entire application life"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:28:59.603

请看一下这段代码。我只用过这个。我没有遇到任何内存泄漏。

[http://jmsliu.com/209/add-google-admob-in-android-application.html](http://jmsliu.com/209/add-google-admob-in-android-application.html)

希望这会帮助你。

也试试这个代码。这不会集成到 xml 布局中。只需按程序执行即可。

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;

import com.google.ads.*;

public class AdmobExample extends Activity {
    /** Called when the activity is first created. */
    private AdView myAdView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myAdView = new AdView(this, AdSize.BANNER, "youradmob id. ");

        //get layoutView
        LinearLayout rootView = (LinearLayout)this.findViewById(R.id.rootViewGroup);
        LinearLayout.LayoutParams layoutParams = new LayoutParams(480, 75);

        rootView.addView(myAdView, 0, layoutParams);        

        AdRequest re = new AdRequest();
        re.setGender(AdRequest.Gender.FEMALE);
        //re.setTestDevices(testDevices);
        //re.setTesting(testing)

        myAdView.loadAd(re);
    }
} 
```