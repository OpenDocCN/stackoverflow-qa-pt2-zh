# StackOverflow 问答 14072000-14072999

# mongodb - 使用引用文档的 id 获取父对象

> ID：14072001
> 
> 赞同：0
> 
> 时间：2012-12-28T15:44:23.853
> 
> 标签：mongodb, doctrine-odm

我是面向文档的数据库的新手。我遇到了一个简单的问题：

我必须区分对象：发布和标记。

```
{
   "_id": "ObjectId("50dad56881000001")",
   "author":"Chuck Norris",
   "title":"Blah....",
   "tags": [
       DBRef("Tag", ObjectId("50dad564871000001")),
       DBRef("Tag", ObjectId("50dad564871000002")),
       DBRef("Tag", ObjectId("50dad564871000003"))
} 
```

我需要按标签查找帖子。我无法弄清楚如何使用一组引用对象来做到这一点......

这是我的映射对象：

```
class Tag
{
    /** @MongoDB\Id */
    protected $id;

    /** @MongoDB\Field(type="string") */
    protected $name;

    /** @MongoDB\Field(type="date") */
    protected $createdAt;
}

class Article
{
    /** @MongoDB\Id */
    protected $id;

    /** @MongoDB\Field(type="date") */
    protected $date;

    /** @MongoDB\Field(type="string") */
    protected $title;

    /** @MongoDB\Field(type="string") */
    protected $author;

    /** @MongoDB\Field(type="string") */
    protected $content;

    /** @MongoDB\ReferenceMany(targetDocument="Tag", cascade="all") */
    protected $tags
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:00:14.620

我想我找到了适合回答我的问题的东西。但我不确定这是不是最好的方法......

```
public function getPostsWithTag($tagId)
{
   $query = $this->createQueryBuilder()
      ->field('tags.id')
      ->in(array($tagId)
      ->getQuery()

   return $query->execute();
} 
```

# objective-c - 每个 viewdidload 中的相同代码

> ID：14072002
> 
> 赞同：0
> 
> 时间：2012-12-28T15:44:26.307
> 
> 标签：objective-c, ios, uiviewcontroller

我在每个 ViewController 中都有相同的代码，它设置 ViewControllers 视图的背景颜色，并更改导航栏的后退按钮和标题视图。有没有办法避免这种情况？

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 37, 24)];
[button setImage:[UIImage imageNamed:@"Navbar_BackButton.png"] forState:UIControlStateNormal];
[button addTarget:self action:@selector(backButtonTabbed:) forControlEvents:UIControlEventTouchDown];
[button setImageEdgeInsets:UIEdgeInsetsMake(0, 0, 0, -10)];
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:button];

[navbarItem setLeftBarButtonItem:barButton];

[navbarItem setTitleView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Navbar_Title.png"]]];

[[self view] setBackgroundColor:[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"Login_Background.png"]]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T15:50:58.637

这是子类化的完美案例。

创建一个`UIViewController`覆盖`viewDidLoad`执行代码的方法的子类，然后将需要这种行为的每个其他视图控制器作为它的子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:51:40.817

你有两个选择。

1) 创建一个通用基类，所有视图控制器都从该基类扩展。不利的一面是您可能需要两个 for`UIViewController`和一个 for `UITableViewController`。在这两个类中，您将放置此公共代码。

2）创建一个您从每个`viewDidLoad`. 您仍然需要为每个添加一行代码，`viewDidLoad`但至少它只有一行。如果您需要更改颜色或其他任何内容，您只需更改一个类而不是每个视图控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:52:08.563

这是面向对象编程中继承功能的完美示例！

创建一个子类`UIViewController`来充当您的基本视图控制器（您甚至可以将其称为 BaseViewController！）

然后，使所有其他视图控制器成为此基本视图控制器的子类，而不是`UIViewController`. 由于这些子类将调用`[super viewDidLoad]`，它们将继承基本视图控制器`viewDidLoad`方法中的代码，该方法应该包含您的外观代码！

# c++ - Boost asio接收指定大小的数据

> ID：14072004
> 
> 赞同：1
> 
> 时间：2012-12-28T15:44:48.477
> 
> 标签：c++, sockets, boost, boost-asio

要从我使用的套接字异步接收数据`async_read_some`，但此函数有时不会接收所有数据，我应该使用什么函数来异步读取例如 10 个字节，并且此函数仅在读取这 10 个字节时才应回调。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:54:44.357

`async_read_some`有一个对应项`async_read`，只有在读取完整大小后才会完成。

# c# - 尽管 process.kill() 已执行，但进程仍在运行

> ID：14072008
> 
> 赞同：0
> 
> 时间：2012-12-28T15:45:01.717
> 
> 标签：c#, winforms

我构建了一个应用程序来捕获和播放 Wireshark 文件并将所有数据包发送到我的网卡。在应用程序中，用户可以选择一个文件夹，该文件夹内的所有文件都将添加到一个列表框中并无限循环播放。对于我的应用程序，我使用的是 Pcapdotnet DLL，但由于 Wincap 中的一个错误，即在 500 个文件之后库尝试访问文件并且应用程序崩溃，我构建了一个 exe 文件，它将我的接口号和文件路径作为参数。文件播放完毕后，exe 文件将关闭，因此在这种情况下，我可以播放 500 多个文件而不会崩溃。

这是我的开始按钮，它开始播放列表框中的所有文件： **sendQueue**是我的 exe 文件，我发送文件路径

```
private void btnStart_Click(object sender, EventArgs e)
{
    shouldContinue = true;

    this.Invoke((MethodInvoker)delegate
    {
        btnStart.Enabled = false;
        btnStop.Enabled = true;
        groupBoxAdapter.Enabled = false;
        groupBoxRootDirectory.Enabled = false;
    });

    backGroundWorker = new BackgroundWorker();
    backGroundWorker.WorkerReportsProgress = true;
    backGroundWorker.DoWork += new DoWorkEventHandler(
    (s3, e3) =>
    {

        for (int i = 0; i < lbFiles.Items.Count && shouldContinue; i++)
        {
            this.Invoke((MethodInvoker)delegate
            {
                lbFiles.SetSelected(i, true);
                toolStripStatusLabel.Text = string.Format("Playing file no {0} of {1}", i + 1, lbFiles.Items.Count);
            });

            sendQueue((string)lbFiles.Items[i]); 
        }
    });

    backGroundWorker.RunWorkerAsync();
} 
```

我想要做的是停止按钮，通过将 shouldContinue 布尔变量更改为 false 来停止我的播放，并关闭所有正在播放我的文件的进程（SendQueue.exe），我的问题是该进程仍在运行。

```
bool shouldContinue = true;

private void btnStop_Click(object sender, EventArgs e)
{
    shouldContinue = false;

    foreach (Process prc in System.Diagnostics.Process.GetProcessesByName("SendQueue"))
    {
        prc.Kill();
        prc.WaitForExit();
    }

    toolStripStatusLabel.Text = "Stop playing";
} 
```

# c++ - 在 C++ 中使用算法头文件时出错

> ID：14072009
> 
> 赞同：0
> 
> 时间：2012-12-28T15:45:02.387
> 
> 标签：c++, include, bind

我做了一个unix域服务器客户端。它可以完美运行，没有任何错误。

然后我想使用头文件中的`random_shuffle()`函数。`algorithm`所以我只包含`algorithm`头文件。我没有进行任何其他更改。但是现在在编译时出现以下错误：

```
game.cpp:102:85: error: no match for ‘operator!=’ in ‘std::bind(_Functor&&, _ArgTypes&& ...) [with _Functor = int&, _ArgTypes = {sockaddr*, long unsigned int}, typename std::_Bind_helper<_Functor, _ArgTypes>::type = std::_Bind<int(sockaddr*, long unsigned int)>]((* &((sockaddr*)(& address))), (* &110ul)) != 0’
game.cpp:102:85: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:214:5: note: template<class _T1, class _T2> constexpr bool std::operator!=(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.6/bits/stl_iterator.h:297:5: note: template<class _Iterator> bool std::operator!=(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:347:5: note: template<class _IteratorL, class _IteratorR> bool std::operator!=(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/stl_iterator.h:1037:5: note: template<class _IteratorL, class _IteratorR> bool std::operator!=(const std::move_iterator<_IteratorL>&, const std::move_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/stl_iterator.h:1043:5: note: template<class _Iterator> bool std::operator!=(const std::move_iterator<_Iterator>&, const std::move_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/postypes.h:223:5: note: template<class _StateT> bool std::operator!=(const std::fpos<_StateT>&, const std::fpos<_StateT>&)
/usr/include/c++/4.6/bits/allocator.h:132:5: note: template<class _T1, class _T2> bool std::operator!=(const std::allocator<_T1>&, const std::allocator<_T2>&)
/usr/include/c++/4.6/bits/allocator.h:137:5: note: template<class _Tp> bool std::operator!=(const std::allocator<_Tp1>&, const std::allocator<_Tp1>&)
/usr/include/c++/4.6/bits/basic_string.h:2473:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator!=(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/basic_string.h:2485:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator!=(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/basic_string.h:2497:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator!=(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.6/bits/streambuf_iterator.h:200:5: note: template<class _CharT, class _Traits> bool std::operator!=(const std::istreambuf_iterator<_CharT, _Traits>&, const std::istreambuf_iterator<_CharT, _Traits>&)
/usr/include/c++/4.6/bits/stl_vector.h:1297:5: note: template<class _Tp, class _Alloc> bool std::operator!=(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
/usr/include/c++/4.6/bits/random.h:338:5: note: template<class _UIntType, _UIntType __a, _UIntType __c, _UIntType __m> bool std::operator!=(const std::linear_congruential_engine<_UIntType, __a, __c, __m>&, const std::linear_congruential_engine<_UIntType, __a, __c, __m>&)
/usr/include/c++/4.6/bits/random.h:568:5: note: template<class _UIntType, long unsigned int __w, long unsigned int __n, long unsigned int __m, long unsigned int __r, _UIntType __a, long unsigned int __u, _UIntType __d, long unsigned int __s, _UIntType __b, long unsigned int __t, _UIntType __c, long unsigned int __l, _UIntType __f> bool std::operator!=(const std::mersenne_twister_engine<_UIntType, __w, __n, __m, __r, __a, __u, __d, __s, __b, __t, __c, __l, __f>&, const std::mersenne_twister_engine<_UIntType, __w, __n, __m, __r, __a, __u, __d, __s, __b, __t, __c, __l, __f>&)
/usr/include/c++/4.6/bits/random.h:765:5: note: template<class _UIntType, long unsigned int __w, long unsigned int __s, long unsigned int __r> bool std::operator!=(const std::subtract_with_carry_engine<_UIntType, __w, __s, __r>&, const std::subtract_with_carry_engine<_UIntType, __w, __s, __r>&)
/usr/include/c++/4.6/bits/random.h:987:5: note: template<class _RandomNumberEngine, long unsigned int __p, long unsigned int __r> bool std::operator!=(const std::discard_block_engine<_RandomNumberEngine, __p, __r>&, const std::discard_block_engine<_RandomNumberEngine, __p, __r>&)
/usr/include/c++/4.6/bits/random.h:1183:5: note: template<class _RandomNumberEngine, long unsigned int __w, class _UIntType> bool std::operator!=(const std::independent_bits_engine<_RandomNumberEngine, __w, _UIntType>&, const std::independent_bits_engine<_RandomNumberEngine, __w, _UIntType>&)
/usr/include/c++/4.6/bits/random.h:1433:5: note: template<class _RandomNumberEngine, long unsigned int __k> bool std::operator!=(const std::shuffle_order_engine<_RandomNumberEngine, __k>&, const std::shuffle_order_engine<_RandomNumberEngine, __k>&)
/usr/include/c++/4.6/bits/random.h:1735:5: note: template<class _IntType> bool std::operator!=(const std::uniform_int_distribution<_IntType>&, const std::uniform_int_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:1916:5: note: template<class _IntType> bool std::operator!=(const std::uniform_real_distribution<_IntType>&, const std::uniform_real_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:2136:5: note: template<class _RealType> bool std::operator!=(const std::normal_distribution<_RealType>&, const std::normal_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:2312:5: note: template<class _RealType> bool std::operator!=(const std::lognormal_distribution<_RealType>&, const std::lognormal_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:2504:6: note: template<class _RealType> bool std::operator!=(const std::gamma_distribution<_RealType>&, const std::gamma_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:2669:5: note: template<class _RealType> bool std::operator!=(const std::chi_squared_distribution<_RealType>&, const std::chi_squared_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:2808:5: note: template<class _RealType> bool std::operator!=(const std::cauchy_distribution<_RealType>&, const std::cauchy_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:3024:5: note: template<class _RealType> bool std::operator!=(const std::fisher_f_distribution<_RealType>&, const std::fisher_f_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:3198:5: note: template<class _RealType> bool std::operator!=(const std::student_t_distribution<_RealType>&, const std::student_t_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:3346:3: note: bool std::operator!=(const std::bernoulli_distribution&, const std::bernoulli_distribution&)
/usr/include/c++/4.6/bits/random.h:3346:3: note:   no known conversion for argument 1 from ‘std::_Bind_helper<int&, sockaddr*, long unsigned int>::type {aka std::_Bind<int(sockaddr*, long unsigned int)>}’ to ‘const std::bernoulli_distribution&’
/usr/include/c++/4.6/bits/random.h:3583:5: note: template<class _IntType> bool std::operator!=(const std::binomial_distribution<_IntType>&, const std::binomial_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:3725:5: note: template<class _IntType> bool std::operator!=(const std::geometric_distribution<_IntType>&, const std::geometric_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:3931:5: note: template<class _IntType> bool std::operator!=(const std::negative_binomial_distribution<_IntType>&, const std::negative_binomial_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:4119:5: note: template<class _IntType> bool std::operator!=(const std::poisson_distribution<_IntType>&, const std::poisson_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:4269:5: note: template<class _RealType> bool std::operator!=(const std::exponential_distribution<_RealType>&, const std::exponential_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:4444:5: note: template<class _RealType> bool std::operator!=(const std::weibull_distribution<_RealType>&, const std::weibull_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:4619:5: note: template<class _RealType> bool std::operator!=(const std::extreme_value_distribution<_RealType>&, const std::extreme_value_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:4851:5: note: template<class _IntType> bool std::operator!=(const std::discrete_distribution<_IntType>&, const std::discrete_distribution<_IntType>&)
/usr/include/c++/4.6/bits/random.h:5090:5: note: template<class _RealType> bool std::operator!=(const std::piecewise_constant_distribution<_RealType>&, const std::piecewise_constant_distribution<_RealType>&)
/usr/include/c++/4.6/bits/random.h:5332:5: note: template<class _RealType> bool std::operator!=(const std::piecewise_linear_distribution<_RealType>&, const std::piecewise_linear_distribution<_RealType>&)
/usr/include/c++/4.6/tuple:597:5: note: template<class ... _TElements, class ... _UElements> bool std::operator!=(const std::tuple<_TElements ...>&, const std::tuple<_Elements ...>&)
/usr/include/c++/4.6/functional:2245:5: note: template<class _Res, class ... _Args> bool std::operator!=(const std::function<_Res(_ArgTypes ...)>&, std::nullptr_t)
/usr/include/c++/4.6/functional:2251:5: note: template<class _Res, class ... _Args> bool std::operator!=(std::nullptr_t, const std::function<_Res(_ArgTypes ...)>&)
/usr/include/c++/4.6/bits/unordered_map.h:210:5: note: template<class _Key, class _Tp, class _Hash, class _Pred, class _Alloc, bool __cache_hash_code> bool std::operator!=(const std::__unordered_map<_Key, _Tp, _Hash, _Pred, _Alloc, __cache_hash_code>&, const std::__unordered_map<_Key, _Tp, _Hash, _Pred, _Alloc, __cache_hash_code>&)
/usr/include/c++/4.6/bits/unordered_map.h:228:5: note: template<class _Key, class _Tp, class _Hash, class _Pred, class _Alloc, bool __cache_hash_code> bool std::operator!=(const std::__unordered_multimap<_Key, _Tp, _Hash, _Pred, _Alloc, __cache_hash_code>&, const std::__unordered_multimap<_Key, _Tp, _Hash, _Pred, _Alloc, __cache_hash_code>&)
/usr/include/c++/4.6/bits/unordered_map.h:390:5: note: template<class _Key, class _Tp, class _Hash, class _Pred, class _Alloc> bool std::operator!=(const std::unordered_map<_Key, _Tp, _Hash, _Pred, _Alloc>&, const std::unordered_map<_Key, _Tp, _Hash, _Pred, _Alloc>&)
/usr/include/c++/4.6/bits/unordered_map.h:402:5: note: template<class _Key, class _Tp, class _Hash, class _Pred, class _Alloc> bool std::operator!=(const std::unordered_multimap<_Key, _Tp, _Hash, _Pred, _Alloc>&, const std::unordered_multimap<_Key, _Tp, _Hash, _Pred, _Alloc>&) 
```

我`line 102`正在使用`bind`之前正常工作的功能。这是`line 102`：

```
 if(bind(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0){ 
```

我没有做任何其他事情，我只是包含了这个文件，那么为什么我会收到这个错误？

如果它可以帮助我使用以下代码行编译它：

```
g++ -std=c++0x -I /usr/include/postgresql -lpq -fpermissive -c game.cpp 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T15:50:18.660

这是一个典型的名称冲突案例，原因是不加选择地使用`using`在全局命名空间中导入的指令和 C API。

您打算调用的`bind`是用于套接字的全局函数（来自`<sys/sockets.h>`），但编译器更喜欢`std::bind`提供的 in `<algorithm>`，您可能使用臭名昭著的`using namespace std;`.

为了消除歧义，告诉编译器使用*全局*绑定而不是来自以下的绑定`std`：

```
if(::bind(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0){ 
```

（`::`前面没有任何命名空间的运算符表示“从全局命名空间中获取它”，除非原始标头包装在一个`namespace`块中，否则每个 C API 都将被放入其中）

无论如何，删除`using namespace std;`指令可能是更好的选择，更喜欢在需要时使用或仅使用您实际经常使用的东西`std::`进行导入。`using`

# android - 如何使用 TextWatcher 删除 EditText 中的文本？每次它检测到一个字符串并格式化它

> ID：14072012
> 
> 赞同：6
> 
> 时间：2012-12-28T15:45:09.780
> 
> 标签：android, android-edittext, textwatcher

我有一个带有 TextWatcher 的 EditText。它应该将文本格式化为 5'9" 这样的人类高度。但是当用户犯错并想要删除错误输入的字符时，TextWather 不允许他这样做。假设用户想要删除“字符” TextWath 立即添加它。下面是代码。那么如何允许用户删除 EditText 中的文本呢？

```
private class CustomTextWatcher implements TextWatcher {
    private EditText mEditText;

public CustomTextWatcher(EditText e) {
    mEditText = e;
}

public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
}

public void onTextChanged(CharSequence s, int start, int before,
        int count) {

}

public void afterTextChanged(Editable s) {
    int count = s.length();
    String str = s.toString();
    if (count == 1) {
        str = str + "'";
    } else if (count == 3) {
        str = str + "\"";
    } else if ((count > 4) && (str.charAt(str.length() - 1) != '\"')) {
        str = str.substring(0, str.length() - 2)
                + str.charAt(str.length() - 1) + "\"";
    } else {
        return;
    }
    mEditText.setText(str);
    mEditText.setSelection(mEditText.getText().length());

} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T16:17:12.350

忽略 Karakuri 发布的关于您的代码在错误回调中的事实，您可以添加一个简单的修复程序，您只需聆听用户使用的键。

如果没有对现有代码进行任何实际测试或进一步改进，这似乎可以解决您描述的问题：

```
package com.example.testwatchertest;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.EditText;

public class MainActivity extends Activity implements TextWatcher {

    EditText editText;
    boolean keyDel = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText = (EditText) findViewById(R.id.editText);
        editText.addTextChangedListener(this);

        editText.setOnKeyListener(new OnKeyListener() {

            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {

                if (keyCode == KeyEvent.KEYCODE_DEL){
                    keyDel = true;
                }else{
                    keyDel = false;
                }
                return false;
            }
        });

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        if (!keyDel) {

            String str = s.toString();
            if (count == 1) {
                str = str + "'";
            } else if (count == 3) {
                str = str + "\"";
            } else if ((count > 4) && (str.charAt(str.length() - 1) != '\"')) {
                str = str.substring(0, str.length() - 2) + str.charAt(str.length() - 1) + "\"";
            } else {
                return;
            }
            editText.setText(str);
            editText.setSelection(editText.getText().length());

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:11:49.573

[从文档](http://developer.android.com/reference/android/text/TextWatcher.html#onTextChanged%28java.lang.CharSequence,%20int,%20int,%20int%29)：

> public abstract void **onTextChanged** (CharSequence s, int start, int before, int count)
> 
> 调用此方法是为了通知您，在 s 内，从 start 开始的 count 个字符刚刚替换了之前有 length 的旧文本。尝试通过此回调对 s 进行更改是错误的。

您应该在 afterTextChanged() 中进行任何更改，而不是在其他两个回调中的任何一个中。

> public abstract void **afterTextChanged** (Editable s)
> 
> 调用此方法是为了通知您，在 s 中的某处，文本已更改。从这个回调中对 s 进行进一步的更改是合法的，但请注意不要让自己陷入无限循环，因为您所做的任何更改都会导致再次递归调用此方法。（您不会被告知更改发生的位置，因为其他`afterTextChanged()`方法可能已经进行了其他更改并使偏移量无效。但是如果您需要在这里知道，您可以使用 `setSpan(Object, int, int, int)`in`onTextChanged(CharSequence, int, int, int)`标记您的位置，然后从此处查找跨度结束的位置向上。）

# javascript - Twitter 引导导航栏下拉菜单

> ID：14072013
> 
> 赞同：2
> 
> 时间：2012-12-28T15:45:21.403
> 
> 标签：javascript, css, twitter-bootstrap

我在使 twitter bootstrap 下拉导航栏工作时遇到一些问题。我浏览了许多教程，如果我从那里复制代码，它对我不起作用。在控制台中，我收到以下错误

```
TypeError: $ is undefined
var old = $.fn.dropdown 
```

这是我的代码：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span8">
            <!--Body content-->
            <div class="navbar">
                <div class="navbar-inner">
                    <ul id="tab" class="nav">
                        <li class="active"><a href="#Tab1" data-toggle="tab">Recent</a></li>
                        <li><a href="#Tab2" data-toggle="tab">Top</a></li>
                        <li><a href="#Tab3" data-toggle="tab">Near you</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Filters <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Filter1</a></li>
                                <li><a href="#">Filter2</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="span4">
            <!--Sidebar content-->
        </div>
    </div>
</div> 
```

这是我的包含 - 它们加载没有问题：

```
 <link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
    <script type="text/javascript" src="bootstrap/js/bootstrap-dropdown.js"></script> 
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script> 
```

页面加载了，但是当我单击“过滤器”菜单项时，它会引发上述异常并且没有任何反应。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T15:47:38.463

您必须更改包含 javascript 的顺序。JQuery 必须在引导之前出现。

```
<link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="jquery-1.7.2.min.js"></script> 
<script type="text/javascript" src="bootstrap/js/bootstrap-dropdown.js"></script> 
```

编辑，原因：Javascript 在加载后立即执行。在解析 bootstrap-dropdown.js 时，应该已经加载了 jQuery。这样 jQuery 功能将可用于 bootstrap-dropdown。

# javascript - 遍历 ExtJS 存储中的记录并过滤特定字段

> ID：14072017
> 
> 赞同：0
> 
> 时间：2012-12-28T15:45:44.607
> 
> 标签：javascript, arrays, extjs

我正在迭代商店中的记录，因为它们像这样进来：

```
Ext.create('Ext.data.Store', {
    model: 'Message',
    storeId: 'Staging',
    proxy: {
        type: 'memory',
        reader: {
            type: 'json'
        }
    },
    listeners: {
        add: function(store, records, index, eOpts){
            if (!Ext.data.StoreManager.lookup('Historical').isLoading()) {

                this.each(function(item, index, count) {
                    if(item.notificationType === 'INBOX'){
                        // populate inbox store
                        // increment the unread inbox count
                        console.log('inbox');
                    } else if (item.notificationType === 'NOTIFICATION') {
                        // populate notifications store
                        // increment the unread notification count
                    }
                });

                // no historical data should be held in memory for performance
                this.removeAll();

            }  
        }
    }   
}); 
```

item.notificationType*属性*返回未定义。

我尝试了其他属性，但它们也返回未定义。

当遇到不同类型时我需要执行不同的操作并认为可以这样做！

所以 item 是 store 中的一条记录，它包含 json 的结构如下：

```
 {
      "source":"2",
      "target":"1416529",
      "sourceType":"USER",
      "redirectUrl":null,
      "message":"cow's go...",
      "id":606,
      "targetType":"TEAM",
      "messageType":"TIBRR_WALL_MESSAGE",
      "notificationType":"INBOX",
      "sentDate":1356599137173,
      "parameters":null,
      "targetId":"1416529",
      "sourceId":"2",
      "dispatched":true,
      "read":false,
      "readDate":null,
      "dispatchedDate":1356599137377
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:55:27.230

你还没有发布你的模型定义，所以我假设你的模型中有一个名为“notificationType”的字段。

在这种情况下，您需要使用 get 方法：

```
item.get('notificationType'); 
```

# php - 为同一用户从数据库中提取所有行

> ID：14072018
> 
> 赞同：-1
> 
> 时间：2012-12-28T15:45:51.300
> 
> 标签：php, mysql, arrays, mysqli

我已经复制并粘贴了所有可能的方法，建议如何为一个用户提取所有行然后回显到另一个页面，但无法让它回显任何内容。代码没有给我错误，只是在我 include_once PHP 页面的地方空白。

```
<?php
$userid  = 10;  

/****************************************************************
* Open connection to the MySQL database
****************************************************************/

// Create new mysqli object representing a connection to the MySQL data
$mysqli = new mysqli("localhost", "username", "password", "db");

// Test if a connection error occurred
if ($mysqli->connect_errno !=0)  {
    exit;
}

/**************************************************************
* Run an SQL statement
**************************************************************/

// Create an INSERT query  
$query = "SELECT * FROM table WHERE(userid='".$userid."')";
$result = $mysqli->query($query);
if ($result = $mysqli->query($query)) {
    while ($rows = $result->fetch_assoc()) {
        $rows[] = $row;
    }
    foreach($rows as $row) {
        $category = $row['category'];
        $amount   = $row['amount'];
        echo $category;
    }
    $result->close();
}
//  Attempt to close connection
$closed = $mysqli->close();
?> 
```

该用户有10行内容，我想全力以赴，请协助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:47:15.610

```
$query = "SELECT * FROM table WHERE(userid='".$userid."')"; 
```

应该

```
$query = "SELECT * FROM table WHERE userid='".$userid."'"; 
```

这里也有错误

```
while ($rows = $result->fetch_assoc()) {

     $rows[] = $row;
    } 
```

**$row**未定义，因此您应该将**$rows**分配给左侧的数组。将左侧数组命名为其他名称，例如

```
if ($result = $mysqli->query($query)) {
    while ($rows = $result->fetch_assoc()) {
        $values[] = $rows;
    }
    foreach($values as $row) {
        $category = $row['category'];
        $amount   = $row['amount'];
        echo $category;
    }
    $result->close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:00:59.903

检查您的代码是否存在可能的点故障，以下是一些注释。如果你学习了为什么不看看 PHP PDO 类，它可以很好地替代几个数据库驱动程序。

```
<?php

  $userid  = 10;  

  /****************************************************************
   * Open connection to the MySQL database
   ****************************************************************/

   // Create new mysqli object representing a connection to the MySQL data
   $mysqli = new mysqli("localhost", "username", "password", "db");

   // Test if a connection error occurred
   if ( $mysqli->connect_errno != 0 )
    exit( 'error on connect' );

     /**************************************************************
    * Run an SQL statement
    **************************************************************/

    // Create an INSERT query  

    // avoid temporary variables
    //$query = "SELECT * FROM table WHERE(userid='".$userid."')";
    // reader will know taht is a query by function name
    //WARNING you should scape data coming from form
    //expecting numeric data, so convert it
    $result = $mysqli->query( "SELECT * FROM table WHERE(userid='".intval( $userid )."')" );

    // error here
    //if ($result = $mysqli->query($query)) {
    //
    if ( !($result = $mysqli->query($result)) )
      exit( 'query error' );
    // error here also changed variable name
    //while ($rows = $result->fetch_assoc())
    // $rows[] = $row;
    $rows = array();
    while ( $tmp = $result->fetch_assoc() )
     $rows[] = $tmp;

    foreach($rows as $row)
    {
     // unnecessary code also, duplicating variable
     //$category  = $row['category'];
     //$amount    = $row['amount'];
     //echo $category;
      echo $row['category'];
    } 

     $result->close();
    }

//  Attempt to close connection
$closed = $mysqli->close();
?> 
```

# grails - 传递域列表以查看特定元素已删除

> ID：14072022
> 
> 赞同：0
> 
> 时间：2012-12-28T15:46:29.827
> 
> 标签：grails, groovy

我正在使用 grails 1.3.7。

我有以下域：

```
class Category {

    String name;
    String categoryKey;

    Date dateCreated
    Date lastUpdated

    static constraints = {
        name(blank: false, nullable: false, maxSize:30)
        categoryKey(blank: false, nullable: false, maxSize:30)
    }

    String toString()
    {
        return name
    }
} 
```

我在 gsp 中显示的类别列表如下：

```
 <g:select class="fields" valueMessagePrefix="shared.category.label" name='categoryKey'
              value="${dealInstance?.category?.categoryKey}"
              noSelection="${['': message(code: 'layouts.main.filter.select', default: '(Please select one)')]}"
              from='${categoryList.list()}' optionValue="name"
              optionKey="categoryKey"></g:select> 
```

我需要显示删除其中一项的列表（其中 categoryKey 属性等于 OTHER）。

```
def Category categoryList = Category
//categoryList.categoryKey.remove("OTHER") How to remove here maybe?
return [dealInstance: dealDetails, categoryList: categoryList ] 
```

如何在我的控制器中删除它并将新列表（减去 OTHER）传递给 gsp？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:54:30.737

您可以使用[findAll](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#findAll%28groovy.lang.Closure%29)集合函数并使用闭包来检查要删除的对象。

从文档中：

```
assert [2,4] == [1,2,3,4].findAll { it % 2 == 0 } 
```

因此，您可以执行以下操作：

```
categoryList.findAll { << return false if 'it' is of type 'OTHER', otherwise true >> } 
```

如果您愿意，您也可以直接在您的视图中使用此 oneliner。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:41:11.667

您可以更新grails 域中的**toString()**来执行此操作。

在 toString() 中返回名称 + ", " + categoryKey+ ", " + lastUpdated

我正在显示没有 dateCreated 的字段。

您可以根据您的要求使用上述代码显示字段。

# c# - 在 CSS 声明中使用 session

> ID：14072025
> 
> 赞同：2
> 
> 时间：2012-12-28T15:46:50.117
> 
> 标签：c#, css, asp.net-mvc, razor

我需要将 css 文件名传递给我的剃须刀页面，但我很难让会话进行。

这是我的行：

```
<link href="@Url.Content("~/Content/epp.css")" rel="stylesheet" type="text/css" /> 
```

我需要将'epp'作为a传递，`Session["Css"]`但我还没有弄清楚如何做到这一点。

我努力了：

```
<link href="@Url.Content("~/Content/@HttpContext.Current.Session["Css"].ToString().css")" rel="stylesheet" type="text/css" /> 
```

但这不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:51:07.627

您需要为参数“手动”（使用`string.Format`或使用字符串连接）构建 url`Url.Content`

```
<link href="@Url.Content(string.Format("~/Content/{0}.css", HttpContext.Current.Session["Css"]))" 
      rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:51:18.047

看来你想做这样的事情：

```
<link href="@Url.Content("~/Content/" + HttpContext.Current.Session["Css"] + ".css")" rel="stylesheet" type="text/css" /> 
```

# javascript - 如何在 Chrome 中聚焦开启器窗口？

> ID：14072027
> 
> 赞同：5
> 
> 时间：2012-12-28T15:46:57.337
> 
> 标签：javascript, google-chrome

焦点开启器窗口在 Chrome 中不起作用...

示例 1。

```
popunder=window.open('http://google.com','asdf','width=800,height=800');
popunder.blur();
popunder.opener.window.focus(); 
```

示例 2。

```
popunder=window.open('http://google.com','asdf','width=800,height=800');
popunder.blur();

x = popunder.window.open('about:blank');
x.close();

popunder.opener.window.focus(); 
```

示例 3。

```
popunder=window.open('http://google.com','asdf','width=800,height=800');
popunder.blur();
window.focus(); 
```

例子……等等。

有谁知道有效的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T14:09:34.967

当前在 Chrome 中有效的唯一解决方案是新窗口中的这段代码：

```
$(".closeBtn").click( function(e) 
{
    window.open("",window.opener.name);
}); 
```

不幸的是，该解决方案仅在两种情况下有效：

*   `window.opener`必须在文档加载时设置它的名称（`window.name="WhateverName";`）
*   `window.open()`在用户点击时调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T00:14:38.977

我也在研究这个问题，目前最新的 Canary build 26 打破了我所知道的所有黑客攻击。我知道仍有一些网站正在解决这个问题，但不知道如何解决。

有[jquery popunder](https://github.com/hpbuniat/jquery-popunder)，但前提是你有 jquery 可用。

# jquery - 我希望上传按钮不触发功能

> ID：14072028
> 
> 赞同：0
> 
> 时间：2012-12-28T15:47:07.433
> 
> 标签：jquery, html

下面是它处理普通提交按钮的函数：

```
<script type="text/javascript">                 
   $(function() {
      myClickHandler=function(e){
        if (!validation())
            return false;    
        if (!confirm("Are you sure you want to Proceed?" + "\n" ))
            return false;    
        return true;
    };  
    $('#QandA').submit(myClickHandler);
});

</script> 
```

下面我展示了如何将 imageuploadform、audiouploadform 和 video uploadform 附加到一个表格中`#QandA`：

jQuery：

```
function insertQuestion(form) { 
    var $image = $("<td class='image'></td>"); 
    var $fileImage = $("<form action='imageupload.php' method='post' 
                    enctype='multipart/form-data' target='upload_target_image'
                    onsubmit='return imageClickHandler(this);' 
                    class='imageuploadform' >" +
                    "Image File: <input name='fileImage' type='file' 
                    class='fileImage' /></label><br/><br/><label class='imagelbl'>" +
                    "<input type='submit' name='submitImageBtn' 
                    class='sbtnimage' value='Upload' /></label></form>");
    $image.append($fileImage);
    $tr.append($image);  

        var $video = $("<td class='video'></td>"); 
var $fileVideo = $("<form action='videoupload.php' method='post' 
                enctype='multipart/form-data' target='upload_target_video'
                onsubmit='return videoClickHandler(this);' 
                class='videouploadform' >" +
                "Video File: <input name='fileVideo' type='file' 
                class='fileVideo' /></label><br/><br/><label class='videolbl'>" +
                "<input type='submit' name='submitVideoBtn' 
                class='sbtnvideo' value='Upload' /></label></form>");
$video.append($fileVideo);
$tr.append($video);  

        var $audio = $("<td class='audio'></td>"); 
var $fileAudio = $("<form action='audioupload.php' method='post' 
                enctype='multipart/form-data' target='upload_target_audio'
                onsubmit='return audioClickHandler(this);' 
                class='audiouploadform' >" +
                "Audio File: <input name='fileAudio' type='file' 
                class='fileAudio' /></label><br/><br/><label class='audiolbl'>" +
                "<input type='submit' name='submitAudioBtn' 
                class='sbtnaudio' value='Upload' /></label></form>");
$audio.append($fileAudio);
$tr.append($audio);  

} 
```

HTML（#QandA 表单）：

```
 <form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

//image, video and audio upload form is appended into table below:

<table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
<thead>
<tr>
    <th class="image">Image</th>
    <th class="video">Video</th>
    <th class="audio">Audio</th>
</tr>
</thead>
</table>
<div id="qandatbl_onthefly_container">
<table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0">
<tbody>
</tbody>
</table>

    <p><input id="submitBtn" name="submitDetails" type="submit" value="Submit Details" /></p>

    </form> 
```

现在发生的是图像、视频和音频上传提交按钮正在触发它不应该触发的 myClickHandler() 函数，只有`#submitBtn`应该触发这个函数。如何阻止图像、音频和视频上传按钮触发该`myClickHandler()`功能。

更新：

```
<script type="text/javascript">                 
   $(function() {

    $('#submitBtn').click(myClickHandler(e)) 
});

      function myClickHandler(e){
        if (!validation())
            return false;    
        if (!confirm("Are you sure you want to Proceed?" + "\n" ))
            return false;    
        return true;
    }; 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:49:39.920

问题是您已`myClickHandler()`附加到所有提交按钮，其中包括视频、音频和图像提交按钮。

仅将其附加到`#submitBtn`

# javascript - 在mongodb中使用objectId作为数组

> ID：14072029
> 
> 赞同：0
> 
> 时间：2012-12-28T15:47:08.580
> 
> 标签：javascript, mongodb

在 javascript 中，我们可以使用 indexOf 在数组中找到特定字符串的位置

```
> ["aa","bb"].indexOf("bb")
1 
```

例如，我想对 mongodb 中的 objectIds 做同样的事情

```
> ids= db.foo1.distinct('_id');
[
        ObjectId("50d38d775f2b6c6e3393d6b0"),
        ObjectId("50d38d835f2b6c6e3393d6b1")
]
> id0=db.foo1.findOne()._id
ObjectId("50d38d775f2b6c6e3393d6b0") 
```

我正在寻找一种方法来做类似**ids.indexOf(id0)**的事情，这会给我 id0 在 ids 中的位置。我可以将所有内容都转换为字符串，然后使用 indexOf 但我希望找到一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:50:43.880

如果列表不经常更改（或仅添加到），请考虑仅添加带有索引的文档：`{ i: 0, r: ObjectId('....') }`，其中`i`字段表示索引。

然后`db.foo1.find( { 'list.r' : ObjectId('...') })`。通过查看`i`结果文档中的字段，结果将具有索引。

但是，如果列表很长，这将始终是一个 O(N) 操作，因为它必须搜索每个数组元素才能找到匹配项。您可能需要创建索引来提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:05:46.473

我不认为有一个单行，你需要使用一个 for 循环：

```
for (var i=0; i<ids.length; i++) { 
    if (ids[i].equals(id0)) { ixOfId0 = i; break; } 
} 
```

# jquery - jQuery Mobile - 导航栏导航菜单的滑动滑块

> ID：14072035
> 
> 赞同：0
> 
> 时间：2012-12-28T15:47:30.053
> 
> 标签：jquery, html, jquery-mobile, navigation, slider

使用 jQuery mobile，如何在页脚或页眉导航中添加滑动/滑块。

因此，如果您有一个带有所有图标的 data-role="navbar"，那么如何添加一个滑块，您可以在其中滑动或按向左/向右箭头以在菜单上显示更多图标？

[我找到了这个工作示例：](http://themeforest.net/item/rodin-jquery-mobile-web-theme/2901378)

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T02:18:31.223

这是一个大致的方法，因为它使用 JQM 代码，你可以 ThemeRoll 它就好了。工作测试示例：http: [//jsfiddle.net/Twisty/yMpcE/](http://jsfiddle.net/Twisty/yMpcE/)

仍在制定滑动到正确的操作。

**HTML**

```
<html>
    <head>
        <title>Test Page</title>
    </head>
    <body>
        <div data-role="header">
            <h2>Test Scroll Bar</h2>
            <div id="scrollBar" class="ui-bar ui-bar-a">
            </div>
        </div>
        <div data-role="content">
            <p>Test Page</p>
        </div>
        <div data-role="footer" data-theme="c" data-position="fixed" data-tap-toggle="false" data-fullscreen="false">
            <div data-role="navbar">
            </div>
        </div>
    </body>
</html> 
```

**CSS**

```
#scrollBar {
    width: 840px;
    overflow-x: hidden;
} 
```

**查询**

```
$(function() {
    var scrollBarLinks = {
        0: '#home',
        1: '#link2',
        2: '#link3',
        3: '#link4',
        4: '#link5',
        5: '#link6',
        6: '#link7',
        7: '#link8',
        8: '#link9',
        9: '#link10',
        10: '#link11',
        11: '#link12'
    };
    var scrollBarText = {
        0: 'Home',
        1: 'Link 2',
        2: 'Link 3',
        3: 'Link 4',
        4: 'Link 5',
        5: 'Link 6',
        6: 'Link 7',
        7: 'Link 8',
        8: 'Link 9',
        9: 'Link 10',
        10: 'Link 11',
        11: 'Link 12'
    };
    var scrollBarIcons = {
        0: 'home',
        1: 'star',
        2: 'star',
        3: 'star',
        4: 'star',
        5: 'star',
        6: 'star',
        7: 'star',
        8: 'star',
        9: 'star',
        10: 'star',
        11: 'star'
    };

    var numLinksShown = 6;
    var scrollCursor = 0;

    for (var i = 0; i < numLinksShown; i++) {
        $("<a>", {
            'href': scrollBarLinks[i],
            'id': 'scrollBarBtn-' + i,
            'data-role': 'button',
            'data-inline': true,
            'data-icon': scrollBarIcons[i],
            'data-iconpos': 'right',
            'text': scrollBarText[i]
        }).appendTo("#scrollBar").button();
    }

    $("#scrollBar").swiperight(function() {
        if (scrollCursor == 0) {
            alert("Can't slide to the right. 0");
            return false;
        }
        $("#scrollBar > a:last").remove();
        scrollCursor--;
        $("<a>", {
            'href': scrollBarLinks[scrollCursor],
            'id': 'scrollBarBtn-' + (scrollCursor),
            'data-role': 'button',
            'data-inline': true,
            'data-icon': scrollBarIcons[scrollCursor],
            'data-iconpos': 'right',
            'text': scrollBarText[scrollCursor]
        }).appendTo("#scrollBar").button();
    });

    $("#scrollBar").swipeleft(function() {
        if (scrollCursor == scrollBarLinks.length) {
            alert("Can't slide to the left. " + scrollBarLinks.length);
            return false;
        }
        $("#scrollBar > a:first").remove();
        var nextBtn = scrollCursor + numLinksShown;
        scrollCursor++;
        $("<a>", {
            'href': scrollBarLinks[nextBtn],
            'id': 'scrollBarBtn-' + (nextBtn),
            'data-role': 'button',
            'data-inline': true,
            'data-icon': scrollBarIcons[nextBtn],
            'data-iconpos': 'right',
            'text': scrollBarText[nextBtn]
        }).appendTo("#scrollBar").button();
    });
}); 
```

如您所见，您可以随心所欲地制作它。在此示例中，滑动一次会将其移动到一个按钮上。我相信你可以对短滑动比长滑动更敏感，或者你可以让它移动显示数字的一半。您可以使用自己的图标并将按钮设置为特定大小或外观。

# c++ - 编译 boost c++ 代码错误

> ID：14072037
> 
> 赞同：1
> 
> 时间：2012-12-28T15:47:36.573
> 
> 标签：c++, ubuntu, boost

这是代码（来自[http://www.boost.org/doc/libs/1_52_0/doc/html/container/move_emplace.html](http://www.boost.org/doc/libs/1_52_0/doc/html/container/move_emplace.html)）

```
#include <boost/container/list.hpp>
#include <cassert>
class non_copy_movable
{
   non_copy_movable(const non_copy_movable &);
   non_copy_movable& operator=(const non_copy_movable &);

   public:
   non_copy_movable(int = 0) {}
};
int main ()
{
   using namespace boost::container;
   list<non_copy_movable> l;
   non_copy_movable ncm;
   l.emplace(l.begin(), 0);
   assert(l.size() == 1);
   l.emplace(l.begin());
   assert(l.size() == 2);
   return 0;
} 
```

我有编译问题。我努力了：

```
g++ 2.cpp -o 2 -I /usr/include/boost 
```

还有其他组合，但这是错误的。

错误：

```
2.cpp:1:36: error: boost/container/list.hpp: No such file or directory
2.cpp: In function ‘int main()’:
2.cpp:13: error: ‘boost’ has not been declared
2.cpp:13: error: ‘container’ is not a namespace-name
2.cpp:13: error: expected namespace-name before ‘;’ token
2.cpp:14: error: ‘list’ was not declared in this scope
2.cpp:14: error: expected primary-expression before ‘&gt;’ token
2.cpp:14: error: ‘l’ was not declared in this scope 
```

我在路径中有“boost include”：/usr/lib 中的 /usr/include/boost 与 boost 没有任何关系。我已经使用以下命令在 ubuntu 上安装了 boost：

```
sudo apt-get install libboost-all-dev 
```

你有一些用于 boost 程序的通用编译吗？另一个程序也是用 c++ 编写的，使用 boost 我正常编译没有错误：

```
g++ 1.cpp -o 1
./1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:52:35.350

大多数 boost 都是仅头文件的库，所以如果 /usr/lib 中没有任何 boost 库，我并不感到惊讶。

也就是说，我认为您的包含路径设置是错误的。您正在尝试包含 boost/container/list.hpp 但您的包含路径中已经包含“boost”。除非库正在安装 /usr/include/boost/boost，否则您需要从包含路径或 #include 行中删除“boost”。我的偏好是将它从包含路径中删除，因为这样的语句`#include <boost/container/list.hpp>`比`#include <container/list.hpp>`.

# html - 当悬停在前一个顶级元素上时，为什么我的顶级导航元素会发生变化？

> ID：14072039
> 
> 赞同：0
> 
> 时间：2012-12-28T15:47:37.717
> 
> 标签：html, css

我无法确定以下问题的根源。我正在使用以下菜单：

![顶部菜单](../Images/bbaab9e4121774578bf7e9ee94954acc.png)

问题是当我将鼠标悬停在顶级元素上时，悬停在顶部菜单下的所有元素都会向右移动，如下所示：

![子菜单更改了顶部菜单](../Images/3e113cdc4ce0ce2a19deac02612c166a.png)

（注意子级元素下的顶级元素。）

我已尝试修改样式表中每个元素的位置，但尚未成功解决此问题。（请忽略上图中 jquery 手风琴的边缘。我将尝试使用 z-index 修复这些问题。）

以下是相关的源代码：

```
<link href="/menu_assets/styles.css" rel="stylesheet" type="text/css"> 
```

CSS：

```
#navigation {
  font-size:0.75em; 
  width:160px; 
  position:absolute; 
  z-index: 1; 
  margin-top:13px
}

#navigation ul {
  margin:0px; 
  padding:0px;
}

#navigation li {
  list-style: none; 
  background-color:#2C5463;
} 

ul.top-level {
 background:#2C5463; 
 width:160px
}

ul.top-level li {
 border-bottom: #2C5463 solid;
 border-top: #2C5463 solid;
 border-width: 1px;
 z-index:15;
}

#navigation a {
 color: #fff;
 cursor: pointer;
 display:block;
 height:25px;
 line-height: 25px;
 text-indent: 10px;
 text-decoration:none;
 width:100%;
 z-index:9;
}

#navigation a:hover{
 text-decoration:underline;
    background: f3f3f3;
    z-index:10;
    width:200px;
}

#navigation li:hover {
 background: #f90;
 position: relative;
}

ul.sub-level {
    display: none;
    left:100px;
    z-index:-10
}

li:hover .sub-level {
    background: #999;
    border: #2C5463 solid;
    border-width: 1px;
    display: block;
    position: relative;
    top: -25px;
    z-index: -1;
    left:100px;
}

ul.sub-level li {
    border: none;
    display:block;
    float:left;
    width:80px;
    position:relative;
    z-index:-1;
}

#navigation .sub-level {
    background: #999;
} 
```

的HTML：

```
<div id="navigation">
  <ul class="top-level">
    <li><a href="http://www.iliff.edu">Iliff</a></li>
    <li><a href="">Term</a>
      <ul class="sub-level">
        <li><a href="/schedules/30/2012/all/by_begin_tim/">Spring  2013</a></li>
        <li><a href="/schedules/20/2012/all/by_begin_tim/">Winter  2013</a></li>
        <li><a href="/schedules/10/2012/all/by_begin_tim/">Fall  2012</a></li>
        <li><a href="/schedules/5/2012/all/by_begin_tim/">Summer  2012</a></li>
        <li><a href="/schedules/30/2011/all/by_begin_tim/">Spring  2012</a></li>
        <li><a href="/schedules/20/2011/all/by_begin_tim/">Winter  2012</a></li>
      </ul>
    </li>
    <li><a href="">Course Type</a>
      <ul class="sub-level">
        <li><a href="/schedules/20/2012/all/">All Courses</a></li>
      </ul>
    </li>
    <li><a href="">Time Block</a>
      <ul class="sub-level">
        <li><a href="/schedules/20/2012/all/">All Courses</a></li>
      </ul>
    </li>
    <li><a href="">Order by</a>
      <ul class="sub-level">
        <li>
          <a href="/schedules/20/2012/all/by_course/">Course</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:34:15.387

这是`float:left`导致它的子级列表项。添加`clear: both;`到`#navigation li`css 以修复水平移位问题。

之后，您会注意到菜单现在垂直移动。您需要更改`position: relative`为`position: absolute`on`li:hover .sublevel`

[这是一个小提琴](http://jsfiddle.net/jcurran/vbJ6L/1/)

# 2d-games - 游戏背景滚动/循环算法

> ID：14072041
> 
> 赞同：0
> 
> 时间：2012-12-28T15:47:45.393
> 
> 标签：2d-games

几个月前，当我在制作 2D 背景滚动游戏时，我需要制作一个背景循环，让游戏角色看起来像是在移动，所以我使用以下算法循环背景->

```
 int w=backgroundImage.getWidth();
     int h=backgroundImage.getHeight();
     int desX,desY;

     for(int x=0;x<w;x++)
     {
         for(int y=0;y<h;y++)
         {
             int px=backgroundImage.getRGB(x, y);

             desX=x-2;
             desY=y;

             if(desX<0)
             {
                 desX=w+desX-1;

             }

             backgroundImage.setRGB(desX, desY, px);
         }

     } 
```

但是在应用这个算法循环整个背景之后，我发现整个游戏变慢了。

这个算法有什么好处还是有更好的算法来循环背景？

任何代码片段将不胜感激。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:46:15.953

根据使用的语言，此方法很容易导致您注意到的性能下降。我建议使用背景图像的绘制偏移量，而不是尝试更改原始像素数据本身。

首先，使背景图像比游戏的视口更宽。在每个更新周期中，将图像移动 x 个像素（x 取决于您要描绘的移动速度）。

另外，假设您将 BG 向左移动。当您继续向左移动时，图像的右边缘将进入视口，您会注意到从视口的右边缘扩展的黑色条带。为了防止这种伪影，您需要并排绘制两个背景图像。

此外，为了让这一切看起来无缝，您显然必须设计为 BG 图像以这种方式平铺。正如您所料，此方法将比现有代码段快得多。

# javascript - 如何检查元素是否有点击处理程序？

> ID：14072042
> 
> 赞同：21
> 
> 时间：2012-12-28T15:47:48.123
> 
> 标签：javascript, jquery, javascript-events

> **可能重复：**
> [测试事件处理程序是否绑定到 jQuery 中的元素](https://stackoverflow.com/questions/1236067/test-if-event-handler-is-bound-to-an-element-in-jquery)

尝试执行以下操作（链接是 'a' 标记的 jQuery 对象）：

```
 link.data("events") //undefined even if link has event handlers
 jQuery.data(link, 'events') //undefined always also
 jQuery._data(link, 'events') //undefined always also 
```

使用 jquery-1.8.3

那么，如何检查元素是否有点击处理程序？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-28T15:57:09.037

您可以使用`jQuery._data`来检查事件。第一个参数应该是对 HTML 元素的引用，而不是 jQuery 对象。

```
var ev = $._data(element, 'events');
if(ev && ev.click) alert('click bound'); 
```

示例如下。

```
$(function(){
    $('#test').click(function(){
        // NOTE: this below is refering to the HTML element, NOT the jQuery element
        var ev = $._data(this, 'events');
        if(ev && ev.click) alert('click bound to this button');
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<button id="test">Click me to check for click handlers</button>
```

另请注意，这种检查事件的方法仅在通过 jQuery 绑定事件时才有效。如果事件是通过`element.attachEventListener`,或任何其他非 jQuery 方式绑定的`element.onclick`，`<a onclick="doStuff()">`这将不起作用。如果您适合这艘船，请查看[此答案](https://stackoverflow.com/a/22841712/1090190)。

# php - 如果 UNIX_TIMESTAMP 在 SQL 查询中更小？

> ID：14072046
> 
> 赞同：0
> 
> 时间：2012-12-28T15:48:00.210
> 
> 标签：php, mysql

如果 unix 时间戳小于 db 中记录的日期时间并且遇到了一些问题，我试图仅从 db 获取数据。

这是我到目前为止得到的；

```
date_default_timezone_set("UTC");
$now = date("Y-m-d H:i:s", time());
$timestamp = strtotime($now); 
$timestamp2 = strtotime('-3 days', $timestamp);

$sql = "SELECT g.game_id, UNIX_TIMESTAMP(g.lastdraw)+259200 AS dbtimestamp FROM ".$prefix."_games g 
            INNER JOIN ".$prefix."_gameplayer gp
                ON g.game_id = gp.fk_game_id
            WHERE dbtimestamp < $timestamp2 AND gp.fk_player_id=$currplayer AND g.finished=0";
$result = mysql_query($sql);
while($row = mysql_fetch_assoc($result)){
        //if($row['dbtimestamp'] < $timestamp2){
        $thisgameid = $row['game_id'];

        if($thisgameid == 257748){
            echo '<b>GameID: '.$thisgameid.'</b><br>';
        } else {
            echo 'GameID: '.$thisgameid.'<br>';
        }
        echo 'DBtimestamp: '.$row['dbtimestamp'].'<br><br>';
    //}
} 
```

这种方式我没有任何记录。但是，如果我在 sql 查询中删除“dbtimestamp < $timestamp2”并删除“if($row['dbtimestamp'] < $timestamp2){”的结果，一切正常吗？

有什么想法我哪里出错了吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:54:41.247

当您可以直接在 MySQL 中使用本机日期/时间操作直接执行此操作时，为什么还要搞乱 PHP 时间戳和 MySQL 日期->时间戳值？

```
SELECT ..
WHERE g.lastdraw < (NOW() - INTERVAL 3 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:56:48.107

这可能无法直接回答问题。但是，有些事情值得指出，因为太大而无法评论。

以下：

```
$now = date("Y-m-d H:i:s", time());
$timestamp = strtotime($now); 
$timestamp2 = strtotime('-3 days', $timestamp); 
```

可以改写为：

```
$timestamp2 = strtotime('-3 days'); 
```

此外，MySQL 有几个[日期时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。使用类似`DATE_ADD()`的东西而不是类似的东西`UNIX_TIMESTAMP(g.lastdraw)+259200`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:12:45.500

不仅查询不返回任何行，查询实际上应该抛出如下错误：

```
Error Code: 1054
Unknown column 'dbtimestamp' in 'where clause' 
```

`dbtimestamp`SQL 语句的问题在于，在语句的 WHERE 子句中引用 SELECT 列表（例如 ）中表达式的别名是无效的。

（即使它是有效的，您也不希望在谓词中使用该表达式。您希望您的谓词位于`lastdraw`用于派生该表达式的裸列上。）

要调试 SQL 语句的问题，规范模式是回显包含 SQL 语句的字符串的内容（`$sql`在您的情况下），然后通过在另一个环境（例如 mysql 命令行客户端）中运行该语句来测试该语句。

* * *

一种“修复”是将`dbtimestamp`WHERE 子句中的别名替换为实际表达式。例如

```
WHERE UNIX_TIMESTAMP(g.lastdraw)+259200 < $timestamp2 
```

但是......虽然这会让你绕过 1054 错误，但这并不是真正的正确解决方案。为了性能，你真的不想在左边做加法。您最好使用以下形式的谓词：

```
WHERE UNIX_TIMESTAMP(g.lastdraw) < $timestamp2 - 259200 
```

请注意，如果`lastdraw`列不是 TIMESTAMP 数据类型，那么您还希望避免调用左侧的 UNIX_TIMESTAMP 函数，而是将右侧包装在 FROM_UNIXTIME 函数中。

```
WHERE g.lastdraw < FROM_UNIXTIME( expr ) 
```

# debian - jstatd 不会在我的 linux 服务器上作为守护进程启动

> ID：14072049
> 
> 赞同：1
> 
> 时间：2012-12-28T15:48:06.937
> 
> 标签：debian, java-7, jstatd

我想在我的 Debian 服务器上启动 jstatd 作为守护进程（这是我认为它应该自己做的......）但我似乎无法让它工作。

如果我从命令行运行它，它可以正常启动，但会阻止终端会话。然后我可以使用 VisualVM 远程监控进程（是的！）。但是只要我点击 ^c 来控制会话，jstatd 就会终止。

好的，那么让我们通过 init.d 脚本来完成吧！

同样，它工作正常，但我的终端会话仍然被阻止。

我的开始命令是

```
/usr/bin/jstatd -J-Djava.security.policy=/usr/lib/jvm/jre1.7.0_10/bin/jstatd.all.policy 
```

而且，如上所述，工作正常，因为一旦我执行命令，我就可以看到这些进程。

在 init.d 脚本中，它看起来像：

```
#!/bin/sh
set -e
NAME=jstatd
PIDFILE=/var/run/$NAME.pid
DAEMON=/usr/bin/jstatd
DAEMON_OPTS="-J-Djava.security.policy=/usr/lib/jvm/jre1.7.0_10/bin/jstatd.all.policy

case "$1" in
   start)
     start-stop-daemon --start --quiet --pidfile $PIDFILE -- exec $DAEMON -- $DAEMON_OPTS
... 
```

任何想法可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:39:08.380

`jstatd`通过 & 作为后台进程运行。作为普通用户从终端调用以下命令（注意＆在末尾）：`/usr/bin/jstatd -J-Djava.security.policy=/usr/lib/jvm/jre1.7.0_10/bin/jstatd.all.policy &`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:00:45.297

也许你已经解决了这个问题，但似乎有一个空间

```
-- exec 
```

在“exec”本身之前。也许这是一个复制粘贴问题，但该脚本不应该工作，AFAIK

# ios - 使用 iOS Security.framework 生成自签名证书？

> ID：14072051
> 
> 赞同：5
> 
> 时间：2012-12-28T15:48:19.540
> 
> 标签：ios, security, x509

有可能吗，如果可以，怎么办？我正在使用需要客户端证书的协议，因此我想生成一次并将其存储在钥匙串中以备将来使用。

我目前正在使用安全框架通过 SecKeyGeneratePair 生成密钥对，但是有没有办法将生成的公钥打包到 X.509 证书中，并将其与私钥一起添加以创建新的 SecIdentity？我认为应该有一种方法，因为安全框架在 iOS 和 Mac 上应该是相同的，并且 Mac 上的 Keychain Access 可以生成自签名证书。

OpenSSL 是一种选择，但如果可能的话，我更愿意使用内置的安全框架。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:45:08.187

是的 - 它是（而且非常痛苦）。下面是我正在使用的代码。它使用 SecKeyGeneratePair() 中生成的密钥进行签名（因此在钥匙串/外部范围内）。

我破解这个问题的关键是发现 SecKeyRawSign 只喜欢 SHA1。

如果你想从我手中拿走一些现有的正在运行的代码，请随时 DM 我，清理它，添加文档，然后用一个不错的 Apache 许可证将它放在 github 上，供所有人享用。

```
(NSData *)signCSR:(NSData *)derCSR forDays:(double)days NIDstToKeep:(NSSet *)nidsToAllow 
{
    const unsigned char * ptr;
    NSUInteger len;

    // Gather the details for the CA cert (my cert) from
    // OSX.
    //
    X509 * x509_mycert = NULL;
    SecIdentityRef identityRef = [self secIdentityRef];
    if (!identityRef)
        return nil;

    SecCertificateRef certificateRef = [self secCertificateRef];
    if (!certificateRef)
        return nil;

    CFDataRef certAsDer = SecCertificateCopyData(certificateRef);
    if (!certAsDer)
        return nil;

    // Jump over the fence to OpenSSL  - and create
    // an X509 version.
    //
    ptr = CFDataGetBytePtr(certAsDer);
    len = CFDataGetLength(certAsDer);

    if (!(d2i_X509(&x509_mycert, &ptr, len)))
        return nil;

    // And likewise for the CSR.
    //
    ptr = (const unsigned char *)[derCSR bytes];
    len = [derCSR length];

    X509_REQ *req = NULL;
    if (!(d2i_X509_REQ(&req, &ptr, len)))
        return nil;

    // Copy the CSR into a an actual x509 tenative
    // structure; i.e. the cert we'll issue signed.
    //
    X509 * x509_to_sign = X509_new();

    assert(X509_set_subject_name(x509_to_sign,req->req_info->subject));
    assert(X509_set_issuer_name(x509_to_sign, X509_get_subject_name(x509_mycert)));

    EVP_PKEY * pubkey_csr = X509_REQ_get_pubkey(req);
    X509_set_pubkey(x509_to_sign,pubkey_csr);
    EVP_PKEY_free(pubkey_csr);

    X509_gmtime_adj(X509_get_notBefore(x509_to_sign),0L);
    X509_gmtime_adj(X509_get_notAfter(x509_to_sign),(long)floor(60*60*24*days));

    if (nidsToAllow && [nidsToAllow count]) {
        // Faily blindly copy all known extensions.
        //
        for(int i = X509_get_ext_count(x509_to_sign); i > 0; i--) {
            X509_EXTENSION * ext = X509_get_ext(x509_to_sign,i-i);
            int nid = OBJ_obj2nid(ext->object);
            if ([nidsToAllow containsObject:[NSNumber numberWithInt:nid]]) {
                // NSLog(@"Keeping %s at %d", OBJ_nid2sn(nid),i-i);
                continue;
            }
            // NSLog(@"Killing %s at %d", OBJ_nid2sn(nid),i-1);
            X509_delete_ext(x509_to_sign, i-i);
        }
    } else {
        // wipe them all.
        //
        while (X509_get_ext_count(x509_to_sign) > 0) {
            X509_delete_ext(x509_to_sign, 0);
        }
    };

    // Set a random serial.
    //
    ASN1_INTEGER *bs = ASN1_INTEGER_new();
    long rnd = 0;
    if (!(RAND_bytes((unsigned char *)&rnd, sizeof(rnd))))
        return nil;

    rnd = labs(rnd);
    ASN1_INTEGER_set(bs, rnd);

    if (!((X509_set_serialNumber(x509_to_sign,bs))))
        return nil;

    ASN1_INTEGER_free(bs);

    // Force v3
    //
    X509V3_CTX ctx2;
    X509_set_version(x509_to_sign,2); /* version 3 certificate */
    X509V3_set_ctx(&ctx2, x509_mycert, x509_to_sign, NULL, NULL, 0);

    // Pull in additional x509v3 sections.
    //
    if (DBA) {
       assert(X509V3_set_nconf(&ctx2, conf));
       assert(X509V3_EXT_add_nconf(conf, &ctx2, section, x509_to_sign));
    }
    // Specify signature type.
    //
    x509_to_sign->cert_info->signature->algorithm = OBJ_nid2obj(NID_sha1WithRSAEncryption);

    // Construct the ASN.1 blob which contains all the information
    // we are going to sign.
    //
    const ASN1_ITEM * it = ASN1_ITEM_rptr(X509_CINF);
    unsigned char *buf_in=NULL;
    ASN1_VALUE * asn = (ASN1_VALUE *)(x509_to_sign->cert_info);
    int inl = ASN1_item_i2d(asn,&buf_in, it);

    // Small area to hold the signature on the SHA1 hash.
    //
    size_t sigLen = SecKeyGetBlockSize(privateKey);
    uint8_t * sig = (uint8_t *)malloc(sigLen * sizeof(uint8_t));
    memset((void*)sig, 0, sigLen);

#if TARGET_OS_IPHONE
    // IPhone Way of doing it - where we need to construct the
    // SHA1 of the 'to sign' area ourselves. As SecKeyRawSign
    // does not seem to handly anything beyond a SHA1.
    //
    NSData * buffToSign = [NSData dataWithBytes:buf_in length:inl];
    NSData * buffSha1ToSign = [buffToSign sha1];

    size_t sigLenUsed = sigLen;

    OSStatus status = SecKeyRawSign(privateKey, kSecPaddingPKCS1SHA1, [buffSha1ToSign bytes], [buffSha1ToSign length], sig, &sigLenUsed);
    assert(status == noErr);
    assert(sigLenUsed == sigLen);

#else
    // MacOSX offical way of doing this - which seems to do the SHA1 fun,
    // padding and games deeper down; and where we simply pass the blob.
    //
    CFErrorRef error = NULL;
    SecTransformRef signer = SecSignTransformCreate(privateKey, &error);
    if (error) { CFShow(error); assert(0); };

    NSData * blockToSign = [NSData dataWithBytes:buf_in length:inl];
    SecTransformSetAttribute(signer, kSecTransformInputAttributeName,
                             (__bridge CFTypeRef) blockToSign, &error);
    if (error) { CFShow(error); assert(0); };

    CFDataRef signature = SecTransformExecute(signer, &error);
    if (error) { CFShow(error); assert(0); };

    assert(sigLen == CFDataGetLength(signature));
    bcopy(CFDataGetBytePtr(signature), sig, sigLen);
#endif

    // Wrap up the rest of the block with the bits and bobs needed to
    // create a valid ASN1 block to share as a PEM or DER. Which most
    // crucially is about copying the just created signature into it.
    //
    x509_to_sign->sig_alg->algorithm = OBJ_nid2obj(NID_sha1WithRSAEncryption);
    x509_to_sign->signature->data = sig;
    x509_to_sign->signature->length = sigLen;
    x509_to_sign->signature->flags&= ~(ASN1_STRING_FLAG_BITS_LEFT|0x07);
    x509_to_sign->signature->flags|=ASN1_STRING_FLAG_BITS_LEFT;

    unsigned char * derbuff = NULL;
    int derlen = i2d_X509(x509_to_sign, &derbuff);

    NSData * signedDer = [NSData dataWithBytes:derbuff length:derlen];

    free(sig);
    OPENSSL_free(x509_to_sign);
    OPENSSL_free(x509_mycert);

    return signedDer;
} 
```

请注意，我删除了一些专有/非公共位 - 所以上面可能会错过一些 CFReleases() 和杂项。

# c - c - 将内存分配给指向函数的指针数组

> ID：14072053
> 
> 赞同：1
> 
> 时间：2012-12-28T15:48:45.327
> 
> 标签：c, memory

我希望我的函数创建一个数组并为`n`指向函数的指针分配内存（例如，没有参数并返回 int 的函数）并返回指向该数组的指针。

我试着做：

```
void* f(int n){
   return calloc(int (*arrayName[])(void),n);
} 
```

但我收到语法错误。我很陌生`c`，我试图挖掘一个小时如何解决这个问题，但没有成功。使用`man`我认为的页面`calloc`是要走的路，但我可能错了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T15:52:13.397

让您的生活更轻松并使用`typedef`s：

```
typedef int (*fp)();

fp * f(size_t n)
{
    return calloc(n, sizeof(fp));
} 
```

[手卷宣言：`int (*f(size_t n))()`]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:56:44.873

或者，如果您不想要 typedef（提示：**您仍然需要 typedef，**只是为了完整性）：将类型包装在 a 中`sizeof()`：

```
return calloc(n, sizeof(int (*)(void))); 
```

# vb.net - VB计数奇怪的行为

> ID：14072058
> 
> 赞同：7
> 
> 时间：2012-12-28T15:49:10.780
> 
> 标签：vb.net

尝试将 Count 用作 lambda 时出现奇怪的错误

> 'Public ReadOnly Property Count As Integer' 没有参数并且它的返回类型不能被索引'

如果我**数**到**LongCount**，它会神奇地起作用。根据3 年前的[这篇博文，这是一个已知问题。](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/34a66c1f-81d4-4f6f-bab5-2a0be64db1ec/)似乎它仍然是。**我的问题是如何解决这个问题？**

```
Module Module1
    Sub Main()

        Dim wit2 As New List(Of TestCount) From {New TestCount With {.title = "foo" _
                                                                 ,.PartNumber = "bar"} _ 
                                                 , New TestCount With {.title = "chuck" _
                                                               , .PartNumber = "norris"}}                                          
        Console.WriteLine(wit2.Count(Function(x) x.title = "chuck"))
    End Sub
    Friend Class TestCount
        Property title As String
        Property PartNumber As String
    End Class
End Module 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:16:57.630

试试这个

```
wit2.Where(Function(elem) elem.title="chuck").Count() 
```

它比上面的要简单得多。

希望它会有所帮助

List 具有在 List 类中定义的 Count 属性和在 IEnumerable 上定义的 Count() 扩展方法。这似乎是多余的，但请记住，并非所有 IEnumerable 实现都定义了计数。

As any collection that implements ICollection or ICollection must specify a Count property. Since List, arrays, and many other collections implement ICollection, this means call Count directly and avoid calling the extension method.

# asp.net - 使用 Web 请求获取错误响应

> ID：14072060
> 
> 赞同：1
> 
> 时间：2012-12-28T15:49:15.830
> 
> 标签：asp.net, webrequest, webresponse

我正在使用下面的代码将 XML 文件发送到服务器，如果我上传`adduser.xml`（这是用于添加用户）我得到成功响应，但是对于`deleteuser.xml`（这是删除用户的用户）我得到

> *远程服务器返回错误：(400)
> 错误请求。在 System.Net.HttpWebRequest.GetResponse()
> 在 DeleteUser.Page_Load(Object sender, EventArgs e)*

我已经尝试过方法类型`PUT`，`GET`但得到了同样`POST`的`DELETE`错误。

你能帮我做错什么吗？

```
 public partial class DeleteUser : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            WebRequest req = null;
            WebResponse rsp = null;
            try
            {
                string fileName = Server.MapPath("~/deleteuser.xml");
                string uri = "http://test.com/AuctionUsers/delete";
                req = WebRequest.Create(uri);
                req.Proxy = WebProxy.GetDefaultProxy(); // Enable if using proxy
                req.Method = "POST";   

                req.ContentType = "application/xml";     // content type

                // Wrap the request stream with a text-based writer
                StreamWriter writer = new StreamWriter(req.GetRequestStream());
                // Write the XML text into the stream
                writer.WriteLine(this.GetTextFromXMLFile(fileName));
                writer.Close();
                // Send the data to the webserver

                rsp = req.GetResponse(); //I am getting error over here
                StreamReader sr = new StreamReader(rsp.GetResponseStream());
                string result = sr.ReadToEnd();
                sr.Close();
                Response.Write(result);

            }
            catch (WebException webEx)
            {
                Response.Write(webEx.Message.ToString());
                Response.Write(webEx.StackTrace.ToString());
            }
            catch (Exception ex)
            {
                Response.Write(ex.Message.ToString());
                Response.Write(ex.StackTrace.ToString());
            }
            finally
            {
                if (req != null) req.GetRequestStream().Close();
                if (rsp != null) rsp.GetResponseStream().Close();
            }
        }

        private string GetTextFromXMLFile(string file)
        {
            StreamReader reader = new StreamReader(file);
            string ret = reader.ReadToEnd();
            reader.Close();
            return ret;
        }
    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:29:38.617

可能有几个不同的原因，一个是方法本身的错误。如果您有权访问，我首先建议在服务器端[打开跟踪；](http://msdn.microsoft.com/en-us/library/ms733025.aspx)它可以帮助您查明错误。引用链接，它应该如下所示：

```
<configuration>
   <system.diagnostics>
      <sources>
            <source name="System.ServiceModel" 
                    switchValue="Information, ActivityTracing"
                    propagateActivity="true">
            <listeners>
               <add name="traceListener" 
                   type="System.Diagnostics.XmlWriterTraceListener" 
                   initializeData= "c:\log\Traces.svclog" />
            </listeners>
         </source>
      </sources>
   </system.diagnostics>
</configuration> 
```

然后可以从 .NET 跟踪查看器中查看它生成的文件。

编辑：这里有一个类似的帖子，可能会有所帮助：

[为什么远程服务器返回错误：(400) Bad Request.?](https://stackoverflow.com/questions/11670254/why-the-remote-server-returned-an-error-400-bad-request)

# function - 具有多个隐式参数的函数文字

> ID：14072061
> 
> 赞同：9
> 
> 时间：2012-12-28T15:49:16.933
> 
> 标签：function, scala, syntax, arguments, syntax-error

如何在Scala中定义具有多个隐式参数的函数文字？我试过这样：

```
def create = authAction { (implicit request, user) ⇒ // Syntax error
  Ok(html.user.create(registrationForm))
} 
```

但它会引发编译错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-29T05:37:07.010

如上一个答案所述，您只能为函数文字定义一个隐式参数，但有解决方法。

您可以将函数文字编写为采用多个参数列表，每个列表带有一个参数，而不是多个隐式参数。然后可以将每个参数标记为隐式。重写原始片段：

```
def create = authAction { implicit request ⇒ implicit user ⇒
  Ok(html.user.create(registrationForm))
} 
```

您可以从`authAction`as调用它`f(request)(user)`。

`implicit`关键字重复很烦人，但至少它有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T17:14:06.937

根据我对语言规范的理解，从 2.9.2 版开始，您只能为匿名函数定义一个隐式参数。

例如

```
val autoappend = {implicit text:String => text ++ text} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T17:28:10.313

刚刚遇到了与您类似的情况，在 Play 中实现了一个 authAction 函数，该函数可以轻松地将用户传入。您可以像[lambdas 那样](https://stackoverflow.com/a/14079020/350029)使用currying；我最终让我的`authAction`函数`RequestHeader`隐式接收，但显式传递请求和用户：

```
def authAction(f: (RequestHeader, User) => Result)(implicit request: RequestHeader) = {
    ...
    val authUser = loadUser(...)
    f(request, authUser)
} 
```

并使用它：

```
def create = authAction { (request, user) =>
    Ok(html.user.create(registrationForm))
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-19T23:24:27.387

无法定义具有多个隐式参数的匿名函数。

为了详细说明@pagoda_5b 的答案和@paradigmatic 的评论，[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 6.23 节定义了匿名函数，如下所示：

```
Expr ::= (Bindings | [‘implicit’] id | ‘_’) ‘=>’ Expr
ResultExpr ::= (Bindings | ([‘implicit’] id | ‘_’) ‘:’ CompoundType) ‘=>’ Block
Bindings ::= ‘(’ Binding {‘,’ Binding} ‘)’
Binding ::= (id | ‘_’) [‘:’ Type] 
```

如您所见，您可以定义参数列表*或*单个隐式参数。

如果需要隐式多个参数，则需要对它们进行柯里化。

# javascript - Slides.js 分页

> ID：14072063
> 
> 赞同：0
> 
> 时间：2012-12-28T15:49:31.827
> 
> 标签：javascript, jquery

我正在为作品集使用 slides.js 插件，但我遇到了分页问题。每次我选择另一个项目时，它都会添加分页项目符号，并且分页上的时间都会被丢弃。

这是我现在正在尝试做的事情，到目前为止还没有运气。

```
$("#slides").slides({
        preload: true,
        preloadImage: 'img/loading.gif',
        play: 5000,
        pause: 2500,
        animationStart: function() {
            clearInterval($("#slides,.pagination").data('interval'));
        }
    }); 
```

想法？

我在 github 页面上查看了幻灯片插件和问题，找不到遇到同样问题的人。

[https://github.com/nathansearles/Slides/issues](https://github.com/nathansearles/Slides/issues)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:11:10.420

问题最终是我必须做一个简单的

```
$(".pagination li").remove(); 
```

在幻灯片插件初始化之前。只需确保在幻灯片插件以其参数开始之前放置它。

# javascript - 处理操作调用 URL 后的 HTML 更改 URL

> ID：14072065
> 
> 赞同：0
> 
> 时间：2012-12-28T15:49:36.950
> 
> 标签：javascript, html, ajax, url

我发现这个问题很难在标题中简短地改写，但这就是发生的事情：

例如，一个页面 (domain.com/pages) 显示了一个表，其中包含来自数据库的行，并且我为每一行提供了一个“删除”按钮。例如，当 ID 为 5 的行被删除时，此按钮将重定向到 (domain.com/pages/delete/5)。加载页面时，它识别出需要删除第 5 行，所以它这样做了。之后，它会继续加载，就像请求了 (domain.com/pages) 一样。所以现在表格再次显示，行 ID 5 已删除，地址栏中的 URL 为 (domain.com/pages/delete/5)。刷新时它会重新加载（domain.com/pages/delete/5），但我希望它重新加载（domain.com/pages）。

简而言之：

*   (domain.com/pages) -> 显示表
*   (domain.com/pages/delete/[id]) -> 从表中删除 [id] -> 显示表

我不想在第二个链接之后进行重定向，因为我想最大限度地减少重定向并保持网站速度较高。这*可以*通过 AJAX 调用来解决，但这可能会使事情变得不必要地复杂化。我是否错过了一种简单的方法来使这个动作调用 URL 只是一个计时器（即不通过刷新（意外地）调用）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:54:01.127

您可以使用 History API 来实现这一点：

```
if( history.replaceState) history.replaceState(null,document.title,"/pages"); 
```

但是，如果您对性能感兴趣，请记住，每次删除一行时，您都必须重新加载整个表。相反，您应该使用 AJAX 请求服务器删除该行，然后使用`.removeChild()`从表中删除相应的行。

# java - 固定宽度但流体高度的组件 - 可能吗？

> ID：14072075
> 
> 赞同：1
> 
> 时间：2012-12-28T15:50:18.137
> 
> 标签：java, height, components, fluid, fixed-width

如果在组件上使用 setPreferredSize()，它会固定宽度和高度。因此，如果我只想要一个固定的宽度，并根据需要调整高度以将内容容纳到该受限制的宽度中，这并不好。

考虑一段 HTML 文本。在浏览器窗口中，字符串将自动换行，并且它需要调整高度，使其适合可用宽度。因此，如果我们要固定浏览器的宽度，文本的高度将保持不变。

用一个组件也能达到同样的效果吗？具体来说，一个JPanel。

请注意，我相信 setMaximumSize() 会做我想做的事 - 允许我设置最大宽度，并将高度设置为很大，这样它就不会比我指定的更宽，但有足够的高度可以增长。但是，系统似乎完全忽略了该功能。例如：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JViewport;

public class TMSApp
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame("TestMaximumSize"); 
        Container container = frame.getContentPane(); 
        container.setBackground(Color.RED); 

        container.setLayout(new BorderLayout() ); 

        JViewport viewport = new JViewport(); 
        viewport.setBackground(Color.BLACK); 
        viewport.setPreferredSize(new Dimension(640, 480) ); 
        container.add(viewport, BorderLayout.CENTER); 

        JPanel testPanel = new JPanel(); 
        testPanel.setBackground(Color.WHITE); 
        testPanel.setMaximumSize(new Dimension(100, 9999) ); 
        //testPanel.setPreferredSize(new Dimension(100, 9999) ); 

        viewport.setView(testPanel); 

        testPanel.setLayout(new BoxLayout(testPanel, BoxLayout.Y_AXIS) ); 

        testPanel.add(new JLabel("<html>This is a very long HTML label " 
                                    + "that should adapt to the width of " 
                                    + "the parent container by wrapping text, " 
                                    + "just as it would in a web page " 
                                    + "constrained to the window width.</html>") ); 

        frame.setVisible(true); 
        frame.pack(); 

    }

} 
```

如果您运行此应用程序，尽管我说“不超过 100”，但 testPanel 会尽可能宽，将标签留在一行上。对我来说，这违反了 setMaximumSize() 的约定。

（请注意，如果您使用 setPreferredSize()，它*确实*会正确约束它 - 但我们不能在上面提到的组件上使用 setPreferredSize()，因为它还固定高度而不是赋予它一些流动性 - 是的，setMaximumSize() 会最终限制了高度，但这是可以接受的）。

知道如何控制宽度但让高度根据需要进行调整吗？

（作为记录，我想将一堆面板添加到包裹在 JScrollPane 中的更大面板中，从而充当带有面板而不是标签的列表。我考虑必须横向滚动大面板才能看到所有项目一个糟糕的用户界面，所以我希望宽度不比滚动窗格的实际可显示区域宽，没有滚动条，因此让较小的面板调整它们的高度以适应它们的内容 - 带有 HTML 字符串的 JLabels - 到可用宽度。因此，用户只需垂直滚动即可查看所有项目。如上所示，即使手动使用视口+滚动条也会遇到同样的问题。

如果我只能固定较大面板的宽度，则较小的子面板将自动受宽度约束；或者，如果我只能固定子面板的宽度，那么较大的面板永远不会比我想要的更宽。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:33:26.260

我添加了对 SwingUtilities 的调用，以确保您的 Swing 组件位于事件调度线程上。

我让你的 GUI 工作了，但你需要注意 testPanel 的高度。如果您可以只设置首选宽度或首选高度而无需同时设置两者，则 Swing 会更好。

这是我的代码版本。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ScrollPaneConstants;
import javax.swing.SwingUtilities;

public class TMSApp implements Runnable {

    @Override
    public void run() {
        JFrame frame = new JFrame("TestMaximumSize");
        Container container = frame.getContentPane();
        container.setBackground(Color.RED);
        container.setLayout(new BorderLayout());

        JPanel testPanel = new JPanel();
        testPanel.setBackground(Color.WHITE);
        testPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        testPanel.setPreferredSize(new Dimension(250, 9999));
        testPanel.setLayout(new BoxLayout(testPanel, BoxLayout.Y_AXIS));
        testPanel.add(new JLabel("<html>This is a very long HTML label "
                + "that should adapt to the width of "
                + "the parent container by wrapping text, "
                + "just as it would in a web page "
                + "constrained to the window width.</html>"));

        JScrollPane scrollPane = new JScrollPane(testPanel);
        scrollPane.setHorizontalScrollBarPolicy(
                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        scrollPane.getViewport().setPreferredSize(new Dimension(250, 400));

        container.add(scrollPane, BorderLayout.CENTER);

        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new TMSApp());
    }

} 
```

# php - 使用php将文本行解析为不同的变量

> ID：14072083
> 
> 赞同：1
> 
> 时间：2012-12-28T15:51:10.463
> 
> 标签：php, arrays, parsing

我对php很陌生，所以我为这个看似简单的问题道歉。我需要将一行文本解析为不同的变量。更具体地说，我需要解析不同数组中的多行文本。文本行将类似于以下内容

```
timeStamp UserName* garbage text Number x item*
timeStamp UserName* garbage text Number x item*
timeStamp UserName* garbage text Number x item* 
```

userName 和 item 都可以包含空格。我认为解决这个问题的最佳方法是 4 个不同的数组？

实际数据如下所示

```
03:12:34 mhopkins321 has acquired 5 x bottles of water
09:38:01 Nick Smith has acquired 100 x pennies
23:22:59 Fancy Frank has acquired 15684 x artichoke hearts 
```

所以我会假设数组是

```
$timeStamp         $userName        $amount     $items
03:12:34           mhopkins321      5           bottles of water
09:38:01           Nick Smith       100         pennies
23:22:59           Fancy Frank      15684       artichoke hearts 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:24:09.257

这是一种非常糟糕的机器解析格式。特别有问题的是名称可能有空格但没有分隔。

解析这个的唯一万无一失的方法是知道可能出现在名称和金额之间的所有“垃圾文本”字符串。除非您有完整的列表，否则您可能会弄乱您的用户名。

`explode()`可以使用将行拆分为数组然后提取部分来解析它。但是，我认为您应该只使用正则表达式。

```
$sample = "
03:12:34 mhopkins321 has acquired 5 x bottles of water
09:38:01 Nick Smith has acquired 100 x pennies
23:22:59 Fancy Frank has acquired 15684 x artichoke hearts
";

$re = '/^(?<timeStamp>[0-9]{2}:[0-9]{2}:[0-9]{2}) # timestamp 
         \s+
         (?<userName>[\w\s]+)        # user name
         \s+(?:has\s+acquired)\s+    # garbage text between name and amount
         (?<amount>\d+)              # amount
         \s+x\s+                     # multiplication symbol
         (?<items>.*)\s*$            # item name (to end of line)
       /xmu';

preg_match_all($re, $sample, $matches, PREG_SET_ORDER);

var_export($matches); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:24:54.713

看起来你需要一个正则表达式来分割文本行。它不是那么容易理解，而是您在与您相关的其他情况下需要的工具。手册页：[http ://br2.php.net/manual/en/book.pcre.php](http://br2.php.net/manual/en/book.pcre.php)

您需要在文本上找到模式。例如，时间戳总是从行首开始，长度为 8 个字符？

# javascript - jquery选择不嵌套在孩子中的孩子

> ID：14072085
> 
> 赞同：9
> 
> 时间：2012-12-28T15:51:14.340
> 
> 标签：javascript, jquery, html, jquery-selectors

我在使用 jQuery 选择器时遇到了一些问题。

假设我有以下 html，其中`(...)`代表未定义数量的 html 标签。

```
(...)
<div class="container">
  (...)
    <div class="subContainer">
      (...)
        <div class="container">
          (...)
            <div class="subContainer"/>
          (...)
        </div>
       (...)
     </div>
   (...)
</div>
(...) 
```

假设我有一个名为的 javascript 变量`container`，它指向第一个 div（带有类容器）。我想要一个选择第一个子容器但不选择嵌套子容器的 jquery。如果我用`$(".subContainer", container);`我会得到他们两个。

我试过使用

```
$(".subContainer:not(.container .subContainer)", container); 
```

但这会返回一个空集。有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T15:53:52.730

您可以使用`direct child`选择器：

```
$("> .subContainer", container); 
```

如果`container`是引用顶级`.container`元素的 jQuery 对象，您还可以使用`children`方法：

```
container.children('.subContainer'); 
```

或者`find`和`first`方法：

```
container.find('.subContainer').first(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-28T16:31:45.123

基于[Jquery：获取一个类的所有元素，这些元素不是具有相同类名的元素的后代？](https://stackoverflow.com/questions/12624058/jquery-get-all-elements-of-a-class-that-are-not-decendents-of-an-element-with-t/12625354#12625354)我开发了以下解决方案。谢谢大家。

```
$.fn.findButNotNested = function(selector, notInSelector) {
    var origElement = $(this);
    return origElement.find(selector).filter(function() {
        return origElement[0] == $(this).closest(notInSelector)[0];
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:56:44.040

要获得第一个子容器，您可以使用

```
$('.subContainer')[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T04:56:03.690

这似乎适用于我自己的用途......

```
$('.item').filter(function() { return $(this).parents('.item').length == 0; }); 
```

这仅返回`#outer`div。

```
<div class="item" id="outer">
    <div class="item" id="inner"></div>
</div> 
```

# c# - 通过控制台应用程序实现 WCF 服务时方法参数不匹配

> ID：14072090
> 
> 赞同：1
> 
> 时间：2012-12-28T15:51:34.287
> 
> 标签：c#, .net, wcf, wcf-binding

我正在尝试创建一个基本`WCF application`并使用 a`Console Application`来调用该服务。我将其添加`service reference`到并在as 中`WCF Service`调用它`Console Application`

```
ServiceName.Service s = new ServiceName.Service();
string str = string.empty;
str = s.GetData(10);  // here i get an argument overload mismatch error 
```

`Service.cs`这个方法的文件里面`WCF Service`定义为

```
public string GetData(int value)
{
    return string.Format("You entered: {0}", value);
} 
```

为什么在这种情况下会出现参数重载不匹配错误？我是 WCF 的新手。我已将 WCF 服务添加为服务参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:22:44.267

事实证明，该服务未正确托管。我重建了解决方案，并且在重新托管`WCF service client`.

参数对应于内部定义的参数`Service.cs`

# java - 从 JKS KeyStore 读回 ECPrivateKey

> ID：14072095
> 
> 赞同：4
> 
> 时间：2012-12-28T15:51:49.687
> 
> 标签：java, bouncycastle, keystore, elliptic-curve

我正在尝试`ECPrivateKey`从 JKS KeyStore 中读回一个（包括证书链），如下面的代码所示。

```
String storeType = "JKS", storePass = "secret", storePath = "c:/keystore.ks";
ECNamedCurveParameterSpec bcParamSpec = ECNamedCurveTable.getParameterSpec("brainpoolp224r1");
ECNamedCurveSpec jceParamSpec = new ECNamedCurveSpec(bcParamSpec.getName(), bcParamSpec.getCurve(), bcParamSpec.getG(), bcParamSpec.getN(), bcParamSpec.getH(), bcParamSpec.getSeed());

KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("EC");
keyPairGenerator.initialize(jceParamSpec);
KeyPair keyPair = keyPairGenerator.generateKeyPair();
ECPublicKey publicKey = (ECPublicKey)keyPair.getPublic();
ECPrivateKey privateKey = (ECPrivateKey)keyPair.getPrivate();

Certificate trustCert =  createX509Certificate("CN=CA", "CN=CA", publicKey, privateKey, "SHA224withECDSA");
Certificate[] chain = { createX509Certificate("CN=Client", "CN=CA", publicKey, privateKey, "SHA224withECDSA"), trustCert };

KeyStore keyStore = KeyStore.getInstance(storeType);
keyStore.load(null, storePass.toCharArray());
keyStore.setKeyEntry("eckey", privateKey, storePass.toCharArray(), chain);

FileOutputStream outputStream = new FileOutputStream(storePath);
keyStore.store(outputStream, storePass.toCharArray());
outputStream.close();

/* Now read it back */
FileInputStream inputStream = new FileInputStream(storePath);
KeyStore keyStore2 = KeyStore.getInstance(storeType);
keyStore2.load(inputStream, storePass.toCharArray());

Key privateKey2 = keyStore2.getKey("eckey", storePass.toCharArray()); 
```

Sun/Oracle 安全提供商不支持我使用的曲线，因此我使用的是 Bouncy Castle。BC 插入到我的安全提供者列表中的第 0 位。存储工作正常，回读失败：

```
java.security.UnrecoverableKeyException: Unknown named curve: 1.3.36.3.3.2.8.1.1.5
    at sun.security.provider.KeyProtector.recover(KeyProtector.java:338)
at sun.security.provider.JavaKeyStore.engineGetKey(JavaKeyStore.java:138)
at sun.security.provider.JavaKeyStore$JKS.engineGetKey(JavaKeyStore.java:55)
at java.security.KeyStore.getKey(KeyStore.java:792) 
```

显然，JKS KeyStore 实现不会遍历安全提供者列表。但是，这对于 BC:`PKCS12`和`BKS`. **有没有办法`JKS`在使用 BC 恢复密钥时用作 KeyStore 类型？**

上面代码中使用的`createX509Certificate`方法由下式给出：

```
private static X509Certificate createX509Certificate(String dn, String issuer, PublicKey publicKey, PrivateKey privateKey, String sigAlg) throws Exception {
    X509V3CertificateGenerator certGenerator = new X509V3CertificateGenerator();
certGenerator.setSerialNumber(BigInteger.valueOf(Math.abs(new Random().nextLong())));
certGenerator.setIssuerDN(new X509Name(issuer));
    certGenerator.setSubjectDN(new X509Name(dn));
    certGenerator.setNotBefore(Calendar.getInstance().getTime());
certGenerator.setNotAfter(Calendar.getInstance().getTime());
certGenerator.setPublicKey(publicKey);
certGenerator.setSignatureAlgorithm(sigAlg);
X509Certificate certificate = (X509Certificate)certGenerator.generate(privateKey, "BC");
return certificate;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:56:48.857

我唯一的想法是实现您自己的[提供者](http://docs.oracle.com/javase/6/docs/api/java/security/Provider.html)，它可以将“KeyFactory”请求代理给 BouncyCastle 提供者，将其余的请求代理给另一个知道 JKS 的提供者，或者将所有请求代理给 BouncyCastle，但“KeyStore”请求除外。[这是](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/HowToImplAProvider.html)有关如何实现提供程序的文档。

# android - 如何在Android中制作多线程代码？

> ID：14072104
> 
> 赞同：1
> 
> 时间：2012-12-28T15:52:31.103
> 
> 标签：android, multithreading

我想做一个多线程程序，下面是我的试用。但只有 thread2 有效。如果我注释掉 thread2 部分，那么 thread1 可以工作。如何让它们同时工作？谢谢！

```
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.app.Activity;
import android.view.Menu;
import android.widget.EditText;

public class MainActivity extends Activity {
    private EditText edittext1, edittext2;
    volatile boolean bThreadRun = false;

    MyThread1 myThread1;
    MyThread2 myThread2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        edittext1 = (EditText) findViewById(R.id.EditText1);
        edittext2 = (EditText) findViewById(R.id.EditText2);

        edittext1.setText("this is thread1");
        edittext2.setText("this is thread2");
    }

    @Override
    protected void onStart() {
        super.onStart();
        myThread1 = new MyThread1();
        myThread1.start();
        myThread2 = new MyThread2();
        myThread2.start();
        bThreadRun = true;
    }

    @Override
    protected void onPause() {
        super.onPause();
        bThreadRun = false;
        // myThread.stop();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private Handler mHandler1 = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 1:
                updateEditText1();
                break;
            }
        };
    };

    private Handler mHandler2 = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 2:
                updateEditText2();
                break;
            }
        };
    };

    public void updateEditText1() {
        edittext1.append("thread1\n");
    }

    public void updateEditText2() {
        edittext2.append("thread2\n");
    }

    public class MyThread1 extends Thread {
        public MyThread1() {
        }

        @Override
        public void start() {
            super.start();
        }

        @Override
        public void run() {
            while (bThreadRun) {
                try {
                    sleep(500);
                    Message message = new Message();
                    message.what = 1;
                    mHandler1.sendMessage(message);
                } catch (InterruptedException ex) {
                }
            }
        }
    }

    public class MyThread2 extends Thread {
        public MyThread2() {
        }

        @Override
        public void start() {
            super.start();
        }

        @Override
        public void run() {
            while (bThreadRun) {
                try {
                    sleep(500);
                    Message message = new Message();
                    message.what = 2;
                    mHandler2.sendMessage(message);
                } catch (InterruptedException ex) {
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:57:34.783

这是因为 Handler 实例是每个活动的。因此，您需要将两个线程传递给相同的 Handler 实例，然后它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:00:34.613

在调用 thread.start()**之前，**您应该有 'bThreadRun = true

# ruby-on-rails - 我怎样才能让我的表格混合在一起？

> ID：14072115
> 
> 赞同：0
> 
> 时间：2012-12-28T15:53:55.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我正在尝试为我现有的搜索表单实现**自动完成搜索框。**
我怎样才能将它们混合在一起？

**我现有的搜索表单**

```
 <%= form_tag communities_path, :method => :get, :class => 'form-search' do %>
   <div class="input-append">
    <%= text_field_tag :search, params[:search], :class =>'input-xlarge search-query', :placeholder => 'keyword' %>
    <button type="submit" class="btn">Search</button>
   </div>
  <% end %> 
```

**自动填写表格**

```
<%= form_for :community do |f| %>
  <%= f.autocomplete_field :community_title, autocomplete_community_title_communities_path %>
<% end %> 
```

更新：请注意，我使用 gem 'rails3-jquery-autocomplete'

**社区控制器.rb**

```
autocomplete :community, :title, :full => true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:29:26.333

我想你正在寻找

```
 <%= form_tag communities_path, :method => :get, :class => 'form-search' do %>
   <div class="input-append">
    <%= autocomplete_field_tag 'search', params[:search], autocomplete_community_title_communities_path, :class =>'input-xlarge search-query', :placeholder => 'keyword' %>
    <button type="submit" class="btn">Search</button>
   </div>
  <% end %> 
```

我认为所有的 form_for 方法都有一个对应的 *_tag 方法，而不是可以在 form_tag 中使用。

form_for 只是做了一些额外的魔法。

# javascript - 如何防止在html5中单击按钮时页面刷新？

> ID：14072120
> 
> 赞同：0
> 
> 时间：2012-12-28T15:54:10.513
> 
> 标签：javascript, html

我想防止在单击按钮时重新加载页面。单击时，我只想交换按钮值而不刷新页面。我该怎么做？

```
<button id="4">134</button> // button 1 
<button id="5">234</button> // button 2 
```

单击按钮 1（ID 为“4”的按钮）后，我想要以下结果

```
// After clicking button 1
<button id="4">234</button> // button 1
<button id="5">134</button> // button 2 
```

如何在不重新加载/刷新 html 页面的情况下做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:26:20.030

为了防止刷新，只需添加 type="button"

```
<button id="4" type="button">134</button> 
<button id="5" type="button">234</button> 
```

至于交换值，我重申 bmargulies，你需要学习 javascript，或者让你的问题更清楚，这样我们才能给你一个更好的答案。

但是对于您的模糊问题（说明单击#4 后文本应该交换）这里是使用 jQuery 的一些方向。这样做只会交换一次。

```
<script type="text/javascript">
    $(function(){
        $('#4').click(function(){
            $(this).html(234);
            $('#5').html(134);
        });
    });
</script> 
```

有关 jQuery 的帮助：http: [//api.jquery.com/](http://api.jquery.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:23:20.217

你问了一个非常广泛的问题，它根本与 HTML5 无关。要获得此功能，您必须将 javascript 处理程序附加到您的按钮。有许多不同的 javascript 库可以帮助您解决这个问题，或者您可以编写原始 javascript。

你将不得不去做很多关于 javascript 编码的基本学习来完成这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T15:44:04.940

UpHelix 的回答解决了您页面重新加载的主要问题。许多浏览器上按钮的默认类型已重置，这会导致重新加载页面，如问题的答案中所述[如何使 html 按钮不重新加载页面？](https://stackoverflow.com/questions/1878264/how-do-i-make-an-html-button-not-reload-the-page%22How%20do%20I%20make%20html%20button%20not%20reload%20the%20page%22)

关于您的价值交换任务，我的代码为您完成了工作

```
$(function() {
        $('button#4').click(function() {
            var firstButtonVal = $('button#4').text();
            var secondButtonVal = $('button#5').text();
            $('button#4').text(secondButtonVal);
            $('button#5').text(firstButtonVal);
        });
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<button id="4" type="button">134</button>
<button id="5" type="button">234</button>
```

# c++ - BackgroundWorker DoWork 异步“不工作”与蓝牙功能 C++

> ID：14072128
> 
> 赞同：1
> 
> 时间：2012-12-28T15:54:43.013
> 
> 标签：c++, function, visual-studio-2012, backgroundworker

我已经编写了一个扫描蓝牙设备的算法并将其添加到我的列表框中。现在我希望这个算法在后台永久运行。但是我的 Backgroundworker 不能正常工作。甚至我的用户界面也反应迟钝。

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
         toolStripStatusLabel1->Text="Active";
         toolStripProgressBar1->Value=100;
         backgroundWorker1->RunWorkerAsync();
     }

private: System::Void backgroundWorker1_DoWork(System::Object^  sender, System::ComponentModel::DoWorkEventArgs^  e) {
         BluetoothFunction(); \\It tells me here is an Error
     }

void BluetoothFunction(){
        m_bt = BluetoothFindFirstRadio(&m_bt_find_radio, &m_radio);

        do{
            vector<wstring> vec;
            int m_device_id=0;
            int m_radio_id = 0;
            m_radio_id++;
            BluetoothGetRadioInfo(m_radio, &m_bt_info);

            m_search_params.hRadio = m_radio;
            ::ZeroMemory(&m_device_info, sizeof(BLUETOOTH_DEVICE_INFO));
            m_device_info.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);
            m_bt_dev = BluetoothFindFirstDevice(&m_search_params, &m_device_info);

            do{
                wostringstream tmp;
                ++m_device_id;

                //Konvertiere Byte in String
                for (int i = 0; i < 6; i++) {
                  tmp << hex << m_device_info.Address.rgBytes [i];
                  if (i < 5)
                    tmp << L':';
                }                   

                //Verfügbarkeitsliste
                vec.push_back(tmp.str());

                listBox2->Items->Add(System::Runtime::InteropServices::Marshal::PtrToStringUni(IntPtr((void*) tmp.str().c_str())));

            }while(BluetoothFindNextDevice(m_bt_dev, &m_device_info));
            //searchId(vec, targetId); 
            BluetoothFindDeviceClose(m_bt_dev);

        } while(BluetoothFindNextRadio(&m_bt_find_radio, &m_radio));
        BluetoothFindRadioClose(m_bt);      
} 
```

我猜我的蓝牙功能参数不正确。

如果有人可以帮助我，我会很高兴。

问候

# javascript - 带有 node.js 的前端 javascript 框架

> ID：14072131
> 
> 赞同：30
> 
> 时间：2012-12-28T15:54:47.910
> 
> 标签：javascript, node.js, backbone.js, ember.js, javascript-framework

我开始学习前端 JavaScript 框架，如 Backbone.js 或 Embers.js，我想在 Node.js 中做一些项目。我一直在阅读一些文档，当您在单个页面中创建应用程序时似乎使用了这些框架。我习惯于开发分成几个页面的应用程序，我想知道这些框架对我的项目来说是更多的帮助还是负担。

我还想知道服务器和客户端是否都使用 JavaScript，因为我使用相同的语言是否有任何类型的功能可以用来在它们之间共享一些代码，以及是否有任何前端框架更适合Node.js 正因为如此。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-28T20:45:32.013

我们不能真正指出一个同时适用于 NodeJS 应用程序和前端的前端框架。

**一个**。NodeJS 本质上是服务器端。但它的 JavaScript。这意味着所有好的功能实用程序，如[underscore.js](http://underscorejs.org/)、[uglify.js](https://github.com/mishoo/UglifyJS)、您自己的功能性东西（例如您可能为在基于 Web 的 JavaScript 中查找数组中的项目而开发的逻辑）等都可以在后端使用.

**乙**。前端已经发展，JavaScript 应用程序也在发展。根据您的问题，当您想开发单页应用程序时，您可能需要查看 MVC、MVVM、MVW、MVP**设计模式**。例如。BackboneJS 帮助您构建 MVC 应用程序。虽然有像 jQuery 这样的库来处理富应用程序中的 DOM、ajax 和其他东西，但大多数时候你会发现应用程序是多种东西的组合

*   一页的 MVC 应用程序也需要动态视图，因此，模板就出现了。例如，Ember 使用[Handlebars](http://handlebarsjs.com/)。Backbone 使用下划线等。

**C.** _ 当您想为应用程序的前端选择框架时，[TodoMVC](http://todomvc.com/)是最好的选择 - [http://todomvc.com/](http://todomvc.com/)。

**D.** _ 当您想为后端选择一个框架（在您的情况下为 NodeJS）时，您可能需要查看[**Express**](http://expressjs.com/)和[**Geddy**](http://geddyjs.org/)。
如果 NodeJS 是普通浏览器 JavaScript，Express 和 Geddy 将是主干——对于 MVC
此外，对于 NodeJS 应用程序，[**NPM 注册表**](https://npmjs.org/)有大量实用程序，其中大部分是您已经在浏览器 JavaScript 中使用的**东西的端口**

**E。** _ 服务器只是提供页面和资源。因此，据我所知，即使您在后端和前端都使用 JavaScript，您也需要单独的努力和文件/脚本。唯一的**共同点**是相同的前端 JavaScript 开发人员可以在后端工作，但**学习曲线更小**。

我见过专家由于学习曲线的负担而放弃了框架的想法。因此，归根结底，必须专门针对使用多种技术的应用程序进行一些研究，以及学习和实施这些技术所涉及的努力

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T19:32:04.053

签出此页面：

[http://todomvc.com/](http://todomvc.com/)

它包含所有常见的 javascript 框架及其 todo 示例。尝试一些并找出最适合您的选择。希望这个材料有帮助。

# winforms - 从winforms图片框中的url加载的图像是否存储在缓存中？

> ID：14072133
> 
> 赞同：1
> 
> 时间：2012-12-28T15:55:05.650
> 
> 标签：winforms, caching, picturebox

在 winform 应用程序的表单中，我必须显示存储在网络服务器上的图像（多个图像）。显示图像没有问题，因为我可以简单地将 URL 分配给图片框。

```
picturebox1.ImageLocation = "http://example.com/Image.jpg"; 
```

那个表格会经常打开很多次，现在每次打开表格，每次都在下载图片。没有必要增加流量。

是否可以告诉图片框缓存图像（就像浏览器一样），所以下次请求相同的图像时，它应该快速加载。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T20:08:37.717

预加载图像
`Image img = Image.FromFile("...");`

然后您可以将图像提供给 PictureBox：
`pictureBox1.Image = img;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T20:00:48.477

您可以将图像存储在临时文件夹中，并在打开表单时首先检查该文件夹的临时文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-28T18:27:13.637

试试这个方法：

首先创建一个函数来检查文件是否存在。如果存在，则只需从本地路径加载文件，否则从 URL 下载文件并将其存储在本地。

```
//Function to validate the local cache file

    private Image load_image()
    {
       Image img=null;
        if(!(File.Exists(@"d:\samp.png")))
        {
            using (HttpClient httpclient= new HttpClient())
            {
                var response = httpclient.GetAsync(@"https://i.imgur.com/Jb6lTp1.png");
                if (!response.Result.IsSuccessStatusCode)
                {
                    return img;
                }
                using (var fs= new FileStream(@"d:\samp.png",FileMode.CreateNew))
                {
                    response.Result.Content.CopyToAsync(fs);
                }

            }
        }
        img = Image.FromFile(@"d:\samp.png");
       return img;
    }

 //calling the function of click event

    private void button1_Click(object sender, EventArgs e)
    {
        pictureBox1.Image = load_image();
        pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
    } 
```

# search - 如何在 Java API 中按方法名称搜索类/接口？

> ID：14072134
> 
> 赞同：2
> 
> 时间：2012-12-28T15:55:07.470
> 
> 标签：search, java

我正在阅读**Java 手册**。[**列表界面**部分](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)有一个示例：

```
a[i] = a[j].times(a[k]); 
```

我想知道是谁的`times`方法。我怎样才能找到所有这个方法的类？谷歌在这里无能为力。我打印：

```
java 7 api times 
```

但是谷歌只是切断`s`了**时间类**和没有方法**的日期类的**`times`结果并给了我结果。****`times`****

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:00:50.480

我认为这只是对数组对象进行方法调用的一个示例。

```
a[i] = a[j].times(a[k]); 
```

在这种情况下`times`，将是来自存储在`a[i]`. `times`不是标准 Java 集合的方法。

我认为`times`这个例子中的命名有点糟糕，因为它会让你认为有一种方法可以做 X 次（比如[groovy 中的 times 方法](http://groovy.codehaus.org/groovy-jdk/java/lang/Number.html#times%28groovy.lang.Closure%29)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:06:28.423

他们可能认为有

```
class Number {
    int value;

    Number(int value) {
        this.value = value;
    }

    Number times(Number n) {
        return new Number(value * n.value);
    }
} 
```

并且有一个数字数组

```
Number[] a 
```

那么这是有道理的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:06:44.367

[如Google 的“Interpreting Your Query”指南](http://www.googleguide.com/interpreting_queries.html)中所述，您可以避免查询词的自动词干提取：

> 如果您只想搜索完全包含某些术语的页面，请用引号 (" ") 将每个此类单词或短语括起来。请参阅引用的短语和引号替换 + 运算符。
> 
> 当您的查询包含单个字词时，Google 不会匹配变体。

因此，比您发布的查询更好的查询是：

```
"times" site:docs.oracle.com/javase/7/docs/api 
```

不过，我仍然无法让 Google 使用该括号。:-( 没有它，似乎没有办法排除文档中所有出现的单词（有很多）。如果有一个返回类型可能会有很大帮助。****

# ios - 发布应用更新时是否会覆盖 plist 文件

> ID：14072136
> 
> 赞同：0
> 
> 时间：2012-12-28T15:55:13.607
> 
> 标签：ios, app-store, plist, updating

我有一个目前在苹果 App Store 上的应用程序。它将用户数据存储在多个 plist 文件中，这些文件保存在 iPad 上的应用程序文档中。

我想发布我的应用程序的更新，但不确定这样做是否会重写 plist 文件并丢失用户输入该应用程序的任何数据。

基本上我需要知道：

A）是否发生这种情况，或者它是否使用了已经存储在应用程序文档中的 plist 文件。

B）如果它确实重写了，是否有任何方法可以解决这个问题，这样用户就不会丢失所有数据。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T15:58:33.650

执行更新时，所有将更新的是捆绑内容。不会以任何方式触及文档文件夹。

# javascript - 使用 Javascript 切换动画

> ID：14072139
> 
> 赞同：0
> 
> 时间：2012-12-28T15:55:22.137
> 
> 标签：javascript, animation, toggle

我的代码中有一个切换 Javascript，它在单击 html 代码中的链接时显示和隐藏两个不同的 div：

```
function toggleAbout() {
    var ele = document.getElementById("toggleAbout");
    var text = document.getElementById("displayAbout");
    var eleContatti = document.getElementById("toggleContatti");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "About";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "About";
        eleContatti.style.display = "none";
    }
}

function toggleContatti() {
    var ele = document.getElementById("toggleContatti");
    var text = document.getElementById("displayContatti");
    var eleAbout = document.getElementById("toggleAbout");
    if(ele.style.display == "block") {
        ele.style.display = "none";
    }
    else {
        ele.style.display = "block";
        eleAbout.style.display = "none";
    }
} 
```

但是我想为 div 设置动画，使它们从上到下缓慢滚动，而不是在单击链接时直接完全显示它们。我看过很多切换动画的例子，但不知道如何将它们集成到我已经拥有的代码中。我从来没有使用过 Javascript，但是网站需要这个，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:04:46.443

我也建议使用 JQuery，但也可以使用 javascript 来完成。您需要做的是使用**timeouts/intervals****逐渐**更改 css 属性。JQuery 使这对您来说很容易。

 **```
$('#selector').animate({'height':'100px'}) 
```

例如，将逐渐增加/减少带有 id 选择器的元素的高度，直到达到 100 像素。这给出了动画的效果。

对于幻灯片和淡入淡出，您可以分别更改位置和不透明度。

在**Javascript**中，您必须使用**Intervals**。**

# sql - 使用基于Count的IF ELSE语句执行不同的Insert语句

> ID：14072140
> 
> 赞同：63
> 
> 时间：2012-12-28T15:55:22.513
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

当我在我的数据库中搜索时，如果我发现一个特定的项目不存在，我会运行一个 INSERT 语句，如果我找到一个或多个这个项目，我会运行一个不同的 INSERT 语句。

我不完全确定如何使用 IF ELSE 表达式。

到目前为止，我有一个语句，它将计算目标数据出现的次数；如果大于 0 则打印 TRUE，否则打印 FALSE。我找不到任何示例来帮助我理解如何使用它来运行两个不同的 INSERT 语句。

这是我到目前为止所拥有的：

```
SELECT CASE WHEN COUNT(*)>0 THEN 'TRUE' ELSE 'FALSE' END
(
  SELECT [Some Column], COUNT(*) TotalCount
  FROM INCIDENTS
  WHERE [Some Column] = 'Target Data'
  GROUP BY [Some Column]
) 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-12-28T16:12:12.760

根据您的需要，这里有几种方法：

```
IF EXISTS (SELECT * FROM TABLE WHERE COLUMN = 'SOME VALUE')
    --INSERT SOMETHING
ELSE
    --INSERT SOMETHING ELSE 
```

或者更长一点

```
DECLARE @retVal int

SELECT @retVal = COUNT(*) 
FROM TABLE
WHERE COLUMN = 'Some Value'

IF (@retVal > 0)
BEGIN
    --INSERT SOMETHING
END
ELSE
BEGIN
    --INSERT SOMETHING ELSE
END 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-02-13T14:38:57.617

只需使用以下内容：

```
IF((SELECT count(*) FROM table)=0)
BEGIN

....

END 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-28T16:11:18.543

只要你需要根据 Count 刚好超过 0 来找到它，最好像这样使用 EXISTS：

```
IF EXISTS (SELECT 1 FROM INCIDENTS  WHERE [Some Column] = 'Target Data')
BEGIN
    -- TRUE Procedure
END
ELSE BEGIN
    -- FALSE Procedure
END 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-28T16:21:46.020

如果存在

```
IF exists (select * from table_1 where col1 = 'value')
BEGIN
    -- one or more
    insert into table_1 (col1) values ('valueB')
END
ELSE
    -- zero
    insert into table_1 (col1) values ('value') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-28T16:07:14.593

不是很清楚你的意思

> `"I cant find any examples to help me understand how I can use this to run 2 different statements:"`

. 它是否`CASE`像`SWITCH`您所追求的那样使用？

```
select case when totalCount >= 0 and totalCount < 11 then '0-10'
            when tatalCount > 10 and totalCount < 101 then '10-100'
            else '>100' end as newColumn
from (
  SELECT [Some Column], COUNT(*) TotalCount
  FROM INCIDENTS
  WHERE [Some Column] = 'Target Data'
  GROUP BY [Some Column]
) A 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-28T16:02:24.553

一个明显的解决方案是运行 2 个单独的查询，首先选择所有 count=1 的项目并运行插入，然后选择 count>1 的项目并运行第二个插入。

作为第二步，如果两个插入相似，您可以将它们组合成一个查询。

另一种可能性是使用游标循环通过您的记录集并为每一行执行您需要的任何逻辑。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-28T16:12:09.863

有很多很多方法可以对此进行编码，但这是一种可能的方法。我假设 MS SQL

我们将从获取行数开始（另一个[快速示例](http://mssql101.blogspot.com/2010/08/mssql-select-value-into-variable.html)），然后执行 if/else

```
-- Let's get our row count and assign it to a var that will be used
--    in our if stmt 
DECLARE @HasExistingRows int -- I'm assuming it can fit into an int
SELECT @HasExistingRows = Count(*) 
   ELSE 0 -- false
FROM
   INCIDENTS
WHERE {Your Criteria}
GROUP BY {Required Grouping} 
```

现在我们可以做 If / Else Logic [MSDN Docs](http://msdn.microsoft.com/en-us/library/ms182717.aspx)

```
-- IF / Else / Begin / END Syntax
IF @HasExistingRows = 0 -- No Existing Rows
   BEGIN
      {Insert Logic for No Existing Rows}
   END
ELSE -- existing rows are found
   BEGIN
      {Insert logic for existing rows}
   END 
```

另一种更快的方法（灵感来自 Mahmoud Gamal 的评论）：

忘记整个变量创建/分配 - 查找“EXISTS” - [MSDN Docs 2](http://msdn.microsoft.com/en-us/library/ms188336.aspx)。

```
IF EXISTS ({SELECT Query})
   BEGIN
      {INSERT Version 1}
   END
ELSE
   BEGIN
      {INSERT version 2}
   END 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T16:01:31.740

如果这是在 SQL Server 中，则您的语法是正确的；但是，您需要将 COUNT(*) 引用为嵌套查询中的总计数。这应该给你你需要的东西：

```
SELECT CASE WHEN TotalCount >0 THEN 'TRUE' ELSE 'FALSE' END FROM
(
  SELECT [Some Column], COUNT(*) TotalCount
  FROM INCIDENTS
  WHERE [Some Column] = 'Target Data'
  GROUP BY [Some Column]
) DerivedTable 
```

使用它，您可以将 TotalCount 分配给一个变量，然后使用 IF ELSE 语句来执行您的 INSERT 语句：

```
DECLARE @TotalCount int
SELECT @TotalCount = TotalCount FROM
(
  SELECT [Some Column], COUNT(*) TotalCount
  FROM INCIDENTS
  WHERE [Some Column] = 'Target Data'
  GROUP BY [Some Column]
) DerivedTable
IF @TotalCount > 0
    -- INSERT STATEMENT 1 GOES HERE
ELSE
    -- INSERT STATEMENT 2 GOES HERE 
```

# jasper-reports - JasperReports - 非标准透明标题栏

> ID：14072141
> 
> 赞同：0
> 
> 时间：2012-12-28T15:55:31.510
> 
> 标签：jasper-reports

问题很简单——现在在我的报告（基于 Jasper）中，我有带有标题栏的块，比如简单的矩形，它们的颜色作为参数。

目前看来：

![在此处输入图像描述](../Images/1a0fda9b1a4a666a8bf32b3abd42572f.png)

我的任务是保存此标题栏的透明属性并将其转换为下一个视图：

![在此处输入图像描述](../Images/5517e9e503e432db692c52263702a151.png)

有没有办法让它成为可能？

# css - CSS中的条纹文本

> ID：14072142
> 
> 赞同：3
> 
> 时间：2012-12-28T15:55:36.710
> 
> 标签：css

如何使用 CSS 使文本具有条纹颜色？

类似于`background-image`或`background-color`应用于文本的东西。还是我必须下载以这种方式着色的字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:07:48.077

演示：http: [//jsfiddle.net/LMg7q/2/](http://jsfiddle.net/LMg7q/2/)

```
.striped{
    font-size: 128px;
    background-size: 16px;
    -webkit-background-clip: text;
    color: transparent;
    background-color: #AC0;
    background-image: -webkit-linear-gradient(45deg, rgba(0, 0, 0, .3) 25%, transparent 25%, transparent 50%, rgba(0, 0, 0, .3) 50%, rgba(0, 0, 0, .3) 75%, transparent 75%, transparent);
} 
```

*   [关于条纹背景的好文章](http://lea.verou.me/2010/12/checkered-stripes-other-background-patterns-with-css3-gradients/)
*   使用背景图像的[替代方法（根据 OP 的要求）](http://jsfiddle.net/LMg7q/1/)
*   注意使用`background-clip`和`background-size`
*   **支持`background-color:text`不是通用**的，将此解决方案限制为 Webkit

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:29:36.767

这适用于包括 IE 在内的跨（现代）浏览器。

我相信 svg 是你所追求的：

[http://jsdo.it/Raam.Danger.Rosh-Hai/t93l](http://jsdo.it/Raam.Danger.Rosh-Hai/t93l)

![条纹文本](../Images/80aca450a3b50065a0acf4fb3b5625bd.png)

```
<svg width="12cm" height="4cm" viewBox="0 0 1200 400">
  <desc>Example textdecoration01 - behavior of 'text-decoration' property</desc>
  <rect x="1" y="1" width="1198" height="398" fill="pink"  stroke="blue" stroke-width="2" />
  <g font-size="220"  fill="url(#img2)" stroke="white" stroke-width="1" >
    <text x="100" class="text" y="205">Normal text</text>
   <defs>
    <pattern id="img2" patternUnits="userSpaceOnUse" width="100" height="100">
        <image xlink:href="http://price.sourceforge.net/manual/images/vert_stripes.gif" x="0" y="0" width="130" height="130" />

    </pattern>

</defs>
  </g>
</svg> 
```

`pattern`您可以在 SVG中使用图像。

```
 xlink:href="http://price.sourceforge.net/manual/images/vert_stripes.gif" 
```

是图片的链接。

只需将其更改为您想要的。

和跟随它控制被复制`width`的`height`图像的大小。

玩得开心。​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:59:28.663

一种方法是将每个单个字符包装在 span 元素中并将颜色应用于 span ——而不是每个字符都有自己的颜色。

```
<span style="color:red">H</span>
<span style="color:blue">O</span>
<span style="color:green">I</span> 
```

这适用于任何浏览器——但维护起来很麻烦，或者如果您需要更改文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T15:59:49.740

看**[演示](http://jsbin.com/ahisej/1/edit)**

```
h1 {
  font-size: 72px;
  background-image: -webkit-gradient(
    linear,
    left top,
    right top,
    color-stop(0.03, rgb(250,3,3)),
    color-stop(0.52, rgb(240,255,127)),
    color-stop(0.76, rgb(42,24,173)));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T04:14:00.120

添加到实现示例。如果您想在线玩，可以在这里找到代码：

[https://codepen.io/anon/pen/QEmgbB?editors=1000](https://codepen.io/anon/pen/QEmgbB?editors=1000)

[![SVG 条纹文本](../Images/8e68ea3052883f101bb3c6cd7190f3eb.png)](https://i.stack.imgur.com/9ReO0.png)

```
<svg  width="188" height="32" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs> 
    <pattern id="style-stripes" width="90" height="64" patternUnits="userSpaceOnUse">
      <line x1="0" y1="0"   x2="90"  y2="0"  style="stroke: #E03A3E; stroke-width:8;" />
      <line x1="0" y1="8"  x2="90"  y2="8" style="stroke: #963D97; stroke-width:8;" />
      <line x1="0" y1="16"  x2="90"  y2="16" style="stroke: #009DDC; stroke-width:8;" />
      <line x1="0" y1="24"   x2="90"  y2="24"  style="stroke: #61BB46; stroke-width:8;" />
    </pattern>
  </defs>
  <g fill="url(#style-stripes)" stroke="none" font-size="32" font-family="serif">
    <text x="0" y="24" style="fill:#333;fill-opacity:1;">Reactive</text>
    <text x="120" y="24">Style</text>
  </g>
</svg> 
```

# forms - Symfony2表单实体选择类型

> ID：14072143
> 
> 赞同：0
> 
> 时间：2012-12-28T15:55:39.973
> 
> 标签：forms, symfony

我有一个实体产品，当我想以我使用的形式使用产品列表时

```
->add('products', 'entity', array(
                    'label' => "Produit : ",
                    'class' => 'XXXCommonBundle:Product',
                    'query_builder' => function(EntityRepository $er)  {
                        return $er->createQueryBuilder('p')
                            ->orderBy('p.title', 'ASC');
                    },
                    'property' => 'title',
                    'required' => false,
                    'multiple' => true,
                    'expanded' => true)); 
```

当我添加这个时，我的产品有一个复选框列表。但问题是我应该有一个带有复选框产品图片（带`<img />`标签）、标题和价格的列表。我的清单应该是一个表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:03:28.800

您想自定义/主题您的表单字段。查看有关[表单呈现](http://symfony.com/doc/current/cookbook/form/form_customization.html)的食谱文章。

# xml - onclick 调用 Xquery 函数时出错

> ID：14072147
> 
> 赞同：1
> 
> 时间：2012-12-28T15:55:59.107
> 
> 标签：xml, xpath, xhtml, xquery, exist-db

我试图用参数调用一个函数，发送一个id并返回照片的url，这个想法是当你点击一个按钮时显示元素的照片，问题是我不能调用这个函数我发誓我尝试过，并用谷歌搜索过，但我根本做不到：P

这是函数的代码和声明

xquery 版本“1.0”；

声明命名空间本地=“本地”；声明选项存在：序列化“method=xhtml media-type=text/html”；

```
xquery version "1.0";

declare namespace local = "local";
declare option exist:serialize "method=xhtml media-type=text/html";

    declare function local:showPhoto($id as xs:decimal?)AS xs:string?
    {
    for $dir in doc("pubs.xml")//dir
    where  id= $dir/id
    return $dir/photo/text();
    }; 
```

这是表格和调用它的代码，请确保如果您知道更好的方法，请告诉我：P（当然我对此有点菜鸟，所以我相信您可以告诉我更好的方法）

```
<table id="pubs" border="1">
        { 
        for $directorio in doc("/db/Ocio/pubs.xml")//dir
        order by $dir/name
        return
            <tr>
            <td>{$dir/name/text()}</td>
            <td><a href="{$dir/web/text()}">Web url</a></td>
            <td><input onclick="{local:showPhoto($dir/id)" type="button" value="MOAR INFO"></input></td>
            </tr>
        }
    </table> 
```

也许这里有一个错误，但这是因为我将代码翻译成英文，当我执行 ir 这是错误：

XPDY0002：未定义的上下文序列...

不知道该怎么做所以我问它，非常感谢你提前:D :D :D

圣诞节顺便说一句：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:51:02.613

**两个问题很明显**：

1.  `AS xs:string?` -- 我认为 XQuery（作为 XPath）是区分大小写的。因此，`AS`应该引发错误，因为语法上合法的标记是`as`.

2.  函数体：

.

```
for $dir in doc("pubs.xml")//dir
    where  id= $dir/id
    return $dir/photo/text(); 
```

在 XQuery（和 XSLT）中没有为函数定义初始上下文节点。因此，任何相关的 XPath 表达式都是未定义的。就是这种情况`id` ——什么的孩子`id`？

**解决方案是**必须使用绝对表达式来代替——例如：

```
 $someParam/id 
```

# c# - 查找具有特殊文本的 HTML 表格行

> ID：14072148
> 
> 赞同：1
> 
> 时间：2012-12-28T15:56:04.863
> 
> 标签：c#, regex

我想使用正则表达式查找具有特殊文本的 HTML 表格行。

在上表的第一个单元格文本“总计”中，我想替换第一行。

```
<table>
    <tr><td>Total</td><td>255</td></tr>
    <tr><td>XYz</td><td>441</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:02:12.433

要回答您的问题，这将匹配并允许您替换该行。

```
(<tr><td>Total.*?</tr>) 
```

但是，如果可能的话，我还鼓励您使用其他东西，例如[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)（将优雅地处理格式错误的 HTML）或纯 XML 解析器，如果您有幸拥有严格的 XHTML 标记（很少见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:59:37.097

不幸的是，您不能仅使用正则表达式可靠地匹配 HTML。这是因为 HTML 是一种[上下文无关语言](http://en.wikipedia.org/wiki/Context-free_grammar)，而不是可使用正则表达式解析 的[常规语言。](http://en.wikipedia.org/wiki/Regular_grammar)

考虑改用 HTML 解析器。对于 C#，[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)是一个不错的选择，正如上面评论中提到的 mgnoonan。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:17:59.797

必须做出一些假设，您的 HTML 输入字符串是有效的 HTML（格式正确），否则函数将***失败***：P

试试这个

```
 private static MatchCollection GetSpecialTables(string inputStr, string ftrName)
    {
        try
        {
            return Regex.Matches(inputStr, string.Format(@"<table>\s+<tr><td>{0}</td>.+?</table>", Regex.Escape(ftrName)), RegexOptions.Singleline);
        }
        catch (ArgumentException ex)
        {
            // Syntax error in the regular expression, handle it
            return null;
        }
    }
    // use it this way!
    static void Main()
    {

        var matches = GetSpecialTables(myHtml, "Total");
        foreach (Match match in matches)
        {
            // match.Value;
        }

    } 
```

# yii - Yii CGridView 和按钮

> ID：14072149
> 
> 赞同：0
> 
> 时间：2012-12-28T15:56:14.997
> 
> 标签：yii, cgridview, cbuttoncolumn

希望根据该行的数据删除按钮。
[图片 1 - 所有按钮正常](http://i1304.photobucket.com/albums/s527/goergeducharme/question1a_zps686a951e.png)
到此，第二行在表中包含一些描述某些内容的数据。
[图 2 - 移除按钮后](http://i1304.photobucket.com/albums/s527/goergeducharme/question1b_zpse412cc07.png)
，我已经看到如何为行着色，这很好，但也需要移除按钮。有什么想法吗？（对不起外部链接，仍然是新用户）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:24:39.033

您可以使用您的数据来更改按钮列的可见性，如下所示：

代替

```
array(
  'class'=>'CButtonColumn',
), 
```

像这样：

```
array(
  'class'=>'CButtonColumn',
  'template'=>'{view}{update}{delete}',
  'buttons'=>array(
    'update'=>array(
        'visible'=>'$data->cust == "ST50"',
    ),  
  ),  
), 
```

但是当按钮不可见时它不会保持间距。我会把它留给你。您可以自定义 CButtoncolumn 的其他属性，这里有几个参考：[here](http://www.yiiframework.com/doc/api/1.1/CButtonColumn)和[here](http://www.yiiframework.com/wiki/106/using-cbuttoncolumn-to-customize-buttons-in-cgridview/)

# java - 当数组中有参数时调用 Method.invoke()

> ID：14072151
> 
> 赞同：3
> 
> 时间：2012-12-28T15:56:20.817
> 
> 标签：java, reflection, variadic-functions

我有以下界面：

```
interface Foo {
  void bar(String a, int b);
} 
```

我想`Foo.bar`反射地调用（在 Foo 的实现上）。*但是，参数在数组中*，我不知道它的大小。

以下不起作用：

```
void gee(Foo someFoo, Method bar, Object[] args) {
  bar.invoke(someFoo, args);
} 
```

这不起作用，因为`args`编译器将其作为单个参数进行威胁，并且该数组没有“扩展”为 vararg，而是（内部）包装在另一个具有单个元素的数组中，即

```
@Test
public void varArgTest() {
  assertTrue(varArgFoo(new Object[] {1, 2}) == 1);
}

private static <T> int varArgFoo(T... arg) {
    return arg.length;
} 
```

在这种情况下，我如何调用`Method.invoke()`以使数组受到 vararg 的威胁？
或更一般的问题：当参数在数组中时我如何调用可变参数方法我直到运行时才知道数组的大小。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T16:05:22.713

可变参数实际上是一个带有一些额外元数据的数组参数。因此，当您使用 时`Method.invoke`，您需要将数组包装在*另一个*数组中：

```
Object[] varargs = new Object[] { 10, 20 };
Object argumentArray = new Object[] { varargs };
method.invoke(target, argumentArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T02:16:55.590

> 以下不起作用：

是的，它确实。

> 这不起作用，因为 args 受到编译器作为单个参数的威胁，并且该数组没有“扩展”为 vararg，而是（内部）包装在另一个具有单个元素的数组中，即

使用您提供的代码，数组的元素应该成为可变参数。如果这对您来说没有发生，要么您没有显示您的实际代码，要么是其他错误。

如果您的`args`变量以某种方式没有数组类型（例如，它是 typed 的`Object`），那么这可能会发生。但这不是您显示的代码。

或者，如果您有一些未显示的“附加”参数（例如，您正在尝试执行类似的操作`bar.invoke(someFoo, firstArg, args);`，那么它不会展开`args`，因为您已经在使用可变参数形式的方法。

# extjs - 如何在渲染后动态更改 ExtJS GridPanel viewconfig 上的 getRowClass 函数

> ID：14072153
> 
> 赞同：5
> 
> 时间：2012-12-28T15:56:28.273
> 
> 标签：extjs, extjs4

我有`Ext.grid.Panel`一个函数，它返回一个自定义类，该类用于通过覆盖 getRowClass 函数来对网格中的行进行颜色编码。这很好用，但我想让用户选择更改网格着色的标准。在下面的示例中，我通过“严重性”属性着色，但例如，我想将其更改为“状态”。有没有一种方法可以动态更改`getRowClass`功能，或者网格上的整个视图配置，并在网格已经渲染后让网格重新着色？

```
alarmsGrid = Ext.create('Ext.grid.Panel', {
    title: 'Netcool Alarms',
    id: 'Netcool Alarms',
    columnLines: true,
    store: alarms_store,
    loadMask: true,
    stripeRows: true,
    features: [alarmsGroupingFeature],
    viewConfig: {
        getRowClass: function(record, rowIndex, rowParams, store){
          return record.get('severity').toLowerCase();
        }
    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:47:00.490

这仅仅是因为您以错误的方式进行操作。几乎所有类型的配置对象只在类的实例化时相关，之后不会有任何影响。所以你需要让视图实例本身直接改变那里的属性（方法）。要从评论中举出你的例子，你需要像这样写

```
alarmsGrid.getView().getRowClass = function(record, rowIndex, rowParams, store){ 
     return record.get('status').toLowerCase(); 
} 
```

见**[JSFiddle](http://jsfiddle.net/sran/K68Dd/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T17:59:00.430

根据[Ext.grid.View 的 ExtJs 文档](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.view.Table-method-getRowClass) *（我刚刚测试成功！）*`getRowClass`您可以在初始`viewConfig`没有问题的情况下提供回调函数！

我意识到这是一篇较旧的帖子，但您可能需要考虑`debugger`在上述代码中插入一条语句并逐步执行回调。您可能会发现其他问题，例如您拼错了模型字段名称，或者在`null`调用此属性时该属性具有值。

同样从您上面的代码看来，您正在将分组功能与您的网格一起使用，这将改变此功能的 HTML 标记。因此，行类可能位于`<tr>`比您预期的更深的嵌套元素上！您可以通过更改`getRowClass`回调函数来测试这一点，以返回一个易于搜索的唯一类名，如“this-is-a-test”。

然后返回并再次测试，使用您的调试器语句验证正在调用回调。然后使用您最喜欢的浏览器开发工具，在页面源代码中搜索您独特的测试类，以查看它实际应用于哪个 HTML 元素。

**更新：**哈，哈输入此内容后，我意识到我完全读得太快了，您确实说“渲染后”。让我恼火的部分是接受的答案说你*“做错了”*，这不一定是真的。在视图已经呈现之后，对于更改整个回调函数，接受的答案仍然是正确的。

但是，根据每个不同回调的复杂程度，您*最好*还是不要更改整个回调，而只更改回调中使用的标准。根据您的应用程序，两种方法都不一定比另一种更好。如果它就像`'status'`用另一个字段名称切换字段一样简单，那么您最好删除硬编码的引用并在视图上使用可以更改的变量，而不是重新声明一堆不同的回调并将它们切换进出.

# php - xampp上的php exec函数在windows上工作，但在linux上不工作

> ID：14072155
> 
> 赞同：-1
> 
> 时间：2012-12-28T15:56:42.467
> 
> 标签：php, linux, image-processing, xampp, exec

几个月前，我在 Windows 上的 Visual Studio 中编写了这个 c++ 代码。我从该代码制作 .exe 文件，一切正常。现在我尝试在 Linux 上做同样的事情，以便我可以将可执行文件放在 Linux Web 服务器上。如果从控制台调用，我的 linux 可执行文件可以工作。但我无法通过浏览器运行可执行文件。这在 xampp windows 上对我有用：

```
<?php
$imagename = $_GET['imagename'];
exec('inpainting.exe' .$imagename); 
echo "<img src=\"./images/img-uploads/ob_img$imagename.jpg\" />";
?> 
```

如何在 xampp linux 上运行它？我为 linux 制作了新的执行文件，该文件的名称只是`inpainting_linux`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:02:19.443

您缺少空间：

```
exec('inpainting.exe'.$imagename);  
                    ^-- here 
```

这意味着给定一个查询字符串 (say) `kittens.jpg`，您将执行：

```
inpainting.exekittens.jpg
             ^^---note lack of space 
```

这几乎绝对保证会产生“没有这样的文件或命令”错误。

并注意我上面的评论。您绝对希望使用此代码远程销毁您的服务器或至少 pwn3d **。**不要在可公开访问的服务器**上**运行此代码。或者更好的是，把代码拿出来烧掉。

# java - java - 创建空的 GZIP 文件

> ID：14072160
> 
> 赞同：1
> 
> 时间：2012-12-28T15:56:55.677
> 
> 标签：java, zip, gzip

我正在尝试解决一个简单的问题 - 使用 Java 创建一个空的 GZip 文件，以便在尝试从中读取时不会引发异常。如果我做：

```
Files.createFile(outPutFile);
new PrintWriter(new GZIPOutputStream(new FileOutputStream(outPutFile.toFile())), true).close(); 
```

它解决了这个问题 - 我猜 GZipOutputStream 在文件中存储了一些进一步的数据。是否有更简洁的方法来实现上述目标，即没有意外结束 Zlib 存档异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:03:17.050

好吧，你不需要打电话`createFile`开始 - 创建一个`FileOutputStream`意志就可以了。你也不需要`PrintWriter`。所以你只需要：

```
new GZIPOutputStream(new FileOutputStream(outPutFile)).close(); 
```

`P`顺便说一句，把in大写很奇怪`outPutFile`——它不像是三个词……

# unit-testing - 是否有一个模块可以轻松模拟 req/res 对象以对连接样式处理程序进行单元测试？

> ID：14072166
> 
> 赞同：6
> 
> 时间：2012-12-28T15:57:42.747
> 
> 标签：unit-testing, node.js, mocking, express, flatiron.js

我正在 node.js 中编写一个应用程序，其中包括一些连接样式端点处理程序（ function(req,resp) ），并且想针对它们编写一些单元测试，而不需要运行完整的应用程序。

我知道我可以“简单地”推送我手动写入的任何夹具，但我想知道是否有任何库可以帮助我更快地生成这些夹具。

编辑：为了进一步解释我想要什么，我想在我的单元测试中只执行我的处理程序（不是我的应用程序），为此，我需要一个假的 req 和 res。这些是我想模拟的 2 个对象。

我目前使用 mocha 作为测试运行器和核心断言模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:13:01.703

如果您以传递`app`给函数的方式定义路由，那么您可以使用[supertest](https://github.com/visionmedia/supertest)来测试路由。

**测试**

```
var app = require('./real-or-fixture-app'); //depends on your setup

require('routeToTest')(app);

var request = require("supertest");

describe("Test", function(){
    it("should test a route", function(done){
        request(app)
            .post("/route")
            .send({data:1})
            .expect(200, done);
    });
}); 
```

**路线定义**

```
module.exports = function(app){
    app.get("/route", ....
}; 
```

我不太确定这是否真的是您正在寻找的，但它是一种单独测试您的路线的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T20:19:56.413

我知道这个问题已经过时了，但是现在使用 Supertest [https://github.com/visionmedia/supertest是一个很好的方法](https://github.com/visionmedia/supertest)

如果您曾经使用过 Django 测试客户端库，它的工作原理与此非常相似。它模拟运行您的视图/路由，以便您获得一个更像是实际浏览器正在访问您的视图的测试场景。这意味着 req 和 res 被模拟出来但以预期的方式运行。它比 Selenium（或者，例如，在幕后使用 Webdriver 的量角器）快得多。

您可能知道，将尽可能多的逻辑移出路由是一个好主意，以便可以单独进行单元测试。我并不真正考虑将 Supertest 用作单元测试，因为您总是要测试多个代码单元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-12T04:12:13.773

你可能对我放在一起的一个小包感兴趣，它使使用 Sinon 创建模拟请求/响应更容易一些。

本质上，它只是创建一个模仿标准`req`/ `res`from express 的对象，并用您可以检查的间谍替换该方法。

从自述文件：

你的测试：

```
import route from '../src/foo'
import { mockReq, mockRes } from 'sinon-express-mock'

describe('my route', () => {
  it('should foo the bar', () => {

    const body = {
      body: {
        foo: 'bar',
      },
    }
    const req = mockReq(body)
    const res = mockRes()

    route(req, res)

    expect(res.json).to.be.calledWith({ foo: body.foo.bar })
  })
}) 
```

内容`src/foo.js`：

```
export default (req, res) => {
  res.json({ foo: req.body.bar })
} 
```

[https://github.com/danawoodman/sinon-express-mock](https://github.com/danawoodman/sinon-express-mock)

# html - 图像出现在链接后面，悬停

> ID：14072169
> 
> 赞同：1
> 
> 时间：2012-12-28T15:58:10.250
> 
> 标签：html, css, hover

我找到了几篇有帮助的相关文章，但我碰壁了。

我有一个菜单导航，当用户将鼠标悬停在链接上时会发生两件事：链接改变颜色并且链接后面出现图像。现在，链接正在改变颜色并且图像正在显示，但它出现在文本链接的前面。我不知道如何让图像出现在文本后面。

让图像出现在悬停时：

```
#menu a:hover span.blognav{
position: absolute;
left: -42px;
top: 4px;
width: 190px;
height: 15px;
background: url("AVSprite-menu.png");
background-position: 0px -1px;
}

#menu a:hover span.artnav{
position: absolute;
left: -42px;
top: 40px;
width: 190px;
height: 15px;
background: url("AVSprite-menu.png");
background-position: 0px -39px;
}

#menu a:hover{
color: #29fffa;
}

<div id="menu">
<ul style="list-style-type: none;">
    <li><a href="blog.html">Blog<span class="blognav"></span></a></li>
    <li><a href="about.html"><font color="#29fffa">About</font></a></li>
    <li><a href="art.html">Art<span class="artnav"></span></a></li>
    <li><a href="print.html">Print</a></li>
    <li><a href="web.html">Web</a></li>
    <li><a href="events.html">Events</a></li>
    <li><a href="marketing.html">Marketing</a></li>
    <li><a href="contact.html"><font color="black">Contact</font></a></li>
</div> 
```

我是初学者，所以如果您在此代码中看到的任何其他内容可以提供帮助，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:18:41.763

[http://jsfiddle.net/8sxxy/](http://jsfiddle.net/8sxxy/)看看这是否适合你..我添加了 z-index

```
a
 {
    position: relative;
    z-index: 5;
}

#menu a:hover span.blognav{
position: absolute;
left: -42px;
top: 4px;
width: 190px;
height: 15px;
background: url("http://s20.postimage.org/ospccawhp/35436251_1_620x433.jpg");
background-position: 0px -1px;
z-index: -5; /* you need to add this too*/ 
```

}

# java - 如何制作一个新的动作监听器

> ID：14072174
> 
> 赞同：0
> 
> 时间：2012-12-28T15:58:37.200
> 
> 标签：java, swing, user-interface, netbeans, jbutton

此代码通过在移动按钮中添加动作监听器将文本从文本字段移动到标签现在我想删除实现动作监听器并在新类中生成我自己的动作监听器并仍然使按钮移动文本

我不知道如何真正做到请帮助:(

```
public final class Move extends JFrame implements ActionListener {
    private GridLayout gl;
    private JPanel jp;
    private FlowLayout fl;
    private JButton butMove;
    private JTextField txtFirst;
    private JTextField txtSecond;

    public void buildGUI() {
        this.setTitle("This is my moving JFrame");
        gl = new GridLayout();
        gl.setRows(2);
        gl.setColumns(1);
        this.setLayout(gl);
        jp = new JPanel();
        fl=new FlowLayout();
        jp.setLayout(fl);

        butMove = new JButton("Move");
        txtFirst = new JTextField("please enter a string",10);
        jp.add(butMove);
        jp.add(txtFirst);
        this.add(jp);

        txtSecond = new JTextField();
        this.add(txtSecond); 
        txtSecond.setEditable(false);
        //txtSecond.setBorder(new BorderFactory());
        // Border border = BorderFactory.createLineBorder();
        butMove.addActionListener(this);
        pack();
    }

    public GUI() {
        buildGUI();
    }

    public void actionPerformed(ActionEvent e) {
        String str = txtFirst.getText();
        txtSecond.setText("");
        txtSecond.setText(str);
        txtFirst.setText("");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:05:07.950

你可以在你的类中创建私有**内部**类

```
private class MyActionListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        String str = txtFirst.getText();
        txtSecond.setText("");
        txtSecond.setText(str);
        txtFirst.setText("");
    }
} 
```

所以这个改成：

```
butMove.addActionListener(new MyActionListener()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:14:38.860

看一下[动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)界面。

> Action 可用于将功能和状态与组件分开。

在这里你可以有一个内部类：

```
class MoveAction extends AbstractAction {

   @Override
   public void actionPerformed(ActionEvent e) {
      txtSecond.setText(txtFirst.getText());
      txtFirst.setText("");
   }
} 
```

环境：

```
butMove.setAction(new MoveAction()); 
```

# objective-c - 为 iOS5+ 禁用除一个视图之外的所有视图的自动旋转

> ID：14072175
> 
> 赞同：1
> 
> 时间：2012-12-28T15:58:40.467
> 
> 标签：objective-c

只是对如何在除一个视图之外的所有视图中禁用自动旋转有点困惑。我正在使用`FGallery`，我只想在该视图上启用旋转。

谁能告诉我如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:10:19.497

对于 iOS 5.x，您可以从 实现此方法`UIViewController`，仅返回`YES`您支持的方向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

例如，仅支持纵向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) {
        return YES;
    }

    return NO;
} 
```

请注意，此方法在 iOS 6 之后已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:10:36.597

您是否在视图控制器中实现了 shouldAutorotateToInterfaceOrientation:interfaceOrientation 方法？

如果你对除了你想要的方向之外的所有东西都返回“否”，那应该会得到你想要的结果。

# c# - MongoDB c# LINQ 生成的查询

> ID：14072178
> 
> 赞同：1
> 
> 时间：2012-12-28T15:59:27.130
> 
> 标签：c#, mongodb

如何从 LINQ 查询中获取生成的查询？我试过了，但没有用：

```
var query = (
            from d in mcollection.AsQueryable<InstrumentationDocument>()
            where d.user == User && d.timestamp > DateTime.Today.AddDays(-days)
            orderby d.timestamp descending
            select new
            {
                d.timestamp,
                d.machine,
                d.processID,
                feature = d.info["feature"].AsString,
                extra = d.info.Contains("extra") ? d.info["extra"].ToJson() : ""
            }
);

var mongoQuery = ((MongoQueryable<InstrumentationDocument>)query).GetMongoQuery();

var json = mongoQuery.ToJson(); 
```

`InstrumentationDocument`在哪里

```
class InstrumentationDocument
{
    [BsonId]
    public ObjectId _id { get; set; }

    [BsonDateTimeOptions(Kind = DateTimeKind.Local)]
    public DateTime timestamp { get; set; }

    public string user { get; set; }
    public string machine { get; set; }
    public int processID { get; set; }
    public BsonDocument info { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:38:10.807

您需要从代码中删除 .ToArray() 。目前，查询不是 MongoQueryable 实例。它是一组匿名类型。因此，您对 MongoQueryable 的转换不应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T00:05:42.413

它在最新版本的 MongoDB (v2.6) 中要简单得多，只需调用`.ToJson()`LINQ 查询，然后将查询字符串打印到控制台。

```
string queryTextSentToMongoDb = query.ToJson(); 
```

# java - 在 Java 中使用地图时出现意外/未定义的结果

> ID：14072181
> 
> 赞同：0
> 
> 时间：2012-12-28T15:59:35.127
> 
> 标签：java, map, set, cosine-similarity, keyset

我正在做一些工作来推荐文档，为此我使用了余弦相似度方法。这是该方法的代码：

```
static double cosineSimilarity(HashMap<String, Double> v1, HashMap<String, Double> v2) 
{
    Set<String> both = v1.keySet();
    both.retainAll(v2.keySet());
    double sclar = 0, norm1 = 0, norm2 = 0;
    for (String k : both) 
    {
      sclar += v1.get(k) * v2.get(k);
    }
    for (String k : v1.keySet())
    {
      norm1 += v1.get(k) * v1.get(k);
    }
    for (String k : v2.keySet()) 
    {
      norm2 += v2.get(k) * v2.get(k);
    }
    return sclar / Math.sqrt(norm1 * norm2);
} 
```

问题是结果会根据参数传递的顺序而有所不同。例如，如果我调用`cosineSimilarity(v1, v2)`它将返回`0.3`，但如果我调用`cosineSimilarity(v2, v1)`它将返回一个完全不同的值。

我认为这与返回一个由地图支持的集合的事实有关`Map.keySet()` ，但我并不完全理解这一点的含义。

任何人都可以看到该方法出错的地方吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:04:07.567

尝试

```
Set<String> both = new HashSet<String>(v1.keySet()); 
```

代替

```
Set<String> both = v1.keySet(); 
```

您不应该修改从`keySet`方法获得的集合，因为 map 使用它，并且当您从中删除元素时（`retainAll`在您的情况下），元素也会从 map 中删除。例子：

```
Map<Integer, Integer> mp = new HashMap<Integer, Integer>();
mp.put(1, 1);
System.out.println(mp); // output {1=1}
mp.keySet().remove(1);
System.out.println(mp); // output {} 
```

# ruby - Ruby：来自 YAML 的列名和值对的哈希数组

> ID：14072185
> 
> 赞同：1
> 
> 时间：2012-12-28T15:59:55.250
> 
> 标签：ruby, arrays, yaml

我有这个 YAML 条目；

```
table:
  - name: table_a
select:
  - id: source.id
  - code: source.code
  - name: source.name
  - is_active: TRUE 
```

我需要将它读入一个 HASH 数组并构造一个这样的 SELECT SQL 语句；

```
SELECT 
  source.id as id,
  source.code as code,
  source.name as name,
  TRUE as is_active
FROM table_a 
```

我正在努力访问 HASH |key,value| 动态配对。

我使用了这段代码；

```
yml = YAML.load_file("file.yml")
yml.each_pair { |key, value| puts "#{key} = #{value}"} 
```

但是当我使用`yml['select'].each_pair`我得到“未定义的方法`each_pair'”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:18:45.660

基于 YAML，解析它的方法如下：

```
asdf = YAML.load('table:
  - name: table_a
select:
  - id: source.id
  - code: source.code
  - name: source.name
  - is_active: TRUE
  - created_at: Time.now()
  - updated_at: Time.now()')
=> {"table"=>[{"name"=>"table_a"}],
 "select"=>
  [{"id"=>"source.id"},
   {"code"=>"source.code"},
   {"name"=>"source.name"},
   {"is_active"=>true},
   {"created_at"=>"Time.now()"},
   {"updated_at"=>"Time.now()"}]} 
```

您的 YAML 没有创建易于解析的数据结构，这使您跳过箍来访问元素：

```
asdf['table'][0]['name']
=> "table_a"

asdf['select'][4]['created_at']
=> "Time.now()" 
```

相反，它应该看起来像：

```
table:
  name: table_a
select:
  id: source.id
  code: source.code
  name: source.name
  is_active: TRUE
  created_at: Time.now()
  updated_at: Time.now() 
```

解析后，它将创建一个哈希哈希，如下所示：

```
{
  "table"=>{
    "name" => "table_a"
  },
  "select" =>
  {
    "id"         => "source.id",
    "code"       => "source.code",
    "name"       => "source.name",
    "is_active"  => true,
    "created_at" => "Time.now()",
    "updated_at" => "Time.now()"
  }
} 
```

这使您可以轻松且非常直观地访问元素：

```
asdf['table']
=> {"name"=>"table_a"}
asdf['select']['created_at']
=> "Time.now()" 
```

YAML 不会将字符串`"Time.now()"`转换为 Ruby`Time.now`方法调用，因此将该字符串编码为 YAML 数据也无济于事。

相反，在解析它之后，使用：

```
time_now = Time.now
select = asdf['select']
select['created_at'] = time_now
select['updated_at'] = time_now 
```

`"Time.now()"`您可以通过预先操作传入的 YAML来更新您的字符串，然后对其进行解析：

```
yaml_string = '
table:
  name: table_a
select:
  id: source.id
  code: source.code
  name: source.name
  is_active: TRUE
  created_at: Time.now()
  updated_at: Time.now()
'
yaml_string.gsub!('Time.now()', Time.now.to_s) 
```

结果是：

```
table:
  name: table_a
select:
  id: source.id
  code: source.code
  name: source.name
  is_active: TRUE
  created_at: 2012-12-28 10:09:21 -0700
  updated_at: 2012-12-28 10:09:21 -0700 
```

现在解析它返回：

```
=> {"table"=>{"name"=>"table_a"},
 "select"=>
  {"id"=>"source.id",
   "code"=>"source.code",
   "name"=>"source.name",
   "is_active"=>true,
   "created_at"=>2012-12-28 10:09:21 -0700,
   "updated_at"=>2012-12-28 10:09:21 -0700}} 
```

YAML 可以用那个时间值做一些事情，因为它可以识别它：

```
[14] pry(main)> asdf['select']['created_at']
=> 2012-12-28 10:09:21 -0700
[15] pry(main)> asdf['select']['created_at'].class
=> Time 
```

此外，我强烈建议不要编写自己的 SQL，而是使用 ORM，例如[Sequel](http://sequel.rubyforge.org)或[DataMapper](http://datamapper.org/)。我喜欢 Sequel，但无论哪种情况，优点是您不必编写查询，ORM 可以。您告诉它要访问哪些数据库和表，它会计算出架构和关系。如果您使用的是 Rails，ActiveRecord 是一个很好的 ORM，它与 Rails 相结合。它可以单独使用，但如果你不使用 Rails，我会先推荐另外两个。

# javascript - 如何使用 Angular JS 作为模板引擎？

> ID：14072192
> 
> 赞同：5
> 
> 时间：2012-12-28T16:00:36.950
> 
> 标签：javascript, html, angularjs

这篇**[文章](https://stackoverflow.com/questions/12346690/is-there-a-way-to-make-angularjs-load-partials-in-the-beginning-and-not-at-when)** 详细介绍了如何在事件上绑定加载模板部分。

但是，如果我想**在页面加载时将模板部分加载**到像 Smarty 这样的模板引擎中呢？

*例如在 Smarty 中：*

```
<html>
<body>
{include file="templates/header.html"}
<span>Dude, this has too be possible in Angular JS...</span>
{include file="templates/footer.html"}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T16:26:03.787

您可以使用 ngInclude 指令。可以在此处找到文档和示例：http://docs.angularjs.org/api/ng.directive: [ngInclude](http://docs.angularjs.org/api/ng.directive:ngInclude)

# puppet - 使用 puppet 进行 rpm 安装

> ID：14072197
> 
> 赞同：1
> 
> 时间：2012-12-28T16:01:02.933
> 
> 标签：puppet

我是 Puppet 的新手——我一直在学习基础知识。[puppet](http://docs.puppetlabs.com/puppet/#learning-puppet)页面上的大多数示例（除了非常基本的示例）对我不起作用 - 缺少某些依赖项或找不到包。我没有看到解释出了什么问题的日志（即使我运行了 --test 或 --verbose 选项）

谁能澄清

1 在单个 Linux 机器上安装 rpm 包最简单的过程（一组简单的步骤）是什么？

2 一般情况下 - 如何使用 forge.puppetlabs 上的模块？这些软件包的提供程序是自动安装的还是必须先手动安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:21:40.730

要安装`pacman`从命令行命名的包：

```
puppet resource package pacman ensure=present 
```

相应的 puppet 代码如下所示：

```
package { 'pacman':
  ensure => '4.0.3-5',
} 
```

[在此处](http://docs.puppetlabs.com/references/latest/type.html#package)探索有关包资源的更多选项

关于安装 puppet 模块的问题，看[这里](http://docs.puppetlabs.com/puppet/2.7/reference/modules_installing.html)。官方文档是你的朋友 :)

就个人而言，我只是手动将模块目录复制粘贴到我用来维护我的 puppet 代码的 git repo 中。

# vb.net - VB.NET 多代强制继承

> ID：14072206
> 
> 赞同：2
> 
> 时间：2012-12-28T16:01:37.407
> 
> 标签：vb.net, inheritance, interface, clone, implementation

我试图在 .NET 中更好地理解继承/接口/实现。

我有一个定义如下（有点）的类：

```
Public Class Sheet
    Property Name As String
    Property Steps As List(Of [Step])
End Class 
```

问题是，[Step] 只是一个虚拟的基类。[Step]有5种不同的具体实现。为了让事情更复杂一点，[Step] 有 3 个 DIRECT 实现，其中 2 个是虚拟的。这 2 个中的每一个都有 2 个子类，它们将具体实现 [Step]。

所以，它看起来是这样的：

```
 Step
         |-----------------|-----------------|
         |                 |                 |
     SubStepA          SubStepB          SubStepC
    |----|----|                         |----|----|
    |         |                         |         |
SubStepAA SubStepAB                 SubStepCA SubStepCB 
```

因此，SubStepB、SubStepAA、SubStepAB、SubStepCA 和 SubStepCB 是具体的实现。

我希望 ANY Step 做几件事，例如 Clone()。

因此，我尝试在 Step 中声明以下内容：

```
Public MustOverride Function Clone() As Step 
```

问题是，当我尝试在 SubStepAA 中实现它时，我无法声明以下内容：

```
Public Overrides Function Clone() As SubStepAA 
```

如果我这样做，我会收到返回类型不同的错误。

每当我克隆一个具体的子类时，是否只使用 DirectCast 调用的解决方案？这看起来很奇怪，也很不满意。这似乎也是错误的。我的意思是，如果我克隆一个 SubStepAA 对象，我想取回一个 SubStepAA 类型的对象。

一定有办法做到这一点，对吧？我的意思是，我想我可以按照需要的方式声明每个类，但是必须编写 5 个不同的 Clone() 方法似乎也是错误的，这些方法只是碰巧以（基本上）相同的方式工作（创建一个深拷贝被引用的对象）。

我已经研究过使用接口声明，但这似乎受到相同类型不匹配错误的影响。

请告诉我，我只是缺少一些基本的东西！

谢谢！

顺便说一句，我一直在做一些阅读，我意识到可能有更优化的方法来进行对象的深层复制（例如，通过序列化/反序列化），但我仍然对这个问题感兴趣，即使我选择使用不同的方法克隆对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:25:26.353

这可能不是您所希望的，但您可以通过使用通用基类型来满足您的所有要求，如下所示：

```
Public MustInherit Class [Step](Of T)
    Public MustOverride Function Clone() As T
End Class

Public Class StepA
    Inherits [Step](Of StepA)

    Public Overrides Function Clone() As StepA
        ' ...
    End Function
End Class 
```

但是，那么就不`Step`会有可用于所有派生类型的通用基类。例如，没有办法做这样的事情：

```
Dim s As [Step] = New StepA()  'Won't work because there is no Step type, only a generic Step(T) type
Dim c As [Step] = s.Clone() 
```

然而，如果你需要一个像这样的通用基类型，你仍然可以做这样的事情，尽管有一些额外的复杂性：

```
Public Interface ICloneable(Of T)
    Function Clone() As T
End Interface

Public MustInherit Class [Step]
    Implements ICloneable(Of [Step])

    Public MustOverride Function CloneBase() As [Step] Implements ICloneable(Of [Step]).Clone
End Class

Public MustInherit Class [Step](Of T As [Step])
    Inherits [Step]

    Implements ICloneable(Of T)

    Public Overrides Function CloneBase() As [Step]
        Return Clone()
    End Function

    Public MustOverride Function Clone() As T Implements ICloneable(Of T).Clone
End Class

Public Class StepA
    Inherits [Step](Of StepA)

    Public Overrides Function Clone() As StepA
        ' ...
    End Function
End Class 
```

如果您这样做，您将拥有额外的抽象层，您可以将每个具体对象转换为 a`Step(T)`或 a `Step`。例如，您可以这样做：

```
Dim s As [Step] = New StepA()
Dim c As [Step] = s.CloneBase() 
```

但是，当然，这一切都引出了一个问题，是否值得所有这些复杂化？两个更简单的解决方案是在每个派生类上独立实现接口（从而放弃从基类调用克隆的能力），或者按照您的第一个想法，让`Clone`方法始终返回基类型。

# c# - 温莎城堡什么时候发布瞬态组件

> ID：14072208
> 
> 赞同：4
> 
> 时间：2012-12-28T16:01:42.287
> 
> 标签：c#, .net, castle-windsor, lifecycle, transient

我来自 Java 和 Spring 的背景，而且我对 Castle Windsor 还很陌生。我已经读过，知道 Castle 何时释放瞬态组件很重要，因为它会跟踪所有创建的组件。不过，我很难理解我的组件何时发布。这是我的模型的基础知识：

```
Singleton -> Singleton Typed Factory -> Transient Objects 
```

如果我释放这个链中的第一个单例，那么[类型化工厂](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)创建的所有瞬态对象都会被释放吗？我可以进行任何 API 调用来检查是否是这种情况？我在 Castle Windsor 网站上找不到任何全面的 API 文档。我确实找到的文档对我来说似乎并不清楚。

**编辑：** 我的问题归结为两个主要问题。

1.  如果我有一个依赖于单例类型工厂 (B) 的单例对象 (A)，并且我释放单例 A 是否会真正释放 B？下面的答案中提到的博客文章说，对单例对象的释放调用被忽略，所以我的假设是不，它不会被释放。
2.  如果我有一个单例类型的工厂，多个 Web 请求同时使用它来创建瞬态对象并由其中一个 Web 请求释放，那么**所有**瞬态对象是否都会被释放，无论它们是否是从该 Web 请求创建的？似乎根据 Web 请求或短暂的生活方式制作类型工厂会更好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T15:30:12.150

这是一篇详细的帖子，解释了 Windsor 如何跟踪对象以及何时需要调用 Release： http: [//kozmic.pl/2010/08/27/must-i-release-everything-when-using-windsor/](http://kozmic.pl/2010/08/27/must-i-release-everything-when-using-windsor/)

**更新您的更新**

1.  单例上的任何释放都会被忽略，所以，是的，你是对的——它不会被释放。

2.  您只需要担心发布**您专门解决**的组件。如果它是由 Windsor 解决的（通过 Typed Factory Facility、子依赖解析器等），请不要担心。

# c# - 如何为列表框中的选定项目着色？单击鼠标右键时仅对所选项目文本着色

> ID：14072212
> 
> 赞同：0
> 
> 时间：2012-12-28T16:02:04.730
> 
> 标签：c#

它通常可以正常工作，但是由于我只想在右键单击鼠标右键时才为项目着色，所以它不起作用，因为当我显示/打开 listBox 时，它首先进入 DrawItem 事件：

```
private void listBox1_MouseDown(object sender, MouseEventArgs e)
        {
            listBox1.SelectedIndex = listBox1.IndexFromPoint(e.X, e.Y);

            if (e.Button == System.Windows.Forms.MouseButtons.Right)
            {
                isColor = true;
            }
        }

        private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            if (isColor == true)
            {
                if (e.Index < 0) return;
                //if the item state is selected them change the back color 
                if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
                    e = new DrawItemEventArgs(e.Graphics,
                                              e.Font,
                                              e.Bounds,
                                              e.Index,
                                              e.State ^ DrawItemState.Selected,
                                              e.ForeColor,
                                              Color.Red);//Choose the color

                // Draw the background of the ListBox control for each item.
                e.DrawBackground();
                // Draw the current item text
                e.Graphics.DrawString(listBox1.Items[e.Index].ToString(), e.Font, Brushes.Black, e.Bounds, StringFormat.GenericDefault);
                // If the ListBox has focus, draw a focus rectangle around the selected item.
                e.DrawFocusRectangle();
            }
        } 
```

我使用了一个标志 isColor 但由于它首先进入 DrawItem 事件，因此该代码无法正常工作。由于 isColor 现在是第一次。

编辑：

我还需要两件事。

1.  当在一个项目上单击鼠标左键时，它将像以前一样被标记为常规蓝色。
2.  当在一个项目上单击鼠标右键时，它将被着色为红色。
3.  要启用多项选择，因此如果我单击鼠标右键，它将保留已经为红色的其他项目，以便我可以选择许多项目为红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:06:23.710

列表中的每个项目都会调用 OnDrawItem。你把每件物品都涂成红色。您需要检查需要绘制的项目是否是所选项目（如果我没记错的话`e.Selected`），如果是，则将其涂成红色，否则将其涂成其他颜色..也许`SystemColors.Window`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:10:27.173

尝试这个：

```
if(((ListBox)sender).SelectedIndex == e.index)
{
....
} 
```

# uiimageview - 将图片设置为 UIImages 作为实例变量

> ID：14072217
> 
> 赞同：0
> 
> 时间：2012-12-28T16:02:30.233
> 
> 标签：uiimageview, uiimage, ivar

我在支持文件中有一个名为“卡片”的 png 文件夹。我正在尝试将 pic 设置为对象的 UIImage 实例变量。当我尝试 NSLog UIImage 我得到空值。

我认为我没有正确访问图片的路径，但不确定？？？？

```
#import "Deck.h"
#import "Card.h"

@implementation Deck

@synthesize cards;

- (id) init
{
    if(self = [super init])
    {
        cards = [[NSMutableArray alloc] init];

        NSInteger aCount, picNum = 0;

        for(int suit = 0; suit < 4; suit++)
        {
            for(int face = 1; face < 14; face++, picNum++)
            {

                //NSString *path = [[NSBundle mainBundle] bundlePath];
                //NSString *imagePath = [path stringByAppendingPathComponent: [NSString stringWithFormat:@"/cards/card_%d.png",picNum]];

                NSString *fileName = [NSString stringWithFormat:@"card_%d", picNum];
                NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@"png"inDirectory:@"/cards"];

                NSLog(@"%@", path);
                UIImage *output = [UIImage imageNamed:path];

                //NSLog(@"%@", output);

                Card *card = [[Card alloc] initWithFaceValue:(NSInteger)face
                                                countValue:(NSInteger)aCount
                                                suit:(Suit)suit
                                                cardImage:(UIImage *)output];

                [cards addObject:card];
            }

        }
    }
    return self;
}

} 
```

@结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:07:43.753

概念上更好的方法是使用`NSBundle`专门为处理子目录而设计的方法：

```
NSString *fileName = [NSString stringWithFormat:@"card_%d", picNum];
NSString *path = [[NSBundle mainBundle] pathForResource:fileName
                                                 ofType:@"png"
                                            inDirectory:@"cards"]; 
```

# c# - 如何使用 c# 将 facebook 输入框添加到 web 表单中，以便发布到我的时间轴？

> ID：14072219
> 
> 赞同：1
> 
> 时间：2012-12-28T16:02:35.187
> 
> 标签：c#, facebook, visual-studio, twitter

我正在使用 Visual Studio 和 winforms 和 c#

我创建了一个输入框和一个 go 按钮，并在该区域放置了一个网络浏览器，我想在框中输入一条消息按 go 并将其发送到我的 facebook 时间线，所以当我在搜索框中输入 facebook 时，我做到了打开 facebook，我可以看到我发布的内容。我的搜索框已经完成并且可以正常工作，我也想为 twitter 做这个。

# html - 悬停时如何使进度条的值可见

> ID：14072220
> 
> 赞同：6
> 
> 时间：2012-12-28T16:02:38.020
> 
> 标签：html

尽管我找不到适合我的问题的解决方案，但它可能会非常简单。我想要的是以下内容，当用户将鼠标悬停在进度条上时，进度条会在一个小弹出屏幕或类似的东西中给出进度条的值。你大概能明白我想说什么:)

我的html5代码：

```
<progress id="progressBar" value="50" max="100"></progress> 
```

我对 html 5 和悬停的东西非常陌生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T16:19:06.300

您可以使用简单的 CSS`attr()`和伪元素来做到这一点。

HTML：

```
<progress id="progressBar" value="50" max="100"></progress> 
```

CSS：

```
progress#progressBar:hover:after {
    display: block;
    content: attr(value);
} 
```

​</p>

这是工作示例：[jsFiddle](http://jsfiddle.net/LE4X4/1/)

您可以设置此伪元素的样式，使其看起来像“弹出屏幕”或您想要的任何内容；-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T16:21:03.483

### 采用`:before`

```
progress#progressBar:hover:before {
    display: inline;
    content: attr(value);
} 
```

### 小提琴：http: [//jsfiddle.net/U58Tp/](http://jsfiddle.net/U58Tp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T16:25:18.983

这有点不雅，但它有效。将脚本附加`onmouseover`到`onmouseout`进度条以显示和隐藏`div`. 它可以根据需要放置和设置样式。

```
<progress id="progressBar" value="0" max="100" 
 onmouseover="a=document.getElementById('stat');
              a.innerHTML=this.value; 
              a.style.display='block'" 
 onmouseout="document.getElementById('stat').style.display='none'">
</progress>
<div id="stat"></div> 
```

# signalr-hub - 未调用 SignalR JS 客户端方法

> ID：14072223
> 
> 赞同：6
> 
> 时间：2012-12-28T16:02:47.337
> 
> 标签：signalr-hub

我无法让 SignalR 服务器端集线器代码调用 JS 客户端方法。反过来工作正常 - 所以当我的客户端向服务器发送消息时，它会按预期传递。我一直非常小心地避免明显的陷阱，但我想我仍然忽略了一些东西。这是我的代码：

**来自 MessageHub.cs：**

```
public bool SendMessage( ClientMessage message )
{
    ...
    Clients.All.addMessage("my message");
    ...
} 
```

**Javascript：**

```
$.connection.hub.start()
    .done(function () {
        messageHub = $.connection.message;

        // addMessage is never invoked.
        messageHub.client.addMessage = function (message) {
            alert('message added');
        };

        /* // I tried this based on some sample code but still not invoked.
        messageHub.addMessage = function (message) {
            alert('message added');
        };
        */

        // This works as expected.
        messageHub.server.registerUser(userId);
        ...
    }); 
```

如上所述，我找不到任何明显的设置缺陷，但这里有一些可能相关的点：

*   建立连接并调用服务器端方法。
*   这可能无关紧要，但我尝试过强制不同的传输而不改变行为。
*   客户端方法名称在任何时候都不会与服务器方法名称冲突。
*   我还尝试将消息发送到特定的客户端连接（在这种情况下，这实际上是目标）。
*   我在客户端和服务器上都启用了日志记录，但在这两种情况下都看不到任何相关内容。

那么，鉴于上述情况，我是否遗漏了一些明显的东西？如果不是，那么识别故障点的最佳方法是什么？

PS这与问题没有特别相关，但是，由于某种原因，Fiddler 不再捕获来自我的任何浏览器的任何流量，这使得调试 WS 或 HTTP 流量有点挑战性 - 我猜这是 Windows 8 的事情。 ..

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-27T17:31:47.463

所以，答案实际上很简单（尽管自上一个版本以来我已经从 1.0.0.0-rc1 升级到 1.0.0.0 - 但我相当肯定这并没有显着改变这种情况）。

我在这里找到了答案：[https](https://stackoverflow.com/a/15074002/32935) ://stackoverflow.com/a/15074002/32935 （请注意，具体来说，我的解决方案是针对提供的第一个答案 - 尽管第二个帮助我确定了原因）。

本质上，对于那些不想转到原始答案的人来说，我必须在`start()`针对连接调用该方法之前设置我的客户端方法，而不是`done()`像我正在做的那样在回调中。这是一个例子：

```
$.connection.message.client.addMessage = function (message) {
    alert( 'Now it works!' );
};

$.connection.hub.start()
    .done(function () {
        console.log( 'Connection established!' );
    }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-31T11:00:22.423

当您将鼠标悬停在 Clients 对象上时，您是否看到您在 JS 中定义的所有函数？

无论如何，我不确定为什么你的方式行不通，但这就是我编写客户端的方式，并且它有效。也许你可以试试这个方法。

```
$(function () {

    var hub = $.connection.RatesHub;

    $.connection.hub.start().done(function () {
        /*Logic goes here*/
    });

    $.extend(hub.client, {
        FuncName: function (msg) {
            /*Logic goes here*/
        }
    });

} 
```

您想在服务器中识别的任何功能，请使用 $.extend。

希望有帮助。

# javascript - 如何拥有无铬 YouTube 播放器并随时开始/停止播放？

> ID：14072225
> 
> 赞同：0
> 
> 时间：2012-12-28T16:03:04.473
> 
> 标签：javascript, youtube-api

我想要一个可以通过 JS 控制停止和启动的 Chromeless 播放器。

到目前为止，我的播放器代码是：

`<iframe class="video-frame" src="http://www.youtube.com/embed/xU1S011111?controls=0&showinfo=0" frameborder="0"></iframe>`

但是，我不确定如何与 JS API 交互。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:08:57.747

在这里可以找到很多示例：[https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

您需要添加`&enablejsapi=1`到 URL，设置一个`id`，然后添加该示例中显示的 JavaScript（使用`onYouTubeIframeAPIReady`）：

```
<iframe id="ytplayer" class="video-frame" src="http://www.youtube.com/embed/xU1S011111?controls=0&showinfo=0&enablejsapi=1" frameborder="0"></iframe> 
```

我可以复制并粘贴一堆示例代码，但是如果您阅读文档会更好地理解。它们可读且易于使用。

这是一个小提琴演示：http: [//jsfiddle.net/BAqTe/](http://jsfiddle.net/BAqTe/)

# pyephem - PyEphem 可以找到特定星座的天顶时间吗？

> ID：14072230
> 
> 赞同：1
> 
> 时间：2012-12-28T16:03:13.933
> 
> 标签：pyephem

嗨 PyEphem 开发人员。

我已经检查了文档，但因为我不是天文学专家，我无法找到并回答，PyEphem 是否可以帮助我找到特定星座在地球上特定日期和地点处于天顶位置的时间？我需要计算一整年的时间……</p>

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T04:28:09.507

我认为您正在寻找运输时间，请参阅此处的 pyephem 文档

[http://rhodesmill.org/pyephem/rise-set.html#](http://rhodesmill.org/pyephem/rise-set.html#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:18:56.487

星星在文件 stars.py 的 src 目录中编目

您可以在目录中添加星星，请参阅：readdb 并注意注意事项

[http://rhodesmill.org/pyephem/tutorial.html#fixed-objects-precession-and-epochs](http://rhodesmill.org/pyephem/tutorial.html#fixed-objects-precession-and-epochs)

# css - 多种@font-face 格式会减慢下载速度吗？

> ID：14072232
> 
> 赞同：2
> 
> 时间：2012-12-28T16:03:23.433
> 
> 标签：css, font-face

我正在开发一个网站并使用@font-face 进行排版（因为所需的确切字体不能作为网络字体提供）。我使用[Font Squirrel 的 @font-face 生成器](http://www.fontsquirrel.com/fontface/generator)来创建他们推荐的格式，其中包括不同的格式以实现最大的跨浏览器兼容性，并使用他们的示例 CSS：

```
@font-face {
font-family: 'playfair_displayregular';
src: url('playfair-display-webfont.eot');
src: url('playfair-display-webfont.eot?#iefix') format('embedded-opentype'),
     url('playfair-display-webfont.woff') format('woff'),
     url('playfair-display-webfont.ttf') format('truetype'),
     url('playfair-display-webfont.svg#playfair_displayregular') format('svg');
font-weight: normal;
font-style: normal;

} 
```

我的问题是，浏览器会尝试下载所有不同的格式，还是每个浏览器只加载一个供它使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:20:19.830

在某些情况下，某些浏览器会下载相同字体的多种格式。

可以在[Bulletproof @font-face syntax](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)找到详尽的解释，但要点是 FontSquirrel 正在为您完成所有艰苦的工作，并且它们的语法实现了最佳语法并防止下载多个资源。

这篇文章值得一读，还提供了更多信息的链接。

# c++ - 是否可以仅从纯 C 或纯 C++ 控制屏幕上的像素，而无需任何 opengl / directx 麻烦？

> ID：14072241
> 
> 赞同：5
> 
> 时间：2012-12-28T16:04:12.697
> 
> 标签：c++, c, graphics

好吧，我想知道..也许其他人也是。

是否可以通过编程，尤其是 C 或 C++ 分别控制屏幕上的每个像素？

您需要对当前屏幕的驱动程序进行特殊控制吗？是否有允许您更改像素的操作系统（例如在所有内容之上绘制消息/覆盖）？

或者Windows是否支持它的WinApi？

编辑：

我问这个问题是因为我想让我的电脑在我玩游戏并且我的处理器变得太热时警告我。我主要使用 Windows，但我有一个双启动 ubuntu 发行版。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:07:37.140

你走得越低，你遇到的麻烦就越多。

如果您想要原始像素操作，您可以查看[http://www.libsdl.org/](http://www.libsdl.org/)，它可以帮助您减轻创建表面/窗口等的麻烦。

如果您愿意，Linux 有一些方法可以让您变得更低（即没有“windows”或“xwindows”或任何类似的东西，只是原始屏幕），如果您对此感兴趣，请查看 Linux 帧缓冲区。

深入研究（例如使用您自己的操作系统），BIOS 将让您进入某些视频模式，这是操作系统安装程序倾向于使用的（至少他们曾经使用过，一些更高级的不再使用了） . 这不是最快的做事方式，但可以让您进入在一些汇编指令中显示像素的领域。

当然，如果你想做自己的操作系统并利用显卡（绕过 BIOS），那么你就是在谈论编写视频驱动程序之类的东西，这显然是大量的工作:)

* * *

在屏幕上重新覆盖消息之类的东西，windows 确实支持这种东西，所以我相信你可以使用 WinAPI 来做到这一点，尽管可能有一些库可以让这更容易。我知道你不需要深入研究来做那种事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T16:38:35.307

让我们一次看一下每一位：

> 是否可以通过编程，尤其是 C 或 C++ 分别控制屏幕上的每个像素？

可能。这真的取决于图形架构，在许多现代系统中，实际的屏幕表面（即“出现在屏幕上的一堆像素”）并不直接受软件控制 - 至少不是来自“用户模式”（即，来自您或我可以编写的应用程序 - 您需要编写驱动程序代码，并且您需要与现有的图形驱动程序充分合作）。

人们普遍认为，将数据绘制到屏幕外缓冲区并使用 BitBlt [BitBlockTransfer] 函数将内容复制到屏幕上是执行此类操作的首选方式。

所以，在现实中，你可能无法操纵屏幕上的每个像素——但你可能会表现得像你一样。

> 您需要对当前屏幕的驱动程序进行特殊控制吗？

假设您可以直接访问屏幕内存，您的代码肯定必须与驱动程序合作 - 否则，谁能说您想要出现在屏幕上的内容不会被其他内容覆盖[例如，您想要完整屏幕访问，并且时钟更新器每分钟根据您绘制的内容更新屏幕上的时间，等等]。

您也许可以将驱动程序设置为具有“孔”的模式，该“孔”允许您将屏幕内存作为大的“帧缓冲区”访问。我认为在 Windows 中没有简单的方法可以做到这一点。我不记得在 2003-2005 年我以编写图形驱动程序为生时。

> 是否有允许您更改像素的操作系统（例如在所有内容之上绘制消息/覆盖）？

在现代显卡的硬件中创建覆盖层是绝对可能的。这通常是视频播放的工作方式 - 视频被播放到一块覆盖在其他图形之上的帧缓冲区内存中。您需要驱动程序的帮助，据我所知，这绝对可以在 Windows API 中通过 DirectX 获得。

> 或者Windows是否支持它的WinApi？

可能，但要准确回答，我们需要更好地了解您想要做什么。

编辑：在您的特定用例中，我会认为发出声音或弹出 CD/DVD 驱动器可能是更合适的选项。在游戏绘制的图形上叠加某些东西可能很困难，因为游戏通常会尝试尽可能多地使用可用的图形资源，而且您可能很难找到一种即使在大多数情况下都有效的方法简单的用例——不要介意那些适用于使用不同绘图/引擎/图形库的多种不同类别游戏的东西。我也不完全确定有什么可过分担心的，因为现代 CPU 对过热有很好的耐受性，所以 CPU 只会减速，可能会停止，但它不会坏——即使你取下散热器，不会出错[不，我不建议你尝试这个！]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:22:34.370

每个平台都支持有效的原始像素块传输“又名 BitBlt()”，所以如果你真的想进入帧缓冲区级别，你可以分配一个位图并使用指针直接设置其内容，然后用一行代码有效地翻转这个内存块进入视频内存缓冲区。当然，它不如直接使用 PCI 帧缓冲区高效，但另一方面，这种方法 (BitBlt) 即使在 Win95 天也足够快，可以在不使用 WinG 的情况下将 Wolfenstein 3d 移植到 Pentium CPU 上。

但是，在创建此位图时必须小心，以使其格式（即 RGB 16 位或 32 位等）与设备所处的实际模式相匹配，否则图形子系统将进行冗长的重新编码/抖动这将完全杀死你的速度。

所以根据你的目标，如果你想要一个 3d 游戏，你的表现会很糟糕。如果您只想渲染一些形状并且不需要超过 10-15fps - 这将在不深入任何设备驱动程序级别的情况下工作。

以下是在 Windows 中叠加的一些提示：

```
hdc = GetDC(0);//returns hdc for the whole screen and is VERY fast 
```

您可以将 HDC 用于屏幕并执行 BItBlt(hdc, ..... SRCCOPY) 以有效地翻转光栅块。还有用于桌面的预定义 Windows 句柄，但我不记得确切的机制，但如果您在多个显示器上，您可以为每个桌面获取 HDC，查看“GetDesktopWindow”、“GetDC”等...

# java - java HTTPConnection 连接到 ip

> ID：14072247
> 
> 赞同：0
> 
> 时间：2012-12-28T16:04:29.610
> 
> 标签：java, http, dns, ip, httpconnection

我想处理来自网站的数据。我需要处理会话，所以我需要发送 cookie。但是如果我的程序等待超过 60 秒来请求一个新站点，DNS 解析器会给我一个新的 ip，所以我的程序将连接到另一个没有我会话的服务器。

是否可以通过 HTTPConnection 连接到同一服务器（IP）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:11:16.190

您可以在开始时将主机名解析为 ip，重写 url 以使用 IP 而不是主机名，然后您根本不必担心 DNS

# c++ - 使用 Qt 实现多客户端服务器的方法

> ID：14072248
> 
> 赞同：2
> 
> 时间：2012-12-28T16:04:31.357
> 
> 标签：c++, qt, networking, tcp, threadpool

我正在使用 Qt lib 在 C++ 中创建一个多客户端服务器 (IRC)。我想知道这是否是服务器架构的好方法。

我想避免为每个连接创建线程，所以我认为我可以在某种容器中拥有所有客户端套接字并使用 ThreadPool 执行操作（如处理传入数据包）。

我唯一关心的是是否将套接字连接到`SLOT`保证并行客户端处理。

代码 ：

```
CServer::CServer(QObject *parent) : QTcpServer(parent)
{
        server = new QTcpServer(this);
        connect(server, SIGNAL(newConnection()), this, SLOT(newConnection()));

        if(!server->listen(QHostAddress::Any, 6667)) 
            qDebug() << "Oh noes";
}

void CServer::newConnection(){
           add server->nextPendingConnection() to the container
} 
```

# jquery - 新手绑定MVC表单jquery

> ID：14072249
> 
> 赞同：1
> 
> 时间：2012-12-28T16:04:32.833
> 
> 标签：jquery, model-view-controller

我可以通过直接发布到不同的控制器/操作来做到这一点。Say I had a list of orders and when select an order I get the order in edit mode, how would I do this with jquery(ie no post backs etc all on the one page) and post the edit and return to the list. 我仍想使用数据注释等进行验证。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:07:06.747

我假设您使用的是 Spring MVC。我通过使用该函数并使用[jQuery Form Plugin](http://malsup.com/jquery/form/)`$.ajax()`序列化 Spring-bound 表单来实现这一点。请参见下面的示例：

`<div id="container"></div>`在 Spring MVC 表单周围创建一个容器。

```
 $.ajax({
        type: 'POST',
        url: actionUrl,
        data: $('#id_of_your_form_tag').serialize(),
        success: function(data) {
            $('#container').html(data);
        },
        async: false
    }); 
```

# java - Ant 包括 jar 文件和 dest jar 中的 .class 文件

> ID：14072253
> 
> 赞同：-1
> 
> 时间：2012-12-28T16:04:50.130
> 
> 标签：java, ant, build, jar, executable-jar

我已经使用 ant 定义了一个 jar 任务`build.xml`。我需要将所有依赖项捆绑到我的 jar 中。我不明白为什么 ant 会提取 jars 并将`.jar`s 和`.class`files 都包含到我的 jar 中。它不必要地增加了我的 jar 文件的大小。这是我的 jar 任务。

```
<jar destfile="build/main/ERS2SupportingUtilities.jar">

            <fileset dir="target/classes">
                <exclude name="*.sh"/>
            </fileset>

            <restrict>
             <name name="**/*.class"/>
             <archives>
               <zips>
                 <fileset dir="./src/main/resources/lib" includes="**/*.jar"/> 
               </zips>
             </archives>
            </restrict>

            <manifest>
              <attribute name="Main-Class" value="com.cibc.ers2.invoker.JobTest"/>
                <attribute name="Class-Path" value="./lib/log4j-1.2.16.jar
                                                    ./lib/org.springframework.context-3.0.3RELEASE.jar
                                                    ./lib/org.springframework.asm-3.0.3.RELEASE.jar
                                                    ./lib/junit-4.7.jar
                                                    ./lib/org.springframework.orm-3.0.3.RELEASE.jar
                                                    ./lib/org.springframework.transaction-3.0.3.RELEASE.jar
                                                    ./lib/org.springframework.aspects-3.0.3.RELEASE.jar
                                                    ./lib/commons-pool-1.5.4.jar
                                                    ./lib/org.springframework.core-3.0.3.RELEASE.jar
                                                    ./lib/commons-logging-1.1.1.jar
                                                    ./lib/HashUtility.jar
                                                    ./lib/org.springframework.expression-3.0.3.RELEASE.jar
                                                    ./lib/commons-lang-2.6.jar
                                                    ./lib/org.springframework.instrument-3.0.3.RELEASE.jar
                                                    ./lib/mockito-all-1.9.5.jar
                                                    ./lib/com.springsource.org.aopalliance-1.0.0.jar
                                                    ./lib/ojdbc14.jar
                                                    ./lib/commons-io-2.4.jar
                                                    ./lib/commons-collections-3.1.jar
                                                    ./lib/org.springframework.jdbc-3.0.3.RELEASE.jar
                                                    ./lib/spring-batch-infrastructure-2.1.9.RELEASE.jar
                                                    ./lib/org.springframework.context.support-3.0.3.RELEASE.jar
                                                    ./lib/commons-dbcp-1.4.jar
                                                    ./lib/spring-batch-test-2.1.9.RELEASE.jar
                                                    ./lib/org.springframework.beans-3.0.3.RELEASE.jar
                                                    ./lib/org.springframework.oxm-3.0.3.RELEASE.jar
                                                    ./lib/org.springframework.aop-3.0.3.RELEASE.jar
                                                    ./lib/commons-beanutils.jar
                                                    ./lib/org.springframework.binding-2.1.1.RELEASE.jar
                                                    ./lib/spring-batch-core-2.1.9.RELEASE.jar
                                                    ./lib/org.springframework.test-3.0.3.RELEASE.jar
                                                    ./launch-context.xml
                                                    ./log4j.xml"
                />
            </manifest>
        </jar> 
```

我也尝试过`zipgroupfileset`，但这也给出了同样的问题。

## 编辑

很抱歉没有提供足够的信息来说明我想要实现的目标。我有一个应用程序，我正在编译 @ `target/classes`。我需要将此应用程序（包括我的类文件和依赖项）打包到一个 jar 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:21:19.800

```
 <fileset dir="target/classes">
     <exclude name="*.sh"/>
 </fileset> 
```

包括来自目标/类的所有不是 shell 脚本的文件。

```
<restrict>
    <name name="**/*.class"/>
    <archives>
         <zips>
             <fileset dir="./src/main/resources/lib" includes="**/*.jar"/> 
          </zips>
     </archives>
</restrict> 
```

似乎您再次在此处包含类和罐子。

如果您只想将 jar 更改为：

```
<zipfileset dir="./src/main/resources/lib" includes="*.jar"/> 
```

# r - 用 R 语言读写 csv 文件的问题

> ID：14072256
> 
> 赞同：0
> 
> 时间：2012-12-28T16:05:13.160
> 
> 标签：r, csv

我有一个csv格式的表格，数据如下：

```
 1           3            1          2
1415_at 1   8.512147859 8.196725061 8.174426394 8.62388149
1411_at 2   9.119200527 9.190318548 9.149239039 9.211401637
1412_at 3   10.03383593 9.575728316 10.06998673 9.735217522
1413_at 4   5.925999419 5.692092375 5.689299161 7.807354922 
```

当我阅读它时：

```
m <- read.csv("table.csv") 
```

并打印 m 的值，我注意到它们变为：

```
 X   X.1        X1       X3      X1.1       X4
1 1415_at   1       8.512148 8.196725  8.174426 8.623881 
```

我做了一些操作，只保留那些标记为 1 或 2 的列，所以我这样做：

```
smallerdat <- m[ grep("^X$|^X.1$|^X1$|^X2$|1\\.|2\\." , names(m) ) ]

write.csv(smallerdat,"table2.csv") 
```

它给我写了带有那些烦人的标题的文件，并添加了第一列，我不需要它：

```
 X   X.1        X1             X1.1       X2
1 1415_at   1       8.512148   8.174426 8.623881 
```

所以当我在 Excel 中打开该数据时，标题仍然是 X、X.1 和儿子。我需要的是标题保持不变：

```
 1      1           2
1415_at 1       8.196725061 8.174426394 8.62388149 
```

有什么帮助吗？

还请注意自动添加的第一列，我不需要它，那么我怎样才能摆脱那一列呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:17:56.670

这里有两个问题。

1.  要读取 CSV 文件，请使用：

    ```
    m <- read.csv("table.csv", check.names = FALSE) 
    ```

    但是请注意，通过这样做，您不能轻松地使用列名。你必须用反引号来引用它们，并且由于重复的列名很可能仍然会遇到问题：

    ```
    m$1
    # Error: unexpected numeric constant in "mydf$1"
    mydf$`1`
    # [1]  8.512148  9.119201 10.033836  5.925999 
    ```

2.  要将“m”对象写入 CSV 文件，请使用：

    ```
    write.csv(m, "table2.csv", row.names = FALSE) 
    ```

* * *

使用步骤 1 中的方法读取文件后，您可以按如下方式进行子集化。如果您想要第一列和任何名为“3”或“4”的列，您可以使用：

```
m[names(m) %in% c("", "3", "4")]
#                    3        4
# 1 1415_at 1 8.196725 8.623881
# 2 1411_at 2 9.190319 9.211402
# 3 1412_at 3 9.575728 9.735218
# 4 1413_at 4 5.692092 7.807355 
```

### 更新：使用前修复名称`write.csv`

如果您出于某种原因不想从第 1 步开始，您仍然可以解决问题。虽然您已成功使用`grep`语句获取子集，但这并不会更改列名（不知道为什么您会期望它应该这样做）。`gsub`您必须通过使用或其他解决方案之一来做到这一点`regex`。

以下是您在 CSV 中读取的列名称：

```
names(m)
# [1] "X"    "X.1"  "X1"   "X3"   "X1.1" "X2" 
```

你想要：

*   删除所有“X”
*   删除所有“.some-number”

所以，这里有一个解决方法：

```
# Change the names in your original dataset
names(m) <- gsub("^X|\\.[0-9]$", "", names(m))
# Create a temporary object to match desired names
getme <- names(m) %in% c("", "1", "2")
# Subset your data
smallerdat <- m[getme]
# Reassign names to your subset
names(smallerdat) <- names(m)[getme] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:41:22.053

我不确定我是否理解您要执行的操作，但这里有一些代码读取前两列缺少标题的 csv 文件，仅选择标题为 1 或 2 的列，然后写入该新数据文件保留1 或 2 的列名。

```
# first read in only the headers and deal with the missing 
# headers for columns 1 and 2

b <- readLines('c:/users/Mark W Miller/simple R programs/missing_headers.csv', 
     n = 1)
b <- unlist(strsplit(b, ","))
b[1] <- 'name1'
b[2] <- 'name2'
b <- gsub(" ","", b, fixed=TRUE)
b

# read in the rest of the data file

my.data <- (
 read.table(file = "c:/users/mark w miller/simple R programs/missing_headers.csv", 
 na.string=NA, header = F, skip=1, sep=','))

colnames(my.data) <- b

# select the columns with names of 1 or 2

my.data <- my.data[names(my.data) %in% c("1", "2")]

# retain the original column names of 1 or 2

names(my.data) <- floor(as.numeric(names(my.data)))

# write the new data file with original column names

write.csv(
  my.data, "c:/users/mark w miller/simple R programs/missing_headers_out.csv",
            row.names=FALSE, quote=FALSE) 
```

这是输入数据文件。请注意第 1 列和第 2 列缺少名称的逗号：

```
 ,  ,             1,           3,           1,          2
1415_at, 1,   8.512147859, 8.196725061, 8.174426394, 8.62388149
1411_at, 2,   9.119200527, 9.190318548, 9.149239039, 9.211401637
1412_at, 3,   10.03383593, 9.575728316, 10.06998673, 9.735217522
1413_at, 4,   5.925999419, 5.692092375, 5.689299161, 7.807354922 
```

这是输出数据文件：

```
1,1,2
8.512147859,8.174426394,8.62388149
9.119200527,9.149239039,9.211401637
10.03383593,10.06998673,9.735217522
5.925999419,5.689299161,7.807354922 
```

# javascript - javascript在使用调用时获取返回函数

> ID：14072261
> 
> 赞同：-2
> 
> 时间：2012-12-28T16:05:30.653
> 
> 标签：javascript, validation

我使用 call() 调用函数 javascript 但 call() 不返回

```
config.validar = function(){
    cases.validarNuevoPaso(form);   
}

var resp = config.validar.call(undefined, form);

validarNuevoPaso : function(form){
    return 'algun valor';
} 
```

并且resp是未定义的，

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:07:24.710

您正在返回字符串 from `validarNuevoPaso`to`validar`但不返回任何内容`validar`- 插入 return 语句以将其全部取出

```
config.validar = function(){
    return cases.validarNuevoPaso(form);   
} 
```

# scala - 是否可以使用 scala 2.10 找到（在运行时）所有子类（混合了某些特征）

> ID：14072262
> 
> 赞同：3
> 
> 时间：2012-12-28T16:05:32.650
> 
> 标签：scala, reflection, classpath, scala-2.10

我需要找到所有混合了某些特征的子类（我不会在运行时这样做）。我知道用 scala (ClassUtil) 编写的工具，但这个工具很慢。我还知道一个用 java 编写的工具（比 ClassUtil 更快），但是如果我有选择的话，我宁愿不使用外部库 - 所以我的问题是：scala 2.10 支持解决我的问题吗？

# c# - 在 Windows Mobile 6.1 中序列化

> ID：14072263
> 
> 赞同：1
> 
> 时间：2012-12-28T16:05:33.787
> 
> 标签：c#, windows-mobile

我有一个要序列化的 XML 文档，但是它需要很长时间。Windows Mobile 6.1 Pro 是否存在导致序列化速度非常慢的限制？对于 16Kb 字符串，我得到了 1-1.5 (s) 的时间。

使用 .NET CF 3.5 序列化到 RAM。

```
serializer = new XmlSerializer(typeof(Request_PrintInfo));

"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
        "<Request_TestSale xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">"
        "  <Product>"
        "    <Ref>1</Ref>"
        "    <Name>Product 1</Name>"
        "    <ShortName>P1</ShortName>"
        "    <Abbreviation>P.1</Abbreviation>"
        "    <Id>494a8011-16a0-46ff-980f</Id>"
        "    <Attribs>"
        "      <ConfigAttribute>"
        "        <Name>price</Name>"
        "        <Required>false</Required>"
        "        <ReadOnly>true</ReadOnly>"
        "        <Value>200</Value>"
        "      </ConfigAttribute>"
        "      <ConfigAttribute>"
        "        <Name>Quantity</Name>"
        "        <Required>true</Required>"
        "        <ReadOnly>true</ReadOnly>"
        "        <Value>1</Value>"
        "      </ConfigAttribute>"
        "    </Attribs>"
        "  </Product>"
        "</Request_TestSale>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:11:48.590

XmlSerializer 相对来说很慢。我建议考虑直接使用 XmlTextWriter 来序列化您的对象。

代码会更复杂，但速度会更快，并且需要更少的内存——这两个考虑因素通常在移动设备上非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:06:25.287

好的，这就是我看到的：

```
private void DoNotUnderstandThis() {
  var serializer = new System.Xml.Serialization.XmlSerializer(typeof(Request_PrintInfo));
  string data = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
     "<Request_TestSale xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">" +
     "  <Product>" +
     "    <Ref>1</Ref>" +
     "    <Name>Product 1</Name>" +
     "    <ShortName>P1</ShortName>" +
     "    <Abbreviation>P.1</Abbreviation>" +
     "    <Id>494a8011-16a0-46ff-980f</Id>" +
     "    <Attribs>" +
     "      <ConfigAttribute>" +
     "        <Name>price</Name>" +
     "        <Required>false</Required>" +
     "        <ReadOnly>true</ReadOnly>" +
     "        <Value>200</Value>" +
     "      </ConfigAttribute>" +
     "      <ConfigAttribute>" +
     "        <Name>Quantity</Name>" +
     "        <Required>true</Required>" +
     "        <ReadOnly>true</ReadOnly>" +
     "        <Value>1</Value>" +
     "      </ConfigAttribute>" +
     "    </Attribs>" +
     "  </Product>" +
     "</Request_TestSale>";
} 
```

我真的不明白您是如何将上面的字符串放入 XML 文档中的。但是，就像 Ran 所说，您应该查看`XmlTextWriter`.

使用你的字符串数据，我会写这样的东西（未经测试）：

```
private const string CRLF = "\r\n";
private const string CRLFTAB = "\r\n\t";
private const string CRLFTABTAB = "\r\n\t\t";
private const string CRLFTABTABTAB = "\r\n\t\t";
private object writeLock = new object();

private void WriteToXml(string filename) {
  lock (writeLock) {
    using (FileStream stream = File.Open(filename, FileMode.Append, FileAccess.Write, FileShare.Read)) {
      using (XmlTextWriter xw = new XmlTextWriter(stream, Encoding.UTF8)) {
        xw.WriteStartElement("Product"); // writes the root
        {
          xw.WriteWhitespace(CRLFTAB);
          xw.WriteElementString("Ref", "1");
          xw.WriteWhitespace(CRLFTAB);
          xw.WriteElementString("Name", "Product 1");
          xw.WriteWhitespace(CRLFTAB);
          xw.WriteElementString("ShortName", "P1");
          xw.WriteWhitespace(CRLFTAB);
          xw.WriteElementString("Abbreviation", "P.1");
          xw.WriteWhitespace(CRLFTAB);
          xw.WriteElementString("Id", "494a8011-16a0-46ff-980f");
          xw.WriteWhitespace(CRLFTAB);
          xw.WriteStartElement("Attribs");
          {
            xw.WriteWhitespace(CRLFTABTAB);
            xw.WriteStartElement("ConfigAttribute");
            {
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("Name", "price");
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("Required", "false");
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("ReadOnly", "true");
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("Value", "200");
              xw.WriteWhitespace(CRLFTABTABTAB);
            }
            xw.WriteEndElement(); // Write the close tag for the ConfigAttribute element
            xw.WriteWhitespace(CRLFTABTAB);
            xw.WriteWhitespace(CRLFTABTAB);
            xw.WriteStartElement("ConfigAttribute");
            {
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("Name", "Quantity");
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("Required", "true");
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("ReadOnly", "true");
              xw.WriteWhitespace(CRLFTABTABTAB);
              xw.WriteElementString("Value", "1");
              xw.WriteWhitespace(CRLFTABTABTAB);
            }
            xw.WriteEndElement(); // Write the close tag for the ConfigAttribute element
            xw.WriteWhitespace(CRLFTABTAB);
          }
          xw.WriteEndElement(); // Write the close tag for the Attribs element
          xw.WriteWhitespace(CRLF);
        }
        xw.WriteEndElement(); // Write the close tag for the root element
        xw.WriteWhitespace(CRLF);
        xw.Flush();
        xw.Close();
      }
      stream.Close();
    }
  }
} 
```

希望这会让你到达某个地方。不过，我什至不确定这是否是您要寻找的东西。

# excel - 添加用于重命名视频批次的输出文件

> ID：14072264
> 
> 赞同：1
> 
> 时间：2012-12-28T16:05:33.990
> 
> 标签：excel, ms-access, video, batch-file, frame-rate

感谢 David Ruhmann，昨天我让我的批处理文件用于重命名视频：

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Create Empty Folder
rd /Q "%Temp%\Temp" 2>nul & mkdir "%Temp%\Temp"

:: Loop through Folders
pushd "xPath=c:\processing"
for /d %%D in (*) do call :Process "%%~fD"
popd
goto End

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Process <Parent>
:: Folder Name
set "xFolder=%~nx1"

:: Set Sub Folder
if not exist "%~1\VIDEO\" goto :eof
pushd "%~1\VIDEO"

:: Loop through Videos
for /f "delims=" %%A in ('dir *.avi /b') do if exist "%%~fA" (
    set "xDateWritten=%%~tA"
    set "xDateGMT=0000/00/00 00:00:00"
    for /f "tokens=1,2" %%X in ('robocopy . "%Temp%\Temp" "%%~nxA" /TS /FP /NS /NC /NP /NJH /NJS /NDL /L') do set "xDateGMT=%%X %%Y"
    rem Format = FF-FF-YYYYMMDD-HHh-MMm-SSs-FF-FF.ext
    echo %xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA
    ren "%%~fA" "%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA"
)
popd
goto :eof

:End
endlocal
pause 
```

但现在我需要添加一个附加功能。重命名后，我希望脚本导出*新文件名*，后跟*文件大小（以字节为单位*），以及*视频长度为*csv 或其他与 excel 兼容的文件类型。由于这些是视频文件，如果我也可以导出*帧速率*和*总帧数*，那就太好了。不确定这是否甚至在批处理文件的范围内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:44:05.860

这是将名称和大小导出到 csv 文件的修改。

改变这个

```
echo %xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA
ren "%%~fA" "%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA" 
```

进入这个

```
set "xFrame=00,00000"
for /f %%X in ('exiftool -p "$Framerate,$Framecount" "%%~fA"') do set "xFrame=%%~X"
set "xSize=%%~zA"
set "xName=%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA"
echo !xName!
ren "%%~fA" "!xName!"
echo !xName!,!xSize!,!xFrame!>>C:\RenameOutput.csv 
```

**更新：**

要获取媒体文件信息，我们必须使用第 3 方工具。如

1.  [ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)
2.  [媒体信息](http://mediainfo.sourceforge.net/en)
3.  [FFmpeg](http://ffmpeg.org/ffmpeg.html)

基于对 ExifTool 和 MediaInfo 的快速浏览，我更喜欢 MediaInfo，因为它更一致的媒体文件 Duration 输出格式。如何解析信息的示例。

```
for /f "tokens=2,*" %X in ('mediainfo file.avi ^| find "Duration "') do @echo %Y 
```

更新 2：

在答案中添加了 exiftool 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:52:47.680

## 这是对我们长评论流的回应。

改变这个

```
set "xName=%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA" 
```

进入这个

```
set "xHour=!xDateWritten:~11,2!"
if "!xDateWritten:~17,2!"=="PM" set /a "xHour+=12"
set "xName=%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xHour!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA" 
```

* * *

完整脚本（添加评论）

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Create Empty Folder
rd /Q "%Temp%\Temp" 2>nul & mkdir "%Temp%\Temp"

:: Loop through Folders
pushd "xPath=c:\processing"
for /d %%D in (*) do call :Process "%%~fD"
popd
goto End

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Process <Parent>
:: Folder Name
set "xFolder=%~nx1"

:: Set Sub Folder
if not exist "%~1\VIDEO\" goto :eof
pushd "%~1\VIDEO"

:: Loop through Videos
for /f "delims=" %%A in ('dir *.avi /b') do if exist "%%~fA" (
    rem Retrieve the file time stamp
    set "xDateWritten=%%~tA"
    rem Retrieve the Seconds using RoboCopy
    set "xDateGMT=0000/00/00 00:00:00"
    for /f "tokens=1,2" %%X in ('robocopy . "%Temp%\Temp" "%%~nxA" /TS /FP /NS /NC /NP /NJH /NJS /NDL /L') do set "xDateGMT=%%X %%Y"
    rem Retrieve the Video frame information
    set "xFrame=00,00000"
    for /f %%X in ('exiftool -p "$Framerate,$Framecount" "%%~fA"') do set "xFrame=%%~X"
    rem Retrieve the file size
    set "xSize=%%~zA"
    rem Adjust to 24 hours
    set "xHour=!xDateWritten:~11,2!"
    if "!xDateWritten:~17,2!"=="PM" set /a "xHour+=12"
    rem Format = FF-FF-YYYYMMDD-HHh-MMm-SSs-FF-FF.ext
    set "xName=%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xHour!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA"
    rem Display, Rename, and Save
    echo !xName!
    ren "%%~fA" "!xName!"
    echo !xName!,!xSize!,!xFrame!>>C:\RenameOutput.csv
)
popd
goto :eof

:End
endlocal
pause 
```

# travis-ci - 为 Travis CI 加密环境变量时获取公钥时出错

> ID：14072266
> 
> 赞同：2
> 
> 时间：2012-12-28T16:05:43.180
> 
> 标签：travis-ci

我正在使用，我得到了与[将秘密环境变量添加到 Travis CI](https://stackoverflow.com/q/12724139/341929)`travis (0.0.6)`中描述的相同的错误：

> [bdu-padrino (master)]$ travis 加密 mariusbutuc/bdu-padrino MY_SECRET_ENV=super_secret
> 
> 即将为 'mariusbutuc/bdu-padrino' 加密 'MY_SECRET_ENV=super_secret'
> 
> 获取公钥时出错，请检查您是否输入了正确的 slug

即使在[编辑`lib/travis/cli/secure_key.rb`](https://github.com/travis-ci/travis-cli/pull/2)后

*   使用**https**或 http URL 检索公钥，
*   是否跳过**SSL 证书验证**。

我还能检查什么以确保加密有效？

* * *

同样在浏览器中，[travis-ci.org/mariusbutuc/bdu-padrino.json](https://travis-ci.org/mariusbutuc/bdu-padrino.json)显示*Loading* forever...

预计会在这里呈现什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:25:33.387

版本`0.0.6`- 或之前的任何版本 -`0.0.10`失败，因为[密钥的端点已更改](https://github.com/travis-ci/travis-cli/commit/0cea3baf8d754cd8c7723c5b17143655cb949612 "为密钥使用新端点")。

要修复它，只需更新`lib/travis/cli/secure_key.rb`到[version`0.0.10`](https://github.com/travis-ci/travis-cli/blob/0cea3baf8d754cd8c7723c5b17143655cb949612/lib/travis/cli/secure_key.rb "lib/travis/cli/secure_key.rb")中的那个，
或者更新 gem。

# php - 按钮多次调用ajax函数

> ID：14072269
> 
> 赞同：1
> 
> 时间：2012-12-28T16:05:57.530
> 
> 标签：php, html, ajax, forms, xmlhttprequest

*快速笔记。我没有使用 jQuery，所以不建议这样做。*

当按下具有 onclick="ajaxfunction();" 的按钮时 我收到警告说“AJAX 调用期间出错。请重试”，然后我收到警告说成功，两次：S ... 为什么会发生这种情况？

我不明白为什么会这样，因为它调用错误，然后转到 if 语句的另一部分......

提前致谢！

```
<script>

    function getXMLObject()  //XML OBJECT
    {
       var xmlHttp = false;
       try {
         xmlHttp = new ActiveXObject("Msxml2.XMLHTTP")  // For Old Microsoft Browsers
       }
       catch (e) {
         try {
           xmlHttp = new ActiveXObject("Microsoft.XMLHTTP")  // For Microsoft IE 6.0+
         }
         catch (e2) {
           xmlHttp = false   // No Browser accepts the XMLHTTP Object then false
         }
       }
       if (!xmlHttp && typeof XMLHttpRequest != 'undefined') {
         xmlHttp = new XMLHttpRequest();        //For Mozilla, Opera Browsers
       }
       return xmlHttp;  // Mandatory Statement returning the ajax object created
    }

    var xmlhttp = new getXMLObject();   //xmlhttp holds the ajax object
    var url="insertProduct.php";

    function ajaxFunction() {
      var getdate = new Date();  //Used to prevent caching during ajax call
      if(xmlhttp) {
        var name = document.getElementById("name");
        var code = document.getElementById("code");
        xmlhttp.open("POST",url,true); //calling insertProduct.php using POST method
        xmlhttp.onreadystatechange  = handleServerResponse;
        xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xmlhttp.send("name=" + encodeURIComponent(name.value) + "&code=" + encodeURIComponent(code.value)); //Posting to PHP File

      }
    }

    function handleServerResponse() {
       if (xmlhttp.readyState == 4 || xmlhttp.readyState=="complete") {
           alert("Success");
           document.getElementById("message").innerHTML=xmlhttp.responseText; //Update the HTML Form element 
       }
       else {
            alert("Error during AJAX call. Please try again " + xmlhttp.status);
       }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:49:08.957

完成任务后可以调用`return;`

喜欢下面。

```
function handleServerResponse() {
       if (xmlhttp.readyState == 4 || xmlhttp.readyState=="complete") {
           alert("Success");
           document.getElementById("message").innerHTML=xmlhttp.responseText; 
           return; 
       }
       else {
            alert("Error during AJAX call. Please try again " + xmlhttp.status);
            return;
       }
    } 
```

我希望这对你有帮助。

# jquery - 如何从控制器的 Action 方法返回的 JSON 对象填充 jQuery 数据表列？

> ID：14072272
> 
> 赞同：0
> 
> 时间：2012-12-28T16:06:11.060
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-plugins, datatables

我正在使用 jQuery 数据表插件，其中一列是选择框。如果我分配一些静态值，例如如下所示的 True/False，它会呈现良好。

```
"aoColumns": [{}, {}, {}, {},
        {
            type: 'select',
            onblur: 'submit',
            data: "{'True':'True', 'False':'False'}"
        }] 
```

但我需要从控制器的操作方法返回的 JSON 对象中获取选择框的值。这是我的操作方法。关于如何将数据填充到选择框中的任何想法？谢谢你的帮助。

```
public ActionResult GetAllFields(int connId)
    {
        Conn conn = GetConn(connId);
        List<string> fields = conn.GetAllFields();

        return Json(new Result()
        {
            Result = Action.Successful,
            Data = fields                    
        }, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:37:10.090

我会[`mRender`](http://www.datatables.net/usage/columns)用来显示加载/填充下拉列表内容的函数的结果。

**来自 datatables.net 的示例：**

```
// Use as a function to create a link from the data source
$(document).ready( function() {
  var oTable = $('#example').dataTable( {
    "aoColumnDefs": [ {
      "aTargets": [ 0 ],
      "mData": "download_link",
      "mRender": function ( data, type, full ) {
        return '<a href="'+data+'">Download</a>';
      }
    } ]
  } );
} ); 
```

根据下拉列表的内容，您可能还需要考虑发布到此[问题](https://stackoverflow.com/q/4515924/275643)[的解决方案 user403295](https://stackoverflow.com/a/4551348/275643)。

# r - 组织 R 在函数和子函数中的工作

> ID：14072275
> 
> 赞同：0
> 
> 时间：2012-12-28T16:06:25.717
> 
> 标签：r, function, matlab

我的目标是更好地组织 R 代码完成的工作。

特别是，将我编写的 R 代码拆分为不同的 R 文件可能很有用，也许每个 R 文件完成不同的任务。我想到了我们可以在 Matlab 中使用不同的 M 文件做什么，我们可以轻松地直接从主代码调用用不同 M 文件编写的函数。

以函数的形式编写这个 R 文件有用吗？我们如何在主代码中调用这些 R 文件/函数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:33:09.763

您可以使用 source("filename.R") 将文件包含在主脚本中。

我不确定是否有一个包含整个目录的现成函数，但是使用 list.files() 编写然后为每个文件名动态调用 source 很简单。例如，您还可以过滤文件以仅列出 *.R。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:42:48.153

您的方法可能效果很好。我建议将代码包装在一个函数中，并将一个 R 文件用于一个 R 函数。

查看旨在帮助组织 R 代码的包[devtools](https://github.com/hadley/devtools)和[ProjectTemplate](http://projecttemplate.net/getting_started.html)可能会很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T22:22:38.390

除非您打算编写 R 包，否则您应该重新考虑您的组织。R**不是**Matlab，谢天谢地！您可以将任意数量的功能放入一个文件中，并使用 `source foo.r`. 如果您正在编写通用函数的集合并且不想构建包，那么这确实是更简洁的方法。
作为一个侧面的想法，考虑通过添加更多输入参数来使您的一些工具更加灵活。您可能会发现您实际上并不需要这么多单独的函数/文件。举个简单的例子，如果你有一些 function `do_it_double`， another`do_it_integer`和 another `do_it_character`，所有这些基本上都做同样的事情，只需将它们合并为一个`do_it_all(x,y,datatype='double')` 并根据需要覆盖默认数据类型。（我知道这可以通过内部输入验证来完成。我只是举个例子）

# c++ - 函数原型

> ID：14072283
> 
> 赞同：1
> 
> 时间：2012-12-28T16:06:49.450
> 
> 标签：c++, function

我的老师说[A]是正确的答案，但为什么不是[C]。选项 [B] 作为原型有什么问题。选项 [B] 对我来说看起来非常好

> 以下哪个函数原型是完全可以接受的？
> 
> [一种]。 `int Function(int Tmp = Show());`
> 
> [乙]。 `float Function(int Tmp = Show(int, float));`
> 
> [C]。A 和 B 都可以。
> 
> [D]。 `float = Show(int, float) Function(Tmp);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:15:02.587

```
float Function(int Tmp = Show(int, float)); 
```

这定义了一个被调用的函数，该函数`Function`返回一个`float`并接受一个被`int`调用的参数`Tmp`。被`Tmp`赋予默认值，但默认值是无效的部分。什么是价值`Show(int, float)`？它似乎想要调用一个名为`Show`（或构造一个类型的临时对象`Show`）的函数，传递`int`和`float`作为参数。但是`int`and`float`不是函数的有效参数。

事实上，我认为只有少数几个地方可以`Show(int, float)`产生 C++ 语法（不使用预处理器）。首先是作为函数声明的一部分`Show`。例如：

```
int Show(int, float); 
```

其次是，如果`Show`是一个类型，给出一个函数类型。例如在：

```
foo<Show(int,float)>(); 
```

可能还有其他一些类似的情况，它们都没有真正调用名为`Show`.

# django - route53 裸域未到达亚马逊弹性负载均衡器

> ID：14072286
> 
> 赞同：3
> 
> 时间：2012-12-28T16:07:05.673
> 
> 标签：django, apache, dns, amazon-route53

我目前正在将 route53 用于指向同一网站的 2 个域。

假设它们是**www.example.com**和**www.example.com.xx**，我创建了 2 个托管区域并维护了默认创建的配置。因此，最初我在每个托管区域中都有**NS**和**SOA的条目。**

我的 EC2 实例位于 Elastic Load Balancer 之后，因此我的第一步是为两个域及其裸域创建别名，具有以下场景：

> **www.example.com**
> 
> 名称类型值
> example.com。NS 生成值
> example.com。SOA 产生的价值
> example.com。我的 ELB
> *.example.com 的别名。我的 ELB
> www.example.com 的别名。我的 ELB 的别名
> 
> **www.example.com.xx**
> 
> 名称类型值
> example.com.xx。NS 生成的值
> example.com.xx。SOA 生成值
> example.com.xx。我的 ELB
> *.example.com.xx 的别名。我的 ELB
> www.example.com.xx 的别名。我的 ELB 的别名

两个域都指向同一个 ELB，其中 Apache 配置为**example.com**。**然后，如果 request.get_host 包含.com.xx**子字符串，我的 Django 应用程序子域中间件将重定向到 example.com(301) 。

它适用于 www.example.com 和 example.com 以及 www.example.com.xx，**我的问题是**example.com.br 永远不会到达我的服务器。

我已经尝试创建一个 PTR 条目 example.com.br -> www.example.com.br，但这不是解决方案。

任何人都可以指出我的这个裸域的 DNS 配置失败了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:31:46.477

首先让我们担心 example.com.br。[www.example.com.br 我们稍后会采取]

您是否对您的域名注册商进行了更改？以提供与亚马逊一样的 DNS 服务器？当你这样做时你得到什么输出：nslookup example.com.br

还有 ping example.com.br 的输出是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:11:01.763

昨天晚上，我能够正确重定向我的裸域，这是我的巴西提供商与注册商打交道的一个错误。实际上，我只是把 DNS 表的控制权还给了他们，然后拿走了（还给了 route53）。

无论如何，自从我迁移以来，它们就被用作连接注册商的桥梁。现在我直接与registro.br打交道，问题就消失了。

# php - 从 2 个表中选择带有 mysql_fetch_assoc 的查询

> ID：14072290
> 
> 赞同：-3
> 
> 时间：2012-12-28T16:07:16.517
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

这有什么问题？前 2 个选择工作正常，其他 2 个返回此错误：

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

```
<?php 
$result=mysql_query("SELECT count(*) as total from urls WHERE username = '$username' AND approved = 'yes' ");
  $data=mysql_fetch_assoc($result);
echo $data['total'];?></td>

 <td><?php 
$result2=mysql_query("SELECT count(*) as total2 from urls WHERE username = '$username' AND approved = 'no' ");
  $data2=mysql_fetch_assoc($result2);
echo $data2['total2'];?></td>

  <td><?php 
$result3=mysql_query("SELECT count(*) as total3 from buy WHERE username = '$username' AND status = 'active' ");
  $data=mysql_fetch_assoc($result3);
echo $data['total3'];?></td>

  <td><?php 
$result4=mysql_query("SELECT count(*) as total4 from buy WHERE username = '$username' AND status = 'complete' ");
 $data=mysql_fetch_assoc($result4);
echo $data['total4'];?></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:11:38.640

您可以在一个查询中执行此操作，如下所示：

```
SELECT
  SUM(CASE WHEN approved = 'yes'      THEN 1 ELSE 0 END) AS Total1,
  SUM(CASE WHEN approved = 'no'       THEN 1 ELSE 0 END) AS Total2,
  SUM(CASE WHEN status   = 'active'   THEN 1 ELSE 0 END) AS Total3,
  SUM(CASE WHEN status   = 'complete' THEN 1 ELSE 0 END) AS Total4
FROM urls 
WHERE username = '$username'; 
```

# machine-learning - 如何使用 scikit 进行预测？

> ID：14072291
> 
> 赞同：0
> 
> 时间：2012-12-28T16:07:20.437
> 
> 标签：machine-learning, scikit-learn

我已经使用 fit 方法训练了一个估计器，称为 clf 并将模型保存到磁盘。下次运行该程序，将从磁盘加载 clf。

我的问题是：

1.  如何预测保存在磁盘上的样本？我的意思是，如何加载和预测？
2.  预测后如何获取样本标签而不是标签整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:44:50.363

1.  如何预测保存在磁盘上的样本？我的意思是，如何加载和预测？

    您必须对新样本使用与传递给`fit`方法的样本相同的数组表示。如果要预测单个样本，则输入必须是具有 shape 的 2D numpy 数组`(1, n_features)`。

    在 HDD 上读取原始文件并将其转换为适合分类器的 numpy 数组表示的方式是一个特定领域的问题：这取决于您是否尝试对文本文件、jpeg 文件、视频文件中的帧、数据库中的行进行分类, syslog 监控服务的日志行...

2.  预测后如何获取样本标签而不是标签整数？

    只需保留标签名称列表，并确保拟合时用作目标值的整数在范围内`[0, n_classes)`。例如`['spam', 'ham']`，如果您在该范围内有预测，`[0, 1]`那么您可以执行以下操作：

    ```
    new_samples = # 2D array with shape (n_samples, n_features)
    label_names = ['ham', 'spam']
    predictions = [label_names[pred] for pred in clf.predict(new_samples)] 
    ```

# objective-c - 故事板准备序列+传递数据

> ID：14072296
> 
> 赞同：0
> 
> 时间：2012-12-28T16:07:39.220
> 
> 标签：objective-c, xcode, nsmutablearray, uilabel, uistoryboard

我有一个连接到表格视图单元的详细视图控制器。我有一个数据模型。它是一个`NSObject`并且拥有`NSMutableArray`我需要的所有属性。

我将一个标签连接到一个`@property`并命名它`questionLabel`。出于某种原因，当我推到详细视图时，它没有显示我在数据模型中为`NSMutableArray`.

起初我认为 segue 不起作用，但是当我尝试更改导航栏标题时，当我从`NSMutableArray`.

有人知道我的标签做错了什么吗？

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"pushDetail"])
    {
        // Create an instance of our DetailViewController
        DetailQuestionViewController *DQV = [[DetailQuestionViewController alloc] init];

        NSIndexPath *path = [self.tableView indexPathForSelectedRow];

        // Setting DQV to the destinationViewController of the seque
        DQV = [segue destinationViewController];

        Question *selectedQuestion = [self.myQuestionList questionAtIndex:path.row];

        DQV.questionLabel.text = [selectedQuestion questionName];
        DQV.navigationItem.title = [selectedQuestion questionRowName];

    }

} 
```

* * *

# 更新（对于：adambinsz）

## 表视图

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"pushDetail"])
    {
        // Create an instance of our DetailViewController
        DetailQuestionViewController *DQV = [[DetailQuestionViewController alloc] init];

        // Setting DQV to the destinationViewController of the seque
        DQV = [segue destinationViewController];

        NSIndexPath *path = [self.tableView indexPathForSelectedRow];
        Question *selectedQuestion = [self.myQuestionList questionAtIndex:path.row];

        DQV.detailItem = selectedQuestion;

    }

} 
```

## 详细视图

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        Question *theQuestion = (Question *)self.detailItem;
        self.questionLabel.text = theQuestion.questionName;

        NSLog(@"The Question's questionName is %@", theQuestion.questionName);

     }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
} 
```

我认为它可能不起作用的原因是因为 if 语句`self.detailItem`没有正确检查它。

该方法被调用而不是`detailItem`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:21:23.827

当您尝试设置其文本时，您的标签可能尚未创建。我会在创建视图控制器时创建一个`selectedQuestion`实例变量并设置它。`DetailQuestionViewController`像这样的东西：

```
// Create an instance of our DetailViewController
DetailQuestionViewController *DQV = [[DetailQuestionViewController alloc] init];

NSIndexPath *path = [self.tableView indexPathForSelectedRow];

// Setting DQV to the destinationViewController of the seque
DQV = [segue destinationViewController];

DQV.selectedQuestion = [self.myQuestionList questionAtIndex:path.row]; 
```

在 DetailQuestionViewController 的`viewDidLoad`方法中，使用以下方法设置标签的文本：

```
self.questionLabel.text = [selectedQuestion questionName];
self.navigationItem.title = [selectedQuestion questionRowName]; 
```

# html - 在其中我不想执行链接我有一个包含在 a href 中的表格，因此如果他们单击表格中的任何位置，将执行一个链接。我的问题是该表还有一个选择下拉列表，如果他们单击选择元素，我不希望链接执行。我尝试在选择之前结束 a href 并在选择之后重新开始，但这不起作用。 [<tr&gt< h1="">> ID：14072301
> 
> 赞同：0
> 
> 时间：2012-12-28T16:08:05.707
> 
> 标签：html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:19:18.963

将整个表格放入 href 没有任何意义。为什么不将表格的标题部分放入 href 中。

或者

只需通过单击转到您的 url 进行编辑来添加简单的编辑按钮。

HTML：

```
<button id='button-id'>Edit</button> 
```

jQuery代码：

```
$('#button-id').click(function() { window.location.pathname = '/yoururl'; }); 
```</tr&gt<>](#)

# android - sqlite，android中的字符串查询

> ID：14072308
> 
> 赞同：0
> 
> 时间：2012-12-28T16:08:44.143
> 
> 标签：android, sqlite

我的问题与 android 的 sqlite 语法有关。我有一个查询，我想在其中获取一些具有比给定级别更大的键值的数据。例如，给定的 id 是 134.2，将获取的记录类似于 134.2.5 或 134.2.98。问题是我在语法中丢失了一些东西，结果我什么也得不到。这是我的代码。先感谢您。

我希望这会有所帮助。从 FATHER_ID= FID+"."+"%"+"." 的任务中选择 *

```
return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER, KEY_TODAY, KEY_NOTIFY,KEY_NUMBER_OF_DAYS, KEY_NOTICE_CHECK }, KEY_FATHER + " LIKE " + "'"+ id+"'"+"'"+".'"+"'" +"%'"+"'"+".'", null, null, null, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:14:09.407

您构建关键比较表达式的方式似乎过于复杂；它也应该是一个查询参数，所以你不必担心引用这么多：

```
return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER, KEY_TODAY, KEY_NOTIFY,KEY_NUMBER_OF_DAYS, KEY_NOTICE_CHECK }, KEY_FATHER + " LIKE ?", new String[] { id + ".%" }, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:13:35.490

尝试更换

```
+ " LIKE " + "'"+ id+"'"+"'"+".'"+"'" +"%'"+"'"+".'" 
```

和

```
+ " LIKE " + "'" + id + ".%'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:15:49.163

也许你想要这个：

```
mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER, KEY_TODAY, KEY_NOTIFY,KEY_NUMBER_OF_DAYS, KEY_NOTICE_CHECK },KEY_FATHER + " LIKE " + "'"+ id+".%'", null, null, null, null); 
```

# c# - 使用 Rx 无限重复异常

> ID：14072311
> 
> 赞同：2
> 
> 时间：2012-12-28T16:08:56.897
> 
> 标签：c#, system.reactive, unhandled-exception

目前我的应用程序捕获未处理的异常如下：

```
AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
Application.Current.DispatcherUnhandledException += Current_DispatcherUnhandledException;
TaskScheduler.UnobservedTaskException += TaskScheduler_UnobservedTaskException; 
```

但是，当异常发生时（例如）：

```
 TimeSpan toExecute = AnyMethod();
        Observable.Timer(toExecute).Take(1).Subscribe((r) =>
        {
            Trace.WriteLine("Subscribe");
            throw new Exception(); // simulation..
        }); 
```

异常不断重复自身（在调试中）。尽管处于发布模式或在 Visual Studio 之外，应用程序已完成（AppDomain.CurrentDomain.UnhandledException 的标准行为
如何避免或更改此行为？

* * *

我的目标是只运行一次代码。是否发生异常独立。要求之一是它由计时器触发。别的东西..如果有异常，它应该由 DispatcherUnhandledException 或 UnobservedTaskException 或类似的处理（这使我无法为每个订阅和应用程序的关闭编写一个 try catch）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:35:35.913

您的代码触发器`AppDomain.CurrentDomain.UnhandledException`，它终止 .NET 2.0 及更高版本的应用程序执行。如果您在 Visual Studio 中调试该代码，您会反复收到未处理的异常通知。

> 在 .NET Framework 1.0 和 1.1 版中，发生在主应用程序线程以外的线程中的未处理异常会被运行时捕获，因此不会导致应用程序终止。因此，可能会在应用程序终止的情况下引发 UnhandledException 事件。在 .NET Framework 2.0 版中，删除了对子线程中未处理异常的支持，因为这种静默故障的累积影响包括性能下降、数据损坏和锁定，所有这些都难以调试。有关更多信息，包括运行时不终止的情况列表，请参阅托管线程中的异常。

请参阅[AppDomain.UnhandledException Event](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception%28v=vs.90%29.aspx)的文档。

对于那些好奇的人，这里是堆栈跟踪（适用于 .NET 3.5 和 Reactive Extensions 版本 1.0.10621.0）：

```
System.Exception: Exception of type 'System.Exception' was thrown.

   at yournamespace.MainWindow.<Button_Click>b__0(Int64 r) in path\MainWindow.xaml.cs:line XX
   at System.Reactive.AnonymousObserver`1.Next(T value)
   at System.Reactive.AbstractObserver`1.OnNext(T value)
   at System.Reactive.AnonymousObservable`1.AutoDetachObserver.Next(T value)
   at System.Reactive.AbstractObserver`1.OnNext(T value)
   at System.Reactive.Linq.Observable.<>c__DisplayClass2ff`1.<>c__DisplayClass301.<Take>b__2fe(TSource x)
   at System.Reactive.AnonymousObserver`1.Next(T value)
   at System.Reactive.AbstractObserver`1.OnNext(T value)
   at System.Reactive.AnonymousObservable`1.AutoDetachObserver.Next(T value)
   at System.Reactive.AbstractObserver`1.OnNext(T value)
   at System.Reactive.Linq.Observable.<>c__DisplayClass35b.<>c__DisplayClass35d.<Timer>b__35a()
   at System.Reactive.Concurrency.Scheduler.Invoke(IScheduler scheduler, Action action)
   at System.Reactive.Concurrency.ThreadPoolScheduler.<>c__DisplayClass5`1.<Schedule>b__3(Object _)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading._TimerCallback.PerformTimerCallback(Object state) 
```

# javascript - 在javascript中替换'\ n'

> ID：14072313
> 
> 赞同：28
> 
> 时间：2012-12-28T16:08:58.863
> 
> 标签：javascript, replace

我正在尝试使用以下方法在 JavaScript 中进行替换：

```
r = "I\nam\nhere";
s = r.replace("\n"," "); 
```

但不是给我

> 我在这里

作为 的值`s`，它返回相同。

问题出在哪里？？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-28T16:56:21.297

正如其他人所说，您的正则表达式缺少全局标志。正确的表达方式应该和其他人给你的一样。

```
var r = "I\nam\nhere";
var s = r.replace(/\n/g,' '); 
```

我想指出与一开始发生的事情的不同之处。您正在使用以下语句

```
var r = "I\nam\nhere";
var s = r.replace("\n"," "); 
```

这些陈述确实是正确的，并将替换字符 \n 的一个实例。它使用不同的算法。当给出一个字符串来替换它时，它将寻找第一次出现并简单地用作为第二个参数给出的字符串替换它。当使用正则表达式时，我们不只是寻找要匹配的字符，我们可以编写复杂的匹配语法，如果找到一个或多个匹配，那么它将被替换。更多关于 JavaScript 正则表达式的信息可以在这里[w3schools](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)找到。

例如，您制作的方法可以更通用，以解析来自几种不同类型文件的输入。由于操作系统的差异，在需要换行的情况下，文件带有 \n 或 \r 是很常见的。为了能够同时处理您的代码，可以使用正则表达式的某些功能重写。

```
var r = "I\ram\nhere";
var s = r.replace(/[\n\r]/g,' '); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-28T16:10:49.430

采用`s = r.replace(/\\n/g," ");`

[获取参考](http://www.textfixer.com/tutorials/javascript-line-breaks.php)：

> javascript 替换代码中的“g”代表“贪婪”，这意味着如果可能，替换应该不止一次发生

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-28T16:12:16.660

问题是您需要使用该`g`标志来替换*所有*匹配项，因为默认情况下，`replace()`仅对找到的第一个匹配项起作用：

```
var r = "I\nam\nhere",
    s = r.replace(/\n/g,' '); 
```

但是，要使用该`g`标志，您必须使用正则表达式方法。

顺便说一句，声明变量时请使用`var`，否则你创建的变量都是全局的，这可能会导致以后出现问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-28T16:13:28.610

`.replace()`需要全局匹配标志：

```
s = r.replace(/\n/g, " "); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-05T11:18:40.767

它对我有用：

```
var s = r.split('\\n').join(' '); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-13T16:49:58.660

您可以使用：

```
var s = r.replace(/\n/g,' ').replace(/\r/g,' '); 
```

因为不同的 SO 使用不同的方式设置“新行”，例如：Mac Unix Windows，在此之后，您可以使用其他功能来规范空白。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-29T10:35:51.010

只是`\\\n`用来替换它会工作。

```
r.replace("\\\n"," "); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-12T18:59:41.343

[这里](https://www.textfixer.com/tutorials/javascript-line-breaks.php)的解决方案对我来说非常完美：

```
r.replace(/=(\r\n|\n|\r)/gm," "); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-14T15:16:34.083

`replaceAll()`相对较新，并非所有浏览器都支持：

```
r = "I\nam\nhere";
s = r.replaceAll("\n"," "); 
```

# java - 使用 spring 将枚举的值注入到属性中

> ID：14072314
> 
> 赞同：5
> 
> 时间：2012-12-28T16:09:04.570
> 
> 标签：java, spring

我有一个类似于下面的枚举

```
public enum MyEnum {
ABC("some string"), 
DEF("some string"), 
GHI("another string");

String value;

private MyEnum(String value) {
    this.value = value;
}

public String value() {
    return this.value;
}} 
```

而且我想使用枚举的值作为键而不是枚举本身来制作 util:map。所以地图看起来像这样：

```
"some string" -> "mapped output 1"
"another string" -> "mapped output 2" 
```

我知道我可以使用 util:constant 来获取枚举，但我需要枚举所代表的值。

所以我现在的配置文件看起来像这样：

```
<util:constant id="firstKey" static-field="package.MyEnum.ABC"/>
<util:constant id="secondKey" static-field="package.MyEnum.GHI" />

<util:map id="myMap">
    <entry key-ref="firstKey" value="mapped output 1" />
    <entry key-ref="secondKey" value="mapped output 2" /></util:map> 
```

有没有办法我可以获得 .value() 甚至可以访问 value 属性以将其用作键？

我尝试将密钥类型声明为字符串，希望 spring 能解决它，但它似乎只是忽略了这一点。

使用 spring 2.5.1，我无法修改枚举

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T17:02:51.657

如果您无法访问表达式语言，则必须回退到显式`MethodInvokingFactoryBean`

```
<bean id="firstKey" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
  <property name="targetObject"><util:constant static-field="package.MyEnum.ABC"/></property>
  <property name="targetMethod" value="value" />
</bean> 
```

您可以使用抽象的父 bean 定义稍微缩短重复的 XML。

```
<bean name="enumValue" abstract="true"
      class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
  <property name="targetMethod" value="value" />
</bean>

<bean id="firstKey" parent="enumValue">
  <property name="targetObject"><util:constant static-field="package.MyEnum.ABC"/></property>
</bean> 
```

您也可以跳过`MethodInvokingFactoryBean`并使用

```
<util:constant id="MyEnum_ABC" static-field="package.MyEnum.ABC" />
<bean id="firstKey" factory-bean="MyEnum_ABC" factory-method="value" /> 
```

但这意味着为每个枚举常量以及它们的 声明单独的顶级 bean `value()`，而使用 MIFB 允许您使用匿名内部 bean。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T16:36:35.537

下面是如何获取注入的值，下面是spring 2.5中的spring配置。

```
<bean id="abcEnum" class="com.ex.springbasicex.enums.MyEnum"   factory-method="valueOf">
    <constructor-arg>
        <value>ABC</value>
    </constructor-arg>
</bean>

<bean id="defEnum" class="com.ex.springbasicex.enums.MyEnum" factory-method="valueOf">
    <constructor-arg>
        <value>DEF</value>
    </constructor-arg>
</bean>

<bean id="abcString" class="java.lang.String" factory-method="valueOf">
    <constructor-arg>
        <ref bean="abcEnum"></ref>
    </constructor-arg>
</bean>
<bean id="defString" class="java.lang.String" factory-method="valueOf">
    <constructor-arg>
        <ref bean="defEnum"></ref>
    </constructor-arg>
</bean>

<util:map id="myMap" map-class="java.util.HashMap" key-type="java.lang.String" value-type="java.lang.String">
    <entry key-ref="abcString" value="mapped output 1"  />
    <entry key-ref="defString" value="mapped output 2" />
</util:map> 
```

为了让它工作，你需要在你的枚举上使用 toString 方法。

```
public enum MyEnum {

ABC("some string a"), 
DEF("some string b"), 
GHI("another string");

String value;

private MyEnum(String value) {
    this.value = value;
}

public String value() {
    return this.value;
}

public String toString() {
    return this.value;
}
} 
```

# opengl - 使用 3D 矢量和角度在 OpenGL 中旋转对象

> ID：14072316
> 
> 赞同：1
> 
> 时间：2012-12-28T16:09:18.050
> 
> 标签：opengl

我在 OpenGL 程序中遇到对象的方向问题，我无法根据 3D 矢量和角度或 4D 矢量计算 x、y、z 的旋转。我正在使用 c++。

我有：

```
Vector3f myVector;
float angle;    
float rotx;
float roty;    
float rotz;

//i need smomething like

doSomething(a,angle,&rotx,&roty,&rotz);    
glRotatef(rotx,1.0,0,0);    
glRotatef(roty,0,1.0,0);    
glRotatef(rotz,0,0,1.0);

// draw object 
```

“myVector”是 3d 空间中的向量。我想在矢量方向旋转对象。“角度”是对象围绕向量的旋转。“rotx,roty,rotz”是局部变量。如何计算 rotx,roty,royz 来做到这一点？

[http://en.wikipedia.org/wiki/File:Euler_AxisAngle.png](http://en.wikipedia.org/wiki/File:Euler_AxisAngle.png)

在链接上的图片中，我的对象朝向“x”的方向，我想将它朝向“e”的方向，“O”是我的“角度”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:45:06.927

> 如何计算 rotx,roty,royz 来做到这一点？

您的问题没有唯一的解决方案。对于每个目标方向，有 6 种不同的方式以欧拉角表示。

明确表示旋转的唯一方法是旋转矩阵，或者它们的近亲，四元数。

glRotate 的参数非常接近四元数。实际上，轴参数是四元数的归一化 i,j,k 元素，而实际四元数部分是以弧度为单位的旋转角。

# azure - WaIISHost.exe.config 与 app.config 用于辅助角色配置

> ID：14072317
> 
> 赞同：6
> 
> 时间：2012-12-28T16:09:19.687
> 
> 标签：azure

帖子在描述如何最好地将 web.config 设置转换为 Azure 辅助角色时似乎存在冲突。有些帖子说您需要创建 WaIISHost.exe.config，将输出设置为始终，然后将相关的 web.config 信息复制到该文件。其他帖子描述了 app.config 而不是 WaIISHost.exe 的创建。哪个是对的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T17:22:38.117

这个问题的答案取决于您使用的 SDK 版本。首先，WaIISHost.exe.config 仅适用于 Web 角色（而非工作角色）。工作角色使用并继续使用 app.config 进行配置设置。我将假设您正在尝试在配置设置中配置 Web 角色的 RoleEntryPoint。

现在，对于 Web 角色：如果您使用最新的 SDK（撰写本文时为 1.8），您会发现创建 WaIISHost.exe.config 文件（并复制本地等）不再有效。最新的 SDK 发生了一些变化，它将不再提取这些值。对于早期版本的 SDK，这仍然是您的操作方式。对于最新版本（以及可能的下一个版本）1.8，您可以创建一个 app.config。当你这样做时，它实际上会在你的 bin 目录中创建一个文件，如“WebRoleProjectName.dll.config”。您不必自己手动创建此文件并“复制本地”。像往常一样简单地创建 app.config，你会发现你的 Web Role 中的 RoleEntryPoint 可以像这样配置得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:55:33.700

在您之前的[SO 帖子](https://stackoverflow.com/questions/14061838/how-to-publish-mvc-app-with-proxy-if-azure-does-not-use-same-web-config-as-my-lo/14072783#14072783)中，我建议您在混合在一起时需要花一些时间来了解 Windows Azure 网站和 Windows Azure 云服务。

像上面一样，您将 web 和 worker 角色混合在一起。WaIISHost.exe 是负责加载和运行您的 Web 角色 DLL 的 Windows Azure Web 角色主机进程。此过程与 Worker 角色无关，因为它甚至不存在于 Windows Azure Worker 角色中。此过程仅适用于 Web 角色。因此，您在“WaIISHost.exe.config vs. app.config for worker role config”上面的问题是无关紧要的。

App.config 配置与 Web 角色和工作角色一起使用，但是 web.config 仅与您的 Web 应用程序一起使用。因此，如果您只想配置角色，则可以使用 app.config（具有 web 和辅助角色）但是对于网站配置，您可以使用 web.config。

如果你只是用简单的文字写下你的最终目标，你肯定会得到关于如何做到这一点的确切帮助和建议。

# jquery - jQuery - mouseenter 适用于 chrome 但不适用于 firefox

> ID：14072321
> 
> 赞同：0
> 
> 时间：2012-12-28T16:09:38.737
> 
> 标签：jquery

我有一点 jQuery：

```
$('#list_cont').on('mouseenter', '.show_map', function() {
    $(this).next('.map_cont').stop().fadeIn(800);
}).on('mouseleave', '.show_map', function() {
    if (!$(this).next('.map_cont').is(':hover')) {
        $(this).next('.map_cont').delay(600).stop().fadeOut(800);
    }
});

$('#list_cont').on('mouseenter', '.show_map', function() {
    $(this).stop().show();
}).on('mouseleave', '.map_cont', function() {
    $(this).delay(600).stop().fadeOut(800);
}); 
```

它显示`.map_cont`在`.show_map`mouseenter 上，然后如果悬停在 上`.map_cont`，它不会淡出，直到光标离开`.map_cont`。

这适用于 chrome，但不适用于 Firefox。我不知道如何跨浏览器测试这种类型的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:12:12.057

由于`.map_cont`在 内部`#list_cont`，它确实如此。因此，您需要以这种方式定义您的函数：

```
$('.map_cont').on('mouseleave', '.show_map', function() {
    if (!$(this).next('.map_cont').is(':hover')) {
        $(this).next('.map_cont').delay(600).stop().fadeOut(800);
    }
}); 
```

# ios - 将 CADisplayLink.timestamp CFTimeInterval 转换为主机时间 (uint64)

> ID：14072322
> 
> 赞同：1
> 
> 时间：2012-12-28T16:09:40.370
> 
> 标签：ios, avfoundation, cadisplaylink

我收到来自 CADisplayLink 的回调。该链接在 CFTimeInterval 中有一个时间戳。如何将该时间戳转换为 uint64 中的主机时间？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-17T22:09:51.430

这是描述将马赫时间转换为秒的文档。 [https://developer.apple.com/library/ios/qa/qa1643/_index.html](https://developer.apple.com/library/ios/qa/qa1643/_index.html)

```
#include <mach/mach_time.h>
...

struct mach_timebase_info timeBaseInfo;
mach_timebase_info(&timeBaseInfo);

CGFloat clockFrequency = (CGFloat)timeBaseInfo.denom / (CGFloat)timeBaseInfo.numer;
clockFrequency *= 1000000000.0;

// clock frequency (for me) is 24000000 
```

因为 CGTimeInterval 以秒为单位，我们可以简单地这样做：

```
uint64_t displayLinkTime = displayLink.timeStamp * clockFrequency; 
```

# javascript - 更新面板的部分回发后，文件上传的文件名为空？

> ID：14072331
> 
> 赞同：0
> 
> 时间：2012-12-28T16:10:39.040
> 
> 标签：javascript, asp.net

我在更新面板中有一个文件上传。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
<Triggers>
    <asp:PostBackTrigger ControlID="SaveButton" />
</Triggers>
<ContentTemplate>
<cc1:TabContainer CssClass="visoft__tab_xpie7" runat="server" ID="tab" ActiveTabIndex="0" Width="100%" Font-Size="11px">
 <cc1:TabPanel runat="server" HeaderText="اطلاعات پایه" ID="TabPanel1">
     <ContentTemplate>
      <div class="row">
       <span style="width: 100px" class="rowtitle">تصویر </span>
        <asp:FileUpload ID="ImageFileUpload" runat="server"/>
        <asp:ImageButton ID="RemoveImageButton" runat="server" ImageUrl="~/images/delete.png" />
      </div>
      <div class="row">
       <span style="width: 100px" class="rowtitle">Category</span>
       <asp:DropDownList ID="CategoryDropDownList" runat="server" Width="200px" AutoPostBack="True" DataTextField="Name" DataValueField="ID" OnSelectedIndexChanged="CategoryDropDownList_SelectedIndexChanged" />
       <asp:RequiredFieldValidator ID="CategoryRFV" runat="server" ControlToValidate="CategoryDropDownList" ForeColor="Red" ValidationGroup="Save" ErrorMessage="مجموعه را انتخاب کنید." Text="*" />
      </div>
      <div class="row" style="height: 300px">
       <span style="width: 100px" class="rowtitle">توضیحات کامل</span>
       <editor:HtmlEditor Style="float: left" runat="server" Width="600px" ID="DescriptionHtmlEditor" />
       <asp:RequiredFieldValidator Text="*" ID="DescriptionRFV" runat="server" ControlToValidate="DescriptionHtmlEditor" ForeColor="Red" ValidationGroup="Save" ErrorMessage="توضیحات را وارد کنید ." />
       </div>
     </ContentTemplate>
    </cc1:TabPanel>
   </cc1:TabContainer> 
   <div class="row" style="text-align: center">
    <asp:Button ID="SaveButton" class="button" Width="100px" OnClick="SaveButton_Click" runat="server" ValidationGroup="Save" Text="ذخیره" />
   </div>
  </ContentTemplate>
  </asp:UpdatePanel> 
```

当我在更新面板的部分回发后尝试访问 FileUpload FileName 属性时，它是空的。

我想在 oncange 事件 witj javascrip 中获取上传面板的 Filenme，但我没有得到文件的完整路径。

```
 function FileChange()
   {
    var filename = document.getElementById('<%= FileNameUpload.ClientID  %>');
    var file = document.getElementById('fileupload');
    filename.value = file.value;
   } 
```

部分回发后如何获取文件上传的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:10:44.517

> 当我在更新面板的部分回发后尝试访问 FileUpload FileName 属性时，它是空的。

更新面板只需拦截常规表单提交并使用 xmlhttp 请求执行**完整的回发。**因此，最初对`input:file`元素所做的选择已在初始回发中提交，之后您将无法再阅读它。为了证明我在说什么，试着阅读最初回发的文件名，你会发现你能做到。

查看您的代码，您似乎也在尝试以`fileupload`编程方式设置元素的值。出于安全原因，这也是不可能的 - 您无法从 Javascript 访问用户的硬盘驱动器并决定用户应将哪个文件上传到您的网站。一旦用户选择了文件并提交了表单，选择就消失了；用户必须自己重新选择文件。

您可以尝试许多技巧来使用 UpdatePanels 来完成这项工作，但从长远来看，最干净的方法是使用 jQuery Ajax 来实现这一点，因为您可以完全控制提交的内容和不提交的内容以及何时提交。

我希望这有助于澄清为什么你的方法不起作用。

# php - php preg_grep 和变音符号/重音

> ID：14072333
> 
> 赞同：3
> 
> 时间：2012-12-28T16:10:46.370
> 
> 标签：php, regex, character-encoding, transliteration

我有一个由术语组成的数组，其中一些包含重音字符。我做一个这样的preg grep

```
$data= array('Napoléon','Café');
$result = preg_grep('~' . $input . '~i', $data); 
```

因此，如果用户输入“le”，我还希望匹配结果“Napoléon”，这不适用于 ablove 命令。

我做了一些搜索，发现这个功能可能是相关的

```
preg_match("/[\w\pL]/u",$var); 
```

我怎样才能将这些结合起来并使其发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:11:43.617

仅使用正则表达式模式是不可能的。这不是因为你不能告诉正则表达式引擎匹配所有的“e”和类似的东西。但是，可以首先对输入数据（数组和搜索输入）进行规范化，然后搜索规范化数据，但返回非规范化数据的结果。

在下面的示例中，我使用音译来进行这种规范化，我想这就是您要寻找的：

```
$data = ['Napoléon', 'Café'];

$result = array_translit_search('le', $data);
print_r($result);

$result = array_translit_search('leó', $data);
print_r($result); 
```

示例性输出是：

```
Array
(
    [0] => Napoléon
)
Array
(
    [0] => Napoléon
) 
```

如上所述，搜索函数本身相当简单，转写输入，执行`preg_grep`然后返回原始输入匹配：

```
/**
 * @param string $search
 * @param array $data
 * @return array
 */
function array_translit_search($search, array $data) {

    $transliterator = Transliterator::create('ASCII-Latin', Transliterator::REVERSE);
    $normalize      = function ($string) use ($transliterator) {

        return $transliterator->transliterate($string);
    };

    $dataTrans   = array_map($normalize, $data);
    $searchTrans = $normalize($search);
    $pattern     = sprintf('/%s/i', preg_quote($searchTrans));
    $result      = preg_grep($pattern, $dataTrans);
    return array_intersect_key($data, $result);
} 
```

此代码需要[`Transliterator`来自 Intl 扩展名](http://php.net/class.transliterator)，您可以将其替换为任何其他类似的音译或翻译功能。

顺便说一句，我不建议在`str_replace`这里使用。如果您需要回退到翻译表，请[`strtr`](http://php.net/strtr)改用。这就是你要找的。但我更喜欢一个自带翻译的库，特别是如果它是 Intl 库，你通常无法击败它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:50:14.677

你可以这样写：

```
$data = array('Napoléon','Café');
// do something with your input, but for testing purposes it will be simply as you wrote in your example
$input = 'le';

foreach($data as $var) {
  if (preg_match("/".str_replace(array("é"....), array("e"....), $input)."/i", str_replace(array("é"....), array("e"....), $var))) 
    //do something as there is a match
} 
```

实际上在这种情况下你甚至不需要正则表达式，简单`strpos`就足够了。

# sql - SQL Server 2005 - 对一个字段求 和，但仅适用于第二个字段的第一次出现

> ID：14072337
> 
> 赞同：1
> 
> 时间：2012-12-28T16:10:53.707
> 
> 标签：sql, sql-server, sum, conditional

### 平台：SQL Server 2005 Express

免责声明：我是 SQL 的新手，所以如果您乐于帮助解决一个可能非常简单的问题，那么如果您说话缓慢并使用小词，我不会被冒犯 :-)

我有一个表，我想对多行的内容求和。但是，我只想对不同列中第一次出现的文本求和一列。

```
Table schema for table 'tblMain'
fldOne {varchar(100)}    Example contents: “Dandelion“
fldTwo {varchar(8)}      Example contents: “01:00:00” (represents hh:mm:ss)
fldThree {numeric(10,0)} Example contents: “65” 
```

表格内容：

```
行号 fldOne fldTwo fldThree
------------------------------------------------
1 蒲公英 01:00:00 99
2 雏菊 02:15:00 88
3 蒲公英 00:45:00 77
4 蒲公英 00:30:00 10
5 蒲公英 00:15:00 200
6 玫瑰 01:30:00 55
7 雏菊 01:00:00 22
等等 ad nausium

```

如果我使用：

```
Select * from tblMain where fldTwo < ’05:00:00’ order by fldOne, fldTwo desc 
```

然后正确返回所有行，按 fldOne 排序，然后按 fldTwo 降序排序（尽管在我展示的示例数据中，所有数据都已按正确顺序排列！）

我想做的是得到每个*fldThree*的 SUM ，但只能从每个*fldOne*的第一次出现。

所以，求和我遇到的第一个蒲公英、黛西和玫瑰。例如 99+88+55

目前，我正在以编程方式执行此操作；从上面的 Select 语句返回一个 RecordSet，然后*MoveNext*遍历每个返回的行，如果我以前从未见过来自*fldOne的文本，则仅将**fldThree*添加到我的“总数”中。它可以工作，但是大多数 Select 查询返回超过 100k 行，所以它很慢（慢是一个相对术语——我的设置大约需要 50 秒）。

 *实际的 select 语句（从 1.5m 总行中选择大约 100k 行）在一秒钟内完成，这很好。当前的程序循环非常小且紧凑，只是通过 RecordSet 的循环数需要时间。当我打开记录集时，我正在使用 adOpenForwardOnly 和 adLockReadOnly。

这是一个基本上随着更多数据的添加而连续运行的例程，而且*fldTwo*的“时间”也会有所不同，所以我不能更具体地使用 Select 语句。

到目前为止，我用 SQL 本地完成的所有事情似乎都运行得很快，我希望我可以将逻辑（和工作）从我的程序中拿走，让 SQL 来承受压力。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:18:11.703

也许这个？

```
SELECT SUM(fldThree) as ExpectedSum
FROM
    (SELECT *, ROW_NUMBER() OVER (PARTITION BY fldOne ORDER BY fldTwo DSEC) Rn
        FROM tblMain) as A
WHERE Rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:18:47.377

解决这个问题的最好方法是使用窗口函数。这些使您可以枚举组中的行。但是，您需要一些方法来识别第一行。SQL 表本质上是无序的，因此您需要一个列来指定排序。这里有一些想法。

如果你有一个 id 列，它被定义为 an`identity`所以它是自动递增的：

```
select sum(fldThree)
from (select m.*,
            row_number() over (partition by fldOne order by id) as seqnum
      from tblMain m
     ) m
where seqnum = 1 
```

要获得任意行，您可以使用：

```
select sum(fldThree)
from (select m.*,
            row_number() over (partition by fldOne order by (select NULL as noorder)) as seqnum
      from tblMain m
     ) m
where seqnum = 1 
```

或者，如果 FldTwo 具有相反顺序的值：

```
select sum(fldThree)
from (select m.*,
            row_number() over (partition by fldOne order by FldTwo desc) as seqnum
      from tblMain m
     ) m
where seqnum = 1 
```*

# amazon-ec2 - ec2更新phpmyadmin显示旧版本

> ID：14072344
> 
> 赞同：1
> 
> 时间：2012-12-28T16:11:28.360
> 
> 标签：amazon-ec2, phpmyadmin, amazon

我肯定错过了什么。我最近在 Amazon EC2 上启动了 LAMP 设置。这工作正常，但我想将 phpMyAdmin 更新到最新版本。为此，我按照说明用新文件覆盖原始文件，同时保持 config.inc 文件原样。我做了所有这些并重置了 Apache 服务器。当我去 phpMyAdmin 它仍然是旧版本。如果我将文件夹重命名为其他名称，则当我使用新名称时会出现较新的版本（并且旧名称显然不再有效）但是当我将其重命名回 phpMyAdmin 时，它又是旧版本。这些文件在我正在寻找的地方不存在，所以是否有我可能丢失的东西或某处的文件副本？

我不是很了解服务器，但我会尝试提供您可能需要的任何其他信息。

提前致谢

ps 出于完全的挫败感，我最终也完全删除了原始文件，只添加了新文件以及原始 config.inc 文件的副本。与上面相同的情况正在发生。它们都位于 /var/www/html/phpmyadmin

***决定不再担心它，重新开始。显然，沿线某处出了点问题，所以不妨开始清理。***

# html - IE 无法在修改后的 Blogger 页面中重复背景图像

> ID：14072351
> 
> 赞同：0
> 
> 时间：2012-12-28T16:11:49.060
> 
> 标签：html, css

请多多包涵，因为我对手动编写网页还很陌生。我应用了我创建的网站中的 CSS 和 HTML 来为 Blogger 页面设置外观以匹配外观。在 FireFox 版本 17.0.1 中进行测试时，一切看起来都很好，但我的 div **#body_wrap**的背景在 IE 8 中重复多次失败。

我可能遗漏了一些简单的东西，但在确定原因方面我将不胜感激。我想知道它是否与 IE 相关，或者只是 FireFox 正在弥补缺陷的糟糕代码。

这是博客的链接：

[http://www.zenmotostore.blogspot.com/](http://www.zenmotostore.blogspot.com/)

这是所涉及的 div 容器的 CSS：

```
 #body_wrap {
    width: 1074px;
    margin: 0px auto;
    padding: 0px;
    position: relative;
    background: url(http://www.zenmotostore.com/images/repeat_bgd_shadow_blog.png) top repeat-y;
    clear: both;
    }

    #body_content_wrap {
    width: 984px;
    margin: 0px 45px 0px 45px;
    padding: 0px;
    padding-bottom: 7px;
    background: #000000;
    position: relative;
    clear: both;
    }

    #scrollofzen_header {
    width: 983px;
    height: 191px;
    margin: 0px 0px 0px 0px;
    padding: 0px;
    background: #000000 url(http://www.zenmotostore.com/images/scroll_of_zen_header.jpg) top center no-repeat;
    position: relative;
    clear: both;
    } 
```

div **#scrollofzen_header**位于 HTML 中的 Blogger 内容代码上方。两者都包含在**#body_content_wrap** div 中。

如果我需要在帖子中包含更多代码，请告诉我。提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:27:00.347

看起来这可能是一个明确的问题。取决于 IE 的版本。您可以查看 css `height: 100%;`，或者另一种方法是将`<div class="clear></div>`作为最后一个子元素添加到`#body_wrap`.

```
.clear {
    clear: both;
}

//then the markup

<div id="body_wrap">

    //Your content and stuff

    <div class="clear"></div>

<div> //close body_wrap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:51:56.470

您的问题似乎与此 CSS 声明有关：

```
.body-fauxcolumn-outer
{
    background: url(http://www.zenmotostore.com/images/page_bgd_zen.jpg) #b8924f fixed no-repeat 50% top;
} 
```

如果我使用 IE 开发工具禁用此规则，那么页面似乎可以正常工作（正如我所期望的那样）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-28T16:30:29.797

Internet Explorer 在 css 中使用图像有一个大问题。每当我尝试使用它们时，它都不起作用。自从最新版本的 IE 以来，他们还没有允许背景图像。

您需要为想要拥有背景图像的 div 定义一个高度

不支持背景图片 IE8 或更低版本

[http://www.w3schools.com/cssref/pr_background-image.asp](http://www.w3schools.com/cssref/pr_background-image.asp)

# git - 使用 SourceTree 克隆存储库

> ID：14072361
> 
> 赞同：31
> 
> 时间：2012-12-28T16:12:25.330
> 
> 标签：git, github, repository, atlassian-sourcetree

有人可以给我一个简单的使用 SourceTree 克隆 repo 的快速演练吗？

在书签中，我单击克隆存储库。对于源路径，我粘贴如下所示的 URL：

git@codebasehq.com:client/appname/ios-application.git

但我得到“这不是有效的源路径/ URL”。

我直接从代码库中的存储库浏览器复制，所以我知道 URL 是正确的。

我还需要做什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-16T13:57:33.753

我的解决方案是将 Git 版本从“使用嵌入式 Git”更改为“使用系统 Git”。因为我之前在我的电脑上安装了 GitHub，所以 SourceTree 似乎默认选择了 Git，而不是在安装时下载嵌入式版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-28T21:50:04.183

我帮助一位朋友解决了这个问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-12T00:36:32.407

我的解决方案是确认我的电子邮件地址。因此，如果您还没有，请检查您的电子邮件并从您的源存储库提供商（例如 bitbucket）中找到一封。您应该在电子邮件中有一个确认电子邮件部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T00:12:46.717

如此[Atlassian 线程](https://answers.atlassian.com/questions/16096/how-can-i-stop-sourcetree-from-using-a-deleted-account-to-try-to-connect-to-github)所示，这通常与凭证问题有关。

在您的情况下，这可能是 ssh 配置问题，没有或错误的 ssh 公钥/私钥。
或者，仍然对于 ssh，它可能与[ssh keys 错误注册](https://answers.atlassian.com/questions/62316/ssh-on-github-and-bitbucket-using-sourcetree)有关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-16T08:19:58.683

在我的情况下，我不得不取消检查：选项 > 网络 > 将代理服务器配置添加到 Git/Mercurial

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-22T19:52:14.823

我在 Mac 上。这些答案中没有任何解决方案对我有用，但我最终通过在 Accounts 中将 Bitbucket 从 SSH 切换到 HTTPS 想通了。我能够克隆回购。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-21T12:51:00.363

就我而言，我最终解决的方法是卸载 SourceTree，删除**X:/Users/UserName/AddData/Local/Atlassian**文件夹，然后重新安装最新的 SourceTree。然后我完成了 SourceTree 设置，像往常一样克隆了远程仓库，我又重新开始工作了。

提醒一下，如果您走这条路线并且您有尚未推送的本地更改（就像我所做的那样），请确保在开始此过程之前将它们复制到另一个文件夹，只是为了安全起见。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-08T15:53:56.707

我已经下载了 sourcetree 和 GIT 并使用安装的本地 GIT 而不是 sourcetree 提供的。解决了错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-28T23:55:46.753

如果您之前可能不小心为此存储库的域输入了错误的密码，那么您可能会因此而收到此错误。我必须在“网络”选项卡下的“首选项”面板上删除包含该 URL 域的行，它会在我下次尝试下载存储库时再次提示我。烦人的是它不再要求您输入密码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-26T09:55:52.510

对我来说，解决方案是从 Source Tree 启用 Git 支持。工具 --> 选项 --> Git（启用 Git 支持）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-06T08:26:55.703

请检查错误详细信息。如果问题是“无效的用户名或密码。如果您通过第三方服务登录，则必须确保您的帐户配置文件中设置了帐户密码。”，这意味着您可能输入了错误的密码。如果您使用 Mac，请从 KeyChain Access 中删除保存的密码，然后重试。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-15T14:54:54.293

对我来说，问题是它不接受我的密码。修复是在首选项 > 网络 > 编辑默认条目以设置我的 github 用户名而不是我的 Mac 用户名。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-01T01:56:12.467

安装新的 SourceTree 版本后我遇到了这个问题。

就我而言，它有助于从我的程序中卸载 Git。当我再次启动 SourceTree 时，它​​要求安装 Git，所以我安装了，问题得到了解决。

有点残酷的解决方案，但不想花更多时间试图找出问题所在。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-15T00:11:31.500

就我而言，我没有在 Sourcetree 上**安装 GIT 。**它会自动询问初始安装时间，但我以某种方式错过了它。所以我手动安装了 GIT，转到**工具 > 选项 > GIT >**按照步骤将 GIT 添加到您的 SourceTre。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-26T07:06:22.073

众所周知，Mac 上 Sourcetree 的克隆功能存在问题。但是，有一种解决方法对我有用：

脚步：

*   从本地磁盘中完全删除 Sourcetree（包括 2 个数据文件夹）
*   从您的计算机中删除 GIT 集线器文件夹。
*   在 Keystore 中将您的登录密码更改为其他内容。
*   重新启动系统两次 (2x)
*   现在您可以再次安装 Sourcetree，但不要从您的存储库克隆！！！
*   打开终端并创建新的（！）存储库文件夹
*   在终端中移动到此文件夹并克隆存储库。命令： git clone <---repository-> 。（注意最后的点！）
*   打开查找器
*   转到存储库文件夹的父级
*   将计算机存储库的文件夹拖放到 Sourcetree 中
*   再次重新启动计算机

我需要最后一步才能执行 PUSH。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-15T08:47:51.737

我在安装后第一次运行 SourceTree 时发生了这种情况。重新启动 SourceTree，这个特定的错误就消失了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-01-23T13:04:18.820

如果您使用两步验证，请提供令牌而不是常规密码（在 MAC 上使用 SourceTree 2.4 为我解决了这个问题），可以在 SourceTree > Preferences > Accounts 中完成。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-28T12:45:43.247

至于我以下两个步骤有帮助。

1.  在 vsts 上启用备用凭据
2.  通过命令行首先克隆（已安装 SourceTree）。
3.  源树 -> 新存储库 -> 添加现有本地存储库。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-09-18T07:02:37.160

这些东西帮助了我

*   将 SSH 替换为 URL 格式的 Https 链接。
*   删除密钥链访问中的所有旧访问密钥（SourceTree 的访问密钥）。这需要在您更改 Git 存储库密码时完成。

现在尝试再次克隆。这应该可以解决您的问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-07T01:16:16.747

在这方面，SourceTree 似乎很烦人。就我而言，问题是我第一次使用 SourceTree 时输入了错误的密码。我通过转到 SourceTree > Preferences > Accounts 解决了这个问题（在 Mac 上），单击我的帐户，设置正确的密码，然后瞧。完毕。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-05-23T23:39:56.853

我相信这与 BitBucket 和 Atlassian 帐户的集成有关。

当我从以下位置更改源 URL 时，它可以工作：

```
git@bitbucket.org/... 
```

至

```
myusername@bitbucket.org/... 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-04-11T07:48:44.203

# 请按照这些简单的步骤

1.  [在https://bitbucket.org](https://bitbucket.org)创建一个仓库
2.  安装源树并单击“+”按钮（查看我的附加图片和这个答案）
3.  点击顶部的“Remote：”按钮（非常非常重要）
4.  过去由[https://bitbucket.org](https://bitbucket.org)复制的 URL （您的仓库所在的位置）
5.  等到文本出现“这是一个有效的 Git 存储库等”
6.  设置目标路径
7.  单击克隆按钮

[图片](https://i.stack.imgur.com/cY4Sz.png)

# php - MySQL将我的选择合并在一起

> ID：14072364
> 
> 赞同：9
> 
> 时间：2012-12-28T16:12:31.780
> 
> 标签：php, mysql, sql, select

感谢您花时间尝试帮助我。

## 资讯

如果它可能与您的答案有关，我目前正在使用 CodeIgniter ;)。

## 问题

我在一家酒店网站上，试图弄清楚如何预订房间。

我希望用户选择一个可用服务列表并返回给他们，一个包含这些服务（全部）的房间列表，然后是一个包含至少一个的列表。通过这种方式，我将向他们展示符合他们所有需求的房间列表，以及一个可以解决问题但没有一切的房间列表。

这是我为房间存储服务的方式（实际上这可能是我的问题......）

```
Table "services_rooms"
id_services_rooms | id_room | id_service
1                 | 1       | 1
2                 | 1       | 2
3                 | 1       | 3
5                 | 1       | 5
11                | 2       | 2
12                | 2       | 3
...               | ...     | ... 
```

我怎样才能设法执行我的 SQL 来要求我的服务器给我所有包含服务 1、2 和 3 的房间，因此，只有我的“id_room”1 应该回来？

我试过做一些 joins / group_bys 但我得到的最多的是例如，3 行回来说：

```
Return rows :
ID_ROOM 1 | ID_SERVICE 1
ID_ROOM 1 | ID_SERVICE 2
ID_ROOM 1 | ID_SERVICE 3 
```

另一种看待它的方式是这样的：我想问我的服务器哪些房间包含所有这些服务：1,2,3

它会回答：ID_ROOM 1。

我已经看到其他几个关于合并等的问题，但不能完全将他们的答案应用于我的问题。

再次感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T16:14:22.743

这称为[**关系除法。**](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

```
SELECT id_room
FROM services_rooms
WHERE id_service IN (1,2,3)
GROUP BY id_room
HAVING COUNT(*) = 3 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/78256/1)

`id_service`如果没有对ech强制执行唯一约束`id_room`，`DISTINCT`则需要。

```
SELECT id_room
FROM services_rooms
WHERE id_service IN (1,2,3)
GROUP BY id_room
HAVING COUNT(DISTINCT id_service) = 3 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T16:26:20.880

您的问题的答案将返回至少具有一项服务的所有房间。查询是：

```
SELECT id_room, count(*) as NumServices
FROM services_rooms
WHERE id_service IN (1,2,3)
GROUP BY id_room
HAVING COUNT(*) > 0
order by count(*) desc 
```

# android - PC和手机之间的Socket通信

> ID：14072365
> 
> 赞同：0
> 
> 时间：2012-12-28T16:12:45.847
> 
> 标签：android, android-networking

我正在尝试在我的手机和我的电脑之间进行通信。我使用套接字来做到这一点。移动端服务器启动成功，显示有来自我PC浏览器的请求，它显示请求来自IP 192.168.1.100，这是我PC的LAN IP，是正确的。但是，从手机它无法将消息发送回 PC。这是示例代码。

响应状态：

```
Socket socket = client;
OutputStream out = socket.getOutputStream();
m_activityMain.handler.sendMessage(
       m_activityMain.handler.obtainMessage(1,socket.getInetAddress().getHostAddress()));

String response = "";
response += "HTTP/1.1 200 OK\r\n";
response += "Content-Type: text/html\r\n";
response += "\r\n";
out.write(response.getBytes());
out.write(new Boolean(this.isAlive()).toString().getBytes());// output status
Thread.sleep (1000);
out.flush();
out.close();
reader.close(); 
```

在浏览器中总是显示连接停止错误并且无法显示此消息，我不知道为什么？

# javascript - ExtJS 中的图像

> ID：14072369
> 
> 赞同：4
> 
> 时间：2012-12-28T16:13:26.533
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

有谁知道在`Ext.Img`组件内的 ExtJs 中旋转图像的方法？我现在的代码是：

```
 xtype:'image',
    id: 'south_image',
    src: '/Home/DefaultImage',
    region: 'south',
    width: 700,
    height: 200 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T13:08:36.173

使用下面的代码

```
xtype:'image',
id: 'south_image',
src: '/Home/DefaultImage',
region: 'south',
width: 700,
height: 200,
style: {
    transform: rotate(45deg),
    -ms-transform: rotate(45deg),
    -moz-transform: rotate(45deg),
    -webkit-transform: rotate(45deg),
    -o-transform: rotate(45deg)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:25:39.257

`Ext.draw.Component`你可以像这样旋转：

```
Ext.create('Ext.draw.Component', {
    renderTo: Ext.getBody(),
    id: 'rotateImg',
    viewBox: false,
    padding: 20,
    items: [{
        type: 'image',
        src: 'http://www.sencha.com/img/apple-touch-icon.png',
        width: 200,
        height: 200
    }]
});

Ext.create('Ext.slider.Single', {
    renderTo: Ext.getBody(),
    hideLabel: true,
    width: 400,
    minValue: 0,
    maxValue: 360,
    value: 0,
    listeners: {
        change: function (slider, value) {
            var sprite = Ext.getCmp('rotateImg').surface.items.first();
            sprite.setAttributes({
                rotation: {
                    degrees: value
                }
            }, true);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:28:42.957

使用 css 可以进行图像旋转。设置图像的样式，例如

```
transform:rotate(180deg) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-28T19:18:24.173

AFAIK 没有办法通过 ExtJs 旋转它，因为 img 是动态生成的，你当然可以在你的服务器上旋转它，这应该是微不足道的，或者回退到在画布上旋转它，然后将它添加到你的零件。

# c# - 删除行后在datagridview中选择下一行（整行，而不是单元格）

> ID：14072377
> 
> 赞同：0
> 
> 时间：2012-12-28T16:13:49.393
> 
> 标签：c#, winforms, events, datagridview, row

我在从 datagridview 中删除行时遇到问题。我希望在删除前一行后完全选择下一行，因此我可以通过按“删除”按钮连续删除多行。问题是在行删除后，我选择了下一行的第一个单元格，所以当我按下“删除”时，我只是删除了该单元格的内容，我必须单击行标题才能删除“删除”按钮单击。

任何关于如何修复 about 的想法/帮助将不胜感激。

非常感谢。

问候，伊戈尔

更新：SelectionMode 已设置为 FullRowSelect 模式。我忘了提到我在网格单元格中嵌入了文本框，当我删除一行时，下一行的第一个单元格中的文本框被选中，因此我无法通过按 Delete 按钮删除该行：我需要按行标题再次选择整行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:01:47.460

从“属性”窗口或像这样的代码设置`SelectionMode`属性，`DataGridView`

```
dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:17:08.307

如果在 DataGridView 属性中将 SelectionMode 更改为“FullRowSelect”会怎样？

# java - 多个方法参数上的 @Cacheable 键

> ID：14072380
> 
> 赞同：88
> 
> 时间：2012-12-28T16:14:08.923
> 
> 标签：java, spring, ehcache

从[弹簧文档](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)：

```
@Cacheable(value="bookCache", key="isbn")
public Book findBook(ISBN isbn, boolean checkWarehouse, boolean includeUsed) 
```

如何指定`@Cachable`使用`isbn`和`checkWarehouse`作为键？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-12-29T01:16:51.293

***更新***：如果没有另外指定，当前的 Spring 缓存实现使用所有方法参数作为缓存键。如果您想使用选定的键，请参阅[Arjan 的答案](https://stackoverflow.com/a/17406598/241986)，它使用 SpEL 列表`{#isbn, #includeUsed}` ，这是创建唯一键的最简单方法。

来自[Spring 文档](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/cache.html)

> 随着 Spring 4.0 的发布，默认的密钥生成策略发生了变化。Spring早期版本使用了key生成策略，对于多个key参数，只考虑参数的hashCode()，不考虑equals()；这可能会导致意外的键冲突（有关背景信息，请参阅 SPR-10237）。新的“SimpleKeyGenerator”在这种情况下使用复合键。

**春季 4.0 之前**

我建议您将 Spel 表达式中的参数值与类似的东西连接起来`key="#checkWarehouse.toString() + #isbn.toString()")`，我相信这应该可以作为 org.springframework.cache.interceptor.ExpressionEvaluator 返回的对象，稍后将其用作键，因此您不必提供在`int`你的 SPEL 表达式中。

至于具有高碰撞概率的哈希码 - 您*不能*将其用作密钥。

该线程中有人建议使用`T(java.util.Objects).hash(#p0,#p1, #p2)`，但它不会起作用，而且这种方法很容易破坏，例如我使用了来自[SPR-9377](https://jira.springsource.org/browse/SPR-9377)的数据：

```
 System.out.println( Objects.hash("someisbn", new Integer(109), new Integer(434)));
    System.out.println( Objects.hash("someisbn", new Integer(110), new Integer(403))); 
```

这两行都在我的环境中打印 -636517714。

PS 实际上在我们的参考文档中

```
@Cacheable(value="books", key="T(someType).hash(#isbn)") 
public Book findBook(ISBN isbn, boolean checkWarehouse, boolean includeUsed) 
```

我认为这个例子是错误的和误导性的，应该从文档中删除，因为键应该是唯一的。

PPS 还可以查看[https://jira.springsource.org/browse/SPR-9036](https://jira.springsource.org/browse/SPR-9036)，了解有关默认密钥生成的一些有趣想法。

为了正确起见，我想补充一下，作为一个有趣的数学/计算机科学事实，与内置散列不同，使用像 MD5 或 SHA256 这样的*安全**加密* [散列函数](https://en.wikipedia.org/wiki/Cryptographic_hash_function)，由于此类函数的属性，这绝对是可能的任务，但每次都计算它可能太昂贵了，请查看 Dan Boneh 密码学课程以了解更多信息。

 ** * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-07-01T14:13:37.787

在使用 Spring 3.2 进行一些有限测试后，似乎可以使用 SpEL 列表：`{..., ..., ...}`. 这也可以包括`null`值。Spring 将列表作为键传递给实际的缓存实现。使用 Ehcache 时，有时会调用[List#hashCode()](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#hashCode%28%29)，它会考虑其所有项目。（我不确定 Ehcache 是否*只*依赖哈希码。）

我将它用于共享缓存，其中我也在键中[包含方法名称](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/cache.html#cache-spel-context)，而 Spring 默认键生成[器不包含](https://github.com/SpringSource/spring-framework/blob/master/spring-context/src/main/java/org/springframework/cache/interceptor/DefaultKeyGenerator.java). 这样，我可以轻松地擦除（单个）缓存，而不会（太多......）冒着为不同方法匹配键的风险。像：

```
@Cacheable(value="bookCache", 
  key="{ #root.methodName, #isbn?.id, #checkWarehouse }")
public Book findBook(ISBN isbn, boolean checkWarehouse) 
...

@Cacheable(value="bookCache", 
  key="{ #root.methodName, #asin, #checkWarehouse }")
public Book findBookByAmazonId(String asin, boolean checkWarehouse)
... 
```

当然，如果许多方法都需要这个并且您总是使用所有参数作为密钥，那么还可以定义一个自定义密钥生成器，其中包含类和方法名称：

```
<cache:annotation-driven mode="..." key-generator="cacheKeyGenerator" />
<bean id="cacheKeyGenerator" class="net.example.cache.CacheKeyGenerator" /> 
```

...和：

```
public class CacheKeyGenerator 
  implements org.springframework.cache.interceptor.KeyGenerator {

    @Override
    public Object generate(final Object target, final Method method, 
      final Object... params) {

        final List<Object> key = new ArrayList<>();
        key.add(method.getDeclaringClass().getName());
        key.add(method.getName());

        for (final Object o : params) {
            key.add(o);
        }
        return key;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T16:24:17.070

您可以使用 Spring-EL 表达式，例如在 JDK 1.7 上：

```
@Cacheable(value="bookCache", key="T(java.util.Objects).hash(#p0,#p1, #p2)") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-20T10:09:46.100

您可以使用 Spring SimpleKey 类

```
@Cacheable(value = "bookCache", key = "new org.springframework.cache.interceptor.SimpleKey(#isbn, #checkWarehouse)") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-31T12:38:09.410

这将起作用

```
@Cacheable(value="bookCache", key="#checkwarehouse.toString().append(#isbn.toString())") 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-11T03:04:56.540

用这个

```
@Cacheable(value="bookCache", key="#isbn + '_' + #checkWarehouse + '_' + #includeUsed") 
```*

# javascript - JQuery Ajax 在 iPhone UIWebView 上失败

> ID：14072381
> 
> 赞同：2
> 
> 时间：2012-12-28T16:14:08.720
> 
> 标签：javascript, iphone, objective-c, ajax, uiwebview

我有一个网站，我开发了一个 iPhone 应用程序。iPhone 应用程序以`UIWebView`.

问题是：

在网站上，有一个按钮可以制作 JQuery AJAX 帖子，该帖子适用于移动 Safari，但在`UIWebView`.

有没有人遇到同样的问题？我该如何解决这个问题？

# c# - 通过字符串调用实例类的方法

> ID：14072384
> 
> 赞同：2
> 
> 时间：2012-12-28T16:14:11.950
> 
> 标签：c#, methods, element, watin, invoke

此链接：[http](http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met) ://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met 清楚地解释了当您将方法名称 + 类型作为字符串变量时如何调用方法.

我正在使用 WatiN 制作 ac# 项目。我使用的所有 WatiN 方法都是相同的形式：

**示例：** *( *ById,.ByClass..; 所以应该连接，但是我无法将其设置为粗体 :s )*

*   `browser.**TextField**(Find.By **Id**("name")).**TypeText**("my name");`
*   `browser.**Span**(Find.By **Class**("main_title")).**Click(**);`
*   `browser.**Link**(Find.By **Id**("mid_link")).**Click(**);`

正如你所看到的，这总是由 3 个可变的方法组成。我创建了一个由字符串属性组成的类 webElement：标签、类型、搜索、操作。

在哪里 -> `tag = "TextField"; type = "Id", search = "name"; action = "TypeText"`。

为了动态获取 web 元素，我创建了一个 WebHandler 类，我尝试在其中动态调用正确的方法。

因此，主类拥有所有 webElement 对象的列表，并且可以在给定时间将正确的对象提供给 WebHandler 类。Webhandler 类现在应该动态调用每个元素。我使用与给定 url 相同的调用方法，所以我调用它的代码是：

**类WebHandler：**

```
private IE browser = new IE("google.com");

public void method(WebElement webElement)
{
     //Get the findBy dynamically | this works
     WatiN.Core.Constraints.Constraint findBy =
                (WatiN.Core.Constraints.Constraint)InvokeMethod("WatiN.Core.Find, WatiN.Core", "By" + webElement.Type, webElement.Search); //where type = "Id" and search = "name"

     //Get the tag (like textfield, link, span) dynamically | this does not work
     Type aType = Type.GetType("WatiN.Core." + webElement.Tag, "WatiN.Core") //how can I set the element variable to this type? aType element -> Does not work
     aType element = (WatiN.Core.TextField)InvokeMethod("this.browser", webElement.Tag, findBy); //tag = TextField

    element.TypeText("a name"); //same problem as above | so should be invoked
} 
```

问题：

1.  如何使用他的字符串版本“TextField”作为变量动态调用实例类IE（**浏览器）的方法（** **TextField ）？**另一种表述方式是：如何通过使用它的字符串版本“浏览器”来获取当前变量（**浏览器）？**
*****   如何动态设置变量**元素**的类型？所以当 webElement.Tag = Textfield 那么类型应该是 WatiN.Core.TexField element = .. （见代码）****

 ****自己的考虑：

1.  我发现的主要问题是您只能从一个类型调用一个方法，而不是从该类型的实例调用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:19:11.087

这条线

```
Type aType = Type.GetType("WatiN.Core" + webElement.Tag) 
```

之后没有点`Core`。它似乎`Core`是一个命名空间，因此应该与标签名称分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:05:47.807

来吧，把它放在 LINQPad 中，但应该或多或少是可移植的：

```
void Main()
{
    WatiN.Core.Browser theBrowser = new WatiN.Core.IE("google.com");
    Foo(theBrowser, "Id", "gbqfq", "TextField", "TypeText", "Search for this");
}

public void Foo(WatiN.Core.Browser browser, string findTypeBy, string search, string tagName, string elementMethodName, params object[] argsForMethod)
{
    var watinCoreAsm = Assembly.LoadWithPartialName("WatiN.Core");
    if(watinCoreAsm == null) return;

    var watinCoreTypes = watinCoreAsm.GetTypes();
    if(watinCoreTypes == null) return;

    var findType = watinCoreTypes.FirstOrDefault(type => type.Name == "Find");
    if(findType == null) return;

    var constraintInstance = findType.GetMethod("By" + findTypeBy, new Type[]{ typeof(string) }).Invoke(null, new[]{search});
    if(constraintInstance == null) return;

    var browserAccessor = browser.GetType().GetMethod(tagName, new Type[]{ constraintInstance.GetType() });
    if(browserAccessor == null) return;

    var resultElement = browserAccessor.Invoke(browser, new[]{ constraintInstance });
    if(resultElement == null) return;

    var elementMethod = resultElement.GetType().GetMethod(elementMethodName);
    if(elementMethod == null) return;

    elementMethod.Invoke(resultElement, argsForMethod);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:41:21.363

这样做的要点是你得到你想要的类型，然后使用反射来获取方法，然后调用给定的方法，传入实例。

所以，像这样：

```
 Type aType = Type.GetType(string.Format("WatiN.Core.{0}.WatiN.Core", webElement.Tag));
    MethodInfo method = aType.GetMethod("TextField");
    method.Invoke(this.browser, webElement.Tag, findBy); 
```

这里的关键位是：

1.  获取类型
2.  获取方法
3.  使用您想要的实例调用方法

有捷径，我可能没有适合您问题的具体细节，但这应该可以让您接近您想要的。****

# git - 在 github 中恢复了已删除的文件，但无法将其推送回来

> ID：14072387
> 
> 赞同：1
> 
> 时间：2012-12-28T16:14:27.550
> 
> 标签：git, github

我正在学习 github 并尝试恢复已删除的文件，所以我删除了一个文本文件`git rm game.txt`，然后提交并推送，然后我在本地存储库`git reset --hard "checksum of last commit/push"`中恢复了文件，该文件恢复了文件。

然后我编辑了文件，以便 git 能够识别修改并允许提交，但是当我尝试提交时，我得到了这个错误：`CONFLICT (modify/delete): game.txt deleted in 45698cbb2b278bf213adf4aef39548bf74fff0ed and modified in HEAD. Version HEAD of game.txt left in tree. Automatic merge failed; fix conflicts and then commit the result.`

所以我想知道的是：1）我该如何解决这个冲突。2）这是恢复已删除文件的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:27:34.317

您的本地和 github 现在是独立的分支，都源自您重置到的提交。你必须从 github 合并到你的本地分支；当您执行此合并时，您将必须解决已删除版本和修改版本之间的冲突。在本地合并后，您将能够将合并后的版本推送回 github。

git中有多种方式可以恢复被删除的文件；我不认为这种方式是最好的方式。如果您已经发布了删除文件的提交，最好的办法可能是使用`git revert`创建一个新的提交来撤消删除文件的提交。

# html - 我不关心缓存或性能——有什么理由不应该使用嵌入式 CSS？

> ID：14072391
> 
> 赞同：4
> 
> 时间：2012-12-28T16:14:52.137
> 
> 标签：html, css

作为我工作的一部分，我维护/开发一个内部 Web 应用程序。它的用户相对较少，而且规模不大。我有一个全局 CSS 文件，其中包含一些重复使用的样式，但我 90% 的特定于页面的样式确实是特定于页面的；它们类似于伪列宽（我的很多输出只是非表格的，足以使表格成为一个糟糕的选择）。我已经习惯在这些页面的顶部放置一个 <style> 块。

我知道这是不受欢迎的，但每次我读到单独的 CSS 文件的原因时，唯一真正突出的是缓存。在这种情况下，这无关紧要；如果我需要加快应用程序的速度，这在我会做的事情清单上是很差的。还有其他原因吗，或者我可以停止感到内疚吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T16:18:47.253

> 每次我读到单独的 CSS 文件的原因时，唯一真正突出的是缓存

真的吗？

每次我读到它们的用法时，您可以更改 CSS 文件中的某些*内容并且包含它的所有页面*都会发生更改的事实是使用它们的最重要原因。

即使您的特定页面有不同的特定规则，让您的 CSS 集中是一件好事。它可以帮助您统一整个站点的基本 CSS 结构，并且在查找特定效果是如何实现的时，它会很容易找到。

这些都是使用 CSS 文件的重要原因，远高于任何缓存/性能原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:18:35.987

我面临着类似的问题，因为我的大多数样式都非常特定于页面。但是，我的网站远非小，所以我必须找到解决方案。

我最终做的是创建一个文件夹`css/pages`，并将每个 CSS 文件命名为与使用它的页面相同的名称。然后，我的 PHP“模板”可以检查`if(file_exists("css/pages/".basename($_SERVER['PHP_SELF'])))`并添加相关`<link/>`标记，从而使我的工作量最小。

仅仅因为您的网站很小并不是忽视效率的正当理由，尽管我不得不说我是一个效率书呆子，所以我可能会对此更加迂腐：p

最终，将特定于页面的 CSS 直接放在页面中并没有什么“错误”，只需确保在多个页面上使用的任何内容都在一个文件中，这样您就不必重复自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:24:44.317

在我看来，如果您的应用程序只包含几个网页（3-5 页），那么您可以继续在网页顶部定义它。如果您的应用程序要增长到超过 3-5 个网页，那么全局 CSS 将有助于提高可维护性和可扩展性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:29:04.593

使标记更清晰，加载更快。真正适用于模板和动态开发。不要害怕使用它。这不像你会走向黑暗的一面。

# oracle - Oracle 10g Express - 让另一个用户查看另一个用户的表

> ID：14072392
> 
> 赞同：2
> 
> 时间：2012-12-28T16:14:56.927
> 
> 标签：oracle, security, oracle10g, schema, privileges

我现在是 Oracle 的大菜鸟。我被要求将两个数据库导入 Oracle。我成功了……有点……我想。因此，这些数据库与用户一起导出，当我导入数据库时​​，它创建了用户，并且所有表都附加到该用户。第二个数据库也是如此。让我们为第一个导入 USER1 和第二个 db import USER2 调用用户。USER1 有自己的表，USER2 有自己的表。

我想创建一个可以查看所有这些表的用户。所以我不必登录其中一个来访问和操作其数据，而另一个也可以这样做。我想创建一个 USER3 可以查看和操作与每个相关联的 USER1 和 USER2 的表。我尝试了多种方法，但似乎无法让它发挥作用。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T07:45:31.180

要允许 USER3 查询 USER1 拥有的表：

```
GRANT SELECT ON USER1.tablename TO USER3; 
```

您必须为每个表单独运行它。

您可能需要的其他授权是 INSERT、UPDATE 和 DELETE，例如授予完全控制权：

```
GRANT SELECT, INSERT, UPDATE, DELETE ON USER1.tablename TO USER3; 
```

当您以 USER3 身份登录时，要查询您通常需要指定架构的表，例如：

```
SELECT * FROM USER1.tablename; 
```

如果您想避免每次都指定架构，您可以使用同义词，例如：

```
(login as USER3)

CREATE SYNONYM tablename FOR USER1.tablename; 
```

现在您可以以 USER3 身份登录并运行以下命令：

```
SELECT * FROM tablename; 
```

* * *

> “我只是不明白为什么我必须做这一切。”

Users - or schemas - are the means Oracle uses for organising applications and enforcing governance. In a well-design application it is extremely unlikely that one schema would need to grant every privilege on all its objects to another user. Oracle recommends a policy of granting the minimum necessary set of privileges to other users. Doing this requires us to make choices and write discrete statements to grant specific privileges on particular objects.

# assembly - x86 内存 [si] 与 [bx+si]

> ID：14072395
> 
> 赞同：0
> 
> 时间：2012-12-28T16:15:13.867
> 
> 标签：assembly, x86

3种数组索引方法有什么区别

```
mov  si, INDEX
mov  ax,  memory[si] 
```

和

```
mov  bx, offset  memory
mov  si, INDEX
mov  ax,  [bx+si] 
```

和

```
lea  bx,  memory
mov  si,  INDEX
mov  ax,  [bx+si] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:28:36.063

当显示时，他们都做同样的事情。你已经看到了。但是它们适合周围代码的方式是真正不同的。

在所有三个中，您都可以增加 SI 以引用相邻数组元素中的所有值。

在 2 和 3 中，您可以在外循环结束时将 BX 碰撞一个固定量以跳转到 2D 数组的下一行。内部循环将 SI 与数组元素（1、2、4 等）的大小相撞，以对当前行执行某些操作。

如果您需要节省空间并拥有一维数组，则 1 会更短。或者也许你没有寄存器，需要 BX 来保存你正在计算的东西，所以你不需要使用 BX。

当逗号右侧有更复杂的部分时，3 很方便。

# php - 稍微复杂的正则表达式以匹配后面的否定外观，后跟一个确切的短语

> ID：14072396
> 
> 赞同：2
> 
> 时间：2012-12-28T16:15:14.617
> 
> 标签：php, regex, pcre

所以我有以下正则表达式：

`(?<!\.)\b([\w\@\-]+) *\b(IN|NOT IN|LIKE|NOT LIKE|BETWEEN|REGEXP|NOT|IS|XOR)+\b *`

我希望帮助我匹配一些 SQL 代码。

但是，看起来我会对第二个括号中的短语有问题，例如“NOT IN”和“NOT LIKE”

我需要一个匹配或不匹配的正则表达式（没有像我当前的正则表达式那样的部分匹配）。

1.  `customers.id NOT IN (SELECT MAX(customers_service.customer_id))`根本不应该匹配
2.  `customers.id NOT LIKE (SELECT MAX(customers_service.customer_id))`根本不应该匹配
3.  `id NOT IN (SELECT MAX(customers_service.customer_id))`应该匹配
4.  `id IN (SELECT MAX(customers_service.customer_id))`应该匹配

我正在使用 RegexBuddy 进行检查，并使用我的正则表达式获得了第 1 和第 2 的匹配项。

还，

1.  `id NOT IN (SELECT MAX(customers_service.customer_id))`只匹配`id NOT`，而不是`id NOT IN`
2.  `id NOT LIKE (SELECT MAX(customers_service.customer_id))`只匹配`id NOT`，而不是`id NOT LIKE`

我想修改这个正则表达式来捕捉后面否定的条件，以及第二个括号中的确切短语，或者根本不匹配（不匹配）。

我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T06:44:05.457

首先，`\b`不匹配单词的开头或结尾。这就是它总是被描述的方式，但这是一个谎言。`\b`匹配的是一个位置，该位置后跟*一个*单词字符但*前面*`(?=\w)(?<!\w)`没有一个-- -- 或*前面*有一个单词字符但*后面*没有一个 -- `(?<=\w)(?!\w)`。如果这些条件不是您想要匹配的，那么您最好不要使用`\b`。

您尝试匹配的名称显然可以包含标准“单词”字符（字母、数字和下划线），因此单词边界是无用的`@`。`-`一般来说，为了确保匹配一个完整的单词，你会使用否定的lookbehind和否定的lookahead：

```
(?<![\w@-])[\w@-]+(?![\w@-]) 
```

在您的情况下，您还想确保*前面*的字符不是`.`，并且您知道*下面*的字符必须是空格，因此您的正则表达式的一部分将是：

```
(?<![.\w@-])[\w@-]+\s+ 
```

更大的问题是它也可以匹配你不希望它匹配的东西——例如，关键字`NOT`和`IN`。我建议两种补救措施。首先，收紧关键字的正则表达式，使复合关键字像`NOT IN`和`NOT LIKE`被视为原子单元：

```
(?:NOT(?:\s+(?:IN|LIKE))?|IN|LIKE|BETWEEN|REGEXP|IS(?:\s+NOT)?|XOR)\b 
```

其次，在前瞻中使用它来确保您匹配的第一个单词不是（部分）关键字。这是完整的正则表达式，为了便于阅读，分为两行：

```
(?<![.\w@-])(?!(?:NOT(?:\s+(?:IN|LIKE))?|IN|LIKE|BETWEEN|REGEXP|IS|XOR)\b)[\w@-]+\s+
(?:NOT(?:\s+(?:IN|LIKE))?|IN|LIKE|BETWEEN|REGEXP|IS|XOR)\b\s* 
```

您可以通过为关键字定义子例程组来使其更易于维护。这是 PHP 字符串文字的样子：

```
'~
(?(DEFINE)(?<KEYWORD>
  (?:NOT(?:\s+(?:IN|LIKE))?|IN|LIKE|BETWEEN|REGEXP|IS(?:\s+NOT)?|XOR)\b
))
(?<![.\w@-])(?!(?&KEYWORD))[\w@-]+\s+(?&KEYWORD)\s*
~ix' 
```

...这是一个**[演示](http://ideone.com/xM6uOt)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:27:22.920

您的措辞有点令人困惑，但据我了解，负面的后视效果正如您所料。

对于“部分匹配”问题，您只需通过减少长度来对关键字进行排序：

```
(?<!\.)\b([\w\@\-]+) *\b(NOT LIKE|BETWEEN|REGEXP|NOT IN|LIKE|NOT|IN|IS|XOR)+\b * 
```

通过这种方式，它会在选择较短的关键字之前尝试捕获“更完整”的关键字。

**编辑**

我知道发生了什么事，现在。如果是

```
customers.id NOT IN (SELECT MAX(customers_service.customer_id)) 
```

存在匹配的原因`NOT`是被 , 匹配`(?<!\.)\b([\w\@\-]+)`，并且`IN`作为操作符被匹配。换句话说，它认为`NOT`是一个列名。

解决此问题的唯一方法是添加约束。例如，如果您知道字符串始终以表/列标识符开头，则执行以下操作：

```
^\s+([\w\@\-]+) *\b(NOT LIKE|BETWEEN|REGEXP|NOT IN|LIKE|NOT|IN|IS|XOR)+\b *
**** 
```

通过这种方式，无需后视或单词边界。

如果你不能做出那个约束，那么即使不是完全不切实际也很棘手（因为你基本上必须用正则表达式构建一个 SQL 解析器）。关键是为您的正则表达式提供一些区分标识符和运算符的方法；否则它无法分辨。如果你知道你所有的标识符都是小写的，那可能对你的目的有用，尽管很脆弱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T16:46:01.877

好吧。因此，经过多次“正则表达式”，这是对我有用的正则表达式：

```
(?<=\s)(?!(?:not|is)(?=\s))([\w\@\-]+)(?=\s) (?<=\s)(NOT LIKE|NOT IN|IS NOT|BETWEEN|REGEXP|LIKE|XOR|NOT|IN|IS)(?=\s) 
```

当然，在我的`preg`函数中，我会使用不区分大小写的模式修饰符。

我必须从我在 StackOverflow 上发布的其他问题中找到其他部分。

干杯。

# java - 以编程方式访问主类的 MANIFEST.MF

> ID：14072397
> 
> 赞同：2
> 
> 时间：2012-12-28T16:15:20.217
> 
> 标签：java, jar, manifest

如果不知道主类的名称，这可能吗？特别是我想要在应用程序启动时通过信息电子邮件发送的实施版本属性。我知道访问它的唯一方法需要知道我想要访问其信息的包或 jar 文件的名称；我不知道如何简单地通过寻找主要课程来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:16:03.050

@Lee Meador 的评论指出了寻找 Manifest 的好方法。您不需要知道 jar 名称，您只需要能够识别您的清单。建议：使用其他 IMPLEMENTATION_* 属性的任意组合来识别正确的清单。如果您已经设置了 IMPLEMENTATION_VERSION，为什么不也设置 IMPLEMENTATION_NAME 以便您可以找到它。一旦你得到它，你可以浏览条目以找到你想要的。[Manifest API](http://docs.oracle.com/javase/7/docs/api/java/util/jar/Manifest.html)使它变得更加容易：

```
 Attributes mainAtts = mf.getMainAttributes();
        if(mainAtts.containsKey(Attributes.Name.MAIN_CLASS)){
            String mainClass = mainAtts.getValue(Attributes.Name.MAIN_CLASS);
            System.out.println(mainClass);
            String mainVer = mainAtts.getValue(Attributes.Name.IMPLEMENTATION_VERSION);
            System.out.println(mainVer);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:21:24.610

所以你想知道主类但不想知道它的名字是什么？

为了找到您要查找的内容，您需要：

1.  确定主类（对不起，这将是一个要求）
2.  找出该类的加载位置
3.  如果是 JAR 文件，则从该 JAR 文件加载清单

第 1 步可能很困难：启动主类的线程可能已经结束——例如，许多 GUI 程序将执行一个`Class.main(String[])`方法，然后在 AWT 线程保持进程处于活动状态时终止。您可能根本无法识别主类。如果是这样的话，你很可能不走运。您可以尝试`sun.java.command`系统属性，但这可能仅在 Sun/Oracle JVM 上有效。

第 2 步相当简单：获取`Class`'s `ClassLoader`，然后询问 .class 文件本身的 URL。

第 3 步也相当简单：打开 JAR 文件并查找该`META-INF/MANIFEST.MF`文件。

# macos - NSFileManager 说文件不可写 Mac

> ID：14072398
> 
> 赞同：1
> 
> 时间：2012-12-28T16:15:22.173
> 
> 标签：macos, cocoa, avfoundation, nsfilemanager

我一直在尝试使用 AVFoundation 来记录屏幕输出。由于未知的原因，在我迁移到最新版本的 Mac（Mountain Lion）后它停止工作。我一直在努力让它发挥作用，但到目前为止还没有成果。我知道`startRecordingToOutputFileURL`如果输出文件已经存在，则 AVFoundation 方法将不起作用。因此，我尝试使用`NSFileManager`来查看我的目标文件是否存在以及它是否可写。我的 Filemanager 始终返回与目标文件不存在且不可写对应的值。我试图设置文件权限无济于事，任何人都可以对我可能的错误有所了解：

```
dest = [[NSURL alloc] initFileURLWithPath:@"~/Desktop/myMovie.mov"];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
[attributes setObject:[NSNumber numberWithInt:777] forKey:NSFilePosixPermissions]; //I tried 511 too, no avail
[fileManager setAttributes:attributes ofItemAtPath:[dest path] error:nil]; 
if (![fileManager fileExistsAtPath:[dest path]]) {
     if ([fileManager isWritableFileAtPath:[dest path]]) {
            /* Starts recording to a given URL. */
         [captureMovieFileOutput startRecordingToOutputFileURL:dest recordingDelegate:self];
        }
        else{
            NSLog(@"File doesnot exist but is not writable"); //This is the message I get as result
        }

    }
    else
    {
        NSLog(@"File Exists...");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:53:50.977

未扩展的波浪线不是 Cocoa 中的有效路径。您必须在传递给's的字符串上使用`-stringByExpandingTildeInPath`或更好。`-stringByStandardizingPath``NSURL``-initFileURLWithPath:`

因此，NSFileManager 将为 isWritableFileAtPath 返回 NO，因为它是无效路径（因此它不可写）。这会导致您的 NSLog() 被解雇。

**根据评论更新：**

您可能仍然会发现 NSURL 在创建时返回 nil（因此调用 -path 将返回 nil），因为路径仍然无效。同样值得注意的是，文档中说 -isWritableFileAtPath:，“尝试操作（例如加载文件或创建目录）、检查错误并优雅地处理这些错误比尝试提前解决要好得多手术能否成功的时间。”

采纳 Peter Hosey 的建议，如果在*您尝试写入文件时调用失败，请*使用 NSError并且不要尝试提前弄清楚。

# ruby-on-rails - 为什么当它返回错误和重定向时不会传递以前的输入数据？

> ID：14072399
> 
> 赞同：0
> 
> 时间：2012-12-28T16:15:28.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3

首先，我在评论输入框中输入“你好”并提交。
它成功了，没有任何问题。
然后，如果我在 10 秒内再次尝试重做，我将其设计为返回“垃圾邮件警告”，它会按照我的意愿执行操作。但问题是，我在上一页输入的所有输入数据都不见了……所以我必须再次输入它们。
我怎样才能留下以前的输入数据？

```
def show
    ...
    @comment_input = @user.comment_threads.build
    ...
end

def add_comment
    @user = User.find_by_username(params[:id])
    @post = @user.comment_threads.last

    if @post
        last_time = @post.created_at
        if Time.now - last_time <= 10.second
            redirect_to :controller => 'users', :action => 'show', :id => @user.username
            flash[:notice] = "You cannot spam!"   
            return
        end
    end

    @user_who_commented = current_user
    @comment = Comment.build_from( @user, @user_who_commented.id, params[:comment][:body] )
    @comment.comment_icon = params[:comment][:comment_icon]
    @comment.save
    redirect_to :controller => 'users', :action => 'show', :id => @user.username
    flash[:notice] = "comment added!"
end 
```

**_form.html.erb**

```
<%=form_for @comment_input, url: url_for( :controller => :users, :action => :add_comment ) do |f| %>

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div>
    <div class="field">
    <%= f.file_field :comment_icon %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

更新：

**users_controller.rb #show**

```
def show    
    @user = User.find_by_username(params[:id])

        @comments = @user.comment_threads.order("updated_at DESC").page(params[:page]).per(5)
        @comment_input = @user.comment_threads.build

        respond_to do |format|
            format.html # index.html.erb
            format.json { render json: @user }
        end 
    end

end 
```

**意见/用户/show.html.erb**

```
.....
<table>
  <tr>
    <th>ID</th>
    <th>PIC</th>
    <th>Body</th>
    <th>Subject</th>
    <th>Posted by</th>
    <th>Delete</th>
  </tr>

<% @comments.each do |comment| %>
  <tr>
    <td><%= comment.id %></td>
    <td>
            <% if comment.comment_icon? %>
                <ul class="thumbnails">
                <%= image_tag(comment.comment_icon.url(:thumb),:height => 100, :width => 100, :style => 'border:3px double #545565;' ) %>
                </ul>
            <% end %>

    </td>
    <td><%= comment.body %></td>
    <td><%= comment.subject %></td>
    <td><%= comment.user.user_profile.nickname if comment.user.user_profile %></td>
    <td>
    <%= button_to 'destroy', delete_comment_user_path(@user,comment.id), confirm: 'Are you sure?', :disable_with => 'deleting...'  if current_user && current_user.id == comment.user_id %>
    </td>
    </tr>
<% end %>
</table>

<%=form_for @comment_input, url: url_for( :controller => :users, :action => :add_comment ) do |f| %>

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div>
    <div class="field">
    <%= f.file_field :comment_icon %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div>

<% end %>
...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:45:56.017

```
 def add_comment
      @user = User.find_by_username(params[:id])
      @post = @user.comment_threads.last
      @user_who_commented = current_user
      @comments = @user.comment_threads.order("updated_at DESC").page(params[:page]).per(5)
      @comment = Comment.build_from( @user, @user_who_commented.id, params[:comment][:body] )
      @comment.comment_icon = params[:comment][:comment_icon]

      if @post && (Time.now - @post.created_at) <= 10.second
        flash[:notice] = "You cannot spam!"
        render :action => "show"
      elsif @comment.save
        flash[:notice] = "comment added!"
        redirect_to :controller => 'users', :action => 'show', :id => @user.username
      else # if model's errors
        render :action => "show"
      end
    end 
```

# css - CSS 插入边框颜色不正确

> ID：14072400
> 
> 赞同：1
> 
> 时间：2012-12-28T16:15:35.523
> 
> 标签：css

我正在尝试使用带有浅色的边框插图作为插图，但是，选择的颜色根本没有正确显示，这在每个浏览器中都是一样的

这是 css - 第一个盒子应该有浅色的嵌入边框，第二个盒子应该稍微暗一些：

这里有一个小提琴：[CSS inset border Fiddle](http://jsfiddle.net/darrensw/J89wg/)

```
.box1 {
display: inline-block;
border: 4px inset #f7f7f7;
margin-top: 16px; 
border-radius: 12px;
height: 34px;
background:#fff;
width:230px;
position:relative;
padding:10px;
}

.box2 {
display: inline-block;
border: 4px inset #cccccc;
margin-top: 16px;
border-radius: 12px;
height: 34px;
background:#f7f7f7;
width:230px;
position:relative;
padding:10px;
} 
```

我尝试单独设置边框颜色元素，但没有区别

非常奇怪的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:28:42.117

这就是规范中插入边框的工作方式（[http://www.w3.org/TR/CSS2/box.html#border-style-properties](http://www.w3.org/TR/CSS2/box.html#border-style-properties)）。底部和右侧比顶部和左侧轻；后两者是设定的颜色。有关所有边框选项，请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/border-style](https://developer.mozilla.org/en-US/docs/Web/CSS/border-style)。

# iphone - 跳转到 UITabBarViewController 中的另一个 ViewController

> ID：14072410
> 
> 赞同：0
> 
> 时间：2012-12-28T16:16:09.190
> 
> 标签：iphone, objective-c, ios

我正在开发一个 iOS 应用程序，但我遇到了一个问题：我的应用程序的结构是下一个：

*   UITabBar

    *   UINavigationController 用于列出地点 (1)，当我选择其中一个时，另一个 ViewController 会出现详细信息 (2)

    *   UINavigationController 用于列出我的收件箱（3），当我选择时，另一个 ViewController 会出现详细信息（4）。

我想做下一个：当我在地点详细信息视图中按下一个按钮时（2），为对话的详细信息加载一个新视图（4），这个视图必须像普通视图一样，带有视图导航(3) 好像我要通过视图 (3) 然后 (4) 访问。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:37:52.247

从 View 3 detailButtonTapped 事件调用。[self.navigationController pushViewController:detailVC 动画:YES];

self 是具有详细信息按钮的第三个 Viewcontroller，并且已经被推入导航控制器或通过导航控制器的 initWithRootViewController:3rdController 的 init 方法关联了一个导航控制器

# c# - 求解定界调度的方法

> ID：14072424
> 
> 赞同：4
> 
> 时间：2012-12-28T16:17:03.197
> 
> 标签：c#, artificial-intelligence, scheduling

我正面临一个问题，我在决定/想办法解决它时遇到问题。问题如下：

> 给定要打 N 个电话，以一种方式安排最多的电话。

了解信息：

*   待处理的电话数量*   来电者（将通过电话交谈的人）*   电话类型（提醒、计费、协商等）*   估计电话类型的持续时间（提醒：1分钟，计费：3分钟，协商：15分钟等......）*   待处理的电话数量*   给定电话的理想日期*   给定呼叫的“最小”日期（之前不可能发生......）*   给定呼叫的“最大”日期（不能在...之后发生）*   一天只有8小时

规则：

*   不能在“最低”日期之前或“最高”日期之后拨打电话*   提醒已拨电话奖励 1 分，提醒电话未接 -2 分*   计费电话发出奖励 6 分，计费电话未接 -9 分*   协商通话放置奖励 20 分，协商通话未接 -25 分*   给约翰的电话必须由第一个给他打电话的人打。请注意，它不是必须的，但是，如果你这样做，那个电话将获得额外的积分......

我对 AI 有一点了解，我可以认识到这是一个适合班级的问题，但我只是不知道该采取哪种方法……我应该使用神经网络吗？图搜索？

PS：这不是学术问题。这是我面临的现实世界问题。
PS2：指向系统仍在创建中...这里采样的点不是真实的...
PS3：生成的algol可以执行多次（批处理作业样式），也可以根据性能在线解决.. .
**PS4** : 我的合同规定我将根据：（我拨打的电话数量）+（比率*通话时长）向客户收费，但是有关于服务质量的条款，只拨打提醒电话不好对我来说，因为即使被提醒，人们仍然忘记参加他们的约会......这降低了我提供的服务的“质量”......我还不知道确切的数字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:24:28.660

~~这对人工智能来说似乎不是问题。~~

如果是我，我会创建一组按优先级排序的规则。然后开始填写来电者的时间表。

~~Mabey 规则之一是首先分配最短持续时间的呼叫类型（以满足“最大呼叫数”标准）。~~

这听起来越来越像一个[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)，你可以用通话时长和通话点来代替重量和价格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:22:54.943

这只是一个非常基本的答案，但您可以尝试“蛮力”一个最佳解决方案：

*   使用[Combinatorics](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)库（它也在 NuGet 中）生成给定人员在给定时间段内发出的所有调用排列（例如，展望未来一周）。
*   对于每个排列，按估计的持续时间将调用分组为 8 小时的块，并为它们分配一个日期。
*   Iterate through the chunks - if you get to a call too early, discard that permutation. Otherwise add or subtract points based on whether the call was made before the end date. Store the total score as the score for that permutation.
*   Choose the permutation with the highest score.

# python - CCKeyDerivationPBKDF 线程安全吗？

> ID：14072428
> 
> 赞同：0
> 
> 时间：2012-12-28T16:17:34.517
> 
> 标签：python, c, concurrency, pbkdf2, commoncrypto

我`CCKeyDerivationPBKDF`用来在并发环境中生成和验证密码哈希，我想知道它是否是线程安全的。该函数的文档根本没有提到线程安全，所以我目前使用锁是为了安全起见，但如果我不需要，我宁愿不使用锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:31:21.747

在浏览了源代码后，`CCKeyDerivationPBKDF()`我发现它是“线程不安全的”。虽然代码`CCKeyDerivationPBKDF()`使用了许多线程安全的库函数（例如：）`bzero`，但大多数用户定义的函数（例如：）`PRF`和从这些用户定义的函数调用的底层函数可能是线程不安全的。（例如，由于使用了多个指针和不安全的内存转换，例如 in `CCHMac`）。我建议除非他们使所有底层函数成为线程安全的，或者有一些机制来改变它有条件地线程安全，坚持你的方法，或者修改`commoncrypto`代码以使其成为线程安全并使用该代码。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:54:30.080

在缺乏文档或源代码的情况下，一种选择是构建一个测试应用程序，其中有 10 个线程循环调用 CCKeyDerivationPBKDF，从 10 个不同的参数集中随机选择 10 个已知结果。

每个线程检查调用的结果以确保它是预期的。在这个循环中，每个线程还应该有一个随机时间量的 usleep() 调用（钟形曲线位于每次调用 CCKeyDerivationPBKDF 的时间的 10%），以便尝试尽可能多地交错操作。

您可能希望对其进行调试，以跟踪您能够生成多少并发。使用 10% 的睡眠时间和 10 个线程，您应该能够保持 9 个线程并发。

如果它通过总计 100,000,000 次调用而没有出现错误，我会认为它是线程安全的。当然，您可以运行更长的时间以获得更大的保证。

# java - 除了这种蛮力方法之外的任何更快的解决方案

> ID：14072431
> 
> 赞同：2
> 
> 时间：2012-12-28T16:17:50.623
> 
> 标签：java, algorithm

我一直在 ACM 提交解决这个问题的程序。[问题 ID=1922](http://acm.timus.ru/problem.aspx?space=1&num=1922) ，但我的解决方案在测试 3中不断**超出时间限制。**

我的想法是使用蛮力但有一些分支切断。以下是我的 Java 代码，任何更快的解决方案或改进将不胜感激......我想这根本不难，因为难度只有 195，但我就是无法接受。

终于被采纳了。该算法是先对英雄进行排序，然后从最小的愿望开始。只需 O(n)..

我的 Java 代码是迄今为止最快的[解决方案排名](http://acm.timus.ru/rating.aspx?space=1&num=1922&lang=java)

非常感谢！

```
public class testtest
{
    static boolean[] used;
    // length of heros
    static int ulen;
    // list of heros
    static Wish[] w;
    // number of possible teams
    static int count = 0;
    // and output
    static StringBuilder str = new StringBuilder();

    // add the team

    // check if it is a valid team
    static boolean check(int len)
    {
        for (int i = 0; i < ulen; i ++)
        {
            if (!used[i])
            {
                            // adding another hero makes it reliable, so invalid
                if (w[i].wish <= len + 1)
                {
                    return false;
                }
            }

        }
        return true;
    }

    // search the teams, team size = total, current pick = len, start from root + 1
    static void search(int root, int total, int len)
    {
        if (len >= total) // finish picking len heros
        {
            if (check(total))  // valid
            {
                print(total);  // add to output
            }
            return;
        }
        for (int i = root + 1; i < ulen; i ++)
        {
            if (w[i].wish > len + ulen - i)
            {
                return; // no enough heros left, so return
            }
            else
            if (w[i].wish <= total)  // valid hero for this team
            {
                used[i] = true;
                search(i, total, len + 1);  // search next hero
                used[i] = false;
            }
        }
    }

    public static void main(String[] args) throws IOException
    {
        BufferedReader rr = new BufferedReader(new InputStreamReader(System.in));
        ulen = Integer.parseInt(rr.readLine());
        w = new Wish[ulen];
        for (int i = 0; i < ulen; i ++)
        {
            w[i] = new Wish(i + 1, Integer.parseInt(rr.readLine()));
        }
        Arrays.sort(w);
        used = new boolean[ulen];
        Arrays.fill(used, false);
        for (int i = 1; i <= ulen; i ++)
        {
            for (int j = 0; j <= ulen - i; j ++)
            {
                if (w[j].wish <= i) // this hero is valid
                {
                    used[j] = true;
                    search(j, i, 1);
                    used[j] = false;
                }
            }
        }
        System.out.println(count);
        System.out.print(str);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:01:00.233

这是我在 ~0.00013 秒内（在我的 CPU 上）执行的示例测试：

```
import java.io.*; 
import java.util.List;
import java.util.ArrayList; 
import java.util.Map;
import java.util.HashMap;
import java.util.Map.Entry;
import java.util.Arrays;

/**
 * Hero.java
 *
 * This program solves the Super Hero problem put forth by Timus Online Judge  
 * http://acm.timus.ru/problem.aspx?space=1&num=1922
 *
 * @author  Hunter McMillen
 * @version 1.0 12/29/2012
 */
public class Hero {
    private static Map<Integer, Integer> indexMap = new HashMap<Integer, Integer>();
    private static List<Integer>                indices  = new ArrayList<Integer>();
    private static boolean[]                    used;

    /**
     * Entry point into the application
     *
     * @args command line arguments
     */ 
    public static void main(String[] args) throws IOException {
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    int numHeroes, wish;
    List<Integer> heroes = new ArrayList<Integer>();
    List<List<Integer>> groups;

    // read number of heroes 
    numHeroes = Integer.parseInt(in.readLine());

    // read 'numHeroes' wishes from stdin
    // filter out heroes that have a minimum required that exceeds
    // the number of heroes
    for(int i = 0; i < numHeroes; i++) {
        wish = Integer.parseInt(in.readLine());
        if(wish <= numHeroes)
        heroes.add(wish);
    }

    // split into groups
    groups = reliableGroups(heroes);

    // output results
    System.out.println(groups.size());
    for(List<Integer> g : groups) {
        System.out.println(g.size() + " " + g.toString().replaceAll("[\\]\\[\\,]", ""));
    }
    }

    /**
     * Determines whether a group is effective, meaning that all wishes
     * for that group are met
     *
     * @group The group to evaluate for effectiveness
     */
    public static boolean isEffective(List<Integer> group)  {
    int maxWish = Integer.MIN_VALUE;
    int temp; 

    // find the maximum wish size of all members in group
    for(int i = 0; i < group.size(); i++) {
        if((temp = indexMap.get(group.get(i))) > maxWish)
        maxWish = temp;
    }

    // make sure that the maximum wish size is respected
    return group.size() >= maxWish;
    }

    /**
     * Checks to see if there exists some other superhero
     * that when added to this group makes another effective group
     *
     * @effectiveGroup The current grouping that is effective but might
     *                 not be reliable
     */ 
    public static boolean isReliable(List<Integer> effectiveGroup) {
    for(int i = 1; i <= indices.size(); i++) {
        if(!used[i]) {
        // add another hero to this group to see if it remains effective 
        effectiveGroup.add(i);

        // if it is still effective, then this group is not reliable
        if(isEffective(effectiveGroup))
            return false;

        // remove the hero that was temporarily added
        effectiveGroup.remove(effectiveGroup.size()-1);
        }
    }

    // true if adding any unused member to this group made it ineffective
    return true;
    }

    /**
     * Separates the List<Integer> of heroes into reliable groups
     *
     * @heroes The List of heroes
     */
    public static List<List<Integer>> reliableGroups(List<Integer> heroes) {
    List<List<Integer>> groups = new ArrayList<List<Integer>>();
    boolean       effective    = true;
    int h, current;

    // create HashMap with mapping between hero wish values and their index
    for(int i = 1; i <= heroes.size(); i++) {
        indices.add(i);
        indexMap.put(i, heroes.get(i-1));
    }

    // create an array to track which heroes have been used
    used = new boolean[indices.size()+1];
    Arrays.fill(used, false);

    List<int[]>   combinations;
    List<Integer> tempList;
    for(int i = 1; i <= indices.size(); i++) { 
        h = indexMap.get(i);

        combinations = combination(heroes, h);

        // iterate over all combinations making sure the wish values are below
        // the threshold for this hero at map index `i`
        for(int[] aCombination : combinations) {
        for(int j = 0; j < aCombination.length; j++) {
            current = aCombination[j];
            used[current] = true;
            if(indexMap.get(current) > h) {
            effective = false;
            break;
            }
        }

        // create a List from the integer[] combination
        tempList = asList(aCombination);

        // if the group makeup is reliable, save it
        if(effective && !groups.contains(tempList) && isReliable(tempList))
            groups.add(new ArrayList<Integer>(tempList));

        // reset flags
        effective = true;
        Arrays.fill(used, false);
        }
    }

    return groups;
    }

    /**
     * Helper method that returns a List<Integer> given  
     * an array of primitive ints
     *
     * @array The array to convert to a List<Integer>
     */
    public static List<Integer> asList(int[] array) {
    List<Integer> boxed = new ArrayList<Integer>();

    for(int i = 0; i < array.length; i++) {
        boxed.add(array[i]);
    }

    return boxed;
    }

    /**
     * Generates the intial r combination in ascending order
     * i.e [1, 2, 3, 4, ..., r]
     *
     * @r The size of the intial combination
     */ 
    public static int[] initialCombination(int r) {
    int[] indices = new int[r];

    for(int i = 0; i < r; i++)
        indices[i] = i+1;

    return indices;
    }

    /**
     * Generates the next combination given an array of indices
     * 
     * @indicesIn The array of indices
     * @n         The size of this combination
     */
    public static int[] nextCombination(int[] indicesIn, int n) {
    int[] indices = (int[])indicesIn.clone();
    int r = indices.length;

    // find the rightmost index that is not at its final highest value
    int i = 0;
    for (i = r - 1; i >= 0; i--) {
        if (indices[i] != (i + n - r + 1)) {
        break;
        }
    }

    // return null if no more combinations exist
    if (i == -1)
        return null;

    // increment rightmost index
    indices[i]++;

    // reset all the indices to the right of indices[i]
    // to their smallest possible value.
    for (int j = i + 1; j < r; j++) {
        indices[j] = indices[j-1] + 1;
    }

    return indices;
    }

    /**
     * Generates all r-combinations of the indices array
     * 
     * @heroes The array of heroes wishes
     * @r      The length of the combination to generate
     */
    public static List<int[]> combination(List<Integer> heroes, int r) {
    List<int[]> combinations = new ArrayList<int[]>();
    int[] indices = initialCombination(r);

    while(indices != null) {
        combinations.add(indices);
        indices = nextCombination(indices, heroes.size());
    }

    return combinations;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:27:09.957

首先，我的（Java）结果是最快的。 [http://acm.timus.ru/rating.aspx?space=1&num=1922&lang=java](http://acm.timus.ru/rating.aspx?space=1&num=1922&lang=java)

我之前没有充分利用的事实是，我已经按照他们的意愿对英雄进行了排序。

因此，只需将主循环改为 O(n) 而不是 O(n^2)

```
for (int i = 1; i <= ulen; i ++)
{
    if (w[0].wish <= i)
    {
        used[0] = true;
        search(0, i, 1);
        used[0] = false;
    }
} 
```

# maven - 告诉 Maven 在查看文件系统之前在 repos 中查找父 pom

> ID：14072434
> 
> 赞同：0
> 
> 时间：2012-12-28T16:17:57.100
> 
> 标签：maven, pom.xml

根据 Maven 文档，Maven 在本地找不到父 pom 后，只会在本地和远程 repos 中查找它。我发现解决这个问题的最佳解决方案是添加

```
 <relativePath>.</relativePath> 
```

这显然是一个 kludge 并产生警告（它也应该）。在处理父模块和多模块项目时，Maven 似乎就像文件系统耦合，所以这是我认为让这两者共存而没有明显错误的唯一方法（例如，从文件系统子继承）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:26:03.727

您使用标签引用父 pom：

```
<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>my-parentpom</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent> 
```

`mvn install -N`您必须使用包含父 POM 的目录中的命令将父 pom 安装到本地存储库中。

# ruby-on-rails - 设计多个模型和多个登录表单

> ID：14072442
> 
> 赞同：5
> 
> 时间：2012-12-28T16:18:37.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise

我正在使用 rails 3.2 并设计 2.1 来创建多站点 CMS

# 要求

*   基于站点的 Basecamp 子域。
*   有 3 个“用户”模型。1\. 管理员（超级用户） 2\. 作者（每个人在子域上都有自己的站点）和订阅者（​​阅读站点）。
*   作者：注册是普通的用户名/密码组合，但需要管理员批准。他们的注册表单将有子域字段。
*   订户：通过邀请电子邮件进行注册。
*   需要单独的登录和注册表格

# 可能的解决方案

我一直在寻找并发现很少的解决方案

*   3 设计中的独立模型：

```
$ rails generate devise admin 
$ rails generate devise author
$ rails generate devise subscriber
```

但这会出现以下错误

`$ rails generate devise author /home/gaurish/.rvm/gems/ruby-1.9.3-p286-perf/gems/devise-2.1.2/lib/devise/rails/routes.rb:443:in 'raise_no_devise_method_error!': Admin does not respond to 'devise' method. This usually means you haven't loaded your ORM file or it's being loaded too late. To fix it, be sure to require 'devise/orm/YOUR_ORM' inside 'config/initializers/devise.rb' or before your application definition in 'config/application.rb' (RuntimeError)`

*   STI：数据库中的单个表并为每个用户类型创建一个模型

```
 class Admin < User; end
     class Author < User; end
     class Subscriber < User; end 
```

在这里，我不确定这将如何处理不同的登录/注册工作流程。例如，我计划使用[devise_invitable](https://github.com/scambra/devise_invitable)创建邀请的订户。与作者和订阅者不同，管理员不需要根据子域来确定范围。

这看起来很复杂吗？我希望我能够很好地解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:38:32.007

您不需要拥有三个单独的模型来构建此功能。您要查看的是应用于一个用户模型的角色概念。

有一个提供此功能的 Gem，称为 Rolify，可在[https://github.com/EppO/rolify找到](https://github.com/EppO/rolify)

这将允许您指定哪些用户在哪些角色中，并根据您认为合适的方式更改它们，所有这些都来自一个现有模型。

将角色附加到用户模型后，您可以覆盖 Devise 的注册控制器以检测角色并呈现不同的模板等。您可以通过以下方式执行此操作：

1.  运行`rails generate devise:views`以将 Devise gem 中的视图解压缩到您的项目中
2.  创建您自己的注册控制器：

    ```
    # app/controllers/registrations_controller.rb
    class RegistrationsController < Devise::RegistrationsController
      def new
        super
        # Add logic here to detect Role and display different forms
      end

      def create
        super
      end

      def update
        super
      end
    end 
    ```

3.  在你的 routes.rb 文件中添加正确的设置来告诉 Devise 使用你的新控制器：

    ```
    # app/config/routes.rb
    devise_for :users, :controllers => {:registrations => "registrations"} 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T00:54:55.903

> 管理员不响应“设计”方法。

这可能是因为您还使用了 activeadmin gem，或者使用了一个名为 Admin 的模块，这会导致名称冲突。尝试将模型重命名为 AdminUser

# c# - 在 c# 中获取系统登录用户名，该用户名也适用于 IIS

> ID：14072446
> 
> 赞同：2
> 
> 时间：2012-12-28T16:18:43.777
> 
> 标签：c#, iis, iis-7, iis-6, windows-authentication

我认为获取登录用户名很简单，事实上，它适用于堆栈溢出时可用的大多数响应，但是当我发布网站时，所有方法都失败了。任何人都可以指导我从 Windows 获取登录用户的名称，条件如下。

1.  我只需要登录用户名，所以在你写回复时忘记 AD。

2.  我无法更改为 Windows 身份验证模式，因为用户可能是不属于公司但仍可以访问我的 Intranet 网站的访客用户

3.  由于用户数超过 6000，因此无法更改用户浏览器设置
4.  我无法禁用匿名身份验证，因为我希望每个人都能使用该网站

5.  我已经尝试过以下解决方案，当我在调试模式下运行网站时一切正常，但是当我在 IIS 上发布网站时都无法返回用户名，所以请帮助我提供一些新的解决方案

```
string _windowLogonUserName = System.Environment.UserName.ToString() 
```

```
string _windowLogonUserName = 
    WindowsIdentity.GetCurrent().Name.Remove(0, _adDomainName.Length + 1) 
```

```
string _windowLogonUserName = 
    System.Web.HttpContext.Current.User.Identity.Name.ToString(); 
```

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

```
AppDomain appDomain = Thread.GetDomain();
appDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);
WindowsPrincipal windowsPrincipal = (WindowsPrincipal)Thread.CurrentPrincipal;
Logger.Write("username principal" + windowsPrincipal.Identity.Name);
Request.ServerVariables["LOGON_USER"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:21:25.600

听起来您要在 AD 域之外发布站点。如果服务器不在域中，它将无法验证（甚至接受）Windows 用户。基本的答案是你无法得到它。

如果服务器是内部的（在域上），那么您可以在 IIS 中启用集成的 Windows 身份验证。[这是一个参考](http://technet.microsoft.com/en-us/library/cc754628%28v=ws.10%29.aspx)。

# javascript - 隐藏 当总计为 0 时

> ID：14072452
> 
> 赞同：1
> 
> 时间：2012-12-28T16:18:55.470
> 
> 标签：javascript, jquery, jquery-mobile

我通过 JSON 从 MySQL 获取一些值，并使用它们进行一些总计。

例子：

```
time_tot = time_st + time_mo; 
```

然后我想看看总数是否为0，否则我会做一些处理。但是，当值为 0 时，IF 的第一部分似乎不起作用。另一方面，如果总数 > 0，则 else 工作正常。

```
if (time_tot == 0) { 
// hide image             
} else {
// do process
} 
```

我尝试了各种选项，例如以下，但似乎没有一个工作：

```
if (time_tot == 0) 
if (time_tot === 0)
if (time_tot == "0")
if (time_tot === "0") 
```

我也尝试将值更改为整数，但这也不起作用：

```
time_tot = parseInt(time_st + time_mo);
if (time_tot = 0) { 
```

任何人都知道如何做到这一点或指出我在代码中遇到的任何问题？

**更新：**

HTML：

```
<li>Total Time: <span id="totalTime"></span>hrs</li>
<li class="imagePlaceholder"><div id="image"></div></li> 
```

JS：

```
if (time_tot == 0) { 
// hide image  
$('.imagePlaceholder').addClass('display_none');         
} else {
// do process
} 
```

CSS：

```
.display_none { display:none; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:30:20.873

我建议将您的值解析为数字。（根据您的代码示例，我假设您只期望整数值，而不是浮点数。）

```
var time_tot = parseInt(time_st, 10) + parseInt(time_mo, 10);

if (time_tot === 0) { 
  // show message           
} else {
  // do process
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:49:20.153

由于某种原因，添加类 display_none 不起作用。

我通过将我的 JS 更改为以下内容解决了这个问题，并且效果很好。这个问题与time_tot是否为0无关，而与IF之后的过程有关。

```
$('.imagePlaceholder').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T04:59:09.637

分别解析整数。

```
var t1 = parseInt(time_st);
var t2 = parseInt(time_mot);

var time_tot = t1+t2;

if (time_tot === 0){
} 
```

同样在您的代码中，您在 if 条件中写入了变量，请确保您实际上没有这样做。

# php - 使用 php (jpeg) 优化上传的图片

> ID：14072456
> 
> 赞同：16
> 
> 时间：2012-12-28T16:19:17.330
> 
> 标签：php, gd, jpeg, image-compression, image-optimization

在 Google Chrome 中运行 Page Speed 时，它建议优化/压缩图像。这些图片大部分是用户上传的，所以我需要在上传的过程中对其进行优化。我发现使用 php 优化 jpeg 图像类似于使用以下 GD 函数：

```
getimagesize()
imagecreatefromjpeg()
imagejpeg() 
```

由于我在上传后调整图像大小，因此我已经通过这些函数拉取图像，此外我还使用`imagecopyresampled()`after`imagecreatefromjpeg()`来调整它的大小。

但是，Page Speed 仍然告诉我这些图像可以优化。如何在 php 脚本中完成此优化？在 imagejpeg() 中设置较低的质量也没有什么区别。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T16:39:38.587

imagejpeg 函数是您分配质量的地方。如果您已经将其设置为适当的值，那么您几乎无能为力。

页面速度可能认为所有超过一定尺寸的图像都“需要压缩”，也许只是确保它们都尽可能小（就高度/宽度而言）并被压缩。

[您可以在 pagespeed 文档http://code.google.com/speed/page-speed/docs/payload.html#CompressImages](http://code.google.com/speed/page-speed/docs/payload.html#CompressImages)上找到有关页面速度及其压缩建议的更多信息，该文档描述了一些适当压缩的技术/工具。

我也刚刚阅读了以下内容：

> 有几种工具可以对 JPEG 和 PNG 文件进行进一步的**无损**压缩，而不会影响图像质量。对于 JPEG，我们建议使用**jpegtran**或**jpegoptim**（仅在 Linux 上可用；使用 --strip-all 选项运行）。对于 PNG，我们推荐**OptiPNG**或**PNGOUT**。

所以也许（如果你真的想坚持谷歌的建议）你可以使用 PHP`exec`在文件上传时运行其中一个工具。

* * *

要使用 php 进行压缩，请执行以下操作（听起来您已经在执行此操作）：

`$source_url`图像在哪里`$destination_url`，保存在哪里，`$quality`是一个介于 1 和 100 之间的数字，用于选择使用多少 jpeg 压缩。

```
function compressImage($source_url, $destination_url, $quality) {
    $info = getimagesize($source_url);

    if ($info['mime'] == 'image/jpeg') $image = imagecreatefromjpeg($source_url);
    elseif ($info['mime'] == 'image/gif') $image = imagecreatefromgif($source_url);
    elseif ($info['mime'] == 'image/png') $image = imagecreatefrompng($source_url);

    //save file
    imagejpeg($image, $destination_url, $quality);

    //return destination file
    return $destination_url;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-12T21:18:27.150

修复功能：

```
function compressImage($source_url, $destination_url, $quality) {

    //$quality :: 0 - 100

    if( $destination_url == NULL || $destination_url == "" ) $destination_url = $source_url;

    $info = getimagesize($source_url);

    if ($info['mime'] == 'image/jpeg' || $info['mime'] == 'image/jpg')
    {
        $image = imagecreatefromjpeg($source_url);
        //save file
        //ranges from 0 (worst quality, smaller file) to 100 (best quality, biggest file). The default is the default IJG quality value (about 75).
        imagejpeg($image, $destination_url, $quality);

        //Free up memory
        imagedestroy($image);
    }
    elseif ($info['mime'] == 'image/png')
    {
        $image = imagecreatefrompng($source_url);

        imageAlphaBlending($image, true);
        imageSaveAlpha($image, true);

        /* chang to png quality */
        $png_quality = 9 - round(($quality / 100 ) * 9 );
        imagePng($image, $destination_url, $png_quality);//Compression level: from 0 (no compression) to 9(full compression).
        //Free up memory
        imagedestroy($image);
    }else
        return FALSE;

    return $destination_url;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-24T20:26:07.193

您可以为此使用 Imagick 类。考虑以下包装函数：

```
<?php
    function resizeImage($imagePath, $width, $height, $blur, $filterType = Imagick::FILTER_LANCZOS, $bestFit = false)
    {
        //The blur factor where &gt; 1 is blurry, &lt; 1 is sharp.
        $img= new \Imagick(realpath($imagePath));
        $img->setCompression(Imagick::COMPRESSION_JPEG); 
        $img->setCompressionQuality(40);
        $img->stripImage();
        $img->resizeImage($width, $height, $filterType, $blur, $bestFit);
        $img->writeImage();
    }

?> 
```

阅读有关如何使用 Imagick 调整图像大小的更多信息：[http://php.net/manual/en/class.imagick.php http://php.net/manual/en/imagick.resizeimage.php](http://php.net/manual/en/imagick.resizeimage.php)
[http](http://php.net/manual/en/class.imagick.php) [://php .net/manual/en/imagick.constants.php#imagick.constants.filters](http://php.net/manual/en/imagick.constants.php#imagick.constants.filters)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-29T16:44:32.063

优化图像非常重要。有几个 CMS 平台有模块或插件来执行这个过程。但是，如果您自己编程，则此页面上有一个完整的 php 教程[https://a1websitepro.com/optimize-images-with-php-in-a-directory-on-your-server/](https://a1websitepro.com/optimize-images-with-php-in-a-directory-on-your-server/)您将看到如何实现`imagecreatefromjpeg($SrcImage);`和页面`imagecreatefrompng($SrcImage);`上`imagecreatefromgif($SrcImage);`有文字和视频说明。

# android - 如何在 Cygwin 中打开 .bashrc

> ID：14072459
> 
> 赞同：0
> 
> 时间：2012-12-28T16:19:29.623
> 
> 标签：android, bash, path, android-ndk, cygwin

当我尝试编译我的 Android NDK 程序时，它显示以下错误：

```
Program "${SA}\android-ndk-r8\ndk-build.cmd" not found in PATH 
```

（环境变量“SA”的值为C:)

我在 Windows 7 上使用 Cygwin。如何打开我的`.bashrc`文件？我读到我需要添加以下几行来`.bashrc`解决问题：

```
NDK_HOME=/opt/android-ndk-r8

export NDK_HOME 
```

但我不确定如何打开`.bashrc`和编辑文件，因为我以前从未这样做过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:16:29.747

Cygwin 下有许多文本编辑器可用，默认安装或使用`setup.exe`.

vi/vim 可能是最常见的。它有一点学习曲线。`vimtutor`从命令行运行以获得教程。

如果你很有野心，可以试试emacs。`emacs`从命令提示符运行，然后运行`Control-H` `t`内置教程。

nano 是一个更简单、更用户友好的编辑器。它在屏幕底部显示最常用的命令，包括帮助命令。这可能是最好的开始。

您可以使用记事本或写字板等 Windows 编辑器，但它们可能会将 Windows 样式的行尾标记添加到您编辑的任何文件中。您可以使用`dos2unix`命令（获取更多信息）来解决这个问题，但恕我直言，除非您*真的*更喜欢 Windows 编辑器而不是 Unix 风格的编辑器`man dos2unix`，否则这比它的价值更麻烦。

 *亨利答案中的`echo`命令是一种向文件添加单行的快速而肮脏的方法。如果您想做更复杂的事情（例如，删除或更改行，或添加除最后之外的行），您将需要一个真正的编辑器。要编辑您的`.bashrc`：

```
nano ~/.bashrc 
```

（或使用您选择的其他编辑器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:25:39.657

你可以做

```
echo "NDK_HOME=/opt/android-ndk-r8 export NDK_HOME" >> ~/.bashrc 
```

确保之后重新启动您的 cygwin 窗口*

# android - Android按钮文本对齐问题

> ID：14072466
> 
> 赞同：0
> 
> 时间：2012-12-28T16:20:11.340
> 
> 标签：android, android-layout

考虑以下 XML 和输出：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="5"
        android:gravity="center_vertical|center_horizontal"
        android:paddingTop="0dp"
        android:text="Button"
        android:textSize="100sp" />

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="30"
        android:text="Button"
        android:textSize="100sp" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/7fd7186c412baa5d645d72fa5016f85a.png)

顶部的按钮有足够的空间将文本放置在中间，但仍有部分（底部）被修剪，为什么？

当我使用以下背景时​​，文本仍然没有居中（见下面的输出）

```
<?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
      <shape>
            <gradient
                android:endColor="@android:color/darker_gray"
                android:startColor="@android:color/darker_gray"
                android:angle="270" />
            <stroke
                android:width="0dp"
                android:color="@android:color/darker_gray"/>
            <corners
                android:radius="0dp" />
            <padding
                android:left="0dp"
                android:top="0dp"
                android:right="0dp"
                android:bottom="0dp" />
        </shape>
    </item>

    <item android:state_focused="true" >
       <shape>
            <gradient
                android:endColor="@android:color/darker_gray"
                android:startColor="@android:color/darker_gray"
                android:angle="270" />
            <stroke
                android:width="0dp"
                android:color="@android:color/darker_gray"/>
            <corners
                android:radius="0dp" />
            <padding
                android:left="0dp"
                android:top="0dp"
                android:right="0dp"
                android:bottom="0dp" />
        </shape>
    </item>

    <item>        
        <shape>
            <gradient
                android:endColor="@android:color/darker_gray"
                android:startColor="@android:color/darker_gray"
                android:angle="270" />
            <stroke
                android:width="0dp"
                android:color="@android:color/darker_gray"/>
            <corners
                android:radius="0dp" />
            <padding
                android:left="0dp"
                android:top="0dp"
                android:right="0dp"
                android:bottom="0dp" />
        </shape>
    </item>
</selector> 
```

![在此处输入图像描述](../Images/f97a55ab9ac49eca850e66504ce993ee.png)

（在模拟器 10.1" WXGA 1280x800 屏幕上测试，横向）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:24:12.017

这可能是字体填充。您可以使用`android:includeFontPadding=false`该按钮禁用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T16:36:55.777

因为它是 View 的呈现方式。按钮视图的代码应用了最小的顶部和底部填充。只有当按钮的高度大于文本的高度+默认填充时，渲染器才会开始垂直居中文本。就像它是自然设计的一样。

# java - 在java中等待客户端响应的正确方法是什么？

> ID：14072470
> 
> 赞同：0
> 
> 时间：2012-12-28T16:20:28.343
> 
> 标签：java, sockets, serversocket, server-push

首先，如果您帮助我解决了读取未定义长度 HTTP 响应的问题，我要感谢您。我接受了您的建议，并从 HTTP 响应切换到原始 Java 套接字。但我也有这个小问题。

推送服务器的本质是在收到东西时将它们推送到客户端（在我的情况下，系统使用一个标有设备 ID 的文件。）问题在于 Java 教程中的 KnockKnock 示例，他们的代码：

```
while ((inputLine = in.readLine()) != null) {... 
```

在发送自己的东西之前等待客户端发送一些东西。所以我决定使用：

```
while (true) {
    if ((inputLine=in.readLine())==null) inputLine="";
    ... 
```

如果任何输入解释器得到这个空字符串，那么他们不会做任何事情。

**我的问题**本质上是哪个更好，如果是第一个，我如何继续检查文件以发送所需的内容而不产生线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:29:43.570

第一个实现了为 KnockKnock 示例设想的协议：客户端发送“KnockKnock”，服务器响应。

第二个意义不大。如果客户端有一个与服务器打开的输出流，并且服务器调用`readLine()`，这意味着它正在等待来自客户端的一行。并且调用将阻塞，直到客户端发送一行，或关闭套接字。

看来您不希望客户提供任何输入。在这种情况下，好吧，根本不要打开输入流，也不要调用`readLine()`输入流（显然）。只要您想发送，就将您需要发送的内容直接发送给客户端。

# xcode - 核心数据结构是否使用多个实体？

> ID：14072475
> 
> 赞同：2
> 
> 时间：2012-12-28T16:20:54.683
> 
> 标签：xcode, core-data

我有一个核心数据模型，我正在尝试弄清楚如何构建它。

可以说我有一个`Recipe`. 它有`name`、`title`和`image`5 种成分。

`recipeName`我会用,制作一个食谱实体吗`title`？然后是,的`Image`实体。`recipeName``imageURL`

然后是一个带有, , ,等的`Ingredient`实体...`recipename``ingresient1``ingredient1measurwment``ingredient2`

或者我会在一个食谱实体下做这一切（但如果理论上我创建一个包含 100 种成分的食谱会发生什么？

另外，我使用`recipeName`是因为我认为这就是您将它们联系起来的方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-28T16:43:31.210

根据您的问题，我将创建两个不同的实体。

`Recipe`,`Ingredient`

where`Recipe`与 有一对多关系`Ingredient`。

所以，`Recipe`会有一些属性（你需要的属性）和一个简单的关系叫做 example `toIngredients`。`toIngredients`是一对多的关系。换句话说，一个食谱可以有零个（或者如果你想要的话，可以有一个）成分。

同理，`Ingredient`有一些属性。此外，它有一个一对一（**逆**）关系，称为`toRecipe`它的`Recipe`. 如果您的食谱可以共享成分，您也可以在这里决定使用多对多，但这完全取决于您要建模的内容。

关于关系规则，`toIngredients`有一个级联规则。当您删除一个食谱时，它的所有成分也将被删除。相反，`toRecipe`将是 nullify 类型。

这里有一个简单的架构。

![在此处输入图像描述](../Images/90a0f902ad9d4eac832daa1cbd92e1a6.png)

其中`toIngredients`设置如下：

![在此处输入图像描述](../Images/873c746c57ababe93c9133e8badd3e52.png)

并且`toRecipe`是：

![在此处输入图像描述](../Images/07b1cb12cd604ef036e6f8e9f70ae2cc.png)

请注意，*可选*标志为`toRecipe`未选中。这意味着只有存在配方时才能存在成分。如果你不遵守这个规则，Core Data 会抱怨这个。

关于图像，这取决于图像的大小。遵循 Marcus Zarra 规则来决定如何设计您的模型[Core Data - Storing Images (iPhone)](https://stackoverflow.com/questions/2090028/core-data-storing-images-iphone)。

# css - 如何使用 CSS 禁用键盘键？

> ID：14072479
> 
> 赞同：7
> 
> 时间：2012-12-28T16:21:13.773
> 
> 标签：css

我们可以用 CSS 禁用键盘键（Ctrl+A/Ctrl+C），这样没有人可以在我的网站上使用键盘选择所有快捷键吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T16:22:43.563

不，CSS 不能影响浏览器对键盘的响应。JavaScript 可以，但 JavaScript 也可以关闭。

换句话说：你不能那样做，即使你这样做了，你也不能指望它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:23:04.587

不使用 CSS，但是如果浏览器没有禁用该功能，则可以使用 JavaScript。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T16:25:15.650

我认为css是不可能的。

如果您想尝试使用 javascript，请查看以下链接。

[http://www.heckdesigns.com/tutorials/tutorial-disabling-keyboard-keys-with-javascript/](http://www.heckdesigns.com/tutorials/tutorial-disabling-keyboard-keys-with-javascript/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T16:45:30.353

试试这个 CSS

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

（来自[这个问题](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)的答案）

虽然最初的问题是关于用鼠标选择文本，但这个 css 似乎也禁用了 ctrl+a / ctrl+c 功能（至少在示例项目的快速测试中）

# inno-setup - 如何在 Files 部分的 Source 参数中使用目录的父级？

> ID：14072482
> 
> 赞同：1
> 
> 时间：2012-12-28T16:21:23.543
> 
> 标签：inno-setup

我一生都无法弄清楚如何指向该`[Files]`部分中源目录的父级。

这是我需要的一个例子：

```
[Files]
Source: "{parentofsrc}\Documentation\\*";` 
DestDir: "{pf}\MyProgram\"; Flags: external` 
```

有谁知道如何做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:24:40.107

您可以使用`"{src}\..\Documentation\"`.

该`..`符号表示“当前文件夹的父级，因此在上面的代码段中，它的意思是“从`{src}`文件夹开始，向上移动一层（ 的父级`{src}`），然后向下进入`Documentation`那里的文件夹。

# javascript - 覆盖 _renderItem 和 _renderMenu

> ID：14072487
> 
> 赞同：4
> 
> 时间：2012-12-28T16:21:49.597
> 
> 标签：javascript, jquery, jquery-ui

如何仅覆盖 _renderItem `#global-search`？

```
$("#global-search").autocomplete({
   //       
})._renderMenu = function(ul, items) {
   var self = this;
   ul.append('<table class="ac-search-table"></table>');
   $.each( items, function( index, item ) {
     self._renderItem( ul.find("table"), item );
   });
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T16:36:13.273

请记住，您可以通过以下方式处理由 jQuery UI 工厂方法 ( `_create`)创建的小部件的特定实例`data`：

```
var widgetInst = $("#global-search").autocomplete({}).data('ui-autocomplete'); 
```

...或者，从 jQuery UI 1.12 开始，通过[instance()](http://api.jqueryui.com/1.12/autocomplete/#method-instance)辅助方法：

```
var widgetInst = $("#global-search").autocomplete('instance'); 
```

因此，您可以用自己的方法覆盖其方法：

```
widgetInst._renderMenu = function(ul, items) {
  var self = this;
  ul.append('<table class="ac-search-table"></table>');
  $.each( items, function( index, item ) {
    self._renderItem( ul.find("table"), item );
  });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:29:38.653

你有几个选择：

1.  您可以覆盖该`_renderItem`函数，以便它在内部进行一些对象比较，并调用原始`_renderItem`函数或执行您的自定义代码。

2.  您可以创建一个继承`autocomplete`并覆盖那里的功能的新小部件。

# api - Scala 的 List 类上应该有一个 indicesWhere 方法吗？

> ID：14072490
> 
> 赞同：1
> 
> 时间：2012-12-28T16:22:18.143
> 
> 标签：api, list, scala

Scala 的 List 类具有`indexWhere`方法，这些方法返回与提供的谓词匹配的 List 元素的单个索引（如果不存在，则返回 -1）。

我最近发现自己想收集与给定谓词匹配的 List 中的*所有*索引，并发现自己编写了如下表达式：

```
list.zipWithIndex.filter({case (elem, _) => p(elem)}).map({case (_, index) => index}) 
```

这里`p`是一些用于选择匹配元素的谓词函数。对于这样一个简单的要求，这似乎有点笨拙（但我可能会错过一两个技巧）。

我有一半希望`indicesWhere`在 List 上找到一个可以让我改写的函数：

```
list.indicesWhere(p) 
```

像这样的东西应该是 Scala 的 List API 的一部分，还是有比我上面展示的更简单的表达式来做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:11:04.630

好吧，这是一个更短的表达式，它消除了你的一些语法噪音（修改为使用 Travis 的建议）：

```
list.zipWithIndex.collect { case (x, i) if p(x) => i } 
```

或者：

```
for ((x,i) <- list.zipWithIndex if p(x)) yield i 
```

但是如果你经常使用它，你应该将它添加为一个隐式方法：

```
class EnrichedWithIndicesWhere[T, CC[X] <: Seq[X]](xs: CC[T]) {
  def indicesWhere(p: T => Boolean)(implicit bf: CanBuildFrom[CC[T], Int, CC[Int]]): CC[Int] = {
    val b = bf()
    for ((x, i) <- xs.zipWithIndex if p(x)) b += i
    b.result
  }
}
implicit def enrichWithIndicesWhere[T, CC[X] <: Seq[X]](xs: CC[T]) = new EnrichedWithIndicesWhere(xs)

val list = List(1, 2, 3, 4, 5)
def p(i: Int) = i % 2 == 1
list.indicesWhere(p)         // List(0, 2, 4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T16:35:33.247

您可以使用 unzip 替换地图：

```
list.zipWithIndex.filter({case (elem, _) => p(elem)}).unzip._2 
```

# python - App Engine：一对多关系的结构化属性与参考属性

> ID：14072491
> 
> 赞同：8
> 
> 时间：2012-12-28T16:22:20.980
> 
> 标签：python, database, google-app-engine, database-design

我设计数据存储的背景来自 iOS 上的 Core Data，它支持与另一个实体具有一对多关系的属性。

我正在开发一个 App Engine 项目，该项目目前具有三种实体类型：

*   `User`，它代表使用该应用程序的人。
*   `Project`，它代表一个项目。A`User`可能与许多项目相关联。
*   `Post`，这是a背后的主要内容`Project`。A`Project`可能有很多帖子。

目前，`User`有一个属性，即与实体`projects`的一对多关系。有一个属性，即与实体的一对多关系。`Project``Project``posts``Post`

在这种情况下，Datastore 的 Reference Property 还是 NDB 的 Structured Property 更适合这项工作（两者在概念上有何不同）？有没有更好的方法来构建我的数据？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T17:29:58.607

通过引用属性，您可能是指关键属性。这是对另一个数据存储实体的引用。它存在于 db 和 ndb API 中。使用这些，您可以通过将许多实体指向另一个实体的键来建模多对一关系。

结构化属性是完全不同的野兽。它允许您定义数据结构，然后将其包含在另一个实体中。

这是文档中的一个示例，您在其中包含单个联系人的多个地址：

```
class Address(ndb.Model):
  type = ndb.StringProperty() # E.g., 'home', 'work'
  street = ndb.StringProperty()
  city = ndb.StringProperty()

class Contact(ndb.Model):
  name = ndb.StringProperty()
  addresses = ndb.StructuredProperty(Address, repeated=True)

guido = Contact(name='Guido',
                addresses=[Address(type='home',
                                   city='Amsterdam'),
                           Address(type='work',
                                   street='Spear St',
                                   city='SF')])

guido.put() 
```

对于您的特定应用程序，我建议使用 NDB（最好使用可用的最新版本的 api），其中包含以下内容：

后模型包含在项目模型下作为重复的结构化属性。用户包括一个重复的 KeyProperty，其中包含他们有权访问的项目的密钥。

为了使它更复杂一点，您可以创建另一个模型来表示项目和权限/角色，然后将其作为重复的结构化属性包含在用户模型中。

您要保留密钥的主要原因是根据 HRD 的最终一致性保持数据可访问。

如果您需要更多帮助，请告诉我。

编辑：

为了澄清，这是建议的结构：

楷模：

*   用户
*   用户项目映射（可选，需要处理权限）
*   项目
*   邮政

用户模型应包含 User-Project-Mapping 作为重复的结构化属性。

项目模型应包含 Post 作为重复的结构化属性。

User-Project-Mapping 只需要包含对 Project 的 Key 引用和相关的权限表示。

由于这听起来像是一个商业项目，如果您需要进一步的帮助，我很乐意为您咨询。希望你有足够的成功！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-06T08:13:21.613

还有一点没有提到并且可能相关：插入到**StructuredProperty**中的实体“不是成熟的实体”，如[文档的这一部分中所述](https://developers.google.com/appengine/docs/python/ndb/properties#structured)。以下是完整的引用（它指的是@Sologoub 的答案中提到的相同示例）：

> 尽管 Address 实例使用与模型类相同的语法定义，但它们不是成熟的实体。他们在 Datastore 中没有自己的密钥。它们不能独立于它们所属的联系人实体进行检索。

鉴于您不能在不复制数据的情况下重用实体的属性，这可能会给设计带来一些限制。另一方面，**KeyProperty**引用另一个实体的键，因此以更“关系”的方式表示实体关系。并且**KeyProperties**也可以重复：只需包含`repeated=True`参数。

# java - 用 Java 编写没有任何库的 3D 形状

> ID：14072492
> 
> 赞同：2
> 
> 时间：2012-12-28T16:22:22.843
> 
> 标签：java, graphics, 3d

我想知道是否有任何简单的代码示例或指南可以在不使用 Java3D 或 OpenGL 等任何 3D 库的情况下在 Java 中创建 3D 矩形！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:21:48.943

3D 矩形称为矩形棱镜。

定义 3D 形状并不是很困难。这是直角棱镜的一种定义。

```
import java.awt.Graphics;

public class RectangularPrism {

    protected Point3D originPoint;
    protected Point3D xPoint;
    protected Point3D yPoint;
    protected Point3D zPoint;

    public RectangularPrism() {

    }

    public RectangularPrism(Point3D originPoint, Point3D xPoint, 
            Point3D yPoint, Point3D zPoint) {
        this.originPoint = originPoint;
        this.xPoint = xPoint;
        this.yPoint = yPoint;
        this.zPoint = zPoint;
    }

    public void setOriginPoint(Point3D originPoint) {
        this.originPoint = originPoint;
    }

    public void setxPoint(Point3D xPoint) {
        this.xPoint = xPoint;
    }

    public void setyPoint(Point3D yPoint) {
        this.yPoint = yPoint;
    }

    public void setzPoint(Point3D zPoint) {
        this.zPoint = zPoint;
    }

    public void render(Graphics g, Point3D viewPoint) {

    }

    public class Point3D {
        protected int x;
        protected int y;
        protected int z;

        public int getX() {
            return x;
        }

        public void setX(int x) {
            this.x = x;
        }

        public int getY() {
            return y;
        }

        public void setY(int y) {
            this.y = y;
        }

        public int getZ() {
            return z;
        }

        public void setZ(int z) {
            this.z = z;
        }

    }

} 
```

它正在创建需要一些计算的渲染方法。对于您要定义的每个 3D 形状，该计算都会有所不同。

您的调用例程必须弄清楚渲染所有 3D 形状的顺序。基本上，必须首先渲染最远的 3D 形状，以便更近的 3D 形状正确重叠。

3D 库不仅可以解决所有这些问题，而且还进行了优化，以便可以在尽可能短的时间内渲染 3D 场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:30:23.120

您可以使用 java.awt.Graphics.draw3DRect() 方法。
[http://www.java-examples.com/draw-3d-rectangle-square-applet-window-example](http://www.java-examples.com/draw-3d-rectangle-square-applet-window-example)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:35:23.863

我已经实现了简单的查看器，您可以在[http://dl.dropbox.com/u/14767221/projection.7z下载](http://dl.dropbox.com/u/14767221/projection.7z)

# oracle11g - 如何从 Oracle sql developer 生成数据模型图

> ID：14072496
> 
> 赞同：1
> 
> 时间：2012-12-28T16:22:43.263
> 
> 标签：oracle11g, oracle-sqldeveloper, datamodel

我想从现有的 oracle 数据库生成数据模型图。

我尝试使用 SQL Developer 3.2.20.09 并按照另一篇文章中的步骤**[和](https://stackoverflow.com/questions/6580529/how-to-generate-e-r-diagram-using-oracle-sql-developer)**oracle 的**[演示](http://download.oracle.com/otn_hosted_doc/sqldev/ImportDataModel/importdatamodel_viewlet_swf.html)**。

但我没有成功。这有点奇怪，因为我可以看到**除表格之外的所有其他类型的对象。**

这是**我的步骤：** 文件->数据建模器->导入->数据字典->当前数据库连接->下一步->当前模式->下一步

![没有显示表格](../Images/c18fdb22b2e3ad635141e80728c7bf7d.png)

你有什么主意吗？

提前致谢。

**编辑：**

我认为这是我的数据库中的一个特定问题。**我无法用 SQL Developer 弄清楚。最后，我使用 TOAD Data Modeler 生成 E/R 图。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:25:56.433

由于没有其他人提出的解决方案，我将我的“解决方案”标记为答案。

我认为这是我的数据库中的一个特定问题。

我无法用 SQL Developer 弄清楚。最后，我使用 TOAD Data Modeler 生成 E/R 图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T14:20:27.933

这是我们正在运行以获取 SQL Developer Data Modeler 4.1 版中的表列表的内容：

```
SELECT TABLE_NAME, TABLE_TYPE, TABLE_TYPE_OWNER
FROM dba_all_tables a
WHERE IOT_NAME IS NULL
AND (IOT_TYPE  IS NULL
OR IOT_TYPE     = 'IOT')
AND NESTED      ='NO'
AND a.OWNER     =?
AND SECONDARY   ='N'
AND NOT EXISTS
  (SELECT 1
  FROM dba_queue_tables c
  WHERE OWNER       =?
  AND c.QUEUE_TABLE = a.TABLE_NAME
  )
ORDER BY TABLE_NAME 
```

您的连接是否有权访问 DBA_ 视图？

如果我们看不到对 DBA_ 视图的访问，我们下拉到 ALL_ 视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T00:57:51.933

您可以按照本教程 [https://www.youtube.com/watch?v=bpKJmCoBy2c](https://www.youtube.com/watch?v=bpKJmCoBy2c)进行操作。为了更方便，我建议另一种方法：您可以将表从连接拖放到关系屏幕中以生成模型，然后按照上述教程中的步骤创建图表。希望这有帮助:)

# google-chrome - 对 html 标签的属性使用 Chrome Webrequest 使其不可见

> ID：14072498
> 
> 赞同：0
> 
> 时间：2012-12-28T16:23:01.140
> 
> 标签：google-chrome, google-chrome-extension

在谷歌浏览器上，我想截取一些html标签的属性，如果属性有一定的值就做一个动作。例如，假设我有一个列表项，它有一个名为 user 的属性：

```
<li class="MyClass" user="BadUser"> ... </li> 
```

我想要的是使这个项目的内容不可见，删除它，无论如何。

我是这些扩展的新手（我在这个小时内开始看它们）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:45:17.867

您可以为此目的使用内容脚本。在清单文件中声明脚本（`myscript.js`在下面的示例中）：

```
{
  "name": "Extension name",
  ...
  "content_scripts":
  [
    {
      "matches": ["*://*/*"],
      "js": ["jquery.js", "myscript.js"]
    }
  ],
  ...
} 
```

然后在`myscript.js`编写所需的代码中，像这样（使用 jQuery，它也作为内容脚本注入）：

```
$('[user]').each(function()
{
  $(this).removeAttr("user");
}); 
```

这是为了删除属性本身。当然，您可以删除整个元素调用`remove()`而不是`removeAttr()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:16:49.707

在您的内容脚本中：

要从 DOM 中删除，请使用此

```
$('[my_tag]').remove(); 
```

要使用每个元素，您可以使用它：

```
$.each($('[my_tag]'), function(index, element) { 
  console.log(index + ': ' + element); 
}); 
```

# webrtc - 创建 WebRTC PeerConnection 时，我可以跳过 ICE (STUN/TURN) 发现过程吗？

> ID：14072501
> 
> 赞同：11
> 
> 时间：2012-12-28T16:23:11.487
> 
> 标签：webrtc

在我的设置中，我在云中有一个自定义服务器来处理音频和视频，所以我不需要（也不想要）整个“我在哪里以及我的私人和公共地址等”。发现过程。本质上我想要 SDP 报价并且不关心 IP 地址/端口；该提议发送到服务器，服务器选择编解码器并获取 SRTP 密钥，并回复一个 SDP 答案给浏览器，其中将包含一个公共地址、编解码器选择和它的密钥。理想情况下，浏览器开始向服务器发送媒体，服务器只需将“对等”媒体从它的来源发送回来（这将通过任何 UDP 友好的 NAT 设备返回）。

我知道这在技术上是可行的，因为我已经用 Win32/OSX 桌面客户端做到了这一点......问题是，这可能用 WebRTC`RTCPeerConnection`吗？我已经尝试了一些配置类型，例如`{}`，`{ "iceServers": [] }`但它似乎仍然经历了发现回转。是否有其他方法可以缩短流程？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T00:19:12.740

不，你不能跳过这个过程，因为 WebRTC 实现强制使用 ICE 和 STUN 检查来修复[一些安全问题](https://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-security-03#section-4.2.3)。因此，当前的 Chrome 实现将强制对 ICE 候选中协商的 IP/端口进行 STUN 检查。

但是，是的，有许多应用程序在没有此要求的情况下工作。有一天，我们必须更改为更好、更安全的实现。现在这一天...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-23T15:12:18.543

不，你不能在 webrtc 浏览器中跳过它，但是 webrtc 设备（这里是你的网关）可以通过只实现 ICE Lite 来简化这个过程。

# matlab - 需要帮助澄清matlab的输入对话框

> ID：14072504
> 
> 赞同：0
> 
> 时间：2012-12-28T16:23:30.017
> 
> 标签：matlab

假设我有以下代码：

```
%%input dialog box%%%
prompt = {'Enter gain:','Enter range:'};
dlg_title = 'Enter values';
num_lines= 1;
def     = {'20','256'};       %default
answer  = inputdlg(prompt,dlg_title,num_lines,def);

%%%to get the two entered values%%%%
A = getfield(answer,{1});    %first input field
A = str2double(A);
B = getfield(answer,{2});   %second input field
B = str2double(B); 
```

使用“带有结构的动态字段名称而不是`getfield`”是什么意思？

如何对复杂且小于零的输入值使用循环，以请求用户提供另一个兼容输入？

我尝试了以下循环，但它不起作用。为什么？

```
while isnan(A) || ~isreal(A) || A<0
    prompt = {'Enter gain:'%'Enter range:'};
    dlg_title = {'undefine!!'};
    num_lines= 1;
    def     = {'',''}%{'20','256'};       %default
    answer  = inputdlg(prompt, dlg_title, num_lines, def);
    A = getfield(answer,{1});    %first input field
    A = str2double(A);
    %A = str2double(input('Enter the value of module(mm) : ', 's'));
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:12:48.043

`getfield`不需要调用，坦率地说没有任何意义。该变量`answer`是一个`cell`数组而不是一个`struct`所以你不需要使用`getfield` 粘贴代码的后半部分可以替换为：

```
A = str2double( answer{1} );
B = str2dobule( answer{2} ); 
```

关于循环直到您获得有效输入。如果输入有效，您可以使用`boolean`标志、a `while`、循环和 a `function`（让我们称之为`areInputsValid()`）返回 true

```
validInput = false;

while (~validInput)
  % input dialog box
  %  code here

  % get the two entered values
  &  code here

  validInput = areInputsValid(A, B);
end 
```

# jquery - jquery从列表1中删除不在列表2中的项目

> ID：14072505
> 
> 赞同：3
> 
> 时间：2012-12-28T16:23:29.443
> 
> 标签：jquery

我有一个看似非常简单的问题，但我的带宽现在是如此有限，并且已经搜索过但发现[一个仅适用于 C# 的相关问题](https://stackoverflow.com/questions/4066119/remove-items-from-list-1-not-in-list-2?rq=1)，我的意思是还没有运气。

HTML：

```
<ul class="first">
  <li data-id="1">One</li>
  <li data-id="2">Two</li>
  <li data-id="3">Thre</li>
  <li data-id="4">Four</li>
  <li data-id="5">Five</li>
  <li data-id="6">Six</li>
</ul>
<ul class="second">
  <li data-id="1">One</li>
  <li data-id="2">Two</li>
  <li data-id="3">Thre</li>
  <li data-id="4">Four</li>
</ul> 
```

我想从第一个（因此是五个和六个）中删除最后两个项目，因为它们在第二个中不存在。顺序实际上并不重要。简化我的问题的示例。基本上没有明确的想法来实现这一点，抱歉，所以每当我尝试使用 .length 检查时，我都会删除所有第一个项目。

非常感谢任何提示。谢谢

更新：对不起，我的错。“顺序实际上并不重要”：我的意思是列表可能是无序的，例如：

```
<ul class="second">
  <li data-id="3">Thre</li>
  <li data-id="1">One</li>      
  <li data-id="4">Four</li>
  <li data-id="2">Two</li>
</ul> 
```

也适用于第一种。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T16:28:42.023

如果您正在通过`data-id`属性评估等效性：

```
$('.first li').filter(
    function(){
        return !$('.second li[data-id="' + $(this).data('id') + '"]').length;
    }).remove();​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hFLYu/)。

参考：

*   [`data()`](http://api.jquery.com/data/).
*   [`filter()`](http://api.jquery.com/filter/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:26:05.977

```
$('ul.first li:gt(3)').remove(); 
```

或者：

```
var $first = $('.first li'), $second = $('.second li');

$first.filter(function(){
    return !$second.filter('[data-id='+ this.dataset.id +']').length
}).remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:32:46.603

试试这个

```
var set1 = $('.first').children(),
    set2 = $('.second').children();

set1.filter(function() {
    var testingId = $(this).data('id'),
        found = set2.filter(function() {
            return $(this).data('id') === testingId;
        });

    return found.length === 0;
}).remove(); 
```

**演示在** [http://jsfiddle.net/gaby/Ehewz/](http://jsfiddle.net/gaby/Ehewz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T16:36:44.867

```
// start by building a list of elements in list two.
var list2 = {};
$('.second li').each(function(){
    // by data id.
    list2[$(this).attr('data-id')] = true;
    // by text
    // list2[$(this).text()] = true;
});
// Then remove any values from the first list where it's data-id isn't in our list.
$('.first li').each(function(){
    // Make replacement here to match text.
    if( ! list2[ $(this).attr('data-id') ] ){
    // if( ! list2[ $(this).text() ] ){
        $(this).remove();
    }
}); 
```

# share - 如何自动分享到facebook的链接

> ID：14072506
> 
> 赞同：-1
> 
> 时间：2012-12-28T16:23:34.793
> 
> 标签：share, facebook-likebox

我有一个链接[http://news.bamlike.com/index.php](http://news.bamlike.com/index.php)。当我点击链接查看文章。

如果您已登录 facebook 并在此应用程序中获得某些权限并接受。它会在 facebook 时间轴上自动分享该链接（最近的活动）。就像你只是点击它一样。

演示图片：[http ://tapchidesign.hostoi.com/help2.jpg](http://tapchidesign.hostoi.com/help2.jpg)

我该怎么做 ？非常感谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:57:43.143

在每次页面加载时，检查登录用户是否已验证您的应用程序。如果有，请发布一个开放图形内置“读取”操作。阅读[有关内置操作的文档](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/)

# python - Windows 7 上 Python 的 Mutagen 不起作用

> ID：14072507
> 
> 赞同：1
> 
> 时间：2012-12-28T16:23:35.510
> 
> 标签：python, windows-7, mp3, mutagen

一段时间以来，我一直在我的 Windows 7 机器上使用 Python 2.7 的 mutagen 包（版本 - mutagen-1.20），不幸的是它今天早些时候停止工作。

我已经重新安装了这个包，删除了所有属于这个包的文件，然后重新安装了一遍，但是所有的努力都是徒劳的。让我感到困惑的是，直到昨天这一切都运作良好。有人可以指出我可能出了什么问题。我在下面提到了一些代码和日志以供参考。谢谢！

我还安装了 eyed3 包，这对于这里使用的同一个 mp3 文件运行良好。不幸的是，eyed3 没有诱变剂那么令人印象深刻，我陷入了这种奇怪的境地。

mutagen.py - 用于测试的 Python 代码（example.mp3 位于脚本所在的同一目录中）：

```
from mutagen.mp3 import MP3
audio = MP3("example.mp3")
print audio.info.length, audio.info.bitrate 
```

命令提示符的错误日志：

```
C:\Python27>python mutagen.py
Traceback (most recent call last):
  File "mutagen.py", line 1, in <module>
    from mutagen.mp3 import MP3
  File "C:\Python27\mutagen.py", line 1, in <module>
    from mutagen.mp3 import MP3
ImportError: No module named mp3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:26:08.943

将您的 python 文件命名为其他名称。因为它被命名为 mutagen.py，所以你的 import 语句得到了错误的模块。试试 mutagen_test.py。

# ruby-on-rails - bootstrap-sass 与纯 twitter 引导程序

> ID：14072508
> 
> 赞同：3
> 
> 时间：2012-12-28T16:23:40.567
> 
> 标签：ruby-on-rails, twitter-bootstrap, bootstrap-sass

我知道 Twitter Bootstrap 可以在从 Bootstrap 网站下载时进行定制。bootstrap-sass gem 怎么样 - 它总是包含所有功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:32:43.397

如果您查看文档，您会发现您可以选择包含所有 js，或者仅包含您想要`#= require`在 js/coffee 文件中使用的脚本。

[https://github.com/thomas-mcdonald/bootstrap-sass#javascripts](https://github.com/thomas-mcdonald/bootstrap-sass#javascripts)

同样适用于样式表，您可以使用`@import`仅包含您想要的文件。您可以在此处查看文件架构：

[https://github.com/thomas-mcdonald/bootstrap-sass/tree/master/vendor/assets/stylesheets](https://github.com/thomas-mcdonald/bootstrap-sass/tree/master/vendor/assets/stylesheets)

gem 实际上是一个引擎，它基本上只是添加资产，就像 jquery-rails gem 添加 jquery 一样，您可以像在`vendor/assets/javascripts`文件夹中有 jquery.js 文件一样使用它。

# core-plot - CorePlot CPTXYGraph Y 轴整数非十进制

> ID：14072522
> 
> 赞同：1
> 
> 时间：2012-12-28T16:24:30.847
> 
> 标签：core-plot

在 CorePlot CPTXYGraph 中是否可以在 Y 轴上显示 int 值而不是十进制值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:47:58.250

just create a number formatter and apply it to the y axis. something like this

```
 NSNumberFormatter *yLabelFormatter = [[NSNumberFormatter alloc] init];
    [yLabelFormatter setGeneratesDecimalNumbers:NO];

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *y = axisSet.yAxis;

    y.labelFormatter = yLabelFormatter 
```

# python - OAuth 的 GAE 导入失败

> ID：14072523
> 
> 赞同：2
> 
> 时间：2012-12-28T16:24:34.713
> 
> 标签：python, api, google-app-engine, yelp

我正在尝试与 Yelp 建立我的第一个 API 连接，我在 Python 上使用 GAE。为此，我使用了以下示例：[https](https://github.com/Yelp/yelp-api/blob/master/v2/python/search.py) ://github.com/Yelp/yelp-api/blob/master/v2/python/search.py ​​ 起初我只是尝试通过以下定义运行代码应用程序.yaml

```
handlers:
- url: /search
script: search.py 
```

但是，当我加载页面时，它会出现以下错误：*No module named oauth2*。我已经阅读了许多似乎涵盖此错误的主题，但没有一个真正有助于解决它。我还尝试导入一些答案中提到的 oauth2client ，但这也未被接受。

唯一被系统接受的是

```
from google.appengine.api import oauth 
```

因此，我尝试使用此模块，但立即遇到了另一个问题。我通过在解析器定义中将它们定义为默认值来填写我的凭据（consumer_key、c​​onsumer_secret、token、token_secret）。为了复制[https://github.com/Yelp/yelp-api/tree/master/v2/python](https://github.com/Yelp/yelp-api/tree/master/v2/python)上的示例请求，我还为“term”（条形图）和“location”（sf）添加了一个默认值。

然而，当用这个加载页面时，它给了我错误*'module' object has no attribute 'Consumer'*，所以这似乎也不是解决方案。如前所述，这是我第一次设置这样的系统，所以我可能遗漏了一些明显的东西。非常感谢您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:56:11.497

您不能像那样替换模块，您所指的脚本与[oauth2](http://pypi.python.org/pypi/oauth2/)库一起使用，这与[GAE OAuth API](https://developers.google.com/appengine/docs/python/oauth/overview)不同（这就是为什么您得到的“模块”对象没有属性“消费者”）。

正如 yelp-api 的[README](https://github.com/Yelp/yelp-api/tree/master/v2/python)中所解释的，首先您需要安装 oauth2 模块。请注意，您需要将已安装的模块（或源代码）复制到您的 GAE 项目中，以便在部署时将其上传到 GAE。

# ruby-on-rails - 使用 RVM (OSX 10.8) 安装 Ruby 时出错

> ID：14072524
> 
> 赞同：3
> 
> 时间：2012-12-28T16:24:44.247
> 
> 标签：ruby-on-rails, ruby, rvm

尝试使用 RVM (rvm install ruby​​ 1.9.3) 安装 Ruby 1.9.3 时，出现以下错误：

```
Searching for binary rubies, this might take some time.

No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p362.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.

Fetching yaml-0.1.4.tar.gz to /Users/christiaan/.rvm/archives
Extracting yaml to /Users/christiaan/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/christiaan/.rvm/src/yaml-0.1.4.

Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/christiaan/.rvm/usr', please read /Users/christiaan/.rvm/log/ruby-1.9.3-p362/yaml/configure.log

Compiling yaml in /Users/christiaan/.rvm/src/yaml-0.1.4.

Error running 'make', please read /Users/christiaan/.rvm/log/ruby-1.9.3-p362/yaml/make.log
Installing Ruby from source to: /Users/christiaan/.rvm/rubies/ruby-1.9.3-p362, this may take a while depending on your cpu(s)...
ruby-1.9.3-p362 - #downloading ruby-1.9.3-p362, this may take a while depending on your connection...
ruby-1.9.3-p362 - #extracted to /Users/christiaan/.rvm/src/ruby-1.9.3-p362 (already extracted)
ruby-1.9.3-p362 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/christiaan/.rvm/rubies/ruby-1.9.3-p362 --with-opt-dir=/Users/christiaan/.rvm/usr', please read /Users/christiaan/.rvm/log/ruby-1.9.3-p362/configure.log

There has been an error while running configure. Halting the installation. 
```

我已经尝试了类似问题的所有提示，但似乎无法解决这个问题。

YAML 日志（生成的第一个错误日志）：

```
[2012-12-28 16:18:06] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/christiaan/.rvm/usr
current path: /Users/christiaan/.rvm/src/yaml-0.1.4
command(4): env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/christiaan/.rvm/usr
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... config/install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for gcc... /usr/local/bin/gcc-4.2
checking whether the C compiler works... no
configure: error: in `/Users/christiaan/.rvm/src/yaml-0.1.4':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

RVM 日志（生成的第二个错误日志）：

```
[2012-12-28 16:18:08] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/christiaan/.rvm/rubies/ruby-1.9.3-p362 --with-opt-dir=/Users/christiaan/.rvm/usr
current path: /Users/christiaan/.rvm/src/ruby-1.9.3-p362
command(7): env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/christiaan/.rvm/rubies/ruby-1.9.3-p362 --with-opt-dir=/Users/christiaan/.rvm/usr
checking build system type... x86_64-apple-darwin12.2.0
checking host system type... x86_64-apple-darwin12.2.0
checking target system type... x86_64-apple-darwin12.2.0
checking for C compiler default output file name... 
configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T16:58:30.457

你的主要问题是：

```
configure: error: C compiler cannot create executables 
```

因此，寻找解决该问题的方法。喜欢：

```
rvm install 1.9.3 --with-gcc=clang 
```

其他示例：

*   [如何在 Mac OS X Lion 中安装 Ruby 1.9.3？](https://stackoverflow.com/questions/8139138/how-can-i-install-ruby-1-9-3-in-mac-os-x-lion)
*   [为什么我会收到“C 编译器无法创建可执行文件”（在此之前成功编写 C 代码并对其进行编译）？](https://stackoverflow.com/questions/9812505/why-am-i-getting-a-c-compiler-cannot-create-executables-successfully-written)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T03:35:09.073

它是重复的，已经有很少的答案，但我已经在 RVM 中进行了修复，确保首先运行`rvm get head`并读取输出 - 修复显示在那里。

这个问题也反馈给 RailsInstaller：[https ://github.com/railsinstaller/railsinstaller-nix/issues/10](https://github.com/railsinstaller/railsinstaller-nix/issues/10)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T20:37:04.493

**Xcode->首选项**

检查“命令行工具”

![](../Images/47ae9f8df2189ca18f500bf2be27ba08.png)

# java - Java中的“构造函数调用必须是构造函数中的第一条语句”问题

> ID：14072534
> 
> 赞同：8
> 
> 时间：2012-12-28T16:25:25.723
> 
> 标签：java, constructor

> **可能重复：**
> [为什么 this() 和 super() 必须是构造函数中的第一个语句？](https://stackoverflow.com/questions/1168345/why-does-this-and-super-have-to-be-the-first-statement-in-a-constructor)

我想在 Java 中有构造函数链。例如，对于第一个构造函数，我有一个字符串作为参数，并在我从参数字符串创建对象时调用第二个构造函数。

```
public class IMethodFinder {
    public IMethodFinder(String projectName, String methodName,
        int numberOfParameters) {
        IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);
        IJavaProject javaProject = JavaCore.create(project);
        this(javaProject, methodName, numberOfParameters);
    }

    public IMethodFinder(IJavaProject javaProject, String methodName,
        int numberOfParameters) {
        ... 
    }
} 
```

但是，我收到错误“构造函数调用必须是构造函数中的第一条语句”错误。

![在此处输入图像描述](../Images/cd86b228f9e544fe347b534afff5539f.png)

我制作了一个在两个构造函数之间共享的通用代码，但我不确定这是绕过该问题的唯一解决方案。

```
public class IMethodFinder {
    public IMethodFinder(IJavaProject javaProject, String methodName,
            int numberOfParameters) {
        dosomething(javaProject, methodName, numberOfParameters);
    }

    public IMethodFinder(String projectName, String methodName,
            int numberOfParameters) {
        IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);
        IJavaProject javaProject = JavaCore.create(project);
        dosomething(javaProject, methodName, numberOfParameters);
    }

    private void dosomething(IJavaProject javaProject, String methodName,
            int numberOfParameters)
    {
       ...  
    }

} 
```

*   为什么 Java 需要构造函数调用作为第一条语句？这个要求背后的想法是什么？
*   对于我的情况，Java 的约定是什么？调用通用方法是一个好方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T16:35:16.803

没有内在的原因可以扩展 Java 以允许`this`在构造函数之前不访问的语句。但是，这会增加语言的复杂性并在使用时混淆代码（特别是当您认为调用可能是隐式的时）。

通常，您希望使构造函数尽可能简单。`init()`方法是一个坏主意，因为它们会阻止使用`final`. 似乎代码正在访问一个可变静态，这是一个非常糟糕的主意。

对于您的特定代码，您可以编写：

```
 public IMethodFinder(String projectName, String methodName,
        int numberOfParameters) {
        this(
            JavaCore.create(
                ResourcesPlugin.getWorkspace().getRoot().getProject(projectName)
            ),
            methodName,
            numberOfParameters
        );
    } 
```

更一般的 hack 是在对构造函数的调用中调用静态方法：

```
public class IMethodFinder {
    public IMethodFinder(String projectName, String methodName,
        int numberOfParameters) {
        this(createProject(projectName), methodName, numberOfParameters);
    }

    public IMethodFinder(IJavaProject javaProject, String methodName,
        int numberOfParameters) {
        ... 
    }

    private static IJavaProject createProject(String projectName) {
        IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);
        IJavaProject javaProject = JavaCore.create(project);
        return javaProject;
    }
} 
```

**2018 年 3 月编辑：**在消息[记录中：构造和验证](http://mail.openjdk.java.net/pipermail/amber-spec-experts/2018-March/000320.html)Oracle 建议删除此限制（但与 C# 不同，在构造函数链接之前*肯定*`this`会取消分配(DU)）。

 *> 从历史上看，this() 或 super() 必须在构造函数中排在第一位。这种限制从未流行过，并且被认为是任意的。有许多微妙的原因，包括对 invokespecial 的验证，导致了这种限制。多年来，我们已经在 VM 级别解决了这些问题，以至于考虑解除这个限制变得切实可行，不仅是为了记录，而是为了所有构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:30:20.203

解决方案 1：您的构造函数应该有一个更明确的流程，以避免使用常见的`init`. 很多时候，一个构造函数会更基本并构造一个完整的有效对象，然后外部构造函数可以装饰它。

解决方案 2：使用静态工厂方法通常是一种很好的做法，例如可以在此处处理您需要的预处理。这看起来是这种模式的一个很好的用例。

解决方案 3：而不是通用`init`方法，只需使用静态方法为您进行隔离预处理。例如`myField = processInputField(myField)`。通用`init`方法在 final 字段上的表现很差，这是它们是不好的做法的一个更有力的原因 - 本质上，是的，构造函数应该完成构造的全部工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:31:54.490

看到你的第一个问题和你的第二个问题的[答案](https://stackoverflow.com/questions/1168345/why-does-this-and-super-have-to-be-the-first-statement-in-a-constructor)- 是的，在这些情况下使用某种 init() 方法是相对可接受的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:33:57.683

看看这个。它可能有助于理解 java 构造函数调用。

[构造函数调用必须是构造函数中的第一条语句](http://java.syntaxerrors.info/index.php?title=Constructor_call_must_be_the_first_statement_in_a_constructor)*

# php - PHP, cURL, Sessions 和 Cookies - Oh my

> ID：14072539
> 
> 赞同：2
> 
> 时间：2012-12-28T16:25:44.607
> 
> 标签：php, session, authentication, cookies, curl

我编写了一个使用身份验证和会话的 PHP Web 应用程序（虽然没有 cookie）。对于浏览器中的用户来说，一切正常。在这一点上，虽然我需要添加将自动执行任务的功能......用户不需要看到任何东西，也不能与这个过程进行交互。所以我编写了我的新 PHP，import.php，它可以在我的浏览器中运行。我设置了一个新的 cron 作业来调用“php import.php”。不工作。开始谷歌搜索，似乎我需要使用 cURL 和可能的 cookie，但我不确定。基本上 import.php 需要进行身份验证，然后访问本地服务器上同一目录中的单独文件 funcs.php 中的函数。所以我将 cURL 添加到 import.php 并从命令行重新运行；我看到以下内容：

```
[me@myserver]/var/www/html/webapp% php ./import.php
* About to connect() to myserver.internal.corp port 443 (#0)
*   Trying 192.168.111.114... * connected
* Connected to myserver.internal.corp (192.168.111.114) port 443 (#0)
*   CAfile: /etc/pki/tls/certs/ca-bundle.crt
  CApath: none
* Remote Certificate has expired.
* SSL certificate verify ok.
* SSL connection using SSL_RSA_WITH_3DES_EDE_CBC_SHA
* Server certificate:
*   subject: CN=dept,O=Corp,L=Some City,ST=AK,C=US
*   start date: Jan 11 16:48:38 2012 GMT
*   expire date: Feb 10 16:48:38 2012 GMT
*   common name: myserver
*   issuer: CN=dept,O=Corp,L=Some City,ST=AK,C=US
> POST /webapp/import.php HTTP/1.1
Host: myserver.internal.corp
Accept: */*
Content-Length: 356
Expect: 100-continue
Content-Type: multipart/form-data; boundary=----------------------------2c5ad35fd319

< HTTP/1.1 100 Continue
< HTTP/1.1 200 OK
< Date: Thu, 27 Dec 2012 22:09:00 GMT
< Server: Apache/2.4.2 (Unix) OpenSSL/0.9.8g PHP/5.4.3
< X-Powered-By: PHP/5.4.3
* Added cookie webapp="tzht62223b95pww7bfyf2gl4h1" for domain myserver.internal.corp, path /, expire 0
< Set-Cookie: webapp=tzht62223b95pww7bfyf2gl4h1; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
< Pragma: no-cache
< Content-Length: 344
< Content-Type: text/html
< 
* Connection #0 to host myserver.internal.corp left intact
* Closing connection #0 
```

我不确定通过 cURL 进行身份验证后应该做什么。或者是否有另一种我不使用 cURL 的身份验证方式？目前，Web 应用程序中的所有页面都根据 $_SESSION 和 $_POST 值检查采取（或不采取）行动。如果 cURL 是唯一的方法，我需要 cookie 吗？如果我需要 cookie，一旦我将它发送回服务器，我为什么需要处理它？

基本上 import.php 会检查并读取同一目录中的文件。假设 cron 运行时有文件并解析它们并将数据插入数据库。同样，一切都在浏览器中运行，而不是从命令行导入。

以前从未这样做过（或者很多 PHP），我完全被难住了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:36:31.073

我已经用这个解决**了我的**问题。

```
 shell_exec('nohup php '.realpath(dirname(__FILE__)).'/yourscript.php > /dev/null &'); 
```

您可以将其设置为每 x 分钟运行一次，它将在后台运行而不会出现用户延迟。

我们可以从这里开始吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T21:57:41.817

这不太可能帮助任何人，但是这个项目的需求发生了变化，所以我最终创建了一个基于 PHP 的 REST API 并用 Python 重写了这个导入脚本，以与正在开发的其他一些工具集成。所有工作都根据需要。在 Python...

```
import cookielib
import getopt
import os
import sys
import urllib
import urllib2
import MultipartPostHandler 
```

不需要提供更多细节 - 任何精通 Python 的人都应该明白这一点。脚本读取文件并将其提交给我的 PHP API。

# javascript - 如何使用javascript检查日期的从-到输入字段是否正确

> ID：14072541
> 
> 赞同：0
> 
> 时间：2012-12-28T16:25:49.787
> 
> 标签：javascript, validation, date

我需要检查用户是否在我的表单上输入了正确的从 - 到日期值

例如：(dd/mm/yyyy)

错误的：

```
From: 20/12/2012 - To: 11/12/2012 
```

正确的：

```
From: 20/12/2012 - To: 30/12/2012 
```

我需要检查“from”和“to”输入字段中的值，以便我可以将值传递给我的 ajax 脚本，有没有使用 javascript 来实现这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:34:32.257

如果日期格式正确

```
var BegDT = new Date(st1);
var EndDT = new Date(st2); 
```

您现在可以从 EndDt 中减去 BegDT 并在没有得到正数时给出错误

# android - 如何与支持蓝牙的设备通信 android 应用程序？

> ID：14072552
> 
> 赞同：0
> 
> 时间：2012-12-28T16:26:37.550
> 
> 标签：android, bluetooth

允许 android 应用程序与支持蓝牙的设备（使用`easy Bluetooth module`）进行通信需要什么？

我需要使用普通`BluetoothAdapter`类吗？我已经尝试了附带 android 示例的聊天示例。但是android应用程序无法发现蓝牙设备？有什么问题，我需要使用蓝牙配置文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:07:11.317

通常这些模块使用串行配置文件，因此您可以正常使用蓝牙适配器。我有一个连接到微控制器的类似模块，它可以在 Android 应用程序中正常工作。

*   *如果模块是可配置*的，请确保模块在“从”模式下运行。
*   在运行应用程序之前，从蓝牙设置中搜索模块并与之**配对。**

这是通过串行配置文件连接到已知设备的快速代码片段

```
String BTAddress = "ADD YOUR REMOTE DEVICE BLUETOOTH ADDRESS HERE"; // has the format 00:00:00:00:00:00
UUID SERIAL_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
BluetoothDevice btDevice = btAdapter.getRemoteDevice(BTAddress);
btSocket = btDevice.createRfcommSocketToServiceRecord(SERIAL_UUID);
btSocket.connect(); 
```

# ajax - Jquery .Load 但不是替换前置

> ID：14072554
> 
> 赞同：0
> 
> 时间：2012-12-28T16:26:59.470
> 
> 标签：ajax, jquery

我正在尝试从另一个页面加载一些文本，但是我想添加它而不是替换它。

所以目前我有：

```
$('#01-L1-00-Container').load('Page.aspx #Q-01-L1-00'); 
```

但“01-L1-00-Container”包含一些我需要保留且无法覆盖的内容。如何添加而不是替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:30:32.950

您可以这样做：

```
$("#01-L1-00-Container").prepend( $("<div>").load("Page.aspx #Q-01-L1-00")); 
```

或者

```
$("<div>").load("Page.aspx #Q-01-L1-00", function() {
      $("#01-L1-00-Container").prepend($(this).find("#Q-01-L1-00").html());
}); 
```

这些都通过在 dom 中**创建**一个 div，将新页面（使用 ajax）加载到该**div**中，然后将新创建的 div 前置到容器中来工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:30:58.150

假设您不想将数据附加到容器内的其他元素，您不能`.load`单独执行此操作，但这很容易：

```
$.get('Page.aspx').done(function (html) {
   $(html).find('#Q-01-L1-00').prependTo("#01-L1-00-Container');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:29:35.580

试试这个：

```
$("#01-L1-00-Container").prepend($("<div />").load("URL of Page")); 
```

希望这会有所帮助！

# objective-c - 用于拦截另一个应用程序中的文本输入的 API？

> ID：14072559
> 
> 赞同：5
> 
> 时间：2012-12-28T16:27:29.760
> 
> 标签：objective-c, macos, cocoa

我想制作一个类似于 TextExpander 之类的应用程序，但我不确定您将如何截取文本。据我所知，我需要从 NSAccessability 开始。谁能分享一些片段，或者至少指出我正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T23:31:58.960

首先，您应该知道，由于沙盒要求，如果您想在 App Store 中销售您的应用程序，这根本不可能。

如果您不打算对您的应用程序进行沙箱处理，您可以使用`NSEvent`类方法`addGlobalMonitorForEventsMatchingMask:`创建一个全局键事件处理程序，当在其他应用程序中按下键时调用该事件处理程序（但不是您自己的应用程序，请使用`addLocalMonitor...`它）。

要实际插入片段，如 TextExpander，有几种方法。您可以使用辅助功能 API，但这要求您所针对的应用程序支持辅助功能，但情况并非总是如此。

另一种选择是使用[Quartz 事件服务 (CGEvent) API](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)，它提供（除其他外）模拟关键事件的低级方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:12:35.520

编辑：没关系。你问的是Mac OS。我以为你在问iOS。

你应该看看[TextExpander 是如何被其他应用程序使用的](http://smilesoftware.com/sdk)。目标应用程序必须通过将 TE 提供的对象作为文本字段的委托来构建对 TE 的支持。您不能在其他人的应用程序中运行您的代码。他们必须将您的代码编译到他们的应用程序中。这就是为什么有一个 TextExpander SDK 的原因。

一旦 TextExpander 代码位于目标应用程序中，文本字段委托就会通过查找放入[共享粘贴板](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/PasteboardGuide106/Articles/pbConcepts.html)的片段来获取共享片段。

# ruby-on-rails - Rails rake db:seed 和 FactoryGirl 相处不来

> ID：14072566
> 
> 赞同：0
> 
> 时间：2012-12-28T16:27:58.547
> 
> 标签：ruby-on-rails, rake, factory-bot

尝试使用 FactoryGirl 为我的开发数据库播种一些数据。按照[本](http://xtargets.com/2011/02/06/seeding-your-rails-db-with-factory-girl/)教程，我的seeds.rb 文件如下所示：

```
require 'factory_girl'
Dir[Rails.root.join("spec/factories/*.rb")].each {|f| require f}

100.times do
  FactoryGirl.create :idea
end 
```

运行`rake db:seed`时它抱怨：

```
rake aborted!
Factory already registered: idea 
```

为什么注册工厂是一件坏事？我正在尝试使用它，而不是注册它（无论这意味着什么......）。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:33:08.120

您的工厂很可能已经被装载。尝试删除执行每个要求的行，看看是否可以解决问题。

# c++ - 无法在项目中链接 QwtPlot3d

> ID：14072577
> 
> 赞同：1
> 
> 时间：2012-12-28T16:28:56.673
> 
> 标签：c++, gcc, linker, qwt

我在我的 C++ 项目 QwtPlot3d 和带有`-D_GLIBCXX_PROFILE`标志的 GCC 4.6 中使用。当我的项目尝试链接时，我收到错误消息：

```
 undefined reference to Qwt3D::MeshPlot::createDataset(std::__profile::vector<Qwt3D::Triple,
 std::allocator<Qwt3D::Triple> > const&, 
std::__profile::vector<std::__profile::vector<unsigned int,
std::allocator<unsigned int> >, 
std::allocator<std::__profile::vector<unsigned int, 
std::allocator<unsigned int> > > > const&, bool) 
```

有什么建议么？

# java - 对 HttpURLConnection 池的可见性？

> ID：14072580
> 
> 赞同：0
> 
> 时间：2012-12-28T16:29:09.370
> 
> 标签：java, android

我最近一直在尝试使用[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)，并且对 HttpURLConnection 的不同实例共享来自公共池的连接这一事实印象深刻。（使用数据包捕获验证）

我的问题是：是否可以直接访问游泳池？我想看看池中有哪些连接，每个连接的状态。是否有设置每个主机最大连接数的界面？

另外，我的理解是否正确，任何线程/AsyncTask 上的任何 HttpURLConnection 实例都将始终使用单个池？我只在一个任务中测试...

Java noob 在这里，很难浏览所有的 javadocs ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:26:53.850

您可以设置`http.maxConnections`系统属性（根据 Android 文档——您没有阅读吗？）以限制每个主机的连接数。不过，我不知道查询状态信息。

# zend-framework - 使用带有默认模块布局的管理模块中的 Zend 视图助手

> ID：14072581
> 
> 赞同：2
> 
> 时间：2012-12-28T16:29:22.423
> 
> 标签：zend-framework, layout, module, view-helpers

我在我的布局中调用了一个视图助手，它在默认模块中运行良好，但是当我在另一个模块中时出现异常。

我已经通过设置更改了我的 app.ini 以在所有模块中使用默认布局：

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/" 
```

在这里搜索和谷歌为我提供了另一个 app.ini 设置来为所有模块添加视图助手路径：

```
resources.view.helperPath.Zend_View_Helper = APPLICATION_PATH "/views/helpers" 
```

但是，该附加设置并没有解决问题，而是导致 Zend 异常成为 WSOD。

如果没有第二个 app.ini 设置，我会看到布局并得到以下异常：

```
Plugin by name 'AutoScript' was not found in the registry; used paths: Admin_View_Helper_: /Applications/XAMPP/xamppfiles/htdocs/dad/application/modules/admin/views/helpers/ Zend_View_Helper_: Zend/View/Helper/:./views/helpers/ 
```

使用 helperPath.Zend_View_Helper ini 设置，我得到一个 WSOD，其中包含以下内容：

```
Fatal error: Uncaught exception 'Zend_Loader_PluginLoader_Exception' with message 'Plugin by name 'AutoScript' was not found in the registry; used paths: Zend_View_Helper_: Zend/View/Helper/:./views/helpers/' 
```

插件加载器似乎正在 public/views/helpers/ 中查找 AutoScript.php 文件，即使它应该使用 APPLICATION_PATH 值作为前缀。

我的布局调用看起来像这样

```
<?php $this->AutoScript(); ?> 
```

我的 AutoScript.php 文件的类在 application/views/helpers/ 中定义

```
class Zend_View_Helper_AutoScript extends Zend_View_Helper_Abstract {
  public function AutoScript() {...}
} 
```

我目前的解决方法是将 AutoScript.php 文件从 application/views/helpers 复制到 modules/admin/views/helpers 中，这可以解决问题，但会复制一个文件。我错过了什么？我是否必须通过在我的引导程序中创建 _initView 函数以编程方式添加此视图帮助程序路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:53:07.053

通常，您会使用自己的前缀而不是`Zend_`前缀来命名自定义视图助手。除此之外，还有几种选择放置和命名视图助手的位置。

如果这个视图助手真的是一个单一的应用程序助手，那么我发现它自然地驻留在`application`文件夹中的某个位置。在那个可能性空间内，我会问 view-helper 是在*单个*模块中使用还是在*多个*模块中使用。

如果 view-helper 打算在*单个*模块中使用，那么我依赖于内置的资源自动加载器映射并将我的 view-helper 类`Mymodule_View_Helper_Myhelper`放在文件中`application/modules/mymodule/views/helpers/Myhelper.php`。

如果 view-helper 旨在跨*多个*modules 使用，`modules`我可能会将它`Application_View_Helper_Myhelper`拉到比存储在 . 在这种情况下，我们需要告诉视图该目录中有带前缀的助手。这可以在引导程序中完成：`appnamespace``Application``application/views/helpers/Myhelper.php``Application_View_Helper_`

```
protected function _initViewHelperPaths()
{
    $this->bootstrap('view');
    $view = $this->getResource('view');
    $view->addHelperPath(APPLICATION_PATH . '/views/helpers', 'Application_View_Helper_');
} 
```

有时，您需要一个模块中的视图助手，而该模块存在于另一个模块中，而实际上您无法移动原始模块。在这种情况下，一种解决方法是在您的消费模块中定义一个空的视图助手外壳，扩展您的不可移动的视图助手。在文件中`application/mymodule/views/helpers/MyHelper.php`：

```
class Mymodule_View_Helper_Myhelper extends Othermodule_View_Helper_Myhelper
{
} 
```

这样，助手实现的代码就不会重复。特定于模块的资源自动加载器映射将允许在从视图脚本作为视图助手调用时找到所有这些类。

最后，如果要在*多个项目*中使用此视图助手，则需要将其置于应用程序范围之外，即在`library`文件夹中。所以也许一个类`MyLibrary_View_Helper_Myhelper`存储在文件中`library/MyLibrary/View/Helper/Myhelper.php`。和以前一样，您需要通知视图（可能在引导程序或前端控制器插件中）前缀/路径映射：

```
$view->addHelperPath(APPLICATON_PATH . '/../library/MyLibrary/View/Helper', 'MyLibrary_View_Helper_'); 
```

请注意，在上述所有情况下，view-helper 功能本身的调用 - 例如，在 view-script 内 - 是：

```
<?php echo $this->myhelper($params) ?> 
```

请特别注意类名和调用之间的大小写差异。

# iphone - 如何根据配置文件指定 XCode 执行或不执行特定代码行

> ID：14072588
> 
> 赞同：0
> 
> 时间：2012-12-28T16:29:41.573
> 
> 标签：iphone, ios, xcode, ipad, cocoa-touch

我试图弄清楚计划、配置、权利和其他什么，而我现在只是一个非常困惑的家伙。

我们有 3 个人在开发 iOS 应用程序。我正在将应用程序连接到远程服务器，这会发出很多错误，所以当我实际提交进度时，每个人的应用程序副本都会遇到问题。我想制作一种我可以使用的配置文件，以便其他人在使用他们的配置文件运行 XCode 时可以跳过代码行。

有什么办法可以做到这一点？

**编辑：**我想我正在寻找预处理器宏来定义一个条件。我想做一个

```
#if Value = Local
//get data locally
#if Value = Remote
//get data from server 
```

我怎么会这样？另外，我如何为这个“值”分配一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:45:39.610

你试图解决错误的问题。如果你有一个正在进行的工作，你不应该尝试根据谁构建它有条件地执行某些代码行，你应该将你的工作包含在一个特性分支中。这不是一个应该在执行期间解决的问题，这是一个应该通过源代码控制解决的协作问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:15:33.837

根据您的编辑，您可以将此想法转换为

```
#if Value = Local
//get data locally
#if Value = Remote
//get data from server 
```

上面实现为：

```
#ifdef LOCAL_DB
//get data locally
#else
//get data from server
#endif 
```

# java - 如何从 Java 中的字节数组创建 ZipFile

> ID：14072590
> 
> 赞同：4
> 
> 时间：2012-12-28T16:29:47.207
> 
> 标签：java, zip

在Java中你必须做 new ZipFile(new File("xxx.zip")); 解压缩 zip 文件。

现在我得到一个字节数组，其内容是一个 zip 文件。我从数据库而不是文件中获取这个字节数组。我想解压缩这个“字节数组文件”，但没有字节数组或字符串的 ZipFile 构造函数（我的意思是内容而不是文件路径）。

有什么解决办法吗？（当然我不想将此字节数组写入实际文件并再次将其读入内存。）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:40:35.737

在从字节数组创建的 ZipInputStream 中使用 ByteArrayInputStream

```
byte[] ba;

InputStream is = new ByteArrayInputStream(ba);
InputStream zis = new ZipInputStream(is); 
```

使用 zis 读取未压缩的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:38:51.067

的实现`ZipFile`要求它是一个文件。例如，可以使用内存映射。一般来说，假设存档可能很大。

正如@Perception 提到的，`ZipInputStream`可用于通过流顺序读取。可以使用第三方库来替换`ZipFile`.

# regex - 使用 Sed 和正则表达式替换字符串

> ID：14072592
> 
> 赞同：27
> 
> 时间：2012-12-28T16:30:00.900
> 
> 标签：regex, string, bash, sed, replace

我正在尝试使用 sed 但使用正则表达式取消注释文件内容（例如：[0-9]{1,5}）

```
# one two 12
# three four 34
# five six 56 
```

以下是有效的：

```
sed -e 's/# one two 12/one two 12/g' /file 
```

但是，我想要的是使用正则表达式模式替换所有匹配项而不输入数字，但将数字保留在结果中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-28T19:44:13.183

对于符合示例问题，只需

```
sed 's/^# //' file 
```

就足够了，但如果只需要删除包含特定正则表达式的某些行上的注释，那么您可以使用条件**地址**：

```
sed '/regex/s/^# //' file 
```

所以包含的每一行都`regex`将被*取消注释*（如果行以 a*开头*`#`）

...`regex`可能是`[0-9]`：

```
sed '/[0-9]/s/^# //' file 
```

将`#` 在包含数字的每一行的开头删除，或

```
sed '/[0-9]/s/^# \?//' file 
```

使第一个空间*不需要*：`#one two 12`，甚至

```
sed '/[0-9]$/s/^# //' file 
```

将`#` 在包含数字作为最后一个字符的行的开头删除。然后

```
sed '/12$/s/^# //' file 
```

将在以 .`#` 结尾的行开头删除`12`。或者

```
sed '/\b\(two\|three\)\b/s/^# //' file 
```

将删除`#` 包含**word** `two`或的行的开头`three`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-28T16:31:55.743

```
sed -e 's/^#\s*\(.*[0-9].*\)$/\1/g' filename 
```

应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:49:26.740

如果您只希望那些包含数字的行不被注释，您可以使用这个：

```
sed -e 's/^#\s*\(.*[0-9]+.*\)/\1/g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:48:33.573

以下`sed`命令将取消注释包含数字的行：

```
sed 's/^#\s*\(.*[0-9]\+.*$\)/\1/g' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T20:55:46.377

是否`-i`不需要相应文件中的替换选项？`#`我可以使用以下方法删除前导：

```
sed -i "s/^# \(.*\)/\1/g" file 
```

为了只取消注释那些以至少一个数字序列结尾的注释行，我会这样使用它：

```
sed -i "s/^# \(.*[[:digit:]]\+$\)/\1/g" file 
```

此解决方案要求注释行以一个空格字符（在 后面`#`）开头，但如果不适用，这应该很容易调整。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-30T19:25:56.510

我找到了。感谢大家

```
echo "# one two 12" | grep "[0-9]" | sed 's/# //g' 
```

或者

```
cat file | grep "[0-9]" | sed 's/# //g' 
```

# angularjs - 在 AngualJS ng-repeat 中对集合进行分组？

> ID：14072593
> 
> 赞同：4
> 
> 时间：2012-12-28T16:30:08.737
> 
> 标签：angularjs, taffydb

我有一个非常简单的场景，其中有一组记录可用，我需要在一个简单的 ng-repeat 中显示它们。但是，我需要按属性分组的记录，而我的目标不是不必更改集合即可完成此分组。我的想法是可以应用某种类型的过滤器，但实际上过滤器、过滤器、数据和不分组。有没有办法收集并简单地分组和重复？

真正的 hack-ish jsFiddle 就在这里，我正在尝试做。

[http://jsfiddle.net/bryangrimes/RufQh/5/](http://jsfiddle.net/bryangrimes/RufQh/5/)

简而言之，这个想法是这样的：

```
<ul>
      <li ng-repeat="log in logs grouped by log.dept">
        <h4>{{log.dept}}</h4>
        {{log.name}} worked {{log.hours}} this week
      </li>            
  </ul> 
```

更新：所以最后我们已经使用 taffyDB 来容纳原始数据集，所以它只是被扩展了。

```
$.each($scope.logs, function() {
        var log = $(this)[0];

        // build angular friendly data structure
        log.workLogsDB = TAFFY(log.worklogs);
        log.deptLogs   = [];

        $.each(log.workLogsDB().distinct('department').sort(), function() {
            var dept  = $(this)[0].toString();
            var cost  = log.workLogsDB({department:dept}).sum('cost');
            var hours = log.workLogsDB({department:dept}).sum('hours');
            var items = log.workLogsDB({department:dept}).get();

            log.deptLogs.push({
                department: dept,
                total_cost: cost,
                total_hours: hours,
                line_items: items
            });
        });
    }); 
```

和要呈现的 HTML：

```
<div ng-repeat="log in logs">
                <h3 onclick="$('#{{log.project}}').slideDown()">    
                    {{log.project}} hours:{{log.hours}} cost: ${{log.cost}}
                </h3>
                <ul id="{{log.project}}" style="display: none;">
                    <div ng-repeat="log in log.deptLogs">
                        <span style="font-weight: bold; text-transform: capitalize;">{{ log.department }} - Team Cost: ${{ log.total_cost }}, Team Hours: {{ log.total_hours }} </span>
                        <li ng-repeat="line in log.line_items">
                            {{line.employee}} {{line.hours}} hours
                        </li>
                        <br>
                    </div>
                </ul>
            </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T21:49:40.877

我认为您需要创建该集合的排序副本，然后对该排序集合进行 ng-repeat。这是我不久前写的[一个小提琴](http://jsfiddle.net/mrajcok/CvKNc/)，当时有人问了类似的问题。要点：

```
function MyCtrl($scope, orderByFilter) {  // inject orderByFilter
   $scope.sortedLogs = orderByFilter($scope.logs, '+dept');
} 
```

HTML：

```
<ul>
  <li ng-repeat="log in sortedLogs">
      <ng-switch on="$first || log.dept != sortedLogs[$index-1].dept">
          <div ng-switch-when="true" class="group"><h4>{{log.dept}}</h4>
      </ng-switch>
      {{log.name}} worked {{log.hours}} this week
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:57:41.920

我喜欢马克的回答，我的策略通常是重新调整集合以使渲染更容易。

这是一个显示该方法的小提琴[http://jsfiddle.net/RufQh/12/](http://jsfiddle.net/RufQh/12/)

```
var sorted = [];
logs.forEach(function(log){if (!sorted[log['dept']]) {sorted[log['dept']]= []} sorted[log['dept']].push(log);})

$scope.depts=[];
for(var dept in sorted) {
    $scope.depts.push({name:dept,items:sorted[dept]});
} 
```

一旦我有了这个，我就会用嵌套循环渲染

```
<li ng-repeat="dept in depts">{{dept.name}}<br/> 
          <ul>
              <li ng-repeat="log in dept.items">{{log.name}} worked {{log.hours}} this week as a(n) {{log.dept}}</li>
          </ul>
  </li> 
```

使用 map/reduce 或 taffyBD 之类的框架可以更轻松地转换数据。这种方法的缺点是多次遍历数据（而不是单次排序）和添加角度范围的创建。

好处是它可能更容易呈现内容，因为它是在控制器中组织的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T13:06:19.073

您已经在使用 taffydb 来获取数据，因此它可能与您无关，但其他想要这样做的人可能会发现 ForerunnerDB ( [http://www.forerunnerdb.com](http://www.forerunnerdb.com) ) 很有用，因为它具有类似 MongoDB 的高级查询，而且支持数据视图，以便您可以通过查询过滤集合并从中生成视图。

视图包含来自底层集合的最新过滤数据，如果集合上的数据发生更改，视图也会自动更新。

# javascript - Javascript - 获取一周中的特定日期

> ID：14072599
> 
> 赞同：1
> 
> 时间：2012-12-28T16:30:34.130
> 
> 标签：javascript, html

我是 javascript 的初学者，我正在寻找一种方法来生成一周中的特定日期，没有任何条件，我想自己练习。我在阅读文档时遇到了一些困惑。基本上，我想告诉 javascript 是在一周中的某一天、一天中的某个时间显示一个标签。

例如，在星期一的 19:00-21:00 之间显示。

我有这个，但我真的不知道如何更改元素中的任何内容。我觉得我不会去任何地方。

```
<script type="text/javascript">
element = document.getElementById('broadcast-live')
var datestart = new Date("December 28, 2012 17:00:00")
var date_end = new Date("December 28, 2012 22:00:00")

function DisplayLiveBroadcast()
{
    if (new Date => datestart)
    {
        document.write("<div id=\"broadcast-live\">Live on air (Started Friday, 21:00)<div/>")
    }
    else if (new Date => date_end)
    {
        document.write("<div id=\"broadcast-live\"> <div/>")
    }
    else
    {
            document.write("<div id=\"broadcast-live\"> <div/>")
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:36:44.527

试试这个，它使用一个`getDay()`返回一个整数值的方法来引用当前日期：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)

# python - Python条形图中的循环和命名变量

> ID：14072600
> 
> 赞同：-1
> 
> 时间：2012-12-28T16:30:34.790
> 
> 标签：python, numpy, matplotlib, bar-chart, pythonxy

我在 Python 中使用 matplotlib 创建一个堆叠条形图，显示一天中的订单量，而不是去年的日历日。

我已经安排了一个数组，其中包括今天和去年的订单量：

```
allorders=[(23, 28), (15, 7), (15, 5), (8, 9), (4, 2), (5, 3), (4, 6), (8, 10), (28, 24), (45, 46), (55, 65), (0, 74), (0, 64), (0, 58), (0, 62), (0, 62), (0, 42), (0, 43), (0, 38), (0, 39), (0, 32), (0, 40), (0, 41), (0, 16)] 
```

对于堆积条，您通常会使用以下语法：

```
import matplotlib.pyplot as plt
import numpy as np
n=2
ind = np.arange(n) 
width = 0.35       
plt.ylabel('Orders')
plt.xticks(ind+width/2., ('Today', 'Last Year on Calendar Equivalent'))
plt.yticks(np.arange(0,plottotal,10))

p1= plt.bar(ind, allorders[0],   width, color='#000099')
p2= plt.bar(ind, allorders[1],   width, color='#000099', bottom=allorders[0]) 
```

但是，这对于大量堆叠图表来说可能会令人生畏。因此，我试图创建一个循环来遍历“allorders”数组并通过以下方式堆叠它们：

```
 for i in allorders:
     if i=0:
       p1=plt.bar(ind, allorders[i],   width, color='#000099')
       bottomcounter=allorders[i]

     else: 
       'p+i' = plt.bar(ind, allorders[i],   width, color='r', bottom=bottomcounter)
       bottomcounter=bottomcounter+allorders[i] 
```

但是，我得到了各种各样的错误，包括该子句`if i=0`的语法无效，以及“p+i”不能用于自动命名变量。

所以，所以向导：

1.  如何在循环中自动命名新变量（因此何时`i=0`命名变量`p0`，何时命名`i=1`变量`p1`等）

2.  包含该`if i=0`子句有什么问题？

由于我是 Python 新手（来自 R 和 Stata），请像对待婴儿一样对待我，如果可以的话，请提供一步一步的代码！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:38:30.763

首先，您需要阅读并理解官方[教程](http://docs.python.org/2/tutorial/)。

其次，要修复您的代码：

```
import itertools
allorders=[(23, 28), (15, 7), (15, 5), (8, 9), (4, 2), (5, 3), (4, 6), (8, 10), (28, 24), (45, 46), (55, 65), (0, 74), (0, 64), (0, 58), (0, 62), (0, 62), (0, 42), (0, 43), (0, 38), (0, 39), (0, 32), (0, 40), (0, 41), (0, 16)]
width = .35
plts = []
colors = ['k','r','b']

for i,order in enumerate(allorders):
    bottom_counter = 0
    loc_plts = []
    for o,c in zip(order,itertools.cycle(colors)):
        tmp_plt = plt.bar(i, o, width, color=c, bottom=bottom_counter)
        loc_plts.append(tmp_plt)
        bottom_counter+=o
    plts.append(loc_plts) 
```

# javascript - 如何使用 node-mongodb-native 连接到 Modulus.io？

> ID：14072603
> 
> 赞同：0
> 
> 时间：2012-12-28T16:30:55.553
> 
> 标签：javascript, node.js, mongodb

这里的第一个问题，所以请善待；）

我正在配置 Node.js 服务器以连接到 Modulus.io node.js 托管中的 MongoDB 数据库（非常好的东西，值得一试），但我似乎无法正确建立连接。[根据入门指南](https://modulus.io/codex/database/getting_started)，我得到一个连接 uri，格式如下：

mongodb://user:pass@mongo.onmodulus.net:27017/3xam913

但这似乎不适用于我试图移植到服务器的代码结构（让它在本地运行），因为[Server 类](http://mongodb.github.com/node-mongodb-native/api-generated/server.html)参数结构只有主机和端口要定义......

这是我试图适应连接的代码：

```
// server setup
var mongo = require('mongodb'),
    mdbServer = mongo.Server,
    mdbDb = mongo.Db,
    mdbObjectID = mongo.ObjectID;

// open a connection to the mongoDB server
var mdbserver = new mdbServer('localhost', 27017, {auto_reconnect: true});

// request or create a database called "spots03"
var db = new mdbDb('spots03', mdbserver, {safe: true});

// global var that will hold the spots collection
var spotsCol = null;

// open the database
db.open(function(err, db) {
    if(!err) {
        // if all cool
        console.log("Database connection successful");

        // open (get/create) a collection named spotsCollection, and if 200, 
        // point it to the global spotsCol
        db.createCollection(
            'spotsCollection',
            {safe: false},  // if col exists, get the existing one
            function(err, collection) {spotsCol = collection;}
        );
    }
}); 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:48:40.533

看起来有几件事：

1.  连接 URL 应该是 mongo.onmodulus.net

    var mdbserver = new mdbServer('mongo.onmodulus.net', 27017, {auto_reconnect: true});

2.  rounce 是正确的，数据库名称是由 Modulus 自动生成的。

    var db = new mdbDb('3xam913', mdbserver, {safe: true});

3.  模数数据库将需要身份验证。在调用 createCollection 之前，您必须调用 auth 并将在项目仪表板上设置的用户凭据传递给它。

我是一名 Modulus 开发人员，我知道数据库名称并不理想。

编辑：这是一个工作示例的完整来源。它记录每个 HTTP 请求，然后将所有请求发送回用户。

```
var express = require('express'),
      mongo = require('mongodb'),
     Server = mongo.Server,
         Db = mongo.Db;

var app = express();

var server = new Server('mongo.onmodulus.net', 27017, { auto_reconnect: true });
var client = new Db('piri3niR', server, { w: 0 });
client.open(function(err, result) {
  client.authenticate('MyUser', 'MyPass', function(err, result) {
    if(!err) {
      console.log('Mongo Authenticated. Starting Server on port ' + (process.env.PORT || 8080));
      app.listen(process.env.PORT || 8080);
    }
    else {
      console.log(err);
    }
  });
});

app.get('/*', function(req, res) {
  client.collection('hits', function(err, collection) {
    collection.save({ hit: req.url });

    // Wait a second then print all hits.
    setTimeout(function() {
      collection.find(function(err, cursor) {
        cursor.toArray(function(err, results) {
          res.send(results);
        });
      });
    }, 1000)
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T02:59:46.320

可能是错误的数据库名称？

[来自主题](http://docs.mongodb.org/manual/reference/connection-string)“3xam913”的 MongoDB文档是您的数据库名称，而不是“spots03”。

```
var db = new mdbDb('3xam913', mdbserver, {safe: true}); 
```

# regex - 如何匹配这样的重复模式？

> ID：14072606
> 
> 赞同：-3
> 
> 时间：2012-12-28T16:31:03.683
> 
> 标签：regex, linux, unix, grep

我想匹配模式，789。仅使用一个 sed 命令。（没有与“-e”链接的多个命令）

规则是匹配第三个传真之后的号码。

```
echo "fax 123 def fax tel 456 fax 789 fax 976" | sed 's/xxxxxxx/' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:41:18.200

使用`awk`with`fax`作为分隔符：

```
$ echo "fax 123 def fax tel 456 fax 789 fax ghi" | awk -F'fax ' '{print $4}'
789 
```

与`sed`：

```
$ echo "fax 123 def fax tel 456 fax 789 fax ghi" | sed 's/.*fax \([0-9]\+\).*/\1/'
789 
```

**编辑：** `sed`是基于行的，所以如何使用`grep`首先拆分字段：

```
$ echo "fax 123 def fax tel 456 fax 789 fax 976" | egrep -o 'fax (tel )?[0-9]+'
fax 123
fax tel 456
fax 789
fax 976 
```

然后使用`sed`指定哪一行*（字段）*：

```
 $ ... | sed -n '1s/^[^0-9]*//p'
 123

 $ ... | sed -n '2s/^[^0-9]*//p'
 456

 $ ... | sed -n '3s/^[^0-9]*//p'
 789 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:53:20.500

我终于使用了如下命令：

```
echo "  fax 123 def fax tel 456 fax 789 fax 012" |  
sed -e 's/^\s*fax\s*[0-9a-z]*\s*[a-z0-9]*\s*fax\s*[0-9a-z]*\s*[0-9a-z]*\s*fax\s*\([0-9]*\).*$/\1/' 
```

# elasticsearch - 在 Symfony2.1 中安装 ElasticBundle

> ID：14072607
> 
> 赞同：0
> 
> 时间：2012-12-28T16:31:12.057
> 
> 标签：elasticsearch, symfony-2.1

我在我的项目中使用 Symfony 2.1。在我的项目中，elasticsearch 将用于我的搜索引擎。我发现 Elastica 是用于 elasticsearch 的一个很棒的 PHP 客户端。ElasticBundle 是 symfony2.0 的 Elastica 包装器。[我按照官方文档https://github.com/Exercise/FOQElasticaBundle#readme](https://github.com/Exercise/FOQElasticaBundle#readme)的步骤进行操作。但似乎该文档已过时。我认为这是针对 symfony2 的。我尝试与 symfony2.1 集成但没有成功。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:01:00.707

我确实喜欢，添加行：

```
//composer.json
...
"require": {
    ...
    "exercise/elastica-bundle": "dev-master",
}
... 
```

然后我跑`php composer.phar update`。然后添加行：

```
//app/AppKernel.php
...
    new FOQ\ElasticaBundle\FOQElasticaBundle(),
... 
```

# java - 重叠两个 JButton：问题

> ID：14072612
> 
> 赞同：2
> 
> 时间：2012-12-28T16:31:53.453
> 
> 标签：java, swing, jbutton, overlap, jlayeredpane

听起来有点奇怪，但我试图重叠两个`JButtons`（这里`jButton1`和`jButton2`）。我正在为此使用 NetBeans GUI 构建器。没什么特别的，我正在使用 JLayeredPane 使其成为可能。

```
 jLayeredPane1.add(jButton1, javax.swing.JLayeredPane.DEFAULT_LAYER); 
```

好吧，它确实重叠，但是`JButton`当用鼠标单击时，它会显示它自己。一张截图就清楚了：

![在此处输入图像描述](../Images/8aabaee299cc59f39a612709138bba0f.png)

**（将高亮部分作为鼠标指针）**

和

当鼠标指针单击 next`JButton`时，它会出现，隐藏第一个 JButton。 ![在此处输入图像描述](../Images/9629b2ff1162ded43f9622580fdae889.png)

但是，我**不希望**在鼠标单击时`JButton`弹出第二个（与第一个重叠）。`JButton`我该怎么做？？好吧，我认为这可能很关键。

这是代码，如果需要：

```
public class NewJFrame1 extends javax.swing.JFrame {

public NewJFrame1() {
    initComponents();
}

private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jLayeredPane1 = new javax.swing.JLayeredPane();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jLayeredPane2 = new javax.swing.JLayeredPane();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jPanel1.setBackground(new java.awt.Color(51, 51, 51));

    jButton1.setText("jButton1");
    jButton1.setBounds(0, 40, 73, 23);
    jLayeredPane1.add(jButton1, javax.swing.JLayeredPane.DEFAULT_LAYER);

    jButton2.setText("jButton2");
    jButton2.setBounds(40, 40, 73, 23);
    jLayeredPane1.add(jButton2, javax.swing.JLayeredPane.DEFAULT_LAYER);

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addGap(98, 98, 98)
                    .addComponent(jLayeredPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addGap(139, 139, 139)
                    .addComponent(jLayeredPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(161, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(58, 58, 58)
            .addComponent(jLayeredPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jLayeredPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(31, Short.MAX_VALUE))
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    pack();
}
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewJFrame1().setVisible(true);
        }
    });
}

private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JLayeredPane jLayeredPane1;
private javax.swing.JLayeredPane jLayeredPane2;
private javax.swing.JPanel jPanel1;

} 
```

**更新 ：**

如果我不清楚，我又来了。

1）我不想制作单独的按钮，它们应该重叠。

2）重叠区域可能不同，按钮的大小。

3）**第二个 JButton 不应该高于第一个 JButton，当点击时。（解决方案，但不是如何布局按钮。）**

4）可能会有混淆，点击了哪个按钮，但对我来说没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:25:06.093

> 布局管理器与它有什么关系？

@Patricia Shanahan 指出了重叠按钮的问题。一种解决方案是让[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)完成工作。在下面的示例中，默认情况下`butonPanel`有一个居中的。`FlowLayout`它采用任何外观和感觉中按钮的首选尺寸。

附录：啊，您*希望*按钮重叠但保持稳定的*z*顺序。因为渲染是由按钮的 UI 委托（一个 的子类）控制的`ButtonUI`，所以效果取决于外观。例如，两者都按照您的意愿行事，而许多其他人则不然`com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel`。`com.apple.laf.AquaLookAndFeel`如果不创建您自己的委托（[此处](https://stackoverflow.com/a/5755124/230513)显示），您可能会尝试调整[此处](https://stackoverflow.com/a/10862262/230513)显示的方法，该方法隐藏按钮并使用叠加图像。根据封闭容器的布局，要么 要么`FlowLayout`应该`GridLayout(1, 0)`工作。

顺便说一句，不要让 GUI 设计师决定你的 GUI 设计！

![图片](../Images/7c9436564174e26af3d37cd5618b8c07.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

/** @see https://stackoverflow.com/a/14075990/230513 */
public class LayoutTest {

    private void display() {
        JFrame f = new JFrame("LayoutTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JPanel(){

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 150); // content placeholder
            }
        }, BorderLayout.CENTER);
        JPanel buttonPanel = new JPanel(); // default: FlowLayout, centered
        buttonPanel.add(new JButton("Button1"));
        buttonPanel.add(new JButton("Button2"));
        f.add(buttonPanel, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new LayoutTest().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:35:20.260

重叠的按钮会让人混淆点击了哪个按钮。我建议调整您想要位于下方的按钮的大小，以便“隐藏”部分不再是按钮的一部分。这样，公共区域中的点击将只转到顶部按钮。

# python - 无法证明 mod_wsgi 工作正常

> ID：14072616
> 
> 赞同：1
> 
> 时间：2012-12-28T16:32:02.077
> 
> 标签：python, apache, wsgi

我在 Debian 机器上为 Apache 启动并运行 python WSGI 模块时遇到了问题，或者可能只是我很难证明它在运行。

系统是 Debian 6.0.6，运行 python 2.6.6 和 Apache 2.2.16，启用了 mod_python 和 mod_wsgi；all 是默认安装，没有任何我知道的疯狂配置。

我想要做的是在 /var/www/pythontest 中有一个目录，一些开发人员可以删除一些简单的 python 代码并让它执行并在浏览器中显示结果。（具体原因不是刚开始安装django是老板要求先这样，然后我才能安装django。去图吧。）

我一直在尝试按照[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)上的配置指南来确认一切正常。

设置的 VirtualHost 是

```
>    < VirtualHost ###.##.###.##:80> <br>
>    ServerName test.yyy.com <br>
>
>    LogLevel info  <br>
>    ErrorLog /var/log/apache2/error.test.log <br>
>    CustomLog /var/log/apache2/access.test.log combined <br>
>
>    DocumentRoot /var/www <br>
>
>    WSGIDaemonProcess yyy.com processes=2 threads=15 display-name=%{GROUP} <br>
>    WSGIProcessGroup yyy.com <br>
>    WSGIScriptAlias /pythontest  /var/www/pythontest/test1.wsgi <br>
>
>    < Directory /var/www/pythontest > <br>
>    Order allow,deny <br>
>    Allow from all <br>
>    < /Directory> <br>
>    < /VirtualHost> 
```

在 pythontest 目录中是上面列出的配置指南中的 test1 脚本。

此时一切看起来都已安装好，没有吐出任何错误。我已经能够读取我放入目录中的任何文件/脚本，所有文件/脚本都具有 755 权限。但是 NONE 已经执行并在浏览器中显示了结果。

错误日志仅包含上述配置 [Fri Dec 28 10:46:21 2012] [info] mod_wsgi (pid=6554): Attach interpreter ''。

此时，我要做的就是让一个 python wsgi 应用程序成功运行，以证明一切正常，然后再进行任何更改并让程序员放松。

我可能只是累了，错过了显而易见的事情，但是关于可能是什么问题以及如何证明和解决它的任何建议？

谢谢，

蒂莫西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:52:14.470

> 系统是 Debian 6.0.6，运行 python 2.6.6 和 Apache 2.2.16，启用了 mod_python 和 mod_wsgi；all 是默认安装，没有任何我知道的疯狂配置。

mod_python 几年前就失宠了。不需要运行 mod_wsgi。您同时在同一台服务器上运行的事实*是*一个疯狂的配置。除非您需要它用于其他网站，否则我强烈建议您删除 mod_python。

> 之所以这样而不是刚开始安装Django的具体原因是老板要求先这样做，然后我才能安装Django。去图。

他是对的。这样做意味着您确定这是您的 mod_wsgi 配置的问题，与 Django 无关。它减少了调试某些东西需要查看的地方的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:34:58.940

你用的是什么网址？唯一可以使用该配置的是/pythontest，它总是会执行/var/www/pythontest/test1.wsgi。

如果您可以访问 DocumentRoot 的 /pythontest 目录下的任何脚本的原始代码，则表明 VirtualHost 甚至没有被使用。

可能的原因是 VirtualHost 甚至没有启用并被 Apache 包含在内，或者可能是因为您在 VirtualHost 名称中使用了 IP，而这可能不应该。

任何一个上的东西都意味着它将回退到默认的 VirtualHost，并且由于您可能使用相同的 DocumentRoot，默认的 VirtualHost 会将它们作为静态文件提供。

# iphone - UIBarButtonItem 在 iOS5 中具有拉伸的未平铺的 UIImage

> ID：14072617
> 
> 赞同：1
> 
> 时间：2012-12-28T16:32:07.333
> 
> 标签：iphone, ios, uikit

我正在使用外观 API 来自定义 UIBarButtonItems 的外观。

我目前需要使我的按钮看起来像这样：

![在此处输入图像描述](../Images/c6320bf9e47141cbe95a0ca536677bc2.png)

在 iOS5 中，你有我正在使用的这个方法：

```
UIImage *button = [[UIImage imageNamed:@"btn"]
                     resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)];
[[UIBarButtonItem appearance] setBackgroundImage:button forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

但这会平铺图像的未加盖部分而不是拉伸，这给了我这个：

![在此处输入图像描述](../Images/12ae4b14a792b45eb8f50228708b9a4b.png)

iOS 6 有了新方法

```
resizableImageWithCapInsets:resizingMode: 
```

它允许您指定“拉伸”调整大小模式，但它不适用于 iOS5。

如何使按钮拉伸而不是平铺 iOS5 的图像中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:02:29.550

事实证明这在 iOS5 中是不可能的，如果按钮被设置样式，则应始终使用水平样式渐变，因为图像将始终平铺。我最终改变了渐变方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T10:23:26.713

如果你需要拉伸，你可以使用旧的和不推荐使用`stretchableImageWithLeftCapWidth:topCapHeight:`的 iOS5 方法：

```
UIImage* (^makeStretchableImage)(UIImage*, CGSize) = nil;
if ([UIImage instancesRespondToSelector:@selector(resizableImageWithCapInsets:resizingMode:)])
{
    // If resizableImageWithCapInsets:resizingMode: is available, use it
    makeStretchableImage = ^(UIImage* image, CGSize inset) {
        return [image resizableImageWithCapInsets:UIEdgeInsetsMake(inset.height, inset.width, inset.height, inset.width) resizingMode:UIImageResizingModeStretch];
    };
}
else
{
    // Else, we are on an older iOS release, use the deprecated iOS5 method instead
    makeStretchableImage = ^(UIImage* image, CGSize inset) {
        return [image stretchableImageWithLeftCapWidth:inset.width topCapHeight:inset.height];
    };
}

UIImage* stretchableImage1 = makeStretchableImage(originalImage1, CGSizeMake(5,2));
UIImage* stretchableImage2 = makeStretchableImage(originalImage2, CGSizeMake(15,4));
UIImage* stretchableImage3 = makeStretchableImage(originalImage3, CGSizeMake(8,5)); 
```

# java - Mac 上的 JFileChooser 看不到以中文字符命名的文件？

> ID：14072619
> 
> 赞同：1
> 
> 时间：2012-12-28T16:32:12.580
> 
> 标签：java, macos, swing, internationalization, jfilechooser

该程序在 Intellij 中运行时运行良好（可以看到中文命名的文件）。

我将它构建到一个 .jar 文件中。执行了 jar 并且`JFileChooser`看不到这些文件。

我在 Windows 中尝试了 jar，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:11:30.600

这适用于我在 Mac OS X 10.8.2 上的文件：

```
import java.io.File;
import javax.swing.JFileChooser;
public class JFileChooserTest
{
  public static void main(String[] args)
  {
    System.out.println("file.encoding=" + System.getProperty("file.encoding"));
    String path;

    if(args.length > 0)
      path = args[0];
    else
      path = System.getProperty("user.dir", ".");

    File dir = new File(path);

    JFileChooser jfc = new JFileChooser(dir);
    int result = jfc.showOpenDialog(null);

    switch(result) {
      case JFileChooser.CANCEL_OPTION:
        System.out.println("User cancelled OPEN dialog.");
        break;
      case JFileChooser.APPROVE_OPTION:
        System.out.println("User chose file: " + jfc.getSelectedFile());
        break;
      case JFileChooser.ERROR_OPTION:
        System.out.println("User encountered an error");
        break;
     default:
       System.out.println("Confused");
       break;
    }

    System.exit(0);
  }
} 
```

这是一个示例运行：

```
$ java -showversion JFileChooserTest 
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode)

file.encoding=UTF-8
User chose file: /.../测试文件.txt 
```

这是另一个示例运行：

```
$ java -showversion -Dfile.encoding=ISO-8859-1 JFileChooserTest 
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode)

file.encoding=ISO-8859-1
User chose file: /.../????.txt 
```

在这两种情况下，文件选择对话框都正确显示了文件名（测试文件.txt）。

请注意，使用`java.awt.FileDialog`将为您提供大多数 Mac OS 用户习惯看到的特定于平台的文件对话框。虽然它不是严格意义上的 Swing（并且具有非常小的功能集），但它可能优于`JFileChooser`诸如 OPEN 和 SAVE 对话框之类的东西。（它在我的系统上也显示汉字没有问题）。

# iphone - MKMapView 在加载时覆盖除视图之外的所有内容？只有iOS5<

> ID：14072624
> 
> 赞同：0
> 
> 时间：2012-12-28T16:32:44.960
> 
> 标签：iphone, ios, ipad, mkmapview, mkoverlay

出于某种原因，我`MKMapView`有时会得到一个覆盖，覆盖除了加载时的视图之外的所有内容。您可以在视图加载后滚动到一侧并查看叠加层。另外，这个问题只存在于ios5及以下，ios6不会出现这个问题。我发现，如果您放大或缩小地图，地图的覆盖部分将适应新视图。例如，如果您缩小地图，则地图的未覆盖部分将调整并变大以适应您的视图的新大小，但如果您随后横向滚动，则地图仍将全部覆盖在 viewForOverlay 中定义的颜色方法。我不知道为什么，已经为此工作了一段时间，但谷歌没有发现任何问题。这是我的一些代码：

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {

    if([overlay class] == [MKPolyline class]){
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];

    int lineSize = [self.ud integerForKey:@"lineSize"];
    polylineView.lineWidth = lineSize;

    NSString *lineColor = [self.ud objectForKey:@"lineColor"];

    if([lineColor isEqualToString:@"Red"]){
        polylineView.strokeColor = [UIColor redColor];
    }else if([lineColor isEqualToString:@"Blue"]){
        polylineView.strokeColor = [UIColor blueColor];
    }else if ([lineColor isEqualToString:@"Orange"]){
        polylineView.strokeColor = [UIColor orangeColor];
    }else if([lineColor isEqualToString:@"Green"]){
        polylineView.strokeColor = [UIColor greenColor];
    }else if([lineColor isEqualToString:@"Black"]){
        polylineView.strokeColor = [UIColor blackColor];
    }
    return polylineView;
    }else{
        MKOverlayView *overlayToReturn = [[MKOverlayView alloc]initWithOverlay:overlay];
        return overlayToReturn;
    }
} 
```

这就是我得到的：

![MKMapView](../Images/508be4d047eca4f1da9d6e355807840b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:34:07.853

我怀疑问题出在您创建 MKPolyline 或 lineSize 设置上。这段代码在这里工作正常：

```
#import <MapKit/MapKit.h>
#import "ViewController.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    MKMapView *map = [[MKMapView alloc] initWithFrame:self.view.bounds];
    map.delegate = self;
    [self.view addSubview:map];

    CLLocationCoordinate2D coords[] = { {42,-83}, {32, -84}, {45,-78}, {42,-83} };
    MKPolyline *overlay = [MKPolyline polylineWithCoordinates:coords count:4];
    [map addOverlay:overlay];
}

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {

    if([overlay class] == [MKPolyline class]){
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];

    int lineSize = 2; //[self.ud integerForKey:@"lineSize"];
    polylineView.lineWidth = lineSize;

    NSString *lineColor = @"Red"; // [self.ud objectForKey:@"lineColor"];

    if([lineColor isEqualToString:@"Red"]){
        polylineView.strokeColor = [UIColor redColor];
    }else if([lineColor isEqualToString:@"Blue"]){
        polylineView.strokeColor = [UIColor blueColor];
    }else if ([lineColor isEqualToString:@"Orange"]){
        polylineView.strokeColor = [UIColor orangeColor];
    }else if([lineColor isEqualToString:@"Green"]){
        polylineView.strokeColor = [UIColor greenColor];
    }else if([lineColor isEqualToString:@"Black"]){
        polylineView.strokeColor = [UIColor blackColor];
    }
    return polylineView;
    }else{
        MKOverlayView *overlayToReturn = [[MKOverlayView alloc]initWithOverlay:overlay];
        return overlayToReturn;
    }
}

@end 
```

# java - 属于超类的不同类的对象的ArrayList？

> ID：14072628
> 
> 赞同：0
> 
> 时间：2012-12-28T16:32:55.183
> 
> 标签：java, arraylist

在下面的代码中应该在 '<' 和 '>' 之间放置什么，以便我能够添加 Animal 超类的每个子类的新对象？

```
package animal;

import javax.swing.JOptionPane;
import java.util.ArrayList;

public class Animal {

    public static void main(String[] args) {
        Animal createAnimals = new Animal();
        createAnimals.userInputHandle();

        ArrayList <> animalList = new ArrayList<>(); 
        animalList.add(new Dog);

    }

    private String userInputHandle(){

        String userInput;
        userInput = JOptionPane.showInputDialog("Select animal from the "
                + "following list"
                + "\n1.Dog\n2.Cat\n3.Snake\n4.Frog"
                + "\n5.Human\n6.Shark\n7.Sea Gulls");
        userInput = userInput.toLowerCase();

    return userInput;}
}

class Fish extends Animal{

}
class Amphibians extends Animal{

}
class Reptiles extends Animal{}
class Birds extends Animal{} 
```

这样我将在 Animal 类中创建一个方法并为每个子类覆盖它。例如对于两栖动物--> 青蛙属于两栖类等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:36:59.110

```
// this will work fine as 'Animal' will be base class for other class
ArrayList <Animal> animalList = new ArrayList<Animal>(); 
//
animalList.add(new Reptiles());
animalList.add(new Birds());
animalList.add(new Amphibians()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:36:52.500

如果你做出声明

```
ArrayList <Animal> animalList = new ArrayList<Animal>(); 
```

那么您就可以向其中添加 Animal 的任何子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:53:41.530

像这样在 ArrayList 上进行声明。

```
ArrayList <Animal> animalList = new ArrayList<Animal>(); 
```

添加 Animal 的子类。

```
animalList.add(new Monkey());
animalList.add(new Donkey()); 
```

等等。

如果您使用 Java SE7 实例化 Generic（在您的情况下为 ArrayList）的另一种方法是使用像这样的有限类型推断。

```
ArrayList <Animal> animalList = new ArrayList<>(); 
```

# svn - 删除文件还是存档？

> ID：14072634
> 
> 赞同：5
> 
> 时间：2012-12-28T16:33:24.627
> 
> 标签：svn, delete-file, archiving

当不再需要文件时，“最佳实践”是什么？从存储库中删除它，或将其移动到存储库中的“notneededfiles_archive”？

我想删除它们，但我不知道是否有一种简单的方法可以列出所有已删除的文件。存档选项，你可以直接看到所有已删除的文件，如果你需要一个回来看看那里......但过一段时间它可能是一个巨大的文件夹......（如果你删除了很多:)）

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:35:13.147

标准做法是`svn rm`，这会使该项目消失，但将其保留在历史记录中，以便您以后可以在需要时再次恢复它。

许多 svn 安装包括 viewvc 或类似的可视化工具，允许您查看旧版本，然后在需要时下载内容。从命令行，svn 命令还允许从特定的转速检出，当然重要的版本应该用 svn cp '标记'。

如果您真的遇到磁盘空间问题，您也可以考虑采取管理措施来删除历史记录，但这可能意味着您首先滥用了源代码控制系统。

# c# - 在 ThreadPool.RunAsync 中读取 SyndicationFeed

> ID：14072639
> 
> 赞同：0
> 
> 时间：2012-12-28T16:33:55.070
> 
> 标签：c#, microsoft-metro, threadpool

我正在开发一个 Windows 8 Metro RSS Feed 应用程序。因此，我正在实施一个后台任务来检查是否有新的提要可用，如果有则通知用户。我这样做如下：

```
public sealed class UpdateCheck : IBackgroundTask
{
  public async void Run(IBackgroundTaskInstance taskInstance)
  {
    BackgroundTaskDeferral backgroundTaskDeferral = taskInstance.GetDeferral();

    await StartUpdateCheck();

    backgroundTaskDeferral.Complete();
  }

  public IAsyncAction StartUpdateCheck()
  {
    return ThreadPool.RunAsync(async o =>
      { 
        SyndicationClient client = new SyndicationClient();
        SyndicationFeed feed = await client.RetrieveFeedAsync(new Uri("http://.../feed.xml"));

        ApplicationDataContainer applicationDataContainer = ApplicationData.Current.LocalSettings;
        string lastFeedId = (string) applicationDataContainer.Values["LastFeedId"];

        if (lastFeedId != feed.Items.First().Id)
        {
          // inform user
        }
      });
  }
} 
```

当我正在调试代码并且我想`SyndicationFeed feed = await client.RetrieveFeedAsync(new Uri("http://.../feed.xml"));`通过按 F10 来跨行时，没有任何反应。进一步的代码行不会被执行。所以，当我在方法*之前*`RetrieveFeedAsync`设置断点时，断点会被命中。*在*这一行之后，没有断点被命中。

我正在阅读代码中另一个位置的 RSS-Feed，它不是 BackgroundTask（而不是在`ThreadPool.RunAsync`lambda 表达式中），并且一切正常，因此该`ThreadPool.RunAsync`方法可能会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:42:42.537

后台任务中不需要 ThreadPool.RunAsync，它已经在单独的线程中运行。

# ios6 - 有条件地使用 initWithStyle UITableView

> ID：14072641
> 
> 赞同：0
> 
> 时间：2012-12-28T16:33:56.767
> 
> 标签：ios6, uitableview, segue

我有一个可以加载各种数据的 UITableView 类。无论数据是什么，对加载的数据的所有操作都是相同的，所以我认为最好将它们全部放在同一个类中。我遇到的问题是，对于一组数据，我需要 UITableView 使用 UITableViewStyleGrouped 样式，其余的使用 UITableViewStylePlain。

通过使用以下 if 语句，我能够让它在 prepareForSegue 中工作：

```
if([whatToLoad isEqualToString:@"Sets"]){
            [[segue destinationViewController] initWithStyle:UITableViewStyleGrouped];
        }
        else
            [[segue destinationViewController] initWithStyle:UITableViewStylePlain]; 
```

但随后 Xcode 给了我一个关于“未使用的表达式结果”的警告。在没有警告的情况下，我还能做些什么来达到相同的结果吗？或者我是否必须为需要分组表的一组数据创建不同的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:47:53.287

您可以在情节提要文件中拥有多个表视图控制器，并将“类”设置`UITableViewController`为每个控制器的相同子类。因此，您可以为它们中的每一个使用相同的控制器代码，但一个具有“分组”表视图，而另一个具有“普通”表视图。

打电话

```
[[segue destinationViewController] initWithStyle:...] 
```

对我来说似乎有风险，因为目标视图控制器是一个已经分配和初始化的实例，并且`initXXX`通常允许函数返回*不同*的实例。

# c++ - 内存模块是否映射到进程的虚拟空间？

> ID：14072643
> 
> 赞同：2
> 
> 时间：2012-12-28T16:34:08.023
> 
> 标签：c++, windows, debugging, memory-management

我看到在 Windows 上，函数[EnumProcessModules](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682631%28v=vs.85%29.aspx)返回为指定进程加载的许多模块（其中一些应该是系统 dll，如guard32.dll、version.dll 等。）

我的问题是：这些模块是否映射到进程的虚拟空间？我可以从主应用程序代码跳转到位于这些模块之一的指令（当然知道地址）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:46:37.033

是的，DLL 应该映射到进程虚拟地址空间。如果该页面中的代码尚未执行，则映射可能不受实际物理页面的支持，当然，在没有正确初始化或设置的情况下执行“随机”代码位以使代码正确执行（例如，调用处理函数使用一些需要在另一个函数中分配的数据）显然会在某些不好的定义中以错误的方式结束。还要记住，DLL 很可能在运行相同代码的不同时间加载到不同的地址，等等，所以你不能依赖 DLL 的地址是恒定的——在另一台机器上它很可能完全不同.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:13:43.390

是的，只需`GetProcAddress`使用您从`EnumProcessModules`. `GetProcAddress`计算模块内的函数偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:23:54.210

是的，任何可以直接从您自己的可执行文件调用的 DLL 代码都必须映射到您的进程空间。您可以使用 SysInternal 的 VMMap 实用程序获得进程虚拟内存空间的精确图表：[http ://technet.microsoft.com/en-us/sysinternals/dd535533](http://technet.microsoft.com/en-us/sysinternals/dd535533)

正如其他答案中提到的，虚拟地址空间在很大程度上（如果不是完全的话）是动态的。

在某些情况下，您的进程无法直接访问某些共享库。这些通常是沙盒（安全）内核或驱动程序库，它们通过特殊的安全层/API 调用，执行参数验证，然后执行环/上下文切换到不同的虚拟进程地址空间，或通过安全传递命令线程间通信队列。这些是昂贵的操作，因此它们通常仅在对系统稳定性有好处时才使用。

# php - Symfony2 - 尝试在 prod 环境中查看我的站点会导致空白屏幕；开发中没有错误/警告

> ID：14072644
> 
> 赞同：5
> 
> 时间：2012-12-28T16:34:09.150
> 
> 标签：php, symfony

来自官方 Symfony Google Group 的交叉发布，因为时间是一个问题：

我正在最后将我的网站上传到我的主机。在开发环境中一切都运行良好 - 没有错误，没有警告。当我尝试在 prod (localhost/web/app.php/) 中访问它时，我得到一个空白屏幕。我试图清除缓存，看看是否有帮助，但出现以下错误：

```
$ app/console cache:clear --env=prod

[Symfony\Component\DependencyInjection\Exception\InvalidArgumentException] 
The parameter "kernel.trusted_proxies" must be defined. 
```

我可以毫无问题地清除开发缓存。

请帮忙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T17:02:00.320

您需要将trusted_proxies 添加到您的配置中，即使它是空白的。

内：`app/config/config.yml`添加：

```
framework:
    trusted_proxies: ~ 
```

您可能还想删除缓存文件 ( `app/cache/prod`)，然后运行控制台缓存清除 ( `$ app/console cache:clear --env=prod`)

# jquery-ui - 在 jqueryUI 中使用带有 effect() 的缓动

> ID：14072648
> 
> 赞同：1
> 
> 时间：2012-12-28T16:34:23.513
> 
> 标签：jquery-ui

我正在尝试将缓动应用于特定的 jqueryUI effect() 并且无法使其正常工作。根据this page，它应该，但没有代码细节：

[http://api.jqueryui.com/1.8/effect/](http://api.jqueryui.com/1.8/effect/)

我试过了：

```
$("#id").effect( "pulsate", {easing: "swing"} );
$("#id").effect( "pulsate", {"swing"} );
$("#id").effect({effect: "pulsate", easing: "swing"});
$("#id").effect( "pulsate", "swing" );
$("#id").effect( effect: "pulsate", easing: "swing" ); 
```

没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:52:28.347

```
$('#id').effect( "highlight",{color:'#FFFF00',easing:'easeInExpo'},4000 ); 
```

我在滚动到事件后使用效果突出显示元素。在上面的代码中，缓动对我有用。

我正在运行 jQuery 1.8。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T16:59:00.300

最近，jQuery UI 推出了一个新网站。总的来说，我发现它充其量是无用的，最坏的情况是不准确的。我不确定在这种情况下我是否会信任新站点，因为jQuery[效果文档](http://docs.jquery.com/UI/Effects/Pulsate)`pulsate`没有描述相同的选项。

如果您只想`swing`使用此特定元素，则可以使用以下代码：

```
$("#id")
.animate({height: "hide", width: "hide"}, 1500, "swing")
.animate({height: "show", width: "show"}, 1500, "swing"); 
```

[这是我建议的代码示例](http://jsfiddle.net/3kUm7/1/)。

如果您想做其他事情，请多说，我们会尽力提供帮助。

# java - Java 中用于播放的硬件 MIDI 输出？

> ID：14072657
> 
> 赞同：1
> 
> 时间：2012-12-28T16:35:10.230
> 
> 标签：java, midi, midi-interface, javax.sound.midi

我正在制作一个简单的应用程序来播放 Java 中的 MIDI 文件。
我正在使用`javax.sound.midi`图书馆。

我可以正确检索我的 MIDI 输出设备（USB 到 MIDI 电缆）。

但是当我播放序列时，它总是在默认的声音合成器中播放，这是主机操作系统的通用 Midi (Soundfont) 播放。

我遇到的问题是更改默认的 MIDI 输出。

当我执行

```
Receiver MidiOutReceiver; //instantiated earlier
Sequencer MidiOutSequencer = MidiSystem.getSequencer();
MidiOutSequencer.open();
MidiOutSequencer.start(); 
```

我从扬声器中听到 MIDI 序列再现。

参考[文档后](http://jsresources.org/)

```
3.10。
“Java Sound Sequencer”隐式连接到默认合成器，
3.5.
在您的程序中，您可以自己获取 Synthesizer 实例并连接
它使用发射器/接收器对显式发送到定序器。
所以你知道使用的是哪个合成器。
如果您获得了预连接到合成器的音序器，
您可以使用 getTransmitters() 方法找出合成器。

```

但是没有提到如何显式使用这个 Transmitter / Receiver 对并使用新的 Default Synthesizer 实例化 Sequencer 对象。

我有正确的发射器和接收器。但是他们不是把MIDI弹出来的。

当我尝试

```
MidiSystem.getTransmitter().setReceiver(MidiOutReceiver); 
```

它似乎没有改变任何东西。

如何明确地将此接收器/发射器对与合成器一起使用，以便默认音序器使用我的 MIDI 输出端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:55:48.010

我忽略了一些简单的事情。`Sequencer`由返回的默认值`MidiSystem.getSequencer();`有一个 Transmitter，后者又具有`setReceiver()`添加 MIDI Out 设备的方法。但您必须拥有正确的 MIDI 输出设备。我不小心选择了错误的设备。

因此，首先通过查看`DeviceInfos`阵列选择正确的输出设备，选择正确的设备，然后`Sequencer`使用正确的`Receiver`.

```
MidiDevice.Info[] MidiDeviceInfos = MidiSystem.getMidiDeviceInfo();
//find the suitable device number here, based on some criteria
MidiDevice MidiOutDevice = MidiSystem.getMidiDevice(MidiDeviceInfos[DEVICE_NUMBER]);
Receiver MidiOutReceiver = MidiOutDevice.getReceiver();
Sequencer MidiOutSequencer = MidiSystem.getSequencer();
//Add the new MIDI out device here.
MidiOutSequencer.getTransmitter().setReceiver(MidiOutReceiver);
MidiOutSequencer.open(); 
```

现在您可以`open()`使用文件和`play()`它，但由于还使用了默认的 MIDI 输出设备，您也可能会听到通用 MIDI/Soundfont MIDI 声音。起初这让我很失望，但现在 MIDI 设备也会将打开的序列发送到您添加的`Receiver`.

# python - Python 包装器 - 关于变量范围的困惑

> ID：14072659
> 
> 赞同：0
> 
> 时间：2012-12-28T16:35:14.770
> 
> 标签：python, wrapper, scope

我想我会很聪明，写一个调用会话变量的包装器（很多都存在）并将其添加到需要会话变量的（django）视图中。但是我似乎不理解变量的范围，或者我写错了。

我的包装是：

```
def s_vars(func_to_decorate):
    @wraps(func_to_decorate)
    def wrapper(request, *args, **kwargs):
        #add all the session variables to kwargs and accessible for the decorated function.
        user_obj = request.user
        datepicker = request.session['datepicker']
        date_format = request.session['date_format']
        .........
        country = request.session['country']
        metric = request.session['metric']
        qrydtm = request.session.get("qrydtm",date.today())

        result = func_to_decorate(request, *args, **kwargs)

        #any post view checks to be done go here

        #return to the function to be decorated.
        return result
    return wrapper 
```

然后对于视图，我有类似的东西：

```
@s_vars
def main(request, template_name='placeholder.html'):
    return render_to_response(template_name, RequestContext(request,{
           'user':user_obj
            })) 
```

但这会导致在方法“main”中无法访问 user_obj 的错误。我的理解是这是一个内部函数，因此这个内部函数“main”可以访问“包装器”方法下列表中的变量。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:47:29.387

语法

```
@spam
def ham():
    pass 
```

正好等价于语法

```
def ham():
    pass
ham = spam(ham) 
```

这是否阐明了为什么您正在做的事情不起作用？

* * *

如果你想从装饰器向函数传递东西，通常的习惯是向函数发送额外的参数。这可能有点恶心，因为这意味着*看起来*正确的 argspec 实际上不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:47:24.347

嵌套函数*仅从*定义它们的作用域中获取作用域变量，并且绑定发生在编译时。

以后不能添加作用域变量，当然也不能使用简单的包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:47:41.217

在调用内部函数的地方**，**它只是由外部作用域函数调用，而不是在其中**定义**。

这种区别（也由解释器与运行时做出）在范围界定中绝对重要。看一下 s_vars 包装器的 dis（反汇编）（或相同行为的简化示例）。代码不会针对`func_to_decorate`.

如果您想为内部函数提供可用的变量列表，那么传入的对象可能更有意义。包装器可以确保外部 API 没有它。

# visual-studio-2010 - Visual Studio 2010 说“找不到文件'//connect.facebook.net/en_GB/all.js'”

> ID：14072664
> 
> 赞同：0
> 
> 时间：2012-12-28T16:35:23.227
> 
> 标签：visual-studio-2010, razor, warnings

在 Visual Studio 2010 的 .cshtml 文件中，我有以下脚本元素：

```
<script src="//connect.facebook.net/en_GB/all.js"></script> 
```

它带有绿色下划线，并给我警告“找不到文件'//connect.facebook.net/en_GB/all.js'”。

我可以浏览到`//connect.facebook.net/en_GB/all.js`，所以它**确实**存在。

我的验证目标架构是`HTML5`.

为什么它抱怨这个，我该如何阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:37:42.573

您忘记了前面的协议：

```
<script src="http://connect.facebook.net/en_GB/all.js"></script> 
```

当您在地址栏中输入 URL 时，浏览器会自动更正 URL，但是在页面源中使用它时，它将默认为本地文件……在这种情况下这是错误的。

# kernel - 如何获取与特定 Fedora 构建相对应的内核源代码

> ID：14072667
> 
> 赞同：1
> 
> 时间：2012-12-28T16:35:30.783
> 
> 标签：kernel, fedora

我需要将我的内核（centos 6.3）移动到 2.6.38。在互联网上搜索后，我能够从 [http://kojipkgs.fedoraproject.org/packages/kernel/2.6.38.8/35.fc15/x86_64/kernel-2.6.38.8-35 成功安装 2.6.38.8-35.fc15。 fc15.x86_64.rpm](http://kojipkgs.fedoraproject.org/packages/kernel/2.6.38.8/35.fc15/x86_64/kernel-2.6.38.8-35.fc15.x86_64.rpm)

我还需要这些内核的来源。 [http://kojipkgs.fedoraproject.org/packages/kernel/2.6.38.8/35.fc15/src/kernel-2.6.38.8-35.fc15.src.rpm](http://kojipkgs.fedoraproject.org/packages/kernel/2.6.38.8/35.fc15/src/kernel-2.6.38.8-35.fc15.src.rpm)。然而，事实证明，rpm 只有补丁，如

input-wacom-add-support-for-lenovo-tablet-id-0xe6.patch intel-iommu-add-domain-check-in-domain_remove_one_dev_info.patch intel-iommu-check-for-identity-mapping-candidate-using。补丁 intel-iommu-dont-cache-iova-above-32bit.patch intel-iommu-flush-unmaps-at-domain_exit.patch intel-iommu-only-unlink-device-domains-from-iommu.patch intel-iommu-从identity.patch 中删除主机桥设备

那么如何获取与此构建对应的内核源代码。感谢您的任何输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T16:48:52.563

有一个非常简单的方法是 yundownloader，使用

```
$yumdownload --source kernel 
```

下载内核包的源 rpm，然后他们安装 rpm，然后转到`~/rpmbuild`，运行

```
rpmbuild -bp SPECS/kernel.spec 
```

修补的源代码树将被放入`~/rpmbuild/BUILD`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:44:04.187

我相信这是你应该做的：去[http://www.kernel.org](http://www.kernel.org)下载内核源代码，解压它们，然后你可以应用下载的源文件中的补丁来为你提供那个二进制包的源代码. [http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.38.8.tar.xz](http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.38.8.tar.xz)似乎是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T00:50:51.187

我曾经启用源 yum 存储库，如**fedora-source**（默认名称），然后通过命令获取内核源`sudo yum install kernel-3.9.5-301.fc19.src`

# php - yii 多个内连接

> ID：14072672
> 
> 赞同：1
> 
> 时间：2012-12-28T16:36:28.233
> 
> 标签：php, mysql, yii

我正在尝试在 yii 中编写查询。我有以下工作

```
$criteria = new CDbCriteria;
$criteria->condition = "($column = :id)";
$criteria->params = array(":id" =>  $id );
$rows = Jobs::model()->with('pROJ')->findAll($criteria); 
```

这将返回数组中的 Jobs 模型。我需要在 yii 中编写以下查询以返回模型

```
SELECT jobs.JOBNO, jobs.STATUS, projects.ORDERNO, jobs.PROJID, jobs.NAME, jobs.SEQ, jobs.PCENTDONE, jobs.EARNED, jobs.VALUE, jobs.DATEIN, jobs.DATEDONE, jobs.DATEDUE, jobs.SENTBACK, jobs.ORIGTAPES, jobs.COMMENTS, projects.CATEGORY, orders.BIDNO
FROM (jobs INNER JOIN projects ON jobs.PROJID = projects.PROJID) INNER JOIN orders ON projects.ORDERNO = orders.ORDERNO
where jobs.projid =     3002001
ORDER BY jobs.JOBNO, jobs.PROJID 
```

我尝试了以下方法，但它不起作用

```
$rows = Yii::app()->db->createCommand()
            ->select('jobs.*, projects.ORDERNO, projects.CATEGORY, orders.BIDNO')
            ->from('jobs, projects, orders')
            ->join('projects p','jobs.PROJID = p.PROJID')
            ->join('orders o', 'p.ORDERNO = o.ORDERNO')
            ->where('jobs.projid=:id', array(':id'=>$id))
            ->queryRow(); 
```

我收到以下错误

```
CDbCommand failed to execute the SQL statement: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'jobs.PROJID' in 'on clause'. The SQL statement executed was: SELECT `jobs`.*, `projects`.`ORDERNO`, `projects`.`CATEGORY`, `orders`.`BIDNO`
FROM `jobs`, `projects`, `orders`
JOIN `projects` `p` ON jobs.PROJID=p.PROJID
JOIN `orders` `o` ON p.ORDERNO=o.ORDERNO
WHERE jobs.projid=:id 
```

我已经更新到

```
$rows = Yii::app()->db->createCommand()
                ->select('jobs.*, projects.orderno, projects.category, orders.bidno')
                ->from('jobs')
                ->join('projects p','jobs.projid = p.projid')
                ->join('orders o', 'p.orderno = o.orderno')
                ->where('jobs.projid=:id', array(':id'=>$id))
                ->queryRow(); 
```

但我仍然得到错误。mysql中的所有列都是CAPS

```
CDbCommand failed to execute the SQL statement: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'projects.orderno' in 'field list'. The SQL statement executed was: SELECT `jobs`.*, `projects`.`orderno`, `projects`.`category`, `orders`.`bidno`
FROM `jobs`
JOIN `projects` `p` ON jobs.projid = p.projid
JOIN `orders` `o` ON p.orderno = o.orderno
WHERE jobs.projid=:id 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T11:10:01.223

正如@DCoder 所说：你的选择现在应该是`select('jobs.*, p.orderno, p.category, o.bidno')`. `jobs`为了保持一致性，您还应该使用以下别名

```
$rows = Yii::app()->db->createCommand()
            ->select('j.*, p.orderno, p.category, o.bidno')
            ->from('jobs j')
            ->join('projects p','j.projid = p.projid')
            ->join('orders o', 'p.orderno = o.orderno')
            ->where('j.projid=:id', array(':id'=>$id))
            ->order('j.jobno,j.projid')
            ->queryRow(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:31:00.663

我认为您应该从中删除**项目、订单**，`->from('jobs, projects, orders')`并且可能您应该降低大小写，`jobs.PROJID`因为您的错误消息说它找不到该列。

# c# - 实体框架查询多对多关系

> ID：14072676
> 
> 赞同：6
> 
> 时间：2012-12-28T16:36:42.557
> 
> 标签：c#, .net, sql-server, entity-framework, many-to-many

我有一个数据库，其中用户可以属于多个角色，角色可以有多个权限。两种关系都是多对多的。我想查询并生成用户拥有的权限列表。我试图通过查询角色表来查看用户是哪些角色的成员，然后我想查询并查看每个角色包含哪些不同的权限来完成此操作。但是我似乎无法正确获取 LINQ。

```
var permissions = RoleRepository.Get()
    .Where(x => x.Users.Contains(user))
    .Select(x => x.Permissions); 
```

上面的代码给了我一个权限列表，我只想要一个权限列表。无论如何（在 LINQ 中）可以合并所有这些列表吗？还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:53:43.143

使用`SelectMany`相反，`SelectMany`展平返回列表列表的查询

所以试试这个：

```
var permissions = RoleRepository.Get().Where(x => x.Users.Contains(user))
                                .SelectMany(x => x.Permissions); 
```

希望这会有所帮助！

# c++ - C++中c_str()的线程安全

> ID：14072683
> 
> 赞同：5
> 
> 时间：2012-12-28T16:36:55.363
> 
> 标签：c++, multithreading, stl

我创建了一个类 SettingsClass，其中包含静态字符串，这些字符串包含 MySQL C++ 连接器库要使用的数据库连接字符串（例如主机名、数据库名、用户名、密码）。

每当一个函数需要连接到数据库时，它都会在这些静态字符串上调用 .c_str() 函数。例如：

```
Class SettingsClass
{
    public:
    static string hostname;
    ...
}SettingsClass;
string SettingsClass::hostname;

//A function that needs to connect to the DB uses:
driver = get_griver_instance();
driver->connect(SettingsClass.hostname.c_str(),...); 
```

静态字符串在进程生命周期中填充一次。它的值是从配置文件中读取的。

我的应用程序是多线程的。我是否以安全的方式使用 c_str() ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:39:47.553

c_str() 本身应该是线程安全的。但是，如果您有另一个线程访问（写入）您正在使用 c_str() 的字符串，那么您正在玩汽油池中的火柴。

通常 c_str() 是通过在现有字符串的末尾添加一个零值（空字符 0x00，而不是 0x30 的零字符）来实现的（如果那里还没有），并传回 where 的地址字符串被存储。

任何有兴趣的人都可以在这里阅读 libstdc++ 代码： [libstdc++, basic_string.h](http://gcc.gnu.org/git/?p=gcc.git;a=blob;f=libstdc%2b%2b-v3/include/bits/basic_string.h;h=1e3426680fc1facfa136cc135915dee6e85d6a6f;hb=b1fe281557bc7b61f29c140e07364d072a3f2ea6) 有趣的行是 1802 和 294 - 1802 是 c_str() 函数，而 294 是 c_str() 调用的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:53:15.287

至少在理论上，该标准允许实现不是线程安全的。在实践中，我认为您不会冒任何风险（尽管形式上可能存在未定义的行为），但如果您想确定，只需`.c_str()`在初始化期间对所有字符串调用一次（在线程启动之前） . 该标准保证返回指针的有效性，直到调用下一个非常量函数（即使您不保留它的副本），这意味着实现不能改变任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:39:35.650

由于`string`类型是恒定的（因此，假设它是不可变的），它永远不会被修改。任何只读取它的函数都应该是线程安全的。

所以，我认为`.c_str()`是线程安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:44:37.407

只要`std::string`变量在您的线程启动之前正确初始化并且之后使用`const char*`表示通过不更改`c_str()`应该是线程安全的。

# php - 在PHP中，如何将oW格式的日期转换为时间戳？

> ID：14072690
> 
> 赞同：2
> 
> 时间：2012-12-28T16:37:32.270
> 
> 标签：php

我有一个`oW`格式的日期。这是 ISO 8601 格式的 4 位数年份，后跟周数。例如，201301 表示从 2012 年 12 月 31 日星期一开始的一周。

如何将其转换回时间戳。从时间戳到字符串适用于`date('oW',$ts)`. 我该如何倒退？我有兴趣以 oW 格式表示一周中的星期一。如果 PHP 提供了一种单向的方法，但不考虑逆向，那将是非常愚蠢的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:05:03.180

ISO 8601 需要以下格式的星期日期：

```
YYYY\WWW 
```

例如：

2012W52

是 2012 年第 52 周的开始，实际上是 2012/12/24。

要将星期日期转换回时间戳，您可以使用 php 函数`strtotime()`。代码如下所示：

```
$oW = '2012W53';
$time = strtotime($oW);
// will output: 2012-12-31T00:00:00+01:00 (I'm in CEST)
echo date('c', $time); 
```

但是，您在上面发布的格式 - 201300 - 无法被`strtotime()`. 有两个问题：

*   本周不允许使用 00。周的允许值是从 01 到 53
*   你错过了中间的“W”。但它属于 ISO 8601 标准。

在我的测试中，我进一步发现，2012W53 指向 2012/12/31 而不是 2013W00（或您可能认为的 W01）

此外，您可以[在 php 手册](http://php.net/manual/en/function.strtotime.php#105344)和关于此的[Wikipedia 文章](http://en.wikipedia.org/wiki/ISO_week_date)中阅读此评论。

# opencv - 拜耳到 HSV 使用 openCV

> ID：14072694
> 
> 赞同：1
> 
> 时间：2012-12-28T16:38:08.350
> 
> 标签：opencv, color-space

有人知道是否有可用的功能（基于 OpenCV）将拜耳图像转换为 HSV 色彩空间？还是我必须通过 RGB 执行该步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:39:57.173

阅读有关 cvtColor 和 CV_BayerBG2BGR 的信息。更多[在这里](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html)。

# php - 正则表达式删除 http://www。如果它存在于 PHP 和 JS 中

> ID：14072697
> 
> 赞同：1
> 
> 时间：2012-12-28T16:38:21.743
> 
> 标签：php, javascript, regex

有人可以帮我用正则表达式（我在 php 和 js 中需要它）来删除 http:// 和 www。从 url 字符串的开头并删除尾随 / 如果它在那里。

例如

*   `http://www.google.com/`将会`google.com`
*   `https://yahoo.com?page=1` 将会`yahoo.com?page=1`
*   `fancysite.com/articles/2012/`将会 `fancysite.com/articles/2012`

这是我用于 JS 端的代码：

```
row.page_href.replace(/^(https?|ftp):\/\//, '') 
```

这是我用于 php 端的代码：

```
$urlString = rtrim($urlString, '/');
$urlString = preg_replace('~^(?:https?://)?(?:www[.])?~i', '', $urlString); 
```

如您所见，JS 正则表达式当前仅删除 http://，而 php 需要两个步骤来完成所有操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:43:29.320

```
function cleanUrl($url)
{
  if (($d= parse_url($url)) !== false) // valid url
  {
    return sprintf('%s%s%s',
      ltrim($d['host'], 'www.'),
      rtrim($d['path']. '/'),
      !empty($d['query']) ? '?'.$d['query'] : '');
  }
  return $url;
} 
```

我会利用[parse_url](http://www.php.net/parse_url)（验证 url 以及“清理”它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:42:04.517

`#(https?(://))?(www.?)?(.*)#i`

对我来说工作得很好。您可以更改最后一个`(.*)`以匹配 URL 的 RFC 标准。

输出：

```
david@david-desktop ~ $ php -a
Interactive shell

php > $str = preg_replace('#(https?(://))?(www.?)?(.*)#i', '$4', 'https://www.google.ca');
php > echo $str . PHP_EOL;
google.ca
php > $str = preg_replace('#(https?(://))?(www.?)?(.*)#i', '$4', 'https://google.ca');
php > echo $str . PHP_EOL;
google.ca
php > $str = preg_replace('#(https?(://))?(www.?)?(.*)#i', '$4', 'http://google.ca');
php > echo $str . PHP_EOL;
google.ca
php > 
```

# javascript - iframe 的自动高度调整大小，chrome 和 safari 的问题

> ID：14072702
> 
> 赞同：1
> 
> 时间：2012-12-28T16:38:49.447
> 
> 标签：javascript, jquery, iframe

我需要在页面中包含一个 iframe，并且我想计算正确的高度并对其进行调整以避免显示垂直滚动条。不过，如果需要，我想显示水平滚动条。

我发现了几篇关于这个问题的帖子，但没有人能 100% 工作。这是我见过的一种非常常见的方法：

```
$(document).ready(function() {      
$('iframe').load(function() {
$("#your-iframe-id").height($("#your-iframe-id").contents().find("html").height()+35);
});
})

<iframe id="your-iframe-id" style="width:100%;border:0;" src="test.php"></iframe> 
```

我发现这种方法的问题是，对于 Safari 和 Chrome，如果导航到 iframe，我访问的页面比前一个页面短，那么框架的高度仍然是较高页面的高度。相反，如果您从短页面导航到高页面，则一切正常。Firefox 没有这个问题；我没有尝试使用 IE 和 Opera。

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:35:12.453

```
<script>
    var resizeHandle = function()
    {
        var theFrame = $('.window-content-wrapper', parent.document.body);
        theFrame.height($(document).height());      
        var theFrame = $('.window-content', parent.document.body);
        theFrame.height($(document).height());
    };
</script>

<iframe id ="home"  onResize="resizeHandle()" onload="resizeHandle()" style="width:100%;border:0;" src="test.php"></iframe> 
```

# python - 如何在 Qt Designer 中对“hello world”程序进行故障排除？

> ID：14072704
> 
> 赞同：1
> 
> 时间：2012-12-28T16:38:59.987
> 
> 标签：python, qt, pyqt

我尝试仅遵循本指南的第一部分：http: [//talk.maemo.org/archive/index.php/t-39879.html](http://talk.maemo.org/archive/index.php/t-39879.html) 以仅使 hello world 部分起作用。它没有

这是错误

```
Traceback (most recent call last):
  File "helloworld2.py", line 69, in <module>
    mainWindow = MainWin(None, "main window")
  File "helloworld2.py", line 49, in __init__
    self.setupUi(rootWidget)
  File "helloworld2.py", line 25, in setupUi
    MainWindow.setCentralWidget(self.centralwidget)
AttributeError: 'QWidget' object has no attribute 'setCentralWidget' 
```

这应该工作（调整后），还是我应该走一条完全不同的路线？如果它应该工作，有什么事情要做来排除故障？

以下是 .py 文件的组成部分。我不确定我是否正确输入了它，我不确定我是否理解正确的输入方式，所以它看起来与文件中的相同。如果这看起来不正确，我会再试一次。

```
from PyKDE4 import kdecore
from PyKDE4 import kdeui
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(800, 400)
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.label = QtGui.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(80, 110, 271, 51))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label.setFont(font)
        self.label.setObjectName(_fromUtf8("label"))
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtGui.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 20))
        self.menubar.setObjectName(_fromUtf8("menubar"))
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(MainWindow)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        MainWindow.setStatusBar(self.statusbar)

    self.retranslateUi(MainWindow)
    QtCore.QMetaObject.connectSlotsByName(MainWindow)

def retranslateUi(self, MainWindow):
    MainWindow.setWindowTitle(kdecore.i18n(_fromUtf8("MainWindow")))
    self.label.setText(kdecore.i18n(_fromUtf8("Hello World!")))

if __name__ == '__main__':
    import sys
    global app
class MainWin(kdeui.KMainWindow, Ui_MainWindow):
    def __init__ (self, *args):
        kdeui.KMainWindow.__init__ (self)
        rootWidget = QtGui.QWidget(self)
        self.setupUi(rootWidget)
        self.resize(640, 480)
        self.setCentralWidget(rootWidget)

appName     = "default"
catalog     = ""
programName = kdecore.ki18n("default")
version     = "1.0"
description = kdecore.ki18n("Default Example")
license     = kdecore.KAboutData.License_GPL
copyright   = kdecore.ki18n("unknown")
text        = kdecore.ki18n("none")
homePage    = ""
bugEmail    = "email"

aboutData   = kdecore.KAboutData(appName, catalog, programName, version, description,
                          license, copyright, text, homePage, bugEmail)
kdecore.KCmdLineArgs.init(sys.argv, aboutData)

app = kdeui.KApplication()
mainWindow = MainWin(None, "main window")
mainWindow.show()
app.lastWindowClosed.connect(app.quit)
app.exec_ () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:13:27.733

看起来你的代码有点乱，看看这是否适合你，然后从那里开始：

```
#!/usr/bin/env python

from PyKDE4 import kdecore, kdeui
from PyQt4 import QtCore, QtGui

appName     = "default"
catalog     = ""
programName = kdecore.ki18n("default")
version     = "1.0"
description = kdecore.ki18n("Default Example")
license     = kdecore.KAboutData.License_GPL
copyright   = kdecore.ki18n("unknown")
text        = kdecore.ki18n("none")
homePage    = ""
bugEmail    = "email"
aboutData   = kdecore.KAboutData(appName, catalog, programName, version, description,
                          license, copyright, text, homePage, bugEmail)

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(800, 400)
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.label = QtGui.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(80, 110, 271, 51))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label.setFont(font)
        self.label.setObjectName(_fromUtf8("label"))
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtGui.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 20))
        self.menubar.setObjectName(_fromUtf8("menubar"))
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(MainWindow)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        MainWindow.setWindowTitle(kdecore.i18n(_fromUtf8("MainWindow")))
        self.label.setText(kdecore.i18n(_fromUtf8("Hello World!")))

class MainWindow(QtGui.QMainWindow, Ui_MainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        self.setupUi(self)

if __name__ == "__main__":
    import  sys

    kdecore.KCmdLineArgs.init(sys.argv, aboutData)
    app = kdeui.KApplication()
    main = MainWindow()
    main.resize(640, 480)
    main.show()
    app.lastWindowClosed.connect(app.quit)
    app.exec_() 
```

# visual-c++ - WAF：MinGW (GCC) 和 MSVC 2012 之间的冲突

> ID：14072705
> 
> 赞同：3
> 
> 时间：2012-12-28T16:39:10.490
> 
> 标签：visual-c++, build, mingw, configure, waf

我刚刚遇到了 WAF 的痛苦。我专门使用 MinGW-w64 来构建东西。但是，最近，我安装了 MSVC 2012，因为有时需要构建各种小型实用程序，这些实用程序在使用 MinGW 构建时会出现一些问题。

WAF 鼓励不要将编译器选择硬编码到`wscript`. 中，而是从命令行中选择它，这听起来很合理，在这种情况下，我支持这种理念。所以`wscript`应该看起来像这样（忘了`boost`）：

```
def options(ctx):
    ctx.load(('compiler_cxx', 'boost'))

def configure(ctx):
    ctx.load(('compiler_cxx', 'boost'))
    ctx.check_boost() 
```

然后只需在命令行中键入：

```
waf --boost-includes=D:/Applications/Boost/include --check-cxx-compiler=gxx configure build 
```

强制 WAF首先`--check-cxx-compiler=gxx`查找 MinGW，因为默认情况下，Windows WAF 首先首选 MSVC。

**注意：** MinGW-w64 在 中`PATH`，MSVC 不在，但我猜由于注册表，WAF 仍然可以找到它。

所以，然后 WAF 在配置输出中给出这个（这意味着一切都很酷）：

```
Checking for 'gxx' (c++ compiler)        : D:\Applications\MinGW-w64\bin\g++.exe 
```

然后它开始构建，我得到的是这个很长的垃圾邮件：

```
Build failed
Traceback (most recent call last):
  File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\Task.py", line 123, in process
    ret=self.run()
  File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\Task.py", line 47, in run
    return m1(self)
  File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\Task.py", line 47, in run
    return m1(self)
  File "<string>", line 28, in f
  File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\Tools\msvc.py", line 685, in exec_command_msvc
    return self.exec_command_nomsvc(*k,**kw)

    ... (repeated thousands of times)

  File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\Tools\msvc.py", line 685, in exec_command_msvc
    return self.exec_command_nomsvc(*k,**kw)
File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\Tools\msvc.py", line 684, in exec_command_msvc
    if self.env['CC_NAME']!='msvc':
  File "D:\Applications\WAF\waf-1.7.8-77e2cdd38ea2930f982e3aabf335fdb7\waflib\ConfigSet.py", line 35, in __getitem__
    self=self.parent
RuntimeError: maximum recursion depth exceeded 
```

MSVC 应该如何参与这个构建过程？！- 我不知道。但无论如何，最有趣的部分来了。让我们打破建议和硬编码 GCC 成为我们在以下方面的选择`wscript`：

```
def options(ctx):
    ctx.load(('boost'))

def configure(ctx):
    ctx.load(('gxx', 'boost'))
    ctx.check_boost() 
```

然后我们调用：

```
waf --boost-includes=D:/Applications/Boost/include configure build 
```

并在配置输出中查看：

```
Checking for program g++,c++             : D:\Applications\MinGW-w64\bin\g++.exe
Checking for program ar                  : D:\Applications\MinGW-w64\bin\ar.exe 
```

**注意：**注意到输出的变化了吗？这对我来说已经是一个谜，因为该`cxx_compiler`工具（在前一个案例中使用）本身`ctx.load('gxx')`在幕后调用。那么在这两种情况下，这两种输出有何不同呢？

然后 WAF 开始构建，然后就可以了：

```
'build' finished successfully (1.155s) 
```

酷吧？:) 让我知道你们的想法，希望有人已经遇到过这个问题。

**主演**

WAF 1.7.8

MinGW-w64 (GCC 4.7.2)

MSVC 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:21:33.690

我向 Thomas Nagy 提交了一份错误报告，他发现这是由于最近的一个补丁造成的。恢复此补丁修复了该问题。有关详细信息，请参阅以下 2 个问题：

*   [第 1243 期](http://code.google.com/p/waf/issues/detail?id=1243)
*   [第 1237 期](http://code.google.com/p/waf/issues/detail?id=1237)

# c# - 通过反射获得完整的“路径”（C#）

> ID：14072706
> 
> 赞同：0
> 
> 时间：2012-12-28T16:39:18.733
> 
> 标签：c#, reflection

是否有可能通过反射获得完整的“路径”？

示例想象我有以下类/属性。

```
public class Member
{
    public string Name;
    public Address Address;
}

public class Address
{
    public string Line1;
    public string Line2;
    public string Line3;
} 
```

* * *

想象一下，我有一个名为`m`. 是否有可能通过反射获得完整路径作为“Member.Address.Line1”（作为字符串），只是通过某种方式传递`m.Address.Line1`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:55:47.540

如果您愿意使用`Expression<Func<T>>`，那么是的，它应该很简单。

只需执行以下操作：

```
 public string GetFullPath<T>(Expression<Func<T>> action) {
  return action.Body.ToString();
}

var fullPath = GetFullPath(() => m.Address.Line1); 
```

这并没有给你你想要的东西，但它会非常接近，你可以删除你不想要的位。

我将在该对象中再挖掘一下，看看是否有更清洁的方法可以让您更接近您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:45:55.970

不。

问题是当你传递`m.Address.Line1`实例时，你的方法接收到的只是`Line`实例，它无法找出哪些实例引用了它。

当然，您可以使该方法接受类似的`MyMethod(m, "Address", "Line1")`内容，但这可能会破坏整个目的（很难知道，因为您没有说为什么要这样做）

不过，您可能有一些运气[`Expression<T>`](http://msdn.microsoft.com/en-us/library/bb335710.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:52:56.497

我假设“地址”是不存在的，正如您之前所说的那样，该类具有三个字符串属性！1号线、2号线、3号线

我添加了一个包含类名称的额外属性“名称”，它与具有控件名称完全相同，因此我们可以根据该名称属性标记对象，

此外，如果您需要这样的输出，您必须跟踪创建的对象，因为我更喜欢 List 类型。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;

namespace ConsoleApplication4
{
    class Member
    {
        public string Line1 { get; set; }
        public string Line2 { get; set; }
        public string Line3 { get; set; }
        public string Name { get; set; }

    }

    static class Program
    {
        private static readonly List<object> MyRefObjHolder = new List<object>();

        private static void Main()
        {

            Member m = new Member {Line1 = "line1", Line2 = "line2", Line3 = "line3", Name = "m"};

            Member n = new Member {Line1 = "line1", Line2 = "line2", Line3 = "line3", Name = "n"};

            MyRefObjHolder.Add(m);
            MyRefObjHolder.Add(n);

            string tmp1 = GetCompleteNameWithProperty("m.Line1");
            string tmp2 = GetCompleteNameWithProperty("n.Line1");
            Console.WriteLine(tmp1); // prints : Member.Line1
            Console.WriteLine(tmp2); // prints : Member.Line2
            Console.Read();

        }

        public static string GetCompleteNameWithProperty(string objref)
        {

            string[] obj = objref.Split('.');

            if (obj.Length < 2)
            {
                return null;
            }

            string className = obj[obj.Length - 2];
            string propName = obj[obj.Length - 1];

            string typeName = null;
            foreach (object o in MyRefObjHolder)
            {
                Type type = o.GetType();
                object name = type.GetProperty("Name").GetValue(o, null);
                if (name != null && name is string && (string) name == className)
                {
                    typeName = type.Name;
                }

            }

            //linq based solution, replce the foreach loop with linq one :P
            //string typeName = (from o in myRefObjHolder select o.GetType() into type where type.GetProperty(propName) != null select type.Name).FirstOrDefault();

            return typeName != null ? string.Format("{0}.{1}", typeName, propName) : null;
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:41:52.360

首先让我确保我理解您的问题...如果您想`m.Address.Line1`通过将诸如“m.Address.Line1”之类的字符串传递给某个函数来获取 的值，那么是的，您可以这样做。如果您尝试从 Line1 开始并向上导航以查看哪些对象引用它，那么这是一个更难的问题，我无能为力。

如果是第一种情况，那么我在 CodeProject 上写的一篇文章中会这样做，该文章填写了一个文本模板。代码本身有点复杂，这里就不贴了，链接如下：

[http://www.codeproject.com/Articles/505428/A-lightweight-recursive-text-template-data-formatt](http://www.codeproject.com/Articles/505428/A-lightweight-recursive-text-template-data-formatt)

该代码实质上拆分了您在每个“。”处传入的字符串。并递归地向下导航对象树以找到您要查找的值。它还对诸如`IEnumerable`但仅用于填充模板（也就是说，您不能导航到列表的特定索引）之类的东西提供了一些支持。

# tomcat - Tomcat 应该记录 WARNING/SEVERE 但也会记录 INFO

> ID：14072707
> 
> 赞同：1
> 
> 时间：2012-12-28T16:39:24.130
> 
> 标签：tomcat, logging

我的理解是不同级别的日志记录，按照严重性的顺序是：严重、警告、信息、配置、精细、精细、精细。

在我的 conf/logging.properties 中，我将所有级别设置为 WARNING，重新启动了 Tomcat，但我仍然在 catalina.out 中不断收到 INFO 级别的消息。有任何想法吗？

我正在复制下面的 logging.properties。我在做一些明显错误的事情吗？

```
handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler, 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

1catalina.org.apache.juli.FileHandler.level = WARNING
1catalina.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
1catalina.org.apache.juli.FileHandler.prefix = catalina.

2localhost.org.apache.juli.FileHandler.level = WARNING
2localhost.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
2localhost.org.apache.juli.FileHandler.prefix = localhost.

3manager.org.apache.juli.FileHandler.level = WARNING
3manager.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
3manager.org.apache.juli.FileHandler.prefix = manager.

4host-manager.org.apache.juli.FileHandler.level = WARNING
4host-manager.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
4host-manager.org.apache.juli.FileHandler.prefix = host-manager.

java.util.logging.ConsoleHandler.level = WARNING
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = WARNING
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers = 2localhost.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level = WARNING
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers = 3manager.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level = WARNING
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers = 4host-manager.org.apache.juli.FileHandler 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:55:52.467

Tomcat`logging.properties`不会影响任何内容`catalina.out`：请注意，`catalina.out`在`logging.properties`? 当您使用 Tomcat 的启动脚本启动 Tomcat 时，该文件`logs/catalina.out`是通过 shell 重定向创建的。

任何进入标准输出（来自 Tomcat 本身或任何 webapp）[的内容都将以`catalina.out`](http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Console).

如果您有输出到标准输出，那么您应该修复您的 web 应用程序，使其不再这样做。

如果你配置了你的`<Context>`，[`swallowOutput=true`](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)Tomcat 会将该 webapp 的标准输出重定向到为该特定 webapp 配置的任何日志文件（例如`3manager.org.apache.juli.FileHandler`——尽管你可能应该为你自己的应用程序有一个单独的记录器）。

# visual-studio-2010 - 错误 LNK2019 和 LNK2001 与 VS2010 和 Qt 库

> ID：14072714
> 
> 赞同：4
> 
> 时间：2012-12-28T16:39:47.967
> 
> 标签：visual-studio-2010, qt, lnk2019, lnk2001

我正在尝试使用 VS2010（（我在 windows7 x64 上工作）重现 Qt 示例“webbrowser”（来自 qt-everywhere-opensource-src-4.8.3/examples/activeqt/webbrwowser）。

所以，我将所有文件（.h 和 .cpp）从 webbrowser 文件夹复制到我的项目中。此外，在项目属性-->链接器-->输入-->附加指令中，我添加了以下库：

```
phonon4.lib
QAxServer.lib
Qt3Support4.lib
QtCLucene4.lib
QtCore4.lib
QtDeclarative4.lib
QtDesigner4.lib
QtDesignerComponents4.lib
QtGui4.lib
QtHelp4.lib
Qtmain.lib
QtMultimedia4.lib
QtNetwork4.lib
QtOpenGL4.lib
QtScript4.lib
QtScriptTools4.lib
QtSql4.lib
QtSvg4.lib
QtTest4.lib
QtUiTools.lib
QtWebKit4.lib
QtXml4.lib
QtXmlPatterns4.lib 
```

现在，当我按下调试按钮时，我得到了这些错误：

```
1>------ Inizio compilazione: Progetto: web_browser, Configurazione: Debug Win32 ------
1>  main.cpp
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: class QVariant __thiscall QAxBase::dynamicCall(char const *,class QVariant const &,class QVariant const &,class QVariant const &,class QVariant const &,class QVariant const &,class QVariant const &,class QVariant const &,class QVariant const &)" (?dynamicCall@QAxBase@@QAE?AVQVariant@@PBDABV2@1111111@Z) non risolto nella funzione "public: __thiscall MainWindow::MainWindow(void)" (??0MainWindow@@QAE@XZ)
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: bool __thiscall QAxBase::setControl(class QString const &)" (?setControl@QAxBase@@QAE_NABVQString@@@Z) non risolto nella funzione "public: void __thiscall Ui_MainWindow::setupUi(class QMainWindow *)" (?setupUi@Ui_MainWindow@@QAEXPAVQMainWindow@@@Z)
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: __thiscall QAxWidget::QAxWidget(class QWidget *,class QFlags<enum Qt::WindowType>)" (??0QAxWidget@@QAE@PAVQWidget@@V?$QFlags@W4WindowType@Qt@@@@@Z) non risolto nella funzione "public: __thiscall WebAxWidget::WebAxWidget(class QWidget *,class QFlags<enum Qt::WindowType>)" (??0WebAxWidget@@QAE@PAVQWidget@@V?$QFlags@W4WindowType@Qt@@@@@Z)
1>main.obj : error LNK2001: simbolo esterno "public: virtual struct QMetaObject const * __thiscall QAxWidget::metaObject(void)const " (?metaObject@QAxWidget@@UBEPBUQMetaObject@@XZ) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual void * __thiscall QAxWidget::qt_metacast(char const *)" (?qt_metacast@QAxWidget@@UAEPAXPBD@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual int __thiscall QAxWidget::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@QAxWidget@@UAEHW4Call@QMetaObject@@HPAPAX@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "protected: virtual void __thiscall QAxWidget::connectNotify(char const *)" (?connectNotify@QAxWidget@@MAEXPBD@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual class QSize __thiscall QAxWidget::sizeHint(void)const " (?sizeHint@QAxWidget@@UBE?AVQSize@@XZ) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual class QSize __thiscall QAxWidget::minimumSizeHint(void)const " (?minimumSizeHint@QAxWidget@@UBE?AVQSize@@XZ) non risolto
1>main.obj : error LNK2001: simbolo esterno "protected: virtual void __thiscall QAxWidget::resizeEvent(class QResizeEvent *)" (?resizeEvent@QAxWidget@@MAEXPAVQResizeEvent@@@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "protected: virtual void __thiscall QAxWidget::changeEvent(class QEvent *)" (?changeEvent@QAxWidget@@MAEXPAVQEvent@@@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual class QAxAggregated * __thiscall QAxWidget::createAggregate(void)" (?createAggregate@QAxWidget@@UAEPAVQAxAggregated@@XZ) non risolto
1>main.obj : error LNK2001: simbolo esterno "protected: virtual bool __thiscall QAxWidget::createHostWindow(bool)" (?createHostWindow@QAxWidget@@MAE_N_N@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual char const * __thiscall QAxWidget::className(void)const " (?className@QAxWidget@@UBEPBDXZ) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual bool __thiscall QAxBase::propertyWritable(char const *)const " (?propertyWritable@QAxBase@@UBE_NPBD@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual void __thiscall QAxBase::setPropertyWritable(char const *,bool)" (?setPropertyWritable@QAxBase@@UAEXPBD_N@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "public: virtual void __thiscall QAxWidget::clear(void)" (?clear@QAxWidget@@UAEXXZ) non risolto
1>main.obj : error LNK2001: simbolo esterno "protected: virtual bool __thiscall QAxWidget::initialize(struct IUnknown * *)" (?initialize@QAxWidget@@MAE_NPAPAUIUnknown@@@Z) non risolto
1>main.obj : error LNK2001: simbolo esterno "private: virtual struct QMetaObject const * __thiscall QAxWidget::parentMetaObject(void)const " (?parentMetaObject@QAxWidget@@EBEPBUQMetaObject@@XZ) non risolto
1>main.obj : error LNK2019: riferimento al simbolo esterno "protected: virtual bool __thiscall QAxWidget::translateKeyEvent(int,int)const " (?translateKeyEvent@QAxWidget@@MBE_NHH@Z) non risolto nella funzione "protected: virtual bool __thiscall WebAxWidget::translateKeyEvent(int,int)const " (?translateKeyEvent@WebAxWidget@@MBE_NHH@Z)
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: virtual __thiscall QAxWidget::~QAxWidget(void)" (??1QAxWidget@@UAE@XZ) non risolto nella funzione "public: virtual __thiscall WebAxWidget::~WebAxWidget(void)" (??1WebAxWidget@@UAE@XZ)
1>C:\Users\Cristina\Desktop\OpenCV\Progetti\ARUCO\web_browser\Debug\web_browser.exe : fatal error LNK1120: 21 esterni non risolti
========== Compilazione: 0 completate, 1 non riuscite, 0 aggiornate, 0 ignorate ========== 
```

这是 main.cpp 文件：

```
#include <C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/include/QtGui/qapplication.h>
#include <C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/include/QtGui/QMessageBox>
#include <C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/include/QtGui/QProgressBar>
#include <C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/include/QtGui/QStatusBar>
#include <C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/include/QtGui/QMainWindow>
#include <C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/include/QtCore/QAbstractEventDispatcher>

#if defined(Q_WS_WINCE_WM)
#include "ui_mainwindow_windowsmobile.h"
#include <windows.h>
#else
#include "ui_mainwindow.h"
#endif

//! [0]
class MainWindow : public QMainWindow, public Ui::MainWindow
{
    Q_OBJECT
public:
    MainWindow();

public slots:
    void on_WebBrowser_TitleChange(const QString &title);
    void on_WebBrowser_ProgressChange(int a, int b);
    void on_WebBrowser_CommandStateChange(int cmd, bool on);
    void on_WebBrowser_BeforeNavigate();
    void on_WebBrowser_NavigateComplete(QString);

    void on_actionGo_triggered();
    void on_actionNewWindow_triggered();
    void on_actionAbout_triggered();
    void on_actionAboutQt_triggered();
    void on_actionFileClose_triggered();

private:
    QProgressBar *pb;
};
//! [0] //! [1]

MainWindow::MainWindow()
{
    setupUi(this);

    connect(addressEdit, SIGNAL(returnPressed()), actionGo, SLOT(trigger()));
    connect(actionBack, SIGNAL(triggered()), WebBrowser, SLOT(GoBack()));
    connect(actionForward, SIGNAL(triggered()), WebBrowser, SLOT(GoForward()));
    connect(actionStop, SIGNAL(triggered()), WebBrowser, SLOT(Stop()));
    connect(actionRefresh, SIGNAL(triggered()), WebBrowser, SLOT(Refresh()));
    connect(actionHome, SIGNAL(triggered()), WebBrowser, SLOT(GoHome()));
    connect(actionSearch, SIGNAL(triggered()), WebBrowser, SLOT(GoSearch()));

    pb = new QProgressBar(statusBar());
    pb->setTextVisible(false);
    pb->hide();
    statusBar()->addPermanentWidget(pb);

    WebBrowser->dynamicCall("GoHome()");
}

//! [1] //! [2]
void MainWindow::on_WebBrowser_TitleChange(const QString &title)
{
    setWindowTitle("Qt WebBrowser - " + title);
}

void MainWindow::on_WebBrowser_ProgressChange(int a, int b)
{
    if (a <= 0 || b <= 0) {
    pb->hide();
    return;
    }
    pb->show();
    pb->setRange(0, b);
    pb->setValue(a);
}

void MainWindow::on_WebBrowser_CommandStateChange(int cmd, bool on)
{
    switch (cmd) {
    case 1:
    actionForward->setEnabled(on);
    break;
    case 2:
    actionBack->setEnabled(on);
    break;
    }
}

void MainWindow::on_WebBrowser_BeforeNavigate()
{
    actionStop->setEnabled(true);
}

void MainWindow::on_WebBrowser_NavigateComplete(QString)
{
    actionStop->setEnabled(false);
}

//! [2] //! [3]
void MainWindow::on_actionGo_triggered()
{
    WebBrowser->dynamicCall("Navigate(const QString&)", addressEdit->text());
}

void MainWindow::on_actionNewWindow_triggered()
{
    MainWindow *window = new MainWindow;
    window->show();
    if (addressEdit->text().isEmpty())
    return;
    window->addressEdit->setText(addressEdit->text());
    window->actionStop->setEnabled(true);
    window->on_actionGo_triggered();
}

void MainWindow::on_actionAbout_triggered()
{
    QMessageBox::about(this, tr("About WebBrowser"),
        tr("This Example has been created using the ActiveQt integration into Qt Designer./n"
           "It demonstrates the use of QAxWidget to embed the Internet Explorer ActiveX/n"
           "control into a Qt application."));
}

void MainWindow::on_actionAboutQt_triggered()
{
    QMessageBox::aboutQt(this, tr("About Qt"));
}

void MainWindow::on_actionFileClose_triggered()
{
    close();
}

#include "C:/Users/Cristina/Desktop/OpenCV/dep/qt/qt-everywhere-opensource-src-4.8.3/examples/activeqt/webbrowser/tmp/moc/debug_shared/main.moc"

//! [3] //! [4]
int main(int argc, char ** argv)
{
    QApplication a(argc, argv);
    MainWindow w;
#if defined(Q_OS_WINCE)
    w.showMaximized();
#else
    w.show();
#endif
    return a.exec();
}
//! [4] 
```

我哪里错了？？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:03:45.720

我解决了我的问题。我为发布模式链接了库，但我在调试模式下编译。因此，要链接的正确库是：

```
 phonond4.lib
    QAxServerd.lib
    Qt3Supportd4.lib
    QtCLucened4.lib
    QtCored4.lib
    QAxContainerd.lib 
```

等等。希望它对某人有帮助！

# javascript - 在循环中多次重复数组中的项目？

> ID：14072716
> 
> 赞同：2
> 
> 时间：2012-12-28T16:39:52.943
> 
> 标签：javascript, jquery, arrays, loops, for-loop

我有一个包含 6 个字符串的数组，代表 HTML 图像标签。我有一些代码可以确定填充这些图像的空间量。

我正在使用一个循环，它可以很好地从这 6 个图像中提取并使用 1 个或全部 6 个。当我需要超过 6 个时，我的问题就出现了，这意味着一次又一次地遍历数组。我不确定如何最好地构建这个循环。目前我有

```
for (var i = 0; i < numAds ; i++) {
            $('#primary').append(adList[i]);
        }; 
```

我尝试`if (i > adList.length) { i=0 }`在 jquery 语句之前添加，但后来我陷入了循环并崩溃了浏览器。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:41:27.403

采用

```
$('#primary').append(adList[i % adList.length]); 
```

是`%`模[运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.25_.28Modulus.29)

* * *

但是，请确保它`adList`不是空的，否则会导致`i % adList.length`返回`NaN`和~~崩溃~~ *，使`adList[i % adList.length]`返回`undefined`可能带来的任何副作用*。

# c - 用C实现二叉搜索树的删除功能

> ID：14072722
> 
> 赞同：0
> 
> 时间：2012-12-28T16:40:30.960
> 
> 标签：c, binary-search-tree

我一直在尝试在 C 中实现一个函数，该函数删除二叉树中的一个节点，该二叉树应该（理论上）处理三种所有情况，即：

*   节点是一片叶子
*   节点有一个孩子
*   节点有两个孩子

有没有办法在不单独检查每个案例的情况下处理整个删除功能？正如下面的评论者指出的那样，我确实检查了很多案例，也许整个问题可以通过检查一个基本案例来递归解决。

我对删除树中具有父节点且本身是两个子节点的父节点的节点特别感兴趣。

下面的两个答案都很有用，但我认为它们并不能完全解决问题。

这是我所拥有的：

```
typedef struct Node
{
    int key;
    int data;
    struct Node *left;
    struct Node *right;
    struct Node *parent;
} Node;

/* functions that take care of inserting and finding a node and also traversing and freeing the tree */
...

void delete(Node *root, int key)
{
    Node *target = find(root, key); // find will return the node to be deleted

    Node *parent = target->parent; // parent of node to be deleted

    // no children
    if (target->left == NULL && target->right == NULL)
    {
        // is it a right child
        if (target->key > parent->key)
            parent->right = NULL;
        // must be a left child
        else
            parent->left = NULL;

        free(target);
    }

    // one child
    else if ((target->left == NULL && target->right != NULL) || (target->left != NULL && target->right == NULL))
    {
        // here we swap the target and the child of that target, then delete the target
        Node *child = (target->left == NULL) ? target->right : target->left;
        child->parent = parent;
        if (parent->left == target) parent->left = child;
        else if (parent->right == target) parent->right = child;
        free(target);
    }
    // two children
      else
    {

        // find the largest node in the left subtree, this will be the node
        // that will take the place of the node to be deleted
        Node *toBeRepl = max(target->left);

        // assign the data of the second largest node
        target->key   = toBeRepl->key;
        target->data  = toBeRepl->data;

        // if new node immediately to the left of target 
        if (toBeRepl == target->left)
        {   
            target->left  = toBeRepl->left;
            Node *newLeft = target->left;
            if (newLeft != NULL) newLeft->parent = target;
        }
        else
        {
            delete(target->left, toBeRepl->key);
            // Node *replParent = toBeRepl->parent;
            // replParent->right = NULL;
        }
} 
```

非常感谢您的反馈。

编辑：为了澄清，我试图删除一个特定的节点而不触及它的子树（如果有的话）。它们应该保持完整（我已经通过交换要删除的节点的值和（根据情况）其子树的节点之一来处理这一点）。

编辑：我将以下维基百科文章用作参考： [http](http://en.wikipedia.org/wiki/Binary_search_tree#Deletion)
://en.wikipedia.org/wiki/Binary_search_tree#Deletion 这是我想到在有两个孩子的情况下交换节点值的地方，尤其是引用：

> 将要删除的节点称为 N。不要删除 N。而是选择其有序后继节点或有序前驱节点 R。将 N 的值替换为 R 的值，然后删除 R。

对于上述情况，C++ 中有一些有趣的代码，但是我不确定交换究竟是如何发生的：

```
else    //2 children
{
        temp = ptr->RightChild;
        Node<T> *parent = nullptr;

        while(temp->LeftChild!=nullptr)
        {
                parent = temp;
                temp = temp->LeftChild;
        }
        ptr->data = temp->data;
        if (parent!=nullptr)
                Delete(temp,temp->data);
        else
                Delete(ptr->rightChild,ptr->RightChild->data);
} 
```

有人可以解释一下那部分发生了什么吗？我假设递归与用户评论的方法相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:12:39.043

我会使用递归来做到这一点，假设您`null`在树的末尾找到 null 将是“返回”或返回条件。

一种可能的算法是：

```
Node* delete(Node *aNode){
  if(aNode->right != NULL)
     delete(aNode->right);
  if(aNode->left != NULL)
     delete(aNode->left);
  //Here you're sure that the actual node is the last one
  //So free it! 
  free(aNode);
  //and, for the father to know that you're now empty, must return null
  return NULL;

} 
```

当然，它有一些错误，但这是主要思想。这个实现就像[dfs](http://en.wikipedia.org/wiki/Depth-first_search)。希望这可以帮助。

[编辑] 节点 *aNode 已修复。忘了星星，我的错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:06:41.980

我在代码中看不到任何“不雅”，这种格式和注释代码很难获得。但是，是的，您可以将删除函数中的 if-else 结构减少到一种情况。如果您查看有关删除操作的最抽象概念，您会注意到所有情况基本上都归结为最后一种情况（删除具有两个子节点的节点）。

您只需在其中添加几行。就像在 toBeRepl = max(left-sub-tree) 之后一样，检查它是否为 NULL，如果是则 toBeRepl = min(right-sub-tree)。

因此，**案例 1（无子节点）**：假设您的`max()`方法已正确实现，它将`NULL`作为左子树上最右边的元素返回，右子树上也是如此`min()`。用 toBeRepl 替换您的目标，您将删除您的节点。

**案例 2（一个孩子）**：如果`max()`确实返回`NULL`，`min()`则不会，反之亦然。所以你会有一个非 NULL `toBeRepl`。再次用这个新的替换你的目标`toBeRepl`，你就完成了。

**案例3（两个孩子）**：同案例2，只是你可以确定`max()`不会回来`NULL`。

因此，您的整个`delete()`函数将归结为最后一条`else`语句（有一些更改）。类似的东西：

```
Node *toBeRepl = max(target->left);
if toBeRepl is NULL
{
  toBeRepl = min(target->right);
}

if toBeRepl is not NULL
{
  target->key = tobeRepl->key;
  target->data = toBeRepl->data;

  deallocate(toBeRepl); // deallocate would be a free(ptr) followed by setting ptr to NULL
}
else
{
  deallocate(target);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T13:55:08.013

我很久以前完成了这个，我认为为遇到同样问题的人添加一个示例答案会很好（考虑到这个问题已经积累了 400 多个视图）：

```
/* two children */
else
{
    /* find the largest node in the left subtree (the source), this will be the node
     * that will take the place of the node to be deleted */
    Node* source = max(target->left);

    /* assign the data of that node to the one we originally intended to delete */
    target->key   = source->key;
    target->data  = source->data;

    /* delete the source */
    delete(target->left, source->key);
} 
```

维基百科有一篇[很棒的文章](http://en.wikipedia.org/wiki/Binary_search_tree#Deletion)启发了这段代码。

# javascript - 带有Javascript的Adobe Air，在运行nativeProcess时使程序等待

> ID：14072728
> 
> 赞同：0
> 
> 时间：2012-12-28T16:40:46.280
> 
> 标签：javascript, dom-events, air

我正在尝试通过运行从视频文件中提取元`ffprobe`数据`nativeProcess`。下面的代码就像一个文件一样工作，但在尝试循环一系列文件时会导致错误。

我知道问题的原因是 Air 试图`nativeProcess`在旧的完成之前开始一个新的。我知道这与听音乐有关`air.NativeProcessExitEvent.EXIT`。我只是无法让它工作。任何建议将不胜感激。

```
function fileOpen(){

  var directory = air.File.userDirectory;

  try
  {
      directory.browseForDirectory("Select Directory");
      directory.addEventListener(air.Event.SELECT, directorySelected);
  }
  catch (error)
  {
      air.trace("Failed:", error.message)
  }

  function directorySelected(event) 
  {
      directory = event.target ;
      var files = directory.getDirectoryListing();
      for(i=0; i < files.length; i++){
        getMetadata(files[0].nativePath)
                    //wait here for nativeProcess to finish
        }
      }
  } 

function getMetadata(filePathIn){

        if(air.NativeProcess.isSupported)
        {

        }
        else
        {
            air.trace("NativeProcess not supported.");
        }

        fileIn = filePathIn.toString()

        var nativeProcessStartupInfo = new air.NativeProcessStartupInfo();
        var file = air.File.applicationStorageDirectory.resolvePath("ffprobe");
        nativeProcessStartupInfo.executable = file;

        args = new air.Vector["<String>"]();
        args.push("-sexagesimal","-show_format","-loglevel","quiet","-show_streams","-print_format","json",filePathIn)
        nativeProcessStartupInfo.arguments = args;

        process = new air.NativeProcess();
        process.start(nativeProcessStartupInfo); 
        process.addEventListener(air.ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData);
        process.addEventListener(air.ProgressEvent.STANDARD_ERROR_DATA, onErrorData);
        process.addEventListener(air.NativeProcessExitEvent.EXIT, onExit);
        process.addEventListener(air.IOErrorEvent.STANDARD_OUTPUT_IO_ERROR, onIOError);
        process.addEventListener(air.IOErrorEvent.STANDARD_ERROR_IO_ERROR, onIOError);

    }

    function onOutputData()
    {
      var fileMetadataJSON = process.standardOutput.readUTFBytes(process.standardOutput.bytesAvailable);
      air.trace(fileMetadataJSON)
    }

    function onErrorData(event)
    {
        air.trace("ERROR -", process.standardError.readUTFBytes(process.standardError.bytesAvailable)); 
    }

    function onExit(event)
    {
        air.trace("Process exited with ", event.exitCode);

    }

    function onIOError(event)
    {
         air.trace(event.toString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:34:01.373

这里有一个大纲，应该让你知道该怎么做：

*   在您的`directorySelected()`方法中，将局部变量`files`（数组）提升为成员变量。这将使选择的文件列表可用，以便其他方法可以访问它。
*   删除方法中的`for`循环`directorySelected()`。与其运行循环并尝试在此处运行本机进程，不如调用一个新方法，让我们调用它`dequeueFileAndRunNativeProcess()`。
*   这个新`dequeueFileAndRunNativeProcess()`方法应该检查数组的长度`files`，如果大于0，它应该是数组`pop()`中的第一个文件`files`并在其上执行本机进程。
*   在您的`onExit()`方法中，再次调用该`dequeueFileAndRunNativeProcess()`方法。

这里的想法是将运行本机进程的代码移动到一个可以从两个地方触发的方法中：一次在用户浏览完文件后立即执行，然后在本机进程完成工作后再次执行。当`files`阵列中没有更多文件时，该过程结束。

# jquery - Origin http://localhost is not allowed...解决不添加到远程服务器？

> ID：14072733
> 
> 赞同：0
> 
> 时间：2012-12-28T16:41:10.913
> 
> 标签：jquery, ajax, http, cross-domain, screen-scraping

我知道跨站点请求的问题，并且我知道 Stack 上已经有关于此主题的问题。但是，我的问题没有直接回答，因此我将其发布在这里。

所以，我想做的是使用 AJAX 对网站进行屏幕抓取。但是，我收到此消息...

```
Origin http://localhost is not allowed by Access-Control-Allow-Origin 
```

...我知道对此有不同的解决方案。但是，我知道的所有解决方案（例如 JSONP）都包括向远程服务器添加内容，这在这种情况下是不可能的。

所以，我想知道是否有可能在不在远程服务器上添加任何东西的情况下解决这个问题，如果可以，那是什么。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:44:00.573

1.  您可以编写一个服务器端脚本来代理您的请求
2.  您可以通过传递命令行参数来禁用某些浏览器中的检查

铬：

```
chromium-browser --disable-web-security 
```

请参阅[在 Google Chrome 中覆盖 Access-Control-Allow-Origin 限制](https://superuser.com/questions/384871/overriding-access-control-allow-origin-restriction-in-google-chrome)

# android - 幻灯片中的 OutOfMemory

> ID：14072738
> 
> 赞同：0
> 
> 时间：2012-12-28T16:41:26.460
> 
> 标签：android, memory-leaks, gallery, slideshow

我正在创建自己的 SlideShow 活动，其中有一个 ImageView，每次用户单击下一个或上一个时，我都会用正确的图像填充它。

这些图像虽然很大，但当我浏览其中的几个时，我得到一个 OutofMemory 可能是由于我的错误导致的内存泄漏。

问题是，每次调用新图像时，我都会尝试将前一个位图设为空，以便对其进行垃圾收集，但无济于事。

我在这里错过了什么吗？

我附上了我的活动的非常简单的代码：

```
public class SlideShowActivity extends Activity {
    private static final String LOG_TAG = SlideShowActivity.class.getSimpleName();

    private Bitmap currentBitmap;
    private Bitmap mDefaultBitmap;
    private ImageView imageView;
    private ImageButton buttonPrev;
    private ImageButton buttonNext;
    private int currentImageIndex;

    private String imguri[] = { "ruta1/imagen1.jpg", "ruta1/imagen2.jpg", "ruta1/imagen3.jpg", "ruta1/imagen4.jpg", "ruta1/imagen5.jpg", "ruta1/imagen6.jpg" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.slideshow);

        mDefaultBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.noimage);
        imageView = (ImageView) findViewById(R.id.imageViewCurrentImage);
        buttonPrev = (ImageButton) findViewById(R.id.imgbuttonprev);
        buttonNext = (ImageButton) findViewById(R.id.imgbuttonnext);

        currentImageIndex = 0;
        setCurrentImage(currentImageIndex);
        buttonPrev.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                currentImageIndex--;
                if(currentImageIndex < 0)
                    currentImageIndex = imguri.length-1;

                setCurrentImage(currentImageIndex);
            }
        });

        buttonNext.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                currentImageIndex++;
                if(currentImageIndex == imguri.length)
                    currentImageIndex = 0;
                setCurrentImage(currentImageIndex);
            }
        });

    }

    private void setCurrentImage(int idx) {

        currentBitmap = null;
        imageView.setImageBitmap(null);
        try {
            currentBitmap = Bitmap.createScaledBitmap(BitmapFactory.decodeStream(getAssets().open(imguri[idx])),800, 480, true);
            imageView.setImageBitmap(currentBitmap);
        } catch (IOException e) {
            Log.d(LOG_TAG, "No se pudo abrir el recurso" + imguri[0]);
            imageView.setImageBitmap(mDefaultBitmap);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:57:26.140

如果不再需要位图，最好调用 bitmap.recycle()，这样可以使系统更主动地回收本机内存。

因此 setCurrentImage(int idx) 可以更改为

```
private void setCurrentImage(int idx) {
    imageView.setImageBitmap(null);
    currentBitmap.recycle();
    currentBitmap = null;
    try {
        Bitmap tempBitmap = BitmapFactory.decodeStream(getAssets().open(imguri[idx]));
        currentBitmap = Bitmap.createScaledBitmap(tempBitmap, 800, 480, true);
        tempBitmap.recycle();
        imageView.setImageBitmap(currentBitmap);
    } catch (IOException e) {
        Log.d(LOG_TAG, "No se pudo abrir el recurso" + imguri[0]);
        imageView.setImageBitmap(mDefaultBitmap);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:51:09.807

Use ListView for this purpose .

Use the link : [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:53:00.850

好吧，我不知道当您以这种方式多次更改 ImageView 的位图时会产生什么样的效果。但我认为您应该使用支持库附带的 ViewPager。这样，您的实现会更快，因为它会自动加载下一个和上一个视图，并在不再需要时将其删除。这对用户来说会更好，因为他/她可以滑动图像。

为了让它更好，你可以使用这个库，它扩展了 ViewPager 的功能：

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

# java-me - 初始化 ChoiceGroup + J2ME MIDlet

> ID：14072741
> 
> 赞同：1
> 
> 时间：2012-12-28T16:41:37.967
> 
> 标签：java-me, initialization, midp, lcdui, midlet

我将 XML 解析为自定义博客类数组，我试图在屏幕上显示我的博客类的 .name 属性的 ChoiceGroup。

```
for(int i = 0; i< intBloggerLength; i++)
    {
        menuItems[i] = myXMLParser.arrBloggers[i].getName();
        //lstView.append(myXMLParser.arrBloggers[i].getName().toString(), null);
    }
String strPause = "";
grpMenuItems = new ChoiceGroup("Bloggers", Choice.IMPLICIT, menuItems,
       new Image[] {null, null, null, null, null, null}); 
```

“ `grpMenuItems =`...”是错误的行，使我的 MIDlet 崩溃，我一直在网上关注示例，并且我正在以相同的方式填充 ChoiceGroup，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:25:14.990

问题是我使用的是`Choice.IMPLICIT`ChoiceGroup 不存在的，但 List 不存在的。

改变`Choice.EXCLUSIVE`工作正常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-28T17:22:21.600

您的主要错误是我认为没有在您的 MIDlet 中使用适当的[登录。](http://en.wikipedia.org/wiki/Computer_data_logging)这使得调试像你描述的问题变得不必要的复杂。您发布的代码段中的错误。

*   正确完成日志记录（如果您有兴趣，[请参阅此处了解详细信息](https://stackoverflow.com/a/13932314/839601)），您可以简单地在模拟器中运行您的 midlet 并检查控制台消息以找出是否预期的代码。

从您发布的代码片段和您的解释看来，`intBloggerLength`价值不是恒定的。再加上您在您提到的有问题的行中调用 ChoiceGroup 构造函数的方式，这看起来是获得`IllegalArgumentException`.

*   如果您将这一行包装起来`try-catch`并将适当的日志记录代码放入 catch 块中，您可以自己发现这一点，但由于您没有这样做，我们只能猜测。请注意，如果您在模拟器中进行测试，也有可能在其控制台中显示异常消息和堆栈跟踪。

要了解如何获取该异常，请参阅您使用的构造函数的[API javadocs ：](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ChoiceGroup.html#ChoiceGroup(java.lang.String,%20int,%20java.lang.String[],%20javax.microedition.lcdui.Image[]))

> **抛出：**
> ... `IllegalArgumentException`- 如果`imageElements`数组不为 null 并且与 stringElements 数组的长度不同...

API 文档中列出了引发异常的其他三个可能原因，但我将重点关注您的代码片段看起来很滑的一个原因。

让我们回顾一下您的代码，图像数组长度为 6：`{null, null, null, null, null, null}`- 这意味着只要`intBloggerLength`与 6 不同，就会抛出 IAE。

要解决这个问题，最简单的方法是传递`null`值而不是图像数组。或者，如果您需要数组不为空，只需编写代码使其具有有效长度，例如

```
new Image[menuItems.length] 
```

# iphone - 如何让外语文本在 UITextView 中正确显示

> ID：14072742
> 
> 赞同：0
> 
> 时间：2012-12-28T16:41:37.327
> 
> 标签：iphone, objective-c, ios, uitextview

我有一些文本在 UITextView 中没有正确显示。“é”、“ç”和“ñ”等...都显示如下：

![在此处输入图像描述](../Images/4d5d28badf8ab2d22139a017ef08c8b7.png)

文本来自服务器，在 Web 浏览器中查看时显示良好。

想知道如何解决这个问题。谢谢你的帮助。

这是代码：

```
 // the deal id is passed from the offersvc table selected item and into the url
  // dealID is 1020414

    NSString *jsonDealString = [NSString stringWithFormat:@"http://api.**********.net/v1/public/details?id=%@&yd.key=******", dealId];

    NSLog(@"jsondealstring is %@", jsonDealString);

   // NSLog(@"deal id is %@",dealId);

    // Download JSON
    NSString *jsonString = [NSString
                            stringWithContentsOfURL:[NSURL URLWithString:jsonDealString]
                            encoding:NSStringEncodingConversionAllowLossy
                            error:nil];

    // Create parser for the api
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    [self setDisplayItems:[results objectForKey:@"results"]];

    NSDictionary *item = (NSDictionary *)[displayItems objectAtIndex:0];

//    NSLog(@"item from details is %@", item);

    // set the labels and text views. 

    link = [item objectForKey:@"link"];
    catStr = [item objectForKey:@"cat"];
    vendorStr = [item objectForKey:@"vendor"];
    titleStr = [item objectForKey:@"main_tag"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:48:10.230

You need to set the UTF-8 encoding.

**EDIT** in response of the modified question

Simply add `NSUTF8StringEncoding` like follows

```
NSString *jsonString = [NSString
                        stringWithContentsOfURL:[NSURL URLWithString:jsonDealString]
                        encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding
                        error:nil]; 
```

# javascript - Google Drive 文档上的事件和元数据

> ID：14072746
> 
> 赞同：0
> 
> 时间：2012-12-28T16:41:52.757
> 
> 标签：javascript, google-drive-api

我想在文档中添加带注释的文本。跟踪此文本很重要，因为更改它会导致文档的其他部分发生更改。一个简单的例子是我想用几种不同的食谱来计划一顿饭。我想在底部保留一份连续的配料清单，但还要写下如何准备、烹饪和呈现这顿饭。它的格式类似于：

> # 烹饪计划#12
> 
> [文本]
> 
> ### 配方#1（在元数据中嵌入了成分列表）
> 
> [脚步]
> 
> ### 配方#2（在元数据中嵌入了成分列表）
> 
> [脚步]
> 
> ..ETC
> 
> ## 所需成分
> 
> [列出所有食谱所需的所有成分]

用户可以将食谱放入文档中，能够四处移动、编辑它们，并在其周围写下文本。食谱会保留一份其成分列表，并在最后的成分页面上保持更新，该页面总结了您需要为这顿饭购买的东西。添加或删除配方时，需要更新成分列表。

是否可以以这种方式将元数据和事件添加到文档中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:08:09.153

目前不可用，抱歉。但是添加任意元数据即将推出（这就是我能说的全部）。我不确定这是否涵盖您的情况，但它应该有效。

您能否更好地描述您的文档格式？

# mysql - wordpress 和 node.js

> ID：14072747
> 
> 赞同：9
> 
> 时间：2012-12-28T16:41:54.550
> 
> 标签：mysql, wordpress, node.js, nosql

是否可以在同一台服务器机器上安装 wordpress 和 node.js 服务器并使用 node.js 中的 wordpress mysql 数据库？是否也可以在服务器上安装 noSql 以与 node.js 一起使用？我想为我的门户使用 wordpress 作为前端，但所有异步工作都与 node.js 和从 wordpress mysql 读取一些数据并将一些数据写入 noSql 有关。有人可以帮助我完成测试目的的步骤。

感谢您的时间和最诚挚的问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T17:21:58.467

如果您计划使用 node 来由 wordpress 提供的 JavaScript 异步访问，那么让它们在同一主机和端口上运行将使您的生活变得更加容易。我过去所做的设置如下：

1.  Apache + PHP + Wordpress 在某个端口（8000？）上运行
2.  Node + npm + 你想在其他端口（9000？）上运行的任何其他包
3.  HAProxy 有一些规则在端口 80 上侦听，这将根据两个服务器中的哪一个发送请求的路径来决定。
4.  MySQL 和您选择的任何 NoSQL DB 的正常安装。

如果您想对端口 443 上的 HTTPS 执行相同的操作，最新版本的 HAProxy 也可以终止 SSL。

这是一个示例 HAProxy 配置：

```
defaults
  log global
  maxconn 4096
  mode http
  option http-server-close
  timeout connect 5s
  timeout client 30s
  timeout server 30s

frontend public
  # HTTP
  bind :80
  use_backend node if { path_beg /services }
  # Everything else to Apache.
  default_backend apache

backend node
  server node1 127.0.0.1:9000

backend apache
  server apache1 127.0.0.1:8000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:12:37.857

对，有可能。唯一的问题是 Apache（运行 Wordpress）和 Node.JS 不能绑定到同一个端口。换句话说，您需要让 Wordpress 在端口 8080 上运行，而 Node 在 80（或其他不同的端口）上运行。

1.  安装 Apache、PHP、Node、NPM、MySQL、NoSQL...
2.  配置 Apache 以侦听所需的端口。（8080？）
3.  安装 Wordpress 并启动 Apache。
4.  启动您的节点应用程序。

至于安装这些服务所涉及的精确步骤，网上有数百个指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-23T16:32:44.923

是的，有可能，试试[express-php-fpm](https://www.npmjs.com/package/express-php-fpm)包。

您可以仅将 WordPress 用作后端，将 Node.js 用作前端。

# android - 在android中使用文件编写器追加时覆盖文本文件

> ID：14072748
> 
> 赞同：2
> 
> 时间：2012-12-28T16:41:56.267
> 
> 标签：android, text-files, filestream

我希望我的应用程序在 sd 卡中创建一个文件夹并将输出文本文件放在那里，例如：mnt/sdcard/myfolder/textfile_name。我已经成功实现了getAbsolutePath的方法，但是我发现文本文件有问题，如果我在第一个文件中写5行然后在下一个文件中我写少于5行，第一个文件的最后一行会出现在第二个文件中。我在我的应用程序中使用附加命令。如何在不附加最后一个的情况下编写它。这些是我的代码

```
public void simpan(View v)
{
    SimpleDateFormat sdf = new SimpleDateFormat("dd_MM_yy_HH_mm_ss");
    String time = sdf.format(new Date());
    generate("Transaction " + time.toString() + ".txt");
    Toast.makeText(getApplicationContext(), "Record Saved to /mnt/sdCard/Soto Betawi/" + time.toString(), Toast.LENGTH_LONG).show();
}

private static void generate(String file_name)
{
    try
    {
        File root = Environment.getExternalStorageDirectory();
        File dir = new File(root.getAbsolutePath() + "/Soto Betawi");
        dir.mkdirs();
        File newfile = new File(dir, file_name);
        FileWriter writer = new FileWriter(newfile);
        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yy HH:mm:ss");
        String time = sdf.format(new Date());
        writer.append("Soto Betawi Asli\n");
        writer.append("Haji HUSEN\n");
        writer.append("Jalan Padang Panjang No. 6C\n");
        writer.append("Manggarai, Jakarta Selatan\n\n");
        writer.append("Transaction time : " + time + "\n");
        writer.append("-------------------------------------------------\n");
        writer.append("Menu\t\t\tPrice\t\t\tQuantity\n");
        writer.append("-------------------------------------------------\n");
        writer.append(value1 + "\t\t" + hrg1 + "\t\t" + qty1.getText().toString() + "\n");
        writer.append(value2 + "\t\t" + hrg2 + "\t\t"+ qty2.getText().toString() + "\n");
        writer.append(value3 + "\t\t" + hrg3 + "\t\t" + qty3.getText().toString() + "\n");
        writer.append(value4 + "\t\t" + hrg4 + "\t\t" + qty4.getText().toString() + "\n");
        writer.append(value5 + "\t\t" + hrg5 + "\t\t" + qty5.getText().toString() + "\n");
        writer.append(value6 + "\t\t" + hrg6 + "\t\t" + qty6.getText().toString() + "\n");
        writer.append(value7 + "\t\t" + hrg7 + "\t\t" + qty7.getText().toString() + "\n");
        writer.append(value8 + "\t\t" + hrg8 + "\t\t" + qty8.getText().toString() + "\n");
        writer.append(value9 + "\t\t" + hrg9 + "\t\t" + qty9.getText().toString() + "\n");
        writer.append(value10 + "\t\t" + hrg10 + "\t\t" + qty10.getText().toString() + "\n\n");
        writer.append("Total Pay : Rp. " + hasil);
        writer.flush();
        writer.close();
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T17:00:17.087

```
new FileWriter(newFile); 
```

创建一个用于（覆盖）写入的文件。你需要使用

```
new FileWriter(newFile, true); 
```

以附加模式打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:00:32.423

更改用于 FileWriter 的构造函数。

更改： FileWriter writer = new FileWriter(newfile); To: FileWriter writer = new FileWriter(newfile, true);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:54:14.133

```
 FileWriter fWriter;
            try{
                 fWriter = new FileWriter(“\sdcard\yourfilename.txt”);
                 fWriter.write(yourString);
                 fWriter.flush();
                 fWriter.close();
             }catch(Exception e){
                      e.printStackTrace();
             } 
```

> flush() 和 close() 调用在这里很重要，还要确保挂载了“sdcard”

# jquery - GoogleTV jquery UI 库参考

> ID：14072750
> 
> 赞同：0
> 
> 时间：2012-12-28T16:42:05.090
> 
> 标签：jquery, google-tv

我正在开发一个 googletv 优化的食品订购网络应用程序。我在 google 开发者网站上找到了 jquery 库参考和键盘导航参考，但它们都没有提供启用键盘导航的常规网页的工作演示。这里有人可以使用 google tv ui jquery 库为我提供具有不同可导航键区的网页的演示（或演示链接）吗？演示中提供的默认控件（rowcontrol、rotatorcontrol 等）都不适合我的应用程序，我只需要创建一个带有键盘导航的常规页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:19:37.460

我们的两个[标准模板](https://developers.google.com/tv/web/docs/ajax_gtv_templates_tutorial#templates)都使用 jQuery 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:49:56.900

目前还不太清楚你在追求什么——谷歌电视的 jquery 演示代码可以完成这项工作，尽管你必须深入了解如何提取键盘控件。你看过关闭代码吗？

如果您正在寻找有关如何将键盘导航合并到您的网络应用程序中的教程，您可能需要查看：http: [//jqueryfordesigners.com/adding-keyboard-navigation/](http://jqueryfordesigners.com/adding-keyboard-navigation/)我相信它可以引导您使用您的应用程序到达您想要的位置.

# python - TurboGears2.2.0 在nosetests 和粘贴setup-app development.ini 时出现安装/运行错误

> ID：14072753
> 
> 赞同：0
> 
> 时间：2012-12-28T16:42:15.970
> 
> 标签：python, turbogears, paster, turbogears2

在我的 OS X 10.8.2 上完成安装 TurboGear2 的所有过程后，我遇到了一个问题。使用Python2.7、TurboGear2.2.0 安装过程参照官网教程：[http ://www.turbogears.org/2.2/docs/main/DownloadInstall.html](http://www.turbogears.org/2.2/docs/main/DownloadInstall.html)

问题描述： 1.按照教程，安装顺利，直到nosetests显示10个错误。2\. 然后，“paster setup-app development.ini”也显示如下错误信息： ![在此处输入图像描述](../Images/cf3e76872604cc0f8b2d7b55a974e3b9.png)

但是我在终端中命令“paster serve development.ini”，服务器仍然成功运行。

我认为有一些问题，但我没有找到答案。有人对此有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T00:01:14.113

是的，不幸的是，这是新版本的sqlalchemy的问题......只需删除sqlalchemy的`pip uninstall sqlalchemy`版本并安装0.7.9版本`pip install sqlalchemy==0.7.9`

# php - 一张图片的重写规则

> ID：14072756
> 
> 赞同：0
> 
> 时间：2012-12-28T16:42:34.280
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有一个 .htaccess 文件，内容如下：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

index.php 上有一个应该始终显示的图像，但是当我导航到重写的路径时，对图像的请求会以该路径为前缀。所以“类别”部分，虽然它仍然应该在 images/foo.png 显示我的 foo.png，但现在有路径 categories/images/foo.png

我可以用 .htaccess 重写规则严格解决这个问题吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:00:51.763

一个更简单的解决方案是根据站点的根文件夹在 html 中为 img 元素使用 src。（如果只是为了那一张图片......）

例如： [http ://www.site.com](http://www.site.com)

```
<img src="/images/header.jpeg" /> 
```

这将始终引用[http://www.site.com/images/header.jpeg](http://www.site.com/images/header.jpeg)，无论您在哪个文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:48:14.503

This should take any request for the image and rewrite it to go the root /images/foo.png:

```
RewriteRule ^.*/images/foo.png$ /images/foo.png 
```

Note that if you have a different image located at somewhere/images/foo.png, requests for that will also be rewritten to /images/foo.png, unless you write specific exceptions for it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:30:31.980

这听起来像是相对 URL 与绝对 URL 的混淆。当您有像`http://domain.com/category/post/name`相对 URI 基础这样的路径时`/category/post`，在网络服务器返回的内容中提供的所有相对链接都将由浏览器预先添加。为了告诉浏览器*真正的*URI 基础是什么，您可以将其包含在您的标头中：

```
<base href="/"> 
```

或者您可以简单地将所有相对 URL 更改为绝对 URL。

# php - 从表中检索的条目是否重复？PHP

> ID：14072757
> 
> 赞同：0
> 
> 时间：2012-12-28T16:42:36.907
> 
> 标签：php, jquery, mysql, ajax, pdo

我的网站上有一个结果页面，我使用 AJAX 在向下滚动时返回更多结果，但是我的问题是，当它拉出结果时，它似乎多次拉出相同的结果？我不知道是什么原因造成的，任何人都可以看到我做错了什么吗？

**AJAX**

```
$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10)  {
         var number = $(".directory").children().length;
        $.ajax({
           type: "POST",
           url: "getentries.php",
           data: "count="+number,
           success: function(results){
             $('.directory').append(results);
           }
         });

    } else {}
}); 
```

**PHP**

```
$result = mysql_query("SELECT * FROM directory LIMIT {$_POST['count']},12");

$c = 1;
while($row = mysql_fetch_array($result))
  {
  echo '<div class="entry';
            if (($c % 4) == 1) echo ' alpha ';
            echo 'ALL THE DATA IS GOING HERE';      
            $c++;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:20:10.407

问题很可能是在您滚动时触发了多个 ajax 调用。像这样设置一个定时事件监听器：

```
didScroll = false;
$(window).scroll(function() {
    didScroll = true;
});

setInterval(function() {
    if ( didScroll ) {
        didScroll = false;
        if(($(document).height() - $(window).height()) - $(window).scrollTop() < 100) {
            // load more results
        }
    }
}, 250); 
```

这篇文章解释了为什么你的解决方案是一个坏主意：[http ://ejohn.org/blog/learning-from-twitter/](http://ejohn.org/blog/learning-from-twitter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:17:02.543

所以问题是，一旦达到滚动阈值，您就会多次调用 ajax。您需要在第一个 ajax 调用上添加一个标志，以便在 ajax 调用完成之前不会再次调用它。

```
ajaxInProgress = false;
if (!ajaxInProgress && ($(window).scrollTop() >= $(document).height() - $(window).height() - 10)) {
    ajaxInProgress = true;
    $.ajax({
       type: "POST",
       url: "getentries.php",
       data: "count="+number,
       success: function(results){
         ajaxInProgress = false;
         $('.directory').append(results);
       }
     });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:07:17.903

问题在于您如何通过 ajax 调用传递数据。从 Jquery 文档中，您需要将计数和金额放在数据中的 javascript 对象中：

```
$.ajax({
       type: "POST",
       url: "getentries.php",
       data: {count: number},
       success: function(results){
         $('.directory').append(results);
       }
     }); 
```

修复此问题后，您的 Mysql 查询应该将正确的下一条数据返回到您的视图中。

希望这可以帮助！

# perl - 我无法在 perl 脚本中执行插入命令？

> ID：14072758
> 
> 赞同：0
> 
> 时间：2012-12-28T16:42:37.933
> 
> 标签：perl, sql-server-2005

```
#!/usr/bin/perl

use DBI;     

$fund=103;
$mobile_number1="7700009896";
$city_address="hello word";

$sql_query3=(qq{ exec "INSERT INTO [192.168.14.28].CommunicationLog.dbo.sms_processedfeeds (pf_Fund,pf_trtype,pf_acno,pf_ihno,pf_Mobile,pf_msgtrtype,pf_msg,pf_entdt) VALUES  ($fund,'CALL',0,NULL,'$mobile_number1','CALL','$city_address',Getdate())"});

my $sql_sms = $dbh->prepare($sql_query3);
$sql_sms->execute(); 
```

我收到以下错误：

```
DBD::ODBC::db prepare failed: [unixODBC][FreeTDS][SQL Server]The identifier that starts with 'INSERT INTO [192.168.14.28].CommunicationLog.dbo.sms_processedfeeds (pf_Fund,pf_trtype,pf_acno,pf_ihno,pf_Mobile,pf_msgtrtype,pf' is too long. Maximum length is 128\. (SQL-42000)
[unixODBC][FreeTDS][SQL Server]Statement(s) could not be prepared. (SQL-42000) at Mobile_verification.pl line 8.
Can't call method "execute" on an undefined value at Mobile_verification.pl line 9. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:50:26.073

您不需要`exec`语句中的嵌套引号。改用这个

```
my $mobile_number1_lit = $dbh->quote($mobile_number1);
my $city_address_lit   = $dbh->quote($city_address);
$sql_query3 = <<END_SQL;
INSERT INTO [192.168.14.28].CommunicationLog.dbo.sms_processedfeeds (pf_Fund, pf_trtype, pf_acno, pf_ihno, pf_Mobile, pf_msgtrtype, pf_msg, pf_entdt)
VALUES ($fund, 'CALL', 0, NULL, $mobile_number1_lit, 'CALL', $city_address_lit, Getdate())
END_SQL

my $sql_sms = $dbh->prepare($sql_query3);
$sql_sms->execute; 
```

或者，最好在 中使用占位符`prepare`并将参数传递给`execute`，就像这样

```
$sql_query3 = <<'END_SQL';
INSERT INTO [192.168.14.28].CommunicationLog.dbo.sms_processedfeeds (pf_Fund, pf_trtype, pf_acno, pf_ihno, pf_Mobile, pf_msgtrtype, pf_msg, pf_entdt)
VALUES (?, 'CALL', 0, NULL, ?, 'CALL', ?, Getdate())
END_SQL

my $sql_sms = $dbh->prepare($sql_query3);
$sql_sms->execute($fun, $mobile_number1, $city_address); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:54:25.010

我不熟悉[`exec`](http://msdn.microsoft.com/en-us/library/ms188332.aspx)，但消息说第一个参数应该是标识符，而不是 SQL 查询。如果您打算使用`exec`SQL 命令，那么您就是在滥用它。

但是你说你想执行一个`INSERT`，所以也许你根本不想使用`EXECUTE`。一个`INSERT`看起来像：

```
 my $stmt = "
    INSERT INTO [192.168.14.28].CommunicationLog.dbo.sms_processedfeeds (
              pf_Fund,
              pf_trtype,
              pf_acno,
              pf_ihno,
              pf_Mobile,
              pf_msgtrtype,
              pf_msg,
              pf_entdt
           ) VALUES (
              ?,?,?,?,?,?,?,Getdate()
           )
";
my $sth = dbh->prepare($stmt);
$sth->execute(
   $fund,
   'CALL',
   0,
   undef,
   '$mobile_number1',
   'CALL',
   $city_address,
); 
```

注意：您可以将`prepare`+`execute`替换为`$dbh->do($stmt, undef, ...data...);`

注意：我假设`[192.168.14.28].CommunicationLog.dbo.sms_processedfeeds`是一个有效的表名称。

# java - 如何从 OpenCV 中的 Mat 对象 m 中读取每个像素的值作为 RGB 值

> ID：14072761
> 
> 赞同：4
> 
> 时间：2012-12-28T16:42:51.800
> 
> 标签：java, android, opencv

这是我从中读取图像`rectangle.jpg`的代码`/sdcard`。我想知道像素值（正常，以及 RGB 格式）。我应该使用什么代码来处理它？

```
package com.idag.edge;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.util.Log;
import android.widget.TextView;

import org.opencv.android.OpenCVLoader;
import org.opencv.core.Mat;
import org.opencv.highgui.Highgui;

public class MainActivity extends Activity {  
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try
        {
            String path=Environment.getExternalStorageDirectory().getAbsolutePath() +"/rectangle.jpg";
            Mat m=Highgui.imread(path,1); 
            Log.i("Paramenres on matrix", "height "+ m.height()+" width "+ m.width()+" total = "+m.total()+" channels " +m.channels());

            System.out.println("element at 0 0 = "+ m.row(0).col(0).nativeObj+" element at 150 150 = "+ m.row(150).col(150).nativeObj);
        }

        catch(Exception e){
            System.err.print("Error in the code");
            Log.i("Error in imread", "Error in imread");
        } 
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T13:38:37.740

`Mat.get(x, y)`- 返回 (x, y) 处的所有通道值的**数组**，每个通道位于不同的位置。如果您的图像是 RGB，那么您将得到一个 [r, g, b] 数组。

`Mat.put(x, y, value)`- 将 (x, y) 处的通道值设置为`value`。

```
double[] rgb = image.get(0, 0);
Log.i("", "red:"+rgb[0]+"green:"+rgb[1]+"blue:"+rgb[2]);
image.put(0, 0, new double[]{255, 255, 0});//sets the pixel to yellow 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T09:53:25.547

OpenCV 中使用的函数是`double[] Mat::get(int row, int col)`.

# vbscript - 连接到 FileSite 并打开文件

> ID：14072765
> 
> 赞同：0
> 
> 时间：2012-12-28T16:43:11.897
> 
> 标签：vbscript, autonomy, imanage

我刚开始担任一家公司的分析师/程序员，并且正在编写代码以在重新启动之前保存所有打开的文件，然后在下次启动后恢复/打开这些文件。

我正在为我们的 DMS、FileSite 苦苦挣扎，到目前为止，我还没有找到任何运气来追踪支持文档或弄清楚我们的客户服务关系。

到目前为止，我已经在 VBScript 中完成了所有编码，尽管我愿意转换为 VB 或 C#。我开始怀疑 VBScript 不是解决此问题的正确工具，但因为 [在此处插入无趣的细节]，我暂时无法使用 VBScript。任何不包括切换语言的答案将不胜感激。但是，如果您确实知道我不能在 VBScript 中做我想做的事情，那也将是非常有用的信息。

我需要执行以下操作：

*   连接到 FileSite
*   打开一个文件（我已经知道它的名字）

我在网上查看了示例代码，但没有支持文档，我无法理解它。我尝试修改并运行代码并收到诸如“ActiveX 无法创建对象：'iManage.NRTDMS'”和“未定义类：'IManage'”之类的错误。

一些讨论建议在库上运行 regsvr32，但这会引发不兼容错误。

我们确实将 WorkSite 与 Outlook 集成，如果这对我处理事情的方式有任何影响的话。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:48:48.180

我在 Autonomy 的 DevNet 上从 RKnott2 那里得到了一些帮助。如果您已经连接到 FileSite，那么有一个非常简单的协议处理程序：

```
Function fnOpenFileSite()

    Dim objShell
    Set objShell = CreateObject("Shell.Application")

    Dim iwlurl
    iwlurl = "iwl:dms=[Server]&lib=[Database]&num=[Doc Number]&ver=[Version Number}&command=opencmd"

 objShell.ShellExecute iwlurl,"","","",1

    Set objShell = Nothing

 End Function 
```

# c# - Windows 应用商店应用程序 - 让用户通过代码删除试用模式

> ID：14072769
> 
> 赞同：2
> 
> 时间：2012-12-28T16:43:50.023
> 
> 标签：c#, windows-runtime, windows-store-apps, windows-store

我开发了支持试用模式的应用程序。但现在我需要让一些用户通过激活码获得完整的信息。场景是用户下载试用应用程序，他可以输入应用程序的激活码，然后用户可以使用应用程序的全部功能。

谁能给我建议一个方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:08:21.700

您需要考虑如何验证代码 - 我猜您不希望他们通过商店验证代码，因此您必须提供一些后端服务来执行此操作。

该服务显然需要将激活码发送给它（您应该将其存储在远程设置中），并且您可能希望将设备唯一 ID 发送到 - 您可以为此使用[唯一 ID](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.profile.hardwareidentification.getpackagespecifictoken)。

然后，您的服务应该验证它看到代码的次数，如果满意，它应该对代码、设备 ID 和与您的应用程序共享的秘密进行[哈希](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha256.aspx)处理 - 这需要嵌入到您的应用程序代码中。

为了用户的额外隐私，我建议在将设备唯一 ID 发送到服务器之前使用共享密钥对其进行哈希处理。

您需要将返回的激活码存储在您的应用程序中 - 而且没有太多选择 - 我会亲自将此代码存储在[LocalSettings](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.storage.applicationdata.localsettings)区域中。

现在在启动时，您需要验证存储的激活码是否有效。如果您有互联网连接，那么您可以通过询问服务代码是否有效来做到这一点，但您必须安排离线检查。这很简单，因为激活码，加上针对共享密钥散列的散列设备 ID 应该等于存储的激活码 - 根据您的应用程序类型，您可能希望在需要互联网访问之前只允许 5 次激活（选择一个高数字，因为这真的会惹恼用户）

最后，您需要考虑拥有多台设备的用户 - 根据商店，您可以跨不同设备为相同的用户安装 5 次相同的应用程序。为了适应这一点，我们将激活码存储在远程设置中，因此在启动时检查该代码是否存在，以及它是否会自动将代码和设备 ID 发送到您的服务以进行激活。

您需要考虑的唯一另一件事是您究竟如何保护应用程序中的共享机密？不幸的是，没有太多选择。这实际上取决于您的应用程序需要有多安全。如果您完全偏执，那么请混淆您的代码，但这只是在争取时间。如果您需要更多，那么我建议您将设备代码发送给您的服务，并使用加密随机随机数进行哈希处理，这将返回您发送的内容，但使用密码进行哈希处理。不幸的是，这将使激活令牌的离线验证变得不可能，因此您必须建立一个不需要互联网连接的宽限期。

或者您可以在应用程序购买中使用。

# c++ - 内联函数

> ID：14072773
> 
> 赞同：1
> 
> 时间：2012-12-28T16:44:08.340
> 
> 标签：c++, function

> **可能重复：**
> [C++ 中内联函数的好处？](https://stackoverflow.com/questions/145838/benefits-of-inline-functions-in-c)

我的老师解释说，使用内联函数而不是标准函数会使你的代码运行得更快，因为它将函数的完整主体插入到函数被调用的每个地方，而不是生成代码来在一个地方调用函数被定义为。这不会使代码运行速度变慢吗？

为什么人们不将每个函数都内联，因为它比标准函数更快？

# javascript - 链接到文本区域

> ID：14072774
> 
> 赞同：1
> 
> 时间：2012-12-28T16:44:15.737
> 
> 标签：javascript, html, hyperlink, textarea

我想创建一个链接，将用户带到 textarea 并允许他们立即开始输入。这是我的文本区域：

```
<textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea> 
```

目前，我只是通过以下方式链接到它：

```
<a href="#commentnow">Post a comment</a> 
```

但这只会将他们带到 textarea 所在的区域，而不是在其中，以便他们可以开始输入。为了做到这一点，他们显然需要点击它。我用我当前的设置创建了一个[小提琴。](http://jsfiddle.net/uWQbZ/)

我想对此有多种解决方案。但是，我会要求一个以兼容性为中心的解决方案（适用于所有浏览器，尤其是手机浏览器）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T16:46:53.583

Use the `.focus()` method along with `window.location.hash`.

```
<a href="#comment" onclick="window.location.hash = 'comment'; document.getElementById('comment').focus(); return false;">click</a>
<textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea> 
```

Use `return false` or `preventDefault()` for this to work everywhere. Chrome/stock browser on android doesn't require this. Firefox mobile does.

Here's the [fiddle](http://jsfiddle.net/KeFbU/) for you to test with. Here's another example [fiddle](http://jsfiddle.net/KeFbU/3/) where the submit is visible while typing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:50:48.860

当可以使用普通的 HTML 元素时，您不需要为此使用 JavaScript；考虑到这一点，只需使用一个`label`元素，而不是一个`a`，因为您的要求正是由`label`元素满足：

```
<label for="commentnow">Post a comment</label>
<textarea id="commentnow" name="comment" cols="45" rows="8" aria-required="true"></textarea>​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uWQbZ/2/)。

的`for`属性`label`必须等于`id`您要关注并与之关联的元素的`label`。

回应 OP 的评论（在评论中，如下）：

> 两个问题：兼容性如何？如何使它成为可点击文本的按钮（悬停时光标会发生变化）......？

为了解决兼容性问题，该`label`元素从 HTML 4.01 开始就已经存在，而且我还没有遇到过不能使用它的浏览器（包括 IE 7，但我不记得在 IE 6 中使用过它）。

要让它看起来像一个按钮，只需使用 CSS（就像您将`a`元素样式设置为像一个按钮一样，例如：

```
label {
    color: #666;
    display: inline-block;
    padding: 0.3em 0.5em;
    border: 1px solid #aaa;
    background-color: #eee;
    margin: 0.5em;
}

label:hover,
label:active,
label:focus {
    color: #f90;
    box-shadow: 0 0 0.3em #f90;
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/uWQbZ/8/)，这不是一个特别漂亮的示例，但确实表明样式可能性都*存在*，并且在这方面与任何其他元素没有什么不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:08:57.820

使用 jQuery 简单尝试一下：

```
<a class="link" href="#">Post a comment</a>
<textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea

$(".link").click(function(){
    $("#comment").focus();
    return false;
}); 
```

# coffeescript - 为什么我无法窥探这个“全局”功能？

> ID：14072778
> 
> 赞同：1
> 
> 时间：2012-12-28T16:44:38.307
> 
> 标签：coffeescript, jasmine

第一次尝试使用 Jasmine 间谍，所以我希望我只是遗漏了一些明显的东西。我想要做的是跟踪对我定义为的函数的调用：

```
window.myFunction = -> 
```

我有一个调用这个函数的类方法。该方法工作正常，我可以测试它的大部分方面，但以下失败：

```
beforeEach ->
  spyOn(window, 'myFunction').andCallThrough()

it 'should do that thing', ->
  MyClass.makesCallToMyFunction
  expect(window.myFunction).toHaveBeenCalled() 
```

我究竟做错了什么？我看过很多关于 SO 的示例，其中许多使用 spyOn(window, 'myFunction')...expect(window.myFunction) 设置/规范。

任何见解表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:35:00.290

这将失败：

```
it 'should do that thing', ->
  MyClass.makesCallToMyFunction
  expect(window.myFunction).toHaveBeenCalled() 
```

因为`MyClass.makesCallToMyFunction`不是方法调用，那只是对`makesCallToMyFunction`函数的引用。如果你想在没有任何参数的情况下调用 CoffeeScript 函数/方法，那么你需要包含括号，否则 CoffeeScript 将不知道你想要调用该函数：

```
MyClass.makesCallToMyFunction() 
```

# c++ - 如何运行 GCC/Clang 进行静态分析？（仅警告）

> ID：14072779
> 
> 赞同：17
> 
> 时间：2012-12-28T16:44:41.267
> 
> 标签：c++, gcc, compiler-construction, clang, static-analysis

如果不编译代码，我希望 GCC 或 Clang 报告警告。
是否可以仅运行编译器进行静态分析？
我找不到传递编译器警告标志并告诉它不要编译的方法。

编辑：刚刚发现clang有一个[静态分析器](http://clang-analyzer.llvm.org/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-28T20:44:51.283

GCC 和 Clang 都有一个选项`-fsyntax-only`，使编译器只执行语法检查而不进行任何实际编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T09:18:18.653

除了其他回复外，还在`gcc`编译期间（甚至在一些优化过程中）进行了一些分析。因此，您可以丢弃生成的代码，但仍会收到所有警告，例如`gcc -Wall -O -c code.c -o /dev/null`

请注意，您可以通过额外的通行证来扩展 GCC，做一些额外的、特定于应用程序的检查和警告，例如使用[MELT](http://gcc-melt.org/)（一种用于扩展 GCC 的高级域特定语言）。

如果您想要强大的静态分析并愿意为此目的提供额外的注释，还可以考虑[Frama C](http://frama-c.com/)。

# c# - 如何禁用对 Click 事件的捕获

> ID：14072784
> 
> 赞同：0
> 
> 时间：2012-12-28T16:44:59.760
> 
> 标签：c#, winforms

在 .NET v4 上使用 VS2010 我有以下问题。

我创建了两个自定义控件，Cell 和 Board，我想使用 Cell 控件来捕获一些事件并显示一些数据。我需要捕获的最重要的事件是 Click 事件。

当自定义控件没有子控件项时，这不是问题。在使用 Cell 的级别上，我可以毫无问题地将事件处理程序绑定到 Click 事件。

```
 public partial class Cell : UserControl
    {
        ....
    }

    public partial class Board : UserControl
    {
        private void InitializeComponent()
        {
            ...
            this.Cell99.Click += new System.EventHandler(this.Cell_Click);
            ...
        }
    } 
```

Cell 控件相当小（大小约为 50x50 像素），我希望它显示的内容之一是尽可能大的整数值（大小约为 50 x 50 像素；-) 这样做没问题，我想要为此使用标签控件。

一旦我向 Cell 添加另一个（例如标签）控件，它就不再可以看到某些事件，因为子事件正在获得“第一权利”。对于 Label 控件覆盖的像素，它将捕获我想用 Cell 控件而不是 Label 控件处理的 Click 事件。

如果它只是我想在 Cell 中使用的一个控件，则解决方案是将事件从 Label 控件链接到 Cell 控件。但是我至少有 10 个不同的（标签）控件需要进入 Cell 以显示我拥有的所有信息。将所有控件的所有事件转发给它的父级对我来说有点麻烦。（除了容易出错和其他错误。）

为用户控件中的子控件禁用事件捕获的正确方法是什么？

如前所述，我曾想过将事件从孩子转发给父母，但现在拒绝了。

然后我想到了不使用控件来显示数据，而是生成一个包含信息的位图并将其用作背景。*我……不*期待！

最后，我提出了一个想法，即在所有其他控件之上放置一个额外的控件，并将捕获的事件转发给父级。这可能是最简单的继续方式。

不知何故，我认为必须有更好的方法来解决这个问题，但是如何呢？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:53:19.463

Implement a label class which inherits from Windows.Forms.Label. In this derived label/component class add a method or mechanism to forward any click event received by the label to the parent Cell control. Any labels which are added as child controls of a Cell would be of this custom label class and would all forward their Click events to the parent without having to manually do so for each label instance.

# android - Facebook登录作为android中的页面

> ID：14072789
> 
> 赞同：0
> 
> 时间：2012-12-28T16:45:38.043
> 
> 标签：android, facebook, facebook-login

如何在 android 中以页面管理员身份登录，例如在 JS SDK 中？（后跟此链接：[https](https://developers.facebook.com/docs/howtos/login/login-as-page/) ://developers.facebook.com/docs/howtos/login/login-as-page/ ）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:55:01.797

您应该将 manage_pages 权限添加到您为会话请求的权限，然后按照您链接到的页面中显示的图形请求（使用[请求](https://developers.facebook.com/docs/reference/android/3.0/Request)对象）。

工作流程将是：

1.  要求用户登录（通过 Session.openActiveSession，或使用登录按钮）
2.  请求 manage_pages 权限（通过 session.requestNewPublishPermissions）
3.  对“我/帐户”提出请求，该请求应为您提供用户管理的页面列表
4.  向用户显示列表，并询问他们想使用哪个页面
5.  使用该 page_id 进行进一步的请求

# php - 基本搜索引擎不工作

> ID：14072797
> 
> 赞同：-3
> 
> 时间：2012-12-28T16:46:16.097
> 
> 标签：php

您好，我设法将一个简单的搜索引擎作为其基础，所以我开始研究它。但我被禁止访问，不知道为什么有人可以帮助我？用一个表格，我给 $find 我搜索的词，它应该搜索它。谢谢你的时间！`

```
 <?php

    if ($searching =="yes")  
    {   
    echo "Results";

    if ($find == "")   
    {   
    echo "You forgot to enter a search term";  
     exit;   
    }   
    mysql_connect("localhost","Anton","zouzou13") or die(mysql_error());  mysql_select_db("Ptyxiakh") or  die(mysql_error());
    $find = strtoupper($find);

    $find = strip_tags($find);

    $find = trim ($find);

    $data =mysql_query("SELECT * FROM documents WHERE keywords LIKE'%$find%'");  
     while($result = mysql_fetch_array( $data ))   
    {   
    echo $result['document_name'];   
    echo " ";
    echo $result['first_paragraph'];
    echo "<br>";     
    } 
     $anymatches=mysql_num_rows($data);
    if ($anymatches == 0)   
    {   
    echo "Sorry, but we can not find an entry to match your query<br><br>";   }
     echo "<b>Searched For:</b> " .$find;   }  ?>

ok i made it simpler to see if it works like this:

    <?php
    error_reporting(E_ALL);

    mysql_connect("localhost","Anton","zouzou13") or die(mysql_error()); 
    mysql_select_db("Ptyxiakh") or die(mysql_error()); 

     //Now we search for our search term, in the field the user specified 
     $data = mysql_query("SELECT * FROM documents WHERE keywords LIKE 'helmets'");

      while($result = mysql_fetch_array( $data ))   
    {   
    echo $result['document_name'];   
    echo " ";
    echo $result['first_paragraph'];
    echo "<br>";     
    }

     $anymatches=mysql_num_rows($data); 
     if ($anymatches == 0) 
     { 
     echo "Sorry, but we can not find an entry to match your query<br><br>"; 
     }
    ?> 
But i get the "Sorry, but we can not find an entry to match your query<br><br>"; so i cant connect to database?its just wont work :(

With PDO it should be like this??:

<?php
 //This is only displayed if they have submitted the form 
 if ($searching =="yes") 
 { 
 echo "<h2>Results</h2><p>"; 

 //If they did not enter a search term we give them an error 
 if ($find == "") 
 { 
 echo "<p>You forgot to enter a search term"; 
 exit; 
 } 
 $pdo = new PDO('mysql:host=localhost;dbname=ptyxiakh', 'Anton', 'zouzou13');
 // Otherwise we connect to our Database 
//mysql_connect("localhost","Anton","zouzou13") or die(mysql_error()); 
//mysql_select_db("Ptyxiakh") or die(mysql_error()); 

 // We preform a bit of filtering 
 $find = strtoupper($find); 
 $find = strip_tags($find); 
 $find = trim ($find); 

 //Now we search for our search term, in the field the user specified 
 //$data = mysql_query("SELECT * FROM documents WHERE keywords LIKE'%$find%'"); 
 $data= $pdo->query("SELECT * FROM documents WHERE keywords LIKE'%$find%'");

 //And we display the results 
 while($row = $statement->fetch(PDO::FETCH_ASSOC)) 
 { 
 echo htmlentities($row['document_name']); 
 echo " "; 
 echo htmlentities($row['first_paragraph']);
 echo "<br>";   
 } 

 //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
 $anymatches=mysql_num_rows($data); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query<br><br>"; 
 } 

 //And we remind them what they searched for 
 echo "<b>Searched For:</b> " .$find; 
 } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:39:10.267

我让它工作得非常基本，我猜它已经弃用了thingys，但我上传了用于搜索东西的ppl......只需制作一个简单的表格，然后制作一个php文件

```
 <?php
 error_reporting(E_ALL);
 //This is only displayed if they have submitted the form 
 echo "<h2>Results</h2><p>"; 
 $find =$_POST["find"];
 //If they did not enter a search term we give them an error 
 if ($find == "") 
 { 
 echo "<p>You forgot to enter a search term"; 
 exit; 
 } 
 // Otherwise we connect to our Database 
 mysql_connect("localhost","Anton","zouzou13") or die(mysql_error()); 
 mysql_select_db("Ptyxiakh") or die(mysql_error()); 

 // We preform a bit of filtering 
 $find = strtoupper($find); 
 $find = strip_tags($find); 
 $find = trim ($find); 

 //Now we search for our search term, in the field the user specified 
 $data = mysql_query("SELECT * FROM documents WHERE keywords LIKE'%$find%'"); 

 //And we display the results 
  while($result = mysql_fetch_array( $data ))   
    {
    echo '<p> <strong>',$result['document_name'], '</strong> <br> ', $result['first_paragraph'],'... <br> </p>';
    }

 //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
 $anymatches=mysql_num_rows($data); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query<br><br>"; 
 } 

 //And we remind them what they searched for 
 echo "<b>Searched For:</b> " .$find; 

?> 
```

这对我有用:) thx！

# razor - 在 ASP.NET MVC4 中连接 Razor 变量

> ID：14072798
> 
> 赞同：2
> 
> 时间：2012-12-28T16:46:18.373
> 
> 标签：razor, asp.net-mvc-4

如何连接我的 Razor 变量？这就是我所拥有的：

```
@foreach (var item in ViewBag.Pcs) {
    <li><a href="#" class="btn"><i class="icon-hdd"></i>
    @item.Manufacturer.ManufacturerName + ' ' + @item.HardwareType.HType </a></li>
} 
```

但它显示了引号和优点。如何在两个 Razor 变量之间放置一个空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:50:09.723

您只需要在变量之间留一个空格，例如：

```
@foreach (var item in ViewBag.Pcs) {
   <li><a href="#" class="btn"><i class="icon-hdd"></i>
  @item.Manufacturer.ManufacturerName @item.HardwareType.HType </a></li>
} 
```

# javascript - 在meteor中如何使用模板生成动态HTML标签属性？

> ID：14072799
> 
> 赞同：3
> 
> 时间：2012-12-28T16:46:25.643
> 
> 标签：javascript, meteor, html

我正在使用模板在 Meteor 中生成 HTML 标记属性，但似乎已损坏。我不能将模板放在[流星](http://meteor.com/)的 HTML 标记中，我想知道为什么。

我正在使用[流星路由器](https://github.com/tmeasday/meteor-router)进行路由。由于流星基本上只允许单一布局，我想在 body 中添加一个类，指示当前视图名称，如下所示：

/client/layout.html：

```
<head>
  <title>Meteor App</title>
</head>

<body {{> body-attributes}}>
  {{renderPage}}
</body>

<template name="body-attributes">data-view-name="{{page}}" class="{{page}}"<template> 
```

这样我就可以在 /client/layout.js 中执行此操作：

```
Template['body-attributes'].page = function () {
  return Meteor.Router.page();
}; 
```

但这不起作用，我从应用程序中收到一个错误，说不支持身体上的属性。将 layout.html 更改为此：

```
<head>
  <title>Meteor App</title>
</head>

<body>
  <div {{> body-attributes}}>
      {{renderPage}}
  </div>
</body>

<template name="body-attributes">data-view-name="{{page}}" class="layout-container {{page}}"<template> 
```

导致 HTML 完全损坏。浏览器在页面前显示一个“>”，控制台元素面板如下所示： ![控制台截图](../Images/2bf561e9e6c72f098c6c6c2fee6a03e0.png)

为什么那行不通？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:03:42.517

`{{> body-attributes}}`在 HTML 标记（在您的情况下为标记）内部调用`body`最终意味着 Meteor 将在该位置将[DocumentFragment](http://docs.meteor.com/#meteor_render)注入到 DOM 中。

为了反应性，这些`DocumentFragments`不是模板中标记的普通复制品，而是包裹在特殊的 Meteoresque 反应性标签中，帮助后端引擎保持`Template`更新。您可以通过调用 Template 函数并调查以下内容来看到这一点`_domFrag`：

```
var _domFrag = Template.myTemplateName(); 
```

因此，`Templates`在流星上下文中，并非旨在作为 HTML 标签上的属性嵌入，因为它在标签本身中注入了额外的标签。您的第二次尝试更符合框架的工作方式。

希望这有助于解释这种行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:51:29.813

我不知道为什么流星不允许最高级别的 HTML 标记内的模板，但我找到了解决这个问题的方法。我将 layout.html 更改为如下所示：

```
<head>
  <title>Meteor App</title>
</head>
<body>
  {{> global-layout}}
</body>

<template name="global-layout">
  <div data-view-name="{{page}}" class="global-container {{page}}">
    {{renderPage}}
  </div>
</template> 
```

然后在layout.js中将名称从切换`body-attributes`到。`global-layout`这完美地解决了我的问题，但我仍然很想知道为什么第一个选项（在我的问题中）最初不起作用。

# google-apps-script - 如何根据脚本中的另一个单元格更改单元格的值

> ID：14072800
> 
> 赞同：2
> 
> 时间：2012-12-28T16:46:27.173
> 
> 标签：google-apps-script, google-sheets

我在单元格 X2 上有以下功能

```
=IF(ISERROR(FIND("Sleep",B2))=true,"No","Yes") 
```

我想创建一个脚本来执行此操作，我将在表单提交时触发。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:02:48.477

您需要一个可安装的触发功能。提交表单后，您的函数将收到一个事件参数，其中包括已插入表单值的电子表格范围，以及值本身的副本（因此您无需阅读工作表）。[请参阅了解事件](https://developers.google.com/apps-script/understanding_events)中的“电子表格表单提交事件” 。

```
function updateX2onFormSubmit( event ) {
  var sheet = event.range.getSheet();
  // Get a range object, at column X in event row.
  cellX = sheet.getRange( "X" + event.range.getRow() );

  cellX.setValue( event.values[1] == "Sleep" ? "Yes" : "No" );
} 
```

# java - connecting from android mobile app to a database on a laptop

> ID：14072806
> 
> 赞同：0
> 
> 时间：2012-12-28T16:46:43.337
> 
> 标签：java, android

I'm new to android programming so please I need your help I want to make a mobile application that connects to a databse on my laptop through internet without configuring my router I'm using phpmyadmin in which i created a database, and I made a file called login.php that can make sure of username and password from database I enabled the port 80 in firewall now i wrote in eclipse this url : http:"//192.168.1.3:80/Day%20Manager/Login.php" the ip address is optained by writing ipconfig in cmd and getting the IPV4 address well it's not working it's giving me NetworkOnMainThreadException can you help me please

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:55:35.040

看看这个[**链接**](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)。这可能会有所帮助。当然，如果您需要从应用程序中访问它，则必须提供一个中间 php 脚本才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:15:42.003

你说你正在使用 phpmyadmin 数据库，然后将你的 php 文件放在 c:/>xampp/htdocs 文件夹中，打开你的浏览器并输入 localhost/login.php 然后你会得到输出，以同样的方式从程序连接到 url 然后你会得到数据。

```
note: make sure internet permission in manifest file. 
```

# android - Unable to tell if alarm is scheduled- repeating alarm

> ID：14072807
> 
> 赞同：0
> 
> 时间：2012-12-28T16:46:51.523
> 
> 标签：android, scheduling, alarmmanager, alarm

I have a repeating alarm that is started in the class StartActivity. The package is psychsoft.gps.v1 The code does not seem to catch whether the alarm is started or not.

```
 if ((PendingIntent.getBroadcast(con, 13336,
            new Intent("psychsoft.gps.v1"), 
            PendingIntent.FLAG_NO_CREATE) != null))
    {
        Log.i("aaa", "Alarm is already active");
        Toast.makeText(con, "alarm already active", Toast.LENGTH_SHORT).show();
    }

    Calendar calGPS = Calendar.getInstance();
    Intent intentGPS = new Intent(con, AlarmReceiver.class);
    intentGPS.putExtra("alarm_message", "gps");
    PendingIntent senderGPS = PendingIntent.getBroadcast(this, 13336, intentGPS, PendingIntent.FLAG_UPDATE_CURRENT);        
    // Get the AlarmManager service
    AlarmManager amGPS = (AlarmManager) getSystemService(ALARM_SERVICE);
    amGPS.setRepeating(AlarmManager.RTC_WAKEUP, calGPS.getTimeInMillis(),1000*60*5, senderGPS); 
```

To test this code I run it once to schedule the alarm (installing the app). Then I run it again (by clicking the icon) to try to get the Toast, or Log output. I am getting neither. Why? I originally though the issue might be fixed by matching the request code of the PendingIntent to that of the if statement, but it did not solve the problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:51:01.223

尝试像这样创建和检查意图：

```
Intent intentGPS = new Intent("psychsoft.gps.v1.MY_UNIQUE_ACTION"); 
```

和

```
if ((PendingIntent.getBroadcast(con, 13336,
            new Intent("psychsoft.gps.v1.MY_UNIQUE_ACTION"), 
            PendingIntent.FLAG_NO_CREATE) != null))
    {
        Log.i("aaa", "Alarm is already active");
        Toast.makeText(con, "alarm already active", Toast.LENGTH_SHORT).show();
    } 
```

# javascript - 未传递广告系列数据

> ID：14072809
> 
> 赞同：0
> 
> 时间：2012-12-28T16:47:02.867
> 
> 标签：javascript, google-analytics

我正在测试 Google Analytics Campaign 跟踪。我的本地页面上有以下由 onclick 事件触发的 JavaScript 代码：

```
<script type="text/javascript">
function trackCampGoogle() {
try {
_gaq.push(['_setAccount', 'UA-XXXXXXX-1']); 
_gaq.push(['_setCampNameKey', 'ga_campaign']);    // name
_gaq.push(['_setCampMediumKey', 'ga_medium']);    // medium
_gaq.push(['_setCampSourceKey', 'ga_source']);    // source
_gaq.push(['_setCampTermKey', 'ga_term']);        // term/keyword
_gaq.push(['_setCampContentKey', 'ga_content']);  // content
_gaq.push(['_setCampNOKey', 'ga_nooverride']);    // don't override
_gaq.push(['_setDomainName', 'none']);
_gaq.push(['_trackPageview','CampTrackerGoogle']);
setTimeout('document.location = "' + link.href + '"', 100);
}catch(err){}
}
</script> 
```

当我在打开 GA 调试器的情况下单击 Chrome 中的链接时，跟踪信标会触发，但不显示正在传递的活动数据：

```
Campaign Count           : 1
Campaign Source          : (direct)
Campaign Medium          : (none);
Campaign Name            : (direct) 
```

这，呃，令人沮丧。我错过了什么？我们需要通过 JavaScript 而不是在 URL 中传递活动数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:26:06.847

您可以在and`_set`之前使用来执行此操作。`_trackPageview``_setDomainName`

```
_gaq.push(['_set', 'campaignParams', 'utm_campaign=CAMPAIGN&utm_source=SOURCE&utm_medium=MEDIUM']); 
```

# python - 以 str.format 切片字符串

> ID：14072810
> 
> 赞同：25
> 
> 时间：2012-12-28T16:47:03.367
> 
> 标签：python, string, string-formatting

我想通过以下方式实现以下目标`str.format`：

```
x,y = 1234,5678
print str(x)[2:] + str(y)[:2] 
```

我能做到的唯一方法是：

```
print '{0}{1}'.format(str(x)[2:],str(y)[:2]) 
```

现在，这是一个例子，我真正拥有的是一个又长又乱的字符串，所以我想把切片放在`{}`. 我研究[了文档](http://docs.python.org/2/library/string.html)，但我无法弄清楚正确的语法。我的问题是：是否可以在替换字段中分割字符串？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T16:52:02.723

不，您不能对替换字段内的字符串应用切片。

您需要参考[Format Specification Mini-Language](https://docs.python.org/3/library/string.html#format-specification-mini-language)；它定义了什么*是*可能的。这种迷你语言定义了如何格式化引用的值（`:`替换字段语法中的后面部分）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-28T17:13:50.820

你可以做这样的事情。

**注意**
这是一个粗略的例子，不应被认为是完整的和经过测试的。但我认为它向你展示了一种开始到达你想去的地方的方法。

```
import string

class SliceFormatter(string.Formatter):

    def get_value(self, key, args, kwds):
        if '|' in key:
            try:
                key, indexes = key.split('|')
                indexes = map(int, indexes.split(','))
                if key.isdigit():
                    return args[int(key)][slice(*indexes)]
                return kwds[key][slice(*indexes)]
            except KeyError:
                return kwds.get(key, 'Missing')
        return super(SliceFormatter, self).get_value(key, args, kwds)

phrase = "Hello {name|0,5}, nice to meet you.  I am {name|6,9}.  That is {0|0,4}."
fmt = SliceFormatter()
print fmt.format(phrase, "JeffJeffJeff", name="Larry Bob") 
```

**输出**

```
Hello Larry, nice to meet you.  I am Bob.  That is Jeff. 
```

**注 2**
不支持像`[:5]`or一样的切片`[6:]`，但我认为这也很容易实现。此外，对于超出范围的切片索引等也没有错误检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-17T17:27:27.303

您可以使用运行时评估的“f”字符串。Python f-strings 支持切片，并且不使用格式化程序之类的“迷你语言”。在 f 字符串的每个花括号中都可以使用 python 表达式的全部功能。不幸的是，没有 string.feval() 函数...... imo 应该有（语言不应该有没有提供给用户的魔法能力）。

您也不能在字符串类型中添加一个，因为无法修改/扩展内置的 python 类型。

有关运行时评估 f 字符串的示例，请参阅[https://stackoverflow.com/a/49884004/627042 。](https://stackoverflow.com/a/49884004/627042)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-26T14:48:05.853

直接回答您的问题：不，内置 str 格式不支持切片。虽然，如果 f-strings（运行时评估）不符合您的需求，有一种解决方法。

**解决方法**

之前扩展[string.Formatter](https://docs.python.org/3.4/library/string.html)的答案并不完全正确，因为重载 get_value 不是将切片机制添加到[string.Formatter](https://docs.python.org/3.4/library/string.html)的正确方法。

```
import string

def transform_to_slice_index(val: str):
    if val == "_":
        return None
    else:
        return int(val)

class SliceFormatter(string.Formatter):

    def get_field(self, field_name, args, kwargs):
        slice_operator = None
        if type(field_name) == str and '|' in field_name:
            field_name, slice_indexes = field_name.split('|')
            slice_indexes = map(transform_to_slice_index,
                                slice_indexes.split(','))
            slice_operator = slice(*slice_indexes)

        obj, first = super().get_field(field_name, args, kwargs)
        if slice_operator is not None:
            obj = obj[slice_operator]

        return obj, first 
```

**解释**

[get_value在](https://docs.python.org/3.4/library/string.html#string.Formatter.get_value)[get_field](https://docs.python.org/3.4/library/string.html#string.Formatter.get_field)内部调用，它仅用于从[vformat()](https://docs.python.org/3.4/library/string.html#string.Formatter.vformat)访问 args 和 kwargs 。attr 和项目访问在 get_field 中完成。因此，切片访问应该在 super().get_field 返回所需的 obj 之后完成。

话虽如此，重载 get_value 会给您带来一个问题，即在遍历对象后格式化程序将无法用于切片。您可以在此示例中看到错误：

```
WrongSliceFormatter().format("{foo.bar[0]|1,3}", foo=foo)
>> ValueError: "Only '.' or '[' may follow ']' in format field specifier" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-06T18:47:18.357

这是一个很好的解决方案，很好地解决了我的切片问题。然而，我也想做价值消除。例如，我可能想要填充 10 个字符字段的“AveryLongStringValue”可能会被截断为“...ngValue”。因此，我扩展了您的示例以支持切片、删除和正常格式合二为一。这就是我想出的。

```
class SliceElideFormatter(string.Formatter):
    """An extended string formatter that provides key specifiers that allow
    string values to be sliced and elided if they exceed a length limit.  The
    additional formats are optional and can be combined with normal python
    formatting.  So the whole syntax looks like:
    key[|slice-options][$elide-options[:normal-options]
    Where slice options consist of '|' character to begin a slice request,
    followed by slice indexes separated by commas.  Thus {FOO|5,} requests
    everything after the 5th element.
      The elide consist of '$' character followed by an inter max field value,
    followed by '<', '^', or '>' for pre, centered, or post eliding, followed
    by the eliding string.  Thus {FOO$10<-} would display the last 9 chanacters
    of a string longer then 10 characters with '-' prefix.
      Slicing and eliding can be combined.  For example given a dict of
    {'FOO': 'centeredtextvalue', and a format string of 
    '{FOO|1,-1$11^%2E%2E%2E}' would yield 'ente...valu'.  The slice spec removes
    the first and last characrers, and the elide spec center elides the
    remaining value with '...'.  The '...' value must be encoded in URL format
    since . is an existing special format character.
    """

    def get_value(self, key, args, kwds):
        """Called by string.Formatter for each format key found in the format
        string.  The key is checked for the presence of a slice or elide intro-
        ducer character.  If one or both a found the slice and/or elide spec
        is extracted, parsed and processed on value of found with the remaining
        key string.
        Arguments:
          key, A format key string possibly containing slice or elide specs
          args, Format values list tuple
          kwds, Format values key word dictrionary
        """
        sspec = espec = None
        if '|' in key:
            key, sspec = key.split('|')
            if '$' in sspec:
                sspec, espec = sspec.split('$')
        elif '$' in key:
            key, espec = key.split('$')
        value = args[int(key)] if key.isdigit() else kwds[key]
        if sspec:
            sindices = [int(sdx) if sdx else None
                        for sdx in sspec.split(',')]
            value = value[slice(*sindices)]
        if espec:
            espec = urllib.unquote(espec)
            if '<' in espec:
                value = self._prefix_elide_value(espec, value)
            elif '>' in espec:
                value = self._postfix_elide_value(espec, value)
            elif '^' in espec:
                value = self._center_elide_value(espec, value)
            else:
                raise ValueError('invalid eliding option %r' % elidespec)
        if sspec or espec:
            return value

        return super(SliceElideFormatter,self).get_value(key, args, kwds)

    def _center_elide_value(self, elidespec, value):
        """Return center elide value if it exceeds the elide length.
        Arguments:
          elidespec, The elide spec field extracted from key
          value, Value obtained from remaing key to maybe be elided
        """
        elidelen, elidetxt = elidespec.split('^')
        elen, vlen = int(elidelen), len(value)
        if vlen > elen:
            tlen = len(elidetxt)
            return value[:(elen-tlen)//2] + elidetxt + value[-(elen-tlen)//2:]
        return value

    def _postfix_elide_value(self, elidespec, value):
        """Return postfix elided value if it exceeds the elide length.
        Arguments:
          elidespec, The elide spec field extracted from key
          value, Value obtained from remaing key to maybe be elided
        """
        elidelen, elidetxt = elidespec.split('>')
        elen, vlen  = int(elidelen), len(value)
        if vlen > elen:
            tlen = len(elidetxt)
            return value[:(elen-tlen)] + elidetxt
        return value

    def _prefix_elide_value(self, elidespec, value):
        """Return prefix elided value if it exceeds the elide length.
        Arguments:
          elidespec, The elide spec field extracted from key
          value, Value obtained from remaing key to maybe be elided
        """
        elidelen, elidetxt = elidespec.split('<')
        elen, vlen  = int(elidelen), len(value)
        if vlen > elen:
            tlen = len(elidetxt)
            return elidetxt + value[-(elen-tlen):]
        return value 
```

例如，所有三种格式规范可以组合起来剪裁第一个和最后一个字符的值，将切片居中删除为 10 个字符的值，最后在 12 个字符的字段中右对齐，如下所示：

```
sefmtr = SliceElideFormatter()
data = { 'CNT':'centeredtextvalue' }
fmt = '{CNT|1,-1$10^**:>12}'
print '%r' % sefmtr.format(fmt, *(), **data) 
```

输出：'ente**value'。对于其他可能感兴趣的人。非常感谢。

# mongodb - Mongodb aggregate error

> ID：14072812
> 
> 赞同：1
> 
> 时间：2012-12-28T16:47:16.640
> 
> 标签：mongodb

this is the command and the error generate:

```
db.tweets.aggregate(
    {$project:{'entities.hashtags.text':1}},
    {$unwind:'$entities.hashtags'},
    {$group:{_id:'$entities.hashtags.text'}})

{
    "errmsg" : "exception: aggregation result exceeds maximum document size (16MB)",
    "code" : 16389,
    "ok" : 0
} 
```

i would want to do a follow query:

group by entities.hashtags.text and count the number of document that contains that hashtags for every hashtags taht exist.

this is a part of document:

...

entities: {

```
 media: [

         ...

    ],

    urls: [],

    hashtags: [

        {

            text: "makeuploos",

            indices: [

                54,

                65

            ]

        },

        {

            text: "onbewerkt",

            indices: [

                66,

                76

            ]

        },

        {

            text: "hoer",

            indices: [

                77,

                82

            ]

        }

    ], 
```

...

how can i do this??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:21:12.497

在展开后添加一个`$where`地方并尝试仅匹配相关数据。你只需要许多不同的主题标签，它们不适合 16MB 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T06:07:27.277

从 MongoDB v.2.6 开始，您可以使用选项**allowDiskUse**。例如：

```
 db.tweets.aggregate(
    [
      {$project:{'entities.hashtags.text':1}},
      {$unwind:'$entities.hashtags'},
      {$group:{_id:'$entities.hashtags.text'}}
    ],
    {
      allowDiskUse: true
    }
  ) 
```

这将允许将数据写入临时文件。您可以在此处找到更多信息：http: [//docs.mongodb.org/manual/core/aggregation-pipeline-limits/#agg-memory-restrictions](http://docs.mongodb.org/manual/core/aggregation-pipeline-limits/#agg-memory-restrictions)

# cakephp - 查找具有多个关联 HABTM 类型的一种类型的记录

> ID：14072815
> 
> 赞同：0
> 
> 时间：2012-12-28T16:47:36.063
> 
> 标签：cakephp, model, cakephp-2.0, model-associations

我的 CakePHP 应用程序中有两个模型：`NewsArticle`和`Image`. `Image`与`NewsArticle`使用 HABTM（拥有并属于许多）关联相关联，因此作者可以根据需要为文章建立画廊。

在我的应用程序主页上，我想显示头条新闻，它只是最新发表的文章，至少有一个相关图像。我将如何在我的控制器中形成这种情况？到目前为止，我有：

```
<?php
$topStory = $this->NewsArticle->find('first', array(
    'order' => array(
        'NewsArticle.created' => 'desc'
    )
)); 
```

但我不确定如何“计算”`Image`附加到我的`NewsArticle`模型的记录数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:49:27.707

如果您必须使用 HABTM，则需要进行 JOIN（请参阅[CakePHP Joins](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)）。

原因是，正常`find()`的 s 实际上会进行单独的查询，然后 CakePHP 在将数据返回给您之前将数据放在一起。如果您试图通过子结果的存在来限制主要结果，则需要使用 JOIN。

如果您能够改用 HasMany （意思是`Image`a `belongTo`）`NewsArticle`，您可以使用[CakePHP 的 counterCache](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#countercache-cache-your-count)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:18:37.610

为 HABTM 连接表创建 CakePHP 模型通常是明智的，然后您可以查询该表。

NewsArticle 将有一个名为 news_articles 的表。Image 会有一个名为 images 的表。所以连接表很可能是 news_articles_images。

我建议您使用不同于连接表的别名创建模型。以防出现问题。所以你可以做这样的事情。

```
class Gallery extends AppModel
{
     var $name = 'Gallery';
     var $useTable = 'news_articles_images';
     var $belongsTo = array('NewsArticle','Image');
} 
```

然后在您的控制器中，您可以轻松找到第一篇有图片的文章。

```
$topStory = $this->Gallery->find('first',array('order'=>array('NewsArticle.created'=>'DESC')); 
```

# asp.net - ASP.NET MVC4 会话状态存储用户名

> ID：14072817
> 
> 赞同：5
> 
> 时间：2012-12-28T16:47:42.007
> 
> 标签：asp.net, asp.net-mvc, session

我用 MVC4 创建了我的第一个 uber 小型 webapp。到目前为止，我使用布局的东西来布局 webapp，并添加了一些视图控制器和模型来注册并允许用户登录。

一旦用户登录/注册，我将其用户名存储在会话中。我从会话中读取此属性以确定用户是否已登录。

这是一个坏习惯吗？我读了很多关于 RESTful 和无状态 webapps 的文章。我有点感觉我不应该在我的会话中保存任何东西。

例如

```
@if (string.IsNullOrEmpty(Session["User"] as string))
{
    <dl>
        <dt><a href="/Account/Register">Register</a></dt>
        <dt><a href="/Account/Login">Login</a></dt>
    </dl>
}
else
{
    <dl>
        <dt><a href="/Account/ShowAccount/@Session["User"]">@Session["User"]</a></dt>
        <dt><a href="/Account/Logout">Log out</a></dt>
    </dl>    
} 
```

Q1：这是一种不好的做法吗？

Q2：这是“黑客安全”吗？照原样，破解当前会话并在 Session["User"] 中存储一个值以绕过登录是否容易？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T17:13:04.220

要回答您的问题：

1）一般来说，使用会话状态并不是一个坏习惯，只要您的应用程序需要它并且您了解它对性能和可伸缩性的影响。但是，在您的情况下，如果您只需要存储用户名，那么您真的不需要它，如果您的应用程序使用 ASP.Net 成员资格提供程序，那么此信息可在 MVCController 的 User 属性中获得基类：

```
var username = User.Identity.Name 
```

可以通过三种方式存储会话数据：“InProc”，它存储在应用程序进程中，“StateServer”，它存储在单独的服务器上的输出进程，以及“SQLServer”，它存储在一个SQL 服务器数据库。您应该使用哪一个取决于您是否使用服务器场，您的会话是否需要持久（即在机器重新启动后仍然存在），以及您的应用程序的性能要求是什么（StateServer 和 SQLServer 的性能不如 InProc）。更多信息可以在[这里找到](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)

2) 您应该使用 SSL 来保护您的会话数据。通过 SSL (HTTPS) 发送的数据是完全加密的，包括标头（因此是 cookie）。关于如何防止会话劫持攻击的一个很好的讨论可以[在这里找到。](http://msdn.microsoft.com/en-us/magazine/cc300500.aspx)

# java - 扩展 DTO 对象（Java、Hibernate）的更好解决方案

> ID：14072819
> 
> 赞同：0
> 
> 时间：2012-12-28T16:47:53.757
> 
> 标签：java, hibernate, hibernate-mapping

我使用 EmailAlert bean 作为 DTO 通过 Hibernate 获取数据。所以，我的课程只包含我在 DB 中的字段。但在某些情况下，我需要在 EmailAlert 中添加其他字段来保存中间数据。例如“标题”字段 - 将在 java 端根据用户区域设置、时间等计算。

所以，我有一些变体来解决这个问题。

1.  向 EmailAlert bean 添加附加属性（例如：标题），但不要将其映射到 DB 表的任何字段。缺点：在这种情况下，我们必须不要在 hashCode() 和 equals() 中使用“caption”属性，因为：

    *   它真的没有问题 - 字段仅包含中间数据
    *   我不确定这不是缓存和休眠本身问题的原因。
        我认为拥有 class 的属性但不要在 equals() 和 hashCode() 方法中使用它是非常难看的。
        将来有人可能会对这种逻辑感到困惑。
2.  通过添加“caption”属性将 EmailAlert 扩展为 EmailAlertExt。以及将 EmailAlert 作为参数的构造函数。
    但在这种情况下，我不确定水下石头是否会再次将 EmailAlert 作为 EmailAlertExt bean 存储到 DB 中。

3.  通过添加“caption”属性将 EmailAlert 扩展为 EmailAlertExt2，并引用原始对象。在这种情况下，EmailAlertExt2 的行为与原始 EmailAlert 相同，但我们需要额外的属性。如果我们保存 EmailAlert，我们可以调用 EmailAlertExt2 的 getOriginalValue()，它将返回对原始对象的引用。缺点：编码太多:)

伙计们，这些解决方案中哪个更好？可能有人有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:54:51.777

使用 '@Transient' 它不会映射到 db hibernate 会忽略这个字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:59:12.317

仅仅因为您想将映射字段与非映射字段分开而扩展模型对象并不是一个好主意。一个好的指导方针是问自己一个问题“EmailAlert 和 EmailAlertX 之间有什么区别，我可以清楚地定义我将使用其中一个而不是另一个的情况吗？”。如果你不能清楚地回答这个问题，或者如果你意识到你将*总是*使用你的子类而不是父类，那肯定表明父类应该是抽象的或者你有太多的类。

在您的特定情况下，将映射和非映射属性都放在同一个类上并标记非映射属性以便您的 ORM 提供程序不会尝试处理它们会更有意义。您可以通过将这些属性注释为@Transient 来做到这一点。

```
public class EmailAlert implements Serializable {
   @Id
   private Long id;

   @Column(name = "recipient")
   private String recipient;

   @Transient
   private transient String caption;

   // Constructor, Getters/Setters, etc
} 
```

另外，关于您对 hashcode/equals 方法的评论。您没有也不应该在这些方法中包含 Java Bean 的每个属性。仅包括以下属性：

*   需要唯一标识对象
*   （相当）保证在对象的生命周期内具有相同的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:59:02.530

听起来您目前需要的 EmailAlert 对象是一个业务对象，因为“中间数据”和“在 java 端计算”位。

也许使用 EmailAlertDto 对象来填充 EmailAlertBusiness 的字段并将额外的标题字段和方法存储在业务对象中。

# asp.net-mvc - EF Code First Modelbuilder 在不应该创建唯一标识符的地方

> ID：14072821
> 
> 赞同：1
> 
> 时间：2012-12-28T16:47:55.710
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我有这样的事情：

```
modelBuilder.Entity<TransactionHistory>()
                .HasOptional(history => history.Sender)
                .WithMany()
                .Map(s => s.MapKey("Sender"))
                .WillCascadeOnDelete(false);

modelBuilder.Entity<TransactionHistory>()
                .HasOptional(history => history.Receiver)
                .WithMany()
                .Map(s => s.MapKey("Receiver"))
                .WillCascadeOnDelete(false); 
```

在我的 TransactionHistory 表中，它在 Sender 和 Receiver 列创建唯一标识符。我不希望这些列是唯一的，我该怎么办？

交易历史模型：

```
public class TransactionHistory
    {
        public Account Sender { get; set; }
        public Account Receiver { get; set; }
    } 
```

**编辑：好的。显然，uniqueidentifiers 并非如此。问题是，当我将 transactionhistory 项目添加到数据库中时，出现以下错误：**

> 违反 PRIMARY KEY 约束“PK_dbo.Accounts”。无法在对象“dbo.Accounts”中插入重复键。\r\n语句已终止。

我像这样添加这个项目：

```
context.Transactions.Add(history);
context.savechanges(); 
```

（交易是一个交易历史对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:07:01.280

EF`uniqueidentifier`用作外键的 SQL 列类型，因为主体 (= `Account`s) 的主键是`uniqueidentifier`- 在 C# 中它是`Guid`, like `public Guid AccountId { get; set; }`。

它必须选择这种类型，因为主体和依赖键类型必须在数据库中的外键关系中匹配。

这并不意味着外键列是唯一的（或具有唯一索引）。当然，您可以`uniqueidentifier`多次使用相同的值作为外键列值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:48:21.430

实体框架通过在 DBContext 中存储一堆对象的缓存来工作。即使您的 Account 对象（包括您的 pk）上的所有属性都相同，实体框架也会将此视为一个新对象，除非您提醒它“嘿，您已经知道这一点”。我可以想到两种方法来做到这一点：

```
context.Entry(history.Sender).State = EntityState.Modified; 
context.Entry(history.Receiver).State = EntityState.Modified; 
```

或者

当您在历史记录对象上设置帐户时，请确保它们已附加到您的 dbcontext。

```
var sender = context.Accounts.FirstOfDefault(...your condition here...);
var receiver = context.Accounts.FirstOfDefault(...your condition here...);

history.Sender = sender;
history.Receiver = receiver; 
```

除非您告诉它，否则 EF 也不会加载导航/相关实体。因此，如果您正在编辑历史记录，请确保使用[.Include()](http://msdn.microsoft.com/en-us/library/bb738708.aspx)来拉入相关对象。

希望有帮助。

# web-services - CertificateException: No name matching hostname found Maven

> ID：14072824
> 
> 赞同：0
> 
> 时间：2012-12-28T16:48:00.887
> 
> 标签：web-services, maven, maven-2, wsdl

I have an HTTPS WSDL URL (https://hostname/MyApp/MyApp.svc?wsdl) that needs to be consumed in a Maven project. The certificate on WSDL is expired and is issued to hostname.company.com.

I have following code in Maven pom.xml

```
<dependencies>
    <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <scope>compile</scope>
        <version>2.1.3</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxws-maven-plugin</artifactId>
            <version>1.10</version>
            <executions>
                <execution>
                    <goals>
                        <goal>wsimport</goal>
                    </goals>
                    <configuration>
                        <sourceDestDir>${project.build.directory}/generated-sources/jaxws-wsimport</sourceDestDir>                          
                        <wsdlUrls>
                            <wsdlUrl>https://hostname/MyApp/MyApp.svc?wsdl</wsdlUrl>
                        </wsdlUrls>                           
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

When I do a clean and build, I get following error

```
[jaxws:wsimport]
Processing: https://hostname/MyApp/MyApp.svc?wsdl
jaxws:wsimport args: [-s, C:\WorkspaceNetBeans\Maven\WSTest\target\generated-sources\jaxws-wsimport, -d, C:\WorkspaceNetBeans\Maven\WSTest\target\classes, https://hostname/MyApp/MyApp.svc?wsdl]
parsing WSDL...

java.security.cert.CertificateException: No name matching hostname found

Failed to read the WSDL document: https://hostname/MyApp/MyApp.svc?wsdl, because 1) could not find the document; /2) the document could not be read; 3) the root element of the document is not <wsdl:definitions>. 

failed.noservice=Could not find wsdl:service in the provided WSDL(s): 

 At least one WSDL with at least one service definition needs to be provided.

    Failed to parse the WSDL. 
```

I added the certificate to keystore using keytool utility. What else do I need to do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:08:16.413

您可以从 Web 浏览器本地下载 wsdl，然后在该本地文件上运行 wsimport 以生成您的 Java 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:57:20.457

您有可能的选择：

1) 将服务器的证书导入到信任库中，同时确保服务器证书中显示的 CN 名称与您使用的主机名相同。此链接可能会有所帮助：http://bluefoot.info/howtos/how-to-avoid-java-security-cert-certificateexception-no-name-matching-localhost-found/

2) 使用 Netbeans 或 eclipse 之类的工具，它可以忽略（尽管我对此表示怀疑）服务器的 SSL 方面。

3) 创建一个本地版本的 WSDL，解析所有相关的 XSD 引用并使用该 WSDL。

# java - 从 JAVA 在线调用 Microsoft Dynamics CRM 2011

> ID：14072828
> 
> 赞同：1
> 
> 时间：2012-12-28T16:48:24.177
> 
> 标签：java, dynamics-crm-2011

我正在从 Java 应用程序进行 Dynamics CRM 集成，并且我遵循了 CRM 培训工具包中的示例，并成功地连接并创建了客户和联系人。现在，在创建帐户以及将联系人与帐户连接时，我遇到了一些问题。例如，我无法使用作为选项列表的“address1_freighttermscode”创建帐户。我的代码如下：

```
private static OrganizationServiceStub.Guid createAccount(OrganizationServiceStub serviceStub, String[] args) {
    try {
        OrganizationServiceStub.Create entry = new OrganizationServiceStub.Create();
        OrganizationServiceStub.Entity newEntryInfo = new OrganizationServiceStub.Entity();
        OrganizationServiceStub.AttributeCollection collection = new OrganizationServiceStub.AttributeCollection();
        if (! (args[0].equals("null") )) {
          OrganizationServiceStub.KeyValuePairOfstringanyType values = new OrganizationServiceStub.KeyValuePairOfstringanyType();
          values.setKey("name");
          values.setValue(args[0]);
          collection.addKeyValuePairOfstringanyType(values);
        }
     if (! (args[13].equals("null"))){
          OrganizationServiceStub.KeyValuePairOfstringanyType incoterm = new OrganizationServiceStub.KeyValuePairOfstringanyType();
          incoterm.setKey("address1_freighttermscode");
          incoterm.setValue(args[13]);
          collection.addKeyValuePairOfstringanyType(incoterm);
        }

        newEntryInfo.setAttributes(collection);

        newEntryInfo.setLogicalName("account");

        entry.setEntity(newEntryInfo);

        OrganizationServiceStub.CreateResponse createResponse = serviceStub.create(entry);
        OrganizationServiceStub.Guid createResultGuid = createResponse.getCreateResult();

        System.out.println("New Account GUID: " + createResultGuid.getGuid());

        return createResultGuid;
    } catch (IOrganizationService_Create_OrganizationServiceFaultFault_FaultMessage e) {
        logger.error(e.getMessage());
    } catch (RemoteException e) {
        logger.error(e.getMessage());
    }

    return null;
} 
```

当它执行时，我得到这个错误

```
[ERROR] Incorrect attribute value type System.String 
```

有没有人有关于如何处理选项列表或查找的示例？

要将联系人与帐户联系起来，我正在填写字段`parentcustomerid`以及`parentcustomeridtype`帐户中的 GUID 和“帐户”，但联系人没有与帐户关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:07:08.863

要设置选项列表值，您必须使用 OptionSet，对于查找，您必须使用 EntityReference。请参阅 SDK 的 C# 文档，使用 Axis 生成的 Java 代码应该以相同的方式工作。

```
incoterm.setKey("address1_freighttermscode")   
//assuming the arg is an integer value that matches a picklist value for the attribute    
OptionSetValue freight = new OptionSetValue();
freight.Value = args[13];
incoterm.setValue(freight);    
collection.addKeyValuePairOfstringanyType(incoterm); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T19:21:13.727

我已经有十多年没有使用 Java 了（而且从来没有像 Dynamics 这样的 MS 创作），所以它可能与你喜欢的东西相去甚远。:)

您可以使用 REST Web 服务并直接调用 CRM 创建您的实例。据我所知，这是独立于平台的，只要您可以连接到公开的服务*OrganizationData*就应该可以工作。

# android - android sdk 管理器中的英特尔 x86 atom 系统映像是什么？

> ID：14072832
> 
> 赞同：81
> 
> 时间：2012-12-28T16:48:41.057
> 
> 标签：android

我是 Android 开发的新手。我正在设置开发环境。所以我的问题是，Android SDK 管理器中的 Intel x86 atom 系统映像是什么？我应该安装还是不安装？API 级别 15 和 16 中存在该选项，但 17 中没有。

谢谢。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-28T16:53:02.077

> 所以我的问题是，android sdk 管理器中的英特尔 x86 atom 系统映像是什么？

它是 Android 模拟器的一个版本，可以在 x86 CPU 上原生运行，就像大多数开发机器中的那样。

与 ARM 系统映像相比，它包含 ARM（不是 x86）CPU 指令，因此必须在运行时进行翻译。

> 我应该安装还是不安装？

x86 仿真器映像（如果可用）往往运行得更快。[如文档](http://developer.android.com/tools/devices/emulator.html#accel-vm)中所述，您必须在开发机器上做一些工作才能利用它们。

> 该选项存在于 api 级别 15 和 16 中，但不存在于 17 中。

AFAIK 谷歌依靠英特尔来创建这些图像，而英特尔只在几个 API 级别上这样做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-16T08:17:14.390

x86 Android* 模拟器系统映像使您能够在您的开发机器上运行 Android 模拟器。结合 Android SDK，您可以在基于英特尔架构的虚拟 Android 设备上测试您的 Android 应用程序

> 我是否应该安装这个？

是的，如果您使用的是英特尔处理器。要检查您的英特尔处理器是否支持虚拟化技术 (VT)，请使用[**英特尔处理器识别实用程序**](https://downloadcenter.intel.com/Detail_Desc.aspx?DwnldID=7838)工具。

> 注意：如果您的 CPU 不支持虚拟化技术 (VT)，则无法使用虚拟机加速。

为了安装模拟器图像插件，您可以使用 Android SDK 管理器（推荐方法）：

[**安装指南（推荐方法）**](https://software.intel.com/en-us/articles/intel-atom-x86-image-for-android-kitkat-4-4-installation-instructions-recommended)

或者，您可以下载二进制 zip 文件并解压缩并将包含的目录复制到 Android SDK 安装的附加目录中。（请注意，此方法不允许插件的自动更新）：

[**安装指南（替代/手动方法）**](https://software.intel.com/en-us/articles/intel-atom-x86-image-for-android-4-4-kitkat-installation-instructions-manually)

希望这可以帮助。

# c# - 在 Windows Phone 8 中读取联系人组？

> ID：14072836
> 
> 赞同：3
> 
> 时间：2012-12-28T16:48:59.127
> 
> 标签：c#, windows-phone, windows-phone-8

我已经弄清楚如何使用 Windows Phone 8 获取用户的联系人列表。但是，给定每个联系人，我如何确定该联系人的组？在这种情况下，单个 Contact 对象上似乎没有任何成员感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:03:05.783

经过大量研究，我得出结论，这是不可能的。我运气不好。我什至无法使用 Microsoft 的适用于 Windows Phone 8 的 Live SDK 来做到这一点。

# html - CSS 是否有办法自动设置表格中的列数量？

> ID：14072837
> 
> 赞同：0
> 
> 时间：2012-12-28T16:49:03.740
> 
> 标签：html, css

CSS 是否有办法自动设置表格中（固定宽度）列的数量，以便它们填充它们所在的 div 元素的宽度？

就像，如果你的屏幕很窄，表格布局可能是这样的：

```
. . .
. . .
. . .
. . .
```

但是如果你把它稍微宽一点，表格布局就会变成这样：

```
. . . .
. . . .
. . . .
```

这个用例是用于图片库，但如果有比使用表格更简单、更容易的方法，我会全力以赴。

PS：我试图将 javascript/jquery 的数量保持在最低限度，所以我更喜欢不使用它的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:53:07.187

不是用 a `<table>`，但你可以使用这样的元素：

```
<div id="gallery">
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
  <div>Item 4</div>
  <div>Item 5</div>
  <div>Item 6</div>
  <div>Item 7</div>
  ...
</div> 
```

和CSS：

```
#gallery>div {
  display:inline-block;
  vertical-align:top;
  width:80px;
  height:80px;
} 
```

它们将被视为文本，并相应地换行。由于它们的大小相同，因此结果是一个网格。此外，这意味着您不必拥有可整除的数字。例如，如果您有素数的元素，就不可能用它们制作出合适的表格。但是，在这里，它会为您处理好，就像这句话末尾的单词在最后一行的开头一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:56:40.237

不，但这是响应式照片网格的示例：

**无缝响应照片网格**
[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

# javascript - 使用 Google 地理编码 API 从州/省获取城市/城镇列表

> ID：14072838
> 
> 赞同：0
> 
> 时间：2012-12-28T16:49:03.823
> 
> 标签：javascript, api, geocoding

如何使用 Google Geocoding JS Api 获取某个省内的城镇/城市列表？

我问的原因是因为在注册表单中，用户选择国家，然后显示省份列表，然后单击一个省份，我想显示该省的城镇列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:50:12.130

如前所述，这不是 Google 地理编码 API 的一部分，但是您可以使用城市和城镇及其相关州/省的数据库自行完成。当您的用户选择一个省份时，对您的服务器数据库的简单 AJAX 请求将能够返回城市和城镇。

我找到了美国各州城镇的这个数据库，但我确信大多数国家都有类似的数据库。[http://www.farinspace.com/us-cities-and-state-sql-dump/](http://www.farinspace.com/us-cities-and-state-sql-dump/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:29:41.030

这不是 Geocode API 的功能。它的目标是提供将纬度/经度转换为公认的城市、州/省、国家集的能力，反之亦然在反向地理编码 API 中。

# javascript - CSS3从新位置的角度过渡

> ID：14072841
> 
> 赞同：1
> 
> 时间：2012-12-28T16:49:11.710
> 
> 标签：javascript, jquery, css, css-transitions

有没有办法在几个过渡期间从元素的最后一个位置开始进行角度过渡？

```
div2 {
  transform: translateX(90px);
  transform: translateY(90px);
  transform: translate(110px,110px);
} 
```

[例子](http://jsfiddle.net/5AuhV/)

基本上我想做的是让 div 从“过渡 2”状态的顶部移动 110 像素，从左侧移动 110 像素。

我正在使用 jQuery.Transit 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:04:30.523

你可以这样做：

```
var x = 0; // horizontal base value
var y = 0; // vertical base value

//Transition 1
$('#div2').transition({ x: x = x + 90 });
//Transition 2
$('#div2').transition({ y: y = y + 90 });
//Transition 3
$('#div2').transition({ x: x = x + 110, y: y = y + 110 }); 
```

这样，您就可以在每个阶段增加基值

**编辑**

这是一个例子：http: [//jsfiddle.net/5AuhV/1/](http://jsfiddle.net/5AuhV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:13:05.557

您可以使用 jQuery 的内置增量语法：

```
//Transition 1
$('#div2').transition({ x: "+=" + 90 });
//Transition 2
$('#div2').transition({ y: "+=" + 90 });
//Transition 3
$('#div2').transition({ x: "+=" + 110, y: "+=" + 110 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:14:15.810

也许你应该试试 CSS3 的 transition-delay 属性。我不确定这是否适用于多个转换，但您应该尝试一下。

~~http://www.w3schools.com/cssref/css3_pr_transition-delay.asp~~

[http://www.w3.org/TR/css3-transitions/#transition-delay-property](http://www.w3.org/TR/css3-transitions/#transition-delay-property)

# javascript - 无法在 javascript 中复制对象属性

> ID：14072854
> 
> 赞同：1
> 
> 时间：2012-12-28T16:50:28.887
> 
> 标签：javascript, jquery, oop, object

我有一个 ajax 调用，它收集某些实体的父子依赖项。在成功函数中，我将 ajax 返回的（数据）分配给全局级别的对象。

```
$.ajax(
{
    type: "POST",
    url: 'ajax_handler.php',
    data: {action:'get_dependencies', relation:relation, 'jobs[]':jobs, project:project},
    dataType: 'json',
    async: false, //do not change
    success: function(data)
    {
        for(var key in data)
        {
            if( data.hasOwnProperty(key) )
            {
                //Copy data object to document level existingDependency object
                existingDependency[key] = data[key];
            }
        }
    },
    error: function(xhr)
    {
        alert('error2:'+xhr.responseText);
    }
}); 
```

我将这个 AJAX 称为两次，它在一个函数中。一份给父母，一份给孩子。我认为这条线`existingDependency[key] = data[key];`正在重新分配对象，因此之前的分配丢失了。换句话说，existingDependency 对象不能同时保存 ['parent'] 和 ['child'] 属性。

为了解决这个问题，我做了以下更改，以便existingDependency 拥有这两个属性：

```
success: function(data)
{
    for(var key in data)
    {
        if( data[key].hasOwnProperty(relation) )
        {
            //Copy data object to document level existingDependency object
            existingDependency[key][relation] = data[key][relation];
        }
    }
} 
```

但这根本不起作用。existingDependency 对象为空。以下警报为空。

```
var keys = '';
for(key in existingDependency)
{
    keys += key+'\n';
}

alert(keys); 
```

任何想法为什么这个任务`existingDependency[key][relation] = data[key][relation]`不起作用？data[key][relation] 保存一个数组，如果它有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:18:56.767

使用[扩展](http://api.jquery.com/jQuery.extend/)：

```
$.ajax({
    type: "POST",
    url: 'ajax_handler.php',
    data: {
        action:'get_dependencies', 
        relation:relation, 
        'jobs[]':jobs, 
        project:project
    },
    dataType: 'json',
    async: false, //do not change
    success: function(data) {
        $.extend(true, existingDependency, data);//this will copy/merge "data" into "existingDependency". properties from "data" that also exist in "existingDependency" will be overwritten with those from "data".
    },
    error: function(xhr) {
        alert('error2:'+xhr.responseText);
    }
}); 
```

至于为什么 eD[key] = data[key] 起作用，而 eD[key][relation] = data[key][relation] 不能够运行您的代码并对其进行调试并不难说。但是，如果 eD[key] 还不存在，那么它将无法向其添加“关系”。一个可能的解决方法是：

```
if (!eD.hasOwnProperty(key)){
    eD[key] = {};
}
eD[key][relation] = data[key][relation]; 
```

# sql - SQL Server 2008 - 需要更新 SQL 帮助

> ID：14072855
> 
> 赞同：0
> 
> 时间：2012-12-28T16:50:30.573
> 
> 标签：sql, sql-server-2008, tsql

首先，SQL 是由服务器动态处理的，因此我的`WHERE`子句中的某些项目对您来说可能看起来很奇怪，请忽略这些，因为它们不是问题。

根据我的客户要求，他们需要`UNION`在其他两种情况下更新我的报告（/*没有患者就诊的患者*/）和（/*没有预约的患者*/）。我需要帮助将这两个子集的患者添加到我的最终更新查询中。在目前的状态下，它只是增加了`#Temp`患者，我需要合并额外的患者。

任何帮助是极大的赞赏。

我当前的 SQL 更新 -

```
DECLARE @Inactive INT
DECLARE @Active INT
DECLARE @PatientProfileId INT

SELECT
    @Inactive = MedlistsId
FROM
    Medlists
WHERE
    TableName = 'PatientProfileStatus'
    AND Code = 'I'

SELECT
    @Active = MedlistsId
FROM
    Medlists
WHERE
    TableName = 'PatientProfileStatus'
    AND Code = 'A'

CREATE TABLE #Temp
    (
      PatientName VARCHAR(120) ,
      PatientProfileId INT ,
      RecentId INT ,
      Recent DATETIME
    )

INSERT  INTO #Temp
        SELECT
            dbo.FormatName(pp.Prefix , pp.First , pp.Middle , pp.Last , pp.Suffix) AS Name ,
            pp.PatientProfileId ,
            MAX(pv.PatientVisitId) AS RecentId ,
            MAX(pv.Visit) AS Recent
        FROM
            PatientVisit pv
            INNER JOIN PatientProfile pp ON pv.PatientProfileId = pp.PatientProfileId
                                            AND pp.PatientStatusMId = @Active
        WHERE
            pp.PatientProfileId IN ( SELECT
                                        a.OwnerId
                                     FROM
                                        Appointments a
                                        INNER JOIN PatientProfile pp ON a.OwnerId = pp.PatientProfileId
                                                                        AND a.ApptKind = 1
                                                                        AND pp.PatientStatusMId = @Active
                                     GROUP BY
                                        a.OwnerId ,
                                        a.ApptKind
                                     HAVING
                                        MAX(a.ApptStart) < '07/30/2005' )
        GROUP BY
            dbo.FormatName(pp.Prefix , pp.First , pp.Middle , pp.Last , pp.Suffix) ,
            pp.PatientProfileId
        HAVING
            MAX(pv.Visit) < '07/30/2005' 

/*Patients without a Appointment*/

IF 1 = 1 
    INSERT  INTO #Temp
            SELECT
                dbo.FormatName(pp.Prefix , pp.First , pp.Middle , pp.Last , pp.Suffix) AS Name ,
                pp.PatientProfileId ,
                NULL AS RecentId ,
                NULL AS Recent
            FROM
                PatientProfile pp
                LEFT JOIN ( SELECT * FROM Medlists WHERE TableName = 'PatientProfileStatus' ) ml1 ON pp.PatientStatusMId = ml1.MedlistsId
                LEFT JOIN Appointments a ON a.Ownerid = pp.PatientProfileId
                                            AND a.ApptKind = 1
                LEFT JOIN PatientVisit pv ON a.PatientVisitId = pv.PatientVisitId
            WHERE
                ml1.Code = 'A'
                AND a.ownerid IS NULL
                AND --Filter on Age
                (
                  ((
                     '-1' = '-1'
                     AND '40' = '125'
                   )
                  OR ( CAST(( DATEDIFF(DAY , pp.Birthdate , GETDATE()) / 365.25 ) AS INT) BETWEEN ( '-1' ) AND ( '40' ) ))
                )

/*Patients without a Patient Visit*/

IF 0 = 1 
    INSERT  INTO #Temp
            SELECT
                dbo.FormatName(pp.Prefix , pp.First , pp.Middle , pp.Last , pp.Suffix) AS Name ,
                pp.PatientProfileId ,
                NULL AS RecentId ,
                NULL AS Recent
            FROM
                PatientProfile pp
                LEFT JOIN PatientVisit pv ON pv.PatientProfileid = pp.PatientProfileid
                LEFT JOIN ( SELECT * FROM Medlists WHERE TableName = 'PatientProfileStatus' ) ml1 ON pp.PatientStatusMId = ml1.MedlistsId
            WHERE
                ml1.Code = 'A'
                AND pv.patientprofileid IS NULL
                AND --Filter on Age
                (
                  ((
                     '-1' = '-1'
                     AND '40' = '125'
                   )
                  OR ( CAST(( DATEDIFF(DAY , pp.Birthdate , GETDATE()) / 365.25 ) AS INT) BETWEEN ( '-1' ) AND ( '40' ) ))
                )   

DECLARE curPatient CURSOR FORWARD_ONLY READ_ONLY LOCAL
FOR
    SELECT
        t.PatientProfileId
    FROM
        #Temp t
        JOIN PatientProfile pp ON t.PatientProfileId = pp.PatientProfileId
        JOIN PatientVisit pv ON pp.PatientProfileId = pv.PatientProfileId
                                AND pv.PatientVisitId = t.RecentId
    WHERE
        --Filter on Age
        (
          ((
             '-1' = '-1'
             AND '40' = '125'
           )
          OR ( CAST(( DATEDIFF(DAY , pp.Birthdate , GETDATE()) / 365.25 ) AS INT) BETWEEN ( '-1' ) AND ( '40' ) ))
        )

OPEN curPatient
FETCH NEXT FROM curPatient INTO @PatientProfileId

WHILE @@FETCH_STATUS = 0 
    BEGIN  

        UPDATE
            PatientProfile
        SET 
            PatientStatusMId = @Inactive ,
            pstatus = 'I'
        FROM
            PatientProfile P
            INNER JOIN #Temp t ON t.PatientProfileID = P.PatientProfileID
        WHERE
            p.PatientProfileId = @PatientProfileId 

        FETCH NEXT FROM curPatient INTO @PatientProfileId 
    END 

CLOSE curPatient
DEALLOCATE curPatient   

DROP TABLE #Temp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:02:35.750

这将仅限于有预约的患者

```
LEFT JOIN Appointments a 
       ON a.Ownerid = pp.PatientProfileId
      AND a.ApptKind = 1 
```

这将仅限于访问过的患者

```
LEFT JOIN PatientVisit pv 
       ON pv.PatientProfileid = pp.PatientProfileid 
```

尝试

```
LEFT OUTER JOIN Appointments a 
           ON a.Ownerid = pp.PatientProfileId
          AND a.ApptKind = 1
Where a.Ownerid is null

LEFT OUTER JOIN PatientVisit pv 
       ON pv.PatientProfileid = pp.PatientProfileid
Where pv.PatientProfileid is null 
```

# c - 计算动态数组读取的复杂度

> ID：14072856
> 
> 赞同：-1
> 
> 时间：2012-12-28T16:50:39.560
> 
> 标签：c, arrays, time-complexity

有人知道这个读取动态整数数组的函数的复杂性是什么，当没有足够的空间容纳下一个输入时，它会将数组大小加倍并将其复制到新的更大数组（内存中的地址）中？

我该如何计算呢？

```
void readDynamicArray(int* arr, int& physicalSize, int& logicalSize)
{
    physicalSize=2;
    arr= new int[physicalSize];

    int tmpNum;
    logicalSize=0;
    cin>>tmpNum;

    while (tmpNum!=-1)// stop sign is -1, will help know when to stop reading into the array
    {
        if (logicalSize==physicalSize)
        {
            arr=newArrLoc(arr, physicalSize, logicalSize);
        }
        arr[logicalSize]=tmpNum;
        logicalSize++;
        cin>>tmpNum;
    }
}

int* newArrLoc(int* arr, int& physicalSize, int logicalSize)
{
    int* newArr=new int[physicalSize*=2];
    copyArray(newArr, arr, logicalSize);
    delete[] arr;   
    return newArr;
}

void copyArray (int arr[],int srcArr[] ,int size)
{
    int i;
    for (i=0;i<size;i++)
    {
        arr[i]=srcArr[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:01:49.257

复杂度是`O(number of elements)`。

由于您在每次迭代中将大小增加一个常数因子 2，因此至少有一半的元素最多复制一次，四分之一最多复制两次，八分之一最多复制三次，等等。

这意味着复制元素的总数受限于

```
1/2 + 2/2^2 + 3/2^3 + 4/2^4 + ... = 2 
```

乘以元素总数。

如果您增加一个常数因子`q`，则副本的数量将受限于`q/(q-1)`，因此该策略始终保证`O(max{initial size, number of elements})`复杂性。因子 2 在少量副本（增长因子越大，副本`q`越少）和少量空间开销（如果您在上次调整大小后立即停止添加新元素，则有`(q-1)*number_of_elements`未使用的空间）之间提供了很好的折衷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:25:24.983

1.  由于您的分配大小每次都会翻倍，因此如果您读取 n 个元素，您会分配 lg(n) 次。

2.  在每次分配时，您复制了所有已读取的元素，即上次 n 次复制，n/2 次复制到最后一次，依此类推。因此，您的总副本数为 Sum(2 + 2^2 + 2^3 + ... + n)，其中包含 lg(n) 项。

3.  假设 n 是 2 的幂，并且 m = lg(n)，那么总和是 Sum(i from 0 to m) (2^i)，它以 2^(m+1) 为界。

4.  用 lg(n) 替换 m，即 2^(lg(n) + lg(2)) = 2^(lg(2n)) = 2n，因此复杂度，就你做了多少份而言，是 O( n)。

# java - 将压缩引入远程调用

> ID：14072858
> 
> 赞同：0
> 
> 时间：2012-12-28T16:50:46.917
> 
> 标签：java, jakarta-ee, jboss, ejb, jboss5.x

我有一个调用几个 ejb2/ejb3 bean 的客户端。有些调用会发送大量数据，因此压缩会非常有用。

如何启用/实现远程方法调用的压缩？如果很重要，我会使用 jboss 5.1 和 ejb2/ejb3 bean。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:09:45.170

我可以想到两种方法来做到这一点：

1.  实现您自己的 ServerSocketFactory 并将其连接到您的 RMI 客户端和服务器
2.  使用提供压缩的 VPN 网络接口

老实说，在这种情况下，我会选择#2：当你可以从网络组件中免费获得它时，你不应该做#1 所需的所有工作。它也将比你一起破解的任何东西更可靠和强大。

# c# - 将 LINQ 语句转换为通常的数据服务 URL

> ID：14072860
> 
> 赞同：3
> 
> 时间：2012-12-28T16:50:49.573
> 
> 标签：c#, wcf, linq, url

我想将一个简单的 LINQ 语句翻译成一个 url，我可以在我的网络服务器上使用它来手动生成我的输出。所以我想得到这样的东西

```
http://localhost:6627/WebSite15/NorthwindDataService.svc/Products?$orderby=ProductName 
```

执行如下语句时：

```
Products.Orderby(x => x.ProductName); 
```

这可能吗？我的意思是，一个简单的数据服务开箱即用，但我不想使用这个东西，因为我有特殊要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:57:40.523

我有一个非常相似的问题，我发现了这个[EntitySorter ，它工作得非常好......你也可以](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=66)[在这里](https://stackoverflow.com/questions/2747114/linq-to-entities-dynamic-sorting)看到它的类似实现（查看更高投票的答案，而不是标记的答案）。

它会让你做这种事情：

```
IEntitySorter<Person> sorter = EntitySorter<Person>
    .OrderBy("Address.City")
    .ThenByDescending("Id"); 
```

编辑：顺便说一句，我有一个完全正当的理由使用它（实际上是在模拟服务层中使用它，所以我不关心性能），但值得注意的是 EntitySorter 必须“四处走动”你的 a$$ 到你的肘部”让软搜索工作......我认为这是微软试图说“我们不是故意让这件事变得简单”......也就是说，我认为 EntitySorter 是一个非常优雅的考虑到它在做什么的解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:52:24.157

我现在已经通过 ExpressionVisitor 实现了这一点。奇迹般有效。

# spring - Parametrized BeforeSaveEvent is triggered for every registered listener irrespective of T

> ID：14072862
> 
> 赞同：1
> 
> 时间：2012-12-28T16:50:52.223
> 
> 标签：spring, spring-data-neo4j

I'm trying to generate unique incremented ids for entities. For that purpose I have registered multiple ApplicationListeners for every entity type as:

```
public class Neo4JCustomerSaveListener implements ApplicationListener<BeforeSaveEvent<Customer>> {
    public void onApplicationEvent(BeforeSaveEvent<Customer> event) {
        ...
    }
} 
```

definitions are like:

```
<!-- Listeners -->
<bean id="customerSaveListener" class="c.b.listener.Neo4JCustomerSaveListener" />
<bean id="employeeSaveListener" class="c.b.listener.Neo4JEmployeeSaveListener" />
<bean id="messageSaveListener" class="c.b.listener.Neo4JMessageSaveListener" /> 
```

As seen, `BeforeSaveEvent` is parametrized with `Customer` type. But the thing is, when a save event is about to happen for customer, other listeners are also triggered although tese listeners' `BeforeSaveEvent` is parametrized with different types, such as `Employee` or `Message` (while inheriting from the same `Entity` parent class)

Is this to be expected? And what should be my approach to this problem? First thing coming to mind is to use only one listener and differentiate inside with `instanceOf` `if`s but this seems very ugly.

I'm using neo4j 1.9.M03, spring-data-neo4j 2.1.0.RC4 and spring 3.1.3

# javascript - Iterating over array elements in d3.js to add to button

> ID：14072865
> 
> 赞同：3
> 
> 时间：2012-12-28T16:51:03.040
> 
> 标签：javascript, d3.js

I'm adding a series of buttons to a page with d3js to form a control panel. Within each button I'd like to iterate over some child elements to form an unordered list within the button (longer term this will turn into a drop down with styling and other chicanery).

The code example below is clearly wrong. One doesn't simply walk into mordor, nor do they simply drop a for loop in the middle of an append. I just can't flip my brain over to remember how to get this done. `drilldownValues` is an array containing all the elements I'd like to add as list items. I feel like I'm an `.each` or something away from a eureka moment, but can't make it fit.

In short, the following is wrong, how do I make it right?

```
 .each(function(d,i) {
        var drilldownValues = d.drilldown;
        d3.select(this)
            .append('ul')
                for (var k = 0; k < drilldownValues.length; k++)
                {
                    .append('li')
                    .text(drilldownValues[k]);
                }
    }) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T18:12:51.500

代替循环，使用 d3 的选择。类似的东西

```
d3.select(this).append('ul')
  .selectAll('li').data(d.drilldown).enter()
  .append('li').text(function(d) { return d; }) 
```

# ruby-on-rails - 如何在索引操作中找到多态嵌套资源的父模型？

> ID：14072872
> 
> 赞同：2
> 
> 时间：2012-12-28T16:51:27.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, url-routing

我想确定`index`操作中嵌套资源的父模型。

（**重要提示：**我`index`只询问操作。在所有其他 REST 操作中，找到父模型很简单。在 SO 上也已经回答了几次）

我有这些路线：

```
resources people do
  resources addresses, only: [:index]
end
resources locations do
  resources addresses, only: [:index]
end
resources events do
  resources addresses, only: [:index]
end 
```

在我想要加载父模型的`index`动作中，但是根据匹配的路由，包含父 ID的参数*名称会发生​​变化：*`AddressesController`

 *```
/people/1/addresses     ->  person_id
/locations/1/addresses  ->  location_id
/events/1/addresses     ->  event_id 
```

现在我的`index`操作中有这段丑陋的代码：

```
if params[:person_id]
  parent_id = params[:person_id]
  parent_type = Person
elsif params[:location_id]
  parent_id = params[:location_id]
  parent_type = Location
else params[:event_id]
  parent_id = params[:event_id]
  parent_type = Event
end

@addresses = Address.where(
       addressable_type: parent_type, 
       addressable_id: parent_id) 
```

最困扰我的是，每当我添加新的嵌套路由时，我都必须更新我的控制器。

有没有更好的方法来确定父模型？（除了简单地重构上面的代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:12:44.543

**1 方法：你的情况与 parent_type/parent_id**

```
before_filter :polymorphic_resource

def polymorphic_resource
  request.path_parameters.each do |key, value|
    if key =~ /_id\z/
      resource_name = key.gsub(/_id\z/, "")
      @parent_type = resource_name.classify.constantize
      @parent_id = value
    end
  end
end

@addresses = Address.where(
       addressable_type: @parent_type, 
       addressable_id: @parent_id) 
```

**2方法：推荐**

```
before_filter :polymorphic_resource

def polymorphic_resource
  request.path_parameters.each do |key, value|
    if key =~ /_id\z/
      resource_name = key.gsub(/_id\z/, "")
      @resource = resource_name.classify.constantize.find(value)
    end
  end
end

@addresses = @resource.addresses 
```

**3方法：设置实例变量命名为默认值。针对特定需求...**

```
before_filter :polymorphic_resource

def polymorphic_resource
  request.path_parameters.each do |key, value|
    if key =~ /_id\z/
      resource_name = key.gsub(/_id\z/, "")
      instance_variable_set("@#{resource_name}", resource_name.classify.constantize.find(value))
    end
  end
end

@addresses = ... 
```*

# smtp - What further happens after emails are received on SMTP ? Who Stores the email, is that SMTP?

> ID：14072877
> 
> 赞同：0
> 
> 时间：2012-12-28T16:51:32.600
> 
> 标签：smtp, storage, responsibility

I am developing a customized SMTP server, it is almost complete too. Other SMTP can now contact with my SMTP and I can successfully recive what they send to me. But now I am thinking is it responsibility of SMTP to store the received email OR I will have to pass recived values to any other program that stores these values(such as to,from,data) of recived emails. If so then what is that program ? If not then who will store received values, is that SMTP ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:48:09.060

您编写的是邮件传输代理 (MTA)。将邮件投递到用户邮箱的软件称为邮件投递代理 (MDA)。MDA 可以是 MTA 的一部分（也就是说，您可以在您的服务器中编写知道如何传送到 mbox、maildir 等的代码，例如 Sendmail），或者它可以是一个单独的程序，如 procmail 或邮件投递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:46:48.403

如果您想在 Postfix（恰好是我使用过的唯一 SMTP 服务器）之后为您的自定义 SMTP 服务器建模，Postfix 使用位于 /var/mail 的 mbox 格式的 Postfix-maildrop 将电子邮件存储在文本文件中/[用户名]（在 Ubuntu/Debian 世界中，无论如何，这就是他们居住的地方）。

我在下面列出的另一个线程中找到了更多详细信息： [https ://unix.stackexchange.com/questions/23277/where-does-postfix-store-email](https://unix.stackexchange.com/questions/23277/where-does-postfix-store-email)

Mbox 格式描述： [http ://en.wikipedia.org/wiki/Mbox](http://en.wikipedia.org/wiki/Mbox) [https://www.rfc-editor.org/rfc/rfc4155](https://www.rfc-editor.org/rfc/rfc4155)

# ruby-on-rails - 在 Rails 中 Gemfile 有什么用？

> ID：14072880
> 
> 赞同：51
> 
> 时间：2012-12-28T16:51:53.410
> 
> 标签：ruby-on-rails, ruby, gemfile

`Gemfile`铁轨有什么用？

如何使用`Gemfile`？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-12-28T17:45:38.610

在 Rails 开发过程中，有时您会想要提供一些您需要的功能，但是您不知道该怎么做，或者您不想自己实现它，因为很多才华横溢的开发人员已将工作投入到它的开发中。

您可能需要的这些开发（用户身份验证、消息系统、资产处理程序、地理定位、分页系统、链接到外部服务（如 Amazon AWS）以及最后但并非最不重要的 Rails 本身）称为 Ruby Gems。这些是 ruby​​ 软件包，不一定与 Rails 相关，但由于 Rails 基于 Ruby，98% 的 gem 可用于 Rails webapp 代码。

[在github](http://github.com)中可以找到很多 gem ，但是通过[ruby](http://rubygems.org/) ​​-gems或[ruby](https://www.ruby-toolbox.com/) ​​-toolbox 搜索 gem 更有趣

您`gemfile`是您想要包含在项目中的所有 gem 的列表。它与[bundler](http://gembundler.com/)（也是一个 gem）一起使用来安装、更新、删除和以其他方式管理您使用的 gem。

`gemfile`有另一个目的 - 您可以将 gem 分组到, `:development`, `:test`, `:assets`, `:production`etc 组中，Rails 会知道何时包含这些 gem。例如：

```
group :development, :test do
    gem "rspec-rails"
    gem "factory_girl_rails"
    gem "guard-rspec"
end 
```

请注意，在 Rails 4 上，该`assets`组已被弃用

These gems belong to development environment and the test environment since they are for testing the application. You don't need them available in the production environment (you could, but that will bloat the memory unnecessarily).

So - To use the `gemfile`, simply write the gem you wish to install such as

```
gem 'devise' 
```

make sure to install `bundler` beforehand (in your console/cmd/ssh) with

```
$ gem install bundler 
```

and then write in the console

```
bundle install 
```

you will notice another gemfile appears! `Gemfile.lock` This file, as you will see if you open it with a text reader, lists all your gems with their version and their dependencies. This will come useful when you need to know which versions of the gems you installed.

For more reading on the `Gemfile` - [read on the bundler page](http://gembundler.com/gemfile.html)

for information regarding picking a gem you could start with [this](http://www.railstutors.com/blog/how-to-pick-the-right-ruby-gem)

Good luck and have fun!

* * *

**Ok, so whats this Gemfile.lock that got created?**

Gemfile.lock, as the name suggests is a locking on all the versions of all the gems that got installed. So if Gemfile is what required to be installed, the lock file is what got installed and what version are actually required to get the app up and running.

If you don't have the gems in that specific version (as specified in Gemfile.lock) rails will complain and you will have to either install the missing gems (via `bundle install`) or fix any conflicts manually (I believe bundler will give you some clues on that)

**Some things to know about `Gemfile.lock`**

*   if you accidently delete it, it will get regenerated when you run `bundle install`. If you accidently delete `Gemfile`, you are out of luck.. You should use git :)
*   Heroku doesn't care about Gemfile.lock since it will reinstall all gems. So for Heroku, you *must* set the gem version you want, or Heroku will always install the latest version of gem, which may cause issues
*   Keep the Gemfile.lock in your project so you will always know what version of gems make your app work properly.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-28T17:05:16.243

`Gemfile`s 是[Bundler](http://gembundler.com/)的配置，用于管理应用程序的 Ruby 依赖项。该网站包含大量文档，包括[Gemfile 手册页](http://gembundler.com/v1.2/man/gemfile.5.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-17T12:07:37.023

**Explanation by analogy**

You want to build a car. From scratch. You need to build: a chasis, engine, corroborator, radiator etc.

**Gems allow you to utilise car parts which other people have made before**

Everyone's who's ever built a car has needed the same things.

You needn't reinvent the wheel. Why make your own engine etc when you can get it straight off the shelf? What if you could get one of the best engines around, created by the most talented engineers in the world, without lifting a finger? Are you gonna spend a year trying to make your own?

So basically rather than make everything yourself, you write down a shopping list of all the parts you need:

*   Rolls Royce Engine
*   AutoLive seatbelts
*   Michellin tyres.
*   PIAA Night headlights
*   etc etc.

That my friend, is basically your gem file!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T17:09:42.267

您的系统可以有很多宝石......因此可以有多个版本相同的`gem`.

A`Gemfile`指定当您运行您`gems`的`versions`rails 应用程序时应使用/加载/（如果不存在则安装）的列表。或任何与`bundle exec . .`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T01:44:03.933

Firstly, what is a gem?

According to Wikipedia:

> RubyGems is a package manager for the Ruby programming language that provides a standard format for distributing Ruby programs and libraries

Gemfile

> A Gemfile is a file we create which is used for describing gem dependencies for Ruby programs

Now, in very very simple words:

Gem can be thought of as a library which you can use in your code. Example: [faker gem](https://github.com/stympy/faker)

Your code can use the functionality of `faker` gem to produce fake data.

Now you can list all the gems that your project requires in the gemfile. When you do a bundle install, all the gems in your gemfile are installed for you.

# jsp - 如何在 jasig CAS 中调用注销控制器

> ID：14072885
> 
> 赞同：0
> 
> 时间：2012-12-28T16:52:01.583
> 
> 标签：jsp, cas, jasig

我正在为我的应用程序使用 CAS。我想更改注销控制器中的一些代码。所以请告诉我如何在我的应用程序中调用注销控制器。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:02:34.510

CAS 服务器上的 /logout url 是 CAS logout ：它会破坏 SSO 会话并通过向它们（到 CAS 服务 url）发送 CAS 注销请求来破坏所有应用程序会话。

# javascript - 如何取消超链接点击？

> ID：14072887
> 
> 赞同：0
> 
> 时间：2012-12-28T04:41:14.143
> 
> 标签：javascript, html

我正在为地铁用户构建一个支持离线的 HTML 5 Web 应用程序。通常，地铁上的移动网络非常慢，以至于页面请求需要一分钟或更长时间才能得到响应。如果加载页面需要超过 10 秒，我想为用户提供切换到离线模式的选项。

在将 window.location 设置为新页面之前，我曾尝试使用 javascript setTimeout() 来执行此操作。如果在调用超时函数时页面仍然存在，这意味着页面花费的时间太长，我会通过确认（）对话框提示用户。如果用户点击 OK，我设置 window.location = '/offline'，它是由 appcache 提供的。

这在大多数情况下都很好用，但有时在屏幕上显示确认对话框时，原始超链接的响应会返回。在 iOS 和 Android 上，确认对话框的存在似乎阻止了原始超链接替换页面。然而，在 iOS 上，关闭确认对话框总是会将您带到原始页面，而不是离线页面。

我可能会用页面上类似的浮动 HTML 对话框替换确认对话框，但是如果在对话框启动时页面返回，这根本不会给用户做出响应的更改。

我真正想做的是取消超链接点击。但这似乎是不可能的。

有没有其他方法可以达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:57:17.880

一旦开始导航到另一个页面，旧页面就不需要以任何方式响应，因此它完全可以工作的事实是非标准的并且有点诡异。

您也许可以通过 AJAX 请求新页面，该页面是可取消的（通过`.abort()`或简单地忽略响应）。然后，当它加载时，您可以使用`innerHTML`将整个内容转储到当前页面上。再一次，虽然，这有点狡猾和不可靠（样式表、脚本等可能不起作用）。

总而言之，尝试以这种方式弄乱网络连接将与连接本身一样不可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:01:48.010

您可以用 jQuery 对话框替换您的确认功能。在 jQuery 对话框中，您可以有一个链接 pr 一个将用户引导到离线页面的按钮。如果用户及时点击链接/按钮，用户将被引导到离线页面。

jQuery 对话框示例的链接：http: [//jqueryui.com/dialog/#modal-message](http://jqueryui.com/dialog/#modal-message)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:47:46.623

在 WebKit 浏览器上，您可以使用 window.stop() 取消浏览器正在加载的所有内容。这将导致浏览器终止对下一页的请求（以及任何其他下载图像、javascript、ajax 等的请求）

如果页面最终通过设计加载，我解决了连接缓慢对话框消失的问题。我没有使用对话框，而是将其设置为覆盖在页面中间的功能区，因此当页面响应最终通过时，如果功能区和页面消失，对用户来说就不那么刺耳了。下面的等待选项只会使功能区消失。以下是适用于 Webkit 浏览器的代码：

```
 // This code executes in the click event for a link to forUrl
    clearTimeout(MyApp.slowPageTimeout);
    MyApp.slowPageTimeout = setTimeout('MyApp.slowPageLoadEvent("'+forUrl+'");', 10000);

    slowPageLoadEvent: function(forUrl) {           
        var cachedDocument = myApp.getDocumentByUrl(forUrl);            
        var height = 100;
        var position = window.innerHeight/2+window.scrollY-height/2;
        var slowHttp = "<div id='slow-http-warning'>Slow connection.  <span id='no-wait'>Read offline</span>, or <span id='wait'>wait</span>?</div>";

        if ($("#slow-http-warning").length == 0) {
            $('body').append(slowHttp);                         
        }
        else {
            $('#slow-http-warning').html(slowHttp);                     
        }
        $("#slow-http-warning").css('top', ""+position+"px");
        $("#wait").click(function() {
            $('#slow-http-warning').remove();
        });
        $("#no-wait").click(function() {
            window.stop(); // not supported in IE, but it has an equivalent: document.execCommand("Stop");
            $('#slow-http-warning').remove();
            MyApp.setOffline();  // switch to operating in offline mode
            MyApp.go(cachedDocument); // display page from local storage cache
            return;           
        });
    } 
```

# java - 使堆空间超出内存错误-如何使用 Java 堆内存

> ID：14072893
> 
> 赞同：1
> 
> 时间：2012-12-28T16:52:38.783
> 
> 标签：java, memory-management, memory-leaks, heap-memory

我正在读取一个大小为 2.6GB 的 XML 文件——JVM 的大小为 6GB。

但是我仍然收到堆空间内存不足错误？

我在这里做错了什么......

作为参考，我输出了 JVM 的最大内存和空闲内存属性——

最大内存显示为大约 5.6GB，但可用内存显示为只有 90MB……为什么只有 90MB 显示为空闲，尤其是。当我什至还没有开始任何处理时......我刚刚启动了程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T16:55:45.200

通常，在 Java 中将结构化文本转换为相应的数据结构时，您需要的空间比输入文件的大小要多得多*。*除了字符串所需的空间之外，还有很多与使用的各种数据结构相关的开销。

例如，每个`String`实例有大约 32-40 个字节的额外开销——更不用说每个字符存储在*两个*字节中，这实际上使 ASCII 编码的 XML 的空间需求增加了一倍。

然后，将 String 存储在结构中时会产生额外的开销。例如，为了将`String`实例存储在 a 中，`Map`您将需要大约 16-32 字节的额外开销，具体取决于实现和测量使用情况的方式。

6GB 很可能不足以一次存储解析的 2.6GB XML 文件......

**底线：**

如果您在内存中加载如此大的 XML 文件（例如使用 DOM 解析器），您可能做错了什么。像 SAX 这样的基于流的解析器应该有更温和的要求。

或者考虑将 XML 文件转换为更可用的文件格式，例如嵌入式数据库，甚至是实际的基于服务器的数据库。这将使您能够毫无问题地处理更大的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:57:41.460

您应该避免一次将整个 xml 加载到内存中，而是使用可以处理大量 xml 的专用类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:58:03.917

这里可能存在几个不同的问题。

但对于初学者：

1) 如果您使用的是 64 位操作系统，请*确保*您使用的是 64 位 JVM

2) 确保您的代码尽快关闭您打开的所有资源。

3) 明确设置对已完成的大对象的引用为“null”。

... 和 ...

4) 熟悉[JConsole](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)或[VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)：

*   [http://www.ibm.com/developerworks/library/j-5things7/](http://www.ibm.com/developerworks/library/j-5things7/)

*   [http://visualvm.java.net/api-quickstart.html](http://visualvm.java.net/api-quickstart.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T17:04:29.537

您不能将 2.6 GB 的 XML 图像加载为只有 6 GB 的文档。正如 jhordo 所建议的那样，该比率更有可能是 12 比 1。这是因为每个字节都变成一个 16 位字符，每个标签、属性和值都变成一个至少有 32 个字节开销的字符串。

相反，您应该使用 SAX 或基于事件的解析器逐步处理文件。这样，它只会保留您需要保留的数据。如果您可以一次处理所有内容，则无需保留任何内容。

# javascript - 无法禁用（设置为只读、保护、灰显等）字段

> ID：14072900
> 
> 赞同：0
> 
> 时间：2012-12-28T16:53:11.843
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm-online

我已经运行了这段代码：

```
Xrm.Page.data.entity.attributes.get("subject").setValue("Beep");;
alert(Xrm.Page.ui.controls.get("subject").setDisabled);
Xrm.Page.ui.controls.get("subject").setDisabled(true); 
```

正如预期的那样，我在字段中输入了*Beep文本。*正如预期的那样，警报告诉我方法的内容（据我所知，他们正在做他们应该做的事情）。

但是，控件本身不会被禁用。我究竟做错了什么？

我相信我看到了**一个**不同方法的例子（在*get*和*setDisabled*之间有更多的东西，但经过几个小时的谷歌搜索后，我开始得出结论，我一定是在幻想或幻想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:27:24.083

我使用 getControl 功能，它工作正常。应采用以下形式：

`Xrm.Page.getControl(controlId).setDisabled(disabled);`

请记住，除非您将提交模式设置为“始终”，否则禁用的控件将不会更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T00:16:14.377

您的代码是正确的，所以它应该可以工作。@Daryl 使用的语法是正确的。这两行是等价的。较短的只是缩短另一个的语法糖。所以，你应该使用他的。

```
Xrm.Page.ui.controls.get("subject").setDisabled(true);
Xrm.Page.getControl("subject).setDisabled(true); 
```

如果您发出警报并获取方法的内容，则意味着您正在使用正确的组件和正确的方法。然而，可以这么说，**尽管**调用，控件并没有被禁用。我认为你错了。

这就是我认为会发生的事情。控件被禁用，然后，在您有时间注意到它之前，表单会更新，从而消除您的禁用操作。

请记住，**与字段 data 不同**，被禁用的属性不会存储到数据库中。如果您将字段设计为受保护，它将保持这种状态。但是，如果您在客户端的 JavaScript 代码中设置这样的属性，则外观只会持续到执行页面的重新加载。

因此，如果您需要禁用这些字段，请从 GUI 设计器中启用它们或触发*onLoad*方法为您执行此操作。

# javascript - 神秘的打字稿错误

> ID：14072903
> 
> 赞同：0
> 
> 时间：2012-12-28T16:53:34.873
> 
> 标签：javascript, visual-studio, graphics, raphael, typescript

我正在尝试用 Typescript 和 RaphaelJs 开发一个小游戏。到目前为止，代码很短：

```
/// <reference path="raphael-2.1.d.ts"/>
window.onload = () => {
    var paper: RaphaelPaper = Raphael(10, 50, 500, 500);
    var time: Date =new Date();
    var now = time.getTime();
    var elapsedTime = time.getTime() - now;
    var gameObjects = new GameObject[];
    var robot =new Robot( paper.rect(10, 10, 100, 100));
    robot.elem.attr("fill", "green");
    gameObjects.push(robot);
    while (true) {

        elapsedTime = time.getTime() - now;
        gameObjects.forEach((object) => object.update(elapsedTime));
        //gameObjects.forEach((object) => object.draw(paper));
    }
}

interface GameObject{
    update(time:number);
}

class Robot implements GameObject{
    public x: number;
    public y: number;
    public elem: RaphaelElement;
    constructor(element: RaphaelElement) { 
        this.elem = element;
        this.x = this.elem.attr("x");
        this.y = this.elem.attr("y");
    }
    public update(time: number) {
        this.x += 1;
        this.y += 1;
        this.elem.attr("x", this.x);
        this.elem.attr("x", this.y);
    }
} 
```

当页面完成加载新的 RaphaelPaper 并创建 GameObjects 列表时。每个 GameObject 都需要实现一个方法：update。这个想法是，在游戏过程中创建的每个 RaphaelElement 都存储在 GameObject 的具体实现中，并根据其规范进行更新。

假设敌人是蓝色的小矩形。为了将这些敌人添加到我的游戏中，我将添加一个类 Enemy，它实现了 GameObject 并具有一个特殊的更新方法，可以将敌人移向玩家并检查交叉点。机器人对象只是一个非常简单的例子。

代码对我来说似乎很好，VisualStudio 没有标记任何错误，但是当我尝试运行游戏时，会弹出一条错误消息并通知我：

> 错误 1 ​​命令“tsc --sourcemap "...strategy go\game.ts" "...strategy go\raphael-2.1.d.ts" "...strategy go\app.ts"" 退出代码1\. ...strategy go\strategy go.csproj 85 5 strategy go

我确信这与我的 IDE 设置无关，因为另一个 typescript/raphaelJs 项目效果很好。不幸的是，我无法从错误消息中获得任何有用的信息。

更新：注释掉`gameObjects.forEach((object) => object.update(elapsedTime));`项目后编译没有错误。VisualStudio 说“构建成功”并打开 Chrome。但页面从未完成加载。即使我输入这个，我什至没有看到 html 文件中的文本。

**更新2：** 我用window.setInterval交换了while循环，现在错误消失了，页面加载了。但这不是经典的游戏循环。我想知道为什么一个简单的 while 循环会阻止我的页面加载。这似乎是自相矛盾的，因为 while 循环是在 window.onload 中执行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:37:49.397

我不确定您最初的 TypeScript 错误（在 Visual Studio 中构建项目时，您通常可以通过查看输出窗口来查看错误本身），但至于为什么您的页面会在 while (true) { } 循环期间冻结是因为您创建了一个无限阻塞循环。JavaScript 在单线程进程中运行，因此您的原始循环所做的是阻止窗口中发生其他任何事情。

JavaScript 也在基于队列的系统上执行代码，setInterval(fn, delay) 所做的实际上是将函数添加到队列中，以便在遇到延迟时执行（这也是我们在 JavaScript 中实现异步编程的方式）。因此， setInterval(fn, 0) 实际上并没有立即执行代码（尽管它可能看起来这样做），而是将函数添加到队列的顶部，执行队列中的其他代码，然后执行您的函数当它到达时（因此，如果您正在评估执行时间，取决于代码中发生的一切，您的代码可能不会像您指定的那样在 0ms 执行）。

也正因为如此，如果您试图以一致的帧速率实现游戏循环，则不应依赖 setInterval 函数的“延迟”参数，因为这甚至可能因浏览器而异。如果帧速率一致性在您的游戏中很重要，您应该跟踪自己的时间间隔和已用时间。

# php - 在 joomla 中保存后运行 php 函数/脚本

> ID：14072905
> 
> 赞同：0
> 
> 时间：2012-12-28T16:53:39.247
> 
> 标签：php, joomla, joomla-component

我试图弄清楚如何在 joomla 2.5 中保存项目后立即运行函数/脚本。Joomla 的 MVC 结构对我来说仍然相当复杂，所以我在这里拉头发，试图找出触发此保存事件的位置。另外我想保持代码整洁，所以我在这里寻求帮助。

基本上，一旦项目保存在 joomla 中，我想运行我自己的函数（比如说 emailUser() ）。目前，当触发保存事件时，我无法做“其他事情”。

我在这里使用由组件创建器生成的自定义组件： [http ://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

我听说插件是解决方案，但我找不到有关保存事件以及如何使用插件来执行此操作的任何文档。Joomla 的帮助论坛也没有帮助。所以基本上我需要朝着正确的方向前进。

编辑：我似乎找到了创建保存按钮的工具栏，但这意味着它是通过 joomla 的内部工作方式保存的。它在 view.html.php 文件中。有什么方法可以使用自定义功能来利用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:38:27.337

保存后会说在您的控制器中使用 postSaveHook 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:17:49.253

在组件（管理员/组件）的控制器内部，如何将保存事件重新定义为如下所示：

```
$save =& JToolBarHelper::save('clientscan.save', 'JTOOLBAR_SAVE');
if($save)
{
    JFactory::getMailer();
    //emailing goes here..
} 
```

# javascript - 嵌套折线图的d3js副本

> ID：14072907
> 
> 赞同：0
> 
> 时间：2012-12-28T16:53:41.577
> 
> 标签：javascript, charts, d3.js, graphing

我正在尝试使用 d3js 重新创建下面的图表

[![](../Images/6b9a7ee472e78cc48a779bd5ff74ece2.png)](https://i.stack.imgur.com/y2Lyd.png)

我一直在尝试关注这个问题[D3js - 创建并轻松更新多折线图](https://stackoverflow.com/questions/13689821/d3js-creating-and-easily-updating-a-multi-line-chart)，但我缺少一些似乎与 d3js 文档相关的所有内容都假定的基础知识：

1.  d3js 实际上是如何绘制任何东西的？它实际上在哪里循环遍历数据集？
2.  域和范围，好吧，这是我的错，我需要复习绘图基础知识，但我假设 d3 会处理这个问题，在这个例子中，这实际上是什么意思？

    ```
    var w = 25,
    h = 200;

    var x = d3.scale.linear()
       .domain([0, 1])
       .range([0, w]); 
    ```

这实际上告诉 d3.scale.linear 方法是什么？

3) 最终，我想在给定数据的上方创建从 1 到 100（或更高）的图表，并且 Y 轴随着数字的增加而增加，而 X 轴随着日期的推移而增加。甚至如何在键值对中格式化这些数据？

4) d3 是否像分层一样简单地将所有 JS 指令堆叠起来？这是 1) 的扩展，我真的不明白它是如何渲染任何东西的。关于 SVG 的一些事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:09:41.130

我建议您查看一些[d3 教程](https://github.com/mbostock/d3/wiki/Tutorials)，以更好地了解正在发生的事情。关于您的具体问题，请参见下文。

1.  它从不循环，它通过将数据绑定到（可能不存在的）元素和对更改、新和删除元素的选择（即子集）进行操作来工作。例如，请参阅[本教程](http://mbostock.github.com/d3/tutorial/circle.html)。
2.  这些`d3.scale.*`方法制作图形比例。也就是说，它们将输入值映射到输出值（图表中的坐标）。`d3.scale.linear()`顾名思义，创建一个线性比例。
3.  您可以按照您真正想要的任何方式格式化数据。再次，查看示例教程。
4.  见 1。

# java - 为什么在 servlet 中使用 doGet 或 doPost

> ID：14072912
> 
> 赞同：-3
> 
> 时间：2012-12-28T16:54:12.417
> 
> 标签：java, servlets

为什么我需要 doGet 或 doPost 方法？

我不能在服务方法中写所有东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:59:07.077

> 我不能在服务方法中写所有东西吗？

是的，如果你愿意，你可以；只需在您的子类中覆盖`HttpServlet`的实现`service`，它会根据需要分派到`doPost`、`doGet`等。我不*推荐*它（动词真的是不同的东西，几乎总是需要不同的实现），但你*可以*做到。

没有对设计人员的头脑有一个神奇的看法`HttpServlet`，我只能推测由于不同的动词是完全不同的操作，他们认为将动词自动分派到特定的命名方法会很有帮助。

请注意，如果您覆盖`service`in `HttpServlet`，您可能会发现工具包或扩展无法正常工作（这完全是假设），如果他们希望您使用`doPost`等。

# javascript - 使用 AMD 将 jQuery 和其他第 3 方库作为模块导入 TypeScript

> ID：14072914
> 
> 赞同：11
> 
> 时间：2012-12-28T16:54:26.890
> 
> 标签：javascript, requirejs, typescript, amd

**问题**：有没有办法使用 AMD 支持（通过编译器）将 jquery 导入 TypeScript 模块，以便将 jquery 作为依赖项包含在内？

关键是获取import语句，这使得模块成为define语句中的依赖（见下文）。

```
define(["require", "exports", 'dataservice', 'jquery', 'knockout'], 
    function(require, exports, __ds__, $ , ko) { 
         ...
    }
) 
```

**详细信息**：我想将 jquery（和其他 3rd 方库）作为 TypeScript 模块与 AMD 一起导入。目标是使它们在`require`列表中显示为依赖项。然而，让 TypeScript 做到这一点的唯一方法似乎是有一个`import`语句。并且要进行导入，您需要一个模块来导入。但是......没有 jquery 模块指向。到。

**解决方法**：

1.  我可以参考 main.js 中的 .d.ts 并预加载 jquery 以获得 require.js，但这意味着预加载所有 3rd 方库。不可怕，但也不理想，因为它没有利用我们已经可以用 JavaScript 和 AMD 做的事情。
2.  我可以为每个 3rd 方库创建一个模块并将其包装，但随后我得到类似 $.$ 的东西。更糟糕的是，IMO（并且 Irisk 为每个模块编写了错误的模块代码并且不同步）。

所以现在我只是在 main.js 中预加载 jquery。但同样，但这并不理想。对于没有模块的任何库，如淘汰赛、主干网等，都必须这样做。

有什么更好的建议或我缺少的东西吗？

**更新/澄清：**

我还可以在配置中使用 shims 来实现库之间的依赖关系。但这仍然会预加载第 3 方的。例子：

```
require.config({
    baseUrl: '../',
    paths: {
        'jquery': 'lib/jquery-1.7.2',
        'underscore': 'lib/underscore'
    }, 
    shim: {
        jquery: {
            exports: '$'
        },
        underscore: {
            exports: '_'
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T13:01:17.840

另一种解决方法是使用 requirejs 的类型定义并使用您自己的`require`语句，而不是`import`语句。

这样做的缺点是 TypeScript`import`可以与 AMD 或 CommonJS 一起使用，只需更改编译器，因此您将在程序中结合 requirejs 比使用`import`.

在 绝对类型 上有一个现有[的 requirejs 定义](https://github.com/borisyankov/DefinitelyTyped)。

# delphi - 在 Delphi 上使用 RemObjects 和 COM 对象的内存泄漏

> ID：14072917
> 
> 赞同：0
> 
> 时间：2012-12-28T16:54:41.843
> 
> 标签：delphi, com, memory-leaks, delphi-xe, remobjects

我有一个使用 RemObjects SDK 在 Delphi XE 上创建的 web 服务，并且发布了一个函数来完成他的工作需要使用 com 对象（特别是使用 DMO 连接到数据库的 Ado 连接）。我发现当我多次调用此函数时，使用 Web 服务的内存会急剧增加。

内存泄漏的原因是为 com 对象保留的内存永远不会释放。

我必须做些什么来解决这个问题？

谢谢

代码：

```
constructor TA.Create;
begin
    inherited Create;
    oServer := CoSQLServer.Create;
end;

destructor TA.Destroy;
begin
   oServer := nil;
end; 
```

宣言

```
class function CoSQLServer.Create: _SQLServer;
begin
    Result := CreateComObject(CLASS_SQLServer) as _SQLServer;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:08:56.267

在您显示的代码中，我们唯一可以批评的是您的析构函数：

```
destructor TA.Destroy;
begin
  oServer := nil;
end; 
```

分配`nil`给`oServer`相当没有意义（尽管无害），因为这会自动发生。

但是这里缺少的是对继承的析构函数的调用。所以，你的析构函数应该是这样的：

```
destructor TA.Destroy;
begin
  oServer := nil;
  inherited;
end; 
```

现在，如果您决定删除`oServer`then 的终结，您可以简单地从您的类中删除析构函数并依赖基类的析构函数。

但是，您似乎确实在使用无效工具测量内存泄漏。您无法使用任务管理器测量内存泄漏。使用 FastMM 检漏仪。

# python - 二次求解器中的舍入误差

> ID：14072921
> 
> 赞同：0
> 
> 时间：2012-12-28T16:55:06.103
> 
> 标签：python, rounding, equation, solver, quadratic

我对python很陌生，正在尝试编写一些代码来解决给定的二次函数。我在浮点数的舍入误差方面遇到了一些麻烦，我想是因为我将两个非常大但差异非常小的数字相除。（另外我假设所有输入现在都有真正的解决方案。）我已经放置了两个不同版本的二次方程来说明我的问题。它适用于大多数输入，但是当我尝试`a = .001`,时`b = 1000`，`c = .001`我得到两个有显着差异的答案。这是我的代码：

```
from math import sqrt

a = float(input("Enter a: "))
b = float(input("Enter b: "))
c = float(input("Enter c: "))

xp = (-b+sqrt(b**2-4*a*c))/(2*a)
xn = (-b-sqrt(b**2-4*a*c))/(2*a)

print("The solutions are: x = ",xn,", ",xp,sep = '')

xp = (2*c)/(-b-sqrt(b**2-4*a*c))
xn = (2*c)/(-b+sqrt(b**2-4*a*c))

print("The solutions are: x = ",xn,", ",xp,sep = '') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:00:37.007

我不是数学领域的专家，但我相信你应该使用 numpy（数学的 py 模块），由于计算机上的内部数字表示，你的微积分与真正的数学不匹配。（浮点运算）

[http://docs.python.org/2/tutorial/floatingpoint.html](http://docs.python.org/2/tutorial/floatingpoint.html)

检查这几乎是你想要的。

[http://www.annigeri.in/2012/02/python-class-for-quadratic-equations.html](http://www.annigeri.in/2012/02/python-class-for-quadratic-equations.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:06:38.603

要使用浮点获得更精确的结果，请注意*不要*减去相似的数量。对于二次方程`x^2 + a x + b = 0`，你知道根`x1`和`x2`使

```
b = x1 * x2 
```

计算绝对值较大的一个，并从这个关系中得到另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:25:34.480

# **解决方案：**

**用户 dhunter 建议的Numpy**通常是 Python 中数学的最佳解决方案。numpy 库能够在许多不同领域进行快速准确的数学运算。

**python 2.4 中添加了**十进制数据类型** 只需添加：**

 **```
from decimal import * 
```

到代码的顶部，然后用单词 Decimal 替换单词 float 的所有实例（注意大写的“D”。）

例如：`Decimal(1.1047262519)`相对于`float(1.1047262519)`

## 理论：

浮点运算基于二进制数学，因此并不总是用户所期望的。对浮动 Vs 的出色描述。十进制类型位于[此处](http://docs.python.org/2/library/decimal.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:53:47.237

您应该处理以下特殊情况：

1.  a == 0 表示一个线性方程和一个根：`x = -c/b`
2.  b == 0 表示 x1, x2 = ±sqrt(-c/a) 形式的两个根
3.  c == 0 表示两个根，但其中一个是零：`x*(ax+b) = 0`
4.  如果判别式为负，则有两个复共轭根。

我建议以这种方式计算判别式：

```
discriminant = b*sqrt(1.0-4.0*a*c/b) 
```

我还建议阅读以下内容：

[https://math.stackexchange.com/questions/187242/quadratic-equation-error](https://math.stackexchange.com/questions/187242/quadratic-equation-error)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T17:58:49.547

前面提到的[numpy](http://docs.scipy.org/doc/numpy/reference/)模块与问题中提到的舍入误差并不是特别相关。另一方面，可以以蛮力方式使用[小数模块来获得准确的计算。](http://docs.python.org/2/library/decimal.html#module-decimal)以下来自 ipython 解释器会话的片段说明了它的用法（默认为 28 位精度），并且还显示了相应的浮点计算只有 5 个小数位的精度。

```
In [180]: from decimal import Decimal
In [181]: a=Decimal('0.001'); b=Decimal('1000'); c=Decimal('0.001')
In [182]: (b*b - 4*a*c).sqrt()
Out[182]: Decimal('999.9999999979999999999980000')
In [183]: b-(b*b - 4*a*c).sqrt()
Out[183]: Decimal('2.0000000000020000E-9')
In [184]: a = .001; b = 1000; c = .001
In [185]: math.sqrt(b*b - 4*a*c)
Out[185]: 999.999999998
In [186]: b-math.sqrt(b*b - 4*a*c)
Out[186]: 1.999978849198669e-09
In [187]: 2*a*c/b
Out[187]: 1.9999999999999997e-09 
```

`4ac`与 相比，平方根的[泰勒级数](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Taylor_series)`b**2`提供了另一种使用方法。在这种情况下，`√(b*b-4*a*c) ≈ b - 4*a*c/(2*b)`，从哪里来`b - √(b*b-4*a*c) ≈ 2*a*c/b`。从上面的行 [187] 条目中可以看出，泰勒级数计算在使用浮点而不是小数时给出了 12 位精确的结果。使用另一个泰勒级数项可能会增加几位数的准确性。**

# python - 尝试使用 django-notifications 发送通知时出现 IntegrityError

> ID：14072922
> 
> 赞同：0
> 
> 时间：2012-12-28T16:55:09.440
> 
> 标签：python, django, django-notification

我已经[`django-notifications`](https://github.com/brantyoung/django-notifications)通过 pip 安装，将应用程序添加到我的`INSTALLED_APPS`：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    ...
    'notifications',
    ...
) 
```

更新了我的 URLConf：

```
import notifications

urlpatterns = patterns('',
    ...
    ('^inbox/notifications/', include(notifications.urls), namespace='notifications'),
    ...
) 
```

由于我已经`south`安装，我迁移架构：

```
$ python manage.py migrate notifications
...
...

$ python manage.py migrate --list

 notifications
  (*) 0001_initial
  (*) 0002_auto__add_field_notification_data
  (*) 0003_auto__add_field_notification_unread
  (*) 0004_convert_readed_to_unread
  (*) 0005_auto__del_field_notification_readed
  (*) 0006_auto__add_field_notification_level

 ... 
```

现在，我正在尝试通过 Django shell 手动创建通知，但我得到了一个`IntegrityError`：

```
[1]: from django.contrib.auth.models import User

[2]: from notifications import notify

[3]: recipient = User.objects.get(username="admin")

[4]: sender = User.objects.get(username="guest")

[5]: notify.send(sender, verb='A test', recipient=recipient)
...
...
...
IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails (`myapp`.`notifications_notification`, CONSTRAINT `recipient_id_refs_id_5c79cb54` FOREIGN KEY (`recipient_id`) REFERENCES `auth_user` (`id`))') 
```

这是怎么回事？两者，都`recipient`属于`sender`表`auth_user`。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:23:51.160

好的，我发现了问题。出于某种原因`south`，默认使用 InnoDB 存储引擎，而我所有的表都默认使用 MyISAM。这就是我修复它的方法：

1.  删除表`notifications_notification`
2.  `notifications`删除on table的所有条目，`south_migrationhistory`以便`notifications`稍后再次迁移
3.  添加[`STORAGE_ENGINE`](http://south.readthedocs.org/en/latest/settings.html#mysql-storage-engine)到我的数据库设置：

    ```
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql',
            'NAME': 'database',       
            'USER': 'user',           
            'PASSWORD': 'pass',       
            'HOST': '',               
            'PORT': '',               
            'STORAGE_ENGINE': 'MyISAM',
        }
    } 
    ```

4.  最后，再次迁移`notifications`：

    ```
    $ python manage.py migrate notifications 
    ```

# apache - WAMP / Xamp Apache 服务器未启动

> ID：14072923
> 
> 赞同：2
> 
> 时间：2012-12-28T16:55:14.040
> 
> 标签：apache, xampp, wamp, wampserver

前几天我的 Wamp 服务器停止启动（服务器无法启动）。我卸载、重新安装等。我将计算机恢复到 4 天后运行良好。然后我运行 Xampp 服务器并遇到了完全相同的问题。对我来说，这表明存在 Windows 问题。`HTTPD.exe`每次启动都会崩溃。我已经关闭了防火墙和防病毒软件，但无济于事。

跑`netstat -o`进来`cmd`给了我`127.0.0.1:31595`和更高的端口。端口 80 未使用且已清除。

**在服务**（wampapache）中，当我尝试启动我得到的服务时

> 错误 1058，“无法启用该服务，因为它已被禁用或没有启用的设备”。

**Apache日志**给了我

> [mpm_winnt:error] [pid 10764:tid 2012] (OS 10022)提供的参数无效。: AH00332: winnt_accept: 在侦听套接字上出现getsockname 错误，IPv6 可用吗？

**事件查看器**给了我这个

> 错误应用程序名称：httpd.exe，版本：2.4.3.0，时间戳：0x502f70a3
> 错误模块名称：nvLsp.dll，版本：2.2.0.7316，时间戳：0x4a80a5fd
> 异常代码：0xc00000fd
> 错误偏移量：0x0000c257
> 错误进程 id：0x2390
> 错误应用程序启动时间：0x01cde46e3fdd7d20
> 错误应用程序路径：C:\xampp\apache\bin\httpd.exe 错误模块路径：C:\Program Files\NVIDIA Corporation\NetworkAccessManager\bin32\nvLsp.dll
> 报告 ID：7eee3b80-5061-11e2- 886a-00248c1defca

这是 Win 7 家庭高级版，Wamp 是 64 位，Xampp 是 32 位。两者以前都工作过。我在这里阅读了其他主题，但它们主要适用于 XP。

编辑如果进入 Nvidia 网络控制器并禁用第一个数据包，我会做一件事。这让 Xampp（部分地，服务器将保持绿色但仍然没有 localhost）工作但不是 Wamp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:33:45.240

很多时候skype/gtalk桌面版是80端口繁忙的原因。由于某种原因，这不会出现在 netstat 上，但请尝试退出此类程序并重新启动您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T12:56:39.933

我遇到过同样的问题。原来，Apache服务由于某种原因被禁用。

要修复它，请运行命令`services.msc`并将 Apache 设置为启用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:27:19.503

尝试“以管理员身份运行”。我猜在windows7的某个地方，这些设置以某种方式损坏了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-31T18:18:05.573

作为记录，这帮助我解决了这个问题：

*   检查您是否可以将 apache 作为程序而不是服务启动，而是通过命令提示符启动！ `httpd`或`httpd -e debug`所有可能的错误和调试消息如果它无法启动，它可能会告诉你原因（例如 php 或 apache 配置错误）
*   如果仍然不行，则通过命令提示符将其作为服务*安装并运行，看看是否还有其他问题。
    `httpd -k install` 并 `httpd -k start`
    检查命令提示符、error.log 和 Windows 系统事件查看器（Windows 日志/系统）的输出

对我来说，这让我了解到我的 httpd.conf 中有错误。过了一会儿，我发现它与我的别名目录有关，可能是权限。更改文件夹的权限并没有太大帮助（可能是公元前。我不知道默认服务使用哪个用户），但是更改服务以以我的用户（即管理员）身份登录确实有效。

**如果您有 xampp 或 wamp，请稍后删除此服务，否则您将有双重输入。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-06T16:29:46.160

我曾经在 Windows 8 for wamp server 上遇到过这个问题。但我确实得到了解决方案。

1.  首先按键盘上的 windows + R 键
2.  然后输入 services.msc
3.  搜索和定位 wampapache
4.  右键单击并选择属性
5.  将启动类型从手动更改为自动
6.  单击应用并确定
7.  对 wampmysqld 做同样的事情

# python - 正则表达式多次拆分

> ID：14072924
> 
> 赞同：0
> 
> 时间：2012-12-28T16:55:14.923
> 
> 标签：python, regex, python-3.x

我写了这个正则表达式（在 python 3 中）：`(?<![\u0410-\u042F])([.!?])(?=(\s)?(\s)?[\u0410-\u042F]|[\u04E8]|["]|[\u201C]|![0-9])`

我用python的`re.split()`

它用西里尔文分割句子。它们由 分隔`\n`。所以它应该拆分这个：

```
Мамлекеттик айыптоочу Биринчи май райондук сотуна берген бул сунушун диний кастыкты ырбатпоо аракети менен негиздеди. Мусулмандарга акаарат келтирип жатат деген кайрылуу каттын негизинде УКМК Тезекбаевге каршы кылмыш ишин козгоп, сотко өткөргөн. Бул ишти бүгүн Биринчи май райондук соту карап бүттү жана өкүм эртең чыгарыларын маалымдады. 
```

分隔句子：

```
Мамлекеттик айыптоочу Биринчи май райондук сотуна берген бул сунушун диний кастыкты ырбатпоо аракети менен негиздеди.
Мусулмандарга акаарат келтирип жатат деген кайрылуу каттын негизинде УКМК Тезекбаевге каршы кылмыш ишин козгоп, сотко өткөргөн.
Бул ишти бүгүн Биринчи май райондук соту карап бүттү жана өкүм эртең чыгарыларын маалымдады. 
```

但由于某种原因，句号（最后一个字符）换了一行！！除了最后一个。

我看到他们说不要放`"()"`，`[.!?]`但如果我这样做，标点符号就会被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:21:25.373

最简单的方法是将捕获的标点符号重新附加到列表中的前一个元素上：

```
example = 'Мамлекеттик айыптоочу Биринчи май райондук сотуна берген бул сунушун диний кастыкты ырбатпоо аракети менен негиздеди. Мусулмандарга акаарат келтирип жатат деген кайрылуу каттын негизинде УКМК Тезекбаевге каршы кылмыш ишин козгоп, сотко өткөргөн. Бул ишти бүгүн Биринчи май райондук соту карап бүттү жана өкүм эртең чыгарыларын маалымдады.'

def reattach(sentences):
    punctuation = ('.', '!', '?')
    previous = ''
    for sentence in sentences:
        if sentence not in punctuation:
            previous = sentence
        else:
            yield previous + sentence
            previous = ''
    if previous:
        yield previous

punctuation = re.compile('(?<![\u0410-\u042F])([.!?])(?=(\s)?(\s)?[\u0410-\u042F]|[\u04E8]|["]|[\u201C]|![0-9])')
for sentence in reattach(punctuation.split(example)):
    print(sentence) 
```

在您的示例输入上运行该方法会给我：

```
Мамлекеттик айыптоочу Биринчи май райондук сотуна берген бул сунушун диний кастыкты ырбатпоо аракети менен негиздеди.
 Мусулмандарга акаарат келтирип жатат деген кайрылуу каттын негизинде УКМК Тезекбаевге каршы кылмыш ишин козгоп, сотко өткөргөн.
 Бул ишти бүгүн Биринчи май райондук соту карап бүттү жана өкүм эртең чыгарыларын маалымдады. 
```

# ios - iOS UIPanGestureRecognizer 防止滚动

> ID：14072932
> 
> 赞同：3
> 
> 时间：2012-12-28T16:55:42.690
> 
> 标签：ios, uigesturerecognizer

我正在使用平移手势识别器覆盖我的水平图像 UIScrollView 以检测用户滑动。

```
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureCaptured)];
[imgHorizontalScrollView addGestureRecognizer:panGesture]; 
```

我的问题是：有没有办法让我在 panGestureCaptured 方法中将 imgHorizo​​ntalScrollView 的平移手势识别器重置为默认值？我问的原因是因为我覆盖了这个手势，一旦用户滑动并拿起手势，我就不能再在滚动视图中滚动。我还尝试删除手势，但这也阻止了我滚动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T16:59:14.840

尝试`UIGestureRecognizerDelegate` `gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`使用scrollView的gestureRecognizer得到`panGestureRecognizer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:57:49.007

尝试设置

```
panGesture.cancelsTouchesInView = NO; 
```

如果这不起作用，您应该找到一种方法将您的手势处理程序更改为`scrollViewDidScroll:`委托方法

# linux - Linux 在 USB 上写入原始字节

> ID：14072939
> 
> 赞同：0
> 
> 时间：2012-12-28T16:56:26.890
> 
> 标签：linux, usb, byte

我已将 USB 电缆插入计算机，其中 D+ 和 D- 引脚连接到万用表。我想发送一些原始字节以获得一些电压..有可能吗？

我 99% 确定我插入的 USB 端口类似于 /dev/bus/usb/002

我知道有可能对 LPT 或 RS232 端口做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:18:54.073

RS232 和 LPT 不是总线！USB 设备需要被寻址才能变得可访问。

也许卸载并重新加载驱动您的 USB 主机的 USB 驱动程序......或尝试在 USB 集线器主机上进行重置......

为了在usb端口上进行这种操作，你必须打破usb内核驱动程序并鞭打所有寻址操作来直接寻址芯片组......

总之，由于 USB 的概念，我不确定您是否可以成功地保持插座上的某些电源状态。

为了玩这种物理 IO，有两个解决方案：

安装低成本 RS-232 <-> USB 适配器

或更好

购买用于原型设计和开发的[Arduino](http://www.arduino.cc/)微控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:01:26.417

我几乎 100% 确定，除非您在另一端确实有设备，否则您无法通过 USB 线发送任何内容。如果你仍然想玩这个，买一个便宜的记忆棒，把它的外壳拆开[不要太粗略]，然后在向记忆棒传输大文件的同时测量，或者类似的。

但我不确定你的万用表会显示多少，因为与 USB 速率相比，它们往往有点慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T22:59:37.550

USB使用数据线上的上拉/下拉电阻来检测端口是否连接（设备端1.5k上拉至3.3v，主机端IIRC下拉15k）。确切的连接取决于设备速度。

因此，如果您连接适当的电阻器，主机应尝试开始发出信号。由于数据速率的原因，您可能无法在万用表上看到它；示波器会更合适。

如果您想绕过普通的 USB 协议并只是盲目地发送数据，我认为您需要亲自动手编写代码来绕过通常的设备驱动程序并直接访问 USB 硬件。即便如此，我也不确定有什么可能——USB 硬件比优秀的 LPT 和 RS232 端口更智能，这可能会妨碍做这种低级的事情。

# java - 线程绘制方法

> ID：14072940
> 
> 赞同：4
> 
> 时间：2012-12-28T16:56:27.587
> 
> 标签：java, multithreading, swing, paintcomponent, event-dispatch-thread

我想知道如何线程化以下代码，或者只是一般的方法：

```
public void run (){

    public void paint(Graphics g) {
        g.fillRect(20, 20, 20, 20);
        for (int i = 20; i < 1000; i++) {
            g.fillRect(20, i, 20, 20);
            Thread.sleep(10);
        }
    }
} 
```

我发现我无法创建此代码的线程，因为我得到了一个非法的表达式开始错误，这是公平的，但我看不到解决方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T17:00:34.240

很难说你在做什么，

但似乎您正试图从其方法中覆盖`paint()`a 。`Runnable``run()`

这肯定是做不到的。

逻辑是

*   取一个组件
*   覆盖它的paint方法来绘制我们需要的东西
*   调用方法来更新矩形的坐标（或者在这种情况下计时器会这样做）
*   比调用`repaint()`组件，因此可以再次调用paint方法并使用其新坐标重新绘制矩形（定时器也会在更改矩形坐标后负责重新绘制）
*   根据需要/想要多次重复最后 2 个步骤

（当我说*组件*时，我实际上是指`JPanel`，*paint 方法*是指覆盖`paintComponent(..)`的，`JPanel`因为这是最佳实践。）

**一些建议：**

1）不要覆盖`paint`而不是使用`JPanel`和覆盖`paintComponent`。

2）不要忘记尊重*油漆链*并调用`super.XXX`覆盖`paintComponent(Graphics g)`（或任何覆盖该事实的方法）的实现，除非故意将其排除在外。IE

```
class MyPanel extends JPanel {
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

         //do drawings here
    }
} 
```

3) 如果在其中绘图，`paintComponent`通常需要覆盖`getPreferredSize()`并返回`Dimension`适合 的内容/绘图的 s `JPanel`，即：

```
class MyPanel extends JPanel {
    @Override
    public Dimension getPreferredSize() {
         return new Dimension(300,300);
    }
} 
```

3) 查看[`Swing Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)而不是`Thread.sleep(..)`as`sleep`会阻塞 GUI 线程并使其看起来被冻结。IE

```
Timer t = new Timer(10, new AbstractAction() {
    int count = 20;
    @Override
    public void actionPerformed(ActionEvent ae) {
        if (count < 1000) {
            //increment rectangles y position
            //now repaint container so we can see changes in co-ordinates (unless you have a timer which repaints for you too)
            count++;
        } else {//counter is at 1000 stop the timer
            ((Timer) ae.getSource()).stop();
        }
    }
});
t.start(); 
```

4) 另一种选择（因为我现在看到您只是将 a`Rectangle`不是 Swing 组件移动）到 Swing timer is [`TimerTask`](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)，只要不会从其方法中创建/操作任何 Swing 组件（`run()`如`TimerTask`不像 Swing Timer 那样在 EDT 上运行）。注意`revalidate()`和`repaint()`是*线程安全的*，因此可以在`TimerTask`.

上述优点是保留了 EDT 的不必要代码（即通过更改坐标移动 AWT 矩形），即

```
 final TimerTask tt = new TimerTask() {
        @Override
        public void run() {
            if (count < 1000) {
               //increment rectangles y position
                //now repaint container so we can see changes in co-ordinates (unless you have a timer which repaints for you too)
            count++;
            } else {//counter is at 1000 stop the timer
                cancel();
            }
        }
    };

    new Timer().scheduleAtFixedRate(tt, 0, 10);//start in 0milis and call run every 10 milis 
```

# multithreading - 如何在多线程中，递归调用函数

> ID：14072941
> 
> 赞同：1
> 
> 时间：2012-12-28T16:56:38.770
> 
> 标签：multithreading, delphi, synchronization, delphi-xe3

我写了一个函数来递归搜索与表单上的对象关联的文件，我在一个单独的线程中运行这个函数，所以 UI 线程不是问题。

我如何使用 Synchronize，调用具有参数的函数？

递归函数是否调用了 Synchronize 命令，我有合理的正确性？

同步模式是否有相同的返回所有调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:42:01.667

您可以使用匿名方法进行调用：

```
procedure TMyThread.Execute;
var
  MyParameter: Integer;
begin
  MyParameter := 42;
  Synchronize(
    procedure
    begin
      MethodWithParameter(MyParameter);
    end
    );
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:26:43.667

您可以执行以下操作：

```
...
FMyValue := Xyz;
Synchronize(MyProc);
...

Procedure TMyThread.MyProc;
begin
  VclProc(FMyValue)
end; 
```

# c# - 在可以修改的类上使用扩展方法是否可以接受

> ID：14072945
> 
> 赞同：9
> 
> 时间：2012-12-28T16:56:57.070
> 
> 标签：c#, .net, design-patterns, extension-methods

我最近一直在玩弄使用扩展方法在我控制的类上实现帮助实用程序的想法（即，在同一个程序中并且我可以修改）。其背后的基本原理是，很多时候，这些辅助实用程序用于非常特定的场景，并且不需要访问类的内部值。

例如，假设我有一个 StackExchange 类。它会有类似`PostQuestion`and`Search`和的方法`AnswerQuestion`。

现在，如果我想手动计算我的声誉以确保 StackOverflow 没有欺骗我怎么办。我会按照以下方式实施一些事情：

```
int rep=0;
foreach(var post in StackExchangeInstance.MyPosts)
{
  rep+=post.RepEarned;
} 
```

我可以向 StackExchange 类添加一个方法，但它不需要任何内部结构，而且它仅用于程序的一两个其他部分。

现在想象一下，如果您有 10 或 20 个这些特定的辅助方法。在某些情况下肯定有用，但绝对不适用于一般情况。我的想法正在改变类似的东西

```
public static RepCalcHelpers
{
  public static int CalcRep(StackExchange inst){ ... }
} 
```

像这样的东西

```
namespace Mynamespace.Extensions.RepCalculations
{
  public static RepCalcExtensions
  {
    public static int CalcRep(this Stackexchange inst){...}
  }
} 
```

注意命名空间。理想情况下，我会使用它来对特定场景中的扩展方法进行分组。例如，“RepCalculations”、“Statistics”等。

我已经尝试搜索是否听说过这种类型的模式，并且没有发现任何扩展方法被用于任何东西的证据，除了你不能修改的类。

这种“模式”有哪些不足之处？我应该坚持继承或组合，还是只是一个很好的静态帮助类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:05:22.093

我会阅读关于扩展方法的框架设计指南部分。[这](http://blogs.msdn.com/b/brada/archive/2009/01/12/framework-design-guidelines-extension-methods.aspx)是第二版的一位作者的帖子。您描述的用例（专门的辅助方法）被 Phil Haack 引用为扩展方法的有效用途，其缺点是需要额外的 API 知识才能找到那些“隐藏”方法。

在那篇文章中没有提到但在书中推荐的是扩展方法进入与扩展类不同的命名空间。否则，它们将始终以智能感知出现，并且无法关闭它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:14:58.937

我想我在其他地方看到过这种模式。它可能很混乱，但也很强大。这样，您可以在库中提供一个类，并在单独的命名空间中提供一组扩展方法。然后，使用您的库的任何人都可以选择使用您的扩展方法导入命名空间或提供他们自己的扩展方法。

如果您有一些仅用于单元测试的扩展方法（例如，比较两个对象是否相等，那么您只需要进行单元测试）是这种模式的一个很好的候选者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:15:10.913

您似乎在比较扩展方法等效于公共实例方法。真的不是。

扩展方法只是一个公共静态实用程序方法，恰好具有更方便的调用语法。

所以首先我们要问自己，这个方法是类本身的实例方法合适，还是外部类的静态方法更合适。很少有类的用户需要这个功能，因为它是高度本地化的，而不是类本身执行的真正行为，而是外部实体在类上执行的行为，这意味着它适合静态。`User`主要缺点是，如果有人有 a并且想要重新计算他​​们的代表，那么这种行为可能更难找到。现在，在这种特殊情况下，它有点在围栏上，你可以走另一条路，但我倾向于静态方法。

现在我们已经决定它应该是静态的，它是否应该是一个扩展方法是一个完全独立的问题。这更加主观，并进入个人偏好领域。这些方法可能会被链接起来吗？如果是这样，扩展方法的链接比对静态方法的嵌套调用要好得多。它是否可能在确实使用它的文件中被大量使用？如果是，扩展方法可能会稍微简化代码，如果不是，它并没有那么大的帮助，甚至是有害的。对于玩具示例，我可能会说我个人不会，但我不会对做过的人有任何问题（毕竟你仍然可以使用扩展方法，就好像它是一个常规的公共静态方法语法明智）。对于非玩具示例，这主要是逐案决定。

还值得一提的是，在一些极端情况下，扩展方法可能比实例方法*更强大。*特别是通过利用类型推断。使用常规实例方法很容易接受类型或该类型的任何子类型，但有时返回传入的任何类型而不是父类型很有用。这特别用于流畅的 API。不过，这不是一个非常常见的示例，并且仅与您的问题松散相关，因此我不会对此进行扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:20:46.793

在您的类实现接口并且您希望避免在实现相同接口的其他“未来”类上实现相同方法的情况下，扩展方法可能非常有用。例如，StackExchange 实现了 IStackExchange，ProgrammersExchange 也实现了 IStackExchange。您的示例扩展方法对于只实现一次 CalcRep 很有用，而不必在两个类上重新实现它。这正是静态 Enumerable 类中存在所有扩展方法的原因。

除此之外，我没有看到在您已经可以修改的类上使用扩展方法的令人信服的理由。如果有的话，它的缺点是在重载解决过程中被认为是后期。

# html - css精灵故障

> ID：14072946
> 
> 赞同：0
> 
> 时间：2012-12-28T16:56:58.317
> 
> 标签：html, css, css-sprites

我有一堆图像已合并为一个 png。我正在尝试使用这些图像来制作 css sprite 类。

```
<style>
img.plusOne
{
width:50px;
height:50px;
background:url(acknowledgement.png) 0 0;
}
</style>

<body>
<img class="plusOne" src="acknowledgement.png" width="1" height="1" />
</body> 
```

不是在 png 中显示第一个 50px x 50px 的图标，而是将整个 png 文件压缩成一个 50 x 50 的图标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:59:10.897

那是因为`<img>`加载并显示整个图像。

通常人们对精灵使用一个`<div>`或`<span>`标记，而不是`display:inline-block``<img>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:11:07.157

完全像这样想。

你有一个窗口。人站在窗前，现在你看不到窗外。
您需要做的是将人设置为透明的，以便您可以透过窗户看到。

img class="plusOne" src="acknowledgement.png" width="1" height="1" /> 中的图像需要是透明的 GIF 或 PNG 才能正确处理。您不希望它与您用于背景图像的图像相同。

您可以在此处下载透明 GIF： [http ://www.unifiedwealthplanning.com/images/spacer.gif](http://www.unifiedwealthplanning.com/images/spacer.gif)

您的代码中的示例：

```
<img class="plusOne" src="http://www.unifiedwealthplanning.com/images/spacer.gif" width="1" height="1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T05:27:10.610

使用此工具为您现有的精灵生成 CSS - [http://www.spritecss.com/](http://www.spritecss.com/)

# android - 由于手机正在切换网络连接，我是否在 Android 中有 SocketTimeoutException？

> ID：14072947
> 
> 赞同：0
> 
> 时间：2012-12-28T16:57:07.257
> 
> 标签：android, web-services, galaxy, samsung-mobile, socketexception

我有一个 Android 应用程序，作为其核心功能的一部分，它可以进行 ASP.NET WebService 调用。我已经使用 ksoap2 成功地编写了应用程序来进行调用，它可以满足我的需要。

我们的客户报告说，他们发现一些手机无法使用该应用程序。即，在某些 WebService 调用期间，它似乎超时。这让我很困惑，因为它在我们在我办公室测试过的几部手机上都能完美运行。

客户报告的其中一部手机是 Sprint 上的三星 Galaxy S2（他们报告的另一部手机是三星 Galaxy S 或三星 Galaxy S3 - 换句话说，真正类似的手机）。幸运的是，我找到了该公司的一名员工，他在 Sprint 上拥有三星 Galaxy S2，并愿意让我借用它。我能够重新创建问题。附加到 Eclipse，它似乎得到了 SocketTimeoutException。不是每次，但往往不是。

作为测试的一部分，我将手机连接到 Verizon 上的 MiFi。所以，基本上我是把它从 Sprint 的网络上取下来，放到 Verizon 的网络上。当我这样做时，应用程序按预期工作，没有超时。

起初我以为 Sprint 的网络可能很糟糕，但从我的客户在该国另一端的情况来看，这似乎不太可能，所以除非他们的网络一直很糟糕，否则我怀疑情况是否如此。

但我注意到的是——在手机的状态栏中，当连接到 Sprint 时，我看到了 3G 和 4G 图标，它们似乎在来回切换（它们的布局方式，它们都出现了，只是转动彼此相邻的关闭/开启）。当我连接到 MiFi 时，就手机知道或关心的情况而言，我已连接到 Wi-Fi 点。

所以我想知道的是 - 手机会不会在 3G 和 4G 网络之间来回“切换”，并且对 web 服务调用的响应丢失了？在 iPhone 上，如果您使用 3G 网络上的手机（例如）在 Safari 中请求网页，然后手机找到要连接的 Wi-Fi 点并切换，您仍然可以在设备上获得网页连接到 Wi-Fi 后。我认为操作系统允许 3G 呼叫在关闭该网络之前完成。

三星对 Galaxy S* 系列的操作系统所做的某些事情是否会导致我的响应丢失？如果是这样，我能做些什么来防止这种情况发生吗？有没有办法找出哪些网络连接仍然存在？

**更新：**请参阅下面的答案，这个问题的前提不是原因，尽管我确实忘记指出失败或超时的特定调用包含 base64 编码的图像，因此它们大于正常的网络服务调用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T16:14:50.810

对于它的价值，答案似乎是“不”

我使用了[此博客条目](https://thiranjith.wordpress.com/2011/03/31/how-to-monitor-network-connectivity-in-android/)中的代码，它允许我监视网络连接何时发生变化，并且即使网络连接没有变化，我也能够验证该行为是否发生。

因此，无论出于何种原因，这个特定组合（Sprint/Samsung Galaxy S 或 S2）似乎都不喜欢我正在做的事情。

我忘了提到的一件事是我正在通过 Web 服务调用发送 Base64 编码的图像，因此大小可能与它有一些关系，但我无法弄清楚问题到底是什么。

# c# - 在 c# 4.0 中加载 vb6 时出现 entrypointnotfoundexception

> ID：14072952
> 
> 赞同：1
> 
> 时间：2012-12-28T16:57:38.057
> 
> 标签：c#, dllimport, entrypointnotfoundexcept

我在 VB6 中创建了一个测试项目，只是为了看看如何将 vb6 COM dll 中的方法调用到 C# 中。VB6 dll 有这样声明的方法

```
Public Static Function Square(i As Integer) As Integer

    Square = i * i

End Function 
```

从 C# 调用如下

```
 [DllImport("C:\\Documents and Settings\\user1\\My Documents\\Visual Studio 2010\\Projects\\Interop_Example\\WindowsFormsApplication1\\WindowsFormsApplication1\\bin\\Debug\\Project1.dll")]
    static extern int Square(int i);

    private void button1_Click(object sender, EventArgs e)
    {
        int i = Square(3);
    } 
```

但是 int i = Square(3) 行抛出 entrypointnotfoundexception 异常，在导入的 dll 中找不到名为 Square 的方法。我不知道为什么它在抱怨，我错过了什么吗？任何建议表示赞赏。

谢谢

# objective-c - UIGestureRecognizer 或 touchesBegan 没有响应

> ID：14072957
> 
> 赞同：0
> 
> 时间：2012-12-28T16:57:43.363
> 
> 标签：objective-c, ios, cocoa-touch, uigesturerecognizer, touchesbegan

我有一个普通的应用程序。是的，这在其中的任何地方都行不通。如果我把它放在 ViewController 中，它不会工作，如果我把它放在 UIView 子类中，同样，它会拒绝工作。我究竟做错了什么？

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"Please Work");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:52:07.450

确保视图具有 userInteractionEnabled=YES。如果父视图的 userInteractionEnabled=NO，触摸也会丢失。如果这没有帮助，请发布代码。

# ruby-on-rails - 如何卸载和加载课程？

> ID：14072960
> 
> 赞同：1
> 
> 时间：2012-12-28T16:57:56.973
> 
> 标签：ruby-on-rails, ruby, rails-console

我在 /lib 中有一个类，我正在通过控制台进行测试和测试。我正在对类进行更改（例如添加调试器行）并使用`reload!`，但新的或删除的行未反映在控制台正在运行的代码版本中。

试过这些：

*   `config.cache_classes = false`
*   `reload!`
*   `config.autoload_paths += Dir["#{config.root}/lib/**/"]`

    `config.autoload_paths += Dir["#{config.root}/lib/service_processors"]`

    `config.autoload_paths << 'lib'`

我正在运行一个保存的脚本来创建类的一个实例。我尝试只在脚本顶部加载类，但这似乎会导致一些意想不到的后果。

那么，我如何完全卸载一个类然后重新加载它？我在想脚本会强制卸载类，然后通过文件名加载类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:49:29.030

不确定这是问题所在，但`application.rb`您需要添加以下行：

```
config.autoload_paths += %W( #{config.root}/lib ) 
```

其次，为了确保在重新加载时正确找到类/模块，命名必须遵循 Rails 约定。这意味着蛇形封装模块或类名应该给出文件名，并且不同的命名空间（或嵌套）应该位于不同的文件夹中。

一些例子可以使这一点更清楚:)

```
class SomeClass     --> /lib/some_class.rb
class SomeHTTPStuff --> /lib/some_http_stuff.rb
class API::Stuff    --> /lib/api/stuff.rb 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:15:13.583

**添加 Rails 标签后无效**

好吧，加载一个类：

```
load "lib/class.rb" 
```

要重新加载：

```
load "lib/class.rb" 
```

这些设置无关紧要。

# asp.net - 浏览器退出时的表单身份验证

> ID：14072961
> 
> 赞同：1
> 
> 时间：2012-12-28T16:57:59.370
> 
> 标签：asp.net, .net, authentication, asp.net-mvc-4

今天早上我和我的同事继续讨论当 RememberMe = false 时存储 auth cookie。

MVC4，表单认证，C#.Net，Visual Studio 2012，IIS 7.5，InProcess Session

1.  用户登录，（RememberMe = false）并导航到应用程序中的项目。默认会话超时设置为 30 分钟，

2.  用户复制了 URL 并关闭了浏览器（IE9）

3.  打开新浏览器（IE9）并粘贴复制的 URL，UI 重定向到 loginPage。

这里我说在步骤 1 中创建的会话仍然有效。，在关闭浏览器时，浏览器丢失了 AuthCookie。

他说该会话也是基于浏览器会话创建的。我有点困惑。

请让我知道实际发生了什么。

抱歉英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:08:40.750

RememberMe = false 表示发给用户的身份验证 cookie 不是持久的（cookie 的过期设置为“SESSION”）。也就是说，当浏览器会话结束时，cookie 会丢失。RememberMe = true 表示创建持久性 cookie 并跨多个浏览器会话保存（cookie 的到期时间设置为特定日期，通常在 web.config 中配置）。

在此处阅读[文档](http://msdn.microsoft.com/en-us/library/twk5762b.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:08:16.577

我假设您使用的是默认的[Session-State Mode](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)，即 InProc。一个会话生成一个[SessionID](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.sessionid%28v=vs.100%29.aspx)，这个 ID 存储在一个 cookie 中。该 cookie 被发送给用户，当使用该 cookie 发出请求时，会话处于活动状态。ID 本身标识了唯一的浏览器，这就是为什么当您同时使用两个不同的浏览器时，您可以使用不同的帐户登录同一个网站。但是，您不能从同一浏览器的不同选项卡登录不同的帐户（除非该网站专门定制了他们的网站以支持该功能）。

通过关闭浏览器，此 cookie 将被删除，因此会话将在达到其超时期限时结束。您被带到 UI 页面的原因是因为您拥有的新 cookie 不再具有相同的会话 ID，因此，出于所有意图和目的，您是新用户。

# android - .apk 在设备上重命名为 .bin

> ID：14072963
> 
> 赞同：2
> 
> 时间：2012-12-28T16:58:02.363
> 
> 标签：android, apache, download, apk, filenames

我想将 .apk 文件分发给 beta 测试人员列表。我在我的 Apache 驱动的 Web 服务器上上传并修改了 .htaccess：

AddType application/vnd.android.package-archive .apk

从 Windows+Firefox 下载时，文件按预期下载。从 Android 设备 + Chrome 下载时，文件被重命名为 .bin。

出了什么问题？

# php - 我正在使用 ajax 并出现故障但没有错误消息

> ID：14072966
> 
> 赞同：0
> 
> 时间：2012-12-28T16:58:16.743
> 
> 标签：php, javascript, jquery, ajax

我正在使用 Wordpress 3.5 并制作自定义页面模板来查找数据库。它失败了，输出是：

> [对象对象]：错误：

我在 jsfiddler 中试过这个，但它给出了同样的错误。

页面代码为：

```
<?php

// Exit if accessed directly
if ( !defined('ABSPATH')) exit;

/*
Template Name: DBLookup
*/
?>

<script language='JavaScript' type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type='text/javascript' language='javascript'>
function getlist(form) {
    //alert(form.mname.value);
    //$('#result_table').html(form.mname.value);
    $.ajax({
        url: 'getlist.php',
        type: 'POST',
        data: {n : form.mname.value},
        dataType: 'html',
        success: function(output_string) {
            $('#result_table').html(output_string);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            $('#result_table').html(XMLHttpRequest + ': ' + textStatus + ': '+ errorThrown);
                  }
    } // End of success function of ajax form
    ); // End of ajax call    
}
</script>

<?php get_header(); ?>

        <div id="content" class="grid col-620">

<?php if (have_posts()) : ?>

        <?php while (have_posts()) : the_post(); ?>

        <?php $options = get_option('responsive_theme_options'); ?>
        <?php if ($options['breadcrumb'] == 0): ?>
        <?php echo responsive_breadcrumb_lists(); ?>
        <?php endif; ?>

            <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>                

                <?php if ( comments_open() ) : ?>               
                <div class="post-meta">
                <?php responsive_post_meta_data(); ?>

                    <?php if ( comments_open() ) : ?>
                        <span class="comments-link">
                        <span class="mdash">&mdash;</span>
                    <?php comments_popup_link(__('No Comments &darr;', 'responsive'), __('1 Comment &darr;', 'responsive'), __('% Comments &darr;', 'responsive')); ?>
                        </span>
                    <?php endif; ?> 
                </div><!-- end of .post-meta -->
                <?php endif; ?> 

                <div class="post-entry">
                    <?php the_content(__('Read more &#8250;', 'responsive')); ?>
                    <?php wp_link_pages(array('before' => '<div class="pagination">' . __('Pages:', 'responsive'), 'after' => '</div>')); ?>
                </div><!-- end of .post-entry -->

                <?php if ( comments_open() ) : ?>
                <div class="post-data">
                    <?php the_tags(__('Tagged with:', 'responsive') . ' ', ', ', '<br />'); ?> 
                    <?php the_category(__('Posted in %s', 'responsive') . ', '); ?> 
                </div><!-- end of .post-data -->
                <?php endif; ?>             

            <div class="post-edit"><?php edit_post_link(__('Edit', 'responsive')); ?></div> 
            </div><!-- end of #post-<?php the_ID(); ?> -->

            <?php comments_template( '', true ); ?>

        <?php endwhile; ?> 

        <?php if (  $wp_query->max_num_pages > 1 ) : ?>
        <div class="navigation">
            <div class="previous"><?php next_posts_link( __( '&#8249; Older posts', 'responsive' ) ); ?></div>
            <div class="next"><?php previous_posts_link( __( 'Newer posts &#8250;', 'responsive' ) ); ?></div>
        </div><!-- end of .navigation -->
        <?php endif; ?>

        <?php else : ?>

        <h1 class="title-404"><?php _e('404 &#8212; Fancy meeting you here!', 'responsive'); ?></h1>
        <p><?php _e('Don&#39;t panic, we&#39;ll get through this together. Let&#39;s explore our options here.', 'responsive'); ?></p>
        <h6><?php _e( 'You can return', 'responsive' ); ?> <a href="<?php echo home_url(); ?>/" title="<?php esc_attr_e( 'Home', 'responsive' ); ?>"><?php _e( '&larr; Home', 'responsive' ); ?></a> <?php _e( 'or search for the page you were looking for', 'responsive' ); ?></h6>
        <?php get_search_form(); ?>

<?php endif; ?>  

        <div>

<form name="DBLookup" action="javascript:void(0);">
Full or partial malware name<br>
<input style="width: 350px;" type="text" name="dataname" id="mname">
<input type="submit" name="submit" onClick="getlist(this.form);">
</form>
<div id='result_table'></div>
          </div>  

        </div><!-- end of #content -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

getlist.php 很简单：

```
<?php
echo "got it";
?> 
```

# javascript - 如何在另一个 dgrid 单元格中显示 dojo dgrid 选择

> ID：14072980
> 
> 赞同：0
> 
> 时间：2012-12-28T16:59:52.230
> 
> 标签：javascript, css, html, dojo, dgrid

我有一个显示一些数据的 Dgrid，比如 DataDgrid。我想在主 DataDgrid 的一个单元格内添加一个基于另一个 Dgrid 的选择控件，比如 SelectDgrid。

要添加选择，我将遵循此示例：[http ://dojofoundation.org/packages/dgrid/tutorials/drop_down/](http://dojofoundation.org/packages/dgrid/tutorials/drop_down/)

我准备了一个 JSFiddle，表明它可以工作：http: [//jsfiddle.net/amiramix/qqezJ/](http://jsfiddle.net/amiramix/qqezJ/)

现在，当我尝试添加选择时，它显示在表格单元格内，而不是浮动在主 DataGrid 上。请检查此 JSFiddle（单击编辑以将选择添加到主 DataGrid）：http: [//jsfiddle.net/amiramix/qqezJ/5/](http://jsfiddle.net/amiramix/qqezJ/5/)

我猜它归结为一些 CSS 设置不正确。我试图摆弄 z-index 但没有任何结果。任何帮助将不胜感激。

添加以下代码以消除 stackoverflow 的警告：

HTML：

```
<button id="editButton" type="button">Edit</button>
<div id="grid"></div> 
```

CSS：

```
#grid {
    line-height: 30px;
}

.mySelect {
    border: 1px solid #b5bcc7;
    background-color: #ffffff;

    height: 17px;

    /* Make this position: relative so our arrow is positioned within */
    position: relative;
    padding: 0;
}
.mySelect .label {
    line-height: 17px;
    vertical-align: middle;
}
.mySelect .arrow {
    /* Position the arrow on the right-hand side */
    position: absolute;
    top: 0;
    right: 0;

    /* Use claro's arrow image */
    background-image: url("https://ajax.googleapis.com/ajax/libs/dojo/1.8.1/dijit/themes/claro/form/images/commonFormArrows.png");
    background-position: -35px 70%;
    background-repeat: no-repeat;

    /* 16x16 with a white border and a gray background */
    width: 16px;
    height: 16px;
    border: 1px solid #ffffff;
    border-top: none;
    background-color: #efefef;
}

.mySelect .dgrid {
    position: absolute;
    top: 17px;
    left: -1px;
    width: 100%;
    display: none;
}
.mySelect .opened {
    display: block;
} 
```

JavaScript：

```
require([
    "dojo/_base/declare",
    "dojo/on",
    "dgrid/OnDemandList",
    "dgrid/OnDemandGrid",
    "dgrid/Selection",
    "dgrid/Keyboard",
    "dojo/store/Memory",
    "dojo/dom",
    "dojo/dom-construct",
    "dojo/dom-class",
    "put-selector/put",
    "dojo/domReady!"
    ], function(declare, on, List, OnDemandGrid, Selection, Keyboard, Memory, dom, domConstruct, domClass, put) {

    var store = new Memory({
        identifier: "id",
        data: [
            {
            id: 0,
            name: "One",
            color: "blue",
            value: 1},
        {
            id: 1,
            name: "Two",
            color: "red",
            value: 2},
        {
            id: 2,
            name: "Three",
            color: "green",
            value: 3},
        {
            id: 3,
            name: "Four",
            color: "orange",
            value: 4}
        ]
    });

    var dataStore = new Memory({
        identifier: "id",
        data: [
            {
            id: 0,
            name: "OneOne",
            value: "OneTwo"},
        {
            id: 1,
            name: "TwoOne",
            value: "TwoTwo"}
        ]
    });

    var DropDown = declare([List, Selection, Keyboard]);
    var Grid = declare([OnDemandGrid, Keyboard]);

    var newGrid = new Grid({
        store: dataStore,
        columns: {
            name: {
                label: "Name"
            },
            value: {
                label: "Value",
                renderCell: function(object, value, td, options) {
                    put(td, "div#id-" + object.id, object.name);
                }
            }
        }
    }, "grid");

    on(dom.byId("editButton"), "click", function(e) {

        var ref = dom.byId("id-0");
        ref.innerHTML = "";
        put(ref, "#select.mySelect");
        put(ref, "div.label.button", "choose...");
        put(ref, "div.arrow.button");

        var dropDown = new DropDown({
            selectionMode: "single",
            store: store,
            renderRow: function(item) {
                return domConstruct.create("div", {
                    innerHTML: item.name,
                    style: {
                        color: item.color
                    }
                });
            }
        });

        domConstruct.place(dropDown.domNode, "select");
        dropDown.startup();

        var open = false;
        on(dom.byId("select"), ".button:click", function(e) {
            open = !open;
            domClass[open ? "add" : "remove"](dropDown.domNode, "opened");
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T08:42:47.263

您可以将编辑器插件与`FilteringSelect`. 见：[https ://github.com/SitePen/dgrid/wiki/editor](https://github.com/SitePen/dgrid/wiki/editor)

# javascript - 在 JavaScript 中创建一个新页面（打印）

> ID：14072981
> 
> 赞同：-2
> 
> 时间：2012-12-28T17:00:07.230
> 
> 标签：javascript, jquery, css, html, printing

> **可能重复：**
> [在单独的页面 javascript 中打印？](https://stackoverflow.com/questions/3435688/print-in-separate-page-javascript)

我有一点问题。我想制作一个以 HTML 格式打印的页面，并且每隔三个表格（这就是我想要打印的内容）将在一个新页面上。但是我找不到在 JS 中创建新页面的任何方法。现在我已经制作了一个在 60px 上留出空间的 div，但是当我删除打印提示符（Google Chrome）中的地址栏和内容时，应该在下一页上的表格会显示在第一个页面上。我想要的是一个 Javascript，它和我做的事情一样，然后我在 Word 中单击“ctr+enter”（或者只是任何可以解决问题的东西

我的页面在这里：[http ://p.altidsjov.dk/bingo/print_boards.php?collection=2](http://p.altidsjov.dk/bingo/print_boards.php?collection=2)

问候卢卡斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:03:57.110

您需要使用 css 属性`page-break-after: always`，它是 CSS3 的一部分。但是请注意，并非所有浏览器都支持它，并且所有浏览器都以不同的方式进行“打印”。

[您可以在http://www.w3schools.com/cssref/pr_print_pageba.asp](http://www.w3schools.com/cssref/pr_print_pageba.asp)查看更多信息

您会将该属性添加到每三个表中。

# python - 如何连接到 mongoDB

> ID：14072985
> 
> 赞同：0
> 
> 时间：2012-12-28T17:00:22.770
> 
> 标签：python, mongodb, pymongo, tornado-motor, database

我`mongoLabs`用来托管我的数据库，我想从我的应用程序连接到它。

我也在使用中的`Motor`模块`pyMongo`。我不确定在哪里实例化连接。

例如，我知道如果数据库与应用程序位于同一本地计算机上，我会这样做：

```
 database = motor.MotorClient().open_sync().myDatabase 
```

mongoLab 网站说要`uri`在驱动程序中包含以下内容：

```
mongodb://<dbuser>:<dbpassword>@ds047057.mongolab.com:47057/myDatabase 
```

但我看不到如何创建与该数据库的连接。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:31:12.637

看起来 MotorClient 采用与 MongoClient 相同的参数：

[https://github.com/ajdavis/mongo-python-driver/blob/motor/motor/init .py# **L782**](https://github.com/ajdavis/mongo-python-driver/blob/motor/motor/__init__.py#L782)

[http://api.mongodb.org/python/current/api/pymongo/mongo_client.html](http://api.mongodb.org/python/current/api/pymongo/mongo_client.html)

鉴于此，您应该能够像这样使用 URI：

```
database = motor.MotorClient("mongodb://<dbuser>:<dbpassword>@ds047057.mongolab.com:47057/myDatabase").open_sync().myDatabase 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:39:48.303

您应该按照这些手册为 MotorClient 指定连接设置： MotorClient 采用与 MongoClient 相同的构造函数参数，以及[http://emptysquare.net/motor/pymongo/api/motor/motor_client.html#motor.MotorClient](http://emptysquare.net/motor/pymongo/api/motor/motor_client.html#motor.MotorClient)、 [http ://emptysquare.net/motor/pymongo/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient](http://emptysquare.net/motor/pymongo/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient)

> “主机参数可以是一个完整的 mongodb URI，除了一个简单的主机名。它也可以是主机名或 URI 列表。主机字符串中指定的任何端口都将覆盖端口参数。如果多个 mongodb URI 包含传递数据库或身份验证信息，将使用最后一个数据库、用户名和密码。对于用户名和密码，保留字符，如 ':'、'/'、'+' 和 '@' 必须按照 RFC 2396 进行转义。

```
db =  database = motor.MotorClient('mongodb://<dbuser>:<dbpassword>@ds047057.mongolab.com:47057/myDatabase
').open_sync().myDatabase 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-23T06:46:11.520

以前的答案有点过时了，所以根据文档和对我有用的正确方法：

```
import motor.motor_asyncio
import asyncio
from asyncio import coroutine
db = motor.motor_asyncio.AsyncIOMotorClient().database_name 
```

[https://motor.readthedocs.io/en/stable/tutorial-asyncio.html](https://motor.readthedocs.io/en/stable/tutorial-asyncio.html) [https://github.com/mongodb/motor/blob/master/doc/tutorial-asyncio.rst](https://github.com/mongodb/motor/blob/master/doc/tutorial-asyncio.rst)

# c++ - std::thread 和 std::cin.get

> ID：14072997
> 
> 赞同：2
> 
> 时间：2012-12-28T17:01:12.197
> 
> 标签：c++, multithreading

我有一个名为 DebugConsole 的全局变量。它使用 Alloc Console 创建一个控制台并重定向 std::cout 和 std::cin。

事情是，当控制台产生时，一切都很好。但是，当我使用 std::cin.get() 时，它会阻塞并且我的应用程序的其余部分是不可点击的。所以我决定线程化std::cin.get()。当您按下一个键时，控制台关闭就好了。当我取消选中该框时，问题就出现了。线程无法加入，因为 std::cin.get() 阻止它移动。因此，我必须在它响应之前先输入。这导致我的整个应用程序冻结。

我正在努力做到这一点，以便当您按任意键时，它会退出我的控制台，或者当您取消选中该框时，它会关闭我的控制台。

```
if (ButtonChecked)
{
    std::cout<<"To close this window: \nRemove the checkmark from the Extract Box OR Press Any Key..\n"<<std::flush;

    DebugConsole.StartThread([window]{  //create an std::thread and run the lambda in it.
        std::cin.get();
        DebugConsole.StopThread();  //join the thread.
        DebugConsole(false, false);  //close the console.
        UncheckBox(DebugBox);
    });
}
else
{
     DebugConsole.StopThread(); //basically just joins the thread..
     UncheckBox(DebugBox);
} 
```

有问题的代码在上面。知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:22:28.717

主线程（在 DebugConsole.StartThread() 函数调用之后）应该与线程进行连接 - 当然，它需要知道线程 ID，因此您可能需要`threadid = DebugConsole.StartThread(...);` 使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:12:20.573

我通过使用`GetAsyncKeyState(VK_RETURN) & 1`而不是 std::cin.get() 和 std::cin.peek() 解决了它。

所有其他代码都很好。这只是 cin.get 和 peek 不会停止阻塞。它阻止了我的线程加入/分离，因为它一直在等待用户输入。

# yii - Yii 中更好的路由

> ID：14072999
> 
> 赞同：0
> 
> 时间：2012-12-28T17:01:22.597
> 
> 标签：yii, url-routing

我是 Yii 的新手。我有一个这样的控制器：

```
<?php

class EventsController extends Controller
{
    public function actionIndex()
    {
        $this->render('index');
    }
} 
```

如何使以下 url 呈现正确的视图。例如。

```
localhost/events/intaglio -> $this->render('intaglio');
localhost/events/burrito-> $this->render('burrito');
localhost/events/jerrito -> $this->render('jerrito'); 
```

更糟糕的情况是，我必须对每个人采取单独的行动

```
public function actionIntagio {...}
public function actionBurrito {...}
public function actionJerrito {...} 
```

有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:09:04.947

设置 URL 规则（在*protected/config/main.php*中）以动态处理这些 URL，例如：

```
events/<event_name:.+> => events/myaction 
```

*这会将任何带有events/whatever*的URL 指向 Controller/Action *events/myaction*。然后，您可以使用变量访问`event_name`URL 的一部分，例如：`$_GET`

```
echo $_GET['event_name']; 
```