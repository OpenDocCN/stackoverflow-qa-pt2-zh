# StackOverflow 问答 14498000-14498999

# css - 将样式应用于多个选择器或使用多个类。哪个性能更好？

> ID：14498004
> 
> 赞同：1
> 
> 时间：2013-01-24T09:33:03.587
> 
> 标签：css, sass

我正在使用 SASS，但实际上我的问题也适用于普通的旧 CSS。所以我有这个类：

```
.some-icon {
    background-image: url('data:image/png;base64, someBase64String');
} 
```

所以，现在我必须在几个地方使用这个图标。我还需要编写一些额外的 css 以将其正确放置在它应该出现的不同位置。由于我不想复制这个巨大的 base64 字符串，我想知道使用哪种方法。

要么使用`SASS`的扩展语法：

```
.use-case-a{
    @extend .some-icon;
    margin: 10px 0 0 0;
    ...
} 
```

编译后的 CSS 如下所示：

```
 .some-icon, .use-case-a {
    background-image: url('data:image/png;base64, someBase64String');
}

.use-case-a{
    margin: 10px 0 0 0;
    ...
} 
```

或者我应该写：

```
 .some-icon {
    background-image: url('data:image/png;base64, someBase64String');
}

.use-case-a{
    margin: 10px 0 0 0;
    ...
} 
```

然后应用两个类`some-icon`并`use-case-a`就可以了？

我读到第一种方法会消耗性能： [https ://github.com/nex3/sass/issues/12](https://github.com/nex3/sass/issues/12)

但我也读到应用多个类也会损害性能。

这里推荐的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T20:51:13.033

我也有这个问题，经过一些研究，我发现了一篇关于[CSS 渲染速度的帖子 -](http://forrst.com/posts/CSS_Rendering_Speed_Grouping_Selectors_vs_Prop-T4S) Forrst 上的分组选择器与属性。

虽然作者比较了 CSS 中分组选择器与属性之间的区别，但我想知道在元素上使用多个类应用样式是否更快……所以[我做了一个测试](http://forrst.com/posts/CSS_Rendering_Speed_Grouping_Selectors_vs_Prop-T4S#comment-568005)，[作者运行了它](http://forrst.com/posts/CSS_Rendering_Speed_Grouping_Selectors_vs_Prop-T4S#comment-568136)，结果发现它更快在您的 html 中使用多个类：

```
 1k      10k
Grouping Selectors layout time   ~12ms   ~110ms
Grouping Properties layout time  ~12ms   ~117ms
Object Oriented CSS layout time  ~11ms   ~112ms

Grouping Selectors DOM ready     ~50ms   ~405ms
Grouping Properties DOM ready    ~64ms   ~640ms
Object Oriented CSS DOM ready    ~47ms   ~349ms

Grouping Selectors file size      55kb    563kb
Grouping Properties file size     93kb    943kb
Object Oriented CSS file size     64kb    633kb 
```

此外，当您在标记中使用更多类时，您的代码将更具可读性、可预测性、可维护性、可扩展性等。当您阅读以下代码时，您知道该项目是一个图标，它也是一个复选标记图标。

```
<div class="icon icon-checkmark"></div> 
```

此代码还允许使用 JavaScript 轻松选择所有“图标”元素。

重载类的样式将限制您使用该类的方式。

总而言之，由于实际的浏览器渲染时间增量可以忽略不计，因此此级别的优化应侧重于节省开发人员的时间。

这里的答案也很合理：[CSS - Multiple vs Single class on an element](https://stackoverflow.com/questions/5568718/css-multiple-vs-single-class-on-an-element)

# java - Advantages of using MTOM with XOP

> ID：14498012
> 
> 赞同：1
> 
> 时间：2013-01-24T09:33:49.057
> 
> 标签：java, web-services, soap, weblogic, mtom

I wonder what are the main benefits of using a WS with MTOM. (without streaming the attachment)

I understand that the payload will not contain the binary data which will be part of MIME

"When you use MTOM/XOP to optimize a SOAP message, the XOP processing serializes it into a MIME Multipart/Related message. The XOP processing extracts the base64Binary data from the SOAP message and packages it as separate binary attachments within the MIME message, in a similar manner to e-mail attachments"

SO the payload will probably smaller (but not much ) then base64 format

BUT without using streaming attachment i see little advantage... the payload will end up in memory anyway as soap is deserialized.

So if the SOAP has to contain a big PDF file which i have to store it ... with pure MTOM there will be not so much benefit if i will not use streaming attachment cause multiple users in the same time might crash the server with OOME...

Am i wrong ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:54:12.320

改用 MTOM 有几个原因：

*   MTOM 具有良好的互操作性。MTOM 是**W3C 建议**，得到 Microsoft、IBM、Oracle 等的认可。

*   Web 服务功能可以根据需要处理 MTOM 附件。附件的临时 Base64 表示允许 SOAP 引擎使用它们来生成消息签名、执行加密等。

*   MTOM 对开发没有影响。没有用于处理 SOAP 附件的特殊 API。

# ios - Unity iOS development build always yields non ARC Xcode Project

> ID：14498015
> 
> 赞同：0
> 
> 时间：2013-01-24T09:33:57.967
> 
> 标签：ios, xcode, unity3d

Unity iOS Xcode build always gives a non-ARC Xcode project. I want to have unity iOS build with ARC. How can I do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T17:33:50.290

最简单的方法是在您的项目中激活 ARC，但告诉 XCode 仅使用“-fno-objc-arc”选项为 Unity 生成的文件停用它。这样，您可以使用 arc 编写自己的代码，但不会因自动迁移生成的代码而产生任何副作用。您可以轻松地从 unity 集成新的导出，而无需重新迁移它。

-fno-objc-arc 必须在您的项目设置 > 构建阶段 > 编译源中设置

问候

# php - 记住用户想去哪个页面

> ID：14498020
> 
> 赞同：1
> 
> 时间：2013-01-24T09:34:11.940
> 
> 标签：php

我的页面上有几个链接。如果用户未登录，他们中的大多数将重定向到主页。我不想这样做，而是将用户定向到登录页面，然后将他们定向到他们最初想去的页面。

因此，例如，如果用户在 上`index.php`，并且在`page10.php`未登录的情况下点击。她/他应该被定向到`login.php`。登录后，网站应记住用户最初想访问`page10.php`.

我该如何做那个记忆部分？我知道我可以使用 cookie 和/或 php 会话，但这些是记住用户想要去的最合适的方式（在这种情况下）`page10.php`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:35:49.920

附加所需的 URL 作为链接的一部分。因此，如果用户未登录，请重定向他：

```
login.php?url=<desired_url> 
```

读取登录页面上的变量，并在成功后将其定向到那里而不是索引。

要获取服务器端的 URL，请查看`$_SERVER['REQUEST_URI']`

[$_SERVER 手册](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:14:48.543

无需使用会话或获取变量，只需从登录页面上的 $_SERVER 数组访问 HTTP_REFERER，将其设置为表单中的隐藏元素，然后在提交后重定向回该 URI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:37:15.763

首先，重定向到`login.php?return=ORIGINAL_URL`

在 login.php 中设置`$_SESSION['return'] = $_GET['return'];`。

成功登录后，检查是否有`$_SESSION['return']`，如果有，并且是有效的 URL，重定向到它并取消设置`$_SESSION['return']`。

就是这样。

PS: 之所以应该使用 session 是因为用户第一次尝试可能无法成功登录。或者可能没有帐户，他可能要先注册。这样，即使在创建帐户后，他也会被重定向到相应的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:48:41.373

登录用户意味着您将使用会话。会话通常使用 cookie，但如果您不想或不能使用 cookie，则可以通过在请求中传递会话 id 来实现它们。

执行此操作的适当方法是使用会话，如下所示：

1) 身份验证检查重定向到登录页面

2）登录页面检查是否在会话中设置了目标页面，如果没有，则将其设置为引荐来源网址

3) 如果登录表单有效，则从会话中删除目标页面，并将用户重定向到原始页面

4) 否则表格会重新显示。

# ruby-on-rails - Rails 3, twitter bootstrap functionality is not loading

> ID：14498026
> 
> 赞同：1
> 
> 时间：2013-01-24T09:34:42.787
> 
> 标签：ruby-on-rails, twitter-bootstrap, less, precompile

I am using ubuntu 10.10\. In my rails 3.1 project, css & javascript code is not loading even after precompile. I am using twitter bootstrap tool but this functionality is not working. Eg: Icons are not loading, buttons UI is not displaying properly.

I am using below command to precompile,

```
rake assets:precompile -t 
```

In application.rb i have given

```
config.assets.enabled = true
config.encoding = "utf-8" 
```

My development.rb is like,

```
Azzist::Application.configure do

 config.cache_classes = false
 config.whiny_nils = true
 config.consider_all_requests_local       = false
 config.action_controller.perform_caching = true
 config.log_level = :debug

 config.assets.precompile += %w( abootstrap.js bootstrap-timepicker.js jquery.imgareaselect.pack.js application.css cv_builder.css widget.css imgareaselect-default.css)

 config.assets.compile = true
 config.serve_static_assets = true
 config.assets.compress = true
 config.assets.js_compressor  = :uglifier

 config.action_dispatch.best_standards_support = :builtin

 config.autoload_paths += %W(#{Rails.root}/app/sweepers)
 config.action_controller.page_cache_directory = "#{Rails.root}/cache/pages"
 config.cache_store = :dalli_store

 config.action_mailer.raise_delivery_errors = true
 config.i18n.fallbacks = true
 config.active_support.deprecation = :notify

 # Default url options
 ENV["HOST"] = "http://localhost:3000"
 ENV["LOG_IT"] = "true"
 config.action_mailer.default_url_options = {:host => ENV["HOST"]}
 default_url_options[:host] = ENV["HOST"]

 config.action_controller.asset_host = "http://localhost:3000"

 ## Setting up the memcache server
 ENV["MEMCACHE_SERVER"] = "http://localhost:3000"

end 
```

My application.js is,

```
//= require jquery
//= require jquery_ujs

//= require twitter/bootstrap
//= require bootstrap-button
//= require bootstrap-datepicker
//= require jquery.tokeninput
//= require jquery.vticker
//= require jquery.Jcrop.min
//= require jquery.effects.core
//= require jquery.effects.highlight
//= require highlight
//= require noty

//= require tinymce-jquery

//= require jquery.joyride-1.0.3
//= require jquery.bxslider
//= require jquery.bxslider.min

//= require jquery.jcarousel.min
//= require modernizr-2.5.3.min

//= require_tree . 
```

My application.css is,

```
/*

* require_self
* require_tree . 

*= require main
*= require bootstrap_override
*= require datepicker
*= require typography
*= require token-input
*= require token-input-facebook

*= require skin
*= require jquery.ptTimeSelect
*= require jquery.Jcrop
*= require jquery.bxslider

*= require joyride-1.0.3

*= require noty
*= require noty_theme_twitter

*= require_self

*/ 
```

Need some assistance. Long before i was asked this same question but still it is not solved.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:26:02.683

```
# Do not compress assets
config.assets.compress = false
config.assets.precompile = false 
```

尝试使用没有预编译和压缩的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:12:47.660

我可以在你身上看到你`application.css`的双重陈述`require_self`。通常你应该把所有需要的文件放在`require_tree`和之前`require_self`。

另一个很好的做法是：在开发中不要预编译资产，它们应该用作源，因为它们应该反映您在开发过程中所做的更改。

*   require_self 和 * require_tree 。不会做任何事情作为评论。需要“=”（等号）才能将其视为包含语句。

# blackberry - Parse webview content in BlackBerry

> ID：14498047
> 
> 赞同：1
> 
> 时间：2013-01-24T09:36:18.987
> 
> 标签：blackberry

Does anyone know how to parse html content of a webview in BlackBerry? I am reading html content from a url. I want to add or delete some contents and then show it.

# dynamics-crm-2011 - 检索报价 - 404 错误

> ID：14498048
> 
> 赞同：2
> 
> 时间：2013-01-24T09:36:19.320
> 
> 标签：dynamics-crm-2011

我在 MS CMS 2011 中工作，并尝试在 javascript 中检索带有 id 的报价。

```
var id = Xrm.Page.data.entity.getId();            
id = id.replace('{','').replace('}','');
var options = "$select=" + ebcont.crm.meta.quote.QuoteNumber
  + "&$filter=" + ebcont.crm.meta.quote.QuoteId + " eq (guid'" + id +"')";
SDK.REST.retrieveMultipleRecords(
  ebcont.crm.meta.quote.LogicalName, 
  options, 
  ebcont.crm.quote._successRetrieve,
  function(error) { alert(error.message); }, 
  ebcont.crm.quote._retrieveQuoteComplete); 
```

我收到以下错误消息：

> 错误：404：未找到：未找到段“quoteSet”的资源。

我用它们同样的方式来检索一个国家，没有问题。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T10:20:04.780

我发现 ODATA 调用对套管非常挑剔。

尝试更改`ebcont.crm.meta.quote.LogicalName`为`Quote`.

作为一个方面，`Set`SDK 代码附加了该位（假设您使用的是与我相同的 MSDN 示例）。

# java - 如何加快频繁的写作

> ID：14498052
> 
> 赞同：2
> 
> 时间：2013-01-24T09:36:29.273
> 
> 标签：java, lotus-notes, lotus-domino

我们创建了一个 java 代理，它检查我们的应用程序套件，以查看例如父/子结构是否仍然正确。因此，它需要在多个应用程序中检查 8000 多个文档。

检查本身进行得非常快。我们使用导航器从视图中检索数据，并且只从这些条目中读取数据。问题在于我们的日志记录机制。每当我们报告具有 SEVERE 级别的日志条目（又名：一个真正的大问题）时，后端文档都会直接更新。这是因为我们不想丢失有关这些问题的任何信息。

在我们的测试运行中，我们看到一切运行顺利，但是一旦我们“创造”了很多严重的问题，性能就会因为所有的写入而大幅下降。我想看看是否有任何笔记开发人员面临同样的挑战。我们如何在不丢失任何数据的情况下加快编写速度？

-- 在 simon 评论后添加了更多信息 --

它是一个每天晚上运行以检查不一致的预定代理。目标当然是找到不一致并解决原因，最终完全没有任何不一致的报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:18:09.167

> 它是一个每天晚上运行以检查不一致的预定代理。

好的。所以有很多因素需要考虑。

1.  是否有任何嵌入式罐子？当代理嵌入 jar 时，服务器必须先将它们从代理分离到磁盘，然后才能运行代码。每次代理执行时都会这样做。这可能会影响性能。如果您的代理生成多次，请删除嵌入的 jar 并将它们放入服务器上的 lib\ext 文件夹中（需要重新启动服务器）。

2.  你提到它在晚上运行。默认情况下，一般内务处理流程在夜间运行。检查已安排的服务器任务的注释 ini，并评估它们在运行时对服务器/代理的影响。例如：

    ```
    ServerTasksAt1=Catalog,Design
    ServerTasksAt2=Updall
    ServerTasksAt5=Statlog 
    ```

    在这种情况下，如果在 2-5 之间运行，则 UPDALL 可能会对其产生影响。还要检查计划文件的计划执行。

3.  你用什么方式写作？如果您为每个事件创建一个文档并且文档内容不多，那么编写时间应该是合理的。可能会影响性能的是以下之一。

    *   如果您对这些写入进行多线程处理。
    *   拉出一个日志文档，添加一行，保存然后重复。

最后一件事要考虑。如果您收到 3000 个错误，一定有一个点 X 数量的错误意味着没有继续的意义，而是通过 SNMP/电子邮件/等提醒管理员？也可能值得编码。

除此之外，您可能应该发布一些与写入相关的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:05:31.023

嗯，困难或一般的问题。据我了解，您更新了正在浏览的视图中的文档。我会设置`view.AutoUpdate`为假。这可确保在您运行代码时不会重新加载视图。这应该加快你的代码。

这是来自 Designer 帮助的摘录：

> 通过将 AutoUpdate 显式设置为 False 来避免自动更新父视图。自动更新会降低性能并可能使导航器中的条目无效（“在索引中找不到条目”）。您可以根据需要使用 Refresh 更新视图。

希望有帮助。
如果这没有帮助，您可能需要发布代码片段或更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:04:36.290

1.  为每个错误创建单独的文档，而不是一个巨大的文档。

或者

1.  直接写入文本文件而不是数据库，然后在必要时将其拉入文档。这应该会大大加快速度。

# javascript - 将没有缓存的相同图像加载到隐藏的 div 中

> ID：14498057
> 
> 赞同：1
> 
> 时间：2013-01-24T09:36:38.420
> 
> 标签：javascript, image, html

您好我正在尝试将图像加载到隐藏的 div 中。我需要多次这样做，我不想从缓存中加载图像。这是代码。

```
document.getElementById('container').innerHTML = '<img src="http://blog.dwolla.com/wp-content/uploads/2012/09/stackoverflow.png" onload="onLoad()" />'

function onLoad() {
    alert()
} 
```

有没有办法在没有缓存的情况下做到这一点？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:42:01.197

```
var img = '<img src="http://blog.dwolla.com/wp-content/uploads/2012/09/stackoverflow.png?' + Number(new Date()) + '" onload="onLoad()" />';
document.getElementById('container').innerHTML = img; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:40:24.520

将一些随机参数附加到图像`src`，因此不会使用缓存：

```
var img = '<img src="http://blog.dwolla.com/wp-content/uploads/2012/09/stackoverflow.png?' + Math.random() + '" onload="onLoad()" />';
document.getElementById('container').innerHTML = img; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:42:04.107

在 img url 的末尾添加一个随机字符串

像：

```
document.getElementById('container').innerHTML = '<img src="http://blog.dwolla.com/wp-content/uploads/2012/09/stackoverflow.png?nocache='+Math.random()+'" onload="onLoad()" />' 
```

# google-visualization - 使用带有两个表格的谷歌图表的仪表板

> ID：14498058
> 
> 赞同：1
> 
> 时间：2013-01-24T09:36:39.400
> 
> 标签：google-visualization

我正在尝试在我的应用程序中创建一个带有柱形图和一些类别过滤器的仪表板，我有这样的数据：

```
['First name', 'City', 'Number of children'],
['Michael' , 'London', 2],
['Elisa', 'Paris', 3],
['Robert', 'Moskov', 3],
['John','LA', 1],
['Jessica', 'Kyiv', 3],
['Aaron', 'New York', 2],
['Margareth','Tokyo', 3 ] 
```

但我必须可视化的不是这些数据，而是一个包含相同数量孩子的总人数的表格：

['1 个孩子', '2 个孩子', '3 个孩子'],

[1, 2, 4]

因此，当我对第一个表应用一些过滤器时，必须自动重新计算第二个表中的数据。我可以以某种方式将这些表和控件绑定在一起吗？或者我必须为每个过滤器放置一些处理程序并手动重新计算数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:04:03.073

我假设给定您的数据：

```
['First name', 'City', 'Number of children'],
['Michael' , 'London', 2],
['Elisa', 'Paris', 3],
['Robert', 'Moskov', 3],
['John','LA', 1],
['Jessica', 'Kyiv', 3],
['Aaron', 'New York', 2],
['Margareth','Tokyo', 3 ] 
```

您想按第二列（孩子的数量）分组以获得此结果：

```
[1, 1],
[2, 2],
[3, 4] 
```

您可以使用数据表的[按聚合功能分组轻松完成此操作。](https://developers.google.com/chart/interactive/docs/reference#google_visualization_data_group)

这是示例代码：

```
function drawJoin() {
  var dt = google.visualization.arrayToDataTable([
    ['First name', 'City', 'Number of children'],
    ['Michael' , 'London', 2],
    ['Elisa', 'Paris', 3],
    ['Robert', 'Moskov', 3],
    ['John','LA', 1],
    ['Jessica', 'Kyiv', 3],
    ['Aaron', 'New York', 2],
    ['Margareth','Tokyo', 3 ]
  ]);

  // Group dt by column 2, and count number of entries for each.
  var grouped_dt = google.visualization.data.group(
      dt, [2],
      [{'column': 0, 'aggregation': google.visualization.data.count, 'type': 'number'}]);

  var table = new google.visualization.Table(document.getElementById('table'));
  table.draw(dt, null);

  var grouped_table = new google.visualization.Table(document.getElementById('grouped_table'));
  grouped_table.draw(grouped_dt, null);
} 
```

随意在[Google Playground](http://code.google.com/apis/ajax/playground/?type=visualization#group)上尝试一下（只需复制粘贴上面的代码）。

您可以按原样绘制图表，也可以使用 javascript 函数对其进行转置以转录数据表中的行/列。

因此，您应该使用原始数据表上的控件进行过滤，然后创建分组函数，并在图表中绘制分组表。

如果您希望标签读取“1 个孩子”而不仅仅是数字 1，那么您需要使用[SetFormattedValue()](https://developers.google.com/chart/interactive/docs/reference#DataTable_setFormattedValue)创建一个函数，因为该组的输出将是一个数字。您可以将其与上面的转置函数混合使用，因为您已经在处理数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:58:00.823

假设我有相同的数据，将它们分组并根据分组数据构建柱形图。现在我想添加一些过滤器。我可以轻松地为我在分组数据中使用的列添加任何过滤器，但是当我为另一列添加一些过滤器时，我收到错误“无效的列标签”。例如，如果我添加：

var categoryPicker = new google.visualization.ControlWrapper({ 'controlType': 'CategoryFilter', 'containerId': 'control2', 'options': { 'filterColumnLabel': 'Performance', 'ui': { 'labelStacking': '垂直'，'allowTyping'：假，'allowMultiple'：真}}}）；

一切都会好起来的，但我的目标是为“城市”和“名字”列添加过滤器，并更改它们的值应该影响我的带有分组数据的柱形图。如果这可能吗？

# javascript - jquery 对象的“内容”是否在创建时立即设置？

> ID：14498059
> 
> 赞同：2
> 
> 时间：2013-01-24T09:36:39.887
> 
> 标签：javascript, jquery

关于另一篇文章：[innerHTML works jQuery html() doesn't](https://stackoverflow.com/questions/14487977/innerhtml-works-jquery-html-doesnt)，我想问一下我通过 jQuery 对象引用的 div 的内容是否在创建对象时立即设置。

JSF 页面：

```
<!-- initialize script with the formId and the id of the input -->
<script type="text/javascript">
    $(document).ready(function(){
        mx.autocomp.overlay.init('formId', 'searchValue');
    });
</script>

<!-- input text that at "keyup" calls on sendRemoteCommand -->
<p:inputText
    id="searchValue"
    value="#{searchBean.searchValue}"
    onkeyup="sendRemoteCommand();" />

<!-- PrimeFaces remoteCommand that executes db search -->
<!-- and present result in "searchResult" div -->
<p:remoteCommand 
    name="sendRemoteCommand" 
    actionListener="#{searchBean.complete()}" 
    update="searchResult"
    oncomplete="mx.autocomp.overlay.handleOverlay();" />

<!-- PrimeFaces overlayPanel that is displayed if the search returned a result -->
<!-- i.e. the div "searchResult" has content ($searchResult.html() has content) -->
<p:overlayPanel 
    id="overlay" 
    widgetVar="overlayWid" 
    for="formId:searchValue" 
    showEvent="none">

    <h:panelGroup layout="block" id="searchResult">

        <!-- Content will be presented here after a p:remoteCommand is finished -->

    </h:panelGroup>

</p:overlayPanel> 
```

如上所示，一旦页面准备就绪，脚本就会被初始化。

脚本（部分）：

```
var formId;
var $searchValueComp;
var $searchResultComp;

function init(inFormId, inSearchValue){
    formId = inFormId;
    $searchValueComp = $("#"+inFormId).find("[id$="+inSearchValue+"]");
    $searchResultComp = $("#"+inFormId).find("[id$=searchResult]");
}

function handleOverlay(){
    var fn = window["overlayWid"];
    var result = document.getElementById($searchResultComp.attr("id")).innerHTML;

    if($searchValueComp.val().length==0){
        fn.hide();
    }

    // Test - This does not work as I get an empty alert
    alert($searchResultComp.html());

    // Test - This works.
    var $test = $("#"+formId).find("[id$=searchResult]");
    alert($test.html());

    // I need to check if the div: "searchResultComp" has any content. 
    // As I don't get $searchResultComp.html() to work, I'm forced to 
    // use the "getElementById" way instead. 
    if(result.length==0){
        fn.hide();
    }else{
        fn.show();
    }

} 
```

如上所述，“init”中的 jQuery 对象似乎无法访问 div 的内容，而“handleOverlay”中创建的 jQuery 对象却可以。

我的期望是 jQuery 对象的“html()”函数会实时检查内容，而不是 - 看起来 - 从创建时获取旧信息。因此我的问题：

我通过 jQuery 对象引用的 div 的内容是否仅在创建对象时设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:53:02.667

这取决于您何时调用`init()`函数。例如，如果您在 DOM 尚未准备好时调用它，则选择为空。

因此，无论何时使用`$('#selector').find()`，它都会在那个确切的时间为您提供元素的选择。如果你把它放在你的 中`handleOverlay()`，它应该可以工作。

尝试习惯[jQuery 事件委托](http://api.jquery.com/on/)，您将不必处理类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:55:01.027

这是因为变量 $searchResultComp 是在 init 函数中设置的，jquery 对象本身是动态的，而不是使用 jquery 对象查询的结果。

find() 方法查找与您指定为 find 条件的模式匹配的 jquery 对象的所有后代，并将它们作为新的 jquery 对象返回。如果没有匹配的后代，它将返回一个没有内容的 jquery 对象。您可以通过提醒对象的长度来测试它，它应该为零。

因此，在 handleOverlay 函数中，您需要重置 $searchResultComp 以查找现在符合您条件的所有后代。

# ant - how i can traverse the xml path dynamically in antscript?

> ID：14498061
> 
> 赞同：0
> 
> 时间：2013-01-24T09:36:44.500
> 
> 标签：ant, xml-parsing

Could anyone tell me, how can I traverse the xml path dynamically in antscript? If the parent tag is given from command line arguement. with this , i have to form child tag path ..access the xml file , to pull the value form the formed xml tag path.

```
ant -DId=abc 
```

Given file is

```
<abc>
 <Age>16</Age>
</abc> 
```

Is this correct to give output 16?

```
<echo>${${Id}.Age}</echo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:31:48.763

ANT 不是脚本语言，不幸的是，不支持属性中的属性:-(

我建议的解决方案是嵌入式[groovy 脚本](http://groovy.codehaus.org/The+groovy+Ant+Task)

```
<target name="parse">
    <groovy>
        def data = new XmlSlurper().parse(new File("data.xml"))

        println data.Age
    </groovy>
</target> 
```

方便地（在您的情况下）groovy xml 解析器忽略根标记的名称，这意味着您不必将其作为参数传递。

另请参阅以下类似问题：

*   [如何在 <macrodef> 中进行 <foreach>？](https://stackoverflow.com/questions/14457360/how-to-foreach-in-a-macrodef/)

# opengl - opengl，纹理总是相同的大小

> ID：14498062
> 
> 赞同：5
> 
> 时间：2013-01-24T09:36:48.417
> 
> 标签：opengl, textures, image-scaling

我正在尝试使用以下代码将纹理应用于顶点数组：

```
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texture);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glColor3f(1.0f, 1.0f, 1.0f);

glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnableClientState(GL_VERTEX_ARRAY);
glTexCoordPointer(2, GL_FLOAT, 0, texcoords);
glVertexPointer(3, GL_FLOAT, 0, vertices);
glDrawElements(GL_QUADS, 12, GL_UNSIGNED_BYTE, faceIndices);
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

glDisable(GL_TEXTURE_2D); 
```

使用这种纹理： ![质地](../Images/603ff903e07074a12f6c5ecff839673d.png)

所以我有这个结果： ![结果](../Images/352b31a1d3387cfa003a8374a7697898.png)

现在我想知道如何缩放地板纹理，我已经尝试使用 Photoshop 缩放纹理，但结果相同但更重。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:41:16.893

我假设您的意思是您希望纹理少平铺或平铺更多。在这种情况下，改变你的纹理坐标，而不是纹理（即任何数据在`texcoords`）。

此外，您的示例纹理是蓝色的，但在渲染图像中它是棕色的。加载时您可能正在交换 R+B 通道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:52:37.317

这取决于您的纹理坐标，您希望如何映射纹理。举个例子，它覆盖了整个多边形

```
glTexCoord2f(0.0f, 0.0f);
glTexCoord2f(1.0f, 0.0f);
glTexCoord2f(1.0f, 1.0f);
glTexCoord2f(0.0f, 1.0f); 
```

现在，如果您想重复纹理五次，请提供像`

```
glTexCoord2f(0.0f, 0.0f);
glTexCoord2f(5.0f, 0.0f);
glTexCoord2f(5.0f, 5.0f);
glTexCoord2f(0.0f, 5.0f);` 
```

像上面的例子一样，改变你想要如何映射纹理的值。

# .htaccess - 使用 htaccess 修改部分 URL

> ID：14498063
> 
> 赞同：1
> 
> 时间：2013-01-24T09:36:51.100
> 
> 标签：.htaccess, redirect

我已将我的 abc 文件夹从**/myproduct/abc**目录移动到服务器上的**/myproduct/extensions/abc**。

如何将所有呼叫重定向`http://localhost/myproduct/abc`到`http://localhost/myproduct/extensions/abc`？

例如：如果请求的 URL 是`http://localhost/myproduct/abc/pqr.php`，它应该被重定向到`http://localhost/myproduct/extensions/abc/pqr.php`

基本上我想要可以放在 /myproduct 文件夹中的 .htaccess 代码，如果有人请求这样的 URL `http://localhost/myproduct/abc/pqr.php`，它将查找 /abc/ 的出现并将其替换为 /extensions/abc/ 我们无法将 /myproduct/abc/ 替换为 /myproduct /extensions/abc/ 因为 myproduct 可以对 yourproduct 或 myproduct1 等进行白标。

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:31:33.877

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /(.*)/abc/([^\.]+)\.php/? [NC]
RewriteRule .*   %1/extensions/abc/%2.php  [R=301,L] 
```

重定向

`http://localhost/Any/Number/Of/Folders/abc/AnyFileName.php`

到：

`http://localhost/Any/Number/Of/Folders/extensions/abc/AnyFileName.php`

要保留第一个 URL 显示在浏览器的地址栏中，请`R=301`从`[R=301,L]`

**笔记：**

1.  如果只`myproduct/`需要文件夹，如下所示：`http://localhost/myproduct/abc/AnyFileName.php`该规则也可以使用。

2.  例如，如果 file 存在于传入 URL 中的文件夹`AnyFileName.php`abc中**，**则将跳过该规则（无论如何都没有意义）。该脚本必须位于替代 URL:中的文件夹**abc**中。`pqr.php`****`http://localhost/Any/Number/Of/Folders/extensions/abc/`****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:39:02.517

您使用的是哪个服务器？如果您使用的是 Apache 2，请查看 mod_rewrite。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:57:24.967

维杰，

试试这个：

```
RewriteEngine On
RewriteBase /

# REQUEST_FILENAME should not be file name
RewriteCond %{REQUEST_FILENAME} !-f

# REQUEST_FILENAME should not be directory name
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_URI} /(.*)/abc/(.*)/? [NC]
RewriteRule .*   %1/extensions/abc/%2  [R=301,L] 
```****

# php - CodeIgniter 框架中的 PHP CRON 作业

> ID：14498069
> 
> 赞同：3
> 
> 时间：2013-01-24T09:37:10.530
> 
> 标签：php, codeigniter, cron

我正在尝试创建一个 CRON 作业，该作业指向我构建的 Code Igniter 系统中文件内的一个函数。我已经在我的 CPanel 上创建了 CRON 作业，并且我已经使用根文件中的一个简单的邮件 php 函数对其进行了测试，并且它可以正常工作，但是，我希望将 CRON 作业指向我的 MVC 框架中的一个位置，并且对于一些原因这似乎不起作用。

这是在我的 CPanel 上设置的 CRON 作业：

0 0 * * 1 wget -q -O /dev/null [http://www.urlhere.co.uk/index.php/cron_event/send_reminders](http://www.urlhere.co.uk/index.php/cron_event/send_reminders)

这是我希望运行的控制器。它的位置在 system/controllers/cron_event.php 中：

```
<?php

class Cron extends Controller {

function Cron_event()
{
    parent::Controller();
}

/**
 * The index method just displays an access denied message, as we don't support viewing this module in the browser.
 */
function index()
{
    $this->send_reminders();
    $this->load->view('themes/base/header', array('title'=>"Access Denied"));
    $this->load->view('cron/access_denied');
    $this->load->view('themes/base/footer');

}

/**
 * Updates the PR Online Calendar by sending out email notifications for events that have not yet had them sent out.
 */

public function send_reminders() {
    $to = 'jamesholman@urlgoeshere.co.uk';
    $from = 'bigwavetest';
    $message = 'test';

    mail($to, $from, $message); 
}
}

?> 
```

当我指向这个控制器时，CRON 作业停止工作。
我有一种感觉，因为我没有包含和需要 Code Igniter 框架文件，但我不确定。有人对为什么这不起作用有任何想法吗？
提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:47:13.457

在您的 cron 调用中，您输入：

```
wget -q -O /dev/null http://www.urlgoeshere.co.uk/index.php cron_event 
```

我认为应该是：

```
wget -q -O /dev/null http://www.urlgoeshere.co.uk/index.php/cron_event 
```

或者：

```
wget -q -O /dev/null http://www.urlgoeshere.co.uk/cron_event 
```

如果您从 URL 中删除了 index.php。

# php - Google Checkout - 仅获得第一个订单状态更改通知

> ID：14498071
> 
> 赞同：0
> 
> 时间：2013-01-24T09:37:15.097
> 
> 标签：php, payment-gateway, payment, google-checkout, android-pay

我已经为我的应用程序实现了 GC 响应处理程序。在开发服务器上的沙箱中测试时一切正常。日志说我们一一收到以下通知：

> new-order-notification
> order-state-change-notification(NEW,CHARGEABLE)
> 风险信息通知
> order-state-change-notification(PROCESSING,CHARGEABLE)
> order-state-change-notification(PROCESSING,CHARGING)
> order-state- change-notification(PROCESSING,CHARGED)
> 收费金额通知
> order-state-change-notification(PROCESSING,CHARGED)

一切似乎都很好，当我确定订单是**CHARGED**时，我执行了一些操作。但是在实时服务器和实时帐户上还有另一种行为。
我得到的最后一件事是风险信息通知。
而已。
**已收费**，但我没有收到**CHARGED**消息并且未执行操作。
请分享您对正在发生的事情的想法。
有人注意到这种行为吗？
问候，波格丹。

# java - java.lang.IllegalArgumentException：同时将 '\n\ 添加到 URLConnection 属性 setRequestProperty

> ID：14498074
> 
> 赞同：1
> 
> 时间：2013-01-24T09:37:23.683
> 
> 标签：java, urlconnection

我有一个问题。当我尝试这样做时

```
connection.setRequestProperty("Sample", "Sample data \n"); 
```

我得到 java.lang.IllegalArgumentException: 为什么我需要这样做。因为我的朋友向我提出了将其添加到服务器的挑战。我很困惑。请帮助我是否可以向 URLConnection 属性添加转义字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:40:53.860

尝试编码值

```
connection.setRequestProperty("Sample", URLEncoder.encode("Sample data \n", "UTF-8")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:52:55.640

因为[是Java中的错误，](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6459815) 您可以执行以下操作：

```
String encoded = new sun.misc.BASE64Encoder().encode ("Sample data \n".getBytes()); 
connection.setRequestProperty("Sample", encoded); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:24:34.200

HTTP 标头字段中不能有行尾。当然使用转义机制会有所帮助，但在这种情况下，客户端和服务器需要就转义方案达成一致。

# dart - 更新到 lib v2 (SDK 0.3.1_r17328) 后，Pub 不会在 Windows 7 上下载依赖项

> ID：14498075
> 
> 赞同：3
> 
> 时间：2013-01-24T09:37:26.090
> 
> 标签：dart, dart-pub

在更新到 Dart SDK 和 Dart Editor 的 0.3.1_r17328 版本后，我在导入一些库特别是 Args 库时遇到了一些麻烦。我直接导入 Args 或导入 Web_ui 都有同样的问题，其中 Args 是依赖项之一。

这是我的 pubspec.yaml：

```
name:  notes
description:  A sample application

dependencies:
  web_ui: 0.3.0+1 
```

或者：

```
name:  notes
description:  A sample application

dependencies:
  args: 0.3.1+1 
```

这是从*build.dart生成的错误*

```
Unable to open file:     C:/Users/Fabio/Dropbox/progetti/note/packages/args/args.dart'package:web_ui/component_build.dart': Error: line 25 pos 1: library handler failed
import 'package:args/args.dart';

'file:///C:/Users/Fabio/Dropbox/progetti/note/build.dart': Error: line 1 pos 1: library handler failed
import 'package:web_ui/component_build.dart'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:08:03.140

我解决了这个问题。似乎缓存文件夹（Pub）已损坏。

我已删除文件夹 Cache: C:\Users\< *UserName* >\AppData\Roaming\Pub

然后我从命令行运行`pub install`它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T07:13:02.230

这个问题一直困扰着我几个星期。我没有使用 Windows，所以这个答案不是为了帮助使用 Windows 7 的原始发布者。

如果您使用的是 Linux，这里是我用来修复损坏的 pub 缓存的步骤。

转到您的应用程序的顶级目录。您应该至少看到 pubspec.lock、pubspec.yaml、一个名为 packages 的文件夹和一个名为 web 的文件夹。删除您的 pubspec.lock 和 packages 文件夹。

*[确保您没有将自己的库存储在包文件夹中]*

```
cd ~/dart/myApp/
rm -r packages
rm pubspec.lock 
```

现在，一旦您删除了这些文件：

```
pub cache repair 
```

注意 1：如果您的 dart-sdk 不在系统 $PATH 中，那么在使用上述命令时，您将需要使用 sdk 的绝对路径。如果您需要解释，请发表评论。

注意 2：这是 Dart 1.5.3 的工作解决方案。我没有在早期版本上测试过这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:34:08.803

不幸的是，我的 Windows XP 机器遇到了同样的错误。

> 最后，我登录到我的 windows 7 机器并能够下载包，将它们压缩并将库粘贴到我的 windows XP dart 编辑器中。成功！

我没有理由相信我在使用家用电脑时遇到了@shindokaku 的确切代理问题。

我尝试了有关删除 .cache 文件、pub.lock 文件和包文件夹并重试的所有建议。我卸载了飞镖编辑器并再次尝试。我也尝试使用git资源下载web-ui并通过命令行运行命令无济于事

在这个类似的问题中包括建议：

*   [找不到引用的源包](https://stackoverflow.com/questions/13161155/cannot-find-referenced-source-packages)
*   [是否存在通过代理解决发布依赖关系的解决方法](https://stackoverflow.com/questions/13849336/is-there-a-workaround-for-pub-dependency-resolution-through-proxies)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:44:14.887

尝试删除项目根文件夹中的 pubspec.lock 文件和包目录。然后再次运行 pub install ，当事情变得古怪时，这就是我所做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T22:22:07.393

您应该尝试运行`pub update`. 我有时发现这在编辑器中并没有按预期工作，但从命令行调用时通常工作得非常顺利。

# css - 背景透明度影响文本

> ID：14498081
> 
> 赞同：2
> 
> 时间：2013-01-24T09:37:53.850
> 
> 标签：css, transparency

在我的网站上，我有一个滑块，上面放了一些文字。我给文本设置了黑色、透明的背景，这样会更易读。

![在此处输入图像描述](../Images/ca6dacee544869e45948fd65014d3f2f.png)

如您所见，这正是我想要达到的效果。但由于某种原因，我的 CSS 确实会通过它的不透明度过滤器影响文本……
文本不再是 100% 白色了。有没有办法推翻这种 CSS 行为？

**编辑**：应该支持 IE8...

这是我的 CSS：

```
.front-slider-body {
  background-color: #000;
  zoom: 1;
  filter: alpha(opacity=50);
  opacity: 0.5;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:41:28.383

那是因为整个元素`opacity`都被改变了，而不仅仅是背景。

如果您只想不透明，则使用而不是十六进制代码来`background-color`更改该属性的不透明度：`rgba`

```
background-color: rgba(0,0,0, 0.5); 
```

* * *

全班：

```
.front-slider-body {
  background-color: rgba(0,0,0, 0.5);
  zoom: 1;
} 
```

* * *

以下显示了支持此功能的浏览器列表：

[http://caniuse.com/#search=rgba](http://caniuse.com/#search=rgba)

如果您需要支持较旧的浏览器，那么我建议您创建一个 1px*1px 半透明图像并将其用作`background-image`. 它不整洁，但它是旧浏览器的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:40:13.560

代替

```
background-color: #000;
filter: alpha(opacity=50);
opacity: 0.5; 
```

利用

```
background-color: rgba(0,0,0, .5); 
```

`rgba()`可用`IE>8`且仅影响背景，使文本和嵌套元素完全不透明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:51:28.907

您可能想尝试将背景与文本分开。文本继承了其父级的不透明度，这是您面临的问题。要解决此问题，请将背景设置为文本的同级。所以，而不是：

```
// Just example layout
<div id="container" style="background: #000; opacity: 0.5;">
    Your Text
</div> 
```

你可以试试：

```
<div id="container" style="position: relative;">
    <div id="background" style="position: absolute; width: 100%; height: 100%; background: #000; opacity: 0.5;" ></div>
    <div id="text">Your Text</div>
</div> 
```

（显然，你会使用类和更多的跨浏览器兼容的 CSS - 这只是为了演示这个概念）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:44:49.067

## 现代浏览器（IE9+、FF、Chrome）

通过使用为您的背景而不是整个元素（正如其他人指出的那样）提供透明度

```
background-color: rgba(0, 0, 0, .5); 
```

## 旧版浏览器（包括 IE7+）

较旧的浏览器^(*（Microsoft 类型）*)不支持`rgba`，因此在这种情况下，您可以使用带有 alpha 通道的 PNG 来实现相同的结果（并且也可以在现代浏览器中使用）：

```
background-image: url(transBack.png); 
```

您的 PNG 应为黑色，透明度为 50%。

# php - 如何使用单个按钮在服务器上保存更多融合图表

> ID：14498085
> 
> 赞同：0
> 
> 时间：2013-01-24T09:38:08.083
> 
> 标签：php, fusioncharts

我正在尝试将图表保存在服务器端。我成功地保存了一张图表。但我无法保存多个图表。在这里，我提到了 2 个图表，但只有一个图表将保存在服务器上。怎么可能？

我的代码是

```
 <script type="text/javascript">
    var totalCharts = 2;

function exportCharts(exportType)
{

        for( var i = 0; i < totalCharts; i++ ) {
        var num = i+1;
        var id = "chart"+num+"Id";
        exportchart(exportType,id);

}
}

function exportchart(exportType,id)
{
var chart = FusionCharts(id);

        // Now, we proceed with exporting only if chart has finished rendering.
        if (chart.hasRendered() != true)
        {
                alert("Please wait for the chart to finish rendering, before you can invoke exporting");
                return;
        }

        // call exporting function
        chart.exportChart( {exportFormat: exportType} );

}

</script>

<p align="center">
    <input type="button" class="button" value="Export as PNG" onclick="exportCharts('PNG')" id="exportButtonPNG" />
  </p>

<div >
  <div id="average" style="text-align:center">Loading Chart... </div>
   <div id="overall" style="text-align:center">Loading Chart... </div>
  </div>

  <script type="text/javascript" >

        // Render the chart (See documentation for explanation of the codes below)
        //echo renderChart("FusionCharts/MSColumn3D.swf", "", $strXML3, "average", 1100, 350);
var chart2 = new FusionCharts("FusionCharts/MSColumn3D.swf", "chart1Id", "600", "400", "0", "1");                                       
        chart2.setXMLUrl("average.xml");
        chart2.render("average");
        var chart1 = new FusionCharts("FusionCharts/MSColumn3D.swf", "chart2Id", "600", "400", "0", "1");                                       
        chart1.setXMLUrl("overall.xml");
        chart1.render("overall");

  </script>

<!-- Google Analytics Tracker Code Starts -->
<script type="text/javascript">
// analytics
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost 
        + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if (typeof(_gat) == "object") {
        var pageTracker = _gat._getTracker("UA-215295-3"); pageTracker._initData(); pageTracker._trackPageview();
}
</script> 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:14:00.240

您可能需要链接对您拥有的每个图表的 exportChart 函数的调用。

```
 var totalCharts = 2;

     (function () {

         var totalExported = 0,
             exportType;

            window.FC_Exported = function() {
                exportchart();
            };

            window.exportchart = function(exportFormat) {

                exportType = exportType || exportFormat || 'jpg';
                totalExported++ ;

                var chart = FusionCharts("chart" + totalExported + "Id");
                if (totalExported > totalCharts) {
                    return;
                }

                if (chart.hasRendered() != true) {
                    alert("Please wait for the chart to finish rendering, before you can invoke exporting");
                }   

                // call exporting function
                chart.exportChart( {exportFormat: exportType} );

            };

     }()); 
```

# ios - 从命令行运行后仪器无法继续

> ID：14498086
> 
> 赞同：0
> 
> 时间：2013-01-24T09:38:08.633
> 
> 标签：ios, command-line, continuous-integration, ui-automation, ios-ui-automation

当我使用此脚本从命令行运行仪器时

```
instruments -w <DEVICE_ID> -t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate <PATH_TO_APP> -e UIASCRIPT <PATH_TO_SCRIPT> -e UIARESULTSPATH <RESULTS_PATH> 
```

应用程序在设备上打开，但不运行脚本。终端光标移动到下一行，看起来它只是冻结

![在此处输入图像描述](../Images/26d1b6bad43e32f49c283731c9776c35.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:14:21.223

您需要使用开发者资料签署您的应用程序。如果您使用企业配置文件对其进行签名，该应用程序将不会从命令行运行

# c# - 表格内容到列表视图

> ID：14498089
> 
> 赞同：0
> 
> 时间：2013-01-24T09:38:15.270
> 
> 标签：c#, database, listview

您好，我遇到了一个问题，我需要显示名为Employees 的数据库表的内容。

它需要显示在列表视图或类似的东西中。

我无法让列表视图框显示表格内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:41:07.470

我认为以下代码应该适合您：

```
private void BindTable(DataTable table)
{
    lvItemList.Clear();

    foreach (DataRow row in table.Rows)
    {
        ListViewItem lvItem = new ListViewItem();
        lvItem.Text = row["ColumnName"].ToString();
        lvItemList.Items.Add(lvItem);

        // Or in a one-liner
        //lvItemList.Items.Add(row["ColumnName"].ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:42:42.377

您需要重写 toString() 方法并提供要显示的字符串数据。

# iphone - iOS 6 - Mapview，覆盖淡入

> ID：14498095
> 
> 赞同：1
> 
> 时间：2013-01-24T09:38:41.230
> 
> 标签：iphone, ios, ios5, ios6, overlay

我一直在构建一个应用程序来绘制当前用户沿地图移动的线条。现在，在 iOS5 中，当我将叠加层添加到地图视图时，它只是直接添加它，在 iOS6 中，它添加了带有“淡入”动画的叠加层。我不想要这个烦人的动画。我还有一个功能可以在保存的坐标上播放轨迹（在用户完成跑步或步行之后），当我播放这个时，线条闪烁得非常快，只是因为这个动画。这真的很烦人，我真的很感激任何指导或解决方案来摆脱这个动画。

添加叠加层的代码：

```
MKMapPoint *pointsArray = malloc(sizeof(CLLocationCoordinate2D)*2);
pointsArray[0]= MKMapPointForCoordinate(oldLocation.coordinate); 
pointsArray[1]= MKMapPointForCoordinate(newLocation.coordinate);
self.routeLine = [MKPolyline polylineWithPoints:pointsArray count:2];
free(pointsArray);    
[self.mapView addOverlay:self.routeLine]; 
```

显示叠加的代码：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay{
    MKOverlayView *overlayView = nil;
    MKPolylineView  *routeLineView = [[MKPolylineView alloc] initWithPolyline:(MKPolyline *)overlay];
    routeLineView.fillColor = [UIColor blueColor];
    routeLineView.strokeColor = [UIColor blueColor];
    routeLineView.backgroundColor = [UIColor clearColor];
    routeLineView.lineWidth = 10;
    routeLineView.lineCap = kCGLineCapRound;
    overlayView = routeLineView;
    return overlayView;
} 
```

谢谢！

编辑：

通过路径的代码：

```
playTimer = [NSTimer scheduledTimerWithTimeInterval:interval
                                                 target:self
                                               selector:@selector(playPathTimer)
                                               userInfo:nil
                                                repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:playTimer forMode:NSRunLoopCommonModes];

- (void)playPathTimer{
    MKMapPoint *pointsArray = malloc(sizeof(CLLocationCoordinate2D) * 2);
    double latitude1 = ((WorldPoint *)[coordsArray objectAtIndex:playCounter]).latitude.doubleValue;
    double longitude1 = ((WorldPoint *)[coordsArray objectAtIndex:playCounter]).longitude.doubleValue;
    double latitude2 = ((WorldPoint *)[coordsArray objectAtIndex:playCounter+nextCord]).latitude.doubleValue;
    double longitude2 = ((WorldPoint *)[coordsArray objectAtIndex:playCounter+nextCord]).longitude.doubleValue;
    CLLocation *location1 = [[CLLocation alloc] initWithCoordinate:CLLocationCoordinate2DMake(latitude1, longitude1)
                                                          altitude:0
                                                horizontalAccuracy:0
                                                  verticalAccuracy:0
                                                         timestamp:[NSDate date]];
    CLLocation *location2 = [[CLLocation alloc] initWithCoordinate:CLLocationCoordinate2DMake(latitude2, longitude2)
                                                          altitude:0
                                                horizontalAccuracy:0
                                                  verticalAccuracy:0
                                                         timestamp:[NSDate date]];
    pointsArray[0] = MKMapPointForCoordinate(location1.coordinate);
    pointsArray[1] = MKMapPointForCoordinate(location2.coordinate);
    self.routeLine = [MKPolyline polylineWithPoints:pointsArray count:2];
    free(pointsArray);

    [self.mapView addOverlay:self.routeLine];
    [playRouteLines addObject:self.routeLine];

//    self.mapView.centerCoordinate = CLLocationCoordinate2DMake(latitude1, longitude1);

    playCounter = playCounter + nextCord;
    if(playCounter + nextCord >= coordsArray.count){
//        [displayLink setPaused:YES];
//        [displayLink invalidate];
       [playTimer invalidate];
        playTimer = nil;
        playCounter = 0;
        [self showStartAndEndFlags];
        if(ee.trail.checkpoint.count > 0){
            [self showCheckpoints];
        }
        self.playButton.enabled = YES;
        MKCoordinateRegion adjustedRegion = [self.mapView regionThatFits:[self getRegionWithCorrectZooming]];
        [self.mapView setRegion:adjustedRegion animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:14:23.593

您可以使用您自己的 MKOverlayView 子类（MKPolylineView 的超类），而不是使用 MKPolylineView，然后覆盖您自己绘制线条的 drawMapRect:zoomScale:inContext:。

我想有了这个你不会有任何淡入淡出的动画（我正在使用它并且从未注意到任何动画）。

为您的 drawMapRect:zoomScale:inContext: 实现尝试以下代码。您需要创建属性 lineColor(CGColor) 和 lineWidth (CGFloat)。

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context {
    MKPolyline *polyline = self.overlay;
    CGContextSetStrokeColorWithColor(context, self.lineColor);
    CGContextSetLineWidth(context, self.lineWidth/zoomScale);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPoint *points = malloc(sizeof(CGPoint)*polyline.pointCount);
    for (int i=0; i<polyline.pointCount; i++) {
        points[i] = [self pointForMapPoint:polyline.points[i]];
    }
    CGPathAddLines(path, NULL, points, polyline.pointCount);

    CGContextAddPath(context, path);

    CGContextDrawPath(context, kCGPathStroke);
    CGPathRelease(path);
    free(points);
} 
```

# xml - Tomcat 部署 2 个应用程序和 2 个数据库

> ID：14498100
> 
> 赞同：0
> 
> 时间：2013-01-24T09:38:57.580
> 
> 标签：xml

我有 2 个应用程序和 2 个几乎相同的数据库 - 都是电话簿。它们被命名为`phonebook`和`phonebook2`，以及数据库`phonebookdb`和`phonebookdb2`。我使用 Spring 和 Hibernate。我应该配置什么才能使它起作用？

我在 context.xml 中完成了这个：

```
<Resource name="jdbc/phonebookdb" auth="Container"
        type="javax.sql.DataSource"
        username="root" password=""
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/phonebookdb?useUnicode=true&amp;characterEncoding=UTF-8"
        maxActive="100" maxIdle="30" maxWait="10000" />
<Resource name="jdbc/phonebookdb2" auth="Container"
        type="javax.sql.DataSource"
        username="root" password=""
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/phonebookdb2?useUnicode=true&amp;characterEncoding=UTF-8"
        maxActive="100" maxIdle="30" maxWait="10000" /> 
```

在`server.xml`，我已经这样做了：

```
<Resource auth="Container" driverClassName="com.mysql.jdbc.Driver" maxActive="100" maxIdle="30" maxWait="10000" name="jdbc/phonebookdb" password="" type="javax.sql.DataSource" url="jdbc:mysql://localhost:3306/phonebookdb?useUnicode=true&amp;characterEncoding=UTF-8" username="root"/>
   <Resource auth="Container" driverClassName="com.mysql.jdbc.Driver" maxActive="100" maxIdle="30" maxWait="10000" name="jdbc/phonebookdb2" password="" type="javax.sql.DataSource" url="jdbc:mysql://localhost:3306/phonebookdb2?useUnicode=true&amp;characterEncoding=UTF-8" username="root"/>
   <Realm className="org.apache.catalina.realm.DataSourceRealm" dataSourceName="jdbc/phonebookdb" debug="99" digest="md5" roleNameCol="ROLA" userCredCol="LOZINKA" userNameCol="EMAIL" userRoleTable="phonebook.ROLE" userTable="phonebookdb.KORISNICI"/>
   <Realm className="org.apache.catalina.realm.DataSourceRealm" dataSourceName="jdbc/phonebookdb2" debug="99" digest="md5" roleNameCol="ROLA" userCredCol="LOZINKA" userNameCol="EMAIL" userRoleTable="phonebook2.ROLE" userTable="phonebookdb2.KORISNICI"/> 
```

我实际上已经让它工作了，但是与数据库通信的东西是不对的。当我尝试插入一个新用户*（cro.korisnik）时*，我得到了这个异常：

```
SEVERE: Cannot add or update a child row: a foreign key constraint fails (`phonebookdb`.`role`, CONSTRAINT `role_ibfk_5` FOREIGN KEY (`ROLA_ID`) REFERENCES `korisnici` (`KORISNIK_ID`) ON DELETE CASCADE ON UPDATE CASCADE)
24.01.2013\. 10:50:53 org.slf4j.impl.JCLLoggerAdapter error
SEVERE: Could not synchronize database state with session
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:96)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:179)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
    at org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:390)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:407)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:683)
    at phonebook.dao.PhoneBookRepositoryDAOHibernate.setRoleForNewUser(PhoneBookRepositoryDAOHibernate.java:116)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy34.setRoleForNewUser(Unknown Source)
    at phonebook.service.PhoneBookServiceImpl.setRoleForNewUser(PhoneBookServiceImpl.java:58)
    at phonebook.controllers.AddNewUser.addNewUser(AddNewUser.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:328)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:95)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:340)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.BatchUpdateException: Cannot add or update a child row: a foreign key constraint fails (`phonebookdb`.`role`, CONSTRAINT `role_ibfk_5` FOREIGN KEY (`ROLA_ID`) REFERENCES `korisnici` (`KORISNIK_ID`) ON DELETE CASCADE ON UPDATE CASCADE)
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2054)
    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1467)
    at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 79 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`phonebookdb`.`role`, CONSTRAINT `role_ibfk_5` FOREIGN KEY (`ROLA_ID`) REFERENCES `korisnici` (`KORISNIK_ID`) ON DELETE CASCADE ON UPDATE CASCADE)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1040)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2734)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2458)
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2006)
    ... 84 more
24.01.2013\. 10:50:53 phonebook.controllers.AddNewUser addNewUser 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:11:30.477

找到了答案.. 我没有在映射到数据库表的持久类中指定映射。@Table(name = "phonebookdb.KORISNICI") @Table(name = "phonebookdb2.KORISNICI") 而不是 @Table(name = "KORISNICI") @Table(name = "KORISNICI")

# java - Spring MVC 3.0- 传递模型和视图对象时，URL 映射被视为视图

> ID：14498108
> 
> 赞同：0
> 
> 时间：2013-01-24T09:39:37.737
> 
> 标签：java, spring, spring-mvc

我是 Spring 新手，正在 MVC 中开发 Hello world 应用程序 当我从控制器返回 ModelAndView 对象时，URL 映射被搜索为相应的视图。我已经包含了所有正确的 jars。这是代码。/web -inf/sample-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">             (http://www.springframework.org/schema/context/spring-context-3.0.xsd%27%3E)
   <context:component-scan base-package="com.tcs.laks.sample.controller" />
   <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">  
         <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> </beans> 
```

这是web.xml---

```
<?xml version="1.0" encoding="UTF-8"?>

  <web-app id="WebApp_ID" version="2.4"
   xmlns="http://java.sun.com/xml/ns/j2ee" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
   http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">    (http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd%27%3E)
   <display-name>Spring MVC Application</display-name>

   <servlet>
      <servlet-name>sample</servlet-name>
      <servlet-class>
         org.springframework.web.servlet.DispatcherServlet
      </servlet-class>
      <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
      <servlet-name>sample</servlet-name>
      <url-pattern>/</url-pattern>
   </servlet-mapping>

</web-app> 
```

HelloWorldController 是..

```
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.portlet.ModelAndView;

@Controller
@RequestMapping("/welcome")
public class HelloWorldController {

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView helloWorld(){
    String message = "Hello";
    return new ModelAndView("hello", "message", message);
   }
} 
```

url 给出为 //localhost:8080/sample/welcome 它给出了 404，因为它试图找到 welcome.jsp 而不是 hello.jsp

HTTP 状态 404 - /sample/WEB-INF/jsp/welcome.jsp

* * *

类型状态报告

消息 /sample/WEB-INF/jsp/welcome.jsp

描述 请求的资源 (/sample/WEB-INF/jsp/welcome.jsp) 不可用。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:54:11.090

`contextConfigLocation`在 web.xml 文件中为调度程序 servlet指定init-param。调度程序甚至正在读取/使用当前配置

```
 <servlet>
      <servlet-name>sample</servlet-name>
      <servlet-class>
         org.springframework.web.servlet.DispatcherServlet
      </servlet-class>
      <init-param>
       <param-name>contextConfigLocation</param-name>
         <param-value>WEB-INF/sample-servlet.xml</param-value>
       </init-param>
      <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
      <servlet-name>sample</servlet-name>
      <url-pattern>/</url-pattern>
   </servlet-mapping> 
```

此外，您似乎已经导入了 ModelAndView 的 portlet 版本，请确保这是您想要的。如果不导入，`org.springframework.web.servlet.ModelAndView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:35:34.070

您使用了错误的 ModelAndView 类

```
import org.springframework.web.portlet.ModelAndView; 
```

应该是

```
import org.springframework.web.servlet.ModelAndView; 
```

其他一切都很好。

# c# - 从属性返回字符串连接的最有效方法

> ID：14498111
> 
> 赞同：4
> 
> 时间：2013-01-24T09:39:55.687
> 
> 标签：c#, string, concatenation, stringbuilder

我在这里阅读了一些帖子，常见的建议是如果加入三个字符串，则 stringbuilder 是最有效的。

所有变量都是其他属性。

```
public string Summary
{
  get 
  {
    return Name.Replace("_", " ") + "<strong>[" + Total + " Devices - " + BadCount + " Offline, " + PendingCount + " Pending]</strong>";
  }
} 
```

我加入了四个，是一个简单的串联合适还是我应该使用字符串生成器？只是似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T09:43:24.940

在这种情况下使用最易读的内容。否则就是[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)。

我会使用[`String.Format`](http://msdn.microsoft.com/en-us/library/b1csw23d%28v=vs.80%29.aspx)：

```
String result = String.Format("{0}<strong>[{1} Devices - {2} Offline, {3} Pending]</strong>"
, Name.Replace("_", " ")
, Total
, BadCount
, PendingCount);
return result; 
```

甚至字符串连接也没有那么糟糕，因为字符串存储在[**实习池中**](http://en.csharp-online.net/CSharp_String_Theory%E2%80%94String_intern_pool)。因此，如果您第二次使用一个字符串，它不会被创建，而是使用已经可用的引用。

所以作为经验法则：

*   如果您要连接几个字符串并且代码很难理解，请使用`String.Format`
*   如果您要连接几个（文字）字符串并且代码仍然可读，请使用`+`（字符串连接）
*   如果您在带有可变字符串的（长）循环中创建字符串，请使用`StringBuilder`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:42:25.393

采用`String.Format`

```
public string Summary
{
  get 
  {
    return String.Format(
        "{0}<strong>[{1} Devices - {2} Offline, {3} Pending </strong>",
        Name.Replace("_", " "), Total, BadCount, PendingCount);
  }
} 
```

# php - 如果产品属于多个类别，则不会在搜索结果中列出

> ID：14498121
> 
> 赞同：0
> 
> 时间：2013-01-24T09:40:10.343
> 
> 标签：php, magento, magento-1.7

如果我将产品分配到 2 个类别中，例如`Roses->English Roses`该产品将不再出现在搜索结果中（快速搜索或高级搜索）

如果我只将它归为一类，或者`Roses`搜索`English Roses`按预期工作。

这可能会影响什么？

我尝试了常见的疑点，如重新索引、缓存、从配置中禁用库存管理、启用所有产品......

问题出现在店铺管理员将商品从一个品类移到另一个品类、重组一些品类等之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:46:49.307

事实证明，这是通过禁用和重新启用产品“修复”的。

# linux - 通过 sh 运行 ddl 文件

> ID：14498128
> 
> 赞同：0
> 
> 时间：2013-01-24T09:40:33.547
> 
> 标签：linux, oracle, shell, unix

我在其中一台服务器上通过 sh 运行 ddl 脚本文件但在另一台服务器上执行良好时遇到问题。脚本如下

```
sqlplus mgr/$1@$2 @export_all_tables_mgr.ddl
if [ $? != 0 ];
then
echo 'ERROR exporting MGR data, Refer to .CSV and .CTL files for detail.'   | tee -a MGR_ExtractionLog.log
fi 
```

它使用 sqlplus 来运行 ddl 文件，但其中一台是流氓服务器，它只会连接到 sql plus 并且不会做任何事情。

```
oracle@dbsdev55z2 $ export_all_tables_mgr.sh password servicename

SQL*Plus: Release 10.2.0.4.0 - Production on Thu Jan 24 08:39:18 2013

Copyright (c) 1982, 2007, Oracle.  All Rights Reserved.

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production With the Partitioning, Data Mining and Real Application Testing options

SQL> 
```

这里要提一下，我这里用的是Oracle 10g。export_all_tables_mgr.ddl 文件如下

```
 alter session set nls_date_format = 'DDMMYYYYHH24MISS';

      @drop_table_temp_extraction_counts.ddl

      @create_table_temp_extraction_counts.ddl

      WHENEVER SQLERROR EXIT -1
      WHENEVER OSERROR EXIT -1

      SET HEADING OFF
      SET FEEDBACK OFF
      SET VERIFY OFF

      SPOOL MGR_ExtractionLog.log
      SELECT TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI:SS'), '- Start extract process' FROM dual;
      SPOOL OFF

      define TableName=TABLE1
      @ExportTable

      define TableName=TABLE2
      @ExportTable

      SPOOL MGR_ExtractionLog.log append
      SELECT TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI:SS'), '- End extract process' FROM dual;
      SPOOL OFF

      EXIT 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:52:31.343

我猜这是一个 shell 问题，尝试在 shell 脚本的第一行添加以下内容，告诉它使用哪个解释器：

```
#!/bin/sh 
```

# c# - 使用 XmlDocument 读取自定义 machine.config 元素？

> ID：14498130
> 
> 赞同：1
> 
> 时间：2013-01-24T09:40:38.227
> 
> 标签：c#, .net, xml, xmldocument, machine.config

在 machine.config 文件中有由 3rd 方软件编写的元素，因此它看起来像这样：

```
<configuration>
    <configSections>
    ...
    </configSections>

    ...

    <Custom>
        <Level1> ... 
        </Level1>

        <Level2> ... 
        </Level2>

        <Level3>
            <add key="key_text1" value="s1" />
            <add key="key_text2" value="s2" />
            <add key="key_text3" value="s3" />
        </Level3>
    </Custom>
</configuration> 
```

我想从 configuration/Custom/Level3 节点获取例如“value”属性的值（“s2”），其中 key="key_text2"。到目前为止，我尝试将 machine.config 作为 XML 打开并从那里开始工作：

```
Configuration config = ConfigurationManager.OpenMachineConfiguration();
XmlDocument doc = new XmlDocument();
doc.LoadXml(config.FilePath); 
```

但是，我得到 XmlException “根级别的数据无效。”。我也不知道如何直接使用配置类方法来完成这项工作。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:44:11.377

尝试使用该`Load()`方法而不是`LoadXml()`

```
doc.Load(config.FilePath); 
```

我还建议您查看 XDocument 而不是 XmlDocument。**从配置文件中获取该值时， LINQ**将非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:45:38.100

使用[RuntimeEnvironment.SystemConfigurationFile](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.runtimeenvironment.systemconfigurationfile.aspx)获取*machine.config*位置：

```
XmlDocument doc = new XmlDocument();
doc.Load(RuntimeEnvironment.SystemConfigurationFile); 
```

还有为什么不使用 Linq to Xml？

```
XDocument xdoc = XDocument.Load(RuntimeEnvironment.SystemConfigurationFile);
var element = xdoc.XPathSelectElement("//Custom/Level3/add[@value='s2']");
if (element != null)
    key = (string)element.Attribute("key"); 
```

# c - C套接字使用二进制协议发送多字段消息

> ID：14498135
> 
> 赞同：2
> 
> 时间：2013-01-24T09:40:55.517
> 
> 标签：c

如何构造具有给定消息规范的请求消息，然后发送到服务器思想 c 套接字？二进制协议用于客户端和服务器通信。以下方法是否正确？

给定消息规范：

```
字段格式长度值
------------ ------ ------ --------
请求 ID Uint16 2 20
requestNum Uint16 2 100
requestTitle String 10 数据串

```

```

    /****************** 方法一 ****************/
    typedef 无符号短 uint16；
    类型定义结构{
        uint16 请求 ID [2]；
        uint16 requestNum [2];
        无符号字符请求标题[10]；
    }requestMsg;
    …
    请求消息 rqMsg;

    memcpy(rqMsg.requesID, "\x0\x14", 2); //20
    memcpy(rqMsg.requesNum, "\x0\x64", 2); //100
    memcpy(rqMsg.requesTitle, "title01", 10);
    …
    发送(sockfd, &rqMsg, sizeof(rqMsg), 0);

    /******************方法2 ****************/
    无符号字符 rqMsg[14];
    memset(rqMsg, 0, 14);
    memcpy(rqMsg, "\x0\x14", 2);
    memcpy(rqMsg+2, "\x0\x64", 2);
    memcpy(rqMsg+4, "title01", 10);
    …
    发送（袜子，&rqMsg，sizeof（rqMsg），0）；

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:50:01.017

恐怕你误解了一些东西：长度列似乎告诉你以字节为单位的长度，所以如果你收到一个 uint16 你会收到 2 个字节。

[您的第一种方法可能会通过数据结构对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)导致严重的问题。如果我在你的鞋子里，我更喜欢第二种方法，我自己将字节填充到一个字节数组中。

关于在此处填写字段的一般说明：我将 memcpy 用于 uint16 等“本机”字段是没有用的。它可能有效，但只是浪费运行时间。您可以填写结构的字段，只需为其分配一个值，例如`rqMsg.requesID = 20;`

另一个问题是二进制协议的字节顺序或[字节序问题。](http://en.wikipedia.org/wiki/Endianness)

作为一个完整的包，我将实现一个“serializeRequest”函数，获取结构的字段并根据协议将其转换为字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-24T17:50:26.770

它们至少部分正确，但我更喜欢第一个，因为与手动索引相比，它允许快速和自然的数据操作和访问，并为错误留下更少的空间。作为奖励，您甚至可以整体复制和分配结构值，并且在 C 中它可以按预期工作。

但是对于任何传出数据，您应该确保使用“打包”结构。它不仅会减少传输到基于数组的实现图的数据量，而且还会确保所有涉及的程序中的字段对齐方式相同。对于我尝试过的大多数 C 编译器（包括 GCC），它可以使用`__attribute__((__packed__))`属性来完成，但是有不同的编译器需要不同的属性，甚至需要不同的关键字。

如果您的应用程序要在不同的体系结构上运行（ARM 客户端与 x86_64 服务器是一个主要示例），则可能还需要字节序控制。在进行任何计算或数据输出之前，我只是使用一些简单的宏来单独预处理每个字段：

```
#define BYTE_SWAP16(num)    ( ((num & 0xFF) << 8) | ((num >> 8) & 0xFF) )
#define BYTE_SWAP32(num)    ( ((num>>24)&0xff) | ((num<<8)&0xff0000) | ((num>>8)&0xff00) | ((num<<24)&0xff000000) ) 
```

但是您可以使用不同的方法，例如 BCD 编码、单独的解码函数或其他方法。

还要注意 uint16_t 已经是一个 2 字节的值。您可能不需要其中两个来存储您的单个值。

# ruby - 在 Ruby 中挤压双字符

> ID：14498136
> 
> 赞同：1
> 
> 时间：2013-01-24T09:40:56.577
> 
> 标签：ruby

在字符串中压缩多字符的最佳方法是什么？

```
Example:
hahahahahaha => ha
lalalala => la
awdawdawdawd => awd

str.squeeze("ha")  # doesn't work
str.tr("haha", "ha") # doesn't work 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:46:52.560

您可以使用基于正则表达式的搜索和替换：

```
str.gsub(/(ha)+/, 'ha') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T10:07:25.733

```
def squeeze(s)
  s.gsub(/(.+?)\1+/, '\1')
end

puts squeeze('hahahaha')                  # => 'ha'
puts squeeze('awdawdawd')                 # => 'awd'
puts squeeze('hahahaha something else')   # => 'ha something else' 
```

# c# - 代码优化：通过存储返回值减少方法调用

> ID：14498137
> 
> 赞同：1
> 
> 时间：2013-01-24T09:41:03.127
> 
> 标签：c#, asp.net, optimization

我在 c# 中创建了一个相当简单的方法，但我在页面的任何地方都使用它。有没有办法减少方法调用，我的意思是一旦方法调用，返回值存储在某处，我使用该值代替。这是我的代码。

我已经声明了一些像这样的公共属性。

```
public OrderCollection GetAllClickCollectOrders
{
    get
    {
        return GetClickCollectOrderDetails(Session["SelectedStorePostCode"].ToString());
    }
}

public OrderCollection GetShippedClickCollectOrders
{
    get
    {
        return GetShippedClickCollectOrderDetails();
    }
} 
```

这里是方法..

```
protected OrderCollection GetClickCollectOrderDetails(string postcode)
{
    // some database ziggy wiggy...

    return cncOrderCol;
}

protected OrderCollection GetShippedClickCollectOrderDetails()
{
    // some database ziggy wiggy...

    return cncShippedOrderCol;
} 
```

所以，让我们说当我想要我这样称呼它的集合时。

```
BindGridView(GetAllClickCollectOrders);
orderCount.Text = "Total orders placed: " + GetAllClickCollectOrders.Count;

if (isShipped.Checked)
{
    BindGridView(GetShippedClickCollectOrders);
    orderCount.Text = "Total orders shipped: " + GetShippedClickCollectOrders.Count;
} 
```

* * *

因此，每当我使用该属性时，它每次都会调用方法并转到数据库并返回结果。`Session["SelectedStorePostCode"]`但是，除非我更改值，否则大多数情况下结果都是相同的。我在想是否有更好的方法可以将结果存储在某个地方并使用它。

注意：代码工作正常，但我正在寻找更好的性能。多谢你们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:45:39.553

您似乎想要的是缓存数据库调用的结果。

您可以通过将数据库中的结果存储在[`Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)类的实例中来实现这一点。

可以将`Cache`项目设置为在一定时间后过期，因此如果基础数据发生更改，您可以确定该值将每隔一段时间更新一次。

这适用于在所有用户（会话）之间共享的项目 - 如果您希望缓存用户之间唯一的项目，您可以将值存储在会话变量中，尽管这可能会对您的 Web 服务器造成内存压力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:46:23.980

就像是？

```
private string collectOrders = String.Empty;

public OrderCollection GetAllClickCollectOrders
{
    get
    {
        if(String.IsNullOrEmpty(collectOrders)
             collectOrders = GetClickCollectOrderDetails(Session["SelectedStorePostCode"].ToString());
        return collectOrders;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:47:20.990

您可以将值存储为`Session`变量；

```
public OrderCollection GetAllClickCollectOrders
{
    get
    {
        if(Session["OrderCollection"] == null)
        {
            Session["OrderCollection"] = GetClickCollectOrderDetails(Session["SelectedStorePostCode"].ToString());
         return Session["OrderCollection"] as OrderCollection;
    }
} 
```

这种方法的一个缺点是您将无法知道数据库中是否有任何更改。如果值不变，没问题；否则，您将需要实施适当的缓存机制以在 db 更改时删除相关的会话变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T09:47:35.973

你不能有类似的东西：

```
private OrderCollection AllClickCollectOrders;

public OrderCollection GetAllClickCollectOrders
{
    get
    {
        if(AllClickCollectOrders == null)
        {
           AllClickCollectOrders = GetClickCollectOrderDetails(Session["SelectedStorePostCode"].ToString());
        }
        return AllClickCollectOrders;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T09:49:04.443

简单的回答：

```
OrderCollection _GetAllClickCollectOrders = null;
bool goToDB = false;
public OrderCollection GetAllClickCollectOrders
{
    get
    {
         if(_GetAllClickCollectOrders == null || goToDB)
        _GetAllClickCollectOrders = GetClickCollectOrderDetails(Session["SelectedStorePostCode"].ToString());

         return _GetAllClickCollectOrders;

    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T09:45:18.710

[`System.Lazy<T>`](http://msdn.microsoft.com/EN-US/library/dd642331%28v=VS.110,d=hv.2%29.aspx)应该是你要找的。

```
public OrderCollection GetAllClickCollectOrders {
  get {
    return m_allClickCollectOrders.Value;
  }
}
private Lazy<OrderCollection> m_allClickCollectOrders = new Lazy<OrderCollection>(
  () => GetClickCollectOrderDetails(Session["SelectedStorePostCode"].ToString())); 
```

当然，这是假设值在初始化后永远不会改变。如果它可以改变，其他答案可能更适合。

# c# - SvcUtil 生成无法编译的 Reference.cs 文件

> ID：14498138
> 
> 赞同：1
> 
> 时间：2013-01-24T09:41:05.437
> 
> 标签：c#, visual-studio-2010, silverlight

我有两个 Silverlight 项目，它们依赖于 web 服务来完成繁重的工作。如果我使用 Visual Studio (2010) 中的“更新服务参考”功能来更新客户端，则创建的 reference.cs 文件不会编译。

看起来 VS/svcutil 忘记在它创建的对象上实现 INotifyPropertyChanged 和相关方法 (RaisePropertyChanged)，但同时它确实尝试在属性设置器中调用该方法。

我不知道这是什么时候开始的，因为我更新这些服务引用已经有一段时间了。我在同一个代码库上的同事没有这个问题。

这听起来对任何人来说都很熟悉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:27:37.857

似乎删除服务并重新生成它有帮助。不知道问题是什么。

# sql - 从左连接更新 Postgres

> ID：14498143
> 
> 赞同：22
> 
> 时间：2013-01-24T09:41:14.553
> 
> 标签：sql, sql-server, postgresql, sql-update

我是 PostgreSQL 的新手，正在尝试从 SQL Server 转换查询。

我有一个用户表，其中包含 bUsrActive、bUsrAdmin 和 sUsrClientCode 列。如果不存在具有相同 sUsrClientCode 且 bUsrAdmin = true 且 bUsrActive = true 的另一个用户，我想更新用户并设置 bUsrActive = false。

在 SQL Server 我有这个查询

```
UPDATE u SET u.bUsrActive = 0
FROM Users u
LEFT JOIN Users u2 ON u.sUsrClientCode = u2.sUsrClientCode AND u2.bUsrAdmin = 1 AND u2.bUsrActive = 1
WHERE u.bUsrAdmin = 0 AND u.bUsrActive = 1 AND u2.nkUsr IS NULL 
```

我正在尝试将其转换为 postgres。我写了3种方法。

1）我的第一次尝试。显然不工作。

```
UPDATE Users u
    SET bUsrActive = false
FROM Users u2
WHERE u.sUsrClientCode = u2.sUsrClientCode AND u2.bUsrAdmin = true AND u2.bUsrActive = true
AND u.bUsrAdmin = false AND u.bUsrActive = true AND u2.nkUsr IS NULL; 
```

2）我明白为什么它不起作用（它会更新所有用户）。我只是不知道如何在 UPDATE ... SET 部分引用表用户 u。

```
UPDATE Users
    SET bUsrActive = false
FROM Users u
LEFT JOIN Users u2 ON u.sUsrClientCode = u2.sUsrClientCode AND u2.bUsrAdmin = true AND u2.bUsrActive = true
WHERE u.bUsrAdmin = false AND u.bUsrActive = true AND u2.nkUsr IS NULL; 
```

3）以下工作，但不使用加入。

```
UPDATE Users
    SET bUsrActive = false
WHERE  NOT EXISTS (
    SELECT 1
    FROM Users u
    WHERE u.sUsrClientCode = Users.sUsrClientCode AND u.bUsrAdmin = true AND u.bUsrActive = true
) AND Users.bUsrAdmin = false AND Users.bUsrActive = true; 
```

我可能会选择最后一个解决方案。我只是想知道是否可以使用左连接来做我想做的事情。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-24T15:32:42.160

这是将此更新查询从 SQL 服务器形式转换为 PostgreSQL 的通用方法：

```
UPDATE Users
 SET bUsrActive = false
WHERE
 ctid IN (
   SELECT u.ctid FROM Users u
      LEFT JOIN Users u2 ON u.sUsrClientCode = u2.sUsrClientCode AND u2.bUsrAdmin = 1 AND u2.bUsrActive = 1
    WHERE u.bUsrAdmin = 0 AND u.bUsrActive = 1 AND u2.nkUsr IS NULL
) 
```

[ctid](http://www.postgresql.org/docs/current/static/ddl-system-columns.html)是一个伪列，指向行的唯一位置。如果表有主键，您可以改用它的主键。

问题中的查询 #2 没有达到您的预期，因为更新后的表`Users`从未连接到`Users u`FROM 子句中的同一个表。就像您在 FROM 子句中两次输入表名一样，它们不会被隐式连接或绑定在一起，它们被视为两组独立的行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-15T07:42:53.243

我认为这是正确的做法 2）我相信它比进行子选择更优化/更有效。

```
UPDATE Users uOrig
    SET bUsrActive = false
FROM Users u
      LEFT JOIN Users u2 ON u.sUsrClientCode = u2.sUsrClientCode AND u2.bUsrAdmin = 1 AND u2.bUsrActive = 1
WHERE u.bUsrAdmin = 0 AND u.bUsrActive = 1 AND u2.nkUsr IS NULL
    and uOrig.sUsrClientCode = u.sUsrClientCode; 
```

# drupal - 查看分层分类选择框

> ID：14498147
> 
> 赞同：0
> 
> 时间：2013-01-24T09:41:20.743
> 
> 标签：drupal, drupal-7, drupal-views, drupal-taxonomy

我正在尝试为旅行社创建 Drupal 网站，需要您的帮助。

*   我将位置存储在具有层次结构的分类中，结构如下所示：

    *   欧洲
        *   法国
            *   巴黎
        *   德国
            *   柏林
*   我正在使用带有“具有分类术语（具有深度）”过滤器的视图，显示为选择框。

*   “在下拉列表中显示层次结构”已启用

它工作正常，但随着位置数量的增加，选择框开始变得非常大。

所以我的问题是：是否可以在选择框中仅显示分类的第一级和第二级？或者是否可以在单独的选择框中显示分类的每个级别？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:04:27.340

你应该检查[这个链接](http://drupal.org/node/463678)。我很确定，您可以通过任何自定义模块或 template.php 中的一些自定义编码来实现它

你也可以检查[这个模块](http://drupal.org/project/reference_option_limit)，真的很有帮助。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:08:46.370

“是否可以在单独的选择框中显示分类的每个级别？” 我见过的唯一可能对您有用的模块是 Hierarchical Select 模块。[http://drupal.org/project/hierarchical_select](http://drupal.org/project/hierarchical_select)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T14:31:24.013

使用分层选择模块创建选择列表。这将为您提供一个在所有子元素前面带有“-”符号的层次结构。然后您可以使用 hook_form_alter 函数更改表单。

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
 if (($form_id == 'your_form_id')) {
  foreach ($form['tid']['#options'] as $term_key => $term) {
      // Check if this is a child by looking for '-' as first char in string
      $term_value = reset($term->option);
      if($term_value[0] == '-') {
        unset($form['tid']['#options'][$term_key]);
      }
    }
  }
} 
```

# asp.net-mvc - 如何使基于列表的编辑器模板正确绑定以进行 POST 操作？

> ID：14498148
> 
> 赞同：9
> 
> 时间：2013-01-24T09:41:25.967
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个模型，`ApplicantBranchList`它用作较大模型中的属性，如下所示：

```
[Display(Name = "Where would you want to work?")]
public ApplicantBranchList PreferedBranches { get; set; } 
```

***`ApplicantBranchList`：***

```
public class ApplicantBranchList : ViewModel
{
    public ApplicantBranchItem HeaderItem { get; set; }
    public ApplicantBranchList()
    {
        HeaderItem = new ApplicantBranchItem();
    }
    public void MapFromEntityList(IEnumerable<ApplicantBranch> applicantBranches)
    {
        var service = new BranchService(DbContext);
        var selectedIds = applicantBranches.Select(b => b.BranchId);
        Items = service.ReadBranches()
                       .Where(i => !i.IsDeleted)
                       .Select(p => new ApplicantBranchItem { BranchName = p.Name, WillWorkAt = selectedIds.Contains(p.Id) });
    }
    public IEnumerable<ApplicantBranchItem> Items { get; set; }
} 
```

`ApplicantBranchList`有自己的编辑器模板，以及每个项目的内部编辑器模板`ApplicantBranchList`：

***视图/共享/EditorTemplates/ApplicantBranchList.cshtml：***

```
@model Comair.RI.UI.Models.ApplicantBranchList
<table>
    <tr>
        <th style="display: none;"></th>
        <th>
            @Html.DisplayNameFor(model => model.HeaderItem.BranchName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.HeaderItem.WillWorkAt)
        </th>
    </tr>
    @foreach (var item in Model.Items)
    {
        @Html.EditorFor(m => item)
    }
</table> 
```

***视图/共享/EditorTemplates/ApplicantBranchItem.cshtml：***

```
@model Comair.RI.UI.Models.ApplicantBranchItem
<tr>
    <td style="display: none;">
        @Html.HiddenFor(m => m.BranchId)
    </td>
    <td>
        @Html.DisplayFor(m => m.BranchName)
    </td>
    <td>
        @Html.EditorFor(m => m.WillWorkAt)
    </td>
</tr> 
```

此编辑器在视图中正确呈现，但在 post 操作中：

```
public ActionResult Create(ApplicantProfileModel model)
{
    if (ModelState.IsValid)
    {
        var branches = model.PreferedBranches; 
```

`PreferedBranches.Items`是`null`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T11:26:34.437

问题是 ASP.NET 无法弄清楚如何绑定到`Model.Items`属性。

要修复它，请替换：

```
public IEnumerable<ApplicantBranchItem> Items { get; set; } 
```

有了这个：

```
public List<ApplicantBranchItem> Items { get; set; } 
```

而不是：

```
@foreach (var item in Model.Items)
{
   @Html.EditorFor(m => item)
} 
```

使用这个：

```
@for (var i = 0; i < Model.Items.Count; i++)
{
   @Html.EditorFor(model => model.Items[i]) // binding works only with items which are accessed by indexer
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-18T18:25:08.230

使用 MVC 和编辑器模板，您无需手动移动列表并调用 @HTMLEditorFor。

这样做：

```
@Html.EditorFor(model => model.Items) 
```

是相同的：

```
@for (var i = 0; i < Model.Items.Count; i++)
{
   @Html.EditorFor(model => model.Items[i]) // binding works only with items which are accessed by indexer
} 
```

MVC 将通过您的项目处理迭代，并为每个项目生成一次编辑器模板。如评论中所述，您的模板必须与您的模型命名相同。此外，您的模型定义应该是模型的单一表示，而不是 IEnumerable 类型。最后，如评论中所述，如果您在对 @Html.EditorFor() 的调用中指定模板名称参数，您将无法享受对您的集合进行自动迭代的好处。您将需要手动迭代，如上所示。

# sparql - D2RQ/更新服务器无法插入属性

> ID：14498153
> 
> 赞同：0
> 
> 时间：2013-01-24T09:41:40.600
> 
> 标签：sparql, insert-update

我有一个 SPARQL/Update 查询，如下所示。

```
INSERT { <http://localhost:8080/resource/User/166> rdf:type seagent:User;
         seagent:User.email 'xyz@gmail.com'.
} 
```

执行此查询后，已插入用户，但未插入用户的属性。我怎么解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:34:34.570

[在DBpedia SPARQL query that has a period in it](https://stackoverflow.com/questions/5207891/dbpedia-sparql-query-that-has-a-period-in-it)的问答之后，您的查询可能`.`在谓词中的句点 () 上失败（显然是优雅的）`seagent:User.email`。

您可以将前缀扩展为属性的完整 URI `<http://example.org/#User.email>`，或定义不同的前缀`PREFIX seagent-user: <http://example.org/#User.>`并使用：`... seagent-user:email 'xyz@gmail.com'.`

但是，如果这是您自己的本体，您可能希望查看属性的 URI 并删除句点以避免此类问题。或者，您可以使用众所周知的本体，例如[FOAF](http://xmlns.com/foaf/0.1/)，其中包含将电子邮件地址链接到个人或用户帐户的属性。

# routes - 全局允许查询参数

> ID：14498160
> 
> 赞同：0
> 
> 时间：2013-01-24T09:42:09.200
> 
> 标签：routes, zend-framework2

我有多个可能包含子路由的路由。路由按预期工作，但是我想全局（在所有路由上）允许某些（或所有）查询参数。

例如[http://example.com/route/match?utm_source=test](http://example.com/route/match?utm_source=test)和[http://example.com/route?utm_source=test](http://example.com/route?utm_source=test) ...应该可以工作，有没有办法在我的所有路线上允许这样做，或者应该我为每条路由添加一个查询子路由？

当前路线示例：

```
'category' => array(
    'type'    => 'Segment',
    'options' => array(
        'route'    => '/:category[/]',
        'constraints' => array(
            'category' => '[a-z][a-z0-9-]*',
        ),
        'defaults' => array(
            'controller'    => 'Category',
            'action'        => 'index'
        ),
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'subcategory' => array(
            'type'    => 'Segment',
            'options' => array(
            'route'    => ':subcategory[/]',
            'constraints' => array(
                'subcategory' => '[a-z][a-z0-9-]*',
            ),
            'defaults' => array(
                'controller'    => 'Category',
                'action'        => 'subcategory'
            ),
        ),
    ),
), 
```

编辑：
我刚刚注意到，如果路由没有定义 child_routes，则允许查询参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:00:35.857

无论查询路由如何，始终允许查询参数。它仅用于组装，自 ZF 2.1.4 起已被弃用。

# curl - 为什么我不能使用 LinkedIn API 的命令行 curl 生成有效的 oauth-token？

> ID：14498161
> 
> 赞同：6
> 
> 时间：2013-01-24T09:42:13.157
> 
> 标签：curl, oauth, meteor, linkedin

在测试 LinkedIn API 并尝试构建 Meteor JS 智能包以针对 LinkedIn 的 OAuth 提供者进行身份验证时，我遇到了一个完全障碍。

按照[这些指示](http://developer.linkedin.com/documents/authentication#)，我能够成功地生成一个`oauth_token`用于授权请求的格式，格式为：

```
https://www.linkedin.com/uas/oauth/authorize?oauth_token={oauth_token} 
```

当使用由如下所示的 ruby​​ 脚本生成的令牌将其放入浏览器时：

```
require 'oauth'

api_key = '{linkedin api key}'
api_secret = '{linkedin api secret}'

configuration = { :site => 'https://api.linkedin.com',
                          :authorize_path => '/uas/oauth/authenticate',
                          :request_token_path => '/uas/oauth/requestToken',
                          :access_token_path => '/uas/oauth/accessToken' }

consumer = OAuth::Consumer.new(api_key, api_secret, configuration)

request_token = consumer.get_request_token
puts request_token.params[:oauth_token] 
```

然后，我可以使用上面的 URI 轻松地将令牌作为查询字符串参数转储到浏览器中，并查看 LinkedIn 权限对话框。

使用有效令牌显示的 LinkedIn 身份验证窗口： ![在此处输入图像描述](../Images/93e663921882f47d5c9dc4daf5a112b5.png)

不幸的是，当尝试在命令行中编写 curl 请求时，`oauth_token`生成的请求在同一个 url 中使用时会失败。实际上，它会导致linkedin 响应500 错误，并且浏览器会显示标准的500 错误窗口。该响应没有其他详细信息：

![500 错误](../Images/9d80556c86b70f77f009012a15533e73.png)

这是类似于我在 curl 请求中实现的代码，以获取 new `oauth_token`：

```
alex@alex-mac accounts-linkedin (fixes_for_meteor_0_5_4)* $ cat linkedin_oauth_gen.sh 

curl -X POST https://api.linkedin.com/uas/oauth/requestToken --verbose --header 'Authorization: OAuth oauth_nonce="0d9a3e40660811e2bcfd0800200c9a66",oauth_timestamp="1359019570",oauth_version="1.0",oauth_signature_method="HMAC-SHA1",oauth_consumer_key="{oauth_consumer_key}",oauth_signature="{oauth_signature}"' 
```

值得注意的是，我使用了[LinkedIn 的 OAuth 测试控制台](https://developer.linkedin.com/oauth-test-console#)来生成 Authorization 标头。

这很重要，因为我在尝试在 Meteor JS 智能包中实现类似功能时遇到了同样的问题。

然而，我的主要问题是，为什么我可以用上面的 ruby​​ 代码做到这一点，但是当使用简单的 curl shell 命令时，令牌似乎没有有效生成（或者 LinkedIn 根本不想兑现它） ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T03:15:25.577

像往常一样，魔鬼藏在最微小的细节中。

在解决这个问题时，我使用了非常棒的[Charles Proxy](http://www.charlesproxy.com/)来监视我的 ruby​​ 脚本通过 oauth 库发出的请求。

事实证明，我如何尝试从 curl 和来自流星的请求存在**两个**`oauth_callback`明显的问题，我通过在查看我的代码并弄乱Authorization 标头参数以对问题进行逆向工程时监视成功的 ruby​​ 请求而发现了这两个问题.

这些问题之一或组合导致生成无效且无法识别的 oauth 令牌。linkedin 没有返回 401，而是生成了一个令牌！唉，这个令牌没用。

以下是失败的 2 个不同的请求授权标头（每个都有原因）：

```
Authorization: OAuth oauth_body_hash="2jmj7l5rSw0yVb%2FvlWAYkK%2FYBwk%3D", oauth_callback="http%3A%2F%2Flocalhost%3A3000%2F_oauth%2Flinkedin%3Fclose", oauth_consumer_key="*********", oauth_nonce="SJ3DSTHLh0T4UcqzYOUOqubIeWN9FERCePm5ro35EY", oauth_signature="*********", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1359081520", oauth_version="1.0" 
```

在第一个示例中，问题在于`oauth_callback`参数具有格式错误的查询字符串参数。事实证明，有一个`?close`没有值的查询字符串参数，如 in `?close=true`，会导致请求完全被 fubared。我仍然不知道确切原因，但似乎是这样。

```
Authorization: OAuth oauth_body_hash="2jmj7l5rSw0yVb%2FvlWAYkK%2FYBwk%3D", oauth_callback="http%3A%2F%2Flocalhost%3A3000%2F_oauth%2Flinkedin%3Fclose", oauth_consumer_key="*********", oauth_nonce="SJ3DSTHLh0T4UcqzYOUOqubIeWN9FERCePm5ro35EY", oauth_signature="*********", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1359081520", oauth_version="1.0" 
```

在第二个示例中，问题在于`oauth_callback`它`localhost`的域中。事实证明，一些 oauth 提供者，linkedin 是其中之一，不喜欢`oauth_callback`参数中的主机名（与 FQDN 或 IP 地址相比）。打我为什么。我们需要使用`127.0.0.1`. 没有充分的理由，但**就是**这样。蹩脚，但真实。

**这个有效：**

```
Authorization: OAuth oauth_body_hash="2jmj7l5rSw0yVb%2FvlWAYkK%2FYBwk%3D", oauth_callback="http%3A%2F%2F127.0.0.1%3A3000%2F_oauth%2Flinkedin%3Fclose%3Dtrue%26state%3D0e314d0d-a5ca-40ca-8fcd-caa1cfce3ed4", oauth_consumer_key="*********", oauth_nonce="0KBnMSMI8NNk1cXn0YyTRpUnPdnqAX7F06KEloh9bs", oauth_signature="*********", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1359082177", oauth_version="1.0" 
```

注意：出于保护我的密钥和消除对我的秘密进行逆向工程的可能性的明显原因，我已经替换了`oauth_consumer_key`和`oauth_signature`值。`*********`

# grails - 如何使用 Grails Quartz2 插件在指定时间设置一次性作业触发器

> ID：14498162
> 
> 赞同：2
> 
> 时间：2013-01-24T09:42:15.050
> 
> 标签：grails, quartz-scheduler

我正在使用[Quartz2 Plugin](http://grails.org/plugin/quartz2)，并试图动态触发一个非常简单的工作。当用户执行某个动作时，该作业应该在未来的某个特定分钟数内触发，并且只运行一次。

我尝试使用简单的“计划”方法来获取日期和工作数据：

```
def sendTime = new Date()
use(groovy.time.TimeCategory) {
    sendTime = sendTime + (connectionInstance.timeout).minutes
    println "I will send the job at $sendTime"
}
ReportSmssyncTimeoutJob.schedule(sendTime, [connectionId:params.id]) 
```

在这个设置中，我发现作业实际上是立即触发的，而不是等到“sendTime”。

在查看插件源之后，我的第二次尝试是使用 SimpleTrigger

```
def sendTime = new Date()
use(groovy.time.TimeCategory) {
    sendTime = sendTime + (connectionInstance.timeout).minutes
    println "I will send the job at $sendTime"
}
// arguments here are: jobKey='test', startTime=sendTime, repeatCount=0, repeatInterval=1 (zero not allowed), job-arguments)
def trigger = TriggerHelper.simpleTrigger(new JobKey("test"), sendTime, 0, 1, [connectionId:params.id])
ReportSmssyncTimeoutJob.schedule(trigger) 
```

在此设置中，作业也会立即触发。SimpleTrigger 实现是否有问题阻止它等到 startDate？

不幸的是，切换到主要的 'quartz' 插件（现在支持 Quartz 2）不是一个选项，因为我正在处理一个项目，该项目设置了很多工作来使用 Quartz2 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:24:39.023

我在 Grails 邮件列表上问了这个问题并得到了答案：这是quartz2 插件中的一个错误。它应该在下一个版本中修复（在 0.2.3 中注意到了错误）。

更新：在quartz2插件的v2.1.6.2中对此进行了测试，并且可以确认我的问题中的两种方法现在都有效。

# android - ListView 在列表项 Android 中显示空白

> ID：14498163
> 
> 赞同：2
> 
> 时间：2013-01-24T09:42:17.687
> 
> 标签：android, android-layout, android-listview

我正在尝试通过 setListAdapter 和 Efficient Adapter 来实现 listView。我希望当列表显示时背景不应该重复。我的代码重复了 list.xml 的整个布局，因此我的列表项显示的差距很大。

**现在我的清单是这样工作的：**

![在此处输入图像描述](../Images/f54021cac16e72c5deac80aa444527ee.png)

**但我想要这种类型的视图：**

![在此处输入图像描述](../Images/08225912ec2fed2fae6943c2c410dd2d.png)

**这是我的editText.xml，我在其中输入单词并打开列表视图。**

```
<EditText
    android:id="@+id/start_edit"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_gravity="top|left"
    android:ems="10"
    android:hint="Type to search"
    android:paddingLeft="50dp" >

    <requestFocus />
</EditText> 
```

**此布局适用于 list.xml ：**

```
<RelativeLayout
    android:id="@+id/RelativeLayout_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/blue_cellbar" > 
```

list.xml 文件在 Effecient 适配器中重复布局：

**这是我的代码：**

```
listAdapter = new EfficientAdapter2(this);
    setListAdapter(listAdapter);

public static class viewHolder2 {
    TextView word;
    TextView meaning;
    ImageView image;
    ImageView image_color;
    RelativeLayout cell;

}

private class EfficientAdapter2 extends BaseAdapter implements Filterable,OnItemClickListener {

    private Context context;
    LayoutInflater inflater;

    public EfficientAdapter2(Context context) {

        this.context = context;
        inflater = LayoutInflater.from(context);

    }

    public int getCount() {

        //  if(SearchWordString.isEmpty()==false)
        //  {

        return SearchWordString.size();
        /// }

        //return 0;
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        viewHolder2 holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.list, null);

            ViewToUse=parent;
            holder = new viewHolder2();
            //  Log.i("View","is Null");
            convertView.setTag(holder);

        } else {

            //Log.i("View","is not Null");
            holder = (viewHolder2) convertView.getTag();
        }

        holder.cell = (RelativeLayout) convertView
                .findViewById(R.id.RelativeLayout_list);

        return convertView;
    } 
```

**更新**

```
public class Start extends ListActivity implements OnTouchListener, 
```

android.view.GestureDetector.OnGestureListener {

// /////////////////////////////////////// //// /************* 内部类视图 ****************/ // ////////// ////////////////////////////////// onCreate() { ListView list_to_use = getListView (); listAdapter = new EfficientAdapter2(this); list_to_use.setAdapter(listAdapter); list_to_use.setBackgroundColor(2); viewFlipper = (ViewFlipper) findViewById(R.id.viewFlipper1);

```
 search = (EditText) findViewById(R.id.start_edit);

    search.addTextChangedListener(myTextWatcher); 
```

} 公共静态类 viewHolder2 { TextView 字；TextView 含义；ImageView 图像；ImageView 图像颜色；相对布局单元格；

```
}

// ////////////////////////////////////////////////////
/*********** INNER CLASS EfficientAdapter ************/
// ////////////////////////////////////////////////////

private class EfficientAdapter2 extends BaseAdapter implements Filterable,OnItemClickListener {

    private Context context;
    LayoutInflater inflater;

    public EfficientAdapter2(Context context) {

        this.context = context;
        inflater = LayoutInflater.from(context);

    }

    public int getCount() {

        //  if(SearchWordString.isEmpty()==false)
        //  {

        return SearchWordString.size();
        /// }

        //return 0;
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        viewHolder2 holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.list_search_item, null);

            ViewToUse=parent;
            holder = new viewHolder2();
            //  Log.i("View","is Null");
            convertView.setTag(holder);

            holder.word = (TextView) convertView.findViewById(R.id.title_list);
            holder.meaning = (TextView) convertView
                    .findViewById(R.id.textView_meaning_list);
            holder.image = (ImageView) convertView
                    .findViewById(R.id.image_list);
            holder.image_color = (ImageView) convertView
                    .findViewById(R.id.imageView_color_list);
            holder.cell = (RelativeLayout) convertView
                    .findViewById(R.id.RelativeLayout_list);

        } else {

            //Log.i("View","is not Null");

            holder = (viewHolder2) convertView.getTag();
        } 
```

} }

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<EditText
    android:id="@+id/start_edit"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_gravity="top|left"
    android:ems="10"
    android:hint="Type to search"
    android:paddingLeft="50dp" >

    <requestFocus />
</EditText>

<ViewFlipper
    android:id="@+id/viewFlipper1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="top|left"
    android:layout_marginTop="50dp" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/blue_home"
            android:fastScrollEnabled="true"
            android:smoothScrollbar="true"
            android:divider="@drawable/blue_dic"
            android:dividerHeight="250sp" >

        </ListView>

    </FrameLayout>

</ViewFlipper> 
```

listView 的行：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/image_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/abacus_thumbnail"
    android:scaleType="centerCrop" />

<ImageView
    android:id="@+id/imageView_color_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/blue_thumbnail" />

<TextView
    android:id="@+id/title_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/image_list"
    android:layout_marginLeft="20dp"
    android:layout_toRightOf="@+id/image_list"
    android:gravity="center"
    android:text="Abacus"
    android:textColor="#000000"
    android:textSize="30sp"
    android:textStyle="bold"
    android:typeface="sans" />

<TextView
    android:id="@+id/textView_meaning_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/title_list"
    android:layout_below="@+id/title_list"
    android:layout_marginTop="10dp"
    android:text="TextView"
    android:textColor="#000000"
    android:textSize="25sp" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:50:32.393

我希望您没有`android:dividerHeight`在布局文件中提供属性，`<ListView/>` 如果是，请删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-20T07:00:15.343

当您设置了适配器类 xml、父根 match_content 而不是 wrap_content 时，会出现此问题。设置根内容高度 wrap_content

```
 As i can see in adapter layout there is no parent root like relative, linearlayout, Framelayout and ConstraintLayout etc. 
```

# oracle - 如何使用vb6和oracle存储并显示图片？

> ID：14498166
> 
> 赞同：0
> 
> 时间：2013-01-24T09:42:22.577
> 
> 标签：oracle, vb6

```
'code to load picture into database table
Private Function GetPic()
  Dim filelen As Long
  Dim numlock As Integer
  Dim leftover As Long
  Const blocksize = 100000
  Dim pic As String
  Dim bytedata() As Byte
  Dim sfile As Integer

  sql = "select PICS from student_record_database " //empty field with no pictures
  RES.Open sql, CON, adOpenDynamic, adLockOptimistic
  sfile = App.Path & "/mypic/Book1.xls" //error : type mismatch

  Open sfile For Binary Access Read As #1
  filelen = LOF(sfile)
  If filelen = 0 Then
    Close sfile
    MsgBox ("empty or not found")
  Else

    numlock = filelen / blocksize
    leftover = filelen Mod blocksize
    ReDim bytedata(leftover)
    Get sfile, , bytedata()
    RES(1).AppendChunk bytedata()
    ReDim bytedata(blocksize)

    For i = 1 To numlock
      Get sfile, , bytedata()
      RES(1).AppendChunk bytedata()
    Next i

    RES.Update
    Close sfile
  End If
End Function

'code to display picture in picture box from table
Private Function ShowPic()
  Dim bytedata() As Byte
  Dim file As String
  Dim filelen As Long
  Dim numlock As Integer
  Dim leftover As Long
  Const blocksize = 100000

  file = App.Path & "\image1.jpeg"
  Open file For Binary As #1
  numlock = filelen / blocksize
  leftover = filelen Mod blocksize
  bytedata() = RES(1).GetChunk(leftover)
  Put file, , bytedata()

  For i = 1 To numlock
    bytedata() = RES(1).GetChunk(blocksize)
    Put file, , bytedata()
  Next i
  Close file
End Function 
```

这是我在 oracle 表数据库中使用 vb 插入图片的完整代码。接下来我根据他们的记录在vb应用程序的图片框中显示这些图片，但它显示“类型不匹配”的错误并且图片没有显示在图片框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:00:50.723

您将 sFile 声明为整数，但尝试在其中加载字符串

```
Dim sFile as string
sfile = App.Path & "/mypic/Book1.xls" 
```

# android - 如果应用程序休眠大约 1 天，则第二天不会调用 AlarmManager

> ID：14498171
> 
> 赞同：0
> 
> 时间：2013-01-24T09:42:38.247
> 
> 标签：android, notifications, broadcastreceiver, alarmmanager

我正在开发一个 android 应用程序，如果时间保存在数据库中，它每 12 小时显示一次通知。所以每次在数据库中输入或编辑数据时，我都会取消当前的alarmmanager并重新启动一个新的，这样我就不会错过一个。同样在重新启动时，我已经调用了警报管理器。在广播接收器上，检查数据库是否有条目，如果找到，则会设置通知并自动打开应用程序。

因此，当我通过手动更改日期来测试应用程序时，应用程序按预期工作。重新启动应用程序也可以工作。但是如果我让应用程序闲置近 14 小时，则通知未设置，但如果我打开应用程序并暂停它之后设置通知。

这就是我所说的警报管理器。意图alarmintent = new Intent(context, package.Alarm_Manager.class);

```
 alarmintent.putExtra("note","Notify");
    sender = PendingIntent.getBroadcast(context , 0 , alarmintent , PendingIntent.FLAG_CANCEL_CURRENT | Intent.FILL_IN_DATA);            
    alarm_manger = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    alarm_manger.cancel(sender);
    Calendar cal = Calendar.getInstance();
    long now = cal.getTimeInMillis();
    alarmintent = new Intent(context, package.Alarm_Manager.class);
    alarmintent.putExtra("note","Notification");
    sender = PendingIntent.getBroadcast(context , 0 , alarmintent , PendingIntent.FLAG_CANCEL_CURRENT | Intent.FILL_IN_DATA);            
    alarm_manger = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    alarm_manger.setRepeating(AlarmManager.RTC_WAKEUP, now, AlarmManager.INTERVAL_HALF_DAY, sender); 
```

这是广播接收器

```
@Override
public void onReceive(Context context, Intent intent)
{
       NotificationManager manger = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
       Calendar cal = Calendar.getInstance();
       date = (int)(cal.getTimeInMillis()/1000);
       Notification notification = new Notification(R.drawable.vlcsnap_396460 , "Notify" , System.currentTimeMillis());
       PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intent, 0);
       notification.setLatestEventInfo(context, "App", "Notify" , contentIntent);
       notification.flags = Notification.FLAG_INSISTENT;
       manger.notify( 0 , notification);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:09:01.003

在看过您的 Alarm_Manager 代码后，我认为直接在您的 BroadcastReceiver 对象中执行此操作是非法的。[报价](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)：

> 如果此 BroadcastReceiver 是通过标签启动的，则对象在从此函数返回后不再存在。

我相信除了创建一个由您的 BroadcastReceiver 通知的服务之外别无他法，并确保该服务`setLatestEventInfo()`以自身 ( `this`) 作为上下文进行调用。

当您的应用程序运行时异步广播失败的原因可能是提供给广播接收器的上下文仅在您的应用程序未运行时对广播接收器的调用期间存在。因此，仅在您的 BroadcastReceiver 与临时上下文一起死亡后运行的通知服务缺少有效的上下文。

当你的应用程序运行时，Broadcast 可能会与你的 Activity 或 Application 对象一起作为 Context，而这在 Notification manager 运行时仍然有效。

希望这可以帮助。

**更新：**一个`IntentService`会做。您不希望为此提供全职服务。

**更新 2：**一些片段。

```
<service android:name=".MyIntentService" android:label="@string/my_intent_service_name" />

public final class MyIntentService extends IntentService {
    public MyIntentService() {
    super("service name");
    // set any properties you need
    }
    @Override
    public void onCreate() {
        super.onCreate();
        // do init, e.g. get reference to notification service
    }
    @Override
    protected void onHandleIntent(Intent intent) {
    // handle the intent
        // ...especially:
        notification.setLatestEventInfo(this, "App", "Notify" , contentIntent);
        // ...
    }
}

public final class MyAlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        context.startService(new Intent(context, MyIntentService.class));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:03:00.150

`alarm_manager.cancel(sender);`如果你设置了你不需要打电话`PendingIntent.FLAG_CANCEL_CURRENT.`

您的来电

```
alarm_manger.setRepeating(AlarmManager.RTC_WAKEUP, now, AlarmManager.INTERVAL_HALF_DAY, sender); 
```

将立即触发警报，因为当您设置警报时，现在已经过去了。

我建议你使用

```
now + DateUtils.HOUR_IN_MILLIS / 2 
```

对于 triggerAtMillis 参数

您是否尝试将其安排为更小的间隔？它会被触发吗？

# javascript - 如何让 jQuery 手风琴返回到起始位置（当前返回到另一个顶部）

> ID：14498172
> 
> 赞同：1
> 
> 时间：2013-01-24T09:42:38.747
> 
> 标签：javascript, jquery, html, math

我对这些东西真的很陌生，我真的可以在别人的帮助下做。

我在这里设置了一个 js 小提琴：http: [//jsfiddle.net/hAZR7/](http://jsfiddle.net/hAZR7/)

我遇到的问题更多是我认为的逻辑/数学问题，因为它似乎可以很好地动画并开始并移动到所需的位置。我的回报让我很困惑，我不确定我需要什么方程式或代码来修复它。（即使它可能正盯着我看）。

我认为这与它有关吗？当删除类'on'但设置边距以计算它应该返回的位置时。

```
$elm.removeClass('on');
var $left_margin = $extra_margin;
$elm.stop().animate({marginLeft : $left_margin}, 1500, function()
     {$slider_started = false;}); 
```

**更新**- 感谢您的回答，这两个示例都可以正常工作，在 CSS 中调整微小尺寸，但我认为这不会损害功能。有什么方法可以将它实现到幻灯片的 setInterval / 自动化中，还是我应该提出另一个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:15:22.970

看到这个：http: [//jsfiddle.net/bt9Je/](http://jsfiddle.net/bt9Je/)

变化：

```
var $total_slider = $j('.top-slider-main > div').length; 
```

和

```
var $left_margin = $extra_margin-((($total_slider-i))*$label_width); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:36:23.583

你可以改变

```
var $left_margin = $extra_margin; 
```

至

```
if( $elm.next().length ) {
    var $left_margin = $elm.next().offset().left - $label_width;
} else {
    var $left_margin = $j('.top-slider-main').first().width() - $label_width;
} 
```

**编辑**要修复评论中描述的错误，请更改小提琴[http://jsfiddle.net/hAZR7](http://jsfiddle.net/hAZR7)

```
var $total_slider = $j('.top-slider-main div').length; 
```

至

```
var $total_slider = $j('.top-slider-main  > div').length; 
```

和线

```
var $left_margin = $extra_margin; 
```

至

```
var $left_margin = $j('.top-slider-main').first().width() -  ( ( $total_slider - i + 1 ) * $label_width ); 
```

我已经分叉了小提琴[http://jsfiddle.net/gU2Tq/](http://jsfiddle.net/gU2Tq/)

# symfony - JMSSerializerBundle 如何序列化数据，在非对象上调用成员函数 get()

> ID：14498173
> 
> 赞同：0
> 
> 时间：2013-01-24T09:42:41.990
> 
> 标签：symfony, jmsserializerbundle

我尝试使用 JMSSerializerBundle 我更新了我的作曲家，在我的 AppKernel 中添加了包。我写了这个

```
namespace Surgery\PatientBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class VisitsController extends Controller{

    public function testAction()
    {       
        $arr = array ('a'=>1,'b'=>2,'c'=>3,'d'=>4,'e'=>5);
        $serializer = $container->get('jms_serializer');
        $serializer->serialize($arr, 'json'); 
```

我明白了

```
Call to a member function get() on a non-object 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:58:03.733

$container 未初始化。这是一个空值。你需要从

```
$this->container->get('jms_serializer'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:38:03.877

你必须改变这个：

```
$serializer = $container->get('jms_serializer'); 
```

对此：

```
$serializer = $this->get('jms_serializer'); 
```

# html - 不要为 div 中的元素设置垂直对齐

> ID：14498175
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:42:42.880
> 
> 标签：html, css

我有一个带有项目模板的数据列表。

```
 <asp:DataList ID="DataList1" Width="100%" runat="server" RepeatColumns="3" RepeatDirection="Horizontal">
  <ItemTemplate >
     <div style="text-align:center;margin-bottom:5px;vertical-align:bottom;clear:both">  <a href='<%# Eval("Url") %>' rel='prettyPhoto[gallery1]' style='margin:10px;margin-bottom:0px; text-align: center'> <img src='<%# Eval("Url") %>' width='180'  /></a>
      <br /><label ><%# Eval("Name") %></label>  </div>
   </ItemTemplate>
  </asp:DataList> 
```

我为此设置了数据源。

我的图像有不同的宽度和高度。

当我运行它时，我的图像设置了 div 的中心，但我想设置这些 div 的底部。

我用

> 垂直对齐：底部；

但不要设置垂直对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:29:37.187

将 div 的显示设置为 inline-block

```
display: inline-block; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:07:09.377

您需要申请`vertical-align`或`inline`元素`inline-block`。看这个：http: [//jsfiddle.net/6HuF9/](http://jsfiddle.net/6HuF9/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T09:50:29.113

尝试`margin-bottom:0px;`对您的图像进行操作。

# java - 使用 onClick 执行多个 shell 命令

> ID：14498177
> 
> 赞同：0
> 
> 时间：2013-01-24T09:42:58.933
> 
> 标签：java, android, shell, command, runtime.exec

这是我想要做的一个例子：

```
final String[] hwdebug1 = {"su","-c","echo hello > /system/hello1.txt"};

                 try {
                     Runtime.getRuntime().exec(hwdebug1);              
                } catch (IOException e) {
                } 
```

所以，如果我点击我的按钮，它会完美运行，但如果我做这样的事情，它就不会：

```
final String[] hwdebug1 = {"su","-c","echo hello > /system/hello1.txt","echo hello > /system/hello2.txt","echo hello > /system/hello3.txt"}; 
```

我的意图是让按钮执行超过 1 个命令。我已经通过让它执行一个 bash 脚本来做到这一点，但我更喜欢找到一种将它放在代码上的方法。

谢谢！

**用 Ben75 方法解决**

```
final String[] hwdebug1 = {"su","-c","echo hello > /system/hello1.txt"};
final String[] hwdebug2 = {"su","-c","echo hello > /system/hello2.txt"};
final String[] hwdebug3 = {"su","-c","echo hello > /system/hello3.txt"};
ArrayList<String[]> cmds = new ArrayList<String[]>();
cmds.add(hwdebug1);
cmds.add(hwdebug2);
cmds.add(hwdebug3);
for(String[] cmd:cmds){
    try {
       Runtime.getRuntime().exec(cmd);              
   } catch (IOException e) {
       e.printStacktrace(); 
   }          
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:54:38.797

Runtime.exec 命令适用于单个命令，而**不是**cmd 行字符串的简单“包装器”。

只需创建一个 List 并对其进行迭代：

```
final String[] hwdebug1 = {"su","-c","echo hello > /system/hello1.txt"};
final String[] hwdebug2 = {"su","-c","echo hello > /system/hello2.txt"};
final String[] hwdebug3 = {"su","-c","echo hello > /system/hello3.txt"};
ArrayList<String[]> cmds = new ArrayList<String[]>();
cmds.add(hwdebug1);
cmds.add(hwdebug2);
cmds.add(hwdebug3);
for(String[] cmd:cmds){
    try {
       Runtime.getRuntime().exec(cmd);              
   } catch (IOException e) {
       e.printStacktrace(); 
   }          
} 
```

# javascript - MDN 上的代码：setTimer 的这个 IE 特定 shim 是如何工作的？

> ID：14498181
> 
> 赞同：0
> 
> 时间：2013-01-24T09:43:26.827
> 
> 标签：javascript

在[MDN 的 setTimer 页面上](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Callback_arguments)，有一个小的 shim / 兼容层 setTimer 可以让 Internet Explorer 接受 setTimer 方法中的其他参数，这些参数将传递给回调。

我非常了解下面的所有代码：

```
if (document.all && !window.setTimeout.isPolyfill) {
  var __nativeST__ = window.setTimeout;
  window.setTimeout = function (
                          vCallback, 
                          nDelay /*, 
                          argumentToPass1, 
                          argumentToPass2, etc. */
                          ) {
    var aArgs = Array.prototype.slice.call(arguments, 2);
    return __nativeST__(vCallback instanceof Function ? function () {
      vCallback.apply(null, aArgs);
    } : vCallback, nDelay);
  };
  window.setTimeout.isPolyfill = true;
} 
```

除了一行：

```
var aArgs = Array.prototype.slice.call(arguments, 2); 
```

它引用`arguments`了 ，但我看不到该名称在此行之前的任何地方被引用。它也不在[保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)列表中，所以它似乎没有任何*魔法*。为了让我理解它，它必须以某种方式引用被覆盖的 setTimeout 函数的参数，然后用于`slice()`获取前两个参数之后的每个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:45:26.697

[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)确实是魔法；它是一个非常类似于包含传递给当前函数的参数的数组的对象。该对象在所有函数中都具有局部作用域。

由于它不*完全是*一个数组，因此该模式`Array.prototype.slice.call(arguments)`通常用于将多个（或所有）参数值提取到一个实数数组中。在这种特定情况下，`aArgs`最终成为一个数组，其中包含`setTimeout`除了前两个之外传递给替换的所有参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:45:53.350

`arguments` *很*神奇 - 它是以数组形式传递给函数的参数。

请参阅MDN 上的[参数：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments) *“与传递给函数 [...] 在所有函数中可用的参数相对应的类数组对象”*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:49:14.040

该对象`arguments`包含所有传递给函数的参数，包括那些未在函数声明中命名的参数。

请记住，假设以下函数

```
function doStuf( param1 ) { /* do something */ } 
```

打这样的电话也是有效的

```
doStuff( 'stuff', 'morestuff', 2, 'evenmorestuff' ); 
```

`arguments`在这种情况下，您可以使用该对象引用所有参数。

* * *

因此，在您的特定代码中，以下行

```
var aArgs = Array.prototype.slice.call(arguments, 2); 
```

复制传递给 shim 函数的所有参数，但前两个。然而，前两个被明确命名并被引用为（`vCallback`和`nDelay`）。

*   [MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

# .htaccess - 将 web.config Url 重写转换为 .htaccess

> ID：14498183
> 
> 赞同：1
> 
> 时间：2013-01-24T09:43:27.273
> 
> 标签：.htaccess, iis, web-config, apache2

我已经从运行 IIS7.5 的 Windows Server 2008 R2 切换到运行 Apache2 的 CentOS 服务器，因为我遇到了 PHP 的性能问题。

我的主站点的 Web.config 使用 url 重写，需要转换。自从我上次使用 .htaccess 文件以来已经有一段时间了。我的 Web.Config 重写代码：

```
 <rule name="IndexRewrite" stopProcessing="true">
        <match url="^([^/]+)/?$" />
        <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="index.php?p={R:1}" />
    </rule> 
```

所以它的作用是重写 PHP 使用的**?p=**来显示适当的页面。那么，这究竟是如何做到的呢？我不熟悉 Apache2 中的 mod_rewrite。

我尝试使用 SocialEngine 从另一个站点修改重写规则，但运气不好。

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php
  RewriteRule (.*) index.php?p= [L,QSA]
  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?p= [L,QSA]

</IfModule> 
```

链接示例： [http](http://example.com?p=about) ://example.com?p=about 应该是 [http://example.com/about](http://example.com/about)

* * *

之前我用IIS7.5 Url rewrite时就是这样。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T23:15:05.007

我已成功将其转换为有效的 .htaccess mod_rewrite 代码。它似乎比它更容易。我不得不在 Google 中进行更深入的搜索，并找到了一个可行的教程。

这是我现在使用的代码。

```
RewriteEngine On
RewriteBase /
RewriteRule ^([A-z]+)$ /index.php?p=$1 
```

这样就解决了。;)

# javascript - 隐藏模态窗口javascript

> ID：14498185
> 
> 赞同：0
> 
> 时间：2013-01-24T09:43:32.250
> 
> 标签：javascript, yii, hide, modal-dialog

所以为了显示这个模式，我有以下代码：

```
<button type="button" onclick="openModal(); return false;">A button</button> 
```

并且为此的javascript是：

```
<script type='text/javascript'>
function openModal(a)   
    {
        $.modal({
            content:  'Some content here',
            title: 'a title',
            maxWidth: 500,

        });
        win.closeModal();
    }

</script> 
```

我需要一个可以隐藏它的功能。谁能给我一些关于如何执行 hideModal() 功能的建议，当我单击屏幕上的任何位置时，该功能将隐藏模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:54:13.727

在浏览器窗口中打开模式，使用浏览器的控制台尝试

```
 var modal;
    function btnsModal() {
        var btns = {
            'Close': function (win) {
                modal.closeModal()
            }
        }
        return btns;
    }

    function openModal(oLink, content) {
        var btn = btnsModal();
        modal = $.modal({
            buttons: btn
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:08:21.880

您可以将“打开”事件添加到对话框，然后将单击侦听器绑定到它，如果您单击任何位置，它将关闭对话框---

```
open: function(){
        jQuery('.ui-widget-overlay').bind('click',function(){
            jQuery('#ID_of_ur_dialog').dialog('close');
        })
    } 
```

对于隐藏效果，您可以使用“隐藏”选项---

```
hide: "highlight" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T16:17:37.340

这是愚蠢的...

我在 css 中使用 display none 修复了这个问题...事实证明我没有把它加厚...我添加了 display none 和一个 JS 事件，该事件在单击页面中的任何其他位置时触发 CSS，模式除外。

非常感谢您的所有投入！真的很感激！

# javascript - Flowplayer 使用链接更改当前视频

> ID：14498191
> 
> 赞同：0
> 
> 时间：2013-01-24T09:43:42.673
> 
> 标签：javascript, html, flowplayer

我的页面顶部有一个 flowplayer，然后在该链接下方有一个指向不同视频的链接列表。

是否可以从链接将新视频加载到播放器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:55:12.617

Flowplayer 有一个广泛的[Javascript API](http://flash.flowplayer.org/documentation/api/index.html)，允许您更改`player`对象的许多方面，包括当前的视频播放。

此外，为了将链接用于此目的，您可以将事件处理程序绑定到链接，这会将链接的`href`属性加载到`player`对象中。

例如，使用 jQuery，您可以这样做：

```
$('.video_link').on('click', function() {
    $('#video_player').setClip($(this).attr('href'));
    return false;
}); 
```

# java - 在java中使用递归循环复制树结构数据并创建相同的树结构数据

> ID：14498193
> 
> 赞同：2
> 
> 时间：2013-01-24T09:43:51.477
> 
> 标签：java

我正在处理数据库上的一张表。列是：id、name、parent_id（parent_id 将是表上的 id。如果 parent_id 为空，则记录是父记录。）

通过递归循环中的递归循环复制和创建相同记录的最佳方法是什么，这样我就可以创建相同的树结构：

*   物品
    *   项目1
        *   项目 1.1
            *   项目 1.1.1
            *   项目 1.1.2
        *   项目 1.2
    *   第 2 项
        *   第 2.1 项
            *   项目 2.1.1
        *   第 2.2 项
    *   第 3 项

等等，就像第n级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:59:52.463

你不需要使用递归，如果你不使用，代码会更清晰。

首先，结果集需要按`id`and排序，然后您只需使用 a作为索引`parent_id`遍历结果集，如下所示：`java.util.Map`

```
Map<Object, Item> items = new HashMap<Object, Item>(); 

if (resultSet.next()) 
{
  Item root = createItem(resultSet);
  items.put(root.getId(), root);

  while (resultSet.next()) 
  {
    Item item = createItem(resultSet);
    items.put(item.getId(), item);

    Item parent = items.get(item.getParentId()); 
    if (parent != null) 
    {
      parent.addChild(item);
    }
    else
    {
      ...
    }
  }

  return root;
}
else 
{
  ...
} 
```

# sql-server - 当我使用 Like %% 而不是 "=" Sql Server 时，我的存储过程不起作用？附加查询

> ID：14498194
> 
> 赞同：0
> 
> 时间：2013-01-24T09:43:54.173
> 
> 标签：sql-server, stored-procedures

我试图运行 sp 当我用“Like”替换“=”时它没有给出任何结果

我的查询在下面定义，

```
ALTER PROCEDURE [dbo].[SelectMentor] 
    -- Add the parameters for the stored procedure here
    @Zip varchar(20)=NULL,
    @Company varchar(200)=NULL,
    @Designation varchar(100)=NULL,
    @Interest varchar(200)=NULL
    --@JobFunc varchar(200)=NULL
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    select ub.user_Id,ub.user_Fullname,up.Designation,up.Company from UserBasics UB 
inner join UserProfession up on  
ub.user_Id=up.Prof_ID 
where  (@Zip is null or ub.user_Zip = @Zip) and
    (@Interest is null or ub.user_Need = @Interest) and
--  (@JobFunc is null or m.mentor_jobFunction= @JobFunc) and
    (@Company is null or up.Company=@Company) and
    (@Designation is null or up.Designation=@Designation) 
```

它工作正常但是当我用“Like”替换“=”时，

```
select ub.user_Id,ub.user_Fullname,up.Designation,up.Company from UserBasics UB 
inner join UserProfession up on  
ub.user_Id=up.Prof_ID 
where  (@Zip is null or ub.user_Zip like '%@Zip%') and
    (@Interest is null or ub.user_Need like '%@Interest%') and
--  (@JobFunc is null or m.mentor_jobFunction= @JobFunc) and
    (@Company is null or up.Company like '%@Company%') and
    (@Designation is null or up.Designation like '%@Designation%') 
```

它不工作？？？

希望您的建议

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:46:54.947

您的 LIKE 示例正在尝试匹配那些实际的字符串值，即 user_Zip 包含文字文本“@Zip”

您需要像这样连接：

```
where  (@Zip is null or ub.user_Zip like '%' + @Zip + '%') and
... etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:48:08.650

尝试这个

```
select ub.user_Id,ub.user_Fullname,up.Designation,up.Company from UserBasics UB 
    inner join UserProfession up on  
    ub.user_Id=up.Prof_ID 
    where  (@Zip is null or ub.user_Zip like '%'+@Zip+'%') and
        (@Interest is null or ub.user_Need like '%'+@Interest+'%') and
    --  (@JobFunc is null or m.mentor_jobFunction= @JobFunc) and
        (@Company is null or up.Company like '%'+@Company+'%') and
        (@Designation is null or up.Designation like '%'+@Designation+'%') 
```

拉吉

# knockout.js - 如何将 KnockBack CollectionObvservables 作为 KnockOut observableArrays？

> ID：14498198
> 
> 赞同：2
> 
> 时间：2013-01-24T09:44:13.373
> 
> 标签：knockout.js, knockback.js

我正在使用 KnockBack（带有 KnockOut 和 BackBone），并且无法以与 KO 的 ObservableArrays 相同的格式获取 KB CollectionObservable (CO) 值。这当然是KB的核心精髓——允许我使用带有KO的数据绑定的BB模型；这就是为什么我很惊讶我无法获取/使用相同的语法来将数据公开给数据绑定。

考虑以下：

```
x = ko.observableArray([[1,2],[3,4]])

//x() == [Array[2],  Array[2]]

y = kb.collectionObservable(new Backbone.Collection([[1,2],[3,4]]))

// y() == [ViewModel, ViewModel] 
```

那么，假设我有这样一个 kb.collectionObservable，我怎样才能轻松地将其值提取为数组数组，以便与 KO 兼容的 API 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T14:26:39.193

在with`ko.computed`上循环，将对象映射到数组并将它们包装在数组中的 A 可能会成功。`kb.collectionObservable` `y()``ko.utils.arrayForEach`

# c# - Visual Studio - EntityFramework - 选定的存储过程不返回任何列

> ID：14498199
> 
> 赞同：0
> 
> 时间：2013-01-24T09:44:17.310
> 
> 标签：c#, asp.net, entity-framework-4

大家好，我的查询如下所示，`sql`其中给出了结果，这是我的查询

```
SELECT Technology,TechDescription, Technology.TechID, COUNT(Question) AS 
  'Totalposts' FROM Technology LEFT JOIN Question ON Question.TechID = Technology.TechID    GROUP BY Technology.TechID, Technology,TechDescription 
```

![在此处输入图像描述](../Images/57e170c4da1411b58727f00ecb248441.png)

我只是将其写入存储过程，如下所示

```
USE [newForumDB]
GO
/****** Object:  StoredProcedure [dbo].[selectTechQuestions]    Script Date: 01/24/2013 15:06:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create PROCEDURE [dbo].[selectTechQuestions]
 As
  SET FMTONLY OFF
Begin
  SELECT Technology,TechDescription, Technology.TechID, COUNT(Question) AS 
  'Totalposts'

FROM Technology

LEFT JOIN Questions

ON Questions.TechID = Technologies.TechID

GROUP BY Technologies.TechID, Technology,TechDescription
End 
```

并将其添加到我的模型中，并尝试为该过程添加一个功能，但我收到了消息，`The selected stored procedure returns no columns`有人可以帮助我

![在此处输入图像描述](../Images/902eaa2637c66fffa0b3a099fb7c207c.png)

根据`Habib`要求，我尝试了两种方式，即

```
1) writing the query in a string and filled the DataSet using SqlCommand and SqlDataAdapter which works fine

2) SqlCommand cmd = new SqlCommand();
cmd.CommandText = "selectTechQuestions";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Connection = con;
SqlDataAdapter da = new SqlDataAdapter();
da.SelectCommand = cmd;
DataSet ds = new DataSet();
da.Fill(ds); 
```

第二个给了我错误`{"Invalid object name 'Questions'."}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:28:13.193

把你的作为

```
SELECT Technology AS 'Technology',TechDescription AS 'TechDescription', Technology.TechID AS 'ID', COUNT(Question) AS 
'Totalposts'

FROM Technology

LEFT JOIN Questions

ON Questions.TechID = Technologies.TechID

GROUP BY Technologies.TechID, Technology,TechDescription 
```

所以，很多时候当我得到这种类型的问题时，当时我已经这样做了。这很愚蠢，解决方案，但我已经提出了我的问题，可能对你有帮助....

**详细描述**
众所周知， **select**语句将结果作为单个数据集返回，即使它来自多个表，即像内部连接一样查询。

> 当数据来自多个表时，有可能会从具有相同名称的不同表中超过两个不同的列。

该子句在简单的数据获取方式中没有任何问题，即我们简单地使用**DataAdapter**和**SqlCommand**完成，但实体框架无法处理这件事，因此编译器不允许查询，例如包含**内连接**或多表查询.

所以要解决这个问题，我们只需要像我在这里所做的那样为每列分配一个不同的名称，这样就不会有任何问题会导致......

# c# - 使用来自 C# 的参数运行批处理文件

> ID：14498206
> 
> 赞同：10
> 
> 时间：2013-01-24T09:44:36.080
> 
> 标签：c#, batch-file, arguments, xcopy

我有一个像这样的批处理文件

```
@echo off
xcopy /e %1 %2 
```

我的 C# 代码如下：

```
string MyBatchFile = @"C:\Program Files (x86)\MybatchFile.bat";
string _sourcePath = @"C:\FolderToCopy";
string _tempTargetPath = @"C:\TargetFolder\";

var process = new Process { 
                   StartInfo = { 
                      Arguments = string.Format("{0} {1}",
                                                _sourcePath,
                                                _tempTargetPath) 
                                } 
                          };
process.StartInfo.FileName = MyBatchFile;
bool b = process.Start(); 
```

我希望这会将源文件复制到目标位置。但什么也没有发生。我的控制台窗口也没有停留足够的时间，因此我可以看到错误。任何人都可以指导实现这一目标。我是批处理文件处理的新手。

**编辑**

通过在批处理文件的末尾添加一个`pause`。能够重现错误。得到错误为

```
Files not found - Program 
```

直接运行批处理文件可以正常工作。刚刚注意到......当源路径有任何空格时......我收到错误

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T10:10:16.743

引用论证呢？

```
Arguments = String.Format("\"{0}\" \"{1}\"", _sourcePath, _tempTargetPath) … 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T10:09:23.013

.bat 文件是一个文本文件，为了执行它，你应该启动 cmd 进程。像这样开始：

```
System.Diagnostics.Process.Start("cmd.exe", "/c yourbatch.bat"); 
```

可能会出现其他论点。在 cmd 窗口或运行对话框中尝试不使用 c#。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T09:47:22.763

尝试

```
string MyBatchFile = @"C:\MybatchFile.bat";
string _sourcePath = @"C:\FolderToCopy\*.*";
string _tempTargetPath = @"C:\TargetFolder\"; 
```

即添加`*.*`到源路径

`pause`并在批处理文件中添加第三行

```
@echo off
copy /e %1 %2
pause 
```

# php - 2 个表格，一个 PHP 文件

> ID：14498208
> 
> 赞同：1
> 
> 时间：2013-01-24T09:44:43.893
> 
> 标签：php

我在一个页面上有 2 个表格，一个在另一个下方。

我希望第二种形式应始终处于禁用模式。

并且一旦第一个表单提交按钮被按下并验证，第二个应该被激活以在其中输入数据。

PHP中有什么可以帮助我的吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:48:48.827

你有两种方法：

1) 使用 ajax 发送对第一个表单的验证，如果收到“true”，则启用第二个表单。

2) 从第一个表单进行 POST，如果一切正常，将“已验证”设置为“真”并重新加载同一页面。在第二种形式中，“启用”必须仅在您拥有 $validated = true; 时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:49:57.783

下面的逻辑应该可以帮助您作为起点：

```
<form method="post">
    <input type="text" name="name" />
    <input type="submit" name="form1" value="Proceed" />
</form>

<form method="post">
    <input type="text" name="email"<?php if(!isset($_POST['form1'])) { echo ' disabled="disabled"'; } ?> />
    <input type="submit" name="form2" value="Submit"<?php if(!isset($_POST['form1'])) { echo ' disabled="disabled"'; } ?> />
</form> 
```

当然，使用 AJAX 验证第一个表单或让表单出现在单独的页面上会更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:49:06.310

这很简单，只需使用 if else 条件。

```
// this if condition checks whether the form 1 is submitted or not. If form1 is submitted than form 2 is displayed else form1 wil only be displayed     
if(isset($_POST['submit']))
{
    //Display your form 2.
}

else
{
     //Display your form1.
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:50:27.493

您可以通过在第二种形式中的所有输入上设置一个类并将它们设置为`disabled`当然知道一点javascript的人将能够更改它来做到这一点。

所以你可以把它作为你的视觉层，但是如果有人想偷偷溜进去，如果可以通过第二种形式，也可以检查 PHP。

更复杂的方法是显示看起来像表单字段的图像，并且只将它们更改为提交第一个表单的输入。这可以在客户端或服务器端完成

所以实际上你会有 3 种形式，但一种是“假的”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:58:53.567

```
<?php
    if(isset($_POST['next'])) {
        if($_POST['name']!="") {
            $disabled = "";
            $val = $_POST['name'];
        } else {
            $disabled = " disabled='disabled'";
            $val="";
        }
    } else {
        $disabled = " disabled='disabled'";
        $val="";
    }

?>

<html>
    <head>
    <title></title>
    </head>
    <body>
        <form id="frm1" name="frm1" method="POST" action="">
            <label>Name</label><input type="text" id="name" name="name" value="<?php echo $val;?>"/>
            <input type="submit" name="next" id="next_frm" value="Next"/>
        </form>
        <form name="frm2" id="frm2" method="POST" action="">
            <label>Address</label><input type="text" name="address" id="address" value="" <?php echo $disabled;?>/>
            <input type="submit" name="save" id="save" value="Save" <?php echo $disabled;?>/>
        </form>
    </body>
</html> 
```

这有点像你在找的，我希望

# django - AttributeError：“str”对象没有属性“_meta”

> ID：14498212
> 
> 赞同：2
> 
> 时间：2013-01-24T09:45:02.677
> 
> 标签：django, django-comments

我刚开始学习Django，今天来到评论部分，我只是从Django文档中练习。https://docs.djangoproject.com/en/1.4/ref/contrib/comments/example/。当我在 DetailView 页面上进行练习时，添加评论表单的命令效果很好，但现在我还想向 ListView 页面添加评论表单，然后出现此错误。

以下是回溯：环境：请求方法：GET

```
Django Version: 1.4.3
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django.contrib.admin',
'books',
'django.contrib.comments')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware')

Template error:
In template /home/ryu/emacs/emacs-code/djcode/mysite2/templates/books/publisher_list.html, error at line 19
'str' object has no attribute '_meta'

9 :   <th> website</th>

10 : </tr>

11 : {% for publisher in object_list %}

12 : <tr>

13 :   <th><a href="/mysite2/publishers/{{publisher.id}}">{{ publisher.name }}</a></th>  

14 :   <th>{{publisher.country}}</th>

15 :   <th>{{publisher.website}}</th>

16 : </tr> 

17 : {% endfor %}

18 : </table>

19 :  {% render_comment_list for books.publisher %} 

20 : {% endblock %}

21 : 
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
136\.                     response = response.render()
File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in render
104\.             self._set_content(self.rendered_content)
File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in       rendered_content
81\.         content = template.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
140\.             return self._render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in _render
134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
123\.         return compiled_parent._render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in _render
134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
123\.         return compiled_parent._render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in _render
134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
62\.             result = block.nodelist.render(context)
File "/usr/local/lib/python2.7/dist-packages/django/template/base.py" in render
823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
74\.             return node.render(context)
File "/usr/local/lib/python2.7/dist-          packages/django/contrib/comments/templatetags/comments.py" in render
201\.         ctype, object_pk = self.get_target_ctype_pk(context)
File "/usr/local/lib/python2.7/dist- packages/django/contrib/comments/templatetags/comments.py" in get_target_ctype_pk
100\.             return ContentType.objects.get_for_model(obj), obj.pk
File "/usr/local/lib/python2.7/dist-packages/django/contrib/contenttypes/models.py" in get_for_model
32\.         opts = self._get_opts(model)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/contenttypes/models.py" in   _get_opts
20\.         return model._meta.concrete_model._meta

Exception Type: AttributeError at /mysite2/publishers/
Exception Value: 'str' object has no attribute '_meta' 
```

现在我想知道如何使用内置评论为每个页面添加评论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:52:55.303

`render_comment_list`标签需要一个，`object`但你正在传递`unicode string`。`book.publisher`在第 19 行，引发异常的地方` 似乎是一个字符串。

[您可以在此处](https://github.com/django/django/blob/1.4/django/contrib/comments/templatetags/comments.py#L265-L281)查看有效参数。下面是这个标签的源代码：

```
@register.tag
def render_comment_list(parser, token):
    """
    Render the comment list (as returned by ``{% get_comment_list %}``)
    through the ``comments/list.html`` template

    Syntax::

        {% render_comment_list for [object] %}
        {% render_comment_list for [app].[model] [object_id] %}

    Example usage::

        {% render_comment_list for event %}

    """
    return RenderCommentListNode.handle_token(parser, token) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:59:40.793

你说的是你将 appname.modelname 传递给模板标签，你实际上应该将模型的一个实例传递给模板标签，例如：

```
{% render_comment_list for publisher %} 
```

如果发布者是 Publisher 模型的一个实例，因为它看起来在您的代码中。或者：

```
{% render_comment_list for books.publisher publisher.id %} 
```

正如上面提到的psjinx。

# php - Highchart - 如果没有数据，图表应显示 0

> ID：14498213
> 
> 赞同：0
> 
> 时间：2013-01-24T09:45:07.693
> 
> 标签：php, graph, charts

这就是问题所在！

左边是图表，右边是数据。数据来自一个 php 文件。2013-01-18 13:00:00 之后没有数据 .... 有一个很长的休息时间，但它从 2013-1-22 12:32:24 开始...但是在此日期之间我希望图表运行为零！

我是否必须更改图表或我的 php-output-file 中的某些内容？

[http://www.abload.de/img/error1234hxudx.jpeg](http://www.abload.de/img/error1234hxudx.jpeg)

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:54:34.877

您需要为两点之间的间隔提供数据和值。为此，我创建了一个日期/时间数组，所有的值都为 0，然后将我的数据合并到该数组中。

# java - 使用 JPA 向表中添加新实例

> ID：14498216
> 
> 赞同：1
> 
> 时间：2013-01-24T09:45:24.430
> 
> 标签：java, database, jpa, eclipselink, derby

我使用以下代码，当我从表中读取条目（derby db - eclipse 链接）时，只有一个条目，我应该如何添加新条目？例如添加相同的条目 5 次？

```
for (Object object : listClsObj) {
    int cnt = 1;
    do {
        em.getTransaction().begin();
        em.persist(object);
        em.getTransaction().commit();
        cnt++;
    }
    while (cnt < 6);
        }
em.close(); 
```

实体类是：

```
@Entity
public class Person {

@Id
@GeneratedValue(strategy = GenerationType.TABLE)
private String id;
private String firstName;
private String lastName;

public String getId() {

    return id;
}

public void setId(String Id) {

    this.id = Id;
}

public String getFirstName() {

    return firstName;
} 
```

当我在 em persist 放置断点并在第二个循环中更改 id 值时，出现以下错误：

> 异常描述：[DerbyModel.Person] 类的属性[id] 映射到数据库中的主键列。不允许更新。线程“主”javax.persistence.RollbackException 中的异常：异常 [EclipseLink-7251] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345)：org.eclipse.persistence.exceptions.ValidationException 异常描述：属性 [id] 的类 [DerbyModel.Person] 映射到数据库中的主键列。不允许更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:20:47.580

When calling `em.persist(object)`, the instance refered by `object` is probably assigned an `id` by the dbms, and remains attached to the jpa session. This means that the instance `object` refers to is already persisted, and subsequent calls to `persist` will do nothing besides from trying to persist it again (same id, same values).

You'd probably need to create new instances of `Person` at every execution of the loop, and persist each one of them, or try to detach the instance (by means of [`em.detach()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#detach%28java.lang.Object%29), for instance) and reset its id.

Untested sample:

```
for (Object object : listClsObj) {
    int cnt = 1;
    do {
        em.getTransaction().begin();
        em.persist(object);
        em.getTransaction().commit();
        em.detach(object);
        ((Person)object).setId(null);
        cnt++;
    }
    while (cnt < 6);
        }
em.close(); 
```

# codeigniter - 在 PyroCMS 中访问在元数据文件中特定模块的语言文件中定义的值

> ID：14498221
> 
> 赞同：0
> 
> 时间：2013-01-24T09:45:42.627
> 
> 标签：codeigniter, content-management-system, themes, pyrocms

我目前接近项目的尾声，但坚持一件事。我有用户模块，其中有一个名为 user_lan 的语言文件，对于某些要求，我需要从 主题/部分/文件夹的**metadata.html访问该文件中定义的值。**

任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:38:06.977

如果该 lang 文件已经加载，那么您可以通过以下方式访问它：

```
{{ helper:lang line="foo:bar" }} 
```

[http://docs.pyrocms.com/2.1/manual/plugins/helper](http://docs.pyrocms.com/2.1/manual/plugins/helper)

# c# - 无法打开 VS 2010 Pro MVC 项目

> ID：14498229
> 
> 赞同：0
> 
> 时间：2013-01-24T09:45:57.180
> 
> 标签：c#, asp.net-mvc, visual-studio-2010

每当我尝试使用相同类型的 VS 打开使用 .Net Framework 4.0 开发的赢得 VS 2010 的 MVC 项目时，都会出现错误

> “此安装不支持项目类型。”

被抛出。

我观察到我没有安装 NuGet 包。这是问题吗？

虽然我可以使用 web developer 2010 Express 打开它，但当我运行它时

> “错误使用注册为 allowDefinition='MachineToApplication' 的部分超出应用程序级别是错误的。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序造成的。”

被抛出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:10:28.287

检查一下，我发现它们已经发布在 StackOverFlow 上，你真的应该在问之前做一些搜索:)[给你](https://stackoverflow.com/questions/2355947/error-allowdefinition-machinetoapplication-beyond-application-level) ，还有 [一个](https://stackoverflow.com/questions/2566215/allowdefinition-machinetoapplication-error-when-publishing-from-vs2010-but-on)

# java - Solr - 匹配以特定单词开头的句子

> ID：14498233
> 
> 赞同：0
> 
> 时间：2013-01-24T09:46:26.517
> 
> 标签：java, solr, solr4

关于如何做到这一点的任何提示？

我试过使用`PatternTokenizerFactory`，但它没有按预期工作。

是否可以在不编写的情况下做到这一点`custom tokenizer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:21:23.663

您可以使用 KeyWordTokenizerFactory 标记有问题的字段，然后进行通配符搜索

[http://solr.pl/en/2010/12/20/wildcard-queries-and-how-solr-handles-them/](http://solr.pl/en/2010/12/20/wildcard-queries-and-how-solr-handles-them/)

前提是您没有执行任何其他不适用于上述 Tokenizer 的操作。

另一种方式是迂回方式。您可以使用以下技术（或其他一些技术）创建一个将其空间剥离的复制字段：-

[SOLR中删除空格的正则表达式是什么](https://stackoverflow.com/questions/9427130/what-is-the-regular-expression-to-remove-spaces-in-solr)

然后，您可以使用 WhiteSpaceTokenizer 标记该复制字段（本质上只创建一个标记，因为复制字段值没有空格），然后对其进行通配符搜索。

在某些情况下，第二种方法可能会失败（例如，“wor them”将匹配“worth*”后空格被剥离）

# hibernate - 选择多个总和 HQL

> ID：14498235
> 
> 赞同：0
> 
> 时间：2013-01-24T09:46:40.510
> 
> 标签：hibernate, jpa-2.0, hql, hibernate-4.x

如果我运行下面的查询，我会得到一个我无法转换为 Long 的对象列表

```
String queryString = "select sum(cat.varaible1), sum(cat.varaible2) from Enrollment as cat where cat.created >= :startDate and cat.created <= :endDate"; 
```

如果我删除 sum(cat.varaible2) 那么我会得到一个包含 long 值的列表。

```
String queryString = "select sum(cat.varaible1) from Cat as cat where cat.created >= :startDate and cat.created <= :endDate"; 
```

为什么会这样？请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:10:37.313

基本上，这就是 JPA 处理投影查询的方式。

当您的`SELECT`语句中有一个表达式时，结果列表将被正确键入。你既可以施放它，也可以`TypedQuery`从一开始就使用权利。

如果您的语句中有多个表达式`SELECT`，则结果将是一个`Collection`数组 `Object`。在您的情况下，每个数组都有两个元素，它们都是 type `Long`。

如果要检索正确的结果类型，可以定义一个专用类来组合您的结果并使用构造函数表达式：

```
select new com.example.SumSum(sum(cat.varaible1), sum(cat.varaible2)) from ... 
```

# struts2 - 从Struts2的Action类计算JSP中s:iterator标签创建的特定表格单元格值的总和？

> ID：14498240
> 
> 赞同：2
> 
> 时间：2013-01-24T09:46:55.500
> 
> 标签：struts2

我想使用`<s:iterator>`标记计算在 JSP 中显示为 HTML 表的动作类的特定属性的总和。

**JSP代码是：**

```
<table border="1">
    <tr>
        <th>Date</th>
        <th>Material</th>
        <th>Quantity</th>
        <th>Buyer</th>
        <th>Total</th>
        <th>Remarks</th>
        <th colspan="2">Action</th>
    </tr>
    <s:set var="sumTotal" value="%{0}" />
    <s:iterator value="eal" status="entries">
    <tr>
        <td><s:property value="date"/></td>
        <td><s:property value="materialName"/></td>
        <td><s:property value="quantity"/><s:property value="unitName"/></td>
        <td><s:property value="buyer"/></td>
        <td>&#8377;<s:property value="total"/></td>
        <s:set var="sumTotal" value="%{+#attr.total}" />
        <td><s:property value="remarks"/></td>
        <td>
            <a href="/HomeMaker/showUpdateEntryForm?entry.idEntry=<s:property value="idEntry"/>">Edit</a>
        </td>
        <td>
            <a href="/HomeMaker/deleteEntry?entry.idEntry=<s:property value="idEntry"/>">Delete</a>
        </td>
    </tr>
    </s:iterator>
    <tr>
        <th colspan="4">Sum Total</th>
        <td colspan="4"><s:property value="#sumTotal"/></td>
    </tr>
</table> 
```

我想计算表格标题“总计”的总和，并将其显示在最后一行的下方，标题为“总和”。请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:55:55.083

改变

```
<s:set var="sumTotal" value="%{+#attr.total}" /> 
```

到

```
<s:set var="sumTotal" value="#sumTotal + total" /> 
```

而且你不需要`%{0}`在第一个`<s:set>`标签内使用，简单的 0 就可以了。

```
<s:set var="sumTotal" value="0" /> 
```

# c# - 如何通过 TCP 发送 Hashtable？

> ID：14498245
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:47:08.770
> 
> 标签：c#, tcp, hashtable, tcpclient

要发送我使用的字符串，`StreamWriter`但我该如何发送`Hashtable`？还是不可能？

```
public static Hashtable Users = new Hashtable(15) 
```

注意：我没有找到任何可以尝试的东西，所以我没有任何我尝试过的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:50:58.553

您可以使用[BinaryFormatter](http://msdn.microsoft.com/en-en/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)序列化任何[可序列化](http://msdn.microsoft.com/en-en/library/system.serializableattribute.aspx)的对象：

```
BinaryFormatter binaryFormatter = new BinaryFormatter();
binaryFormatter.Serialize(streamWriter.BaseStream, Users); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:51:14.390

您需要先对其进行序列化，然后再发送序列化的流。这个网站和谷歌都有很多关于序列化的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:52:17.510

您可以序列化`HashTable` 和反序列化它。但是有一个问题， `HashTable`实现`IDictionary`接口它们不能直接序列化。您可以在以下[链接](http://blogs.msdn.com/b/adam/archive/2010/09/10/how-to-serialize-a-dictionary-or-hashtable-in-c.aspx)中找到另一种对其进行序列化的方法。

# jquery - Facebook javascript 按钮（xml、xfbml）

> ID：14498252
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:47:21.250
> 
> 标签：jquery, xml, ajax, facebook, xfbml

我的问题如下：

当我将在加载了 Ajax 的页面中加载 facebook xml 标签（见下文）时，它不会显示。

table2.php 页面将通过 Ajax 在以下 div: 中加载`<div id="update_div"></div>`，但不会显示。

这是我将用于打印类似按钮等的标签：`<fb:like href="http://website_url.nl" send="true" layout="button_count" width="450" show_faces="false"></fb:like>`

我找不到这个问题的任何解决方案，希望任何人都可以帮助解决这个问题。

我的页面是代码如下：

索引.php

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#" >
   <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
   <script type="text/javascript" src="/js/jquery.js"></script>
  <head>
   <script type="text/javascript">
   $.setDivContentAjax = function(){        
            var url = window.location.hash.replace( "#", ""); 
            var paramaters = null;
            try
            {
                var parameters = JSON.parse('{"' + decodeURI(url.replace(/&/g, "\",\"").replace(/=/g,"\":\"")) + '"}');
                //console.log(parameters);
            }
            catch(error) 
            {
            }

            targetdiv = $('#update_div');

            targetdiv.hide();
            $('#loading-image').show();

            $.ajax({
              url: '/includes/table2.php',
              context: targetdiv,
              type: "GET",
              timeout:18000, 
              data: parameters,
              success: function(data) {
                window.setTimeout(function() {$('#loading-image').hide(); targetdiv.html(data); targetdiv.show();} ,300);
              }

            });    
        }

        $(document).ready(function ()
        {   
            $.setDivContentAjax();

            $(window).bind('hashchange', function() {
                $.setDivContentAjax();
            });
        });
    </script>  
   </head>
  <body>
      <div id="loading-image" style="display:none; padding: 50px 0 50px 0; text-align: center;"><img src="/img/ajax-loader-circle.gif"></div>
  <div id="javascript" style="display:none;"></div>
  <div id="update_div"></div>
  </body>
</html> 
```

表2.php

```
<script>
  (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
 </script>
 <fb:like href="http://website_url.nl" send="true" layout="button_count" width="450" show_faces="false"></fb:like> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:59:43.507

这真的很简单并且有据可查:) 只需使用 JS-SDK 的 FB.XFBML.parse 方法来重新解析 while 文档或 DOM 的某些部分！

[https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:20:08.037

```
The solution:

<script>
  success: function(data) {
    $('#loading-image').hide();
    targetdiv.html(data);
    targetdiv.show();
    FB.XFBML.parse();
  }
</script> 
```

# ios - IOS：识别滑动手势

> ID：14498255
> 
> 赞同：2
> 
> 时间：2013-01-24T09:47:33.550
> 
> 标签：ios, touch, uigesturerecognizer

在我的应用程序中，我有以下代码：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)recognizer shouldReceiveTouch:(UITouch *)touch
{

    if ([touch.view isKindOfClass:[UIScrollView class]]){
        return YES;
    }

    else return NO;
} 
```

在此我控制我的触摸是否在滚动视图内，但现在我想检查触摸是简单触摸还是滑动手势，有没有办法检测到它？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T10:09:24.723

你上面写的方法是UIGestureRecognizerDelegate。这是一个委托方法，当您放置观察者的特定手势被检测到时，将被调用。

为了识别滑动手势，您必须将手势识别器添加到要检测的视图中，如下所示：

```
UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFrom:)];
[recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
[[self view] addGestureRecognizer:recognizer];
[recognizer release]; 
```

您可以在方法**handleSwipeForm 中获得手势检测：**

如果你想让上面的委托被调用，那么还要添加这一行，

```
recognizer.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:03:00.910

用于`UISwipeGestureRecognizer`检测滑动手势（可以设置滑动方向 `UISwipeGestureRecognizer.direction`：）

和一个`UITapGestureRecognizer`检测点击（`UITapGestureRecognizer.numberOfTapsRequired`设置触发识别器所需的点击次数（例如双击）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T14:13:58.557

您必须使用 UISwipeGestureRecognizer 来检测滑动手势。

```
 UISwipeGestureRecognizer *swipeGest= [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeRecognizer:)];
[swipeGest setDirection:(UISwipeGestureRecognizerDirectionRight)];
[[self view] addGestureRecognizer:swipeGest];
swipeGest.delegate = self; 
```

setDirection 用于设置滑动检测方向。

```
- (void)SwipeRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
} 
```

在这里，我们将编写检测到滑动手势后要执行的函数。

# sql - SQL-Server：设置某些选定列的所有行（值）= NULL

> ID：14498257
> 
> 赞同：4
> 
> 时间：2013-01-24T09:47:46.163
> 
> 标签：sql, sql-server, tsql

**我想将SQL-Server**数据库中表的某些列（不是全部）的所有值设置**为 NULL**。问题是，该表有**超过 30.000.000 行**，更新所有列/行需要很长时间。如何加快以下更新语句？

```
Update Table
Set
column1 = null,
column4 = null,
column8 = null,
column12 = null 
```

不能掉表！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:55:14.223

> 问题是，该表有超过 30.000.000 行，更新所有列/行需要很长时间。如何加快以下更新语句？

您购买了更快的服务器。

严重地。

无法删除表。必须在一个语句中更新 3000 万行。

这是不可改变的两面。不可能进行很多优化（您可以杀死该字段上的任何索引，然后重新创建它们）。剩下的是越来越好的硬件。

抱歉，没有更好的答案。您可以尝试在循环中一次更新 10000 次 - 这会使事务和语句更快，但我怀疑它会使整个操作更快，这是您的问题所在。最后必须完成工作，如果需要更快地完成，那么您需要更多的功率 = 更快的服务器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T09:55:46.900

如果列在表的末尾，或者列的顺序不相关，我认为最快的方法是删除列并重新创建它们

```
-- assumes no constraints defined on the columns
alter table MyTable
  drop column Column1, Column2, ... 

alter table MyTable
  add column Column1 int null, Column2 varchar(max) null, ... 
```

Additionally if the updates are slow in general, it might be a case of over-indexing. Take a look at the indexes that are defined on the table, how many of them there are, what columns are they referencing, etc. In general, inserts and updates get slower with any index defined. However, selects can get much faster, so do not just go in and ax all indexes, but try to locate any indexes that are seldom or never used.

And last, if the database is properly indexed and still too slow, take a look at TomTom's answer.

Edit:

To address the comment about column ordering in SQL Server tables, in most cases it's **totally unimportant**, however there are few scenarios where it must be maintained:

*   Some Schema Compare tools do consider the order important, and might report a change in database structure
*   The DBA is a major nitpicker (and I am), and will chew your head off if the `ModifiedBy` and `ModifiedOn` columns are not the last two columns in the table

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:00:54.970

Another approach that could help is to disable all indexes used on those fields before running the update, and then rebuilding them afterwards. This will eliminate some of the I/O overhead.

A second option is to select all of the data from your table into a new table, with the nulls replacing the columns as needed. Then, truncate the first table, enable identity insert, and select everything from the new table back into the first one. This would also benefit from the disabling of indexes.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T10:16:15.397

An UPDATE without WHERE tries to update all rows, even those that already have a NULL in the columns. A seemingly pointless filter like the one belong can have a **BIG** impact.

```
UPDATE Table
SET
    column1 = null,
    column4 = null,
    column8 = null,
    column12 = null
WHERE
    column1 IS NOT NULL    OR    
    column4 IS NOT NULL    OR     
    column8 IS NOT NULL    OR    
    column12 
```

Or, probably better, depending on distribution:

```
UPDATE Table    SET    column1 = NULL WHERE    column1 IS NOT NULL     
UPDATE Table    SET    column2 = NULL WHERE    column2 IS NOT NULL     
UPDATE Table    SET    column4 = NULL WHERE    column4 IS NOT NULL     
UPDATE Table    SET    column8 = NULL WHERE    column8 IS NOT NULL     
UPDATE Table    SET    column12 = NULL WHERE    column12 IS NOT NULL 
```

If it still takes way too long time, try using top (10000) on either solution and repeat until done.

```
UPDATE top (10000) Table    SET    column1 = NULL WHERE    column1 IS NOT NULL 
etc... 
```

# objective-c - 在 UIImageView 中动画图像占用太多内存

> ID：14498261
> 
> 赞同：0
> 
> 时间：2013-01-24T09:48:00.620
> 
> 标签：objective-c, xcode

我在动画序列中使用 150 张图像。

这是我的代码。

NSMutableArray *arrImages =[[NSMutableArray alloc]initWithCapacity:0];

```
for(int i = 0; i <=158; i++)
{
    UIImage* image = [UIImage imageNamed:[NSString stringWithFormat:@"baby%05d.jpg",i]];
    [arrImages addObject:image];
}

babyimage.animationImages = arrImages;
[arrImages release]; 
```

babyimage.animationDuration=6.15; [babyimage startAnimating];

但它占用了太多内存。播放 1 分钟后，它会在控制台中显示内存警告。然后崩溃了。我也降低了图像分辨率，我不能让它低于 150 以获得更好的质量。

有没有更好的方法可以在没有内存问题的情况下制作此动画。非常感谢请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:55:10.997

代替

```
[UIImage imageNamed:[NSString stringWithFormat:@"baby%05d.jpg",i]] 
```

利用

```
[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"baby%05d.jpg",i] ofType:nil]] 
```

原因是 imageNames 缓存了图像，直到它释放内存警告才释放

## 编辑

另外，不要将整个图像存储到数组中，如果需要，只需保存图像名称或不保存任何内容。这也将占用大量内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:15:09.493

我不知道你没有指定动画是什么。但如果我正在编写代码，我会遵循以下算法。

这是假设在特定时间只显示一个图像，但在过渡期间，您最终将有两个以某种方式卷积。

```
procedureAnimate:
    photo_1 = allocate(file_address_array[i++])
    while i < MAX_PHOTOS
        photo_2 = allocate(file_address_array[i++])
        photo_3 = allocate(file_address_array[i++])
        perform_animation(photo_1, photo_2)
        release(photo_1)
        photo_1 = photo_2
        photo_2 = photo_3
    release(last_two) 
```

我不确定这是否是做这种事情的完美方式。但这会更有效率。

（分配/释放登录可能存在严重错误，但这与我早上 5.14 的工作是一致的）。如果这不起作用，请告诉我。

# spring-security - oauth2:custom-grant

> ID：14498267
> 
> 赞同：1
> 
> 时间：2013-01-24T09:48:18.737
> 
> 标签：spring-security

我在导入spring-security-OAuth2的源代码时遇到了这个问题。我对 XML 不太熟悉。

错误的代码是

```
<oauth2:authorization-server client-details-service-ref="clientDetails">
    <oauth2:authorization-code />
    <oauth2:custom-grant token-granter-ref="tokenGranter" />
</oauth2:authorization-server> 
```

据报道

```
cvc-complex-type.2.4.a: Invalid content was found starting with element 'oauth2:custom-grant'. One of '{"http://www.springframework.org/schema/security/oauth2":implicit, "http:// www.springframework.org/schema/security/oauth2":refresh-token, "http://www.springframework.org/schema/security/oauth2":client-credentials, "http://www.springframework.org/schema/ security/oauth2":password}' is expected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:54:05.957

您正在使用不支持“custom-grant”的旧版 Spring Security OAuth

# php - 图片未在 chrome 中显示。它仅在Firefox中显示

> ID：14498268
> 
> 赞同：1
> 
> 时间：2013-01-24T09:48:23.947
> 
> 标签：php, html, css, image

我的网站有问题。在索引上定义了图像。图像仅在 Firefox 中显示。在 chrome 中它不显示，我不知道为什么..有人可以帮助我吗？谢谢

索引.php

```
<div id="advert">
  <a href="#"><img src="img/advertisement/topbanner.jpg" alt="MyWebsite" title="MyWebsite" /></a>
</div> <!-- advert --> 
```

CSS

```
#advert {
  height:200px;
  width:460px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:07:19.427

听起来像是一个广告拦截器问题。尝试将文件夹“advertisement”和/或 id“advert”重命名为 foo 检查它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:53:56.580

由于代码很好，我的猜测是图像已保存为 CMYK 格式，而不是 RGB。

或广告拦截器。由于您的 id 为`advert`，因此这当然会被广告拦截器阻止。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-30T12:04:43.193

放置（../图像文件夹/图像名称）[../文件夹名称前面]

# java - 我要恢复数据库

> ID：14498270
> 
> 赞同：0
> 
> 时间：2013-01-24T09:48:28.907
> 
> 标签：java, mysql, swing

我要备份数据库，但我无法恢复相同的备份文件。这是备用代码。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

import javax.swing.JDialog;
import javax.swing.JFileChooser;

class Backupsql extends JDialog {

    public boolean backupDB(String dbUser, String dbPass, String dbName) {
        String sourcePath = null;
        boolean result = false;
        JFileChooser fc = new JFileChooser();
        int i = fc.showSaveDialog(Backupsql.this);
        File file = fc.getSelectedFile();
        sourcePath = file.getPath();
        String filename = file.getName();
        sourcePath = sourcePath + ".sql";

        String executeCmd =
            "C:\\Program Files\\MySQL\\MySQL Server 5.0\\bin\\mysqldump -u "
            + dbUser + " -p" + dbPass + " " + dbName + " -r " + sourcePath;

        Process runtimeProcess;
        try {
            runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();
            if (processComplete == 0) {
                System.out.println("Backup created successfully");
                compressFile(sourcePath);
                result = true;
            } else {
                System.out.println("Could not create the backup");
            }
        } catch (Exception e) {
            // TODO: handle exception
            System.out.println("error" + e);
        }
        return result;
    }

    public static void compressFile(String srcFile) {
        byte[] buffer = new byte[1024];
        try {
            String destPath = srcFile.replace(".sql", ".zip");
            FileOutputStream fos = new FileOutputStream(destPath);
            ZipOutputStream zos = new ZipOutputStream(fos);
            ZipEntry ze = new ZipEntry(srcFile);
            zos.putNextEntry(ze);
            FileInputStream in = new FileInputStream(srcFile);

            int len;
            while ((len = in.read(buffer)) > 0) {
                zos.write(buffer, 0, len);
            }
            in.close();
            zos.closeEntry();
            zos.close();
            System.out.println("Done");
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

这是我使用的恢复命令。

```
String[] executeCmd = new String[]{
    "C:\\Program Files\\MySQL\\MySQL Server 5.5\\bin\\mysql.exe", "--user="
    + user, "--password=" + password, "-e", " source " + Unzippath}; 
```

我的代码正确吗？我能得到一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:01:16.233

查看 MySQL[备份/恢复](http://dev.mysql.com/doc/refman/5.5/en/backup-types.html)。下面的 SQL 可以简单地用 JDBC 执行，而且更通用。它还*用于*处理*完整*备份。

```
LOAD DATA INFILE '...' 
```

# qt - 有什么方法可以优化/配置 QtWebKit 以提高 JavaScript/渲染性能？

> ID：14498272
> 
> 赞同：0
> 
> 时间：2013-01-24T09:48:35.757
> 
> 标签：qt, extjs, qtwebkit

我们正在创建一个 Qt 应用程序，它基本上是一个用于查看 Web 应用程序的 QtWebKit 窗口。Web 应用程序的前端是用 ExtJS 编写的，它在某些部分运行非常缓慢（例如，一些具有多个网格或复杂布局的屏幕）。我的问题是：有没有办法配置 Qt 应用程序以提高其 JavaScript/渲染引擎的性能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:15:48.577

没有办法调整 webkit，所以你也不能从 Qt 调整它。但这并不意味着你不能做任何事情。以下是您可以尝试的事项清单：

1.  通过使用分析器进行**测量**，确保性能实际上丢失在您认为的位置。在猜测导致不良性能问题的原因时，90% 的时间我都错了。看看我有多少声望，然后认真思考你是否*真的*确定自己可以做得更好:-)

2.  如果探查器不是一个选项，请将时间信息添加到代码中。

3.  在普通的网络浏览器中也很慢吗？如果是这样，请尝试改进 JavaScript 代码。还有一些工具可以运行/分析它。有些甚至内置在您的网络浏览器中。

4.  考虑在没有 ExtJS 的情况下实现部分 UI（以及它带来的开销）。您真的需要一个完整的网格来显示无法排序的静态数据吗？也许一个普通的 HTML 表格就可以了。

5.  尝试更新版本的 Qt。5 刚出来，它包含一个更新版本的 webkit。

# linux - linux新手——如何确定进程对应的pid。到特定的应用程序/网络应用程序

> ID：14498278
> 
> 赞同：0
> 
> 时间：2013-01-24T09:48:56.433
> 
> 标签：linux, pid

我希望在 linux 服务器中启动一个 web 应用程序——然后使用 top 命令定期监控它的性能。

然而，top 需要 pid（用于获取特定应用程序/进程的统计信息）——我想知道的是，是否可以通过编程方式获取 pid？这样，我通过 SSH 登录到该服务器，运行 shell 命令来确定该进程的 PID，最后运行 shell 命令以将该 PID 作为参数传递给 top？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:08:17.313

哪种编程语言？

尝试

```
ps -ef | awk '{if ($8 ~ /<nameOfApp>/) print $2;}' > /tmp/tmpFile_ 
```

然后您可以从 tmpFile_ 读取 PID 并调用

```
top -p <PID> 
```

# python - 用 unicode 字符分割的 split 函数

> ID：14498280
> 
> 赞同：2
> 
> 时间：2013-01-24T09:49:03.323
> 
> 标签：python, regex

我无法在下面的代码中拆分 unicode 字符 \u2013

```
actualdata=metatry['content'].split("-")
print "^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"+actualdata[0]
dat=actualdata[0].split("\u2013")
print "^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"+dat[0]
productlist.append(dat[0]) 
```

即使它存在，输出也不会摆脱 \u2013 如果有人在这方面帮助我会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:02:25.223

尝试添加`'u'`到`'\u2013'`as`metatry['content']`是一个 unicode 字符串：

```
u"Samsung Galaxy Note II \u2013 Latest Smartphone in India ".split(u'\u2013') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:03:23.037

`metatry['content']`是一个[unicode 对象](http://docs.python.org/2/tutorial/introduction.html#unicode-strings)，而不是一个字符串。所以你的`split`电话失败了：

```
>>> s = u"Samsung Galaxy Note II \u2013 Latest Smartphone in India "
>>> s.split("\u2013")
[u'Samsung Galaxy Note II \u2013 Latest Smartphone in India '] 
```

您必须将其拆分为*unicode*字符`\u2013`：

```
>>> s = u"Samsung Galaxy Note II \u2013 Latest Smartphone in India "
>>> s.split(u"\u2013")
[u'Samsung Galaxy Note II ', u' Latest Smartphone in India '] 
```

* * *

PS：你说你和 Beautiful Soup 合作。[Beautiful Soup 仅使用 unicode 字符串](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Beautiful%20Soup%20Gives%20You%20Unicode,%20Dammit)。

# html - 格式化 HTML 报告以进行打印

> ID：14498286
> 
> 赞同：5
> 
> 时间：2013-01-24T09:49:21.847
> 
> 标签：html, css, printing

我有一个 HTML“报告”页面，其中包含一个 HTML 视图，如下所示：

![在此处输入图像描述](../Images/dfe82c841972938c2e13b3d25efc7e11.png)

但是，当您打印预览时，它看起来不太好:)

![在此处输入图像描述](../Images/ec80e24cd73bd6b52423c83bbff54d0d.png)

我知道用于打印的 CSS，但我不明白我的 HTML 是如何被这样解释的——例如为什么我的蓝色边框很好，但我的彩色框（实际上只是 td 单元格内的空 div ) 根本不会出现在打印预览中。另外，为什么左边黑底白字不能这样打印？

打印友好的 CSS 是否有一些规则？这里有什么建议吗？

顺便说一句-我尝试在 IE 10 和 chrome 中进行预览-两者几乎都一样

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T10:06:36.800

我猜这个问题与许多浏览器（打印时）默认忽略的“背景颜色”和“背景图像”属性有关。

对于 chrome，您可以将以下代码添加到您的打印 css，在 Firefox 和 IE 中，您必须在打印对话框中选择“打印背景”。

```
:root {
  -webkit-print-color-adjust: exact;
} 
```

**编辑：另一种方法**

由于您正在寻找一种在打印机上也提供可读信息的方法，您可以为此提供特定内容：

在您的 HTML 中：

```
<td class="green_background blue_border">
    <img src="img/green_bk.png" class="show_on_print">
</td>

<td class="orange_background blue_border with_star">
    <img src="img/orange_with_star_bk.png" class="show_on_print">
    <span class="hide_on_print">*</span>
</td> 
```

在您的样式表中：

```
@media screen,print 
{
    .blue_border {border: 1px solid #00F;}
}

@media screen
{
   .green_background {background-color: #0F0;}
   /* hide something when displayed on screen */
   .show_on_print {display: none;}
}

@media print
{
    img.show_on_print {/* add size, etc. */}
    .hide_on_print {display: none;}
} 
```

您还必须创建图像。这个想法是用一些小精灵替换背景，或者仅在打印机上的替代文本。这适用于任何浏览器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:05:32.003

您看不到彩色框的原因是因为颜色是通过`background-color`. 这是过去打印 HTML 问题的主要来源之一，因此许多浏览器会忽略背景颜色和图像以使打印输出更具可读性（当黑白打印机位于“灰色”区域顶部时，文本很难阅读）。

在您的情况下，这是有问题的，因为没有文本。

[这是一个问题，它解释了如何在 Chrome 中打开背景颜色打印](https://stackoverflow.com/questions/2392366/print-background-colours-in-chrome)。其他浏览器在打印对话框中有一个选项。

或者，将页面“打印”成 PDF 文件，然后使用 PDF 查看器进行打印。在这种情况下，浏览器可能会保留后台设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:05:33.003

检查您的浏览器是否在打印时抑制背景颜色。

# php - 输入按钮以更新 joomla 组件中的图像名称和位置

> ID：14498289
> 
> 赞同：0
> 
> 时间：2013-01-24T09:49:57.500
> 
> 标签：php, joomla, joomla2.5, joomla1.7

![在此处输入图像描述](../Images/5cafe31c1e42fc100d315d932c6c1314.png)

`com_banner`在 joomla 中有输入类型的文本和两个其他按钮，如上图所示，它们有助于指定和更新图像名称和值。

```
<div id="image">
    <?php foreach($this->form->getFieldset('image') as $field): ?>
       <?php echo $field->label; ?>
       <?php echo $field->input; ?>
    <?php endforeach; ?>
</div> 
```

我也想在我的组件中有这样的东西，但我对如何实现这一点的想法为零。单击选择按钮时，我想转到图像文件夹并选择文件类型 pdf、doc 或 docx。

该按钮是如何在我们的自定义组件中实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:26:27.380

这称为`media`表单字段类型。

[https://github.com/joomla/joomla-cms/blob/master/administrator/components/com_banners/models/forms/banner.xml#L197](https://github.com/joomla/joomla-cms/blob/master/administrator/components/com_banners/models/forms/banner.xml#L197)

您应该`type="media"`在表单字段中指定。

# ruby-on-rails - Ruby On Rails：从现有数据库创建模型视图和控制器

> ID：14498293
> 
> 赞同：5
> 
> 时间：2013-01-24T09:50:07.120
> 
> 标签：ruby-on-rails, database, scaffolding, generated-code

是否可以从现有数据库创建控制器、模型和视图？

我无法通过谷歌搜索找到命令。

这里我说的是逆向工程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:26:57.780

您必须为每个具有关系的表创建简单模型，然后您可以

```
[rails3] > rails generate scaffold_controller Club name:string exclusive:boolean
      create  app/controllers/clubs_controller.rb
      invoke  erb
      create    app/views/clubs
      create    app/views/clubs/index.html.erb
      create    app/views/clubs/edit.html.erb
      create    app/views/clubs/show.html.erb
      create    app/views/clubs/new.html.erb
      create    app/views/clubs/_form.html.erb
      create    app/views/layouts/clubs.html.erb
      invoke  test_unit
      create    test/functional/clubs_controller_test.rb 
```

或者，您可以尝试 active_admin gem

活动管理员 -`https://github.com/gregbell/active_admin`

```
rails generate active_admin:resource [MyModelName] 
```

RailsAdmin 也足够好`https://github.com/sferik/rails_admin`

如果您的模型不使用 rails 约定，您应该为它指定至少 2 条规则。例子

```
class Article < ActiveRecord::Base
  self.table_name "tbl_articles"
  self.primary_key "art_id"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:08:53.277

好吧，这违反了原则。如果您想要快速引导您的应用程序，您必须做的越好，那就是复制您在数据库中拥有的模型并使用脚手架。请记住，Rails 使用很多约定，如果您决定不遵循，您将遇到很多麻烦。

如果您需要帮助，请查看本[指南。](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:09:21.713

这就是你可以做到的 -

尝试：

```
rails g scaffold myscaffold 
```

**这将生成文件：**

```
invoke  active_record
create    db/migrate/20130124100759_create_myscaffolds.rb
create    app/models/myscaffold.rb
invoke    test_unit
create      test/unit/myscaffold_test.rb
create      test/fixtures/myscaffolds.yml
 route  resources :myscaffolds
invoke  scaffold_controller
create    app/controllers/myscaffolds_controller.rb
invoke    erb
create      app/views/myscaffolds
create      app/views/myscaffolds/index.html.erb
create      app/views/myscaffolds/edit.html.erb
create      app/views/myscaffolds/show.html.erb
create      app/views/myscaffolds/new.html.erb
create      app/views/myscaffolds/_form.html.erb
invoke    test_unit
create      test/functional/myscaffolds_controller_test.rb
invoke    helper
create      app/helpers/myscaffolds_helper.rb
invoke      test_unit
create        test/unit/helpers/myscaffolds_helper_test.rb
invoke  assets

invoke    coffee
create      app/assets/javascripts/myscaffolds.js.coffee
invoke    scss
create      app/assets/stylesheets/myscaffolds.css.scss
invoke  scss
identical    app/assets/stylesheets/scaffolds.css.scss 
```

# android - android EditText 值

> ID：14498296
> 
> 赞同：0
> 
> 时间：2013-01-24T09:50:16.327
> 
> 标签：android, android-widget

我有一个最奇怪的问题...

我要做的就是从 EditText 获取值并进行一些验证。

edittext 中的值必须介于 1 和 10 之间。但是，即使我输入 1 或 10 之间的任何数字，它仍然会验证为 false。我什至测试了 edittext 输入以确保它是正确的，它是正确的，但是 if 仍然失败。有任何想法吗 ？

这是代码：

```
ed = (EditText) dialog2.findViewById(R.id.ed_quantity);                                                  
Button bq = (Button) dialog2.findViewById(R.id.alert_a);
dialog2.setCancelable(false);
dialog2.show();
bq.setOnClickListener(new OnClickListener(){

    @Override
    public void onClick(View v)
    {
        String test = ed.getText().toString();
        Toast toast23452234 = Toast.makeText(mContext, "Quantity: "+test, Toast.LENGTH_LONG);
        toast23452234.show();
        if(test=="1"||test=="2"||test=="3"||test=="4"||test=="5"||test=="6"||test=="7"||test=="8"||test=="9"||test=="10")
        {
            quantity = Integer.parseInt(ed.getText().toString());
            dialog2.dismiss();
            ed.setText("1");
        }
        else
        {
            Toast toast2345223 = Toast.makeText(mContext, "Quantity must be between 1 and 10" , Toast.LENGTH_LONG);
            toast2345223.show();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:24:46.070

尝试这个

```
 test.trim().equalsIgnoreCase("1") 
```

在你的 if 条件下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:54:39.927

使用`equals`方法比较字符串..

```
if(test.equals("1")||test.equals("2")||test.equals("3")||test.equals("4")||test.equals("5")||test.equals("6")||test.equals("7")||test.equals("8")||test.equals("9")||test.equals("10")) 
```

或使用 int 进行比较

```
int test = Integer.valueOf(ed.getText().toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:54:39.970

`String`不是原生类型，所以你不能这样做`test=="1"`。这比较了对象引用，显然这两个对象具有不同的引用。

调用`equals(Object object)`字符串对象的方法。喜欢，

```
test.isEquals("1") 
```

更好地将输入字符串解析为整数

```
int testInteger = Integer.parseInt(test); 
```

并比较为

```
if(testInteger==1 || testInteger ==2) 
```

这节省了对字符串对象的许多方法调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:55:43.977

如果是字符串，请使用 .equals("")。

```
if(test.equals("1")||test.equals("2")||test.equals("3")||test.equals("4")||test.equals("5")||test.equals("6")||test.equals("7")||test.equals("8")||test.equals("9")||test.equals("10")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:56:09.093

在字符串操作上使用 .equals 而不是 ==

```
 if(test.equals("1")||... and so on) 
```

否则将字符串转换为“int”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T09:56:45.380

使用`test.equals("1")`|| ......

你也可以这样做

```
int t = Integer.parseInt(test);
if(t == 1 || t == 2 || ...) 
```

# linux - 初始化脚本问题：那么意外，期待 }

> ID：14498306
> 
> 赞同：0
> 
> 时间：2013-01-24T09:51:02.340
> 
> 标签：linux, bash, debian

我有一个初始化脚本（我正在运行 Debian）来启动 serviio 一个 DLNA 服务器。当我去启动服务时，我收到以下错误。任何帮助，将不胜感激。请注意：我对 linux/bash/debian 非常陌生。

我收到此错误：无效的语法：意外然后在第 43 行，预期}

使用此代码：

```
 #! /bin/sh
            #
            # /etc/init.d/serviio
            #
            #
            ### BEGIN INIT INFO
            # Provides: serviio
            # Required-Start: $network
            # Required-Stop: $network
            # Default-Start: 3 5
            # Default-Stop: 0 1 2 6
            # Description: Start the serviio DLNA server in headless mode
            ### END INIT INFO

            SERVIIO_HOME="/opt/serviio"
            SERVIIO_DAEMON="serviio.sh"
            SERVIIO_BIN="$SERVIIO_HOME/bin/$SERVIIO_DAEMON"
            SERVIIO_USER="serviio"

            # Source function library.
            . /lib/lsb/init-functions

            RETVAL=0

            check() {
                    # Check that we're a privileged user
                    [ $(id -u) = 0 ] || exit 4

                    # Check if SERVIIO_HOME exists
                    test -d "$SERVIIO_HOME" || exit 5

                    # Check if SERVIIO_BIN is executable
                    test -x "$SERVIIO_BIN" || exit 5
            }

            start() {
                    check

                    echo -n "Starting Serviio DLNA server: "
                    /usr/bin/sudo -u $SERVIIO_USER -H $SERVIIO_BIN -headless &

                    RETVAL=$?
                    if [ $RETVAL -eq 0 ]; then
                        touch /var/lock/serviio
                        log_end_msg 0
                    else
                        log_end_msg 1
                    fi
                    echo
                    return $RETVAL
            }

            stop() {
                    check

                    echo -n "Shutting down Serviio DLNA daemon: "
                    killproc "$SERVIIO_BIN"
                    RETVAL=$?
                    [ $RETVAL -eq 0 ] && rm -f /var/lock/serviio
                    echo
                    return $RETVAL
            }

            restart() {
                    stop
                    start
            }

            case "$1" in
            start)
                    start
                    ;;
            stop)
                    stop
                    ;;
            force-reload)
                    restart
                    ;;
            restart)
                    restart
                    ;;
            condrestart)
                    if [ -f /var/lock/serviio ]; then
                        restart
                    fi
                    ;;
            status)
                    status serviio.sh
                    ;;
            *)
                    echo $"Usage: $0 {start|stop|status|restart|condrestart|force-reload}"
                    RETVAL=2
            esac

            exit $RETVAL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:17:02.033

我可以运行此脚本而不会出现语法错误，但我没有安装 serviio。无论如何，我的猜测是 $RETVAL 在某种程度上是空的，并且它需要用引号引起来：

```
if [ "$RETVAL" -eq 0 ]; then 
```

虽然我认为这会抱怨 '[' 期待一元运算符。

接下来要尝试的是通过在部分中的行前加上“#”来一次注释掉部分，直到您可以缩小问题所在。例如，注释掉整个“开始”部分，或者注释掉“检查”函数（并确保也注释掉对它的调用）。这应该有助于缩小范围。

# oracle - 在一个用户的过程中调用其他用户

> ID：14498311
> 
> 赞同：1
> 
> 时间：2013-01-24T09:51:20.673
> 
> 标签：oracle, oracle11g, oracle9i

我在 Oracle 11g 程序中使用以下查询

```
Open cur_Test FOR
   '''Select * from '|| DBUSER ||'.table_name'''; 
```

它引发错误“无效的 SQL 语句”。

我们可以在任何用户的包或过程中调用其他用户的表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:07:03.103

它应该是这样的：

```
Open cur_Test FOR
   'Select * from '|| DBUSER ||'.table_name'; 
```

当然，您需要在`select`那张桌子上获得赠款...

# ruby-on-rails - 甚至通过 HTTP 在 RoR 中的会话 cookie 上设置“安全”标志

> ID：14498315
> 
> 赞同：12
> 
> 时间：2013-01-24T09:51:42.827
> 
> 标签：ruby-on-rails, security, session-cookies

在 Rails 应用程序中，可以轻松地将会话 cookie 设置为包含`secure`cookie 属性，当通过 HTTPS 发送以确保 cookie 不会通过非 HTTP 连接泄漏时。

但是，如果 Rails 应用程序不使用 HTTPS，而仅使用 HTTP，那么它似乎根本没有设置 cookie。
虽然这确实有些道理，但在这种情况下，有一个单独的前端负载平衡器，负责终止 SSL 连接。从 LB 到 Rails 应用程序的连接仅是 HTTP。

`secure`即使不使用 HTTPS， 如何强制 Rails 应用设置cookie？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T13:49:09.257

根据定义，安全 cookie 不会通过非安全连接发送。

终止 SSL 上游很常见，但是您需要传递某些标头字段，以便 Rails 知道并可以做正确的事情。

[这是一个文档](http://www.cyberciti.biz/faq/howto-linux-unix-setup-nginx-ssl-proxy/)，它非常详细地解释了 nginx 的配置。搜索“设置标题”以跳转到描述您需要通过的特定标题的部分。

使用此配置存在安全考虑，例如，如果终止 SSL 的设备与 Rails 主机不在同一个安全 LAN 上，那么您就有漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-02T11:15:27.133

同样的问题发生在我身上，我这样解决了：在 session_store.rb 我配置：

```
MyApp::Application.config.session_store :cache_store, key: COOKIE_NAME, :expire_after => 1.days, :expires_in => 1.days, :domain => 'mydomain.com', same_site: :none 
```

（注意我没有放在`, same_site: :none`这里，因为它会在服务 HTTP 时完全杀死设置的 cookie）

`initializers`然后我通过将这个文件放在文件夹中来修补 Rack->Utils->set_cookie_header

```
require 'rack/utils'
module Rack
  module Utils
    def self.set_cookie_header!(header, key, value)
      case value
      when Hash
        domain  = "; domain="  + value[:domain] if value[:domain]
        path    = "; path="    + value[:path]   if value[:path]
        max_age = "; max-age=" + value[:max_age] if value[:max_age]
        expires = "; expires=" +
            rfc2822(value[:expires].clone.gmtime) if value[:expires]

        # Make secure always, even in HTTP
        # secure = "; secure"  if value[:secure]
        secure = "; secure"

        httponly = "; HttpOnly" if value[:httponly]
        same_site =
            case value[:same_site]
            when false, nil
              nil
            when :none, 'None', :None
              '; SameSite=None'
            when :lax, 'Lax', :Lax
              '; SameSite=Lax'
            when true, :strict, 'Strict', :Strict
              '; SameSite=Strict'
            else
              raise ArgumentError, "Invalid SameSite value: #{value[:same_site].inspect}"
            end
        value = value[:value]
      end
      value = [value] unless Array === value
      cookie = escape(key) + "=" +
          value.map { |v| escape v }.join("&") +
          "#{domain}#{path}#{max_age}#{expires}#{secure}#{httponly}#{same_site}"

      case header["Set-Cookie"]
      when nil, ''
        header["Set-Cookie"] = cookie
      when String
        header["Set-Cookie"] = [header["Set-Cookie"], cookie].join("\n")
      when Array
        header["Set-Cookie"] = (header["Set-Cookie"] + [cookie]).join("\n")
      end

      nil
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-11T10:48:44.820

基本问题是，根据[Set-Cookie](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie)的定义，具有安全集的 cookie 只能通过安全连接发送。
因此，不通过 HTTP 发送带有安全设置的 cookie 是预期的行为。

您可能希望在不同的环境中设置不同的 cookie 选项。在 config/environments/developent.rb 你可以设置

```
Rails.application.configure do
  config.session_store :cache_store, key: COOKIE_NAME, same_site: :none
end 
```

在生产环境 (config/environments/production.rb) 中，您使用 HTTPS 部署站点：

```
Rails.application.configure do
  config.session_store :cache_store, key: COOKIE_NAME, same_site: :lax, secure: true
end 
```

# node.js - nodejs + 在不同的端口上表达奇怪的东西

> ID：14498316
> 
> 赞同：2
> 
> 时间：2013-01-24T09:51:42.157
> 
> 标签：node.js, express, port, middleware

有人可以告诉我发生了什么吗？我有一个应用程序：

```
var express = require('express')
  , http = require('http')
  , app = express()
  , port = 3000
  , mw = require('./lib/middlewareView')

app.use(mw());

app.get('/', function (req, res, next) {
  res.send("hello");
});

app.listen(port, function() {
    console.log("Listening on " + port);
}); 
```

和 /lib/middlewareView.js ：

```
module.exports = function middlewareView(){
  return function middlewareView(req, res, next) {
    console.log("middleware run");

    next();
  };
}; 
```

当我使用端口 3000 并打开`http://localhost:3000/`一切似乎都很好。控制台输出：

```
Listening on 3000
middleware run
hello 
```

但是如果我切换到端口 5000，控制台会打印：

```
Listening on 5000
middleware run
hello
middleware run
middleware run 
```

所以中间件在一个请求中运行了 3 次，对吧？正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:56:08.687

它可能与 favicon.ico 有关 - 在检索您网站的图标时会发生这种情况，请检查日志以确保...

# python - 为什么我的 base64 编码的 png 在我的 svg 中不可见？

> ID：14498318
> 
> 赞同：2
> 
> 时间：2013-01-24T09:51:47.507
> 
> 标签：python, image, svg, png, base64

我想将 png 转换为 base64 并将编码的字符串插入到 svg 中。

```
fIm = open('name.png', 'rb')
dataIm = fIm.read().encode("base64").replace('\n','')
baseIm += '<g id="%s"><image xlink:href="data:image/png;base64,%s" width="%s" height="%s"/></g>' % (newVal, dataIm, curX, curY) 
```

结果图像不显示。

有什么问题？

这是输出 svg 文件：

```
<?xml version='1.0' ?>
<svg viewBox='0 0 200 200' width='200' height='200' xmlns='http://www.w3.org/2000/svg'>
<defs><g  id="name">
<image xlink:href="data:image/png;base64,..." width='20' height='20'/>
</g></defs>
<use xlink:href="#name" x='30' y='30' />
</svg> 
```

解决方案

```
fIm = open('switchToMinus.png', 'rb')
dataIm = fIm.read().encode("base64").replace('\n','')
addText = '<image xlink:href="data:image/png;base64,{0}" width="20" height="20" x="40" y="40" />'.format(dataIm)
startSvg = """<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1"
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
width="240px" height="240px" viewBox="0 0 240 240">
"""

endSvg = """
</svg>
"""

if __name__ == '__main__':
    f = open('image2.svg','w')
    f.write( startSvg + addText + endSvg )
    f.close()
    print 'Okay!' 
```

# windows - windows系统命令找出机器的cpu/ram使用情况+特定的应用程序/webapp

> ID：14498322
> 
> 赞同：0
> 
> 时间：2013-01-24T09:52:03.797
> 
> 标签：windows, cpu, ram

我希望确定当前在基于 Windows 的虚拟机或服务器中使用的 CPU/RAM，用于机器本身，以及在该机器上运行的特定应用程序/网络应用程序。

我有正在该 Windows 机器上执行的应用程序/Web 应用程序的详细信息。

该应用程序通常是一个 Web 应用程序，它可以使用以下语言之一——> php/java/ruby/python/.net/node.js/perl。

理想情况下，如果可以使用单个命令来确定使用上述任何一种语言的应用程序/Web 应用程序的 pid，但如果可以使用单个命令（对于上述所有/每种语言），那将是非常适合我。

另一个问题--> 当机器是 Windows 机器时，我该如何做类似上面的事情？IE

(1) 在基于 Windows 操作系统的机器中使用什么命令来确定进程 ID (2) 在基于 Windows 操作系统的机器中使用什么命令来确定在基于 Windows 的机器中运行的应用程序/Web 应用程序使用的 CPU/RAM。(3) 确定系统（不是任何特定进程）对 CPU/RAM 的总体使用情况的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:45:07.820

查看[任务列表](http://technet.microsoft.com/en-us/library/bb491010.aspx)以查找进程的进程 ID。

查看[WMIC以了解系统和](http://technet.microsoft.com/en-us/library/bb742610.aspx)[特定应用程序](https://stackoverflow.com/questions/14215756/windows-command-for-cpu-utilization-for-particular-service)的 CPU 使用情况。

`find`与or结合使用`findstr`，应该可以为您提供所需的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-09T13:47:15.353

可以使用 Perl/Python/Java/VB 脚本中的 WMI 命令从 Windows 操作系统获取应用程序或进程的 CPU 和 RAM 使用情况

我们需要执行 2 个 WMI 选择查询并应用 CPU% 利用率公式

**1.检索逻辑进程的总数**

```
select NumberOfLogicalProcessors from Win32_ComputerSystem 
```

**2\. 要检索 PercentProcessorTime、TimeStamp_Sys100NS（已应用 CPU 利用率公式获取实际利用率百分比）和 WorkingSetPrivate (RAM) 的值，最少 2 次，睡眠间隔为 1 秒**

```
select * from Win32_PerfRawData_PerfProc_Process where IDProcess=1234 
```

**3\. 应用 CPU% 利用率公式**

```
CPU%= ((p2-p1)/(t2-t1)*100)/NumberOfLogicalProcessors 
```

p2表示第二次检索到的PercentProcessorTime，p1表示第一次检索到的PercentProcessorTime，t2和t1为TimeStamp_Sys100NS。

可以在链接[http://www.craftedforeveryone.com/cpu-and-ram-utilization-of-an-application-using-perl-via-wmi/中找到一个示例 Perl 代码](http://www.craftedforeveryone.com/cpu-and-ram-utilization-of-an-application-using-perl-via-wmi/)

此逻辑适用于所有支持 WMI 查询的编程语言

# java - Java数组未保持初始化

> ID：14498324
> 
> 赞同：3
> 
> 时间：2013-01-24T09:52:06.473
> 
> 标签：java, arrays, for-loop, initialization

我在一个数组中有一个数组，并希望使用 for each 循环对其进行初始化。

```
// class variable  
Tree[][] trees;

// in constructor

this.trees = new Tree[length][with];

// initialize
for (Tree[] tree : this.trees){
    for(Tree tree2 : tree){
    tree2 = new Tree();
    System.out.println(tree2);
    }
}

for (Tree[] tree : this.trees) {
    for (Tree tree2 : tree) {
    System.out.println(tree2);
    }
} 
```

发生的事情是第一个 println 打印初始化的树，所以它们被初始化了。我以为一切都好。但是当我尝试使用这些树时，我得到了一个空指针异常。所以我尝试再次遍历数组，第二个 println 给我每棵树的 null 。怎么会这样？我在这里想念什么？谢谢！

编辑：哦，我很抱歉，这不是主要的，而是放置循环的构造方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:56:08.843

`tree2`是一个局部变量（在循环范围内可用），您将新创建的`Tree`实例分配给*该变量*而不是您的数组。接下来，您打印该*变量*的内容，以便它似乎可以工作......

相反，您需要将实例显式存储到`trees`中，如下所示：

```
for (int l = 0; l < length; l++){
  for(int h = 0; h < height; h++) {
    trees[l][h] = new Tree();
    System.out.println(trees[l][h]);
  }
} 
```

如您所见，它将实例存储在数组中并使用*数组*打印值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:57:17.703

根据我上面的评论，这是：

```
for (Tree[] tree : this.trees){
    for(Tree tree2 : tree){
    tree2 = new Tree(); // changes tha variable tree2, does not touch the array.
    System.out.println(tree2);
    }
} 
```

没有效果。你需要

```
for (int i = 0; i < length; i++) {
    for (int j = 0; j < width; j++) {
        trees[i][j] = new Tree(); // obviously changes the array content.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:58:04.597

您的问题在第一个循环中：

`tree2 = new Tree();`

此行确实创建了实例，`Tree`但它将其存储在局部变量`tree2`而不是数组元素中`this.trees`。

您应该使用 inexed for 循环遍历数组：

```
for (int i = 0; i < trees.length; i++) {
    for (int j = 0; j < trees[i].length; j++) {
        threes[i][j] = new Tree();
    }
} 
```

`threes[i][j] = new Tree();`行和行之间的区别在于`tree = new Tree();`，第一个将实例存储在数组元素中，第二个将其存储在单个变量中。

Java 引用不是 C 指针。对象的赋值是按值赋值的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T09:58:55.673

在这个 for 循环中

```
for(Tree tree2 : tree)
{
    tree2 = new Tree(); 
```

您正在对局部引用变量进行赋值`tree2`，其中 as`tree[i][j]`没有被分配任何值。

# javascript - Wijmo BarGraph - 使用轴上的图像

> ID：14498325
> 
> 赞同：0
> 
> 时间：2013-01-24T09:52:10.913
> 
> 标签：javascript, jquery, jquery-plugins, wijmo

我正在使用 Wijmo 条形图，并试图创建一个在 x 轴上有图像而不是标签的图形。

这是我目前得到的代码，但是，图像源被打印为字符串而不是显示图像。有人知道解决这个问题的方法吗？

```
 $(document).ready(function () {
    defaultPalette = ['#e11a00', '#ddcd0e', '#005698'];
    $("#wijbarchart").wijbarchart({
        horizontal:false,
        hint: {
            content: function () {
                return this.data.label + '\n ' + this.y + '';
            }
        },
        seriesList: [{
            label: "Entries",
            legendEntry: true,
            data: { 
                x: [<img src="photos/image1.jpg" />,<img src="photos/image2.jpg" />,<img src="photos/image3.jpg" />],
                y: [22,10,65] 
            }
        }],
        painted: function (args) {
            var bars = $(this).data('fields').chartElements.bars
            if (bars.length > 0) {
                for (var i in bars) {
                    bars[i].attr({ fill: defaultPalette[i % defaultPalette.length]});
                }
            }
        },
        mouseOut: function (e, data) {
            data.bar.attr({ fill: defaultPalette[data.index % defaultPalette.length]});
        }
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:59:19.393

目前，不支持显示图像来代替值标签。但是，我已经对开发团队进行了改进，希望它会在未来的构建中得到支持。

问候

阿什什

# ftp - 对 PASV 命令的 FTP 响应应该是什么

> ID：14498331
> 
> 赞同：8
> 
> 时间：2013-01-24T09:52:20.083
> 
> 标签：ftp, ftp-server

我正在编写一个 FTP 服务器，但我不理解 PASV 命令，任何服务器都会发送这样的响应：

```
227 Entering Passive Mode (213,229,112,130,216,4) 
```

括号中的数字是什么意思？正常模式和被动模式有什么区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T05:41:40.180

是的，结果是 (213,229,112,130,216,4)。213,229,112,130 是 IP 地址。216 是十进制的高 8 位。4 是十进制的低 8 位。所以端口号是 216 * 256 + 4。你应该在括号中解析它们。

# grails - 带有 Vaadin 插件的 Grails，它是正确的选择吗？

> ID：14498336
> 
> 赞同：10
> 
> 时间：2013-01-24T09:52:37.367
> 
> 标签：grails, vaadin, grails-plugin

对于我的组织，我正在为我们的下一个项目评估 RICH 技术。我们目前正在使用 grails 2.1.0，对此非常满意，尤其是 groovy 和 gorm，我们希望继续使用它。这个想法是用一些丰富的框架/库来扩展 grails。目前我正在评估：用于 ZK 的 grails 插件、用于 Vaadin 的 grails 插件、knockoutjs、angular.js、ember.js。

我已经收到了使用 ZK（没有 grails）的同事的反馈，他们的结论是：很酷，但忘了性能，每次你在客户端做某事时，ZK 都会去服务器。

我的问题是：Vaadin（Grails 插件）也是如此吗？它如何应对繁重的单页应用程序？小鹿斑比呢？这可以是一个选择吗？

我们需要的是纸上的 grails + Vaadin：我们想要编写 groovy/java，而不是 xml，当然也不是 javascript。这是正确的选择吗？

我知道我的问题很笼统，但我才刚刚开始评估……谢谢您的关注！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T15:16:28.717

1.  Vaadin 与 Groovy 和 Grails 完美配合。您可以使用 Grails.get() 方法获取服务（实际上是 spring bean）并通过 Grails.i18n() 方法进行本地化。因为所有代码都将用 Groovy 而不是 Java 编写，所以它会变得不那么繁重（更少的代码行等等......）。
2.  Vaadin 不会在服务器上执行任何用户操作。您可以通过在任何组件上设置 setImmediate(false) 来影响它。
3.  当您在 Vaadin 中制作复杂的应用程序时，您需要注意在页面上放置了多少组件。如果您预计单个页面上会有数千个组件，那么浏览器渲染器在处理它时会遇到性能问题（当然渲染速度取决于您的计算机硬件）。更多提示在[这里](https://vaadin.com/wiki/-/wiki/Main/Optimizing%20Sluggish%20UI)。
4.  我建议 - 尝试在 Vaadin 和假数据库中构建 UI。然后看性能再切换到真实数据库。通常人们会责怪 Vaadin，但问题出在其他地方，例如数据库、索引、一次加载到许多项目......
5.  如果你不想玩 JavaScript，那么我想 knockoutjs、angular.js、ember.js 都出局了。
6.  您需要确定[Vaadin 组件](http://demo.vaadin.com/sampler)是否是您所需要的。我真的建议尝试一下并在 Vaadin 中进行概念证明。如果没有，Vaadin 7 会简化[与 JavaScript 的集成](https://vaadin.com/wiki/-/wiki/Main/Integrating%20a%20JavaScript%20component)！因此，您可以轻松地将 Vaadin 服务器代码与任何 JavaScript 库（例如 highcharts 等）集成。
7.  你需要让你的容器延迟加载（[检查这个](http://ondrej-kvasnovsky.blogspot.cz/2012/12/lazy-loaded-table-in-vaadin-7.html)）
8.  我认为您应该从 Vaadin 7 开始（这是一个[教程](http://ondrej-kvasnovsky.blogspot.cz/2012/11/hello-world-in-grails-and-vaadin.html)）
9.  Vaadin 7（在 7.0.1 或 7.0.2 版本中）将有更多的性能优化

# html - HTML5 振动 API 支持

> ID：14498338
> 
> 赞同：9
> 
> 时间：2013-01-24T09:52:40.943
> 
> 标签：html, cross-browser, vibration

我在[http://caniuse.com/](http://caniuse.com/)上进行了检查，但找不到有关振动 API 兼容性的任何信息。

哪些浏览器支持它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T09:55:21.483

**[2014-03-07] 更新**：Firefox、Chrome 和 Opera 现在支持 Vibration API。我还在[caniuse.com](http://caniuse.com/#feat=vibration)上提供了这些信息。

* * *

基于[这篇文章](http://jspro.com/apis/the-buzz-about-the-vibration-api/)：

> 振动 API 仍然主要不受支持。Firefox 16+ 是目前唯一支持 API 的浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:39:53.463

根据[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.vibrate)的说法，它在带有前缀 webkit 的 Chrome、带有前缀 moz 的 Firefox 11+ 和不带任何前缀的 Firefox 16+ 中受支持。

但是，正如您现在可以[在 Chromium 中查看此问题](https://code.google.com/p/chromium/issues/detail?id=114524)一样，Chrome 中并没有支持它，而且它们似乎并不着急，因为优先级为 2（正常）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T09:34:35.157

到目前为止，Android Strock 浏览器不支持它。

# .htaccess - .htaccess 简单重定向不起作用

> ID：14498339
> 
> 赞同：-1
> 
> 时间：2013-01-24T09:52:47.043
> 
> 标签：.htaccess

我想将旧的内部页面重定向到我的主页。我的 .htacess 文件是这样开始的：

```
RewriteEngine On
RewriteBase /

Redirect 301 /int/index.php?m=help https://website.com 
```

再往下，我有更多规则来强制 SSL 并且没有“www”，这些规则工作正常，但由于某种原因`Redirect`指令被忽略，客户端可以打开页面而不被重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:26:43.993

我怀疑是由于`?m=help`. 我会改用`RewriteRule`这样的：

```
RewriteCond %{QUERY_STRING} m=help
RewriteRule index\.php https://website.com? [R=301,L] 
```

请注意：

1.  这 ？在重写路径的末尾需要切断`?m=help`; 如果你省略它，你会重定向到`https://website.com?m=help`
2.  表示`[R=301,L]`：“重定向到页面”和（L）“应用此规则后停止重写引擎”，即不会对字符串应用额外的重写`https://website.com?`

# javascript - 一种删除元素点击事件的方法

> ID：14498347
> 
> 赞同：-2
> 
> 时间：2013-01-24T09:53:00.433
> 
> 标签：javascript, jquery, dom, onclick, event-bubbling

我有一个元素`#foo`，它上面有点击事件。元素`#foo`在`#bar`其上也有点击事件的元素中。

```
<div id="bar">
  <div id="foo" />
</div> 
```

`#foo`单击时，`#bar`将调用`#foo`事件并忽略事件。这就是我现在想要的。

我正在寻找一种方法来从`#foo`元素中删除所有点击事件，除了我刚刚设置的事件**和**父母上的所有事件`#foo`。

**编辑：**这是[jsFiddle 演示](http://jsfiddle.net/9WAUC/8/)。我希望在第一个事件之前调用第二个事件。

**编辑＃2：**这是[我的代码以及您的建议](http://jsfiddle.net/9WAUC/4/)。不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:57:14.940

如果您在 foo 上有一个点击事件并且您不希望它冒泡，您可以执行以下操作：

```
$("#foo").on('click', function(e){
     e.preventDefault();
     e.stopPropagation(); //this line will stop the click bubbling up the tree.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:55:22.883

试试这个

```
$('#foo').click(function(e){
     e.preventDefault();
     e.stopPropagation(); 
     $('#bar').trigger('click');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:58:56.113

使用 stopPropagation 函数，看一个例子：

```
$("#foo").click(function(e) {
   e.stopPropagation();
}) 
```

# matplotlib - Matplotlib：子图字体重叠

> ID：14498352
> 
> 赞同：1
> 
> 时间：2013-01-24T09:53:15.527
> 
> 标签：matplotlib

我想使用 matplotlib 制作 21 个子图。在某些图中，轴的字体在 X 轴上重叠，但 X 轴标签是可以的。例如，一个图的 X 轴值为 (0,10,2)，相邻图的值为 (0.001,0.010,0.002)，因此在子图中，10（在第一个 X 轴上）与 0.001（X - 相邻地块的轴）。如果有人知道，请回复我。

非常感谢

-病毒性的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:56:22.743

您可以尝试几件事：

*   调整子图以便有更多的 wspace 和 hspace
*   手动调整 xlim/ylim 以确保没有重叠（棘手）
*   使用tight_layout（见[这个问题](https://stackoverflow.com/questions/9603230/how-to-use-matplotlib-tight-layout-with-figure)）

# java - 复杂字符之间的 Java 正则表达式文本

> ID：14498353
> 
> 赞同：2
> 
> 时间：2013-01-24T09:53:19.660
> 
> 标签：java, regex, string, data-extraction

我试图在正则表达式的帮助下将文本从字符串中提取出来，但我之前没有使用太多，而且我无法弄清楚 Pattern.compile 的格式。

我想从以下字符串中减去重量（9 盎司）：

```
<li><b>Shipping Weight:</b> 9 ounces (<a href="http://www.amazon.com/gp/help/seller/shipping.html?ie=UTF8&amp;asin=0982817509&amp;seller=ATVPDKIKX0DER">View shipping rates and policies</a>)</li> 
```

* * *

```
print("Actual Weight:" + link.outerHtml());
Pattern p = Pattern.compile("Weight:\\</\\b\\>(.*?)\\ (");
Matcher m = p.matcher(link.outerHtml());
m.find();
System.out.println(m.group(1)); 
```

我的 Pattern.compile 格式应该是什么。我试图在“重量：”和“（”之间切换。

任何帮助都会很棒！我一直在寻找一段时间，但我找不到解释格式的好地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:00:43.820

你甚至不需要组。在这种情况下看后面的作品：

```
Pattern p = Pattern.compile("(?<=Weight:</b> )[^(]*"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:56:47.513

你似乎没有逃避最后一个`(`，所以这将是一个问题（*我认为，我不使用 Java* - 考虑到正则表达式中使用括号来表示组）。我还添加了`\s`'s，这意味着您不必修剪结果。

```
Pattern.compile("Weight:</b>\s+(.*?)\s+\("); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:03:41.950

作为备选：

```
Pattern.compile("\d*\sounces"); 
```

# java - 如果 Ajax 不返回任何元素，Selenium Ajax 会等待吗？

> ID：14498355
> 
> 赞同：5
> 
> 时间：2013-01-24T09:53:34.040
> 
> 标签：java, ajax, selenium

我正在向某些输入字段发送一些键。当从这个元素中移除焦点时，如果我输入的这个值是有效的，一个 ajax 请求就会发送到服务器。如果是，则不会发生任何事情，如果不是，则会出现错误消息。有几个这样的字段。

当我说：

```
driver.findElementById(firstId).sendKeys(firstValue);
driver.findElementById(secondId).sendKeys(secondValue); 
```

第二个值不会被发送到第二个元素，因为同时会有一个非常短的 ajax 请求。但由于该值是 ok (firstValue)，它不会显示任何文本或其他任何内容。

我如何告诉 Selenium 等待这个 ajax 完成？我不想使用 Thread.sleep。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T13:22:55.340

Selenium 不会等待 AJAX 加载。它会自动等待页面加载。要等待 AJAX 类型加载，您必须使用隐式和显式等待。

您可以使用隐式等待和显式等待来等待特定的 Web 元素，直到它出现在页面中。您可以定义的等待期取决于应用程序。

**显式等待：**

显式等待是您定义的代码，用于等待特定条件发生，然后再继续执行代码。如果条件达到，它将终止等待并继续执行进一步的步骤。

**代码：**

```
WebDriverWait wait = new WebDriverWait(driver,30);
wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(strEdit))); 
```

或者

```
WebElement myDynamicElement = (new WebDriverWait(driver, 30))
.until(new ExpectedCondition<WebElement>(){
@Override
public WebElement apply(WebDriver d) {
return d.findElement(By.id("myDynamicElement"));
}}); 
```

这会在抛出 TimeoutException 之前等待最多 30 秒，或者如果它发现元素将在 0 - 30 秒内返回它。默认情况下，WebDriverWait 每 500 毫秒调用一次 ExpectedCondition，直到它成功返回。对于 ExpectedCondition 类型的成功返回是 Boolean 返回 true 或所有其他 ExpectedCondition 类型的非空返回值。

您可以根据应用程序的需要使用 ExpectedConditions 类。

**隐式等待：**

隐式等待是告诉 WebDriver 在尝试查找一个或多个元素时轮询 DOM 一段时间（如果它们不是立即可用的）

**代码：**

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

要记住的一件事是，一旦设置了隐式等待 - 它将在 WebDriver 对象实例的生命周期内保持不变

有关更多信息，请使用此链接[http://seleniumhq.org/docs/04_webdriver_advanced.jsp](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)

`You can use these waits during your AJAX loading.`

我希望这会有所帮助。

# c# - 反序列化 XML 文件而不将其全部加载到内存中

> ID：14498356
> 
> 赞同：4
> 
> 时间：2013-01-24T09:53:44.393
> 
> 标签：c#, .net, performance, memory-management, xml-serialization

假设您的应用程序使用 XmlSerializer 序列化对象。当应用程序的另一部分（例如，外部服务或其他组件）处理该 xml 文件时，会返回一个巨大的 xml 文件，该文件是一个巨大对象的序列化。

您在不填满服务器内存的情况下反序列化和处理该响应的方法是什么？

我通常更喜欢使用 XmlSerializer，但是当我必须与这些怪物战斗时，我没有防弹的解决方案。我已经阅读了有关 XNode.ReadFrom 的信息，但我想知道使用这种方法是否可以像流式反序列化一样完成。

谢谢，马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:01:23.693

我使用最快的可用 XML 反序列化器。你可以在这里找到很好的比较。sharpSerializer 似乎最快。

[http://www.sharpserializer.com/en/index.html](http://www.sharpserializer.com/en/index.html)

# android - 在设置中禁用“自动旋转屏幕”选项时控制Android方向？

> ID：14498373
> 
> 赞同：2
> 
> 时间：2013-01-24T09:54:35.813
> 
> 标签：android, android-orientation

如您所见，即使在设置中禁用“自动旋转屏幕”选项时，Android 的 Youtube 应用程序也可以将屏幕从纵向旋转到横向。我该怎么做呢？谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T10:45:15.117

使用 -`ActivityInfo.SCREEN_ORIENTATION_SENSOR`如果您想旋转屏幕而不考虑用户的选择，请使用`ActivityInfo.SCREEN_ORIENTATION_USER`. 这只会在打开时旋转屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T06:53:18.117

使用 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR)，它会忽略自动旋转选项，只要您的设备旋转就旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:01:03.203

你也可以使用

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

//This is the default value
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);

public static void setAutoOrientationEnabled(ContentResolver resolver, boolean enabled)
{

    Settings.System.putInt(resolver, Settings.System.ACCELEROMETER_ROTATION, enabled ? 1 : 0);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T03:46:07.120

在您希望能够旋转屏幕的活动的 onCreate 中使用它：

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);

它不会影响其他活动或整个设备设置。

我已经试过了。有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:02:05.247

如这里所示[http://developer.android.com/guide/topics/sensors/sensors_overview.html](http://developer.android.com/guide/topics/sensors/sensors_overview.html)您可以注册自己的传感器（`TYPE_ACCELEROMETER`在这种情况下），然后监听它的事件。

当您计算出手机方向已更改时，您应该以编程方式更改布局方向。

# java - Java Hibernate 连接泄漏

> ID：14498382
> 
> 赞同：1
> 
> 时间：2013-01-24T09:55:02.100
> 
> 标签：java, hibernate, struts2, database-connection, struts2-s2hibernate

使用 Hibernate 和 Struts2，整个流程如下：

`hibernate.cfg.xml`作为：

```
<hibernate-configuration>

    <session-factory>
    <property name="dialect">org.hibernate.dialect.Oracle9Dialect</property>
    <property name="connection.url">jdbc:oracle:thin:@xx.xx.xxx.xx:1521:TEST</property>
    <property name="connection.username">xxxx</property>
    <property name="connection.password">xxxxyyy</property>
    <property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>

   <mapping class="test.models.administration.Menus" />

   <mapping resource="Dual.hbm.xml" />
 </session-factory>

 </hibernate-configuration> 
```

对于 DAO 的扩展`AbstractSimpleGenericDao`：

```
import java.io.Serializable;
import java.lang.reflect.ParameterizedType;
import java.util.List;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.googlecode.s2hibernate.struts2.plugin.annotations.SessionTarget;
import com.googlecode.s2hibernate.struts2.plugin.annotations.TransactionTarget;

@SuppressWarnings("unchecked")
public abstract class AbstractSimpleGenericDao<C, I extends Serializable> {

Class<C>                 entityClass;

@SessionTarget
protected Session        hSession;

@TransactionTarget
protected Transaction    hTransaction;

{
entityClass = (Class<C>) ((ParameterizedType)           
getClass().getGenericSuperclass()).getActualTypeArguments()[0];
}

public List<C> getAll()
{
 try
{
  return hSession.createCriteria(entityClass).list();
}
catch (HibernateException e)
{
  throw e;
}
}

  public C get(I id)
   {
    try
    {
     return (C) hSession.get(entityClass, id);
     }
   catch (HibernateException e)
    {
    throw e;
     }
       }

    public void save(C object)
    {
     try
     {
        hSession.save(object);
     }
        catch (HibernateException e)
        {
          hTransaction.rollback();
          throw e;
        }
        }

         public void update(C object)
           {
             try
              {
                hSession.update(object);
               }
        catch (HibernateException e)
          {
           hTransaction.rollback();
           throw e;
           }
            }

      public void delete(I id)
        {
         try
        {
          C actual = get(id);
          hSession.delete(actual);
         }
         catch (HibernateException e)
         {
         hTransaction.rollback();
          throw e;
          }
          }
          } 
```

然后在我的 DAO 类中扩展DAO**之上，例如：**

```
 public class UserRoleDAO extends AbstractSimpleGenericDao<UserRole, UserRoleId> {

          public List L() {
    try {
        String queryString = "from UserRole";
        Query queryObject = hSession.createQuery(queryString);
        return queryObject.list();
    } catch (RuntimeException re) {
        throw re;
    }
      } 
```

然后在我的 struts Action 类中，实例化 DAO 并检索列表：

```
 public class abc extends ActionSupport{
          private UserRoleDAO userRoleDao = new UserRoleDAO();
          private List ls=new ArrayList();
          public String execute()
        {
             List ls=userRoleDao.L()
     return "success";
        }
            } 
```

如果我正在调用此`abc`Action 类，通过重复单击指定的菜单链接，它会导致连接泄漏，计为打开的连接，我可以使用 jProfiler 看到，并且永远不会关闭。同时，它也在泄漏连接。

**使用 jProfiler 的所有打开的泄漏连接的 StackTrace **：****

 **```
org.hibernate.transaction.JDBCTransaction.begin()

com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInter
ceptor.injectHibernateTransactionByAnnotation(java.lang.Object, org.hibernate.Session, boolean)

com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInter
ceptor.injectHibernateTransactionByAnnotation(java.lang.Object, org.hibernate.Session, boolean)

com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInter
ceptor.intercept(com.opensymphony.xwork2.ActionInvocation)

java.lang.Thread.run()
URL: /project/action-name 
```

**为什么 Hibernate 会泄露这些连接？**

是不是这样，Hibernate 将连接保持在会话中并重用相同的连接，因此，如果我同时发出并发请求，如果会话连接被占用，它会泄漏连接。这只是我假设。我没有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:35:26.883

在您的休眠配置中隐式使用`DriverManagerConfigurationProvider`. 默认情况下使用此提供程序，除非您使用属性对其进行配置`connection.provider_class`。

> 该提供程序还实现了一个非常基本的连接池。

什么意思是“基本的连接池”。如果您运行您的应用程序，您可以在日志中看到

```
[DriverManagerConnectionProvider] Using Hibernate built-in connection pool (not for production use!)
[DriverManagerConnectionProvider] Hibernate connection pool size: 20 
```

您还可以通过休眠配置属性设置此值`connection.pool_size`。但*它不会限制您打开的最大连接数。*当池为空时，您可以打开任意数量的连接。`closeConnection`除非当前池大小不超过属性中的值，否则提供程序将在返回连接到池时保持它们打开`connection.pool_size`。一旦当前池大小不为空，您将无法打开任何新连接，因为连接提供程序会从池中返回连接。

正如您现在所看到的，很难说默认情况下使用此连接提供程序的休眠可能会泄漏连接，我只是说这是不可能的。但是，它不受打开连接数的限制。

为确保连接受到限制，请使用不同的连接提供程序。例如，您可以使用`C3P0ConnectionProvider`并设置该属性`hibernate.c3p0.max_size`来限制打开的连接。**

# html - WP主题代码都在一行中

> ID：14498383
> 
> 赞同：0
> 
> 时间：2013-01-24T09:55:03.920
> 
> 标签：html, wordpress, optimization, themes

我正在为我的网站寻找 WP 主题。在查看源代码后，我注意到有很多主题完全是由一行代码编写的。为了查看所有代码，您必须向右滚动很长时间才能到达末尾。

除了在修改代码方面非常不舒服和不方便之外，使用这种方式构建的主题是否有任何技术缺点？我问是因为其中许多主题都被大量购买......

澄清：这不是源代码本身，但是当我在浏览器中单击“查看源代码”时，这里的输出是一行。这也是正常的还是符号缩小？

# asp.net - JQuery UI 和 ASP .NET：带图像的列表性能缓慢

> ID：14498389
> 
> 赞同：1
> 
> 时间：2013-01-24T09:55:14.757
> 
> 标签：asp.net, jquery-ui

我们使用 JQuery UI 在列表中显示图像按钮（asp:Linkbutton、asp:HyperLink、..），我们注意到页面加载时性能非常缓慢。

该页面似乎已加载，但图像除外。此时 - 在 chrome 下 - 加载圈仍在旋转，这就是用户必须等待 10 秒的地方！要加载的图像：

![在此处输入图像描述](../Images/904deb3f14e8724b4e00852b1042ccc4.png)

10 秒后，最终显示图像：

![在此处输入图像描述](../Images/d91b7eff5657bead89a97e30809614e7.png)

它似乎与 jquery-ui 图像（ui-icons_ffffff_256x240.png）有关：

[![network_chrome](../Images/29b2ce75ee3c8c489b3ade33c8b7e9e8.png)](https://i.stack.imgur.com/bAdh6.png)

jquery-ui 和 css 在 Master 页面的 head 部分中引用：

```
<link type="text/css" href="/Ressources/css/jquery-ui-1.8.7.mf.css" rel="stylesheet" />
<script type="text/javascript" src="/Scripts/jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery-ui-1.8.13.custom.min.js"></script> 
```

这是图像的设置方式：

在 ASPX 中：

```
<asp:LinkButton ID="lkBtnEditFDM" runat="server" Text="Modif" CssClass="editFButton" OnClick="lkBtnAddFDM_Click" ></asp:LinkButton> 
```

在 JS 中：

```
$(document).ready(function () {
..
  $(".editFButton").button({
    text: false,
    icons: {
      primary: 'ui-icon-pencil'
    }
  });
}); 
```

你知道为什么会发生这种巨大的滞后吗？谢谢！

# javascript - 使用清除图标清除 IE10 上的文本输入时触发的事件

> ID：14498396
> 
> 赞同：84
> 
> 时间：2013-01-24T09:55:24.033
> 
> 标签：javascript, events, internet-explorer-10, html-input

在 chrome 上，当用户单击清除按钮时，搜索输入会触发“搜索”事件。

有没有办法在 Internet Explorer 10 上的 javascript 中捕获相同的事件？

![在此处输入图像描述](../Images/b587f695a02d331329bf84ad13cee3f5.png)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-24T10:20:51.887

我终于找到的唯一解决方案：

```
// There are 2 events fired on input element when clicking on the clear button:
// mousedown and mouseup.
$("input").bind("mouseup", function(e){
  var $input = $(this),
      oldValue = $input.val();

  if (oldValue == "") return;

  // When this event is fired after clicking on the clear button
  // the value is not cleared yet. We have to wait for it.
  setTimeout(function(){
    var newValue = $input.val();

    if (newValue == ""){
      // Gotcha
      $input.trigger("cleared");
    }
  }, 1);
}); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-04-21T04:54:47.930

该`oninput`事件在`this.value`设置为空字符串时触发。这解决了我的问题，因为无论他们使用 X 还是通过退格清除搜索框，我都想执行相同的操作。这仅适用于 IE 10。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-06-10T15:57:01.367

改为使用`input`。它在所有浏览器下都具有相同的行为。

```
$(some-input).on("input", function() { 
    // update panel
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-29T19:09:01.377

为什么不

```
$("input").bind('input propertychange', function() {
    if (this.value == ""){
      $input.trigger("cleared");
    }
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-04-09T17:01:10.507

我意识到这个问题已经得到回答，但接受的答案在我们的情况下不起作用。IE10 没有识别/触发该`$input.trigger("cleared");`声明。

我们的最终解决方案用 ENTER 键上的 keydown 事件替换了该语句（代码 13）。对于后代，这在我们的案例中是有效的：

```
$('input[type="text"]').bind("mouseup", function(event) {
    var $input = $(this);
    var oldValue = $input.val();
    if (oldValue == "") {
        return;
    }
    setTimeout(function() {
        var newValue = $input.val();
        if (newValue == "") {
            var enterEvent = $.Event("keydown");
            enterEvent.which = 13;
            $input.trigger(enterEvent);
        }
    }, 1);
}); 
```

此外，我们只想将此绑定应用于“搜索”输入，而不是页面上的每个输入。自然，IE 也使这变得困难......虽然我们已经编码`<input type="search"...>`，但 IE 将它们呈现为`type="text"`. 这就是 jQuery 选择器引用`type="text"`.

干杯!

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-01-09T04:35:55.320

我们可以只听`input`事件。详情请参阅[参考资料](https://developer.mozilla.org/en-US/docs/Web/Events/input)。这就是我解决 IE 上 Sencha ExtJS 中清除按钮问题的方法：

```
Ext.define('Override.Ext.form.field.ComboBox', {
    override: 'Ext.form.field.ComboBox',

    onRender: function () {
        this.callParent();

        var me = this;
        this.inputEl.dom.addEventListener('input', function () {
            // do things here
        });
    }
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-11-16T06:02:40.773

一个开箱即用的解决方案是完全用 CSS 摆脱 X：

```
::-ms-clear { display: none; } /* see https://stackoverflow.com/questions/14007655 */ 
```

这有以下好处：

1.  更简单的解决方案 - 适合一条线
2.  适用于所有输入，因此您不必为每个输入都有一个处理程序
3.  不存在因逻辑错误而破坏 javascript 的风险（需要较少的 QA）
4.  标准化跨浏览器的行为 - 使 IE 的行为与 chrome 相同，因为 chrome 没有 X

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-15T18:47:08.593

对于我的 asp.net 服务器控制

```
<asp:TextBox ID="tbSearchName" runat="server" oninput="jsfun_tbSearchName_onchange();"></asp:TextBox> 
```

js

```
function jsfun_tbSearchName_onchange() {
    if (objTbNameSearch.value.trim() == '')
            objBTSubmitSearch.setAttribute('disabled', true);
        else
            objBTSubmitSearch.removeAttribute('disabled');
        return false;
} 
```

参考

[MSDN onchange 事件](http://msdn.microsoft.com/en-us/library/ie/gg592978%28v=vs.85%29.aspx) - 在 IE10 中测试。

...或用 CSS 隐藏：

```
input[type=text]::-ms-clear { display: none; } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-15T12:58:57.267

上面的代码在我的情况下不起作用，我已经更改了一行并介绍`$input.typeahead('val', '');`了在我的情况下有效的..

```
// There are 2 events fired on input element when clicking on the clear button:// mousedown and mouseup.
$("input").on('mouseup', function(e){
    var $input = $(this),
    oldValue = $input.val();
    if (oldValue === ''){
        return;
    }
    // When this event is fired after clicking on the clear button // the value is not cleared yet. We have to wait for it.
    setTimeout(function(){
        var newValue = $input.val();
        if (newValue === ''){
            $input.typeahead('val', '');
            e.preventDefault();
        }
    }, 1);
}); 
```

# android - 词典应用程序中的发音？

> ID：14498397
> 
> 赞同：2
> 
> 时间：2013-01-24T09:55:28.657
> 
> 标签：android, dictionary, text-to-speech

我正在制作一个英语 - 越南语词典应用程序，请建议如何发音一个英语单词。

我的意思是，是否有任何解决方案：**输入：单词+语音->输出：声音？**

我已经考虑过 Text-to-Speech，但它需要 Internet 连接，因此它不适用于我的 Dictionary App。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:05:01.150

如果 tts lib 尚未安装在 sd 卡中，则 TTS 不需要互联网连接，除非第一次。

```
 TextToSpeech tts = new TextToSpeech(this, this);
 tts.setLanguage(Locale.US);
 tts.speak("Hello..I am TTS", TextToSpeech.QUEUE_ADD, null); 
```

[http://developer.android.com/reference/android/speech/tts/TextToSpeech.html](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)

# javascript - 我怎样才能纯粹使用 AJAX 实现动态过滤并仍然保留可用的历史记录？

> ID：14498404
> 
> 赞同：2
> 
> 时间：2013-01-24T09:55:47.390
> 
> 标签：javascript, jquery, ajax, filtering

我正在尝试在我自己的电子商务网站上实现 AJAX 过滤并寻找最佳解决方案。

我想出的是：

使所有内容静态生成（由服务器端构建，然后在同一页面上调用 ajax 请求但带有参数）。唯一的缺点是用户没有任何回溯历史，因为他的 URL 页面没有改变。

我会尝试实现 history.api 等，但只是在这里看到了这个很棒的过滤：http: [//trendygolf.com/shop?brand[ ]=15&brand[]=27&price-min=0&pricemax=2000&sort=newest](http://trendygolf.com/shop?brand%5B%5D=15&brand%5B%5D=27&price-min=0&pricemax=2000&sort=newest)

从我所看到的情况来看，它会在不重新加载页面的情况下进行 AJAX 调用并更改 URL，这怎么可能？

当然，它只是用请求中的新页面替换旧的 html 页面

我很想听听这方面的一些帮助，什么是最佳实践，优点/缺点，以及 Trendygolf.com 是如何做到这一点的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:03:18.727

关于更新 URL，它是 HTML5 的一部分，虽然不能 100% 确定 IE 支持如何。这将起作用：

```
window.history.pushState(“object or string”, “Title”, “/new-url”); 
```

要了解有关此类事情的更多信息，请查看 Mozilla 文档：[https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:41:08.360

除了 newmu
在您需要维护 ajax 调用的历史/状态时给出的答案之外，您应该使用`hashtags`
它是符号哈希（'#'）之后的 url 的一部分。在仍然不支持历史 API 的浏览器中，您在 url 中写入的任何内容`#`都不会发送到服务器
主题标签用于维护状态
也可以在不重新加载页面的情况下更改主题标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:49:44.447

听起来您可以使用[History.js](https://github.com/balupton/History.js/)库，它可以让您从 JavaScript 更改浏览器的状态/URL。基本上这个库使用 HTML5 History API（如果可用），但可以在不支持它的浏览器中模拟它。虽然 History.js 是一个低级 API，但您可能希望在其之上使用 Router 抽象，这大大简化了您的编程。为此，我实现了[StateRouter.js](https://github.com/aknuds1/staterouter.js)库。

一个如何使用 StateRouter.js 的简单示例：

```
function getHome() {
}
function getPersons() {
}
function getPerson(id) {
}

var router = new staterouter.Router();
// Configure routes
router
  .route('/', getHome)
  .route('/persons', getPersons)
  .route('/persons/:id', getPerson);

$(document).ready(function () {
    // Perform initial routing
    router.perform();

    // Navigate to a URL
    router.navigate('/persons/1');

    // Go back
    router.back();

    // Go forward
    router.go(1);
}); 
```

# knockout.js - Knockout.js foreach 作为新 ViewModel 的元素

> ID：14498405
> 
> 赞同：0
> 
> 时间：2013-01-24T09:55:52.480
> 
> 标签：knockout.js

我正在尝试做下一件事：

```
<div data-bind="foreach: { data: elementsVM.elementsList, as: 'element' }">
   <div data-bind="with: new ElementViewModel(element).getElementDetailsByLang(langFilter)">
        <h3 data-bind="html: ElementTitle"></h3>
   </div>
</div> 
```

问题是，当`with: new ElementViewModel(element).getElementDetailsByLang(langFilter)`被调用时，`element`作为参数结束`ElementViewModel(Element)`的是来自 foreach 绑定 () 的整个集合，`elementsVM.elementsList`而不是来自 foreach 迭代的当前元素。elementsVM 是一个 ElementsViewModel：

```
function ElementsViewModel() {
    var self = this;

    self.ElementsList = ko.observableArray();

    self.getElementsForCategory = function(categoryId) {
        [...]
    }
} 
```

ElementViewModel 看起来像这样：

```
function ElementViewModel(Element) {
    var self = this;

    self.ElementModel = new ElementModel(Element);

    self.getElementDetailsByLang = function (lang) {
        return ko.computed(function () {                
            [...]
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:05:34.600

当你这样做时会发生什么：

```
<div data-bind="foreach: { data: elementsVM.elementsList }">
   <div data-bind="with: new ElementViewModel($data).getElementDetailsByLang(langFilter)">
        <h3 data-bind="html: ElementTitle"></h3>
   </div>
</div> 
```

如果这不起作用，您的替代方法是使用[自定义绑定。](http://knockoutjs.com/documentation/custom-bindings.html)

# ios - 使用平移手势移动 CALayer 时延迟

> ID：14498413
> 
> 赞同：5
> 
> 时间：2013-01-24T09:56:30.170
> 
> 标签：ios, objective-c, uigesturerecognizer, calayer

我使用平移手势在 CALayer 中移动图像。我遇到的问题是图像的移动似乎有一点延迟，并且没有出现“卡住”我的手指。

这是我如何移动图层的实际片段（facePic 是 CALayer）：

```
CGPoint translation =[touche locationInView:self.view];
self.facePic.frame =
CGRectMake(translation.x - self.facePic.frame.size.width/2,
           translation.y - self.facePic.frame.size.height/2,
           self.facePic.frame.size.width,
           self.facePic.frame.size.height); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T00:06:38.540

我认为您会看到图层*隐式*动画的结果。如果是这样，那么有两个选项可以禁用此动画：

1.  使用事务
2.  设置图层动作

要使用事务，请使用 CATransaction 包装您的代码

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
 . . .
[CATransaction commit]; 
```

要禁用某些图层动作，您可以将其添加到图层初始化中，例如位置动画：

```
aLayer.actions = @{@"position":[NSNull null]}; // FIXED property name 
```

# datagridview - 将 DataGridView 绑定到数据库

> ID：14498417
> 
> 赞同：0
> 
> 时间：2013-01-24T09:56:49.280
> 
> 标签：datagridview, ado.net

导入 System.Data.SqlClient

公共类 Form1 Dim cn As SqlConnection Dim ds As DataSet Dim adapter As SqlDataAdapter Dim eleveBindingSource As BindingSource Dim builder As SqlCommandBuilder

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    cn = New SqlConnection("Data source=.; initial catalog=tp4_ado; integrated security=sspi")
    ds = New DataSet()
    eleveBindingSource = New BindingSource
    adapter = New SqlDataAdapter("Select * from Eleve", cn)
    adapter.Fill(ds, "Eleve")
    eleveBindingSource.DataSource = ds
    eleveBindingSource.DataMember = "Eleve"
    DataGridView1.DataSource = eleveBindingSource
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    adapter.Update(ds.Tables("Eleve"))
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:10:16.920

`UpdateCommand`问题是我在修改时没有初始化`DataGridView`

所以我必须在更新之前添加此代码`DataSet`：

```
builder = New SqlCommandBuilder(adapter) 
```

# java - android中的随机图像

> ID：14498419
> 
> 赞同：1
> 
> 时间：2013-01-24T09:56:56.403
> 
> 标签：java, android

我有可绘制的图像，我将这些图像打乱，但我希望 ***R.drawable.a****这个图像出现 5*次， **这个 *R.drawable.b****出现 10 次*，但在我的代码图像中一次又一次出现。

我的问题是，我希望该图像**R.drawable.a出现在该图像****R.drawable.a**从列表中删除 5 次之后，其他图像开始对所有图像进行洗牌。但与此同时，图像**R.drawable.a** 来了

```
public void addNewImageToScreen() {
    //array of all drawable id's
    int pics[] = { R.drawable.a, R.drawable.b, R.drawable.c, ...etc...};
    Random rand = new Random();
    int pos = rand.nextInt(pics.length);
    addNewImageToScreen(pics[pos]);
} 
```

任何人都可以帮助我这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:01:57.860

您需要删除之前显示的那个

```
 addNewImageToScreen(pics[pos]);

int arraySize=pics.length;
pics[pos] = pics[--arraySize]; 
```

编辑：或使用此逻辑

```
ArrayList picsarr=Arrays.asList(pics);
for(int i=0;i<picsarr.size;i++)
{
Collections.shuffle(picsarr);
 addNewImageToScreen(picsarr.get[i]);
picsarr.remove(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:19:38.920

```
Try this code i think it will help you but i am not sure in my case it works fine

Random random = new Random( System.currentTimeMillis() );
List<Integer> generated = new ArrayList<Integer>();
for (int i = 0; i < imageViews.length; i++) {

    int v = imageViews[i];
    int next = random.nextInt( 15 ) + 1;
    if ( !generated.contains( next ) ) {
        generated.add( next );
        ImageView iv = (ImageView) findViewById( v );
        iv.setImageResource( images[next] );
    }
    else {
        i--;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:22:29.893

经过与这个家伙的一些讨论，这似乎是他想要的：

```
private ArrayList<Integer> mDrawableIds = new ArrayList<Integer>();

        private void populateList() {
                mDrawableIds.add(R.drawable.a);
                mDrawableIds.add(R.drawable.b);
                mDrawableIds.add(R.drawable.c);
        }

private int returnImageResource(int buttonClickCount) {
        int imageResource = -1;

        switch (buttonClickCount) {
                case 1:
                        imageResource = mDrawableIds.get(0);
                        break;

                case 2:
                        imageResource = mDrawableIds.get((int) (Math.random() * mDrawableIds.size()));
                        break;

                case 3:
                        imageResource = mDrawableIds.get(1);
                        break;

                        // more cases here

                case 10:
                        imageResource = mDrawableIds.get((int) (Math.random() * mDrawableIds.size()));
                        mDrawableIds.remove(0);
                        break;
                }

        return imageResource;
    } 
```

我遗漏了一些代码，但这应该可以帮助您入门。您缺少的是一个 ArrayList ，您可以动态地从中删除条目。

# ios - NSDateFormatter 中的 AM/PM 问题

> ID：14498420
> 
> 赞同：4
> 
> 时间：2013-01-24T09:56:58.990
> 
> 标签：ios, iphone, ipad, nsdateformatter

我编写下面的代码将一种日期格式转换为另一种日期格式。但是 AM 字符串有效，而 PM 无效。请帮忙-

```
dateTime=@"2013-01-24 18:30 PM";
//dateTime=@"2013-01-24 06:30 AM";
NSDateFormatter *dtFormatter=[[NSDateFormatter alloc]init];
[dtFormatter setDateFormat:@"yyyy-MM-dd hh:mm a"];
NSDate *AptDate=[dtFormatter dateFromString:dateTime];
[dtFormatter setDateFormat:@"MMM dd,yyyy hh:mm a"];
NSString *strDate=[dtFormatter stringFromDate:AptDate]; 
```

如果我使用 PM 格式，在这里我将 AptDate 变量设为 null

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T10:01:10.397

您需要使用`HH`代替`hh`，因为您的时间是 24 小时格式：

```
[dtFormatter setDateFormat:@"yyyy-MM-dd HH:mm a"]; 
```

* * *

您的完整代码将如下所示：

```
*dateTime=@"2013-01-24 18:30 PM";
//dateTime=@"2013-01-24 06:30 AM";
NSDateFormatter *dtFormatter=[[NSDateFormatter alloc]init];
[dtFormatter setDateFormat:@"yyyy-MM-dd HH:mm a"];
NSDate *AptDate=[dtFormatter dateFromString:dateTime];
[dtFormatter setDateFormat:@"MMM dd,yyyy hh:mm a"];
NSString *strDate=[dtFormatter stringFromDate:AptDate];

NSLog(@"===> %@",AptDate);
NSLog(@"===> %@",strDate); 
```

输出：

```
===> 2013-01-24 07:00:00 +0000
===> Jan 24,2013 12:30 PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T16:26:24.487

```
UILabel *dateLabel = (UILabel *)[cell viewWithTag:400];
NSString *oldDate = [exercise objectForKey:@"date"];
//make formatter
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; //24 hour format
NSDate *tempDate=[formatter dateFromString:oldDate];
NSLog(@"temp date %@", tempDate);
[formatter setDateFormat:@"hh:mm a"];
NSString *newDate=[formatter stringFromDate:tempDate];
NSLog(@"new date %@", newDate);
//make label text
[dateLabel setText:newDate]; 
```

对于从带有 DATETIME 标记的 mySQL 到常规 hh:mm 的任何人来说，正确显示 AM/PM 的格式对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-18T08:37:33.757

对于那些正在寻找**Swift 3**版本的 Accepted 答案的人。

```
let date1            = Date()
let formatter        = DateFormatter()
formatter.dateFormat = "yyyy-MM-dd hh:mm:ss a"
print(formatter.string(from: date1))

let dateTime            = "2013-01-24 18:30 PM"
let dateFormater        = DateFormatter()
dateFormater.dateFormat = "yyyy-MM-dd HH:mm a"
let AptDate             = dateFormater.date(from: dateTime)
dateFormater.dateFormat = "MMM dd,yyyy hh:mm a"
let strDate             = dateFormater.string(from: AptDate!)

print("===> \(AptDate!)")
print("===> \(strDate)") 
```

# charts - 是否可以在道场图表中选择多个标记并将它们的坐标传递给事件？

> ID：14498421
> 
> 赞同：0
> 
> 时间：2013-01-24T09:56:59.203
> 
> 标签：charts, dojo, markers, dojox.charting

![这是我想要实现的一个例子](../Images/88c0b4a58040d064188445f03c8bafca.png)

我想在图表中选择两个或多个标记并使用它们的坐标执行操作。选择点是主要问题，因为我没有找到关于这个主题的任何内容，我不确定是否可以完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:26:27.837

我在饼图中做了类似的事情。

我所做的是在用户单击它时使用“connectToPlot”来更改系列颜色。

这是我所做工作的简历：[当用户单击时更改系列颜色](http://jsfiddle.net/noeliasfranco/3zdkG/)

请注意，当您单击系列时，颜色变为灰色，如果再次单击，系列将恢复为原始颜色（将其保存在属性“originalColor”中）。

```
pieChart.connectToPlot("default", function(evt) {

                var shape = evt.shape;
                var type  = evt.type;

                if (type == "onclick") {
                     var fillColor = "rgb("+shape.fillStyle.r+", "+shape.fillStyle.g+", "+shape.fillStyle.b+")"; console.log(shape.fillStyle);
                    if(shape.rawNode.getAttribute("originalColor")==null)
                        shape.rawNode.setAttribute("originalColor",fillColor);

    var strokeColor = "rgb("+shape.strokeStyle.color.r+", "+shape.strokeStyle.color.g+", "+shape.strokeStyle.color.b+")";

                   if(fillColor=='rgb(238, 238, 238)'){
                        shape.setFill(shape.rawNode.getAttribute("originalColor"));
                        shape.setStroke(shape.rawNode.getAttribute("originalColor"));
                   }else{
                        shape.setFill('rgb(238, 238, 238)');
                        shape.setStroke(shape.rawNode.getAttribute("originalColor"));
                   }
                } 
```

# iphone - UIScrollView-UIPageControl 动画

> ID：14498422
> 
> 赞同：0
> 
> 时间：2013-01-24T09:57:04.937
> 
> 标签：iphone, uiscrollview, uipagecontrol

也许您有任何使 uipagecontrol 移动其子视图的无限动画示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:00:36.397

我找到了一个非常好的图像滑动页面示例 – UIScrollView Auto scrolling like Image Slider

这里：

[http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/](http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/)

祝你好运！

# android - 如何调用x.jar文件并通过android代码执行

> ID：14498424
> 
> 赞同：-2
> 
> 时间：2013-01-24T09:57:14.620
> 
> 标签：android, jar

我已经在 android 应用程序中添加了 x.jar 文件（在构建路径中选择作为 x.jar），但是我无法在应用程序中运行和调用 x.jar 文件。如何调用 x.jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:13:48.543

如果您需要从通过构建路径 android 附加的 jar 调用文件

您只需像下面这样调用文件：

例如，您将 ksoap jar 文件附加到您的项目中。你把文件称为，

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

那就是你用参数调用文件并从jar中导入类就是它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:04:35.567

如果这个 .jar 是一个库，你应该把它放在 libs 文件夹中，而不是调用 ADD TO BUILD PATH。

要使用 .jar 文件，您只需要使用导入即可。

# silverlight - 什么会导致 Ria Services 404 错误，特别是请求中包含“/binary”

> ID：14498428
> 
> 赞同：0
> 
> 时间：2013-01-24T09:57:30.510
> 
> 标签：silverlight, silverlight-4.0, wcf-ria-services, silverlight-5.0

这目前正在开发中，包括 Visual Studio 2012、Silverlight 5 和 Ria Services。我听说过这些部署问题，但我还没有做到这一点。

当我查看 Fiddler 中的调用时，url 看起来像这样：

```
http://127.0.0.1:81/ClientBin/DanielHarris-SilverlightApp-RiaService-NameOfDomainServiceClass.svc/binary/GetColours 
```

这将返回 404，但是我不认为“/binary”应该在 URL 中，并且如果它通过它请求，那么调用将成功。

为了提供更多信息，这里概述了解决方案的布局：

```
Class Library Containing an EF Entity Model (ObjectContext)
Silverlight Application
ASP.NET Web Application with a DomainService class
ASP.NET Web Application with the actual website that display the silverlight XAP 
```

*   带有 DomainService 的 ASP.NET 应用程序引用了 EntityModel 类库
*   Silverlight 应用程序启用了 RIA 服务，SL 应用程序属性中的 RIA 服务链接设置为其中包含 DomainService 类的 ASP.NET 应用程序
*   带有显示 Silverlight XAP 的实际网站的 ASP.NET Web 应用程序运行并在正确的位置正常加载控件，任何 RIA 调用都失败

我想知道是否不支持将 DomainService 类放在它自己的 .NET Web 应用程序中？我的想法是，这将为 RIA 创建一个完全独立于实际显示 Silverlight 控件的“主要”Web 应用程序的端点。

那是我要去错了吗？

编辑 - 我也尝试将实体模型从它自己的类库移动到具有 DomainService 类的 Web 应用程序中，我仍然遇到同样的问题。DomainService、实体模型和显示 Silverlight 应用程序的站点是否都需要在同一个项目中？IE 全部在一个网络应用程序下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:31:51.153

默认情况下，Silverlight 应用程序将尝试在托管它的应用程序中查找 DomainService。如果您想让 DomainService 位于不同的 URL，那么您需要将该 URL 传递给 DomainContext 的构造函数。

如果您使用单独的类库，则需要确保 Web 应用程序引用类库或在 bin 目录中具有类库的 dll。您还需要 RIA 服务 dll 和 web.config 设置。现在最简单的方法是将 RiaServices.Server NuGet 包添加到类库和 Web 应用程序中。新包引用正确的 dll 并设置 web.config。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:59:44.280

默认情况下 silverlight(ria svc) 使用二进制端点。

WCF 压缩 xml，它将是二进制的。否则可能很重。

当我在提琴手中跟踪它时，我总是在域服务调用中看到 /binary 表达式。我也用EF。所以二进制应该在url中。我认为应该是配置错误。

这是我的要求

/ClientBin/AHBSBus-Web-DomainSrv-DSrvSecurity.svc/binary/getServerDate

//要求

<getServerDate xmlns="http://tempuri.org/"></getServerDate>

//回复

<getServerDateResponse xmlns="http://tempuri.org/"> <getServerDateResult> 2013-01-24T15:53:13.4574466+02:00 </getServerDateResponse>

[http://blogs.msdn.com/b/saurabh/archive/2009/11/23/understanding-the-wcf-in-wcf-ria-services.aspx](http://blogs.msdn.com/b/saurabh/archive/2009/11/23/understanding-the-wcf-in-wcf-ria-services.aspx)

RIA Services ServiceHost 默认创建以下端点 -

a) 对于 Silverlight 客户端：带二进制端点的 SOAP。地址 = “二进制”，绑定 = 由 HttpTransportBindingElement 和 BinaryMessageEncodingBindingElement 组成的 CustomBinding ..

您可以通过记录详细信息来跟踪您的绑定。将这些行放在您的 web.config 中运行您的项目并打开日志文件。

```
<system.diagnostics> 
<trace autoflush="true"> 
    <listeners> 
    </listeners> 
</trace> 
<sources> 
    <source name="System.ServiceModel" 
            switchValue="Information, ActivityTracing" 
            propagateActivity="true"> 
        <listeners> 
            <add name="sdt" 
                 type="System.Diagnostics.XmlWriterTraceListener" 
                 initializeData= "WcfDetailTrace.svclog" /> 
        </listeners> 
    </source> 
</sources> 
```

# twitter - 什么是推特 API？

> ID：14498435
> 
> 赞同：0
> 
> 时间：2013-01-24T09:58:07.407
> 
> 标签：twitter

如果这个问题是一个新手问题，我想先道歉，但我真的是一个新手。

我是一名学生，我最近加入了一个涉及研究（挖掘）推文的项目。项目负责人让我使用 Twitter API 来提取推文。Twitter API 到底是什么，我该如何使用它？我需要知道什么才能开始使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:07:06.577

Twitter 允许您使用 Twitter API 与其数据（即推文和关于推文的几个属性）进行交互。您需要了解一种服务器端脚本语言，如 php、python 或 ruby​​，才能向 twitter api 发出请求，结果将`JSON`采用您的程序可以轻松读取的格式。

一个好的起点是阅读[https://dev.twitter.com/](https://dev.twitter.com/)上的官方文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:02:07.010

投掷您可以在您的网站中使用和展示一些功能

# php - PHP 声明新变量的简短句子

> ID：14498438
> 
> 赞同：0
> 
> 时间：2013-01-24T09:58:11.073
> 
> 标签：php, variables

我想知道是否有任何方法可以用短句来陈述一个变量。

**目的：仅当您处于某种情况时必须同时陈述 20 个变量。更方便**

```
$a = 1; $b = 2;

//Imagination like below

$a, $b = 1, 2;

$a = 1, $b = 2; 
```

非常感谢您对替代方案的建议。

**（如果您没有任何想法，请不要指责为什么要考虑这个的方式）**，因为**arrarray** , **(object)**是替代品，但不符合我对我的问题所需要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:00:45.077

最接近该语法的是使用[`list()`](http://si1.php.net/list)：

```
<?php
    list ($a, $b) = array(1, 2);

    echo $a . ' ' . $b; // prints "1 2" 
```

这是魔法！

编辑：

更神奇的是，您可以从 PHP 5.4 开始使用[短数组表示法：](https://wiki.php.net/rfc/shortsyntaxforarrays)

```
<?php
    list($a, $b) = [1, 2];

    print $a . ', ' . $b;    // prints 1, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:00:58.203

`$a = 1, $b = 2;`短于多少`$a = 1; $b = 2;`？

如果出于某种原因您需要在一个语句中进行两个分配，您可以使用`list`：

```
list($a,$b) = array(1,2); 
```

但是，缩短不是这样做的正当理由。

# php - 如何使用 jQuery Ajax 将 PHP 数组值传递给另一个文件？

> ID：14498441
> 
> 赞同：2
> 
> 时间：2013-01-24T09:58:14.810
> 
> 标签：php, javascript, jquery, ajax

这是我的代码，

```
<?php
$answers = Array( [0] => 13 [1] => 5 [2] => 6 [3] => 11 );
?>

<script>
    function loadData1(val) {
        var dataToSend = {
            'name': val,
            'ans[]': <? php echo $answers; ?>
        };
        $.ajax({
            type: 'POST',
            data: dataToSend,
            url: '<?php echo JURI::ROOT();?>classfiles/sample.php',
            success: function (data) {
                $('#questions').html(data);
            }
        });
    }
</script> 
```

我想要文件中的数组值`sample.php`，但我没有得到任何输出。

非常感谢任何有用的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T10:01:28.487

该行：

```
var dataToSend = {'name' : val, 'ans[]' : <?php echo $answers; ?> } ; 
```

将打印：

```
var dataToSend = {'name' : val, 'ans[]' : Array } ; 
```

这创建了一个~~javascript语法~~语义错误（ans = 将发布空字符串）。改成：

```
var dataToSend = {'name' : val, 'ans[]' : <?php echo json_encode($answers); ?> } ; 
```

打印：

```
var dataToSend = {'name' : val, 'ans[]' : [13,5,6,11] } ; 
```

# javascript - JavaScript 内存管理（信息）

> ID：14498444
> 
> 赞同：0
> 
> 时间：2013-01-24T09:58:25.527
> 
> 标签：javascript, memory-management, memory-leaks

我想要解决的是是否总是需要取消。因为我在使用 Chrome 时遇到了一些问题。说我有这个代码。

```
function MyClass() {}

MyClass.prototype.MyFunction = function() {
    this.data = "foo";
}
var c = new MyClass();
c.MyFunction(); 
```

现在，一旦调用该函数，它应该被允许是 GC，但函数的末尾应该有`this.data = null`. 这也应该是标准的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:01:27.757

您的代码将不起作用。您应该首先创建您的类的一个实例：

```
var c = new MyClass();
c.MyFunction(); 
```

因为`MyFunction`是实例函数。

否则还有`delete`运算符（[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)和[深入分析](http://perfectionkills.com/understanding-delete/)），用于删除对象成员（但不是对象本身）。因此，当无法再引用对象时，可以对对象进行垃圾收集，所以

```
c = undefined; 
```

应该说服 Javascript 垃圾收集这个对象实例并释放它占用的内存资源。

如果您的对象实例以这种方式实例化，情况会有所不同：

```
c = new MyClass();
c.MyFunction();
delete c; // success 
```

因为`c`这次是 global ( `window`) 的成员，因此可以从中删除。

# ftp - 通常的 ftp 服务器是否需要两个线程来进行数据连接和控制连接？

> ID：14498449
> 
> 赞同：0
> 
> 时间：2013-01-24T09:58:47.843
> 
> 标签：ftp

我正在尝试编写标准的 FTP 服务器。我想知道这种情况是否正确？

```
1\. On each request of clients, a thread manager makes thread for control connection.

2\. When control connection thread receives PORT command, it establishes data connection(active open) 
```

这是通常的解决方案吗？我想知道这一点，因为我必须创建标准的 FTP 服务器。

如果您回答“是”或“否”，我会很高兴。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:00:44.817

是的，FTP 使用两个连接，阅读 RFC [http://www.ietf.org/rfc/rfc959.txt](http://www.ietf.org/rfc/rfc959.txt)，维基百科的文章更友好一些[http://en.wikipedia.org/wiki/File_Transfer_Protocol](http://en.wikipedia.org/wiki/File_Transfer_Protocol)但 RFC 是圣经。

就线程而言，您将需要一个线程来监听传入连接、一个线程来处理控制连接和一个线程来处理数据连接。您可以通过使用 select 使用异步 i/o 来用一个线程完成所有操作。

# php - 使用ajax提交表单后获取表单值（mysql_insert_id）

> ID：14498453
> 
> 赞同：1
> 
> 时间：2013-01-24T09:59:00.773
> 
> 标签：php, jquery, mysql, ajax

在我的表单通过 ajax 和表单验证（jquery.validationEngine）提交但没有成功后，我试图获取一个值（mysql_insert_id）。

```
$(document).ready(function()
{
        $("#form1").validationEngine('attach',
        {
            autoHidePrompt:true,showOneMessage:true,
            onValidationComplete: function(form, status)
                {
                    if(status === true)
                        {

                           formget(document.getElementById('form1'),'page.php');

           TINY.box.show({html:'The entry (i want the id here..) has been updated successfully!',animate:false,close:false,mask:false,boxid:'success',autohide:2,top:5});
}
          else
{
          TINY.box.show({html:'Please check the form and try  again',animate:false,close:false,mask:false,boxid:'error',autohide:2,top:5});
}
}  
}); 
```

我的 page.php 文件

```
$query="INSERT INTO users (userid,title,)VALUES ('".$_SESSION['id']."', '".$_REQUEST['title']."')"; $result=mysql_query($query);
$id = mysql_insert_id(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:58:32.570

```
$query="INSERT INTO users (userid,title,)VALUES ('".$_SESSION['id']."', '".$_REQUEST['title']."')"; $result=mysql_query($query);
$id = mysql_insert_id();
echo mysql_error(); 
```

查看错误信息；

# java - 如何创建子 JInternalFrame 框架

> ID：14498456
> 
> 赞同：0
> 
> 时间：2013-01-24T09:59:13.530
> 
> 标签：java, swing, applet, jinternalframe

我正在尝试创建子 JInternalFrames，以便子框架不会遮挡父框架的标题栏。我什至不确定这是否可能，如果不是，请告诉我如果您有创意，我会非常感激听到它，TYIA -Roland

```
 **
     * @(#)rebuiltgui.java
     *
     * rebuiltgui Applet application
     *
     * @author 
     * @version 1.00 2013/1/21
     */

    //package components;
    import javax.swing.JInternalFrame;
    import javax.swing.JDesktopPane;
    //import javax.swing.JMenu;
    //import javax.swing.JMenuItem;
    //import javax.swing.JMenuBar;
    //import javax.swing.JFrame;
    //import javax.swing.KeyStroke;
    //import java.awt.event.*;

    import javax.swing.plaf.basic.BasicInternalFrameUI;

    import java.awt.event.*;

    import java.awt.Desktop;
    import javax.swing.*;

    import javax.swing.BoxLayout;

    import java.awt.*;
    import java.applet.*;

    public class rebuiltgui extends JApplet {

        public void init() {

            javax.swing.SwingUtilities.invokeLater(new Runnable() {

                public void run() {

                    createAndShowGUI();
                }
            });
        }

        private void createAndShowGUI() {

            JLayeredPane layerz = new JLayeredPane();
            JPanel loginpane = new JPanel();

    //      Dimension appletdim = Toolkit.getDefaultToolkit().getScreenSize();
            Dimension appletdim = this.getSize();

    //      this.setLayout( new BoxLayout( this, BoxLayout.X_AXIS ));

    //      content.add(desktop, BorderLayout.CENTER);

            appletdim.height += 15;

            JDesktopPane desktop = new JDesktopPane();
            desktop.setPreferredSize(new Dimension( appletdim.width, appletdim.height ));
            this.add( desktop );

            JInternalFrame mainframe = new JInternalFrame(("Mainframe"), false, false, false, false);

            mainframe.setBounds( 0, 0, appletdim.width, appletdim.height );

            BasicInternalFrameUI ui = (BasicInternalFrameUI) mainframe.getUI();
            Component north = ui.getNorthPane();
            MouseMotionListener[] actions = (MouseMotionListener[]) north.getListeners(MouseMotionListener.class);

            for (int i = 0; i < actions.length; i++) {

                north.removeMouseMotionListener(actions[i]);
            }

    //      loginframe.setSize(200, 150);
            mainframe.setBackground(Color.lightGray);
            desktop.add(mainframe);
    //      loginframe.moveToFront();

    //      desktop.add( loginframe );

            mainframe.setVisible(true);

            JInternalFrame loginframe;

            loginframe = new JInternalFrame( "Login Screen.", false, false, false, false );
            loginframe.setBounds( 0, 0, appletdim.width, appletdim.height );

            BasicInternalFrameUI uilogin = (BasicInternalFrameUI) loginframe.getUI();
            Component northli = uilogin.getNorthPane();
            MouseMotionListener[] actionsli = (MouseMotionListener[]) northli.getListeners(MouseMotionListener.class);

            for (int i = 0; i < actionsli.length; i++) {

                northli.removeMouseMotionListener(actions[i]);
            }

desktop.add( loginframe );

            loginframe.setVisible(true);
        }
    } 
```

# c# - 相对增加和减少 Grid 的行高

> ID：14498460
> 
> 赞同：0
> 
> 时间：2013-01-24T09:59:29.910
> 
> 标签：c#, wpf, height

我正在开发一个 WPF 应用程序。在那我有一个`Grid`有两行的。一行由 组成，`datagrid`另一行有一些显示in`TextBlock`的详细视图。`selected item``DataGrid`

```
<Grid>
 <Grid.RowDefinitions>
                        <RowDefinition Name="datagrid" Height="8*"></RowDefinition>
                        <RowDefinition Name="detailedview" Height="2*"></RowDefinition>
</Grid.RowDefinitions>

 <my:DataGrid 
                              Grid.Row="0"
                              x:Name="dataGrid1" 
                              Width="auto" 
                              HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                              AutoGenerateColumns="False" CanUserAddRows="True" Margin="0,0,0,0">

<Grid Grid.Row="2">
<!- Detailed View->
</Grid>
</Grid> 
```

问题是，我在后面的代码中将 Datagrid 的 ItemSource 分配给 IEnumerable 集合。

网格的行大小应该与数据网格中的行数完全相等。

剩余空间应由详细视图占用。

添加 2 行或更多行时。具有数据网格的行的高度应该扩展，因此它应该恰好容纳 2 行，并且详细视图的大小应该相对减小。

如何在不将其编码为 8* 和 2* 的情况下实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:30:56.013

对于 datagrid 行，将 Height 设置为 Auto，对于 deatiled 行，将 height 设置为 *，如下所示。

```
 <RowDefinition Name="datagrid" Height="Auto"></RowDefinition>
        <RowDefinition Name="detailedview" Height="*"></RowDefinition> 
```

由于 datagrid 的行高是 Auto，因此将 Datagrid 的 MinHeight 属性设置为某个值，这样即使没有要显示的记录，datagrid 也会占用更多的屏幕空间。下面我将 MinHeight 设置为 80。

```
<my:DataGrid 
MinHeight="80"
Grid.Row="0"
x:Name="dataGrid1" 
Width="auto" 
HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
AutoGenerateColumns="False" CanUserAddRows="True" Margin="0,0,0,0"> 
```

您可能还想为 TextBlock 设置一个最小高度，以便在数据网格中有更多行时它不会完全收缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:51:22.763

您可以将 DataGrid 放入 ScrollViewer。尝试下一个标记：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="40"/>
    </Grid.RowDefinitions>
        <ScrollViewer Grid.Row="0">
        <my:DataGrid ... />
    </ScrollViewer>

    <TextBlock   Height="40" Grid.Row="1" />

</Grid> 
```

# ruby - 我怎么知道我正在使用哪个端口？

> ID：14498463
> 
> 赞同：0
> 
> 时间：2013-01-24T09:59:46.583
> 
> 标签：ruby, port

我有一个代理，它阻止我使用 Nokogiri，有谁知道正在使用哪个端口？

我的脚本在家里运行良好，但在工作中却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:49:07.460

如果您知道您公司的代理设置（询问他们，或查看您的浏览器设置），那么`open-uri`您可以像这样通过防火墙：

```
Nokogiri::HTML(open(url, :proxy => 'http://[proxy_host]:[proxy_port]')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:52:41.833

您是否可以使用浏览器从工作中访问文档？如果不是，那就是代理问题。如果端口（并且工作）认为 URL 合法，则端口将在代理中重新映射。

# c# - 在不引用类的情况下访问接口方法

> ID：14498464
> 
> 赞同：2
> 
> 时间：2013-01-24T09:59:47.547
> 
> 标签：c#, class, interface

假设我在一个名为“接口”的项目中有一个这样的接口：

```
public interface TestInterface
{
    string Operation();
} 
```

和实现它的类。该类位于另一个项目“类”中：

```
public class TestClass : TestInterface
{
    public TestClass() { }

    public string Operation()
    {
        return "This is an Operation";
    }
} 
```

我的客户做了这样的事情（这又在另一个项目“客户”中）：

```
class Program
{
    static void Main(string[] args)
    {
        TestInterface i = new TestClass();
        i.Operation();
    }
} 
```

我的问题与这一行有关：

```
TestInterface i = new TestClass(); 
```

通过添加这一行，我实际上被迫从我的“客户端”项目中添加对“接口”和“类”项目的引用。那么为什么要大惊小怪呢？我不能直接引用“类”而不保留“接口”吗？有没有办法仅通过接口访问方法（不引用实现类）？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:03:55.223

> 有没有办法只通过接口访问方法

就在这里。`TestClass`您可以在不引用它的情况下动态加载程序集，通过创建其实例`Activator.CreateInstance`并将其转换为接口类型：

```
var assembly = Assembly.Load(...);
var typeFromAssembly = assembly.GetTypes()...;
var myInterfaceVar = (TestInterface)Activator.CreateInstance(typeFromAssembly); 
```

...或者...您可以使用现有的 DI 框架之一（例如 MEF）并以更正确的方式做同样的事情：

```
[Import]
private TestInterface myInterfaceField; 
```

或者：

```
var myInterfaceVar = compositionContainer.GetExportedValue<TestInterface>(); 
```

根据您喜欢的方式，您可以提出更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:05:21.993

在那个特定的样本中，没有优势。

但是想象一个方法：

```
public void Foo(ITestInterface handler)
{
    handler.Operation();
} 
```

现在，`Foo`只对接口进行操作，并不关心什么具体的类实现了这个接口。您现在可以使用或`Foo`的实例调用，它可以在不同的程序集中定义。`TestClass``TestClass2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:05:31.230

您可以通过使用 IOC 来实现您所描述的行为。 [Unity](http://msdn.microsoft.com/en-us/library/ff663144.aspx)是一个依赖注入容器，它允许在不手动创建实例的情况下创建实例。

例如，如果您要将类和接口注册到 unity，您将直接使用该接口；

```
TestInterface i = Container.Resolve<TestInterface>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:10:35.430

你有界面，所以你的应用程序可以有`plug in's`..

因此，基本上您**将**您的接口 dll 共享给任何想要为您的应用程序制作插件应用程序的人，然后您可以将该新插件类强制转换为接口并在其上调用方法..

如果您不将类转换为界面，那么您究竟要如何使插件类为您的应用程序工作..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:04:47.257

使您的代码完全独立于`TestInterface`使用[Dependency Inversion](http://www.oodesign.com/dependency-inversion-principle.html)的实现。这可以通过一些依赖注入框架来实现。

例如，使用[Unity](http://unity.codeplex.com/)，您可以通过 xml 配置实现

```
<register type="TestInterface" 
          mapTo="Foo.Bar.TestClass, Foo.Bar" /> 
```

而且您的代码将仅依赖于 Unity（不引用实现）：

```
TestInterface i = Container.Resolve<TestInterface>(); 
```

# mysql - 没有全文的MySql复数搜索

> ID：14498468
> 
> 赞同：0
> 
> 时间：2013-01-24T09:59:56.033
> 
> 标签：mysql, search, plural

我想在我的表上进行复数搜索，但我不想使用 FULLTEXT。我尝试了 FULLTEXT，但我的表不支持它。我的查询如下：

```
SELECT
     *
FROM
     items
WHERE
     LOWER(items.`name`) LIKE '%parameter%'
OR LOWER(items.brand) LIKE '%parameter%'
OR LOWER(items.sku) LIKE '%parameter%' 
```

当我搜索“衬衫”时，当我搜索我不搜索的衬衫时，它会返回良好的结果。有没有办法在没有全文的情况下进行复数搜索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:15:00.073

**我建议您使用MyIsam 引擎**为具有要执行搜索和主 ID 的字段的项目创建单独的表项目。

现在您可以对新表进行全文搜索并检索 ID，并且基于 ID 您可以从主项目表中检索字段的结果。

*“项目”*的附加表需要定期更新，可能是通过触发器或自动脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:09:55.133

它将匹配所有以传递参数开头的参数。

```
SELECT
     *
FROM
     items
WHERE
     LOWER(items.`name`) LIKE 'parameter%'
OR LOWER(items.brand) LIKE 'parameter%'
OR LOWER(items.sku) LIKE 'parameter%' 
```

# jquery - jQuery 自动滚动 - 轻松修复

> ID：14498472
> 
> 赞同：0
> 
> 时间：2013-01-24T10:00:13.440
> 
> 标签：jquery

我有一个 jquery 脚本，它向下滚动页面的正文直到它到达底部。

```
 var div = $('body');
        setInterval(function(){
            var pos = div.scrollTop();
            div.scrollTop(++pos);
            }, 100).scrollTop(0); 
```

该脚本工作正常，但是我需要在完成此过程后几乎立即跳回页面顶部，然后一遍又一遍地重复。我玩过它，但运气不佳。如果有人有一个简单的解决方案，那就太棒了。

开局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:31:39.833

看这里：

```
var div = $('div.autoscrolling');
setInterval(function(){
    var pos = div.scrollTop();
    div.scrollTop(++pos);
}, 100)​ 
```

[jQuery在div中自动垂直滚动](https://stackoverflow.com/questions/12164263/jquery-autoscroll)

# php - Codeigniter 表单通过文件上传提交

> ID：14498474
> 
> 赞同：11
> 
> 时间：2013-01-24T10:00:14.317
> 
> 标签：php, mysql, codeigniter

我正在尝试编写一个代码，我可以在其中提交表单在数据库中输入内容，同时执行文件上传并将其存储在我的服务器内的文件夹中

文件夹位置称为上传，位于我网站的根目录

这是我的代码

控制器（site.php）

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

 class Site extends CI_controller {

public function __construct()
{
    parent::__construct();
    // Your own constructor code
    $this->load->model("site_model");
    $this->load->helper(array('form', 'url'));
} 

public function cmain($type,$page)
{
    $data = $this->_initialize_data(); //this is just a bunch of variables that im calling in another function
    $data['type'] = $type;
    $data['page'] = $page;
    $this->load->vars($data);
    $this->load->view('site/cmain');
}

public function m1()
        {               

        $this->load->library('upload', $config);

            if(isset($_POST['m1']))
            {
                $suffix = $this->input->post("suffix");
                $fn = $this->input->post("fn");
                $mn = $this->input->post("mn");
                $ln = $this->input->post("ln");

                $newdata = array('suffix'=>$suffix,
                                'fn'=>$fn,
                                'mn'=>$mn,
                                'ln'=>$ln,

                                 );
                //this code is for the file upload
                           $config['upload_path'] = 'uploads';
                           $config['allowed_types'] = '*';

                           $this->load->library('upload', $config);

                           $data = array('upload_data' => $this->upload->data());
                 //end of file upload codes                 

                $this->db->insert('myself', $newdata); 

                redirect(base_url() . "site/complaint");    

            }

        } 
```

查看 (cmain.php)

```
<form action="<?php echo base_url();?>site/m1" name="details" id="details" method="post" enctype="multipart/form-data">
        <table class='table' width="100%">
            <tr>
            <td colspan='2'>
                <b><font color="#3B608C">Personal Information</font></b>
            </td>
        </tr>
        <tr>
            <td>
                Suffix  (e.g. Jr., III)
            </td>
            <td>
                <input type="text" name="suffix" id="suffix" value="">
            </td>
        </tr>
        <tr>
            <td>
                First Name*
            </td>
            <td>
                <input type="text" name="fn" id="fn" value="">
            </td>
        </tr>
        <tr>
            <td>
                Middle Name*
            </td>
            <td>
                <input type="text" name="mn" id="mn" value="">
            </td>
        </tr>
        <tr>
            <td>
                Last Name*
            </td>
            <td>
                <input type="text" name="ln" id="ln" value="">
            </td>
        </tr>
</table>

            <table>
        <tr>
        <td width="50%">
        Please attach documents pertinent to these complaints. <br>
        (Attach a zip file if more than one document)<br>
        </td>
        <td align="center">
        <input name = "userfile" type="file" class="input-xlarge" id = "userfile" />
        </td></tr>
        </table>
        <input type="submit" value="Submit Form" class="pull-right" id="submit" name="m1"/>
</form> 
```

表单在数据库中正确发布，如后缀、fn、ln 和 mn 但是文件上传不起作用

我尽力遵循 codeigniter 文档的示例，只得到了我认为我需要的行

难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:16:25.397

终于让它工作了

我将它用于文件上传部分

```
 //start of file upload code
                $config['upload_path'] = './uploads/';
                $config['allowed_types'] = '*';
                $this->load->library('upload', $config);
                $this->upload->do_upload();
                $data = $this->upload->data();
                //end of file upload code 
```

并改变了

```
<form action="<?php echo base_url();?>site/m1" name="details" id="details" method="post" enctype="multipart/form-data"> 
```

进入

```
<?php echo form_open_multipart('site/c_upload');?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T12:48:34.877

我认为您必须设置文件上传首选项

```
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '100';
$config['max_width'] = '1024';
$config['max_height'] = '768'; 
```

表单助手

```
$this->load->helper(array('form', 'url')); 
```

[更多细节请看我的博文](https://www.cloudways.com/blog/codeigniter-upload-file-image/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:19:19.670

*   您是否为“上传”文件夹设置了写入权限？（例如：php.net/manual/en/function.chmod.php）

*   始终进行测试驱动开发。我从[这个网址得到了下面的代码块](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

    ```
    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_form', $error);
    } 
    ```

# android - SherlockFragmentActivity 使用列表视图处理性能问题

> ID：14498475
> 
> 赞同：0
> 
> 时间：2013-01-24T10:00:20.807
> 
> 标签：android, android-listview, android-listfragment, android-loadermanager, performance

嗨，从 SherlockFragmentActivity 扩展后，列表变慢了。所以我使用的架构如下：我有：

1.SherlocFragment 活动，我在其中显示列表

2.Adapter显示列表

3.AsyncTask从服务器获取json

所以我没有使用加载器或片段或 ListActivity。

我一直在看这个答案[https://stackoverflow.com/a/11779941/1796624](https://stackoverflow.com/a/11779941/1796624)建议在后台线程中扩充列表，但我不太明白该怎么做。您的建议是什么，我是否需要使用加载器来提高性能？如果需要，请建议一个不错的教程，或者我应该将列表放在一个片段中，或者您可以建议一种新的设计模式来加快速度。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:07:08.197

`Loaders`是一个高级 api，可以让您更轻松地处理数据库游标、列表视图和适配器。例如，如果您将新项目添加到数据库表中，加载程序会自动刷新显示该数据库表中内容的列表。

最好学习高级api。您可以从 android 文档中了解 Loaders。但我发现[这些教程系列](http://www.androiddesignpatterns.com/2012/07/loaders-and-loadermanager-background.html)很有帮助。他们以令人信服的方式描述了使用 Loaders 的动机。

但是，这里有一个问题。您必须编写一个内容提供程序才能使用 Loaders。为了避免创建内容提供者，您可以使用[commonsware](https://github.com/commonsguy/cwac-loaderex)发布的 loaderEx。

# filter - 数字滤波器是动态规划的例子吗？

> ID：14498478
> 
> 赞同：0
> 
> 时间：2013-01-24T10:00:41.070
> 
> 标签：filter, filtering, dynamic-programming

数字滤波器可以使用离散差分方程来表示，例如：

```
Y[n]= k1* Y[n-1]+k2*X[n] 
```

其中 Y[n] 是滤波器的输出，X[n] 是滤波器的输入，k1 和 k2 是某个常数。这是一个简单的一阶滤波器。当我读到动态编程时，它被描述为一种强大的技术。我想知道上述过滤器是否是动态程序的示例。使用递归表示问题，这是动态编程的关键吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:37:56.907

严格来说，这不是动态规划的例子

对于DP，你应该在每一点做出一些决定，例如。最大值或最小值。

在您的问题中，没有决策。所以这是复发，但不是DP

# iphone - object c（iphone开发）/sqlLite和文件系统的区别

> ID：14498486
> 
> 赞同：0
> 
> 时间：2013-01-24T10:00:49.480
> 
> 标签：iphone, objective-c, sqlite, storage

我想做一些将数据存储在设备中的应用程序。

所以我想使用一些存储空间。但有两种方法可以存储我的数据。

第一个是通过 XML 结构将它们保存到文件系统，另一个是使用 sqlLite 库。但我不知道。因为我不知道他们每个人的强项和弱点。例如存储数据的位置，以及哪个可以更快地获取我想要的数据。我只存储文本数据。所以请推荐哪个更好。

对不起我的英语技能。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:05:28.200

**SQLite** !!! 毫无疑问。

便于维护、查询能力等等。

`SQLite`具有数据库引擎的基本功能，它是轻量级的。专为移动平台设计。因此，不包括数据库中的正则表达式等一些功能。

**文件和数据库。总是偏好去数据库。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:09:06.880

**数据库总是...**

正如您所说，SQLite 是一种选择，您可以直接在 iOS 中使用 SQLite。但我希望你听说过[Core data](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)，它是一个更高级别的包装器，可以让数据库变得更简单。

但是数据库和文件之间没有比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:09:09.237

这将是您问题的[完美](https://stackoverflow.com/questions/77726/xml-or-sqlite-when-to-drop-xml-for-a-database)答案，对于 iOS，我建议 SQLite 将是最好的，因为它在一个文件中包含所有内容，随着缓存变大，性能损失低于 XML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:31:57.150

这取决于您要存储的数据量（及其结构和复杂性）。对于相当少量的记录，不超过一两条记录，我会使用 NSDictionary 以及它附带的加载和保存方法。顺便说一句，那些持久存储将采用 XML 格式。

对于更多数据或更复杂的数据，尤其是当您不需要同时加载所有数据时，您应该选择数据库解决方案。那应该是sqlite。或者您可以选择（默认）基于 sqlite 的核心数据。

我会建议核心数据（除非您的目标是可移植性，例如 android）。您将不得不投资学习核心数据。这可能从一开始就令人困惑。但是一旦您开始使用它，您肯定会发现核心数据非常方便。在使用原生 sqlite 时，您需要手动处理大量工作。

# php - PHP将字符添加到jQuery.AJAX发布的字符串

> ID：14498487
> 
> 赞同：2
> 
> 时间：2013-01-24T10:00:49.663
> 
> 标签：php, jquery, ajax, forms, codeigniter

在网上或通过搜索功能找不到任何答案，所以我决定发布它：

我有一个表单，就像其他表单一样，被发布到 CodeIgniter 中的 AJAX 控制器。以下代码是正在发布的较大表单的一部分。

```
<tr>
    <td><label class="checkbox"><input type="checkbox" name="ef1_active" value="1"></label></td>
    <td><input type="text" name="ef1_label" value=""></td>
    <td><select name="ef1_clang" class="input-small">'.$optionlist.'</select></td>
    <td><label class="checkbox"><input type="checkbox" name="ef1_required" value="1"></label></td>
</tr>
<tr>
    <td><label class="checkbox"><input type="checkbox" name="ef2_active" value="1"></label></td>
    <td><input type="text" name="ef2_label" value=""></td>
    <td><select name="ef2_clang" class="input-small">'.$optionlist.'</select></td>
    <td><label class="checkbox"><input type="checkbox" name="ef2_required" value="1"></label></td>
</tr>
<tr>
    <td><label class="checkbox"><input type="checkbox" name="ef3_active" value="1"></label></td>
    <td><input type="text" name="ef3_label" value=""></td>
    <td><select name="ef3_clang" class="input-small">'.$optionlist.'</select></td>
    <td><label class="checkbox"><input type="checkbox" name="ef3_required" value="1"></label></td>
</tr>
<tr>
    <td><label class="checkbox"><input type="checkbox" name="ef4_active" value="1"></label></td>
    <td><input type="text" name="ef4_label" value=""></td>
    <td><select name="ef4_clang" class="input-small">'.$optionlist.'</select></td>
    <td><label class="checkbox"><input type="checkbox" name="ef4_required" value="1"></label></td>
</tr> 
```

表单正在被序列化，并被推送到 ajax 以使用以下代码保存：

```
var data = {
    content : content,
    property : property,
    data_type : dataType,
    form_id : $('#form_id').val()
};

 $.ajax({
    type: 'POST',
    url: url,
    data: data,
    dataType: 'json',
    success: function (result)
    {

        if(result.html == 'deleted')
        {
           window.location.reload(); 
        }
        else
        {
            $('#newForm').html('');
        }

    }
}); 
```

console.logged 时 'content' 变量的序列化结果：

```
firstname=1&firstname_required=1&prefix=1&lastname=1&lastname_required=1&homePhone=1&homePhone_required=1&emailAddress=1&emailAddress_required=1&ef1_label=&ef1_clang=Code&ef2_label=&ef2_clang=Code&ef3_label=&ef3_clang=Code&ef4_label=&ef4_clang=Code 
```

但是当我在 PHP 中回显它时，它看起来像这样：

```
firstname=1&firstname_required=1&prefix=1&lastname=1&lastname_required=1&homePhone=1&homePhone_required=1&emailAddress=1&emailAddress_required=1&ef1;_label=&ef1_clang=Code&ef2;_label=&ef2_clang=Code&ef3;_label=&ef3_clang=Code&ef4;_label=&ef4_clang=Code 
```

注意`;`所有`_label`变量上的添加...尝试重命名变量，将其放在表单顶部等...没有任何效果；PHP 不断`;`在这些文本字段上添加。

甚至将控制器简化为：

```
public function save_form_content()
{       
    print_r($_POST['content']); exit;
} 
```

有人知道吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:23:25.470

这是 CodeIgniter 中的一个已知错误，这是因为您正在使用`xss_clean()`或`$config['global_xss_filtering'] = TRUE;`，请参阅[错误报告](https://github.com/EllisLab/CodeIgniter/issues/1674)。更新 CodeIgniter 以修复问题，或者如果无法更新整个 CI，请查看 Git 提交以应用提交中的补丁。

根据其中一位开发人员的说法：

> 应该修复替换 system/core/Security.php 中第 797 行的 regexp 的问题：

```
$str = preg_replace('#(^&\#?[0-9a-z]{2,})([\x00-\x20])*;?#i', '\\1;\\2', $str); 
```

# ios - NSFetchRequest：FetchBatchSize 和错误行为

> ID：14498492
> 
> 赞同：2
> 
> 时间：2013-01-24T10:01:01.643
> 
> 标签：ios, objective-c, xcode, core-data

我是 Core Data 的新手，如果这是一个愚蠢的问题，我很抱歉。

有没有办法在通过访问 NSManagedObject 关系触发故障而生成的自动获取请求上设置 fetchBatchSize 属性？

例如，假设我有一个“Companies”实体和一个“Employees”实体，它们之间存在从“Companies”到“Employees”的一对多关系。我发出一个获取请求以检索所有公司，然后对于一家公司，我想加载其员工。

显而易见的方法是做这样的事情：

```
NSSet *employees = [anyCompany employees]; 
```

但是，如何设置 fetchBatchSize 属性以确保不会同时加载太多数据？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:19:58.230

只是定义了在`fetchBatchSize`到持久存储的一次往返中将检索多少条记录。例如，如果一个实体有 1000 个条目并且批量大小为 20，则获取所有条目的 fetch 请求实际上将执行 50 个 SQL 语句。

很明显，这不是很有效，具体取决于您获取的上下文。如果内存成为问题，您可以使用批量大小校准获取请求，但在大多数情况下，您真的不必太在意它。然而，不必要的多次往返商店很可能会影响性能。

所以只需使用类似的表达式

```
aCompany.employees 
```

自由地让 Core Data 处理内存管理。它通常只会检索它实际需要用于显示或计算的实体和属性。

# java - 如何在 XSLT 中访问 hashmap

> ID：14498496
> 
> 赞同：0
> 
> 时间：2013-01-24T10:01:09.320
> 
> 标签：java, xslt, xslt-1.0

我有一些 java 代码返回给我一个地图，我想在 XSLT 中访问它。我只是将结果保存在一个名为 $map 的变量中。

尝试以 key($map,'key1') 的形式访问该值，但没有成功。其中 $map 是某个 java 方法返回的内容，而 key1 是一个映射条目的键。我想获取它的价值。

有什么建议么 ？

# java - 为什么要避免在 servlet 中使用 InheritableThreadLocal？

> ID：14498503
> 
> 赞同：6
> 
> 时间：2013-01-24T10:01:26.183
> 
> 标签：java, tomcat, servlets, thread-safety

我`InheritableThreadLocal`在我的`Servlet`课堂上使用。这样它就可以从它的子线程中获得。`InheritableThreadLocal`在线程池执行程序中使用是邪恶的吗？. 比如servlet线程池。

我的问题。

1) 为什么我们要避免`InheritableThreadLocals`在 servlet 中使用？

2）这种内存泄漏是否可能发生在`InheritableThreadLocal`？

3) 有什么替代方法`InheritableThreadLocal`吗？

4）如果线程被重用，存储的值`threadlocal`不会被清除会怎样？

**我的实时场景**

```
public class UserAccessFilter implements javax.servlet.Filter {

      static final InheritableThreadLocal<String> currentRequestURI = new InheritableThreadLocal<String>();

      public void  doFilter(ServletRequest req, ServletResponse resp , FilterChain fc) throws IOException, ServletException{
              String uri = request.getRequestURI();
              fc.doFilter(request, response);         
      }
}

public class MailServlet extends HttpServlet{

      @Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    String mailCount = req.getParameter("mailCount");

    if(mailCount != null && !"".equals(mailCount) && mailCount.matches("[0-9]+")){
        MailThread mailThread = new MailThread("xxx@gmail.com", generateToAddress(Integer.parseInt(mailCount))); //NO I18N
        Thread t = new Thread(mailThread);
        t.start();
    }

    resp.getWriter().println("Mail Servlet.............."); //NO I18N

}              

}

class MailThread implements Runnable{

private String from;
private String to;

public MailThread(String from , String to){
    this.from = from;
    this.to = to;
}

@Override
public void run() {
    sendMail();
}

    public void sendMail(){
        //I want this uri from child threads. I can't pass this value to this constructor.
        String uri = currentRequestURI.get();
        //Do Mail Operations
    }

} 
```

过滤器 --> Servlet A --> 子线程 ---> 邮件线程（这里我得到了过滤器中设置的值）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T10:20:10.357

> 为什么我们应该避免在 servlet 中使用 InheritableThreadLocals？

*它们代表了将信息*从一个请求泄漏到另一个请求的潜在路径。“问题”是请求由线程池处理。当请求完成时，线程处理的下一个请求很可能是针对不同用户的。但是，如果您忘记在完成第一个请求时清除线程本地状态，则它可能会被第二个请求使用。

> InheritableThreadLocal 中是否可能存在内存泄漏？

是的……有点。如果我们假设工作池是有界的，那么任何线程的线程本地状态都有可能被覆盖，从而清除内存泄漏。在最坏的情况下，问题是有限的内存泄漏......受池中线程数的限制。

信息泄露问题更令人担忧。

> InheritableThreadLocal 有什么替代方案吗？

在请求或响应对象中设置属性会更好。

> 如果线程被重用会发生什么，threadlocal中存储的值不会被清除。

它不会被清除。那就是问题所在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:19:14.850

您的示例有效，`MailThread` *继承*`currentRequestURI`了创建时的值。

但是`UserAccessFilter`和`java.lang.InheritableThreadLocal`只是用来混淆代码试图做什么，这是邪恶的部分。

更改构造函数有什么问题，`MailThread`以便您可以`MailServlet`像这样传递请求 URI：

```
MailThread mailThread = new MailThread("xxx@gmail.com", generateToAddress(Integer.parseInt(mailCount)), req.getRequestURI()); 
```

那么就不需要本地线程，不需要过滤器，代码更清晰。

# objective-c - 为什么 UIRoundedRectButton 不响应 isKindOfClass:[UIButton class]？

> ID：14498506
> 
> 赞同：1
> 
> 时间：2013-01-24T10:01:31.080
> 
> 标签：objective-c, cocoa-touch, uibutton

我有一个`UIButton`使用创建的视图

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
btn.frame = CGRectMake(500, 100, 100, 44);
[self.view addsubview:btn]; 
```

当我像这样遍历视图层次结构时：

```
for (id view in self.view.subviews) 
{        
    NSLog(@"%@",NSStringFromClass([view class]));
    if ([view isKindOfClass:[UIButton class]]) 
    {
        //dsnt get here
        UIButton *btn = view;
    }
} 
```

控制永远不会进入 if 块。

`NSLog(@"%@", NSStringFromClass([view class]));`打印“UIRoundedRectButton”。我如何检查课程是否是`UIButton`？

`UIButton *btn = [[UIButton alloc] init];`给出了预期的结果，但我以后无法设置按钮类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:10:40.860

我最终为你写了这个示例......它完美地工作......

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame = CGRectMake(100, 100, 160, 50);
[myButton setTitle:@"click me" forState:UIControlStateNormal];
[self.view addSubview:myButton];

for (id view in self.view.subviews)
{

    NSLog(@"%@",NSStringFromClass([view class]));

    if ([view isKindOfClass:[UIButton class]])

    {
        //dsnt get here
        UIButton *btn = view;
    }
} 
```

![在此处输入图像描述](../Images/d4a0f2e809d8c7c5e1868a6e1978fc4c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:09:17.143

```
for (UIButton *btnNew in self.view.subviews) 
{        
    NSLog(@"%@",NSStringFromClass([btnNew class]));
    if ([btnNew isKindOfClass:[UIButton class]]) 
    {
     //dsnt get here
     UIButton *btn = btnNew;
     }
} 
```

# facebook - Facebook 图表搜索如何工作？

> ID：14498507
> 
> 赞同：4
> 
> 时间：2013-01-24T10:01:33.463
> 
> 标签：facebook, search, nlp, information-retrieval

我猜我对一个可以回答而不是仅仅讨论的问题如履薄冰，因为从我的研究来看，[Facebook 的 Graph Search](https://www.facebook.com/about/graphsearch)似乎处于隐身模式，除了[这个之外，Facebook 没有什么正式共享的。](http://www.facebook.com/notes/facebook-engineering/under-the-hood-building-graph-search-beta/10151240856103920)

我对 facebook 如何让它发挥作用很感兴趣。所以我一直在玩 OpenNLP 和 POS Tagger（词性）。我已经做到了这一点，但后来很明显自然语言存在多少细微差别，有点知道但不尊重它，直到我一起破解了一些东西。

所以我走到这一步 -

```
[Debug] Question :: Friends from France who like England
[Debug] Token =  Friends :: POS = NNS
[Debug] Token =  from :: POS = IN
[Debug] Token =  France :: POS = NNP
[Debug] Token =  who :: POS = WP
[Debug] Token =  like :: POS = VBP
[Debug] Token =  England :: POS = NNP 
```

[其中 POS 是此处](http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)所述的词性

我想我可以从那里获取 POS 标签，并且我有一个规则集在我的架构中查找类似的术语？规则似乎是一种脆弱的方法。也许我应该有一个本体，以便在那里有一些与朋友有关的东西？对于三重商店来说，这个问题似乎“更容易”，其中语义已经被标记，例如“詹姆斯”、“喜欢”、“英格兰”，而我还有另一个三重商店，其中“詹姆斯”、“来自”、“法国”基本上只是只是 SQL 中的一个联接。

这纯粹是学术性的，晚上有点小技巧。我只是对这对他们有用。这个谷歌[搜索](https://www.google.co.uk/search?client=ubuntu&channel=fs&q=Penn+English+Treebank+POS+tags&ie=utf-8&oe=utf-8&gl=uk&redir_esc=&ei=fQMBUZ_UDqiQ0QWP_ID4DA#hl=en&safe=off&client=ubuntu&hs=a7z&tbo=d&channel=fs&gl=uk&sclient=psy-ab&q=natural+language+to+sql&oq=natural+language+to+&gs_l=serp.3.1.0l4j0i30l2j0i8i30l2j0i22l2.304621.308285.1.310750.20.14.0.0.0.0.1020.3678.1j9j1j0j1j1j0j1.14.0.les%3B..0.0...1c.1.mqFfKFhPqOY&psj=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.41248874,d.d2k&fp=399618ef21ce39da&biw=1024&bih=656)引发了一些有趣的事情。

所以具体的问题是，图搜索是如何工作的？自然语言如何映射到他们使用的查询/数据存储？除了 Wolfram Alpha，还有其他这类事情的好例子吗？有什么开源的吗？我应该去阅读这里使用了哪些计算机科学概念？

干杯

大卫

# c++ - 如何调整嵌入在复合控件中的窗口的大小

> ID：14498511
> 
> 赞同：1
> 
> 时间：2013-01-24T10:01:42.003
> 
> 标签：c++, window, activex

## 背景

我创建了一个复合控件，用于以编程方式插入其他 ActiveX 控件。（它是其他 ActiveX 控件的“包装器”）

我按照本指南中的步骤操作：http: [//support.microsoft.com/kb/218442](http://support.microsoft.com/kb/218442)。

复合控件将包含一个包含 ActiveX 控件的“窗口”。

## 任务

我需要以编程方式管理包装器中的窗口大小。这个想法是，如果我知道包装器的大小，我也可以管理窗口的大小。（例如，包装器的高度 - 10）据我所知，到目前为止是：

1.  使用此函数：IOleObject::GetExtent() 获取包装器大小
2.  计算窗口的大小（使用步骤 1 中的值）并传递给 Create() 函数。

问题是要创建窗口，我必须“在客户端坐标中”指定控件的大小。但似乎第 1 步的输出不适合第 2 步。

## 问题

如何将步骤 1 的输出转换为步骤 2 的适当输入？或者有没有其他方法可以在复合控件中以编程方式指定窗口的大小？

这是我的简单代码：

```
// Register the AtlAxWin class which implements ATL containment
// This is not needed for an ATL composite control
AtlAxWinInit();

// m_sizeExtent.cx and m_sizeExtent.cy is an output from step 1
RECT l_rect = {0, 0, m_sizeExtent.cx, m_sizeExtent.cy};

// m_hWnd is the composite control handle
// l_rect is the size of ActiveX control in client coordinates
CAxWindow l_hostedWnd;
l_hostedWnd.Create(m_hWnd,
                   l_rect,
                   _T("MetaStock.Chart.2"),
                   WS_CHILD | WS_VISIBLE,
                   0,
                   0U); 
```

# ruby-on-rails - jruby-openssl 中已经初始化的常量

> ID：14498513
> 
> 赞同：13
> 
> 时间：2013-01-24T10:01:47.197
> 
> 标签：ruby-on-rails, openssl, jruby, torquebox

在扭矩箱上运行我的 rails 应用程序时，我得到了很多

```
already initialized constant: ... 
```

来自 的警告`gems/jruby-openssl-0.8.2/lib/shared/jruby-openssl.rb:16`。这是一个安全问题吗？有没有办法摆脱这些警告？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T13:50:06.763

我终于可以通过完全移除宝石来摆脱它。根据这个[来源](https://jira.codehaus.org/browse/JRUBY-6973)，jruby-openssl 现在被直接拉入 jruby 项目，不再需要作为 gem。

感谢大家和我一起研究这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T17:06:22.060

将以下内容添加到 Gemfile 中的行后，我不再收到这些错误。

```
gem 'jruby-openssl', :require => false 
```

我希望这会有所帮助。

# css - CSS：绝对定位的对话框和 100% 高度的 div

> ID：14498518
> 
> 赞同：0
> 
> 时间：2013-01-24T10:01:56.740
> 
> 标签：css, css-position

我的页面中有一个 div 样式：

```
top: 0;
bottom: 0;
left: 0;
right: 0;
position: absolute; 
```

div 在页面上延伸并完全覆盖它。

当我在我的页面上打开一些对话框时，情况发生了变化。对话框也是绝对定位的，但它的高度可以大于页面的初始高度。这会导致出现滚动条。但是拉伸的 div 不再拉伸了！它的高度保持不变。

换句话说，由于出现新的大块而增加了javascript页面的可滚动区域并不会导致top:0和bottom:0元素的高度增加。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:08:39.607

div 总是使用最近的祖先的高度与`position:relative`or `position:absolute`。如果您没有设置任何其他内容，这很可能是 html-Element。而这个通常不会仅仅因为它的内容调整大小而调整大小（如果你向下滚动并用萤火虫突出显示 html 元素，你可以看到这一点）。您可以尝试将 body 设置为`position:relative`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:27:56.580

```
<body style=" background-color:red; opacity:0.7;">
<div id="new" style="background-color:yellow; z-index:100; width:200px; height:100px;">
</div>
</body> 
```

这里的主体将充当您的绝对 div，您可以使用以下 javascript 代码对其进行测试：

```
<script type="text/javascript">
var num=100;
setInterval(function(){

document.getElementById("new").style.height= num+"px";
num=num+500;
},500);
</script> 
```

请注意，当 div 的高度增加时，body 也会继续扩展。

# iphone - IOS如何让iCarousel像UIScrollView页面一样滚动

> ID：14498519
> 
> 赞同：1
> 
> 时间：2013-01-24T10:01:57.100
> 
> 标签：iphone, ios, uiscrollview, icarousel

我想使用 iCarouse 实现页面滚动，就像 UIScrollView 分页

iCarouse 代码：//它不起作用

```
carousel.delegate = self;
carousel.dataSource = self;
carousel.scrollSpeed = 0.8f;
//carousel.wrapEnabled = YES;
carousel.stopAtItemBoundary = YES;
carousel.scrollToItemBoundary = YES;
carousel.type = iCarouselTypeCoverFlow; 
```

滚动代码：

```
[scrollView setPagingEnable:YES];//I want to achieve this 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T12:48:00.957

用这个：

```
carousel.decelerationRate = 0.0f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T13:52:49.090

利用`carousel.pagingEnabled = YES;`

# html - 如何在 html5 画布上绘制圆柱体

> ID：14498521
> 
> 赞同：2
> 
> 时间：2013-01-24T10:02:02.893
> 
> 标签：html, html5-canvas

我想用控制框在画布上绘制一个圆柱体来调整圆柱体的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:58:02.887

这是我为回答我自己的问题而创建的一些 javascript 代码：

```
function drawCylinder ( x, y, w, h ) {
  context.beginPath(); //to draw the top circle
  for (var i = 0 * Math.PI; i < 2 * Math.PI; i += 0.001) {

    xPos = (this.x + this.w / 2) - (this.w / 2 * Math.sin(i)) * 
      Math.sin(0 * Math.PI) + (this.w / 2 * Math.cos(i)) * 
      Math.cos(0 * Math.PI);

    yPos = (this.y + this.h / 8) + (this.h / 8 * Math.cos(i)) * 
      Math.sin(0 * Math.PI) + (this.h / 8 * 
      Math.sin(i)) * Math.cos(0 * Math.PI);

    if (i == 0) {
      context.moveTo(xPos, yPos);

    } 
    else
    {
      context.lineTo(xPos, yPos);
    }
  }
  context.moveTo(this.x, this.y + this.h / 8);
  context.lineTo(this.x, this.y + this.h - this.h / 8);

  for (var i = 0 * Math.PI; i < Math.PI; i += 0.001) {
    xPos = (this.x + this.w / 2) - (this.w / 2 * Math.sin(i)) * Math.sin(0 * Math.PI) + (this.w / 2 * Math.cos(i)) * Math.cos(0 * Math.PI);
    yPos = (this.y + this.h - this.h / 8) + (this.h / 8 * Math.cos(i)) * Math.sin(0 * Math.PI) + (this.h / 8 * Math.sin(i)) * Math.cos(0 * Math.PI);

    if (i == 0) {
      context.moveTo(xPos, yPos);

    } 
    else 
    {
      context.lineTo(xPos, yPos);
    }
  }
  context.moveTo(this.x + this.w, this.y + this.h / 8);
  context.lineTo(this.x + this.w, this.y + this.h - this.h / 8);            
  context.stroke();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T18:10:05.790

谢谢！这正是我一直在寻找的。在我自己的代码中实现您的函数时，我进行了一些更改，例如将画布上下文作为参数传递，简化数学并让代码传递 JSLint。

```
function drawCylinder(ctx, x, y, w, h) {
    'use strict';
    var i, xPos, yPos, pi = Math.PI, twoPi = 2 * pi;

    ctx.beginPath();

    for (i = 0; i < twoPi; i += 0.001) {
        xPos = (x + w / 2) - (w / 2 * Math.cos(i));
        yPos = (y + h / 8) + (h / 8 * Math.sin(i));

        if (i === 0) {
            ctx.moveTo(xPos, yPos);
        } else {
            ctx.lineTo(xPos, yPos);
        }
    }
    ctx.moveTo(x, y + h / 8);
    ctx.lineTo(x, y + h - h / 8);

    for (i = 0; i < pi; i += 0.001) {
        xPos = (x + w / 2) - (w / 2 * Math.cos(i));
        yPos = (y + h - h / 8) + (h / 8 * Math.sin(i));

        if (i === 0) {
            ctx.moveTo(xPos, yPos);
        } else {
            ctx.lineTo(xPos, yPos);
        }
    }
    ctx.moveTo(x + w, y + h / 8);
    ctx.lineTo(x + w, y + h - h / 8);

    ctx.stroke();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:08:31.340

如果要绘制 3D 圆柱体，最简单的方法是使用 tQuery（[http://jeromeetienne.github.com/tquery/](http://jeromeetienne.github.com/tquery/)）之类的库：

```
var world = tQuery.createWorld().boilerplate().start();
var object = tQuery. createCylinder().addTo(world); 
```

如果要绘制“2d”圆柱体，可以使用 canvas 2d API 绘制一个矩形，然后在其顶部绘制一个椭圆。它将显示为圆柱体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-22T22:06:41.480

```
 var canvas = document.getElementById('canvas')
    var ctx = canvas.getContext('2d');
    var pos={};
    const angleToRadian = function (angle) {
        return Math.PI / 180 * angle;
    }

    var Arc = function (x, y, r, d,s) {
        this.r = r;
        this.x = x;
        this.y = y;
        // this.d=d;

        ctx.beginPath();

        ctx.arc(x, y, r, angleToRadian(0), angleToRadian(180));
        ctx.moveTo((Number(x) + Number(r)), y);
        // ctx.lineTo((Number(x) + Number(r)), d);
        ctx.arc(x, y - d, r, angleToRadian(0), angleToRadian(360));
        ctx.moveTo((Number(x)+Number(r)),y);
        ctx.lineTo((Number(x)+Number(lX())), ((Number(y)-Number(d))+Number(r)-Number(lY())));
        // ctx.moveTo((Number(x)+Number(lX())), ((Number(y)-Number(d))-Number(lY())+Number(r)));
        ctx.lineTo((Number(x)+Number(lX())),(Number(y)+Number(r)-Number(lY())));
        // ctx.moveTo((Number(x)+Number(lX())),(Number(y)+Number(r)-Number(lY())));
        ctx.lineTo(Number(x), ((Number(y)+Number(r))-Number(d)));
        // ctx.moveTo(Number(x), ((Number(y)+Number(r))-Number(d)));
        ctx.lineTo(Number(x),(Number(y)+Number(r)));
        // ctx.moveTo(Number(x),(Number(y)+Number(r)));
        ctx.lineTo((Number(x)-Number(lX())), (Number(y)-Number(d)+Number(r)-Number(lY())));
        // ctx.moveTo((Number(x)-Number(lX())), (Number(y)-Number(d)+Number(r)-Number(lY())));
        ctx.lineTo((Number(x)-Number(lX())), (Number(y)+Number(r)-Number(lY())));
        // ctx.moveTo((Number(x)-Number(lX())), (Number(y)+Number(r)-Number(lY())));
        ctx.lineTo((Number(x)-Number(r)), (Number(y)-Number(d)));
        // ctx.moveTo((Number(x)-Number(r)), (Number(y)-Number(d)));
        ctx.lineTo((Number(x)-Number(r)), y);

        ctx.strokeStyle = "#9c3028";
        ctx.closePath();
        // ctx.stroke();
        ctx.fillStyle="#9b3028"
        ctx.fill();

    }

    var lY = function () {

        return Math.sqrt((Math.pow(((Math.cos(67.5 * Math.PI / 180) * this.r) * 2), 2) -
            Math.pow((Math.cos(22.5 * Math.PI / 180) * (Math.cos(67.5 * Math.PI / 180) * this.r) * 2), 2)));

    }
    var lX = function () {
        return Math.sqrt((Math.pow(((Math.cos(67.5 * Math.PI / 180) * this.r) * 2), 2) - (Math.pow(((Math.cos(67.5 * Math.PI / 180) * this.r) * 2), 2) -
            Math.pow((Math.cos(22.5 * Math.PI / 180) * (Math.cos(67.5 * Math.PI / 180) * this.r) * 2), 2))));
    }

    document.addEventListener('mouseup',mouseUp);
    document.addEventListener('mousedown',mouseDown);
    document.addEventListener('mousemove',draw);

    function mouseDown(e){
        pos.x=e.clientX;
        pos.y=e.clientY;

    }
    function mouseUp(e){
        pos.pozX=e.clientX;
        pos.pozY=e.clientY;

    }
    function draw(e){
        if(e.buttons!==1) return;
        ctx.clearRect(0,0,500,500);
       Arc(pos.x, pos.y, e.clientY, e.clientX);
    } 
```

# bash - 如何编写输出（文件）名称和空格的命令以使它们在反引号内工作？

> ID：14498524
> 
> 赞同：2
> 
> 时间：2013-01-24T10:02:07.157
> 
> 标签：bash, shell, zsh

作为一个懒惰的 unix/linux 命令行用户，我使用了很多小的 shell 脚本来帮助我避免打字。

例如，我有一个脚本`lst`可以打印当前目录中最新文件的名称。如果这被调用`mytext`并且我输入`emacs `lst``然后`mytext`将在 emacs 中打开

但是，如果调用了最近的文件，`my text`那么`emacs `lst``将失败，因为 shell 将此命令解释为`emacs my text`而不是`emacs my\ text`

使用 in 之类的引号`emacs "`lst`"`可以解决问题，但会使用两次额外的击键

有什么方法可以修改`lst`，以便命令在没有额外击键的情况下工作？输出反斜杠转义的文件名不起作用。

我使用`zsh`，但问题（希望是解决方案）在`bash`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:12:16.197

[永远不要使用反引号](http://mywiki.wooledge.org/BashFAQ/082)。您必须始终[正确引用](http://mywiki.wooledge.org/Quotes)。没有捷径。`printf %q`是唯一可远程移植的替代方案（Zsh`${(q)var}`类似），但这些不适合您的问题。正确的（唯一的）答案是引用。

编辑：也许你应该坚持使用 zsh 来进行交互。我不是该 shell 的专家，但我知道例如，如果不使用其特殊扩展，它不会在默认模式下执行分词或通配。

```
$ zsh -c 'x="foo *"; echo $(printf "<%s> " $x)' # two passes of unquoted expansion
<foo *>
$ zsh -c 'emulate sh; x="foo *"; echo $(printf "<%s> " $x)'
<foo> <bltins> <builtins.mm> <COMPATIBILITY> <data> ... 
```

对于您想要的东西，这是一个巨大的胜利（并且是使 zsh 与其他所有脚本完全不兼容的重要因素之一）。没有其他 shell 可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:59:35.023

如何对你的惰性函数进行键绑定，这样你就不用输入任何内容，只需点击`Ctrl`+`z`并`zle`在你的命令行中为你插入文本。

```
z_lst() {                                                                      
  emulate -L zsh
  setopt extendedglob
  local lastfile
  # you could even implement your whole lst function here instead
  lastfile=$(lst)
  LBUFFER+=" ${lastfile// /\ }" # this should print the spaces like '\ '.
}                                                                               
zle -N z_lst && bindkey "^z" z_lst 
```

将此添加到您的`.zsh`.

# matlab - Matlab/Simulink：如果块错误

> ID：14498525
> 
> 赞同：0
> 
> 时间：2013-01-24T10:02:07.313
> 
> 标签：matlab, simulink

请参阅以下链接中的图片以了解问题。

图片在这个链接：[http](http://www5.picturepush.com/photo/a/12014483/img/12014483.jpg) ://www5.picturepush.com/photo/a/12014483/img/12014483.jpg ）

这里有 2 个输入： 1.Speed_Pulse 2.PreviousSpeedPulse_1_old

第二个输入只不过是第一个输入使用单位延迟块在时间上延迟了 1 个时刻。'If' 块比较 2 个输入。如果输入“u1”（Speed_Pulse）小于“u2”（PreviousSpeedPulse_1_old），则在“if action”块中，将值 64 简单地添加到 u1（Speed_Pulse）值。否则，输入 Speed_Pulse 通过“其他操作”块直接传输到输出。使用“Merge”块将其中一个输出传输到“Temp”（取决于“if-else”）。

现在，请参阅下表的输入和输出。

该表位于此链接：http: [//img521.imageshack.us/img521/8684/tablewy.png](http://img521.imageshack.us/img521/8684/tablewy.png)

在表中，瞬间 4 和瞬间 7 的值是错误的。

我找不到这个突然错误输出的原因。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:54:30.770

对不起，这是我的错。实际上我在它下面使用了一个框架，这是框架的错误。解决了。谢谢你的帮助。

# autoit - Autoit - 验证 Windows 共享用户身份验证

> ID：14498526
> 
> 赞同：1
> 
> 时间：2013-01-24T10:02:08.383
> 
> 标签：autoit

我正在尝试连接到 Windows 共享 (\print) 但如果我的身份验证失败，例如，错误的用户名或密码，我如何才能捕捉到该错误？问题是，在执行脚本（exe.文件）时，如果我插入错误的凭据，则错误消息来自 Autoit 程序，而不是我想要弹出的消息（上面的代码），如果身份验证存在问题。

这是我的代码示例：

在这里，我尝试使用用户名和密码连接到服务器 \print

```
$WshNetwork = ObjCreate("WScript.Network")
$WshNetwork.MapNetworkDrive("", "\\print", True, $username, $password) 
```

$username 和 $password 的值是从输入框填充的。所以，在那段代码之后，我试图捕捉这样的错误：

```
if @error Then
    MsgBox(16, "", "Authentication error!")
EndIf 
```

顺便说一句，我从控制台得到的错误是这个：

```
C:\Users\user\Desktop\test.au3 (33) : ==> The requested action with this object has failed.:
$WshNetwork.MapNetworkDrive( "","\\print",True, $username, $password)
$WshNetwork.MapNetworkDrive( "","\\print",True, $username, $password)^ ERROR 
```

好吧，错误正在发生，但是有什么方法可以从代码中捕获错误并发送警报（Msgbox）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T21:47:44.580

[`DriveMapAdd(...)`](https://www.autoitscript.com/autoit3/docs/functions/DriveMapAdd.htm)在 AutoIt 中查看。或者尝试使用这样的东西：

```
$USERNAME = InputBox(...)
$PASSWORD = InputBox(...)
$DRIVEINPUTBOX = InputBox(...)
$SHARE = "\\print\foldername"
$DRIVE = $DRIVEINPUTBOX & ": "

$COMMAND = "NET USE " & $DRIVE & " " & $SHARE & " /USER:" & $USERNAME & " " & $PASSWORD & " > TEMP"

RunWait(@ComSpec & " /c " & $COMMAND)

; Read the file "TEMP"
; Choose what to do
; Delete file "TEMP" 
```

# java - Java 字符数组初始化器

> ID：14498527
> 
> 赞同：7
> 
> 时间：2013-01-24T10:02:09.700
> 
> 标签：java, arrays, character, initializer

我试图制作一个分隔字符的程序。问题是：

“创建一个 char 数组并使用数组初始化程序用字符串 'Hi there' 中的字符初始化数组。使用 for 语句显示数组的内容。用空格分隔数组中的每个字符”。

* * *

我制作的程序：

```
String ini = "Hi there";
char[] array = new char[ini.length()];

for(int count=0;count<array.length;count++) {
   System.out.print(" "+array[count]);
} 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T10:04:44.797

以下是将 String 转换为 char 数组的方法：

```
String str = "someString"; 
char[] charArray = str.toCharArray(); 
```

我建议您在编程时使用 IDE，以便轻松查看类包含哪些方法（在这种情况下您可以找到`toCharArray()`）并编译类似于上面的错误。您还应该熟悉文档，在本例中就是[这个 String 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)。

此外，请始终发布您遇到的编译错误。在这种情况下很容易发现，但如果不是，如果您不将其包含在帖子中，您将无法获得任何答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:05:18.307

你做错了，你首先使用空格作为分隔符使用 String.split() 分割字符串，并用字符填充 char 数组。

甚至更简单，只需`String.charAt()`在循环中使用来填充数组，如下所示：

```
String ini="Hi there";
  char[] array=new  char[ini.length()];

  for(int count=0;count<array.length;count++){
         array[count] = ini.charAt(count);
  System.out.print(" "+array[count]);
  } 
```

或者一个班轮将是

```
 String ini="Hi there";
  char[] array=ini.toCharArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T16:32:45.990

```
char array[] = new String("Hi there").toCharArray();
for(char c : array)
    System.out.print(c + " "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:05:56.353

这是代码

```
String str = "Hi There";
char[] arr = str.toCharArray();

for(int i=0;i<arr.length;i++)
    System.out.print(" "+arr[i]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:08:53.777

代替上述方式，您可以通过以下方法简单地实现解决方案..

```
public static void main(String args[]) {
    String ini = "Hi there";
    for (int i = 0; i < ini.length(); i++) {
        System.out.print(" " + ini.charAt(i));
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-23T06:22:48.033

您初始化并将您的 String 声明为“Hi there”，使用正确的大小初始化您的 char[] 数组，然后开始循环遍历数组的长度，该循环打印一个空字符串以及数组中正在查看的给定元素. 您在什么时候考虑了将字符串中的字符放入数组的功能？

当您尝试打印数组中的每个元素时，您会打印一个空字符串，因为您将“无”添加到一个空字符串，并且因为没有将输入字符串中的字符添加到数组的功能。不过，您已经正确实施了它周围的一切。这是在初始化数组之后，但在遍历数组以打印出元素的 for 循环之前应该执行的代码。

```
for (int count = 0; count < ini.length(); count++) {
  array[count] = ini.charAt(count);
} 
```

在将每个字符放入数组后立即组合 for 循环以打印出每个字符会更有效。

```
for (int count = 0; count < ini.length(); count++) {
  array[count] = ini.charAt(count);
  System.out.println(array[count]);
} 
```

此时，您可能想知道为什么我可以使用对 String 对象`ini`本身的引用来打印它们，为什么还要把它放在一个 char[] 中。

```
String ini = "Hi there";

for (int count = 0; count < ini.length(); count++) {
   System.out.println(ini.charAt(count));
} 
```

一定要阅读 Java 字符串。在我看来，它们很吸引人，而且效果很好。这是一个不错的链接：[https ://www.javatpoint.com/java-string](https://www.javatpoint.com/java-string)

```
String ini = "Hi there"; // stored in String constant pool 
```

存储在内存中的方式不同于

```
String ini = new String("Hi there"); // stored in heap memory and String constant pool 
```

，其存储方式不同于

```
char[] inichar = new char[]{"H", "i", " ", "t", "h", "e", "r", "e"};
String ini = new String(inichar); // converts from char array to string 
```

.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-12T20:36:11.107

另一种简单的方法是使用字符串文字并在声明本身中将其转换为 charArray。

像这样的东西-

```
char array[] = "Hi there".toCharArray();

//Print with white spaces
for(char c : array)
   System.out.print(c + " "); 
```

# android - 蓝牙 Android RFCOMM/SPP 错误处理建议

> ID：14498530
> 
> 赞同：7
> 
> 时间：2013-01-24T10:02:23.480
> 
> 标签：android, bluetooth, rfcomm, spp

我计划在 Android 设备和使用商业蓝牙模块的自定义传感器之间使用通信协议。我会使用 SPP 配置文件，据说它“为用户提供简单可靠的数据流，类似于 TCP”。

我对蓝牙技术不是很熟悉，对设计这样的协议有一些疑问。

首先，我不清楚我是否必须担心损坏的数据是否被传输。底层协议栈能否保证我从`InputStream`Android 读取的字节与 UART 在传感器端接收的字节相同？我是否必须定义我自己的受 CRC 或其他东西保护的数据包，还是会有点矫枉过正？

从 Android 蓝牙文档中我不清楚如果信号很弱并且丢失了一段时间，我的应用程序会发生什么。我`IOException`是立即获得，还是平台为我提供了一些隐藏的错误处理和恢复，使我看不到如此短暂的中断？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T17:40:42.477

您不必担心 SPP 上的数据损坏，蓝牙提供 2 级 CRC，一个在基带，一个在 L2CAP 级别，两者都具有针对任何检测到的损坏的重传机制 - 因此应用程序只会接收到好的数据包。

关于第二个问题 - 是的，在您连接的 Socket 流上，如果底层蓝牙连接断开连接，您将收到 IOExceptions，Android 无法处理自动恢复 - 通常应用程序需要检测断开连接的原因并在适用时尝试重新连接。因此，如果您想从上次成功接收/发送的那一点继续进行数据交换，那么您的应用程序应该维护某种序列号和轻协议以实现恢复。另一种选择是在重新连接时简单地从数据交换的基础开始（所以这取决于您的用例）

# php - 尝试使用 jquery newsticker 显示来自 mysql 的新闻

> ID：14498533
> 
> 赞同：0
> 
> 时间：2013-01-24T10:02:30.267
> 
> 标签：php, mysql

嗨，我在我的数据库中创建了一个表

```
CREATE TABLE `newsticker` (
  `NID` bigint(20) NOT NULL AUTO_INCREMENT,
  `news` text CHARACTER SET utf8 NOT NULL,
  `status` char(1) CHARACTER SET utf8 NOT NULL DEFAULT '0',
  PRIMARY KEY (`NID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

我有这些功能

```
function insert_get_newsticker($var)
{
    global $conn;
    $query="SELECT * FROM newsticker WHERE status = '1' ORDER BY NID DESC";
    $results = $conn->execute($query);
    $ns = $results->getrows();
    return $ns;
} 
```

我在我的 tpl 文件中使用它

```
{literal}
<script language="javascript" type="text/javascript" src="js/jquery.ticker.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('#js-news').ticker({
            speed: 0.10,
            pauseOnItems: 2000,
            controls: false,
            fadeInSpeed: 600,
            titleText: 'Our Latest News'
        });
    });
</script>
{/literal} 
```

我有以下我希望显示新闻的地方

```
<div id="tickerbg">
<div id="ticker-wrapper" class="has-js">
      <ul id="js-news" class="js-hidden">
<li></li>
<ul>
</div>
</div> 
```

我想我需要某种 for 循环才能显示新闻表的内容，只是让头脑空白任何想法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:10:56.820

因此，您已将`$ns`变量传递给模板引擎。
这取决于您使用的模板引擎。
在聪明：

```
<ul>
{foreach from=$ns item=news_item}
    <li>{$news_item.news}</li>
{/foreach}  
</ul> 
```

在纯 php 中：

```
<ul>  
<? foreach($ns as $news_item)?>  
<li><?= $news_item['news'] ?></li>
<? } ?>
</ul> 
```

# c - 面向切面编程的 ANSI C 库

> ID：14498537
> 
> 赞同：3
> 
> 时间：2013-01-24T10:02:35.040
> 
> 标签：c, aop

我正在为面向方面的编程寻找一个好的 ANSI C 库。

一些所需的功能是：

*   访问和修改目标函数的参数。
*   使目标函数返回并控制返回值。

我找到了 aspeCt C ( [https://sites.google.com/a/gapp.msrg.utoronto.ca/aspectc/home](https://sites.google.com/a/gapp.msrg.utoronto.ca/aspectc/home) )，阅读文档似乎有我需要的一切，但是当按照说明运行时make 编译并通过测试，测试失败。

有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:02:35.253

你可以试试 [AspectC++](http://www.aspectc.org/) 是一个将[AspectJ](http://www.eclipse.org/aspectj/)方法扩展到 C/C++ 的项目。

例如，如果您想使用 Aspect 编写一个简单的 C 程序：

```
int main() {
    printf("world");

} 
```

然后你会有一个 aspect.cc

```
before(): execution(int main()) {
    printf("Hello ");
}

after(): execution(int main()) {
    printf(" from AspectC ! \n");
} 
```

你编译两者`> acc hello.ac world.mc`

结果是：

```
gcc hello.c world.c
>./a.out
 Hello world from AspectC ! 
```

# windows-7 - 使用批处理脚本复制 Windows 7 当前用户的用户配置文件

> ID：14498538
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:02:34.743
> 
> 标签：windows-7, batch-file

我是批处理脚本的新手。在过去 24 小时内进行了大量搜索，以找到将用户配置文件从 Windows 7 注册表 HKEY 复制到闪存驱动器的解决方案。仅供参考，我打算从我电脑中的文件夹运行脚本。帮助或建议或完整的代码表示赞赏..提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:12:11.040

`E:`您可以使用（作为您的闪存驱动器）复制当前的用户配置文件

```
xcopy %userprofile% E:\ /e 
```

或者，如果您想要一个不使用的，您可以使用

```
xcopy C:\Users\UserToCopy E:\ /e 
```

希望这可以帮助

# audio - 如何使用 ffmpeg 叠加/缩混两个音频文件

> ID：14498539
> 
> 赞同：81
> 
> 时间：2013-01-24T10:02:36.200
> 
> 标签：audio, ffmpeg, mp3, cmd

我可以使用 ffmpeg 将两个音频 mp3 文件叠加/缩混到一个 mp3 输出文件中吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-25T18:52:16.050

# 立体声 + 立体声 → 立体声

### 正常缩混

[![正常缩混](../Images/d99d63aab1b05fd08d9f75bb2607dbb2.png)](https://i.stack.imgur.com/99nCo.png)

使用[amix](https://ffmpeg.org/ffmpeg-filters.html#amix)过滤器：

```
ffmpeg -i input0.mp3 -i input1.mp3 -filter_complex amix=inputs=2:duration=longest output.mp3 
```

或[amerge](https://ffmpeg.org/ffmpeg-filters.html#amerge)过滤器：

```
ffmpeg -i input0.mp3 -i input1.mp3 -filter_complex amerge=inputs=2 -ac 2 output.mp3 
```

### 将每个输入缩混到特定的输出通道中

[![将每个输入缩混到特定的输出通道中](../Images/a3dac05467f9498a61f38afd37cdcccf.png)](https://i.stack.imgur.com/Xouzg.png)

使用[amerge](https://ffmpeg.org/ffmpeg-filters.html#amerge)和[pan](https://ffmpeg.org/ffmpeg-filters.html#pan)过滤器：

```
ffmpeg -i input0.mp3 -i input1.mp3 -filter_complex "amerge=inputs=2,pan=stereo|c0<c0+c1|c1<c2+c3" output.mp3 
```

* * *

# 单声道 + 单声道 → 立体声

[![单声道 + 单声道 → 立体声](../Images/ff4e7ec43b47a3f121e50c8cc556857a.png)](https://i.stack.imgur.com/m1lCC.png)

使用[连接](https://ffmpeg.org/ffmpeg-filters.html#join)过滤器：

```
ffmpeg -i input0.mp3 -i input1.mp3 -filter_complex join=inputs=2:channel_layout=stereo output.mp3 
```

或[合并](https://ffmpeg.org/ffmpeg-filters.html#amerge)：

```
ffmpeg -i input0.mp3 -i input1.mp3 -filter_complex amerge=inputs=2 output.mp3 
```

* * *

# 单声道 + 单声道 → 单声道

[![单声道 + 单声道 → 单声道](../Images/9a45ff743da30ffbc59bd4634455d0c5.png)](https://i.stack.imgur.com/UA5ru.png)

使用[amix](https://ffmpeg.org/ffmpeg-filters.html#amix)过滤器：

```
ffmpeg -i input0.mp3 -i input1.mp3 -filter_complex amix=inputs=2:duration=longest output.mp3 
```

* * *

# 更多信息和示例

请参阅[FFmpeg Wiki：音频通道](https://trac.ffmpeg.org/wiki/AudioChannelManipulation)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-02-23T05:44:18.353

看一下这个：

```
ffmpeg -y -i ad_sound/whistle.mp3 -i ad_sound/4s.wav -filter_complex "[0:0][1:0] amix=inputs=2:duration=longest" -c:a libmp3lame ad_sound/outputnow.mp3 
```

我认为这会有所帮助。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-02-05T20:29:09.973

该`amix`过滤器有助于将多个音频输入混合到一个输出中。

如果您运行以下命令：

```
ffmpeg -i INPUT1 -i INPUT2 -i INPUT3 -filter_complex amix=inputs=3:duration=first:dropout_transition=3 OUTPUT 
```

该命令会将 3 个输入音频流（我在下面的示例中使用了两个 mp3 文件）混合到一个输出中，其持续时间与第一个输入相同，并且 dropout 转换时间为 3 秒。

`amix`过滤器接受以下参数：

*   **输入**：输入的数量。如果未指定，则默认为 2。

*   **持续时间**：如何确定流的结束。

    *   *最长*：最长输入的持续时间。（默认）

    *   *shortest*：最短输入的持续时间。

    *   *first*：第一次输入的持续时间。

*   **dropout_transition**：输入流结束时卷重新归一化的转换时间（以秒为单位）。默认值为 2 秒。

例如，我在 Ubuntu 中运行以下命令：FFMPEG 版本：3.2.1-1 UBUNTU 16.04.1

```
ffmpeg -i background.mp3 -i bSound.mp3 -filter_complex amix=inputs=2:duration=first:dropout_transition=0 -codec:a libmp3lame -q:a 0 OUTPUT.mp3 
```

`-codec:a libmp3lame -q:a 0`用于设置可变比特率。请记住，如果有必要，您需要安装 libmp3lame 库。但是，即使没有该`-codec:a libmp3lame -q:a 0`部件，它也可以工作。

参考：[https ://ffmpeg.org/ffmpeg-filters.html#amix](https://ffmpeg.org/ffmpeg-filters.html#amix)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-07-16T09:51:37.357

对于合并具有**不同音量和不同持续时间**的两个音频文件，以下命令将起作用：

```
ffmpeg -y -i audio1.mp3 -i audio2.mp3 -filter_complex "[0:0]volume=0.09[a];[1:0]volume=1.8[b];[a][b]amix=inputs=2:duration=longest" -c:a libmp3lame output.mp3 
```

此处持续时间可以更改为**最长或最短**，您也可以根据需要更改**音量级别。**

如果您想**为某些声音添加背景音乐，请**使用以下命令，因为在**间隙中，音乐将自动变响**：

```
ffmpeg -i bgmusic.mp3 -i audio.mp3 -filter_complex "[1:a]asplit=2[sc][mix];[0:a][sc]sidechaincompress=threshold=0.003:ratio=20[bg]; [bg][mix]amerge[final]" -map [final] final.mp3 
```

在这个阈值中，它的值将决定音频应该响多少，**阈值越小，音频就越多**。比率给出了其他音频应该被压缩多少，**比率越大，压缩越多**。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-08T10:59:33.507

如果它们的长度不同，您可以使用[apad](http://www.ffmpeg.org/ffmpeg-filters.html#apad)为最短的一个添加静音

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T18:06:46.853

与重击

```
set 'amovie=a.mp3 [gg]; amovie=b.mp3 [hh]; [gg][hh] amerge'
ffmpeg -f lavfi -i "$1" -q 0 c.mp3 
```

[例子](http://github.com/svnpenn/a/blob/c309610/scripts/ff-merge-audio.sh)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-07T08:06:42.860

您可以使用以下命令参数：

```
 // Command is here

let commandValue = "-y -i \(recordedAudioPath) -i \(backgroundAudio) -filter_complex [\(0):a][\(1):a]amerge=inputs=\(2)[a] -map [a] -ac \(2) -shortest -preset ultrafast \(outputPath)"
  MobileFFmpeg.execute(commandValue) 
```

# python - 从使用 boost::python 生成的 python 类的继承

> ID：14498543
> 
> 赞同：0
> 
> 时间：2013-01-24T10:02:39.933
> 
> 标签：python, boost-python

我从使用 boost::python 生成的 python 类继承时遇到问题。

我有一个类，其函数 Print() 定义如下：

```
void CMagnet::Print()
{
  cout << "Hello" << endl;
} 
```

并且接口在我的 .cpp 文件中定义如下：

```
BOOST_PYTHON_MODULE (CMagnet)
{
   class_<CMagnet>("CMagnet")
      .def("Print", &CMagnet::Print)
      ;
} 
```

原则上，该模块可以工作，但我遇到了继承问题。这是一个例子：

```
from CMagnet import CMagnet

class DerMagnet(CMagnet):
    def __init__(self):
        self.Print()

a = CMagnet()
a.Print()

b = DerMagnet() 
```

我得到的是：

hirbel> python der_test.py

```
Hello

Traceback (most recent call last):
  File "der_test.py", line 10, in <module>
    b = DerMagnet()
  File "der_test.py", line 5, in __init__
    self.Print()
Boost.Python.ArgumentError: Python argument types in
    CMagnet.Print(DerMagnet)
did not match C++ signature:
    Print(CMagnet {lvalue}) 
```

这意味着当我实例化 CMagnet 类时，我可以毫无问题地调用 Print() 方法，但是当我从它继承并且派生类尝试调用该方法时，self 参数会自动作为第一个参数插入，并且签名是错误的。我将如何解决这个问题？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:56:37.997

我确认@kerim 评论。

如果你不调用父类“__init__”方法，你会得到这种错误信息。

# jquery - jQuery淡入淡出图像不透明度动画

> ID：14498544
> 
> 赞同：1
> 
> 时间：2013-01-24T10:02:42.657
> 
> 标签：jquery

我目前正在尝试找到一种方法来显示一个简单的图像，该图像在恒定循环中自动淡入淡出（不透明度 0 > 100）。

有没有办法在 jQuery 中实现这一点而不必依赖 Flash 解决方案？

一些信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:47:33.733

试试这个

```
$(function () {
    $('img').on("hasFadedOut", fadeInImg);
    $('img').on("hasFadedIn", fadeOutImg);
    fadeOutImg();
})

fadeInImg = function () {
    $('img').fadeIn(500, function () { $('img').trigger("hasFadedIn"); });
};

fadeOutImg = function () {
    $('img').fadeOut(2000, function () { $('img').trigger("hasFadedOut"); });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:12:05.957

试试这个

```
$(document).ready(function(){

    setInterval(function(){

        $('#image').fadeIn('slow', function() {  
            $('#image').fadeOut('slow');
        });

     }, 500);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:08:51.643

试试这个

```
$('#clickme').click(function() {
    $('#image').fadeIn('slow', function() {
    // After Animation complete.
    $('#image').fadeOut('slow');
    });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-27T18:47:55.340

让我给你我的场景。我的一个网站上有一个“团体费用计算器”。每次访问者添加一些项目并且成本超过 0.00 美元时，他们都可以选择“下载/打印”估算值。我希望他们注意到自动显示的“打印”图标。如果成本返回 0.00 美元，该图标将隐藏。我设置了一个循环，因此访问者不会生气，也因为它在测试时惹恼了我 :) 您可以为任何数字设置循环，或删除标记的行以使其连续闪烁。问题？

从您的图像开始，添加 ID 以便对其进行控制。我添加了“光标：指针”，以便访问者知道它是“可点击的”。

```
<img id="est_print" src="est_print.png" style="cursor:pointer;" title="Print Estimate" alt="" /> 
```

在“flash_icons”函数上方添加计时器变量。

```
var fi1; // set outside the 'flash_icons' function so other functions can stop the flashing
var fi2; 
```

您的主要功能，我将其放在“文档就绪”功能之外。

```
function flash_icons() {
    $('#est_print').show();
    setTimeout(function() {
        var loop = 0; // remove to keep flashing
        $('#est_print').css('opacity', '1');
        fi1 = window.setInterval(function(){
            $("#est_print").animate({opacity: 1}, 600);
            fi2 = window.setTimeout(function(){
                $("#est_print").animate({opacity: 0.2}, 600);
                loop++; // remove to keep flashing
            }, 2000);
            if (loop == 4) { clearTimeout(fi2); clearInterval(fi1);} // remove to keep flashing
        }, 2200);
    }, 2000);
} 
```

开始闪烁..

```
flash_icons(); 
```

通过其他功能停止闪烁..

```
clearTimeout(fi2);
clearInterval(fi1); 
```

我正在使用 jquery-1.7.js，并在 XP/Win7/Win10 上对其进行了测试，浏览器回到 IE8/FF ESR v52。我没有在 Chrome 上测试它。完美运行。

# html - chrome 封面页中的白框

> ID：14498552
> 
> 赞同：1
> 
> 时间：2013-01-24T10:03:08.707
> 
> 标签：html, google-chrome

我正在开发一个网站，今天谷歌浏览器决定展示这个大白框。一周前我没有这个问题，从那以后我没有更改过代码。

我在其他浏览器（即和Firefox）中没有问题。

实际上似乎是这个显示器的问题。我正在扩展我的笔记本电脑显示屏，如果我在笔记本电脑显示屏上打开了浏览器，则没有问题。但是在显示器上打开它，我得到了这个白色的大盒子。我能让它在显示器上消失的唯一方法是放大到 150%+。

Chrome 已更新，我什至尝试卸载并重新安装。

只是好奇有没有其他人有这个问题？任何修复？

有它看起来像 [http://postimage.org/image/kodmqafb5/的图像](http://postimage.org/image/kodmqafb5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T09:34:21.963

如果您在扩展程序中启用了下载管理器，这就是我的至少白框的原因，我刚刚摆脱了它，然后 chrome 再次下载了它，当它发生时得到它应该可以解决您的问题

# javascript - 当我克隆输入时，onblur 不起作用

> ID：14498555
> 
> 赞同：2
> 
> 时间：2013-01-24T10:03:15.707
> 
> 标签：javascript, jquery

我想将输入类型文本更改为密码。但它在ie8中不起作用。我找到了解决方案；克隆并替换输入，但克隆后 onblur 不起作用。

调试器不会破坏 OnBlur 函数。有人可以给我看看吗？

这是js代码：

```
$(document).ready(function () {
    var input = document.getElementById("Password");
    var input2 = input.cloneNode(false);
    input2.id = 'password1';
    input2.type = 'password';
    $('#Password').focus(function () {
       input.parentNode.replaceChild(input2, input);
       input2.focus();
    });
    $('#password1').blur(function () {
        if ($(this).val() == '' || $(this).val() == Passwordtxt) {
            document.getElementById("password1").setAttribute("type", "text");
            $(this).val(Passwordtxt);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:57:46.113

改变

```
$('#password1').blur(function () { 
```

到

```
$('body').on('focusout','#password1',function () { 
```

看[`.on()`](http://api.jquery.com/on/)

和事件由 W3C 指定为不冒泡，但 jQuery 定义了跨浏览器和`focus`冒泡的事件。当和用于附加委托事件处理程序时，jQuery 映射名称并将它们分别作为和传递。为了一致性和清晰性，使用冒泡事件类型名称。`blur``focusin``focusout``focus``blur``focusin``focusout`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-24T10:05:20.330

使用`on`事件委托

试试这个

```
$(document).on('blur','#password1',function () {... 
```

`document`最好用最接近的元素替换

# c# - 如何过滤带有 DateTime 列的 DataTable？

> ID：14498559
> 
> 赞同：1
> 
> 时间：2013-01-24T10:03:24.463
> 
> 标签：c#, listview, datatable, datarow

我想过滤一个 Datatable 并且它可以工作，但是如果我搜索一个 DateTime 我会得到一个错误。

这是我的代码。我做错了什么？

```
 DataTable tb = DataBaseManager.GetRadiusDataTable(radiusconnectionstring, "marksullivan"); 

DataRow[] filteredRows = tb.Select("AcctStartTime LIKE '%" + searchstring + "%' OR AcctStopTime LIKE '%" + searchstring + "%' OR FramedIPAddress LIKE '%" + searchstring + "%'");
tb = filteredRows.CopyToDataTable();
this.ListView.DataSource = tb;
this.ListView.DataBind(); 
```

AcctStartTime:datetime AcctStopTime :datetime FramedIPAddress : varchar

```
The error: The Operation 'Like' could not to System.DateTime and System.String execute. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T10:10:57.053

像这样[在 RowFilter 中尝试 DateComparision](http://community.sgdotnet.org/blogs/chuawenching/archive/2007/03/29/C_2300_-DateTable.Select-_2D00_-DateTime-comparison-filter.aspx)

```
string filter = $"DateFrom > '{daDateFrom}' AND DateTo <= '{daDateTo}'";
tb.Select(filter) 
```

或来自[DataRow 过滤器示例](http://www.csharp-examples.net/dataview-rowfilter/)

> 日期值包含在尖字符 # # 内。日期格式与不变或英语文化的 DateTime.ToString() 方法的结果相同。

[C＃]

```
dataView.RowFilter = "Date = #12/31/2008#"          // date value (time is 00:00:00)
dataView.RowFilter = "Date = #2008-12-31#"          // also this format is supported
dataView.RowFilter = "Date = #12/31/2008 16:44:58#" // date and time value 
```

# php - 存储库部署和 Composer：什么工作流程？

> ID：14498560
> 
> 赞同：19
> 
> 时间：2013-01-24T10:03:27.637
> 
> 标签：php, git, deployment, composer-php

作为一名 PHP 开发人员，我发现自己经常使用 Composer。过去它是在个人项目上，所以我对它没有太多问题，但现在有了 Laravel 4，它是在需要部署的项目上，我有点难以适应我的工作流程。

我所有的项目都是 git 存储库，因此按照惯例并且因为它仍然有很多错误，就像大多数开发人员一样，我将`vendor`目录放在我的`.gitignore`. 现在的问题是：我还使用 Git 部署到服务器，并且所有逻辑都没有上传供应商目录，因为它没有被存储库跟踪。

所以我的问题是针对那些使用 Composer 和 Git 的时间比我长的人：保持服务器同步的最佳工作流程是什么？如何在不真正跟踪的情况下跟踪供应商文件夹？我每次使用 Composer 更新时都尝试上传它，但我的一些供应商文件夹非常大，每次更新时我无法手动上传 30Mb 的文件。

真不知道，你们是怎么解决的？我试着不忽略该`vendor`文件夹，但 Git 只是把它弄乱了，一半被识别为克隆的 repos，无论如何都被忽略了，等等。

更新：请注意，我在共享主机上，所以我无权访问服务器的终端。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T12:12:31.267

最好的方法是`composer install`更新到最新代码后在服务器上运行。您还应该确保提交您的 composer.lock 文件，然后服务器将使用该文件进行安装（您不应`composer update`在服务器上运行）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-28T14:50:13.623

Capistrano（或 Capifony，如果您使用 Symfony2）对于使用 composer 进行部署非常有用。您可以远程触发部署，它将单独运行 composer 安装，因此站点在成功部署之前保持在线。还有许多其他好处，例如保留以前的部署和回滚，在部署之前复制旧供应商，编译资产等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-29T10:39:23.630

我正在服务器上的 git post-receive 挂钩中处理类似的事情。这未经测试，可能有问题，但您应该明白这一点。

```
#!/bin/bash
# get the updated composer.json
git checkout master -- composer.json

# only do this stuff if composer.json is different
# you could check this manually, or with git or cmp
cp composer.json tmp/composer.json

# may take a minute, but won't take the site down
(cd tmp; composer install --prefer-dist)

# this doesn't seem to be atomic
git checkout -f

# switch vendors over
# this isn't quite an atomic operation, but is very close
# you could probably do it with symlinks and "mv -Tf" to make it atomic
mv vendor vendor.old
mv tmp/vendor vendor

rm -r tmp vendor.old 
```

理想情况下，除了一个单独的部署之外，所有部署（即在本例中为`git checkout`和）都将在. 如果您的工作树中有未跟踪的文件（例如 CMS 上传）并且依赖于 PHP不解析符号链接（由于这个[PHP 错误](https://bugs.php.net/bug.php?id=46260)），这将不起作用。`composer install``mv``www``__FILE__`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-19T01:57:00.690

这是一个老问题，但万一有人正在寻找解决方案：

我稍微修改了@dave1010 答案以使用`git pull`而不是`git checkout--force`

```
#!/bin/bash
# get only composer files 
git fetch
git checkout origin/master -- composer.json
git checkout origin/master -- composer.lock

# make sure tmp is empty
rm -rf tmp
mkdir tmp

# copy the composer files to tmp
cp -r vendor tmp/vendor
cp composer.json tmp/composer.json
cp composer.lock tmp/composer.lock

# may take a minute, but won't take the site down
(cd tmp; composer install --no-scripts --verbose; cd ..)

# switch vendors over
rm -rf vendor_old
mv vendor vendor_old
mv tmp/vendor vendor

# update your code
git pull

# run again composer install. This time will print 'Nothing to install or update'
# but will execute pre/post scripts & generate autoload files
composer install --optimize-autoloader 
```

[使用capistrano/composer](https://github.com/capistrano/composer)可能有更好的解决方案。但我更喜欢我的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-23T22:43:05.743

你可以使用像 jenkins 这样的东西来 ftp 你的文件，你可以指导 jenkins 在 jenkins 服务器上运行 composer install 然后 ftp 文件。

这也允许您忽略供应商文件夹。

它确实需要制作构建服务器，并且您需要能够执行命令而不是构建服务器

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-08T22:38:05.740

关键是你的`composer.lock`文件。composer.lock 会准确跟踪您安装的软件包（和版本）。部署时，也将`composer.lock`文件发送到生产服务器，然后简单地执行一个`composer update`. 将安装所有完全相同的软件包版本。使用 Capistrano 或 Flightplan 等部署软件，您可以将`composer update`步骤作为流程的一部分，使其自动发生。

# c# - 仅从插入语句字符串中提取值？

> ID：14498561
> 
> 赞同：0
> 
> 时间：2013-01-24T10:03:32.757
> 
> 标签：c#, string, linq, c#-4.0

起初这可能看起来很奇怪，但我希望它是有道理的！我有一个`list<string>`mysql insert 语句，我遍历并逐个执行，这工作正常，但我想要实现的是性能提升。

例如，我想在单个查询中传递所有值而不是

```
INSERT INTO tb1(field1,field2,field3) VALUES (1,2,3);
INSERT INTO tb1(field1,field2,field3) VALUES (4,5,6);
INSERT INTO tb1(field1,field2,field3) VALUES (7,8,9); 
```

我想要做

```
INSERT INTO tb1(field1,field2,field3) VALUES (1,2,3), (4,5,6), (7,8,9); 
```

所以基本上我需要构建一个长查询字符串，将第一个查询作为起点，并将括号部分从值附加到末尾，无论列表中的对象数量是多少 - 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:25:02.577

这应该有效。我`regex`用来查找列和值并`string.Substring`查找表名。然后我把所有的`string.Format`和`string.Join`和一个简单的 Linq 查询放在一起：

```
IEnumerable<string> inserts = // add your insert-strings here;
string firstInsert = inserts.First();
int tableIndex = firstInsert.IndexOf("INSERT INTO ") + "INSERT INTO ".Length;
string table = firstInsert.Substring(
    tableIndex, firstInsert.IndexOf("(", tableIndex) - tableIndex);
var regex = new System.Text.RegularExpressions.Regex(@"\(([^)]+)\)",System.Text.RegularExpressions.RegexOptions.Compiled);
string columns = regex.Matches(firstInsert)[0].Value;

IEnumerable<string> values = inserts.Select(sql => regex.Matches(sql)[1].Value);

string insertAll = string.Format("INSERT INTO {0}{1} VALUES {2};"
    , table
    , columns
    , string.Join(",", values)); 
```

[](http://ideone.com/DYGJOY)**使用您的示例数据进行[**演示。**](http://ideone.com/DYGJOY)**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:43:06.247

以防万一您可能要插入不同的表（或表中的列集），

```
var perTableQueries = separateQueries
    .Select(s => s.Split(new[] {" VALUES "}, StringSplitOptions.None))
    .Where(a => a.Length == 2)
    .GroupBy(a => a[0], StringComparer.InvariantCultureIgnoreCase)
    .Select(g => String.Format("{0} VALUES {1};",
        g.Key,
        String.Join(",", g.Select(a => a[1].TrimEnd(';')).ToArray()))); 
```

将为每个表/列集进行一次插入（如果您的 SQL 是一致的）。

也就是说，如果您为每一行向数据库发出单独的请求，您最大的性能节省可能只是

```
var singleRequest = String.Join("", perTableQueries.ToArray()); 
```**

# ios - 如何在 restkit 中映射 64 位值

> ID：14498562
> 
> 赞同：0
> 
> 时间：2013-01-24T10:03:33.680
> 
> 标签：ios, restkit

我的 Json 响应返回一个 64 位的值。我需要将此 64 位值映射到我的 iOS 模型。

如何进行映射？我最初使用的是 NSInteger 类型，但它只有 32 位。

如果我在我的 iOS 模型中使用 int64_t，则映射不是由 restkit 完成的。

如何解决我的问题？是否可以在 Restkit 中定义我们自己的映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:35:03.727

您需要确保您的属性是 NSNumber 类型，然后在对象映射之后您可以使用`-(NSInteger)longLongValue`方法提取您需要的内容。

# ruby - 为什么我使用 /W 拆分字符串时会产生空格

> ID：14498563
> 
> 赞同：0
> 
> 时间：2013-01-24T10:03:37.207
> 
> 标签：ruby

我正在尝试拆分一个字符串以获取上面的单词..

我的代码如下：

```
def words(string)
    string.downcase!
    hash_str = Hash.new
    string.split(/\W/i).each {|y| 
      if(hash_str.has_key?(y)) 
         hash_str[y] += 1
      else 
         hash_str[y] =1
      end
    }
    return hash_str
end

hash_t = words("A man, a plan, a canal -- Panama")
hash_t.each{|x,y| puts "#{x}:#{y}"} 
```

输出是：

```
1    :5
2   a:3  
3  plan:1
4  man:1
5  canal:1
6  panama:1 
```

我的问题是似乎也计算了空格。如何在 /W 中添加空格？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:13:54.773

空白字符串条目出现在两个或多个非单词字符相邻的地方。

所以`"A man, a"`在空间分裂给`"A"`和`"man, a"`; 然后在逗号处给出`"man"`and `" a"`，然后在空格处再次给出`""`and `"a"`。

如果您使用`split(/\W+/i)`，您会得到您所期望的，因为它将每个非单词字符字符串视为一个拆分。

[键盘链接](http://codepad.org/2TVCdqNJ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:32:43.387

在这种情况下，在概念上使用`scan`. 这个用例的典型实现是这样的：

```
def words(string)
  Hash.new(0).tap{|h| string.downcase.scan(/\w+/){|w| h[w] += 1}}
end

words("A man, a plan, a canal -- Panama").each{|x,y| puts "#{x}:#{y}"} 
```

这将给出：

```
a:3
man:1
plan:1
canal:1
panama:1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:20:16.363

一个更 Ruby-ish 的解决方案：

```
str = "A man, a plan, a canal -- Panama"
str.downcase.split(/\W+/).inject(Hash.new(0)) { |h,v| h[v] += 1; h }

=> {"plan"=>1, "a"=>3, "panama"=>1, "man"=>1, "canal"=>1} 
```

# javascript - 如何使特定的 JS 脚本仅适用于特定页面

> ID：14498565
> 
> 赞同：2
> 
> 时间：2013-01-24T10:03:43.353
> 
> 标签：javascript, jquery, authentication, jquery-mobile, cookies

如何为特定页面制作脚本，检查现有 cookie 以及是否存在重定向到指定页面？到目前为止，我有类似的东西，但由于某种原因它不断触发每个页面上的功能（只是为了澄清我使用 jQueryMobile）：

```
$(document).on('pageinit',function(){
  jQuery(function($){
    if ($('body#home').length){
      if($.cookie('usr') && $.cookie('psw')){
        $.mobile.changePage("http://imes.**********.com/userpanel.php");
      }
    }
  });
}); 
```

将来我不会将名称和密码存储在 cookie 中，我知道这种方法的安全问题，我将存储生成的密钥以匹配用户 cookie 中的用户，但现在，对于测试阶段，我使用这些 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:16:44.683

您的 ID 方法本质上是好的，但测试长度是我不信任的（我对此没有任何论据，只是一种感觉）。

这就是为什么我会采用这种方法：

```
$("body#home").on("load", function() {
    // Eat your cookies here.
}); 
```

PS
为标签命名是没有用的，只是需要时间。浏览器从右到左读取CSS选择器（我认为JS querySelectors也是，那么PS就是基于这个假设），所以它会首先找到ID为'home'的一个元素，然后获取所有body（在这种情况下，只有一个主体，但假设您`div#home`在页面上有 100 个 div）并选择正确的一个。由于每个 ID 在页面上只能出现一次，因此没有必要为标签命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:09:27.910

我不太确定您在问什么，但是如果您只想在特定页面上运行代码，您可以`location.pathname`尝试确定您所在的页面。

```
jQuery(function($){
    if ( location.pathname.indexOf( '/home' ) ){
        // ...
    }
}); 
```

这种方法比查找 dom 节点要快。此外，用户名和密码应由您的后端语言会话处理

# cordova - JQuery Mobile 页面分离 + Knockout 自定义绑定

> ID：14498566
> 
> 赞同：1
> 
> 时间：2013-01-24T10:03:50.403
> 
> 标签：cordova, jquery-mobile, knockout.js

我对此进行了一些研究，但我对 KO 和 JQM 并不是特别有经验。

显然，需要一些自定义绑定才能让 KO 与一些 JQM 控件配合使用。但是，当遇到以下问题时，我不确定最好的设计是什么。

我有一个 index.html 文件，带有单独的`data-role="page"`div。

由于整个应用程序中有很多共享逻辑，因此为每个页面拥有一个单独的视图模型不一定有意义，所以我目前只有一个`viewModel`对象，我目前正在调用`applyBindings`一次。这自然会在第一页加载后发生。

问题是 JQM 在用户导航到它们之前不会更改后续页面上的元素，html 在`applyBindings`调用点保持不变。初始化自定义绑定时，它们正在处理尚未更改的 html。

一个简单的例子（不粘贴代码）是[Knockoutjs，jquery mobile slider](https://stackoverflow.com/questions/7404882/knockoutjs-jquery-mobile-slider)`slider('refresh')` ，在 JQM 创建之前调用`slider`。

我知道我可以在`pageinit`事件中访问更改后的 html，但问题是有两个相互依赖的事件，`init`自定义绑定的`pageinit`事件和使用自定义绑定的页面的事件。我不确定最好的解决方法是什么。

初步想法：

1.  只需处理每个自定义绑定中的差异，我已经在示例中看到了这一点，例如包装调用以刷新 JQM 使用 try...catch 初始化的内容。不确定我喜欢这个。

2.  拆分成单独的 html 文件。我也不确定我是否喜欢这个，因为有很多通用数据并且会影响性​​能。

3.  拆分`viewModel`并将其应用于不同的元素，然后仅在各自`pageinit`事件的每个页面上应用绑定。这需要进行一些重新设计，因为每个页面都需要大部分视图模型。

4.  有什么办法可以强制 JQM 提前初始化一个页面？如果是这样，这会是一个糟糕的举动吗？

5.  有没有办法控制 KO 自定义绑定何时初始化？问题在于您正在有效地将自定义绑定定制到各个页面。

6.  在 Javascript 中添加绑定，例如[https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/N33EzQ5nWUU](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/N33EzQ5nWUU)。这个不太清楚，好像不是很干净。

还有其他建议吗？人们以前是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:31:52.147

如果它对任何人有帮助，我已经尝试了滑块的选项 1（基于[Knockoutjs，jquery mobile slider](https://stackoverflow.com/questions/7404882/knockoutjs-jquery-mobile-slider)），具有以下自定义绑定：

```
ko.bindingHandlers.slider = {
    init: function (element, valueAccessor) {
        function setSliderValue(newValue) {
            var slider = $("#" + element.id);
            slider.val(newValue);
            slider.slider('refresh');
            slider.on('change', function () {
                valueAccessor()(slider.val());
            });
        }
        valueAccessor().subscribe(setSliderValue);
    }
}; 
```

仅在页面初始化后，使用附加代码为我的 observable 设置我想要的初始值，例如

```
$("#myPage").on('pageinit', function () {
    viewModel.myPage.myObservable(1000);
}); 
```

这并不完美，并且它不能解决我在进一步探索 KO + JQM 世界时无疑会遇到的其他控件的问题。

编辑：调整上述内容，还为 JQM 生成的后退按钮（来自`data-add-back-btn="true"`）添加了绑定，这可能会派上用场：

```
ko.bindingHandlers.back = {
    init: function (element, valueAccessor) {
        function setBackBind(boundFunction) {
            $("#" + element.id)[0].children[0].children[0].id = element.id + "-backbutton";            
            $("#" + element.id + "-backbutton").on('click', ko.utils.unwrapObservable(valueAccessor()));
        }
        valueAccessor().subscribe(setBackBind);
    }
}; 
```

然后我将后退按钮设置为可观察到所需的功能`pageinit`，同时我将滑块设置为可观察

# symfony - 控制器子目录？

> ID：14498569
> 
> 赞同：5
> 
> 时间：2013-01-24T10:03:56.077
> 
> 标签：symfony

我想在我的 Symfony2 应用程序的子目录中隔离一些控制器。像这样的东西：

```
route:
  resource: "@MyBundle/Controller/Admin/"
  type:     annotation
  prefix:   /admin/ 
```

在这个目录中有 6 个控制器类。我可以单独导入这些，但这不实用...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-18T20:38:01.673

我使用它，其中包括该文件夹中的每个控制器：

```
core:
  resource: "@AppCoreBundle/Controller"
  type: annotation 
```

相同的代码适用于子文件夹：

```
core_admin:
  resource: "@AppCoreBundle/Controller/Admin"
  type: annotation 
```

在 Controller 文件夹中创建子文件夹来拆分公共控制器和管理控制器是完全可以的。

当然，您可以将它们一一包括在内，但这非常乏味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T14:20:40.000

你不需要做任何特别的事情，下面的代码**包括**子目录，比如

```
/Controller/admin/ 
```

例如。

```
app:
    resource: "@AppBundle/Controller/"
    type:     annotation 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-01-24T12:16:49.737

这样做不是很好的做法。如果您真的想隔离这些东西，为什么还要制作额外的捆绑包。

然后，您可以将它们作为服务并从您想要的任何地方访问

见这里[http://symfony.com/doc/2.0/cookbook/controller/service.html](http://symfony.com/doc/2.0/cookbook/controller/service.html)

# android - org.xmlpull.v1.XmlPullParserException “无效的可绘制标签位图”

> ID：14498572
> 
> 赞同：3
> 
> 时间：2013-01-24T10:03:59.773
> 
> 标签：android

好吧，这很奇怪。

我的一项活动收到此错误，奇怪的是每个活动都使用了位图！我什至不知道如何重现异常，它对我（以及我认为的其他人）来说工作正常。

这是整个堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{it.enrichman.bolloauto/it.enrichman.bolloauto.activities.ArchivioActivity}: android.view.InflateException: Binary XML file line #15: Error inflating class android.widget.ListView
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
at android.app.ActivityThread.access$1500(ActivityThread.java:135)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #15: Error inflating class android.widget.ListView
at android.view.LayoutInflater.createView(LayoutInflater.java:518)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:250)
at android.app.Activity.setContentView(Activity.java:1742)
at it.enrichman.bolloauto.activities.ArchivioActivity.onCreate(ArchivioActivity.java:36)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
... 22 more
Caused by: android.content.res.Resources$NotFoundException: File res/drawable/backrepeat.xml from color state list resource ID #0x7f020075
at android.content.res.Resources.loadColorStateList(Resources.java:1855)
at android.content.res.TypedArray.getColor(TypedArray.java:319)
at android.widget.AbsListView.<init>(AbsListView.java:632)
at android.widget.ListView.<init>(ListView.java:164)
at android.widget.ListView.<init>(ListView.java:160)
... 25 more
Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #2: invalid drawable tag bitmap
at android.content.res.ColorStateList.createFromXmlInner(ColorStateList.java:146)
at android.content.res.ColorStateList.createFromXml(ColorStateList.java:129)
at android.content.res.Resources.loadColorStateList(Resources.java:1852)
... 29 more 
```

“缺失”资源是这个（在可绘制文件夹内）：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/bg"
        android:tileMode="repeat" /> 
```

“bg”drawable 在 drawable-hdpi 内部（可能是个问题？），但正如我所说，它在每个活动中都用作背景！

在布局设置期间调用错误：

```
setContentView(R.layout.archivio); 
```

xml 布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="BLABLABLA"
            android:id="@+id/archivioTextView" android:layout_gravity="center_horizontal"
            android:gravity="center_horizontal" android:textIsSelectable="false" android:layout_marginTop="10dp"
            android:layout_marginBottom="10dp" android:layout_marginRight="30dp" android:layout_marginLeft="30dp"/>
    <ListView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/listaVeicoli" android:layout_gravity="center" android:drawSelectorOnTop="false"/>
</LinearLayout> 
```

（一些无用的语句是IntelliJ的设计师放的！）

我一直在寻找类似的问题，但我没有像 @+id/list 这样的“奇怪” id 或其他用户遇到的其他问题..

对此有什么帮助吗？我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T00:20:53.303

最后，我终于找到了解决方案。我尝试过使用不同的模拟器，但只有在 API 10 (2.3.3) 或更低版本时才会出现这种崩溃。环顾 xmls 并尝试做不同的事情（也复制 bg drawable 到处，或将 id 更改为我的列表）我在我的自定义主题中发现了这些奇怪的东西：

```
<item name="android:windowBackground">@drawable/backrepeat</item>
<item name="android:colorBackground">@drawable/backrepeat</item> 
```

对于较新的 android 版本，这似乎不是问题，但对于较旧的版本是。

只需删除 colorBackground 定义（可能应该只是一种颜色），就是这样！

我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:24:34.917

在**res**文件夹中创建一个**可绘制**文件夹。试着把你的背景放在**"res/drawable/"****里面**。

 ******希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:31:34.920

将您的选择器放入`res/drawable`文件夹中，并将`Listview`id 指定为`android:id="@+android:id/list"`.

我希望它会帮助你。

谢谢。******

# ubuntu - wkhtmltopdf 在 Ubuntu 12.04 64bit 上给出 Seg Fault 错误

> ID：14498573
> 
> 赞同：1
> 
> 时间：2013-01-24T10:04:02.540
> 
> 标签：ubuntu, drupal-7, segmentation-fault, pdf-generation, wkhtmltopdf

我正在寻找一些帮助来弄清楚为什么我不能让 wkhtmltopdf 按预期工作。

我让它在我的开发机器上运行，这是安装相同软件包的相同版本的 ubuntu。除了硬件，我看不到任何其他区别。

我遵循了来自各种来源的一些建议（Drupal.org 和 wkhtmltopdf 的 code.google.com 页面），而且大部分只是使用不同版本的建议。

我使用了下载页面上列出的所有版本以及 32 位和 64 位版本，每个版本都有相同的错误。Syslog 没有显示任何有意义的错误。要检查我运行“wkhtmltopdf --version”的库，这应该只报告文件版本。只有 Dev 机器提供了答案。生产服务器只是 Seg Faults。

我正在使用静态文件，因为它仅在单个站点上使用。我考虑过安装这个包，甚至编译它，但那是一个产品服务器，我目前没有信心这样做。

目前，我只是在寻找有关如何解决此问题的建议。我已经尝试将 dompdf 作为 php 库，但这只会生成一个没有内容的白页 pdf。我在其他地方使用过 dompdf，但在这种情况下生成模板的方式并没有给我需要的结果。我可能会尝试其他库，但在 Dev 和 Production 中进行测试似乎会给出不同的结果，即使我已经尝试让环境保持同步。

提前感谢您提供的任何帮助和信息。

我目前掌握的信息：

产品和开发：

```
Ubuntu 12.04.1 LTS "precise" 
```

开发：

```
Linux 3.2.0-35-generic #55-Ubuntu SMP Wed Dec 5 17:42:16 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

产品：

```
Linux 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

系统日志中的错误：

```
Jan 23 15:19:55 37 kernel: [13326706.768842] wkhtmltopdf-i38[14406]: segfault at 0 ip 00000000013d7142 sp 00000000ffadeaa0 error 4 in wkhtmltopdf-i386[c01000+7d7000]
Jan 23 15:26:53 37 kernel: [13327124.646237] wkhtmltopdf-amd[17411]: segfault at 200 ip 0000000000000200 sp 00007fff175f42c8 error 14 in wkhtmltopdf-amd64[400000+7eb000] 
```

# java - 得到 在wsdl中

> ID：14498574
> 
> 赞同：0
> 
> 时间：2013-01-24T10:04:07.550
> 
> 标签：java, web-services, xsd

目前我的 WSDL 有`<xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified"`

我想让它成为`<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"`

有人可以告诉实现它的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:18:12.497

`Example 2`在[这](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlSchema.html)可以帮助你。您必须指定注释，例如：

```
xmlns = { @javax.xml.bind.annotation.XmlNs(prefix = "po", 
               namespaceURI="http://www.example.com/myPO1") } 
```

在 @XmlSchema 或您提供架构配置的任何地方。

**编辑 ：**

另外，让我向您展示两个 XML 模式的示例：

在第一种情况下，XML 命名空间以`wsdl`. 这是一个例子`qualified`。

```
<wsdl:definitions xmlns:wsdl='http://www.w3.org/2002/06/wsdl' >
  <wsdl:message />
</wsdl:definitions> 
```

但是，在这种情况下，XML 命名空间没有前缀。这是一个例子`unqualified`。

```
<definitions xmlns='http://www.w3.org/2002/06/wsdl' >
  <message />
</definitions> 
```

# gwt - 浏览器删除文件事件 GWT

> ID：14498575
> 
> 赞同：2
> 
> 时间：2013-01-24T10:04:11.300
> 
> 标签：gwt, browser, gxt

我的浏览器删除文件的行为有问题。我有一个“ContentPanel”，其中包含一个文件拖放区域。当我拖放文件时，一切正常，但是当我将文件拖放到“ContentPanel”内的其他位置时，浏览器会打开文件（默认行为）。

我怎样才能避免这种情况？在最后一种情况下不应该发生任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:54:42.503

需要 2 个放置处理程序，一个用于内容面板，另一个用于拖放区域。

```
public FileUploadWidget() {

    RootPanel rootPanel = RootPanel.get();
    DropHandler dropHandlerRoot = new DropHandler(rootPanel);

    dropHandlerRoot.addFileEventHandler(new FileEventHandler() {
        @Override
        public void onFiles(FileEvent event) {
            // Nothing to do, avoid the default browser 
            // behaviour which is to open the file
        }
    });

    // Drag and drop area handler
    dropHandler = new DropHandler(dragAndDropArea);
    dropHandler.addFileEventHandler(new FileEventHandler() {
        @Override
        public void onFiles(FileEvent event) {
            JsArray<File> files = event.getFiles();

            for (int i = 0; i < files.length(); ++i) {
                File file = files.get(i);
                addFile(file);
                handleSizeChange();
            }
        }
    });
} 
```

# javascript - 如何找到具有特定属性的所有元素？

> ID：14498576
> 
> 赞同：1
> 
> 时间：2013-01-24T10:04:12.507
> 
> 标签：javascript, jquery

我的页面上有许多具有`lang`属性的元素。如何仅选择具有`lang`属性的元素？

IE

```
<div lang="english">Test</div>
<span lang="english">is cool</span>
<span lang="anotherlanguage">is also good</span> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:05:00.370

您需要使用[属性选择器](http://api.jquery.com/has-attribute-selector/)。

**[现场演示](http://jsfiddle.net/Fxjx2/1/)**

```
var res = $('[lang=english]') 
```

[**您可以使用each()**](http://api.jquery.com/each/)遍历每个项目[](http://api.jquery.com/each/)

 **```
$('[lang=english]').each(function () {
   alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:41:17.313

虽然您已经对这个问题有一个（接受的）答案，但我想我会发布一个额外的答案，以更完整地回答所提出的问题，同时涵盖我在对其他答案的评论中提出的各种问题。

我在回答中讨论的每种方法都将应用于以下 HTML 标记：

```
<div class="langContainer">
    <span lang="english">Some text in an English span</span>
    <span lang="french">Some text in an French span</span>
    <span lang="algerian">Some text in an Algerian span</span>
    <span lang="urdu">Some text in an Urdu span</span>
</div>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

<ol>
    <li>List item one</li>
    <li>List item two</li>
    <li>List item three</li>
    <li>List item four</li>
    <li>List item five</li>
    <li>List item six</li>
    <li>List item seven</li>
</ol>

<ul class="langContainer">
    <li><div lang="english">Some text in an English div</div></li>
    <li><div lang="french">Some text in an French div</div></li>
    <li><div lang="algerian">Some text in an Algerian div</div></li>
    <li><div lang="urdu">Some text in an Urdu div</div></li>
</ul> 
```

使用属性设置元素样式的最简单方法`lang`是 CSS，例如：

```
:lang(english),
:lang(french) {
    color: #f90;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/1/)。

以上将设置属性等于or的*所有*元素。当然，这是 CSS，可以修改选择器以仅应用于具有这些属性的特定元素：`lang``english``french`

```
span:lang(english),
div:lang(french) {
    color: #f90;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/2/)。

正如您所想象的那样，这设置了一个属性等于的样式`span`和一个属性`lang`等于`english`的`div`元素。`lang``french`

*不幸的是，在不*传递值的情况下使用`:lang()`伪类不会选择仅具有属性的元素。*`lang`*

 *但是，使用 CSS 属性选择器`[lang]`会：

```
[lang] {
    color: #f90;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/3/)。

当然，该选择器中没有元素意味着通用选择器，因此为了更*准确地*选择，修改选择器以应用于特定元素类型 ( [`span[lang]`](http://jsfiddle.net/davidThomas/uLqmS/4/)) 或特定父元素 ( [`div.langContainer [lang]`](http://jsfiddle.net/davidThomas/uLqmS/5/)) 中的元素可能是明智的。

但是，对于其他目的，例如修改内容或元素节点本身，使用 jQuery，您可以使用相同的选择器。

在下面的示例中，我将把元素的原始文本分配给 jQuery 的`data`对象（变量名称为`original-text`）并替换元素的可见文本（作为将匿名函数传递给方法的演示，以避免遍历匹配的元素`each()`，但如果你愿意，你可以这样做），考虑到这一点，我将只发布选择器：

```
// selecting elements with lang equal to 'english':
$(':lang(english)') 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/6/)。

```
// selecting all elements with the lang attribute:
$('[lang]') 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/8/)。

```
// specifying the element-type:
$('span[lang]') 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/7/)。

```
// specifying the element-type:
$('div.langContainer [lang]') 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/9/)。

*顺便说一下，从jQuery*方法的[jsPerf 比较](http://jsperf.com/comparison-of-selector-approaches)看来，定义元素类型（例如更快）。`$('span[lang]')`

 *使用`each()`与传递给方法的匿名函数的简要讨论。

使用这种方法完全取决于你想做什么，但是如果你想，例如，修改每个匹配元素的文本，以下两种方法是等效的：

```
$('span[lang]').each(function(i){
    $(this).text('matched element ' + i);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/10/)；

```
$('span[lang]').text(function(i) { return 'matched element ' + i; }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uLqmS/11/)；

但是，两者运行所需的时间也没有显着差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:06:02.913

```
$('*[lang]').each(function () {
   //Your Code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:08:18.210

尝试这个

```
$('[lang="english"],[lang="anotherlanguage"]') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:14:22.130

您可以通过 HTML5 data-* 属性执行此操作。像这样设置属性

```
``

```

要获取数据语言设置为“英语”的所有元素，请使用：

```
document.querySelectorAll('[data-lang="english"]'); 
```****

# button - 如何使链接 emacs 按钮在另一个缓冲区中单击鼠标时起作用？

> ID：14498578
> 
> 赞同：2
> 
> 时间：2013-01-24T10:04:19.790
> 
> 标签：button, emacs, elisp, emacs24

我使用 GNU emacs-24。我制作这样的按钮：

```
(defun go-click (button)
  (print (button-get button 'point))
  (let ((win (get-buffer-window (button-get button 'buffer))))
    (if win
        (progn
          (select-window win)
          (goto-char (button-get button 'point)))
      (message "open a window with the location"))))

(let ((p (point)) (buf (current-buffer)))
  (with-current-buffer (get-buffer "yyy")
    (insert-button "go" 'action #'go-click
                   'follow-link t
                   'point p
                   'buffer buf))) 
```

我在 onw 窗口的***scratch*缓冲区和另一个带有缓冲区****yyy**的窗口中有这段代码。我 eval-current-buffer 的重点是，比如在 #'go-click 位置。出现按钮*进入***yyy**。

如果我现在单击该按钮，它会按预期打印数字，使***scratch***按预期激活，但不会移动 #'go-click 位置上的点。

*但是，如果我通过光标键在go*按钮上定位点，然后按 Enter，它会按预期工作（移动指向 #'go-click positoin，不管，我之前将它留在***scratch***中的位置）。

如何使其适用于键盘输入和鼠标单击场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:10:14.977

这是小补丁：

```
(defun go-click (button)
  (print (button-get button 'point))
  (let ((win (get-buffer-window (button-get button 'buffer)))
        (cur-win (get-buffer-window (current-buffer))))
    (select-window cur-win)
    (if win
        (progn
          (select-window win)
          (goto-char (button-get button 'point)))
      (message "open a window with the location")))) 
```

# c# - ASP.NET MVC 表单验证每次都失败

> ID：14498580
> 
> 赞同：2
> 
> 时间：2013-01-24T10:04:19.563
> 
> 标签：c#, asp.net, html, .net, asp.net-mvc

成功验证表单后，我无法重定向表单。请帮我。我对 ASP.NET 和 MVC 概念非常陌生。我在下面给出了模型、视图和控制器。索引页面显示登录信息，我将表单提交到同一页面。如果没有错误，我必须将表单重定向到不同的页面。这就是我想要做的。但即使我提供了有效的登录信息，表单也不会重定向到指定的页面。

**模型**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace MyProject.Models
{
  public class LoginModel
  {  
    [Required(ErrorMessage = "UserCode is Required.")]
    public string UserCode
    {
        get;
        set;
    }

    [DataType(DataType.Password)]
    [Required(ErrorMessage = "Password is Required.")]
    public string Password
    {
        get;
        set;
    }
  }
} 
```

**控制器**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MyProject.Models;

namespace MyProject.Controllers
{
[HandleError]
  public class HomeController : Controller
  {
    // GET
    public ActionResult Index()
    {
        return View();
    }

    // POST
    [HttpPost]
    public ActionResult Index(LoginModel model)
    {
        if (ModelState.IsValid)
        {
            RedirectToAction("Transfer", "Home");
        }

        return View(model);
    }

    public ActionResult UpgradeBrowser()
    {
        return View();
    }
  }
} 
```

**看法**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master"   Inherits="System.Web.Mvc.ViewPage<MyProject.Models.LoginModel>" %>

<div id="LoginBox">
<% using (Html.BeginForm("Index", "Home", FormMethod.Post, new { id = "FrmLoginUser" }))
   { %>
    <table class="TblForm">
        <tr>
            <td><label for="UserName">UserCode</label></td>
            <td><%= Html.TextBox("UserCode", "", new { id = "UserCode" })%></td>
            <td><%= Html.ValidationMessage("UserCode", new { @class = "ValidationError" })%></td>
        </tr>
        <tr>
            <td><label for="Password">Password</label></td>
            <td><%= Html.Password("Password", "", new { id="Password" })%></td>
            <td><%= Html.ValidationMessage("Password", new { @class = "ValidationError" })%></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" value="Login" /></td>
        </tr>
    </table>
<% } %>

</div> <!-- #LoginBox --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:06:00.633

您必须**实际返回**`RedirectToAction`调用结果。更改`RedirectToAction`为`return RedirectToAction`在您的控制器`HttpPost`方法中：

```
[HttpPost]
public ActionResult Index(LoginModel model)
{
    if (ModelState.IsValid)
    {
        return RedirectToAction("Transfer", "Home");
    }

    return View(model);
} 
```

# bash - 来自 shell 变量的 shebang 脚本解释器

> ID：14498588
> 
> 赞同：5
> 
> 时间：2013-01-24T10:04:48.187
> 
> 标签：bash, shell

我有许多脚本需要指定运行它们的 python 二进制文件：

```
#! /home/nargle/python/bin/python2.6 
```

我需要调整这些脚本以在两个不同的站点上工作。许多工具安装在不同的地方，因此在新站点 2 处，脚本需要从以下位置开始：

```
#! /user/nargle/python/bin/python2.6
.. 
```

我想用为每个站点设置不同的环境变量替换直接引用的路径。我想要的是这个工作：

```
#! $MY_PYTHON_PATH 
```

但事实并非如此！我对在哪里研究这个有点模糊。是检测到“#！”的执行 shell（无论是 bash、csh 还是其他）在脚本的开头（无论是 bash、python 还是其他）并启动解释器/shell 来运行它？

我觉得必须有某种方法可以做到这一点。请指教！

哦，是的，还有一个限制：**我们不能为此使用路径**。这似乎是一个愚蠢的限制，但这是针对有许多用户的大型环境

环境是 RHEL 5.7。

**编辑**有人建议使用 shell 脚本，这是当前的计划：它工作正常：

```
 $MY_PYTHON_PATH some_script file.py $@ 
```

问题在于我们有很多人在使用 python 文件，并且有很多需要更改的自动化测试。如果必须这样做，就必须这样做，但如果可能的话，我想尽量减少改变工作方式对许多人的影响。

**编辑**也可以在两个系统上相同的位置有一个链接，并且链接到每个系统上不同目标中的真实二进制文件。这是相当可行的，但似乎有点混乱：我们使用 linux 的“模块”包来为许多工具设置环境变量，如果我们可以从我们的模块文件中获取 python 路径，那就太好了。

**编辑**这不是答案，但这感觉就像我正在寻找的那种邪恶黑客：http: [//docs.nscl.msu.edu/daq/bluebook/html/x3237.html](http://docs.nscl.msu.edu/daq/bluebook/html/x3237.html) ..参见“示例4-2 . #! 用于 bash 和 tclsh 的行"

**编辑**我希望这可能有效，但它没有：

```
!# /usr/bin/env PATH=$PATH:$MY_PYTHON_PATH python2.6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:08:25.587

常见的解决方案是将shebang更改为

```
#!/usr/bin/env python2.6 
```

然后，只需安排您的 $PATH 指向每台机器上正确的 python2.6。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:19:12.223

编写一个包装外壳脚本。如果你有`script.py`，写一个`script.py.sh`具有以下内容的：

```
#!/bin/bash
PYTHON_SCRIPT=$( echo "$0" | sed -e 's/\.sh$//' )
exec $MY_PYTHON_PATH $PYTHON_SCRIPT "$@" 
```

*免责声明：这未经测试，只是从我的脑海中写下来。*

现在只需在每台机器上设置您的 MY_PYTHON_PATH，然后调用`script.py.sh`而不是`script.py`.

**总结**这个解决方案只是次优的，因为它需要将大量脚本调用从 更改`script.py`为`script.py.sh`，如果可能的话，应该避免这种情况。

* * *

# 选择

用于`env`调用 python-finder 脚本，该脚本只调用包含在`$MY_PYTHON_PATH`. python-finder 脚本必须位于两台机器上的相同位置，如有必要，请使用符号链接。

```
#!/usr/bin/env /usr/local/bin/python-finder.sh 
```

python-finder.sh 的内容：

```
#!/bin/bash
exec $MY_PYTHON_PATH "$@" 
```

这是有效的，因为对于解释器脚本（以 shebang 开头的那些），[execve](http://linux.die.net/man/2/execve)调用解释器并将文件名传递给 env，然后将其传递给它调用的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:10:50.177

我很傻：对 env 使用变量扩展确实有效。

```
#! /usr/bin/env PATH="$PATH:$MY_PYTHON_PATH" python2.6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:18:16.577

我们能做的：

```
#!/bin/bash
"exec" "python" "$0"

print "Hello World" 
```

来自[http://rosettacode.org/wiki/Multiline_shebang#Python](http://rosettacode.org/wiki/Multiline_shebang#Python)

# xml - Jaxb2Marshaller 在存在“&”时无法解组

> ID：14498589
> 
> 赞同：1
> 
> 时间：2013-01-24T10:04:49.690
> 
> 标签：xml, web-services, spring, jaxb2

我正在使用 org.springframework.oxm.jaxb.Jaxb2Marshaller 来解组我的请求 xml。即使编码在序言中设置为，由于请求中存在“&”（与号），解组失败

请求XML -

 `````
<?xml version="1.0" encoding="utf-8"?><createaccountrequest><username>Test&jsongg</username><userpassword>12345</userpassword></createaccountrequest>

````  `我得到的例外如下

```
    500内部服务器错误

    org.springframework.http.converter.HttpMessageNotReadableException：无法解组到 [class com.marketplace.system.customer.service.component.request.vo.AccountRequestVO]：null；嵌套异常是 javax.xml.bind.UnmarshalException
     - 有关联的例外：
    [org.xml.sax.SAXParseException：对实体“jsongg1h61”的引用必须以';'结尾 分隔符。]
        在 org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter.readFromSource(Jaxb2RootElementHttpMessageConverter.java:82) ~[spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
        在 org.springframework.http.converter.xml.AbstractXmlHttpMessageConverter.readInternal(AbstractXmlHttpMessageConverter.java:61) ~[spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
        在 org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:153) ~[spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
        在 org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:120) ~[spring-webmvc-3.1.0.RELEASE.jar:3.1.0.RELEASE]

```

任何指针都会有很大帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:15:29.387

解析器错误是正确的

```
<username>Test&jsongg</username> 
```

不是格式良好的 XML。如果您想在 XML 中元素的内容中使用与号，则需要将其转义为`&amp;`.

围绕 XML 字符数据的规则——哪些字符可以按原样使用，哪些需要转义（以及如何转义），以及即使以转义形式也完全禁止使用——很复杂，如果你想生成 XML，你应该使用XML 库这样做而不是尝试手动完成。也就是说，您可以使用 CDATA 实现您想要的。以下*是*格式良好的：

```
<username><![CDATA[Test&jsongg]]></username> 
```

以开头`<![CDATA[`和结尾的文本块`]]>`被解析器视为纯文本，与号、小于号等失去了它们的特殊含义。这里要注意的是 CDATA 部分不嵌套，因此如果您在 CDATA 中包装的值包含三个字符的子字符串`]]>`，那么需要通过将其替换为类似`]]]]><![CDATA[>`(the `]]`, then CDATA 部分的结尾并立即开始另一个，继续`>`)。``

# wpf - 如何使用 xaml 魔法

> ID：14498590
> 
> 赞同：0
> 
> 时间：2013-01-24T10:04:50.757
> 
> 标签：wpf, xaml, ribbon

我很难弄清楚在哪里使用什么 xaml 关键字，因为它很难弄清楚它想要什么层次结构。似乎有一些关于如何以及在何处使用属性、属性或子节点的宏伟设计。

```
<Node Attribute="True">
  <Node.Property />
</Node> 
```

我发现这个漂亮的页面解释了所有的[功能区菜单属性](http://msdn.microsoft.com/en-us/library/ee354414.aspx)，但不知道如何在 xaml 中使用它们。经过半小时的搜索和尝试，我设法在功能区菜单按钮中显示了一个图标。

1.  这一切背后的逻辑是什么以及如何弄清楚在哪里使用什么？

2.  如何将功能区菜单与应用程序栏（大多数 Windows 应用程序的顶部栏）合并？所以我得到了一个不错的功能区应用程序菜单，就像在示例中一样。

3.  有没有办法关闭 xaml 后台编译？我会为此牺牲智能感知。

因为 xaml 编辑器的性能很差，所以有很多建议，但到目前为止都没有。

编辑：我知道 xaml 语法，但没有提示使用什么层次结构。因此，如果我找到我想要使用的对象（因为它们都可用），它只会说我使用了错误的对象，它应该询问它想要使用的对象类型。

同样在正常编程中，当您使用引用时，您始终可以使用其中的所有类。使用 xaml 我们必须突然知道我们的类来自哪个引用，它也不会为您找到引用，您必须尝试所有引用以查看它们是否具有某个类或找到代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:55:45.863

好问题。在#1 问题中确切地了解您所要求的内容有点困难，但我会简要介绍一下。我确实有你的＃2问题的答案。对于你的#3，我没有答案。

> “1.这一切背后的逻辑是什么，如何弄清楚在哪里使用什么？”

就像 Clemens 提到的那样，[XAML 概述](http://msdn.microsoft.com/en-us/library/ms752059.aspx)在解释事情方面做得很好。我猜您要问的主要问题之一基本上是“何时使用属性语法与属性元素语法”。从那个文档：

> 对于对象元素的某些属性，属性语法是不可能的，因为提供属性值所需的对象或信息不能在属性语法的引号和字符串限制内充分表达。对于这些情况，可以使用称为属性元素语法的不同语法....

现在关于你问题的这一部分......

> “同样在正常编程中，当你使用引用时，你总是可以使用其中的所有类。使用 xaml，我们必须突然知道我们的类来自哪个引用，它也不会为你找到引用，你要么必须尝试所有引用看看他们是否有某个类或找到一个代码示例。”

如果您的部分问题更多是关于如何更轻松地处理您的 XAML（或更合适的 xmlns）命名空间，以便更容易在 XAML 中消除引用，那么您可能会发现一种有用[的技术。](https://stackoverflow.com/a/14611738/718325)它使您可以合并命名空间，以便您可以使用更少的 XAML 命名空间前缀（如果您将这种技术发挥到极致，甚至可以不使用命名空间前缀）。

> “2\. 如何将功能区菜单与应用程序栏（大多数 Windows 应用程序的顶部栏）合并？所以我得到了一个不错的功能区应用程序菜单，就像在示例中一样。”

本质上，您似乎在问如何：（a）将窗口镀铬区域（Aero glass 区域）向下扩展到窗口的客户端部分（您的应用程序通常可以放置东西的部分）和（b）扩展窗口的客户端部分向上进入窗口镶边区域。如果你能同时做*这两*件事，那么你最终会得到一些看起来像微软办公产品或现代网络浏览器的东西。幸运的是，有[WPF Shell 集成库](http://archive.msdn.microsoft.com/WPFShell)可以帮助您完成这两件事。我发现[了这个博客](http://blogs.msdn.com/b/llobo/archive/2010/05/10/wpf-shell-integration-library.aspx)和[这个博客](http://blogs.msdn.com/b/wpfsdk/archive/2010/08/25/experiments-with-windowchrome.aspx)（以及他们提供的源代码）很好的指南，用于开始使用 WPF Shell 集成库。

使用这个库，我能够制作这个窗口（除了 Aero 变色能力，这是一个完全不同的话题）。请注意，我提到的两种品质都在这里起作用（TabControl 显示在普通窗口镀铬顶部栏区域中，而窗口镀铬 Aero 玻璃正在显示在普通客户区域中）：

![窗口 Chrome 示例](../Images/a754ac687460b863af97a623ae3426d7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:39:13.413

这是我的看法

> **1）**这一切背后的逻辑是什么以及如何弄清楚在哪里使用什么？

无论你能适应什么，都`""`可以像这样内联：

```
<TextBlock Text="{Binding Name}" /> 
```

无论什么都不能，走元素的方式：

```
<TextBlock>
    <TextBlock.Text>
        <MultiBinding StringFormat="{}{0} ({1})">
            <Binding Path="Name" />
            <Binding Path="Gender" />
        </MultiBinding>
    </TextBlock.Text>
</TextBlock> 
```

> **2)**如何将功能区菜单与应用程序栏（大多数 Windows 应用程序的顶部栏）合并？所以我得到了一个不错的功能区应用程序菜单，就像在示例中一样。

你会在 google 周围找到或多或少复杂的 mumbo jumbo，这就是它的精髓：

```
<Window ...
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ...>
    <!-- Fill it up with a PNG image if you want to play with transparency -->
</Window> 
```

然后将功能区设为顶部元素，并重新创建关闭/最大化按钮

> **3）**有没有办法关闭xaml后台编译？我会为此牺牲智能感知。

是的，它叫做[记事本++](http://notepad-plus-plus.org/)

# python - Python 初学者 - 尝试使用带有打印列表的 sys.stdout.write 输出

> ID：14498595
> 
> 赞同：1
> 
> 时间：2013-01-24T10:05:01.080
> 
> 标签：python, stdout

我要做的是在**My code**`sys.stdout.write`之后的末尾输出打印列表的内容`ScriptRes:OK:`

 **```
print list[0]['VersionString']
sys.stdout.write("ScriptRes:OK:") 
```

我相信这可能很容易做到，但我的谷歌搜索是空白！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:09:38.600

这个问题很难理解，但听起来你想要在 OK: 之后立即打印第一次打印的结果。

不知道为什么要混合 print 和 sys.stdout.write （作为初学者，除非您知道原因，否则您可能不应该这样做）。

所以一种明显的方法是`print "ScriptRes:OK:", list[0]['VersionString']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:30:42.480

我想你的列表中有一本字典，试试这个

sys.stdout.write('ScriptRes:OK:%s' %list[0]['VersionString'])**

# python - 如何使用python打开一个新的excel表？

> ID：14498597
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:05:03.287
> 
> 标签：python, excel

我想使用 Python 打开一个 Excel 工作表。请告诉我正确的 python 脚本来打开它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:09:49.583

您可以使用一个名为 xlrd 的模块。我自己用的：

```
from xlrd import open_workbook
def excel_opener(file):
    wb = open_workbook(file)
    for sheet in wb.sheets():
        for c in s.row_values(0):
            for cell in s.col(y)[1::]:
                do_something(cell)
    return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:03:15.737

OpenPyxl、PyXll、DataNitro……你可以选择）））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:46:51.403

# 导入 xlwt

```
import xlwt 
```

# 创建一个新的工作簿对象

```
workbook = xlwt.Workbook() 
```

# 添加工作表

```
worksheet = workbook.add_sheet('Statistics') 
```

# 添加一些值

```
for x in range(0, 10):
    for y in range(0,10):
        worksheet.write(x,y,x*y)

workbook.save('statistics.xls') 
```

# javascript - for in and objects inside 对象

> ID：14498598
> 
> 赞同：0
> 
> 时间：2013-01-24T10:05:03.967
> 
> 标签：javascript, json, object

我有一个来自 API 的 json 响应，它返回一个包含对象的对象

就像是：

```
{Object}->{results}->{manyObjects} 
```

运行时：

```
var list = data.results.list;

for(val in list){
    console.debug(typeof val);
} 
```

控制台返回字符串而不是对象。

有人可以帮我扫描这些物体吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:07:23.873

在您的代码`val`中只是对象内部的*键，***而不是**键指向的值。试试这个：

```
for(var val in list) {
    console.debug(typeof list[val]);
} 
```

尽管考虑到这一点，您可能想要重命名`val`为其他名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:07:40.730

for in 循环将返回列表对象的所有属性名称。您必须在对象上引用这些属性才能接收到它们的句柄。

```
var list = data.results.list;

for(val in list){
    console.debug(typeof list[val]);
} 
```

# iphone - 通过在变量中动态存储[控制器类]来创建类的对象

> ID：14498599
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:05:09.903
> 
> 标签：iphone, ios, objective-c, ios5, ios6

```
UINavigationController *homeNavController;
Class class_ = [YBHomePageViewControlleriPad class];
if(iPhone){
    class_ = [YBHomePageViewControlleriPhone class];
}
class_ *homeController = [[class_ alloc] initWithNibName:NSStringFromClass(class_) bundle:nil];
homeNavController = [[UINavigationController alloc] initWithRootViewController:homeController]; 
```

显示 - “使用未声明的标识符 homeController”。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:09:54.293

假设您的类都是 UIViewController 的实例，只需将 homeController 声明为 UIViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:13:43.797

您不能将 className 分配给字符串并形成该类型的对象。

您需要使用一些先进且困难的方式来执行：

1.  Obj-C 运行时。

2.  “反射”它启用类和对象的运行时自省。

3.  IBOutletCollection。

# visual-c++ - mfc如何在命令窗口中编写命令

> ID：14498602
> 
> 赞同：0
> 
> 时间：2013-01-24T10:05:14.997
> 
> 标签：visual-c++, mfc, pipe, windows-console

我需要使用 C++ 代码在命令窗口中编写一些命令。如何实施。我已经尝试过使用`CreateProcess`功能，但它似乎有些错误。请参考我下面的代码：

```
 STARTUPINFO sInfo = {0};
sInfo.cb = sizeof(sInfo);
PROCESS_INFORMATION pInfo = {0};

CreateProcess("C:\\WINDOWS\\System32\\cmd.exe",""0,0,TRUE,
    NORMAL_PRIORITY_CLASS,0,0,&sInfo,&pInfo); 
```

它成功打开命令窗口。我的疑问是如何通过其中的代码编写命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:28:01.663

首先，您不需要**创建**一个单独的进程来将文本输出写入控制台窗口。

这取决于你想写什么以及如何写。您可以自己创建一个控制台应用程序，或者自己**创建一个控制台**，然后附加到当前进程。您需要使用相同的**管道**并将输出重定向到给定的管道（即将数据发送到管道）。在管道的另一端，您将读取文本/缓冲区并将输出呈现在您想要的任何位置。

这些文章可能会有所帮助：

*   [GUI 程序的控制台输出](http://www.codeproject.com/Articles/10073/Console-Output-from-a-GUI-program)
*   [实时控制台输出重定向](http://www.codeproject.com/Articles/16163/Real-Time-Console-Output-Redirection)

由于您的问题不是很清楚，这只是假设。或者，您是否在玩控制台本身——比如改变颜色、尺寸等？

# ios - 标注按钮崩溃应用程序 - MapKit

> ID：14498614
> 
> 赞同：1
> 
> 时间：2013-01-24T10:05:37.730
> 
> 标签：ios, ios6, mkmapview, mkannotation, mkannotationview

> UICalloutView willRemoveSubview:]: 消息发送到释放实例；

这只发生在我点击标注按钮时，但不是在第一次和第二次点击时，而是从第三次点击。所以我点击自定义`AnnotationView`，标注弹出，这很好。我再次点击它，标注弹出，一切都很好。我点击另一个，砰砰砰的消息。只有将正确的附件视图设置为按钮时才会发生这种情况。

要记住的一个关键方面......只发生在 iOS 6 中......（去图）。

我真的坚持这个 - 一些帮助将不胜感激。

```
if ([annotation isKindOfClass:[RE_Annotation class]])
{
    RE_Annotation *myAnnotation = (RE_Annotation *)annotation;

    static NSString *annotationIdentifier = @"annotationIdentifier";

    RE_AnnotationView *newAnnotationView = (RE_AnnotationView *)[mapViews dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];

    if(newAnnotationView)
    {
        newAnnotationView.annotation = myAnnotation;
    }
    else
    {
        newAnnotationView = [[RE_AnnotationView alloc] initWithAnnotation:myAnnotation reuseIdentifier:annotationIdentifier];
    }

    return newAnnotationView;
}
return nil; 
```

另外，这是我的`initwithannotation`方法：

```
- (id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier
{

    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if(self)
    {

    RE_Annotation *myAnnotation = annotation;

    self = [super initWithAnnotation:myAnnotation reuseIdentifier:reuseIdentifier];

    self.frame = CGRectMake(0, 0, kWidth, kHeight);

    self.backgroundColor = [UIColor clearColor];

    annotationView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"map_pin_pink.png"]];

    annotationView.frame = CGRectMake(0, 0, kWidth - 2 *kBorder, kHeight - 2 * kBorder);

    [self addSubview:annotationView];

    [annotationView setContentMode:UIViewContentModeScaleAspectFill];

    self.canShowCallout = YES;

     self.rightCalloutAccessoryView = [[UIButton buttonWithType:UIButtonTypeInfoLight] retain]; ///if i take it out it doesnt crash the app. if i leave it it says that message
    }

    return self ;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:08:42.333

在`initWithAnnotation`方法中，有这一行：

```
self.rightCalloutAccessoryView = 
    [[UIButton buttonWithType:UIButtonTypeInfoLight] retain]; 
///if i take it out it doesnt crash the app. if i leave it it says that message 
```

通过“它”，您必须指的是`retain`，这意味着该应用程序未使用 ARC。

在此基础上，您应该进行以下更正：

*   在`viewForAnnotation`中，您需要在分配`autorelease`+ 初始化时查看视图，否则会出现泄漏：

    ```
    newAnnotationView = [[[RE_AnnotationView alloc] 
        initWithAnnotation:myAnnotation 
        reuseIdentifier:annotationIdentifier] autorelease]; 
    ```

*   在中，在创建标注按钮时`initWithAnnotation`删除，因为返回一个自动释放的对象（并且您不想过度保留它）：`retain``buttonWithType`

    ```
    self.rightCalloutAccessoryView = 
        [UIButton buttonWithType:UIButtonTypeInfoLight]; 
    ```

另一个可能不相关的问题是，`initWithAnnotation`代码调用`super initWithAnnotation`了两次。这似乎没有必要，而且可能有害。删除第二个电话。

上述更改至少解决了所示代码的问题。但是，在应用程序的其余部分中可能存在其他类似的内存管理相关问题，这些问题仍可能导致崩溃。检查并解决 Analyzer 报告的所有问题。

关于“它只发生在 iOS 6”这一事实：iOS 6 可能不太容忍内存管理错误，或者 SDK 中的内部更改可能会更早地暴露或显示这些错误。无论如何，上述修复都是必要的。

一个不相关的点是不需要手动创建一个`UIImageView`和`addSubview`它到注释视图。您可以只设置注释视图的`image`属性。

# tridion - Tridion UI 的事件系统错误（体验管理器）

> ID：14498618
> 
> 赞同：4
> 
> 时间：2013-01-24T10:05:55.897
> 
> 标签：tridion, tridion-2011, tridion-ui, tridion-events

我们在发布页面事件时使用事件系统发布额外页面。当我们从 CME 发布页面时，它运行良好。当我们使用 Tridion UI 创建页面时，它会按预期创建和发布，但事件系统在尝试创建目标类型对象时会抛出错误。

```
 try
            {
                foreach (var t in e.Targets)
                {
                    var targets = new List<TargetType>();

                   some logic

                    targets.Add(new TargetType(t.Id, page.Session)); // error is in this line

                    PublishInstructionBase pib = e.PublishTransactions.First().Instruction;
                    PublishInstruction pi = new PublishInstruction(page.Session);
                    pi.StartAt = pib.StartAt;
                    pi.RollbackOnFailure = pib.RollbackOnFailure;

                    PublishEngine.Publish(
                        items,
                        pi,
                        targets,
                        PublishPriority.Low
                    );
                }

            } 
```

我们得到的异常是**InvalidURIException**

t**和 Session**都不是绝对不为空的，我们通过在那里写日志来验证。

请建议我们可以解决这个问题吗？

我们设法通过将代码放入 try catch 并在出现异常时手动创建目标类型来解决这个问题，因为我们知道 Tridion UI 仅在最初发布到暂存。

谢谢，维卡斯库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:13:17.097

很难说没有异常和堆栈跟踪，但我假设您需要先阅读`TargetType`而不是尝试创建它，如下所示：

```
(TargetType) page.Session.GetObject(t.Id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:37:07.113

您使用的 URI 可能不是来自同一个发布上下文，因此是无效的。

# jsf - 如果用户未登录，如何限制访问

> ID：14498626
> 
> 赞同：1
> 
> 时间：2013-01-24T10:06:20.973
> 
> 标签：jsf, authentication

我的项目有一个模板`main.xhtml`和三个视图`login.xhtml`, `dashboard.xhtml`, `new.xhtml`. 一旦我登录`login.xhtml`，`LoginBean`将验证，如果成功，则将需要`dashboard.xhtml`。如果用户需要创建一个新记录，他点击新按钮`new.xhtml`。

但问题是，如果`dashboard.xhtml`直接从浏览器请求，则无需登录即可工作。我需要检查用户登录的每个视图吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:54:39.487

听起来好像您正在进行家庭认证。在这种情况下，您还需要自制访问限制。这通常使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)来完成。

假设您在`@RequestScoped`bean 中按如下方式登录，

```
public String login() {
    User user = userService.find(username, password);
    FacesContext context = FacesContext.getCurrentInstance();

    if (user != null) {
        context.getExternalContext().getSessionMap().put("user", user);
        return "dashboard.xhtml?faces-redirect=true";
    } else {
        context.addMessage(null, new FacesMessage("Unknown login, try again."));
        return null;
    }
} 
```

然后您可以在过滤器中检查登录用户，`@WebFilter("/*")`如下所示：

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws ServletException, IOException {    
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    HttpSession session = request.getSession(false);

    User user = (session != null) ? session.getAttribute("user") : null;
    String loginURL = request.getContextPath() + "/login.xhtml";

    boolean loginRequest = request.getRequestURI().startsWith(loginURL);
    boolean resourceRequest = request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER);

    if (user != null || loginRequest || resourceRequest)) {
        chain.doFilter(request, response);
    } else {
        response.sendRedirect(loginURL);
    }
} 
```

因此请注意，当用户登录时，或者直接请求登录页面本身时，或者请求 JSF 资源（CSS/JS/图像）时，这将继续请求。

如果您使用的是容器管理的身份验证，则不需要过滤器。另请参阅[如何处理数据库中用户的身份验证/授权？](https://stackoverflow.com/questions/9965708/how-to-handle-authentication-authorization-with-users-in-a-database/)

# delphi - XE3 Visual LiveBindings：TSpinBox 和 TTrackBar (FireMonkey) 之间的双向连接

> ID：14498628
> 
> 赞同：3
> 
> 时间：2013-01-24T10:06:22.937
> 
> 标签：delphi, firemonkey, delphi-xe3, livebindings

我正在使用带有 SP1 的 Delphi XE3。我创建了一个 FireMonkey 桌面应用程序，并在主窗体上放置了一个 TSpinBox 和一个 TTrackBar。我现在已经使用 Visual Livebindings 连接了 TSpinBox 和 TTrackBar 的“Value”属性。IDE 自动创建了一个“TLinkControlToProperty”来连接它们。当我在 TTrackBar 上移动滑块时，TSpinBox 中的值会发生变化。但是当我更改 TSpinBox 中的值时，TTrackBar 的值不会更新。

如何使用 LiveBindings 将其更改为双向连接？我的目标是在 TSpinBox 的“值”发生变化时更改 TTrackBar 的“值”属性。此外，我对不使用“TSpinBox”的“OnChange”事件的解决方案感兴趣。如果不派生“TSpinBox”的后代，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:37:33.660

您必须通过 Bindinglist 添加绑定，定义 Source 和 Destination，将 Direction 设置为 dirBiDirectional 并将以下代码添加到您的源中：

```
procedure TForm1.SpinBox1Change(Sender: TObject);
begin
 BindingsList1.Notify(Sender, '');
end;

procedure TForm1.TrackBar1Change(Sender: TObject);
begin
 BindingsList1.Notify(Sender, '');
end; 
```

可以简化为

```
procedure TForm1.OneChangeEventForAllControlsUsingBindinglist1(Sender: TObject);
begin
 BindingsList1.Notify(Sender, '');
end; 
```

![在此处输入图像描述](../Images/ec4a7b8e5060020949d1d2a21c41268f.png)

# header - 如何将 wxChoice 放在 wxGrid 标头中？

> ID：14498629
> 
> 赞同：0
> 
> 时间：2013-01-24T10:06:26.160
> 
> 标签：header, grid, wxpython, controls

我想创建一个网格，用户可以在其中通过 wxchoice（或 wxcombo）控件更改列名。我想象它是这样的：例如让用户有数据的树列

```
John,Smith,190
Maria,Kowalsky,180 
```

我想让用户将每一列与三个选项之一（名字、姓氏、身高）相匹配，我刚开始：

```
#!/usr/bin/python
# coding: utf-8

import wx
from wx.grid import Grid

class DocsVarValGrid(Grid):
    """
    """
    def __init__(self, parent, init_data=None, *args, **kwargs):
        super(DocsVarValGrid, self).__init__(parent, *args, **kwargs)
        self.CreateGrid(1, 1)

        self.cols_names = init_data

class MyFrame(wx.Frame):
    """"""
    def __init__(self, *args, **kwargs):
        super(MyFrame, self).__init__(*args, **kwargs)
        #self.panel = PickAFile(parent=self)
        self.grid = DocsVarValGrid(self, init_data=['a', 'b', 'c'])
        self.Layout()

def main():
    app = wx.App() # creation of the wx.App object (initialisation of the wxpython toolkit)
    frame = MyFrame(None, title="Hello World") # creation of a Frame with "Hello World" as title
    frame.Show() # frames are invisible by default so we use Show() to make them visible
    app.MainLoop() # here the app enters a loop waiting for user input

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:39:29.953

你实际上不能那样做。相反，您必须自己绘制一个组合框。这是允许使用 GridLabelRenderer 混合的。至少，这就是 wxPython 演示中所暗示的内容。如果您还没有，我建议您下载它并查看那里的示例。在那个例子中它实际上没有组合框，但我认为它会让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:15:33.463

可以使用 grid.GetGridColLabelWindow() 从网格中获取列标题窗口，然后您可以对该窗口执行任何操作，例如覆盖其绘制事件或在其上放置小部件。查看 wx.lib.mixins.gridlabelrenderer 模块中的一些帮助类，它们可以帮助您覆盖标签的绘制。

因此，虽然自己绘制一个类似组合框的东西是可行的，但在您的情况下，将一个真正的小部件放在那里可能是最有意义的。您必须自己管理其大小和位置，并在每次调整网格和/或列的大小时对其进行调整，但这应该不会太困难。如果您查看 gridlabelrenderer，您将能够看到一些计算代表每个标签的矩形的代码，您可以使用类似的东西来调整小部件的大小和重新定位。

# c# - Windows 应用程序中的 Application.Restart() + 单实例冲突

> ID：14498633
> 
> 赞同：2
> 
> 时间：2013-01-24T10:06:42.300
> 
> 标签：c#, clickonce, remoting, single-instance, application-restart

嗨朋友们，

我有一个 Windows 应用程序，我在其中控制单个实例。

当此应用程序使用 clickonce 更新时，应用程序将在应用更新后重新启动。

应用程序重新启动但无法继续，因为 IsFirstInstance = false 条件。

但是 Application.Restart() 文档说它会关闭正在运行的应用程序并创建新实例。

单实例类如下：

```
 using System;
using System.Diagnostics;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Ipc;
using System.Threading;
using agent_common_plugin_sdk;

/// <summary>
/// Application Instance Manager
/// </summary>
public static class ApplicationInstanceManager
{
    /// <summary>
    /// Creates the single instance.
    /// </summary>
    /// <param name="name">The name.</param>
    /// <param name="callback">The callback.</param>
    /// <returns></returns>
    public static bool CreateSingleInstance(string name, EventHandler<InstanceCallbackEventArgs> callback)
    {
        EventWaitHandle eventWaitHandle = null;
        string eventName = string.Format("{0}-{1}", Environment.MachineName, name);

        InstanceProxy.IsFirstInstance = false;
        InstanceProxy.CommandLineArgs = Environment.GetCommandLineArgs();

        try
        {
            // Try opening existing wait handle
            eventWaitHandle = EventWaitHandle.OpenExisting(eventName);
        }
        catch(Exception ex)
        {
            // Got exception = handle wasn't created yet
            InstanceProxy.IsFirstInstance = true;
        }

        if (InstanceProxy.IsFirstInstance)
        {
            // init handle
            eventWaitHandle = new EventWaitHandle(false, EventResetMode.AutoReset, eventName);

            // register wait handle for this instance (process)
            ThreadPool.RegisterWaitForSingleObject(eventWaitHandle, WaitOrTimerCallback, callback, Timeout.Infinite, false);
            eventWaitHandle.Close();

            // register shared type (used to pass data between processes)
            RegisterRemoteType(name);
        }
        else
        {
            // pass console arguments to shared object
            UpdateRemoteObject(name);

            // invoke (signal) wait handle on other process
            if (eventWaitHandle != null) eventWaitHandle.Set();

            // kill current process
            Environment.Exit(0);

        }

        return InstanceProxy.IsFirstInstance;
    }

    /// <summary>
    /// Updates the remote object.
    /// </summary>
    /// <param name="uri">The remote URI.</param>
    private static void UpdateRemoteObject(string uri)
    {
        // register net-pipe channel
        IpcClientChannel clientChannel = new IpcClientChannel();
        ChannelServices.RegisterChannel(clientChannel, true);

        // get shared object from other process
        InstanceProxy proxy =
            Activator.GetObject(typeof(InstanceProxy),
            string.Format("ipc://{0}{1}/{1}", Environment.MachineName, uri)) as InstanceProxy;

        // pass current command line args to proxy
        if (proxy != null)
            proxy.SetCommandLineArgs(InstanceProxy.IsFirstInstance, InstanceProxy.CommandLineArgs);

        // close current client channel
        ChannelServices.UnregisterChannel(clientChannel);
    }

    /// <summary>
    /// Registers the remote type.
    /// </summary>
    /// <param name="uri">The URI.</param>
    private static void RegisterRemoteType(string uri)
    {
        // register remote channel (net-pipes)
        IpcServerChannel serverChannel = new IpcServerChannel(Environment.MachineName + uri);
        ChannelServices.RegisterChannel(serverChannel, true);

        // register shared type
        RemotingConfiguration.RegisterWellKnownServiceType(
            typeof(InstanceProxy), uri, WellKnownObjectMode.Singleton);

        // close channel, on process exit
        Process process = Process.GetCurrentProcess();
        process.Exited += delegate { ChannelServices.UnregisterChannel(serverChannel); };
    }

    /// <summary>
    /// Wait Or Timer Callback Handler
    /// </summary>
    /// <param name="state">The state.</param>
    /// <param name="timedOut">if set to <c>true</c> [timed out].</param>
    private static void WaitOrTimerCallback(object state, bool timedOut)
    {
        // cast to event handler
        EventHandler<InstanceCallbackEventArgs> callback = state as EventHandler<InstanceCallbackEventArgs>;
        if (callback == null) return;

        // invoke event handler on other process
        callback(state,
                 new InstanceCallbackEventArgs(InstanceProxy.IsFirstInstance,
                                               InstanceProxy.CommandLineArgs));
    }
} 
```

}

这里：

`try { // Try opening existing wait handle eventWaitHandle = EventWaitHandle.OpenExisting(eventName); } catch(Exception ex) { // Got exception = handle wasn't created yet InstanceProxy.IsFirstInstance = true; }`

没有异常被抛出。因此，正如您在代码中看到的，它将从 Environment.Exit(0) 退出。

# coldfusion - ColdFusion/Dreamweaver 的深色方案？

> ID：14498634
> 
> 赞同：2
> 
> 时间：2013-01-24T10:06:48.787
> 
> 标签：coldfusion, dreamweaver, color-scheme

有没有人为 Dreamweaver (CS6) 提供包含冷融合代码的深色配色方案？

我找不到任何东西，用手改变颜色真的很痛苦

如果能分享一个就太好了。

Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:43:29.733

有 Dreamweaver 的颜色文件，但我没有找到任何与 Coldfusiun 实际配合使用的文件。您可以按照此[指南](http://www.thatwebguyblog.com/post/a_dark_code_view_theme_for_dreamweaver/)流程进行操作。这是一个手动过程，但它会准确地告诉您要更改的内容，并且如底部的最新更新所示，它在 CS6 中确实有效。

从链接复制以防链接失效。请注意，您必须转到链接才能下载链接。

1.  关闭 Dreamweaver
2.  浏览至：`%APPDATA%\Adobe\Dreamweaver 9\Configuration\CodeColoring`
3.  将 Colors.xml 文件重命名为不同的名称——比如 Colors2.xml（如果您不喜欢新的配色方案，这将是您返回的文件）
4.  下载本文末尾的 zip 并将其解压缩到您在第 2 点打开的位置。
5.  打开 Dreamweaver 并转到 Edit/Preferences/Code Coloring 并将默认背景颜色更改为 #003

作为旁注。如果您只是使用 Dreamweaver 编写 Coldfusion，也许您应该考虑查看[CFEclipse](http://cfeclipse.org/)。我发现它在编写 Coldfusion 方面比 Dreamweaver 好得多。[它也建立在Eclipse](http://www.eclipse.org/)之上。其中有一个插件可以改变颜色。手动更改它也更容易。

# javascript - 检查外部 JSON 中是否存在单词

> ID：14498640
> 
> 赞同：1
> 
> 时间：2013-01-24T10:07:05.500
> 
> 标签：javascript, jquery, json, tag-it

我正在使用[tag-it，](http://aehlke.github.com/tag-it/)因此用户可以为他们的帖子创建标签。

它目前允许他们输入任何内容，但我有一个 JSON 形式的禁用词列表。我怎么能在 tagit 插件中实现这一点，所以当用户输入的单词匹配一个被禁止的单词时，它会抛出一个错误。

如何检查 swearWords.json 中是否存在 ui.tag？

这是我当前的代码：

```
$('#methodTags_text').tagit({
    availableTags: sampleTags,
    tagLimit:3,
    maximumInputLength: 10,
    fieldName: "item[tags][]",
    beforeTagAdded: function(event, ui) {
       // if ui.tag exists in swearWords.json
       // Then output error
       $('#banned_error').html('You can use this word.')
    }
}); 
```

swearWords.json

```
["word1","word2","word3","word4","word5"] 
```

* * *

**使用 François Wahl 的答案，我设法得到了一个可行的解决方案......**

```
$('#methodTags_text').tagit({
    availableTags: sampleTags,
    tagLimit:3,
    maximumInputLength: 10,
    removeConfirmation: true,
    fieldName: "item[tags][]",
    beforeTagAdded: function(event, ui) {
           if (!ui.duringInitialization) {
                var word = eventTags_text.tagit('tagLabel', ui.tag);
                if($.inArray(word , words) > -1){
                    $('#banned_error').html('You cant use this word.');
                    $("#methodTags_url").tagit("removeTagByLabel", word);
                } else {$('#banned_error').html('');}   
           }
    }
}); 
```

**还可以在 var 中获取外部 json**

```
var words = (function () {
    var words = null;
    $.ajax({
        'async': false,
        'global': false,
        'url': "swearWords.json",
        'dataType': "json",
        'success': function (data) {
            words = data;
        }
    });
    return words;
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:20:46.393

鉴于单词在数组中，您可以使用 jQuery [**inArray()**](http://api.jquery.com/jQuery.inArray/)执行以下操作：

```
var words = ["word1","word2","word3","word4","word5"]

beforeTagAdded: function(event, ui) {
    // if ui.tag exists in swearWords.json
    // Then output error
    var word = "word4"; // I'm assuming you get the word from some control though.
    if($.inArray(word , words) > -1){
       $('#banned_error').html('You can use this word.')
    }
} 
```

* * *

[**DEMO**](http://jsfiddle.net/fCyHv/) - 检查输入的单词是否在数组中

* * *

来自 DEMO 的代码：

```
<input id="word" type="text"></input>
<button id="checkWord" type="button">Check Word</button> 
```

```
var words = ["word1","word2","word3","word4","word5"]

$("#checkWord").on("click", function(){
    var word = $("#word").val();

    if($.inArray(word, words) > -1){
       alert("You cannot use this word");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:18:45.440

试试这个

```
swearWords.each(function(i,val){
   if(ui.tag == val){
      $('#banned_error').html("You can't use this word.")
  }else{
     //do your stuff
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:22:44.360

我想，你可以使用这样的东西：

```
beforeTagAdded: function(event, ui) {
  if (!this._swearWords) {
    // send synchonous XHR to load banned words.
    var xhr = null;
    if (window.XMLHttpRequest) {
        xhr = new window.XMLHttpRequest();
    }
    else if (window.ActiveXObject) {
        xhr = new window.ActiveXObject('Microsoft.XMLHTTP');
    }

    if (!xhr) {
        return;
    }

    xhr.open('GET', 'swearWords.json', false);
    xhr.send(null);
    this._swearWords = JSON.parse(xhr.responseText);
  }

  if (tag in this._swearWords) { // I don't know how to get tag...
    // if ui.tag exists in swearWords.json
    // Then output error
    $('#banned_error').html('You can use this word.')
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:31:43.560

使用 Object 而不是 Array 来定义禁用词更好更快。

```
{'word1': 1, 'word2': 1, 'word3':1} 
```

然后就可以使用`in`算子进行检测了。如果您使用 Array 您（或 jQuery）已经通过循环中的数组来检查项目的存在。请记住，`Array.indexOf`例如在 IE8 中没有实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T19:36:23.703

对于将 tagit 附加到 class 与 id 的情况（如在转发器中，即搜索结果），我正在附加解决方案。当您附加到类时，您必须在上下文中访问 tagit 以便能够在验证失败时删除您的标签，例如

```
 $(".recTags").tagit({
        afterTagAdded: function (event, ui) {
            if (!ui.duringInitialization) {
                // some validation
                if (ui.tagLabel.length <= 50) {
                    $('#tag_error').html('');
                    // do something
                } else {
                    $('#tag_error').html('Tag "'+ ui.tagLabel +'" is too long [50 character limit].');
                    ui.tag.parent().tagit("removeTagByLabel", ui.tagLabel);
                }
            }
        }
    }); 
```

对我来说重要的部分是弄清楚如何调用`removeTagByLabel`，从哪个元素：

```
ui.tag.parent().tagit("removeTagByLabel", ui.tagLabel); 
```

我无法使用 beforeTagAdded 事件，因为`ui.tag.parent()`此时不存在，因为标签尚未添加到 DOM，因此检查在`afterTagAdded`. 我相信还有其他方法可以做到这一点，但这对我有用。

# .htaccess - 我希望能够使用 htaccess 更改根目录

> ID：14498643
> 
> 赞同：1
> 
> 时间：2013-01-24T10:07:10.317
> 
> 标签：.htaccess, mod-rewrite

我希望能够使用 htaccess 更改根目录。

我要这个：

`index.php/user/user_postdetail/index/14`

变成这样：

`index.php/post_14.html`

我尝试使用

```
RewriteRule post_([0-9]+).html$ /index.php/user/user_postdetail/index/$1 [L=301,R] 
```

但我把它反过来了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:29:07.943

你有一个错字。它应该`R=301`代表带有 301 代码的**R**`L`重定向，而表示要调用的**最后**一条规则。

此外，你确实有它倒退。

你需要的是：

```
RewriteRule user_postdetail/index/([0-9]+)$ /index.php/post_$1 [R=301,L] 
```

# database - 通过重新发布来更新数据库

> ID：14498648
> 
> 赞同：0
> 
> 时间：2013-01-24T10:07:27.867
> 
> 标签：database, umbraco, web-deployment

这是我的问题：

在 webmatrix 中工作时，如果我有一个已发布的 Umbraco 站点，我需要重新发布它以将实时版本更新到我的本地版本，并且我也需要更新数据库，我不能。

Webmatrix 会说数据库文件正在使用中。当然它正在使用中，因为 IIS 正在服务器上运行，并且该站点是实时的，所以它正在使用它的数据库，并且它不能被覆盖。

最让我烦恼的是，如果不是通过停止服务器上的网站应用程序池或重新启动 IIS 服务，我还没有找到解决此问题的任何方法，但这太麻烦了！

必须有一种从 Webmatrix 更新数据库的简单方法。

我通常为我的 Umbraco 网站使用 SQL CE 数据库，但如果需要 SQL Server，我可以切换。

拜托，这让我发疯了，我希望这是可能的，有人会给我指路！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:13:15.337

您可以使用[此处列出的 app_offline.htm 方法](http://our.umbraco.org/wiki/install-and-setup/using-umbraco-with-an-embedded-sql-server-database-%28sql-server-express-user-instance%29)。基本上，您可以将一个名为 app_offline.htm 的文件添加到网站的根目录，这将允许您更新数据库。显然，您可以将 app_offline.htm 页面格式化为看起来像您的网站，并有一些副本说明该网站将在几分钟内备份等。

另一方面，将数据库移动到 SQL Server 会导致类似的问题，尽管您可以在无需分离数据库的情况下更新数据库，但您仍然必须在更新发生时阻止人们访问该站点。

# ios - 为什么窗口自动释放并在 iOS 6 应用程序中释放？

> ID：14498650
> 
> 赞同：3
> 
> 时间：2013-01-24T10:07:30.243
> 
> 标签：ios, objective-c

自 iOS 3 以来我没有做过任何 iOS 开发，所以我的记忆有点模糊（尽管内存管理从来都不是我为之苦苦挣扎的事情，而且我对此很清楚）。

我正在开始一个新项目，但不明白为什么骨架代码的结构是这样的：

```
- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc]
                    initWithFrame:[[UIScreen mainScreen] bounds]]
                   autorelease];
    // ... snip ...
} 
```

1.  为什么窗口对象会被自动释放？我很确定在旧的 iOS 版本中从来没有这样过。
2.  从哪里来`_window`？这只是另一种访问方式`[self window]`吗？

我会这样写：

```
- (void)dealloc
{
    [self.window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc]
                   initWithFrame:[[UIScreen mainScreen] bounds]];
    // ... snip ...
} 
```

我总是鼓吹*永远不要*释放自动释放的对象，实际上这样做通常会导致分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:19:56.723

在您的第二个示例中，您正在泄漏窗口对象，因为`alloc`它将为对象提供保留计数 1，您`_window`通过属性分配它，该属性也将保留分配给它的对象。

确实，您不应该释放自动释放对象，但在 dealloc 中，您正在释放`window`属性的 iVar。您应该始终释放任何声明为保留或强的属性。（虽然不是在使用 ARC 时）。现在`_window`自动生成为属性的 iVar `window`。

有些人认为您不应该在or中使用`self.`属性。因此，我这样做的方式是：`init``dealloc`

```
 [_window release], _window = nil; 
```

这将`_window`在释放它后将它设置为 nil，确保如果任何其他线程可能想要使用它，它将调用 on `nil`。这可以防止崩溃，但也可能会产生一些奇怪的行为。这完全取决于你。

* * *

您应该移至 ARC，这是一个编译器选项，可在编译时为您添加发布/自动租赁。如果您在使用 ARC 时正确设置了属性，则无需自行添加这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:20:13.197

所以我想通了（大部分）。`@property`声明具有`strong`属性。显然，这对 ARC 来说是新的（我实际上并没有使用它），否则只是 的别名`retain`，因此`self.window = [ ... ]`保留了对象，因此自动释放。

仍然不清楚`_window`变量，但我认为这只是一个捷径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:20:54.943

检查`window`属性内存描述符是什么样的。我假设它是`strong`/`retain`在这种情况下，当您设置`window`属性时，它的值被保留，因此需要在`dealloc`.

遵循您的代码路径。

1.  `[UIWindow alloc]`= 保留计数为 1。
2.  自动释放 = 保留计数为 0
3.  设置 self.window 会影响现在 = 1 并且一直存在的 retainCount，直到...
4.  在`dealloc`你释放它时，retainCount = 0 并且对象被删除

您可能错过了在后来的 iOS SDK 中，自动合成属性会自动创建带有下划线前缀的实例变量。所以你也可以`self.window = nil`在你的`dealloc`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:23:39.970

> *1、为什么window对象会被自动释放？我很确定在旧的 iOS 版本中从来没有这样过。*

如果窗口对象没有自动释放，那么它会导致泄漏。由于您正在使用

```
 self.window  = [[[UIWindow alloc] ....]autorelease]; 
```

`self.`语法允许调用 setter 函数，它会保留对象一次。所以我们分配使用的实际窗口对象`[UIWindow alloc]`应该被释放，因此`autorelease`。使用`self.`语法的保留在概念上在 dealloc 中发布。因此，对于一个分配加一个保留，我们释放了两次。

> _window 从何而来？这只是另一种访问方式吗 `[self window]`？

那么这个问题已经在[这里讨论过了](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)

# ruby - 调整 Nokogiri 连接的超时

> ID：14498653
> 
> 赞同：2
> 
> 时间：2013-01-24T10:07:39.933
> 
> 标签：ruby, timeout, nokogiri, open-uri, net-http

为什么 nokogiri 在服务器很忙并且我正在逐页请求页面时等待几秒（3-5），但是当这些请求处于循环状态时，nokogiri 不会等待并抛出超时消息。我正在使用超时块包装请求，但 nokogiri 根本不等待那个时间。有什么建议的程序吗？

```
# this is a method from the eng class
def get_page(url,page_type)
 begin
  timeout(10) do
    # Get a Nokogiri::HTML::Document for the page we’re interested in...
    @@doc = Nokogiri::HTML(open(url))
  end
 rescue Timeout::Error
  puts "Time out connection request"
  raise
  end
end

 # this is a snippet from the main app calling eng class
 # receives a hash with urls and goes throgh asking one by one
 def retrieve_in_loop(links)
  (0..links.length).each do |idx|
    url = links[idx]
    puts "Visiting link #{idx} of #{links.length}"
    puts "link: #{url}"
    begin
        @@eng.get_page(url, product)
    rescue Exception => e
        puts "Error getting url: #{idx} #{url}"
        puts "This link will be skeeped. Continuing with next one"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T12:10:28.683

该`timeout`块只是**该代码必须在块内执行而不触发异常的最长时间**。它不会影响 Nokogiri 或 OpenURI 内部的任何内容。

您可以将超时设置为一年，但 OpenURI 仍然可以随时超时。

因此，您的问题很可能是 OpenURI 在连接尝试本身上超时。Nokogiri 没有超时；它只是一个解析器。

**调整读取超时**

您可以在 OpenURI 上调整的唯一超时是读取超时。您似乎无法通过此方法更改连接超时：

```
open(url, :read_timeout => 10) 
```

**调整连接超时**

要调整连接超时，您必须`Net::HTTP`直接使用：

```
uri = URI.parse(url)

http = Net::HTTP.new(uri.host, uri.port)
http.open_timeout = 10
http.read_timeout = 10

response = http.get(uri.path)

Nokogiri.parse(response.body) 
```

您还可以在此处查看一些其他讨论：

[Ruby Net::HTTP 超时](https://stackoverflow.com/questions/2229194/ruby-net-http-time-out)
[增加 Net::HTTP的超时](https://stackoverflow.com/questions/14314375/increase-timeout-for-nethttp)

# windows-phone-7 - 在 windows phone 上切换 ApplicationBarIcon iconuri

> ID：14498655
> 
> 赞同：0
> 
> 时间：2013-01-24T10:07:46.450
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我在我的 Windows 手机应用程序中有一个包含 2 个 appbariconbutton 的 applicationBar：

```
 <phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton x:Name="appbar_button1" IconUri="/Images/appbar_im1_selected.png" Text="im1" Click="appbar_button1_Click" />
        <shell:ApplicationBarIconButton x:Name="appbar_button2" IconUri="/Images/appbar_im2.png" Text="im2" Click="appbar_button2_Click" />

    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

我需要像这样更改 2 appbariconbutton 的 iconUri

```
 private void appbar_button1_Click(object sender, EventArgs e)
        {
          //Switch the iconuri of appbar_button1 from /Images/appbar_im1_selected.png to /Images/appbar_im1.png
//Switch the iconuri of appbar_button2 from /Images/appbar_im2.png to /Images/appbar_im1_selected.png
        } 
```

请问这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:50:13.820

只需更改图标的 IconUri

```
private void appbar_button1_Click(object sender, EventArgs e)
{
    ((ApplicationBarIconButton)this.ApplicationBar.Buttons[0]).IconUri = new Uri("/Images/appbar_im1.png", UriKind.Relative);
    ((ApplicationBarIconButton)this.ApplicationBar.Buttons[1]).IconUri = new Uri("/Images/appbar_im1_selected.png", UriKind.Relative);
} 
```

# winjs - 我什么时候可以设置 WinJS.UI。设置选项？

> ID：14498657
> 
> 赞同：0
> 
> 时间：2013-01-24T10:08:00.440
> 
> 标签：winjs

我有一个自定义控件。我想在控件呈现之前在脚本端设置选项我如何传递选项？

我想通过同一html页面中的脚本传递选项。

```
<script type="text/javascript">

        $(document).ready(function () 
{

            var myDiv = document.getElementById("svgChart").winControl;

            WinJS.UI.setOptions(myDiv, {
                seriesList: [{
                    label: "s1",
                    legendEntry: true,
                    data: { x: [1, 2, 3, 4, 5], y: [-5, -3, 1, 7, 2] }
                }, {
                    label: "s2",
                    legendEntry: true,
                    data: { x: [1, 2, 3, 4, 5], y: [-2, -6, 2, 4, 3] }
                }, {
                    label: "s3",
                    legendEntry: true,
                    data: { x: [1, 2, 3, 4, 5], y: [-3, -5, 3, 2, 5] }
                }]
            });
        });

    </script> 
```

但是 wincontrol 返回未定义的元素？我什么时候可以在创建控件之前设置选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:52:50.087

当使用带有 WinJS 契约的控件时，可以通过三种方式创建控件实例：

1.  通过从脚本调用构造函数。例如`var myControl = new Mynamespace.MyControl(element, options)`
2.  通过调用`WinJS.UI.processAll`DOM 树。*在 VS 中创建新项目时，默认模板会为您调用此功能*
3.  通过调用`WinJS.UI.process`特定的 DOM 元素

使用 1 时，您可以清楚地传递您想要的选项。

但是，当使用其他两个时，您可以以声明方式将选项传递给控件：

```
<div data-win-control="Mynamespace.MyControl"
     data-win-options="{ aProp: 'val', bProb: 3.14}">
   <!-- your other content --->
</div> 
```

这将是您的控件构造函数的选项参数。如果您希望将所有这些属性应用于您的实例，您可以使用`WinJS.UI.setOptions(instance, optionsObject)`来设置它们。

在您的特定情况下，您似乎已经有了一些标记和一个控件——您只需要等到控件创建之后就可以对其设置选项。

# java - 对 Observable 的两个不同方法调用上的观察者数量不一致

> ID：14498659
> 
> 赞同：1
> 
> 时间：2013-01-24T10:08:03.437
> 
> 标签：java, observable

我试图在我的代码中使用 observable 并且这个问题让我很难过。

```
public class observeState extends Observable
{
    public void setSelectedTransaction(int idx)
    {
        if (selectedTransaction != idx)
        {
            this.selectedTransaction = idx;
            setChanged();
            notifyObservers("setSelectedTransaction");
            System.out.println("Observers : "+this.countObservers());
        }
    }

    public void setLog(Log log)
    {
        if(theLog != log) {
            theLog = log;
            System.out.println(theLog.getLogTransactions().size() + "setLog");
            setChanged();
            notifyObservers("setLog");
            System.out.println("Observers : "+this.countObservers());
        }
    } 
```

有两个观察者在观察这个可观察类，当使用测试行“Observers : 2”调用`notifyObservers`该方法时，它确实会发送出去。`setSelectedTransaction`然而，下一个方法`setLog`似乎没有观察者给出“观察者：0”。我不认为我只能使用一次可观察的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:12:01.147

此问题最可能的原因是您没有在同一个对象上调用该方法。假设两个对象相同是一个常见的错误，因为它们具有相同的名称或其他一些混淆。我会打印出每个对象的 hashCode 或使用调试器来确保您确实在调用同一个对象。

顺便说一句，您可以尝试以相反的顺序拨打电话，或者不止一次地测试您的理论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:20:07.877

您用来调用and的**对象**不同，或者观察者可能会在更新方法中将自己作为观察者**移除****。**`setSelectedTransaction``setLog`

# facebook - Facebook OG Post 未正确显示

> ID：14498660
> 
> 赞同：2
> 
> 时间：2013-01-24T10:08:03.577
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我正在使用我提出的另一个问题中概述的方法，将[项目/故事发布到 Facebook 用户墙](https://stackoverflow.com/questions/14477792/posting-items-stories-to-face-book-users-walls)以制作 OG 帖子。

一条帖子出现在我的时间线中，但是，它没有正确显示。我已经在 Facebook 开发者中心设置了格式。

![示例故事](../Images/e87e0220d851a8c97502cd947e0ea9b6.png)

但是，该帖子不包含 {object.description} xxxxxx 和 Points Earned 部分

![帖子示例](../Images/67e6adea9a8880a94a6ad5ed997007c6.png)

我也在帖子相关的页面上设置 OG 标签，如下所示：

```
 <meta property="fb:app_id"             content="{fb-id}" /> 
  <meta property="og:type"               content="{app-name}:points" /> 
  <meta property="og:url"                content="{the url}" /> 
  <meta property="og:title"              content="New points earned .. ?" /> 
  <meta property="og:image"              content="{url-to-image}" /> 
  <meta property="og:description"        content="You just earned 6 points?" /> 
  <meta property="{app-name}:nopoints"   content="4" /> 
```

该帖子正确地从元标记中获取 og:title 和 og:description，但忽略了我在页面上的测试“xxxxx”，也没有显示“获得的积分”部分。

我可以使用发布帖子后返回的 ID 使用以下 URL 格式[https://www.facebook.com/](https://www.facebook.com/) {facebook-id}/activity/{activity-id} 预览帖子，并在此处正确显示： （忽略说 4 分和 6 分的事实）

![在此处输入图像描述](../Images/14babcafaba87f4db1848ed341f5a9fa.png)

为了完整起见，我使用以下代码来制作实际的帖子：

```
var fb = new FacebookClient("{access-token}");
        dynamic parameters = new ExpandoObject();
        parameters.points = "{url}";
        parameters.explicitly_shared = true;
        parameters.nopoints = 4;
        parameters.description = "my description";
        try
        {
            dynamic result = fb.Post("me/{app-name}:earn", parameters);
        }
        catch(FacebookApiException ex)
        {
        } 
```

我在这里错过了什么吗？帖子在 Facebook 其他地方的显示方式是否不同？我必须以不同的方式发布实际帖子吗？包括其他参数等？

干杯

# database - 面向对象的编程和数据库管理

> ID：14498661
> 
> 赞同：2
> 
> 时间：2013-01-24T10:08:09.580
> 
> 标签：database, class, ooad

我已经对此感到困惑了一段时间。我的问题是，面向对象编程和数据库管理如何协同工作？我似乎找不到太多关于两者如何协同工作的信息。我想做一个数据库驱动的应用程序，我目前有一本关于面向对象编程的好书，其中有一个使用面向对象方法创建应用程序的过程，但是当我们开始涉及数据库时我只是感到困惑。

类图本质上是数据库设计吗？我们还能像使用关系数据库一样使用 SQL 查询数据库吗？数据文件如何存储以及以什么格式存储？类是否等同于表，它们的属性是否等同于列？

在此先感谢我感谢任何回复，并且我确实尝试了谷歌和提供的类似问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:11:10.400

似乎您遇到了[Object Relational Impedence Mismatch](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)。

> 类图本质上是数据库设计吗？

不，不是，数据库模型和您的 OO 模型可能非常不同。

> 我们还能像使用关系数据库一样使用 SQL 查询数据库吗？

是的，您可以，但是您会将数据更改为对象，请参阅[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)了解如何执行此操作。

> 数据文件如何存储以及以什么格式存储？

几十年来，RDBS 存储数据的方式和格式相同，我不会建议您看看日益流行的[NoSQL](http://en.wikipedia.org/wiki/NoSQL)系统。

> 类是否等同于表，它们的属性是否等同于列？

不一定，您会将表中的数据映射到 OO 设计中的对象。有时他们可能几乎直接映射。例如，您还可以将 3 个表中的数据映射到一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:25:46.320

`ORM(Object Relational Mapping) in Hibernate`是您澄清的好例子！

对于像这样的问题：`Is a class diagram essentially a database design? and Are classes the equivalent to tables and their attributes equivalent to columns?`..是的，让我和你解释一个例子：

```
class Department
{
     private int departmentNo;
     private int departmentName;
     private Set<Student> students;
}

class Student
{
    private int studentId;
    private int studentName;
    private Department department;
} 
```

使用这些实体， `Two database tables`将使用 hibernate 生成。默认情况下，

```
Department: departmentno(int),departmentname(varchar(255))
Student: studentid(int), studentname(varchar(255)),departmentno(int) [foreign key] 
```

被生成。

可以通过以下方式检索特定部门的学生列表，

```
Department department = ......; // hibernate related thing which hit the database
Set<Student> = department.getStudents(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T15:41:15.640

我已经读了好几年了。我喜欢 OOP 方法，而且我还开发数据库驱动的应用程序。以下是我的发现：

1.  从某种意义上说，OOP 和数据模型是两个独立的世界。这是因为在采用 OOP 之前，RDBMS 已经存在多年。

2.  OOP 专注于类和对象；RDBMS 专注于数据存储和检索。

3.  如果您花时间构建对表建模的类，那很好，但这会增加应用程序的性能开销并增加开发时间。

我对 .Net 开发人员的建议：使用 System.Data 命名空间下的 .Net 框架已经提供的类。对这些类的深入了解可以将代码的大小降至最低。仅在绝对必要时创建一些自定义类

# php - 从现在开始数月

> ID：14498667
> 
> 赞同：-3
> 
> 时间：2013-01-24T10:08:30.047
> 
> 标签：php, date, calendar

我在我的页面上使用[Max's Calander 。](http://php-script.hu/script/bovebben/max_s_calendar)需要使用这种时间格式：Y,n（例如：2008,3）

如何从现在开始生成 12 个月？

我试过这个：

```
$myCelandar->showCalendar(date("Y".","."n"));
$myCelandar->showCalendar(date("Y".","."n", strtotime("+1 month") )); 
```

但它不会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:11:46.473

```
 $myCelandar->showCalendar(date("Y,n", strtotime("+1 year"))); 
```

# tree - 具有对齐叶子的 d3 树

> ID：14498676
> 
> 赞同：0
> 
> 时间：2013-01-24T10:08:59.670
> 
> 标签：tree, d3.js

我对使用 d3 可视化系统发育树很感兴趣。

我看了很多树的例子（嗯，有很多，谢谢！）但它们似乎都没有像[这里](http://fb2008_07.flybase.org/blast/species_tree.png)一样将叶节点（通常是现存的物种）全部对齐到右边。

[如果我想在这里](http://bl.ocks.org/4339083)转换这个折叠树，起点是什么？

很高兴知道更多关于它的信息。

干杯，法比安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:39:42.567

找到了答案。

如果你有兴趣，看看这个[集群树状图](http://bl.ocks.org/4063570)！

# three.js - 动态立方体反射镜面效果

> ID：14498677
> 
> 赞同：0
> 
> 时间：2013-01-24T10:09:00.737
> 
> 标签：three.js

在我的项目中，a 在场景中添加了一个 cubeCamera 以获取动态 envMapping（反射）。如您所见，厨房的后墙有反射，上面有一些模糊，而且边缘也被渲染为非抗锯齿。那么我怎样才能摆脱断线并在墙上锐化反射呢？

代码 ：

```
var cubeCamera = new THREE.CubeCamera(1, 1000, 256);
cubeCamera.renderTarget.minFilter = THREE.LinearMipMapLinearFilter;
scene.add(cubeCamera);

 var material = new THREE.MeshPhongMaterial({
                ambient: 0x996633,
                reflectivity: 1,
                color: 0x996633,
                specular: 0x050505,
                shininess: 100,
                shading: THREE.SmoothShading, //THREE.FlatShading,
                blending: THREE.NormalBlending,
                side: THREE.DoubleSide,
                envMap: project.cubeCamera.renderTarget,
                wireframe: false
            });

objMesh.material = material; 
```

在渲染函数中：

```
 objMesh.visible = false;
 objMesh.cubeCamera.updateCubeMap(renderer, scene);
 objMesh.visible = true;

 renderer.render(scene, camera); 
```

所以代码就像在网络上找到的每个样本一样。没有不同。但我发现的一件事是，对基元的反射是完美的，但对从 obj 文件加载的自定义网格的反射很差。

![截屏](../Images/5ced11cb21671add262133f6ef42a07f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:40:17.320

环境映射基于环境无限远的假设，这在您的情况下不是有效的近似值。因此，您将看到您不喜欢的工件。

如果将立方体相机的分辨率加倍，则可能会减少断边效果。

# visual-studio-2010 - 如何使用 Visual Studio 2010 开发 Mono 3 / .Net 4.5 项目

> ID：14498681
> 
> 赞同：0
> 
> 时间：2013-01-24T10:09:13.917
> 
> 标签：visual-studio-2010, entity-framework, mono, monodevelop, .net-4.5

我需要将 Web 应用程序迁移到 Mono，并且此应用程序使用 Entity Framework 4。Mono 包含第 6 版的开源 EF，所以我想我必须切换到新 Mono 3 上可用的 .Net 4.5 上可用的 EF 6。

一个问题是，当我为 VS 2010 安装 Mono 3.0.3 和 Mono Tools 时，没有任何改变——仍然无法选择它作为目标。

顺便说一句，如果原始 .Net 4.5 仅在 Visual Studio 2012 上可用，我怀疑是否可以使用 VS 2010 开发 .Net 4.5 Mono 项目，我不太乐意迁移。

我也尝试过 MonoDevelop，但它看起来只能针对 .Net 4.0，至少我没有找到针对 4.5 的选项，并且它没有 EF 模型设计器。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:37:54.373

EF6 适用于 .NET Framework 4 和 .NET Framework 4.5。不同之处在于异步在 .NET Framework 4 上不可用，因此您将无法使用 EF 异步 API。

# c# - 如何在使用 resgen.exe 和 C# 和 .NET 4.5 生成的 StronglyTypedClass 文件中公开构造函数 StringResources

> ID：14498683
> 
> 赞同：3
> 
> 时间：2013-01-24T10:09:19.263
> 
> 标签：c#, .net, resgen

我一直在使用 C# 和 .NET 4.5 在我的 Windows 窗体应用程序中使用 resgen.exe 生成一个 StronglyTypedClass 文件

根据语法，我可以将 StringResources 类设为 public，但 Constructor 仍然是内部的。

```
resgen inputFilename [outputFilename] /str:language[,namespace,[classname[,filename]]] [/publicClass] 
```

当我提出这个参数 [/publicClass] 时，它只是将类设为公共，但构造函数仍然是内部的。

```
internal StringResources() {} 
```

请提出建议，如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:12:50.827

您的队友很可能希望公开该构造函数，因为他想使用 xaml 中的资源。

只需在同一个程序集中创建一个类，它继承资源文件并公开一个公共构造函数，然后改用这个类。

```
public class ResourcesProxy : Properties.Resources
{
    /// <summary>
    /// resolves the problem of internal constructor in resources.designer.cs
    /// in conjunction with xaml usage
    /// </summary>
    public ResourcesProxy() : base()
    {
    }
} 
```

# iphone - 如何找出键盘第一次打开的时间？苹果手机

> ID：14498692
> 
> 赞同：1
> 
> 时间：2013-01-24T10:09:35.743
> 
> 标签：iphone, keyboard

如何找出键盘在 iOS 中第一次打开的时间？我只想知道您单击单元格（包含 UITextField）并打开键盘的时间。之后，我使用包含上一个和下一个按钮的工具栏浏览 UITextFields。

使用以下代码，在浏览 UITextField 时调用 keyboardWillShow，即使在第一次单击 UITextField 后键盘似乎仍保持打开状态。这种方法对我的目的没有帮助。

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardDidShowNotification object:nil];

 - (void)keyboardWillShow:(NSNotification *)notification {

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:15:02.687

使用此通知..它可以帮助你

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(keyboardWillShow) 
                                                 name:UIKeyboardWillHideNotification 
                                               object:nil]; 
```

并在那个keyboardWillShow方法中像这样删除观察者。

```
 [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:17:11.480

将此添加到您的`-viewDidLoad`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardDidShowNotification object:nil]; 
```

然后该方法`keyboardWillShow:`将如下所示：

```
- (void)keyboardWillShow:(NSNotification *)notification {
  if (firstOpen) {
    //do your stuff
    firstOpen = NO;
  } else {
    //do smth else
  }
} 
```

# android - 尝试获取全局 ArrayList 时获取 NullPointer

> ID：14498696
> 
> 赞同：1
> 
> 时间：2013-01-24T10:09:53.273
> 
> 标签：android, arraylist, nullpointerexception, global-variables

我上了3节课。一个主类、globalVariable 类和一个项目类。

我尝试在主类中设置一个 ArrayList。我想在项目类中读出它。
这是我尝试过的：

主要的：

```
for (int i = data.size()-1; i >= 0; i--){
    if (str_tv.contains(data.get(i).getCaption())){
        //TODO data.remove();
        String str_i = String.valueOf(i);
        checkedArray.add(str_i);

    }
}
System.out.println("MainActivity");
global.setArrList(checkedArray);
System.out.println("size = "+global.getArrList().size()); 
```

`global.setArrlList`在这里工作。也`global.getArrList`可以在这里工作（我得到我的尺寸）。

现在我尝试从 item 类中获取它：

```
System.out.println("Item Class");
System.out.println("size = "+global.getArrList().size());   <--gives NullPointer 
```

但是在这里，它不起作用，然后它给出了一个 NullPointer。

这是我的全球课程：

```
ArrayList<String> arrList;

public ArrayList<String> getArrList() {
    return arrList;
}

public void setArrList(ArrayList<String> arrList) {
    this.arrList = arrList;
} 
```

我确实检查了他是否可能试图获得第`ArrayList`一个而不是设置它。但他`System.out.println("MainActivity");`在项目类中显示了前一个。

为什么它会给出一个 NullPointer？我错过了什么？

日志猫：

```
01-24 11:02:04.755: E/AndroidRuntime(30097): FATAL EXCEPTION: main
01-24 11:02:04.755: E/AndroidRuntime(30097): java.lang.NullPointerException
01-24 11:02:04.755: E/AndroidRuntime(30097):    at com.dlv.GewasBescherming3.ItemListAdapter.getView(ItemListAdapter.java:47)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.AbsListView.obtainView(AbsListView.java:2035)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.ListView.makeAndAddView(ListView.java:1772)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.ListView.fillDown(ListView.java:672)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.ListView.fillFromTop(ListView.java:732)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.ListView.layoutChildren(ListView.java:1625)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.AbsListView.onLayout(AbsListView.java:1865)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.View.layout(View.java:11278)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.View.layout(View.java:11278)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.View.layout(View.java:11278)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.View.layout(View.java:11278)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.View.layout(View.java:11278)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.os.Looper.loop(Looper.java:137)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at android.app.ActivityThread.main(ActivityThread.java:4575)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at java.lang.reflect.Method.invokeNative(Native Method)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at java.lang.reflect.Method.invoke(Method.java:511)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
01-24 11:02:04.755: E/AndroidRuntime(30097):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:12:39.317

实际上，

`ArrayList<String> arrList;`是`null`。

只需声明它`ArrayList<String> arrList = new ArrayList<String>();`

**更新：**

实际上，`Main`和`Item`类**都有不同的全局对象**，所以它不能引用相同`arrList`的。

我最好补充一下：

```
public static ArrayList<String> arrList = new ArrayList<String>(); 
```

并`Global class`像这样使用它：

```
Global.arrList.size(); 
```

# android - 共享首选项的类强制转换异常

> ID：14498699
> 
> 赞同：3
> 
> 时间：2013-01-24T10:10:00.237
> 
> 标签：android

我得到了一个财产，坚持共同的偏好。

整个代码中有两个地方引用它：

```
firstRunTimestamp = wmbPreference.getLong(ApplicationData.ParametersInternals.FIRST_RUN_DATE, 0);

editor.putLong(ApplicationData.ParametersInternals.FIRST_RUN_DATE, new Date().getTime()); 
```

在我的日志中我发现了这个异常

```
"java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Long at android.app.SharedPreferencesImpl.getLong(" 
```

并且堆栈表明此代码在访问此属性的方法中，任何人都可以解释它是如何可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:15:40.770

`SharedPreference`以键值对的形式存储所有数据。键和值都是字符串。（如果您将 SharedPreference 的值显式存储为 Long，则情况并非如此。请查看我对下面的回复。）

您需要将字符串中的 Long 值解析为

```
firstRunTimestamp = Long.parseLong(wmbPreference.getString(ApplicationData.ParametersInternals.FIRST_RUN_DATE, "0")); //Notice here, the default value is also made a string. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-18T14:30:34.207

Check if you don't have a preference with the same key value in your `preference.xml`. Note that preferences defined in `preference.xml` are always stored as `String` values.

* * *

Another solution - if you first define a preference key as a `int` from runtime and later on you decide to define the same key as a `String`, it can cast a `ClassCastExcepion`, although you've changed your code. This is because this key figures in shared preferences file as a `Int`. To avoid this [delete shared preferences file, from your code or from your device depending on needs](https://stackoverflow.com/questions/3687315/deleting-shared-preferences?rq=1 "Delete shared preferences") and reinstall your app.

# api - 在 System.Data.Common 和 System.Data.Entity.Core.Common 中找不到类型 DbCommandDefinition

> ID：14498700
> 
> 赞同：0
> 
> 时间：2013-01-24T10:10:00.983
> 
> 标签：api, web, dbcommand

可以帮助我解决此错误的人：

> > [InvalidOperationException：在 System.Data.Common 和 System.Data.Entity.Core.Common 中找不到类型 DbCommandDefinition]
> > 
> > HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.SetupDatabaseDefaultConnectionFactoryIfNeeded() +913 HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.SetupEntityFrameworkIntegration() +19 HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.Initialize() +37 FruconService.App_Start.EntityFramework .PreStart() +23
> > 
> > [TargetInvocationException: 调用的目标已抛出异常。]
> > System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo 方法, 对象目标, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +0
> > System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo方法，对象目标，Object[] 参数，签名 sig，MethodAttributes methodAttributes，RuntimeType typeOwner) +72
> > System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfoculture, Boolean skipVisibilityChecks) + 335
> > System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化) +28 System.Reflection.MethodBase.Invoke(Object obj, Object[] 参数) +19
> > WebActivator.BaseActivationMethodAttribute.InvokeMethod () +221
> > WebActivator.ActivationManager.RunActivationMethods() +491
> > WebActivator.ActivationManager.RunPreStartMethods() +28
> > WebActivator.ActivationManager.Run() +55
> > 
> > [InvalidOperationException：在类型 WebActivator.ActivationManager 上运行的预应用程序启动初始化方法引发异常，并显示以下错误消息：调用目标已引发异常..]
> > System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection` 1 个方法）+423
> > System.Web.Compilation.BuildManager.CallPreStartInitMethods() +306
> > System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677
> > 
> > [HttpException (0x80004005): 在类型 WebActivator.ActivationManager 上运行的预应用程序启动初始化方法引发异常，并显示以下错误消息：调用目标已引发异常..]
> > System.Web.HttpRuntime.FirstRequestInit(HttpContext上下文）+9088796 System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext 上下文）+97 System.Web.HttpRuntime.ProcessRequestInternal（HttpWorkerRequest wr）+258”

它出现在部署在我们的网络服务器上的 MVC4 Web api 上。我们注意到重新部署二进制文件后错误暂时消失了。然后，几个小时后错误又回来了。

设置：WC4 wep api EF5 + EF5.x VB.Net 数据库上下文生成器

提前致谢！

编辑：我注意到堆栈跟踪中对 HibernateRhinos 的引用。这是我尝试过的第 3 方 EF-profiler 的一部分。
现在，我从项目中删除了这个分析器，以查看错误是否再次出现。老实说，我怀疑这个组件....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:43:41.237

好的，我自己回答这个话题。问题肯定与第 3 方组件有关。自从我删除它以来，我没有问题。

我发布这个是因为它可以帮助其他人......

# c++ - dup2 复制而不是重定向

> ID：14498701
> 
> 赞同：3
> 
> 时间：2013-01-24T10:10:10.707
> 
> 标签：c++

我的代码开头有以下内容，用于将标准输出重定向到文件。我希望将字符串发送到 stdout 和文件，而不是将发送到 stdout 的字符串重定向到**文件**。如何从我的代码中执行此操作？

```
int main(int argc, char** argv)
{
    int file = open("out.txt", O_APPEND | O_WRONLY);
    if(file < 0)    return 1;
    if(dup2(file,1) < 0)    return 1;
    ...
} 
```

**更新**

请不要说我的代码正在使用 printf 和其他 c 函数来写入标准输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:20:57.827

打开管道到`tee`，然后写入。

```
// be careful to quote the file argument properly!
FILE *fp = popen("tee out.txt", "w"); 
```

您无法在 POSIX 系统中的文件描述符或 stdio 级别获得所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:21:46.997

如果您希望它与 一起工作`printf`，我只能看到两种可能性：要么仅打印到标准输出并使用该`tee`实用程序将所有内容也写入外部文件，要么编写一个`printf`调用`printf`两次的包装器，一次用于写入文件，一次用于写入文件用于写入标准输出（以及您在代码中使用的所有其他 c 函数以打印到标准输出）。你不能只使用`dup`/做你想做的事`dup2`。

# python - matplotlib 中的自定义绘图线型

> ID：14498702
> 
> 赞同：5
> 
> 时间：2013-01-24T10:10:15.493
> 
> 标签：python, matplotlib, linestyle

我正在尝试使用`matplotlib`在点附近带有空格的线条来实现图形，例如：

[![图.png](../Images/1be6ddd4557e88a844c5f26be3db8875.png)](https://i.stack.imgur.com/A6PS6.png)
[（来源：[simplystatistics.org](http://simplystatistics.org/wp-content/uploads/2013/01/Beijingair.png)）]

我知道`set_dashes`函数，但它从起点设置周期性破折号，而不控制终点破折号。

**编辑：**我做了一个解决方法，但结果图只是一堆通常的线条，它不是一个对象。它还使用了另一个库`pandas`，奇怪的是，它的工作方式并不完全符合我的预期——我想要相等的偏移量，但不知何故，它们显然与长度相关。

```
import numpy as np
import matplotlib
import matplotlib.pyplot as plt
import pandas as pd

def my_plot(X,Y):
  df = pd.DataFrame({
    'x': X,
    'y': Y,
  })
  roffset = 0.1
  df['x_diff'] = df['x'].diff()
  df['y_diff'] = df['y'].diff()

  df['length'] = np.sqrt(df['x_diff']**2 + df['y_diff']**2)
  aoffset = df['length'].mean()*roffset

  # this is to drop values with negative magnitude
  df['length_'] = df['length'][df['length']>2*aoffset]-2*aoffset 

  df['x_start'] = df['x']             -aoffset*(df['x_diff']/df['length'])
  df['x_end']   = df['x']-df['x_diff']+aoffset*(df['x_diff']/df['length'])
  df['y_start'] = df['y']             -aoffset*(df['y_diff']/df['length'])
  df['y_end']   = df['y']-df['y_diff']+aoffset*(df['y_diff']/df['length'])

  ax = plt.gca()
  d = {}
  idf = df.dropna().index
  for i in idf:
    line, = ax.plot(
      [df['x_start'][i], df['x_end'][i]],
      [df['y_start'][i], df['y_end'][i]],
      linestyle='-', **d)
    d['color'] = line.get_color()
  ax.plot(df['x'], df['y'], marker='o', linestyle='', **d)

fig = plt.figure(figsize=(8,6))
axes = plt.subplot(111)
X = np.linspace(0,2*np.pi, 8)
Y = np.sin(X)
my_plot(X,Y)
plt.show() 
```

![在此处输入图像描述](../Images/71ef7d710e8f176a333b0fc5003b63ff.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:24:19.790

是否可以在标记周围制作一个厚厚的白色边框？它不是自定义线条样式，而是获得类似效果的简单方法：

```
y = np.random.randint(1,9,15)

plt.plot(y,'o-', color='black', ms=10, mew=5, mec='white')
plt.ylim(0,10) 
```

![在此处输入图像描述](../Images/c3193c1ccf5f4a59c2c8199d9a078688.png)

这里的关键是论点

*   `mec='white'`, 白色标记边缘颜色
*   `ms=10`, 标记大小 10 个点（这是相当大的），
*   `mew=5`, 标记边缘宽度 5 点，因此这些点实际上是 10-5=5 点大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T16:29:49.777

好的，我已经做了一个有点令人满意的解决方案。它很罗嗦，仍然有点骇人听闻，但它确实有效！它在每个点周围提供**固定的显示偏移**，它反对交互式的东西——缩放、平移等——并且无论你做什么都保持相同的显示偏移。

它通过`matplotlib.transforms.Transform`为图中的每个线块创建自定义对象来工作。这当然是一个缓慢的解决方案，但这种图不打算用于数百或数千个点，所以我想性能并不是什么大问题。

理想情况下，所有这些补丁都需要组合成一个单一的“情节线”，但它适合我。

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt

class MyTransform(mpl.transforms.Transform):
  input_dims = 2
  output_dims = 2
  def __init__(self, base_point, base_transform, offset, *kargs, **kwargs):
    self.base_point = base_point
    self.base_transform = base_transform
    self.offset = offset
    super(mpl.transforms.Transform, self).__init__(*kargs, **kwargs)
  def transform_non_affine(self, values):
    new_base_point = self.base_transform.transform(self.base_point)
    t = mpl.transforms.Affine2D().translate(-new_base_point[0], -new_base_point[1])
    values = t.transform(values)
    x = values[:, 0:1]
    y = values[:, 1:2]
    r = np.sqrt(x**2+y**2)
    new_r = r-self.offset
    new_r[new_r<0] = 0.0
    new_x = new_r/r*x
    new_y = new_r/r*y
    return t.inverted().transform(np.concatenate((new_x, new_y), axis=1))

def my_plot(X,Y):
  ax = plt.gca()
  line, = ax.plot(X, Y, marker='o', linestyle='')
  color = line.get_color()

  size = X.size
  for i in range(1,size):
    mid_x = (X[i]+X[i-1])/2
    mid_y = (Y[i]+Y[i-1])/2

    # this transform takes data coords and returns display coords
    t = ax.transData

    # this transform takes display coords and 
    # returns them shifted by `offset' towards `base_point'
    my_t = MyTransform(base_point=(mid_x, mid_y), base_transform=t, offset=10)

    # resulting combination of transforms
    t_end = t + my_t

    line, = ax.plot(
      [X[i-1], X[i]],
      [Y[i-1], Y[i]],
      linestyle='-', color=color)
    line.set_transform(t_end)

fig = plt.figure(figsize=(8,6))
axes = plt.subplot(111)

X = np.linspace(0,2*np.pi, 8)
Y = np.sin(X)
my_plot(X,Y)
plt.show() 
```

![在此处输入图像描述](../Images/ff6a1feea5d3746576c697225b6bd074.png)

# java - JPA - 如何将子实体添加到聚合根

> ID：14498703
> 
> 赞同：3
> 
> 时间：2013-01-24T10:10:16.647
> 
> 标签：java, jpa, domain-driven-design

这是我第一次申请DDD。我使用 EclipseLink。我有以下问题。我的根实体有一个子实体 ( `child`)。该子实体还有一个子实体 ( `childSpecs`)。

我想让根实体 ( `root`) 负责创建和添加子实体：

```
root.addChild(arg1, agr2); 
```

但`child`不能没有`childSpecs`. 我`child`负责创建`childSpecs`.

因此，当调用`addChild(arg1, arg2)`对象时`child`和`childSpecs`被创建并且彼此相关并且`root`. 但是`childSpecs`有一个强制字段，它保留`child`. 但是在`child`创建时它还没有一个 id。这将在持久化时创建。（目前我使用 JPA 功能 TableGenerator 来生成我的代理键值。）有人知道解决这个问题的解决方案吗？我的想法是建立自己的 id-generator。但是在考虑并发时这可能有点复杂。

**附加信息：**

```
@Entity
@Table (name = "root")
public class Root implements Serializable {
    @Id
    @Basic (optional = false)
    @Column (name = "root_id")
    private Integer        rootId;

    @OneToMany (mappedBy = "root")
    private List<RootChild>   rootChildList; 
```

-

```
@Entity
@Table (name = "root_child")
public class RootChild implements Serializable {
    @Id
    @Basic (optional = false)
    @Column (name = "root_child_id")
    private Integer           rootChildId;

    @JoinColumn (name = "root_id", referencedColumnName = "root_id")
    @ManyToOne
    private Root               root;

    @OneToMany (cascade = CascadeType.ALL, mappedBy = "rootChild")
    private List<RootChildSpecs> rootChildSpecsList; 
```

-

```
@Entity
@Table (name = "root_child_specs")
public class RootChildSpecs implements Serializable, Mutable<RootChildSpecs> {
    @EmbeddedId
    protected RootChildSpecsPK rootChildSpecsPK;

    @JoinColumn (
        name                 = "root_child_id",
        referencedColumnName = "root_child_id",
        insertable           = false,
        updatable            = false
        )

     @ManyToOne (optional = false)
     private RootChild          rootChild; 
```

-

```
@Embeddable
public class RootChildSpecsPK implements Serializable {
    @Basic (optional = false)
    @Column (name = "root_child_id")
    private int rootChildId;

    @Basic (optional = false)
    @Column (name = "d_rec")
    private int dRec;

    @Basic (optional = false)
    @Column (name = "t_rec")
    private int tRec; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:52:28.363

JPA 2.0 允许从引用派生 ID，允许您将 RootChildSpecs->RootChild 标记为 rootChildSpecs 的 ID 的一部分，并在生成时从中提取值。一个简单的例子在这里[http://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/DerivedIdentifiers](http://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/DerivedIdentifiers)

您可以使用@mapsId 标记关系，以指向它在embeddedid 中映射的属性，因为Embeddedid 和pk 类本身不能包含关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:56:09.847

我建议不要使用 EmbeddedId，而是将 @Id 放在您的 @ManyToOne 到 RootChild 并使用 @IdClass。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0)

# ios - viewWillAppear 期间的静态 UITableViewCell 更改未反映在显示中

> ID：14498706
> 
> 赞同：4
> 
> 时间：2013-01-24T10:10:22.837
> 
> 标签：ios, objective-c, uitableview

我正在使用`UITableViewCell`Storyboard 中配置的一些 static 来显示一些设置信息。

如果关闭其他设置之一，则应禁用其他一些单元格。

为了使单元格处于正确状态，在`viewWillAppear`我从 NSUserDefaults 读取设置期间，然后相应地更改单元格。

```
- (void) viewWillAppear:(BOOL)animated
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"OtherCellEnabled"]) {
            [self otherCell].alpha = 1.0;
            [self otherCell].userInteractionEnabled = YES;
        }
        else {
            NSLog(@"Changing alpha to 0.3");
            [self otherCell].alpha = 0.3;
            [self otherCell].userInteractionEnabled = NO;
        } 
```

问题是，当我实际运行程序时，即使它在日志中说 alpha 已更改，但 alpha 实际上并没有更改。`userInteractionEnabled`似乎确实存在，但 alpha 保持在 1.0 。

这不是单元重用的问题，也不是单元没有及时实例化的问题，因为其他设置可以更改。

将其从 cell.alpha 更改为 cell.contentView.alpha 有效，但这是一个不同的设置。

似乎所有设置都“坚持”，除了`alpha`设置，不知何故被覆盖。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:49:30.307

我正在回答我自己的问题，因为我能够解决它。

首先，我尝试将 alpha 更改放入`cellForRowAtIndexPath`，但这也不起作用。经过大量修改后，我得出的结论是`UITableViewCell`alpha 设置在某种程度上是特殊的，因为它不断被覆盖或设置为 1.0。

我找到了两个修复：

**首先**，不要在方法中做改变`cellForRowAtIndexPath`，而是在`UITableViewDelegate`方法中做`willDisplayCell`。无论出于何种原因，在这种方法中更改单元格的 alpha 值实际上都会坚持下去。当然，如果你这样做，你必须重新安排你的逻辑，以便逐个单元地完成更改，即：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell  
                                         forRowAtIndexPath:(NSIndexPath *)indexPath {
if (cell == [self otherCell]) {
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"OtherCellEnabled"]) {
        cell.alpha = 1.0;
        cell.userInteractionEnabled = YES;
    }
    else {
        NSLog(@"Changing alpha to 0.3");
        cell.alpha = 0.3;
        cell.userInteractionEnabled = NO;
    }
}
} 
```

正如我所说，我不确定为什么这适用于`willDisplayCell`但不适用于`cellForRowAtIndexPath`. 其他人似乎也不确定：

[-[UITableViewDelegate willDisplayCell:forRowAtIndexPath:] 是什么？](https://stackoverflow.com/questions/1890265/what-is-uitableviewdelegate-willdisplaycellforrowatindexpath-for)

[带有 alpha 颜色的 UITableView 背景导致 UITableViewCell 出现问题](https://stackoverflow.com/questions/3916348/uitableview-background-with-alpha-color-causing-problem-with-uitableviewcell)

**另一种解决方案**是使用另一个设置来实现相同效果，而不是使用有问题的 alpha。就我而言，那是`contentView.alpha`和`backgroundColor`。无论出于何种原因，这些设置都会保留，您甚至可以设置它们`viewWillAppear`，它会按预期工作：

```
- (void) viewWillAppear:(BOOL)animated {
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"OtherCellEnabled"]) {
            [self otherCell].backgroundColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
            [self otherCell].contentView.alpha = 1.0;
            [self otherCell].userInteractionEnabled = YES;
        }
        else {
            NSLog(@"Changing alpha to 0.3");
            [self otherCell].backgroundColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.3];
            [self otherCell].contentView.alpha = 0.3;
            [self otherCell].userInteractionEnabled = NO;
        }
} 
```

第二种方法的缺点是现在您正在覆盖 Storyboard 的单元格颜色设置，但是如果您关心的话，您可以通过询问 Storyboard 的颜色来解决这个问题。

我不确定为什么`cell.alpha`会受到不同的对待。也许与静态单元的实现方式有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:29:32.583

您可以尝试使用以下方法提示应在您的`if { .. } else { .. }`,之后重绘单元格`setNeedsDisplay`：

```
[self otherCell setNeedsDisplay] 
```

根据您的评论，您如何到达`otherCell`？ [这是一个可能有帮助的帖子](http://mark.themoseleys.com/2010/07/uitableviewcell-wont-update-arghhhh/)吗？

# mysql - “表‘users.my_aspnet_Sessions’不存在”

> ID：14498707
> 
> 赞同：2
> 
> 时间：2013-01-24T10:10:25.027
> 
> 标签：mysql, mysql-connector

我正在为 ASP.NET 成员使用 MySQL 会话状态提供程序。我在配置会话状态提供程序时使用了 MySQL 网站配置实用程序，该工具继续创建以下模式：

Tables_in_users

```
my_aspnet_applications
my_aspnet_membership
my_aspnet_profiles
my_aspnet_roles
my_aspnet_schemaversion
my_aspnet_sessioncleanup
my_aspnet_sessions
my_aspnet_users
my_aspnet_usersinroles 
```

自动会话清理实用程序不断抛出以下异常的问题：

与数据源通信时发生异常。

```
Action: CleanupOldSessionsException: MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'users.my_aspnet_Sessions' doesn't exist
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Web.SessionState.MySqlSessionStateStore.DeleteTimedOutSessionsWithCallback()
   at MySql.Web.SessionState.MySqlSessionStateStore.DeleteTimedOutSessions()
   at MySql.Web.SessionState.MySqlSessionStateStore.CleanupOldSessions(Object o) 
```

例外是完全有效的，“users.my_aspnet_Sessions”确实不存在。有没有办法解决问题？我是否错过了配置中的某些内容？

我已经尝试过重命名表，但这会产生其他异常，因为连接器的其他组件仍然需要当前名称。

任何帮助将不胜感激。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T12:11:20.887

正如我在评论中所说，我遇到了同样的问题。

“有同样的问题。在我的情况下，我知道原因，只是缺少解决方案......我的数据库位于 linux 服务器中，因此表名区分大小写...... MySQL 创建了一个名为 my_aspnet_sessions 的表，并在提供程序的某处尝试以 my_aspnet_Sessions 的身份访问它”

该问题是由 mysql 连接器中的错误引起的，它已在 6.8.3 版（[http://dev.mysql.com/downloads/file.php?id=450594](http://dev.mysql.com/downloads/file.php?id=450594)）中修复。

只需安装并将您的状态服务器提供程序版本更改为“Version = 6.8.3.0”，它应该可以正常工作。

# node.js - Node.js + Express 中的 request.cookies['name'] 和 request.cookies.name 有什么区别

> ID：14498710
> 
> 赞同：0
> 
> 时间：2013-01-24T10:10:33.900
> 
> 标签：node.js, cookies, express

考虑我在我使用 express 框架的 cookieParser 中间件的 Node.js 应用程序中保存一个 cookie。

```
app.use(express.cookieParser());

app.get('/setCookie', function(req, res){
   res.cookie('String_cookieName', 'String_value', { expires: new Date(Date.now() + 18000000), httpOnly: true }); // +5 Hours expiry
}); 
```

在阅读它们时，我遇到了两个选择：

1.  `request.cookies['String_cookieName']`
2.  `request.cookies.name`

两者都会返回我`string_value`为我的 cookie ( `'String_cookieName'`) 设置的 ，否则如果过期`undefined`将被返回。

但我的问题是哪一个在性能方面更快/更高效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:18:54.373

Request.cookies 只是一个对象。您可以使用您编写的任一方法访问对象的任何成员。当您已经知道要访问的字段的名称时，通常使用 object.xxx，而当字段名称是动态的时，通常使用括号；例如：

```
var variable = "foo";
object[variable] = "bar";

variable = "test";
object[variable] = "qwax"

console.log(object.foo); //"bar"
console.log(object.test); //"qwax" 
```

据我所知，两者都没有比另一个快得多，因此如果您正在访问静态字段，则可以互换使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:17:39.777

性能实际上是相同的，[请参阅 jsperf。](http://jsperf.com/accessing-object-properties-test)

许多 cookie 示例使用方括号将属性作为字符串，因为通常包含使用点表示法无法直接访问的字符。

例子：

```
cookies['connect.sid']  // OK
cookies.connect.sid     // error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:33:59.947

没有区别。只是 JavaScript 有两种访问对象字段的方式。

在我看来，最好使用像 request.cookies.name 然后 request.cookies['name'] 这样的简单表示法，除非您循环遍历对象的许多字段并为每个字段应用相同的操作。

```
//lets say you have object like one below: var someObj = {};
someObj.x1 = 1; 
someObj.x2 = 2; 
someObj.x3 = 3; 
someObj.x4 = 4;
someObj.x5 = 5; 
... 
someObj.x20 = 20;

//And if you want to output properties 3 to 12 
//you can do like that
for(var i = 3; i<12; ++i)
{
   console.log(someObj['x' + i]); 
} 
```

否则，只需使用简单的符号，这样您就可以使代码更具可读性，并且其他开发人员也更容易理解

# r - R For循环执行Fisher检验 - 错误消息

> ID：14498719
> 
> 赞同：4
> 
> 时间：2013-01-24T10:11:09.593
> 
> 标签：r, statistics

我的数据框如下所示：

```
595.00000    18696      984.00200     32185    Group1  
935.00000    18356      1589.00000    31580    Group2            
40.00010     19251      73.00000      33096    Group3            
1058.00000   18233      1930.00000    31239    Group4                
19.00000     19272      27.00000      33142    Group5            
1225.00000   18066      2149.00000    31020    Group6  
.... 
```

对于我想做的每组Fisher精确检验。

```
table <- matrix(c(595.00000, 984.00200, 18696, 32185), ncol=2, byrow=T)  
Group1 <- Fisher.test(table, alternative="greater") 
```

尝试使用以下方法遍历数据框：

```
for (i in 1:nrow(data.frame))  
 {  
 table= matrix(c(data.frame$V1, data.frame$V2, data.frame$V3, data.frame$V4), ncol=2, byrow=T)    
fisher.test(table, alternative="greater")  
} 
```

但收到错误消息

```
Error in fisher.test(table, alternative = "greater") :  
FEXACT error 40\.  
Out of workspace.  
In addition: Warning message:  
In fisher.test(table, alternative = "greater")  :  
'x' has been rounded to integer: Mean relative difference: 2.123828e-06 
```

我该如何解决这个问题，或者用另一种方式循环数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:13:22.443

你的第一个错误是：`Out of workspace`

```
?fisher.test
fisher.test(x, y = NULL, workspace = 200000, hybrid = FALSE,
        control = list(), or = 1, alternative = "two.sided",
        conf.int = TRUE, conf.level = 0.95,
        simulate.p.value = FALSE, B = 2000) 
```

您应该尝试增加`workspace`（默认 = 2e5）。

但是，这发生在您的情况下，因为您拥有非常巨大的价值。根据经验，如果矩阵的所有元素 > 5（或者在您的情况下为 10，因为 df = 1），那么您*可以*使用`chisq.test`. 对于您的情况，我认为您*应该*使用`chisq.test`.

发生这种`warning message`情况是因为您的值不是整数（595.000）等。因此，如果您*真的*想`fisher.test`递归使用 a ，请执行此操作（假设您的数据在`df`并且是 a `data.frame`：

```
# fisher.test with bigger workspace
apply(as.matrix(df[,1:4]), 1, function(x) 
         fisher.test(matrix(round(x), ncol=2), workspace=1e9)$p.value) 
```

或者，如果您宁愿用 a 代替`chisq.test`（我认为您应该用这些巨大的值来获得性能增益，而 p 值没有显着差异）：

```
apply(as.matrix(df[,1:4]), 1, function(x) 
         chisq.test(matrix(round(x), ncol=2))$p.value) 
```

这将提取 p 值。

**编辑 1：**我刚刚注意到您使用`one-sided Fisher's exact test`. 也许您应该继续使用具有更大工作空间的 Fisher 检验，因为我不确定是否有独立性的单边卡方检验，因为它已经从`right-tail`概率中计算出来（并且您不能将 p 值除以 2 作为它的不对称）。

**编辑 2：**由于您需要具有 p 值的组名并且您已经有一个 data.frame，我建议您使用`data.table`包如下：

```
# example data
set.seed(45)
df <- as.data.frame(matrix(sample(10:200, 20), ncol=4))
df$grp <- paste0("group", 1:nrow(df))
# load package
require(data.table)
dt <- data.table(df, key="grp")
dt[, p.val := fisher.test(matrix(c(V1, V2, V3, V4), ncol=2), 
                workspace=1e9)$p.value, by=grp]
> dt
#     V1  V2  V3  V4    grp        p.val
# 1: 130  65  76  82 group1 5.086256e-04
# 2:  70  52 168 178 group2 1.139934e-01
# 3:  55 112 195  34 group3 7.161604e-27
# 4:  81  43  91  80 group4 4.229546e-02
# 5:  75  10  86  50 group5 4.212769e-05 
```

# delegates - 无法将 lambda 表达式转换为系统委托

> ID：14498721
> 
> 赞同：0
> 
> 时间：2013-01-24T10:11:10.947
> 
> 标签：delegates, lambda, system, expression

我正在创建 WPF 应用程序。但是在使用 lambda epxressions 时出现错误：

```
Dispatcher.BeginInvoke(() => MessageBox.Show(e.Error.Message));
Dispatcher.BeginInvoke(() => NavigationService.Navigate(new Uri(url, UriKind.Relative))); 
```

请让我知道如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:14:40.143

将您的 lambda 转换为操作：

```
Dispatcher.BeginInvoke((Action)(() => MessageBox.Show(e.Error.Message))); 
```

# python - 突变残基和位置的数字编码

> ID：14498730
> 
> 赞同：3
> 
> 时间：2013-01-24T10:11:54.243
> 
> 标签：python, alignment

我正在编写一个 python 程序，它必须计算一组字符串**的突变残基和位置**的数字编码。这些字符串是蛋白质序列。这些序列存储在 fasta 格式文件中，每个蛋白质序列用逗号分隔。序列不同蛋白质的长度可能不同。在此我试图找到突变的位置和序列。
我使用以下代码来获取它。

```
a = 'AGFESPKLH'
b = 'KGFEHMKLH'
for i in range(len(a)):
  if a[i] != b[i]:
     print i, a[i], b[i] 
```

但是我想要序列文件作为*输入文件*。下图将讲述我的项目。在这个图中，第一个框代表输入文件序列的对齐。最后一个框代表输出文件。我怎样才能在 Python 中做到这一点？请帮我。谢谢大家的时间。

例子：

```
input file

MTAQDD,MTAQDD,MTSQED,MTAQDD,MKAQHD

        positions  1  2  3  4  5  6                         1  2  3  4  5  6

protein sequence1  M  T  A  Q  D  D                            T  A     D

protein sequence2  M  T  A  Q  D  D                            T  A     D

protein sequence3  M  T  S  Q  E  D                            T  S     E

protein sequence4  M  T  A  Q  D  D                            T  A     D

protein sequence5  M  K  A  Q  H  D                            K  A     H

     PROTEIN SEQUENCE ALIGNMENT                          DISCARD NON-VARIABLE REGION 
```

* * *

```
 positions  2  2  3  3  5  5  5

protein sequence1  T     A     D   

protein sequence2  T     A     D   

protein sequence3  T        S     E

protein sequence4  T     A     D   

protein sequence5     K  A           H

   MUTATED RESIDUE IS SPLITED TO SEPARATE COLUMN 
```

* * *

输出文件应该是这样的：

```
position+residue   2T  2K  3A  3S  5D  5E  5H

       sequence1   1   0   1   0   1   0   0

       sequence2   1   0   1   0   1   0   0

       sequence3   1   0   0   1   0   1   0

       sequence4   1   0   1   0   1   0   0

       sequence5   0   1   1   0   0   0   1

    (RESIDUES ARE CODED 1 IF PRESENT, 0 IF ABSENT) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:28:12.693

像这样的东西？

```
ls = 'MTAQDD,MTAQDD,MTSQED,MTAQDD,MKAQHD'.split(',')

pos = [set(enumerate(x, 1)) for x in ls]
alle = sorted(set().union(*pos))

print '\t'.join(str(x) + y for x, y in alle)
for p in pos:
    print '\t'.join('1' if key in p else '0' for key in alle) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:23:21.433

如果您要使用表格数据，请考虑[pandas](http://pandas.pydata.org/)：

```
from pandas import *

data = 'MTAQDD,MTAQDD,MTSQED,MTAQDD,MKAQHD'

df = DataFrame([list(row) for row in data.split(',')])

print DataFrame({str(col)+val:(df[col]==val).apply(int) 
        for col in df.columns for val in set(df[col])}) 
```

*输出：*

```
 0M  1K  1T  2A  2S  3Q  4D  4E  4H  5D
0   1   0   1   1   0   1   1   0   0   1
1   1   0   1   1   0   1   1   0   0   1
2   1   0   1   0   1   1   0   1   0   1
3   1   0   1   1   0   1   1   0   0   1
4   1   1   0   1   0   1   0   0   1   1 
```

* * *

如果要删除所有列：

```
print df.select(lambda x: not df[x].all(), axis = 1)    

   1K  1T  2A  2S  4D  4E  4H
0   0   1   1   0   1   0   0
1   0   1   1   0   1   0   0
2   0   1   0   1   0   1   0
3   0   1   1   0   1   0   0
4   1   0   1   0   0   0   1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:31:22.187

```
protein_sequence = "MTAQDDSYSDGKGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYLGAVFQLN,MTSQEDSYSDGKGNYNTIMPGAVFQLN,MTAQDDSYSDGRGDYNTIMPGAVFQLN,MKAQDDSYSDGRGNYNTIYLGAVFQLQ,MKSQEDSYSDGRGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYPGAVFQLN,MTAQEDSYSDGRGEYNTIYLGAVFQLQ,MTAQDDSYSDGKGDYNTIMLGAVFQLN,MTAQDDSYSDGRGEYNTIYLGAVFQLN"

#Parse the file
proteins = protein_sequence.split(",")
#For each protein sequence remove the duplicates
proteins = map(lambda x:"".join(set(list(x))), proteins)

#Create result
result = []
key_set = ['T', 'K', 'A', 'S', 'D', 'E', 'K', 'R', 'D', 'N', 'E', 'Y', 'M', 'L', 'P', 'N', 'Q']
for protein in proteins:
    local_dict = dict(zip(key_set, [0] * len(key_set)))
    #Split the protein in amino acid
    components = list(protein)
    for amino_acid in components:
        local_dict[amino_acid] = 1
    result.append((protein, local_dict)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:36:33.247

您可以使用[pandas](http://pandas.pydata.org/)函数`get_dummies`来完成大部分繁重的工作：

```
In [11]: s # a pandas Series (DataFrame's column)
Out[11]: 
0    T
1    T
2    T
3    T
4    K
Name: 1

In [12]: pd.get_dummies(s, prefix=s.name, prefix_sep='')
Out[12]: 
   1K  1T
0   0   1
1   0   1
2   0   1
3   0   1
4   1   0 
```

要将数据放入 DataFrame 中，您可以使用：

```
df = pd.DataFrame(map(list, 'MTAQDD,MTAQDD,MTSQED,MTAQDD,MKAQHD'.split(',')))

In [20]: df
Out[20]: 
   0  1  2  3  4  5
0  M  T  A  Q  D  D
1  M  T  A  Q  D  D
2  M  T  S  Q  E  D
3  M  T  A  Q  D  D
4  M  K  A  Q  H  D 
```

并找到那些具有不同值的列：

```
In [21]: (df.ix[0] != df).any()
Out[21]: 
0    False
1     True
2     True
3    False
4     True
5    False 
```

把这一切放在一起：

```
In [31]: I = df.columns[(df.ix[0] != df).any()]

In [32]: J = (pd.get_dummies(df[i], prefix=df[i].name, prefix_sep='') for i in I)

In [33]: df[[]].join(J)
Out[33]: 
   1K  1T  2A  2S  4D  4E  4H
0   0   1   1   0   1   0   0
1   0   1   1   0   1   0   0
2   0   1   0   1   0   1   0
3   0   1   1   0   1   0   0
4   1   0   1   0   0   0   1 
```

# ios - 如何使用带有工厂模式视图控制器实例化的故事板？

> ID：14498736
> 
> 赞同：2
> 
> 时间：2013-01-24T10:12:06.753
> 
> 标签：ios, cocoa, factory, uistoryboard, encapsulation

如何使用情节提要控制视图控制器的创建？在阅读了关于封装的好处和单例的问题之后，我重构了我的代码。我使用工厂来实例化我的 vc 并为它们提供依赖项。但现在我想使用故事板。有没有办法让故事板调用工厂方法？目前，当我需要实例化一个子视图控制器时，我有这样的代码：

```
UIViewController *vc = [self.factory buildChildViewController]; 
```

在工厂方法中，所有依赖项都得到了处理：

```
- (UIViewController*) buildChildViewController {
    ChildViewController *cvc = [[ChildViewController alloc] initWithNibName:nil bundle:nil];
    [cvc setDatabase:self.database];
    [cvc setQuery:[self buildSomeQuery:cvc]];
    return cvc;
}
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:08:51.117

为此，您必须继承`UIStoryBoard`并覆盖`-instantiateViewControllerWithIdentifier:`. 但是，似乎无法将类分配给情节提要文件。

`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`但是，您可以通过在您的视图控制器中为您的控制器提供依赖项。

我认为故事板不是为了重用而设计的，它只是让你更容易将可重用的组件连接在一起。就 OOP 而言，这不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-08T14:21:40.597

我一直在使用本文中显示的方法来使用情节提要制作工厂模式：

[https://medium.com/ios-os-x-development/safer-uiviewcontroller-creation-when-using-storyboards-1915ac2b2c80#.ebor5maq7](https://medium.com/ios-os-x-development/safer-uiviewcontroller-creation-when-using-storyboards-1915ac2b2c80#.ebor5maq7)

我真正喜欢这种方法的地方在于，您可以使用情节提要进行依赖注入，从而使我可以轻松地在类之间传递我的 dataApi。

我也不再需要使用`prepareWithSegue`. 相反，我只是像这样初始化视图：

```
func didSelectApplication(application: Application) {

    let factory = StoryboardViewControllerFactory(storyboard: UIStoryboard(name: "Main", bundle: nil))
    let applicationController = factory.createApplicationViewController(application, dataApi: dataApi)
    navigationController?.pushViewController(applicationController, animated: true)
} 
```

由于`prepareForSegue`我无法将应用程序作为参数传递，所以我在类上有一个属性。现在我可以将它传递给消除了对类属性的需要的方法。我个人更喜欢的东西。

# sql - 如何将 varchar 转换为十进制，但一列或多列除外

> ID：14498737
> 
> 赞同：0
> 
> 时间：2013-01-24T10:12:07.593
> 
> 标签：sql, database

当我尝试将 varchar 字段转换为十进制时，我在排除一列或多列时遇到了一些问题。我的语句如下：

```
SELECT title, CAST(sumValues AS DECIMAL(9,2)
WHERE title != 'Total Clients') AS sumVal
FROM client_summary 
```

我想将该`sumValues`字段转换为小数，但标题为“总客户”的列除外（计算人数时没有小数）。这怎么可能是我合适的陈述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:13:48.607

您可以试试这个：注意，语句的所有部分都`case...when...else`必须返回相同类型的数据（或隐式转换）。

```
SELECT title, 
CASE WHEN title <> 'Total Clients' 
 THEN CAST( sumValues AS DECIMAL(9,2)) 
 ELSE <something else which must also be decimal> --or no else
 END AS sumVal 
FROM client_summary 
```

编辑：如果找不到通用类型，则必须使用两列。

```
SELECT title, 
    CASE WHEN title <> 'Total Clients' 
     THEN CAST( sumValues AS DECIMAL(9,2)) 
     END AS sumVal,
    sumValues as allSumValues
 FROM client_summary 
```

# r - 在 R 中执行 gstat 的克里格函数时出错

> ID：14498738
> 
> 赞同：4
> 
> 时间：2013-01-24T10:12:14.107
> 
> 标签：r, prediction, gstat

我想使用 gstat 包执行普通克里金法。我只有 17 个位置，这还不够，所以我还使用每个节点的时间数据作为辅助数据来构建变异函数。但是，我想出了这个错误，请在这件事上指导我。此外，gstat 不能处理近距离坐标，如果您知道 r 中另一个强大的包，请告诉我。

我正在使用的代码：

```
mat <- transform(mat, E = as.numeric(mat$E), N = as.numeric(mat$N))
 coordinates(mat) <- ~E+N
E.range <- as.integer(range(mat@coords[,1]))
N.range <- as.integer(range(mat@coords[,2]))
mat.new <- expand.grid(x=seq(from=E.range[1], to=E.range[2], by=35), y=seq(from=N.range[1], to=N.range[2], by=35) )
mat.new <- SpatialPoints(mat.new)
gridded(mat.new) <- FALSE

mat.mv=vgm(psill=1, model="Exp", nugget=.2, range=550)
mat.ok <- krige(X0~1, locations=mat.new  ,model=mat.mv , newdata=mat.new , data=mat) 
```

错误：

```
Error in gstat(formula = formula, data = locations, model = model, beta = beta,  : 
  formal argument "data" matched by multiple actual arguments 
```

数据：

```
 coordinates        X0
1   (2579410, 1079720) -0.586000
2   (2579330, 1079730) -2.184000
3   (2579260, 1079770) -2.532000
4   (2579930, 1080030) -0.714000
5   (2579700, 1079770) -2.452000
6   (2579540, 1079640) -1.134000
7   (2579860, 1079880) -1.204000
8   (2579540, 1079830) -2.068000
9   (2579870, 1079940) -0.506000
10  (2579560, 1079780) -1.390000
11  (2579990, 1080140) -0.530000
12  (2580010, 1080250) -0.234000
13  (2577970, 1079920) -1.860000
14  (2577850, 1079810) -1.794000
15  (2577790, 1079850) -1.136000
16  (2577930, 1079860) -1.428000
17  (2578060, 1079840) -1.610000
18  (2579410, 1079720) -0.724000
19  (2579330, 1079730) -2.322000
20  (2579260, 1079770) -2.542000
21  (2579930, 1080030) -0.826000
22  (2579700, 1079770) -2.334000
23  (2579540, 1079640) -1.122000
24  (2579860, 1079880) -1.272000
25  (2579540, 1079830) -2.210000
26  (2579870, 1079940) -0.624000
27  (2579560, 1079780) -1.216000
28  (2579990, 1080140) -0.644000
29  (2580010, 1080250) -0.156000
30  (2577970, 1079920) -1.736000
31  (2577850, 1079810) -1.676000
32  (2577790, 1079850) -0.536000
33  (2577930, 1079860) -1.534000
34  (2578060, 1079840) -1.794000
35  (2579410, 1079720) -0.444000
36  (2579330, 1079730) -1.832000
37  (2579260, 1079770) -2.108000
38  (2579930, 1080030) -0.030000
39  (2579700, 1079770) -1.556000
40  (2579540, 1079640) -0.832000
41  (2579860, 1079880) -1.028000
42  (2579540, 1079830) -1.880000
43  (2579870, 1079940) -0.032000
44  (2579560, 1079780) -0.748000
45  (2579990, 1080140)  0.012000
46  (2580010, 1080250)  0.138000
47  (2577970, 1079920) -1.882000
48  (2577850, 1079810) -1.496000
49  (2577790, 1079850) -0.376000
50  (2577930, 1079860) -1.758000
51  (2578060, 1079840) -1.518000
52  (2579410, 1079720) -0.854000
53  (2579330, 1079730) -1.924000
54  (2579260, 1079770) -1.986000
55  (2579930, 1080030) -0.768000
56  (2579700, 1079770) -2.324000
57  (2579540, 1079640) -1.564000
58  (2579860, 1079880) -1.732000
59  (2579540, 1079830) -2.212000
60  (2579870, 1079940) -0.852000
61  (2579560, 1079780) -1.774000
62  (2579990, 1080140) -0.802000
63  (2580010, 1080250) -0.656000
64  (2577970, 1079920) -1.830000
65  (2577850, 1079810) -1.322000
66  (2577790, 1079850) -0.276000
67  (2577930, 1079860) -1.470000
68  (2578060, 1079840) -1.602000
69  (2579410, 1079720) -0.828000
70  (2579330, 1079730) -2.156000
71  (2579260, 1079770) -2.246000
72  (2579930, 1080030) -0.488000
73  (2579700, 1079770) -1.890000
74  (2579540, 1079640) -1.366000
75  (2579860, 1079880) -1.366000
76  (2579540, 1079830) -2.108000
77  (2579870, 1079940) -0.514000
78  (2579560, 1079780) -1.460000
79  (2579990, 1080140) -0.412000
80  (2580010, 1080250) -0.088000
81  (2577970, 1079920) -2.096000
82  (2577850, 1079810) -1.870000
83  (2577790, 1079850) -0.898000
84  (2577930, 1079860) -1.796000
85  (2578060, 1079840) -2.084000
86  (2579410, 1079720) -0.728000
87  (2579330, 1079730) -2.024000
88  (2579260, 1079770) -2.538000
89  (2579930, 1080030) -0.292000
90  (2579700, 1079770) -1.958000
91  (2579540, 1079640) -1.378000
92  (2579860, 1079880) -1.392000
93  (2579540, 1079830) -1.846000
94  (2579870, 1079940) -0.314000
95  (2579560, 1079780) -1.306000
96  (2579990, 1080140) -0.328000
97  (2580010, 1080250)  0.058000
98  (2577970, 1079920) -1.546667
99  (2577850, 1079810) -1.776000
100 (2577790, 1079850) -0.324000
101 (2577930, 1079860) -1.620000
102 (2578060, 1079840) -1.764000
103 (2579410, 1079720) -0.314000
104 (2579330, 1079730) -1.774000
105 (2579260, 1079770) -2.074000
106 (2579930, 1080030)  0.150000
107 (2579700, 1079770) -1.484000
108 (2579540, 1079640) -1.108000
109 (2579860, 1079880) -0.930000
110 (2579540, 1079830) -1.614000
111 (2579870, 1079940)  0.006000
112 (2579560, 1079780) -0.840000
113 (2579990, 1080140)  0.034000
114 (2580010, 1080250)  0.300000
115 (2577970, 1079920) -1.954000
116 (2577850, 1079810) -1.940000
117 (2577790, 1079850) -0.744000
118 (2577930, 1079860) -1.892000
119 (2578060, 1079840) -1.852000
120 (2579410, 1079720) -1.014000
121 (2579330, 1079730) -2.214000
122 (2579260, 1079770) -2.536000
123 (2579930, 1080030) -0.462000
124 (2579700, 1079770) -2.086000
125 (2579540, 1079640) -1.512000
126 (2579860, 1079880) -1.446000
127 (2579540, 1079830) -1.908000
128 (2579870, 1079940) -0.488000
129 (2579560, 1079780) -1.636000
130 (2579990, 1080140) -0.406000
131 (2580010, 1080250)  0.030000
132 (2577970, 1079920) -1.738000
133 (2577850, 1079810) -1.868000
134 (2577790, 1079850) -0.336000
135 (2577930, 1079860) -1.702000
136 (2578060, 1079840) -1.756000
137 (2579410, 1079720) -1.284000
138 (2579330, 1079730) -2.452000
139 (2579260, 1079770) -2.948000
140 (2579930, 1080030) -1.366000
141 (2579700, 1079770) -2.460000
142 (2579540, 1079640) -2.008000
143 (2579860, 1079880) -1.860000
144 (2579540, 1079830) -2.460000
145 (2579870, 1079940) -1.370000
146 (2579560, 1079780) -2.208000
147 (2579990, 1080140) -1.072000
148 (2580010, 1080250) -0.594000
149 (2577970, 1079920) -1.548000
150 (2577850, 1079810) -1.742000
151 (2577790, 1079850) -0.926000
152 (2577930, 1079860) -1.630000
153 (2578060, 1079840) -1.576000
154 (2579410, 1079720) -0.618000
155 (2579330, 1079730) -1.836000
156 (2579260, 1079770) -2.042000
157 (2579930, 1080030) -0.992000
158 (2579700, 1079770) -2.284000
159 (2579540, 1079640) -1.678000
160 (2579860, 1079880) -1.710000
161 (2579540, 1079830) -1.132000
162 (2579870, 1079940) -1.066000
163 (2579560, 1079780) -1.746000
164 (2579990, 1080140) -0.758000
165 (2580010, 1080250) -0.574000
166 (2577970, 1079920) -0.006000
167 (2577850, 1079810)  1.142000
168 (2577790, 1079850)  0.058000
169 (2577930, 1079860)  1.146000
170 (2578060, 1079840)  0.006000
171 (2579410, 1079720)  1.052000
172 (2579330, 1079730) -0.040000
173 (2579260, 1079770)  0.570000
174 (2579930, 1080030) -0.096000
175 (2579700, 1079770) -1.402000
176 (2579540, 1079640) -0.762000
177 (2579860, 1079880) -0.940000
178 (2579540, 1079830)  0.064000
179 (2579870, 1079940)  0.040000
180 (2579560, 1079780) -0.342000
181 (2579990, 1080140) -0.020000
182 (2580010, 1080250)  0.562000
183 (2577970, 1079920)  1.444000
184 (2577850, 1079810)  2.306000
185 (2577790, 1079850)  1.188000
186 (2577930, 1079860)  1.892000
187 (2578060, 1079840)  1.552000
188 (2579410, 1079720)  2.224000
189 (2579330, 1079730)  2.192000
190 (2579260, 1079770)  3.400000
191 (2579930, 1080030)  2.344000
192 (2579700, 1079770) -0.156000
193 (2579540, 1079640)  0.576000
194 (2579860, 1079880)  1.194000
195 (2579540, 1079830)  1.510000
196 (2579870, 1079940)  2.648000
197 (2579560, 1079780)  1.368000
198 (2579990, 1080140)  2.622000
199 (2580010, 1080250)  2.184000
200 (2577970, 1079920)  2.188000
201 (2577850, 1079810)  3.000000
202 (2577790, 1079850)  2.892000
203 (2577930, 1079860)  2.444000
204 (2578060, 1079840)  1.968000
205 (2579410, 1079720)  3.434000
206 (2579330, 1079730)  0.686000
207 (2579260, 1079770)  3.340000
208 (2579930, 1080030)  3.836000
209 (2579700, 1079770)  0.770000
210 (2579540, 1079640)  0.906000
211 (2579860, 1079880)  2.502000
212 (2579540, 1079830)  2.684000
213 (2579870, 1079940)  4.874000
214 (2579560, 1079780)  2.416000
215 (2579990, 1080140)  3.652000
216 (2580010, 1080250)  3.398000
217 (2577970, 1079920)  3.100000
218 (2577850, 1079810)  3.644000
219 (2577790, 1079850)  3.248000
220 (2577930, 1079860)  3.296000
221 (2578060, 1079840)  2.512000
222 (2579410, 1079720)  3.494000
223 (2579330, 1079730)  0.602000
224 (2579260, 1079770)  2.402000
225 (2579930, 1080030)  4.352000
226 (2579700, 1079770)  1.900000
227 (2579540, 1079640)  3.068000
228 (2579860, 1079880)  3.018000
229 (2579540, 1079830) -0.108000
230 (2579870, 1079940)  4.640000
231 (2579560, 1079780)  3.822000
232 (2579990, 1080140)  4.570000
233 (2580010, 1080250)  4.358000
234 (2577970, 1079920)  4.344000
235 (2577850, 1079810)  4.710000
236 (2577790, 1079850)  4.124000
237 (2577930, 1079860)  4.776000
238 (2578060, 1079840)  3.046000
239 (2579410, 1079720)  5.066000
240 (2579330, 1079730)  2.668000
241 (2579260, 1079770)  3.698000
242 (2579930, 1080030)  4.970000
243 (2579700, 1079770)  2.382000
244 (2579540, 1079640)  3.944000
245 (2579860, 1079880)  3.648000
246 (2579540, 1079830)  2.690000
247 (2579870, 1079940)  5.350000
248 (2579560, 1079780)  4.888000
249 (2579990, 1080140)  5.308000
250 (2580010, 1080250)  4.984000
251 (2577970, 1079920)  4.778000
252 (2577850, 1079810)  5.586000
253 (2577790, 1079850)  4.888000
254 (2577930, 1079860)  5.300000
255 (2578060, 1079840)  3.866000
256 (2579410, 1079720)  5.190000
257 (2579330, 1079730)  3.942000
258 (2579260, 1079770)  3.786000
259 (2579930, 1080030)  5.044000
260 (2579700, 1079770)  3.156000
261 (2579540, 1079640)  4.932000
262 (2579860, 1079880)  3.630000
263 (2579540, 1079830)  4.162000
264 (2579870, 1079940)  4.502000
265 (2579560, 1079780)  4.346000
266 (2579990, 1080140)  5.698000
267 (2580010, 1080250)  5.420000
268 (2577970, 1079920)  5.616000
269 (2577850, 1079810)  5.926000
270 (2577790, 1079850)  5.176000
271 (2577930, 1079860)  5.502000
272 (2578060, 1079840)  3.988000
273 (2579410, 1079720)  5.914000
274 (2579330, 1079730)  4.170000
275 (2579260, 1079770)  4.478000
276 (2579930, 1080030)  6.106000
277 (2579700, 1079770)  3.982000
278 (2579540, 1079640)  4.780000
279 (2579860, 1079880)  5.194000
280 (2579540, 1079830)  4.416000
281 (2579870, 1079940)  6.336000
282 (2579560, 1079780)  4.724000
283 (2579990, 1080140)  6.208000
284 (2580010, 1080250)  6.172000
285 (2577970, 1079920)  5.700000
286 (2577850, 1079810)  5.960000
287 (2577790, 1079850)  5.854000
288 (2577930, 1079860)  5.964000
289 (2578060, 1079840)  4.582000
290 (2579410, 1079720)  4.920000
291 (2579330, 1079730)  4.134000
292 (2579260, 1079770)  4.904000
293 (2579930, 1080030)  6.898000
294 (2579700, 1079770)  4.878000
295 (2579540, 1079640)  4.210000
296 (2579860, 1079880)  5.350000
297 (2579540, 1079830)  4.342000
298 (2579870, 1079940)  6.860000
299 (2579560, 1079780)  4.164000
300 (2579990, 1080140)  5.180000
301 (2580010, 1080250)  5.204000
302 (2577970, 1079920)  5.820000
303 (2577850, 1079810)  4.416000
304 (2577790, 1079850)  4.134000
305 (2577930, 1079860)  5.088000
306 (2578060, 1079840)  4.476000
307 (2579410, 1079720)  4.338000
308 (2579330, 1079730)  2.876000
309 (2579260, 1079770)  2.654000
310 (2579930, 1080030)  4.522000
311 (2579700, 1079770)  3.366000
312 (2579540, 1079640)  3.666000
313 (2579860, 1079880)  3.522000
314 (2579540, 1079830)  3.206000
315 (2579870, 1079940)  4.620000
316 (2579560, 1079780)  3.710000
317 (2579990, 1080140)  4.698000
318 (2580010, 1080250)  4.556000
319 (2577970, 1079920)  2.656000
320 (2577850, 1079810)  2.638000
321 (2577790, 1079850)  2.964000
322 (2577930, 1079860)  2.668000
323 (2578060, 1079840)  1.936000
324 (2579410, 1079720)  2.190000
325 (2579330, 1079730)  0.666000
326 (2579260, 1079770)  0.712000
327 (2579930, 1080030)  2.426000
328 (2579700, 1079770)  1.016000
329 (2579540, 1079640)  1.140000
330 (2579860, 1079880)  1.944000
331 (2579540, 1079830)  1.468000
332 (2579870, 1079940)  2.366000
333 (2579560, 1079780)  0.786000
334 (2579990, 1080140)  2.540000
335 (2580010, 1080250)  2.744000
336 (2577970, 1079920)  1.680000
337 (2577850, 1079810)  1.348000
338 (2577790, 1079850)  1.880000
339 (2577930, 1079860)  1.820000
340 (2578060, 1079840)  1.202000
341 (2579410, 1079720)  1.704000
342 (2579330, 1079730)  0.606000
343 (2579260, 1079770)  0.370000
344 (2579930, 1080030)  1.990000
345 (2579700, 1079770)  0.894000
346 (2579540, 1079640)  1.204000
347 (2579860, 1079880)  1.214000
348 (2579540, 1079830)  1.194000
349 (2579870, 1079940)  1.800000
350 (2579560, 1079780)  1.228000
351 (2579990, 1080140)  2.156000
352 (2580010, 1080250)  2.438000
353 (2577970, 1079920)  0.862000
354 (2577850, 1079810)  0.880000
355 (2577790, 1079850)  1.290000
356 (2577930, 1079860)  0.812000
357 (2578060, 1079840)  0.444000
358 (2579410, 1079720)  1.218000
359 (2579330, 1079730)  0.118000
360 (2579260, 1079770) -0.384000
361 (2579930, 1080030)  1.456000
362 (2579700, 1079770)  0.620000
363 (2579540, 1079640)  0.798000
364 (2579860, 1079880)  0.914000
365 (2579540, 1079830)  0.682000
366 (2579870, 1079940)  1.274000
367 (2579560, 1079780)  0.734000
368 (2579990, 1080140)  1.480000
369 (2580010, 1080250)  1.770000
370 (2577970, 1079920)  0.380000
371 (2577850, 1079810)  0.194000
372 (2577790, 1079850)  1.010000
373 (2577930, 1079860)  0.374000
374 (2578060, 1079840)  0.312000
375 (2579410, 1079720)  1.004000
376 (2579330, 1079730) -0.094000
377 (2579260, 1079770) -0.392000
378 (2579930, 1080030)  1.462000
379 (2579700, 1079770)  0.260000
380 (2579540, 1079640)  0.636000
381 (2579860, 1079880)  0.682000
382 (2579540, 1079830)  0.886000
383 (2579870, 1079940)  1.196000
384 (2579560, 1079780)  0.654000
385 (2579990, 1080140)  1.516000
386 (2580010, 1080250)  1.822000
387 (2577970, 1079920)  0.112000
388 (2577850, 1079810)  0.072000
389 (2577790, 1079850)  0.718000
390 (2577930, 1079860)  0.168000
391 (2578060, 1079840)  0.384000
392 (2579410, 1079720)  0.904000
393 (2579330, 1079730) -0.240000
394 (2579260, 1079770) -0.376000
395 (2579930, 1080030)  1.360000
396 (2579700, 1079770)  0.072000
397 (2579540, 1079640)  0.534000
398 (2579860, 1079880)  0.442000
399 (2579540, 1079830)  0.322000
400 (2579870, 1079940)  1.174000
401 (2579560, 1079780)  0.482000
402 (2579990, 1080140)  1.680000
403 (2580010, 1080250)  2.398000
404 (2577970, 1079920)  0.280000
405 (2577850, 1079810)  0.296000
406 (2577790, 1079850)  0.808000
407 (2577930, 1079860)  0.420000
408 (2578060, 1079840)  0.478000 
```

在将代码修改为此之后：

```
mat.mv=vgm(psill=1, model="Exp", nugget=.2, range=550)
mat.ok <- krige(X0~1, mat, mat.new, mat.mv) 
```

我想出了这个错误：

[使用普通克里金法]

```
"chfactor.c", line 131: singular matrix in function LDLfactor()
Error in predict.gstat(g, newdata = newdata, block = block, nsim = nsim,  : 
  LDLfactor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T08:48:49.363

您必须使用该功能检查您的数据是否不包含任何重复项`zerodist()`。如果有重复，使用`remove.duplicate()`删除重复行的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:09:05.073

关于你的两个错误：

1.  使用空间类时，您无需明确指定`locations`参数。只需将其排除在外即可修复错误。
2.  你说你使用辅助数据，你所做的可能只是将不同时间步长的数据添加到一个大的 SpatialPointDataFrame 中？这意味着在同一位置有多个观察值，导致您观察到的错误。您可以使用时空克里金法及时考虑多个观测值。[gstat的一个小插曲](http://cran.r-project.org/web/packages/gstat/vignettes/st.pdf)使用 gstat 解释了时空克里金法。

# javascript - 创建新数组而不影响旧数组中的值

> ID：14498739
> 
> 赞同：14
> 
> 时间：2013-01-24T10:12:14.227
> 
> 标签：javascript

我正在尝试创建现有数组的副本并从数组副本中删除一些项目而不影响原始数组。我试过这个：

```
var new_arr = old_arr; //when I remove from new array the items from old array are also removed 
```

如何创建现有数组的全新副本？

**更新 ：**

当我这样做时：

```
var new_arr = old_arr.slice(); 
```

然后稍后：

```
new_arr[0].shift();
new_arr[1].shift(); 
```

old_array 中的项目被删除。这是一个二维数组。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T10:21:29.757

你可以使用**两种**方法，这个：

```
function clone (src) {
    return JSON.parse(JSON.stringify(src));
} 
```

或这个：

```
var newArray = oldArray.slice(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-02T10:17:47.320

一个更新的解决方案是像这样使用'from'：

```
const newArr = Array.from(oldArr); 
```

但这是一个浅拷贝，如果嵌套元素发生突变，它们将使用 from 投影到新创建的数组中。那么最好的解决方案是使用

```
const newArr = JSON.parse(JSON.stringify(oldArr)); 
```

但该方法并不能确保全部。例如，如果数组的一个元素包含像 n => ++n 这样的函数，那么在使用 JSON 方法后它将为空，因此最好的解决方案是 deepClone，对于完整的解释，我参考

[创建 JavaScript 数组](https://www.freecodecamp.org/news/https-medium-com-gladchinda-hacks-for-creating-javascript-arrays-a1b80cb372b/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T10:22:01.617

使用 Yoshi 答案，您可以扩展 Array 原型（只是一个简单的助手）：

```
Array.prototype.clone = function() { 
      return this.slice(0); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-20T08:54:50.553

在 Javascript 中，二维数组只是数组的数组。因此，克隆一维是不够的。我们还需要克隆所有的子维度数组。我们是这样做的：

```
function cloneGrid(grid) {
  // Clone the 1st dimension (column)
  const newGrid = [...grid]
  // Clone each row
  newGrid.forEach((row, rowIndex) => newGrid[rowIndex] = [...row])
  return newGrid
}

// grid is a two-dimensional array
const grid = [[0,1],[1,2]]
newGrid = cloneGrid(grid)

console.log('The original grid', grid)
console.log('Clone of the grid', newGrid)
console.log('They refer to the same object?', grid === newGrid)
---
The original grid [ [ 0, 1 ], [ 1, 2 ] ]
Clone of the grid [ [ 0, 1 ], [ 1, 2 ] ]
They refer to the same object? false 
```

或者如果我们利用[ES6 Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)操作，我们可以让`cloneGrid`函数更简单：

```
const cloneGrid = (grid) => [...grid].map(row => [...row]) 
```

有关更多扩展答案，请阅读[如何在 JavaScript 中制作数组的副本](https://ozmoroz.com/2020/07/how-to-copy-array/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-07T07:48:04.790

你可以试试 .concat()

```
var old_arr = [1,2,3,4,5]
var new_arr = old_arr.concat()

console.log(old_arr) //1,2,3,4,5
console.log(new_arr) //1,2,3,4,5

new_arr.shift()

console.log(old_arr) //1,2,3,4,5
console.log(new_arr) //2,3,4,5
```

# html - 图表标签文本旋转

> ID：14498743
> 
> 赞同：0
> 
> 时间：2013-01-24T10:12:23.153
> 
> 标签：html, canvas, graph, html5-canvas

根据本文，我正在使用非常相似的代码使用画布创建饼图：

[http://wickedlysmart.com/how-to-make-a-pie-chart-with-html5s-canvas/](http://wickedlysmart.com/how-to-make-a-pie-chart-with-html5s-canvas/)

从这张图片中可以看出，有些情况下标签是颠倒的：

![在此处输入图像描述](../Images/e8aff2a3dcdb60dade2538686ba64308.png)

以下是将标签写入图表的代码：

```
var drawSegmentLabel = function(canvas, context, i) {

        context.save();
        var x = Math.floor(canvas.width / 2);
        var y = Math.floor(canvas.height / 2);
        var degrees = sumTo(data, i);

        var angle = degreesToRadians(degrees);

        context.translate(x, y);
        context.rotate(angle);
        context.textAlign = 'right';
        var fontSize = Math.floor(canvas.height / 32);
        context.font = fontSize + 'pt Helvetica';

        var dx = Math.floor(canvas.width * 0.3) - 20;
        var dy = Math.floor(canvas.height * 0.05);
        context.fillText(labels[i], dx, dy);

        context.restore(); 
```

};

我正在尝试纠正这一点，因此文本始终是可读的，而不是颠倒的，但无法弄清楚如何做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:02:39.773

这是我的解决方案！（有点笨拙，但似乎可以在基本示例上工作，我还没有在边缘情况下进行测试......）

```
var drawSegmentLabel = function(canvas, context, i) {

    context.save();
    var x = Math.floor(canvas.width / 2);
    var y = Math.floor(canvas.height / 2);
    var angle;
    var angleD = sumTo(data, i);
    var flip = (angleD < 90 || angleD > 270) ? false : true;

    context.translate(x, y);
    if (flip) {
        angleD = angleD-180;
        context.textAlign = "left";
        angle = degreesToRadians(angleD);
        context.rotate(angle);
        context.translate(-(x + (canvas.width * 0.5))+15, -(canvas.height * 0.05)-10);
    }
    else {
        context.textAlign = "right";
        angle = degreesToRadians(angleD);
        context.rotate(angle);
    }
    var fontSize = Math.floor(canvas.height / 25);
    context.font = fontSize + "pt Helvetica";

    var dx = Math.floor(canvas.width * 0.5) - 10;
    var dy = Math.floor(canvas.height * 0.05);
    context.fillText(labels[i], dx, dy);

    context.restore();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:20:43.690

要以正确的方式显示文本，您必须检查旋转角度是否在 90 到 270 度之间。如果是，那么您知道文本将颠倒显示。

要正确切换它，您必须旋转平面旋转的画布 - 180 度，然后将其左对齐而不是右对齐：

```
var drawSegmentLabel = function(canvas, context, i) {

    context.save();
    var x = Math.floor(canvas.width / 2);
    var y = Math.floor(canvas.height / 2);
    var degrees = sumTo(data, i);

    var angle = 0;
    if (degree > 90 && degree < 270)
      angle = degreesToRadians(degrees - 180);       
     else
       angle = degreesToRadians(degrees);

    context.translate(x, y);
    context.rotate(angle);
    context.textAlign = 'right';
    var fontSize = Math.floor(canvas.height / 32);
    context.font = fontSize + 'pt Helvetica';

    var dx = Math.floor(canvas.width * 0.3) - 20;
    if (degree > 90 && degree < 270)
       dx =  20;
    var dy = Math.floor(canvas.height * 0.05);
    context.fillText(labels[i], dx, dy);

    context.restore();
}; 
```

# tsql - 在 MS Access 中进行查询

> ID：14498744
> 
> 赞同：1
> 
> 时间：2013-01-24T10:12:26.283
> 
> 标签：tsql, ms-access, vba

我的查询有问题。我有 2 张桌子：

表 1 是`AutoCompany`它有字段`company`和`CodeCar`. `CodeCar`可以是 3 或 4，具体取决于公司拥有的汽车类型。

表 1：汽车公司

```
company| CodeCar|  
  jora     3
  jora     4
  jora     3
 ghita     3
 ghita     3
 ghita     4
gheorghe   4
gheorghe   3
gheorghe   3 
```

表 2`CodeCarCompanies`有代码：

```
car | codeCar
mers    3
vW      4 
```

我需要选择具有 2 `codeCar`s 出现次数的公司，结果如下：

```
 company  | MERS| VW
   jora        2     1
   ghita       2     1
   gheorghe    2     1 
```

到目前为止我的尝试：

```
 SELECT     COUNT(dbo.AutoComany) AS MERS, dbo.Company, COUNT(dbo.AutoComany.     
 [CodeCar]) AS VW,  

   FROM   dbo.AutoComany FULL OUTER JOIN
                  dbo.AutoComany  ON dbo.АВТОМОБ.КодПредпр = AutoCompany.company
     WHERE     (dbo.CodeCarComapnies.[CodeCar] = 3)
    GROUP BY dbo..company, dbo.CodeCarComapnies.[CodeCar]
    HAVING      (dbo.CodeCarComapnies.[CodeCar] = 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:24:18.820

在 MS Access 中，我认为您想要：

```
SELECT codecarcomapnies.car,
       Count(autocompany.codecar) AS CountOfCodeCar
FROM   autocompany
       INNER JOIN codecarcomapnies
               ON autocompany.codecar = codecarcomapnies.codecar
WHERE  autocompany.codecar  IN ( 3, 4 )
GROUP  BY codecarcomapnies.car; 
```

以上是使用 MS Access 查询设计窗口和 Sum`Σ`按钮构建的

编辑重新评论

```
SELECT Sum(IIf([autocompany].[codecar]=3,1,0)) AS mers, 
       Sum(IIf([autocompany].[codecar]=4,1,0)) AS vw
FROM autocompany 
```

或者

```
TRANSFORM Count(autocompany.CodeCar) AS CountOfCodeCar
SELECT "Total" AS Total
FROM autocompany 
INNER JOIN CodeCarComapnies 
ON autocompany.CodeCar = CodeCarComapnies.codeCar
WHERE autocompany.CodeCar In (3,4)
GROUP BY "Total"
PIVOT CodeCarComapnies.car 
```

# wpf - 如何在 Windows Phone 7 中仅显示网格的水平网格线

> ID：14498746
> 
> 赞同：1
> 
> 时间：2013-01-24T10:12:28.223
> 
> 标签：wpf, windows-phone-7

我在 wp7 中创建了一个 3 列 4 行的网格。现在我需要显示仅分隔网格行的线条。（即我只需要显示网格的水平网格线）并且我还需要更改水平网格线的颜色。帮我。

注意：有一种使用工具包的方法，我们可以通过datagrid来实现。但我想知道它是否可以在普通网格上完成。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:46:11.690

可以在每一行上使用边界控制来实现这一点。边框应使用边框刷并具有所需的厚度...

# java - 是否可以通过查询列中的最大输入 NUMBER 值来获得？

> ID：14498748
> 
> 赞同：2
> 
> 时间：2013-01-24T10:12:33.320
> 
> 标签：java, database, oracle

例如，我有一个列“示例”NUMBER(5,2) 的表，如果我是对的 - 最大输入值为 999,99。
有可能通过可以存储在该列中的查询值来获取吗？可能是任何 SQL 查询或 java api？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:21:01.013

试试这个

```
 ResultSet rs = ...
    ResultSetMetaData md = rs.getMetaData();
    int precision = md.getPrecision(column);
    int scale = md.getScale(column); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:31:26.700

如果您已经有了精度和比例的值，您应该能够像这样计算最大值：

```
int precision = 5;
int scale = 2;
double maxValue = (Math.pow(10, precision) - 1) / Math.pow(10, scale); 
```

如果您不知道精度和小数位数的值，可以查询数据库元数据：

```
ResultSet rs = conn.getMetaData().getColumns("", "%", "{TABLENAME}", "{COLUMNNAME}");

if(!rs.next()) {
    // unknown table/column
}

int precision = rs.getInt("COLUMN_SIZE");
int scale = rs.getInt("DECIMAL_DIGITS"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:14:20.140

```
select max(column_name) as 'Max_number' from table_name 
```

# javascript - AJAX 在按下按钮之前不会自动更新

> ID：14498753
> 
> 赞同：1
> 
> 时间：2013-01-24T10:13:04.110
> 
> 标签：javascript, jquery, ajax

我正在制作一个可以让两个人互相聊天的对话系统。我制作了一个 AJAX 函数，它每 2 秒更新一次包含消息的 DIV 框。

在用户写完消息**后**，这将按预期工作。为什么没有立即运行 AJAX 调用？

```
// SET AUTORUN updateMessages() EVERY 2 SECONDS
$(document).ready(function() {
    var interval
    window.onload = function(){
        interval = setInterval('updateMessages()', 2000);
    };
});

// UPDATE #mail_container_conversation
function updateMessages() {
    $.ajax({
        type: "POST",
        url: "<?php echo site_url(); ?>mail/ajaxupdate/<?php echo $user; ?>",
        data: dataString,

        success: function(data){
            $("#mail_container_conversation").html(data);
        }        
    });
}

// SEND NEW MESSAGE
$(function(){
    $("#mail_send").submit(function(){
        dataString = $("#mail_send").serialize();

        $.ajax({
        type: "POST",
        url: "<?php echo site_url(); ?>mail/send",
        data: dataString,

        success: function(data){
            updateMessages();
            $(".mail_conversation_answer_input").val('');
        }

        });

        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:18:29.590

如果您的其余代码正常工作，则问题可能出在此代码上：

```
$(document).ready(function() {
    var interval
    window.onload = function(){
        interval = setInterval('updateMessages()', 2000);
    };
}); 
```

1.  无需将其附加到`window.onload`，因为您已经将其包装在 DOM-ready 回调中。
2.  从调用中删除单引号和括号`setInterval`
3.  只需将函数传递给 jQuery 方法，即可缩短 DOM 就绪回调。

试试这个：

```
$(function () {
    setInterval(updateMessages, 2000);
}); 
```

**进一步改进 - 使用 AJAX 避免间隔：**

在处理 AJAX 时，您应该避免使用间隔，因为如果服务器需要超过两秒的时间来响应，您最终可能会堆积对服务器的调用。`setInterval`不在乎您的服务器是否有时间响应，无论如何它都会每 2 秒调用一次。

我建议您改用超时，并在 Ajax 调用的完整回调中启动新的超时。

在您的情况下，它可能看起来像这样：

```
$(function () {
    // Make the first call immediately when the DOM is ready
    updateMessage();
});

function updateMessages() {
    $.ajax({
        type: "POST",
        url: "<?php echo site_url(); ?>mail/ajaxupdate/<?php echo $user; ?>",
        data: dataString,

        success: function(data){
            $("#mail_container_conversation").html(data);
            // Make a new call, 2 seconds after you've 
            // received a successful respose
            setTimeout(updateMessages, 2000);
        }        
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:19:20.060

您应该向`setTimeout`/`setInterval`函数提供函数而不是字符串。而且您也无需设置窗口加载事件的时间间隔。你可以把它作为 DOM 的一部分准备好：

```
$(function() {
    updateMessages(); // don't wait 2 seconds for first update
    setInterval(updateMessages, 2000); // update every 2 seconds
}); 
```

**只要您在没有收到数据时回发工作，**其他一切似乎都应该按预期工作（参考`dataString`）。

我希望您确实意识到您正在使用隐含的全局变量并理解为什么这可能是一个大问题（`dataString`再次参考）。

## 我将如何重写你的代码

我会将您的整个代码重写为以下内容，删除隐含的全局变量`dataString`，不会用其他函数污染全局范围，并使用`setTimeout`在某些情况下可能会出现问题的间隔（尽管在您的情况下，因为它仅每 2 秒运行一次）如果没有额外的非常复杂的客户端脚本执行，应该不是问题）

我将所有内容都保留在函数闭包本地范围内：

```
$(function() {

    var timeout = null;

    var form = $("#mail_send").submit(function(evt){
        evt.preventDefault();
        $(".mail_conversation_answer_input", form).val("");
        updateMessages();
    });

    var updateMessages = function() {

        // we don'w want submit to interfere with auto-updates
        clearTimeout(timeout);

        $.ajax({
            type: "POST",
            url: "<?php echo site_url(); ?>mail/send",
            data: form.serialize(),
            success: function(data){
                $("#mail_container_conversation").html(data);
                timeout = setTimeout(updateMessages, 2000);
            }
        });
    };

    // start updating
    updateMessages();

}); 
```

此代码要求您的服务器端（在 上处理`/mail/send`）了解当没有发布任何内容（没有数据）时，它不会在对话中添加空行，而是知道这只是一个更新调用。此功能现在仅使用一个服务器端 URL，而不是其中的两个。如果您仍然需要两个，那么这段代码应该可以解决问题：

```
$(function() {

    var timeout = null;
    var url = {
        update: "<?php echo site_url();?>mail/ajaxupdate/<?php echo $user;?>",
        submit: "<?php echo site_url();?>mail/send",
        use: "update"
    };

    var form = $("#mail_send").submit(function(evt){
        evt.preventDefault();
        url.use = "submit";
        $(".mail_conversation_answer_input", form).val("");
        updateMessages();
    });

    var updateMessages = function() {

        // we don'w want submit to interfere with auto-updates
        clearTimeout(timeout);

        $.ajax({
            type: "POST",
            url: url[url.use],
            data: form.serialize(),
            success: function(data){
                $("#mail_container_conversation").html(data);
                url.use = "update";
                timeout = setTimeout(updateMessages, 2000);
            }
        });
    };

    // start updating
    updateMessages();

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:21:43.033

问题是它`updateMessages()`试图发送到服务器，但在函数运行`datastring`之前不会填写。`.submit()`

我不知道你应该在那里放什么，因为我不知道`mail/ajaxupdate`脚本期望什么。如果什么都没有发生时调用它，我怀疑根本不需要表单数据，所以你可以给出一个空字符串。

我敢打赌，如果您检查了 Javascript 控制台，您会看到一些关于尝试序列化的错误消息`undefined`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:17:26.103

试一试

```
$(document).ready(function() {

  setInterval('updateMessages()', 2000);

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:18:35.860

您不需要`window.onload`in your document ready 调用。

```
$(document).ready(function() {
    setInterval('updateMessages()', 2000);
}); 
```

这应该足以让它开始。

就像现在一样，一旦 DOM 准备就绪，您就会要求它等待窗口加载.. 但到那时它已经加载了，所以什么也没有发生。

# ubuntu - 安装在 USB 驱动器上的 ubuntu 上的 CUDA/OpenCL

> ID：14498754
> 
> 赞同：1
> 
> 时间：2013-01-24T10:13:06.643
> 
> 标签：ubuntu, cuda, usb, opencl, virtualbox

我一直试图让 CUDA/OpenCL 在我的 Windows 系统上运行。我可以让它们工作（我有一个兼容的视频卡并且我已经安装了 CUDA 工具包）但是编译示例程序被证明是非常烦人的，并且只会导致更多的错误。所以，我想尝试在 ubuntu 上安装 CUDA。请原谅以下菜鸟问题。

我想将 Windows 作为我游戏等的主要驱动器。我没有第二个硬盘驱动器（我可以买一个，但如果我可以避免的话就不会！）所以我的选择是：

1）在virtualbox上安装ubuntu - 我读过CUDA不能使用这种方法工作？

2) 将 ubuntu 永久安装到闪存驱动器上 - 这行得通吗？持久性 USB 操作系统可以使用 PC 的显卡吗？

3）双启动两个操作系统到我现有的硬盘驱动器 - 我认为这会工作并且稳定吗？它对我现有的数据构成什么样的风险（我有很多 mp3 等，但无处可备份）？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:25:32.827

对于虚拟盒子，我不能说它是如何与 cuda 一起工作的。

如果您在闪存驱动器上安装 ubuntu，则可以使用[unetbootin](http://unetbootin.sourceforge.net/)。它会在闪存驱动器上创建一个“实时”光盘，但您也可以添加一个单独的内存来存储您在实时系统上更改的所有内容（它被称为“用于保存文件的空间......（仅限 Ubuntu）”）。这将包括所有手动安装的程序和驱动程序。所以它就像一个真正安装的ubuntu。

您也可以将 ubuntu 直接安装到您的闪存驱动器。因此，您必须在闪存驱动器的 mbr 中安装 grub。另外，最好也编辑 fstab 并写入分区的 uuid 而不是原始条目。

可能最好的方法是制作双引导系统。Ubuntu 有一个舒适的安装程序，除了现有的 Windows 系统外，您还可以选择安装它。但它需要硬盘上的可用空间。

# postgresql - PostgreSQL 中是否有类似于 Oracle 的 SQL%FOUND 的东西？

> ID：14498760
> 
> 赞同：2
> 
> 时间：2013-01-24T10:13:27.700
> 
> 标签：postgresql

PostgreSQL中是否有类似Oracle的声明`SQL%FOUND`？同时，我想判断 SQL 语句是否更新。

PostgreSQL中的代码如下所示：

```
INSERT INTO TABLE_NAME
SELECT A,B
FROM TABLE_NAME_2
WHERE A>2;
IF SQL%FOUND THEN   ---error in PostgreSQL
C = 1;
ELSE 
C = 0;
END IF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:24:06.557

是的，PostgreSQL 有`FOUND`声明。详情[在这里](http://www.postgresql.org/docs/current/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)。

例子：

```
SELECT * INTO myrec FROM emp WHERE empname = myname;
IF NOT FOUND THEN
    RAISE EXCEPTION 'employee % not found', myname;
END IF; 
```

# php - 将 PHP 生成的 JS 变量发送到 Google 地图的 JS 函数

> ID：14498762
> 
> 赞同：0
> 
> 时间：2013-01-24T10:13:38.753
> 
> 标签：php, javascript, jquery, google-maps

这只是一个想法，它可能不可行，谷歌搜索并无法提出任何建议，我认为我没有正确搜索它，我真的不知道如何表达这个问题，所以我'会解释它：

所以我从 PHP 中这样的表中提取我的位置数据：

```
$result = $Connect->query($sql);
$i = rand(00000000, 99999999);
while($locationData = $result->fetch_assoc()){
    $locationName = $locationData['locationName'];
    $locationStreetAndHouse = $locationData['locationStreetNameAndNumber'];
    $locationState = $locationData['locationState'];
    $locationLat = $locationData['locationLatitude'];
    $locationLon = $locationData['locationLongitude'];
    $returnThis .= 'var latLonV'.$i.' = new    google.maps.LatLng('.$locationLat.','.$locationLon.')
var marker'.$i.' = new google.maps.Marker({
position: latLonV'.$i.',
map: map,
title: "'.$locationName.'"
});';
$i++;
}
$Connect->close(); 
```

然后我将它发送回我的 JS，如下所示：

```
$JSONData = array("true", $returnThis); 
echo json_encode($JSONData); 
```

然后在JS中我这样做：

```
success:function (recievedData) {
  if (recievedData[0] == 'true') {
    initializeMap(recievedData[1]);
  }

}

function initializeMap(markerVar) {
    var myLatlng = new google.maps.LatLng(40.915117, -74.072465);
    var mapOptions = {
        zoom: 16,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'THIS IS ME!'
    });

    markerVar;
}

}); 
```

当然地图会毫无问题地出现并且第一个位置出现，但是我如何获取存储在其中的 JS 数据`markerVar`并使用它呢？

我希望我解释正确，对不起，如果这是一种愚蠢的做法，我也愿意接受不同的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:21:36.360

当前，您创建一个包含 JavaScript 代码的字符串。然后你通过 JSON 编码这个字符串，将它传输到客户端。

但是在这里您不执行它，而是尝试将其作为字符串传递。

更好的方法是在 PHP 中创建一个对象数组，如下所示：

```
$returnVal = array();
while( /*...*/ ) {
  /* your init code */

  $returnVal[] = array( 'lat' => $locationLat, 'lon' => $locationLon /* etc */ );
}

echo json_encode( array( true, $returnVal ) ); 
```

然后，在客户端上，您可以使用这些值动态生成所有标记：

```
function initializeMap(markerVar) {
  /* your init code */

  var marker = [], latLonV;
  for( var i=markerVar.length; i--; ) {
    // create the latlon object
    latLonV = new google.maps.LatLng( markerVar[i]['lat'], markerVar[i]['lon'] )

    // set the marker
    marker.push(new google.maps.Marker({
                         position: latLonV,
                         map: map,
                         title: markerVar[i]['title']
                       }));
  }
} 
```

根据您的需要，您可能希望将`marker`和`latLonV`对象插入到单独的数组中，以便稍后获取它们。

# xml - IBM WebSphere Portal Server 6 使用 xmlaccess 脚本进行部署

> ID：14498771
> 
> 赞同：0
> 
> 时间：2013-01-24T10:14:01.107
> 
> 标签：xml, websphere-6.1, websphere-portal

我是 IBM 技术的新手，我的公司要求我实现一个`IBM Websphere Portal Server 6.1`基于`IBM AIX OS`.

我想使用脚本外壳部署或更新我的 portlet。第一个问题，有没有可以做到这一点的脚本？

如果是`xmlAccess.sh`，我尝试了这个命令：

```
/PortalServer/bin/xmlaccess.sh -in deployIL1Portlet.xml -user wasadm -password ********* -url http://localhost:13040/wps/config 
```

deployIL1Portlet.xml 内容：

```
<?xml version="1.0" encoding="UTF-8" ?>
<request
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="PortalConfig_6.0.1.xsd" 
    type="update">
    <portal action="locate">
        <web-app action="update" active="true" uid="fr.laposte.disf.il1.portlet.QuizPortlet">
           <url>file:///data1/wasWP61IL1D101N1/il1/il1.war</url>
        </web-app>
    </portal>
</request> 
```

我有这个错误：

```
EJPXB0006I: Connecting to URL http://localhost:13040/wps/config
EJPXB0002I: Reading input file /data1/wasWP61IL1D101N1/profile/PortalServer/bin/deployIL1Portlet.xml
EJPXB0013E: An error occurred while receiving the response.
EJPXB0016E: An error occurred on the client: sun.io.MalformedInputException 
```

在 IBM 论坛上，我发现： [http ://www.ibm.com/developerworks/forums/thread.jspa?threadID=205808](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=205808)

所以我检查了`wkplc_comp.properties`： `XmlAccessPort`并且`WpsHostPort`等于13040

如果你有一些线索，这将是一个真正的帮助！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:58:54.377

您可以使用以下策略：

首先，通过**管理控制台**安装您的应用程序。然后，一旦安装，您可以导出 webapp 配置以生成一个 XML 文件，您可以通过**xmlaccess**将其用于将来的更新。

# c# - Devexpress ListBoxControl 滚动事件

> ID：14498772
> 
> 赞同：0
> 
> 时间：2013-01-24T10:14:02.630
> 
> 标签：c#, winforms, listbox, devexpress

我有一个`listboxcontrol`插入日志文本并始终显示最后几行的地方

```
listBoxControl1.SelectedIndex = listBoxControl1.Items.Count - 1; 
```

但是当用户向上/向下滚动列表时，我希望保持用户的滚动位置，
这是取消上面代码的条件

我试过`MouseUp`/`MouseDown`但这些事件不会在点击`ScrollBar`

```
void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        listBoxControl1.Items.Add(e.UserState);
        if (!mouseDown) // this is not working !!
            listBoxControl1.SelectedIndex = listBoxControl1.Items.Count - 1;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:18:39.573

我相信您可以使用以下方法：

```
SubscribeScrollEvent(listBoxControl1);    // Before start items adding
bw.RunWorkerAsync();
//...
void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
    UnsubscribeScrollEvent(listBoxControl1);  // After items adding complete 
}
void bw_ProgressChanged(object sender, ProgressChangedEventArgs e) {
    listBoxControl1.Items.Add(e.ProgressPercentage);
    if(!userScrollPerformed)
        listBoxControl1.SelectedIndex = listBoxControl1.Items.Count - 1;
}
//...
void SubscribeScrollEvent(ListBoxControl listBox) {
    var hScroll = listBox.Controls[0] as DevExpress.XtraEditors.HScrollBar;
    var vScroll = listBox.Controls[1] as DevExpress.XtraEditors.VScrollBar;
    vScroll.Scroll += ListBox_Scroll;
    hScroll.Scroll += ListBox_Scroll;
}
void UnubscribeScrollEvent(ListBoxControl listBox) {
    var hScroll = listBox.Controls[0] as DevExpress.XtraEditors.HScrollBar;
    var vScroll = listBox.Controls[1] as DevExpress.XtraEditors.VScrollBar;
    vScroll.Scroll -= ListBox_Scroll;
    hScroll.Scroll -= ListBox_Scroll;
}
bool userScrollPerformed;
void ListBox_Scroll(object sender, ScrollEventArgs e) {
    if(e.Type == ScrollEventType.ThumbTrack)
        userScrollPerformed = true; // set a flag
} 
```

# c# - Visual Studio 和循环依赖问题

> ID：14498774
> 
> 赞同：4
> 
> 时间：2013-01-24T10:14:06.893
> 
> 标签：c#, visual-studio, visual-studio-2012, circular-dependency

我有一个由 15 个不同项目组成的遗留系统，当我尝试从另一个 Visual Studio 中引用一个时，我抱怨它不能这样做，因为这会导致循环依赖。

我的问题是我看不到它会如何导致循环依赖，因为我尝试引用的项目（'XScript'）对尝试引用它的项目（'WPF_Forms'）没有任何形式的引用）。

通过对这里的研究，我发现人们遭受了类似的命运，尽管他们的问题似乎具有明显的循环依赖性。

我已经按照这里的一些帖子的建议下载了 NDepend 的演示副本，尽管使用了各种依赖工具，但仍然没有明显的链接。

我右键单击了所涉及的项目并使用了“项目依赖项”选项，但我看不到任何链接。我还重新启动了 Visual Studio 并尝试了“清洁解决方案”和“重新构建解决方案”，但均无济于事。

我能够想出的唯一方法是通过引用构建的 DLL 而不是项目本身来引用“XScript”，但这感觉有点脏，我想知道为什么会发生这种情况，而只是破解它。

任何人都可以提出我可能错过的任何事情或我可以用来解决问题的任何策略吗？

**编辑 1：** XScript 用于引用 WPF_Forms 但该引用已被删除（并且该项目已清理和重建，没有在“项目依赖项”窗口上显示任何依赖项。我想 VS 可能在某处保留了链接或它认为这些项目以某种方式联系在一起。

**编辑 2：**根据 BitBonk 的建议，我运行了使用 VS 的 Code Map 功能并制定了项目拓扑。XScript 和 WPF_Forms 仅由主 .exe 引用，没有其他内容。我开始怀疑这是一个 VS 问题，我可能必须创建一个新项目并再次添加所有子项目才能使其正常工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T11:37:33.840

问题是：Visual Studio 2012。

在使用像 Bitbonk 建议的 Code Map 之后，我看不到任何会导致问题的引用。因此，我从项目中删除了 XScript 和 WPF_Forms，运行了一次清理，重新添加了 XScript，运行了一次清理，然后重新添加了 WPF_Forms 并运行了一次清理。

之后，将 WPF_Forms 的引用添加到 XScript 并没有引起任何问题。我只能猜测这是 VS 中的一个错误，它是由它无法识别不再存在从 XScript 到 WPF_Forms 的依赖关系触发的。

希望这个问题和建议的答案将在未来对其他人有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T10:22:52.603

正如其他人已经说过的那样，您的循环依赖可能涉及多个级别。*您可以使用 viusal studio 2012 的代码映射*功能轻松可视化依赖关系图。这样您就可以发现会发生这种情况的位置。

![在此处输入图像描述](../Images/8c0daf1a292316c4f4f28a2e60923a43.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:18:27.857

也许您的循环依赖涉及两个以上的项目。

# c++ - NEON 汇编代码，如何将 BYTE 转换为浮点数？

> ID：14498776
> 
> 赞同：2
> 
> 时间：2013-01-24T10:14:13.737
> 
> 标签：c++, assembly, neon

现在我有一个想要改进的代码。src 数据的数据类型是字节。我想用浮点数计算并将结果存储到字节。但我不知道如何转换数据 bwtween BYTE 和 float 的数据类型。我在 Android NDK 上开发。我想改进的 C++ 代码如下：

```
void DoEffect(BYTE *pSrc, float rat){
//image data:BGRA
float red, green, blue;
red = pSrc[RED_CHANNEL] * rat;
green = pSrc[GREEN_CHANNEL] * rat;
blue = pSrc[BLUE_CHANNEL] * rat;

//  some step to calculate the result;
//  red = ...
//  ...
//

pSrc[RED_CHANNEL] = (BYTE)red;
pSrc[GREEN_CHANNEL] = (BYTE)green;
pSrc[BLUE_CHANNEL] = (BYTE)blue; 
```

}

和我的霓虹灯 asm 代码：

```
void DoEffect_neon_asm(BYTE *pSrc, float rat){
__asm__ __volatile__(
        "vld4.8     {d0-d3},[%[src]]    \n"
        "vdupq.32   {d4, d5}, [%[rat]]  \n"
        "# convert src data to float?       \n"
        "code: convert byte to float        \n"
        "# calculate result         \n"
        "..                 \n"
        "# convert result to byte       \n"
        "code: convert float to byte        \n"
        :[src]"r"(pSrc), [rat]"r"(rat)
); 
```

}

我的问题是如何编写“neon asm 代码”中列出的“代码：将字节转换为浮点数”和“代码：将浮点数转换为字节”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:32:30.120

将字节转换为浮点数相当简单。下面的代码将对一个字节寄存器执行此操作：

```
"vmovl.u8       q3, d2                      \n\t"   //Expand to 16-bit
"vmovl.u16      q10, d6                     \n\t"   //Expand to 32-bit
"vmovl.u16      q11, d7                     \n\t"
"vcvt.f32.u32   q10, q10                    \n\t"   //Convert to float
"vcvt.f32.u32   q11, q11                    \n\t" 
```

转换回字节几乎完全是相反的过程。使用`vcvt.u32.f32`and`vmovn`代替。

另外，如果您不熟悉 NEON，我建议您仔细阅读[文档](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204j/Bcfjicfj.html)。这是掌握说明的好方法。

# asp.net-mvc - 如何获取使用 WebClient.DownloadFile() 下载的文件路径？

> ID：14498781
> 
> 赞同：0
> 
> 时间：2013-01-24T10:14:27.323
> 
> 标签：asp.net-mvc, path, webclient

我是网络编程的新手，很抱歉这样的问题。我使用`WebClient.DownloadFile(string fileAdress, string fileName)`方法下载文件。我`fileName`来自`fileAdress`(ie www.somelink.com/file.txt => file.txt) 。现在，我需要获取该文件的完整路径。如果它是桌面应用程序，我会以某种方式找到它。但现在，我不知道情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:21:54.280

The downloaded file should be saved in your current directory. i.e., in

```
Directory.GetCurrentDirectory() 
```

Example:

```
using System.IO;
using System.Net;

var uri = new Uri("http://example.com/somefile.txt");
string filename = "somefile.txt";

new WebClient().DownloadFile(uri, filename);
string filePath = Path.Combine(Directory.GetCurrentDirectory(), filename); 
```

# java - Java 柏林噪音

> ID：14498783
> 
> 赞同：0
> 
> 时间：2013-01-24T10:14:37.317
> 
> 标签：java, actionscript-3, perlin-noise

我需要像在[AS3.0](http://www.houseofthead.com/blog/flash-as3-perlin-noise-explained-and-demonstrated-part-1/)中一样制造 perlin 噪音：

```
bitmapData.perlinNoise(baseX, baseY, numOctaves, 
randomSeed, stitch, fractalNoise, grayScale, offsets); 
```

这是无缝的噪音：

![在此处输入图像描述](../Images/efe2dde3d8f49e3b2154b57f226db553.png)

我找到了很多关于它的材料，但我无法让它像我的 as3.0 图像中那样。Java代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JPanel;

@SuppressWarnings("serial")
public class Noise extends JPanel{

    public static int octaves = 4;
    public static int size =  128;
    public static float[][][] noise = new float[size][size][octaves];
    public static float[][] perlinnoise = new float[size][size];

    public static float p = (float) 1/4;

    public static Random gen = new Random();

    public static float GenerateNoise() {
        return gen.nextFloat();
    }

    public static float SmoothNoise(int x, int y, int z) {
        try{
            float corners = (noise[x - 1][y - 1][z] + noise[x + 1][y - 1][z] + noise[x - 1][y + 1][z] + noise[x + 1][y + 1][z]) / 16;
            float sides = (noise[x - 1][y][z] + noise[x + 1][y][z] + noise[x][y - 1][z] + noise[x][y + 1][z]) / 8;
            float center = noise[x][y][z] / 4;
            return corners + sides + center;
        }catch(Exception e) {
            return 0;
        }
    }

    public static float InterpolatedNoise(float x, float y, int pX, int pY, int pZ) {
        int intX = (int) x;
        int intY = (int) y;
        float fracX = x - intX;
        float fracY = y - intY;
        float v1 = SmoothNoise(pX, pY, pZ);
        float v2 = SmoothNoise(pX + 1, pY, pZ);
        float v3 = SmoothNoise(pX, pY + 1, pZ);
        float v4 = SmoothNoise(pX + 1, pY + 1, pZ);
        float i1 = Interpolate(v1, v2, fracX);
        float i2 = Interpolate(v3, v4, fracX);
        return Interpolate(i1, i2, fracY);
    }

    public static float Interpolate(float a, float b, float x) {
        float ft = (float) (x * 3.1415927);
        float f = (float) ((1 - Math.cos(ft)) * 0.5);
        return (float) (a * (1 - f) + b * f);
    }

    public static float Perlin2D(float x, float y, int posX, int posY, int posZ) {
        float total = 0;
        for(int i = 0; i < octaves; i++) {
            double f = Math.pow(2, i);
            double a = Math.pow(p, i);
            total = (float) (total + InterpolatedNoise((float)(x * f), (float)(y * f), posX, posY, posZ) * a);
        }
        return total;
    }

    public static void main(String [] args) {
        for(int z = 0; z < octaves; z++) {
            for(int y = 0; y < size; y++) {
                for(int x = 0; x < size; x++) {
                    noise[x][y][z] = GenerateNoise();
                }
            }
        }

        for(int z = 0; z < octaves; z++) {
            for(int y = 0; y < size; y++) {
                for(int x = 0; x < size; x++) {
                    perlinnoise[x][y] = Perlin2D(x / (size - 1), y / (size - 1), x, y, z) / octaves;
                }
            }
        }

        JFrame f = new JFrame("Perlin Noise");
        f.setSize(400, 400);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new Noise());
        f.setVisible(true);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        for(int y = 0; y < size; y++) {
            for(int x = 0; x < size; x++) {
                g.setColor(new Color(perlinnoise[x][y], perlinnoise[x][y], perlinnoise[x][y]));
                g.fillRect(x * 2, y * 2, 2, 2);
            }
        }
        repaint();
    }
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:55:26.790

诀窍是，Perlin 噪声不使用伪随机生成器，它使用一个函数，该函数接受一个参数并返回该参数的预定义值，但是当参数移动 1 时，该值几乎随机跳跃。检查置换公式[的来源](http://www.mrl.nyu.edu/~perlin/doc/oscar.html#noise)，该`init()`方法进行置换，然后用于产生整个噪声。

# java - 执行“su”导致的内存泄漏

> ID：14498787
> 
> 赞同：2
> 
> 时间：2013-01-24T10:14:40.047
> 
> 标签：java, android

```
Process process = Runtime.getRuntime().exec("su"); 
```

在有**根**手机上运行上述命令时，一切正常

**但是当我在非根**设备上尝试相同的代码时，它会导致内存泄漏，我可以在任务管理器中看到我的应用程序的多个实例，并且它们无法被杀死。我运行此代码的次数越多，内存就越少，直到手机完全死机，我必须重新启动

这是我得到的例外

```
01-24 11:06:56.459: E/App (8307): Error running exec(). Command: [su] Working Directory: null Environment: null 
```

为什么会出现这种情况，我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:23:36.370

摘录：http: [//forum.xda-developers.com](http://forum.xda-developers.com/showthread.php?t=651808)

不要依赖 rwsystem 和 rosystem 脚本，它们经常被破坏，没有 hash bangs 并且有 dos eol

改为使用

```
busybox mount rw,remount /system 
```

# text - ABAP startRFC.exe UTF-8 变音符号文本传输

> ID：14498798
> 
> 赞同：1
> 
> 时间：2013-01-24T10:15:09.267
> 
> 标签：text, utf-8, abap

我在 SAP 中有一个功能模块 (FM)，我使用 startRFC 在外部调用它。FM 的唯一输出是一个内部表。该表只有 1 列 char(100) 类型，我需要将其保存到文本文件中。StartRFC 运行良好，但如果有变音符号（例如捷克语：ěščřžýáíé）而不是这些字符，则只会出现 # 号。

有没有人解决过类似的问题？

如果我手动调用相同的算法并在 SAP 的屏幕上写入字符串，一切正常。但是 startRFC 以某种方式破坏了它。问题可能出在 SAP 和 startRFC 之间的数据传输中。但我不知道这种转移是如何运作的。

我找到了解决方案，但速度非常慢。它使用“gcl_conv_to_x->write”和“gcl_conv_to_x->get_buffer”将字符串转换为十六进制字符串，而不是调用“SCMS_XSTRING_TO_BINARY”，并且您需要一个二进制表。但完成所有这些工作需要 5 分钟。如果没有这种转换，我的算法需要 15 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T07:34:44.707

所以终于有办法了...

您需要创建 XSTRING 变量并用您的文本填充它。要将 STRING 转换为 XSTRING，请使用 FM：SCMS_STRING_TO_XSTRING。

然后，您将需要一个行类型为 BAPICONTEN 的内部表。它已经包含 SDOK_SDATX (RAW 1022) 类型的组件（列）。您只需在此表中添加一个新行，如下所示：

```
data: my_table_row LIKE LINE OF my_table.
my_table_row-line = my_xstring.
APPEND my_table_row INTO my_table. 
```

此表 (my_table) 可以通过 RFC 返回，其中包含西里尔文、德文字符等。

我只是一个初学者，所以请不要问我如何创建表格：）

# ruby-on-rails - Rails：best_in_place 集合问题

> ID：14498801
> 
> 赞同：0
> 
> 时间：2013-01-24T10:15:16.880
> 
> 标签：ruby-on-rails, namespaces, best-in-place

我的应用程序在两个不同的数据库上运行，我使用应用程序逻辑来处理它们。

我在**外部数据库上有****用户模型**，我只在我的**default_role 类**上记录了**id**。

 ******因此，在索引模板中，我从远程获取帐户，对于每个帐户，**我都必须查询我的表**以打印一些不可变的信息，并且我想提供**在我的表中更改角色的可能性**

索引信息=远程表信息（姓名ecc）+我的表信息（角色）

使用 best_in_place 编辑我的用户的 role_id 字段。

**问题是我的索引周期@operators 来自外部购买我需要改变我身边的角色！**

```
- @operators.each do |ope|   #cycle users
      %tr
        %td
          - user = User.find_by_bay_id(ope.account_id)
          - df = DefaultRole.find_by_operator_id(user.id)
          = best_in_place [:admin, df], :role_id, :type => :select, :collection => [[1, 'admin'], [2, 'coordinator'], [3, 'operator'], [4, 'base']] 
```

和我在控制器中的更新：

```
respond_to :html, :json

def index
  @operators = some logic from model where I get all the users
end

def update
  @df = DefaultRole.find(params[:id])
  @df.update_attributes(params[:default_role])
  respond_with [:admin, @df]
end 
```

但它甚至没有在控制器中调用我的更新方法。它通常会检查集合标签，允许我更改它，但不允许我提交。

我究竟做错了什么？

**编辑**

我的浏览器没有收到任何请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:40:05.570

Best_in_place gem 使用 JSON 调用来更新内容。在这种情况下，您应该`respond_to json`在控制器中有声明，如下所示：

```
def update
 @df = DefaultRole.find(params[:id])
respond_to do |format|
  if @df.update_attributes(params[:default_role])
    format.html { redirect_to root_path, notice: 'Role was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @df.errors, status: :unprocessable_entity }
  end 
end 
```

我觉得在你的视图中包含变量规范很奇怪，它们属于控制器（`- user = User.find_by_bay_id(ope.account_id) - df = DefaultRole.find_by_operator_id(user.id)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:20:21.873

我终于找到了错误。

[https://github.com/bernat/best_in_place/issues/217](https://github.com/bernat/best_in_place/issues/217)

这是那个版本的 best_in_place 上的 Jquery 问题。跑步：

`bundle update`

并重新启动服务器解决问题，谢谢大家******

# android - MySql 查询用于将同一表的 Id 与差异记录进行比较

> ID：14498802
> 
> 赞同：0
> 
> 时间：2013-01-24T10:15:16.840
> 
> 标签：android, mysql, sqlite

我需要有关 My Sql 查询的帮助..

我的表是这样的

```
_id studid  recid   arrival
834 29     436      12:04
835 29     437      12:19
836 29     438      12:35
837 29     439      12:43 
```

现在我需要比较`recid 436`和`recid 439`

正是这样

```
 _id(recid(436)) < _id(recid(439)) // 834 < 837 (true) 
```

我需要查询这个..

我试过这样..

```
public boolean Check(String tid,String src,String dest)
{
    Cursor c1 = this.db.query(TABLE_NAME_2, new String[] { "_id" },
            "_studId = \"" + src +"\"  AND _recId = \"" + tid+"\"" , null, null, null, null);

    Cursor c2 = this.db.query(TABLE_NAME_2, new String[] { "_id" },
            "_studId = \"" + dest +"\"  AND _recId = \"" + tid+"\"" , null, null, null, null);
    int srcid = 0;
    int destid = 0;

    if (c1.moveToFirst()) 
    {
          do {
              srcid = Integer.parseInt(c1.getString(0));
           } while (c1.moveToNext());
    }
    if (c1 != null && !c1.isClosed()) {
         c1.close();
    }
    if (c2.moveToFirst()) 
    {
        do {
            destid = Integer.parseInt(c2.getString(0));
        } while (c2.moveToNext());
    }
    if (c2 != null && !c2.isClosed()) {
        c1.close();
    }   
    if(srcid < destid)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

像这样检查时返回正确的结果

```
 System.out.println(dh.Check("29", "436", "439")); // returns true. 
```

但我认为它的程序不正确，因为会有多个记录。所以如果有 50 条记录，那么我必须执行这个函数 50 次。所以我需要一个简单的查询。

如果任何人有这样的经历。请帮帮我..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:21:10.940

您可以使用这样的查询，它返回 0 或 1：

```
SELECT (SELECT _id FROM MyTable WHERE recid = 436) <
       (SELECT _id FROM MyTable WHERE recid = 439) 
```

为了使重复执行更有效，请使用预编译语句，您可以使用不同的参数多次执行该语句：

```
SQLiteStatement stmt = db.compileStatement(
    "SELECT (SELECT _id FROM MyTable WHERE studid = ? AND recid = ?) < "+
           "(SELECT _id FROM MyTable WHERE studid = ? AND recid = ?)");
...
int recid_src = 436;
int recid_dst = 439;
int studid = 29;
stmt.bindLong(1, studid);
stmt.bindLong(2, recid_src);
stmt.bindLong(3, studid);
stmt.bindLong(4, recid_dst);
boolean result = stmt.simpleQueryForLong() != 0; 
```

# java - 二进制字符串到文本字符串 Java 代码

> ID：14498804
> 
> 赞同：1
> 
> 时间：2013-01-24T10:15:24.330
> 
> 标签：java

我已经阅读了有关此主题的几篇文章，但所提供的代码（有时是片段）都没有帮助我解决转换像这样的二进制字符串的简单问题：

```
01100111 01101111 01101111 01100100 00100000 01001101 01101111 01110010 01101110 01101001 01101110 01100111 00100000 
```

变成一个文本字符串 Good Morning

我可能无法将在 stackoverflow 中可用的链接中找到的代码片段放在一起。有人会这么好心并给我完整的代码吗？假设我有来自 JTextarea 的输入字符串（文本），我通过“gettext()”访问它，例如 text = tTextarea.gettext();

所以它的文字是 -

```
01100111 01101111 01101111 01100100 00100000 01001101 01101111 01110010 01101110 01101001 01101110 01100111 00100000) 
```

需要处理的答案。假设我会将输出字符串 (=answer) 放入与 "settext().ttextarea.settext(answer) 相同的 Textarea

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:30:38.167

这是解决您的请求的代码：

```
public static String int2str( String s ) { 
    String[] ss = s.split( " " );
    StringBuilder sb = new StringBuilder();
    for ( int i = 0; i < ss.length; i++ ) { 
        sb.append( (char)Integer.parseInt( ss[i], 2 ) );                                                                                                                                                        
    }   
    return sb.toString();
} 
```

对于您的输入：

```
01100111 01101111 01101111 01100100 00100000 01001101 01101111 01110010 01101110 01101001 01101110 01100111 00100000 
```

输出是：

```
good Morning 
```

# java - 通过单击下一个和上一个来更改按钮的值

> ID：14498805
> 
> 赞同：0
> 
> 时间：2013-01-24T10:15:26.017
> 
> 标签：java, android, android-layout, button, android-intent

> **可能重复：**
> [按钮下一个和上一个不起作用](https://stackoverflow.com/questions/14494574/button-next-and-prev-not-working)

我的布局中有 5 个按钮，在下一个按钮上我想更改来自 arraylist 的按钮的文本。我怎么能实现这个？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/white"
android:gravity="center_horizontal"
android:orientation="vertical" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b1"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="1" />
    </LinearLayout>

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b2"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="2 />
    </LinearLayout>

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b3"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="3" />
    </LinearLayout>

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b4"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="4" />
    </LinearLayout>

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b5"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="5" />
    </LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:enabled="false"
        android:text="Prev" />

    <Button
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:text="Next" />
</LinearLayout> 
```

我的 java class:: 这里的 count 是静态变量。

```
public void onClick(View arg0) {
    String a=null;
    switch(arg0.getId()){
    case R.id.left:

        if( count==0)
            prev.setEnabled(false);
        else{
             count--;

        }
        break;
    case R.id.right:
        if( count>5)
            next.setEnabled(false);
        else{
             count++;

        }
        break;
    case R.id.b1:

            a=(( count*0)+0)+"";
            bb1.setText(a);
        }
        break;
    case R.id.b2:

            a= (( count*0)+1)+"";
            bb2.setText(a);
        }
        break;
    case R.id.b3:

            a= (( count*0)+2)+"";
            bb3.setText(a);
        }
        break;
    case R.id.b4:

            a= ((count*0)+3)+"";
            bb4.setText(a);
        }
        break;
    case R.id.b5:

            a= ((count*0)+4)+"";
            bb5.setText(a);
        }
        break;

    }
} 
```

我希望通过计数值更改按钮文本。但价值观没有改变。我的疑问是每次点击下一个和上一个后是否需要刷新活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:28:57.403

你错过了这段代码吗？：

```
Button Button1= (button)findviewbyid(R.id.right);
Button1.setonclicklistener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:36:32.897

在您的 onClick() 方法中，逻辑不正确..只需要两种情况..

当您按下下一个或上一个按钮时，您可以更改剩余五个按钮的文本

就这样解决了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:59:28.680

问题是，您正试图在其自身的单击事件中更改按钮的文本。

因此，当您单击下一个或上一个时，按钮中的文本不会更改（仅计数更改）。当您单击它们（b1,2,3,4,5）时，它们只会更改（实际上更新为最新的计数值）。

因此，要获得所需的内容，请执行以下操作：

```
public void onClick(View arg0) {
String a=null;
switch(arg0.getId()){
case R.id.left:

    if( count==0)
        prev.setEnabled(false);
    else{
         count--;
         //You want to change the text(count) of button1,2,3,4,5 when you click prev.
         //So, do that here

bb1.setText("" + count);
bb2.setText("" + count);
bb3.setText("" + count);
bb4.setText("" + count);
bb5.setText("" + count);

         //Similarly on next clicked

    break;
case R.id.right:
    if( count>5)
        next.setEnabled(false);
    else{
         count++;
bb1.setText("" + count);
bb2.setText("" + count);
bb3.setText("" + count);
bb4.setText("" + count);
bb5.setText("" + count);

    break;
case R.id.b1:
        //here don't change any text, just check the text value and call the respective answer
       if(bb1.getText == "5"){
          //call answer5 etc..,
          }

          //do the same with other buttons b2,3,4,5
    break;
case R.id.b2:

        a= (( count*0)+1)+"";
        bb2.setText(a);

    break;
case R.id.b3:

        a= (( count*0)+2)+"";
        bb3.setText(a);

    break;
case R.id.b4:

        a= ((count*0)+3)+"";
        bb4.setText(a);

    break;
case R.id.b5:

        a= ((count*0)+4)+"";
        bb5.setText(a);

    break;

} 
```

}

通过单击下一个和上一个按钮来更改按钮的文本

# ios - 使用后退按钮打开网址

> ID：14498806
> 
> 赞同：1
> 
> 时间：2013-01-24T10:15:26.473
> 
> 标签：ios, url, uiviewcontroller

我有一个小麻烦。我想在我的 iOS 应用程序中打开 URL。

我在网上找到的方法是：

```
 [[UIApplication sharedApplication] openURL:url]; 
```

它工作正常，但这种方法关闭我的应用程序并打开没有后退按钮的 safari 以返回我的应用程序。如何做到这一点？

我想要类似的东西

```
 MFMessageComposeViewController * picker = [[MFMessageComposeViewController alloc] init];
   [self presentModalViewController:picker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:27:49.387

为什么不直接创建一个包含 UIWebView 的新视图控制器，而不是在 Safari 中打开 URL？

显示视图控制器，传入 URL，并将 URL 加载到 UIWebView 中。像这样的东西：

```
MyWebViewController *mwvc = [[MyWebViewController alloc] initWithURL:myURL];
[self.navigationController pushViewController:mwvc animated:YES]; 
```

然后在 MyWebViewController:initWithURL

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:myURL]];
[myWebView loadRequest:request]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:36:47.000

*Safari*是*Apple*自己提供的应用程序，因此无法改变*Sarari*的行为。

如果您需要一个*后退*`UIViewController`按钮，那么使用创建您的自定义`UIWebView`并将您的后退按钮放在那里。

对于*后退*功能，您可以使用`UINavigationController`或`UIViewAnimation`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T10:45:27.313

要将控件返回给主要的原生 iOS 应用程序，您可以使用 URLScheme 概念。URLScheme 概念为您提供原生 iOS 应用程序的唯一标识符 url。检查这个[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

它让您对实现您的要求的程序有一个公平的想法。

# c# - 用户登录但后来从数据库中删除时如何清除会话

> ID：14498809
> 
> 赞同：2
> 
> 时间：2013-01-24T10:15:32.520
> 
> 标签：c#, asp.net-mvc, session

当用户通过 Web 应用程序的身份验证时，会话中的令牌将被存储。如果管理员在用户仍然在线时删除了后端的用户。如何清除用户的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:39:40.147

**简短的回答：**你不能轻易做到这一点。让会话过期，用户将无法随后登录。

**长答案：**如果这个功能对你来说真的很重要，那么你必须检查每个请求的数据库，以确保用户在登录后没有被删除。这有点违背了在会话中存储用户信息的目的，尽管对数据库的调用可以是一个简单的布尔检查（即“用户是否仍然有效/活跃”）。

**我不能只删除用户的会话吗？**即使您手头有会话 ID，似乎也无法定位/操作特定会话。密钥和存储由`SessionStateStoreProviderBase`( `InProcSessionStateStore`, `OutOfProcSessionStateStore`, `SqlSessionStateStore`) 的实现在内部管理，并且不打算由开发人员操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:17:56.457

基于会话 Timeout 和 SlidingExpiration 属性。（感谢@chethan）。会话超时后，用户被迫从 MSDN [SlidingExpiration再次登录](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.slidingexpiration.aspx)

> 如果发出请求并且超过一半的超时间隔已经过去，则滑动到期会重置有效身份验证 cookie 的到期时间。如果 cookie 过期，用户必须重新认证。根据配置的超时值，将 SlidingExpiration 属性设置为 false 可以通过限制身份验证 cookie 的有效时间来提高应用程序的安全性。

```
system.web>
    <sessionState timeout="x minutes"/> 
    ...
</system.web> 
```

否则你可以使用 AuthorizeAttribute.AuthorizeCore 方法[AuthorizeCore](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.authorizecore.aspx)

[表单身份验证指南](http://www.guidanceshare.com/wiki/ASP.NET_2.0_Security_Guidelines_-_Forms_Authentication)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:28:02.827

您是否需要清除会话或只是阻止将来访问授权页面？

如果您对每个 http 服务器请求重新进行身份验证或检查授权，那么用户将被有效地注销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:16:09.357

通过在删除之前注销用户？

# linux - 读一本书学习Linux内核

> ID：14498810
> 
> 赞同：1
> 
> 时间：2013-01-24T10:15:38.033
> 
> 标签：linux, linux-kernel, operating-system

我已阅读这些*相关*问题的一般答案，

*   [了解 Linux 内核源](https://unix.stackexchange.com/questions/797/understanding-the-linux-kernel-source)
*   [Linux中的系统调用是如何实现的？](https://stackoverflow.com/questions/499188/how-is-the-system-call-in-linux-implemented)
*   [系统调用实际上是如何在 linux 上发生的？](https://stackoverflow.com/questions/1245817/how-does-a-syscall-actually-happen-on-linux?lq=1)

但仍然留下了我自己的问题。例如，在`int 0x80`内核上为系统调用提供服务，但“服务”调用是什么意思？例如，如果为[getuid进行服务调用](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/arch/arm/include/asm/unistd.h#L33)

`#define __NR_getuid (__NR_SYSCALL_BASE+ 24)`

然后一旦`int 0x80`发生，内核服务调用。那么内核究竟必须做什么来实现getuid呢？某处必须有一些代码在`int 0x80`. 假设已经下载了 Linux 内核源代码，您可以在哪里（例如，什么路径）找到源代码实现`__NR_getuid`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:38:05.740

的处理程序`getuid(2)`是 in `kernel/timer.c`，但你会在那里找到一个单行函数，它根本不会启发你。

我通过`make tags`在内核源目录的顶层说，然后说`vi -t sys_getuid`. `sys_*()`是系统调用入口点在内核中的命名方式。完成此操作后，您可以看到为什么`find`0xDen 给出的命令应该有效，而且实际上在我的系统上也有效。但是，使用[标签](http://ctags.sourceforge.net)更快更容易。

这就是为什么我一直建议那些想了解内核如何工作的人阅读有关它的书。这些书并没有从字面上告诉您每个系统调用是如何实现的，因为这需要它基本上逐行引导您完成所有代码。[内核中有数百万个 SLOC](http://en.wikipedia.org/wiki/Linux_kernel#History)。如果你把它打印出来，它实际上需要一个书柜来容纳它，即使你用小文本、双面打印它也是如此。

即使您忽略所有非核心部分，例如驱动程序、奇怪的文件系统、不太流行的 CPU 类型等，以便能够将其减少到其总大小的 1%，您仍然会留下一个十万 SLOC 犁过。这本身就填满了一本大书，没有留下太多评论的空间。

所以，一本关于内核的书的作用是让您全面了解其中发生的事情，以便您能够了解事物的存在位置以及它们是如何被自己激活的。您将了解将它们联系在一起的数据结构，以便您可以跟踪调用链等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:28:51.600

查找-名称“*.c”| xargs grep -n -E "SYSCALL_DEFINE" | grep getuid

# mysql - 如何在 MAMP 上添加“root”MySQL 用户？

> ID：14498814
> 
> 赞同：0
> 
> 时间：2013-01-24T10:15:52.090
> 
> 标签：mysql, root, mamp

在 PhpMyAdmin 上，我错误地删除了“root”用户。我也以“root”身份登录。如何在 MAMP 上重新添加用户“root”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:37:45.703

启动 MySQL 守护程序时，您可以提供`--init-file`as 选项，其中包含要在启动时执行的 SQL。

将此 SQL 查询粘贴到文件中，例如`/home/me/recover-mysql-root`：

```
INSERT INTO 
    mysql.user (`Host`, `User`, `Password`, Select_priv, Insert_priv, Update_priv, Delete_priv, Create_priv, Drop_priv, Reload_priv, Shutdown_priv, Process_priv, File_priv, Grant_priv, References_priv, Index_priv, Alter_priv, Show_db_priv, Super_priv, Create_tmp_table_priv, Lock_tables_priv, Execute_priv, Repl_slave_priv, Repl_client_priv, Create_view_priv, Show_view_priv, Create_routine_priv, Alter_routine_priv, Create_user_priv, Event_priv, Trigger_priv, Create_tablespace_priv)
VALUES
    ('localhost', 'root', PASSWORD('MyNewPass'), 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y'); 
```

然后使用这个初始化脚本启动 MySQL，它应该创建一个`root@localhost`具有所有权限的新帐户：

```
shell> mysqld_safe --init-file=/home/me/recover-mysql-root & 
```

有关更多信息，请参阅[如何重置 Root 密码^(文档)](http://dev.mysql.com/doc/refman/5.5/en/resetting-permissions.html)。

# python - 如何使用 xlrd 将 Python 日期转换为 Excel 日期（属性 xlrd.xldate_from_date_tuple 不存在）

> ID：14498816
> 
> 赞同：2
> 
> 时间：2013-01-24T10:15:55.030
> 
> 标签：python, excel, date, xlrd

如何使用 xlrd 模块将 Python 日期转换为 Excel 日期？[How to convert a python datetime.datetime to excel serial date number](https://stackoverflow.com/questions/9574793/how-to-convert-a-python-datetime-datetime-to-excel-serial-date-number)建议一个“手动”解决方案，我想知道它是否是最好的方法。

[Xlrd 文件](http://www.lexicon.net/sjmachin/xlrd.html)建议使用`xlrd.xldate_from_date_tuple`

但

```
>>> import xlrd
>>> xlrd.xldate_from_date_tuple
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'xldate_from_date_tuple' 
```

你能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:33:58.697

采用`xlrd.xldate.xldate_from_date_tuple`

# java - 在 Java Swing GUI 中让线程不断运行和更新文本框的最佳方法是什么

> ID：14498819
> 
> 赞同：2
> 
> 时间：2013-01-24T10:16:05.163
> 
> 标签：java, multithreading, swing, concurrency

我一直在阅读有关 Java 并发以及 Java Swing GUI 特有的多线程技术的介绍性材料。我目前不确定对我的情况使用的最佳方法是什么。我的情况如下：

我正在开发一个程序，其中一个功能是在用户停留在特定的 GUI 屏幕上时，使用来自语音识别 API 的代码来收听用户的语音。语音识别检测到的每个单词都会实时添加到 UI 上的 Java Swing 文本字段中。将检测到的每个单词都添加到文本字段中也很重要，因此语音识别线程一直运行直到用户选择退出非常重要。

我的代码当前包含在专用类的方法中。

```
public class VoiceRecognitionCore 
{

    public void RunVoiceRegonition() throws VoiceRecognitionException
    {
          //Voice recognition code here
    }
} 
```

什么是让这个线程持续运行的最有效和最安全的方法，我怎样才能让它访问 UI 上的文本字段。

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:19:26.043

一种可能的解决方法是在单独的线程上运行您的语音识别，然后，当您需要更新您的 GUI 时，只需使用[`SwingUtilities.invokeLater(Runnable runnable)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)更新您的 GUI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T10:25:52.327

我会建议你看看`SwingWorkers` [这里](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

**从 docs.oracle.com 的页面：**

`SwingWorker provides a number of communication and control features:`

`•The SwingWorker subclass can define a method, done, which is automatically invoked on the event dispatch thread when the background task is finished.`

`•SwingWorker implements java.util.concurrent.Future. This interface allows the background task to provide a return value to the other thread. Other methods in this interface allow cancellation of the background task and discovering whether the background task has finished or been cancelled.`

`•The background task can provide intermediate results by invoking SwingWorker.publish, causing SwingWorker.process to be invoked from the event dispatch thread.`

`•The background task can define bound properties. Changes to these properties trigger events, causing event-handling methods to be invoked on the event dispatch thread.`

# smartgwt - 如何定位 smartGWT 对话框

> ID：14498822
> 
> 赞同：2
> 
> 时间：2013-01-24T10:16:16.403
> 
> 标签：smartgwt

我现在正在尝试几个小时在 smartGWT 中移动我的对话框，但没有运气。

这是我的代码：

```
 Dialog dlg = new Dialog();

            ListGridRecord[] h = scoringGrid.getRecords();
            HLayout chart = new HLayout();
            vlayout.addMember(chart);

            dlg.addMember(highChart(h));
            dlg.moveBy(500, 900);
            dlg.setHeight("400px");
            dlg.setWidth("700px");
            dlg.show(); 
```

我也试过：`setLeft, setTop, setRect,`没有任何效果。
我的对话框总是显示在同一个位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:22:27.593

Dialog 是 Window 的子类。所以你可以调用继承的方法 setRect 。

*来自 Javadoc：*

```
public void setRect(int left, int top, int width,  int height) 
```

// 一次设置所有四个相对于封闭上下文的坐标。

如果您没有看到更改，在某些情况下您可能需要重新绘制，我认为这是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T21:11:55.473

我遇到过同样的问题。**我终于尝试在 show()之后**调用 moveTo( )，它奏效了。

```
dlg.show();
dlg.moveTo(400, 500); 
```

moveBy() 也以这种方式工作。

我不确定为什么会这样——我猜 show() 会自动将 Dialog 居中并覆盖之前的位置。但是，我在使用 Window 时没有得到相同的行为，并且在 Dialog 中看不到任何覆盖 show() 行为的内容。但是，它对我有用....

# ios - 如何从 iOS 应用程序中清除保存的密码或表单数据

> ID：14498823
> 
> 赞同：1
> 
> 时间：2013-01-24T10:16:20.913
> 
> 标签：ios, ios4, uiwebview, browser-cache

App 使用 UIWebView，用户注销时要注意和清除的缓存区域有哪些。

Cache.db ApplicationCache.db（如果适用） HTML5 数据库 Cookies

1\. 还有什么要寻找的吗？2\. 如何清除保存的密码或表单数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:21:44.483

Once try with clearing NSHTTPCookies.....Use this code.

```
NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (NSHTTPCookie *each in cookieStorage.cookies
{
    [cookieStorage deleteCookie:each];
} 
```

# php - 使用 Mysqli 自定义数据库类，查询后不会出错

> ID：14498830
> 
> 赞同：0
> 
> 时间：2013-01-24T10:17:01.283
> 
> 标签：php, oop, mysqli, require

我有以下课程

```
class mydbclass extends MySQLi {

public function __construct($host, $user, $pass, $db) {

    parent::__construct($host, $user, $pass, $db);

    if (mysqli_connect_errno()) {

        $this->greh(mysqli_connect_error());
        exit();
    }
}

function mquery($sql){

    if(!($result = $this->query($sql)))
    {

        $emsg = $this->error;
        $enum = $this->errno;
        echo 'Error with msg: ' . $emsg . ' and num: ' .$enum;

    } else {
        echo 'ok';
    }
}} 
```

如果我从同一个文件（'mdb.php'）中调用它，它工作正常。

但是，如果我在 index.php 中需要它，它不会捕获错误 msg 和 num。

我在这里和谷歌上花了很多时间，我无法理解这种行为。

这是 index.php 中的代码：

```
require_once ('databasecontrol.php');
$db = new mydb('127.0.0.1', 'x', 'x', 'x');
$db->mquery($sqlt); 
```

# c# - 结构常量还是类？

> ID：14498835
> 
> 赞同：2
> 
> 时间：2013-01-24T10:17:19.830
> 
> 标签：c#, class, struct

我需要存储一个有 5 个方向的数组，我想知道什么是最易读的方式。我可以做数组

```
 int myDirection[100] = {0,1,2,3,4,5,4,4,3,4,0......etc  // poor readability 
```

或者我可以使用常量并做

```
const up = 1;
const down = 2;  //... etc
int myDirection[100] = {up, down, center, right, left, .....etc 
```

或者我可以写一个结构

```
 struct direction
 { private byte mydirectionval;
   {
     public void direction Setup(){mydirection =1;}
     public void direction Setright(){mydirection=2;}
     public void direction Setdown(){mydirection=3;}
     public void direction Setleft(){mydirection=4;}
     public void direction Setcenter(){mydirection=0;}
     public direction Getdirection(){....              

   }
   direction newpath[100] = { ...... 
```

还是我应该写一堂课

```
 public static class direction   // not sure use static here ?
     { private int direction =0;
       public const int Up = 1; 
       public const int left =2;
       public const int down = 3;
       public const int right = 4;
       public const int center = 0;
       public int getdirection(){return direction}
       public void int setdirection(int x){direction=x} 
     }
     direction mydir[100] = new direction;
     mydir[0].setdirection(up);  
     // or use it like 
     mydir[0]=mydir.up  //==> i prefer readability of code so this looks better? 
```

好的人们建议使用枚举，但是我需要一个枚举数组 mydir[100] 怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:19:46.163

使用[枚举](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)。

```
enum Direction 
{
up = 1, 
down = 2, 
center = 3, 
right = 4, 
left = 5
} 
```

* * *

您可以在数组中使用它：

```
Direction[] myDirection = { Direction.left, Direction.up, Direction.right ... }; 
```

或者

```
myDirection[0] = Direction.left; ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:22:56.830

枚举呢？

```
public enum Direction 
{
   up, 
   down, 
   right,
   left,
   center 
} 
```

使用它：

```
Direction.up; 
```

# ruby-on-rails - Rails 3.2 + Heroku + S3 + CloudFront：不提供 gzip css js

> ID：14498837
> 
> 赞同：8
> 
> 时间：2013-01-24T10:17:28.360
> 
> 标签：ruby-on-rails, heroku, amazon-s3, gzip, amazon-cloudfront

我正在使用 assets_sync 运行 Rails 3.2。

创建了我的 css 和 js 的 gz 版本。CloudFront 不提供 gzip 版本，即使请求 gzip,deflate 的标头也是如此。

我也尝试过`config.gzip_compression = true`，`asset_sync.rb`但 CloudFront 仍在提供未压缩版本。我已确认我可以访问`ABC.cloudfront.net/XYZ.css.gz`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T19:13:36.273

您的 CloudFront 分配的来源是 S3 存储桶吗？如果是这样，问题是 S3 没有`Accept-Encodings`正确处理标头：[https ://github.com/rumblelabs/asset_sync/issues/153](https://github.com/rumblelabs/asset_sync/issues/153)

该问题中概述了一些潜在的解决方案。您可以默认提供 gzip 文件，因为大多数浏览器（不包括某些移动浏览器）都会正确处理它，或者您可以尝试[此处列出的解决方案](http://code.dblock.org/serving-compressed-rails-assets-from-s3-via-cloudfront)。

另一种可能的解决方案是使用 Varnish 缓存层作为 CloudFront 分配的自定义源：

**互联网 -> CloudFront -> 清漆 -> S3 存储桶**

当请求进入 CloudFront 时，如果尚未缓存在 CloudFront 中，它将被转发到 Varnish。Varnish 将从 S3 存储桶中获取未压缩的文件，按照标题的指示对其进行压缩，然后将文件发送回 CloudFront 进行缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:03:11.203

你`heroku config:add ASSET_SYNC_GZIP_COMPRESSION=true`为你的应用程序设置了吗？

# google-drive-api - 在 iframe 中打开 google drive url

> ID：14498839
> 
> 赞同：0
> 
> 时间：2013-01-24T10:17:29.300
> 
> 标签：google-drive-api

有什么方法可以在 iframe 中打开我网站上的 google drive 页面，因为用户使用 oauth google login 登录并拥有他的身份验证会话，并且我在身份验证期间也通过了范围，以便我们可以访问 google drive api完全，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:22:45.377

您不应该将 Google Drive 本身嵌入到 iframe 中。您可以选择使用：

1.  `embedLink`嵌入文件查看器（需要正确的 cookie 身份验证）
2.  `exportLinks`将文件导出为可查看的格式

抱歉，这些都不会为您提供完整的 Google Drive 编辑器，但这只能从 Google 获得。

# c# - 奇怪的实体框架行为 - 缓存？

> ID：14498840
> 
> 赞同：1
> 
> 时间：2013-01-24T10:17:33.707
> 
> 标签：c#, entity-framework, caching, asp.net-mvc-4, webgrid

我有使用 EF 4.3 和迁移的 ASP.NET MVC 4 应用程序。我使用 WebGrid Helper 为系统用户显示详细信息：

```
@grid.GetHtml(
headerStyle: "gridHeader",
footerStyle: "gridFooter",
firstText: "<< First",
previousText: "< Previous", 
nextText: "Next >",
lastText: "Last >>",
alternatingRowStyle: "gridAlternativeRow",
columns: new[] {
   grid.Column("Login", header: "User Login", canSort: true),
   grid.Column("FullName", header: "User Name", canSort: true),
   grid.Column("Email", header: "User Email", canSort: true),
   grid.Column("Category", header: "User Category", canSort: true),
   grid.Column(
    "", 
    header: "", 
    format: @<text>
            @Html.ActionLink("Edit",   "Edit",   new { id=item.Id} )
            </text>
    )                                                
}) 
```

如您所见，Edit 操作方法负责编辑用户详细信息。这是它将视图模型传递给视图的方式：

```
 public ActionResult Edit(int Id)
    {
        User user = repo.GetUser(Id);

        RegisterModel rm = new RegisterModel();
        rm.Id = user.Id;
        rm.Name = user.FullName;
        rm.UserName = user.Login;
        rm.Email = user.Email;
        rm.UserCategory = user.Category;
        rm.Categories = new List<SelectListItem>();

        List<Category> categories = repo.GetAllCategories();
        foreach (var item in categories)
        {
            SelectListItem sli = new SelectListItem();
            sli.Value = null;
            sli.Text = item.Title;
            if (user.Category == item.Title) sli.Selected = true;
            rm.Categories.Add(sli);
        }

        return View(rm);
    } 
```

这就是它保存细节的方式：

```
 [HttpPost]
    public ActionResult Edit(RegisterModel rm, string NewPassword, string OldLogin)
    {
        if (NewPassword != "")
        {
            var token = WebSecurity.GeneratePasswordResetToken(OldLogin);
            WebSecurity.ResetPassword(token, NewPassword);
        }

        User user = new User();
        user.Id = Convert.ToInt32(rm.Id);
        user.FullName = rm.Name;
        user.Email = rm.Email;
        user.Category = rm.UserCategory;
        user.Login = rm.UserName;

        string result = repo.UpdateUserDetails(user);

        return RedirectToAction("Index");
    } 
```

然后它重定向到索引操作方法，该方法获取用户列表并将其传递回带有 WebGrid Helper 的视图。

每次我访问存储库时，我都会从 DbContext 对象中获取用户的最新值：

```
 public List<User> GetAllUsersWithoutAdmin()
    {
        return context.Users.Where(x => x.Id != 1).OrderBy(x => x.FullName).ToList();
    }

    public User GetUser(int userId)
    {
        return context.Users.FirstOrDefault(x => x.Id == userId);
    }

    public string UpdateUserDetails(User user)
    {
        string info;

        try
        {
            User uUser = context.Users.FirstOrDefault(x => x.Id == user.Id);
            uUser.Category = user.Category;
            uUser.Email = user.Email;
            uUser.FullName = user.FullName;
            uUser.Login = user.Login;

            context.SaveChanges();
            info = "success";
        }
        catch (Exception err)
        {
            info = err.Message;
        }

        return info;
    } 
```

我还使用 UoW 模式来解决在同一控制器中使用不同存储库的问题：

```
public interface IUnitOfWork
{
    int SaveChanges();
} 
```

然后每个存储库都实现此接口：

```
 private ActivityLogContext context;

    public UserRepository(IUnitOfWork _context)
    {
        context = _context as ActivityLogContext;
    } 
```

And shares it in the same context in the scope of the thread which is implemented in the Ninject Controller Factory by AddBindings() method:

```
 private void AddBindings()
    {
        ninjectKernel.Bind<IActivityRepository>().To<ActivityRepository>();
        ninjectKernel.Bind<IUserRepository>().To<UserRepository>();
        ninjectKernel.Bind<ICategoryRepository>().To<CategoryRepository>();
        ninjectKernel.Bind<IUnitOfWork>().To<ActivityLogContext>().InThreadScope();
    } 
```

* * *

A PROBLEM: For some strange reason, once every so often, when user object is being edited, context object presents wrong values for the user properties. It is happening on the level of EF somewhere between the DbContext and actual data. Especially, that data in SQL server is always right. It looks like EF is caching previous values for the properties and takes those instead of sourcing them from database. I have not observed when this behaviour exactly occurs, but it happens rather often - every second or third time when object is edited. Sometimes it happens couple of times in the row.

I have used the same setup in previous application and everything was fine. The only difference this time is that I'm using WebGrid Helper, and only pages with WebGrid Helper seem to cause this problem in my application???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:30:41.947

Does your data render correctly if you try this?

Load Entities with AsNoTracking:

```
public List<User> GetAllUsersWithoutAdmin()
{
    return context.Users.AsNoTracking().Where(x => x.Id != 1)
        .OrderBy(x => x.FullName).ToList();
}

public User GetUser(int userId)
{
    return context.Users.AsNoTracking().FirstOrDefault(x => x.Id == userId);
} 
```

Detach Entities after saving:

```
public string UpdateUserDetails(User user)
{
    string info;

    try
    {
        User uUser = context.Users.FirstOrDefault(x => x.Id == user.Id);
        uUser.Category = user.Category;
        uUser.Email = user.Email;
        uUser.FullName = user.FullName;
        uUser.Login = user.Login;

        context.SaveChanges();

        // detach the entity after saving it
        Context.Entry(uUser).State = System.Data.EntityState.Detached;

        info = "success";
    }
    catch (Exception err)
    {
        info = err.Message;
    }

    return info;
} 
```

This will give you detached entities which aren't tracked in the EF context, an approach that may or not be acceptable depending on your application. Even if you can't use it in the long run, give it a try to see if the problem is really the EF caching.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:23:46.127

I have noticed this behavior also. To demonstrate, Open View, make the change directly in the dB. BANG you will see the change is not reflected in in your view.

EF does cache data and will only "refresh" (bad choice of word here) this data if the context you read from the dB is also the context you had written to the dB with.

Hope this points you int he right direction.

# c# - 异步 TCP 服务器/客户端不可靠的数据包？

> ID：14498844
> 
> 赞同：1
> 
> 时间：2013-01-24T10:17:50.150
> 
> 标签：c#, asynchronous, tcp, tcpclient, netstream

好吧，对于我的游戏，我设置了一个服务器/客户端对等连接，来回发送位置等。

尽管我的消息实际上并没有发送得那么快，而且也不可靠。由于部分字符串丢失，有时发送只是停止并且线程不继续（不知道为什么）.t

无论如何，我的接收代码在这里：

```
 public void RecieveAsync()
    {

        if (netStream == null) netStream = Server.GetStream();

        if (netStream.DataAvailable == false) return;

        netStream.BeginRead(ReadBuffer, 0, ReadBuffer.Length, new AsyncCallback(recieveCallBack), netStream);

    }

    public void recieveCallBack(IAsyncResult ar)
    {
        //try
        //{

        String content = String.Empty;

        Console.WriteLine("Stuck trying to get data");

        int rec = netStream.EndRead(ar);

        if (rec > 0)
        {

                Console.WriteLine(Encoding.ASCII.GetString(
    ReadBuffer, 0, rec));

            string packet = Encoding.ASCII.GetString(
    ReadBuffer, 0, rec);
                bool completedPacket = false;
                int appendTo = rec;

                if (packet.Contains("<eof>"))
                {
                    appendTo = packet.IndexOf("<eof>");
                    packet.Replace("<eof>", "");
                    completedPacket = true;
                }

                SB.Append(packet, 0, appendTo);

                // Check for end-of-file tag. If it is not there, read   
                // more data.  

                content = SB.ToString();

            if (completedPacket)
            {
                // All the data has been read from the   
                // client. Display it on the console.  

                if (DataRecieved != null)
                {
                    string RecievedData = SB.ToString();

                    DataRecieved(RecievedData);

                    netStream.Flush();

                    Array.Clear(ReadBuffer, 0, ReadBuffer.Length);
                    ReadBuffer = new byte[1024];
                }

                SB.Clear();

                // Echo the data back to the client.  
            }
            else
            {
                // Not all data received. Get more.  
                Array.Clear(ReadBuffer, 0, ReadBuffer.Length);
                ReadBuffer = new byte[1024];
                netStream.BeginRead(ReadBuffer, 0, ReadBuffer.Length, recieveCallBack, netStream);
            }

        }

    } 
```

我的发送代码在这里：

```
 public void Send(byte[] data, int index, int length)
    {
        //add data as state

        //socket.NoDelay = true;

        if (netStream == null) netStream = TcpClient.GetStream();

        netStream.BeginWrite(data, 0, length, sendCallback, netStream);

    }

    private void sendCallback(IAsyncResult ar)
    {
        //try
        //{
           netStream.EndWrite(ar);

            //if (ar.AsyncState != null)
            //{
            //    byte[] buffer = (byte[])ar.AsyncState;
            //    socket.BeginSend(buffer, 0, buffer.Length, SocketFlags.None, sendCallback, null);
            //    return;
            //}

            if (OnSend != null)
            {
                OnSend(this);
            }

            netStream.Flush();

        //catch (Exception ex)
        //{
        //    System.Windows.Forms.MessageBox.Show(ex.ToString());
        //    return;
        //}
    } 
```

数据包位于 Encoding.ASCII.Getbytes 下。

并且服务器和客户端都在使用 Thread.Sleep(1) 更新 while (true) 线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:26:29.360

因为您正在尝试逐位重构字符串（如果您使用更常见的多字节编码，例如 UTF8，这种方法会中断），因此您的方法很脆弱。

正如我的评论中所述，您可能会错过您的`<eof>`内容，因为它分为两次阅读。

IMO，一种更可取的方法是使用前面的长度字段（4 字节 int）标记您的消息，这样您就不必在消息的末尾踮起脚尖试图弄清楚它是否已经完成。

只需将所有读取内容倒入 a 中`MemoryStream`，直到达到指定的消息长度，然后`MemoryStream`使用您认为合适的任何编码解码 a 的内容。

# orm - Doctrine2，从另一个实体创建一个实体？

> ID：14498850
> 
> 赞同：0
> 
> 时间：2013-01-24T10:18:01.763
> 
> 标签：orm, doctrine-orm

我正在使用 Doctine2\ORM 并且我有[用户](http://pastie.org/5841492)的实体和[角色](http://pastie.org/5841489)。

当用户注册时，我需要用用户ID创建角色记录并将其ID返回给用户，然后创建用户记录，我该如何组织我的注释来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:28:06.710

您可以在 期间为您的用户添加默认角色`__construct`，然后将关联标记为`cascade={"persist"}`。

构造函数看起来像：

```
public function __construct()
{
    $this->role = new RoleLink();
} 
```

我也不认为角色需要保留对用户本身的引用，但如果需要，请记住，在 Doctrine 2 ORM 中，您通过将相关对象分配给关联属性本身（而不是标识符！）来处理关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:34:44.463

首先，我认为您不想在用户注册时创建角色条目。我认为预先定义这些（以及它们各自的访问权限）是明智的。

一旦你解决了这个问题，我想你所追求的明显关系将是用户上的 ManyToOne 和持久级联集。

```
/**
 * @Table(name="role")
 */
class Role
{

    // possibly define your roles accesses as another realtion or hard code?
}

/**
 * @Table(name="user")
 */
class User
{
    // id + any other definitions

    /**
     * @var Entities\Role $role
     * @ManyToOne(targetEntity="Role", cascade={"persist"})
     */
    private $role;
} 
```

# javascript - 来自 ArrayController 中项目的单个视图

> ID：14498851
> 
> 赞同：1
> 
> 时间：2013-01-24T10:18:06.780
> 
> 标签：javascript, model-view-controller, ember.js

我有一个 ember.js 模型和控制器设置，如下所示：

```
//model
App.Order = Ember.Object.extend({

  content: null,

  create: function(data) {
    this.set('content', data);
    return this._super();
  }

});

//orders controller
App.ordersController = Ember.ArrayController.create({

  content: [],

  init: function() {

        var self = this;
    var orders = [];

    $.getJSON('js/data.json', function(data) {  
        data.forEach(function(item) { 
          var order = App.Order.create(item);
          orders.push(order);
        });
      self.set('content', orders);
    });
    },

  selectItem: function(data) {
    alert(data);
  }

}); 
```

有以下观点：

```
{{#each App.ordersController}} 
   <div {{action selectItem target="App.ordersController"}}>{{order_number}}</div>
{{/each}} 
```

它会打印出一个订单列表，点击操作会提醒相应的项目。这工作正常。

我想要做的是在单独的视图中显示一个单击的项目，最终目标是创建一个显示订单详细信息的浮动对话。我是 ember 的新手，不知道应该如何实施。我有一个`selectItem`提醒点击订单的功能，但我需要将其链接到单独的视图并打印订单详细信息。

我应该将所选项目存储在具有相应视图的单独控制器中并在`selectItem`单击时更新它吗？或者我可以从ordersController 更新一个单独的视图吗？非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:16:26.963

当您使用路由器时，ember 会为您实例化您的类。通过指定`"orders"`路由，它会查找调用的模板`orders`和调用的控制器，`OrdersController`如果找不到，它会为您生成一个。（为了清楚起见，我省略了控制器）。要从 json 源加载模型，您可以查看 ember-data。

这是一个[jsfiddle](http://jsfiddle.net/xVeXx/3/)，所以你可以稍微摆弄一下。

你绝对应该在[这里](http://emberjs.com/guides/)看看这些是 ember 的指南，它们真的可以帮助你。文档越来越好。:)

**JS：**

```
window.App = App = Em.Application.create();

//model
App.Order = Ember.Object.extend({
    order_number: null,
});

//we create 2 routes one for all the order and one per specific order
App.Router.map(function(){
    this.resource('orders', { path: "/" });
    this.resource("order", { path: "/:order_id" });    
});

//the route supplies the model and handles the event to transition to a new route.    
App.OrdersRoute = Em.Route.extend({
    events: {
        selectItem: function (orderId) {
            //select the order by the "orderId" you want as a model for your new view.
            this.transitionTo("order", order);
        }
    },
    model: function(){
        return content; //an array containing the orders;
    }
});

//supplies the model for the "order" route by selecting one acording to the params;
App.OrderRoute = Em.Route.extend({
    model: function(params){
        return order; //select an object from the array according to the params
    },    
}); 
```

**哈佛商学院：**

```
<script type="text/x-handlebars" data-template-name="orders">
    {{#each controller}} 
      <!-- this calls the event handler "selectItem" on the ordersroute -->
      <div {{action "selectItem" order_number}}>{{order_number}}</div>
    {{/each}}

    <!-- this is handled by "App.OrderRoute" -->
    <a href="#/3"/>with a direct link</a>
</script>

<script type="text/x-handlebars" data-template-name="order">
    {{content.order_number}}
    {{#linkTo "orders"}}Back to orders{{/linkTo}}
</script> 
```

# javascript - javascript - 无法检索数组数据

> ID：14498856
> 
> 赞同：0
> 
> 时间：2013-01-24T10:18:21.657
> 
> 标签：javascript, arrays, mesh

我正在尝试编写一个 OBJMesh 模型阅读器并且我已经设置了 OBJMesh 类，但是当我尝试通过创建 OBJMesh 对象并调用 get 函数来检索数组中存储的数据时，它并没有这样做。

这是代码

**OBJMesh.js**

```
function OBJMesh(file)
{
    this.modelVertex = [];
    this.modelColor = [];
    this.init = false;

    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, true);

    var objmesh = this;
    rawFile.onreadystatechange = function ()
    {

        if(rawFile.readyState == 4)
        {
            if(rawFile.status === 200 || rawFile.status === 0)
            {
                var allText = rawFile.responseText;
                var lines = allText.split("\n");

                for(var i = 0; i < lines.length; i ++)
                {
                    var lineData = lines[i];
                    var lineString = lineData.split(" ");

                    if(lineString[0] === "v")
                    {

                        var x = parseFloat(lineString[1]);
                        var y = parseFloat(lineString[2]);
                        var z = parseFloat(lineString[3]);

                        objmesh.modelVertex.push(x);
                        objmesh.modelVertex.push(y);
                        objmesh.modelVertex.push(z);

                        objmesh.modelColor.push(0.0);
                        objmesh.modelColor.push(0.0);
                        objmesh.modelColor.push(0.0);
                        objmesh.modelColor.push(1.0);

                        //document.getElementById("textSection").innerHTML = objmesh.modelVertex[0];
                    }
                }
            }
        }
        objmesh.init = true;
    }

    rawFile.send();
}

OBJMesh.prototype.getModelVertex = function ()
{
    return this.modelVertex;
};

OBJMesh.prototype.getModelColor = function ()
{
    return this.modelColor;
};

OBJMesh.prototype.getInit = function ()
{
    return this.init;
}; 
```

**main.js**

```
var cubeModel;

function main()
{
    cubeModel = new OBJMesh("file:///Users/DannyChen/Desktop/3DHTMLGame/cube.obj");

    while(cubeModel.getInit() === false)
    {
        //wait for it
    }

    var cubeVertex = cubeModel.getModelVertex();

    document.getElementById("textSection").innerHTML = cubeVertex[0];

} 
```

它只是不断打印出“未定义”。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:38:21.113

但似乎 onreadystatechange 是一个异步调用，所以，

```
this.init = true; 
```

将在调用函数 onreadystatechange 之前设置。

可能你可以在 onreadystatechange 函数的末尾设置

```
objmesh.init = true; 
```

我希望这有帮助

# android - Android：获取正在运行的应用程序的计时信息

> ID：14498865
> 
> 赞同：3
> 
> 时间：2013-01-24T10:18:44.817
> 
> 标签：android

我使用[此](https://stackoverflow.com/questions/9736680/how-to-get-info-about-all-running-activities-in-android)代码来获取当前在 android 应用程序中运行的应用程序的信息。我想知道如何获取当前正在运行的应用程序的时间信息（开始时间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T07:01:18.820

```
 long millisSinceBoot = SystemClock.elapsedRealtime();
         System.out.println("00000    "+millisSinceBoot);
         System.out.println("11111    "+values.get(position).activeSince+" "+values.get(position).process);
         long time = ((millisSinceBoot - values.get(position).activeSince)/1000);
         int[] vals = splitToComponentTimes(time);

         String time1 = vals[0]+":"+vals[1]+":"+vals[2];
         time_list.add(time);        
         timer.setText(time1);

         System.out.println("valssssss "+vals[0]+" "+vals[1]); 
```

# android - 操作栏向上按钮保留空间？

> ID：14498867
> 
> 赞同：0
> 
> 时间：2013-01-24T10:18:47.893
> 
> 标签：android, image, android-actionbar, drawable, back-button

我注意到，当您在操作栏中放置自定义可绘制对象时，即使我没有设置`setDisplayHomeAsUpEnabled(true);`操作栏中的空间，也会为图标保留空间。我已经在样式中设置了drawable：

```
<item name="android:homeAsUpIndicator">@drawable/someIcon</item> 
```

是否有可能以某种方式禁用 actionBar 在不需要时为图标保留空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:23:47.400

利用

```
setDisplayShowHomeEnabled(false) 
```

# c# - 进程在没有来自 WCF 服务的 GUI 的情况下启动

> ID：14498868
> 
> 赞同：1
> 
> 时间：2013-01-24T10:18:48.297
> 
> 标签：c#, wcf, process, process.start

我需要从 WCF 服务（自托管）启动进程。我已经使用 Process.Start() 方法完成了它。并且进程在没有 GUI 的情况下启动，它们仅在任务管理器中可见。我尝试使用任何 StartInfo 参数调用 Process.Start 方法，但没有结果。有什么方法可以像手动一样启动进程以使其可见？

**更新：** 我尝试启用与桌面的交互，我可以看到我的应用程序 GUI，但只有在手动单击“阅读消息”（系统窗口）之后。我怎样才能自动化它？

# c# - 是否对 Contract.Ensures 执行静态检查？

> ID：14498871
> 
> 赞同：2
> 
> 时间：2013-01-24T10:18:59.767
> 
> 标签：c#, code-contracts

我不明白为什么静态检查器说这种方法一切正常：

```
public static int GetNonNegativeValue()
{
    Contract.Ensures(Contract.Result<int>() >= 0);

    return -1;
} 
```

静态检查已开启。

**更新：**

这也可以。

```
var i = Doer.GetNonNegativeValue();
Contract.Assert(i < 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:22:16.280

当您在静态检查器的设置中激活“推断需要”时，此警告似乎消失了。

它将推断`Contract.Requires(false)`("CodeContracts: Suggested requires: Contract.Requires(false);") 这将使该方法“无效”，因为现在不能在不引发合同异常的情况下调用它。看起来合同检查器没有验证`Ensures`这种方法，因为它无论如何都不会执行该`return`语句。

顺便说一句：激活或停用“显示波浪线”不会以任何方式改变此行为。我只能假设 OP 在测试时不仅更改了此设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:28:56.513

您可能需要重新选中以下复选框，然后重新构建项目：

> 右键单击项目 -> 属性 -> 代码合同 -> 显示曲线

此外，请确保您的解决方案`Active Config`（或特定项目的`Build`配置）与属性页中的`Configuration`匹配`Code Contracts`。

# php - 在 codeigniter 中禁用时间戳更新

> ID：14498875
> 
> 赞同：1
> 
> 时间：2013-01-24T10:19:15.020
> 
> 标签：php, mysql, codeigniter, activerecord

`active record`面临的问题：当我试图通过更新字段`CodeIgniter`更新字段时`timestamp`。例如我的代码：

```
$this->db->where('user_i', 1);
$this->db->update('ci_users', $user_info); 
```

创建这个 sql：

```
UPDATE `ci_users` SET `user_fullname` = 'asdasdfsafd' WHERE `user_iD` =  1 
```

但是在执行之后，`ci_users.user_creation_date`字段也会发生变化。哪里可能有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:25:03.160

这就是`timestamp`字段的用途。
如果您不希望它们在更新时被更改 - 请`DATETIME`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:29:51.867

如果您为列提供默认值 CURRENT_TIMESTAMP 或 NULL，Mysql 将自动将时间戳更新为当前时间戳，因此解决方案是您不应该为该列提供默认值...

# intellij-idea - Intellij 快捷方式搜索，遍历列表

> ID：14498883
> 
> 赞同：0
> 
> 时间：2013-01-24T10:19:32.340
> 
> 标签：intellij-idea

假设我确实找到了用法，（`Alt`+ `F7`）我得到了一个结果列表，我如何用我的键盘对其进行迭代我想要一个键盘导航选项，就像在 Visual Studios F7 F8 中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:39:06.777

在查找结果视图中查看“上一次出现”和“下一次出现”按钮的工具提示。这些操作的默认快捷键是 Ctrl-Alt-Up/Down。

# ruby-on-rails - 冲泡安装 redis (osx 10.7)

> ID：14498885
> 
> 赞同：7
> 
> 时间：2013-01-24T10:19:34.643
> 
> 标签：ruby-on-rails, bash, redis, homebrew

我尝试通过 bash 中的自制软件在 osx 10.7 上安装 Redis，但出现以下错误：

```
==> Downloading http://redis.googlecode.com/files/redis-2.6.9.tar.gz
Already downloaded: /Library/Caches/Homebrew/redis-2.6.9.tar.gz
==> make -C /private/tmp/redis-wQAX/redis-2.6.9/src CC=cc
Error: Permission denied - /usr/local/var/db 
```

据我所知，没有安装 Redis。

```
$ ps -aux | grep redis
ps: No user named 'x' 
```

我找不到解决方案，也不知道该问谁！如果您对此有解决方法或解决方案/建议，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T10:54:15.733

我也在使用 osx 10.7。我认为您不需要通过自制软件安装 Redis。您可以按照[redis 主页](http://redis.io/download)中的简单说明进行操作：

![在此处输入图像描述](../Images/18614f7f8c4bc9969f27d07354d37883.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T10:19:34.643

在 bash 中：

```
cd /usr/local/var/
ls 
```

目录'db'很可能丢失，创建它：

```
mkdir db 
```

然后运行

```
brew install redis 
```

检查 /usr/local/var/log

```
ls 
```

很可能目录“日志”丢失，创建它

```
mkdir log
brew install redis 
```

# asp.net - 保留 POST 数据并重定向到另一个域

> ID：14498886
> 
> 赞同：2
> 
> 时间：2013-01-24T10:19:36.457
> 
> 标签：asp.net, http, post

我有两个域 innosia.com 和 sorainnosia.com，innosia.com 是一个旧域，我希望任何访问它的人都能重定向到 sorainnosia.com，包括他们发布的 POST 数据。因为目前有一个旧的 Windows 应用程序将数据 POST 到我无法在客户端修改的旧域，并且希望数据被 POST 到新域，而不是只通过更改到 innosia.com 而不修改客户端 Windows 应用程序。

我发现重定向到另一个域的 HTTP 状态 301 不会保留 POST 数据。我在 google 和 stackoverflow 上搜索，但找不到任何答案。我的网站是使用 ASP.NET MVC 3.0 构建的，有人有任何解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:39:02.590

一些 HTTP 客户端无法正确处理其 POST 请求的 301 重定向。

但是，您可以将旧的 DNS 记录更改为指向新服务器，或者在旧 URL 上部署一个简单的代理（如 Apache），以便在后台将请求转发到新服务器。

# c++ - std::mutex 与 std::recursive_mutex 作为类成员

> ID：14498892
> 
> 赞同：54
> 
> 时间：2013-01-24T10:19:52.393
> 
> 标签：c++, c++11, mutex, object-design, recursive-mutex

我看到有些人讨厌`recursive_mutex`：

[http://www.zaval.org/resources/library/butenhof1.html](http://www.zaval.org/resources/library/butenhof1.html)

但是在考虑如何实现一个线程安全的类（互斥锁保护）时，在我看来很难证明每个应该受互斥锁保护的方法都是互斥锁保护的，并且互斥锁最多被锁定一次。

因此，对于面向对象的设计，是否应该`std::recursive_mutex`默认并`std::mutex`在一般情况下将其视为性能优化，除非它仅用于一个地方（仅保护一种资源）？

为了清楚起见，我说的是一个私有的非静态互斥体。所以每个类实例只有一个互斥锁。

在每个公共方法的开头：

```
{
    std::scoped_lock<std::recursive_mutex> sl; 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-30T09:46:33.337

大多数时候，如果您认为需要递归互斥锁，那么您的设计是错误的，因此绝对不应该是默认设置。

对于具有单个互斥锁保护数据成员的类，互斥锁应在所有`public`成员函数中锁定，并且所有`private`成员函数应假定互斥锁已被锁定。

如果一个`public`成员函数需要调用另一个`public`成员函数，则将第二个成员函数一分为二：一个`private`执行工作的实现函数，以及一个`public`仅锁定互斥体并调用互斥体的成员函数`private`。然后第一个成员函数也可以调用实现函数，而不必担心递归锁定。

例如

```
class X {
    std::mutex m;
    int data;
    int const max=50;

    void increment_data() {
        if (data >= max)
            throw std::runtime_error("too big");
        ++data;
    }
public:
    X():data(0){}
    int fetch_count() {
        std::lock_guard<std::mutex> guard(m);
        return data;
    }
    void increase_count() {
        std::lock_guard<std::mutex> guard(m);
        increment_data();
    } 
    int increase_count_and_return() {
        std::lock_guard<std::mutex> guard(m);
        increment_data();
        return data;
    } 
}; 
```

这当然是一个简单的人为示例，但该`increment_data`函数在两个公共成员函数之间共享，每个成员函数都锁定互斥锁。在单线程代码中，它可以内联到`increase_count`，并且`increase_count_and_return`可以调用它，但我们不能在多线程代码中这样做。

这只是一个良好设计原则的应用：公共成员函数负责锁定互斥锁，并将完成工作的责任委托给私有成员函数。

这样做的好处是`public`成员函数只需要在类处于一致状态时处理被调用：互斥锁被解锁，一旦它被锁定，那么所有不变量都成立。如果您`public`互相调用成员函数，那么他们必须处理互斥锁已被锁定的情况，并且不变量不一定成立。

这也意味着条件变量等待之类的事情将起作用：如果您将递归互斥锁上的锁传递给条件变量，那么（a）您需要使用`std::condition_variable_any`因为`std::condition_variable`不起作用，并且（b）只释放一级锁，所以你可能仍然持有锁，因此死锁，因为会触发谓词并执行通知的线程无法获取锁。

我很难想到需要递归互斥锁的场景。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-24T10:35:58.937

> 应该`std::recursive_mutex`是默认的并被`std::mutex`视为性能优化？

不是真的，不。使用非递归锁的优点*不仅仅是*性能优化，它意味着你的代码可以自我检查叶级原子操作是否真的是叶级的，它们不会调用使用锁的其他东西。

有一种相当常见的情况：

*   实现一些需要序列化的操作的函数，因此它需要互斥体并执行此操作。
*   另一个实现更大的序列化操作的函数，并且想要调用第一个函数来执行它的一个步骤，同时它为更大的操作持有锁。

为了一个具体的例子，也许第一个函数从列表中原子地删除一个节点，而第二个函数从一个列表中原子地删除*两个*节点（并且您永远不希望另一个线程看到仅使用两个节点中的一个的列表出去）。

为此，您*不需要递归互斥锁。*例如，您可以将第一个函数重构为一个公共函数，该函数获取锁并调用一个“不安全”执行操作的私有函数。然后第二个函数可以调用相同的私有函数。

但是，有时使用递归互斥锁会很方便。这种设计仍然存在一个问题：在类不变量不成立的地方`remove_two_nodes`调用`remove_one_node`（第二次调用它时，列表正好处于我们不想公开的状态）。但是假设我们知道它`remove_one_node`不依赖于那个不变量，这不是设计中的致命错误，只是我们使我们的规则比理想的“所有类不变量总是在任何公共函数时都成立”更复杂一点。进入”。

所以，这个技巧有时很有用，我并不像文章那样讨厌递归互斥锁。我没有历史知识来争论将它们包含在 Posix 中的原因与文章所说的不同，“展示互斥体属性和线程扩展”。不过，我当然不认为它们是默认值。

我认为可以肯定地说，如果在您的设计中您不确定是否需要递归锁，那么您的设计就是不完整的。稍后您会后悔您正在编写代码并且您*不知道*是否允许已经持有锁这样的根本重要的事情。所以不要“以防万一”放置递归锁。

如果你知道你需要一个，就用一个。如果您知道自己不需要，那么使用非递归锁不仅仅是一种优化，它还有助于强制执行设计约束。第二把锁失败比它成功并隐藏你不小心做了一些你的设计认为不应该发生的事情更有用。但是，如果您遵循您的设计，并且从不双重锁定互斥锁，那么您将永远无法确定它是否是递归的，因此递归互斥锁不会*直接*有害。

这个类比可能会失败，但这是另一种看待它的方式。想象一下，您可以在两种指针之间进行选择：一种在您取消引用空指针时使用堆栈跟踪中止程序，另一种返回`0`（或将其扩展为更多类型：表现得好像指针引用了一个值-初始化对象）。非递归互斥锁有点像中止的互斥锁，递归互斥锁有点像返回 0 的互斥锁。它们都有各自的用途——人们有时会竭尽全力实现“安静的非-值”值。*但是，如果您的代码设计为从不取消引用空指针，则默认情况下*您不想使用静默允许这种情况发生的版本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-26T11:32:07.930

我不打算直接讨论 mutex 与 recursive_mutex 的争论，但我认为分享一个 recursive_mutex 对设计绝对至关重要的场景会很好。

在使用 Boost::asio、Boost::coroutine（可能还有诸如 NT Fibers 之类的东西，尽管我对它们不太熟悉）时，即使没有重入设计问题，您的互斥锁也是递归的绝对必要的。

原因是基于协程的方法在其设计上会暂停一个例程*内*的执行，然后再恢复它。这意味着一个类的两个顶级方法可能“在同一个线程上同时被调用”而没有进行任何子调用。

# c++ - C++：IO 性能问题

> ID：14498893
> 
> 赞同：1
> 
> 时间：2013-01-24T10:19:56.420
> 
> 标签：c++

我在内存中有一个大数组。我正在使用以下文件将其写入文件：

```
 FILE* fp = fopen("filename", "wb");
             fwrite(array, sizeof(uint32_t), 1500000000 , fp); // array saved
             fflush(fp) ;
             fclose(fp); 
```

并使用以下方法再次阅读：

```
 FILE* fp = fopen("filename", "rb");
              fread(array, sizeof(uint32_t), 1500000000 , fp);
              fclose(fp); 
```

因为，写需要 7 秒，读需要 5 秒。

实际上，我不必编写整个数组。我必须通过检查一些条件来编写和阅读它。像（示例案例）：

```
#include<iostream>
#include <stdint.h>
#include <cstdio>
#include <cstdlib>
#include <sstream>

using namespace std;

main()
{
      uint32_t* ele = new uint32_t [100] ;
      for(int i = 0; i < 100 ; i++ )
      ele[i] = i ;

      for(int i = 0; i < 100 ; i++ ){
          if(ele[i] < 20)
          continue ;
          else
          // write  ele[i] to file
          ;   
      }

 for(int i = 0; i < 100 ; i++ ){
          if(ele[i] < 20)
          continue ;
          else
          // read  number from file
          // ele[i] = number * 10 ;
          ;   
      }

     std::cin.get();
} 
```

出于这个原因，我正在做的是：

写作使用：

```
for(int i = 0; i < 1500000000 ; i++ ){
if (arrays[i] < 10000000)
continue ;
uint32_t number = arrays[i] ;
fwrite(&number, sizeof(uint32_t), 1, fp1);
} 
```

并阅读使用：`fread(&number, sizeof(uint32_t), 1, fp1);`

本例：写入需要 2.13 分钟，读取需要 1.05 分钟。

这对我来说是相当长的时间。谁能帮助我，为什么会发生这种情况（在第二种情况下文件大小小于第一种）？以及如何解决这个问题？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:30:50.320

我[不久前对此进行了基准测试](https://stackoverflow.com/questions/13588245/efficiency-of-fwrite-for-massive-numbers-of-small-writes/13588531#13588531)，在我的机器上，许多小型`fwrite()`调用只能维持大约 90 MB/s（磁盘比这快得多，因此测试不受磁盘限制）。

我的建议是自己做缓冲：将值写入中间数组，并不时使用单个`fwrite()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:22:23.923

只写一次会更快。我建议您仅使用要打印的元素构建一个辅助数组，然后在单个 fwrite 调用中写入该数组。当然，这将需要额外的内存，但这是标准的权衡 - 内存与性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:28:05.417

即使 C 的 FILE* 例程被缓冲，每次调用仍然有相当多的开销 - 最终执行数百万次整数大小的读/写会影响您的性能。

编辑：您是否正在尝试进行整数大小的读取以优化速度？还是出于某些数据一致性的原因（即，只有在条件为真**时才必须更新数组中的整数）？**

如果出于一致性原因，请考虑一次读取一个块（可能是 4k 或更大），然后从数据块中进行比较并可能更新 - 或使用内存映射文件，如果它在您的目标平台上可用（ s)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:49:42.883

问题的标题是 C++，那么为什么不使用出色的缓冲流设施呢？ [C++ ofstream 文件写入是否使用缓冲区？](https://stackoverflow.com/questions/10449772/does-c-ofstream-file-writing-use-a-buffer)

# iphone - 使用 UITouches 移动 UIImageview

> ID：14498894
> 
> 赞同：0
> 
> 时间：2013-01-24T10:19:56.770
> 
> 标签：iphone, objective-c, uiview, subclass, uitouch

我对 uiview 进行了子类化，我在其中添加了两个 uiimageview，一个视图用于背景，另一个图像视图用于我想在触摸时移动的图像。我正在从视图控制器添加这个子类 uiview。以下是代码：

```
@interface CustomSlider : UIView
{
    UIImageView *bgView;
    UIImageView *customSliderImageView;
    float minStartPoint,maxEndPoint;
}
- (id)initWithFrame:(CGRect)frame inView:(UIView*)mainView;
@end

@implementation CustomSlider
- (id)initWithFrame:(CGRect)frame inView:(UIView*)mainView {
if((self = [super init])) {

    UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(15, 60, frame.size.width, frame.size.height)];
    contentView.backgroundColor = [UIColor clearColor];
    [mainView addSubview:contentView];

    bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"price_96.png"]];
    bgView.frame = CGRectMake(5, 0, frame.size.width - 10, 8 );
    [contentView addSubview:bgView];

    customSliderImageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"price_100.png"]];
    customSliderImageView.frame = CGRectMake(20, 0, 35, frame.size.height);

    [contentView addSubview:customSliderImageView];

    minStartPoint = 0;
    UIPanGestureRecognizer* pgr = [[UIPanGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(handlePan:)];
    [customSliderImageView addGestureRecognizer:pgr];
    [pgr release];

}
return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:23:30.363

```
AppDelegate Classes

**// .h File**

#import <UIKit/UIKit.h>

@class UITouchTutorialViewController;

@interface UITouchTutorialAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    UITouchTutorialViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITouchTutorialViewController *viewController;

@end

//////////////////////////////////////////////////////////////////////////////////

// .m File

#import "UITouchTutorialAppDelegate.h"
#import "UITouchTutorialViewController.h"

@implementation UITouchTutorialAppDelegate

@synthesize window;
@synthesize viewController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after app launch    
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

@end
//////////////////////////////////////////////////////////////////////////////

UIViewController Classes

// .h file

#import <UIKit/UIKit.h>

@interface UITouchTutorialViewController : UIViewController {
    IBOutlet UIImageView *cloud;
}

@end

// .m File

#import "UITouchTutorialViewController.h"

@implementation UITouchTutorialViewController

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    cloud.center = location;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesBegan:touches withEvent:event];
}

/*
// Override initWithNibName:bundle: to load the view using a nib file then perform additional customization that is not appropriate for viewDidLoad.
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    }
    return self;
}
*/

/*
// Implement loadView to create a view hierarchy programmatically.
- (void)loadView {
}
*/

/*
// Implement viewDidLoad to do additional setup after loading the view.
- (void)viewDidLoad {
    [super viewDidLoad];
}
*/

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

# xml - 使用 XSLT 拆分 DITA (CALS) 表 - 身份转换

> ID：14498895
> 
> 赞同：1
> 
> 时间：2013-01-24T10:19:55.957
> 
> 标签：xml, xslt, split, html-table, dita

我有一个基于 Framemaker 错误的主要问题，我试图为此构建一个解决方法。在一个文档中，我们有很多表，我必须按列拆分。这些表在元素中包含一个属性，可以用来识别它们。所以这就是我需要的：

输入：

```
<table attributes*>
  <tgroup attributes* outputclass="identifier">
    <colspec colnum="1" colname="1" attributes*/>
    <colspec colnum="2" colname="2" attributes*/>
    <tbody>
      <row attributes*>
        <entry colname="1">sometext</entry>
        <entry colname="2">moretext</entry>
      </row>
    </tbody>
  </tgroup>
</table> 
```

输出：

```
<table attributes*>
  <tgroup attributes* outputclass="identifier1">
    <colspec colnum="1" colname="1" attributes*/>
    <tbody>
      <row attributes*>
        <entry colname="1">sometext</entry>
      </row>
    </tbody>
  </tgroup>
</table>

<table attributes*>
  <tgroup attributes* outputclass="identifier2">
    <colspec colnum="1" colname="1" attributes*/>
    <tbody>
      <row attributes*>
        <entry colname="1">moretext</entry>
      </row>
    </tbody>
  </tgroup>
</table> 
```

我快要放弃了，因为到目前为止我所尝试的一切都没有成功:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:35:38.767

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="text()" />

  <xsl:template match="colspec">
    <xsl:apply-templates select="../.." mode="copyTable">
      <xsl:with-param name="colSpec" select="." />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="@* | node()" mode="copyTable">
    <xsl:param name="colSpec" />
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" mode="copyTable">
        <xsl:with-param name="colSpec" select="$colSpec" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="tgroup/@outputclass" mode="copyTable">
    <xsl:param name="colSpec" />
    <xsl:attribute name="{name()}">
      <xsl:value-of select="concat(., $colSpec/@colname)" />
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="colspec" mode="copyTable">
    <xsl:param name="colSpec" />
    <xsl:if test="generate-id() = generate-id($colSpec)">
      <xsl:copy>
        <xsl:apply-templates select="@*" mode="copyTable">
          <xsl:with-param name="colSpec" select="$colSpec" />
        </xsl:apply-templates>
      </xsl:copy>
    </xsl:if>
  </xsl:template>

  <xsl:template match="@colnum | @colname" mode="copyTable">
    <xsl:attribute name="{name()}">
      <xsl:text>1</xsl:text>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="row" mode="copyTable">
    <xsl:param name="colSpec" />
    <xsl:copy>
      <xsl:apply-templates select="@*" mode="copyTable"/>
      <xsl:apply-templates select="entry[@colname = $colSpec/@colname]" 
                           mode="copyTable"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

鉴于此输入：

```
<table a="1" b="2">
  <tgroup c="3" d="4" outputclass="identifier">
    <colspec colnum="1" colname="1" e="5" f="2"/>
    <colspec colnum="2" colname="2" e="2" f="1"/>
    <tbody>
      <row g="1" h="2">
        <entry colname="1">sometext</entry>
        <entry colname="2">moretext</entry>
      </row>
      <row g="1" h="2">
        <entry colname="1">somemoretext</entry>
        <entry colname="2">moremoretext</entry>
      </row>
    </tbody>
  </tgroup>
</table> 
```

产生这个输出：

```
<table a="1" b="2">
  <tgroup c="3" d="4" outputclass="identifier1">
    <colspec colnum="1" colname="1" e="5" f="2" />

    <tbody>
      <row g="1" h="2"><entry colname="1">sometext</entry></row>
      <row g="1" h="2"><entry colname="1">somemoretext</entry></row>
    </tbody>
  </tgroup>
</table>
<table a="1" b="2">
  <tgroup c="3" d="4" outputclass="identifier2">

    <colspec colnum="1" colname="1" e="2" f="1" />
    <tbody>
      <row g="1" h="2"><entry colname="1">moretext</entry></row>
      <row g="1" h="2"><entry colname="1">moremoretext</entry></row>
    </tbody>
  </tgroup>
</table> 
```

实际上，它不是有效的 XML（因为它有多个根），但我相信它符合您的要求。

# javascript - 允许使用 AjAx 和 post 方法向 servlet 发送数据

> ID：14498897
> 
> 赞同：0
> 
> 时间：2013-01-24T10:19:57.207
> 
> 标签：javascript, jquery, ajax

```
function validate (user_value){
    var name = user_value;
    $.ajax({
        url:"ggs.erm.servlet.setup5.AjaxS",
        data:{ namee :name},
        success:function(){
            alert("worked");
        }
    });
} 
```

这是我的代码。是不是有什么问题？？任何类型的语法或语义错误。
**问题：**无法在 URL 中向 servlet 发送参数。？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:21:54.363

If you want your servlet's `doPost` method to handle the request you should add property `type` with value `post`.

```
function validate (user_value){
    var name = user_value;
    $.ajax({
        url:"ggs.erm.servlet.setup5.AjaxS",
        data:{ namee :name},
        type: 'post',
        success:function(){
            alert("worked");
        }
    });
} 
```

This way your Ajax request will be post instead of get (the default one).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:39:04.333

看来您的函数在`doc ready`处理程序中检查一下，看看是否有帮助：

```
 function validate (user_value){
    var name = user_value;
    $.ajax({
       url:"ggs.erm.servlet.setup5.AjaxS",
       type:'POST', //<-----------------added this
       data:{ namee :name},
       success:function(data){
         if(data){
          alert("worked");
         }
       },
       error:function(){
         alert('not worked.');
       } 
    });
}

$(document).ready(function(){
   // your other code stuff for calling the function
}); 
```

# java - 单词的字母

> ID：14498898
> 
> 赞同：-5
> 
> 时间：2013-01-24T10:20:00.167
> 
> 标签：java, string

我有大字符串数组，每个索引都有一个字母。我需要从这个数组中召回并将所有这些字母组合成一个单词/字符串。我将如何在java中做到这一点？

```
String[] letters;
int lettersToRecall =16;
String word;
for(int i=0; i<lettersToRecall; i++){
//accumm letters into String Word..
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:29:08.467

这个最直接的方法是将所有字符串加在一起：

```
String word = "";
for(int i = 0; i < lettersToRecall; i++){
    word += letters[i];
} 
```

这种方法（简单地添加`String`对象）会浪费大量`String`实例，因为每次添加都会产生一个新实例。

因此，如果您担心资源使用情况，您可以[`StringBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)改用：

```
StringBuilder builder = new StringBuilder();
for(int i = 0; i < lettersToRecall; i++){
    builder.append(letters[i]);
}
String word = builder.toString(); 
```

有关更多信息，请检查[何时在 java 中使用 StringBuilder](https://stackoverflow.com/questions/4645020/when-to-use-stringbuilder-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:48:20.013

```
String letters="your string here";
String result="";
for(int i=0;i<letters.length();i++)
{
    if((letters.charAt(i)>=65&&letters.charAt(i)<=90)||(letters.charAt(i)>=97&&letters.charAt(i)<=122))
    result+=letters.charAt(i);

}
System.out.println("result"+result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:25:31.510

```
 public class Main {

    public static void main(String[] args) {
        String[] letters = new String[3];
        letters[0] = "a";
        letters[1] = "b";
        letters[2] = "c";
        StringBuilder word = new StringBuilder();
        for (int i = 0; i < letters.length; i++) {
            word.append(letters[i]);
        }
        System.out.println(word);        
    }
} 
```

我找到了另一种方法，这个怎么样？

```
System.out.println(Arrays.toString(letters).replaceAll(",|\\s|\\]$|^\\[", "")); 
```

请注意，仅在您没有`space`或`,`在您的字符串中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:32:18.107

您可以使用 Commons-lang.jar 来完成此任务。示例代码：

```
word = StringUtils.join(letters); 
```

如果你想自己写。试试下面：

```
public String join(String[] letters){
    StringBuffer buffer = new StringBuffer();
    for(int idx=0;idx <letters.length;idx++){
        buffer.append(letters[idx]);
    }
    return buffer.toString();
} 
```

# android - 如何在 Canvas 上设置文本方向

> ID：14498899
> 
> 赞同：0
> 
> 时间：2013-01-24T10:20:02.463
> 
> 标签：android, android-canvas, android-view

如何在 Canvas 上设置文本方向（旋转）。以垂直为例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:22:45.500

您可以使用该[`rotate()`](http://developer.android.com/reference/android/graphics/Canvas.html#rotate%28float,%20float,%20float%29)方法来指定接下来要绘制的元素的旋转。

附加说明：请务必阅读[`Canvas`文档](http://developer.android.com/reference/android/graphics/Canvas.html)的其余部分，因为它有很多方法来操作它（假设您在某个阶段需要的不仅仅是旋转文本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:29:19.290

这是一个简单的垂直文本实现和旋转。

```
public class VerticalTextView extends TextView{
final boolean topDown;

 public VerticalTextView(Context context, AttributeSet attrs){
  super(context, attrs);
  final int gravity = getGravity();
  if(Gravity.isVertical(gravity) && (gravity&Gravity.VERTICAL_GRAVITY_MASK) == Gravity.BOTTOM) {
     setGravity((gravity&Gravity.HORIZONTAL_GRAVITY_MASK) | Gravity.TOP);
     topDown = false;
  }else
     topDown = true;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
  super.onMeasure(heightMeasureSpec, widthMeasureSpec);
  setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
}

@Override
protected void onDraw(Canvas canvas){
  TextPaint textPaint = getPaint(); 
  textPaint.setColor(getCurrentTextColor());
  textPaint.drawableState = getDrawableState();

  canvas.save();

  if(topDown){
     canvas.translate(getWidth(), 0);
     canvas.rotate(90);
  }else {
     canvas.translate(0, getHeight());
     canvas.rotate(-90);
  }

  canvas.translate(getCompoundPaddingLeft(), getExtendedPaddingTop());

  getLayout().draw(canvas);
  canvas.restore();
}
} 
```

默认情况下，旋转的文本是从上到下的。如果你设置

```
android:gravity="bottom" 
```

然后从下到上绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:26:29.557

最简单的方法是：

```
@Override
public void draw(Canvas canvas) {
    super.draw(canvas);
    canvas.rotate(90, x, y);
    canvas.drawText("text", x, y, textPaint);
} 
```

# c - 使用 fgets 在 C 中找到特定标记后读取文件的部分内容

> ID：14498905
> 
> 赞同：0
> 
> 时间：2013-01-24T10:20:08.047
> 
> 标签：c, file, fgets

我想要一些关于如何读取类似“XML”的文件的建议，这样程序只会读取/存储在满足某些要求的节点中观察到的元素。我正在考虑通过以下方式使用两个 fget：

```
while (fgets(file_buffer,line_buffer,fp) != NULL)
 {
   if (p_str = (char*) strstr(file_buffer,"<element of interest opening")) )
    {
      //new fgets that starts at fp and runs only until the end of the node
       {
         //read and process
       }
    }
 } 
```

这有意义还是有更聪明的方法来做到这一点？

其次（在我的想法中），我是否必须定义一个新的 FILE*（如 fr），在第二个 fgets 开始时将 fr 设置为 fp，或者我可以为此滥用原始文件指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:28:09.880

使用 XML 解析器，如 Xmllib2 [http://xmlsoft.org/xml.html](http://xmlsoft.org/xml.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:27:14.867

你的方法似乎对这份工作还不错。

您可以从文件中读取整行，然后使用 sprintf、strstr 或任何您喜欢的函数对其进行处理。这将节省您使用 FILE I/O 的时间和不必要的开销。

根据您的第二个想法，您可以使用`fseek()`(Refer: `man fseek`) 或`rewind()`(Refer: `man rewind`) 使用相同的文件指针`fp`。您不需要额外的文件指针。

编辑：

如果您可以更改标签格式以符合 XML 结构，您将能够正确使用 libXML2 和此类库。

如果这不可能，那么您必须编写自己的解析器。几点建议：

1.  首先将文件中的数据提取到缓冲区中。缓冲区的大小以及是动态分配还是静态分配，取决于您的规范。

2.  如果非空白字符是非空白字符`<`或您的标签通常以任何字符开头，则在缓冲区中搜索。如果没有，您可以只显示错误并退出。

3.  现在跟随标签名称，直到第一个空格，或 / 或 > 字符。存储它们。根据需要处理 =、字符串和其他内容。

4.  如果下一个非空白字符是 /，请检查它后面是否跟着 >（或您的规范中的类似模式以查找标签是否结束）。如果是这样，您已完成解析并可以返回结果。否则，您的标签格式错误，应该退出并出现错误。

    如果字符是 >，那么您已经找到了开始标签的结尾。现在跟随内容。否则接下来是一个论点。解析，存储结果，继续第 4 步。

5.  阅读内容，直到找到 < 字符。

6.  如果该字符后跟 /，则它是结束标记。检查其后跟标签名称和 >。如果是，则返回结果，否则，抛出错误。

7.  如果您到了这里，就会发现嵌套 XML 的开头。用这个算法解析它，然后再次在 4 处继续。

虽然，这是一个非常基本的想法，但我希望它可以帮助你开始。

编辑：如果您仍想将文件作为指针引用，请考虑使用`mmap()`.

如果您添加`mmap`一些`shared memory`IPC 和足够的内存锁定内容，您可以编写一个并行处理程序，这将更快地处理您的大部分文件。

# javascript - 使用表单 url 从 javascript 提交表单

> ID：14498911
> 
> 赞同：0
> 
> 时间：2013-01-24T10:20:27.377
> 
> 标签：javascript, jquery, django

我有一个按钮。我有一个叫做芹菜任务的表格。表单有 url，smth like

```
http://example.com/export/?user=user123&timedelta=10 
```

我需要从确认对话框提交此表格。
它应该如何工作... 在用户配置文件中，管理员按下一个按钮，出现 javascript 确认，管理员单击确定，并且应该提交来自该 url 的表单。我对 javascript 和前端编程很陌生。我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:22:13.270

使用 jQuery 提交（）

```
$('#yourFormID').submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:23:26.570

试试这个

```
 var r=confirm("Press a button");
        if (r==true)
          {

//Form is on another page so
window.location="your_url_withquerystring"
          }
        else
          {

          } 
```

# c++ - Word correction library for c++

> ID：14498913
> 
> 赞同：0
> 
> 时间：2013-01-24T10:20:34.990
> 
> 标签：c++, word, ocr

Are there any open-source word correction for c++? I would like to integrate with my c++ program to fix when OCR read some characters wrongly at some positions of the whole word. For example if the OCR output is "Recoqnitl0n" the program will correct it and convert to "Recognition".

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:29:25.247

是的，有一些开源拼写检查器。尝试：

[洪斯佩尔](http://hunspell.sourceforge.net)

或者

[拼写](http://aspell.net)

# php - Autoload Classmap in Laravel 4

> ID：14498914
> 
> 赞同：0
> 
> 时间：2013-01-24T10:20:35.660
> 
> 标签：php, laravel, laravel-4, autoloader

I have a:

```
// administration
app/controller/admin/ProjectsController.php 
```

And I want use too:

```
// public in website
app/controller/ProjectsController.php 
```

But, in autoload_classmap.php, it's registred like that:

```
'ProjectsController' => 'app/controller/admin/ProjectsController' 
```

So, If I want one more 'ProjectsController' for public views, how I need to do?
What is better? 2 controllers (admin and public), or one (hybrid).

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:24:32.407

您应该命名您的管理控制器。

这样它就会匹配 PSR 并且自动加载器会以不同的方式对待它们。

`namespace Admin;`

在您的管理文件的顶部。

**编辑：**

甚至可能值得为所有控制器和模型命名空间。

所以你可以`ProjectController`把`app\controllers`

`namespace ProjectName`

然后对于子文件夹中的所有内容，例如`app\controllers\admin`

`namespace ProjectName\Admin`

对于其他文件夹和文件，依此类推。

这将减少您的代码与其他任何内容发生冲突的可能性。

**编辑：编辑：**

在命名空间类之后，您需要引用命名空间之外的类和函数。例如，Controller 属于全局命名空间，因此您将 \ 放在 Controller 的开头。

这里的文档应该有很大帮助。[PHP 命名空间](http://php.net/manual/en/language.namespaces.rationale.php)

# sql-server-2005 - SQL Server 2005 upgrade to 2008 R2 Standard

> ID：14498916
> 
> 赞同：0
> 
> 时间：2013-01-24T10:20:42.650
> 
> 标签：sql-server-2005, sql-server-2008-r2

I have been using SQL Server 2005 Standard and I want to upgrade it to 2008 R2 Standard.

My question is if there may be a problem when I install the 2008 R2 version on top of the existing SQL Server 2005 Standard installation?

Best Regards
Salih Hanifeoglu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:34:50.477

Microsoft 针对这种情况提供了 Microsoft® SQL Server® 2008 R2 Upgrade Advisor 实用程序。

根据 Micorsoft 的描述：“升级顾问会识别可能影响升级的功能和配置更改，并提供指向描述每个已识别问题以及如何解决问题的文档的链接。”

下载地址：http: [//www.microsoft.com/en-us/download/details.aspx?id=16978](http://www.microsoft.com/en-us/download/details.aspx?id=16978)

# php - html and php code spacing

> ID：14498922
> 
> 赞同：1
> 
> 时间：2013-01-24T10:20:54.803
> 
> 标签：php, html, htmltidy

is there any proper application, tools or other way to clean-up a codes which messed with blocking-space.

i have this experience with my fellow developer after she save the document (html & php) then synchronize to my end, it was messy with horrible block-spacing something like this in my link.

```
<?php some code here

and code/tags here,

and additional content lines here...

closing

?> 
```

[JSFiddle Link](http://jsfiddle.net/imarkdesigns/DJwJe/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:40:27.413

你在寻找这样的东西吗？

网址： [http ://beta.phpformatter.com/](http://beta.phpformatter.com/)

尾声： http: [//www.chipwreck.de/blog/software/coda-php/](http://www.chipwreck.de/blog/software/coda-php/)

# python - Any Workflow frameworks for Django/Python with active development?

> ID：14498926
> 
> 赞同：3
> 
> 时间：2013-01-24T10:21:03.023
> 
> 标签：python, django, workflow

Tried searching. But, what ever Django/Python packages I find, have no development going on.

Including the featured [GoFlow : a workflow engine for django](http://code.google.com/p/goflow/downloads/list). The latest update on this was in sept 2008!

So, are there any Workflow frameworks for Django/Python with active development?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:36:47.373

请参阅 django 包：

*   [工作流程](http://www.djangopackages.com/grids/g/workflow/)
*   [FSM](http://www.djangopackages.com/grids/g/finite_state_machine/)也可能对您有用

# php - PHP cURL doesn't work with - in subdomains

> ID：14498928
> 
> 赞同：3
> 
> 时间：2013-01-24T10:21:11.913
> 
> 标签：php, curl

I have a PHP script that I'm trying to get the contents of a page. The code im using is below

```
$url = "http://test.tumblr.com";

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$txt = curl_exec($ch);
curl_close($ch);

echo "$txt"; 
```

It works fine for me as it is now. The problem I'm having is, if I change the string URL to

`$url = "http://-test.tumblr.com";` or `$url = "http://test-.tumblr.com";`

It will not work. I understand that -test.example.com or test-.example.com is not a valid hostnames but with Tumblr they do exists. Is there a work around for this?

I even tried creating a header redirect on another php file so cURL would be first getting a valid hostname but works the same way.

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:29:30.603

## 带连字符的域名

正如您在上一个关于[subdomain 中允许的字符的](https://stackoverflow.com/a/7111947/823963)问题中看到的那样，`-`它不是开始或结束子域的有效字符。所以这实际上是正确的行为。前段时间在`curl` [邮件列表](http://curl.haxx.se/mail/archive-2007-06/0069.html)中报告了同样的问题，但由于`curl`遵循标准，他们的网站实际上没有什么可以改变的。

很可能 tumblr 知道这一点，因此提供了一些指向同一站点的替代地址。

## 可能的解决方法

但是，您可以尝试使用`nslookup`手动查找 IP，然后将您的请求直接发送到该 IP（并手动将主机名设置为正确的值）。我没有尝试过，但它似乎`nslookup`能够解析以连字符开头或结尾的*格式*错误的域名。

## 卷曲

此外，您应该知道，php`curl`函数应该是 `curl`命令行工具的直接接口，因此，如果您遇到特殊行为，很可能是由于`curl`命令行工具中的逻辑而不是 php 函数。

# c# - Fill PDF Form with Itextsharp

> ID：14498931
> 
> 赞同：7
> 
> 时间：2013-01-24T10:21:32.570
> 
> 标签：c#, forms, pdf, itextsharp, fill

I am trying to fill up a form with ITextsharp, and trying out the following code to get all the fields in the pdf:

```
 string pdfTemplate = @"c:\Temp\questionnaire.pdf";

            PdfReader pdfReader = new PdfReader(pdfTemplate);

            StringBuilder sb = new StringBuilder();
            foreach (var de in pdfReader.AcroFields.Fields)
            {
                sb.Append(de.Key.ToString() + Environment.NewLine);
            } 
```

But the foreach loop is always null count. Do I need to do something to file itself as I have tried the example from [here](http://www.codeproject.com/Articles/23112/Fill-in-PDF-Form-Fields-using-the-Open-Source-iTex) and it works fine... [this is an example of pdf I am trying to fill](http://www.santander.co.uk/csgs/StaticBS?blobcol=urldata&blobheader=application/pdf&blobkey=id&blobtable=MungoBlobs&blobwhere=1223428158554&cachecontrol=immediate&ssbinary=true&maxage=3600)

any ideas?

Edit ::

![Null Error on PDF Fields](../Images/9a19cc98f6950c8b8f6a77181a75f85d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:25:58.070

try:

```
using (FileStream outFile = new FileStream("result.pdf", FileMode.Create)) {
    PdfReader pdfReader = new PdfReader("file.pdf");
    PdfStamper pdfStamper = new PdfStamper(pdfReader, outFile);
    AcroFields fields = pdfStamper.AcroFields;
    //rest of the code here
    //fields.SetField("n°1", "value");
    //...
    pdfStamper.Close();
    pdfReader.Close();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T12:03:35.537

As it turned out, the PDF "form" to fill in actually wasn't a form (in PDF terms) at all. Thus, your have two choices:

1.  You add the text to the page contents directly using hardcoded or configured "field" positions and dimensions as described by @tschmit007 in comments to his answer.

2.  You add actual PDF form fields to your PDF to generate a true PDF form which you take as template to fill in later.

You can add actual form fields either using some graphical tool allowing that, e.g. Adobe Acrobat, or you can use iText(Sharp). Have a look at chapter 8 of [iText in Action — 2nd Edition](http://itextpdf.com/book/) and the samples available [here for Java](http://itextpdf.com/book/chapter.php?id=8) and [here for .Net](http://kuujinbo.info/iTextInAction2Ed/index.aspx).

Those samples mostly add form fields to newly generated PDF documents. You can virtually use the same code, though, for adding form fields to a PdfStamper which exposes its inner PdfWriter using `stamper.getWriter()` in Java and the `stamper.Writer` in C#. Instead of `writer.addAnnotation(field)` you have to use `stamper.addAnnotation(field, page)`, though.

# asp.net - 实体框架：如何使用 Fluent API 实现共享主键？

> ID：14498934
> 
> 赞同：3
> 
> 时间：2013-01-24T10:21:38.027
> 
> 标签：asp.net, asp.net-mvc, entity-framework, data-annotations

我有两张桌子，想在另一张桌子上使用其中一张的 PK 作为 PK。

这是我的数据注释实现：

```
public class User
{
    public System.Guid UserId { get; set; }
    public string UserName { get; set; }
}

public class Student
{
    [Key, ForeignKey("User")]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public System.Guid StudentId { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    // shared primary key 
    public virtual User User { get; set; }
} 
```

这里`Student`表使用`User`的主键。

**如何使用 Fluent API 实现这一点？**

（作为第二个问题，如果我从`Student`表中删除一个值，会发生级联删除吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:00:34.580

> 如何使用 Fluent API 实现这一点？

```
modelBuilder.Entity<Student>()
    .HasRequired(s => s.User)
    .WithOptional(); 
```

> 如果我从学生表中删除一个值，将进行级联删除。

不，因为`Student`是关系中的依赖项（它带有外键）而不是主体（即`User`）。仅当您删除主体时，级联删除才有效。对于一对一的关系，您必须手动启用它：

```
modelBuilder.Entity<Student>()
    .HasRequired(s => s.User)
    .WithOptional()
    .WillCascadeOnDelete(true); 
```

现在，如果 a`User`被删除，相关的`Student`（如果有的话）也将被删除。

# windows - 使用工具显示所有当前冲突

> ID：14498943
> 
> 赞同：0
> 
> 时间：2013-01-24T10:21:56.203
> 
> 标签：windows, svn, tortoisesvn, merge-conflict-resolution

使用颠覆合并两个分支时，我有时会遇到冲突。

这不是一个真正的问题，因为我只需要查看实际代码并一个接一个地解决它们。

但是我通常不想在合并过程中解决它们，因为乌龟希望我在之后解决它们。

问题是我们的代码库非常庞大，并且刷新图标需要很多时间，这使得快速追踪冲突非常困难。

那么在存储库中列出所有当前冲突的最佳/最简单的方法是什么？

欢迎任何想法，只要解决方案有效，我也可以使用其他工具或命令行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:31:52.093

`svn status`将帮助您查看延迟的合并冲突（这也阻止了提交的可能性）

提取自`svn help status`

```
 The first seven columns in the output are each one character wide:
    First column: Says if item was added, deleted, or otherwise changed
...
      'C' Conflicted
    Second column: Modifications of a file's or directory's properties
...
      'C' Conflicted
    Seventh column: Whether the item is the victim of a tree conflict
...
      'C' tree-Conflicted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:20:49.850

好的，这是我发现的：

在任何你知道有冲突的 repo 中，你可以使用右键单击-> Tortoise SVN->Resolved。

这将列出 repo 中的所有冲突，也以递归方式获取所有子文件夹。

找到一个对你来说足够大的目标，然后解决你的冲突，直到列表为空。你甚至可以直接在窗口内解决它们，如果你想更快。

组解析也适用于同一文件夹中具有相同类型冲突的元素。

希望这可以帮助某人:)

# php - remove all kind of tags from text

> ID：14498946
> 
> 赞同：0
> 
> 时间：2013-01-24T10:22:07.593
> 
> 标签：php, regex

I am working on a project and I am facing a problem that "span>" also prints in the start of text I tried to remove all the tags every thing gone finely except the one i mentioned above,

here is my php code

```
 <p>
        <?php
         $desc = $top_news['headline_des'];
         $aa = preg_replace( '/style=(["\'])[^\1]*?\1/i', '', $desc, 2 );
             if(strlen($top_news['headline_des'])>100)
                {
                $description = substr($aa, 1 ,850)."...";

                    }else{
                    $description = $aa;
                     }

                  echo strip_tags($description);
        ?>
    </p> 
```

here is the output

span >IPOR have the International Republican Institute (IRI) and the United States Agency for International....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:56:43.160

问题是`substr($aa, 1 ,850)`通话。`substr`从位置 0 开始，而不是 1，所以会发生这样的事情：

```
Input: <span>Foobar</span>
substr($input, 1, 850)
Output: span>Foobar</span> 
```

`substr`愉快地切断第一个字符。因此，`strip_tags`不会将其识别`span>`为一个完整的标签，而只是将其单独放置。

*修复：*使用`substr($aa, 0, 850)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:22:58.153

```
$intro = ereg_replace("[</*>]", "", $intro);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:23:36.763

**您只能**使用[strip_tags](http://php.net/manual/en/function.strip-tags.php) 来删除标签

 **使用**preg_replace**

```
$desc = $top_news['headline_des'];
$search = array(
'@<style[^>]*?>.*?</style>@siU',
'@<[\/\!]*?[^<>]*?>@si'            
);

echo $pregReplacedContent = preg_replace($search, "", $aa); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:34:39.827

```
 $text = preg_replace("/<.+?>/", "", $text); 
```

像这样的东西应该删除变量中的任何标签`$text`。

如果它不起作用，您应该检查要从中删除标签的初始文本是否格式正确。例如 a`span >`不会被删除，因为它不是标签，但 a`<span >`会被删除而没有问题。**

# redirect - Redirect Page According to User Group

> ID：14498947
> 
> 赞同：0
> 
> 时间：2013-01-24T10:22:08.437
> 
> 标签：redirect, sharepoint-2010

I have an idea where when an Icon is click on my SharePoint site it will redirect people to a page which is linked with their user group. Issue is i do not know how to do this. I have found a web application which does this but it seems it doesn't want to work.

Any other solutions, Also if code could you please provide and example of the code so i know what to do :) Thanks

> Update

```
<style type="text/css"> .redirect {     TEXT-ALIGN: center;
 PADDING-BOTTOM: 100px; PADDING-LEFT: 300px; PADDING-RIGHT: 300px;
 FONT-WEIGHT: 900; PADDING-TOP: 100px }</style><script
 type="text/javascript">

 var
URL="URL HERE",timer=0,current="none",popup="",msg="",img="";
if (popup) alert(popup); 
var d=new
 Date(),a=document.getElementById("aspnetForm"),b=document.getElementsByTagName("body")[0],c=document.createElement("div"),i=document.createElement("img"),t=document.createElement("div");
a.style.display=current;c.className="redirect";i.src=img;c.appendChild(i);c.appendChild(t);b.insertBefore(c,a);
 function wait(){var tleft=Math.round(timer-(new
Date())/1000+d/1000);if (tleft>0) {t.innerHTML="<p>"+msg+"</p><p>Wait
for "+tleft+" second(s) or <a href='"+URL+"'>click here</a> to be
redirected.</p>";setTimeout("wait()",1000);}else
{t.innerHTML="<p>Redirecting</p>";window.location.href=URL;}}
wait();</script> 
```

The above code works in a Content Editor webpart as it redirects all users to the page, but is there a way which i could use this code to say if(user.group ="Spain") then redirect?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:34:18.697

实现这一目标的小例子

```
public bool IsUserInGroup(SPWeb web, SPUser user, string groupName)
{
    try
    {
        SPGroup group = web.Groups[groupName];    
        return IsUserInGroup(user, group);
    }   
    catch
    {
        return false;
    }

}

public bool IsUserInGroup(SPUser user, SPGroup group)
{
    return user.Groups.Cast<SPGroup>().Any(g => g.ID == group.ID);
}

//Redirect for example:
SPUser user = web.CurrentUser;
bool isInGroup = IsUserInGroup(web, user, "My Custom group");
if(isInGroup)
{
    Response.Redirect("some url");
} 
```

希望它会有所帮助

# google-api - Google Drive API: Error on OAuth2 token

> ID：14498949
> 
> 赞同：1
> 
> 时间：2013-01-24T10:22:11.367
> 
> 标签：google-api, google-drive-api, google-authentication, google-api-php-client

I would like to create a webapp that use Google Drive as a storage and I'm playing with the Google API but I have a problem with the authentication. I have choose the Service account as a authentication method but when I try to run the script I got this error:

> An error occurred: Error refreshing the OAuth2 token, message: '{ "error" : "invalid_grant" }'Array ( )

The code is the following:

```
<?php
require_once 'api/Google_Client.php';
require_once 'api/contrib/Google_DriveService.php';
require_once "api/contrib/Google_Oauth2Service.php";
session_start();

$service = buildService();

$fileList = retrieveAllFiles($service);
print_r($fileList);

/**
 * Build and returns a Drive service object authorized with the service accounts.
 *
 * @return Google_DriveService service object.
 */
function buildService($userEmail) {

  $DRIVE_SCOPE = 'https://www.googleapis.com/auth/drive';
  $SERVICE_ACCOUNT_EMAIL = 'xxxapps.googleusercontent.com';
  $SERVICE_ACCOUNT_PKCS12_FILE_PATH = 'xxx-privatekey.p12';

  $key = file_get_contents($SERVICE_ACCOUNT_PKCS12_FILE_PATH);
  $auth = new Google_AssertionCredentials(
      $SERVICE_ACCOUNT_EMAIL,
      array($DRIVE_SCOPE),
      $key);
  $auth->prn = $SERVICE_ACCOUNT_EMAIL;

  $client = new Google_Client();
  $client->setUseObjects(true);
  $client->setAssertionCredentials($auth);
  return new Google_DriveService($client);
}

/**
 * Retrieve a list of File resources.
 *
 * @param Google_DriveService $service Drive API service instance.
 * @return Array List of Google_DriveFile resources.
 */
function retrieveAllFiles($service) {
  $result = array();
  $pageToken = NULL;

  do {
    try {
      $parameters = array();
      if ($pageToken) {
        $parameters['pageToken'] = $pageToken;
      }
      $files = $service->files->listFiles($parameters);

      $result = array_merge($result, $files->getItems());
      $pageToken = $files->getNextPageToken();
    } catch (Exception $e) {
      print "An error occurred: " . $e->getMessage();
      $pageToken = NULL;
    }
  } while ($pageToken);
  return $result;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:42:53.610

Did you remember to [delegate domain-wide authority to your service account's client ID](https://developers.google.com/drive/delegation#delegate_domain-wide_authority_to_your_service_account)?

# java - The terminal gets closed when starting rmiregistry & in Ubuntu 10.04

> ID：14498953
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:22:20.333
> 
> 标签：java, ubuntu, rmiregistry

The terminal get closed when I type 'rmiregistry &' then Enter in Ubuntu 10.04\. I did not get any error, the terminal is closed the moment I pressed rmiregistry & + Enter. Please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:28:45.493

看看下面的链接可能对你有帮助：

1.  [RMI 运行](http://docs.oracle.com/javase/tutorial/rmi/running.html)

Solaris OS 或 Linux 使用：

```
rmiregistry & 
```

# php - Facebook Chat Open Graph 图像代码解析

> ID：14498956
> 
> 赞同：1
> 
> 时间：2013-01-24T10:22:30.373
> 
> 标签：php, facebook-graph-api, facebook-chat

所以我在这里为 PHP 编写了这个脚本，因为我在任何地方都找不到它。这样做是获取 facebook 的缩略图图像代码并显示它。我的问题是在显示这些图像之前测试它们是否真的存在，因为 Facebook 默认使用问号图像，我无法测试断开的链接。如果我引用的问号图像不存在，我将如何唯一识别 Facebook 返回的问号图像？

```
//define our test subject
$testvar = "[[490550790968952]][[490550800968951]][[490550807635617]]  
[[490550820968949]][[490550837635614]][[490550847635613]]  
[[490550857635612]][[490550867635611]][[490550877635610]]  
[[490550884302276]][[490550894302275]][[490550900968941]]  
[[490550914302273]][[490550924302272]][[490550937635604]]  
[[490550947635603]][[490550954302269]][[490550967635601]]";

//this one is a broken link and generates the question mark, remove this line to test the above code
$testvar = "[[171108522930776]]";

//convert new lines to <br>
$testvar = nl2br($testvar);

//replace all numbers with links
$numfilter = "/([0-9]){1,}/"; //match all number blocks without brackets
$testvar = preg_replace($numfilter, "<img src='https://graph.facebook.com/\\0/picture'>", $testvar);

//strip the brackets
$stripbrackets = array("[[","]]");
$testvar = str_replace($stripbrackets,"",$testvar);

//echo a div with the output, setting font-size:0 so the <br> tags don't create vertical spacing between new lines
echo "<div style='font-size:0px; line-height:0px;'>";
echo $testvar;
echo "</div>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:27:15.523

`is_silhouette`如果您没有收到重定向，Facebook 会返回一个字段。看看这个结果：[https ://graph.facebook.com?fields=name,picture&ids=490550790968952,171108522930776](https://graph.facebook.com?fields=name,picture&ids=490550790968952,171108522930776)

如果您使用 cURL 将它输入 PHP，那么`json_decode()`这个结果，您将能够遍历它并测试每个 id 以查看它是否是 Facebook 的未定义图像之一。

# dicom - 顺序空间相关图像集的参考 UID 的 dicom 标签帧

> ID：14498957
> 
> 赞同：3
> 
> 时间：2013-01-24T10:22:34.440
> 
> 标签：dicom, uid

通常，只有当它们具有相同的参考帧 UID（dicom 标记 0020,0052）时，您才能将顺序图像集（例如小腿的两个部分）彼此建立空间关系。但是，两个不同图像集的参考帧 UID 的差异是否仍然具有空间可比性？例如，是否会因为以下原因而产生差异？- 不同的图像平面（轴向与矢状图像）？- 失真校正是或否？- 图像类型的失真校正类型（2D 图像的 ea2D 失真校正或 3D 图像的 2D 失真校正）？

参考框架中的单独数字 UID 号有什么意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:58:43.157

你在这里问了几个问题。我会回答其中之一。“参考UID号框架中的单独数字有什么意义吗？”

不可以。虽然日期和时间等可识别数据通常被合并为 UID 的一部分，但如何生成 UID 的详细信息完全由实施者自行决定，并且可能会随心所欲地更改。UID 中的数字永远不应被解释为有意义。DICOM 标准只要求 UID 是全局唯一的，符合指定的最大长度约束，并遵循指定的数字和点格式。

# android - getContentResolver().query android where 子句

> ID：14498958
> 
> 赞同：1
> 
> 时间：2013-01-24T10:22:39.680
> 
> 标签：android, sqlite, cursor

我的查询是关于从数据库中获取数据的函数参数的创建。

我希望光标只返回特定的行而不是完整的记录集。

```
c= getContentResolver().query(uri, null, "column1=? \"mysearch\" or column2=? "\mysearch"\", null, "date DESC"); 
```

我想得到**column1 like "mysearch" 或 column2 like "mysearch"**的结果。

在上面的示例中，我尝试了一些硬编码值。

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:11:05.853

经过一些解决方法后得到它。

正确的查询将是

```
String searchQuery = "column1 like '%" + searchKey
                + "%' or column2 like '%" + searchKey + "%'";

        c = getContentResolver().query(uri, null, searchQuery, null,
                "date DESC"); 
```

谢谢，

尼拉夫

# c# - IAwaitable.OnCompleted 提供的延续委托的目标

> ID：14498961
> 
> 赞同：0
> 
> 时间：2013-01-24T10:22:51.070
> 
> 标签：c#, async-await

我有如下设置：

```
class mytype
{
   Awaiter GetAwaiter() { ... }
}

class Awaiter : INotifyCompletion
{
  bool IsCompleted { get { return false; } }
  void GetResult () { }

  void OnCompleted(Action continuation)
  {
    //that's the continuation in focus
  }
}

//somewhere else:
async Task MyMethod()
{
  //here instructions for 1st state 
  await new mytype();
  //here instructions for 2nd state 
  await new mytype();
  //here instructions for 3rd state 
} 
```

我是不是弄错了，或者我从 CLR 获得的委托（在同一个方法中）总是或多或少是同一个委托，但我正在等待的实例是不同的？由于 async 关键字，C# 编译器将 MyMethod 转换为具有 3 个状态的 FSM。每次我在 C# 中等待该方法中的某些内容时，都会在内部调用 FSM 的 MoveNext 方法。但是 FSM 自己跟踪状态，因此它知道它所处的最后一个状态，因此它可以进入下一个状态（并执行与新状态相关的指令）。

因此，基本上我理解，内部名为*continuation*的委托的调用归结为适当 FSM 类型的 MoveNext 方法的调用。似乎没有什么大魔法——还是我弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:46:59.903

是的，你的理解是对的。“大魔法”发生在编译器必须重写`MyMethod()`到状态机时，而不是在运行时。

有关状态机的外观及其工作原理的更多信息，请阅读 Jon Skeet 的文章从他的 Eduasync 系列中[*的简单异步方法生成的代码。*](http://msmvps.com/blogs/jon_skeet/archive/2011/05/20/eduasync-part-7-generated-code-from-a-simple-async-method.aspx)那篇文章描述了由其中一个 Async CTP 生成的代码，后续文章介绍了此后[*的更改：Async CTP 和 Visual Studio 11 预览*](http://msmvps.com/blogs/jon_skeet/archive/2012/01/12/eduasync-part-18-changes-between-the-async-ctp-and-the-visual-studio-11-preview.aspx)版之间的[*更改以及 VS11 预览版和 Visual Studio 11 Beta 之间的更改*](http://msmvps.com/blogs/jon_skeet/archive/2012/03/06/eduasync-20-changes-between-the-vs11-preview-and-the-visual-studio-11-beta.aspx)。

# c# - .NET 上使用两个列表的重复内存

> ID：14498965
> 
> 赞同：5
> 
> 时间：2013-01-24T10:22:58.473
> 
> 标签：c#, .net, sortedlist

我正在.NET上开发一个小应用程序，我需要用2个不同的列表指向相同的数据，我想知道内存是否重复，例如

```
public class Person
{
    public string name;
    public int age;

    ....
    public Person(name, age)
    {
        this.name = name;
        this.age = age;
    }
}

SortedList<string> names;
SortedList<int> ages;

Person person1 = new Person("juan",23);

names.add("juan",person1);
ages.add(23,person1); 
```

我猜 .NET 作为 Java 不会复制对象 Person，所以它会被保留，所以如果我这样做：

```
names("juan").age = 24 
```

将更改两个列表中的对象。

这样对吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:29:58.040

因为`Person`是一个类，所以您只是将*引用*放入列表中，因此每个列表都会引用*同一个人*。该`Person`对象确实不会被复制，`names["juan"]`并将取消引用原始对象。

然而！这并不能使代码完美无缺：

*   可能有超过一名 23 岁的人；`SortedList<,>`不会喜欢的
*   更改年龄`names["juan"]`不会自动更新`ages`；`ages[24]`将失败

如果`Person`是 a `struct`，那么每次分配它时`Person` **都会**`struct`复制 （但是：这不是 a 的好候选；不要那样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:31:49.087

要测试引用相等性，您始终可以执行以下操作：

```
bool equals = ReferenceEquals(obj1, obj2); 
//in your case, obj1 = names["juan"], and obj2 = ages[23] 
```

如果引用相同，则意味着对它的任何更改都将反映在引用同一对象的变量上。

* * *

在您的情况下，是的，它们只是两个列表中的相同引用。因此，如果您对引用执行任何操作，无论是 on `person1`，`names["juan"]`还是`ages[23]`会在任何地方反映出来。也就是说，您的收藏应该如下所示：

```
Person person1 = new Person();
SortedList<string, Person> names = new SortedList<string, Person>();
SortedList<int, Person> ages = new SortedList<int, Person>();

names.Add("juan", person1);
ages.Add(23, person1);

//names["juan"].age
//ages[23].age 
//etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:26:55.767

是的，这将更改两个列表中的对象。

如果您想为此提供建议，我建议重载“=”运算符（显式）

# iphone - 在 iOS 中检查 Internet 连接的最简单方法是什么？

> ID：14498966
> 
> 赞同：0
> 
> 时间：2013-01-24T10:22:59.300
> 
> 标签：iphone, ios, objective-c

> **可能重复：**
> [检查互联网连接 - iOS SDK](https://stackoverflow.com/questions/13735611/check-for-internet-connection-ios-sdk)

我正在寻找最快和最简单的方法来检查 iOS 中的连接。

我发现了这个：

```
-(BOOL)connectedToNetwork  {
    NSURL* url = [[NSURL alloc] initWithString:@"http://google.com/"];
    NSData* data = [NSData dataWithContentsOfURL:url];
    if (data != nil)
        return YES;
    return NO;
} 
```

不知道有没有更简单的？？？

**伙计们，感谢所有答案，但我正在寻找最简单、最轻便的解决方案，而不是最好的解决方案（即不需要区分 3G/Wi-Fi，我只是在寻找“是”/“否”的范围一个网站）**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:27:06.680

看看Apple 提供的[可达性示例。](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

您的方法可能遇到的问题是您可能会超时，因此某些数据的同步下载可能会阻止您的应用程序。因此，Apple 可能会拒绝您的应用。

[可达性示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)可按如下方式使用：

```
Reachability *_reachability = [Reachability reachabilityForInternetConnection];
NetworkStatus remoteHostStatus = [_reachability currentReachabilityStatus];
if (remoteHostStatus == NotReachable) {
    // not reachable
} else if (remoteHostStatus == ReachableViaWiFi) {
    // reachable via Wifi
} else if (remoteHostStatus == ReachableViaWWAN) {
    // reachable via WWAN
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:29:47.710

我建议不要采用这种方法。由于这段代码，我的一个应用程序遭到拒绝。而是使用[Apple 的可达性类。](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T10:34:38.790

使用此代码检查设备是否已连接到互联网

在 viewDidLoad 中使用此代码：

```
 Reachability* internetReachable; = [Reachability reachabilityForInternetConnection];
    [internetReachable startNotifier];

    hostReachable = [Reachability reachabilityWithHostName: @"www.apple.com"] ;
    [hostReachable startNotifier]; 
```

并将此函数添加到您的代码中：

```
-(void) checkNetworkStatus:(NSNotification *)notice
{
    recheabilityBool=FALSE;
    nonrecheabilityBool=FALSE;
    // called after network status changes
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
            nonrecheabilityBool=TRUE;
            internetCon=0;
            //NSLog(@"The internet is down.");

            break;
        }
        case ReachableViaWiFi:
        {
            NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
            internetCon=404;
            [prefs setInteger:internetCon forKey:@"conKey"];

            //NSLog(@"The internet is working via WIFI.");
            break;

        }
        case ReachableViaWWAN:
        {
            //NSLog(@"The internet is working via WWAN.");

            break;
        }
    }

    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    switch (hostStatus)
    {
        case NotReachable:
        {
            internetCon=0;
            if( nonrecheabilityBool==FALSE)
            {
                //NSLog(@"A gateway to the host server is down.");
            }
            break;

        }
        case ReachableViaWiFi:
        {
            if(recheabilityBool==FALSE)
            {

                recheabilityBool=TRUE;

                NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
                internetCon=404;
                [prefs setInteger:internetCon forKey:@"conKey"];

                //NSLog(@"The internet is working via WIFI.");
                break;
            }

            //NSLog(@"A gateway to the host server is working via WIFI.");

            break;
        }
        case ReachableViaWWAN:
        {
            //NSLog(@"A gateway to the host server is working via WWAN.");
            break;
        }
    }
}

- (BOOL)connected
{
    Reachability *reachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus networkStatus = [reachability currentReachabilityStatus];
    return !(networkStatus == NotReachable);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T10:34:02.370

```
Reachability* reachability = [Reachability sharedReachability];
[reachability setHostName:@"www.example.com"];    // set your host name here
NetworkStatus remoteHostStatus = [reachability remoteHostStatus]; 
```

[如何在 iOS 或 OSX 上检查活动的 Internet 连接？](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:34:20.653

正如@who9vy 所说，使用[可达性示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

将两个类 Reachability.h 和 Reachability.m 导入到您的项目中

使用方法检查 Internet 连接

```
- (BOOL)isConnectedToInternet
{
    Reachability *reachability = [Reachability reachabilityForInternetConnection]; 
    NetworkStatus networkStatus = [reachability currentReachabilityStatus];
    return !(networkStatus == NotReachable);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T10:34:24.423

检查可达性的最佳方法是 Apple Rechability 类

检查此[链接](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

希望对你有帮助。。

# javascript - 如何使用包含数组的 JSON 对象填充 ExtJS 组合框？

> ID：14498968
> 
> 赞同：1
> 
> 时间：2013-01-24T10:23:01.477
> 
> 标签：javascript, ajax, json, extjs, extjs3

我有以下 JSON，从后端接收它：

```
{
    "scripts": [
        "actions/rss",
        "actions/db/initDb",
        "actions/utils/MyFile",
        "actions/utils/Valid"
    ],
    "success": true
} 
```

JSON 存储：

```
 this.store = new Ext.data.JsonStore({

        proxy: new Ext.data.HttpProxy({
            url: "http://www.example.com",
            method: 'POST'
        }),
        baseParams: {
            appId: "hsvdvndcnwvwbasxcwyc"               
        },
        root: 'scripts',
        fields: ['value']

    }); 
```

组合框：

```
 this.aField = new Ext.form.ComboBox({
        fieldLabel      : 'action',
        name        : 'actionName',
        anchor      : "95%",                     
        allowBlank      : false,
        emptyText       : "Select action",            

    triggerAction   : 'all',
    lazyRender      : true,
    mode            : 'remote',
        store           : this.store,
    valueField      : 'value',
    displayField    : 'value'
    }); 
```

所以，我收到后端的回复，没关系。但是我的组合框下拉列表是空的（它显示 10 个空行，它们等于 JSON 中的项目数）。我知道问题出在 JSON Store 的字段属性中。但是我应该放什么让它工作呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:48:57.713

尝试修改“JSON 存储：”代码，将 root: 'scripts' 放入侧阅读器对象并添加类型并在代理中添加阅读器。

所以 JSON 存储：代码应该如下所示

```
this.store = new Ext.data.JsonStore({
   proxy: new Ext.data.HttpProxy({
        url: "http://www.example.com",
        method: 'POST',
        reader: {            
                  type:'json',
                  root: 'scripts'
        }
    }),
    baseParams: {
        appId: "hsvdvndcnwvwbasxcwyc"               
    },

    fields: ['value']
}); 
```

# java - 如何添加 maven 插件 - 查找错误、代码覆盖率

> ID：14498969
> 
> 赞同：0
> 
> 时间：2013-01-24T10:23:02.130
> 
> 标签：java, maven, code-coverage, findbugs

在一个 Maven 项目中，我试图添加插件以进行代码覆盖并在 pom.xml 中查找错误，我已经粘贴了错误跟踪。如果我删除插件它工作正常。有什么建议么？

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.clusters.demo</groupId>
  <artifactId>webservice-demo</artifactId>
  <version>1</version>
  <packaging>war</packaging>

  <name>demo</name>
  <url>http://maven.apache.org</url>

  <build>
  <plugins>
      <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>findbugs-maven-plugin</artifactId>
          <version>2.4.0</version>
          <configuration>
              <effort>Max</effort>
              <failOnError>true</failOnError>
              <threshold>High</threshold>
              <xmlOutput>true</xmlOutput>
          </configuration>
          <executions>
              <execution>
                  <id>findbugs-report</id>
                  <phase>package</phase>
                  <goals>
                      <goal>findbugs</goal>
                  </goals>
              </execution>
          </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cobertura-maven-plugin</artifactId>
            <version>2.2</version>
            <configuration>  
                <formats>
                    <format>html</format>
                    <format>xml</format>  
                </formats>  
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>cobertura</goal>  
                    </goals>  
                </execution>  
            </executions>  
        </plugin>
  </plugins>
</build>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <repositories>
        <repository>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>maven-central</id>
            <url>some url</url>
        </repository>
        <repository>
            <releases>
                <enabled>false</enabled>
            </releases>
            <id>maven-snapshots</id>
            <url>some url</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.0.1.Final</version>
            <!--scope>provided</scope -->
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-hibernate3</artifactId>
            <version>2.0.8</version>
        </dependency>

        <!--dependency>
          <groupId>org.springframework</groupId>
          <artifactId>spring-orm</artifactId>
          <version>3.1.1.RELEASE</version>
        </dependency-->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-asm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
         <groupId>org.springframework</groupId>
         <artifactId>spring-oxm</artifactId>
         <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.4</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.8</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.5.8</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.1.0</version>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.8.1</version>
        </dependency>

        <dependency>
          <groupId>commons-lang</groupId>
          <artifactId>commons-lang</artifactId>
          <version>2.4</version>
        </dependency>

        <dependency>
          <groupId>org.freemarker</groupId>
          <artifactId>freemarker</artifactId>
          <version>2.3.19</version>
        </dependency>
    </dependencies>
</project> 
```

错误 -

```
[ERROR] Failed to execute goal on project demo-webservice: Could not re
solve dependencies for project com.clusters.demo:demo-webservice:war:1: Cou
ld not find artifact org.springframework:spring-aop:jar:3.0.0.RC3 in maven-centr
al ( some url ) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyReso
lutionException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:56:17.270

我不知道 findbugs 和 cobertura 插件可以在包阶段运行吗？这些是通常在站点创建中运行的报告插件。项目构建和站点的生命周期不同：[http ://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)

由于这两个报告（findbugs 和 cobertura）都需要相当长的时间，我不会在打包阶段运行它们。

通常您将它们配置为报告插件并使用以下方式运行它们`mvn site`：请参阅[http://mojo.codehaus.org/findbugs-maven-plugin/usage.html](http://mojo.codehaus.org/findbugs-maven-plugin/usage.html) cobertura 插件（奇怪？）未配置为报告插件： [http:// mojo.codehaus.org/cobertura-maven-plugin/usage.html](http://mojo.codehaus.org/cobertura-maven-plugin/usage.html)

但没有配置阶段。这可能会导致邪恶。

你得到的错误：`Could not find artifact org.springframework:spring-aop:jar:3.0.0.RC3`有点奇怪，因为上面的 pom 中的依赖项有不同的版本。此外，pom 和错误消息中的 artifactId 也不同（demo-webservice 与 webservice-demo）。这些项目是否相关？执行`mvn dependency:tree`以找出 aop 3.0.0.RC3 版本的来源。

并且请把版本改成1-SNAPSHOT，否则maven认为是发布版（没有-SNAPSHOT后缀。

希望这有一点帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:53:22.647

尝试这个

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-aop</artifactId>
  <version>3.0.0.RC3</version>
</dependency> 
```

一切顺利

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:53:26.420

我认为您的 Spring 依赖项之一需要 spring-aop:3.0.0.RC3 您有 2 个可能性： 1\. 尝试找出在哪里并排除它。2.org.springframework spring-aop 3.0.0.RC3

maven-central 中的工件 org.springframework:spring-aop:jar:3.0.0.RC3 ( some url ) maven 在存储库中找不到您正在寻找的依赖项。如果您有自己的存储库服务器，请尝试在其上下载/上传

# codeigniter - 使用活动记录的字段名称为空

> ID：14498971
> 
> 赞同：0
> 
> 时间：2013-01-24T10:23:06.153
> 
> 标签：codeigniter, activerecord

我试过了

```
$this->db->where('fieldname IS NULL',  false); 
```

这给了我

```
WHERE `fieldname` IS NULL 0 
```

导致错误。不明白 0 是从哪里来的。有人可以向我解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:27:17.423

您的第二个参数应该是 NULL，而不是 FALSE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:08:24.340

你应该这样尝试

```
$this->db->where('fieldname =',''); 
```

或者

```
$this->db->where('fieldname IS NULL'); 
```

# c++ - OpenMP - 并行代码有意想不到的结果

> ID：14498981
> 
> 赞同：1
> 
> 时间：2013-01-24T10:23:32.483
> 
> 标签：c++, parallel-processing, openmp

```
#include "/usr/lib/gcc/i686-linux-gnu/4.6/include/omp.h"
#include <iostream>
#include<list>
using namespace std;

int main()
{
    list<int> lst;
    for(int i=0;i<5;i++)
        lst.push_back(i);

#pragma omp parallel for
    for(int i=0;i<5;i++)
    {
        cout<<i<<" "<<omp_get_thread_num()<<endl;
    }   
} 
```

假设我可以得到这个：

```
0  0
1  0
2  0
3  1
4  1 
```

但是，有时我可以得到这个结果：

```
30  0
1  0
2  0
  1
4  1 
```

甚至是这种结果：

```
30 1 0
4 1

1 0
2 0 
```

我知道这是因为输出代码：

```
cout<<i<<" "<<omp_get_thread_num()<<endl; 
```

已经被拼接成小段，做输出时没有顺序。但是谁能告诉我如何防止这种情况发生？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:27:38.590

标准输出流不同步！

标准给出的唯一保证是，单个字符是原子输出的。

您需要一个锁 - 这违背了并行化的点，或者您可以删除应该导致准同步行为的“<< i”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:46:50.303

循环无序运行。这就是为什么你有无序的输出。

如果你的问题`30`是

```
30  0
1  0
2  0
 1
4  1 
```

然后保持冷静，没有`30`，但是`3`和`0`。正如预期的那样，您仍然有一个无序的行`[0..4]`：

```
3 0  0
1  0
2  0
 1
4  1 
```

你不能说的只是哪个`0`s 中的哪个`1`不是线程号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:42:45.610

你的代码

```
#pragma omp parallel for
    for(int i = 0; i < 5; i++)
    {
        cout << i << " " << omp_get_thread_num() << endl;
    } 
```

相当于

```
#pragma omp parallel for
    for(int i = 0; i < 5; i++)
    {
        cout << i;
        cout << " ";
        cout << omp_get_thread_num();
        cout << endl;
    } 
```

不同线程中的调用`<<`可以按任何顺序执行。例如`cout << i;`，线程 3 后面可能跟在线程`cout << i;`0 后面，而线程 0 后面可能跟`cout << " ";`在线程 3 中等等，从而导致输出乱码`30 ...`。

正确的做法是重写代码，让每个线程`cout <<`在循环中只调用一次：

```
#pragma omp parallel for
    for(int i = 0; i < 5; i++)
    {
        stringstream ss;
        ss << i << " " << omp_get_thread_num() << '\n';
        cout << ss.str();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:30:53.003

您可以创建一个数组（大小`5`），其中包含哪个线程处理了哪个索引，然后在并行循环之外打印它。

# jquery - jQuery：我可以 void !=0 来检查长度吗？

> ID：14498984
> 
> 赞同：1
> 
> 时间：2013-01-24T10:23:36.680
> 
> 标签：jquery, null, return-value, string, string-length

我很好奇代码是否

```
var $d = $('#person_data[document_type]');
if ($d.length != 0) {
  if ($d.val().length != 0 ) {...}
} 
```

取自SO [jQuery：检查字段的值是否为空（空）](https://stackoverflow.com/questions/4244565/jquery-checking-if-the-value-of-a-field-is-null-empty)是最好的？

我可以用吗

```
var $d = $('#person_data[document_type]');
if ($d.length) {
  if ($d.val().length) {...}
} 
```

反而？

哪一个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:25:47.987

第二个例子很好，它依赖于 0 `falsey`。它会通过网络节省一些额外的字节，这总是一件好事。这两个脚本将产生相同的输出，所以我会选择更简洁的一个。

# c# - 通过实体模型从表中删除项目

> ID：14498986
> 
> 赞同：0
> 
> 时间：2013-01-24T10:23:37.587
> 
> 标签：c#, entity-framework

现在我正在做的是：

```
List<myTable> items = (from x in myDb.myTable where x.story == 0 select x).ToList();
foreach (var item in items)
{
    myDb.myTable.DeleteObject(item);
}
myDb.SaveChanges(); 
```

有没有办法在没有 foreach 循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:27:33.867

你可以使用 ForEach 的 LINQ 版本，

```
items.ForEach(x => myDb.myTable.DeleteObject(x)); 
```

，或将 foreach 附加到第一个查询，如果你想让它更短一点。

# r - 使用整数矩阵对 data.frame 进行子集

> ID：14498990
> 
> 赞同：10
> 
> 时间：2013-01-24T10:23:56.293
> 
> 标签：r

我一直遇到这个问题，想知道是否有一个简单的解决方法。在某些情况下，我发现考虑对矩阵进行子集化更合乎逻辑

```
N <- 12
N.NA <- 6
dat <- data.frame(V1=runif(N),V2=runif(N))
sel.mat <- matrix(c(sample(seq(N),N.NA),sample(ncol(dat),N.NA,replace=TRUE)),ncol=2) 
```

这适用于选择，但不适用于替换：

```
> dat[sel.mat]
[1] 0.2582569 0.8455966 0.8828083 0.5384263 0.9574810 0.5623158
> dat[sel.mat] <- NA
Error in `[<-.data.frame`(`*tmp*`, sel.mat, value = NA) : 
  only logical matrix subscripts are allowed in replacement 
```

我意识到错误消息是有原因的（如果您有多个替换指向同一个元素，它将不知道该怎么做），但这并不能阻止 R 允许对向量进行整数替换（例如`dat$V1[c(2,3)] <- NA`）。

有没有一种方便的方法可以用整数矩阵替换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T10:56:23.273

将其转换为矩阵：

```
dat.m <- as.matrix(dat)
dat.m[sel.mat] <- NA
> dat.m
             V1         V2
 [1,] 0.2539189         NA
 [2,] 0.5216975         NA
 [3,] 0.1206138 0.14714848
 [4,] 0.2841779 0.52352209
 [5,] 0.3965337         NA
 [6,] 0.1871074 0.23747235
 [7,] 0.2991774         NA
 [8,]        NA 0.09509202
 [9,] 0.4636460 0.59384430
[10,] 0.5493738 0.92334630
[11,] 0.7160894         NA
[12,] 0.9568567 0.80398264 
```

**编辑**解释为什么我们有 data.frame 错误

```
dat.m[sel.mat] <- NA 
```

相当于执行以下操作：

```
temp <- dat
dat <- "[<-"(temp, sel.mat, value=NA)

 Error in `[<-.data.frame`(temp, sel.mat, value = NA) : 
 only logical matrix subscripts are allowed in replacement 
```

现在我可以进行以下操作并且它可以工作：

```
dat <- "[<-"(as.matrix(temp), sel.mat, value=NA) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T11:00:21.460

您可以基于整数矩阵创建一个逻辑矩阵：

```
log.mat <- matrix(FALSE, nrow(dat), ncol(dat))
log.mat[sel.mat] <- TRUE 
```

该矩阵可用于将数据框中的值替换为`NA`（或其他值）：

```
is.na(dat) <- log.mat 
```

结果：

```
 V1         V2
1  0.76063534         NA
2  0.27713051 0.10593451
3  0.74301263 0.77689458
4  0.42202155         NA
5  0.54563816 0.10233017
6          NA 0.05818723
7  0.83531963 0.93805113
8  0.99316128 0.61505393
9  0.08743757         NA
10 0.95510231 0.51267338
11 0.14035257         NA
12 0.59408022         NA 
```

这允许您将原始对象保留为允许不同类型列的数据框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:21:42.417

在 R 中，表达式

```
dat[sel.mat]
dat[sel.mat] <- NA 
```

是 S3 方法，相当于

```
`[.data.frame`(x=dat, i=sel.mat)
`[<-.data.frame`(x=dat, i=sel.mat, value=NA) 
```

因为`class(dat)`是“data.frame”。

您可以查看源代码

```
`[.data.farme`
`[<-.data.frame` 
```

并将其修改为您想要的。

* * *

在你的情况下，也许你想要：

```
`[<-.data.frame` <- function(x, i, j, value) {
  if (class(i) != "matrix") return(base:::`[<-.data.frame`(x, i, j, value))
  if (class(i[1]) != "integer") return(base:::`[<-.data.frame`(x, i, j, value))
  # check the length of i and value here
  if (length(value) < nrow(i)) {
    if (nrow(i) %% length(value) != 0) warning("some warning message should be here")
    value <- rep(value, nrow(i) %/% length(value) + 1)
  }
  value <- value[1:nrow(i)]
  for(index in 1:nrow(i)) {
    x[i[index,1], i[index,2]] <- value[index]
  }
  return(x)
} 
```

尝试一下：

```
N <- 12
N.NA <- 6
dat <- data.frame(V1=runif(N),V2=runif(N))
sel.mat <- matrix(c(sample(seq(N),N.NA),sample(ncol(dat),N.NA,replace=TRUE)),ncol=2)
dat[sel.mat] <- NA
dat 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T17:14:47.027

FWIW，带有替换的矩阵索引在当前快照**中确实有效**`R-devel`（并将成为 的一部分`R-3.0.0`）。显然，R-core 中有人和你有同样的愿望。

如[R-devel NEWS 文件](http://cran.r-project.org/bin/windows/base/NEWS.R-devel.html)中所述：

> 现在支持通过两列数字索引对数据帧进行矩阵索引以进行替换和提取。

一个示范：

```
dat[sel.mat]
## [1] 0.3355509 0.4114056 0.2334332 0.6597042 0.7707762 0.7783584
dat[sel.mat] <- NA
dat[sel.mat]
## [1] NA NA NA NA NA NA

R.version.string
# [1] "R Under development (unstable) (2012-12-29 r61478)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T10:45:54.523

也许使用循环？

```
for (i in 1:nrow(sel.mat))
{
  dat[sel.mat[i,1],sel.mat[i,2]] <- NA
}

> dat
              V1         V2
    1         NA 0.27002155
    2  0.7253383         NA
    3         NA 0.63847293
    4  0.1768720 0.64586587
    5  0.3796935 0.62261843
    6  0.6751365 0.78328647
    7  0.9801140 0.82259732
    8         NA 0.08606641
    9  0.3294625 0.44110121
    10 0.2830957         NA
    11 0.6868594 0.09767882
    12 0.9802349         NA 
```

# matlab - Matlab条件赋值

> ID：14498992
> 
> 赞同：2
> 
> 时间：2013-01-24T10:23:59.880
> 
> 标签：matlab, conditional-statements

```
 if male(m,7)==0||male(m,7)==1
        if female(f,7)==0||female(f,7)==1
            Wfst = 1;
        end
        if female(f,7)==2||female(f,7)==3||female(f,7)==4
            Wfst = 1/2;
        end
        if female(f,7) == -1
            Wfst = 1/2;
        end
    end

    if male(m,7)==2||male(m,7)==3||male(m,7)==4
        if female(f,7)==0||female(f,7)==1
            Wfst = 0;
        end
        if female(f,7)==2||female(f,7)==3||female(f,7)==4
            Wfst = 1;
        end
        if female(f,7) == -1
            Wfst = 1/2;
        end
    end 
```

任何人都可以建议一种更短的处理条件分配的方法。我已经发布了我正在处理的实际代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:15:09.830

您可以使用[`switch/case`](http://www.mathworks.com/help/matlab/ref/switch.html). 像这样：

```
switch male(m, 7)
    case {0, 1}
        switch female(f,7)
            case {0, 1}
                Wfst = 1;
            case {2, 3, 4}
                Wfst = 1/2;
            case -1
                Wfst = 1/2;
        end
    case {2, 3, 4}
        switch female(f,7)
            case {0, 1}
                Wfst = 0;
            case {2, 3, 4}
                Wfst = 1;
            case -1
                Wfst = 1/2;
        end
end 
```

它不比你的短，但很容易理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:13:59.053

你可以更换

```
a == n1 || a == n2 || a == n3 
```

和

```
any(a == [n1, n2, n3]) 
```

本着类似的精神，对于未来，如果您碰巧有`&&`而不是`||`，您可以使用 matlab 函数`all`代替`any`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:13:58.723

我认为这并没有真正简化它，但也许你可以从中取出一些元素，所以这里有一个包含相同逻辑的 1 班轮：

```
M = male(f, 7)
F = female(f, 7)
Wfst = (M < 2) * ( 1 - any(F == [-1 2:4])*0.5 ) + (M > 1) * ( (F == -1)*0.5 + any(F == 2:4)) 
```

所以基本思想是 Matlab 隐式地将逻辑类型变量转换为整数，其中 true 为 1，零为 false，因此您可以乘以条件。

例如：

```
if (a > 10)
   b = 5;
else
   b = 10;
end 
```

是相同的

```
b = (a > 10)*5 + ~(a > 10)*10; 
```

这简化为

```
b = 10 - (a > 10)*5; 
```