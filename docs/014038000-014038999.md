# StackOverflow 问答 14038000-14038999

# opengl - 为什么 CG 着色器不能与 GL 3.2 一起使用？

> ID：14038001
> 
> 赞同：1
> 
> 时间：2012-12-26T08:38:22.710
> 
> 标签：opengl, sdl, nvidia, glew, cg-toolkit

我已经尽一切努力让 OpenGL 3.2 在我的游戏引擎中使用 CG 着色器进行渲染，但我没有运气。所以我决定做一个简单的最小项目，但着色器仍然无法工作。理论上，我的测试项目应该只渲染一个红色三角形，但它是白色的，因为着色器没有做任何事情。

我将在这里发布代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <vector>
#include <string>
#include <GL/glew.h>
#include <Cg/cg.h>
#include <Cg/cgGL.h>
#include <SDL2/SDL.h>

int main()
{
    SDL_Window *mainwindow;
    SDL_GLContext maincontext;

    SDL_Init(SDL_INIT_VIDEO);

    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);

    mainwindow = SDL_CreateWindow("Test", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 512, 512, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);

    maincontext = SDL_GL_CreateContext(mainwindow);

    glewExperimental = GL_TRUE;
    glewInit();

    _CGcontext* cgcontext;
    cgcontext = cgCreateContext();
    cgGLRegisterStates(cgcontext);

    CGerror error;
    CGeffect effect;
    const char* string;
    std::string shader;

    shader =
            "struct VS_INPUT"
            "{"
            "   float3 pos              : ATTR0;"
            "};"

            "struct FS_INPUT"
            "{"
            "   float4 pos                  : POSITION;"
            "   float2 tex                  : TEXCOORD0;"
            "};"

            "struct FS_OUTPUT"
            "{"
            "   float4 color                : COLOR;"
            "};"

            "FS_INPUT VS( VS_INPUT In )"
            "{"
            "   FS_INPUT Out;"
            "   Out.pos = float4( In.pos, 1.0f );"
            "   Out.tex = float2( 0.0f, 0.0f );"
            "   return Out;"
            "}"

            "FS_OUTPUT FS( FS_INPUT In )"
            "{"
            "   FS_OUTPUT Out;"
            "   Out.color = float4(1.0f, 0.0f, 0.0f, 1.0f);"
            "   return Out;"
            "}"

            "technique t0"
            "{"
            "   pass p0"
            "   {"
            "      VertexProgram = compile gp4vp VS();"
            "      FragmentProgram = compile gp4fp FS();"
            "   }"
            "}";

    effect = cgCreateEffect(cgcontext, shader.c_str(), NULL);
    error = cgGetError();
    if(error)
    {
        string = cgGetLastListing(cgcontext);
        fprintf(stderr, "Shader compiler: %s\n", string);
    }

    glClearColor ( 0.0, 0.0, 1.0, 1.0 );
    glClear ( GL_COLOR_BUFFER_BIT );

    float* vert = new float[9];

    vert[0] = 0.0; vert[1] = 0.5; vert[2] =-1.0;
    vert[3] =-1.0; vert[4] =-0.5; vert[5] =-1.0;
    vert[6] = 1.0; vert[7] =-0.5; vert[8]= -1.0;

    unsigned int m_vaoID;
    unsigned int m_vboID;

    glGenVertexArrays(1, &m_vaoID);
    glBindVertexArray(m_vaoID);

    glGenBuffers(1, &m_vboID);

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);
    glBufferData(GL_ARRAY_BUFFER, 9 * sizeof(GLfloat), vert, GL_STATIC_DRAW);

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(0);

    CGtechnique tech = cgGetFirstTechnique( effect );
    CGpass pass = cgGetFirstPass(tech);
    while (pass)
    {
        cgSetPassState(pass);
        glDrawArrays(GL_TRIANGLES, 0, 3);
        cgResetPassState(pass);
        pass = cgGetNextPass(pass);
    }

    glDisableVertexAttribArray( 0 );

    glBindVertexArray(0);

    delete[] vert;

    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glDeleteBuffers(1, &m_vboID);
    glDeleteVertexArrays(1, &m_vaoID);

    SDL_GL_SwapWindow(mainwindow);
    SDL_Delay(2000);

    SDL_GL_DeleteContext(maincontext);
    SDL_DestroyWindow(mainwindow);
    SDL_Quit();

    return 0;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:05:26.783

我编译了代码并得到了相同的结果。所以我添加了一个[CG 错误处理程序](http://http.developer.nvidia.com/Cg/cgSetErrorHandler.html)来获取更多信息：

```
void errorHandler(CGcontext context, CGerror error, void * appdata) {
    fprintf(stderr, "%s\n", cgGetErrorString(error));
}
...
cgSetErrorHandler(&errorHandler, NULL); 
```

当`cgSetPassState`并被`cgResetPassState`调用时，我收到以下错误消息：

> 技术没有通过验证。

当然，信息量不是很大。所以我使用[GLIntercept](http://code.google.com/p/glintercept/)来跟踪所有对日志文件的 OpenGL 调用。

这一次，当`glewInit`被调用时，我在日志文件中收到以下错误消息：

> glGetString(GL_EXTENSIONS)=NULL glGetError() = GL_INVALID_ENUM

根据 OpenGL 文档，[`glGetString`](http://www.opengl.org/wiki/GLAPI/glGetString)不得使用 GL_EXTENSIONS 调用，在 3.0 中已弃用，`glGetStringi`必须改为使用。

最后，我在 GLEW 库中发现了问题：http: [//sourceforge.net/p/glew/bugs/120/](http://sourceforge.net/p/glew/bugs/120/)

我删除了 GLEW 依赖项并使用[gl3.h](http://www.opengl.org/registry/api/gl3.h)（以及更新的[glcorearb.h](http://www.opengl.org/registry/api/glcorearb.h)）进行了测试。我得到了同样的错误，但这次是什么时候`cgGLRegisterStates`被调用的。

我也试过[CG trace.dll](http://http.developer.nvidia.com/Cg/trace.html)，只是为了得到同样的错误（7939 = 0x1F03 = `GL_EXTENSIONS`）：

```
glGetString
  {
  input:
    name = 7939
  output:
    return = NULL
  } 
```

然后，我测试了 OpenGL 3.1 ( `SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);`)，发现它运行良好：

> glGetString(GL_EXTENSIONS)="GL_AMD_multi_draw_indirec..."

也就是说，3.1 上下文与以前的 OpenGL 版本兼容，但 3.2 不兼容。

经过一番互联网挖掘后，我发现您可以使用 SDL 创建这种类型的兼容 OpenGL 上下文，只需将这一行添加到代码中：

```
SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_COMPATIBILITY); 
```

恕我直言，CG Toolkit 需要这种类型的兼容性配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T01:06:58.487

“Cg 3.1 上下文还不支持向前兼容的 OpenGL 上下文！”

来源：http: [//3dgep.com/introduction-to-shader-programming-with-cg-3-1/](http://3dgep.com/introduction-to-shader-programming-with-cg-3-1/)

由于 Cg 项目似乎被放弃了，它也不太可能发生。

# image-processing - OpenCV：如何使用图像计算相机和物体之间的距离？

> ID：14038002
> 
> 赞同：41
> 
> 时间：2012-12-26T08:38:29.640
> 
> 标签：image-processing, opencv

我是 OpenCV 的新手。我正在使用以下公式来计算距离：

```
distance to object (mm) = focal length (mm) * real height of the object (mm) * image height (pixels)
                          ----------------------------------------------------------------
                                object height (pixels) * sensor height (mm) 
```

OpenCV中是否有可以确定物距的函数？如果没有，任何参考示例代码？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-12-16T10:30:14.180

# 给定已知大小的对象，如何计算距离

您需要预先知道两件事之一

*   焦距（以毫米和每毫米像素为单位）
*   图像传感器的物理尺寸（计算每毫米像素）

我将使用焦距，因为我不想在谷歌上搜索传感器数据表。

## 校准相机

使用源代码中提供的 OpenCV`calibrate.py`工具和棋盘图案 PNG 生成校准矩阵。我从尽可能多的角度拍摄了大约 2 打棋盘照片，并将文件导出到我的 Mac。有关更多详细信息，请查看[OpenCV 的相机校准文档](http://docs.opencv.org/doc/tutorials/calib3d/camera_calibration/camera_calibration.html)。

### 摄像头校准矩阵（iPhone 5S 后置摄像头）

```
RMS: 1.13707201375
camera matrix:
[[  2.80360356e+03   0.00000000e+00   1.63679133e+03]
 [  0.00000000e+00   2.80521893e+03   1.27078235e+03]
 [  0.00000000e+00   0.00000000e+00   1.00000000e+00]]
distortion coefficients:  [ 0.03716712  0.29130959  0.00289784 -0.00262589 -1.73944359] 
```

*   f_x = 2803
*   f_y = 2805
*   c_x = 1637
*   c_y = 1271

检查您拍摄的一系列棋盘照片的详细信息，您会发现照片的原始分辨率 (3264x2448) 和在 iPhoto 中可见的 JPEG [EXIF 标头](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)中，您可以找到焦距值 (4.15mm)。这些项目应因相机而异。

### 每毫米像素数

我们需要知道图像传感器上的每毫米像素 (px/mm)。从[相机切除](http://en.wikipedia.org/wiki/Camera_resectioning)页面我们知道 f_x 和 f_y 是焦距乘以比例因子。

```
f_x = f * m_x
f_y = f * m_y 
```

由于每个公式都有两个变量，我们可以求解 m_x 和 m_y。我只是平均 2803 和 2805 得到 2804。

```
m = 2804px / 4.15mm = 676px/mm 
```

### 对象大小（以像素为单位）

我使用 OpenCV (C++) 来抓取点的[Rotated Rect](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=minarearect#minarearect)，并确定对象的大小为 41px。请注意，我已经检索了对象的角，并询问了边界矩形的大小。

```
cv::RotatedRect box = cv::minAreaRect(cv::Mat(points)); 
```

### 小皱纹

该对象在相机上拍摄的视频中为 41px @ 640x480。

### 以较低的分辨率转换 px/mm

```
3264/676 = 640/x
x = 133 px/mm 
```

所以给定 41px/133px/mm 我们看到图像传感器上物体的尺寸是 .308mm 。

### 距离公式

```
distance_mm = object_real_world_mm * focal-length_mm / object_image_sensor_mm
distance_mm = 70mm * 4.15mm / .308mm
distance_mm = 943mm 
```

这恰好是相当不错的。我测量了 910 毫米，经过一些改进，我可能可以减少误差。

反馈表示赞赏。

### 相似三角形法

Adrian at`pyimagesearch.com`演示[了一种使用相似三角形的不同技术](http://www.pyimagesearch.com/2015/01/19/find-distance-camera-objectmarker-using-python-opencv/)。我们事先讨论了这个话题，他采用了相似的三角形方法，我做了相机内在函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:42:28.863

opencv 中没有这样的函数来计算物体和相机之间的距离。看到这个： [寻找从相机到已知尺寸物体的距离](https://stackoverflow.com/questions/6714069/finding-distance-from-camera-to-object-of-known-size)

您应该知道参数取决于相机，并且会随着相机的变化而改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:00:53.870

1.  要在没有任何相机先验信息的情况下获得现实世界和相机之间的映射，您需要校准相机......[在这里您可以找到一些理论](http://www.aishack.in/2010/07/calibrating-a-camera-theory/)
2.  为了计算深度，即相机和物体之间的距离，您需要至少两个由两个不同相机拍摄的同一物体的图像……这通常被称为立体视觉技术。

# jquery - jQuery 选择器和 HTML5 data-* 属性动态设置

> ID：14038003
> 
> 赞同：14
> 
> 时间：2012-12-26T08:38:38.147
> 
> 标签：jquery, jquery-selectors

我有这个工作：

```
 <div data-people="australian">Australian people eats...</div>

  <script type="text/javascript">
    alert($("[data-people=australian]").html());
  </script> 
```

但这另一个不起作用，我不知道如何解决：

```
 <div id="mich">Australian people eats...</div>

  <script type="text/javascript">
    $("#mich").data("people", "australian");

    alert($("[data-people=australian]").html());
  </script> 
```

为什么我不能从 jQuery 设置 data-* HTML5 属性并使用它们来选择 DOM 对象？？？

非常感谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-26T08:42:50.140

jQuery data() 映射的`data-`属性是单向的。如果要实际设置节点上的属性，则应使用 attr() 函数。

```
$("#mich").attr("data-people", "australian"); 
```

从[文档：](http://api.jquery.com/data)

> data- 属性在第一次访问 data 属性时被拉取，然后不再被访问或改变（然后所有数据值都存储在 jQuery 内部）

# java - JSP 变量的 JAVASCRIPT 值

> ID：14038006
> 
> 赞同：1
> 
> 时间：2012-12-26T08:38:40.420
> 
> 标签：java, javascript, jsp, variables, select

如何将变量的值从 javascript 传递给 java 变量？

```
<% String st = "<script>document.writeln(selected)</script>";
 out.print("value = " + st);%> 
```

这是我的 java 从选定的 javascript 变量中获取值的代码。但不显示任何值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:40:20.363

您必须发出请求并将变量从浏览器（Javascript 所在的位置）发送到服务器（JSP 所在的位置）。

Ajax 或 HTML 表单都可以工作。

在您的 JSP 中，您可以将其作为请求参数（或作为请求正文的一部分，或作为请求标头）接收。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:42:01.817

Javascript 在客户端上运行。JSP 在服务器上运行。在 Web 环境中将信息从客户端传递到服务器的唯一方法是在 HTTP 请求期间通过 HTTP 参数或 HTTP 标头，或者如果方法是 POST 或 PUT，则作为请求正文的一部分。

所以，你应该创建这样的请求。它可以通过更改文档位置或使用 AJAX 调用来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T08:42:24.923

你可以在你的jsp代码中传递参数或创建一个隐藏字段，并使用javascript为这个隐藏字段赋值，然后在java代码中获取参数值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T08:42:53.640

使用[`HTML forms`](http://www.w3schools.com/html/html_forms.asp).

在服务器端，您将获取[`HTTPServletRequest`](http://java.boot.by/wcd-guide/ch01s02.html)参数中的数据。

也检查一下：[构建我的第一个 Java Web 应用程序](https://stackoverflow.com/questions/7018442/building-my-first-java-web-application)

# mysql - mysql求和一张表但类型不同

> ID：14038007
> 
> 赞同：2
> 
> 时间：2012-12-26T08:38:50.020
> 
> 标签：mysql, sql, select

**任务付款**

![任务付款](../Images/ddc3a2abe4a0c4120c96a1d4677551ae.png)

```
SELECT t.id AS task_id, t.name, t.created_at
       ,COALESCE(SUM(tp1.amount),0) AS paid
       ,COALESCE(SUM(tp2.amount),0) AS paid_back
       FROM tasks AS t
       LEFT JOIN task_payments AS tp1 ON tp1.task_id=t.id AND tp1.type='1'
       LEFT JOIN task_payments AS tp2 ON tp2.task_id=t.id AND tp2.type='0'
       WHERE t.customer_id='4'
       GROUP BY tp1.task_id, tp2.task_id
       ORDER BY t.id ASC 
```

嗨，task_payments 上有两种类型（1 或 0）。类型 0 已偿还。类型 1 已付费。我想要单独的总金额作为结果。所以我想要结果；task_id=5paid=450paid_back=10 我应该使用join。如果有过滤请求，我将在 where 子句中使用paid 和paid_colums。例如：和paid_back>0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:41:15.680

也许以下查询可以帮助您`:D`

```
SELECT  x.*
FROM
    (
        SELECT  a.task_id,
                SUM(CASE WHEN b.type = 1 THEN b.amount ELSE 0 END) paid,
                SUM(CASE WHEN b.type = 0 THEN b.amount ELSE 0 END) paidBack
        FROM    tasks a
                LEFT JOIN task_payments b
                    ON a.id = b.task_id
        -- WHERE a.customer_id = 4
        GROUP BY a.task_id
    ) x
-- WHERE    x.paid > 100   -- sample Request 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:57:14.157

除了 JW 的回答，我想建议一件事，

如果您的要求是默认空值，请选择

```
nvl(sum(field),0) instead of COALESCE(SUM(tp1.amount),0) 
```

如果你的数据库不支持`nvl`然后去`IFNULL`

希望这也对你有帮助:)

# algorithm - Dijkstra 算法是贪心算法还是动态规划算法？

> ID：14038011
> 
> 赞同：20
> 
> 时间：2012-12-26T08:39:09.473
> 
> 标签：algorithm, dynamic-programming, dijkstra, greedy

在[这篇文章](https://stackoverflow.com/questions/6162465/divide-and-conquer-dynamic-programming-and-greedy-algorithms)中，将 Dijkstras 描述为一种贪心算法，而[这里](http://matwbn.icm.edu.pl/ksiazki/cc/cc35/cc3536.pdf)和[这里](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Dynamic_programming_perspective)显示它与动态规划算法有联系。

那是哪一个呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-26T08:44:21.437

这是贪婪的，因为你总是标记最近的顶点。它是动态的，因为距离是使用先前计算的值更新的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-28T18:58:43.243

我会说它肯定比贪心算法更接近动态编程。要找到从 A 到 B 的最短距离，它并不决定一步一步走哪条路。相反，它会找到从 A 可以去的所有地方，并标记到最近地方的距离。然而，标记那个地方并不意味着你会去那里。这仅意味着假设图形的所有边都是正的，则不再可以缩短距离。算法本身并没有很好的方向感来判断哪种方式可以让你更快地放置 B。最佳决策不是贪婪地做出的，而是通过用尽所有可以缩短距离的可能路线来做出的。因此，它是一种动态规划算法，唯一的变化是预先不知道阶段，但在算法过程中是动态确定的。如果愿意，您可以将其称为“动态”动态编程算法，以将其与其他具有预定决策阶段的动态编程算法区分开来。

与 Kruskal 最小生成树算法相比，区别很明显。在 Kruskal 算法中，您总是选择不会导致循环的最短边，然后选择下一个最短边，以此类推。最优策略是逐步选择的，算法中只选择一个选项。其他可能性不会在算法上进行检查或比较，即使在数学上一个定理保证它们不会是最优的。所以对我来说，Kruskal 是贪婪的，但 Dijkstra 是动态规划。

# ios - 如何在比 iOS 6.0 更早的 iOS 版本中从 UITextRange 获取矩形

> ID：14038012
> 
> 赞同：2
> 
> 时间：2012-12-26T08:39:09.093
> 
> 标签：ios, range, cgrect, uitextrange

我想从 UITextRange 获得所有的矩形。要知道，如果 UITextView 换行，UITextRange 将由超过 1 个 CGRect 表示。在 iOS 6.0 中，有一个方法叫“selectionRectsForRange:”，所以你可以得到所有的 CGRects。但是在旧版本中，只有一个方法“firstRectForRange：”我一次又一次地检查了API文档，但我什么也没找到。

我的代码喜欢吹：

```
UITextPosition *beginning = textView.beginningOfDocument;
UITextPosition *start = [textView positionFromPosition:beginning offset:range.location];
UITextPosition *end = [textView positionFromPosition:start offset:range.length];
UITextRange *textRange = [textView textRangeFromPosition:start toPosition:end];

//(in iOS 6.0)      
NSArray *array = [textView selectionRectsForRange:textRange];
for (int i=0; i<[array count]; i++) {
    NSLog(@"rect array = %@", NSStringFromCGRect([[array objectAtIndex:i] rect]));
}
// (in earlier version)
CGRect rect = [textView firstRectForRange:textRange]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T15:37:43.620

如何使用 frameOfTextRange 然后做这样的事情。但我不确定这是否适用于您的特定 iOS 版本。

```
- (CGRect)frameOfTextRange:(NSRange)range inTextView:(UITextView *)textView
{
    UITextPosition *beginning = textView.beginningOfDocument;
    UITextPosition *start = [textView positionFromPosition:beginning offset:range.location];
    UITextPosition *end = [textView positionFromPosition:start offset:range.length];
    UITextRange *textRange = [textView textRangeFromPosition:start toPosition:end]];
    CGRect rect = [textView firstRectForRange:textRange];
    return [textView convertRect:rect fromView:textView.textInputView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T15:33:30.250

基于此答案中的信息： [如何在 textview 中查找位置或获取任何单词的 rect 并在其上放置按钮？](https://stackoverflow.com/questions/10313689/how-to-find-position-or-get-rect-of-any-word-in-textview-and-place-buttons-over/22637051#22637051)

你必须`firstRectForRange`反复打电话。

当您获得第*一个*矩形时，您将能够检查其范围。使用这个和您最初提供的范围，您可以`firstRectForRange`使用调整后的范围再次调用（如果需要）...

# android - 在外部存储的文件中写入类对象

> ID：14038017
> 
> 赞同：0
> 
> 时间：2012-12-26T08:40:13.387
> 
> 标签：android, android-file

起初，我使用 Nexus 7 作为我的测试设备。

我想将一个类对象及其所有变量的当前值保存在一个文件中，并希望将文件保存在这样的地方，以便在手机重新启动后（假设手机被用户关闭），我可以获得文件中的对象，并且可以使用数据（保存在已保存对象类的变量中）供我进一步使用。我应该在哪里保存我的文件（带有对象），以便它适用于大多数设备。

这是我的代码（在外部存储的文件中写入类对象）：

```
File file = new File(Environment.getExternalStorageDirectory(), "savedData"); 
                    if(!file.exists()){
                        file.createNewFile();
                        Toast.makeText(getActivity(), "not exist", Toast.LENGTH_LONG).show();
                    }else{
                        Toast.makeText(getActivity(), "exist", Toast.LENGTH_LONG).show();
                    }
                    if(file.canWrite())
                        Toast.makeText(getActivity(), "writable", Toast.LENGTH_LONG).show();
                    else
                        Toast.makeText(getActivity(), "not writable", Toast.LENGTH_LONG).show();
                    FileOutputStream fos = new FileOutputStream(file);
                    String car = "ferrari";

                    ObjectOutputStream os = new ObjectOutputStream(fos);
                    os.writeObject(app);

                    os.writeObject(car);
                    os.close(); 
```

这是我的代码（从外部存储的文件中读取类对象）：

```
File file = new File(Environment.getExternalStorageDirectory(), "savedData");

            FileInputStream fis = new FileInputStream(file);
            ObjectInputStream is = new ObjectInputStream(fis);
            savedData = (SavedFriend) is.readObject();

            String car = (String) is.readObject();
            Toast.makeText(getApplicationContext(), car, Toast.LENGTH_LONG).show();
            is.close(); 
```

我在一个类中写了对象并从另一个类中读取它。如您所见，我编写了一个字符串（汽车）作为用于测试目的的对象和类对象。我在另一堂课上读过它们。现在类对象和字符串（汽车）的值完美显示。这意味着它们可以很好地写入外部存储的文件中。但是当我关闭我的 Nexux 7（用于测试应用程序）并再次运行应用程序时，字符串（汽车）的值显示完美，但类对象的变量值显示为空。问题是什么？在我的清单中，我添加了：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

顺便说一句，我想写为对象的类的对象`implements Serializable`....甚至，我`implements Serializable`对所有类都有 test 。但它不工作。我不能使用数据库或其他存储技术，因为我已经在这个应用程序上走了很长一段路，所以如果我使用其他技术，我必须更改我的大部分代码。请帮忙。

是否可以在手机的内部记忆中写入对象？我以前也写过文件`getActivity().getApplicationContext().openFileOut()`。但我用这种方法遇到了同样的问题。

**编辑：**

SavedFriend 类：

```
public class SavedFriend extends Application implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private static List<GraphUser> selectedUsers;
    private static String friendsId;
    private static Session session;
    private static Bundle bundle;
    private static Context context;
    private static long time;
    private static int year, month, date, hour, min;
    //private Activity activity;

    //dynamic
    private static String[] pmsg = new String[5];
    private static String[] smsg = new String[5];
    private static String[] fmsg = new String[5];

    private static long[] ptime = new long[5];
    private static long[] stime = new long[5];
    private static long[] ftime = new long[5];

    private static int[] pyear = new int[5];
    private static int[] syear = new int[5];
    private static int[] fyear = new int[5];

    private static int[] pmonth = new int[5];
    private static int[] smonth = new int[5];
    private static int[] fmonth = new int[5];

    private static int[] pdate = new int[5];
    private static int[] sdate = new int[5];
    private static int[] fdate = new int[5];

    private static int[] phour = new int[5];
    private static int[] shour = new int[5];
    private static int[] fhour = new int[5];

    private static int[] pmin = new int[5];
    private static int[] smin = new int[5];
    private static int[] fmin = new int[5];

    private static String[] pfriendName = new String[5];
    private static String[] sfriendName = new String[5];
    private static String[] ffriendName = new String[5];

    private static String[] pfriendId = new String[5];
    private static String[] sfriendId = new String[5];
    private static String[] ffriendId = new String[5];

    private static String[] pDateTime = new String[5];
    private static String[] sDateTime = new String[5];
    private static String[] fDateTime = new String[5];

    private static int pmaster_key = -1;
    private static int smaster_key = -1;
    private static int fmaster_key = -1;

    public void setYear(int year){
        SavedFriend.year = year;
    }

    public void setMonth(int month){
        SavedFriend.month = month;
    }

    public void setDate(int date){
        SavedFriend.date = date;
    }

    public void setHour(int hour){
        SavedFriend.hour = hour;
    }

    public void setMin(int min){
        SavedFriend.min = min;
    }

    public static int getYear (){
        return year;
    }

    public static int getMonth (){
        return month;
    }

    public static int getDate (){
        return date;
    }

    public static int getHour (){
        return hour;
    }

    public static int getMin (){
        return min;
    }

    public static List<GraphUser> getSelectedUsers() {
        return selectedUsers;
    }

    public void setSelectedUsers(List<GraphUser> selectedUsers) {
        SavedFriend.selectedUsers = selectedUsers;
    }

    public static String getfriendsId() {
        return friendsId;
    }

    public void setfriendsId(String id) {
        SavedFriend.friendsId = id;
    }

    public static Session getSession(){
        return session;
    }

    public void setSession(Session session){
        this.session = session;
    }

    public void setContext(Context context){
        this.context = context;
    }

    public static Context getContext(){
        return context;
    }

    /*public void setActivity(Activity activity){
        this.activity = activity;
    }

    public Activity getActivity(){
        return activity;
    }*/

    public void setBundle(Bundle bundle){
        SavedFriend.bundle = bundle;
    }

    public Bundle getBundle(){
        return bundle;
    }

    public void setPmsg(String Pmsg, long Ptime, String Pfriendname, String Pfriendid,
            int year, int month, int date, int hour, int min){
        Log.e("key before inc",Integer.toString(pmaster_key));
        pmaster_key++;
        Log.e("key after inc",Integer.toString(pmaster_key));
        if(pmaster_key == 0){
            pmsg[pmaster_key] = Pmsg;
            ptime[pmaster_key] = Ptime;
            pfriendName[pmaster_key] = Pfriendname;
            pfriendId[pmaster_key] = Pfriendid;
            pyear[pmaster_key] = year;
            pmonth[pmaster_key] = month;
            pdate[pmaster_key] = date;
            phour[pmaster_key] = hour;
            pmin[pmaster_key] = min;

            Log.e("first entry", pmsg[pmaster_key]);
            //write();
        }else{
            boolean check = false;
            for(int i=0; i<pmaster_key; i++){
                if(ptime[i] < Ptime){
                    long temp1 = 0;
                    String temp2 = null;
                    String temp3 = null;
                    String temp4 = null;
                    int temp5 = 0;
                    int temp6 = 0;
                    int temp7 = 0;
                    int temp8 = 0;
                    int temp9 = 0;
                    for(int j=i; j<=pmaster_key; j++){
                        if(j<pmaster_key){
                            temp1 = ptime[j];
                            temp2 = pmsg[j];
                            temp3 = pfriendName[j];
                            temp4 = pfriendId[j];
                            temp5 = pyear[j];
                            temp6 = pmonth[j];
                            temp7 = pdate[j];
                            temp8 = phour[j];
                            temp9 = pmin[j];
                        }

                        pmsg[j] = Pmsg;
                        ptime[j] = Ptime;
                        pfriendName[j] = Pfriendname;
                        pfriendId[j] = Pfriendid;
                        pyear[j] = year;
                        pmonth[j] = month;
                        pdate[j] = date;
                        phour[j] = hour;
                        pmin[j] = min;

                        if(j<pmaster_key){
                            Pmsg = temp2;
                            Ptime = temp1;
                            Pfriendname = temp3;
                            Pfriendid = temp4;
                            year = temp5;
                            month = temp6;
                            date = temp7;
                            hour = temp8;
                            min = temp9;
                        }
                        Log.e("sorted entry", pmsg[j]);
                        Log.e("key & j",Integer.toString(pmaster_key)+", "+Integer.toString(j));
                        check = true;
                    }
                }
                if(check){
                    Log.e("sorted entry after loop", pmsg[pmaster_key]);
                    break;
                }
            }
            if(!check){

                pmsg[pmaster_key] = Pmsg;
                ptime[pmaster_key] = Ptime;
                pfriendName[pmaster_key] = Pfriendname;
                pfriendId[pmaster_key] = Pfriendid;
                pyear[pmaster_key] = year;
                pmonth[pmaster_key] = month;
                pdate[pmaster_key] = date;
                phour[pmaster_key] = hour;
                pmin[pmaster_key] = min;
                Log.e("sorted entry last pos", pmsg[pmaster_key]);
            }
            //write();
        }
    }

    public void setSmsg(){
        smaster_key++;
        if(smaster_key>5)
            smaster_key = 0;

        smsg[smaster_key] = pmsg[pmaster_key];
        stime[smaster_key] = ptime[pmaster_key];
        sfriendName[smaster_key] = pfriendName[pmaster_key];
        sfriendId[smaster_key] = pfriendId[pmaster_key];
        syear[smaster_key] = pyear[pmaster_key];
        smonth[smaster_key] = pmonth[pmaster_key];
        sdate[smaster_key] = pdate[pmaster_key];
        shour[smaster_key] = phour[pmaster_key];
        smin[smaster_key] = pmin[pmaster_key];
        Log.e("one entry deleted", pmsg[pmaster_key]);

        pmaster_key--;
    }

    public void setFmsg(){
        fmaster_key++;
        if(fmaster_key>5)
            fmaster_key = 0;

        fmsg[fmaster_key] = pmsg[pmaster_key];
        ftime[fmaster_key] = ptime[pmaster_key];
        ffriendName[fmaster_key] = pfriendName[pmaster_key];
        ffriendId[fmaster_key] = pfriendId[pmaster_key];
        fyear[fmaster_key] = pyear[pmaster_key];
        fmonth[fmaster_key] = pmonth[pmaster_key];
        fdate[fmaster_key] = pdate[pmaster_key];
        fhour[fmaster_key] = phour[pmaster_key];
        fmin[fmaster_key] = pmin[pmaster_key];

        pmaster_key--;
    }

    public static int[] getPyear(){
        return pyear;
    }

    public static int[] getPmonth(){
        return pmonth;
    }

    public static int[] getPdate(){
        return pdate;
    }

    public static int[] getPhour(){
        return phour;
    }

    public static int[] getPmin(){
        return pmin;
    }

    public static int[] getSyear(){
        return syear;
    }

    public static int[] getSmonth(){
        return smonth;
    }

    public static int[] getSdate(){
        return sdate;
    }

    public static int[] getShour(){
        return shour;
    }

    public static int[] getSmin(){
        return smin;
    }

    public static int[] getFyear(){
        return fyear;
    }

    public static int[] getFmonth(){
        return fmonth;
    }

    public static int[] getFdate(){
        return fdate;
    }

    public static int[] getFhour(){
        return fhour;
    }

    public static int[] getFmin(){
        return fmin;
    }

    public static int getPmaster_key(){
        return pmaster_key;
    }

    public static int getSmaster_key(){
        return smaster_key;
    }

    public static int getFmaster_key(){
        return fmaster_key;
    }

    public static String[] getPmsg(){
        return pmsg;
    }

    public static String[] getSmsg(){
        return smsg;
    }

    public static String[] getFmsg(){
        return fmsg;
    }

    public static long[] getPtime(){
        return ptime;
    }

    public static long[] getStime(){
        return stime;
    }

    public static long[] getFtime(){
        return ftime;
    }

    public static String[] getPfriendname(){
        return pfriendName;
    }

    public static String[] getSfriendname(){
        return sfriendName;
    }

    public static String[] getFfriendname(){
        return ffriendName;
    }

    public static String[] getPfriendid(){
        return pfriendId;
    }

    public static String[] getSfriendid(){
        return sfriendId;
    }

    public static String[] getFfriendid(){
        return ffriendId;
    }

    public static String[] getPdateTime(){
        return pDateTime;
    }

    public static String[] getSdateTime(){
        return sDateTime;
    }

    public static String[] getFdateTime(){
        return fDateTime;
    }

    public void setTime(long time){
        SavedFriend.time = time;
    }

    public static long getTime(){
        return time;
    }

    public void Delete(int position){
        if(position == pmaster_key){
            pmaster_key--;
        }else{
            for(int i=position; i<pmaster_key; i++){
                pmsg[i] = pmsg[i+1];
                ptime[i] = ptime[i+1];
                pfriendName[i] = pfriendName[i+1];
                pfriendId[i] = pfriendId[i+1];
                pyear[i] = pyear[i+1];
                pmonth[i] = pmonth[i+1];
                pdate[i] = pdate[i+1];
                phour[i] = phour[i+1];
                pmin[i] = pmin[i+1];
            }
            pmaster_key--;
        }
    }

    public void Edit(int position, String Nmsg, long Ntime, String NfriendName, String NfriendId,
            int Nyear, int Nmonth, int Ndate, int Nhour, int Nmin){
        pmsg[position] = Nmsg;
        ptime[position] = Ntime;
        pfriendName[position] = NfriendName;
        pfriendId[position] = NfriendId;
        pyear[position] = Nyear;
        pmonth[position] = Nmonth;
        pdate[position] = Ndate;
        phour[position] = Nhour;
        pmin[position] = Nmin;
    }

    public void writeNow (){
        try {
            File file = new File(Environment.getExternalStorageDirectory(), "savedData"); 
            FileOutputStream fos = new FileOutputStream(file);
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(new SavedFriend());
            os.close();
        } catch (Exception e) {
            Toast.makeText(context, "Unknown error", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:16:00.660

类中的字段`SavedFriend`不应该是静态的。序列化期间不写入静态字段。

# sql - SQL查询中如何处理Excel文件？

> ID：14038020
> 
> 赞同：4
> 
> 时间：2012-12-26T08:40:21.033
> 
> 标签：sql

我有一个问题....我有旧的 excels 文件，我想将它们保存到 SQL 数据库中...我的问题是：如果我想 在(C16:C28)**中的 .xls 中执行例如**并将其放入字段 NAMES 中的 table1 中。***我如何在查询中编写它***？

**注意**我正在使用 Microsoft SQL Server Management .. 并尝试获取我所有的 xls 并通过 sql 查询将其导入数据库，从这些文件中获取数据并将其放入我的数据库中..

```
INSERT INTO [table1] (Names) VALUES ('&C16&') to ('&C28&') 
```

这是真的 ？idk怎么写..需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:08:04.133

当您使用[openrecordset](http://msdn.microsoft.com/en-us/library/ms190312.aspx)时，您可以`[Sheet1$C16:C28]`在查询参数中指定表的范围

```
INSERT INTO [table1] (Names)
SELECT *
FROM OPENROWSET 
('Microsoft.Jet.OLEDB.4.0', 
  'Excel 8.0;Database=C:\Foo.xls;HDR=NO', 
   'select * from [Sheet1$C16:C28]') AS t 
```

# android - 如何创建布局动画？

> ID：14038022
> 
> 赞同：1
> 
> 时间：2012-12-26T08:40:29.347
> 
> 标签：android, android-animation

**我有 4 个布局，当我点击蓝色时 - 其他布局必须慢慢调整大小，如何在附加图像中看到**

![**在此处输入图片描述**](../Images/76cf29b687edfe56be294dee0a283eed.png) 我第一次做这些事情。如果有人可以帮助我并给我一个例子，我将不胜感激

# ipad - 下一页单击基于页面的应用程序

> ID：14038023
> 
> 赞同：0
> 
> 时间：2012-12-26T08:40:32.450
> 
> 标签：ipad, ios6, uibutton

在我的基于页面的应用程序中，我想在单击按钮时执行下一页操作？是否可以使用基于页面的应用程序中的按钮进入下一页？请帮我解决这个问题

编辑：我的应用程序（如故事书）在翻下一页时在页面中显示一组图像，我想通过单击显示 nxt 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:12:25.897

1.  在您的应用程序中，该类符合`UIPageViewControllerDataSource`协议，在根视图控制器中创建此类的一个对象，假设`ModelController`该对象为`_modelController`.
2.  然后在根视图控制器中，只需将两个`UIButton`连接它们与适当`IBAction`的方法假设为上一个按钮`previousClick:`和下一个按钮`nextClick:`。
3.  现在每种方法的代码如下：

    `-(IBAction)previousClick:(id)sender { [_modelController pageViewController:self.pageViewController viewControllerBeforeViewController:_dataViewController]; }`

    `-(IBAction)nextClick:(id)sender { [_modelController pageViewController:self.pageViewController viewControllerAfterViewController:_dataViewController]; }`

在这里，我假设`pageViewController`是类型的一个对象，`UIPageViewController`并且是根视图控制器的声明和合成变量之一，对于`_dataViewController`包含`UIViewController`一个`UIImageView`在根视图上呈现图像的变量也是如此。

**编辑**

这也可以通过使用`DataViewController`for 来完成，所有逻辑都必须移动到该视图控制器，因此必须需要对`UIPageViewController`and的引用`ModelController`。

# ruby-on-rails - make 'spree install' 在 Gemfile 中添加 http 链接

> ID：14038029
> 
> 赞同：1
> 
> 时间：2012-12-26T08:40:59.580
> 
> 标签：ruby-on-rails, github, ruby-on-rails-3.2, spree

当我做：

```
spree install 
```

它在我的 Gemfile 中添加了这两行。

```
gem 'spree_gateway', :github => 'spree/spree_gateway'
gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => 'edge' 
```

后来它尝试进行**捆绑安装**，我收到此错误

```
github.com[0: 207.97.227.239]: errno=Connection refused
fatal: unable to connect a socket (Connection refused)
git://github.com/spree/spree_gateway.git (at master) 
```

这是因为我的网络代理不允许我连接**git://**但它可以连接**http://**

如何更改 spree 添加的代码以使其与**http**连接或如何使 rails 连接**：github => 'spree/spree_auth_devise'**与**http**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:53:30.253

我猜你可能需要稍微改变一下语法，如果你背后的代理..

`gem 'spree_gateway', :git => 'http://github.com/spree/spree_gateway.git'`.

请检查这是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:39:59.223

如果您使用 rvm，您的 gem 将安装在您的主目录`.rvm`文件夹下。如果您使用的是系统 ruby​​，它们将位于系统 ruby​​ 的位置下，可能是`/usr/local/bin`. 在任何一种情况下，通过在具有子文件夹的适当位置下查找 spree 来找到 spree gem 文件夹`lib/ruby/gems/1.9.1/gems`。

找到后，找到文件`cmd/lib/spree_cmd/installer.rb`. 编辑：似乎你在这里找到了你的：`/home/me/.rvm/gems/ruby-1.9.3-p125/gems/spree_cmd-1.3.0/lib/spree_cmd`。您必须在这里进行实验，因为我不确切知道它是如何工作的，但我会使用`add_gem`函数中的行。尝试改变

```
gem :spree, @spree_gem_options 
```

到

```
gem :spree, :git => 'http://github.com/spree/spree.git' 
```

# android-linearlayout - Android 线性布局

> ID：14038039
> 
> 赞同：0
> 
> 时间：2012-12-26T08:41:57.683
> 
> 标签：android-linearlayout

```
 <LinearLayout></LinearLayout> 
```

在线性布局中，视图会从上到下添加，我们可以覆盖并使其从下到上添加视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:48:34.823

不能，您可以做的是更改布局并使用RelativeLayout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:52:06.527

不，您不能以您希望的方式覆盖线性布局。您可以使用相对布局。您可以检查在线性布局中是否没有可用的选项，我已经尝试过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:13:49.693

太简单了，只需拖动您使用的项目并按照您想要的方式排列它们，不要以任何方式限制RelativeLayout

# asp.net-mvc - 实施 DAL 和 BOL

> ID：14038042
> 
> 赞同：0
> 
> 时间：2012-12-26T08:42:10.863
> 
> 标签：asp.net-mvc, design-patterns, architecture, repository-pattern, data-access-layer

我正在使用 MVC 3，但在使用实体框架时遇到了问题，所以我试图了解实现我自己的 DAL 的最佳方法是什么。我在我的系统中管理几个主要实体：用户、部门、日历等...我试图了解使用这种分层架构的最佳实践。

1.  DAL 应该实现只返回 DataTables 或 DataSets 的方法，还是应该熟悉模型\业务对象（用户、部门日历等）？

2.  它应该包含代表不同模型\业务对象的类吗？

3.  我应该将不同的存储库类放在哪里，它们也是 DAL 的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:01:47.813

> 1) DAL 是否应该实现只返回 DataTables 或 DataSets 的方法

绝对不。DataTables 和 DataSets 是过去的产物。DAL 方法应获取/返回您的 DAL 实体。例如，如果您使用的是实体框架，那么这些将是 EF 为您创建的自动生成的类。或者，如果您使用的是 EF Code First，这些类将是您编写的映射到 SQL 表的类

> 2）它是否应该包含代表不同模型\业务对象的类？

如 1) 中所述，DAL 层应包含映射到 SQL 表的实体以及存储库接口的实现。存储库接口定义了这些实体的操作。在 DAL 层内，您将为实体框架实现此接口（如果这是您打算使用的）。在这些方法中，您将使用 DataContext 对您的实体执行不同的操作。

> 3）我应该将不同的存储库类放在哪里，它们也是 DAL 的一部分吗？

您应该将它们放在与数据访问类相同的程序集中。

然后，ASP.NET MVC 应用程序将使用 DAL 层。您的控制器将简单地将存储库接口作为构造函数参数，并在您将在其上调用各种方法的操作中。然后，您将配置您选择的依赖注入框架，以将此存储库接口的特定实现注入控制器。此实现将是特定于实体框架的实现。

但无论您做什么，都不要忘记在 ASp.NET MVC 应用程序本身内定义视图模型。这些可以放在 Models 文件夹中。视图模型是将传递给视图的类。典型的控制器操作将使用存储库获取一个或多个域实体，将这些实体映射到您为特定视图定义的单个视图模型，最后将视图模型传递给视图。当然，这反过来也可以：控制器操作将视图模型作为视图的操作参数，将此视图模型映射到一个或多个域实体，并从存​​储库调用一个或多个方法，将这些域实体传递给它们。

# mysql - 杀死Mysql中的睡眠进程？

> ID：14038049
> 
> 赞同：4
> 
> 时间：2012-12-26T08:42:43.313
> 
> 标签：mysql, linux

谁能告诉我如何杀死所有的睡眠进程？

我搜索了一下，发现我们可以通过命令来完成

```
mk-kill --match-command Sleep --kill --victims all --interval 10 
```

我连接了数据库服务器（Linux），但我发现找不到命令的消息。

我尝试通过 MYSQL 管理员连接，但没有说找不到命令，也没有执行查询，只是说你有一个 SQl 错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-08T07:37:29.280

以管理员身份登录 Mysql：

```
 mysql -uroot -ppassword; 
```

而不是运行命令：

```
mysql> show processlist; 
```

你会得到类似下面的东西：

```
+----+-------------+--------------------+----------+---------+------+-------+------------------+
| Id | User        | Host               | db       | Command | Time | State | Info             |
+----+-------------+--------------------+----------+---------+------+-------+------------------+
| 49 | application | 192.168.44.1:51718 | XXXXXXXX | Sleep   |  183 |       | NULL             ||
| 55 | application | 192.168.44.1:51769 | XXXXXXXX | Sleep   |  148 |       | NULL             |
| 56 | application | 192.168.44.1:51770 | XXXXXXXX | Sleep   |  148 |       | NULL             |
| 57 | application | 192.168.44.1:51771 | XXXXXXXX | Sleep   |  148 |       | NULL             |
| 58 | application | 192.168.44.1:51968 | XXXXXXXX | Sleep   |   11 |       | NULL             |
| 59 | root        | localhost          | NULL     | Query   |    0 | NULL  | show processlist |
+----+-------------+--------------------+----------+---------+------+-------+------------------+ 
```

您将看到不同连接的完整详细信息。现在您可以终止休眠连接，如下所示：

```
mysql> kill 55;
Query OK, 0 rows affected (0.00 sec) 
```

# javascript - 如何使用javascript实现轮播？

> ID：14038053
> 
> 赞同：-1
> 
> 时间：2012-12-26T08:42:52.433
> 
> 标签：javascript, jquery, flash, web

![图片](../Images/ee9e3bf7fb8f38aee32b02d779b0b7ec.png)！图片从左到右滚动，当它悬停在区域中间时，它会变大，当它经过中间位置时，它会越来越小并消失。有谁知道如何使用 javascript 来实现这项工作？任何参考将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:57:03.237

您实际上是在要求某人向您解释 Carousel 的许多方面是如何工作的。该级别详细信息的最佳选择是让您找到现有实现之一并对其进行分析。

从概念上讲，轮播行为包括：

1.  加载许多图像。
2.  添加事件处理程序以响应鼠标事件。
3.  检测某些鼠标事件并触发滚动动作的开始。
4.  创建动画以显示平移图像并更改其大小的运动。
5.  有几种不同的动画和改变大小的方法。这可以使用 CSS3 或使用 jQuery 的动画库或使用纯 JavaScript 中的计时器来完成，同时操纵图像的位置和缩放大小。
6.  当其他图像向外滚动时，将新图像旋转到视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:03:22.593

我想你可以在jQuery中使用animate函数。下面是我很久以前写的一段代码。但是你应该改变一些。'3000'表示毫秒。$(function(){ $("body").click(function(){ $("#panel").animate({left:"500px", height:"200px"},3000) .animate({top :"200px",height:"100px"},3000) .animate({left:"0px",height:"200px"},3000) .animate({top:"0px",height:"100px"}, 3000) }); });

# database - 唯一识别一个人的逻辑

> ID：14038057
> 
> 赞同：1
> 
> 时间：2012-12-26T08:43:19.987
> 
> 标签：database, database-design, unique

我正在开发一个将在国家层面实施的医疗 php 应用程序。它将被多家医院使用，患者记录将被集中，即每家医院都将访问患者记录并将其添加到同一个数据库中。

我希望应该只有 1 个患者的记录，没有任何重复。简单地说，没有医院可以再次输入同一患者的第二条记录，但为了使其成为可能，我需要知道我们应该使用哪些标准，哪些标准将在患者的整个生命周期内保持不变。在我的脑海中只有 2 个，即姓名和出生日期。

还有哪些其他标准？我不想使用手机号码和电话号码等。而且婴儿不能拥有它。我需要适用于每位患者且独一无二的标准。

请给我您的建议或任何其他更好的方法来实现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:41:49.953

我会试一试，因为我参与了一些数据匹配和验证，虽然不是专门在医疗行业。你没有指定一个特定的国家，只是提到了亚洲，所以我将使用我的祖国澳大利亚的一个例子，因为我熟悉规则，我相信这同样适用于许多亚洲国家：

*   我们有一个用于医疗保健的唯一医疗保险号码，但这不是强制性的，虽然免费/折扣医疗意味着我预计 99% 以上的人会有一个您不能依赖的号码。

*   还有一个税号，即使你工作也不是强制性的，而且从未工作过的人通常不会有一个。

*   您可能正在与不是居民的外国人打交道。

*   驾驶执照当然不是获得医疗保健的强制性要求。

*   “没有固定地址”是完全合法的。再加上有些人会撒谎来接受治疗和重复用药等。更不用说很多人经常搬家了。

*   更改姓名在结婚/离婚的情况下很常见，除非出于非法目的，否则有人可以仅仅因为他们不喜欢原来的姓名而更改姓名。更不用说人们使用常见的替代品来代替 Jim 和 James 之类的东西。

*   输入错误在大型数据集上非常常见。

简而言之，我认为您要求的“完美”方案是不可能的。您可以做的最好的事情是应用加权规则来查找可能的重复项。例如，相同的姓名/出生日期/出生地点是不太可能但可能发生的事件，因此向数据输入操作员显示可能重复的警告，并让他们查看可能重复的详细信息。即使像驾驶执照号码这样应该唯一的东西也可能表明原始条目只是有数据输入错误，而不是新的副本。

根据我的经验，最好的事情是一份报告，其中列出了可能的重复项，这些重复项必须由链上更高的人进行审查，并为他们提供一个简单的选项来合并重复项。然后，您可以开始使用更模糊的正则表达式，这些表达式会抛出一些误报，当人们审查它们时可以忽略这些误报。您还可以随着时间的推移优化模型以获得最佳匹配结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:45:42.170

您需要使用一些全国性的 ID。比如护照ID，或者健康保险号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:48:46.370

可以尝试结合姓名、出生日期、血型、出生地等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:51:26.683

带有国家/地区的社会保险号。

# html - the_content() wordpress 创建不需要的顶部空间

> ID：14038061
> 
> 赞同：0
> 
> 时间：2012-12-26T08:43:42.517
> 
> 标签：html, css, wordpress

我为这个基本问题道歉；一直试图自己解决这个问题，但仍然失败。

1) 每当我`the_content()`在 a`div`或任何标记（如`<h1`>）中添加时，它都会在顶部创建一个空格；我尝试添加它包含`margin:0; padding:0;`的位置。`markup``the_content()`

2）添加`remove_filter( 'the_content', 'wpautop' );`到我的functions.php

想贴出源码，可惜太长了。但我想要的基本布局如下所示。我只想删除`title`div 和`content`div 之间的空间。

```
HTML -----------------------------------------------------  
 <div id="main">
   <div id="title"> <?php the_author() ?> </div>

   <div id="content">  <?php the_content(); ?> </div>

 </div>

CSS -----------------------------------------------------

 #title {
    width:100%;
    height:100%;
    padding:0;
    margin:0;
    }
 #content {
    background:#dcdcdc;
    width:100%;
    padding:0;
    margin:0;
    }
 #content h1 {
    font-size:250%;
    text-transform:uppercase;
    padding:0;
    margin:0;
    } 
```

结果如下所示：

![图片](../Images/519bb44a8fcad0aacfc59c21d8ac73b1.png)

编辑：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:05:31.003

多余的空间必须是由额外的 P、BR、其他元素或边距或填充，或者导致边距错误的旧浏览器造成的。如果你能告诉我们哪个问题是罪魁祸首，你会为我们提供更多帮助。查看 HTML 页面的源代码。元素之间是否有额外的 P 或 BR？

如果没有，那么问题可能是 CSS 中的 !important 关键字覆盖了您自己的样式。

# javascript - 将 Html 代码从 Controller 传递到 JSP

> ID：14038066
> 
> 赞同：0
> 
> 时间：2012-12-26T08:44:17.430
> 
> 标签：javascript, jsp, spring-mvc, uiviewcontroller, validation

我想将 html 数据从 Controller 传递到 JSP。

我在 JSP 上使用`Spring MVC`并`'Spring Validator'`填充消息：

```
@Override
    public void validate(Object target, Errors errors) {
//Some processing     
errors.rejectValue("fileData", "errors.csi.invalidurl", new Object[] { url }, null);
} 
```

消息属性

```
errors.csi.invalidurl=File contained invalid URLs. Please find list of invalid URLs <a href="{0}"> here</a>. 
```

对应的JSP是：

```
<div class="row">
<label for="upload-file"><spring:message code="csi.label.uploadfile"/></label><form:input path="fileData" type="file"/>
<form:errors path="fileData" cssClass="error"/>
</div> 
```

我能够传递文本数据但无法传递 href 链接。怎么可能做到？

我试过

```
String url = "javascript:getImageValidationPresignedURLForDownload('8162')"; to be passed as text data but it is displayed as text.

URLs <a href="javascript:getImageValidationPresignedURLForDownload('8162')"> here</a>. 
```

我究竟做错了什么？怎么可能做到？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:32:07.563

尝试

```
<form:errors path="fileData" cssClass="error" htmlEscape="false" /> 
```

# android - runOnUiThread 未在 AsyncTask 中运行

> ID：14038068
> 
> 赞同：7
> 
> 时间：2012-12-26T08:44:25.773
> 
> 标签：android, multithreading

我正在编写一个程序，该程序**从服务器（使用 JSON）从 MySql 获取数据**并相应地 **更新 UI**，

我正在使用**AsyncTask**从服务器获取两种类型的数据

```
1) Bubble Answers
2) Comments 
```

parseBubbleAnswers 方法成功运行并更新 UI，但 parseComments 类是 AsyncTask，在 doInBackground 中调用 parseComments 方法，没有运行`runOnUiThread(new Runnable() { run() });`

谁能帮我解决这个问题

这是我的代码：

```
public class FetchServer extends Activity
{
    protected void onCreate(Bundle savedInstanceState) 
    {
        String photoId = "1"; // photo id for which the data is fetched
        checkBubbleData(photoId); // which call AsyncTask - 2 differnt calls
    }
    public void checkBubbleData(String photoId)
    {
        new parseBubbleAnswers().execute(photoId); // to fetch bubble answers
        new parseComments().execute(photoId); // to fetch comments
    }
    class parseBubbleAnswers extends AsyncTask<String, Integer,String> 
    {

        @Override
        protected String doInBackground(String... params) 
        {
            // TODO Auto-generated method stub
            Looper.prepare();
            parseBubbleAnswers(); // which has runOnUiThread(new Runnable() which updates (successfully !) the UI
            return null;
        }
    }
    class parseComments extends AsyncTask<String, Integer,String> 
    {

        @Override
        protected String doInBackground(String... params) 
        {
            // TODO Auto-generated method stub
            Looper.prepare();

            String parseComReturn = parseComments();
            if(parseComReturn=="end")
            {
                commentBuilder(); // which will update UI after fetch data by parseComments() method
            }
        }
    }
    public void commentBuilder()
    {
        runOnUiThread(new Runnable() // while debugging, it comes here, on Step Over it stick for 2 times and then move at the end of method without error 
        {       
            public void run() 
            {
                // update UI code
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T08:47:40.160

`runOnUiThread`是 的一个方法`Activity`，`AsyncTask`没有引用 Activity。

但是，AsyncTask 已经在 UI 线程上运行，并且设计就是为了做到这一点。

只需处理`onPostExecute`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T09:15:42.040

**试试这种方式：**

首先创建一个`Handler`：

```
Handler mHandler = new Handler(); 
```

**改变这个，**

```
public void commentBuilder()
    {
        runOnUiThread(new Runnable() // while debugging, it comes here, on Step Over it stick for 2 times and then move at the end of method without error 
        {       
            public void run() 
            {
                // update UI code
            }
        });
    } 
```

**和，**

```
public void commentBuilder()
    {
        new Thread(new Runnable() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
                while (isRunning) {
                    try {
                       // Thread.sleep(10000);
                        mHandler.post(new Runnable() {

                            @Override
                            public void run() {
                                // TODO Auto-generated method stub
                                // Write your code here to update the UI.                               
                            }
                        });
                    } catch (Exception e) {
                        // TODO: handle exception
                    }
                }
            }
        }).start();
    } 
```

完成 UI 后，通过此停止线程，

```
isRunning = false; 
```

**编辑 ：**

尝试以这种方式使用异步任务：

```
class parseComments extends AsyncTask<String, Integer,String> 
    {
        protected String doInBackground(String... params) {
            String parseComReturn = parseComments();
            return parseComReturn;
        }

        protected void onPostExecute(String result) {
            if(result.equals("end"))
            {
                commentBuilder();
            }
        }
    } 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-14T14:16:53.733

我遇到了类似的问题。

只需将 Activity 类的引用传递给 parseComments 类即可。

```
class parseComments extends AsyncTask<String, Integer,String>{

 Activity activity;
 public parseComments(Activity activity){
  this.activity = activity;
 }
} 
```

之后，您可以使用 runOnUiThread 作为

```
activity.runOnUiThread(new Runnable(){
  @Override
  public void run(){

  }
}); 
```

它只适用于 Activity 类。不是上下文类。

# ruby-on-rails - 如何将 file_field_tag 转换为链接？

> ID：14038069
> 
> 赞同：0
> 
> 时间：2012-12-26T08:44:34.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload

如何转换通常的输入字段标签`<%= file_field_tag :file, multiple: true %>`，例如![普通输入字段标签](../Images/1a533333a8c875f2d2e4803c3c387a25.png)

进入链接：

![github](../Images/e6749e1d3df17284f5f9971b0bc6e394.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:20:33.447

这对我有用：

HTML：

```
<input type='file' id='file' name='file' />
<a href="#" id='link-upload'>Upload</a> 
```

JS：

```
<script type="text/javascript">
  $(function(){
    $('#link-upload').click(function(e){
      e.preventDefault();
      $('#file').click();
    });
  });
</script> 
```

CSS：

```
#file{ width:0; height:0; } 
```

确保添加 jQuery：

```
<script type="text/javascript">
  document.write("\<script src='http://code.jquery.com/jquery-latest.min.js' type='text/javascript'>\<\/script>");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-14T02:37:13.697

这对我有用：

**HTML**

```
<a class="btn-input">seleccionándolos<input type="file" multiple="" id="comment-images" /></a> 
```

**CSS**

```
.btn-input {
  overflow: hidden;
  position: relative;
  cursor: pointer;
}
.btn-input input[type="file"] {
  height: 30px;
  cursor: pointer;
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 2;
  opacity: 0.0;
  /* Standard: FF gt 1.5, Opera, Safari */
  filter: alpha(opacity=0);
  /* IE lt 8 */
  -ms-filter: "alpha(opacity=0)";
  /* IE 8 */
  -khtml-opacity: 0.0;
  /* Safari 1.x */
  -moz-opacity: 0.0;
  /* FF lt 1.5, Netscape */ 
} 
```

[这里的例子](http://embed.plnkr.co/atyuBnVNktl8YSfdfPJT/preview)

# c# - 捕捉状态的不同视图（Metro 应用程序）

> ID：14038070
> 
> 赞同：1
> 
> 时间：2012-12-26T08:44:47.550
> 
> 标签：c#, .net, xaml, microsoft-metro

我正在制作一个简单的应用程序，但在不同的状态（完整、快照等）方面遇到了一些麻烦。

下面是我的应用在横向全屏视图中的外观。如您所见，它有 2 个网格。一个左对齐，一个右对齐：

![在此处输入图像描述](../Images/330335badb43c23701c7fd3996e5d0c6.png)

现在，当用户将我的应用程序向左或向右对齐时，我只希望第二个网格（右侧：Grid TWO）在对齐模式下可见，如下所示：

![在此处输入图像描述](../Images/db76284cad0239f258793fb08e253aa5.png)

我们怎样才能做到这一点？

我已经尝试了几件事，但我当前的代码也不起作用。我知道这是错误的，但无论如何都是这样：

```
<!-- Back button and page title -->
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
    <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
</Grid>

<Grid Grid.Row="1" Margin="120, 30, 0, 0" HorizontalAlignment="Stretch">
    <ListBox x:Name="theList" HorizontalAlignment="Left" Width="240" VerticalAlignment="Stretch" BorderBrush="{x:Null}" Background="{x:Null}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <ListBoxItem Content="{Binding Name, Mode=TwoWay}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
    <TextBox x:Name="theNote" Text="{Binding ElementName=theList, Path=SelectedItem.Content, Mode=TwoWay}" AcceptsReturn="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="245,0,10,0" BorderBrush="{x:Null}" BorderThickness="0" />
</Grid>

<VisualStateManager.VisualStateGroups>

    <!-- Visual states reflect the application's view state -->
    <VisualStateGroup x:Name="ApplicationViewStates">
        <VisualState x:Name="FullScreenLandscape"/>
        <VisualState x:Name="Filled"/>

        <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
        <VisualState x:Name="FullScreenPortrait">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>

        <!-- The back button and title have different styles when snapped -->
        <VisualState x:Name="Snapped">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:18:35.957

您需要以下内容：

```
<VisualState x:Name="Snapped">
            <Storyboard>
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Grid1" Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                </ObjectAnimationUsingKeyFrames> 
```

您会看到我们将 Grid1 设置为隐藏，并将 Grid2 设置为特定宽度。当页面移动到“Snapped”状态时会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:26:59.933

尝试将其添加到 visualstate = 'snapped'

```
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="GridOne" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:54:22.300

代码片段中的第二个网格的左边距为 120 像素。其中的文本有 245 像素的左边距，将其放置在列表的右侧。嵌套对象的边距将是相加的，因此文本的有效左边距为 365 像素（甚至不考虑嵌套的其他内容）。除非您在将页面放置在快照视图中时还更改了这些边距值，否则文本将太靠右而无法看到。（回想一下，快照视图只有 320 像素宽！​​）

这是页面上两个网格的非常简化的示例。请注意，Grid2 的左边距较大，可将其放置在 Grid1 的右侧。网格内的文本框没有左边距。

```
 <Grid x:Name="Grid1" Grid.Row="1" Margin="120,30,0,0" Width="240" HorizontalAlignment="Left">
        <TextBox x:Name="theFirstNote" Text="This is grid 1." AcceptsReturn="True" HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch" Margin="0,0,10,0" BorderBrush="{x:Null}" BorderThickness="0" />
    </Grid>

    <Grid x:Name="Grid2" Grid.Row="1" Grid.Column="1" Margin="370,30,0,0" HorizontalAlignment="Stretch">
        <TextBox x:Name="theSecondNote" Text="This is grid 2." AcceptsReturn="True" HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch" Margin="0,0,10,0" BorderBrush="{x:Null}" BorderThickness="0" />
    </Grid> 
```

当 VisualState 更改为 Snapped 时，我们不仅要更改 Grid1 的可见性，还必须更改 Grid2 的边距，使其实际可见：

```
 <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Grid1" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Grid2" Storyboard.TargetProperty="Margin">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="10,10,10,10"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState> 
```

# git - Git拉致命：内存不足，malloc失败

> ID：14038074
> 
> 赞同：11
> 
> 时间：2012-12-26T08:45:24.840
> 
> 标签：git, memory, clone, bitbucket, git-clone

我在[https://bitbucket.org/上有一个仓库](https://bitbucket.org/)

几天前错误地将大量图像文件推送到存储库中。然后文件通过另一个推送被删除。在那之后回购工作正常，但是今天当我尝试从回购中提取时：

```
$ git pull
Password for 'https://repo@bitbucket.org': 
warning: no common commits
remote: Counting objects: 4635, done.
remote: Compressing objects: 100% (1710/1710), done.
fatal: Out of memory, malloc failed (tried to allocate 4266852665 bytes)
fatal: index-pack failed 
```

我试过：
1）`git config --global pack.windowMemory 1024m`
2）

```
$ git count-objects -v
count: 9
size: 48
in-pack: 4504
packs: 1
size-pack: 106822
prune-packable: 0
garbage: 0 
```

没有运气，不知道下一步我应该采取什么行动......
回购的大小应该是大约10-20m的代码。我接下来应该采取什么行动？

**更新 1**
我执行了这些命令：

```
$ git filter-branch --index-filter 'git rm --cached --ignore-unmatch public/images/*' HEAD
Rewrite a1c9fb8324a2d261aa745fc176ce2846d7a2bfd7 (288/288)
WARNING: Ref 'refs/heads/master' is unchanged 
```

和

```
$ git push --force --all
Counting objects: 4513, done.
Compressing objects: 100% (1614/1614), done.
Writing objects: 100% (4513/4513), 104.20 MiB | 451 KiB/s, done.
Total 4513 (delta 2678), reused 4500 (delta 2671)
remote: bb/acl: ayermolenko is allowed. accepted payload.
To https://repo@bitbucket.org/repo.git
 + 203e824...ed003ce demo -> demo (forced update)
 + d59fd1b...a1c9fb8 master -> master (forced update) 
```

拉然后工作正常：

```
$ git pull
Already up-to-date. 
```

但是当我尝试克隆回购时，我得到了

```
~/www/clone$ git clone git@bitbucket.org:repo.git
Cloning into 'clone'...
remote: Counting objects: 5319, done.
remote: Compressing objects: 100% (1971/1971), done.
fatal: Out of memory, malloc failed (tried to allocate 4266852665 bytes)
fatal: index-pack failed 
```

**更新 2**
遗憾的是，我没有找到所有的大文件。有些还剩下。所以我要求支持杀死回购的所有日志

**更新 3**
最后我不得不杀死旧的并创建新的回购。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-17T18:45:53.653

在我的情况下，这就像试图在没有交换的 1GB RAM 盒子中提取一个大仓库一样简单。

我按照本教程[https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04](https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04)在服务器上创建了一些交换空间并开始工作。

**他们“更快”的方式：**

```
sudo fallocate -l 4G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile 
```

您可以通过添加到 /etc/fstab 使这些更改永久化：

```
/swapfile   none    swap    sw    0   0 
```

他们建议添加到 /etc/sysctl.conf：

```
vm.swappiness=10
vm.vfs_cache_pressure = 50 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T10:19:10.020

如果您是唯一使用此 repo 的人，您可以按照“[如何从 Git 中的提交历史记录中清除大文件？](https://stackoverflow.com/questions/2100907/how-to-purge-a-huge-file-from-commits-history-in-git) ”中描述的 git filter-branch 选项进行操作。

更简单的选择是将 repo 克隆到旧提交，然后强制推送它，如“[`git-filter-branch`删除大文件](https://stackoverflow.com/a/4444139/6309)”中所述。

任何一个都会迫使任何合作者将他/她自己的本地存储库重置为您正在发布的新状态。同样，如果您是唯一的合作者，这不是问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T08:50:49.787

即使大图像文件在被推送后被删除，它们也会保留在`git`历史记录中。

我建议从 git 历史记录中强行删除它们（我认为这是可能的，但它涉及一个我不知道的微妙过程）。

或者，在错误添加的文件之前拉取存储库，修补存储库以制作相关的小补丁，克隆它，然后使用它（可能带有转储/恢复）作为您的主 git。

^(我不太清楚细节，但我确实读过它是可能的)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-16T18:48:42.830

我最近在我的一个存储库中遇到了这个问题。类似的错误，暗示某个地方的仓库中隐藏了一个大文件。

```
Cloning into 'test_framework'...
remote: Counting objects: 11889, done.
remote: Compressing objects: 100% (5991/5991), done.
Receiving objects:  66% (7847/11889), 3.22 MiB | 43 KiB/sremote: fatal: Out of memory, malloc failed     (tried to allocate 893191377 bytes)
remote: aborting due to possible repository corruption on the remote side.
fatal: early EOFs:  66% (7933/11889), 3.24 MiB
fatal: index-pack failed 
```

为了解决这个问题，我临时创建了一个大型交换驱动器（超过服务器要求的 893191377 字节），遵循*方法 2* 从这里开始：[http ://www.thegeekstuff.com/2010/08/how-to-add-交换空间/](http://www.thegeekstuff.com/2010/08/how-to-add-swap-space/)

这使我能够成功克隆然后删除罪魁祸首（有人签入了 sql 转储文件）。您可以使用：

```
git filter-branch --tree-filter 'rm -rf dumpfile.sql' HEAD 
```

从 git repo 中删除文件。

# ios - iPhone 5 屏幕高度错误

> ID：14038077
> 
> 赞同：3
> 
> 时间：2012-12-26T08:45:41.907
> 
> 标签：ios, ios5

我在 3.5 英寸屏幕上开发了一个应用程序，现在我为 4 英寸屏幕做了一个新的故事板，我喜欢在 appdelegate 上的故事板之间切换，我记录了屏幕高度，它给了我 480.00000 检查它：

```
NSLog(@"Checking Screen Size");
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone)
{    
    NSLog(@"On iPhone");
    CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

    if (iOSDeviceScreenSize.height == 480)
    {   (diagonally measured)
        NSLog(@"iPhone 4: %f", iOSDeviceScreenSize.height);
}
if (iOSDeviceScreenSize.height == 568)
{   
        NSLog(@"iPhone 5: %f", iOSDeviceScreenSize.height);
} 
```

当我的手机是 iPhone 5 时，NSLog 给了我 480.0000

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T08:53:24.050

您需要`Default-568h@2x.png`在应用程序中添加一个“高大”的启动图像以表明您支持新的显示尺寸，否则您将在兼容模式下运行（而不是全屏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T08:52:01.407

您应该向项目添加一个新的默认图像`Default-568h@2x.png`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T08:53:46.370

这很简单，只需将**`Default-568h@2x.png`**iPhone 5 的默认图像添加到项目中即可。

# java - JSON嵌套类数据绑定

> ID：14038084
> 
> 赞同：4
> 
> 时间：2012-12-26T08:46:13.667
> 
> 标签：java, json, jackson

`{ "type":"cat", "animal":{"name":"cat"} }`

动物是一个`abstract class`。猫和狗是`subclass`。

现在我正在尝试`convert json to java object`并想要使用“类型”来获取子类。

但是类型字段是超出动物的列。

提前致谢 ：）

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property= "type")
@JsonSubTypes({ @Type(value = Cat.class, name = "cat"),
    @Type(value = Dog.class, name = "dog") })
abstract class Animal {
    public String name;
}

class Cat extends Animal {
public String name;
}

class Dog extends Animal {
public String name;
} 
```

问题是类型已超出动物{}。

如果类型在动物中，则代码将起作用。{} 但它不是）：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T09:06:06.770

这是可能的，但 JSON 中的类型应该看起来像`"type":"com.test.Cat"`（完全限定名称）
抽象类

```
@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="type")
public abstract class AAnimal 
{
} 
```

子类

```
public class Cat extends AAnimal
{
   public String name;
} 
public class Dog extends AAnimal
{
   public String name;
} 
```

现在，对于 json

```
"{ \"type\":\"com.test.Dog\", \"name\":\"gav-gav\" }" 
```

这将是`Dog`实例
和

```
"{ \"type\":\"com.test.Cat\", \"name\":\"mew-mew\" }" 
```

它将是`Cat`实例
**EDIT**
在这种情况下使用`JsonTypeInfo.As.EXTERNAL_PROPERTY`. 例子

```
public class Container 
{
   private String type;

   private AAnimal animal;

   public String getType()
   {
      return type;
   }

   public void setType(String type)
   {
      this.type = type;
   }

   public AAnimal getAnimal()
   {
      return animal;
   }

   @JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.EXTERNAL_PROPERTY, property="type")
   public void setAnimal(AAnimal animal)
   {
      this.animal = animal;
   }
} 
```

动物课

```
public abstract class AAnimal 
{
   public String name;
}
public class Cat extends AAnimal
{
}
public class Dog extends AAnimal
{
} 
```

为了

```
"{\"type\":\"com.test.Cat\", \"animal\" : {\"name\":\"cat\" }}" 
```

它运作良好。
**PS。** 您也可以使用`use=JsonTypeInfo.Id.MINIMAL_CLASS`，在这种情况下，您只能使用完全限定名称
**EDIT2的一部分**

```
 @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.EXTERNAL_PROPERTY, property="type")
   @JsonSubTypes({ @Type(value = Cat.class, name = "cat"), @Type(value = Dog.class, name = "dog") })
   public void setAnimal(AAnimal animal)
   {
      this.animal = animal;
   } 
```

适用于

```
"{\"type\":\"cat\", \"animal\" : {\"name\":\"cat\" }}" 
```

# vbscript - ExitAction V/s 退出函数

> ID：14038085
> 
> 赞同：0
> 
> 时间：2012-12-26T08:46:15.713
> 
> 标签：vbscript, automation, qtp

我想知道以下代码之间的区别：

```
Function foo()
  'Do something
  ExitAction(1)
  'Do something 2
  Exit Function
End Function 
```

我想知道是否**`Something code 2`**会执行该操作以及背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:04:24.597

QTP`Action`可以包含多个，`Function`并且`Action`可以从测试中调用它以使用此操作中编写的任何函数。

现在关于你的代码块

当您从动作本身退出时，您也会从函数“foo”中退出。然后执行流程将返回到调用此动作的测试。

`Something 2`代码块不会被执行。

# regex - 使用 sed 正则表达式替换特定字符串

> ID：14038087
> 
> 赞同：0
> 
> 时间：2012-12-26T08:46:18.563
> 
> 标签：regex, macos, unix, sed

我一直面临将正则表达式与 sed 一起使用的问题。我有一个像这样的字符串：

```
Call stack: [thread 0xac0aaa28]: | start | main main.m:37 | UIApplicationMain | GSEventRun | GSEventRunModal | CFRunLoopRunInMode | CFRunLoopRunSpecific | __CFRunLoopRun | __CFRunLoopDoSource1 | __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ | mshMIGPerform | _XCopyAttributeValue | _AXXMIGCopyAttributeValue | _copyAttributeValueCallback | -[NSObject(AXPrivCategory) accessibilityAttributeValue:] | -[UITableViewCellAccessibilityElement _accessibilityIsTableCell] | -[UITableViewCellAccessibilityElement tableViewCell] | -[UITableViewAccessibility(Accessibility) accessibilityCellForRowAtIndexPath:] | -[UITableView(UITableViewInternal) _createPreparedCellForRowAtIndexPath:] | -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] | -[MailViewController tableView:cellForRowAtIndexPath:] | +[NICellFactory tableViewModel:cellForTableView:atIndexPath:withObject:] NICellFactory.m:89 | +[NICellFactory cellWithClass:tableView:object:] NICellFactory.m:67 | -[SwipableTableViewCell shouldUpdateCellWithObject:] | -[SwipableTableViewCell updateCellWithObject:] | -[ThreadCellFrontView updateCellWithObject:] | -[ThreadSummaryView updateWithNugget:] | -[JavaUtilLinkedList init] LinkedList.m:49 | -[JavaUtilLinkedList initJavaUtilLinkedList] LinkedList.m:40 | +[NSObject alloc] | +[NSObject allocWithZone:] | _objc_rootAllocWithZone | class_createInstance | calloc | malloc_zone_calloc 
```

其中有 main.m:37 |、LinkedList.m:95 |、NICellFactory.mm:89 | 等实例 等，即在文本伴侣中，我可以使用正则表达式匹配这些出现

```
[a-zA-z]+[.][m]+[:]+[0-9]+[ |]+ 
```

现在，当我尝试在 sed 中使用

```
sed 's/\[a-zA-z]+[.][m]+[:]+[0-9][ |]+/ /g' 
```

Sed 似乎并没有取代这些实例。我也尝试过使用反冲，即

```
sed 's/\[a-zA-z\]+\[\.\]\[m\]+\[:\]+\[0-9\]+\[ |\]+/ /g' 
```

仍然 sed 不能取代这种情况。

有人可以帮我理解我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:13:56.627

您无缘无故添加的反斜杠是问题所在。此外，您的`sed`方言可能不支持`+`开箱即用的重复 - 请尝试使用，或在您的手册页中`*`查找`-r`或`-E`选项。`sed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:48:52.973

以下对我有用：

```
sed -i.bck  "s/[a-zA-Z][a-zA-Z]*\.mm*::*[0-9][0-9]*\s|/ /g"  prova_sed.txt 
```

它会创建一个备份文件以防万一。

May`sed`似乎不支持 +、\w 和 \d 语法，所以我使用`[a-ZA-Z][a-zA-Z]*`了而不是`[a-zA-Z]+`，`mm*`而不是`m+`等等。

另请注意，您不需要将单个字符放在括号内，因此`[\.][m]+[:]+`可以替换为`\.mm*::*`

如果您的 sed 版本支持 -r 选项，则整个事情可以简化为

```
sed -i.bck  "s/[a-zA-Z]+\.m+:+[0-9]+\s|/ /g"  prova_sed.txt 
```

# android - Android 密码更改活动

> ID：14038091
> 
> 赞同：0
> 
> 时间：2012-12-26T08:46:44.060
> 
> 标签：android, string, android-intent, android-activity, passwords

我想在我的应用程序中实现密码更改活动，这是我为我的活动编写的代码，但我认为我应该将字符串密码变量声明到其他地方，因为我的新密码成功更改并且可以工作直到我关闭了应用程序，当我再次运行它时，旧密码是正确的。我对 Android 开发真的很陌生，任何答案/建议都将不胜感激。

Change_Password 代码：

```
public class Change_Password extends Activity {
    //----
     public SharedPreferences prefs;
      private String prefName = "MyPref";
      private static final String TEXT_VALUE_KEY = "nothing";
      //-----

    public static String Password="soha";

        public static String getPassword()
        {
            return Password;
        }

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.change_password);

    Button btnCancel=(Button)findViewById(R.id.btnCancel);
    btnCancel.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            finish();
        }
    });

    final EditText txtNewPassword=(EditText)findViewById(R.id.txtNewPassword);
    final EditText txtCurrentPassword=(EditText)findViewById(R.id.txtCurrentPassword);
    final EditText txtConfirmPassword=(EditText)findViewById(R.id.txtConfirmNewPassword);
    Button btnSave=(Button)findViewById(R.id.btnSave);
    btnSave.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            if(txtConfirmPassword.getText().toString().equalsIgnoreCase("") |
                    txtCurrentPassword.getText().toString().equalsIgnoreCase("") |
                    txtCurrentPassword.getText().toString().equalsIgnoreCase(""))
                {
                    Toast.makeText(getBaseContext(),"Please Complete the Information", Toast.LENGTH_SHORT).show();
                }
                 else
                 if(!txtNewPassword.getText().toString().equalsIgnoreCase(txtConfirmPassword.getText().toString()))
                  {
                    Toast.makeText(getBaseContext(),
                    "These Passwords Don't Match !", Toast.LENGTH_SHORT).show();
                   }
                 else
                 if(!getPassword().equalsIgnoreCase(txtCurrentPassword.getText().toString()))
                    {
                         Toast.makeText(getBaseContext(),
                            "Current Password is Incorrect!", Toast.LENGTH_SHORT).show();
                     }
                   else
                    {
                     ///------- //---save the values in the EditText view to preferences---  
                    prefs = getPreferences(MODE_PRIVATE);
                     SharedPreferences.Editor editor = prefs.edit();
                     editor.putString(TEXT_VALUE_KEY, txtNewPassword.getText().toString());
                     //---saves the values---
                        editor.commit();       
                     ///--------
                      //Password=txtNewPassword.getText().toString();
                      Toast.makeText(getBaseContext(),
                              Password, Toast.LENGTH_SHORT).show();
                      }

                 }
           });

}

@Override
public void onAttachedToWindow() {
   this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
  super.onAttachedToWindow();

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
   if(keyCode == KeyEvent.KEYCODE_HOME)

       BackToMainIntent();

 else if(keyCode==KeyEvent.KEYCODE_BACK)
   {
     BackToMainIntent();
  }
   return false;
}

public void BackToMainIntent()
{
    Intent intent = new Intent(this, Main.class);
       intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
       startActivity(intent);
  }
} 
```

这是我的主要活动：

```
 public class mainC extends Activity {

        private EditText uPass;
        private Button loginBtn;
        private Button Btn_Exit;
        private ImageView Image;

        ///------
        public SharedPreferences prefs;
        private String prefName = "MyPref";
        private static final String TEXT_VALUE_KEY = "1234";
        ////----------
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.loginpage);

            Image=(ImageView)findViewById(R.id.NFCImage);
            Image.setAlpha(100);
            Btn_Exit=(Button)this.findViewById(R.id.Btn_exit_app);
            Btn_Exit.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {

                    Intent _Intent =new Intent(Intent.ACTION_MAIN);
                    _Intent.addCategory(Intent.CATEGORY_HOME);
                    _Intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(_Intent);

                }
            });

            setUpViews();
        }
        @Override
        protected void onResume() {
            super.onResume();

            uPass.setText("");

            uPass.setInputType(InputType.TYPE_CLASS_TEXT| InputType.TYPE_TEXT_VARIATION_PASSWORD);
            uPass.setTextColor(Color.parseColor("#888888"));
        }
        private void setUpViews() {

             uPass=(EditText)findViewById(R.id.usrPassTxt);

            uPass.setOnFocusChangeListener(new View.OnFocusChangeListener(){

                public void onFocusChange(View v, boolean hasFocus) {

                        if(hasFocus){
                            uPass.setInputType(InputType.TYPE_CLASS_TEXT| InputType.TYPE_TEXT_VARIATION_PASSWORD);

                            uPass.setText("");
                        }
                }

            });

            loginBtn=(Button)findViewById(R.id.Btn_Login);

              loginBtn.setOnClickListener(new OnClickListener() {
                private String pass;

                Intent myIntent;

                public void onClick(View v) {

                    pass=uPass.getText().toString();

                    ///-----
                    SharedPreferences prefs = getSharedPreferences(prefName, MODE_PRIVATE);
                    String passtemp = prefs.getString(TEXT_VALUE_KEY, "nothing");
                    if( pass.equalsIgnoreCase(passtemp)) 
                    ///-----
                    //if( pass.equalsIgnoreCase(Change_Password.getPassword()))
                    {
                        myIntent=new Intent(mainC.this,Main.class);
                        myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        System.out.println("---IF---");
                    }

                    else{
                        myIntent=new Intent(mainC.this,ErrorPage.class);

                        System.out.println("---ELSE---");
                    }

                    startActivity(myIntent);
                }
            });
        }
        @Override
        public void onBackPressed() {

            finish();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:57:39.330

这里

> if(pass.equalsIgnoreCase(Change_Password.getPassword()))

您正在尝试从以前的 Activity 调用一个方法，这不是在 Activity 或 Application 的其他组件之间共享数据的有效方式。

在您的情况下，您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来存储密码，而不是使用`static`字段或方法

请参阅我们在应用程序中使用 SharedPreferences 的这些教程：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

[http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

[http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:03:24.380

这里的问题是您的所有内容都在内存中运行，我的意思是，您的密码变量（静态）在内存中，您在更改密码时分配了它并且没问题。

但是当你再次启动应用程序时，密码的值为1234，因为你有密码！xD，您必须将密码存储在其他地方，例如使用 SharedPreferences。

# jquery - jQuery过滤具有特定属性的子项

> ID：14038092
> 
> 赞同：7
> 
> 时间：2012-12-26T08:46:45.133
> 
> 标签：jquery

我有一些`li`元素，其中一些`li`有一个属性`data-brandId`，而其中一些没有这个属性。`ul`我有我从中过滤它的父母：

```
var selectedLis = new Array();
$('ul').children('li').each(function(){
    if($(this).attr(attribute) != null) {
        selectedLis.push($(this));
    }
}); 
```

有没有更好的方法来实现这一点？喜欢通过使用`filter`等？

## 更新：

我正进入（状态`TypeError: $(...).data(...) is undefined`

呈现的 HTML 为：

```
<li data-entityid="WF/008/DAM" class="dropdownli filterItem">&nbsp;&nbsp;&nbsp;
    <input type="checkbox" data-entityid="WF/008/DAM" value="WF/008/DAM/014" name="damBrand">
    <label>E&amp;W Portfolio</label>
</li> 
```

这给了我错误：

```
var lis = $('ul[name=damBrandMenu]').children('li').filter(function(){
    return $(this).data('entityId').length;
}); 
```

还说我在 中没有 data-entityId `li`，而是在作为 li 的子元素的 input[type="checkbox"] 中有这个属性，正如您在 HTML 中看到的那样。那么过滤的方式是什么？是吗：

```
var lis = $('ul[name=damBrandMenu]').children('li').filter(function(){
    return $('> input[type="checkbox"]', this).data('entityid').length;
}); 
```

我也试过：`$(this).attr('data-entityId').length;`和`$('> input[type="checkbox"]', this).attr('data-entityId').length;`，但他们也没有工作。我有同样的错误；`TypeError: $(...).attr(...) is undefined`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T08:49:31.633

```
var selectedLis = $('ul').children('li[data-brandId]'); 
```

或使用过滤器：

```
var selectedLis = $('ul').children('li').filter(function() {
    return $(this).data('brandId');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T08:49:11.290

```
$('ul > li').filter(function() {
    return this.dataset.brandId
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T08:49:58.100

```
var attribute = 'data-brandId';
var selectedLis = $('ul > li['+attribute+']'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T08:51:40.567

```
var selectedLis = $('ul li').filter(function() {
    return $(this).data('brandId').length;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T09:50:34.470

您可以为此简单地使用 JQuery 属性过滤器，

```
var selectedLis = $("li[data-brandId]"); 
```

# youtube-api - 无法使用 flashvars 自动启动真正的 YouTube api

> ID：14038098
> 
> 赞同：0
> 
> 时间：2012-12-26T08:47:17.570
> 
> 标签：youtube-api, swfobject

我有以下 Javascript 代码，但视频没有自动启动，为什么？

```
var params = { allowScriptAccess: "always" };
    var atts = { id: "myvideoplayer"};
    var flashvars = {autostart: true};

    swfobject.embedSWF(

        "http://www.youtube.com/v/MHRj8BYm240?enablejsapi=1&playerapiid=ytplayer&version=3", "ytplayer", "425", "365", "8", null, flashvars, params, atts);

    function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById("myvideoplayer");
    //ytplayer.playVideo();
} 
```

好的，也许我应该在 YouTube 播放器准备好后立即使用，`playVideo()`但是其他 flashvars怎么样？`displayclick``click`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:51:57.437

将 &autoplay=1 添加到视频 URL，它应该可以工作

# bash - 如何避免在包含双引号空格的变量中拆分参数？

> ID：14038103
> 
> 赞同：1
> 
> 时间：2012-12-26T08:47:48.250
> 
> 标签：bash

```
$ foo='A="1 2" B=3' sh -c 'ruby -e "p ARGV" $foo'
["A=\"1", "2\"", "B=3"] 
```

我该如何`["A=1 2", "B=3"]`取而代之？

我知道：

```
sh -c 'ruby -e "p ARGV" A="1 2" B=3'
["A=1 2", "B=3"] 
```

但该变量`foo`是必需的，因为我真正的问题是在 Jenkins 作业中的“shell 执行过程”中。

编辑：在同一个外壳中使用一个数组

```
$ foo=(A="1 2" B=3) && ruby -e "p ARGV" $foo
["A=1 2", "B=3"] 
```

但是，数组不能作为环境变量传播...

```
$ foo=(A="1 2" B=3) sh -c 'ruby -e "p ARGV" $foo'
[] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:20:11.103

您需要逃离空间以弥合由于缺乏正确引用而造成的鸿沟。

```
foo='A="1\ 2" B=3' sh -c 'ruby -e "p ARGV" $foo' 
```

这基本上是“不要那样做”问题的变体。[http://mywiki.wooledge.org/BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-03T12:38:55.200

我们在 Jenkins 上遇到了这个确切的问题。IE

./ourScript.py "${args}"

尽管有引号，但 args 在空间上被打破了。

我们用

eval "./ourScript.py '${args}'"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:03:39.683

我的理解是，您想向 ruby​​（`A=1 2`和`B=3`）发送 2 个附加参数，但在单个变量（`foo`）中。这并不简单，因为第一个参数中的空格将用于子shell 的分词。一个解决方案是告诉 subshel​​l 使用另一个字符进行分词（我正在使用`_`波纹管）。所以你的脚本变成：

```
foo="A=1 2_B=3" sh -c 'IFS=_; ruby -e "p ARGV" $foo' 
```

如果您想`_`在参数中保留一个可能的字符，您可以使用换行符进行分词，但它变得不那么可读：

```
foo="A=1 2
B=3" sh -c 'IFS="
"; ruby -e "p ARGV" $foo' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:57:32.187

正如我在问题答案的评论中提到的那样，程序采用这些参数（A 和 B）是`make`. 所以，我决定扩展`$(foo)`一个配方并调用 submake。因为`make`按原样扩展变量。

前：

```
$ foo='A="1 2" B=3' sh -c 'make $foo' 
```

后：

```
$ foo='A="1 2" B=3' sh -c 'make wrapper' 
```

生成文件：

```
wrapper:
    make $(foo) 
```

这不是我问题的确切答案，而是我选择的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T14:20:14.690

```
sh -s 'A=1 2' B=3 <<\EOF
export "$@"
python3 -c 'import os; print("\n".join(os.environ[x] for x in ["A", "B"]))' "$foo"
EOF 
```

这需要您`/bin/sh`支持`export`未发布的 POSIX-2008 TC1 指定的声明命令行为。

翻译成红宝石，因为我不使用它。

**编辑**这没有意义......你想要 argv 还是环境？您不能通过环境传递数组，也不能通过 argv 传递命名变量。

对于 argv，不要尝试使用变量。将字符串作为参数传递给 shell 包装器。

```
$ sh -c $'python3 -c \'import sys; print("\\n".join(sys.argv[1:]))\' "$@"' _ 'A=1 2' B=3
A=1 2
B=3 
```

# python - 重新打开 GTK 窗口后无法访问文本输入框

> ID：14038104
> 
> 赞同：3
> 
> 时间：2012-12-26T08:48:00.020
> 
> 标签：python, gtk, pygtk, glade

首先这个问题只在WIN7出现，一般在raspberry pi（Debian Linux）下。

我有两个窗口，主窗口和子窗口。主窗口有一个可以激活子窗口的按钮。子窗口有一个文本输入框，可以输入字符串。问题是当第一次激活子窗口时，文本输入框正常工作。但是当子窗口关闭并重新打开时，文本输入框似乎已禁用，无法输入任何文本，甚至 set_text("xx") 函数也无法向其中写入任何文本。

详细步骤如下：

1.  运行py脚本

2.  单击主窗口上的按钮以打开子窗口。我尝试了以下三种方法，似乎它们有同样的问题：

    ```
    def on_button_clicked(self, widget, data=None):
        self.child_window.present()
        #self.child_window.show()
        #self.child_window.show_all() 
    ```

3.  现在子窗口打开了，文本输入框可以正常工作，我可以在其中输入任何文本。

4.  关闭子窗口。我已将删除信号绑定到子窗口。所以每次关闭子窗口时，都会执行下面的函数，隐藏当前子窗口。

    ```
    def on_WindowOfScanning_delete_event(self, widget, data=None):
        self.child_window.hide()
        return True 
    ```

5.  现在主窗口处于焦点位置，然后单击按钮再次激活子窗口。

    ```
    self.child_window.present() 
    ```

6.  现在出现子窗口，但文本输入框似乎已禁用。

任何人都可以在这个问题上帮助我吗？对此表示赞赏..

版本信息为：Python 2.7.3 GTK 2.24.2，我使用glade管理GUI界面。

**================= 同一个问题换个例子：=====================**

[http://www.pygtk.org/pygtk2tutorial/sec-TextEntries.html#entryfig](http://www.pygtk.org/pygtk2tutorial/sec-TextEntries.html#entryfig)

此链接是 pygtk 的官方示例。在我的WIN7（64位）系统上运行时，文本输入框从第一次打开后就无法编辑。但是如果你移动鼠标来激活其他窗口，然后回到这个gtk窗口，那么文本输入框就可以被编辑了。我不确定这是否是 pygtk 的错误。

我已经使用 pygtk2.24.2-all-in-one 尝试了 python 2.6.6 和 2.7.3。

**================= 这个问题的解决方法：=====================**

似乎没有人有这样的问题，所以我发布了我自己的解决方案。

1、放弃使用window.hide()函数。

2nd，每次完成工作时销毁子窗口，并再次重新初始化gtk.Window以调用子窗口。这是一个简单的例子：

```
#!/usr/bin/env python

import pygtk
pygtk.require( "2.0" )
import gtk

class PopupExample(gtk.Window):
    def __init__( self ):
        gtk.Window.__init__(self)
        self.connect("destroy", lambda *w: gtk.main_quit())
        button = gtk.Button("Popup Window")
        button.connect("clicked", self.show_popup_window)
        self.add(button)

    def show_popup_window(self, button):
        popup = gtk.Window()
        popup.add(gtk.Entry())
        popup.show_all()

if __name__ == "__main__":
    pe = PopupExample()
    pe.show_all()
    gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T02:03:01.917

`gnucash`我在和中遇到了同样的问题`inkscape`，我通过进入解决了这个问题`Control Panel -> Locales and Languages and set format to English(US)`

# dictionary - 如何将 SVG 转换为 SHP（形状文件）格式？

> ID：14038107
> 
> 赞同：6
> 
> 时间：2012-12-26T08:48:23.467
> 
> 标签：dictionary, svg, converter, shapefile, geoserver

我正在尝试将 SVG 文件转换为 SHP（形状文件格式），然后将其导入 GeoServer。

是否有任何可用的转换器或者是否有任何中介格式可以让我将其转换并最终以 SHP 格式获得？

我已经有了印度地图的形状文件。现在，近年来增加了一些奇怪的60个地区。新区与旧区分开。所以，这个国家的总面积并没有改变，而是被分割了。

我的想法是，如果我可以将我拥有的SVG格式的新区的新图层合并到原始SHP文件数据中，并根据SHP文件得到最终映射的坐标，那么问题就可以解决了。

如果有人做过并且可以提供帮助，那就太好了！谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:34:24.563

不大可能。SVG 是一种“绘图”格式，因此无法保证线条的坐标与现实世界中的任何东西相同 - 基于一张 A4 大小的纸，它们可能以厘米为单位。

因此，您至少必须计算出从这些坐标到经纬度或其他坐标系的转换。这可能是非线性...

但是 SVG 是基于 XML 的文件，因此您可以在文本编辑器中打开它并查看它。如果你能弄清楚哪些元素拥有你需要的坐标，那么你可以编写一个脚本（我会用 Python 来做，但你可以用任何支持 XML 的语言编程都可以）来去除坐标。然后可能考虑将它们转换为 shapefile - 或者 GML - 一种基于 XML 的地理数据标准格式。

但老实说，使用你想要的边界来获取 shapefile 可能要容易得多。

# php - 在 Yii 框架的视图中更改显示 html 表格

> ID：14038108
> 
> 赞同：0
> 
> 时间：2012-12-26T08:48:29.497
> 
> 标签：php, view, yii, html-table

我使用 Yii php 框架制作了一个财务管理模块，并通过 Gii 安装了模型、控制器、CRUD 和视图。现在我想在表格中显示为每个财务运动创建的内容，每行一个运动，在视图运动页面内 - 例如在 admin.php（管理控件）中，但无法更新它们。

我对 Yii 很陌生，尽管我非常努力，但 Yii 似乎对我来说太晦涩难懂了。如何让我的 motion/views/view.php 显示一个 HTML 表格，其中包含我的移动表格中的所有条目？

- 更新：

这是_view.php的代码形式

```
 <?php

/* @var $this MovementController */
/* @var $data Financialmovement */

$due = gmdate( 'd/m/Y', $data->due_date );

if ( $data->pay_date != 0 ) {
    $pay = gmdate( 'd/m/Y', $data->pay_date );
} else {
    $pay = 'Indisponível';
}
switch ( $data->category ):
    case ('trn'):
        $category = "Transporte";
        break;
    case ('fin'):
        $category = "Financeiro";
        break;
    default :
        $category = 'Erro! Valor nulo.';
endswitch;

if ( $data->condition = 1 ) {
    $condition = 'Concluída';
} else {
    $condition = 'Aberta';
}

if ( $data->movement_type = 1 ) {
    $type = 'Saída';
} else {
    $type = 'Entrada';
}

$value = $data->value;
$patern = '/\./';
$replacement = ',';
$value = preg_replace( $patern, $replacement, $value );

$coin = $data->coin_type;
$patern = '/s/';
$replacement = '$';
$coin = preg_replace( $patern, $replacement, $coin );

?>

<tr class="wide form">
    <td >
        <?php echo $data->getAttributeLabel( 'id' ); ?>:
        <?php echo CHtml::link( ( $data->id ), array( 'view', 'id' => $data->id ) ); ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'category' ); ?>:
        <?php echo $category; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'value' ); ?>:
        <?php echo '<span class="capital">' . $coin . "</span> " . $value; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'due_date' ); ?>:
        <?php echo $due; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'pay_date' ); ?>:
        <?php echo $pay; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'description' ); ?>:
        <?php echo $data->description; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'condition' ); ?>:
        <?php echo $condition; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'movement_type' ); ?>:
        <?php echo $type; ?>

    </td>
    <td >
        <?php echo $data->getAttributeLabel( 'observation' ); ?>:
        <?php echo $data->observation; ?>

    </td>
</tr> 
```

这是 view.php 的代码：

```
 <?php

/* @var $this MovementController */
/* @var $model Financialmovement */

$this->breadcrumbs = array(
    'Financial Movements' => array( 'index' ),
    $model->id,
);

$this->menu = array(
    array( 'label' => 'List Financial Movement', 'url' => array( 'index' ) ),
    array( 'label' => 'Create Financial Movement', 'url' => array( 'create' ) ),
    array( 'label' => 'Update Financial Movement', 'url' => array( 'update', 'id' => $model->id ) ),
    array( 'label' => 'Delete Financial Movement', 'url' => '#', 'linkOptions' => array( 'submit' => array( 'delete', 'id' => $model->id ), 'confirm' => 'Are you sure you want to delete this item?' ) ),
    array( 'label' => 'Manage Financial Movement', 'url' => array( 'admin' ) ),
);

?>

<h1>View Financial Movement #<?php echo $model->id; ?></h1>
<table>
    <tr>
        <td>Id</td>
    </tr>
    <?php

    $dataProvider = new CActiveDataProvider( 'Financialmovement' );

    $this->widget( 'zii.widgets.CListView', array(
        'dataProvider' => $dataProvider,
        'itemView' => '_view', // refers to the partial view named '_view'
        'sortableAttributes' => array(
            'id',
            'due_date',
            'pay_date',
            'category',
        ),
    ) );

    ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:05:50.643

首先，您应该通过 CActiveDataProvider 在控制器中获取表数据。然后在视图中您可以使用小部件 - CGridView。使用此小部件，您可以设置所需的参数。列、过滤器等。您也可以粘贴您的代码，我们将尝试确定您的问题。Yii 很简单 :)

# sapconnect - 如何在 SAP 中通过邮件发送作业假脱机？

> ID：14038114
> 
> 赞同：0
> 
> 时间：2012-12-26T08:48:51.783
> 
> 标签：sapconnect

我需要在 SAP 中通过电子邮件发送作业假脱机。

确切地说，它们是 SAP Query SQ01 中的一些作业。

我知道有两种方法可以做到：

1.  计划工作时直接通过 SQ01。
2.  通过 SM37 这可能是最简单的。

在 SBWP Workplace 中，我在自己的列表中添加了我的电子邮件地址以对其进行测试，但我不知道如何规划线轴以便通过电子邮件发送。

能否请你帮忙？

PS*假脱机列表收件人*不可用。以下是我单击它时的错误消息：*“作业假脱机没有收件人列表”*

谢谢，最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-12T15:10:15.673

转到交易“SCOT”

[![在此处输入图像描述](../Images/8ba07e9a16b259e5dbe1f72be7963efc.png)](https://i.stack.imgur.com/20Zv1.png)

点击“SMTP”

[![在此处输入图像描述](../Images/54145dac162775f018db5f1d970b48bd.png)](https://i.stack.imgur.com/z7BNV.png)

正确填写值并单击“设置”->“默认域”

[![在此处输入图像描述](../Images/34fd3d13a75cf6b67970ab2e87df38a6.png)](https://i.stack.imgur.com/qhyIh.png)

输入默认域 (example.com)

[![在此处输入图像描述](../Images/22a571ad649f413731ac5cb3f39af3ba.png)](https://i.stack.imgur.com/yCXDb.png)

点击“工作”

[![在此处输入图像描述](../Images/000130760d3d2e1265b614b4f85c9a2d.png)](https://i.stack.imgur.com/WBPzK.png)

单击“新建”按钮并选择“为 INT 安排作业”

[![在此处输入图像描述](../Images/0357e981182b072f8272adba920b957b.png)](https://i.stack.imgur.com/1bhfK.png)

输入有效的“期间”

[![在此处输入图像描述](../Images/bd1a0fccb607f8edcc9156ea65d526b2.png)](https://i.stack.imgur.com/IttCC.png)

最后，点击“立即开始”

现在您可以使用事务“SCOT”检查发送请求。

# c# - 在 c# 中这是什么意思 (m => m.Title)

> ID：14038117
> 
> 赞同：1
> 
> 时间：2012-12-26T08:49:03.600
> 
> 标签：c#, lambda

我是 MVC (c#) 的新手，不知道一些看起来像箭头或比较运算符的用途。我不知道这意味着什么。

我已经看到这在 MVC (c#) 的许多领域中使用

代表什么`=>`？它是箭头还是比较运算符？

示例 1：

```
return storeDB.Albums.Orderby(a => a.Price) 
```

示例 2：

```
.ForEach(a => context.Albums.Add(a)); 
```

示例 3：

```
bool isValid = storeDB.Orders.Any(o => o.OrderId == id && o.Username == User.Identity.Name); 
```

示例 4：

```
var addedAlbum = storeDB.Albums.Single(album => album.AlbumId == id); 
```

示例 5：

```
@Html.HiddenFor(model => model.Id) 
```

请通俗易懂地解释一下。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:51:40.413

这是一个[lambda 表达式- 创建](http://msdn.microsoft.com/en-us/library/bb397687.aspx)[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)（即委托）的捷径。运营商`=>`是`goes to`运营商。它将匿名方法参数与匿名方法体分开。

* * *

```
storeDB.Albums.Orderby(a => a.Price) 
```

这里我们有匿名方法，它接受专辑作为参数。这张专辑进入 body，它返回专辑`Price`属性的值。与委托语法相同：

```
delegate(Album a) { return a.Price; } 
```

或使用命名方法：

```
private decimal GetAlbumPrice(Album a)
{
    return a.Price;
} 
```

如您所见，lambda 表达式语法是实现相同结果的最短形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:52:31.490

您应该阅读此[http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。

简单来说，Lambda 基本上是可用于创建委托或表达式类型的匿名函数。它基本上是编写代表的一种方便的简写方式（尽管这种方式过于简单化）

# java - Java - Resources.getresource() java.lang.IllegalArgumentException：找不到资源“文件”

> ID：14038118
> 
> 赞同：0
> 
> 时间：2012-12-26T08:49:08.280
> 
> 标签：java

我`generateTopKFrequentPattern()`在Apache Mahout库中调用FP增长挖掘的方法。在那个调用中，当我使用 时`Resources.getResource("FILENAME")`，我收到上面的错误，说找不到文件。

我的目录结构是`Application/src/FILENAME`. 在 Eclipse 窗口中，从运行配置中，默认的类路径是“Application”。我尝试使用绝对类路径，`"Application/src/FILENAME"`并且`"src/FILENAME"`. 我仍然有同样的错误。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:03:57.983

@Thilo，/FILENAME 不起作用。

该文件应与类路径（.class 文件的位置）位于同一文件夹中。将数据文件移动到类路径的位置或将类路径的位置更改为数据文件的位置解决了错误。

早些时候，我将类路径位置设置为与数据文件位置相同。不知何故，配置在 Eclipse 中被重置。

在我的情况下，类路径是“Application/bin”，文件在“Application/src/FILENAME”中。指定相对于类路径的文件路径说“../src/FILENAME”或“/../src/FILENAME”对我也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T23:52:18.073

问题是资源，在这种情况下是文件，不在构建路径中。

如果您使用的是 Eclipse，请右键单击该文件，然后选择`Add to Build Path`.

# objective-c - 双重除法在objective-c中丢失小数位

> ID：14038121
> 
> 赞同：2
> 
> 时间：2012-12-26T08:49:16.783
> 
> 标签：objective-c

在除以浮点数和双精度数时，我必须做些什么才能不止一位小数。

代码是：

```
 double *dbl; //In fact this is a parameter of the function
   double *kg;
   double total = 41.2;

   *dbl = *kg * 1000.0l / total; 
```

在我的例子中，*kg = 2485 并且总计 = 41.2。因此，结果应该类似于 60315.5339805。但是，我只得到 60315.5。为了不丢失其余的十进制数字，我该怎么做。

我知道我可以使用 NSNumber，但是当我使用 doubleValue 转换为 double 时，我总是得到 60315.5。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:54:42.193

这对我来说很好：

```
- (void) myFunc:(double *)dbl
{
    double kg = 2485;
    double total = 41.2;
    *dbl = kg * 1000.0l / total;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    double d;
    [self myFunc:&d];
    NSLog(@"%lf",d);
} 
```

# javascript - 如何使页眉和页脚始终固定？

> ID：14038122
> 
> 赞同：2
> 
> 时间：2012-12-26T08:49:28.910
> 
> 标签：javascript, ios, css, cordova, jquery-mobile

我想在 iOS 下的 Phone Gap 应用程序中始终固定页眉和页脚我使用 jQuery Mobile 但是当打开键盘或选择菜单（任何本机）时，页眉和页脚也变得不固定，我也禁用切换，另外当打开本机的东西（键盘或选择）simpledialog2 的位置不再居中。

这是页眉和页脚的 HTML 代码

```
<div id="PageHeader" data-role="header" data-theme="f" data-position="fixed"></div>
<div id="PageFooter" data-role="footer" data-theme="f" data-position="fixed"></div> 
```

此代码 JS 用于禁用在文档中切换就绪

```
$("[data-role=header]").fixedtoolbar({ tapToggle: false });
$("[data-role=footer]").fixedtoolbar({ tapToggle: false }); 
```

如果有人有这个问题并试图解决它，请告诉我方法。

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:45:35.187

如果你使用 position: fixed，你可能会发现有些事情是你无法克服的。在较早的手机时代， position: fixed 甚至不是一个选项，因为他们担心这些固定元素会覆盖小屏幕上的其他 UI 元素并使内容无法访问。当然，这是一个愚蠢的想法，每个人都抱怨缺乏位置：固定。直到最近几年，手机和其他移动设备才开始支持定位：固定。iOS 实际上拥有最好的支持，但直到 iOS 5 才出现。

如果有像你描述的那样没有解决的特殊情况，我不会感到惊讶。

# wcf - HTTPS 证书错误，IIS 上的 WCF 服务

> ID：14038124
> 
> 赞同：0
> 
> 时间：2012-12-26T08:49:51.547
> 
> 标签：wcf, web-services, iis, https, x509certificate

我想组织客户端和 WCF 服务之间的安全连接。客户必须确信，它可以信任该服务。

我为受信任的根和本地计算机上的个人存储创建了两个证书。我可以在证书插件中看到正确的证书路径。证书公用名是 localhost。

我在 IIS 上添加了 https 的绑定。

我有以下配置的服务

行为

```
 <behavior name="AgencyTrustedServiceBehavior">
      <dataContractSerializer maxItemsInObjectGraph="10000000" />
      <serviceMetadata httpsGetEnabled="true" policyVersion="Policy15" />
      <serviceDebug includeExceptionDetailInFaults="true" />

      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="None"  />
        </clientCertificate>

        <serviceCertificate findValue="localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />

      </serviceCredentials>
    </behavior> 
```

捆绑

```
 <wsHttpBinding>
    <binding name="InternetServiceBinding" closeTimeout="00:10:00"
          openTimeout="00:10:00" sendTimeout="00:10:00" bypassProxyOnLocal="true"
          maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Mtom">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="Transport">
        <transport clientCredentialType="None">
          <extendedProtectionPolicy policyEnforcement="Never" />
        </transport>
      </security>
    </binding>
  </wsHttpBinding> 
```

端点

```
 <service behaviorConfiguration="AgencyTrustedServiceBehavior" name="Megatec.MasterTourService.AuthService">
    <endpoint address="Anonymous" 
              binding="wsHttpBinding" 
              bindingConfiguration="InternetServiceBinding" 
              name="Megatec.MasterTourService.Contracts.IAuthServiceAnonymous" 
              contract="Megatec.MasterTourService.Contracts.IAuthService">
    </endpoint>
  </service> 
```

但是，当我尝试使用 WCFTestClient 访问该服务时，它会引发以下异常

```
There was no endpoint listening at http://localhost/IISTest/AuthService.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.    The remote server returned an error: (404) Not Found.

HTTP GET Error    URI: http://localhost/IISTest/AuthService.svc    The document at the url http://localhost/IISTest/AuthService.svc was not recognized as a known document type.The error message from each known type may help you fix the problem:
- Report from 'XML Schema' is 'The document format is not recognized (the content type is 'text/html; charset=UTF-8').'.
- Report from 'DISCO Document' is 'There was an error downloading 'https://dev4-10.megatec.ru/IISTest/AuthService.svc?disco'.'.  
- The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.  
- The remote certificate is invalid according to the validation procedure.
- Report from 'http://localhost/IISTest/AuthService.svc' is 'The document format is not recognized (the content type is 'text/html; charset=UTF-8').'.
- Report from 'WSDL Document' is 'The document format is not recognized (the content type is 'text/html; charset=UTF-8').'. 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:09:42.370

客户端点击的 URL 是：

“http://localhost/IISTest/AuthService”

它应该是

“https://localhost/IISTest/AuthService”

# c - C 编程中批量更新的方法

> ID：14038132
> 
> 赞同：-1
> 
> 时间：2012-12-26T08:50:14.847
> 
> 标签：c, batch-processing, fseek

我需要在产品列表上执行此批量更新。此批量更新必须从数据库中检索每个产品并获得它的“订单数量”。然后必须将此“订购数量”添加到当前库存中：

例如：

当前库存：100 订购：150

批量更新后，它们必须是： 当前库存：250 订购：0

我已经完成了这个方法（见下文），但是当我运行它时，它并没有更新我的库存，也没有更新我的订单。

```
void batchUpdate()
{
    printf ("\n\n\n\n\t\t    ********** Batch Update *******\n \n \n");

    int tempOrder;
    int tempStock;
    int tempAdding;

    if ((pfp = fopen("products.dat","r+b")) == NULL)
    {
        printf ("Error! Cannot Open Products.dat!\n");
        printf ("Returning to Main Menu\n");
        system ("PAUSE");
        orderMainMenu();
    }

        while (fread(&p,STRUCTSIZE,1,pfp) == 1)
        {
            tempOrder = p.pOrder;
            tempStock = p.pStock;
            tempAdding = tempOrder + tempStock;
            p.pOrder = 0;
            p.pStock = tempAdding;
            fwrite (&p,STRUCTSIZE,1,pfp);
        }

    fclose (pfp);
    printf ("Orders and Stock Updated!\n");
    printf ("Returning to Main Menu!\n");
    system ("PAUSE");
    orderMainMenu();

} 
```

我尝试使用 fseek (pfp, -STRUCTSIZE,SEEK_CUR); 但这把我的程序变成了一个无限循环。此外，当我尝试使用 show All products in database 时，他们跳过了我的第一条记录，只是进入了一个仅显示最后一条记录的无限循环。我只需要最终从系统中删除 products.dat 文件，然后再重做一次。

有什么建议吗？我确实相信 fseek() 有问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:58:28.117

发现错误，没有做 fflush (pfp)；在 fwrite() 之后；

这是最终的工作代码；

```
void batchUpdate()
{
    printf ("\n\n\n\n\t\t    ********** Batch Update *******\n \n \n");

    int tempOrder;
    int tempStock;
    int tempAdding;

    if ((pfp = fopen("products.dat","r+b")) == NULL)
    {
        printf ("Error! Cannot Open Products.dat!\n");
        printf ("Returning to Main Menu\n");
        system ("PAUSE");
        orderMainMenu();
    }

        while (fread(&p,STRUCTSIZE,1,pfp) == 1)
        {
            tempOrder = p.pOrder;
            tempStock = p.pStock;
            tempAdding = tempOrder + tempStock;
            p.pOrder = 0;
            p.pStock = tempAdding;
            fseek (pfp,-STRUCTSIZE,SEEK_CUR);
            fwrite (&p,STRUCTSIZE,1,pfp);
            fflush(pfp); //THIS WAS EMITTED AND WAS CAUSING PROBLEMS
        }

fclose (pfp);
printf ("Orders and Stock Updated!\n");
printf ("Returning to Main Menu!\n");
system ("PAUSE");
orderMainMenu(); 
```

}

# javascript - Javascript 的用户隐藏替代方案

> ID：14038133
> 
> 赞同：-1
> 
> 时间：2012-12-26T08:50:21.750
> 
> 标签：javascript, html

我有一段 Javascript 代码可以更改我的 HTML 中的一些值。但是，出于安全原因，最终用户无法阅读我的代码会更好。我知道有一些方法可以混淆它，但它们都可以通过或多或少的努力被破解。我需要的是某种在客户端执行代码的方式，就像 Javascript 一样，但在用户的机器上绝不可见，如 PHP 或 Perl。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:41:41.913

我们无法隐藏 Javascript 代码，因为代码是在浏览器上解释的。但我们可以使用第三方工具混淆/缩小代码。请参阅[此处的类似帖子](https://stackoverflow.com/questions/1628799/hide-javascript-jquery-scripts-from-html-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:55:42.807

不，如果它需要在客户端上运行，它需要对客户端可见。你只能混淆（也许 Flash 或 Java 小程序对你来说很难破解）或转到服务器端。

# html - 为什么 inline-block 元素在 csss 中按预期并排排列

> ID：14038134
> 
> 赞同：1
> 
> 时间：2012-12-26T08:50:28.163
> 
> 标签：html, css

```
<html>
<head>
    <style>
        div#one{
            display: inline-block;
            border: 1px solid green;
            width: 200px;
            height: 200px;
        }
        p {
            border: 1px solid black;

        }
        div {
            display: inline-block;
            border: 1px solid green;
            width: 200px;
            height: 200px;
        }
    </style>
</head>
<body>
    <div id="one">
        <p>Something here</p>
    </div>
    <div></div>
</body>
</html> 
```

这是我的代码，我希望将`divs`它们并排排列，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:06:14.357

添加

```
vertical-align:top 
```

到`div`.

[JSFiddle 演示](http://jsfiddle.net/aUW86/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:10:37.267

在这种情况下，您不应该使用 inline-block。这可能会导致旧浏览器 (IE;) 出现错误。改用“浮动”。[http://jsfiddle.net/Tymek/HM835/](http://jsfiddle.net/Tymek/HM835/)

```
div {
    display: block; /* this */
    float: left; /* and this */
    border: 1px solid #0F0;
    width: 200px;
    height: 200px;
}

#one {
    border-color: #F00;
    width: 200px;
    height: 200px;
}

p {
    border: 1px solid #000;
} 
```

​</p>

```
<div id="one">
   <p>Something here</p>
</div>
<div>
    Lorem ipsum
</div>​ 
```

# stream - 卡桑德拉流媒体

> ID：14038136
> 
> 赞同：3
> 
> 时间：2012-12-26T08:50:39.540
> 
> 标签：stream, cassandra

我正在使用`cassandra version 1.1.4`和批量加载数据。我正在创建`SSTables`然后尝试将它们流式传输到 cassandra 集群。我仅在单个节点（我自己的系统）上尝试此操作，因此将复制因子保持为`1`. 但是每次我尝试流式传输都会失败，并且会出现以下错误消息

```
progress: [/10.66.92.92 0/6 (0)] [total: 0 - 0MB/s (avg: 0MB/s)]Streaming session to /10.66.92.92 failed
Exception in thread "Streaming to /10.66.92.92:1" java.lang.RuntimeException: java.io.EOFException
    at org.apache.cassandra.utils.FBUtilities.unchecked(FBUtilities.java:628)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:34)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readInt(Unknown Source)
    at org.apache.cassandra.streaming.FileStreamTask.receiveReply(FileStreamTask.java:194)
    at org.apache.cassandra.streaming.FileStreamTask.stream(FileStreamTask.java:181)
    at org.apache.cassandra.streaming.FileStreamTask.runMayThrow(FileStreamTask.java:94)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    ... 3 more

progress: [/10.66.92.92 1/6 (16)] [total: 16 - 0MB/s (avg: 0MB/s)]Streaming to the following hosts failed:
[/10.66.92.92] 
```

当我关闭服务器并重新启动它时，我可以看到我的表已插入，但我不想要这个。我希望流式传输成功并避免一次又一次地重新启动服务器。卡桑德拉的人请帮忙！我正在使用 Windows 7 环境

# multithreading - 如何在没有主线程等待的情况下从长时间运行的后台任务中引发异常

> ID：14038137
> 
> 赞同：2
> 
> 时间：2012-12-26T08:50:41.157
> 
> 标签：multithreading, c#-4.0, exception-handling, task-parallel-library

我想在后台线程上执行一些长时间运行的操作（例如监听操作系统引发的一些事件）。大多数情况下，操作会连续运行而不会出现任何问题。但是在某些罕见的情况下，操作系统级别的 API 会发送一些错误代码，我需要从后台线程引发异常，该异常必须传播到主线程以将其显示给我的`WinFrom`应用程序的用户。

我决定用`BackgroundWorker`这个。但是根据 TPL 上的各种博客，.NET 4.0 提供`Task`了一个更好的选择。`Task Parallel Library`

在我的应用程序中，我必须在显示实际表单之前启动后台任务。由于实际代码相当复杂，我编写了一些模拟实时问题的示例代码：

```
public static Task task;

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            ThreadTest tt = new ThreadTest();
            task = new Task(() => tt.PerformTask("hi"));
            task.Start();
            try
            {
                task.Wait();
            }
            catch (AggregateException aggregateException)
            {
                // Handle exception here.
            }

            Application.Run(new Form1());
        } 
```

在这段代码中，我从来没有看到主窗体，因为后台任务一直在无异常运行，并且`task.Wait()`调用使当前线程等待后台任务完成！

**我是否可以将`TPL`'s`Task`用于主线程不应该等到后台任务完成但同时在后台任务引发异常时获取异常详细信息的情况？**

在上面的代码中，解决方案之一可能是在稍后阶段移动任务创建代码。但在这种情况下，我的问题更具学术性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:18:51.007

是的你可以。请看下面的代码。

1.  程序代码为：

    ```
     /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        CancellationTokenSource  cancellationTokenSource = new CancellationTokenSource();

        Task  longRunningTask = new Task((state) =>
            {
                LongRunningWork.DoWork(  cancellationTokenSource.Token);

            },cancellationTokenSource.Token,TaskCreationOptions.LongRunning);

        var newForm = new Form1(cancellationTokenSource); 
        new Thread((state) =>
            {
                longRunningTask.Start();

                try
                {
                    longRunningTask.Wait();
                }
                catch (AggregateException exception)
                {
                    Action<Exception> showError = (ex) => MessageBox.Show(state as Form, ex.Message);

                    var mainForm = state as Form;
                    if (mainForm != null)
                    {
                        mainForm.BeginInvoke(showError, exception.InnerException);
                    }

                }
            }).Start(newForm);
        Application.Run(newForm); 
    ```

2.  长时间运行的任务的代码是：

    ```
    public class LongRunningWork
    {
        public static void DoWork( CancellationToken cancellationToken)
        {

            int iterationCount = 0;
            //While the 
            while (!cancellationToken.IsCancellationRequested &&iterationCount <5)
            {
                //Mimic that we do some long jobs here
                Thread.Sleep(1000);

                iterationCount++;
                //The jobs may throw the exception on the specific condition
                if (iterationCount ==5)
                {
                    throw  new InvalidOperationException("Invalid action");
                }

            }

            //cancel the task 
            cancellationToken.ThrowIfCancellationRequested();
        }
    } 
    ```

3.  最后，Form1 的代码包含一个退出按钮，其功能是在单击时终止程序。

    公共部分类Form1：Form {

    ```
     private CancellationTokenSource _cancellationTokenSource;

        public Form1()
        {
            InitializeComponent();
        }

        public Form1(CancellationTokenSource cancellationTokenSource):this()
        {
            _cancellationTokenSource = cancellationTokenSource;
        }

        private void exitBtn_Click(object sender, EventArgs e)
        {
            //Cancel out the task
            if (_cancellationTokenSource != null)
            {
                _cancellationTokenSource.Cancel();
            }

            //Exit the program
            Application.Exit();

        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:54:28.360

从表单本身开始您的长期运行操作，而不是在创建表单之前。请记住，这会`Application.Run()`在当前线程上启动一个消息循环，但这意味着您可以使用该消息循环从[Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)类轮询您的任务。

```
class Form1 : Form
{
    private Timer PollingTimer;
    private Task BackgroundTask;

    public Form1()
    {
        InitializeComponent();

        // Begin the background task.
        ThreadTest tt = new ThreadTest();
        this.BackgroundTask = new Task(() => tt.PerformTask("hi"));
        this.BackgroundTask.Start();

        // Monitor the task's status by polling it regularly.
        this.PollingTimer = new Timer();
        this.PollingTimer.Interval = 1000;        // In milliseconds.
        this.PollingTimer.Tick += timerCallback;
        this.PollingTimer.Start();
    }        

    private timerCallback(object sender, EventArgs e)
    {
        if (this.BackgroundTask.IsFaulted)
        {
            // Exception information is in BackgroundTask.Exception.
        }
    }
} 
```

如果您不喜欢轮询（我喜欢），您需要从任务中捕获异常并将其编组回您的 UI 线程。最好的方法就是不捕获任务本身的异常，并提供一个仅在错误时执行的延续方法。

```
class Form1 : Form
{
    private Task BackgroundTask;

    public Form1()
    {
        InitializeComponent();

        // Capture the UI thread context.
        // (Note, it may be safer to run this in the Form.Load event than the constructor.
        var uiContext = TaskScheduler.FromCurrentSynchronizationContext();

        // Begin the background task.
        ThreadTest tt = new ThreadTest();
        this.BackgroundTask = new Task(() => tt.PerformTask("hi"))
            // Schedule a continuation to be executed after the task is completed.
            .ContinueWith((t,arg) => 
            {
                // Exception information is in t.Exception
            },null, null, 
            // Only execute the continuation if the task throws an exception.
            TaskContinuationOptions.OnlyOnFaulted,
            // Execute the continuation on the UI thread we captured above. 
            uiContext);
        this.BackgroundTask.Start();
    }        
} 
```

[`Task.ContinueWith()`](http://msdn.microsoft.com/en-us/library/hh194761.aspx)和的 MSDN 参考资料[`TaskScheduler.FromCurrentSynchronizationContext()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)。

而且，如果您拥有 .NET 4.5`async`和的奢侈品`await`：

```
class Form1 : Form
{
    private Task BackgroundTask;

    public Form1()
    {
        InitializeComponent();
    }        

    private async void Form1_Load(object sender, EventArgs e)
    {
        ThreadTest tt = new ThreadTest();
        try
        {
            // Move your Task creation and start logic into a method.
            await tt.RunAsync();
        } 
        catch (Exception ex)
        {
            // Really smart compiler writers make sure you're on the right thread 
            // and everything Just Works(tm).
        }
    }
} 
```

# ios - 使用 sqlite 在 iPhone 的 xcode 中创建表失败

> ID：14038138
> 
> 赞同：2
> 
> 时间：2012-12-26T08:50:43.293
> 
> 标签：ios, ios4, sqlite

我使用以下代码在 Xcode 中创建数据库。它可以平稳地运行到`NSFilemanager`代码，但之后它将终止到显示无法创建表的`else`代码。`status.text=@"failed to open/create database";`我导入`sqlite3.h`并创建了`sqlDatabase`引用变量`sqlite3`，但它仍然不起作用。

```
-(void)databaseCreate
{
    NSString *docsDir;
    NSString *dbPath;
    NSArray *dirPath;

    dirPath=NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSLog(@"dirpath::%@",dirPath);

    docsDir=[dirPath objectAtIndex:0];
    NSLog(@"document directory::%@",docsDir);
    dbPath=[[NSString alloc] initWithString:[docsDir stringByAppendingPathComponent:@"timerpro1.db"]];

    NSLog(@"database path::%@",dbPath);
    NSFileManager *fileManager=[NSFileManager defaultManager];

    if([fileManager fileExistsAtPath: dbPath] == NO)
    {
        const char *databsPath=[dbPath UTF8String];
        NSLog(@"treat filemanager");

        if(sqlite3_open(databsPath,&sqlDatabase) == SQLITE_OK)
        {
            char *err;
            NSLog(@"create inside");
            const char *sql_stmt="CREATE TABLE IF NOT EXISTS PRJDATA(ID INTEGER PRIMERY KEY AUTOINCREMENT,PRJ_NAME TEXT,PRJ_DATE TEXT,TIME_POINT1 TEXT,TIME_POINT2 TEXT,TIME_POINT3 TEXT,POINT2_DIFF_MIN TEXT,POINT2_DIFF_SEC TEXT,POINT3_DIFF_MIN TEXT,POINT3_DIFF_SEC TEXT)";

            if (sqlite3_exec(sqlDatabase, sql_stmt, NULL, NULL, &err)!=SQLITE_OK)
            {
                status.text=@"failed to create table";
            }
            sqlite3_close(sqlDatabase);
        }
        else
        {
            status.text=@"failed to open/create database";
        }
    }
    [fileManager release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:00:27.950

直接的问题是您必须将引用替换`NSDocumentationDirectory` 为`NSDocumentDirectory`。

两个旁白：

1.  当您遇到故障时，您应该检查`sqlite3_errmsg()`，因为您经常会遇到描述性错误。例如`sqlite3_exec()`，即使您修正了`NSDocumentDirectory`错误，您的语句也会失败。

    如果您查看`sqlite3_errmsg()`错误消息，它会告诉您`AUTOINCREMENT`子句附近有错误。如果您仔细查看 SQL，您会注意到您拼错了`PRIMARY KEY`. 如果没有 ，那将更难找到`sqlite3_errmsg()`，这使我们注意到 SQL 的特定部分。

2.  您可以简化`dbPath`声明：

    > ```
    > dbPath=[docsDir stringByAppendingPathComponent:@"timerpro1.db"];` 
    > ```

# javascript - 如何通过 val() 从 div 中获取文本

> ID：14038141
> 
> 赞同：-1
> 
> 时间：2012-12-26T08:50:52.203
> 
> 标签：javascript, jquery, html

我正在为**标签**使用 Jquery UI 。在每个选项卡中，我都有一个空 div。我在选项卡之外有一个文本区域，我在其中提供值以存储在那些空的 div 中。

问题是我已将值固定为“Null”，以便在选项卡之间切换时可以刷新 textarea。

但问题是当我们切换到上一个选项卡时，我必须保留选项卡的值并将其显示在文本区域中。

我使用了脚本

```
$(function() {
    $( "#tabs" ).tabs();
});
$(function() {
  $("#t1").unbind("click").click(function()
    {
    $('#custom_text').val("");
    $("#custom_text").unbind("keyup").keyup(function()
        {
    $('#tab1').text('').append($("#custom_text").val()); 
    });
});
  });
 $(function() {
  $("#t2").unbind("click").click(function()
    {
$('#custom_text').val("");
    $("#custom_text").unbind("keyup").keyup(function()
   {
    $('#tab2').text('').append($("#custom_text").val()); 

    });
});
  });
$(function() {
$("#t3").unbind("click").click(function()
    {
$('#custom_text').val("");
    $("#custom_text").unbind("keyup").keyup(function()
    {
    $('#tab3').text('').append($("#custom_text").val()); 

        });
});
}); 
```

我的 HTML 是

```
<div id="tabs">
<ul>
    <li id="t1"><a href="#tabs-1">TAB 1</a></li>
    <li id="t2"><a href="#tabs-2">TAB 2</a></li>
    <li id="t3"><a href="#tabs-3">TAB 3</a></li>
</ul>
<div id="tabs-1">
    <p>TAB 1 CONTENT</p>
  <div id="tab1"></div>
</div>
<div id="tabs-2">
    <p>TAB 2 CONTENT</p>
   <div id="tab2"></div>
</div>
<div id="tabs-3">
    <p>TAB 3 CONTENT</p>
   <div id="tab3"></div>
</div>

</div>
<textarea id="custom_text" rows="5" cols="30"></textarea> 
```

我做了一个[BIN](http://jsbin.com/ifeyif/1/)。请帮助我在程序中出错的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:38:24.653

`$(document).ready`您的 jQuery 函数中似乎缺少您。而且您还需要提供 $("#t1").ready(function() 因为 t1 是默认选项卡，无需单击即可呈现。因此，`script`像这样修改您的部分：

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" />
    <script>
    $(document).ready(function(){
        $( "#tabs" ).tabs();

        $("#t1").ready(function()
        {
            $('#custom_text').val("");
            $("#custom_text").unbind("keyup").keyup(function()
            {
                $('#tab1').text('').append($("#custom_text").val()); 
            });
        });

        $("#t1").unbind("click").click(function()
        {
            $('#custom_text').val("");
            $("#custom_text").unbind("keyup").keyup(function()
            {
                $('#tab1').text('').append($("#custom_text").val()); 
            });
        });

        $("#t2").unbind("click").click(function()
        {
            $('#custom_text').val("");
            $("#custom_text").unbind("keyup").keyup(function()
            {
                $('#tab2').text('').append($("#custom_text").val()); 
            });
        });

        $("#t3").unbind("click").click(function()
        {
            $('#custom_text').val("");
            $("#custom_text").unbind("keyup").keyup(function()
            {
                $('#tab3').text('').append($("#custom_text").val()); 
            });
        });
    });
    </script>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:22:34.080

如果我做对了，您希望使用之前输入的选项卡的值填充 textarea。如果是这样，请替换行

```
$('#custom_text').val(""); 
```

和

```
$('#custom_text').val($("#tab1").text()); 
```

并为所有选项卡执行此操作。

# jquery - jQuery拖放设置元素的位置

> ID：14038147
> 
> 赞同：0
> 
> 时间：2012-12-26T08:51:19.040
> 
> 标签：jquery, jquery-ui, drag-and-drop

我想创建一个水平滚动的时间轴，可以在时间轴上拖动事件。为此，我创建了一个动态网格并使用了 jQuery ui 拖放。

它运行良好，但是当我水平滚动它时，放置元素的位置没有改变。所以，可能我必须保持所有丢弃的元素位置。有没有简单的方法来实现这一点，我的意思是使用 css 等。

```
 var dropBox;
    var drag;
    var maxEventsInMonth = 10;
    var maxDataRow = 6; 
```

请参考。

[http://jsfiddle.net/dipal/GSNrX/14/](http://jsfiddle.net/dipal/GSNrX/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:38:48.327

您可以在 dragstart 上克隆元素并用克隆替换目标 HTML 并删除拖动的元素。所以你有图像，因为它本来就在网格内。

我刚刚从您的默认代码中制作了一个 jsfiddle ( [http://jsfiddle.net/uDYEr/](http://jsfiddle.net/uDYEr/) ) 并注释掉了 handleDrop 函数，因为这会导致错误，我不想清理您的代码；-)

我主要做了以下几点：

添加两个新变量：

```
 var dragClone = false;
    var dragElement = false; 
```

在开始时克隆元素：

```
 $('#drag li').draggable({
            revert: "invalid",
            cursor: "move",
            start : function() {
                dragClone = $(this).clone();
                dragElement = $(this);
            }
        }); 
```

然后附加`dragClone`到目标并删除`dragElement`：`drop`

```
 dropBox.droppable({
            accept: "#drag li",
            scroll: true,
            drop: function (event, ui) {
                $(this).html(dragClone);
                dragElement.remove();
              // handleDrop($(this), event, ui);
                return true;
            }
        }); 
```

希望这可以帮助。或者至少让你知道如何做到这一点。

# android - 打开自定义对话框的开关

> ID：14038149
> 
> 赞同：0
> 
> 时间：2012-12-26T08:51:27.073
> 
> 标签：android, dialog, oncheckedchanged

我有一个打开自定义对话框的开关。在 onCheckedChanged() 方法中，我实例化了表示对话框的类并调用方法 show()。问题是对话框仅在 onCheckedChanged() 结束后打开。我尝试在对话框类的构造函数中调用 show() 但同样的事情发生了。

该对话框供用户设置提醒的时间和日期。在对话框中还有三个按钮“OK”、“Cancel”和“Reset”。问题是，如果用户单击“取消”，我想将开关更改为“关闭”，但对话框仅在 onCheckedChanged() 结束后打开，当我单击“取消”时，对话框刚刚关闭并且开关保持“在”。

对话类：

```
public class DateTimePickerDialog extends Dialog implements OnDateChangedListener,     OnTimeChangedListener, View.OnClickListener 
{
private Calendar calendar;
private DatePicker datePicker;
private TimePicker timePicker;
private ViewSwitcher viewSwitcher;
private Button btnSwitchToTime;
private Button btnSwitchToDate;
private Button btnOk;
private Button btnReset;
private Button btnCancel;
private boolean reminderFlag;

/**
 * Constructor
 * @param context
 */
public DateTimePickerDialog(Context context)
{
    super(context);

    setContentView(R.layout.dialog_datetimepicker);
    setTitle(R.string.title_dialog_datetimepicker);

    // set the calendar with the current date
    calendar = Calendar.getInstance();
    calendar.getTime();

    // set the reminder flag. this flag is for setting the ToggleButton in the parent activity
    reminderFlag = true;

    // initialize the date picker and the time picker with current time and date
    datePicker = (DatePicker) findViewById(R.id.picker_DatePicker);
    timePicker = (TimePicker) findViewById(R.id.picker_TimePicker);
    resetDateTime();

    // set listener for the time picker
    timePicker.setOnTimeChangedListener(this);

    // populate the view switcher
    viewSwitcher = (ViewSwitcher) findViewById(R.id.viewSwitcher_DateTimePicker);

    // populate and set listeners for all the buttons
    btnSwitchToTime = (Button) findViewById(R.id.button_SwitchToTime);
    btnSwitchToTime.setOnClickListener(this);

    btnSwitchToDate = (Button) findViewById(R.id.button_SwitchToDate);
    btnSwitchToDate.setOnClickListener(this);

    btnOk = (Button) findViewById(R.id.button_Ok);
    btnOk.setOnClickListener(this);

    btnReset = (Button) findViewById(R.id.button_Reset);
    btnReset.setOnClickListener(this);

    btnCancel = (Button) findViewById(R.id.button_Cancel);
    btnCancel.setOnClickListener(this);

    this.show();    
}

@Override
public void onClick(View view)
{
    switch(view.getId())
    {
        case R.id.button_SwitchToTime:
            btnSwitchToTime.setEnabled(false);
            findViewById(R.id.button_SwitchToDate).setEnabled(true);
            viewSwitcher.showNext();
            break;

        case R.id.button_SwitchToDate:
            btnSwitchToDate.setEnabled(false);
            findViewById(R.id.button_SwitchToTime).setEnabled(true);
            viewSwitcher.showPrevious();
            break;

        case R.id.button_Cancel:
            reminderFlag = false;
            dismiss();
            break;

        case R.id.button_Ok:
            dismiss();
            break;

        case R.id.button_Reset:
            resetDateTime();    
            break;
    }

}

@Override
public void onTimeChanged(TimePicker view, int hourOfDay, int minute)
{
    calendar.set(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), hourOfDay, minute);    
}

@Override
public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth)
{
    calendar.set(year, monthOfYear, dayOfMonth, calendar.get(Calendar.HOUR_OF_DAY), calendar.get(Calendar.MINUTE)); 
}

/**
 * Reset DatePicker, TimePicker and the member calendar
 */
public void resetDateTime()
{
    calendar = Calendar.getInstance();
    calendar.getTime();
    datePicker.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), this);
    //datePicker.updateDate(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
    timePicker.setCurrentHour(calendar.get(Calendar.HOUR));
    timePicker.setCurrentMinute(calendar.get(Calendar.MINUTE));
}

/**
 * Get the reminder's time and date
 * @return calendar
 */
public Calendar getReminderTimeAndDate()
{
    return calendar;
}

public boolean isReminderFlag()
{
    return reminderFlag;
}

public void setReminderFlag(boolean reminderFlag)
{
    this.reminderFlag = reminderFlag;
} 
```

}

对话框的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/DateTimePicker"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:fitsSystemWindows="true"
android:padding="5dip" >

<LinearLayout
    android:id="@+id/ViewSwitchButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dip" >

    <Button
        android:id="@+id/button_SwitchToDate"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:enabled="false"
        android:text="Set date" />

    <Button
        android:id="@+id/button_SwitchToTime"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Set time" />
</LinearLayout>

<ViewSwitcher
    android:id="@+id/viewSwitcher_DateTimePicker"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ViewSwitchButtons" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:fillViewport="true" >

        <DatePicker
            android:id="@+id/picker_DatePicker"
            android:calendarViewShown="false"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:fillViewport="true" >

        <TimePicker
            android:id="@+id/picker_TimePicker"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip" />
    </LinearLayout>
</ViewSwitcher>

<LinearLayout
    android:id="@+id/OkResetCancelButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/viewSwitcher_DateTimePicker"
    android:layout_marginBottom="5dip"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_Ok"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Ok" />

    <Button
        android:id="@+id/button_Reset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Reset" />

    <Button
        android:id="@+id/button_Cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Cancel" />
</LinearLayout> 
```

带有开关按钮的活动：

```
public class CreateNewTaskActivity extends Activity 
{
public final static String  EXTRA_DESCRIPTION = "il.ac.shenkar.remindme.DESCRIPTION";

private Calendar calendar;
private Context context;
private Switch switchReminder;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create_new_task);
    //getActionBar().setDisplayHomeAsUpEnabled(true);

    calendar = Calendar.getInstance();
    context = this;

    switchReminder = (Switch) findViewById(R.id.switch_reminder);
    switchReminder.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener()
    {   
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if(isChecked)
            {
                showDateTimePickerDialog(buttonView);
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_description, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

/**
 * Calls when the user clicks the "Create" button. 
 * @param view
 */
public void createNewTask(View view)
{
    // get the description from the EditText and check if it's valid
    EditText editText = (EditText) findViewById(R.id.edit_description);
    String description = editText.getText().toString();

    if (description.length() == 0)
    {
        Toast.makeText(CreateNewTaskActivity.this, "You must fill in description!", Toast.LENGTH_LONG).show();
    }
    else
    {
        Task newTask = new Task(description, new GregorianCalendar().getTimeInMillis(), false);
        TasksDAO tasksDao = TasksDAO.getInstance(this);
        tasksDao.addNewTask(newTask);
        finish();
    }
}

public void backToMainActivity(View view)
{
    finish();
}

/**
 * Open's up the dialog in which the user sets the date end the time.
 * In case the user cancelled the reminder via dialog, the switchReminder
 * will be set to "OFF" again.
 * @param view - which is the switchReminder
 */
public void showDateTimePickerDialog(CompoundButton view)
{
    DateTimePickerDialog dialog = new DateTimePickerDialog(context);
    if(dialog.isReminderFlag())
    {
        calendar = dialog.getReminderTimeAndDate();
        view.setChecked(true);
    }
    else
    {
        view.setChecked(false);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:36:41.773

使 DateTimePickerDialog 对话框成为 CreateNewTaskActivity 类的类成员，当您决定显示对话框时，将其实例化。所以基本上当对话框被取消时，根据任何活动的生命周期 onResume() 将被调用。在 CreateNewTaskActivity 类的 onResume() 方法中，首先检查 dialog.isReminderFlag() 是真还是假，然后相应地检查 n 取消选中它！因此，您的 CreateNewTaskActivity 类代码将如下所示：

```
public class CreateNewTaskActivity extends Activity 
{
public final static String  EXTRA_DESCRIPTION = "il.ac.shenkar.remindme.DESCRIPTION";

private Calendar calendar;
private Context context;
private Switch switchReminder;
private DateTimePickerDialog dialog;
@Override
public void onResume(){
    if(dialog != null){
    if(dialog.isReminderFlag())
    {
        calendar = dialog.getReminderTimeAndDate();
        view.setChecked(true);
    }
    else
    {
        view.setChecked(false);
    }
    }
}
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create_new_task);
    //getActionBar().setDisplayHomeAsUpEnabled(true);

    calendar = Calendar.getInstance();
    context = this;

    switchReminder = (Switch) findViewById(R.id.switch_reminder);
    switchReminder.setOnCheckedChangeListener(new             CompoundButton.OnCheckedChangeListener()
    {   
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if(isChecked)
            {
                showDateTimePickerDialog(buttonView);
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_description, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

/**
 * Calls when the user clicks the "Create" button. 
 * @param view
 */
public void createNewTask(View view)
{
    // get the description from the EditText and check if it's valid
    EditText editText = (EditText) findViewById(R.id.edit_description);
    String description = editText.getText().toString();

    if (description.length() == 0)
    {
        Toast.makeText(CreateNewTaskActivity.this, "You must fill in description!", Toast.LENGTH_LONG).show();
    }
    else
    {
        Task newTask = new Task(description, new GregorianCalendar().getTimeInMillis(),     false);
        TasksDAO tasksDao = TasksDAO.getInstance(this);
        tasksDao.addNewTask(newTask);
        finish();
    }
}

public void backToMainActivity(View view)
{
    finish();
}

/**
 * Open's up the dialog in which the user sets the date end the time.
 * In case the user cancelled the reminder via dialog, the switchReminder
 * will be set to "OFF" again.
 * @param view - which is the switchReminder
 */
public void showDateTimePickerDialog(CompoundButton view)
{
    dialog = new DateTimePickerDialog(context);
    if(dialog.isReminderFlag())
    {
        calendar = dialog.getReminderTimeAndDate();
        view.setChecked(true);
    }
    else
    {
        view.setChecked(false);
    }
} 
```

接口监听器：

```
 public interface IDialogListener {
    public void changeSwitchState(boolean state);
} 
```

类 YourMainActivity 实现 IDialogListener{

```
//implement the interface method
public void changeSwitchState(boolean state){
    //surround the UI change responsible codes like the one below inside UI thread runnable , activity.runOnUiThread();
    switch.setChecked(state);
    // if required invaliadate();//
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:17:59.437

使用 onClickListener 拦截任何触摸并从对话框中手动切换开关。

# android - 关于 androidaidl 对象

> ID：14038154
> 
> 赞同：0
> 
> 时间：2012-12-26T08:51:55.257
> 
> 标签：android, aidl

我必须用 IPC 传递我的对象，就像这个类

```
public class ForIpc {
    JsonObject info = new JSONObject();
    public void add(String key, String value) {
       info.put(key,value);
    } 
} 
```

ForIpc 可以实现 Parcelable，但是如何处理 JsonObject 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:01:51.990

您可以使用 JSON 字符串作为`JSONObject`.

```
 @Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(info.toString());
} 
```

并在从包裹中读取时将其解析回来。

```
info = new JSONObject(parcel.readString()); 
```

# javascript - 如何使用 jQuery/JavaScript 实现轮播效果

> ID：14038155
> 
> 赞同：1
> 
> 时间：2012-12-26T08:51:56.840
> 
> 标签：javascript, jquery, html, css, web

**[我在这里](http://www.charliegentle.co.uk/)**找到了一个 JavaScript 轮播。

当您在网页上单击右键或向左按钮时，页面会随着动画动态滚动，并且标题和内容的动画速度不同。
我想它可以用 jQuery 或 JavaScript 来完成。

使用传统的 JavaScript，很难实现这种移动的动画效果。
没有移动动画很容易实现，但是当涉及到移动动画的实现时，我认为这对我来说非常困难。

我为解决方案查找了 jQuery API，但我仍然不明白。有人可以给我一个提示如何实现这种效果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:16:38.363

动画时间相等，但动画元素的宽度不同。这很容易。类似视差的滑块。

这是解决方案：例如[http://jsfiddle.net/Tymek/6M5Ce/](http://jsfiddle.net/Tymek/6M5Ce/)

**HTML**

```
<div id="wrap">
    <div id="controls">
        <div class="prev">&larr;</div>
        <div class="next">&rarr;</div>
    </div>
    <div id="caption"><div class="pan">
        <div class="page"><h1>Lorem ipsum</h1></div>
        <div class="page"><h1>Litwo! Ojczyzno moja!</h1></div>
        <div class="page"><h1>Drogi Marszałku, Wysoka Izbo.</h1></div>        
    </div></div>

    <div id="content"><div class="pan">
        <div class="page"><p>Dolor sit amet enim. Etiam ullamcorper. Suspendisse a pellentesque dui, non felis. Maecenas malesuada elit lectus felis, malesuada ultricies. Curabitur et ligula. Ut molestie a, ultricies porta urna.</p></div>
        <div class="page"><p>Ty jesteś jak zdrowie. Nazywał się przyciągnąć do domu, fortuny szczodrot objaśniają wrodzone wdzięki i musiał pochodzić od Moskwy szeregów które już bronić nie chciałby do sądów granicznych. Słusznie Woźny cicho wszedł służący, i gdzie panieńskim rumieńcem dzięcielina pała.</p></div>
            <div class="page"><p>PKB rośnie Nikt inny was nie trzeba udowadniać, ponieważ zakres i miejsce szkolenia kadry odpowiadającego potrzebom. Gdy za sobą proces wdrożenia i rozwijanie struktur powoduje docenianie wag istniejących kryteriów zabezpiecza.</p></div>
    </div></div>
</div>​ 
```

**SCSS**

```
$sliderwidth: 400px;

#wrap {
    padding: 1em;
    background: #333;
}

h1 {
    font-weight: bold;
}

#controls {
    clear: both;
    height: 1em;
    margin: 0 0 1em 0;
    div {
        float: left;
        margin: 0 0.5em 0 0;
        padding: 0.2em;
        color: #FFF;
        background: #000;
        cursor: pointer;
    }
}

#caption, #content {
    background: #EEE;
    width: $sliderwidth;
    position: relative;
    overflow: hidden;
    .pan {
        width: 10000px;
        position: static;
    }
    .page {
        width: $sliderwidth;
        float: left;
        h1, p {
            margin: 0.2em 0.5em;
        }
    }
}
#content {
    .page {
        margin-right: $sliderwidth;
    }
}
​ 
```

**JS**

```
var slider = {
    length: parseInt($("#caption .page").length),
    current: 1,
    width: $("#caption").width(),
    next: function(){
        if(this.current < this.length){
            this.current = this.current + 1;
            this.animation();
        } else {
            this.current = 1;
            this.animation();
        }
    },
    animation: function(){
        var target = (0 - this.width) * (this.current - 1);
        this.run("#caption", target);
        target = target * 2;
        this.run("#content", target);
    },
    prev: function(){
        if(this.current > 1){
            this.current = this.current - 1;
            this.animation();
        } else {
            this.current = this.length;
            this.animation();
        }
    },
    run: function(part, target){
        $(part + " .pan").stop().animate(
            {"margin-left": target},
            1000
        );
    },
    initialize: function(){
        $("#controls .next").click(function(){slider.next();});
        $("#controls .prev").click(function(){slider.prev();});
    }
}

slider.initialize();
​ 
```

# iphone - iPhone应用程序中单个视频的过渡效果

> ID：14038160
> 
> 赞同：5
> 
> 时间：2012-12-26T08:52:39.520
> 
> 标签：iphone, avassetwriter, avvideocomposition

我想将淡入/淡出、翻转和页面卷曲过渡效果添加到使用`AVAssetWriter`和由图像数组创建的视频中`AVAssetComposition`。

我从 18:00 左右开始看到[“Working with Media in AV Foundation”讨论这个问题，但它显示了两个视频之间的淡入淡出效果。](https://developer.apple.com/videos/wwdc/2011/)我想要单个视频中每个图像之间的淡入淡出效果。并且还想要翻转和卷曲效果。

# wpf - WPF 模态对话框进入后台

> ID：14038161
> 
> 赞同：2
> 
> 时间：2012-12-26T08:52:53.333
> 
> 标签：wpf, c#-4.0

我遇到了一个应用程序的问题，其中模式 WPF 对话框偶尔会出现在主应用程序窗口的后面。当我单击对话框上的按钮时，会发生这种情况，该按钮在主应用程序窗口中进行一些处理和更新控件（通过绑定）。当它进入后台时 - 单击应用程序中的任意位置会将其带回前台。

```
 var dialog = LoadDialogWindowThroughMEF();
        dialog.Owner = Application.Current != null ? Application.Current.MainWindow : null;
        dialog.ShowInTaskbar = false;
        dialog.WindowStartupLocation = WindowStartupLocation.CenterOwner;
        return dialog.ShowDialog(); 
```

上面的代码显示了我如何打开模态窗口。这种情况很少发生。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T14:40:31.577

我不确定我是否有答案，但我可以分享一些我的想法：

每次遇到此类问题，都是因为`Owner`设置不正确。所以，我会尽量*不*设置`Owner`，看看这是否会使问题重现。您需要绝对确保`Owner`始终设置为正确的父窗口¹。您可能还想检查它是否`MainWindow`应该是父应用程序的实际应用程序。我认为大多数时候在你的代码中明确表示^(2是有益的。)在这种情况下，这意味着最好分配已知的父级（也许您在可以使用的某个地方引用了父级），而不是依赖于`Application.Current`为您提供该参考。这样做将使您能够控制对 的分配`Owner`。它甚至可以摆脱`?:`操作员，因为即使在单元测试期间您也可以控制引用。

我还希望您确保实际更新父窗口的代码不会以任何方式强制关注父窗口上的特定控件或类似的东西。（只要正确的父级设置为`Owner`，我不认为这是一个可能的问题。）

我希望这对你有帮助，但如果没有，我理解。当您单击父窗口时您的对话框重新出现的事实反驳了我的一些（或全部！）观点......

* * *

¹运行单元测试时除外，但那是完全不同的事情。

²根据[wiktionary.org/wiki/explicit](http://en.wiktionary.org/wiki/explicit)，与该词的第一个含义相同，并且与*implicit*相对。

# c# - 终止进程（Windows 8）问题

> ID：14038165
> 
> 赞同：10
> 
> 时间：2012-12-26T08:53:25.183
> 
> 标签：c#, process, windows-8

我大约一个月前安装了 Windows 8，并且遇到了当进程挂起时我无法结束/杀死它的问题。任务管理器和 CMD Taskkill /f /PID #### 都不会完成这项工作，所以我想我会用 C# 编写自己的进程杀手，看看会出现什么问题。

在编写了一个小应用程序后，我意识到我并不像我想象的那么聪明——我仍然无法结束这个过程。起初，我能够通过名称/PID 找到进程：

```
Process p = Process.GetProcessById(aPid)
//or
foreach (Process p in Process.GetProcessesByName(aProcessName) 
```

..并且当我尝试以下操作时出现“访问被拒绝”异常：

```
process.Kill(); 
```

..经过几次尝试改变后，我将无法再找到该过程。例如。当我试图通过名称或 PID 找到它时，没有返回任何内容，而该进程仍保留在任务管理器和我的屏幕上。

我还阅读了 Process @MSDN，它说如果进程已经终止或无法终止，则可以抛出“访问被拒绝”.. :(

帮助？真的没有办法强制结束进程吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T11:45:28.730

好吧，您基本上遇到了阻止任务管理器终止进程的相同问题。有两个可能的原因。一个与拒绝访问异常相关，该进程可能已经删除了对其他进程的访问权限以获取该进程的句柄。由于您在 Windows 8 上运行，因此您已安装 .NET 4.5。它为 Process 类提供了一种新方法，您可以调用`EnterDebugMode()`. 这使得`SeDebugPrivilege`, 可能足够好，现在可以`Kill()`工作了。

另一个是更大的问题，进程可能有一个在内核模式下处于活动状态的线程没有退出。最好的诊断方法是使用任务管理器的详细信息选项卡，右键单击列标题之一并选择“选择列”。勾选“手柄”。查看进程的显示值。如果您看到一个非零值，则该进程很可能打开了句柄并等待设备驱动程序执行 I/O 请求。否则，该设备驱动程序不会受到 Windows 要求它取消请求的影响。缩小麻烦制造者的范围并不容易，您必须更多地了解您的进程执行的 I/O 请求类型。通过在 superuser.com 上询问有关它的问题来跟进此问题

# joomla - 从 1.5 升级到 2.5 后，文章内容未显示在 joomla 2.5 中

> ID：14038170
> 
> 赞同：2
> 
> 时间：2012-12-26T08:53:58.980
> 
> 标签：joomla, joomla2.5, joomla1.5

我的 joomla 2.5 网站有问题。

我将我的网站从 joomla 1.5 升级到 2.5 版本。升级后，文章不显示。

它显示文章标题但不显示内容。我授予该网站的权限，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T05:52:13.773

我得到了真正的解决方案

即：转到 jupgrade/template/html 文件夹并删除或重命名 com_content 文件夹

然后它将正常工作

谢谢你们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:52:37.267

您的网站具有以下 url 结构 [http://keralacarpentry.com/freedom2/index.php?Itemid=2](http://keralacarpentry.com/freedom2/index.php?Itemid=2)

但是 joomla 组件 url 结构是这样的 [http://www.example.com/index.php?option=com_content&view=article&id=29](http://www.example.com/index.php?option=com_content&view=article&id=29)。检查您的 joomla 1.5 网站网址并将其与 2.5 网址进行比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-01T08:47:50.457

转到您的旧 joomla 1.5 模板文件夹，查找 html 文件夹并将 com_content 文件夹重命名为其他任何内容。文章内容应显示出来。

# objective-c - 来自整个应用程序的 AQXMLParser 和 EXC_BAD_INSTRUCTION

> ID：14038175
> 
> 赞同：2
> 
> 时间：2012-12-26T08:54:44.297
> 
> 标签：objective-c, ios, cocoa, debugging

许多与此主题相关的崩溃报告。这可能是什么原因造成的？它永远不会在同一个地方两次。我正在使用 AQXMLParser，但崩溃总是在某个与此无关的地方。我不是在寻求帮助来诊断此问题的具体原因，这似乎是 XML 解析器委托中的一些糟糕的内存管理（在我加入之前编写的）。所以我的问题是：是否存在某种类型的编程错误会表现出这种行为？我想学习，所以我知道将来要寻找什么。

```
0    <MY APPLICATION> ✭  <SOME RANDOM CLASS THAT HAS NOTHING TO DO WITH XML PARSING>.m line 687
-[<SOME RANDOM  THAT HAS NOTHING TO DO WITH XML PARSING>:] + 687
1
...
libxml2.2.dylib 
__xmlRaiseError + 898
2    libxml2.2.dylib    
xmlFatalErr + 952
3    libxml2.2.dylib    
xmlParseEntityRef + 104
4    libxml2.2.dylib    
xmlParseReference + 270
5    libxml2.2.dylib    
xmlParseTryOrFinish + 1422
6    libxml2.2.dylib    
xmlParseChunk + 212
7    MyApplication   AQXMLParser.m line 1238
-[AQXMLParser stream:handleEvent:] + 1238
8    CoreFoundation 
_signalEventSync + 74
9    CoreFoundation 
_cfstream_shared_signalEventSync + 240
10
...
CoreFoundation  
__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
11   CoreFoundation 
__CFRunLoopDoSources0 + 212
12   CoreFoundation 
__CFRunLoopRun + 646
13   CoreFoundation 
CFRunLoopRunSpecific + 356
14   CoreFoundation 
CFRunLoopRunInMode + 104
15   Foundation 
-[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 254
16   MyApplication   AQXMLParser.m line 1115
-[AQXMLParser inputRunRunLoopInMode:] + 1115
17   MyApplication   AQXMLParser.m line 1164 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:05:54.000

这原来是旧版本 AQXMLParser 中的一个错误。更新到最新修复它。

# git - 如何创建一个“私人分叉”，与原点保持同步并推回？

> ID：14038177
> 
> 赞同：2
> 
> 时间：2012-12-26T08:54:46.343
> 
> 标签：git, github, pull-request

我已经克隆[了一个 github 项目](http://selfstarter.us/)，并且必须私下进行一些修改（例如输入付款信息）。Github 不允许我将分叉的 repo 设为私有，说我应该[复制它](https://help.github.com/articles/duplicating-a-repo)。

按照他们的指示对我不起作用（出现了一些错误，在他们的支持下工作）。尽管如此，我还是不明白流程 - 我需要能够做到所有这些：

1.  需要时从原始存储库获取更新。
2.  至少保留一个存储库私有。
3.  进行一些更改并将它们推回原点。也许这将需要一个额外的公共存储库。

我不确定如何将所有这些同步在一起的最佳做法是什么。有什么建议给我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:11:46.180

如果您不关心将您的提交推送到“保存”它们在远程*私有*服务器上，只需在只读版本（实际上是本地版本）上进行简单的克隆。

否则，您可以使用[Bitbucket](https://bitbucket.org/)推送您的私人资料：

```
$ git clone … # the original project
$ git remote add ghost git@bitbucket.org/your_own_repo.git
$ git fetch origin # fetch the original
$ git push ghost master # push the head master into your own repo 
```

当您需要通过原始项目进行更新时：

```
$ git pull origin *the_branch* 
```

并将数据推送到：

```
$ git push ghost *the_branch* 
```

**但**就像 JB Nizet 所说，我看不出这里有什么意义。为什么不以正常方式贡献？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:13:06.263

如果您的私有修改是更私有的配置*值*，那么：

*   根本不要在 git repo（任何 git repo）中对这些值进行版本控制：意外将它们推送到您不应该太高的风险。
*   将它们存储在另一个引用中（任何允许您保存文件的云服务，甚至可能是加密的）：这里不需要“私人分叉”。
*   仅版本该配置文件的*模板*和具有公共值的文件。
*   使用内容过滤器驱动程序：
    *   检查您是否在正确的环境（例如您的计算机）中签出 Git 存储库
    *   如果是这样，请访问您的其他引用，取回值并生成具有正确（私有）值的最终配置文件。

![弄脏](../Images/cec7ff10c93b68fdffb0f06f1a266eee.png)

有关具体示例，请参[见此答案](https://stackoverflow.com/a/13100446/6309)。

# android - 如何在片段中填充列表视图

> ID：14038178
> 
> 赞同：0
> 
> 时间：2012-12-26T08:54:50.453
> 
> 标签：android

您好我有一个包含布局的活动，该布局分为两个线性布局。第一个布局有 4 个按钮。第二个有碎片。基本上每次按下按钮，都会显示一个新片段。所有片段都有一个布局。此布局有一个编辑文本字段、一个按钮和一个列表视图。现在一切正常，到目前为止没有错误。但是我遇到的问题是，当我尝试创建一个数据库对象并将片段类的上下文作为参数传递给构造函数时，它只是显示一个错误。这是代码...请看一下并指导我如何解决问题。

```
 String text = null;
    EditText enter_task;
    // enter_task would be provided with its id, not a problem,
    text = enter_task.getText().toString();
    try{
    // this is where te problem is
    // normally I could pass the context of the activity within the constructr of database       class as parameter. But since this class is a fragment, I am simply not able to do so.            

    myDatabase_today = new Database(MyFragment_today.this);
    } 
```

eclispe 为该问题提供的解决方案是：

1-> 将构造函数数据库（上下文）更改为数据库（MyFragment_today）。// 这里 MyFragment_today 是片段类的名称

2-> 创建构造器数据库（MyFragment_today）。

谁能解决这个问题。我的意思是我们可以传递活动的上下文，但不能传递片段类的上下文，然后如何进一步进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:34:25.890

使用 getActivity() 代替 Fragment 类名

```
myDatabase_today = new Database(getActivity()); 
```

# java - 在 android 模拟器上上网时出现错误“process com.android.setting”

> ID：14038180
> 
> 赞同：0
> 
> 时间：2012-12-26T08:55:34.570
> 
> 标签：java, android, android-emulator

我正在尝试在我的 Android 模拟器上使用 Internet。当我打开浏览器时，出现错误**"No Internet connection"**。当我进入设置 -> 无线和网络 -> 移动网络时，我得到“**应用程序设置”进程 com.android.setting** “已意外停止。” 错误

任何人都可以建议我解决这个问题。

任何帮助表示赞赏。

谢谢

注意：我没有处理任何应用程序。我只是想打开android模拟器的默认浏览器。

日志猫：

```
12-26 14:31:37.688: D/AndroidRuntime(481): Shutting down VM
12-26 14:31:37.688: W/dalvikvm(481): threadid=1: thread exiting with uncaught exception (group=0x4001d7f0)
12-26 14:31:37.707: E/AndroidRuntime(481): FATAL EXCEPTION: main
12-26 14:31:37.707: E/AndroidRuntime(481): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.android.phone/com.android.phone.Settings}; have you declared this activity in your AndroidManifest.xml?
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.app.Activity.startActivityForResult(Activity.java:2817)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.app.Activity.startActivity(Activity.java:2923)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.preference.Preference.performClick(Preference.java:828)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:190)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.widget.ListView.performItemClick(ListView.java:3401)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.os.Handler.handleCallback(Handler.java:587)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.os.Looper.loop(Looper.java:123)
12-26 14:31:37.707: E/AndroidRuntime(481):  at android.app.ActivityThread.main(ActivityThread.java:4662)
12-26 14:31:37.707: E/AndroidRuntime(481):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 14:31:37.707: E/AndroidRuntime(481):  at java.lang.reflect.Method.invoke(Method.java:521)
12-26 14:31:37.707: E/AndroidRuntime(481):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:879)
12-26 14:31:37.707: E/AndroidRuntime(481):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:637)
12-26 14:31:37.707: E/AndroidRuntime(481):  at dalvik.system.NativeStart.main(Native Method)
12-26 14:31:37.717: W/ActivityManager(75):   Force finishing activity com.android.settings/.WirelessSettings
12-26 14:31:37.817: I/SurfaceFlinger(75): 
12-26 14:31:37.817: I/SurfaceFlinger(75): SurfaceFlinger::createSurface() : layer->mIdentity=68, LayerName= Sorry! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:13:11.817

试试，打开 AVD manager -> your emulator -> Edit.-> Hardware->New->GSM Modem Support。如果仍然无法正常工作

**Android 模拟器上没有互联网 - 为什么以及如何修复？** [读这个](https://stackoverflow.com/questions/2206822/no-internet-on-android-emulator-why-and-how-to-fix)

**如何将 android 模拟器连接到互联网** [阅读此内容](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)

# php - PHP - 在下拉列表中按字母顺序对目录进行排序

> ID：14038186
> 
> 赞同：0
> 
> 时间：2012-12-26T08:55:59.240
> 
> 标签：php, sorting, directory

我将如何对目录进行排序以按字母顺序显示下拉列表？

```
<select name=country>
<?php
$handle=opendir("images/flags");
while (false!==($file = readdir($handle))) { 
  if ($file != "." && $file != "..") { 
    $country = substr($file,0,strpos($file,'.'));
    echo "<option value=\"".$file."\"><center>".$country."</center></option>\n";
  } 
}
closedir($handle);
?>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:59:34.807

采用

```
array scandir ( string $directory [, int $sorting_order = SCANDIR_SORT_ASCENDING [, resource $context ]] ) 
```

> 默认情况下，排序顺序是按字母升序排列的。如果可选的排序顺序设置为 SCANDIR_SORT_DESCENDING，那么排序顺序是按字母降序排列的。如果它设置为 SCANDIR_SORT_NONE 则结果未排序。

更多关于[scandir的阅读](http://php.net/manual/en/function.scandir.php)

**另一个解决方案：**

```
<?php
$dir = "images/flags";
$dh  = opendir($dir);
while (false !== ($filename = readdir($dh))) {
    $files[] = $filename;
}

sort($files);

print_r($files);

rsort($files);

print_r($files);

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:06:29.237

您可以简单地使用：

```
$ao = new ArrayObject(iterator_to_array(new FilesystemIterator(__DIR__ ."/test", FilesystemIterator::SKIP_DOTS)));
$ao->natsort(); //sort directory 
foreach ( $ao as $file ) {
    echo $file->getPathname() . PHP_EOL; 
} 
```

# django - 使用用户名作为参数时没有用户匹配给定的查询

> ID：14038187
> 
> 赞同：2
> 
> 时间：2012-12-26T08:56:01.310
> 
> 标签：django, http-status-code-404

到目前为止，我一直`(pk)`在我的应用程序的配置文件 URL 中使用用户 ID 作为参数。最近我决定使用`username`而不是用户ID所以我更改了以下内容：

## 网址.py

```
# This was what i was using previously
url(r'^profile/(?P<uid>\d+)/$', 'app.views.user_profile', name="profile"),

# Changed the above to this.
url(r'^profile/(?P<username>[-\w\d]+)/$', 'app.views.user_profile', name="profile"), 
```

## 视图.py

```
# Previous view
@login_required
def user_profile(request, uid):

    user = get_object_or_404(models.User, pk=uid)
    profile = helpers.get_profile(user)
    render_to_response('profile.html', {'profile' : profile})

# Changed the above to
@login_required
def user_profile(request, username):

    user = get_object_or_404(models.User, username=username)
    profile = helpers.get_profile(user)
    render_to_response('profile.html', {'profile' : profile}) 
```

直到现在一切都很好。当我尝试访问`127.0.0.1:8000/profile/some_username/`而不是以前的访问时，`127.0.0.1:8000/profile/some_number/`它工作正常。

我在 中有一个工具栏`profile.html`，其中包含以下链接：

```
/profile/edit/
/profile/settings/ 
```

在`urls.py`这些 url 中映射到非常简单的视图。比如下面这样。

```
@login_required
def profile_settings(request):
    """  
    This view helpers.renders the profile's settings panel
    """
    print 'hello'
    rec, can = helpers.get_user_or_noprofile(request.user)
    if not can is None:
        gform = forms.CandidateGeneralSettingsForm(instance=can)
        jsform = forms.CandidateJobSearchSettingsForm(instance=can)
        data = {'candidate' : can, 'gform' : gform, 'jsform' : jsform }
    else:
        form = forms.RecruiterSettingsForm(instance=rec)
        data = { 'recruiter' : rec, 'form' : form }
    return helpers.render(request, 'profile_settings.html', data) 
```

奇怪的部分是在我更改为`username`在个人资料网址中使用之后。只要我单击工具栏中的任何链接，我就会看到该`404 : Error : No User matches the given query.`页面。

为了调试，我尝试在这些视图中打印一些调试语句，并发现了一些更奇怪的东西。即使我在视图中注释了整个代码并且只写了一条打印语句，也没有打印任何内容。

这让我怀疑问题可能出在`login_required`装饰器上。但如果是这种情况，它在 visitng 时如何工作`127.0.0.1:8000/profile/some_username/`。

我真的想不出任何可能导致这种情况的原因。任何帮助将不胜感激。谢谢。

PS：另外，JFYI，我正在使用自定义电子邮件身份验证后端，它允许用户通过他们的电子邮件地址而不是用户名登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:02:04.520

它不起作用，因为`edit`它不是有效的用户名。

此 url`/profile/edit/`匹配`^profile/(?P<username>[-\w\d]+)/$`，并`username`变为`edit`.

由于您没有名为“edit”的用户，因此此操作`user = get_object_or_404(models.User, username=username)`失败并引发`404`.

对于`/profile/settings/`.

# java - 未找到另一个 MVC 映射

> ID：14038190
> 
> 赞同：0
> 
> 时间：2012-12-26T08:56:32.180
> 
> 标签：java, spring, model-view-controller, servlets, mapping

我之前已经设置了一些 Spring MVC 配置，但这次我似乎遗漏了一些东西。配置如下：

**网页.xml：**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/dispatcher-servlet.xml
    </param-value>
</context-param>    

<listener>
    <listener-class>org.jboss.resteasy.plugins.spring.SpringContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/test/*</url-pattern>
</servlet-mapping> 
```

**调度程序-servlet.xml：**

```
<context:annotation-config />

<context:component-scan base-package="mypackage.controller" />

<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="/gupld">uploadController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

**人控制器.java：**

```
package mypackage.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class MainController {

    @RequestMapping("/test")
    public ModelAndView welcome() {
        ModelAndView mav = new ModelAndView("_index");
        return mav;
    }
} 
```

当我打电话时，`http://127.0.0.1:8080/mycontext/test/`我得到：

```
http-8080-1 INFO  2012-12-26 09:27:24,799 SimpleUrlHandlerMapping - Mapped URL path [/test] onto handler 'mainController'
http-8080-1 WARN  2012-12-26 09:27:24,887 PageNotFound - No mapping found for HTTP request with URI [/mycontext/test/] in DispatcherServlet with name 'dispatcher' 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:24:48.543

您正在使用 url-pattern`/test/*`来加载`dispatcher`servlet。

但是您发送`/mycontext/test/`的不是映射到提供的网址。

尝试使用这个，

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/*/test</url-pattern>
</servlet-mapping> 
```

或使用此

```
<servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

# javascript - 如何在jQuery中的href之前显示图像src

> ID：14038191
> 
> 赞同：1
> 
> 时间：2012-12-26T08:56:33.777
> 
> 标签：javascript, jquery

有这个块：

```
jQuery(document).ready(function($) {
$("img[src$='.jpeg'], img[src$='.jpg'], img[src$='.png'], img[src$='.gif']").wrap('<div class="b-img"/>').each(function() {
        var src = $(this).attr('src');
        var a = $('<a/>').attr('href', src).addClass('img-link').colorbox();    
        $(this).wrap(a);
        });
})(jQuery); 
```

之后有链接，`<a href=""></a><img src>...`但我需要`<img src>`之前`<a href="">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:59:29.377

您可以使用[after()](http://api.jquery.com/after/)而不是`wrap`

```
jQuery(document).ready(function($) {
$("img[src$='.jpeg'], img[src$='.jpg'], img[src$='.png'], img[src$='.gif']").wrap('<div class="b-img"/>').each(function() {
        var src = $(this).attr('src');
        var a = $('<a/>').attr('href', src).addClass('img-link').colorbox();    
        $(this).after(a);
        });
})(jQuery); 
```

*根据 OP 的评论进行编辑，用于更改图像 src*

```
jQuery(document).ready(function($) {
$("img[src$='.jpeg'], img[src$='.jpg'], img[src$='.png'], img[src$='.gif']").wrap('<div class="b-img"/>').each(function() {
        var src = $(this).attr('src');
        var a = $('<a/>').attr('href', src).addClass('img-link').colorbox();    
        $(this).after(a);
        $(this).attr('src', 'http://www.yoursite.com/images/img1.jpg');
        });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:01:10.260

[insertBefore()](http://api.jquery.com/insertbefore/)在之前插入元素`this`，如下所示：

```
$(function() {
   $("img").wrap('<div class="b-img"/>').each(function() {
     $('<a />', {href: this.src, 'class': 'img-link'}).colorbox().insertBefore(this);    
   });​
});​ 
```

此外，不需要检查所有可用的图像文件扩展名，如果您有 svg 等图像，请改用类。

# google-maps - 我想要提供该区域的特定区域名称的密码

> ID：14038206
> 
> 赞同：3
> 
> 时间：2012-12-26T08:58:53.633
> 
> 标签：google-maps, geocode, postal-code

我需要一个地区和城市的名称，我将邮政编码作为参数传递。

例如我试过

> [http://maps.google.com/maps/api/geocode/json?address=382340&components=country:in&sensor=false](http://maps.google.com/maps/api/geocode/json?address=382340&components=country:in&sensor=false)

印度的邮政编码。

尽管这给出了具有不相关数据的多个结果。我可以使用地理编码 API 获取坐标。我不需要坐标，只需要与邮政编码对应的地区名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T11:27:57.033

试试这个

```
http://maps.google.com/maps/api/geocode/json?address=india&components=postal_code:400003&sensor=false 
```

这将返回正确的结果，可以进一步修剪以获得相关数据。

# java - 在 Android 中使用图像拼写单词

> ID：14038207
> 
> 赞同：1
> 
> 时间：2012-12-26T08:58:56.890
> 
> 标签：java, android, eclipse, android-edittext, motodev-studio

好吧，我的问题很简单

在我的布局中，我有一个 EditText 和两个 ImageView

我在两个 ImageView 中输入任何单词 EditText，我必须根据字母显示图像，将其作为 EditText 调用的单词发送，当你想调用一个字母时，我的问题就出现了：

如果我输入单词“home”应该进入单词并根据字母显示两个ImageView图像然后会显示C（图像C）然后是A（图片A）

问题是我可以制作找到一个字母的过程，我试过用for但只识别最后一个字母，我也尝试过一种延迟（延迟）但没有奏效

我的代码的一部分：

```
public class deletreo extends Activity {

    protected TextView tv;
    protected EditText etxt;
    protected ImageView img,img2;

    final Handler handle = new Handler();

    protected void mth(){
        Thread t = new Thread(){
            public void run(){

                try{
                    Thread.sleep(1000);
                }catch(InterruptedException e){
                    e.printStackTrace();
                }
                handle.post(proceso);
            }
        };
        t.start();
    }

    final Runnable proceso = new Runnable(){
        public void run(){
            letra();
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        tv = new TextView(this);
        setContentView(R.layout.deletreo);

        etxt = (EditText)findViewById(R.id.text);
        Button btn = (Button)findViewById(R.id.btn7);

        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                mth();

            }   
        });

    }//fin bundle

     private void letra()  {

        String t = etxt.getText().toString();

            char[] array = t.toCharArray();
            int p = array.length;

                for(int j=0; j<p;j++){

                    if(array[j] == 'a' || array[j] == 'A'){
                        img = (ImageView)findViewById(R.id.img);
                        img.setImageResource(R.drawable.aa);
                        img2 = (ImageView)findViewById(R.id.img2);
                        img2.setImageResource(R.drawable.image_1);
                        onStop();
                    }

                        if(array[j] == 'b' || array[j] == 'B'){
                            img = (ImageView)findViewById(R.id.img);
                            img.setImageResource(R.drawable.bb);
                            img2 = (ImageView)findViewById(R.id.img2);
                            img2.setImageResource(R.drawable.image_2);

                        } 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:22:35.583

> 问题是我可以制作找到一个字母的过程，我试过用for但只识别最后一个字母，我也尝试过一种延迟（延迟）但没有奏效

当然，它的行为方式是这样的。因为您在启动时延迟了 1 秒，然后您正在调用方法，该方法`letra()`在循环中的两个图像视图中设置图像资源。因此，您只能看到与最后一个字母关联的图像。

试试这种方式：

```
public class deletreo extends Activity {

    protected TextView tv;
    protected EditText etxt;
    protected ImageView img,img2;

    final Handler handle = new Handler();

    protected void mth(){
        Thread t = new Thread(){
            public void run(){

                try{
                    Thread.sleep(1000);
                }catch(InterruptedException e){
                    e.printStackTrace();
                }

            }
        };
        t.start();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        tv = new TextView(this);
        setContentView(R.layout.deletreo);

        etxt = (EditText)findViewById(R.id.text);
        Button btn = (Button)findViewById(R.id.btn7);

        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                letra();

            }   
        });

    }//fin bundle

     private void letra()  {

        String t = etxt.getText().toString();

            char[] array = t.toCharArray();
            int p = array.length;

            for(int j=0; j<p;j++){

            if(array[j] == 'a' || array[j] == 'A'){
                img = (ImageView)findViewById(R.id.img);
                img.setImageResource(R.drawable.aa);
                img2 = (ImageView)findViewById(R.id.img2);
                img2.setImageResource(R.drawable.image_1);
                onStop();
                    }

            if(array[j] == 'b' || array[j] == 'B'){
                img = (ImageView)findViewById(R.id.img);
                img.setImageResource(R.drawable.bb);
                img2 = (ImageView)findViewById(R.id.img2);
                img2.setImageResource(R.drawable.image_2);

            }
            mth();
        }
    }
} 
```

每轮循环后调用延迟函数 mth()。希望它有效。

# z3 - Z3 的 Prove() 方法？

> ID：14038210
> 
> 赞同：3
> 
> 时间：2012-12-26T08:59:23.137
> 
> 标签：z3

Z3 有一个`prove()`方法，可以证明两个公式的等价性。

但是，我找不到这种`prove()`方法的技术文档。`prove()`幕后使用的“等效”定义是什么？那是“部分等价”（在“回归验证”论文中提出），还是更强大的东西？

提醒一下，“部分等价”保证两个公式是等价的，如果给定相同的输入，它们会产生相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:12:28.010

*在“回归验证”中，我们正在检查程序*的新版本是否产生与早期版本相同的输出。也就是说，它是一种检查*程序等价*性的方法。在这种方法中，使用了诸如 Z3 之类的定理证明器（SMT 求解器）。话虽如此，我们不应该将*程序等价*与一阶逻辑中的*公式等价混淆。*Z3 处理一阶逻辑公式。[一阶逻辑](http://en.wikipedia.org/wiki/First-order_logic)具有明确定义的语义。一个关键概念是可满足性。例如，公式`p or q`是可满足的，因为我们可以通过将`p`or赋值为 true 来使其`q`为真。另一方面，`p and (not p)`是不能满足的。我们可以在[Z3教程的这一部分](http://rise4fun.com/Z3Py/tutorialcontent/guide#h26)。

Z3 API 提供了检查一阶公式可满足性的过程。Z3 Python 接口有一个`prove`过程。它通过证明它的否定是不可满足的来表明一个公式是有效的。这是一个建立在 Z3 API 之上的简单函数。[这是](http://research.microsoft.com/en-us/um/redmond/projects/z3/namespacez3py.html#a21b6ef52d707f1d6197271a212546c23)其文档的链接。文档是从代码中的 PyDoc 注释自动生成的。

请注意，`prove(F)`检查公式`F`是否有效。因此，我们可以用*一阶*公式来`prove(F == G)`尝试证明两个公式是等价的。也就是说，我们基本上表明这是一个有效的公式。*`F``G``F iff G`*

# android - 在 Matrix 中使用方法 setSinCos？

> ID：14038219
> 
> 赞同：1
> 
> 时间：2012-12-26T08:59:59.360
> 
> 标签：android, matrix

我们如何使用方法`setSinCos(float, float)`？Android文档说：

> 将矩阵设置为按指定的正弦和余弦值旋转。

但它是模棱两可的。例如我不知道正弦和余弦值的作用。我在谷歌搜索，但最后我发现了这种方法的一些用法，没有任何评论。感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:39:36.733

要将齐次坐标旋转（逆时针）任意角度 a，变换矩阵为：

```
[ cos(a)  -sin(a)  0 ]
[ sin(a)   cos(a)  0 ]
[   0        0     1 ] 
```

如果您有 sin/cos 的结果，setSinCos(s, c) 将创建以下矩阵：

```
[ c  -s  0 ]
[ s   c  0 ]
[ 0   0  1 ] 
```

你可能会问自己，为什么？好吧，考虑一下您希望将精灵旋转到由两点之间的斜率确定的任意角度的情况。您可以使用 arctan 或 arccos 确定角度，进行一些检查以确保您在右象限中，然后将新角度提供给 setRotate()。 **但是，当您已经有了 sin/cos 的值而不需要角度时（sin=dy/dist，cos=dx/dist），为什么？**

`setSinCos`满足了这一需求，这对程序员来说更容易，也更高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T10:45:54.743

问题并不那么简单，例如，如果我传递超过 1 的值怎么办？Android手册什么也没说，但很容易发现没有检查“真正的”正弦/余弦。刚刚使用了上面提到的'Dan'的变换矩阵。所以在一般情况下，一个不仅旋转而且同时缩放。我猜这不是错误，而是未记录的功能。

# sql - 可以使用关键字和/或通配符搜索来搜索 SQL Server 审计日志吗？

> ID：14038220
> 
> 赞同：1
> 
> 时间：2012-12-26T09:00:18.833
> 
> 标签：sql, sql-server, ssms, sql-server-2012, audit-logging

使用 SQL Server 2012。

我怎样才能做到这一点？

谢谢你。

# c# - 以月为单位查找给定年龄的出生日期

> ID：14038221
> 
> 赞同：-7
> 
> 时间：2012-12-26T09:00:25.100
> 
> 标签：c#, date-arithmetic

考虑到一个人的年龄（以月为单位），我真的很想计算出生日期。目前，我正在使用 C# 来做到这一点。但是，没能理解其中的逻辑。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:13:26.667

DateTime 具有从当前日期减去（实际上是添加负值）月份的完美方法。例如：

```
int ageInMonths = 18;
DateTime dt = DateTime.Today;
DateTime DateOfBirth = dt.AddMonths(-ageInMonths); 
```

# ruby-on-rails - 在 PostgreSQL 和 ROR 应用程序中按 Hstore Key 分组

> ID：14038223
> 
> 赞同：1
> 
> 时间：2012-12-26T09:00:41.553
> 
> 标签：ruby-on-rails, rails-postgresql, hstore

我正在开发一个 ROR 应用程序，我将 Hstore 与 PostgreSQL 数据库一起使用，我问我是否可以按表上的 Hstore 键进行分组？

我这样做了：

```
select state , count(*) from infractions group by details -> 'commune';` 
```

但我收到此错误：

```
column "infractions.state" must appear in the GROUP BY clause or be used in an aggregate function 
```

详细信息是 Hstore 列，她是我的详细信息的示例：

```
"adress"=>"", "commune"=>"14", "province"=>"6", "description"=>"Ce fichier est sous licence Creative Commons" 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:56:48.153

人们在从 MySQL 迁移时偶尔会遇到这种情况。MySQL 允许从`GROUP BY`子句中省略列。PostgreSQL 没有。您的实际问题是您缺少 state 列。你有两个选择。如果你只想拉一个状态，你可以把它放在这样的聚合中：

```
select max(state) , count(*) from infractions group by details -> 'commune'; 
```

如果您也想按州分组，您可以：

```
select state , count(*) from infractions group by state, details -> 'commune'; 
```

# codeigniter - 几种输入类型文本的 Codeigniter 表单验证

> ID：14038236
> 
> 赞同：0
> 
> 时间：2012-12-26T09:01:39.193
> 
> 标签：codeigniter

我有一组如下的文本框

```
<input type="text" size="10" value="<?php echo set_value('sizes[]'); ?>" name="sizes[]"/>
<input type="text" size="10" value="<?php echo set_value('sizes[]'); ?>" name="sizes[]"/>
<input type="text" size="10" value="<?php echo set_value('sizes[]'); ?>" name="sizes[]"/>
<input type="text" size="10" value="<?php echo set_value('sizes[]'); ?>" name="sizes[]"/>
<input type="text" size="10" value="<?php echo set_value('sizes[]'); ?>" name="sizes[]"/> 
```

那么如果我设置如下验证规则

```
array(
'field'   => 'sizes[]',
'label'   => 'SIZES',
'rules'   => 'required|xss_clean'
), 
```

然后 codeigniter 检查每个输入框的值。如果每个文本框都已填满，则 codeigniter 返回 true。但我想得到**如果他们中的任何一个人填满然后返回 true**

我怎样才能做到这一点？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:05:10.390

您可以在控制器中创建自定义验证函数并对输入实施您自己的检查。首先，向控制器添加一个新函数：

```
function _is_valid($str, $field_name)
{
    //First we see if the field name we are checking has multiple values
    if (!is_array($this->input->post($field_name))) 
        return false;

    //Let's get the posted values and see if any of them has a value:
    foreach ($this->input->post($field_name) as $value)
        if (strlen($value)) return true;

    //If we get here that means there was no value posted:
    return false;   
} 
```

接下来，更改该字段的规则：

```
'rules'   => 'required|xss_clean' 
```

至：

```
'rules'   => 'callback__is_valid[sizes]|xss_clean' 
```

您可以在此处阅读有关自定义验证功能的更多信息：

[http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks][1]

# nhibernate - 为什么我的 QueryOver ().RowCount() 抛出 NonUniqueResultException？

> ID：14038239
> 
> 赞同：1
> 
> 时间：2012-12-26T09:02:03.910
> 
> 标签：nhibernate, queryover

我通过为映射到视图的实体指定一个实体，将实体映射到表和视图，`entity-name`如下所示：

到表的映射：

```
<class name="Foo"> 
```

到视图的映射：

```
<class name="Foo" entity-name="LatestFoo"> 
```

然后我尝试在我的控制器中执行此操作：

```
var latestVersions = Database.QueryOver<Foo>("LatestFoo");
var count = latestVersions.RowCount(); 
```

但是调用`RowCount()`运行表和视图的 SQL 语句：

```
2012-12-26 13:30:55,700 [31] DEBUG NHibernate.SQL - SELECT count(*) as y0_ FROM LatestFoo this_
2012-12-26 13:30:55,705 [31] DEBUG NHibernate.SQL - SELECT count(*) as y0_ FROM Foo this_ 
```

这导致`NonUniqueResultException`带有消息`query did not return a unique result: 2`

我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:53:08.480

您还需要为到表的映射指定实体名称。

看看（滚动到部分 -**一些陷阱**）：

[http://nhibernate.info/doc/howto/mapping/mapping-the-same-class-to-a-view-and-a-table-using-entity-name.html](http://nhibernate.info/doc/howto/mapping/mapping-the-same-class-to-a-view-and-a-table-using-entity-name.html)

# java - 使用 java API 在 Telnet 中以编程方式添加用户

> ID：14038245
> 
> 赞同：0
> 
> 时间：2012-12-26T09:02:32.620
> 
> 标签：java, telnet

我正在使用 java API 在 telnet 添加用户。借助以下方法，我可以在控制台上打印数据...

```
 public void dataReceived(TelnetDataReceivedEvent event) {
        // print data received from telnet server to console
         System.out.print(event.getData());

        } 
```

在此代码的帮助下，我在控制台中打印了以下数据 ................ JAMES Remote Administration Tool 2.3.2 Please enter your login and password Login id: Password:欢迎根。HELP 获取命令列表 用户演示已添加......

它正在打印来自 telnet 服务器的完整数据，我想要的是它只显示最后一部分，即提示“添加用户演示”或“用户演示存在”等操作..我不需要其余信息，我对此很陌生，有人知道如何实现吗???请帮助..我正在为此使用Jscape。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:24:59.873

不要直接打印 event.getData() 。把它变成一个字符串，然后在打印之前修改它。您可以使用 substring 函数获取最后一部分。

如果您确定“最后一部分”的长度，可能是这样的：

```
 public void dataReceived(TelnetDataReceivedEvent event) {

try{
        // print data received from telnet server to console

String s=event.getData();

String final_data=s.substring(s.length()-14);
         System.out.print(final_data.Trim());
}

catch(Exception e)
{
System.out.println(e.message())

}
        } 
```

# ruby-on-rails - Rails 模型 - 如何区分不同类型

> ID：14038246
> 
> 赞同：0
> 
> 时间：2012-12-26T09:02:34.003
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我目前正在研究嵌套模型表单。我有一个主题模型。这个主题模型有 3 种不同类型的课程 - 教程、讲座和实验室。

我能够使用[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)获得嵌套表单。但我想修复它，以便在表单中只生成 3 个子表单（课程模型），并且他们的第一个字段（lesson_type 字段）将自动填写并修复。

我不太确定如何在 Rails 上模拟这种情况。这些是我到目前为止的代码。任何关于我可以尝试什么或指出我所犯错误的建议将不胜感激。

这是表格。现在我可以让表单在我的控制器上显示三次，但我不确定如何为字段生成不同的值。他们现在都在讲课。

```
<%= nested_form_for(@subject, :remote=>true) do |f| %>

  <div class="field">
    <%= f.label :subject_code %><br />
    <%= f.text_field :subject_code %>
  </div>

  <%= f.fields_for :lessons do |lesson_form| %>
     <%= lesson_form.label :lesson_type %><br/>
     <%= lesson_form.text_field :lesson_type, :value=> "lecture"%><br/>
     <%= lesson_form.label :name %><br/>
     <%= lesson_form.text_field :name %><br/>

  <%= lesson_form.fields_for :lesson_groups do |lesson_group_form| %>

       <%= lesson_group_form.label :group_index %><br/>
       <%= lesson_group_form.text_field :group_index %>
       <%= lesson_group_form.link_to_remove "Remove this task" %>

  <% end %>

  <p><%= lesson_form.link_to_add "Add a lesson_group",:lesson_groups,:id=>"open-lesson"%></p>

 <% end %>
<% end %> 
```

这是控制器。创建将在索引页面上进行。

```
 def index
    @subjects = Subject.all
    @subject = Subject.new

    lecture = @subject.lessons.build
    lecture.lesson_groups.build
    lecture.destroy

    tutorial = @subject.lessons.build
    tutorial.lesson_groups.build
    tutorial.destroy

    laboratory = @subject.lessons.build
    laboratory.lesson_groups.build
    laboratory.destroy

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @subjects }
      format.js
    end
  end 
```

主体模型

```
class Subject < ActiveRecord::Base
  attr_accessible :subject_code, :lessons_attributes
  has_many :lessons, :dependent => :destroy
  accepts_nested_attributes_for :lessons, :allow_destroy => :true, :reject_if => lambda { |a| a[:lesson_type].blank? }

end 
```

和课程模型

```
class Lesson < ActiveRecord::Base
  belongs_to :subject
  attr_accessible :lesson_type, :name, :subject, :lesson_groups_attributes
  has_many :lesson_groups, :dependent => :destroy
  accepts_nested_attributes_for :lesson_groups, :allow_destroy => true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:43:12.597

好的，我不确定这是否符合 Rails 约定，但我让它按照我想要的方式工作。在主题模型中添加了以下几行： 基本上在模型中分配课程类型字段。

```
lecture = @subject.lessons.build
lecture.lesson_type = "lecture"
lecture.lesson_groups.build
lecture.destroy

tutorial = @subject.lessons.build
tutorial.lesson_type = "tutorial"
tutorial.lesson_groups.build
tutorial.destroy

laboratory = @subject.lessons.build
laboratory.lesson_type = "laboratory"
laboratory.lesson_groups.build
laboratory.destroy 
```

为了使他们无法更改课程类型，我将其设为只读

```
 <%= lesson_form.text_field :lesson_type, :readonly=>true%><br/> 
```

# javascript - 防止对服务器的 XmlHttpRequest 递归调用

> ID：14038252
> 
> 赞同：1
> 
> 时间：2012-12-26T09:03:11.107
> 
> 标签：javascript, xmlhttprequest, meteor

我已经为这个问题搜索了几个小时，但没有找到任何解决方案。

我目前正在开发[这个基于](http://racetimer.meteor.com/)[Meteor](http://meteor.com/)的应用程序。

现在的场景是，在网站打开并在浏览器中加载所有资产后，浏览器不断对服务器进行递归 xhr 调用。这些调用以 25 秒的固定间隔进行。

这可以在浏览器控制台的网络选项卡中看到。请参阅图像中最后一行的待处理请求。

![在此处输入图像描述](../Images/06de08c8caea0f53b7c6f213815d8f7d.png)

我无法弄清楚它的来源，以及为什么**即使在用户空闲时也会**自动调用它。

现在的问题是，**如何禁用这些自动请求？**我想手动调用请求，即在选择菜单项时等。

任何帮助都会得到帮助。

**[更新]**

回应 Jan Dvorak 的评论：

当我在搜索框中输入“e”时，将显示名称以字母“e”开头的事件列表。

该请求带有所有有效参数和有效负载，如下所示：

```
["{\"msg\":\"sub\",\"id\":\"8ef5e419-c422-429a-907e-38b6e669a493\",\"name\":\"event_Coll_Search_by_PromoterName\",\"params\":[\"e\"]}"] 
```

这是有效的回应。

```
a["{\"msg\":\"data\",\"subs\":[\"8ef5e419-c422-429a-907e-38b6e669a493\"]}"] 
```

此操作的代码发布[在此处](http://jsbin.com/eheduc/1/edit)

但是在自动递归请求的情况下，请求没有负载，响应只是一个字母“h”，这很奇怪。不是吗？我怎样才能摆脱这个。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T11:34:27.023

Meteor has a feature called

> **Live page updates.**
> 
> Just write your templates. They automatically update when data in the database changes. No more boilerplate redraw code to write. Supports any templating language.

To support this feature, Meteor needs to do some server-client communication behind the scenes.

* * *

Traditionally, HTTP was created to fetch dead data. The client tells the server it needs something, and it gets something. There is no way for the server to tell the client it needs something. Later, it became needed to push some data to the client. Several alternatives came to existence:

**polling:**

The client makes periodic requests to the server. The server responds with new data or says "no data" immediately. It's easy to implement and doesn't use much resources. However, it's not exactly live. It can be used for a news ticker but it's not exactly good for a chat application.

If you increase the polling frequency, you improve the update rate, but the resource usage grows with the polling frequency, not with the data transfer rate. HTTP requests are not exactly cheap. One request per second from multiple clients at the same time could really hurt the server.

**hanging requests:**

The client makes a request to the server. If the server has data, it sends them. If the server doesn't have data, it doesn't respond until it does. The changes are picked up immediately, no data is transferred when it doesn't need to be. It does have a few drawbacks, though:

If a web proxy sees that the server is silent, it eventually cuts off the connection. This means that even if there is no data to send, the server needs to send a keep-alive response anyways to make the proxies (and the web browser) happy.

Hanging requests don't use up (much) bandwidth, but they do take up memory. Nowadays' servers can handle multiple concurrent TCP connections, so it's less of an issue than it was before. What does need to be considered is the amount of memory associated with the threads holding on to these requests - especially when the connections are tied to specific threads serving them.

Browsers have hard limits on the number of concurrent requests per domain and in total. Again, this is less of a concern now than it was before. Thus, it seems like a good idea to have one hanging request per session only.

Managing hanging requests feels kinda manual as you have to make a new request after each response. A TCP handshake takes some time as well, but we can live with a 300ms (at worst) refractory period.

**Chunked response:**

The client creates a hidden iFrame with a source corresponding to the data stream. The server responds with an HTTP response header immediately and leaves the connection open. To send a message, the server wraps it in a pair of `<script></script>` tags that the browser executes when it receives the closing tag. The upside is that there's no connection reopening but there is more overhead with each message. Moreover, this requires a callback in the global scope that the response calls.

Also, this cannot be used with cross-domain requests as cross-domain iFrame communication presents its own set of problems. The need to trust the server is also a challenge here.

**Web Sockets:**

These start as a normal HTTP connection but they don't actually follow the HTTP protocol later on. From the programming point of view, things are as simple as they can be. The API is a classic open/callback style on the client side and the server just pushes messages into an open socket. No need to reopen anything after each message.

There still needs to be an open connection, but it's not really an issue here with the browser limits out of the way. The browser knows the connection is going to be open for a while, so it doesn't need to apply the same limits as to normal requests.

These seem like the ideal solution, but there is one major issue: IE<10 doesn't know them. As long as IE8 is alive, web sockets cannot be relied upon. Also, the native Android browser and Opera mini are out as well ([ref.](http://caniuse.com/#feat=websockets)).

Still, web sockets seem to be the way to go once IE8 (and IE9) finally dies.

* * *

What you see are hanging requests with the timeout of 25 seconds that are used to implement the live update feature. As I already said, the keep-alive message ("h") is used so that the browser doesn't think it's not going to get a response. "h" simply means "nothing happens".

Chrome supports web sockets, so Meteor could have used them with a fallback to long requests, but, frankly, hanging requests are not at all bad once you've got them implemented (sure, the browser connection limit still applies).

# javascript - Javascript\Jquery 如何检测函数是否仍在运行？或者我可以加入返回事件吗？

> ID：14038257
> 
> 赞同：3
> 
> 时间：2012-12-26T09:03:26.013
> 
> 标签：javascript, jquery, ajax, forms, validation

因此，让我描述一下标准情况：有一个具有多个输入的表单（大约 60-70）。每个输入都需要验证。如果它无效，则返回 false。我需要保护表单`multiclicking(multisubmitting)`以防止`AJAX`带有图形反馈的多个请求。

我的解决方案是在发送请求之前调用自定义文档事件，`AJAX`该事件立即`div`使用 width 和创建`height 100%`，`z-index 9998`其中包含加载 gif 和一些消息。并且在`AJAX`请求完成时调用另一个，它只是从`DOM`.

**我的问题是**：这是一个有效的解决方案吗？我的意思是，它的大量表单输入和验证在旧计算机上可能会更慢，这意味着在将屏蔽 div 附加到正文并保护表单不提交之前可能需要一些时间。我可以简单地听函数并检测它是否返回一些东西吗？如果延迟我的理解，我需要在每次返回值之前解析，这意味着 60-70 行新代码，这是混乱和不可取的。

有没有人曾经遇到过这个问题并以 100% 的准确度和优雅度解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:08:20.263

不要依靠 a `"shielding div"`来防止多次提交。只需在提交之前挂钩表单检查的提交事件：

```
$('#myForm').submit(function() {
    if (!stillValidating())
       //submit form
    else
       //handle however you deem necessary.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:00:42.497

您首先需要停止表单提交的默认行为，然后您必须检查表单输入是否有效，如果是，则进入 ajax 调用。

```
 $('#form').submit(    function(e){     

        e.preventDefault();
        var $form = $(this);

      // check if the input is valid
        if(! $form.valid()) return false;

       $.ajax({
            type: 'POST',
            url: 'add.php',
            data: $('#form').serialize(),
            success: function(response) {
                $("#answers").html(response);
            }

        });
    }); 
```

# javascript - 当浏览器退出“加载”状态时触发事件？

> ID：14038259
> 
> 赞同：0
> 
> 时间：2012-12-26T09:04:11.467
> 
> 标签：javascript, jquery, web-applications

每当我们访问一个网站时，浏览器都会进入“加载”状态（微调器代替 favicon），直到网站加载完毕。当浏览器退出“加载状态”时会触发哪个 jquery 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:06:55.880

```
$(document).ready(function() {
  // put all your jQuery goodness in here.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:07:39.593

您可以尝试以下任何一种：

`window.onload`或者`document.ready`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:14:17.540

如果您解释了您要做什么，那肯定会有所帮助。但是由于您要求在浏览器加载页面时触发 jQuery 事件，我建议您使用 jQuery*就绪*处理程序。

以下所有三种语法都是等效的：

1.  `$(document).ready(handler)`

2.  `$().ready(handler) (this is not recommended)`

3.  `$(handler)`

传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

**编辑：**由于当浏览器完成加载页面及其所有资源时我们需要一个事件，所以 jQuery`.load()`方法会更合适。

当元素和所有子元素都已完全加载时，加载事件将发送到该元素。它是`.bind('load', handler)`.

# javascript - 使用浏览器读取系统字体并显示它们

> ID：14038260
> 
> 赞同：0
> 
> 时间：2012-12-26T09:04:21.747
> 
> 标签：javascript, jquery, html, system-font

我需要在浏览器中显示用户机器上所有可用的字体。这是否可以使用**javascript**或**jquery**或任何其他方式来获取列表字体？

例如，在我的网站上，用户应该能够在组合框中看到他/她的机器中可用的所有字体，并且他/她可以应用于同一页面中的任何文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:08:41.497

无法从浏览器访问本地字体列表，因为这将是严重的安全漏洞。它还会威胁隐私。

您需要使用某种浏览器扩展程序，例如：ActiveX、Firefox/Chrome/Webkit 插件、Flash 等。

如果将在其他机器上读取，使用本地字体格式化文本也可能有点“危险”，因为其他用户可能没有字体。

还可以查看 Google Fonts API，这使得任何浏览器都可以使用大量字体。我想它可以被查询，而且它也是网络安全的。

# android - Android 传递 json

> ID：14038261
> 
> 赞同：1
> 
> 时间：2012-12-26T09:04:40.743
> 
> 标签：android, json

我正在开发一个项目。我写在网页上使用 jquery：

```
$.post(url, {param: paramstring}, function(result){}); 
```

`Paramstring`根据参数结构是一个json字符串，比如`{"action":"get","username":"username"}`.现在我想在android中运行它，并在页面上添加两个textview来输入用户名和密码。还有一个注册按钮。按钮监听程序是这样的：

```
EditText et1 = (EditText)findViewById(R.id.username);
String user = et1.getText().toString();
EditText et2 = (EditText)findViewById(R.id.pass);
String password = et2.getText().toString();
// the password should upload after MD5 encryption. this is encryption method. the result is the same with js encryption.
String password_md5 = toMd5(password.getBytes());   
Log.d(TAG, user+"-"+password+"-"+password_md5);
try {
HttpPost request = new HttpPost(URL);
JSONObject params = new JSONObject();
params.put("action", "get");
params.put("result", "user");
params.put("category", "base");
params.put("username", user);
params.put("password", password_md5);

List<BasicNameValuePair> sendData = new ArrayList<BasicNameValuePair>();
sendData.add(new BasicNameValuePair("param", params.toString()));

System.out.println(params.toString());

request.setEntity(new UrlEncodedFormEntity(sendData,"utf-8"));
System.out.println(EntityUtils.toString(request.getEntity()));

HttpResponse response= new DefaultHttpClient().execute(request);
String retSrc = EntityUtils.toString(response.getEntity()); 

System.out.println(retSrc);

} catch (Exception e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

上面的代码返回数据显示登录错误。我认为是因为 json 结构。`{param:paramstr}`在`$.post()`方法中是一张地图。改了很多次，还是不对。

你能给我一些建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:15:45.660

您必须单独传递每个参数，并且此处不需要 JSON 结构。jQuery 使用的 JSON 结构只是一种为 $.post() 方法提供可变数量参数的方法。

而不是这个：

```
params.put("action", "get");
params.put("result", "user");
params.put("category", "base");
params.put("username", user);
params.put("password", password_md5);

List<BasicNameValuePair> sendData = new ArrayList<BasicNameValuePair>();
sendData.add(new BasicNameValuePair("param", params.toString())); 
```

试试这个：

```
List<BasicNameValuePair> sendData = new ArrayList<BasicNameValuePair>();
sendData.add(new BasicNameValuePair("action", "get"));
sendData.add(new BasicNameValuePair("result", "user"));
sendData.add(new BasicNameValuePair("category", "base"));
sendData.add(new BasicNameValuePair("username", user));
sendData.add(new BasicNameValuePair("password", password_md5)); 
```

您会看到，使用了 sendData 列表而不是 JSON 对象。

# shell - 比较 ksh 脚本中的两个数组

> ID：14038262
> 
> 赞同：0
> 
> 时间：2012-12-26T09:04:43.743
> 
> 标签：shell, ksh

代码片段在这里：

```
 #!/usr/bin/ksh

   diff(){
     awk 'BEGIN {RS=ORS= }
            {NR==FNR?a[$0]++:a[$0]--}
                   END{for(k in a)if(a[k])print k}' < (echo -n "${!1}") < (echo -n "${!2}")
   }

                   Array1=( key1 key2 key3 key4 key5 key6 key7 key8 key9 key10 )
                  Array2=( key1 key2 key3 key4 key5 key6 )
                  Array3=($(diff Array1[@] Array2[@]))
                  echo ${Array3[@]} 
```

我正面临错误

```
syntax error at line 6 : `(' unexpected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:22:00.653

您提到的语法错误是因为 , 之后的空格`<`，您应该使用：

```
<(echo -n "${1}") <(echo -n "${2}") 
```

这`!`是非常可疑的（我得到一个语法错误），我不确定你想在这里实现什么。

此外，您没有将数组传递给函数，只是它们的名称。你的意思：

```
Array3=($(diff "${Array1[@]}" "${Array2[@]}")) 
```

当然，您不能将数组传递给函数，只能传递列表。

调用自己的函数是个坏主意`diff`，因为有一个同名的标准实用程序可能会引起混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T22:37:25.527

看起来您正在尝试将两个数组一起比较并找到可以通过[AWK 或 KSH 中的关联数组](http://microdevsys.com/wp/awk-for-human-beings/)完成的差异。但是，如果您正在查看更大的集合，我不能 100% 确定您是否不会遇到一些 KSH 数组大小限制。（或者我错了。）

```
KSH:
typeset -A aArray;                                      # Declare
aArray=([this]=1 [that]=2 [who]=3 [what]=4 [where]=5);  # Assign
print ${aArray[@]}                                      # Print out the elements.
print ${aArray[one]}                                    # Index

AWK:
aArray["this"]=1;aArray["that"]=2;aArray["who"]=3;aArray["what"]=4;aArray["where"]=5;  # Declare
for ( KEY in aArray ) print KEY" Value at KEY: "aArray[KEY];                                                       # Print 
```

干杯，传统知识

# c# - 在常规阵列上测试 foreach 框/拆箱？

> ID：14038264
> 
> 赞同：3
> 
> 时间：2012-12-26T09:05:17.580
> 
> 标签：c#, .net, arrays, foreach, boxing

我已经阅读了这个关于如何在（框与否）循环下处理常规的[优秀问题。](https://stackoverflow.com/questions/5674388/in-net-array-only-extends-ienumerable-so-will-there-be-boxing-and-unboxing-wh)`int[]``foreach`

`Array`确实实现了非泛型`IEnumerable`，因此它必须使用`object`内部（而不是`int`）

但[事实证明](https://stackoverflow.com/a/5674439/859154)- 在运行时它实际上被处理为`IEnumerable<T>`

`C#`我如何通过简单的代码测试/证明（没有装箱）它？（*而不是通过阅读 IL。*）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T10:17:29.697

我喜欢@phoog 的回答，所以只是为了好玩:)

**助手类**

```
public static class ILUtils
{
    private static Dictionary<short, OpCode> s_opcodes = new Dictionary<short, OpCode>();

    static ILUtils()
    {
        FieldInfo[] opCodeFields = typeof(OpCodes).GetFields(BindingFlags.Public | BindingFlags.Static);
        foreach (FieldInfo opCodeField in opCodeFields)
        {
            if (opCodeField.FieldType != typeof(OpCode))
                continue;

            OpCode opcode = (OpCode)opCodeField.GetValue(null);
            s_opcodes.Add(opcode.Value, opcode);
        }
    }

    public static bool ContainsOpcodes(MethodInfo methodInfo, IEnumerable<OpCode> targetOpCodes)
    {
        MethodBody methodBody = methodInfo.GetMethodBody();

        using (BinaryReader ilReader = new BinaryReader(new MemoryStream(methodBody.GetILAsByteArray())))
        {
            while (ilReader.BaseStream.Position < ilReader.BaseStream.Length)
            {
                short opCodeValue = ilReader.ReadByte();
                if (opCodeValue == 0xfe)
                    opCodeValue = (short)(opCodeValue << 8 | ilReader.ReadByte());

                OpCode opCode = s_opcodes[opCodeValue];
                if (targetOpCodes.Contains(opCode))
                    return true;

                int argumentSize = 4;
                if (opCode.OperandType == OperandType.InlineNone)
                    argumentSize = 0;
                else if (opCode.OperandType == OperandType.ShortInlineBrTarget || opCode.OperandType == OperandType.ShortInlineI || opCode.OperandType == OperandType.ShortInlineVar)
                    argumentSize = 1;
                else if (opCode.OperandType == OperandType.InlineVar)
                    argumentSize = 2;
                else if (opCode.OperandType == OperandType.InlineI8 || opCode.OperandType == OperandType.InlineR)
                    argumentSize = 8;
                else if (opCode.OperandType == OperandType.InlineSwitch)
                {
                    int num = ilReader.ReadInt32();
                    argumentSize = (int)(4 * num + 4);
                }

                ilReader.BaseStream.Position += argumentSize;
            }
        }

        return false;
    }
} 
```

**示例用法**

```
private static void BoxingForEach()
{
    IEnumerable foo = (IEnumerable)new int[10];
    foreach (int i in foo) ;
}

private static void NoBoxingForEach()
{
    int[] foo = new int[10];
    foreach (int i in foo) ;
}

static void Main(string[] args)
{
    MethodInfo boxingForEach = typeof(Program).GetMethod("BoxingForEach", BindingFlags.Static | BindingFlags.NonPublic);
    MethodInfo noBoxingForEach = typeof(Program).GetMethod("NoBoxingForEach", BindingFlags.Static | BindingFlags.NonPublic);

    Console.WriteLine("BoxingForEach is using boxing: {0}", 
        ILUtils.ContainsOpcodes(boxingForEach, new[] { OpCodes.Box, OpCodes.Unbox, OpCodes.Unbox_Any }));

    Console.WriteLine("NoBoxingForEach is using boxing: {0}", 
        ILUtils.ContainsOpcodes(noBoxingForEach, new[] { OpCodes.Box, OpCodes.Unbox, OpCodes.Unbox_Any }));
} 
```

**结果**

> > BoxingForEach 正在使用拳击：True
> > 
> > NoBoxingForEach 正在使用装箱：False

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T09:42:02.037

您的问题错误地假设（与您链接到的问题一样）数组没有实现泛型`IEnumerable<T>`. 他们是这样。您可以使用反射看到这一点：

```
var array = new int[0];
var enumerator = array.GetEnumerator();
var enumeratorType = enumerator.GetType();
var propertyInfo = enumeratorType.GetProperty("Current");
var propertyType = propertyInfo.PropertyType;
Console.WriteLine(propertyType.Name); //prints "Object";
var otherEnumerator = ((IEnumerable<int>)array).GetEnumerator();
enumeratorType = otherEnumerator.GetType();
propertyInfo = enumeratorType.GetProperty("Current");
propertyType = propertyInfo.PropertyType;
Console.WriteLine(propertyType.Name); //prints "Int32"; 
```

但是，如果在静态类型数组引用上编写 foreach 循环，C# 编译器会将其转换为 for 循环。我认为没有任何方法可以在不查看 IL 的情况下进行检查。

来自[http://msdn.microsoft.com/en-us/library/system.array.aspx](http://msdn.microsoft.com/en-us/library/system.array.aspx)：

重要的

从 .NET Framework 2.0 开始，Array 类实现了`System.Collections.Generic.IList<T>`、`System.Collections.Generic.ICollection<T>`和`System.Collections.Generic.IEnumerable<T>`泛型接口。这些实现在运行时提供给数组，因此对文档构建工具不可见。因此，泛型接口不会出现在 Array 类的声明语法中，并且没有接口成员的参考主题，只能通过将数组转换为泛型接口类型（显式接口实现）才能访问这些成员。将数组强制转换为这些接口之一时要注意的关键是添加、插入或删除元素的成员会抛出 NotSupportedException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:59:13.543

如果不查看发出的 IL，就很难验证拳击是否在幕后进行。

但是试试这个：

```
static void Main()
{
  int[] arr1 = { 7, 9, 13, };
  Array arr2 = arr1;
  IEnumerable arr3 = arr1;  // non-generic IEnumerable

  foreach (var x in arr1)  // hold mouse over var keyword to see compile-time type
  {
    Overloaded(x);  // go to definition to see which overload is used
  }
  foreach (var x in arr2)  // hold mouse over var keyword to see compile-time type
  {
    Overloaded(x);  // go to definition to see which overload is used
  }
  foreach (var x in arr3)  // hold mouse over var keyword to see compile-time type
  {
    Overloaded(x);  // go to definition to see which overload is used
  }
}

static void Overloaded(int x)
{
  Console.WriteLine("int!");
}
static void Overloaded(object x)
{
  Console.WriteLine("object!");
} 
```

很容易看出拳击确实发生在`arr2`和`arr3`。从技术上讲，我们不能确定是否发生装箱`arr1`（必须检查 IL），但我们可以看到隐式类型的 ( `var`) 变量变成了一个`int`变量，这是一种线索。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T09:22:19.393

这样的事情令人满意吗？

```
 int[] foo = new int[10];

        foreach (object o in foo)
        {
            Console.WriteLine(o.GetType());
            int? bar = o as int?;
            Console.WriteLine(bar);
        }
        Console.ReadKey(); 
```

如果不检查 IL 的隐式转换，就很难确定。

# android - 图库（进程 com.cooliris.media）已意外停止

> ID：14038275
> 
> 赞同：2
> 
> 时间：2012-12-26T09:07:04.413
> 
> 标签：android, android-gallery

我正在使用相机或图库为我的应用程序拍照。但有时在单击相机中的图像然后切换到图库后，图库会崩溃。

代码如下：

```
case R.id.etUploadImage:
        Log.d(TAG, " add photo");
        if (!Environment.getExternalStorageState().equals(
                Environment.MEDIA_MOUNTED)) {
            Toast.makeText(getApplicationContext(), "sdcard not mounted",
                    Toast.LENGTH_SHORT).show();
            break;
        }
        AlertDialog.Builder photoDialog = new AlertDialog.Builder(this);
        photoDialog
                .setTitle("Photo source")
                .setCancelable(true)

                .setPositiveButton("Open Gallery",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                startActivityForResult(
                                        new Intent(
                                                Intent.ACTION_PICK,
                                                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI),
                                        54);
                            }
                        })

                .setNegativeButton("Open Camera",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int id) {
                                //String fileName = "temp.jpg";
                                Date date = new Date();
                                DateFormat df = new SimpleDateFormat("-mm-ss");

                                String newPicFile = "Bild"+ df.format(date) + ".jpg";
                                String outPath = "/sdcard/" + newPicFile;
                                File outFile = new File(outPath);

                                ContentValues values = new ContentValues();
                                values.put(MediaStore.Images.Media.TITLE,
                                        outFile.getAbsolutePath());
                                mCapturedImageURI = getContentResolver()
                                        .insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                                                values);

                                Intent intent = new Intent(
                                        MediaStore.ACTION_IMAGE_CAPTURE);
                                intent.putExtra(MediaStore.EXTRA_OUTPUT,
                                        mCapturedImageURI);

                                startActivityForResult(intent, 96);

                            }
                        });
        photoDialog.show();
        break;
    } 
```

并且 onActivityResult() 是：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == 54 && resultCode == RESULT_OK) {
        if(data !=null){
        fileName = getRealPathFromURI(data.getData());
        mUploadImage.setText(getStringNameFromRealPath((String) fileName));
        } else {
            Toast.makeText(getApplicationContext(),"Please select another image.", Toast.LENGTH_SHORT).show();
        }
    } else if (requestCode == 96 && resultCode != 0) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(mCapturedImageURI, projection, null,
                null, null);
        int column_index_data = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        fileName = cursor.getString(column_index_data);
        String s[] = fileName.split("/");
        mUploadImage.setText(s[s.length - 1]);
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, mCapturedImageURI));
    }
} 
```

是什么让画廊崩溃。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T12:25:40.487

所以，经过多次杂耍，我发现这个解决方案对我有用..

打开图库或相机：-

```
if (!Environment.getExternalStorageState().equals(
                Environment.MEDIA_MOUNTED)) {
            Toast.makeText(getApplicationContext(), "sdcard not mounted",
                    Toast.LENGTH_SHORT).show();
            break;
        }
        AlertDialog.Builder photoDialog = new AlertDialog.Builder(this);
        photoDialog
                .setTitle("Photo source")
                .setCancelable(true)

                .setPositiveButton("Open Gallery",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                startActivityForResult(
                                        new Intent(
                                                Intent.ACTION_PICK,
                                                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI),
                                        54);
                            }
                        })

                .setNegativeButton("Open Camera",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int id) {

                                int apiLevel = Integer.parseInt(Build.VERSION.SDK);
                                if(apiLevel < 11) {
                                try{
                                //String fileName = "temp.jpg";

                                Calendar c = Calendar.getInstance();
                                CAPTURE_TITLE = "si_"+c.getTimeInMillis()+".jpg";
                                File file = new File(Environment.getExternalStorageDirectory() + "/DCIM/Camera", CAPTURE_TITLE);
                                Uri ImageURI = Uri.fromFile(file);

                                Intent intent = new Intent(
                                        MediaStore.ACTION_IMAGE_CAPTURE);
                                intent.putExtra(MediaStore.EXTRA_OUTPUT,
                                        ImageURI    );

                                startActivityForResult(intent, 99);

                                }
                                catch(Exception e)
                                {
                                    LogCreator lg = new LogCreator();
                                    lg.writeBarcodeToFile("Image exc1", e.toString());
                                }

                                }
                                else{

                                    //String fileName = "temp.jpg";
                                    Date date = new Date();
                                    DateFormat df = new SimpleDateFormat("-mm-ss");

                                    String newPicFile = "Bild"+ df.format(date) + ".jpg";
                                    String outPath = "/sdcard/" + newPicFile;
                                    File outFile = new File(outPath);

                                    ContentValues values = new ContentValues();
                                    values.put(MediaStore.Images.Media.TITLE,
                                            outFile.getAbsolutePath());
                                    mCapturedImageURI = getContentResolver()
                                            .insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                                                    values);

                                    Intent intent = new Intent(
                                            MediaStore.ACTION_IMAGE_CAPTURE);
                                    intent.putExtra(MediaStore.EXTRA_OUTPUT,
                                            mCapturedImageURI);

                                    startActivityForResult(intent, 96);
                                }
                            }

                        });
        photoDialog.show(); 
```

现在是 onActivityResult()

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == 54 && resultCode == RESULT_OK) {
        if(data !=null){
        fileName = getRealPathFromURI(data.getData());
        mUploadImage.setText(getStringNameFromRealPath((String) fileName));
        } else {
            Toast.makeText(getApplicationContext(),"Please select another image.", Toast.LENGTH_SHORT).show();
        }
    } 
    else if (requestCode == 99 && resultCode != 0) {
        try {
            File file = new File(Environment.getExternalStorageDirectory() + "/DCIM/Camera", CAPTURE_TITLE);
            fileName = Environment.getExternalStorageDirectory() + "/DCIM/Camera/"+CAPTURE_TITLE;

            Uri imgUri = Uri.fromFile(file);
            //new GetThumbnail().execute(imgUri);
            mUploadImage.setText(CAPTURE_TITLE);
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }
        else if (requestCode == 96 && resultCode != 0) {
            String[] projection = { MediaStore.Images.Media.DATA };
            Cursor cursor = managedQuery(mCapturedImageURI, projection, null,
                    null, null);
            int column_index_data = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            fileName = cursor.getString(column_index_data);
            String s[] = fileName.split("/");
            mUploadImage.setText(s[s.length - 1]);
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, mCapturedImageURI));
        }

} 
```

这些是我用来获取路径的方法：-

```
/*
 * Returns image real path.
 */
private String getRealPathFromURI(final Uri contentUri) {
    final String[] proj = { MediaStore.Images.Media.DATA };
    @SuppressWarnings("deprecation")
    final Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();

    return cursor.getString(column_index);
}

/*
 * Cuts selected file name from real path to show in screen.
 */
private String getStringNameFromRealPath(final String bucketName) {
    return bucketName.lastIndexOf('/') > 0 ? bucketName
            .substring(bucketName.lastIndexOf('/') + 1) : bucketName;
} 
```

希望这个帮助。

# java - 在 Windows 服务中包装 jar 文件

> ID：14038280
> 
> 赞同：1
> 
> 时间：2012-12-26T09:07:42.277
> 
> 标签：java, jar

您是否有过使用命令行运行 jar 文件并封装在 Windows 服务中的经验？

我正在尝试找到一种无需登录机器即可运行 jar 文件的方法，并且由于它允许命令 shell，我想知道这是否是个好主意。

谢谢！

* * *

原帖：

我正在尝试运行 Associated Press 的 Web Feeds Manager，它基本上是一个 jar 文件，在登录时双击它即可运行。

我想运行相同的文件，但没有登录到机器。在他们的手册（http://wfm.ap.org/admin/content/help/Running_Agent_on_a_Remote_Server.htm）中，他们使用命令行参数编写了如何做到这一点。

基本上，无论谁登录，我都希望 jar 作为 Windows 服务运行，但谷歌搜索显示它存在问题。

你有远程运行 jar 文件的经验吗？有哪些陷阱？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:31:55.337

在谷歌搜索中，我发现了这篇文章 -

[将 Jar 应用程序作为 Windows 服务运行](http://edn.embarcadero.com/article/32068)

它提到了来自 Tanukisoftware.org 的开源`Java Service Wrapper`项目来完成这项任务。

注意：我个人没有使用过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:26:26.750

如果您对在启动/关闭时启动/停止服务不感兴趣，但您只想手动启动程序并在注销后继续运行，您可以执行以下操作：

```
$ nohup java -jar foobar.jar > foobar.log 2>&1 & 
```

这意味着：启动我的 foobar.jar (java -jar) 并在我注销后保持运行 (nohup) 将 stdout 重定向到 foobar.log (>) 以及 stderr (2>&1)，并使其在后台运行 (&在末尾）。

相反，如果您有兴趣在您的 linux 机器中安装“服务”，则有很多选择，具体取决于您使用的发行版。最常见的是[upstart](http://upstart.ubuntu.com/)（用于 ubuntu）和 System V 初始化脚本（Redhat 或其他）。cron 还可用于在启动/关闭时启动/停止服务。[您可以在此处找到](http://weblogs.java.net/blog/johnsmart/archive/2008/10/installing_huds.html)在 init 系统上安装 java 应用程序 (hudson) 的示例，或者使用[upstart](https://stackoverflow.com/questions/9330367/how-to-configure-jenkins-to-run-on-port-80)做同样的事情。或者，正如我所说，[cron](http://www.cyberciti.biz/faq/linux-execute-cron-job-after-system-reboot/)可能是一种选择。

在 Windows 上，有[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/introduction.html)。而且不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:31:13.557

对于 windows [Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/introduction.html)是更好的选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T14:43:41.613

我最喜欢的是 linux 上的新贵，但它只是 Ubuntu。

在 Windows 上，根据[这个](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app)论坛，我看到了许多替代方案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-15T09:06:11.587

工具 Exe4j

您可以使用 Exe4j.exe，该工具从 .jar 文件生成 service.exe 文件

您可以从这里下载 Exe4j：[下载 exe4j](http://exe4j.apponic.com/download/)

# objective-c - 日期格式为 2012-12-20T16:00:00.000Z？

> ID：14038290
> 
> 赞同：0
> 
> 时间：2012-12-26T09:08:45.780
> 
> 标签：objective-c, ios, nsdateformatter

我的日期为 2012-12-24 08:59:00 +0000，我希望它为 2012-12-20T16:00:00.000Z 我尝试使用此代码

```
NSDateComponents *dayComponent = [[NSDateComponents alloc] init] ;
    NSDate* now = [NSDate date];
    NSCalendar *theCalendar = [NSCalendar currentCalendar];
NSDateFormatter* formatter = [NSDateFormatter alloc];
    [formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"];
    [formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
dayComponent.day = -2;
        NSDate* fromDate = [theCalendar dateByAddingComponents:dayComponent toDate:now options:0];
        fromDateStr = [formatter stringFromDate:fromDate]; 
```

我的要求是以指定格式获取前几天的日期，例如 2 天前、14 天前等。但我得到`fromDateStr`的是空字符串。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T09:14:09.507

2012-12-20T16:00:00.000Z 的日期格式为 yyyy-MM-dd'T'HH:mm:ss.SSS'Z'

希望有帮助。

如果这不能给你想要的结果，请告诉我。

这是一个对我有用的示例代码：

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];
    NSString *str = [formatter stringFromDate:[NSDate date]];
    NSLog(@"Date = %@",str); 
```

输出是：

```
Date = 2012-12-26T14:55:36.702Z 
```

# cakephp - CakePHP 路由查询

> ID：14038291
> 
> 赞同：0
> 
> 时间：2012-12-26T09:08:50.577
> 
> 标签：cakephp, url-routing, croogo

如何通过`CroogoRouter::connect`CakePHP 中的函数显示 URL？我传递了控制器的名称和操作我的路由文件，例如：

```
CroogoRouter::connect('/', array('admin' => true, 'controller' => 'dashboard', 'action' => 'index')); 
```

我被重定向到仪表板页面，但我看不到正确的 URL。我想要我的 URL `localhost/abc/admin/dashboard`，它只显示为`localhost/abc`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:50:15.797

由于您使用 webroot ( `/`) 作为路由别名，因此它不会显示该`admin/dashboard`位。如果你**真的**想要它（如果它只是为了花哨的显示目的，我会劝阻它），你应该创建一个简单的控制器动作来重定向。例如，如果您将路线更改为此：

```
CroogoRouter::connect('/', array('controller' => 'dashboard', 'action' => 'home')); 
```

然后在`DashboardsController`创建这个动作：

```
public function home() {
    $this->autoRender = false; // We have no view, so don't render anything
    $this->redirect(array('admin' => true, 'controller' => 'dashboard', 'action' => 'index'));
} 
```

它应该根据需要显示 URL。同样，如果它仅用于显示目的（使其看起来“漂亮”）而不是出于任何 SEO 目的，我不鼓励使用这种丑陋的解决方法。但无论哪种方式，它都应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:30:49.577

你能检查控制器名称吗？我认为控制器名称应该是仪表板或其他东西。

检查此链接可能会有所帮助[http://bakery.cakephp.org/articles/Frank/2009/11/02/cakephp-s-routing-explained](http://bakery.cakephp.org/articles/Frank/2009/11/02/cakephp-s-routing-explained)

# java - 使用 jpcap 模拟 HTTP 请求

> ID：14038293
> 
> 赞同：0
> 
> 时间：2012-12-26T09:09:04.023
> 
> 标签：java, http, jpcap

如何使用 jpcap 发送数据包以进行 HTTP GET 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:26:58.030

有什么理由不能使用 Java 的 http 功能吗？

```
URL url = new URL("http://www.test.com")
URLConnection conn = url.openConnection(); 
```

[JPCAP](https://github.com/jpcap/jpcap)是用于网络数据包捕获的接口和系统。

您是否按照 TCP 连接的要求进行完整的三向握手？我怀疑 jpcap 会为您解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:11:14.807

与其他 pcap 实现不同，如 libpcap 和 winpcap，jpcap 没有任何发送数据包的功能，只能捕获它们。如果您只想使用用户定义的源接口/IP 发送 HTTP 请求，请查看以下内容：

[如何在 java.net.URLConnection 上指定本地地址？](https://stackoverflow.com/questions/91678/how-can-i-specify-the-local-address-on-a-java-net-urlconnection)

# c - 通过 getchar 插入值

> ID：14038295
> 
> 赞同：0
> 
> 时间：2012-12-26T09:09:32.167
> 
> 标签：c

我无法将值插入 ptr char 数组：

```
int main() {

  char S[MAX_STRING_LENGTH],*str;

  int total,j=0,i=0;
  char ptr[16],c;

    scanf("%d",&total);

      for(i=0;i<total;i++){
          c=getchar();
           do{

           ptr[j]=(char)tolower(c);
           j++;
           c=getchar();
           }while(c!='\n' && j<15 );

           ptr[j]='\0';
           printf("j=%d , %s",j,ptr);
           }

} 
```

原因我知道：

我将 do-loop exit 放在 '\n' 上，并且在总共插入值后我正在使用 enter('\n') 本身。这样它就退出循环而不插入值。

我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:20:43.740

因为`scanf`确实在输入流中进行了扫描`\n`，但没有将其存储在`&total`. 下次你`getchar()`会得到它`\n`，这会导致 do-while 只能执行一次。
添加

```
getchar(); 
```

扫描后。

输入流：

```
 the next you getchar() will from here
             |
             | 
A A A A A A \n A A A A A A
          ^
          |
  the variable total store string before this 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:30:32.010

你正在做的事情有点不安全。首先取决于操作系统，您可能必须在 '\r' 上终止，而不仅仅是在 '\n' 上。其次，您永远不会检查输入的大小是否在 15 个符号以内。请注意，我说的是**15 个符号**，因为通常最好的做法是为零终止字符留一个单元格。

如果输入不包含空格（空格或制表符），我建议您使用`scanf("%s")`它，因为它不易出错。此外，您将消除对 while 循环的需要。

如果不是这种情况，您还应该添加对“\r”的检查，并且您还必须删除在总值之后键入的换行符。像这样：

```
scanf("%d", &total);
getchar(); 
```

这是必需的，否则总计之后的换行符将是您在 while 循环中读取的第一个字符，因此您将在循环的第一次迭代时退出。

如果你调试你的程序，你会看到这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:26:48.233

在 scanf 期间，您将输入一些 no（字符数），例如 10，然后按 Enter。现在这个 '\n\ 不会被 scanf 读取，它在输入流中。在第一次迭代期间，getchar() 将读取此 '\n' 并在第一次迭代后终止循环。所以最好在 scanf() 之后放一个 getchar() ，以免输入流为空。除此之外，

您没有超出数组索引限制进行任何检查。可能是用户不断输入字符，而您最终尝试插入超过 16 个位置。

```
 while(c != '\n' && j < 15); 
```

会解决你的问题。

# c# - 如何检测列表框中的项目是否已被多次选择？

> ID：14038296
> 
> 赞同：0
> 
> 时间：2012-12-26T09:09:37.720
> 
> 标签：c#, winforms

我有这个列表框的事件代码：

```
I tried ot do it this way and it's almost working good.

private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {

            if (recentItems.Contains(listBox1.SelectedItem))
            {
                itemExist = true;
                item = listBox1.SelectedItem.ToString();
                this.f1.PlayLightnings();
                f1.pdftoolsmenu();
            }
            else
            {
                itemExist = false;
                item = listBox1.SelectedItem.ToString();
                recentItems.Add(listBox1.SelectedItem.ToString());
                this.f1.PlayLightnings();
                f1.pdftoolsmenu();
            }

        } 
```

我正在使用一个新的布尔变量 itemExist 并检查 List recentItems 是否不包含 selectedItem 添加它。

如果它确实存在，则将该标志设置为 true。

然后在 Form1 的其他代码中，我正在做：

```
if (Lightnings_Extractor.Lightnings_Mode.itemExist == true)
                {
                    if (!pdf1.Lightnings.Contains(Lightnings_Extractor.Lightnings_Mode.item))
                    {
                        pdf1.Lightnings.Add(Lightnings_Extractor.Lightnings_Mode.item);
                    }
                } 
```

所以它可以按我的意愿工作，但问题是我在 listBox 中选择的每个新项目都单击它我必须单击它两次，因为第一次它不在recentItems 中，只有在第二次单击它在recentItems 中才会这样做，而且只有在第二次单击时，它将标志更改为 true。

那么如何在 SelectedIndexChanged 事件中解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:42:43.060

我现在看到我不需要 Form1 中的代码部分，只需要以下代码：

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {
            item = listBox1.SelectedItem.ToString();
            this.f1.PlayLightnings();
            f1.pdftoolsmenu();
            if (item != null && !pdf1.Lightnings.Contains(item.ToString()))
            {
                pdf1.Lightnings.Add(item.ToString());             
            }
        } 
```

# jquery - 远程数据未从 Web 服务绑定到网格

> ID：14038298
> 
> 赞同：1
> 
> 时间：2012-12-26T09:09:44.130
> 
> 标签：jquery, kendo-ui

给定以下代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    //url:crudurl+"/GetData",
                    url: "GridWebService.asmx/GetData",
                    dataType: "json"
                }
            },
            batch: true,
            pageSize: 4,
            schema: {
                model: {
                    id: "eid",
                    fields: {
                        eid: { editable: false, nullable: true },
                        ename: { validation: { required: true} },
                        age: { type: "number", validation: { required: true, min: 1} },
                        salary: { type: "number", validation: { required: true, min: 1} }
                    }
                }
            }
        });
        $("#grdCRUD").kendoGrid({
            dataSource: dataSource,
            pageSize: 4,
            pageable: {
                refresh: true,
                pageSizes: true
            },
            height: 400,
            toolbar: ["create"],
            columns: [
                        { field: "ename", title: "EmployeeName", width: "150px" },
                        { field: "age", title: "EmployeeAge", width: "150px" },
                        { field: "salary", title: "EmployeeSalary", width: "100px" },
                        { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" }
                     ],
            editable: "inline"
        });
    });                                                                                    
</script> 
```

在这里，我编写了上面的代码行，用于`Grid` 通过 Web 服务将数据库中的数据绑定到剑道。但是，`Data`不绑定到`Grid`. 中是否有任何错误`DataSource`。确保我没有使用 Ajax 绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:12:41.997

您的代码似乎正确。确保您的服务将数据作为 JSON 数组返回（打开浏览器并尝试加载`http://.../GridWebService.asmx/GetData`

您应该会看到如下内容：

```
[
    {"eid": 1, "ename": "John", "salary":1.2345, "age":23 },
    {"eid": 2, "ename": "Jack", "salary":12.345, "age":34 },
    {"eid": 3, "ename": "Josh", "salary":123.45, "age":45 },
    {"eid": 4, "ename": "Jane", "salary":1234.5, "age":56 }
] 
```

# c# - WCF 是否提供避免端口转发的选项？

> ID：14038299
> 
> 赞同：1
> 
> 时间：2012-12-26T09:10:11.807
> 
> 标签：c#, wcf, nat, portforwarding

过去甚至现在有很多程序都是在服务器/客户端的基础上运行的。示例包括 TeamSpeak、Ventrilo、Mumble 等。这些程序通常需要进入路由器并转发端口，以便运行服务器的计算机可以从正在向服务器路由器发送连接请求的客户端获取消息。

这些天在 WCF 中有什么东西可以让你防止这种事情发生吗？我有一个聊天/文件传输程序，我真的希望用户不必知道如何转发他们的端口。

UPnP 或 Punchthrough 有哪些选择？必须通过并转发程序使用的所有特定端口的概念似乎已经过时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:34:51.400

看看 WS-Discovery 与 WCF：

[http://weblogs.asp.net/gsusx/archive/2009/02/13/using-ws-discovery-in-wcf-4-0.aspx](http://weblogs.asp.net/gsusx/archive/2009/02/13/using-ws-discovery-in-wcf-4-0.aspx)

正如您所说，发现协议否定了中央“服务器路由器”。它使用 UDP 广播来通知客户端。

请注意，发现协议本身只是一个无状态消息传递协议。它没有保证或状态同步。例如，如果客户端 A 没有收到客户端 B 的广播消息，那么客户端 A 不会知道客户端 B。维护这种 P2P 状态的协议开销很复杂，通常单个服务器来保持这种状态是最简单的方法。

# php - 数据表：一列原因后未显示结果

> ID：14038300
> 
> 赞同：0
> 
> 时间：2012-12-26T09:10:16.113
> 
> 标签：php, datatable

我的数据表只显示“处理”而不是结果。这是在我尝试从我的数据库的列中显示另一个结果之后发生的。第一次我只显示 8 列（包括隐藏的 ID 列）。但是，在我添加 1 列之后，它变成： ![在此处输入图像描述](../Images/bee1054722fa799d530c59b62336e420.png) 我在添加`Detail`列之后得到了这个。如果数据出现，表格是否会变得更宽，所以它会像这样显示？查询时没有错误，firebug 不显示错误。

```
if($ssWhere!="") {
                $sQuery = "SELECT prob_id,Model,Serial,Lotno,Date,Symptom,Cause,Status,CM,`Detail` FROM OQC ".$ssWhere.$sOrder.$sLimit;
                 } else {
                        $sQuery = "SELECT prob_id,Model,Serial,Lotno,Date,Symptom,Cause,Status,CM,`Detail` FROM OQC ".$sWhere.$sOrder.$sLimit;
                        }
        $rResult = mysql_query( $sQuery) or _doError(_ERROR30 . ' (<small>' . htmlspecialchars($sql) . '</small>): ' . mysql_error() );  // subm$

        $sQuery = "SELECT FOUND_ROWS()";
        $rResultFilterTotal = mysql_query( $sQuery) or _doError(_ERROR30 . ' (<small>' . htmlspecialchars($sql) . '</small>): ' . mysql_error() $
        $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
        $iFilteredTotal = $aResultFilterTotal[0];

        $sQuery = "SELECT COUNT(prob_id) FROM OQC";

        $rResultTotal = mysql_query( $sQuery) or _doError(_ERROR30 . ' (<small>' . htmlspecialchars($sql) . '</small>): ' . mysql_error() );  //$
        $aResultTotal = mysql_fetch_array($rResultTotal);
        $iTotal = $aResultTotal[0];

//echo "sEcho is ".$_POST['sEcho'];

        $sOutput = '{';
        $sOutput .= '"sEcho": '.intval($_POST['sEcho']).',';     //   '.intval($_POST['sEcho']).', ';
        $sOutput .= '"iTotalRecords": '.$iTotal.', ';
//      $sOutput .= '"iTotalDisplayRecords": '.$iFilteredTotal.', \';
        $sOutput .= '"iTotalDisplayRecords": '.$iTotal.', ';
        $sOutput .= '"aaData": [ ';
        while ( $aRow = mysql_fetch_array( $rResult ) )
        {
                $sOutput .= "[";
                $sOutput .= '"'.addslashes($aRow['prob_id']).'",';
                $sOutput .= '"'.addslashes($aRow['Model']).'",';
                $sOutput .= '"'.addslashes($aRow['Serial']).'",';
                $sOutput .= '"'.addslashes($aRow['Lotno']).'",';
                $sOutput .= '"'.addslashes($aRow['Date']).'",';
                $sOutput .= '"'.addslashes($aRow['Symptom']).'",';
                $sOutput .= '"'.addslashes($aRow['Cause']).'",';
                $sOutput .= '"'.addslashes($aRow['Status']).'",';
                $sOutput .= '"'.addslashes($aRow['CM']).'",';
                $sOutput .= '"'.addslashes($aRow['Detail']).'"';
                $sOutput .= "],";
        }
        $sOutput = substr_replace( $sOutput, "", -1 );
        $sOutput .= '] }';

        echo $sOutput; 
```

如果不显示`Detail`一切都可以正常工作。为什么？

* * *

在萤火虫秀： [结果](http://pastebin.com/PYwwCT8T)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:47:53.053

您好，您需要在 jquery 数据表脚本中提及列名。

# sql-server - 如何在 SQL Server 2012 中将 varbinary() 转换为 varchar(max) 时对语言特定字符进行编码？

> ID：14038303
> 
> 赞同：2
> 
> 时间：2012-12-26T09:10:26.367
> 
> 标签：sql-server, encoding, sql-server-2012, varchar, varbinary

我正在尝试将数据库列`DATA`从SQL Server 2012转换`varbinary()`为。`varchar(max)`

我正在使用此代码来处理转换：

```
SELECT CONVERT(VARCHAR(MAX), DATA) FROM [dbo].[TABLE_NAME] 
```

结果行如下：

```
VW 6501 Ã‡amaÅŸÄ±r 
```

我在使用特定语言字符时遇到问题（目前就我而言，语言是土耳其语）

如何解决 SQL Server 2012 中的这个编码问题？

考虑到任何给定语言的数据丢失/编码问题，是否有一种通用的方法可以为任何语言进行这种转换？

这听起来像是一个菜鸟问题，但我真的很感激任何建议或答案。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:11:23.773

通常，SQL Server 不高度重视 UTF-8。但是，.NET 有执行此操作的方法，您可以通过 CLR 集成获得它们。

使用 C# 编译：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;

namespace UtfLib
{
    public static class UtfMethods
    {
        [SqlFunction(IsDeterministic = true, IsPrecise = true)]
        public static SqlBinary NVarCharToUtf8(SqlString inputText)
        {
            if (inputText.IsNull)
                return new SqlBinary(); // (null)

            return new SqlBinary(Encoding.UTF8.GetBytes(inputText.Value));
        }

        [SqlFunction(IsDeterministic = true, IsPrecise = true)]
        public static SqlString Utf8ToNVarChar(SqlBinary inputBytes)
        {
            if (inputBytes.IsNull)
                return new SqlString(); // (null)

            return new SqlString(Encoding.UTF8.GetString(inputBytes.Value));
        }
    }
} 
```

将程序集导入数据库并创建外部函数：

```
CREATE ASSEMBLY UtfLib
FROM 'C:\UtfLib.dll'
GO
CREATE FUNCTION NVarCharToUtf8 (@InputText NVARCHAR(MAX))
RETURNS VARBINARY(MAX)
AS EXTERNAL NAME UtfLib.[UtfLib.UtfMethods].NVarCharToUtf8
GO
CREATE FUNCTION Utf8ToNVarChar (@InputBytes VARBINARY(MAX))
RETURNS NVARCHAR(MAX)
AS EXTERNAL NAME UtfLib.[UtfLib.UtfMethods].Utf8ToNVarChar 
```

最后一步，您必须启用 clr

```
sp_configure 'clr enabled',1
GO
RECONFIGURE
GO
sp_configure 'clr enabled'  -- make sure it took
GO 
```

瞧！

```
SELECT dbo.Utf8ToNVarChar(DATA) FROM [dbo].[TABLE_NAME] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:22:47.583

尝试 NVARCHAR

```
Select convert (NVARCHAR(max),DATA) FROM  [dbo].[TABLE_NAME] 
```

编辑：

SQL Server 不支持处理 UTF8。要转换二进制值，您必须编写自己的函数。最简单的方法是使用 CLR。

您可以将其用作模型： [如何在 CLR UDF 中返回 nvarchar(max)？](https://stackoverflow.com/questions/356373/how-to-return-an-nvarcharmax-in-a-clr-udf)

只需将正则表达式代码替换为 Encoding.UTF8.GetString

# c++ - 使用 openMP 在指定核心上执行特定功能

> ID：14038310
> 
> 赞同：0
> 
> 时间：2012-12-26T09:10:53.920
> 
> 标签：c++, parallel-processing, openmp, core

是否可以使用 OpenMP 修复一个功能以在特定内核上运行？

例如：我有两个功能，即：**Foo1**和**Foo2**

我的电脑（Linux OS）有两个核心：**core0**和**core1**。

那么，我怎样才能同时在 core0 上运行应用程序**Foo1**和在**core1**上运行 Foo2呢？

我正在使用 C++ 进行编码。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:24:38.320

听起来你想

1.  将 OpenMP 线程数设置为 2 ( `omp_set_num_threads(2)`)，并且
2.  在*并行区域*中，检查线程 ID 并相应地调用`Foo1`或`Foo2`。

OpenMP 文档中描述了如何执行这些操作。

另一种方法是创建两个 openMP 任务，每个任务运行您的一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:47:24.440

感谢@Novelocrat 和@Joachim 的有用评论：

我是这样做的：

```
int main() {

#pragma omp parallel num_threads(2)
{
    #pragma omp sections
    {
        #pragma omp section
        {
            foo1();
        }
        #pragma omp section
        {
            foo2();
        }
    }
}

return 0; } 
```

现在 foo1() 总是在线程 1 上运行，而 foo2() 总是在线程 2 上运行。

在运行时设置环境变量：GOMP_CPU_AFFINITY="0 1"

它将线程 1 绑定到 core0，线程 2 绑定到 core1。

# ios - iOS：在 xml 解析完成之前创建的表视图

> ID：14038312
> 
> 赞同：0
> 
> 时间：2012-12-26T09:11:02.230
> 
> 标签：ios, uitableview, xml-parsing, dispatch

好的，我希望我在这里遗漏了一些基本的东西——我不是这方面的专家。如果没有示例代码，它应该是不言自明的：我解析了一个 Web 托管的 xml 文件，该文件包含要在 tableView 中显示的标题列表以及在选择单元格时传递给 webView 的关联 URL。解析发生在 tableView 到字典中。如果我在主线程上解析它会很好地工作，但如果信号很差，我担心会挂起 UI。因此，我按照此处的示例将解析调用包装在调度队列中，现在它显示了一个空表。但是，如果我返回视图层次结构并再试一次（它嵌入在导航控制器中），那么它就可以工作，我的表已经完全填充。我假设通过使用辅助线程以某种方式在填充内容数组之前创建表。我该如何解决这个问题？谢谢！安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:15:10.320

实现的`- (void)parserDidEndDocument:(NSXMLParser *)parser`委托方法`NSXMLParser`。并从该方法调用`reloadData`您的 tableView。

```
- (void)parserDidEndDocument:(NSXMLParser *)parser
{
   dispatch_sync(dispatch_get_main_queue(), ^{
       [yourTable reloadData];
   });
} 
```

参考[NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:13:21.417

如果您在调度队列中进行削减，则必须更新主队列上的 UI。

我正在做类似的事情。这是我的代码：

```
dispatch_queue_t imgDownloaderQueue = dispatch_queue_create("imageDownloader", NULL);
dispatch_async(imgDownloaderQueue, ^{
    NSString *avatarUrlString = [avatarImageDictionary objectForKey:@"url"];
    avatarImage = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:avatarUrlString]]];

    dispatch_sync(dispatch_get_main_queue(), ^{
        id asyncCell = [self.tableView cellForRowAtIndexPath:indexPath];
        [[asyncCell avatarImageView] setImage:avatarImage];
    });
}); 
```

# c# - 我可以在 RESTful 服务中使用 TCP 吗？

> ID：14038316
> 
> 赞同：18
> 
> 时间：2012-12-26T09:11:29.777
> 
> 标签：c#, .net, wcf, rest

REST 正在使用 Web 的当前特性，并在其上应用一些原则以提高其效率。它使用标准的 HTTP 动词进行通信，并利用其无状态特性。

但是，REST 服务是否可以使用 TCP 协议进行通信？如果是，那么它会违反其原则吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-26T09:13:44.040

HTTP 是基于 TCP/IP 的协议。因此，当您使用 REST 时，您已经在使用 TCP 进行通信。但是，如果您想在纯 TCP 套接字上使用 REST，而不使用 HTTP，那么不，这没有意义，因为 REST 基于 HTTP 动词和标头。这些概念只存在于 HTTP 协议中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-09-25T12:49:40.117

REST 是一种架构风格（或一组约束）。碰巧 HTTP 可以轻松匹配所有这些约束。除此之外，还有很多 HTTP/1.1 基础设施已经支持它：服务器、代理、缓存、客户端库、解析器等。像这样的东西：

[![HTTP 和 REST 关系](../Images/ed4dec72b80465109f4b64a3b25e5b64.png)](https://i.stack.imgur.com/Gnc0C.jpg)

系统可以从头开始构建为 RESTful 且不依赖 HTTP 吗？当然。来自[Roy Fielding 本人](https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)的权威来源：

> REST API 不应依赖于任何单一的通信协议。

如果你阅读了这篇文章或者实际上是[Roy 的论文](https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)，你会意识到，如果你尝试遵循所有的限制，你最终会得到一些看起来和行为都非常像现代 HTTP 的东西，尽管它可能缺乏大多数基础设施支持HTTP 有。因此，问题是：值得吗？

此外，如果您查看大多数 RESTful 服务，它们很少是完全 REST 服务。这就是为什么他们称自己为“RESTful 服务”，而不是“REST 服务”。顺便说一句，该站点的 API 非常接近于完整的 REST 实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-16T20:28:58.207

> 但是，REST 服务是否可以使用 TCP 协议进行通信？如果是，那么它会违反其原则吗？

**简答**

不，如果您根据 REST 原则编写它，它不会违反它的原则。是的，如果您不遵循 REST 原则，它将违反其原则。您在客户端和服务器端的代码必须遵守 REST 规则。例如，如果我向“...employee/22”发送一个“GET”，它最好向我发送一个 REST 响应，例如 200、标头和内容类型等。所有这些基本上都是 HTTP 所做的。

* * *

**长答案**

您的问题的答案由@ГеоргиКременлиев 提供。我实际上认为这可能是唯一正确的答案。

确实，REST 主要与 HTTP 相关联，当人们谈论 REST 时，他们正在谈论 HTTP。但是，“大部分”并不意味着“总是”，即使它是“总是”，也不意味着没有 HTTP 就不可能实现 REST，这在@ГеоргиКременлиев 答案的链接中指出。HTTP 运行良好（客户端和服务器），采用这些原则来创建具有这些原则的任何客户端/服务器应用程序，因此它们可以享受与 HTTP 相同的好处。换句话说，

1.  任何客户端都可以设计为理解 REST（例如，浏览器理解 REST）
2.  任何服务器都可以设计为理解 REST（例如，Web 服务器理解 REST）

这里有一点很重要，**REST 原则是从 HTTP 借来的**。因此，如果您是 RESTful，则意味着您遵循 HTTP 原则。

话虽如此，如果您不想使用 HTTP，那么您的客户端和/或服务器都必须理解 HTTP 所说的相同语言。例如，它使用 GET、POST、PUT 等动词和 200、300、400 等响应代码。因此，您的服务器需要了解如何响应诸如*...employee/22*之类的请求并返回：

*   200 OK，301 永久移动，500 等等...
*   内容类型
*   需要其他标题

您的客户端还需要了解这些标头才能向服务器发送请求并使用来自服务器的响应。

如果你确实实现了所有这些、安全性（身份验证和授权等）、chaching 和列表继续，你会意识到你只是在尝试重新发明轮子：HTTP。

这值得吗？您确定性能瓶颈是 HTTP 协议还是您的后端代码、对数据库的查询等？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-05T21:57:55.313

正如 Darin 已经[回答](https://stackoverflow.com/a/14038343/1476885)的那样，HTTP 是一种 TCP 协议，有一些开销，这正是 RESTful 定义中使用的。所以，不，你不能消除 HTTP 开销。

我相信您的问题“*我可以将 TCP 用于更快的 RESTful 应用程序吗？* ”与“*如果 HTTP 比纯 TCP 慢，为什么这么多网站都使用 REST* ？”这个问题有关。

事实是：HTTP 确实比纯二进制 TCP 形式慢，但在**大多数**应用程序中，您的**用户不会注意到差异**，因为开销非常小，通常客户端每分钟只会发出几个请求。

例如：`GET /posts?userId=5`

如果这个请求需要超过几毫秒才能完成，那么问题不在于 HTTP 协议。性能问题与网络延迟、服务器端代码或从数据库中检索数据的方式有关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-05T23:18:48.457

角度略有不同：

1\. 不要使用 WCF 创建基于 REST 的服务。使用 Asp.Net WebAPI。

2\. 只是为了好玩：如果您想使用具有“REST”原则的 WCF TCP 绑定，也许您可​​以创建一个基于“资源”的无状态 API，而不是像一个典型的 RPC。

```
[ServiceContract]
interface RestApi
{
    Result Get(string id);
    Result Post(string id, Resource resource);
    Result Put(string id, Resource resource);
    void Delete(string id);
} 
```

这样您就不必为每项服务定义不同的合同，而只需针对不同的交互调整您的资源。

注意：我不建议任何人这样做：这是在重新发明轮子。如果需要 REST，请使用 WebAPI。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T13:38:03.273

您不能将 Http 之外的其他绑定用于基于 Rest 的服务。这是因为 Rest 是一种基于一定原则的建筑风格。这个原则之一是借助 web 的无状态协议 http，它还希望使用 TCP 协议不可用的 Http 字词，例如 Get、Port、Put 和 Delete

# jquery - 是否可以通过 Asp.net 中的 jQuery 删除 div 控件中最后插入的文本？

> ID：14038317
> 
> 赞同：0
> 
> 时间：2012-12-26T09:11:41.773
> 
> 标签：jquery, asp.net, checkbox, append

新的 Jquery 当复选框被选中时，我正在向 div 控件插入文本。我想在取消选中“复选框”时删除该文本

```
<div align="center" id="chkBoxes">
  <asp:CheckBox ID="chbIceCream" text ="Ice Cream" runat="server"></asp:CheckBox>
  <asp:CheckBox ID="chbCake" Text ="Cake" ClientIDMode="static" runat="server" />
  <asp:CheckBox ID="chbChocolet" Text ="Cho colet"  runat="server" />    
 </div>
 <div id="ContentDiv"> 
</div> 
```

jQuery代码：

```
 $(document).ready(function () {
       $('#chbIceCream').click(function () {
         var Text = $("input:checkbox[id$=chbIceCream]").next().text();
         if ($(this).attr('checked'))
             $('#ContentDiv').append(Text);
         else
            $('#ContentDiv').remove(Text);
      });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:16:44.963

尝试使用[**文本**](http://api.jquery.com/text/)和[**空**](http://api.jquery.com/empty/)函数

```
$(document).ready(function () {
  $('#chbIceCream').click(function () {

    var Text = $(this).val();
    if ($(this).attr('checked'))
        $('#ContentDiv').text(Text);
    else
       var oldText= $('#ContentDiv').text();
           $('#ContentDiv').text(oldText.replace(Text, ""));
  });
}); 
```

**编辑：**根据有问题的评论更新答案从 $(this).next().text()更新**$(this).val( )**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:22:39.340

如果您想从 ContentDiv 中删除所有文本，请参阅 Matthew 的回答

如果您想删除特定文本，即该 div 中还有其他文本，您不想删除。然后使用：

```
var str = $('#ContentDiv').text()
str.replace('your text','');
$('#ContentDiv').text(str); 
```

在你的`else`部分

# php - 如何阅读此高级退货声明？

> ID：14038318
> 
> 赞同：0
> 
> 时间：2012-12-26T09:11:42.193
> 
> 标签：php, return

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

当我使用函数时，我使用标准的返回语句。

我的意思是我通常要么返回，要么返回`true`一个`false`变量。不过，我目前正在关注一个教程，除了返回下面的函数之外，我对此非常了解。

我不明白如何阅读两个点的问号....

```
public function someFunction()
{
    return null === $this->anAttribute ? null : $this->aFunction();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:13:20.510

返回`null`if `$this->anAttribute`is `null`else 返回`$this->aFunction()`

`?:`称为[三元运算符](http://php.net/manual/en/language.operators.comparison.php)

首先写作`null`是为了避免错误的分配拼写错误，比如`if ($a = null)`. 如果您习惯于编写函数和常量，这将导致错误`if(null = $a)`

`===`可以在上面使用的文章中阅读并称为**Identical**。`$a === $b` `TRUE`if`$a`等于`$b`，并且它们属于同一类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:14:19.867

`null`如果`$this->anAttribute`is **strict** ，它将返回`null`，否则，它将调用`$this->aFunction()`并返回该函数的结果（如果该函数最后返回）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:59:15.317

它是一个三元运算符。左边的东西是一个表达式（如`if (...)`）。如果表达式计算结果为真，则使用下一个值，如果表达式计算结果为假，则使用最后一个值：

```
expression ? true : false; 
```

在伪代码中，你可以这样写：

```
if expression is true:
    use this
otherwise:
    use this 
```

如果在三元代码周围使用括号，通常更容易阅读（这是一件微妙的事情，但是当你看到以括号开头的 return 语句时，你知道你应该停下来正确阅读它，而不是忽略它或被难住了一会儿，然后意识到它是什么）。

```
return ((null === $this->anAttribute) ? null : $this->aFunction()); 
```

# ruby-on-rails - Rails - 为什么在登录方法中使用 self.current_user = user

> ID：14038321
> 
> 赞同：4
> 
> 时间：2012-12-26T09:12:10.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, instance-variables, self

我已经完成了Michael Hartl 的[Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)。我知道一些关于实例变量、getter 和 setter 的基本概念。

登录方法在[这里](http://ruby.railstutorial.org/chapters/sign-in-sign-out#code-sign_in_function)

```
def sign_in(user)
  cookies.permanent[:remember_token] = user.remember_token
  self.current_user = user
end 
```

现在我被困在这条线上

```
self.current_user = user 
```

我找到了这个相关的[问题](https://stackoverflow.com/questions/11969935/understand-current-user-concept-when-creating-a-login-session-in-ruby)，但我仍然不明白。

登录后，用户将被重定向到另一个页面，因此`@current_user`将为零。Rails 只能从 cookie 或 session 中获取 current_user ，然后 set `@current_user`，这样就不需要在当前请求中再次检查 cookie 或 session 了。

签出方法

```
def sign_out
  self.current_user = nil
  cookies.delete(:remember_token)
end 
```

`self.current_user = nil`出于同样的原因，既然用户会被重定向到 root_url ，为什么我们需要呢？

这是getter和setter的代码

```
def current_user=(user)
  @current_user = user
end

def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:57:28.967

重定向后未设置 @current_user 是对的。

```
@current_user ||= User.find_by_remember_token(cookies[:remember_token]) 
```

此语句有助于避免重复调用数据库，但仅当 current_user 变量多次用于单个用户请求时才有用。因此，设置当前用户仅在单个呼叫期间有用。

同样，将当前用户设置为 nil 并在 sign_out 期间从 cookie 中删除令牌可确保后续处理将注销考虑在内。否则，存在其他方法引用当前用户变量并认为用户仍处于登录状态的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:17:53.940

您对本书的下一部分有完整的解释

[当前用户](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-current_user)

基本上，当您执行 self.current_user= 时，您调用方法 'def current_user= ()' 这是设置器，您可能不仅会在此处分配 @current_user 变量，还会在 cookie 或会话中保留一些参考以供将来参考。以同样的方式，您可能会创建一个看起来像

```
def current_user
  @current_user ||= get_user_from_cookies
end 
```

为了让当前用户可以访问。我认为你只是走得很快，这本书正试图为不熟悉网络开发的用户一步一步地走

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:44:01.307

我相信你说的对，到目前为止你编写的代码并没有太大的区别。

但是，让您的 sign_in/sign_out 方法了解用户如何通过您的应用程序的来龙去脉是没有意义的。如果假设您的应用程序在登录后所做的唯一事情是将用户重定向到根页面，那将是非常脆弱的（而不是它的业务）。

您可以做各种各样的事情，从收集审计数据（例如每次有人登录时记录）到根据用户偏好或用户的其他属性将它们重定向到不同的页面。

# php - PHP - 检查是否设置了变量，然后在一个命令中打印它

> ID：14038322
> 
> 赞同：0
> 
> 时间：2012-12-26T09:12:25.590
> 
> 标签：php, if-statement

> **可能重复：**
> [PHP 的简写是什么：print var if var exists](https://stackoverflow.com/questions/5836515/what-is-the-php-shorthand-for-print-var-if-var-exist)

为了打印一个变量，我这样做：

```
if(isset($var)) print $var; 
```

但我在这里重复 $var 2 次。有没有办法让它看起来像：

```
If $var exists then print it 
```

代替

```
If $var exists then print $var 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:18:27.377

您可以使用 `print (isset($var) ? $var : '');`

`?:`称为[三元运算符](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:23:46.297

初始化`$var`为空字符串，因此您将不需要 if-check。

假设你这样做`$var = $_REQUEST['var'];`，你会不走运。

恕我直言，这是一个微优化，并不是很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:23:46.563

使用错误控制运算符“@”的帮助[http://php.net/manual/en/language.operators.errorcontrol.php](http://php.net/manual/en/language.operators.errorcontrol.php)

```
echo @$var; 
```

我不认为使用“如果 $var 存在则打印它”比“如果 $var 存在则打印 $var”更快。在内部，检查变量的脚本引擎是否已设置。可能是微优化。

此类问题可能会在 IT 测验中提出。我记得一个问题“如何编写一个打印字符串的程序。条件是不要使用分号”。给出了答案。

```
<?php if(print("Hello World")){} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T09:38:51.717

不幸的是，没有针对此的简短的 PHP 内置解决方案。

在我们的框架中，我们使用自己的函数：

```
function isset_(&$aVariable, $aDefaultValue = null)
{
    if (isset($aVariable)) return $aVariable;
    return $aDefaultValue;
} 
```

然后您可以执行以下操作：

```
echo isset_($var); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-26T09:26:56.970

你可以做`<?php echo @$var; ?>. Or <?= @$var ?>.`

# variables - 在宏的公式中使用输入变量

> ID：14038324
> 
> 赞同：0
> 
> 时间：2012-12-26T09:12:32.287
> 
> 标签：variables, excel, input, excel-formula, vba

我想在公式中使用用户输入，如下所示：

```
Sub example()

Dim StockDays As Integer
StockDays = InputBox(Prompt:="How many days?")

Range("AG2").FormulaR1C1 = "=ROUNDUP(RC[-6]*" & StockDays & "/90, 0)"
Range("AG2").Select
Selection.AutoFill Destination:=Range(Cells(2, 33), Cells(1500, 33))

End Sub 
```

运行时，上面的代码在 ROUNDUP 行抛出错误。

> 运行时错误 1004。
> 应用程序定义或对象定义的错误。

我认为问题与变量有关`StockDays`。

我该如何安排代码以使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:17:43.413

我已经评论了代码，所以你理解它应该没有任何问题:)

```
Option Explicit

Sub example()
    Dim StockDays As Integer

    '~~> Type:=1  will ensure that the user enters only numbers
    StockDays = Application.InputBox(Prompt:="How many days?", Type:=1)

    '~~> No Need to autofill. You can fill all the range in one go
    Thisworkbook.Sheets("Sheet1").Range("AG2:AG1500").FormulaR1C1 = _
    "=ROUNDUP(RC[-6] * " & StockDays & "/ 90, 0)"

    'OR this as mentioned in your comment

    Thisworkbook.Sheets("Sheet1").Range("AG2:AG1500").FormulaR1C1 = _
    "=ROUNDUP((RC[-6]* " & StockDays & "/90),0)"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:14:18.997

我认为这应该有效

Range("AG2").FormulaR1C1 = "=ROUNDUP(RC[-6] * `" & StockDays & "`/ 90, 0)"

您犯的错误是，您在应用公式但忘记将您使用的变量替换为变量中的值

# c# - 死锁：网络安装程序要求关闭调用的应用程序

> ID：14038329
> 
> 赞同：0
> 
> 时间：2012-12-26T09:12:48.897
> 
> 标签：c#, .net, .net-4.0

我有这种情况。我正在通过自定义安装程序应用程序（.NET 应用程序）安装应用程序。由于该应用程序至少需要 .NET4，因此会检查自定义安装程序以查看它是否已安装。如果尚未安装，自定义安装程序会尝试通过批处理文件安装 .NET4。这里的问题是，当 .NET4 安装正在进行时，它会抛出一个对话框，提示“在继续安装之前应关闭以下应用程序：自定义安装程序”，即 .NET 安装要求关闭调用它的应用程序。我应该怎么做才能避免这种僵局？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T09:23:57.197

只需关闭它，安装 .NET，然后再次尝试安装。

# android - Android SearchView 过滤 ListView

> ID：14038331
> 
> 赞同：20
> 
> 时间：2012-12-26T09:13:02.313
> 
> 标签：android, searchview

我已经在我的 SherlockAction Bar 中为我的 SearchView 实现了搜索过滤器。

当我键入 mi 时，希望在下面的列表视图中显示过滤结果，该列表视图仅以 M 开头，依此类推。但现在它显示随机结果。

![在此处输入图像描述](../Images/6673693f2146c54f5475dc1df21cb65c.png) ![在此处输入图像描述](../Images/bc7d29e0bb876350396f4fa757418ae1.png)

```
public boolean onQueryTextChange(String newText) {
    Log.i("Nomad", "onQueryTextChange");

    if (TextUtils.isEmpty(newText)) {
        adapter.getFilter().filter("");
        Log.i("Nomad", "onQueryTextChange Empty String");
        placesListView.clearTextFilter();
    } else {
        Log.i("Nomad", "onQueryTextChange " + newText.toString());
        adapter.getFilter().filter(newText.toString());
    }
    return true;
}

public boolean onQueryTextSubmit(String query) {
    Log.i("Nomad", "onQueryTextSubmit");
    return false;
}

public boolean onClose() {
    Log.i("Nomad", "onClose");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-26T09:24:03.347

把它放在你的适配器里面：

```
@Override
public Filter getFilter(){
   return new Filter(){

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
             constraint = constraint.toString().toLowerCase();
             FilterResults result = new FilterResults();

                if (constraint != null && constraint.toString().length() > 0) {
                  List<String> founded = new ArrayList<String>();
                        for(YourListItemType item: origData){
                            if(item.toString().toLowerCase().contains(constraint)){
                                founded.add(item);
                            }
                    }

                        result.values = founded;
                        result.count = founded.size();
                    }else {
                        result.values = origData;
                        result.count = origData.size();
                    }
            return result;

    }
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
           clear();
           for (String item : (List<String>) results.values) {
                 add(item);
           }
    notifyDataSetChanged();

    }

    }
    } 
```

而这个适配器的内部构造函数

```
public MyAdapter(Context context, int layoutResourceId, String[] places) {
        super(context, layoutResourceId, data);
        this.context = context;

        this.data = Arrays.asList(places);
        this.origData = new ArrayList<String>(this.data);

 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-11T21:41:55.887

从适配器获取过滤器并过滤查询更改时 seachview 字段中更改的字符串。

```
searchView.setOnQueryTextListener(new OnQueryTextListener() {

        @Override
        public boolean onQueryTextSubmit(String query) {
            return false;
        }

        @Override
        public boolean onQueryTextChange(String newText) {
            getListAdapter().getFilter().filter(newText);
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:40:31.467

在 listview_arr 中添加元素，其余代码如下...：-

```
 listview_arr = new String[listview_array_location.length];
    listview_arr = listview_array;

    setListAdapter(new bsAdapter(this));

    et.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s)
        {
              // Abstract Method of TextWatcher Interface.
        }
        public void beforeTextChanged(CharSequence s,
                int start, int count, int after)
        {
            // Abstract Method of TextWatcher Interface.
        }
        public void onTextChanged(CharSequence s,int start, int before, int count)
        {
            /*Log.d("count","count==>"+s.length());

                if(((s.length()-temp)%4)==0)
                {
                    Log.d("in if","if in if"+(s.length()-temp));
                    et.setText(et.getText().toString()+" ");
                    int position = et.getText().toString().length();
                    Editable etext = et.getText();
                    Selection.setSelection(etext, position);
                    temp++;
                }*/

            Log.d("count","count==>"+s);
            textlength = et.getText().length();
            array_sort.clear();
            for (int i = 0; i < listview_array_location.length; i++)
            {
                if (textlength <= listview_array_location[i].length())
                {
                    if(et.getText().toString().equalsIgnoreCase((String)listview_array_location[i].subSequence(0,textlength)))
                    {
                        array_sort.add(listview_array[i]);
                    }
                  }
            }
            AppendList(array_sort);
        }
    });
}

public void AppendList(ArrayList<String> str)
{
    listview_arr = new String[str.size()];
    listview_arr = str.toArray(listview_arr);

    setListAdapter(new bsAdapter(this));
}

public class bsAdapter extends BaseAdapter
{
    Activity cntx;
    public bsAdapter(Activity context)
    {
        // TODO Auto-generated constructor stub
        this.cntx=context;

    }

    public int getCount()
    {
        // TODO Auto-generated method stub
        return listview_arr.length;
    }

    public Object getItem(int position)
    {
        // TODO Auto-generated method stub
        return listview_arr[position];
    }

    public long getItemId(int position)
    {
        // TODO Auto-generated method stub
        return listview_array.length;
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row=null;

        LayoutInflater inflater=cntx.getLayoutInflater();
        row=inflater.inflate(R.layout.search_list_item, null);

        TextView tv=(TextView)row.findViewById(R.id.title);
        Button Btn01=(Button)row.findViewById(R.id.Btn01);
        Button Btn02=(Button)row.findViewById(R.id.Btn02);

        tv.setText(listview_arr[position]);

        Btn01.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                Toast.makeText(SearchUser.this, "Button 1 "+listview_arr[position], Toast.LENGTH_SHORT).show();
                  int color = PreferenceManager.getDefaultSharedPreferences(
                          SearchUser.this).getInt(COLOR_PREFERENCE_KEY, Color.WHITE);
                  new ColorPickerDialog(SearchUser.this, SearchUser.this, color).show();
            }
         });

        Btn02.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                Toast.makeText(SearchUser.this, "Button 2 "+listview_arr[position], Toast.LENGTH_SHORT).show();
            }
         });

    return row;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:40:49.187

你可以简单地通过这个[例子](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)。很容易集成到您的应用程序中

这是数组和`addTextChangedListener`EditText的逻辑

# wordpress - Wordpress - 为什么 the_title 过滤器不会更改帖子标题？

> ID：14038333
> 
> 赞同：0
> 
> 时间：2012-12-26T09:13:09.840
> 
> 标签：wordpress, wordpress-theming

编辑：解决了问题

继承人的代码：

```
function my_function($content){
    return str_replace('Microsoft', 'Apple', $content);
}

add_filter('the_content', 'my_function');
add_filter( 'the_title', 'my_function'); 
```

内容部分有效，帖子内容中的所有 Microsoft 单词都更改为 Apple。帖子标题并没有改变。我给帖子的标题是：“MicrosoftMy Microsoft Page Microsoft Microsoft”，但没有一个 Microsoft 单词被替换。

解决方案：

在我的插件 PHP 文件中，我有一个主要功能：

```
function create_main_page() {
    add_filter('the_content', 'my_function' );
    add_filter( 'the_title', 'my_function' );
    ...
} 
```

我通过进入 wordpress HTML 编辑器来调用这个函数（我必须安装 PHP 执行插件才能将 PHP 输入到 HTML 编辑器中）。出于某种原因，当我从这个 create_main_page 函数中调用 add_filter 函数时，事情变得一团糟，因为它无法与标题交互。当我从页面本身调用 add_filter 函数时，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:31:23.943

尝试对内容和标题使用单独的方法

```
function my_function_content($content){
    return str_replace('Microsoft', 'Apple', $content);
}

function my_function_title($title){
    return str_replace('Microsoft', 'Apple', $title);
}

add_filter('the_content', 'my_function_content');
add_filter( 'the_title', 'my_function_title'); 
```

# iphone - 如何以编程方式识别 iphone (3g,4s,5) 版本

> ID：14038344
> 
> 赞同：4
> 
> 时间：2012-12-26T09:13:47.673
> 
> 标签：iphone, objective-c

> **可能重复：**
> [如何通过代码查找 iPhone/iPod 设备型号（3G、3GS、4、4S）？](https://stackoverflow.com/questions/8426518/how-to-find-iphone-ipod-device-model3g-3gs-4-4s-by-code)
> [检测设备类型](https://stackoverflow.com/questions/13139430/objective-c-how-detect-iphone-iphone5-and-ipad)

我想以编程方式识别 iphone 的型号（3g、4s、5）。

那么我怎样才能找到它呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T09:19:10.843

您可以通过以下条件轻松检测 iphone 3gs-4s、iphone5 和 iPad：-

```
 if([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPhone)
 {
     if ([[UIScreen mainScreen] bounds].size.height == 568)
     {

          //iphone 5
     }
     else
     {
         //iphone 3.5 inch screen iphone 3g,4s 
     }
 }
 else
 {
        //[ipad]
 } 
```

[只需在此检测设备类型](https://stackoverflow.com/questions/13139430/objective-c-how-detect-iphone-iphone5-and-ipad/13139561#13139561)上访问我的答案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T09:30:04.553

请使用以下代码

```
#import <sys/utsname.h>

NSString* machineName()
{
    struct utsname systemInfo;
    uname(&systemInfo);

    return [NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding];
} 
```

使用以下代码识别您的设备类型

```
if([machineName() isEqualToString:@"iPhone1,2"])
{
    deviceType = @"iPhone 3G";
}
else if([machineName() isEqualToString:@"iPhone2,1"])
{
    deviceType = @"iPhone 3GS";
}
else if([machineName() isEqualToString:@"iPhone3,1"] || [machineName() isEqualToString:@"iPhone3,2"] || [machineName() isEqualToString:@"iPhone3,3"])
{
    deviceType = @"iPhone 4";
}
else if([machineName() isEqualToString:@"iPhone4,1"])
{
    deviceType = @"iPhone 4S";
}
else if([machineName() isEqualToString:@"iPhone5,1"])
{
    deviceType = @"iPhone 5";
}
else if([machineName() isEqualToString:@"iPod1,1"])
{
    deviceType = @"iPod Touch 1G";
}
else if([machineName() isEqualToString:@"iPod2,1"] || [machineName() isEqualToString:@"iPod2,2"])
{
    deviceType = @"iPod Touch 2G";
}
else if([machineName() isEqualToString:@"iPod3,1"])
{
    deviceType = @"iPod Touch 3G";
}
else if([machineName() isEqualToString:@"iPod4,1"])
{
    deviceType = @"iPod Touch 4G";
}
else if([machineName() isEqualToString:@"iPod5,1"])
{
    deviceType = @"iPod Touch 5G";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-26T09:16:07.217

您可以使用[Erica Sadun的 UIDevice (Hardware) 类别](http://github.com/erica/uidevice-extension/)

它可以用作：

```
[[UIDevice currentDevice] platformType]   // ex: UIDevice4GiPhone

[[UIDevice currentDevice] platformString] // ex: @"iPhone 4G" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T09:24:12.377

您可以为此使用以下代码：

```
NSString *device()
{
    struct utsname devInfo;
    uname(&devInfo);

    return [NSString stringWithCString:devInfo.machine encoding:NSUTF8StringEncoding];
} 
```

确保您导入 `#import <sys/utsname.h>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T09:21:16.513

嗨，请使用下面的代码

```
[UIDevice currentDevice] platformType]   // returns UIDevice4GiPhone
[[UIDevice currentDevice] platformString] // returns @"iPhone 4G" 
```

或者请检查ratina

```
+ (BOOL) isRetina
{
    if([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        return [[UIScreen mainScreen] scale] == 2.0 ? YES : NO;

    return NO;
} 
```

或者查看ios版本

```
 + (BOOL) isIOS5
    {
        NSString *os5 = @"5.0";
        NSString *currSysVer = [[UIDevice currentDevice] systemVersion];

        //    currSysVer = @"5.0.1";
        if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedAscending) //lower than 4
        {
            return NO;
        }
        else if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedDescending) //5.0.1 and above
        {        
            return YES;
        }
        else // IOS 5
        {
            return YES;
        }

        return NO;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T09:19:20.513

您可以使用[uidevice-extension](https://github.com/erica/uidevice-extension)获得这些 您需要的是以下功能：

```
- (NSString *) platform;
- (NSString *) hwmodel;
- (NSUInteger) platformType;
- (NSString *) platformString; 
```

来自 UIDevice-Hardware.h

# mysql - MySQL LOAD DATA 错误无法解决...！

> ID：14038345
> 
> 赞同：0
> 
> 时间：2012-12-26T09:13:50.273
> 
> 标签：mysql, load-data-infile

```
mysql> LOAD DATA INFILE '/abc.txt' INTO TABLE test1 FIELDS TERMINATED BY '|';
ERROR 13 (HY000): Can't get stat of '/abc.txt' (Errcode: 2) 
```

我按照语法使用了 LOAD DATA。但得到上述错误。任何人都可以告诉什么是错误..！？我尝试搜索 google dev.mysql 找不到它是什么错误？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T22:01:18.380

如果文件在您的 MYSQL 服务器上，请尝试使用完整路径。

```
LOAD DATA INFILE '/var/tmp/abc.txt' INTO TABLE test1 FIELDS TERMINATED BY '|'; 
```

如果文件不在服务器上并且在您的本地计算机上，并且您的用户可以访问服务器之间的 SCP 文件（试试这个

```
scp abc.txt mysqlserver: 
```

) 那么你应该能够做到这一点（再次使用完整路径）..

```
LOAD DATA LOCAL INFILE '/var/tmp/abc.txt' INTO TABLE test1 FIELDS TERMINATED BY '|'; 
```

如果这不起作用..尝试将文件重命名为 test1.txt 并使用“mysqlimport”命令？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T09:29:26.230

使用以下标志登录到 mysql 控制台：

```
mysql -uroot -p --local-infile 
```

然后输入密码。

之后执行加载数据命令如下：

```
LOAD DATA LOCAL INFILE '/abc.txt' INTO TABLE test1 FIELDS TERMINATED BY '|'; 
```

# ios5 - 在 UIDocument 中，完成处理程序永远不会在 IOS 5 中被调用，但在 IOS 6 中有效

> ID：14038347
> 
> 赞同：2
> 
> 时间：2012-12-26T09:13:58.790
> 
> 标签：ios5, uidocument

在 UIDocument 中，完成处理程序永远不会在 IOS 5 中被调用，但在 IOS6 中有效

# php - 有效地复制/复制/备份数据库表 - mysql

> ID：14038348
> 
> 赞同：2
> 
> 时间：2012-12-26T09:14:05.590
> 
> 标签：php, mysql, database, duplicates

**原因：**我被指派运行一些脚本来推进一个网站，这是一个梦幻足球网站，并且该网站的多个瞬间位于不同的域中。有些拥有超过 80,000 个用户，每个用户应该拥有一个由 15 名玩家组成的团队。因此，有些表有 No.users x No.players 行。

然而有时脚本失败并且结果被破坏，因此我必须在执行脚本之前备份 10 个有问题的表。尽管如此，我仍然需要备份表以保留用户操作的历史记录。因为足球比赛可能会持续 50 多个比赛周。

**任务：**使用 php 脚本复制数据库表。当我开始时，我曾经使用**sqlyog**备份表。它很有效，但很耗时，因为我必须等待每个表都被复制。此外，对于大表，**sqlyog**应用程序在复制大表期间崩溃，这可能非常烦人。

**当前解决方案：**我创建了一个简单的应用程序，其界面可以完成这项工作并且效果很好。它由三个文件组成，一个用于数据库连接，第二个用于数据库操作，第三个用于用户界面和使用第二个文件的代码。 *问题是，有时它会卡在复制表过程的中间。*

**目的：**创建一个应用程序供管理员使用，以方便使用mysql + php进行数据库备份。

**我的问题：**如何确保复制脚本在**不挂服务器或中断脚本的情况**下完全备份表。

在这里，我将包含用于复制功能的代码，但基本上这是我认为问题所在的两条关键线：

```
//duplicate tables structure 
 $query = "CREATE TABLE $this->dbName.`$newTableName` LIKE $this->dbName.`$oldTable`";

//duplicate tables data
  $query = "INSERT INTO $this->dbName.`$newTableName` SELECT * FROM $this->dbName.`$oldTable`"; 
```

其余代码仅用于在发生错误时进行验证。如果您想查看整个代码，请成为我的客人。这是功能：

```
private function duplicateTable($oldTable, $newTableName) {

        if ($this->isExistingTable($oldTable))
        {
            $this->printLogger("Original Table is valid -table exists- : $oldTable ");
        }
        else
        {
            $this->printrR("Original Table is invalid -table does not exist- : $oldTable ");
            return false;
        }

        if (!$this->isExistingTable($newTableName))// make sure new table does not exist alrady 
        {
            $this->printLogger("Distination Table name is valid -no table with this name- : $newTableName");

            $query = "CREATE TABLE $this->dbName.`$newTableName` LIKE $this->dbName.`$oldTable`";
            $result = mysql_query($query) or $this->printrR("Error in query. Query:\n $query\n Error: " . mysql_error());
        }
        else
        {
            $this->printrR("Distination Table is invalid. -table already exists- $newTableName");
            $this->printr("Now checking if tables actually match,: $oldTable => $newTableName \n");
            $varifyStatus = $this->varifyDuplicatedTables($oldTable, $newTableName);
            if ($varifyStatus >= 0)
            {
                $this->printrG("Tables match, it seems they were duplicated before $oldTable => $newTableName");
            }
            else
            {
                $this->printrR("The duplicate table exists, yet, doesn't match the original! $oldTable => $newTableName");
            }

            return false;
        }

        if ($result)
        {
            $this->printLogger("Query executed 1/2");
        }
        else
        {
            $this->printrR("Something went wrong duplicateTable\nQuery: $query\n\n\nMySql_Error: " . mysql_error());
            return false;
        }

        if (!$this->isExistingTable($newTableName))//validate table has been created
        {
            $this->printrR("Attemp to duplicate table structure failed $newTableName table was not found after creating!");
            return false;
        }
        else
        {
            $this->printLogger("Table created successfully: $newTableName");
            //Now checking table structure 
            $this->printLogger("Now comparing indexes ... ");
            $autoInc = $this->checkAutoInc($oldTable, $newTableName);
            if ($autoInc == 1)
            {
                $this->printLogger("Auto inc seems ok");
            }
            elseif ($autoInc == 0)
            {
                $this->printLogger("No inc key for both tables. Continue anyways");
            }
            elseif ($autoInc == -1)
            {
                $this->printLogger("No match inc key!");
            }

            $time = $oldTable == 'team_details' ? 5 : 2;
            $msg = $oldTable == 'team_details' ? "This may take a while for team_details. Please wait." : "Please wait.";

            $this->printLogger("Sleep for $time ...\n");
            sleep($time);
            $this->printLogger("Preparing for copying data ...\n");
            $query = "INSERT INTO $this->dbName.`$newTableName` SELECT * FROM $this->dbName.`$oldTable`";
            $this->printLogger("Processing copyign data query.$msg...\n\n\n");
            $result = mysql_query($query) or $this->printrR("Error in query. Query:\n $query\n Error: " . mysql_error());

            // ERROR usually happens here if large tables
            sleep($time); //to make db process current requeste.
            $this->printLogger("Query executed 2/2");
            sleep($time); //to make db process current requeste.

            if ($result)
            {
                $this->printLogger("Table created ($newTableName) and data has been copied!");
                $this->printLogger("Confirming number of rows ... ");

                /////////////////////////////////
                // start checking count
                $numRows = $this->checkCountRows($oldTable, $newTableName);

                if ($numRows)
                {
                    $this->printLogger("Table duplicated successfully ");
                    return true;
                }
                else
                {
                    $this->printLogger("Table duplicated, but, please check num rows $newTableName");
                    return -3;
                }
                // end of checking count
                /////////////////////////////////
            }//end of if(!$result) query 2/2
            else
            {
                $this->printrR("Something went wrong duplicate Table\nINSERT INTO $oldTable -> $newTableName\n\n$query\n mysql_error() \n " . mysql_error());
                return false;
            }
        }
    } 
```

正如您注意到的那样，该函数只是复制一个表，这就是为什么还有另一个函数从用户那里获取一个表数组并将表名称数组一个接一个地传递给 duplicateTable()。此问题应包括任何其他功能，请告诉我。

一个解决方案突然出现在我的脑海中，逐部分复制表格是否会增加任何改进，我不确定 Insert into 是如何工作的，但也许如果我可以一次插入 25% 可能会有所帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:40:21.783

> 但是有时脚本会失败并且结果会损坏，因此我必须在执行脚本之前备份 10 个有问题的表。

可能您需要在这里使用另一种解决方案：[transactions](http://dev.mysql.com/doc/refman/5.0/en/commit.html)。您需要将在失败脚本中使用的所有查询包装到事务中。如果事务失败，所有数据将与操作开始时相同。如果查询被正确执行 - 你没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:22:48.483

你为什么每次都复制表格 **。CLUSTERS**是一个不错的选择，它可以以分布式方式复制表格，并且更加可靠和安全。

# c# - 需要找到上个月的最后一天和上个月的前一天

> ID：14038350
> 
> 赞同：0
> 
> 时间：2012-12-26T09:14:12.987
> 
> 标签：c#

我必须找到上个月（11 月）和前一个月（10 月）的最后日期。
我使用了以下代码：

```
DateTime today = DateTime.Today;
DateTime endOfLastMonth = new DateTime(today.Year, today.Month - 1, 1).AddMonths(1).AddDays(-1);
DateTime endOfLastLastMonth = new DateTime(today.Year, today.Month - 2, 1).AddMonths(1).AddDays(-1); 
```

该代码今天运行良好，但在 1 月份代码失败，因为它将月份部分提供为 0 和 -1。

请让我知道该怎么做。
1 月份应该是 12 月 31 日和 11 月 30 日。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-26T09:17:01.730

查找上个月最后一天的最简单方法是只找到当前月份的*第一*天（这将始终有效），然后减去一天。然后对上个月做同样的事情。

```
DateTime startOfMonth = new DateTime(today.Year, today.Month, 1);
DateTime endOfPreviousMonth = startOfMonth.AddDays(-1);
DateTime endOfPreviousPreviousMonth = startOfMonth.AddMonths(-1).AddDays(-1); 
```

# javascript - Angular.js 从控制器访问模型（服务器验证）

> ID：14038359
> 
> 赞同：3
> 
> 时间：2012-12-26T09:14:41.847
> 
> 标签：javascript, angularjs

我现在尝试将我的遗留应用程序迁移到 Angular，现在遇到了以下问题。我有这个简单的形式：

```
<form name="loginForm" ng-controller="LoginCtrl" ng-submit="doLogin()">
  <input type="text" name="login" ng-model="login.login" />
  <span class="errors" ng-show="loginForm.login.$error.required">Required</span>
  <span class="errors" ng-show="loginForm.login.$error.bad_login">Login or pass incorrect</span>
  <input type="password" ng-model="login.pass"/>
</form> 
```

服务器以这种 JSON 类型返回错误： { login: 'bad_login', pass: 'incorrect' } 并且在控制器中：

```
function LoginCtrl($scope, $http) {

    $scope.doLogin = function() {
        var model = $scope.login;
        var req = { "login": model.login, "pass": model.pass };
        $http({ method: "POST", url: "/login", data: req }).success(function (resp) {
            if(resp.status != "ok") {
                angular.forEach(resp, function (value, key) {
                    // ex: model['login'].$setValidity('bad_login', false);
                    model[key].$setValidity(value, false);
                });
            }
        });
    };
} 
```

我尝试在循环中标记每个字段，而不是手动对每个字段进行硬编码。但这种方法不起作用。我收到此错误：`TypeError: Cannot call method '$setValidity' of undefined`，即使字段为空，我还有另一个错误：`TypeError: Cannot read property 'login' of undefined` 所以我认为我需要为表单中的每个字段获取模型实例，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:59:53.803

它返回未定义的原因是因为除非您实际上为 $scope.login.login 或 $scope.login.pass 指定了某些内容，否则它们不会被设置。如果您放置一个空格并删除它，您会看到它们被设置为空白。您要做的是在控制器的开头定义范围上的登录，如下所示：

```
function LoginCtrl($scope, $http) {
    $scope.login = {
        login: "",
        pass: ""
    };
    $scope.doLogin = function() {
        var req = { "login": $scope.login.login, "pass": $scope.login.pass };
        $http({ method: "POST", url: "/login", data: req }).success(function (resp) {
            if(resp.status != "ok") {
                angular.forEach(resp, function (value, key) {
                    // ex: model['login'].$setValidity('bad_login', false);
                    $scope.login[key].$setValidity(value, false);
                });
            }
        });
    };
} 
```

# html - CSS / Safari：具有浮动和百分比宽度的 Div 框不是 100% 对齐

> ID：14038362
> 
> 赞同：3
> 
> 时间：2012-12-26T09:15:03.863
> 
> 标签：html, css

当您在 Safari 中调整窗口宽度时，右侧的最后一个 div 框不是 100% 对齐的，而是在最后一个`div`框和窗口边框之间有 1-3px 的空间。

看看 Safari 并尝试调整宽度：http: [//jsfiddle.net/LPXfe/2/](http://jsfiddle.net/LPXfe/2/)

知道如何修复空间吗？

```
.html,
body {
  width: 100%;
  height: 100%;
}

.outside {
  width: 100%;
  min-height: 500px;
  position: relative;
  display: inline-block;
}

.inside {
  width: 25%;
  height: 299px;
  position: relative;
  float: left;
  background-color: #dcdcdc;
}
```

```
<div class="outside">
  <div class="inside"></div>
  <div class="inside"></div>
  <div class="inside"></div>
  <div class="inside"></div>
  <div class="inside"></div>
</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:58:47.397

这显然是 safari 浏览器中的一个问题（主要是在 iOS 中）。

我重新设计了你的 CSS 来解决这个问题。这不是最理想的，但是当浏览器无法正确呈现事物时，我们必须进行调整。

我删除了 .outside 和 .inside 框上的位置关系，并将overflow-x:hidden 添加到html、body 标记中。这可以防止水平滚动。然后我将 .outside 的宽度设为 101%。这会推出盒子以隐藏有问题的像素。

```
html, body {
    margin:0;
    width:100%;
    overflow-x:hidden;
}

.outside {
    width:100.5%;
    height: 500px;
    overflow:hidden;
    background: #009900;
}
.inside {
    width:25%;
    height: 299px;
    float: left;
    background-color: #990000;
} 
```

这是一个带有更新样式的[jsFiddle 。](http://jsfiddle.net/LPXfe/6/)我使示例代码的背景颜色更加对比鲜明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-02T07:12:11.930

这可能是 iOS 重新调整小字体的趋势的副作用。

我在使用浮动标签时遇到问题：对；最终通过[这种方法](https://stackoverflow.com/questions/3226001/some-font-sizes-rendered-larger-on-safari-iphone)解决。

# html - 我的元素是否有可能高于 iframe 但低于 iframe 的内容之一？

> ID：14038367
> 
> 赞同：0
> 
> 时间：2012-12-26T09:15:25.893
> 
> 标签：html, css

我有一个带有全屏 iframe 的页面，并且 iframe 顶部有几个按钮，iframe 的 z-index 是 10，所以我将按钮的 z-index 设置为 20 以防止它被覆盖通过 iframe。它工作正常。

但是，当用户单击 iframe 中的某些内容时，iframe 中将出现一个弹出窗口，该窗口将被我的按钮覆盖...我尝试在 Chrome devtools 中设置弹出窗口的 z-index，但它没有不工作.......

谢谢。

# c# - MySQL .Net/Connector 6.5.4/6.6.4 的批处理更新非常慢

> ID：14038369
> 
> 赞同：1
> 
> 时间：2012-12-26T09:15:36.307
> 
> 标签：c#, mysql

我正在使用带有 .net 连接器 6.5.4 的 MySQL5.6.9-rc 将数据插入到具有两个字段（整数 ID、整数数据、ID 是主键）的表中。将 2000 行插入表中非常慢（大约 35 秒）（UpdateBatchSize = 1 和 UpdateBatchSize = 500 没有太大区别），我也尝试了连接器 6.6.4，问题仍然存在。

但是，使用 MySQL5.4.3 和连接器 6.20 速度很快，如果将 UpdateBatchSize 设置为 500，则只需一秒钟即可将 2000 行插入表中（如果 UpdateBatchSize = 1，它也很慢）。然后我用 MySQL5.4.3 和连接器 6.5.4 或 6.6.4 测试它，它很慢！

我编写了插入数据的代码，如下所示，使用 mysql6.6.9 和连接器 6.54、Windows XP 和 VS2008 运行它。

```
 public void Test()
    {
        MySqlConnection conn = new MySqlConnection("Database=myDatabase;Server=localhost;User Id=root;Password=myPassword");

        string sql = "Select * from myTable";
        MySqlDataAdapter adapter = new MySqlDataAdapter(sql, conn);

        adapter.UpdateBatchSize = 500; 

        MySqlCommandBuilder commandBuilder = new MySqlCommandBuilder(adapter);

        DataTable table = new DataTable();
        adapter.Fill(table); //it is an empty table
        Add2000RowsToTable(table);

        int count = adapter.Update(table); //It took 35 seconds to complete.
        adapter.Dispose();
        conn.Close();
    }

    private void Add2000RowsToTable(DataTable table)
    {
        DataRow row;
        for (int i = 0; i < 2000; i++)
        {
            row = table.NewRow();
            row[0] = i;
            row[1] = i;

            table.Rows.Add(row);
        }
    } 
```

在我看来，MySqlDataAdapter.UpdateBatchSize 不适用于连接器 6.5.4 和 6.64，我的代码有问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:21:56.627

虽然这需要一些初始编码（并且不能直接解决您的问题），但我强烈建议对超过 100 条记录的任何内容 使用[LOAD DATA INFILE 。](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

*事实上，在我自己的系统中，我已经对其进行了一次编码，并且我将它重用于我的所有插入和更新，无论是否批量。*

`LOAD DATA INFILE`更具可扩展性：我用它插入了 1 亿行，而没有明显的性能下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T03:55:58.653

做了更多的测试...

检查 mysql 服务器中的日志，对于连接器 6.20，它会生成用于批量更新的 sql 语句，如下所示：

插入 mytable (id, data) 值 (0,0),(1,1),(2,2) ...

但对于连接器 6.54 和 6.64，语句不同：

插入 mytable (id, data) 值 (0,0); 插入mytable(id,data)值(1,1);插入mytable(id,data)值(2,2); ...

我认为这就是连接器 6.5.4/6.6.4 的批处理更新如此缓慢的原因，这是 6.5.4/6.6.4 的错误吗？还是服务器（尝试过 mysql 5.5.29/5.6.9）应该更聪明地处理语句？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T05:55:58.573

我采用的解决方案是将批量行数据作为 CSV 写入文件，然后使用以下命令导入：

```
LOAD DATA LOCAL INFILE  'C:/path/to/file.csv'
INTO TABLE <tablename>
FIELDS TERMINATED BY ',' 
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
(<field1>,<field2>); 
```

30000 行只用了大约 4 秒。它类似于上面的建议，但允许您使用系统本地的文件而不是服务器。

# asp.net - ViewState 对于 Web 应用程序中的多个用户是否安全

> ID：14038372
> 
> 赞同：2
> 
> 时间：2012-12-26T09:15:47.850
> 
> 标签：asp.net, viewstate

在我的 ASP.Net 应用程序中，我使用 viewstate 来存储网格的数据，我使用公共类来创建 viewstate 对象，如下所示。

```
public static PageViewState CurrentViewState
    {
        get
        {
            if (_app == null)
            {
                Initialize();
            }
            return _app;
        }
    }

    /// <summary>
   /// Creates new object for singleton class
    /// </summary>
    private static void Initialize()
    {
        PageViewState _viewstate = new PageViewState();
        _app = _viewstate;

    }

    /// <summary>
    /// Returns viewstate for specified page name
    /// </summary>
    /// <param name="_page">string : Name of the page</param>
    /// <returns></returns>
    public object this[string _page]
    {
        get
        {
            if (ViewState[_page] != null)
                return ViewState[_page];
            else
                return null;
        }
        set
        {
            ViewState[_page] = value;
        }
    } 
```

我使用的是静态属性，当多个用户在 aspx.cs 中访问它时是否安全。

```
Datatable _dtable = (Datatable)PageViewState.CurrentViewState["MyPage"]; 
```

ViewState 以隐藏字段的形式将数据存储在客户端，因此对于每个用户来说它应该是唯一的，我对此是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:24:27.917

ViewState 将数据存储在客户端，这是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:28:07.897

是的，因为它在客户端存储数据，即用户正在他的机器上查看的页面。

因此，您将看到同一页面的不同版本（在视图状态数据的意义上），而我将看到不同的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:34:11.677

ViewState 是表示控件状态的加密字符串，它处于页面级别。

这是为每个具有隐藏输入字段的页面呈现的。

```
 <input type="hidden" id="__ViewState" value="uxudhk.." /> 
```

不同用户请求的每个页面将在页面中具有不同的隐藏字段。所以这总是安全的。如果您的 ViewState 被修改或更改，您将收到像 InValid ViewState 这样的服务器端错误。

# rest - 保护从 Ajax 和移动应用程序以及第 3 方开发人员使用的 REST API

> ID：14038374
> 
> 赞同：0
> 
> 时间：2012-12-26T09:15:49.527
> 
> 标签：rest, asp.net-web-api, security

我正在编写一个 REST API（使用 ASP.NET WebApi），它将由我的单页 Web 应用程序通过客户端 JavaScript 调用任何人都可以安装的移动应用程序使用，最终我希望它被口渴方开发人员使用编写自己的应用程序。

我已经研究了 HMAC 以保护 API，但不确定如何将私钥安全地传递给客户端（即浏览器客户端，在移动应用程序上？

我试图让它只有我的应用程序、第 3 方开发应用程序和我的客户端 JavaScript 可以访问 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:25:12.360

在您的用例中，我将使用两种不同的身份验证机制。对于在浏览器中运行的 SPA，我将使用表单身份验证对用户进行身份验证，并且当浏览器使用 AJAX 调用 Web API 时，我将依靠 ASP.NET 来验证存储在 cookie 中的凭据。对于第三方或移动应用程序，我会使用 HMAC 身份验证。您可以像 Windows Azure 或 AWS 等许多云提供商那样在带外交换该密钥。我为您可以使用的 Web API 创建了 HMAC 的实现。它在这里可用， [https://github.com/pcibraro/hawknet](https://github.com/pcibraro/hawknet)

当用户使用用户名和密码进行身份验证时，您还可以在第一次调用时使用 SSL 交换密钥，但这取决于您。

问候巴勃罗

# asp.net-mvc - 在 mvc 3 中确定上一页

> ID：14038375
> 
> 赞同：0
> 
> 时间：2012-12-26T09:15:54.170
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

如何在 mvc 3 应用程序中检查上一页。

```
<a href="#">Previous Page.</a> 
```

单击上面的链接后，我必须返回上一页。

这个怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:20:15.130

这将取决于您网站上的导航组织方式。一种可能性是使用`history.go(-1)`javascript 函数，该函数将简单地模拟浏览器的后退按钮：

```
<a href="#" onclick="history.go(-1)">Previous Page.</a> 
```

另一种可能性是让调用页面将 ReturnUrl 查询字符串参数传递给该页面，该参数可用于构造链接：

```
<a href="@Request["ReturnUrl"]">Previous Page.</a> 
```

当然，这假设当您调用呈现此视图的控制器操作时，您已经传递了 ReturnUrl 查询字符串参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:36:06.117

与马修的答案相同，但使用会话变量。这样您就可以在所需的操作中选择性地更新它。例如，在 POST 操作中，您不希望他们返回到带有表单值的视图。你真正想要的是让他们回到之前的页面。

```
public ActionResult MyNextPage(string prevUrl)
{
    Session["prevUrl "] = prevUrl;
    View();
} 
```

然后在视图中：

```
<a href="@Session["assigned_section_id"].ToString()">Previous Page</a> 
```

请注意，如果会话已过期或为空，它将引发异常。

# c# - 在 GridView 中的 UserControl 项目上放置项目不会触发 Drop 事件（包括示例项目）

> ID：14038379
> 
> 赞同：1
> 
> 时间：2012-12-26T09:16:16.283
> 
> 标签：c#, xaml, gridview, drag-and-drop

我希望能够从 ListView 中拖动一个项目，并将其放到代表 UserControls 列表的 GridView 上。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <ListView 
            ItemsSource="{Binding}"
            VerticalAlignment="Stretch" HorizontalAlignment="Left" 
            CanReorderItems="False" CanDragItems="True"
            DragItemsStarting="DragItemsStarting">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid Width="280">
                        <TextBlock Text="{Binding}" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Viewbox Grid.Column="1" Margin="0,20,0,0">
            <GridView x:Name="BoardGrid"
                       Width="600" Height="600">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapGrid MaximumRowsOrColumns="10"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemTemplate>
                    <DataTemplate x:Name="GameBoardCellWithPieceDataTemplate">
                        <Grid Background="Green" Width="50" Height="50">
                        </Grid>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
        </Viewbox>
    </Grid> 
```

在我创建 GridItems 背后的代码中，设置 AllowDrop 属性并将事件处理程序分配给 Drop 事件。

```
public MainPage()
        {
            this.InitializeComponent();

            Loaded += MainPage_Loaded;

            this.DataContext = new List<string> { "Drag String 1", "Drag String 2" };
        }

        public void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            for (var row = 0; row < 5; row++)
            {
                for (var column = 0; column < 5; column++)
                {
                    var myUserControl = new MyUserControl { AllowDrop = true };
                    myUserControl.Drop += PieceDropped;

                    BoardGrid.Items.Add(myUserControl);
                }
            }
        }

        private void DragItemsStarting(object sender, DragItemsStartingEventArgs e)
        {
            var dragItem = (string)e.Items.FirstOrDefault();

            if (dragItem == null)
                return;

            e.Data.Properties.Add("dragItem", dragItem);
        }

        private void PieceDropped(object sender, DragEventArgs e)
        {
            object sourceItem;
            e.Data.Properties.TryGetValue("dragItem", out sourceItem);
            if (sourceItem == null)
                return;
            [...]
        } 
```

拖动行为很好，但是当我将 ListView 的一个项目放到 GridView(Item) 上时，不会触发 Drop 事件。

当我在 GridView 本身上设置 AllowDrop 时，会触发 Drop 事件。或者，当我将 UserControl 包装在 GridViewItem 中并在 GridViewItem 上设置 AllowDrop 时，也会触发 Drop 事件，但之后我使用的 DataTemplateSelecdtor 出现问题。

有什么线索吗？

我创建了一个示例项目（[http://sdrv.ms/V2OpfE](http://sdrv.ms/V2OpfE)）来演示问题

# objective-c - 没有出现关于缺少 @required 协议方法的编译警告

> ID：14038381
> 
> 赞同：9
> 
> 时间：2012-12-26T09:16:37.813
> 
> 标签：objective-c, ios, xcode, compiler-construction

今天早上我在修改 XCode 4.5.2 并且想要制作一个表格视图，我自然地在我的视图控制器定义中添加了`UITableViewDataSource`和协议。`UITableViewDelegate`

```
#import <UIKit/UIKit.h>

@interface MyViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@end

#import "MyViewController.h"

@implementation MyViewController

@end 
```

现在我知道在这个阶段我需要实现协议的`@required`方法，`UITableViewDataSource`但是出于（可能是 TDD）习惯，我决定首先执行构建，期望编译器会抛出有关未实现的 @required 方法的警告（向我表明实施哪些）。

但是没有编译器的任何错误或警告就完成了构建，这让我感到困惑和担忧。

所以我意识到这个问题通常是相反的，即“为什么我收到这个警告”，而不是“为什么我没有收到这个警告”，但这个非常简单的问题真的让我感到困惑。显然我做错了什么，但我不知道是什么。任何想法这怎么可能？

仅供参考，这是一个新项目，在新 Mac Book 上全新安装 XCode 4.5.2 时没有构建/项目设置自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:45:16.840

在 XCode 4.5.x 中有一个选项可以设置不同的警告来显示（YES/NO）。您可以在 LLVM 4.1 编译器的构建设置编译器警告下检查它。

我希望它能解决你的问题。

# c# - EditorFor IEnumerable 带有模板名称

> ID：14038392
> 
> 赞同：21
> 
> 时间：2012-12-26T09:17:54.523
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, razor

假设我有一个简单的模型来解释目的：

```
public class Category
{
    ...
    public IEnumerable<Product> Products { get; set; }
} 
```

看法：

```
@model Category
...
<ul>
    @Html.EditorFor(m => m.Products)
</ul> 
```

编辑器模板：

```
@model Product
...
<li>
    @Html.EditorFor(m => m.Name)
</li> 
```

请注意，我不必为 定义 EditorTemplate `IEnumerable<Product>`，我只能为`Product`模型创建它，并且 MVC 框架足够聪明，可以为 IEnumerable 使用它自己的模板。它遍历我的收藏并调用我的 EditorTemplate。

输出 html 将是这样的

```
...
<li>
    <input id="Products_i_Name" name="Products[i].Name" type="text" value="SomeName">
</li> 
```

毕竟我可以发布到我的控制器。

但是，当我使用模板名称定义 EditorTemplate 时，为什么 MVC 不这样做呢？

```
@Html.EditorFor(m => m.Products, "ProductTemplate") 
```

在这种情况下，我必须将属性的类型更改为`IList<Product>`，自己遍历集合并调用 EditorTemplate

```
@for (int i = 0; i < Model.Products.Count; i++)
{
    @Html.EditorFor(m => m.Products[i], "ProductTemplate")
} 
```

这对我来说似乎是一种肮脏的解决方法。是否有其他更清洁的解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-24T06:56:28.730

在那里，现在我只欠达林 9999 瓶啤酒。

```
 public static MvcHtmlString EditorForMany<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, IEnumerable<TValue>>> expression, string templateName = null) where TModel : class
    {
        StringBuilder sb = new StringBuilder();

        // Get the items from ViewData
        var items = expression.Compile()(html.ViewData.Model);
        var fieldName = ExpressionHelper.GetExpressionText(expression);
        var htmlFieldPrefix = html.ViewContext.ViewData.TemplateInfo.HtmlFieldPrefix;
        var fullHtmlFieldPrefix = String.IsNullOrEmpty(htmlFieldPrefix) ? fieldName : String.Format("{0}.{1}", htmlFieldPrefix, fieldName);
        int index = 0;

        foreach (TValue item in items)
        {
            // Much gratitude to Matt Hidinger for getting the singleItemExpression.
            // Current html.DisplayFor() throws exception if the expression is anything that isn't a "MemberAccessExpression"
            // So we have to trick it and place the item into a dummy wrapper and access the item through a Property
            var dummy = new { Item = item };

            // Get the actual item by accessing the "Item" property from our dummy class
            var memberExpression = Expression.MakeMemberAccess(Expression.Constant(dummy), dummy.GetType().GetProperty("Item"));

            // Create a lambda expression passing the MemberExpression to access the "Item" property and the expression params
            var singleItemExpression = Expression.Lambda<Func<TModel, TValue>>(memberExpression,
                                                                               expression.Parameters);

            // Now when the form collection is submitted, the default model binder will be able to bind it exactly as it was.
            var itemFieldName = String.Format("{0}[{1}]", fullHtmlFieldPrefix, index++);
            string singleItemHtml = html.EditorFor(singleItemExpression, templateName, itemFieldName).ToString();
            sb.AppendFormat(singleItemHtml);
        }

        return new MvcHtmlString(sb.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-26T09:27:39.357

> 是否有其他更清洁的解决方案可以做到这一点？

简单的答案是否定的，它很糟糕，我完全同意你的看法，但这就是框架的设计者决定实现这个特性的方式。

所以我所做的就是遵守约定。由于我为每个视图和局部视图都有特定的视图模型，因此拥有一个相应的编辑器模板并不是什么大问题，它的命名方式与集合的类型相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-13T06:55:30.050

我决定编写一个库来提供一种更简洁的方法来解决这个问题。使用它，您可以为列表的每个部分指定单独的模板，它适用于显示和编辑：

```
@Html.DisplayListFor(x => x.Books,
    itemTemplate: "BookViewModel",
    itemContainerTemplate: "ContainerForMyItem"
    listTemplate:  "MyList"
    listContainerTemplate: "ContainerForMyList") 
```

请注意，自定义是可选的，您可以简单地编写

```
@Html.DisplayListFor(x => x.Books) 
```

或者

```
@Html.ListEditorFor(x => x.Books) 
```

它应该可以正常工作。

该库称为[动态视图模型列表](https://dynamic-vml.github.io/)，可在 NuGet 上使用。

# asp.net-mvc - 从视图将大对象传递给控制器 上的操作

> ID：14038396
> 
> 赞同：1
> 
> 时间：2012-12-26T09:18:12.450
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我想将一个大对象从视图传递给控制器​​的操作。像这样：

**看法**

```
<div>@Html.ActionLink("Send us an email", "Index", 
"Email", new { o = @Model.Exception }, null)</div> 
```

**控制器**

```
public class EmailController : Controller
    {
        [AllowAnonymous]
        public ActionResult Index(object o)
        {
            new BaseServices.Emailer().SendEmail(o);

            return View();
        }

    } 
```

问题是：传递的对象太大了，我猜 MVC 无法从中提出论点并将其添加到路由表/字典中。所以，我的电子邮件控制器的索引操作永远不会被调用。代码在两者之间的某个地方爆炸了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:36:57.670

不，你不能这样做。ASP.NET MVC 并不是什么*神奇*的东西。它依赖于标准的 HTTP 和 HTML。正如您在使用 GET 请求时在 HTTP 中所知道的那样，没有*.NET 对象*的概念。您不能询问*如何*在 Web 应用程序中传递对象，因为它没有定义。

有一个查询字符串参数的概念。这就是您可以传递的 => 简单查询字符串参数：

```
@Html.ActionLink(
    "Send us an email", 
    "Index", 
    "Email", 
    new { id = Model.Exception.Id, text = Model.Exception.Text }, 
    null
) 
```

神奇之处在于 ASP.NET MVC 现在将使用 2 个简单的查询字符串参数（id 和 text）将它们映射到控制器操作中视图模型的相应属性。

但当然，要使其正常工作，ASP.NET MVC 需要知道模型的类型。你不能只使用`object`，因为这种类型没有也`id`没有`text`属性。

所以：

```
public ActionResult Index(MyViewModel o) 
```

现在但是发送复杂类型呢？好吧，您必须问自己的问题是，为什么首先将这种类型传递给视图？是因为 tfhe 用户应该编辑它的一些属性吗？是这样的话，您应该使用包含允许用户编辑它们的输入字段的 HTML 表单。

但是既然你已经把这个物体固定在一个锚上，那有什么意义呢？服务器可以从最初获取该对象的任何位置获取该对象。因此，您只需将一个简单的 id 传递给服务器：

```
@Html.ActionLink(
    "Send us an email", 
    "Index", 
    "Email", 
    new { id = Model.Exception.Id }, 
    null
) 
```

并让控制器操作将此 id 作为参数：

```
public ActionResult Index(int id) 
```

好吧，现在您知道 id => 因此您可以从持久存在该实体的任何位置检索相应的实体。

现在有些人可能会建议您在渲染视图之前将对象存储到会话中，然后从会话中检索该对象。就我个人而言，我不是会话的忠实拥护者，因为它将状态引入应用程序。这意味着如果不先调用第一个操作，您永远不能调用第二个操作。这也意味着您不能将第二个操作添加到浏览器收藏夹中。这也意味着，如果您在网络农场中运行应用程序，则不能再将会话存储在内存中 => 您将不得不为此会话使用进程外存储。会议太麻烦了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T01:14:03.923

你不能真正在视图中传递它。

相反，请考虑将异常存储在呈现视图的控制器中的 TempData 中......

```
public ActionResult DisplayErrorAndOptionToEmailIt()
{

    TempData["LastError"] = m.Exception;
    return View();
} 
```

然后当请求进来时，从临时数据中检索它并通过电子邮件发送它

```
public ActionResult SendTheEmail()
{
    var e = TempData["LastError"] as Exception;
    if (e != null)
    {
        EmailHelper.SendExceptionEmail(e);
    }
    return View();
} 
```

附带说明一下，存储完整对象不是最佳做法。如果可能，请仅存储您需要的内容：

```
public ActionResult DisplayErrorAndOptionToEmailIt()
{

    TempData["LastError"] = m.Exception.Message;
    return View();
} 
```

# asp.net - 带有提交和取消按钮的 ASP.NET 表单

> ID：14038402
> 
> 赞同：-5
> 
> 时间：2012-12-26T09:18:52.617
> 
> 标签：asp.net

我创建了一个表单客栈 ASP.NET。代码如下所示

```
<form id="AddSchool" method="post" runat="server">
<span class="failureNotification">
    <asp:Literal ID="ErrorMessage" runat="server" ></asp:Literal>
</span>
<asp:ValidationSummary ID="AddSchoolValidationSummary" runat="server" CssClass="failureNotification" ValidationGroup="AddSchoolValidationGroup"/>
<asp:Label ID="SchoolNameLabel" runat="server" Text="School Name " AssociatedControlID="SchoolName"></asp:Label>
<asp:TextBox ID="SchoolName" runat="server" Height="16px" Width="337px" CssClass="textEntry"></asp:TextBox>
<asp:Label ID="Label15" runat="server" Font-Size="Larger" ForeColor="Red" Text="*"></asp:Label>
<asp:RequiredFieldValidator ID="SchoolNameRequired" ControlToValidate="SchoolName" CssClass="failureNotification"  runat="server" ErrorMessage="School Name is Required" ToolTip="School Name is Required"
    ValidationGroup="AddSchoolValidationGroup"></asp:RequiredFieldValidator>

<asp:Label ID="StreetAddressLabel" runat="server" Text="Street Address " AssociatedControlID="StreetAddress"></asp:Label>
<asp:TextBox ID="StreetAddress" runat="server" Height="16px" Width="338px" CssClass="textEntry"></asp:TextBox>
<asp:Label ID="Label16" runat="server" Font-Size="Larger" ForeColor="Red" Text="*"></asp:Label>
<asp:RequiredFieldValidator ID="StreetAddressRequired" ControlToValidate="StreetAddress" CssClass="failureNotification" runat="server"
     ErrorMessage="Street Address is Required" ToolTip="Street Address is Required" ValidationGroup="AddSchoolValidationGroup"></asp:RequiredFieldValidator>

<asp:Label ID="CityLabel" runat="server" Text="City " AssociatedControlID="City" ></asp:Label>
<asp:TextBox ID="City" runat="server" Height="16px" Width="340px" style="margin-left: 0px" CssClass="textEntry"></asp:TextBox>
<asp:RequiredFieldValidator ID="CityRequired"  runat="server" ControlToValidate="City" CssClass="failureNotification"
     ErrorMessage="City is Required" ToolTip="City is Required" ValidationGroup="AddSchoolValidationGroup"></asp:RequiredFieldValidator>

<asp:Label ID="StateLabel" runat="server" Text="State " AssociatedControlID="StateList"></asp:Label>
<asp:DropDownList ID="StateList" runat="server" Height="25px" Width="119px" DataSourceID="SqlDataSource1" DataTextField="StateName" DataValueField="StateName" CssClass="textEntry">
 <asp:ListItem>Select A State</asp:ListItem>
</asp:DropDownList>
<asp:Label ID="Label17" runat="server" Font-Size="Larger" ForeColor="Red" Text="*"></asp:Label>
<asp:RequiredFieldValidator ID="StateRequired" runat="server" Display="Dynamic" ControlToValidate="StateList" CssClass="failureNotification"
     ErrorMessage="A State is Required" ToolTip="A State is Required" ValidationGroup="AddSchoolValidationGroup"></asp:RequiredFieldValidator>

<asp:Label ID="ZipLabel" runat="server" Text="Zip Code :" AssociatedControlID="ZipCode"></asp:Label>
<asp:TextBox ID="ZipCode" runat="server" Width="139px" CssClass="textEntry"></asp:TextBox>
<asp:RequiredFieldValidator ID="ZipCodeRequired" runat="server" ControlToValidate="ZipCode" CssClass="failureNotification"
     ErrorMessage="Zip Code is Required" ToolTip="Zip Code is Required" ValidationGroup="AddSchoolValidationGroup"></asp:RequiredFieldValidator>

<asp:Label ID="EmailLabel" runat="server" Text="Email Address" AssociatedControlID="Email"></asp:Label>:
<asp:TextBox ID="Email" runat="server" Width="304px" Height="16px" CssClass="textEntry"></asp:TextBox>
<asp:RequiredFieldValidator ID="EmailRequired" runat="server" ControlToValidate="Email" CssClass="failureNotification" 
    ErrorMessage="E-mail is required." ToolTip="E-mail is required."  ValidationGroup="AddSchoolValidationGroup">*</asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="EmailFormat" runat="server"  ControlToValidate="Email" CssClass="failureNotification" 
    ErrorMessage="The email address entered does not appear to be valid." ValidationGroup="AddSchoolValidationGroup" 
     ValidationExpression="([A-Z]|[a-z]|[0-9])+[@]([A-Z]|[a-z]|[0-9])+\.([A-Z]|[a-z]){2,6}" Display="Dynamic">*</asp:RegularExpressionValidator>

 <asp:Label ID="ConfirmEmailLabel" runat="server" Text="Confirm Email Address " AssociatedControlID="ConfirmEmail"></asp:Label>:
<asp:TextBox ID="ConfirmEmail" runat="server" Height="18px" Width="304px" CssClass="textEntry"></asp:TextBox>
<asp:RequiredFieldValidator ID="ConfirmEmailRequired" runat="server" ControlToValidate="ConfirmEmail" CssClass="failureNotification"
     ErrorMessage="Confirm E-mail is required." ToolTip="Confirm E-mail is required." 
     ValidationGroup="AddschoolValidationGroup">*</asp:RequiredFieldValidator>
<asp:CompareValidator ID="EmailCompare" runat="server" ControlToCompare="Email" ControlToValidate="ConfirmEmail" 
      CssClass="failureNotification" Display="Dynamic" ErrorMessage="E-mail and Confirm E-mail must match."
       ValidationGroup="AddSchoolValidationGroup">*</asp:CompareValidator>
<asp:Label ID="Label14" runat="server" ForeColor="Red" Text="* = Required"></asp:Label>

<asp:ImageButton ID="Cancel" runat="server" OnClick="cancelClick" ImageUrl="~/Styles/images/cancel-btn.png" />
<asp:ImageButton ID="Submit" runat="server" OnClick="submitClick" ImageUrl="~/Styles/images/submit-btn.png" />
</form> 
```

此表单包含一些字段，如学校名称、街道地址、城市、电子邮件、符合电子邮件等。以及 Asp.net 验证控件和两个图像按钮，一个名为取消，另一个名为提交。当我点击提交时我想使用该验证控件验证表单并引发一个事件“submitclick”。当我单击取消时，我想引发一个事件 cancelclick。任何人都可以解释当我单击提交“图像按钮”时如何验证表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:52:09.200

添加：`ValidationGroup`_`ImageButton ID="Submit"`

```
<asp:ImageButton
       ID="Submit"
       runat="server"
       OnClick="submitClick"
       ImageUrl="~/Styles/images/submit-btn.png"
       ValidationGroup="AddSchoolValidationGroup" CausesValidation="true"

/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:16:30.703

在你的按钮中设置 CausesValidation="True" 会让你到达那里。

# apache-flex - 使 Flex Plot Chart 项目切换以显示/隐藏项目的标签

> ID：14038408
> 
> 赞同：0
> 
> 时间：2012-12-26T09:19:28.640
> 
> 标签：apache-flex, charts, toggle, labels

我制作了一个应用程序，用于根据先前计算的数据 (X,Y) 生成绘图图表。在图表上绘制数据后，我尝试使项目（点）在用户单击点时显示标签（通过 addChild 外部自定义标签组件）（例如：如果用户单击图表项目，相应的 ID 号将显示在点旁边）。

尽管一切正常，但我无法切换项目（例如：如果一个点已被单击并且标签 ID 可见，则在下一次单击同一个点时，我想隐藏（removeChild）对应于那个的标签组件item)...附上我到目前为止所做的一个简单示例代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="417" height="468" backgroundGradientAlphas="[1.0, 1.0]" backgroundGradientColors="[#FFFFFF, #FFFFFF]">
    <mx:Script><![CDATA[
    import mx.charts.events.ChartItemEvent;
    import mx.charts.HitData;
     import mx.collections.ArrayCollection;

     [Bindable]
     public var ARR:ArrayCollection = new ArrayCollection([
        {ID:1, Y:2000, X:1500},
        {ID:2, Y:1000, X:200},
        {ID:3, Y:1500, X:500},
        {ID:4, Y:500, X:300},
        {ID:5, Y:1000, X:450},
        {ID:6, Y:2000, X:500}
     ]);

     private function labels_plot1(plot:String, dotIndex:int, labelID:String):void {
            var ID_lab:ID_label = new ID_label();
            if(this[plot].series[0] == ID_lab.parent){
                this[plot].series[0].removeChild(ID_lab);
            }else{
                this[plot].series[0].addChild(ID_lab);
                ID_lab.x = this[plot].series[0].getChildAt(dotIndex).x + 8;
                ID_lab.y = this[plot].series[0].getChildAt(dotIndex).y + 1.2;
                ID_lab.ID_txt.htmlText = "<B>" + labelID  + "</B>";
            }
     }

     private function dotClickEvent(event:ChartItemEvent):void{
        labels_plot1(event.currentTarget.id, event.hitData.chartItem.index, event.hitData.item.ID);
     }

  ]]></mx:Script>
     <mx:PlotChart id="myChart" dataProvider="{ARR}" itemClick="dotClickEvent(event)">
        <mx:series>
           <mx:PlotSeries id="pl"
                xField="X"
                yField="Y"
                displayName="Plot 1"
            />
        </mx:series>
        <mx:annotationElements>
            <mx:CartesianDataCanvas id="canvas" includeInRanges="true"/>
        </mx:annotationElements>
     </mx:PlotChart>
</mx:WindowedApplication> 
```

我几乎尝试了一切，但没有成功......如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:32:25.353

您的函数中的第一次检查不可能是真的，这就是为什么没有删除孩子。首先，在您知道是否需要新标签之前，您不应该创建新标签。

在您的情况下，我将使用组件的属性名称将 dotIndex 保存在那里。dotIndex 是唯一的，因此您可以随时使用函数 getChildByName(dotIndex.toString()) 检查标签是否存在。

我也更喜欢将新标签直接添加到单独的容器中，或者在我们的例子中添加到应用程序本身中。这是您可以尝试做的事情：

```
 private function labels_plot1(plot:String, dotIndex:int, labelID:String):void {

            var dispObj:DisplayObject = this.getChildByName(dotIndex.toString());

            if (dispObj != null)
            {
                this.removeChild(dispObj);
            }
            else
            {
                var ID_lab:Label = new Label();

                ID_lab.x = this[plot].series[0].getChildAt(dotIndex).x + 8 + 60;
                ID_lab.y = this[plot].series[0].getChildAt(dotIndex).y + 1.2 + 4;

                ID_lab.text = labelID;
                ID_lab.name = dotIndex.toString();
                this.addChild(ID_lab);
            }
        } 
```

我没有你的组件 ID_Label，所以我这里用的是普通的 Label。

# java - SQL 查询以生成给定日期范围内的员工缺勤报告

> ID：14038413
> 
> 赞同：0
> 
> 时间：2012-12-26T09:20:26.910
> 
> 标签：java, mysql, sql

我有两个表 Master(empname,empid) 由所有员工组成，另一个表 Transaction(empid,Presentdate) 给出日期和哪个员工在场。
如何查找特定日期范围内的缺勤人员名单

我试过下面的 Sql 查询

```
SELECT empid FROM Master 
where empid NOT IN(select empid  from  Transaction 
where Date(Presentdate) between '2012-11-21' and '2012-12-22') 
```

它只返回缺勤的员工ID，我还想显示员工的缺勤日期

注意（事务表只存储员工的当前日期）

**如果员工缺席，则不会将整条记录插入到事务表中**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:36:42.133

没有对此进行测试，但这可能有效：

```
SELECT m.empid,d.Presentdate

FROM Master as m,
(select distinct Presentdate from transaction
where Date(Presentdate) between '2012-11-21' and '2012-12-22') as d 

where m.empid not in (select empid  from  Transaction 
where Presentdate=d.Presentdate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:51:10.900

这应该有效，未经测试

```
SELECT m.empid     AS `Empid` 
     , d.dt        AS `AbsentDate`
  FROM ( SELECT DATE(t.Presentdate) AS dt
           FROM transaction t
          WHERE t.Presentdate >= '2012-11-21' 
            AND t.Presentdate < DATE_ADD( '2012-12-22' ,INTERVAL 1 DAY)
          GROUP BY DATE(t.Presentdate)
          ORDER BY DATE(t.Presentdate)
       ) d
 CROSS
  JOIN master m
  LEFT
  JOIN  transaction p
    ON p.Presentdate >= d.dt
   AND p.Presentdate <  d.dt + INTERVAL 1 DAY
   AND p.empid = m.empid
 WHERE p.empid IS NULL
 ORDER
    BY m.empid
     , d.dt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:06:18.193

// 我想你的查询会喜欢这样来获取员工姓名、身份证和他/她在场的日期。

```
select empid,empname,date  from  Transaction LEFT JOIN Master ON empid 
where Date(Presentdate) between '2012-11-21' and '2012-12-22' 
```

// 出于循环目的创建了一个数组。您还将拥有 emp id 和 name

```
$array = array('2012-01-01','2012-01-02','2012-01-03','2012-01-05'); 
$date = new DateTime('2012-01-01'); // take first as start date
$startDate = $array[0]; 
$endDate = $array[count($array)-1];
$loop = 'yes';

while($loop == 'yes') {
    $date->add(new DateInterval('P1D'));    //add one day to start date
    if(!in_array($date->format('Y-m-d'),$array))
        $absentDate = $date->format('Y-m-d');
    if($date->format('Y-m-d') == $endDate)
        $loop = 'no';
}
print_r($absentDate); 
```

# haskell - haskell 如何解决重叠实例？

> ID：14038414
> 
> 赞同：16
> 
> 时间：2012-12-26T09:20:27.923
> 
> 标签：haskell, functional-dependencies, type-level-computation

如果我使用了错误的术语，请原谅，我是haskell 类型操作的初学者......我正在尝试使用具有功能依赖关系的重叠实例来使用HLists 进行一些类型级编程。

在这里，我的目标是尝试编写一个 typeclass `HNoNils l l'`，这`HNoNils l l'`意味着，`l`作为一个列表类型（例如：）`Int : String : EmptyNil : Int : HNil`，`l'`是没有特定空类型的相应列表类型`EmptyNil`（示例的结果：）`Int:String:Int:HNil`：

```
{-# LANGUAGE ExistentialQuantification,
  FunctionalDependencies,
  FlexibleInstances,
  UndecidableInstances,
  OverlappingInstances,
  TypeFamilies #-}

import Data.HList 
import Data.TypeLevel.Bool

--Type Equality operators
--usedto check if a type is equal to another
class TtEq a b eq | a b -> eq
instance     TtEq a a True
instance eq~False => TtEq a b eq 

data EmptyNil = EmptyNil deriving (Show) --class representing empty channel
--class intended to generate a list type with no type of EmptyNil
-- Example: HCons Int $ HCons EmptyNil HNil should give HCons Int HNil
class (HList list, HList out) => HNoNils list out | list -> out 
    where  hNoNils :: list -> out 

-- l gives l' means (HCons EmptyNil l) gives l'
instance (HNoNils l l',TtEq e EmptyNil True ) => HNoNils (HCons e l) l'
    where hNoNils (HCons e l) = hNoNils l

-- l gives l' means (HCons e l) gives (HCons e l') for all e 
instance (HNoNils l l') => HNoNils (HCons e l) (HCons e l')
    where hNoNils (HCons e l) = hCons e $ hNoNils l

--base case
instance  HNoNils HNil HNil
    where hNoNils _ = hNil

testList  = HCons EmptyNil $ HCons EmptyNil HNil
testList1 = HCons "Hello"  $ HCons EmptyNil HNil 
testList2 = HCons EmptyNil $ HCons "World"  HNil
testList3 = HCons "Hello"  $ HCons "World"  HNil

main:: IO ()
main = do
    print $ hNoNils testList  -- should get HNil
    print $ hNoNils testList1 -- should get HCons "Hello" HNil
    print $ hNoNils testList2 -- should get HCons "World" HNil
    print $ hNoNils testList3 -- should get HCons "Hello" (HCons "World" HNil) 
```

但是，当我按原样运行此代码时，我的所有`hNoNils`调用似乎都通过最不具体的第二个实例声明来解决，这意味着（至少看起来），对于所有人`l`来说，我都有`HNoNils l l`.

根据我所阅读的内容，使用`OverlappingInstances`扩展名，系统应该始终解析为最具体的实例。

这里

*   第一个实例有约束`(HNoNils l l',TtEq e EmptyNil True )`

*   第二个实例有约束`HNoNils l l'`

如果我错了，请原谅我，但似乎第一个实例比第二个更具体，所以应该针对那个，对吧？

我尝试添加约束以尝试消除重叠，即通过将单独的相反等式约束添加到第二个实例：

```
-- l gives l' means (HCons EmptyNil l) gives l'
instance (HNoNils l l',TtEq e EmptyNil True ) => HNoNils (HCons e l) l'
    where hNoNils (HCons e l) = hNoNils l

-- l gives l' means (HCons e l) gives (HCons e l') for all e 
-- added constraint of TtEq e EmptyNil False
instance (HNoNils l l',TtEq e EmptyNil False) => HNoNils (HCons e l) (HCons e l')
    where hNoNils (HCons e l) = hCons e $ hNoNils l 
```

我尝试在此处删除重叠的实例扩展名，但出现重叠错误。

```
Overlapping instances for HNoNils
                                (HCons EmptyNil (HCons [Char] HNil)) (HCons EmptyNil l')
Matching instances:
      instance (HNoNils l l', TtEq e EmptyNil True) =>
               HNoNils (HCons e l) l'
        -- Defined at /home/raphael/Dropbox/IST/AFRP/arrow.hs:32:10
      instance (HNoNils l l', TtEq e EmptyNil False) =>
               HNoNils (HCons e l) (HCons e l')
        -- Defined at /home/raphael/Dropbox/IST/AFRP/arrow.hs:36:10 
```

我不明白第二场比赛。毕竟，在这个决议中，我们有 e 等于 EmptyNil，所以`TtEq e EmptyNil True`......对吧？就此而言，类型系统甚至如何达到它提出这个问题的情况，毕竟在约束下你永远不应该遇到这种情况`HNoNils (Hcons EmptyNil l) (HCons EmptyNil l'))`，至少我不这么认为。

重新添加 OverlappingInstances 时，我会遇到更奇怪的错误，我不明白：

```
 Couldn't match type `True' with `False'
    When using functional dependencies to combine
      TtEq a a True,
        arising from the dependency `a b -> eq'
        in the instance declaration at /home/raphael/Dropbox/IST/AFRP/arrow.hs:23:14
      TtEq EmptyNil EmptyNil False,
        arising from a use of `hNoNils'
        at /home/raphael/Dropbox/IST/AFRP/arrow.hs:53:13-19
    In the second argument of `($)', namely `hNoNils testList2'
    In a stmt of a 'do' block: print $ hNoNils testList2 
```

第二个语句，`TtEq EmptyNil EmptyNil False`似乎是说一个实例是由函数调用生成的......？我有点困惑它是从哪里来的。

所以在试图解决这个问题时，我想知道：

*   是否可以获得有关 Haskell 如何处理实例的更多详细信息？其中一些组合似乎是不可能的。即使只是解释该机制的文档的链接，也将不胜感激

*   `OverlappingInstances`对如何工作有更具体的定义吗？我觉得我错过了一些东西（比如“特异性”参数可能只适用于类型变量，而不适用于约束的数量......）

**编辑**：所以我尝试了 CA McCann 的建议之一（删除一些约束）到以下内容：

```
instance (HNoNils l l') => HNoNils (HCons EmptyNil l) l'

instance (HNoNils l l') => HNoNils (HCons e l) (HCons e l')

instance  HNoNils HNil HNil 
```

这样做会给我一些令人讨厌的重叠实例错误：

```
Overlapping instances for HNoNils
                                (HCons EmptyNil (HCons [Char] HNil)) (HCons EmptyNil l')
      arising from a use of `hNoNils'
    Matching instances:
      instance [overlap ok] HNoNils l l' => HNoNils (HCons EmptyNil l) l'
        -- Defined at /Users/raphael/Dropbox/IST/AFRP/arrow.hs:33:10
      instance [overlap ok] HNoNils l l' =>
                            HNoNils (HCons e l) (HCons e l')
        -- Defined at /Users/raphael/Dropbox/IST/AFRP/arrow.hs:37:10 
```

我觉得解决方法好像是自上而下而不是自下而上（系统永远不会尝试找到这样的实例）。

**编辑 2**：通过在第二个条件中添加一个小约束，我得到了预期的行为（参见 McCann 对他的回答的评论）：

```
-- l gives l' means (HCons EmptyNil l) gives l'
instance (HNoNils l l') => HNoNils (HCons EmptyNil l) l'
    where hNoNils (HCons EmptyNil l) = hNoNils l

-- l gives l' means (HCons e l) gives (HCons e l') for all e 
instance (HNoNils l l',r~ HCons e l' ) => HNoNils (HCons e l) r
    where hNoNils (HCons e l) = hCons e $ hNoNils l 
```

这里添加的东西是`r~HCons e l'`对第二个实例的约束。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T14:44:23.567

> 是否可以获得有关 Haskell 如何处理实例的更多详细信息？其中一些组合似乎是不可能的。即使只是解释该机制的文档的链接，也将不胜感激

*Haskell*如何处理实例非常简单。您正在处理 GHC 提供的多种实验性语言扩展，因此主要信息来源是[GHC 用户指南](http://www.haskell.org/ghc/docs/latest/html/users_guide/index.html)。

> OverlappingInstances 的工作方式是否有更具体的定义？我觉得我错过了一些东西（比如“特异性”参数可能只适用于类型变量，而不适用于约束的数量......）

你的猜测是正确的。从[用户指南部分解释`OverlappingInstances`](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-class-extensions.html#instance-overlap)：

> 当 GHC 尝试解析约束`C Int Bool`时，它会尝试通过实例化实例声明的头部来匹配每个实例声明与约束。例如，考虑以下声明：
> 
> ```
> instance context1 => C Int a     where ...  -- (A)
> instance context2 => C a   Bool  where ...  -- (B)
> instance context3 => C Int [a]   where ...  -- (C)
> instance context4 => C Int [Int] where ...  -- (D) 
> ```
> 
> 实例 (A) 和 (B) 匹配约束`C Int Bool`，但 (C) 和 (D) 不匹配。匹配时，GHC 不考虑实例声明（`context1`等）的上下文。

将其视为类似于模式与守卫的东西：

```
instanceOfC Int a | context1 Int a = ...
instanceOfC a Bool | context2 a Bool = ... 
```

因为类型类是“开放的”，所以没有像函数那样定义明确的匹配顺序，这就是为什么对匹配相同参数的“模式”有限制的原因。[我在之前的回答](https://stackoverflow.com/a/12630426/157360)中进一步阐述了与模式和守卫的类比。

如果我们通过上面的类比将您的实例转换为伪函数，结果是这样的：

```
hNoNils (e:l) | e == EmptyNil = hNoNils l
hNoNils (e:l) = e : hNoNils l
hNoNils [] = [] 
```

知道在选择“模式”时会忽略“守卫”，很明显前两种模式无法区分。

* * *

但我希望你想知道如何让事情发挥作用，而不仅仅是为什么他们目前不这样做。（注意——我现在手头没有 GHC，所以这一切都来自记忆，没有经过测试。我可能弄错了一些细节。）

有几种方法可以处理这种事情。最通用的可能是一个两步过程，首先在泛型实例的上下文中使用类型函数，然后推迟到接受额外参数的辅助类的特定实例：

```
class FooConstraint a b r | a b -> r  -- some sort of type predicate

-- the "actual" type function we want
class (FooConstraint a b result, FooAux a b result c) => Foo a b c | a b -> c

-- a single maximally generic instance
instance (FooConstraint a b result, FooAux a b result c) => Foo a b c 

-- this class receives the original a and b as arguments, but also the 
-- output of the predicate FooConstraint
class FooAux a b result c | a b result -> c

-- which lets us indirectly choose instances based on a constraint
instance ( ... ) => FooAux a b True c 
-- more instances, &c. 
```

如您所见，这是一个巨大的麻烦，但有时这就是您所拥有的一切。

幸运的是，您的情况要容易得多。回想一下上面对伪函数的翻译——你真的会那样写那个函数吗？当然不是，因为这样会更清楚：

```
hNoNils (EmptyNil:l) = hNoNils l
hNoNils (e:l) = e : hNoNils l
hNoNils [] = [] 
```

由于`EmptyNil`是构造函数，您可以对其进行模式匹配，从而简化代码并避免多余的`Eq`约束。

这同样适用于类型级别的等价物：将类型相等谓词替换为`EmptyNil`在实例头中简单地使用：

```
instance (HNoNils l l') => HNoNils (HCons EmptyNil l) l'

instance (HNoNils l l') => HNoNils (HCons e l) (HCons e l')

instance  HNoNils HNil HNil 
```

这个版本在一种情况下仍然会失败，这真的没有好办法。如果类型列表包含可能与 -- 合并的类型变量，`EmptyNil`请记住此时忽略约束，并且 GHC 必须考虑以后添加的任意实例`EmptyNil`-- 前两个实例不可避免地是模棱两可的。

通过确保可以区分所有相关案例，可以部分避免最后一类歧义问题。例如`EmptyNil`，您可以使用类型构造函数，而不是删除类似的类型：

```
data Some a
data None 
```

然后编写一个类型级别的版本`catMaybes`：

```
class CatOptions l l'
instance (CatOptions l l') => CatOptions (HCons None l) l'
instance (CatOptions l l') => CatOptions (HCons (Some e) l) (HCons e l')
instance CatOptions HNil HNil 
```

这将歧义问题限制在真正歧义的情况，而不是列表包含例如表示任意`Num`实例的多态类型的情况。

# macos - NSTableCellView 和 NSArrayController - Mac OSX

> ID：14038426
> 
> 赞同：1
> 
> 时间：2012-12-26T09:21:22.813
> 
> 标签：macos, nstableview, nsarraycontroller, nstablecellview

是否可以将 NSArraycontroller 与 NSTableView 绑定，其单元格不是文本单元格而是 nstablecellview？我是可可编程的新手，尝试对此进行搜索，但对此没有适当的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:47:37.347

是的，这是可能的。您可以将 NSTableView 设置为基于视图。不是绑定到列，而是使用 objectValue.propertyName 将单元格 UI 元素（例如 NSTextField）绑定到“表格单元格视图”

参考：http: [//developer.apple.com/library/mac/#documentation/cocoa/Conceptual/TableView/PopulatingViewTablesWithBindings/PopulatingView-TablesWithBindings.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/TableView/PopulatingViewTablesWithBindings/PopulatingView-TablesWithBindings.html)

[http://www.raywenderlich.com/21752/how-to-use-cocoa-bindings-and-core-data-in-a-mac-app](http://www.raywenderlich.com/21752/how-to-use-cocoa-bindings-and-core-data-in-a-mac-app)

# c# - 在表单之间传递值

> ID：14038428
> 
> 赞同：0
> 
> 时间：2012-12-26T09:21:34.907
> 
> 标签：c#, winforms, session, data-transfer

如您所知，我们在 WinForm 中没有会话。我的项目中有几种形式（客户、服务、操作员……），我从操作员那里获取一些值（操作员姓名、操作员姓氏和头像地址）。我想将这些值存储在运行时的某个地方，并且每当我需要它时，我可以从存储它的位置获取它。

是否有捷径可寻 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:27:31.200

我认为这些是长期 Web 开发人员的话。我听到你了，我的朋友。我去过那儿...

Web 编程的 Session 对象只是解决在无状态环境中保存状态问题的一种变通方法。另一方面，winforms 编程没有这个问题。您的应用程序具有所有保留其状态信息的对象。

至于将信息从一种形式传递到另一种形式：

1.  您可以在接收表单构造函数上定义参数以传递参数。然后在接收表单中定义局部变量来保存对这些对象的引用。
2.  您可以在接收表单上设置单独的方法来发送参数并从发送者表单调用它。
3.  您可以在发件人表单（或其他地方）上公开信息，并在需要时从接收表单中获取。

哪个最好？完全取决于您的业务案例和应用程序逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:32:01.297

我相信最简单的方法是创建一个`class`可以从包含您想要的数据的表单中访问的

**例子**

```
// Class1.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace myNameSpace
{
    class Class1
    {
        public static string Name = "";
        public static string LastName = "";
        public static string ProfilePictureaddress = "";
    }
} 
```

使用它，每当您想存储或检索数据时，您都可以使用`myNameSpace.Class1`. 例如，如果您想存储到 中`Name`，您可以使用`myNameSpace.Class1.Name = "value";`. 这将设置`Name`为`value`。

谢谢，
节日快乐！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:15:01.783

您也可以像这样使用项目属性：

> //写
> 
> Properties.Setting.Default["key"] = value;
> 
> Properties.Setting.Default.Save();
> 
> //读
> 
> value = Properties.Setting.Default["key"];

# asp.net - 如何在 asp.net mvc 3 或 4 中设置和获取隐藏字段

> ID：14038432
> 
> 赞同：0
> 
> 时间：2012-12-26T09:21:58.630
> 
> 标签：asp.net, asp.net-mvc-4

我正在使用 ASP.NET.NVC MVC 4。

如何为 asp.net mvc 3 或 4 中的隐藏字段设置值？

在剃刀视图中我写过：

```
 @Html.Hidden("HProjectTypeId", Model.ProductTypeId); 
```

但在控制器中，我得到的是空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:24:24.787

如果您提交表单的控制器操作带有一个`HProjectTypeId`参数，那么这个参数将从隐藏字段中传递一个正确的值：

```
[HttpPost]
public ActionResult SomeAction(int hProjectTypeId)
{
    // hProjectTypeId will contain the value of the hidden field here

    ...
} 
```

这也适用于模型。假设您有以下模型：

```
public class MyViewModel
{
    public int HProjectTypeId { get; set; }

    ...
} 
```

以及将此视图模型作为参数的控制器操作：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    // model.HProjectTypeId will contain the value of the hidden field here
    ...
} 
```

您将能够读取 POST 到服务器的隐藏字段的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T08:22:16.607

要设置隐藏文件的值，你可以试试这个

```
<input id="hmsgs-to-ids" type="hidden" value="@(Model != null ? Model.ToIds : "")" /> 
```

作为值给模型属性

# java - 如何通过 DialogFragment 使用 startActivityForResult()？

> ID：14038436
> 
> 赞同：9
> 
> 时间：2012-12-26T09:22:20.310
> 
> 标签：java, android, android-dialog

我的应用程序需要添加用户名才能正常运行。mainActivity 在顶部显示它从数据库中检索的用户名。mainActivity 也有一个按钮，通过 startActivityForResult() 方法导致“addusername”活动；当用户实际输入用户名时，只有主活动上的用户名会被刷新和显示。“addusername”活动上有一个提交按钮，它添加用户名，`setResult(RESULT_OK);`
如果通过单击“addusername”按钮输入用户名，一切正常。

现在，我在 mainActivity 中添加了一个对话框，仅当数据库中不存在用户名时才会在应用程序启动时显示该对话框。对话框提供了添加用户名的选项，如果单击该选项，将导致“添加用户名”活动。但是在按下“提交”按钮后，mainActivity 确实被调用了，但用户名没有被刷新（虽然，数据库确实被更新了）

这是“addusername”活动的代码：

```
public void submitusername(View view) {

    userdatabase name = new userdatabase(this);
    name.open();
    String user = name.getusername();
    name.close();

    EditText cinone = (EditText) findViewById(R.id.username);
    username = cinone.getText().toString();

    if(user.equals("")) {

        userdatabase entry = new userdatabase(Editprofile.this);
        entry.open();
        entry.createEntry(username, null, null, null);
        entry.close();

        Context context = getApplicationContext();
        CharSequence text = "Added new user!";
        int duration = Toast.LENGTH_LONG;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

    }

    else {

        userdatabase update = new userdatabase(Editprofile.this);
        update.open();
        update.updateUsername(username);
        update.close();

        Context context = getApplicationContext();
        CharSequence text = "Username updated!";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

    }

    setResult(RESULT_OK);       
    finish();

} 
```

这是对话框的代码：

```
public class NouserFragment extends DialogFragment {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    // Use the Builder class for convenient dialog construction

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage(R.string.nouseralert)
           .setPositiveButton(R.string.add, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {

                   Intent intent = new Intent(getActivity().getBaseContext(), Editprofile.class);    
                   startActivity(intent);    

               }
           })
           .setNegativeButton(R.string.ignore, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   // User cancelled the dialog
               }
           });
    // Create the AlertDialog object and return it
    return builder.create();
}
} 
```

我知道这是因为 Dialog 没有调用 startActivityForResult() 方法。但即使我改变我的代码，像这样：

```
Intent intent = new Intent(getActivity().getBaseContext(), Editprofile.class);    
                   startActivityForResult(intent, 0); 
```

它仍然没有帮助。可能是因为 onActivityResult() 方法不在调用 startActivityForResult() 的同一个类中，但我不知道如何获得。

编辑1：尝试使用

```
Intent intent = new Intent(getActivity(), Editprofile.class);
startActivityForResult(intent, 0); 
```

没用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T09:43:56.110

您是否尝试过这种方式：

```
Intent intent = new Intent(getActivity(), Editprofile.class);
startActivityForResult(intent, 0); 
```

当您创建 Intent 对象时，您使用 BaseContext，而不是使用对活动本身的引用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T11:24:29.443

使用

```
Intent intent = new Intent(getActivity(), Editprofile.class);
getActivity().startActivityForResult(intent, 0); 
```

工作！

# java - 如何使用android在拨号屏幕上按下数字

> ID：14038437
> 
> 赞同：1
> 
> 时间：2012-12-26T09:22:26.590
> 
> 标签：java, android, eclipse

我是 android 新手 .. 一旦用户按下一些数字序列并且在他按下呼叫按钮之前，我正在尝试获取拨号屏幕中按下的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:51:45.483

您可以使用 onKeyDown 方法

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode ==KeyEvent.KEYCODE_0){

        // note this if called
    }else if(keyCode ==KeyEvent.KEYCODE_1){
    // note this if called  
    }else if(keyCode ==KeyEvent.KEYCODE_2){
    // note this if called  
    }else if(keyCode ==KeyEvent.KEYCODE_3){
    // note this if called  
    }elseif(keyCode ==KeyEvent.KEYCODE_4){
    // note this if called  
    }else....
        .....
    return super.onKeyDown(keyCode, event);
} 
```

# .htaccess - 我希望从 example.com 向 mydomain.example/domains 发出请求的用户重定向到 mydomain.com/userdomain

> ID：14038447
> 
> 赞同：-2
> 
> 时间：2012-12-26T09:23:00.393
> 
> 标签：.htaccess, redirect, request, httprequest, vanity-url

我希望从`example.com`to发出请求的用户`mydomain.example/domains`重定向到`mydomain.example/userdomain`. 这就像根据用户的域名实现虚 URL。我知道，我们可以使用`.htaccess`重定向规则来做到这一点，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:37:57.837

我已经尽我所能编辑了以下代码，但没有办法对其进行测试。如果它不起作用，它应该让你接近。

```
RewriteCond %{HTTP_HOST} ^www.(.*)$ [NC]
RewriteRule ^/(.*) http://%1/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(.*)$ [NC]
RewriteRule ^/(.*) mydomain.example/%1/$1 [L] 
```

应该做的伎俩。虽然我自己无法快速测试它。有两点需要注意：您必须在 RewriteCond 中使用 HTTP_HOST 来测试域。在 RewriteRule 行中使用 %1 从括号中的 HTTP_HOST 行获取变量。

您还必须首先使用 R=301 永久重定向将任何对 www 的请求重定向到非 www。可能不这样做，但我目前不确定如何提取主机的非 www 部分，无论它是否存在。R=301 将重定向消息发送回浏览器，供任何访问`www.example.com`. 然后浏览器将命中`example.com`，您的第二个`RewriteRule`将与之匹配。由于其 301（永久），浏览器将缓存重定向并始终自行为用户执行非 www。

如果这不起作用，请与其他一些关于 URL 重定向的教程进行比较，并参考这个精彩的页面： [http ://httpd.apache.org/docs/2.2/rewrite/intro.html](http://httpd.apache.org/docs/2.2/rewrite/intro.html)

# android - ActionBarSharlok 在不同分辨率下的行为不同

> ID：14038448
> 
> 赞同：-1
> 
> 时间：2012-12-26T09:23:01.910
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在开发一个应用程序，并且我使用 ActionBarSharlok 能够在早期 SDK 版本中支持 Action Bar

我使用 android:uiOptions="splitActionBarWhenNarrow" 在屏幕底部设置操作栏。

它在小型三星设备上的版本 8 上运行良好 ![在此处输入图像描述](../Images/bb53e2d8395d959c1dec9f94c938e76a.png)

当我在版本 15 的平板设备上测试应用程序时出现了问题。

![在此处输入图像描述](../Images/2228180ba004504ae6d7f2c6107e9800.png)

现在我面临一个问题，我需要应用程序在所有设备上看起来都一样。并在屏幕底部

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:30:05.300

我不建议在较大的设备上使用拆分 ActionBar，因为拆分 ActionBar 是为小屏幕设计的。但是，如果您确实需要，请在您的`values-w480dp`文件夹中覆盖这些布尔值：

```
<bool name="abs__split_action_bar_is_narrow">true</bool> // for ActionBarSherlock
<bool name="split_action_bar_is_narrow">true</bool> // for the default ActionBar 
```

# android - 使用原生 android API 截屏

> ID：14038454
> 
> 赞同：1
> 
> 时间：2012-12-26T09:23:29.510
> 
> 标签：android, api, screenshot, native

> **可能重复：**
> [如何以编程方式拍摄屏幕快照？](https://stackoverflow.com/questions/5973974/how-to-take-snapshot-of-screen-programmatically)

作为构建我的新应用程序的一部分，我希望允许用户使用我的应用程序中的按钮截取设备的屏幕截图。但是，我需要使用本机 API 在没有设备生根的情况下完成此操作。

我试图寻找参考资料和 android 开发者网站，但找不到执行上述操作的本机 API 功能。

您能否确认确实可以执行上述操作（以编程方式截屏）？您能否也将我引导到可以看到 API 的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:31:29.830

试试这个代码：

```
public class ScreenShotActivity extends Activity {

    Bitmap bmScreen;
    RelativeLayout mLayout;
    Dialog screenDialog;
    static final int ID_SCREENDIALOG = 1;

    ImageView bmImage;
    Button btnScreenDialog_OK;
    // TextView TextOut;

    View screen;
    EditText EditTextIn;

    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        screen = (View) findViewById(R.id.screen);
        Button btnCaptureScreen = (Button) findViewById(R.id.capturescreen);

        btnCaptureScreen.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                screen.setDrawingCacheEnabled(true);
                bmScreen = screen.getDrawingCache();
                saveImage(bmScreen);
                // showDialog(ID_SCREENDIALOG);
            }
        });
    }

    protected void saveImage(Bitmap bmScreen2) {
        // TODO Auto-generated method stub

        // String fname = "Upload.png";
        File saved_image_file = new File(
                Environment.getExternalStorageDirectory()
                        + "/captured_Bitmap.png");
        if (saved_image_file.exists())
            saved_image_file.delete();
        try {
            FileOutputStream out = new FileOutputStream(saved_image_file);
            bmScreen2.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

也添加权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

用于此的 XML 将是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/screen"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/capturescreen"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Capture Screen" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="@drawable/roundcorner"
        android:scaleType="fitXY"
        android:src="@drawable/android_awesome" />

</RelativeLayout> 
```

# c# - 使用 C# 动态获取所有 .SVC 文件名

> ID：14038455
> 
> 赞同：1
> 
> 时间：2012-12-26T09:23:35.770
> 
> 标签：c#, wcf, configuration-files

我正在使用 C# 处理 WCF，需要在配置文件中配置所有 WCF 服务列表。而不是在加载项目时动态添加手动想要它。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:26:49.747

要枚举具有给定模式的所有文件，您可以尝试以下代码：

```
Directory.EnumerateFiles("~", "*.svc", SearchOption.AllDirectories)
                 .Select(Path.GetFileName)
                 .ToList(); 
```

# c - 使用 Newton-Raphson 方法的 C 中的平方根

> ID：14038456
> 
> 赞同：1
> 
> 时间：2012-12-26T09:23:36.733
> 
> 标签：c, square-root

在下面的代码中，我想将终止条件替换为：如果猜测平方和 x 的比率接近 1，则 while 循环应该终止。我尝试了各种表达式，但没有一个能正确运行代码。有什么建议吗？

```
# include<stdio.h>
float absolute(float x)
{
     if (x < 0)
         x = -x;
     return x;
}

float square(float x)
{
    float guess = 1;

    while(absolute(guess*guess - x) >= 0.0001 )
        guess = ((x/guess) + guess) / 2;

    return guess;
}

int main(void)
{
    printf("square root of 2 is %f\n", square(2));
    printf("square root of 3 is %f\n", square(3));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:38:16.543

找到答案：while 语句应该是这样的：

```
 while  ( absoluteValue((guess * guess) / x  - 1.0) >= 0.0001 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-22T05:29:30.757

```
# include<stdio.h>

double sq_root(double x)
{
    double rt = 1, ort = 0;
    while(ort!=rt)
    {
        ort = rt;
        rt = ((x/rt) + rt) / 2;
    }
    return rt;
}

int main(void)
{
    int i;
    for(i = 2; i<1001; i++) printf("square root of %d is %f\n",i, sq_root(i));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:28:04.960

> 如果猜测平方和 x 的比值接近 1

那你为什么要减？使用比率运算符：

```
while(absolute( (guess*guess) / x - 1) >= 0.0001 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-22T10:29:38.883

您可能无法达到猜测*猜测足够接近 x；想象一下，例如 2e38 的 sqrt - 每个近似值都不会比 ~1e31 更近，并且您的退出条件永远不会成功。

适用于所有情况的变体是，当猜测停止改变时，会发生这种方法的停止。所以你会写类似

```
prev_guess = 0; // any initial value is ok
while (guess != prev_guess) {
    ...
    prev_guess = guess;
} 
```

至少它适用于任何未达到溢出或下溢的 IEEE754 兼容实现。

您也可以比较guess 和 prev_guess 的差异（只要目标通常是匹配足够的根精度，而不是平方的值）。

# python - Python：从字典列表中制作字典的最快方法

> ID：14038462
> 
> 赞同：0
> 
> 时间：2012-12-26T09:24:10.913
> 
> 标签：python, django, django-queryset

带有注释的查询集给了我这样的结果列表：

```
[{'completed__sum': 1, 'offer__count': 2, 'offer': 1}, {'completed__sum': 0, 'offer__count': 1, 'offer': 2}] 
```

我想得到这样的东西：

```
{1:{'completed__sum': 1, 'offer__count': 2},2:{'completed__sum': 0, 'offer__count': 1}} 
```

其中键`1`和`2`是`'offer': X`字段的值。

将查询结果转换为所需形式的最快方法是什么？或者有没有办法以这种格式接收查询集的结果？

* * *

这是我的查询集：

```
Progress.objects.filter(user=self.request.user).values('offer').annotate(Count('offer')).annotate(Sum('completed')) 
```

我的模型：

```
class Progress(models.Model):  
    user = models.ForeignKey(to=User)  
    offer = models.ForeignKey(to=Offer)  
    completed = models.BooleanField(default=False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:28:02.837

适用于 python 2.6 +

使用带有枚举的[dict构造函数。](http://docs.python.org/2/library/stdtypes.html#dict)

```
list_of_dicts = [
    {'completed__sum': 1, 'offer__count': 2, 'offer': 1},
    {'completed__sum': 0, 'offer__count': 1, 'offer': 2}]

dictionary = dict((d['offer'], dict((k, v) for k, v in d.items() if k != 'offer')) for d in list_of_dicts)

print dictionary
>>> 
{1: {'completed__sum': 1, 'offer__count': 2}, 2: {'completed__sum': 0, 'offer__count': 1}} 
```

**编辑：**刚刚找到了一个更好的方法来做到这一点。如果您不再使用该列表并且只保留最终结果。

```
dictionary = dict((d.pop('offer'), d) for d in list_of_dicts) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:27:15.347

```
>>> {x['offer']: dict(y for y in x.iteritems() if y[0] != 'offer') for x in [{'completed__sum': 1, 'offer__count': 2, 'offer': 1}, {'completed__sum': 0, 'offer__count': 1, 'offer': 2}]}
{1: {'completed__sum': 1, 'offer__count': 2}, 2: {'completed__sum': 0, 'offer__count': 1}} 
```

# javascript - 在不同页面上关闭对话框 javascript

> ID：14038473
> 
> 赞同：-1
> 
> 时间：2012-12-26T09:25:02.830
> 
> 标签：javascript, dialog, jquery-ui-dialog

在对话框中提交数据后，我可以关闭对话框javascript吗（对话框中的表单加载到不同的页面上），。对不起，我的英语不好，这是剧本。

```
$(document).ready(function () {
        $('a#href').live('click', function (e) {
            e.preventDefault();
            var page = $(this).attr("href")
            var pagetitle = $(this).attr("title")
            var $dialog = $('<div></div>')
            //var $dialog = $(window.parent.document.getElementById('modal')) 
            .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"></iframe>')
            //.html(page)
            .dialog({
                autoOpen: false,
                modal: true,
                height: 550,
                width: 700,
                title: pagetitle

                    });
                $dialog.dialog('open');

                });

 }); 
```

html：

```
<a id="href" title="Form Upload Dokumen BAUK / BAUF" href="upload_bauk_r2b.php?project_id=<?php echo $project_id; ?>"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:32:05.117

如果 iFrame 来自同一个域，我假设因为您只使用文件名而不是整个域来引用`upload_bauk_r2b.php`，那么应该可以从父文档（当前脚本所在的位置）访问 iFrame。

因此，您可以以编程方式（使用 Javascript）在 iFrame 中生成一个“关闭”按钮，然后将模式弹出窗口的销毁绑定到该关闭按钮。当谈到 jQuery 时，我不是专家，但我想你会绑定事件，就像你在那个 -Link 上绑定“点击”事件一样。

另一个提示：为什么还要使用 iFrame？难道您不能通过 AJAX 动态加载该模式弹出窗口的内容吗？

# java - 从内存考虑来看，在代码中使用硬编码的整数值是一种不好的做法

> ID：14038475
> 
> 赞同：3
> 
> 时间：2012-12-26T09:25:21.263
> 
> 标签：java, jvm

考虑以下 Java 中的简单代码：

```
void func(String test)
{
    if(str.length() > 0)
    {
       //do something
    }
} 
```

执行 str.length() > 0 是否意味着每次调用此函数时，都会分配 4 字节的内存来存储 0 整数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:19:57.027

如果您编写干净、清晰和简单的代码，JIT 将在 95% 以上的情况下对代码进行最佳优化。如果你试图让它变得更聪明，你更有可能让代码变得更糟，而不是更好。

这条规则有一些值得注意的例外，但这些往往只持续几年。例如，Java 5.0 中的锁比同步快得多，但在 Java 7 中，同步可以快得多。

在考虑性能时，您应该查看整个系统的行为，而不是单个代码行甚至单个库。不这样做可能意味着你花时间担心一些没有区别的事情，而忽略了更重要的事情。

多年来，我已经看到整个团队致力于优化系统的一部分，而他们本可以通过更改配置设置来加快整个过程。这是因为他们将他们的视野限制在他们正在编写的代码上，并且没有考虑他们如何使用他们所连接的系统。想象一下，当他们本可以通过一些微不足道的事情看到更多的加速时浪费了多年的工作，并确保这不会发生在你身上。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:29:52.210

运行此函数（包括`0`）所需的内存将是编译程序（.class / .jar/.apk）的一部分，与**函数运行的次数无关**。即使**函数是内联**的，只有代码大小**会根据函数被调用的不同位置的数量而增长**，并且在代码运行**时在运行时没有内存分配。**

同时 2 条评论

*   硬编码存在**更大**的问题。
*   除了最严格的意义上，我怀疑`length > 0`算作硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:29:40.530

此代码执行时不进行内存分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:45:46.823

从内存分配的角度来看，在上面的代码中它看起来并不严重。

> 如果（str.length（）> 0）{}

这里是比较的真正要求，因此它不会被视为硬编码值。

如果您对内存使用非常严格，那么请始终选择确切的所需数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T09:49:39.517

此代码是本地方法，因此执行后内存将自动回收。因为它是内部方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T09:50:38.560

是的，但在退出函数后立即销毁。`int`是`primitive type`。原始类型在 Java 中被认为是最快的。所以，我觉得不会花很多钱。

# facebook-opengraph - 提交动作类型以打开图表

> ID：14038477
> 
> 赞同：0
> 
> 时间：2012-12-26T09:25:26.097
> 
> 标签：facebook-opengraph, review

我想分配新的动作类型来打开图表。例如，我添加了 Read，当我提交时显示“缺少应用程序徽标和图标”。好吧，我在基本设置上有一个徽标，但是当我提交应用程序详细信息时，我收到一条消息，它正在等待审核。

审核需要多长时间？在应用程序详细信息中，我收到了以下消息：

应用中心列表状态：未列出您的应用未列出，因为它没有足够高的评级和用户参与度，无法在此时在应用中心列出......

这是点评吗？

请帮帮我，我只想添加打开图形操作！这是我的目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:40:10.043

> 我只想添加打开的图形操作！

现在忘记应用中心，您仍然可以使用打开图形操作。

如果其显示的状态为待处理，则等待它被接受。

> 审核需要多长时间？

它不固定；一般2天以上。但也可能需要一周时间。

# java - 从字符串的 Arraylist 创建高达 4mb 的大字符串：为 StringBuilder.append 提供 outofmemoryerror

> ID：14038484
> 
> 赞同：0
> 
> 时间：2012-12-26T09:26:11.370
> 
> 标签：java, string, arraylist, out-of-memory, stringbuilder

我想从`Arraylist`of创建大字符串`Strings`。

`arraylist`包含大文本文件的部分内容。

文件的原始大小最大为 5MB。

我已经使用以下方法来做到这一点。

```
private void createFilefromChunks(ArrayList<String> stringval2) {
    try {
        System.gc();
        Runtime.getRuntime().gc();

        StringBuilder completeFile = new StringBuilder(150);
        String val = null;    

        for (Iterator<String> iterator = stringval2.iterator(); iterator.hasNext(); ) {
            val = (String) iterator.next();
            completeFile.append(val);
        }
        System.out.println(completeFile.toString());
    }
    catch(OutOfMemoryError e) {
        e.printStackTrace();
    }
} 
```

上述方法适用于最大 1MB 的小文件，

但如果我的文件大小增加到 4MB，它会给我一个`OutofmemoryException`

以下是我的 Logcat 详细信息：

```
12-26 14:43:17.862: E/dalvikvm-heap(718): Out of memory on a 2100160-byte allocation.
12-26 14:43:17.862: I/dalvikvm(718): "main" prio=5 tid=1 RUNNABLE
12-26 14:43:17.862: I/dalvikvm(718):   | group="main" sCount=0 dsCount=0 obj=0x40a14568 self=0x2a00b9e0
12-26 14:43:17.862: I/dalvikvm(718):   | sysTid=718 nice=0 sched=0/0 cgrp=apps handle=1073870640
12-26 14:43:17.871: I/dalvikvm(718):   | schedstat=( 16034835833 4219745479 1751 ) utm=1509 stm=94 core=0
12-26 14:43:17.871: I/dalvikvm(718):   at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:~94)
12-26 14:43:17.871: I/dalvikvm(718):   at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
12-26 14:43:17.871: I/dalvikvm(718):   at java.lang.StringBuilder.append(StringBuilder.java:216)
12-26 14:43:17.871: I/dalvikvm(718):   at com.example.splitbychapter.MainActivity.createFilefromChunks(MainActivity.java:160)
12-26 14:43:17.871: I/dalvikvm(718):   at com.example.splitbychapter.MainActivity.readAsperChapter(MainActivity.java:120)
12-26 14:43:17.871: I/dalvikvm(718):   at com.example.splitbychapter.MainActivity.onCreate(MainActivity.java:50)
12-26 14:43:17.881: I/dalvikvm(718):   at android.app.Activity.performCreate(Activity.java:5008)
12-26 14:43:17.881: I/dalvikvm(718):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-26 14:43:17.881: I/dalvikvm(718):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-26 14:43:17.881: I/dalvikvm(718):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-26 14:43:17.881: I/dalvikvm(718):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-26 14:43:17.881: I/dalvikvm(718):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-26 14:43:17.890: I/dalvikvm(718):   at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 14:43:17.890: I/dalvikvm(718):   at android.os.Looper.loop(Looper.java:137)
12-26 14:43:17.890: I/dalvikvm(718):   at android.app.ActivityThread.main(ActivityThread.java:4745)
12-26 14:43:17.890: I/dalvikvm(718):   at java.lang.reflect.Method.invokeNative(Native Method)
12-26 14:43:17.890: I/dalvikvm(718):   at java.lang.reflect.Method.invoke(Method.java:511)
12-26 14:43:17.890: I/dalvikvm(718):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-26 14:43:17.890: I/dalvikvm(718):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-26 14:43:17.901: I/dalvikvm(718):   at dalvik.system.NativeStart.main(Native Method)
12-26 14:43:17.901: W/System.err(718): java.lang.OutOfMemoryError
12-26 14:43:17.920: W/System.err(718):  at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
12-26 14:43:17.920: W/System.err(718):  at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
12-26 14:43:17.930: W/System.err(718):  at java.lang.StringBuilder.append(StringBuilder.java:216)
12-26 14:43:17.930: W/System.err(718):  at com.example.splitbychapter.MainActivity.createFilefromChunks(MainActivity.java:160)
12-26 14:43:17.940: W/System.err(718):  at com.example.splitbychapter.MainActivity.readAsperChapter(MainActivity.java:120)
12-26 14:43:17.940: W/System.err(718):  at com.example.splitbychapter.MainActivity.onCreate(MainActivity.java:50)
12-26 14:43:17.940: W/System.err(718):  at android.app.Activity.performCreate(Activity.java:5008)
12-26 14:43:17.940: W/System.err(718):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-26 14:43:17.940: W/System.err(718):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-26 14:43:17.952: W/System.err(718):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-26 14:43:17.952: W/System.err(718):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-26 14:43:17.952: W/System.err(718):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-26 14:43:17.952: W/System.err(718):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 14:43:17.961: W/System.err(718):  at android.os.Looper.loop(Looper.java:137)
12-26 14:43:17.961: W/System.err(718):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-26 14:43:17.971: W/System.err(718):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 14:43:17.980: W/System.err(718):  at java.lang.reflect.Method.invoke(Method.java:511)
12-26 14:43:17.980: W/System.err(718):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-26 14:43:17.980: W/System.err(718):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-26 14:43:17.991: W/System.err(718):  at dalvik.system.NativeStart.main(Native Method) 
```

它也将我的堆大小增加到 13MB 并抛出`outOfMemoryError`.

`StringBuilder`它在这一行引发错误`completeFile.append(val);`

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:31:46.757

如果您知道开始时需要多大的字符串，您将能够创建更大的字符串 - 您可以创建`StringBuilder`具有所需确切容量的字符串，因此永远不需要扩展。在扩展期间，内存需求最大。所以：

```
int size = 0;
for (String value : stringval2) {
    size += value.length();
}
StringBuilder builder = new StringBuilder(size);
for (String value : stringval2) {
    builder.append(value);
}
String x = builder.toString(); 
```

现在最终转换为`String`可能仍然会导致问题 - 但如果确实如此，老实说，您将无能为力。

另请注意，Java 中的文本每个字符占用两个字节，因此如果从 5MB 大小的 ASCII 文件中读取该文本，则字符串最终需要 10MB。

你*必须*把所有这些都放在一个字符串中吗？鉴于您在移动设备上运行（从外观上看），如果可以的话，您真的应该尝试考虑使用更少内存的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:18:30.613

您真的需要附加列表的所有元素吗？你能一一处理吗？在您的示例中，您可以简单地一一打印而不是连接。

恐怕，如果您的内存太少，即使 Jon 预先计算 StringBuilder 大小的想法也可能不够 - 它可以让您在连接期间避免多达双倍的内存消耗，但您仍然需要调用 StringBuilder.toString 之后，这将分配另一个长度的连接字符串。

另一个想法（我想你正在对文件做一些事情）是使用 ByteArrayOutputStream （也 - 具有预先计算的大小 - File.length 是一个很好的猜测），他们调用它的 writeTo(OutputStream) 方法将结果写入输出流。此方法不会复制内部缓冲区。

# bluetooth - 蓝牙低功耗规范 心率配置文件与心率服务

> ID：14038486
> 
> 赞同：3
> 
> 时间：2012-12-26T09:26:14.577
> 
> 标签：bluetooth, bluetooth-lowenergy

我试图了解蓝牙 BLE 在 iOS 编程方面的工作原理。在[https://www.bluetooth.org/Technical/Specifications/adopted.htm](https://www.bluetooth.org/Technical/Specifications/adopted.htm)页面上，有两种规格，心率配置文件和心率服务。

关于心率配置文件的介绍它说

> 心率配置文件用于使数据收集设备能够从公开心率服务的心率传感器获取数据

在某些服务（例如电池电量）上，没有相应的配置文件。两者有什么区别？一个用于发送者（服务），一个用于接收者（配置文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:14:32.140

心率配置文件定义了一个应用程序配置文件，让客户端将设备检测为心率传感器。此配置文件必须至少包含 GAP 服务和心率服务以确保合规性

对于电池，电池电量的监控本身并不是一个应用程序（或者它作为应用程序不会很有用），但是指定一个电池服务来监控应用程序内的电池电量是相关的。

例如，心率传感器应具有符合心率配置文件的配置文件，因此它至少包括 GAP 服务和心率服务。它还可以包括（作为选项）电池服务，以监测心率传感器的电池电量

问候

# c#-4.0 - 如何在具有规范的页面中加载用户控件？

> ID：14038490
> 
> 赞同：0
> 
> 时间：2012-12-26T09:26:39.277
> 
> 标签：c#-4.0, asp.net-4.0, web-user-controls

我有一个用户控件，我在其中获取了两个表，现在我想将此用户控件添加到 aspx 页面。但有一个条件是我必须只显示一张表。我正在使用`LoadControl("UC page url")`加载。请帮助我做到这一点。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:21:22.180

通过在 aspx 页面中创建它的对象来加载用户控件。然后您可以通过访问用户控件的属性来检查您的条件并实现逻辑。

# c - 我如何知道与给定语言环境对应的测量单位？

> ID：14038491
> 
> 赞同：5
> 
> 时间：2012-12-26T09:26:45.540
> 
> 标签：c, localization, internationalization, locale, units-of-measurement

我想以与语言环境相关的方式显示长度，即：以当前语言环境的正确测量单位显示长度。我知道`LC_MEASUREMENT`这是我需要使用的，但是我该如何使用它呢？

GNU gettext 没有给我任何可以使用的东西`LC_MEASUREMENT`。我查看了一些天气小程序的来源，它们都要求您在首选项窗口中手动输入您的单位（开尔文、华氏或摄氏）。

在我看来，这个环境变量从来没有被任何人使用过，但是我真的很想用它来提供更好的用户体验。也许，是否有一个免费的（如自由的）数据库将语言环境名称映射到相应的测量单位？

仅供参考：我的应用程序是用 C 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:11:39.033

据我所知，C 标准和 GNU gettext 没有提供任何了解一个国家使用的测量单位的方法，没有第三方库可以完成这项工作，也没有现成的数据库（免费或专有） .

然而，根据[CIA - The World Factbook 的](https://www.cia.gov/the-world-factbook/references/weights-and-measures/)说法：

> 目前，只有三个国家——缅甸、利比里亚和美国——尚未采用国际单位制（SI，或公制）作为其官方度量衡系统。

因此，即使没有数据库或第三方库，编写自己的代码也相当容易。您只需要对三个值进行特殊处理`LC_MEASUREMENT`（或者，更好的是，三个模式，因为其中一些国家有不止一种语言）：

*   [缅甸语](http://en.wikipedia.org/wiki/Burma#Units_of_measure)（语言代码模式：）`*_MM`使用[缅甸语系统](http://en.wikipedia.org/wiki/Burmese_units_of_measurement)；
*   [利比里亚](http://en.wikipedia.org/wiki/Liberia#Measurement_system)（语言代码模式：）`*_LR`使用[英制](http://en.wikipedia.org/wiki/Imperial_units)；
*   [美国](http://en.wikipedia.org/wiki/United_States#Measurement_systems)（语言代码模式：）`*_US`使用类似于英制的[习惯系统。](http://en.wikipedia.org/wiki/United_States_customary_units)
*   所有其他国家都使用[国际单位制](http://en.wikipedia.org/wiki/International_System_of_Units)。

**更新：**所有这些国家都处于（*缓慢*）转换为公制（SI）的过程中。这可能是没有人费心编写一些库、代码片段或数据库的另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-18T21:09:31.180

这是一个老问题，但还有另一种方法。如果不是一个明确的解决方案，至少是一个很好的解决方法。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <locale.h>
    #include <langinfo.h>

    int main(void)
    {
        /* for LC_MEASUREMENT */
        const char *nonmetric="_MM _US _LR";
        char *measured;

        printf("NL_MEASUREMENT: %s\n", nl_langinfo(_NL_MEASUREMENT_MEASUREMENT));

        measured=getenv("LC_MEASUREMENT");
        printf("\nLC_MEASUREMENT: %s\n", measured);
        has_=strchr(measured, '_');
        if(has_!=NULL && strstr(nonmetric, has_) != NULL)
            printf("US Customary Units\n");
        else
            printf("Metric System\n");

        /* for LC_MONETARY, LC_NUMERIC, LC_MESSAGE, LC_CTYPE and others */
        struct lconv *lc;

        setlocale(LC_ALL, "pt_BR.UTF-8");
        lc=localeconv();
        printf("\nLC_MONETARY, Currency symbol: %s\n", lc->currency_symbol);
        printf("\nLC_NUMERIC, Decimal point: %s\n", lc->decimal_point);
        printf("\nLC_MESSAGE, YESEXPR: %s\n", nl_langinfo(YESEXPR));
        printf("\nLC_CTYPE, CODESET: %s\n", nl_langinfo(CODESET));

        return 0;
    } 
```

(*) 第二个代码块只是为了完整性。

但是该示例的第一部分提供了有关公制单位的可用信息。它并不多，但它目前是您可以使用的。

它只是标识国家代码。但是您可以针对这 3[个国家](https://www.worldatlas.com/articles/what-countries-use-the-metric-system.html)（缅甸/缅甸、美国和利比里亚）对其进行测试：

*   *_MM（my_MM 或 en_MM）
*   *_US（chr_US、HAW_US、en_US、es_US 或 lkt_US）
*   *_LR（ff_LR、kpe_LR 或 en_LR）

如果不同，您可以假设采用公制（或至少部分采用）。

* * *

在没有环境变量的情况下调用此程序以查看您的配置：

```
$ ./lc_measurement.x

NL_MEASUREMENT: UTF-8
LC_MEASUREMENT: C.UTF-8
Metric System

LC_MONETARY, Currency symbol: R$
LC_NUMERIC, Decimal point: , 
LC_MESSAGE, YESEXPR: ^[+1SsyY]
LC_CTYPE, CODESET: UTF-8

$ LC_MEASUREMENT="kpe_LR" ./lc_measurement.x

NL_MEASUREMENT: UTF-8
LC_MEASUREMENT: kpe_LR
US Customary Units

LC_MONETARY, Currency symbol: R$
LC_NUMERIC, Decimal point: , 
LC_MESSAGE, YESEXPR: ^[+1SsyY]
LC_CTYPE, CODESET: UTF-8 
```

# winforms - 为 Infragistics UltraWinToolbars ControlContainerTool 设置工具提示

> ID：14038493
> 
> 赞同：1
> 
> 时间：2012-12-26T09:26:47.923
> 
> 标签：winforms, controls, tooltip, infragistics

`ControlContainerTool`使用 Infragistics 时如何显示工具提示`UltraToolbarsManager`？我可以设置`ControlContainerTool.SharedProps.ToolTipText`属性，但不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:06:12.640

当您使用 ControlContainerTool 时，您需要在工具中使用的控件上设置工具提示，因为这就是鼠标实际所在的位置。为此，您可以使用 UltraToolTipManager 或 Microsoft ToolTip。

# php - 使用php在提交表单时恢复输入字段值

> ID：14038499
> 
> 赞同：0
> 
> 时间：2012-12-26T09:27:20.933
> 
> 标签：php

我正在处理 php 表单提交，并且我对表单进行了 php 验证。

注册页面名称为“page1.php”，在其他页面中检索字段值为“page2.php”。如果验证通过错误。单击“page3.php”中的任何链接时，它将重定向到其他页面，例如“page3.php”，它将重定向回注册页面，即“page1.php”，但我无法存储或保留用户输入的值。任何人都可以建议或指导我如何克服这个问题，

下面是我使用的代码。

Page2.php

```
$name = $_POST['txtname'];
$_SESSION['txtname'] = $name; 
```

page1.php

```
<input type='text' name="txtname" id="txtname" value="<?php echo $_SESSION['txtname']; ?>"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:35:56.947

```
your fields in first page should be like this.

<input type='text' name="txtname" id="txtname" <?php if(isset($_SESSION['txtname'])){?> value="<?php echo $_SESSION['txtname']; ?>" <?Php }?>/> 
```

如果验证失败，请在第二页中编写重定向逻辑，并在第三页中创建链接。 `session_start()`必须在`page1.php`并且`page2.php`

如果您不想在验证后或一段时间后不想要这些变量，您可以取消设置这些会话变量。

或者

您可以设计如下文本字段

```
<input type='text' name="txtname" id="txtname" <?php if($_SESSION['txtname']!=""){?> value="<?php echo $_SESSION['txtname']; ?>" <?Php }?>/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:39:38.770

这应该这样做，因为`session_start()`应该在您执行并想要访问`SESSION`数组的任何 php 文件中

```
## Top of the file
<?php session_start(); ?>

## Content
<input type='text' name="txtname" id="txtname" value="<?php echo (isset($_SESSION['txtname']) ? $_SESSION['txtname'] : ''); ?>" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:34:42.517

试试这个

```
<input type='text' name="txtname" placeholder="<?php echo $_SESSION['txtname']; ?>" id="txtname" value="<?php echo $_SESSION['txtname']; ?>"/> 
```

您是否在文件顶部添加了 session_start() ？

# javascript - 字段集中的虚线与图例重叠（CKEditor）

> ID：14038503
> 
> 赞同：1
> 
> 时间：2012-12-26T09:27:50.877
> 
> 标签：javascript, ckeditor, legend, fieldset

我正在尝试创建一个带有虚线但在 IE 8 中重叠的字段集。我对 Firefox 和 Chrome 没有任何问题。问题只出在 IE 上。我尝试了一些解决方法，但没有任何效果。如果我将线条设置为 1px 并将纯色设置为任何颜色，我没有问题。当我设置虚线边框时，问题就来了。我在 CKEditor 中的 css 是；

```
editor.addCss(
          'fieldset' +
        '{' +
            'position: relative;' +
            'margin: 10px;' +
            'border: 1px dotted #00f;' + 

        '}'
        );

editor.addCss(
         '* + fieldset legend' +
        '{' +
            'position: absolute;' +
            'top: -10px;' +
            'left: 3px;' +
            'margin-bottom: 30px\9;' + 

        '}'
        ); 
```

# ruby-on-rails - 带有局部变量的 Rails 嵌套表单

> ID：14038507
> 
> 赞同：0
> 
> 时间：2012-12-26T09:28:02.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 _cart_item.html.erb 中，我需要显示与 cart_item 关联的产品名称

这是我的表格：

```
<%= form_for(@cart) do |f| %>
    <%= f.fields_for :cart_items do |builder| %>
        <%= render "cart_item", :f => builder %>
    <% end %>
    <p>
        <%= f.submit :submit %>
    </p>
<% end %> 
```

这是_cart_item.html.erb

```
<p>
    <%= f.label :price %>
    <%= f.text_field :price %>
</p>
<p>
    <%= f.label :quantity %>
    <%= f.text_field :quantity %>
</p> 
```

我正在寻找的是这样的

```
<h3><%= cart_item.product.name %></h3>
<p>
    <%= f.label :price %>
    <%= f.text_field :price %>
</p>
<p>
    <%= f.label :quantity %>
    <%= f.text_field :quantity %>
</p> 
```

但是如何将 cart_item.product.name 传递给 fields_for/render？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:18:07.303

`f.object`包含您的购物车项目，因为`f`它是上下文中的购物车项目构建器。

这样做：

```
f.object.product.name 
```

# c++ - Boost python参数错误

> ID：14038510
> 
> 赞同：1
> 
> 时间：2012-12-26T09:28:07.443
> 
> 标签：c++, python, boost

我只是定义一个函数如下，并使用 boost.python 将其导出到 python。

我怀疑 python 中 [File* local_conf] 的相应类型是什么。

```
size_t curl_conf(const char* conf_url,FILE *local_conf)
 {
     return 0;
 }

  BOOST_PYTHON_MODULE(curl_conf)
 {
     using namespace boost::python;
       def("curl_conf",curl_conf,"get conf");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:04:12.347

作为快速谷歌搜索，我发现这篇博客文章似乎完全回答了你的问题：[http ://bfroehle.com/2011/10/file-and-boost-python/](http://bfroehle.com/2011/10/file-and-boost-python/)

您必须编写一个小包装器，因为没有直接转换。

可以在此处找到包装器的示例：[https ://gist.github.com/1265889](https://gist.github.com/1265889)

但是，另一种方法是传递一个字符串并在 c++ 端打开文件。由你决定。

# javascript - ajax函数不返回值

> ID：14038513
> 
> 赞同：-1
> 
> 时间：2012-12-26T09:28:25.243
> 
> 标签：javascript, ajax, function, return-value

为什么这个 javascript 函数只返回 'undefined' ？我希望它返回真或假。这是我的代码：

```
function Ajax() {
    var XML;
    if(window.XMLHttpRequest)
        XML=new XMLHttpRequest();
    else
        XML=new ActiveXObject("Microsoft.XMLHTTP");
    XML.onreadystatechange=function() {
        if(XML.readyState == 4 && XML.status == 200) {
                if(XML.responseText == '1') {
                        return true;
                } else {
                        return false;
                }
        }

        XML.open("POST","p.php", false);
        XML.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        XML.send("user=f");
} 
```

我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:34:52.003

似乎你的

`if(XML.readyState == 4 && XML.status == 200)`

不满意为什么它不能返回任何东西。要验证将其他返回语句与 else 放在上面的 if 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:36:04.030

很可能是因为您`p.php`的不可访问，所以`XML.status`从不包含值 200。检查 的可访问性`p.php`。

# android - 如何通过intent和bundle获取textview对android中两个不同活动的价值

> ID：14038516
> 
> 赞同：1
> 
> 时间：2012-12-26T09:28:27.707
> 
> 标签：android, android-intent, bundle

如何通过intent和bundle将textview的值获取到android中的两个不同活动请告诉我..我的代码如下：

**Activity1.java**

```
Intent intent = new Intent(Activity1.this,Activity2.class);
Bundle bundle = new Bundle();
bundle.putString("title",ed1.getText().toString());
intent.putExtras(bundle);
startActivity(intent); 
```

**Activity2.java**

```
Intent intent = new Intent(Activity1.this,Activity2.class);
Bundle bundle = this.getIntent().getExtras();
String title = bundle.getString("title");
tv = (TextView)findViewById(R.id.projectTitle);
tv.setText(title);
bundle.putString("tit",title); 
```

**Activity3.java** B

```
undle bundle = this.getIntent().getExtras();
tv = (TextView)findViewById(R.id.Projecttitle);
tv.setText(til); 
```

它在活动 1 和活动 2 中运行良好，但在活动 2 和活动 3 之间运行良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:38:57.667

您需要将数据置于意图中，以便将数据从第二个活动设置为第三个活动。如果您无法保持静止，请将代码发布到您在第二个活动中实际将数据添加到意图的位置以及您在第三个活动中获取数据的位置。

尝试这个：

```
Intent intent = new Intent(Activity2.this,Activity3.class);

intent.putExtra("title",title)
startActivity(intent); 
```

获取第三个活动中的值：

```
String title = getIntent().getStringExtra("title"); 
```

**注意：**当您的标题在第二个活动中没有更改时，您不需要像`editText.getText().toString();`putextra 方法中那样执行此步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:34:06.620

您的代码不起作用，因为您没有从 activity3.java 中的 bundle 获取字符串值，

在 activity2.java 中更新您的以下代码

```
Intent intent = new Intent(Activity1.this,Activity2.class);
intent.putExtra("title",tv.getText().toString());
startActivity(intent); 
```

`onCreate()`并在Activity3.java的方法中更新您的以下代码

```
Bundle bundle = getIntent().getExtras();
String til = bundle.getString("title");
TextView tv = (TextView)findViewById(R.id.Projecttitle);
tv.setText(til); 
```

它会解决你的问题。

# javascript - 如何将输入元素排列到列或其他方式以提高表单的可读性

> ID：14038518
> 
> 赞同：2
> 
> 时间：2012-12-26T09:28:46.210
> 
> 标签：javascript, html, css, jquery-ui

订单输入表单是从数据库中定义的字段创建的。每个字段都包含文本标题和输入元素。

输入元素是输入类型=文本、复选框或选择元素。如果也可以是 jquery ui 自动完成或右侧包含下拉按钮的日期选择器。使用 JQuery UI。

在输出中，输入元素未对齐。看起来很乱：

![凌乱的形式](../Images/88fecea5ef304f0c0f8caafeeb2edf11.png)

如何提高此布局的可读性？

如何垂直对齐输入元素的左侧，以便它们从同一列开始？如果调整浏览器窗口的大小，新列应该会自动出现或删除。

也许有一些神奇的 css 或 jquery ui 功能允许这样做？也可以使所有字段宽度相同。每个输入元素的最小宽度在数据库中定义。渲染宽度可以稍大一些。对于字幕，可以进行两遍渲染：在第一遍中找到字幕中的最大字符数并计算每个字幕的宽度。

使用的html是：

```
<form id='_form' class='form-fields'>

<div class='form-field'>
<label class='form-label' for='Klient0_nimi'><u>Customer</u></label>
<span id='span_Klient0_nimi'><input id='Klient0_nimi' name='Klient0_nimi'  style='width:100px'  class='ui-widget-content ui-corner-all' maxlength='80'  lookup='Klient' value='Brad Abrams' ></input>
<button type='button' class='form-combobutton' tabindex=-1 ></button>
</span>
</div>

<div class='form-field'>
<label class='form-label' for='Tasudok'>Number</label>
<input class='ui-widget-content ui-corner-all'  id='Tasudok' name='Tasudok' value='798'  style='width:100px'  maxlength='25' />
</div>

<div class='form-field'>
<label class='form-label' for='Kuupaev'>Date</label>
<input maxlength=10 size=10 class='ui-widget-content ui-corner-all'  id='Kuupaev' name='Kuupaev'   value='1/26/2012' />
</div>

<div class='form-field'>
<label class='form-label' for='Maksetin1_tingimus'><u >Condition</u></label>
<span><select id='Maksetin1_tingimus' name='Maksetin1_tingimus' class='ui-widget-content ui-corner-all' style='width:100px'  
 lookup='Maksetin' value='10' >

 <option value=''></option>
 <option value='10'>10 days</option>
 </select>
</span>
</div>

<div class='form-field'>
<label class='form-label' for='Eimuuda'>No change</label>
<input type='hidden' value='false' name='Eimuuda' />
<input type='checkbox' id='Eimuuda' name='Eimuuda'/>
</div>

<div class='form-field'>
<label class='form-label' for='Doksumma'>Total</label><input style='text-align:right'  id='Doksumma' name='Doksumma'  disabled='disabled' class='jqgrid-readonlycolumn' readonly='readonly' tabindex='-1'  value='0.00'  style='width:100px'  maxlength='0' />
</div>

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:35:53.907

您可以使用一些列对齐方式：第一列是标签，第二列是输入字段。

最终您可以使用 4 列：第 1 和第 3 列的标签，第 2 和第 3 的输入字段。

此外，在输入字段上使用 width:100% 。您可能需要考虑 text-align:right 标签。

旧的 html 表可以帮助你。

由于您有许多字段，您可能需要考虑将表单拆分为多个部分；喜欢使用`<fieldset>`和`<legend>`解释[here](http://www.w3schools.com/tags/tag_legend.asp)

例子：

```
<!DOCTYPE html>
<html>
<body>

<style type="text/css">
    .lbl {
        text-align: right;
        width: 100px;
        white-space: nowrap;
    }

    .fld {
        width: 100%;
    }

    .frm {
        display: inline-block;
    }

</style>
</head>

<form>
    <fieldset>
        <legend>Person</legend>

        <div class="frm">
            <table>
                <tr>
                    <td class="lbl"><label for="name">Name:</label></td>
                    <td><input class="fld" id="name" type="text"></td>
                </tr>
                <tr>
                    <td class="lbl"><label for="email">Email:</label></td>
                    <td><input class="fld" id="email" type="text"></td>
                </tr>
                <tr>
                    <td class="lbl"><label for="dob">Date of birth:</label></td>
                    <td><input class="fld" id="dob" type="text"></td>
                </tr>
            </table>
        </div>

        <div class="frm">
            <table>
                <tr>
                    <td class="lbl"><label for="addr">Address:</label></td>
                    <td><input class="fld" id="addr" type="text"></td>
                </tr>
                <tr>
                    <td class="lbl"><label for="city">City:</label></td>
                    <td><input class="fld" id="city" type="text"></td>
                </tr>
                <tr>
                    <td class="lbl"><label for="ctry">Country:</label></td>
                    <td><input class="fld" id="ctry" type="text"></td>
                </tr>
            </table>
        </div>

    </fieldset>
</form>

</body>
</html> 
```

这将是结果：

当水平空间足够时：

![在此处输入图像描述](../Images/a206469d4dce23709a3a150b29a325f1.png)

当水平空间不足时：

![在此处输入图像描述](../Images/f5bbd994d6ad892faf5f726855f2d344.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:33:32.597

您可以使用 table 而不是使用 div。制作 6 列或您需要的数量。

```
 <table>
        <tr>
            <td style="width: 20%;">
            </td>
             <td style="width: 20%;">
            </td>
             <td style="width: 20%;">
            </td>
            <td style="width: 20%;">
            </td> 
            <td style="width: 20%;">
            </td>
        </tr>
        <tr>
            <td style="width: 20%;">
            </td>
             <td style="width: 20%;">
            </td>
             <td style="width: 20%;">
            </td>
            <td style="width: 20%;">
            </td> 
            <td style="width: 20%;">
            </td>
        </tr>

    </table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:57:56.277

您正在寻找“响应式设计”解决方案。这通常使用基于网格的样式表来实现，例如这个非常简单明了的 12 列网格[http://cssgrid.net/](http://cssgrid.net/)

您还应该右对齐标签，而不是左对齐它们（即像 Luigi 的回答）

不要使用表格进行布局。表格用于表格数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T22:29:50.150

一般来说，在线表单的纯 CSS 解决方案并不容易。幸运的是，Wufoo 的一些聪明人制作了一些优秀的 CSS 表单，我可以从中学习。他们基于 CSS 的在线表格示例：

示例页面： [http ://www.wufoo.com/examples/#eventregistration](http://www.wufoo.com/examples/#eventregistration)

多列表单示例： [https ://examples.wufoo.com/forms/s7p7s5/](https://examples.wufoo.com/forms/s7p7s5/)

# objective-c - dateWithTimeInterval:(NSTimeinterval) sincedate:(nsdate *) 和 (nsdate *) dateByAddingTimeInterval:(NSTimeInterval) 之间的差异

> ID：14038519
> 
> 赞同：1
> 
> 时间：2012-12-26T09:28:56.553
> 
> 标签：objective-c, nsdate, nstimeinterval

两种说法有什么区别

```
NSDate *today = [NSDate date];
NSDate *tomarow = [today dateByAddingTimeInterval:60*60*24];
NSDate *nextday = [NSDate dateWithTimeInterval:60*60*24 sinceDate:today]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:38:00.020

这两种方法的唯一区别是一种是类方法，另一种是实例方法。

以下代码片段演示了这两种方法的使用：

```
// Today's Date
NSDate *today = [NSDate new];

// Date With Class Method
NSDate *tomorrow1 = [NSDate dateWithTimeInterval:60*60*24 sinceDate:today];
NSLog(@"Date from class method: %@", tomorrow1);

// Date With Instance Method
NSDate *tomorrow2 = [today dateByAddingTimeInterval:60*60*24];
NSLog(@"Date from instance method: %@", tomorrow2); 
```

上面的代码片段将给出如下输出：

> 上课日期方法：2012-12-27 09:35:15 +0000
> 
> 来自实例方法的日期：2012-12-27 09:35:15 +0000

有关详细信息，请参阅[NSDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

# c++ - Eclipse 中类的多重定义错误

> ID：14038521
> 
> 赞同：-5
> 
> 时间：2012-12-26T09:29:05.677
> 
> 标签：c++, linux, eclipse

尝试包含名为 sniffer.h 的文件时，Eclipse 中出现“多重定义”错误。

嗅探器.h：

```
#ifndef SNIFFER_H_
#define SNIFFER_H_
#include "sys/types.h"
#include "sys/socket.h"
#include "netinet/in.h"
#include "netdb.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <ctype.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <iostream>
#include <sstream>
#include <fstream>
#include <queue>
#include <pthread.h>
#include <sys/timeb.h>
#include <map>
#include <algorithm>
#include <math.h>
#include <syslog.h>
#include <signal.h>
#include <asm-generic/errno-base.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <iostream>
#include <string>
#include <sstream>
#include <algorithm>
#include <iterator>
//Syslog libraries.
#include <sys/wait.h>
#include <ctime>
using namespace std;

string gconfigfilename = "config";          //Holds the config file name, dynamic     because of the add_interface option.
int pipehandler;                            //pipe handler for     the pipe that the gulp writes to
string pipeFullName;                        //absolute path for the pipe that the gulp writes to
FILE* pipe_fd; 
```

它有sniffer.cpp中所有函数的语句：

```
#include "../h/sniffer.h"

     void OpenPipeRead(/*string sinterface*/)
{
    int ret_val;
    pipeFullName = "";
    pipeFullName.append(mconfig[C_PIPEPATH]);
    //Its not empty only when there is argument for parallal telepath_sniff instances.
    pipeFullName.append(mconfig[C_PIPENAME]);
    //if(strcmp(sinterface.c_str(), "") != 0)
    //  lpipename.append("_" + sinterface);     
    printf("Try to open Pipe for reading\n");
    syslog(LOG_INFO, "Try to open Pipe for reading\n"); 
    /* Create the named - pipe */
    ret_val = mkfifo(pipeFullName.c_str(), 0666);
    if ((ret_val == -1) && (errno != EEXIST)) {
        perror("Error creating the pipe");
        syslog(LOG_ERR, "Error creating the pipe");         
        exit(1);
    }       
    if((pipehandler = open(pipeFullName.c_str(), O_RDWR)) < 1)      /* Open the pipe for reading and writing , in append mode */
    {
       perror("Failed to open pipe");
       syslog(LOG_ERR, "Failed to open pipe");
       exit(1);
    }
    printf("Pipe opened.\n");
    syslog(LOG_INFO, "Pipe opened.\n");
} 
```

然而，在第一个函数中，它又说`pipeFullName`有多个定义。

我只包含了一次，字符串在 sniffer.h 中定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:30:48.283

## 你不应该包含`.cpp`文件！！！

这样做你最终违反了**[One definition Rule](http://en.wikipedia.org/wiki/One_Definition_Rule)**。

通常的方法是将**声明**放在头文件中，将**定义**放在 cpp 文件中。
您可以根据需要多次声明某些内容，但只能定义一次。

所以你应该只包括头文件。如果包含 cpp 文件，则 cpp 文件中符号定义的副本会添加到包含头文件的每个翻译单元中，从而违反 ODR。

# spring-batch - Spring批处理动态提交间隔

> ID：14038523
> 
> 赞同：0
> 
> 时间：2012-12-26T09:29:10.260
> 
> 标签：spring-batch

我有一个带有平面文件作为项目阅读器的春季批处理应用程序。这个公寓包含两种不同类型的记录。在我的块的定义中，我必须指定一个动态提交间隔。应用程序每次读取新类型的记录时都必须提交。

例子 ：

```
1, 'recordType1', 50
1, 'recordType1', 51
1, 'recordType1', 52
COMMIT
2, 'recordType2', 'foo'
COMMIT
1, 'recordType1', 53
COMMIT
2, 'recordType2', 'foo'
COMMIT
1, 'recordType1', 50
1, 'recordType1', 50
1, 'recordType1', 50
1, 'recordType1', 50
COMMIT
2, 'recordType2', 'foo'
2, 'recordType2', 'foo'
2, 'recordType2', 'foo'
2, 'recordType2', 'foo'
COMMIT 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:28:14.910

CompletionPolicy 旨在完全执行此用例。也就是说，您要根据标准提交，而不仅仅是一个固定的数字。看一下

```
org.springframework.batch.repeat.CompletionPolicy 
```

而不是提交间隔并利用 isComplete 方法来评估记录以及是否应该提交块。

# mysql - 根据第一条消息获取最新的未读消息

> ID：14038528
> 
> 赞同：2
> 
> 时间：2012-12-26T09:29:53.807
> 
> 标签：mysql, sql

我在从存储用户之间消息的表中检索数据时遇到问题。这是表格：

```
CREATE TABLE messages
(
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    sender  VARCHAR(20), 
    recipient  VARCHAR(30),
    content TEXT,
    is_read TINYINT(1),
    created_at DATETIME,
    PRIMARY KEY (`id`) ,
    INDEX idx_sender (sender) ,
    INDEX idx_recipient (recipient)
);

INSERT INTO messages (id, sender, recipient, content, is_read, created_at)
VALUES
-- Alice and George
(1, 'Alice', 'George', 'Happy new year', 1, '2012-12-24 23:05:00'),
(2, 'George', 'Alice', 'It is chrimas night...', 1, '2012-12-24 23:10:00'),
(3, 'Alice', 'George', 'Happy Xmas then', 0, '2012-12-25 00:00:00'),
-- John and Paul
(4, 'John', 'Paul', 'Hi Paul', 1, '2012-12-26 09:00:00'),
(5, 'Paul', 'John', 'Hi John', 1, '2012-12-26 09:05:00'),
(6, 'John', 'Paul', 'Have you done this ?', 1, '2012-12-26 09:10:00'),
(7, 'Paul', 'John', 'No I was unpacking my gifts', 0, '2012-12-26 09:05:00'),
-- George and Tim
(8, 'George', 'Tim', 'How was the end of the world ?', 1, '2012-12-22 10:10:00'),
(9, 'Tim', 'George', 'Really nice !', 0, '2012-12-22 10:15:00'),
-- John and Tim
(10, 'John', 'Tim', 'I don\'t know if I should fire you for new year\'s eve', 1, '2012-12-27 15:20:00'),
(11, 'Tim', 'John', 'That is a great idea!', 0, '2012-12-27 15:20:00'); 
```

假设 George 和 John 是经理，其他人是员工。我需要检索管理员是收件人的最新未读消息。同时，我必须只检索它们也是对话发起者的那些消息。

所以结果必须是：

*   message id 7 : 'Paul', 'John', 'No I was unpacking my gift', 0, 2012-12-26 09:05:00
*   消息 id 9 : 'Tim', 'George', 'Really nice', 0, 2012-12-22 10:15:00
*   message id 11 : 'Tim', 'John', 'That is a great idea!', 0, 2012-12-27 15:20:00

我进行了一个查询，几乎就是这样，但是缺少消息 id 11 的行：

```
SELECT
    m.*
FROM
    messages m
INNER JOIN (
    -- retrieve the first message (fm)
    SELECT t.sender, t.recipient
    FROM (
        SELECT id, sender, recipient, content, created_at,
        IF ( sender IN ('John', 'George'), sender, recipient ) AS the_other
        FROM messages
        WHERE
            sender  IN ('John', 'George')
            OR recipient IN ('John', 'George')
        ORDER BY
        created_at ASC
    ) t
    GROUP BY
        the_other
    HAVING t.sender IN ('John', 'George')
) fm ON fm.recipient = m.sender
    AND fm.sender = m.recipient
WHERE
    m.recipient IN ('John', 'George')
    AND m.is_read = 0
ORDER BY
    m.created_at DESC
LIMIT 0, 10 
```

缺少消息 id 11，因为子查询按 the_other 分组。如果我按发件人和收件人拆分“分组依据”，它将检索消息 id 3，但它是不需要的行。

解决我的问题的 SQL 应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:48:19.213

Finally I've found a solution but I don't think this is the most optimized query :

```
SELECT
    m.*
FROM
    messages m
INNER JOIN (
    -- retrieve the first messages (fm)

    SELECT t.sender, t.recipient
    FROM (
        SELECT id, sender, recipient, content, created_at,
        IF ( sender = 'John', recipient, sender ) AS the_other
        FROM messages
        WHERE
            sender  = 'John'
            OR recipient = 'John'
        ORDER BY
        created_at ASC
    ) t
    GROUP BY
        the_other
    HAVING t.sender = 'John'

    UNION

    SELECT t.sender, t.recipient
    FROM (
        SELECT id, sender, recipient, content, created_at,
        IF ( sender = 'George', recipient, sender ) AS the_other
        FROM messages
        WHERE
            sender  = 'George'
            OR recipient = 'George'
        ORDER BY
        created_at ASC
    ) t
    GROUP BY
        the_other
    HAVING t.sender = 'George'

) fm ON fm.recipient = m.sender
    AND fm.sender = m.recipient
WHERE
    m.recipient IN ('John', 'George')
    AND m.is_read = 0
ORDER BY
    m.created_at DESC
LIMIT 0, 10 
```

[http://sqlfiddle.com/#!2/30f5a/17/0](http://sqlfiddle.com/#!2/30f5a/17/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:57:38.953

可以使用以下查询：

```
select a.* from
(select id, sender, recipient, content, is_read, max(created_at)
from message where recipent in ('John', 'George') and is_read = 0 
group by sender) a,    message b (select id, sender, recipient,
content, is_read, min(created_at) 
from message where sender in ('John', 'George') group by recipient) b
where a.sender=b.recepient 
```

# gcov - gyp 中的覆盖率测量操作

> ID：14038539
> 
> 赞同：0
> 
> 时间：2012-12-26T09:30:41.417
> 
> 标签：gcov, gyp

我决定使用[gyp](http://code.google.com/p/gyp)作为我在 linux 上的项目的构建系统。我对基本功能（目标声明、依赖项、层次结构等）感到满意，但我在定制方面遇到了一些问题。

我有一个核心项目，它被构建为一个库，并为该库提供了一堆单元测试，这些单元测试编译成单独的可执行文件，并将核心项目作为依赖项。现在我想测量测试覆盖率，`gcov`这意味着库本身应该使用不同的编译选项构建，并且这些选项应该只用于测试构建。

我只是无法意识到如何用 gyp 来实现这一点。提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:09:43.093

我找到了解决方案并决定分享它。我真正需要的只是添加另一个[配置](http://code.google.com/p/gyp/wiki/GypLanguageSpecification#configurations)：

```
'configurations': {
  # Or just let Debug configuration turn on coverage
  'Coverage': {
    'conditions': [
      ['OS=="linux"', {
          'cflags': ['--coverage'],
          'ldflags': ['-fprofile-arcs']
        }],
    ]
  },
  # More configurations
} 
```

UPD：看起来还有另一种方法 -`direct_dependent_settings`在目标字典中指定额外的覆盖标志`test`。

# textures - 如何在 THREE.JS 上加载带有纹理的对象？

> ID：14038540
> 
> 赞同：0
> 
> 时间：2012-12-26T09:30:46.410
> 
> 标签：textures, three.js

我已经下载了一个房屋模型并用 THREE.OBJLoader 加载它，但我得到了一个无纹理的对象。如何加载纹理？

[img http://o7.no/YLlkKQ](http://o7.no/YLlkKQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:49:51.447

查看示例文件夹中提供的 webgl_loader_obj_mtl 示例。它显示了如何将 mtl 文件与 obj 文件一起加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T00:01:02.683

我怀疑你可能会遇到这个问题： [https ://github.com/mrdoob/three.js/wiki/How-to-run-things-locally](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)

# java - 在 JNI 中退出本机代码会杀死 Java 应用程序

> ID：14038543
> 
> 赞同：3
> 
> 时间：2012-12-26T09:30:49.313
> 
> 标签：java, windows, dll, java-native-interface, native

我正在从 JNI 调用我的本机 dll 的方法。它工作正常，但在我的本机代码的一个地方，我正在调用 exit(1) 以便本机代码停止工作，但发生的情况是它也会导致退出我的 java 应用程序。我错过了什么吗？JNI 中有什么方法可以让我只能杀死本机代码而不是整个 Java 应用程序？

**编辑：**基本上我正在用本机代码加密文件。当有人从java中取消操作时，我希望它停止加密。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T09:40:29.640

JNI 本机代码和 JVM 在同一个进程中运行。由于`exit`关闭了进程，它也将结束 JVM。

杀死以本机代码执行的线程可能会泄漏资源，因此不受支持。[在这里](https://stackoverflow.com/questions/9633924/java-how-to-stop-a-thread-thats-calling-a-succession-of-c-functions-using-a)查看更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:44:55.313

如果在本机代码中的单独线程中，请停止。

```
//sample thread code
void thread(){
  while (1) {
    //do something
    if ( done ) return;
  }
} 
```

如果您在本机函数中并且想要返回到 Java，只需返回即可。

如果你做了一个错综复杂的函数调用和循环迷宫；都一样，需要退出，然后抛出一个本地异常，在最后一个本地级别捕获它并返回。不建议这样做，不建议这样做，但有时您可能会陷入这种混乱。

```
// Do not write code like this
// A kitten and a puppy die every time you call it
void foo(){
  while (1){
     bar();
  }
}

void bar(){
  for( i=0; i < 100; i++){
    baz();
    quux();
  }
}

void baz(){
 // something
}

void quux(){
 // something
 if( want_to_exit) throw new GetOut();
}

void JNI_Method(.....){
   try {
     if (x) foo();
   } catch ( GetOut g){
      return;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T04:45:09.583

我所做的是在单独的线程中运行加密代码，并在需要时从主线程使用 terminatethread() 终止新创建的线程，但问题是 terminatethread() 没有及时释放资源（文件句柄等）并且线程关闭后，我无法立即从 java 中删除文件。

# c# - 垃圾收集器如何处理值类型和引用类型

> ID：14038544
> 
> 赞同：7
> 
> 时间：2012-12-26T09:30:49.327
> 
> 标签：c#, asp.net

垃圾收集器在释放内存值类型和引用类型时将如何处理值类型和引用类型。我对此有点困惑，任何人都可以解释一下，同时垃圾收集器删除释放值类型或引用类型的内存首先删除

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-26T17:10:33.043

你以错误的方式思考问题。停止思考“值类型”和“引用类型”。相反，开始考虑*变量*，以及这些变量是*短期的*还是*长期的*。

**垃圾收集堆的目的是回收与长期变量相关的存储。***堆栈* 的目的是回收与短期变量相关的存储。

人们会试图告诉您“值类型在堆栈上”和“引用在堆上”等等，这是令人困惑的废话。 **变量**在堆栈或堆上（或寄存器——每个人都忘记了寄存器），变量可以是值类型或引用类型。

你一直在问“垃圾收集器会先删除哪个？” 这个问题无法回答。垃圾收集堆不保证回收内存的顺序。当激活帧从堆栈中弹出时，短期存储——堆栈——将被回收。**但是，如果运行时可以确定不会再次访问引用，则 C# 语言允许垃圾收集器在将帧从堆栈弹出之前清理由短期存储引用的存储。**基本上，*何时回收存储是运行时的一个实现细节，随时可能发生变化*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:29:49.967

垃圾收集器只关心引用类型。它不会对值类型做任何事情。

值类型可能存在于堆栈中，在这种情况下，当方法退出并调整堆栈指针时，它们的内存会被回收。值类型也可以*作为引用类型的字段存在*于堆中。在这种情况下，当 GC 收集引用类型的对象时，将回收内存。

# php - 如果出现错误，在表单提交后显示弹出窗口中的选定值

> ID：14038547
> 
> 赞同：1
> 
> 时间：2012-12-26T09:31:10.313
> 
> 标签：php, html

我有一个文本框，当用户单击它时，会打开一个弹出窗口，其中包含许多单选选项，当用户选择其中任何一个并单击表单上的提交按钮时，该文本框中会出现值，但是当用户单击时在提交按钮上，如果表单出现错误而不是文本框值消失，我该如何恢复它？这是文本框代码

```
<input  title="Enter Kind of work 1" 
        readonly="readonly"  
        onclick="if(this.value!=''){this.value='';opendrop();}else{opendrop();}" 
        id="other_work1" 
        name="other_work1" 
        type="text" 
        size="20" 
        maxlength="20"  
        onclick='opendrop()'
        <?php if (isset($errors)) { 
                  echo 'value="'.htmlentities(@$_POST['other_work1']).'"'; 
              } 
        ?>
> 
```

这是我正在调用的函数

```
function opendrop()
{
var popy= window.open('kind.php','popup_form','width=380 height=300 left=800 top=300');
} 
```

# javascript - jQuery克隆不克隆

> ID：14038552
> 
> 赞同：-4
> 
> 时间：2012-12-26T09:31:34.370
> 
> 标签：javascript, jquery

我有这个：

```
<div class="header">
</div>
<div>
  <span class="spacer"></span>
</div> 
```

和：

```
$('.spacer').clone().appendTo('.header') 
```

但这**会将** `.spacer`元素移动到`.header`元素，而不是**复制**它。

我不明白为什么这不起作用，因为在[文档](http://api.jquery.com/clone/)中说：

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">Goodbye</div>
</div> 
```

转换为：

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">
    Goodbye
    <div class="hello">Hello</div>
  </div>
</div> 
```

和`$('.hello').clone().appendTo('.goodbye');`

有任何想法吗？

看到这个[小提琴](http://jsfiddle.net/jVpHh/)。

1.  橙色是我要粘贴项目的位置
2.  黄色是间隔
3.  我要粘贴的项目有不同的颜色
4.  底部的红色是我获取克隆的地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:42:34.317

确保你的代码在里面`document.ready`。它指定了在 DOM 完全加载时执行的函数。看起来您的函数在加载 dom 之前被调用

```
$(document).ready(function(){
   $('.spacer').clone().appendTo('.header');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:31:34.363

我已经用小提琴调试过了，谢谢。我发现了一个我没有关闭的 div。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T09:41:47.303

您可能忘记了分号“;” 因为这是有效的：

```
 $(document).ready(function(){
   $('.spacer').clone().appendTo('.header');
 }); 
```

# vba - 为什么设置 Application.ActiveExplorer.CurrentFolder 只会重命名而不是切换？

> ID：14038556
> 
> 赞同：1
> 
> 时间：2012-12-26T09:31:53.257
> 
> 标签：vba, outlook

我正在使用 Outlook 2010，在 VBA 中我正在尝试，

```
Application.ActiveExplorer.CurrentFolder = Session.GetDefaultFolder(olFolderRssFeeds) 
```

它只是用名称“Rss Feeds”重命名了当前文件夹，这是不正确的，因为它假设切换到 rss feeds 文件夹。但这似乎是在 Outlook VBA 中切换文件夹的唯一方法，而且我在帮助文档中找不到任何解释它会重命名而不是切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:23:07.940

你错过了关键字`Set`

它应该是 `Set Application.ActiveExplorer.CurrentFolder = Session.GetDefaultFolder(olFolderRssFeeds)`

参考：http: [//msdn.microsoft.com/en-us/library/office/ff866719.aspx](http://msdn.microsoft.com/en-us/library/office/ff866719.aspx)

# java - 如何将标头设置为 Apache Camel 中属性文件中的值

> ID：14038561
> 
> 赞同：5
> 
> 时间：2012-12-26T09:32:13.763
> 
> 标签：java, apache-camel

是否可以使用骆驼*属性组件*将消息头设置为从属性文件中读取的值？我可以将此类属性设置为 URI 选项，但无法将它们设置为标头值。

我需要这样的东西：

```
<camel:setHeader headerName="actionId">
    <camel:constant>{{onus.transPosting.RtSFailed}}</camel:constant>
</camel:setHeader> 
```

其中`onus.transPosting.RtSFailed`是在使用骆驼属性组件导入的文件上设置的属性键。

注意：我使用的是 Apache Camel 2.10.1

**更新**

使用[本讨论](http://camel.465427.n5.nabble.com/using-values-from-a-properties-file-in-setHeader-method-td5154287.html)`<propertyPlaceholder>`所建议的不起作用，它会导致异常：

`Caused by: org.apache.camel.language.simple.types.SimpleParserException: Unknown function: onus.transPosting.RtSFailed`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T12:20:19.687

是的，您可以使用具有属性功能的简单语言：http: [//camel.apache.org/simple](http://camel.apache.org/simple)

```
<camel:setHeader headerName="actionId">
    <camel:simple>${properties:onus.transPosting.RtSFailed}</camel:simple>
</camel:setHeader> 
```

虽然我认为我们已经在最新的 Camel 版本中修复了 < camel:constant > 也将解析属性占位符。

# android - 如何计算下载多个文件的 AsyncTask 的进度

> ID：14038563
> 
> 赞同：0
> 
> 时间：2012-12-26T09:32:33.043
> 
> 标签：android, android-asynctask, android-progressbar

我正在尝试使用各种 for 循环下载一些 png 文件。请问在我的情况下，我究竟如何使用 publishProgress() 方法？

这是我的代码：

```
protected String doInBackground(String... params) {

    for(PlaceDetails place : places){
        for(int v = 14; v <=16; v++){   
            for (int y = 0; y <= placeBottomLeft.getYTile(); y++){
                for(int x = placeTopLeft.getXTile(); x <= placeBottomRight.getXTile(); x++){
                    try {
                        //Download some stuff here
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

            }
        }
    }

    for (int w = zoom -1 ; w <= zoom+1; w++){
        for (int y = topLeft.getYTile(); y <= bottomLeft.getYTile(); y++){
            for(int x = topLeft.getXTile(); x <= bottomRight.getXTile(); x++){
                try {
                    //Download some stuff here again
                } catch (Exception e) {
                    Log.e("URL::: ERROR", e.getMessage());
                    e.printStackTrace();
                }
            }

        }
    }
    return null;
} 
```

如您所见，我试图在 doInBackground 方法中的 2 个单独的 for 循环中下载内容。然而，我看到的大多数示例只是让线程休眠并使用 for 循环计数器编号作为 publishProgress() 方法的整数。在这种情况下我应该如何使用它？谢谢！

编辑：

为了进一步澄清，我想知道是否有可能让进度更新包括在 onPostExecuteMethod() 中完成的事情。

```
protected void onPostExecute (String result){
    File newFileDir = new File(Environment.getExternalStorageDirectory().toString() + "/Qiito Offline/offlineMap");
    File fileDir = new File(Environment.getExternalStorageDirectory().toString() 
            + "/test");
    try {
        Log.e("Starting :: ", newFileDir.getPath());
        File newFile = new File(newFileDir, "" + tID + ".zip");
        newFileDir.mkdirs();
        OutputStream output = new FileOutputStream(newFile);
        ZipOutputStream zipoutput = new ZipOutputStream(output);
        zip(fileDir, fileDir, zipoutput);
        zipoutput.close();
        output.close();
        deleteDirectory(fileDir);
        mNotificationHelper.completed(); //method I used for my NotificationHelper to inform that the entire process is completed
    } catch (IOException excep) {
        Log.e("ERROR!!" , excep.getLocalizedMessage());
    }
} 
```

在 postExecute() 中，我试图将 png 文件压缩到另一个文件夹中，然后删除所有 png 文件。进度条也能包含这个吗？否则，我将只负责跟踪下载 png 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:53:15.763

将此代码写入`doInBackground()`：

```
int totalCount  = 0; // total images count
int counter = 0; // current downloaded files count

// images - ArrayList with images
totalCount = images.size();

// download and publish progress
   int imagesCount = images.size(); 
   for (int i = 0; i < imagesCount; i++) {
            // download image

            publishProgress((int) ((counter++ / (float) totalCount) * 100));
    } 
```

# itext - 用于 PDF 验证的 iText API 详细信息

> ID：14038565
> 
> 赞同：1
> 
> 时间：2012-12-26T09:32:42.647
> 
> 标签：itext

我将进行一个案例研究，我需要使用某些标准验证 PDF（例如，检查 PDF 中的内容是否具有特定的字体、字体大小、徽标位置）。所以我只想确认使用 iTEXT 是否可以获得这些 PDF 规范？如果是，iTEXT 中使用的 API 是什么？

注意：市场上是否还有其他具有这种功能的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:27:13.173

由于 iText 允许您直接访问所有 PDF 对象（字典、数组、流......），它为您提供了所需的工具。但不要低估你的任务。根据您必须检查的标准，您可能还有很多工作要做。

例如，如果您的标准包括所有文本必须使用单一给定字体，您可以简单地解析整个文档文本并检查字体。另一方面，如果您必须区分例如标题和标准文本，则需要为此引入一些启发式方法，因为通常标题不标记为标题。

你的支票必须有多好？如果字体字典具有所需的名称条目就足够了，还是您实际上需要检查字体（可能是嵌入的字体子集）确实是所需的字体？

你提到了一个标志位置。您如何识别徽标（与其他图纸或图像相比）？

...

因此，iText 可以用作基础，但您必须事先做很多思考。如果您决定认真使用 iText，我建议您咨询[iText in Action — 第 2 版](http://itextpdf.com/book/)。

还有其他可用的 PDF 库和工具，包括免费的（如免费啤酒或免费演讲）和商业版，它们为 PDF 分析提供了一个框架。我主要使用 iText，因此不深入了解其他那些。

Ceterum censeo，您应该明确查看 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)（尤其是关于图形和文本的第 8 章和第 9 章），以了解 PDF 包含哪些内容和不包含哪些内容。

# iphone - 表格视图中的按钮没有响应其单元格编号

> ID：14038575
> 
> 赞同：0
> 
> 时间：2012-12-26T09:33:53.560
> 
> 标签：iphone, ios5, uitableview

我在每个单元格中有一个表格视图，两个按钮作为编辑和取消。当我在同一单元格编号中同时单击编辑按钮时，取消按钮图像应该改变。例如。当用户选择第二个单元格编辑按钮时，只有第二个单元格中的取消按钮应更改其图像。

我的问题是当我单击任何单元格编辑按钮时，另一个单元格取消按钮图像会自动更改。

我希望当用户单击第一个单元格时，只有第一个单元格取消按钮应该更改而不是其他单元格？请给我样品我们怎么能做到这一点？据我所知，这种重复使用细胞的原因？

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     simpleTableIdentifier = @"MenuNameCell";
     MenuNameCell *cell = (MenuNameCell *)[tableView    dequeueReusableCellWithIdentifier:simpleTableIdentifier];

      if (cell== nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
        NSLog(@"---------new cell agin");   
    }
       else
    {
        NSArray *arrayView = [cell.contentView subviews];
        for (UIView *vTemp in arrayView)
        {
            [vTemp removeFromSuperview];
        }

        NSLog(@"---No New Cell hiiii");

    }
    // Creating Label Menu Name
    _nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 11, 82, 21)];
    _nameLabel.backgroundColor = [UIColor clearColor];
    _nameLabel.text =  [_hotel._orderedMenus objectAtIndex:indexPath.row];

    // Creating Label Menu Cost
    _amountMenu   = [[UILabel alloc] initWithFrame:CGRectMake(167, 13, 44, 21)];
    _amountMenu.backgroundColor = [UIColor clearColor];
    _amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];

    // Creating Text Field For Order Quantity
    _textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
    _textFieldQuantity.userInteractionEnabled = NO;
    _textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];

    // Creating Button For Check Order
    _checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
    [_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
    [_checkButton setTag:indexPath.row];
    [_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
    [_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];

    // Creating Button For CANCEL Order
    _cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
    [_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
    [_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
    [_cancelButton setTag:indexPath.row];
    [_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];

    [imageViewArray addObject:_checkButton];
    [imageViewArray addObject:_cancelButton];

    // Adding All To Content View
    [cell.contentView addSubview:_nameLabel];
    [cell.contentView addSubview:_amountMenu];
    [cell.contentView addSubview:_textFieldQuantity];
    [cell.contentView addSubview:_checkButton];
    [cell.contentView addSubview:_cancelButton];

    //objc_setAssociatedObject(_checkButton, iindex, indexPath,OBJC_ASSOCIATION_RETAIN );

    return cell;
    }

      -(void)editQuantity:(id)sender{

    button = (UIButton *)sender;
    row = button.tag;
    col = button.titleLabel.tag;
    _textFieldQuantity.userInteractionEnabled = YES;
    UIImage *buttonImage = [UIImage imageNamed:@"edit_over.png"];
    [_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    UIImage *buttonImageCancel = [UIImage imageNamed:@"check.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel forState:UIControlStateNormal];
    _cancelButton.tag =  0;

}

     -(void)cancelOreder:(id)sender{

    button = (UIButton *)sender;
    row = button.tag;
    NSLog(@"The Row Selected iS At Cancel Order ISSSS----%d", row);
    if (_cancelButton.tag ==  0){
        _textFieldQuantity.userInteractionEnabled = NO;
        UIImage *buttonImageCancel = [UIImage imageNamed:@"check_over.png"];
        [_cancelButton setBackgroundImage:buttonImageCancel  forState:UIControlStateNormal];
        UIImage *buttonImageCancel1 = [UIImage imageNamed:@"cancel.png"];
        [_cancelButton setBackgroundImage:buttonImageCancel1 forState:UIControlStateNormal];
        UIImage *buttonImage = [UIImage imageNamed:@"edit.png"];
        [_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
        _cancelButton.tag = 1;
    }
    else
    {
        UIAlertView *alert =  [[UIAlertView alloc] initWithTitle:@"iHomeDelivery" message:@"Do You Want To Cancel the Order" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

}

     -(void)removeEntry:(id) sender{
    _hotel = [HotelList sharedInstance];
    NSLog(@"Called...%d",[_hotel._orderedMenus count]);
    NSLog(@"Button index is ------%d", row);
    if ([_hotel._orderedMenus count] > 1) { // if table contains multiple menus
        [_hotel._orderedMenus removeObjectAtIndex:row];
        [_hotel._menuPrices removeObjectAtIndex:row];
        [_hotel._selectedQuantity removeObjectAtIndex:row];
        NSNumber *aNumber;
        int sum = 0;
        for (aNumber in _hotel._menuPrices)
        {
            int aInt = [aNumber intValue];
            sum = sum + aInt;
        }
        _labelFinalBillAmount.text = [NSString stringWithFormat:@"%d", sum];
    }
    else if ([_hotel._orderedMenus count] ==  1){ // if table contain only single menu // Here All array gets Empty
        [_hotel._orderedMenus removeAllObjects];
        _labelFinalBillAmount.text = @"0";
    }
    NSLog(@"--count is %d",[_hotel._orderedMenus count]);
    [_tableviewMenus reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:48:52.117

您正在使用自定义单元格，然后将此代码添加到您的自定义类中并获取特定单元格的特定发件人

```
-(IBAction)yourButtonMehod:(id)sender
{
    UIView *senderButton = (UIView*) sender;
    NSIndexPath *indexPath = [(UITableView *)self.superView indexPathForCell: (UITableViewCell*)[[senderButton superView]superView]];
} 
```

现在，您可以获取发件人并使用 indexpath.row 您可以做任何事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:10:47.117

在您的按钮操作方法中

```
-(IBAction)cellButtonPressed:(id)sender withEvent:(UIEvent *)event
{
    UITouch * touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView: bulletinTable];
    NSIndexPath * indexPath = [bulletinTable indexPathForRowAtPoint: location];
} 
```

还有你的 cellForRowAtIndexPath 方法

```
[cell.accessory addTarget:self action:@selector(cellButtonPressed:withEvent:) forControlEvents:UIControlEventTouchUpInside]; 
```

这应该有效。

# java - 搜索文本自动完成数据的最佳方式

> ID：14038577
> 
> 赞同：2
> 
> 时间：2012-12-26T09:34:09.877
> 
> 标签：java, sql, jdbc

我面临一个问题，我需要根据人名在文本字段下方显示建议/自动完成结果。我应该将每个人都加载到列表中并在启动时作为集合排序，还是可以在数据库中按名称索引并且只选择人名以给定字符序列开头的行？

当然，我宁愿不必在内存中保留一个潜在的巨大列表，所以如果有人能建议我如何在这里使用 SQL，那将是很棒的，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:42:39.663

我认为把所有东西都收藏起来对整个名字来说都是一笔开销

**方法**

1.  一旦用户输入第一个字符，您就可以点击数据库。将数据放入一个集合（首选**树集）以获取排序的唯一值。**
2.  之后使用一些java逻辑过滤集合中的数据
3.  一旦用户删除第一个字符，在 DB 命中后用新集合重新加载集合

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T09:43:46.513

**在 DB 中查询您的表**：如果您每次都进行 db 调用，这将相对较慢。

**存储在中间层**：这将比 db 调用更快。但是在这里您可以再次使用多种方法。

1）从数据库中获取数据并存储
2）预填充缓存，然后查询您的缓存。

**在客户端存储**：将数据/名称存储在 js 文件中，并使用 js 库以高效的方式执行搜索。我试过这个 js 库，发现它非常好[WICK: Web Input Completion Kit](http://wick.sourceforge.net/)。
现在 html 5 也支持本地存储，因此您也可以对此进行评估。

因此，您需要评估所有选项，然后找到您需要的**选项**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:47:47.237

提供一个 AJAX 功能，即完善用户列表`name like 'input%' to DB`。

在您的输入字段中调用此函数`onkeyPress()`事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:37:52.783

自动完成旨在根据用户输入的字符搜索结果，我只会使用此查询检索与模式匹配的行。

```
 SELECT uname FROM table WHERE uname like 'cha%'; 
```

这`cha`是用户的输入。

自动完成将检索

```
 chaten
  chaitanya
  charles 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T09:54:42.163

我建议您使用`jQuery`，这将有助于在您输入字段时提供建议。这是[演示](http://jqueryui.com/autocomplete/#remote)

> 数据源将是返回 JSON 数据的服务器端脚本，通过 source-option 的简单 URL 指定。此外，将 minLength-option 设置为 2 以避免查询返回太多结果，并且 select-event 用于显示一些反馈。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T09:55:50.823

`SELECT * FROM TABLE_NAME WHERE NAME LIKE %manu%` 如果您想要类似搜索的选项，您可以使用类似查询并显示在表格上

# android - SDL 1.3 和 OpenGL ES 1.1 的白色纹理

> ID：14038585
> 
> 赞同：1
> 
> 时间：2012-12-26T09:34:53.630
> 
> 标签：android, opengl-es, android-ndk, sdl, opengl-es-1.1

我正在尝试将使用 SDL 1.2 和 OpenGL 1.3 的游戏移植到 Android 并最终移植到 iOS。

为此，我不得不切换到 SDL 1.3，下一个未发布的版本将成为 SDL 2.0，它已被移植到 Android。最初的结果很好，只有 SDL 和 SDL_image 一切正常。

但是当我将 OpenGL ES 1.1 添加到混合中并尝试渲染一个带纹理的矩形时，我得到的只是一个白色矩形。

有什么想法我在这里做错了吗？就像我说的，只是 SDL/SDL_image 显示图像就好了。

**编辑**：我已经根据下面 Ryan Maloney 的建议更新了下面的代码，即在我使用 GL_FLOAT 的地方使用浮点文字并尝试使用`SDL_GL_BindTexture`而不是手动创建纹理。但是也不起作用，我得到一个黑色纹理和一些错误：没有可用的 EGL 配置，EGLNativeWindowType 0x2a1b5380 已经连接到另一个 API。`glBindTexture`仍然会产生白色纹理。

**编辑2**：刚刚有了实际检查错误的绝妙想法：如果我`glGetError()`在之后打电话`glTexImage2D`，我会得到`GL_INVALID_OPERATION`。

```
#include <GLES/gl.h>
#include <SDL.h>
#include <SDL_image.h>
#include <string>

// Set to 1 to use SDL_GL_BindTexture instead of glBindTexture
#define USE_SDL_TEXTURE 0

static const int screen_width = 640;
static const int screen_height = 480;

void init_opengl()
{
    glEnable(GL_TEXTURE_2D);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, 0, screen_width, screen_height);
    glOrthof(0, screen_width, screen_height, 0, -1, 1);
    glMatrixMode(GL_MODELVIEW);
}

int next_power_of_two(int n)
{
    double logbase2 = log((double) n) / log(2.0);
    return (int) (pow(2, ceil(logbase2)) + 0.5);
}

SDL_Surface* convert_to_power_of_two(SDL_Surface* surface)
{
    int width = next_power_of_two(surface->w);
    int height = next_power_of_two(surface->h);

    SDL_Surface* pot_surface = SDL_CreateRGBSurface(0, width, height, 32,
                                                    0x00ff0000, 0x0000ff00,
                                                    0x000000ff, 0xff000000);
    SDL_Rect dstrect;
    dstrect.w = surface->w;
    dstrect.h = surface->h;
    dstrect.x = 0;
    dstrect.y = 0;
    SDL_SetSurfaceAlphaMod(surface, 0);
    SDL_BlitSurface(surface, NULL, pot_surface, &dstrect);
    SDL_FreeSurface(surface);

    return pot_surface;
}

GLenum get_texture_format(SDL_PixelFormat* pixel_format, GLint bpp)
{
    switch (bpp) {
    case 4:
        return GL_RGBA;
    case 3:
        return GL_RGB;
    }
    throw "Unsupported pixel format";
}

#if USE_SDL_TEXTURE
SDL_Texture* load_image(const std::string& path, SDL_Renderer* renderer)
#else
GLuint load_image(const std::string& path)
#endif
{
    SDL_Surface* surface = IMG_Load(path.c_str());
    SDL_Surface* pot_surface = convert_to_power_of_two(surface);

#if USE_SDL_TEXTURE
    return SDL_CreateTextureFromSurface(renderer, surface);
#else
    SDL_PixelFormat* pixel_format = pot_surface->format;
    GLint bpp = pixel_format->BytesPerPixel;
    GLenum texture_format = get_texture_format(pixel_format, bpp);

    GLuint texture;
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, bpp, pot_surface->w, pot_surface->h, 0,
                 texture_format, GL_UNSIGNED_BYTE, pot_surface->pixels);

    SDL_FreeSurface(pot_surface);
    return texture;
#endif
}

#if USE_SDL_TEXTURE
void draw_texture(SDL_Texture* texture, float width, float height)
#else
void draw_texture(GLuint texture, float width, float height)
#endif
{
#if USE_SDL_TEXTURE
    SDL_GL_BindTexture(texture, NULL, NULL);
#else
    glBindTexture(GL_TEXTURE_2D, texture);
#endif

    GLfloat texture_coordinates[] = {0.0f, 1.0f,
                                     0.0f, 0.0f,
                                     1.0f, 1.0f,
                                     1.0f, 0.0f};
    glTexCoordPointer(2, GL_FLOAT, 0, texture_coordinates);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    GLfloat vertices[] = {0.0f, height,
                          0.0f, 0.0f,
                          width, height,
                          width, 0.0f};
    glVertexPointer(2, GL_FLOAT, 0, vertices);
    glEnableClientState(GL_VERTEX_ARRAY);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
}

int main(int argc, char* argv[])
{
SDL_Init(SDL_INIT_VIDEO);
atexit(SDL_Quit);

IMG_Init(IMG_INIT_PNG);
atexit(IMG_Quit);

SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);

const Uint32 flags = SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN;
SDL_Window* window = SDL_CreateWindow("Foo", 0, 0,
                                      screen_width, screen_height, flags);

#if USE_SDL_TEXTURE
SDL_Renderer* renderer = SDL_CreateRenderer(window, 1, SDL_RENDERER_ACCELERATED);
#endif

SDL_GLContext context = SDL_GL_CreateContext(window);
SDL_GL_SetSwapInterval(1);

init_opengl();

#if USE_SDL_TEXTURE
    SDL_Texture* texture = load_image("character_editor_bg.png", renderer);
#else
    GLuint texture = load_image("character_editor_bg.png");
#endif

SDL_Event event;
for (;;) {
    SDL_WaitEvent(&event);
    if (event.type == SDL_QUIT)
        break;

    glClear(GL_COLOR_BUFFER_BIT);
    draw_texture(texture, screen_width, screen_height);

    SDL_GL_SwapWindow(window);
    SDL_Delay(1);
}

SDL_GL_DeleteContext(context);
SDL_DestroyWindow(window);
SDL_Quit();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:09:03.860

终于发现问题了。事实上，我`glTexImage2D`完全错误地使用了它，并且由于某种原因它在 OpenGL 1.3 中运行良好。

这是调用应该是什么：

```
 glTexImage2D(GL_TEXTURE_2D, 0, texture_format, pot_surface->w, pot_surface->h, 0,
             texture_format, GL_UNSIGNED_BYTE, pot_surface->pixels); 
```

以前，我`bpp`作为第三个参数传递，这是垃圾。

# mysql - MySQL中的自动增量varchar

> ID：14038586
> 
> 赞同：4
> 
> 时间：2012-12-26T09:35:04.817
> 
> 标签：mysql, sql, select

有没有办法在 mySql 中设置主键自动增量、varchar 类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:36:57.610

*无*。到目前为止，`AUTO_INCREMENT`只能设置为`INT`。它需要有你自己的逻辑来做到这一点。例如，

*   获取最后一个 ID
*   获取字符串中的 INT 部分
*   增加值
*   连接
*   保存到数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T06:34:26.703

根据我的经验，您可以将 Varcar ID 设为自动增量，但您必须具备逻辑……让我们说

```
 Dim crnum As String = "CR00001"
    Dim iTemp As Integer = 0

                iTemp = CInt(crnum.Substring(4, crnum.Length - 4)) '// get only the #'s from String and Convert them to Integer.
                iTemp += 1 '// increase the ID # + 1.
                crnum = crnum.Substring(0, 4) & iTemp.ToString("00000") '// set the ID back with String and #'s formatted to 5 digit #. 
```

但是你必须做你自己的逻辑，因为在你第二次运行它之后它将成为重复的主键，所以你必须考虑你的逻辑来应用你的代码。世事皆可能。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:41:35.653

AutoIncrement 字段在 mysql 中是整数。

您可以在 varchar 字段中镜像自动增量字段，并创建一个触发器，在插入/更新时更新 varchar 字段。

[创建触发器](http://dev.mysql.com/doc/refman/5.1/de/create-trigger.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:37:43.220

MySQL的重复[- 如何使用 VARCHAR 作为 AUTO INCREMENT 主键](https://stackoverflow.com/questions/3455557/mysql-how-to-use-varchar-as-auto-increment-primary-key)

根据我的观点，您必须将其更改为整数类型。由于`AUTO_INCREMENT`仅用于`INT`类型，而且将字段设置为`PRIMARY KEY`防止值重复。

# cuda - 使用 CUDA 运行时 API 检查错误的规范方法是什么？

> ID：14038589
> 
> 赞同：283
> 
> 时间：2012-12-26T09:35:49.810
> 
> 标签：cuda, error-checking

查看有关 CUDA 问题的答案和评论，以及在[CUDA 标签 wiki](https://stackoverflow.com/tags/cuda/info)中，我看到经常建议每个 API 调用的返回状态都应检查错误。API 文档包含 、 和 等函数`cudaGetLastError`，`cudaPeekAtLastError`但是`cudaGetErrorString`将它们组合在一起以可靠地捕获和报告错误而不需要大量额外代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2012-12-26T09:35:49.810

在运行时 API 代码中检查错误的最佳方法可能是定义一个断言样式处理函数和包装宏，如下所示：

```
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, const char *file, int line, bool abort=true)
{
   if (code != cudaSuccess) 
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
} 
```

然后，您可以使用宏包装每个 API 调用，该`gpuErrchk`宏将处理它包装的 API 调用的返回状态，例如：

```
gpuErrchk( cudaMalloc(&a_d, size*sizeof(int)) ); 
```

如果调用中出现错误，将发送一条描述错误的文本消息以及代码中发生错误的文件和行，`stderr`然后应用程序将退出。如果需要，您可以修改`gpuAssert`以引发异常，而不是调用`exit()`更复杂的应用程序。

第二个相关问题是如何检查内核启动中的错误，它不能像标准运行时 API 调用那样直接包装在宏调用中。对于内核，是这样的：

```
kernel<<<1,1>>>(a);
gpuErrchk( cudaPeekAtLastError() );
gpuErrchk( cudaDeviceSynchronize() ); 
```

将首先检查无效的启动参数，然后强制主机等到内核停止并检查执行错误。如果您随后有这样的阻塞 API 调用，则可以消除同步：

```
kernel<<<1,1>>>(a_d);
gpuErrchk( cudaPeekAtLastError() );
gpuErrchk( cudaMemcpy(a_h, a_d, size * sizeof(int), cudaMemcpyDeviceToHost) ); 
```

在这种情况下，`cudaMemcpy`调用可以返回内核执行期间发生的错误或来自内存副本本身的错误。这可能会让初学者感到困惑，我建议在调试期间内核启动后使用显式同步，以便更容易理解可能出现问题的位置。

请注意，在使用[CUDA Dynamic Parallelism](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#cuda-dynamic-parallelism)时，可以并且应该将非常相似的方法应用于设备内核中 CUDA 运行时 API 的任何使用，以及任何设备内核启动后：

```
#include <assert.h>
#define cdpErrchk(ans) { cdpAssert((ans), __FILE__, __LINE__); }
__device__ void cdpAssert(cudaError_t code, const char *file, int line, bool abort=true)
{
   if (code != cudaSuccess)
   {
      printf("GPU kernel assert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) assert(0);
   }
} 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-12-27T07:31:21.220

上面 talonmies 的回答是以`assert`-style 方式中止应用程序的好方法。

有时，我们可能希望在 C++ 上下文中报告错误情况并从中恢复，作为大型应用程序的一部分。

这是一个相当简洁的方法，通过抛出从`std::runtime_error`using派生的 C++ 异常`thrust::system_error`：

```
#include <thrust/system_error.h>
#include <thrust/system/cuda/error.h>
#include <sstream>

void throw_on_cuda_error(cudaError_t code, const char *file, int line)
{
  if(code != cudaSuccess)
  {
    std::stringstream ss;
    ss << file << "(" << line << ")";
    std::string file_and_line;
    ss >> file_and_line;
    throw thrust::system_error(code, thrust::cuda_category(), file_and_line);
  }
} 
```

这会将文件名、行号和英文描述`cudaError_t`合并到抛出的异常的`.what()`成员中：

```
#include <iostream>

int main()
{
  try
  {
    // do something crazy
    throw_on_cuda_error(cudaSetDevice(-1), __FILE__, __LINE__);
  }
  catch(thrust::system_error &e)
  {
    std::cerr << "CUDA error after cudaSetDevice: " << e.what() << std::endl;

    // oops, recover
    cudaSetDevice(0);
  }

  return 0;
} 
```

输出：

```
$ nvcc exception.cu -run
CUDA error after cudaSetDevice: exception.cu(23): invalid device ordinal 
```

如果需要，客户端`some_function`可以将 CUDA 错误与其他类型的错误区分开来：

```
try
{
  // call some_function which may throw something
  some_function();
}
catch(thrust::system_error &e)
{
  std::cerr << "CUDA error during some_function: " << e.what() << std::endl;
}
catch(std::bad_alloc &e)
{
  std::cerr << "Bad memory allocation during some_function: " << e.what() << std::endl;
}
catch(std::runtime_error &e)
{
  std::cerr << "Runtime error during some_function: " << e.what() << std::endl;
}
catch(...)
{
  std::cerr << "Some other kind of error during some_function" << std::endl;

  // no idea what to do, so just rethrow the exception
  throw;
} 
```

因为`thrust::system_error`is a `std::runtime_error`，如果我们不需要前面例子的精度，我们可以用同样的方式处理一大类错误：

```
try
{
  // call some_function which may throw something
  some_function();
}
catch(std::runtime_error &e)
{
  std::cerr << "Runtime error during some_function: " << e.what() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-12-09T18:58:16.583

### C++ 规范方式：不要检查错误...使用抛出异常的 C++ 绑定。

我曾经对这个问题感到厌烦；我曾经有一个宏兼包装功能解决方案，就像在 Talonmies 和 Jared 的答案中一样，但是，老实说？它使使用 CUDA 运行时 API 变得更加丑陋和类似 C。

所以我以一种不同的、更基本的方式来解决这个问题。对于结果示例，以下是 CUDA`vectorAdd`示例的一部分 - 对每个运行时 API 调用进行*完整*的错误检查：

```
// (... prepare host-side buffers here ...)

auto current_device = cuda::device::current::get();
auto d_A = cuda::memory::device::make_unique<float[]>(current_device, numElements);
auto d_B = cuda::memory::device::make_unique<float[]>(current_device, numElements);
auto d_C = cuda::memory::device::make_unique<float[]>(current_device, numElements);

cuda::memory::copy(d_A.get(), h_A.get(), size);
cuda::memory::copy(d_B.get(), h_B.get(), size);

// (... prepare a launch configuration here... )

cuda::launch(vectorAdd, launch_config,
    d_A.get(), d_B.get(), d_C.get(), numElements
);    
cuda::memory::copy(h_C.get(), d_C.get(), size);

// (... verify results here...) 
```

再次 - 检查所有潜在错误，如果发生错误则异常（警告：如果内核在启动*后*导致某些错误，它将在尝试复制结果之后被捕获，而不是之前；为确保内核成功，您将需要使用`cuda::outstanding_error::ensure_none()`命令检查启动和复制之间的错误）。

上面的代码使用我的

[**CUDA 运行时 API 库**](https://github.com/eyalroz/cuda-api-wrappers)(Github)

请注意，异常在调用失败后同时带有字符串说明和 CUDA 运行时 API 状态代码。

一些关于如何使用这些包装器自动检查 CUDA 错误的链接：

*   [抛出和捕获一堆异常的测试程序](https://github.com/eyalroz/cuda-api-wrappers/blob/master/examples/by_runtime_api_module/error_handling.cu)
*   [错误相关功能的文档](https://codedocs.xyz/eyalroz/cuda-api-wrappers/error_8hpp.html)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-12-19T15:35:20.793

[这里](https://code.google.com/p/stanford-cs193g-sp2010/wiki/TutorialWhenSomethingGoesWrong)讨论的解决方案对我来说效果很好。该解决方案使用内置的 cuda 功能，实现起来非常简单。

相关代码复制如下：

```
#include <stdio.h>
#include <stdlib.h>

__global__ void foo(int *ptr)
{
  *ptr = 7;
}

int main(void)
{
  foo<<<1,1>>>(0);

  // make the host block until the device is finished with foo
  cudaDeviceSynchronize();

  // check for error
  cudaError_t error = cudaGetLastError();
  if(error != cudaSuccess)
  {
    // print the CUDA error message and exit
    printf("CUDA error: %s\n", cudaGetErrorString(error));
    exit(-1);
  }

  return 0;
} 
```

# vba - VBA 运行时错误：清除 Excel 工作表的内容

> ID：14038595
> 
> 赞同：3
> 
> 时间：2012-12-26T09:36:06.137
> 
> 标签：vba, excel, excel-2003

我在 Excel 2003 中编写了以下 VBA 代码来清除 Excel 工作表的内容；但它显示

> 运行时错误 438：对象不支持此属性或方法

这是我的代码，

```
Application.DisplayAlerts = False
Application.ScreenUpdating = False

Set wbk = Workbooks.Open("C:\a.xls")
wbk.Sheet1.Cells.ClearContents 'Error at this line
wbk.Save
wbk.Close

Application.DisplayAlerts = True
Application.ScreenUpdating = True 
```

当excel不可见时，如果不支持**wbk.Sheet1.Cells.ClearContents** ，任何人都可以告诉我。不可见时如何清除Excel工作表的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:00:11.437

我已经使用了以下内容，现在已经解决了！

```
wbk.Sheets("Sheet1").Cells.ClearContents 
```

# actionscript-3 - 将多个现有符号链接到单个类

> ID：14038599
> 
> 赞同：0
> 
> 时间：2012-12-26T09:36:52.867
> 
> 标签：actionscript-3, flash

我在 Flash 中创建了一个包含几个不同符号的舞台，我想将它们链接到我创建的单个类。

例如，我创建了实例名称为 grid1、2、3 等的不同符号，我希望它们都链接到我创建的类 gridButton。

这可能是一个显而易见的问题，但我对 Flash 有点陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:53:00.170

符号网格 1,2,3... 继承类 gridButton。

使用 IDE，如下所示：

![在此处输入图像描述](../Images/d61bca90fdf1ca0de07c74854528e965.png)

* * *

使用 AS3，如下所示：

```
public class grid1 extends gridButton { ... 
```

# android - 在android中隐藏用于登录注销功能的Textview

> ID：14038603
> 
> 赞同：0
> 
> 时间：2012-12-26T09:37:05.330
> 
> 标签：android, textview, show-hide

我试图隐藏 textview 运行时只是因为用户登录时用户看不到注册和登录详细信息，如用户名和密码编辑框和 GO 按钮，如果用户未登录用户可以看到所有详细信息

您可以在图像中看到第一个是登录图像，第二个是注销图像

当用户登录时

![在此处输入图像描述](../Images/f0699e9bdb3f67c94b190a54c72a4e5d.png)

当用户注销时 ![在此处输入图像描述](../Images/fcc275b4754adb9a4149785bb55319cc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:38:51.520

`textView.setVisibility(View.GONE)`- 隐藏文字

`textView.setVisibility(View.VISIBLE)`- 显示文字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:42:16.403

为此使用共享首选项，第一次将用户名和密码值存储到共享首选项中，下次如果共享首选项值不为空，则使用以下代码设置可见性消失或不可见文本视图和按钮。

```
mTxtViewUserName.setVisibility(View.VISIBLE);
mTxtViewPassword.setVisibility(View.VISIBLE);
mBtnLogin.setVisibility(View.VISIBLE); 
```

对于设置可见使用下面的代码。

```
mTxtViewUserName.setVisibility(View.GONE);
mTxtViewPassword.setVisibility(View.GONE);
mBtnLogin.setVisibility(View.GONE); 
```

将价值存储到共享偏好中。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putString("isLogin", "True");
prefsEditor.commit(); 
```

从共享偏好中获取价值。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
String isLogin = myPrefs.getString("isLogin"); 
```

# linux - ping 网络范围并返回响应主机的最快方法？

> ID：14038606
> 
> 赞同：56
> 
> 时间：2012-12-26T09:37:31.143
> 
> 标签：linux, performance, bash, networking, ping

约束：
1\. 速度很重要。
2.我可以ping一次。

我正在争论是使用 Python 还是 shellscripting。有比 更快的方法`bash`吗？

这是当前的代码，

```
for ip in $(seq int1 int2); do
    ping -c 1 xxx.xxx.xxx.$ip | grep "bytes from" &
done 
```

有什么比这更快的吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-26T09:45:02.087

您应该使用 NMAP：

```
nmap -T5 -sP 192.168.0.0-255 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-02-16T17:20:57.077

以下（邪恶）代码的运行速度比 nmap 方法快两倍

```
for i in {1..254} ;do (ping 192.168.1.$i -c 1 -w 5  >/dev/null && echo "192.168.1.$i" &) ;done 
```

大约需要 10 秒，其中标准的 nmap

```
nmap -sP 192.168.1.1-254 
```

需要25秒...

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-26T09:49:31.123

试试这个以获得一个独特的列表。

`ping -c 5 -b 10.10.0.255 | grep 'bytes from' | awk '{ print $4 }' | sort | uniq`

另一种方法（获取实时主机）：

`fping -ag 192.168.1.0/24`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-10T20:02:47.190

试试这两个命令，看看为什么 arp 更快：

# 平：

对于 $(seq 1 254) 中的 ip；执行 ping -c 1 10.185.0.$ip > /dev/null; [ 美元？-eq 0 ] && echo "10.185.0.$ip UP" || : ; 完毕

# ARP：

对于 $(seq 1 254) 中的 ip；做 arp -n 10.185.0.$ip | grep 地址；[ 美元？-eq 0 ] && echo "10.185.0.$ip UP" || : ; 完毕

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-11T07:32:33.100

这是在`192.168.0.0-192.168.0.100`. 您可以根据需要更改 for 循环。

```
# -*- coding: utf-8 -*-
import socket
import os
import sys

up_ip =[] #list to store the ip-addresses of server online
for x in range(100):  #here range is 0-100\. You can change the range according to your comfort

    server_ip = '192.168.0.'+ str(x)
    print "Trying ,server_ip,... \n"

    rep = os.system('ping -c 1 ' + server_ip)

    if rep == 0:
        up_ip.append(server_ip)
        print '******************* Server Is Up **************** \n'
    else:
        print 'server is down \n'

print up_ip 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T13:33:58.227

此脚本在 Windows 上的 Git Bash (MINGW64) 上运行，并根据 ping 结果返回一条消息。

```
#!/bin/bash
#$1 should be something like "19.62.55"

if [ -z "$1" ]
  then
    echo "No identify of the network supplied, i.e. 19.62.55"
else
    ipAddress=$1

    for i in {1..256} ;do 
    (
        {
        ping -w 5 $ipAddress.$i ; 
        result=$(echo $?);
        } &> /dev/null

        if [ $result = 0 ]; then
            echo Successful Ping From : $ipAddress.$i
        else
            echo Failed Ping From : $ipAddress.$i
        fi &);
    done

fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-13T20:38:22.063

BSD的

对于我在 $(seq 1 254); 做 (ping -c1 -W5 192.168.1.$i >/dev/null && echo "192.168.1.$i" &) ; 完成

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-19T06:11:11.367

如果时间很重要（我知道这种感觉）：

```
for i in {1..254}; do
echo -n -e "$i      \r"     
timeout --preserve-status .2  ping -c1 -q 10.0.0.$i  &> /dev/null
[ $? -eq 0 ]&&echo 10.0.0.$i is happy to serve to his master!
done # as I am 
```

命令：

```
timeout --preserve-status .2  ping -c1 -q 10.0.0.107 &> /dev/null  ;echo $? 
```

返回 143 与不存在的 PC 和 0 与现有的 PC 并仅等待答案仅 0.2 秒，因为时间很重要！因此，我现在必须寻找丢失的钥匙。

# python - Django：Django查询集中的两个或更多过滤器

> ID：14038608
> 
> 赞同：0
> 
> 时间：2012-12-26T09:37:42.283
> 
> 标签：python, django, django-models, django-queryset

我想在我的 django 查询集中应用两个过滤器

我正在尝试做

```
 get.archived:get_meetings = Meeting.objects.filter(created_by = user_id.id).filter(date_created__lte = datetime.date.today()[index:limit] 
```

但我收到语法错误。

我也尝试过`Q` ，但在这里我找不到 and like 声明，或者请帮助我如何在 django 中实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:44:32.007

您在`)`之后缺少最后的右括号`datetime.date.today()`，这应该可以。

```
get_meetings = Meeting.objects.filter(created_by = user_id.id).filter(date_created__lte = datetime.date.today())[index:limit] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:40:23.353

只需将两个过滤器放在一起，

```
get_meetings = Meeting.objects.filter(created_by = user_id.id, date_created__lte = datetime.date.today())[index:limit] 
```

# javascript - Skyscanner 之类的 Javascript 日历

> ID：14038611
> 
> 赞同：2
> 
> 时间：2012-12-26T09:37:52.767
> 
> 标签：javascript, jquery, datepicker

我正在寻找像 Javascript 日历这样的 Skyscanner（如果可能，由 jQuery 驱动）。jQuery UI 不适合我的需求，因为它不是很灵活。

例如，我需要添加按钮（例如 Skyscanner）来选择下一个周末。另外，我想将它们放在日历网格的顶部。

![Skyscanner 日历](../Images/32146b99579caaf44b3016cfd4f6061b.png)

我最近搜索了很多，一无所获。

有什么想法可以分享吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:55:06.373

虽然不是基于 jQuery，但我真的很喜欢并建议[Kalendae](https://github.com/ChiperSoft/Kalendae)：

![在此处输入图像描述](../Images/056d41478c47b77c17930b83abc12cfe.png)

另一个具有所有功能（如月份和年份选择等，但不是确切的 UI）是[JSCal2](http://www.dynarch.com/projects/calendar/)，尽管我认为它不是完全免费的 - 请查看他们的网站。

而且[Zebra](http://stefangabos.ro/jquery/zebra-datepicker/)也不错，功能齐全且简约，并且基于 jQuery。

我认为您找不到像 Skyscanner 这样具有精确设计的日期选择器，因此您可以查看最适合哪个可用的日期选择器。

编辑：关于向日历添加按钮的简单方法：请参阅此问题“ [jquery datepicker added custom button](https://stackoverflow.com/questions/9894032/jquery-datepicker-adding-custom-button) ”；还有一个 jsfiddle 在其中引用了一个示例。请注意，此示例使用 jQuery 的 Datepicker。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T09:37:10.343

我以迂回的方式解决了这个问题。

**beforeShowDay** 我将日期作为一个类添加到每个日历项，即“date-YYYYMMDD”如果填充了日期数组，则添加一个附加类“preSelectedDay”

**beforeShow** 我用我的新按钮在日期选择器周围动态包装一个容器，从日期选择器中抓取样式并将其应用到它

**input.focusin** 然后我向 datepicker 添加一个 css 类来覆盖内联样式，因为这现在由包装器处理。

**button.hover** 按钮通过操作 DOM 并添加“selectedDay”类来悬停突出显示日期

**button.click** 然后日期数组查找第一个和最后一个类“selectedDay”并通过抓取我们之前添加的日期“date-YYYYMMDD”来填充数组

我在这里创建了一个演示 - [http://www.darrencousins.com/lab/jqueryui-datepicker-skyscanner/](http://www.darrencousins.com/lab/jqueryui-datepicker-skyscanner/)

（请忽略样式）

干杯

# php - 如何使用soapclient将soap xml序列化为对象PHP

> ID：14038614
> 
> 赞同：1
> 
> 时间：2012-12-26T09:38:01.493
> 
> 标签：php, soap-client

目前，我能够向端点发送一个肥皂请求并使用 SoapClient 获取序列化的标准类对象的响应结果。(PHP5)

我在这里有一个问题，如果我有一个物理 xml 文件（soap 响应文件）并且我想将它序列化回 std 类对象。有什么例子或方法可以做到这一点吗？

# dart - Dart 可以绑定到 id 属性吗？

> ID：14038618
> 
> 赞同：2
> 
> 时间：2012-12-26T09:38:27.350
> 
> 标签：dart, dart-webui

我需要从 a 生成单选按钮输入列表`List`，并将`<label for="xx">`标签链接到`<input>`，每个都需要自己的 id。

但似乎 Dart 无法绑定到 id 属性：

```
<div id="{{s}}">
  <p id="text">{{s}}</p> <!-- Works as expected -->
</div> 
```

以上导致错误：

> 错误：第 40 行 pos 22：非法使用类名 'DivElement' autogenerated_html.DivElement __{{s}};

所以我的问题是：Dart 可以绑定到 id 属性吗？如果可以，如何绑定？

还有一个替代问题：是否有另一种方法可以使用 web_ui 生成带有标签的单选按钮输入列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:57:33.820

我将尝试回答您的替代问题。您可以创建一对元素 - 单选按钮输入和标签 - 并根据需要附加到 DOM。要创建“男性”和“女性”按钮，您可以这样做：

```
var button1 = new RadioButtonInputElement();
button1.name = "sex";
button1.value = "male";
button1.attributes['id'] = "sex_male";
var button1_label = new LabelElement();
button1_label.attributes['for'] = button1.id;
button1_label.text="Male";

var button2 = new RadioButtonInputElement();
button2.name = "sex";
button2.value = "female";
button2.attributes['id'] = "sex_female";
var button2_label = new LabelElement();
button2_label.attributes['for'] = button2.id;
button2_label.text="Female"; 
```

用于`new RadioButtonInputElement()`创建无线电输入；用于`new LabelElement()`创建随附的标签。

这段代码不是特别干燥；如果您要生成很多这些，您可能希望将其重构为一个函数。像这样的东西：

```
List createButtonWithLabel(name, value) {
  var button = new RadioButtonInputElement();

  button.name = name;
  button.value = value;
  button.attributes['id'] = "${name}_${value}";
  var label = new LabelElement();
  label.attributes['for'] = button.id;
  label.text=value.toUpperCase();
  return [button, label];
} 
```

然后像这样使用它：

```
var form = new FormElement();  
form.nodes.addAll(createButtonWithLabel('sex', 'male'));
form.nodes.addAll(createButtonWithLabel('sex', 'female'));
query('body').nodes.add(form); 
```

这应该会给你一个带有 2 个单选按钮的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:50:35.280

如您的示例所示，web ui 编译器以非常特殊的方式使用 ID。编译器假定它们是字符串常量，并使用它们来生成字段和局部变量名称，并在生成的代码中查询元素。

我会说这是一个错误/功能请求，应该在 web_ui 中以某种方式解决。您可以在此处关注此问题的进展：[https ://github.com/dart-lang/web-ui/issues/284](https://github.com/dart-lang/web-ui/issues/284)

# jquery - 当我单击那里的按钮时，如何通过 jquery 创建弹出窗口到外部页面并从中获取值到父页面？

> ID：14038619
> 
> 赞同：1
> 
> 时间：2012-12-26T09:38:30.803
> 
> 标签：jquery, popupwindow

当我单击那里的按钮时，如何通过 jquery 创建弹出窗口到包含表单的外部页面并从该外部页面获取值到父页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:39:55.680

有很多插件适合你。所以看看

1.  [jQuery UI 对话框](http://jqueryui.com/dialog/#modal-form)
2.  [花式盒子](http://fancybox.net/)
3.  [彩盒](http://www.jacklmoore.com/colorbox)
4.  [灯箱](http://leandrovieira.com/projects/jquery/lightbox/)
5.  [厚盒 - 过时](http://thickbox.net/)

[还有 Google 在 Stack Over Flow 中](https://www.google.com/search?q=using%20webrequest%20asp.net&oq=using%20webrequest%20asp.net&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=en&tbo=d&sclient=psy-ab&q=site%20stackoverflow.com%20jquery%20popup&oq=site%20stackoverflow.com%20jquery%20pop&gs_l=serp.3.0.33i21.749204.751124.6.752692.10.10.0.0.0.0.320.2634.2-9j1.10.0.les;..0.0...1c.1.756ksFfCRvI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=8d44242ae547b3f7&bpcl=38625945&biw=1280&bih=935)

为了从弹出窗口中获取一个值到孩子

在父页面中

```
 function SetPopUpData(val){

   //your logic here
  } 
```

在弹出页面中

```
 function SendDataToParent(){
  var data='some value';

  window.parent.SetPopUpData(data); // this will call the parent page's function
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:42:21.757

1.  要创建弹出菜单，请使用 Fancy Box 插件。
2.  要从外部页面获取值，请使用 AJAX 发送请求并异步接收响应。

# sql-server-2008 - 当 DataGridView Dropdown 改变值时

> ID：14038625
> 
> 赞同：0
> 
> 时间：2012-12-26T09:39:01.617
> 
> 标签：sql-server-2008, vb.net-2010

我想向你们寻求有关数据网格的帮助。

当我从我的datagridview中的下拉列表中选择一个值时，我如何从数据库中加载或获取其数据并将其放在旁边的datagrid中

示例当我选择一个项目代码时，所有列都必须填写与项目代码对应的数据。

![在此处输入图像描述](../Images/1783573a6907ca199634a6790a698130.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:45:25.113

由于您的问题是通用的，因此您可以遵循以下理论答案：

使用下拉列表的`SelectedIndexChanged`事件将选定的值传递给数据库。从数据库中检索与该值对应的值并将它们填充到`DataSet`. 将此 DataSet 用作 GridView 的数据源。您甚至可以使用`Datareader`代替数据集。

# codeigniter - Codeigniter 日历 - 如何在同一页面上显示 2 个月的日历？

> ID：14038628
> 
> 赞同：3
> 
> 时间：2012-12-26T09:39:12.507
> 
> 标签：codeigniter

大家好，感谢您花时间阅读我的问题。

我正在尝试创建一个事件日历，用户可以在其中将数据输入日历。

如何在同一页面上显示两个月的日历（例如并排显示 2012 年 12 月和 2013 年 1 月，而不是通过链接显示。）

我从[http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-the-calendar-library/获得了我的代码](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-the-calendar-library/)

很感谢任何形式的帮助。=)

```
//CONTROLLER 
```

Mycal 类扩展 CI_Controller {

```
public function index() {
    $this->display();
}

function display($year = null, $month = null){

    if (!$year) {
        $year = date('Y');
    }
    if (!$month) {
        $month = date('m');
    }

    $this->load->model('Mycal_model');

    if($day = $this->input->post('day')){
        $this->Mycal_model->add_calendar_data(
            "$year-$month-$day",
            $this->input->post('data')
        );
    }

    $data['calendar'] = $this->Mycal_model->generate($year, $month);

    $this->load->view('mycal_view', $data); 
} 
```

}

//模型

类 Mycal_model 扩展 CI_Model{

```
function get_calendar_data($year, $month){

    $query = $this->db->select('date, data')->from('calendar')
        ->like('date', "$year-$month", 'after')->get();

    $cal_data = array();

    foreach ($query->result() as $row){
        $cal_data[substr($row->date,8,2)] = $row->data;
    }

    return $cal_data;
}

function add_calendar_data($date, $data){

    if($this->db->select('date')->from('calendar')
        ->where('date', $date)->count_all_results()) {

        $this->db->where('date', $date)->update('calendar', array(
            'date'=>$date,
            'data'=>$data
        ));

    }else{

        $this->db->insert('calendar', array(
            'date'=>$date,
            'data'=>$data
        ));
    }
}

function generate ($year, $month){

    $this->load->library('calendar', $this->conf);
    $cal_data = $this->get_calendar_data($year, $month);    
    return $this->calendar->generate($year, $month, $cal_data)      
}

function generate ($year, $month){
// to generate 2nd calendar for the next month?     
    $this->load->library('calendar', $this->conf);
    $cal_data = $this->get_calendar_data($year, $month+1);  
    return $this->calendar->generate($year, $month+1, $cal_data)        
} 
```

//看法

```
<?php echo $calendar; ?>

// to generate 2nd calendar for the next month? 
<?php echo $calendar2; ?>

<script type="text/javascript">
$(document).ready(function() {
    $('.calendar .day').click(function() {
        day_num = $(this).find('.day_num').html();
        day_data = prompt('Enter Stuff', $(this).find('.content').html());

        if(day_data !=null){

            $.ajax({
                url: window.location,
                type: 'POST',
                data: {
                    day: day_num,
                    data: day_data
                },
                success: function(msg){
                    location.reload();
                }
            });

        }

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:32:33.140

我以前没有使用过 ci 日历，但是将两个月的时间变成一页应该很简单。

您需要为日历创建一个两页布局，例如：

**查看 two_page_calendar.php**

```
<div id="month1">
<?=$month1; ?>
</div>

<div id="month2">
<?=$month2; ?>
</div> 
```

然后，我将更改您的显示功能以将显示作为数据返回。例如

```
function build_display($year = null, $month = null){

    if (!$year) {
        $year = date('Y');
    }
    if (!$month) {
        $month = date('m');
    }

    $this->load->model('Mycal_model');

    if($day = $this->input->post('day')){
        $this->Mycal_model->add_calendar_data(
            "$year-$month-$day",
            $this->input->post('data')
        );
    }

    $data['calendar'] = $this->Mycal_model->generate($year, $month);

    $calendar_view = $this->load->view('mycal_view', $data, true);
    return $calendar_view;
} 
```

现在您可以调用每个月的 build display 并将其加载到您的组合视图中：

```
public function index() {
    $month2_year = date("Y",strtotime("+1 month"));
    $month2_month = date("m",strtotime("+1 month"));
    $cal_data['month1'] = $this->build_display();
    $cal_data['month2'] = $this->build_display($month2_year, $month2_month);
    $this->load->view('two_page_calendar', $cal_data);
} 
```

我还没有尝试过，但它应该可以工作，你必须改变一些方法才能让它们正常工作，例如日历分页。

**注意** 你不应该在模型中重复这样的代码，而且你当然不能在任何类中拥有两个同名的方法（删除重复的生成方法），整个目的是将年份和月份参数传递给该方法以便它可以在任何年/月重复使用

# jquery - jquery自动完成与jsp json

> ID：14038630
> 
> 赞同：1
> 
> 时间：2012-12-26T09:39:19.813
> 
> 标签：jquery, autocomplete

我正在尝试在我的网站上使用[http://jqueryui.com/autocomplete/#multiple-remote](http://jqueryui.com/autocomplete/#multiple-remote)，但我无法让它给出正确的结果。

我的 HTML 是：

```
<input id="movies-text" size="50" /> 
```

我的 Jquery 代码是：

```
$('#movies-text').autocomplete({
    minLength:3,
    source:function(request,response){
        $.getJSON('searchmovies.jsp',{q:request.term},function(result){
            response($.map(result,function(item){
                return item.value;
            }));
        });
    }
}); 
```

searchmovies.jsp 看起来像这样：

```
<%@ page contentType="application/json" language="java" import="java.sql.*" errorPage="" %>
<%
   response.setContentType("application/json");
   response.setHeader("Content-Disposition", "inline");
%>

[
    {"value":"Pulp fiction"},
    {"value":"The hobbit"},
    {"value":"Apocalypse Now"},
    {"value":"As good as it gets"},
    {"value":"Annie hall"},
    {"value":"Butch Cassidy and the sundance kid"},
    {"value":"Terminator"}
] 
```

无论我输入什么，它都会给出下拉列表中的所有值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:10:57.610

对于您的情况，您有两种选择，

**选项1：根据请求项填充json（最佳方法）**

您的 jsp 响应应该与查询字符串匹配，在这里您盲目地将所有值填充为响应，但它应该基于您的请求字符串。

例如，

如果您的输入字符串是“Pulp”，那么您的 jsp 应该只返回，

```
 [{"value":"Pulp fiction"}} 
```

没有什么可抱怨 jQuery 的工作基于其性质，您需要调整您的服务器端 json 以根据您的输入查询生成输出。

**选项2：向整个填充的对象添加过滤器**

考虑这个例子 test.html，

```
<html>
<head>
    <title>jQuery UI Autocomplete - Remote Data functionality with Filter</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script>

function loadData(){
    var movie_elements;
    $('#movies-text').autocomplete({
        minLength:3,
        source:function(request,response){
           $.getJSON('searchmovies.jsp',{q:request.term},function(result){
            movie_elements = $.map(result,function(item){return item.value;});
            response( $.ui.autocomplete.filter(movie_elements, extractLast( request.term ) ) );
           });
        }
    });
}

function split( val ) {
            return val.split( /,\s*/ );
        }

function extractLast( term ) {
            return split( term ).pop();
        }
    </script>
</head>
<body onload="loadData();">
<input id="movies-text" size="50" />
</body>
</html> 
```

选择最适合您的那个。

# jquery - jQuery：jqPrint 输出一个 作为可滚动的

> ID：14038632
> 
> 赞同：1
> 
> 时间：2012-12-26T09:39:23.370
> 
> 标签：jquery, jqprint

我尝试使用 jqPrint 打印一个 div。打印的所有内容都很好，但滚动条出现在打印的所有页面中。

是否需要提供/添加任何 CSS 更正或参考？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:11:33.343

试试这个示例 [示例](http://jsfiddle.net/v6K58/) 在这里您可以不滚动打印

```
$(function() {
    $( "#printMe" ).click(function() {
        $('#header').jqprint();

    });
});​ 
```

# .net - 确定回复的消息是否包含 .Net Remoting Channel IMessageSink 中的异常

> ID：14038646
> 
> 赞同：0
> 
> 时间：2012-12-26T09:40:37.920
> 
> 标签：.net, exception, remoting, channel

我正在做一个 .Net Remoting 项目。我想监视远程调用和返回值或可能的异常。我实现了 IMessageSink

```
 Public Function SyncProcessMessage(ByVal msg As System.Runtime.Remoting.Messaging.IMessage) As System.Runtime.Remoting.Messaging.IMessage Implements System.Runtime.Remoting.Messaging.IMessageSink.SyncProcessMessage

        Dim replyMsg As IMessage = _NextMessageSink.SyncProcessMessage(msg)

        if {ReplyMsg Contains Exception of type a} then 
            do something
        else if {ReplyMsg Contains Exception of type b} then 
            do someshing else
        End If

        Return replyMsg
    End Function 
```

当服务抛出异常时，ReplyMsg 只包含 LogicalCallContext。我怎样才能找到异常类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:13:07.487

我不确定您的_NextMessageSink 是什么类型，但是如果我查看BinaryClientFormatterSink，它将在ReturnMessage 中包含任何异常。ReturnMessage 实现提供 Exception 属性的 IMethodReturnMessage。因此，以下可能会起作用：

```
IMethodReturnMessage returnMessage = replyMsg as IMethodReturnMessage;
if (returnMessage != null)
{
    Exception exception = returnMessage.Exception;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T07:44:49.317

因为以下代码是我的情况。您必须取消框“replyMsg”以检查异常与否。

```
ReturnMessage replyMsgEntity = replyMsg as ReturnMessage;
if(replyMsgEntity != null && replyMsgEntity.Exception != null)
{
    //# TRACE-EXCEPTION....
} 
```

# blackberry - 黑莓类演员异常

> ID：14038648
> 
> 赞同：0
> 
> 时间：2012-12-26T09:40:56.717
> 
> 标签：blackberry, java-me, classcastexception

我的代码中有一个类转换异常。我在添加标签字段时使用 Richlist，它给了我一个类转换异常。如何解决这个问题？

```
RichList list = new RichList(vfm, true,2, 1); 
list.add(new Object[]  {
    new BitmapField((arrow),Field.FIELD_RIGHT), 
    new LabelField(ModelController.getInstance().getJsonArrayGroup().getJSONObject(counter).getString("name")){
        protected void paint(Graphics g) {
            g.setColor(0x0511a0a); 
            super.paint(g);
        }
    },
    "",  
    new SeparatorField()}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:22:37.310

请参阅[blackberry.com 上的 RichList 示例文档](http://docs.blackberry.com/en/developers/deliverables/18125/Rich_list_1228594_11.jsp)。

尽管该`add()`方法的 API 需要一个 数组`Object`，但实际上，它希望您传递它`Bitmap`和`String`对象。

也许是这样的，对你来说：

```
list.add(new Object[] { arrow, 
                        ModelController.getInstance().getJsonArrayGroup().getJSONObject(counter).getString("name"),
                        "" }); 
```

# java - Java SneakyThrow of exceptions，类型擦除

> ID：14038649
> 
> 赞同：24
> 
> 时间：2012-12-26T09:40:57.233
> 
> 标签：java, scjp, lombok, ocpjp

有人可以解释这段代码吗？

```
public class SneakyThrow {

  public static void sneakyThrow(Throwable ex) {
    SneakyThrow.<RuntimeException>sneakyThrowInner(ex);
  }

  private static <T extends Throwable> T sneakyThrowInner(Throwable ex) throws T {
    throw (T) ex;
  }

  public static void main(String[] args) {
    SneakyThrow.sneakyThrow(new Exception());
  }

} 
```

这可能看起来很奇怪，但这不会产生强制转换异常，并且允许抛出已检查的异常而无需在签名中声明它，或者将其包装在未检查的异常中。

请注意，无论是`sneakyThrow(...)`或 main 都没有声明任何已检查的异常，但输出是：

```
Exception in thread "main" java.lang.Exception
    at com.xxx.SneakyThrow.main(SneakyThrow.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

这个 hack 在 Lombok 中使用，带有注解 @SneakyThrow，它允许在不声明的情况下抛出已检查的异常。

* * *

我知道它与类型擦除有关，但我不确定是否理解黑客的每个部分。

* * *

**编辑：** 我知道我们可以`Integer`在 a中插入一个`List<String>`检查/未检查异常的区别是编译时功能。

当从非泛型类型`List`转换为泛型类型`List<XXX>`时，编译器会产生警告。`(T) ex`但是像上面的代码那样直接转换为泛型类型不太常见。

如果您愿意，对我来说似乎很奇怪的部分是，我理解在 JVM 内部 a`List<Dog>`和`List<Cat>`看起来一样，但上面的代码似乎意味着最终我们也可以将 Cat 类型的值赋给 Dog 类型的变量或类似的东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-26T09:45:40.333

如果你编译它，`-Xlint`你会得到一个警告：

```
c:\Users\Jon\Test>javac -Xlint SneakyThrow.java
SneakyThrow.java:9: warning: [unchecked] unchecked cast
    throw (T) ex;
              ^
  required: T
  found:    Throwable
  where T is a type-variable:
    T extends Throwable declared in method <T>sneakyThrowInner(Throwable)
1 warning 
```

这基本上是说“在执行时并没有*真正*检查这个演员”（由于类型擦除） - 所以编译器不情愿地假设你在做正确的事情，因为它知道它实际上不会被检查。

现在只有*编译器*关心已检查和未检查的异常——它根本不是 JVM 的一部分。所以一旦你通过了编译器，你就可以回家了。

我强烈建议您避免这样做。

在许多情况下，当您使用泛型时会进行“真正的”检查，因为某些东西使用了所需的类型——但情况并非*总是*如此。例如：

```
List<String> strings = new ArrayList<String>();
List raw = strings;
raw.add(new Object()); // Haha! I've put a non-String in a List<String>!
Object x = strings.get(0); // This doesn't need a cast, so no exception... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-26T10:07:44.690

> 上面的代码似乎意味着最终我们还可以将 Cat 类型的值赋给 Dog 类型的变量或类似的东西。

您必须考虑类的结构。`T extends Throwable`你正在传递`Exception`给它。这就像分配`Dog`给`Animal`not `Dog`to `Cat`。

基于继承，编译器有关于检查哪些 Throwable 和哪些不检查的规则。这些是在编译时应用的，并且可能会混淆编译器以允许您抛出检查异常。在运行时，这没有影响。

* * *

检查异常是编译时特性（如泛型）

BTW Throwable 也是一个*检查*异常。如果您对它进行子类化，它将被检查，除非它是 Error 或 RuntimeException 的子类。

另外两种在编译器不知道您正在执行此操作的情况下引发检查异常的方法。

```
Thread.currentThread().stop(throwable);

Unsafe.getUnsafe().throwException(throwable); 
```

唯一的区别是两者都使用本机代码。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-12T21:30:14.640

从 Java 8 开始，`sneakyThrowInner`不再需要辅助方法。 `sneakyThrow`可以写成：

```
@SuppressWarnings("unchecked")
static <T extends Throwable> RuntimeException sneakyThrow(Throwable t) throws T {
    throw (T)t;
} 
```

请参阅“ [Java 8 中异常类型推断的特殊特性](https://stackoverflow.com/q/31316581/3690024)”一文。

> sneakyThrow 的 T 被推断为 RuntimeException。这可以从关于类型推断的语言规范（[http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html](http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html)）中遵循

注意：该`sneakyThrow`函数声明为 return `RuntimeException`，因此可以按如下方式使用：

```
int example() { 
   if (a_problem_occurred) {
      throw sneakyThrow(new IOException("An I/O exception occurred"));
      // Without the throw here, we'd need a return statement!
   } else {
      return 42;
   }
} 
```

通过抛出`RuntimeException`返回的 by `sneakyThrow`，Java 编译器知道该执行路径终止。（当然，`sneakyThrow`它本身不会返回。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-22T14:06:30.467

让我们看看下面的代码：

```
public class SneakyThrow {

  public static void sneakyThrow(Throwable ex) {
    SneakyThrow.<RuntimeException>sneakyThrowInner(ex);
  }

  private static <T extends Throwable> T sneakyThrowInner(Throwable ex) throws T {
    throw (T) ex;
  }

  public static void main(String[] args) {
    SneakyThrow.sneakyThrow(new Exception());
  }

} 
```

让我们看看它为什么会这样。

首先，任何转换为​​编译器忽略的类型参数。JVM会直接转换它。因此，`throw (T) ex;`编译器不会检查类型安全性。但是，当代码到达 JVM 时，就会发生类型擦除。因此代码将类似于： [注意：实际代码将是字节码。下面只是解释类型擦除的作用。]

```
public class SneakyThrow {

    public static void sneakyThrow(Throwable ex) {
        SneakyThrow.sneakyThrowInner(ex); // Note : Throwable is checked exception but we don't mention anything here for it
    }

    private static  Throwable sneakyThrowInner(Throwable ex) throws Throwable {
        throw (Throwable) ex;
    }

    public static void main(String[] args) {
        SneakyThrow.sneakyThrow(new Exception());

    }

} 
```

首先要注意的是每件事都会顺利进行，并且不会抛出 ClassCastException，因为 JVM 很容易将类型`ex`转换为`Throwable`.

这里要注意的第二件事是编译器总是强迫我们捕获或传递收到的检查异常。JVM 不进行此类检查。在这里，在我们类型转换之后，理想情况下，`SneakyThrow.sneakyThrowInner(ex);`应该强制处理`Throwable`异常，但请记住，这个版本的字节码到达 JVM。因此，我们以某种方式欺骗了编译器。

这样做：

```
public class SneakyThrow {

    public static void sneakyThrow(Throwable ex) {
        SneakyThrow.<RuntimeException>sneakyThrowInner(ex);
    }

    private static <T extends Throwable> T sneakyThrowInner(Throwable ex) throws T {
        throw (T) ex;
    }

    public static void main(String[] args) {
        try {
            SneakyThrow.sneakyThrow(new Exception());
        }catch (Throwable ex){
            System.out.println("Done Succesfully"); // Added to show everything runs fine
        }
    }

} 
```

输出：成功完成

# flash - Actionscript 3.0 TypeError：错误 #1009：无法访问空对象引用的属性或方法

> ID：14038653
> 
> 赞同：-1
> 
> 时间：2012-12-26T09:41:12.807
> 
> 标签：flash, actionscript, typeerror

我是 Flash 的初学者，目前我遇到了问题。我在做一个游戏，就像太空入侵者。一开始还不错 但是，当角色击中敌人时，它提示我错误。

类型错误：

> 错误 #1009：无法访问空对象引用的属性或方法。在 _fla::MainTimeline/frame1126() 在 flash.display::MovieClip/gotoAndStop() 在 Enemy/eFrame()

我不知道它有什么问题。谁能帮我？

这是我的时间线的来源

```
stop();
//these booleans will check which keys are down
var leftDown:Boolean = false;
var upDown:Boolean = false;
var rightDown:Boolean = false;
var downDown:Boolean = false;
//how fast the character will be able to go
var mainSpeed:int = 5;
//how much time before allowed to shoot again
var cTime:int = 0;
//the time it has to reach in order to be allowed to shoot (in frames)
var cLimit:int = 12;
//whether or not the user is allowed to shoot
var shootAllow:Boolean = true;
//how much time before another enemy is made
var enemyTime:int = 0;
//how much time needed to make an enemy
//it should be more than the shooting rate
//or else killing all of the enemies would
//be impossible :O
var enemyLimit:int = 16;
//the player's score
var score:int = 0;
//this movieclip will hold all of the bullets
var bulletContainer:MovieClip = new MovieClip();
addChild(bulletContainer);
//whether or not the game is over
var gameOver:Boolean = false;

//adding a listener to mcMain that will move the character
mcMain.addEventListener(Event.ENTER_FRAME, moveChar);
function moveChar(event:Event):void{
    //checking if the key booleans are true then moving
    //the character based on the keys
    if(leftDown){
        mcMain.x -= mainSpeed;
    }
    if(upDown){
        mcMain.y -= mainSpeed;
    }
    if(rightDown){
        mcMain.x += mainSpeed;
    }
    if(downDown){
        mcMain.y += mainSpeed;
    }
    //keeping the main character within bounds
    if(mcMain.x <= 0){
        mcMain.x += mainSpeed;
    }
    if(mcMain.y <= 0){
        mcMain.y += mainSpeed;
    }
    if(mcMain.x >= stage.stageWidth - mcMain.width){
        mcMain.x -= mainSpeed;
    }
    if(mcMain.y >= stage.stageHeight - mcMain.height){
        mcMain.y -= mainSpeed;
    }
    //Incrementing the cTime

    //checking if cTime has reached the limit yet
    if(cTime < cLimit){
        cTime ++;
    } else {
        //if it has, then allow the user to shoot
        shootAllow = true;
        //and reset cTime
        cTime = 0;
    }

    //adding enemies to stage
    if(enemyTime < enemyLimit){
        //if time hasn't reached the limit, then just increment
        enemyTime ++;
    } else {
        //defining a variable which will hold the new enemy
        var newEnemy = new Enemy();
        //making the enemy offstage when it is created
        newEnemy.y = -1 * newEnemy.height;
        //making the enemy's x coordinates random
        //the "int" function will act the same as Math.floor but a bit faster
        newEnemy.x = int(Math.random()*(stage.stageWidth - newEnemy.width));
        //then add the enemy to stage
        addChild(newEnemy);
        //and reset the enemyTime
        enemyTime = 0;
    }
    //updating the score text
    txtScore.text = 'Score: '+score;
}
//this listener will listen for down keystrokes
stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown);
function checkKeysDown(event:KeyboardEvent):void{
    //making the booleans true based on the keycode
    //WASD Keys or arrow keys
    if(event.keyCode == 37 || event.keyCode == 65){
        leftDown = true;
    }
    if(event.keyCode == 38 || event.keyCode == 87){
        upDown = true;
    }
    if(event.keyCode == 39 || event.keyCode == 68){
        rightDown = true;
    }
    if(event.keyCode == 40 || event.keyCode == 83){
        downDown = true;
    }

    //checking if the space bar is pressed and shooting is allowed
    if(event.keyCode == 32 && shootAllow){
        //making it so the user can't shoot for a bit
        shootAllow = false;
        //declaring a variable to be a new Bullet
        var newBullet:Bullet = new Bullet();
        //changing the bullet's coordinates
        newBullet.x = mcMain.x + mcMain.width/2 - newBullet.width/2;
        newBullet.y = mcMain.y;
        //then we add the bullet to stage
        bulletContainer.addChild(newBullet);
    }
}
//this listener will listen for keys being released
stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysUp);
function checkKeysUp(event:KeyboardEvent):void{
    //making the booleans false based on the keycode
    if(event.keyCode == 37 || event.keyCode == 65){
        leftDown = false;
    }
    if(event.keyCode == 38 || event.keyCode == 87){
        upDown = false;
    }
    if(event.keyCode == 39 || event.keyCode == 68){
        rightDown = false;
    }
    if(event.keyCode == 40 || event.keyCode == 83){
        downDown = false;
    }
} 
```

这是来自 ENEMY 的源代码。

```
//This is the basic skeleton that all classes must have
package{
    //we have to import certain display objects and events
    import flash.display.MovieClip;
    import flash.events.*;
    //this just means that Enemy will act like a MovieClip
    public class Enemy extends MovieClip{
        //VARIABLES
        //this will act as the root of the document
        //so we can easily reference it within the class
        private var _root:Object;
        //how quickly the enemy will move
        private var speed:int = 5;
        //this function will run every time the Bullet is added
        //to the stage
        public function Enemy(){
            //adding events to this class
            //functions that will run only when the MC is added
            addEventListener(Event.ADDED, beginClass);
            //functions that will run on enter frame
            addEventListener(Event.ENTER_FRAME, eFrame);
        }
        private function beginClass(event:Event):void{
            _root = MovieClip(root);
        }

        private function eFrame(event:Event):void{
            //moving the bullet up screen
            y += speed;
            //making the bullet be removed if it goes off stage
            if(this.y > stage.stageHeight){
                removeEventListener(Event.ENTER_FRAME, eFrame);
                _root.removeChild(this);
            }

            //checking if it is touching any bullets
            //we will have to run a for loop because there will be multiple bullets
            for(var i:int = 0;i<_root.bulletContainer.numChildren;i++){
                //numChildren is just the amount of movieclips within 
                //the bulletContainer.

                //we define a variable that will be the bullet that we are currently
                //hit testing.
                var bulletTarget:MovieClip = _root.bulletContainer.getChildAt(i);

                //now we hit test
                if(hitTestObject(bulletTarget)){
                    //remove this from the stage if it touches a bullet
                    removeEventListener(Event.ENTER_FRAME, eFrame);
                    _root.removeChild(this);
                    //also remove the bullet and its listeners
                    _root.bulletContainer.removeChild(bulletTarget);
                    bulletTarget.removeListeners();
                    //up the score
                    _root.score += 5;
                }
            }

            //hit testing with the user
            if(hitTestObject(_root.mcMain)){
                //losing the game
                _root.gameOver = true;
                _root.gotoAndStop('lose');
            }

            if(_root.gameOver){
                removeEventListener(Event.ENTER_FRAME, eFrame);
                this.parent.removeChild(this);
            }
        }
        public function removeListeners():void{
            this.removeEventListener(Event.ENTER_FRAME, eFrame);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:10:59.343

您的脚本中有几个设计错误：

*   不要为 root 创建一个字段，因为它不仅是多余的，而且会导致糟糕的设计。此外，删除剪辑时您不会清理（这与删除的内容不同）。
*   _root 可以为空，因为如果我没记错的话，在将 DisplayObject 添加到 DisplayObjectContainer 时也会调度 Event.ADDED。
*   为每个 Enemy 注册一个 Event.ENTER_FRAME 处理程序。这可能会导致性能问题和 spagetti 代码 - 让容器处理其子级（在您的特定上下文中搜索游戏循环）。

当孩子想要移除自己时，我建议实施一种安全的移除方法。

```
function remove():void {
  if (parent) parent.removeChild(this); // otherwise an run time error might be thrown
} 
```

以及关于 eFrame 中引发的错误。真的很难说，什么是空：

*   阶段：仅在 Event.ADDED_TO_STAGE 之后可用
*   _root.bulletContainer：您只是将 _root 输入到 Object，没有提供更多信息
*   _root.mcMain：您只是将 _root 输入到 Object，没有提供更多信息

我只能推荐一种更简洁的编码方法，其中包括强类型

# php - 在php中创建具有空值的XML节点

> ID：14038660
> 
> 赞同：6
> 
> 时间：2012-12-26T09:41:48.947
> 
> 标签：php, xml, null, nodes

我正在使用 php 创建一个 xml 文件。生成的 XML 是。

```
<xml>
  <data>
    <firstname>Peter</firstname>
    <insertion>V</insertion>
    <lastname>John</lastname>
    <gender>Male</gender>
  </data>
</xml> 
```

但如果值为 null，则生成的 xml 为（**查看节点插入**）。

```
<xml>
  <data>
    <firstname>Peter</firstname>
    <insertion/>
    <lastname>John</lastname>
    <gender>Male</gender>
  </data>
</xml> 
```

**如果值为 null，我希望创建 xml 以使其产生。**

```
<xml>
  <data>
    <firstname>Peter</firstname>
    <insertion></insertion>
    <lastname>John</lastname>
    <gender>Male</gender>
  </data>
</xml> 
```

这是我的代码。

```
 $doc = new DOMDocument('1.0');
    $doc->formatOutput = true;
    $root = $doc->createElement('data');
    $doc->appendChild($root);
    $data = $doc->createElement('data');
    $fname = $doc->createElement('firstname');
        $fname->appendChild(
                $doc->createTextNode($row['firstname']));
        $data->appendChild($fname);

        $ins = $doc->createElement('insertion');
        $ins->appendChild(
                $doc->createTextNode($row['insertion']));
        $data->appendChild($ins);

        $lname = $doc->createElement('lastname');
        $lname->appendChild(
                $doc->createTextNode($row['lastname']));
        $data->appendChild($lname);

        $gender = $doc->createElement('gender');
        $gender->appendChild(
                $doc->createTextNode($row['gender']));
        $data->appendChild($gender);
       $root->appendChild($data);
 $doc->save($path . "test.xml"); 
```

创建此 xml 后，我将其作为响应发送。因此，在客户端，**姓氏**节点正在成为**插入** 的子节点

```
 <insertion/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:29:48.043

默认情况下输出的内容称为“速记格式”。它是完全有效的 XML，任何正确实现的 XML 解析器都应该能够很好地处理它。我能想到强制“速记”输出的唯一原因是，如果您必须将输出的 XML 输入到一个有问题且无法处理速记案例的解析器中。如果您可以用一个有效的解析器替换有问题的解析器，那么我建议您这样做。

如果您绝对必须输出非速记版本，那么 DOMDocument::SaveXML() 和 DOMDocument::save() 方法可以让您配置它们的输出。可以设置一个标志，使输出变得冗长而不是简写。但是，它在 PHP 手册中并没有详细记录。下面的代码应该说明它是如何工作的。

```
$dom = new DOMDocument ();
$dom -> loadXML ('<root><foo>foo</foo><bar></bar><baz>baz</baz></root>');

var_dump ($dom -> saveXML ());
var_dump ($dom -> saveXML ($dom, LIBXML_NOEMPTYTAG)); 
```

不过老实说，如果打算处理您的 XML 的解析器没有错误，我认为这样做没有多大意义。

# javascript - 使用 javascript 检索 IFrame 内容

> ID：14038664
> 
> 赞同：1
> 
> 时间：2012-12-26T09:42:20.913
> 
> 标签：javascript, asp.net, iframe

我已经从这个网站收到了 javascript 代码。

```
alert(window.frames['sc_frame'].document.getElementsByTagName('body')[0].innerHTML); 
```

或者

```
alert(window.frames['sc_frame'].document.getElementsByTagName('body')[0].innerText); 
```

问题是我有这个错误。

```
Unsafe JavaScript attempt to access frame with URL http://xxxxxxxxxxxxxxxxxxxxxxxxxxxxx from frame with URL http://xxxxxxxxxxxxxxxxxxxxxxxxxxxxx. Domains, protocols and ports must match.
(anonymous function)
InjectedScript._evaluateOn
InjectedScript._evaluateAndWrap
InjectedScript.evaluate
TypeError: Cannot call method 'getElementsByTagName' of undefined
arguments: Array[2]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "non_object_property_call"
__proto__: Error 
```

我也理解原因，因为我`IFrame`正在调用另一个域。

```
<iframe id="sc_frame" src="http://example1.com"></iframe> 
```

我使用上面的代码`http://example.com`。

我的问题是是否有解决方法。使用javascript或任何其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:05:48.563

由于安全限制，您不能跨域（/端口/协议）直接与正文中的其他元素通信。您不仅不能访问目标文档源，也不能访问对象和事件。

您*可以*做的是使用框架通过代理跨域发送消息。 [这个答案](https://stackoverflow.com/questions/2067029/getting-around-same-origin-policy-in-javascript-without-server-side-scripts)谈到了这一点。

# android - 将文件上传到 Google 文档

> ID：14038668
> 
> 赞同：0
> 
> 时间：2012-12-26T09:42:39.210
> 
> 标签：android, google-docs, google-docs-api, google-drive-api

我想编写一个将文件上传到 Google Doc 的示例应用程序。是否有任何最低 API 级别？我可以为此应用程序添加任何其他库吗？请帮助我..谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:13:38.177

Google Drive SDK 文档包含一个 Android 快速入门教程，该教程展示了如何编写一个将照片上传到 Drive 的 Android 应用程序：

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:46:48.460

[这](https://github.com/mendhak/googledocs-upload-sample)是将文件上传到谷歌文档的示例。

这是一个示例 Android 应用程序，它使用 google-api-java-client 库来演示将文件上传到 Google Docs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T16:37:51.893

Google Drive SDK - 用 Python 编写您的第一个 Drive 应用程序：

*   [http://www.youtube.com/watch?v=zJVCKvXtHtE](http://www.youtube.com/watch?v=zJVCKvXtHtE)

文档：

*   [https://developers.google.com/drive/quickstart-python](https://developers.google.com/drive/quickstart-python)

生成凭据后，无需人工交互即可上传文件：

*   [https://github.com/sukujgrg/google_drive](https://github.com/sukujgrg/google_drive)

# android - 找不到 sql 表 - android

> ID：14038669
> 
> 赞同：2
> 
> 时间：2012-12-26T09:42:47.727
> 
> 标签：android, sqlite

我的 sql 数据库有问题。

我正在使用现有的 sql 数据库，但程序没有读取它。

我的sql表如下：

```
BEGIN TRANSACTION;
CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US');
INSERT INTO android_metadata VALUES('en_US');
CREATE TABLE bucketitems (
    "_id" INTEGER PRIMARY KEY NOT NULL,
    "bucketNo" INTEGER NOT NULL,
    "bucketItemName" TEXT NOT NULL,
    "bucketItemImg" TEXT,
    "bucketItemDesc" TEXT,
    "completed" INTEGER NOT NULL
);
INSERT INTO bucketitems VALUES(1,1,'Test',NULL,NULL,0);
COMMIT; 
```

我将 sql 文件放在资产文件夹中。

然后使用此代码

```
public class DatabaseHandler extends SQLiteOpenHelper {

    // Contacts table name
    private static final String TABLE_BUCKET_ITEMS = "bucketitems";

    // Contacts Table Columns names
    private static final String KEY_ID = "_id";
    private static final String KEY_BUCKET = "bucketNo";
    private static final String KEY_NAME = "bucketItemName";
    private static final String KEY_FLAG = "completed";

    private static String DB_PATH = "/data/data/com.example.bucketlist/databases/";

    private static String DB_NAME = "bucketList";

    private SQLiteDatabase myDataBase;

    private final Context myContext;

    public DatabaseHandler(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    //Creates a empty database on the system and rewrites it with your own database.
    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {
        } else {
            this.getReadableDatabase();
            try {
                this.close();
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    // Check if the database already exist to avoid re-copying the file
    private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READWRITE);
        } catch (SQLiteException e) {
        }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    // Copies your database from your local assets-folder to the just created
    private void copyDataBase() throws IOException {
        InputStream myInput = myContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream myOutput = new FileOutputStream(outFileName);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public void openDataBase() throws SQLException {
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    @Override
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_BUCKET_ITEMS);
        onCreate(db);
    }

    // Getting All Contacts
    public Bucket[] getAllContacts(int bucketNo) {
        List<BucketItem> bucketList = new ArrayList<BucketItem>();

        String selectQuery = "SELECT * FROM " + TABLE_BUCKET_ITEMS + " WHERE "
                + KEY_BUCKET + " = " + bucketNo;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst()) {
            do {
                BucketItem bucket = new BucketItem();
                bucket.setBucketItemNo(Integer.parseInt(cursor.getString(0)));
                bucket.setBucketItemName(cursor.getString(2));
                Boolean isCompleted = false;
                if (Integer.parseInt(cursor.getString(5)) == 0) {
                    isCompleted = true;
                }
                bucket.setCompleted(isCompleted);
                bucketList.add(bucket);
            } while (cursor.moveToNext());
        }

        Bucket[] buckets = bucketList.toArray(new Bucket[bucketList.size()]);

        return buckets;
    }

    //Updating BucketItem
    public int updateContact(BucketItem bucketItem) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, bucketItem.getBucketItemName());
        values.put(KEY_FLAG, bucketItem.isCompleted());

        // updating row
        return db.update(TABLE_BUCKET_ITEMS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(bucketItem.getBucketItemNo()) });
    } 
```

然后在我的活动课上，我的代码如下。

@覆盖

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bucket_item);
        int value = getIntent().getExtras().getInt("bucketno");
        DatabaseHandler myDbHelper = new DatabaseHandler(this);
        try {
                myDbHelper.createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }

        try {
            myDbHelper.openDataBase();
        }catch(SQLException sqle){
            throw sqle;
        }
        Bucket[] buckets = myDbHelper.getAllContacts(value);
        System.out.println(buckets);

    } 
```

但我有一个错误。

```
12-26 09:34:17.667: E/SQLiteLog(792): (1) no such table: bucketitems
12-26 09:34:24.030: D/AndroidRuntime(792): Shutting down VM
12-26 09:34:24.030: W/dalvikvm(792): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-26 09:34:24.166: E/AndroidRuntime(792): FATAL EXCEPTION: main
12-26 09:34:24.166: E/AndroidRuntime(792): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bucketlist/com.example.bucketlist.BucketItemActivity}: android.database.sqlite.SQLiteException: no such table: bucketitems (code 1): , while compiling: SELECT * FROM bucketitems WHERE bucketNo = 1
12-26 09:34:24.166: E/AndroidRuntime(792):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-26 09:34:24.166: E/AndroidRuntime(792):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:51:18.527

从资产复制时忘记附加“.db”。
输入应该是这样`InputStream is = getContext().getAssets().open("MyDatabaseFile.db");`
输出应该是这样`OutputStream os = new FileOutputStream("/data/data/YOUR_PACKAGE_NAME/databases/MyDatabaseFile.db");`

```
 // Copies your database from your local assets-folder to the just created
    private void copyDataBase() throws IOException {
        InputStream myInput = myContext.getAssets().open(DB_NAME + ".db"); // add .db here and see
        String outFileName = DB_PATH + DB_NAME + ".db"; // same here
        OutputStream myOutput = new FileOutputStream(outFileName);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();
    } 
```

# social-networking - 识别 gephi 中的网络影响者

> ID：14038671
> 
> 赞同：0
> 
> 时间：2012-12-26T09:42:57.840
> 
> 标签：social-networking, gephi

实际上我是这个社交网络分析和 Gephi 的新手，现在我有一个网络，我需要分析网络影响者。有什么方法可以分析它。我们如何才能知道谁在网络中最有影响力。

是否通过“页面排名”机制

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:19:47.210

在社交网络中寻找最有影响力的玩家是一个**非常**广泛的问题，有很多方法可以解决这个问题，这取决于您的数据和您试图回答/建模的问题。特别是，网络中的关系（边）应该暗示玩家（节点）之间的影响。假设网络的关系（边）和参与者（节点）是统一的，您可以开始使用基本节点度量来识别在网络中具有影响力的参与者： [度、介数、接近度和可能的特征向量中心性](http://en.wikipedia.org/wiki/Centrality), （毫无疑问，还有更多的指标和复杂的方法，但这是开始了解每个单独节点如何影响整个网络的一种方式）。一旦为网络中的所有节点定义了多个指标，您就可以开始识别在多个指标中排名靠前的节点。

同样，这是[理解每个玩家（节点）](http://faculty.ucr.edu/~hanneman/nettext/C10_Centrality.html)的简单方法，并且还有更多更复杂的方法。

# sql - 无法让 Join 在我的 Sql 语句中工作

> ID：14038677
> 
> 赞同：1
> 
> 时间：2012-12-26T09:43:29.247
> 
> 标签：sql, sql-server, join, inner-join

我有两张桌子。

```
Transaction
------------
TransactionId
Date
Amount
Quantity
ProductCode
etc 
```

-和-

```
Product
-----------
ProductId
Description
ProductCode
etc 
```

我正在尝试创建一个存储过程，它将为我提供带有产品描述的交易。

到目前为止我有这个，但它甚至还没有接近编译。我不太了解 SQL 语法。

```
USE SuburbanPortal;
SELECT [CompanyCode]
      ,[Status]
      ,[Branch]
      ,[ProductCode]
      ,[TransactionBranch]
      ,[AccountNumber]
      ,[ReferenceNumber]
      ,[TransactionDate]
      ,[Quantity]
      ,[Amount]
      ,[SalesTax]
  FROM [Company].[Transaction]
  LEFT OUTER JOIN [Company].[Transaction] ON
    [Company].[Transaction].[ProductCode] = [Company].[Products].[ProductCode] 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:45:28.763

你为什么不使用一个`INNER JOIN`？另外，您加入的是`[Transaction]`on`[Transaction]`而不是`[Transaction]`on `[Product]`。

```
SELECT  T.ProductCode
        ,T.[Field1]
        ,T.[Field2]
        ,P.[Field1]
        ,P.[Field2]
FROM    [Company].[Transaction] T
        INNER JOIN [Company].[Product] P
            ON T.[ProductCode] = P.[ProductCode]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:48:23.177

试试这个：

```
USE SuburbanPortal;
SELECT [CompanyCode]
      ,[Status]
      ,[Branch]
      ,p.[ProductCode]
      ,[TransactionBranch]
      ,[AccountNumber]
      ,[ReferenceNumber]
      ,[TransactionDate]
      ,[Quantity]
      ,[Amount]
      ,[SalesTax]
  FROM [Company].[Transaction] as t
  LEFT OUTER JOIN [Company].[Product] as p ON
    p.[ProductCode] = t.[ProductCode] 
```

# asp.net-mvc-3 - 在 IIS 上部署后出现 Structuremap 207 错误

> ID：14038678
> 
> 赞同：3
> 
> 时间：2012-12-26T09:43:32.303
> 
> 标签：asp.net-mvc-3, structuremap

我们正在使用 ASP.Net MVC 3.0 框架开发应用程序。我们使用结构映射在运行时注入对象。为此，我们使用构造函数注入。我们编写了自定义控制器工厂，其中控制器的创建通过`return (Controller)ObjectFactory.GetInstance(controllerType);`. 通过将接口与具体类映射来使用 DSL 定义定义。

当应用程序在 Visual Studio 开发服务器上运行时，一切正常。但是，当在 IIS 7.0 上部署相同的应用程序时，它会在运行时创建对象时引发 207 错误。

任何人都可以帮助我们是否需要更新 IIS 上的任何设置或帮助调试此问题的步骤？请在以下堆栈跟踪中找到该问题

```
ExceptionStructureMap Exception Code:  
207 Internal exception while creating Instance '83248ea8-b195-4166-8a7d-678e9a677c9f' of PluginType Payrs.Web.Controllers.PaymentRequestController.  
Check the inner exception for more details.Stack Trace :   
 at StructureMap.Pipeline.ConstructorInstance.Build(Type pluginType, BuildSession session, IInstanceBuilder builder)  
    at StructureMap.Pipeline.ConstructorInstance.build(Type pluginType, BuildSession session)    
     at StructureMap.Pipeline.Instance.createRawObject(Type pluginType, BuildSession session)    
      at StructureMap.Pipeline.Instance.Build(Type pluginType, BuildSession session)    
       at StructureMap.Pipeline.ObjectBuilder.Resolve(Type pluginType, Instance instance, BuildSession session)   
         at StructureMap.BuildSession.CreateInstance(Type pluginType, Instance instance)    
          at StructureMap.BuildSession.<>c__DisplayClass3.<.ctor>b__1()    
           at StructureMap.BuildSession.CreateInstance(Type pluginType)    
            at Payrs.Web.Infrastructure.PayrsControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType)  

             **Inner Exception**    

              at Payrs.Web.Controllers.PaymentRequestController..ctor(IPaymentService paymentRequestService, IFundingService fundingService)   
                at lambda_method(Closure , IArguments )     
                at StructureMap.Construction.BuilderCompiler.FuncCompiler`1.<>c__DisplayClass2.<CreateBuilder>b__0(IArguments args)    
                 at StructureMap.Construction.InstanceBuilder.BuildInstance(IArguments args)    
                  at StructureMap.Pipeline.ConstructorInstance.Build(Type pluginType, BuildSession session, IInstanceBuilder builder) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T05:48:13.023

通过结构图代码和 Web 服务器监控进行故障排除后，我可以找出问题所在。

在这种情况下，发生了一个未经处理的异常，它正在折叠当前的应用程序域并创建新的应用程序域来处理请求。由于整个结构映射配置是在应用程序域级别完成的，因此容器定义无效，这就是结构映射无法在构造函数中注入对象的原因。

Elmah 帮助我识别了未处理的异常，通过纠正问题和处理异常避免了这个错误。

# ios - 如何在 iOS 中清除推送通知徽章计数？

> ID：14038680
> 
> 赞同：42
> 
> 时间：2012-12-26T09:43:41.320
> 
> 标签：ios, xcode, apple-push-notifications

我想在应用程序启动后清除推送通知徽章计数。我不清楚在哪里设置以下代码。请简要说明清除徽章计数。

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-26T09:46:27.027

你应该设置这个：

> [UIApplication sharedApplication].applicationIconBadgeNumber = 0;

在这些**AppDelegate**方法中的任何一个中，如果应用程序已启动并发送到后台，那么您启动的应用程序`didFinishLaunchingWithOptions`方法将不会被调用，因此请使用以下任一方法：

```
- (void)applicationWillEnterForeground:(UIApplication *)application

- (void)applicationDidBecomeActive:(UIApplication *)application 
```

对于斯威夫特 3+

```
- func applicationWillEnterForeground(_ application: UIApplication)
- func applicationDidBecomeActive(_ application: UIApplication) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-19T04:13:31.900

**在迅速 3+**

在您的**AppDelegate.Swift**中，当您的应用程序处于活动状态时，如下所示。

```
func applicationDidBecomeActive(_ application: UIApplication) {
    UIApplication.shared.applicationIconBadgeNumber = 0
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T10:01:13.317

好吧，更好的方法是制作一个减去徽章编号的函数，然后制作一个 UIButton 让用户清除徽章。在默认邮件应用程序中，如果您阅读一封电子邮件，徽章将从图标中减去一个。您永远不应该在启动或恢复时将其设置为 0，这毫无意义并且会使应用程序看起来很糟糕。当用户与该事件交互时减去它是最好的方法。让你的应用更专业，如果你只是在应用启动时重置它，谁知道床是什么意思，还不如不使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T09:46:37.013

您可以在代码中的任何位置设置该代码。没关系。但一般情况下，保存在`UIApplicationDidFinishLaunching`..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T13:04:06.310

```
 UIApplication.shared.applicationIconBadgeNumber = 1
    UIApplication.shared.applicationIconBadgeNumber = 0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-09T10:50:08.943

**对于 iOS 13+**

您需要在**SceneDelegate.swift**文件而不是**AppDelegate.swift中实现这些功能之一**

```
func sceneDidBecomeActive(_ scene: UIScene) {
    UIApplication.shared.applicationIconBadgeNumber = 0
}

func sceneWillEnterForeground(_ scene: UIScene) {
        UIApplication.shared.applicationIconBadgeNumber = 0
} 
```

将 AppDelegate 视为一般的应用程序，而 SceneDelegate 用于特定实例。更好的解释在这里-> [https://stackoverflow.com/a/59965183/7082339](https://stackoverflow.com/a/59965183/7082339)

# ios - 是否可以为 ios 适配 linux/windows sdk？

> ID：14038683
> 
> 赞同：0
> 
> 时间：2012-12-26T09:43:56.907
> 
> 标签：ios, linux, windows, sdk

我最近开始开发一个需要连接 DVR 功能的 iPhone 应用程序。我发现 DVR 公司为此提供了 SDK，但仅适用于 windows 和 linux。

所以我想问我是否可以调整其中一个 SDK 并将其用于 ios。答案可能很明显也很容易，但我的经验很少，我想问问专家是否可能。如果是的话，一般来说主要的障碍是什么？按照 Apple 开发人员指南将 linux sdk 移植到 Mac 会有帮助吗？

如果需要，我当然可以提供有关 sdk 的更多详细信息。

# javascript - 在更新面板的部分回发后执行 javascript？

> ID：14038684
> 
> 赞同：17
> 
> 时间：2012-12-26T09:43:58.903
> 
> 标签：javascript, asp.net

我有一个向它添加树文件脚本的页面。

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/init.js"></script>
<script type="text/javascript" src="js/easing.js"></script> 
```

我有一个带有下拉列表的更新面板。运行 SelectedIndexChanged 事件（更新面板的部分回发）时，不要执行 javascript 。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-26T09:46:53.937

使用`pageLoad`功能：

```
function pageLoad(sender, args) {
  InitialiseSettings();
}

function InitialiseSettings(){
    // replace your DOM Loaded settings here. 
    // If you already have document.ready event, 
    // just take the function part and replace here. 
    // Not with document.ready 
    $(element).slideUp(1000, method, callback});

    $(element).slideUp({
                   duration: 1000, 
                   easing: method, 
                   complete: callback});
} 
```

或者，尝试添加一个“结束请求”事件处理程序`.add_endRequest()`：

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(InitialiseSettings) 
```

* * *

**编辑：**

将代码从`document.ready`移至`InitialiseSettings()`，然后将其注册为**[`pageLoaded`](http://msdn.microsoft.com/en-us/library/bb397523%28v=vs.100%29.aspx)**事件处理程序对您来说是一个更好的主意。

**代码示例**

```
 Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(InitialiseSettings) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-26T09:55:13.927

要在全部和部分回发中运行您的 javascript，请将您的 javascript 代码放入 javascript pageLoad() 函数中。

```
function pageLoad()
{
   //your javascript code
} 
```

例子：

```
function pageLoad() {

    $(':submit').click(function () {
        CommodityArray();
    });
    $('#btn_image').click(function () {
       CommodityArray();
    });
    $(".repHeader").disableSelection();

    CommodityArray();
} 
```

希望能帮助到你！:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-26T10:01:05.867

您必须在更新面板后使用以下代码。

```
<script type="text/javascript" language="javascript">
var pageRequestManager = Sys.WebForms.PageRequestManager.getInstance();
pageRequestManager.add_endRequest(NewCharacterCount);
</script> 
```

`NewCharacterCount`您的 javascript 函数名称在哪里。

阅读这篇文章[Sys.WebForms.PageRequestManager endRequest 事件](http://msdn.microsoft.com/en-us/library/bb383810%28v=vs.100%29.aspx) 希望它可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T08:10:31.317

如果您正在使用 UpdatePanel，并且想要在更新面板中的内容刷新后调用 javascript 函数，您可以使用以下方式轻松完成。在 Page`body`标签中，调用一个函数`RefreshContent()`

```
<body onload="RefreshContent()">

<script type="text/javascript">
  function RefreshContent()
  {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
  }

  function EndRequestHandler()
  {
    alert("Add your logic here" );
  }
</script> 
```

参考链接 [http://www.infoa2z.com/asp.net/how-to-call-javascript-function-after-an-updatepanel-asychronous-request-to-asp.net-page](http://www.infoa2z.com/asp.net/how-to-call-javascript-function-after-an-updatepanel-asychronous-request-to-asp.net-page)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-26T13:22:08.837

您可以使用[PageRequestManager 客户端事件](https://msdn.microsoft.com/en-us/library/bb386417.aspx)。sender 参数将包含您需要的信息。例如，可以这样做：

```
// Register event handler
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoaded);

/// Executed when all page content is refreshed, full page or async postback: https://msdn.microsoft.com/en-us/library/bb397523.aspx
function pageLoaded(sender, args) {
    var isPostBack = sender.get_isInAsyncPostBack();
    if(!isPostBack) return;

    // PostBack logic here.
} 
```

# iphone - 按钮高亮状态和手势

> ID：14038686
> 
> 赞同：0
> 
> 时间：2012-12-26T09:44:17.153
> 
> 标签：iphone, objective-c, ios, xcode

我已经为此苦苦挣扎了一段时间，一些帮助会很有用。

想象一下，我有一个`UIButton`，它以`highlighted`/`selected`状态开始。如果用户点击它，则`highlighted`/`selected`状态会发生变化。

我已经实现了这个，它工作正常。例如，如果用户在按钮区域内点击，没有释放她/他的手指，并将鼠标移到按钮区域之外，就会出现问题——此时我的按钮通常会丢失`highlighted`/`selected`状态。无论如何，我也解决了这个问题，通过覆盖`UIControlEventTouchUpOutside` 并使按钮保持以前的状态......

但是现在另一个问题出现了，与上面类似，如果用户点击按钮，没有松开他/她的手指，然后将手指向右移动说（水平，这也使我的对话框例如向右移动） ，然后我再次失去“选定/突出显示”状态....

我再次相信某种类似于 - 但不同 - 的手势，而不是`UIControlEventTouchUpOutside`被称为删除我选择的状态......

你知道这里会发生什么吗？任何建议表示赞赏。

附言。通过使用界面生成器为正常/选定状态设置不同的图像，我已经解决了所有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:19:00.097

通过使用界面生成器为正常/选定状态设置不同的图像，我已经解决了所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:58:54.243

对于突出显示的效果，您可以使用: `setHighlighted`of `UIButton`class。

当您开始触摸按钮时，将按钮的突出显示属性设置为 YES。

当你开始触摸时：

```
yourButton.highlighted = YES; 
```

当您停止触摸时：

```
yourButton.highlighted = NO; 
```

# qt - 如何设置使用 setBackgroundBrush 设置的背景图像的背景位置和大小？

> ID：14038688
> 
> 赞同：0
> 
> 时间：2012-12-26T09:44:28.073
> 
> 标签：qt, qt4

我使用 Qt 的 setBackgroundBrush 函数来设置背景图像。如何调整图像大小或设置其位置？

例如，我希望它居中并填充整个区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:15:18.547

我不认为这是可能的`setBackgroundBrush`，但如果你想要更多的控制，你也可以用样式表设置背景图像。Qt 文档中的示例代码：

```
QLabel {
    background-image: url(dense6pattern.png);
    background-repeat: repeat-xy;
} 
```

更多信息[在这里](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#list-of-properties)。

# python - Python 中未使用的导入会影响性能吗？

> ID：14038691
> 
> 赞同：40
> 
> 时间：2012-12-26T09:44:55.997
> 
> 标签：python, performance, python-import

Python脚本中未使用的导入有什么影响吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-26T09:47:01.190

您使用可能干扰变量并占用一些内存的名称污染了您的命名空间。
此外，由于程序必须加载模块，因此您将有更长的启动时间。

无论如何，我不会对此变得太神经质，就好像您正在编写代码一样，您最终可能会`import os`随着代码的修改而不断地编写和删除。一些 IDE 作为 PyCharm 检测未使用的导入，因此您可以在代码完成或接近完成后依赖它们。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-26T09:55:19.807

“未使用”可能比您想象的更难定义，例如 test.py 中的这段代码：

```
import sys
import unused_stuff
sys.exit(0) 
```

used_stuff 似乎未使用，但如果它包含：

```
import __main__
def f(x): print "Oh no you don't"
__main__.sys.exit = f 
```

然后运行 ​​test.py 并不会像您随便一瞥所期望的那样。

# google-apps-script - 根据文件中的数据以编程方式更改 google 文件的共享

> ID：14038695
> 
> 赞同：0
> 
> 时间：2012-12-26T09:45:03.597
> 
> 标签：google-apps-script, sharing

我在 Google 驱动器中有一个包含大约 30 个电子表格的目录。每个电子表格都将在设置的位置（例如，单元格 A1）中有一个电子邮件地址。

我想创建一个脚本，该脚本将遍历该目录中的每个文件，并将该文件的查看权限仅授予文件中列出的电子邮件地址。

有人可以帮我弄这个吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T16:44:16.220

这是可以完成您的任务的伪代码，带有相关文档的链接。

*   获取目录下的所有电子表格文件

    1.  [DocsList.getFolder(路径)](https://developers.google.com/apps-script/reference/docs-list/docs-list#getFolder%28String%29)
    2.  [Folder.getFilesByType(type)](https://developers.google.com/apps-script/reference/docs-list/folder#getFilesByType%28FileType%29)，其中 type = DocsList。[文件类型 .SPREADSHEET](https://developers.google.com/apps-script/reference/docs-list/file-type)。
*   遍历所有这些文件，并设置权限

    1.  获取嵌入的电子邮件地址
        *   [SpreadsheetApp](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet-app) .openById( [file.getId()](https://developers.google.com/apps-script/reference/docs-list/file#getId%28%29) ).getRange("A1").getValue()
    2.  与该用户共享电子表格。
        *   [电子表格](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet#addViewer%28User%29).addViewer (emailAddress)

# android - 在android中自定义启动屏幕

> ID：14038700
> 
> 赞同：0
> 
> 时间：2012-12-26T09:45:26.190
> 
> 标签：android, android-ndk

我想自定义 android 启动屏幕，实际上我们即将推出一款新的 android 驱动的平板电脑，为此我想自定义启动屏幕并且我正在使用 android ICS，请建议我实现这一点。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:07:13.103

您可以使用 ：

**Adobe After Effects 软件**

根据需要自定义启动屏幕。

希望这有帮助

# java - KeyboardView 中的循环绘图

> ID：14038702
> 
> 赞同：0
> 
> 时间：2012-12-26T09:45:29.337
> 
> 标签：java, android, android-softkeyboard

我有课

```
public class OwnKeyboardView extends KeyboardView {
...
} 
```

它有覆盖方法 OnDraw：

```
@Override
    public void onDraw(final Canvas canvas) {
    super.onDraw(canvas);
    mCanvas = draw_bitmap(canvas);
    Draw_Bitmap(mCanvas);
} 
```

类 KeyboardView 继承的方法

从类 android.view.View

从类 java.lang.Object

**从接口 android.graphics.drawable.Drawable.Callback**

方法 OnDraw 在按任意键时工作。

当我下一步做：

```
public Canvas draw_bitmap(Canvas canvas) {

        if (mCanvas != null) {
        Log.i(TAG, "Copy Canvas");
        }
        return canvas;
    } 
```

为什么在**OnDraw**方法中我可以使用**mCanvas**进行绘制，而其他方法则不能？我想在键盘上循环绘图，但 OnDraw 仅在您按下键盘时才起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T06:29:57.207

Yoy 可能会创建 Thread 并在 Thread 中手动调用 postInvalidate，就像这样。

注意：它会消耗大量电池

```
boolean flag=true;
private void Thread_Draw(){

       new Thread(new Runnable(){

            public void run(){

               while(flag)
               {
                    postInvalidate();
                    try{
                       Thread.sleep(45);
                    } catch(InterruptedException e)
                    {
                       e.printStackTrace();
                    }
               }
            }
      }
} 
```

您可以从方法中停止线程

```
public void stopThread(boolean bool)
{
     flag=bool;
} 
```

阅读 PostInvalidate yom 可以这样：http: [//developer.android.com/reference/android/view/View.html#postInvalidate()](http://developer.android.com/reference/android/view/View.html#postInvalidate())

# java - 如何在没有 html 的情况下将超链接添加到 JTextPane？

> ID：14038703
> 
> 赞同：1
> 
> 时间：2012-12-26T09:45:32.270
> 
> 标签：java, swing, hyperlink, jtextpane

我有一个带有 StyledDocument “doc”的 JTextPane，我希望`doc.isertString(doc.getLength(), "http://www.google.com", attrs)` JTextPane 显示一个可以单击的超链接。我以“http://www.google.com”和 attrs 为例，因为我真的不知道该怎么做。令人惊讶的是，我在网上找不到任何有用的东西（没有 html 或 HTMLDocument 等）。我不喜欢 swing 与 html 一起使用的方式，而且我不想使用它。

```
public class SSCCE extends JFrame {

    private JPanel contentPane;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    SSCCE frame = new SSCCE();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
    public SSCCE() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);

        JTextPane textPane = new JTextPane();
        textPane.setEditable(false);
        StyledDocument doc = textPane.getStyledDocument();
        SimpleAttributeSet attrs = new SimpleAttributeSet();
        try {
            doc.insertString(doc.getLength(), "http://www.google.com", attrs);
        } catch (BadLocationException e) {
            e.printStackTrace();
        }
        GroupLayout gl_contentPane = new GroupLayout(contentPane);
        gl_contentPane.setHorizontalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addComponent(textPane, GroupLayout.PREFERRED_SIZE, 422, GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        gl_contentPane.setVerticalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addComponent(textPane, GroupLayout.PREFERRED_SIZE, 248, GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        contentPane.setLayout(gl_contentPane);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:08:17.250

定义您自己的`AttributeSet`以保留超链接信息。它应该包括例如蓝色和自定义属性。我们将其命名为“URL”。添加一些带有 的文本`AttributeSet`到`StyledDocument`.

然后添加鼠标侦听器（运动和鼠标侦听器）。对于任何鼠标事件，您都可以使用它`viewToModel()`来获取指定鼠标位置的偏移量。获取偏移量的叶子元素（文本）并检查文本是否`Element`具有属性。

如果它执行了您的操作（例如，将鼠标光标设置为手或处理对 URL 的单击）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T13:19:28.043

+1 对 StanislavL 的回答。这是**使用**HTML 的简单方法。那么在你的java代码中使用`HTML`标签并不复杂。反过来可能很复杂。我做了一个简短的EG，易于执行和理解，你可以修改它并使其适合你的目的。

![在此处输入图像描述](../Images/bae7260e1f2b421baaa8579c9e5fdad5.png)

代码：

```
import java.awt.Cursor;
import java.awt.Desktop;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class JlabelLink extends JFrame {
private JPanel pan;

    private JLabel website;

public JlabelLink() {
    this.setTitle("jLabelLinkExample");
    this.setSize(300, 100);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setLocationRelativeTo(null);

    pan = new JPanel();

    website = new JLabel();

    website.setText("<html> Website : <a href=\"\">http://www.google.com/</a></html>");
    website.setCursor(new Cursor(Cursor.HAND_CURSOR));

    pan.add(website);
    this.setContentPane(pan);
    this.setVisible(true);

    goWebsite(website);
 }

  public static void main(String args[]) {

    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new JlabelLink().setVisible(true);
        }
    });
    }

  private void goWebsite(JLabel website) {
    website.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            try {
                try {
                    Desktop.getDesktop().browse(new URI("http://www.google.com/webhp?nomo=1&hl=fr"));
                } catch (IOException ex) {
                    Logger.getLogger(JlabelLink.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
            catch (URISyntaxException ex) {

            }
         }
       });
    }
   } 
```

# c# - 如何用可点击的方式替换gridview的行命令事件？

> ID：14038707
> 
> 赞同：0
> 
> 时间：2012-12-26T09:45:40.133
> 
> 标签：c#, javascript, asp.net, gridview, rowcommand

我有一个`grid view`，我用`row command`来打开一个带有几个参数的特定窗口。

现在我想删除这个按钮并使整行`clickable`，所以如果我点击该行打开同一个窗口。如何做到这一点。

```
 protected void gv_Details1_RowCommand(object sender, GridViewCommandEventArgs e)
        {

            if (e.CommandName == "Confirm")
            {
                int index = Convert.ToInt32(e.CommandArgument);
                Session["task_code"] = ((HiddenField)gv_Details1.Rows[index].Cells[0].FindControl("hf_tc")).Value;
                Session["trans_serial"] = ((HiddenField)gv_Details1.Rows[index].Cells[0].FindControl("hf_ts")).Value;

                MasterPage2 obj = (MasterPage2)Page.Master;
                obj.SetMainVariables();
                obj.PreValidate();
                obj.SetDepartment();

                Response.Redirect("~/Contents/" + Session["page_new"].ToString() + ".aspx", false);

            }
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:54:12.910

添加 RowDatabound 事件：

```
protected void gv_Details1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes.Add("style", "cursor:pointer;");
            string abc = ((GridView)sender).DataKeys[e.Row.RowIndex].Value.ToString();
            e.Row.Attributes["onClick"] = "location.href='pagename.aspx?Rumid=" + abc + "'";
        }
    } 
```

谢谢 ：

屈膝礼：[http ://forums.asp.net/t/1859787.aspx/1?How+to+fire+RowCommand+event+when+user+click+anywhere+in+the+gridview+row](http://forums.asp.net/t/1859787.aspx/1?How+to+fire+RowCommand+event+when+user+click+anywhere+in+the+gridview+row)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:55:53.207

我们自己的堆栈溢出社区的两个最佳链接。

[如何在没有选择按钮的情况下在 GridView 中实现全行选择？](https://stackoverflow.com/questions/6250545/how-to-implement-full-row-selecting-in-gridview-without-select-button)

[在gridview中使整行可点击](https://stackoverflow.com/questions/686240/making-an-entire-row-clickable-in-a-gridview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:05:41.570

```
protected void Grid_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Product p = (e.Row.DataItem as Product);

        e.Row.Attributes.Add("onClick",  "location.href='somepage.aspx?id=" + p.ProductID + "'");
    }

} 
```

# crystal-reports - 我可以在水晶报表中的一个组中再添加 2 个组吗？

> ID：14038710
> 
> 赞同：1
> 
> 时间：2012-12-26T09:45:54.750
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi, crystal-reports-8.5

我有一个像这样执行和输出的存储过程，

```
Plant1     Top1       12
Plant1     Bottom1    12
Plant1     Top2       14
Plant1     Bottom12   14
Plant2     Top1       34
Plant2     Bottom1    34
Plant2     Top2       18
Plant2     Bottom12   18 
```

我希望它在水晶报表中像这样显示。

```
Plant1
   Top
     Top1        12
     Top2        14
   Bottom
      Bottom1    12
      Bottom1    14

Plant2
   Top
     Top1        34
     Top2        18
   Bottom
      Bottom1    34
      Bottom1    18 
```

我正在考虑通过包装厂对其进行分组，然后将其再次分组以实现这种输出。有人可以帮助我，请。

顺便说一句，我正在使用 Crystal Report 9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:11:02.627

```
1) Create two groups.
2) Group one is based on the Plant1, Plant2, Plant3 etc
3) Create a formula filed, that checks your second field and output either Top, Bottom.
4) Now, Group 2 is based on your Formula (Bottom, Top)

Order:
Group 1 => Display Plant Stuff (In Group Header)
Group 2 => Display Location stuff (In Group Header)
Detail => Display the records 
```

# javascript - 更改显示属性将页面滚动到顶部

> ID：14038713
> 
> 赞同：1
> 
> 时间：2012-12-26T09:46:08.137
> 
> 标签：javascript, html, css

我在使用 Javascript 更改对象显示属性时遇到问题。

`mysql`我使用 . 从数据库中的数据填充一个表`php`，并为每一行创建一个我想要的`DIV`with`display:none`属性，并且我有一个简单的 JavaScript 函数来显示/隐藏`div`. 这是`css`为了`div`：

```
display:none; /*initially menu item is hidden*/
position: absolute; /*absolute positioning to float*/
background-color:#fff;
width:230px;
min-height:120px;
right:60px;
border:5px solid #ccc;
text-align:right;
direction:rtl;
padding:10px;
border-radius: 10px 10px 10px 10px; 
-moz-border-radius: 10px 10px 10px 10px; 
-webkit-border-radius: 10px 10px 10px 10px; 
```

这是javascript：

```
function showfield (a) {
    document.getElementById(a).style.display = "block";  
}
function hidefield (a) {
    document.getElementById(a).style.display = "none";  
} 
```

该功能有效，并且 div 显示在他们必须的地方，但问题是：

当我调用 JavaScript 函数来显示时，它会显示 div，但页面会滚动到顶部，为了查看打开的 div，我应该向下滚动，因为我的页面是报告页面，它可能是一个长长的页面，这不是好事发生了！

我不明白为什么会发生这种情况，有没有办法防止这种自动滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:57:34.987

试试这个......

**html**

```
 <a style="text-decoration:none; color:black;" href="#<?php echo("a".$cntr); ?>" onclick="return showfield(<?php echo($cntr); ?>)"><?php echo($cntr); ?></a> 
```

**JAVASCRIPT**

```
function showfield(a){
   document.getElementById(a).style.display = "block";
   return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:04:04.093

请尝试下面的代码它对我有用。

```
<script>
 function showfield(a)
  {
    document.getElementById(a).style.display = "block";  
  }
   function hidefield(a)
  {
      alert(a);
    document.getElementById(a).style.display = "none";  
  }
</script>
<a href="javascript:void(0)" onclick="showfield('myid')">show</a>
<a href="javascript:void(0)" onclick="hidefield('myid');">hide</a>

<div id="myid">test content goes here</div> 
```

# common-lisp - 当我在 LISP 中使用普通的 setf 语句时会发生什么？

> ID：14038714
> 
> 赞同：6
> 
> 时间：2012-12-26T09:46:08.480
> 
> 标签：common-lisp, setf

我知道当你想在 Lisp 中进行动态/全局绑定时，你可以使用 defparameter 或 defvar。我还知道，你可以使用 defun 参数列表或 let 语句来进行词法绑定，嗯，几乎无处不在。

我想知道的是，当我在代码中的其他任何地方没有声明或使用 x 这样的语句时，我到底做了什么：

```
(setf x 10 ) 
```

这似乎工作正常，并且 x 似乎不像词法变量。它实际上是一个动态的全局变量，就像我使用 defparameter 或 defvar 一样，还是完全不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:06:39.763

它的实际作用在 ANSI Common Lisp 标准中未指定。

一般来说，我更喜欢任何 CL 实现来设置动态绑定值或全局值。它不应该做任何其他事情。默认情况下，CMUCL 似乎认为将符号声明为特殊是个好主意。但这是个坏主意，因为没有明显的方法可以摆脱全球特别声明。

所以，通常我会期待这样的事情（这里是 LispWorks）：

```
CL-USER 66 > (defun foo () (setf x44 10))
FOO 
```

全局变量仍然未绑定：

```
CL-USER 67 > x44

Error: The variable X44 is unbound.
  1 (continue) Try evaluating X44 again.
  2 Specify a value to use this time instead of evaluating X44.
  3 Specify a value to set X44 to.
  4 (abort) Return to level 0.
  5 Return to top loop level 0.

Type :b for backtrace or :c <option number> to proceed.
Type :bug-form "<subject>" for a bug report template or :? for other options.

CL-USER 68 : 1 > :top 
```

让我们调用函数：

```
CL-USER 69 > (foo)
10 
```

现在它具有全局价值：

```
CL-USER 70 > x44
10 
```

但是变量没有被声明为特殊的（因为它会被`DEFVAR`or `DEFPARAMETER`）。这里建立了一个词法绑定。

```
CL-USER 71 > (let ((x44 20)) (foo) x44)
20 
```

当我们将局部变量声明为特殊时，我们的函数会更改绑定：

```
CL-USER 72 > (let ((x44 20)) (declare (special x44)) (foo) x44)
10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:33:51.270

很快，您可以想到[`setq`](http://www.lispworks.com/documentation/HyperSpec/Body/s_setq.htm)，这是`setf`您观察到的扩展，只做了一半的事情`defvar`或`defparameter`做：

考虑这样`defparameter`做：

```
(declaim (special x))
(setq x 10) 
```

即它既向`x`编译器提供了一些元数据（关于什么类型的数据）（在这种情况下，它告诉它它是一个“特殊”变量）并赋值。

特别是`defvar`，如果它是顶级表单，则不会这样。标准行为是只初始化符号的值单元一次，因此其代码将更加复杂，您可以将其视为：

```
(unless (boundp x)    ; This is not entirely correct, because if the symbol
                      ; is otherwise known to the environment, but is unbound
                      ; defvar will not re-bind it, but I can't think of a way
                      ; to mimic that behavior
  (declaim (special x))
  (setq x 10)) 
```

提供给编译器的元数据可能会对代码的行为方式产生任何影响，也可能不会。一般来说，元数据应该帮助编译器更好地判断代码背后的意图，从而可能导致优化。但它也可用于文档或调试。

您可以阅读有关Hyperspec 的[`special`](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/dec_special.html)信息。[`declare`](http://www.lispworks.com/documentation/HyperSpec/Body/s_declar.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:38:20.660

据我所知，您应该避免将 setf（扩展为 setq）与未声明的变量一起使用。实现之间的行为可能会有所不同，即使您在 REPL 中的代码运行良好，编译的程序也可能在意想不到的地方出现错误。如果您执行以下操作，您可以在 clisp 中看到警告：

```
>(defun internal-setf () (setf some-var 10))
>(compile 'internal-setf)
WARNING: in INTERNAL-SETF : SOME-VAR is neither declared nor bound,
     it will be treated as if it were declared SPECIAL. 
```

# jquery - 如何使用jquery动态获取总计

> ID：14038717
> 
> 赞同：2
> 
> 时间：2012-12-26T09:46:22.313
> 
> 标签：jquery

我有与酒店房间相关价格的国籍下拉列表。现在我想动态添加显示的价格并输出它。

```
<div class="Total"></div>
<div class="rum_name">Room name</div>
<div class="nationality">
<select class="sel_nationality" name="nationality">
<option roomprice="30" value="63">SAARC</option>
<option roomprice="50" selected="selected" value="65">American/ European</option>
<option roomprice="45" value="67">Japnese/ Korean</option>
<option roomprice="38" value="69">All Others</option>
</select>
<div class="Price">
Price:
<span class="selectedPrice"></span>
</div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        var total = 0;
        $('.sel_nationality').change(function(){
            $price = $('option:selected', this).attr('roomprice');
            $parent = $(this).parents('.nationality');
            $parent.find('span.selectedPrice').text($price);
            $tot_price = $(this).val();
            $(this).each(function(){
                total += parseInt(this.value);
            })
           $('.Total').text(total); 
        })
           })
</script> 
```

可能有超过 1 个房间和每个房间的上述选项。现在我想根据输出的价格动态更改总数。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:59:54.870

好吧，伙计们，我认为我无法为您提供有关我的问题的正确想法，但我找到了解决方案。

```
<script type="text/javascript">
    $(document).ready(function(){
        var total = 0;
        $('.selectedPrice').each(function(){
            total = +$(this).text()+ total;
        });
        $('.Total').text(total); 
        $('.sel_nationality').change(function(){
            $price = $('option:selected', this).attr('roomprice');
            $parent = $(this).parents('.nationality');
            $parent.find('span.selectedPrice').text($price);
            var total = 0;
            $('.selectedPrice').each(function(){
                total = +$(this).text()+ total;
            });
           $('.Total').text(total); 

        })

    })
</script> 
```

无论如何，谢谢你们宝贵的时间，如果我不能给你这个想法，我很抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T08:43:47.250

Sammy，我认为您会发现您的解决方案简化为：

```
$(document).ready(function() {
    $('.sel_nationality').change(function() {
        var $price = $('option:selected', this).attr('roomprice');//remember to localize vars
        $(this).closest('.nationality').find('.selectedPrice').text($price);
        var total = 0;
        $('.selectedPrice').each(function() {
            total += Number($(this).text());
        });
        $('.Total').text(total);
    }).trigger('change');
}); 
```

通过触发选择菜单的“更改”事件，您将避免重复总计算并显示最初选择的价格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:00:17.753

您需要清除每次更改的总数，否则它将不断累加：

```
$(document).ready(function() {
    $('.sel_nationality').on('change', function() {
        var total = 0,  //reset the total, notice commas declearing vars
            $price = $('option:selected', this).attr('roomprice'),
            $parent = $(this).parents('.nationality'),
            $tot_price = this.value;

        $parent.find('span.selectedPrice').text($price);

        $('.sel_nationality').each(function() { //iterate all, not just this one
            total += parseInt(this.value, 10);  //use radix
        });
        $('.Total').text(total);
    });
})​;​ 
```

您需要遍历所有`.sel_nationality`元素，而不仅仅是`this`，因为这实际上不需要每个循环，并清除变量，就好像您不需要一样，它们将是全局的，如果它们以 $sign 开头并不重要，它们仍应使用`var`关键字清除。

作为旁注，`roomprice`它不是一个有效的属性，而 HTML5 数据属性将是一个更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:04:07.763

试试这个

```
 $(document).ready(function(){

    $('.sel_nationality').change(function(){
        var total = 0; //let the total be 0 whenever the chnages is made
        $price = $('option:selected', this).attr('roomprice');
        $parent = $(this).parents('.nationality');
        $parent.find('span.selectedPrice').text($price);
        $tot_price = $(this).val();
        $(this).each(function(){
            total += parseInt(this.value);
        })
       $('.Total').text(total); 
    })
  }) 
```

# magento - 如何在主要类别 Magento 上显示页面

> ID：14038728
> 
> 赞同：0
> 
> 时间：2012-12-26T09:47:14.863
> 
> 标签：magento, magento-1.7

我有一个关于 Magento 的项目，但我遇到了一个奇怪的问题。我有一个主要类别，我们称之为**Main 1**。而这个主类有几个子类。我们称它们为**Sub1、Sub2、** ...。

**Main 1, Sub1, Sub2**里面有产品。**Main 1**总共有 50 种产品。

当我导航到一个子类别时，我的产品比我每页看到的要多，所以我有一个寻呼机。

![在此处输入图像描述](../Images/c6d437263edd5d99a4c512221ad2410c.png)

但我不知道**Main 1**上发生了什么，我看不到那个寻呼机。我的产品比我在**Main 1**上看到的要多，但我不知道寻呼机发生了什么。

我想在那个主要类别上有一些我不知道的变化，但我不知道是哪一个。

因此，任何有关如何恢复该寻呼机的想法都将不胜感激。

谢谢！

这是我的**pager.html**：

```
<?php if($this->getCollection()->getSize()): ?>

<?php if($this->getUseContainer()): ?>
<div class="pager">
<?php endif ?>

<?php if($this->getShowAmounts()): ?>
<p class="amount">
    <?php if($this->getLastPageNum()>1): ?>
        <?php echo $this->__('Items %s to %s of %s total', $this->getFirstNum(), $this->getLastNum(), $this->getTotalNum()) ?>
    <?php else: ?>
        <strong><?php echo $this->__('%s Item(s)', $this->getTotalNum()) ?></strong>
    <?php endif; ?>
</p>
<?php endif ?>

<?php if($this->getShowPerPage()): ?>
<div class="limiter">
    <label><?php echo $this->__('Show') ?></label>
    <select onchange="setLocation(this.value)">
    <?php foreach ($this->getAvailableLimit() as  $_key=>$_limit): ?>
        <option value="<?php echo $this->getLimitUrl($_key) ?>"<?php if($this->isLimitCurrent($_key)): ?> selected="selected"<?php endif ?>>
            <?php echo $_limit ?>
        </option>
    <?php endforeach; ?>
    </select> <?php echo $this->__('per page') ?>
</div>
<?php endif ?>

<?php if($this->getLastPageNum()>1): ?>
<div class="pages">
    <strong><?php echo $this->__('Page:') ?></strong>
    <ol>
    <?php if (!$this->isFirstPage()): ?>
        <li>
            <a class="previous<?php if(!$this->getAnchorTextForPrevious()): ?> i-previous<?php endif;?>" href="<?php echo $this->getPreviousPageUrl() ?>" title="<?php echo $this->__('Previous') ?>">
                <?php if(!$this->getAnchorTextForPrevious()): ?>
                    <img src="<?php echo $this->getSkinUrl('images/pager_arrow_left.gif') ?>" alt="<?php echo $this->__('Previous') ?>" class="v-middle" />
                <?php else: ?>
                    <?php echo $this->getAnchorTextForPrevious() ?>
                <?php endif;?>
            </a>
        </li>
    <?php endif;?>

    <?php if ($this->canShowFirst()): ?>
        <li><a class="first" href="<?php echo $this->getFirstPageUrl() ?>">1</a></li>
    <?php endif;?>

    <?php if ($this->canShowPreviousJump()): ?>
        <li><a class="previous_jump" title="" href="<?php echo $this->getPreviousJumpUrl() ?>">...</a></li>
    <?php endif;?>

    <?php foreach ($this->getFramePages() as $_page): ?>
        <?php if ($this->isPageCurrent($_page)): ?>
            <li class="current"><?php echo $_page ?></li>
        <?php else: ?>
            <li><a href="<?php echo $this->getPageUrl($_page) ?>"><?php echo $_page ?></a></li>
        <?php endif;?>
    <?php endforeach;?>

    <?php if ($this->canShowNextJump()): ?>
        <li><a class="next_jump" title="" href="<?php echo $this->getNextJumpUrl() ?>">...</a></li>
    <?php endif;?>

    <?php if ($this->canShowLast()): ?>
      <li><a class="last" href="<?php echo $this->getLastPageUrl() ?>"><?php echo $this->getLastPageNum() ?></a></li>
    <?php endif;?>

    <?php if (!$this->isLastPage()): ?>
        <li>
            <a class="next<?php if(!$this->getAnchorTextForNext()): ?> i-next<?php endif; ?>" href="<?php echo $this->getNextPageUrl() ?>" title="<?php echo $this->__('Next') ?>">
                <?php if(!$this->getAnchorTextForNext()): ?>
                    <img src="<?php echo $this->getSkinUrl('images/pager_arrow_right.gif') ?>" alt="<?php echo $this->__('Next') ?>" class="v-middle" />
                <?php else: ?>
                    <?php echo $this->getAnchorTextForNext() ?>
                <?php endif;?>
            </a>
        </li>
    <?php endif;?>
    </ol>

</div>
<?php endif; ?>

<?php if($this->getUseContainer()): ?>
</div>
<?php endif ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:38:40.550

解决了。主要类别呈现的布局不同！

# python - Python Introspection：在运行时定义动态类方法

> ID：14038730
> 
> 赞同：0
> 
> 时间：2012-12-26T09:47:22.960
> 
> 标签：python, reflection, introspection

我正在尝试创建一个单元测试，以检查每个函数`mymodule`是否都有自己的`TestCase`实例。
为了减少样板代码和手动工作，我想使用自省/反射将`lambda`函数作为类方法动态添加到最初的空类`Test_TestCases`中。
以下代码类型有效 - 它确实将 lambdas 添加为类方法并`unittest.main()`找到并正确调用它们。

```
import unittest
from unittest import TestCase

import mymodule

class Test_TestCases(TestCase):
"""Class whose test_* methods will be created during runtime."""
    pass

################################################################################

if __name__ == "__main__":
    for item in dir(mymodule):
        attr = getattr(pws, item)
        if callable(attr):
            testname = "Test_%s" % item
            setattr(Test_TestCases, "test_%s_is_tested" % item,
                    lambda self: self.assertTrue(testname in globals()) and
                    issubclass(getattr(globals(), testname), TestCase))
    unittest.main() 
```

问题是，即使我的单元测试模块中有未经测试的功能，所有测试都会成功。
经过一番尝试，我发现`testname`每次`lambda`调用该变量时都具有相同的值。
为了重现性，我可以将问题最小化到这段代码：

```
lambdas = []
for i in range(5):
    lambdas.append(lambda: str(i))
print ", ".join(f() for f in lambdas) 
```

我希望这个输出：

```
0, 1, 2, 3, 4 
```

但相反，我得到：

```
4, 4, 4, 4, 4 
```

似乎 lambda 是延迟初始化的。
任何人都可以解释这种行为或给我一个关于如何正确实现目标的提示吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:59:57.757

`testname`带有另一个包装函数的阴影：

```
def assertion(testname=testname):
    def function(self):
        return self.assertTrue(testname in globals()) and issubclass(getattr(globals(), testname), TestCase))

    return function

setattr(Test_TestCases, "test_%s_is_tested" % item, assertion()) 
```

# xmpp - ijab 聊天是否仅适用于 Apache 服务器？

> ID：14038731
> 
> 赞同：2
> 
> 时间：2012-12-26T09:47:23.350
> 
> 标签：xmpp, chat, tomcat6

问题是关于`ijab`（facebook、gmail 风格的聊天栏）聊天。我已经看过[本](http://code.google.com/p/ijab/wiki/iJabWithOpenfire)教程，用于配置`ijab`Openfire XMPP 服务器，但无法将其与 Openfire 服务器连接。

在本教程`ijab`中与 Apache 网络服务器一起使用，但我使用 Tomcat`urlrewritefilter`将我的请求重定向到 Openfire 服务器。

聊天是否`ijab`仅适用于 Apache 服务器？有没有办法`ijab`与其他 Web 服务器（如 Tomcat、Weblogic、jboss 等）聊天？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:57:35.317

我认为它只适用于 Apache，因为它需要 mode_rewrite 配置。

# javascript - 在滚动时为图像设置动画

> ID：14038732
> 
> 赞同：0
> 
> 时间：2012-12-26T09:47:29.607
> 
> 标签：javascript, jquery, html, css

我写了一个小的 div 滑块，它每 5 秒滚动一次放入 div 中的图像，并且侧面还有两个箭头可以立即触发滑动。好吧，这并不重要，当图像向左或向右滑动或自动滑动时，我希望图像上发生某种动画，例如褪色或剪切，而不仅仅是滑动。

**Javascript代码：**

```
 <script type="text/javascript">
            function createSlider(el_left, el_right, items) {
    var index = 0;
                var refreshId;
                var items=$('.box');
                var restartAnimation = function() {
                    clearInterval(refreshId);
                    refreshId = setInterval( function() 
                    {    
                        var $this = items.eq(index);
        $this.animate({
            left: '-50%'
        }, 500);
        index = (index + 1) % items.length;
        var $next = items.eq(index);
        $next.css('left', '150%');
        $next.animate({
            left: '50%'
        }, 500);
                    },5000);
                }

                restartAnimation()

    el_left.click(function() {
                    restartAnimation();
        var $this = items.eq(index);
        $this.animate({
            left: '-50%'
        }, 500);
        index = (index + 1) % items.length;
        var $next = items.eq(index);
        $next.css('left', '150%');
        $next.animate({
            left: '50%'
        }, 500);
    });
    el_right.click(function() {
        restartAnimation();
        var $this = items.eq(index);
        $this.animate({
            left: '150%'
        }, 500);
        index = (index - 1) % items.length;
        var $next = items.eq(index);
        $next.css('left', '-50%');
        $next.animate({
            left: '50%'
        }, 500);
    });
}

createSlider($('.Animate'), $('.Animate2'), $('.box'))
        </script> 
```

**HTML 代码：**

```
 <div id="container" class="imageSlider">

          <div id="box1" class="box"><img style="height: 190px;width: auto;vertical-align: middle;margin: 0px 50px 12px 0px;" src="images/image1.png" class="emages"></div>
          <div id="box2" class="box"><img style="height: 185px;width: auto;vertical-align: middle;" src="images/image2.png" class="emages"></div>
          <div id="box3" class="box"><img style="height:264px;margin-top:0px;margin-left: 200px;width:auto;" src="images/image3.png" class="emages"></div>
          <div id="box4" class="box"><img style="height: 265px;width: auto;vertical-align: middle;margin: 51px 60px 0 -31px;" src="images/image4.png" class="emages"></div>
          <div id="box5" class="box"><img style="height: 194px;width: auto;vertical-align: middle;" src="images/image5.png" class="emages"></div>
          <div id="box6" class="box"><img style="height: 230px;width: auto;vertical-align: middle;margin: -50px 50px;" src="images/image6.png" class="emages"></div>
          <div id="box7" class="box"><img style="height: 230px;width: auto;vertical-align: middle;margin: -50px 50px;" src="images/image7.png" class="emages"></div>

     <div><input type="image" id="animate1"  src="nav-left.png" class="Animate"></div>
     <div><input type="image" id="animate2" src="nav-right.png" class="Animate2"></div>

</div> 
```

**CSS 代码：**

```
#container {
    position: absolute;
    margin: 120px auto;
    padding: 0px;
    width: 700px;
    height: 350px;
    overflow: hidden;
    left: 24%;

}

.box {
    position: absolute;
    width: 100%;
    height: 300px;
    line-height: 300px;
    font-size: 15px;
    text-align: center;    
    left: 150%;
    top: 84px;
    margin-left: -48%;
    color: white;
}

#box1 {

    left: 50%;
}

#box2 {

}

#box3 {

}

#box4 {

}

#box5 {

}
#box6 {

}
#box7{

} 
```

所以这是我的完整代码。它工作正常，我唯一想要的是，当图像滚动时，我希望它们以样式滚动或带有一些动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:42:17.150

我会做以下事情：

1) 添加一个类来处理你的 CSS 的淡入淡出

```
.fade-in {
opacity: 1;
transition: opacity .25s ease-in-out;
-moz-transition: opacity .25s ease-in-out;
-webkit-transition: opacity .25s ease-in-out;
}

.fade-out {
opacity: 0;
transition: opacity .25s ease-in-out;
-moz-transition: opacity .25s ease-in-out;
-webkit-transition: opacity .25s ease-in-out;
} 
```

2）然后在您的代码中在适当的位置添加/删除类，例如：

```
$this.removeClass('fade-in');
$this.addClass('fade-out');

$next.removeClass('fade-out');
$next.addClass('fade-in'); 
```

# magento - Magento：在订购单下添加一个附加字段，仅供管理员使用

> ID：14038733
> 
> 赞同：1
> 
> 时间：2012-12-26T09:47:40.557
> 
> 标签：magento

除了评论之外，我还需要两个额外的字段来为每个订单添加额外的注释......

我正在尝试运行在网上找到的这个脚本

```
require_once('app/Mage.php');
Mage::app()->setCurrentStore(Mage::getModel('core/store')->load(Mage_Core_Model_App::ADMIN_STORE_ID));
$installer = new Mage_Sales_Model_Mysql4_Setup;
$attribute  = array(
        'type'          => 'text',
        'backend_type'  => 'text',
        'frontend_input' => 'text',
        'is_user_defined' => true,
        'label'         => 'Your attribute label',
        'visible'       => true,
        'required'      => false,
        'user_defined'  => false,   
        'searchable'    => false,
        'filterable'    => false,
        'comparable'    => false,
        'default'       => ''
);
$installer->addAttribute('order', 'your_attribute_code', $attribute);
$installer->endSetup(); 
```

但是在运行并检查订单后，评论旁边没有其他字段......任何人都知道我该怎么做......

# java - onActivityResult() 没有被调用？

> ID：14038738
> 
> 赞同：0
> 
> 时间：2012-12-26T09:48:10.070
> 
> 标签：java, android, android-intent, android-activity

我有一个`MainActivity`which 有两个`TextView`. 用户可以选择开始另一个活动并从中选择数据`ListView`来填充这些`TextView`. 我的主要活动有一个`OnClickListener`开始`Activty`，用户可以从中选择数据并返回主要活动。我的`OnClickListener`代码如下所示：

```
private static final int PICK_START = 0;
private static final int PICK_END = 1;
@Override
    public void onClick(View v) {
        Log.i(MainActivity, "view clicked");
        int id = v.getId();

        if (id == R.id.searchR) {
                        //do nothing
        } else if (id == R.id.startSearch) {
            Intent startIntent = new Intent(this, SList.class);
            startActivityForResult(startIntent, PICK_START);

        } else if (id == R.id.endSearch) {
            Intent startIntent = new Intent(this, SList.class);
            startActivityForResult(startIntent, PICK_END);
        }

    } 
```

当上面的 onClick 方法被调用，然后它开始另一个活动**SList.class**。我有一个列表视图，用户可以从中选择值，在选择值时，结果将被设置，活动将自行完成。代码是：

```
sListview.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                Station selectedS = sArray.get(position);
                Intent returnIntent = new Intent();
                returnIntent.putExtra("_id", selectedS.getId());
                returnIntent.putExtra("name", selectedS.getName());
                setResult(RESULT_OK, returnIntent);
                finish();
            }
        }); 
```

在上面的代码中，活动设置结果并自行完成。直到这里一切都在相应地工作。但是在那之后，当上一个活动开始时，该`onActivityResult()`方法永远不会被调用。代码`onActivityResult()`是：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        Log.i(MainActivity, "" + requestCode);

        // Make sure the request was successful
        if (resultCode == RESULT_OK) {
            // Check which request we're responding to
            if (requestCode == PICK_START) {
                //data.getStringExtra("_id");
                Log.i(MainActivity, data.getStringExtra("name"));

            } else if (requestCode == PICK_END) {
                Log.i(MainActivity, data.getStringExtra("name"));
            }
        }
    } 
```

我不知道为什么永远不会触发 onActivityResult 。甚至有人在他的博客上写道，Android API 中存在错误。在 `startActivityForResult(intent, requestCode);`这个函数中，只要`requestCode = 0`. 但是，如果您将请求代码更改为零以外的任何值，ApiDemos 将失败（并且不会调用 onActivityResult()）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:22:15.047

我找到了我的问题的解决方案。我只需要重新启动我的 Eclipse，我的代码就开始工作了。

# php - 获取推送通知的 android 移动令牌

> ID：14038743
> 
> 赞同：1
> 
> 时间：2012-12-26T09:48:43.113
> 
> 标签：php, android, devicetoken

我有一个 android 应用程序，它向我的 PHP 脚本发送以下信息：mobile_id、os_version、app_version。

是否可以从这些参数中检索 android 设备令牌？我听说你应该以某种方式连接到谷歌来获取它..

但是，我找不到任何关于..

我是android应用程序的新手。任何帮助将不胜感激：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:59:28.673

为此，您需要实施 GCM。

请点击此链接了解详细说明。

[谷歌云消息](http://developer.android.com/google/gcm/gs.html)

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-22T19:11:47.697

GCM 已被弃用。改用 FCM：

[https://firebase.google.com/docs/cloud-messaging/](https://firebase.google.com/docs/cloud-messaging/)

与 GCM 相同的平台，但扩展了更多功能。

# mysql - 如何在mysql中插入微秒精度的日期时间？

> ID：14038746
> 
> 赞同：26
> 
> 时间：2012-12-26T09:48:51.760
> 
> 标签：mysql

我有一个这样的字符串：

```
2011-11-11 11:11:11.111111 
```

我需要将它插入到 MySql 中的 datetime 列中。但是在我插入它之后，它变成了

```
2011-11-11 11:11:11 
```

怎么了？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-26T10:03:16.910

MySql 5.6+ 支持时间值中的[小数秒](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)，而以前的版本不支持。

标准`datetime`列将不保存微秒值，而`datetime(6)`将。您可以在 MySql 5.6 中对其进行测试：

```
CREATE TABLE your_table (
  d1 datetime,
  d2 datetime(6)
);

INSERT INTO your_table VALUES
('2011-11-11 11:11:11.111111', '2011-11-11 11:11:11.111111');

SELECT MICROSECOND(d1) as m1, MICROSECOND(d2) as m2
FROM your_table;

m1 | m2
-----------
0  | 111111 
```

如果您不使用 MySql 5.6+，我建议您使用两列，一列用于日期时间部分，一列用于微秒：

```
CREATE TABLE your_table (
  dt datetime,
  us int
);

INSERT INTO your_table VALUES
('2011-11-11 11:11:11.111111', MICROSECOND('2011-11-11 11:11:11.111111')); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-03T20:38:00.193

在表中使用 datetime( **6** ) 或 timestamp( **6 ) 数据类型，并使用 NOW(** **6** )插入当前时间以获得 6 位小数秒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T09:54:55.050

如[时间值中的小数秒中所述](http://dev.mysql.com/doc/en/fractional-seconds.html)：

> 对于文本值等上下文中的时间值，以及某些时间函数的参数或返回值中的时间值，尾随小数秒部分是允许的。例子：
> 
> ```
> mysql>选择微秒（'2010-12-10 14:12:09.019473'）；
> +--------------------------------------------+
> | 微秒('2010-12-10 14:12:09.019473') |
> +--------------------------------------------+
> | 19473 |
> +--------------------------------------------+
> 
> ```
> 
> 但是，当 MySQL 将值存储到任何时间数据类型的列中时，它会丢弃任何小数部分并且不存储它。

请注意，此行为在 v5.6.4 中[已更改。](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-25T18:29:06.913

将日期时间值插入 MySQL(5.6.17) 的一些示例

```
create database if not exists mydb;
use mydb;
drop table if exists sample;
create table sample (c1 integer, c2 datetime(6),c3 varchar(30));
insert into sample values (1, '2014-07-25 11:18:10.999999', 'Actual Given Value');
insert into sample values (2, now(6), 'From NOW(6) function');
insert into sample values (3, now(), 'From NOW() function');
insert into sample values (4, sysdate(6), 'From sysdate(6) function');
insert into sample values (5, sysdate(), 'From sysdate() function');

select * from sample;

 # c1, c2, c3
'1', '2014-07-25 11:18:10.999999', 'Actual Given Value'
'2', '2014-07-25 11:27:27.314114', 'From NOW(6) function'
'3', '2014-07-25 11:27:27.000000', 'From NOW() function'
'4', '2014-07-25 11:27:27.429121', 'From sysdate(6) function'
'5', '2014-07-25 11:27:27.000000', 'From sysdate() function' 
```

# java - 用户会话过期时如何防止数据丢失？

> ID：14038747
> 
> 赞同：3
> 
> 时间：2012-12-26T09:49:00.200
> 
> 标签：java, session, web-applications

我有一个网络应用程序，该会话在 30 分钟后过期。在客户端，当用户尝试与服务器交互并且服务器检测到用户会话已过期时，客户端将简单地重定向到登录页面。

问题是，用户可能不知道他的会话已过期，并继续**在客户端**工作（例如，写笔记或编辑某些内容），当他尝试将更改发送到服务器时，发生了不好的事情，浏览器重定向到日志在页面和用户数据丢失。

关于如何在用户会话过期时防止数据丢失的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:55:29.433

您是否考虑过提高会话超时？30分钟太少了。一些用户可能需要更长的时间才能填写一份 Web 表单，即使他们一直在工作。我的会话超时是 8-10 小时。缩短它们的唯一原因是节省服务器空间。你真的有这个问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:55:41.353

您将需要在服务器中提供某种支持。一个好的实现将是通过 AJAX 调用从客户端每 31 分钟调用一次用户“中途”的 servlet（以避免重新验证会话，这将导致它永不过期）。

如果服务器中的会话 id 发生变化，它会回复，并且客户端可以显示某种消息。

更简单的实现是每 31 分钟不活动时触发某种重新加载，以便将用户重定向到登录页面。这不需要服务器中的任何额外支持，但用户友好性会降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:52:21.783

如果用户正在他的会话上写笔记或编辑任何内容，则会话不应过期。

您可以轻松地每按 5 个（甚至更多）字符向服务器发送一条保持活动消息，以保持会话处于活动状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:01:32.100

会话超时时间短是有原因的。

1.  安全
2.  数据盗窃

如果您不需要这些，只需延长会话超时时间。或者，插入`AJAX calls`每个更新会话的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T10:06:30.040

在 HTML 中，您可以在 29 分钟后发出警报（JS setTimeout），并在 30 分钟 - 10 秒（元刷新）后跳转到“会话过期”页面。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-26T09:54:40.477

如果用户在 30 分钟内不执行任何操作，会话才会过期。如果用户在 30 分钟之前没有做任何事情，那么 idel 会话过期不会丢失任何数据，因为没有什么可以保留的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-11-03T05:29:13.233

请不要忘记`{{ csrf_field() }}`在您的表格中添加。

我有同样的问题。然后，我把crsf token放在这里！而且，它现在工作正常。这是我的代码：

```
<form method="post" action="{{route('customer.store')}}" class="form-horizontal" enctype="multipart/form-data">
        {{ csrf_field() }}
        <div class="row"> 
            //Your code here
        </div>
</form 
```

# html - CSS 与在 CSS 文件中的工作方式与在 HTML 中的工作方式不同

> ID：14038748
> 
> 赞同：0
> 
> 时间：2012-12-26T09:49:10.870
> 
> 标签：html, css

当我将此代码放在我的 html 文件中时，它可以正常工作：

```
 <style type="text/css" media="screen">
    #headerimg 
    {
      display: block;
      background-image: url('/Content/images/epp/ebweblogo1.gif');
      background-repeat: no-repeat;
      background-position: center center;
            width:100%;
      height:100%;   
        margin: 0;
  padding: 0;
    }
  </style> 
```

但是当我将它移动到我的css文件时：

```
#headerimg 
    {
      display: block;
      background-image: url('/Content/images/epp/ebweblogo1.gif');
      background-repeat: no-repeat;
      background-position: center center;
            width:100%;
      height:100%;   
        margin: 0;
  padding: 0;
    } 
```

这是我的html：

```
</head>
  <body>

    <div class="page">

      <div id="header">
      <div id="headerimg" /> 
```

我假设这是由于图像位置造成的，但我不确定，因为我尝试了路径的变体并且从未让它工作。

有什么建议么？

**编辑**

对不起，你无法读懂我的心，我知道。

当我将 css 放在 html 文件中时，图像显示正常。当我将它移动到 css 文件 (site.css) 时，它根本不显示。我尝试了几种不同的路径，无论我放什么都不会显示。

**更新#2**

当我将我的 html 更改为：

```
<div class="page">

  <div id="header">
    <div id="headerimg">test</div> 
```

我将文本后面的图像作为 1 行表示测试但不是图像的完整大小。

因此，由于 div 的大小，它显然没有显示图像？我将css更改为：

高度：130px；

但这根本没有改变高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:50:34.283

CSS 的两个位不等价。

一方面，您有（id 选择器），它是与（类选择器）`#headerimg`非常不同的选择器。`.headerimg`

`#imgplacement`第二个样本中也缺少。

* * *

至于图像问题 - 您需要确保图像目录的正确路径。

这将与 CSS 所在的位置相关 - 如果在`CSS`文件中，图像需要与 CSS 文件相关。如果它嵌入在 HTML 中，它需要相对于 HTML 文件。

由于路径是有根的（以 开头`/`），它应该可以在任何地方工作。使用开发者工具来确定它在哪里寻找图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:09:20.163

在主页上包含这样的 CSS：

```
<link rel="stylesheet" type="text/css" href="route_to_your_style.css" media="all" /> 
```

然后小心你的形象的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:15:27.890

`<head></head>`在您的部分之间包含 CSS 文件，`HTML`如下所示：

```
<link rel="stylesheet" type="text/css" href="http://www.yoursite.com/css/cssfile.css" /> 
```

# visual-studio-2010 - 为什么我不能用VC2010编译x64平台的汇编代码？

> ID：14038754
> 
> 赞同：9
> 
> 时间：2012-12-26T09:49:39.047
> 
> 标签：visual-studio-2010, assembly

我现在正在练习混合c++代码的汇编代码，我可以毫无问题地编译win32平台的混合代码，如下代码所示：

```
int main()
{

  char alphabet = 'X';
  printf ("Type letter = ");
  __asm
  {                               
       mov ah, 02
       mov dl, [alphabet]       
       int 21h                         
   }

  printf ("\n");
  return (0);
} 
```

但是，当我尝试为 x64 平台编译上述代码时，它失败了。我得到的错误信息如下：

```
error C4235: nonstandard extension used : '__asm' keyword not supported on this architecture 
```

我使用VC2010进行编译，想知道为什么VC2010不支持汇编语言编译，这种情况应该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T09:34:34.273

编译器根本不支持 64 位代码中的内联汇编。

您的选择：

*   在单独的 .asm 文件中编写汇编代码，并将它们与项目的其余部分组合并链接在一起
*   在您的程序中包含预编译的汇编代码作为某个数组中的数据并执行它（您需要确保汇编代码是可重定位的，也就是说，它可以在放置在任意位置时执行，并且您需要将数组下方页面的内存保护更改为可执行文件）
*   如果内部函数足够，则使用它们
*   根本不使用汇编

正如已经提到的，int 21h 函数 2 在 Windows 程序中工作的机会正好为零。该 API 仅适用于 DOS 程序。

# android - SQLiteDatabase 错误插入

> ID：14038759
> 
> 赞同：1
> 
> 时间：2012-12-26T09:50:06.207
> 
> 标签：android, sqlite

主要问题，

1.  是否可以在不使用 onUpdate 的情况下依靠 onCreate 来补充数据库表的更新？

2.  AUTOINCREMENT 是否适用于 STRING 列。这里无脑。

所以我收到一个错误，说明我的插入有问题。从生成的结果可以证明，Cursor.getCount() 不断/仅输出 1 的旧记录。我似乎无法插入以创建第二行。

```
// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "AccountDB";

// Account table name
private final String TABLE_ACCOUNTS = "AccountTable";

    public void onCreate(SQLiteDatabase db) {

    //boolean dbExist = checkDataBase();

    String CREATE_CONTACTS_TABLE = " CREATE TABLE " + TABLE_ACCOUNTS  + "("
            + id + " TEXT PRIMARY KEY AUTOINCREMENT ," + fullname + " TEXT,"
            + username + " TEXT," + password + " TEXT,"+ email + " TEXT," + contact_no + " TEXT,"+ activated + " TEXT," + banned + " TEXT," + ban_reason + " TEXT,"+ new_password_key + " TEXT," + new_password_requested + " TEXT,"
            + new_email + " TEXT," + new_email_key + " TEXT," + last_ip + " TEXT," + last_login + " TEXT," + created + " TEXT,"+ modified +" TEXT, " + encrypt_key + " TEXT,"+ login_key + " TEXT" + ");";
    db.execSQL(CREATE_CONTACTS_TABLE);

}

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(id, acc.getID());
    values.put(fullname, acc.getFullname()); 
    values.put(username, acc.getUsername()); 
    values.put(password, acc.getPassword()); 
    values.put(email, acc.getEmail()); 
    values.put(contact_no, acc.getContactNo());
    values.put(activated, acc.getActivated()); 
    values.put(banned, acc.getBanned()); 
    values.put(ban_reason, acc.getBanReason()); 
    values.put(new_password_key, acc.getNewPasswordKey()); 
    values.put(new_password_requested, acc.getNewPasswordRequested()); 
    values.put(new_email, acc.getNewEmail());
    values.put(new_email_key, acc.getNewEmailKey()); 
    values.put(last_ip, acc.getLastIP()); 
    values.put(last_login, acc.getLastLogin()); 
    values.put(created, acc.getCreated()); 
    values.put(modified, acc.getModified()); 
    values.put(encrypt_key, acc.getEncryptKey()); 
    values.put(login_key, acc.getLoginKey()); 
    System.out.println("hohoho "+acc.getLoginKey());
    Log.v("response",acc.getLoginKey());
    Log.v("DATABASEHandler","Table populated");
    // Inserting Row
    //System.out.println("hereee"+account.getLoginKey());
    db.insert(TABLE_ACCOUNTS, null, values);

    Cursor mCursor =db.query(TABLE_ACCOUNTS, new String[] {id,
                      fullname, username,password,email,contact_no,activated,
                        banned,ban_reason,new_password_key,new_password_requested,
                        new_email,new_email_key,last_ip,last_login,created,modified,
                        encrypt_key,login_key}, null,null, null, null, null);

    int count = mCursor.getCount();
    Log.d("Database stuff", "Count is "+count);
    if(mCursor != null)
        mCursor.moveToNext(); 
```

输出：

```
12-26 17:16:42.855: E/SQLiteDatabase(30078): Error inserting last_ip= new_password_key=null contact_no=0166262596 login_key=TWpZNU4yUTBaREE1TldOa1lUTXlOemxpWVdZM09ESXdZV1JpTTJVeU1UQT0= ban_reason=null password=$2a$08$aQvLAf5fGafdm.XkEkgw1uhg1O.KByN5LIWgIVXtKWWl8tpGlBG/q new_email_key=null banned=0 modified=2012-12-04 06:51:08 last_login=0000-00-00 00:00:00 id=13196 username=babyhir encrypt_key=WlROcll6UTJNWFozYm5rNGRYTjJjUT09 new_password_requested=null created=2012-12-04 06:52:34 email=demo89@hotmail.com activated=1 new_email=null fullname=demo

12-26 17:16:42.855: E/SQLiteDatabase(30078): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed

12-26 17:16:42.855: V/DATABASEHandler(30078): query start
12-26 17:16:42.865: D/Database stuff(30078): Count is 1 (always 1!)
12-26 17:16:42.865: I/System.out(30078): HereID: 13196 (record of 1)

12-26 17:16:42.865: I/System.out(30078): Last IP: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:54:40.697

您正在尝试在具有 . 约束的字段中插入空值`NOT NULL`。检查一下。我认为 last_ip 为空。

编辑：

它违反了其他一些约束。我认为它的问题是由于 TEXT 的自动增量。试试这个：

```
String CREATE_CONTACTS_TABLE = " CREATE TABLE " + TABLE_ACCOUNTS  + "("
            + id + " NUMBER PRIMARY KEY AUTOINCREMENT ," + fullname + " TEXT,"
            + username + " TEXT," + password + " TEXT,"+ email + " TEXT," + contact_no + " TEXT,"+ activated + " TEXT," + banned + " TEXT," + ban_reason + " TEXT,"+ new_password_key + " TEXT," + new_password_requested + " TEXT,"
            + new_email + " TEXT," + new_email_key + " TEXT," + last_ip + " TEXT," + last_login + " TEXT," + created + " TEXT,"+ modified +" TEXT, " + encrypt_key + " TEXT,"+ login_key + " TEXT" + ");"; 
```

# php - 如何将数据从 wordpress 发布到其他服务器（mysql）数据库

> ID：14038762
> 
> 赞同：0
> 
> 时间：2012-12-26T09:50:24.550
> 
> 标签：php, mysql, wordpress

我正在开发一个 word press 插件，其中我有一些数据要保存在另一个 mysql 服务器数据库中。只需将数据保存在另一个 MySql 服务器的数据库表中。希望我很清楚。我怎样才能在程序上解决这个问题。任何非常感谢您的建议。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:54:00.777

您必须阅读 PHP 创建数据库连接的方法。一旦您建立了一个额外的数据库连接（使用第二个数据库的 IP、端口和登录凭据），您将能够通过 SQL 与其交互。您将能够将新的数据库连接分配给句柄，这样您就可以轻松控制将 SQL 查询发送到哪个数据库，并避免与错误的数据库进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:55:10.353

请与新实例建立新的数据库连接并将数据保存到其他数据库。例如。

```
$dbh1 = mysql_connect($hostname, $username, $password); 
$dbh2 = mysql_connect($hostname, $username, $password, true); 

mysql_select_db('database1', $dbh1);
mysql_select_db('database2', $dbh2);
mysql_query('select * from tablename', $dbh1);
mysql_query('select * from tablename', $dbh2); 
```

# java - 您好，我在尝试在soupUi 中上传WSDL 时遇到此错误

> ID：14038765
> 
> 赞同：-5
> 
> 时间：2012-12-26T09:50:31.377
> 
> 标签：java

尝试在soupUi 中上传WSDL 时出现此错误。！它说错误加载 [http://tradingcars.carwale.com/wsapis/tcapi.asmx?WSDL]:java.lang.Exception: Failed to load url;http://tradingcars.carwale.com/wsapis/tcapi.asmx ?WSDL,0-

如果有人知道，请给我一个解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:13:24.657

你的网址对我有用。

[http://tradingcars.carwale.com/wsapis/tcapi.asmx?WSDL](http://tradingcars.carwale.com/wsapis/tcapi.asmx?WSDL)

[http://tradingcars.carwale.com/wsapis/tcapi.asmx?WSDL](http://tradingcars.carwale.com/wsapis/tcapi.asmx?WSDL)

检查您的互联网连接。

并这样做...文件->新soapUI项目

![在此处输入图像描述](../Images/ea3c8a734a9d7e171e82f37ec65dd38f.png)

# powershell - 如何隐藏 Powershell GUI 上的选项卡？

> ID：14038772
> 
> 赞同：4
> 
> 时间：2012-12-26T09:50:45.113
> 
> 标签：powershell, powershell-2.0, powershell-3.0

好的，我创建了一个 powershell 脚本，我正在尝试使主界面使用选项卡式布局。我得到了我想要工作的所有功能，除了我想隐藏顶部的标签并使用侧面的按钮来切换标签。我已经成功地让侧面的按钮选择不同的选项卡，但我不知道如何将选项卡隐藏在顶部？任何人有任何办法如何做到这一点？？？

图片说得最好： ![在此处输入图像描述](../Images/42b9d61d8347ffe2afa8d04f1aba87d3.png)

参考：

1.  [http://msdn.microsoft.com/en-us/library/system.windows.forms.tabpage%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabpage%28v=vs.90%29.aspx)
2.  [http://msdn.microsoft.com/en-us/library/system.windows.forms.tabpage.tabpagecontrolcollection%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabpage.tabpagecontrolcollection%28v=vs.90%29.aspx)
3.  [http://msdn.microsoft.com/en-us/library/system.windows.forms.tabrenderer%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabrenderer%28v=vs.90%29.aspx)
4.  [http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol%28v=vs.90%29.aspx)

## 更新

找到此链接（[WinForms Hiding TabControl Headers](http://stackoverflow.com/questions/6255600/winforms-hiding-tabcontrol-headers)），但它适用于 Vb.net。玩了一个小时左右，但到目前为止没有运气>。>

我的代码：

```
#Generated Form Function
function GenerateForm {

#region Import the Assemblies
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null

#region Generated Form Objects
$MainMenu = New-Object System.Windows.Forms.Form
$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState

#Panels
$Panel1 = New-Object System.Windows.Forms.Panel
$Panel2 = New-Object System.Windows.Forms.Panel

#Buttons
$HomeButton = New-Object System.Windows.Forms.Button
$ScriptSettingsButton = New-Object System.Windows.Forms.Button
$COTSButton = New-Object System.Windows.Forms.Button
$MicrosoftButton = New-Object System.Windows.Forms.Button
$ConfigureButton = New-Object System.Windows.Forms.Button
$MiscToolsButton = New-Object System.Windows.Forms.Button
$TabControl = New-Object System.Windows.Forms.TabControl

#Misc Items
$ProgressBar = New-Object System.Windows.Forms.ProgressBar
$StatusBar = New-Object System.Windows.Forms.StatusBar

#Tabs
$TabControl = New-object System.Windows.Forms.TabControl
$HomeTab = New-Object System.Windows.Forms.TabPage
$ScriptSettingsTab = New-Object System.Windows.Forms.TabPage

#----------------------------------------------
#Generated Event Script Blocks
#----------------------------------------------
#Provide Custom Code for events specified in PrimalForms.
#Unknown
$handler_MainMenu_Load =
$OnLoadForm_StateCorrection= { $MainMenu.WindowState = $InitialFormWindowState }

#Buttons
$HomeButton_OnClick = { $TabControl.SelectTab($HomeTab) }
$ScriptSettingsButton_OnClick = { $TabControl.SelectTab($ScriptSettingsTab) }
$COTSButton_OnClick = {}
$MicrosoftButton_OnClick = {  }
$ConfigureButton_OnClick = {}
$MiscToolsButton_OnClick = {}

$Hometab.Enabled = 

$statusBar1_PanelClick= 

$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 474
$System_Drawing_Size.Width = 665
$MainMenu.ClientSize = $System_Drawing_Size
$MainMenu.DataBindings.DefaultDataSourceUpdateMode = 0
$MainMenu.Name = "MainMenu"
$MainMenu.Text = "Patching Script"
$MainMenu.TopMost = $True
$MainMenu.add_Load($handler_form1_Load)

# == Home Button == #
$HomeButton.Name = "HomeButton"
$HomeButton.Text = "Home"
$HomeButton.TabIndex = 2
$HomeButton.UseVisualStyleBackColor = $True
$HomeButton.add_Click($HomeButton_OnClick)
$HomeButton.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 69
$HomeButton.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 35
$System_Drawing_Size.Width = 100
$HomeButton.Size = $System_Drawing_Size

$MainMenu.Controls.Add($HomeButton)

# == Script Settings Button == #
$ScriptSettingsButton.Name = "ScriptSettingsButton"
$ScriptSettingsButton.Text = "Script Settings"
$ScriptSettingsButton.TabIndex = 3
$ScriptSettingsButton.UseVisualStyleBackColor = $True
$ScriptSettingsButton.add_Click($ScriptSettingsButton_OnClick)
$ScriptSettingsButton.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 110
$ScriptSettingsButton.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 35
$System_Drawing_Size.Width = 100
$ScriptSettingsButton.Size = $System_Drawing_Size

$MainMenu.Controls.Add($ScriptSettingsButton)

# == COTS Button == #
$COTSButton.Name = "COTSButton"
$COTSButton.Text = "C.O.T.S."
$COTSButton.TabIndex = 4
$COTSButton.UseVisualStyleBackColor = $True
$COTSButton.add_Click($COTSButton_OnClick)
$COTSButton.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 151
$COTSButton.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 35
$System_Drawing_Size.Width = 100
$COTSButton.Size = $System_Drawing_Size

$MainMenu.Controls.Add($COTSButton)

# == Microsoft Button == #
$MicrosoftButton.Name = "MicrosoftButton"
$MicrosoftButton.Text = "Microsoft Patches"
$MicrosoftButton.TabIndex = 5
$MicrosoftButton.UseVisualStyleBackColor = $True
$MicrosoftButton.add_Click($MicrosoftButton_OnClick)
$MicrosoftButton.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 192
$MicrosoftButton.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 35
$System_Drawing_Size.Width = 100
$MicrosoftButton.Size = $System_Drawing_Size

$MainMenu.Controls.Add($MicrosoftButton)

# == Configure Button == #
$ConfigureButton.Name = "ConfigureButton"
$ConfigureButton.Text = "Configure Script"
$ConfigureButton.TabIndex = 6
$ConfigureButton.Location = $System_Drawing_Point
$ConfigureButton.UseVisualStyleBackColor = $True
$ConfigureButton.add_Click($ConfigureButton_OnClick)
$ConfigureButton.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 233
$ConfigureButton.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 35
$System_Drawing_Size.Width = 100
$ConfigureButton.Size = $System_Drawing_Size

$MainMenu.Controls.Add($ConfigureButton)

# == Misc Tools Button == #
$MiscToolsButton.Name = "MiscToolsButton"
$MiscToolsButton.Text = "Misc Tools"
$MiscToolsButton.TabIndex = 7
$MiscToolsButton.UseVisualStyleBackColor = $True
$MiscToolsButton.add_Click($MiscToolsButton_OnClick)
$MiscToolsButton.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 274
$MiscToolsButton.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 35
$System_Drawing_Size.Width = 100
$MiscToolsButton.Size = $System_Drawing_Size

$MainMenu.Controls.Add($MiscToolsButton)

# == Tab Control == #
$TabControl.Name = "TabControl"
$TabControl.TabIndex = 4
$TabControl.SelectedIndex = 0
$TabControl.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 118
$System_Drawing_Point.Y = 70
$TabControl.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 374
$System_Drawing_Size.Width = 535
$TabControl.Size = $System_Drawing_Size

$MainMenu.Controls.Add($TabControl)

# == Home Tab == #
$HomeTab.DataBindings.DefaultDataSourceUpdateMode = 0
$HomeTab.Name = "HomeTab"
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 4
$System_Drawing_Point.Y = 22
$HomeTab.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 205
$System_Drawing_Size.Width = 445
$HomeTab.Size = $System_Drawing_Size
$HomeTab.TabIndex = 2
$HomeTab.Text = "Tab2"
$HomeTab.UseVisualStyleBackColor = $True

$TabControl.Controls.Add($HomeTab)

# == Script Settings Tab == #
$ScriptSettingsTab.DataBindings.DefaultDataSourceUpdateMode = 0
$ScriptSettingsTab.Name = "ScriptSettingsTab"
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 4
$System_Drawing_Point.Y = 22
$ScriptSettingsTab.Location = $System_Drawing_Point
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 205
$System_Drawing_Size.Width = 445
$ScriptSettingsTab.Size = $System_Drawing_Size
$ScriptSettingsTab.TabIndex = 2
$ScriptSettingsTab.Text = "Tab2"
$ScriptSettingsTab.UseVisualStyleBackColor = $True

$TabControl.Controls.Add($ScriptSettingsTab)

# == Panel 1 == #
#$panel1.DataBindings.DefaultDataSourceUpdateMode = 0
#$System_Drawing_Point = New-Object System.Drawing.Point
#$System_Drawing_Point.X = 118
#$System_Drawing_Point.Y = 70
#$panel1.Location = $System_Drawing_Point
#$panel1.Name = "panel1"
#$System_Drawing_Size = New-Object System.Drawing.Size
#$System_Drawing_Size.Height = 374
#$System_Drawing_Size.Width = 535
#$panel1.Size = $System_Drawing_Size
#$panel1.TabIndex = 8
#$Panel1.BackColor = [System.Drawing.Color]::CornflowerBlue

#$MainMenu.Controls.Add($panel1)

# == Progress Bar == #
$progressBar.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 589
$System_Drawing_Point.Y = 458
$progressBar.Location = $System_Drawing_Point
$progressBar.Name = "progressBar"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 15
$System_Drawing_Size.Width = 75
$progressBar.Size = $System_Drawing_Size
$progressBar.TabIndex = 0

$MainMenu.Controls.Add($progressBar)

# == Status bar == #
$StatusBar.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 0
$System_Drawing_Point.Y = 456
$StatusBar.Location = $System_Drawing_Point
$StatusBar.Name = "StatusBar"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 18
$System_Drawing_Size.Width = 665
$StatusBar.Size = $System_Drawing_Size
$StatusBar.TabIndex = 1
$StatusBar.Text = "statusBar1"
$StatusBar.add_PanelClick($statusBar_PanelClick)

$MainMenu.Controls.Add($StatusBar)

# == Save and Open Form == #
$InitialFormWindowState = $MainMenu.WindowState
$MainMenu.add_Load($OnLoadForm_StateCorrection)
$MainMenu.ShowDialog()| Out-Null

} #End Function

#Call the Function
GenerateForm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:53:12.637

将以下内容添加到 TabControl 属性设置部分：

```
$TabSizeMode = New-object System.Windows.Forms.TabSizeMode
$TabSizeMode = "Fixed"
$TabControl.SizeMode =$TabSizeMode
$TabControl.ItemSize = New-Object System.Drawing.Size(0, 1)
$TabAppearance = New-object System.Windows.Forms.TabAppearance
$TabAppearance = "Buttons"
$TabControl.Appearance = $TabAppearance 
```

来自[凯文登特的博客](http://weblogs.asp.net/kdente/archive/2005/11/14/430591.aspx)。

要显示选项卡正确切换，您可以添加：

```
$HomeTab.BackColor = "White"
$ScriptSettingsTab.BackColor = "Red" 
```

# foursquare - 去过那里的foursquare api

> ID：14038780
> 
> 赞同：0
> 
> 时间：2012-12-26T09:51:29.940
> 
> 标签：foursquare

我要在我的网站上显示可能是最后 5 个人在我的场地登记的名单。我没有在 api 中找到任何方法来做到这一点，最接近的是向你的朋友展示......我告诉我的老板这是不可能的，然后他向我展示了这个网站：

[http://www.brooklynmuseum.org/community/foursquare/](http://www.brooklynmuseum.org/community/foursquare/)

怎么可能得到这种列表，如果可能的话没有身份验证（我的服务器不会打电话给真人，所以没有oauth ...）

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:57:29.003

您可以使用 Venue Push API（[在此处](https://developer.foursquare.com/overview/realtime)记录）在用户签入您的托管场所时通知您的网站，您可以使用它来更新此类列表。

# jquery - 在选项卡更改时重新加载相同的块

> ID：14038781
> 
> 赞同：0
> 
> 时间：2012-12-26T09:51:35.440
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我在选项卡的主块中有滑块，需要根据选择的选项卡更改它的范围。

例如，如果选择 tab1，范围是 1-50，如果 tab2 - 范围是 25-100。

我在示例中查看了如何为选项卡内的其他页面重新加载 AJAX 工作，并且还使用`handleSelect(event, tab)`事件处理程序来更改选项卡选择上的外部图像，但我不明白如何在不重复的情况下重新加载选项卡的内容......

这是带有部分代码的任务示例：http: [//jsfiddle.net/QkaQq/3/](http://jsfiddle.net/QkaQq/3/)

**如何在不同的选项卡中使用相同的块？（*我的意思是不要为第二个选项卡创建第二个滑块，而是在选择第二个选项卡时重新加载具有新范围的当前滑块*）**

# css - CSS - 如何摆脱用户代理 CSS？

> ID：14038782
> 
> 赞同：1
> 
> 时间：2012-12-26T09:51:37.437
> 
> 标签：css, user-agent

我网站的菜单是由 ul/li 语法创建的列表。我已经删除了关于菜单列表的所有 CSS 行，但它仍然看起来像这样，公告点奇怪地出现在菜单项文本的最后一个字符上。我要疯了才能处理这个。

![在此处输入图像描述](../Images/747db16c70c0fb0ac2cc9313233e1076.png)

![在此处输入图像描述](../Images/4c8b68a2af0f0b2015ecaf20a5fc570b.png)

为什么在 IE/Google Chrome 中会发生这种情况？

编辑：感谢您的帮助。但重置后，列表未垂直对齐。它看起来像这样，如果我再次将 list-style-type:none 添加到 li 元素，点就会再次出现。 ![在此处输入图像描述](../Images/13475faf2a1af587626b2707402e7d5d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:53:58.760

您需要覆盖用户代理样式。要删除点，请覆盖[list-style-type](http://www.w3schools.com/cssref/pr_list-style.asp)

```
ul {
    list-style-type: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:54:33.580

使用[Reset.css](http://meyerweb.com/eric/tools/css/reset/)来消除所有跨浏览器的差异，但是您在 Chrome 中描述的问题可能是；由您的`-webkit-padding-start`财产引起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:58:52.167

尝试使用 CSS 重置，它将覆盖默认样式。

例如重置在此页面[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# php - isset($_POST) 是否正确使用？

> ID：14038783
> 
> 赞同：1
> 
> 时间：2012-12-26T09:51:42.267
> 
> 标签：php, post

我想我面临的问题很常见，但我没有在互联网上看到一个线程。

如果我使用`isset($_POST)`，

1.  它会永远回来`true`吗？
2.  响应是否取决于我使用的 PHP 版本？
3.  是`$_POST`变量吗？（毕竟这是一个超级全局“变量”）。因为在 php.net 文档中，提到了

**`isset()`仅适用于变量，因为传递任何其他内容都会导致解析错误。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:55:18.137

> 它会永远返回 true 吗？

是的，即使页面是使用`GET`方法打开的，或者没有`POST`编辑任何内容。

> 响应是否取决于我使用的 PHP 版本？

不，它没有（不确定非常旧的 PHP 版本）。

> $_POST 是变量吗？

是的

> isset() 仅适用于变量，因为传递其他任何内容都会导致解析错误。

手册中明确提到了这一点，这样人们就不会尝试做一些*卑鄙的*事情。例如，这些不起作用：

```
function getVarName() { return '_POST'; }
isset(getVarName());
isset('$_POST'); 
```

现在，您为什么要检查是否`$_POST`已设置。也许想检查是否发布了某个变量（例如电子邮件），在这种情况下，您需要检查：

```
isset($_POST["email"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:55:47.013

`isset($_POST);`将始终返回 true。如果您想检查它是否包含某些内容，请使用`empty($_POST);`

> 响应是否取决于我使用的 PHP 版本？

不

> $_POST 是一个变量吗？

是的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:56:08.620

我建议使用以下方法之一：

```
if($_POST){

}
if(!empty($_POST)){

} 
```

1、它会一直返回true吗？

> isset($_POST) 将始终返回 true。如果 $_POST 为空，它将返回 false。

2、响应是否取决于我使用的 PHP 版本？

> 我不确定 4.* 以下的版本，但响应始终相同。

3、$_POST是变量吗？

> 是的，它被认为是超全局的，例如：$GLOBALS、$_SESSION、$_POST、$_GET

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T09:56:19.713

无论您是否发布任何数据`$_POST`，都将始终设置为数组。您可能正在寻找的是`empty()`查看是否实际发布了任何数据的方法，例如：

```
if(!empty($_POST)) {
    // POST data was set
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T09:59:11.063

*   它会永远返回 true 吗？

是的，它永远都是真的

*   响应是否取决于我使用的 PHP 版本？

未在[PHP 4.3.0 - 5.4.10上测试](http://3v4l.org/saPAf)

*   是`$_POST`变量吗？

绝对是

更好的验证方法`$_POST`是使用[空](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T10:00:58.293

```
Isset() 
```

仅当它包含某个值时才返回 true（它可以是零 0）。如果它没有任何值，则返回 false。如果你想防止（0）使用

```
if(isset($_POST) && $_POST) 
```

如果只有它具有非零值，这将是正确的

```
$_POST is global array

Response doesn't depend upon the version of PHP 
```

# c# - 如何确定在特定坐标的平面上是否有物体？

> ID：14038787
> 
> 赞同：3
> 
> 时间：2012-12-26T09:51:49.333
> 
> 标签：c#, unity3d, game-physics

我正在 3D 环境中实现 A* 算法，我已经到了需要确定在特定坐标的平面上（我的角色将在其上行走）上是否有东西的地步。

我创建了一个类`Board`，它包含的地图`Nodes`（每个都包含其坐标的中心）。所以我们可以说我已经将平面离散化为类似棋盘的东西。现在我需要知道每个人是否有东西`Node`可以在这架飞机上创建一个可步行/不可步行的地图。

如何在 Unity3D 中做到这一点？光线投射？

**编辑**

我能想到一件事，但我认为这有点低效：

创建一个临时对撞机（获取`Board`tile 的区域和一些高度）并检查是否有东西与它发生碰撞，然后继续为`Board`.

你认为这会是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:12:31.890

您可以使用来自每个节点坐标的光线投射（ [Physics.Raycast ）。](http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html)确保您正在检查的对象有碰撞器。这只会检查单个点，但不会检查节点的整个区域。

要检查每个节点上方的区域，而不仅仅是一个点，您可以使用球体或胶囊投射或检查。请参阅[Physics](http://docs.unity3d.com/Documentation/ScriptReference/Physics.html)的类函数列表中的选项。

另一种方法是在场景中的每个节点上都有一个带有适当形状的触发器碰撞器的游戏对象。[您可以通过递增和递减脚本的OnTriggerEnter](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnTriggerEnter.html)和[OnTriggerExit](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnTriggerExit.html)方法（即 MonoBehaviour 子类）中的计数器来跟踪每个节点上有多少其他对象（带有碰撞器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:15:24.960

多亏了[Ghopper21](https://stackoverflow.com/users/848235/ghopper21)`Node`的回答，我从上面提出了 ShpereCasting 每个，例如`Node (0,0,0)`从 Spherecasted `(0,100,0)`。

# java - 我如何在java中替换{内部字符串

> ID：14038791
> 
> 赞同：3
> 
> 时间：2012-12-26T09:52:02.003
> 
> 标签：java, replace

任何人都可以帮我替换java中的字符串中的'{'

例如

```
String str = "abc{ad}";
str = str.replace("{","("); 
```

但这似乎是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T10:00:51.203

[`String#replace(char,char)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)做到这一点并适合一个角色。您所要做的就是将您的`replace()`调用切换为：

```
str = str.replace('{','(');
 //               ^ ^ ^ ^
 //             not the ' instead of " 
```

但是，`String`在 java 中是*不可变*的，因此您无法更改它¹，您只能生成具有这些属性的新字符串对象。

* * *

[（1）无论如何都不容易，可以用[反射API](http://docs.oracle.com/javase/tutorial/reflect/index.html)完成，但**不**建议这样做。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:52:46.283

`{`并且`(`是 java 中的元字符，你应该用反斜杠转义它们。并且`String.replace`不使用正则表达式，使用`[String.replaceAll][1]`or[`String.replaceFirst`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)代替

```
str = str.replaceAll("\\{","\\("); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:01:30.077

这将适用于

```
String strAll = "abc{ad}";
strAll = strAll.replaceAll("\\{","("); 
```

# java - java中的无头异常

> ID：14038793
> 
> 赞同：7
> 
> 时间：2012-12-26T09:52:11.737
> 
> 标签：java, exception

听说我们在使用awt或者swing的时候，在创建FRAME的时候，可能会抛出一个未经检查的异常，就是“Headless exception”。我从来没有遇到过这个例外。谁能告诉这个异常何时抛出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T09:54:14.533

类`HeadlessException`描述

在不支持键盘、显示器或鼠标的环境中调用依赖于键盘、显示器或鼠标的代码时引发。

更多详情[http://docs.oracle.com/javase/7/docs/api/java/awt/HeadlessException.html](http://docs.oracle.com/javase/7/docs/api/java/awt/HeadlessException.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T11:32:20.773

我的 2 美分 .. 你也可以设置 java.awt.headless=true/false 例如`System.setProperty("java.awt.headless", "true"/"false");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T11:16:41.460

当我们尝试从没有终端（head）的系统中实例化 awt 或 swing 组件时，会引发此异常。通常这发生在虚拟机 unix 系统上。执行程序前需要安装xbfb组件并设置DISPLAY参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-04T03:14:18.913

# AS400 系统的 JDBC 连接异常

如果您为 AS400 系统使用 JDBC 连接，则这表明驱动程序要求在提示中输入凭据，但由于它不是交互式会话而失败。为该连接提供的凭据无效，默认选项是通过提示询问它们。

如果您多次尝试使用相同的错误凭据，则 AS400 系统能够阻止您。然后你需要解锁你的 userId 来建立连接。

# java - 为什么在 DirectByteBuffer 中使用 '<< 0'

> ID：14038794
> 
> 赞同：1
> 
> 时间：2012-12-26T09:52:19.840
> 
> 标签：java, nio

我在 DirectByteBuffer.java 中找到了这段代码：

```
private long ix(int i) {
    return address + (i << 0);
} 
```

有没有什么特殊用途，或者和

```
private long ix(int i) {
    return address + i;
} 
```

谁能解释一下，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:56:04.567

它完全一样，只是它清楚地表明它没有被转移。

如果您查看 ShortBuffer 或 CharBuffer，您可能会看到`<< 1`IntBuffer 和 FloatBuffer`<<2`以及 LongBuffer 和 DoubleBuffer`<< 3`

如果您查看源代码，则还有许多空白行，并且格式表明代码是从通用模板生成的，这就是生成的原因`<< 0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:55:16.000

如果有其他方法基本上是重复的`ix`但具有不同的转变，那么它可能是为了方法之间的一致性。除此之外，它与您编写的第二种方法完全相同。

# android - 禁用 SDCard 访问

> ID：14038802
> 
> 赞同：2
> 
> 时间：2012-12-26T09:53:12.697
> 
> 标签：android

我有一个要求，我需要阻止用户访问设备（电话）SDCard，更像是完全禁用 SDCard。有没有办法我可以做到这一点？有人可以指导我对此提供一些意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:55:21.553

您可以安全地删除 sdcard，我认为您的要求是相同的：

```
Intent i = new Intent(android.provider.Settings.ACTION_MEMORY_CARD_SETTINGS);
    startActivity(i); 
```

卸载 SD 卡是在不受用户完全控制的情况下可能被恶意使用的操作之一。如果它可以纯粹在软件中完成（无需用户干预），那么代码可能会破坏设备上运行的其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:37:47.340

您需要出于什么目的禁用？保护您的应用程序？如果是这样，您可以通过以下方式进行监控

使用文件观察者。做一些事情，如果您的应用程序移动到特定路径使用

```
file.delete(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:58:15.480

根据您的最佳答案，您无法从正在运行的设备中卸载 SD 卡：[`(re)mounting the SD card on android emulator`](https://stackoverflow.com/questions/2671069/remounting-the-sd-card-on-android-emulator)

# asp.net - 如何访问选择查询的行和列

> ID：14038805
> 
> 赞同：-2
> 
> 时间：2012-12-26T09:53:14.377
> 
> 标签：asp.net, sql-server-ce, webmatrix

```
var r=db.execute("query") 
```

你好！我想访问从此查询获得的列（和行）（如 q[0].column1）。但是当我将它存储在 var 中时，这是不可能的。

我可以使用什么样的数据类型或技术？

这样做时单行输出和多行输出有区别吗？

我正在使用 webmatrix 中的 sql server CE db（sdf 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:51:25.093

我想 db 是 WebMatrix.Data 命名空间中的[数据库类型](http://msdn.microsoft.com/en-us/library/webmatrix.data.database%28v=vs.111%29.aspx)的对象，用类似的命令打开

```
var db = Database.Open("yourDb"); 
```

如果这是正确的，则 Execute 方法（大写 E）不会返回查询，而是返回一个整数，它是受执行的 SQL 语句（INSERT、UPDATE 或 DELETE）影响的记录数。

返回查询结果的方法有 3 个：Query、QuerySingle 和 QueryValue。

查询将行列表作为 IEnumerable 对象返回。以下示例查询 Northwind 表并显示结果：

```
@{
    var db = Database.Open("Northwind");
    var data = db.Query("SELECT ProductID, ProductName FROM Products WHERE SupplierID = 1");
    foreach (var row in data){
        <p>@row.ProductID - @row.ProductName</p>
    }
} 
```

QuerySingle 返回单行作为对象，例如：

```
@{
    var db = Database.Open("Northwind");
    var data = db.QuerySingle("SELECT ProductID, ProductName FROM Products WHERE ProductID = 10");
    <p>@data.ProductID - @data.ProductName</p>
} 
```

QueryValue 以 Object 形式返回单个值：

```
@{
    var db = Database.Open("Northwind");
    var data = db.QueryValue("SELECT UnitPrice FROM Products WHERE ProductID = 14");
    <p>The price of product n. 14 is: @data</p>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:56:51.100

您的数据库将返回一个表或数据集。为了访问每个单元格中的数据，您需要遍历 DataTable 或 DataSet 行并指定每个列的索引或名称。

# c# - 在asp.net MVC2中将html表导出到excel

> ID：14038811
> 
> 赞同：4
> 
> 时间：2012-12-26T09:53:48.547
> 
> 标签：c#, jquery, ajax, asp.net-mvc-2, export-to-excel

您好正在寻找如何在 ASP.NET MVC 中导出到 excel 的最佳方法

现在我从 billsternberger.net 得到了这个

[使用 C# 从 ASP.NET MVC 导出到 Excel 或 CSV](http://www.billsternberger.net/asp-net-mvc/export-to-excel-or-csv-from-asp-net-mvc-with-c/)

```
 //Export to excel
        public ActionResult Download()
        {

            List<Lookup> lookupList = data,GetLookupList();
            var grid = new System.Web.UI.WebControls.GridView();

            grid.DataSource = lookupList;
            grid.DataBind();

            Response.ClearContent();
            Response.AddHeader("content-disposition", "attachment; filename=YourFileName.xlsx");
            Response.ContentType = "application/vnd.ms-excel";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            grid.RenderControl(htw);
            Response.Write(sw.ToString());
            Response.End();

            return View();
        } 
```

这是从绑定到数据网格并导出到excel的工作。

现在我需要做的是获取我的 html 表并将其导出到 excel 中，我在其中使用 jquery 数据表来处理表数据，因此它的重量会更轻，因为它是在客户端完成的。

我尝试使用 jquery 和 ajax 将我的 html 表传递给我的控制器上的实体

```
function  Export()  
{    

    var details = {};                                        
    details.LookupName = $("#tblLookup").html();

    //Validate details

    var url_ = generateURL("/Home/Download");                    //Call Save Controller  and pass details entities  

    $.ajax({
        type: "POST",
        url: url_,
        data: details,                                            //details will act as the Entities Model
        traditional: true,
        success: function(data) {

        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert("error: " + XMLHttpRequest.responseText);
        },
        dataType: 'json'
    });

}; 
```

但它让我`A potentially dangerous Request.Form value was detected from the client`等，..

它是如何在 MVC 上完成的？我已经在寻找一些类似的主题，但它总是让我进入我的第一个工作样本。

感谢问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:05:53.220

最简单的解决方案是将 HTML 表导出为 CSV 文件并发送到服务器。让我们举个例子。假设我们已经定义了一个视图模型：

```
public class ExportViewModel
{
    [AllowHtml]
    public string Csv { get; set; }
} 
```

和一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new ExportViewModel());
    }

    [HttpPost]
    public ActionResult Export(ExportViewModel model)
    {
        var cd = new ContentDisposition
        {
            FileName = "YourFileName.csv",
            Inline = false
        };
        Response.AddHeader("Content-Disposition", cd.ToString());
        return Content(model.Csv, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
    }
} 
```

现在在对应的视图里面我们假设我们已经生成了一些`<table>`（这个表的生成方式在这里真的没什么意思）：

```
@model ExportViewModel

<table id="myTable">
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>Foo</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Bar</td>
        </tr>
    </tbody>
</table>

@using (Html.BeginForm("Export", null, FormMethod.Post, new { id = "export" }))
{
    @Html.HiddenFor(x => x.Csv)
    <button type="submit">Export to Excel</button>
}

<script type="text/javascript" src="http://www.kunalbabre.com/projects/table2CSV.js"></script>
<script type="text/javascript">
    $('#export').submit(function () {
        $('#Csv').val($('#myTable').table2CSV({ delivery: 'value' }));
    });
</script> 
```

我们正在使用[`table2CSV jQuery plugin`](http://www.kunalbabre.com/projects/table2CSV.php)将 HTML 表格转换为 CSV 格式。然后，在将表单提交到服务器之前，生成的 CSV 将存储在隐藏字段中。

如果要构建本机 XLSX 文件，则必须在服务器上使用[OpenXML SDK](http://msdn.microsoft.com/en-us/library/dd440953.aspx)。您不能只获取 HTML 表格并将其转换为原生 Excel 文件。此解决方案将更难付诸实践，因为您只需将数据发送到服务器，但它将允许您对生成的 Excel 文件进行更大程度的自定义。

# javascript - 如何使用 onclick 方法清除 textarea 值

> ID：14038814
> 
> 赞同：2
> 
> 时间：2012-12-26T09:54:07.577
> 
> 标签：javascript, textarea

I'm having a listBox, when selected it, it will be printed in the textArea and beside to it I have given a clear button, so when clicked the value of the textArea has to be cleared, it works fine, now the problem is ，在清除 textArea 中的值并再次选择 listBox 后，该值没有打印在 textArea 上。可能是什么问题？这是代码，

HTML：

```
<select id="aggregationFunct" name="aggregationFunct" size="3" multiple="multiple">
<option value="Count">Count</option>
<option value="Sum">Sum</option>
<option value="Avg">Avg</option>
</select>

<input type="button" id="addToExp1Id" value="Add" onclick="addToExpText()" >
</br> </br>
<label for="expTextId" style="font-family: sans-serif; font-size: small;"> Expression    : </label>        
<textarea name="textArea" id="expTextId" readonly="readonly"> </textarea>
<input type="button" id="clearId" value="Clear" onclick="clearTextArea()"> 
```

JavaScript：

```
function addToExpText() {
alert("hello);
var aggreFunct = document.getElementById("aggregationFunct").value;

var obj = document.getElementById("expTextId");
var aggFun = document.createTextNode(aggreFunct);
obj.appendChild(aggFun);
obj.appendChild(openP);
}

function clearTextArea(){
 document.form1.textArea.value='';

} 
```

清除 textArea 中的值后，如果我再次单击 listBox 值并添加它，它不会被添加。请帮助...这是无法正常工作的实施，可能是因为我是第一次使用它，我可能错了。

[http://jsfiddle.net/8dHf5/5/](http://jsfiddle.net/8dHf5/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:07:11.130

不知道为什么会这样，但这里有几个可能的修复：您可以使用 value 来添加和清除，而不是使用 append（添加新的聚合函数）：

```
function addToExpText() {
    alert("hello");
    var aggreFunct = document.getElementById("aggregationFunct").value;
    var obj = document.getElementById("expTextId").value += aggreFunct;    
}

function clearTextArea(){
            document.getElementById("expTextId").value='';              
} 
```

演示：http: [//jsfiddle.net/8dHf5/17/](http://jsfiddle.net/8dHf5/17/)

或者您可以使用删除子节点来清除 textarea 的值：

```
function addToExpText() {
    alert("hello");
    var aggreFunct = document.getElementById("aggregationFunct").value;
     var obj = document.getElementById("expTextId");
     var aggFun = document.createTextNode(aggreFunct);
     obj.appendChild(aggFun);    
}

function clearTextArea(){
            var myNode = document.getElementById("expTextId");
            while (myNode.firstChild) {
                myNode.removeChild(myNode.firstChild);
            }

     }
​ 
```

演示：http: [//jsfiddle.net/8dHf5/14/](http://jsfiddle.net/8dHf5/14/)

此外，您的代码中有一行`obj.appendChild(openP);`，但我没有看到它在代码中可用，所以我将其删除。

另一个时刻：在你的`clearTextArea`你试图访问你的文本区域`document.textArea`- 如果我没有遗漏什么，它是 IE 唯一的功能，它适用于 ids 而不是名称。最好使用跨浏览器的 document.getElementById。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:04:49.197

您的代码中有一些错误。我已经修改了...

现在您可以清除数据了。请参考以下代码：

```
<html>
<body>
<script>
function addToExpText() {
alert("hello");
var aggreFunct = document.getElementById("aggregationFunct").value;

var obj = document.getElementById("expTextId");
var aggFun = document.createTextNode(aggreFunct);
obj.appendChild(aggFun);

}

function clearTextArea(){
var textArea = document.getElementById("expTextId");
 while (textArea.firstChild) {
            textArea.removeChild(textArea.firstChild);
        }

} 
</script>
<select id="aggregationFunct" name="aggregationFunct" size="3" multiple="multiple">
<option value="Count">Count</option>
<option value="Sum">Sum</option>
<option value="Avg">Avg</option>
</select>

<input type="button" id="addToExp1Id" value="Add" onclick="addToExpText()" >
</br> </br>
<label for="expTextId" style="font-family: sans-serif; font-size: small;"> Expression    : </label>        
<textarea name="textArea" id="expTextId" readonly="readonly"> </textarea>
<input type="button" id="clearId" value="Clear" onclick="clearTextArea()">

</body>
</html> 
```

# c# - 不知道在哪里问，哪个1实际上更好？

> ID：14038815
> 
> 赞同：3
> 
> 时间：2012-12-26T09:54:10.043
> 
> 标签：c#

```
 Customer cust = new Customer();
       cust.RecId = lblRecId.Text;
       cust.CustCd = txtCustCd.Text;
       cust.CustName = txtCustName.Text;
       cust.Save(); 
```

或者

```
cust.SaveRecord(lblRecId.Text , txtCustCd.Text, txtCustName.Text) 
```

两者都做同样的工作，但哪个 1 实际上更好？我和lead其实有争论，我使用top的方法，因为我可以自由地按任何顺序分配值，但他坚持认为bottom 1更好？不知道实际要搜索什么，任何 1 介意给我一些指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:58:00.957

第一个是更好的方法。但这是个人观点。

`Save`应该保持对象的当前状态。并且状态可以在程序的其他部分更新。

然而，过载`Save`也不是坏主意。但作为没有。字段增加后一个版本变得庞大且不可维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:17:02.470

如果您已经拥有客户类别中客户的所有数据，则第一种方法非常有用。如果您没有包含数据的客户类，则第二种方法更好。

我们经常使用第一种方法，但是我们也有一些静态方法来检索具有特定键的客户，例如：

```
 // A static method in Customer class.
 public static Customer Get(string key)
 {
     Customer customer;
     FCustomers.TryGetValue(key, out customer);
     return customer;
 } 
```

这带有一个静态构造函数，它将所有客户加载到内存中，以及从数据库中创建、保存和删除客户的方法。

这是因为只与一直需要的数据相关，我不认为客户是那种数据。

# java - 通过 Lotus Notes 使用 java Apache Commons Mail 发送电子邮件

> ID：14038819
> 
> 赞同：3
> 
> 时间：2012-12-26T09:54:17.327
> 
> 标签：java, email, lotus-notes, apache-commons-email

我在使用 Java 程序中的 Lotus Notes 发送电子邮件时遇到问题。我知道这非常简单，但我想我错过了一些东西。我的代码如下；

```
import java.util.logging.Level;
import java.util.logging.Logger;
import org.apache.commons.mail.EmailException;
import org.apache.commons.mail.SimpleEmail;

public class MailClass {

    public void SendMail() {
        SimpleEmail email = new SimpleEmail();

    try {
        email.setHostName("mail.smtp.host");
        email.addTo("recipient@company.com");
        email.setFrom("sender@agency.com");
        email.setSubject("Hello World");
        email.setMsg("This is a simple test of commons-email");
        email.send();

    } catch (EmailException ex) {
        Logger.getLogger(MailClass4.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public static void main(String[] args) {
    MailClass main = new MailClass();
    main.SendMail();
  }
} 
```

我不断收到此错误

```
SEVERE: null
org.apache.commons.mail.EmailException: Sending the email to the following server     failed : mail.smtp.host:25
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242)
...
Caused by: javax.mail.MessagingException: Unknown SMTP host: mail.smtp.host;
nested exception is:java.net.UnknownHostException: mail.smtp.host at    com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1970) 
```

我猜这与我的主机有关，但不确定该怎么做。据我了解，您的主机应该是您的电子邮件客户端（例如 mail.smtp.google.com）。但由于这是 Lotus Notes（顺便说一句，它在我们的 Intranet 中运行），因此实施会有所不同。我见过使用“mail.smtp.host”作为主机的其他示例，但我无法正确处理这个......这是我第一次做一个电子邮件程序，所以我对此一无所知.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:55:21.950

您可以将运行在 Intranet 上的 Domino 服务器用作 SMTP 服务器，但首先您必须询问您的管理员 Domino 是否已设置为允许 SMTP - 同时询问正确的主机名和端口）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:26:48.313

setHostName 需要 smtp 服务器的主机名或 IP 地址。异常清楚地表明了问题所在。

Lotus Notes 基本上只是一个客户端，与您要完成的任务无关。

# android - Android webview twitter链接打不开

> ID：14038828
> 
> 赞同：0
> 
> 时间：2012-12-26T09:54:53.050
> 
> 标签：android, webview

下面的链接没有在 android 中打开`webview`。我是 android 新手。有人帮我在 webview 中打开这个链接。

[https://mobile.twitter.com/SCHOOLinSITES](https://mobile.twitter.com/SCHOOLinSITES)

我尝试通过以下方式打开它

**XML**

```
<WebView android:id="@+id/webView51" 
 android:layout_width="match_parent" 
 android:layout_height="match_parent">
</WebView> 
```

**活动**

```
WebView w=(WebView)findViewById(R.id.webView51);    
w.getSettings().setDomStorageEnabled(true);
w.getSettings().setJavaScriptEnabled(true);
w.loadUrl("https://mobile.twitter.com/SCHOOLinSITES"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:13:49.103

在您的 Webview 中设置一个 userAgent。

```
webView.getSettings().setUserAgentString("Android");
webView.loadUrl("https://mobile.twitter.com/SCHOOLinSITES"); 
```

# install4j - 在 Install4j 中，如何在控制台模式下取消安装？

> ID：14038831
> 
> 赞同：1
> 
> 时间：2012-12-26T09:54:58.277
> 
> 标签：install4j

在 Install4j 中，如何在控制台模式下取消安装？

我想询问用户是否要重试、退出或忽略。我希望答案在控制台模式和 GUI 模式下都有效。

我可以检查我是否处于控制台模式（context.isConsole()），但我无法取消它（screen.cancel() 与控制台模式无关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:11:19.713

在“控制台处理程序”表单组件中，编辑“控制台脚本”属性并返回 false。然后安装程序将被取消。这对于您可以在重写的 handleConsole() 方法（用于屏幕、操作和表单组件）中返回 false 的 API 也是有效的。

# php - 通过权重模块对项目进行排序

> ID：14038833
> 
> 赞同：1
> 
> 时间：2012-12-26T09:55:09.873
> 
> 标签：php, drupal, sorting, drupal-7, drupal-modules

我有一个自定义模块并安装了[重量](http://drupal.org/project/weight)模块。我想要，对页面上的重量进行排序。但我不知道我该怎么做？

我的模块： http: [//pastebin.com/DuCdFdH6](http://pastebin.com/DuCdFdH6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:24:22.410

[要么按原样使用模块（及其 UI），要么使用模块内部使用](http://drupalcode.org/project/weight.git/blob/aec327c10a119808a2f5a0cd47b18ddd8e235506:/weight.module#l420)的私有函数。

即：

```
_weight_set_weight($node)
_weight_get_weight($node)
_weight_get_settings($type = NULL)
_weight_get_types()
_weight_get_options($range)
_weight_set_defaults($default, $type) 
```

但很明显，随着模块的定义，它希望您使用定义的视图，更一般地说，它的 UI。

如果您不知道如何使用它，请参阅[它的文档](http://drupal.org/node/307797)。

# installation - 同一个rpm包在不同机器上显示不同的文件权限？

> ID：14038845
> 
> 赞同：1
> 
> 时间：2012-12-26T09:55:32.100
> 
> 标签：installation, file-permissions, packaging, rpm, rhel

`rpm -qlvp package.rpm`在构建机器上将某些可执行文件的权限显示为`750`（即`rwxr-x---`）在规范中使用指令定义的预期和定义。`%attr`

当复制到目标测试机器时，相同文件上的相同命令显示默认值`755`（即`rwxr-xr-x`）。这些确实是已安装文件的权限。

我在网上找不到任何东西来解释这个谜团。有任何想法吗？

两台机器都是 RHEL 5.7 虚拟机 BTW。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T12:09:43.593

检查两个系统上的 umask 设置，可能由于某种原因它们不同。

# android - 重用 Android HttpClient

> ID：14038855
> 
> 赞同：0
> 
> 时间：2012-12-26T09:56:15.863
> 
> 标签：android, httpclient

对多个执行方法调用使用相同的**HttpClient** * *object * 是否可以？*（假设我没有同时执行**HttpGet 请求**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:06:56.317

您可以使用`AndroidHttpClient`api 8 或更高版本来执行此操作。请参阅此链接以了解如何使用 AndroidHttpClient：[http ://www.java2s.com/Code/Android/Network/CreateHttpconnection.htm](http://www.java2s.com/Code/Android/Network/CreateHttpconnection.htm)

否则，您可以使用`ThreadSafeClientConnManager`. “这个连接管理器不处理单个连接，而是它们的一个池，每个连接都可以从池中取出，分配给一个线程（然后具有对它的独占访问权），一旦线程返回到池中如果同一个或另一个线程为同一个路由声明了一个连接，那么可以立即从池中重用一个连接，而无需先关闭再重新打开它，从而避免了 HTTP 在建立一个连接时执行握手的开销例如，新的 connection.ThreadSafeClientConnManager 将最大总连接数的默认值设置为 20，将每个路由的最大连接数设置为 2。” - 来自“实践中的 Android”

您可以查看此链接以了解 ThreadSafeClientConnManager： http: [//massapi.com/class/th/ThreadSafeClientConnManager.html](http://massapi.com/class/th/ThreadSafeClientConnManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:01:17.973

使用同一个HttpClient是不安全的，但是可以使用AndroidHttpClient，

```
AndroidHttpClient client = AndroidHttpClient.newInstance("xxxx"); 
```

AndroidHttpClient 是线程安全的。

# sql-server - 哪个查询执行得更快，使用表对象的查询或使用 sql server 中的临时表的查询

> ID：14038859
> 
> 赞同：1
> 
> 时间：2012-12-26T09:56:33.350
> 
> 标签：sql-server

我创建了一个存储过程，其中使用了一个表对象并在其中插入了一些列。以下是程序：

```
CREATE Procedure [dbo].[usp_Security] (@CredentialsList dbo.Type_UserCredentialsList ReadOnly) As        
Begin        
  Declare        
    @Result Table        
(  

   IdentityColumn Int NOT NULL Identity (1, 1) PRIMARY KEY,    
   UserCredentials  nVarChar(4000),        
   UserName         nVarChar(100),        
   UserRole         nVarChar(200),
   RoleID           Int,    
   Supervisor       Char(3),        
   AcctMaintDecn    Char(3),        
   EditPendInfo     Char(3),        
   ReqInstID        Char(3)
)

Insert Into @Result     
 Select Distinct UserCredentials, 'No', D.RoleName, D.RoleID,'No', 'No', 'No' From @CredentialsList A    
 Join SecurityRepository.dbo.SecurityUsers B On CharIndex(B.DomainAccount, A.UserCredentials) > 0        
 Join SecurityRepository.dbo.SecurityUserRoles C On C.UserID = B.UserID        
 Join SecurityRepository.dbo.SecurityRoles D On D.RoleID = C.RoleID      
 Where D.RoleName Like 'AOT.%' And B.IsActive = 1 And D.IsActive = 1  

Update A        
 Set A.UserName = B.UserName      
 From @Result A        
 Join @CredentialsList B On A.UserCredentials = B.UserCredentials      

-- "Supervisor" Column        
Update A        
Set A.Supervisor = 'Yes'        
From @Result A        
Join SecurityRepository.dbo.SecurityUsers B On CharIndex(B.DomainAccount, A.UserCredentials) > 0        
Join SecurityRepository.dbo.SecurityUserRoles C On C.UserID = B.UserID        
Join SecurityRepository.dbo.SecurityRoles D On D.RoleID = C.RoleID        
Where D.RoleName In ('AOT.Manager', 'AOT.Deps Ops Admin', 'AOT.Fraud Manager', 'AOT.Fulfillment Manager') 
     And B.IsActive = 1 And D.IsActive = 1

-- Return Result        
Select * From @Result Order By UserName, UserRole    
End 
```

在上述过程中，我使用了 Table 对象，然后在该表对象上创建了一个聚集索引。

但是，如果我创建一个临时表，然后在 SP 中处理上述信息，是否会比使用表对象而不是临时表更快。我尝试在表对象的列上创建单独的聚集索引，但它不允许我创建它，因为我们无法在表对象上创建索引。

我想在上述存储过程中使用临时表，但与使用表对象相比，它会降低成本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:59:50.377

**这取决于！**- 与往常一样，这里有很多因素在起作用。

**表变量**往往最适合少量的行——例如 10、20 行——因为它从来没有统计信息，不能有索引，而且 SQL Server 查询优化器总是假设它只有一行数据。如果表变量中有太多行，这将严重扭曲正在确定的执行计划。

此外，表变量不参与事务处理，这可能是好事也可能是坏事 - 因此，如果您将 10 行插入事务中的表变量然后回滚该事务 - 这些行仍在您的表中多变的。请注意这一点！

如果您打算拥有相当多的行，甚至可能需要索引某些内容，则临时表效果最好**。**

临时表在事务处理中的行为也与常规表一样，例如，事务将影响那些临时表。

但又一次：找出答案的真正方法是尝试并测量它——然后再试一次再测量。

# maven - 具有正确类路径的 Maven 插件分叉过程

> ID：14038860
> 
> 赞同：7
> 
> 时间：2012-12-26T09:56:34.953
> 
> 标签：maven, maven-plugin

我正在创建一个 Maven 插件，它对正确操作有一个相当独特的要求：它需要自己生成新进程，然后等待这些进程完成任务。

虽然这在命令行上相对简单，但 Maven 插件不会以与传统 Java 代码相同的方式被调用，因此没有类路径。我无法弄清楚如何在插件内解析正确的类路径，以便我可以生成一个新的 JVM（调用插件内另一个类的 Main 方法）。

使用当前的工件，`MavenProject`我可以获得`Artifact`对自己（插件）的引用，并在本地 Maven 存储库中获取它的相对目录：

```
Artifact self = null;
for (Artifact artifact : project.getPluginArtifacts()) {
  if ("my-group-id".equals(artifact.getGroupId()) && "my-artifact-id".equals(artifact.getArtifactId())) {
    self = artifact;
    break;
  }
}
if (self == null) {
  throw new MojoExecutionException("Could not find representation of this plugin in project.");
}
for (ArtifactRepository artifactRepository : project.getPluginArtifactRepositories()) {
  String path = artifactRepository.pathOf(self);
  if (path != null) {
    getLog().info("relative path to self: " + path);
    break;
  }
} 
```

如何获取对其所有依赖项（和传递依赖项）的引用，以便为新调用构建完整的类路径？我看到它`self`有一个依赖过滤器，但我不知道在哪里应用它。

这是在插件中创建“我自己”的新进程的正确方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:01:57.777

我发现[了一篇](http://labs.bsb.com/2012/10/using-aether-to-resolve-dependencies-in-a-maven-plugins/)关于 Maven 2 和 Maven 3 的依赖解析之间差异的好文章。

鉴于`Artifact`它归结为以下几点：

```
private Set<Artifact> getDependenciesForArtifact(Artifact artifact) {
  ArtifactResolutionRequest arr = new ArtifactResolutionRequest()
      .setArtifact(artifact)
      .setResolveTransitively(true)
      .setLocalRepository(local);
  return repositorySystem.resolve(arr).getArtifacts();
} 
```

使用 ，`Set`您可以通过为每个元素调用`pathOf`an`ArtifactRepository`并加入来构造 a `File.pathSeparator`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:15:34.893

嗯。不是真正的答案，而是一些提示。为什么需要这么复杂的东西？此外，我将深入研究 maven-surefire-plugin，它可以为单元测试分叉一个 jvm 并可以处理类路径。另一方面，您可以查看[maven-invoker](http://maven.apache.org/shared/maven-invoker/)或可以完全 fork maven的[maven-invoker-plugin 。](http://maven.apache.org/plugins/maven-invoker-plugin/)啊..我错过了什么。查看[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/build-classpath-mojo.html)，它具有创建类路径的特定目标，您可以在其中查看它们如何构建类路径的源代码。

# javascript - 如何获得 180 天之前的日期？

> ID：14038861
> 
> 赞同：-2
> 
> 时间：2012-12-26T09:56:44.177
> 
> 标签：javascript

我想使用 Java 脚本获得 180 天之前的确切日期。即：如果选择的日期是“26-12-2012”，那么输出是“30-06-2012”（180 天之前）。

我试过：

```
var ndate      = date.setDate(date.getDate() - 180);
 var day1       = ndate.getDate();
 var month1     = ndate.getMonth();
 var year1      = ndate.getFullYear();
 document.entry.callback.value = day1+"-"+month1+"-"+year1; 
```

它有效但不完全正确。当所选日期在六月时，输出月份显示为“0”。即：'02-06-2012' 那么结果是'04-0-2012'。

什么是更好的解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:59:03.320

这是相当准确的。

在`Date`对象月份以`0`：

> **获取月份**
> 
> 根据当地时间返回指定日期的月份（0-11）。

所以，六月应该是`5`，而`6`七月。

**参考：**

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMonth](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMonth)

# java - 一键打开/关闭项目中的原生支持

> ID：14038862
> 
> 赞同：1
> 
> 时间：2012-12-26T09:56:48.607
> 
> 标签：java, android, android-ndk, native

我的项目有下一个结构：

*   GUI 的 Java 部分
*   用于逻辑的本机部分（C++）

它们通过套接字连接。

所以，在开发过程中，我在台式机上运行原生部分，在安卓设备上运行 java 部分。它们通过 WiFi 连接，调试每个部分都非常舒适。但有时我需要构建完整且足够的 .apk，其中本机部分作为 .so 库包含在其中并从 java 代码调用。

出于这个原因，我试图找到一种方便的方法来“打开和关闭”项目中的原生支持。现在我只看到一种方法 - 在 Android.mk 中全部注释/取消注释（防止在 apk 中包含 .so 库很重要，因为它们很大）和在 java 中对本机函数的注释/取消注释调用。

但我不喜欢它...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:06:21.820

您所描述的看起来像是两个不同的项目，它们共享一些（也许大部分）通用代码。您可以在 Eclipse 中轻松进行此类设置，您可以使用链接文件夹来自动在两个项目之间共享源代码。但是使用源代码管理的功能来保持两个项目的源之间的同步可能更安全。

# ruby - 无法在 Mountain Lion 上使用 RVM 安装 OpenSSL 包

> ID：14038864
> 
> 赞同：5
> 
> 时间：2012-12-26T09:56:53.803
> 
> 标签：ruby, ruby-on-rails-3, openssl, rvm, osx-mountain-lion

我在全新安装的 Mountain Lion 上设置 RVM、Rails 等。我正在遵循指南“[如何在 Snow Leopard、Lion 和 Mountain Lion 上安装 Xcode、Homebrew、Git、RVM 和 Ruby 1.9.3](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/) ”。

在使用 Ruby (1.9.3) 安装 RVM 后，我做了一个`rvm requirement`，看来我应该使用 Homebrew 安装 apple-gcc42：

```
Homebrew:

  If you are using Homebrew, you can install the apple-gcc42 and required libraries from homebrew/dupes:

      brew update
      brew tap homebrew/dupes
      brew install autoconf automake apple-gcc42
      rvm pkg install openssl 
```

当我进入 OpenSSL 包安装时，我收到以下错误并且不知道如何继续：

```
marvin:~ george$ rvm --skip-autoreconf pkg install openssl
Fetching openssl-1.0.1c.tar.gz to /Users/george/.rvm/archives
######################################################################## 100.0%
Downloaded archive checksum did not match, archive was removed!
If you wish to continue with not matching download add '--verify-downloads 2' after the command.

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Updating openssl certificates
Error running 'update_openssl_certs', please read /Users/george/.rvm/log/openssl.certs.log 
```

指定日志文件的内容如下，推测是因为 OpenSSL 存档已被丢弃：

```
[2012-12-26 22:23:04] update_openssl_certs
/Users/george/.rvm/scripts/functions/support: line 139: cd: /Users/george/.rvm/usr/ssl: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T03:32:37.793

我使用hombrew安装opensll。

```
brew install openssl 
```

如果这不起作用，请检查此链接以获取答案。

[http://railsapps.github.io/openssl-certificate-verify-failed.html](http://railsapps.github.io/openssl-certificate-verify-failed.html)

# java - 如何从 url 读取参数包含 '#' 而不是 '?'

> ID：14038867
> 
> 赞同：0
> 
> 时间：2012-12-26T09:57:02.803
> 
> 标签：java, jsp, url

如何从此网址读取访问令牌？当我尝试通过`request.getParameter()`方法读取它时，它返回空值

`http://localhost:8080/FirstPick/views/common/home.faces#access_token=xxxxxxxxxx&expires_in=4015`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:05:33.067

您不能像这样从查询字符串中读取任何参数。它必须包含“？”。只有出现在 '?' 之后的字符串 称为“查询字符串”。并从“QueryString”中获取值。你提到这里的网址，不包含“？” 所以它没有'QueryString'。并且您不能使用 request.getParameter() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:25:06.127

除此以外，

哈希 (#) 之后的内容仅在客户端使用。如果您在服务器上需要该信息，您可以使用不同的分隔符和使用“？”的查询字符串，或者您可以在页面加载后通过 Ajax 提交它，方法是使用 JavaScript 在客户端读取它。

哈希 (#) 之后的 URI 部分永远不会发送到服务器，原因是哈希标识符最初设计为指向给定网页内的引用，而不是指向服务器上的新资源。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:04:52.397

在客户端（即来自 JavaScript），您可以检查 window.location.hash 以获取哈希。在服务器端，一般的答案是“不可能”，因为哈希没有在请求中发送到服务器。

# php - mod_rewrite 正则表达式

> ID：14038877
> 
> 赞同：0
> 
> 时间：2012-12-26T09:57:59.257
> 
> 标签：php, regex, mod-rewrite

我没有使用正则表达式的经验，并且尝试了一些工具等技巧，但没有得到一个强大的解决方案。

这是我想要实现的目标。即将到来的请求可以采用以下格式：

```
http://whatever.com/search/s-<value>/i-<i value>/e-<e value>?query=<query value>&query1=<query1 value>

http://whatever.com/list/s-<value>/i-<i value>/e-<e value>?query=<query value>&query1=<query1 value> 
```

使用 mod_rewrite 我想将其转换为 -

```
http://whatever.com/index.php?type=search&iid=<i value>&edd=<e-value>&query=<query value>&query1=<query1 value>

http://whatever.com/index.php?type=list&iid=<i value>&edd=<e-value>&query=<query value>&query1=<query1 value> 
```

注意：i-、e-等的位置可能出现在同一个位置，也可能不出现。而且，并非所有请求都有它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:24:47.857

```
RewriteEngine On

RewriteRule ^([^/]*)$   index.php?type=$1 [L,QSA]
RewriteRule ^([^/]*)/(.)-([^/]*)$   index.php?type=$1&$2id=$3 [L,QSA]
RewriteRule ^([^/]*)/(.)-([^/]*)/(.)-([^/]*)$   index.php?type=$1&$2id=$3&$4id=$5 [L,QSA]
RewriteRule ^([^/]*)/(.)-([^/]*)/(.)-([^/]*)/(.)-([^/]*)$   index.php?type=$1&$2id=$3&$4id=$5&$6id=$7 [L,QSA] 
```

这里

```
 i-value is in $_GET['iid']
 s-value is in $_GET['sid']
 e-value is in $_GET['eid'] 
```

和

```
$_GET['query']
$_GET['query1'] 
```

也提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:00:56.473

Try this in **.htaccess** file

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  # Rewrite URLs of the form 'x' to the form 'index.php?q=x'.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
</IfModule> 
```

Just go to your index.php file then print $_GET variable, Do your stuffs there.

You will get path name in $_GET['q']. Then you can routing the request appropriate file or function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:24:07.123

您可以通过将 htaccess 文件放入根目录中来尝试：

```
RewriteEngine on
RewirteRule ^search/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)?query=<query value>&query1=<query1 value> index.php?type=search$iid=$2&edd=$3&query={QUERY_STRING} 
```

您可以根据您的 url 参数使用下面的参数（我假设它可能是字符和数字）：

```
1) [a-zA-Z0-9] for char + numbers
2) [a-zA-Z] for char
3) [0-9] for numbers 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T10:00:07.350

阅读有关 PCRE（Perl 兼容正则表达式）的 PHP 文档。

PCRE 上的 PHP 文档是网络上最好的。不要费心使用工具。

# php - 我可以在库方法codeigniter中使用模型类的方法吗

> ID：14038878
> 
> 赞同：-3
> 
> 时间：2012-12-26T09:57:59.110
> 
> 标签：php, codeigniter

> **可能重复：**
> [“PHP 通知：未定义的属性”</a>](https://stackoverflow.com/questions/12772083/php-notice-undefined-property)
> 
> [](https://stackoverflow.com/questions/12772083/php-notice-undefined-property)

[](https://stackoverflow.com/questions/12772083/php-notice-undefined-property)

[我尝试在我的 CI 网络中使用外部库。我参考这些链接](https://stackoverflow.com/questions/12772083/php-notice-undefined-property) [https://www.codeigniter.com/user_guide/general/creating_libraries.html](https://www.codeigniter.com/user_guide/general/creating_libraries.html) 和[CodeIgniter 自定义库错误：调用非对象上的成员函数](https://stackoverflow.com/questions/10656673/code-igniter-custom-library)以使其工作，但我收到以下错误消息

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Dataloading::$load

Filename: libraries/dataloading.php

Line Number: 28 
```

我尝试的是从库中加载组合框的数据。这是库类的代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Dataloading {

        public function __construct() {

        }

        public function index()
    {

    }

        public function loadcombo(){

        $this->load->model('dataOperateModel');       
        //Calling the getcombo_titel() function to get the arr of titles. Model already loaded.
        $arrStates = $this->dataOperateModel->getcombo_titel();

        //Getting the final array in the form which I will be using for the form helper to create a dropdown.
        foreach ($arrStates as $job_name) {
            $arrFinal[] = $job_name->title;
        }

        $data['job_name'] = $arrFinal;
        $data['main_content']='home/welcome_message';

        //Passing $data to the view, so that we can get the states as an array inside the view.
        $this->load->view('layout',$data);

        }

} 
```

这是欢迎类的代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class Welcome extends CI_Controller {

            public function __construct() {

                parent::__construct();
                //this condition will check whether user has logged in, otherwise 
                //he will be redirect to login
                if (!$this->session->userdata('logged_in'))
                { 
                     redirect('admin/admin_login');

                }
               // $this->load->model('dataOperateModel');
        }

            public function index()
        {
            //$this->load->view('welcome_message');
                 $this->load->library('dataloading');
                 $this->dataloading->loadcombo();
                 //$this->loadcombo();
        }

    } 
```

谁能解释我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:19:20.537

您需要加载 Codeigniter 实例才能使用 Codeigniter 核心和库

```
$this->ci =& get_instance(); 
```

那么你可以参考如下

```
$this->ci->load(.....) 
```

最好检查一下[如何创建自己的库](https://www.codeigniter.com/user_guide/general/creating_libraries.html)

# zend-framework - 单例类中的 Zend 模型访问 - 最佳方法

> ID：14038881
> 
> 赞同：0
> 
> 时间：2012-12-26T09:58:04.590
> 
> 标签：zend-framework, design-patterns, model, singleton

我正在寻找访问单例类（在 ZF 1.x 中）中的一个表数据的最佳模式/方法。详细说明：

*   我有一个单例类（例如 Zend_Date），它为我提供了一些非常脱离应用程序现实的基本抽象内容。
*   在这个类中，分两点，我需要访问一个db表，我需要对它进行一些基本的操作。

在这个单例的函数中使用我的常规 ZF 模型类不是问题。它工作正常。现在它看起来像：

```
class My_ZF_Singleton
{
    ...
    public function someFunctionInMySingleton()
    {
        ...
        $oModel = new Model_My_Model_Form_ZF_Application();
        $oModel->letsDoSomeStuffWithDb();
        ...
    }
    ...
} 
```

但我从骨子里觉得这不是一个很好的解决方案，没有我想要的那么迷人。它使我的单例类比应有的更加依附于应用程序。我想使用其他一些模式来访问这个数据库数据，然后是应用程序模型类。我会非常感谢任何线索或更好的解决方案——这不是“嘿，我被卡住了”或“嘿，我有一个错误”——我只是在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:04:56.230

不确定我是否完全理解您的问题或想要的重点，但我会尝试。

在 ZF1 中，数据库适配器通常已经是单例的。[可能会连接多个数据库](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.multidb)，但每个数据库都需要唯一的标识。`application.ini`在or中对默认适配器设置的典型访问`Bootstrap.php`：

`$adapter = Zend_Db_Table::getDefaultAdapter();`

提供对单个数据库表的访问和对[Zend_Db_Table](http://framework.zend.com/manual/1.12/en/zend.db.table.html) api 的访问的常用方法是构建[DbTable 模型](http://framework.zend.com/manual/1.12/en/zend.db.table.html)：

```
class Application_Model_DbTable_TableName extends Zend_DbTable_Abstract
{
    protected $_name = 'Table_Name' //required if classname does not match table name
    protected $_primary = 'primary_key_column_name'//optional, use if primary key is not 'id'
} 
```

您可以将此类视为单个表的默认数据库适配器的实例（在映射器中工作得非常好）。您还可以向此类添加函数以覆盖或添加到默认的 Zend_Db_Table api。

我希望这至少能接近。

# awk - 用 awk 在第 5 列中留出空间

> ID：14038882
> 
> 赞同：1
> 
> 时间：2012-12-26T09:58:12.247
> 
> 标签：awk

> **可能重复：**
> [如何在列之间留出空间？](https://stackoverflow.com/questions/13898527/how-to-give-space-between-columns)

我有一个 PDB 文件，如下所示。我想在第 5 列中留出一个空格。

```
ATOM   2614  CB  ALA B1130      -3.307 -21.676   3.322  1.00 15.69           C
ATOM   2615  N   LEU B1131      -4.584 -19.000   2.466  1.00 18.48           N
ATOM   2616  CA  LEU B1131      -4.847 -17.586   2.701  1.00 18.86           C 
```

期望的输出

```
 ATOM   2614  CB  ALA B 1130      -3.307 -21.676   3.322  1.00 15.69           C
 ATOM   2615  N   LEU B 1131      -4.584 -19.000   2.466  1.00 18.48           N
 ATOM   2616  CA  LEU B 1131      -4.847 -17.586   2.701  1.00 18.86           C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:58:08.997

如果您需要制表符分隔的输出，您可以这样使用`awk`：

```
awk -v OFS="\t" '{ sub(/./, "& ", $5) }1' file 
```

结果：

```
ATOM    2614    CB  ALA B 1130  -3.307  -21.676 3.322   1.00    15.69   C
ATOM    2615    N   LEU B 1131  -4.584  -19.000 2.466   1.00    18.48   N
ATOM    2616    CA  LEU B 1131  -4.847  -17.586 2.701   1.00    18.86   C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:20:46.137

```
awk '$5 = substr($5, 1, 1) " " substr($5, 2)' /tmp/foo.pdb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:25:43.123

如果你有傻瓜：

```
awk '{$5=gensub(/^./,"& ","g",$5)}1' file 
```

# iphone - webview加载时如何隐藏progressview

> ID：14038887
> 
> 赞同：1
> 
> 时间：2012-12-26T09:58:30.380
> 
> 标签：iphone, objective-c, ios, uiwebview, uiprogressbar

嗨，我想问一个简单的问题，`UIWebView`加载时如何隐藏或禁用进度条，我添加`ProgressBar`了`subview`. `webview`我在下面的方法中使用这种方式来做到这一点，但它对我没有帮助，因为每个站点都需要不同的时间来加载，因为它们的内容大小所以请告诉我如何隐藏或删除`ProgressBar`任何站点加载时`webview`

```
- (void)makeMyProgressBarMoving {  

    float actual = [threadProgressView progress];  

    if (actual < 1) {  
        threadProgressView.progress = actual + 0.2;  
        [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(makeMyProgressBarMoving) userInfo:nil repeats:NO];  
    }  
    else
    {
        threadProgressView.hidden = YES;
        threadValueLabel.hidden = YES;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:02:33.633

首先将委托添加到 UIWebView 用于添加进度条：- Web 视图委托方法：-

```
- (void)webViewDidStartLoad:(UIWebView *)webView
{
    threadProgressView.hidden = NO;
} 
```

对于删除进度条：- Web 视图委托方法：-

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    threadProgressView.hidden = YES;
} 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:03:24.217

检查您的 webview 是否已完全加载。

```
if(!yourWebView.loading)
{
   [yourProgress removeFromSuperView];
} 
```

> **加载**
> 
> 一个布尔值，指示接收器是否已完成加载内容。(只读) `@property(nonatomic, readonly, getter=isLoading) BOOL loading`>
> 
> **讨论**
> 
> 如果是，接收方仍在加载内容；否则，否。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```

**或者**

您可以实现`webViewDidFinishLoad`UIWebView 的委托方法。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
   [yourProgress removeFromSuperView];
} 
```

> **webViewDidFinishLoad**：
> 
> 在 Web 视图完成加载框架后发送。 `- (void)webViewDidFinishLoad:(UIWebView *)webView`
> 
> **参数**
> 
> 网络视图
> 
> ```
> The web view has finished loading. 
> ```
> 
> 可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```

参考[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)，[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)了解更多详情

# android - 安卓的切换按钮

> ID：14038902
> 
> 赞同：-4
> 
> 时间：2012-12-26T09:59:06.440
> 
> 标签：android, eclipse, cordova, togglebutton

我正在尝试为 android 应用程序创建一个切换按钮。切换按钮将在按下时交换图像，然后在再次按下时交换回原始图像。我正在使用与 phonegap 集成的 Eclipse 作为我的 IDE。谁能帮我这个？我在网上找到了一些适用于 android 的 java 源代码，但它们似乎不可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:15:13.217

```
//get ToggleButton reference
 ToggleButton tg;
 tg = (ToggleButton) findViewById(R.id.toggleButton1);
//set listener       
 tg.setOnClickListener(this);
//track the status of toggle button
 @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    if((tg.isChecked()))
    {
        System.out.println("checked");
       //do wt ever you wanted to do on checked 
    }
    else
    {
            System.out.println("Unchecked");

    }
   } 
```

# grails - 如何在 Grails 中创建带有自定义错误消息的自定义验证器？

> ID：14038905
> 
> 赞同：20
> 
> 时间：2012-12-26T09:59:12.863
> 
> 标签：grails, validation, custom-errors

如何在 grails 中创建自定义验证器并将自定义字符串传递回视图和错误消息？

我看到很多人都陷入了同样的困境，我决定创建一个问题和一个答案来处理它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-26T09:59:12.863

## 第 1 步：创建域对象或命令对象并在其上放置自定义约束，例如...

```
@grails.validation.Validateable
class PeopleCommand {

    String  firstName 
    String  lastName
    String  emailAddress
    String  idNumber

    static constraints = {
        firstName (blank: false)
        lastName  (blank: false)
        emailAddress  (blank: false)
        idNumber  (blank: false, size: 13..16, validator: {value, object ->
                if (!value.startsWith('77')) return false;
        })
    }
} 
```

这将检查您输入的 idNumber 是否以 77 开头。如果不是，它将发送错误。下一个问题，我们如何显示错误？

## 第 2 步：自定义视图以显示您的错误

```
<div class="${hasErrors(bean:person,field:'idNumber','error')}">
    <label class="control-label">Identity Number</label>
    <input value="${fieldValue(bean:person,field:'idNumber')}" name="idNumber" type="text"/>
    <div class="error-messages">
        <g:renderErrors bean="${command}" as="list" field="idNumber"/>   
    </div>
</div> 
```

在上面的示例中，如果人员模型对象的 idNumber 字段有错误，`${hasErrors(bean:person,field:'idNumber','error')}`则将字符串添加到 html 类中。`error`此类可用于设置输入样式以及显示和/或隐藏`div.error-messages`块。将`<g:renderErrors bean="${command}" as="list" field="idNumber"/>`显示一个可怕的错误消息。

## 第 3 步：创建性感的自定义消息

> **重要提示**：Grails 不允许您直接向视图发送消息。相反，您必须在 /i18n/messages.properties（消息包）中声明消息。你可以使用任何你喜欢的键。

**在messages.properties**

```
validation.idStartsWith77=Your ID number must start with 77 
```

**在验证器中**

```
idNumber  (blank: false, size: 13..16, validator: {value, object ->
    return 'validation.idStartsWith77'
}) 
```

现在，这将传递对视图的*引用*，指向您在 messages.properties 中的自定义消息...

## 第 4 步：破解系统以允许将消息直接传递到视图

*这仅适用于专门**不**开发多语言网站的人。*

Grails 允许您将自定义参数传递给解析器。您可以在消息文件中引用这些自定义参数。为了欺骗系统，我们可以创建一个自定义消息，其中整个消息是一个自定义参数。像这样：

**在messages.properties**

```
validation.customRuntimeMessage={3} 
```

**在验证器中**

```
idNumber  (blank: false, size: 13..16, validator: {value, object ->
    return ['validation.customRuntimeMessage', 'You need to start your ID with 77']
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T07:46:41.320

进行自定义验证的替代方法是创建自定义约束并将其与 Grails 连接。

[http://www.zorched.net/2008/01/25/build-a-custom-validator-in-grails-with-a-plugin/](http://www.zorched.net/2008/01/25/build-a-custom-validator-in-grails-with-a-plugin/)

# bluetooth - 苹果心率监测示例及蓝牙心率测量特性的字节序

> ID：14038906
> 
> 赞同：3
> 
> 时间：2012-12-26T09:59:14.947
> 
> 标签：bluetooth, bluetooth-lowenergy, endianness

关于心率测量特性：

[http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml](http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml)

**编辑**

链接现在位于 [https://www.bluetooth.com/specifications/gatt/characteristics/](https://www.bluetooth.com/specifications/gatt/characteristics/) 并查找“心率测量”。

它们不再提供 XML 查看器，而是您需要[直接](https://www.bluetooth.com/wp-content/uploads/Sitecore-Media-Library/Gatt/Xml/Characteristics/org.bluetooth.characteristic.heart_rate_measurement.xml)查看 XML 。

对于服务，它也在[此页面上](https://www.bluetooth.com/specifications/gatt/services/)。

**结束编辑**

我想确保我正确阅读它。这实际上是说 5 个字段吗？强制性的，C1、C2、C3 和 C4？强制在第一个字节，C4在最后两个字节，C1和C2是8位字段，C3到C4都是16位。总共有 8 个字节。我是否正确阅读了这份文件？

编辑：

我被告知强制标志字段表明某事为 0，这意味着它不存在。例如，如果第一位为 0，则 C1 为下一个字段，如果为 1，则 C2 紧随其后。

结束编辑

在 Apple 的[OSX 心率监测器示例](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/HeartRateMonitor_HeartRateMonitorAppDelegate_m.html#//apple_ref/doc/uid/DTS40011322-HeartRateMonitor_HeartRateMonitorAppDelegate_m-DontLinkElementID_4)中：

```
- (void) updateWithHRMData:(NSData *)data 
{
    const uint8_t *reportData = [data bytes];
    uint16_t bpm = 0;

    if ((reportData[0] & 0x01) == 0) 
    {
        /* uint8 bpm */
        bpm = reportData[1];
    } 
    else 
    {
        /* uint16 bpm */
        bpm = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[1]));
    }

    ... // I ignore rest of the code for simplicity
} 
```

它将第一位检查为零，如果不是，则通过将 CFSwapInt16LittleToHost 应用于`reportData[1]`.

那位检查是如何工作的？我不完全确定字节序。是说不管是小还是大，第一个字节总是必填字段，第二个字节是C1，等等？并且由于 reportData 是一个 8 位指针（typedef to `unsigned char`），它正在检查必填字段的第 0 位或第 8 位。

如果该位是第 8 位，则该位保留供将来使用，为什么要在那里读取？

如果该位为 0，它是小端且不需要转换？但是如果是little-endian，根据规范，第一位可能是1，1表示“心率值格式设置为UINT16。单位：每分钟节拍（bpm）”，这不会误读吗？

我不明白它是如何进行检查的。

编辑：我一直说有 C5，那是个错误。它仅由 C4 决定，我在上面进行了编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:48:38.673

> 我是否正确阅读了这份文件？

恕我直言，你读错了。

C1 到 C4 应该读作 Conditional 1 到 Conditional 4。并且在 org.bluetooth.characteristic.heart_rate_measurement 的表中，如果标志字节的最低位为 0，则满足 C1，否则，满足 C2。

你可以认为它是 C 编程语言中的运行时可配置联合类型（由`flag`.

```
// Note: this struct is only for you to better understand a simplified case.
// You should still stick to the profile documentations to implement.

typedef struct {
    uint8_t flag;
    union {
        uint8_t bpm1;
        uint16_t bpm2;
    }bpm;
} MEASUREMENT_CHAR; 
```

> 那位检查是如何工作的？

`if ((reportData[0] & 0x01) == 0)`使用按位与运算符有效地检查位。如果有任何疑问，去寻找一本 C/C++ 编程介绍书。

在这种情况下，第一个字节始终是标志。flag 的值动态地确定应该如何处理其余字节。C3 和 C4 都是可选的，如果标志中的相应位设置为零，则可以省略。C1 和 C2 互斥。

蓝牙标准中没有字节序歧义，因为它已经很好地解决了应该一直使用小字节序的问题。您应该始终假设这些`uint16_t`字段以小端方式传输。Apple 的预防措施只是为了确保代码的最大可移植性，因为他们不会保证未来产品中使用的架构的字节序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T08:53:23.480

我看情况如何。它不是测试字节顺序。相反，它正在测试该字段是 8 位还是 16 位，如果是 16 位，它将从小端转换为主机顺序。但是我看到在转换之前和转换之后它是相同的数字。所以我猜这个系统一开始是小端的，所以我不知道有什么意义。

# mysql - 根据我们的格式更新列值

> ID：14038924
> 
> 赞同：-1
> 
> 时间：2012-12-26T10:00:31.450
> 
> 标签：mysql

`MS-NW`我的 Db 中有两种类型的记录，例如在**DICIPLINE**`CS`表的同一列中，如果它（任何两个字符串，如 CS、TE 或 THE LIKE）然后将其包装到 BS(CS)（或 BS(TE ）ETC）或者如果它的（或MS-CS，MS-TE等）然后将其从列学科包装到MS（NW）。**`CS``MS-NW`**

 **我成功更新了两个字符串，以下是查询，请让我知道如何为类似值执行此操作`MS-NW OR MS-CS`并将其转换为 `MS(NW)`以下查询中的格式。

```
UPDATE DEG set DICIPLINE =  concat("BS(",DICIPLINE,")") where CHAR_LENGTH(DICIPLINE) = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:15:36.377

以下查询可帮助您更新数据。

```
update deg set DISIPLINE = if(length(DISIPLINE)= 2,concat('BC(',DISIPLINE,')')
                                     ,concat('MS(',substr(DISIPLINE, 4,4),')')); 
```

[请参阅 Sqlfiddle 演示。](http://sqlfiddle.com/#!2/e4a3e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:17:00.900

为了安全起见，创建一个相同类型的临时列并执行如下更新：

```
UPDATE deg
SET dicipline_temp = CASE
    WHEN CHAR_LENGTH(dicipline) = 2
        THEN CONCAT('BS(', dicipline, ')')
    WHEN CHAR_LENGTH(dicipline) = 5 AND SUBSTRING(dicipline, 3, 1) = '-'
        THEN CONCAT(REPLACE(dicipline, '-', '('), ')')
END
WHERE CHAR_LENGTH(dicipline) = 2 OR (CHAR_LENGTH(dicipline) = 5 AND SUBSTRING(dicipline, 3, 1) = '-') 
```

如果结果可接受，请更新实际列。**

# javascript - JavaScript FileSystem API 作为 Chess Alpha Beta 数据存储

> ID：14038927
> 
> 赞同：2
> 
> 时间：2012-12-26T10:00:36.750
> 
> 标签：javascript, file, chess, minimax

我开始用 JavaScript 和一些 Node.JS 编写国际象棋程序，如果我发现需要让服务器参与国际象棋 AI 逻辑，至少在我可能无知的观点中，这仍然是合理的。我的问题很简单：JavaScript 的客户端 FileSystem API 是缓存极小极大结果以供将来参考的合理方法，还是生成的数据太多而无法存储在任何地方？我的想法是，它可以用作一种方式，让 AI 能够通过访问以前的决策而不是每次手动重新确定它们来适应用户并“学习”。这是一个合理的计划还是我低估了这需要的内存使用量？如果您的回答是这似乎是合理的，那么有关以这种方式存储数据的最有效方法的一些提示也会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:33:32.483

我以前用 C++ 编写过国际象棋引擎，但没有 Javascript。

你所描述的通常是通过转置表来解决的。您计算一个哈希键来标识该位置并使用它存储其他数据。见： [https ://www.chessprogramming.org/Transposition_Table](https://www.chessprogramming.org/Transposition_Table) [https://www.chessprogramming.org/Zobrist_Hashing](https://www.chessprogramming.org/Zobrist_Hashing)

Web 存储按来源提供：

```
2.5 MB for Google Chrome
5 MB for Mozilla Firefox
10 MB for Internet Explorer 
```

每个条目通常包含：

```
Zobrist Hash Key: 8 byte
Best Move: 2 byte
Depth: 1 byte
Score: 2 byte
Type of score (exact, upper bound, lower bound): 1 byte
= 16 byte 
```

因此，例如 Google Chrome 可以容纳 160k 条目。通常对于国际象棋位置分析，您使用超过 1 GB 的内存用于转置表。无论如何，对于 javascript 引擎，我认为 2.5 MB 是一个很好的折衷方案。

为了确保 javascript 引擎使用最佳存储，我建议您将数据转换为某种二进制表示形式。然后我将通过 Zobrist Hash Key 索引 localStorage 并存储与之相关的所有其他信息。

# node.js - WebSocket 通过 Amazon ELB 或直接（远程 IP 问题）

> ID：14038928
> 
> 赞同：1
> 
> 时间：2012-12-26T10:00:39.237
> 
> 标签：node.js, amazon-ec2, websocket, amazon-elb

我们使用 WebSockets 与我们的 EC2 实例进行通信。我们的脚本使用 nodejs 和 Express 提供服务，然后初始化 WebSocket。现在使用 ELB，这使得识别客户端 IP 变得更加困难。使用 x-forwarded-for 标头我们可以在 HTTP 的上下文中获取 IP，但是当涉及到服务器中的 WebSocket 上下文时，它看起来好像不是由 Amazon 转发的。

我们确定了 2 个选项：

1.  直接与实例通信 WebSocket（使用其公共 DNS）。
2.  维护某种 sessionid，在其中存储在 HTTP 上下文中的 IP 并将其与 sessionid 关联。客户端将使用 HTTP 响应获取其 sessionid，并将其用于 WebSockets。服务器将识别客户端并从缓存中解析其 IP。

这两个选项都不是很好：1 不是容错的，2 是复杂的。还有更多的解决方案吗？亚马逊可以以某种方式转发 IP 吗？最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:55:34.147

我使用过 websockets，也使用过 ELB，但我从来没有一起使用过它们，所以我没有意识到 Elastic Load Balancer 上的 HTTP 转发器不理解 websocket 请求......

所以我认为你必须使用 TCP 转发器，这解释了为什么你使用不同的端口，当然 TCP 转发器是协议不知道的，所以它根本不会添加任何标头。

一个看起来相当通用且简单的选项是让应用程序的 http 端通过推送信息而不是将其存储在缓存中以供检索来建议 websocket 端。它是可扩展且轻量级的，假设您的环境中没有障碍使其难以或不可能实施。

在生成加载 websocket 的网页时，获取字符串“ipv4:”和客户端的 IP（例如“192.168.1.1”），将它们连接并加密，并使结果对 url 友好：

```
/* pseudo-code */
base64_encode(aes_encrypt('ipv4:192.168.1.1','super_secret_key')) 
```

使用具有 128 位 aes 的示例密钥和示例 IP 地址，我得到：

```
/* actual value returned by pseudo-code above */
1v5n2ybJBozw9Vz5HY5EDvXzEkcz2A4h1TTE2nKJMPk= 
```

然后在为包含 websocket 的页面渲染 html 时，动态构建 url：

```
ws = new WebSocket('ws://example.com/sock?client=1v5n2ybJBozw9Vz5HY5EDvXzEkcz2A4h1TTE2nKJMPk='); 
```

假设您的代码可以访问来自 websocket 的查询字符串，您可以使用超级密钥对查询参数“client”中找到的字符串进行 base64_decode 然后 aes_decrypt，然后验证它是否以“ipv4:”开头 ...如果它没有，那么它不是一个合法的价值。

当然，“ipv4:”（字符串开头）和“client”（查询参数）是任意选择，没有任何实际意义。我对 128 位 AES 的选择也是任意的。

当然，这种设置的问题在于它会被重放：给定的客户端 IP 地址将始终生成相同的值。如果您仅将客户端 IP 地址用于“信息目的”（例如日志记录或调试），那么这可能就足够了。如果您将它用于更重要的事情，您可能希望扩展此实现 - 例如，通过添加时间戳：

```
'ipv4:192.168.1.1;valid:1356885663;' 
```

在接收端，解码字符串并检查时间戳。如果它不是 +/- 任何您认为安全的时间间隔（以秒为单位），那么请不要相信它。

这些建议都取决于您动态生成 websocket url 的能力、浏览器与其连接的能力，以及您能否访问 websocket 请求中 URL 的查询字符串部分......但如果这些部分到位，也许这会有所帮助。

* * *

其他想法（来自评论）：

上面我建议的时间戳是[从 epoch 开始的秒数](http://en.wikipedia.org/wiki/Unix_time)，它为您提供了一个递增的计数器，它不需要您的平台中的状态——它只需要你的所有服务器时钟都是正确的——因此它不会增加不必要的复杂性。如果解密后的值包含与服务器当前时间相差小于（例如）5 秒 (+/-) 的时间戳，那么您就知道您正在处理经过身份验证的客户端。允许的时间间隔只需要与客户端在加载原始页面后尝试其 websocket 连接的最大合理时间一样长，再加上所有服务器时钟的最大偏差。

当然，使用 NAT，多个不同的用户可能在同一个源 IP 地址后面。这也是事实，尽管不太可能，用户实际上可以从与他们发起第一个 http 连接的源 IP 不同的源 IP 建立 websocket 连接，并且仍然是相当合法的......这听起来像是对您而言，身份验证用户可能比实际源 IP 更重要。

如果您在加密字符串中也包含经过身份验证的用户 ID，您将获得一个对原始 IP、用户帐户和时间唯一的值，精度为 1 秒。我认为这就是您所说的加盐。将用户帐户添加到字符串中应该可以获得您想要的信息。

```
'ipv4:192.168.1.1;valid:1356885663;memberid:32767;' 
```

TLS 应防止未经授权的一方发现此加密字符串，但避免可重放性也很重要，因为生成的 URL 在用户浏览器的 html 页面“查看源”中以明文形式提供。您不希望今天获得授权但明天未经授权的用户能够使用应被识别为不再有效的签名字符串欺骗他们的方式。键入时间戳并要求它落在一个非常小的有效窗口中可以防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T22:43:35.347

这取决于应用程序的严重程度。

根据客户端 IP 地址做出任何类型的决定都是一个冒险的提议。基于它的安全性，更是如此。虽然到目前为止所提供的建议在给定的限制条件下运行良好，但对于健壮的企业应用程序来说还不够。

正如已经指出的那样，客户端 IP 地址可能会被 NAT 掩盖。因此，从工作地点访问 Web 的人通常看起来具有相同的 IP 地址。人们家中的路由器充当 NAT，因此家中访问 Web 的每个家庭成员都将显示为具有相同的 IP 地址。甚至是同一个人从 PC 和平板电脑访问应用程序...

无论是否在 NAT 之后，在同一台机器上使用来自两个浏览器的应用程序都会显示为具有相同的地址。同样，同一浏览器中的多个选项卡似乎具有相同的地址。

代理或负载均衡器等其他连接点也可能隐藏原始客户端 IP 地址，以便代理/负载均衡器后面的东西认为它们是客户端。（更复杂或更低级别的中介可以防止这种情况，这使得它们更复杂或更昂贵。）

鉴于上述所有情况，一个严肃的应用程序不应该依赖客户端 IP 地址来做出任何重要的决定，尤其是在安全方面。

# eclipse - FB4Linux——调试器在一段时间后断开连接

> ID：14038933
> 
> 赞同：0
> 
> 时间：2012-12-26T10:00:51.880
> 
> 标签：eclipse, actionscript-3, debugging, flash-builder

我正在运行 ubuntu 12.04 64 位，我已经设置了[FB4Linux（Linux 的 FlashBuilder）](http://code.google.com/p/fb4linux/)并通过 »apt-get« 安装了 »flash-installer« 安装程序插件。我从 adobe 下载了最新版本的[插件调试器，](http://www.adobe.com/support/flashplayer/downloads.html)并按照包含的 README.txt 文件中的安装说明进行操作。运行 eclipse（版本：3.7.2，构建 id：I20110613-1736），创建一个新的 as3 项目工作，构建工作，一切都很好，我可以启动调试器并逐步执行代码**但**一段时间后调试器只是断开连接并停止. 没有错误，没有崩溃，调试会话刚刚结束。

有任何想法吗？

[。日志](http://pastebin.com/7UfBEWRG)

### 关于：插件：

Flash - 版本：11.2 r202
Shockwave Flash 11.2 r202

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:50:27.490

我认为，由于 Eclipse 中增强的断点侦听器支持，这种情况更频繁地发生。当断点被删除时，它会尝试通知其“断点特定”的侦听器，这些侦听器存储在断点中。当然，这将不起作用，因为基础标记已被删除。但是删除断点后会发生事情。所以解决这个问题的一种方法是尝试取消选择
`Window > Preferences > Java > Debug : Suspend execution on uncaught exceptions`

这可能会帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:21:00.300

[在我应用此](https://stackoverflow.com/questions/14280022/flex-sdkwhere-to-get-the-right-version-with-playerglobals-swc-for-flash-player)问题答案的更改后，此问题的解决方案作为副作用出现。当我尝试将编译器选项设置为目标版本 11.2（实际上安装在我的系统上）时，发生错误，因为它们的文件在 sdk 文件夹中丢失（这是所描述的更改），我只能为 11.1 版开发。有点连线，但 sdk 的更新使调试器运行稳定。

# objective-c - 如何在 osx 中的 NSDatePicker 对象上设置当前日期

> ID：14038945
> 
> 赞同：2
> 
> 时间：2012-12-26T10:02:06.017
> 
> 标签：objective-c, macos, cocoa

我是 OSX 应用程序开发的新手。在我做的一个示例菜单栏应用程序中，我使用了一个`NSDatePicker`对象。但它不显示当前日期。如何使用`NSDatePicker`对象显示当前日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:51:01.933

你试过了吗

```
NSdate *currentDate = [NSDate date];
datePicker.date = currentDate; 
```

??

这和

```
NSdate *currentDate = [NSDate date];
[datePicker setDate:currentDate] 
```

主要区别在于，如果`currentDate`在您的代码中不等于 nil，则不会设置 datePicker 的日期！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-23T09:18:09.023

**将当前系统时间设置为 Datepicker**

```
@IBOutlet weak var txtStartTime: NSDatePicker! 
```

迅速

```
let now = Date()
txtStartTime.dateValue = now 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T21:39:51.020

从 OSX 10.4 开始，执行此操作的方法是

```
NSDate *currentDate = [NSDate date];
[datePicker setDateValue:currentDate]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T06:11:23.123

您可以将日期设置为日期选择器`Swift 3.2`，

```
self.datePicker.dateValue = NSDate() as Date 
```

# google-search-console - Google 网站管理员工具：总索引 = 0 & HTML 改进未更新

> ID：14038946
> 
> 赞同：4
> 
> 时间：2012-12-26T10:02:23.733
> 
> 标签：google-search-console

1) 为什么 Google Webmaster Tools 显示我的网站的 Total indexed = 0？当我在 google 中运行 site:ziedireizija.lv 时，它显示了 59 个结果。我已将 www 和非 www 添加到我的网站管理员工具中。我已将首选域设置为没有 www。

当我在网站管理员工具中打开非 www 时，它显示：

总索引 = 0

爬过 = 80

未选择 = 52

这意味着什么？为什么总索引 = 0。这是针对网站 ziedireizija.lv

2) 第二个问题是网站管理员工具有 HTML 改进部分。它显示重复的元描述 = 12。

我已经更新了这些页面的元描述。但是，它仍然显示重复的元描述，我确实看到谷歌没有更新这些页面（元描述和页面内容都没有）。我已经做了一段时间了。为什么？

并且网站管理员工具显示上次更新日期为 2012 年 12 月 24 日，但是，重复元描述 = 12，我确实看到这些页面没有更新。它可能与问题1有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T09:07:34.260

HTML 改进页面上的 url 不会很快更新 - 通常需要几个月才能刷新。

要鼓励 Google 更新此部分，只需对您知道已修复的页面使用“Fetch as Google”（在网站管理员工具中的“健康”下），然后在出现时单击“提交到索引”按钮。

使用这种技术，我通常会在几天内看到 URL 从 HTML 改进页面中删除。

# php - 文本框不接受弹出窗口值

> ID：14038950
> 
> 赞同：1
> 
> 时间：2012-12-26T10:02:36.167
> 
> 标签：php, html

我有一个文本框，当我单击它时，弹出窗口打开，但是当我在弹出窗口中选择任何单选选项时，值没有插入文本框中，问题出在哪里？这是文本框

```
 <tr><td> Work </td>
                <td><input title="Enter Work You Want to search ." readonly="readonly" id="search_workind" name="search_workind" type="text" size="20"  onclick="javascript:opendrop()">                
</td></tr> 
```

这个调用函数

```
function opendrop()
{
var popy= window.open('search_kind.php','popup_form','width=380 height=300 left=800 top=300');
} 
```

这是 search_kind.php

```
<?php ob_start() ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Search </title>
<script type='text/javascript'> 
function validepopupform()
{
    window.opener.document.getElementById('search_workind').value=" " 
//self.close();

} 
</script>

</head>

<body>
<form  id="popupform" name="popupform">
<h3>Audit and Assurance</h3>
<input name="kind" type="radio" id="kind" value="A" onclick="javascript:validepopupform()" />A
<br/>
<input name="kind" type="radio" id="kind" value="B" onclick="validepopupform()" />B
<br/>
</form>

</body>

</html>
<?php ob_flush() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:16:44.097

不能设置文本框数据onclick；在 search_kind.php 添加一个提交按钮，然后

```
<td><input title="Enter Work You Want to search ." readonly="readonly" id="search_workind" name="search_workind" type="text" size="20"  onclick="javascript:opendrop()"> value=$_POST['kind'] 
```

# javascript - 错误类型错误：使用 javascript 添加文本 innerHTML 时 document.getElementById(...) 为空？

> ID：14038952
> 
> 赞同：2
> 
> 时间：2012-12-26T10:02:45.070
> 
> 标签：javascript

```
<textarea name="widget-generalcode" cols="50" rows="13" id="widget-generalcode"></textarea> 
```

和 javascript

```
<script>
document.getElementById('widget-generalcode').innnerHTML = 'test';
</script> 
```

当我运行代码时，错误`TypeError: document.getElementById(...) is null`，如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:14:42.473

也许你应该把它放在页面加载中：

```
<script type="text/javascript">
    window.onload = function(){
        document.getElementById('widget-generalcode').innerHTML = 'test';
    };
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:11:41.407

您应该考虑放置 javascript 语句的位置。它将达到预期的效果。我建议您应该在 Firefox 中使用 Firebug 等 Web 开发工具（按 F12），它将帮助您调试 javascript 代码，并且您可以使用 Timeline 功能来检测 Html/javascript 的哪些部分“花费”了大量资源。希望这些信息有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:05:03.870

首先，检查您的 JavaScript 是否在 DOM 加载时执行。一种选择是将`<script>`标签放在`</body>`.

然后，您应该`value`为表单字段使用属性：

```
document.getElementById("widget-generalcode").value = "test"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T13:10:13.363

This caused me much grief. It's a matter of understanding the sequence of execution of the "onLoad" (which occurs after all the PHP has been executed and turned into HTML), and the running of a js command after say parsing the url parameters (which occurs before onLoad).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-30T07:52:31.323

对不起，我是新来的 2 Stackoverflow

在 asp.net 实际上 Startup 是我的 id 但在客户端它将显示为 ctl00_dmrcontent_Startup 所以在你的脚本中将 id 形式更改为 widget-generalcode 到客户端显示的内容

```
<div  id="Startup" runat="server"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T10:14:02.070

您正在尝试在页面上呈现元素之前访问该元素，因此您将永远不会获得该元素，因此请在函数中编写代码，如下所示

```
<script>
  function call()
  {
    document.getElementById('widget-generalcode').value = 'test';
  } 
</script> 
```

现在在下面给出的body标签palce onload =“call（）”中它将起作用

```
<body onload ="call()" >

</body> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-25T17:50:24.913

javascript函数在浏览器呈现的html页面之前运行。因此，在代码运行时，id="widget-generalcode" 的元素并不存在。

在 javscript 文件的顶部使用 window.unload=functionName，*不带*括号 ()。这告诉浏览器在 html 页面加载*后运行该函数。*这样，当函数运行并且 javascript 可以对其进行操作时，html 元素将存在。

# gcc - 如何使用 gcc 和 codeblock 编译汇编语言？

> ID：14038955
> 
> 赞同：2
> 
> 时间：2012-12-26T10:02:51.393
> 
> 标签：gcc, assembly

我现在正在尝试使用 gcc 和 codeblock 编译以下代码：

```
#include <stdio.h>

int main()
{

  char alphabet = 'X';
  printf ("Type letter = ");
    asm{                                //line 8
       mov ah, 02
       mov dl, [alphabet]               // line 9
       int 21h
     }

 printf ("\n");
 return (0);
} 
```

我得到的错误信息如下：

```
 error: expected '(' before '{' token  line 8
  error: 'mov' was not declared in this scope line9 
```

我正在为 x86 计算机编译，想知道如何成功编译上述代码。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:56:42.077

不幸的是 gcc 不支持这样的简单语法：

```
asm {
    mov ah, 02
    mov dl, [alphabet]
    int 21h
} 
```

您可以通过 DCoder 评论的链接找到有关 gcc-inline-assembler 的更多信息：[单击我](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)
解释一切对于答案来说太过分了，所以我只是为 gcc 编写代码，它应该可以为您完成工作：

```
__asm__(
    "movb $2, %%ah;"
    "movb %0, %%dl;"
    "int $0x21;"
    :
    : "r"(alphabet)
    : "%ah", "%dl"
); 
```

请注意，您也可以使用关键字`asm`代替`__asm__`.

# android - 添加/编辑/更改联系人的广播意图 - android

> ID：14038956
> 
> 赞同：2
> 
> 时间：2012-12-26T10:02:53.577
> 
> 标签：android, android-intent, android-service, android-contentprovider, android-contacts

在我的应用程序中，我有一项服务，我想在其中侦听联系人的任何更改，即，当在本机联系人应用程序或任何其他应用程序中添加或编辑任何联系人时。我可以为此目的注册任何广播意图吗？或者有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:27:45.880

发现有人有类似问题，他的解决方案是使用 RawContacts。

[广播联系人添加/更改？](https://stackoverflow.com/questions/5733775/broadcast-on-contact-add-change)

[http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html](http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html)

# c# - GridView 中的列冻结

> ID：14038959
> 
> 赞同：1
> 
> 时间：2012-12-26T10:03:08.023
> 
> 标签：c#, css, gridview, asp.net-4.0

我有一个使用 GridView 的 asp .net Web 应用程序。里面有很多数据，使它可以水平和垂直滚动。现在，我想在水平滚动发生时冻结其中的第一列。我从在线论坛获得了一些帮助，并写了这段特殊的 css 样式：

```
td.locked, th.locked
{
    position: relative;
    top: expression(this.offsetParent.scrollTop);
    background-color: White;        
} 
```

在后面的代码中，我在网格的 RowDataBound 事件中有这个：

```
e.Row.Cells[0].CssClass = "locked"; 
```

但是现在，列的冻结发生在 a 中，如果说我有 15 条记录，而我的 div 只显示 10 条记录，其余部分必须进行垂直滚动，但是冻结列的 15 行溢出了网格。请在下面找到屏幕截图： ![示例截图](../Images/00f50906110f234458ee7461d66d422f.png)

请让我知道我错过了什么，以便我可以为溢出的数据启用垂直滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:36:16.617

也许你可以试试我的解决方案。它可以是gridview中的固定标题和列。

[带有 jQ​​uery 的 GridViewScroll](http://gridviewscroll.aspcity.idv.tw/)

[https://github.com/twlikol/GridViewScroll](https://github.com/twlikol/GridViewScroll)

![在此处输入图像描述](../Images/ca644e5597dde030de4c5ceb41594e0d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:37:47.700

你为gridview设置了高度和宽度吗？尝试为其设置高度和宽度并设置其包装器的高度和宽度。希望能帮到你。

# objective-c - 如何从持久存储中获取数据并显示在自定义表格视单元上？有没有示例代码？

> ID：14038965
> 
> 赞同：0
> 
> 时间：2012-12-26T10:03:54.700
> 
> 标签：objective-c, icloud

蒂姆·路利 (Tim roadley) 也有类似的答案，但只是描绘了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:15:57.680

苹果制作了惊人的[教程](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008305)。在这个示例中，您可以了解如何将 Core Data 与`UITableView`. 一旦我像在 Core Data 中的介绍一样使用它。希望对您有所帮助。

# java - 网络从标签的内联样式属性中抓取数据的问题

> ID：14038967
> 
> 赞同：0
> 
> 时间：2012-12-26T10:04:07.010
> 
> 标签：java, regex, web-scraping, jsoup

所以我有几个内联样式的跨度：

```
<span style="...;width:8px;..."></span>
<span style="...;width:16px;..."></span>
<span style="...;width:13px;..."></span>
<span style="...;width:20px;..."></span>
<span style="...;width:0px;..."></span> //width=0px
<span style="...;width:5px;..."></span>
<span style="...;width:3px;..."></span>
<span style="...;width:90px;..."></span>
<span style="...;width:200px;..."></span> 
```

我想提取“px”值并将其存储到一个数组中。当我们用 到达跨度时`width=0px`，这表示该数​​组的结束。所以上面看起来像这样：

`array1 = [8, 16, 13, 20]`

`array2 = [5, 3, 90, 200]`

我们可以使用整数数组的arraylist来存储数据。

到目前为止，我所拥有的是非常基本的：`Elements spanWidths= doc.select("span");`

到目前为止，这会产生： `"border:...;width:8px;..."`

我相信我们使用正则表达式来解决这个问题，但我不太习惯它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:19:13.373

正则表达式是`\bwidth\s*:\s*(\d+)px`. 然后从第一个捕获组中获取值。也就是说，调用`.group(1)`结果匹配。

# c# - 如何从 typeof(List<>) 获取 typeof(List<>) ) 通过删除通用参数

> ID：14038969
> 
> 赞同：3
> 
> 时间：2012-12-26T10:04:14.947
> 
> 标签：c#, generics

我有`typeof(List<T>)`一个 Type 对象，但我需要`typeof(List<>)`它可以`MakeGenericType()`用来检索 List 的类型对象，这可能吗？

**更新：**伙计们，谢谢。这似乎是一个微不足道的问题。但无论如何，我赞成每个人并接受第一个答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:14:06.560

如果我正确地理解了您的问题，那么您有一个泛型类型 ( `List<int>`) 和另一种类型 (比如说`long`)，并且您想要创建一个`List<long>`. 可以这样做：

```
Type startType = listInt.GetType();   // List<int>
Type genericType = startType.GetGenericTypeDefinition()  //List<T>
Type targetType = genericType.MakeGenericType(secondType) // List<long> 
```

However, if the types you are working with are indeed lists, it might be clearer if you actually used:

```
Type targetType = typeof(List<>).MakeGenericType(secondType) // List<long> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T10:09:03.313

您可以使用[`Type.GetGenericTypeDefinition`](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:11:53.213

我假设您的意思是实现以下目标？

```
var list = new List<int>();
Type intListType = list.GetType();
Type genericListType = intListType.GetGenericTypeDefinition();
Type objectListType = genericListType.MakeGenericType(typeof(object)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:10:02.383

答案是 Type.GetGenericTypeDefinition：http:
[//msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx)

例子：

```
var t = typeof(List<string>);
var t2 = t.GetGenericTypeDefinition(); 
```

然后可以这样做：

```
var t = typeof(List<>);
var t2 = t.MakeGenericType(typeof(string)); 
```

# c++ - OpenCV minMaxLoc 函数中的分段错误

> ID：14038970
> 
> 赞同：0
> 
> 时间：2012-12-26T10:04:20.663
> 
> 标签：c++, opencv, segmentation-fault

昨天我有一个类似的问题，并且能够推理出错误，感谢您的帮助。好吧，今天我遇到了一个非常相似的问题，但是，以我的水平，我仍然无法在这个特定的代码中找到分段错误的原因。

```
 int main()
    {
        Mat src,dst,src_gray;
        int kernel_size = 3;
        int scale = 1;
        int delta = 0;
        int ddepth = CV_16S;
        char* window_name = "sharpness estimate";
        string dir = string("erez images");
        vector<string> files = vector<string>();
        getdir(dir,files);
        cout<<files.size()<<endl;
        int c;
        double *estimate=0,*min=0;
        Point *minLoc=0,*maxLoc=0;
        string parent = "/home/siddarth/examplescv/erez images/";
        for(int i=1; i<=files.size()-2;i++)
        {
            cout<<files.data()[i]<<endl<<i<<endl;
            string path = parent+files.data()[i];
            cout<<path<<endl;
            src = imread(path);

            if( !src.data )
            {
                    return -1;
            }

            cout<<"check1"<<endl;
            cvtColor(src,src_gray,CV_RGB2GRAY);

            Laplacian(src_gray,dst,ddepth,kernel_size,scale,delta,BORDER_DEFAULT);
            //convertScaleAbs(dst,abs_dst);
            cout<<"check2"<<endl;
            minMaxLoc(dst,min,estimate,minLoc,maxLoc,noArray());
            cout<<"estimate :"<<*estimate<<endl;

        }
        waitKey(100000000000);
        return 0;
    } 
```

我能够在运行时继续进行到 check2。我的猜测是由于 minMaxLoc 引起了分段错误。请帮我解决这个问题。如果您能告诉我将来如何解决分段错误以及为什么会发生分段错误，我也会非常高兴。它实际上意味着什么？

注意：getDir 函数是我自己写的，不是内置的。它只是给我给定目录中的目录和文件列表。

我在 linux Ubuntu 11.10 和 OpenCv2.4.3 中执行 opencv

调试器的输出：

> “程序收到信号 SIGSEGV，分段错误。来自 /usr/local/lib/ 的 cv::minMaxIdx(cv::_InputArray const&, double*, double*, int*, int*, cv::_InputArray const&) () 中的 0x001b7c5c libopencv_core.so.2.4"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:17:45.413

看看你的代码，没有调试它，我猜问题是`dst`，它没有被初始化。

在尝试使用它之前，您必须为矩阵分配内存。

[查看 OpenCv 文档的链接](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)，它有一个**很好**的例子来说明如何使用`minMaxLoc()`。请特别注意那里的第 7 项。

但是，正如评论中所述，学习使用调试器、在运行时检查所有变量、检查是否存在应该具有值的 NULL 是一件好事。调试器是程序员最好的朋友；）

我看到的另一个问题`estimation`是 NULL，您尝试在调用`minMaxLoc`. 根据我对这个函数的记忆，它不会改变估计的值，但我可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:13:08.617

错误在于 minMaxLoc 的使用，作为 #Castilho 的指针。以下更改帮助我解决了分段错误。

```
 double estimation,min;
    Point minLoc,maxLoc;
    .
    .
    .
    .
    minMaxLoc(dst,&min,&estimation,&minLoc,&maxLoc,noArray());
    cout<<"estimate :"<<estimate<<endl; 
```

感谢您的帮助 ：）。

# webdav - WebDAV 对服务器错误的响应

> ID：14038971
> 
> 赞同：0
> 
> 时间：2012-12-26T10:04:23.237
> 
> 标签：webdav, caldav

返回 500 错误响应时，我想要一个 WebDAV XML 响应，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<D:error xmlns:D="DAV:">
  <D:must-be-checked-in/>
</D:error>""" 
```

但是，`<D:must-be-checked-in/>`我需要一些“内部服务器错误”的属性，而我在任何相关的 RFC 中都找不到。服务器错误是否有标准的 webdav 响应？或者一个空的响应体可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:32:39.737

如果您没有更具体的说明，空的响应正文就可以了。

# java - 具有多个值的 Java 数组

> ID：14038974
> 
> 赞同：3
> 
> 时间：2012-12-26T10:04:28.570
> 
> 标签：java, arrays, multidimensional-array

我想创建一个多维数组，其中每个节点都将具有以下详细信息：

1.  地名前：“迈索尔”，“班加罗尔”
2.  图标名称 ex：“瀑布”、“野生动物”
3.  放置距离例如：“200”、“123”

当我有超过 30 个值时，最好的方法是什么？

例子：

“班加罗尔”、“200”、“城市”

“迈索尔”、“100”、“历史”

我正在尝试在 Android 中填充一个列表数组，其中每一行都有三个详细信息 - 名称、图标、距离，所以我想在我的 java 类中临时填充该数据。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-26T10:08:40.447

不要使用多维数组。使用一个简单的对象数组（或列表）：

```
public class Place {
    private String name;
    private String icon;
    private int distance;
    // constructor, methods skipped for brevity
}

...

private Place[] places = new Place[10];
// or
private List<Place> places = new ArrayList<Place>(); 
```

Java 是一种面向对象的语言。学习定义和使用对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T10:10:06.993

我认为最好的选择是创建自定义对象。

```
Class TestObject
{
    String Place,Icon,Distance;
    // Setter and Getter method
}

// Create object of class. Store your value using setter and getter method 
   and save object into list

List<TestObject> test = new ArrayList<TestObject>();
test.add(testObject); // 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T10:09:51.167

在元素中创建具有所需属性的类。

现在您可以创建此类的对象数组。

```
class Place {
private String name;
private String icon;
private int distance;

public Place(String name,String icon,int distance){
  this.name=name;
  this.icon=icon;
  this.distance=distance;

} 
```

}

```
Place places[]=new Place[10];
places[0]=new Place("Mysore","wildlife",123); 
and so on 
```

当心实例化对象，否则你最终会得到 NullPointerException

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T11:48:12.430

如果您不想创建单独的类。您也可以使用 JSON 来实现您的目的。
JSON 对象重量轻，可以非常轻松地管理 aaray 数据。

像 ：

```
 JSONObject jo = new JSONObject();
    JSONArray ja = new JSONArray();
    ja.put("Mysore");
    ja.put("wildlife");
    ja.put(123);
    jo.add(KEY, ja); // Adding array to JSON Object with key [KEY can be any unique value] 
```

JSON 易于阅读和管理。

**它提供了很多功能而不是数组。**

# java - 使用 Java PDFBox 将希伯来语写入 PDF

> ID：14038977
> 
> 赞同：5
> 
> 时间：2012-12-26T10:04:43.163
> 
> 标签：java, pdf, unicode, encoding, pdfbox

我正在使用**PDFBox**将文本写入 PDF。
当我写英语时，它工作得非常好，但是当我尝试写希伯来语时，我会胡言乱语。

我已经尝试了各种解决方案，但似乎没有任何效果。我尝试了以下线程中描述的所有内容：[First](https://stackoverflow.com/questions/1713751/using-java-pdfbox-library-to-write-russian-pdf)，[Second](https://stackoverflow.com/questions/13274578/java-write-national-characters-to-pdf-using-pdfbox)，[Third](https://stackoverflow.com/questions/128162/unicode-in-pdf)。

以上所有解决方案都使用 iText。我需要用 PDFBox 以某种方式管理它。

我确实看到使用 DictionaryEncoding 可以工作，尽管我不明白。我尝试使用它，但它不适用于希伯来语（写了从 1488 年到 1514 年的所有希伯来语字母）。

```
COSDictionary cosDic = new COSDictionary();

cosDic.setString( COSName.getPDFName("alef"), "1488" ); // First Hebrew letter
.
.
.
cosDic.setString( COSName.getPDFName("tav"), "1514" ); // Last Hebrew letter

font.setEncoding( new DictionaryEncoding( cosDic ) ); 
```

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-30T15:32:58.493

我的解决方案是切换到[iText](https://itextpdf.com/)。
所有关于在 PDF 中编码 Unicode 字母和 RTL 支持的辛勤工作都是由他们完成的。
我想如果一个库太难了，可能还有另一个库可以做得更好。

# apache - 为什么 mod_rewrite 处理 [L] 标志之后的规则

> ID：14038983
> 
> 赞同：1
> 
> 时间：2012-12-26T10:05:05.830
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

有以下规则：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.+) dir/index.php?$1 [L]
RewriteRule dir/index\.php.* - [F] 
```

为什么最后一条规则被处理并为所有请求返回 Forbidden ？

我需要如果找不到文件或目录，则不应处理下一条规则。

下一个示例也不适用于我：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .? - [S=1]
RewriteRule dir/index\.php.* - [F]
RewriteRule (.+) dir/index.php?$1 
```

它仍然为所有请求返回 Forbidden。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:59:58.117

> 为什么最后一条规则被处理并为所有请求返回 Forbidden ？

当`foobar`请求 URL 时：

*   两个条件（第 2、3 行）匹配
*   模式匹配，生成的 URL 变为`dir/index.php?foobar`（第 4 行）
*   该`[L]`标志会导致重写停止——它不会阻止 Apache 再次访问重写的 URL，因为它已经改变（见下文）。

作为`dir/index.php`输入 URL：

*   由于文件存在，条件不匹配（第 2 行）
*   跳转到第 5 行
*   模式匹配，因此出现 Forbidden 错误

当目录或文件名更改时，Apache 必须重新评估各种配置部分（例如`Directory`和`Files`）以及`.htaccess`“重写”路径的文件。这就是为什么 Apache 可能会执行另一次迭代，即使前一个迭代被`[L]`标志结束。

> 最后一个字符串应该限制对 UFL 处理程序的直接访问。直接访问意味着通过以下链接请求文件：domain.com/dir/index.php

我认为在第 5 行之前添加另一个条件应该可行：

```
RewriteCond %{THE_REQUEST} dir/index\.php\x20HTTP/\d\.\d$
RewriteRule . - [F] 
```

server 变量包含浏览器发送的`THE_REQUEST`请求，没有应用任何重写。*这对于检测浏览器最初*请求的页面可能很有用。

> THE_REQUEST
> 
> 浏览器向服务器发送的完整 HTTP 请求行（例如，“GET /index.html HTTP/1.1”）。这不包括浏览器发送的任何附加标头。与下面的大多数其他变量不同，该值尚未被转义（解码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:40:43.767

我不确定您所说的“下一条规则”是什么意思。

但是，如果您不希望在请求不存在的文件时执行某些规则，那么使用以下结构可能会有所帮助。（以下代码是从[Apache RewriteRule Flags Page](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_s)复制的）

```
# Is the request for a non-existent file?
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# If so, skip these two RewriteRules
RewriteRule .? - [S=2]

    RewriteRule (.*\.gif) images.php?$1
    RewriteRule (.*\.html) docs.php?$1 
```

并且还使用 [R] 而不是 [L] 进行重定向可能有助于解决为所有请求返回 Forbidden 的问题。

# c# - 如何显示所有字段都包含一个文本？

> ID：14038985
> 
> 赞同：0
> 
> 时间：2012-12-26T10:05:30.057
> 
> 标签：c#, .net, sql, visual-studio-2010

我有 SQL 表，我想显示其`Name`列包含用户输入文本的所有行。怎么做？

我在 Visual Studio 2010 上使用 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:21:10.253

```
Select * from tablename where DATALENGTH(Name) > 0 
```

在您的 SQLCommand 对象中尝试此查询..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:13:03.543

```
select * from Table where Name is not null
select * from Table where Name is not null and Name<>'' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:14:06.810

尝试使用此查询

```
sqlcommand cmd=new sqlcommand();
cmd="Select * from tablename where Name ='" + textboxid.text + "'"; 
```

在这里，tablename 是您创建的表的名称，textbox id 是您将在其中输入名称的文本框的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:42:51.687

试试这个，它使用查询参数：

```
SqlCommand myCommand = new SqlCommand(
   string.Format("Select * from Table where Name = @NameInput"), SqlConnection);

SqlParameter param = new SqlParameter();
param.ParameterName = "@NameInput";
param.Value = textbox.Text;
param.SqlDbType = SqlDbType.Char;
myCommand.Parameters.Add(param); 
```

# jquery - 使用 jquery 进行分页

> ID：14038986
> 
> 赞同：1
> 
> 时间：2012-12-26T10:05:30.353
> 
> 标签：jquery, pagination

我试图用 jQuery 和这里的页码在一个不起作用的 for 循环中进行分页：

**HTML**

```
<div id="inf"></div>
<div id="pageNrs"></div>
... 
```

**JavaScript**

```
var pNr = 1;
function cVal(nr) {
    pNr = nr;
    $('#inf').html(pNr);
}

 $(document).ready(function () {
        var data = getData();
        n = data.length;
        var pnr = 1;
        var pnrs = Math.ceil(n / 8.0);
        $('#pageNrs').append('<span id="fst">&lt;&lt;</span> | ');
        $('#fst').click(function () {
            cVal(1); 
        });
        $('#pageNrs').append('<span id="prv">&lt;</span> | ');
        $('#prv').click(function () {
            cVal(pNr < 2 ? 1 : pNr - 1);
        });
        for (var i = 1; i <= pnrs; i++) {
        //problem is exactly here...
            $('#pageNrs').append('<span id="pnr_' + i + '">' + i + '</span> | ');
            $('#pnr_' + i).click(function () { alert(('#pnr_' + i)); });
        }

        $('#pageNrs').append('<span id="nxt">&gt;</span> | ');
        $('#nxt').click(function () { 
            cVal(pNr >= pnrs ? pnrs : pNr + 1); 
        });
        $('#pageNrs').append('<span id="lst">&gt;&gt;</span>');
        $('#lst').click(function () { 
            cVal(pnrs);
        });
    }); 
```

如何实现这一点，如果我单击`pange nr 7`，它会发出警报`#pnr_7`，然后单击`nr 3`，它会发出警报`#pnr_3`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:17:28.680

你可以试试这个：

```
 function doSomething(page) {
        alert(page);
    }

    $('#pageNrs').append('<span id="pnr_' + i + '" onclick="doSomething(' + i + ');">' + i + '</span> | '); 
```

# visual-studio-2012 - 开始调试 c++ 项目时，Visual Studio 2012 崩溃

> ID：14038990
> 
> 赞同：2
> 
> 时间：2012-12-26T10:05:41.380
> 
> 标签：visual-studio-2012, visual-studio-debugging

前几天我遇到一个问题，当我开始在 Visual Studio 2012 中调试 C++ 项目时，VS 立即崩溃。它提供了向 Microsoft 发送报告然后重新启动的选项。它没有提供任何可能导致问题的额外信息。在 VS 崩溃之前，它有时会显示一个对话框，说明它正在加载符号。

我使用的是 Windows 8、Visual Studio 2012。我禁用了扩展以从等式中消除它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T03:41:04.737

我正在使用 Visual Studio 2012 Express (Desktop)，在执行以下操作后崩溃似乎已经停止：

*   在工具 -> 选项 -> 调试 -> 符号 -> 指定模块窗口中取消选中“始终加载位于模块旁边的符号”。
*   在工具 -> 选项 -> 调试 -> 符号窗口中选择“所有模块，除非排除”（而不是“仅指定模块”）。
*   在工具 -> 选项 -> 调试 -> 编辑并继续窗口中取消选中“启用编辑并继续”。不确定这是否是绝对必要的，但它确实会影响 codegen。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:05:41.380

由于我使用的是 Windows 8，我的第一个想法是问题与操作系统相关，因为我在 Win 7 上没有这个问题。我在网上没有找到任何有用的信息可以说服我这是 Win 8 故障。

在 VS 崩溃之前，它有时会显示一个对话框，说它正在加载符号。这让我尝试了工具 -> 选项 -> 调试 -> 符号中的设置。我检查了缓存符号文件夹的权限，但没有帮助。我检查了“仅指定模块”的自动加载符号...选项。通过单击“指定模块”链接，我看到指定模块的列表是空的，所以我认为它不会尝试加载任何模块。我错了。我实际上不得不取消选中“始终加载位于模块旁边的符号”复选框。取消选中此选项解决了我的崩溃问题，现在一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T22:07:08.047

Unchecked "enable just my code(managed only)" in the Tools -> Options -> Debugging -> General Tested on windows 8 and 10 with VS 2012.

# php - Heroku：有效函数的 PHP 致命错误 - mb_check_encoding

> ID：14038993
> 
> 赞同：1
> 
> 时间：2012-12-26T10:06:03.513
> 
> 标签：php, heroku

我有以下声明：

```
$img->setTitle(mb_check_encoding($item['title'], 'UTF-8') ? $item['title'] : utf8_encode($item['title'])); 
```

这适用于我的 PHP 5.4.17 本地设置和具有 PHP 5.3.xx 的共享主机

但是当我将此应用程序部署到 Heroku（具有 PHP 5.3.10）时，它会在日志中显示以下错误：

`2012-12-26T09:55:28+00:00 app[web.1]: [Wed Dec 26 09:55:27 2012] [error] [client 10.119.79.71] PHP Fatal error: Call to undefined function mb_check_encoding() in /app/www/includes/utils.php on line 44, referer: https://imagemash.herokuapp.com/`

根据[php.net docs](http://php.net/manual/en/function.mb-check-encoding.php)，支持 PHP 5 >= 5.1.3 `mb_check_encoding` *。*

我究竟做错了什么？或者我的应用程序是否以某种方式使用了旧版本的 PHP？似乎也不需要设置任何 php.ini 值来启用此功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-15T21:19:18.807

感谢 AJ。

```
$ yum install php-mbstring 
```

也许重新加载apache：

```
$ systemctl reload apache2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T17:01:46.913

感谢 DCoder 的指针和[http://chrismcleod.me/2011/11/30/use-custom-php-extensions-on-heroku/上的教程，安装了](http://chrismcleod.me/2011/11/30/use-custom-php-extensions-on-heroku/)[https://github.com](https://github.com/wuputah/heroku-libraries)上的 mbstring.so 扩展[/wuputah/heroku 库](https://github.com/wuputah/heroku-libraries)

这解决了问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-22T09:23:00.237

将内容添加`composer.json`到您的项目根目录：

```
{
    "require": {
        "ext-mbstring": "*"
    }
} 
```

更多信息[https://devcenter.heroku.com/articles/php-support](https://devcenter.heroku.com/articles/php-support)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T04:30:13.150

我在 Red Hat Linux 上遇到了同样的问题。

您需要安装 mbstring 扩展。这是安装的链接：

[http://www.knowledgebase-script.com/kb/article/how-to-enable-mbstring-in-php-46.html](http://www.knowledgebase-script.com/kb/article/how-to-enable-mbstring-in-php-46.html)

这为我解决了这个问题。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-04T07:59:30.713

如果您是 linux 用户，则只需运行

```
sudo apt-get install php7.0-mbstring 
```

这里只维护你的php版本，即**php7.2-mbstring**或**php7.3-mbstring**

并且不要忘记重新启动服务器，重新启动只需运行运行：

```
sudo service apache2 restart 
```